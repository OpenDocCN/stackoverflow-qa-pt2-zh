# StackOverflow 问答 14860000-14860999

# jquery - jquery跨度值选择器

> ID：14860000
> 
> 赞同：0
> 
> 时间：2013-02-13T18:02:25.727
> 
> 标签：jquery, jquery-selectors

是否可以使用类似于选择这样的输入的 jquery 选择器找到跨度

```
$("input[value=boo]").parent().addClass("red"); 
```

我试过用文本、内容和其他东西替换价值，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:05:03.783

您可以使用`filter`方法：

```
$("span").filter(function() {
     var txt = this.textContent || this.innerText;
     // var txt = $(this).text();
     return txt === 'boo';
}).parent().addClass("red"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:06:23.907

肯定的事。你可以做类似`$("span[name='test']").parent().addClass("red");`或的事情`$("span[id='test']")`，它会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:07:32.930

假设这是您的跨度：

```
<span class='span-1'>Text of span.</span> 
```

然后：

```
$('span[class^="span"]').addClass('red'); 
```

# delegates - 使用非静态方法的委托[没有选择的答案]

> ID：14860002
> 
> 赞同：2
> 
> 时间：2013-02-13T18:02:28.223
> 
> 标签：delegates

我非常有信心我应该能够使用具有非静态方法的委托，但是下面给了我一个错误：

```
public class TestClass
{
    private delegate void TestDelegate();
    TestDelegate testDelegate = new TestDelegate(MyMethod);

    private void MyMethod()
    {
        Console.WriteLine("Foobar");
    }
} 
```

我得到的错误是：

> 字段初始值设定项不能引用非静态字段、方法或属性

如果我将 MyMethod 设为静态，则一切正常。我认为我可以使用非静态方法的委托是不是完全错误（我相信我记得过去这样做过）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-12T14:25:25.903

回答这个问题，因为我必须“显示更多评论”并在我意识到实际答案之前做双重考虑。

错误：

> 字段初始值设定项不能引用非静态字段、方法或属性

解决方案是在构造函数中初始化委托。

我实际上无法在 C# 语言参考本身中找到它，而且很多库存示例都是静态方法。

IE

```
public class TestClass
{
    private delegate void TestDelegate();
    TestDelegate testDelegate;

    public TestClass()
    {
        testDelegate = new TestDelegate(MyMethod);
    }

    private void MyMethod()
    {
        Console.WriteLine("Foobar");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:07:51.823

怎么样 TestDelegate testDelgate = MyMethod;

# html - 从不同域加载页面并突出显示/滚动到该页面的文本部分

> ID：14860004
> 
> 赞同：0
> 
> 时间：2013-02-13T18:02:31.000
> 
> 标签：html, iframe, scroll, cross-domain, highlight

是否可以告诉浏览器从不同的域（例如在 iframe 中）打开网站并突出显示部分文本并将该部分滚动到视图中？（还记得 Google 提供了搜索结果页面的缓存版本，其中突出显示了搜索结果吗？）

我想避免必须通过服务器代理页面并在那里修改它。有没有办法做这个客户端？这可能需要跨站点脚本，这很困难，对吗？

文本中只需要突出显示一个部分，所以我并不关心这是通过文本选择发生的，还是在该部分周围放置了一些标记（如 span 元素）。

不幸的是，这个其他页面来自哪个站点超出了我的控制范围，因此我无法修改该页面以在正确的位置包含一个锚点。

例如，是否可以告诉浏览器在文档中进行全文搜索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:50:19.857

恐怕所有的答案都已经在你的问题中了。客户端，您无法从不受您控制的另一个域访问页面内容。像 postMessage 这样的跨站点技术只有在你控制两端的情况下才会起作用。

# python - 将另一个对象传递给主烧瓶应用程序

> ID：14860007
> 
> 赞同：14
> 
> 时间：2013-02-13T18:02:42.013
> 
> 标签：python, flask

我对如何以正确的方式将对象传递给烧瓶应用程序有疑问。

这个想法很简单。

我想为我的应用程序创建一个 api，这意味着我的烧瓶应用程序处理的 http 请求将触发我的主应用程序中的方法。

为此，我需要烧瓶以一种或另一种方式了解我的其他过程。

目前，我有类似的东西：

```
if __name__ == '__main__':
    Logger = MyProcess()
    app.run() 
```

我需要能够做这样的事情：

```
@app.route('/nb_trendy')
def nb_trendy():

    res = Logger.get_trendy()
    return jsonify(res) 
```

这意味着我要么需要为应用程序提供 Logger 的句柄，要么直接在应用程序中定义 Logger。

但是在我能找到的每个解决方案中，我都需要创建一个**继承**app 的类，以覆盖**`__init__()`**并将对象作为参数，或者修改**`run()`**方法。

我目前的做法是：

```
class MyFlask(Flask):
    def __init__():
        Flask.__init__()
        Logger = MyProcess() 
```

这也是你会这样做的方式，还是有更好的方式来做到这一点？

谢谢！

这是此问题的更通用版本：[Flask 中的 Web API](https://stackoverflow.com/questions/14891848/web-api-in-flask)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-15T21:13:25.583

看看[应用程序工厂](http://flask.pocoo.org/docs/patterns/appfactories/)，它应该可以满足您的需求。您将创建一个返回您的 Flask 应用程序的工厂，您会将记录器发送到该应用程序 - 如下所示：

```
def create_app(logger_instance):
    app = Flask(__name__)
    app.config['LOGGER'] = logger_instance
    return app 
```

然后在您的 runserver.py 中，您将创建并传入记录器：

```
from yourapp import create_app
if __name__ == '__main__':
    logger = MyProcess()
    app = create_app(logger)
    app.run() 
```

完成后，您的应用程序可以引用内部的记录器`app.config['LOGGER']`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:18:35.420

您可能想为此使用烧瓶应用程序上下文

```
from flask import _app_ctx_stack 

def getLogger():
    appContext = _app_ctx_stack.top
    logger = getattr(appContext, "Logger", None)
    if logger is None:
        logger = MyProcess()
        appContext.Logger = logger
    return logger

....

@app.route('/nb_trendy')
def nb_trendy():
    logger = getLogger()
    res = logger.get_trendy()
    return jsonify(res) 
```

Armin 对此的更多见解：[https ://speakerdeck.com/mitsuhiko/advanced-flask-patterns](https://speakerdeck.com/mitsuhiko/advanced-flask-patterns)

# c# - c# 图像旋转

> ID：14860011
> 
> 赞同：-1
> 
> 时间：2013-02-13T18:02:54.837
> 
> 标签：c#

我需要一些帮助来解决一个真正让我头疼的问题。这是一个允许用户加载图像文件，然后将图像顺时针或逆时针旋转 90 度的应用程序。该代码工作正常，但是如果用户顺时针旋转图像，然后决定通过逆时针将其旋转回初始位置，则图像不在应有的位置。我不确定我缺少什么，因为我对 c# 很陌生。下面是我用于顺时针旋转的代码。

```
private int cW = 0;
private void button6_Click(object sender, RoutedEventArgs e)
{
    RotateTransform rotateTransform = new RotateTransform();
    rotateTransform.CenterX = image1.ActualWidth / 2.0;
    rotateTransform.CenterY = image1.ActualHeight / 2.0;
    cW += 90;

    rotateTransform.Angle = cW;

    TransformGroup transformGroup = new TransformGroup();
    transformGroup.Children.Add(rotateTransform);

    image1.RenderTransform = transformGroup; 
} 
```

我已经使用 if/else 语句完全更改了代码。以下给出了我正在寻找的结果。

```
RotateTransform cwRotateTransform;
private void button6_Click(object sender, RoutedEventArgs e)
{
    if (cwRotateTransform == null)
    {
        cwRotateTransform = new RotateTransform();
    }

    image1.LayoutTransform = cwRotateTransform;

    if (cwRotateTransform.Angle == 360)
        cwRotateTransform.Angle = 0;

    else cwRotateTransform.Angle += 90;
} 
```

对于逆时针，只需将 else 的“90”更改为“-90” `cwRotateTransform.Angle`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:17:52.920

使用图片框和使用旋转翻转的位图对我来说效果很好：

```
Bitmap bitmapPicturebox1;

private void Form1_Load(object sender, EventArgs e)
{
    pictureBox1.ImageLocation = @"C:\Wallpaper.jpg";
}
private void btnLeft_Click(object sender, EventArgs e)
{
    bitmapPicturebox1 = new Bitmap(pictureBox1.Image);
    bitmapPicturebox1.RotateFlip(RotateFlipType.Rotate90FlipNone);
    pictureBox1.Image = bitmapPicturebox1;
}  

private void btnRight_Click(object sender, EventArgs e)
{
    bitmapPicturebox1 = new Bitmap(pictureBox1.Image);
    bitmapPicturebox1.RotateFlip(RotateFlipType.Rotate270FlipNone);
    pictureBox1.Image = bitmapPicturebox1;
} 
```

# c# - SQL 错误：无法插入外键值，因为对应的主键值不存在

> ID：14860017
> 
> 赞同：0
> 
> 时间：2013-02-13T18:03:09.437
> 
> 标签：c#, sql, razor, security-roles, webmatrix-2

我正在使用标准`WebSecurity`功能创建一个管理角色 - 管理页面。

我收到此错误

> *无法插入外键值，因为对应的主键值不存在。[外键约束名 = fk_UserId]*

在以下代码行：

```
if(!Roles.IsUserInRole(userNames[0], roleNames[0])){
       Roles.AddUsersToRoles(userNames, roleNames);
} 
```

我的理解是各个表应该与一`userId`列链接。他们是。我正在使用 WebMatrix 2 和 Razor 框架进行开发。

您的 SQL Mastermind 有什么想法或解决方案吗？非常感谢！

下面是我如何处理的代码片段！

```
 @{
    var roleName = "";
    string[] userNames = new string[1];
    string[] roleNames = new string[1];

    var db = Database.Open("ResearchA");
    var selectQueryString = "SELECT UserId, username FROM [usernames]";

  if(IsPost){

    // Create new role
    if(!Request["buttonCreateRole"].IsEmpty()){
      roleName=Request["textRoleName"];

      if(!Roles.RoleExists(roleName) && !roleName.IsEmpty()){
        Roles.CreateRole(roleName);
      }
    } 

    // Delete role

    if(!Request["buttonDeleteRole"].IsEmpty()){
      roleName=Request["textRoleName"];

      if(Roles.GetUsersInRole(roleName).Length == 0 && !roleName.IsEmpty()){
        Roles.DeleteRole(roleName, true); 
      }
    } 

    // Add user to role

    if(!Request["buttonAddUserToRole"].IsEmpty()){
      userNames[0] = Request["selectUserName"];
      roleNames[0] = Request["selectRoleName"];

      if(!Roles.IsUserInRole(userNames[0], roleNames[0])){
       Roles.AddUsersToRoles(userNames, roleNames);
      }
    }

    // Delete user from role

    if(!Request["buttonDeleteUserFromRole"].IsEmpty()){
      userNames[0] = Request["selectUserName"];
      roleNames[0] = Request["selectRoleName"];

      if(Roles.IsUserInRole(userNames[0], roleNames[0])){
        Roles.RemoveUsersFromRoles(userNames, roleNames);
      }
    } 
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:36:36.227

不确定，但听起来您正在尝试手动创建用户和角色表。

您是否尝试过运行 aspnet_regsql.exe？您可以在“%WINDIR%\Microsoft.NET\Framework\v4.0.30319\”目录中找到它。它将打开一个向导，使用同一“%WINDIR%\Microsoft.NET\Framework\v4.0.30319\”目录中的 SQL 脚本创建适当的表。

# jquery - jQuery 函数 .bind 在 IE 中不起作用

> ID：14860018
> 
> 赞同：4
> 
> 时间：2013-02-13T18:03:25.367
> 
> 标签：jquery, html, jquery-ui, bpopup

[这是我的网站](http://johns-webdesign.com/port.html)

如果您单击小缩略图，则会显示更大的图像。在 Chrome 中它可以完美运行，但是当我在 IE9 中尝试它时，它什么也没做。这是我的代码：

jQuery

```
// JavaScript Document

//Button1
;(function($) {

         // DOM Ready
        $(function() {

            // Binding a click event
            // From jQuery v.1.7.0 use .on() instead of .bind()
            $('#my-button').bind('click', function(e) {

                // Prevents the default action to be triggered. 
                e.preventDefault();

                // Triggering bPopup when click event is fired
               $('#element_to_pop_up').bPopup({
                    appendTo: 'form'
                    , zIndex: 2
                    , modalClose: false
                });
            });
         });
     })(jQuery);
//Button2

     ;(function($) {

         // DOM Ready
        $(function() {

            // Binding a click event
            // From jQuery v.1.7.0 use .on() instead of .bind()
            $('#my-button1').bind('click', function(e) {

                // Prevents the default action to be triggered. 
                e.preventDefault();

                // Triggering bPopup when click event is fired
               $('#element_to_pop_up1').bPopup({
                    appendTo: 'form'
                    , zIndex: 2
                    , modalClose: true
                });
            });
         });
     })(jQuery);

     ;(function($) {
//Button3

         // DOM Ready
        $(function() {

            // Binding a click event
            // From jQuery v.1.7.0 use .on() instead of .bind()
            $('#my-button2').bind('click', function(e) {

                // Prevents the default action to be triggered. 
                e.preventDefault();

                // Triggering bPopup when click event is fired
               $('#element_to_pop_up2').bPopup({
                    appendTo: 'form'
                    , zIndex: 2
                    , modalClose: false
                });
            });
         });
     })(jQuery); 
```

还有我的 HTML

```
<!-- Portfolio Popup Box -->

    <div id="element_to_pop_up">
             <a class="bClose">x<a/>
             <img src="imgs/portfolio/bobbie.png" width="100%" height="100%" alt="Bobbie Gordon Website" /> 
    </div>

    <div id="element_to_pop_up1">
             <a class="bClose">x<a/>
             <img src="imgs/portfolio/jareth.png" width="100%" height="100%" alt="Bobbie Gordon Website" /> 
    </div>

    <div id="element_to_pop_up2">
             <a class="bClose">x<a/>
    </div>

<!-- Portfolio Popup Box End --> 
```

CSS

```
#element_to_pop_up { 
    padding:5px;
    color:#000;
    display:none; 
    width:90%;
    height: 100%;
    position:absolute;
    border:1px solid #000;
}
#element_to_pop_up1 { 
    padding:5px;
    color:#000;
    display:none; 
    width:90%;
    height: 90%;
    position:absolute;
}
#element_to_pop_up2 { 
    padding:5px;
    color:#000;
    display:none; 
    width:90%;
    height: 90%;
    position:absolute;
}

.bClose{
    cursor:pointer;
    position:absolute;
    right:-15px;
    top:-15px;
    font-size:22px;
    font-weight:bold;
} 
```

我很确定这与绑定 onclick 有关。也许 IE 不识别它？或者只是在您单击它时取消它，从而产生什么都没有发生的效果。

谢谢大家。

**由于 Sparky，现在已解决此问题！**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T18:11:07.577

将您的 jQuery 版本转换`.bind()`为或降级。[`.on()`](http://api.jquery.com/on/)您的站点正在运行[jQuery 1.9，它几乎删除了所有已弃用的功能](http://blog.jquery.com/2013/02/04/jquery-1-9-1-released/)。您还可以包含[迁移插件](http://blog.jquery.com/2013/01/31/jquery-migrate-1-1-0-released/)。

此外，对于网站在 Explorer 中正常工作的任何希望，您必须首先验证 HTML：

[http://validator.w3.org/check?uri=http%3A%2F%2Fjohns-webdesign.com%2Fport.html&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fjohns-webdesign.com%2Fport.html&charset=%28detect+automatically%29&doctype=Inline&group=0)

# java - jstatd 连接问题

> ID：14860021
> 
> 赞同：0
> 
> 时间：2013-02-13T18:03:40.520
> 
> 标签：java, linux, jstatd

我正在尝试在我们拥有的 Amazon EC2 linux 服务器上运行 jstatd：

```
jstatd -J-Djava.security.policy=/usr/lib/jvm/java-6-openjdk/bin/jstatd.all.policy -J-Djava.rmi.server.hostname=xxx.xxx.xxx.xxx 
```

我得到了这个结果：

```
Could not contact registry
Connection refused to host: 10.212.XX.XX; nested exception is:
        java.net.ConnectException: Connection refused
java.rmi.ConnectException: Connection refused to host: 10.212.XX.XX; nested exception is:
etc 
```

但我不知道它为什么要尝试连接到 10.212.XX.XX，它看起来像一个内部 ip，但它不是该服务器或我们任何服务器的内部 ip。为什么它试图连接到这个，我该如何改变它？

注：以上IP地址仅用于隐藏实际IP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-19T18:40:37.110

我遇到了同样的问题，我在另一篇文章中找到了[答案](https://stackoverflow.com/questions/834581/remote-jmx-connection)。

在我的特殊情况下，在排除另一个错误后，我发现`hostname -i`返回的是一个奇怪的 IP 地址，而不是服务器上配置的 IP 地址。

解决方案是编辑`/etc/hosts`添加条目以匹配服务器的 IP 地址。

或许这里也是同样的情况。

# javascript - 使用原型创建带有方法的数组

> ID：14860028
> 
> 赞同：3
> 
> 时间：2013-02-13T18:03:59.373
> 
> 标签：javascript, arrays, constructor, prototype

我想返回一个带有额外方法的数组。我通常会这样做：

```
MyConstructor = function(a, b, c){
    var result = [a, b, c];
    result.method1 = function(){
        return a + b + c ;
    }
    return result ;
}

var obj = MyConstructor(2, 4, 6); // removed `new` 
```

但是随着方法和使用的数量的增长，我相信使用原型而不是每次都定义这些新的（相同的）匿名函数会更容易维护（并且更有效率），但我找不到这样做的方法没有这些方法最终在`Array.prototype`.

这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:26:11.003

修改您的示例以允许与原型链一起使用将如下所示：

```
// this could still be    var MyConstructor = function...
// but I prefer this form for Classes
function MyConstructor(a, b, c){
    this.result = [a, b, c];
}

MyConstructor.prototype.method1 = function(){
    // Array.reduce can be used for summation, or you could hardcode something like:
    // return this.result[0] + this.result[1] + this.result[2]
    // or do a summation through a for-loop, etc 
    return this.result.reduce(function(a,b){return a+b});
}

var obj = new MyConstructor(2, 4, 6);
console.log(obj.result, obj.method1()); // [2, 4, 6]  12 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:35:53.343

一种方法是使用包装对象，如 Shmiddty 的回答。

或者，如果您不想使用包装器但想直接修改数组，则可以对其进行扩充：

```
// Define some special methods for use
var specialMethods = {
  sum: function() {
    var i = 0, len = this.length, result = 0;
    for (i; i < len; i++) result += this[i];
    return result;
  },
  average: function() {
    return this.sum() / this.length;
  }
};

function specialize(array) {
  var key;
  for (key in specialMethods) {
    if (specialMethods.hasOwnProperty(key)) {
      array[key] = specialMethods[key];
    }
  }
  return array;
}

var arr = specialize([1, 2, 3, 4, 5]);
console.log(arr.sum()); // 15
console.log(arr.average()); // 3 
```

这样您就不会接触`Array.prototype`，并且您的方法会被添加到数组中，而无需一遍又一遍地重新定义它们。但是请注意，它们确实会被复制到每个数组中，因此会有一些内存开销——它没有进行原型查找。

另外，请记住，您始终可以只定义对数组进行操作的函数：

```
function sum(array) {
  var i = 0, len = array.length, result = 0;
  for (i; i < len; i++) result += array[i];
  return result;
} 
```

您没有得到 的语法糖`somearray.sum()`，但该`sum`函数只定义一次。

这一切都取决于你需要/想要什么。

# doctrine-orm - 添加 BjyAuthorize 角色（使用 ZfcUser 和 Doctrine）

> ID：14860030
> 
> 赞同：1
> 
> 时间：2013-02-13T18:04:00.737
> 
> 标签：doctrine-orm, zend-framework2, zfcuser

我正在尝试在 ZF2 中使用 bjy-authorize、zfcUser 和 zfc-user-doctrine-orm。我安装了有关手册的所有模块。要将 bjyAuthorize 与教义一起使用，我使用了本教程[https://github.com/bjyoungblood/BjyAuthorize/pull/62](https://github.com/bjyoungblood/BjyAuthorize/pull/62)

如何创建新角色以及如何将它们链接到用户？

上面的教程使用它来配置 role_providers：

```
 'BjyAuthorize\Provider\Role\DoctrineEntity' => array(
                                        'role_entity_class' => 'Material\Entity\Role',
                                    ), 
```

在 BjyAuthorize 的其他一些配置文件中，这是通过

```
 // this will load roles from the user_role table in a database
    // format: user_role(role_id(varchar), parent(varchar))
    'BjyAuthorize\Provider\Role\Doctrine' => array(
                            'table'             => 'user_role',
                            'role_id_field'     => 'role_id',
                            'parent_role_field' => 'parent',
     ), 
```

这些配置有什么区别？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:10:31.840

请避免使用`BjyAuthorize\Provider\Role\Doctrine`，因为我很快就会弃用它。

继续使用新推出的[`BjyAuthorize\Provider\Identity\AuthenticationDoctrineEntity`](https://github.com/bjyoungblood/BjyAuthorize/blob/1.1.1/docs/UsingDoctrineEntities.md)

`BjyAuthorize\Provider\Role\Doctrine`正在使用直接 SQL 查询，这在使用 Doctrine 时并不真正建议（主要是可移植性）

# python - Python CGI - UTF-8 不起作用

> ID：14860034
> 
> 赞同：6
> 
> 时间：2013-02-13T18:04:23.700
> 
> 标签：python, html, utf-8, python-3.x, cgi

对于 HTML5 和 Python CGI：

如果我编写 UTF-8 元标记，我的代码将不起作用。如果我不写，它会起作用。

页面编码为 UTF-8。

```
print("Content-type:text/html")
print()
print("""
    <!doctype html>
    <html>
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
        şöğıçü
    </body>
    </html>
""") 
```

此代码不起作用。

```
print("Content-type:text/html")
    print()
    print("""
        <!doctype html>
        <html>
        <head></head>
        <body>
            şöğıçü
        </body>
        </html>
    """) 
```

但是这个代码有效。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T18:33:52.700

对于 CGI，使用`print()`要求为输出设置正确的编解码器。`print()`写入[`sys.stdout`](http://docs.python.org/3/library/sys.html#sys.stdout)并`sys.stdout`使用特定编码打开，如何确定取决于平台*，并且*可能因脚本运行方式而异。将脚本作为 CGI 脚本运行意味着您几乎不知道将使用什么编码。

在您的情况下，Web 服务器已将文本输出的语言环境设置为 UTF-8 以外的固定编码。Python 使用该语言环境设置以该编码生成输出，并且如果没有`<meta>`标头，您的浏览器会正确猜测该编码（或服务器已在 Content-Type 标头中传达了它），但是`<meta>`您告诉它使用不同的标头编码，一种对生成的数据不正确的编码。

`sys.stdout.buffer`在显式编码为 UTF-8 后，您可以直接写入。制作一个辅助函数以使其更容易：

```
import sys

def enc_print(string='', encoding='utf8'):
    sys.stdout.buffer.write(string.encode(encoding) + b'\n')

enc_print("Content-type:text/html")
enc_print()
enc_print("""
    <!doctype html>
    <html>
    <head>
        <meta charset="UTF-8">
    </head>
    <body>
        şöğıçü
    </body>
    </html>
""") 
```

另一种方法是替换为使用您需要的编解码器`sys.stdout`的新[`io.TextIOWrapper()`对象](https://docs.python.org/3/library/io.html#io.TextIOWrapper)：

```
import sys
import io

def set_output_encoding(codec, errors='strict'):
    sys.stdout = io.TextIOWrapper(
        sys.stdout.detach(), errors=errors,
        line_buffering=sys.stdout.line_buffering)

set_output_encoding('utf8')

print("Content-type:text/html")
print()
print("""
    <!doctype html>
    <html>
    <head></head>
    <body>
        şöğıçü
    </body>
    </html>
""") 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-05-27T22:53:00.390

来自[https://ru.stackoverflow.com/a/352838/11350](https://ru.stackoverflow.com/a/352838/11350)

首先不要忘记在文件中设置编码

```
#!/usr/bin/env python
# -*- coding: utf-8 -*- 
```

然后尝试

```
import sys
import codecs

sys.stdout = codecs.getwriter("utf-8")(sys.stdout.detach()) 
```

或者，如果您使用 apache2，请添加到您的 conf.

```
AddDefaultCharset UTF-8    
SetEnv PYTHONIOENCODING utf8 
```

# c# - 在给定可能的完整文件路径的情况下检查文件或父目录是否存在

> ID：14860036
> 
> 赞同：9
> 
> 时间：2013-02-13T18:04:32.290
> 
> 标签：c#, .net, file-io, path, filepath

给定一个可能的完整文件路径，我将以C **:\dir\otherDir\possiblefile 为例**

***C:\dir\otherDir\possiblefile***文件

或 ***C:\dir\otherDir***目录

存在。我不想创建文件夹，但如果文件不存在，我想创建它。该文件可能有扩展名，也可能没有。我想完成这样的事情：

![在此处输入图像描述](../Images/a6df69538e9a3f98f50b4fe012b14b66.png)

我想出了一个解决方案，但在我看来，这有点矫枉过正。应该有一个简单的方法来做到这一点。

这是我的代码：

```
// Let's example with C:\dir\otherDir\possiblefile
private bool CheckFile(string filename)
{
    // 1) check if file exists
    if (File.Exists(filename))
    {
        // C:\dir\otherDir\possiblefile -> ok
        return true;
    }

    // 2) since the file may not have an extension, check for a directory
    if (Directory.Exists(filename))
    {
        // possiblefile is a directory, not a file!
        //throw new Exception("A file was expected but a directory was found");
        return false;
    }

    // 3) Go "up" in file tree
    // C:\dir\otherDir
    int separatorIndex = filename.LastIndexOf(Path.DirectorySeparatorChar);
    filename = filename.Substring(0, separatorIndex);

    // 4) Check if parent directory exists
    if (Directory.Exists(filename))
    {
        // C:\dir\otherDir\ exists -> ok
        return true;
    }

    // C:\dir\otherDir not found
    //throw new Exception("Neither file not directory were found");
    return false;
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T18:07:48.970

您的步骤 3 和 4 可以替换为：

```
if (Directory.Exists(Path.GetDirectoryName(filename)))
{
    return true;
} 
```

这不仅更短，而且将为包含`Path.AltDirectorySeparatorChar`诸如`C:/dir/otherDir`.

# java - 不依赖 DLP 或素数分解的 Java TLS

> ID：14860039
> 
> 赞同：3
> 
> 时间：2013-02-13T18:04:37.523
> 
> 标签：java, windows, encryption, ssl

我正在使用可抵抗 Shor 算法的加密在 Windows 上用 Java 编写文件服务器。

我的绊脚石是 SSL/TLS。据我所知，我不能使用标准的 java 库，因为套接字加密使用 Diffie-Hellman 密钥交换，它依赖于离散对数问题。

我研究了 Salsa20，一种新的（ish）流密码，但安全交换密钥的问题仍然存在。我还查看了 cyaSSL，但 Java 服务提供商不支持 windows，并且使用 C 不是一个选项。

任何人都可以提供任何方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:10:25.390

有两种通用方法：

1.  使用预共享密钥

    没有密钥交换，没有量子问题。但是现在您需要在带外分发共享密钥，因此它可能无法解决问题。

2.  使用量子证明密钥交换

    例如这里是[NTRU](https://datatracker.ietf.org/doc/html/draft-ietf-tls-ntru-00)的规范（只是一个草案，没有真正的标准，请注意专利）

    但总的来说，非对称后量子加密似乎还没有准备好生产。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T21:47:06.920

前景黯淡。

有一些非对称加密系统基于不是 DLP 或分解问题的棘手问题。例如，[GGH 密码系统](http://en.wikipedia.org/wiki/GGH_encryption_scheme)基于最接近向量的难题。你会发现有很多签名方案可以抵抗量子密码学，但加密系统并不多，而且确实存在的签名方案似乎都存在安全问题。

至于将 GGH 和 Lamport Signatures 插入 Java 作为 SSL 的提供者，这完全是另一个问题。您必须了解 JCE 的工作原理并做大量的跑腿工作。

# linq - NHibernate Linq 查询的最佳实践

> ID：14860040
> 
> 赞同：0
> 
> 时间：2013-02-13T18:04:37.297
> 
> 标签：linq, nhibernate, fluent-nhibernate

我有 3 个 NHibernate 实体

```
Division
{
  Id (PK),
  Name
}

District
{
  Id (PK),
  Name
}

Doctor
{
  Id (PK),
  Name,
  Division,
  District
} 
```

我想让*医生按**部门*和*地区*过滤。

我可以通过两种方式编写查询，比如说我有一个用户选择的部门，我想要这个部门下的医生。

第一种方式：

```
var doctors = doctorRepository
    .FilterBy(x => x.Division.Id == selectedDivision.Id)
    .ToList(); 
```

第二种方式：

```
var doctors = doctorRepository
    .FilterBy(x => x.Division == selectedDivision)
    .ToList(); 
```

我的第一个问题是，考虑性能的最佳方式是什么？

我检查了两个查询的 sql 分析器。对于第一个查询，生成的 sql 包含与分区表的左外连接。我不明白为什么它需要加入 Division 表，因为 DivisionId 驻留在 Doctor 表中。这个额外的连接会降低性能吗？

我的第二个问题：如果我想使用 Division 和 District 从医生存储库中查询，并且 Division 和 District 有时都可以为空，在这种情况下，我应该如何在 NHibernate Linq 中编写这个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:30:28.000

> 对于第一个查询，生成的 sql 包含与分区表的左外连接。我不明白为什么它需要加入 Division 表，因为 DivisionId 驻留在 Doctor 表中。这个额外的连接会降低性能吗？

它可能并不严格需要，可能只是这个细节没有被 NHibernate Linq 提供程序优化。除非您的数据库引擎意识到可以对其进行优化（查看 SQL 的执行计划），否则它将影响性能。在一般情况下无法说出多少。

> 我的第二个问题：如果我想使用 Division 和 District 从医生存储库中查询，并且 Division 和 District 有时都可以为空，在这种情况下，我应该如何在 NHibernate Linq 中编写这个查询？

考虑一个查询，例如：

```
var doctors = doctorRepository
    .FilterBy(x => x.Division.Id == selectedDivision.Id)
    .ToList(); 
```

当由 Linq2NH 执行时，它将被转换为 SQL。如果 x.Division 为 NULL，则不会发生任何坏事，因为在 .NET 中永远不会取消引用该表达式。我不确定 NHibernate 是否会尝试取消对 selectedDivision 的引用（导致 NRE），或者如果为 NULL，它是否足够聪明以转换`selectedDivision.Id`为`selectedDivision`NULL。尝试一下！否则，更安全的方法是编写：

```
int? divId = selectedDivision != null ? selectedDivision.Id : (int?)null;
var doctors = doctorRepository
    .FilterBy(x => x.Division.Id == divId)
    .ToList(); 
```

如果 divId 恰好为空，NHibernate 足够聪明，可以在 SQL 中生成 IS NULL。

## 空值作为避免过滤的指示

我通常使用以下模式：

```
var queryable = GetMyBaseQueryable<Doctor>();

if (divisionFilter != null)
    queryable = queryable.Where(x => x.Division.Id == divisionFilter.Id)

if (districtIdFilter != null)    // districtIdFilter is some collection
    queryable = queryable.Where(x => districtIdFilter.Contains(x.District.Id))

var result = queryable.ToList(); 
```

# c# - ddlChooseReport_Function (ASP.net) 中参数 Object o 和 EventArgs ea 的用途是什么？

> ID：14860051
> 
> 赞同：2
> 
> 时间：2013-02-13T18:05:10.120
> 
> 标签：c#, asp.net

我很好奇这个方法签名在 ASP 中的用途：

```
protected void ddlChooseReport_Function(Object sender, EventArgs e) 
```

因为在之后的方法体中，它从未提及任何一个参数

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:07:32.083

方法签名必须兼容`EventHandler`才能连接*为*事件的事件处理程序。这有点像实现一个接口。

仅仅因为特定的实现没有碰巧使用它们并不意味着它们没有用。例如，您可以使用相同的事件处理程序来连接许多控件的事件，并使用参数区分它们`sender`- 并且可以通过`e`参数传播有关事件的其他信息......虽然当它只是 时`EventArgs`，没有*可以*传播的东西要多得多。

.NET 中的事件处理程序委托类型*通常*（不是特定于 ASP.NET）遵循使用`Object sender`作为第一个参数的模式，这意味着负责事件发生的对象。第二个参数是 of`EventArgs`或子类（例如`KeyEventArgs`）以提供更多信息。`EventArgs`尽管在某些事件处理程序委托类型中拥有（几乎不包含任何信息）有点奇怪，但这确实意味着您可以注册一个“通用”事件处理程序，它可以处理*任何*符合该模式的事件。

（WPF 中的路由事件略有不同，IIRC，但您应该单独阅读这些内容。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:52:21.970

我正在阅读的一本书（C# 5.0 In A Nutshell）解决了这个问题。虽然方法签名没有变化，但它`EventArgs.Empty`在实际调用委托时使用了它，并省略了 EventHandler 使用的类型的指定。

```
public class Stock
{
    string symbol;
    decimal price;

    // constructor
    public Stock (string symbol) { this.symbol = symbol; }

    public event EventHandler PriceChanged;

    protected virtual void OnPriceChanged
    {
        if (PriceChanged != null) PriceChanged(this, e);
    }

    public decimal Price
    {
        get { return price; }
        set
        {
            if (price == value) return;
            price = value;
            OnPriceChanged(EventArgs.Empty);
        }
    }
} 
```

通过这样做，您只是引发了事件，而忽略了有关事件的任何信息，并且它避免了不必要地实例化实例或 EventArgs 或其子类。

这不会改变您仍然必须保留正常签名的事实，但它可能会使执行更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:08:27.373

这是关于事件方法签名应该是什么样子的整体 .Net 框架指南。有些事件使用参数（如文件观察器），有些则不使用（如您的情况）。

# c# - 插入语句错误

> ID：14860053
> 
> 赞同：0
> 
> 时间：2013-02-13T18:05:24.323
> 
> 标签：c#, asp.net, sql, ms-access

我一直在尝试将特定数据插入我的数据库（在我的情况下是 Microsoft Access），这是我使用 c# 编写的以下代码：

```
string sql = "Insert into Orders(User,PID,PName,Price,Amount)" +
             " values('" + od.User + "','" + od.Pid + "','" + 
             od.Pname + "','" + od.Price + "','" + od.Amount + "')"; 
```

现在我假设我写的表格很好，不是吗？我得到的错误是：

> INSERT INTO 语句中的语法错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:13:18.963

`User`是[保留关键字](http://office.microsoft.com/en-001/access-help/access-2007-reserved-words-and-symbols-HA010030643.aspx)。将括号括起来以指定您要将其用作标识符，而不是命令：

```
string sql = "Insert into Orders([User],PID,PName,Price,Amount)" +
         " values('" + od.User + "','" + od.Pid + "','" + 
         od.Pname + "','" + od.Price + "','" + od.Amount + "')"; 
```

这应该可以解决您的直接问题。使用参数化查询（正如一些人建议的那样）也可以很好地避免未来的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:11:18.293

更改代码，以便使用参数化命令：

```
string sql = "Insert into Orders([User],PID,PName,Price,Amount) values(@user, @pid, @pname, @price, @amount)";

..here you will need to add your parameters to your command 
```

这既避免了 SQL 注入攻击，又防止了未转义字符的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:43:11.460

这是您可以遵循的示例 我已经粘贴了我刚刚写的内容的副本 您可能希望遵循此内容以供将来参考 注意如何使用该`Parameters.AddWithValue()`方法而不是使用`Quoted`值构建字符串查询字符串

```
private void btnInsert_Click(object sender, EventArgs e)
{
    using(SqlConnection con = new SqlConnection(connString))
    {
        con.Open();
        string Sql = "INSERT INTO Uyeleri (dID, FullName, Address, Mobile, Email, Comments ) " + 
                     "VALUES (@id, @name, @address, @mobile, @email, @comments");
        using(SqlCommand cmd = new SqlCommand(Sql, con))
        {
            cmd.Parameters.AddWithValue("@id", txtdID.Text);
            cmd.Parameters.AddWithValue("@name", txtAdiSoyadi.Text);
            cmd.Parameters.AddWithValue("@address", txtAddress.Text);
            cmd.Parameters.AddWithValue("@mobile", txtMobile.Text);
            cmd.Parameters.AddWithValue("@email", txtEmail.Text);
            cmd.Parameters.AddWithValue("@comments", txtComments.Text);
            cmd.ExecuteNonQuery();
        }
    } 
```

# php - 如何在 foreach 循环中向其中一个 div 添加一个类

> ID：14860062
> 
> 赞同：0
> 
> 时间：2013-02-13T18:05:50.890
> 
> 标签：php, class, loops, foreach

所以我创建了一个类，例如：

```
class CoreTheme_Form_Helpers_TabbedForm extends AisisCore_Form_Helpers_Content{

    protected $_html = '';

    public function init(){
        parent::init();

        if(isset($this->_options)){
            $this->_html .= '<ul class="nav nav-tabs">';
            foreach($this->_options as $options){
              $this->_html .= '<li><a href="#'.str_replace(" ", "", $options['tab']).'" data-toggle="tab">
                '.$options['tab'].'</a></li>';
            }
            $this->_html .= '</ul>';

            $this->_html .= '<div class="tab-content">';
            foreach($this->_options as $options){
                $this->_html .= '<div class="tab-pane" id="'.str_replace(" ", "", $options['tab']).'">...</div>';
            }
            $this->_html .= '</div>';           
        }
    }

    public function __toString(){
        return $this->_html;
    }
} 
```

我要做的是使用类选项卡窗格将活动类添加到 div 中，但只添加一次，并且只添加到第一个。

所以在：

```
foreach($this->_options as $options){
    $this->_html .= '<div class="tab-pane" id="'.str_replace(" ", "", $options['tab']).'">...</div>';
} 
```

html应该是这样的：

```
<div class="tab-pane active" id="something">...</div>
<div class="tab-pane" id="something1">...</div>
<div class="tab-pane" id="something2">...</div> 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:08:10.977

只需使用一个变量来存储额外的类`active`并在第一次设置后将其重置。

```
$extraClass = "active";
foreach($this->_options as $options){
    $this->_html .= '<div class="tab-pane '.$extraClass. '" id="'.str_replace(" ", "", $options['tab']).'">...</div>';
    $extraClass = "";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:08:32.150

如果您不介意从客户端添加它，这是一个 jQuery 单线：

```
$('.tab-pane').first().addClass('active'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:08:33.517

如果您需要计数器，为什么要使用`foreach`？使用常规`for`：

```
for ($i=0 ; $i < count($this->_options) ; $i++){

    $options = $this->_options[$i];

    if ($i==0) {
        // do something else
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T18:08:54.127

```
$active = " active";
foreach($this->_options as $options){

    $this->_html .= '<div class="tab-pane'. $active .'" id="'.str_replace(" ", "", $options['tab']).'">...</div>';
    $active = "";

} 
```

我认为它可以工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T18:11:03.583

你可以做一个 str_replace 来替换整个：

```
str_replace('tab-pane', 'tab-pane active', $this->_html, 1); 
```

...其中最后一个参数为 1，是您替换它的次数。 [http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

# c++ - C ++：在没有显式循环的情况下重复输出 i 次

> ID：14860063
> 
> 赞同：0
> 
> 时间：2013-02-13T18:05:54.460
> 
> 标签：c++

有没有办法在~~没有循环的情况下~~编写尽可能少的代码：

```
for (int i = 0; i < 10; i++) std::cout << 'x'; 
```

就像在 python 中一样：

```
print 'x' * 10 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T18:07:29.170

使用[`std::string(size_t, char)`构造函数](http://www.cplusplus.com/reference/string/string/string/)：

```
std::cout << std::string(10, 'x'); 
```

请注意，与 Python 不同，这仅适用于字符而不适用于字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T18:12:38.097

```
void print(const char *s, int n)
{
   if (n > 0) 
   {
      cout << s;
      print(s, n - 1);
   }
} 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:20:53.710

最可扩展/可重用的方法是只创建一个类似于上面 Ed 的函数——尽管我会使用字符串流而不是将函数与打印耦合

IMO，NPE 的答案过于严格，因为强制它只是一个字符，而 Ed 的答案更像是 C 答案而不是 C++ 答案。作为一个附带好处，该函数还允许您流式传输字符、整数、字符串等。

```
template <class T>
std::string multiplyString(int count, const T &input)
{
    std::stringstream ss;
    for(int i = 0; i < count; i++)
       ss << T;
    return ss.str();
}

int main(argc, char *argv[])
{
    std::cout << multiplyString(10, 'x') << std::endl;
    std::cout << multiplyString(5, "xx") << std::endl;
    std::cout << multiplyString(5, 1234) << std::endl;
} 
```

祝你好运

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T19:13:51.977

```
std::generate_n(
    std::ostream_iterator<char>(std::cout, ""),
    10,
    [](){ return 'x'; }
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T19:17:34.320

由于没有其他人提供合理的实现：

```
std::string
multiplyStrings( int count, std::string const& original )
{
    std::string results;
    results.reserve( count * original.size() );  //  Just optimization
    while ( count > 0 ) {
        results += original;
    }
    return results;
} 
```

为此创建重载`operator*`并不困难。在命名空间 std 中定义它们*将*是未定义的行为，但恕我直言，无论如何你都可以侥幸逃脱。

# macos - 在山狮上安装 FFmpeg 1.1.2 “Fire Flower”

> ID：14860068
> 
> 赞同：1
> 
> 时间：2013-02-13T18:06:18.533
> 
> 标签：macos, compilation, ffmpeg, command, osx-mountain-lion

我正在尝试在山狮机器上安装 FFmpeg 1.1.2 “Fire Flower”。我从[http://www.ffmpeg.org/download.html 下载了 http://www.ffmpeg.org/releases/ffmpeg-1.1.2.tar.bz2](http://www.ffmpeg.org/download.html)[并](http://www.ffmpeg.org/releases/ffmpeg-1.1.2.tar.bz2)提取了它。是否有一步一步的教程来编译、安装源代码并让它在我的机器上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:11:15.560

只有两个命令完成了这项工作： ruby​​ -e "$(curl -fsSL raw.github.com/mxcl/homebrew/go)"; 冲泡安装ffmpeg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:47:04.840

[FFmpeg wiki](https://ffmpeg.org/trac/ffmpeg/wiki)中有详细的编译说明：[FFmpeg: OS X Compilation Guide](https://ffmpeg.org/trac/ffmpeg/wiki/MacOSXCompilationGuide)。

# android - 我的开发人员证书我的 .p12 文件在哪里？

> ID：14860071
> 
> 赞同：0
> 
> 时间：2013-02-13T18:06:30.997
> 
> 标签：android, keystore

我正在寻找我的“开发者证书文件”，以便我也可以将我的 Android 应用程序发布到 Blackberry。麻烦的是黑莓告诉我它是一个 .p12 文件，而我的文件中没有任何匹配的东西......不在我的密钥库中，不在它的父文件夹中，在我的 eclipse 文件夹中也没有。我想看看哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T01:45:49.337

假设您在 Windows 上并且没有在自定义位置安装 Tizen SDK，它应该在“C:\tizen-sdk-data\keystore\author”中，这是我的隐藏文件夹。

# macros - m4 在单词中扩展宏

> ID：14860072
> 
> 赞同：3
> 
> 时间：2013-02-13T18:06:34.917
> 
> 标签：macros, expansion, m4

我对 m4 很陌生，但找不到这个简单的东西：

是否可以在单词中间扩展宏？（我会将它用于在低级代码中的 C 符号名称中使用的计数器）

我的意思是：

```
define(`foo',`bar')
Happy fooday! 
```

预期的输出将是：

```
Happy barday! 
```

甚至可以这样做：

```
Happy expand(foo)day! 
```

抱歉，如果这是一个非常简单的问题，但我在“m4 扩展 word 中的宏、m4 扩展子字符串”等方面的尝试失败了……

谢谢

*编辑1：*

StackOverflow 推荐了这个：[Expansion of macro not working in M4](https://stackoverflow.com/questions/6814117/expansion-of-macro-not-working-in-m4?rq=1) ...这确实是我一直在寻找的。

*编辑2：*

好吧，这并不容易：

```
define(`foo',`bar')
Happy asdfoo()day! 
```

这失败了，这可能是正常的。但是，在我的 C 符号名称中，我必须在单词中间替换这些宏。这样做的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:52:57.587

我相信您正在寻找：

```
define(`foo',`bar')
Happy `'foo`'day! 
```

即使用 m4 引号来表示单词边界。或者，更准确地说，在您希望扩展的单词的任一侧使用一个空字符串，并用引号指示该空字符串的边界。

# r - 在 R 中绘制多条线（数据系列），每条线都具有独特的颜色

> ID：14860078
> 
> 赞同：78
> 
> 时间：2013-02-13T18:07:01.337
> 
> 标签：r, colors, plot, unique, lines

我对 R 相当陌生，我有以下疑问：

我正在尝试在 R 中生成一个具有多条线（数据系列）的图。这些行中的每一行都是一个类别，我希望它具有独特的颜色。

目前我的代码是这样设置的：

首先，我正在创建一个空图：

```
plot(1,type='n',xlim=c(1,10),ylim=c(0,max_y),xlab='ID', ylab='Frequency') 
```

然后对于我的每个类别，我使用“for”循环在这个空图中绘制线条，如下所示：

```
for (category in categories){
lines(data.frame.for.this.category, type='o', col=sample(rainbow(10)), lwd=2)
} 
```

这里有 8 个类别，因此图中产生了 8 条线。如您所见，我正在尝试从 rainbows() 函数中采样一种颜色，以便为每条线生成一种颜色。

但是，当生成绘图时，我发现有多条具有相同颜色的线。例如，这 8 行中有 3 行是绿色的。

如何使这 8 条线中的每条线都具有独特的颜色？

另外，我如何在剧情的传说中体现这种独特性？我试图查找`legend()`函数，但不清楚应该使用哪个参数来反映每个类别的这种独特颜色？

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-13T18:33:01.000

如果您的数据是[宽格式](https://en.wikipedia.org/wiki/Wide_and_narrow_data#Wide) `matplot`的，是为此而制作的，并且经常被遗忘：

```
 dat <- matrix(runif(40,1,20),ncol=4) # make data
 matplot(dat, type = c("b"),pch=1,col = 1:4) #plot
 legend("topleft", legend = 1:4, col=1:4, pch=1) # optional legend 
```

对于那些不熟悉的人来说，还有一个额外的好处，例如`ggplot`大多数绘图参数（例如`pch`etc.）与使用`matplot()`as相同`plot()`。 ![在此处输入图像描述](../Images/03f7c59fb4f0fbd48ef66f0e9b880130.png)

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-02-13T18:11:43.783

如果您想要一个`ggplot2`解决方案，如果您可以将数据调整为这种格式，则可以执行此操作（请参见下面的示例）

```
# dummy data
set.seed(45)
df <- data.frame(x=rep(1:5, 9), val=sample(1:100, 45), 
                   variable=rep(paste0("category", 1:9), each=5))
# plot
ggplot(data = df, aes(x=x, y=val)) + geom_line(aes(colour=variable)) 
```

![ggplot2_geom_line](../Images/4b168fbcffb6013a11ad3f432d6fed59.png)

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2013-02-13T18:17:15.103

您有使用基本图形执行此操作的正确一般策略，但正如所指出的那样，您实际上是在告诉 R 从一组 10 种颜色中为每行选择一种随机颜色。鉴于此，你偶尔会得到两条相同颜色的线条也就不足为奇了。这是使用基本图形的示例：

```
plot(0,0,xlim = c(-10,10),ylim = c(-10,10),type = "n")

cl <- rainbow(5)

for (i in 1:5){
    lines(-10:10,runif(21,-10,10),col = cl[i],type = 'b')
} 
```

![在此处输入图像描述](../Images/1825b93cd1b69e251838cf2633b4f955.png)

请注意使用`type = "n"`来抑制在设置窗口的原始调用中的所有绘图，以及`cl`for 循环内的索引。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-03-07T10:38:08.443

使用该`lines()`功能可以在同一张图表上绘制多条线

```
# Create the data for the chart.
v <- c(7,12,28,3,41)
t <- c(14,7,6,19,3)

# Give the chart file a name.
png(file = "line_chart_2_lines.jpg")

# Plot the bar chart.
plot(v,type = "o",col = "red", xlab = "Month", ylab = "Rain fall", 
   main = "Rain fall chart")

lines(t, type = "o", col = "blue")

# Save the file.
dev.off() 
```

输出 [![在此处输入图像描述](../Images/8250d307a2fe152f71daf57921232fb0.png)](https://i.stack.imgur.com/wEzPQ.png)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-08-19T22:28:03.917

我知道，它是一个旧帖子，但就像我在搜索同一个帖子时遇到的一样，其他人也可能会转到这里

通过在 ggplot 函数中添加 : color ，我可以实现与图中存在的组相关的不同颜色的线条。

```
ggplot(data=Set6, aes(x=Semana, y=Net_Sales_in_pesos, group = Agencia_ID, colour = as.factor(Agencia_ID))) 
```

和

```
geom_line() 
```

![多种颜色的折线图](../Images/4306d74b37b532f23fbaa2a029b6ae91.png)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-02-13T19:30:55.070

使用@Arun 虚拟数据:) 这里有一个`lattice`解决方案：

```
xyplot(val~x,type=c('l','p'),groups= variable,data=df,auto.key=T) 
```

![在此处输入图像描述](../Images/3395cdbe85d580663d419fad2b6a5224.png)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-05-31T16:51:12.033

除了@joran's [answer](https://stackoverflow.com/a/14860261/4581200) using base `plot`function with a `for`loop，您还**可以使用 base `plot`with`lapply`**：

```
plot(0,0,xlim = c(-10,10),ylim = c(-10,10),type = "n")

cl <- rainbow(5)

invisible(lapply(1:5, function(i) lines(-10:10,runif(21,-10,10),col = cl[i],type = 'b'))) 
```

*   在这里，该`invisible`函数只是用于防止`lapply`在控制台中生成列表输出（因为我们想要的只是函数提供的递归，而不是列表）。

[![在此处输入图像描述](../Images/c2e583d394ad4c244518cdb5acbc4dc3.png)](https://i.stack.imgur.com/7D7rJ.png)

`for`如您所见，它产生的结果与使用循环方法完全相同。

那么为什么要使用`lapply`呢？

尽管`lapply`已经证明比`for`在 R 中执行得更快/更好（例如，请参见[此处](https://www.r-bloggers.com/guess-who-wins-apply-versus-for-loops-in-r/)；尽管请参见[此处](https://stackoverflow.com/q/42393658/4581200)以获取不是的实例），但在这种情况下，它的执行大致相同：

`lapply`将和方法的行数增加到 50000分别`for`花费了我的系统`46.3`和`46.55`秒。

*   所以，虽然`lapply`只是稍微快了一点，但可以忽略不计。这种速度差异可能会在更大/更复杂的图形中派上用场，但老实说，50000 行可能是一个相当不错的上限......

所以“为什么`lapply`？”的答案是：它只是一种同样有效的替代方法。:)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-11-17T23:05:57.080

这是使用添加行的另一种方法`plot()`：

一、使用函数`par(new=T)`

选项：

[http://cran.r-project.org/doc/contrib/Lemon-kickstart/kr_addat.html](http://cran.r-project.org/doc/contrib/Lemon-kickstart/kr_addat.html)

要为它们着色不同，您将需要`col()`.

为避免多余的轴描述，请使用`xaxt="n"`和`yaxt="n"` 用于第二个和更多图。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-04-13T15:32:13.127

这是一个包含图例的示例代码（如果感兴趣的话）。

```
# First create an empty plot.
plot(1, type = 'n', xlim = c(xminp, xmaxp), ylim = c(0, 1), 
     xlab = "log transformed coverage", ylab = "frequency")

# Create a list of 22 colors to use for the lines.
cl <- rainbow(22)

# Now fill plot with the log transformed coverage data from the
# files one by one.
for(i in 1:length(data)) {
    lines(density(log(data[[i]]$coverage)), col = cl[i])
    plotcol[i] <- cl[i]
}
legend("topright", legend = c(list.files()), col = plotcol, lwd = 1,
       cex = 0.5) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-02-05T13:52:53.500

如果 x 轴是因子/离散变量，并且希望保持变量的顺序（不同的值对应于不同的组）以可视化组效应。下面的代码会做：

```
library(ggplot2)
set.seed(45)

# dummy data
df <- data.frame(x=rep(letters[1:5], 9), val=sample(1:100, 45), 
                   variable=rep(paste0("category", 1:9), each=5))

# This ensures that x-axis (which is a factor variable)  will be ordered appropriately
df$x <- ordered(df$x, levels=letters[1:5])

ggplot(data = df, aes(x=x, y=val, group=variable, color=variable)) + geom_line() + geom_point() + ggtitle("Multiple lines with unique color") 
```

[![在此处输入图像描述](../Images/5612b80ad9ceee4395ee5f4fb7a8a7e0.png)](https://i.stack.imgur.com/R8aPM.png) 另请注意：添加 group=variable 删除警告信息：“geom_path：每个组仅包含一个观察值。您需要调整组审美吗？”

# excel - 在 QueryTables 方法上将 CSV 导入电子表格失败

> ID：14860079
> 
> 赞同：1
> 
> 时间：2013-02-13T18:07:01.790
> 
> 标签：excel, excel-2010, vba

我需要从 CSV 文件导入数据。我记录了下面的宏，但修改了“QueryTablesAdd”构造以连接变量“FileLoc”中包含的文件位置。宏一直有效，直到遇到 .Refresh BackgroundQuery := false 方法并在此时失败。如果我使用该方法，则代码实际上会运行而不会失败。麻烦的是，它实际上并没有导入数据。

有没有人有任何有用的提示？

```
With ActiveSheet.QueryTables.Add(Connection:= _
    "TEXT;" & FileLoc & Chr(34), Destination:=Range("$A$1"))
    .Name = "CDSTATS"
    .FieldNames = True
    .RowNumbers = False
    .FillAdjacentFormulas = False
    .PreserveFormatting = True
    .RefreshOnFileOpen = False
    .RefreshStyle = xlInsertDeleteCells
    .SavePassword = False
    .SaveData = True
    .AdjustColumnWidth = True
    .RefreshPeriod = 0
   ' .TextFilePromptOnRefresh = False
    .TextFilePlatform = 850
    .TextFileStartRow = 1
    .TextFileParseType = xlDelimited
    .TextFileTextQualifier = xlTextQualifierDoubleQuote
    .TextFileCommaDelimiter = True
    .TextFileColumnDataTypes = Array(1, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1)
    .TextFileTrailingMinusNumbers = True
    .Refresh BackgroundQuery:=False
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-10T21:34:27.550

为了回答：

> 传递变量时不需要引号，即使是字符串变量

根据@Scott Holtzman。

# ruby - 在模块的上下文中向基类添加方法

> ID：14860080
> 
> 赞同：4
> 
> 时间：2013-02-13T18:07:04.613
> 
> 标签：ruby, metaprogramming

我想在 Ruby 中向 String 类添加一个自定义方法。我知道可以使用以下代码完成：

```
class String
  def my_own_method
    # impelementation comes here 
  end
end 
```

如果我将该代码写在一个文件中，比如“string.rb”和其他地方，即在 irb 中，那么我写的`require "string"`那么它工作得很好，我可以访问任何字符串对象上的自定义方法。但是，当我想将自定义代码打包到这样的模块中时，就会出现问题：

```
module A
  class String
    def my_own_method
      # implementation
    end
  end
end 
```

然后，当我包含模块时（没有错误），我无法访问每个字符串对象上的方法，除非我通过调用直接实例化一个字符串，比如`s = A::String.new`. 在这种情况下，我可以访问我的自定义方法，但只能访问**s**变量，而不是任何字符串对象。我应该怎么做才能打包我的 util 类并自动将它们的方法添加到基类中？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T18:20:27.067

一种选择是用于`::`确保您获取顶级 String 类：

```
module A
  class ::String
    def my_own_method
      self.reverse
    end
  end
end

"some string".my_own_method # => "gnirts emos" 
```

我还必须同意塞尔吉奥在回答结尾处的观点。不太确定是否需要这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:10:58.647

好吧，一方面，您可以使用`class_eval`

```
module A
  String.class_eval do
    def my_own_method
      self.upcase
    end
  end
end

'foo'.my_own_method # => "FOO" 
```

但如果我是你，我会`String`在全球范围内开设一个课程（你的第一个片段）。我真的不明白为什么不这样做。

# php - 在会话中保留数组属性

> ID：14860082
> 
> 赞同：0
> 
> 时间：2013-02-13T18:07:06.513
> 
> 标签：php, javascript, arrays, session

我有这个javascript函数：

```
 for (var i = 0; i < c.length; i++) {
    if (c[i].type == 'checkbox' && c[i].checked==true){
        booked_seats[count]=c[i].id;
        c[i].parentNode.style.backgroundColor = "#F00";

        count++;

    }
} 
```

单击提交按钮时调用它。我希望将 c[] 数组保留在会话中，因此当刷新页面时，更改仍然存在（表格特定单元格和复选框中的颜色更改）。我究竟怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:12:25.613

有很多方法可以实现这一目标

*   HTML5 支持本地存储，您可以在其中存储您想要的所有内容。即[这里](http://diveintohtml5.info/storage.html)

*   您可以将值存储在 php 和 javascript 可访问的 cookie 中

*   您可以将更改发送到服务器（即 ajax）并在页面刷新后恢复它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:14:56.767

我建议将所需的数据附加到表单元素（隐藏或不隐藏）并在页面加载时检查值：

```
if ($_GET["x"])
$x = $_GET["x"];

if ($_GET["y"])
$x = $_GET["y"]; 
```

使用 a 可能会更有效`foreach`，但现在将 $x 放回它们所属的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:09:30.620

最简单的方法是将这些参数与表单的其余部分一起发送到服务器，然后使用内联 PHP 将它们放回表单中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T18:15:53.160

将数组信息存储在 cookie 中的最简单方法是使用 jQuery 和 Cookie 插件。

这是包含源代码和示例用法的页面 - [http://code.google.com/p/cookies/](http://code.google.com/p/cookies/)

另外，这是 Stackoverflow 上的另一个问题，它回答了您的问题：[如何将数组存储在 JavaScript cookie 中？](https://stackoverflow.com/questions/3408463/how-to-store-an-array-in-a-javascript-cookie)

# jqgrid - jqGrid filterToolbar 不工作 - ASP.NET

> ID：14860084
> 
> 赞同：0
> 
> 时间：2013-02-13T18:07:14.237
> 
> 标签：jqgrid

我正在尝试为 jqGrid 实现工具栏搜索/过滤。当我在任何过滤器中输入一些文本并按 Enter 时，什么也没有发生 - 不确定我在这里做错了什么。任何帮助表示赞赏：

```
jQuery("#list").jqGrid({
            datatype: 'json',
            url: 'GetIncidents.ashx?view=MyIncidents',
            height: "100%",
            scrollOffset: 0,
            jsonReader: {
                root: "rows",
                page: "page",
                total: "total",
                records: "records",
                repeatitems: false,
                cell: "cell",
                id: "ID",
                userdata: "userdata",
                subgrid: {
                    root: "rows",
                    repeatitems: true,
                    cell: "cell"
                }
            },
            colNames: ['ID', 'Title', 'Assigned To', 'Status', 'Priority', 'Classification', 'Affected User', 'Support Group', 'Last Modified'],
            colModel: [
                  { name: 'ID', index: 'ID', width: 40, sorttype: 'int', firstsortorder: 'desc' },
                  { name: 'Title', index: 'Title', width: 180 },
                  { name: 'AssignedUser', index: 'AssignedUser', width: 100, align: 'center' },
                  { name: 'Status', index: 'Status', width: 50, align: 'center' },
                  { name: 'Priority', index: 'Priority', width: 50, align: 'center' },
                  { name: 'Classification', index: 'Classification', width: 150, align: 'center' },
                  { name: 'AffectedUser', index: 'AffectedUser', width: 100, align: 'center' },
                  { name: 'TierQueue', index: 'TierQueue', width: 100, align: 'center' },
                  { name: 'LastModified', index: 'LastModified', width: 120, align: 'center', formatter: 'date', formatoptions: { srcformat: 'Y-m-d H:i:s0', newformat: 'm/d/Y h:i A'}}],
            pager: '#pager',
            rowNum: 15,
            width: 980,                
            sortname: 'ID',
            sortorder: 'desc',
            viewrecords: true,
            autowidth: true,
            gridview: true,
            ignoreCase: true,
            caption: 'All Open Incidents Assigned To Me',
            onSelectRow: function (id) { window.location = 'ViewIncident.aspx?id=' + id; }
        });

        jQuery("#list").jqGrid('filterToolbar', { stringResult: true, searchOnEnter: false, defaultSearch: "cn" }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:23:52.077

jqGrid 依赖于服务器的过滤功能，如果您检查传出的帖子操作，您将看到它添加到通过过滤数据的帖子中的额外数据。

因此，您的过滤将在服务器上完成，然后过滤的数据集将被排序/分页等，然后传递回您的 jqGrid。

在我看来，这是开始的地方： [ASP.NET MVC 2.0 Implementation of search in jqgrid](https://stackoverflow.com/questions/5500805/asp-net-mvc-2-0-implementation-of-searching-in-jqgrid)

从那个例子来看，设置需要一些努力，但从那里你将有一个很好的基础来处理动态过滤。如果您只处理非常基本的过滤，您可能可以使用一些组件来破解一些东西，但远远超出基本要求将值得花时间在这个额外的选项上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:36:10.810

首先尝试添加 document.ready 函数，让您的浏览器在启动网格之前加载，然后添加 loadonce: true，

然后尝试运行它，它应该可以工作！

这是代码

```
 JQuery(document).ready(function(){
 jQuery("#list").jqGrid({
        datatype: 'json',
        url: 'GetIncidents.ashx?view=MyIncidents',
        height: "100%",
        scrollOffset: 0,
        jsonReader: {
            root: "rows",
            page: "page",
            total: "total",
            records: "records",
            repeatitems: false,
            cell: "cell",
            id: "ID",
            userdata: "userdata",
            subgrid: {
                root: "rows",
                repeatitems: true,
                cell: "cell"
            }
        },
        colNames: ['ID', 'Title', 'Assigned To', 'Status', 'Priority', 'Classification', 'Affected User', 'Support Group', 'Last Modified'],
        colModel: [
              { name: 'ID', index: 'ID', width: 40, sorttype: 'int', firstsortorder: 'desc' },
              { name: 'Title', index: 'Title', width: 180 },
              { name: 'AssignedUser', index: 'AssignedUser', width: 100, align: 'center' },
              { name: 'Status', index: 'Status', width: 50, align: 'center' },
              { name: 'Priority', index: 'Priority', width: 50, align: 'center' },
              { name: 'Classification', index: 'Classification', width: 150, align: 'center' },
              { name: 'AffectedUser', index: 'AffectedUser', width: 100, align: 'center' },
              { name: 'TierQueue', index: 'TierQueue', width: 100, align: 'center' },
              { name: 'LastModified', index: 'LastModified', width: 120, align: 'center', formatter: 'date', formatoptions: { srcformat: 'Y-m-d H:i:s0', newformat: 'm/d/Y h:i A'}}],
        pager: '#pager',
        rowNum: 15,
        width: 980,                
        sortname: 'ID',
        sortorder: 'desc',
        viewrecords: true,
        autowidth: true,
        gridview: true,
        ignoreCase: true,
        loadonce:true,  //**you need to add this**
        caption: 'All Open Incidents Assigned To Me',
        onSelectRow: function (id) { window.location = 'ViewIncident.aspx?id=' + id; }
    });

    jQuery("#list").jqGrid('filterToolbar', { stringResult: true, searchOnEnter: false, defaultSearch: "cn" }); 
```

})

# python - 尝试在 openSUSE 上安装 pip 时出错

> ID：14860085
> 
> 赞同：6
> 
> 时间：2013-02-13T18:07:22.803
> 
> 标签：python, pip, rpm, opensuse

我正在尝试`pip`在我的生产服务器上进行部署，但有一个不合逻辑的错误，它尝试安装已安装的组件但没有成功。

```
~> sudo zypper in python-pip
Loading repository data...
Reading installed packages...
Resolving package dependencies...

Problem: python-pip-1.0.2-3.1.2.noarch requires python = 2.7, but this requirement cannot be provided
  uninstallable providers: python-2.7.2-7.10.1.i586[Updates-for-openSUSE-12.1-12.1-1.4]
                   python-2.7.2-7.17.1.i586[Updates-for-openSUSE-12.1-12.1-1.4]
                   python-2.7.2-7.10.1.x86_64[Updates-for-openSUSE-12.1-12.1-1.4]
                   python-2.7.2-7.17.1.x86_64[Updates-for-openSUSE-12.1-12.1-1.4]
                   python-2.7.2-7.1.3.x86_64[openSUSE-12.1-12.1-1.4]
                   python-2.7.2-7.1.3.i586[repo-oss]
                   python-2.7.2-7.1.3.x86_64[repo-oss]
 Solution 1: deinstallation of patterns-openSUSE-minimal_base-conflicts 12.1-25.21.1.x86_64
 Solution 2: do not install python-pip-1.0.2-3.1.2.noarch
 Solution 3: do not install python-pip-1.0.2-3.1.2.noarch
 Solution 4: break python-pip-1.0.2-3.1.2.noarch by ignoring some of its dependencies

Choose from above solutions by number or cancel [1/2/3/4/c] (c): c 
```

这令人难以置信，因为`python-2.7.2-7.17.1`是为好平台（x86_64）安装的

```
~> sudo zypper if python-base
Loading repository data...
Reading installed packages...

Information for package python-base:

Repository: Updates for openSUSE 12.1 12.1-1.4
Name: python-base
Version: 2.7.2-7.17.1
Arch: x86_64
Vendor: openSUSE
Installed: Yes
Status: up-to-date
Installed Size: 20.8 MiB
Summary: Python Interpreter base package
Description:
Python is an interpreted, object-oriented programming language, and is
often compared to Tcl, Perl, Scheme, or Java.  You can find an overview
of Python in the documentation and tutorials included in the python-doc
(HTML) or python-doc-pdf (PDF) packages.

This package contains all of stand-alone Python files, minus binary
modules that would pull in extra dependencies. 
```

卸载`patterns-openSUSE-minimal_base-conflicts 12.1-25.21.1.x86_64`可以解决问题；但是有没有一种干净的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-15T13:42:23.390

我遇到了类似的问题，问题是我使用了错误的 zypper 存储库（openSuse 而不是 SLE SP3）。

我卸载了有问题的 pip，删除了错误的存储库，添加了正确的存储库，最后再次重新安装了 pip。然后它起作用了。

# php - json加载中的Django预期字符串或缓冲区

> ID：14860086
> 
> 赞同：1
> 
> 时间：2013-02-13T18:07:26.053
> 
> 标签：php, django, json, urllib

因此`expected string or buffer`，当我尝试使用 urllib 解析从 php 源发送到 django 客户端的 Json 字符串以获取请求时，我得到了一个 django 。我也在使用芹菜任务。

字符串是：

```
"511bd5112aa8c" 
```

php：

```
echo json_encode($access_token); 
```

姜戈：

```
from celery import task
from urllib2 import Request, urlopen, URLError

@task()
def replicate_data(req):
        try:
            response = urlopen(req)
            the_page = response.read()
        except URLError:
            raise replicate_data.retry(countdown=15)

        return the_page

result=replicate_data.apply_async((req,), queue='rep_data')
json.loads(result) 
```

我已经试过`json.loads(result.decode())`了，也没有运气。

任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:54:50.363

你的 JSON 很好。问题在于您如何尝试使用它。

Celery 是一种异步执行计算的机制。你打电话时

```
result=replicate_data.apply_async((req,), queue='rep_data') 
```

这与调用函数不同。您正在将数据发送到队列，以便稍后由该函数处理。

`apply_async`没有，*也不能*返回函数计算的值。相反，它返回的是一个[AsyncResult 对象](http://docs.celeryproject.org/en/latest/reference/celery.result.html)，其中包含有关在何处以及如何处理任务的大量详细信息。

如果您想对从页面获取的 JSON 执行某些操作，则必须从任务*内部*执行此操作。将任务排队的代码永远不会看到该返回值。

仅用于测试，您可以同步调用任务，使用`apply`. 这将返回一个`EagerResult`对象，但您可以从中获取函数返回值，因为它会导致您的代码阻塞，直到函数返回。看起来像这样：

```
result=replicate_data.apply((req,), queue='rep_data')
return_value = result.return
json.loads(return_value) 
```

但我真的只建议测试/调试，因为它完全抵消了 celery 的异步处理给你的优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:17:31.563

它是无效的 json。尝试使用一些节点名称并将该令牌分配为具有有效 json 的值。现在 json.loads 可以正常工作了。

```
<?php
$access_token = "511bd5112aa8c";
echo json_encode(array("token"=>$access_token));
?> 
```

编辑：

使用上面提到的php代码。对于 python 使用这个：

```
json_res = json.loads('{"token": "511bd5112aa8c"}')     
print json_res['token'] 
```

将 json.loads 中的文本替换为响应变量。

# java - 带有 CookieManager 的 HttpURLConnection 是否应该自动处理会话 cookie？

> ID：14860087
> 
> 赞同：29
> 
> 时间：2013-02-13T18:07:28.930
> 
> 标签：java, cookies, httpurlconnection, cookiemanager

我有一个 Java 应用程序（JDK 1.7.0_13）并且正在使用 java.net.HttpURLConnection 连接到一些基于 servlet 的服务，这些服务进行会话管理。我想弄清楚如何使用 java.net.CookieManager 来跟踪会话 cookie。阅读文档我得到的印象是使用 CookieHandler.setDefault(new CookieManager()) 安装 CookieManager 应该会导致 cookie 管理自动发生。但是，对同一 URL 的多个请求似乎不会保留 cookie。我是否必须手动从响应中提取 cookie 并自己在请求中重新发送它们，还是 CookieManager 会自动为我执行此操作？如果 CookieManager 没有，那么它会增加什么价值？

为了进行测试，我有一个 servlet，每次浏览器访问 URL 时，它都会成功地增加一个计数器。这在 Safari、FireFox 和 Chrome 中运行良好……但是，我无法在独立的 Java 应用程序中运行它。

这是一个非常简单的测试程序来说明我希望简单的工作。它在开始时安装 CookieManager，然后在控制台输入 URL 时重复调用 fetch(String urlString) 方法。

```
package com.brilliant.experimental;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.CookieHandler;
import java.net.CookieManager;
import java.net.HttpURLConnection;
import java.net.URL;

public class HttpFetcher {  
    public static void fetch(String urlString) {
        try {
            URL url = new URL(urlString);
            HttpURLConnection conn = (HttpURLConnection)url.openConnection();
            InputStream in = conn.getInputStream();
            BufferedReader reader = new BufferedReader(new InputStreamReader(in));
            int status = conn.getResponseCode();
            System.out.println("Status = " + status);
            String key;
            System.out.println("Headers-------start-----");
            for (int i = 1; (key = conn.getHeaderFieldKey(i)) != null; i++) {
                System.out.println(key + ":" + conn.getHeaderField(i));
            }
            System.out.println("Headers-------end-----");
            System.out.println("Content-------start-----");
            String inputLine;
            while ((inputLine = reader.readLine()) != null) {
                System.out.println(inputLine);
            }
            System.out.println("Content-------end-----");
            in.close();
        } catch (Exception e) {
            System.out.println(e);
        }
    }

    public static void main(String[] args) {
        CookieHandler.setDefault(new CookieManager());

        for (int i = 0; i < args.length; i++) {
            fetch(args[i]);
        }

        InputStreamReader isr = new InputStreamReader(System.in);
        BufferedReader reader = new BufferedReader(isr);
        String prompt = "> ";
        String urlString;
        try {
            for (System.out.print(prompt);
                    (urlString = reader.readLine()) != null; 
                    System.out.print(prompt)) 
            {
                fetch(urlString);
            }
        } catch (IOException ioe) {
            System.out.println(ioe);
        }
    }

} 
```

从这个应用程序调用我的 servlet 显然会从服务器返回一个会话 cookie。但是，再次调用会获得一个新的会话 cookie。

```
> http://localhost:8080/brilliant/TestServlet
Status = 200
Headers-------start-----
Server:Resin/4.0.34
Cache-Control:private
Set-Cookie:JSESSIONID=aaaMp0uKke4gp9_-nUuZt; path=/
Content-Length:19
Date:Wed, 13 Feb 2013 18:02:31 GMT
Headers-------end-----
Content-------start-----
Session count is 0
Content-------end-----
> http://localhost:8080/brilliant/TestServlet
Status = 200
Headers-------start-----
Server:Resin/4.0.34
Cache-Control:private
Set-Cookie:JSESSIONID=aaaZ-oPaC1I9WdEDoUuZt; path=/
Content-Length:19
Date:Wed, 13 Feb 2013 18:02:33 GMT
Headers-------end-----
Content-------start-----
Session count is 0
Content-------end----- 
```

因此，总而言之，我是否必须做其他事情才能使 CookieManager 自动为我工作，或者我是否必须求助于从响应中手动提取 cookie 并通过请求重新发送它们？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-21T11:37:05.513

我运行你的代码并替换它

```
CookieHandler.setDefault(new CookieManager()); 
```

经过

```
CookieHandler.setDefault( new CookieManager( null, CookiePolicy.ACCEPT_ALL ) ); 
```

这行得通！

# javascript - 用js在div上设置数据属性

> ID：14860094
> 
> 赞同：10
> 
> 时间：2013-02-13T18:07:38.530
> 
> 标签：javascript

我有一堆 div.textBox 我想对其应用数据属性。

这就是我想要的结果：

```
<div class="text" data-stellar-ratio="2"> 
```

我试过了 ：

```
document.getElementByClassName('text').dataset.stellar.ratio = "2"; 
```

但它不工作...

帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T18:17:14.403

如[记录的](https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName)

> Document 接口的`getElementsByClassName`方法返回具有所有给定类名的所有子元素的类数组对象。

更准确地说，返回一个[NodeList](https://developer.mozilla.org/en-US/docs/Web/API/NodeList)并且可以作为数组访问。选择器找到的第一个元素通过索引 0 访问。

```
document.getElementsByClassName('text')[0].setAttribute('data-stellar-ratio', '2') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:12:33.957

您拼写`getElementsByClassName`错误，您需要遍历元素集合并更改`stellar.ration`为`stellarRatio`.

```
var eles = document.getElementsByClassName('text');
for (var x = 0; x < eles.length; x++){
  eles[x].dataset.stellarRatio = "2";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:24:35.353

setAttribute 并不适用于所有浏览器。[http://www.w3schools.com/jsref/met_document_createattribute.asp](http://www.w3schools.com/jsref/met_document_createattribute.asp)有一个肯定会很好用的例子。

```
var att=document.createAttribute("whatever");
att.value="someting";
document.getElementById('mydivid').setAttributeNode(att); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-25T07:39:56.663

您可以使用以下语句将 data 属性添加到 html 中的任何元素：

> $('#id_of_element').attr('data-id', 'your_value');

它将为 div 呈现如下：

```
<div data-id="your_value"> 
```

# mysql - SHOW 命令中的单列

> ID：14860095
> 
> 赞同：2
> 
> 时间：2013-02-13T18:07:41.870
> 
> 标签：mysql

我正在使用它来获取我的主要索引列。

```
SHOW INDEX FROM `table` WHERE Key_name='PRIMARY' 
```

它返回一个包含类型、column_name、Key_name 等的表。

我只想要`Column_name`专栏。

我试过了：

```
SHOW INDEX.Column_name FROM `table` WHERE Key_name='PRIMARY' 
```

但它没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:17:10.580

要从 PRIMARY KEY （按顺序）获取所有列`mydb.mytable`，请运行以下命令：

```
SELECT column_name
FROM information_schema.statistics
WHERE table_schema='mydb'
AND table_name='mytable'
AND index_name='PRIMARY'
ORDER BY seq_in_index; 
```

`mytable`要从当前数据库中的 PRIMARY KEY（按顺序）获取所有列，请运行以下命令：

```
SELECT column_name
FROM information_schema.statistics
WHERE table_schema=DATABASE()
AND table_name='mytable'
AND index_name='PRIMARY'
ORDER BY seq_in_index; 
```

这是一个示例表：

```
mysql> show create table cacti.host_snmp_cache\G
*************************** 1\. row ***************************
       Table: host_snmp_cache
Create Table: CREATE TABLE `host_snmp_cache` (
  `host_id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  `snmp_query_id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  `field_name` varchar(50) NOT NULL DEFAULT '',
  `field_value` varchar(255) DEFAULT NULL,
  `snmp_index` varchar(255) NOT NULL DEFAULT '',
  `oid` text NOT NULL,
  PRIMARY KEY (`host_id`,`snmp_query_id`,`field_name`,`snmp_index`),
  KEY `host_id` (`host_id`,`field_name`),
  KEY `snmp_index` (`snmp_index`),
  KEY `field_name` (`field_name`),
  KEY `field_value` (`field_value`),
  KEY `snmp_query_id` (`snmp_query_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

mysql> 
```

注意 PRIMARY KEY 有 4 列

这是查询的执行：

```
mysql> SELECT column_name
    -> FROM information_schema.statistics
    -> WHERE table_schema='cacti'
    -> AND table_name='host_snmp_cache'
    -> AND index_name='PRIMARY'
    -> ORDER BY seq_in_index;
+---------------+
| column_name   |
+---------------+
| host_id       |
| snmp_query_id |
| field_name    |
| snmp_index    |
+---------------+
4 rows in set (0.00 sec)

mysql> 
```

使用[**GROUP_CONCAT**](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)，您可以将列名收集到 CSV 列表中

```
mysql> SELECT GROUP_CONCAT(column_name) PrimaryKeyColumns
    -> FROM information_schema.statistics
    -> WHERE table_schema='cacti'
    -> AND table_name='host_snmp_cache'
    -> AND index_name='PRIMARY'
    -> ORDER BY seq_in_index;
+---------------------------------------------+
| PrimaryKeyColumns                           |
+---------------------------------------------+
| host_id,snmp_query_id,field_name,snmp_index |
+---------------------------------------------+
1 row in set (0.01 sec)

mysql> 
```

试试看 ！！！

# regex - 用文件中的空格替换非 ASCII 字符或特定 ASCII 字符

> ID：14860096
> 
> 赞同：1
> 
> 时间：2013-02-13T18:07:43.070
> 
> 标签：regex, perl, unix, sed, solaris

我想使用 shell 脚本、sed 或 Perl 将非 ASCII 字符或特定 ASCII 字符替换为文件中的空格。

首先是用文件中的空格替换所有非 ASCII 字符。我知道我们可以使用以下命令

```
perl -pi -e 's/[[:^ascii:]]/ /g' 
```

下游也有某些 ASCII 字符不能接受，所以我想用空格替换这些字符。例如，下游不接受值为 0x19（EM - 介质结束）的 ASCII 字符，我想用空格替换它。

我也知道下游有问题的一系列 ASCII 字符，我想用空格替换它们中的每一个。

我可以得到帮助来完成这个吗？

**注意：**我们系统中的 Perl 版本是 5.8.4。我想在 Solaris 10 机器上做这个练习。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:13:18.150

您可以将它们添加到正则表达式中的字符类中。例如，要删除 - 范围内的非 ASCII 字符、加号和`\031`（比如说）字符，您可以编写：`a``e`

```
perl -pi -e 's/[[:^ascii:]\031a-e]/ /g' 
```

* * *

**编辑添加：**

对于您的新要求：

> 我必须用 DEC 128 及更高版本替换非 ASCII 字符，但 DEC 145 – 148 和 DEC 150-151 除外。

你可以写：

```
perl -pi -e 's/[^[:ascii:]\x91-\x94\x96\x97]/ /g; s/\031/ /g;' 
```

（注意从`[:^ascii:]`“非 ASCII 字符”到`[:ascii:]`“ASCII 字符”的变化，以及从`[...]`“任何字符`...`”到`[^...]`“除“以外的任何字符`...`”的变化。）

# junit - JBehave - 如何写幂等故事？

> ID：14860106
> 
> 赞同：0
> 
> 时间：2013-02-13T18:08:19.060
> 
> 标签：junit, jbehave

我想为我在 JBehave 中的验收测试编写一个“常见”故事，仅当用户不存在时才添加该用户。“createUser”故事本身就是一个验收测试用例。我想`GivenStories`在“modifyUser”、“deleteUser”等上引用它——但是当“createUser”故事想要添加一个已经存在的用户时，我不想得到一个错误。

如何确保仅在需要时才执行“createUser”？我在 JBehave 中找不到“条件故事”的任何解决方案。我也不能将“createUser”故事写成幂等的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:14:43.143

这不是 JBehave 本身的问题 - 它不会在此级别上处理。我猜你想要这样的场景：

```
Given user "John" exists with ID 1234
When delete user request for ID 1234 was processed
Then no user entry for ID 1234 should exist 
```

只有在给定步骤的绑定代码中，您才会检查并在必要时创建用户（执行您的条件插入操作）。这是在您的 Java 代码中处理的，而不是在验收测试级别。它看起来像这样：

```
@Given("Given user \"$userName\" exists with ID $userId")
public void givenUserExistsWithId(String userName, int userId)
{
    if (!persistence.existsUser(userId))
    {
        persistence.createUser(userId, userName);
    }
} 
```

这样，场景就干净了，代码确保了给定状态执行后的预期状态。

# javascript - IE 和 Chrome 不在页面上显示某些元素

> ID：14860121
> 
> 赞同：0
> 
> 时间：2013-02-13T18:09:18.280
> 
> 标签：javascript, jquery, html

如您所见，在 Chrome 上，幻灯片（左侧）不加载，而在 IE 上，视频（右侧）不加载。任何人都可以看到这样做的原因吗？Firefox 可以很好地加载这两个元素:(

[我的网站有问题](http://www.wakeup.com.au/sidebar)

Chrome 屏幕截图（左中的幻灯片不显示） ![在此处输入图像描述](../Images/78ad621eee2ce78d6c514d6ce736fe10.png)

IE 截图（右下角的视频不显示） ![在此处输入图像描述](../Images/bb2ec11baecb7d4c57051c96b5de2d96.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:13:30.427

> SCRIPT1010：预期标识符
> www.wakeup.com.au，第 1 行字符 9
> 
> SCRIPT5007：无法获取未定义或空引用
> jquery.min.js 的属性“长度”，第 29 行字符 312
> 
> SCRIPT438：对象不支持属性或方法“dispatchEvent”
> prototype.js，第 6598 行字符 5
> 
> SCRIPT438：对象不支持属性或方法 'flightbox'
> www.wakeup.com.au，第 526 行字符 6
> 
> SCRIPT5007：无法设置未定义或空引用 lightbox.js 的属性“宽度”，第 33 行字符 6

* * *

> 未捕获的类型错误：无法读取未定义 jquery.min.js:29 的属性“长度”
> 
> *   c.extend.each jquery.min.js:29
> *   e.widget jquery.ui.widget.min.js:5
> *   （匿名函数）jquery.ui.tabs.min.js:5
> *   （匿名函数）jquery.ui.tabs.min.js:5
> 
> 未捕获的类型错误：对象 # 没有方法“dispatchEvent”prototype.js:6598
> 
> *   fireEvent_DOM 原型.js:6598
> *   火原型.js:6587
> *   _methodizedprototype.js:456
> *   fireContentLoadedEvent 原型.js:6773
> 
> 未捕获的类型错误：对象 # 没有方法 'flightbox' www.wakeup.com.au:526
> 
> *   （匿名功能）www.wakeup.com.au:526
> *   c.extend.ready jquery.min.js:26
> *   l jquery.min.js:33
> 
> 未捕获的类型错误：无法设置未定义 lightbox.js:33 的属性“宽度”
> 
> *   Object.extend.setWidth lightbox.js:33
> *   Lightbox.initialize lightbox.js:113
> *   类原型.js:80
> *   initLightbox lightbox.js:537
> *   （匿名函数）prototype.js:6723

你不认为这些可能与它有任何关系，是吗？

# javascript - 多个位置的文本搜索

> ID：14860124
> 
> 赞同：2
> 
> 时间：2013-02-13T18:09:34.323
> 
> 标签：javascript, google-maps, google-maps-api-3, google-places-api

我有一个商店名称列表，我想对其进行文本搜索并找到它们的位置。我只有商店的名称。我想同时对所有名称进行一次搜索，可能吗？我尝试创建多个请求，但它不适用于我正在做的其他事情。这是我现在正在尝试的。

```
var queryString = "";
for (var i = 0; i <= Stores.length - 1; i++) {
    if (i != Stores.length - 1) {
        queryString += Stores[i].Name + " AND ";
    } else {
        queryString += Stores[i].Name + "";
    }
}

var request = {
   location: location,
   radius: RADIUS,
   query: queryString
};

service = new google.maps.places.PlacesService(map);
//Do a text search for the stores in the database in the area defined by RADIUS
service.textSearch(request, callback); 
```

但是 status == google.maps.places.PlacesServiceStatus.OK 检查一直返回 false。那么有人知道如何创建一个查询多个位置的查询字符串吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:16:40.080

[Places API](https://developers.google.com/maps/documentation/javascript/places#TextSearchRequests)一次返回20个匹配项（最多 60 个）。它不支持同一事务中的多个请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T05:52:20.360

只尝试一个查询并检查它是否有效。如果它不起作用，请检查 PlacesServiceStatus 对象的值。

# jquery - 通过列表项动画循环

> ID：14860125
> 
> 赞同：1
> 
> 时间：2013-02-13T18:09:36.017
> 
> 标签：jquery, list, jquery-animate, ticker

我有一个包含在 a 中的单词列表`<div>`，`<div>`溢出设置为隐藏，因此一次只显示一个列表项。我希望每个列表项一个一个地向上滑动，但不使用该[`.slideUp()`](https://api.jquery.com/slideUp/)功能。我希望它看起来像一个从顶部移开，另一个从底部出现。我还希望列表项循环。

这是我的 HTML：

```
<div class="band_ticker">
        <ul id="slide">
            <li><h2 class="band">BAND</h2></li>
            <li><h2 class="band">PARTY BAND</h2></li>
            <li><h2 class="band">COPORATE EVENTS</h2></li>
            <li><h2 class="band">WEDDINGS</h2></li>
            <li><h2 class="band">FUNCTION BAND</h2></li>
            </ul>
    </div> 
```

我可以通过向上动画每个项目来获得一些帮助编写jQuery代码来循环这些代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T18:16:17.550

下面是一些代码，最初来自workshop.rs：

JS：

```
function tick(){
    $('#ticker li:first').animate({'opacity':0}, 200, function () {
    $(this).appendTo($('#ticker')).css('opacity', 1); });
}
setInterval(function(){ tick () }, 4000); 
```

HTML：

```
<ul id="ticker">
    <li>
        <a href="http://workshop.rs/2009/12/jqbargraph-jquery-graph-plugin/">jqBarGraph</a> is jQuery plugin that gives you freedom to easily display your data as graphs. There are three types of graphs: simple, multi and stacked.
    </li>
    <li>
        Learn how to create <a href="http://workshop.rs/2010/07/create-image-gallery-in-4-lines-of-jquery/">image gallery in 4 lines of Jquery</a>
    </li>
    <li>
        <a href="http://workshop.rs/2009/12/image-gallery-with-fancy-transitions-effects">jqFancyTransitions</a> is easy-to-use jQuery plugin for displaying your photos as slideshow with fancy transition effects.
    </li>
    <li>
        <a href="http://workshop.rs/2010/02/moobargraph-ajax-graph-for-mootools/">mooBarGraph</a> is AJAX graph plugin for MooTools which support two types of graphs, simple bar and stacked bar graph.
    </li>
</ul> 
```

# java - Android：无法将数据插入 SQLite

> ID：14860130
> 
> 赞同：0
> 
> 时间：2013-02-13T18:09:59.917
> 
> 标签：java, android, eclipse, sqlite

请看下面的代码

插入数据的代码

```
package com.example.esoftcallmanager;

import android.app.Activity;
import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.widget.Toast;

public class DatabaseHandler implements DatabaseConnector
{
    private SQLiteDatabase database;
    private String dbPath = "data//data//com.example.esoftcallmanager.sqllite//esoftDatabase";
    private static Context context;

    private static DatabaseHandler instance;

    private DatabaseHandler(Context context)
    {
        this.context = context;
    }

    @Override
    public void createConnection() 
    {

        try
        {
            database = context.openOrCreateDatabase("esoftDatabase", Context.MODE_PRIVATE, null);

            String createDatabaseQuery = "create table BranchNetwork(" +
                    "brID integer primary key autoincrement,"
                    +"city text,"
                    +"streetAddress text,"
                    +"phoneNumber1 text,"
                    +"phoneNumber2 text,"
                    +"email text"
                    +");";

            String dropDatabaseQuery = "drop table BranchNetwork";
            database.execSQL(createDatabaseQuery);

        }
        catch(SQLException sql)
        {
            Toast.makeText(context, sql.getMessage(), Toast.LENGTH_LONG).show();
        }

    }

    @Override
    public void closeConnection() {
        // TODO Auto-generated method stub

    }

    @Override
    public String getPhoneNumber() {
        // TODO Auto-generated method stub
        return null;
    }

    public static DatabaseHandler getInstance(Context context)
    {
        if(instance==null)
        {
            instance = new DatabaseHandler(context);
        }

        return instance;
    }

    public static DatabaseHandler getInstance()
    {
        if(instance==null)
        {
            instance = new DatabaseHandler(context);
        }

        return instance;
    }

    @Override
    public String insertData(String city, String streetAddress,String phoneNumber1, String phoneNumber2, String email) 
    {
        String insertQuery = "insert into BranchNetwork ('city','streetAddress','phoneNumber1','phoneNumber2','email') values("+city+","+streetAddress+","+phoneNumber1+","+phoneNumber2+","+email+");";

        try
        {
            database.execSQL(insertQuery);
            return "Data Successfully Inserted";
        }
        catch(Exception e)
        {
            Toast.makeText(context, "Exception: "+e.getMessage(), Toast.LENGTH_LONG).show();
            return "Data Insertion Failed";
        }

    }

} 
```

每当我尝试插入数据时，都会出现以下错误

```
 02-13 23:39:40.424: E/Database(655): Failure 1 (near "@wewe": syntax error) on 0x2a6128 when preparing 'insert into BranchNetwork ('city','streetAddress','phoneNumber1','phoneNumber2','email') values(asas,asasd,3434,3434,aasa@wewe.com);'. 
```

这里有什么问题？我该如何纠正？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:15:12.983

很简单，您需要将字符串用引号括起来。

```
"values('"+city+"','"+streetAddress+"'..." 
```

但是，在处理原始值时，最好使用参数化查询来防止[SQL 注入攻击](https://en.wikipedia.org/wiki/SQL_injection)和其他令人讨厌的事情：

```
db.rawQuery("insert into Foo (bar) values (?)", new String[] {city}); 
```

或使用内置方法，如[`SQLiteDatabase#insert()`](https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#insert%28java.lang.String,%20java.lang.String,%20android.content.ContentValues%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:17:05.760

尝试使用此 SQL 语句：

```
String insertQuery = "INSERT INTO BranchNetwork ('city','streetAddress','phoneNumber1','phoneNumber2','email') VALUES('"+city+"','"+streetAddress+"','"+phoneNumber1+"','"+phoneNumber2+"','"+email+"');"; 
```

当我使用这种 sql 语句时，我`'`经常遇到问题。

您也可以`ContentValues`用于插入/更新/删除。我更喜欢它而不是像那样编写 SQL 语句。在您的情况下，您可以这样做：

```
ContentValues values = new ContentValues();
values.put("city", city);
values.put("streetAddress",streetAddress);
values.put("phoneNumber1",phoneNumber1); // and ETC.
//INSERT 
sqliteDb.insert("BranchNetwork", null, values); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T18:17:43.757

以下将不起作用：

```
String insertQuery = "insert into BranchNetwork ('city','streetAddress','phoneNumber1','phoneNumber2','email') values("+city+","+streetAddress+","+phoneNumber1+","+phoneNumber2+","+email+");"; 
```

您不应该创建自己的插入 SQL，而是使用`ContentValues`并且只使用类似的东西来插入：

```
db.insert(TABLENAME, null, cv); 
```

# php - 将资产作为字符串传递给 CodeIgniter Carabiner 库

> ID：14860142
> 
> 赞同：0
> 
> 时间：2013-02-13T18:10:32.333
> 
> 标签：php, codeigniter, carabiner

[Carabiner](https://github.com/EllisLab/CodeIgniter/wiki/Carabiner)只接受它的路径`js()`和`css()`函数：

```
$this->load->library('carabiner');
$this->carabiner->js('some/file/in/script/dir');
$this->carabiner->css('some/file/in/style/dir');
$this->carabiner->display(); 
```

我希望通过设置返回标志来返回一些脚本和样式，`$this->load->view()`并在某些函数中将其传递给 Carabiner `js_string()`，例如......

```
$custom_js = $this->load->view("js_with_php_in_it", null, true);
$this->carabiner->js_string($custom_js); 
```

实际上，我已经通过创建一个名为 Carabiner 的方法以复杂的方式解决了这个问题，该方法`from_string($type, $str)`将“js”或“css”作为第一个参数，将字符串本身作为第二个参数：

```
function from_string($type, $str){
    //we'll name the file using this.
    $uniq = uniqid();
    //create a temporary file in the system's /tmp directory.
    $tmpAsset = tempnam("/tmp", $uniq);
    //Carabiner requires that your scripts are relative to $config['script_dir']
    //create a symbolic link in this directory because you can't pass it absolutes.
    $this->symbolicAsset = "assets/{$type}/{$uniq}";
    //open the file named with the unique ID in /tmp and set it up for writing.
    $handle = fopen($tmpAsset, "w");
    //write the script or style to this temporary file.
    fwrite($handle, $str);
    //point the symlink at it
    symlink($tmpAsset, $this->symbolicAsset);
    //pass this directory off to $this->carabiner->css() or $this->carabiner->js()
    $this->$type($uniq);
} 
```

然后我`unlink()`在 Carabiner 的临时文件中`__destruct()`......但是，由于明显的开销原因，我非常讨厌这个解决方案：我正在创建一个临时文件，其中包含与原始文件相同的内容，只是因为 Carabiner 严格的资产目录规则。过去是否有人修改过 Carabiner 以使其能够解析字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:44:20.930

这是这个库中缺少的好功能，我在看到这个问题后在我的主要项目中使用了这个库我在库中进行了一些修改以接受 javascripts 和 css 样式作为字符串或带有组的字符串数组它不会创建临时文件在页面中创建脚本标签和样式是这个库现在的工作方式。

**javascript字符串**

```
// script passed as string
$this->carabiner->js_string('alert("test script")'); 

// script passed as array
$this->carabiner->js_string(array('alert("test script")','alert("test script")'); 

// script passed as string with group name
$this->carabiner->js_string('alert("test script")','group_name'); 

// script passed as array with group name
$this->carabiner->js_string(array('alert("test script")','alert("test script")','group_name'); 

//load javascript along with javascript files without group name
$this->carabiner->display('js');

//load javascript along with javascript files with group name
$this->carabiner->display('group_name'); 
```

**css 样式字符串**

```
// style passed as string
$this->carabiner->css_string('p{background:red}'); 

// styles passed as array
$this->carabiner->css_string(array('p{background:red}','p{background:red}'); 

// style passed as string with group name
$this->carabiner->css_string('p{background:red}','css_group_name'); 

// style passed as array with group name
$this->carabiner->css_string(array('p{background:red}','p{background:red}','css_group_name'); 

//load style along with javascript files without group name
$this->carabiner->display('css');

//load styles along with javascript files with group name
$this->carabiner->display('css_group_name'); 
```

这是我刚刚创建并发送了 pull [Git Repo请求的 git repo](https://github.com/umefarooq/Carabiner)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:02:16.427

不是真正的答案，而是可以尝试的东西：

我认为如果你破解了 _get_contents 方法来检测 .php 文件扩展名，并且如果有一个 php 扩展名调用`$this->CI->load->view('asset.php', true)`，而不是`file_get_contents()`你可能在中途。根据我的细读，这可能仅在您使用 minify 或 combine 时才有效。

# java - 我需要帮助设计日历和日程安排应用程序

> ID：14860143
> 
> 赞同：0
> 
> 时间：2013-02-13T18:10:38.043
> 
> 标签：java, calendar

我正在尝试创建日历和日程安排应用程序。我们有一个由短期交货预约组成的数据集。开始时间、持续时间、截止日期/时间等。我们的目的是创建一个应用程序，该应用程序将在给定工作块的开始和结束时间的情况下生成任务列表。

作业按以下顺序排列优先级：

1.  今天在特定时间到期
2.  今天到期，没有具体时间
3.  在未来日期到期，按升序排序
4.  没有截止日期
5.  未来开始日期（不包括在报告中）

当应用程序运行时，输入工作班次的开始和结束时间。该时间段会自动按优先级顺序填充作业。

考虑：

```
Job01; Duration 10; Start 01/01; Due 01/02 1500;
Job02; Duration 60; Start 01/01; Due 01/02;
Job03; Duration 45; Start 01/08; Due 01/08 1500;
Job04; Duration 30; Start 01/09; Due 01/09 1500;
Job05; Duration 30; Start 12/31; ;
Job06; Duration 60; Start 12/28; ;
Job07; Duration 60; Start 01/04; ;
Job08; Duration 60; Start 01/04; ;
Job09; Duration 30; Start 01/01; Due 01/03 1200;
Job10; Duration 10; Start 01/01; Due 01/05 1700; 
```

在 01/02，这十个工作将按以下顺序排列优先级：`01-02-09-10-05-06`. `03-04-07-08`由于未来的开始日期，作业将被排除在外。

考虑：在 01/02，我进入办公室进行四小时轮班，`1200-1600`然后将这些数据输入调度程序。

从那里开始，我需要以下魔法发生：

1.  从我的开始时间开始，添加最优先的工作。
2.  如果该作业是专门安排的作业，请保留该时间，以免其他作业覆盖它。
3.  一旦具有特定时间的所有工作都在日历中，从第一个职位空缺开始填写约会，直到日历被填满，然后停止。

按照这个逻辑，以下是数据如何填写时间表。

```
Job01 - 1500-1510
Job02 - cannot fit in the 1510-1500 slot, so it populates 1200-1300
Job05 - 1300-1330
Job06 - 1330-1430
Job09 - 1430-1500
Job10 - 1510-1520 
```

到目前为止，我的优先级逻辑工作得很好。我可以正确地将第一条记录捕获到时间表中。但是后来，我迷失在了alendaring 部分，尤其是如何保持某个时间段以便没有任何内容覆盖它，并且不超过开始和结束时间。我正在努力寻找一种有效的方法来构建填充日历的方法。我是否创建了一个 15 分钟的存储桶数组，并在遍历任务列表时用约会填充这些存储桶？每次我安排一个事件并通过调度程序传递另一个事件时，我是否会以某种方式传递 a`newStartTime`并返回顶部？`newEndTime`事件是在记忆中举行的吗？或在填充特定插槽时写入数据库？Java中是否有一个预定义的类已经做到了这一点而我错过了它？天哪……那会很尴尬……

我现在离这个太近了，并且无法想象一个好的策略。任何建议、观察和通用伪代码都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:42:23.307

**观察/建议1：** 我不清楚为什么你会希望一份工作覆盖另一份工作。如果您已经完成了优先级代码并且您首先添加了最高优先级的作业，为什么您需要覆盖时隙？我会创建一个结构，允许一个工作声明一个时间段，然后一旦声明其他工作就不能声明同一个时间段。

编写一个作业计划类来处理一天的作业。它可以只存储今天计划中的作业列表。然后可以即时计算可用时隙和占用时隙。如果您担心断电后数据仍然存在，那么您可以定期将对象的一些序列化写入磁盘。除非您希望此应用程序是多线程的，然后您可以将线程安全问题委托给数据库，否则我并没有真正看到将这些数据存储在数据库中的价值。

我建议在 Job 中添加一个字段：assignedStartTime。

创建一个仅存储开始时间和结束时间的 TimeInterval 类。

然后在 Schedule 中，我们可以编写以下内容：

```
public class Schedule {

  //Finds the first time slot during the day not yet assigned to a job.
  public Interval getFirstOpenTimeSlot() { /* ...*/ }

  public Interval getLargestOpenTimeSlot() { /* ...*/ }

  public ArrayList<Job> getJobsAssigned() {  /* ...*/ }

  //Returns the Interval the given job was assigned to or null if the job cannot fit
  // in the schedule.
  public Interval assignJob(Job theJob) {  /* ...*/ }

  //returns a list of all open time slots representing the time still available for jobs.
  public ArrayList<Interval> getAllOpenTimeSlots{ /*  */ }

} 
```

**观察 2：** 当您实现 assignJob 时，您应该能够只查找满足要求的第一个可用时隙。以这种方式进行会给你一个时间表，但可能不是最优化的时间表。如果存在无法安排所有作业的情况，您需要仔细定义最佳解决方案的外观。一个错过最少工作岗位的人？一个捕获今天到期的最多职位的职位？

**建议：** 我会让 Interval 实现 Comparable。首先按长度排序间隔，然后按开始时间。将间隔存储在 TreeSet 中，以便它们始终是有序的。这将使在尝试安排新工作时更容易和更有效地找到最佳拟合间隔。

# python - tell() 究竟返回了什么，我如何使用它来计算文件读取的百分比？

> ID：14860147
> 
> 赞同：1
> 
> 时间：2013-02-13T18:10:54.513
> 
> 标签：python, tell

我在 Windows 上使用 Python 2.7，而且我对 Python 很陌生，所以如果这很简单，请原谅我。

我读过的所有内容都说tell（）返回“位置”，我相信这基本上是我们当前在读取中的光标位置。好的，这听起来很有帮助，但我不知道如何找到文件的总“位置”来计算百分比。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:11:34.313

您可以寻找到文件的末尾，然后调用`.tell()`：

```
import os

fileobj.seek(0, os.SEEK_END)
size = fileobj.tell()
fileobj.seek(0, os.SEEK_SET) 
```

上面的例子使用[`os.SEEK_*`常量](http://docs.python.org/2/library/os.html#os.SEEK_SET)来设置如何解释查找偏移量（第一个参数`.seek()`）。

或者您可以使用该[`os.fstat()`函数](http://docs.python.org/2/library/os.html#os.fstat)来检索打开文件的大小：

```
import os

size = os.fstat(fileobj.fileno()).st_size 
```

后一种信息可以更容易地被操作系统缓存，因此通常会更快。

# c# - 高级删除阵列重复

> ID：14860152
> 
> 赞同：0
> 
> 时间：2013-02-13T18:11:07.090
> 
> 标签：c#, arrays, duplicates

我有 3 个数组。

```
Array 1 = {1,1,1,1,2,2,3,3}
Array 2 = {a,a,a,a,e,e,b,b}
Array 3 = {z,z,z,z,z,z,z,z} 
```

我想从数组 1 中删除所有重复项，并在其他数组中的所述重复项中删除相同的元素，以使它们全部正确链接。

我知道您可以使用 .Distinct().ToArray() 对一个数组执行此操作，但是其他数组也不会删除元素。

结果看起来像这样。

```
Array 1 = {1,2,3}
Array 2 = {a,e,b}
Array 3 = {z,z,z} 
```

我猜想解决这个问题的唯一方法是以下。

```
For(int a = 0; a < Array1.count; a++) {
    For(int b = a + 1; b < Array1.count; b++) {
      if(Array1[a]==Array1[b]) {
        Array1.RemoveAt(b);
        Array2.RemoveAt(b);
        Array3.RemoveAt(b);
      }
    }
} 
```

但是，如果能找到一个简单的预定义函数就好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:17:13.940

```
var distinctIndexes = array1
    .Select((item, idx) => new { Item = item, Index = idx })
    .GroupBy(p => p.Item)
    .Select(grp => grp.First().Index);

var result1 = distinctIndexes.Select(i => array1[i]).ToArray();
var result2 = distinctIndexes.Select(i => array2[i]).ToArray();
var result3 = distinctIndexes.Select(i => array3[i]).ToArray(); 
```

请注意，这不一定会使用第一个数组中的第一个唯一元素。如果您需要这样做，您可以将索引计算为

```
var distinctIndexes = array1
    .Select((item, idx) => new { Item = item, Index = idx })
    .Aggregate(new Dictionary<int, int>(), (dict, i) =>
    {
        if (! dict.ContainsKey(i.Item))
        {
            dict[i.Item] = i.Index;
        }
        return dict;
    })
    .Values; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:17:41.477

您应该仔细考虑您正在使用的数据结构。这种“删除”操作是否可能同时发生？多常？（我不一定要挑战您对 Array 的使用，只是一般提示，但您的情况似乎很奇怪）。此外，您没有解释这是基于索引的删除还是基于元素的删除。如果我正在实现这一点，我会很想创建一个新数组并将所有剩余元素循环添加到新数组中，而忽略要删除的元素。然后简单地用'='重新分配引用。当然，这取决于数组的最大预期大小，因为像我建议的副本会占用更多内存（通常不会有问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:17:34.927

我真的不知道一种干净的方式来做你所要求的，但这是一个做你所问的一般例子？

```
static void RemoveDupes(ref Array a1, ref Array a2, ref Array a3)
{
    Type a1t, a2t, a3t;
    int newLength, ni, oi;
    int[] indices;

    a1t = a1.GetType().GetElementType();
    a2t = a1.GetType().GetElementType();
    a3t = a1.GetType().GetElementType();

    Dictionary<object, List<int>> buckets = new Dictionary<object, List<int>>();
    for (int i = 0; i < a1.Length; i++)
    {
        object val = a1.GetValue(i);
        if (buckets.ContainsKey(val))
            buckets[val].Add(i);
        else
            buckets.Add(val, new List<int> { i });
    }

    indices = buckets.Where(kvp => kvp.Value.Count > 1).SelectMany(kvp => kvp.Value.Skip(1)).OrderBy(i => i).ToArray();
    newLength = a1.Length - indices.Length;

    Array na1 = Array.CreateInstance(a1t, newLength);
    Array na2 = Array.CreateInstance(a2t, newLength);
    Array na3 = Array.CreateInstance(a3t, newLength);

    oi = 0;
    ni = 0;
    for (int i = 0; i < indices.Length; i++)
    {
        while (oi < indices[i])
        {
            na1.SetValue(a1.GetValue(oi), ni);
            na2.SetValue(a2.GetValue(oi), ni);
            na3.SetValue(a3.GetValue(oi), ni);
            oi++;
            ni++;
        }
        oi++;
    }
    while (ni < newLength)
    {
        na1.SetValue(a1.GetValue(oi), ni);
        na2.SetValue(a2.GetValue(oi), ni);
        na3.SetValue(a3.GetValue(oi), ni);
        oi++;
        ni++;
    }
    a1 = na1;
    a2 = na2;
    a3 = na3;
} 
```

# c++ - 为什么 FindWindowEx 找不到我所有的按钮？

> ID：14860155
> 
> 赞同：1
> 
> 时间：2013-02-13T18:11:10.447
> 
> 标签：c++, installation, hwnd, findwindowex

我应该写一个自动安装程序。只是一个您启动的程序，它应该自行完成安装向导，无需用户触摸任何东西。

我目前正在开发的程序称为 Cygwin。而我要做的就是一遍又一遍地点击“下一步”按钮，直到安装完成。我知道我可以使用 VBS，我知道我可以使用 C#，这会让我的生活变得更轻松。但是我有一个示例说明它如何适用于另一个程序，并且我正在尝试将它用于 C++ 中的 Cygwin。

```
 HWND WINAPI FindWindowEx(
      _In_opt_  HWND hwndParent,
      _In_opt_  HWND hwndChildAfter,
      _In_opt_  LPCTSTR lpszClass,
      _In_opt_  LPCTSTR lpszWindow
      ); 
```

这是我用来查找按钮的功能，在下一步中应该单击它。我在 hwndParent 中有程序窗口，并且工作正常。hwndChildAfter 和 lpszClass 是“NULL”，而 lpszWindow 是按钮的名称。这适用于按钮“Abbrechen”（德语为取消）。但是，当我将该名称更改为“Weiter”（Next 的德语）时，它就不再起作用了。他就是找不到。我认为这与“Weiter”的写作方式有关。它不仅是唯一的词。整个表达式是 "Weiter >" 当然我把整个表达式放在 lpszWindow 中用 "" 括起来，就像我对 "Abbrechen" 所做的那样。但就像我说的，他没有找到。我已经尝试了编写它的所有变体，但它不起作用。

有谁知道“>”或“”（空格）是否有问题，因此他无法阅读。如果是这样，有什么办法可以解决吗？或者是否可以获得按钮的 ID 或类似的东西，可以用来告诉程序在哪里设置鼠标点击。

正如我所说，我知道 C++ 并不是真正适合这项任务的最佳语言，最后我想我会改用其他语言。但我真的很想知道为什么它适用于“Abbrechen”以及为什么它不适用于“Weiter >”。

因此，如果有人有解决方案，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:50:24.857

我怀疑按钮的*实际*文本不仅包括加速键，`"Weiter >"`而且还包括一个`&`用于加速键的文本。尝试按一下`Alt`，看看是否出现了一个字母，其下有一个取消划线。如果是这样，则该字母以 . 为前缀`&`。

这个“解决方案”实际上非常脆弱，很容易破坏。例如，如果用户在他们的系统上配置了另一种语言怎么办？

可以获取按钮的 ID，该 ID 不太可能更改。但是您首先必须找到安装程序窗口，然后枚举其子窗口。要查找按钮的 ID，请使用 JosephH 在他的评论中建议的 Spy++。

# winforms - 检索添加列表视图项的索引？

> ID：14860156
> 
> 赞同：1
> 
> 时间：2013-02-13T18:11:15.673
> 
> 标签：winforms, visual-c++, listview, indexing

我使用以下代码将项目添加到我的 listView...

```
 ListViewItem^ subitem = gcnew ListViewItem();

    subitem->SubItems->Add(textBox2->Text);

    listView3->Items->Add(subitem); 
```

我会在上面添加什么代码，以便它可以检索这个新添加项目的索引？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:47:29.240

新增项的索引基本应该是集合的最后一个索引。试试这个 ：

```
int index = listView3->Items->Count - 1; 
```

也试试这个：

```
int index = listView3->Items->IndexOf(subitem); 
```

# coldfusion - 获取有关 cfgrid 的错误信息 - cfdebug

> ID：14860157
> 
> 赞同：2
> 
> 时间：2013-02-13T18:11:17.853
> 
> 标签：coldfusion, cfgrid

我用的是 CF9

编辑更新 cfgrid 中数据库信息的字段时，出现此错误：

“调用 CFC /assetMgmt/assetdata.cfc 时出错：执行数据库查询时出错。[通过将 'cfdebug' 添加到 URL 参数来启用调试以查看更多信息]”。

将 ?cfdebug 添加到 url 的末尾并按 Enter 会打开菜单以搜索要填充网格的项目，因此一旦填充了网格（因为点击了搜索按钮），cfdebug 参数就会被删除。

我想我需要一些方法来启用此 cfdebug 模式而无需导航到页面，因为它删除了 cfgrid。抱歉，如果这听起来令人困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:46:26.567

这是我的建议：使用 chrome 或 Safari。打开开发者工具并查看控制台。确保正在记录 xmlhttprequests。

现在访问有问题的页面。您将在控制台中看到记录的错误（可能是 500 错误）以及请求的 URL。右键单击网址并在新选项卡中打开。这将重新运行请求并直接在浏览器中输出结果，以便您可以看到抛出的错误。修复错误，您应该一切顺利。

如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T15:49:18.300

I found that giving a `sql` column an `alias` with a space in it caused an issue in `ext-all.js` with `cfgrid`. To fix this, I replaced the spaces with non breaking spaces (`&nbsp`) and it solved the issue.

# sql - TSQL OVER 子句：COUNT(*) OVER (ORDER BY a)

> ID：14860162
> 
> 赞同：14
> 
> 时间：2013-02-13T18:11:39.890
> 
> 标签：sql, sql-server, tsql, sql-server-2012, window-functions

这是我的代码：

```
USE [tempdb];
GO

IF OBJECT_ID(N'dbo.t') IS NOT NULL
BEGIN
    DROP TABLE dbo.t
END
GO

CREATE TABLE dbo.t
(
    a NVARCHAR(8),
    b NVARCHAR(8)
);
GO

INSERT t VALUES ('a', 'b');
INSERT t VALUES ('a', 'b');
INSERT t VALUES ('a', 'b');
INSERT t VALUES ('c', 'd');
INSERT t VALUES ('c', 'd');
INSERT t VALUES ('c', 'd');
INSERT t VALUES ('c', 'd');
INSERT t VALUES ('e', NULL);
INSERT t VALUES (NULL, NULL);
INSERT t VALUES (NULL, NULL);
INSERT t VALUES (NULL, NULL);
INSERT t VALUES (NULL, NULL);
GO

SELECT  a, b,
    COUNT(*) OVER (ORDER BY a)
FROM    t; 
```

在[BOL 的这个页面上](http://msdn.microsoft.com/en-us/library/ms189461.aspx)，微软说：

> 如果未指定 PARTITION BY，则该函数将查询结果集的所有行视为一个组。

所以根据我的理解，最后一条`SELECT`语句会给我以下结果。由于所有记录都被视为一个组，对吗？

```
a        b        
-------- -------- -----------
NULL     NULL     12
NULL     NULL     12
NULL     NULL     12
NULL     NULL     12
a        b        12
a        b        12
a        b        12
c        d        12
c        d        12
c        d        12
c        d        12
e        NULL     12 
```

但实际结果是：

```
a        b        
-------- -------- -----------
NULL     NULL     4
NULL     NULL     4
NULL     NULL     4
NULL     NULL     4
a        b        7
a        b        7
a        b        7
c        d        11
c        d        11
c        d        11
c        d        11
e        NULL     12 
```

任何人都可以帮助解释为什么？谢谢。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-13T18:22:42.440

它给出了一个运行总数（此功能直到[版本 2012](http://msdn.microsoft.com/en-us/library/ms189461.aspx)才在 SQL Server 中实现。）

`ORDER BY`定义要聚合的窗口，并且`UNBOUNDED PRECEDING`在`CURRENT ROW`未指定时作为默认值。SQL Server 默认使用[性能较差的](http://www.sqlperformance.com/2012/07/t-sql-queries/running-totals) `RANGE`选项，而不是`ROWS`.

它们在 tie 的情况下具有不同的语义，因为`RANGE`版本的窗口不仅包括当前行（和前面的行），还包括与当前行具有相同 value 的任何其他已绑定行`a`。这可以从下面结果中每个计算的行数中看出。

```
SELECT  a, 
        b,
        COUNT(*) OVER (ORDER BY a 
                         ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS  [Rows],
        COUNT(*) OVER (ORDER BY a 
                         RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS [Range],
        COUNT(*) OVER() AS [Over()]
    FROM    t; 
```

退货

```
a        b        Rows        Range       Over()
-------- -------- ----------- ----------- -----------
NULL     NULL     1           4           12
NULL     NULL     2           4           12
NULL     NULL     3           4           12
NULL     NULL     4           4           12
a        b        5           7           12
a        b        6           7           12
a        b        7           7           12
c        d        8           11          12
c        d        9           11          12
c        d        10          11          12
c        d        11          11          12
e        NULL     12          12          12 
```

要实现您期望得到的结果，请省略and并**使用**空子句（如上所示）。`PARTITION BY``ORDER BY``OVER()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-19T11:53:58.733

如果没有指定ROWS/RANGE，但指定了ORDER BY，则RANGE UNBOUNDED PRECEDING AND CURRENT ROW作为窗口框架的默认值那么这是什么意思，让我们关注“UNBOUNDED PRECEDING AND CURRENT ROW”。这给出了从起始行到当前行的运行总计。但如果你想有一个总体计数，那么你也可以指定

“UNBOUNDED PRECEDING 和 UNBOUNDED Follow” 这考虑了整个数据集，而 Over() 只是这个的捷径

```
 select a,b,
count(*) over(order by a) as [count],
COUNT(*) OVER (ORDER BY a 
                         RANGE BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS [Range],
COUNT(*) OVER (ORDER BY a 
                         ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS  [Rows],
COUNT(*) OVER (ORDER BY a 
                         RANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED Following) AS [Range_Unbounded_following],
COUNT(*) OVER (ORDER BY a 
                         ROWs BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED Following) AS [Row_Unbounded_following]
,COUNT(*) OVER () AS [Plain_over]
from t 
order by [count] 
```

结果是

```
a        b        count       Range       Rows        Range_Unbounded_following Row_Unbounded_following Plain_over
-------- -------- ----------- ----------- ----------- ------------------------- ----------------------- -----------
NULL     NULL     4           4           1           12                        12                      12
NULL     NULL     4           4           2           12                        12                      12
NULL     NULL     4           4           3           12                        12                      12
NULL     NULL     4           4           4           12                        12                      12
a        b        7           7           5           12                        12                      12
a        b        7           7           6           12                        12                      12
a        b        7           7           7           12                        12                      12
c        d        11          11          8           12                        12                      12
c        d        11          11          9           12                        12                      12
c        d        11          11          10          12                        12                      12
c        d        11          11          11          12                        12                      12
e        NULL     12          12          12          12                        12                      12 
```

# http - Gitolite 和 http 错误 500。设置中的权限问题

> ID：14860166
> 
> 赞同：1
> 
> 时间：2013-02-13T18:11:56.553
> 
> 标签：http, permissions, gitolite

我试图在 Fedora 17 服务器上安装 Gitolite，目的是设置 git 和 HTTP 访问以及授权。Git 访问工作正常。可以推拉。但是 HTTP 访问因错误 500 而失败。看来我的权限有问题。

这就是我所做的。我按照这里的说明进行操作：`sitaramc.github.com`

如果有人想详细了解它，我[已经记录了我在这里尝试做的事情。](http://mochapenguin.blogspot.co.uk/2013/02/setting-up-gitolite-git-and-http-access.html)

HTTP 错误：

> 内部服务器错误 - 500
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 服务器错误日志中可能提供有关此错误的更多信息。

错误日志 - /var/log/httpd/error-git.log

> [2013 年 2 月 13 日星期三 08:26:11] [错误] [客户端 192.168.0.40] suexec 失败：无法打开日志文件
> [2013 年 2 月 13 日星期三 08:26:11] [错误] [客户端 192.168.0.40] fopen：权限被拒绝
> [2013 年 2 月 13 日星期三 08:26:11] [错误] [客户端 192.168.0.40] 脚本头过早结束：gitolite-suexec-wrapper.sh
> [2013 年 2 月 13 日星期三 08:30:13] [错误] [ client 192.168.0.40] Options 指令禁止的目录索引：/var/www/git/

*** 更新 1 ***
- 设法在此处发布错误输出。

*** 更新 2 ***
放宽日志目录和 gitolite-suexec-wrapper.sh 的权限。更多详细信息可在上面我详细记录的链接中找到。
/var/log/httpd/error-git.log

> [2013 年 2 月 13 日星期三 21:18:47] [错误] [客户端 192.168.0.40] suexec 策略违规：有关详细信息，请参阅 suexec 日志
> [2013 年 2 月 13 日星期三 21:18:47] [错误] [客户端 192.168.0.40]脚本头过早结束：gitolite-suexec-wrapper.sh
> [Wed Feb 13 21:18:54 2013] [error] [client 192.168.0.40] Options 指令禁止的目录索引：/var/www/git/
> 
> $ sudo 更多 /var/log/httpd/suexec.log
> [2013-02-13 21:18:47]: uid: (990/git) gid: (988/git) cmd: gitolite-suexec-wrapper.sh
> [ 2013-02-13 21:18:47]：无法统计程序：（gitolite-suexec-wrapper.sh）

不知道下一步在哪里

***更新3 ***

好的，所以我取得了一些进展。我可能已经修复了权限问题。现在面临 PATH 问题。和以前一样，最相关的输出都包含在这里。完整的详细信息在我原始帖子的链接中更新。

我对 Apache 配置的了解非常基础。在阅读了有关 suEXEC 的内容后，我意识到权限问题可能是由 SELinux 引起的。所以我暂时禁用了它。（想确定一种让 gitolite 与 SELinux 一起工作的方法，但那是以后的事了。欢迎提出建议。）

现在当我访问网址时：http://mochapenguin /git/testing.git 在浏览器中

001E# service=git-upload-pack 0000003BERR 致命：未知的 git/gitolite 命令：'testing.git'

当我从客户端机器测试时，我看到：

> ssh git@mochapenguin \echo $PATH FATAL: unknown git/gitolite command: 'echo /usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin :/usr/sbin:/home/mochapenguin/.local/bin:/home/mochapenguin/bin'

*** 更新 4 ***
好的，开始工作了。自我上次更新以来，无需进一步更改。

我应该尝试像这样访问 repo，而不是在浏览器中尝试 URL：

```
git clone http://username:password@mochapenguin/git/testing.git 
```

此设置允许克隆和推送 http

我不知道我做错了什么。

有人可以指点我正确的方法吗？

# ios - iOS - 在 _WebTryThreadLock 中确定崩溃的原因（从崩溃报告中）

> ID：14860180
> 
> 赞同：4
> 
> 时间：2013-02-13T18:13:08.340
> 
> 标签：ios, crash, crash-reports

我一直在试图弄清楚是什么导致了我的 iOS 应用程序中最严重的崩溃之一。看起来后台线程上发生了一些布局，导致它崩溃。有什么方法可以确定我可能在做什么来触发这个重新布局？当我的应用程序被带回前台时，我从堆栈中假设它与 UIWebView 相关。

该主题的其他stackoverflow线程似乎提到了在后台线程上触发表重新加载之类的事情。据我所知，所有的 webView 委托方法都在主线程上被调用。在某些情况下这是不正确的，或者是否有一些其他方法在后台线程上被调用而我只是不知道？

网络线程 - 崩溃。

```
0    WebCore _WebTryThreadLock(bool) + 297
1    WebCore _WebTryThreadLock(bool) + 288
2    WebCore WebThreadLock + 66
3    UIKit -[UIWebDocumentView(UIWebDocumentViewTextSelecting) selectionBaseWritingDirection] + 10
4    UIKit -[UITextField _currentTextAlignment] + 86
5    UIKit -[UITextField _showsClearButtonWhenNonEmpty:] + 58
6    UIKit -[UITextField _textRectForBounds:forEditing:] + 678
7    UIKit -[UITextField editingRectForBounds:] + 52
8    UIKit -[UITextField editRect] + 70
9    UIKit -[UITextField layoutSubviews] + 1320
10   UIKit -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 258
11   QuartzCore -[CALayer layoutSublayers] + 214
12   QuartzCore CA::Layer::layout_if_needed(CA::Transaction*) + 460
13   QuartzCore CA::Layer::layout_and_display_if_needed(CA::Transaction*) + 16
14   QuartzCore CA::Context::commit_transaction(CA::Transaction*) + 238
15   QuartzCore CA::Transaction::commit() + 316
16   QuartzCore CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 60
17   CoreFoundation __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 20
18   CoreFoundation __CFRunLoopDoObservers + 276
19   CoreFoundation CFRunLoopRunSpecific + 394
20   CoreFoundation CFRunLoopRunInMode + 104
21   WebCore RunWebThread(void*) + 444
22   libsystem_c.dylib pthread_start + 308 
```

主线程

```
0    libsystem_kernel.dylib __psynch_mutexwait + 24
1    libsystem_c.dylib pthread_mutex_lock + 392
2    WebCore _WebTryThreadLock(bool) + 336
3    WebCore WebThreadLock + 66
4    WebKit -[WebDatabasePauser applicationWillEnterForeground] + 16
5    CoreFoundation _CFXNotificationPost + 1426
6    Foundation -[NSNotificationCenter postNotificationName:object:userInfo:] + 72
7    UIKit -[UIApplication _sendWillEnterForegroundCallbacks] + 154
8    UIKit -[UIApplication _handleApplicationResumeEvent:] + 1094
9    UIKit -[UIApplication handleEvent:withNewEvent:] + 1292
10   UIKit -[UIApplication sendEvent:] + 72
11   UIKit _UIApplicationHandleEvent + 6154
12   GraphicsServices _PurpleEventCallback + 590
13   CoreFoundation __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 14
14   CoreFoundation __CFRunLoopDoSources0 + 212
15   CoreFoundation __CFRunLoopRun + 646
16   CoreFoundation CFRunLoopRunSpecific + 356
17   CoreFoundation CFRunLoopRunInMode + 104
18   GraphicsServices GSEventRunModal + 74
19   UIKit UIApplicationMain + 1120
20   AppName main.m line 23 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:51:15.380

看来您正在后台线程上更新 UI，在您的代码中添加此行，无论您要更新 UI 并在后台线程上获取数据：

```
dispatch_async(dispatch_get_main_queue(), ^{
                    // Update data here
}); 
```

只要您，宁可代码感觉到设备上存在数据，是时候更新与新数据对应的 UI，然后尝试恢复主线程。

希望能帮助到你。

# c - 表达式“j = ++(i | i); 和 j = ++(i & i); 应该是左值错误吗？

> ID：14860189
> 
> 赞同：45
> 
> 时间：2013-02-13T18:13:23.237
> 
> 标签：c, optimization, gcc, pre-increment, gcc4.4

我期待在我的以下代码中：

```
#include<stdio.h> 
int main(){
    int i = 10; 
    int j = 10;

    j = ++(i | i);
    printf("%d %d\n", j, i);

    j = ++(i & i);
    printf("%d %d\n", j, i);

    return 1;
} 
```

表达式`j = ++(i | i);`并将`j = ++(i & i);`产生如下左值错误：

```
x.c: In function ‘main’:
x.c:6: error: lvalue required as increment operand
x.c:9: error: lvalue required as increment operand 
```

但令我惊讶的是，上面的代码编译成功了，如下：

```
~$ gcc x.c -Wall
~$ ./a.out 
11 11
12 12 
```

检查[上面的代码](http://codepad.org/3zJE0DuX)是否正常工作。

而其他运营商产生错误（据我了解）。甚至按位运算符 XOR 也会导致错误`j = ++(i ^ i);`（检查其他运算符在编译时[产生左值错误）。](http://codepad.org/g08e8GkH)

是什么原因？这是未指定还是未定义？还是按位 OR AND 运算符不同？

编译器版本：

```
gcc version 4.4.5 (Ubuntu/Linaro 4.4.4-14ubuntu5) 
```

[但我相信编译器版本不应该导致不统一的行为。如果`^`没有编译，那么`|`也`&`没有。否则应该适用于所有人]

在 c99 模式下，此编译器不是错误：`gcc x.c -Wall -std=c99`.

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-13T18:26:01.827

你是对的，它不应该编译，并且在大多数编译器上，它不编译。
~~*（请准确说明哪个编译器/版本不会给您编译器错误）*~~

我只能假设编译器知道那些身份，`(i | i) == i`并且`(i & i) == i`正在使用这些身份来优化表达式，只留下变量`i`。

这只是一个猜测，但对我来说很有意义。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-13T18:28:55.320

这是一个已在较新的 GCC 版本中解决的错误。

这可能是因为编译器优化`i & i`到`i`和`i | i`to `i`。这也解释了为什么 xor 运算符不起作用；`i ^ i`将被优化为`0`，这不是可修改的左值。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-02-13T18:33:42.410

> **C11 (n1570), § 6.5.3.1 前缀递增和递减运算符**
> 前缀递增或递减运算符的操作数应具有原子、合格或非合格实数或指针类型，并且应是*可修改的左值*。
> 
> **C11 (n1570), § 6.3.2.1 左值、数组和函数**
> 指示符结构或联合，没有任何具有 const 限定类型的成员（包括递归地，所有包含的聚合或联合的任何成员或元素）。
> 
> **C11 (n1570), § 6.3.2.1 左值、数组和函数指示符**
> 左值是一个表达式（对象类型不是`void`），它可能指定一个对象。
> 
> **C11 (n1570), § 3\. 术语、定义和符号**
> 对象：执行环境中的数据存储区域，其内容可以表示值

据我所知，*潜在*的意思是“能够存在但还不存在”。但`(i | i)`不能引用执行环境中的数据存储区域。因此它不是左值。这似乎是旧 gcc 版本中的错误，此后已修复。更新你的编译器！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-14T16:38:08.260

只是我的问题的后续行动。我添加了详尽的答案，以便人们发现它很有帮助。

> ## **在我的代码表达式中`j = ++(i | i);`， `j = ++(i & i);`不是左值错误引起的吗？**

由于@abelenky 回答的编译器优化`(i | i) == i`和`(i & i) == i`. 那是完全正确的。

在我的编译器`(gcc version 4.4.5)`中，任何包含单个变量和结果的表达式都不会改变；优化为单个变量（称为*非表达式*）。

例如：

```
j = i | i      ==> j = i
j = i & i      ==> j = i
j = i * 1      ==> j = i
j = i - i + i  ==> j = i 
```

[`==>`方法`optimized to`]

为了观察它，我编写了一个小的 C 代码并用`gcc -S`.

**C代码：（** 阅读*评论*）

```
#include<stdio.h>
int main(){
    int i = 10; 
    int j = 10;
    j = i | i;      //==> j = i
        printf("%d %d", j, i);
    j = i & i;      //==> j = i
        printf("%d %d", j, i);
    j = i * 1;      //==> j = i
    printf("%d %d", j, i);
    j = i - i + i;  //==> j = i
    printf("%d %d", j, i);
} 
```

汇编输出：（*阅读评论*）

```
main:
    pushl   %ebp
    movl    %esp, %ebp
    andl    $-16, %esp
    subl    $32, %esp
    movl    $10, 28(%esp)   // i 
    movl    $10, 24(%esp)   // j

    movl    28(%esp), %eax  //j = i
    movl    %eax, 24(%esp)

    movl    $.LC0, %eax
    movl    28(%esp), %edx
    movl    %edx, 8(%esp)
    movl    24(%esp), %edx
    movl    %edx, 4(%esp)
    movl    %eax, (%esp)
    call    printf

    movl    28(%esp), %eax  //j = i
    movl    %eax, 24(%esp)

    movl    $.LC0, %eax
    movl    28(%esp), %edx
    movl    %edx, 8(%esp)
    movl    24(%esp), %edx
    movl    %edx, 4(%esp)
    movl    %eax, (%esp)
    call    printf

    movl    28(%esp), %eax  //j = i
    movl    %eax, 24(%esp)

    movl    $.LC0, %eax
    movl    28(%esp), %edx
    movl    %edx, 8(%esp)
    movl    24(%esp), %edx
    movl    %edx, 4(%esp)
    movl    %eax, (%esp)
    call    printf

    movl    28(%esp), %eax  //j = i
    movl    %eax, 24(%esp)

    movl    $.LC0, %eax
    movl    28(%esp), %edx
    movl    %edx, 8(%esp)
    movl    24(%esp), %edx
    movl    %edx, 4(%esp)
    movl    %eax, (%esp)
    call    printf 
```

在上面的汇编代码中，所有表达式都转换为以下代码：

```
movl    28(%esp), %eax  
movl    %eax, 24(%esp) 
```

这相当于`j = i`在 C 代码中。因此`j = ++(i | i);`和`j = ++(i & i);`被优化为`j = ++i`。

*注意：* `j = (i | i)`是一个语句，其中 as 表达式`(i | i)` [**不是 C 中的语句 (nop)**](https://stackoverflow.com/questions/13566662/regarding-optimization-for-not-a-statment-in-c)

因此我的代码可以成功编译。

> ## **为什么`j = ++(i ^ i);`或`j = ++(i * i);`，`j = ++(i | k);`在我的编译器上产生左值错误？**

因为任一表达式具有常量值或不可修改的左值（未优化的表达式）。

[我们可以观察使用`asm`代码]

```
#include<stdio.h> 
int main(){
    int i = 10; 
    int j = 10;
    j = i ^ i;
    printf("%d %d\n", j, i);
    j = i - i;
    printf("%d %d\n", j, i);
    j =  i * i;
    printf("%d %d\n", j, i);
    j =  i + i;
    printf("%d %d\n", j, i);        
    return 1;
} 
```

汇编代码：（*阅读评论*）

```
main:
    pushl   %ebp
    movl    %esp, %ebp
    andl    $-16, %esp
    subl    $32, %esp
    movl    $10, 28(%esp)      // i
    movl    $10, 24(%esp)      // j

    movl    $0, 24(%esp)       // j = i ^ i;
                               // optimized expression i^i = 0
    movl    $.LC0, %eax
    movl    28(%esp), %edx
    movl    %edx, 8(%esp)
    movl    24(%esp), %edx
    movl    %edx, 4(%esp)
    movl    %eax, (%esp)
    call    printf

    movl    $0, 24(%esp)      //j = i - i;
                              // optimized expression i - i = 0
    movl    $.LC0, %eax
    movl    28(%esp), %edx
    movl    %edx, 8(%esp)
    movl    24(%esp), %edx
    movl    %edx, 4(%esp)
    movl    %eax, (%esp)
    call    printf

    movl    28(%esp), %eax    //j =  i * i;
    imull   28(%esp), %eax
    movl    %eax, 24(%esp)

    movl    $.LC0, %eax
    movl    28(%esp), %edx
    movl    %edx, 8(%esp)
    movl    24(%esp), %edx
    movl    %edx, 4(%esp)
    movl    %eax, (%esp)
    call    printf

    movl    28(%esp), %eax   // j =  i + i;
    addl    %eax, %eax
    movl    %eax, 24(%esp)

    movl    $.LC0, %eax
    movl    28(%esp), %edx
    movl    %edx, 8(%esp)
    movl    24(%esp), %edx
    movl    %edx, 4(%esp)
    movl    %eax, (%esp)
    call    printf

    movl    $1, %eax
    leave 
```

因此，这会产生一个`lvalue error`因为操作数不是可修改的左值。**非统一行为是由于 gcc-4.4 中的编译器优化造成的**。

 **> ## **为什么新的 gcc 编译器（或大多数编译器）会产生左值错误？**

因为表达式的评估`++(i | i)`并`++(i & i)`禁止增量（++）运算符的实际定义。

根据 Dennis M. Ritchie 的书“ [**The C Programming Language**](http://zanasi.chem.unisa.it/download/C.pdf) ”在**“2.8 Increment and Decrement Operators”第 44 页。**

> 递增和递减运算符只能应用于变量；像 (i+j)++ 这样的表达式是非法的。操作数必须是算术或指针类型的可修改左值。

我在这里测试了新的[gcc 编译器 4.47，](http://ideone.com/ZCj4U5)它产生了我所期望的错误。我还在[tcc 编译器上进行了测试。](http://rextester.com/XLAWI27359)

对此的任何反馈/评论都会很棒。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-16T14:34:03.380

我根本不认为这是一个优化错误，因为如果是，那么首先就不应该有任何错误。如果`++(i | i)`优化为`++(i)`，那么应该不会有任何错误，因为`(i)`是一个左值。

恕我直言，我认为编译器将`(i | i)`其视为表达式输出，显然，它输出右值，但增量运算符`++`期望左值来更改它，从而导致错误。**

# javascript - 如何在不更改页面哈希的情况下使用 javascript 导航到页面中的元素

> ID：14860192
> 
> 赞同：1
> 
> 时间：2013-02-13T18:13:49.370
> 
> 标签：javascript, html

我需要通过单击按钮导航到元素“divElem1”。是否可以？如果我们在浏览器中输入此链接，浏览`http://myUrl#divElem1`器将导航到页面和 DIV 元素“divElem1”。必须通过 javascript 获得相同的行为。

哈希更改在我的应用程序中不起作用，因为哈希更改会触发其他事件。因此，以下将不起作用。

```
document.button.onclick = function () {
    location.hash = "#divElem1";
}; 
```

`document.getElementById("divElem1").focus()`也不起作用，因为元素是 div

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:18:21.110

您可以[`scrollIntoView`](https://developer.mozilla.org/en-US/docs/DOM/element.scrollIntoView)为此使用：

```
document.getElementById("divElem1").scrollIntoView() 
```

这不会对目标元素最终的确切位置进行细粒度控制，但它将被移动到视口中。更重要的是，如果元素位于可滚动容器内，则容器和其中的元素都将移动到一个位置，以便它们在视口中可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:29:33.290

如果您想要“普通”Javascript，请使用[scrollIntoView()](http://www.roseindia.net/javascript/javascript-scrollintoview.shtml)。但它真的跳到那个位置，看到[这个问题和答案](https://stackoverflow.com/questions/9445842/does-scrollintoview-work-in-all-browsers)。

使用 jQuery，它可以完成[跳跃](https://stackoverflow.com/a/3163626/410699)或一些缓和，如解释[here](http://erraticdev.blogspot.nl/2011/02/jquery-scroll-into-view-plugin-with.html)。

建议使用缓动以提供更好的用户体验并让访问者看到并了解正在发生的事情。

# c# - 从 Lock() 中调用 UI 线程上的方法

> ID：14860197
> 
> 赞同：5
> 
> 时间：2013-02-13T18:14:08.167
> 
> 标签：c#, multithreading, locking, invoke

我有两种方法，`MethodA`& `MethodB`。`MethodB`必须在 UI 线程上运行。我需要它们一个接一个地运行，而不允许`MethodC`在它们之间运行。

`MethodC`当用户点击一个可爱的小按钮时调用。

我所做的以确保将其放在`Lock`代码周围：

```
 lock (MyLock)
 {
   MethodA(param1, param2);

   MyDelegate del = new MyDelegate(MethodB);
   if (this.IsHandleCreated) this.Invoke(del);
 } 
```

对于`MethodC`：

```
public void MethodC()
 lock (MyLock)
 {
   Do bewildering stuff.....
 } 
```

问题是我被卡住了。看起来我的代码陷入了僵局。

当我查看线程时，我看到按钮单击调用的代码卡在`lock (MyLock)`了，`MethodC`而我的另一个线程似乎卡在了`this.Invoke(del)`.

我已经读过从 a 中调用方法很危险，`Lock`但是因为我是在那里编写代码的人，即使只使用 a 似乎也会发生这种情况，`Thread.Sleep`我认为这不是让我陷入困境的代码。

为什么 Invoked 方法会停止工作？`methodC`在返回调用它的原始锁之前是否可能等待释放锁？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T18:20:19.627

所以，想象一下下面的情况：

1.  您的后台线程开始运行代码。它抓住锁，然后开始运行`MethodA`。

2.  `MethodC``MethodA`在其工作中 被调用。`MethodA`等待锁被释放，阻塞 UI 线程，直到发生这种情况。

3.  后台线程完成并在 UI 线程上 `MethodA`调用。直到消息泵队列中的所有先前项目都完成后才能运行。`MethodB``MethodB`

4.  `MethodC`位于消息泵队列的顶部，等待`MethodB`完成，并`MethodB`在队列中等待`MethodC`完成。他们都在互相等待，这是一个僵局。

那么，你如何解决这个问题呢？您*真正*需要的是某种“等待”锁而不实际阻塞线程的方式。幸运的是（在 .NET 4.5 中）这很容易做到，这要归功于任务并行库。（我在引号中等待，因为我们实际上并不想等待，我们只想`MethodC`在锁被释放后立即执行，*而无需*实际等待/阻塞当前线程。）

而不是使用`object`for`MyLock`使用：

```
private static SemaphoreSlim semaphore = new SemaphoreSlim(1, 1); 
```

现在`MethodC`你可以这样做：

```
public async Task MethodC() //you can change the signature to return `void` if this is an event handler
{
    try
    {
        await semaphore.WaitAsync();
        //Do stuff
    }
    finally
    {
        semaphore.Release();
    }
} 
```

这里的关键是，因为我们`await`的任务表示信号量何时真正空闲，所以我们不会阻塞当前线程，这将允许其他后台任务编组`MethodB`到 UI 线程，完成方法，释放信号量，然后让这个方法执行。

您的其他代码不需要（但如果您愿意，仍然可以）在信号量上使用异步等待；阻塞后台线程几乎不是什么大问题，所以唯一的关键变化是使用信号量而不是`lock`：

```
public void Bar()
{
    try
    {
        semaphore.Wait();
        MethodA(param1, param2);

        MyDelegate del = new MyDelegate(MethodB);
        if (this.IsHandleCreated) this.Invoke(del);
    }
    finally
    {
        semaphore.Release();
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T18:18:23.590

假设您`MethodA`还包含以下内容：

```
lock(MyLock) {

} 
```

你是绝对正确的，你有一个死锁。 `MethodA`无法获得锁定，`MyLock`因为在输入方法之前它已经被锁定。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T18:28:09.237

你可以试试这个：

```
Lock (MyLock)
 {
   MethodA(param1, param2);

   MyDelegate del = new MyDelegate(MethodB);
   MyDelegate del2 = new MyDelegate(MethodC);
   MyDelegate del3 = del+del2
   if (this.IsHandleCreated) this.Invoke(del3);
 } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T03:14:55.640

你把使用锁的人搞糊涂了。该任务与多线程本身无关。

简单的可用性解决方案是您所需要的——禁用您可爱的小按钮，直到您准备好运行 MethodC。

# asp.net-mvc-3 - Azure 和 MVC 中的成员角色

> ID：14860198
> 
> 赞同：3
> 
> 时间：2013-02-13T18:14:10.650
> 
> 标签：asp.net-mvc-3, azure, role

我正在开发一个 ASP.NET MVC3 网站，并且正在使用 Microsoft ASP.NET Universal Providers。网络配置：

```
<connectionStrings>
<add name="MyContext" connectionString="data source=tcp:***.database.windows.net,1433;Initial Catalog=***;User Id=***;Password=***;Trusted_Connection=False;Encrypt=True;Connection Timeout=30" providerName="System.Data.SqlClient" />
</connectionStrings>
...
<roleManager defaultProvider="DefaultRoleProvider" enabled="true">
  <providers>
    <clear />
    <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider" connectionStringName="MyContext" applicationName="/" />
  </providers>
</roleManager> 
```

Azure 中的 connectionStrings 没问题。我使用查询脚本添加的 Aspnet 表和存储过程。迁移添加的表中的数据。我在管理门户中检查了它。我可以获得个人资料成员资格和个人资料数据，但下面的代码返回空列表。

```
var userName = User.Identity.Name;
var userRoles = Roles.GetRolesForUser(userName).ToList(); 
```

userName 是正确的，并且表 aspnet_UsersInRoles 也包含正确的数据。页面上没有例外。为什么 userRoles 是空的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:20:12.650

我通过创建从 SqlRoleProvider 继承的自定义提供程序来解决此问题。

# php - Botan 和 phpseclib 之间不兼容的 AES 实现

> ID：14860203
> 
> 赞同：0
> 
> 时间：2013-02-13T18:14:22.477
> 
> 标签：php, cryptography, aes, phpseclib, botan

我在 C++ 中使用 Botan 库进行 AES 加密/解密。我无法在 phpseclib 中使用 Botan 的输出来获得准确的结果。如果有人向我指出 Botan 和 phpseclib 或任何其他 PHP 加密库之间的互操作性的工作代码，我将不胜感激。谢谢！

C++ 中使用 Botan 进行加密的示例

```
// Key
std::auto_ptr<Botan::HashFunction> tHash ( Botan::get_hash("SHA-256")  );
std::string mykey = "test";
Botan::SecureVector<Botan::byte> tSecVector(32);
tSecVector.set(tHash->process(mykey)); //the hash is actually the key - same size
Botan::SymmetricKey key(tSecVector); 
// IV
Botan::InitializationVector iv(mRng, 16);

// Encryption & Encode
Botan::Pipe pipe(Botan::get_cipher("AES-256/CBC", key, iv, Botan::ENCRYPTION) );
pipe.process_msg(pStdStringTextToEncrypt);
Botan::Pipe pipeb64enc(new Botan::Base64_Encoder );
pipeb64enc.process_msg(pipe.read_all(0));
std::string StrBase64Encoded = pipeb64enc.read_all_as_string(0);

// Return
pReturnEncryptedText = iv.as_string() + StrBase64Encoded; 
```

使用 phpseclib 库在 php 中解密的示例：

```
include('Crypt/AES.php');
$aes = new Crypt_AES(CRYPT_AES_MODE_CBC); //mcrypt is used
//Decrypt request from application. [IV 32 CHARS IN HEX] [BASE64 ENCRYPTED TEXT]
$aes->setKeyLength(256);
$key = hash('sha256','test', true) ; // true to output raw binary output
$aes->setKey($key);
//Iv
$IV = hex2bin (substr($_POST['ENC'],0,32) );
$aes->setIV(  $IV    );
// Encrypted text in binary
$encryptedTextBin = base64_decode(substr($_POST['ENC'],32));
$decryptedRequest = $aes->decrypt( $encryptedTextBin );

echo $decryptedRequest; //no match 
```

我也直接在php中尝试了mcrypt，但没有成功：

```
$decrypted_data="";
//128 is a hack as shown on: http://kix.in/2008/07/22/aes-256-using-php-mcrypt/
$td = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', MCRYPT_MODE_CBC, ''); 
mcrypt_generic_init($td, $key, $iv);

$decrypted_data = mdecrypt_generic($td, $encryptedtext);

mcrypt_generic_deinit($td);
mcrypt_module_close($td); 
```

## 编辑：

我刚刚对 Botan 和 phpseclib 进行了 128 位测试，在大约 50% 的情况下我得到了正确的解密。这太奇怪了。我在 Botan (CTS,PKCS7,OneAndZeros,X9.23) 中测试了不同的填充模式，但同样只有 50% 的尝试成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:23:05.063

如果您发布了您从 Botan 使用的密钥样本、密码（即预散列）、您正在使用的 IV 以及您正在使用的明文/您获得的密文，这将有所帮助。这会让人们自己测试各种可能性，而不是让你代表他们做所有事情。

无论如何，我的第一个猜测是 Botan 默认情况下可能不会填充，而 phpseclib 默认情况下假定明文已被填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T12:39:49.317

我终于解决了这个问题。加密后的文本以 POST 数据中的 Base64 格式发送到某个 Web 服务器。Base64 中有一些字符是无效的 URL 字符，因此我在将加密文本作为发布数据发送之前对它们进行了百分比编码。这些字符是：“+”、“/”和“=”。请参阅：[http ://en.wikipedia.org/wiki/Base64#URL_applications](http://en.wikipedia.org/wiki/Base64#URL_applications)

# php - 删除PHP中字符串的某些部分

> ID：14860204
> 
> 赞同：0
> 
> 时间：2013-02-13T18:14:24.250
> 
> 标签：php, javascript, string

我已经看到了很多关于这个确切主题的问题，但似乎没有一个能解决我的问题。我想创建一个函数，该函数将从网站地址中删除除域名之外的所有内容。例如，如果用户输入：**[http://www.stackoverflow.com/blahblahblah](http://www.stackoverflow.com/blahblahblah)**我想获得**stackoverflow**，如果用户输入**facebook.com/user/bacon**我想获得**facebook**。

有谁知道我可以删除字符串某些部分的函数或方法？也许它会搜索 http，当找到它时，它会删除所有内容，直到 // 然后它会搜索 www，如果找到它会删除所有内容，直到 . 然后它会保留所有内容直到下一个点，它会删除它后面的所有内容？现在来看，这可能会导致[http://www.en.wikipedia.org](http://www.en.wikipedia.org)等网站出现问题，因为我只剩下 en。

有什么想法（最好用 PHP，但也欢迎使用 JavaScript）？

**编辑 1：** 多亏了很好的反馈，我想我已经能够制定出一个我想要的功能：

```
 function getdomain($url) {
    $parts = parse_url($url);
    if($parts['scheme'] != 'http') {
       $url = 'http://'.$url;
    }
    $parts2 = parse_url($url);

    $host = $parts2['host'];
    $remove = explode('.', $host);

    $result = $remove[0];
    if($result == 'www') {
       $result = $remove[1];
    }

    return $result;
 } 
```

它并不完美，至少考虑到子域，但我认为可以做点什么。也许在末尾添加第二个 if 语句来检查数组的长度。如果它大于两个，则选择项目 nr1 而不是项目 nr0。这显然给我带来了与使用 .co.uk 的任何域相关的麻烦（因为这将是很长的树项目，但我不想返回 co）。我会尝试解决它一点点，看看我想出了什么。如果你们中的一些 PHP 专家也可以看看，我会很高兴。我不像你们中的任何人那样熟练或经验丰富......：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:20:16.470

使用 parse_url 将 URL 拆分为不同的部分。您需要的是主机名。然后你会想用点分割它并得到第一部分：

```
$url    = 'http://facebook.com/blahblah';
$parts  = parse_url($url);
$host   = $parts['host']; // facebook.com
$foo    = explode('.', $host);
$result = $foo[0]; // facebook 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:27:33.233

使用 php 中的 parse_url 方法获取 domain.com，然后使用空字符串替换 .com。我对正则表达式有点生疏，但这应该可以。

```
$url='http://www.en.wikipedia.org';
$domain = parse_url($url, PHP_URL_HOST); //Will return en.wikipedia.org
$domain = preg_replace('\.com|\.org', '', $domain); 
```

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

[PHP 正则表达式：从 URL 获取域](https://stackoverflow.com/questions/3442333/php-regex-get-domain-from-url)

[http://rubular.com/r/MvyPO9ijnQ](http://rubular.com/r/MvyPO9ijnQ) //检查正则表达式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:33:00.287

您正在寻找有关正则表达式的信息。这有点复杂，所以请准备好阅读。在您的情况下，您最好使用`preg_match`and `preg_replace`。它会根据您的模式搜索匹配项，并用您的替换项替换匹配项。

[preg_match](http://php.net/manual/en/function.preg-match.php) [preg_replace](http://php.net/manual/en/function.preg-replace.php)

我会从这样的模式开始： find`.com`或删除它以及它之后的所有内容`.net`。`.org`然后找到最后一个`.`并删除它以及它前面的所有内容。最后，如果`//`存在，删除它以及它前面的所有内容。

```
if (preg_match("/^http:\/\//i",$url))
preg_replace("/^http:\/\//i","",$url);

if (preg_match("/www./i",$url))
preg_replace("/www./i","",$url);

if (preg_match("/.com/i",$url))
preg_replace("/.com/i","",$url);

if (preg_match("/\/*$/",$url))
preg_replace("/\/*$/","",$url); 
```

`^`= 在字符串的开头 `i`= 不区分大小写 `\`= 转义字符 `$`= 字符串的结尾

这将不得不被玩弄和调整，但它应该让你指向正确的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T18:20:56.863

您可以使用`parse_url`PHP 中的函数，它会返回您想要的内容 -[请参阅](http://www.php.net/manual/en/function.parse-url.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T18:19:31.590

Javascript：

```
document.domain.replace(".com","") 
```

PHP：

```
$url = 'http://google.com/something/something';
$parse = parse_url($url);
echo str_replace(".com","", $parse['host']); //returns google 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-13T18:19:00.253

这是一个非常快速的方法，但应该在 PHP 中执行您想要的操作：

```
function getDomain( $URL ) {
    return explode('.',$URL)[1];
} 
```

当我有机会时我会更新它，但基本上它会将 URL 拆分为句号，然后返回应该是域的第二项。对于较长的域，例如 www.abc.xyz.com，需要更多的逻辑，但对于普通的 url，这就足够了。

# barcode - 条码阅读器最后一位 UPC-A

> ID：14860205
> 
> 赞同：0
> 
> 时间：2013-02-13T18:14:28.540
> 
> 标签：barcode

是否可以让我的读者读取 UPC-A（校验和）的最后一位而不写它。（按配置）

假设它读取 123456789012 （2 是校验和）

然后它在没有校验和的情况下写入 12345678901。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:10:49.880

是的，这是可能的。我使用了错误的手册，读者确实有配置来显示校验和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T20:13:13.753

条码扫描仪是一种输入设备……与鼠标或键盘没有什么不同。最终输出取决于您的软件确定的任何功能。

UPC 条码的工作方式是扫描条码图形，将条形图转换回数字，然后将条形图表示的 12 位数字与数据库中的 12 位数字进行比较，完成数据库查询。找到该项目后，将执行软件的下一个功能（价格查询、库存更改等）

如果您有不同的需求，则必须编写软件代码来执行不同的功能，即写入前 11 位数字。

# jquery - 没有通过 Ajax 正确调用 ASP MVC 控制器方法

> ID：14860206
> 
> 赞同：0
> 
> 时间：2013-02-13T18:14:32.347
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

下面是每当用户单击我的 ASP MVC3 视图上的某个图标时我对控制器进行的 Ajax 调用。它应该通过名称调用控制器中的方法`PopDetails`，但是在控制器中设置断点后，我可以看到这没有发生。我尝试使用下面列出的两个 URL，但都没有工作。因为这是我第一次使用 Ajax，所以我不太确定发生了什么。任何想法或建议将不胜感激！

来自 View 的 Ajax 代码：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<script type="text/javascript">
    function GetProgramDetails(pgmname) {

        var request = $.ajax({
            type: 'POST',
            url: '~/BatchProgramsContoller/PopDetails',
            //url: '~/BatchProgramsContoller/PopDetails',
            data: { programName: pgmname },
            dataType: 'html'
        });

        request.done(function (data) {
            $('#programExplanation').html(data);
        });
    }
</script> 
```

方法来自`BatchProgramsController`：

```
 [HttpPost]
    public string PopDetails(string programName)
    {
        BatchPrograms batchprograms = db.BatchPrograms.Find(programName);
        if (batchprograms == null) return string.Empty;
        StringBuilder s = new StringBuilder();
        s.Append(batchprograms.ProgramName + " - " + batchprograms.ShortDescription);
        s.Append("<br />Job Names: " + batchprograms.PrdJobName + ", " + batchprograms.QuaJobName );
        s.Append("<br /> " + batchprograms.Description);
        return s.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:29:28.313

```
url: '~/BatchProgramsContoller/PopDetails', 
```

应该改为

```
url: '~/BatchPrograms/PopDetails', 
```

或更可能

```
url: '/BatchPrograms/PopDetails', 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T00:36:03.473

在.net mvc 中，硬编码网址通常被认为是不好的做法，如上面的答案中所做的那样。

我会用

```
url: '@Url.Action("BatchPrograms", "PopDetails")', 
```

这样，如果您的路线因任何原因发生更改，mvc url 助手会处理它。

# php - WordPress：如何只显示一个类别

> ID：14860219
> 
> 赞同：1
> 
> 时间：2013-02-13T18:15:20.240
> 
> 标签：php, wordpress, categories

在我的设计中，我在主页中显示帖子的类别。问题是当我在帖子中添加更多类别时。我怎样才能使它只显示一个类别。

示例：我有 3 个类别 A、B 和 C。我在类别 A 和 B 中添加一个帖子。在主页中显示...类别 A、B 中的*帖子标题*。我希望输出为...*帖子标题*在 A 类。

对于我使用 get_the_category_list 的类别

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:02:07.097

get_the_category() 返回帖子的所有关联类别的数组。要仅从结果集中回显第一个类别，请尝试以下操作：

```
<?php
   $category = get_the_category(); 
   echo $category[0]->cat_name;
?> 
```

# linux - 制定全局选项

> ID：14860221
> 
> 赞同：-1
> 
> 时间：2013-02-13T18:15:23.063
> 
> 标签：linux, compilation, makefile

`-Wall`我有一些包含很多文件的项目，
我想用`makefile`.

```
make -Wall 
```

没有帮助。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:22:24.137

你*也许*可以做类似的事情

```
make CC='gcc -Wall' CXX='g++ -Wall' 
```

这将告诉 make 使用 'gcc -Wall' 作为 C 编译器和`g++ -Wall`C++ 编译器

这假设所有源代码都是 C 和 C++，并且 makefile 使用`CC`和`CXX`变量，并且它使用 GCC 作为编译器，并且可能还有其他几个假设。

通常编译标志存储在 make 变量中，例如`CFLAGS`and`CXXFLAGS`但如果您覆盖它们，您可能会替换正确操作所必需的现有选项，因此将选项添加到`CC`and/or`CXX`有时更安全。

# asp.net-mvc-4 - 视图中的多个模型错误

> ID：14860226
> 
> 赞同：0
> 
> 时间：2013-02-13T18:15:37.337
> 
> 标签：asp.net-mvc-4, model, viewmodel, asp.net-mvc-viewmodel

我有一个视图页面，该页面具有不同模型的不同部分视图。我创建了一个模型类，它将调用其他类，因此我可以在主视图页面上使用它。但我的问题是，当我尝试更改密码时，它给了我一个错误，我正在传递一个模型，我需要传递另一个模型。我相信我的结构是正确的，但不确定是什么导致了这个问题。

主视图：

```
 @model Acatar.Models.ProfileModel

        @{
            ViewBag.Title = "ProfileAccount";
        }
        @{ Html.RenderAction("_PlayNamePartial"); }
        @{ Html.RenderAction("_UsernamePartial", "Account");}
        @{ Html.RenderAction("_TalentsPartial", "Account");}

            @if (ViewBag.HasLocalPassword)
            {
                @Html.Partial("_ChangePasswordPartial")
            }
            else
            { 
                @Html.Partial("_SetPasswordPartial")
            } 
```

Profile Model：包含我创建的模型

```
public class ProfileModel
    {
        public LocalPasswordModel LocalPasswordModel { get; set; }
        public PlayNameModel PlayNameModel { get; set; }
        public UsernameModel UsernameModel { get; set; }
        public TalentsModel  TalentsModel { get; set; }
    } 
```

控制器：

```
public ActionResult Profile(ManageMessageId? message)
    {
        ViewBag.StatusMessage =
            message == ManageMessageId.ChangePasswordSuccess ? "Your password has been changed."
            : message == ManageMessageId.SetPasswordSuccess ? "Your password has been set."
            : message == ManageMessageId.RemoveLoginSuccess ? "The external login was removed."
            : "";
        ViewBag.HasLocalPassword = OAuthWebSecurity.HasLocalAccount(WebSecurity.GetUserId(User.Identity.Name));
        ViewBag.ReturnUrl = Url.Action("Profile");
        return View();
    } 
```

邮政：

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult Profile(LocalPasswordModel model)
    {
        bool hasLocalAccount = OAuthWebSecurity.HasLocalAccount(WebSecurity.GetUserId(User.Identity.Name));
        ViewBag.HasLocalPassword = hasLocalAccount;
        ViewBag.ReturnUrl = Url.Action("Profile");
        if (hasLocalAccount)
        {
            if (ModelState.IsValid)
            {
                // ChangePassword will throw an exception rather than return false in certain failure scenarios.
                bool changePasswordSucceeded;
                try
                {
                    changePasswordSucceeded = WebSecurity.ChangePassword(User.Identity.Name, model.OldPassword, model.NewPassword);
                }
                catch (Exception)
                {
                    changePasswordSucceeded = false;
                }

                if (changePasswordSucceeded)
                {
                    return RedirectToAction("Profile", new { Message = ManageMessageId.ChangePasswordSuccess });
                }
                else
                {
                    ModelState.AddModelError("", "The current password is incorrect or the new password is invalid.");
                }
            }
        }
        else
        {
            // User does not have a local password so remove any validation errors caused by a missing
            // OldPassword field
            ModelState state = ModelState["OldPassword"];
            if (state != null)
            {
                state.Errors.Clear();
            }

            if (ModelState.IsValid)
            {
                try
                {
                    WebSecurity.CreateAccount(User.Identity.Name, model.NewPassword);
                    return RedirectToAction("Profile", new { Message = ManageMessageId.SetPasswordSuccess });
                }
                catch (Exception e)
                {
                    ModelState.AddModelError("", e);
                }
            }
        }

        return View(model);
    } 
```

查看密码更改页面：

```
@model Project.Models.LocalPasswordModel

@using (Html.BeginForm("Profile", "Account")) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary()

    <fieldset>
        <legend>Change Password Form</legend>

                @Html.LabelFor(m => m.OldPassword)
                @Html.PasswordFor(m => m.OldPassword)

                @Html.LabelFor(m => m.NewPassword)
                @Html.PasswordFor(m => m.NewPassword)

                @Html.LabelFor(m => m.ConfirmPassword)
                @Html.PasswordFor(m => m.ConfirmPassword)

       <br/>
        <input class="btn btn-small" type="submit" value="Change password" />
    </fieldset> 
```

**我得到的错误：** `The model item passed into the dictionary is of type 'Project.Models.LocalPasswordModel', but this dictionary requires a model item of type 'Project.Models.ProfileModel'.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:24:57.517

尝试在`@Html.Partial`方法中指定模型。（*请原谅我的语法，我现在没有 IDE*）

```
 @if (ViewBag.HasLocalPassword)
        {
            @Html.Partial("_ChangePasswordPartial",Model.LocalPasswordModel)
        }
        else
        { 
            @Html.Partial("_SetPasswordPartial",Model.LocalPasswordModel)
        } 
```

*（我猜第二个视图也使用相同的模型）* 但是我看不到任何模型从您的控制器传递到您的视图中，您应该传递一个模型来查看

```
public ActionResult Profile(ManageMessageId? message)
    {
        ViewBag.StatusMessage =
            message == ManageMessageId.ChangePasswordSuccess ? "Your password has been changed."
            : message == ManageMessageId.SetPasswordSuccess ? "Your password has been set."
            : message == ManageMessageId.RemoveLoginSuccess ? "The external login was removed."
            : "";
        ViewBag.HasLocalPassword = OAuthWebSecurity.HasLocalAccount(WebSecurity.GetUserId(User.Identity.Name));
        ViewBag.ReturnUrl = Url.Action("Profile");

        var ProfileModel = new ProfileModel();
        ProfileModel.LocalPasswordModel = populateFromDB();
        return View(ProfileModel);
    } 
```

或者考虑创建一个动作结果来渲染这个局部视图，就像你对其他局部视图所做的那样。（如果这里没有其他使用意图`Html.partial`）

```
 @if (ViewBag.HasLocalPassword)
            {
                @Html.RenderAction("_ChangePasswordPartial")
            }
            else
            { 
                @Html.RenderAction("_SetPasswordPartial")
            } 
```

# php - php函数中的Smarty

> ID：14860232
> 
> 赞同：0
> 
> 时间：2013-02-13T18:16:06.573
> 
> 标签：php, smarty

我正在尝试与 Smarty 一起做一些 OOP。例如，当我放

```
$smarty->display('header.tpl'); 
```

在构造函数中，一切正常。但是，当我将此代码放在一个函数中并在构造中调用该函数时，什么也没有发生。

有没有解决方案，所以我可以在函数中使用代码，然后在函数中调用它？

init.php 代码：

```
class init{
    public function __construct(){

    $smarty = new Smarty();
    $smarty->setTemplateDir('templates');
    $smarty->setCompileDir('templates_c');
    $smarty->setCacheDir('cache');
    $smarty->setConfigDir('configs');
    //$smarty->testInstall();

    $smarty->display('header.tpl');
    $smarty->display('content.tpl');
    $smarty->display('footer.tpl');

    //-----------------------------------
    //-----------------------------------
    //check url
    //-----------------------------------
    //-----------------------------------

    if(isset($_REQUEST['params']) && $_REQUEST['params']!=''){
        $aParams = explode('/', $_REQUEST['params']);
        print_r ($aParams);
        if(isset($aParams[0])) $this->lang = $aParams[0];
        if(isset($aParams[1])) $this->page = $aParams[1];
    }

    if(!$this->lang) $this->lang = 'nl';
    if(!$this->page) $this->page = 'home';

    //-----------------------------------
    //-----------------------------------
    //Functions
    //-----------------------------------
    //-----------------------------------

    $this->buildPage();
    $this->buildHeader_Footer();

}

function buildPage(){
    require_once('modules/' . $this->page . '/' . $this->page . '.php');
    if($this->page == 'home') new home($this->lang, $this->page, $this->action, $this->id, $this->message);
    else if($this->page == 'contact') new contact($this->lang, $this->page, $this->action, $this->id, $this->message);

}

function buildHeader_Footer(){
    $smarty->display('header.tpl');
    $smarty->display('footer.tpl');
}

} 
```

索引.php 代码：

```
require('smarty/libs/Smarty.class.php');

require_once ('modules/init/init.php'); 
$init = new init(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:22:12.710

更新（问题改变后）

您似乎希望`$smarty`在构造函数中创建该变量后，可以从所有类方法访问该变量。那是错误的。可以在类内部访问类变量`$this`。所以你必须写：

```
$this->smarty-> ... 
```

每当使用它。

* * *

由于发布的代码不完整，我无法说出您的解决方案到底有什么问题。但是你想要做的应该工作。

例如，我会有这样的课程：

```
class SimpleView {

    /**
     * Note that smarty is an instance var. This means that var
     * is only available via `$this` in the class scope
     */
    protected $smarty;

    /**
     * Constructor will be called if write 'new SimpleView()'
     */
    public function __construct(){
        // note $this
        $this->smarty = new Smarty();
        $this->smarty->setTemplateDir('templates');
        $this->smarty->setCompileDir('templates_c');
        $this->smarty->setCacheDir('cache');
        $this->smarty->setConfigDir('configs');
    }

    /**
     * The build function is public. It can be called from 
     * outside of the class
     */
    public function build(){
        $this->smarty->display('header.tpl');
        $this->smarty->display('content.tpl');
        $this->smarty->display('footer.tpl');
    }
} 
```

并像这样使用它：

```
$view = new SimpleView();
$view->build(); 
```

# c# - 使用 WCF 实现登录/会话系统

> ID：14860235
> 
> 赞同：0
> 
> 时间：2013-02-13T18:16:14.187
> 
> 标签：c#, .net, wcf

这是一个设计建议问题，而不是编码问题。我有一个用户需要登录的应用程序，**只有在登录后**，用户才被允许将数据上传到服务器。使用 PHP 和会话，很容易将登录的用户名存储在会话中，然后从那里开始工作。

使用 WCF，我唯一能想到的就是在用户登录时在本地存储用户名和密码，并更改从以下位置上传数据的功能：

```
UploadData(string data); 
```

到：

```
UploadData(string data, string username, string hashedPassword) 
```

因此，每次发送数据时都会发送凭据。有更好的实现吗？我看过这个，但它似乎过于复杂： [http ://hyperthink.net/blog/a-simple-ish-approach-to-custom-context-in-wcf/](http://hyperthink.net/blog/a-simple-ish-approach-to-custom-context-in-wcf/)

请注意，我需要能够识别每个单独调用 UploadData 的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:53:49.487

如果您正在调用的服务器是无状态的，那么进行初始调用以验证用户，然后在每个方法调用中发送凭据或某种会话密钥确实是最有意义的。

# android - 在提交 FragmentTransaction 之前检查状态是否已保存

> ID：14860239
> 
> 赞同：44
> 
> 时间：2013-02-13T18:16:20.323
> 
> 标签：android, android-fragments, fragmentmanager, android-savedstate, onsaveinstancestate

我有时会看到以下堆栈跟踪，用于在用户不查看活动时（保存状态后）可能发生的提交：

```
java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
    at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1327)
    at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1338)
    at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:595)
    at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:574) 
```

查看 Android 源代码，这完全有道理：

```
private void checkStateLoss() {
        if (mStateSaved) {
            throw new IllegalStateException(
                    "Can not perform this action after onSaveInstanceState");
        }
        if (mNoTransactionsBecause != null) {
            throw new IllegalStateException(
                    "Can not perform this action inside of " + mNoTransactionsBecause);
        }
 } 
```

现在，我想知道是否有任何方法（除了将类变量存储在 on(Save/Restore)InstanceState 中）来检查片段是否会以不希望的状态提交，这样我可以存储事务以供以后使用在适当的时间提交。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2017-05-19T07:37:13.383

从支持库版本[26.0.0 Beta 1](https://developer.android.com/topic/libraries/support-library/revisions.html#26-0-0-beta1)`FragmentManager`开始，在类中提供了一个新的 API `Fragment`：

> **FragmentManager**和**Fragment**有一个**isStateSaved()**方法来允许查询是否允许在不丢失状态的情况下进行事务。这对于在执行任何事务之前处理**onClick()**事件时进行检查特别有用。

来自文档[`android.support.v4.app.FragmentManager#isStateSaved()`](https://developer.android.com/reference/android/support/v4/app/FragmentManager.html#isStateSaved())：

> 如果**FragmentManager**的状态已由其主机保存，则返回**true 。****如果此方法返回true**，则不应执行任何会更改已保存状态的操作。例如，任何**popBackStack()**方法，例如**popBackStackImmediate()**或任何使用**commit()**而不是**commitAllowingStateLoss()的****FragmentTransaction**都会更改状态并导致错误。

 ******此 API 将与[`android.app.FragmentManager`](https://developer.android.com/reference/android/app/FragmentManager.html)从 Android O 开始的框架一起提供。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-21T19:17:11.623

由于您没有附加任何示例代码，我只能猜测您在提交事务时使用了“错误”的方法。

因此，`FragmentTransaction.commit()`您应该使用 [FragmentTransaction.commitAllowingStateLoss()](http://developer.android.com/reference/android/app/FragmentTransaction.html#commitAllowingStateLoss%28%29)而不是使用。

[此外，在这个 google blog post](https://code.google.com/p/android/issues/detail?id=23096)中有关于这个问题（或者更确切地说是 API 行为的变化）的报告和解决方法。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-05-18T08:03:45.820

不幸的是，Android Fragment 不提供 API 检查是否可以提交事务。

但是我们可以在附加的活动中添加一个布尔字段来帮助我们检查。请参考以下代码。

```
public class GlobalBaseActivity extends FragmentActivity {

    private boolean mAllowCommit;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mAllowCommit = true;
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        mAllowCommit = false;
        super.onSaveInstanceState(outState);
    }

    @Override
    protected void onResumeFragments() {
        mAllowCommit = true;
        super.onResumeFragments();
    }

    public boolean allowFragmentCommit() {
        return mAllowCommit;
    } 

    public void callbackOnEvent() {
        if (allowFragmentCommit()){
            getFragmentManager().beginTransaction().add(new YourFragment(), TAG).commit();
        }
    }
} 
```

至于为什么选择`onResumeFragment()`允许交易指标，请参考[这个好博客](http://www.androiddesignpatterns.com/2013/08/fragment-transaction-commit-state-loss.html)。它详细解释了著名的 IllegalStateException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T21:23:08.153

RuntimeExceptions（IllegalStateException 就是其中之一）通常意味着您的代码在尝试实现某事的方式上是不正确的。试图处理这种异常（例如通过捕获它）也是错误的。你的代码不应该表现得像 Android 会向你抛出这样的异常。

如果您使用 Handlers 并在以后发布或发送要处理的消息，则需要在退出恢复状态之前清除队列。此外，您不能只从 Activity 启动 AsyncTask 并在 onPostExecute 中提交事务，因为用户可以从您的 Activity 返回。您需要取消它并检查它是否被取消。

有很多这样的例子，都是由“临时”内存泄漏引起的，就像我喜欢这样称呼它们。

基本上你的代码很糟糕，如果不提供它，就不可能知道如何。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-02T18:29:16.823

`ft.commitAllowingStateLose()`在这种情况下是你最好的选择。但是，如前所述，不能保证您的状态会持续存在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-13T12:27:58.180

您应该只在这些方法 OnCreate、OnResumeFragments、OnPostResume 中调用方法 commit。您可以在此处阅读的详细信息[片段交易和活动状态损失](http://www.androiddesignpatterns.com/2013/08/fragment-transaction-commit-state-loss.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-09T13:42:32.817

这是一个利用最新 isStateSaved() FragmentManager 方法的 Kotlin 示例：[https ://proandroiddev.com/kotlin-extensions-to-commit-fragments-safely-de06218a1f4](https://proandroiddev.com/kotlin-extensions-to-commit-fragments-safely-de06218a1f4)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-18T06:04:11.830

看到我也有这个问题，我在任何地方都找不到解决方案。我尝试了一种解决方法。它的工作原理是这样的。而是从 Handler 进行片段事务。应使用 2000 毫秒 DELAY 调用处理程序。例如。在调用 makeTransaction

```
void makeTransaction()
{
  handler.sendEmptyMessageDelayed(0,2000);
}

void actuallyMakeTransaction()
{
 // transaction code
}

Handler handler = new Handler()
{
void handleMessage(Message msg)
{
   actuallyMakeTransaction();
}
} 
```

它为我解决了问题******

# mysql - 用户无法登录 Mono/MySql

> ID：14860240
> 
> 赞同：0
> 
> 时间：2013-02-13T18:16:26.103
> 
> 标签：mysql, asp.net-mvc-3, mono, monodevelop

在将 MVC3 应用程序移植到 Mono 时，我收到此错误：

System.InvalidProgramException System.Web.Security.MembershipProviderCollection:.ctor () 中的 IL 代码无效：方法主体为空。

说明：HTTP 500。处理请求时出错。

详细信息：非网络异常。异常来源（应用程序或对象的名称）：System.Web。异常堆栈跟踪：

```
at System.Web.Security.Membership..cctor () [0x00010] in C:\cygwin\sources\mono\mcs\class\System.Web\System.Web.Security\Membership.cs:105 
```

**MembershipProviderCollection**

```
public static MembershipProviderCollection Providers
    {
        get
        {
            return Membership.providers;
        }
    } 
```

它在 .Net 下按预期工作，但在单声道 3.0.1 编译器下不能正常工作。我该如何解决或解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:28:42.743

可以通过删除对 的引用`System.Web`、添加对 的引用`Mono's internal System.Web.ApplicationServices`然后重新添加引用来解决此问题`System.Web`。世界上没有一个线索，为什么如果不首先删除 System.Web 就无法工作，但事实并非如此。

# .net - .net 中的探测组件

> ID：14860243
> 
> 赞同：0
> 
> 时间：2013-02-13T18:16:30.677
> 
> 标签：.net, probing

我知道如何`CLR`[探测装配](http://msdn.microsoft.com/en-us/library/yx7xezcf%28v=vs.71%29.aspx)，但我想知道：`CLR`探测装配是否在`GAC`文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:19:31.387

CLR 将在使用探测提示之前检查 GAC。找到程序集的顺序的完整详细信息[位于 MSDN 上](http://msdn.microsoft.com/en-us/library/yx7xezcf%28v=vs.110%29.aspx)。

基本上，一旦 CLR 知道需要找到哪个程序集（包括版本），它就会查看它是否已经加载，然后检查 GAC，然后使用探测提示进行探测。

# php - 为什么我的 php 数组作为对象保存到 MongoDB，然后作为具有字符串化键的关联数组检索？

> ID：14860247
> 
> 赞同：2
> 
> 时间：2013-02-13T18:16:47.410
> 
> 标签：php, arrays, json, mongodb, object

**背景：**

我正在构建的这个应用程序中有一个类，其工作是：

*   __构造：`$this->data = $this->mongoDB->collection->findOne();`
*   中间函数用于以数十种不同的方式处理每个请求的数据。一种操作可能会触发一种操作，而这种操作会触发另一种操作。这允许我只用一个查询就可以对 mongo 文档进行无限更新，只要`$this->data['_id']`保持不变。这是唯一允许对该特定集合进行数据操作的地方。
*   __破坏：`$this->monboDB->collection->save($data)`
*   然后将数据读回，`json_encode`'d 并发送到 Javascript 以绘制页面

**意图：**

我打算通过循环遍历所述数组，匹配其中的值并取消设置来删除数组的成员。例子：

```
foreach($this->data['documents'] as $key => $val){
    if($val == $toBeDeleted){
        unset($this->data['documents'][$key];
    }
} 
```

然后，当脚本完成时，这将被保存到数据库中。

**问题：**

当 javascript 读回数据时`['a', 'b', 'd']`，我有`{'0': 'a', '1': 'b', '3': 'd'}`- 不能像数组一样处理，而且会破坏很多东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:16:47.410

*在我的 a-hah*之前，我已经把这个问题打了一半！时刻，所以我想我也会发布我自己的答案以供将来参考。

在php中，关联数组和数组都是一样的。您可以使用乱序键、非连续键以及您想在调用数组成员时使用的几乎任何键。大多数（如果不是全部）php 数组函数可与任何数组键一起使用。对象是完全不同的东西。

话虽如此，Javascript 并不共享相同的数组规则。javascript 数组必须具有从零开始的连续键，否则它是一个对象。MongoDB 在这方面类似于 Javascript。

当 php 转换一个对象以在 MongoDB 或 Javascript 中使用时，如果 php 数组不遵循该规则，它将成为一个 Javascript 对象。

问题是在取消设置数组索引后，它留下了一个间隙，导致数组键不连续，导致它成为一个对象。简单的修复要么是`array_slice($array, $key, 1)`要么`$array = array_values($array)`

# ibm-mobilefirst - Datapower 与 WL 的集成

> ID：14860249
> 
> 赞同：3
> 
> 时间：2013-02-13T18:16:51.717
> 
> 标签：ibm-mobilefirst, ibm-datapower

我们有这种情况 -

1.  数据权力用作身份验证，并且在成功的身份验证（使用 ADFS）时将 LTPA 令牌传递给工作灯调用
2.  在 worklight 中，我们使用 WASLTPARealm 和相应的 LoginModule
3.  发生了什么，worklight 正在查看用户是否在其注册表中，这需要在 WL 中再次集成 AD。

是否可以将数据能力用作可信赖的合作伙伴而不在注册表中寻找用户？我们正在寻找的是避免再次调用 AD 并仍然保护 wl 资源......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:35:17.253

WAS 需要验证 LTPA 令牌，因此它需要用户注册表（在本例中为 Active Directory 服务器）。一种解决方案是使用信任身份验证，因此 WAS 信任来自 DataPower 的请求，但这意味着必须实现 TAI（信任关联拦截器）（这不是一件容易的事）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T07:22:36.800

WAS 需要对传入用户进行授权。尝试做的是验证 LTPA 令牌 [这在没有 AD 的情况下发生]，然后尝试授权用户。这个授权决定必须来自某个地方[来自本地文件或通过 LDAP]。另一件事是，此类授权可能不是来自 LDAP [在大多数情况下，AD 未配置为将用户作为具有特定资源权限的特定组的成员返回]。在这种情况下，WAS 会查询用户以获取授权信息，但查询只会双重检查用户是否存在于特定注册表中[您是正确的，如果 LTPA 令牌有效，则再次检查用户没有意义，因为 LTPA本身是从[最有可能]同一个注册表中查询/验证用户的数据生成的？

不幸的是，似乎没有办法避免它。

*   阿吉塔布

# android - Android：如何停止其他活动的媒体播放器？

> ID：14860258
> 
> 赞同：0
> 
> 时间：2013-02-13T18:17:11.017
> 
> 标签：android, android-mediaplayer

我正在尝试创建一个音乐播放器。我的应用程序有 2 个玩家 -

**(a)**播放记忆中的歌曲

**(b)**使用 URL 播放在线音乐流

我的应用程序的主页/默认活动是**(a)**。对于玩家**(b)**，有一个单独的活动。

问题是当用户按下活动 (b) 中的播放按钮来播放 URL 流时，会播放内存中的曲目。

活动 (a) 中的 MediaPlayer 似乎仍然处于活动状态。

所以我想要：

*   如果用户按下播放按钮，所有其他媒体播放器都会停止。

    有什么办法可以参考其他媒体播放器；检查它们是否处于活动状态；如果是，则阻止他们。

从模糊的角度来看，我认为这可以通过将 a 发送`broadcast`到`Service`活动 (a) 来完成，并在那里创建一个函数来监听它并停止播放器。

但这对我来说似乎有点粗鲁，而且我应该如何获得（a）中玩家的参考。

希望我已经消除了我的疑问。

请建议。

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T18:27:24.970

您可以在项目中创建一个类并将其命名为 MediaPlayerRegistry，您可以在其中存储对当前正在使用的每个 mediaPlayer 对象的引用。并在您的应用程序中的任何位置访问它们以停止/释放/重播它们。它看起来像这样：

```
public class MediaPlayerRegistry {
      public static List<MediaPlayer> mList = new ArrayList<MediaPlayer>();
} 
```

然后，您可以从任何活动中致电：

```
MediaPlayerRegistry.mList.put(MediaPlayer mPlayer); 
```

将它添加到您的注册表中......当您想要释放它时，请停止任何正在运行的对象。

```
for ( MediaPlayer player : MediaPlayerRegistry.mList) {
if (player != null && player.isplaying() {
      player.release();
}
} 
```

只需将其视为您自己的 MediaPlayer 对象池

# java - Eclipse 中的调试控制台

> ID：14860263
> 
> 赞同：-6
> 
> 时间：2013-02-13T18:17:18.130
> 
> 标签：java, eclipse, console

所以我编写了这段代码，但是当我尝试将它作为 Java 应用程序运行时，控制台什么都不显示，而是终止了。我尝试通过 Preferences-Run/Debug-Console 来调试控制台，以显示程序何时写入标准输出或程序何时写入标准错误但它也不起作用。这是我的代码，提前感谢您的帮助。

```
import java.awt.*;
import javax.swing.*;
public class Frame4 extends JFrame implements UpdatableView {
    private Counter count;
    private JLabel label = new JLabel("Number = 0");
    private JPanel drawing;
    public Frame4(Counter c, JPanel panel) {
        count = c;
        drawing = panel;
        Container cp = getContentPane();
        cp.setLayout(new BorderLayout());
        JPanel p1 = new JPanel();
        p1.add(label);
        cp.add(p1, BorderLayout.NORTH);
        cp.add(drawing, BorderLayout.CENTER);
        JPanel p2 = new JPanel(new FlowLayout());
        p2.add(new CountButton("Count", count, this)
        setTitle("Frame 4");
        setSize(200, 180);
        setVisible(true);
        }
        public void update() {
            label.setText("Number = " + count.countOf());
            drawing.repaint();
        }
        public static void main(String[] args) {}
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:20:56.477

你的`main`方法是空的。将创建的框架对象放入其中：

```
public static void main(String[] args){
  Counter c = new Counter();
  JPanel panel = new JPanel();
  new Frame4(c, panel);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:18:49.170

你的`main`方法没有做任何事情。

因此没有输出

# android - 片段的 Onclicklistener

> ID：14860264
> 
> 赞同：1
> 
> 时间：2013-02-13T18:17:18.927
> 
> 标签：android, android-layout

我有 3 个菜单选项卡作为 Fragment1、fragment2。其中两个 Fragment 有 listView 和 onClickListener 另一个只是一个 Fragment。

当 Fragment 处于焦点并且用户触摸空白区域时，Fragmentlist 的 onclick 侦听器会做出反应。：

![在此处输入图像描述](../Images/bd15ccff149f23686fedff1d9bfc3412.png)

![在此处输入图像描述](../Images/37b2adf92215d35e11a55c955bd7fc80.png)

片段代码：一个带有 onclicklistener

片段 1：

```
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setListAdapter(new ArrayAdapter<String>(getActivity(),
            R.layout.fragment_genere_view,GENERE_TITLES)); 
    getListView().setBackgroundColor(Color.BLACK);
           }

public void onListItemClick(ListView l, View v, int position, long id) {
    Intent intent = new Intent();
    intent.setComponent(new ComponentName("package", GENERE_CLASSES[position]));
    startActivity(intent);
} 
```

片段 2：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
           Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    View myFragmentView = inflater.inflate(R.layout.fragment_search_view, container, false);

    return myFragmentView;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:30:45.700

您在包含片段的 Main Activity 的 tablistener 中存在问题。您没有在操作栏选项卡的 TabDeselect 侦听器上分离当前片段。考虑阅读这个：[http ://arvid-g.de/12/android-4-actionbar-with-tabs-example](http://arvid-g.de/12/android-4-actionbar-with-tabs-example)

# facebook-graph-api - 为什么一个应用程序没有直接发布到它的应用程序页面的权限？

> ID：14860265
> 
> 赞同：0
> 
> 时间：2013-02-13T18:17:20.003
> 
> 标签：facebook-graph-api, facebook-opengraph, access-token

我正在编写一个应用程序，它基本上是一种将媒体发布新闻发布到包括 Facebook 在内的各种社交网络的服务。我通过 Graph API 了解应用令牌、用户令牌和页面令牌的使用，但我不明白为什么它需要用户令牌才能将应用发布到应用页面。用户管理员将在应用程序的整个生命周期中发生变化，更有意义的是，应用程序将自动拥有必要的权限来发布到自己的页面墙上。这也将减少通过 Graph API 进行的所有握手，这些握手似乎是完成工作所必需的。

那么，简而言之，为什么 Facebook 应用程序没有直接发布到他们的应用程序页面的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:19:49.053

因为*每个*帖子都有一个与之关联的用户——创建帖子的用户。

# c++ - 如果 cout.rdbuf() 用于切换缓冲区并且从不将其设置回来，会出现什么问题？

> ID：14860267
> 
> 赞同：7
> 
> 时间：2013-02-13T18:17:25.777
> 
> 标签：c++, fstream, undefined-behavior, streambuf

作者在标题下展示了[这段代码](http://wordaligned.org/articles/cpp-streambufs)`A bus error on my platform`

```
#include <fstream>
#include <iostream>

int main()
{
    std::ofstream log("oops.log");
    std::cout.rdbuf(log.rdbuf());
    std::cout << "Oops!\n";
    return 0;
} 
```

字符串“Oops!\n”被打印到文件“oops.log”中。代码没有恢复cout的streambuf，但是VS2010没有报运行时错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T18:21:20.457

由于`log`和`std::cout`共享一个缓冲区，该缓冲区可能会被释放两次（一次`log`超出范围，然后再一次在程序终止时）。

这会导致未定义的行为，因此很难说出它在他的机器上触发总线错误但在你的机器上静默失败的确切原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T19:07:39.410

由于其他答案没有提到该怎么做，所以我会在这里提供。您需要保存和恢复 cout 应该管理的缓冲区。例如：

```
#include <fstream>
#include <iostream>

// RAII method of restoring a buffer
struct buffer_restorer {
    std::ios &m_s;
    std::streambuf *m_buf;

    buffer_restorer(std::ios &s, std::streambuf *buf) : m_s(s), m_buf(buf) {}
    ~buffer_restorer() { m_s.rdbuf(m_buf); }
};

int main()
{
    std::ofstream log("oops.log");
    buffer_restorer r(std::cout, std::cout.rdbuf(log.rdbuf()));
    std::cout << "Oops!\n";
    return 0;
} 
```

现在，当`cout`' 的缓冲区`cout`在程序结束时被销毁之前被替换时，所以当`cout`销毁它的缓冲区时会发生正确的事情。

* * *

对于简单的重定向标准 io，通常环境已经有能力为你做这件事（例如，在 shell 中的 io 重定向）。而不是上面的代码，我可能只是简单地将程序运行为：

```
yourprogram > oops.log 
```

另外要记住的一件事是，它`std::cout`是一个全局变量，与其他全局变量具有所有相同的缺点。而不是修改它甚至使用它，您可能更喜欢使用通常的技术来避免全局变量。例如，您可以传递一个`std::ostream &log_output`参数并使用它，而不是`cout`直接使用代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T18:22:28.077

您的程序具有未定义的行为。

全局对象的析构函数`cout`会在超出范围时删除流缓冲区，`log`同样拥有同样的流缓冲区也是如此。因此，您将两次删除同一个对象。

当程序具有未定义的行为时，任何事情都可能发生，从格式化硬盘到终止而没有任何错误。

例如，在我的平台上，程序从`main()`.

# css - 背景附件：固定不适用于 IE8 中的 SPAN 元素

> ID：14860276
> 
> 赞同：0
> 
> 时间：2013-02-13T18:17:44.483
> 
> 标签：css, internet-explorer-8, internet-explorer-9, html

似乎**background-attachment:fixed** CSS 属性值不适用于Internet Explorer 8 中的**SPAN**元素，尽管 W3C 和所有其他来源都说 IE 确实支持“固定”值而没有任何限制。我的简单 html 如下：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title> 
         <STYLE type="text/css">
            span {
                background-image:url(empty-bg.png);
                background-repeat:repeat;   
                background-position:0 0;
                background-attachment:fixed;
            }
         </STYLE>
    </head>
    <body>
        Text<br/>
        Text<br/>
        Text<br/>
        Text<br/>
        Text<br/>
        Text<br/>
        <span>HOLE</span><br/>
        Text<br/>
        Text<br/>
        Text<br/>
        Text<br/>
        Text<br/>
        Text<br/>
        Text<br/>
    </body>
</html> 
```

我的期望是，当滚动这个页面时，背景图片应该保持固定，所以它会在页面中产生洞的错觉，这在 Firefox 中确实可以完美运行，但在 IE 中它的行为就像它被设置为**scroll**一样。IE有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:01:33.957

您是否尝试过使用`display: inline-block;`span 元素？

无论如何，请注意实际上 IE 对 background-attachment:fixed 的支持是相当错误的，请查看[http://www.standardista.com/css3/css3-background-properties/#bg1](http://www.standardista.com/css3/css3-background-properties/#bg1)。如您所见，直到 IE7 它将“固定”值视为“滚动”，而 IE8 可能会错误地放置图像。

# java - 线程一直挂在 Socket / Printwriter 交互上

> ID：14860277
> 
> 赞同：2
> 
> 时间：2013-02-13T18:17:48.440
> 
> 标签：java, sockets, printwriter

我的程序运行了一段时间（大约 20 秒），之后它发送的消息越来越少，直到它停止。我做了一个线程转储，它将我指向线程停止的以下代码行：

```
if(s.isClosed() || !s.isConnected() || s.isInputShutdown() || s.isOutputShutdown() || out == null || out.checkError()) { 
```

这是我的线程转储的一部分

```
 "class xxx.xxx.xxx" prio=10 tid=0x000000000200d800 nid=0x6e7f waiting for monitor entry [0x00007f63172b6000]
   java.lang.Thread.State: BLOCKED (on object monitor)
        at java.io.PrintWriter.flush(PrintWriter.java:291)
        - waiting to lock <0x00000000ec810218> (a java.io.BufferedWriter)
        at java.io.PrintWriter.checkError(PrintWriter.java:330) 
```

此线程转储信息指出问题出在 Printwriter.checkError() 中。但我不明白为什么它会停在这里。

以下是其上下文中的代码。（接收者是一个`Map<Socket, PrintWriter>`）

```
public void parseMessage(final byte[] bytes) {
    synchronized (receivers) {
        for (final Socket s : receivers.keySet()) {
            final PrintWriter out = receivers.get(s);
            if(s.isClosed() || !s.isConnected() || s.isInputShutdown() || s.isOutputShutdown() || out == null || out.checkError()) {
                receivers.remove(s);
                failedToConnect(s.getInetAddress().getHostAddress(), s.getPort());
                continue;
            }
            queue.add(out, bytes);
        }
    }
} 
```

**1 月 14 日更新（格林威治标准时间 10:00+1）：**

替换`PrintWriter`为`BufferedWriter`

**1 月 14 日更新（格林威治标准时间 16:00+1）：**

我进行了更多测试，结果发现某些网络/阅读器之间的某种通信问题正在造成麻烦。该应用程序正在向其内部网络中的一些读者发送数据，并发送给一些外部网络中的一些读者（通过互联网）。究竟是什么原因导致这一点仍然未知，但有一些线索。几次重新启动后，我可以看到两个网络之间的连接没有关闭，因此连接保持打开状态。我仍然不知道这里到底发生了什么，但在我看来这是某种网络问题。在服务器端，连接保持在“FIN_WAIT1”中，在阅读器端保持“ESTABLISHED”。即使已发送信号关闭连接，阅读器也不会发出关闭连接的信号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:34:36.090

```
if(s.isClosed() || !s.isConnected() || s.isInputShutdown() || s.isOutputShutdown() || out == null || out.checkError()) 
```

这是一系列几乎是徒劳的测试。

*   如果套接字已关闭，您根本不应该在这部分代码中。
*   如果套接字未连接，同上。
*   如果您关闭了套接字以进行输入，这并不意味着您不能写。
*   如果您关闭了输出套接字，您不应该在这部分代码中。
*   如果`out`为 null 你不应该在这部分代码中。
*   测试`checkError()`很好，但你根本不应该通过`PrintWriter`网络使用，因为它会吞下异常。最好使用`BufferedWriter`并让异常告诉您发生错误的事情，而不是像您在这里所做的那样在下一次写入时告诉您。

您还需要了解，`Socket.isClosed()`仅告诉您是否*已*关闭`Socket.`类似地，`Socket.isConnected()`仅告诉您已连接`Socket,`或已通过构造函数接收它已连接，或者`ServerSocket.accept()`。同样适用`isInputShutdown()`，`isOutputShutdown().`他们只告诉你你对这些方法做了什么`Socket.`，这些方法都没有告诉你关于*连接*状态的任何事情。

> 此线程转储信息指出问题出在 Printwriter.checkError() 中。但我不明白为什么它会停在这里。

因为，正如堆栈跟踪也告诉你的那样，它正在调用`flush().`If that blocks 这意味着你已经超出了阅读器，并且 TCP 正在等待他读取一些数据以释放他的套接字接收缓冲区中的缓冲区空间，从而释放你的套接字发送缓冲区。在此之前，底层证券`send()`将阻塞。除了加快阅读速度外，您无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:43:25.380

当一个线程被阻塞时，它很可能正在等待 I/O 请求 看看这个链接它与你遇到的非常相似 [how-to-analyze-java-thread-dumps](http://www.cubrid.org/blog/dev-platform/how-to-analyze-java-thread-dumps/)

# php - 按用户和日期使用 php 顺序制作列表

> ID：14860281
> 
> 赞同：0
> 
> 时间：2013-02-13T18:17:58.260
> 
> 标签：php, list, codeigniter

我想制作一个包含用户所有项目的列表，按用户划分..

```
<div id="news-block">
    <h3 id="news-title">USER NAME</h3>
    <ul id="news-content">
        <li>ITEM 1</li>
        <li>ITEM 2</li>
        <li>ITEM 3</li>

    </ul> 
```

我有这个 php，我的问题是标题：

```
<div id="news-block">
    <?php
    echo "<ul id='news-content'>";
    $username=null;
    foreach ($programas as $programa) {

        if ($programa->username!= $username) {
            $nombre = $programa->username;
            echo "<h3 id='news-title'>".$programa->username."</h3>";
        }
        echo "<li>".$programa->titulo."</li>";
    }
    echo "</ul>";
    ?> 
```

显然这段代码是错误的，因为我不能重复用户的名字..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:24:11.560

试试这个代码：

```
<?php

  $list = "<ul id=\"news-content\">";
  $h3 = "<h3 id=\"news-title\">";
  $username=null;

    foreach ($programas as $programa) {

      if ($username == null) {
        $username = $programa->username;
        $h3 .= $username . "</h3>";
      }
      $list .= "<li>" . $programa->titulo . "</li>";

    }

    $list .= "</ul";

    echo $h3 . $list;

?> 
```

或者你想要一个像这样的列表：

```
- Name
-- 1
-- 2
-- 4

- Name
-- 1
-- 2
-- 3 
```

这个？如果是这样，我们需要您的数组结构`$programas`。

我认为 $programas 类似于：

```
$programas = array(
        "UserOne" => array("prog1", "prog2", "prog3"),
        "UserTwo" => array("prog1", "prog2", "prog3")
        ); 
```

所以代码应该是：

```
$users = array_keys($programas);
$i = 0;

foreach($programas as &$user) {

  $h3 = "<h3 id=\"news-title\">" . $users[$i]  . "</h3>";     
  $list = "<ul id=\"news-content\">";

  foreach($user as &$programa) {
    $list .= "<li>$programa</li>";
  }

  echo $h3 . $list . "</ul>";

  $i = $i + 1;
} 
```

现在测试，它可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:39:59.050

试试这个，我没有测试这个代码，但它应该可以工作！

```
<?php
     $users = array(
    'user1' => array(
        'name' => 'Tom',
        'items' => array( 'item1', 'item2', 'item3' )
        ),
    'user2' => array(
        'name' => 'John',
        'items' => array( 'item1', 'item2', 'item3' )
        )
    );

    foreach($users as $user)
    {
        echo '<h3 id="news-title">'.$user['name'].'</h3>';
        echo '<ul>';
        foreach($user['items'] as $item )
        {
            echo '<li>'.$item.'</li>';
        }
        echo '</ul>';
    }
?> 
```

# nginx - 使用 CORS 的跨域分块上传

> ID：14860282
> 
> 赞同：7
> 
> 时间：2013-02-13T18:18:10.080
> 
> 标签：nginx, xmlhttprequest, cross-domain, cors, fileapi

我有用户提交的文件，我试图以 10 MB 的块上传。我目前正在使用原始 XMLHttpRequest（和 XDomainRequest）将每个单独的切片（`File.prototoype.slice`）推送到前端。后端是使用[上传模块](http://www.grid.net.ru/nginx/upload.en.html)的 Nginx 。

仅供参考，这里是我如何使用的概要`slice`：

```
element.files[0].slice(...) 
```

我了解跨浏览器前缀方法`webkitSlice`等等`mozSlice`。

我遇到的问题是实际发出跨域请求。我正在从 上传`server.local`到`upload.server.local`。在 Firefox 中，`options`请求通过正常，然后实际`post`失败。在 Chrome 和 Opera 中，`options`请求失败并显示

```
 OPTIONS https://URL Resource failed to load 
```

以下是 Firefox 的标头：

### 请求标头

```
OPTIONS /path/to/asset HTTP/1.1
Host: upload.server.local:8443
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:18.0) Gecko/20100101 Firefox/18.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Origin: https://server.local:8443
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-disposition,content-type,x-content-range,x-session-id
Connection: keep-alive
Pragma: no-cache
Cache-Control: no-cache 
```

### 响应标头

```
HTTP/1.1 204 No Content
Server: nginx/1.2.6
Date: Wed, 13 Feb 2013 03:27:44 GMT
Connection: keep-alive
access-control-allow-origin: https://server.local:8443
Access-Control-Allow-Methods: POST, OPTIONS
Access-Control-Allow-Headers: x-content-range, origin, content-disposition, x-session-id, content-type, cache-control, pragma, referrer, host
access-control-allow-credentials: true
Access-Control-Max-Age: 10000 
```

实际`post`请求永远不会离开浏览器。Nginx 访问日志永远不会看到`post`. 浏览器出于某种原因将其停止。我如何解开这篇文章被屏蔽的原因？

```
Chromium 24
Firefox 18
Opera 12.14 
```

我已经[在这里](https://test-cors.appspot.com/#technical)验证了所有浏览器都正确支持 CORS 。

通过将我的上传指向`https://cors-test.appspot.com/test`，我已经确认问题肯定出在服务器端标头上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T05:59:34.333

[如果预检检查](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Preflighted_requests)没有返回足够的权限，则POST 不会离开浏览器，因此 POST 请求没有得到完全授权。问题中包含的请求/响应对我来说确实足够了。

*   你确定你`withCredentials = true`在你的 XMLHttpRequest 中设置吗？
*   您确定您的服务器上有有效的（非自签名的）SSL 证书吗？即使您添加了使用无效证书浏览站点的例外，HTTPS 也可能无法通过 CORS 检查。
*   您是否尝试过清空缓存？您已`Access-Control-Max-Age: 10000`在响应标头中设置。也就是将近3个小时。我知道您在这方面工作的时间比这更长，但是在特别是测试时，将该标头设置为零，这样您就不会因为浏览器缓存旧访问权限而发疯。

一般来说，我会从尽可能宽松的 CORS 标头开始，然后慢慢提高安全性，看看它在哪里失败。然而，这并不完全简单。例如，根据[关于 CORS 的 MDN 文档](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)，

> 响应凭据请求时，服务器必须指定域，并且不能使用通配符。如果标头被通配符为：上面的示例将失败：`Access-Control-Allow-Origin: *`

当我将您问题的请求部分发送到 时`https://cors-test.appspot.com/test`，我会收到以下信息：

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Access-Control-Allow-Origin: https://server.local:8443
Access-Control-Allow-Headers: content-disposition,content-type,x-content-range,x-session-id
Access-Control-Allow-Methods: POST
Access-Control-Max-Age: 0
Access-Control-Allow-Credentials: true
Cache-Control: no-cache
Expires: Fri, 01 Jan 1990 00:00:00 GMT
Content-Type: application/json
Content-Encoding: gzip
Content-Length: 35
Vary: Accept-Encoding
Date: Thu, 23 May 2013 06:37:34 GMT
Server: Google Frontend 
```

因此，您可以从那里开始并添加越来越多的安全性，直到它打破以找出罪魁祸首。

# asp.net - 如何在 ASP.NET 中生成并发送到客户端 Excel 报告

> ID：14860283
> 
> 赞同：0
> 
> 时间：2013-02-13T18:18:14.420
> 
> 标签：asp.net, excel

我对在 ASP.net 中生成/发送 Excel 报告的整个问题不熟悉。

下面的代码有时不适用于大量数据（大型 Excel 报告），但前提是用户（不在我们公司）从他的浏览器请求它。如果我运行它，它总是可以工作的，而且我位于服务器所在的同一栋建筑物中。

客户端有 IE9 和 MS Office 2010。客户端没有收到任何错误。客户在漫长的等待时间后根本没有收到报告。似乎超时而没有错误。

为客户提供大型 Excel 报告，是否有以下方法的替代方法？

下面代码中的任何错误都可能导致问题？

为客户端生成可在 Excel 客户端打开的报告的最佳 = 稳健方法是什么？

```
Response.ContentType = "application/ms-excel" 
Response.AddHeader("Content-Disposition", "attachment; filename=" + ReportName + ".xls") 

Response.Write("<table border =1>") 
For Each ch As ColumnHeaders In arrCh 
    If ch.ColumnName <> "" Then 
            pCh = pCh & "<td><b>" & ch.ColumnName & "</b></td>" 
                    pColCount = pColCount + 1 
                End If 
Next 

If pExtraHeader <> "" Then 
    Response.Write(pExtraHeader) 
End If 
Response.Write("<tr>" & pCh & "</tr>") 
If oSQLDataReader.HasRows Then 
    Do While oSQLDataReader.Read() 
            Response.Write("<tr>") 
                For I = 0 To arrCh.Count - 1 
                    If arrCh(I + 1).columnname <> "" Then 
                        Response.Write("<td>" & strColumnValue & "</td>") 
                        If arrCh.Item(I + 1).isTotal = True Then 
                            arrCh.Item(I + 1).placeholder = CDbl(arrCh.Item(I + 1).placeholder) + CDbl(oSQLDataReader.GetValue(I)) 
                        End If 
                     End If 
                Next 
                Response.Write("</tr>") 
        Loop 

        Dim pTotal As String = "" 
        For Each ch As ColumnHeaders In arrCh 
            If ch.ColumnName <> "" Then 
              pTotal = pTotal & "<td><b>" & strColumnValue & "</b></td>" 
          End If 
        Next 
    Response.Write("<tr>" & pTotal & "</tr>" 

End If 
Response.Write("</table>") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:11:36.460

这就是所有的代码吗？您是否正在刷新响应并最终确定它？

除此之外，在 excel 的情况下，有很多服务器组件可以自动生成一个 excel 工作簿并将文件作为附件返回给客户端（所有处理都在服务器上完成）。

最后（这始终是不得已的措施）您在服务器上安装了 Excel 自动化。

检查[此答案](https://stackoverflow.com/questions/150339/generating-an-excel-file-in-asp-net?rq=1)，这是您可用的不同替代方案的细分。

# telerik - Telerik RadComboBox RenderingMode Simple

> ID：14860287
> 
> 赞同：0
> 
> 时间：2013-02-13T18:18:32.420
> 
> 标签：telerik, rendering

我们正在使用 Telerik Rad ComboBox 来呈现下拉菜单。问题是默认情况下它呈现一个 div 和`<ul><li>`下拉列表。我们尝试将 RenderingMode 设置为“简单”，但由于某种原因，RenderingMode 属性未采用。我们想要 Simple 属性，因为它应该输出： `<select><option></option></select>`

相反，它仍在渲染 `<ul> <li>`。在移动设备上，我们希望列表弹出设备的默认选择选项查看器。

我们发现 ComboBox 有一个属性可以设置 RenderingMode="Simple"，但是，它似乎没有将我们的 RadComboBox 切换为元素，它保持默认值。我检查了 Firebug 中的 HTML 输出，没有任何改变。RadComboBox 位于选择“添加新记录”时触发的 RadGrid 内。将 RenderingMode 设置为 Simple 不起作用的任何原因？？？

编辑

我看到它在 Firebug 中呈现选择，并且样式被推向左 -9999 和位置，如果固定，我覆盖了 CSS，以便那些进入视图但是当我们单击保存时，这些值没有获取或输入到我们的 RadGrid 中。这些项目似乎没有相同的值。

编辑 2

图 1\. 即使我们有 RenderingMode="Simple" 它仍然会创建 'ul li' 版本。

![在此处输入图像描述](../Images/ca4451ec9d9da43123fe870db5951f75.png)

图 2。它创建了 HTML，但根据文档，“ul li”应该消失了，下拉列表应该出现在它的位置。相反，正如您在 Firebug 中看到的那样，它输入 BOTH。

![在此处输入图像描述](../Images/563c8d0218e4816dfabdd4e03b379636.png)

图 3\. 当我采用 -9999px 或从 CSS 固定的位置时显示两种输入类型，可以看到两者实际上都呈现在页面上 ![在此处输入图像描述](../Images/b05f7246ba1b32c94b5fcc4e97ef5ba5.png)

图 4\. 是代码示例。非常简单的 .Net 使用 RadComboBox 并指定了 RenderingMode 但无法正常工作。 ![代码示例](../Images/ed93af58f00d6f02d9f4bd28714c1fad.png)

# c# - 将命名空间添加到 xpath

> ID：14860288
> 
> 赞同：1
> 
> 时间：2013-02-13T18:18:33.217
> 
> 标签：c#, xml, xpath

我有充满 xpath 的类，现在需要一个特定的命名空间。我怎样才能做到这一点？重构此代码的最简单方法是什么？找替代品？

如果我不提前知道命名空间，那么将来获取特定节点的最佳方式是什么？

```
susr1 = root.SelectSingleNode("/PurchaseOrderRequest/DocumentHeader/DocumentInformation/DocumentIdentification/Type");

susr1 = root.SelectSingleNode("/PurchaseOrderRequest/ssdh:DocumentHeader/ssdh:DocumentInformation/ssdh:DocumentIdentification/ssdh:Type"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:51:12.213

您可以试试这个[XML 库](https://github.com/ChuckSavage/XmlLib/)。使用`XPathElement()`. 如果可以使用，这是一个 .Net 3.5 解决方案。

```
XElement root = XElement.Load(file) or .Parse(string) 
```

然后，只要不存在具有相同名称（但名称空间不同）的冲突节点，您的任何一个 xpath 都应该工作。

```
XElement susr1 = root.XPathElement("/PurchaseOrderRequest/DocumentHeader/DocumentInformation/DocumentIdentification/Type");

XElement susr1 = root.XPathElement("/PurchaseOrderRequest/ssdh:DocumentHeader/ssdh:DocumentInformation/ssdh:DocumentIdentification/ssdh:Type"); 
```

该库应该为您找出命名空间。如果没有示例 xml，我无法确定它。

# ios - CoreData：ObjectID 错误：“选择器‘managedObjectContext’没有已知的类方法

> ID：14860289
> 
> 赞同：1
> 
> 时间：2013-02-13T18:18:39.517
> 
> 标签：ios, core-data, reference, objectid

```
@implementation FirstScene
...
- (void)nextScene {
    Meetings *meetings = (Meetings *) [NSEntityDescription insertNewObjectForEntityForName:@"Meetings" inManagedObjectContext:self.managedObjectContext];
    NSManagedObjectID* objectID = [meetings objectID];
    [secondScene setObjectID:objectID];
}
...
@end

@implementation SecondScene
....
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.managedObjectContext = [(STAppDelegate *)[[UIApplication sharedApplication]  delegate] managedObjectContext];
}

+ (void)setObjectID:(NSManagedObjectID*)objectID {
    NSManagedObjectContext *context = [self managedObjectContext]; // ERROR
    Meetings *theSameMeetings = (Meetings *)[context objectWithID:objectID];
}
...
@end 
```

我在以下代码中收到错误“选择器'managedObjectContext'没有已知的类方法：

```
NSManagedObjectContext *context = [self managedObjectContext]; 
```

我这里的目标是将FirstScene 中的*meetings (managedObjectContext) 的objectID 传递给SecondScene，这样我就可以继续添加实体*meetings 属性。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:02:02.150

这不是核心数据错误，而是基本的 Objective-C 错误。你在这个方法中：

```
+ (void)setObjectID:(NSManagedObjectID*)objectID; 
```

“+”表示这是一个类方法，而不是实例方法。所以`self`在这种情况下是`SecondScene`类，而不是该类的任何特定实例。当您尝试执行此操作时：

```
NSManagedObjectContext *context = [self managedObjectContext]; 
```

...您正在尝试调用名为 的方法`+managedObjectContext`，即具有该名称的类方法。这显然不存在，这并不奇怪。

我怀疑你打算`setObjectID:`成为一个实例方法，这意味着它应该在行的开头有 a`-`而不是 a 。`+`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:27:26.737

兄弟，正如它所说，您的“SecondScene”中没有“managedObjectContext”方法。是吗？

显然，您是核心数据的初学者，而且您刚刚涉足它。

但是，转到您项目的 AppDelegate，然后搜索“-(void)managedObjectContext”，您会看到那里有一个 manageobjectcontext 方法，将 [self manageobjectcontext] 替换为 AppDelegate 中的方法。

这将允许您访问 appdelegate

```
YourAppDelegateClass   *appDelegate = (YourAppDelegate *)[[UIApplication sharedApplication] delegate]; and now call [appDelegate managedObjectContext]; 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:21:59.547

通过调用`[self managedObjectContext]`编译器正在寻找当前目标中`-(void)managedObjectContext`显然不存在的方法名称。传递对象 ID 的最佳方法是设置一个属性并综合该属性，这将允许您将 objectID 分配给会议实例，然后从所述实例中检索它。

- 编辑 -

在您需要访问您的 ManagedObjectID 的任何类中，您都希望这样声明您的委托：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

然后在您的 setObjectID 方法中，您可以调用：

```
 NSManagedObjectContext *context = [appDelegate managedObjectContext]; 
```

# ruby-on-rails-3.2 - 如何配置“high_voltage”gem 以提供静态图像？

> ID：14860295
> 
> 赞同：3
> 
> 时间：2013-02-13T18:19:09.857
> 
> 标签：ruby-on-rails-3.2, high-voltage

我正在尝试使用'high_voltage' gem 来确保我的页面周围的身份验证（实际上是一些具有静态 html/css 树的完全独立的站点）。这有效，但没有加载图像。如果我导航到图像的路径，图像的源代码将作为文本返回，从而导致“Pages#show 中的 ActionView::WrongEncodingError”。如果我将静态 html 文件夹放在 /public 中，所有图像都会按预期加载。显然，我的 PageController 尝试像模板一样渲染静态图像。我该如何解决？

我已经按照此处所述覆盖了 PageController： [https ://github.com/thoughtbot/high_voltage#override](https://github.com/thoughtbot/high_voltage#override)

```
 # in config/routes.rb

  match "/pages/*id" => 'pages#show', :as => :page,  :format => false

# in app/controller/pages_controller.rb

  before_filter :authenticate_client!
  layout :nil

  def show
    custom_authentication
    super
  end

  ... 
```

我是 RoR 新手，因此欢迎任何一般性帮助或建议。

编辑：这是完整的错误消息

* * *

```
ActionView::WrongEncodingError in Pages#show

Showing /home/robert/Coding/RailsPlayground/JoSchaefer/app/views/pages/myWebsite/images/test.png where line # raised:

Your template was not saved as valid UTF-8\. Please either specify UTF-8 as the encoding for your template in your text editor, or mark the template with its encoding by inserting the following as the first line of the template:

# encoding: <name of correct encoding>.

The source of your template was:

�PNG

IHDRKK�,��tEXtSoftwareAdobe ImageReadyq�e<"iTXtXML:com.adobe.xmp<?xpacket begin="" id="W5M0MpCehiHzreSzNTczkc9d"?> <x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.0-c060 61.134777, 2010/02/12-17:32:00        "> <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"> <rdf:Description rdf:about="" xmlns:xmp="http://ns.adobe.com/xap/1.0/" xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmp:CreatorTool="Adobe Photoshop CS5 Macintosh" xmpMM:InstanceID="xmp.iid:AF83234B3E0211E281788B850106876A" xmpMM:DocumentID="xmp.did:AF83234C3E0211E281788B850106876A"> <xmpMM:DerivedFrom stRef:instanceID="xmp.iid:AF8323493E0211E281788B850106876A" stRef:documentID="xmp.did:AF83234A3E0211E281788B850106876A"/> </rdf:Description> </rdf:RDF> </x:xmpmeta> <?xpacket end="r"?>|~�
kIDATx��[
TTe�;�p���?��:Y�����$Obb-m֖���V��B{2�S�g�
O[[�G����)�z<�4ꒉ��16��0���s��v�3#0nr�Μ9Ýo�w��}��}��^��N�dL�X���#G8V�x�e�Ǐ=��ɱ���`������?�64K�T��hl"���a�Z"�dU5�/5�A��{wkb���غ�C_/�w��w�,�&gt;�_&��۝�'CN2�)�]��V��g�ܨ7����-A� ���w����Ϧ>�k&���&gt;EH���������5�Z��9L�����i�i�2T�SӔ����e�F��{��J��g��<��@����;`X,��v�h�h�Qq��pQ⫉IA�+��F%eTT����̬�i���s�0�p���k��lb���-��G���q��Z��x���������0lՉ����o$.�yfM�9��q��O�ޫ/��%L�R6�*j�'-��e�hs�R��u��j�֕�����A�s��kɇ+�-y����6Ĝ��6xo�C�wOs����Bxe�8D^*�����2��r�^a����H��\5-�����I6�4�&lt;[@�d���)��e�i!ӈ�[�;�b&�q�Prh�&gt;GF@<�mNT*'�);r����$y�|�-��$���@��C���U�8��¶xeܳ����r_@n$��d>�$1YBv�/މë�d������ʄ�+"��[�G�Ɯ�A�
��0J�+.������NB��/n*r��̇�'� y���y���"��
!\�poZ}��4��?�%V��%��D���y��||��SG]�gVU��Y�.{��׏K��-����|X ��'�%n���D�
��-�*`�xU'���n��o5���&gt;�u�h|���&gt;��������|@JD�P��@fF�Մ'�н��!��C��'f"s"�����˻q}��l?{��]�2���2~��c�rxN�L��c��hc���o���!4�p����Z�θ)r�W����
�,��i �k��ߑ3�C�*R�ZB��t9`=lG}�qY�����f��<�ն8�$�᧛��0�'l��Ϸ�{���[.�M!=��ԣ��~# h��~ߞ�EK&�ٿ�[?Z�[��v#
    Q<ؔ�Sl�n&-J0�8�e{�A��VE��᫮d�B����r�H��ǰ ��b�'�h*��5���=Y�H\� ��^�}����0����C��n=X��4@��=�K��"�$�&gt;.f� �u��hTo�X����*��{���k��K�������-lk��r��֠����_x�pK��ɏ˧��#;�{{[���'2
Q��iR�*��+�g��$�VM뱡�P�sT��d�Ԍ�k�;/��Xf���X9��I�5Ih@h�N��`^����x�t�&lt;����;��'.�67w���H��3Wgq5�0U*�G��]��>
���vP��w��� �f)i�"/�K�O saG��)�%]�9Ƌ
�6i��U'��E����(��
��"�f5ٺ��������`�kpH���� 2��J�Ϫ��w��6B�!�8��\y�-pqS�.���~   �����5q��J��9Q�`��FGz�R�DŸ����s���/��W�K��,����0�o@�CW\;KCW����u���9T���j[M��N�[xielD��$���e}O����+�|7׫��¤�Iq�~NZR�b_H蘃�8B�#�JY#��S{`o��߯&,4����Ba���޾��u��K�㤜�ZǓ�n"�/�=_�  mDU�o\+ګ��?��<'~-_?C�qc��m��7�+�"�I�=��js]f�����    i��)*��@�Z1�ZG  �u/*���D��Ӑ�I�M���(^pB��&0���-��đ꧟n+/�����Jc�o�m��=Z=ݛ�ƈz�Ɩfׂ�������9�l��%�sN�^U�����������R�ĥO/M�������%�W��wL`�&gt;"'R�Z����_N;)
r���-�RU�]!1��^1�������"7"��T���'N�+�JӰ0��������{4T}]
R�0a�u�k(��r8x<::̂'2��t�D��j����2�ʉ�9\_̆�QI-9��F�^$0������,l6�v��Z��� �g)�&amp;j�����������6�6�-��!TuJ�&gt;��@�_H�9Ϭ��G��;3��u�\��w�G�C)������P���\�O��`�D���V<�����?�)z{���p�%���3<����%'���
0#R?r���sD���"�3!D��u/���$�_�JUe��C��u��@��_R��R����J�;��I�����9�^�?ę�f���t�\��vE*l(i��)l��b�|�D�J5@!�Ȩ��w �y�9�i��</o��N7l�`��}Sp6ƵI���    ����Ⱥ��C�D�n�vc����Kp���m����7:}��O>{|�S��\zj }��w���d\�'1`���  8����F
!w���
�&gt;��'�D
�13�M��|G
�������U� ��[_���E{ utzm�Ϣ�ݨEvǺ�����O��jl�8)۟   3��!�O|Ǜ�xN%lX���
� 0Cm��U썜�����͊��������y!�+j
r%b�r�
�!P1B�ªA\�I�/ꑻ�$p"VA]�Z�T�ĚGD���!i�]<gˎ�X��X�*�G�En�#{�R�}���7����H7I?;��AH�
��5�    T�c�Y�&amp;��
qe8;�ﶼ�zaS��:~������ύ����n����I����<���A��(ޱg[�.�o���r�����Sγkݶ��C�����-�ߴv�˸���8�������By�t��zZ2�_��D�����!��H��(6P��\���D��l?�)�
D�r�ņ4� �m$3��=>�D-Fo�P)�"�eB_�'hQW���tg)����i��2nk�k@?\=<  ���b����!B���k[z`X�H� z�r7��R?��ͷ��%D�7���b_i���pDO*�����
����m��
9�� 
Nut<�{��_�k&�y!�U��TG��{����y���0S���W����ި2\}���Ya�E̲���1��'fB��ݔQ��   rw��(��ܼW<��9����h�Ը�L���C�k����9.E���6y�-y[�t�l�X�l������#X=��x�옝��r���#<j�k����w��[>=�{��y>��h�p����۵F���^z��
�m��1.6�W�a�9x������1dz����?�q����#G8���k�z*&A�xIEND�B`�
Extracted source (around line #):

Rails.root: /home/robert/Coding/RailsPlayground/JoSchaefer

Application Trace | Framework Trace | Full Trace
app/controllers/pages_controller.rb:7:in `show'
Request

Parameters:

{"id"=>"myWebsite/images/test.png"}
Show session dump

Show env dump

Response

Headers:

None 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T12:32:26.987

在查找了“high_voltage”gem 的来源后，我能够通过内联发送原始文件来“解决”我的问题：

```
 # in /app/controllers/pages_controller.rb
      def show
        logger.debug "Current page is: #{current_page}"
        custom_authentication current_page
        send_file "app/views/#{current_page}", :disposition => 'inline'
        # super
      end 
```

这是跳过的超级方法`HighVoltage::PagesController`：

```
 # source of 'high_voltage' gem
    # in app/controllers/high_voltage/pages_controller.rb
      def show
        render :template => current_page
      end 
```

我知道[安全风险](http://guides.rubyonrails.org/action_controller_overview.html#sending-files)，因为`current_page`它源自`params[:id]`. 但是，`HighVoltage::PageFinder`显然清理了给定的输入：

```
 # source of 'high_voltage' gem
    # in lib/high_voltage/page_finder.rb

        VALID_CHARACTERS = "a-zA-Z0-9~!@$%^&*()#`_+-=\"{}|[];',?".freeze
    ...
        def clean_path
          path = Pathname.new("/#{clean_id}")
          path.cleanpath.to_s[1..-1]
        end

        def clean_id
          @page_id.tr("^#{VALID_CHARACTERS}", '')
        end 
```

导航到`http://localhost:3000/pages/../shouldNotBeAccessed.html`导致`http://localhost:3000/shouldNotBeAccessed.html`并且`PagesController`永远不会被调用，这没关系，并且`http://localhost:3000/pages/something/../somethingElse.html`调用`PagesController`并且记录器给我“当前页面是：pages/somethingElse.html”，所以路径遍历是可能的，只要它发生在 app/views/pages/ ..这对我来说是可以接受的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:28:01.010

如果您使用的是 Rails 3.2 ，您可能依赖于资产管道。惯例是将图像放置在资产目录中，默认情况下是：`app/assets/images`，`lib/assets/images`和`vendor/assets/images`。可能的解决方案是将图像移到那里或扩展资源目录，如[本 Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html)中所述。

编辑：在您的情况下扩展资产目录（添加您的`application.rb`）：

```
config.assets.paths << Rails.root.join("app","views","pages","myWebsite") 
```

# javascript - 单击 EventListner javascript 时播放声音

> ID：14860298
> 
> 赞同：0
> 
> 时间：2013-02-13T18:19:19.593
> 
> 标签：javascript

我试图在点击动态创建的声音时发出声音

*   但我得到错误对象没有方法。我发现的教程只调用 elementById 但因为这是一个使用 eventlistner 的类。

    这就是我现在所拥有的。

    ```
    function AddEvent(){ 
        var addClass= document.getElementsByClassName("add"); 
        addClass=addClass[addClass.length-1]; 
        addClass.addEventListener("click", playsound, true); 

        function playsound() { 

            var mySound = src="wav/add.wav"
            mySound.play(); 

        }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:04:46.813

您可以在 HTML 5 中创建一个`audio`元素，将其隐藏，然后使用 JavaScript / jQuery 对其进行操作。所以你的 HTML 看起来像：

```
<audio id="mySound">
    <source src="add.ogg" type="audio/ogg">
    <source src="add.mp3" type="audio/mpeg">
</audio> 
```

然后你可以使用下面的JS：

```
function AddEvent()
{ 
    var addClass = document.getElementsByClassName("add"); 
    addClass = addClass[addClass.length-1]; 
    addClass.addEventListener("click", function() {  
        document.getElementById('mySound').play();
    }, true); 
} 
```

你可以在这里看到一个工作的[**jsFiddle**](http://jsfiddle.net/MztHp/)。您应该被告知这使用了 HTML 5，所以 IE < 9 将不支持它。

# html - 将文本文件嵌入 HTML

> ID：14860307
> 
> 赞同：0
> 
> 时间：2013-02-13T18:19:48.603
> 
> 标签：html, django

我想将纯文本文件的内容嵌入到我的 HTML 页面中。问题是我写的代码没有嵌入它——它会自动开始下载。

我想简单地将它嵌入到页面中——然后再给某人编辑它的选项。我究竟做错了什么？

```
<div style="margin: 0 auto; width:100%; height:400px; overflow: auto;"><object type="text/html" data="{{MEDIA_URL}}{{item.content}}" style="width:100%; height:400px; margin:1%;"></object></div> 
```

注意：`{{item.content}}`插入一个 .txt 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:55:48.963

在将文本文件的内容传递给模板之前，您需要将其内容转换为字符串或其他内容 -

```
def your_view(request):
    #...
    f = item.content.open(mode='r')
    str = f.read()
    return render(request, {'file_content': str}) 
```

然后使用 访问模板中的内容`{{ file_content }}`。

# java - 为什么PDFBox在转换为图像文件时会删除一条矩形线

> ID：14860311
> 
> 赞同：0
> 
> 时间：2013-02-13T18:19:53.407
> 
> 标签：java, pdf, pdfbox

[损坏的转换图像](https://i.stack.imgur.com/1oY6W.png) 我尝试将 pdf 转换为图像文件......它工作正常，但它删除了其中一个矩形中的一条线......我不知道为什么......

```
public static void main(String[] args) throws FileNotFoundException, IOException
    {
        PDDocument doc = PDDocument.load(new FileInputStream(new File(".....pdf")));

    PDDocumentCatalog docCatalog = doc.getDocumentCatalog();
    List pages = docCatalog.getAllPages();

    for (Object pageObj : pages)
    {
        PDPage page = (PDPage) pageObj;
        BufferedImage pdfImage = page.convertToImage();
        ImageIO.write(pdfImage, "png", new File("/......png"));

    }
    doc.close();
} 
```

在我删除 pdf 的所有文本之前....可能是它仍然在与文本宽度之一纠缠不清，然后覆盖矩形线？请在此处查看pdf...![原始PDF](../Images/0f3397f2fccea8a7e84974eb5c28af32.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:02:35.830

当试图重现该问题时，事实证明当前的 PDFBox 1.7.1 正确呈现了[图像](http://i.stack.imgur.com/8mCnU.png)。该问题仅在使用旧版本 0.7.3 时出现。

因此，如果使用 Maven，请使用

```
<dependency>
    <groupId>org.apache.pdfbox</groupId>
    <artifactId>pdfbox</artifactId>
    <version>1.7.1</version>
</dependency> 
```

或此依赖项的更新版本，以防出现此类问题。

# ruby-on-rails - Rails 表单 text_field 将 UTF-8 字符编码为 ASCII HTML 代码

> ID：14860312
> 
> 赞同：1
> 
> 时间：2013-02-13T18:19:57.660
> 
> 标签：ruby-on-rails, ruby, forms, encoding

我在使用 utf8 中的数据库表字符集的 Rails 2.3.16 和 Ruby 1.8.7。

我有一个 O'Dell 的 DB 值，当我以如下形式显示它时：

```
<%= form.text_field :last_name %>
<%= form.object.last_name %> 
```

表单中页面上的输出变为： `O&#x27;Dell`和`O'Dell`

在控制台中：

```
>> order.customer.last_name
=> "O'Dell" 
```

我的环境中没有定义编码，但这似乎不是 Rails 2.3.8 的问题，我刚刚升级并且似乎遇到了这个问题。

有没有一种简单的方法可以解决这个问题，这是否与从 2.3.8 到 2.3.16 的补丁版本更改有关？

我知道可能的解决方案可能如下所示：

```
config/initializers/string.rb: 

class String 
  def utf8 
    return force_encoding('utf-8') 
  end 
end 

class NilClass 
  def utf8 
    return nil 
  end 
end 

_form.html.erb: 

<%= f.text_area :field, :value => @obj.field.utf8 %> 
```

但这是非常骇人听闻的，并且需要对您将遇到这些编码问题的每个领域进行 hack，我在 Rails 2.3.8 上没有任何类似的问题，所以我真的希望我不必这样做。另外，我希望我不必为了这个问题而升级 Ruby。

我可以确保编码在表单中正确显示的最佳方法是什么？

# r - voronoi 镶嵌中的层次结构

> ID：14860313
> 
> 赞同：4
> 
> 时间：2013-02-13T18:20:01.187
> 
> 标签：r, plot, scaling, delaunay, voronoi

我正在使用 voronoi 镶嵌。我有不同的多边形代表镶嵌中的区域。

下面的点用于绘制图中的镶嵌。

```
tessdata
    [,1]       [,2]
1  -0.4960583 -0.3529047
2  -2.4986929  0.8897895
3   3.6514561 -1.3533369
4  -1.7263101 -5.5341202
5   2.2140143  0.3883696
6  -2.5208933 -1.4881461
7  -3.2556913  4.4535629
8   0.6423109 -2.8350062
9  -0.4160715  1.2676151
10  4.4059361  4.5641771 
```

使用`tessdata`作为输入来绘制曲面细分，如下所示：

```
library(deldir)
dd<-deldir(tessdata[,1], tessdata[,2])
plot(dd,wlines="tess") 
```

![在此处输入图像描述](../Images/87ee3ba98e539f9c9aff48f9a5b09d67.png)

Sammon坐标如下。

```
 [,1]        [,2]
1   3.14162704 -1.45728604
2   2.35422623  2.46437927
3  -0.85051049  2.71503294
4   1.94310458 -0.45936958
5   0.08737757  3.74324701
6   1.23007799  1.34443842
7   0.01571924  2.19322032
8   1.43320754  2.64818631
9  -0.05463431  0.66980876
10   1.51344967  5.03351176 
```

我想构建输入 sammon 坐标点的镶嵌。使用这些点的镶嵌应该在图中所示的区域之一内，为此，上述点应该被缩放，或者我们可以将镶嵌的图限制在上图中的区域之一内。

希望我已经涵盖了所有必要的数据。

PS：

sammon 的投影采用“MASS”包。“deldir”包中的 voronoi 镶嵌。

deldir 函数输出的 dirsgs 参数将给出在镶嵌中形成线的点的坐标。

包 graphics 的segments 功能可用于连接从dirsgs 中提取坐标的2 个点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T23:09:30.757

如果您想将第二组点限制为镶嵌的其中一个瓦片，您可以使用`tile.list`对每个瓦片进行描述，然后检查哪些点在该瓦片中（有很多函数可以做到这一点：在下面的例子，我使用`secr::pointsInPolygon`）。

```
# Sample data
x <- matrix( rnorm(20), nc = 2 )
y <- matrix( rnorm(1000), nc=2 )

# Tessellation
library(deldir)
d <- deldir(x[,1], x[,2])
plot(d, wlines="tess")

# Pick a cell at random 
cell <- sample( tile.list(d), 1 )[[1]]
points( cell$pt[1], cell$pt[2], pch=16 )
polygon( cell$x, cell$y, lwd=3 )

# Select the points inside that cell
library(secr)
i <- pointsInPolygon(
  y, 
  cbind( 
    c(cell$x,cell$x[1]), 
    c(cell$y,cell$y[1])
  )
)
points(y[!i,], pch=".")
points(y[i,], pch="+")

# Compute a tessellation of those points
dd <- deldir(y[i,1], y[i,2])
plot(dd, wlines="tess", add=TRUE) 
```

![另一个镶嵌的单元内的镶嵌](../Images/37fe7c38e0b4990d800bb17177aa6c05.png)

相反，如果您想平移和重新缩放点以使其适合图块，那就更棘手了。

我们需要以某种方式估计点与瓦片的距离：为此，让我们定义一些辅助函数来计算，首先是从点到线段的距离，然后是从点到多边形的距离。

```
distance_to_segment <- function(M, A, B) {
  norm <- function(u) sqrt(sum(u^2))
  lambda <- sum( (B-A) * (M-A) ) / norm(B-A)^2
  if( lambda <= 0 ) {
    norm(M-A)
  } else if( lambda >= 1 ) {
    norm(M-B)
  } else {
    N <- A + lambda * (B-A)
    norm(M-N)
  }
}
A <- c(-.5,0)
B <- c(.5,.5)
x <- seq(-1,1,length=100)
y <- seq(-1,1,length=100)
z <- apply(
  expand.grid(x,y), 
  1, 
  function(u) distance_to_segment( u, A, B )
)
par(las=1)
image(x, y, matrix(z,nr=length(x)))
box()
segments(A[1],A[2],B[1],B[2],lwd=3)

library(secr)
distance_to_polygon <- function(x, poly) {
  closed_polygon <- rbind(poly, poly[1,])
  if( pointsInPolygon( t(x), closed_polygon ) )
    return(0)
  d <- rep(Inf, nrow(poly))
  for(i in 1:nrow(poly)) {
    A <- closed_polygon[i,]
    B <- closed_polygon[i+1,]
    d[i] <- distance_to_segment(x,A,B)
  }
  min(d)
}
x <- matrix(rnorm(20),nc=2)
poly <- x[chull(x),]
x <- seq(-5,5,length=100)
y <- seq(-5,5,length=100)
z <- apply(
  expand.grid(x,y), 
  1, 
  function(u) distance_to_polygon( u, poly )
)
par(las=1)
image(x, y, matrix(z,nr=length(x)))
box()
polygon(poly, lwd=3) 
```

我们现在可以寻找形式的转换

```
x --> lambda * x + a
y --> lambda * y + b 
```

最小化到多边形的（平方和）距离。这实际上是不够的：我们很可能最终得到比例因子 lambda 等于（或接近）零。为了避免这种情况，如果 lambda 很小，我们可以添加一个惩罚。

```
# Sample data 
x <- matrix(rnorm(20),nc=2)
x <- x[chull(x),]
y <- matrix( c(1,2) + 5*rnorm(20), nc=2 )
plot(y, axes=FALSE, xlab="", ylab="")
polygon(x)

# Function to minimize:
# either the sum of the squares of the distances to the polygon, 
# if at least one point is outside, 
# or minus the square of the scaling factor.
# It is not continuous, but (surprisingly) that does not seem to be a problem.
f <- function( p ) {
  lambda <- log( 1 + exp(p[1]) )
  a <- p[2:3]
  y0 <- colMeans(y)
  transformed_points <- t( lambda * (t(y)-y0) + a )
  distances <- apply(
    transformed_points, 
    1, 
    function(u) distance_to_polygon(u, x)
  )
  if( all(distances == 0) ) - lambda^2
  else                      sum( distances^2 )
}
# Minimize this function
p <- optim(c(1,0,0), f)$par
# Compute the optimal parameters
lambda <- log( 1 + exp(p[1]) )
a <- p[2:3]
y0 <- colMeans(y)
# Compute the new coordinates
transformed_points <- t( lambda * (t(y)-y0) + a )
# Plot them
segments( y[,1], y[,2], transformed_points[,1], transformed_points[,2], lty=3 )
points( transformed_points, pch=3 )
library(deldir)
plot( 
  deldir( transformed_points[,1], transformed_points[,2] ), 
  wlines="tess", add=TRUE 
) 
```

![移动和重新缩放一组点以将它们放在多边形内](../Images/4ac9ccdacaa6a6bd6cc8e6b9219920ef.png)

# sql-server - SQL Server 2000 截断死锁

> ID：14860322
> 
> 赞同：0
> 
> 时间：2013-02-13T18:20:22.787
> 
> 标签：sql-server, stored-procedures, sql-server-2000, bcp, database-deadlocks

我们目前在 SQL Server 2000 上运行一个数据库。该数据库不断地从平面文件中导入数据以供以后查询。此过程由一系列 SQL Server 存储过程完成，并`BCP`通过`xp_cmdshell`. 脚本用于`BCP`将平面文件读入同一服务器上辅助数据库中的持久表中。然后脚本将从导入数据库表中提取数据并将其放入经过规范化并用于查询的真实数据库中。

通常，此导入过程需要 5-10 分钟，具体取决于文件的大小。然而，在过去的一周里，它已经花费了 50-60 分钟。我们已尝试逐步完成这些程序。我们注意到，一旦我们创建了一个临时表，我们就无法`tempdb`从另一个查询窗口进行查询。但更重要的是，什么时候可以逐步完成，直到我们截断第一个导入表。我们允许 truncate 执行，然后当我们使用 检查数据库中的锁时`sp_lock`，我们看到 truncate 获取的锁没有被释放。然后我们允许`xp_cmdshell`调用`BCP`执行，它将坐在那里。我们查看 CPU 和 I/O 并发现当过程卡在调用 BCP 时没有明显的活动。当我们尝试这个时，也没有其他已知的查询正在运行。请注意，文件本身很小；最多20行。

如果我们从单独的查询中运行`bcp`命令，`xp_cmdshell`它会正常工作，但如果我们已经执行了截断行但尚未执行`BCP`存储过程中的行，则会锁定。

所以我们的问题是为什么服务器会进入这种死锁状态，更重要的是为什么 truncate 生成的锁不会释放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:19:18.240

SQL Server 中的锁仅在存在活动事务时才被持有。您必须在调用外部 BCP 之前提交事务。否则你会遇到这个死锁。

顺便说一句，SQL Server 无法检测到这种死锁，所以如果发生这种情况，您将永远陷入困境。

# domain-driven-design - 领域事件是否也取代了将领域服务注入实体？

> ID：14860327
> 
> 赞同：2
> 
> 时间：2013-02-13T18:20:42.810
> 
> 标签：domain-driven-design

报价[来自](http://www.udidahan.com/2009/06/14/domain-events-salvation/)

注意 - 这里我使用术语“*将服务注入实体*”来将*服务*传递给*构造函数*或将其作为*参数*传递给*方法*

*a）处理程序*和那些也由*域操作*触发但在*域*本身内处理的*动作/操作*有什么区别？也许区别在于前者（即*处理程序*，或更准确地说是它们的*动作*）不代表*领域概念*，而后者代表*领域概念*？

 ***b)

> 您*不需要*向域实体中注入任何内容。

*引入域事件*的原因是我们不必将*服务*注入*域实体*。但是由于将*域服务* **DS**注入*实体*也不是很理想，在这种情况下，*处理程序*（即它们的*操作*）不能成为*域概念*（即，*处理程序不是将***DS**注入*实体*，而是调用此**DS**）？

 ***c）如果确实*处理程序*也可以替换将**DS**注入*域实体*，是否还有*处理程序*可以替换**DS**本身的情况？

d)

> 处理程序类不属于域模型。

*处理程序*是否属于*基础设施层*？那些调用**DS的***处理程序*呢？

 ****更新：**

一种）

> 主要区别是域事件处理程序是在事后调用的。

但是*操作***OP**触发的*操作/操作* **A**（我们在*域中*而不是在*处理程序*中处理的操作）也可能在事后发生（即在**OP**完成之后）。所以我们不能争论这些之间的主要区别吗*两种类型的动作*是**A**代表一个*领域概念*，而那些由*处理程序执行的**动作*不代表*领域概念*？

 *********b）只是为了确定-所以我最初的问题的答案是，在某些情况下，我们可以让*处理程序*调用适当的**DS ，而不是***实体*调用**DS**吗？

 ***C）

> 在上述情况下，领域事件可以消除对领域服务的需求

**那么对c)**的回答是在某些情况下*处理程序*确实可以替换**DS**吗？但如果是这样，我们难道不能争辩说在这种情况下*处理程序*（即他们的*动作*）是*领域概念*吗？

d)

> 处理程序实际上并不是您的域的一部分，因为它们所做的只是委托给适当的基础设施服务或域服务。它们只是一种胶水形式，类似于应用程序服务。它们仍然可以在域项目中声明，但通常不需要。

一世。

> 处理程序实际上并不是您的域的一部分，因为它们所做的只是委托给适当的基础设施服务或域服务。

只是为了确定-我假设“委托给”您的意思是，我们将调用特定*服务*的工作委托给*处理程序，而不是**实体*调用适当的**DS**或*基础设施服务*？

 **二、

> 它们仍然可以在域项目中声明，但通常不需要。

正如您在**c)**中所指出的，在某些情况下，*处理程序*可以替换**DS**本身（即它们不调用**DS**，但实际上它们自己执行所需的*操作*）。在这种情况下，我们不能说*处理程序*是*领域概念*，因此属于*领域层*吗？！

**第二次更新：**

D-II

> > 正如您在 c) 中所指出的，在某些情况下，处理程序可以替换 DS 本身（即它们不调用 DS，但实际上它们自己执行所需的操作）。在这种情况下，我们不能说处理程序是领域概念，因此属于领域层吗？！
> 
> 在这些情况下，我会说处理程序有两个职责 - 连接事件和执行操作。接线部分不是域概念，但操作本身是。

a) 那么在这些情况下，*处理程序*会违反 SRP 吗？

b)

> 接线部分不是域概念，但操作本身是。

在这种情况下应该将*处理程序*放入*域层*吗？

2）假设*动作* **A**返回一个*值*，我们如何决定是否通过*注入来执行***A**更好（注意 - 这里我使用术语“*将服务注入实体*”来将*服务*传递给*构造函数*或将其*作为方法的参数*）*服务***S**（它反过来执行**A**）到一个*实体*或使用*域事件*代替（这反过来会调用**S**上的*方法*）？

 *********也许决定取决于某些*域代码*是否需要*A*的结果进行进一步*处理*？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T18:35:41.430

a) 主要区别在于域事件处理程序是在事后调用的。该事件已经发生并且是不可变的。因此，被处理者只能对已经发生的事情做出反应。此外，处理程序可能会导致不属于源实体责任的行为，例如发送电子邮件。

b) 领域事件是一种确保更大程度的封装和解耦的模式。例如，可以通过几种方式实现在某些操作之后应该发送电子邮件的事实。一种方法是将电子邮件服务传递给实体。然后，该实体将在需要时调用电子邮件服务。另一种方法是让调用应用程序服务调用电子邮件服务。第一种方法的问题是，现在实体与电子邮件服务耦合并且违反了 SRP - 域现在正在处理技术问题。第二种方法的问题在于，它将知道何时发送电子邮件的责任放在了应用程序服务上。领域事件解决了这两个问题，因为现在实体决定事件何时发生，处理程序决定如何处理事件。

c) 领域事件可以在上述情况下消除对领域服务的需求，但是它们并不能在所有情况下都消除对领域服务的需求。在某些情况下，实体可能首先需要域服务才能调用行为。这是领域事件无能为力的地方，因为它们只解决事后的情况。

d) 处理程序实际上并不是您的域的一部分，因为它们所做的只是委托给适当的基础设施服务或域服务。它们只是一种胶水形式，类似于应用程序服务。它们仍然可以在域项目中声明，但通常不需要。

**更新**

a) 情况并非总是如此。域事件处理程序调用另一个域操作是可以接受的。这是在单个进程中进行事件驱动架构的一种方式。

b) 是的，域事件处理程序可以调用域服务。让处理程序调用域服务来响应事件是一种以解耦方式向实体添加行为的方法——[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)的一种形式。

c) 通常，处理程序会委托某些东西来执行域操作。处理程序本身只是粘合剂。但是，您可以将域逻辑放入处理程序中，在这种情况下，它会像域服务一样工作。

d1) 是的。处理程序将是一个简单的类，其构造函数依赖于某些服务。当它处理一个事件时，它会调用所述服务上的适当方法。

d2）在这些情况下，我会说处理程序有两个职责 - 连接事件和执行操作。接线部分不是域概念，但操作本身是。

**更新 2**

a) 是的，我会这么说。根据您的域事件的实现方式，处理程序可能只是一个 lambda - 它不需要是一个类。

b) 如果处理程序委托给领域服务，那么它可以进入领域层。如果它使用基础设施服务，它可能需要进入基础设施层。此外，如 a) 中所述，处理程序不必是类，它可以是 lambda。

2）域事件是在域中发生的值得注意的*事情*。使用域事件，您可以在其中设想订阅者对该事件感兴趣。此事件可用于调用域中的其他行为或在外部发布。主要观察结果是它是过去时不变的事件。

> 也许决定取决于某些域代码是否需要 A 的结果进行进一步处理？

这是真的。如果域操作需要域服务 S 的结果才能继续执行其行为，则应将该服务传递给该行为方法。实体无法接收已发布域事件的处理结果。*******************************

# sql-server - 带有 SQL_VARBINARY(MAX) 的 SQLBindParameter 给出“无效的精度值”

> ID：14860330
> 
> 赞同：3
> 
> 时间：2013-02-13T18:20:52.530
> 
> 标签：sql-server

使用 C++ 代码，我正在尝试使用存储过程将大型二进制 blob 插入 MS SQL 服务器。我要插入的表有 5 列，类型：

```
int
varchar
datetime
varbinary(max)
datetime 
```

存储过程有 4 个参数：

```
PROCEDURE [dbo].[spr_fff] 
     @act           AS INT
    ,@id            AS VARCHAR(255)
    ,@timestamp     AS DATETIME
    ,@blob          AS VARBINARY(MAX) 
```

我设置了我的声明（检查我没有显示的返回值）：

```
const std::string queryString("{Call [spr_fff](?,?,?,?)}");
SQLHSTMT handle = NULL;
SQLAllocHandle(SQL_HANDLE_STMT, m_hConn, &handle);
SQLPrepare(handle, (SQLCHAR *)queryString.c_str(), SQL_NTS); 
```

我绑定前三个参数没有问题，但我似乎无法弄清楚如何绑定第四个参数。代码本质上是：

```
std::string sData; getData(sData);  //fills sData with the binary data
SQLLEN len1 = ???;
SQLBindParameter( handle, (SQLUSMALLINT)4, SQL_PARAM_INPUT, SQL_C_BINARY, SQL_VARBINARY, len1, 0, (SQLCHAR*)&sData.c_str(), (SQLLEN)sData.size(), NULL); 
```

诀窍似乎是弄清楚 len1 应该是什么。如果`sData.size() < 8000`, 则`len1 = sData.size()`工作正常。但是，如果`sData.size() > 8000`，似乎没有任何效果。如果我设置`len1 = sData.size()`, 或`len1 = 2147483647`调用`SQLBindParameter`导致错误代码“无效的精度值”。如果我设置`len1 = 0`为一些（可怕的）文档似乎建议，调用`SQLBindParameter`工作（对于 2008 本机驱动程序），但执行语句会导致大小为 2 的 blob，即所有输入 blob 的两个默认 0 字节数据被截断为 0 字节。我已经尝试了所有这些组合以及下面列出的所有客户端驱动程序，但都无济于事。我究竟做错了什么？？？？？

环境
客户端操作系统：Windows XP sp3

SQL Server 是
Microsoft SQL Server 09.00.3042

尝试使用的 SQL 客户端：
Microsoft SQL Server Native Client 版本 10.00.5500 (sqlncli10.dll, 2007.100.5500.00)
Microsoft SQL Native Client 版本 09.00.5000 (sqlncli.dll, 2005.90.5000.00)
Microsoft SQL Server ODBC 驱动程序版本 03.85.1132 (sqlsrv32 .dll 2000.85.1132.0)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T05:26:53.257

好的，我的问题的答案实际上是我在调用`SQLBindParameter`. 如果您查看我上面的代码，我将最终参数设置为 NULL。仔细阅读文档 - 相信我，它需要仔细阅读！- 表明如果最终参数为 NULL，则数据被视为以零结尾。（[文档`SQLBindParameter`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms710963%28v=vs.85%29.aspx#sectionToggle12)说“如果 StrLen_or_IndPtr 是空指针，则驱动程序假定所有输入参数值都是非空的**，并且字符和二进制数据以空终止**.” - 强调我的）而且，不幸的是，我提供的数据的第二个或第三个字节为零，因此实际存储的 blob 只有 1 或 2 个字节。不知道为什么它的大小小于8000 - size<8000 和各种驱动程序版本可能存在一些相互作用，但我没有花时间梳理一下。

此外，在上面的代码中，我声明“如果我设置`len1 = 0`为某些（可怕的）文档似乎建议”。这实际上是正确的做法。

因此正确的代码是

```
SQLLEN len1 = 0;
SQLLEN nThisLen = (SQLLEN)sData.size();
SQLBindParameter( handle, (SQLUSMALLINT)4, SQL_PARAM_INPUT, SQL_C_BINARY, SQL_VARBINARY, len1, 0, (SQLCHAR*)&sData.c_str(), nThisLen, &nThisLen ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:24:23.597

Jeff O 走在了正确的轨道上。尝试将存储过程更改为...

```
PROCEDURE [dbo].[spr_fff] 
    @act           AS INT
    ,@id           AS VARCHAR(255)
    ,@timestamp    AS DATETIME
    ,@preblob      AS nvarchar(MAX)

    DECLARE @blob varbinary(MAX) = CAST(@preblob as varbinary(MAX))
    /* Continue using varbinary blob as before */ 
```

请注意 sproc 的参数数据类型的更改以及随后转换为 varbinary。

干杯。

# javascript - 手动触发无限滚动

> ID：14860335
> 
> 赞同：0
> 
> 时间：2013-02-13T18:21:05.117
> 
> 标签：javascript, wordpress, infinite-scroll

我正在使用以下代码在同位素砌体上触发无限滚动，但是如何使用“单击加载更多帖子”而不是“手动触发”。我尝试从互联网上的解决方案中实施，但它们对我不起作用。谢谢。

```
/*--------------------------------------------------------------------------------*/
/*  infinitescroll
/*--------------------------------------------------------------------------------*/
jQuery(document).ready(function($) {
    var $container = $('.masonry');
    $container.imagesLoaded( function(){
    $container.isotope({
        itemSelector : '.item'
    });   
});
$container.infinitescroll({
        // selector for the paged navigation
        navSelector  : '.post-nav',     
        // selector for the NEXT link (to page 2)
        nextSelector : '.post-nav .prev-post a',  
        // selector for all items you'll retrieve
        itemSelector : '.item',     
        loading: {
            finishedMsg: 'No more pages to load.',
            img: 'http://i.imgur.com/qkKy8.gif'
        }
    },
    function( newElements ) {
        var $newElems = $( newElements ).css({ opacity: 0 });
        $newElems.imagesLoaded(function() {
            $newElems.animate({ opacity: 1 });
            $container.isotope( 'appended', $( newElements ) ); 
            $container.isotope('reLayout');
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T18:48:49.197

假设您正在使用[**这个插件**](http://www.infinite-scroll.com/)，以下应该可以手动触发检索：

```
$container.infinitescroll('retrieve'); 
```

# c# - 每个抽象基类的 IList 的具体类映射的流利的休眠表

> ID：14860337
> 
> 赞同：0
> 
> 时间：2013-02-13T18:21:16.517
> 
> 标签：c#, fluent-nhibernate, nhibernate-mapping

我有一个抽象基类和 2 个派生类。我还有一个 OwnerClass，它包含一个`IList`BaseClass 类型。

我根据 Table Per Concrete Class (TPC) 模型映射了类：（如果我的代码中有语法错误，请原谅我，我在记事本上重新编写了我的代码，因为我的真实代码目前无法访问）

```
public class BaseClassMap : ClassMap<BaseClass>
{
    public BaseClassMap()
    {
        // ID + Fields Mapping... 

        UseUnionSubClassForInheritanceMapping(); 
    }
}

public class DerivedClass1Map : SubclassMap<DerivedClass1>
{
    public DerivedClass1Map()
    {
        // Fields Mapping...
    }
}

public class DerivedClass2Map : SubclassMap<DerivedClass2>
{
    public DerivedClass1Map()
    {
        // Fields Mapping...
    }
}

public class OwnerClassMap : ClassMap<OwnerClas>
{
    public OwnerClassMap()
    {
        // ID + Fields Mapping...

        HasMany(x => x.BaseClassList).Cascade().All();

        // Option 2 - Using Inverse:
        // HasMany(x => x.BaseClassList).Cascade().All().Inverse();
    }
} 
```

我将 nhibernate 配置为通过映射为我创建表。为每个 DerivedClass 创建一个表，其中包含一个名为“Owner_Id”的新列。正如我所料，对于抽象 BaseClass 没有创建表。

我创建了一些 BaseClasses 对象并用（新的）DerivedClass1 和 DerivedClass2 填充它们。我创建了一个 Owner 对象并将 BaseClasses 对象添加到它的列表中。

当我尝试保存 Owner 对象时，我得到

> GenericADOException: 无法插入集合... SQL: UPDATE BaseClass...

我很惊讶地看到它试图访问一个名为“BaseClass”的表，因为没有这样的表！

我在 OwnerClass 映射中尝试了选项 2 - 添加 Inverse()。当我保存 Owner 对象时，结果是所有者对象保存在 Owner 表中，而 DerivedClasses 对象保存在它们的表中，但它们的“Owner_Id”列没有值。

为什么我需要使用 Inverse()？更重要的是，为什么“Owner_Id”列中没有值？

# c++ - I/O 文件流 C++

> ID：14860340
> 
> 赞同：1
> 
> 时间：2013-02-13T18:21:19.177
> 
> 标签：c++

```
#include <iostream>
#include <string>
#include <cstring>
#include <fstream>
using namespace std;

int main() 
{

    string temp;

    ifstream inFile;
    ofstream outFile;

    inFile.open("ZRMK Matched - 010513.txt");
    outFile.open("second.txt");

    while(!inFile.eof()) {  

        getline(inFile, temp);
        if (temp != "") {
            getline(inFile, temp);
            outFile << temp;
        }
    }

    cout << "Data Transfer Finished" << endl;

    return 0;
} 
```

我很难让这个工作。当我执行程序时，它会循环一段时间，然后在没有完成的情况下终止——它不会将任何文本行输出到输出文件。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T18:35:55.113

你想复制每一行吗？

```
while(std::getline(inFile, temp)) {
  outFile << temp << "\n";
} 
```

您是否要复制每个非空白行？

```
while(std::getline(inFile, temp)) {
  if(temp != "")
    outFile << temp << "\n";
} 
```

您是否要复制每第二个非空白行？

```
int count = 0;
while(std::getline(inFile, temp)) {
  if(temp == "")
    continue;
  count++;
  if(count % 2)
    outFile << temp << "\n";
} 
```

您只是想复制整个文件吗？

```
outFile << inFile.rdbuf(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:50:12.533

您应该使用一种模式来打开文件：请参阅[std::ios_base::openmode](http://www.cplusplus.com/reference/ios/ios_base/openmode/)
并且不要忘记关闭您打开的流！
如果发生异常，您甚至可以尝试捕获您的代码以了解问题。

```
#include <string>
#include <fstream>
#include <iostream>

using namespace std;

int main() 
{
    try {
        fstream inFile;
        fstream outFile;

        // open to read
        inFile.open("ZRMK Matched - 010513.txt", ios_base::in); 
        if (!inFile.is_open()) {
            cerr << "inFile is not open ! " << endl;
            return EXIT_FAILURE;
        }

        // Open to append
        outFile.open("second.txt", ios_base::app); 
        if (!inFile.is_open()) {
            cerr << "inFile is not open ! " << endl;
            return EXIT_FAILURE;
        }

        string line;
        while(getline(inFile, line)) {  
            if (!line.empty()) {
                outFile << line << endl;
            }
        }

        if (outFile.is_open()) {
            outFile.close(); // Close the stream if it's open
        }
        if (inFile.is_open()) {
            inFile.close(); // Close the stream if open
        }

        cout << "Data Transfer Finished" << endl;
        return EXIT_SUCCESS;

    } catch (const exception& e) {
        cerr << "Exception occurred : " << e.what() << endl;
    }

    return EXIT_FAILURE;
} 
```

# grails - 在 BuildConfig 中定义数据库迁移插件时出错

> ID：14860344
> 
> 赞同：-1
> 
> 时间：2013-02-13T18:21:43.960
> 
> 标签：grails, grails-plugin, database-migration, buildconfig

我尝试遵循建议的良好做法并将插件放入`BuildConfig.groovy`而不是`application.properties`，不适用于数据库迁移。我试过用`compile`,`build`和的范围来定义它`runtime`。当我运行时`grails refresh-dependencies`，我收到以下错误消息：

> 错误警告：指定的依赖定义运行时（数据库迁移：1.3.2）无效！跳过..

（当然，消息中的范围随指定的范围而变化）。我应该使用另一个范围，还是这个插件在某种程度上是特殊的？很遗憾，该消息没有说明哪些范围是有效的——这样我就不必问这个问题了 :-)

我只想使用 IDE 中的插件来生成 xml 文件，所以我想将它从 war 文件中排除。如果所需范围默认包含它，这就是“export=false”的含义吗？

不得不承认，我找不到各种范围的明确定义，什么范围包括什么。有人可以指点我吗？

我应该补充一点，这是 Grails 2.1.1 和 GGTS 3.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:25:16.530

我刚刚发现了我的错误。我没有注意到插件名称前有一个冒号。我有：

```
runtime("database-migration:1.3.2") 
```

我应该写的是：

```
runtime(":database-migration:1.3.2") 
```

'Duh!' 的组合 多么奇怪的语法，每个术语前都需要一个冒号。哦，原来如此。让我想起了黑暗时代的一位客户，当时一群人正在研究一个行为不端的 Cobol 程序，但没有人知道原因。尽管我几乎不认识 Cobol，但我还是偷看了一眼。我突然指出，在“if”语句之后和“else”之前缺少句号。至少一个冒号有两个句号，所以我可能不得不承认我的视力不是原来的样子......

# oracle - 尝试将数据插入数据库时 出错（Spring 和 Hibernate）

> ID：14860348
> 
> 赞同：0
> 
> 时间：2013-02-13T18:21:51.047
> 
> 标签：oracle, spring, hibernate

这是错误

```
 HTTP Status 500 - Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: Could not execute JDBC batch update; SQL [insert into links (category, xdate, desc, tags, xtime, tittle, url, id) values (?, ?, ?, ?, ?, ?, ?, ?)]; nested exception is org.hibernate.exception.SQLGrammarException: Could not execute JDBC batch update

type Exception report

message Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: Could not execute JDBC batch update; SQL [insert into links (category, xdate, desc, tags, xtime, tittle, url, id) values (?, ?, ?, ?, ?, ?, ?, ?)]; nested exception is org.hibernate.exception.SQLGrammarException: Could not execute JDBC batch update

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: Could not execute JDBC batch update; SQL [insert into links (category, xdate, desc, tags, xtime, tittle, url, id) values (?, ?, ?, ?, ?, ?, ?, ?)]; nested exception is org.hibernate.exception.SQLGrammarException: Could not execute JDBC batch update
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:659)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:563)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

root cause

org.springframework.dao.InvalidDataAccessResourceUsageException: Could not execute JDBC batch update; SQL [insert into links (category, xdate, desc, tags, xtime, tittle, url, id) values (?, ?, ?, ?, ?, ?, ?, ?)]; nested exception is org.hibernate.exception.SQLGrammarException: Could not execute JDBC batch update
    org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:629)
    org.springframework.orm.hibernate3.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:793)
    org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:664)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:412)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    com.killerlinks.controllers.LinkformController.save(LinkformController.java:37)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doInvokeMethod(HandlerMethodInvoker.java:710)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:167)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:414)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:402)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:563)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

root cause

org.hibernate.exception.SQLGrammarException: Could not execute JDBC batch update
    org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
    org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:253)
    org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:266)
    org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:167)
    org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
    org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
    org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
    org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)
    org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
    org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:412)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    com.killerlinks.controllers.LinkformController.save(LinkformController.java:37)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doInvokeMethod(HandlerMethodInvoker.java:710)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:167)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:414)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:402)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:563)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

root cause

java.sql.BatchUpdateException: ORA-01747: invalid user.table.column, table.column, or column specification

    oracle.jdbc.driver.DatabaseError.throwBatchUpdateException(DatabaseError.java:343)
    oracle.jdbc.driver.OraclePreparedStatement.executeBatch(OraclePreparedStatement.java:10657)
    org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)
    org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:246)
    org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:266)
    org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:167)
    org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
    org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
    org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
    org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)
    org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
    org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:412)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:118)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    com.killerlinks.controllers.LinkformController.save(LinkformController.java:37)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.doInvokeMethod(HandlerMethodInvoker.java:710)
    org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:167)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:414)
    org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:402)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:771)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:716)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:647)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:563)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.33 logs.
Apache Tomcat/7.0.33 
```

我的道课是

```
package com.killerlinks.dao;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;

import com.killerlinks.model.Linkform;

@Repository
public class LinkformDaoImpl implements LinkformDao
{
    @Autowired
    SessionFactory sessionFactory;

    public void insertLink(Linkform linkform)
    {
        System.out.println(linkform.getTittle());
        System.out.println(linkform.getUrl());
        System.out.println(linkform.getCategory());
        System.out.println(linkform.getDesc());
        System.out.println(linkform.getTags());
        System.out.println(linkform.getDate());
        System.out.println(linkform.getTime());

        sessionFactory.getCurrentSession().saveOrUpdate(linkform);
    }

} 
```

当我不插入数据库时​​，Println 语句工作正常。

```
sessionFactory.getCurrentSession().saveOrUpdate(linkform); 
```

当我在上面的程序中使用这个语句时，我得到了错误。

我的豆类是

```
package com.killerlinks.model;

import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
    @Table(name="links")
    public class Linkform implements Serializable
    {
    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    @Column(name="id")
    private Long id;
    @Column(name="tittle")
    private String tittle;
    @Column(name="desc")
    private String desc;
    @Column(name="url")
    private String url;
    @Column(name="category")
    private String category;
    @Column(name="xdate")
    private String date;
    @Column(name="xtime")
    private String time;
    @Column(name="tags")
    private String tags;

    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }
    public String getTittle() {
        return tittle;
    }
    public void setTittle(String tittle) {
        this.tittle = tittle;
    }
    public String getDesc() {
        return desc;
    }
    public void setDesc(String desc) {
        this.desc = desc;
    }
    public String getUrl() {
        return url;
    }
    public void setUrl(String url) {
        this.url = url;
    }
    public String getCategory() {
        return category;
    }
    public void setCategory(String category) {
        this.category = category;
    }
    public String getDate() {
        return date;
    }
    public void setDate(String date) {
        this.date = date;
    }
    public String getTime() {
        return time;
    }
    public void setTime(String time) {
        this.time = time;
    }
    public String getTags() {
        return tags;
    }
    public void setTags(String tags) {
        this.tags = tags;
    }

    @Override
    public String toString()
    {
        return "Linkform [tittle=" + tittle + ", url=" + url + ", category="+ category +", tags="+ tags +", desc="+ desc +"]";
    }
} 
```

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:18:10.067

列名`desc`无效，因为它是 Oracle 中的尊词。解决方案是为列使用其他名称。

# python - Python 数据在两个不同的数组中随机丢失。希望将这些组合成一个数组

> ID：14860349
> 
> 赞同：1
> 
> 时间：2013-02-13T18:21:52.913
> 
> 标签：python, r, random, numpy, nan

我最近开始使用 Python（并且也开始研究 R）。我在 R 中遇到了一个有趣的示例（复制如下以供参考），我想尝试看看我是否可以在 Python 中实现（不使用 rpy 或 Pandas ETC。）。

R 代码示例

```
# Goal:
#       A stock is traded on 2 exchanges.
#       Price data is missing at random on both exchanges owing to non-trading.
#       We want to make a single price time-series utilising information
#       from both exchanges. I.e., missing data for exchange 1 will
#       be replaced by information for exchange 2 (if observed).
# Let's create some example data for the problem.
e1 <- runif(15)                         # Prices on exchange 1
e2 <- e1 + 0.05*rnorm(15)               # Prices on exchange 2.
cbind(e1, e2)
# Blow away 5 points from each at random.
e1[sample(1:15, 5)] <- NA
e2[sample(1:15, 5)] <- NA
cbind(e1, e2)
# Now how do we reconstruct a time-series that tries to utilise both?
combined <- e1                          # Do use the more liquid exchange here.
missing <- is.na(combined)
combined[missing] <- e2[missing]        # if it's also missing, I don't care.
cbind(e1, e2, combined) 
```

我试过了

```
import numpy as np 
e1=np.random.random((15,)).reshape(-1,1)
e2=e1+0.05*np.random.standard_normal(15).reshape(-1,1)
np.concatenate((e1,e2),axis=1) # cbind equivalent on two vectors 
```

我还没有设法做下一部分，即

```
# Blow away 5 points from each at random 
```

我确实尝试了 python 的`np.random.random_sample`命令，但根本无法让它工作。
我非常感谢您在本节和最后一节的帮助，即重建试图利用上述两个数据数组的时间序列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:48:12.567

您可以使用“随机”包

```
import numpy as np 
import random
e1=np.random.random((15,)).reshape(-1,1)
e2=e1+0.05*np.random.standard_normal(15).reshape(-1,1)
e1[random.sample(range(e1.shape[0]), 5),:] = np.nan
e2[random.sample(range(e2.shape[0]), 5),:] = np.nan
np.concatenate((e1,e2),axis=1) 
```

# ember.js - ember 数据计算属性不适用于嵌套关联

> ID：14860352
> 
> 赞同：3
> 
> 时间：2013-02-13T18:21:59.500
> 
> 标签：ember.js, ember-data

我有一个简单的数据模型：

一条腿，有很多玩家，有很多回合：

```
App.Store = DS.Store.extend({
  revision: 11,
  adapter: 'DS.FixtureAdapter'
});

App.Leg = DS.Model.extend({
  players: DS.hasMany('App.Player'),
  turnCount: function() {
    var i = 0;
    this.get('players').forEach(function(p) {
      i+= p.get('turns.length');
    });
    return i;
  }.property('players.@each.turns.length')

});

App.Player = DS.Model.extend({
  leg: DS.belongsTo('App.Leg'),
  turns: DS.hasMany('App.Turn')
});

App.Turn = DS.Model.extend({
  player: DS.belongsTo('App.Player')
}); 
```

当我创建一个新的转弯时，计算的属性`turnCount`不会自动更新，但它应该，对吧？

```
/*
* do this on the console to verify
*/

var leg = App.Leg.createRecord();
var player = leg.get('players').createRecord();

leg.get('turnCount');
// => 0
player.get('turns').createRecord();
leg.get('turnCount')
// => 0 
```

**更新**

似乎如果你坚持一层嵌套的东西就可以了。所以：

```
.property('players.@each.someProperty') 
```

只要 someProperty 不是可枚举的，就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T17:53:59.877

Try this:

```
.property('players.@each.turns.@each') 
```

You could also use the [`reduce`](http://emberjs.com/api/classes/Ember.Enumerable.html#method_reduce) method to calculate totals:

```
turnCount: function() {
  return this.get('players').reduce(function(value, player) {
    return value + player.get('turns.length');
  }, 0);
}.property('players.@each.turns.@each') 
```

# shell - 找不到 Enthought python 的 ipy_user_conf.py

> ID：14860354
> 
> 赞同：1
> 
> 时间：2013-02-13T18:22:02.830
> 
> 标签：shell, configuration, enthought

我有环保署。我想使用 ipython 外壳。我认为它在您的发行版中称为“pylab”。我希望能够在 shell 加载时附加到系统路径（$pythonpath）。不幸的是，我似乎找不到 ipy_user_conf.py 文件，互联网上的许多用户报告是我需要包含一行来执行此操作的地方。请帮忙！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T21:35:03.983

我猜你正在运行 IPython >= 0.11。（注意在启动 IPython shell 时会显示 IPython 版本。）

使用旧版本的 IPython（0.11 之前）`ipy_user_conf.py`，但 IPython 的配置系统在 0.11 中进行了大修。有关详细信息，请参阅[此概述](http://ipython.readthedocs.io/en/stable/config/intro.html)。如果你想在启动时运行一些代码，你可以在你的 IPython 启动目录中添加一个 python 文件，它应该在这里：

`~/.ipython/profile_default/startup/`

该目录中的任何 python 代码都会在启动时运行，因此您只需创建一个新代码`.py`来修改您的 python 路径。如果启动目录不存在，您可能需要运行：

`ipython profile create`

它创建了这些目录（加上其他一些好东西）。

# wordpress - WordPress 404 页

> ID：14860355
> 
> 赞同：1
> 
> 时间：2013-02-13T18:22:03.820
> 
> 标签：wordpress, http-status-code-404

我最近将我的网站迁移到一个新域和该域下的子目录。quivinat.com/quv1anTemp/ 我的 Wordpress 404 页面将转到一个旧页面，这似乎来自我的网站曾经所在的位置，因为它正在拉入旧标题。我做了一个测试，我修改了 404.php 但它对 404 登陆页面没有任何影响。

不知道发生了什么。

有什么建议么。

尝试输入“quivinat.com/quv1antemp/”，您会注意到标题是 HotFoot。这是我的旧标题。

.htaccess 文件如下

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /quv1anTemp/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /quv1anTemp/index.php
</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:16:01.740

在“常规”>“设置”下的仪表板中，必须更改 Wordpress URL 和站点地址才能使用新域。

# xslt - 如何从使用 XSL-FO 生成的 PDF 书签中去除 Unicode 软连字符

> ID：14860356
> 
> 赞同：1
> 
> 时间：2013-02-13T18:22:04.493
> 
> 标签：xslt, pdf-generation, xsl-fo, dita, dita-ot

我正在使用 DITA Open Toolkit 1.7 和 RenderX XEP 将 DITA 映射转换为 PDF。在 DITA 主题中，产品名称是使用 conrefs 插入的。我的一个产品名称很长。在表格中使用时会导致布局问题。因此，我在通过 conref 重用的短语中插入了一个软连字符：

```
<ph id="PD_FineReader2Comp">DOXiS4 FineReader2&#xad;Components</ph> 
```

这在生成的页面中效果很好，但在书签中会产生一个问题，其中一个符号代替软连字符显示。

![在此处输入图像描述](../Images/773c7da2e88b9b84797b029c90de3478.png)

显然，这是一个编码问题。似乎 UTF-8 字符在 PDF 内容中得到了正确处理，但在 PDF 书签中却没有，根据以下来源，可以使用一些 PDF-16 字符（但我不明白哪些字符）。

*   [http://partners.adobe.com/public/developer/en/pdf/PDFReference.pdf](http://partners.adobe.com/public/developer/en/pdf/PDFReference.pdf)
*   [http://www.setasign.de/support/tips-and-tricks/use-unicode-in-string-values/](http://www.setasign.de/support/tips-and-tricks/use-unicode-in-string-values/)

DITA Open Toolkit 似乎使用以下代码片段从主题标题创建书签：

```
 <fo:bookmark>
            <xsl:attribute name="internal-destination">
                <xsl:call-template name="generate-toc-id"/>
            </xsl:attribute>
                <xsl:if test="$bookmarkStyle!='EXPANDED'">
                    <xsl:attribute name="starting-state">hide</xsl:attribute>
                </xsl:if>
            <fo:bookmark-title>
                <xsl:value-of select="normalize-space($topicTitle)"/>
            </fo:bookmark-title>
            <xsl:apply-templates mode="bookmark"/>
        </fo:bookmark> 
```

XSL 样式表有 2.0 版。

我想创建一个删除违规字符的覆盖。我怎样才能做到这一点？

*   是否可以正确解决编码问题？（可能不可能）。
*   除了空格、制表符、换行符和回车符之外，是否有任何 XSL 函数或属性可以删除空格？
*   或者我需要对软连字符进行特殊处理吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T23:55:56.117

小细化：如果您使用的是 XSLT2，将比在此上下文中更有效。在 XSLT2 中，您应该始终更喜欢 xsl:sequence 而不是 xsl:value-of

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T18:48:52.070

执行此操作的简单方法是使用该`translate()`函数，该函数可用于将某些字符替换为其他字符，或者什么都不替换。看起来这是输出您要修复的值的行：

```
<xsl:value-of select="normalize-space($topicTitle)"/> 
```

因此，您可以简单地将其修改为：

```
<xsl:value-of select="translate(normalize-space($topicTitle), '&#xad;', '')"/> 
```

删除所有软连字符。如果您想用空格或普通连字符替换它们，您可以分别执行以下任一操作：

```
<xsl:value-of select="translate(normalize-space($topicTitle), '&#xad;', ' ')"/>
<xsl:value-of select="translate(normalize-space($topicTitle), '&#xad;', '-')"/> 
```

# php - php删除语法

> ID：14860357
> 
> 赞同：1
> 
> 时间：2013-02-13T18:22:05.940
> 
> 标签：php, html, mysql

我有一个学校作业的留言簿，现在我需要删除帖子，但只有登录用户才能删除他自己的帖子。

我该如何编写删除语法？我在想类似的事情：

```
if ($_GET['Deletebutton']) {

mysql_query("DELETE FROM guestbook WHERE $id ='PostID' AND $username='Username'");

} 
```

我在下面的页面上发布我的代码！

```
<h1>Välkommen till gästboken!</h1>
<h2>Posta till Gästboken</h2>
<form action="home.php" method="post">
    <table>
        <tr>

            <td>Titel:</td>
            <td><input type="text" name="titel" style="width: 600px;"/></td>
        </tr>

        <tr>
            <td>Inlägg:</td>
            <td><textarea name="inlägg" style="width: 600px; height: 300px;"></textarea></td>
        </tr>
        <tr>
            <td></td>
            <td><input type="submit" name="postknapp" value="Posta"/></td>
        </tr>
    </table>
</form>
<p>

    <a href="logga_ut.php">Logga ut</a>
    <?php
    session_start();
    $username = $_SESSION['username'];
    if ($_SESSION['login'] == 1) { //om sessionen är 1 så
        // Connect to the database
        mysql_connect("localhost", "root", "");
        mysql_select_db("guestbookdatabase");
//******************************************************************//
//Display stuff
        echo "<h1>Nuvarande Poster</h1>";

        if ($_POST['postknapp']) {

            $title = strip_tags($_POST['titel']);
            $message = strip_tags($_POST['inlägg']);

            if ($title && $message) {

                //Lägg till i databasen
                mysql_query("INSERT INTO guestbook (Title,Post,Username) VALUES  ('$title','$message','$username')");

                echo "Ditt inlägg har lagts till i gästboken!";
            }
            else
                echo "Du har inte fyllt i nödvändig information för att kunna göra ett inlägg.";
        }
        $query = mysql_query("SELECT * FROM guestbook ORDER BY PostID DESC");
        $numrows = mysql_num_rows($query);
        if ($numrows > 0) {
            while ($row = mysql_fetch_assoc($query)) {
                $id = $row['PostID'];
                $name = $row['Username'];
                $title = $row['Title'];
                $message = $row['Post'];
                $date = $row['Timestamp'];
                $message = nl2br($message);
                echo "<div> 
    Av <b>$name</b> vid <b>$date</b><br /> 
    <h2>$title</h2> <p>
    $message  <p>
    <div align = 'right'><input type='button' name='Raderaknapp' value='Ta bort  inlägget' />
    </div></div><hr />";

                if ($_GET['Raderaknapp']) {

                    mysql_query("DELETE FROM guestbook WHERE $id ='PostID' AND  $username='Username'");

                    echo "Inlägget har tagits bort!";
                }
            }
        }
        else
            echo "Inga inlägg hittades.";
        mysql_close();
    } else { // om session inte är 1 så 
        echo "Du har INTE tillåtelse till gästboken! Klicka på länken för att logga in!";
        ?>
    <p>
        <br/><a href="index.html">Till login >></a>
        <?php
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:27:45.130

尝试：

```
mysql_query("DELETE FROM guestbook WHERE PostID = '".$id."' AND Username = '".$name."'"); 
```

[删除文档](http://dev.mysql.com/doc/refman/5.0/en/delete.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:31:55.867

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。改为学习[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)这是[PDO 的一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

现在，如果您想继续这样做。

```
 if ($_GET['Deletebutton']) {
    $id = mysql_real_escape_string($_POST['id']);
    $username = mysql_real_escape_string($_POST['username']);

    mysql_query("DELETE FROM guestbook WHERE id ='".$id."' AND username='".$username."'")
 or die("My SQL can not perform this task right now");

    } 
```

# select - 过滤后如何在kendogrid中选择一行

> ID：14860358
> 
> 赞同：1
> 
> 时间：2013-02-13T18:22:09.240
> 
> 标签：select, filter, grid, row, kendo-ui

我有一个剑道网格。我要做的是先过滤它，效果很好。过滤后，我想选择一个特定的行。我确定我在过滤器的结果中有该行。

例子：

```
data = id=a1, id=a2, id=a3, id=a4, id=a5, id=a6 
```

过滤结果：

```
id=a2, id=a4, id=a6 
```

我想选择 a4 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:31:24.333

首先遍历当前显示的网格数据（即

```
var arrayOfModels = $('#GridName').data().kendoGrid.dataSource.view(); 
```

接下来将 k-state-selected 类添加到要使其选中的行

```
$('#GridName tbody [data-uid='+model.uid+']').addClass('.k-state-selected') 
```

其中*model*是您需要的 arrayOfModels 中的记录

# jquery - jquery 动态获取 ID 参数标签编辑：当我添加精简的 html 时，我忘记将唯一 ID 分配给 div 标签。我在下面的html中修复了它。原始帖子：我有一个工作的 Wordpress 短代码，可以创建一个下拉列表。当您进行选择时，下拉菜单下方会出现一个链接。我要解决的问题是如何让 jquery 在第二个下拉列表上工作，即“foo2”或从同一排序代码在页面上创建的任意数量的下拉列表。例如，这是在同一页面上使用两次短代码生成的 html。 <select id="foo1">ID：14860361 赞同：1 时间：2013-02-13T18:22:15.963 标签：jquery, wordpress, jquery-selectors, shortcode 回答 #1 赞同：1 时间：2013-02-13T18:28:14.987 尝试这个 jQuery(document).ready(function ($) { $('.bar').hide(); $('[id*="foo"]').change(function () { $('.bar').hide(); $('#'+$(this).val()).show(); }) }); 还要记住，页面中的ID应该是唯一的。 您可以使用属性 contains selector * 或只是将相同的类添加到所有选择。 回答 #2 赞同：1 时间：2013-02-13T18:31:18.547 更新 JSFiddle：http: //jsfiddle.net/t7cSg/5/ 这可能不是最好的解决方案，因为一旦插件更新，您将需要记住进行此更改，但是，也许您可​​以为该短代码结果提供一个类。 例如： <select id="foo1" class="foos"> <option value="option0">Please select a module to download</option> <option value="option1">Module 1</option> <option value="option2">Module 2</option> </select> <div id="option1" class="bar" style="display: none;"><a href="#">download M1</a></div> <div id="option2" class="bar" style="display: none;"><a href="#">download M2</a></div> <select id="foo2" class="foos"> <option value="option0">Please select a module to download</option> <option value="option1">Module 110</option> <option value="option2">Module 220</option> </select> <div id="option3" class="bar" style="display: none;"><a href="#">download M110</a></div> <div id="option4" class="bar" style="display: none;"><a href="#">download M220</a></div> <select id="foo3" class="foos"> <option value="option0">Please select a module to download</option> <option value="option1">Module 110</option> <option value="option2">Module 220</option> </select> <div id="option5" class="bar" style="display: none;"><a href="#">download M110</a></div> <div id="option6" class="bar" style="display: none;"><a href="#">download M220</a></div> 和你的 jQuery 一样： jQuery(document).ready(function ($) { $('.bar').hide(); $('.foos).change(function () { $('.bar').hide(); $('#'+$(this).val()).show(); }) }); 我希望这有效/有帮助 回答 #3 赞同：0 时间：2013-02-13T18:27:34.990 难道你不能给出你想使用一个类的选择（例如 foo），然后只针对它吗？ $('.bar').hide(); $('.foo').change(function () { $('.bar').hide(); $('#' + $(this).val()).show(); }) jsFiddle 示例 回答 #4 赞同：0 时间：2013-02-13T18:31:39.190 尝试这个： jQuery(document).ready(function ($) { $('.bar').hide(); $('#foo1').change(function () { $('.bar').hide(); $('[id="'+$(this).val()+'"]').show(); }); }); 笔记： id单个文档上的多个元素不允许相同。如果仅发生这种情况，它将被执行。</select>

# java - 莲花多米诺骨牌。网页服务。CXF。CXF 类的包名是什么？

> ID：14860363
> 
> 赞同：0
> 
> 时间：2013-02-13T18:22:22.493
> 
> 标签：java, cxf, xpages, lotus-domino

我已经[使用可用的 CXF 框架在 Domino 上的 Java 中构建并部署了一个自定义 Web 服务使用者](http://www.wissel.net/blog/d6plinks/SHWL-8SUKV5)。

这是通过 XPage 完成的，该 XPage 调用一些存储为 Java 设计元素的 Java 代码。这一切都很完美。（再次感谢斯蒂芬！）

现在我想以编程方式实现日志记录，以查看[此处详述](http://cxf.apache.org/docs/debugging-and-logging.html#DebuggingandLogging-LoggingMessages)的 SOAP 请求/响应。

所以我正在尝试使用以下内容：

**进口**

```
import org.apache.cxf.endpoint.Client;
import org.apache.cxf.frontend.ClientProxy;
import org.apache.cxf.interceptor.LoggingInInterceptor;
import org.apache.cxf.interceptor.LoggingOutInterceptor; 
```

**记录拦截器代码**

```
CustomWebService customWebService = new CustomWebService(new URL(WSDL_URL));
CustomWebServiceSoap customWebServiceSoap = customWebService.getCustomWebServiceSoap();

CustomWebServiceSoap port = customWebService.getPort(customWebServiceSoap.getClass());

Client client = ClientProxy.getClient(port);
client.getInInterceptors().add(new LoggingInInterceptor());
client.getOutInterceptors().add(new LoggingOutInterceptor()); 
```

问题是 Domino 没有任何可用于导入的 cxf 类，例如 org.apache.cxf.endpoint.Client 等。

他们是在不同的包名下吗？如果有，是哪一个？我浏览了 com.ibm.* 包，但似乎没有什么明显的。Plu type-ahead 没有显示任何匹配 Client 或 ClientProxy 的内容。

或者我是否需要将相关的 CXF jar 导入我的 NSF 来完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:34:31.497

如果你想使用 CXF，你肯定需要包含 JAR。

但是 Stephan 的文章中介绍的 Web 服务客户端功能不是使用 CXF 类，而是使用 JAX-WS 类（它只使用 CXF *wsdl2java*，但您也可以使用它的 JAX-WS 版本）。这是从版本 6 开始的 Java 的一部分。我不确定 CXF 在记录 JAX-WS 客户端时是否有任何帮助，我认为您需要查看记录 JAX-WS 而不是 CXF。

# asp.net - ASP.net 1.1 修改后在 PostBack 上保持值

> ID：14860366
> 
> 赞同：1
> 
> 时间：2013-02-13T18:22:36.600
> 
> 标签：asp.net, asp-classic, viewstate, asp.net-1.1

我必须为旧的 Asp.net 1.1 网站支持和开发一些功能。不幸的是，它写得更像是一个经典的 ASP 站点，而不是 ASP.net。他们使用包含脚本的包含文件作为核心逻辑。这意味着所有核心逻辑都在 Render 而不是 PageLoad 上运行。

其中一个问题似乎是，当我修改 asp.net 控件的值时，这些值不会在回发中保持不变。

我假设会发生这种情况，因为此时 ViewState 已经完成。无论如何在管道中稍后刷新 ViewState 吗？还是我必须在每次回发时重新加载我的所有值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:32:03.807

重新加载这些值是一个经典的 ASP 站点会做的事情。开发商无疑是这样认为的。

我建议您不要违反他们的假设。

# linux - 这些 openssl 命令的 Windows 版本

> ID：14860369
> 
> 赞同：1
> 
> 时间：2013-02-13T18:22:44.753
> 
> 标签：linux, windows, openssl

我是否必须对这些 linux 命令进行任何更改才能使其在 Windows 上运行？所有管道和重定向都像在 linux 上那样工作吗？

```
openssl genrsa -out key.pem
openssl rsa -in key.pem -pubout > key.pub
openssl rsa -pubin -modulus -noout < key.pub
#
# to decrypt mess.enc (message encrypted via javascript)
cat mess.enc | openssl base64 -d | openssl rsautl -inkey key.pem -decrypt 
```

我希望我必须换成`cat`，`type`我希望其余的都能正常工作。谁能证实这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:01:36.523

在 Windows 上等效的[cat](https://superuser.com/questions/434870/what-is-the-windows-equivalent-of-the-unix-command-cat)将有很大帮助。其余命令是相同的，应该可以在 Windows 上正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-26T19:21:05.287

相当于 Windows 上的 cat

```
openssl
cat key.pem
type key.pem
cat=type 
```

# php - 从函数中包含的文件调用时全局范围问题？

> ID：14860372
> 
> 赞同：2
> 
> 时间：2013-02-13T18:22:54.117
> 
> 标签：php, include, scope

我有一个文件 ，`standalone.php`它打算作为自己的脚本运行，直接从浏览器中运行。它定义函数、类并包含其他文件。直接调用时效果很好。

它有这样的代码：

```
$DB = new Database(DB_DATABASE, DB_SERVER_USERNAME, DB_SERVER_PASSWORD, DB_SERVER, '', true);
function DB() { global $DB; return $DB; } 
```

单独运行时，$DB 定义在全局名称空间中，返回对象的函数获取全局 $DB 对象。同样，这有效。

问题是，我有另一个文件，`sometimesInvoker.php`它是从浏览器调用的，在某些情况下，需要包含standalone.php 并像`standalone.php`直接调用一样输出到浏览器。它不能使用重定向，也`standalone.php`不能通过 URL 包含。

中的代码`sometimesInvoker.php`是：

```
LoadPage();

function LoadPage(){
   include standalone.php;
} 
```

所以层次结构看起来像：

```
Global name space / sometimesInvoker.php
   LoadPage() function
      standalone.php - thinks its global but it isn't
         $DB - declared intending to be global but is actually a variable inside LoadPage() function?
            function DB() - calls global DB and looks inside sometimesInvoker.php for a $DB var which isn't there, should be going up one level to LoadPage() function and grabbing that var. 
```

所以我得到了问题，但是如何解决呢？我需要一种方法来让函数获取比它高一级的变量，而不管下一级是否是全局的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:56:32.297

*我需要一种方法来让函数获取比它高一级的变量，而不管下一级是否是全局的。*

我不知道我是否理解正确，但是有几种方法可以使子函数中的变量可用；

使用“全局”在另一个范围内使用变量：

```
$db='whatever';
function XXYYY(){
 global $db;
 echo $db;
} 
```

或者将变量传递给函数：

```
$db='whatever';
function XXYYY($db){
 echo $db;
} 
```

还是我错过了重点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:51:31.637

在有时Invoker.php 做第一行`require_once 'standalone.php';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:10:38.553

这是我现在用来解决问题的解决方法。将 DB() 函数更改为：

```
function DB() {
   static $DB = null;
   if(is_null($DB))
      $DB = new Database(DB_DATABASE, DB_SERVER_USERNAME, DB_SERVER_PASSWORD, DB_SERVER, '', true);
   return $DB;
} 
```

在 DB 函数中使用静态变量让我将类实例化一次，而不是依赖全局变量。这解决了这种情况下的问题，但我仍然想知道如果 var 在父函数中，而不是全局命名空间中，您是否可以访问函数外部的 var？

# python - 无法在python中写入文件

> ID：14860381
> 
> 赞同：2
> 
> 时间：2013-02-13T18:23:21.397
> 
> 标签：python

可能是一个非常菜鸟的问题..

但是当我尝试时：

```
f = open(os.path.join(os.path.dirname(__file__), filename),"w") 
```

我收到一个错误

```
IOError: [Errno 2] No such file or directory: '/home/path/filename' 
```

是不是因为我说了“w”..如果它还没有，它会写一个新文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:31:38.670

错误消息可以像这样重现：

```
import os
filename = '/home/path/filename'
f = open(os.path.join(os.path.dirname(__file__), filename),"w")
f.close()

# IOError: [Errno 2] No such file or directory: '/home/path/filename' 
```

这里的问题是这`filename`是一个绝对路径，所以 `os.path.join`忽略第一个参数并返回`filename`：

```
In [20]: filename = '/home/path/filename'

In [21]: os.path.join(os.path.dirname(__file__), filename)
Out[21]: '/home/path/filename' 
```

因此，您不仅要指定一个不存在的文件，还要指定一个不存在的*目录*。`open`拒绝创建目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:27:33.963

你是不是要按字面意思写`home/path/filename`？在那种情况下，它的抱怨是`/home/path`不存在的。尝试在已经存在的目录中创建一个名为的目录`/home/path`或选择一个文件名（例如，找出您的实际主目录的路径。）您也可以使用相对路径。 有关绝对路径和相对路径之间的区别，请参见
[http://en.wikipedia.org/wiki/Path_%28computing%29 。](http://en.wikipedia.org/wiki/Path_%28computing%29)

# java - 为特定场景编写junit测试

> ID：14860385
> 
> 赞同：1
> 
> 时间：2013-02-13T18:23:35.067
> 
> 标签：java, junit, junit4

我正在尝试为我的 java Web 应用程序编写 junit，它使用较旧的命令行设计模式（这个较旧的应用程序没有使用框架）。我的应用程序中有一个场景。

当应用程序部署在服务器中时，首先服务器将找到`web.xml`并加载并运行`TestDataServlet`（在 web.xml 中配置的 servlet 类，它扩展了 http servlet），然后一切都部署到服务器中。

这`TestDataServlet`又调用了`TestRunnable`类，该类是一个线程，它加载所有属性文件（包含有关端点的所有信息，这些信息在我的应用程序代码的 java 类中使用）并在浏览器中点击应用程序之前对其进行初始化。

我正在尝试通过在运行我的 junit 之前加载所有属性文件的一步来为这个应用程序编写 junit，以便我可以轻松地对其进行测试。

由于我的应用程序没有使用框架，因此我无法像 spring junit 那样做到这一点。

既然有反正做呢？我可以`TestDataServlet`在运行我的junit类之前运行吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:18:10.713

修改您的 TestDataServlet 以能够处理请求“isTestRunnableCompleted”。让回报是真还是假。

在您的 JUnit 测试中，实现 setup() 方法。调用 TestDataServlet 来启动 runnable。然后，在 setup() 方法内的 while() 循环中，每秒调用 TestDataServlet 以检查“isTestRunnableCompleted”。如果为“false”，则休眠一秒钟，然后让循环再次进行调用。您可能还想在循环中实现某种超时，以防万一出现问题。

祝你好运。

```
public class TestDataServlet
{
  public void doGet( HttpServletRequest request, HttpServletResponse response )
    throws ServletException, IOException 
  {
    // Look for some indicator in the request that the caller wants a "status"
    // of the test data being set up
    if ( request.getParameter( "isTestDataRunnableCompleted" ) != null )
    {
      boolean status = testDataRunnableThread.isAlive();

      PrintWriter writer = response.getWriter();
      writer.println( Boolean.toString( status ) );
      writer.close();       
    }
    else
    {
      // If we get here, then start the test data runnable thread
    }
  }
} 
```

# java - 得到 作为支持 bean 中的 ManagedProperty

> ID：14860391
> 
> 赞同：0
> 
> 时间：2013-02-13T18:23:54.037
> 
> 标签：java, jsf-2, managed-bean

首先，我想说我是 JSF 的新手。

我想创建可用于编辑文章的简单复合组件。它应该以这种方式工作：

1.  复合组件看起来像这样`<my:article article="#{interestedBean.article}" />`
2.  `ArticleBean`负责处理复合组件的数据（这里是`save`方法）
3.  每个要使用文章的页面都需要将复合组件添加到视图并将`Article`对象添加到支持 bean
4.  `Article`对象将被传递给复合组件，其值将在`ArticleBean`

问题是我不知道如何通过视图将实体（`Article`对象）从一个 bean（感兴趣的 bean）传递到另一个（`ArticleBean`）。

示例（伪代码；假设 Article 实体是简单的 String 对象，因此我们不需要使用转换器）：

```
// input bean
public class HomePageBean {
    private Article article;
    @PostConstruct
    public void init() {
        this.article = new Article();
        this.article.setText("welcome on home page");
    }
    public void setArticle(Article article) {
        this.article = article;
    }
    public Article article() {
        return article; // on real page article will be taken from database
    }
}

// view
<h:form>
    <h:outputText value="#{articleBean.article.text}">
        <f:attribute name="value" value="#{homePageBean.article.text}" />
    </h:outputText>
</h:form>

// output bean
public class ArticleBean {
    private Article article;
    public void setArticle(Article article) {
        this.article = article;
    }
    public Article getArticle() {
        return article;
    }
    public void save() {
         // save article data to database
    }
}

// entity
public class Article {
    private article text;
    public String getText() {
        return text;
    }
    public void setText(String text) {
        this.text = text;
    }
} 
```

问题是`SecondBean.entity.text`没有设置值。如何从视图将参数传递给支持 bean？我试图设置`Article`值使用`@ManagedProperty(value="#{param.article}")`但`<h:outputText>`形式，因此值作为`randomformname:article`.

对不起我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:48:36.163

其实这个问题需要澄清。所以我对你可能想做的事情有两个基本的想法。

## 在一个视图上简单地共享信息

如果您想在同一视图上共享信息，您可以使用`@ManagedProperty`. 请记住，注入的 bean 的范围不会小于注入的 bean。实际上，如果您只需要一个文章对象，那么我看不出在您的情况下使用两个托管 bean 的原因，但是，您仍然可以使用

```
@ManagedBean
@RequestScoped
public class BaseBean {

    private Article article;

    @ManagedProperty(value="#{injectedBean}")
    private InjectedBean injectedBean;

} 
```

要初始化您希望相同的托管 bean 的两个属性，您可以使用带有注释的 init 方法`@PostConstruct`（但有很多替代方法），就像在这里

```
@PostConstruct
public void init() {
    Article article = new Article("Welcome");
    this.article = article;
    injectedBean.setArticle(article);
} 
```

## 在视图之间共享信息

在这种情况下，用户在第一个视图上选择他想要编辑的文章并将其*传递*给第二个视图。在这种情况下，用户在一个页面 ( ) 上选择他想要操作的文章`welcome.xhtml`，而实际操作发生在另一页面 ( `manipulation.xhtml`) 上。

常见的方法是每个页面都由自己的 bean 备份，因此在上述设置中，“基础 bean”将失去其注入。因此，`welcome.xhtml`视图将使用从某处弹出在该页面上的*一些文章对象，并将其传递给按钮单击时的第二个视图进行操作。*

bean 将与 reagrd 到 article 对象相同。

```
@ManagedBean
@RequestScoped
public class BaseBean {

    private Article article;

}

@ManagedBean
@RequestScoped
public class InjectedBean {

    private Article article;

} 
```

实际的传递将在按钮单击期间发生，例如

```
 <h:form>
        <h:commandButton value="Manipulation" action="manipulation.xhtml">
            <f:setPropertyActionListener target="#{injectedBean.article}" value="#{baseBean.article}"/>
        </h:commandButton>
    </h:form> 
```

在代码中，属性操作侦听器方法正在为第二个视图实例化一个 bean，并将其属性设置为基 bean 的属性。

## 使用获取参数进行页面加载

有时，不包含触发导航到下一个视图的命令按钮会更有意义，而是提供一个简单的链接来编辑页面。可以通过使用`<f:param>`标签来实现。在 JSF 中有两种处理参数的基本方法：使用页面操作/`preRenderView`事件或使用`@ManagedProperty`.

1.  使用页面操作/`preRenderView`事件

该工作将由目标视图完成

```
<f:metadata>
    <f:viewParam id="articleId" name="articleId" value="#{injectedBean.id}" />
    <f:event type="preRenderView" listener="#{injectedBean.initEvent}" />
</f:metadata> 
```

对于`preRenderView`事件和

```
<f:metadata>
    <f:viewParam id="articleId" name="articleId" value="#{injectedBean.id}" />
    <f:viewAction action="#{injectedBean.initEvent}" />
</f:metadata> 
```

用于页面操作。托管 bean（`InjectedBean`对象）将具有以下 init 方法

```
public void initEvent() {
    if (id == null) {
        String message = "No id specified in request";
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(message));
        return;
    }
    //use your service method to load the article
    //article = articleService.findById(id);
    //and add messages appropriately
} 
```

2.  使用`@ManagedProperty`注释

该工作将通过以下 bean 方法完成，使用 注释`@PostConstruct`和参数依赖注入。请记住，要使设置正常工作，bean 必须是`@RequestScoped`，但是对于其他 bean 范围有解决方法。

```
@ManagedProperty(value="#{param.articleId}")
private Integer id;

@PostConstruct
public void initPostConstruct() {
    if (id == null) {
        String message = "No id specified in request";
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(message));
        return;
    }
    //use your service method to load the article
    //article = articleService.findById(id);
    //and add messages appropriately
} 
```

bean 将在下一个视图 ( `manipulation.xhtml`) 期间以任何方式初始化。可以在[这里](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id)找到 BalusC 提供的这两种方式的非常有用的比较。

例如，可以通过简单的 来处理到该视图的导航，`<h:link>`例如

```
<h:link value="Manipulate" outcome="manipulation.xhtml" >
    <f:param name="articleId" value="#{baseBean.article.id}" />
</h:link> 
```

# django - Django FormWizards：如何在表单之间轻松传递用户输入的数据？

> ID：14860392
> 
> 赞同：3
> 
> 时间：2013-02-13T18:23:57.003
> 
> 标签：django, django-forms, django-templates

我在 Django 1.4.3 中使用 FormWizard 功能。

我已经成功创建了一个 4 步表单。在表单的前 3 个步骤中，它正确地从用户那里获取信息，对其进行验证等。在第 4 步中，它现在只显示一个“确认”按钮。没有其他的。当你在第 4 步点击“确认”时，在 done() 函数中使用它做一些有用的事情。到目前为止，一切正常。

但是，我想让它在第 4 步（确认步骤）中向用户显示他们在前面的步骤中输入的数据以供他们查看。我试图找出最轻松的方法来实现这一点。到目前为止，我正在上下文中创建一个名为 formList 的条目，其中包含已完成的表单列表。

```
class my4StepWizard(SessionWizardView):

    def get_template_names(self):
        return [myWizardTemplates[self.steps.current]]

    def get_context_data(self, form, **kwargs):
        context = super(my4StepWizard, self).get_context_data(form=form, **kwargs)
        formList = [self.get_form_list()[i[0]] for i in myWizardForms[:self.steps.step0]]

        context.update(
            {
                'formList': formList,
            }
        )
        return context        

    def done(self, form_list, **kwargs):
        # Do something here.
        return HttpResponseRedirect('/doneWizard') 
```

表格 #1 有一个名为 myField 的输入字段。所以在我的第 4 步模板中，我想做 {{ formList.1.clean_myField }}。但是，当我这样做时，我收到以下错误：

**异常值：
“my4StepWizard”对象没有属性“cleaned_data”**

我放入 formList 的表单似乎是无限的。所以它们不包含用户的数据。有没有可以用来获取数据本身的修复程序？我真的很想像上面那样使用上下文来传递数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T21:51:53.793

尝试这个：

```
def get_context_data(self, form, **kwargs):
    previous_data = {}
    current_step = self.steps.current # 0 for first form, 1 for the second form..

    if current_step == '3': # assuming no step is skipped, this will be the last form
        for count in range(3):
            previous_data[unicode(count)] = self.get_cleaned_data_for_step(unicode(count))

    context = super(my4StepWizard, self).get_context_data(form=form, **kwargs)
    context.update({'previous_cleaned_data':previous_data})
    return context 
```

`previous_data`是一个字典，它的键是向导的步骤（0 索引）。每个键的项目是`cleaned_data`步骤中的表单，与键相同。

# java - java - 如何将字节数组保存为java中的类文件并稍后反编译？

> ID：14860398
> 
> 赞同：0
> 
> 时间：2013-02-13T18:24:28.347
> 
> 标签：java, class, bytearray, reverse-engineering, decompiling

我正在做一个兵棋推演，我需要分析一个 java 应用程序。因此，应用程序加载了一个损坏的类文件，将其转换为字节数组，对其进行处理，然后使用该数组正确加载类。我需要分析这个类，所以我想将它保存为一个单独的类文件，以便以后使用 jd-gui 对其进行反编译。我使用以下代码保存数组：

```
FileOutputStream output = new FileOutputStream(new File("class.class"));
output.write(arrayOfByte); 
```

但是该类之后不会被反编译。我还需要做什么才能使其被反编译器读取？

更新：

我所说的损坏的意思是类文件实际上是不完整的，应用程序完成了类并使其成为内部有效的类文件，然后加载它。程序员这样做是为了防止类被反编译和读取。这个问题并不真正需要，但我认为如果我澄清一下会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:38:04.450

确保将类 java 字节码正确写入 Example 的路径

假设包含类名的类完全限定名称是 com.test.Sample，您应该在文件夹 com\test\Sample.class 下编写类字节码。

此外，您要确保在写入字节码后正确关闭 FileOutputStream。

```
// use fully qualified class name
FileOutputStream output = new FileOutputStream(new File("c:\\com\\test\\Sample.class"));
output.write(arrayOfByte);
output.close(); 
```

# css - IE6/7 - a - tr td 中的 CSS 弹出窗口

> ID：14860401
> 
> 赞同：0
> 
> 时间：2013-02-13T18:24:38.827
> 
> 标签：css, internet-explorer, z-index

我正在为 CSS 弹出窗口而苦苦挣扎，希望有人能提供帮助。

我们有各种 tds 在他们的单元格中有这个弹出窗口，在 firefox、chrome 等（通常）中它工作正常。但是在 IE8 以下的旧浏览器中，它会出现问题。

当鼠标移出单元格时，似乎 :hover 会丢失，即使它移动到弹出区域（位于单元格下方）上也是如此。您可能会说是的，这是它应该做的，但是在 Firefox 中悬停的父元素的子元素将 :hover 类保留在父元素上。

弹出 div 是绝对定位的，并且给定的 margin-left 为 -999px；（还行吧）

在父 div 元素的 :hover 上，margin-left 设置为 -125px（弹出 div 宽度的一半，因此它居中 - 也可以）

如前所述，这一切都很好，并且在现代浏览器中完美运行。

HTML 片段

```
<tr>
    <td>
        <div class="tooltip">
            <span class="events">CONTENT</span>
        </div>
    </td>
    <td>
        <div class="tooltip">
            <span class="events">CONTENT</span>
        </div>
    </td>
    <td>
        <div class="tooltip">
            <span class="events">CONTENT</span>
        </div>
    </td>
    <td>
        <div class="tooltip">
            <span class="events">CONTENT</span>
        </div>
    </td>
    <td>
        <div class="tooltip">
            <span class="events">CONTENT</span>
        </div>
    </td>
</tr> 
```

CSS 迄今为止

```
#page-content .block_calendar_month { overflow: visible; }

.tooltip { border-bottom: 1px dotted #000000; color: #000000; outline: none; cursor: help; text-decoration: none; }

.tooltip span { margin-left: -999em; position: absolute; }
td.day:hover { background-color: #fbf16b; }

.tooltip:hover span { font-size: 12px; position: absolute; left: 0em; z-index: 5000; top: 1em; margin-left: -125px; width: 250px; }

.tooltip:hover span div { }
.events {padding: 0.8em 1em; } 
```

希望有人能给我一些建议，因为我已经失去了几个小时试图解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:00:56.780

我有一段时间没有接触过 IE6，但是通过使用 IE7，我可以告诉你它在表格和 z-index 方面做了一些时髦的事情。我发现使用工具提示时最好的解决方案是不使用表格。为什么不去掉表格代码并拥有：

```
<div class="tooltip">
    <span class="events">CONTENT</span>
</div> 
```

另外，我不确定您使用的是什么插件（实际上，您似乎没有使用任何插件），但是如果您使用 JQuery Tools 工具提示插件，则可以将弹出窗口的偏移距离设置为 JSON 参数。阅读更多[http://jquerytools.org/demos/tooltip/dynamic.html](http://jquerytools.org/demos/tooltip/dynamic.html)。

If you are going to keep the current implementation, I'd recommend toggling between display:block and display:none for the tooltip.

# php - php构造函数中的父/子类型提示？

> ID：14860402
> 
> 赞同：4
> 
> 时间：2013-02-13T18:24:39.670
> 
> 标签：php, oop, inheritance, php-5.2

在不考虑我是否应该使用类型提示的情况下，任何人都可以告诉我，当我将子类传递给为父类提示类型提示的构造函数时，是否有办法避免 PHP 抛出错误？例如：

```
class Headed extends Image { ... }

class Dimension {
    function __construct(Image $image, $arg1, $arg2){ ... }
} 
```

PHP给了我：

```
PHP Error 4096: Argument 1 passed to Dimension::__construct() must be an instance of Image, instance of Headed given 
```

Headed 类型的对象显然也是一个 Image，因为它是一个子类，是否有某种方式来表达我的构造函数，以便它提供类型提示但允许子类？

*如果这是因为我使用 PHP 5.2.5 而不是更新的版本，我很抱歉打扰大家。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:00:08.813

利用`php 5.4.3`

我运行这段代码

```
<?php

class Image {
public $a="s";
};

class Headed extends Image { };

class Dimension {
    function __construct(Image $image) 
    {
        var_dump($image);
    }
};

$h = new Headed;
$d = new Dimension($h);

?> 
```

输出：

```
object(Headed)#1 (1) { ["a"]=> string(1) "s" } 
```

# spring - Twitter/Spring - 在@Scheduled 作业中发布推文

> ID：14860404
> 
> 赞同：1
> 
> 时间：2013-02-13T18:24:50.340
> 
> 标签：spring, twitter, scheduled-tasks

我已经成功启动并运行了一些“春季计划”任务。我现在想要的是根据某些事件重复将一些特定的推文发布到已知的 Twitter 帐户（并且已经在 Twitter 端配置）。

但是，我在 OAuth 过程中看到的所有内容，尤其是。为了获得访问令牌，它需要一些回调 URL 才能执行任何操作。我可能弄错了，但这似乎很难集成到计划任务的上下文中。

难道没有其他方法可以实现推文吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:33:10.083

结合 Spring Scheduling 功能，我将使用[Twitter4j](http://twitter4j.org/)在预定作业中发布推文。

这是一个示例：

```
@Componet
public class TwitterSender {

    @Scheduled(fixedRate = 10000)
    public void sendTweet() {
        Twitter twitter = TwitterFactory.getSingleton();
        Status status = twitter.updateStatus(latestStatus);
        System.out.println("Status updated to: " + status.getText() + ".");
    }

} 
```

如果您需要更多信息，您可以查看[使用 Twitter4j 发送更新状态的测试用例](https://github.com/yusuke/twitter4j/blob/master/twitter4j-examples/src/main/java/twitter4j/examples/tweets/UpdateStatus.java)。或者您可以直接[潜水并查看源头](https://github.com/yusuke/twitter4j/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:37:18.030

就学习曲线而言，这可能是一个飞跃，但你看过[spring-integration](/questions/tagged/spring-integration "显示标记为“弹簧集成”的问题")的`twitter:outbound-channel-adapter`吗？

```
<twitter:outbound-channel-adapter twitter-template="twitterTemplate" 
                                  channel="twitterChannel"/> 
```

[http://static.springsource.org/spring-integration/docs/latest-ga/reference/html/twitter.html](http://static.springsource.org/spring-integration/docs/latest-ga/reference/html/twitter.html)

# python - 类型错误 - 字典中的索引应该如何？

> ID：14860411
> 
> 赞同：-1
> 
> 时间：2013-02-13T18:25:11.737
> 
> 标签：python, dictionary

```
def __init__(self, dictionary_paths):
    files = [open(path, 'r') for path in dictionary_paths]
    dictionaries = [yaml.load(dict_file) for dict_file in files]
    map(lambda x: x.close(), files)
    self.dictionary = {}
    self.max_key_size = 0
    for curr_dict in dictionaries:
        for key in curr_dict:
            if key in self.dictionary:
                self.dictionary[key].extend(curr_dict[key])
            else:
                self.dictionary[key] = curr_dict[key]
                self.max_key_size = max(self.max_key_size, len(key))
    self.dictionary[key] = curr_dict[key] 
```

结果是

```
TypeError: string indices must be integers, not str 
```

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:27:23.160

问题是它`curr_dict`是一个字符串而不是一个字典，尽管它的名字意味着：

```
In [6]: 'abc'['x']

TypeError: string indices must be integers, not str 
```

# c# - 为什么 C# 不需要显式转换将 Long 转换为 Double？

> ID：14860416
> 
> 赞同：11
> 
> 时间：2013-02-13T18:25:48.407
> 
> 标签：c#, casting

起初，对不起我的英语不好。我有代码片段：

```
long x = 9223372036854775807L;
double f = x;
Console.WriteLine(x);           
Console.WriteLine(f); 
```

输出是：

```
9223372036854775807
9,22337203685478E+18 
```

在编译和执行此代码时，我没有收到任何错误。在将 Long 转换为 Double 时，我们会损失精度。为什么 C# 在这种情况下不需要显式转换？

谢谢大家。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T18:34:18.310

该语言内置了一些隐式转换。

下表来自[文档](http://msdn.microsoft.com/en-us/library/y5b434w4.aspx)，这就是为什么您可以在没有显式强制转换或转换的情况下分配值的原因：

```
From        To
===============================================================================
sbyte       short , int, long, float, double, or decimal
byte        short , ushort, int, uint, long, ulong, float, double, or decimal
short       int , long, float, double, or decimal
ushort      int , uint, long, ulong, float, double, or decimal
int         long , float, double, or decimal
uint        long , ulong, float, double, or decimal
long        float , double, or decimal
char        ushort , int, uint, long, ulong, float, double, or decimal
float       double
ulong       float , double, or decimal 
```

在文档中它指出（强调我的）：

> 从 int、uint、long 或 ulong 到 float 以及**从 long 或 ulong 到 double**的转换可能会丢失精度，但不会丢失量级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-09T13:51:33.770

尝试这个

```
long x = 9223372036854775807L;
decimal f = x;
Console.WriteLine(x);
Console.WriteLine(f); 
```

# postgresql - 无法使用数据类型 reltime 在 postgres 字段中输入日期

> ID：14860418
> 
> 赞同：2
> 
> 时间：2013-02-13T18:25:57.313
> 
> 标签：postgresql, postgresql-8.4

我正在尝试插入 postgres 8.4.13

```
insert into my_table (id, hour_memo) values (1,'17:30:00.000000 +01:00:00'); 
```

hour_memo 是“相对时间数据类型”

在执行插入任务期间，我遇到了这个问题：

```
ERROR:  invalid input syntax for type reltime: "17:30:00.000000 +01:00:00" 
```

我完全不知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:50:08.730

答案是 reltime 不支持时区，所以 "+01..." 事情正在破坏它。仍然 - 使用 reltime 类型是个坏主意，应该用一些普通类型代替。

# vba - Excel 选项仅计算每个单元格的值一次

> ID：14860420
> 
> 赞同：1
> 
> 时间：2013-02-13T18:26:02.197
> 
> 标签：vba, excel

我有一个项目，它的要求包括循环引用（只是为了让你知道我为什么故意把它放在我的工作簿中）。

在文档中，我希望圆圈中的每个单元格只计算一次。我知道这可以通过 Windows 按钮 > Excel 选项 > 公式 > 启用迭代计算来实现，但我无法对接触工作簿的每个人强制执行该选项。有没有办法（通过VBA，也许，或者单元格/工作表选项？）让单元格只计算一次它的值？

对我来说听起来很遥远，但我真的很感谢你的帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:33:17.543

像这样的东西：

```
Private Sub Workbook_Open()
With Application
    .Iteration = True
    .MaxIterations = 1 '<-- or whatever the maximum allowable # you want
    .MaxChange = 0.001  '<-- modify as necessary, or remove if desired
End With
End Sub

Private Sub Workbook_Close()
    Application.Iteration = False
End Sub 
```

将这些放在工作簿模块中。

这是 Google 上的第一个答案之一，如果您自己进行任何搜索，您会发现：

[http://www.mrexcel.com/forum/excel-questions/444155-need-macro-enable-iterative-calculation.html](http://www.mrexcel.com/forum/excel-questions/444155-need-macro-enable-iterative-calculation.html)

# ruby - 表列名称以 ruby 排列

> ID：14860421
> 
> 赞同：1
> 
> 时间：2013-02-13T18:26:04.490
> 
> 标签：ruby, sinatra, datamapper

在 Rails 中，我会简单地使用：

```
MyModel.column_names 
```

访问表的列名，但我正在忍受我对 Sinatra 的第一次摸索（为了更好地学习 Ruby）并且需要将表的列名放入数组中。

以前，我已经迭代了 params 哈希以提取键值对：

```
params.each do |key, value|
  #manipulate keys and values
end 
```

并知道使用：

```
@mm = MyModel.new
@mm.each do .... 
```

导致未定义的方法“每个”错误。

```
logger.info @mm.inspect 
```

记录类似：

```
#<MyModel @id=nil @start=nil @end=nil @yada=nil @created_at=nil @updated_at=nil @foreign_id=nil> 
```

那么，如何将那些我可以清楚地看到的爆炸列名放入数组中？

谢谢...

**更新**

感谢 Doon 用 Datamapper 属性为我指明了正确的方向。

我最终制作了一个私有方法 column_names：

```
def self.column_names
  self.properties.collect {|column| column.name.to_s }
end 
```

这是一种享受

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:52:26.887

你在找`properties`吗？

[http://rubydoc.info/gems/dm-core/1.1.0/DataMapper/Model/Property](http://rubydoc.info/gems/dm-core/1.1.0/DataMapper/Model/Property)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:46:20.253

对于任何 Ruby 对象，您都有`instance_variables`返回该对象属性数组的方法。这对你来说太笼统了吗？我不熟悉 DataMapper，可能有一个特定的方法可以`column_names`在 ActiveRecord 中进行等效操作。

# c - 骰子程序不起作用

> ID：14860422
> 
> 赞同：-3
> 
> 时间：2013-02-13T18:26:04.983
> 
> 标签：c

所以我正在做一个骰子游戏，你掷骰子数量，然后计算机掷出相同数量的骰子，总点数最高的玩家赢得这一轮。但是，我陷入了询问玩家是否想再次滚动的循环中。无论我输入什么，它都会再次滚动。我已经坚持了一段时间，所以任何帮助将不胜感激。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
    /* Easy dice game
    |
    |  The game consists of 7 rounds.
    |  In each round, the computer throws a die, 
    |  then the human throws a die.
    |  The winner of the round is the player who has the highest throw.
    |  In case of a tie, neither player wins.
    |  The winner of the game is the player who has won the most rounds.
    |
    */

    char input[132];   /* user input buffer */

int throwDie()
{
    static int initialized = 0;
    int num;

    if ( !initialized )
    {
        printf("Initializing Die!\n\n");
        srand( time(NULL) );
        initialized = 1;
    }
    num = rand()%6 + 1 ;
    return num;
}

/* Human turn
|
|  This might be mode made interesting in the future.
|
*/
int humanTurn()
{
    int toss;
    toss = throwDie();
    printf("Human throws a %d\n", toss );
    return toss;

}

/* Computer turn
|
|  This might be made more interesting in the future.
|
*/
int computerTurn()
{
    int toss;
    toss = throwDie();
    printf("Computer throws a %d\n", toss );
    return toss;
} 

int main(int argc, char *argv[])
{
    int round, humanWins=0, computerWins=0 ;
    int humanToss, computerToss;
    int i = 0, yesorno;
    const int numberOfRounds = 7;
    char ta=0;
    /* Play 13 Rounds */
    for ( round = 1; round<=numberOfRounds; round++ )
    {
        printf("\nRound %d\n\n", round );
        printf("Player's Turn: (hit enter)");
        gets( input ); /* pause for dramatic effect */
        humanToss = humanTurn();
        printf("Do you wish to throw again? [Y or N]");
        ta = getchar();

        while (i == 0)
        {
            if (yesorno = 'Y')
            {
                gets( input );
                humanToss = humanTurn();
                printf("Do you wish to throw again? [Y or N]");
                ta = getchar();

            }
            if(yesorno == 'N')
            {
                i++;
            }
        }

        printf("Computer's Turn: (hit enter)");

        gets( input ); /* pause for dramatic effect */
        computerToss = computerTurn();

        /* Determine Winner of the Round */
        if ( humanToss > computerToss )
        {
            humanWins++;
            printf("\tHuman wins the round.    human: %3d. computer: %3d\n",
                humanWins, computerWins );
        }
        else if ( computerToss > humanToss )
        {
            computerWins++;
            printf("\tComputer wins the round. human:%3d. computer: %3d\n",
                humanWins, computerWins );
        }
        else if ( computerToss == humanToss)
        {
            printf("\tTie.                     human:%3d. computer: %3d\n",
                humanWins, computerWins );
        }
    }

    /* Determine Winner to the Game */
    if ( humanWins > computerWins )
        printf("\n\nWINNER!! The human wins the game!\n");
    else if ( computerWins < humanWins )
        printf("\n\nThe computer wins the game!\n");
    else
        printf("\n\nTie Game!\n");

    printf("\n");
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:32:01.200

将您的程序更改为

```
if (yesorno == 'Y') 
```

您正在分配而不是检查是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:31:42.213

你被困在这里：

```
while (i == 0)
{
  if (yesorno = 'Y')
  {
     gets( input );
     humanToss = humanTurn();
     printf("Do you wish to throw again? [Y or N]");
     ta = getchar();

  }
  if(yesorno == 'N')
  {
     i++;
  }
} 
```

您`yesorno`从先前的输入中获得了价值；然后你会收到新的输入，但变量`yesorno`是相同的——你只需设置变量`ta` So `yesorno`is always `'Y'`，`i`总是 0 并且你处于无限的 while 循环中。

**`yesorno`正如第二位评论者所说，**编辑** 并且您正在分配您的 if。但无论如何，如果你写`==`而不是`=`，你仍然会处于无限循环中。**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T23:49:54.400

这两行之间有**很大的区别。**
你能发现吗？

```
if (yesorno = 'Y')
if (yesorno == 'N') 
```

此外，因为您正在检查 的值`yesorno`，所以您应该问自己：
*“我在哪里设置这个值？我如何设置这个值？”***

# forms - 联系人姓名前缀下拉框的标准值列表？

> ID：14860428
> 
> 赞同：3
> 
> 时间：2013-02-13T18:26:33.773
> 
> 标签：forms, validation, user-input

在填写网站上的联系表时，是否有一个列表，列出了名称前缀列表中可以使用的值？

例如：博士、先生、女士等。

此外，选择名称前缀是否比自由文本输入更可取？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-05-17T14:40:55.630

我知道这已经很老了，可能搜索得不多，但我创建了一个用于复制粘贴常见的要点。

这是代码，或者您可以使用下面的 github gist 链接。

```
<select name="prefix" id="prefix">
    <option value="Ms"> Ms </option> 
    <option value="Miss"> Miss </option> 
    <option value="Mrs"> Mrs </option> 
    <option value="Mr"> Mr </option> 
    <option value="Master"> Master </option> 
    <option value="Fr"> Father (Fr) </option>
    <option value="Rev"> Reverend (Rev) </option>
    <option value="Dr"> Doctor (Dr) </option> 
    <option value="Atty"> Attorney (Atty) </option>  
    <option value="Hon"> Honorable (Hon) </option>  
    <option value="Prof"> Professor (Prof) </option>  
    <option value="Pres"> President (Pres) </option> 
    <option value="VP"> Vice President (VP) </option> 
    <option value="Gov"> Governor (Gov) </option>  
    <option value="Ofc"> Officer (Ofc) </option> 
</select> 
```

[https://gist.github.com/ddavisgraphics/6f8e28310a622b058833900e46e49e0a](https://gist.github.com/ddavisgraphics/6f8e28310a622b058833900e46e49e0a)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:31:13.837

试试这个：

[http://en.wikipedia.org/wiki/English_honorifics](http://en.wikipedia.org/wiki/English_honorifics)

实际上我会说根本不使用前缀，欧洲大部分地区都没有。

# html - 具有水平滚动的 div

> ID：14860430
> 
> 赞同：0
> 
> 时间：2013-02-13T18:26:37.967
> 
> 标签：html, scroll

使用动态添加的表格完成的 div。问题是正确的 div，它没有显示完整的表格，而且我无法滚动

div代码是 `<div style='height:460px;overflow:auto;'>`

![我的应用](../Images/e6cf932ed19fcc6b4a0a4dde0bce7837.png)

我也试过

```
<div style='height:460px;overflow:auto;overflow-x: scroll;'> 
```

但我明白了

![我的应用 2](../Images/f77c535b9f08b89573634a56d8ff07b9.png)

# lua - 向下跳跃的love2d播放器

> ID：14860432
> 
> 赞同：0
> 
> 时间：2013-02-13T18:26:48.597
> 
> 标签：lua, love2d

我正试图让我在 Love2d 中的玩家跳跃。他跳，是的，但向下。是的，向下。如同入土。我需要一些帮助来解决这个问题，我已经尽可能多地使用数据，到目前为止，每个逻辑解决方案（将跳跃高度设置为负数等）都不起作用。

下面是代码，希望对大家有所帮助。

```
-----------------
--- LOVE.LOAD ---
-----------------
function love.load()
    love.graphics.setBackgroundColor(92,217,255)
    playerIdle=love.graphics.newImage('/sprites/spriteTestIdle.png')
    playerLeft=love.graphics.newImage('/sprites/spriteTestFlip.png')
    playerRight=love.graphics.newImage('/sprites/spriteTest.png')
    player={}
    player.image=playerIdle
    player.x=400
    player.y=303
    player.speed=200
    player.y_velocity=303
    gravity=600
    jumpHeight=200
    hills=love.graphics.newImage('/sprites/spriteHills.png')
end
-------------------
--- LOVE.UPDATE ---
-------------------
function love.update(dt)

    if (player.x>735) then

        if (love.keyboard.isDown('left') or love.keyboard.isDown('a') or love.keyboard.isDown('right') or love.keyboard.isDown('d')) then
            player.x=player.x-(player.speed*dt)
        end

    elseif (player.x<-10) then

        if (love.keyboard.isDown('left') or love.keyboard.isDown('a') or love.keyboard.isDown('right') or love.keyboard.isDown('d')) then
            player.x=player.x+(player.speed*dt)
        end

    else

        if (love.keyboard.isDown('right') or love.keyboard.isDown('d')) then
            player.image=playerRight
            player.x=player.x+(player.speed*dt)
        elseif (love.keyboard.isDown('left') or love.keyboard.isDown('a')) then
            player.image=playerLeft
            player.x=player.x-(player.speed*dt)
        else
            player.image=playerIdle
            player.x=player.x
        end

    end

    if (player.y_velocity ~= 303) then
        player.y = player.y + player.y_velocity * dt
        player.y_velocity = player.y_velocity - gravity * dt

        if (player.y < 303) then
            player.y_velocity = 303
            player.y = 303
        end

    end

end
-----------------------
--- LOVE.KEYPRESSED ---
-----------------------
function love.keypressed(key)

    if (key == " ") then

        if (player.y_velocity == 303) then
            player.y_velocity = jumpHeight
        end

    end

end
-----------------
--- LOVE.DRAW ---
-----------------
function love.draw()
    love.graphics.draw(hills, 0, 0)
    love.graphics.draw(player.image, player.x, player.y)
end 
```

[这是](http://dl.dropbox.com/u/82609242/Source/main.love)main.love 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T21:13:41.100

我认为您的问题是您看不到坐标系的好方法。

![在此处输入图像描述](../Images/2bd950467d57985fcc7f7c00060ae95f.png)

当您下降时，Y 值正在增加！不像你在大多数数学课上看到的那样减少..

要修复你的 main.lua，你应该替换那些：

```
jumpHeight= -200 --in love.load

player.y_velocity = player.y_velocity - gravity * dt --in the love.update

if (player.y > 303) then --in love.update 
```

我希望这对你来说很清楚，祝你的游戏好运（我喜欢图形）。

此外，如果您需要更快的帮助，您应该直接发布到[Love2d 论坛](http://love2d.org/forums/)。

# java - 使用 HTTPCLIENT 进行身份验证后未授权的连接

> ID：14860433
> 
> 赞同：2
> 
> 时间：2013-02-13T18:26:53.603
> 
> 标签：java, http

所以我得到`Unauthorized error`了http客户端的授权。我试图访问的网站具有`NTLM`身份验证。如果有人可以帮助解决这个问题，将不胜感激。

```
public class ClientAuthentication {

    public static void main(String[] args) throws Exception {
        DefaultHttpClient httpclient = new DefaultHttpClient();

        try {
            httpclient.getCredentialsProvider().setCredentials(
                    new AuthScope("website", 80),
                    new UsernamePasswordCredentials("username", "password"));

            HttpGet httpget = new HttpGet("http://cdg5.intranet.bell.ca/BlackFoot/Ont/");

            System.out.println("executing request" + httpget.getRequestLine());
            HttpResponse response = httpclient.execute(httpget);
            HttpEntity entity = response.getEntity();

            System.out.println("----------------------------------------");
            System.out.println(response.getStatusLine());

            if (entity != null) {
                System.out.println("Response content length: " + entity.getContentLength());
            }
            EntityUtils.consume(entity);

   } finally {
            // When HttpClient instance is no longer needed,
            // shut down the connection manager to ensure
            // immediate deallocation of all system resources
            httpclient.getConnectionManager().shutdown();
        }
    }
} 
```

这是我得到的结果

> "执行requestGET [http://cdg5.intranet.bell.ca/BlackFoot/Ont/HTTP/1.1](http://cdg5.intranet.bell.ca/BlackFoot/Ont/)
> 
> HTTP/1.1 401 未经授权的响应内容长度：1656"

# bash - 在逗号数后添加新行

> ID：14860438
> 
> 赞同：0
> 
> 时间：2013-02-13T18:27:15.237
> 
> 标签：bash, scripting, sed, awk

我有这么长的一行：

```
kvm1.example.corp,18:18:48,x86_64,16,11,11,0,0,0,0,0,11,0,4.6,99056376,4980736,4980736,5450000000,1,s-75-VM,460000000.,0.385304090422,262144,0,0,3,743,0,2,v-30-VM,450000000.,0.376927914543,1048576,1,0,6,7676,4765,3,r-80-VM,430000000.,0.360175562786,131072,0,0,0,208,0,5,i-2-81-VM,10000000.,0.00837617587873,1048576,1,0,0,0,0,6,r-83-VM,430000000.,0.360175562786,131072,0,0,0,156,0,7,i-3-82-VM,710000000.,0.59470848739,524288,0,0,0,0,0,8,r-85-VM,410000000.,0.343423211028,131072,0,0,0,208,0,11,i-3-84-VM,710000000.,0.59470848739,524288,0,0,0,0,0,12,i-2-79-VM,690000000.,0.577956135633,524288,0,0,2,0,0,13,r-87-VM,420000000.,0.351799386907,131072,0,0,0,156,0,14,i-3-88-VM,730000000.,0.611460839147,524288,0,0,2,0,0 
```

我正在尝试获得这样的输出

```
1,s-75-VM,460000000.,0.385304090422,262144,0,0,3,743,0,
2,v-30-VM,450000000.,0.376927914543,1048576,1,0,6,7676,4765,
3,r-80-VM,430000000.,0.360175562786,131072,0,0,0,208,0,
5,i-2-81-VM,10000000.,0.00837617587873,1048576,1,0,0,0,0,
6,r-83-VM,430000000.,0.360175562786,131072,0,0,0,156,0,
7,i-3-82-VM,710000000.,0.59470848739,524288,0,0,0,0,0,
8,r-85-VM,410000000.,0.343423211028,131072,0,0,0,208,0,
11,i-3-84-VM,710000000.,0.59470848739,524288,0,0,0,0,0,
12,i-2-79-VM,690000000.,0.577956135633,524288,0,0,2,0,0,
13,r-87-VM,420000000.,0.351799386907,131072,0,0,0,156,0,
14,i-3-88-VM,730000000.,0.611460839147,524288,0,0,2,0,0 
```

我不确定在删除标题后应该采取哪种策略在第 9 个逗号后添加新行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:38:17.390

```
awk -F, '{for (col = 19; col < NF; col += 10) {
           for (i = 0; i < 10; i++) { printf("%s,", $(col+i)); }
           printf "\n"; }
         }' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:52:51.080

更简单`sed`：

```
$ sed -r 's/([^,]+,){18}//;s/(([^,]+,){10})/\1\n/g' file 
1,s-75-VM,460000000.,0.385304090422,262144,0,0,3,743,0,
2,v-30-VM,450000000.,0.376927914543,1048576,1,0,6,7676,4765,
3,r-80-VM,430000000.,0.360175562786,131072,0,0,0,208,0,
5,i-2-81-VM,10000000.,0.00837617587873,1048576,1,0,0,0,0,
6,r-83-VM,430000000.,0.360175562786,131072,0,0,0,156,0,
7,i-3-82-VM,710000000.,0.59470848739,524288,0,0,0,0,0,
8,r-85-VM,410000000.,0.343423211028,131072,0,0,0,208,0,
11,i-3-84-VM,710000000.,0.59470848739,524288,0,0,0,0,0,
12,i-2-79-VM,690000000.,0.577956135633,524288,0,0,2,0,0,
13,r-87-VM,420000000.,0.351799386907,131072,0,0,0,156,0,
14,i-3-88-VM,730000000.,0.611460839147,524288,0,0,2,0,0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T19:26:59.787

在 bash 中：

```
(
  IFS="," read -a fields <<< "$longline"
  set -- "${fields[@]:18}"
  IFS=","
  while (( $# > 0 )); do
    echo "${*:1:10}"
    shift 10
  done
) 
```

创建一个子shell ，`(...)`这样我们就不必担心保留`IFS`shell参数（`$@`和`$*`）的旧值。

第一行使用“，”作为字段分隔符分割长行，并将字段存储在数组中。

第二行跳过前 18 个字段（所有标题元素）并将其余部分存储在 shell 参数中，这些参数可以使用 , 等单独访问，也可以`$1`作为`$2`or 集体`$@`访问`$*`。

第三行为 while 循环的其余部分设置字段分隔符“，”，特别是用于`echo`命令中的参数扩展。

`"${*:1:10}"`接受前 10 个 shell 参数，并将它们与`IFS`.

shift 10 丢弃前 10 个参数（我们刚刚打印的）。

`$#``shift`是 shell 参数的数量，每次操作后减少 10 ；只要还有要处理的参数，循环就会继续。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T12:10:40.603

在 perl 中：

```
perl -F, -lane 'for($min=18;$min<scalar(@F);$min+=10){print join ",",@F[$min..$min+10]}' 
```

测试如下：

```
> echo "kvm1.example.corp,18:18:48,x86_64,16,11,11,0,0,0,0,0,11,0,4.6,99056376,4980736,4980736,5450000000,1,s-75-VM,460000000.,0.385304090422,262144,0,0,3,743,0,2,v-30-VM,450000000.,0.376927914543,1048576,1,0,6,7676,4765,3,r-80-VM,430000000.,0.360175562786,131072,0,0,0,208,0,5,i-2-81-VM,10000000.,0.00837617587873,1048576,1,0,0,0,0,6,r-83-VM,430000000.,0.360175562786,131072,0,0,0,156,0,7,i-3-82-VM,710000000.,0.59470848739,524288,0,0,0,0,0,8,r-85-VM,410000000.,0.343423211028,131072,0,0,0,208,0,11,i-3-84-VM,710000000.,0.59470848739,524288,0,0,0,0,0,12,i-2-79-VM,690000000.,0.577956135633,524288,0,0,2,0,0,13,r-87-VM,420000000.,0.351799386907,131072,0,0,0,156,0,14,i-3-88-VM,730000000.,0.611460839147,524288,0,0,2,0,0" | perl -F, -lane 'for($min=18;$min<scalar(@F);$min+=10){print join ",",@F[$min..$min+10]}' 
1,s-75-VM,460000000.,0.385304090422,262144,0,0,3,743,0,2
2,v-30-VM,450000000.,0.376927914543,1048576,1,0,6,7676,4765,3
3,r-80-VM,430000000.,0.360175562786,131072,0,0,0,208,0,5
5,i-2-81-VM,10000000.,0.00837617587873,1048576,1,0,0,0,0,6
6,r-83-VM,430000000.,0.360175562786,131072,0,0,0,156,0,7
7,i-3-82-VM,710000000.,0.59470848739,524288,0,0,0,0,0,8
8,r-85-VM,410000000.,0.343423211028,131072,0,0,0,208,0,11
11,i-3-84-VM,710000000.,0.59470848739,524288,0,0,0,0,0,12
12,i-2-79-VM,690000000.,0.577956135633,524288,0,0,2,0,0,13
13,r-87-VM,420000000.,0.351799386907,131072,0,0,0,156,0,14
14,i-3-88-VM,730000000.,0.611460839147,524288,0,0,2,0,0, 
```

# php - 实例变量未在类的一个函数中设置

> ID：14860451
> 
> 赞同：0
> 
> 时间：2013-02-13T18:27:58.037
> 
> 标签：php, moodle

这个问题真的很伤我的头。

我正在为 Moodle 开发一个自定义等级导出插件，并将grade_export 类划分为子类：

```
class grade_export_sitscsv extends grade_export {
... 
```

我创建的表单设置了两个自定义变量，因此我实现了一个 *process_form()* 函数，然后在父类中调用该函数：

```
function process_form($formdata) {
  $this->grade_item = preg_replace('/itemids\[([0-9]+)\]/','\1',$formdata->grade_item);
  $this->sits_assnum = $formdata->sits_assnum;

  parent::process_form($formdata);
} 
```

我可以看到这些实例变量是在我的 *display_preview()* 函数中设置的：

```
public function display_preview() {
  echo("<h2>Do we need a preview?</h2>");
  echo("<p> Grade item: ".$this->grade_item.", SITS num: ".$this->sits_assnum."</p>");
} 
```

（打印，例如，**Grade item: 7487, SITS num: 7**）。

但是，当我尝试使用 *print_grades()* 函数中的变量时，它们没有设置：

```
public function print_grades() {
    global $CFG;
    echo("Grade item: ".$this->grade_item.", SITS num: ".$this->sits_assnum."\n"); 
```

...将**Grade item: , SITS num:**打印到我的输出文件中。

我将不胜感激任何可以帮助我解决此问题的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:54:37.540

感谢您的回答，Michael 和 mkaatman - 在一位同事的帮助下，我终于解决了。

问题是，调用**print_grades()的对象与调用****display_preview()**时的对象不同，即使它是同一个类 - 来自**process_form()**的值被写入另一种形式（如*<input type="hidden"...* elements) 中的中间页面，并从此数据实例化了一个新对象。

我只需要确保我的数据被写入第二种形式，然后传递给新对象。

# .net - 从 .net 提高 Visio 自动化的性能 - 创建包含大量形状和形状数据的图表

> ID：14860457
> 
> 赞同：2
> 
> 时间：2013-02-13T18:28:13.993
> 
> 标签：.net, com, visio

我有一些代码可以创建潜在的大量形状并将形状数据设置为各种值。一些形状可能有 5 个形状数据行，以及一些 20（或各种其他值）。

这是用 VB.Net 编写的，我想提高性能。遵循此处的指南：

[http://blogs.msdn.com/b/mailant/archive/2004/09/22/233082.aspx](http://blogs.msdn.com/b/mailant/archive/2004/09/22/233082.aspx)

我一直在查看对 .DropMany 和 .SetFormulas 的调用。

一个问题是我想添加大量的形状数据行 - 虽然存在一个 .AddShapes 调用来一次执行多行，但形状数据部分没有等效项 - 留下多次调用 .AddNamedRow （我已经尝试调用AddRows 但与形状数据部分一起使用时会出错）。

当前算法：

```
Work out which masters to use for which shapes (not all the same)
pg.DropMany(with array of masters and appriate X/Y coords)
for each shape dropped:
    for each shape data row (e.g. 5 - 10 times per shape):
        shp.AddNamedRow()
pg.SetFormulas(for all shapes on page and all properties) 
```

还有其他提高性能的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:43:35.517

您可能会尝试的一件事是在 Visio 应用程序对象上使用[ScreenUpdating](http://msdn.microsoft.com/en-us/library/ms428342.aspx)属性。当设置为 False 时，Visio 将不会更新其窗口，直到该属性再次设置为 True。我以前没有使用过 Visio 自动化，但我已经将它与 Word 一起使用，它有很大帮助。诀窍是在更新速度和频率之间找到一个良好的折衷——如果您关闭更新太久，用户可能会认为 Visio 已经崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T14:46:05.860

您可能还想查看[DeferRecalc](http://msdn.microsoft.com/en-us/library/ff765646.aspx)、[LiveDynamics](http://msdn.microsoft.com/en-us/library/ff769143.aspx)、[AutoLayout](http://msdn.microsoft.com/en-us/library/ff767982.aspx)和[UndoEnabled](http://msdn.microsoft.com/en-us/library/ff766384.aspx)（应用程序对象的所有属性），具体取决于您的形状数据所绑定的内容。

# php - WordPress | WP_Query 的 meta_query 问题

> ID：14860458
> 
> 赞同：0
> 
> 时间：2013-02-13T18:28:14.197
> 
> 标签：php, wordpress

我为我的帖子创建了一个元框，它可以保存三个值 0、1、2 之一。使用选择控件选择该值。

我也检查了我的数据库记录，元数据存储在数据库中，但我无法查询元值。

我用来查询包含元值的帖子的代码如下：

```
$args               =   array(
    'category__in'      =>  array(
        22
    ),
    'posts_per_page'    =>  1,
    'meta_query'        =>  array(
        array(
            'key'          =>  'postStatus',
            'value'        =>  1,
            'compare'      =>  '='
        )
    )
);

$extremely_important    =   new WP_Query($args);

while($extremely_important->have_posts())
{
    $extremely_important->the_post();

    the_title();
} 
```

确切的问题是返回类别 22 的帖子，但返回最新的帖子，即没有将元值设置为 1。

有什么想法吗？

这是我在 SQL 插入语句中的 postmeta 表中的数据：

```
/*
-- Query: SELECT * FROM wp_postmeta WHERE post_id = 187754
LIMIT 0, 1000

-- Date: 2013-02-14 09:50
*/
INSERT INTO `wp_postmeta` (`meta_id`,`post_id`,`meta_key`,`meta_value`) VALUES (16847,187754,'_edit_last','1');
INSERT INTO `wp_postmeta` (`meta_id`,`post_id`,`meta_key`,`meta_value`) VALUES (16848,187754,'_TIP_protect_images_post','unchecked');
INSERT INTO `wp_postmeta` (`meta_id`,`post_id`,`meta_key`,`meta_value`) VALUES (16849,187754,'_TIP_protect_text_post','unchecked');
INSERT INTO `wp_postmeta` (`meta_id`,`post_id`,`meta_key`,`meta_value`) VALUES (16850,187754,'_thumbnail_id','166897');
INSERT INTO `wp_postmeta` (`meta_id`,`post_id`,`meta_key`,`meta_value`) VALUES (16851,187754,'_fpp_is_scheduled','');
INSERT INTO `wp_postmeta` (`meta_id`,`post_id`,`meta_key`,`meta_value`) VALUES (18502,187754,'_edit_lock','1360791749:1');
INSERT INTO `wp_postmeta` (`meta_id`,`post_id`,`meta_key`,`meta_value`) VALUES (18503,187754,'post_status','extremely_important');
INSERT INTO `wp_postmeta` (`meta_id`,`post_id`,`meta_key`,`meta_value`) VALUES (18504,187754,'postStatus','1'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:40:26.063

也许试试这个？

```
$args               =   

    array(
      'category__in'      =>  array(22),
      'posts_per_page'    =>  1,
      'meta_query'        =>  
           array(
                   'key'          =>  'postStatus',
                   'value'        =>  '1',
                   'compare'      =>  '=',
                   'type'        => 'NUMERIC'
                 )
    ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T07:42:59.620

~~需要发布类型声明。~~（每天学习新东西。post_type 默认为 post）。那你的陈述似乎有些不对劲。你确定 meta_key 是'postStatus'。例如不在数组中？

```
$post_query = new WP_Query( array(
    'post_type' => '',
    'posts_per_page' => 1,
    'category__in' => array( 22 ),
    'meta_query' => array(
        array(
            'key' => 'postStatus',
            'value' => 1
        )
    )
) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:37:23.263

您的 meta_query 应该如下所示：

```
 'meta_query' => array(
       array(
           'key' => 'postStatus',
           'value' => 1,
           'compare' => '=',
       )
   ) 
```

这是[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)类参考的链接

# python - 在 Python 中将多个变量附加到列表中

> ID：14860460
> 
> 赞同：18
> 
> 时间：2013-02-13T18:28:15.963
> 
> 标签：python, list, append

我想将几个变量附加到列表中。变量的数量不同。所有变量都以“volume”开头。我在想也许是通配符或其他东西可以做到。但我找不到这样的东西。任何想法如何解决这个问题？请注意，在此示例中它是三个变量，但也可以是五个或六个或任何值。

```
volumeA = 100
volumeB = 20
volumeC = 10

vol = []

vol.append(volume*) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-13T18:34:57.697

您可以使用`extend`将任何可迭代对象附加到列表中：

```
vol.extend((volumeA, volumeB, volumeC)) 
```

根据变量名的前缀对我来说有不好的代码味道，但你可以做到。（附加值的顺序未定义。）

```
vol.extend(value for name, value in locals().items() if name.startswith('volume')) 
```

如果订单很重要（恕我直言，仍然闻起来不对）：

```
vol.extend(value for name, value in sorted(locals().items(), key=lambda item: item[0]) if name.startswith('volume')) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T18:34:21.433

虽然你可以做到

```
vol = []
vol += [val for name, val in globals().items() if name.startswith('volume')]
# replace globals() with locals() if this is in a function 
```

更好的方法是使用字典而不是类似命名的变量：

```
volume = {
    'A': 100,
    'B': 20,
    'C': 10
}

vol = []
vol += volume.values() 
```

请注意，在后一种情况下，项目的顺序是未指定的，即您可以获得`[100,10,20]`或`[10,20,100]`。要按键的顺序添加项目，请使用：

```
vol += [volume[key] for key in sorted(volume)] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T18:34:26.513

**EDIT**从列表理解中删除`filter`，因为它强调这是一个令人震惊的想法。

我已经改变了它，所以它与所有其他答案都不太相似。

```
volumeA = 100
volumeB = 20
volumeC = 10

lst =  map(lambda x : x[1], filter(lambda x : x[0].startswith('volume'), globals().items()))
print lst 
```

输出

```
[100, 10, 20] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-13T19:00:47.033

你想添加变量的名称以及它们的值吗？

```
output=[]

output.append([(k,v) for k,v in globals().items() if k.startswith('volume')]) 
```

或者只是值：

```
output.append([v for k,v in globals().items() if k.startswith('volume')]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-30T08:18:03.017

如果我得到适当的问题，您正在尝试将不同变量中的不同值附加到列表中。让我们看看下面的例子。假设 ：

```
email = 'example@gmail.com'
pwd='Mypwd'

list = []

list.append(email)
list.append (pwd)

for row in list:
      print(row)

 # the output is :
 #example@gmail.com
 #Mypwd 
```

希望这会有所帮助，谢谢。

# backbone.js - 使用 Backbone.js 的选择性 history.back()

> ID：14860461
> 
> 赞同：9
> 
> 时间：2013-02-13T18:28:24.743
> 
> 标签：backbone.js, browser-history

我有一个 Backbone 应用程序。我正在使用 Backbone.history 来启用后退按钮。我们有一个页面（设置），它会自动加载需要用户输入的弹出窗口。如果用户选择取消，我想回到上一页。我可以使用 window.history.back() 来做到这一点。

问题是，如果用户通过在浏览器中输入 url 从另一个 url（如 google）直接进入该页面（app#settings），我想将用户重定向到主页（app/）而不是返回去谷歌。

我一直想不出任何办法来做到这一点。Backbone.history 看起来像存储来自浏览器的后退按钮的信息，因此即使它们刚刚到达应用程序，它也有历史记录。我也找不到查看以前网址的方法。

这可能吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-13T19:31:49.457

将后退导航逻辑包装在您自己的方法中。也许在路由器上：

```
var AppRouter = Backbone.Router.extend({

  initialize: function() {
    this.routesHit = 0;
    //keep count of number of routes handled by your application
    Backbone.history.on('route', function() { this.routesHit++; }, this);
  },

  back: function() {
    if(this.routesHit > 1) {
      //more than one route hit -> user did not land to current page directly
      window.history.back();
    } else {
      //otherwise go to the home page. Use replaceState if available so
      //the navigation doesn't create an extra history entry
      this.navigate('app/', {trigger:true, replace:true});
    }
  }
}); 
```

并使用路由器方法导航回来：

```
appRouter.back(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-04T01:09:41.343

我使用了[jevakallio](https://stackoverflow.com/questions/14860461/selective-history-back-using-backbone-js/14861505#14861505)的相同答案，但我遇到了与评论者 Jay Kumar 相同的问题：`routesHit`没有减去所以点击`appRouter.back()`足够多的次数会使用户退出应用程序，所以我添加了 3 行：

```
var AppRouter = Backbone.Router.extend({

  initialize: function() {
    this.routesHit = 0;
    //keep count of number of routes handled by your application
    Backbone.history.on('route', function() { this.routesHit++; }, this);
  },

  back: function() {
    if(this.routesHit > 1) {
      //more than one route hit -> user did not land to current page directly
      this.routesHit = this.routesHit - 2; //Added line: read below
      window.history.back();
    } else {
      //otherwise go to the home page. Use replaceState if available so
      //the navigation doesn't create an extra history entry
      if(Backbone.history.getFragment() != 'app/') //Added line: read below
        this.routesHit = 0; //Added line: read below
      this.navigate('app/', {trigger:true, replace:true});
    }
  }
}); 
```

并使用路由器方法导航回来：

```
appRouter.back(); 
```

添加的行：

第一个：从 中减去 2 `routesHit`，然后当它重定向到“返回”页面时，它会获得 1，所以实际上就像你做了一个负 1。

第二个：如果用户已经在“家”，就不会有重定向，所以不要对`routesHit`.

第三个：如果用户在他开始的地方并被送回“家”，请设置`routesHit = 0`，然后重定向到“家”`routesHit`时将再次为1。

# .htaccess - 更改 htaccess Joomla 以在子文件夹中使用 CI

> ID：14860465
> 
> 赞同：0
> 
> 时间：2013-02-13T18:28:56.710
> 
> 标签：.htaccess, codeigniter, joomla, url-rewriting, url-routing

目前，我有一个运行 joomla 1.5 的主站点和在 Codeignter 上制作的附加应用程序的子文件夹。

当我打开应用程序索引 dir url - www.mysite.com/app - 没关系，但如果我尝试更深入地使用应用程序，例如 www.mysite.com/app/controller/view - 我会得到传统的 joomla 404 页面。

问题是 joomla .htaccess 中的规则适用于指向服务器上真实文件夹的任何 url - 对于一个级别，但我如何才能使其 NOT_WORK 用于真实子文件夹中的 joomla。

当前的 joomla htaccess 是：

```
Options +FollowSymLinks
RewriteEngine On

RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L]

########## Begin - Rewrite rules to block out some common exploits
## If you experience problems on your site block out the operations listed below
## This attempts to block the most common type of exploit `attempts` to Joomla!
#
## Deny access to extension xml files (uncomment out to activate)
#<Files ~ "\.xml$">
#Order allow,deny
#Deny from all
#Satisfy all
#</Files>
## End of deny access to extension xml files
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]
# Block out any script trying to base64_encode crap to send via URL
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR]
# Block out any script that includes a <script> tag in URL
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
# Block out any script trying to set a PHP GLOBALS variable via URL
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
# Block out any script trying to modify a _REQUEST variable via URL
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
# Send all blocked request to homepage with 403 Forbidden error!
RewriteRule ^(.*)$ index.php [F,L]
# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:06:41.247

您可以添加`RewriteCond %{REQUEST_URI} !^/app`到您的 .htaccess 文件中。

所以它看起来像这样：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/index.php
RewriteCond %{REQUEST_URI} !^/app
RewriteCond %{REQUEST_URI} (/|\.php|\.html|\.htm|\.feed|\.pdf|\.raw|/[^.]*)$  [NC]
RewriteRule (.*) index.php
RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization},L] 
```

您还必须将这样的 .htaccess 文件添加到您的应用程序文件夹中：

```
RewriteEngine on
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /app/index.php/$1 [L] 
```

# javascript - 测试 blob url

> ID：14860466
> 
> 赞同：1
> 
> 时间：2013-02-13T18:28:57.423
> 
> 标签：javascript, jquery, html, blob

我正在使用该`Window.URL.createObjectURL`函数为本地视频文件生成一个 blob url，然后我用它来设置`<video>`元素的源。这会在首次构建 URL 时加载视频，并且一切正常。但是当网页重新加载时，生成的 URL 不再有效——浏览器会自动撤销生成的 URL。

我的问题：有没有办法确定这个 Blob URL 是否真的被撤销了？换句话说，我如何确定我是否仍然可以使用 javascript、jquery 或其他任何选项来使用这个 Blob url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:32:01.187

我想出了一个简单的解决方案，它可以工作......尽管可能并不理想。

基本上，我获取 url，将`<video>`src 设置为该 url，然后将 jquery`error`事件处理程序附加到它。如果`error`事件被调用（如果 blob url 已被撤销），我会提示用户重新选择他们的视频文件。

# .net - .net 实体框架多对多

> ID：14860467
> 
> 赞同：-1
> 
> 时间：2013-02-13T18:29:09.210
> 
> 标签：.net, entity-framework, checkbox, many-to-many

我有这些模型

```
clients(id,name,address)
cars(id,platenum)
client_cars(clientid,carid) 
```

我想做的是添加`cars`到 a`client`并将数据保存到`client_cars`表中。添加数据的表单将具有车牌号复选框。有谁知道实现这种想法的好例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:39:30.523

使用 EF，您的概念模型不应包含多对多表。它仅在商店模型中。您的对象应该看起来更像这样：

```
clients(id,name,address, cars[])
cars(id,platenum, clients[]) 
```

在 UI 中，您通常会有一个包含客户信息和汽车列表的客户表单。此外，您的汽车

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:22:27.393

我找到了这个例子，它回答了我的问题：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework -in-an-asp-net-mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T21:52:44.067

您始终可以在 SimpleMembership 中使用该示例，该示例具有：

**角色**

```
[Table("webpages_Roles")]//3
public class Role
{
    public Role()
    {
        Members = new List<Membership>();
    }

    [Key]
    public int RoleId { get; set; }

    [StringLength(256)]
    public string RoleName { get; set; }

    public ICollection<Membership> Members { get; set; }
} 
```

**会员资格**

```
[Table("webpages_Membership")]//1
public class Membership
{
    public Membership()
    {
        Roles = new List<Role>();
        OAuthMemberships = new List<OAuthMembership>();
    }

    [Key, DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int UserId { get; set; }

    public DateTime? CreateDate { get; set; }

    [StringLength(128)]
    public string ConfirmationToken { get; set; }

    public bool? IsConfirmed { get; set; }

    public DateTime? LastPasswordFailureDate { get; set; }

    public int PasswordFailuresSinceLastSuccess { get; set; }

    [Required, StringLength(128)]
    public string Password { get; set; }

    public DateTime? PasswordChangedDate { get; set; }

    [Required, StringLength(128)]
    public string PasswordSalt { get; set; }

    [StringLength(128)]
    public string PasswordVerificationToken { get; set; }

    public DateTime? PasswordVerificationTokenExpirationDate { get; set; }

    public ICollection<Role> Roles { get; set; }

    [ForeignKey("UserId")]
    public ICollection<OAuthMembership> OAuthMemberships { get; set; }
} 
```

**用户角色**

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Membership>()
          .HasMany<Role>(r => r.Roles)
          .WithMany(u => u.Members)
          .Map(m =>
          {
              m.ToTable("webpages_UsersInRoles");
              m.MapLeftKey("UserId");
              m.MapRightKey("RoleId");
          });
    } 
```

抱歉，我本可以简化代码，但我不想更改原始类的任何内容。但这几乎应该让您对如何做到这一点有所了解。

# events - 有没有办法完全禁用高图上的鼠标悬停？

> ID：14860471
> 
> 赞同：2
> 
> 时间：2013-02-13T18:29:21.437
> 
> 标签：events, user-interface, highcharts, mouse, mouseevent

我正在建立一个使用 highcharts 的网站。当我在移动设备上查看该网站时，在图形区域内触摸会弹出工具提示，从而防止滚动。正如其他 SO 问题中所建议的那样，我已经尝试了以下所有方法，但均未成功：

```
$('#graph-container').click(function() { return false; });
$('#graph-container').children().click(function() { return false; });
chart.container.onclick = null;

plotOptions: {
    series: {
        enableMouseTracking: false // (stops tooltip but still blocks scrolling)
    }
} 
```

现在，我添加了第二个 div 来覆盖移动设备上的图表，因此用户触摸 div 而不是图表，但这更像是一种解决方法而不是解决方案。我还尝试使用 Chrome 控制台中的 $('svg').off() 之类的东西从图表的每个元素中删除所有侦听器，而图表的行为没有任何明显的变化。有没有办法做到这一点，我错过了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:51:34.180

Highcharts JS v2.3.5 (2012-12-19)

小黑客：

编辑行：9026：this.setDOMEvents();

into: // this.setDOMEvents();

或删除它。

我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:27:03.140

在这里你可以找到简单的[Gist](https://gist.github.com/slawekkolodziej/2983403)。

此外，在即将到来的 Highcharts 3.0 中，触摸事件应该会升级并修复类似的问题。请参阅路线图：[http ://www.highcharts.com/support/roadmap](http://www.highcharts.com/support/roadmap)

# scala - Play Famework 2.1 Websockets 周围是否有 Comet 适配器？

> ID：14860475
> 
> 赞同：2
> 
> 时间：2013-02-13T18:29:28.610
> 
> 标签：scala, websocket, comet, playframework-2.1

所以我制作了这个网站来使用 websockets。在我的本地主机上一切都很好，然后我决定在 Heroku 上进行部署。这破坏了网站，因为 Heroku 不支持 websockets！

我想知道是否有人编写了一个简单的适配器，允许我在前端使用 Comet，并欺骗我的 Scala Play 2.1 服务器认为它在后端使用 websockets。然后我可以在前端使用另一个适配器来欺骗它，让它认为它也在使用 websockets，我不必更改太多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:35:54.737

我用谷歌找到了这个：[http ://www.playframework.com/documentation/2.0/ScalaComet](http://www.playframework.com/documentation/2.0/ScalaComet)

那是你需要的吗？

# c# - 使用 Settings.settings 或 SQL 数据库？

> ID：14860476
> 
> 赞同：1
> 
> 时间：2013-02-13T18:29:31.477
> 
> 标签：c#, winforms

我正在使用 Visual Studio 学习 C#，但遇到了一些问题。

我正在开发一个 Windows 窗体应用程序。该应用程序旨在跟踪用户的运行统计信息。

在设置中：他们选择跑步的天数以及每天添加锻炼（即：1：100 米冲刺 2：50 米冲刺 3：跑一英里）。

然后在主窗口窗体中，用户将能够添加他们的时间并保存它。同时，他们的时间图会被投影——这将允许用户跟踪他们的进度。

我的问题是我应该在哪里存储他们的时间？现在我将所有设置存储在 settings.settings 文档中。我应该使用设置文件还是某种 SQL 数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:32:51.497

[SqlCE](http://en.wikipedia.org/wiki/SQL_Server_Compact)或[SQLite](http://en.wikipedia.org/wiki/SQLite)或任何其他简单的 inproc 数据库将比设置文件更好。

设置并不意味着随着每个用户输入而增长，这是数据库的任务，使用`SQL`.

*在评论中回答您的问题：*

**用户数据**和**用户偏好**是有区别的。您必须决定哪些是您的应用程序中的内容。

我会使用 Settings 文件，其中包含有关**用户首选项**的所有内容。像表单布局、颜色、声音、窗口大小等。

由于设置管理框架非常复杂，您将节省一些时间为用户偏好设计表格并开发对这些表格的访问。

设置文件的另一个可能亮点 - 可以使用文本编辑器手动编辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:52:30.817

如果没有更多关于“用户的运行统计信息”是什么以及如何使用它的信息，就不可能回答您。不过，我可以给出一些一般性的指导方针。

`System.Configuration.ApplicationSettings`旨在为特定用户定制应用程序；例如，用户希望应用程序使用什么语言，他希望窗口出现在哪里，或默认值。设置是应用程序的一部分；它们在安装应用程序时创建，在卸载应用程序时删除。如果多个用户运行该应用程序，每个用户通常都会获得自己的设置。您通常在创建应用程序时定义设置，而用户从不添加或删除它们。

数据库用于保存用户数据。它们通常不依赖于特定的用户或应用程序；用户添加数据，这些数据可供其他用户或应用程序使用。应用程序通常不会随所有用户数据一起安装，也不会在卸载应用程序时删除用户数据。

SQL 数据库用于关系数据；具有内部结构的数据，例如“所有用户必须只有一个地址”或“任何用户可能有零个或多个电话号码”。如果您的数据不是关系数据，则不需要关系数据库。

这些是一般指南，特定应用程序可能会针对特定目的做不同的事情。如果您告诉我们更多关于您的申请的信息，我们将能够提供更具体的信息。

# javascript - 在 javascript 上模拟 ctrl+v 事件

> ID：14860478
> 
> 赞同：4
> 
> 时间：2013-02-13T18:29:33.517
> 
> 标签：javascript, copy-paste, keyevent

我尝试在javascript中模拟`Ctrl`+ 。`V`我在 Linux 中使用 Firefox。我要做的是：

```
var pressEvent = document.createEvent ("KeyboardEvent");    
pressEvent.initKeyEvent ("keypress", true, true, window, true, false, false, false, 86, 0);
var accepted=aTarget.dispatchEvent (pressEvent); 
```

有人知道为什么它不起作用吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T18:34:56.253

复制和粘贴以及剪贴板本身都受到很好的保护。除非有明确的用户操作，否则它不适用于模拟。如果您在输入框中创建一个模拟粘贴的脚本，然后将其提交到您的服务器，您可能会从人员剪贴板中获得一些非常私密的信息。所以……不，据我所知，这行不通。我希望你或其他人证明我错了并分享解决方案。

但是一定要告诉你打算做什么，也许有一个不涉及这个模拟动作的解决方法。

# java - 使用JFrame时，add()方法从何而来？

> ID：14860479
> 
> 赞同：0
> 
> 时间：2013-02-13T18:29:44.500
> 
> 标签：java, swing, jframe, jpanel

我一直在互联网上漫游，寻找这个问题的答案，但空手而归。

我正在学习大学的 JFrame 实践，并使用我的讲义和实践指导表上的建议，我有这个基本代码：

```
public HelloFrameMenu()
{
    message = "Hello, World!";
    label = new JLabel(message);
    label.setFont(new Font("Serif", Font.PLAIN, DEFAULT_SIZE));
    add(label, BorderLayout.CENTER);
    createSouthPanel();

    setSize(FRAME_WIDTH, FRAME_HEIGHT);
} 
```

这会在我的 JPanel 上创建一条文本消息并执行 createSouthPanel() 方法，该方法工作正常并将一些菜单列表添加到 JFrame。

我的问题是关于添加功能。我不明白这是什么的一部分。我想如果它是一个静态方法，它的类名会在它之前。因为它不是，我认为它是 JFrame 包的一部分或由 Java 自动加载的类之一，但我在任何一个中都找不到该方法。

这种方法从何而来？
为什么前面没有任何东西？
还有什么其他方法可以像这样使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:32:45.457

如果您查看[javadoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)，您会发现`add`. `JFrame`但是，有几个`add`方法是从 Container 和 Component 继承的，这些方法都列在“*继承自...的方法”*部分中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:33:03.723

[JFrame#add](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add%28java.awt.Component%29)是一个实例方法，它继承自`java.awt.Container`. 它没有在我的任何实例之前，因为您`JFrame`直接将 a 子类化了。通常您不会向框架添加任何新功能，因此首选方法是直接创建一个实例并使用：

```
JFrame myFrame = new JFrame();
...
myFrame.add(...); 
```

查看[javadoc](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)了解所有可用的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:34:01.360

您可以将其视为“this.add”，因为它是从 Container 继承的成员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T18:36:03.820

类`HelloFrameMenu`必须扩展`JFrame`，`add`方法来自[Container](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html)，用于向框架添加可视组件。如果`add`和`setSize`以**super**为前缀（例如`super.add(...)`）会更容易理解，这是我一直用来表示该方法来自超类的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T18:36:35.580

这与继承有关。Java 是一种面向对象的语言，这意味着（几乎）一切都是对象。

然后可以按层次结构排列对象。
例如，一个 Cat 对象可能会扩展一个 Animal 对象。它继承了Animal的所有行为（方法），并且可以添加自己的。

在您的情况下，JFrame 扩展了 Container 并且 Container 有一个 add 方法。

# php - 如何使用 PHP 的 DomDocument 加载 DocBook XML 文件，该文件在其他文件中定义了命名实体？

> ID：14860480
> 
> 赞同：1
> 
> 时间：2013-02-13T18:29:47.253
> 
> 标签：php, xml, domdocument, xml-entities

我正在尝试从[在线文档的 PHP 存储库中](https://svn.php.net/repository/phpdoc/en/)加载 XML 文件。它符合 DocBook 标准。

但是，当我加载 XML 文件时，会出现以下错误：

> 警告：DOMDocument::load(): 实体 'reftitle.intro' 未定义

我有点理解这个错误，但我在修复它时遇到了问题。我尝试使用外部实体加载器回调（[`libxml_set_external_entity_loader`](http://php.net/libxml_set_external_entity_loader)），但它只被调用一次，用于文件本身。

所以不知何故，我认为我需要告诉 DOMDocument a) 忽略那些未定义的实体或 b) 提供这些实体。

有一个名为的文件`language-defs.ent`，其中包含所有这些实体，例如在 DTD 中，例如：

```
<!ENTITY reftitle.intro        '<title xmlns="http://docbook.org/ns/docbook">Introduction</title>'> 
```

但我不知道如何利用它。也许这只是一天中的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T00:08:56.327

大致目前，因为我不知道为什么，但是（一个可能已经足够了）：

```
$fake = '<?xml version="1.0"?>
<!DOCTYPE book [
<!ENTITY % myent SYSTEM "file:///c:/path%20to/phpdoc-en-svn/extensions.ent">
%myent;
<!ENTITY % myent SYSTEM "file:///c:/path%20to/phpdoc-en-svn/language-defs.ent">
%myent;
<!ENTITY % myent SYSTEM "file:///c:/path%20to/phpdoc-en-svn/language-snippets.ent">
%myent;
]>'; 
```

然后（所有 XML`$file`都带有需要删除的 XML 声明）：

```
$doc = new DOMDocument();
$buffer = file_get_contents($file);
libxml_use_internal_errors(true);
$result = $doc->loadXML($fake.strstr($buffer, "\n")); 
```

然后它就可以工作了。它仍然有错误，因此`libxml_use_internal_errors`正在加载 XML 文件。

并非所有实体都已解决。

# android - 如何从 db 文件升级 sqlite 数据库

> ID：14860485
> 
> 赞同：1
> 
> 时间：2013-02-13T18:30:11.883
> 
> 标签：android, sqlite, upgrade, android-sqlite

我有使用 SQLite 数据库的 Android 应用程序。我想使用[这个转换器](http://www.codeproject.com/Articles/26932/Convert-SQL-Server-DB-to-SQLite-DB)从 SQLServer 创建的 SQLite *.db 文件升级数据库。任何想法或示例如何做到这一点？

谢谢！

# php - 从分页中删除指向当前页面的超链接

> ID：14860490
> 
> 赞同：0
> 
> 时间：2013-02-13T18:30:28.333
> 
> 标签：php, javascript, html, pagination

我有动态结果集，它们产生分页超链接，将结果分成多个页面。但是我怎样才能改变这个，以便当前页面的链接是非超链接的，也许还有不同的颜色或字体粗细？谢谢。

```
if($rs_result->num_rows >10){
   $page_range_offset = 4;
   $page_start = $page - $page_range_offset;
if ($page_start < 1) {
    $page_start = 1;
   }

    $page_end = $page + $page_range_offset;
if ($page_end > $total_pages) {
    $page_end = $total_pages;
  }

     $pages = "<p>";
for ($i=$page_start; $i<=$page_end; $i++) {
     $pages .="<a href='inbox.html?page=".$i."'>".$i."</a> ";
  }
     $pages .="</p>";
     echo $pages;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:33:18.267

像下面这样的东西怎么样？

```
for ($i=$page_start; $i<=$page_end; $i++)
{

  if ($i == $page)
  {
    $pages .= '<span style="color: #000000">' . $i . '</span>';
  }

  else
  {
     $pages .="<a href='inbox.html?page=".$i."'>".$i."</a>";
  }

} 
```

# html - 如何正确关闭标签？

> ID：14860492
> 
> 赞同：150
> 
> 时间：2013-02-13T18:30:41.967
> 
> 标签：html

```
<img src='stackoverflow.png'>
<img src='stackoverflow.png'></img>
<img src='stackoverflow.png' /> 
```

其中哪一个是正确的？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2013-02-13T18:37:10.930

这是一个[有效的 HTML5](http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements)，不关闭它绝对没问题。它是一个所谓的 void 元素：

```
<img src='stackoverflow.png'> 
```

以下是有效的 XHTML 标记。他们必须关闭。后一个在 HTML 5 中也很好：

```
<img src='stackoverflow.png'></img>
<img src='stackoverflow.png' /> 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-02-13T18:33:55.747

```
<img src='stackoverflow.png' /> 
```

工作正常并正确关闭标签。最好为视障人士添加该`alt`属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-29T00:26:13.773

实际上，只有第一个在 HTML5 中[有效](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img)

```
<img src='stackoverflow.png'> 
```

只有最后两个在 XHTML 中有效

```
<img src='stackoverflow.png'></img>  
<img src='stackoverflow.png' /> 
```

*（虽然不是严格要求，`alt`但也应该包括一个属性_通常_）。*

也就是说，您的 HTML5 页面可能会按预期显示，因为浏览器会将您的 html 重写或解释为它认为您的意思。这*可能*意味着它将一个标签，例如，从
`<div />`变成`<div></div>`. 或者它只是忽略了最后的斜线`<img ... />`。
[请参阅 2016：将 HTML5 用作 XHTML 5.0 以进行遗留验证。](https://stackoverflow.com/a/38068359/5411817)
*[请参阅：2011 讨论和其他链接，尽管随着时间的推移，一些位可能已经改变](https://stackoverflow.com/a/3558200/5411817)*

部分原因是浏览器非常努力地进行错误纠正。另外，因为自闭标签和无效标签有很多混淆。最后，规范已经改变，或者并不总是很清楚，并且浏览器试图向后兼容。

因此，虽然您可以选择这三个选项中的任何一个，但
只有第一个符合 HTML5 标准，并且保证通过 HTML5 验证器。

一个合理的策略可能是：

*   编写不带右斜杠的新代码。
*   重构代码时，更新附近的图像标签，当你遇到它们时。
*   除非有特殊需要，否则不要过分担心您不接触的遗留文件中的标签。

以下是[HTML5 中不应关闭的标签](https://developer.mozilla.org/en-US/docs/Glossary/Empty_element)列表：

```
 <br>    <hr>    <input>       
 <img>  <link>   <source>  
 <col>  <area>   <base>
 <meta> <embed>  <param>  
<track>  <wbr>   <keygen> (HTML 5.2 Draft removed) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-15T16:39:36.857

两个都是正确的答案。HTML5 遵循严格的规则，在 HTML5 中我们可以关闭所有标签。因此，这取决于您使用 HTML5 还是 HTML 并遵循适当的答案。

```
<img src='stackoverflow.png'>
<img src='stackoverflow.png' /> 
```

第二个属性更合适。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-15T17:56:40.287

**您应该使用的标签的最佳用途：**

```
<img src="" alt=""/> 
```

**您也可以在 HTML5 中使用：**

```
<img src="" alt=""> 
```

这两个在 HTML5 中完全有效 选择其中一个并坚持下去。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-29T15:41:41.287

如果您尝试使用 XHTML 解析器读取结束标记，那么使用结束标记会很有帮助。可能是一个边缘案例，但我一直这样做。拥有它并没有什么坏处，这意味着我知道我们可以使用一组 XML 阅读器，当它们碰到未闭合的标签时它们不会倒下。

如果您永远不会尝试解析内容，请忽略关闭。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-11-15T16:43:15.410

-标签是空的，它只包含属性。-标签没有“关闭”标签。

所以，

```
<img src='stackoverflow.png'>
<img src='stackoverflow.png' /> 
```

两者在 HTML5 中也是正确的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-17T18:56:29.517

不幸的是，上述解决方案在我的情况下不起作用 - 可能是因为将按钮放在了表单标签中。这段代码...

```
<input class="button" type="submit" value=" ">
    <img src="../assets/logo.png" alt="test" />
</input> 
```

...总是导致错误（有或没有 img 标签的右斜杠）：

```
error  Parsing error: x-invalid-end-tag  vue/no-parsing-error

✖ 1 problem (1 error, 0 warnings) 
```

一种可行的解决方法是通过 css 将图像定义为背景图像。

html 片段仅描述按钮。value 属性包含一个空格，以抑制某些浏览器显示不需要的默认文本。

```
<input class="button" type="submit" value=" " /> 
```

CSS 定义了按钮的背景图片：

```
.button {
  display: block;
  width: 6em;
  height: 6em;
  color: white;
  background-color: #639f59;
  padding: 0.4em 1.2em;
  box-shadow: inset 0 -0.6em 1em -0.35em rgba(5, 122, 11, 0.30),
    inset 0 0.6em 2em -0.3em rgba(255, 255, 255, 0.30),
    inset 0 0 0em 0.05em rgba(255, 255, 255, 0.30);
  cursor: pointer;
  background: url("../assets/logo.png") ;
  background-repeat: no-repeat;
  background-size: 6em;
  background-position: center;
  border: 0;
  border-radius: 3em;
} 
```

# java - Viewflipper 不翻转

> ID：14860493
> 
> 赞同：1
> 
> 时间：2013-02-13T18:30:46.910
> 
> 标签：java, android

**我正在创建一个 Viewflipper。但是，当我跑步并尝试在屏幕上移动我的手时，什么也没有发生。我错过了什么？谢谢**

这是java代码。

 **```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gallery);

    flipper = (ViewFlipper)findViewById(R.id.flipperGallery);
    flipper.setOnTouchListener((android.view.View.OnTouchListener) this);
}

@Override
public boolean onTouchEvent(MotionEvent touchevent) {
switch (touchevent.getAction())
{
    case MotionEvent.ACTION_DOWN:
    {
    lastX = touchevent.getX();
    Toast.makeText(this, "X: " + lastX, Toast.LENGTH_LONG).show();

    break;
    }
case MotionEvent.ACTION_UP:
    {
    float currentX = touchevent.getX();
    if (lastX < currentX){
        Toast.makeText(this, "scroll right: ", Toast.LENGTH_LONG).show();

        if (flipper.getDisplayedChild()==0) break;
        flipper.setInAnimation(this, R.anim.in_from_left);
        flipper.setOutAnimation(this, R.anim.out_to_right);
        flipper.showNext();
        }
    if (lastX > currentX){
        Toast.makeText(this, "scroll left: ", Toast.LENGTH_LONG).show();

        if (flipper.getDisplayedChild()==1) break;
        flipper.setInAnimation(this, R.anim.in_from_right);
        flipper.setOutAnimation(R.anim.out_to_left);
        flipper.showPrevious();
        }
    break;
    }
}
return false;
} 
```

我正在创建一个 Viewflipper。但是，当我跑步并尝试在屏幕上移动我的手时，什么也没有发生。我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:40:47.110

当您在 onTouchEvent 中收到 ACTION_DOWN 并返回 false 时，您不会收到任何进一步的事件，例如 ACTION_UP，...
试试这个：

```
case MotionEvent.ACTION_DOWN:
{
lastX = touchevent.getX();
Toast.makeText(this, "X: " + lastX, Toast.LENGTH_LONG).show();

return true;
} 
```**

# java - 整数的反向数组索引

> ID：14860498
> 
> 赞同：1
> 
> 时间：2013-02-13T18:31:09.227
> 
> 标签：java, arrays

我正在尝试反转一个 int 值数组。它似乎没有正确地做到这一点。你会注意到我以不同的方式打印，比如`Array.toString()`和使用`println`.

原始数组打印：

```
1 4 9 16 9 
```

我需要它来打印：

```
9 16 9 4 1 
```

这是我的代码：

```
import java.util.Arrays;

public class ReverseArray {
    public static void main(String[] args) {
        int[] data = { 1, 4, 9, 16, 9 };
        reverseArray(data);
        int[] dataR = reverseArray(data);
        System.out.println("Reveresed data " + Arrays.toString(dataR));
    }

    public static int[] reverseArray(int[] data) { // returns the reverse of the
                                                    // array data
        // int [] data = new int[5];
        int[] reversedData = new int[data.length];

        data[0] = 1;
        data[1] = 4;
        data[2] = 9;
        data[3] = 16;
        data[4] = 9;

        System.out.println(Arrays.toString(data));
        for (int i = 0; i < data.length - 1; i++) {
            System.out.println("Original Array: " + data[i]);
        }

        int reveresedData[] = data;

        for (int i = 0; i < reveresedData.length - 1; i++) {
            reversedData[(data.length - 1) - i] = data[i];
            System.out.println(reveresedData[i]);
        }
        return reveresedData;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:32:11.567

问题在于：

```
int reveresedData[] = data; 
```

`reveresedData`指向与 相同的数组`data`。相反，您需要创建一个新数组（或更改算法，以便将数组反转到位）。

要创建一个新数组，您可以使用以下任一方法：

```
int reveresedData[] = new int[data.length];
int reveresedData[] = data.clone(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:43:05.660

（使用 For each loop : Smarter way）创建一个方法如下：

```
 private int[] reverseArray(int [] array1){
        int index=array1.length;
        int [] array2 = new int[index];
        for(int i:array1){
            array2[index-1]= i;
            index--;
        }
        return array2;    
} 
```

并称它为：

```
int [] array1 = {1,2,3};
int reversedArray[] = reverseArray(array1); 
```

就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:35:07.797

应该是这样的：

```
int reversed[] = new int[data.length]; 
```

这将为一个新数组分配空间，您可以以相反的顺序填充数据的值。

```
for (int i = 0,j=reversed.length-1; i < reversed.length-1; i++;j--){
        reversed[i]=data[j];
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T22:49:15.020

这是反转任意大小数组的基本方法。它反转原始数组。

```
public class ReverseMyArray {
public static int[] reverseArray(int[] array) {
    for(int i=0; i<array.length/2; i++) {
        int temp = array[i];                    // temp is a temporary variable of type int
        array[i] = array[array.length-1-i];
        array[array.length-1-i] = temp;
    }
    return array;
}

public static void main(String[] args) {
    int[] array = {1,4,9,16,9};
    int[] newArray = reverseArray(array);
    for(int i=0; i<newArray.length; i++) {          
        System.out.print(newArray[i]+" ");      // Print the reversed array values
    }
}
} 
```

# c++ - linux下的Eclipse juno颜色主题bug？

> ID：14860501
> 
> 赞同：1
> 
> 时间：2013-02-13T18:31:21.123
> 
> 标签：c++, eclipse

我已经安装了 Eclipse Color Theme 0.12.0。我注意到当我双击一个变量然后单击它时，它会留下一个灰色的突出显示。我看不到找到解决此问题的设置。

在没有 sudo 权限的 Fedora Linux (15) 上运行。

有这个设置吗？

![日食朱诺错误](../Images/2d41f3eaaf40288cbc89aefbd33c0a96.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:16:25.500

检查窗口 -> 首选项 -> 编辑器 -> 文本编辑器 -> 注释 -> 出现次数。

这将允许您更改是否出现其他变量/等。突出显示。

此外，另一个值得一看的地方是

窗口 -> 首选项 -> C/C++ -> 编辑器 -> 标记出现（这也有指向上述位置的链接）。

取消选中该选择也应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:18:26.420

Eclipse 突出显示所有出现的符号。您需要更改这种情况的背景 - 不幸的是，Eclipse 有**很多**定义颜色的地方，所以您需要进行一些试验才能找到“突出显示符号”的背景 - 或者它的调用方式 - 是定义的.

PS 另外，我尝试了几次颜色主题，它非常有问题。但不是朱诺。

# javascript - 在将 DOM 加载到浏览器结束时执行脚本标记

> ID：14860503
> 
> 赞同：-1
> 
> 时间：2013-02-13T18:31:24.143
> 
> 标签：javascript, html, user-controls

我想将一些变量的值从 js 文件传输到具有脚本标记的用户控件，在该脚本标记中访问变量以进行操作。但我无法获得变量的值。所以请让我知道如何将变量从 js 传递到另一个 js 或具有脚本标签的用户控件。我认为首先加载控件，然后它的值未知，所以它给出错误，然后加载 js。请帮助我的人。

像这样的例子

```
<script src="myjs.js">
<SCRIPT type="text/javascript">
--- Some code for manipulation 
</SCRIPT>
<div>
   <table>
    -------- some more structure here 
   </table>
</div> 
```

我想像 div 表和所有结构一样按顺序执行标签，然后加载外部 java 脚本文件，最后执行脚本标签的内部代码。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T18:59:59.737

1.  您可以将整个脚本标签移动到底部。
2.  对于外部引用的脚本，您可以使用`defer`脚本标签上的参数。
3.  或者，像其他人一样，在页面上添加一个事件处理程序以在页面加载时触发

    ```
    window.onload = function() { everything in dom is there } 
    ```

这个功能可以在页眉或页面内的任何地方。在页面加载之前不会触发该功能。

# actionscript-3 - AS3 对象旋转问题

> ID：14860505
> 
> 赞同：1
> 
> 时间：2013-02-13T18:31:35.467
> 
> 标签：actionscript-3

我会问一个更简单的问题。让我们说无论如何，但我已经计算了对象中心和鼠标（角度）之间的线的旋转。从北 aka 0 开始，沿 CW 循环到北附近的 359。我要求 AS3 “object.rotation = angle;” 每一帧。我有 2 个显示值“角度”和“object.rotation”的文本区域。180 之后 object.rotation 变为 -180 并倒退到 0。为什么会这样？

更简单。我得到值A，然后说A = B。然后要求计算机显示A并显示B。在180到360处，B = B-360。

旋转是令人满意的，但数字是错误的。需要解释为什么数字不合适。需要有关如何使对象旋转范围为 0-360 并由 I 输入的数字直接确定的建议。就我而言，“角度”。

这意味着如果我输入旋转 2892 它应该是它（是的，8 * 360 + 12），而不是 12，不是 -348 ......即使这些在视觉上代表相同的旋转。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:41:50.370

看起来你被它困住了。从[文档中：](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#rotation)

> 从 0 到 180 的值代表顺时针旋转；从 0 到 -180 的值表示逆时针旋转。超出此范围的值被添加到 360 或从 360 中减去以获得该范围内的值。例如，语句 my_video.rotation = 450 与 my_video.rotation = 90 相同。

如果要存储 2892 而不是 12，则必须手动跟踪它。

当您输入非标准内容时，他们会为您标准化。我认为这是为了让使用设计器的人更容易，尽管也许一些图形优化也依赖于它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T18:44:11.540

我预计这是 Flash 溢出保护的结果。想象一个影片剪辑转了一小时，每一帧它的旋转增加了 50。如果没有这样的剪辑，它的旋转值最终会以百万计，这将导致精度和性能损失（在某些情况下） 10000000*PI/180 的正弦值。因此，为了防止出现不希望的或不同的行为，Flash 播放器的开发人员使实际旋转以 -180...180 的间隔返回。

您可能会尝试覆盖旋转 setter/getter 函数，以便按原样保留传递的结果。

```
class RotationTest extends Sprite {
    private var myRotation:Number;
    public override function set rotation(value:Number):void {
        super.rotation=value;
        myRotation=value;
    }
    public override function get rotation():Number { return myRotation; }
} 
```

# c# - 像 JavaScript 一样在 C# 中解析 XML

> ID：14860509
> 
> 赞同：0
> 
> 时间：2013-02-13T18:31:45.357
> 
> 标签：c#, xml, json, parsing

我知道每个人都说在 C# 中解析 XML 的最佳方法是使用 XmlDocument 类并执行以下操作：

```
XmlNodeList list = xmlDoc.getElementsByTagName('tag'); 
```

但是，我**喜欢**JavaScript 封装其 XML 和 JSON 的方式，其中 XML 或 JSON 文档中的每一级封装都可以使用“.”来访问。IE：

测试.xml

```
<item>
 <title>Title</title>
 <desc>
    <meta>MetaData</meta>
    <content>Ipsum Lorem</content>
 </desc>
 <date>1/1/2013</date>
</item> 
```

在 javasript 中，我可以解析这个 XML 文件并将其分配给一个对象 var obj。然后我可以做类似的事情：

```
obj.item[0].title ( 'Title' )
obj.item[0].desc.meta ('MetaData') 
```

是否有任何 C# 库可以将 XML 解析成这样的东西，还是我必须以其他方式来做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:35:57.477

不完全相同，但这种方法（将 XML 读入动态对象）在本质上是相似的：

[http://www.codeproject.com/Articles/436406/Power-of-Dynamic-Reading-XML-and-CSV-files-made-ea](http://www.codeproject.com/Articles/436406/Power-of-Dynamic-Reading-XML-and-CSV-files-made-ea)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:40:37.377

您可能还想看一下应该包含在您的 Visual Studio 安装中的工具：xsd.exe。具体看一下 /classes 开关。它不是您正在寻找的东西，但它会产生类似的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:55:07.290

如果您想进入 C# 和 的动态方面， @amazedsaint 提供`ExpandoObject`了一个**非常**聪明的库，看起来就像您所追求的那样：

*   介绍性博客文章：[介绍使用 .NET 4.0 动态特性实现的 ElasticObject - 在 CSharp 中使用 XML 的更简单方法，ExpandoObject 的更聪明的表亲](http://www.amazedsaint.com/2010/02/introducing-elasticobject-for-net-40.html)

*   源代码：[CodePlex 上的 ElasticObject](http://elasticobject.codeplex.com/)

*   Codeproject 文章：[动态 C# 4.0 历险记 - ExpandoObject、ElasticObject 和 Twitter 客户端在 10 分钟内完成](http://www.codeproject.com/Articles/62839/Adventures-with-C-4-0-dynamic-ExpandoObject-Elasti)

例子：

```
dynamic item = new ElasticObject("item");
item.Title = "Title";
item.Desc = new { Meta = "Metadata", Content="Lorem Ipsum" };
XElement asXml = item > FormatType.Xml;

// and from xml:
dynamic itemFromXml = asXml.ToElastic(); 
```

# java - Rabbit MQ - 为什么我的设置不向所有客户端提供消息？

> ID：14860510
> 
> 赞同：0
> 
> 时间：2013-02-13T18:31:50.890
> 
> 标签：java, ruby, jruby, rabbitmq

我在 JRuby 中有代码：

```
class Receiver

  def initialize(channel_id)
    @channel_id = channel_id

    factory = ConnectionFactory.new
    factory.setHost("localhost")
    connection = factory.newConnection
    @channel = connection.createChannel
    @channel.exchangeDeclare(exchange_name, "direct");
    @channel.queueDeclare(queue_name, true, false, false, nil)
    @channel.queueBind(queue_name, exchange_name, routing_key)
    @consumer = QueueingConsumer.new(@channel);
    @channel.basicConsume(queue_name, true, @consumer);
  end

  def receive
    String.from_java_bytes @consumer.nextDelivery.getBody
  end

  private

  def queue_name
    @channel_id
  end

  def exchange_name
    @channel_id
  end

  def routing_key
    @channel_id
  end

end 
```

此代码负责在我的架构中获取消息。但是，当我有 ie。当我向此交换机发送消息时，具有相同 channel_id 的两个实例`Receiver`（基本上是交换机名称和路由密钥），一条消息发送给一个接收者，一个发送给另一个接收者。为什么，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:17:54.150

问题是您为什么要让 2 个代理同时订阅一个队列来执行某些操作？通常在 RabbitMQ 中，多个代理可以订阅一个队列，但它们都做同样的事情，这是出于冗余/负载平衡的目的。一个随机代理从队列中获取消息并确认它，然后清除它被其他任何人使用。

通常一个队列意味着一个动作，并且监听的代理是等价的并且可以接收消息。如果您想将消息发送到一个地方然后广播到多个代理，最好使用*扇出*交换并让每个代理在单独的队列上侦听。

所以把每个队列想象成它在做一件事。您所描述的行为正是预期的。

请参阅[本教程](http://www.rabbitmq.com/tutorials/tutorial-three-java.html)以获取有关设置扇出交换以及不同交换的作用的详细信息。

# css - CSS中的页脚高度与正文自动匹配？

> ID：14860516
> 
> 赞同：0
> 
> 时间：2013-02-13T18:32:07.300
> 
> 标签：css, footer

我的网站现在看起来很棒。除了在 iPhone 上，当直立时，我的内容和页脚之间有一个很大的丑陋空白。我希望页脚始终位于内容下方，但同时在任何地方都保持正确的外观。如何使页脚自动延伸到该内容并具有与页脚相同的颜色以填充页面的其余部分？

这是我的代码：

```
/********************
     Page Base 
********************/

html, body { 
height: 100%; 
width: 100%; 
overflow-x: hidden;  
margin:0; 
padding:0;
font-family: Tahoma, Geneva, sans-serif;
font-size: 12px; 
-webkit-font-smoothing: antialiased; 
font-smoothing: antialiased; 
}

img, a {
border:none;
outline: none;
}

#wrapper{ 
min-height:100%;
max-height:950px;

position:relative; 
}

#header { 
width: 100%;  
height:145px; 
background-color: #fff; 
position: relative;

}   

#shadow { 
width: 1920px;  
height:145px; 
background-image:url(images/h_shadow.png);
position: relative;
z-index:-1;
margin-top:-98px;

}   

#content { 
height:auto;
position:relative;
padding:770px; 
padding-bottom:35px; 
width:100%;
display:none;
z-index:-2;
}

.contentbox{
    width:3000px;
    height:100%;
    margin-top:-770px;
    padding:0;
    right:0;
    left:0;
    background:fff;
    position:absolute;
    z-index:-1;
    margin-left:2000px;
}

#footer { 
width:100%; 
height:72px; 
position:absolute; 
bottom:0; 
left:0; 
background:#222; 
margin:0; 
padding:0; 
}

.clear {
clear:both;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:35:39.590

很高兴看到您的 html，但是如果您相对定位页脚，那么它将自动显示在底部，就在它上方的任何内容的正下方。您可以将您的背景设置为`body`与页脚相同的颜色。

# java - 我应该如何知道我的程序的最低系统要求是什么？

> ID：14860518
> 
> 赞同：0
> 
> 时间：2013-02-13T18:32:36.833
> 
> 标签：java, swing, timer, cpu, system-requirements

发挥作用的最重要因素之一`Swing Timers`是该机器的 CPU。我的意思是 Timer 在配备 Core i7 的机器上运行良好，但在配备 Core i3 的机器上运行不佳。我正在通过`Timer`s 为程序的不同部分制作不同的动画。我正在使用 Core i7 的笔记本电脑。我应该如何知道我制作的动画所需的最低系统要求是什么？而且我认为它不仅限于这里，一般来说，我的意思是，我怎么知道我的 java 程序运行良好所需的最低系统要求是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:07:00.070

you could rent an amazon EC2 micro instance to test on. I'm not sure you'll get down to Atom performance - you might have to beg/borrow a machine if you really want to test on that, but a micro EC2 instance is free and might help you test on various platforms.

# css - 内部 div 边距不是容器 div 背景的一部分，除非我添加边框

> ID：14860526
> 
> 赞同：1
> 
> 时间：2013-02-13T18:32:59.287
> 
> 标签：css, html, margin

这不是生产问题，这只是我遇到并一直想知道的问题。内部 div 的边距不会获得父 div 的背景颜色，除非我为父 div 添加边框。因此，除非我在标题 div 中添加边框，否则 innerDiv 的边距不会获得标题 div 的背景。

```
<div id="container">
   <div id="header">
     <div id="innerDiv">Title</div> 
   </div>
   <div id="content" >

     <button>Remove Border</button>
   </div>

   <div id="footer" >
     footer
   </div>

</div> 
```

这个小提琴希望能证明我的问题。 [http://jsfiddle.net/eTq2P/6/](http://jsfiddle.net/eTq2P/6/)

所以我不是在寻找解决方法，我想知道为什么除非向父 div 添加边框，否则边距不会获得父 div 的背景颜色。我期望边距包含在父 div 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:37:36.303

添加边框强制#header 包含#innerDiv，因此将其拉伸到#innerDiv 的大小。您可以通过添加无边界来完成相同的事情

```
#header {overflow: auto;} 
```

另请参阅：[CSS：添加边框会更改背景颜色（？！）](https://stackoverflow.com/questions/4910060/css-adding-a-border-changes-the-background-color)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:07:37.873

*{box-sizing:border-box;} 有很大帮助。

# mysql - 在没有 mysql_data_seek 的情况下重置结果指针

> ID：14860530
> 
> 赞同：0
> 
> 时间：2013-02-13T18:33:04.793
> 
> 标签：mysql, pointers, pdo, reset

获取记录集后，我想做两件事。从第一条记录中打印名字和姓氏（所有记录都将具有相同的名称），然后在该记录下输出表中该记录集的所有记录。获取第一条记录的行为将指针向上移动一条记录，因此这不起作用。我想在从第一条记录中获取名字和姓氏后重置指针。我正在使用 PDO，除了我所阅读的内容之外，不推荐使用**mysql_data_seek**。

这是我目前的做法（可能效率低下，因为我所做的只是重新运行相同的查询以获取完整的记录集 - 或者可以吗？）：

```
 $query = "SELECT students.*, lessons.lessonname, assignments.assignmentid, assignments.complete, assignments.score    
            FROM lessons INNER JOIN 
            (assignments INNER JOIN students 
            ON assignments.studentid = students.id) 
            ON lessons.lessonid = assignments.lesson
            WHERE (((students.id)=".$_POST['viewstudentdrop']."))";
    $results = $pdo->query($query);
    $row = $results->fetch(); //just get the first record.
    echo 'Assignments for: ' . $row['firstname'] . " " . $row['lastname']. "<br>";        
    $results = $pdodl->query($query); //resets pointer 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:46:51.083

```
$results = $pdo->query($query);
$data = $results->fetchAll();
$row  = reset($data);
echo 'Assignments for: ' . $row['firstname'] . " " . $row['lastname']. "<br>";        
foreach ($data as $row) {
... 
```

# javascript - 在文本框中输入值时，$dirty 标志设置为 true，反之则不然

> ID：14860537
> 
> 赞同：0
> 
> 时间：2013-02-13T18:33:44.203
> 
> 标签：javascript, angularjs, angularjs-directive

我有一个表格

```
myForm.$dirty 
```

当我在文本框中输入值时设置为 true

```
<input name="input" ng-model="myModel.text"> 
```

但是当我从文本框中删除所有值时，该标志没有设置为 false。为什么会这样以及如何纠正它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:40:28.020

`$dirty`意味着您已经与表单进行了交互，因此一旦您输入了任何内容，它就会被认为是脏的。

从版本 1.1.1 开始，有一个`$setPristine`功能可以让您将表单恢复到其原始状态，但目前，您必须找出适合您需要的解决方法。

# c# - 在不更改实际行的情况下将文本附加到 log.info

> ID：14860538
> 
> 赞同：0
> 
> 时间：2013-02-13T18:33:47.227
> 
> 标签：c#, log4net

我的代码中目前有很多行 log.info() 。现在我想知道是否有一种方法可以在不更改代码中所有行的情况下向该行添加一个额外的变量。例如，假设我的代码中有这样的东西

```
int trackno;
log.info("Object has passed stage 1");
log.info("Object has passed stage 2");
... 
```

现在有什么方法可以在不更改实际日志记录代码的情况下在日志中打印 trackno。我正在寻找另一种方法

```
log.info("Object has passed stage 1 - Trackno = " + trackno ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:39:40.717

你可以尝试类似...

```
log.Info(string.format("Object has passed stage {0}",trackno.toString())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:45:07.577

您可以在语句周围包装一个方法，如下所示：

```
private void LogInfoObjectPassed(int trackno, int stage)
{
    log.info("Object has passed stage " + stage + " - Trackno = " + trackno);
} 
```

# visual-studio-2012 - 在 Visual Studio 2012 中调用 D3DReadFileToBlob 会导致链接错误

> ID：14860543
> 
> 赞同：0
> 
> 时间：2013-02-13T18:33:58.733
> 
> 标签：visual-studio-2012, directx, directx-11

我在 DirectX 项目中加载预编译的 HLSL 着色器时遇到了一个令人沮丧的问题。我正在使用 Visual Studio 2012 Professional 和 DirectX SDK（2010 年 6 月）。下面的代码导致了 LNK2019 的链接错误：未解析的外部符号 _D3DReadFileToBlob@8。

```
#include "GameBase.h"
#include<D3Dcompiler.h>

bool GameBase::LoadShaderFromFile(LPCWSTR filePath, ID3DBlob** buffer)
{
    HRESULT result = D3DReadFileToBlob(filePath, buffer);

    if(FAILED(result))
    {
        return false;
    }

    return true;
} 
```

库 d3d11.lib;d3dx11.lib;dxerr.lib;D3dcompiler.lib 在 Linker > Input > Additional Dependencies 中设置，并为 DirectX SDK 位置设置正确的包含目录和库目录：$(IncludePath);$ (DXSDK_DIR)Include 和 $(LibraryPath);$(DXSDK_DIR)Lib\x86) 分别。

删除这部分代码可以让项目的其余部分顺利编译和运行（除了不加载着色器的明显例外）。

我觉得我一定遗漏了一些微妙的东西，但我通过搜索和 Stack Overflow 没有找到任何关于如何解决这个问题的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T18:49:15.630

您的问题是您正在混合使用 Windows 8.x SDK 和 DirectX SDK，从而使用不支持 D3DReadFileToBlob的**旧版本 D3DCompile。**

如果将 VS2012/Windows 8.0 SDK 或 VS2013/Windows 8.1 SDK 与旧版 DirectX SDK 结合使用，则需要修改 include/lib 路径以获得“正确”行为。这在[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275.aspx)上有详细介绍。

您还应该阅读这篇关于 D3DCompile、DLL 部署和版本控制的[博客文章。](http://blogs.msdn.com/b/chuckw/archive/2012/05/07/hlsl-fxc-and-d3dcompile.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T09:09:09.630

也许您的混合库与 Windows 8 sdk 也有这些库。更改链接设置以查看包含的库并验证 d3dcompiler.lib 来自何处，或者它是否链接到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-17T22:48:11.983

因此`d3dx11.lib`，如果使用 Windows Kit，您将无法再包含，但您可以包含`d3dcompiler.lib`（通常）可以在其中找到的 `C:\Program Files (x86)\Windows Kits\10\Lib\10.0.17763.0\um\x64`或正在使用的任何构建，

# internet-explorer - ie 的文本阴影问题

> ID：14860546
> 
> 赞同：0
> 
> 时间：2013-02-13T18:34:21.247
> 
> 标签：internet-explorer, css

我正在使用以下 css 规则来添加一些文本阴影。

```
.aaactive {
    text-shadow: 1px 1px #990000;
} 
```

我已经在网上搜索了很多 ie 版本 < 10 的解决方案（不幸的是，很多人仍然使用 ie8-9），发现我必须添加以下过滤规则之一，但不幸的是似乎什么也没发生。

```
 filter: progid:DXImageTransform.Microsoft.DropShadow(OffX=1, OffY=1, Color=990000);
 filter: progid:DXImageTransform.Microsoft.Shadow(direction=135,strength=2,color=990000); 
```

有没有更好的解决方案或者我在这里错过了什么？

# asp.net - ASP.NET 在 Web 浏览器缓存中包含 cookie

> ID：14860548
> 
> 赞同：1
> 
> 时间：2013-02-13T18:34:24.773
> 
> 标签：asp.net, cookies, session-cookies, setcookie, httpcookie

我有一个网站询问用户的位置，然后将其存储在 cookie 中。我想在网站上添加缓存，因此对相同 url/querystring/cookie 的任何请求都将首先使用客户端的浏览器缓存。`varyByCustom`我可以通过使用in my`outputCacheProfiles`并为服务器上的每个请求创建一个自定义字符串来使这项工作用于服务器缓存。我找不到任何方法来强制用户在使用新位置更新 cookie 后请求每个页面的新版本，而不需要他们在浏览器上点击“刷新”。

**如何包含 cookie 作为 Web 浏览器客户端缓存的依赖项？**

这是我目前正在做的事情，它适用于在服务器上缓存不同的 url/querystring/cookie 组合。

在 web.config 中。

```
<system.web>
...
    <caching>
      <outputCacheSettings>
        <outputCacheProfiles>
          <add name="DefaultCacheProfile" enabled="true" duration="60"  varyByCustom="latlon" varyByParam="None" />
        </outputCacheProfiles>        
      </outputCacheSettings>
    </caching> 
```

使用我页面上的个人资料...

```
<%@ OutputCache CacheProfile="DefaultCacheProfile" %> 
```

在 global.asax.cs 中（`CookieSupport`是我读取我的 cookie 的内部类）

```
public override string GetVaryByCustomString(System.Web.HttpContext context, string custom)
{

    if (custom.ToLower() == "latlon") {
        if (CookieSupport.CookieExists) {
            double lon = double.Parse(CookieSupport.CookieValueGet("lon"));
            double lat = double.Parse(CookieSupport.CookieValueGet("lat"));

            string varystring = string.Format("{0},{1},{2}", Request.QueryString, lat, lon);

            return varystring;
        } else {
            return Request.QueryString.ToString;
        }
    }

    return base.GetVaryByCustomString(context, custom);
} 
```

以下是我创建 cookie 的方法...

```
System.Web.HttpCookie oCookie = new System.Web.HttpCookie(CookieSupport.CookieName);
oCookie.Values.Add("lat", data_Lat.ToString);
oCookie.Values.Add("lon", data_Lng.ToString);    
Response.Cookies.Add(oCookie); 
```

# uiscrollview - sizeWithFont: constrainedToSize: lineBreakMode: 更改字体大小时无法正常工作

> ID：14860550
> 
> 赞同：2
> 
> 时间：2013-02-13T18:34:32.393
> 
> 标签：uiscrollview, uitextview, uifont, sizewithfont

我对一些 UITextViews 有一些问题。您可以选择更改我的应用程序中的字体大小，当您更改它时，它会重新加载内容并调整文本视图的大小，因为视图中有多个。我正在使用下面的代码来调整大小，但它有时会返回正确的高度，但是当我在应用程序中更改文本大小时，它似乎会崩溃并返回不正确的高度，并且 textviews 中的文本在底部。有人能帮我吗？

```
int height = [tempTextView.text sizeWithFont:
[UIFont fontWithName:fontFamily size:fontSizeF] 
constrainedToSize:CGSizeMake(300, 10000) lineBreakMode:
NSLineBreakByWordWrapping].height; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T10:51:08.777

I know this is an old question & late answer, but it's still very relevant,

This sizeWithFont method is now deprecated, this new method works best

```
NSString *content = **Whatever your label's content is expected to be**
CGSize maximumLabelSize = CGSizeMake(390, 1000);

NSDictionary *stringAttributes = [NSDictionary dictionaryWithObject:[UIFont systemFontOfSize:13] forKey: NSFontAttributeName];

CGSize newExpectedLabelSize = [content boundingRectWithSize:maximumLabelSize options:NSStringDrawingTruncatesLastVisibleLine|NSStringDrawingUsesLineFragmentOrigin attributes:stringAttributes context:nil].size; 
```

So you can adjust your label (or table cell etc) to

```
label.frame.size.height = newExpectedLabelSize.height; 
```

I hope this helps, cheers, Jim.

# ios - 如何绘制围绕右上方和右下方对象流动的文本？

> ID：14860551
> 
> 赞同：5
> 
> 时间：2013-02-13T18:34:40.743
> 
> 标签：ios, objective-c, uitableview, core-text

我有一个类似于[这个问题](https://stackoverflow.com/questions/5284516/how-can-i-draw-image-with-text-wrapping-on-ios)但更复杂的问题。我正在尝试在表格视图单元格中绘制文本，该单元格具有右上角的日期标签和右下角的徽章，如下所示：

```
+-----------------------+----+
| Lorem ipsum dolor sit |DATE|
| amet, consectetur     +----+
| adipiscing elit. Integer   |
| ligula lectus, convallis   |
| non scelerisque      +-----+
| quis, tempor at nibh |BADGE|
+----------------------+-----+ 
```

如果有更多或更少的文本，我希望单元格更大或更小：

```
+-----------------------+----+
| Lorem ipsum dolor sit |DATE|
| amet, consectetur     +----+
| adipiscing elit. Integer   |
| ligula lectus, convallis   |
| non scelerisque quis,      |
| tempor at nibh.  Curabitur |
| eget diam ligula.          |
| Pellentesque a elit        |
| dolor, a ullamcorper +-----+
| risus.               |BADGE|
+----------------------+-----+ 
```

旧问题的答案链接到一个项目，该项目显示如何围绕已知形状流动文本。但我事先不知道形状，因为我需要徽章与文本底部对齐。

这甚至可能吗？如果是这样，我如何绘制文本，以及如何计算它的高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:16:35.353

您的情况还不错，因为一切都是矩形，而且宽度似乎是固定的。有关一些入门代码，请参阅[ColumnView](https://github.com/rnapier/richtext-coretext/blob/master/Columns/Columns/ColumnView.m)。

这是我将如何攻击它：

*   共有三个矩形：顶部、中间和底部。顶部和底部具有已知尺寸。只有中间可以垂直伸展。
*   创建一个`CTFrameSetter`. 为顶盒创建一个路径并创建一个`CTFrame`布局。那部分是确定的，所以坚持下去。如果所有文本都适合，那么你就完成了。
*   为顶框正下方的中间框创建路径。让它尽可能短（我假设你想要*一些*空间，即使文本可以放在顶部和底部的框中​​）。
*   为中间框架正下方的底部框创建一条路径。
*   用于`CTFrameSetter`为中间和底部框架创建框架。询问它能够布局多少文本。如果它完成了一切，那么你就完成了。这是你愿意画的最小的盒子。
*   如果溢出，则将中间框的大小增加一行。尝试再次布置中间和底部的盒子。重复直到合适。
*   现在您知道了整个视图的大小，并且可以布置所有内容。

那里有几个地方需要优化，但它可能比你想象的要快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:19:32.047

我为此苦苦挣扎了很长时间，试图根据我发送给它的文本来调整弹出框的大小。通常宽度是固定的，你只是想计算高度。此处的开发人员文档中有一篇文章：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TextLayout/Tasks/StringHeight.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/TextLayout/Tasks/StringHeight.html)

我在这里找到了一组很好的可重用类别：http: [//sheepsystems.com/sourceCode/sourceStringGeometrics.html](http://sheepsystems.com/sourceCode/sourceStringGeometrics.html)

即使能够正确调整单元格的大小、更改文本框的形状并在单元格上覆盖日期和徽章以及让文本在其周围流动也不是一件容易的事。您可能需要考虑重新设计表格单元格以使其更轻松一些。像这样的东西：

```
+-----------------------+----+
| BADGE|                |DATE|
|+-----+      TITLE     +----+
| dolor sit amet, consectetur|     
| adipiscing elit. Integer   |
| ligula lectus, convallis   |
| non scelerisque quis,      |
| tempor at nibh.  Curabitur |
| eget diam ligula.          |
| Pellentesque a elit        |
| dolor, a ullamcorper risus.|
+----------------------------+ 
```

# asp.net - ASP.Net 不重定向

> ID：14860552
> 
> 赞同：0
> 
> 时间：2013-02-13T18:34:41.023
> 
> 标签：asp.net

您好，我正在尝试从当前页面重定向到另一个页面，当它必须重定向我时告诉我：

```
Thread was being aborted.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Threading.ThreadAbortException: Thread was being aborted.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[ThreadAbortException: Thread was being aborted.]
   System.Web.HttpContext.InvokeCancellableCallback(WaitCallback callback, Object state) +298
   System.Web.Util.<>c__DisplayClass1.<WrapContinuation>b__0() +37
   System.Threading.Tasks.SynchronizationContextAwaitTaskContinuation.<.cctor>b__3(Object state) +37
   System.Web.<>c__DisplayClass7.<Post>b__6() +15
   System.Web.Util.SynchronizationHelper.SafeWrapCallback(Action action) +91 
```

错误在页面上，生成的代码是这样的：

```
protected void Button1_Click(object sender, EventArgs e)
{
    Response.Redirect("/seller/ven_mainwin/recharge/recharge.aspx");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:37:20.343

`Response.Redirect`将触发 ThreadAbortException。

在绝大多数情况下，这可以安全地忽略。

```
protected void Button1_Click(object sender, EventArgs e)
{
    try{
       Response.Redirect("/seller/ven_mainwin/recharge/recharge.aspx");
    }
    catch (System.Threading.ThreadAbortException e){
      // do nothing. This exception can be ignored. 
    }

} 
```

[Joel Fillmore 指出这是正确的设计模式](https://stackoverflow.com/a/2777204/127880)

```
 Response.Redirect(url, false);
 Context.ApplicationInstance.CompleteRequest(); 
```

# performance - JMeter，发布所有表单数据

> ID：14860553
> 
> 赞同：8
> 
> 时间：2013-02-13T18:34:45.280
> 
> 标签：performance, http, jmeter, performance-testing, jmeter-plugins

我正在尝试使用 JMeter 对网站的编辑功能进行性能测试。但是，我尝试测试表单中的 200 多个项目的步骤。我显然希望所有项目都与向用户显示的表单相同（不包括我打算更改的表单）。我知道这可以使用正则表达式提取器（请参阅问题[JMeter - MVC：包含动态数据的表单发布模型](https://stackoverflow.com/questions/5745902/jmeter-mvc-form-posting-model-that-contains-dymanic-data)）但是这需要为表单中的每个元素手动设置，这是巨大的！

有没有办法让 JMeter 回发所有表单元素而不必单独设置每个元素？或任何插件来做到这一点？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T19:25:41.853

定义正则表达式提取器后，

step1) 创建所有值 = true 的“Debug PostProcessor”

*   Jmeter 属性 = true
*   Jmeter变量=真
*   采样器属性 = true
*   系统属性 = true

当您检查此后处理器时，您会在列表中找到所有后参数值。尝试找到适合与 Post 请求一起发送的请求，并使用 API 设置 paramName 和 paramVal，如下所示。

我使用 firebug 找出所有必需的 post 参数。要知道如何使用它，请点击此链接 [http://community.blazemeter.com/knowledgebase/articles/80479-how-to-use-jmeter-for-login-authentication](http://community.blazemeter.com/knowledgebase/articles/80479-how-to-use-jmeter-for-login-authentication)

step2) 使用此脚本创建“Beanshell 预处理器”。其中“hiddenList”是正则表达式提取器的参考名称。

```
log.info("=====================");

         count =  Integer.valueOf (vars.getObject("hiddenList_matchNr") ) ;

        log.info("Number of hidden fields in previous sampler: " + count);

        for (i=1; i <= count; i++) { 
            paramName = vars.getObject("hiddenList_"+ i + "_g1");
            paramVal = vars.getObject("hiddenList_"+ i + "_g2");  
            log.info("Adding request parameter: " + paramName + " = " + paramVal);
            sampler.addArgument(paramName, paramVal);
        } 

        log.info("====================="); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-21T20:16:33.317

好问题。经过大量搜索，我发现奇怪的是 Jmeter 不能更优雅地支持这一点，并且需要相当多的解决方法来简单地回发在先前的 GET 请求中收到的表单数据。

我发现 ShGiji 的回答有点难以理解，不得不四处寻找设置正则表达式提取器等。以下是我采取的步骤。

1.  **设置正则表达式提取器**，以从 GET 请求的响应中检索参数

    要强制 Jmeter 从正则表达式提取器生成列表，匹配编号应设置为 -1（如此[处](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)所述）。请注意，您还需要捕获参数名称和值，因此您最终应该得到类似这样的东西......

![正则表达式提取器示例](../Images/d522bcb0ce4d65c885b509bd2424bc05.png)

2.  **可以选择添加 Debug Post Processor**。如果这样做，您应该能够确认存在带有您选择的参考名称前缀的变量（在上面的示例中，您应该期望变量`fieldList_matchNr`,`fieldList_1_g1`等`fieldList_1_g2`）

3.  **添加一个 Beanshell Post Processor**，将参数添加到后续 POST 请求的表单数据中

    以下脚本适用于 Jmeter 2.11（撰写本文时的最新版本）。注意使用`Integer.parseInt`而不是`Integer.valueOf`。

Beanshell 后处理器：

```
log.info("=====================");

count = Integer.parseInt(vars.getObject("fieldList_matchNr"));
log.info("Number of order details fields: " + count);

for (i=1; i <= count; i++) { 
  paramName = vars.getObject("fieldList_" + i + "_g1");
  paramVal = vars.getObject("fieldList_" + i + "_g2");  
  log.info("Adding request parameter: " + paramName + " = " + paramVal);
  sampler.addArgument(paramName, paramVal);
}

log.info("====================="); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-21T08:34:24.803

另一种方法是使用 JMeter 的代理功能。

您可以使用 JMeter（与其自动提交 HTTP 请求的能力不同）在浏览器中记录您的操作。然后，您可以访问该站点并提交表单。Jmeter 将记录一个 HTTP 请求采样器，提取所有表单元素并使用您提交的值填充。如果您在 JMeter 测试中需要一些不同的值，那么您可以将这些值编辑为正确的值。完成后，您可以将其保存为测试计划，然后运行它。

这只有在您想编辑少量元素时才真正起作用。如果您需要每个元素提交的值与浏览器中提交的值不同，那么上述方法会更好。

[http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)

# openssl - OpenSSL - SSL 服务器证书签名

> ID：14860558
> 
> 赞同：1
> 
> 时间：2013-02-13T18:35:00.260
> 
> 标签：openssl, base64

我刚开始在大学学习 OpenSSL，目前我正在学习签署证书的基础知识。我不想在这里粘贴问题，因为我想了解它，而不仅仅是得到答案。

我已获得用于 SSLserver 证书的 RSA 私钥。我的任务是使用此密钥对单个单词进行签名和 base64 编码。

我确实认为命令是：

openssl rsautl -sign -inkey Q4.txt -in plain | openssl base64

但这似乎是不正确的。

我只是想知道是否有人可以告诉我我是否在正确的轨道上？以及我应该在哪里寻找。

谢谢

# python - 烧瓶数据库问题

> ID：14860559
> 
> 赞同：9
> 
> 时间：2013-02-13T18:35:01.740
> 
> 标签：python, python-2.7, flask, flask-sqlalchemy, sqlalchemy-migrate

我使用本教程作为指导。[http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iv-database](http://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-iv-database)

我想拥有可以容纳多个产品的类别。类似于他如何拥有一个拥有多个帖子的用户。

当我打开 python 解释器并尝试创建一个类别时

```
>>>from app import db, models
>>>u = models.Category(name="Test") 
```

我收到这个错误

```
/sqlalchemy/orm/properties.py", line 1387, in _generate_backref
self, mapper))
sqlalchemy.exc.ArgumentError: Error creating backref 'category' on relationship 'Category.products': property of that name exists on mapper 'Mapper|Product|product' 
```

所以backref有问题。在本教程中（我已经用他的代码进行了尝试）他能够使用类似的语法创建一个用户。

我什至尝试使用他的所有文件并创建和迁移一个新数据库，但我得到了同样的错误。

这是我的 models.py 文件：

```
from app import db

WR_IP_NO = 0
WR_IP_YES = 1

class Category(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    name = db.Column(db.String(64), unique = True)
    products = db.relationship('Product', backref = 'category', lazy = 'dynamic')

    def __repr__(self):
        return '<Category %r>' % (self.name)

class Product(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    category = db.Column(db.String(64), db.ForeignKey('category.id'))
    courseName = db.Column(db.String(120), unique = True)
    ip = db.Column(db.SmallInteger, default = WR_IP_YES)
    duration = db.Column(db.Integer)
    productRev = db.Column(db.String(64))
    #use when database is updated?
    releaseDate = db.Column(db.DateTime)

    def __repr__(self):
        return '<Category> %r>' % (self.courseName) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T21:52:35.183

那是因为你遇到了碰撞。错误是：

```
`sqlalchemy.exc.ArgumentError: Error creating backref 'category' on relationship 'Category.products': property of that name exists on mapper 'Mapper|Product|product'` 
```

您可以看到您已经创建了一种关系`Category`，`Product`其中有两种方式，因此您可以`category.products`列出与该类别关联的所有产品，或者您可以选择`product.category`为您提供所选产品的类别。

但是您已经`category`在`Product`. 所以只要把它改成唯一的——你的`Product`类通常应该是这样的：

```
class Product(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    category_id = db.Column(db.String(64), db.ForeignKey('category.id'))
    courseName = db.Column(db.String(120), unique = True)
    ip = db.Column(db.SmallInteger, default = WR_IP_YES)
    duration = db.Column(db.Integer)
    productRev = db.Column(db.String(64))
    #use when database is updated?
    releaseDate = db.Column(db.DateTime)

    def __repr__(self):
        return '<Category> %r>' % (self.courseName) 
```

看看我是如何改变`category`的，`category_id`以便 backref 不再与它发生冲突。

# c# - 从子表单 Datagridview 选定行更新父表单文本框

> ID：14860561
> 
> 赞同：-1
> 
> 时间：2013-02-13T18:35:12.757
> 
> 标签：c#, winforms, datagridview

我有一个父表单 QuotationDetails，其中有一个名为 ChooseCustomer 的按钮，当我单击它时，会打开一个名为 CustomerSearchForm 的子表单。现在有一个 Datagridview CustomerSearchForm 有两个按钮 OK 和 CANCEL。所以当我从 DGV 中选择一行时，单击确定，该行中的所有详细信息都使用选定的客户客户数据填充到 QuotationDetails（大约 20 个文本框）中。我已经编写了所有代码并且工作正常。但问题是我通过关闭父表单 QuotationDetails 来做到这一点并打开它的一个新实例。但要求是我需要显示父窗体并从子窗体更新文本框。

下面是从 ChildForm 加载客户详细信息的代码

```
public void btnLoadCustomerDetails_Click(object sender, EventArgs e)
        {
            QuotationManagement objQM = new QuotationManagement();
           string[] Details = new string[gvCustomerDetails.SelectedRows[0].Cells.Count];
            for (int i = 1; i < gvCustomerDetails.SelectedRows[0].Cells.Count; i++)
            {
                Details[i] = gvCustomerDetails.SelectedRows[0].Cells[i].Value.ToString();
            }
            objQM.txtCustomerdetails.Text = Details[3] + Environment.NewLine + Details[4] + "," + Details[5] + "," + Details[6] + "," + Details[7];
            objQM.txtcustContact.Text = Details[3];
            objQM.txtCustPhoneno.Text = Details[10];
            objQM.txtfaxNo.Text = Details[12];
            objQM.txtCustMobile.Text = Details[15];
            objQM.txtcustemail.Text = Details[14];
            objQM.txtCustWeb.Text = Details[16];
            objQM.txtcustsource.Text = Details[29];
            objQM.txtCustActivestatus.Text = Details[27];
            objQM.txtCustomerType.Text = Details[44];
            objQM.txtCustNomAccType.Text = "Customer Quotations";
            objQM.txtCustAccStatus.Text = Details[25];
            objQM.txtTerms.Text = Details[31];
            objQM.txtCurrency.Text = Details[33];
            objQM.txtcountryname.Text = Details[9];
            objQM.lblCustomermasterId.Text = Details[0];
            this.Close();
            objQM.tabQuotationManagement.SelectedIndex = 1;
            objQM.Show();            

        } 
```

我已经搜索了一个解决方案，并得到了一个使用 Event 和一个 Delegate 来触发它的想法。

但我不确定如何在我的场景中实现相同的功能。

请指教。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:18:39.477

Thanks for the help.Below is the code I have implemented using a constructor.

Code for CustomerSearch OK button

```
public void btnLoadCustomerDetails_Click(object sender, EventArgs e)
{
selectedRow = gvCustomerDetails.SelectedRows[0];
QuotationManagement objQM = new QuotationManagement(selectedRow);
objQM.tabQuotationManagement.SelectedIndex = 1;
objQM.Show();
this.Close();

} 
```

Code for QuotationDetails form to load the CustomerDetails

```
public QuotationManagement(DataGridViewRow SelectedRow)
{
InitializeComponent();
CusRow = SelectedRow;
LoadSelectedCustomerDetails(CusRow);

}

private void LoadSelectedCustomerDetails(DataGridViewRow CusRow)
{
txtCustomerdetails.Text = CusRow.Cells[3].Value.ToString() + Environment.NewLine + CusRow.Cells[4].Value.ToString() + "," + CusRow.Cells[5].Value.ToString() + "," + CusRow.Cells[6].Value.ToString() + "," + CusRow.Cells[7].Value.ToString();
txtcustContact.Text = CusRow.Cells[3].Value.ToString();
txtCustPhoneno.Text = CusRow.Cells[10].Value.ToString();
txtfaxNo.Text = CusRow.Cells[12].Value.ToString();
txtCustMobile.Text = CusRow.Cells[15].Value.ToString();
txtcustemail.Text = CusRow.Cells[14].Value.ToString();
txtCustWeb.Text = CusRow.Cells[16].Value.ToString();
txtcustsource.Text = CusRow.Cells[29].Value.ToString();
txtCustActivestatus.Text = CusRow.Cells[27].Value.ToString();
txtCustomerType.Text = CusRow.Cells[44].Value.ToString();
txtCustNomAccType.Text = "Customer Quotations";
txtCustAccStatus.Text = CusRow.Cells[25].Value.ToString();
txtTerms.Text = CusRow.Cells[31].Value.ToString();
txtCurrency.Text = CusRow.Cells[33].Value.ToString();
txtcountryname.Text = CusRow.Cells[9].Value.ToString();
lblCustomermasterId.Text = CusRow.Cells[0].Value.ToString();     

} 
```

Apart from loading the textboxes in Quotation form with the CustomerDetails. There are other additional textboxes where user can do manual entry.But when the user enters the data and then selects the customer data all the data in textboxes(manually entered) is lost. The reason is we are loading the form again.I can use Static to store the entered data.Apart from that is there any better way to do the same.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:57:55.737

下面是返回选定 Gridview 行的子窗体的示例。

********* *主窗体**

 **```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {   //call the form
            MyChildForm cForm = new MyChildForm();
            if (cForm.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {   //get the selected row object
                DataGridViewRow dgvRow = cForm.selectedRow;
            }
        }
    }
} 
```

********* *儿童表格**

 **```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class MyChildForm : Form
    {
        public DataGridViewRow selectedRow;

        public MyChildForm()
        {
            InitializeComponent();
        }

        private void MyChildForm_FormClosing(object sender, FormClosingEventArgs e)
        {
            //Forms closing so lets get the results
            selectedRow = dataGridView1.SelectedRows[0];
        }

    }
} 
```****

# html - 为什么图像悬停时网站的字体会发生变化？

> ID：14860562
> 
> 赞同：0
> 
> 时间：2013-02-13T18:35:32.647
> 
> 标签：html, css

我的网站右侧有 3 个社交媒体按钮，可以在悬停时旋转一点。每当有人将鼠标悬停在它们上方时，它们都会使网站的字体在悬停时看起来几乎是粗体。它只发生在这些图像上，而且非常烦人。有没有人猜测为什么会发生这种情况？

这是用于每个按钮的 html/CSS im：

```
<div id="socialicon1"><a href="http://facebook.com/sentinelgaming" target="_blank"><img src="http://files.enjin.com/202624/social%20media/facebook%20square.png" width="50" height="50" alt="facebook button"/></a></div>

#socialicon1  img {
    position: fixed;
    top: 350px;
    right: 13px;
    -webkit-transition: all 0.5s ease-out; 
    -moz-transition: all 0.5s ease; -o-transition: all 0.5s ease; 
    }

#socialicon1 img:hover { 
    -webkit-transform: rotate(-9deg); 
    -moz-transform: rotate(-9deg); 
    -o-transform: rotate(-9deg);
} 
```

这是网站本身，所以你可以看看它：[http ://www.sentinelgaming.net](http://www.sentinelgaming.net)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:50:34.937

这是 webkit 的一个已知问题：http: [//css-tricks.com/forums/discussion/18538/transforms-cause-font-smoothing-weirdness-in-webkit/p1](http://css-tricks.com/forums/discussion/18538/transforms-cause-font-smoothing-weirdness-in-webkit/p1)

# r - Windows XP 32位操作系统如何安装.tar.gz源码包

> ID：14860574
> 
> 赞同：0
> 
> 时间：2013-02-13T18:35:58.790
> 
> 标签：r

我在 Windows 系统中安装源包失败。我已经安装了 Rtools，以便根据以下链接上的讨论安装源包：[http ://r.789695.n4.nabble.com/Installing-a-Package-tar-gz-in-windows-td3411393 .html](http://r.789695.n4.nabble.com/Installing-a-Package-tar-gz-in-windows-td3411393.html)。顺便说一句，只安装 Rtools 是可以的，不是吗？我需要运行 Rtools 吗？（PS：adapter_1.0-4.tar.gz放在R工作目录下）

```
> install.packages("adapt_1.0-4.tar.gz", type="source", repos=NULL) 
* installing *source* package 'adapt' ...
** Creating default NAMESPACE file
** libs
ERROR: compilation failed for package 'adapt'
* removing 'C:/Program Files/R/R-2.15.2/library/adapt'

warning：
1: running command'C:/PROGRA~1/R/R-215~1.2/bin/i386/R CMD INSTALL -l "C:/Program Files/R/R-2.15.2/library"   "adapt_1.0-4.tar.gz"'had 
status 1 

2: In install.packages("adapt_1.0-4.tar.gz", type = "source", repos = NULL) :
 installation of package ‘adapt_1.0-4.tar.gz’ had non-zero exit status 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:22:52.827

看看这个问题的公认答案：

[如何从 Windows 上的源 tarball 安装 R 包？](https://stackoverflow.com/questions/4739837/how-do-i-install-an-r-package-from-the-source-tarball-on-windows)

如果您有任何*具体*问题，您可以提出新问题。

# c - 寻找循环列表算法的疑惑

> ID：14860577
> 
> 赞同：0
> 
> 时间：2013-02-13T18:36:10.300
> 
> 标签：c, linked-list

我在 C 中有以下代码，它试图查找列表是否是循环的：

```
bool findCircular(Node *head)
{
   Node *slower, * faster;
   slower = head;
   faster = head;
   while(true) {

     // if the faster pointer encounters a NULL element
     if( !faster || !faster->next)
       return false;
    //if faster pointer ever equals slower or faster's next
    //pointer is ever equal to slow then it's a circular list
     else if (faster == slower || faster->next == slower)
        return true;
     else{
       // advance the pointers
        slower = slower->next;
        faster = faster->next->next;
      }
   }
} 
```

我对它的某些部分有一些疑问。首先，在我们第一次进入 while 循环时，我们不是总是会达到条件（更快 == 更慢）吗？我们已经初始化了更快和更慢，以指向它指向的相同位置。

其次，为什么我们还要比较 if (faster->next == slow)，难道我们还不够 just`faster == slower`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T21:27:36.833

实际上，书中打印的代码是不正确的，除非传递了 null 或 1 元素列表，否则将返回 1。[勘误表](http://www.wiley.com/legacy/compbooks/programminginterview/errata.html)显示了更正的版本。

修复方法是跟踪这是否是第一次循环，并从第二次开始执行循环列表检查：

```
 int first = 1;  /* New code */
 while (1) {
     if (!faster || !faster->next)
         return 0;
     else if ((faster == slower || faster->next == slower) && !first)  /* New code */
         return 1;
     else {
         slower = slower->next;
         faster = faster->next->next;
         first = 0; /* New code */
     }
 } 
```

（上面的代码使用“faster”和“slower”，就像你的版本一样；书和勘误表使用“fast”和“slow”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:58:17.143

不要同时从`faster`和开始。做错误检查并从.`slower``head``faster``head->next`

该算法应该在没有`faster->next ==slower`.

# java - 狮身人面像 4 - 控制台

> ID：14860579
> 
> 赞同：0
> 
> 时间：2013-02-13T18:36:13.680
> 
> 标签：java, xml, console, speech-recognition, sphinx4

java中的Sphinx 4有点问题。我实现了下面的代码：

```
package test.ionut;

import edu.cmu.sphinx.frontend.util.Microphone;
import edu.cmu.sphinx.recognizer.Recognizer;
import edu.cmu.sphinx.result.Result;
import edu.cmu.sphinx.util.props.ConfigurationManager;

public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ConfigurationManager manager;

        if(args.length > 0){  
            manager=new ConfigurationManager(args[0]);
            }else{

            manager=new ConfigurationManager(Test.class.getResource("test.config.xml"));

        }

        Recognizer recognizer=(Recognizer)manager.lookup("recognizer");
        recognizer.allocate();
        Microphone mic=(Microphone)manager.lookup("microphone");
        if(!mic.startRecording()){

            System.out.println("Mic not identified.");
            recognizer.deallocate();
            System.out.println(1);

            System.out.println("Say: (Good morning | Hello | Hi | Welcome) (Dipayan | Paul | Philip | Rita | Will )");

            while(true){
                System.out.println("Start speaking. Press Ctrl-C to quit.\n");
                Result result = recognizer.recognize();
                if(result != null) {
                String resultText = result.getBestFinalResultNoFiller();
            //  System.out.println((new StringBuilder()).append("You said: ").append(resultText).append('\n').toString());
                System.out.println("You said: "+resultText+"...");
                } else {
                System.out.println("I can't hear what you said.\n");
                }
                }

        }

    }

}

this is the grammar file:

***#JSGF V1.0;***

***grammar hello;***

***public <greet>= (Good morning | Hello | Hi | Welcome) ( Paul | Philip | Rita | Will );***

and in the xml file i have modified so that the program knows what to do with the gram file.

Bellow is the part of the code where i modified the xml:

    <!-- ******************************************************** -->
    <!-- The Grammar  configuration                               -->
    <!-- ******************************************************** -->

    <component name="jsgfGrammar" type="edu.cmu.sphinx.jsgf.JSGFGrammar">
        <property name="dictionary" value="dictionary"/>
        <property name="grammarLocation"
             value="resource:/test/ionut/"/>
        <property name="grammarName" value="mydict"/>
    <property name="logMath" value="logMath"/>
    </component>

Any help is appreciated. 
```

问题是，当我编译代码时，我没有收到任何错误，但控制台没有显示任何内容，甚至没有显示第一次打印。如果我通过添加一个不在字典中的单词来修改 gram 文件，然后点击运行，控制台会向我显示该单词是字典中的已知单词的错误。删除这个词后，点击运行，然后再次：控制台什么也没显示。我还使用 -mx256m 参数添加了额外的堆内存。

我整天都在尝试这个，因为我想用我自己的语言用 sphinx 4 实现单词。但现在我只是在做一些测试，习惯它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:46:12.800

你是通过麦克风说话吗，那些你放在语法文件里的词？或者只是说出随机的话。系统只能识别那些在 Grammer 文件和字典中的单词。请记住，.gram 文件是 .gram 文件的子集。DIC 文件。

# c# - DataTable 列位置与 db 中的结果集不同

> ID：14860580
> 
> 赞同：0
> 
> 时间：2013-02-13T18:36:17.253
> 
> 标签：c#, asp.net, sql-server, datatable

我得到了我的`ResultSet`（使用`stored procedure`），`DataTable`但奇怪的是`column`位置发生了变化，`DataTable`然后返回的是什么`db`。请看以下图片： 第一张图片是`SSMS SQL query`返回的结果，这是正确的。 ![在此处输入图像描述](../Images/4287cb6838872033e2227b52fccfac11.png)

第二张图片`DataTable`在代码中。最后两根柱子是怎么改变位置的： ![在此处输入图像描述](../Images/20665ee6705fa2b5dd9d8fc8fc0dda6f.png)

最后两列是使用生成的`pivot/unpivot`。看到这个小提琴更多地理解[查询小提琴](http://www.sqlfiddle.com/#!3/8e685/46)

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:31:00.977

`DataTable`您是否在加载之前设置架构？

```
Dim table As New Data.DataTable("MyTable")

table.Columns.Add("DataName")
table.Columns.Add("33^Bamako_T")
table.Columns.Add("33^Bamako_A")

adapter.Fill( table ) 
```

# java - android在没有任何收件人的情况下启动短信意图

> ID：14860581
> 
> 赞同：9
> 
> 时间：2013-02-13T18:36:18.723
> 
> 标签：java, android, android-intent

我想从我的应用程序中打开 Android SMS 应用程序，并且不想将任何联系人设置为收件人，如何？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-13T18:44:26.937

```
Uri uri = Uri.parse("smsto:");
Intent intent = new Intent(Intent.ACTION_SENDTO, uri);
intent.putExtra("sms_body", "Hello World!");  
startActivity(intent); 
```

### 笔记

这种方式不需要任何许可`Manifest`

# javascript - Mootools 1.2 和 Firefox $$ 选择了太多元素

> ID：14860583
> 
> 赞同：0
> 
> 时间：2013-02-13T18:36:22.723
> 
> 标签：javascript, mootools1.2

**浏览器必须是firefox**

**Mootools 版本必须是 1.2.x**

1.  *$$ 选择器仅在 Firefox 中*返回太多元素

 *[http://jsfiddle.net/e77Xp/4/](http://jsfiddle.net/e77Xp/4/)

**HTML**

```
<div class="only_trucks diagramz" id="diatruck">
    <div class="lf">lf</div>
    <div class="rf">rf</div>
    <div class="la">la</div>
    <div class="ra">ra</div>
    <div class="lrfo">lrfo</div>
    <div class="rrfo">rrfo</div>
    <div class="lrfi">lrfi</div>
    <div class="rrfi">rrfi</div>
    <div class="lrro">lrro</div>
    <div class="rrro">rrro</div>
    <div class="lrri">lrri</div>
    <div class="rrri">rrri</div>
</div> 
```

**JS**

```
selected = $$('.rf');
alert(selected.length);
console.log(selected); 
```

这应该只返回 1 个结果，但返回多个结果。它似乎与其中包含“rf”的其他类相匹配。

**除了更新到最新版本的 mootools 或更改类名之外，是否有人对此有很好的解决方法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:03:28.467

它是一个错误，但可以修复（感谢[这个答案](https://stackoverflow.com/a/14272657/16959)）。将此代码添加到您的 JavaScript。

```
String.prototype.contains = function(string, separator){
    return (separator) ? (separator + this + separator).indexOf(separator + string + separator) > -1 : String(this).indexOf(string) > -1;
}; 
```

这是一个[固定的演示](http://jsfiddle.net/e77Xp/7/)*

# ruby - 为 Capistrano 定义自定义方法？

> ID：14860584
> 
> 赞同：1
> 
> 时间：2013-02-13T18:36:28.400
> 
> 标签：ruby, capistrano

我正在尝试为 Capistrano 定义自定义方法，以在我的 cap 任务中使用。我可以定义方法，然后在任务中使用这些方法就好了，直到我尝试从命名空间任务中调用这些方法，因为 Capistrano 然后引发异常。

从命名空间任务调用时，名为的自定义命令`capturecmd`会中断 Capistrano 的示例跟踪`file:replace`。适用于任何非命名空间任务：

```
#⚡ cap local file:replace -s dir=./jel-ids/ -s f=deploy -s r=deployed -s ext=.bak
  * 2013-02-13 13:34:08 executing `local'
  * 2013-02-13 13:34:08 executing `file:replace'
Capfile:129:in `capturecmd': uninitialized constant Capistrano::Configuration::Open3 (NameError)
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/configuration/namespaces.rb:191:in `method_missing'
    from Capfile:41:in `block (2 levels) in load'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:138:in `instance_eval'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:138:in `invoke_task_directly'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/configuration/callbacks.rb:25:in `invoke_task_directly_with_callbacks'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:89:in `execute_task'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/configuration/execution.rb:101:in `find_and_execute_task'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/cli/execute.rb:46:in `block in execute_requested_actions'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/cli/execute.rb:45:in `each'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/cli/execute.rb:45:in `execute_requested_actions'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/cli/help.rb:19:in `execute_requested_actions_with_help'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/cli/execute.rb:34:in `execute!'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/lib/capistrano/cli/execute.rb:14:in `execute'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/lib/ruby/gems/1.9.1/gems/capistrano-2.14.2/bin/cap:4:in `<top (required)>'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/bin/cap:23:in `load'
    from /usr/local/opt/rbenv/versions/1.9.3-p385/bin/cap:23:in `<main>' 
```

编辑：此外，如果有人可以建议扩展 Capistrano 的适当结构，以便我的自定义方法可以与 , 等的现有方法处于同一`run`级别`capture`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T21:34:19.417

我从来不需要它，但这是交易。当您在 中时`Capfile`，`self`是对 的实例的引用`Capistrano::Configuration`。您可以通过在您的 中使用以下代码来查看它`Capfile`：

```
p self.class 
```

在 的范围内`self`，您可以访问`run`方法：`p self.methods.grep :run`将返回：

```
[:run] 
```

因此，如果您想要一个与 相同范围内的方法`run`，您可以在 self 中进行定义：

```
def self.my_method
  puts "let's go!"
end 
```

就像我说的，我不知道这是否是最好的方法，但这会奏效。现在你可以有一些像这样的命名空间任务：

```
namespace :borba do
  task :teste do
    my_method
  end
end 
```

# java - 在 JTable 中添加文件地址，在 java swing 中使用 Net Beans

> ID：14860589
> 
> 赞同：0
> 
> 时间：2013-02-13T18:36:46.757
> 
> 标签：java, swing, jtable, netbeans-7

我正在使用 Swing n Netbeans IDE 卡在一个点上。我想在 JTable 的单元格之一中添加文本文件的地址。此外，如果我单击该字段它应该打开相同的文件。

jInternalFrame3.setVisible(true);

```
 jTable3.setBackground(new java.awt.Color(0, 0, 0));
    jTable3.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
    jTable3.setForeground(new java.awt.Color(255, 255, 255));
    jTable3.setModel(new javax.swing.table.DefaultTableModel(
        new Object [][] {

        },
        new String [] {
            "Sr. No", "EXCHANGE", "INSTRUMENT", "SYMBOL", "EXPIRY DATE", "B/S", "LOT/QTY", "PRICE", "STOP LOSS", "TRIGGER PRICE", "FILE NAME", "TIME CREATED"
        }
    ) {
        boolean[] canEdit = new boolean [] {
            false, false, false, false, false, false, false, false, false, false, false, false
        };

        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return canEdit [columnIndex]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:37:54.357

使用以下代码在单击文件单元格时打开文件。

```
 table.addMouseListener( new MouseAdapter() {

        public void mouseClicked(MouseEvent e) {
            int col = table.columnAtPoint( e.getPoint() );
            int row = table.columnAtPoint( e.getPoint() );
            int fileColumn = 10;

                if( col != fileColumn )
                return;

            String file = ( String ) table.getValueAt(row, col);
            BufferedReader reader = new BufferedReader(new FileReader( file ) );
            StringBuffer buffer = new StringBuffer();
            String line;
            while( ( line = reader.readLine() ) != null ) {
            if( buffer.length() > 0 )
                buffer.append( "\n" );
                buffer.append( line );
            }

                    JDialog dialog = new JDialog();
            dialog.add( new JTextArea(  buffer.toString(), 140, 100 ) );
            dialog.pack();
            dialog.setVisible(true);
        }
   }); 
```

# c# - XNA NullReferenceException 我认为 LoadContent 不会运行

> ID：14860590
> 
> 赞同：1
> 
> 时间：2013-02-13T18:36:48.127
> 
> 标签：c#, xna, runtime-error

我有一个正在创建的 xna 游戏，它编译得很好，但是当它到达 spriteBatch.Begin(); 时会抛出一个 nullreferenceexception；在我的 spritemanager 类（这是一个可绘制的游戏组件）中。我认为 loadContent 没有运行，使 spritebatch 未初始化，但我不知道如何让它运行。

SpriteManager 加载内容代码：

```
 protected override void LoadContent()
    {
        spriteBatch = new SpriteBatch(Game.GraphicsDevice);  

        player = new Player(Game.Content.Load<Texture2D>("Images/asteroids_player"),
                            new Vector2(Game.Window.ClientBounds.X / 2, Game.Window.ClientBounds.Y / 2),
                            Vector2.Zero,
                            0f,
                            new Point( 27, 40 ),
                            new Point( 1, 1 ),
                            new Point( 1, 2 ));

        asteroidList = new List<Asteroid>();

        base.LoadContent();
    } 
```

SpriteManager 绘制代码：

```
 public override void Draw(GameTime gameTime)
    {
        spriteBatch.Begin(SpriteSortMode.FrontToBack, BlendState.AlphaBlend);  // error thrown here

        player.Draw(gameTime, spriteBatch);

        spriteBatch.End();

        base.Draw(gameTime);
    } 
```

游戏1代码：

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    SpriteManager spriteManager;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {
        // TODO: Add your initialization logic here

        base.Initialize();
    }

    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);

        // Creates and loads a SpriteManager to update/draw sprite objects
        spriteManager = new SpriteManager(this);
        Components.Add(spriteManager);

        base.LoadContent();
    }

    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        // TODO: Add your update logic here

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        // TODO: Add your drawing code here

        base.Draw(gameTime);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:34:08.900

`Initialize()`在调用之前的方法中添加 SpriteManager 组件`base.Initialize()`。

# algorithm - 找到两个数组的最佳匹配

> ID：14860591
> 
> 赞同：2
> 
> 时间：2013-02-13T18:36:54.417
> 
> 标签：algorithm, dynamic-programming

我有两个数组，例如：

```
a1 = [x,y] 
b1 = [a,b,c] 
```

我正在尝试找到它们的“最佳匹配”。一个数组中的每个项目都可以匹配第二个数组中的一个项目，并且项目可以不匹配。数组已排序，项目不能乱序匹配。那是：

```
some valid orderings = [xa, yb, c], [a, x, yb, c], [a, x, b, c, y]  
some invalid orderings = [ya, xb, c], [b, x, a, c, y] 
```

“最佳匹配”由成本函数定义，即每对的 c(a,b) 或每个单例的 c(a)。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:25:21.190

假设数组的大小为 n 和 m。存储一个二维数组 dp[ n ][ m ]，其中 dp[ i ][ j ] 是第一个数组的前 i 个元素和第二个数组的 j 个元素的相同问题的解决方案。使用以下等式进行动态规划：

1.  dp[0][0]=0
2.  dp[ i ][ j ] = max( dp[ i - 1 ][ j - 1 ] + c( a[ i ], b[ j ] ), // 使 a[ i ] 和 b[ j ] 成对
                              dp [ i - 1 ][ j ] + c( a[ i ] ), // 取 a[ i ] 作为单音
                              dp[ i ][ j - 1 ] + c( b[ j ] ), // 取 b[ j ] 作为单音
                              dp[ i - 1 ][ j - 1 ] + c( a[ i ] ) + c( b[ j ] ) // 将 a[ i ] 和 b[ j ] 作为单音
3.  dp[ n-1 ][ m-1 ] 就是答案

在步骤 2 如果 i = 0 仅使用 dp[ i ][ j - 1 ] + c( b[ j ] )，如果 j = 0 使用 dp[ i - 1 ][ j ] + c( a[ i ] ) .

# java - 日期/时间计算何时涉及时区？

> ID：14860592
> 
> 赞同：2
> 
> 时间：2013-02-13T18:36:55.193
> 
> 标签：java, datetime, timezone, jodatime

我正在使用[Joda-Time](http://joda-time.sourceforge.net/api-release/index.html) API 来处理我的 Web 应用程序中的日期时间。我对在日期时间比较中使用/指定特定区域有点困惑。

我有两个文本框 - 一个用于折扣开始日期，另一个用于折扣结束日期。用户可以从 jQuery 日期时间选择器中选择日期。

这两个日期需要根据一些标准进行比较，例如，

*   折扣开始日期必须早于结束日期。
*   两个日期**不能**相同，并且这两个日期之间必须有一个定义的时间间隔。
*   折扣结束日期**不得**早于当前日期，但开始日期可以。

和其他一些。

问题不在于如何进行这些比较。这是关于一个区域。在这种情况下，是否有必要指定一个区域。

更具体地说，关于 Joda API，是否有必要使用[`DateTimeZone`](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTimeZone.html)/[`DateTime`](http://joda-time.sourceforge.net/api-release/org/joda/time/DateTime.html)或[`LocalDateTime`](http://joda-time.sourceforge.net/api-release/org/joda/time/LocalDateTime.html)足以进行此类比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:30:47.520

根据我个人的经验，当你在玩日期和时间的东西时；您必须同时使用时区。这将使您在日期和时间计算中保持准确，尤其是在不同区域的日期和时间中。您可以将一个具有时区的日期时间转换为具有不同时区的另一个等效日期时间。在 Joda Time API 中，有很多方法必须传递时区字符串或 TimeZone 对象才能获得正确的日期时间。

# r - 使用 R 中的调查数据进行 Box-Cox 转换

> ID：14860595
> 
> 赞同：4
> 
> 时间：2013-02-13T18:37:09.440
> 
> 标签：r, survey, stata

有谁知道用 R 中的调查数据估计 Box-Cox 多元变换的方法？我不知道有任何考虑到分层和集群（我正在使用的数据）的东西，但即使是考虑到概率权重的东西也会很棒。我最担心的事实是当应用概率权重时，一个或多个变量可能会发生变化，因此转换可能会发生根本性的变化。也可能对错误和 Box-Cox 算法等产生影响……但这超出了基本上是理论确认方法的范围。

**更新的问题**

R 函数`powerTransform`效果很好，但我认为调查数据还没有任何内容。我认为 Stata 可以处理这个问题，但正如尼克指出的那样，情况并非如此。处理采样权重的唯一 Box-Cox 变换似乎是[this](http://riskfactor.cancer.gov/diet/usualintakes/boxcox_survey.macro.v1.1.sas)。

您是否知道任何允许您将单变量和多变量 BoxCox 转换应用于概率加权数据的 R 函数？

我没有任何数据，但我只是想知道是否有人找到了解决方案。我知道当给出一个具体的例子时人们会很感激......

**单变量 Box-Cox：** 使用 lm 和 svyglm（调查包）对象时返回单变量 Box-Cox 的结果。

```
library(survey)
data(api)
library(car)
dstrat<-svydesign(id=~1,strata=~stype, weights=~pw, data=apistrat, fpc=~fpc)
Sur<-svyglm(api00~mobility, design=dstrat)
NotSur<-lm(api00~mobility, data=apistrat)
powerTransform(Sur)
powerTransform(NotSur) 
```

但是我不认为调查对象的 powerTransformation 是正确的，因为你在运行时得到与 NotSur 相同的结果（并且与 Sur 不同）

```
None<-svydesign(id=~1, weights=rep(1,nrow(apistrat)), data=apistrat, )
Sur2<-svyglm(api00~mobility, design=None)
powerTransform(Sur2) 
```

我更不确定您将如何找到多元正态性，因为您必须使用实际数据，例如

```
summary(powerTransform(cbind(api00,mobility)~1,apistrat)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:48:09.083

您提供的链接似乎是 SAS 中在数据步骤中运行的用户定义函数。应该可以将该方法重新编程到 R 中。

如果您在[此处](http://riskfactor.cancer.gov/diet/usualintakes/mixtran_macro_v1.1.sas)查看建议的 SAS 方法，您会看到它用于`proc transreg`估计所需的功率转换。该 SAS proc 不接受调查权重。我不确定该`weight`选项在该过程中的作用，[请参见此处](http://support.sas.com/documentation/cdl/en/statug/63347/HTML/default/viewer.htm#statug_transreg_sect012.htm)

更新：我仔细查看了您在[此处](http://riskfactor.cancer.gov/diet/usualintakes/boxcox_survey.macro.v1.1.sas)提供的第一个链接。如果数据包含权重，则似乎在`proc univariate`激活`weight`选项的情况下进行加权。但是，如果您`weight`从[此处](http://support.sas.com/documentation/cdl/en/procstat/63104/HTML/default/viewer.htm#procstat_univariate_sect021.htm)查看详细信息，您会发现权重用于操纵方差。我不确定您是否要为您的数据运行该假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-16T02:52:58.133

在链接的 SAS 宏中使用权重应该可以很好地估计最佳转换，但可能会给出不合理的区间估计——因为对数似然比不会具有标准的卡方分布。

将权重缩放到样本大小的总和可能会给出一个大致正确的区间，但是 Box & Cox 方法的基于设计的适当模拟将需要“工作”似然比的抽样分布（如`AIC`and`anova`方法所使用的）用于调查::svyglm)

# java - Java在try块内抛出异常

> ID：14860601
> 
> 赞同：2
> 
> 时间：2013-02-13T18:37:24.233
> 
> 标签：java, exception

我有一个看起来像这样的代码：

```
try {
    if (resp.equals("a")) {
       success(resp);
   } else if (resp.equals("b")) {
       throw new Exception("b error");
   } else if (resp.equals("c")) {
       throw new Exception("c error");
   }

} catch (Exception e) {
    dosomething(e.getMessage());
} 
```

我的 catch 语句没有捕获错误...当我抛出超出 try 块的异常时，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:39:02.703

您的任何`if-else`块都不会被执行，因为您正在比较`==`所有字符串中的字符串。在这种情况下，`try`块根本不会抛出任何`exception`东西。

在所有情况下使用`equals`方法来比较字符串：

```
if (resp.equals("a")) 
```

或者：

```
if ("a".equals(resp))   // Some prefer this, but I don't 
```

第二种方法会避免`NPE`，但通常我会避免使用它，因为我不知道潜在的异常，并且以后可能会陷入陷阱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T19:24:50.320

我认为问题很可能是 if-else 结构未处理的响应。我将代码放在一个简单的测试程序中：

```
public class Test {

  public static void main(String[] args) {
    test("a");
    test("b");
    test("c");
    test("d");
  }

  private static void test(String resp) {
    System.out.println("Testing: " + resp);
    try {
      if (resp.equals("a")) {
        success(resp);
      } else if (resp.equals("b")) {
        throw new Exception("b error");
      } else if (resp.equals("c")) {
        throw new Exception("c error");
      }

    } catch (Exception e) {
      System.out.println("Caught: " + e.getMessage());
    }
  }

  private static void success(String resp) {
    System.out.println("Success");
  }

} 
```

输出是：

```
Testing: a
Success
Testing: b
Caught: b error
Testing: c
Caught: c error
Testing: d 
```

我得到“成功”或“a”、“b”或“c”中的任何一个例外，但“d”都没有。我建议在你的程序中寻找 resp 没有你正在处理的值之一的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T18:55:05.763

使用上面的代码，在 if 块的末尾添加缺少的变量和添加的“else”子句（以及一些输出以查看发生了什么），如下所示：

```
String resp = "b";
boolean success;
try {
    if (resp.equals("a")) {
       System.out.println("in a");
    } else if (resp.equals("b")) {
       throw new Exception("b error");
    } else if (resp.equals("c")) {
       throw new Exception("c error");
    } else System.out.println("ended with no match");

} catch (Exception e) {
    e.printStackTrace();
} 
```

如果 String resp 的值是“b”或“c”，我会按预期抛出错误。如果 resp 的值为“a”，我也会得到“in a”的打印输出。

你的末尾没有 else 子句，所以如果它与 a、b 或 c 都不匹配，那么它将退出 if/else 块并且什么也不做。不会抛出异常，因为它没有遇到任何抛出异常的代码。

您确定您的 resp 变量具有这些值之一吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T18:38:39.540

疯狂的猜测：您抛出异常的分支永远不会运行，因为您将字符串与`==`而不是`equals`.

如果您添加一个

```
else {
    System.out.println("in else block???");
} 
```

在你尝试块中，你会在现场看到......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T18:54:10.113

您正在使用`Exception`s 来控制条件。这是一个不好的做法，你真的应该使用 just `if-else`。所以是这样的：

```
 if (resp.equals("a")) {
       success(resp);
   } else if (resp.equals("b")) {
       dosomething("b error");
   } else if (resp.equals("c")) {
       dosomething("c error");
   } 
```

你也可以做一些事情，比如

```
enum Foo {a,b,c} 
```

然后做一些像这样更干净的事情

```
switch(Foo.valueOf(resp){ // throws an IllegalArgumentException if it isn't a, b, or c
  case a: ...
  case b: ...
  case c: ...
} 
```

希望这对您有所帮助并使您成为更好的程序员。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T18:39:31.970

是的，你做错了什么。不要将字符串与 进行比较`==`，使用 .`equals`

# ruby - Ruby runt 精度错误

> ID：14860602
> 
> 赞同：1
> 
> 时间：2013-02-13T18:37:35.563
> 
> 标签：ruby, ruby-on-rails-3, gem

我在 rails 3 升级（ruby 1.9.3）中使用[runt](https://github.com/texel/runt) gem，并得到这个错误：`undefined method`precision' for nil:NilClass`。

这是在 irb/pry 上复制它的方法：

```
> require 'runt'
=> true
> start_at = Runt::PDate.min(2009,1,1, 0, 0)
=> #<Runt::PDate: 2009-01-01T00:00:00+00:00 ((2454833j,0s,0n),+0s,2299161j)>
> end_at = Runt::PDate.min(2009,1,1, 1, 30)
=> #<Runt::PDate: 2009-01-01T01:30:00+00:00 ((2454833j,5400s,0n),+0s,2299161j)>
> runt_pattern = Runt::EveryTE.new(start_at, 600)
=> every 600 minutes starting Thu Jan  1 00:00:00 2009
> date_range = Runt::DateRange.new(start_at, end_at)
=> #<Runt::PDate: 2009-01-01T00:00:00+00:00 ((2454833j,0s,0n),+0s,2299161j)>
..
#<Runt::PDate: 2009-01-01T01:30:00+00:00 ((2454833j,5400s,0n),+0s,2299161j)>
> schedule = Runt::Schedule.new
=> #<Runt::Schedule:0x007fd46cad56b8 @elems={}>
> schedule.add 'events', runt_pattern
=> every 600 minutes starting Thu Jan  1 00:00:00 2009
> schedule.dates('events', date_range)
NoMethodError: undefined method `precision' for nil:NilClass
from /Users/ttt/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/runt-0.7.0/lib/runt/dprecision.rb:121:in `<=>' 
```

有人对这个有了解吗？

它似乎是由这一行触发的：[https](https://github.com/texel/runt/blob/master/lib/runt/schedule.rb#L28) ://github.com/texel/runt/blob/master/lib/runt/schedule.rb#L28 ，但仍在试图弄清楚如何进一步挖掘代码。

我注意到有一些更新的 runt 版本，例如[https://github.com/craigw/runt](https://github.com/craigw/runt)，但它们似乎也没有解决问题。

它适用于 ree-1.8.7-2011.03 上的 rails2，并返回`[Thu, 01 Jan 2009 00:00:00 +0000]`.

编辑：添加了 rails2 返回的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:48:22.627

看来您的问题出在[EveryTE 类](https://github.com/texel/runt/blob/master/lib/runt/temporalexpression.rb)中。在初始化方法中有一个可选的精度参数。

```
class EveryTE

  include TExpr

  def initialize(start,n,precision=nil)
    @start=start
    @interval=n
    # Use the precision of the start date by default
    @precision=precision || @start.date_precision
  end

  def include?(date)
    i=DPrecision.to_p(@start,@precision)
    d=DPrecision.to_p(date,@precision)
    while i<=d
      return true if i.eql?(d)
      i=i+@interval
    end
    false
  end

  def to_s
    "every #{@interval} #{@precision.label.downcase}s starting #{Runt.format_date(@start)}"
  end

end 
```

我会尝试提供精度而不是接受默认的 nil。

```
> runt_pattern = Runt::EveryTE.new(start_at, 600,Runt::DPrecision::Precision.sec) 
```

这是精度的完整列表（在[DPrecision 类](https://github.com/texel/runt/blob/master/lib/runt/dprecision.rb)中）：

```
Precision.year
Precision.month
Precision.week
Precision.day
Precision.hour
Precision.min
Precision.sec
Precision.millisec 
```

# php - MySQLi：使用一个准备好的语句插入多行

> ID：14860606
> 
> 赞同：1
> 
> 时间：2013-02-13T18:38:03.287
> 
> 标签：php, mysql, mysqli, prepared-statement

我制作了一个脚本，它创建一个原始查询字符串，然后在一个语句中插入数百行。它有效，但不提供准备好的语句所提供的保护。然后我修改了我的脚本以添加准备好的语句。它可以工作，但是速度要慢得多。与原始查询脚本相比，带有准备好的语句的脚本插入行的时间要长得多，因为脚本一次运行一行，而不是一次插入数百行。

这是准备好的语句代码的片段：

```
for( $j = 0; $j < $abilitiesMax - 2; $j++ ){
  $stmtAbility->bind_param('iiiii', $abilityArray[$i]["match_id"] , $abilityArray[$i]["player_slot"],
  $abilityArray[$i][$j]["ability"], $abilityArray[$i][$j]["time"], $abilityArray[$i][$j]["level"] );

  if(  !($stmtAbility->execute()) ){      
   echo "<p>$db->error</p>";
   echo "<p>ERROR: when trying to insert abilities query</p>";
  }
} 
```

它完成了工作，但只有在数百次插入之后。有没有办法将列表或数组绑定到 bind_param() 参数，只需运行一次 $stmtAbility->execute 或其他可以提高性能的方法。

抱歉，如果以前有人问过并回答过这个问题。我环顾了一会，发现了一些类似的问题，但没有一个能明确回答我的要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T21:20:57.353

可以通过动态构建来准备批量插入语句查询，但这需要一些技巧。最重要的位是`str_pad()`用来构造可变长度的查询字符串，以及`call_user_func_array()`用来调用`bind_param()`可变数量的参数。

```
function insertBulkPrepared($db, $table, $fields, $types, $values) {
    $chunklength = 500;
    $fieldcount = count($fields);
    $fieldnames = '`'.join('`, `', $fields).'`';
    $prefix = "INSERT INTO `$table` ($fieldnames) VALUES ";
    $params = '(' . str_pad('', 3*$fieldcount - 2, '?, ') . '), ';
    $inserted = 0;

    foreach (array_chunk($values, $fieldcount*$chunklength) as $group) {
        $length = count($group);
        if ($inserted != $length) {
            if ($inserted) $stmt->close();
            $records = $length / $fieldcount;
            $query = $prefix . str_pad('', 3*$length + 2*($records - 1), $params);
            #echo "\n<br>Preparing '" . $query . "'";
            $stmt = $db->prepare($query);
            if (!$stmt) return false;
            $binding = str_pad('', $length, $types);
            $inserted = $length;
        }

        array_unshift($group, $binding);
        #echo "\n<br>Binding " . var_export($group, true);
        $bound = call_user_func_array(array($stmt, 'bind_param'), $group);
        if (!$bound) return false;
        if (!$stmt->execute()) return false;
    }

    if ($inserted) $stmt->close();
    return true;
} 
```

这个函数将你`$db`作为一个`mysqli`实例，一个表名，一个字段名数组，以及一个对值的引用的平面数组。它在每个查询中最多插入 500 条记录，并尽可能重复使用准备好的语句。`true`如果所有插入都成功，或者`false`其中任何一个失败，则返回。注意事项：

*   表名和字段名没有转义；我把它留给你，以确保它们不包含反引号。幸运的是，它们不应该来自用户输入。
*   如果 的长度`$values`不是 的长度的偶数倍`$fields`，则最终块可能会在准备阶段失败。
*   同样，在大多数情况下，`$types`参数的长度应该与 的长度相匹配，尤其是当它们中的一些不同时。`$fields`
*   它没有区分三种失败的方式。它也不会跟踪成功插入的次数，也不会在出现错误后尝试继续。

定义此函数后，您的示例代码可以替换为以下内容：

```
$inserts = array();
for ($j = 0; $j < $abilitiesMax - 2; $j++) {
    $inserts[] = &$abilityArray[$i]['match_id'];
    $inserts[] = &$abilityArray[$i]['player_slot'];
    $inserts[] = &$abilityArray[$i][$j]['ability'];
    $inserts[] = &$abilityArray[$i][$j]['time'];
    $inserts[] = &$abilityArray[$i][$j]['level'];
}

$fields = array('match_id', 'player_slot', 'ability', 'time', 'level');
$result = insertBulkPrepared($db, 'abilities', $fields, 'iiiii', $inserts);
if (!$result) {
    echo "<p>$db->error</p>";
    echo "<p>ERROR: when trying to insert abilities query</p>";
} 
```

这些 & 符号很重要，因为`mysqli_stmt::bind_param`需要引用，而`call_user_func_array`最新版本的 PHP 没有提供这些引用。

您没有给我们原始准备好的语句，因此您可能需要调整表和字段名称。看起来您的代码也位于循环内`$i`；在这种情况下，只有`for`循环需要在外循环内。如果您将其他行放在循环之外，您将使用更多的内存来构造`$inserts`数组，以换取更有效的批量插入。

也可以重写`insertBulkPrepared()`以接受多维数组，从而消除潜在错误的一个来源，但这需要在分块后将数组展平。

# c#-4.0 - 如何在循环中为 UdpClient 使用异步接收？

> ID：14860613
> 
> 赞同：2
> 
> 时间：2013-02-13T18:38:17.553
> 
> 标签：c#-4.0, asynchronous, udpclient

我正在构建一个多线程应用程序。其中一个线程负责处理来自外部硬件的 UDP 消息。我目前正在循环使用 UdpClient.Receive 方法。我相信 Receive 方法在等待下一条消息时会阻塞线程。如果我想关闭所有线程并优雅地停止应用程序，我有一个共享变量 (_isCancelled)。但是，由于此 Receive 方法会阻塞，因此如果与外部硬件的通信丢失，我将无法正常关闭应用程序。这是当前的代码循环

```
UdpClient _client = new UdpClient(8000);
IPEndPoint _endPoint = new IPEndPoint(IPAddress.Any, 8000);
while (!_isCancelled)
{
  byte[] _bytes = _client.Receive(ref _endPoint);
  ...process data...
} 
```

我在想我应该改用异步接收方法。但我不完全确定我理解这些是如何工作的，以及我应该如何构建我的代码。我希望能够持续接收数据并进行处理。并且在任何时候我都希望能够通过将 _isCancelled 设置为 true 来优雅地关闭线程。如果由于某种原因我们失去了与外部硬件的通信或不再收到任何消息，我们仍然应该能够优雅地关闭线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-11T04:30:25.563

对于使用 TAP 而不是 Begin/End 方法的较新方法，您可以在 .Net 4.5 中使用以下内容

非常简单！

## 异步方法

```
 private static void UDPListener()
    {
        Task.Run(async () =>
        {
            using (var udpClient = new UdpClient(11000))
            {
                string loggingEvent = "";
                while (true)
                {
                    //IPEndPoint object will allow us to read datagrams sent from any source.
                    var receivedResults = await udpClient.ReceiveAsync();
                    loggingEvent += Encoding.ASCII.GetString(receivedResults.Buffer);
                }
            }
        });
    } 
```

## 同步法

与`asynchronous`上面的方法一样，这也可以在`synchronous`方法中以非常相似的方式实现：

```
 private static void UDPListener()
    {
        Task.Run(() =>
        {
            using (var udpClient = new UdpClient(11000))
            {
                string loggingEvent = "";
                while (true)
                {
                    //IPEndPoint object will allow us to read datagrams sent from any source.
                    var remoteEndPoint = new IPEndPoint(IPAddress.Any, 0);
                    var receivedResults = udpClient.Receive(ref remoteEndPoint);
                    loggingEvent += Encoding.ASCII.GetString(receivedResults);
                }
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T14:13:01.680

我添加了一些代码来演示如何使用 BeginReceive/EndReceive 来实现循环。这向您展示了一个精简的版本，您可以轻松修改或实现：

```
UdpClient local;
bool stop;

public void StartReceiving() 
{
    local = new UdpClient(serverIP);
    Receive(); // initial start of our "loop"
}

public void StopReceiving() 
{
    stop = true;
    local.Client.Close();
}

private void Receive() 
{   
    local.BeginReceive(new AsyncCallback(MyReceiveCallback), null);
}

private void MyReceiveCallback(IAsyncResult result) 
{
    IPEndPoint ip = new IPEndPoint(IPAddress.Any, 0);
    local.EndReceive(result, ref ip);

    if (!stop)
    {
        Receive(); // <-- this will be our loop
    }
} 
```

玩得开心

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-05-03T06:43:03.433

另一种支持取消的方法。我更喜欢循环的递归感觉`while(true)`。

```
private async void Listen()
{
    var resp = await _udpClient.ReceiveAsync().ConfigureAwait(false);

    var eventHandler = PacketReceived;
    if (eventHandler != null)
        eventHandler(this, new UdpPacketReceivedEventArgs(resp));

    if (_running)
        Listen();
} 
```

# php - Jquery .load() 不读取 php 包含

> ID：14860614
> 
> 赞同：1
> 
> 时间：2013-02-13T18:38:20.983
> 
> 标签：php, jquery, ajax

在我使用 jquery.load() 之后，它不会读取 index.php 上的包含内容，并使 home.php 不可读，这是我的示例代码。但是如果我在 home.php 上手动添加了 sqlcon.php 的内容，它可以工作，我该如何解决这个问题？

索引.php

```
require 'sqlcon.php';
include 'portal.php'; 
```

门户网站.php

```
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/ajax.js" type="text/javascript"></script>
<div id="nav">
<ul>
<li><a href="modules/menu/home.php" class="nav">Home</a></li>
<li><a href="modules/menu/setup.php"  class="nav"> Setup</a></li>
</ul>
</div>
<div id="subnav"></div> 
```

主页.php

```
$result = mysql_query("SELECT announcement_date,announcement_title,announcement_text FROM sp_announcement") or die(mysql_error());  

    echo "<table id=\"newspaper-b\">";
    echo "<thead>";
    echo "<tr>";
    echo "<th scope=\"col\">Date</th>";
    echo "<th scope=\"col\">Title</th>";
    echo "<th scope=\"col\">Announcement</th>";
    echo "</tr>";
    echo "</thead>";

    while($row = mysql_fetch_array( $result )) {
            echo "<tr>";
            echo '<td>' . $row['announcement_date'] . '</td>';
            echo '<td>' . $row['announcement_title'] . '</td>';
            echo '<td>' . $row['announcement_text'] . '</td>';
            echo "</tr>"; 
    } 
    echo "</table>";
    echo "<br>";
    echo "<br>"; 
```

ajax.js

```
$(document).ready(function() {
$('a.nav').click(function() {
var url = $(this).attr('href');
$('#subnav').load(url);
return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:34:00.837

这里只是一个猜测，但您顶部的文件链接可能没有得到解决。

你应该把它们写成

```
<script src="/js/jquery.js" type="text/javascript"> 
```

代替

```
<script src="js/jquery.js" type="text/javascript"> 
```

如果您将包含的文件放在 /includes/ 文件夹或类似的东西中，那么包含中的相对链接的逻辑现在可能意味着不同的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:07:49.683

可能是 php 脚本假定了调用它的 javascript 文件的目录位置吗？在这种情况下，您需要在通过 js *.*

要查找当前目录，请尝试将其一直放在 php 文件的顶部。（在包括之前）：

```
echo "Current Directory: " . getcwd();
exit; 
```

# php - 将值传递到 wordpress 中的小部件

> ID：14860617
> 
> 赞同：0
> 
> 时间：2013-02-13T18:38:26.983
> 
> 标签：php, wordpress

所以我想在我的侧边栏中添加一个小部件区域，根据活动小部件的数量调整小部件的大小。就像，如果有 3 个活动小部件，那么每个小部件将是容器宽度的 33%。

我的小部件设置如下：

```
register_sidebar(array(
    'name' => __( 'Front page Widgets' ),
    'id' => 'front-page',
    'description' => __( 'Widgets in this area will appear on the front page.' ),
    'before_widget' =>'<li class="span4">',
    'before_title' => '<h3>',
    'after_title' => '</h3>'
)); 
```

我可以用这个来计算活动小部件的数量

```
$sidebars = wp_get_sidebars_widgets();
$footerWidgetCount =  count( $sidebars['footer-widgets'] ); 
```

但是我将如何将 $footerWidgetCount 传递到我的小部件中？我希望能够传递一个新值，`before_widget`以便我可以即时调整它的大小。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:56:35.483

如果我理解正确：

```
$data = array(
  'name' => __( 'Front page Widgets' ),
  'id' => 'front-page',
  'description' => __( 'Widgets in this area will appear on the front page.' ),
  'before_widget' =>'<li class="span4">',
  'before_title' => '<h3>',
  'after_title' => '</h3>'
);
$data['before_widget'] = "<li class='span$footerWidgetCount'>";
register_sidebar($data); 
```

# ios - 使用 UISearchBar 搜索表格视图

> ID：14860620
> 
> 赞同：4
> 
> 时间：2013-02-13T18:38:41.733
> 
> 标签：ios, xcode

我正在使用此代码搜索 UItableView：

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {

if(searchText.length == 0)
{
    isFiltered = FALSE;
}
else
{
    isFiltered = TRUE;

    if (filteredTableData == nil)
       filteredTableData = [[NSMutableArray alloc] init];
    else 
        [filteredTableData removeAllObjects];

    for (NSString* string in self.itemArray)
    {
        NSRange nameRange = [string rangeOfString:searchBar.text options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];
        if(nameRange.location != NSNotFound)
        {
            [filteredTableData addObject:string];
        }
    }
}
[tableView reloadData]; 
[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationFade];
} 
```

一切正常，但如果我按下开始编辑时出现的取消按钮，我的列表不会回来，但搜索结果仍然存在。要显示列表，我必须开始输入，甚至是搜索栏中的单个字符，然后将其删除或按“x”以查看所有列表。有没有办法阻止取消按钮？还是在按下时显示列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T19:17:44.960

实现 - (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar UISearchBar 的委托方法。在filteredTableData数组中添加所有对象（表中的初始对象）并重新加载表。

```
 -(void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
    {       
        [filteredTableData removeAllObjects];
        [filteredTableData addObjectsFromArray:self.itemArray];
        [tableView reloadData];
    } 
```

此外，如果您使用它来选择数据源数组以重新加载表（在表视图数据源方法中），则不需要维护标志 isFiltered。例如

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   if(isFiltered) 
      return filteredTableData.count 
   else
      return self.itemArray.count
} 
```

如果您一直在filteredTableData 数组中维护数据，则不需要这样做。你的方法看起来像 -

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
      return filteredTableData.count 
} 
```

最初在控制器的 init 或 viewDidLoad 方法中，将所有对象添加到过滤表数据中，并仅使用此数组重新加载表。

因此，您的方法看起来像-

```
 -(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
 {
     if(searchText.length == 0)
     {
         [filteredTableData removeAllObjects];
         [filteredTableData addObjectsFromArray:self.itemArray];
     }
     else
     {
        [filteredTableData removeAllObjects];

        for (NSString* string in self.itemArray)
        {
            NSRange nameRange = [string rangeOfString:searchBar.text options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];
            if(nameRange.location != NSNotFound)
            {
                [filteredTableData addObject:string];
            }
        }
     }
     [tableView reloadData]; 
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T19:17:06.587

我不使用该方法，但使用以下方法并且效果很好

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name CONTAINS[cd] %@",searchString];
    self.filteredCustomers = [[self.customers filteredArrayUsingPredicate:predicate] mutableCopy];

    return YES;
}

- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
{
    [self.searchDisplayController setActive:NO animated:NO];
    self.filteredCustomers = nil;
    [self.tableView reloadData];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomerCell";
    NSDictionary *customerObject;

    CustomerListCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (self.searchDisplayController.active) {
        customerObject = [[NSDictionary alloc] initWithDictionary:[self.filteredCustomers objectAtIndex:indexPath.row]];
    } else {
        customerObject = [[NSDictionary alloc] initWithDictionary:[[self.customerData objectAtIndex:indexPath.section] objectAtIndex:indexPath.row]];
    }
    cell.textLabel.text = [customerObject objectForKey:@"name"];
    cell.customerName = [customerObject objectForKey:@"name"];
    cell.customerId = [customerObject objectForKey:@"customer_id"];

    return cell;
} 
```

# c++ - C++：std::vector [] 运算符

> ID：14860622
> 
> 赞同：9
> 
> 时间：2013-02-13T18:38:45.640
> 
> 标签：c++, stl, std, stdvector

为什么 std::vector 有 2 个运算符`[]` 实现？

```
reference       operator[]( size_type pos );
const_reference operator[]( size_type pos ) const; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T18:39:32.553

一个用于*非常*量向量对象，另一个用于*const*向量对象。

```
void f(std::vector<int> & v1, std::vector<int> const & v2)
{
   //v1 is non-const vector
   //v2 is const vector

   auto & x1 = v1[0]; //invokes the non-const version
   auto & x2 = v2[0]; //invokes the const version

   v1[0] = 10; //okay : non-const version can modify the object
   v2[0] = 10; //compilation error : const version cannot modify 

   x1 = 10; //okay : x1 is inferred to be `int&`
   x2 = 10; //error: x2 is inferred to be `int const&`
} 
```

如您所见，非常量版本允许您使用索引修改向量元素，而该`const`版本不允许您修改向量元素。这就是这两个版本之间的语义差异。

有关详细说明，请参阅此常见问题解答：

*   [经验法则：下标运算符通常成对出现！](http://www.parashift.com/c++-faq/const-overloading.html)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:40:58.500

为了使这种区分成为可能：

```
// const vector object, cannot be modified
// const operator[] allows for this
int get_value(const std::vector<int>& vec, size_t index)
{
   return vec[index];
}

// non-const vector object can be modified
// non-const operator[] allows for this
void set_value(std::vector<int>& vec, size_t index, int val)
{
   vec[index] = value;
}

std::vector<int> values;
values.push_back(10);
values.push_back(20);

set_value(values, 0, 50);
get_value(values, 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T19:01:18.500

一个，以便您可以修改和读取（非常量）向量

```
void foo( std::vector<int>& vector )
{
    // reference operator[]( size_type );
    int old = vector[0];
    vector[0] = 42;
} 
```

一个，以便您可以从 const 向量中读取

```
void foo( std::vector<int> const& vector )
{
    //const_reference operator[]( size_type ) const;
    int i = vector[0];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T18:40:53.300

这两个重载之一允许您检索对通过变量`const`访问的向量元素的引用。`const`另一个允许您获得对通过非变量`const`访问的向量元素的非引用。`const`

如果您没有该`const`版本，则不允许您编译以下内容：

```
void f(vector<int> const& v)
{
    cout << v[0]; // Invokes the const version of operator []
} 
```

在下面的示例中，将调用非 const 版本，它返回`const`对数组中第一个元素的非引用，并允许例如为其分配一个新值：

```
void f(vector<int>& v)
{
    v[0] = 1; // Invokes the non-const version of operator[]
} 
```

# javascript - 动态表和 DOM

> ID：14860624
> 
> 赞同：1
> 
> 时间：2013-02-13T18:38:55.250
> 
> 标签：javascript

我通过 HTML 创建了一个表格，其中一个列包含一系列按钮，用于添加新行、删除该特定行或向上或向下移动该行。我可以添加新行，但在删除按下按钮的同一行时遇到了一些问题。我使用警报方法来显示行索引，当我单击按钮时，它显示行索引未定义，但如果我单击同一行中的其他任何位置，它会显示正确的行索引！

我是 Javascript 的新手，想用纯 JavaScript 来做这件事。

我设置了一个警报来确定正在调用哪个行索引，并且由于某种原因，当我单击按钮时，它说行索引未定义，但下一个警报框显示正确的行索引。

```
 function removeData(x) {
        var ind = x.rowIndex;
        alert(ind);
        //document.getElementById("table1").deleteRow(ind);
    }

   <table id="table1" border="2px">
            <tr>
                <th>Column 1</th> <th>Column 2</th> <th>Column 3</th> <th>Column 4</th> 
            </tr>   
            <tr id="enterData" onclick="removeData(this)">
                <td id="buttons"><input type="button" value="Remove" id="button1" onclick="removeData(this)" /> 
                    <input type="button" value="Up" id="button2" onclick="up()" />
                    <input type="button" value="Down" id="button3" onclick="down()" /> 
                    <input type="button" value="Add" id="button4" onclick="editTable()" />
                </td>
            </tr>       
        </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:49:40.163

您会看到两个警报，因为 click 事件正在通过 DOM 冒泡。

你的`tr`和一个`input`元素都有`onclick=removeData(this)`处理程序。

首先 click 事件在按钮上触发（这就是`rowIndex`未定义的原因），然后它冒泡到`tr`（这就是第二个警报向您显示正确值的原因）。

# python - 使用python中的字典在文本文件中查找字典单词

> ID：14860626
> 
> 赞同：0
> 
> 时间：2013-02-13T18:38:58.193
> 
> 标签：python, dictionary, data-cleaning, pyenchant

我阅读了[如何检查字典单词](https://stackoverflow.com/questions/3788870/how-to-check-if-a-word-is-an-english-word-with-python) 并且我想到了使用字典检查我的文本文件。我已经阅读了[pyenchant](http://pythonhosted.org/pyenchant/tutorial.html)说明，我想如果我用它`get_tokenizer`来把文本文件中的所有字典单词都还给我。

所以这就是我卡住的地方：我希望我的程序以段落的形式给我所有的字典单词组。一旦遇到任何垃圾字符，就认为是一个段落中断，并忽略从那里开始的所有内容，直到找到 X 个连续单词。

我希望它按顺序读取文本文件`filename_nnn.txt`，解析它，然后写入`parsed_filname_nnn.txt`. 我还没有做任何文件操作。

到目前为止我所拥有的：

```
import enchant
from enchant.tokenize import get_tokenizer, HTMLChunker
dictSentCheck = get_tokenizer("en_US")
sentCheck = raw_input("Check Sentense: ")

def check_dictionary():
    outcome = dictCheck.check(wordCheck) 
    test = [w[0] for w in dictSentCheck(sentCheck)] 
```

- - - 示例文本 - - -

> > 2008 年 6 月 25 日，星期三，英国板球与津巴布韦断绝关系 text<void(0);><void(0);> <void(0);>email <void(0);>打印 EMAIL THIS ARTICLE 您的姓名：您的电子邮件地址：收件人姓名：收件人的电子邮件地址：<;>添加另一个收件人您的评论：发送邮件< ;void(0);> 关闭此表格 < [http://ad.au.doubleclick.net/jump/sbs.com.au/worldnews;sz=300x250;tile=2;ord=123456789?>](http://ad.au.doubleclick.net/jump/sbs.com.au/worldnews;sz=300x250;tile=2;ord=123456789?&gt) ; 英格兰和威尔士板球委员会（ECB）宣布暂停与津巴布韦的所有联系，并取消津巴布韦明年的英格兰之旅。

该脚本应返回：

> > 英国板球周三与津巴布韦断绝关系
> > 
> > 英格兰和威尔士板球委员会（ECB）宣布暂停与津巴布韦的所有联系，并取消津巴布韦明年的英格兰之旅

我接受了阿巴纳特的回应。下面是我的最终脚本。请注意，这是非常低效的，应该清理一些。另外免责声明我很久以前大学以来就没有编码过。

```
import enchant
from enchant.tokenize import get_tokenizer
import os

def clean_files():
    os.chdir("TARGET_DIRECTORY")
    for files in os.listdir("."):
           #get the numbers out file names 
           file_number = files[files.rfind("_")+1:files.rfind(".")]

           #Print status to screen
           print "Working on file: ", files

           #Read and process original file
           original_file = open("name_"+file_number+".txt", "r+")
           read_original_file = original_file.read();

           #Start the parsing of the files
           token_words = tokenize_words(read_original_file)
           parse_result = ('\n'.join(split_on_angle_brackets(token_words,file_number)))
           original_file.close()

           #Commit changes to parsed file
           parsed_file = open("name_"+file_number+"_parse.txt", "wb")
           parsed_file.write(parse_result);
           parsed_file.close()

def tokenize_words(file_words):
    tokenized_sentences = get_tokenizer("en_US")
    word_tokens = tokenized_sentences(file_words)
    token_result = [w[0] for w in word_tokens]
    return token_result

def check_dictionary(dict_word):
    check_word = enchant.Dict("en_US")
    validated_word = check_word.check(dict_word)
    return validated_word

def split_on_angle_brackets(token_words, file_number):
    para = []
    bracket_stack = 0
    ignored_words_per_file = open("name_"+file_number+"_ignored_words.txt", "wb")
    for word in token_words:
        if bracket_stack:
            if word == 'gt':
                bracket_stack -= 1
            elif word == 'lt':
                bracket_stack += 1
        else:
            if word == 'lt':
                if len(para) >= 7:
                    yield ' '.join(para)
                para = []
                bracket_stack = 1
            elif word != 'amp':
                if check_dictionary(word) == True:
                    para.append(word)
                    #print "append ", word
                else:
                       print "Ignored word: ", word
                       ignored_words_per_file.write(word + " \n")
    if para:
        yield ' '.join(para)

    #Close opened files
    ignored_words_per_file.close()

clean_files() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:04:07.313

我仍然不确定您的问题到底是什么，或者您的代码应该做什么。

但这条线似乎是关键：

```
test = [w[0] for w in dictSentCheck(sentCheck)] 
```

这会给你一个所有单词的列表。它包括诸如`lt`和`gt`作为单词之类的东西。你想去掉`lt`and`gt`对里面的任何东西。

而且，正如您在评论中所说，“我可以将所需的连续单词数设置为 7”。

所以，像这样：

```
def split_on_angle_brackets(words):
    para = []
    bracket_stack = 0
    for word in words:
        if bracket_stack:
            if word == 'gt':
                bracket_stack -= 1
            elif word == 'lt':
                bracket_stack += 1
        else:
            if word == 'lt':
                if len(para) >= 7:
                    yield ' '.join(para)
                para = []
                bracket_stack = 1
            else:
                para.append(word)
    if para:
        yield ' '.join(para) 
```

如果您将其与示例数据一起使用：

```
print('\n'.join(split_on_angle_brackets(test))) 
```

你得到这个：

```
English cricket cuts ties with Zimbabwe Wednesday June text
print EMAIL THIS ARTICLE your name your email address recipient's name recipient's email address
add another recipient your comment Send Mail
The England and Wales Cricket Board ECB announced it was suspending all ties with Zimbabwe and was cancelling Zimbabwe's tour of England next year 
```

这与您的示例输出不匹配，但我想不出任何可以提供您的示例输出的规则，因此我正在尝试实施您描述的规则。

# c++ - 编译问题：使用元组构建 Composite_Key 可变参数模板类

> ID：14860630
> 
> 赞同：0
> 
> 时间：2013-02-13T18:39:10.237
> 
> 标签：c++, c++11, tuples, variadic-templates

我有一个`ID`带有参数的类模板`T`。

*   如果`T`已`key_type`定义，则`ID`调用`get_key()`类型的对象`T`以获取用于存储的标识符。
*   如果`T`没有`key_type`定义，`ID`将使用对象的地址作为标识符。

到目前为止，代码工作正常。

现在，我想定义一个新的可变参数类模板`Composite_Key`，它将可变参数模板参数作为`std::tuple`. 我正在尝试使用此新代码`ID`，但我遇到了一堆编译错误，我很难理解。

这些错误似乎表明缺少`operator<()`，这很奇怪，因为它是在 ; 中定义的`ID`。我不知道我做错了什么。

下面的代码，包括测试代码，在最后一行（注释）之前都可以正常工作。

**代码**

```
#include <string>
#include <tuple>
#include <set>
#include <cassert>

template<typename T>
struct void_ {
    using type = void;
};

// -----------------------------------------------------------------------------

template<typename T, typename = void>
struct ptr_or_key_type {
    using type = T const*;               // our default key_type : a ptr
    static type get_key( T const& t ) { return &t; }
};

template<typename T>
struct ptr_or_key_type<T, typename void_<typename T::key_type>::type> {
    using type = typename T::key_type;   // the specialised key_type
    static type get_key( T const& t ) { return t.get_key(); }
};

// -----------------------------------------------------------------------------

template<typename T>
class ID
{
private:
  typename ptr_or_key_type<T>::type   m_id;

public:
    ID( T const& t ) :
        m_id( ptr_or_key_type<T>::get_key( t ))
    { }
    ID( ID const& rhs ) :
        m_id( rhs.m_id )
    { }
    ~ID() { }
    ID& operator=( ID const& rhs )
    {
        if ( &rhs!=this )
            m_id = rhs.m_id;
        return *this;
    }
public:
    bool operator==( ID const& rhs ) const { return m_id==rhs.m_id; }
    bool operator!=( ID const& rhs ) const { return !(*this==rhs);  }
    bool operator<( ID const& rhs ) const  { return m_id<rhs.m_id;  }
    bool operator<=( ID const& rhs ) const { return m_id<=rhs.m_id; }
    bool operator>( ID const& rhs ) const  { return m_id>rhs.m_id;  }
    bool operator>=( ID const& rhs ) const { return m_id>=rhs.m_id; }
};

// -----------------------------------------------------------------------------

struct Plain_Class { };

struct String_Key { 
    using key_type = std::string;

    std::string  m_key;
    String_Key( std::string const& key ) : m_key( key ) { }
    std::string const& get_key() const { return m_key; }
};

struct Char_Key {
    using key_type = char;

    char m_key;
    Char_Key( char key ) : m_key( key ) { }
    char get_key() const { return m_key; }
};

struct Int_Key {
    using key_type = int;

    int m_key;
    Int_Key( int key ) : m_key( key ) { }
    int get_key() const { return m_key; }
};

template<typename... Args>
struct Composite_Key
{
  using key_type = std::tuple<Args...>;

    key_type m_key;
    Composite_Key( key_type const& key ) : m_key( key ) { }
    key_type const& get_key() const { return m_key; }
};

// -----------------------------------------------------------------------------

int main( int argc, char* argv[] )
{
    // Plain_Class will use address of object as key
    Plain_Class f,g;
    ID<Plain_Class> id_f( f ), id_g( g );
    assert( id_f!=id_g );
    std::set<ID<Plain_Class>>  s;
    s.insert( f );
    s.insert( g );
    assert( s.size()==2u );    // two unique addresses, so two in the set

    // String_Key will use std::string as the key
    String_Key h( "abc" ), i( "abc" );
    std::set<ID<String_Key>>  s2;
    s2.insert( h );
    s2.insert( i );
    assert( s2.size()==1u );   // since sets must have unique values

    // attempt a composite key type
    using My_Composite = Composite_Key<String_Key,Int_Key,Char_Key>; 
    My_Composite
        j( std::make_tuple( String_Key{ "foo" }, Int_Key{ 1 }, Char_Key{ 'c' } )),
        k( std::make_tuple( String_Key{ "foo" }, Int_Key{ 1 }, Char_Key{ 'c' } ))
        ;
    std::set<ID<My_Composite>>  s3;
    s3.insert( j );  // FAILURE: everything above this line compiles fine
#if 0
    s3.insert( k );
    assert( s3.size()==1u );   // since sets must have unique values
#endif
} 
```

**错误之墙**

```
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple: In instantiation of ‘static bool std::__tuple_compare<0ul, __i, __j, _Tp, _Up>::__less(const _Tp&, const _Up&) [with long unsigned int __i = 0ul; long unsigned int __j = 3ul; _Tp = std::tuple<String_Key, Int_Key, Char_Key>; _Up = std::tuple<String_Key, Int_Key, Char_Key>]’:
/usr/include/c++/4.7/tuple:814:62:   required from ‘bool std::operator<(const std::tuple<_TElements ...>&, const std::tuple<_Elements ...>&) [with _TElements = {String_Key, Int_Key, Char_Key}; _UElements = {String_Key, Int_Key, Char_Key}]’
sandbox.cpp:50:59:   required from ‘bool ID<T>::operator<(const ID<T>&) const [with T = Composite_Key<String_Key, Int_Key, Char_Key>; ID<T> = ID<Composite_Key<String_Key, Int_Key, Char_Key> >]’
/usr/include/c++/4.7/bits/stl_function.h:237:22:   required from ‘bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = ID<Composite_Key<String_Key, Int_Key, Char_Key> >]’
/usr/include/c++/4.7/bits/stl_tree.h:1285:4:   required from ‘std::pair<std::_Rb_tree_iterator<_Val>, bool> std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_insert_unique(_Arg&&) [with _Arg = ID<Composite_Key<String_Key, Int_Key, Char_Key> >; _Key = ID<Composite_Key<String_Key, Int_Key, Char_Key> >; _Val = ID<Composite_Key<String_Key, Int_Key, Char_Key> >; _KeyOfValue = std::_Identity<ID<Composite_Key<String_Key, Int_Key, Char_Key> > >; _Compare = std::less<ID<Composite_Key<String_Key, Int_Key, Char_Key> > >; _Alloc = std::allocator<ID<Composite_Key<String_Key, Int_Key, Char_Key> > >]’
/usr/include/c++/4.7/bits/stl_set.h:424:40:   required from ‘std::pair<typename std::_Rb_tree<_Key, _Key, std::_Identity<_Key>, _Compare, typename _Alloc::rebind<_Key>::other>::const_iterator, bool> std::set<_Key, _Compare, _Alloc>::insert(std::set<_Key, _Compare, _Alloc>::value_type&&) [with _Key = ID<Composite_Key<String_Key, Int_Key, Char_Key> >; _Compare = std::less<ID<Composite_Key<String_Key, Int_Key, Char_Key> > >; _Alloc = std::allocator<ID<Composite_Key<String_Key, Int_Key, Char_Key> > >; typename std::_Rb_tree<_Key, _Key, std::_Identity<_Key>, _Compare, typename _Alloc::rebind<_Key>::other>::const_iterator = std::_Rb_tree_const_iterator<ID<Composite_Key<String_Key, Int_Key, Char_Key> > >; std::set<_Key, _Compare, _Alloc>::value_type = ID<Composite_Key<String_Key, Int_Key, Char_Key> >]’
sandbox.cpp:121:15:   required from here
/usr/include/c++/4.7/tuple:781:63: error: no match for ‘operator<’ in ‘std::get<0ul, {String_Key, Int_Key, Char_Key}>((* & __u)) < std::get<0ul, {String_Key, Int_Key, Char_Key}>((* & __t))’
/usr/include/c++/4.7/tuple:781:63: note: candidates are:
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:65:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/string:42,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/stl_pair.h:212:5: note: template<class _T1, class _T2> constexpr bool std::operator<(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)
/usr/include/c++/4.7/bits/stl_pair.h:212:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::pair<_T1, _T2>’
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/string:42,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/stl_iterator.h:299:5: note: template<class _Iterator> bool std::operator<(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
/usr/include/c++/4.7/bits/stl_iterator.h:299:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::reverse_iterator<_Iterator>’
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/string:42,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/stl_iterator.h:349:5: note: template<class _IteratorL, class _IteratorR> bool std::operator<(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
/usr/include/c++/4.7/bits/stl_iterator.h:349:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::reverse_iterator<_IteratorL>’
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/string:42,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/stl_iterator.h:1057:5: note: template<class _IteratorL, class _IteratorR> bool std::operator<(const std::move_iterator<_IteratorL>&, const std::move_iterator<_IteratorR>&)
/usr/include/c++/4.7/bits/stl_iterator.h:1057:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::move_iterator<_IteratorL>’
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/string:42,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/stl_iterator.h:1063:5: note: template<class _Iterator> bool std::operator<(const std::move_iterator<_Iterator>&, const std::move_iterator<_Iterator>&)
/usr/include/c++/4.7/bits/stl_iterator.h:1063:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::move_iterator<_Iterator>’
In file included from /usr/include/c++/4.7/string:54:0,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/basic_string.h:2566:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator<(const std::basic_string<_CharT, _Traits, _Alloc>&, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.7/bits/basic_string.h:2566:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::basic_string<_CharT, _Traits, _Alloc>’
In file included from /usr/include/c++/4.7/string:54:0,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/basic_string.h:2578:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator<(const std::basic_string<_CharT, _Traits, _Alloc>&, const _CharT*)
/usr/include/c++/4.7/bits/basic_string.h:2578:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::basic_string<_CharT, _Traits, _Alloc>’
In file included from /usr/include/c++/4.7/string:54:0,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/basic_string.h:2590:5: note: template<class _CharT, class _Traits, class _Alloc> bool std::operator<(const _CharT*, const std::basic_string<_CharT, _Traits, _Alloc>&)
/usr/include/c++/4.7/bits/basic_string.h:2590:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   mismatched types ‘const _CharT*’ and ‘String_Key’
/usr/include/c++/4.7/tuple:808:5: note: template<class ... _TElements, class ... _UElements> bool std::operator<(const std::tuple<_TElements ...>&, const std::tuple<_Elements ...>&)
/usr/include/c++/4.7/tuple:808:5: note:   template argument deduction/substitution failed:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::tuple<_TElements ...>’
In file included from /usr/include/c++/4.7/set:60:0,
                 from sandbox.cpp:3:
/usr/include/c++/4.7/bits/stl_tree.h:873:5: note: template<class _Key, class _Val, class _KeyOfValue, class _Compare, class _Alloc> bool std::operator<(const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&, const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>&)
/usr/include/c++/4.7/bits/stl_tree.h:873:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>’
In file included from /usr/include/c++/4.7/set:61:0,
                 from sandbox.cpp:3:
/usr/include/c++/4.7/bits/stl_set.h:721:5: note: template<class _Key, class _Compare, class _Alloc> bool std::operator<(const std::set<_Key, _Compare, _Alloc>&, const std::set<_Key, _Compare, _Alloc>&)
/usr/include/c++/4.7/bits/stl_set.h:721:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::set<_Key, _Compare, _Alloc>’
In file included from /usr/include/c++/4.7/set:62:0,
                 from sandbox.cpp:3:
/usr/include/c++/4.7/bits/stl_multiset.h:702:5: note: template<class _Key, class _Compare, class _Alloc> bool std::operator<(const std::multiset<_Key, _Compare, _Alloc>&, const std::multiset<_Key, _Compare, _Alloc>&)
/usr/include/c++/4.7/bits/stl_multiset.h:702:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::multiset<_Key, _Compare, _Alloc>’
/usr/include/c++/4.7/tuple:781:63: error: no match for ‘operator<’ in ‘std::get<0ul, {String_Key, Int_Key, Char_Key}>((* & __t)) < std::get<0ul, {String_Key, Int_Key, Char_Key}>((* & __u))’
/usr/include/c++/4.7/tuple:781:63: note: candidates are:
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:65:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/string:42,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/stl_pair.h:212:5: note: template<class _T1, class _T2> constexpr bool std::operator<(const std::pair<_T1, _T2>&, const std::pair<_T1, _T2>&)
/usr/include/c++/4.7/bits/stl_pair.h:212:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::pair<_T1, _T2>’
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/string:42,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/stl_iterator.h:299:5: note: template<class _Iterator> bool std::operator<(const std::reverse_iterator<_Iterator>&, const std::reverse_iterator<_Iterator>&)
/usr/include/c++/4.7/bits/stl_iterator.h:299:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::reverse_iterator<_Iterator>’
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/string:42,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/stl_iterator.h:349:5: note: template<class _IteratorL, class _IteratorR> bool std::operator<(const std::reverse_iterator<_IteratorL>&, const std::reverse_iterator<_IteratorR>&)
/usr/include/c++/4.7/bits/stl_iterator.h:349:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::reverse_iterator<_IteratorL>’
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/string:42,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/stl_iterator.h:1057:5: note: template<class _IteratorL, class _IteratorR> bool std::operator<(const std::move_iterator<_IteratorL>&, const std::move_iterator<_IteratorR>&)
/usr/include/c++/4.7/bits/stl_iterator.h:1057:5: note:   template argument deduction/substitution failed:
In file included from sandbox.cpp:2:0:
/usr/include/c++/4.7/tuple:781:63: note:   ‘const String_Key’ is not derived from ‘const std::move_iterator<_IteratorL>’
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:68:0,
                 from /usr/include/c++/4.7/bits/char_traits.h:41,
                 from /usr/include/c++/4.7/string:42,
                 from sandbox.cpp:1:
/usr/include/c++/4.7/bits/stl_iterator.h:1063:5: note: template<class _Iterator> bool 
```

**回答**

正如[下面的 jmetcalf](https://stackoverflow.com/a/14860850/975129)所指出的，所有的 Key 类也必须实现`operator<()`。这是有道理的，因为`operator<()`in`ID`实际上取决于`std::tuple`'s `operator<()`，这取决于所有单独的类型' `operator<()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:53:22.813

`operator<()`如果你想在集合中使用它们，你需要在你的关键类中实现它们。实现要求对所有子类型都实现这`std::tuple::operator<()`一点（它按字典顺序从左到右进行比较）

一旦你从其他不相关的东西中挑选出来，这个错误就很明显了：

> /usr/include/c++/4.7/tuple:781:63: 错误: 'std::get< **0** ul, { **String_Key** , Int_Key, Char_Key}>((* & __u )) < std::get< **0** ul, { **String_Key** , Int_Key, Char_Key}>((* & __t))'</p>

# c# - 为什么将 ArrayList 元素添加到 ListBox 时出现空引用异常？

> ID：14860636
> 
> 赞同：0
> 
> 时间：2013-02-13T18:39:36.050
> 
> 标签：c#, arraylist, listbox, compact-framework, windows-ce

此代码在带有“Null Reference Exception”的注释行上爆炸：

```
MessageBox.Show(string.Format("arrLst count is {0}", arrLst.Count));
for (int i = 0; i < arrLst.Count; i++)
{
    MessageBox.Show("Made it into for loop"); 
    listBoxCommandsSent.Items.Add(arrLst[i]); // <-- blows up here
    MessageBox.Show("Made it past first listBoxCommandsSent.Items.Add()");
    . . . 
```

arrLst 是一个 ArrayList

第一个 MessageBox.Show 告诉我 arrLst 的计数为 8 第二个 MessageBox.Show 已达到（“使其进入 for 循环”）第三个 MessageBox.Show 未达到；所以，问题是将项目 0 添加到列表框中。

为什么这是有问题的？

注意：我使用 MessageBox.Show() 在调试器中单步执行它的原因在 SO 的其他地方都有记录；在一个疯狂的地狱中，我无法从 VS 2003 的 XP 模式中连接到我的手持设备。

## 更新

甚至添加这些：

```
MessageBox.Show(string.Format("arrLst element 0 is {0}", arrLst[0].ToString()));
MessageBox.Show(string.Format("arrLst element 0 from i is {0}", arrLst[i].ToString())); 
```

...告诉我我的期望（在这两种情况下，正如预期的那样）：

```
arrLst element 0 is ! 0 200 200 210 1
arrLst element 0 from i is ! 0 200 200 210 1 
```

我还在作业中添加了一个“ToString”，所以它现在是：

```
listBoxCommandsSent.Items.Add(arrLst[i].ToString()); 
```

……但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:47:06.390

看来您没有初始化`listBoxCommandsSent`或`listBoxCommandsSent.Items`。您可以添加

```
if(listBoxCommandsSent==null)
    MessageBox.Show("listBoxCommandsSent is null");
if(listBoxCommandsSent.Items==null)
    MessageBox.Show("Items is null"); 
```

检查什么是空的。

# sql - 如何从 DUAL 获取当年过去的所有月份？

> ID：14860639
> 
> 赞同：0
> 
> 时间：2013-02-13T18:39:59.533
> 
> 标签：sql, oracle, plsql

我只想得到过去的几个月，所以说在二月它只会在一月返回，在十二月它会在一月到十一月返回。

这将返回当年的所有月份。

```
 Select TO_CHAR( ADD_MONTHS( TRUNC(SYSDATE,'year') , LEVEL-1  ), 'YYYY-MM' ) Month
     FROM   dual
     CONNECT BY LEVEL <= 12; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:08:44.730

稍微简单的版本：

```
select add_months(trunc(sysdate,'YYYY'), level-1)
from dual
connect by level < to_char(sysdate,'MM'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:51:02.297

您只需要调整由`12`in`CONNECT BY`子句控制的返回行数。像这样的东西应该工作

```
 Select TO_CHAR( ADD_MONTHS( TRUNC(SYSDATE,'year') , LEVEL-1  ), 'YYYY-MM' ) Month
   FROM dual
CONNECT BY LEVEL <= floor( months_between( sysdate, trunc(sysdate,'YYYY'))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T22:50:29.970

或者，如果想使用间隔和 ANSI`EXTRACT()`函数（这避免了使用的隐式转换`TO_CHAR(SYSDATE, 'MM')`——并不是说它会以任何方式影响此查询的运行速度）：

```
 SELECT TRUNC(SYSDATE, 'YEAR') + NUMTOYMINTERVAL(LEVEL - 1, 'MONTH')
   FROM dual
CONNECT BY LEVEL < EXTRACT(MONTH FROM SYSDATE); 
```

# git - 如何制作镜像上游存储库的本地 git 存储库？

> ID：14860643
> 
> 赞同：2
> 
> 时间：2013-02-13T18:40:24.290
> 
> 标签：git

我需要镜像一个上游存储库并将其用作所有项目的本地存储库。标准是：

1.  能够从上游存储库中提取/获取。

2.  人们可以克隆这个本地存储库并处理他们自己的项目；然后他们可以将他们的项目/分支/更改推送到这个本地存储库（我们不会推送回上游存储库）。

3.  当人们从这个本地存储库中提取时，他们应该能够看到上游存储库中的更改。

我尝试使用：

```
git clone --bare 
```

克隆上游存储库，然后：

```
git fetch 
```

更新。但是这个本地存储库的克隆不会看到更新。据我所知，在本地“裸”存储库中，“origin/master”得到了更新，但“HEAD”和“master”保持在原来的位置。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T19:11:18.410

你试过用 克隆`git clone --mirror`吗？

从[git clone 手册页](http://www.kernel.org/pub/software/scm/git/docs/git-clone.html)：

> 设置源存储库的镜像。这意味着 --bare。与 --bare 相比，--mirror 不仅将源的本地分支映射到目标的本地分支，它还映射所有 refs（包括远程跟踪分支、注释等）并设置 refspec 配置，以便所有这些 refs被目标存储库中的 git 远程更新覆盖。

# c - bind：协议不支持的地址族

> ID：14860648
> 
> 赞同：1
> 
> 时间：2013-02-13T18:40:38.697
> 
> 标签：c, proxy, tunnel

此代码适用于我的其他 vps，但对于 linode 则无效。

```
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/wait.h>
#include <netinet/in.h>
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <unistd.h>
#include <netdb.h>
#include <time.h>
#include <string.h>

#ifdef STRERROR
extern char *sys_errlist[];
extern int sys_nerr;
char *undef = "Undefined error";

char *strerror(error)
int error;
{
    if (error > sys_nerr)
        return undef;
    return sys_errlist[error];
}
#endif
#define CIAO_PS "bfi_2"

main(argc, argv)
    int argc;
    char **argv;
{
    int lsock, csock, osock;
    FILE *cfile;
    char buf[4096];
    struct sockaddr_in laddr, caddr, oaddr;
    int caddrlen = sizeof(caddr);
    fd_set fdsr, fdse;
    struct hostent *h;
    struct servent *s;
    int nbyt;
    unsigned long a;
    unsigned short oport;
    int i, j, argvlen;
    char *bfiargv[argc+1];
    char *fintops = CIAO_PS ;

    if( argc < 4 )
    {
        fprintf(stderr,"Usage: %s localport remoteport remotehost fakeps\n",argv[0]);
        return 30;
    }

    for( i = 0; i < argc; i++ )
    {
        bfiargv[i] = malloc(strlen(argv[i]) + 1);
        strncpy(bfiargv[i], argv[i], strlen(argv[i]) + 1);
    }

    bfiargv[argc] = NULL;
    argvlen = strlen(argv[0]);

    if( argvlen < strlen(CIAO_PS) )
    {
        printf("Se vuoi fregare davvero ps vedi di lanciarmi almeno come superFunkyDataPipe !\n") ;
        abort();
    }

    if(bfiargv[4]) fintops=bfiargv[4] ;
    strncpy(argv[0], fintops, strlen(fintops));

    for( i = strlen(fintops); i < argvlen; i++ )
        argv[0][i] = '\0';

    for( i = 1; i < argc; i++ )
    {
        argvlen = strlen(argv[i]);
        for(j=0; j <= argvlen; j++)
            argv[i][j] = '\0';
    }

    a = inet_addr(argv[3]);

    if( !(h = gethostbyname(bfiargv[3])) && !(h = gethostbyaddr(&a, 4, AF_INET)) )
    {
        perror(bfiargv[3]);
        return 25;
    }

    oport = atol(bfiargv[2]);
    laddr.sin_port = htons((unsigned short)(atol(bfiargv[1])));

    if( (lsock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) == -1 )
    {
        perror("socket");
        return 20;
    }

    laddr.sin_family = htons(AF_INET);
    // laddr.sin_addr.s_addr = htonl(0);
    laddr.sin_addr.s_addr = inet_addr("ip address here");

    if( bind(lsock, &laddr, sizeof(laddr)) )
    {
        perror("bind");
        return 20;
    }

    if( listen(lsock, 1) )
    {
        perror("listen");
        return 20;
    }

    if( (nbyt = fork()) == -1 )
    {
        perror("fork");
        return 20;
    }

    if (nbyt > 0)
        return 0;

    setsid();
    while( (csock = accept(lsock, &caddr, &caddrlen)) != -1 )
    {
        cfile = fdopen(csock,"r+");
        if( (nbyt = fork()) == -1 )
        {
            fprintf(cfile, "500 fork: %s\n", strerror(errno));
            shutdown(csock,2);
            fclose(cfile);
            continue;
        }

        if (nbyt == 0)
            goto gotsock;

        fclose(cfile);
        while (waitpid(-1, NULL, WNOHANG) > 0);
    }

    return 20;

gotsock:
    if( (osock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) == -1 )
    {
        fprintf(cfile, "500 socket: %s\n", strerror(errno));
        goto quit1;
    }

    oaddr.sin_family = h->h_addrtype;
    oaddr.sin_port = htons(oport);
    memcpy(&oaddr.sin_addr, h->h_addr, h->h_length);
    if( connect(osock, &oaddr, sizeof(oaddr)) )
    {
        fprintf(cfile, "500 connect: %s\n", strerror(errno));
        goto quit1;
    }

    while( 1 )
    {
        FD_ZERO(&fdsr);
        FD_ZERO(&fdse);
        FD_SET(csock,&fdsr);
        FD_SET(csock,&fdse);
        FD_SET(osock,&fdsr);
        FD_SET(osock,&fdse);

        if( select(20, &fdsr, NULL, &fdse, NULL) == -1 )
        {
            fprintf(cfile, "500 select: %s\n", strerror(errno));
            goto quit2;
        }

        if( FD_ISSET(csock,&fdsr) || FD_ISSET(csock,&fdse) )
        {
            if ((nbyt = read(csock,buf,4096)) <= 0)
                goto quit2;
            if ((write(osock,buf,nbyt)) <= 0)
                goto quit2;
        }
        else if( FD_ISSET(osock,&fdsr) || FD_ISSET(osock,&fdse) )
        {
            if ((nbyt = read(osock,buf,4096)) <= 0)
                goto quit2;
            if ((write(csock,buf,nbyt)) <= 0)
                goto quit2;
        }
    }

quit2:
    shutdown(osock,2);
    close(osock);

quit1:
    fflush(cfile);
    shutdown(csock,2);

quit0:
    fclose(cfile);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:47:07.607

使用`AF_INET`而不是`htons(AF_INET)`初始化`sin_family`.

# matlab - 轮廓上的复杂积分

> ID：14860650
> 
> 赞同：1
> 
> 时间：2013-02-13T18:40:48.910
> 
> 标签：matlab, math, wolfram-mathematica, integration

我知道这不完全是一个编程问题，但我一直试图哄着 Matlab 和 Mathematica 为我解决这个问题。这是一个复杂变量类的练习考试的问题。任何帮助，或我可能会找到一些的方向，将不胜感激。

[![不可缺少的](../Images/2806717da49cc8c56dbe404378cff717.png)](https://i.stack.imgur.com/xTZ2B.png)

我尝试了很多不同的东西，但我似乎无法弄清楚...... WolframAlpha 需要很长时间来计算它（即使 Pro 延长了计算时间）。Mathematica 不喜欢它，Matlab 给了我一些令人发指的恶心表达......

数学代码：

```
Integrate[(z^2 + 4)/(z^3 - 5), z, (2 - i), (2 + 2 i)] 
```

Matlab代码：

```
int((z^2 + 4)/(z^3 - 5), z, (2 - i), (2 + 2*i)) 
```

显然，为了简化计算，应该对此进行某种操作，但我只是不确定从哪里开始......我可以说这个积分大于积分`z^2/z^3 = 1/z`然后改变积分变量？不知道大家怎么看？

再说一次，我知道这不完全是编程，但我发现这个网站上的人是最聪明的，我想我可以试一试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:46:52.420

## 手动集成

如果您想手动集成它，我建议您进行[部分分数扩展](http://en.wikipedia.org/wiki/Partial_fraction)，以将分数变成更容易集成的部分。

## 近似积分

考虑 z 的绝对值。

z 从 2-i 变为 2+2i，因此它的绝对值将介于 2（当它位于 2+0i 时）和 sqrt(8)（当它位于 2+2i 时）之间。

这表示：

*   4<=|z^2|<=8
*   绝对值 z^2+4 将始终 <= 12
*   并且 z^3-5 的绝对值将始终 >= 3

结合这两者，我们可以推断出被积函数的绝对值将始终 <= 12/3。

这让我们得出结论，积分的绝对值必须 <= 12（因为线的长度为 3）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:36:01.703

请注意，在复平面上绘制的等高线是从 (2,-1) 到 (2,2) 的垂直线。也就是说，在 Mathematica 中，您可以将积分写为：

```
z = x + I y;
x = 2;
int = Integrate[ ((z^2 + 4)/(z^3 - 5), {y,-1,2}];
N@Abs@int
(* Out[]:= 2.08808 *) 
```

![数学图形](../Images/77674788dde51d55b40c5b3290a74f89.png)

请注意，您需要使用`I`Mathematica 中的虚数。事实上，这个结果小于 12：

```
N@Abs@% <= 12
(* Out[]:= True *) 
```

![数学图形](../Images/7ed9544283def91bd9e6c24d9c351f35.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-22T16:26:52.913

更好地使用 ML 定理（countour 的三角不等式）。积分小于 M，即沿轮廓的 f(z) 的模的最大值乘以路径长度的 L。路径是一条长度为 3 的直线，如在复平面中所见。最大模数是 2 x sqrt(2)（从原点到 2+2i，最小模数是 sqrt(5)，从原点到 2-i。M 很容易通过将分子取大而分母取小来计算） f(z) 的模数最终小于 12（因为 5 x sqrt(5) 大于 8）。因此，无需计算积分即可解决问题。

# asp.net - UnobtrusiveValidationMode 在客户端不起作用？

> ID：14860660
> 
> 赞同：2
> 
> 时间：2013-02-13T18:41:15.880
> 
> 标签：asp.net, webforms, client-side, .net-4.5, unobtrusive-validation

我最近迁移到 VS 2012 和 .NET 4.5，我正在研究这个 UnobtrusiveValidationMode。

我为我的 jquery 文件配置了 Global.asax 设置 ScriptResourceMapping，并在我的 WebConfig 中添加了 ValidationSettings:UnobtrusiveValidationMode，将值设置为“WebForms”。

验证在服务器端有效，但在客户端无效。

这种新方法不在客户端验证？

# c - 如何将两个数字作为字符串相加

> ID：14860661
> 
> 赞同：4
> 
> 时间：2013-02-13T18:41:17.187
> 
> 标签：c, string

我必须在 C 中从标准输入中读取两个数字作为字符串。我怎样才能将它们的总和也打印为字符串？我有：

```
char a[10],b[10];
printf("enter the two numbers");
scanf("%s%s",&a,&b);
char sum[20];
sum=? 
```

给点小费好吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:51:34.107

就像在小学一样

假设输入是“...69 + ...63”

```
9 + 3     = 2 and 1 to go
6 + 6 + 1 = 3 and 1 to go
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T19:44:59.443

除非禁止这样做，否则我将采用以下方法：

*   将输入字符串转换为数字。我会尝试[`strtol()`](http://www.cplusplus.com/reference/cstdlib/strtol/)。

*   添加数字

*   将总和从数字转换为字符串。我会尝试[`snprintf()`](http://www.cplusplus.com/reference/cstdio/snprintf/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T19:03:29.280

就像在纸上做的那样，用编程来做这件事。迈出小步，并在不注意的情况下明确我们在纸上所做的每一个小步骤。

```
 00111
 ---------
     12345
 123456789
 ---------
 123469134 
```

*   注意不同的长度。您需要单独的变量来保存该信息。您需要找出这两个长度 - 要么使用标准函数，要么编写自己的：字符串以二进制结尾`0`。
*   注意我们在添加时是如何倒退的。您必须维护两个索引才能访问两个字符串（字符数组）。
*   请注意我们如何结转加法的高位`5+9=14`。您需要在另一个变量中维护它。

使用循环。添加后，您需要知道总长度，并将其移动到左边缘。因为我们事先不知道我们会得到什么长度，所以您将从`sum`数组的右边缘开始写下答案。想一想，您可以如何以及如何改进这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T18:47:43.500

使用 将字符串转换为数字`atoi`，然后将它们相加，然后使用 printf 之类的打印函数打印总和。看到[这个](http://www.cplusplus.com/reference/cstdlib/atoi/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T19:30:25.493

`chars`是 8 位二进制数，就像更小的`ints`. 我们必须解释它们以赋予它们作为字母的意义。

您的计算机可能使用 ASCII 标准。在 ASCII 中，`char`代表字符的值`0`实际上并没有数值 0。它是 48。幸运的是，数字都是连续的，所以`1`是 49，等等。

```
char zero = '0';
printf("%d\n", zero);
char one = '1';
printf("%d\n", one);

> 48
> 49 
```

（请注意，`%d`格式标志的`printf`意思是“解释为整数”。）

因为`chars`是数字，我们可以用它们做数学运算。

```
char one = '1';
int one_num = one - '0';
printf("%d\n", one_num);

> 1 
```

现在，您可以像在纸上一样使用十进制数字实现加法并携带。

# java - NetBeans 数据库

> ID：14860662
> 
> 赞同：0
> 
> 时间：2013-02-13T18:41:19.700
> 
> 标签：java, sql, database, netbeans

今天在课堂上，我们编写了一个简单的 Java 程序，它通过数据库进行操作、读取、写入并将数据保存在 .txt 文件中。或多或少，我理解了代码。

问题是，为了使用数据库，我们在 NetBeans 中做了一堆我现在不太记得的东西，但是我们导入了 3 个名为 Derby 之类的 .jar 文件。问题是，我这里没有这些东西，也不知道要找什么。我想要的只是扩展程序的功能，以便它可以搜索数据库。谁能指出我正确的方向？我需要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:45:17.767

[Netbeans.org](http://www.netbeans.org)是非常好的 Java 教程来源。你需要的就[在这里](http://netbeans.org/kb/docs/ide/java-db.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:45:32.040

试试这个： http: [//netbeans.org/kb/docs/ide/java-db.html](http://netbeans.org/kb/docs/ide/java-db.html)如果您正在为数据库编写桌面客户端，也许这也有帮助：http: [//netbeans.org/kb/ 70/java/gui-db.html](http://netbeans.org/kb/70/java/gui-db.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-25T10:51:49.717

看起来您正在使用 Apache Derby [http://db.apache.org/derby/](http://db.apache.org/derby/)

jQuery.jar

安装在您的 PC 上的数据库，例如 MySQL。

根据我使用 Netbeans 的经验，您可以使用服务选项卡连接到数据库。然后，您可以使用 jQuery 使用 java 创建与所选数据库的连接、查询和语句。

我希望这能回答你的问题。如果不看[https://netbeans.org/](https://netbeans.org/)。Netbeans 有很多非常有用的教程。

# concrete5 - 无法从 concret5 中的项目访问所有子菜单

> ID：14860663
> 
> 赞同：0
> 
> 时间：2013-02-13T18:41:21.543
> 
> 标签：concrete5

我在一个网站中使用 concret5，我有一个奇怪的问题，我无法从一个项目访问所有子菜单......我改变了所有可能但没有结果，我可以在站点地图上看到页面，并且网址是很好，但是每当我点击它时，我都会直接进入未找到的页面，有什么想法、建议或其他我应该检查的东西吗？

对一些细节感到抱歉，但我无法描述或说更多（该网站是本地托管的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:12:41.083

我唯一的想法（没有更多细节或实时站点）是漂亮的 URL 已启用但不受支持。

即，您的自动导航块（和其他创建链接的块）认为您启用了漂亮的 URL，因此它们提供了 /about-section/contact-us 之类的链接。但是，漂亮的 URL 没有启用，因此除了 /index.php 之外，不会调用具体的 5。

对此的快速测试是在智能搜索栏中禁用漂亮的 URL（键入“pretty”）。如果它开始以 /index.php/about-section/contact-us 的形式生成链接，并且这些链接有效，那么这就是你的问题。然后您可以重新启用，但请务必按​​照它的指示创建 .htaccess 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T22:03:20.060

你到底在说什么子菜单？

如果是区块编辑子菜单，一定要检查区块/区域的权限！要么必须更改单个块的权限，要么可能会为页面类型设置受限区域权限。

我多次遇到同样的问题...

# mstest - Visual Studio 2012 测试运行程序如何应用线程？

> ID：14860665
> 
> 赞同：5
> 
> 时间：2013-02-13T18:41:28.407
> 
> 标签：mstest, visual-studio-test-runner

每个包含测试的类是否在它自己的线程中运行？还是每个单独的测试都在它自己的线程中运行？如果每个包含测试的类都有自己的线程，这些是同时运行的吗？即，A 类的测试会与 B 类的测试同时运行吗？或者 A 类的测试会运行（每个在自己的线程上），然后是 B 类的测试（每个在自己的线程上）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T06:16:41.020

> 每个包含测试的类是否在它自己的线程中运行？

不，所有测试都在同一个线程上运行

> 还是每个单独的测试都在它自己的线程中运行？

不，所有测试都在同一个线程上运行。

> 如果每个包含测试的类都有自己的线程，这些是同时运行的吗？即，A 类的测试会与 B 类的测试同时运行吗？或者 A 类的测试会运行（每个在自己的线程上），然后是 B 类的测试（每个在自己的线程上）？

如果您正在创建线程。您拥有他们的并发模型。vstest 执行器不会同时运行您的。无法保证执行测试的顺序，无论是在给定的测试类中还是不同测试类之间的顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T06:09:43.243

好吧，它似乎根本不应用线程！我构建了一个包含 3 个单元测试的测试项目，只是使用 Nlog 将信息输出到文件中。

我发现有趣的是 TestClass 为每个测试构建一次。我认为每个类只会构建一次。

此外，Class Cleanups 在所有测试结束时运行。我认为每个班级的清理工作都会在该班级的最后一次测试完成后运行。

最后，它们都在同一个线程上运行！现在这是出乎意料的。在当今的多核世界中（我的装备有 4 个），我本来希望在图片中看到更多线程。

每个测试看起来像这样：

```
using System;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using NLog;
using System.Threading;

namespace SeeHowTestsUseThreads
{
    [TestClass]
    public class UnitTest1
    {
        static Logger logger = LogManager.GetCurrentClassLogger();

        public UnitTest1()
        {
            logger.Info("Thread {0}: Constructing UnitTest1", Thread.CurrentThread.ManagedThreadId);
        }

        [ClassInitialize()]
        public static void MyClassInitialize(TestContext testContext) {
            logger.Info("Thread {0}: UnitTest1 Class Initialize", Thread.CurrentThread.ManagedThreadId);
        }
        [ClassCleanup()]
        public static void MyClassCleanup() {
            logger.Info("Thread {0}: UnitTest1 Class Cleanup", Thread.CurrentThread.ManagedThreadId);
        }
        [TestInitialize()]
        public void MyTestInitialize() {
            logger.Info("Thread {0}: UnitTest1 Test Initialize", Thread.CurrentThread.ManagedThreadId);
        }

        [TestCleanup()]
        public void MyTestCleanup() {
            logger.Info("Thread {0}: UnitTest1 Test Cleanup", Thread.CurrentThread.ManagedThreadId);
        }

        [TestMethod]
        public void TestMethod1()
        {
            logger.Info("Thread {0}: UnitTest1 TestMethod1 Run", Thread.CurrentThread.ManagedThreadId);
            Assert.Inconclusive();
        }

        [TestMethod]
        public void TestMethod2()
        {
            logger.Info("Thread {0}: UnitTest1 TestMethod2 Run", Thread.CurrentThread.ManagedThreadId);
            Assert.Inconclusive();
        }
        [TestMethod]
        public void TestMethod3()
        {
            logger.Info("Thread {0}: UnitTest1 TestMethod3 Run", Thread.CurrentThread.ManagedThreadId);
            Assert.Inconclusive();
        }
        [TestMethod]
        public void TestMethod4()
        {
            logger.Info("Thread {0}: UnitTest1 TestMethod4 Run", Thread.CurrentThread.ManagedThreadId);
            Assert.Inconclusive();
        }
        [TestMethod]
        public void TestMethod5()
        {
            logger.Info("Thread {0}: UnitTest1 TestMethod5 Run", Thread.CurrentThread.ManagedThreadId);
            Assert.Inconclusive();
        }
        [TestMethod]
        public void TestMethod6()
        {
            logger.Info("Thread {0}: UnitTest1 TestMethod6 Run", Thread.CurrentThread.ManagedThreadId);
            Assert.Inconclusive();
        }
    }
} 
```

这是输出...

```
2013-02-14 07:59:42.3879 INFO Thread 10: Constructing UnitTest3
2013-02-14 07:59:42.3979 INFO Thread 10: UnitTest3 Class Initialize
2013-02-14 07:59:42.3979 INFO Thread 10: UnitTest3 Test Initialize
2013-02-14 07:59:42.3979 INFO Thread 10: UnitTest3 TestMethod1 Run
2013-02-14 07:59:42.3979 INFO Thread 10: UnitTest3 Test Cleanup
2013-02-14 07:59:42.4220 INFO Thread 10: Constructing UnitTest3
2013-02-14 07:59:42.4220 INFO Thread 10: UnitTest3 Test Initialize
2013-02-14 07:59:42.4220 INFO Thread 10: UnitTest3 TestMethod2 Run
2013-02-14 07:59:42.4220 INFO Thread 10: UnitTest3 Test Cleanup
2013-02-14 07:59:42.4220 INFO Thread 10: Constructing UnitTest3
2013-02-14 07:59:42.4220 INFO Thread 10: UnitTest3 Test Initialize
2013-02-14 07:59:42.4220 INFO Thread 10: UnitTest3 TestMethod3 Run
2013-02-14 07:59:42.4220 INFO Thread 10: UnitTest3 Test Cleanup
2013-02-14 07:59:42.4220 INFO Thread 10: Constructing UnitTest3
2013-02-14 07:59:42.4220 INFO Thread 10: UnitTest3 Test Initialize
2013-02-14 07:59:42.4220 INFO Thread 10: UnitTest3 TestMethod4 Run
2013-02-14 07:59:42.4220 INFO Thread 10: UnitTest3 Test Cleanup
2013-02-14 07:59:42.4220 INFO Thread 10: Constructing UnitTest3
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest3 Test Initialize
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest3 TestMethod5 Run
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest3 Test Cleanup
2013-02-14 07:59:42.4290 INFO Thread 10: Constructing UnitTest3
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest3 Test Initialize
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest3 TestMethod6 Run
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest3 Test Cleanup
2013-02-14 07:59:42.4290 INFO Thread 10: Constructing UnitTest1
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 Class Initialize
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 Test Initialize
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 TestMethod1 Run
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 Test Cleanup
2013-02-14 07:59:42.4290 INFO Thread 10: Constructing UnitTest1
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 Test Initialize
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 TestMethod2 Run
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 Test Cleanup
2013-02-14 07:59:42.4290 INFO Thread 10: Constructing UnitTest1
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 Test Initialize
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 TestMethod3 Run
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 Test Cleanup
2013-02-14 07:59:42.4290 INFO Thread 10: Constructing UnitTest1
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 Test Initialize
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 TestMethod4 Run
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 Test Cleanup
2013-02-14 07:59:42.4290 INFO Thread 10: Constructing UnitTest1
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 Test Initialize
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 TestMethod5 Run
2013-02-14 07:59:42.4290 INFO Thread 10: UnitTest1 Test Cleanup
2013-02-14 07:59:42.4440 INFO Thread 10: Constructing UnitTest1
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest1 Test Initialize
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest1 TestMethod6 Run
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest1 Test Cleanup
2013-02-14 07:59:42.4440 INFO Thread 10: Constructing UnitTest2
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 Class Initialize
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 Test Initialize
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 TestMethod1 Run
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 Test Cleanup
2013-02-14 07:59:42.4440 INFO Thread 10: Constructing UnitTest2
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 Test Initialize
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 TestMethod2 Run
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 Test Cleanup
2013-02-14 07:59:42.4440 INFO Thread 10: Constructing UnitTest2
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 Test Initialize
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 TestMethod3 Run
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 Test Cleanup
2013-02-14 07:59:42.4440 INFO Thread 10: Constructing UnitTest2
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 Test Initialize
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 TestMethod4 Run
2013-02-14 07:59:42.4440 INFO Thread 10: UnitTest2 Test Cleanup
2013-02-14 07:59:42.4600 INFO Thread 10: Constructing UnitTest2
2013-02-14 07:59:42.4600 INFO Thread 10: UnitTest2 Test Initialize
2013-02-14 07:59:42.4600 INFO Thread 10: UnitTest2 TestMethod5 Run
2013-02-14 07:59:42.4600 INFO Thread 10: UnitTest2 Test Cleanup
2013-02-14 07:59:42.4600 INFO Thread 10: Constructing UnitTest2
2013-02-14 07:59:42.4600 INFO Thread 10: UnitTest2 Test Initialize
2013-02-14 07:59:42.4600 INFO Thread 10: UnitTest2 TestMethod6 Run
2013-02-14 07:59:42.4600 INFO Thread 10: UnitTest2 Test Cleanup
2013-02-14 07:59:42.4600 INFO Thread 10: UnitTest3 Class Cleanup
2013-02-14 07:59:42.4600 INFO Thread 10: UnitTest1 Class Cleanup
2013-02-14 07:59:42.4600 INFO Thread 10: UnitTest2 Class Cleanup 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T09:42:48.723

另请注意，如果您的单元测试是线程安全的，您可以选择应用线程并让测试并行执行。[请参阅Microsoft 的](http://blogs.msdn.com/b/vstsqualitytools/archive/2009/12/01/executing-unit-tests-in-parallel-on-a-multi-cpu-core-machine.aspx)这篇博文。

# django - pdf.js 和 django

> ID：14860667
> 
> 赞同：0
> 
> 时间：2013-02-13T18:41:36.003
> 
> 标签：django, pdf.js

pdf.js 使用网络工作者：

```
<script type="text/javascript">
    // Specify the main script used to create a new PDF.JS web worker.
    // In production, change this to point to the combined `pdf.js` file.
    PDFJS.workerSrc = '../../src/worker_loader.js';
</script> 
```

但据我了解，网络工作者无法访问 javascript 文件来自的 url 之外的任何内容：

[我可以从绝对 URL 加载 Web Worker 脚本吗？](https://stackoverflow.com/questions/1549614/can-i-load-a-web-worker-script-from-an-absolute-url)

我在 AWS EC2 上托管我的网站，但从 AWS S3 提供我的静态文件。

因此，在尝试运行与此行等效时出现错误： PDFJS.workerSrc = '../../src/worker_loader.js'; .js 无法加载。

我是否正确理解了这个问题，如果是，我有什么选择来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T07:39:20.307

There appear to be two possible methods. Either turn off the workers:

From a pdf.js [example](https://stackoverflow.com/users/1765767/async5):

```
// Disable workers to avoid yet another cross-origin issue (workers
// need the URL of // the script to be loaded, and currently do not allow
// cross-origin scripts)
// PDFJS.disableWorker = true; 
```

or as suggested by [async5](https://stackoverflow.com/users/1765767/async5) it is relatively easy to serve pdf.js on the same Apache VirtualHost as Django, with some files served by URLs as static media, and others using the mod_wsgi interface to Django. The documentation [here](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#serving-files) is relatively easy to follow for the apache deployment. For local development the following [snippet](https://docs.djangoproject.com/en/dev/howto/static-files/) added to urls.py is easy to adapt to serve up pdf.js:

```
from django.conf import settings

# ... the rest of your URLconf goes here ...

if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
        }),
   ) 
```

with MEDIA_URL and MEDIA_ROOT set appropriately in settings.py

Both will have performance implications.

# ruby-on-rails - Rails 3 Mobiscroll 宝石

> ID：14860670
> 
> 赞同：0
> 
> 时间：2013-02-13T18:41:47.870
> 
> 标签：ruby-on-rails, ruby, mobiscroll

我在 Heroku 上运行 Rails 应用程序并尝试导入[mobiscroll-rails](https://github.com/Dinuz/mobiscroll-rails) gem。gem 在 heroku 上运行良好，但是，每当我尝试在本地机器上运行任何 rails/rake 命令时，都会出现以下错误：

找不到文件“mobiscroll.list”（在 C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mobiscroll-rails-2.3.1/vendor/assets/javascripts/mobiscroll.js :11)

我正在运行 Windows 7、Ruby 1.9.3、Rails 3.2.9。

有人对该怎么做有任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:33:43.767

查看[https://github.com/Dinuz/mobiscroll-rails/commit/972c89db2dcfa85fef144ddb9bd0e036d0209414](https://github.com/Dinuz/mobiscroll-rails/commit/972c89db2dcfa85fef144ddb9bd0e036d0209414)

看起来您使用的是旧版本的 gem。要解决此问题，只需按照该提交的操作 - 将 'vendor/assets/javascripts/mobilscroll.list.js' 重命名为 'vendor/assets/javascripts/mobiscroll.list.js'

# ubuntu - OpenDDS IDL 编译器编译器问题

> ID：14860680
> 
> 赞同：1
> 
> 时间：2013-02-13T18:42:43.120
> 
> 标签：ubuntu, idl, ace, tao, data-distribution-service

我有点卡住了试图编译一个简单的 IDL 文件。

```
root@ricardo:/home/ricardo/Desktop/librerias/dds/DDS/bin# ldd opendds_idl 
linux-gate.so.1 =>  (0xb771e000)
**libTAO_IDL_FE.so.5.6a_p14 => not found
libACE.so.5.6a_p14 => not found**
libpthread.so.0 => /lib/i386-linux-gnu/libpthread.so.0 (0xb76e3000)
libstdc++.so.6 => /usr/lib/i386-linux-gnu/libstdc++.so.6 (0xb75fa000)
libgcc_s.so.1 => /lib/i386-linux-gnu/libgcc_s.so.1 (0xb75dc000)
libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0xb7432000)
/lib/ld-linux.so.2 (0xb771f000)
libm.so.6 => /lib/i386-linux-gnu/libm.so.6 (0xb7406000) 
```

如您所见，编译器没有找到 LibTao 和 LibAce，但它是在 PATH 中设置的：

> echo PATH=/home/ricardo/Desktop/librerias/dds/ACE_wrappers/ace:$PATH PATH=/home/ricardo/Desktop/librerias/dds/ACE_wrappers/ace:/usr/local/sbin:/usr/local/bin :/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games 并且环境变量设置为：

```
root@ricardo:/home/ricardo/Desktop/librerias/dds/DDS/bin# echo $DDS_ROOT 
```

/home/ricardo/桌面/librerias/dds

谁能看到有什么问题？，我错过了一步吗？ai 还需要哪些其他环境变量才能编译 *.idl 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:04:55.067

[已解决] 我只需要添加以下几行：

```
 export LD_LIBRARY_PATH=/home/ricardo/Desktop/librerias/dds/ACE_wrappers/ace:$LD_LIBRARY_PATH 
```

添加 ACE ; 然后是 TAO Libs：

```
 export LD_LIBRARY_PATH=/home/ricardo/Desktop/librerias/dds/ACE_wrappers/TAO/TAO_IDL:$LD_LIBRARY_PATH 
```

设置 ACE_ROOT 和 TAO_ROOT 环境变量也使用导出并指向具有共享库的目录。

# asp.net-web-api - 如何将 WCF 服务安全绑定转换为 WebAPI？

> ID：14860681
> 
> 赞同：1
> 
> 时间：2013-02-13T18:42:47.643
> 
> 标签：asp.net-web-api

我正在将现有的 WCF Web 服务转换为 WebAPI 服务。但是我是 WebAPI 的新手，并且对如何实现在 WebAPI 的 WCF 安全绑定中声明的相同安全性感到困惑。

在 WCF Web 服务中，服务的安全绑定在 web.config 文件中定义。在研究如何在 WebAPI 中实现类似的安全性时，我遇到了一些似乎使用 WCF 模型的文章，例如[Wcf WebApi configuration equivalent to code](https://stackoverflow.com/questions/12819705/wcf-webapi-configuration-equivalent-to-code)。但这似乎是不推荐使用的功能，它不是最终版本的一部分。当前版本中不存在类和方法（我可以找到）。

我看过的大多数其他文章/书籍都没有提到任何显式的、可配置的安全绑定——而是依赖主机配置、消息处理程序、身份验证属性或操作过滤器来处理身份验证和授权安全检查。（例如 ：[1、2、3](http://www.asp.net/web-api/overview/security/authentication-and-authorization/authentication-and-authorization-in-aspnet-web-api)）[_](http://ofps.oreilly.com/titles/9781449337711/ch_security.html) [_](http://www.piotrwalat.net/client-certificate-authentication-in-asp-net-web-api-and-windows-store-apps/)

我很乐意实现依赖主机、消息处理程序等的安全性，但不知道我是否完全遗漏了一些东西。如果有更好的方法可以通过配置或其他方式进行设置，我不想在消息处理等过程中对安全性进行黑客攻击。

我应该依靠主机、消息处理程序、身份验证属性等来实现 WebAPI 中的安全性，还是有更合适的方法来做到这一点？如果是这样，怎么办？

# jquery - 使用简单 jQuery 循环的幻灯片之间的延迟

> ID：14860682
> 
> 赞同：1
> 
> 时间：2013-02-13T18:42:47.733
> 
> 标签：jquery, slideshow, fade

我正在尝试设置一个从一张图像淡入到下一张图像的幻灯片，每张幻灯片大约停顿 3 秒。我无法让它在每个元素上暂停，尽管延迟可以暂停第一张图像。

**有没有办法在下面的代码中添加一个元素，以便在淡入淡出效果开始之前可以更长时间地查看每个图像？**

这是我第一次使用 jQuery，所以越简单越好。谢谢！

```
<div class="slideshow">
    <img src="images/baby-slide.png"/>
    <img src="images/characters-slide.png"/>  
    <img src="images/engagement-slide.png" />
    <img src="images/holidays-slide.png"/>
    <img src="images/sports-slide.png"/> 
</div>

<script type="text/javascript">
    $(document).ready(function() {
        $('.slideshow').cycle({
            fx: 'fade',
            speed:  2000, 
            delay: 2000,
            continuous:1, 
            timeout:0, 
            easeIn: 'linear', 
            easeOut: 'linear', 
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:53:00.683

尝试设置`continuous:0`和`timeout:3000`。

从[文档中](http://jquery.malsup.com/cycle/options.html)：

> Continuous: true 在当前转换完成后立即开始下一个转换
> 
> 超时：幻灯片转换之间的毫秒数（0 禁用自动前进）

# opencv - OpenCV-2.4.3中使用CMake编译

> ID：14860683
> 
> 赞同：0
> 
> 时间：2013-02-13T18:43:01.257
> 
> 标签：opencv, cmake

嗨，我编写了一个基本程序来打开图像文件。我正在尝试使用 CMake 来编译它。这就是我的 CMake 文件的样子：

```
 cmake_minimum_required(VERSION 2.6)
         project( textures )
         find_package( OpenCV REQUIRED )
         add_executable( textures textures.cpp )
         target_link_libraries( textures ${OpenCV_LIBS} ) 
```

当我运行“cmake .”时，出现以下错误。

```
 CMake Error at CMakeLists.txt:3 (find_package):
         By not providing "FindOpenCV.cmake" in CMAKE_MODULE_PATH this project has
         asked CMake to find a package configuration file provided by "OpenCV", but
         CMake did not find one.

         Could not find a package configuration file provided by "OpenCV" with any
         of the following names:

         OpenCVConfig.cmake
         opencv-config.cmake

         Add the installation prefix of "OpenCV" to CMAKE_PREFIX_PATH or set
         "OpenCV_DIR" to a directory containing one of the above files.  If "OpenCV"
         provides a separate development package or SDK, be sure it has been
         installed.

         -- Configuring incomplete, errors occurred! 
```

关于这意味着什么以及如何解决它的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:04:54.740

CMake 正在寻找文件 FindOpenCV.cmake，因此请确保您拥有该文件（您可以在线搜索其他人的实现）。然后将此文件放在正确的目录中，并在 CMakeLists.txt 文件中的项目行之后添加此命令”

```
 set(CMAKE_MODULE_PATH "${CMAKE_SOURCE_DIR}/relative/path/to/your/file/") 
```

其中 CMAKE_SOURCE_DIR 是您的源代码所在的位置。

# boost - MPIrun 用简单的代码崩溃

> ID：14860691
> 
> 赞同：1
> 
> 时间：2013-02-13T18:43:15.783
> 
> 标签：boost, mpi, openmpi, boost-mpi

我正在尝试生成使用 MPI 的代码，其行为与具有依赖关系的程序大致相似。如果我使用多个处理器（例如 mpirun -np X），其中 X 大于我尝试建模的任务数（例如我的 switch 语句中的案例数），一切都会正常工作。我的程序模型有一个任务列表，每个任务的执行时间，以及一组任务之间的依赖关系。我生成的 MPI 代码看起来像这样（一个真实的案例会有 50 到 600 个任务，例如案例）：

```
int main(int argc, char* argv[]) {
  mpi::environment env(argc, argv);
  mpi::communicator world;
  long execution_times [4] = {9, 4, 3, 6};

  switch (world.rank()) {
    case 1: {
      std::cout << "1: Awake" << std::endl;
      mpi::request req[1];
      req[0] = world.irecv(0, 0);
      mpi::wait_all(req, req + 1);
      std::cout << "1: Recv notice from pred 0" << std::endl;
      time_t start;
      start = time(NULL);
      std::cout << "1: Started compute" << std::endl;
      while ((time(NULL)-start) < execution_times[1]);
      std::cout << "1: Finished compute in " << (time(NULL)-start) << std::endl;
      mpi::request sreq[3];
      sreq[0] = world.isend(5, 0);
      sreq[1] = world.isend(23, 0);
      sreq[2] = world.isend(42, 0);
      mpi::wait_all(sreq, sreq + 3);
      std::cout << "1: Sent notice to succ 5" << std::endl;
      std::cout << "1: Sent notice to succ 23" << std::endl;
      std::cout << "1: Sent notice to succ 42" << std::endl;
      break; }
    // Other cases excluded for brevity...
   }
   return 0;
} 
```

我可以很好地编译`g++ -L/usr/local/lib -lmpi -lmpi_cxx -lboost_serialization -lboost_mpi test.cpp`它并使用它运行它`mpirun -np 4 a.out`

但是，当遇到超出处理器数量的情况时，我总是会遇到异常，例如

```
hamiltont$ mpirun -np 2 a.out 
0: Awake
0: Started compute
0: Finished compute in 0
1: Awake
1: Recv notice from pred 0
1: Started compute
libc++abi.dylib: terminate called throwing an exception
hamiltont$ mpirun -np 3 a.out 
0: Awake
0: Started compute
0: Finished compute in 0
1: Awake
1: Recv notice from pred 0
1: Started compute
2: Awake
2: Recv notice from pred 0
2: Started compute
libc++abi.dylib: terminate called throwing an exception 
```

请注意，将处理器数量从 2 个增加到 3 个可以让我成功执行一个案例。我在想我对 MPI 有一些不理解的地方

整个例外：

```
libc++abi.dylib: terminate called throwing an exception
[MacBook-Pro:47495] *** Process received signal ***
[MacBook-Pro:47495] Signal: Abort trap: 6 (6)
[MacBook-Pro:47495] Signal code:  (0)
[MacBook-Pro:47495] [ 0] 2   libsystem_c.dylib                   0x00007fff91e9b8ea _sigtramp + 26
[MacBook-Pro:47495] [ 1] 3   ???                                 0x0000000000000000 0x0 + 0
[MacBook-Pro:47495] [ 2] 4   libc++abi.dylib                     0x00007fff8f29ca17 abort_message + 257
[MacBook-Pro:47495] [ 3] 5   libc++abi.dylib                     0x00007fff8f29a3c6 _ZL17default_terminatev + 28
[MacBook-Pro:47495] [ 4] 6   libobjc.A.dylib                     0x00007fff94857887 _ZL15_objc_terminatev + 111
[MacBook-Pro:47495] [ 5] 7   libc++abi.dylib                     0x00007fff8f29a3f5 _ZL19safe_handler_callerPFvvE + 8
[MacBook-Pro:47495] [ 6] 8   libc++abi.dylib                     0x00007fff8f29a450 __cxa_bad_typeid + 0
[MacBook-Pro:47495] [ 7] 9   libc++abi.dylib                     0x00007fff8f29b5b7 _ZL23__gxx_exception_cleanup19_Unwind_Reason_CodeP17_Unwind_Exception + 0
[MacBook-Pro:47495] [ 8] 10  a.out                               0x00000001086a818e _ZN5boost15throw_exceptionINS_3mpi9exceptionEEEvRKT_ + 158
[MacBook-Pro:47495] [ 9] 11  libboost_mpi.dylib                  0x0000000108a061e7 _ZNK5boost3mpi12communicator5isendEii + 111
[MacBook-Pro:47495] [10] 12  a.out                               0x0000000108676fc9 main + 1257
[MacBook-Pro:47495] [11] 13  libdyld.dylib                       0x00007fff911837e1 start + 0
[MacBook-Pro:47495] [12] 14  ???                                 0x0000000000000001 0x0 + 1
[MacBook-Pro:47495] *** End of error message ***
--------------------------------------------------------------------------
mpirun noticed that process rank 0 with PID 47495 on node MacBook-Pro.local exited on signal 6 (Abort trap: 6). 
```

# php - 带有 Jquery 自动完成功能的多个标签

> ID：14860692
> 
> 赞同：3
> 
> 时间：2013-02-13T18:43:17.110
> 
> 标签：php, jquery, ajax, jquery-ui, autocomplete

我正在尝试使用 Jquery UI 在我的项目上实现自动完成功能，但是我想进行一些小的修改。

动态调用的 PHP 是：

```
<?php 
include "../../connections/connect.inc.php";

$return_arr = array();

$search_term = "%".$_GET['term']."%";
$moviesquery = "SELECT * FROM movie where movie_name like :term";
$movieresults = $dbconnection->prepare($artistsquery);
$movieresults->bindValue(":term",$search_term);
$movieresults->execute();

/* Retrieve and store in array the results of the query.*/
while ($row = $movieresults->fetch(PDO::FETCH_ASSOC)) {

$return_arr[] = array('label'=>$row['movie_name'],'value'=>$row['movie_name']); //build an array
//array_push($return_arr,$row_array);
}

/* Toss back results as json encoded array. */
echo json_encode($return_arr); 
```

这是我在 JQuery 调用中写的：

```
$(function() {
    $("#movie_name").autocomplete({
       source: "sendmovies.php",
       minLength: 3
    })
}); 
```

问题是，我想在自动完成建议中查看有关每部电影的更多信息。目前，自动完成功能有效，仅显示电影名称。我希望它在名称下方显示国家和发布年份。当用户单击它时，我希望自动完成仅采用电影名称的值。并且可能还将电影 ID 放入隐藏字段。我是一个 Jquery noobie，所以如果有人可以帮助我，我会很高兴。

谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:58:30.620

对于这部分：

> 并且可能还将电影 ID 放入隐藏字段。我是一个 Jquery noobie，所以如果有人可以帮助我，我会很高兴。

jQuery：

```
$( "#movie_name" ).autocomplete({
    select: function(event, ui){
      if(ui.item.value == ""){
        return false;
      }else{
        //here start your logic (its executed when you select the result
        $('input.hidden').val(ui.item.id);
        $('input[name=any]').val(ui.item.val);
      }
    }
}); 
```

你需要添加：

```
/* Retrieve and store in array the results of the query.*/
while ($row = $movieresults->fetch(PDO::FETCH_ASSOC)) {

$return_arr[] = array(
    'label'=>$row['movie_name'], 
    'value'=>$row['movie_name'], 'id' => $row['id'], 
    'anyother_ui_name' => $row['value']); //build an array
//array_push($return_arr,$row_array);
} 
```

# php - 根据变量显示数组中的图像

> ID：14860694
> 
> 赞同：0
> 
> 时间：2013-02-13T18:43:28.683
> 
> 标签：php, arrays, list, country

根据用户所在的国家/地区，我想加载存储在数组中的国家/地区的标志图像。目前我只知道 switch 方法，如下所示：

```
$countryFlags = array("afghanistan.png", "albania.png", "algeria.png", "andorra.png" ... );

// gets the user country from DB
$userCountry = $country['Country'];

switch($userCountry) {
    case "Australia":
        echo /* the image name from countryFlags array */ ; break;
    case "America":
        echo /* the image name from countryFlags array */ ; break;
    default:
        echo("Unknown");
} 
```

..但是写条件需要一段时间，我相信一定有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:47:07.747

假设您可以控制命名为什么不简单：

```
$userCountry = $country['Country'];

echo strtolower($userCountry) . ".png"; 
```

在命令行中给它“美国”将提供`america.png`回报。

如果您不能这样做，请按如下方式构造您的数组：

```
$countryFlags = array(
  "America" => "america.png",
  "Afganistan" => "afganistan.png",
  ...etc...
);

echo $countryFlags[$userCountry]; 
```

**编辑：：**

以上两种的混合搭配

```
//Define list of countries that aren't a direct translation
$countryFlags = array(
  "Canada" => "cdn_flag.png",
  "Mexico" => "mexico.jpg",
);

if ( !in_array($userCountry,$countryFlags) ) {
  echo strtolower($userCountry) . ".png";
} else {
   echo $countryFlags[$userCountry];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:48:47.450

创建一个以国家代码为键、图像 URL 为值的数组：

```
$countryFlags = array();
$countryFlags['za'] = images/za.png;
$countryFlags['us'] = images/us.png;
// etc...

echo $countryFlags[$userCountryCode]; 
```

# c# - 在 WinForm 中显示 UserControl

> ID：14860708
> 
> 赞同：0
> 
> 时间：2013-02-13T18:44:26.983
> 
> 标签：c#

我正在开发一个继承自 Form 类的类库，然后在 Gui 应用程序中显示此表单。现在我需要将类库更改为`UserControl`.

**如何在另一个项目的表单中显示它？** 提前感谢您的建议。

IFaceForm 是 InterfaceLibrary 内部的用户控件。

```
using InterfaceLibrary;

namespace MxlInterface
{  
    public partial class IFaceConn : Form
    { 
        iFaceForm Interface = new iFaceForm();

        //size of the parent form is 881,514
        //use these variables to change the position of the "Interface Form"
        int xlocation = 0;
        int ylocation = 0;

        public IFaceConn()
        {
            InitializeComponent();

            //Interface.StartPosition = FormStartPosition.Manual;
            Interface.Location = new Point(xlocation, ylocation);
            //Interface.MdiParent = this;

            Interface.Show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:04:27.217

您可以通过执行以下操作直接将其添加到表单中：

```
MyUserControl myControl = new MyUserControl();
Controls.Add(myControl); 
```

`Panel`在表单上放置一个可以作为用户控件占位符的a 也很有用，然后将用户控件添加到该面板：

```
MyUserControl myControl = new MyUserControl();
myControlWrapperPannel.Controls.Add(myControl; 
```

# django - Jinja - 加载自定义模板标签集

> ID：14860714
> 
> 赞同：3
> 
> 时间：2013-02-13T18:44:59.233
> 
> 标签：django, django-templates, jinja2

有没有办法加载自定义标签集 - 甚至是单个自定义标签？

在 django 模板中，我能够做到这一点：

```
{% load custom_tag_set %} 
```

有没有办法在 jinja 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T02:47:38.500

存在相同的机制，但名称不同。

它被称为[扩展](http://jinja.pocoo.org/docs/extensions/#module-jinja2.ext)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T23:07:31.290

从 Django 1.8 开始，Jinja2 是作为模板后端的内置选项。在 Django 文档中，他们描述了如何模拟一些 Django 的原生模板引擎的上下文处理器、过滤器和标签：

[https://docs.djangoproject.com/en/1.8/topics/templates/#django.template.backends.jinja2.Jinja2](https://docs.djangoproject.com/en/1.8/topics/templates/#django.template.backends.jinja2.Jinja2)

还有一个带有 Jinja2 扩展的项目，它模拟了来自 Django 的一些模板标签。它们的工作方式与 Django 的模板标签相同，但本质上不像 Jinja2-onic：

[https://github.com/MoritzS/jinja2-django-tags](https://github.com/MoritzS/jinja2-django-tags)

# r - 如何一次获取netCDF文件中变量的多个属性？

> ID：14860715
> 
> 赞同：1
> 
> 时间：2013-02-13T18:45:06.253
> 
> 标签：r, netcdf

我正在检查 R 中的一批 netCDF 文件的元数据。由于 SO 似乎不允许文件上传，我在下面附上了一个简化示例 netCDF 文件的标题：

```
netcdf no2 {
dimensions:
    lon = 360 ;
    lat = 179 ;
    time = UNLIMITED ; // (10 currently)
variables:
    double lon(lon) ;
        lon:units = "degsE" ;
    double lat(lat) ;
        lat:units = "degsN" ;
    int time(time) ;
        time:units = "days since 1900-01-01" ;
    float no2(time, lat, lon) ;
        no2:units = "ug/m3" ;
        no2:missing_value = 1.e+30f ;
        no2:long_name = "nitrogen dioxide" ;
        no2:standard_name = "no2" ;
} 
```

基本上，我试图将变量的几个属性，例如，“no2”的“standard_name”、“long_name”和“units”，一次放入一个向量中。但是，`att.get.ncdf()`在 Package 中`ncdf`似乎一次只允许一个。由于通过重复代码获得更多属性可能相当乏味和费力，我认为必须有一种更简洁的方法来做到这一点，但我只是没能在谷歌上找到它。有人可以和我分享他们的经验吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:19:53.343

`ncdf`似乎没有提供获取变量所有属性的方法。但是，如果您知道属性，则可以使用循环或`sapply`.

例如：

```
filename <- "no2"
nc <- open.ncdf( filename )
var <- "no"
attrs <- c('standard_name','long_name','units','missing_value')
sapply(attrs,function(x)
   att.get.ncdf( nc, var, x)$value)
close.ncdf(nc)

standard_name          long_name              units      missing_value 
         "no2" "nitrogen dioxide"            "ug/m3"             "1200" 
```

# c# - 是否可以在 Windows 上使用 .NET 完全接管多个屏幕中的一个屏幕？

> ID：14860723
> 
> 赞同：12
> 
> 时间：2013-02-13T18:45:34.033
> 
> 标签：c#, .net, directx

使用在 Windows XP/Vista/7/8 上运行的 .NET（任何版本） - 是否可以为全屏应用程序保留一个屏幕并在其上显示数据/图形/任何内容，同时为 Windows UI 用户保留任何其他屏幕可用交互，例如桌面或其他应用程序？

这里的使用场景/规则如下：

1.  PC 必须能够按原样运行所有程序。

2.  .NET 内容不需要交互（即没有按键、鼠标点击等）。

3.  其他应用程序的任何其他 UI 或对话框都不能穿透为显示 .NET 可执行文件的输出而保留的一个预定义屏幕。

4.  具有 .NET 内容的预定义屏幕不得有可见的鼠标光标，并且其他屏幕必须有其光标边界，就好像根本没有额外的屏幕一样（即光标必须停在一个或多个桌面的边缘）。

5.  即使 PC 已锁定（即用户已登录但工作站已从资源管理器锁定），内容也必须可见。

我知道我可以使用一些驱动辅助显示器或其他显示设备的外部 USB 控制器来实现这一点，然后手动构建要推送到此界面的内容/图形，但我问我可以使用普通的 WDDM 驱动程序来做到这一点/普通显示器？

**编辑**：进一步澄清 - 我知道有多种方法可以达到类似的结果，但这里的问题是可以符合上述**所有**规范/规则。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T10:53:59.557

在我看来，您正在设计一个纯粹用于输出（即显示图形/图表、视频等）的 .NET 应用程序。应用程序必须有一个专用的监视器，并且没有其他应用程序（甚至光标应该能够进入监视器的边界）。

我的直觉是，虽然您可以强制您的应用程序到特定的监视器（XBMC 具有此功能），但我怀疑您是否可以阻止所有其他应用程序进入监视器的显示区域。

当我读到这个问题时，我脑子里有些东西点击了，我想“也许你想要类似于 cpu 亲和力的东西，你可以在 Windows 中设置它，并强制你的应用程序只使用特定的 cpu 核心......也许有类似的东西监视器/显示区域？”

果然，Windows提供了这些功能：

[http://msdn.microsoft.com/en-gb/library/windows/desktop/dd375340(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd375340(v=vs.85).aspx)

[http://msdn.microsoft.com/en-gb/library/windows/desktop/dd375338(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd375338(v=vs.85).aspx)

您应该能够轻松地调用这些。但是，这只会解决您只能强制您的应用程序使用特定监视器的问题。至于系统中的所有其他应用程序，我怀疑您能否轻松控制它们的显示亲和力。

粗略猜测，您需要使用另一个 Win32 API 调用来获取对系统中所有窗口句柄的引用，并检查它们的显示关联性，如果它们显示在您的专用监视器中，请将它们移动到其他位置。

这可能有助于获取所有窗口句柄：

[如何获取列表或枚举具有相同类和名称的非托管窗口的所有句柄](https://stackoverflow.com/questions/6237249/how-to-get-list-or-enumerate-all-handles-of-unmanaged-windows-with-same-class-an)

[http://msdn.microsoft.com/en-us/library/ms633497%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms633497%28VS.85%29.aspx)

只是想我会把它扔在那里，它可能没有帮助，但希望这会给你更多的方向。

编辑：我也发现了这个......可能有一些用处

[在 Windows 7 中保留屏幕区域](https://stackoverflow.com/questions/836786/reserve-screen-area-in-windows-7)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T11:56:46.203

> 1.  PC 必须能够按原样运行所有程序。
>     
>     
> 2.  .NET 内容不需要交互（即没有按键、鼠标点击等）。
>     
>     
> 3.  其他应用程序的任何其他 UI 或对话框都不能穿透为显示 .NET 可执行文件的输出而保留的一个预定义屏幕。

实现此目的的一种方法是创建一个停靠窗口 (AppBar)。这将具有与任务栏或桌面坞站（如 Google 桌面等）类似的功能。

这两篇文章可能会有所帮助：
[CodeProject: AppBar using C#](http://www.codeproject.com/Articles/6741/AppBar-using-C)
[CodeProject: Creating an application like Google Desktop in WPF and C#](http://www.codeproject.com/Articles/232972/Creating-an-application-like-Google-Desktop-in-WPF)

解决 #3 的另一种方法是使用 PInvoke（甚至更好的[Managed WinAPI](http://mwinapi.sourceforge.net)）定期扫描您的计算机以查找打开的窗口。如果发现一扇窗户“侵入”，您只需钩住它并将其移开。不是最好的方法，但它仍然有效。

> 4\. 具有 .NET 内容的预定义屏幕不得有可见的鼠标光标，并且其他屏幕必须有其光标边界，就好像根本没有额外的屏幕一样（即光标必须停在一个或多个桌面的边缘）。

将表单的光标属性设置为空光标。这有效地删除了鼠标光标。
阻止光标访问屏幕的那部分是非常棘手的。我最好的选择是使用[Global Mouse Hooks](http://globalmousekeyhook.codeplex.com/ "C# 中的应用程序和全局鼠标和键盘挂钩 .Net 库")来监听光标移动并阻止光标移动到您的窗口占据的区域。这显然会使设置表单的光标属性无用，因为光标永远不会在表单上。

> 5\. 即使 PC 已锁定，内容也必须可见（即用户已登录但工作站已从资源管理器锁定）

除了创建锁屏应用程序之外，我不知道有什么方法可以实现这一点，因为标准的 Windows 行为是关闭除主监视器之外的所有监视器。

**编辑**
您可以使用在锁定屏幕上显示一个窗口`psexec.exe -x`。`PSEXEC`是 SysInternals 套件的一部分，可从[http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)下载。

如果您打算采用这种方式（在锁定屏幕顶部显示表单），您将需要一种方法来确定用户会话何时被锁定，以便调整表单大小并将其移开。否则，您将不得不找到一种从您的应用程序中解锁会话的方法。

您可能还想看看这个问题[如何在 Windows 7 的登录屏幕上显示 UI，以](https://stackoverflow.com/questions/12498019)了解其他实现锁屏应用程序的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T16:52:08.233

我正在处理的 WPF 项目已将所有内容添加到从 System.Windows.Window 继承的“主容器”中，该容器在启动时根据用户偏好设置为所有可用屏幕、窗口或单全面屏。然后，该控件将根据首选项自行设置，如下所示：

```
 private void SpanAllMonitors()
    {
        WindowStyle = WindowStyle.None;
        ResizeMode = ResizeMode.NoResize;
        Width = SystemParameters.VirtualScreenWidth;
        Height = SystemParameters.VirtualScreenHeight;
        Left = SystemParameters.VirtualScreenLeft;
        Top = SystemParameters.VirtualScreenTop;
    }

    private void SingleScreen()
    {
        WindowStyle = WindowStyle.None;
        ResizeMode = ResizeMode.NoResize;
        Width = SystemParameters.PrimaryScreenWidth;
        Height = SystemParameters.PrimaryScreenHeight;
        // this will take over the 'primary' monitor, additional math
        // should allow you to place it on a secondary or other monitor
        Left = 0;
        Top = 0;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:18:07.047

选择符合所有设计规则的方法是……等待它……虚拟化。但是，它不符合仅使用 .NET 可执行文件（入侵 WDDM）的要求。

原始 PC 是具有两个来宾的虚拟化主机。一种用于 .NET 应用程序，另一种用于分配了适当 USB 等的最终用户。这种方法自然有很多警告：

*   没有以任何方式利用 WDDM，并且可能存在性能问题。然而，对于临时办公应用来说，这根本不是问题。
*   除非使用 Hyper-V，否则虚拟化软件始终是第 3 方。
*   Hyper-V 中的 Hyper-V 是不可能的，因此来宾无法进一步虚拟化任何东西（至少没有任何合理的速度，因为它将在没有管理程序的情况下运行）。
*   在某些情况下，任何软件都需要多个许可证。
*   .NET 可执行文件和两个来宾之间的其他应用程序之间没有 IPC 或其他交互。

但是，解决方案本身可以完美运行 - 只要底层主机通电并且不会自行崩溃，用户就无法覆盖或与附加屏幕上显示的内容进行交互。锁定最终用户 PC 对其他访客等没有影响。

# java - Robotium UI 测试和自定义 Sherlock 操作栏

> ID：14860725
> 
> 赞同：0
> 
> 时间：2013-02-13T18:45:46.750
> 
> 标签：java, android, testing, junit, actionbarsherlock

我需要使用 Robotium 库编写一些 UI 测试。

我的应用程序使用 Sherlock 操作栏。它有自己的下拉菜单。我如何按此菜单中的某个按钮？菜单创建动态的，所以我不能通过 id 访问它，这就是为什么这段代码不起作用。

`View filter = solo.getView(R.id.filter_button);'`

`solo.clickOnView(filter);`

通过文本访问，也没有用。

这是我的菜单图片：

![下拉式菜单](../Images/af3e1af32ab35b354411af332b74f20f.png)

如何按此菜单项之一，例如使用星号。

PS 每个菜单项打开另一个片段。

# sql - 可以在 Sybase ASE 中使用具有“TOP 1 列”的相关子查询吗？

> ID：14860728
> 
> 赞同：5
> 
> 时间：2013-02-13T18:46:08.587
> 
> 标签：sql, subquery, sap-ase, correlated-subquery

我尝试在 Sybase ASE 12 上使用[建议的查询](https://stackoverflow.com/questions/14859134/is-there-a-good-way-to-do-this-in-sql/14859539#14859539)，但它抱怨语法错误。

```
SELECT 
    item, 
    ( SELECT TOP 1 tags.tag
      FROM #tags tags
        LEFT JOIN t o
          ON  tags.tag = o.tag
          AND o.item_id = n.item_id 
      WHERE o.tag IS NULL
      ORDER BY tags.tag
    ) 'tag',
    value  
FROM
    t_new n 
```

错误：`Incorrect syntax near the keyword 'top'.`

但是，当我将 ( `TOP 1 tag`... `ORDER BY tag`) 替换为 MAX() 时，相同的查询仍然有效：

```
SELECT 
    item, 
    ( SELECT max(tags.tag)
      FROM #tags tags
        LEFT JOIN t o
          ON  tags.tag = o.tag
          AND o.item_id = n.item_id 
      WHERE o.tag IS NULL
        --  ORDER BY tags.tag
    ) 'tag',
    value  
FROM
    t_new n 
```

*   为什么在 Sybase 的相关子查询中使用 ( `TOP 1 tag`... ) 会出现问题？`ORDER BY tag`

*   对不使用 min()/max() 的原始查询是否有任何修复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T14:31:53.987

> Adaptive Server Enterprise 12.5.3 版支持外部查询选择语句中的 top n 子句，但不支持子查询的选择列表。这与 Microsoft SQL Server 不同。在子查询中对 Adaptive Server 使用 top n 子句的任何尝试都会产生语法错误。

[来自此处](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.doc.ase_docs_12.5.3.newfeatures1253_rev/html/newfeatures1253_rev/newfeatures1253_rev11.htm)的 ASE 12.5.3 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T09:57:09.173

我知道这已经很晚了，但是对于其他人来说，子查询中的 TOP 可以在 sybase 最新版本中使用。

# java - 公历日历自动添加到月份

> ID：14860729
> 
> 赞同：-1
> 
> 时间：2013-02-13T18:46:11.723
> 
> 标签：java

我正在尝试获取客户的进入和退出日期，看看它们是否有效。但是每次我运行程序时都会将随机天数添加到月份中。例如，当我输入 03 后，月份可以是 43。你能告诉我为什么吗？

```
public void makeNewReservation() throws ParseException {

        // Enter informations
        boolean error=true;
        boolean dateOK=false;
        String date_sortiee="";
        String date_entree="";
        Scanner in=new Scanner(System.in);

        while(error){
            //take date of checkin and checkout and verify if they are OK

            System.out.println("Single room selected ? dd/MM/yyyy");
            System.out.println("Date de Entree?");
            in=new Scanner(System.in);

        //  date_entree = in.next();    

            System.out.println("Date de Entree? dd/MM/yyyy");
            date_entree = in.next();
            String[] test = date_entree.split("/");
            int day = Integer.parseInt(test[0]);
            int Month = Integer.parseInt(test[1]);

            int year = Integer.parseInt(test[2]);
            DateFormat format = new SimpleDateFormat("dd/MM/yyyy");
            GregorianCalendar checkin= new GregorianCalendar();
            checkin.set(year, Month, day);

            System.out.println("Date de Sortie? dd/MM/yyyy");
            date_sortiee = in.next();
            String[] test1 = date_sortiee.split("/");
            int day1 = Integer.parseInt(test[0]);
            int Month1 = Integer.parseInt(test[1]);
            int year1 = Integer.parseInt(test[2]);
            DateFormat format1 = new SimpleDateFormat("dd/MM/yyyy");
            GregorianCalendar checkout= new GregorianCalendar();
            //System.out.println(format.format(checkin));
            checkout.set(year1, Month1, day1);

            checkdate(checkin,checkout);

            dateOK= checkdate(checkin, checkout);
            if (dateOK){
                error=false;
            }
            else{
                error=true;
            }
        }

public boolean checkdate(GregorianCalendar in,GregorianCalendar out){
    DateFormat format = new SimpleDateFormat("dd/mm/yyyy");
    GregorianCalendar today = new GregorianCalendar();
    System.out.println(format.format(in.getTime()));
    boolean test=false;
    if(in.before(out)&&in.after(today)|| in.before(out)&& in.equals(today)){
        System.out.println("puck u");
        test= true;

    }
    return test; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:48:16.527

在 checkDate 方法中改变这个

```
DateFormat format = new SimpleDateFormat("dd/mm/yyyy"); 
```

至

```
DateFormat format = new SimpleDateFormat("dd/MM/yyyy"); 
```

如您所知，`MM`is format for **Month**和`mm`is format for **minutes**，因此您会得到适当的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:15:47.170

```
public boolean checkIfDateEntreeisok(Date date_entree, Date date_sortiee) throws ParseException{
    boolean dateOK=false;

    SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");

    Date todaysDate = new Date();
    if((date_entree.after(todaysDate)) || (date_entree.equals(todaysDate))) {
        System.out.println("first step");
        if ((date_entree.before(date_sortiee)) || (date_sortiee.equals(date_entree))) {
            System.out.println("second step");

            dateOK=true;
        }

    }

    else{
        System.out.println("les dates sont trop anciennes , veuillez les ressaisir");
    }
    return  dateOK;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T14:08:11.050

[查看Calendar.set(year, month, date)](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#set%28int,%20int,%20int%29)的javadoc

您正在有效地执行以下操作来解析日期：

```
int day = Integer.parseInt(test[0]);
int month = Integer.parseInt(test[1]);
int year = Integer.parseInt(test[2]);
GregorianCalendar checkin= new GregorianCalendar();
checkin.set(year, month, day); 
```

（月份不应以大写字母开头）

...如果您阅读了 javadoc，那么您会看到基于此方法的月份为零（一月为 0），所以对您来说事情会有点奇怪。例如：

*   2013 年 1 月 1 日 - 2013 年 2 月 1 日
*   2013 年 12 月 31 日 - 2014 年 1 月 31 日（一年只有 12 个月）
*   31/1/2013 - 2013 年 3 月 3 日（2 月只有 28 天）

您可以这样做：

```
checkin.set(year, month-1, day); 
```

或（我的偏好）这个：

```
checkin.setTime(format.parse(date_entree)); 
```

此外，您应该解决@PermGenError 指出的[问题](https://stackoverflow.com/a/14860758/669645)

# mysql - mysql join里面insert into

> ID：14860733
> 
> 赞同：0
> 
> 时间：2013-02-13T18:46:22.080
> 
> 标签：mysql, database, join, insert

我必须做一个 MySQL 查询，我有点被困住了。

我有三个表：`usuarios`、`combis`和`usuario_has_combis`。我做了一些`SELECT`检查用户是否还没有预订运输。到那时还可以。但是我需要查询，如果用户还没有预订交通工具，请预订它，我有这样的事情：

```
$insertaPedido = "INSERT INTO usuarios_has_combis (id_usuarios,id_combis,fecha) VALUES ('$user','$combi','$fecha')"; 
```

问题是这个组合行与`usuarios`表格和`combis`表格都连接。我想知道，在这个查询中在哪里写连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:52:13.280

不知道我是否理解你，但我认为这就是你想要的：

```
INSERT into usuarios_has_combis (id_usuarios,id_combis,fecha)
SELECT id_usuarios, id_combis, '$fecha'
FROM usuarios, combis
WHERE user = '$user'
AND combi = '$combi' 
```

您实际上不应该将变量插入到语句中，您应该使用带有占位符的准备好的语句。这只是显示结构。

# javascript - 使用 jQuery 检测文本框何时更改值

> ID：14860734
> 
> 赞同：0
> 
> 时间：2013-02-13T18:46:26.183
> 
> 标签：javascript, jquery, asp.net-mvc

我的 asp.net mvc 视图上有一个 textarea 和两个按钮保存和取消。我想检查用户是否在 textarea 中输入了某些内容，但没有单击保存并单击取消按钮。或单击保存按钮，然后更改文本，更改后未单击保存并单击取消。在取消点击时我想显示警报，但我如何检查用户在使用 jquery 或 javascript 更改文本后是否没有点击保存（可能在 .change 事件或取消点击中）请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:48:43.063

当用户保存时，您可以有一个隐藏字段设置为某个值，然后只需使用 jquery 或 javascript 检查隐藏字段的值...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:51:32.120

[我会在HTML5 localStorage](http://diveintohtml5.info/storage.html)中使用 onchange 事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:18:50.257

Javascript：

```
<script>
$(function() {
    $("#TextAreaName").change(function() {
        $(this).attr("data-changed", true);
    });

    $("#Save").click(function(event) {
        event.preventDefault();

        if ($("#TextAreaName").attr("data-changed") === "true") {
            //Do your saving here

            //Reset the state
            $("#TextAreaName").attr("data-changed", false);
        }
    });
}); 
```

剃刀标记

```
<body>
<div>
    @using (Html.BeginForm())
    {
        @Html.TextArea("TextAreaName", new{data_changed = false})

        <button id="Save" type="submit">Save</button>
        <button id="cancel" type="button">Cancel</button>
    }
</div> 
```

# testing - Grails 我无法测试脚本是否正常工作 - 退出代码始终为 1

> ID：14860737
> 
> 赞同：0
> 
> 时间：2013-02-13T18:46:43.080
> 
> 标签：testing, grails

我找到了 Peter Ledbrook 关于测试 Grails 脚本的文章 ( [http://www.cacoethes.co.uk/blog/groovyandgrails/testing-your-grails-scripts](http://www.cacoethes.co.uk/blog/groovyandgrails/testing-your-grails-scripts) )。“太好了”，我想，我们开始吧。但我花了很长时间（没有互联网访问）未能让它工作。我正在使用 Grails 2.1.1 和 GGTS 3.1

我试图运行他的 hello-world 脚本。当我将它作为命令调用时它会起作用。但是当我尝试从 test\cli 中的测试类调用它时，退出代码始终为 1。我在测试（和脚本）中添加了一些 println 语句。据我所见，该脚本永远不会被调用（提供的脚本也没有像'war'）。这是我的测试课的开始：

```
class HelloWorldTests extends AbstractCliTestCase {

void testDefault() {
    println "work dir: "+System.getProperty("grails.home") //cli.work.dir")
    println "about to call script"
    execute(['hello-world']) // Pass parameters in the list
    println "called script"

    int exitCode = waitForProcess()
    println "exit code "+exitCode
    println "output: "+super.getOutput()
    if (exitCode != 0) {
        println output
    }
    assertEquals 0, exitCode 
```

println 语句的输出是：

```
work dir: C:\Apps\GGTS310\grails-2.1.1\
about to call script
called script
exit code 1
output: 
```

从我可以通过查看 AbstractCliTestCase 的代码得出的形式来看，“输出”中应该有一些东西，但没有。

感激地收到帮助

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:33:50.430

这与使用 64 位 JVM 有关。当我将 test-app 的运行时配置更改为使用 32 位版本的 jdk 1.7.09 时，我的测试运行了。

参考：

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7196103](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7196103) Java 错误说它已在 09-2012 中修复。但没有迹象表明它在哪个更新中。

[Windows XP 上的 Java 最大内存 关于](https://stackoverflow.com/questions/171205/java-maximum-memory-on-windows-xp/497757#497757) 虚拟内存分配的论述。

[无法在具有大堆大小的 64 位 Windows 7 中运行 64 位 JVM](https://stackoverflow.com/questions/10889081/cannot-run-a-64-bit-jvm-in-64-bit-windows-7-with-a-large-heap-size) 这个人通过将他的页面文件从 2 增加到 4 Gb 解决了这个问题。我试过了，重新启动，但没有区别。

也许现在的答案是让测试应用程序使用 32 位 Java，或者如果我可以强制更新到 1.7.09（如果存在），那么可能会有上述修复。

# sql - 如何获取从 Postgresql 中的子查询返回的结果总数？

> ID：14860739
> 
> 赞同：2
> 
> 时间：2013-02-13T18:46:50.120
> 
> 标签：sql, postgresql

我正在尝试获取从子查询返回的结果总数。这是我的查询：

```
select 
    count(r.reason_id) as num,
    cast (count(r.reason_id) as float) / (select count(*) as total from r) * 100.0 as pct
from (
    select
        case
            when rarreason != 0 then rarreason
            else rejectreason end as reason_id
    from 
        workorderlines 
    where
        (rarreason != 0 or rejectreason != 0)
    ) as r

group by
    r.reason_id 
```

但是，当我尝试执行此操作时，出现此错误：

```
ERROR:  relation "r" does not exist
LINE 3: ...on_id) as float) / (select count(*) as total from r) * 100.0...
                                                             ^

********** Error **********

ERROR: relation "r" does not exist
SQL state: 42P01
Character: 112 
```

我该怎么做呢？我正在使用 Postgresql 9.1。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:50:48.473

尝试：

```
select 
    count(r.reason_id) as num,
    cast (count(r.reason_id) as float) / max(r.count_all) * 100.0 as pct
from (
    select
        case
            when rarreason != 0 then rarreason
            else rejectreason end as reason_id,
        count(*) over () as count_all
    from 
        workorderlines 
    where
        (rarreason != 0 or rejectreason != 0)
    ) as r

group by
    r.reason_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:51:05.387

没有检查您的逻辑，但您可以像这样重新排列它：

```
with r as (
    select
        case
            when rarreason != 0 then rarreason
            else rejectreason end as reason_id
    from 
        workorderlines 
    where
        (rarreason != 0 or rejectreason != 0)
)
select 
    count(r.reason_id) as num,
    cast (count(r.reason_id) as float) / (select count(*) as total from r) * 100.0 as pct
from r
group by r.reason_id 
```

# jquery - 使用 Ajax 删除选择在 Jquery 1.8.3 中不起作用。与 1.4.2 配合良好

> ID：14860742
> 
> 赞同：1
> 
> 时间：2013-02-13T18:46:55.750
> 
> 标签：jquery, html-select, jquery-1.4, jquery-1.8

我在 JQuery 1.4.2 中使用以下内容，它工作正常。但是，如果我使用 Jquery 1.8.3 这将停止工作。

```
$(document).ready(function() {
    $('.time-location').change(function(){
     var from = $('.time-location').val();
     var dataString = "&from=" + from;
         $.ajax({
           type: "GET",
           url: "loadajax.php",
           data: dataString,
           success : function(data){
             $('.world-time').show();
             $('.world-time').html(data);
           }
         });
    });
});    
<div id="time-location-box">
   <div class="world-time" id="world-time" >
      <?php include('loadajax.php');?>
    </div>      
    <div id="time-location-sel-box">
       <select class="time-location" name="time-location" id="time-location">
            <option value="America/New_York">Washington DC,US(EST</option>
        <option value="America/New_York">NewYork, US(EST)</option>
        <option value="America/Chicago">Chicago, US(CST)</option>
        </select>
    </div>
</div> 
```

我还尝试将 success : function 更改为 done : function 因为它似乎已被弃用但没有帮助。

# javascript - Asp.net Re-enable disabled button on Response

> ID：14860750
> 
> 赞同：0
> 
> 时间：2013-02-13T18:47:25.227
> 
> 标签：javascript, asp.net, response

经过一些广泛的搜索，我似乎无法找到解决这个特定问题的方法。

我有一个按钮，它调用一个服务器端方法，该方法使用响应将 Zip 文件发送到浏览器，并使用 Javascript 禁用该按钮以防止多次点击。

这一切都很好。我找不到答案的问题是如何在 Response.Write() 被触发并发送文件后重新启用按钮。

想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:50:52.097

如果页面正在刷新，您能否快速重新启用该按钮：

```
 if (postback)
        Button.enable
    end if 
```

# jquery - 无法使用 jQuery 热键覆盖 Firefox 中的 ctrl+s

> ID：14860759
> 
> 赞同：4
> 
> 时间：2013-02-13T18:48:17.247
> 
> 标签：jquery, jquery-plugins, jquery-hotkeys

我正在使用 jQuery Hotkeys 插件：[http ://code.google.com/p/js-hotkeys/](http://code.google.com/p/js-hotkeys/)

这是我正在使用的代码：

```
$(document).bind('keydown', 'Ctrl+s', function(event) { alert('saving?'); return false; }); 
```

在 Chrome 中它工作正常并且 Ctrl+s 默认功能被覆盖，但在 Firefox 中它会触发警报并且它还尝试保存 html 页面。

我知道必须有办法让它工作，F​​irefox 中的 Wordpress 让你按 ctrl+s 保存。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T19:03:41.683

似乎是 Firefox 中的一个错误，它`alert`破坏了代码的同步性。延迟警报似乎可以解决此问题：

```
$(document).bind('keydown', 'Ctrl+s', function(event) {
  setTimeout(function() {
    alert('saving?');
  }, 0);
  return false;
}); 
```

[**JSbin**](http://jsbin.com/ecubot/6/edit)

* * *

这是一个测试用例来证明我的错误声明。

```
$(document).bind('keydown', 'Ctrl+s', function(event) {
  event.preventDefault();
}); 
```

以上（[bin](http://jsbin.com/ecubot/15/edit)）将很好地阻止保存对话框。现在，如果你在它之前或之后添加一个警报，如果你这样做，保存对话框仍然**会**出现`event.preventDefault()`and `event.stopImmediatePropagation()`or `return false`：

```
$(document).bind('keydown', 'Ctrl+s', function(event) {
  event.preventDefault();
  event.stopImmediatePropagation();
  alert('saving?');
  return false;
}); 
```

[斌](http://jsbin.com/ecubot/16/edit)

`event.preventDefault()`如果没有`alert`s，它本身就足以阻止保存对话框，现在通过警报可以阻止默认操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:05:24.257

这对我有用：

```
<script>
        $(document).bind('keypress', 'Ctrl+s',
            function (event) {
                event.preventDefault();
                alert('saving?');
            });
</script> 
```

# c# - 从给定列中的范围和与之关联的外键的表中选择值

> ID：14860760
> 
> 赞同：-1
> 
> 时间：2013-02-13T18:48:17.433
> 
> 标签：c#, sql, linq, entity-framework, linq-to-sql

这是一张桌子

```
 [MenuID] [int] IDENTITY(1,1) PRIMARY KEY NOT NULL,
    [MenuDate] [datetime] NULL,
    [MenuItem] [nvarchar](100) NULL,
    [ClientId] [int] FOREIGN KEY NULL, 
```

如何使用 SQL 和 LINQ 为给定的客户端 ID 选择日期范围内的所有菜单项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:54:42.560

在 Sql 中它会是这样的：

```
Select * from LunchMenu where MenuDate between '01/12/13' and '02/12/13' and ClientId = @clientid 
```

linq 类似于其中 vClientId 是传入的值等......：

```
var result = from r in context.LunchMenu
where r.Menudate >= "01/02/13" && r.MenuDate <= "02/12/13" && r.ClientID = vClientId
select r; 
```

# css - 为什么链接背景和边框出现在图片后面，而链接出现在前面？

> ID：14860762
> 
> 赞同：0
> 
> 时间：2013-02-13T18:48:34.987
> 
> 标签：css

我在下一页上的“立即给予”和“您如何帮助”链接表现异常。它们应用了背景颜色，但颜色显然出现在图像后面，而链接出现在图像前面。关于如何解决这个问题的想法？

[http://www.craftonhills.edu/Visitors_and_Friends/Giving_to_CHC/hpr](http://www.craftonhills.edu/Visitors_and_Friends/Giving_to_CHC/hpr)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:58:17.820

添加：

```
position: relative; 
```

到中的锚元素`foundation-slideshow-prominent-text` `<span>`，背景颜色将出现..

# c# - 邮件未发送。程序没有响应

> ID：14860764
> 
> 赞同：0
> 
> 时间：2013-02-13T18:48:44.033
> 
> 标签：c#, system.net.mail, system.net

我创建了一个邮件程序，将电子邮件发送到我的帐户。我已经建立了 System.Net、System.Net.Mail。我在一些计算机上工作（我的主要计算机），但是每当我尝试做另一台计算机时，它都不会发送消息。我将它包围在 try、catch 块中，并且设置了异常变量。

代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Net;
using System.Net.Mail;
using System.Threading;
using System.IO;
using System.Windows;
using System.Text;
using System.Collections.Generic;

namespace WindowsFormsApplication3
{
public partial class trinate : Form
{
    public trinate()
    {
        InitializeComponent();
    }

    private void MenuClose_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }

    private void radioButton1_CheckedChanged(object sender, EventArgs e)
    {
        if (textBox1.Enabled == false)
        {
            textBox1.Enabled = true;
        }
        else {
            textBox1.Enabled = false;
            textBox1.Text = "some text";
        }

    }

    private void radioButton2_CheckedChanged(object sender, EventArgs e)
    {
        if (textBox2.Enabled == false)
        {
            textBox2.Enabled = true;
        }
        else
        {
            textBox2.Enabled = false;
            textBox2.Text = "some more text";
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        progressBar1.Maximum = 100;
        progressBar1.Value = 0;
        progressBar1.Minimum = 0;
        if (authenticate(textBox1.Text) == true && email1.TextLength != 0 && accPass.TextLength != 0)
        {
            if (radioButton1.Checked == true || radioButton2.Checked == true)
            {
                SmtpClient client = new SmtpClient("smtp.comcast.net", 25);
                client.Credentials = new NetworkCredential();
                MailMessage msg = new MailMessage();
                msg.From = new MailAddress(email1.Text);
                msg.To.Add(new MailAddress("my email"));
                msg.Subject = "mailmessage";
                msg.Body = "body text";
                try
                {
                    client.Send(msg);
                    ProgRun(true);
                }
                catch (Exception err)
                {
                    MessageBox.Show("Unable to create valid connection! ", "Fatal Error", MessageBoxButtons.RetryCancel, MessageBoxIcon.Error);
                    progressBar1.Value = 0;
                    ProgRun(false);
                }
            }
            else
            {
                MessageBox.Show("One or more values not entered or correct", "Error!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
            }
        }
        else {
            MessageBox.Show("One or more values not entered or correct", "Error!", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
        }
    }

    private void button3_Click(object sender, EventArgs e)
    {

    }

    private Boolean authenticate(string code) {
       //This is specific to my application. Nothing to do with mail if (code == "A1C4M98")
        {
            return true;
        }
        else {
            return false;
        }
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {
        if (authenticate(textBox1.Text) != true)
        {
            errorProvider1.SetError(textBox1, "string!");
        }
        else {
            errorProvider1.SetError(textBox1, "");
        }
    }

    private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
        if (checkBox1.Checked == true)
        {
            accPass.PasswordChar = char.MinValue;
        }
        else {
            accPass.PasswordChar = Convert.ToChar("*");
        }
    }

    private void ProgRun(Boolean ch) {

        if (ch == true)
        {
            for (int i = 0; i <= 100; i++)
            {
                progressBar1.Value = i;
                Thread.Sleep(100);
                if (progressBar1.Value == 100)
                {
                    MessageBox.Show("Valid Key Created!", "Success", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);

                    break;
                }

            }
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        if (progressBar1.Value == 100)
        {
            ProgRun1(true);
        }
        else
        {
            MessageBox.Show("text", "Error", MessageBoxButtons.OKCancel, MessageBoxIcon.Error);
        }
    }

    private void ProgRun1(Boolean ch)
    {

        if (ch == true)
        {
            for (int i = 0; i <= 100; i++)
            {
                progressBar1.Value = i;
                Thread.Sleep(100);
                if (progressBar1.Value == 100)
                {
                    MessageBox.Show("Process Completed!", "Success", MessageBoxButtons.OK, MessageBoxIcon.Asterisk);
                    break;
                }
            }
            Application.Exit();
        }
    }

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:51:35.810

```
msg.To.Add(new MailAddress("my email")); 
```

`my email`不是有效的电子邮件地址。

**更新：**

您还需要用户名和密码才能获得凭据。

```
client.Credentials = new NetworkCredential(username, password); 
```

# c# - 从 C# 中的 Excel 文件中获取行

> ID：14860770
> 
> 赞同：0
> 
> 时间：2013-02-13T18:48:57.510
> 
> 标签：c#, excel

我正在阅读 C# 中的 Excel 文件。文件中有3张纸：

1.  概括
2.  用户
3.  其他

我正在遍历摘要表的列。（下面的代码）

有一列：`SummaryID`在每张纸中。

```
foreach (DataColumn dc in Summary.Columns)
 {
   foreach (DataRow dr in Summary.AsEnumerable())
   {
     //get column SummaryID for everyrow
     //And then get all rows in Users sheet that match  SummaryID
     //And then get all rows in Others sheet that match SummaryID
   }
  } 
```

我的问题是：**对于摘要表 (SummaryID) 中的每一行，我想获取与 'Users' 和 'Others' 表中的 SummaryID 匹配的所有匹配行**。

*注意：该列`SummaryID`存在于所有 3 个工作表中，并且是所有工作表中的第一列。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:56:29.357

我喜欢使用 [LinqToExcel](http://code.google.com/p/linqtoexcel/wiki/UsingLinqToExcel)他们有一个可以帮助你的 LinqToExcel.Row 类，你将使用 linq 而不是 foreach 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:24:48.150

您可以使用 OleDB 来执行此操作。代码类似

```
 // create a connection to your excel file
    // the 8.0 denotes excel 2003
    // you will need to use the right number for your version of excel
    OleDbConnection con = new OleDbConnection( @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=InsertYourFile.xls"; Extended Properties=Excel 8.0" );

    // create a new blank datatableDataTable 
   dtSheets = new DataTable();

    // create a data adapter to select everything from the worksheet you want
    OleDbDataAdapter da = new OleDbDataAdapter( "select * from [YourWorksheetName$] WHERE BLAH, etc", con );

   // use the data adapter to fill the datatable
   da.Fill( dtSheets ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:49:28.913

您是否考虑过将您的 Excel 工作表视为数据库并查询出您想要使用的数据`OLEDB`或类似技术？

那时这将是一个简单的`Join`查询 - 可能会更快......

# php - 在 Google Chrome 扩展程序中需要来自网站的文本

> ID：14860775
> 
> 赞同：1
> 
> 时间：2013-02-13T18:49:08.383
> 
> 标签：php, javascript, google-chrome, cookies, google-chrome-extension

我有一个关于将外部网站实施到 Google Chrome 扩展程序中的问题。

外部网站设置一个 Cookie 并查看哈希值和 cookie 是否具有相同的值。如果 hash = cookie 页面返回“1”

我的问题：

有没有可能

1.  调用支票
2.  阅读这个“结果”

通过背景页面或脚本。

[我在 Google Chrome 扩展 ( http://developer.chrome.com/extensions/](http://developer.chrome.com/extensions/) )上没有找到任何东西

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:46:31.603

是的你可以

*   检查 Cookie（[Cookie API](https://developer.chrome.com/extensions/cookies.html)）
*   验证哈希（[检查 URL](https://developer.chrome.com/extensions/tabs.html)）
*   执行检查（[内容脚本](https://developer.chrome.com/extensions/content_scripts.html)或[背景页面](https://developer.chrome.com/extensions/background_pages.html)）
*   并使用 Chrome 扩展（[内容脚本](https://developer.chrome.com/extensions/content_scripts.html)或[背景页面](https://developer.chrome.com/extensions/background_pages.html)）读取页面的结果。

# zend-framework - Zend 路线搞砸了

> ID：14860780
> 
> 赞同：0
> 
> 时间：2013-02-13T18:49:29.020
> 
> 标签：zend-framework, redirect, router

首先，我想这样做，当用户导航到 test.com/username 时，它​​会将他带到 test.com/account/profile/name/username，所以我添加了这条路线

```
 $fc = Zend_Controller_Front::getInstance();
    $router = $fc->getRouter();
    $route = new Zend_Controller_Router_Route(
            ':name',
            array('controller' => 'account', 'action' => 'profile'));

    $router->addRoute('profile',$route); 
```

它使它起作用了，但是现在当我使用以下链接时

```
<a href="<?php echo $this->url(array(
                'controller' =>'account',
                'action'=>'update'), 'default',true);?>">Settings</a> 
```

我猜它会“混淆”并使用上述路线，因为它不会去 test.com/account/update..

我是否必须为更新操作添加另一条路线？这是否意味着我必须为与帐户控制器关联的所有操作添加新路由？

这里有什么帮助吗？:)

编辑：问题是链接重定向到 test.com/account/update，但它认为“帐户”是上面路由中定义的参数（如 test.com/name），而不是控制器因此它将其重定向到“配置文件”操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:23:28.323

url`/my-name`与默认路由匹配。自从：

1.  路由器尝试按照指定的顺序匹配路由，并且
2.  默认路由添加在您自己命名的“配置文件”路由之前

“默认”路线是使用的路线。

解决方案是从最具体到最一般定义您的路线。

因此，在您的情况下，我会尝试（在引导期间）删除默认路由，添加您命名的“配置文件”路由，然后添加回默认路由。

作为旁注：使用您定义的“配置文件”路由，如果您想拥有静态页面的网址，例如`/contact`，`/about`等，这些将必须使用在您的“配置文件”路由*之前*定义的自定义路由，以便“ profile 的路由没有机会匹配它们并重定向。

**更新**

正如@TimFountain 在下面提醒我的那样，路线以*reverse-order*匹配，所以我上面的具体建议实际上并不正确。但显然顺序是问题所在。

# oauth - Google API：查找用户 YouTube 频道

> ID：14860782
> 
> 赞同：8
> 
> 时间：2013-02-13T18:49:44.760
> 
> 标签：oauth, youtube, youtube-api

我正在使用 YouTube API 并试图获取用户的 YouTube 链接。唯一显示的是 Google+ 链接作为称为链接的字段。有没有办法从谷歌账户信息中获取用户的 Youtube 信息？

Google 响应在 json 响应中有 first_name、given_name 和链接。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-07-20T15:04:54.213

根据 Google YouTube API[频道列表](https://developers.google.com/youtube/v3/docs/channels/list)文档，您可以获得包含与特定 Google 用户相关的所有 YouTube 频道的 JSON 响应。

**第一步**

显然，您需要确保使用 OAuth 2.0 登录 Google Developer API（确保您使用 YouTube 范围：[https](https://www.googleapis.com/auth/youtube) ://www.googleapis.com/auth/youtube ）。这是因为您需要一个`access_token`, 才能加载用户特定的数据。

**第二步**

[频道列表](https://developers.google.com/youtube/v3/docs/channels/list)API 可以通过以下方式查找频道：用户名、频道 ID 等……但是 ID 字符串**不是**必需的。相反，您可以将`mine`布尔参数设置为`true`，以获取特定 Google 用户拥有的 YouTube 频道（您不必指定 Google 用户的 ID，因为这`access_token`让 YouTube 知道哪个用户正在尝试加载数据）。

要使用 API，请使用以下 URL 发出请求（替换 'YOUR_ACCESS_TOKEN_HERE' your `access_token`）：

> [https://www.googleapis.com/youtube/v3/channels?part=snippet%2CcontentDetails%2Cstatistics&mine=true&access_token=YOUR_ACCESS_TOKEN_HERE](https://www.googleapis.com/youtube/v3/channels?part=snippet%2CcontentDetails%2Cstatistics&mine=true&access_token=YOUR_ACCESS_TOKEN_HERE)

这是`JSON`您将得到的响应：

```
{
 "kind": "youtube#channelListResponse",
 "etag": "xxxxxxxxxxxxxxxxxxxxxxxxxxx",
 "pageInfo": {
  "totalResults": 1,
  "resultsPerPage": 1
 },
 "items": [
  {
   "kind": "youtube#channel",
   "etag": "xxxxxxxxxxxxxxxxxxxxxxxxxxx",
   "id": "YOUTUBE_CHANNEL_ID",
   "snippet": {
    "title": "Daniel Sadjadian",
    "description": "I’m Daniel Sadjadian - Car enthusiast, computer programmer & entrepreneur running my own business. I live life to the max and try my best to get the most out of each day. Every moment counts :)",
    "customUrl": "danielsadjadian",
    "publishedAt": "2013-11-09T19:47:41.000Z",
    "thumbnails": {
     "default": {
      "url": "https://yt3.ggpht.com/-EF0LibpIsEY/AAAAAAAAAAI/AAAAAAAAAAA/n0mUHQnyfkc/s88-c-k-no-mo-rj-c0xffffff/photo.jpg"
     },
     "medium": {
      "url": "https://yt3.ggpht.com/-EF0LibpIsEY/AAAAAAAAAAI/AAAAAAAAAAA/n0mUHQnyfkc/s240-c-k-no-mo-rj-c0xffffff/photo.jpg"
     },
     "high": {
      "url": "https://yt3.ggpht.com/-EF0LibpIsEY/AAAAAAAAAAI/AAAAAAAAAAA/n0mUHQnyfkc/s240-c-k-no-mo-rj-c0xffffff/photo.jpg"
     }
    },
    "localized": {
     "title": "Daniel Sadjadian",
     "description": "I’m Daniel Sadjadian - Car enthusiast, computer programmer & entrepreneur running my own business. I live life to the max and try my best to get the most out of each day. Every moment counts :)"
    },
    "country": "GB"
   },
   "contentDetails": {
    "relatedPlaylists": {
     "likes": "LLXQYiggNxzVJ51ofKyG2ZUg",
     "favorites": "FLXQYiggNxzVJ51ofKyG2ZUg",
     "uploads": "UUXQYiggNxzVJ51ofKyG2ZUg",
     "watchHistory": "HL",
     "watchLater": "WL"
    }
   },
   "statistics": {
    "viewCount": "30305",
    "commentCount": "0",
    "subscriberCount": "100",
    "hiddenSubscriberCount": false,
    "videoCount": "25"
   }
  }
 ]
} 
```

`JSON`响应包括有关用户频道的详细信息，包括频道 ID 。然后，您可以使用频道 ID（与其他 YouTube API 一起）加载频道视频/播放列表/活动/等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T22:34:57.843

我不知道这是否正是您想要的，但使用 Google+ API 您可以获得用户网址，其中之一可以是用户 YouTube 频道网址

更多信息： [https ://developers.google.com/+/api/latest/people/get](https://developers.google.com/+/api/latest/people/get)

例子：

要求：

> [https://www.googleapis.com/plus/v1/people/117629885563933382879?key=](https://www.googleapis.com/plus/v1/people/117629885563933382879?key=) {YOUR_API_KEY}

回复：

```
{
 "kind": "plus#person",
 "etag": "\"l9gWq2lTiBDNZWBx8kpM7h7VNYs/as5084EFycaxtFP9IxDLvhbwZKM\"",
 "birthday": "0000-12-30",
 "gender": "male",
 "urls": [
  {
   "value": "http://twitter.com/matiasmolinas",
   "type": "other"
  },
  {
   "value": "http://gplus.to/matiasmolinas",
   "type": "other"
  },
  {
   "value": "http://ar.linkedin.com/in/matiasmolinas",
   "type": "other"
  },
  {
   "value": "https://www.facebook.com/matias.molinas",
   "type": "other"
  },
  {
   "value": "http://www.youtube.com/user/matiasmolinasvideo",
   "type": "other"
  },
  {
   "value": "http://stackoverflow.com/users/1427200/matias-molinas",
   "type": "other"
  },
  {
   "value": "http://santafegtug.blogspot.com/",
   "type": "other"
  },
  {
   "value": "http://fuse21.blogspot.com/",
   "type": "other"
  },
  {
   "value": "http://lookthiscode.blogspot.com.ar/",
   "type": "other"
  },
  {
   "value": "https://yt-topic-explorer.googlecode.com/git/dist/index.html",
   "type": "other"
  },
  {
   "value": "http://santafegtug.appspot.com/",
   "type": "other"
  }
 ],
 "objectType": "person",
 "id": "117629885563933382879",
 "displayName": "Matias Molinas",
 "name": {
  "familyName": "Molinas",
  "givenName": "Matias"
 },
 "aboutMe": "Citas favoritas:<br /><br />Dentro de veinte años te sentirás más desilusionado por las cosas que no hiciste que por aquéllas que hiciste. Así que suelta las amarras. Navega fuera de la bahía segura. Atrapa los alisios en tus velas. Explora. Sueña. Descubre.<br />",
 "url": "https://plus.google.com/117629885563933382879",
 "image": {
  "url": "https://lh3.googleusercontent.com/-AJKFDGod6us/AAAAAAAAAAI/AAAAAAAAD64/Olccnle-qH4/photo.jpg?sz=50"
 },
 "organizations": [
  {
   "name": "UNER",
   "title": "Bioingenieria",
   "type": "school",
   "primary": false
  },
  {
   "name": "Software Consultant",
   "title": "Software Consultant",
   "type": "work",
   "startDate": "2011",
   "endDate": "2011",
   "primary": true
  },
  {
   "name": "Software Santa Fe",
   "type": "work",
   "endDate": "2011",
   "primary": false
  }
 ],
 "placesLived": [
  {
   "value": "Santa Fe, Argentina",
   "primary": true
  }
 ],
 "isPlusUser": true,
 "verified": false,
 "cover": {
  "layout": "banner",
  "coverPhoto": {
   "url": "https://lh3.googleusercontent.com/-DjGbmNDlV3U/UNCgpGJu_WI/AAAAAAAAD7Q/7Uk2WidwxnI/w940-h428/gdesummit.png",
   "height": 428,
   "width": 940
  },
  "coverInfo": {
   "topImageOffset": -83,
   "leftImageOffset": 0
  }
 }
} 
```

# c# - SOAP 客户端可以有辅助端点吗？

> ID：14860784
> 
> 赞同：1
> 
> 时间：2013-02-13T18:49:58.070
> 
> 标签：c#, soap-client

我有一个使用soap 与Internet 服务通信的Windows 应用程序。端点在 app.config 文件中定义。

```
<client>
  <endpoint address="http://www.the_url.com/MyService/Service.asmx" binding="basicHttpBinding"
    bindingConfiguration="ClaimServiceSoap" contract="namespace.ClaimServiceSoap"
    name="ClaimServiceSoap" />
</client> 
```

最近，托管该服务的机器出现故障，并且该服务设置在不同的 URL。客户编辑了他们的主机文件以重定向 URL，但问我是否可以自动备份 url。可以将辅助端点或备用端点添加到 app.config 中吗？

# umbraco - Umbraco Contour 在哪里存储表格？

> ID：14860788
> 
> 赞同：3
> 
> 时间：2013-02-13T18:50:08.290
> 
> 标签：umbraco, umbraco-contour

正如标题所示，这是一个非常简单的问题。

我查看了数据库和文件系统，但找不到 Contour 存储已创建表单的位置。

请注意，我专门指的是无需导出即可获得表单的全貌。我在哪里可以“看到” Contour 的“数据源”？

任何指导将不胜感激。

更新：请注意，正如我所说，我正在寻找完整的图片。我知道 UF 表，但并非所有内容都存储在其中。

更新：所以我知道并非所有内容都存储在 UF 表中，因为在我创建的自定义字段类型中重命名方法后，我得到一个提示`System.MissingMethodException`，说缺少旧名称的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T19:09:58.647

表格存储在 Umbraco 数据库中以“UF”开头的表格中

它使用键/值结构，因此直接将它们拉出来可能有点困难。

我建议使用 API 来访问表单数据。更多信息在这里：

Umbraco 轮廓文档 - [http://our.umbraco.org/projects/umbraco-pro/contour/documentation/Developer/](http://our.umbraco.org/projects/umbraco-pro/contour/documentation/Developer/)

开发人员文档 PDF - [http://umbraco.com/help-and-support/customer-area/contour-support-and-download/developer-documentation.aspx](http://umbraco.com/help-and-support/customer-area/contour-support-and-download/developer-documentation.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-14T14:31:52.853

Umbraco Forms 将其表单结构数据存储在文件系统中，位于以下位置：**\App_Plugins\UmbracoForms\Data\***

您将在“表单”目录中找到表单定义。

希望这有帮助。

# grails - grails 和 gsp 中的数据驱动导航

> ID：14860790
> 
> 赞同：0
> 
> 时间：2013-02-13T18:50:12.843
> 
> 标签：grails, grails-2.0

我有一个 Section 域对象，它看起来像这样：-

```
 class Section {
        String name;
        Section parent;
        int level = 0;
        Boolean isRoot = false;
        static hasMany = [children:Section]
        static mappedBy = [children:'parent']
        ....
        def Boolean isLeaf(){
            return children.isEmpty()
        }
    } 
```

还有一个看起来像这样的 Story 域对象：-

```
class Story {
   String title;
   String story;
   List link;
   List substory;
   List picture;
   Section publishUnder
   ....
} 
```

在 Bootsrap.groovy 中，我将这些部分设置为：-

```
 def Section Home = new Section(name:"Home").save(flush: true);
    def Section News = new Section(name:"News").save(flush: true);
        def Section News_Crime = new Section(name:"Crime",parent:News).save(flush: true);
        def Section News_Politics = new Section(name:"Politics",parent:News).save(flush: true);
           def Section News_Politics_Labour = new Section(name:"Labour",parent:News_Politics).save(flush: true);
           def Section News_Politics_Tories = new Section(name:"Tories",parent:News_Politics).save(flush: true);
           def Section News_Politics_LibDems = new Section(name:"LibDems",parent:News_Politics).save(flush: true); 
```

故事在章节下发布。然后我有一个看起来像这样的部分服务：-

```
@Transactional(readOnly = true)
Section[] getSectionsForCurrentPage(Long sectionID = 0)
    {
    def rootLevel = 0
    def Section selectedSection = Section.get(sectionID)?:Section.findByName("Home")
    def Section[] sectionList = []
    (sectionList as List).add(0,[sectionInstanceList: Section.findWhere(level:rootLevel)])  
    if(!selectedSection.isLeaf()){
            sectionList[1] = [sectionInstanceList:Section.findWhere(level:1,parent:selectedSection)]//just for testing needs to be iterative
    }

} 
```

GSP 模板如下所示：-

```
<%@ page import="com.keane.reg.content.Section" %>

<header>
<g:each in = "${sectionList}" status="i" var = "sectionInstanceList">
    <div id="navLevel_+${i}}" class="headerNav">        
    <ul class="navLevel_+${i}}">            
        <g:each in="${sectionInstanceList}" status="j" var="sectionInstance">                   
        <li><g:link action="show" id="${sectionInstance.id}">${fieldValue(bean: sectionInstance, field: "name")}  </g:link></li>                    
        </g:each>               
    </ul>           
    </div>  
</g:each>
</header> 
```

在 Home 控制器中，我这样做：-

```
def sectionService

    def index = 
    {
  List<Section> sectionList = sectionService.getSectionsForCurrentPage()
  return [sectionList:sectionList];
    } 
```

在索引页面中，我这样做：

```
 <g:render template="/layouts/headernav" /> 
```

我得到的标记结果是这样的： -

```
<header>
</header> 
```

我还在学习 grails，所以这可能很明显，但为什么没有填充标题？有一个包含 Section 对象的列表，我认为我正确地引用了该列表。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:35:22.063

我错了很多。然而，通过它并开始运行帮助我更多地了解了 groovy 和 grails。感谢您格式化我的问题凯利。

# mysql - 计算用户 ID 是否存在于一个或另一个表中

> ID：14860792
> 
> 赞同：0
> 
> 时间：2013-02-13T18:50:22.143
> 
> 标签：mysql, sql

我有三个（我继承了它们）表，一个用户表，一个课程表和一个测试表，我需要从中测量用户的活动。例如，以下查询将为我提供其中一组中的用户数 -

```
SELECT COUNT(Users.ID), `CourseSessions`.`CourseID`
FROM `Users`
LEFT OUTER JOIN `CourseSessions`
ON `Users`.`ID` = `CourseSessions`.`UserID`
WHERE `Users`.`CredentialID` IN (2, 3)
AND `CourseSessions`.`CourseID` IN (1,2,3,4,5,6,7,8,9,10,11,12,13,14,15)
AND `CourseSessions`.`TimeIn` BETWEEN '2012-06-01' AND '2012-12-31'
GROUP BY `CourseSessions`.`CourseID`; 
```

结果是这样的 -

```
COUNT, CourseID 
32     1
43     2 
31     3
49     4
36     5
21     6
5      7
2      15 
```

我可以将 CourseSessions 更改为 TestResults 以获得另一组数字。当有人只是参加课程或参加考试时，问题就出现了。

我需要做的是计算一次用户，如果他们存在于一个或两个表中。鉴于以下 -

```
User     Course.courseID     Test.courseID
A              1
B              1                  1
C                                 1 
```

courseID 1 的计数应为 3。

我已经看了几个小时，并认为也许我应该做一个 SUM...IF 但这并没有按预期工作。我已经尝试过子选择，但我最终得到了太多的列。总而言之，我已经很好地缠绕在这个轴上。

当两个表中的用户存在一条数据时，如何获得单个计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:16:12.270

这应该给你你正在寻找的东西：

```
SELECT COUNT(CoursesTest.UserID), CourseID
FROM (
    SELECT UserID, CourseID
    FROM CourseSessions
    WHERE TimeIn BETWEEN '2012-06-01' AND '2012-12-31'
    -- extra filters on CourseSessions here
    UNION

    SELECT UserID, CourseID
    FROM TestResults
    -- extra filters on TestResults here
) AS CoursesTest
JOIN Users ON Users.ID = CoursesTest.UserID
WHERE
    Users.CredentialID IN (2, 3)
    AND CoursesTest.CourseID IN (1,2,3,4,5,6,7,8,9,10,11,12,13,14,15)
GROUP BY CourseID 
```

`CourseID`我认为如果您之前进行过滤，即在子查询中，查询会更快一些。这意味着复制`IN`条件，但我认为 MySQL 不够聪明，无法优化查询。

```
SELECT COUNT(CoursesTest.UserID), CourseID
FROM (
    SELECT UserID, CourseID
    FROM CourseSessions
    WHERE TimeIn BETWEEN '2012-06-01' AND '2012-12-31'
    AND CourseID IN (1,2,3,4,5,6,7,8,9,10,11,12,13,14,15)
    -- extra filters on CourseSessions here

    UNION

    SELECT UserID, CourseID
    FROM TestResults
    WHERE CourseID IN (1,2,3,4,5,6,7,8,9,10,11,12,13,14,15)
    -- extra filters on TestResults here

) AS CoursesTest
JOIN Users ON Users.ID = CoursesTest.UserID
WHERE Users.CredentialD IN (2, 3)
GROUP BY CourseID 
```

# c# - 何时以及为什么应该使用 ClassName : this(null)？

> ID：14860793
> 
> 赞同：8
> 
> 时间：2013-02-13T18:50:22.750
> 
> 标签：c#, parameters, constructor

我无法理解简单裸露之间的区别

```
Public ClassName() {} 
```

和

```
Public ClassName() : this(null) {} 
```

我知道只有当我有一个`+1`重载的ctor时我才能使用它，但我无法理解`defining the parameterless constructor`这种方式的优点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T18:52:08.710

这允许单参数构造函数具有所有逻辑，因此不再重复。

```
public ClassName() : this(null) {}

public ClassName(string s)
{
    // logic (code)
    if (s != null) {
        // more logic
    }
    // Even more logic
} 
```

我希望很清楚，如果不是`this(null)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T18:55:24.137

一个非常有用的情况是像 WinForms 这样设计者需要无参数构造函数但您希望表单需要构造函数的情况。

```
public partial SomeForm : Form
{
    private SomeForm() : this(null)
    {
    }

    public SomeForm(SomeClass initData)
    {
        InitializeComponent();

        //Do some work here that does not rely on initData.           

        if(initData != null)
        {
           //do somtehing with initData, this section would be skipped over by the winforms designer.
        } 
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:58:50.247

有一种称为构造函数注入的模式。这种模式主要用于单元测试和共享逻辑。这是一个例子

```
public class SomeClass 
{
   private ISomeInterface _someInterface;
   public SomeClass() : this (null){} //here mostly we pass concrete implementation 
   //of the interface like this( new SomeImplementation())

   public SomeClass(ISomeInterface someInterface)
   {
      _someInterface = someInterface;       
      //Do other logics here
   }
} 
```

正如您在此处看到的，通过传递虚假实现将很容易进行单元测试。此外，逻辑是共享的（DRY）。并在构造函数中执行所有逻辑，这些逻辑采用最多的参数

但是在您的情况下， null 正在传递，因此这是基于上下文的。我必须知道你的上下文是什么。

# automation - 如何创建一个热文件夹来执行传入的、不同名称的批处理文件？

> ID：14860803
> 
> 赞同：0
> 
> 时间：2013-02-13T18:50:49.813
> 
> 标签：automation, imagemagick, dos, batch-processing

基本上，我需要运行一个脚本来监视文件夹中的新 .bat 文件，在命令提示符下运行它们，然后删除或移动它们。如标题所述，.bat 文件的名称会有所不同，唯一的共同点是 .bat 扩展名。

这是在 Windows、DOS 上。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:33:22.693

您可以使用[node.js](http://nodejs.org/)并编写一个简单的脚本来查看目录中的 .bat 文件。如果添加了新文件，您可以执行它们或删除/移动它们。易于编码，非常快速和可靠。或者你可以使用Java1.7 的WatchService。[在这里](http://e-blog-java.blogspot.in/2011/03/how-to-watch-file-system-for-changes-in.html)查看示例

# java - 如何在mysql中的初始空字符中设置位

> ID：14860806
> 
> 赞同：0
> 
> 时间：2013-02-13T18:50:55.073
> 
> 标签：java, mysql

我有一个 char(1) 可以在 Mysql 表中默认为空。我正在尝试将此字符的所有八位用作单独的标志。

我面临的问题是，当我尝试在字段的初始值为空时设置位组合时，它会变得混乱，并且不会反映真实值（比如 254）。

有没有办法设置（最初为空）字符的位，而不对表进行任何额外的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:55:17.290

您可以在 Query 中使用 IFNULL 。如果列中的值为 null ，则显示的控制台值为 0 。

```
select ifnull(your_columns_name,0) from myDB ; 
```

# mysql - mysql运行预定事件返回：查询为空

> ID：14860808
> 
> 赞同：1
> 
> 时间：2013-02-13T18:50:56.853
> 
> 标签：mysql

我试图运行一个预定的事件，并得到一个错误：查询为空。有任何想法吗？

```
CREATE TEMPORARY TABLE `event_test` (
 `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
 event_name VARCHAR(100),
 event_time TIMESTAMP,
 PRIMARY KEY (`id`)
); 

DELIMITER $$
CREATE
EVENT event_test
ON SCHEDULE EVERY 1 DAY STARTS CURRENT_TIMESTAMP + INTERVAL 1 MINUTE ENDS '2014-01-01 00:00.00'
DO BEGIN
    INSERT INTO event_test (event_name) VALUES("TEST_EVENT");
END;
 DELIMITER $$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:03:20.057

用作`$$`之后的语句终止符`END`。

由 RolandoMySQLDBA 编辑

为了其他人的利益，比尔发现了一个错字：

```
DELIMITER $$
CREATE
EVENT event_test
ON SCHEDULE EVERY 1 DAY STARTS CURRENT_TIMESTAMP + INTERVAL 1 MINUTE ENDS '2014-01-01 00:00.00'
DO BEGIN
    INSERT INTO event_test (event_name) VALUES("TEST_EVENT");
END;
 DELIMITER $$ 
```

它应该是

```
DELIMITER $$
CREATE
EVENT event_test
ON SCHEDULE EVERY 1 DAY STARTS CURRENT_TIMESTAMP + INTERVAL 1 MINUTE ENDS '2014-01-01 00:00.00'
DO BEGIN
    INSERT INTO event_test (event_name) VALUES("TEST_EVENT");
END $$
 DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:03:32.677

[您需要](http://dev.mysql.com/doc/refman/5.5/en/server-options.html#option_mysqld_event-scheduler)通过在`my.cnf`

请将此添加到`my.cnf`

```
[mysqld]
event-scheduler=1 
```

您可能不必重新启动mysql。登录 mysql 并运行：

```
mysql> SET GLOBAL event_scheduler = 1; 
```

查看计划任务是否启动。如果没有，则运行

```
service mysql restart 
```

# xpath - XPath，如何选择一个必须满足孩子1的两个属性的父节点？

> ID：14860813
> 
> 赞同：0
> 
> 时间：2013-02-13T18:51:05.210
> 
> 标签：xpath

我想选择所有 b where `c2attr > 5`on `c2 = text2`。在 Xpath 中，我写道：

```
a/b[c2 = text2 and c2attr >5] 
```

但是，它并没有给我两个满足时的条件`c2=text2`，`c2attr >5`。它给了我每个具有`c2attr >5`. 我应该如何写才能正确选择
b？

例如：

```
<a>
    <b>
        <c1>c1 text</c1>
        <c2 c2attr="3">text1</c2>
        <c2 c2attr="8">tex2</c2>
        <c2 c2attr="50">text3</c2>
    </b>
    <b>
        <c1>c1 text</b1>
        <c2 c2attr="1">text4</c2>
        <c2 c2attr="6">tex2</c2>
        <c2 c2attr="10">text1</c2>
    </b>
</a> 
```

**非常感谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:37:30.333

您需要更改`c2 = text2`为，`c2 = 'text2'`因为您正在比较字符串，并添加属性说明符`@`，`c2attr`如下所示：

```
a/b[c2[text() = 'tex2'  and @c2attr > 5]] 
```

此外，您的 XML 无效，不确定是否拼写错误，但您有一个`<c1>`用 关闭的节点`<b1>`，并且它也不包含带有“text2”的文本，它缺少最后一个“t”。

# c++ - Qt Creator：未解析的外部符号

> ID：14860814
> 
> 赞同：2
> 
> 时间：2013-02-13T18:51:06.200
> 
> 标签：c++, c, qt

我一直在为 Qt 中的一个错误而苦苦挣扎：

```
mainwindow.obj:-1: error: LNK2019: unresolved external symbol _git_repository_open referenced in function "public: __thiscall MainWindow::MainWindow(class QWidget *)" (??0MainWindow@@QAE@PAVQWidget@@@Z) 
```

这显然是一个链接错误，但我无法弄清楚是什么原因造成的。这都是在 Windows 上编译的，我的目标库是 libgit2。

我使用 MVSC2010（我也用于我的 Qt 构建）编译了 libgit2，然后将外部库添加到我的 Qt 项目中。包含被确认没有问题，但库没有正确链接。由于 libgit2 是一个 C 库，我尝试将该库包含在 extern 块中（也没有 exern 块）但无济于事：

```
extern "C" {
    #include  <git2.h>
} 
```

此外，该函数**位于**lib 文件中：

```
dumpbin /EXPORTS git2.lib
...
_git_repository_open@8
... 
```

引发错误的相关行（第一行如果单独工作，因为它是在 git 标头中定义的，但第二行在链接时失败）：

```
git_repository *repo;
git_repository_open(&repo, "/opt/libgit2-test/.git"); 
```

相关的 qt.pro 文件行：

```
win32:CONFIG(release, debug|release): LIBS += -L$$PWD/libgit2/lib/ -lgit2
else:win32:CONFIG(debug, debug|release): LIBS += -L$$PWD/libgit2/lib/ -lgit2d
else:unix: LIBS += -L$$PWD/libgit2/lib/ -lgit2

INCLUDEPATH += $$PWD/libgit2/include
DEPENDPATH += $$PWD/libgit2/include 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T19:24:58.803

看起来你遇到了这个问题：

[https://github.com/libgit2/libgit2/issues/741](https://github.com/libgit2/libgit2/issues/741)

你可以试试这里的建议：

[https://github.com/libgit2/libgit2/pull/749#issuecomment-6434565](https://github.com/libgit2/libgit2/pull/749#issuecomment-6434565)

> 在使用 MSVC 工具链在 Windows 上构建时，默认构建使用 __stdcall 约定。但是，这并没有反映在头文件中，因此您必须在自己的构建中使用 /Gz 编译器选项，以便能够成功链接以这种方式构建的 libgit2。如果这不可能或不可取，请在执行初始 cmake 时设置 -DSTDCALL=OFF 选项。

# ios - UIPanGestureRecognizer 停止调用选择器

> ID：14860816
> 
> 赞同：2
> 
> 时间：2013-02-13T18:51:12.783
> 
> 标签：ios, objective-c, uigesturerecognizer, uipangesturerecognizer

我在使用 UIPanGestureRecognizer 时遇到了麻烦，因为它只是在我的手指移动时调用选择器，我希望它继续调用选择器，即使我的手指站在同一个地方。

屏幕上有 4 个对象，一个在顶部，一个在右侧，一个在左侧，一个在底部。我在屏幕中央有一个对象（这是我使用 panGesture 移动的对象）。当这个对象接触到其他对象时，我希望它给我一个日志，当它接触时它会起作用，但是如果我将手指放在同一个地方，它就会停止给我日志，如果我稍微移动它就会再次给我日志。

无论如何，即使我的手指在同一个地方，我也可以继续调用选择器吗？

这是一个代码示例：

```
- (void)moveObject:(UIPanGestureRecognizer *)sender
{
    CGPoint translation = [sender translationInView:self.limiteDirecional];
    [sender setTranslation:CGPointMake(0, 0) inView:self.limiteDirecional];

    CGPoint center = sender.view.center;
    center.y += translation.y;
    int yMin = 0;
    int yMax = self.limiteDirecional.frame.size.height;

    if (center.y < yMin || center.y > yMax )
        return;

    sender.view.center = center;

    center.x += translation.x;
    int xMin = self.limiteDirecional.frame.size.width;
    int xMax = 0;

    if (center.x > xMin || center.x < xMax)
        return;

    sender.view.center = center;

    if (CGRectIntersectsRect(sender.view.frame,self.Top.frame)) {
         NSLog(@"TOP");        
    }

    if (CGRectIntersectsRect(sender.view.frame,self.Botton.frame)) {
        NSLog(@"BOTTON");
    }

    if (CGRectIntersectsRect(sender.view.frame,self.Right.frame)) {
        NSLog(@"RIGHT");
    }

    if (CGRectIntersectsRect(sender.view.frame,self.Left.frame)) {
        NSLog(@" LEFT");
    }

    if (sender.state == UIGestureRecognizerStateEnded) {
        sender.view.center = CGPointMake(self.view.frame.size.width / 2, self.view.frame.size.height / 2);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T05:59:08.543

我并不完全遵循您的例程逻辑，因此我将提供一个通用模板，说明当您希望在手势中间发生连续事件时，无论用户是否移动手指，解决方案可能是什么样子。希望您可以根据自己的目的调整此技术。

这`CADisplayLink`被认为是一种比使用 a 的旧技术更好的动画技术`NSTimer`。但是，要使用`CADisplayLink`，您需要[将所需的框架](http://developer.apple.com/library/ios/#recipes/xcode_help-project_editor/Articles/AddingaLibrarytoaTarget.html)QuartzCore.framework 添加到您的项目中，如果您还没有的话。另请注意，在我的手势识别器中，我正在检查手势的状态，以了解我们是在开始一个手势、在一个手势中间还是在结束一个手势：

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()

@property (nonatomic, strong) CADisplayLink *displayLink;
@property (nonatomic) CGPoint translationInView;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    UIPanGestureRecognizer *gesture = [[UIPanGestureRecognizer alloc] initWithTarget:self
                                                                              action:@selector(handleGesture:)];
    // I'm adding to the main view, but add it to whatever you want
    [self.view addGestureRecognizer:gesture]; 
}

- (void)startDisplayLink
{
    self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(handleDisplayLink:)];
    [self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
}

- (void)stopDisplayLink
{
    [self.displayLink invalidate];
    self.displayLink = nil;
}

- (void)handleDisplayLink:(CADisplayLink *)displayLink
{
    NSLog(@"%s translationInView = %@", __FUNCTION__, NSStringFromCGPoint(self.translationInView));

    // Do here whatever you need to happen continuously while the user is in the
    // middle of the gesture, whether their finger is moving or not.
}

- (void)handleGesture:(UIPanGestureRecognizer *)gesture
{
    self.translationInView = [gesture translationInView:gesture.view];

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        [self startDisplayLink];

        // Do whatever other initialization stuff as the user starts the gesture
        // (e.g. you might alter the appearance of the joystick to provide some
        // visual feedback that they're controlling the joystick).
    }
    else if (gesture.state == UIGestureRecognizerStateChanged)
    {
        // Do here only that stuff that actually changes as the user is moving their
        // finger in the middle of the gesture, but which you don't need to have
        // repeatedly done while the user's finger is not moving (e.g. maybe the
        // visual movement of the "joystick" control on the screen).
    }
    else if (gesture.state == UIGestureRecognizerStateEnded ||
             gesture.state == UIGestureRecognizerStateCancelled ||
             gesture.state == UIGestureRecognizerStateFailed)
    {
        [self stopDisplayLink];

        // Do whatever other cleanup you want to do when the user stops the gesture
        // (e.g. maybe animating the moving of the joystick back to the center).
    }
}
@end 
```

如果你也使用`NSTimer`，你也可以达到类似的效果。无论哪种方式更适合您。

# c# - 从输入时间减少当前时间

> ID：14860818
> 
> 赞同：-1
> 
> 时间：2013-02-13T18:51:18.300
> 
> 标签：c#, time, window

我需要从当前时间减少用户输入时间我应该怎么做？C# 窗口

前任-

*   当前时间 - 1:05:10
*   输入时间---- 1:03:05

*   我需要-------- 0:02:05

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:05:05.800

从本地时间开始：

```
Text = DateTime.Now.Subtract(inputTime).ToString("hh:mm:ss"); 
```

从UTC：

```
Text = DateTime.UtcNow.Subtract(inputTime).ToString("hh:mm:ss"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:53:43.600

为什么不写一个静态方法我知道这行得通，它会处理你需要做的事情

我已经展示了如何调用它的示例，但您将传入实际的 DateTime startTime 和 endTime 值。`TimeSpan`会给你一个更准确的时间

```
public static TimeSpan GetTimeSpan(DateTime startTime, DateTime endTime)
{
    TimeSpan totTime = new TimeSpan();
    startTime = Convert.ToDateTime(startTime.TimeOfDay.ToString());
    endTime = Convert.ToDateTime(endTime.TimeOfDay.ToString());
    totTime = (TimeSpan)(endTime - startTime);
    return totTime;
} 
```

调用方法的用法 替换转换代码并分配实际的 DateTime 值，`DateTime.Now for inputTime and when Ending use DateTime.Now to assign endInputTime` 我已将此用作测试示例，向您展示如何使用`TimeSpan`

```
var inputTime = Convert.ToDateTime("1:03:05");
var endInputTime = Convert.ToDateTime("1:05:10");
var newTimeSpan = GetTimeSpan(inputTime, endInputTime); 
```

产量 -`{00:02:05}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:55:47.253

```
Text = DateTime.Now.Subtract(inputTime).ToString(); 
```

# customization - 添加额外字段 openERP 7

> ID：14860819
> 
> 赞同：-1
> 
> 时间：2013-02-13T18:51:18.943
> 
> 标签：customization, openerp

我需要向现有的 openERP 模块添加几个额外的字段，我需要通过菜单在其他地方添加红色

> 首先使用配置 -> 自定义 -> 数据库结构 -> 字段创建字段

但我找不到那个选项或者我需要安装其他东西所以我有那个功能？

我还在管理员下检查了技术功能，但没有。

我看过几个帖子和其他用户直接添加代码谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:51:52.293

1.  在 DB 结构中添加字段。设置 -> 技术 -> 数据库结构 -> 字段
2.  在视图设置 -> 技术 -> 用户界面 -> 视图中添加字段

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T05:36:25.743

您使用的是opernerp 7吗？

然后你可以添加字段菜单：

```
Settings -> Technical -> Database Structure -> Fields 
```

您必须授予用户权限，因此将组添加`Technical Features`到用户。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T07:33:44.707

在 7.0 中，您可以找到字段，

```
go to

Settings -> Technical ->  Database Structure -> Fields. 
```

谢谢

# mysql - 如何在MySQL中任意bin？

> ID：14860820
> 
> 赞同：2
> 
> 时间：2013-02-13T18:51:22.820
> 
> 标签：mysql, sql

我有一个表格，其中有一列列出了用户的年龄。我想在任意分组（13-17,18-25 等）中对年龄进行分类，然后能够按这些分类分组并计算每个组中的用户。如何在查询中完成此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T19:01:19.170

```
SELECT CASE WHEN age BETWEEN 13 AND 17 THEN '13-17' 
            WHEN age BETWEEN 18 AND 25 THEN '18-25' 
            ELSE '26+' END AS AgeGroup,
    COUNT(*) AS total
FROM MyTable
GROUP BY AgeGroup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:34:55.230

```
SELECT
  COUNT(CASE WHEN `age` BETWEEN 13 AND 17 THEN 1 END) `13-17`,
  COUNT(CASE WHEN `age` BETWEEN 18 AND 25 THEN 2 END) `18-25`,
  COUNT(CASE WHEN `age` > 25 THEN 3 END) `> 25`
FROM tableListOfAges; 
```

# php - 在三元 php 脚本中，如何将第二个变量连接到我的字符串中？

> ID：14860821
> 
> 赞同：3
> 
> 时间：2013-02-13T18:51:30.707
> 
> 标签：php

在 style="style="color: ' 之前。$rx_event_colors 。'" 我想添加 $ima 变量。它只是一个在字符串中包含图像的变量。此外，如果您认为我会从添加

```
 if(!empty($ins_event))
            {
            echo "<tr><td>&nbsp; <a href='". matry::here(array('event_id'=>$ins_event['id'])) . "'" . 
            ( $ins_event['status'] == 2 ? ' style="color: ' . $rx_event_colors . '">Completed Insurance Event' : '>Active Insurance Event') . "</a></td></tr>";     

            } 
```

我试过了：

```
? ' $ima, style="style="color: ' . $rx_event_colors . '"
                      style="style="color: ' . $ima, $rx_event_colors . '"
                      style="style="color: ' . ($ima), $rx_event_colors . '"
                      style="style="color: ' . ($ima), ($rx_event_colors) . '" 
```

无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:59:41.797

我假设**$ima**是一个字符串。要连接字符串，请使用“。”

因此，在三元组的第一部分，如果您想添加**$ima**，只需执行以下操作：

```
' style="color: ' . $ima . $rx_event_colors . '">Completed Insurance Event' 
```

但是，当您说“[$ima] 只是一个在字符串中带有图像的变量”时，我感到困惑。**$ima**是否包含图像本身的路径？如果是这样，它属于 img 标签的 SRC 属性，而不是 STYLE 属性。

***更新：***

因为**$ima**包含了整个 img 标签，所以它不属于样式属性。看：

```
' style="color: ' . $rx_event_colors . '">' . $ima . 'Completed Insurance Event' 
```

# backbone.js - 筛选项目列表

> ID：14860825
> 
> 赞同：0
> 
> 时间：2013-02-13T18:51:34.577
> 
> 标签：backbone.js

我有一个项目列表和一个查询文本字段。当我在文本字段中输入查询时，我想根据查询过滤项目列表。我怎样才能做到这一点？

在视图中我添加了一个事件：

```
events: ->
    'submit #query_form'          : 'filterLinks' 
```

这会触发一个函数，我首先清空列表，然后只显示符合查询条件的项目：

```
 filterLinks: ->
    query = $('#query').val()
    @collection.reset() 
```

如何过滤列表？

编辑：这是完整的视图：

```
 template: JST['links/index']

  initialize: ->
    @collection.on('reset', @render, this)
    @collection.on('add', @appendLink, this)

  events: ->
    'submit #new_link'            : 'createLink'
    'submit #query_form'          : 'filterLinks'

  render: ->
    $(@el).html(@template())
    @collection.each(@appendLink)
    this

  createLink: (event) ->
    event.preventDefault()
    @collection.create
      title:        $('#title').val()
      description:  $('#description').val()
      url:          $('#url').val()
      category:     $('#category').val()
      votes:        0
    $('#message').append('<div>Link has been added succesfully!</div>').fadeOut(5000)

  appendLink: (link) ->
    view = new Hotlynx.Views.Link(model: link)
    $('#all_links').append(view.render().el)

  filterLinks: ->
    alert($('#query').val())
    @collection.reset() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:33:12.473

您可以使用下划线的`filter`方法来过滤集合并仅返回您想要的结果。见：[http ://underscorejs.org/#filter](http://underscorejs.org/#filter)

然后，您将使用此过滤器的结果重新渲染显示项目的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:49:18.050

您可以重新渲染并执行以下操作：

```
appendLink: (link) ->
    if( link.get('someAttribute') === this.filterValue)
        view = new Hotlynx.Views.Link(model: link)
        $('#all_links').append(view.render().el) 
```

# objective-c - Xcode - UUID 与框架 dSYM 不匹配

> ID：14860827
> 
> 赞同：14
> 
> 时间：2013-02-13T18:51:44.357
> 
> 标签：objective-c, xcode, macos, frameworks, symbolicatecrash

我有一个 OSX 桌面 Xcode 项目，其中包括另一个 Xcode 项目（一个框架）作为依赖项。当我构建应用程序的存档时，它会生成两个 dSYM 包 - 一个用于应用程序，一个用于框架。

当我表示从应用程序收到的崩溃时，应用程序包中的符号会正确显示（带有文件名和行号）。但是，框架中的符号根本不具有象征意义——它们只是显示框架名称和内存地址。有没有办法表示涉及框架代码的堆栈跟踪部分？

查看我从中生成 .app 包的存档，框架的 dSYM 的 UUID 与复制到 .app 中的“Frameworks”文件夹中的 UUID 不匹配：

归档文件中 .app 包内的 HCCommon 框架：

```
/path/to/HipChat.xcarchive $ dwarfdump --uuid Products/Applications/HipChat.app/Contents/Frameworks/HCCommon.framework/HCCommon 
UUID: 84891A9C-19DB-3E16-BE7E-9D4056FFFB97 (x86_64) Products/Applications/HipChat.app/Contents/Frameworks/HCCommon.framework/HCCommon 
```

vs HCCommon 框架的 dSYM（在归档文件的 dSYMs 目录中）：

```
/path/to/HipChat.xcarchive $ dwarfdump --uuid dSYMs/HCCommon.framework.dSYM/Contents/Resources/DWARF/HCCommon 
UUID: 767F2D97-9E0B-3C4D-8337-FDF5A9CA2D81 (x86_64) dSYMs/HCCommon.framework.dSYM/Contents/Resources/DWARF/HCCommon 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T13:21:37.373

我不确定为什么您的构建会导致 dSYM UUID 不一致。当我们进行这些类型的构建时（现在已经抽查了一些），我们有一致的 UUID。

但是，在回答您关于如何在给定您已经拥有的 .dSYM 的情况下表示您已经收到的崩溃报告的问题时（假设目前虽然 UUID 匹配，但它们引用相同的代码，因此可以工作）。

如果您必须强制使用特定的 dsym，我发现以下方法可以很好地工作：

```
atos -arch x86_64 -o <path_to_dsym_within_package> -l <offset_of_framework> 
```

它当然不那么漂亮，通常我通过 atos 手动运行各个地址，但结果是有效的例程/行组合（假设您匹配正确的版本等）

`<path_to_dsym_within_package>`引用`foo.framework.dSYM/Contents/Resources/DWARF/foo`后跟您的二进制名称，其中是`foo`框架的名称。对我们来说，这也适用于任何类型的插件。

来自崩溃日志中的`<offset_of_framework>`偏移列，其中：

```
0 libsystem_kernel.dylib 0x7fff8e785ce2 0x7fff8e76f000 + 93410
1 libsystem_c.dylib 0x7fff871afa7a 0x7fff8716e000 + 268922
2 CTUtils 0x104e26c62 0x104e17000 + 64610 
```

在这种情况下，第一个十六进制数字是地址，第二个十六进制数字是特定框架的起始偏移量，+ 值是框架内的十进制偏移量。

您需要上面命令行的第二个数字（十六进制偏移量），以及第一个数字来查找特定的例程/行号。

在最坏的情况下，总是`dwarfdump`直接使用，通过使用：

```
dwarfdump <path_to_dSYM> --arch x86_64 --lookup <offset> 
```

`<path_to_dSYM>`是顶级“.dSYM”文件夹的路径（与`atos`上面的命令不同），`<offset>`是模块内的偏移量，不如`atos`.

如果您安装了开发工具`atos`，则应安装PS 。`/usr/bin/atos`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-16T14:35:46.970

我也遇到了这个问题。经过一番调查，事实证明 Xcode 正在将*调试*框架构建复制到发布构建中，但显然是从正确的发布二进制文件创建 dSYM。

尽管使用 Xcode 从工作区添加框架依赖项，但仍然如此。最终我发现了原因：出于某种原因，这些框架被包含在项目中，它们的位置为“相对于组”。在我确定所有都是“相对于构建产品”之后，它为我解决了这个问题。并不是说这是唯一可能的原因，但值得仔细检查构建日志中的所有路径，因为在这种情况下 Xcode 不会发出任何警告。

![在此处输入图像描述](../Images/af0a8c1cf244eebc9ff35b3da654de17.png)

# c# - Linq to Object/XML 元素不存在

> ID：14860831
> 
> 赞同：3
> 
> 时间：2013-02-13T18:51:56.417
> 
> 标签：c#, xml, linq, linq-to-xml

```
var doc3 = XDocument.Load(@"C:\Projects\ScanBandConfigTesting\ScanBandConfigTesting\ScanBandConfigSmall.xml");

var scanBand = new ScanBand()
{
    ListOfForms = (from form in doc3.Descendants("form")
                    select new ScanBandForm()
                    {
                        FormTypes = form.Attribute("types").Value,
                        ScanBandNumber = form.Attribute("number").Value,
                        ListOfRows = (from row in form.Descendants("row")
                                        select new ScanBandRow()
                                        {
                                            AllowSpaces = row.Element("allowSpaces").Value.ToLower() == "true",
                                            SplitCharacter = row.Element("splitCharacter").Value,
                                            ListOfColumns = (from column in row.Descendants("column")
                                                            select new ScanBandColumn()
                                                            {
                                                                AlwaysKey = column.Element("allwaysKey").IsEmpty ? false : column.Element("allwaysKey").Value.ToLower() == "true",
                                                                DataTypeString = column.Element("dataType").IsEmpty ? string.Empty : column.Element("dataType").Value,
                                                                MatchingFieldName = column.Element("matchingFieldName").IsEmpty ? string.Empty : column.Element("matchingFieldName").Value,
                                                                NonField = column.Element("nonField").IsEmpty ? false : column.Element("nonField").Value.ToLower() == "true",
                                                                RegularExpressionString = column.Element("regularExpression").IsEmpty ? string.Empty : column.Element("regularExpression").Value,
                                                            }).ToList()
                                        }).ToList()
                    }).ToList()
}; 
```

XML

```
<scanBand>
  <form types="FormName" number="1">
    <row>
      <allowSpaces>false</allowSpaces>
      <splitCharacter>&#32;</splitCharacter>
      <column>
        <matchingFieldName>FirstField</matchingFieldName>
        <dataType>CB</dataType>
        <regularExpression></regularExpression>
        <allwaysKey>false</allwaysKey>
        <nonField>false</nonField>
      </column>
      <column>
        <matchingFieldName>SecondField</matchingFieldName>
        <dataType>CB</dataType>
        <regularExpression></regularExpression>
        <allwaysKey>false</allwaysKey>
        <nonField>false</nonField>
      </column>
      <column>
        <matchingFieldName>ThirdField</matchingFieldName>
        <dataType>CB</dataType>
        <regularExpression></regularExpression>
        <!--<allwaysKey></allwaysKey>-->
        <nonField>true</nonField>
      </column>
    </row>
  </form>
</scanBand> 
```

目标是当 .xml 文件中的元素之一不存在时，不会发生这种情况。我试图玩弄 .Any() 但没有成功。

我宁愿不使用 foreach 进行迭代，而是坚持使用 LINQ

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T21:00:23.077

不要使用`Value`属性来获取属性或元素的值。如果节点丢失，您将得到异常。当您转换节点（例如转换为字符串）时，如果节点丢失，您将获得该类型的默认值。您还可以使用`??`运算符为缺少的字符串节点提供您自己的默认值（默认情况下您将获得 null）。

```
result = (string)column.Element("dataType") ?? String.Empty 
```

与布尔值使用相同的技巧 - 我得到`Nullable<bool>`and if it's `null`(node missing) 然后我分配`false`if it is not `null`，然后节点的值成功分配给不可为空的属性：

```
 ListOfForms = 
     (from form in doc3.Descendants("form")
      select new ScanBandForm() {
          FormTypes = (string)form.Attribute("types"),
          ScanBandNumber = (string)form.Attribute("number"),
          ListOfRows = 
              (from row in form.Descendants("row")
               select new ScanBandRow() {
                   AllowSpaces = (bool?)row.Element("allowSpaces") ?? false,
                   SplitCharacter = (string)row.Element("splitCharacter"),
                   ListOfColumns = 
                      (from column in row.Descendants("column")  
                       select new ScanBandColumn() {
                            AlwaysKey = (bool?)column.Element("allwaysKey") ?? false,
                            DataTypeString = (string)column.Element("dataType") ?? String.Empty,
                            MatchingFieldName = (string)column.Element("matchingFieldName") ?? String.Empty,
                            NonField = (bool?)column.Element("nonField") ?? false,
                            RegularExpressionString = (string)column.Element("regularExpression") ?? String.Empty,
                       }).ToList()
                }).ToList()
      }).ToList(); 
```

# prolog - 差异列表不完整

> ID：14860832
> 
> 赞同：5
> 
> 时间：2013-02-13T18:51:59.953
> 
> 标签：prolog, difference-lists

我想将不完整的列表转换为差异列表，反之亦然。

这是将常规列表转换为差异的代码：

```
reg2diff(L,X-Y):-append(L,Y,X). 
```

我怎么去另一个方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T21:58:27.203

不完整的差异列表：

```
inc2diff(L,Z):- 
  (  nonvar(L) 
  -> ( L=[_|T] -> inc2diff(T,Z) ; L=[] -> Z=[] )
  ;  L=Z
  ). 
```

用它作为

```
23 ?- L=[1,2,3|_],inc2diff(L,X).
L = [1, 2, 3|X].

24 ?- L=[1,2,3|Z],inc2diff(L,X).
L = [1, 2, 3|X],
Z = X.

25 ?- L=[1,2,3],inc2diff(L,X).
L = [1, 2, 3],
X = []. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-05T14:24:29.010

```
| ?- listing(dl_list),dl_list([a,b,c,d|X]-X,L).

% file: ...util.pg

dl_list(A - [], A).

L = [a,b,c,d]
X = []

yes 
```

# jquery - jQuery Mobile 加载 gif 在 Windows 7 PhoneGap 应用程序中没有动画

> ID：14860838
> 
> 赞同：2
> 
> 时间：2013-02-13T18:52:23.470
> 
> 标签：jquery, cordova, jquery-mobile, windows-phone-7.1

我正在使用phonegap和jquery mobile开发windows phone应用程序。除了加载图像外，一切正常。加载gif没有动画。是否有任何解决方法可以让jquery mobile加载图像在windows phone 7应用程序中动画？

# c# - 解决 C# 中的歧义引用

> ID：14860842
> 
> 赞同：0
> 
> 时间：2013-02-13T18:52:34.297
> 
> 标签：c#, wcf

我正在一个 WCF 客户端上工作，我有 2 个服务引用。两个服务引用都有一个共同的方法名称。我的两个服务引用都有 GetNames()。因为我必须根据条件实例化，我正在尝试做以下：

```
IF Yes

Serviceclient1.GetNames name1= new Serviceclient1.GetNames();

Else

ServiceClient2.GetNames name2 =new Serviceclient1.GetNames(); 
```

但是即使我指的是两个不同的命名空间，我也会得到模棱两可的参考？

如果有人可以在这里指导我，我会很高兴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:55:58.537

您需要执行以下操作之一：

1) 完全符合条件`Serviceclient1`，如：

```
var name1 = new Namespace.Serviceclient1.GetNames(); 
```

2）添加`using`如下语句：

```
using SomeAlias = Namespace.Serviceclient1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:55:15.850

尝试别名冲突的参考。

```
using ServiceCient2 = Namespace.Serviceclient1; 
```

来自 MSDN，[如何：使用全局命名空间别名](http://msdn.microsoft.com/en-us/library/c3ay4x3d.aspx)

# android - 通过 USB 配置 Android WIFI

> ID：14860843
> 
> 赞同：0
> 
> 时间：2013-02-13T18:52:35.070
> 
> 标签：android, usb, wifi

我有一个带有 WIFI 适配器但没有屏幕和输入设备的 Android 设备。我想在我的本地网络中将它用作运行/提供一些服务的静默服务器，最终可以通过互联网进行配置。服务应用程序将预先安装并在启动时启动。问题是初始配置（主要是加入本地WIFI网络）。

我的想法是：开发一个用于通过 USB 进行初始设置的 Java GUI 应用程序。

假设我让桌面应用程序通过[ADK](http://developer.android.com/tools/adk/index.html)查找 Android 服务并与之通信（一旦成功，我将很乐意在这里分享）。这样我就可以使用我的屏幕和键盘来配置它。现在的问题是：

我如何（在 Android 设备上）获取 Android 设备找到的 WIFI 网络列表以及如何告诉它连接到选定的网络（使用提供的密码）？

有没有更好的方法来实现我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:38:18.200

该[`WifiManager`](http://developer.android.com/reference/android/net/wifi/WifiManager.html)课程应该有帮助：

> 此类提供用于管理 Wi-Fi 连接的所有方面的主要 API。通过调用 Context.getSystemService(Context.WIFI_SERVICE) 获取此类的实例。它处理几类项目：
> 
> *   已配置网络的列表。可以查看和更新​​列表，并且可以修改各个条目的属性。
> *   当前活动的 Wi-Fi 网络（如果有）。可以建立或断开连接，并可以查询有关网络状态的动态信息。
> *   接入点扫描的结果，包含足够的信息来决定要连接的接入点。
> *   它定义了在 Wi-Fi 状态发生任何变化时广播的各种 Intent 操作的名称。
> 
> 这是执行 Wi-Fi 特定操作时使用的 API。要在抽象级别执行与网络连接相关的操作，请使用 ConnectivityManager。

# vim - 如何在创建必要的线条以单独为块留出空间的同时粘贴块？

> ID：14860844
> 
> 赞同：5
> 
> 时间：2013-02-13T18:52:41.767
> 
> 标签：vim

在 VIM 中，在可视模式下拉出文本块，然后粘贴块，将其粘贴到光标给定的所需列之后，但在原地粘贴，覆盖当前行和后续行的内容。

有时我不想要这个，我想要的是粘贴一个带有光标位置给定的缩进的块，但粘贴在新的空行内，而不覆盖文本。

有没有办法做到这一点？

目前，为了实现这一点，我创建了大量的空行，然后粘贴块，消除之后剩余的空行（不是很聪明......）。

注意：我曾经`set virtualedit=all`能够粘贴到上述空行中的任何列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:59:19.630

您可以尝试以下方法。`<Leader>p`无论您的前导键是什么，逐块拉动某些东西，定位光标并点击。

```
function! FancyPaste()
    let paste = split(@", '\n')
    let spaces = repeat(' ', col('.')-1)
    call map(paste, 'spaces . v:val')
    call append(line('.'), paste)
endfunction

nnoremap <Leader>p :call FancyPaste()<CR> 
```

您当然可以将映射更改为您想要的任何内容；这只是一个建议。

**更新：**这是一个接受参数的版本。这让您例如从系统剪贴板粘贴。它还使用`virtcol()`而不是`col()`考虑可能使用的`'virtualedit'`：

```
function! FancyPaste(reg)
    let paste = split(getreg(a:reg), '\n')
    let spaces = repeat(' ', virtcol('.')-1)
    call map(paste, 'spaces . v:val')
    call append(line('.'), paste)
endfunction

nnoremap <Leader>p  :call FancyPaste('"')<CR>
nnoremap <Leader>cp :call FancyPaste('+')<CR> 
```

请记住，它只会缩进空格，而不是制表符。使用适当数量的制表符（如果需要，还有空格）缩进将需要一些额外的代码行，但这是完全可行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:49:28.630

如果我正确理解您想要什么，您可以根据 ex 命令和`=`运算符尝试此操作：

```
nmap <leader>p :put "<cr>'[='] 
```

另一种可能：

```
nmap <leader>p :let @"=@"<cr>]p 
```

这`@"=@"`似乎让 Vim 忘记了被复制的行、字符方式和`]p`重新缩进的粘贴。

[UnconditionalPaste](https://github.com/vim-scripts/UnconditionalPaste)插件也可以帮助你像那样粘贴。

# jquery - 使用数组的 jQuery 可拖动容器未按预期工作

> ID：14860845
> 
> 赞同：7
> 
> 时间：2013-02-13T18:52:45.220
> 
> 标签：jquery, jquery-ui-draggable

我有这段 HTML

```
<div id="workflowEditor" class="workflow-editor">

    <div class="node" class="ui-widget" style="top:20px; left:40px;">
        <div class="ui-widget ui-widget-header ui-state-default">Header test</div>
        <div class="ui-widget ui-widget-content">Test Content</div>
    </div>

</div> 
```

有了这个 CSS

```
.workflow-editor
{
    position: relative;
    overflow: auto;
}

.workflow-editor .node
{
    position: absolute;

    min-width: 64px;
    min-height: 64px;
} 
```

比打电话

```
$(".node", "#workflowEditor").draggable({
    containment: [0, 0, 500, 500]
}); 
```

但是，拖动这个“节点”将允许拖动到负值；似乎`draggable`正在使用浏览器的视口坐标来限制边界框。有没有办法告诉坐标是相对于可拖动的父级的？

**注意**：父母可能会随着时间的推移改变位置。

### ** 编辑*** *

可拖动对象所在的表面相对于其他一些内容。就像 CSS 指定的那样，我需要它是`overflow:scroll;`，因此如果将可拖动对象拖到外部，则将显示滚动条。父母的大小是固定的。我遇到的问题是可拖动对象可以拖动到表面的左侧（或顶部）（因此我丢失了它们）。我希望具有与将容器设置为类似的行为`"parent"`，但允许可拖动对象溢出到父项的右侧/底部。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-16T05:51:30.660

计算节点及其父节点的边界，请 按照[Jquery UI的解释检查](http://jqueryui.com/draggable/#constrain-movement)[jsFiddle 链接](http://jsfiddle.net/rachit_doshi/FhNtt/3/)

```
var containmentX1 = $(".node").parent().offset().left;
var containmentY1 = $(".node").parent().offset().top;
var containmentX2 =  ($(".node").parent().outerWidth() +  $(".node").parent().offset().left - $('.node').outerWidth())
var containmentY2 = ($(".node").parent().outerHeight() +  $(".node").parent().offset().top - $('.node').outerHeight()) 

$(".node").draggable({
    containment:  [containmentX1, containmentY1, containmentX2, containmentY2]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T16:12:41.157

I've had a similar problem - I needed to position "boxes" inside a container, allowing them to overflow to the bottom or the right, but not to the left or top. I also had to support varying the container's position.

Unfortunately, I could not find an elegant solution. As you correctly note, setting the containment via a coordinates array will establish document-related metrics, so we have to work with the position of the container relative to the document.

My little hack was to use the "document" position of the container for the top and left limits (I used jQuery `offset` [1], and a *big enough* value for right and bottom. I used the `dragstart` event [2] to re-read and reset the viewport position of the container (which updated the containment box to the current coordinates of the container, via the `options` method [3]).

```
var $containerEl = $('#container'),
    $draggableEl = $('#my-draggable');

$draggableEl.on('dragstart', function (e) {
    $(e.target).draggable('option',
                          'containment',
                          [ $containerEl.offset().left, $containerEl.offset().top, 15000, 15000 ]);
});

$draggableEl.draggable({
    containment: [ $containerEl.offset().left, $containerEl.offset().top, 15000, 15000 ]
}); 
```

[1] [http://api.jquery.com/offset/](http://api.jquery.com/offset/)

[2] [http://api.jqueryui.com/draggable/#event-start](http://api.jqueryui.com/draggable/#event-start)

[3] [http://api.jqueryui.com/draggable/#method-option](http://api.jqueryui.com/draggable/#method-option)

# asp.net - Asp.net 会话变量混淆了

> ID：14860849
> 
> 赞同：2
> 
> 时间：2013-02-13T18:53:03.043
> 
> 标签：asp.net, vb.net, session, user-controls, session-variables

我有一个使用`UpdatePanel`. 控件本质上是一个带有`Button`. 当用户单击 时`Button`，会打开一个模式弹出窗口，允许他们选择一些值。表的数据（使用 a`Repeater`作为其`DataSource`）作为对象列表存储在部分回发（`UpdatePanel`触发时）之间的会话变量中。如果我只有一个控件，则一切正常，但如果我在同一页面中多次使用此控件，则会话变量中的对象列表将组合在一起，并且不会为每个控件分开。我认为这可能是因为会话变量名称不是唯一的，所以在我调用或使用变量的任何地方，我都会这样做：

```
Dim sessionName as string = Me.UniqueID & "_" & "userNotificationDS"
Session(sessionName) = myListOfObjects 
```

但这并没有改变结果。有人知道我在这里可能做错了什么吗？如果您认为完整的代码会有所帮助，请告诉我。

控制服务器代码：

```
Protected Sub delete_click(ByVal sender As Object, ByVal e As EventArgs)
    Dim btn As LinkButton = CType(sender, LinkButton)
    Dim ds As New List(Of myObject)
    sessionName = Me.UniqueID & "_" & "myDataSet"

    ds = Session(sessionName.ToString)

    Dim id As String = btn.CommandArgument

    ds.RemoveAll(Function(userNotification) userNotification.User.NetworkID.Equals(id))

    Session(sessionName.ToString) = ds

    bindData(ds)
End Sub

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    sessionName = Me.UniqueID & "_" & "myDataSet"

    If (Session(sessionName.ToString) IsNot Nothing) Then
        bindData(Session(sessionName.ToString))
    End If
End Sub  

 Private Function buildPagedSet(ByVal userNotification As List(Of myObject)) As PagedDataSource
    Dim ps As PagedDataSource = New PagedDataSource()

    ps.DataSource = userNotification
    ps.AllowPaging = True
    ps.PageSize = numRows

    Return ps
End Function

  Public Sub bindData(ByVal commentList As List(Of myObject))
    sessionName = Me.UniqueID & "_" & "myDataSet"
    Dim currentPage As Integer = 0
    Dim ps As PagedDataSource
    Dim numLable As Label
    Dim denomLable As Label
    Dim curPage As Integer = 1
    Dim totalPage As Integer = 0

    If (Not myObject Is Nothing) Then

        Try
            ps = buildPagedSet(commentList)
            totalPage = ps.PageCount
            Session(sessionName.ToString) = commentList 
            rowTotal = ps.Count

            'for paging
            If Not (ViewState(Me.UniqueID & "_Page") Is Nothing) Then
                currentPage = Convert.ToInt32(ViewState(Me.UniqueID & "_Page"))
            Else
                ViewState(Me.UniqueID & "_Page") = 1
                currentPage = 1
            End If

            If (currentPage > 0 And currentPage <= ps.PageCount) Then
                ps.CurrentPageIndex = currentPage - 1
                Me.dataRepeateUsers.DataSource = ps
                Me.dataRepeateUsers.DataBind()

            ElseIf (currentPage >= ps.PageCount) Then
                ViewState(Me.UniqueID & "_Page") = Convert.ToInt32(ViewState(Me.UniqueID & "_Page")) - 1
            ElseIf (currentPage <= 0) Then
                ViewState(Me.UniqueID & "_Page") = Convert.ToInt32(ViewState(Me.UniqueID & "_Page")) + 1
            Else
            End If

        Catch ex As Exception
            Throw
        End Try
    Else
        Dim emptySet As New List(Of myObject)
        Me.dataRepeateUsers.DataSource = emptySet
        Me.dataRepeateUsers.DataBind()
    End If

End Sub 
```

控件实例化如下：

```
Me.notifier1.bindData(notificationList) 
```

在此示例中，当用户从 notifier1（delete_click 事件）中删除某些内容时，该对象将从列表中删除，并重新添加到会话中。如果有任何原因导致通知程序 2 的更新面板触发，它将显示与通知程序 1 完全相同的数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:08:03.677

我的预感是您将您的存储`myListOfObjects`在会话中，但在某处重用该对象并对其进行修改并`Session`使用不同的密钥将其存储在另一个中。它可能仍然是为两个`Session`键存储的相同对象。

您可以通过`Session`使用两个不同的键将对象存储在 中来进行简单的测试。然后使用第一个键将其拉出并修改该对象，并且不要将其重新分配回`Session`（无论如何都不需要）。现在从第二个键中拉出另一个对象并查看它。它将匹配修改，因为该对象是同一个对象，只是存储在`Session`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:41:25.847

如果 Kelsey 的预感是正确的，您可以将 myListOfObjects 的每个实例存储在 a 中`Dictionary(Of String, myListOfObjectsType)`，并使用 .UniqueID 作为键（字符串部分）。

# java - 是否可以以编程方式将 Eclipse RCP 按钮设置为“已选中”？

> ID：14860851
> 
> 赞同：1
> 
> 时间：2013-02-13T18:53:25.463
> 
> 标签：java, eclipse-rcp, eclipse-plugin

我想以编程方式设置一个 Eclipse 插件操作（按钮），如下所示：

![在此处输入图像描述](../Images/d552e6e9a903eb13b49336bc231c5e8b.png)

例如，如果用户按下它，我不希望它在某些条件下关闭。

此代码在此处创建操作（按钮）：

```
class MyAction extends Action {
    public MyAction() {
        super(NAME, IAction.AS_CHECK_BOX);
    }

    ...
    Thread.sleep(100); wait a little bit incase there is a thread update issue
    if (condition)
        setChecked(true); // does not work, it does not force the button to appear as depressed. It just keeps toggling.
    ...
} 
```

由于某种原因 setChecked(true) 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:22:31.000

我相信这里的问题是你`setChecked`在`Action.run()`. 由于单击复选框的效果之一是选中它，因此您正在偷偷地尝试取消正在进行的操作。事实上，我敢打赌，框架代码集在`Action.run()`返回后会检查为 true，因此它会阻碍您的更改。

`Action`有一种方法可以让您以更明确的方式控制它。`.run()`与其执行，不如执行[`.runWithEvent(Event)`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/action/Action.html#runWithEvent%28org.eclipse.swt.widgets.Event%29)。此函数传入一个 Event 对象，您可以使用该对象进行更细粒度的控制。

在这种情况下，我认为您想设置[`Event.doit`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Event.html#doit)为 false。从文档：

> 将此字段设置为 false 将取消操作。

***另外的选择***

根据您的条件的计算方式，您可能希望在复选框更改时抢先启用/禁用它。这样，您还可以阻止工具提示或类似内容来解释它被禁用的原因。

# php - 设置列以自动从引用的表中提取数据

> ID：14860852
> 
> 赞同：0
> 
> 时间：2013-02-13T18:53:29.223
> 
> 标签：php, mysql, sql

我在包含许多其他列的表中有一个名为“speeding”的列。此列包含一个整数，它是名为 Speeding 的表上条目的外键。该表有 1-25 列和第一个表中的“speeding”列引用的 id。

除了使用连接之外，我是否可以在“超速”上设置任何设置以使其自动从超速表中提取关联数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:56:18.620

你可以创建一个视图，一个视图基本上是一个存储在 MySQL 服务器上的 SQL 语句，它的作用就像一个表

```
CREATE VIEW ViewName AS
SELECT tbl1.data, tbl2.speeding
FROM tbl1
INNER JOIN tbl2 ON tbl2.key = tbl1.key; 
```

[http://dev.mysql.com/doc/refman/5.0/en/create-view.html](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)

然后，您可以像使用任何表格一样使用视图

```
SELECT data, speeding
FROM ViewName 
```

# cordova - 如何为ios插件传递Phonegap javascript的参数

> ID：14860855
> 
> 赞同：2
> 
> 时间：2013-02-13T18:53:40.063
> 
> 标签：cordova, phonegap-plugins

我的要求是为 iPad 创建 phonegap 组件。
我正在使用 XCode 4.2 和 Phonegap 1.9.0 SDK。

我有一组需要用于 phonegap 的原生 iOS 类文件。我为 iOS 本机代码创建了插件类。我的代码还包含 javascript 代码。我需要通过 javascript 代码调用 iOS 代码。

我的 iOS 代码包含作为数组的参数。我们可以将数组迭代为 objectAtIndex 1、2 等。如何使用以下参数从编写的插件类调用本机代码

插件代码：

```
- (void) myMethod:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options
{
  NSString* callbackId = [arguments objectAtIndex:0];

  CDVPluginResult* pluginResult = nil;
  NSString* javaScript = nil;

  @try {
    NSString* myarg = [arguments objectAtIndex:1];

    if (myarg != nil) {
        pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK];
        javaScript = [pluginResult toSuccessCallbackString:callbackId];
    } 
  } @catch (id exception) {
    pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_JSON_EXCEPTION    messageAsString:[exception reason]];
    javaScript = [pluginResult toErrorCallbackString:callbackId];
  }

    [self writeJavascript:javaScript];
} 
```

本机代码：

```
-(NSArray*)nativeFunctionDisplay:(NSArray*)args; 
```

我需要在插件类中调用这个本机代码

参数值取自 javascript 函数。在 js 文件中我需要调用插件类并需要传递参数。

Javascript.js：

```
var arg1;
var arg2;
var arg 3;

PluginClass.callNativeFunction(<How to pass the arguments here>) 
```

我看到了很多样本​​，但它们被尝试用于获取初始信息，例如成功的警报消息。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:06:45.193

```
var arg1;
var arg2;
var arg3;

PluginClass.callNativeFunction([arg1, arg2, arg3]); 
```

您只需要在 Javascript 中创建一个数组。

Rohde Fischer 为 iOS 写了一些很好的例子

[https://github.com/rohdef/PGPlugins/blob/3_Arguments/www/pluginExample.js](https://github.com/rohdef/PGPlugins/blob/3_Arguments/www/pluginExample.js)

# php - Magento 重写 /lib/ 文件？

> ID：14860858
> 
> 赞同：7
> 
> 时间：2013-02-13T18:53:58.477
> 
> 标签：php, magento

我通过搜索找到覆盖 /lib/ 文件（特别是 /lib/Varien/File/Uploader/）的唯一方法是将文件移动到 /local/Varien/File/ 并在那里进行编辑。

这很好，但我想在我的模块命名空间中拥有修改后的文件。类似的问题，例如如何处理核心文件，需要在 config.xml 中重写它们。是否可以在 config.xml 中重写 /lib/ 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T19:15:57.333

不，这是不可能的。如果您查看 lib/Varien 中的类是如何实例化的，您会发现没有使用工厂方法，而是直接通过名称引用这些类。

# c# - 列出 C# 中所有节点的 XPath

> ID：14860859
> 
> 赞同：0
> 
> 时间：2013-02-13T18:53:57.900
> 
> 标签：c#, html, xpath

我是 XPath 的新手……我希望，给定一个任意的 HTML 文档，我可以提取所有节点的 XPath 表达式列表。例如：

```
html
html/head
html/head/title
html/body
html/body/div
html/body/div/p
... 
```

这是一个[SSCCE](http://sscce.org/)来说明我想要什么：

```
 static void Main(string[] args)
    {
        String html = @"
        <html>
        <head>
            <title>Test</title>
        </head>
        <body>
            <div>
                <p>Test2</p>
            </div>
        </body>
        </html>
        ";

        XmlDocument doc = new XmlDocument();
        doc.LoadXml(html);

        foreach (XmlNode node in doc.ChildNodes)
            ExamineNode(node);

    }

    static void ExamineNode(XmlNode node)
    {
        Console.WriteLine(/* WHAT TO PUT HERE */); // I want to show the path to this node

        foreach (XmlNode childNode in node.ChildNodes)
            ExamineNode(childNode);
    } 
```

我只是不知道要使用什么属性，或者如何计算路径。一种方法可能是使用节点名称并在遍历节点时构建一个字符串......但我认为可能有更好的方法。我正在寻找最好的方法来做到这一点。

类似的问题已经在[这里](https://stackoverflow.com/questions/5643323/get-xpath-for-all-the-nodes)和[这里](https://stackoverflow.com/questions/14274317/extract-xpaths-of-all-nodes-and-then-their-attributes)提出，但我正在寻找有关如何以尽可能简单的方式在 C# 中实现此功能的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:45:38.303

我发现了一个有点[类似的问题](https://stackoverflow.com/questions/241238/how-to-get-xpath-from-an-xmlnode-instance-c-sharp)，并且没有像 node.Path 之类的简单答案（就像我希望的那样），所以我继续进行了一个快速而肮脏的实现。

这是我最终使用的代码：

```
 static void Main(string[] args)
    {
        String html = @"
        <html>
        <head>
            <title>Test</title>
        </head>
        <body>
            <div>
                <p>Test2</p>
            </div>
        </body>
        </html>
        ";

        XmlDocument doc = new XmlDocument();
        doc.LoadXml(html);

        foreach (XmlNode node in doc.ChildNodes)
            ExamineNode(node, "");

        Console.ReadLine();
    }

    static void ExamineNode(XmlNode node, String parentPath)
    {
        String nodePath = parentPath + '/' + node.Name;

        if (!(node is XmlText))
        {
            Console.WriteLine(nodePath); // I want to show the path to this node

            foreach (XmlNode childNode in node.ChildNodes)
                ExamineNode(childNode, nodePath);
        }
    } 
```

它可能不是最有效的（例如不使用 StringBuilder），但它很简单并且可以完成所需的任务。

只是希望有一天有人会发现这很有用。

# ios - Git 子模块、共享代码和 XCode

> ID：14860860
> 
> 赞同：3
> 
> 时间：2013-02-13T18:54:02.857
> 
> 标签：ios, xcode, git, git-submodules

我对使用 git 子模块的共享代码和 XCode 有疑问。

所以，我有消费者应用程序，有它自己的回购。我还有一个 MyLib 应用程序，它有自己的 repo 。MyLib 应用程序包含一些共享代码。

这就是我的 MyLib 的样子：

![MyLib XCode 结构](../Images/e4a039c6679a5fe806def2ae7ede9e18.png)

LibComponents 组包含所有共享代码。MyLib 组包含“演示/示例应用程序”的 AppDelegate 和其他文件。

这是目录结构的样子：

![MyLib 目录结构](../Images/22a319bca6d473ea2b6eaf33486d3ab9.png)

现在，我有一个消费者应用程序，我希望在其中使用“LibComponents”文件夹中的所有文件。我已将 MyLib 作为子模块添加到我的 Consumer 的 git 存储库中。

这是我的消费者应用程序项目的样子：

![消费者 Xcode 项目结构](../Images/45adbf6c3baeafa882321eb680a075d8.png)

此外，这就是我的消费者应用程序的目录结构：

![消费者目录结构](../Images/4751f6621f23b3d8c0cda18ce6408957.png)

现在，无论我是从 MyLib 还是 Consumer**更新**LibComponent 下的文件，并将其推送到 git，它都反映在这两个地方。我是两个存储库的所有者。这是完美的，因为我希望能够在我处理我的主要项目（消费者）时对 MyLib（共享代码）repo 进行最小的更改。

但是，我遇到了新文件的问题。如果我向 MyLib 项目添加一个新文件，将其推送到 git，然后在我的 Consumer 应用程序中拉取更改，尽管本地应用程序有新文件，但 Consumer 应用程序的 Xcode 项目结构不会显示新文件。我知道 Xcode 中的某些文件需要被告知有一个新文件。我的问题是，最好的方法是什么？

在此先感谢您的帮助！

干杯!

# mysql - 为什么我在创建此 SQL 时会出错？

> ID：14860861
> 
> 赞同：0
> 
> 时间：2013-02-13T18:54:05.643
> 
> 标签：mysql, sql

以下 SQL 语句有什么问题：

`create table teamstats (name varchar(10) not null,pos varchar(3) not null,ab numeric(3) not null,hits numberic(4) not null,walks varchar(5) not null,singles varchar(7) not null,doubles varchar7) not null,triples varchar(7) not null,hr numeric(2) not null,so varchar(2) not null);`

我得到：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'numberic(4) not null,walks varchar(5) not nul l,singles varchar(7) not null,doubl' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:56:51.217

您的 SQL 中有两个错误：

1.  hits numberic(4) not null => numberic 不是有效的数据类型

2.  doubles varchar7) not null => 你忘了在 varchar 中打开括号

这是正确的语法：

```
create table teamstats
(
    name varchar(10) not null,
    pos varchar(3) not null,
    ab numeric(3) not null,
    hits numeric(4) not null,
    walks varchar(5) not null,
    singles varchar(7) not null,
    doubles varchar(7) not null,
    triples varchar(7) not null,
    hr numeric(2) not null,
    so varchar(2) not null
); 
```

这是 SQL 小提琴：[http ://sqlfiddle.com/#!2/261351](http://sqlfiddle.com/#!2/261351)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:55:39.110

**错字#1**

```
 doubles varchar7) 
```

应该

```
 doubles varchar(7) 
```

**错字#2**

```
numberic 
```

应该

```
numeric 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:55:59.867

也许`numberic`改成`numeric`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T18:56:22.680

`numeric`拼写错误为`numberic`; 这会阻止 MySQL 将其检测为数据类型，并且它不知道如何进行。您还忘记了双打列中的左括号：

`doubles varchar(7)`

# javascript - Jquery ui：鼠标移出时如何切换备份？

> ID：14860863
> 
> 赞同：1
> 
> 时间：2013-02-13T18:54:12.903
> 
> 标签：javascript, jquery, hover, jquery-hover

我有以下代码。当我将鼠标悬停在下拉框上时，它会打开。

如何使下拉框切换回鼠标悬停？

**中的**CSS**`<head>`**

 **```
body { font-family:Arial, Helvetica, Sans-Serif; font-size:0.75em; color:#000;}
        .desc { color:#6b6b6b;}
        .desc a {color:#0092dd;}
        .dropdown dd, .dropdown dt, .dropdown ul { margin:0px; padding:0px; }
        .dropdown dd { position:relative; }
        .dropdown a {color:0092DD !important;text-decoration:none; outline:none;}
        .dropdown a:visited { color:#0092DD; text-decoration:none; outline:none;}
        .dropdown a:hover { color:#0092DD;}
        .dropdown dt a:hover, .dropdown dt a:focus
            { color:#0092DD !important; border: 1px solid #0092DD;}
        .dropdown dt a {background:#fff url(./img/arrow.png) no-repeat scroll right center; display:block; padding-right:20px;
 border:1px solid #0092DD; width:47px; border-radius:6px;
-moz-border-radius:6px }
        .dropdown dt a span {cursor:pointer; display:block; padding:5px;}
        .dropdown dd ul { background:#ccc none repeat scroll 0 0; border:1px solid #000; color:#0092DD; display:none;
left:0px; padding:5px 0px; position:absolute; top:2px; width:auto; min-width:117px; list-style:none;}
        .dropdown span.value { display:none;}
        .dropdown dd ul li a { padding:5px; display:block; color:#000 !important;}
        .dropdown dd ul li a:hover { background-color:#777; color:#fff !important}
        .dropdown img.flag { border:none; vertical-align:middle; margin-left:10px; }
        .flagvisibility { display:none;} 
```

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >

<head>

    <title>drop down with CSS and jQuery - demo</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
 </head>
 <body>
    <dl id="sample" class="dropdown">
        <dt><a href="#"><span>Actions</span></a></dt>
        <dd>
            <ul>
                <li><a href="#">UK<img class="flag" src="br.png" alt="" /><span class="value">UK</span></a></li>
                <li><a href="#">France<img class="flag" src="fr.png" alt="" /><span class="value">FR</span></a></li>
            </ul>
        </dd>
    </dl>
    <span id="result"></span>
</body>
</html> 
```

**Javascript**也在`<head>`

```
 <script type="text/javascript">
        $(document).ready(function() {
           $(".dropdown img.flag").addClass("flagvisibility");
           $(".dropdown dt a").hover(function() {
                $(".dropdown dd ul").toggle();
            });

             $(".dropdown dd ul li a").click(function() {
                var text = $(this).html();
                $(".dropdown dt a span").html(text);
                $(".dropdown dd ul").hide();
                $("#result").html("Selected value is: " + getSelectedValue("sample"));
                alert(getSelectedValue("sample"));
            });
            function getSelectedValue(id) {
                return $("#" + id).find("dt a span.value").html();
            }

            $(document).bind('hover', function(e) {
                var $clicked = $(e.target);
                if (! $clicked.parents().hasClass("dropdown"))
                    $(".dropdown dd ul").hide();
            });

            $("#flagSwitcher").hover(function() {
                $(".dropdown img.flag").toggleClass("flagvisibility");
            });
        });

    </script> 
```**

# api - 用于 REST api 的 Powershell HTTP POST 文件上传

> ID：14860864
> 
> 赞同：0
> 
> 时间：2013-02-13T18:54:15.950
> 
> 标签：api, rest, post, powershell

我是 Powershell 新手，无法通过 HTTP POST 请求发送文件。除了发送/上传文件外，一切都运行良好。这可以使用我现有的代码吗？

这是我的代码：

```
 # VARIABLES
    $myFile = "c:\sample_file.csv"
    $updateUrl = "http://www.example.com/processor"
    $postData  =  "field1=value1"
    $postData += "&field2=value2"
    $postData += "&myFile=" + $myFile

    # EXECUTE FUNCTION
    updateServer -url $updateUrl -data $postData 
```

```
 function updateServer {
        param(
            [string]$url = $null,
            [string]$data = $null,
            [System.Net.NetworkCredential]$credentials = $null,
            [string]$contentType = "application/x-www-form-urlencoded",
            [string]$codePageName = "UTF-8",
            [string]$userAgent = $null
        );

        if ( $url -and $data ){
            [System.Net.WebRequest]$webRequest = [System.Net.WebRequest]::Create($url);
            $webRequest.ServicePoint.Expect100Continue = $false;
            if ( $credentials ){
                $webRequest.Credentials = $credentials;
                $webRequest.PreAuthenticate = $true;
            }
            $webRequest.ContentType = $contentType;
            $webRequest.Method = "POST";
            if ( $userAgent ){
                $webRequest.UserAgent = $userAgent;
            }

            $enc = [System.Text.Encoding]::GetEncoding($codePageName);
            [byte[]]$bytes = $enc.GetBytes($data);
            $webRequest.ContentLength = $bytes.Length;
            [System.IO.Stream]$reqStream = $webRequest.GetRequestStream();
            $reqStream.Write($bytes, 0, $bytes.Length);
            $reqStream.Flush();

            $resp = $webRequest.GetResponse();
            $rs = $resp.GetResponseStream();
            [System.IO.StreamReader]$sr = New-Object System.IO.StreamReader -argumentList $rs;
            $sr.ReadToEnd();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:30:56.220

两个想法。首先，您似乎正在上传文件名而不是文件的内容。其次，如果您在 POST 中上传文件的内容，您可能需要使用类似`[System.Web.HttpUtility]::UrlEncode()`. 另外，请查看我[对这个相关 SO 问题的回答](https://stackoverflow.com/questions/12251965/rapidshare-api-with-powershell)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:52:30.883

[我在这里](http://joe-pruitt.sys-con.com/node/1006737/mobile)找到了解决这个问题的方法。我想我可能在最初构建我的脚本或其他地方的一个片段时遇到过这个问题，因为它与我所拥有的几乎相同，只是更彻底。

# c - 来自 uri 的 rtsp 服务器

> ID：14860868
> 
> 赞同：2
> 
> 时间：2013-02-13T18:54:21.133
> 
> 标签：c, rtsp, gstreamer

我正在尝试创建一个从 uri 接收流的管道，添加一个 textoverlay 并创建一个新流。

当我尝试这个时：

```
str ="videotestsrc !" 
            "textoverlay text=\"It Works!!!!\" color=4 valign=top halign=right !" 
            "video/x-raw-yuv,width=640,height=480,framerate=10/1 ! " 
            "x264enc ! queue ! rtph264pay name=pay0 pt=96 !" 
```

它工作得很好，但是当我从 uri 尝试时：

```
str = "uridecodebin uri=http://otp1.rtp.pt:80/liverepeater/smil:rtp1.smil/playlist.m3u8 !" 
            "textoverlay text=\"It Works!!!!\" color=4 valign=top halign=right !" 
            "video/x-raw-yuv,width=640,height=480,framerate=10/1 ! " 
            "x264enc ! queue ! rtph264pay name=pay0 pt=96 !" 
```

它不起作用..

有人知道为什么它不起作用吗？

我的完整代码：

```
#include <gst/rtsp-server/rtsp-server.h>
#include <gst/gst.h>

static gboolean timeout (GstRTSPServer * server, gboolean ignored){
    GstRTSPSessionPool *pool;
    pool = gst_rtsp_server_get_session_pool (server);
    gst_rtsp_session_pool_cleanup (pool);
    g_object_unref (pool);
    return TRUE;
}
int main (int argc, char *argv[]){
    GMainLoop *loop;
    GstRTSPServer *server;
    GstRTSPMediaMapping *mapping;
    GstRTSPMediaFactory *factory;

    gst_init (&argc, &argv);

    loop = g_main_loop_new (NULL, FALSE);

    server = gst_rtsp_server_new ();

    mapping = gst_rtsp_server_get_media_mapping (server);

    factory = gst_rtsp_media_factory_new ();

    gchar *str= "( "
            "uridecodebin uri=http://otp1.rtp.pt:80/liverepeater/smil:rtp1.smil/playlist.m3u8 !"
            "textoverlay text=\"It Works!!!!\" color=4 valign=top halign=right !"
            "video/x-raw-yuv,width=640,height=480,framerate=10/1 ! "
            "x264enc ! queue ! rtph264pay name=pay0 pt=96 !"
            ")";
    gst_rtsp_media_factory_set_launch (factory, str);
    gst_rtsp_media_mapping_add_factory (mapping, "/test", factory);
    g_object_unref (mapping);

    if (gst_rtsp_server_attach (server, NULL) == 0)
        goto failed;

    g_timeout_add_seconds (2, (GSourceFunc) timeout, server);

    g_main_loop_run (loop);

    return 0;

failed:
    {
        g_print ("failed to attach the server\n");
        return -1;
    }
} 
```

问候亚历克斯

# wordpress - Wordpress 帖子中的第一张图片不会居中

> ID：14860872
> 
> 赞同：0
> 
> 时间：2013-02-13T18:54:36.897
> 
> 标签：wordpress, image, css-float, centering

`<center></center>`在我的一些帖子（不是全部）中，尽管我已经添加了标签，但第一张图片仍然保持浮动。有人可以帮我弄清楚为什么会这样。此处示例：[http ://renegadechicks.com/twelve-inspiring-centerpieces-3](http://renegadechicks.com/twelve-inspiring-centerpieces-3)

下面是我的CSS：

```
/*
Theme Name: StyleWeekly
Theme URI: http://cloverthemes.com/
Author: http://cloverthemes.com/
Author URI: http://cloverthemes.com/
Description: Style Weekly
Version: 1.2

Tags: magazine, beauty, style, fashion
*/

/* =Reset default browser CSS. Based on work by Eric Meyer: http://meyerweb.com/eric/tools/css/reset/index.html
-------------------------------webs------------------------------- */

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pbackgre,
a, abbr, acronym, address, big, cite, code,
del, dfn, font, ins, kbd, q, s, samp,
small, strike, sub, sup, tt, var,
dl, dt, dd, ol, ul, li,article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section,fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td, br {
    border: 0;
    font-family: inherit;
    font-size: 100%;
    font-style: inherit;
    font-weight: inherit;
    margin: 0;
    outline: 0;
    padding: 0;
    vertical-align: baseline;
}

:focus { /* remember to define focus styles! */ 
    outline: 0;
}

body {
    line-height: 1;
}

ol, ul {
    list-style: none;
}

table { /* tables still need 'cellspacing="0"' in the markup */
    border-collapse: separate;
    border-spacing: 0;
}

caption, th, td {
    font-weight: normal;
    text-align: left;
}

blockquote:before, blockquote:after,
q:before, q:after {
    content: "";
}

blockquote, q {
    quotes: "" "";
}

a img {
    border:5px solid #FBDDDF;
}

img.centered, .aligncenter, div.aligncenter {
    display: block;
    margin-left: auto;
    margin-right: auto;
    }

img.alignright {
    padding: 4px;
    margin: 0 0 2px 7px;
    display: inline;
    }

img.alignleft {
    padding: 4px;im
    margin: 0 7px 2px 0;
    display: inline;
    }

.alignright {
    float: right;
    }

.alignleft {
    float: left;
    }

.box img { display: block; margin: auto; }

img {
   display: block;
   width: auto;
   margin: auto;
}

small {font-size:11px;}
/* Floating 
---------------------------------------------------------------- */
.alignleft {
    float: left;
    margin: 0 10px 10px 0;
}
.alignright {
    float: right;
    margin: 0 0 0 10px;
}
.aligncenter {
    display: block;
    margin: 0 auto 10px;
}
.left{float:left;}
.right{float:right;}

/* Clear Floats 
---------------------------------------------------------------- */
.clearfix:after { visibility: hidden; display: block; font-size: 0; content: " "; clear: both; height: 0; }
* html .clearfix             { zoom: 1; } /* IE6 */
*:first-child+html .clearfix { zoom: 1; } /* IE7 */

/* Global
-------------------------------------------------------------- */
body {
    color: #444;
    font-family: "Segoe UI","Helvetica","Arial",sans-serif;
    font-size: 16px;
    line-height: 1.5em; 
    background: #000 url("images/graphicBg.jpg") no-repeat top center;
}

#inner {
background-color: #fff;
border: 3px solid #F10C6A;
padding: 20px}

#logos {
     display:none;
}

#linkwithin_logo_0 {
        display: none;
        padding-below: 5px;
}

#post-131 .st_facebook_large, #post-131 .st_twitter_large, #post-131 .st_pinterest_large, #post-131 .st_linkedin_large, #post-131 .st_email_large, #post-131 .st_sharethis_large, #post-131 .st_fblike_large {display: none;}

.stMainServices st-facebook-counter {
        padding-bottom:15px;
}

.c-1 {
float: left; padding-top: 20px;width:650px}

.c-1 .bd {
background: none}

h1,h2,h3,h4,h5,h6 {color:#cc0066; font-weight: normal;font-family:Georgia,"Times New Roman",Times,serif; padding-bottom: 10px;
}

h1 {
    font-size: 40px;
}

h2 {
    font-size: 30px;
}

h3 {
    font-size: 30px; padding-top: 5px;
}

h4 {
    font-size: 30px;
}

h5,h6 {
    font-size: 30px;
}

pre,code,kbd,samp,tt {mos
    font: 16px/1.385 "Courier New", Monospace, serif;
}

/* Hyperlinks
------------------------------------------------------------ */
a,
a:visited {
}

a:hover {
    text-decoration: underline;
}

a img {
    border: 5px solid #FBDDDF;
}

.imagelogo {
    border:none;
}

h1 a,h2 a,h3 a,h4 a, h5 a, h6 a {
    text-decoration: none; color: #
}

h1 a:hover,h2 a:hover,h3 a:hover,h4 a:hover,h5 a:hover,h6 a:hover {
    text-decoration: underline; color: #0AC6F5;
}

/* Input Form & TextArea 
---------------------------------------------------------------- */
input, textarea {
    border-color: #ccc #efefef #efefef #ccc;
    border-width: 1px;
    border-style: solid;
    color: #777;
    padding: 6px;
}

input:focus {
    background: #ffffff;
}

/* Color
-------------------------------------------------------------- */
a,
a:visited, #logo .site-title a {
    color: #cc0066;border:none !important;
}

#nav, #nav li li a, #nav li li a:link, #nav li li a:visited{ text-transform:uppercase; }

.home-columns h3, .home-columns h4, a:hover {color: #0AC6F5;}

.home-columns a {text-decoration:none;}

#nav li a {color:#000000;}

#nav li a:hover {        
color:#0AC6F5;
}
#nav li li a:hover, #nav li li a:active{background:rgba(0, 0, 0, 0.50);text-transform: uppercase;}

#nav li li a, #nav li li a:link, #nav li li a:visited {
}

#nav { }

#nav ul li{ }
#nav ul li a { 
color: #fff}

#nav ul li ul li,#nav ul li ul li a  {
    border: none;
}

/* Padding
---------------------------------------------------------------- */
.pl20{padding-left:20px;}
.pl10{padding-left:10px;}
.pb10{padding-bottom:10px;}
.pb20{padding-bottom:20px;}
.pr20{padding-right:20px;}
.bd{background: url("images/dot.png") repeat-x scroll left bottom transparent;}
/* Header
---------------------------------------------------------------- */
#header {

}
#header .wrap {
    /*background: url("images/topbanner.png") no-repeat scroll 350px 43px transparent;*/
    margin: 0 auto;
    overflow: hidden;
    width:1012px;
    padding: 40px 0 20px 0px;
    border-bottom: 1px solid #fff;
}
#logo h1, h1{
    font-size: 35px;
    line-height: 40px;
}   
#logo {
    float:left;
}

#logo .site-title a , .site-title a{
    color: #009999;
    font-weight: normal;
    font-family: "Georgia";
    display: block;
    float: left;
    font-size: 48px;
    line-height: 50px;
    margin: 0;
    padding: 10px 0 0;
    text-decoration: none;
    width: 380px;
}

#logo .site-title a:hover  {
    text-decoration:none;
}

#description {
    color: #FFFFFF;
    font-size: 12px;
    font-style: italic;
    font-weight: normal;
    margin: 0;
    padding: 0 0 0 10px;
    display: block;
    height: 0;
    overflow: hidden;
    width: 0;
}

#header-right{
    padding: 0px 0 0;
    float:right;
    width:270px;
    }

/* Nav
---------------------------------------------------------------- */
#nav{border-bottom-style: inherit;height: 36px; text-transform: uppercase; width:1012px;
}
.menu-main-container, .menu{margin:0 auto; }
#nav li a .sf-sub-indicator{
    width: 11px;
    height: 32px;
    top: 18px;
    right: 0px;
    text-indent: -9999px;
    overflow: hidden;
    position: absolute;
}
#nav li a:hover .sf-sub-indicator{
}
#nav li li a .sf-sub-indicator {
    top: 12px;
}   
#nav ul {   
    float: left;
    list-style: none;
    margin: 0;
}
#nav .sub-menu {
}
#nav .sub-menu .sub-menu{
    background: transparent !important;
}
#nav li {
    float: left;
    list-style: none;
    padding: 0;
}

#nav li a {
    display: block;
    font-family: Helvetica,sans-serif;
    text-transform: uppercase;
    font-size: 14px;
    font-weight: 400;
    line-height: 20px;
    margin: 0;
    padding: 11px 19px;
    position: relative;
    text-decoration: none;
}
#nav .current-menu-item a {
}
#nav li a:hover, #nav li a:active {
}

#nav li li a, #nav li li a:link, #nav li li a:visited {
    font-size:12px;
    line-height: 20px;
    width: 132px; 
    margin: 0;
    padding:7px 21px 7px 13px;
    text-transform:uppercase;
    position: relative;
}

#nav li li a:hover, #nav li li a:active {color:#fff;
}

#nav li ul {
    z-index: 9999;
    position: absolute;
    left: -999em;
    height: auto;
    width: 166px;
    margin: 0;
    padding: 0;
        background:#c06;
        text-transform:uppercase;
}

#nav li ul ul {
    margin: -35px 0 0 166px;
}

#nav li:hover ul ul, #nav li:hover ul ul ul, #nav li.sfHover ul ul, #nav li.sfHover ul ul ul {
    left: -999em;
}

#nav li:hover ul, #nav li li:hover ul, #nav li li li:hover ul, #nav li.sfHover ul, #nav li li.sfHover ul, #nav li li li.sfHover ul {
    left: auto;
}

#nav li:hover, #nav li.sfHover { 
    position: static;
}

#nav li a span {
    color:#999;
    display: block;
    font-size: 10px;
    line-height: 14px;
}

/* Main
---------------------------------------------------------------- */
#wrapper{margin:0 auto; width:1012px; padding:0px;}h2
#home-third-left{width:660px;}
#home-sidebar{width:300px; float:right;}

#content-sidebar{width:980px;}
#content{width:660px; float:left; min-height:600px;}

/* Homepage Elements
---------------------------------------------------------------- */
#home-top .a-left ul{margin-left:-3px;}
#home-top .a-left li{float:left; padding-left:4px;}
#home-second h3{font-size:32px;}
#home-top .entry-excerpt p{font-size:13px; font-family:Georgia,"Times New Roman",Times,serif; line-height:22px;width:205px;float:left}
#home-top {padding-bottom: 36px;}

.a-left h3 {padding:10px 0px 10px 0px;font-family: 'Cookie', cursive;}
.a-left h3 a{color:#000000; font-size:45px;}
.a-left{padding-bottom: 5px;}
.a-left{width:660px;}
.a-right p{padding:0 40px 10px 10px;}
.a-right{width:300px; }

.home-post{padding-bottom:15px;margin-bottom:20px; min-height: 135px !important;font-size: 13px;line-height: 22px;}

.home-category {
float:left;
width:635px;
}

.home-category h2{font-size:40px;padding-bottom:20px;}
.small{font-size:10px; color:#999;}
.b-1{width:638px; float:left; padding-right: 4px;padding-top: 25px;}
.b-2{width:400px; float:left;}
.firstpost{padding-bottom:10px;margin-bottom:5px;}
.firstpost .entry-excerpt {font-size: 13px;line-height: 22px}
.b-3{width:445px;float:right; /*font-size:11px; line-height:18px;*/}

.b-1 h3 {line-height:28px;}

.c-1-post {width:200px; margin-left: 20px;margin-bottom:5px}
.c-1 h3{font-size:13px !important;padding-top:5px !important;line-height:20px;padding-bottom: 0px !important;}

.c-2-1{width:260px;}
.c-2-1 h3, .c-2-2 h3, .c-3 h3, .d-1 h3{font-size:26px; padding-bottom:10px;}

.c-2-2{width:380px; }
.c-2-2-post{margin-bottom: 15px;min-height: 100px !important;padding-bottom: 15px;}
.c-2-2 p{line-height:22px;font-size:13px}

.c-3-left, .c-3-right{width:320px;}

.featured-left{float:left; width:320px;}

.block-small-item{
    height: 90px;
    margin-bottom: 13px;
    overflow: hidden;
    padding-bottom: 13px; width:320px}

.block-meta {
    color: #888888;
    display: block;
    font-size: 11px;
    margin-bottom: 4px;
}
.block-meta a {
    color: #888888 !important;
}
.block-meta a:hover {
    color: #333333 !important;
    text-decoration: none;
}

/* Post Page Style
---------------------------------------------------------------- */
.breadcrumbs {background: none repeat scroll 0 0 #F6F6F6;color: #666666;font-size: 11px;margin: 0 0 10px;padding: 3px 15px; display:none;}
.entry-content p{color: #464646;font-family: Georgia,Sans-serif; margin: 0 0 16px; line-height:24px; font-size: 13px;}

.entry-title{margin-bottom:13px;margin-top: 3px;background: url("images/dot.png") repeat-x  scroll left bottom transparent;}

.entry-title h1 { color: #000000!important; }

.entry-content h2, .entry-content h3{ font-size: 32px;}

.entry-content ol, .entry-content ul {margin: 0;padding: 0 0 20px;}

.entry-content ol {margin: 0;}

.entry-content ul li {list-style-type: square;margin: 0 0 0 10px;}

.entry-content ol li {list-style: decimal outside none;margin: 0 0 0 25px;}

.entry-content ol ol, .entry-content ul ul {padding: 0;}

.entry-content li{padding:0 0 5px 0;}
.entry-content .wp-caption-text{color: #666666;font-size: 11px;font-style: italic;line-height: 16px;margin: 0;text-align: center;}
.post-meta {
    background-color: #F6f6f6;
    border-radius: 5px 5px 5px 5px;
    clear: both;
    color: #666666;
    font-size: 11px;
    padding: 7px 10px 5px;
    margin-bottom: 15px;
    display: none;
}

.entry-content clearfix {
    padding-top: 10px;
}

.post-info {
    font-size: 12px;
    margin-bottom: 10px;
    display: inline;
    float: left;
    padding-bottom: 15px;
    font-family: verdana;
    color: black;
}

.linkwithin_posts a {
    background: none !important;
    border: none !important;
    padding-right: 5px !important;
}

.linkwithin_hook {
    background: none repeat scroll 0 0 transparent;
    color: #;
    font-weight: bold;
    letter-spacing: -0.25px;
    line-height: 45px;
    margin-bottom: 10px;
}

.linkwithin_text {
    color: #cc0066;
    font-size: 38px;
    padding-left: 10px;
}

.linkwithin_title {
    color: #464646!important;
    font-family: verdana, sans-serif !important;
    font-size: 12px !important;
    line-height: 14px !important;
    text-decoration: none;
}

.linkwithin_title:hover {
    color: #c06!important;
    text-decoration: underline !important;
}

.post-info .post-author {
      background: url("images/post-author.png") no-repeat scroll left center transparent;
      padding: 5px 16px 3px 61px;
      font-size: 12px;
      font-style: italic;
}
.post-info .time {
    font-style:italic;

}en
.post-comments {
    background: url("images/post-comments.png") no-repeat scroll left center transparent;
    padding: 6px 20px 6px 40px;
}

#disqus_thread {
    padding-top: 50px;
}

.cat{
    background: url("images/icon-categories.png") no-repeat scroll left top transparent;
    padding: 3px 0 3px 22px; display: none;
    }

.tags{
    background: url("images/icon-tags.png") no-repeat scroll left top transparent;
    margin: 0 0 0 10px;
    padding: 3px 0 3px 20px; display: none;
    }   
blockquote {background: url(images/q.png) no-repeat;border: none;margin: 5px 15px;padding: 15px 20px 10px 40px;}

blockquote p {color: #666;font-style: italic;}

.page-template-page-fullwidth-php #content{width:980px;}

#social{width:660px; padding:10px 0 5px; display:none;}

/* Pre- Next
---------------------------------------------------------------- */ 
#nav-below {padding-bottom:20px;}
.nav-previous a, .nav-next a {background: none repeat scroll 0 0 #0197B2;color: #FFFFFF;float: left;width: 100px;
    font-weight: bold;display: block;font-size:12px;line-height:26px;font-family:arial,verdana,sans-serif;
    height: 25px;text-align: center;width: 80px;overflow: hidden;}

.nav-previous a:hover, .nav-next a:hover{background:#009999;}
#nav-below .nav-previous a, #nav-below .nav-next a {
    padding: 0 10px;
    width: 45%;
}
.nav-previous a {
    float: right;
}
.nav-next a {
    float: left;
}
.nav-next a:hover, .nav-previous a:hover {
    text-decoration: none;
}

/* Related Posts
---------------------------------------------------------------- */
.related-posts{  font-size:12px; line-height:18px;}
.relateimage img {border: 1px solid #EEEEEE;
    height: 150px;
    width: 150px;}

.listing {float: left;
    padding-left: 20px; 
    width: 150px; }
.related-posts-title {
    color: #0091A8;
    margin:20px 0 10px 22px;
    padding-bottom: 15px;}

/* Sidebar
---------------------------------------------------------------- */
#sidebar{
    display: inline;
    float: right;
    line-height: 20px;
    width: 300px;
}

#sidebar h4, #latest-posts h4 {
    /*background-color: #0AC6F5;*/
    background: url("images/banner.jpg") no-repeat top center;
    color: #fff;
        font-size: 36px;
    text-align:center;
    line-height: 38px;
    padding: 7px 0px 0px 3px;
    margin: 0 0 5px;
}
#sidebar p{margin-bottom:10px;}
.widget-wrap {
    margin: 0 0 10px;
}

.widget{
    margin: 0 0 30px;
}

.widget-area ul li {
    border-bottom: 1px dotted #CCCCCC;
    list-style-type: none;
    padding: 0 0 5px 5px;
    word-wrap: break-word;
font-size: 13px;
}

.widget-area  li  li, .widget-area li li li{
    border-bottom: 0 none;
    list-style: square outside none;
    margin: 0 0 0 20px;
    padding: 5px 0 0 0;
}

#sidebar .flickr-photos  li{
    float: left;
    background:none;
    list-style-type: none;
    padding:8px;
}

#sidebar .twitter h4{
    background: url("images/tt.png") no-repeat scroll left center transparent;
    line-height: 30px;
    padding: 0 0 0 40px;
}

#sidebar_left{
    float: left;
    width:160px;

#sidebar_left a {
         text-decoration:none !important;}
}

a:-webkit-any-link {
         text-decoration:none !important;}
}

#header-right a:-webkit-any-link {
        padding-right: 15px;
}

#sidebar_right{
    float: right;
    width:120px;
}

.twitter h4 {
    background: url("images/tt.png") no-repeat scroll left center transparent;
    padding: 0 0 6px 35px;}

/* archive
---------------------------------------------------------------- */
.archive .post img, .search .post img {width:150px; height:auto;}
#archive-title {padding-bottom:15px; font-size:22px; display:none;}

/* search
---------------------------------------------------------------- */
input[type="button"], input[type="submit"] { border: none;color: #FFFFFF;cursor: pointer;font-size: 13px;font-weight: normal;text-decoration: none; }

input[type="button"]:hover, input[type="submit"]:hover {background-color: #565656; }

input, select, textarea,.sticky, .taxonomy-description {border: 1px solid #DDDDDD;}

#search {width: 265px;
padding-left: 18px;
padding-top: 5px;
padding-bottom: 10px;}

#search .s {
    background: #c06;
    border: medium none;
    color: #fff;
    font-size: 12px;
    padding: 5px 8px;
    width: 157px;float: left;
}

#search .search-submit{background: url("images/s.png") no-repeat scroll center center transparent;
    border: medium none;
    cursor: pointer;
    float: right;
    height: 28px;
    margin: 0;
    right: 0;
    top: 0;
    width: 39px;}

#search div {
    background: #c06;
    height: 27px;
    position: relative;
    border: 2px solid #0AC6F5;
}

/* Pagination
---------------------------------------------------------------- */
.ct-paginate {padding: 10px 0 20px 0; overflow:hidden; clear:both; font-family: arial;}
.ct-paginate a {border:1px solid #eee;  margin-right:5px; padding:4px 8px; text-align:center; text-decoration:none;}
.ct-paginate .ct-title {color:#555; margin-right:4px;}
.ct-paginate .ct-gap {color:#999; margin-right:4px;}
.ct-paginate a:hover, .ct-paginate a:active, .ct-paginate .ct-current {color:#fff; background: url("images/navbg.png") repeat scroll 0 0 #333333;border:1px solid #ddd; margin-right:5px;padding:4px 8px;}

/* Footer
---------------------------------------------------------------- */
.footer-info {padding:30px 0;}
.footer-info .right{width:1012px;text-align:center;}

/* =Comments
------------------------------------------------------------------ */
#comments {padding:20px 0 0 0;}
#comments h3,#respond h4{color: #0091A8;
}
#comments a{
    text-decoration:none;
}
#comments a:hover{
    text-decoration:underline;
}

#comments input:hover, #commentstextarea:hover{
    background: #f5f5f5;
}
#commentform {
    margin: 5px 10px 0px 0px;
}

#commentform textarea {
    width: 90%;
    padding: 5px;
    font-size:13px
}

#respond:after {
    content: "."; 
    display: block; 
    height: 0px; 
    clear: both; 
    visibility: hidden;
}

#commentform p {
    margin: 20px 0;
}

#commentform #submit, .wpcf7-submit{
    -moz-box-shadow:inset 0px 1px 0px 0px #fbafe3;
    -webkit-box-shadow:inset 0px 1px 0px 0px #fbafe3;
    box-shadow:inset 0px 1px 0px 0px #fbafe3;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #f03c96), color-stop(1, #cc0066) );
    background:-moz-linear-gradient( center top, #f03c96 5%, #cc0066 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f03c96', endColorstr='#cc0066');
    background-color:#f03c96;
    -moz-border-radius:17px;
    -webkit-border-radius:17px;
    border-radius:17px;
    border:1px solid #ee1eb5;
    display:inline-block;
    color:#ffffff;
    font-family:Arial;
    font-size:13px;
    padding:6px 24px;
    text-decoration:none;
    text-shadow:1px 1px 0px #ff0080;
}
#commentform #submit:hover, .wpcf7-submit:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ef027d), color-stop(1, #ff5bb0) );
    background:-moz-linear-gradient( center top, #ef027d 5%, #ff5bb0 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ef027d', endColorstr='#ff5bb0');
    background-color:#ef027d;
}
#commentform #submit:active {
    position:relative;
    top:1px;
}

.commentlist {
    margin: 0px;
    padding: 0px;
}

.commentlist ol {
    margin: 0px;
    padding: 10px;
}

.commentlist li {
    margin: 15px 0;
    padding:15px;
    list-style: none;
}
.commentlist li ul li { 
    margin: 10px;
}

.commentlist p {
    margin: 10px 5px 10px 0px;
    padding: 0px;
}

.commentlist li ul li {
    font-size: 12px;
}

.commentlist li .avatar { 
    background-color: #FFFFFF;
    border: 1px solid #EEEEEE;
    box-shadow: 0 0 2px rgba(0, 0, 0, 0.1);
    float: left;
    margin: 0 10px 0 0;
    padding: 3px;
}

.commentlist cite, .commentlist cite a {
    font-style: normal;
    font-size: 14px;
}

.commentlist p {
}

.commentmetadata {
    font-weight: normal;
    padding:5px 0 0 0;
}

.alt {
    margin: 0px;
    padding: 10px;
}
.children { 
    margin: 0px;
    padding: 0px;
}

.nocomments {
    text-align: center;
    margin: 0px;
    padding: 0px;
}

.commentmetadata {
    font-size: 11px;
    margin: 0px;
    display: block;
}

.navigation {
    display: block;
    text-align: center;
    margin-top: 10px;
    margin-bottom: 40px;
}

.thread-alt {
    background: #FFFFFF;
    margin: 0px;
    padding: 0px;
}

.thread-even {
    background: #FFFFFF;
    margin: 0px;
    padding: 0px;
}

.depth-1 {
    border: 1px solid #BBBBBB;
    margin: 0px;
    padding: 0px;
}

.even, .alt {
    border:1px solid #eeeeee;
    border-radius: 5px 5px 5px 5px;
}
em.date, .comment strong {
    font-weight:normal;
    color:#9E825F;
    line-height:24px;
    display:block;
    font-style: normal;
} 

/* Socialmedia
---------------------------------------------------------------- */ 

/* Additional
---------------------------------------------------------------- */

/* Styling posts
---------------------------------------------------------------- */

.one_half, .one_third, .two_third, .three_fourth, .one_fourth {
    float: left;
    line-height: 21px;
    margin-bottom: 20px;
    margin-right: 4%;
}
.one_half {
    width: 48%;
}
.one_third {
    width: 30.6%;
}
.two_third {
    width: 65.3%;
}
.one_fourth {
    width: 22%;
}
.three_fourth {
    width: 74%;
}
.last {
    clear: right;
    margin-right: 0 !important;
}

.dropcap {
    color: #383838;
    float: left;
    font-size: 40px;
    margin-right: 6px;
    padding-top: 7px;
    position: relative;
    text-transform: uppercase;
    top: 5px;
}

.highlight1 {
    background: none repeat scroll 0 0 #F6F67A;
}
.highlight2 {
    background: none repeat scroll 0 0 #000000;
    color: #CCCCCC;
}

.mosaic-block {
    float:left;
    position:relative;
    overflow:hidden;
    width:210px;
    height:120px;
    /*background:#111 url(images/progress.gif) no-repeat center center;
    -webkit-box-shadow:0 1px 3px rgba(0,0,0,0.5);*/
        border-radius: 15px;
}

    .mosaic-backdrop {
        display:none;
        position:absolute;
        top:0;
        height:100%;
        width:100%;
        /*background:#111;*/
    }

    .mosaic-overlay {
        display:none;
        z-index:5;
        position:absolute;
        width:100%;
        height:100%;
        background:#111;
    }

.bar .mosaic-overlay {
            bottom:-100px;
            height:40px;
            background:url(images/bg-black.png);
        }
.details{ margin:3px 10px; color:#eee; font-size:11px;} 

.footer-links-copyright, .footer-links-copyright a{ color:#0AC6F5; font-size:11px;padding-right:10px;}
.attachment1{ text-align:center;}
#content .gallery img, #gallery-listing img{background: none repeat scroll 0 0 #DDDDDD;border: 5px solid #FFFFFF; box-shadow: 0 1px 2px #CCCCCC;margin: 5px; padding: 1px; max-width:160px; height:auto;}

#content .cb_pin_images {
margin-left: auto !important;
margin-right: auto !important;
}
.entry-content img {max-width:100%; height:auto; border: 5px solid #FBDDDF;}

.first-thumb img {
box-shadow:5px 5px 1px #888;}

.hfeed img.thumbnail {
    float: left; height: 160px;
        }

.archive .hfeed article {
    margin-left: 20px;
    float:left;
        width: 470px;}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:01:14.883

我为第一张图片更改了这个 HTML

```
<center><a href="http://renegadechicks.com/wp-content/uploads/2013/02/centerpiece15.jpg
<img class="size-full wp-image-10673 aligncenter" alt="centerpiece15" src="http://renegadechicks.com/wp-content/uploads/2013/02/centerpiece15.jpg" width="361" height="559">
</a></center> 
```

在 chrome 中对此：

```
<p style="clear: both;">
<a href="http://renegadechicks.com/wp-content/uploads/2013/02/centerpiece15.jpg">
<img class="size-full wp-image-10673 aligncenter" alt="centerpiece15" src="http://renegadechicks.com/wp-content/uploads/2013/02/centerpiece15.jpg" width="361" height="559">
</a>
</p> 
```

它似乎居中就好了。由于某种原因，我不得不关闭标签上的文本装饰，然后再打开它才能工作......

基本上，我用 < p> 标签替换了 < center > 标签，并确保清除之前设置的所有浮动。

# css - 如何使用 Less 编译器将十六进制颜色转换为 rgba？

> ID：14860874
> 
> 赞同：136
> 
> 时间：2013-02-13T18:54:43.933
> 
> 标签：css, less

我有以下代码：

```
@color : #d14836;

.stripes span {
    -webkit-background-size: 30px 30px;
    -moz-background-size: 30px 30px;
    background-size: 30px 30px;
    background-image: -webkit-gradient(linear, left top, right bottom,
        color-stop(.25, rgba(209, 72, 54, 1)), color-stop(.25, transparent),
        color-stop(.5, transparent), color-stop(.5, rgba(209, 72, 54, 1)),
        color-stop(.75, rgba(209, 72, 54, 1)), color-stop(.75, transparent),
        to(transparent)); 
```

我需要转换`@color`为`rgba(209, 72, 54, 1)`.

所以我需要在我的代码中用一个从我的变量`rgba(209, 72, 54, 1)`生成一个值的 Less 函数替换。`rgba()``@color`

我怎样才能用更少的东西做到这一点？

* * *

## 回答 #1

> 赞同：360
> 
> 时间：2013-11-25T21:32:11.197

实际上，Less 语言带有一个名为`fade`. 您传递一个颜色对象和绝对不透明度 %（较高的值意味着透明度较低）：

```
fade(@color, 50%);   // Return @color with 50% opacity in rgba 
```

* * *

## 回答 #2

> 赞同：107
> 
> 时间：2013-02-13T22:00:42.990

如果您不需要 alpha 键，您可以简单地使用颜色的十六进制表示。alpha 为“1”的 rgba 颜色与十六进制值相同。

这里有一些例子来证明：

```
@baseColor: #d14836;

html {
    color: @baseColor;
    /* color:#d14836; */
}

body {
    color: rgba(red(@baseColor), green(@baseColor), blue(@baseColor), 1);
    /* color:#d14836; */
}

div {
    color: rgba(red(@baseColor), green(@baseColor), blue(@baseColor), 0.5);
    /* rgba(209, 72, 54, 0.5); */
}

span {
    color: fade(@baseColor, 50%);
    /* rgba(209, 72, 54, 0.5); */
}

h3 {
    color: fade(@baseColor, 100%)
    /* color:#d14836; */
} 
```

在线测试此代码：http: [//lesstester.com/](http://lesstester.com/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-09-18T18:01:23.323

我的少混音：

```
.background-opacity(@color, @opacity) {
    @rgba-color: rgba(red(@color), green(@color), blue(@color), @opacity);

    background-color: @rgba-color;

    // Hack for IE8:
    background: none\9; // Only Internet Explorer 8
    filter: e(%("progid:DXImageTransform.Microsoft.gradient(startColorstr='%d', endColorstr='%d')", argb(@rgba-color),argb(@rgba-color))); // Internet Explorer 9 and down
    // Problem: Filter gets applied twice in Internet Explorer 9.
    // Solution:
    &:not([dummy]) {
      filter: progid:DXImageTransform.Microsoft.gradient(enabled='false'); // Only IE9
    }
} 
```

试试看。

已编辑：如在*[rgba 背景上使用 IE 过滤器替代：IE9 呈现两者！](https://stackoverflow.com/questions/6506085/rgba-background-with-ie-filter-alternative-ie9-renders-both)*，我在 mixin 中添加了一些行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-11T05:11:10.727

似乎在最近的 Less 更新[3.81](https://github.com/less/less.js/blob/master/CHANGELOG.md#381)中，您可以在 rgba() 函数中仅使用两个参数。

```
rgba(white, 0.3) or rgba(white, 30%) => rgba(255, 255, 255, 0.3) 
```

[它对我有用，但我在官方文档](http://lesscss.org/functions/#color-definition-rgba)中找不到它。

# c# - 为什么覆盖 GetHashCode() 会阻止 INotifyPropertyChanged？

> ID：14860876
> 
> 赞同：1
> 
> 时间：2013-02-13T18:54:46.273
> 
> 标签：c#, winforms, inotifypropertychanged

我有一个*简单*的视图模型，它继承自`INotifyPropertyChanged`. 在尝试为此视图模型创建一些自动化测试后，我最终覆盖了`Equals()`和`GetHashCode()`. 我的测试通过了，所以我是一个快乐的露营者。

但是，现在我的 Windows 窗体数据绑定没有对我的视图模型中的属性发生更改做出反应。如果我评论我的`GetHashCode()`实现，除了我的测试之外，我的所有实现都按预期工作。

这是我的实现：

```
public override int GetHashCode()
{
    unchecked
    {
        var hashCode = (_subject != null ? _subject.GetHashCode() : 0);
        hashCode = (hashCode * 397) ^ (_message != null ? _message.GetHashCode() : 0);
        hashCode = (hashCode * 397) ^
                   (_body != null ? _body.GetHashCode() : 0);
        return hashCode;
    }
} 
```

这就是 ReSharper 为我生成的内容。

尽管我调用了事件，为什么覆盖会`GetHashCode()`阻止我的数据绑定接收到我的视图模型更改？`PropertyChanged`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:29:51.410

我总是尽量避免将代码添加到仅用于测试目的的生产代码中。因此，由于您实现`Equals`并`GetHashCode`用于测试目的，是否可以`IEqualityComparer<T>`在单元测试中实现和使用它来执行断言。

# jquery - JQuery ajax调用获取状态码0“错误”

> ID：14860877
> 
> 赞同：5
> 
> 时间：2013-02-13T18:54:51.857
> 
> 标签：jquery, ajax, xmlhttprequest, jqxhr

我正在尝试致电 Petfinder.com 以获取我们的宠物清单。网址是[http://api.petfinder.com/shelter.getPets?key=xxxxx&id=CA1469&format=json](http://api.petfinder.com/shelter.getPets?key=xxxxx&id=CA1469&format=json)

该 url 似乎可以很好地返回 JSON。但是当我尝试拨打电话时，我收到“错误”和状态码 0。我尝试使用 jsonp 导致状态为 200 但解析错误。如果我更改为 xml，我会得到状态 0 和“错误”的结果。

```
 $.ajax({

         url: "http://api.petfinder.com/shelter.getPets?key=xxxx&id=CA1469&format=json",
         dataType: "json",
         type: "GET",
         success: function (data) {
             alert("hi");
         },
         error: function (jqXHR, exception) {
             if (jqXHR.status === 0) {
                 alert('Not connect.\n Verify Network.');
             } else if (jqXHR.status == 404) {
                 alert('Requested page not found. [404]');
             } else if (jqXHR.status == 500) {
                 alert('Internal Server Error [500].');
             } else if (exception === 'parsererror') {
                 alert('Requested JSON parse failed.');
             } else if (exception === 'timeout') {
                 alert('Time out error.');
             } else if (exception === 'abort') {
                 alert('Ajax request aborted.');
             } else {
                 alert('Uncaught Error.\n' + jqXHR.responseText);
             }

         }
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-25T13:39:21.840

您需要确保当服务器向您发送错误响应时，它还会同时发送正确的 CORS 标头。

如果没有，浏览器将不允许您的 JavaScript 代码查看来自该域的任何信息，甚至是状态代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:00:15.083

您遇到了~~XSS~~ CORS 问题。最好的解决方案是在您的 Web 服务器上设置一个代理，并通过它路由 AJAX 调用。

# php - 使用 Colorbox 和 javascript 函数

> ID：14860878
> 
> 赞同：0
> 
> 时间：2013-02-13T18:55:03.650
> 
> 标签：php, javascript, jquery, colorbox

我正在尝试显示一个带有与之关联的颜色框弹出窗口的超链接。javascript是：

```
function bid() {    
  var bid = document.getElementById("bid").value;
  if (bid>0 && bid<=100) {
    var per = 3.50;
  } else if (bid>100 && bid<=200) {
    var per = 3.40;
  } else if (bid>200 && bid<=300) {
    var per = 3.30;
  }

 var fee = Math.round(((bid/100)*per)*100)/100;
 var credit = 294.9;

   if (fee>credit) {
     var message = 'Error';
   } else {
     var message = '<a class="popup" href="URL">The link</a>'; 
   }

   document.getElementById("bidText").innerHTML=message;
 } 
```

javascript 工作正常并在正确的条件下显示链接，但问题是单击链接时，没有应用颜色框并且页面作为普通超链接加载。

我在标题中有以下代码：

```
jQuery(document).ready(function () {
  jQuery('a.popup').colorbox({ opacity:0.5 , rel:'group1' });
}); 
```

如果我只输出标准 html 源中的超链接，它可以正常工作并在 Colorbox 中正确显示。

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:59:02.617

您需要等到添加了链接，然后再调用`colorbox()`它的方法。

移动您的`colorbox()`方法，使其在您的`innerHTML`.

```
jQuery('a.popup').colorbox({ opacity:0.5 , rel:'group1' }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:00:21.280

当您动态添加html时，添加的事件已经无法触发。试试下面的代码

```
jQuery(document).ready(function () {
      $("a.popup").on("click", function(event){
      applycolorbox($(this));
});

function applycolorbox($elem) {
         $elem.colorbox({ opacity:0.5 , rel:'group1' });
} 
```

# c# - 尝试连接服务器时显示加载动画

> ID：14860882
> 
> 赞同：-2
> 
> 时间：2013-02-13T18:55:07.990
> 
> 标签：c#, multithreading, function

我有一个连接到服务器的简单登录表单。

当用户按下登录按钮时，动画加载 GIF 需要显示，直到建立连接或连接失败。

理论上，我做到了：

```
private void button_login_Click(object sender, EventArgs e)
{
        button_login.Text = WORKING;
        Loading(ShowMode.show, pictureBox_login_loading);
        // send request         
        client = new TcpClient();
        try
        {
            IPEndPoint endPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 5000);
            client.Connect(endPoint);
            // send login details .. :)
            output = client.GetStream();
            writer = new BinaryWriter(output);
            reader = new BinaryReader(output);
            // write details
            writer.Write("login"   "|"   userID   "|"   privateName);
        }
        catch (Exception)
        {
            MessageBox.Show("Server is down.");
            return;

        }
        finally
        {
            // Stop loading and return status
            button_login.Text = DEFAULT_LOGIN_TEXT;
            Loading(ShowMode.hide, pictureBox_login_loading);
        } 
} 
```

Loading 是一个将 PictureBox 的 Visible 属性设置为 的函数`Visible`。（我认为这会有所帮助）

问题是：gif 仅在`button_login_Click`完成运行后才可见，并且在它不可见之后才可见。

如何使动画 gif 在它正在执行的行上可见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:01:48.877

问题是您没有退回到 GUI 线程，因此无法显示您的 GIF。

我建议使用 BackgroundWorker 连接到您的客户端，然后在开始工作之前显示 GIF 并在 Worker 完成的调用中停止它。

示例代码（注意，我没有编译它，因为我没有足够的源代码来编译）：

```
 button_login.Text = WORKING;
        Loading(ShowMode.show, pictureBox_login_loading);
        // send request      
        BackgroundWorker worker = new BackgroundWorker();

        worker.DoWork += new DoWorkEventHandler((obj, args) =>
        {
            client = new TcpClient();
            try
            {
                IPEndPoint endPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 5000);
                client.Connect(endPoint);
                // send login details .. :)
                output = client.GetStream();
                writer = new BinaryWriter(output);
                reader = new BinaryReader(output);
                // write details
                writer.Write("login"   "|"   userID   "|"   privateName);
            }
            catch (Exception)
            {
                this.Invoke(new Action(() =>MessageBox.Show("Server is down."));
            }
        });

        worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler((obj, args) =>
        {
            button_login.Text = DEFAULT_LOGIN_TEXT;
            Loading(ShowMode.hide, pictureBox_login,loading);
        });

        worker.RunWorkerAsync(); 
```

这种方法让 GUI 线程允许它显示您的 GIF 并仍然监视您的连接并删除 GIF 并在完成后恢复按钮文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:03:13.257

由于它是您所追求的动画，因此您可能需要在另一个线程上启动连接，以免 UI 线程被阻塞。如果是静止图像，你可以调用图片框的`Update()`方法让它显示出来。但对于你的情况，这样的事情应该有效：

```
Thread thread = new Thread(new ThreadStart(delegate
{
    Invoke((Action)(()=>{ button_login.Text = WORKING; Loading(ShowMode.show, pictureBox_login_loading); }));
    // send request         
    client = new TcpClient();
    try
    {
        IPEndPoint endPoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 5000);
        client.Connect(endPoint);
        // send login details .. :)
        output = client.GetStream();
        writer = new BinaryWriter(output);
        reader = new BinaryReader(output);
        // write details
        writer.Write("login"   "|"   userID   "|"   privateName);
     }
     catch (Exception)
     {
         MessageBox.Show("Server is down.");
         return;

     }
     finally
     {
         // Stop loading and return status
         Invoke((Action)(()=>{ button_login.Text = DEFAULT_LOGIN_TEXT; Loading(ShowMode.hide, pictureBox_login_loading); }));
      } 
}));
thread.Start(); 
```

您也可以像讨论的其他答案一样使用 BackgroundWorker，但我倾向于将它们保留用于运行时间更长的任务，例如使用进度条报告进度的任务。如果它是一个简短的（ish）任务，我通常在 .NET 4.0 中使用`Thread`, 或。`Task.Factory.StartNew`

# ios - 动画不会第一次运行

> ID：14860892
> 
> 赞同：0
> 
> 时间：2013-02-13T18:55:27.750
> 
> 标签：ios, xcode, animation

我有一个奇怪的错误。当我的应用程序加载并且我点击一个按钮来制作动画时，它不会提交动画，但是当我第二次尝试时它可以完美运行。这是我的代码：

```
-(void)Revert
{

    firstTable.hidden = FALSE;
    self.navigationItem.leftBarButtonItem = NO;
    [self returnanimation];
}

-(void)returnanimation
{
    CGRect labelframe = childnamelabel.frame;
    labelframe.origin.x = 493.5; // new x coordinate
    labelframe.origin.y = 359; // new y coordinate
    CGRect textframe = passwordfield.frame;
    textframe.origin.x = 454; // new x coordinate
    textframe.origin.y = 388; // new y coordinate
    CGRect submitframe = submit.frame;
    submitframe.origin.x = 640; // new x coordinate
    submitframe.origin.y = 387; // new y coordinate

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration: 0.25];
    childnamelabel.frame = labelframe;
    passwordfield.frame = textframe;
    submit.frame = submitframe;
    [UIView commitAnimations];
}

-(void)animation
{

    CGRect labelframe = childnamelabel.frame;
    labelframe.origin.x = 335.5; // new x coordinate
    labelframe.origin.y = 359; // new y coordinate
    CGRect textframe = passwordfield.frame;
    textframe.origin.x = 294; // new x coordinate
    textframe.origin.y = 388; // new y coordinate
    CGRect submitframe = submit.frame;
    submitframe.origin.x = 480; // new x coordinate
    submitframe.origin.y = 387; // new y coordinate
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration: 0.25];

    childnamelabel.frame = labelframe;
    passwordfield.frame = textframe;
    submit.frame = submitframe;
    [UIView commitAnimations];
}

-(IBAction)PressedTeacherButton: (UIBarButtonItem*) Teacherbutton
{
    [self setNameLabel: @"Mrs Hayward" Child:[NSNumber numberWithInt:0]];
    firstTable.hidden = TRUE;
    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(Revert)];
    [self animation];

    //Pass on admins name and also bool whether they are a child.
} 
```

试图寻找解决方案，但找不到任何东西。感谢您的帮助：D

*更新

将其缩小到`[self setNameLabel: @"Mrs Hayward" Child:[NSNumber numberWithInt:0]];`似乎动画不喜欢在动画之前或之后更改标签。我已经尝试了完成功能，它会动画然后在更改标签后立即重置到旧位置。

请求 BOT 提出 setnamelabel 方法：

```
- (void) setNameLabel:(NSString *)sender Child:(NSNumber *)Child
{
    self.childnamelabel.text = sender;
    IsAChild = Child;
} 
```

仍然没有答案:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:30:29.757

尽管您的代码看起来不错，但不久前我遇到了类似的问题。我切换到使用块并且它起作用了。

尝试使用

```
-(void)animation
{
    CGRect labelframe = childnamelabel.frame;
    labelframe.origin.x = 335.5; // new x coordinate
    labelframe.origin.y = 359; // new y coordinate
    CGRect textframe = passwordfield.frame;
    textframe.origin.x = 294; // new x coordinate
    textframe.origin.y = 388; // new y coordinate
    CGRect submitframe = submit.frame;
    submitframe.origin.x = 480; // new x coordinate
    submitframe.origin.y = 387; // new y coordinate

    [UIView animateWithDuration:0.25 animations:^{
        childnamelabel.frame = labelframe;
        passwordfield.frame = textframe;
        submit.frame = submitframe;
    }];
} 
```

# ios - 模拟器在 SDK 5.1 中时单元测试抛出错误

> ID：14860893
> 
> 赞同：1
> 
> 时间：2013-02-13T18:55:32.873
> 
> 标签：ios, objective-c, unit-testing, ocunit

当目标设置为 6.1 时，我的单元测试运行良好，而当我浏览模拟器中的功能时，代码本身也很好。

我*认为*问题在于单元测试期望 6.1 SDK 存在，但它实际上使用的是 5.1 SDK。

这是错误：

```
dyld: Symbol not found: _objc_setProperty_nonatomic_copy
  Referenced from: /Users/{my username}/Library/Developer/Xcode/DerivedData/{my app name}/Build/Products/Debug-Live-iphonesimulator/AgrianUnitTest.octest/AgrianUnitTest
  Expected in: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk/System/Library/Frameworks/Foundation.framework/Foundation 
```

我的第一个想法是在我的单元测试目标中更改 Base SDK，但除了最新和 6.1 之外我没有任何选项（手动输入 5.1 会导致“找不到 SDK”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:06:58.787

您的 Xcode 位置在之前的一些升级后可能不是最新的。尝试修复位置。在终端中运行：

```
sudo /usr/bin/xcode-select -switch /Applications/Xcode.app/Contents/Developer/
export DEVELOPER_DIR=/Applications/Xcode.app 
```

# c - 检查是否在 X Window 中运行

> ID：14860899
> 
> 赞同：0
> 
> 时间：2013-02-13T18:55:53.467
> 
> 标签：c, x11

Linux C程序：

什么函数调用可以检查是否在 X Window 中运行？

如果不在 X Window 中，则 printf。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:01:13.843

你的意思是这样的：

```
#include <X11/Xlib.h>

  // ...

  char *display_name = NULL;

  /* connect to X server */
  if ( (display=XOpenDisplay(display_name)) == NULL )
  {
    //printf or whatever
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:58:53.650

“在 X Window 中运行”是什么意思？您的意思是您的应用程序是否在终端模拟器中运行，例如`rxvt`还是`xterm`代替物理控制台？如果是这样，您可以使用`TERM`我猜的变量，但它不可靠（因为用户可以将其更改为任何值）。

更重要的问题是为什么这些信息对您的应用程序很重要？

# android - 如何使用 AchartEngine 使条形图上的文本居中并增加文本大小？

> ID：14860900
> 
> 赞同：1
> 
> 时间：2013-02-13T18:55:55.277
> 
> 标签：android, achartengine

我能够实现条形图，但是我想纠正它的各种问题..

```
1 - How to center the text on bar?

2 - How to increase the text size on bar?

3 - can we change the orientation of bars?

4 - How to change colour of each bar? 
```

请帮助伙计们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:46:37.630

1.  `renderer.setChartValuesTextAlign(Align.CENTER);`
2.  `renderer.setChartValuesTextSize();`
3.  `renderer.setOrientation(Orientation.VERTICAL);`但请注意，这种图表是实验性的。
4.  将它们放在单独的系列中。

# google-app-engine - 为什么没有从 NDB 的上下文缓存中获取实体？

> ID：14860901
> 
> 赞同：4
> 
> 时间：2013-02-13T18:55:55.413
> 
> 标签：google-app-engine, app-engine-ndb

我有一个用于存储一些全局应用程序设置的实体。这些设置可以通过管理 HTML 页面进行编辑，但很少更改。我只有这个实体的一个实例（各种各样的单例），并且当我需要访问设置时总是引用这个实例。

归结为：

```
class Settings(ndb.Model):
    SINGLETON_DATASTORE_KEY = 'SINGLETON'

    @classmethod
    def singleton(cls):
        return cls.get_or_insert(cls.SINGLETON_DATASTORE_KEY)

    foo = ndb.IntegerProperty(
        default =  100,
        verbose_name = "Some setting called 'foo'",
        indexed = False)

@ndb.tasklet
def foo():
    # Even though settings has already been fetched from memcache and
    # should be available in NDB's in-context cache, the following call
    # fetches it from memcache anyways. Why?
    settings = Settings.singleton()

class SomeHandler(webapp2.RequestHandler):
    @ndb.toplevel
    def get(self):
        settings = Settings.singleton()
        # Do some stuff
        yield foo()
        self.response.write("The 'foo' setting value is %d" % settings.foo) 
```

我假设`Settings.singleton()`每个请求处理程序调用不止一次会非常快，因为第一次调用很可能会`Settings`从 memcache 中检索实体（因为实体很少更新），并且同一请求处理程序中的所有后续调用都会检索它来自 NDB 的上下文缓存。从[文档](https://developers.google.com/appengine/docs/python/ndb/cache#incontext)中：

> 上下文缓存仅在单个传入 HTTP 请求期间持续存在，并且仅对处理该请求的代码“可见”。它很快; 这个缓存存在于内存中。

但是，AppStat 显示我的`Settings`实体在同一个请求处理程序中多次从内存缓存中检索。我通过查看 AppStat 中请求处理程序的详细页面、扩展每个调用的调用跟踪`memcache.Get`并查看正在接收的 memcahe 密钥来了解这一点。

我在我的请求处理程序中使用了很多小任务，并且我`Settings.singleton()`从需要访问设置的小任务中调用。这可能是再次从内存缓存而不是从上下文缓存中获取设置实体的原因吗？如果是这样，控制是否/何时可以从上下文缓存中获取实体的确切规则是什么？我无法在 NDB 文档中找到此信息。

* * *

**2013/02/15 更新：**我无法在虚拟测试应用程序中重现这一点。测试代码为：

```
class Foo(ndb.Model):
    prop_a = ndb.DateTimeProperty(auto_now_add = True)

def use_foo():
    foo = Foo.get_or_insert('singleton')
    logging.info("Function using foo: %r", foo.prop_a)

@ndb.tasklet
def use_foo_tasklet():
    foo = Foo.get_or_insert('singleton')
    logging.info("Function using foo: %r", foo.prop_a)

@ndb.tasklet
def use_foo_async_tasklet():
    foo = yield Foo.get_or_insert_async('singleton')
    logging.info("Function using foo: %r", foo.prop_a)

class FuncGetOrInsertHandler(webapp2.RequestHandler):
    def get(self):
        for i in xrange(10):
            logging.info("Iteration %d", i)
            use_foo()

class TaskletGetOrInsertHandler(webapp2.RequestHandler):
    @ndb.toplevel
    def get(self):
        logging.info("Toplevel")
        use_foo()
        for i in xrange(10):
            logging.info("Iteration %d", i)
            use_foo_tasklet()

class AsyncTaskletGetOrInsertHandler(webapp2.RequestHandler):
    @ndb.toplevel
    def get(self):
        logging.info("Toplevel")
        use_foo()
        for i in xrange(10):
            logging.info("Iteration %d", i)
            use_foo_async_tasklet() 
```

在运行任何测试处理程序之前，我确保存在具有键名单*例*`Foo`的实体。

 *与我在生产应用程序中看到的相反，所有这些请求处理程序都`memcache.Get`在 Appstats 中显示了一次调用。

* * *

**2013 年 2 月21 日更新：**我终于能够在虚拟测试应用程序中重现这一点。测试代码为：

```
class ToplevelAsyncTaskletGetOrInsertHandler(webapp2.RequestHandler):
    @ndb.toplevel
    def get(self):
        logging.info("Toplevel 1")
        use_foo()
        self._toplevel2()

    @ndb.toplevel
    def _toplevel2(self):
        logging.info("Toplevel 2")
        use_foo()
        for i in xrange(10):
            logging.info("Iteration %d", i)
            use_foo_async_tasklet() 
```

这个处理程序确实在 Appstats 中显示了 2 次调用`memcache.Get`，就像我的生产代码一样。

实际上，在我的生产请求处理程序代码路径中，我有一个`toplevel`被另一个调用的`toplevel`. 似乎 a`toplevel`创建了一个新的 ndb 上下文。

将嵌套更改`toplevel`为 a 可以`synctasklet`解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T19:58:46.093

> 似乎顶层创建了一个新的 ndb 上下文。

确切地说，每个带有`toplevel`装饰器的处理程序都有自己的上下文，因此有一个单独的缓存。您可以查看`toplevel`下面链接中的代码，在函数文档中指出`toplevel`“设置新的默认上下文的同步小任务”。

[https://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/ndb/tasklets.py#1033](https://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/ext/ndb/tasklets.py#1033)*

# spring - Spring MVC 无法自动装配

> ID：14860907
> 
> 赞同：1
> 
> 时间：2013-02-13T18:56:20.250
> 
> 标签：spring, hibernate, spring-mvc, spring-webflow

在创建我的 bean 时，我不断收到以下错误，但是我不确定为什么在声明它时它没有看到 bean。文件结构有问题还是有更深层次的问题？我知道这对很多人来说都是 TLDR，但我想包括完整的流程。

```
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'productsController' defined in file [C:\Users\ChappleZ\Desktop\CRCart001\CRCartSpring001\out\artifacts\CRCartSpring001_war_exploded\WEB-INF\classes\cr\controllers\ProductsController.class]: Unsatisfied dependency expressed through constructor argument with index 0 of type [cr.managers.ProductsManager]: : No matching bean of type [cr.managers.ProductsManager] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [cr.managers.ProductsManager] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {} 
```

下面是文件夹结构和相关文件。

```

源代码
- 爪哇
     |_ 铬
          |_ 控制器
               |_ 产品控制器
          |_ 道
               |_ 实现
                    |_ 产品介绍DaoImpl
          |_ 产品中心
          |_ 实体
               |_ 产品
          |_ 经理
               |_ 产品经理
               |_ 实现
                    |_ ProductsManagerImpl
- 资源
     |_ 豆子
          |_ 道斯.xml
          |_ 服务.xml
     |_ 配置
          |_ BeanLocations.xml
     |_ 数据库
          |_ 数据源.xml
          |_ 休眠.xml
     |_ 属性
          |_ 数据库.properties

网络
- 资源
     |_ 组件
     |_ CSS
     |_ 数据
     |_ 图像
     |_ js
     |_ 观看次数
- 网络信息
     |_ applicationContext.xml
     |_ 调度程序-servlet.xml
     |_ 日志记录.properties
     |_ web.xml
- index.jsp

```

产品控制器

```
package cr.controllers;

import cr.Entity.Products;
import cr.managers.ProductsManager;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
@RequestMapping("/Products")
public class ProductsController {
    private ProductsManager productsManager;

    @Autowired
    public ProductsController(ProductsManager productsManager) {
        this.productsManager = productsManager;
    }

    @RequestMapping(
            value = "/products/{productId}",
            method = RequestMethod.GET)
    public
    @ResponseBody
    Products findByProductId(@PathVariable long productId) {
        Products products = productsManager.findByProductId(productId);
        return products;
    }
} 
```

产品DaoImpl

```
package cr.dao.impl;

import cr.Entity.Products;
import cr.dao.ProductsDao;
import org.springframework.orm.hibernate3.support.HibernateDaoSupport;

import java.util.List;

public class ProductsDaoImpl extends HibernateDaoSupport implements ProductsDao {
    @Override
    public void save(Products products) {
        getHibernateTemplate().save(products);
    }

    @Override
    public void update(Products products) {
        getHibernateTemplate().update(products);
    }

    @Override
    public void delete(Products products) {
        getHibernateTemplate().delete(products);
    }

    @Override
    public Products findByProductId(Long productId) {
        List list = getHibernateTemplate().find("from Products where productId=?",productId);
        return (Products)list.get(0);
    }
} 
```

产品道

```
package cr.dao;

import cr.Entity.Products;
import org.codehaus.jackson.annotate.JsonAutoDetect;
import org.codehaus.jackson.annotate.JsonIgnoreProperties;

@JsonAutoDetect
@JsonIgnoreProperties(ignoreUnknown = true)
public interface ProductsDao {
    void save(Products products);

    void update(Products products);

    void delete(Products products);

    Products findByProductId(Long productId);
} 
```

产品实体

```
package cr.Entity;

import com.sun.istack.internal.NotNull;
import org.codehaus.jackson.annotate.JsonAutoDetect;
import org.codehaus.jackson.annotate.JsonIgnoreProperties;

import javax.persistence.*;
import java.sql.Timestamp;

@JsonAutoDetect
@JsonIgnoreProperties(ignoreUnknown = true)
@Entity
@Table(name= "Products")
public class Products {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name= "productsId")
    private int productsId;

    @Column(name = "ProductName")
    @NotNull
    private String productName;

    @Column(name = "ProductDescription")
    @NotNull
    private String productDescription;

    @Column(name = "MfgCost")
    private double mfgCost;

    @Column(name = "Price")
    private double price;

    @Column(name = "SalePrice")
    private double salePrice;

    @Column(name = "CreationDate")
    private Timestamp creationDate;

    @Column(name = "DeletedIndicator")
    private Boolean deletedIndicator;

    @Column(name = "ImagePath")
    @NotNull
    private String imagePath;

+Setters and Getters + ToString (Not added to keep post shorter) 
```

产品经理

```
package cr.managers;

import cr.Entity.Products;

public interface ProductsManager {
    void save(Products products);

    void update(Products products);

    void delete(Products products);

    Products findByProductId(Long productId);
} 
```

ProductsManagerImpl

```
package cr.managers.impl;

import cr.Entity.Products;
import cr.dao.ProductsDao;
import cr.managers.ProductsManager;

public class ProductsManagerImpl implements ProductsManager{
    ProductsDao productsDao;

    public void setProductsDao(ProductsDao productsDao){
        this.productsDao=productsDao;
    }

    public void save(Products products) {
        productsDao.save(products);
    }

    public void update(Products products) {
        productsDao.update(products);
    }

    public void delete(Products products) {
        productsDao.delete(products);
    }

    public Products findByProductId(Long productId) {
        return productsDao.findByProductId(productId);
    }
} 
```

道斯.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <!-- Products Data Access Object -->
    <bean id="productsDao" class="cr.dao.impl.ProductsDaoImpl">
        <property name="sessionFactory" ref="sessionFactory"></property>
    </bean>

</beans> 
```

服务.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <!-- Products object -->
    <bean id="productsManager" class="cr.managers.impl.ProductsManagerImpl">
        <property name="productsDao" ref="productsDao"/>
    </bean>

</beans> 
```

BeanLocations.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <!-- Database Configuration -->
    <import resource="../database/DataSource.xml"/>
    <import resource="../database/Hibernate.xml"/>

    <!-- Beans Declaration -->
    <import resource="../beans/daos.xml"/>
    <import resource="../beans/services.xml"/>
</beans> 
```

数据源.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location">
            <value>properties/database.properties</value>
        </property>
    </bean>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${jdbc.driverClassName}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean>

</beans> 
```

休眠.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

    <!-- Hibernate session factory -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource">
            <ref bean="dataSource"/>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>

    </bean>

</beans> 
```

数据库属性

```
jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/schema
jdbc.username=user
jdbc.password=root 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

</beans> 
```

调度程序-servlet.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
                    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <!--================================= Component Scan ======================================-->
    <!-- Scans within the base package of the application for @Controller to configure as beans -->
    <!-- This entry looks for annotated classes and provides those beans in the Spring container.   -->
    <!-- So there is no need to declare bean definitions in the XML configuration -->
    <context:component-scan base-package="cr"/>

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources/ directory -->
    <mvc:resources mapping="/resources/**" location="/resources/"/>

    <mvc:annotation-driven />

    <!--SimpleUrlHandlerMapping is already configured, disabling the default HandlerMappings.
     The DispatcherServlet enables the DefaultAnnotationHandlerMapping, which looks for @RequestMapping annotations on @Controllers. -->
    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
        <!-- Based on the value of the order property Spring sorts all handler mappings available in the context and applies the first matching handler. -->
        <property name="order" value="1"/>
    </bean>

</beans> 
```

日志记录属性

```
org.apache.catalina.core.ContainerBase.[Catalina].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].handlers = java.util.logging.ConsoleHandler 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
           version="2.5">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.form</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:19:09.393

1.  您的 applicationContext.xml 不会导入任何带有 bean 定义的 XML 文件，因此不会处理这些文件
2.  您的 MVC 调度程序 servlet 扫描“cr”包以查找带有 Spring 注释的类。您的 ProductsManager 类没有注释，因此无法通过组件扫描找到，但 ProductsController 类已找到，并且无法实例化，因为 Spring 不知道您的 ProductsManager 类。

建议：

在主应用程序上下文中导入 bean 定义 XML。不要在根上下文中实例化 ProductsController - 所有 @Controller bean 都应该属于 MVC servlet 上下文。您可以使用 MVC xml 中的以下标记来实现此目的：

```
<context:component-scan base-package="cr" use-default-filters="false">
    <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
</context:component-scan> 
```

并在主要上下文中向您的类添加 @Component 注释并使用它：

```
<context:component-scan base-package="cr" use-default-filters="true">
    <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
</context:component-scan> 
```

或完全跳过组件扫描并在 XML 中手动定义您的 bean

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T10:28:50.820

这是您得到错误的地方：

```
private ProductsManager productsManager;

@Autowired
public ProductsController(ProductsManager productsManager) {
    this.productsManager = productsManager;
} 
```

这不是自动装配 bean 的正确方法。

将所有这些替换为

```
@Autowired
private ProductsManager productsManager; 
```

您不必为此创建构造函数。或者，您可以在 setter 上自动装配 bean：

```
private ProductsManager productsManager;

@Autowired
public setProductsManager(ProductsManager productsManager) {
    this.productsManager = productsManager;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:07:59.200

选项1：-

在 web.xml 中加载 services.xml

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
 //Load Services.xml here like <param-value>actualPath/services.xml</param-value>
</context-param> 
```

在 service.xml 中导入 dao.xml

```
//Like <import resource="classpath:actualClassPath/dao.xml" /> 
```

然后

您可以直接在控制器中自动装配 productsManager。您可以直接在 productsManager 中自动装配 productsDao。

由于您自动装配 productsManager，因此控制器中不需要构造函数。由于您自动装配 productsDao，因此 productsManager 中不需要构造函数。

下面的 bean 配置就足够了。

```
<bean id="productsManager" class="cr.managers.impl.ProductsManagerImpl"/> 
```

下面的代码对于控制器来说已经足够了。

```
@Controller
@RequestMapping("/Products")
public class ProductsController {
 @Autowired    
 private ProductsManager productsManager;

 @RequestMapping(value = "/products/{productId}",
                    method = RequestMethod.GET)

 @ResponseBody
 public Products findByProductId(@PathVariable long productId) {
    Products products = productsManager.findByProductId(productId);
    return products;
  }
 } 
```

选项2：-（我不推荐这个（这是为了更好地理解））

在 applicationContext.xml 中定义 productsManager,productsDao bean

然后

像上面的代码一样修改控制器它将起作用。

# c# - 使用 EntityFramework 的自定义成员资格提供程序

> ID：14860911
> 
> 赞同：0
> 
> 时间：2013-02-13T18:56:29.347
> 
> 标签：c#, asp.net, entity-framework, asp.net-membership

当我用自己的自定义数据库编写自己的自定义成员资格提供程序时，如果我想放入“网络表单”“CreateUserWizard”控件，我应该在我的自定义成员资格提供程序类中使用 - 实体框架并实现“ MembershipProvider 抽象类”，对吗？

# php - 如果在 Firefox 中发送文件，为什么无法读取 php://input？

> ID：14860914
> 
> 赞同：0
> 
> 时间：2013-02-13T18:56:33.523
> 
> 标签：php, firefox, jquery-plugins, file-upload

我正在使用[Valums File Uploader](https://github.com/valums/file-uploader)插件。这个插件在 Chrome 上运行，但我在 Firefox 上遇到了问题。我已经隔离了问题，但我无法猜测发生了什么......

问题在这里：

```
function save($path) {
    $input = fopen("php://input", "r");
    $temp = tmpfile();
    $realSize = stream_copy_to_stream($input, $temp);
    fclose($input);

    if ($realSize != $this->getSize()){
        return false;
    }

    $target = fopen($path, "w");
    fseek($temp, 0, SEEK_SET);
    stream_copy_to_stream($temp, $target);
    fclose($target);

    return true;
} 
```

这段 PHP 是服务器的一部分，该函数应该将上传的文件移动到`$path`. 问题是不`$input`包含数据，它是空的。即使我把它放在我的 PHP 处理程序文件的第一行：

```
$postdata = file_get_contents("php://input"); 
```

字符串为`$postdata`空。仅在 Firefox 中，不在 Chrome 中。如果我去客户端，Firebug 显示 Firefox 正在发送文件：

![在此处输入图像描述](../Images/6beeca9dc8bc9b5b0c192b705ec7bf7d.png)

但是如果你去 PHP 文档，它会[说](http://www.php.net/manual/en/wrappers.php.php)“ *php://input is not available with enctype="multipart/form-data"* ”，所以我不知道问题是`Firefox`，`php://input`还是发送一个带有`multipart/form-data`(没有这个，我不知道如何发送文件）。有什么问题？

# api - 扩展 Magento 的 API Soap V2（不是此服务的有效方法）

> ID：14860917
> 
> 赞同：1
> 
> 时间：2013-02-13T18:56:42.997
> 
> 标签：api, magento, soap

我正在尝试创建一个扩展 magento V2 肥皂调用的自定义模块。我的大部分资源来自这篇文章

[如何使用 SOAP V2 为 Magento 设置自定义 api？](https://stackoverflow.com/questions/7519556/how-to-setup-custom-api-for-magento-with-soap-v2)

到目前为止，这是我为使其正常工作而采取的步骤。

# /app/etc/modules/Namespace_ImportExport.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Namespace_ImportExport>
            <active>true</active>
            <codePool>local</codePool>
            <depends>
                <Mage_Core />
            </depends>
        </Namespace_ImportExport>
    </modules>
</config> 
```

# /app/code/local/Namespace/ImportExport/etc/api.xml

```
<?xml version="1.0"?>
<config>
   <api>
     <resources>
       <importexport>
            <model>namespace_importexport/api</model>
            <title>api test</title>
            <methods>
                <foo translate="title" module="importexport">
                    <title>Foo Test</title>
                    <method>foo</method>
                </foo>
            </methods>
       </importexport>
    </resources>
    <v2>
        <resources_function_prefix>
           <importexport>importexport</importexport>
        </resources_function_prefix>
    </v2>
  </api>
</config> 
```

# /app/code/local/Namespace/ImportExport/etc/config.xml

```
<config>
    <modules>
        <Namespace_ImportExport>
            <version>0.0.1</version>
        </Namespace_ImportExport>
    </modules>
    <global>
        <models>
            <importexport><class>Namespace_ImportExport_Model</class></importexport>
        </models>
        <models>
            <catalog>
                <rewrite>
                    <product_api_v2>Namespace_ImportExport_Model_Product_Api_V2</product_api_v2>
                </rewrite>
            </catalog>
        </models>
    </global>
</config> 
```

# /app/code/local/Namespace/ImportExport/etc/wsdl.xml

在这里，我重写了一些现有的模块声明，但您会在底部找到我的自定义模块声明

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns:typens="urn:{{var wsdl.name}}" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns="http://schemas.xmlsoap.org/wsdl/"
    name="{{var wsdl.name}}" targetNamespace="urn:{{var wsdl.name}}">
    <types>
        <schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:Magento">
            <import namespace="http://schemas.xmlsoap.org/soap/encoding/" schemaLocation="http://schemas.xmlsoap.org/soap/encoding/" />
            <complexType name="catalogProductCreateEntity">
                <all>
                    <element name="categories" type="typens:ArrayOfString" minOccurs="0" />
                    <element name="websites" type="typens:ArrayOfString" minOccurs="0" />
                    <element name="associated" type="typens:ArrayOfString" minOccurs="0" />
                    <element name="name" type="xsd:string" minOccurs="0" />
                    <element name="description" type="xsd:string" minOccurs="0" />
                    <element name="short_description" type="xsd:string" minOccurs="0" />
                    <element name="weight" type="xsd:string" minOccurs="0" />
                    <element name="status" type="xsd:string" minOccurs="0" />
                    <element name="url_key" type="xsd:string" minOccurs="0" />
                    <element name="url_path" type="xsd:string" minOccurs="0" />
                    <element name="visibility" type="xsd:string" minOccurs="0" />
                    <element name="category_ids" type="typens:ArrayOfString" minOccurs="0" />
                    <element name="website_ids" type="typens:ArrayOfString" minOccurs="0" />
                    <element name="has_options" type="xsd:string" minOccurs="0" />
                    <element name="gift_message_available" type="xsd:string" minOccurs="0" />
                    <element name="price" type="xsd:string" minOccurs="0" />
                    <element name="special_price" type="xsd:string" minOccurs="0" />
                    <element name="special_from_date" type="xsd:string" minOccurs="0" />
                    <element name="special_to_date" type="xsd:string" minOccurs="0" />
                    <element name="tax_class_id" type="xsd:string" minOccurs="0" />
                    <element name="tier_price" type="typens:ArrayOfString" minOccurs="0" />
                    <element name="meta_title" type="xsd:string" minOccurs="0" />
                    <element name="meta_keyword" type="xsd:string" minOccurs="0" />
                    <element name="meta_description" type="xsd:string" minOccurs="0" />
                    <element name="custom_design" type="xsd:string" minOccurs="0" />
                    <element name="custom_layout_update" type="xsd:string" minOccurs="0" />
                    <element name="options_container" type="xsd:string" minOccurs="0" />
                    <element name="additional_attributes" type="typens:associativeArray" minOccurs="0" />
                </all>
            </complexType>
            <complexType name="catalogProductReturnEntity">
                <all>
                    <element name="product_id" type="xsd:string" minOccurs="0" />
                    <element name="sku" type="xsd:string" minOccurs="0" />
                    <element name="set" type="xsd:string" minOccurs="0" />
                    <element name="type" type="xsd:string" minOccurs="0" />
                    <element name="categories" type="typens:ArrayOfString" minOccurs="0" />
                    <element name="websites" type="typens:ArrayOfString" minOccurs="0" />
                    <element name="associated" type="typens:ArrayOfString" minOccurs="0" />
                    <element name="created_at" type="xsd:string" minOccurs="0" />
                    <element name="updated_at" type="xsd:string" minOccurs="0" />
                    <element name="type_id" type="xsd:string" minOccurs="0" />
                    <element name="name" type="xsd:string" minOccurs="0" />
                    <element name="description" type="xsd:string" minOccurs="0" />
                    <element name="short_description" type="xsd:string" minOccurs="0" />
                    <element name="weight" type="xsd:string" minOccurs="0" />
                    <element name="status" type="xsd:string" minOccurs="0" />
                    <element name="url_key" type="xsd:string" minOccurs="0" />
                    <element name="url_path" type="xsd:string" minOccurs="0" />
                    <element name="visibility" type="xsd:string" minOccurs="0" />
                    <element name="category_ids" type="typens:ArrayOfString" minOccurs="0" />
                    <element name="website_ids" type="typens:ArrayOfString" minOccurs="0" />
                    <element name="has_options" type="xsd:string" minOccurs="0" />
                    <element name="gift_message_available" type="xsd:string" minOccurs="0" />
                    <element name="price" type="xsd:string" minOccurs="0" />
                    <element name="special_price" type="xsd:string" minOccurs="0" />
                    <element name="special_from_date" type="xsd:string" minOccurs="0" />
                    <element name="special_to_date" type="xsd:string" minOccurs="0" />
                    <element name="tax_class_id" type="xsd:string" minOccurs="0" />
                    <element name="tier_price" type="typens:ArrayOfString" minOccurs="0" />
                    <element name="meta_title" type="xsd:string" minOccurs="0" />
                    <element name="meta_keyword" type="xsd:string" minOccurs="0" />
                    <element name="meta_description" type="xsd:string" minOccurs="0" />
                    <element name="custom_design" type="xsd:string" minOccurs="0" />
                    <element name="custom_layout_update" type="xsd:string" minOccurs="0" />
                    <element name="options_container" type="xsd:string" minOccurs="0" />
                    <element name="additional_attributes" type="typens:associativeArray" minOccurs="0" />
                </all>
            </complexType>
        </schema>
    </types>
    <message name="importexportFooRequest">
        <part name="sessionId" type="xsd:string" />
    </message>
    <message name="importexportFooResponse">
        <part name="result" type="typens:boolean" />
    </message>
    <portType name="{{var wsdl.handler}}PortType">
        <operation name="importexportFoo">
            <documentation>ImportExport Foo</documentation>
            <input message="typens:importexportFooRequest" />
            <output message="typens:importexportFooResponse" />
        </operation>
    </portType>
    <binding name="{{var wsdl.handler}}Binding" type="typens:{{var wsdl.handler}}PortType">
        <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http" />
        <operation name="importexportFoo">
            <soap:operation soapAction="urn:{{var wsdl.handler}}Action" />
            <input>
                <soap:body namespace="urn:{{var wsdl.name}}" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
            </input>
            <output>
                <soap:body namespace="urn:{{var wsdl.name}}" use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
            </output>
        </operation>
    </binding>
</definitions> 
```

# /app/code/local/Namespace/ImportExport/Model/Api.php

```
<?php
class Namespace_ImportExport_Model_Api extends Mage_Api_Model_Resource_Abstract
{
    /**
     * Returns version of the installed magento
     * @return String
     */

    public function foo() {
        return true;
    }
}
?> 
```

# /app/code/local/Namespace/ImportExport/Model/API/V2.php

```
<?php
class Namespace_ImportExport_Model_Api_V2 extends Namespace_ImportExport_Model_Api
{
    public function foo() {
        return true;
    }
}
?> 
```

我打电话，就像这样......

```
$fclient = new SoapClient($config['from']['soap_url']);
$fsession = $fclient->login($config['from']['username'], $config['from']['api_key']);
var_dump($fclient->importexportFoo($fsession)); 
```

据我所知，这是让我的自定义 api V2 模块正常工作的基本必需品。那么我可能做错了什么？

我得到这个是因为一个错误

```
Function ("importexportFoo") is not a valid method for this service 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-25T10:59:11.110

我刚遇到这种问题。

检查`$config['from']['soap_url']`进行 API 调用时的值。如果该值看起来像，`http://example.com/api/soap?wsdl`那么您仍在调用 V1。将其更新为如下所示`http://example.com/api/v2_soap/?wsdl`。

# rotation - THREE.js：计算对象上一点的世界空间位置

> ID：14860918
> 
> 赞同：14
> 
> 时间：2013-02-13T18:56:50.810
> 
> 标签：rotation, geometry, translation, three.js, webgl

我有一个 3D 对象。“附着”它是一个点。当物体移动或旋转时，点也随之移动和旋转。

给定物体的位置和旋转，如何计算该点在世界空间中的位置？（如果可能，使用[THREE.js 的 API ）](http://mrdoob.github.com/three.js/docs/55)

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-13T19:18:08.033

对于对象局部坐标系中的一个点，

```
object.localToWorld( point ); 
```

将返回该点的世界坐标，假设应用于该点的变换与应用于对象的变换相同。

三.js r.55

# php - 检查 UNIX 时间戳是否在 UNIX 范围内

> ID：14860920
> 
> 赞同：0
> 
> 时间：2013-02-13T18:57:02.150
> 
> 标签：php, unix-timestamp

我网站上的用户可以请求与其他用户进行会话。他们从他们喜欢的时间进入他们喜欢的时间。然后我将这两个值都转换为 UNIX 时间戳。

他们希望与之建立会话的用户的可用性以 UNIX 格式存储在数据库中，即 time_from 和 time_to。

我需要进行查询以确保他们输入的值在可用性范围内。

让我们做一个例子。假设第一个用户的空闲时间是从 1360764000 到 1360767600（2013 年 2 月 13 日下午 2:00 到下午 3:00），第二个用户请求会话从 1360764000 到 1360765800（2013 年 2 月 13 日下午 2:00 到下午 2:30） ）。

如何确保输入的值在该范围内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:07:03.463

Since a unix timestamp is essentially an integer something like

```
where time_from <= entered_from_time AND time_to >= entered_to_time 
```

# r - 对于 min.n 错误，获取范围太小

> ID：14860921
> 
> 赞同：3
> 
> 时间：2013-02-13T18:57:06.643
> 
> 标签：r, ggplot2

我正在尝试为我使用 R 收集的一些性能数据制作折线图。我想绘制每个 cpu 和总数的图表。我的 txt 文件中有一个名称列，我尝试将其设置为颜色，因为它们是因素。但是我收到此错误`Error in prettyDate(x = x, n = n, min.n = min.n, sep = sep, ...) : range too small for min.n` 这是我的代码。

```
library(ggplot2)
setwd("../../../PerfLogs")
cpu<-read.delim("CPUUsage.txt", header=FALSE, sep="\t")
names(cpu)<-c("Date", "Name", "Usage")
dates<-as.character(cpu$Date)
dates<-strptime(cpu$Date, "%m/%d/%Y %I:%M:%S %p")
cpu$Date<-dates
graph<-ggplot(cpu, aes(cpu$Date, cpu$Usage, colour=cpu$Name)) + geom_line(size=1.0)
graph 
```

这是来自 CPUUsage.txt 的一些示例数据

```
2/13/2013 1:37:17 PM    0   0
2/13/2013 1:37:17 PM    1   18
2/13/2013 1:37:17 PM    2   6
2/13/2013 1:37:17 PM    3   18
2/13/2013 1:37:17 PM    4   6
2/13/2013 1:37:17 PM    5   18
2/13/2013 1:37:17 PM    6   6
2/13/2013 1:37:17 PM    7   6
2/13/2013 1:37:17 PM    _Total  10
2/13/2013 1:37:18 PM    0   16
2/13/2013 1:37:18 PM    1   5
2/13/2013 1:37:18 PM    2   28
2/13/2013 1:37:18 PM    3   0
2/13/2013 1:37:18 PM    4   22
2/13/2013 1:37:18 PM    5   5
2/13/2013 1:37:18 PM    6   5
2/13/2013 1:37:18 PM    7   16
2/13/2013 1:37:18 PM    _Total  12 
```

中间列是名称，右列是使用情况。我希望因为它使用了日期/时间是否完全相同的因素

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:10:18.527

错误消息是由于您的 x 值是`datetime`并且两个值之间的差异仅为一秒（太小而无法显示数据）。您必须使用`scale_x_datetime()`并设置`breaks`为`"1 sec"`来显示您的数据。

```
library(ggplot2)
library(scales)
ggplot(cpu, aes(Date, Usage, colour=Name)) + 
   geom_line(size=1) + 
   scale_x_datetime(breaks = date_breaks("1 sec")) 
```

![在此处输入图像描述](../Images/92e91732a6180aefdab45aad5bb02899.png)

# wpf - 通过 DataGridColumn 应用时，DataGridCell 样式不起作用

> ID：14860922
> 
> 赞同：1
> 
> 时间：2013-02-13T18:57:12.670
> 
> 标签：wpf, xaml, datagrid

以下模板`DataGridCell`正确显示了内容，当它被指定为`ControlTemplate`单个时`DataGridCell`（在 Click 事件之后找到）：

```
<DataTemplate x:Key="gridCellTemplate">
  <Border BorderBrush="RoyalBlue"
          BorderThickness="2"
          CornerRadius="15">
    <ContentPresenter Content="{Binding}"
                      Margin="2,2,2,2" />
  </Border>
</DataTemplate> 
```

但是，如果我将此模板用作`ControlTemplate`针对该`DataGridCell`类型的样式，并将该样式用作`CellStyle`a `DataGridColumn`，则列单元格的内容显示为`DataRowView`，这意味着单元格无法从匹配的元素中提取其正确内容`ItemArray`.

任何人都知道如何正确设置绑定`ContentPresenter`？

# three.js - Three.js Raycaster intersectObjects 太慢？

> ID：14860928
> 
> 赞同：1
> 
> 时间：2013-02-13T18:57:47.313
> 
> 标签：three.js

我正在编写一个 Three.js 原型，用于使用 Leap Motion 与对象进行交互。每一帧（或无论如何都要定期），我想检查用户手指的表示是在场景中的对象上方还是下方。

我已经用下面的代码完成了这个，但是 intersectObject 调用需要大约 200 毫秒，即使它只是测试一个对象。这导致动画变慢并变得非常生涩（我尝试过，例如每 20 帧而不是每帧一次，但它仍然每 20 帧抽动一次）。

有没有办法更快地做到这一点？难道我做错了什么？其他人如何处理这个问题？

谢谢！

代码：

```
...

var filepath = '../models/Scissors.js';

loader.load(filepath, function(geometry, materials) {

  scissors = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial(materials) );
  scene.add( scissors );

});

...

function update() {

  ...

  // NB. Sphere1 has been positioned to represent the user's index finger 
  // in 3D space

  var vector = sphere1.position.subSelf( camera.position );

  var ray = new THREE.Raycaster( camera.position, vector.clone().normalize() );

  var start = new Date().getTime();

  var collisions = ray.intersectObjects( [scissors] );

  // Takes about 200ms
  console.log('Took ' + (new Date().getTime() - start) + ' ms' );

  if( collisions.length > 0 ) {
    console.log('HIT!');
  }

  ...

  requestAnimFrame(update);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:57:47.313

傻我，当然它慢的原因是因为剪刀对象是一个不平凡的模型。现在我将它包含在一个不可见的立方体中并对其进行测试。它现在超级快（0-1 毫秒）:-)

# jquery - 选择另一个单选按钮时，jQuery隐藏其他div

> ID：14860931
> 
> 赞同：0
> 
> 时间：2013-02-13T18:58:01.247
> 
> 标签：jquery, radio-button, hide, toggle, show

我需要有关切换单选按钮的帮助。每当我单击其中一个时，它就会像预期的那样打开，但是当我选择另一个时，它不会关闭。我一次只想要一个打开。非常感谢任何帮助 - 谢谢！

这是代码：

```
jQuery('.selectDiv3').click(function() {jQuery('#div3')[ (jQuery(this).val() == 'NW WI') ? 'slideDown' : 'slideUp']()});

jQuery('.selectDiv4').click(function() {jQuery('#div4')[ (jQuery(this).val() == 'SE MN') ? 'slideDown' : 'slideUp']()});

jQuery('.selectDiv5').click(function() {jQuery('#div5')[ (jQuery(this).val() == 'SW MN') ? 'slideDown' : 'slideUp']()});

jQuery('.selectDiv6').click(function() {jQuery('#div6')[ (jQuery(this).val() == 'SE WI') ? 'slideDown' : 'slideUp']()}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:07:18.067

Your click handlers need the ability to close all other divs. So something like this:

```
jQuery('.selectDiv3').click(function() {
    jQuery('.commonDivClass').slideUp(); // <-- this line
    jQuery('#div3')[ (jQuery(this).val() == 'NW WI')
        ? 'slideDown'
        : 'slideUp']();
}); 
```

So you add a class to all your divs (e.g. #3-6) and indiscriminately slide them up before sliding down the correct one.

# wordpress - Nginx WordPress

> ID：14860932
> 
> 赞同：0
> 
> 时间：2013-02-13T18:58:03.260
> 
> 标签：wordpress, nginx

我目前正试图让我的 Nginx+Mysql+Wordpress 在 Fedora 18 x64 上工作。

是否遵循以下手册[http://www.tecmint.com/install-wordpress-using-lamp-or-lemp-on-rhel-centos-fedora/](http://www.tecmint.com/install-wordpress-using-lamp-or-lemp-on-rhel-centos-fedora/)但似乎没有任何效果。

默认 Nginx 问候语仍显示在 localhost:80。

我应该提供一些配置文件作为示例吗？

请帮助我真的迷路了。谷歌搜索一切，阅读官方 Nginx 手册 atm。

```
# For more information on configuration, see:
#   * Official English Documentation: http://nginx.org/en/docs/
#   * Official Russian Documentation: http://nginx.org/ru/docs/

user  nginx;
worker_processes  1;

error_log  /var/log/nginx/error.log;
#error_log  /var/log/nginx/error.log  notice;
#error_log  /var/log/nginx/error.log  info;

pid        /run/nginx.pid;

events {
worker_connections  1024;
}

http {
include       /usr/local/etc/nginx/sites-enabled/*;
include       mime.types;

default_type  application/octet-stream;

log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                  '$status $body_bytes_sent "$http_referer" '
                  '"$http_user_agent" "$http_x_forwarded_for"';

access_log  /var/log/nginx/access.log  main;

sendfile        on;
#tcp_nopush     on;

#keepalive_timeout  0;
keepalive_timeout  65;

#gzip  on;

server {
    listen       80;
    server_name  localhost;

    #charset koi8-r;

    #access_log  /var/log/nginx/host.access.log  main;

    location / {
        root   /srv/www/wordpress/public_html;
        index  index.php index.html;
    }

    # redirect server error pages to the static page /40x.html
    #
    error_page  404              /404.html;
    location = /40x.html {
        root   /usr/share/nginx/html;
    }

    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }

    # proxy the PHP scripts to Apache listening on 127.0.0.1:80
    #
    #location ~ \.php$ {
    #    proxy_pass   http://127.0.0.1;
    #}

    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
    #
    #location ~ \.php$ {
    #    root           html;
    #    fastcgi_pass   127.0.0.1:9000;
    #    fastcgi_index  index.php;
    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
    #    include        fastcgi_params;
    #}

    # deny access to .htaccess files, if Apache's document root
    # concurs with nginx's one
    #
    #location ~ /\.ht {
    #    deny  all;
    #}
}

# another virtual host using mix of IP-, name-, and port-based configuration
#
#server {
#    listen       8000;
#    listen       somename:8080;
#    server_name  somename  alias  another.alias;

#    location / {
#        root   html;
#        index  index.html index.htm;
#    }
#}

# HTTPS server
#
#server {
#    listen       443;
#    server_name  localhost;

#    ssl                  on;
#    ssl_certificate      cert.pem;
#    ssl_certificate_key  cert.key;

#    ssl_session_timeout  5m;

#    ssl_protocols  SSLv2 SSLv3 TLSv1;
#    ssl_ciphers  HIGH:!aNULL:!MD5;
#    ssl_prefer_server_ciphers   on;

#    location / {
#        root   html;
#        index  index.html index.htm;
#    }
#}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:18:51.387

下面是我的一个 Wordpress 站点的 nginx 配置，当然，减去域名和 IP 地址......我使用许多在线参考资料构建了这个，它似乎工作得很好。

```
server {
  listen <ip-address>;
  server_name domain.com;
  rewrite ^(.*) $scheme://www.domain.com$request_uri? permanent;
}

server {
  listen <ip-address>;
  server_name www.domain.com; 
  root   /www/domain.com/public_html;

  access_log /www/domain.com/logs/access.log;
  error_log /www/domain.com/logs/error.log;

  location = /favicon.ico {
  log_not_found off;
  access_log off;
  }

  location = /robots.txt {
    allow all;
    log_not_found off;
    access_log off;
  }

  location / {
    index  index.html index.htm index.php;
    try_files $uri $uri/ /index.php;
  }

  location ~ \.php$ {
    include /etc/nginx/fastcgi_params;
    if ($uri !~ "^/images/") {
      fastcgi_pass unix:/var/run/php-fastcgi/php-fastcgi.socket;
    }
    fastcgi_index index.php;
    fastcgi_param  SCRIPT_FILENAME  /www/domain.com/public_html$fastcgi_script_name;
  }

  location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
    expires max;
    log_not_found off;
  }
} 
```

# c++builder - C++ Builder 2009 上下文展望需要很长时间

> ID：14860934
> 
> 赞同：0
> 
> 时间：2013-02-13T18:58:03.750
> 
> 标签：c++builder

我正在使用 C++ Builder 2009 并发现上下文向前看（Ctrl + 空格）需要很长时间。

我的开发机器有很好的硬件，并且正在运行 Win 7。Eclipse 的前瞻速度非常快。

我的构建器环境确实安装了很多 3rd 方组件，但是显示建议不需要 13 秒。

我正在寻找有关如何加快速度的提示/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:20:49.037

代码洞察是一个存在一些问题的功能。它很慢，尤其是在旧版本的 Builder C++ 中。较新的版本变得更好，主要是由于预编译器头向导。

快速了解代码的诀窍是使用预编译的头文件。让 pch 尽可能多地包含 VCL 和标准库。

你不会像 Eclipse 那样快，但它会变得更好。除此之外，如果可以的话，升级到 XE3。

如果您在键入时遇到问题，请将代码洞察的超时时间从 0 毫秒增加到 250 毫秒，那么它不会扼杀您的流程。

# node.js - 在 Express 中，我应该将我的 sitemap.xml 和 robots.txt 文件放在哪里？

> ID：14860938
> 
> 赞同：5
> 
> 时间：2013-02-13T18:58:29.017
> 
> 标签：node.js, express

我只是在学习 Express，并试图确定将我的 sitemap.xml 文件和 robots.txt 文件放在哪里。他们进入 /public 文件夹吗？还是它们进入我的 Express 应用程序的完整根目录？

非常感谢，

克里斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T19:00:41.307

它们需要可公开访问。 `public`似乎是个好地方。这些文件之所以有效，是因为其他外部服务会从您的网站加载它们。如果它们不可访问，它们不会做任何事情。

* * *

虽然，除非您的网站非常简单，否则大多数动态网站都会动态生成`sitemap.xml`。这意味着您为它注册一个路由，轮询您的数据库以查找具有页面的页面/对象，然后根据该信息生成 xml。

# android - 无法接收来自特定 IP 的 UDP 数据包

> ID：14860940
> 
> 赞同：1
> 
> 时间：2013-02-13T18:58:44.413
> 
> 标签：android

我正在尝试连接到发送 UDP 数据包的数据链路。这些数据包没有被“广播”。（我知道有两种方法可以发送 UDP 备份，广播以便任何机器可以在网络上接收，或者发送到特定的 IP……我的理解仅限于此，但我知道它们是发送的到特定的 IP）。

我无法在我正在测试的 Android 应用程序上接收数据包（Galaxy S3 ......清单中已启用互联网权限）。我正在绑定到主机 (IP) 及其关联的端口。在 WireShark 中可以看到数据包流量。

这是我的代码。我遗漏了什么明显的东西？

```
try {
Log.d("UDP", "1");
            DatagramSocket serverSocket = new DatagramSocket();
            Log.d("UDP", "2");
            InetAddress address = InetAddress.getByName(UDP_IP);
            Log.d("UDP", "2a");
            serverSocket.connect(address, UDP_SERVER_PORT);
            Log.d("UDP", "2b");
            serverSocket.setSoTimeout(5000); //5 sec wait for the client to connect
            Log.d("UDP", "3");
            byte[] data = new byte[1024]; 
            Log.d("UDP", "4");
            DatagramPacket packet = new DatagramPacket(data, data.length);
            Log.d("UDP", "5");
            Log.d("UDP", "S: Receiving...");
            serverSocket.receive(packet);
            //lock.release();
            retVar = 1;
            Log.d(" Received Packet", "Good");
        } 
    catch (Exception e) {
      Log.e("UDP", "S: Error", e);
    } 
```

# android - 在 android 上遇到 tesseract 引擎模式的问题

> ID：14860941
> 
> 赞同：0
> 
> 时间：2013-02-13T18:58:45.320
> 
> 标签：android, ocr, tesseract

一般来说，我对 tesseract 和 OCR 是全新的。我正在开发一个 android 应用程序只是为了进行实验。

我正在阅读可以通过设置引擎模式来提高准确性：

```
/** Run Tesseract only - fastest */
    public static final int OEM_TESSERACT_ONLY = 0;

    /** Run Cube only - better accuracy, but slower */
    public static final int OEM_CUBE_ONLY = 1;

    /** Run both and combine results - best accuracy */
    public static final int OEM_TESSERACT_CUBE_COMBINED = 2;

    /** Default OCR engine mode. */
    public static final int OEM_DEFAULT = 3; 
```

所以在我的代码中启动它是这样的：

```
 TessBaseAPI baseApi = new TessBaseAPI();
    baseApi.setDebug(true);
    baseApi.init(DATA_PATH, lang, enginMode);
    Log.v("NUMBER LINES","*************************************************** "+baseApi.getWords());
    baseApi.setImage(bitmap);
   // baseApi.setPageSegMode(baseApi.OEM_TESSERACT_CUBE_COMBINED);
    String recognizedText = baseApi.getUTF8Text();

    baseApi.end(); 
```

但如果我设置`engineMode`为除`OEM_TESSERACT_ONLY`我的应用程序崩溃之外的任何内容并给出以下错误：

```
Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1); 
```

也有人知道如何通过行或单词来重申结果吗？

# android - 无法使用 android 许可库

> ID：14860945
> 
> 赞同：-1
> 
> 时间：2013-02-13T18:58:50.873
> 
> 标签：android, android-lvl

我在尝试让 Licensing 工作时遇到了非常糟糕的情况。我正在关注[这个位置](http://developer.android.com/google/play/licensing/setting-up.html)的文档。我从 Google Play 许可库中的现有代码构建了 LVL 库，并将该库与我的 android 项目一起放入我的工作区。

我正在使用[此示例](http://www.droidforums.net/forum/android-app-developers/69899-market-license-easy-implementation-protect-your-apps.html)中的代码将许可逻辑打包到单独的活动中，但我相信这对我遇到的问题没有实际意义，因为我也从自己的主要活动中尝试过。

问题是：我无法导入 com.android.vending.licensing...

下图说明了这个问题。关于这个问题的互联网研究发现许多开发人员遇到了这个问题和相关问题，但没有一个解决方案对我有用。

有人有线索吗？

![我在 Eclipse 中的项目](../Images/b7983b9397f1d132750c812a17b14854.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:31:30.440

右键单击 LVLibrary -> 属性 -> Android 检查是否选择了 isLibrary（选中）然后进入您的 com.deanblake... 并右键单击它，然后与上面相同，但您会看到参考检查是否添加了库（旁边没有 x）。如果不是，只需单击添加并选择 LVLibrary。

# image-processing - 将 SVG 批量处理为带边框的 PNG

> ID：14860948
> 
> 赞同：2
> 
> 时间：2013-02-13T18:58:59.843
> 
> 标签：image-processing, svg, png, jpeg, imagick

我有一个 SVG 文件，我需要以近 1,000,000 种不同的尺寸（高度 32-1000 像素和宽度 32-1000 像素）将其导出为 PNG。

但是有一个问题，SVG 图像本身的宽高比为 2:1。因此，当 PNG 为 400x200 时，它很容易转换，但当 PNG 为 600x200 时，则需要在两侧填充空白，以免图像失真。

有什么工具可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-25T21:31:20.503

我为此制作了[svgexport](https://github.com/shakiba/svgexport)，~~但目前它居中并裁剪输出而不是填充~~（现在它支持裁剪和填充）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T10:39:47.447

试试inkscape编辑器。该编辑器是 SVG 格式的参考标准。Inkscape 为导出提供了丰富的命令行支持。更多信息：[INKSCAPE 命令行导出手册](http://tavmjong.free.fr/INKSCAPE/MANUAL/html/CommandLine-Export.html)

# sass - 将 sass 转换为 scss

> ID：14860952
> 
> 赞同：3
> 
> 时间：2013-02-13T18:59:16.483
> 
> 标签：sass

嗨，我有这个 sass mixin，我想将其更改为 SCSS mixin，我真的很接近，有人可以帮忙吗？

```
SASS
=animate($name: fadeIn, $duration: 1s, $delay: .2s, $function: ease, $mode: both)
  +experimental(animation, $name $duration $delay $function $mode)

What iv done so far in SCSS
@mixin animate($name, $duration, $delay, $function, $mode) {
animation: {
  name: $name; 
  duration: $duration; 
  delay: $delay; 
  function: $function; 
  mode: $mode;
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:06:02.047

我在想这就是你想要做的。

**混心：**

```
@mixin animate($name, $duration, $delay, $function, $mode) {
   name: $name; 
   duration: $duration; 
   delay: $delay; 
   function: $function; 
   mode: $mode;
} 
```

**包括：**

```
// SELECTOR TO ADD ANIMATION TO
.animation {
    @include animate(fadein, 1s, .2s, ease, both);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T00:53:56.887

SCSS =

```
@mixin animate($name, $duration, $delay, $function, $mode) {
   name: $name; 
   duration: $duration; 
   delay: $delay; 
   function: $function; 
   mode: $mode }

.animation {
    @include animate(fadein, 1s, .2s, ease, both) } 
```

CSS =

```
.animation {
  name: fadein;
  duration: 1s;
  delay: 0.2s;
  function: ease;
  mode: both; } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-02-16T12:50:08.090

你可以试试这个：

```
@mixin animate($name: fadeIn, $duration: 1s, $delay: 0.2s, $function: ease, $mode: both) {
    @include experimental(animation, $name $duration $delay $function $mode);
} 
```

# function - 如何在MATLAB中将函数设置为变量

> ID：14860955
> 
> 赞同：0
> 
> 时间：2013-02-13T18:59:32.443
> 
> 标签：function, matlab, bisection

作为一项家庭作业，我正在编写一个代码，该代码使用二分法来计算一个函数的根，其中一个变量在一个范围内。我创建了一个执行计算的用户函数，但是该函数的输入之一应该是“有趣的”，应该设置为等于该函数。

这是我的代码，在我继续之前：

```
function [ Ts ] = BisectionRoot( fun,a,b,TolMax )

%This function finds the value of Ts by finding the root of a given function within a given range to a given
%tolerance, using the Bisection Method.

Fa = fun(a);
Fb = fun(b);
if Fa * Fb > 0
    disp('Error: The function has no roots in between the given bounds')
else
    xNS = (a + b)/2;
    toli = abs((b-a)/2);
    FxNS = fun(xns);
    if FxNS == 0
        Ts = xNS;
        break
    end
    if toli , TolMax
        Ts = xNS;
        break
    end
    if fun(a) * FxNS < 0
        b = xNS;
    else
        a = xNS;
    end
end

Ts

end 
```

输入参数由我们的老师定义，所以我不能乱用它们。我们应该在运行函数*之前在命令窗口中设置这些变量。*这样，我们以后可以将该程序用于其他事情。（即使我认为 fzero() 可以用来做到这一点）

我的问题是我不确定如何为某事设置乐趣，然后以我可以做乐趣（a）或乐趣（b）的方式使用它。在我们的书中，他们做了一些他们称之为将 f(x) 定义为匿名函数的事情。他们这样做是为了解决一个示例问题：

```
F = @ (x) 8-4.5*(x-sin(x)) 
```

但是当我尝试这样做时，我得到了错误，错误：意外的 MATLAB 运算符。

如果你们想在发布之前尝试运行程序来测试您的解决方案（希望我的程序有效！），您可以使用书中示例中的这些变量：

`fun = 8 - 4.5*(x - sin(x))` `a = 2` `b = 3` `TolMax = .001`

使用这些的书中得到的答案是`2.430664`。

我敢肯定，这个问题的答案非常简单明了，但由于某种原因，我找不到解决方法！感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:39:27.493

为了让您继续前进，您的示例似乎缺少一些语法。而不是其中任何一个（来自您的问题）：

```
fun = 8 - 4.5*(x - sin(x))  % Missing function handle declaration symbol "@"
F = @ (x) 8-4.5*(x-sin9(x))  %Unless you have defined it, there is no function "sin9" 
```

采用

```
fun = @(x) 8 - 4.5*(x - sin(x)) 
```

然后你会这样调用你的函数：

```
fun = @(x) 8 - 4.5*(x - sin(x));
a = 2;
b = 3;
TolMax = .001;
root = BisectionRoot( fun,a,b,TolMax ); 
```

* * *

要调试（您需要这样做），请使用调试器。

1.  该命令`dbstop if error`停止执行并在问题点打开文件，让您检查变量值和函数堆栈。

2.  单击编辑器中的“-”标记会创建一个断点，强制函数在该点暂停执行，再次以便您可以检查内容。请注意，您可以使用编辑器顶部的调试按钮逐行执行代码。

3.  `dbquit`退出调试模式

4.  `dbclear all`清除所有断点

# php - 将图像上传到现有文件夹 PHP

> ID：14860957
> 
> 赞同：0
> 
> 时间：2013-02-13T18:59:36.430
> 
> 标签：php, upload

```
<?php
include('includes/db.php');

$drinks_cat = $_POST['drinks_cat'];
$drinks_name = $_POST['drinks_name'];
$drinks_shot = $_POST['drinks_shot'];
$drinks_bottle = $_POST['drinks_bottle'];
$drinks_availability = 'AVAILABLE';

$msg = "ERROR: ";
$itemimageload="true";
$itemimage_size=$_FILES['image']['size'];
$iname = $_FILES['image']['name'];
if ($_FILES['image']['size']>250000){$msg=$msg."Your uploaded file size is more than 250KB so please reduce the file size and then upload.<BR>";
$itemimageload="false";}

if (!($_FILES['image']['type'] =="image/jpeg" OR $_FILES['image']['type'] =="image/gif" OR $_FILES['image']['type'] =="image/png"))
{$msg=$msg."Your uploaded file must be of JPG , PNG or GIF. Other file types are not allowed<BR>";
$itemimageload="false";}

$file_name=$_FILES['image']['name'];
$add="images"; // the path with the file name where the file will be stored

if($itemimageload=="true")
{
    if (file_exists($add) && is_writable($add)) 
    {
        if(move_uploaded_file ($_FILES['image']['tmp_name'], $add."/".$_FILES['image']['name']))
        {
        echo "Image successfully updated!";
        }
        else
        {
        echo "Failed to upload file Contact Site admin to fix the problem";
        }
    }
    else 
    {
    echo 'Upload directory is not writable, or does not exist.';
    }
}
else
{
    echo $msg;
}

$dir = $add."/".$iname;
echo "<BR>";
// Connects to your Database

mysql_query("INSERT INTO `product_drinks`(`drinks_id`, `drinks_cat`, `drinks_name`, `drinks_shot`, `drinks_bottle`, `drinks_image`, `drinks_availability`) VALUES (NULL,'".$drinks_cat."', '".$drinks_name."','".$drinks_shot."','".$drinks_bottle."','".$dir."','".$drinks_availability."')") or die("insert error");

Print "Your table has been populated";
?> 
```

我正在处理的代码有效，但我必须为我的管理文件夹创建一个新的“图像”文件夹。有什么办法可以将文件上传到管理文件夹之外并将其移动到原始的“图像”文件夹“。我知道这很令人困惑，但我的目录看起来像这样。

clubmaru -admin -images

-css -图像 -js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:09:32.760

您可能正在寻找 PHP 的***重命名***功能。[http://php.net/manual/en/function.rename.php](http://php.net/manual/en/function.rename.php)

将 oldname 参数设置为文件（及其路径），将 newname 参数设置为您想要的位置（显然，与新路径一起）

只需确保要将文件移动到的“图像文件夹”具有正确的权限设置，确保它是可写的。您可能还需要考虑更改**move_uploaded_file**中的参数，以首先将文件放在您想要的位置！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:10:03.370

是的，有一种方法，您需要更改路径。现在你有了路径，`images/$name`这意味着它将把本地目录中的图像目录中的文件放到正在运行的脚本中。

使用目录布局：

```
clubmaru
  ->admin
    ->script.php (the upload file)
    ->images
  ->css
    ->images
      ->js 
```

您使路径相对（或找到另一种选择）

```
$add="../css/images"; 
```

这意味着，上一个目录，进入 css 然后进入图像。

# layout - JavaFX 2 中的 GroupBox / TitledBorder？

> ID：14860960
> 
> 赞同：40
> 
> 时间：2013-02-13T18:59:52.530
> 
> 标签：layout, javafx-2, groupbox, titled-border

JavaFX 2 上是否有类似[GroupBox](http://www.functionx.com/visualc/controls/groupbox.htm)或[TitledBorder的东西？](http://docs.oracle.com/javase/tutorial/figures/uiswing/components/BorderDemo3.png)

感谢您的任何提示:-)

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-13T22:01:40.177

没有这样的标准控件，但很容易创建自己的。这是一个示例实现：

```
/** Places content in a bordered pane with a title. */
class BorderedTitledPane extends StackPane {
  BorderedTitledPane(String titleString, Node content) {
    Label title = new Label(" " + titleString + " ");
    title.getStyleClass().add("bordered-titled-title");
    StackPane.setAlignment(title, Pos.TOP_CENTER);

    StackPane contentPane = new StackPane();
    content.getStyleClass().add("bordered-titled-content");
    contentPane.getChildren().add(content);

    getStyleClass().add("bordered-titled-border");
    getChildren().addAll(title, contentPane);
  }
} 
```

以及随附的CSS：

```
.label {
  -fx-font: 28px Vivaldi;
}

.bordered-titled-title {
  -fx-background-color: white;
  -fx-translate-y: -16;
}

.bordered-titled-border {
  -fx-content-display: top;
  -fx-border-insets: 20 15 15 15;
  -fx-background-color: white;
  -fx-border-color: black;
  -fx-border-width: 2;
}

.bordered-titled-content {
  -fx-padding: 26 10 10 10;
} 
```

该代码来自我为响应 Oracle JavaFX 论坛主题帖子[“等效于 BorderFactory.createTitledBorder”而创建的](http://forums.oracle.com/forums/thread.jspa?messageID=10366976)[示例](https://gist.github.com/jewelsea/2838292)。

示例程序的输出如下所示。

![葛底斯堡](../Images/73d01c4d1df2ece470a0f0881238b392.png)

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2016-06-18T04:22:43.537

我`TitledPane`与`setCollapsible(false)`. 它看起来比使用 CSS 样式更一致。这是结果

[![在此处输入图像描述](../Images/e31d13922e3296011134b3f0236c1709.png)](https://i.stack.imgur.com/FC0W7.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-14T11:50:06.810

Jewelsea 答案的 FXML 版本：

TitledBorder（我将 BorderedTitledPane 重命名为 TitledBorder）

```
package com.example.controls;

import javafx.geometry.Pos;
import javafx.scene.Node;
import javafx.scene.control.Label;
import javafx.scene.layout.StackPane;

public class TitledBorder extends StackPane 
{
    private Label titleLabel = new Label();
    private StackPane contentPane = new StackPane();
    private Node content;

    public void setContent(Node content)
    {
        content.getStyleClass().add("bordered-titled-content");
        contentPane.getChildren().add(content);
    }

    public Node getContent()
    {
        return content;
    }

    public void setTitle(String title)
    {
    titleLabel.setText(" " + title + " ");
    }

    public String getTitle()
    {
        return titleLabel.getText();
    }

    public TitledBorder() 
    {
        titleLabel.setText("default title");
        titleLabel.getStyleClass().add("bordered-titled-title");
        StackPane.setAlignment(titleLabel, Pos.TOP_CENTER);

        getStyleClass().add("bordered-titled-border");
        getChildren().addAll(titleLabel, contentPane);
      }

} 
```

FXML 用法：

```
<?import com.example.controls.*?>

<TitledBorder title="title" >       
    <Label text="label with text" />        
</TitledBorder> 
```

不要忘记样式表！

**将此 CSS 用于普通字体：**

```
.bordered-titled-title {
  -fx-background-color: white;
  -fx-translate-y: -10; /* play around with this value when changing the title font to get a vertically centered title */
}

.bordered-titled-border {
  -fx-content-display: top;
  -fx-border-insets: 20 15 15 15;
  -fx-background-color: white;
  -fx-border-color: black;
  -fx-border-width: 2;
}

.bordered-titled-content {
  -fx-padding: 26 10 10 10;
} 
```

使用这个 CSS，它现在看起来像这样：

![在此处输入图像描述](../Images/8b06248bc6d318b0e5e40dd2a7f2a34b.png)

**更新：** 标题长于内容时的问题：

![在此处输入图像描述](../Images/c09d0bcc6b3eb7820432914626d54a8d.png) 有什么提示可以解决这个问题吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-19T17:33:28.383

这是一个可以加载到具有类似功能的 SceneBuilder 的 FXML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane style="-fx-border-insets: 8 0 0 0; -fx-background-color: #FFFFFF; -fx-border-color: black;">
    <children>
        <Label alignment="TOP_LEFT" layoutX="14.0" style="-fx-padding: 0 5; -fx-background-color: inherit;" text="Title" />
        <AnchorPane prefHeight="200.0" prefWidth="200.0" AnchorPane.bottomAnchor="1.0" AnchorPane.leftAnchor="1.0" AnchorPane.rightAnchor="1.0" AnchorPane.topAnchor="10.0" />
    </children>
</AnchorPane> 
```

如果您需要使标签文本/边框尺寸更大，您只需要编辑子 AnchorPane 的 CSS 和 topAnchor 以及父 AnchorPane 的 -fx-border-insets 的第一个参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T19:05:42.880

GroupBox - 据我所知，这是通常的组布局。

TitledBorder - 看起来像 TitledPane（通常是 Accordion 的一个组件，但也可以是单独存在的控件）。

JavaFX-2 类似物看起来与您的不同（但不显着），并且像往常一样，您可以使用不同的控件外观更改方式：css、控件的皮肤替换等

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-12T04:37:15.380

这是一个基于 TitledPane 的 GroupBox 实现。它提供了三种方法来设置 GroupBox 的标题、内容和内容填充。

```
public final class GroupBox extends Parent {

    private StackPane _stackPane;
    private TitledPane _titledPane;

    public GroupBox() {
        _stackPane = new StackPane();
        _titledPane = new TitledPane();
        setContentPadding(new Insets(10));
        _titledPane.setCollapsible(false);
        _titledPane.setContent(_stackPane);
        super.getChildren().add(_titledPane);
    }

    public GroupBox(String title, Node content) {
        this();
        setText(title);
        setContent(content);
    }

    public GroupBox(String title, Node content, Insets contentPadding) {
        this(title, content);
        setContentPadding(contentPadding);
    }

    public void setText(String value) {
        _titledPane.setText(value);
    }

    public void setContent(Node node) {
        _stackPane.getChildren().add(node);
    }

    public void setContentPadding(Insets value) {
        _stackPane.setPadding(value);
    }
} 
```

# windows - 分配用户权限时出现 Cacls 错误

> ID：14860966
> 
> 赞同：0
> 
> 时间：2013-02-13T19:00:16.323
> 
> 标签：windows, vbscript, rights, ownership, cacls

谁能告诉我为什么这个命令会失败：“文件名、目录名或卷标语法不正确。”

cacls c:\TestHome\brytest\JBryan42 /t /c /g JBryan42:F

虽然此命令成功：

cacls c:\TestHome\brytest\JBryan42 /t /c /g 管理员：F

它们都显示“已处理的目录：c:\TestHome\brytest\JBryan42”，但对于 JBryan42，之后会出现错误。

这是在 Windows 7 上，以管理员身份登录。

我的目标是为 JBryan42 授予全部权利和所有权（用户存在且非管理员）。

任何人都可以在这里给我一个线索吗？我错过了什么？为什么 Windows 不能有“chown”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:37:53.367

也许最好在没有所有权的情况下提供访问权限？这不是一个可行的解决方案吗？我猜你会用 /p 代替 /g 吗？

# python - 减少 Python 中的二进制模式

> ID：14860967
> 
> 赞同：6
> 
> 时间：2013-02-13T19:00:18.157
> 
> 标签：python

我有一个我认为有点有趣的问题，即使只是从编程练习的角度来看也是如此。

我有一长串二进制模式，我想将它们简化为更紧凑的形式呈现给用户。要遵循的符号是“-”可以表示“1”或“0”，因此`['1011','1010']`可以表示为 `['101-']`和

```
['1100', '1000', '0100', '0000', '1111', '1011', '0111', '0011'] 
```

可以表示为`['--00', '--11']`。请注意，所有模式的长度始终相同（尽管很可能长于 4 位）。

扩展模式相当简单，减少它们有点棘手。

我想出了一些代码来完成这个，但它很长，很慢，而且有点难以阅读。

```
def reducePatterns(patterns):
    '''Reduce patterns into compact dash notation'''
    newPatterns = []  #reduced patterns
    matched = []      #indexes with a string that was already matched
    for x,p1 in enumerate(patterns):    #pattern1
        if x in matched: continue       #skip if this pattern has already been matched
        for y,p2 in enumerate(patterns[x+1:],1):
            if x+y in matched: continue #skip if this pattern has already been matched
            diffs=0     # number of differences found
            for idx,bit in enumerate(zip(p1,p2)):
                if bit[0] != bit [1]:     #count the number of bits that a different
                    diffs += 1
                    dbit  = idx
                if diffs >1:break
            if diffs ==1:   #if exactly 1 bit is different between the two, they can be compressed together
                newPatterns.append(p1[:dbit]+'-'+p1[dbit+1:])
                matched+=[x,x+y]
                break
        if x not in matched: newPatterns.append(p1) #if the pattern wasn't matched, just append it as is.

    if matched:         #if reductions occured on this run, then call again to check if more are possible.
        newPatterns = reducePatterns(newPatterns)

    return newPatterns 
```

有没有人有更好/更有效的方法来做到这一点的建议？更有效的循环/使用迭代器？正则表达式魔术？我错过了一些按位操作包？至少更具可读性的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T19:17:08.860

您正在寻找的是Python 中的[Quine–McCluskey 算法](http://en.wikipedia.org/wiki/Quine%E2%80%93McCluskey_algorithm)实现。

一个快速的谷歌将我带到了 Python 中的这个 SO Page [Quine-McCluskey 算法](https://stackoverflow.com/questions/7537125/quine-mccluskey-algorithm-in-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T20:22:09.100

我还没有彻底测试过这个（并且它以一种可能不是非常有效的方式使用递归），但它似乎有效，并且至少符合您的“更具可读性”标准：

```
from itertools import combinations

def collapse(binaries):
    result = set(binaries)
    for b1, b2 in combinations(result, 2): 
        for i in range(len(b1)):
            if b1[:i] + b1[i+1:] == b2[:i] + b2[i+1:]:
                merged = "-".join([b1[:i], b1[i+1:]])
                return sorted(collapse(result ^ {b1, b2, merged}))
    return sorted(result) 
```

例子：

```
>>> collapse(['1100', '1000', '0100', '0000', '1111', '1011', '0111', '0011'])
['--00', '--11']

>>> collapse(["00", "01", "10", "11"])
['--']

>>> collapse(["011", "101", "111"])
['-11', '101'] 
```

# asp.net - 循环通过 Web 用户控件上的控件

> ID：14860968
> 
> 赞同：0
> 
> 时间：2013-02-13T19:00:20.090
> 
> 标签：asp.net, vb.net, sitecore

我在循环访问用户控件上的控件时遇到问题。

我尝试了以下代码，但无法找到用户控件上的复选框。（你可以看到我之前的一些尝试，我已经注释掉了。）

```
 'For Each Ctrl As Control In Page.Controls
    'For Each Ctrl As Control In Me.Page.Controls
    'For Each ctrl As Control In Request.Form
     '''Dim frm As Control = Me.FindControl("frmDefault")
     '''For Each Ctrl As Control In frm.Controls

    Dim Check As CheckBox

    For Each Ctrl As Control In Me.Controls
        If TypeOf Ctrl Is CheckBox Then
            Check = Ctrl
            ' Do something here...
        End If
    Next 
```

用户控件上有多个复选框。上面显示的代码位于用户控件的代码隐藏页面上。

（用户控件与我的 CMS Sitecore 一起使用。我不确定这是否对我遇到的问题有任何影响。）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:41:58.500

Sitecore has no effect on walking through the control-collection, this should be possible.

Are you looping through the right Control-Collection? Is Me.Controls your Page-, UserControl- or RepeaterItems-Control collection (or another collection)? If the checkboxes are nested in another control, you need to walk to that control-collection.

Maybe you should add your .ascx code so we can see what your control-collection looks like.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:59:15.843

我终于弄清楚发生了什么。

我在不同的表格中有复选框。这些表包含*runat="server"*。该表位于还包含*runat="server"*的 Div 标记内。

因此，我的代码永远找不到复选框。我必须添加一个循环遍历 Div 标签并找到适当表的*For Each 。*然后我必须遍历表格才能找到复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:41:22.503

您的某些控件具有控件。您的循环将忽略这些控件。我有一些用于获取所有控件的扩展方法（您可以指定 CheckBox 类型，因此您无需在调用代码中进行类型检查）

```
<Extension()> _
Public Function ChildControls(ByVal parent As Control) As List(Of Control)
    Return ChildControls(Of Control)(parent)
End Function

<Extension()> _
Public Function ChildControls(Of T As Control)(ByVal parent As Control) As List(Of T)
    Dim result As New ArrayList()
    For Each ctrl As Control In parent.Controls
        If TypeOf ctrl Is T Then result.Add(ctrl)
        result.AddRange(ChildControls(Of T)(ctrl))
    Next
    Return result.ToArray().Select(Of T)(Function(arg1) CType(arg1, T)).ToList()
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T19:45:34.877

这会显示复选框的名称吗？

```
For Each Ctrl As Control In Me.Controls
    If TypeOf Ctrl Is CheckBox Then
          MsgBox(Ctrl.Name)
    End If
Next 
```

这应该让你知道你是否点击了复选框。如果不重新检查您的页面设计。

我相信您分配 ctrl 进行检查应该没有问题，它应该充当指向 ctrl 的指针。如果页面上有多个复选框，请针对 ctrl.name 执行 if 语句以获取正确的复选框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-18T02:54:17.190

好吧，我解决了它如下。（C＃）

```
 foreach (Control c in Page.Controls)
        {
            foreach (Control childc in c.Controls)
            {
                if (childc.ClientID == "menupadraolateral1")
                {
                    foreach (Control cMnuLat in childc.Controls)
                    {

                        //here you can access the controls of usercontrol                           

                    }

                }
            }
        } 
```

其中“menupadraolateral1”是调用用户控件时使用的 ID

我希望我有帮助

# signalr - SignalR 未在客户端使用 DNS 别名调用结果

> ID：14860970
> 
> 赞同：2
> 
> 时间：2013-02-13T19:00:25.710
> 
> 标签：signalr

我连接到我的服务器，该服务器为别名进行负载平衡以指向 2 个服务器 01 和 02，并且它为了参数而循环连接。我可以毫无问题地连接到集线器，我什至可以将内容发送到服务器，但是当它返回给客户端时，我从未调用过我的方法。如果我绕过负载平衡器并明确使用服务器名称，它总是可以正常工作。

我什至在跟踪它，并使用 Clients.Client(clientId).completeJob(stuff) 从确切的原始服务器发回消息，并且在服务器上执行得很好，但如果我继续使用，它永远不会完成。

哦，它与服务器发送的事件有关。我错过了什么还是不支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:14:04.590

服务器发送的事件建立一个长时间运行的连接，但与 WebSockets 不同，它不是双向的。该连接只能用于向客户端推送数据。

当 WebSocket 传输不可用时，SignalR 使用常规 XHR 从客户端发送数据。这意味着负载平衡器可能会将客户端到服务器集线器方法调用路由到与客户端最初建立服务器发送事件连接的服务器不同的服务器。

执行的服务器`Clients.Client(clientId).completeJob(stuff)`可能不拥有可以将消息推送到指定客户端的连接。（尽管从服务器上的集线器方法返回值将通过调用该方法的同一连接将数据发送回客户端。）

SignalR 可以在负载均衡器后面工作。它只需要更多的设置，因此所有 SignalR 服务器都可以通过诸如服务总线或 Redis 之类的背板相互通信。这允许将消息分派到拥有服务器到客户端连接的服务器。

[https://github.com/SignalR/SignalR/wiki/Azure-service-bus](https://github.com/SignalR/SignalR/wiki/Azure-service-bus)详细介绍了如何在 Azure 上设置服务总线背板。

# php - 从自定义 wordpress 编辑器输出内容？

> ID：14860971
> 
> 赞同：0
> 
> 时间：2013-02-13T19:00:26.430
> 
> 标签：php, wordpress

我正在为我的 wordpress 主题使用选项框架（NHP 主题选项），我对添加诸如“if”语句之类的内容没有问题，例如，如果选择了选项“回显”此信息。

仅此一项就允许许多动态选项。我在我的管理面板中添加了一个 wordpress 编辑器框，我对如何输出框内的信息有点迷茫。

它在我的主题选项页面内的数组中，

```
 array(
                    'id' => 'header-area',
                    'type' => 'editor',
                    'title' => __('Editor Option', 'my-opts'), 
                    'sub_desc' => __('Can also use the validation methods if required', 'my-opts'),
                    'desc' => __('This is the description field, again good for additional info.', 'my-opts'),
                    'std' => 'headarea'
), 
```

通常我使用 if 语句，这是我如何输出选项的示例。

```
 <?php if( my_opts_get('header-area') ) { 

      $fixed_header_css = 'top: 0;';

  } else {

      $fixed_header_css = 'top: 51px;';

} ?> 
```

这只是一个例子，但我是一个 PHP 新手，不知道如何输出编辑器数组。

我知道它不是通过使用 if 语句，我尝试过类似的事情

```
 <?php echo my_opts_get('header-area') ?> 
```

我认为这可能很接近，但我显然错过了一些东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:32:26.043

答案就在我的眼皮底下，我只需要使用这行简单的代码来输出数据。

```
 <?php echo moon_opts_get('header-present-area', 'home-area'); ?> 
```

# ruby-on-rails - “捆绑更新”无法使用本机扩展安装 pg (0.14.1)

> ID：14860972
> 
> 赞同：0
> 
> 时间：2013-02-13T19:00:28.003
> 
> 标签：ruby-on-rails, ruby

我跑了`bundle update`（这样我就可以安装rails），但是得到了这个错误：

```
$ bundle update
..... < other stuff ....>
Installing pg (0.14.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/user/.rvm/rubies/ruby-1.9.3-p374/bin/ruby extconf.rb 
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

我是新手，`Ruby`这一切，谁能告诉我这里有什么问题？这是在 OSX 上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:04:13.800

确保首先安装 postgres。我建议您通过Mac 包管理器[homebrew来执行此操作。](http://mxcl.github.com/homebrew/)

```
brew install postgresql 
```

[这是](http://www.moncefbelyamani.com/how-to-install-postgresql-on-a-mac-with-homebrew-and-lunchy/)有关如何在 Mac 上安装 postgres 的众多教程之一。

**编辑**

看起来 gem 找不到您的 postgres 配置，这是与您的问题类似的答案：

[https://stackoverflow.com/a/9669523/277370](https://stackoverflow.com/a/9669523/277370)

# java - 在这种情况下如何初始化变量？

> ID：14860973
> 
> 赞同：0
> 
> 时间：2013-02-13T19:00:29.580
> 
> 标签：java, android, eclipse, sockets, p2p

我正在开始一个意图，其中活动开始取决于设备是组所有者还是只是加入的对等方。目前，instructIntent 尚未初始化。我应该像 Eclipse 建议的那样让它为空吗？还是有一些更专业的 Java 代码风格的处理方式？

```
Intent instructIntent;
if (info.groupFormed && info.isGroupOwner) {
    Log.d(WiFiDirectActivity.TAG, "DeviceDetailFragment_onCreateView: btn_ready pressed on host");
    instructIntent = new Intent(getActivity(), LeaderActivity.class);
} else if (info.groupFormed) {
    Log.d(WiFiDirectActivity.TAG, "DeviceDetailFragment_onCreateView: btn_ready pressed on client");
    instructIntent = new Intent(getActivity(), MusicianActivity.class);
}

instructIntent.putExtra(Intent.EXTRA_TEXT, "Play");
instructIntent.putExtra(MusicService.EXTRAS_GROUP_OWNER_ADDRESS, info.groupOwnerAddress.getHostAddress());
instructIntent.putExtra(MusicService.EXTRAS_GROUP_OWNER_PORT, 8080);
startActivity(instructIntent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:05:03.083

将其设为 null 将无济于事。真正的问题是如果 info.groupFormed 为假，那么 instructIntent 中将没有有效值。但是即使您将其初始化为 null，它仍然无效。这意味着当您在其中调用 putExtra 时，它将引发异常。更好的方法是：

```
if(info.groupFormed){
    if(info.isGroupOwner){
        instructIntent = new Intent(getActivity(), LeaderActivity.class);
    }
    else{
        instructIntent = new Intent(getActivity(), MusicianActivity.class);
    }
    //all of your putExtra and startIntent calls here
} 
```

请注意，所有转到 put 和 start 调用意图的分支都将创建一个新的意图。这样，您将不会有 null 或未初始化的变量尝试调用成员函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T19:09:56.163

任何在 java 中声明的变量在使用前都应该被赋值。在上面给出的代码中，如果 if 和 else if 条件都不满足，我们可能不会为 instructIntent 变量分配任何值。

因此，您必须将 instructIntent 初始化为 null，如下所示。

```
Intent instructIntent = null; 
```

# android - 在 webview 加载时显示启动屏幕

> ID：14860974
> 
> 赞同：0
> 
> 时间：2013-02-13T19:00:30.267
> 
> 标签：android, android-intent, android-webview

我想在 webview 加载时显示启动画面。如何在此代码中等待超时时间（30 秒），然后显示 web 视图。我不知道我错过了什么？

```
public class MainActivity extends Activity {

    public static Object SPLASH_LOCK = new Object();
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        WebView mywebview = (WebView) findViewById(R.id.webview);

         WebSettings webSettings = mywebview.getSettings();
         webSettings.setJavaScriptEnabled(true);
         mywebview.setVerticalScrollBarEnabled(false);
         mywebview.setHorizontalScrollBarEnabled(false);
         mywebview.getSettings().setLoadWithOverviewMode(true); 
         mywebview.getSettings().setUseWideViewPort(true);
         mywebview.getSettings().setRenderPriority(RenderPriority.HIGH);
         mywebview.setWebViewClient(new WebViewClient());
         mywebview.loadUrl("http://www.xxx.com/mobile/index.php?ver=1");

          startActivity(new Intent(this, SplashActivity.class));
    }
    public void onPageFinished (WebView view, String url) {
        synchronized (SPLASH_LOCK) {
            SPLASH_LOCK.notifyAll();
        }
    }    

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        WebView mywebview = (WebView) findViewById(R.id.webview);
        if ((keyCode == KeyEvent.KEYCODE_BACK) && mywebview.canGoBack()) {
            mywebview.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

} 
```

这是飞溅活动

```
public class SplashActivity extends Activity {

    private static String TAG = SplashActivity.class.getName();
    private static long MAX_SPLASH_TIME = 30000;

       @Override
       protected void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);

          this.requestWindowFeature(Window.FEATURE_NO_TITLE);    // Removes title bar
          this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);    // Removes notification bar

          setContentView(R.layout.splash);

          new Thread() {
              @Override
              public void run() {
                  synchronized (MainActivity.SPLASH_LOCK) {
                      // wait for notify or time-out
                      try { MainActivity.SPLASH_LOCK.wait(MAX_SPLASH_TIME); }
                      catch (InterruptedException ignored) {}
                  }
                  finish();
              }
          }.start();

       }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:25:52.573

方法`onPageFinished`from`MainActivity`将永远不会被调用。尝试扩展`WebViewClient`类并覆盖`onPageFinished`. 然后在这里创建这个类的对象

```
mywebview.setWebViewClient(new CustomWebViewClient()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-07T14:31:54.203

您可以改为设置主要活动的背景，它的工作原理相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-15T15:50:24.423

@abc667 的意思是您必须以这种方式扩展 WebViewClient 以便调用它：

```
webView.setWebViewClient(new WebViewClient(){

@Override
public void onPageFinished (WebView view, String url) {
        synchronized (SPLASH_LOCK) {
            SPLASH_LOCK.notifyAll();
        }
    }   
} 
```

# jquery - 似乎无法根据内容选择元素

> ID：14860978
> 
> 赞同：0
> 
> 时间：2013-02-13T19:00:32.873
> 
> 标签：jquery, match

我正在尝试根据其内容选择一个元素，但我似乎无法让它工作。

我尝试过使用正则表达式`match()`：

```
$('.mod')
    .filter(function() {
    return this.match(/abc/);
 })
    .html("Test Worked!")
; 
```

并且`.text()`：

```
$('.mod')
    .filter(function() {
    return this.text() == 'abc' ;
 })
    .html("Test Worked")
; 
```

但都没有奏效。

难道我做错了什么？我更喜欢使用正则表达式，但现在我只想以某种方式选择元素。

在这里摆弄：http: [//jsfiddle.net/sethj/z3MBw/2/](http://jsfiddle.net/sethj/z3MBw/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:02:19.017

text() 是一个 jQuery 方法：

```
$('div').filter(function() {
    return $(this).text().match(/mod/);
}).html("Matched!"); 
```

[**小提琴**](http://jsfiddle.net/z3MBw/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T19:02:00.183

用这个 ：

```
$('.mod')
  .filter(function() {
  return $(this).text() == 'abc' ;
})... 
```

您不能调用`text()`DOM 元素，必须将元素包装为 jQuery 对象。

# wpf - 如何通知从委托更改的属性和更新 UI

> ID：14860982
> 
> 赞同：1
> 
> 时间：2013-02-13T19:00:41.290
> 
> 标签：wpf, events, mvvm, delegates, caliburn.micro

我在一个 wpf 应用程序中使用 caliburn micro，其中我有一个列表和详细视图模型及其并排视图。从左侧列表中选择一个项目，然后在详细信息 vm 中查看右侧的详细信息。

如果详细信息`IsDirty`（已更改，未保存）并且他们从列表中选择了一个新项目，我想通知用户这一事实。我的工作正常。但是，如果用户单击“否”以留在他们的脏项目上，我希望列表视图留在他们当前的项目上。这是我到目前为止所拥有的：

`ListViewModel`：

```
 Private _selectedItem As Library.VEntityStatusInfo
    Public Property SelectedItem As Library.VEntityStatusInfo
        Get
            Return _selectedItem
        End Get
        Set(value As Library.VEntityStatusInfo)
            Events.Publish(New SelectionChangingEvent With {.Sender = Me,
                                                            .Identification = value.Identification,
                                                            .Callback = Sub(id As Integer)
                                                                            _selectedItem = (From m In Model Where m.Identification = id).FirstOrDefault
                                                                            NotifyOfPropertyChange(Function() SelectedItem)
                                                                        End Sub})
        End Set
    End Property 
```

`DetailViewModel`：

```
Public Sub Handle(message As SelectionChangingEvent) Implements IHandle(Of SelectionChangingEvent).Handle
    If TryCast(message.Sender, EntityList.EntityListViewModel) Is Nothing Then Return

    If Me.Model Is Nothing OrElse Me.Model.Identification <> message.Identification Then
        CanChange(message.Identification, message.Callback)
    End If
End Sub

Private Sub CanChange(identification As Integer, eventCallback As System.Action(Of Integer))
    If Me.Model IsNot Nothing AndAlso Me.Model.IsDirty Then
        Dialogs.ShowMessageBox(
            "You have unsaved data.  Are you sure you want to change employee's?  All changes will be lost.",
            "Unsaved Changes",
            MessageBoxOptions.YesNo,
            Sub(box)
                If box.WasSelected(MessageBoxOptions.Yes) Then
                    If String.IsNullOrEmpty(identification) Then
                        Me.Model = Nothing
                        Me.OnRefreshed()
                    Else
                        BeginRefresh("GetByIdentificationAsync", identification)
                    End If
                    eventCallback(identification)
                Else
                    eventCallback(Model.Identification)
                End If
            End Sub)
    Else
        eventCallback(identification)
        BeginRefresh("GetByIdentificationAsync", identification)
    End If
End Sub 
```

`SelectedItem`绑定到`ListBox` `SelectedItem`并且可以正常工作。当我在每个步骤中放置断点时，它们都被命中，`Get`包括`NotifyOfPropertyChanged`. 但是 UI 无法更新。

# delphi - 格式和指针/十六进制值（内存覆盖）

> ID：14860985
> 
> 赞同：4
> 
> 时间：2013-02-13T19:00:52.307
> 
> 标签：delphi, memory, delphi-xe2, string-formatting, overwrite

在我的 Delphi XE2 32 位应用程序 (Update 4 Hotfix 1 Version 16.0.4504.48759) 中，我使用 Format() 例程来记录指针值。

例如：

```
Format('MyObject (%p)', [Pointer(MyObject)]); 
```

但是，生成的字符串有时包含垃圾字符（例如，在这种情况下，“？”或“|”代替十六进制数字）：

```
MyObject (4E?|2010) 
```

当用 '%x' 替换 '%p' 时，我也会得到相同的结果，如下所示：

```
Format('MyObject (%x)', [Integer(MyObject)]); 
```

但是，使用整数值总是有效的：

```
Format('MyObject (%d)', [Integer(MyObject)]);

MyObject (1291453120) 
```

是否有我不知道的错误，或者这可能与这里遇到的问题有关？

[为什么将“%s”以外的任何内容与 Variant 一起使用时，Format 会崩溃？](https://stackoverflow.com/questions/5542366/format-and-variants)

**更新**

我接受了 Jeroen 的回答，因为它通过消除过程引导我找到了解决方案。在通过 F7 启动应用程序的情况之后（根据评论），我认为在此过程的早期一定会出现问题。凭直觉，我从它的 IDE 菜单中禁用了 madExcept，重新构建了应用程序，问题就消失了。显然，madExcept 链接到我的应用程序的任何代码都会导致 SysUtils 常量 TwoHexLookup 被覆盖。重新启用 madExcept 和重建（我没有任何其他更改）也有效，因此在链接阶段肯定存在一些损坏。

Jeroen 概述的用于检测内存损坏的策略是一个有用的练习，如果我遇到类似的情况应该证明是有价值的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:30:59.217

我最好的假设是您的代码正在修改一些不应该修改的内存，可能是通过取消引用未初始化的指针。我创建了一个可重现的案例来证明这种可能性。至少，它可以在我的机器上使用我的编译器版本重现。在另一种情况下，完全相同的代码可能不会做同样的事情。

```
procedure TForm1.Button1Click(Sender: TObject);
var
  P : pbyte;
  S : string;
  T : ansistring;
begin
  // There's nothing special about HexDisplayPrefix.
  // It just happens to be one of the last global variables
  // declared in SysUtils.

  P := @ ( HexDisplayPrefix );

  // A few bytes beyond that is TwoHexLookUp.
  // This is a static array of unicode characters used by the IntToHex routine,
  // which is in turn used by Format when %p or %x are used.

  // I'll add an offset to P so that it points into that array.
  // I'll make the offset odd so that it points to the high byte of a character.
  // Of course, I can't guarantee that the same offset will work for you

  P := P + 5763;

  // Change the lookup table.
  // Of course, you would never do this on purpose.

  P ^ := 39;

  // Now let's call IntToHex

  S := IntToHex ( $E0, 2 );

  // Show the value on the screen.
  // Hey look, the zero has been replaced with a star.

  memo1 . lines . add ( S );

  // Convert the unicode string to an ansistring

  T := ansistring ( S );

  // Show the value on the screen.
  // When converting to Ansi, the system doesn't know what to do with the star,
  // so it replaces it with a question mark.

  memo1 . lines . add ( unicodestring(T) );

end; 
```

![显示带星号的 E 和带问号的 E](../Images/2c247bb4bbe7fa59964a64f0e03093b8.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T19:37:54.470

由于这似乎是内存覆盖（参见您对[user1008646的](https://stackoverflow.com/users/1008646/user1008646)[评论](https://stackoverflow.com/questions/14860985/format-and-pointers-hex-values#comment21004108_14894799)），您可以尝试按照以下步骤操作：

1.  首先尝试找出哪个内存地址被覆盖。你提到那`s := IntToHex(2129827392, 8);`失败了。找出正确的值，然后找出它是否在`TwoHexLookUp`.
2.  如果它在 范围内`TwoHexLookUp`，则设置一个数据更改断点（请参阅[如何在对象字段值更改时定义断点？](https://stackoverflow.com/questions/14164631/how-to-define-a-breakpoint-whenever-an-object-field-value-changes)和[添加数据断点](http://docwiki.embarcadero.com/RADStudio/XE3/en/Add_Address_Breakpoint_or_Add_Data_Breakpoint)了解如何执行此操作）。
3.  运行您的应用程序，直到断点触发。

广告 1：可能最简单的方法是查看哪个值更改与您在运行时观察到`TwoHexLookUp`的结果相同，从而得到错误的结果。`s := IntToHex(2129827392, 8);`

星期四我正在为一个客户做一些德尔福的工作，所以我可能有时间更深入地挖掘。

*编辑*
当您使用 F7 逐步完成您的过程时，您确实进入了`SysInit`第一个。

你可以在那里做的已经在`TwoHexLookup`数组上设置了一个断点。
然后是 F9/F8/F7（取决于您想要的粒度）并密切关注 Watch 窗口中的阵列。那应该让你继续前进。

# excel - Excel VBA 动态数据验证给出“应用程序定义的对象”错误

> ID：14860987
> 
> 赞同：1
> 
> 时间：2013-02-13T19:01:02.420
> 
> 标签：excel, vba

当工作簿打开时，我试图将数据验证下拉到工作表“数据”中的单元格“B22”中。我收到这个错误

```
Run-time error '1004'
Application-defined object error 
```

并且应用程序在此代码处中断：

```
.Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
xlBetween, Formula1:=value_list 
```

这是 WorkbookOpen() 子：

```
Private Sub Workbook_Open()
    Dim oCon As ADODB.Connection
    Dim oRS As ADODB.Recordset
    Dim rng As Range

    Set oCon = New ADODB.Connection
    oCon.ConnectionString = "Provider=SQLOLEDB;Data Source=MARS;Initial Catalog=automation;Trusted_connection=yes;"
    oCon.Open
        Set oRS = New ADODB.Recordset
        oRS.ActiveConnection = oCon
        oRS.Source = "select insurer.name from person as insurer where insurer.person_class_id = 2 order by insurer.name asc"
        oRS.CursorType = adOpenStatic
        oRS.Open
        value_list = ""

     Do While Not oRS.EOF
         value_list = value_list & oRS(0) & ","
         r = r + 1
         oRS.MoveNext
     Loop

     value_list = Mid(value_list, 1, Len(value_list) - 1)

     With Sheets("Data").Range("B22").Validation
        .Delete
        .Add Type:=xlValidateList, AlertStyle:=xlValidAlertStop, Operator:= _
        xlBetween, Formula1:=value_list
        .IgnoreBlank = True
        .InCellDropdown = True
        .InputTitle = ""
        .ErrorTitle = ""
        .InputMessage = ""
        .ErrorMessage = ""
        .ShowInput = True
        .ShowError = True
    End With

    oRS.Close
    oCon.Close
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:36:39.310

我做了一些测试，发现（至少在 Excel 2003 中）如果`value_list`长度大于 255 个字符，您将收到此错误。

一种可能的解决方法可能是将列表值加载到命名范围并分配`Formula1:="=YourRangeName"`，但我尚未对此进行测试。

# bash - Bash 转义和语法

> ID：14860988
> 
> 赞同：0
> 
> 时间：2013-02-13T19:01:06.470
> 
> 标签：bash

我有一个小的 bash 文件，我打算用它来确定我当前的 ping 与我的平均 ping。

```
#!/bin/bash
output=($(ping -qc 1 google.com | tail -n 1))
echo "`cut -d/ -f1 <<< "${output[3]}"`-20" | bc 
```

这会输出我的 ping - 20 ms，这是我想要的数字。但是，如果数字是正数，我还想在前面加上`+`“ms”。

这让我想到了我的首要问题：关于转义和如此繁重的“缩进”的 Bash 语法有点不稳定。

虽然我会对如何做我想做的事情的答案感到满意，但我想要一个链接或解释 bash 语法究竟是如何处理这类事情的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:19:27.040

```
output=($(ping -qc 1 google.com | tail -n 1))
echo "${output[3]}" | awk -F/ '{printf "%+fms\n", $1-20}' 
```

in的`+`修饰符`printf`告诉它打印符号，无论是正的还是负的。

并且由于我们使用`awk`，因此无需使用`cut`or`bc`获取字段或进行算术运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:14:54.460

Bash 不能处理浮点数。一种解决方法是`awk`像这样使用：

```
#!/bin/bash
output=($(ping -qc 1 google.com | tail -n 1))
echo "`cut -d/ -f1 <<< "${output[3]}"`-20" | bc | awk '{if ($1 >= 0) printf "+%fms\n", $1; else printf "%fms\n", $1}' 
```

*请注意，如果 bc 的结果不是正数，则不会打印任何内容*

输出：

```
$ ./testping.sh 
+18.209000ms 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:23:01.540

这是我的看法，认识到 bc 的结果可以被视为字符串：

```
output=($(ping -qc 1 google.com | tail -n 1))
output=$(echo "`cut -d/ -f1 <<< "${output[3]}"`-20" | bc)' ms'
[[ "$output" != -* ]] && output="+$output"
echo "$output" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T19:17:22.480

``..``如果您使用不推荐使用的样式命令扩展，则在 bash 中转义非常糟糕。在这种情况下，您必须转义任何反引号，这意味着您还必须转义任何其他转义。`$(..)`嵌套好多了，因为它不会添加另一层转义。

无论如何，我会直接这样做：

```
ping -qc 1 google.com.org | awk -F'[=/ ]+' '{n=$6} 
    END { v=(n-20); if(v>0) printf("+"); print v}' 
```

# css - 字体 ie8 问题

> ID：14860990
> 
> 赞同：0
> 
> 时间：2013-02-13T19:01:14.633
> 
> 标签：css, internet-explorer-8, font-face

我正在使用具有以下 css 规则的自定义字体系列：

```
@font-face {
    font-family: 'matrix';
    src: url('MaSGRgLn.eot');
    src: url('MaSGRgLn.eot?#iefix') format('embedded-opentype'), url('MaSGRgLn.woff') format('woff'), url('MaSGRgLn.ttf') format('truetype'), url('MaSGRgLn.svg#MatrixScriptGr-RegularLin') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

可以肯定的是，我已经将我的主要字体转换为所有替代字体。这些对除ie < ie9 之外的所有浏览器都有效。有什么我错过或没有注意的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:35:16.503

根据我的测试，需要注意的一件重要事情是字体系列名称必须与 EOT 文件中的内容匹配（可使用十六进制编辑器查看，或者如果您有匹配的 TTF 和 Windows，字体预览会告诉您） .

如果名称不同，IE8 不会显示您的字体，IE9（即使在 IE8 模式下）也不存在此问题。

在您的情况下，SVG 版本的名称为“MatrixScriptGr-RegularLin”。尝试在 CSS @font-face font-family 定义中使用相同的名称。

# image - 如何使用 im4java 提高图像质量？

> ID：14860993
> 
> 赞同：2
> 
> 时间：2013-02-13T19:01:21.137
> 
> 标签：image, imagemagick, im4java

我正在使用 im4java 库进行 ImageMagick 的图像处理操作。

我正在使用的代码如下所示：

```
ImageCommand imageCommand = new ConvertCmd();
imageCommand.setSearchPath(getImageMagickPath());
operation = new IMOperation();
operation.quality(100d);
operation.addImage();
operation.resize(getWidth());
operation.addImage();
imageCommand.run(operation, sourceImage, extention); 
```

但是生成的图像质量很差。使用命令行做同样的事情会产生 4 倍的大小和更好的质量。使用 im4java 时是否需要设置任何额外的设置？文件格式为.jpg。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:58:30.507

这是我正在使用的代码，它就像魅力一样工作：

```
 private static void saveScaleImage(File image, String outputImagePath, int width, Integer height, float quality, boolean fill) throws Exception {
        Info info = new Info(image.getPath(), true);
        String imageFormat = info.getImageFormat();
        IMOperation op = new IMOperation();
        op.addImage(imagen.getPath());
        int imageWidth = info.getImageWidth(),
            imageHeight = info.getImageHeight();
        if (imageWidth> 0 && imageHeight > 0 && (imageFormat == null || !imageFormat.equalsIgnoreCase("TIFF"))) {
            //fill transparencies && extra space with white
            op.size(imageWidth, imageHeight);
            op.addRawArgs("xc:white");
            op.addImage(outputImagePath);
            // set up command
            CompositeCmd composite = new CompositeCmd();
            composite.run(op);
            op = new IMOperation();
            op.addImage(outputImagePath);
        }
        //add strip irrelevant info
        op.strip();
        //resize
        if (fill) { //crop image + fill
            op.resize(width, height, "^").gravity("center").extent(width, height);
        } else { //adjust
           op.resize(width, height);
        }
        boolean smaller = imageWidth > 0 && imageHeight > 0 && imageWidth < width && imageHeight < width;
        if (smaller) {
            op.addImage(outputImagePath);
            op.gravity("center");
        }
        if (imageFormat == null || imageFormat.equalsIgnoreCase("PNG")) {
            //jpeg teawks
            op.type("optimize").quality((double) quality).blur(0d, .16);
            //default to jpeg format
            op.addImage("jpeg:" + outputImagePath);
        } else {
            op.addImage(outputImagePath);
        }
        // set up command
        ConvertCmd convert = new ConvertCmd();
        //run command
        convert.run(op);
    } 
```

# php - CakePHP 在基本路径 (/) 中路由命名参数

> ID：14860998
> 
> 赞同：3
> 
> 时间：2013-02-13T19:01:38.530
> 
> 标签：php, cakephp, routes, cakephp-2.2

我得到带有`r`参数的用户推荐人。( `r:code`)。

它适用于所有`:controller/:action/*`页面，但是当尝试将其传递到基本路径 (/) 时，我的网络服务器返回错误 403。

这是我的`routes.php`文件：

```
 Router::connect('/', array('controller' => 'pages', 'action' => 'display', 'home'));
    Router::connect('/pages/*', array('controller' => 'pages', 'action' => 'display'));
    Router::connectNamed(array('r' => '[\d]{4}')); 
```

这些 URL 运行良好：

```
http://example.com/pages/home/r:1234
http://example.com/apples/eat/r:1234 
```

但它不起作用：

```
http://example.com/r:1234 
```

怎么了？

**问题：**这是从 URL 捕获引用代码的方法吗？或者最好使用传递的参数？( `http://example.com/1234/controller/action/.......`)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:43:55.780

实际上，Apache 2.2 的 APR`test_safe_name()`功能故意禁止在 Windows 服务器上的 URI 中使用这种“:”字符。因为这基本上是为了避免像[http://www.mysite.com/C:/SomeFile.exe](http://www.mysite.com/C:/SomeFile.exe)这样的 URL但实际上很烦人。此外，Windows`FindFirstFile()`函数将返回`ERROR_INVALID_NAME` 而不是返回`ERROR_FILE_NOT_FOUND`任何尝试使用“：”字符访问数据流的名称。 **在 MediaWiki 中选择“:”字符作为命名空间分隔符对于在 Windows 服务器上使用是一个不幸的选择。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T22:44:52.537

## 使用 get 参数

如果您使用 get 参数 - 您的代码将更加健壮：

```
/?r=urlencodedurl 
```

这与路由无关，因此无论使用什么 url，都不会中断或成为问题。您可以通过请求对象访问 get args：

```
$r = $this->request->query['r'] 
```