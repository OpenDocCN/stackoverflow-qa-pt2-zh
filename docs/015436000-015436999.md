# StackOverflow 问答 15436000-15436999

# java - 如何将我的 LinkedList 添加到 Defaultcomboboxmodel，并将其显示在 JList 中

> ID：15436000
> 
> 赞同：-2
> 
> 时间：2013-03-15T15:19:52.927
> 
> 标签：java, swing, jlist

我用 eclipse 和 jigloo 创建了一个类，在这个类中有一个`LinkedList`包含`Cars`. 当我尝试`JList`在我的 Gui 中显示此列表时，我总是会出错。请问我该怎么做。如果有人能让我通过，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T01:55:22.480

总结几个有用的评论：

*   简单的方法是`DefaultComboBoxModel`使用从 构造的 a来`Vector`构造`List`：

    ```
    List<String> list = new LinkedList<String>();
    list.add("Test");
    Vector<String> vector = new Vector<String>(list);
    DefaultComboBoxModel dcm = new DefaultComboBoxModel(vector);
    JComboBox combo = new JComboBox(dcm); 
    ```

*   或者，扩展`AbstractListModel`和实施`ComboBoxModel`.

另请参阅[*如何使用列表*](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)。

# json - Play2.1 带有空字符串验证的 JSON 格式

> ID：15436003
> 
> 赞同：2
> 
> 时间：2013-03-15T15:20:00.260
> 
> 标签：json, scala, playframework-2.1

我试图在解组到 Play2.1 中的对象时验证 JSON。我定义的 Format 对象仅在 JSON 中不存在字段时进行验证，但我想验证该字段是否为非空字符串。这可能吗？我尝试在 reads() 调用中指定 minLength() 约束（如此处所示[）](http://www.playframework.com/documentation/2.1.0/ScalaJsonCombinators)，但我得到一个编译器错误，提示找不到 minLength。这仅适用于元组方法吗？

请参阅以下 Specs2 Junit 测试，该测试现在失败，但在正确定义约束时应该通过：

```
import org.specs2.mutable._
import play.api.libs.json._

class SimpleValidation extends SpecificationWithJUnit{

  private val badPayload: JsValue = Json.obj(
    "simpleValue1" -> "mySimpleValue", // Comment this line out to pass test
    "simpleValue2" -> ""
  )

  "An IssueFormat" should {
    "validate when unmarshalling" in {

      badPayload.validate[SimpleObj].fold(
        valid = (res => {
          // Fail if valid
          failure("Payload should have been invalid")
        }),
        invalid = (e => {
          // Should be one error
          e.length mustBeEqualTo(1)
        }))

    }
  }
}

import play.api.libs.functional.syntax._

case class SimpleObj(simpleValue1: String, simpleValue2: String)
object SimpleObj {
  val simpleReads = (
    (__ \ "simpleValue1").read[String] and
    (__ \ "simpleValue2").read[String])(SimpleObj.apply _) // read[String](minLength(0)) yields compiler error
  val simpleWrites = (
    (__ \ "simpleValue1").write[String] and
    (__ \ "simpleValue2").write[String])(unlift(SimpleObj.unapply))
  implicit val simpleFormat: Format[SimpleObj] = Format(simpleReads, simpleWrites)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-13T01:09:01.583

您可以在读取中使用 minLength：

```
import play.api.libs.json.Reads._ 
```

然后 minLength 应该可用，但是，请尝试以下格式：

```
implicit val simpleReads = (
  (__ \ "simpleValue1").read(minLength[String](1)) and
  (__ \ "simpleValue2").read(minLength[String](1))(SimpleObj.apply _) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:46:41.247

在浏览了 Play2.1 文档之后，我能够添加一个客户读取验证器。如果将原始问题中的 SimpleObj 替换为以下内容，则测试用例将通过。不确定是否有更简单的方法可以做到这一点，但这绝对有效：

```
object SimpleObj {
  // defines a custom reads to be reused
  // a reads that verifies your value is not equal to a give value
  def notEqual[T](v: T)(implicit r: Reads[T]): Reads[T] = Reads.filterNot(ValidationError("validate.error.unexpected.value", v))(_ == v)

  implicit val simpleReads = (
    (__ \ "simpleValue1").read[String](notEqual("")) and
    (__ \ "simpleValue2").read[String](notEqual("")))(SimpleObj.apply _)

  val simpleWrites = (
    (__ \ "simpleValue1").write[String] and
    (__ \ "simpleValue2").write[String])(unlift(SimpleObj.unapply))
  implicit val simpleFormat: Format[SimpleObj] = Format(simpleReads, simpleWrites)
} 
```

# coldfusion - Coldfusion 使用 onRequestEnd() 和 Application.cfm 文件

> ID：15436005
> 
> 赞同：2
> 
> 时间：2013-03-15T15:20:02.090
> 
> 标签：coldfusion, coldfusion-9, application.cfm

我正在使用基于`Application.cfm`文件而不是`Application.cfc`文件的遗留应用程序工作。

处理请求后需要能够运行代码。（基本上，我想使用`<cfhtmlhead>`标签将一些 Javascript 和 CSS 文件注入到每个加载的文档中。在我使用 GreaseMonkey 用户脚本执行此操作之前，但最好是服务器端的。）

从我读到的内容来看，我认为我应该能够使用该`onRequestEnd()`功能来做到这一点，但是，我只见过关于`Application.cfc`文件的引用。我读过您可以将`onRequestEnd.cfm`文件与文件放在同一目录中`Application.cfm`以将其注册到`onRequestEnd()`函数中，但系统不会映射到一个`Application.cfm`文件（即我必须将此`onRequestEnd.cfm`文件放在很多目录中）。

还有其他方法可以`onRequestEnd()`使用`Application.cfm`设置注册此功能吗？以防万一，我们正在运行 Coldfusion 9。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T15:37:45.527

澄清一下，该`onRequestEnd()`方法仅在您使用该`Application.cfc`文件时可用。

该`OnRequestEnd.cfm`文件确实像`Application.cfm`ColdFusion 中的文件一样工作，它会自动查找它并在找到时处理它的内容。请注意，*如果您的应用程序有 Application.cfc 文件，则不能使用 OnRequestEnd.cfm 页面。* 因此，假设`Application.cfc`您的应用程序没有文件并且只使用`Application.cfm`文件，那么该`OnRequestEnd.cfm`文件应该适合您。您需要做的就是将您希望在页面请求之后执行的 CFML 代码插入到该文件中。

如果您有多个`Application.cfm`文件分布在不同的文件夹中，那么，是的，您还需要`OnRequestEnd.cfm`在这些目录中复制/创建文件。您可能能够复制那些目录中的*存根* 文件，这些目录除了您从另一个单一位置的实际代码`OnRequestEnd.cfm`之外什么也不做。`cfinclude`至少这样，一旦你有了所有的*存根*文件，你就可以在一个地方修改代码。

请参阅[构建应用程序](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=appFramework_06.html)的文档（它是为 ColdFusion 8 编写的，但仍然适用相同的规则）。如果该页面被删除，以下是相关文本：

> **ColdFusion 如何查找和处理应用程序定义页面**
> 
> ColdFusion 使用以下规则来定位和处理定义应用程序特定元素的 Application.cfc、Application.cfm 和 OnRequestEnd.cfm 页面。ColdFusion 定位这些文件的方式有助于确定您如何构建应用程序。
> 
> 每次 ColdFusion 处理页面请求时，它都会执行以下操作：
> 
> 1.  当 ColdFusion 开始处理请求时，它会执行以下操作：
>     
>     
>     *   它在页面目录中搜索名为 Application.cfc 的文件。如果存在，它会创建一个新的 CFC 实例，处理初始事件并停止搜索。（ColdFusion 为每个请求创建一个新的 CFC 实例并处理其初始化代码。）
>     *   如果请求页面的目录没有 Application.cfc 文件，它会检查目录中的 Application.cfm 文件。如果存在，ColdFusion 逻辑上将 Application.cfm 页面包含在请求页面的开头并停止进一步搜索。
>     *   如果请求页面的目录没有 Application.cfc 或 Application.cfm 文件，ColdFusion 会向上搜索目录树并首先检查每个目录中的 Application.cfc 文件，如果找不到，则查找 Application.cfm 页面, 直到到达根目录（如 C:）。当它找到 Application.cfc 或 Application.cfm 文件时，它会处理该页面并停止搜索。
> 2.  ColdFusion 处理请求页面的内容。
> 3.  当请求结束时，ColdFusion 会执行以下操作：
>     *   如果您有 Application.cfc，ColdFusion 将处理 CFC 的 onRequestEnd 方法并释放 CFC 实例。
>     *   如果您没有 Application.cfc，但有 Application.cfm 页面，ColdFusion 会在与 ColdFusion 用于当前页面的 Application.cfm 页面相同的目录中查找 OnRequestEnd.cfm。ColdFusion 不会搜索该目录之外的内容，因此它不会运行驻留在另一个目录中的 OnRequestEnd.cfm 页面。此外，如果应用程序页面出现错误或异常，或者应用程序页面执行 cfabort 或 cfexit 标记，则 OnRequestEnd.cfm 页面不会运行。
> 
> 以下规则确定 ColdFusion 如何处理应用程序页面和设置：
> 
> *   ColdFusion 只为每个请求处理一个 Application.cfc 或 Application.cfm 页面。如果 ColdFusion 页面具有指向附加 ColdFusion 页面的 cfinclude 标记，则当 ColdFusion 包含附加页面时，它不会搜索 Application.cfc 或 Application.cfm 页面。
> *   如果 ColdFusion 页面具有 cfapplication 标记，它首先处理任何 Application.cfc 或 Application.cfm，然后处理 cfapplication 标记。该标记可以覆盖应用程序文件中的设置，包括应用程序名称和由 cfapplication 标记属性设置的行为。
> *   您可以拥有多个使用相同应用程序名称的 Application.cfc 文件、Application.cfm 文件和 cfapplication 标记。在这种情况下，所有具有相同名称的页面共享相同的应用程序设置和应用程序范围，并且可以设置和获取此范围内的所有变量。ColdFusion 使用 cfapplication 标签或最近处理的文件的参数设置，如果设置（例如会话超时）在文件之间不同。
> 
> **注意：**如果您的应用程序在区分大小写的 UNIX 平台上运行，则必须将 Application.cfc、Application.cfm 和 OnRequestEnd.cfm 拼写为大写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:59:13.683

由于您使用的是 ColdFusion 9，因此升级到使用 Application.cfc 而不是试图弄清楚如何插入 OnRequestEnd.cfm 文件将是相当简单的。此外，将 Application.cfc 用于 Application.cfm 也有一些优势。

几个参考：

[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=appFramework_15.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=appFramework_15.html)
[http://forum.hostek.com/showthread.php?724-Converting-to-Application-cfc](http://forum.hostek.com/showthread.php?724-Converting-to-Application-cfc)
[http: //www.bennadel.com/blog/726-ColdFusion-Application-cfc-Tutorial-And-Application-cfc-Reference.htm](http://www.bennadel.com/blog/726-ColdFusion-Application-cfc-Tutorial-And-Application-cfc-Reference.htm)

[http://www.raymondcamden.com/index.cfm/2009/12/30/Best -of-CF9-Applicationcfc-Script-Template](http://www.raymondcamden.com/index.cfm/2009/12/30/Best-of-CF9-Applicationcfc-Script-Template)
[http://cfruss.blogspot.com/2009/11/applicationcfc-reference-in-cfscript.html](http://cfruss.blogspot.com/2009/11/applicationcfc-reference-in-cfscript.html)

# jquery - 使用 jquery 为 primefaces 组件设置一个值

> ID：15436006
> 
> 赞同：0
> 
> 时间：2013-03-15T15:20:08.143
> 
> 标签：jquery, jsf-2, jquery-selectors, primefaces

我使用 jsf 和 primefaces 组件，我想通过 jquery 为 h:outputText 设置一个值

我用chrome工具检查标签（id是一样的）

但该值未设置为这里的元素是 jsf 代码：

```
 <p:confirmDialog id="confirmDialog" message="Etes vous sur de vouloir supprimer ce Type #{typeMB.selectedType.libelle}"  
                             header="confirmation de suppression" severity="alert" widgetVar="confirmation"> 
                             <h:outputText id="fortest" value="donc" /> 

<h:form>
                <p:commandButton id="confirm" value="oui" update=":form:ourdatatable" oncomplete="confirmation.hide()"  actionListener="#{typeMB.supprimer}" />  
                <p:commandButton id="decline" value="non" onclick="confirmation.hide()" type="button" />   
</h:form>
            </p:confirmDialog> 
```

这是我的 h:outputText 标记的 html 代码：

```
<span id="fortest">donc</span> 
```

这是jquery脚本：

```
<script type="text/javascript">  

 $(function() {      

     $('#form\\:ourdatatable\\:0\\:alors').click(function() {
          alert("I am here");
          var classList =$('#form\\:ourdatatable\\:0\\:alors').attr('class').split(/\s+/);
          $.each( classList, function(index, item){
              if(index > 1){
                  alert("I am here here ");
                  $('#fortest').text('here here');

              }

              });
        });

 });

</script> 
```

我测试了 .text() 和 val() 和 html() 方法，但没有设置值

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T09:06:48.603

问题如下： click 事件有两个回调函数，你的比 primefaces 快得多，因为它使用 ajax，所以当你的函数执行时，标记还没有准备好，所以它没有做你期望的事情！

解决方案：您需要按顺序链接您的回调（在 primefaces 回调完成后执行您的函数）。要实现这一点，您可以使用[promise](http://api.jquery.com/promise/)来观察 ConfirmDialog（请注意，如果您观察到错误的元素，这将不起作用）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-15T16:35:10.387

应该是 `$('#fortest').val('here here')`在您设置值时 not `$('#fortest').text('here here')`。因为即使它呈现为`span`，JSF 组件也会获取该值。并添加`prependId="false"`到您的表格中。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-15T16:06:52.203

尝试`prependId="false"`为每个表单添加属性

# haskell - 如何在haskell中将数组显示为来自新数据类型的字符串？

> ID：15436009
> 
> 赞同：0
> 
> 时间：2013-03-15T15:20:12.477
> 
> 标签：haskell

在 Haskell 中，当您进行模式匹配时，您必须像此示例代码中那样解包

```
data Mlist a = Mlist [a]
instance Show a => Show (Mlist a) where
    show (Mlist xs) = show xs

m = Mlist [1, 2, 3] 
```

然后当我输入`m`解释器时，我期望“{1,2,3}”但我得到 [1,2,3]。这里有什么问题？我认为这会起作用，因为我在 xs 上使用了 show 功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:31:09.127

`show`on 列表总是给你一个以 .`String`开头`'['`和结尾的`']'`. 如果你想要`'{'`and `'}'`，只需替换它们。

```
instance Show a => Show (Mlist a) where
    show (Mlist xs) = concat ["{", init . tail $ show xs, "}"] 
```

# plone - Plone 4 正在重写我的 HTML，可以禁用它吗？

> ID：15436012
> 
> 赞同：1
> 
> 时间：2013-03-15T15:20:30.277
> 
> 标签：plone

我们有一个 Plone 4.1 站点。当我编辑文档的 HTML 源代码以使用根目录（在我们的例子中是 /codes）的路径并保存它时，Plone 将翻译 HTML（在我们的例子中它变成 ../codes）。有没有办法禁用它，至少对于这个页面？我们不能使用文件系统指向它，因为这是一个用于从 MySQL 表中检索和显示数据的虚拟目录。

这是一些代码：

`<div class="agency_cd">The agency that is reporting the data. Agency codes are fixed values assigned by the National Water Information System (NWIS). A list of agency codes is available. <strong>[ <a class="internal-link" href="../codes/agency_cd_query?fmt=rdb">Tab-separated -- saved to file</a> || <a class="internal-link" href="../codes/agency_cd_query?fmt=html">HTML</a> ] </strong></div>`

我将其更改为：

`<div class="agency_cd">The agency that is reporting the data. Agency codes are fixed values assigned by the National Water Information System (NWIS). A list of agency codes is available. <strong>[ <a class="internal-link" href="/codes/agency_cd_query?fmt=rdb">Tab-separated -- saved to file</a> || <a class="internal-link" href="/codes/agency_cd_query?fmt=html">HTML</a> ] </strong></div>`

然后我保存它，但 Plone 将它恢复到以前的样子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:43:18.857

禁用 TinyMCE URL 转换很有用，虽然我不能说它绝对解决了我的问题。我发现在 Plone 编辑屏幕上选择选项以不使用可视化编辑器并编辑 HTML 似乎提供了一种解决方法。链接虽然不明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T20:54:45.360

请为此提交错误报告。故障组件是一个输出过滤器，它自动将指向同一主机的绝对链接转换为相对链接。该过滤器可能会给各种“由内而外”的重写方案带来问题。

同时，我敢打赌你可以用一些自定义的重写规则来解决这个问题。加入一个重写规则，查找 /codes-and-parameters/codes/(.+) URL 并将它们重写为 /codes/$1。这样你就不需要在 Plone 中破坏任何东西来解决这个问题。

# windows-7 - 如何更改不正确的 Visual Studio 2012 注册表项的值名称：{00A9524F-427F-46EE-8A20-615C25ECBE6F}？

> ID：15436020
> 
> 赞同：1
> 
> 时间：2013-03-15T15:21:03.070
> 
> 标签：windows-7, visual-studio-2012, registry

发送 SOS

我在尝试了解我上一个 VS 2012 安装错误时发现了一个问题。当我打开 VS 2012 时，这两个错误出现在 ActivityLog 的底部：

**34 错误 CreateInstance 包 [SqlStudio 配置文件包] {00A9524F-427F-46EE-8A20-615C25ECBE6F} 80070002 VisualStudio 2013/03/14 13:02:07.904 失败**

**35 错误结束包加载 [SqlStudio 配置文件包] {00A9524F-427F-46EE-8A20-615C25ECBE6F} 80004005 - E_FAIL VisualStudio 2013/03/14 13:02:07.928**

今天早上，我在 2012 年 6 月 4 日上午 10:14 在 Microsoft Connect 上找到了来自 bizcad 的帖子：

[http://connect.microsoft.com/VisualStudio/feedback/details/746372/sqlstudio-editor-package-did-not-load-correctly](http://connect.microsoft.com/VisualStudio/feedback/details/746372/sqlstudio-editor-package-did-not-load-correctly)

我引用：

*“追踪丢失文件的位置，我在注册表中搜索**{00A9524F-427F-46EE-8A20-615C25ECBE6F}。CodeBase**条目显示 C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Extensions\Microsoft \SQLEditor\Microsoft.VisualStudio.Data.Tools.SqlEditor.dll。注意10.0之后的两个反斜杠。删除1个反斜杠“*

我对同一个键执行了相同的注册表搜索，发现我在**HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0_Config\BindingPaths**下的该键的注册表值名称是这样读取的：

**\pc-ts\c\Program Files (x86)\Microsoft Visual Studio 11.0Common7\IDE\Extensions\Microsoft\SQLDB**

请注意 11.0 和 Common7 之间缺少的反斜杠。

我认为不正确的路径导致VS错误。我还注意到这个值名称没有值数据。

**问题 1：**如何安全地将缺少的反斜杠添加到此 Visual Studio 2012 注册表项的这个看似不正确的值名称中？

**问题2：**价值数据应该有内容吗？

谢谢你的帮助，

阿诺德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:02:44.837

更正 regedit 中的密钥。首先复制（更正的）目录位置，（粘贴在记事本中，更正并复制到剪贴板。

在 regedit
中： - 右键单击​​父键 {00A9524F-427F-46EE-8A20-615C25ECBE6F}
- 单击新建 -> 字符串值

粘贴到更正的目录位置，您会在新的旁边看到带有错误的旧值...然后继续删除带有错字的旧值。

希望这有效。

# c# - 从控制中铸造窗户

> ID：15436029
> 
> 赞同：4
> 
> 时间：2013-03-15T15:21:35.430
> 
> 标签：c#, winforms, type-conversion

我有这段简单的代码：

```
private void btnAdd_Click(object sender, EventArgs e)
{
    if (AskForSaveBeforeClose(null))
    {
        LoadForm<Soles>(btnAdd, "Add");
    }
} 
```

`btnAdd`现在是我唯一带`ToolStripDropDown`类型的按钮。所有其他按钮都是`ToolStripButton`类型。如您所见，我将此按钮作为 e 参数传递给方法，并`ToolStripButton`在许多其他方法中用作参数类型。我不想过多地破坏我的代码，我认为应该可以将`btnAdd`表单`ToolStripDropDownButton`转换为`ToolStripButton`并解决我的问题。可以这样做吗？如果没有，您是否有其他想法来保留我的代码。我需要下拉功能，但目前任何解决方法都是可以接受的。

这是继承层次结构：

```
System.Object System.MarshalByRefObject 
System.ComponentModel.Component 
System.Windows.Forms.Control 
System.Windows.Forms.ScrollableControl 
System.Windows.Forms.ToolStrip 
System.Windows.Forms.MenuStrip 
System.Windows.Forms.StatusStrip 
System.Windows.Forms.ToolStripDropDown 
System.Windows.Forms.ToolStripDropDownMenu 
System.Windows.Forms.ContextMenuStrip 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:29:14.653

您不能将 a 强制`ToolStripDropDownButton`转换为 a `ToolStripButton`，因为前者不会*从*后者继承。但是，两者都继承自，`ToolStripItem`因此您可以改为使用它。

你说你做：

```
var button = ((btnSoles as ToolStripItem) as ToolStripButton); 
```

但是，这*不会*做你想做的事。首先，`btnSoles`总是 a`ToolStripItem`所以你应该使用直接转换：

```
var item = (ToolStripItem)btnSoles; 
```

然后，如果您*确实*需要由`ToolStripButton`而不是由提供的功能，`ToolStripItem`那么您应该使用`as`：

```
var button = btnSoles as ToolStripButton; 
```

**`null`如果`btnSoles`不能强制转换为 ，这将返回`ToolStripButton`**。如果它是 a `ToolStripDropDownButton`，如您所说，那么它不能被强制转换，结果将是`null`。请注意，双重演员不是必需的，通常很少需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:26:58.100

`ToolStripDropDownButton`除非从 下降，否则您将无法施放它`ToolStripButton`。如果没有，可能它们有共同的祖先，您可以将其用作参数类型。

# xml - for 的结果不正确

> ID：15436041
> 
> 赞同：0
> 
> 时间：2013-03-15T15:22:17.233
> 
> 标签：xml, xslt, xerces

我正在使用 xerces 使用两个 xsl 文件处理 xml，并且在我的 xsl:for-each 循环中得到错误的结果，
for 循环返回 8 个结果而不是 4 个结果
如何调试此错误？
谢谢你的帮助！

xml：

```
<Updates>
  <update_record displayTimestamp="2013-03-08 11:44:00">
    <user>MNM3322</user>
  </update_record>
  <update_record displayTimestamp="2013-03-08 11:45:00">
    <user>MNM3323</user>
  </update_record>
  <update_record displayTimestamp="2013-03-08 11:46:00">
    <user>MNM3322</user>
  </update_record>
  <update_record displayTimestamp="2013-03-08 11:47:00">
    <user>MNM3325</user>
  </update_record>
  <LatestUpdate/>
</Updates> 
```

第一个.xsl

```
<xsl:variable name="updates" select="//Updates"/> 
```

第二个.xsl

```
<xsl:variable name="updatesCount"
              select="count($updates/update_record)"/>

<xsl:include href="first.xsl"/>

<xsl:value-of select="$updatesCount"/>  this gives correct result (4)
<xsl:for-each select="$updates/update_record"> this gives incorrect output (8 rows instead of 4)
       <xsl:value-of select="position()"/>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:40:33.457

发现问题。它的 XALAN 错误

请参见此处：
如果在全局变量中使用递归模板，则循环变量/参数参考

[https://issues.apache.org/jira/browse/XALANJ-2430](https://issues.apache.org/jira/browse/XALANJ-2430)
谢谢！

# sharepoint-2010 - 是否可以通过 Go 使用 Microsoft Sharepoint？

> ID：15436042
> 
> 赞同：1
> 
> 时间：2013-03-15T15:22:17.843
> 
> 标签：sharepoint-2010, go

我想知道是否有任何库可以与 Microsoft Sharepoint 一起使用？我们可以用 Go 语言为 Microsoft Sharepoint 编程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:33:58.420

Sharepoint 有很多东西，不清楚您所说的“我们可以使用 Go for Sharepoint 编程”是什么意思，但您可能想看看[Sharepoint 2013 应用程序](https://www.simple-talk.com/dotnet/.net-tools/an-overview-of-sharepoint-2013-app-development-model/)，它将支持“自托管应用程序”，可以写成任何语言。从链接的文章：

```
You could be a PHP developer with a Linux machine and still make SharePoint apps. 
```

如果您对与 Sharepoint 的 API 交互更感兴趣，看起来[Sharepoint 2013 提供了一个 RESTful API](http://msdn.microsoft.com/en-ca/library/fp179930.aspx#SPappoverview_howtalk)，所以再一次，Go 没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:44:12.890

Q1：不幸的是，在我的案例中，谷歌搜索此类库并不成功。

Q2：如果 MS Sharepoint（无论是什么）有一些已知或记录的 API，或者它可以通过一些已知或记录的协议访问，那么答案肯定是肯定的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:46:41.323

我最好的猜测是这是不可能的。据我所知，Sharepoint 是为 Microsoft IIS 平台设计的 ASP.NET 应用程序，依赖于闭源 .NET 框架。

虽然通过 API 使用 Sharepoint 应该是可能的，但从你的问题来看，我认为这不是你想要的。

# javascript - Rails Foundation Orbit 不是函数

> ID：15436049
> 
> 赞同：0
> 
> 时间：2013-03-15T15:22:29.743
> 
> 标签：javascript, ruby-on-rails, zurb-foundation

我是第一次尝试 zurb 基础框架。我想制作幻灯片；但是，我收到的类型错误轨道不是函数。

这是我的 application.js 文件：

```
 //= require jquery
//= require jquery_ujs
//= require jquery.ui.core
//= require foundation
//= require active_admin
//= require contractor_validate
//= require painter_validate
//= require jquery.social.media.tabs.1.6
//= require jquery.validate.min
//= require payment
//= require the-tooltip
//= require general
//= require_self

$(document).foundation();

$(window).load(function() {
$('#featured').orbit();
}); 
```

这是我的 application.css 文件：

```
 *= require active_admin
  *= require dcsmt
  *= require foundation_and_overrides
  *= require style
  *= require the-tooltip
  *= require jquery.ui.all
  *= require_self 
```

这是 html/代码的样子：

```
 <div class="large-6 columns">
        <div id="featured">
          <% count = 0 %>
          <% @slides.each do |s| %>
              <% if count == 0 %>
                  <%= image_tag s.slide_photo.url(:medium) %>
              <% else %>
                  <%= image_tag s.slide_photo.url(:medium) %>
              <% end %>
              <% count = count + 1 %>
          <% end %>
        </div>
      </div> 
```

请指教。

更新：

```
 group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

 # See https://github.com/sstephenson/execjs#readme for more supported runtimes
 # gem 'therubyracer', :platforms => :ruby

 gem 'uglifier', '>= 1.0.3'
 gem 'zurb-foundation', '~> 4.0.0'
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:15:19.333

如果您在使用 rails gem 时遇到此问题，请遵循本文：

[http://foundation.zurb.com/docs/components/orbit.html](http://foundation.zurb.com/docs/components/orbit.html)

您只需将数据轨道添加到您的 html 中：

```
 <div data-orbit>

 </div> 
```

# java - Jetty IncompatibleClassChangeError：实现类

> ID：15436058
> 
> 赞同：2
> 
> 时间：2013-03-15T15:22:47.827
> 
> 标签：java, google-app-engine, jetty

我有一个应用程序在应用程序引擎 1.7.1 上运行良好，但是当我升级到 1.7.5 时，我所有的库依赖项都被破坏了。

所以我认为我已经纠正了所有依赖项，所以至少我没有任何编译时错误，但是当我尝试运行它时，我得到以下错误：

```
Mar 15, 2013 11:09:34 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: failed Jersey Web Application: java.lang.IncompatibleClassChangeError: Implementing class
Mar 15, 2013 11:09:34 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: failed com.google.appengine.tools.development.DevAppEngineWebAppContext@c65fb1{/,/Users/bbarrand12/Documents/Eclipse/Workspace/MovieFoneToGo/war}: java.lang.IncompatibleClassChangeError: Implementing class
Mar 15, 2013 11:09:34 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: failed JettyContainerService$ApiProxyHandler@5dfa490: java.lang.IncompatibleClassChangeError: Implementing class
Mar 15, 2013 11:09:34 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: Error starting handlers
java.lang.IncompatibleClassChangeError: Implementing class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:213)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at com.sun.jersey.api.core.ScanningResourceConfig.init(ScanningResourceConfig.java:79)
    at com.sun.jersey.api.core.PackagesResourceConfig.init(PackagesResourceConfig.java:104)
    at com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:78)
    at com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:89)
    at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:700)
    at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:678)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:203)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:557)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:228)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:255)
    at com.google.appengine.tools.development.AbstractServer.startup(AbstractServer.java:79)
    at com.google.appengine.tools.development.DevAppServerImpl$Servers.startup(DevAppServerImpl.java:451)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:198)
    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245) 
```

任何想法为什么这被打破了。也许我只是为了更新我的其他一些罐子？

这是我的依赖项： ![在此处输入图像描述](../Images/e9ff7dcab5805bac696eb39a85332176.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:59:03.677

我认为 Jersey 和 GAE 之间可能存在兼容性问题。据此，[**现在**](http://code.google.com/p/googleappengine/wiki/WillItPlayInJava)与 Google App Engine 兼容的 Jersey 版本是 1.5 和 1.1.5。

这篇[**文章**](https://stackoverflow.com/questions/12166382/java-lang-incompatibleclasschangeerror-implementing-class-deploying-to-app-engi)也可能有所帮助。

# c - 如何在c中获取时间戳

> ID：15436060
> 
> 赞同：4
> 
> 时间：2013-03-15T15:22:54.647
> 
> 标签：c

我想为我的登录 c 获取时间戳。我写了一个函数来获取时间戳。但是当我返回变量时，我得到了不同的值。

我的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

char* get_timestamp(){
   time_t rawtime;
   struct tm * timeinfo;
   char buffer[16];
   time (&rawtime);
   timeinfo = localtime (&rawtime);
   strftime (buffer,16,"%G%m%d%H%M%S",timeinfo);
   puts(buffer);
   return buffer; 
}

int main() 
{
   puts(get_timestamp());
   return 0;
} 
```

输出：

```
20130315204815
Ir?0315204815 
```

任何人都可以帮助解决这个问题...谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T15:24:04.997

`buffer[16]``char* get_timestamp()`是一个局部数组，在函数结束时停止存在。然后返回一个指向不存在的数组的指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T15:24:40.243

您正在返回一个指向堆栈变量的指针，因此在函数返回后使用它是无效的：

```
 char buffer[16]; 
```

将在函数中分配到栈上。当您返回时，堆栈被清理并且`buffer`不再有效。通过最小的更改，这可能是一个更好的函数签名：

```
void get_timestamp( char *buffer, size_t buffLen  ) 
```

假设您`buffer`在调用`get_timestamp`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T15:36:50.863

正如另一个人所说，您正在使用驻留在堆栈上的数据，一旦您离开声明它的函数，就会停止存在。我看到了解决这个问题的两种简单的可能性：

选项1：在调用函数中分配缓冲区变量，并传递一个指针到get_timestamp

```
void get_timestamp( char *buffer, size_t buffersize ) {
    ....
    strftime (buffer,buffersize,"%G%m%d%H%M%S",timeinfo);
}

int main() 
{
   char buffer[16];
   puts(get_timestamp(buffer,16));
   return 0;
} 
```

注意/编辑：我折叠了 unwind 关于将缓冲区大小传递到这个建议的解决方案中的非常有效的评论。

选项 2：如果您不能或不想更改函数的签名，您可以使用静态变量，但不要忘记静态变量可能会导致多线程程序出现问题。

```
static char buffer[16];

char* get_timestamp(){
   ... 
}

int main() 
{
   puts(get_timestamp());
   return 0;
} 
```

您当然可以使用`malloc`，但在这种情况下这似乎有点矫枉过正，而且比我描述的两个修复更容易出错。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T15:28:42.830

您返回的字符串是一个自动变量。当你退出函数访问这个变量是不可能的。根据规范，这是未定义的行为。使用 malloc 分配字符串，你会没事的。只是不要忘记之后释放它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-16T21:08:04.783

在回答这个问题时，我想要一个简单、线程友好、不返回 char*（这通常管理起来很乏味）、线程安全并且可以自立的函数。我讨厌返回 char* 或必须管理的指针的函数。

下面的函数不调用 malloc。

该函数不接受任何参数并返回一个时间戳。我认为它运作良好。

```
struct Timestamp {
    time_t seconds;
    long milliseconds;
    char timestring[32];
};

struct Timestamp getTimestamp()
{
char   timebuffer[32]     = {0};
struct timeval  tv        = {0};
struct tm      *tmval     = NULL;
struct tm       gmtval    = {0};
struct timespec curtime   = {0};

struct Timestamp timestamp;

int i = 0;

// Get current time
clock_gettime(CLOCK_REALTIME, &curtime);

// Set the fields
timestamp.seconds      = curtime.tv_sec;
timestamp.milliseconds = round(curtime.tv_nsec/1.0e6);

if((tmval = gmtime_r(&timestamp.seconds, &gmtval)) != NULL)
{
    // Build the first part of the time
    strftime(timebuffer, sizeof timebuffer, "%Y-%m-%d %H:%M:%S", &gmtval);

    // Add the milliseconds part and build the time string
    snprintf(timestamp.timestring, sizeof timestamp.timestring, "%s.%03ld", timebuffer, timestamp.milliseconds); 
}

return timestamp;
}

int main()
{
    char   timebuffer[64]     = {0};
    int i = 0;
    struct timespec sleeptime = {0, 5000000L};

    struct Timestamp timestamp;

    for (i=0; i < 20; i++)
    {
        timestamp = getTimestamp();
        printf("Time is: %s \n", timestamp.timestring);
        nanosleep(&sleeptime, NULL);
    }

    return 0;
} 
```

# css - 表格大小错误，Safari 浏览器中的图像

> ID：15436062
> 
> 赞同：1
> 
> 时间：2013-03-15T15:22:57.060
> 
> 标签：css, image, safari, html-table

我在一个 div 中生成一个图像表。

这在 Mozilla 和 chrome 中工作得非常好，但在 safari 中却不行：

这是 Safari 中有时输出的样子，即取决于刷新：

![正常输出](../Images/2508bd2cd7360d0bfa4b5db1ad315a26.png)

如您所见，图像被放置到 td 单元格的大小。

但有时当我刷新页面时，会生成以下内容：

![错误的输出](../Images/bb341a5d0abc9568b6c0f5cc2e551e80.png)

在我的代码中，我对帖子中有多少图像进行了 for 循环。

这是代码：

```
<table style="margin-top:2px; width:100%;">
    <tr>
        <td colspan="4" style="text-align:center; padding: 2px 2px 2px 2px;">
            <div class="blog-image" id="blog-image-419d6830569939e69a4e827a437af00b711b85cc" style="border-style:solid; border-width:1px; border-color:#8AAEA4;" data-keywords="">
                <a data-target="flare" href="http://i.telegraph.co.uk/multimedia/archive/02372/google-pipes-3_2372325k.jpg" data-flare-scale="fit">
                    <img style="display: block;" width="100%" src="http://i.telegraph.co.uk/multimedia/archive/02372/google-pipes-3_2372325k.jpg" alt="butterbean stew.jpg"/>
                </a>
            </div>
        </td>
    </tr>
    <tr>
        <td style="padding: 2px 2px 2px 2px;">
            <div class="blog-image" id="blog-image-99c01d06fa65c7879df3f1db0520c98678af7577"  style="border-style:solid; border-width:1px; border-color:#8AAEA4;" data-keywords="">
            <a data-target="flare" href="http://i.telegraph.co.uk/multimedia/archive/02372/google-pipes-3_2372325k.jpg" data-flare-scale="fit">
                <img style="display: block;" width="100%" src="http://i.telegraph.co.uk/multimedia/archive/02372/google-pipes-3_2372325k.jpg" alt="welsh rarebit.jpg"/>
            </a>
            </div>
        </td>

        <td style="padding: 2px 2px 2px 2px;">
            <div class="blog-image" id="blog-image-c77d52058e55fc9dfa0520b9f786d8f5ff718074"  style="border-style:solid; border-width:1px; border-color:#8AAEA4;" data-keywords="">
                <a data-target="flare" href="http://i.telegraph.co.uk/multimedia/archive/02372/google-pipes-3_2372325k.jpg" data-flare-scale="fit">
                    <img style="display: block;" width="100%" src="http://i.telegraph.co.uk/multimedia/archive/02372/google-pipes-3_2372325k.jpg" alt="blackboard.jpg"/></a>
            </div>
        </td>
        <td style="padding: 2px 2px 2px 2px;">
            <div class="blog-image" id="blog-image-"  style="border-style:solid; border-width:1px; border-color:#8AAEA4;"">
                    <img style="display: block;" width="46px" src="http://i.telegraph.co.uk/multimedia/archive/02372/google-pipes-3_2372325k.jpg" alt="" />
            </div>
        </td>
        <td style="padding: 2px 2px 2px 2px;">
            <div class="blog-image" id="blog-image-"  style="border-style:solid; border-width:1px; border-color:#8AAEA4;"">
                <img style="display: block;" width="46px" src="http://i.telegraph.co.uk/multimedia/archive/02372/google-pipes-3_2372325k.jpg" alt="" />
            </div>
        </td>
    </tr>
</table> 
```

这是相关的 JS Fiddle，请注意，如果您在 safari 中刷新页面，它会改变吗？！奇怪的！

[JS 小提琴在这里](http://jsfiddle.net/naJ46/1/)

谁能告诉我为什么这些图像会这样做？解决这个问题的方法是阻止图像在页面上显得很小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:34:42.323

你的 HTML 很乱。主要问题是您没有设置表格单元格的宽度。使用一段 CSS 的一个小固定版本：

```
.thumbs td {
    padding: 2px;
    width: 25%; // <-- force td to be equal size
}
.thumbs td img {
    width: 100%;
} 
```

[http://jsfiddle.net/naJ46/2/](http://jsfiddle.net/naJ46/2/)

建议：永远不要在 HTML 中使用内联 CSS，这是非常糟糕的做法。事实上，致命的罪过之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:30:06.787

```
<div class="blog-image" id="blog-image-"
  style="border-style:solid; border-width:1px; border-color:#8AAEA4;""> 
```

`id="blog-image-`为什么在其他事件之后没有哈希值（？） ？（这会使您的代码无效，因为该 id 被使​​用了两次。）

属性值`""`末尾的 是什么？`style`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:31:14.150

首先，在第 27 行和第 32 行，你有双引号。第二 - 你声明`width="100%"`前两张图片，`width="46px"`第三张和第四张图片，我猜这就是你问题的正确答案。

# silverlight - 从代码隐藏中取消设置属性

> ID：15436067
> 
> 赞同：1
> 
> 时间：2013-03-15T15:23:08.590
> 
> 标签：silverlight, xaml, silverlight-4.0, dependency-properties

我的 XAML 文件中默认有一个 MaxHeight 值为 62 的 TextBox，我想以编程方式从某个事件的代码隐藏中取消设置它。可悲的是，这：

```
myTextBox.MaxHeight = 0; 
```

实际上将最大高度设置为零......使其不可见。UI 元素上没有一种方法可以完全**取消设置**特定属性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:12:00.330

有一种方法可以将任何依赖属性重置为其默认值，而无需显式指定（甚至不知道）该值。只需致电[`ClearValue`](http://msdn.microsoft.com/en-us/library/ms597464%28v=vs.95%29.aspx)：

```
myTextBox.ClearValue(FrameworkElement.MaxHeightProperty); 
```

但是请注意，这会清除属性的[本地值](http://msdn.microsoft.com/en-us/library/cc265148%28v=vs.95%29.aspx#listing)。如果模板或样式设置器设置了任何值，则该值将生效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:24:41.517

您可以将其设置回默认值：

```
myTextBox.MaxHeight = double.PositiveInfinity; 
```

这允许文本框增长到“任何高度”。

# extjs - 如何从 ExtJS 4 的弹出窗口中获取对视口中基本组件的引用

> ID：15436069
> 
> 赞同：0
> 
> 时间：2013-03-15T15:23:12.260
> 
> 标签：extjs, extjs4, extjs4.1, component-query

我正在努力获取参考资料而不是使用 Ext.getCmp(..)。我理解为什么最好不要在生产应用程序中使用 Ext.getCmp，主要是因为重复的 DOM id 可能会造成混淆。我在下面创建了一个基本示例，我希望在其中添加一些评论，如果我能找到答案将帮助我更好地理解如何获得参考。

我也在寻找关于这个主题的一些非常好的解释、教程等。我认为学习如何做 ComponentQuery 是最好的，但我什至不确定是否是这样。所以不用多说，这里是代码。请查看弹出窗口中的按钮事件，了解我希望了解的内容。

```
Ext.define('MyApp.view.MyViewport', {
    extend: 'Ext.container.Viewport',

    layout: {
        type: 'border'
    },

    initComponent: function () {
        var me = this;

        Ext.applyIf(me, {
            items: [{
                xtype: 'panel',
                flex: 2,
                region: 'center',
                title: 'My Panel',
                dockedItems: [{
                    xtype: 'toolbar',
                    dock: 'top',
                    items: [{
                        xtype: 'button',
                        text: 'MyButton',
                        listeners: {
                            click: {
                                fn: me.onButtonClick,
                                scope: me
                            }
                        }
                    }]
                }],
                items: [{
                    xtype: 'component',
                    html: '<b>my component</b>'
                }]
            }]
        });

        me.callParent(arguments);
    },

    onButtonClick: function (button, e, eOpts) {

        Ext.define('MyApp.view.MyWindow', {
            extend: 'Ext.window.Window',

            height: 250,
            width: 400,
            title: 'My Window',

            initComponent: function () {
                var me = this;

                Ext.applyIf(me, {
                    items: [{
                        xtype: 'button',
                        text: 'Want to get link to my component in window that opened this',
                        listeners: {
                            click: {
                                fn: me.onButtonClick,
                                scope: me
                            }
                        }
                    }]
                });

                me.callParent(arguments);
            },

            onButtonClick: function (button, e, eOpts) {

                // I would like to set the html property of the 
                //   component in the window below
                //   I would like to do this efficintly
                //   user itemId?
                //   use componentquery?
                //   use up/down/etc.
                //   
                //   Need help with componentquery, extjs help is not helpful for me
                //   I need more basics I think.

                this.up('panel').up('panel').down('component').html = '<i>set from button</i>';
                console.log(this.up('panel').up('panel').down('component'));
            }

        });

        var win = Ext.create('MyApp1.view.MyWindow', {});
        win.show();

    }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:38:20.493

Windows 是浮动的，因此您无法使用`up`它返回视口。同样，您不能`down`在视口中使用来查找窗口中的任何组件。您的外部`onButtonClick`方法在视口范围内被调用。如果您当时保存了对的引用`this`，则可以使用它`down`来获取您的组件。

```
onButtonClick: function() {
    var viewport = this;

    Ext.define('YourWindow', {
       // setup everything
       onButtonClick: function() {
           // this may not return what you want since everything
           // else inside the viewport is technically also a component
           // You'd be better off adding an itemId to the component
           // you wish to grab and using that in the call to down.
           console.log(viewport.down('component'));
       }
    });

    // show window
} 
```

附带说明一下，我不确定您是否要在单击按钮时定义窗口类。除非您可以保证该按钮只会被单击一次，否则您应该在其他地方定义您的类并在单击处理程序中创建窗口。这会使获取对视口的引用变得复杂，但是您可以在创建它时轻松地将其设置为窗口的属性，或者只需在窗口的配置对象中添加 onButtonClick 方法。

# c# - How to add modules to MVC4 at runtime without AppDomain restart

> ID：15436073
> 
> 赞同：2
> 
> 时间：2013-03-15T15:23:29.930
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

I am working on a multi-tenant MVC4 web portal that is meant to host dynamically generated MVC4 applications.

Use case: The client uses the web portal to upload a xml specification. The specification gets passed to a web service that generates an mvc4 application, compiles it and returns a zip file to the portal containing the views, css, javascript and a dll(compiled c# code). Then, the portal unzips the received zip file and places it's contents in a folder (Modules) inside the portal itself. Then the client can browse the newly 'deployed' application. Many versions of the same application can be deployed and I am planning to use different Namespaces for each deployment. Note: The generated modules have some dependencies that will be injected by the web portal using a DI injector (was thinking of using ninject)

I have done a lot of research on how to build a modular MVC application. I've looked at MVC Areas, done some research on MEF, DI frameworks, looked at nopCommerce and orchard code. One thing that I cannot seem to find an answer to is how to add the Modules at runtime without requiring an AppDomain restart? Also, is there an easy way to register routes for each of these modules at runtime?

I am trying to avoid app restarts because there may be other people using the portal/deployed modules while others are uploading new specifications.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T09:42:39.913

你看过[这个](http://blog.longle.net/2012/03/29/building-a-composite-mvc3-application-with-pluggable-areas/)（只是有点过时的）教程了吗？它不会解决重新扫描模块的问题，但是引入的`PluginAreaBootstrapper`类似乎是一个好的开始。也许您可以在系统中的特定事件上运行`PluginAreaBootstrapper`'`Init()`方法（我们称之为`OnNewModuleDeployed`）。

# python - Scipy griddata 在循环/内存泄漏中不起作用

> ID：15436074
> 
> 赞同：2
> 
> 时间：2013-03-15T15:23:30.227
> 
> 标签：python, scipy, interpolation

我在循环中使用 Scipy 的 griddata 时遇到问题。基本上发生的事情是在循环运行时内存无限制地增长。

要重现问题，只需将示例放入

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.griddata.html)

在循环内：

```
for i in range(100000):

    grid_z1 = griddata(points, values, (grid_x, grid_y), method='linear') 
```

我的 Python 版本是 2.7.3，我的 numpy 版本是 1.7.0，我的 scipy 版本是 0.12.0b1。我在 Windows 7 上运行它。

这是一个错误吗？如何多次重复插值而不发生内存泄漏问题？

剩下的代码：

```
def func(x, y):
    return x*(1-x)*np.cos(4*np.pi*x) * np.sin(4*np.pi*y**2)**2

grid_x, grid_y = np.mgrid[0:1:100j, 0:1:200j]
points = np.random.rand(1000, 2)
values = func(points[:,0], points[:,1])

for i in range(100000):

    grid_z1 = griddata(points, values, (grid_x, grid_y), method='linear') 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:21:35.523

这是[Cython 中的一个错误](http://article.gmane.org/gmane.comp.python.cython.devel/14711)，应该在 Scipy 的最终 0.12.0 版本中解决。

# ruby-on-rails - Heroku上的Rails应用程序验证错误

> ID：15436082
> 
> 赞同：0
> 
> 时间：2013-03-15T15:24:04.243
> 
> 标签：ruby-on-rails, heroku

我在 Heroku 上运行 Rails 应用程序，当用户尝试重置密码时遇到问题。我的用户模型有`validates_uniqueness_of :email`并且重置密码的方法是

```
def send_password_reset
  generate_token(:password_reset_token)
  self.password_reset_sent_at = Time.zone.now
  save!
  UserMailer.password_reset(self).deliver
end 
```

当我检查`heroku logs`时，它告诉我`save!`正在生成`ActiveRecord::RecordInvalid (Validation failed: Email has already been taken)`，但是我没有创建新用户，甚至没有编辑当前用户的电子邮件字段。
当我在本地运行它时，一切正常，没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:25:48.490

检查数据库中是否有多个用户使用相同的电子邮件。

可能是在添加验证之前创建了副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:26:51.520

查看您的 Db，用于`heroku run console`连接到应用程序的控制台并查看输出`User.all`以查看它是否存在。导致此错误的并不是您在 Heroku 上运行它的事实。

# hadoop - Hadoop 的示例数据

> ID：15436085
> 
> 赞同：8
> 
> 时间：2013-03-15T15:24:17.263
> 
> 标签：hadoop

出于教育目的，我正在寻找大量数据。来自社交网络的数据可能很有趣，但很难获得。来自科学实验的数据可能会导致编写非常困难的算法以获得有趣的结果。有谁知道我如何/在哪里可以生成/找到一个大型有趣的数据集？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T01:49:54.047

以下是我收集的一些公共数据集

[http://wiki.gephi.org/index.php/Datasets](http://wiki.gephi.org/index.php/Datasets)
[为 Hadoop 下载大数据](https://stackoverflow.com/questions/10843892/download-large-data-for-hadoop)
[http://datamob.org/datasets](http://datamob.org/datasets)
[http://konect.uni-koblenz.de/](http://konect.uni-koblenz.de/)
[http://snap.stanford.edu /data/](http://snap.stanford.edu/data/)
[http://archive.ics.uci.edu/ml/](http://archive.ics.uci.edu/ml/)
[https://bitly.com/bundles/hmason/1](https://bitly.com/bundles/hmason/1)
[http://www.inside-r.org/howto/finding-data-internet](http://www.inside-r.org/howto/finding-data-internet)
[http ://goo.gl/Jecp6](http://goo.gl/Jecp6)
[http://ftp3.ncdc.noaa.gov/pub/data/noaa/1990/](http://ftp3.ncdc.noaa.gov/pub/data/noaa/1990/)
[http://data.cityofsantacruz.com/](http://data.cityofsantacruz.com/)
[http://bitly.com/bundles/hmason/ 1](http://bitly.com/bundles/hmason/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T20:04:23.693

在这里，亚马逊列出了一些您可以尝试的大型公共数据集：http: [//aws.amazon.com/publicdatasets/](http://aws.amazon.com/publicdatasets/)

# ios - 应用程序看起来像主从行为像标签栏控制器

> ID：15436087
> 
> 赞同：0
> 
> 时间：2013-03-15T15:24:30.983
> 
> 标签：ios, ipad, uitabbarcontroller, master-detail

我需要开发一些看起来像主从 ipad 应用程序但需要像标签栏应用程序一样的东西。

为了更清楚，我将尝试用下面的例子来解释。

```
Master View        Detail View Controller
   ||                       ||
Section A   -------Navigation Controller
Section B   -------Navigation Controller
Section C   -------Navigation Controller 
```

我在想怎么做，发现这个应用程序完全符合我的要求。

![在此处输入图像描述](../Images/15c4e99101f8d7529c4239c7576ddc11.png)

![在此处输入图像描述](../Images/66a40b327b0ccf987fc783a4ac241502.png)

![在此处输入图像描述](../Images/6dd10a80b02cc0e054f8d45312103bac.png)

上面的应用程序就像我想要的那样。现在与常规的不同之处`master detail split view controller`在于，在掌握详细信息时，您将拥有一个`detail root`并且需要从那里导航。

不知何故，上面的应用程序完成了每个项目`masterview`都有自己的导航控制器，当你选择一个项目`masterview`并返回到旧的选择视图时，它会留在堆栈上。（像 Facebook 应用程序，但更好）。

让我们说你的

```
(Master)      (Detail)
Section A     Navigation Root ---->VC1--->VC2--->VC3 
```

如果您选择主上的另一个部分

```
(Master)      (Detail)
Section b     Navigation Root ---->VC1 
```

当您导航时`between master sectionA`，`master sectionB`您会在堆栈上的同一位置找到您的视图。所以当你回到`Section A`你会看到VC3。

我的客户希望在应用程序中具有相同的功能。你们对上述功能背后的逻辑有什么想法和资源吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:12:25.473

您可以使详细视图控制器成为隐藏标签栏的标签栏控制器。在主表中选择一个项目将只是设置标签栏控制器的 selectedIndex 属性。

# .net - Windows forms: How do I add xaml to RichTextBox?

> ID：15436088
> 
> 赞同：0
> 
> 时间：2013-03-15T15:24:32.640
> 
> 标签：.net, winforms, c++-cli

I want to show a formatted text in RichTextBox. I have an xaml as a source of formatted text. How do I add xaml to RichTextBox?

PS I'm using windows forms.

# ios - 使用 MPMoviePlayer 从广播流中获取元数据？(iOS)

> ID：15436089
> 
> 赞同：0
> 
> 时间：2013-03-15T15:24:33.500
> 
> 标签：ios, objective-c, cocoa-touch, mpmovieplayercontroller, avaudioplayer

我正在使用**MPMoviePlayer**进行广播流媒体，我需要获取当前的曲目信息。

谁能帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:29:13.290

首先，您需要设置 a`NSNotification`以便可以按特定间隔获取数据，如下所示：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                      selector:@selector(StreamMeta:)
                                      name:MPMoviePlayerTimedMetadataUpdatedNotification
                                      object:nil]; 
```

接下来，创建方法。我将使用**streamMPMoviePlayer**作为您的名称`MPMoviePlayerController`并使用**metaString**作为`NSString`将存储元数据值的名称：

```
- (void)StreamMeta:(NSNotification*)notification
{
  if ([streamMPMoviePlayer timedMetadata] != nil) {
      MPTimedMetadata *meta = [[streamMPMoviePlayer timedMetadata] objectAtIndex:0];
      metaString = meta.value; // gives the NSString the artist/song information
  }
  else {
     // No metadata available
  }
} 
```

# php - .htaccess 多次重写？

> ID：15436091
> 
> 赞同：1
> 
> 时间：2013-03-15T15:24:40.030
> 
> 标签：php, html, .htaccess

我想重写多页。

我希望将 mysite.com/home 的请求重写为 mysite.com/home.php，并将 mysite.com/u/erty5000 的请求重写为 mysite.com/profile.php?u=erty5000 使用 . htaccess 文件。

这可能吗？如果是，如何？

到目前为止，这就是我将请求从 mysite.com/home 重写为 mysite.com/home.php

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.+)$ /$1.php [L,QSA] 
```

提前致谢！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:34:50.710

你已经有了第一条规则。但是，您必须排除该`u/...`请求。添加一个[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)，它执行此操作

```
RewriteCond %{REQUEST_URI} !^/u/ 
```

第二次重写工作类似。从请求中提取需要的部分并在替换中使用它

```
RewriteRule ^u/(.+)$ /profile.php?u=$1 [L,QSA] 
```

# html5-video - MP4 video works in ie9, not chrome or safari

> ID：15436095
> 
> 赞同：1
> 
> 时间：2013-03-15T15:24:43.173
> 
> 标签：html5-video

I'm creating a site that reads a JSON file and using backbone.js creates a one page website that shows 60 lessons (grouped by topic). Each lesson has at least one video. All videos were encoded in MP4 H.264 and OGG. The site was tested last week in FF, IE9, iPad and iPhone, so I know that the videos were encoded correctly.

Some changes to the host were made and now the videos aren't playing correctly. FF works fine, but the browsers using the MP4 are showing different behaviors.

They actually work in IE9 on the page and surfed to directly. In chrome, they don’t work on the page but I can surf to the video and it will play. In safari, surfing to the video doesn’t let it play either.

Here's a link to the site. Ignore the certificate warning. The videos are displayed by clicking the red "WATCH" tab. [https://elearning.rcsdk12.org/courses/Algebra1/#topic/1/lesson/1](https://elearning.rcsdk12.org/courses/Algebra1/#topic/1/lesson/1)

# sql-server-2005 - Stored procedure in loop

> ID：15436096
> 
> 赞同：3
> 
> 时间：2013-03-15T15:24:44.033
> 
> 标签：sql-server-2005, stored-procedures

```
for (int i = 0; i < purchaseListView.Items.Count; i++)
Connection con = new Connection();
                 SqlCommand cmd = new SqlCommand();
                 SqlCommand cmdFifo = new SqlCommand();
                 con.OpenConnection();
                 cmd.Connection = con.DataBaseConnection;
                 cmd.CommandType = CommandType.StoredProcedure;
                 cmd.CommandText = "insertDetail";
                 cmdFifo.Connection = con.DataBaseConnection;
                 cmdFifo.CommandType = CommandType.StoredProcedure;
                 cmdFifo.CommandText = "insertInToMain"; 
```

This is my code and I want to know if the loop affects performance of my software and if this is the right way to call stored procedure in loop.

I have stored the procedure in a class and I want to call it from a form when the save button is clicked and insert 10 items in the database via same stored procedure.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:25:59.583

您正在为每个非常低效的项目创建一个新的连接对象。

创建一个连接对象并`n`使用产品详细信息执行存储过程时间。或者，创建一个存储过程来接受 10 个项目并在该级别插入数据。

将其移到循环之外（您可以在不创建新实例的情况下访问循环内部`con`：`cmd`

```
 Connection con = new Connection();
  SqlCommand cmd = new SqlCommand();
  con.OpenConnection();
  cmd.Connection = con.DataBaseConnection;
  cmd.CommandType = CommandType.StoredProcedure;
  cmd.CommandText = "insertDetail"; 
```

在循环中，您可以将所有参数添加到`cmd`对象。

```
 cmd.Parameters.Add("@Item", SqlDbType.Int);
 cmd.Parameters["@Item"].Value = purchaseListView.Items[i];
 cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:27:48.070

好吧，您正在打开 10 个连接，而且您似乎没有关闭它们，所以您可能会用完连接，但我猜这不是整个代码，您可以发布整个 for 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:27:59.403

您应该在循环之前设置连接和存储过程，并且只更新命令参数值并在循环内执行。像这样：

```
Connection con = new Connection();
SqlCommand cmd = new SqlCommand();
SqlCommand cmdFifo = new SqlCommand();
con.OpenConnection();
cmd.Connection = con.DataBaseConnection;
cmd.CommandType = CommandType.StoredProcedure;
cmd.CommandText = "insertDetail";
cmd.Parameters.Add("@Item", SqlDbType.Int); 
cmdFifo.Connection = con.DataBaseConnection;
cmdFifo.CommandType = CommandType.StoredProcedure;
cmdFifo.CommandText = "insertInToMain";
//now that your connections & commands are set up, you can reuse them within the loop
for (int i = 0; i < purchaseListView.Items.Count; i++)
{
    //ToDo:assign any SP parameter values
    cmd.Parameters["@Item"].Value = purchaseListView.Items[i]; 
    // ...

    //then exec within the loop
    cmd.ExecuteNonQuery();
    cmdFifo.ExecuteNonQuery();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:32:16.990

我建议您创建一个表并通过遍历所有输入将整个数据插入其中，即尝试创建一个存储过程。多次运行 for 循环是低效的，并且数据库将生成结果集的次数，这也会由于网络开销而影响您的性能。

# javascript - I don't understand AJAX callbacks

> ID：15436101
> 
> 赞同：0
> 
> 时间：2013-03-15T15:25:06.107
> 
> 标签：javascript, ajax, jquery

I have a javascript function which executes on the change of a dropdown:

```
 <script type="text/javascript">
        $(function()
        {
            // Executes when the status dropdown changes value
            $('select[name="status_dropdown"]').change(function(event)
            {
                var $this = $(event.target);
                var orderId = $this.closest('tr').children('td:eq(0)').text(); // index 0 refers to the "order_id column" in the table

                var result = null;
                var scriptUrl = "ajax_php/update_status.php?order_id=" + orderId + "&status_id=" + this.value;

                $.ajax(
                {
                    url: scriptUrl,
                    type: 'get',
                    dataType: 'html',
                    async: false,
                    success: function(data)
                    {
                       result = data;
                       alert(result);
                   }
                });
            });
        })
    </script> 
```

I am trying to get the alert call to show the return value of the following php code (which is true):

```
 <?php
        .
        .
        .

        return true;
    ?> 
```

The alert doesn't pop up. Anyone know why ???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:55:52.650

我用另一个 URL 尝试了你的代码，它运行良好。有以下三种情况：

*   scriptUrl 未正确计算且未指向您的 PHP 脚本
*   您的服务器已关闭
*   您正在访问的 URL 与您的脚本之一不在同一域下提供（同源策略）

如果将错误处理程序添加到 ajax 参数，则可以查看错误的详细信息：

```
error : function(jqXHR, textStatus, errorThrown) {
    alert(errorThrown);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:26:40.817

Return 仅在 php 脚本中返回一个值 - 要将其输出到 ajax，您需要将结果实际输出到页面，在这种情况下类似于`echo "true";`或`print("true");`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-15T15:50:33.030

尝试这个

```
$(document).ready(function(){
    $('select[name="status_dropdown"]').change(function(event)
        {
            var $this = $(event.target);
            var orderId = $this.closest('tr').children('td:eq(0)').text(); // index 0 refers to the "order_id column" in the table

            var result = null;
            var scriptUrl = "ajax_php/update_status.php?order_id=" + orderId + "&status_id=" + this.value;

            $.ajax(
            {
                url: scriptUrl,
                type: 'get',
                dataType: 'html',
                async: false,
                success: function(data)
                {
                   result = data;
                   alert(result);
               }
            });
        });
}); 
```

# java - 如何从 ldap DirContextOperations 获取 memberOf 属性

> ID：15436103
> 
> 赞同：3
> 
> 时间：2013-03-15T15:25:14.720
> 
> 标签：java, spring, ldap, spring-ldap

我正在尝试获取用户所属的组列表，目前我可以获得以下大多数属性

```
CustomLdapUserDetails.Essence essence = new CustomLdapUserDetails.Essence();
essence.setDn(dn);
Object passwordValue = ctx.getObjectAttribute(passwordAttributeName);
String givennameValue = (String)ctx.getObjectAttribute("givenname");
String snValue = (String)ctx.getObjectAttribute("sn");
String titleValue = (String)ctx.getObjectAttribute("title");
essence.setFirstname(givennameValue);
essence.setLastname(snValue); 
```

但我不知道如何获取 memberOf 属性。如果我将整个 DirContextOperations 输出为字符串，我会得到以下信息

```
org.springframework.ldap.core.DirContextAdapter: dn=uid=emp123 {rdn=uid=emp123,
whenCreated=20110816063203.0Z,
objectCategory=CN=fompanyPerson,CN=Schema,CN=Configuration,CN={9F17F445-56C4-42D9-
B7C6-B630FFEA7F07}, badPwdCount=0, otherTelephone=123-456789, businessUnit=IREIRE BU, 
ntAccount=DMN1\emp123, managerID=emp987, objectGUID=5?
?e6A??????/, mail=emp123@somewhere.com, uid=emp123, companyWorkRelationship=EMP, 
memberOf[0]=CN=ABC IREIRE,OU=AutoGroups,DC=entdir,DC=gtn,DC=com, 
memberOf[1]=CN=azgEntJazzUsers,OU=AutoGroups,DC=entdir,DC=gtn,DC=com, companySite=DBL, 
companyCostCenter=91827, companyBusinessGroup=IREIRE BG, ntDomain=DMN1, instanceType=4, 
corpID=emp123, objectSid=  I???&?C?k?J???????, st=XX, badPasswordTime=0, vdejoindn=P-
ENTDIRXXX-1:uid=emp123,DC=entdirXXX,DC=gtn,DC=com, companySourceSystem=C-WORKSYSTEM, 
objectClass[0]=top, objectClass[1]=person, objectClass[2]=organizationalPerson, 
objectClass[3]=user, objectClass[4]=inetOrgPerson, objectClass[5]=fompanyPerson, 
company=ABC DEV, name=emp123, sn=Smith, exchangeAlias=emp123, telephoneNumber=1-987-6543, 
ntDomainRelative=DMN1, uSNChanged=999111, physicalDeliveryOfficeName=DXI, 
ntAccountRelative=DMN1\emp123, cn=Smith, John, exchangeServer=someServer, 
documentumUserName=Smith JOHN emp123, title=SOFTWARE ENGINEER/DEVELOPER, 
otherCertMailbox=emp123@xyz.somewhere.com, msDS-UserAccountDisabled=TRUE, 
managerName=Bloggs, Joe, givenName=John, uSNCreated=18418957, displayName=Smith, John, 
pwdLastSet=629579433359695509, fompanyPersonStatus=A, whenChanged=20120266070711.0Z, 
o=IREIRE BU, distinguishedName=uid=emp123,DC=entdirXXX,DC=gtn,DC=com, eDARevoke=N, 
division=SEF-GL , manager=uid=emp987,DC=entdirXXX,DC=gtn,DC=com, 
exchangeDirectory=SMXZG1DB, samAccountName=emp123, sametimeServer=cvxcluster} 
```

我需要得到的是每个memberOf的CN值到一个字符串数组中，我试过了：

```
ctx.getObjectAttribute("memberOf[1]"))
ctx.getObjectAttribute("memberOf"))
ctx.getObjectAttribute("memberOf=CN")) 
```

我在网上看到过设置的例子，但我找不到任何获取的例子，真的比获取其他属性复杂得多吗？

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T15:42:53.567

你可能只会从最后错过一个“s”。尝试：

```
ctx.getObjectAttributes("memberOf") 
```

[javadoc 阐明了单数](http://static.springsource.org/spring-ldap/site/apidocs/org/springframework/ldap/core/DirContextOperations.html#getObjectAttribute%28java.lang.String%29)和[复数](http://static.springsource.org/spring-ldap/site/apidocs/org/springframework/ldap/core/DirContextOperations.html#getObjectAttributes%28java.lang.String%29)形式方法之间的区别。（即使给定的属性是多值的，前者也只返回第一个值。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:57:59.570

您是否使用 Active Directory 作为 LDAP 提供程序？并非所有 LDAP 提供程序都具有用户的 memberOF 属性。

获取用户组的正确方法是在组中搜索过滤器，例如：

```
(member=<fully distinguished name of user>) 
```

返回属性“CN”。

# doctrine-orm - Doctrine2 simple where clause issue

> ID：15436104
> 
> 赞同：1
> 
> 时间：2013-03-15T15:25:17.597
> 
> 标签：doctrine-orm, doctrine

Short and Simple: From time to time we send gifts to some of our users. I have a `user` table and a `gift` table with a many-to-many relationship. I want to fetch all users which did NOT receive a particular gift.

The following query however returns me all users and the gifts they've received, with the particular gift excluded.

```
$qb = $this->_em->createQueryBuilder();
$qb->select('u, g')
        ->from('Application\Entity\User', 'u')
        ->leftJoin('u.gifts', 'g')
        ->where('g.id != = :giftId')
        ->setParameter('giftId', 2); 
```

If a user received a particular gift, I want to exclude that user from the result set. Is this possible with Doctrine2?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T01:14:07.903

您首先需要选择所有用户，然后排除那些已经拥有您的礼物的用户：

```
SELECT
    u
FROM
    Application\Entity\User u
WHERE
    u.id NOT IN(
        SELECT
            u2.id
        FROM
            Application\Entity\User u2
        JOIN
            u2.gifts g
        WHERE
            g.id = :giftId
    ) 
```

在[API](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/QueryBuilder.php)中，它如下所示：[`QueryBuilder`](http://docs.doctrine-project.org/en/latest/reference/query-builder.html)

```
$qb1 = $em->createQueryBuilder();
$qb2 = $em->createQueryBuilder();

$qb2
    ->select('u2')
    ->from('Application\Entity\User', 'u2')
    ->join('u2.gifts', 'g')
    ->andWhere($qb2->expr()->eq('g.id', ':giftId');

$users = $qb1
    ->select('u')
    ->from('Application\Entity\User', 'u')
    ->andWhere($qb1->expr->in($qb2->getDQL())
    ->setParameter('giftId', $giftId)
    ->getQuery()
    ->getResult(); 
```

另外，我个人认为它不`QueryBuilder`适合这个用例，除非你有动态 DQL。如您所见，查询变得相当复杂，有时您甚至会退回到`QueryBuilder#getDQL`，这会构建 DQL 字符串并使回收`$qb2`变得不可能。普通的 DQL 在这里工作得很好。

# php - php: alert user to Upload attachment limit and still submit form data

> ID：15436105
> 
> 赞同：0
> 
> 时间：2013-03-15T15:25:18.317
> 
> 标签：php, codeigniter

I have a codeigniter php app. User fills out page, submits form for consideration. The form allows user to attach files with their submission. There is there is a 5mb limit on the file size that can be uploaded. When the user exceeds the limit, the form tries to submit, but ends up basically resetting/refreshing itself, so all the fields are blank, user has to reenter data.

How can/should I do two things: alert user the attachments have exceeded the limit allowed and submit the form data, excluding the attachments

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:29:26.723

尝试这个，

```
if($_FILES["table_name"]["size"] > 5242880){
      echo 'File are too big';
      // do the rest of the submit
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:39:31.403

> 我如何/应该做两件事：提醒用户附件已超过允许的限制并提交表单数据，不包括附件

这不能在 PHP 中完成——因为当您的脚本运行时，上传已经完成。

HTML 3.2 中有一个`maxlength`for 文件输入，但在 HTML 4.01 中被删除了。无论如何，浏览器支持很糟糕。（我不知道`maxlength`HTML5 中的属性是否适用于文件上传字段。）

使用 HTML5 File API 可能是一种更有前途的方法（当然，仅限现代浏览器）。使用它可以相对简单地读取所选文件的属性。因此，如果大小超过您的最大值，您可以从 DOM 中删除文件上传字段（或简单地将其设置为`disabled`），如果您只想提交没有文件上传字段的表单的其余部分。

# javascript - Iterate through a dynamically created table and Insert data into SQL Server table

> ID：15436110
> 
> 赞同：0
> 
> 时间：2013-03-15T15:25:30.747
> 
> 标签：javascript, html, coldfusion, coldfusion-7

I have a dynamically created table in an .html form and I want to do an insert in the .cfm form. I need to loop through the rows of the dynamically created table and perform an INSERT into a table in SQL Server. Also, the table was created in JavaScript. Thanks.

```
<cfoutput>
 <cfloop from="1" to="#ArrayLen(tblSample)#" index="i">
  <cfquery name="AppendForm" datasource="TestSource">
    INSERT INTO tblGrand
    (GrandNum,
    GrandName, 
    County, 
    VersionType, 
    VersionNum, 
    SectCode, 
    Comments,    
    Provider,       
    TypeID,     
    SubmitDate)                 
    Select
    <cfif isdefined("form.GrandNum")>
      '#GrandNum#',
    <cfelse>
      null,
    </cfif>
    <cfif isdefined("form.GrandNme")>
      '#GrandNme#',
    <cfelse>
      null,
    </cfif>
    <cfif isdefined("form.selCnty")>
      '#selCnty#',
    <cfelse>
      null,
    </cfif>
    <cfif isdefined("form.VersionType")>
      '#VersionType#',
    <cfelse>
      null,
    </cfif>
    <cfif isdefined("form.VersionNum")>
      '#VersionNum#',
    <cfelse>
      null,
    </cfif>
    <cfif isdefined("form.SectCode[i]")>
      '#SectCode[i]#',
    <cfelse>
      null,
    </cfif>
    <cfif isdefined("form.txtComments[i]")>
      '#textComments[i]#',
    <cfelse>
      null,
    </cfif>
    <cfif isdefined("form.txtProvider[i]")>
      '#txtProvider[i]#',
    <cfelse>
      null,
    </cfif>
    <cfif isdefined("form.selType[i]")>
      '#selType[i]#',
    <cfelse>
      null,
    </cfif>
    '#DateFormat(Now(),"yyyy-mm-dd") &" "& TimeFormat(Now(),"HH:mm:ss")#'
    </cfquery>
  </cfloop>
</cfoutput> 
```

Here is my html code for creating the table:

```
<script language="javascript" type="text/javascript">
function addRow() {

    var tbl = document.getElementById('tblSample');
    var lastRow = tbl.rows.length;  
    var iteration = lastRow;
    var row = tbl.insertRow(lastRow);

  // left cell
    var cellLeft = row.insertCell(0);
    var textNode = document.createTextNode(iteration-3);
    cellLeft.appendChild(textNode);

      // select cell
    var cellRightSel = row.insertCell(1);
    var sel = document.createElement('select');
    sel.name = 'sectCode' + iteration;
    sel.id = 'sectCode' + iteration;    
    sel.options[0] = new Option('---Any---', '0');
    sel.options[1] = new Option('Level 0.5: test1, '1');
    sel.options[2] = new Option('Level I: test2', '2');
    sel.options[3] = new Option('Level I.D: test3', '3');
    sel.options[4] = new Option('Level II.1: test4', '4');
    sel.options[5] = new Option('Level II.5: test5', '5');
    cellRightSel.appendChild(sel);

    var cellRights = row.insertCell(2);
    var els = document.createElement('input');
    els.type = 'text';
    els.name = 'txtComments' + iteration;
    els.id = 'txtComments' + iteration;
    els.size = 20;
    cellRights.appendChild(els);

    var cellRight = row.insertCell(3);
    var el = document.createElement('input');
    el.type = 'text';
    el.name = 'txtProvider' + iteration;
    el.id = 'txtProvider' + iteration;
    el.size = 20;  
    cellRight.appendChild(el);

    var cell7 = row.insertCell(8);
    var sel5 = document.createElement('select');
    sel5.name = 'selType' + iteration;
    sel5.id = 'selType' + iteration;
    sel5.options[0] = new Option('---Any---', '---Any---');
    sel5.options[1] = new Option('Fees, 'Fees);
    sel5.options[2] = new Option('Reimbursement', 'Reimbursement');
    cell7.appendChild(sel5);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:30:25.910

您需要使用`VALUES`插入到数据库中。你也应该使用`structKeyExists`而不是，`isDefined`你也应该使用`cfqueryparam`。我也会限定你的变量。

```
<cfloop from="1" to="#ArrayLen(tblSample)#" index="i">
  <cfquery name="AppendForm" datasource="TestSource">
  INSERT INTO tblGrand
  (GrandNum,
  GrandName, 
  County, 
  VersionType, 
  VersionNum, 
  SectCode, 
  Comments,      
  Provider,     
  TypeID,       
  SubmitDate) 
  VALUES (
  <cfif structKeyExists(form,"GrandNum")>
    <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.GrandNum#">,
  <cfelse>
    NULL,
  </cfif>
  <cfif structKeyExists(form,"GrandNme")>
    <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.GrandNme#">,
  <cfelse>
    NULL,
  </cfif>
  <cfif structKeyExists(form,"selCnty")>
    <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.selCnty#">,
  <cfelse>
    NULL,
  </cfif>
  <cfif structKeyExists(form,"VersionType")>
    <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.VersionType#">,
  <cfelse>
    NULL,
  </cfif>
  <cfif structKeyExists(form,"VersionNum")>
    <cfqueryparam cfsqltype="cf_sql_varchar" value="#form.VersionNum#">,
  <cfelse>
    NULL,
  </cfif>
  <cfif structKeyExists(form,"SectCode"&i)>
    <cfqueryparam cfsqltype="cf_sql_varchar" value="#form['SectCode'&i]#">,
  <cfelse>
    NULL,
  </cfif>
  <cfif structKeyExists(form,"txtComments"&i)>
    <cfqueryparam cfsqltype="cf_sql_varchar" value="#form['textComments'&i]#">,
  <cfelse>
    NULL,
  </cfif>
  <cfif structKeyExists(form,"txtProvider"&i)>
    <cfqueryparam cfsqltype="cf_sql_varchar" value="#form['txtProvider'&i]#">,
  <cfelse>
    NULL,
  </cfif>
  <cfif structKeyExists(form,"selType"&i)>
    <cfqueryparam cfsqltype="cf_sql_varchar" value="#form['selType'&i]#">,
  <cfelse>
    NULL,
  </cfif>
  <cfqueryparam cfsqltype="cf_sql_timestamp" value="#Now()#">)
  </cfquery>
</cfloop> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:48:59.653

首先，你的问题是什么？你有错误吗？您现在得到什么结果 - 它们与您的预期有何不同？

在不了解您的表单/数据结构的情况下，我通常建议在这种情况下使用唯一的表单字段名称。当您对多个字段使用相同的名称时，字段值将作为逗号分隔列表提交。当值本身包含逗号时，这可能会导致问题，因为无法确定一个值的结束位置和另一个值的开始位置。

要创建唯一的字段名称，请让您的 javascript 将计数器编号附加到每组*字段*。所以这些字段将被命名为：

*   FORM.GrandNum1, FORM.GrandNme1, FORM.sectCode1, FORM.txtComments1, ...
*   FORM.GrandNum2, FORM.GrandNme2, FORM.sectCode2, FORM.txtComments2, ...
*   FORM.GrandNum3, FORM.GrandNme3, FORM.sectCode3, FORM.txtComments3,...`

然后将总数存储在隐藏字段中。在您的操作页面上，执行一个简单的 from/to 循环。如果需要，使用`cfparam`为可能不存在的任何字段设置默认值，例如复选框或单选按钮（文本字段*始终*存在）。然后你可以使用比IMO更干净的`null`属性。`cfqueryparam``isDefined``structKeyExists`

```
 <cfparam name="FORM.totalFields" default="0">
    <cfloop from="1" to="#FORM.totalFields#" index="i">

       <!--- extract current set of values --->
       <cfset variables.txtComments = TRIM( FORM["txtComments"& i] )>
       <cfset variables.sectCode = TRIM( FORM["sectCode"& i] )>
       ...
       <cfquery name="AppendForm" datasource="TestSource">
          INSERT INTO tblGrand (Comments, SectCode ....)
          VALUES 
          (
            <cfqueryparam cfsqltype="cf_sql_varchar" value="#variables.txtComments#" null="#not len(variables.txtComments)#">
            , <cfqueryparam cfsqltype="cf_sql_varchar" value="#variables.sectCode#" null="#not len(variables.sectCode)#">
       ...
          )
       </cfquery>

    </cfloop> 
```

**更新：**

根据您的更新，您现有的代码与我上面最初描述的非常接近。您只需要添加隐藏字段，并在每次添加行时更新它。然后上面的 cfloop 代码应该可以正常工作。

```
 function addRow() {
        // removed extra variables
        var tbl = document.getElementById('tblSample');
        var row = tbl.insertRow(tbl.rows.length);

        // use hidden value to calculate total fields
        var iteration = parseInt(document.getElementById('totalFields').value) + 1;

        var cellLeft = row.insertCell(0);
        var textNode = document.createTextNode(iteration);

        ... etcetera ...

        // save new total 
        document.getElementById('totalFields').value = iteration;

     }

    ...

    <input type="hidden" id="totalFields" name="totalFields" value="0" /> 
```

* * *

**更新：**

其他一些评论

1.  不需要`cfoutput`围绕查询循环。变量将被自动评估
2.  在处理用户提供的值时始终使用`cfqueryparam`以防止 sql 注入。尤其是循环的时候。`cfqueryparam`使用可以[“在多次执行 cfquery 语句时提高性能”的](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f6f.html)绑定变量。
3.  不要`DateFormat`在查询中使用。它是为演示而设计的，并返回一个字符串。根据您的数据库设置，日期字符串可能会被误解。为避免歧义，请始终插入日期/时间*对象*，即喜欢`now()`而不是字符串。请参阅[Matt 的示例](https://stackoverflow.com/a/15436217/104223)和他对`now()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:49:22.487

这是对其他两个答案的补充。我将把它限制在前面没有提到的两个主题上。

首先，有时将循环放在查询中而不是将查询放在循环中更有效。详细信息将取决于您的数据库，但一种通用的方法是这样的：

```
insert into yourtable
(field1, field2, etc)
select null, null, etc
from SomeSmallTable
where 1 = 3
<cfloop>
union
select #value1#, #value2#, ect
from somesmalltable
</cfloop> 
```

在 sql server 中，您不需要“来自 SomeSmallTable”。在 mysql 中，您可以使用 values 关键字并仍然使用循环。

由于各种原因，此方法不适用于大量记录，但可能值得一试。

接下来，您可能不得不处理空白表单字段。对于不能简单地插入空字符串的数字和日期字段尤其如此。好消息是 cfqueryparam 有一个 null 属性。这是日期数据类型的示例

```
<cfqueryparam = cfsqltype="cf_sql_date" value="#something#"
null = "#not isDate(something)#"> 
```

由于 isDate 在空字符串上返回 false，这将导致将空值插入到您的日期字段中，而不是使您的查询崩溃。

# iphone - when picker view selected keyboard still visible

> ID：15436112
> 
> 赞同：0
> 
> 时间：2013-03-15T15:25:35.667
> 
> 标签：iphone, keyboard, uipickerview

我有一个文本字段和选择器视图。当我选择文本字段选择器视图时，如果我在选择器中选择行，我的文本字段仍然是可编辑的。我只想在下拉列表中设置文本字段。还有一个问题，当我选择文本字段时，我的键盘是可见的

```
 - (void)textFieldDidBeginEditing:(UITextField *)textField {

       [txtstate resignFirstResponder];//this is to hide key board
        txtstate.inputView=pickerView;

    ViewForValuePicker = [[UIView alloc]initWithFrame:CGRectMake(43,337, 212, 160)];
    UIToolbar *toolBar = [[UIToolbar alloc]initWithFrame:CGRectMake(43, 0, 212, 30)];
    toolBar.barStyle = UIBarStyleBlackOpaque;
    UIBarButtonItem *btn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneBtnPressToGetValue)];
    [toolBar setItems:[NSArray arrayWithObject:btn]];

    [ViewForValuePicker addSubview:toolBar];
    pickerView = [[UIPickerView alloc]init] ;
    pickerView.frame=CGRectMake(43, 30, 212, 140);
    pickerView.delegate = self;
    pickerView.dataSource= self;
    pickerView.showsSelectionIndicator = YES;
         [ViewForValuePicker addSubview:pickerView];
    errstate.hidden=YES;
    [testScroll addSubview:ViewForValuePicker];
    [pickerView setHidden:NO];

   }

     - (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row
      forComponent:(NSInteger)component reusingView:(UIView *)view {
     UILabel *retval = (id)view;
         if (!retval) {
          retval= [[UILabel alloc] initWithFrame:CGRectMake(0.0f, 0.0f,
             [pickerView    rowSizeForComponent:component].width,
                     [pickerView rowSizeForComponent:component].height)] ;
   }
   retval.text = [[arr objectAtIndex:row]objectForKey:@"Code"];
    retval.font = [UIFont fontWithName:@"Helvetica-Bold" size:12];

  return retval;
 }

     - (void)doneBtnPressToGetValue{

      [pickerView resignFirstResponder];

    [pickerView removeFromSuperview];
       txtcity.text=nil;
    autocompleteTableView.hidden=YES;
     [ ViewForValuePicker removeFromSuperview];

 }

  -(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {

     return 1;
    }

 - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
  { 
   txtLId.text=[[arr objectAtIndex:row] valueForKey:@"LId"]; 

    txtstate.text= [[arr objectAtIndex:row] valueForKey:@"Code"];
   //txtstate.userInteractionEnabled=NO;

 } 

 - (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component; 
 { 
return [arr count]; 
 } 

  - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component; 
 { 

   return [[arr objectAtIndex:row] valueForKey:@"Code"]; 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:29:34.690

您好，尝试使用您的代码更新以下代码，或在[http://pastie.org/6569798](http://pastie.org/6569798)查看完整代码：-

首先定义

```
UIActionSheet *actionSheet; 
```

在头文件（.h）中。

```
- (void)createActionSheet {
    if (actionSheet == nil)
    {
        actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select" delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];

        UIToolbar *pickerToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
        pickerToolbar.barStyle = UIBarStyleBlackOpaque;
        [pickerToolbar sizeToFit];

        NSMutableArray *barItems = [[NSMutableArray alloc] init];

        UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
        [barItems addObject:flexSpace];
        [flexSpace release];

        UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneBtnPressToGetValue)];
        [barItems addObject:doneBtn];
        [doneBtn release];

        [pickerToolbar setItems:barItems animated:YES];
        [barItems release];

        [actionSheet addSubview:pickerToolbar];
        [pickerToolbar release];

        [actionSheet showInView:self.view];
        [actionSheet setBounds:CGRectMake(0,0,320, 464)];
    }
}

-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
     [textField resignFirstResponder];
     return YES;
}

- (void)textFieldDidBeginEditing:(UITextField *)textField
{

    if(textField==txtstate)
    {
        pickerView = [[UIPickerView alloc]init] ;
        pickerView.frame=CGRectMake(0, 44, 320, 420);
        pickerView.delegate = self;
        pickerView.dataSource= self;
        pickerView.showsSelectionIndicator = YES;
        [pickerView setHidden:NO];

        [self createActionSheet];
        [actionSheet addSubview:pickerView];
        [textField resignFirstResponder];
    }
}

- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row
          forComponent:(NSInteger)component reusingView:(UIView *)view
{
    UILabel *retval = (id)view;
    if (!retval) {
        retval= [[UILabel alloc] initWithFrame:CGRectMake(0.0f, 0.0f,
                                                          [pickerView    rowSizeForComponent:component].width,
                                                          [pickerView rowSizeForComponent:component].height)] ;
    }
    retval.text = [arr objectAtIndex:row];
    retval.font = [UIFont fontWithName:@"Helvetica-Bold" size:12];

    return retval;
}

- (void)doneBtnPressToGetValue
{
    [txtstate resignFirstResponder];

    [actionSheet dismissWithClickedButtonIndex:0 animated:YES];
    [actionSheet release];
    actionSheet = nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:37:11.767

用 .分配你的`textfield.inputview`in viewDidLoad 本身`pickerView`。

In `textFieldDidBeginEditing`- 无需更多代码。

`UIPickerViewDelegate`也按原样使用您的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:38:02.173

如果您希望在选择文本字段时只显示选择器视图，请将您现在拥有的所有代码`textFieldDidBeginEditing`移入`viewDidLoad`. 如果您事先初始化`txtstate.inputView=pickerView;`，它将取代键盘作为主要输入。

# python - error in a python class with an not iterable object

> ID：15436117
> 
> 赞同：2
> 
> 时间：2013-03-15T15:25:50.633
> 
> 标签：python, class, numpy, runtime-error

i have a the following error message

```
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\IPython\core\interactiveshell.py", line 2721, in run_code
    exec code_obj in self.user_global_ns, self.user_ns
  File "<ipython-input-257-84ae6ec7b6f6>", line 1, in <module>
    accuracy.ra_os
  File "<ipython-input-255-a91d95432efe>", line 32, in ra_os
    return np.average([(ref.intersection(s).area/s.area) for s in seg])
TypeError: 'Polygon' object is not iterable 
```

where Polygon is the `Polygon class` of [shapely](http://toblerity.github.com/shapely/manual.html).

i have my own class Accuracy: stat values between reference (one) and segmented (one or more) polygons

```
ref = <shapely.geometry.polygon.Polygon at 0x4997b38>
seg = [<shapely.geometry.polygon.Polygon at 0x4b972e8>, <shapely.geometry.polygon.Polygon at 0x49c7390>]

import math
import numpy as np
from shapely.geometry import Polygon
nan = np.nan

class Accuracy(object):
    def __init__(self, ref, seg=None):
        self.ref = ref
        self.seg = seg

    @property
    def area(self):
        return self.ref.area

    @property
    def perimeter(self):
        return self.ref.length

    @property
    def centroidX(self):
        return self.ref.centroid.x

    @property
    def centroidY(self):
        return self.ref.centroid.y

    @property
    def segments(self):
        if self.seg:
            return len(self.seg)
        else:
            return 0

    @property
    def ra_or(self):
        if self.seg:
            return np.average([(ref.intersection(s).area/ref.area) for s in seg])
        else:
            return nan

    @property
    def ra_os(self):
        if self.seg:
            return np.average([(ref.intersection(s).area/s.area) for s in seg])
        else:
            return nan 
```

accuracy = Accuracy(ref, seg_overlap) accuracy.ra_os

```
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\IPython\core\interactiveshell.py", line 2721, in run_code
    exec code_obj in self.user_global_ns, self.user_ns
  File "<ipython-input-45-84ae6ec7b6f6>", line 1, in <module>
    accuracy.ra_os
  File "<ipython-input-7-1e04291926b0>", line 35, in ra_os
    return np.average([(ref.intersection(s).area/s.area) for s in seg])
TypeError: 'Polygon' object is not iterable 
```

if i run the function outside the class i have not this error

```
np.average([(ref.intersection(s).area/ref.area) for s in seg_overlap])
Out[47]: 0.48709794373000681 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:27:29.943

你的意思是说`self.seg`而不是仅仅`seg`：

```
return np.average([(ref.intersection(s).area/ref.area) for s in self.seg])
                                                                ^^^^^ 
```

（在两个功能中）

我认为您不小心引用了具有相同名称的全局对象。

# php - 如何仅验证方程式中操作数的有效输入

> ID：15436121
> 
> 赞同：0
> 
> 时间：2013-03-15T15:25:59.257
> 
> 标签：php

伙计们，我如何验证 php 中的操作数输入？我正在创建一个非常简单的计算器页面.. 所以 '+' '-' 和 '.' 除了数字之外，它们也是有效的输入。所以 is_numeric 是不够的验证。另外，如果你们知道在 drupal 中实现此验证的方法，请随时发布。顺便说一句，我正在使用 drupal。顺便说一下，这是我的 drupal 代码。我创建了一个简单的计算器模块。

```
<?php
/**
 * Implements hook_menu()
  */

function calculator_menu(){
    $items['calculator-page'] = array(
    'page callback' => 'drupal_get_form',
    'page arguments' => array('calculator_form'),
    'access callback' => TRUE,

    );
    return $items;
    }

function calculator_form(){

    $form['firstoperand'] = array(
    '#title' => t('First operand'),
    '#type' => 'textfield',
    '#required' => TRUE,
    '#rules' => 'numeric'
    );

    $form['operator'] = array(
    '#type' => 'select',
    '#options' => array(
        '+' => t('Plus'),
        '-' => t('Minus'),
        '*' => t('Times'),
        '/' => t('Divided by'),
    ),
    '#required' => TRUE,
    );

    $form['secondoperand'] = array(
    '#title' => t('Second operand'),
    '#type' => 'textfield',
    '#required' => TRUE,
    '#rules' => 'numeric'
    );

    $form['submit'] = array(
    '#type' => 'submit',
    '#value' => 'Generate',
    );

    $form['#submit'][] = 'calculator_form_submit';

    return $form;

    }

function calculator_form_submit($form, &$form_state){

    $firstoperand=$form_state['values']['firstoperand'];
    $operator=$form_state['values']['operator'];
    $secondoperand=$form_state['values']['secondoperand'];

    if(!is_numeric($firstoperand) || !is_numeric($secondoperand)){
        drupal_set_message("Must use numbers");
    }
    else{

    /*if($operator=='+'){

    $result= $firstoperand+$secondoperand;
    }
    if($operator=='-'){

    $result= $firstoperand-$secondoperand;
    }
    if($operator=='*'){

    $result= $firstoperand*$secondoperand;
    }
    if($operator=='/'){

    $result= $firstoperand/$secondoperand;
    }*/

    $result = $firstoperand+$operator+$secondoperand;

    drupal_set_message($result);

    }

    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:32:58.470

我会考虑使用 preg_match 来查找这些符号的正则表达式模式匹配。例如：

```
 1 <?php
  2 $subject = "1.00+2x3/4";
  3 $pattern = '/\.|\+|x|\//';
  4 preg_match_all($pattern, $subject, $matches, PREG_OFFSET_CAPTURE);
  5 print_r($matches);
  6 ?> 
```

这将产生以下结果：

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [0] => .
                    [1] => 1
                )

            [1] => Array
                (
                    [0] => +
                    [1] => 4
                )

            [2] => Array
                (
                    [0] => x
                    [1] => 6
                )

            [3] => Array
                (
                    [0] => /
                    [1] => 8
                )

        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:57:39.260

[您可以通过使用Drupal Form Api](http://drupal.org/project/fapi_validation)模块来利用正则表达式规则

```
$form['firstoperand'] = array(
    '#rules' => 'regexp[/^((\+|\-)?[1-9]\d*(\.\d+)?)|((\+|\-)?0?\.\d+)$/]'
    '#filters' => 'trim'
    ); 
```

# javascript - ie7、ie8 和 ie9 的最佳占位符 polyfil 脚本

> ID：15436125
> 
> 赞同：16
> 
> 时间：2013-03-15T15:26:06.133
> 
> 标签：javascript, internet-explorer, polyfills

您建议我使用哪个占位符 polyfill 脚本在 ie7、8 和 9 中提供占位符支持。

我从现代化团队看到了以下[列表](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)，想知道这里是否有人与他们或任何其他不在列表中的人有一些里程，他们认为什么是*最好的*

**我的评估标准是：**

*   文件大小
*   能够在没有现代化设备/yepnope 的情况下工作
*   速度（没有疯狂循环）
*   稳定性，在野外使用多少？
*   检测原生占位符能力，不打扰运行

我记得有一天我曾经在 onclick 事件中写了一行左右的输入来支持占位符 - 哈哈，但老实说，我懒得支持这些可怕的浏览器（[看这个有趣的](http://www.youtube.com/watch?v=JyGP0ZyxF5E)）。至少 IE10 终于朝着正确的方向前进了。

谢谢...

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-15T17:03:23.397

我推荐你使用[Mathias Bynens的](https://twitter.com/mathias)[jQuery Placeholder](https://github.com/mathiasbynens/jquery-placeholder) polyfill 。

*   支持IE6+
*   缩小了 2k
*   它自己做特征检测（不需要Modernizr）
*   代码很简单。jQuery 选择会因您的选择器而异
*   它是 HTML5Please 推荐的一种[polyfill](http://html5please.com)，列在您提到的[Modernizr Wiki上](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)
*   如果不需要，它不会执行代码

# php - 将 Javascript 数组保存到 PHP

> ID：15436126
> 
> 赞同：0
> 
> 时间：2013-03-15T15:26:06.770
> 
> 标签：php, javascript

您好，我对 javascipt 很陌生，所以请解释清楚。我目前正在运行一个 php 页面，其中包括：

upp.php

```
<script>
document.getElementById("data").value = localStorage.getItem('itemsArray');
</script> 
```

这个项目数组包含这样保存的对象：

```
function save(){

var oldItems = JSON.parse(localStorage.getItem('itemsArray')) || [];

var newItem = {};
var num = document.getElementById("num").value;

newItem[num] = {
    "methv": document.getElementById("methv").value
    ,'q1': document.getElementById("q1").value,
    'q2':document.getElementById("q2").value,
    'q3':document.getElementById("q3").value,
    'q4':document.getElementById("q4").value,
    'comm':document.getElementById("comm").value
};
oldItems.push(newItem);
localStorage.setItem('itemsArray', JSON.stringify(oldItems));}

$.post('upp.php',{ items: JSON.stringify(oldItems) }, function(response) {
    window.location.href = "upp.php"; 
```

页面的结果如下所示：

`[{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}},{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}}]`

无论如何我可以将这些信息保存到 PHP 中并拆分数据，这样我就可以像循环或其他东西一样一次操作它。例如：

第一次：

`{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}}`

下一个：

`{"1173627548":{"methv":"dont know","q1":"-","q2":"-","q3":"U","q4":"-","comm":""}}`

等等

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:28:14.640

**upp.php：**

```
<?php 
$array = json_decode($_POST['items'], True);
foreach ($array as $key=>$line) {
    # $key is a number like 1173627548
    # and $Line is an array with methv, q1, q2, q3, q4, and comm
}
?> 
```

这将向您显示它从 JSON 中获得的数组。现在您可以处理数据了。

# mysql - 包含在 mysql 中不起作用

> ID：15436129
> 
> 赞同：0
> 
> 时间：2013-03-15T15:26:22.900
> 
> 标签：mysql

我正在使用 CONTAINS，但它没有在 mysql 中工作。

> ```
>  mysql> SELECT * FROM MUTHU;
> +---------------------+
> | MY                  |
> +---------------------+
> | how is your studies |
> | how are you there   |
> | hi there            |
> +---------------------+
> 3 rows in set (0.00 sec) 
> ```

```
mysql> SELECT * FROM MUTHU CONTAINS ( MY, "how" );
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near '( MY,
 "how" )' at line 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:52:34.167

我相信 contains 主要用于 Xpath/Xquery。mysql 中一个类似的函数是 INSTR()。使用它的正确代码是：

```
 select * from MUTHU
    where INSTR(MY, 'how') > 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:42:55.027

我不认为 MYSQL 有一个名为 的函数`CONTAINS`，请尝试以下查询：

```
SELECT * FROM MUTHU
WHERE MY LIKE '%how%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:38:51.603

你错过了`Where`条件，

尝试这个：

```
SELECT * FROM MUTHU
Where MY CONTAINS ( MY,"how" ); 
```

# arrays - 查找数组中的元素数时出错（Perl）？

> ID：15436131
> 
> 赞同：0
> 
> 时间：2013-03-15T15:26:28.710
> 
> 标签：arrays, perl, hashtable

我正在尝试用 Perl 编写一个程序来查找数组中元素的数量。（这个数组应该由`.txt`当前目录中带有“”扩展名的文件组成。然后我计划使用这个数组将所有“ `.txt`”文件读入哈希。）但是，我一直得到一个数组大小 = 0。我知道`.txt`我的目录中有超过八个“”文件，那么我不会有超过八个数组元素吗？

我的程序如下：

```
 #!/user/bin/perl
    my $readfdir = '.';
    opendir(DIR, $readfdir) or die $!;
    my @readf = glob(".*.txt");
    my $arrSize = @readf;
    print "array size = $arrSize\n"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:30:35.723

你的 glob 很可能不是你想的那样

```
my @readf = glob(".*.txt"); 
```

您正在使用看起来像正则表达式的语法，即`.*`匹配任何字符串，但在全局中，即`*`. 所以应该是：

```
my @readf = glob("*.txt"); 
```

此外，如果您使用 glob 代替，您的 opendir 语句是非常多余的。使用 opendir/readdir 或 glob。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:30:02.883

```
glob(".*.txt"); 
```

你有一个“。” 在文件名的开头，您确定目录中有以这种方式命名的文件吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:30:17.580

更改您的[全局](http://perldoc.perl.org/functions/glob.html)规范。

```
use warnings;
use strict;

my @readf = glob("*.txt");
my $arrSize = @readf;
print "array size = $arrSize\n"; 
```

此外，不需要`opendir`和`glob`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:46:14.870

这是一个不使用的解决方案 `glob`。

```
my $dir = ".";
my @list_of_files;

opendir(my $dh, $dir) or die "$!";
for my $file (readdir $dh){
    push(@list_of_files, $file) if
        $file =~ /\.txt$/;
}

print join(' ', @list_of_files), "\n";
print "Number of files: ", scalar(@list_of_files), "\n"; 
```

另外，我相信`readdir`您的示例中不需要。例如。你可以`glob`。

此示例还将仅扫描给定目录中的 txt 文件。如果您想找到给定目录“下方”的所有内容，那就`File::Find`太好了。

# java - MOJO中的maven过滤API

> ID：15436132
> 
> 赞同：0
> 
> 时间：2013-03-15T15:26:28.837
> 
> 标签：java, maven, maven-3, maven-plugin

我尝试开发一个带有资源过滤的 Maven 插件。在我的代码中，我有这个：

```
Resource file = new Resource();
file.setDirectory(buildDir.getAbsolutePath());
file.addInclude("appcfg.xml");
List<Resource>  listResources = new ArrayList<Resource>();
listResources.add(f);

MavenResourcesExecution mavenResourcesExecution =
         new MavenResourcesExecution ( listeResource, outputDir, project,
                                              encoding, buildFilters,
                                              Collections.<String>emptyList(), mavenSession );

mavenResourcesExecution.setUseDefaultFilterWrappers(true);
mavenResourcesExecution.setInjectProjectBuildFilters(true);

mavenResourcesFiltering.filterResources( mavenResourcesExecution ); 
```

当我启动我的 mojo 时，appcfg.xml 文件被复制到输出目录中，但属性不会被值替换。

我的 appcfg.xml 是这样的：

```
< test name="${project.groupId}__${project.artifactId}__TU" / > 
```

你能帮我找出我的错误在哪里吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:39:52.150

感谢 khmarbaise，file.setFiltering(true) 解决了我的问题。我需要对此进行硬编码，因为我的插件在过滤的同一阶段生成文件

# mongodb - EC2 - MongoDB - PyMongo - 调试查询延迟

> ID：15436133
> 
> 赞同：1
> 
> 时间：2013-03-15T15:26:32.260
> 
> 标签：mongodb, amazon-ec2, pymongo

我有 2 个 EC2 实例，一个作为 mongodb 服务器，另一个是 python Web 应用程序（相同的可用区）。python 服务器使用 PyMongo 连接到 mongo 服务器，一切正常。

问题是，当我在 python 中分析执行时间时，在某些调用（少于 5%）中，它甚至需要几秒钟才能返回。我能够缩小问题范围，并且时间延迟实际上是在对 mongo 服务器的 db 调用上。

我认为的两个原因是，1\. Mongo 服务器速度慢/过载 2\. 网络延迟

所以，我尝试将 mongo 服务器升级到快 4 倍的实例，但问题仍然存在（有些调用甚至需要 3 秒才能返回）我认为由于两台服务器都在 EC2 上，网络延迟应该不是问题......但可能是我错了。

我如何确认问题是否实际上是网络本身？如果是这样，解决它的最佳方法是什么？还有其他可能的原因吗？

任何帮助表示赞赏...

谢谢，

UPATE：我获取的实体非常小（索引），通常调用只需 0.01-0.02 秒即可完成。

更新：

正如“James Wahlin”所建议的，我在我的 mongo 服务器上启用了分析并得到了一些有趣的日志，

> Fri Mar 15 18:05:22 [conn88635] query db.UserInfoShared query: { $or: [ { _locked: { $exists: false } }, { _locked: { $lte: 1363370603.297361 } } ], _id: "750837091142" } nto return:1 nscanned:1 nreturned:1 reslen:47 2614ms
> 
> Fri Mar 15 18:05:22 [conn88635] command db.$cmd command: { findAndModify: "UserInfoShared", fields: { _id: 1 }, upsert: true, query: { $or: [ { _locked: { $exists ：假}}，{_locked：{$ lte：1363370603.297361}}]，_id：“750837091142”}，更新：{$set：{_locked：1363370623.297361}}，新：真}ntoreturn：1 reslen：153 2614ms

您可以看到这两个调用用了 2 秒多的时间才完成。该字段`_id`是唯一索引的，查找它不应该花费这么多时间。可能我必须为此发布一个新问题，但是 mongodb GLOBAL LOCK 可以是原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:28:14.837

@James Wahlin，非常感谢您帮助我。

事实证明，延迟的主要原因是 mongodb`GLOBAL LOCK`本身。我们的锁定百分比平均为 5%，有时会达到 30-50% 的峰值，这会导致查询缓慢。

如果您遇到此问题，您必须做的第一件事是启用 mongodb MMS 服务 ( `mms.10gen.com`)，这将使您深入了解数据库服务器中到底发生了什么。

在我们的案例中，LOCK PERCENTAGE 非常高，原因有很多。你要做的第一件事是阅读关于并发的 mongodb 文档， [http://docs.mongodb.org/manual/faq/concurrency/](http://docs.mongodb.org/manual/faq/concurrency/)

锁的原因可能在应用程序级别，mongodb 或硬件。

1）我们的应用程序做了很多，`updates`每次更新（超过`100 ops/sec`）`global lock`在 mongodb 中都有一个。问题是，当一个不在内存中的条目发生更新时，mongo 必须先将数据加载到内存中，然后更新（在内存中），整个过程发生在`global lock`. 如果说整个事情需要 1 秒才能完成（`0.75sec`从磁盘加载数据并`0.25sec`在内存中更新），那么整个其余的更新调用都会等待（对于整个`1 sec`）并且这样的更新开始排队......你会注意到越来越多的应用程序服务器中的请求变慢。

它的解决方案（虽然听起来可能很傻）是`query`在制作`update`. 它的有效作用是将“加载数据到内存”（0.75 秒）部分移出，`global lock`这大大减少了您的`lock percentage`

2）全局锁的另一个主要原因是mongodb的数据`flush`到磁盘。基本上每 60 秒（或更少）mongodb（或操作系统）将数据写入磁盘，并`global lock`在此过程中保存 a。（这有点解释了随机慢查询）。在您的 MMS 统计信息中，请参阅图表`background flush avg`……如果它很高，则意味着您必须获得更快的磁盘。

在我们的案例中，我们迁移到一个新`EBS optimized`实例，`EC2`并将我们的配置`IOPS`从几乎减半`100`，服务器现在更加快乐。`500``background flush avg`

# sharepoint - 在 SharePoint 2010 中调试功能激活

> ID：15436134
> 
> 赞同：0
> 
> 时间：2013-03-15T15:26:33.203
> 
> 标签：sharepoint

我使用 sharepoint 2010+ VS 2010 中的功能接收器类创建了一个简单的功能。但我无法调试激活和停用方法。这些是我正在遵循的以下步骤：

1.  将接收器类添加到功能。
2.  将活动部署配置更新为 :No Activation
3.  在调试模式下构建解决方案。
4.  将程序集从 BIN 拖放到 GAC 文件夹。
5.  部署解决方案。
6.  IIS重置
7.  调试器>>附加到进程>>w3wp 8.激活功能

解决方案进入调试模式，但即使功能成功触发，调试器也没有在调试点停止。请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:07:43.743

如果您遇到上述问题，请记住您可以随时写入事件日志。

通常，您正在调试，因为您对特定的代码区域持谨慎态度。有时我将它们放入我的代码中，以便我可以通过代码跟踪值是什么，并将信息事件写入应用程序日志。

[用于调试与发布的 C# if/then 指令](https://stackoverflow.com/questions/2104099/c-sharp-if-then-directives-for-debug-vs-release)

当您切换代码以释放时，上面的代码将被跳过并且无关紧要。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T13:43:39.027

确保在特征模板.xml 文件中明确指定了特征接收器的类名和程序集，接收器代码在此处启动的方式是模板的示例：

```
<?xml version="1.0" encoding="utf-8" ?>
<Feature xmlns="http://schemas.microsoft.com/sharepoint/"
         Scope="Web"
         Id="guid"
         ReceiverAssembly="FullAssemblyName"
         ReceiverClass="FullClassName">
</Feature> 
```

hth

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T14:54:24.463

你错过了一个微小但重要的步骤。特别是如果您是要部署到的 SharePoint 场的唯一用户。

7.  重新加载 SharePoint 页面。

原因是在 IIS 重置后，您已经终止了 SharePoint IIS 进程。您需要再次加载它才能正确地将 Visual Studio 附加到它。

# php - 如何将 javascript 数据复制到 PHP 变量中？或者最好的方法是什么？

> ID：15436136
> 
> 赞同：-1
> 
> 时间：2013-03-15T15:26:38.870
> 
> 标签：php, javascript, codeigniter

我有一个 HTML 表单，其中显示学生列表以及 id、用户名等。我需要添加单击该表单中的链接以删除单个学生的功能。在使用 MVC codeIgniter 框架时如何在 PHP 中执行此操作？

我在下面的表单视图中发布了代码，但基本上我正在做的是使用 PHP foreach 循环来遍历我在数据库中的学生列表，在这个循环中，我正在为每个学生创建一个链接显示“删除”，如果单击该按钮，则会将该学生从他/她的班级中删除。

在每个链接中，我都有一个 onclick 方法，该方法将调用包含在我的学生模型类中的 PHP 函数，该函数将实际删除学生。我在这样做时遇到的问题是，由于某种原因，每当页面最初加载时，正在显示的每个学生都会自动被删除。所以我的问题是我如何才能做到这一点，只有被点击的学生被删除，而不是像现在这样删除每个学生。

为了参考我的 MVC 类，我有 user_index.php，这是这个视图表单代码，user_data_model.php 这是我的模型类，然后是 user_controller.php，这是我的学生控制器类。

这是我的视图代码（user_index.php）：

```
<?php foreach ($userList as $user_item): ?>
...

<td>
<a href="" onclick="<?php $user_data_model->remove($user_item['user_name']); ?>">Remove</a>
</td>
<?php endforeach ?> 
```

还有我的模型函数（user_data_model.php）：

```
// remove a student
public function remove($username)
{
    $this->db->where('student_user_name', $username);
    $this->db->update('Student_table', array('student_password' => md5('inactive')));
} 
```

从我的模型代码中可以看出，我只是将学生的密码更改为字符串“inactive”的加密版本，因此我实际上并没有出于测试目的而删除学生。

对此的任何帮助都非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:32:41.617

如果我正确理解这一点，您需要在单击链接时从 HTML 中删除学生记录。如果是这样，那么解决它的方法很少：

**1.**无需重定向到页面并停留在同一页面上，您需要使用 AJAX，获取该用户的数据，例如**ID**，并使用 PHP 脚本执行 AJAX，这将从数据库中删除记录。看起来像这样：

```
$(document).on('click', '.your_link', function() {
   var studentRow = $(this).find('student_row_element');
   var studentIDFromElement = $(this).attr('studentid');
   $.ajax({
      url: '/PATH_TO_YOUR_PHP_SCRIPT',
      data: { studentID : studentIDFromElement, ... },
      success: function(result) {
        if (result) { studentRow.fadeOut(500); }
      }
   });
}); 
```

**2.**另一种方法是在单击链接时将表单提交到您的 php 脚本，从 DB 中删除学生，然后重定向回页面。

# extjs - 如何使用 Ext JS 从元素中删除可拖动性？

> ID：15436137
> 
> 赞同：3
> 
> 时间：2013-03-15T15:26:40.330
> 
> 标签：extjs

我有一个`div`我想让它是否可拖动，这取决于我页面上其他一些东西的状态。我似乎能够轻松地使其可拖动，但我似乎无法弄清楚如何最好地从`div`.

我通过以下方式使其可拖动：

```
var dd = Ext.create('Ext.dd.DDProxy', mydiv, 'myDDGroup', { isTarget: false }); 
```

然后我尝试通过删除它所属的唯一组来删除可拖动性

```
dd.removeFromGroup('myDDGroup'); 
```

并且只是`dd`用

```
delete dd; 
```

这些似乎都没有真正阻止我开始拖累元素。我怀疑我应该能够以`b4Drag`某种方式使用覆盖来简单地`div`在它开始之前取消我的拖动，而不是切换的可拖动状态`div`，但我似乎找不到关于如何取消的文档`b4Drag`通话期间的拖动。

那么，`div`在我已经使其可拖动之后，我怎样才能使其不可拖动呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-03T08:44:49.703

似乎为我工作。

这是[JSFiddle http://jsfiddle.net/01gx33h0/](http://jsfiddle.net/01gx33h0)

```
var dd = Ext.create('Ext.dd.DDProxy', 'test123', 'myDDGroup', { isTarget: false });
Ext.fly('btn123').on('click', function() {
  dd.removeFromGroup('myDDGroup');
}); 
```

你能给我它不工作的示例代码吗？什么版本的 ExtJs 正在使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-08T09:42:22.517

你必须取消注册。不是 removeFromGroup。它只是从组中删除。但是该元素上的事件不会被删除。

```
dd.unreg(); 
```

[https://fiddle.sencha.com/#fiddle/1eun](https://fiddle.sencha.com/#fiddle/1eun)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-06T16:21:19.380

在查看需要拖动的特定内容时，您可能会认为允许拖动是用户所期望的，为了一般易用性，您可以尝试使用`ondragstart="return`，这可以附加到您的图像或链接中，如下所示：

`<a ondragstart="return false" href="#link">link</a>`.

# ios - 本地化字符串比较

> ID：15436143
> 
> 赞同：7
> 
> 时间：2013-03-15T15:27:08.267
> 
> 标签：ios, objective-c, cocoa-touch, cocoa, nsstring

`NSString`'s`localizedCaseInsensitiveCompare:`和`localizedStandardCompare:`methods和有什么不一样？

我阅读了参考资料，但没有正确了解该使用哪一个。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T15:46:49.537

`localizedCaseInsensitiveCompare:`相当于：

```
[aString compare:otherString
         options:NSCaseInsensitiveSearch
         range:NSMakeRange(0,aString.length)
        locale:[NSLocale currentLocale]]; 
```

`localizedStandardCompare:`基本上相当于：

```
[aString compare:otherString
         options:NSCaseInsensitiveSearch | NSNumericSearch
         range:NSMakeRange(0,aString.length)
        locale:[NSLocale currentLocale]]; 
```

因此，主要区别在于如何比较字符串中的数字。

比较以下 3 个字符串 using`localizedCaseInsensitiveCompare:`将导致以下顺序：

```
"Foo2.txt",
"Foo25.txt",
"Foo7.txt" 
```

另一方面，比较它们使用`localizedStandardCompare:`将导致以下顺序：

```
"Foo2.txt",
"Foo7.txt",
"Foo25.txt" 
```

虽然该`localizedCaseInsensitiveCompare:`方法一直存在，但`localizedStandardCompare:`最近才添加（OS X 10.6）。Finder 使用数字方法对文件名进行排序，在添加 之前`localizedStandardCompare:`，开发人员没有一种简单的方法来确保他们可以像 Finder 那样对字符串进行排序。

在确定使用哪一个时，如果您要比较的字符串代表文件名，那么您绝对应该倾向于使用`localizedStandardCompare:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:38:15.867

后者类似于 OS X 上的 Finder。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:46:13.427

`localizedCaseInsensitiveCompare:`类似于`localizedCompare:`

它们都返回一个`NSComparisonResult`值，该值指示接收器的词法顺序和另一个使用本地化比较的给定字符串。

区别在于前者是`case insensitive`。即它在比较字符串时忽略了大写和小写字母的不同用法。

`localizedStandardCompare` 这将比较由 Finder 应用程序排序的字符串。

# asp.net-mvc - When extending HtmlHelper can't get intellisense to work without a using statment

> ID：15436145
> 
> 赞同：0
> 
> 时间：2013-03-15T15:27:11.093
> 
> 标签：asp.net-mvc, razor-declarative-helpers

I have extended HtmlHelper, then when trying to use it in partial view it doesn't show in intellisense, I have added the namespace to the web.config. the only way to get it to work was to add a using statement to the partial view. Am I missing something? I would prefer not to add using statements to every view using it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:36:59.443

Ensure that you are editing the config file in your Views directory.

```
<system.web.webPages.razor>
  <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <pages pageBaseType="System.Web.Mvc.WebViewPage">
    <namespaces>
      <add namespace="System.Web.Mvc" />
      <add namespace="System.Web.Mvc.Ajax" />
      <add namespace="System.Web.Mvc.Html" />
      <add namespace="System.Web.Routing" />
      <add namespace="Your.Namespace.Goes.Here" />
    </namespaces>
  </pages>
</system.web.webPages.razor> 
```

Also, sometimes you might need to close and reopen the .cshtml file or even restart Visual Studio.

# mysql - 计算一个人的连续出现次数 - SQL

> ID：15436148
> 
> 赞同：3
> 
> 时间：2013-03-15T15:27:20.110
> 
> 标签：mysql, sql, sas, cumulative-sum

我有一张像这样的桌子：

```
Name | ID | Event
Smith| 1  | 
Smith| 2  | Y
Smith| 3  | 
Jones| 1  | 
Jones| 2  | Y
Jones| 3  | 
Jones| 4  | Y 
```

我想计算每个人在每个点上看到事件的次数，例如：

```
Name | ID | Event | Event Count
Smith| 1  |       | 0
Smith| 2  | Y     | 1
Smith| 3  |       | 1
Jones| 1  |       | 0
Jones| 2  | Y     | 1
Jones| 3  |       | 1
Jones| 4  | Y     | 2 
```

我猜我不能在 SQL 中做到这一点？如果没有，您能否非常清楚我如何在 SAS 中执行此操作（或任何合适的方式），因为我是新手！

（仅供参考，这使我能够区分每个事件之前或之后发生的行 - 即按 Event = 空白过滤，在第一个事件之前发生任何 0，之后发生任何 1，等等。可能有一种更简单的方法来做这个。）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:43:46.757

如果你想走SAS路线，它会顺序读取数据，所以非常擅长这类问题

```
data have;
infile datalines missover;
input Name $ ID  Event $;
datalines;
Smith 1   
Smith 2   Y
Smith 3   
Jones 1   
Jones 2   Y
Jones 3   
Jones 4   Y
;
run;

proc sort data=have;
by name id;
run;

data want;
set have;
by name id;
if first.name then event_count=0;
event_count+(event='Y');
run; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T15:32:04.363

您可能会在查询中执行以下操作：

```
select Name, ID, Event,
    (
        select count(*)
        from MyTable
        where Name = t.Name
            and Event = 'Y'
            and ID <= t.ID
    ) as EventCount
from MyTable t 
```

相关子查询会为您找到此计数，尽管这有点像[三角连接](http://www.sqlservercentral.com/articles/T-SQL/61539/)（SQL Server 链接，但仍然适用），因此性能并不出色。

这是显示结果的[SQL Fiddle](http://www.sqlfiddle.com/#!2/c960ad/1)。

请注意，这几乎适用于任何 RDBMS。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T15:37:55.930

```
SELECT Name, ID, Event, grpTotal
FROM
  (
    select  Name,
            ID,
            Event,
            @sum := if(@grp = Name,@sum,0) + if(`Event` = 'Y',1,0) as grpTotal,
            @grp := Name
    from    TableName,
            (select @grp := '', @sum := 0) vars
    order   by  Name, ID
  ) s 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/61ccf/13)

# android - Android 布局中的图像上的文本，如 Facebook 中的消息按钮

> ID：15436150
> 
> 赞同：0
> 
> 时间：2013-03-15T15:27:25.497
> 
> 标签：android, android-layout

我想`Button`在 Android`Activity`中发出与 Facebook 中的通知按钮相同的通知。我尝试过`ImageButton`这样`Button`做，但未能显示在同一图层中绘制在图像上的文本。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:45:30.933

如果我的问题是正确的，并且您需要包含通知计数的红色圆圈，则可以创建一个可绘制对象并将其用作 TextView 的背景

这是一个示例圆边矩形

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
    <shape>
        <padding android:left="1dp"
        android:top="1dp"
        android:right="1dp"
        android:bottom="1dp"/>
        <solid android:color="#FFFFFF"/>
        <corners android:radius="3dp"/>
    </shape>
    </item>

    <item>
    <shape>
        <corners android:radius="3dp"/>
        <solid android:color="#F00"/>
    </shape>
    </item>
</layer-list> 
```

那么你所需要的就是将它用作 TextView 的背景

**编辑**：使用 FrameLayout 使通知出现在 ImageView 上

```
 <FrameLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <ImageView
                    android:id="@+id/imageView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/image" />

                <TextView
                    android:id="@+id/notification"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="bottom|right"
                    android:background="@drawable/red_notification_frame"
                    android:gravity="center"
                    android:minWidth="15dp"
                    android:paddingLeft="1dp"
                    android:paddingRight="1dp"
                    android:textColor="#fff"
                    android:textStyle="bold" />
            </FrameLayout> 
```

并更改 TextView 的 layout_gravity 以控制其在图像上的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:49:25.823

如果您希望在图像上显示永久文本，则一种快捷方式是使用图像编辑软件并将文本写入图像上。然后使用 ImageButton 并放置 Image。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T12:22:29.663

我修改了一个答案并想出了一个解决方案

```
<RelativeLayout
    android:layout_height="102dp"
    android:layout_width="102dp"
   android:padding="15dp">
    <ImageView
    android:id="@+id/myImageView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/envelope" />

            <TextView
                android:id="@+id/myImageViewText"
                android:layout_width="1dp"
                android:layout_height="12dp"
                android:layout_alignLeft="@+id/myImageView"
                android:layout_alignTop="@+id/myImageView"
                android:layout_alignRight="@+id/myImageView"
                android:layout_alignBottom="@+id/myImageView"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:layout_marginTop="43dp"
                android:layout_marginLeft="43dp"
                android:gravity="center"
                android:text="0"
                android:background="@drawable/rounded_corners"
                android:textColor="@android:color/white" />
        </RelativeLayout> 
```

xml样式，放到drawable中

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" >
 <stroke
android:width="1dp"
android:color="@android:color/holo_red_dark" />
<solid android:color="@android:color/holo_red_light" />
<padding
android:left="1dp"
android:right="1dp"
android:top="1dp" />
<corners android:radius="20dp" />
</shape> 
```

在我的情况下，当文本超出三个字符时，我说 9+

# sharepoint-2013 - SharePoint 2013 无法编辑内容编辑器代码段

> ID：15436151
> 
> 赞同：0
> 
> 时间：2013-03-15T15:27:27.777
> 
> 标签：sharepoint-2013, web-parts, code-snippets, content-editor

在 SharePoint 2013 中，可以使用新的设计管理器创建母版页和页面布局。将 HTML 文件转换为母版页后，或创建新的页面布局后，可以使用代码段管理器添加 SharePoint 功能。我使用这种方法将静态 HTML/CSS 文件转换为带有随附页面布局的 SharePoint 母版页。我可以使用片段管理器中的所有片段，“内容编辑器”片段除外。我能够添加顶部导航、快速启动栏、页面属性甚至“Web 部件区”片段。

**用例：**
我想要一个可编辑的页脚。页脚由四个部分组成，因此我通过将片段代码粘贴到 HTML 母版页中添加了四个内容编辑器片段。生成片段时，可以设置自定义属性。我注意到无法在此处设置 WebPartID。在代码段中，始终使用以下 WebPartID：00000000-0000-0000-0000-000000000000。然而，“Web 部件区域”片段将生成（随机？） WebPartID（并且有效）。

**问题：**
添加片段工作正常，但是当我发布母版页或页面布局时，无法编辑 CEWP。当我编辑使用母版页或页面布局的页面时，CEWP 应该转换为可编辑区域，但事实并非如此。没有显示错误。Web 部件正确呈现自身。

**我尝试了什么：**
我尝试填写一个随机的 WebPartID，但这不起作用。在 Google 和 StackOverflow 上搜索并没有给我任何线索，我找不到任何面临同样问题的人。

**代码：**
生成以下代码段：

```
<!--CS: Start Content Editor Snippet--><!--SPM:<%@Register Tagprefix="WebPartPages" Namespace="Microsoft.SharePoint.WebPartPages" Assembly="Microsoft.SharePoint, Version=15.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c"%>--><!--MS:<WebPartPages:ContentEditorWebPart xmlns:WebPartPages="namespace" runat="server" webpart="true">--><!--PS: Start of READ-ONLY PREVIEW (do not modify)--><div class="ms-webpart-chrome ms-webpart-chrome-fullWidth "><div WebPartID="00000000-0000-0000-0000-000000000000" HasPers="true" id="WebPart" width="100%" class="ms-WPBody noindex " OnlyForMePart="true" allowMinimize="false" allowRemove="false" allowDelete="false" style=""><div class="ms-rtestate-field"></div><div class="ms-clear"></div></div></div><!--PE: End of READ-ONLY PREVIEW--><!--MS:<WebPart xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/WebPart/v2">--><!--MS:<Title>--><!--SPM:$Resources:core,ContentEditorWebPartTitle;--><!--ME:</Title>--><!--MS:<FrameType>--><!--SPM:None--><!--ME:</FrameType>--><!--MS:<Description>--><!--SPM:$Resources:core,ContentEditorWebPartDescription;--><!--ME:</Description>--><!--MS:<IsIncluded>--><!--SPM:true--><!--ME:</IsIncluded>--><!--MS:<ZoneID>--><!--SPM:ImportedPartZone--><!--ME:</ZoneID>--><!--MS:<PartOrder>--><!--SPM:0--><!--ME:</PartOrder>--><!--MS:<FrameState>--><!--SPM:Normal--><!--ME:</FrameState>--><!--MS:<Height>--><!--ME:</Height>--><!--MS:<Width>--><!--ME:</Width>--><!--MS:<AllowRemove>--><!--SPM:false--><!--ME:</AllowRemove>--><!--MS:<AllowZoneChange>--><!--SPM:false--><!--ME:</AllowZoneChange>--><!--MS:<AllowMinimize>--><!--SPM:false--><!--ME:</AllowMinimize>--><!--MS:<AllowConnect>--><!--SPM:true--><!--ME:</AllowConnect>--><!--MS:<AllowEdit>--><!--SPM:true--><!--ME:</AllowEdit>--><!--MS:<AllowHide>--><!--SPM:false--><!--ME:</AllowHide>--><!--MS:<IsVisible>--><!--SPM:true--><!--ME:</IsVisible>--><!--MS:<DetailLink>--><!--ME:</DetailLink>--><!--MS:<HelpLink>--><!--ME:</HelpLink>--><!--MS:<HelpMode>--><!--SPM:Modeless--><!--ME:</HelpMode>--><!--MS:<Dir>--><!--SPM:Default--><!--ME:</Dir>--><!--MS:<PartImageSmall>--><!--ME:</PartImageSmall>--><!--MS:<MissingAssembly>--><!--SPM:Cannot import this Web Part.--><!--ME:</MissingAssembly>--><!--MS:<PartImageLarge>--><!--SPM:/_layouts/15/images/mscontl.gif--><!--ME:</PartImageLarge>--><!--MS:<IsIncludedFilter>--><!--ME:</IsIncludedFilter>--><!--MS:<ExportControlledProperties>--><!--SPM:true--><!--ME:</ExportControlledProperties>--><!--MS:<ConnectionID>--><!--SPM:00000000-0000-0000-0000-000000000000--><!--ME:</ConnectionID>--><!--MS:<ID>--><!--SPM:g_2bfa6a66_54d1_45e6_84e7_ebbb461f2911--><!--ME:</ID>--><!--MS:<ContentLink xmlns="http://schemas.microsoft.com/WebPart/v2/ContentEditor">--><!--ME:</ContentLink>--><!--MS:<Content xmlns="http://schemas.microsoft.com/WebPart/v2/ContentEditor">--><!--ME:</Content>--><!--MS:<PartStorage xmlns="http://schemas.microsoft.com/WebPart/v2/ContentEditor">--><!--ME:</PartStorage>--><!--MS:<ID>--><!--SPM:g_a4deccb6_9661_415d_99c8_51f528cf7428--><!--ME:</ID>--><!--ME:</WebPart>--><!--ME:</WebPartPages:ContentEditorWebPart>--><!--CE: End Content Editor Snippet--> 
```

这会在 .master 文件中生成以下代码：

```
<WebPartPages:ContentEditorWebPart runat="server" webpart="true" __WebPartId="{B2063517-7C26-4084-AA28-36434C760CDB}"><WebPart xmlns="http://schemas.microsoft.com/WebPart/v2"><Title>$Resources:core,ContentEditorWebPartTitle;</Title><FrameType>None</FrameType><Description>$Resources:core,ContentEditorWebPartDescription;</Description><IsIncluded>true</IsIncluded><PartOrder>0</PartOrder><FrameState>Normal</FrameState><Height /><Width /><AllowRemove>false</AllowRemove><AllowZoneChange>false</AllowZoneChange><AllowMinimize>false</AllowMinimize><AllowConnect>true</AllowConnect><AllowEdit>true</AllowEdit><AllowHide>false</AllowHide><IsVisible>true</IsVisible><DetailLink /><HelpLink /><HelpMode>Modeless</HelpMode><Dir>Default</Dir><PartImageSmall /><MissingAssembly>Cannot import this Web Part.</MissingAssembly><PartImageLarge>/_layouts/15/images/mscontl.gif</PartImageLarge><IsIncludedFilter /><ExportControlledProperties>true</ExportControlledProperties><ConnectionID>00000000-0000-0000-0000-000000000000</ConnectionID><ID>g_2bfa6a66_54d1_45e6_84e7_ebbb461f2911</ID><ContentLink xmlns="http://schemas.microsoft.com/WebPart/v2/ContentEditor" />
<Content xmlns="http://schemas.microsoft.com/WebPart/v2/ContentEditor"><![CDATA[]]></Content>
<PartStorage xmlns="http://schemas.microsoft.com/WebPart/v2/ContentEditor" /><ID>g_a4deccb6_9661_415d_99c8_51f528cf7428</ID></WebPart></WebPartPages:ContentEditorWebPart> 
```

**更多信息**：
我将片段粘贴到 HTML 文件中，如图所示。当我添加 Web 部件区域片段时，我可以在其中添加有效的“内容编辑器”WebPart。“Web 部件区”片段仅在页面布局片段管理器中可用，因此我不能将其用作使母版页中的页脚工作的解决方法。

**我的问题：**

1.  如何通过 Snippet Manager 添加内容编辑器 WebPart？
2.  还有其他人面临同样的问题吗？
3.  保留 WebPartID 00000000-0000-0000-0000-000000000000 可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T16:04:54.873

在这方面与 SharePoint 进行了一些斗争，这就是我发现的：

片段管理器创建的片段有两种不同的工作方式。如果将它们放在母版页或页面布局的 html 代码中的任何位置，它们将具有与您在代码段编辑器中选择的完全相同的配置，之后您将无法对其进行编辑。

但是，如果您将它们放在 Webpart Container Snippet 代码中，您将能够在访问 SharePoint 上的“编辑页面”功能时编辑 Web 部件。您可能已经知道，这仅适用于页面布局，而不适用于母版页。

我相信拥有动态页脚的一种方法是使用 Content By Search Web 部件并将其指向特定列表（页脚列表），在该列表中，您可以拥有一个富文本编辑器类型的列，然后您可以创建一个特定的显示模板，它将根据需要呈现列表内容。

希望它有一些意义。

# c# - 将 Author 类存储在 AVL 树中

> ID：15436152
> 
> 赞同：-2
> 
> 时间：2013-03-15T15:27:29.707
> 
> 标签：c#, database, avl-tree

我正在创建一个软件产品，它是一个包含作者详细信息的 AVLTree。Author 类包含：姓名、出版年份和图书列表（使用 LinkedList<> 集合）。Author 对象将存储在 AVLTree 中，名称作为比较键。

我的问题是我似乎无法将 Author 类正确存储在 AVLTree 中。

我感谢任何建议和帮助。

我创建了 Author 数组，并创建了一个 AVLTree：

```
public Author[] author = new Author[i];

public AVLTree<Author> authorAVL = new AVLTree<Author>(); 
```

“添加作者”按钮的代码如下：

```
 author[i].Name = textBoxAddAuthor.Text;
        author[i].YrOfPub = textBoxYrOfPub.Text;
        author[i] = new Author(author[i].Name, author[i].YrOfPub);
        Array.Sort(author);

        authorAVL.InsertItem(artist[i]); 
```

我在 Author 类中实现了 CompareTo，如下所示：

```
public int CompareTo(object obj)
    {
        if (obj is Author) //compare by name
        {
            Author other = (Author)obj;
            return name.CompareTo(other.name);
        } 
```

AVLTree 中的 InsertItem 方法如下所示：

```
public void InsertItem(T item)
    {
        insertItem(item, ref root);
    }

    private void insertItem(T item, ref Node<T> tree)
    {
        if (tree == null)
            tree = new Node<T>(item);
        else if (item.CompareTo(tree.Data) < 0)
            insertItem(item, ref tree.Left);
        else if (item.CompareTo(tree.Data) > 0)
            insertItem(item, ref tree.Right);
        tree.BalanceFactor = (height(tree.Left) - height(tree.Right));
        if (tree.BalanceFactor <= -2)
            rotateLeft(ref tree);
        if (tree.BalanceFactor >= 2)
            rotateRight(ref tree);

    } 
```

节点类包括：

```
public class Node<T> where T : IComparable
{
    private T data;
    public Node<T> Left, Right;
    private int balanceFactor = 0;

    public Node(T item)
    {
        data = item;
        Left = null;
        Right = null;
    }
    public T Data
    {
        set { data = value; }
        get { return data; }

    }

    public int BalanceFactor
    {
        set { balanceFactor = value; }
        get { return balanceFactor; }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:30:13.067

在我看来问题出在这里：

```
author[i].Name = textBoxAddAuthor.Text;
author[i].YrOfPub = textBoxYrOfPub.Text;
author[i] = new Author("Name", "yearofpublish"); 
```

特别是操作顺序不对。您正在尝试设置 .. 的属性，`author[i]`然后用`Author`.. 的新实例覆盖它没有任何意义。

它应该是：

```
author[i] = new Author(textBoxAddAuthor.Text, textBoxYrOfPub.Text); 
```

我对代码中的其他三件事也有点困惑：

1.  如果您首先将它们放在树中，为什么还要有一个包含 Authors 的数组？
2.  为什么要像这样初始化 autors 数组：`public Author[] author = new Author[i];`. 从哪里来`i`？
3.  为什么每次要插入树时都要对数组进行排序？树是自平衡的。。

`i`然后你在插入树之前重新使用初始化/设置作者..？！

对我来说，以下块：

```
// where does this i come from here?
author[i].Name = textBoxAddAuthor.Text;                       // this is useless..
author[i].YrOfPub = textBoxYrOfPub.Text;                      // this is useless..
author[i] = new Author(author[i].Name, author[i].YrOfPub);    // overwriting author[i] here
Array.Sort(author);            // why are you sorting the array each time you insert?
authorAVL.InsertItem(artist[i]); 
```

应改写为：

```
Author newAuthor = new Author(textBoxAddAuthor.Text, textBoxYrOfPub.Text);
authorAVL.InsertItem(newAuthor); 
```

# java - Junit前置条件和测试数据

> ID：15436156
> 
> 赞同：0
> 
> 时间：2013-03-15T15:27:38.740
> 
> 标签：java, unit-testing, preconditions

我有一个 Java 任务来创建一个地址簿，然后对其进行测试和评估。我创建了它并创建了一些junit测试。在作业的可交付成果部分，它说要在一个表格中列出整个程序的所有测试用例以及：

*   唯一的标识
*   测试说明
*   运行测试的前提条件
*   测试数据
*   预期结果

有人可以告诉我以下测试的前提条件和测试数据是什么意思：

```
public void testGetName() 
{
    Entry entry1 = new Entry("Alison Murray", "34 Station Rd", "Workington", "CA14 4TG");
    assertEquals("Alison Murray",entry1.getName());    } 
```

尝试给导师发电子邮件（我是一个遥远的学习者），但它需要很长时间才能得到回复。前提条件是 entry1 需要填充吗？测试数据：“艾莉森·默里”？感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:52:50.343

JUnit 有两种类型的检查：

*   断言 ( `org.junit.Assert.*`);
*   假设（`org.junit.Assume.*`）。

断言通常用于检查您的测试结果。如果结果不是预期的，则测试失败。

假设用于检查测试数据是否有效（如果它们与测试用例匹配）。如果他们不这样做，则取消测试（没有任何错误）。

当我阅读您的代码示例时：没有先决条件，测试数据将是`entry1`.

# gridview - 在 GridView 中滚动：ItemPanelTemplate

> ID：15436158
> 
> 赞同：0
> 
> 时间：2013-03-15T15:27:41.167
> 
> 标签：gridview, panel, winrt-xaml

我的[GridView](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.gridview)有问题，在 Windows Store App 项目中。WinRT 中没有 WrapPanel，所以我使用在[这里](http://www.codeproject.com/Articles/24141/WrapPanel-for-Silverlight-2-0)找到的自定义面板。但是当我在 GridView 中将此自定义面板用作 ItemsPanelTemplate 时，GridView 的水平滚动不再起作用。如果 ItemsPanelTemplate 是 StackPanel，则滚动正常。

自定义面板是否应该实现一个接口以获得更好的行为，例如[IScrollSnapPointsInfo](http://msdn.microsoft.com/fr-FR/library/windows/apps/windows.ui.xaml.controls.primitives.iscrollsnappointsinfo)？我试过了，但我真的不知道它是如何工作的。

**网格视图**

```
<GridView x:Name="FullGrid"  Grid.Row="1"
    ItemsSource="{Binding Path=ContactSource.View}"
    SelectionMode="Multiple"
    IsSwipeEnabled="true"
    IsItemClickEnabled="True"
    Padding="116,10,40,10"
    ItemTemplate="{StaticResource contactTemplate}"
    SelectionChanged="SelectionChanged"
    ItemClick="NavigateToContact">

    <GridView.ItemsPanel>
        <ItemsPanelTemplate>
            <local:WrapPanel Orientation="Vertical"/>
        </ItemsPanelTemplate>
    </GridView.ItemsPanel>
    <GridView.GroupStyle>
        <GroupStyle HeaderTemplate="{StaticResource letterTemplate}">
            <GroupStyle.Panel>
                <ItemsPanelTemplate>
                    <VariableSizedWrapGrid Orientation="Vertical" Margin="0,0,80,0"/>
                </ItemsPanelTemplate>
            </GroupStyle.Panel>
        </GroupStyle>
        </GridView.GroupStyle>
</GridView> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:21:13.840

[使用此自定义面板](https://github.com/Q42/Q42.WinRT/blob/master/Q42.WinRT/Controls/WrapPanel.cs)解决了问题。

# haskell - 带有数据定义的haskell中的语法问题

> ID：15436163
> 
> 赞同：1
> 
> 时间：2013-03-15T15:28:05.057
> 
> 标签：haskell, grammar, parsec

我正在尝试使用 parsec 库在 haskell 中实现语法，但我遇到了预期的问题。语法中定义的实际类型，我知道我的问题的答案无疑是简单/显而易见的，但可惜有些东西我不明白......

以下是数据声明的摘录（应该足以诊断）：

```
data Expr1 = SeqOfExpr1 [Expr1]
            | Lambda Expr8 Expr1
            | List Expr2 Expr1
            | If Expr2 Expr1 Expr1
            | Expr2
              deriving (Show)

data Expr2 =  SeqOfExpr3 [Expr3]
              deriving (Show)

data Expr3 =  SeqOfExpr4 [Expr4]
              deriving (Show)
 ----------------------------Redundant Code Omitted------------------------------
expr1 :: Parser Expr1   
expr1 = declaration
      <|> list
      <|> ifStmt
      <|> expr2

declaration :: Parser Expr1
declaration =
    do  reservedOp "\\"
        var <- name
        reservedOp "->"
        expr <- expr1
        return $ Lambda var expr

list :: Parser Expr1    
list =
    do exprA <- expr2
       reservedOp ":"
       exprB <- expr1
       return $ List exprA exprB 
```

现在还有更多表达式的数据声明，直到 Expr8，但它们与 expr2 -> expr3 大致相同，它们之间的不同之处在于它们的分隔方式，例如 Expr3 由“||”分隔，Expr4 由“&&”等分隔。

我遇到的问题之一（如果解决了应该为我提供解决其余问题的想法）：

List 值构造函数返回一个导致冲突的 Expr1：

```
Couldn't match expected type `Expr2' with actual type `Expr1'
In the first argument of `List', namely `exprA'
In the second argument of `($)', namely `List exprA exprB'
In a stmt of a 'do' block: return $ List exprA exprB 
```

我认为这是因为我在 Expr1 中使用 Expr2 作为值声明，但我不确定如何更正语法以解决此问题。

提前感谢您的帮助！

肖恩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:00:17.620

在`data Expr1`中，您有一个空构造函数`Expr2`。我怀疑你的意思是这样的

```
data Expr1 =
           ...
           | Foo Expr2 
```

包装一个`Expr2`.

无论如何，按照

```
expr1 :: Parser Expr1   
expr1 = declaration
      <|> list
      <|> ifStmt
      <|> expr2 
```

编译器推断`expr2 :: Parser Expr1`，但是当你尝试

```
list :: Parser Expr1    
list =
    do exprA <- expr2
       reservedOp ":"
       exprB <- expr1
       return $ List exprA exprB 
```

`List`方法的类型`exprA`必须是`Expr2`，但`expr2`编译器知道 的类型`exprA :: Expr1`。

所以你可能需要换`expr2`行`list`，

```
list = ...
     <|> fmap Foo expr2 
```

如果您更改 的定义`Expr1`以包含`Foo`构造函数来包装`Expr2`.

# c++ - 静态变量的 C++ 参考

> ID：15436166
> 
> 赞同：15
> 
> 时间：2013-03-15T15:28:07.790
> 
> 标签：c++, reference, static

我只是发现这段 C++ 代码并没有给我与 clang++ 和 g++ 相同的结果：

```
#include <iostream>
#include <string>

using namespace std;

const string& createString(char c) {
    static string s;
    s="";
    for(int i=0; i<10; ++i) {
    s+=c;
    }
    return s;
}

int main() {
    cout << createString('a') << ' ' << createString('z') << endl;
    return 0;
} 
```

使用 clang++ 它写道：

> 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊

就像我想要的那样，但是使用 g++ 它写道：

> 啊啊啊啊啊啊啊啊

为什么会这样？是否符合 g++ 实现标准？如果我想让一个函数像这里一样通过引用返回一个临时的“大”类型以避免无用的复制，我该怎么办？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-15T15:30:43.407

是的，两种实现都是合规的。[未指定函数参数的评估顺序。](https://stackoverflow.com/questions/9566187/function-parameter-evaluation-order)

因此，`createString('a')`并且`createString('z')`可以按任何顺序进行评估。此外，可以在写出`createString('z')`结果之前或之后进行评估。`createString('a')`

由于该函数是有状态的，并通过引用返回状态，因此两个输出都是允许的，就像`zzzzzzzzzz zzzzzzzzzz`.

最后，值得注意的是，`static`在多线程环境中，拥有状态将是一个令人头疼的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T15:35:43.370

> 如果我想让一个函数像这里一样通过引用返回一个临时的“大”类型以避免无用的复制，我该怎么办？

不会的。RVO 和 NRVO 可以轻松解决这个问题。此外，移动语义。简而言之，`std::string`按值返回 a 根本没有问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T16:03:45.123

> 如果我想让一个函数像这里一样通过引用返回一个临时的“大”类型以避免无用的复制，我该怎么办？

每个表达式只调用一次。例如，这将正常工作：

```
std::cout << createString('a') << ' ';
std::cout << createString('z') << std::endl; 
```

# php - 用 php / preg_split 拆分链接

> ID：15436170
> 
> 赞同：0
> 
> 时间：2013-03-15T15:28:14.693
> 
> 标签：php, string

我有以下（不同）结构的链接：

[http://website.com/category/product/abc12345](http://website.com/category/product/abc12345)

category- 和 productname 的长度不同，但 id (abc12345) 总是位于最后一个“/”之后，大约 6-8 个字符长。

我尝试使用以下代码提取链接：

```
preg_split('/[/]/', $val, $arr);
$narr[] = end($arr); 
```

val 是链接，arr 是数组，结果应该被粘贴进去。narr 是我以后要保存到文件的数组，所以在这里并不重要。不幸的是，当我以这种方式尝试时，我的结果总是空的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:33:22.037

我会去：

```
$urlParts = parse_url($myUrl);
$parts = explode('/', $urlParts['path']);
$productId = array_pop($parts); 
```

这样，您就不会遇到锚点 (#content) 或查询参数 (?id=123) 的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:32:45.143

在以下条件下：

*   产品 (abc12345) 始终位于 URL 的末尾
*   没有查询字符串/参数

试试下面的正则表达式：

```
preg_match('/\/([\w]+)\/?$/', $val, $arr);
$product = $arr[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:35:16.573

我会使用`preg_match`：

```
if (preg_match('#.*/(.*)#', $val, $match)) {
    $result = $match[1];
} 
```

你也可以使用简单的东西`strrpos`和`substr`：

```
$result = substr($val, strrpos($val, '/') + 1); 
```

# c# - 实体框架 - 未映射的实体。可能的？

> ID：15436174
> 
> 赞同：3
> 
> 时间：2013-03-15T15:28:31.847
> 
> 标签：c#, entity-framework

是否可以创建未映射到数据库中表的实体？

我创建了一个具有 5 个属性（姓名、电话、电子邮件、日期、评论）的实体 (A)。我的数据库中没有名为 A 的表。

我使用 linq 查询了模型中的其他表，并将结果转换为类型 (A) 的列表

```
IList<A> results = new IList<A>();
results = (from m in B
           where m.Id < 10
           select new { m.name, m.email, m.date, m.phone, m.comment }).ToList();
return View(results) 
```

我这样做是为了防止将匿名类型传递给我的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:32:29.970

首先，由于您将某些内容分配给变量`results`，因此您不需要创建新列表。以下将起作用：

```
IList<A> results;       // No value yet. 
```

`A`然后您可以像其他情况一样实例化。

```
results = (from m in B
          where m.Id < 10
          select new A(m.name, m.email, m.date, m.phone, m.comment))
          .ToList();

return View(results) 
```

但是，您的假设在这里是错误的。您说：*我将结果转换为类型列表`A`以防止将匿名类型传递给我的视图*，但是您对匿名类型的想法是不正确的。

以下*不会*创建匿名类型。它将创建一个非常匿名的`IEnumerable<A>`or `IQueryable<A>`：

```
var results = from m in B
              select new A(); 
```

但是，以下*将*创建一个匿名类型：

```
var results = from m in B
              select new {
                  Name = m.name,
                  Email = m.email,
                  Date = m.date,
                  Phone = m.phone,
                  Comment = m.comment
              }; 
```

# php - 完善查找@username 标签的正则表达式

> ID：15436175
> 
> 赞同：5
> 
> 时间：2013-03-15T15:28:31.953
> 
> 标签：php, regex

我使用一个系统来获取@twitter 之类的名称，并且以下正则表达式接近完美：

```
(?<![^\s<>])@([^\s<>]+) 
```

我发现的问题是名称后面是否有标点符号

例如：

*   嘿 @mark ===> 匹配 @mark ***（这就是我们想要的）***
*   嘿@mark。===> 匹配@mark。
*   嘿@mark，你很好===>匹配@mark，
*   嘿@马克！！！！我没想到 ===> 匹配 @mark ！！！

显然我们只想匹配用户名而不是标点符号。需要注意的是，某些用户名在用户名中包含这些句点，例如

例如，这些都是合法的用户名

标记.markus

马克@gmail.com

mark_markus@gmail.com

*编辑* 我们正在使用后视，如果上面的用户名与前面的@一起使用，它们应该匹配，但如果没有前面的@，那么电子邮件地址实际上不应该匹配。@mark_markus@gmail.com 应该匹配 mark_markus@gmail.com，但如果有人输入普通的旧 mark_markus@gmail.com，我们不希望 gmail.com 匹配。

关于如何修改正则表达式以解释可以使用的各种标点符号的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:31:21.857

这个怎么样：

```
(?<![\w@])@([\w@]+(?:[.!][\w@]+)*) 
```

我已替换`[^\s<>]`为`[\w@]`限制性更强的 。 `\w`匹配字母、数字和下划线。如果您特别需要允许任何其他字符，请将它们添加到每个字符类中。

此组：`(?:\.\w+)*`允许一个或多个句点作为用户名的一部分，但前提是它们后面紧跟单词字符。请注意，这`(?:...)`是一个非捕获组。当您想出于逻辑目的对事物进行分组但不需要捕获结果时，它很有用。

**更新：** [查看一个工作示例](http://regex101.com/r/pG1fK5)。

# php - PHP：如何从磁盘向浏览器输出 png 图像？

> ID：15436179
> 
> 赞同：1
> 
> 时间：2013-03-15T15:28:47.517
> 
> 标签：php

我在磁盘上的文件夹中有一个文件，我不想从网络浏览器中看到

所以我创建了一个带有文件名的 image.php 文件，并且必须“回显”到图像的浏览器。

例子：

mysite.com/image.php?name=selection.png

必须在浏览器中向用户显示图像。

实际上浏览器要求我保存。我想展示它，而不是要求下载...

我正在使用这个片段

```
header("Content-Type: image/png");
header('Content-Length: ' . filesize($full_file_name));
header("Content-Disposition: inline; filename='$image'");
readfile($full_file_name);
exit(0); 
```

如果保存并打开，img 是完美的。如何不要求下载它？

**编辑**

*   是的，我需要在图像标签中使用一些东西

*你们中的大多数人都在回答我的问题，告诉我有关图像创建的问题，但我的问题都是关于告诉浏览器显示某些内容并要求用户保存某些内容的不同模式。没有更多关于图像创建的回复 - 你离题了！*

*可能我的问题，我的标题，不清楚*，但我的问题很简单：

**- 如何告诉浏览器显示图像以要求用户保存它**

图像创建工作

通过 imag src 使用图像正在工作

**但是当用户单击图像时，会打开一个新选项卡，其中包含图像 src 作为链接，因为我需要在浏览器中显示全尺寸图像。在这种情况下，浏览器要求我保存！

编辑：

移除

```
header("Content-Disposition: inline; filename='$image'"); 
```

不会改变 Firefox 的行为

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:36:32.043

尝试：

```
header("Content-type: image/png");
passthru("cat $full_file_name"); 
```

如果您正在使用用户输入，请非常小心 passthru 命令，因为此函数将执行您传递的任何内容。

[https://www.php.net/manual/en/function.passthru.php](https://www.php.net/manual/en/function.passthru.php)

> 当允许将用户提供的数据传递给此函数时，请使用 escapeshellarg() 或 escapeshellcmd() 以确保用户无法欺骗系统执行任意命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:33:13.863

为此，您必须对图像进行 base64 编码，然后输出结果。你可以使用这样的函数：

```
<?php

/**
 * Base64 encodes an image..
 *
 * @param [string] $filename [The path to the image on disk]
 * @param [string] $filetype [The image file type, (jpeg, png, gif, ...)]
 */
function base64_encode_image($filename, $filetype) 
{
    if ($filename) 
    {
        $imgBinary = fread(fopen($filename, "r"), filesize($filename));

        return 'data:image/' . $filetype . ';base64,' . base64_encode($imgbinary);
    }
} 
```

然后将结果作为图像的源输出，如：

```
$image = base64_encode_image('...name of file', '... file type');
echo "<img src='$image' />'; 
```

编辑：我想我在这里弄错了，但是哦，好吧！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:35:55.247

您可以使用 PHP 的 GD 库。

在你的 image.php 中。

```
<?php
    header('Content-type: image/png');
    $file_name = $_GET['name'];
    $gd = imagecreatefrompng($file_name);
    imagepng($gd);
    imagedestroy($gd);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:35:33.593

您也可以使用 PHP 的[imagepng](http://php.net/manual/en/function.imagepng.php)：

> imagepng — 将 PNG 图像输出到浏览器或文件

```
<?php
$im = imagecreatefrompng("test.png");

header('Content-Type: image/png');

imagepng($im);
imagedestroy($im);
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T15:37:35.910

如果您的图片路径存储在数据库中，则此方法可以。（我已经使用 MySQLi 进行了示例，将其调整为您的数据库 API）

```
CREATE TABLE IF NOT EXISTS `PicturePath` (
  `ID` int(255) NOT NULL AUTO_INCREMENT,
  `Path` varchar(255) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=0;

    --
INSERT INTO `PicturePath` (`ID`, `Path``) VALUES
(1, 'img/picture.png')
//End DB
// Start script

    $PictureID = $_GET['Name'];

    $Get_Picture = $Conn->prepare("SELECT PicturePath FROM pictures WHERE ID=?");
    $Get_Picture->bind_param('i', $PictureID);
    $Get_Picture->execute();
    $Get_Picture->bind_result($Path);
    $Get_Picture->close();
    echo "<img src='$Path'></img>"; 
```

如果您使用 URL 参数选择图像，上述方法是最好的

除此以外：

```
$Picture = $_Get['Name'];

$Image = imagecreatefrompng($Picture);

header('Content-Type: image/png');

imagepng($Image); 
```

可能是解决方案

手册在这里：

[http://php.net/manual/en/function.imagepng.php](http://php.net/manual/en/function.imagepng.php)

# sql-server - xquery在for循环中返回xml元素？

> ID：15436181
> 
> 赞同：0
> 
> 时间：2013-03-15T15:28:53.060
> 
> 标签：sql-server, xml, sql-server-2008, xquery

我有以下用于 Sql server 2008 表的 xquery。

```
declare @tableName sysname = 'tableName'
declare @colNames xml = (select COLUMN_NAME from INFORMATION_SCHEMA.columns where TABLE_NAME = @tableName for xml path(''), elements)
select @colNames.query('<html><body>
<table>
<tr>
{
    for $c in /COLUMN_NAME
    return data($c)[1]
}
</tr>
</table>
</body></html>
') 
```

但是，它返回以下 xml。

```
<html>
  <body>
    <table>
      <tr>col1col2col3col4col5</tr>
    </table>
  </body>
</html> 
```

预期的结果是

```
<html>
  <body>
    <table>
      <tr><th>col1</th><th>col2</th><th>col3</th><th>col4</th><th>col5</th></tr>
    </table>
  </body>
</html> 
```

我试图更改`return data($c)[1]`为`concat("<th>", data($c)[1], "</th>")`. 然而，`<`and`>`被逃到`&lt;`and `&gt;`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:31:36.100

```
for $c in /COLUMN_NAME
return element th { data($c)[1] } 
```

或者

```
for $c in /COLUMN_NAME
return <th>{ data($c)[1] }</th> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:40:24.477

或者，您可以直接在查询中执行此操作。

```
select
  (
  select COLUMN_NAME as '*'
  from INFORMATION_SCHEMA.columns 
  where TABLE_NAME = @tableName
  for xml path('th'), root('tr'), type
  ) as "table"
for xml path('body'), root('html') 
```

或者

```
select
  (
  select COLUMN_NAME as th
  from INFORMATION_SCHEMA.columns 
  where TABLE_NAME = @tableName
  for xml path(''), type
  ) as "html/body/table/tr"
for xml path('') 
```

# joomla2.5 - joomla JA_MERO 模板问题

> ID：15436182
> 
> 赞同：-1
> 
> 时间：2013-03-15T15:28:59.440
> 
> 标签：joomla2.5, joomla-template

我正在[为 joomla 2\. 5 使用 JA_MERO 模板](http://www.joomlart.com/joomla/templates/ja-mero)，但不幸的是

*   它在不同的浏览器和屏幕上呈现不同的布局，即使在具有相同浏览器的同一台笔记本电脑上，它也会呈现不同的布局。
*   主要问题是，大多数时候，它不提供任何布局，只显示正常的 html 链接。
*   开发人员将其描述为响应式，但我观察到网站的加载时间太长。

如果有人知道解决方案，请帮助我的朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:12:47.573

检查模板文件。你能找到他们的身体吗？如果不是，那么我们已经知道问题的根源。如果你能找到它们，你应该检查它们是否被正确引用。

# xml - 使用 Notepad++ 针对 XSD 验证 XML

> ID：15436183
> 
> 赞同：137
> 
> 时间：2013-03-15T15:29:01.920
> 
> 标签：xml, xsd, notepad++

有人可以解释如何使用 Notepad++ 针对 xsd 验证 xml 文件。“XML 工具”插件下拉列表中没有用于指定 XSD 文件的选项。XML 插件已正确安装在 plugins 子目录中，并且 3 个 DLL 被复制到 Notepad++ EXE 子目录中。其他 XML“验证”功能有效，但无法针对 XSD 进行验证。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2015-05-11T12:19:50.523

1.  在记事本++中，`Plugins > Plugin manager > Show Plugin Manager`然后找到 `Xml Tools`插件。勾选该框并单击`Install`

    ![在此处输入图像描述](../Images/030f15c39bcc2d3c8158343a322051b2.png)

2.  打开您要验证的 XML 文档并单击`Ctrl`+ `Shift`+ `Alt`+ `M`（如果这是您的偏好，请使用菜单`Plugins > XML Tools > Validate Now`）。
    将打开以下对话框： ![在此处输入图像描述](../Images/5ae3a41f68532937acda6e45fbaefe48.png)

3.  点击`...`。指向 XSD 文件，我很确定您将能够从这里处理事情。

希望这可以节省您一些时间。

**编辑：** 插件管理器不包含在某些版本的 Notepad++ 中，因为许多用户不喜欢它曾经展示的商业广告。如果您想保留旧版本，但仍需要插件管理器，您可以在[github](https://github.com/bruderstein/nppPluginManager/releases)上获取它，并通过提取存档并将内容复制到插件和更新文件夹来安装它。
在版本`7.7.1`中，插件管理器以不同的形式重新出现......`Plugin Admin`所以现在您可以简单地更新 notepad++ 并将其恢复。

[![在此处输入图像描述](../Images/6358547a65beaaad54e76593fbac722e.png)](https://i.stack.imgur.com/jGSwK.png)

# c# - ASP.NET 和 MVC.NET 解决方案之间的单点登录选项？

> ID：15436184
> 
> 赞同：3
> 
> 时间：2013-03-15T15:29:02.440
> 
> 标签：c#, asp.net, asp.net-mvc, security, authentication

我有一个 ASP.NET 解决方案，它充当我客户的主要客户门户。在这个网站上，用户可以登录访问他们的重要财务信息等等。`Users`该网站使用自定义身份验证方案，根据本地数据库中的表检查用户的用户名（他们的电子邮件）和密码（salt-hashed） 。

我正在构建一个新的 MVC.NET 解决方案，它更像是一个 Web 应用工具，供这些相同的客户用于订购。我想重新使用 ASP.NET 门户的登录机制来对用户进行身份验证。目标是避免用户记住两次登录，甚至不必提供两次相同的登录。

我有哪些选项可以让登录到 ASP.NET 解决方案的用户自动通过 MVC.NET 解决方案进行身份验证？我在下面列出了一些想法，但这些想法是“坏的”还是有更优雅的解决方案？我喜欢你的意见。

*   **通用 Cookie** 我可以创建 ASP.NET 站点创建和 MVC.NET 站点查找的通用 cookie。但这是否足够安全？
*   **查询字符串中** 的令牌我可以在存储在本地数据库中的 ASP.NET 站点上创建一个令牌 id，然后在链接的查询字符串中传递到 MVC.NET 站点，该站点采用令牌 id 并根据同一个数据库。
*   **混合** 两者兼而有之？
*   **其他？** 有更好的主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:32:49.507

我最近使用[OpenId](http://openid.net/)做了一些非常相似的事情（主要区别在于它是公司内部的而不是外部客户） 。

.NET 的 OpenId 实现称为[DotNetOpenAuth](http://www.dotnetopenauth.net/)，它应该适合您的目的。

我确实花了一些时间来实施；但它工作得很好，非常灵活，而且非常安全。

有关 openid 的更多信息（来自[Wikipedia](http://en.wikipedia.org/wiki/OpenID)）：

> OpenID 是一种开放标准，允许用户通过使用第三方服务的某些合作网站（称为依赖方或 RP）进行身份验证，从而无需网站管理员提供自己的临时系统并允许用户整合他们的数字身份。
> 
> 用户可以使用他们首选的 OpenID 身份提供者创建帐户，然后使用这些帐户作为登录任何接受 OpenID 身份验证的网站的基础。OpenID 标准为身份提供者和 OpenID 接受者（“依赖方”）之间必须进行的通信提供了一个框架。[2](http://www.dotnetopenauth.net/)标准的扩展（OpenID 属性交换）促进了用户属性（例如姓名和性别）从 OpenID 身份提供者到依赖方的传输（每个依赖方可以根据其要求请求不同的属性集）。
> 
> OpenID 协议不依赖中央机构来验证用户的身份。**此外，无论是服务还是 OpenID 标准都不会强制要求使用特定的方法来验证用户身份**，从而允许使用从常见（例如密码）到新颖（例如智能卡或生物识别）的各种方法。

哦，如果您想要进一步的鼓励，Stack Exchange 会使用它！

@Jmrnet：回应您的最后评论：

也许我不清楚。OpenId 本身只是用于验证从一个位置到另一个位置的凭据（或多或少）。完全有可能实现为 SSO 模型，其中用户没有任何不同 - 他们不必选择提供商，或注册，或类似的东西。例如，在我的设置中，用户在门户网站中输入用户名和密码，然后单击按钮启动另一个由 OpenId 自动登录的站点。对用户来说没有什么不同！OpenId 可以与您能想到的任何初始身份验证模型一起使用（注意维基百科片段中的粗体部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:47:00.793

看看 SAML：

[http://en.wikipedia.org/wiki/Security_Assertion_Markup_Language](http://en.wikipedia.org/wiki/Security_Assertion_Markup_Language)

它使用 XML 工作并支持加密。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:38:02.400

您可以使用许多方法，Mansfied 描述的 OpenID 和 RandomUs1r 描述的 SAML。此外，您可以将相关信息存储在 localStorage 或会话中。我相信您应该将相关信息与会话一起存储。

将它放在查询字符串中是不安全的，因为如果我注册并登录，我会在 URL 中看到类似 UserID=1234 的内容。如果我将其更改为 UserID=1235 并且 ID 存在，那么我可以以其他用户的名义做一些事情。这称为身份盗用，应通过任何可能的方式加以防止。所以你永远不应该在你的 URL 中包含这种信息。此外，如果您存储用户的 id，您应该以某种方式对其进行混淆。例如，如果您将值存储在本地存储中，而不是 1234 存储 encrypt(1234, salt)，则将保持用户操作的一致性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:38:40.767

我目前正在为同一个项目实施两个 SSO 解决方案。

一方面，我们正在与外部合作伙伴进行交互并使用 SAML。

另一方面，我们允许登录用户访问我们的 Sharepoint 并使用“查询字符串中的令牌”方法，因为我们相信 Sharepoint 可以访问我们的会员表。这种方法比处理 SAML 令牌要容易得多。

# android - @string 的问题和为 android 开发

> ID：15436198
> 
> 赞同：0
> 
> 时间：2013-03-15T15:29:42.263
> 
> 标签：android, string

我正在尝试为 android 编写一个短信接收器。但我有问题。我在这里找到了一个例子：http: [//www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android](http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android)

Eclipse 下划线： android:text="Update SMS list" />

所以我把它改成：

```
<Button android:layout_height="wrap_content"
    android:layout_width="match_parent" 
    android:layout_margin="2dip"
    android:text="@string/UpdateList"
    android:id="@+id/UpdateList"/> 
```

并将其添加到 strings.xml 中：

```
<string name="UpdateList">Update SMS List</string> 
```

现在问题出在以下行：

```
android:text="@string/UpdateList" 
```

这是错误消息：

[2013-03-14 16:37:07 - FindMyPhone] ActivityManager：警告：Activity 未启动，其当前任务已被置于最前面

有谁看到问题是什么？或者知道如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:34:59.940

```
[2013-03-14 16:37:07 - FindMyPhone] ActivityManager: Warning: Activity not started, its current task has been brought to the front 
```

这通常表明设备上安装的 APK 与已经安装的 APK 没有什么不同。根据您的问题，可以通过清理和重建应用程序，然后将其重新加载到您的设备来解决该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:35:10.353

**下划线问题：** 我认为 Linter 只是还没有注意到变化，我经常发现保存文件，关闭它并再次打开它需要清除它的“缓存”，如果它可以被称为错误/ 警告。

> ActivityManager: 警告: Activity 没有启动，它的当前任务已经被带到了前面

这只是意味着 Activity 在设备/模拟器上打开并且您再次启动它。如果自上次启动以来代码没有更改，则会发生这种情况，并且它将当前 Activity 置于最前面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:35:55.707

> [2013-03-14 16:37:07 - FindMyPhone] ActivityManager：警告：Activity 未启动，其当前任务已被置于最前面

您的代码不是问题，而是该应用程序当前正在模拟器/设备上运行，并且 Eclipse 正在尝试再次启动它。只需回击，直到您进入主屏幕并尝试再次启动它。

# sql-server-2008 - 数据库错误：定位 TTable 时未找到记录，

> ID：15436199
> 
> 赞同：0
> 
> 时间：2013-03-15T15:29:57.753
> 
> 标签：sql-server-2008, delphi, bde, locate

我的应用程序，我在很多地方都使用了 TTable.locate 选项来移动光标，但只有一个地方会引发“EDatabaseerror：Record Not Found”，而且它只会针对特定记录引发，

Locate 选项仅返回布尔值，如果记录存在则返回 True，如果不存在则返回 Fasle，为什么会引发错误？我正在使用：Delphi 7、BDE5、Sql server 2008，我正在使用 Sql server 本机客户端驱动程序从 BDE VIA ODBCE 连接 Sql server，除了那个地方之外，应用程序工作正常。

注意：我正在使用 locaseinsensitive 选项定位 ttable，例如：

```
tb_user.locate('username',tb_global_user.fieldbyname('Username',[locaseinsensitive])); 
```

这个错误是从我的结果表单中引发的，我正在使用这个表单进行常见搜索，有什么帮助吗？

# mysql - 全文确定匹配字段

> ID：15436201
> 
> 赞同：2
> 
> 时间：2013-03-15T15:29:59.100
> 
> 标签：mysql, full-text-search

我有一个表格设置，其中包含 ID、StreetNumber、StreetName、StreetType 的全文索引，用于实时表单搜索。示例数据如下所示：

```
 ID        StreetNumber   StreetName   StreetType
   -----------------------------------------------------
   | 141099  |        1411   |  Elm       |      ST    |
   -----------------------------------------------------
   | 141100  |        2901   |  Maple     |      LN    |
   ----------------------------------------------------- 
```

如果我使用以下方式查询：

```
SELECT ID, StreetName, StreetNumber, StreetType
FROM Locations
WHERE MATCH(ID, StreetName, StreetNumber, StreetType)
      AGAINST('1411*' IN BOOLEAN MODE) 
```

它当然会返回两条记录......但是，我很难找到一种简单的方法来确定它匹配的字段。

我想将我的实时搜索结果格式化为：

```
ID: 141100 (2901 Maple Lane)
Address: 1411 Elm St 
```

...按他们匹配的内容排序。用 PHP 格式化很容易，问题在于找到匹配的结果。但是，我找不到一种方法来做到这一点，而不必在 PHP 中检查它（不是很有效）。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:54:17.873

您可以使用全文索引有效地进行搜索，然后使用另一种解决方案来测试选择列表中的列（仅针对通过 WHERE 子句中的过滤器的行运行）：

```
SELECT ID, StreetName, StreetNumber, StreetType,
  (StreetName like '%1411%') AS `StreetName_matches`, 
  (StreetNumber like '%1411%') AS `StreetNumber_matches`,
  (StreetType like '%1411%') AS `StreetType_matches`
FROM Locations 
WHERE MATCH(ID, StreetName, StreetNumber, StreetType) 
      AGAINST('1411*' IN BOOLEAN MODE) 
```

或者，您可以在列上创建四个单独的全文索引，然后依次搜索每个索引：

```
SELECT ID, StreetName, StreetNumber, StreetType,
  MAX(`ID_Matches`) AS `ID_Matches`,
  MAX(`StreetName_Matches`) AS `StreetName_Matches`,
  MAX(`StreetNumber_Matches`) AS `StreetNumber_Matches`,
  MAX(`StreetType_Matches`) AS `StreetType_Matches`
FROM (
  SELECT SELECT ID, StreetName, StreetNumber, StreetType,
    1 AS `ID_Matches`,
    NULL AS `StreetName_Matches`,
    NULL AS `StreetNumber_Matches`,
    NULL AS `StreetType_Matches`
  FROM Locations 
  WHERE MATCH(ID) AGAINST('1411*' IN BOOLEAN MODE)
  UNION ALL
  SELECT SELECT ID, StreetName, StreetNumber, StreetType,
    NULL AS `ID_Matches`,
    1 AS `StreetName_Matches`,
    NULL AS `StreetNumber_Matches`,
    NULL AS `StreetType_Matches`,
  FROM Locations 
  WHERE MATCH(StreetName) AGAINST('1411*' IN BOOLEAN MODE)
  UNION ALL
  SELECT SELECT ID, StreetName, StreetNumber, StreetType,
    NULL AS `ID_Matches`,
    NULL AS `StreetName_Matches`,
    1 AS `StreetNumber_Matches`,
    NULL AS `StreetType_Matches`,
  FROM Locations 
  WHERE MATCH(StreetNumber) AGAINST('1411*' IN BOOLEAN MODE)
  UNION ALL
  SELECT SELECT ID, StreetName, StreetNumber, StreetType,
    NULL AS `ID_Matches`,
    NULL AS `StreetName_Matches`,
    NULL AS `StreetNumber_Matches`,
    1 AS `StreetType_Matches`,
  FROM Locations 
  WHERE MATCH(StreetTYPE) AGAINST('1411*' IN BOOLEAN MODE)
) AS t
GROUP BY t.ID; 
```

您可能还想研究功能更全面的全文搜索技术，例如[Sphinx Search](http://sphinxsearch.com)或[Apache Solr](http://lucene.apache.org/solr/)。

例如，请参阅[如何返回与 Solr 中的查询匹配的列的答案..？](https://stackoverflow.com/questions/9629147/how-to-return-column-that-matched-the-query-in-solr)

# javascript - 在 1 个 post 方法中执行 2 个函数

> ID：15436202
> 
> 赞同：0
> 
> 时间：2013-03-15T15:30:02.293
> 
> 标签：javascript

我有一个带有注册表单的网页。在这种形式中，当有人按下提交按钮时，POST 方法正在调用一个函数来存储字段数据。函数名称是`WebsiteForm_OnSubmit();`

```
<form method="post" action="/mainpage/page2.aspx" onsubmit="javascript:return WebsiteForm_OnSubmit();" id="aspnetForm" enctype="multipart/form-data"> 
```

现在我有另一个 JS 函数，叫做`addfielddatetocrm(this)`; 我想执行这个动作`WebsiteForm_OnSubmit();`

所以总而言之，当有人点击提交按钮时，两个函数都会被执行。

我知道不可能在 1 个 post 方法中执行 2 个操作。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:33:41.243

您可以在执行 2 个功能 1 时执行此操作。

```
function submitForm(){ 
    addfielddatetocrm(this);
    WebsiteForm_OnSubmit();
} 
```

你的表格有这样的东西：

```
<form method="post" action="/mainpage/page2.aspx" onsubmit="javascript:return submitForm();" id="aspnetForm" enctype="multipart/form-data"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:17:38.290

您应该将您的功能包装到一个函数中，并在您的 onsubmit 属性中调用它。将所有函数调用作为字符串放在 onsubmit 属性中绝对没有意义，因为保持代码清晰非常重要。是的，您可以在提交时调用更多函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:32:41.877

尝试这个，

```
onsubmit="javascript:addfielddatetocrm(this);return WebsiteForm_OnSubmit();" 
```

# c++ - Mac 上的 Eclipse 错误

> ID：15436205
> 
> 赞同：1
> 
> 时间：2013-03-15T15:30:05.553
> 
> 标签：c++, xcode, eclipse, macos, path

Eclipse 不允许我包含 iostream，它说未解决的包含。我在 mac 10.8.2 上，并且还下载了 Xcode。我读了一些关于去偏好和添加新路径的内容，但它没有奏效。请帮忙！

未解决的包含： iostream Program gcc not found on PATH Program g++ not found on PATH

# java - EJB + JSF (Primefaces) Maven -> 在 EJB 中使用 primefaces jar -> 在 Jboss、Eclipse 上部署期间出现异常

> ID：15436210
> 
> 赞同：1
> 
> 时间：2013-03-15T15:30:10.030
> 
> 标签：java, maven, jboss, ejb, classloader

我需要创建查询构建器。我想在 ejb 网站上创建它。为此，我需要使用 org.primefaces.model.SortOrder。我在 ejb POM 中添加了对 primefaces 的依赖。之后我得到了 **“java.lang.NoClassDefFoundError：org/primefaces/model/SortOrder”。**这种依赖在战争中运行良好。有任何想法吗？

Pom WAR 构建部分

```
<build>
<plugins>
        <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.3.2</version>
        <configuration>
            <source>1.6</source>
            <target>1.6</target>
        </configuration>
    </plugin>

</plugins>
<finalName>JSF</finalName> 
</build>

EJB Pom

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>test.com</groupId>
    <artifactId>EJB</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <packaging>ejb</packaging>

    <name>EJB</name>

    <properties>
        <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
My dependencies with primefaces
</dependencies>
<build>
<plugins>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-compiler-plugin</artifactId>
<version>2.3.2</version>
<configuration>
    <source>1.6</source>
    <target>1.6</target>
    <compilerArguments>
        <endorseddirs>${endorsed.dir}</endorseddirs>
    </compilerArguments>
</configuration>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-ejb-plugin</artifactId>
<version>2.3</version>
<configuration>
    <ejbVersion>3.1</ejbVersion>

    <archive>
        <manifestEntries>
            <Dependencies>org.slf4j</Dependencies>
        </manifestEntries>
    </archive>

</configuration>
</plugin>
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-dependency-plugin</artifactId>
<version>2.1</version>
<executions>
    <execution>
        <phase>validate</phase>
        <goals>
            <goal>copy</goal>
        </goals>
        <configuration>
            <outputDirectory>${endorsed.dir}</outputDirectory>
            <silent>true</silent>
            <artifactItems>
                <artifactItem>
                    <groupId>javax</groupId>
                    <artifactId>javaee-endorsed-api</artifactId>
                    <version>6.0</version>
                    <type>jar</type>
                </artifactItem>
            </artifactItems>
        </configuration>
    </execution>
</executions>
</plugin>
</plugins>
<pluginManagement>
<plugins>
<!--This plugin's configuration is used to store Eclipse m2e settings 
    only. It has no influence on the Maven build itself. -->
<plugin>
    <groupId>org.eclipse.m2e</groupId>
    <artifactId>lifecycle-mapping</artifactId>
    <version>1.0.0</version>
    <configuration>
        <lifecycleMappingMetadata>
            <pluginExecutions>
                <pluginExecution>
                    <pluginExecutionFilter>
                        <groupId>
                            org.apache.maven.plugins
                        </groupId>
                        <artifactId>
                            maven-dependency-plugin
                        </artifactId>
                        <versionRange>
                            [2.1,)
                        </versionRange>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                    </pluginExecutionFilter>
                    <action>
                        <ignore></ignore>
                    </action>
                </pluginExecution>
            </pluginExecutions>
        </lifecycleMappingMetadata>
    </configuration>
</plugin>
</plugins>
</pluginManagement>
</build>

</project>

EAR is not a maven projekt

  <display-name>EAR</display-name>
  <module>
    <web>
      <web-uri>JSF.war</web-uri>
      <context-root>JSF</context-root>
    </web>
  </module>
  <module>
    <ejb>EJB.jar</ejb>
  </module>
</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:36:48.397

如果您需要同时使用 ejb 和 war 的应用程序，那么您必须创建一个包含您的库的 ear 包。如果您不想创建第三个 pom（从您的两个孩子创建 ear），那么您可以将此库移动到服务器。

# javascript - 如何在 x 轴上制作固定数量，以便显示未来的小时数？

> ID：15436215
> 
> 赞同：1
> 
> 时间：2013-03-15T15:30:20.030
> 
> 标签：javascript, jquery, time, flot

我的代码完美地处理了我的 XML 文件中的数据，没问题，但是如果只有一小时的数据可用，它会像这样延伸到整个 x 轴：

```
 15:00 
```

我想在 x 轴上看到一个固定的数量，而不是仅仅显示`15:00`它还显示未来的小时数，无论数据是否可用。例如：

```
15:00     16:00     17:00     18:00     19:00     20:00     21:00 
```

我目前的配置如下，但不知道如何使上述发生：

```
{   
    grid: {
        hoverable: false,
        clickable: false,
        borderWidth: 1
    },
    xaxis: {
        mode: "time",
        minTickSize: [1, "hour"],
        timeFormat: "%H:%M"
    },
    yaxis: {
        min: 20,
        max: 45
    },
    legend: {
        show: true,
        position: 'ne'
    },
    valueLabels: {
        show:true,
        showAsHtml: true
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:45:52.943

我在 json 数据创建方面处理这种情况。不确定是否有一个浮动选项来做类似的事情。通过使用 null 作为我期望的所有时间戳的数据值。如果您有第一个小时的时间，您可以将其增加 60 * 60 * 1000 例如

```
"data": [
  [
    1362139200000,
    1.56
  ],
  [
    1362142800000,
    null
  ],
  [
    1362146400000,
    null
  ],
  [
    1362150000000,
    null
  ],
  [
    1362153600000,
    null
  ],
  [
    1362157200000,
    null
  ],
  etc. 
```

]

# recursion - 反向链表 - 递归

> ID：15436221
> 
> 赞同：1
> 
> 时间：2013-03-15T15:30:36.117
> 
> 标签：recursion, singly-linked-list

抱歉，如果这是一个非常基本的问题，我只是想学习递归。

下面的代码可以反转一个链表。

我理解第 3 行之前的逻辑，但我很困惑何时调用第 4 行，`(n.next=prev)`因为在执行此行之前再次调用该函数。

有人可以让我知道这个递归的流程吗？

```
 void reverse(node n, node prev) {
     if (n == null) { newroot = prev; return; }
     reverse(n.next, n);
     n.next = prev;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:36:27.090

一旦**n**命中`null` 并反转函数`return`，它将从那里回溯到它的调用函数，一直到它的第一个调用函数。

更新：*请参阅下面的评论以获得更完整的解释。*

# ruby-on-rails - 查找类似于 LIKE sql (Ruby) 的值哈希

> ID：15436224
> 
> 赞同：0
> 
> 时间：2013-03-15T15:30:47.067
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

`LIKE`如何在哈希中搜索类似于 SQL的值？

例子：

```
[ {:x=>"Hello"},{:x=>"Hello 1"]] 
```

我想搜索所有包含“他”的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:33:16.003

带一个`include`？

```
a.select{|e| e[:x].include?('he')} 
```

还是使用正则表达式`match`？

```
a.select{|e| e[:x] =~ /he/} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:36:41.777

```
haystack = [{:x=>"Hello"}, {:x=>"Hello 1"}, {:x=>"Goodbye"}]

haystack.find_all do |entry|
  entry[:x] =~ /he/i # /i makes it case insensitive
end

#=> [{:x=>"Hello"}, {:x=>"Hello 1"}] 
```

# variables - 输入名称选择器中的 jquery 变量

> ID：15436225
> 
> 赞同：3
> 
> 时间：2013-03-15T15:30:52.120
> 
> 标签：variables, jquery-selectors

我想在 jquery 选择器中使用变量来选择选中的输入，我的代码如下。这里有什么问题？

```
function MyFunction(MyVariable){
var idAddress = $("input[name='id_address_" +MyVariable+ "']:checked").val();
alert(idAddress);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:56:20.553

从语法上讲，你所拥有的是正确的。它将获取名称为 id_address_ + MyVariable 的任何已检查的输入，然后如果返回多个，则获取第一个元素的值。如果 idAddress 的值为 null，那么根据您的选择标准，您不会从 jQuery 获得任何返回值。为此，我们需要更多代码来查看表单元素、MyVariable 的来源等。

# java - 如何为 java 创建一个类似于控制台的 gui

> ID：15436227
> 
> 赞同：2
> 
> 时间：2013-03-15T15:31:02.613
> 
> 标签：java, user-interface, console, text-based

我创建了一个类似于 Zork 的基于文本的游戏，我需要一个 gui 来在 Eclipse 之外运行它。我想把它作为一个罐子运行。（顺便说一句，如果这改变了任何东西，我就在 Mac 上）。我只需要一个输出字段和一个输入字段。实现这一目标的最简单方法是什么？我需要更改多少代码？（我使用 System.out.print 进行输出，使用 Scanner 进行输入）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:42:00.567

如果您想创建类似控制台的 GUI，那么简单的方法是将 textarea 组件添加到您的框架或面板中，该面板具有通过视口的滚动条。创建一个为组件提供文本的流。然后只需将标准输出重定向到该流。结束。启动您的 GUI 并享受控制台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:47:51.593

如果您不想在终端上运行它，您可能应该使用带有 JTextArea 的 Swing，在其中将所有消息附加给用户，并使用简单的 JTextField 供用户输入他的命令。

这是[JTextArea 的一个快速示例，](http://www.java2s.com/Tutorial/Java/0240__Swing/UsingJTextArea.htm)因此您会有所了解。您需要阅读有关 Swing 事件的更多信息，以便对用户按下 ENTER 键做出反应以读取文本字段的内容并运行游戏逻辑。

请注意，上面示例中的屏幕截图使用“金属”外观，但它应该看起来更接近 Mac 上的本机应用程序。

# php - 等待输入时使页面超时的好方法？

> ID：15436228
> 
> 赞同：0
> 
> 时间：2013-03-15T15:31:05.957
> 
> 标签：php

客户去购物车。Shoppingcart 添加到 DB，因为它需要通过外部服务支付。5分钟后如何删除购物车？

我想打印“订单将在 5 分钟内重置”，然后向脚本发送一个 ajax 请求，该脚本将 sleep() 5 分钟，然后取消订单。

有没有更好的办法？这肯定比每 5 分钟运行一次 cron 要好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:36:20.907

向长时间运行的脚本发送 ajax 请求听起来是个坏主意。您最终可能会运行大量睡眠脚本，这将阻塞您的服务器。

cron 工作并不是一个坏主意。它可以定期在数据库中运行以查找过期的购物车。

如果到期查询很快，它可以更频繁地运行，例如，每当有人向购物车添加东西时，或者当有人试图结账时。

另一种方法是将过期的篮子留在数据库中。当用户尝试结帐时，您会检查当时是否过期，让用户知道它已过期并将其删除。可以在每日/每周的整理工作中删除由于用户永远不会回来而没有被删除的过期篮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:36:49.923

1.  首先，总是让用户知道发生了什么，所以打印“订单将在 5 分钟内重置”是个好主意
2.  我认为更好的方法是设置一个 5 分钟后过期的 cookie
3.  然后...当/如果 cookie 过期，您是否需要取消订单:)

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:37:20.737

让一个 php 进程等待是一个非常糟糕的主意......它消耗大量系统资源并且它不可扩展。

一个 cron-job 可能需要更多的努力来实现，但从长远来看它会对你有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T15:37:58.020

我要做的是`expire_time`在数据库行中设置一个。如果他们的下一个请求超过了那个时间。如果他们在那之后回到篮子，删除他们的篮子。

如果不出意外，请运行该 cron 来清理每天左右被丢弃的篮子。

# python - 在 Django python 中导入模型

> ID：15436235
> 
> 赞同：4
> 
> 时间：2013-03-15T15:31:21.917
> 
> 标签：python, django, models

如何在 INSTALLED_APPS 的 settings.py 中导入所有模型？当我尝试插入一些模型时发生错误：“没有名为 app1_model 的模型”

```
-ProjectName
--ProjectName
---models
----__init__.py
----admin.py
----app_1_model
----....
----app_n_model
---templates
---__init__.py
---settings.py
---urls.py
---wsgi.py
--manage.py 
```

^ 项目结构 ^

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T15:33:02.477

INSTALLED_APPS 用于应用程序而不是模型。模型是存在于您的应用程序中的类，通常位于`/«app_name»/models.py`.

我认为您误解了 Django 项目的结构。尝试完成一个教程示例。

典型结构：

```
/«project»/«app_name»/models.py 
```

并在设置中：

```
INSTALLED_APPS = [ ... '«app_name»' ... ] 
```

您的路径将包含基础项目目录，因此您可以在需要的地方导入您的应用程序。

并使用它们：

```
from «app_name».models import * 
```

尽管最好不要`import *`命名您希望导入的类。

**要回答评论中的问题：**

如果您不喜欢将所有模型存储在一个文件中的想法（即使这样做很正常），您可以创建一个名为 models. 为此，请`/«project»/«app_name»/models`在其中创建一个名为 的目录`__init__.py`（将其声明为模块），然后在其中创建文件。然后，您需要将文件内容导入`__init__.py`. 你应该阅读 Python 模块来理解这一点。

**要回答第二个评论问题：**

要在 admin 中查看模型，您应该使用模型管理对象创建一个[管理文件。](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)

**最后：**

请通读教程以确保您对 Django 有透彻的了解。否则你就是在浪费自己的时间！

# r - 包含 knitr Sexpr{} 的 LyX 子文档找不到缓存值

> ID：15436236
> 
> 赞同：3
> 
> 时间：2013-03-15T15:31:26.690
> 
> 标签：r, caching, parent-child, knitr, lyx

lyx 文件 F

```
knitr chunk caches a value for x
then text A contains several Sexpr{} calls, including Sexpr{x} 
```

将 F 编译为 pdf 工作正常

现在我将文本 A 移动到单独的 LyX 文件 C 中，使 C 成为子文件，F 为主文件

重写 F——应该产生两次“文本 A”

```
knitr chunk caches a value for x
text A 
\include(C) 
```

一切正常，编译产生“文本A”两次，除了`\Sexpr{x}`包含部分找不到缓存值。我查看了 knitr 和 knitr/LyX 文档以及众多帮助站点，但无法弄清楚在这种情况下缓存如何工作（或无法工作）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:52:57.813

那不是缓存的问题，而是LyX的问题，或者说是没有实现的功能。目前，LyX 子文档被视为*独立*文件，这意味着它们在单独的 R 会话中编译，因此变量不能跨文档共享。您可以向 LyX 开发人员[提出功能请求。](http://www.lyx.org/trac/wiki/BugTrackerHome)关键是，当 LyX 包含`knitr`or`Sweave`模块并作为另一个文档的子文档包含时，它不应该单独编译（将此工作交给`knitr`or `Sweave`）。

无论如何，我个人认为这不是一个大问题——我总是将所有内容都放在一个 LyX 文档中。

# javascript - 使用单击的类查找 div 的 ID

> ID：15436238
> 
> 赞同：2
> 
> 时间：2013-03-15T15:31:34.567
> 
> 标签：javascript, jquery, html

我有几个带有 class="big_square" 的框它们都有 ID，这些 ID 是由对 Oracle DB 的一些 Java 调用动态生成的下一个电话

这是HTML：

```
<DIV style="DISPLAY: block" id=big_square_container>
<DIV id="2" class=big_square></DIV>
<DIV id="3" class=big_square></DIV>
<DIV id="4" class=big_square></DIV>
<DIV id="5" class=big_square></DIV>
<DIV id="6" class=big_square></DIV></DIV>
</DIV> 
```

以及我试图用来查找 ID 的 jquery：

```
$(".big_square").click(function(){
    $(".big_square").animate({opacity: .4}, 'fast', 'linear', function() {
      }); 
    $(this).animate({opacity: 1}, 'fast', 'linear', function() {
      }); 
   var x = $(this).getElementbyID();
    console.log(x);
    response.setAttribute("x",x);
}); 
```

我猜当我引用一个类时，程序不知道“this”是什么，但它仍然应该做一些事情，比如在每个 .big_square 上执行内部代码，似乎什么都没有发生。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:33:31.627

听起来您只是想找到在`id`点击回调中被点击的值。如果是这样，请使用以下内容。

```
var id = $(this).attr('id'); 
```

**编辑**

正如一些人所指出的，您也可以在这里完全避免使用 jQuery，并执行以下操作，这会更高效

```
var id = this.id; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T15:33:40.103

`document.getElementById`用于检索具有给定 id 的 DOM 元素；`null`如果没有匹配的元素，它会返回。

为了获取单击元素的 id，您可以使用`$(this).attr("id");`，或者不那么冗长的 jQuery-exclusive `this.id`。

# c# - 如何动态使用验证？

> ID：15436245
> 
> 赞同：0
> 
> 时间：2013-03-15T15:32:01.637
> 
> 标签：c#, javascript, asp.net, regex, validation-controls

我正在使用下面的 .aspx 代码来验证`textbox`..这工作得很好

```
<asp:TextBox ID="tbnooflecture" runat="server"  Width="113px" Height="33px">
</asp:TextBox>
  <asp:RegularExpressionValidator ID="RegularExpressionValidator1"  
       ForeColor="#6600FF" runat="server" 
       ErrorMessage="Total Attendence Should be Like 3 or 50" 
       ValidationGroup="upper" Display="Dynamic" 
       ControlToValidate="tbnooflecture" 
       ValidationExpression="[0-9][0-9]|[0-9]">*
    </asp:RegularExpressionValidator> 
```

我想要在这上面`textbox`有什么`dropdownlist named batchname`，如果批处理名称的长度是 2，我想验证出勤率应该是什至没有。

我在按钮单击时使用了以下代码

```
 if (lenghth == 2)
 {
    if (!System.Text.RegularExpressions.Regex.IsMatch(name, "[1-9][02468]"))
    {
        Label5.Text = "Only Even Entry for Labs";
        Label5.Visible = true;
    }
} 
```

我想在客户端做。我怎样才能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:12:55.353

那是您在评论中提到的服务器端验证@user2053138。

查看以下示例：

```
<asp:TextBox id="Text1" 
       runat="server" />

  &nbsp;&nbsp;

  <asp:CustomValidator id="CustomValidator1"
       ControlToValidate="Text1"
       ClientValidationFunction="ClientValidate"
       OnServerValidate="ServerValidation"
       Display="Static"
       ErrorMessage="Not an even number!"
       ForeColor="green"
       Font-Name="verdana" 
       Font-Size="10pt"
       runat="server"/>

<script language="javascript"> 
  function ClientValidate(source, arguments)
  {
    if (arguments.Value % 2 == 0 ){
        arguments.IsValid = true;
    } else {
        arguments.IsValid = false;
    }
  }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:51:21.050

您需要使用 `custom-validation`. 几个有用的链接 [http://www.4guysfromrolla.com/articles/073102-1.aspx](http://www.4guysfromrolla.com/articles/073102-1.aspx) [http://msdn.microsoft.com/en-us/library/f5db6z8k%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/f5db6z8k%28v=vs.71%29.aspx) [http:// /www.w3schools.com/aspnet/control_customvalidator.asp](http://www.w3schools.com/aspnet/control_customvalidator.asp)[通过javascript自定义验证器错误文本？](https://stackoverflow.com/questions/4012387/custom-validator-error-text-through-javascript)`asp.net`

# mysql - Heroku 安装 Amazon RDS：mysql 还是 mysql2？

> ID：15436248
> 
> 赞同：1
> 
> 时间：2013-03-15T15:32:08.727
> 
> 标签：mysql, ruby-on-rails-3, heroku, amazon-ec2, mysql2

我在 Heroku 中安装了 Amazon RDS 插件，并在 Amazon AWS 中创建了一个实例。但我不能跑

```
heroku run rake db:migrate 
```

它以

```
(...)
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:migrate
rake aborted!
undefined method `accept' for nil:NilClass
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-    3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:7:in `to_sql'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:38:in    `select_values'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:587:in `get_all_versions' 
```

当我创建我的实例时，我按照 Heroku 的说明进行操作：

```
$ heroku addons:add amazon_rds url=mysql2://user:pass@rdshostname.amazonaws.com/databasename 
```

从那以后，我一直在与 Mysql2 战斗。首先我在 Heroku 中注意到它指向

```
mysql://user:pass@mydatabase.us-east-1.rds.amazonaws.com/MyFirstDb 
```

没有像 mysql2://user 这样的 2 正常吗？我添加了它。我改变了我的 Gemfile

```
gem 'mysql2', '< 0.3.7' 
```

和我的database.yml

```
production:
adapter: mysql2
database: db/production.mysql2 
```

在它被设置为 sqlite3 之前。

我是新手，这是我想部署到亚马逊 AWS 的第一个应用程序，所以也许我错过了一些明显的东西！任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T21:03:46.960

我得到了它 ！我忘了

```
gem install activerecord-mysql2-adapter 
```

Heroku 中的错误消息说要运行 gem install activerecord-mysql-adapter （没有 2），但是有了 2，它现在可以完美运行了！

我希望这篇文章对其他人有所帮助。所以，总而言之，这是你需要做的： 1- 在 Heroku 的附加链接中设置“2”

```
mysql2://user:pass@mydatabase.us-east-1.rds.amazonaws.com/MyFirstDb 
```

2- 在您的 Gemfile 中添加一行：

```
gem 'mysql2', '~> 0.3.11' 
```

3-更改您的 database.yml

```
production:
adapter: mysql2
database: db/production.mysql2 
```

4-运行

```
gem install activerecord-mysql2
heroku run rake db:migrate 
```

享受 ！:-)

# ruby - 使用 Carrierwave 自定义流程我无法访问 model.id（多页 PDF）

> ID：15436249
> 
> 赞同：1
> 
> 时间：2013-03-15T15:32:11.867
> 
> 标签：ruby, ruby-on-rails-3, carrierwave, rmagick

这个想法是，我想将 PDF 转换为每页的图像。我尝试了 Stackoverflow 上的其他方法，但无济于事。下面是我的上传文件。

**上传者**

```
class PdfUploader < CarrierWave::Uploader::Base
  include CarrierWave::RMagick
  #//TODO - Remove converted images when deleting an entry, maybe? if needed?

  storage :file

  #//TODO - Add images into the same folder. model.id can't be accessed in a custom process.

  def store_dir
    "#{Rails.root}/public/uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end
  def cache_dir
    "#{Rails.root}/public/uploads/#{model.class.to_s.underscore}/#{mounted_as}/tmp"
  end

  def extension_white_list
    %w(pdf)
  end

  def filename
    super.chomp(File.extname(super)) + '.png'
  end

  version :pages do
    process :create_pages
    process convert: 'png'
  end

  process convert: 'png'

  version :thumb do
    process :cover
    process :resize_to_fill => [200, 200, Magick::CenterGravity]
    process convert: 'png'
  end

  def cover
    manipulate! do |frame, index|
      frame if index.zero?
    end
  end

  def create_pages
    manipulate! do |frame, index|
      frame.write("#{store_dir}/#{index}.png")
    end
  end

end 
```

PDF 将被转换为每一页的图像。但它不会识别 model.id 并将其存储在该文件夹中。相反，它将存储在上面的目录中。我已经尝试添加以下内容来强制制作文件夹，但通过一点测试似乎不知道model.id？

**试图制作目录**

```
def create_pages
    Dir.mkdir(store_dir) unless File.exists?(store_dir)
    manipulate! do |frame, index|
      frame.write("#{store_dir}/#{index}.png")
    end
  end 
```

非常感谢您的帮助，我已经坚持了一段时间，并且因为沮丧而不得不离开它几天。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:31:23.527

这很可能是因为您在保存`frame.write`模型本身之前保存图像，因此也在分配 ID 之前。

看看这个答案以获得潜在的解决方案：[Carrierwave : error with model.id in the store_path](https://stackoverflow.com/questions/7446197/carrierwave-error-with-model-id-in-the-store-path#answer-7449740)

# c# - LINQ 表达式不遵守 xml 边界

> ID：15436250
> 
> 赞同：1
> 
> 时间：2013-03-15T15:32:16.203
> 
> 标签：c#, xml, linq

也许这个标题令人困惑。

使用 linq 读取 xml 时遇到一个非常奇怪的问题。

我的 XML 是这样的：

```
<Result>
  <Hotels>    
    <Hotel>
      <Documents>
        <Image>
          <Url>http://www.someUrlToImage1</Url>
        </Image>
        <Image>
          <Url>http://www.someUrlToImage2</Url>
        </Image>
      </Documents>
      <Room>
        <Documents>
          <Image>
            <Url>http://www.someUrlToImage3</Url>
          </Image>
          <Image>
            <Url>http://www.someUrlToImage4</Url>
          </Image>
        </Documents>
       </Room>
    </Hotel>
  <Hotels>
<Result> 
```

如果我想获得关于酒店的两张图片，我会获得所有 4 张图片...：

```
Hotel temp = (from x in  doc.Descendants("Result").Descendants("Hotels").Descendants("Hotel")
             select new Hotel()

             HotelImages= new Collection<string>(
             x.Descendants("Documents").SelectMany(
               documents => documents.Descendants("Images").Select(
                document => (string)document.Descendants("URL").FirstOrDefault() ?? "")).ToList())

             }).First(); 
```

我希望有人在我之前遇到过这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:36:42.727

`Descendants`*返回父元素内任意位置*的所有匹配元素，而不仅仅是其*下方*的那些。`x`有两个后代`Documents`标签，您将从它们中获取图像。

尝试使用`Elements`而不是`Descendants`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:39:01.183

`Descendants()`选择当前节点的后代，而不仅仅是直接子节点，因此`x.Descendants("Documents")`选择两个`Documents`节点，而不仅仅是第一个。

这怎么样：

```
Hotel temp = (from x in  doc.Descendants("Hotel")
              select new Hotel()
              {
                HotelImages = new Collection<string>(
                                  x.Elements("Documents")
                                   .Descendants("Images")
                                   .Where(i => (string)i.Attribute("Class") == "jpg")
                                   .Select(img => (string)img.Element("URL") ?? "")
                                   .ToList()
                              )
              }).First(); 
```

# mysql - Ruby on Rails 中的错误时区转换

> ID：15436253
> 
> 赞同：4
> 
> 时间：2013-03-15T15:32:21.470
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我真的被这个卡住了。基本上我想导入一个 Excel 文件。所以我最终使用了来自 Rails 的 CSV 导入。

```
CSV.open('[path-to-file]', 'r').each do |row| 
```

实际上导入工作正常，但除其他外，Excel/CSV 文件中有一个日期列，数据库中有一个日期时间列。我在 CSV.open-Method 中做了以下操作：

```
date = DateTime.strptime(row[0], "%Y-%m-%d").strftime("%Y-%m-%d")
start_datetime = DateTime.parse(date + " 6:30:00").utc
Event.create(:event_start => start_datetime) 
```

这将在数​​据库中创建具有正确日期时间的正确事件。看起来像：

```
2008-11-18 09:30:00 
```

**我的问题：**

如果我选择在 application.rb 中注释该行

```
config.time_zone = 'Berlin' 
```

Rails 使用 UTC 显示我的事件，一切看起来都像数据库的内容。

如果我选择取消注释 config.time_zone 部分（我必须这样做），Rails 应该增加 1 小时（柏林：UTC/GMT +1 小时）。实际上它确实增加了至少 1 小时，但有时增加了 2 小时。没有连接（对我来说），在这种情况下 Rails 选择增加 1 或 2 小时。

如果我在普通 Websurface 上（在浏览器中）创建一个事件，一切正常（减去 1 小时以将 UTC 保存在 DB 中，并添加 1 小时以显示在正确的时区中）。

如果您对我有一些提示，我将如何尝试本地化此问题，这将非常有帮助。

我的系统：Ruby 1.9.3p194 上的 Rails 3.2.3，Suse Enterprise 上的 MySQL

**例子：**

CSV：

```
2012-01-08
2012-02-09
2012-03-10
2012-04-11
2012-05-12
2012-06-13
2012-07-14
2012-08-15
2012-09-16
2012-10-17
2012-11-18
2012-12-19 
```

数据库（MySQL）：

```
| id | event_start
+----+---------------------    
|  1 | 2012-01-08 06:30:00
|  2 | 2012-02-09 06:30:00
|  3 | 2012-03-10 06:30:00
|  4 | 2012-04-11 06:30:00
|  5 | 2012-05-12 06:30:00
|  6 | 2012-06-13 06:30:00
|  7 | 2012-07-14 06:30:00
|  8 | 2012-08-15 06:30:00
|  9 | 2012-09-16 06:30:00
| 10 | 2012-10-17 06:30:00
| 11 | 2012-11-18 06:30:00
| 12 | 2012-12-19 06:30:00 
```

查看（浏览器） - 这里我只使用了一个 .order("event_start ASC")

```
events.each do |ev|
ev.event_start

2012-12-19 07:30:00 +0100
2012-11-18 07:30:00 +0100
2012-10-17 08:30:00 +0200
2012-09-16 08:30:00 +0200
2012-08-15 08:30:00 +0200
2012-07-14 08:30:00 +0200
2012-06-13 08:30:00 +0200
2012-05-12 08:30:00 +0200
2012-14-11 08:30:00 +0200
2012-03-10 07:30:00 +0100
2012-02-09 07:30:00 +0100
2012-01-08 07:30:00 +0100 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:05:03.873

我很确定您看到的差异是因为夏令时 (DST)。

请注意，夏季的所有日期都是 +0200，而所有其他日期都是 +0100。那是你没有注意到的联系。

这是因为柏林是 DST 的时区。您导入的日期都是 UTC，它们作为 UTC 写入数据库，但 Rails（正确）对它们的解释不同，具体取决于它们是否在夏天。

这就是为什么你没有得到恒定的 1 小时差异。

如果您希望时间为当地时间 9:30，无论是夏季还是冬季，请尝试使用

```
Time.zone.parse("#{date} 09:30:00") 
```

在您的导入代码中。

有关详细信息，请参阅[ActiveSupport::TimeWithZone](http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html)。

# regex - 下划线分隔的两个正整数的正则表达式

> ID：15436258
> 
> 赞同：-1
> 
> 时间：2013-03-15T15:32:37.640
> 
> 标签：regex

我需要一个正则表达式来匹配一个必须包含两个正整数的字符串，这些正整数由一个反分线分隔。

例子：

12345_678 好
12345-678 坏
12345_678a 坏

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:35:55.853

`^[0-9]+_[0-9]+$`会做的。

**解释**

*   `^`字符串的开头
*   `[0-9]+`一位或多位数字
*   `_`下划线
*   `[0-9]+`一位或多位数字
*   `$`字符串的结尾

# svn - Tortoise SVN 更新和提交不起作用

> ID：15436259
> 
> 赞同：0
> 
> 时间：2013-03-15T15:32:38.103
> 
> 标签：svn, tortoisesvn, visualsvn-server, svn-update, svncommit

我最近遇到了 Tortoise SVN 的问题。我无法更新和提交任何东西。

```
Tortoise SVN version: 1.6.16 Build 21511 - 64 bit
OS: Windows 8 server 
```

我们使用 VisualSVN 服务器作为 repo。 ![在此处输入图像描述](../Images/87943abd500965280a62a51365f28f28.png)

每当我尝试更新时，我都会看到以下屏幕，实际上它并没有更新任何内容，并且会保持这样的状态数小时。同样，当我尝试提交任何内容时，我会收到以下错误消息 ![在此处输入图像描述](../Images/f01eaabc6e16d3af8ebe06c41f2b47a4.png)

它只发生在我的电脑上。其他开发人员正在运行相同的操作系统，相同的`TortoiseSVN`版本，他们可以更新并提交到 . `repository`，所以我认为存储库本身没有任何问题。

我曾尝试卸载和安装相同版本的 Tortoise，但这不起作用。

我还尝试更新到修订版 -> 选择“Head”选项，然后在“Update Depth”下拉列表中选择“Fully Recursive”。

我不喜欢更改为最新版本，`TortoiseSVN`因为我想保持与其他开发人员在这里使用的相同版本的 Tortoise。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T14:45:07.767

实际上，经过数小时的故障排除后，我发现问题不在于 SVN 或我的帐户，而在于其中一个文件。网站与地下天气集成，所有代码和地下天气数据也都签入到 SVN。地下天气有一些临时文件导致了这个问题，并没有让我使用 TortoiseSVN。感谢您查看此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:25:22.073

我认为您将其`http://`用作 Subversion 存储库？

其他人可以提交对存储库的更改吗？如果是这样，则可能是您的用户 ID 有问题。在 Subversion 中提交更改时，您是否设置了用户名和密码？您的用户是否具有对 Subversion 存储库的提交访问权限？

在服务器端，用户可以拥有允许他们签出的读取权限、允许他们签入文件和进行更改的读写权限，或者根本没有访问权限。您可能需要验证您的用户权限。

如果没有人可以签入文件，则可能是存储库本身中的文件的权限问题。但是，如果您使用的是 VisualSVN，并且您在 VisualSVN 中创建了存储库，那么这应该不是问题。只要确保服务器运行的任何进程都具有对存储库本身的物理文件的读/写访问权限。

另一个问题可能是由于各种问题而禁止提交的预提交挂钩。但是，如果是这种情况，它通常会报告预提交挂钩的*退出代码。*我在您的错误消息中没有看到这一点，所以我认为这不是问题所在。您是 Subversion 管理员吗？如果没有，您必须与 SVN 管理员交谈以查看您的帐户发生了什么。

# c# - DataGrid View Checkbox 未选中为选中状态

> ID：15436264
> 
> 赞同：1
> 
> 时间：2013-03-15T15:32:45.537
> 
> 标签：c#, winforms

我在列索引 12 中有一个带有复选框的 datagridview。工具条上有一个按钮，它需要迭代这些检查的行并删除项目。

我的代码没有检测到单元格已被检查（bChecked 变量始终为假），它在调试时的值为假。

```
foreach (DataGridViewRow row in dataGridView1.Rows)
{
    DataGridViewCheckBoxCell oCell = row.Cells[12] as DataGridViewCheckBoxCell;
    bool bChecked = (null != oCell && null != oCell.Value && true == (bool)oCell.Value);

    if (bChecked == true)
    {
        //Do something
    }
} 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:38:06.760

使用 DataGridViewCheckBoxCell 的 CellValueChanged 事件不是更好吗？每次更改复选框单元格的值时都会引发此事件。

请参阅备注部分下的[DataGridViewCell.Value 。](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcell.value.aspx)

订阅该事件将为您提供一种检测单元格是否被选中的可靠方法。

# json - 无法升级到 Jackson 2.1.4，Jersey 忽略了注释

> ID：15436268
> 
> 赞同：4
> 
> 时间：2013-03-15T15:32:57.460
> 
> 标签：json, rest, jakarta-ee, jersey, jackson

***简短版：***

我正在使用 Jersey 1.17 和 Jackson 2.1.4，但 Jersey 忽略了我使用的每一个 Jackson-annotation。为什么！？有没有人遇到过同样的问题？

***长版：***

我有一个使用 Jersey 1.17 和 Jackson 1.9.2 的 RESTful Web 服务，我正在使用**@JsonManagedReference**和**@JsonBackReference**注释来解决双向关系问题，一切正常。

前几天我看到了包含**@JsonIdentityInfo**注释的 Jackson 2.1.4 版本，这似乎是解决我的问题的好方法，所以我将 jar 文件更改为 Jackson 2.1.4。然而，有希望的**@JsonIdentityInfo**注释不起作用，Jersey 完全忽略了它，经过一些调试和更改代码后，我发现即使是以前的**@JsonManagedReference**和**@JsonBackReference**注释也被 Jersey 忽略了。因此，Jersey 似乎完全忽略了 Jackson 2.1.4 注释。为什么！？有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:29:34.043

如[http://wiki.fasterxml.com/JacksonAnnotations](http://wiki.fasterxml.com/JacksonAnnotations)所述：

> 重要提示：Jackson 1.x 和 2.x 注释存在于不同的 Java 和 Maven 包中：请参阅 Jackson 2.0 以获得完整说明：
> 
> *   1.x 注释在 Java 包`org.codehaus.jackson.annotate`中，在 Jackson 核心 jar 中
> *   2.x 注释在 Java 包`com.fasterxml.jackson.annotation`中，在“jackson-databind”jar 中。

所以可能是一个“进口相关”的问题。另一个原因（如@HiJon89 所述）是使用正确的 JacksonJsonProvider 版本。对于 2.x 版，它会在插入“jackson-jaxrs-json-provider”和“jersey-core”时自动注册。

我目前对 jackson 2.1.4 的工作更新（来自 1.9.2 jersey 所需的依赖项）是：

*   移除 jersey-json 依赖
*   添加 jersey-core 和 jackson-jaxrs-json-provider

    ```
    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-core</artifactId>
        <version>${jersey.version}</version>
    </dependency>
    <dependency>
        <groupId>com.fasterxml.jackson.jaxrs</groupId>
        <artifactId>jackson-jaxrs-json-provider</artifactId>
        <version>${jackson-jaxrs-json-provider.version}</version>
    </dependency> 
    ```

后一个 jar 有一个文件“META-INF/services/javax.ws.rs.ext.MessageBodyWriter”，它告诉 jersey 哪个类充当提供者。

因此，除了仔细检查您的类路径中是否不再有旧的罐子外，我没有其他建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T08:56:59.540

在我的情况下，由于 proguard，jackson 注释被忽略了

# iphone - Iphone 不能很好地读取重定向域上的分辨率目标和图标，但它可以在原始子文件夹中使用？

> ID：15436270
> 
> 赞同：-1
> 
> 时间：2013-03-15T15:33:01.700
> 
> 标签：iphone, css, dns, responsive-design, media-queries

针对手机分辨率的目标发生了一些奇怪的事情，至少在我的 iphone 4s 上：

我有这个域 www.marialluisaperez.es 重定向到 www.pauperez.es/marialluisaperez/ （所以我只为 2 个域支付一个托管服务..）。

直到现在，当我应用媒体查询以使网站适应小屏幕时，我从未遇到过问题。问题是，如果我为 www.marialluisaperez.es 中的任何页面调整导航器的大小，它会正确更改，但是当我在 iphone 中查看它时，就好像 iphone 无法识别此查询。此外，如果我将网页保存在我的 iphone 中，它不会读取我指定的图标（等）

这更奇怪，因为相反，如果我用我的 iphone 直接访问 www.pauperez.es/marialluisaperez/，那么它就可以工作了！它为该屏幕分辨率加载正确的 CSS 标签，如果我保存它，它会识别准备好的图标。

那么这里发生了什么？奇怪的是，在笔记本电脑上从来没有问题，而 iphone（没有用其他手机检查过）只有 www.marialluisaperez.es 有问题，而 www.pauperez.es/marialluisaperez/ 没有问题，这就是该域链接到...

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:42:28.397

`DOCTYPE`您在主站点上没有设置。

# sql-server - 如何在 SQL 中将字段转换为显示日期和时间

> ID：15436273
> 
> 赞同：1
> 
> 时间：2013-03-15T15:33:06.303
> 
> 标签：sql-server, tsql

我的专栏看起来像这样：

```
Jan  8 2013  2:47PM 
```

但我想转换并显示如下内容：

```
01/08/2013 2:47 PM 
```

我尝试过这样的事情，但它没有显示时间：

```
select convert (date, Date,101)as MyDate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:42:27.987

如果您的原始字段是 varchar: 您可以执行以下操作：

```
select CONVERT(varchar(10), CAST('Jan  8 2013  2:47PM' AS DATETIME), 101) + ' ' + RIGHT(CONVERT(VARCHAR, 'Jan  8 2013  2:47PM', 100), 7) 
```

只需将字符串替换为您的字段即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:36:59.450

你可以尝试这样的事情： -

```
 Convert(datetime, '01/08/2013', 103) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:39:17.347

SQL Server 不提供使用单个 CONVERT 语句执行此操作的方法，但您可以使用以下方法来实现目标：

```
SELECT CONVERT(VARCHAR, date, 101) + RIGHT(CONVERT(VARCHAR, date, 100), 8) 
```

# python - 在 Python tkinter 画布上删除行

> ID：15436276
> 
> 赞同：4
> 
> 时间：2013-03-15T15:33:12.407
> 
> 标签：python, tkinter, tkinter-canvas

单击鼠标右键时，我试图让用户删除行。我已将按钮 3 按下事件绑定到画布，并将其传递给以下函数

```
def eraseItem(self,event):
    objectToBeDeleted = self.workspace.find_closest(event.x, event.y, halo = 5)
if objectToBeDeleted in self.dictID:
    del self.dictID[objectToBeDeleted]
    self.workspace.delete(objectToBeDeleted) 
```

但是，当我右键单击这些行时，什么也没有发生。我已经单独测试了字典并且行对象被正确存储。

这是我的绑定：

```
self.workspace.bind("<Button-3>", self.eraseItem) 
```

每个请求来自字典初始化的一些其他片段

```
def __init__(self, parent):
    self.dictID = {}
... Some irrelevant code omitted 
```

对于线条创建，我有两个处理程序，一个 on click 和一个 on release，它在两个坐标之间绘制线条

```
def onLineClick(self, event):
  self.coords = (event.x, event.y)

def onLineRelease(self, event):
  currentLine = self.workspace.create_line(self.coords[0], self.coords[1], event.x, event.y, width = 2,     capstyle = ROUND)
  self.dictID[currentLine] = self.workspace.coords(currentLine)
  print(self.dictID.keys()) #For testing dictionary population
  print(self.dictID.values()) #For testing dictionary population 
```

字典在这里打印得很好。请注意，这些都是一个类中的所有功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:11:19.047

我已经尝试根据您的代码制作一个工作示例，现在我知道问题出在哪里：`find_closest`如果找到一个项目，则返回一个包含一个元素的元组，因此当您检查它是否在字典中时，首先您必须检索元组的第一个元素。

```
def eraseItem(self,event):
    tuple_objects = self.workspace.find_closest(event.x, event.y, halo = 5)
    if len(tuple_objects) > 0 and tuple_objects[0] in self.dictID:
        objectToBeDeleted = tuple_objects[0]
        del self.dictID[objectToBeDeleted]
        self.workspace.delete(objectToBeDeleted) 
```

# android - Eclipse（模拟器Android平板电脑）即使文件存在也找不到文件

> ID：15436288
> 
> 赞同：0
> 
> 时间：2013-03-15T15:33:33.700
> 
> 标签：android, eclipse-rcp, simulator, file-not-found

我正在尝试读取文件。我不介意这个位置，所以我尝试了各种位置和方法来做到这一点：

```
File file = new File("DFirstPdf.pdf");
File file = new File("C:/DFirstPdf.pdf");
File file = new File("C:\\DFirstPdf.pdf"); 
```

但我总是得到那个文件不存在。我正在使用 Eclipse 和模拟器工作，但我没有更多的想法。

我想做的是： if (file.exists()) { Uri path = Uri.fromFile(file); Intent 意图 = new Intent(Intent.ACTION_VIEW); intent.setDataAndType（路径，“应用程序/pdf”）；意图.setFlags（意图.FLAG_ACTIVITY_CLEAR_TOP）；

```
PackageManager pm = getPackageManager();

List<ResolveInfo> activities = pm.queryIntentActivities(intent, 0);

if (activities.size() > 0) 
{
startActivity(intent);
}
else
{
// Do something else here. Maybe pop up a Dialog or Toast
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:36:07.453

您必须使用类加载器来获取资源

PackageManager.class.getClassLoader().getResource("DFirstPdf.pdf");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:35:13.050

模拟器有自己的文件系统。它不会在您的机器上看到文件。它有一个 UNIX 风格的路径，而不是 Windows 风格的路径。

# configuration - 如何在 C++/CLI 中定义用于属性的 System::Decimal 文字？

> ID：15436299
> 
> 赞同：2
> 
> 时间：2013-03-15T15:34:28.543
> 
> 标签：configuration, attributes, c++-cli, decimal, literals

据我所知，定义类型的编译时常量没有文字后缀`System::Decimal`（与 C# 中的 M 后缀相比，即 ie `Decimal d = 100.5M`）。此外，编译器拒绝以下代码：

```
literal System::Decimal myDecimal = 100.5; 
```

如果我无法定义十进制文字，那么如何初始化一个需要小数作为其字段之一的属性？为了说明，请考虑以下代码：

```
using namespace System;

public ref class MyConfigElement : ConfigurationElement
{
public:

    [ConfigurationProperty("Money", DefaultValue = 500.0, IsRequired = false)]
    property Decimal Money { Decimal get(); void set(Decimal value); }
}; 
```

当前值 500.0 在编译为 type 时是无效的，然后它被运行时拒绝，因为它与属性 ( )`double`的类型不匹配。`Decimal`

是否可以正确初始化此属性的默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:37:18.863

试试`DefaultValue = static_cast<Decimal>(500.0)`。

允许在常量表达式中使用 of `static_cast`，只要它不需要调用用户定义的转换函数。

* * *

如果做不到这一点，也许使用一个全局变量，它是一个常量表达式？

```
const Decimal MyConfigElementMoneyDefault = 500.0;

public ref class MyConfigElement : ConfigurationElement
{
public:

    [ConfigurationProperty("Money", DefaultValue = MyConfigElementMoneyDefault, IsRequired = false)]
    property Decimal Money { Decimal get(); void set(Decimal value); }
}; 
```

# java - 组合 getSelectedItem 但然后

> ID：15436300
> 
> 赞同：2
> 
> 时间：2013-03-15T15:34:35.093
> 
> 标签：java, swing

给你一个简单的问题，我输入此代码，我看到组合框和标签，但在选择组合后，标签应该带有图像。这不会发生......我肯定忘记了什么

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ChooseFrame extends JFrame
{
    public ChooseFrame()
    {
        labelLeagueImage = new JLabel("Liga");
        comboLeague = createComboLeague();

        class ChooseListener implements ActionListener
        {
            public void actionPerformed(ActionEvent event)
            {
                String league = (String)comboLeague.getSelectedItem();

                if (league.equals("Italia - Serie A"))
                {
                    ImageIcon icon = new ImageIcon("Italia - Serie A.png");
                    labelLeagueImage.setIcon(icon);  
                }

            }
        }

        listener = new ChooseListener();
        leaguePanel = new JPanel();
        leaguePanel.add(comboLeague);
        leaguePanel.add(labelLeagueImage);
        add(leaguePanel);
        setSize(FRAME_WIDTH, FRAME_HEIGHT);
    }

    public JComboBox createComboLeague()
    {
        JComboBox combo = new JComboBox();
        combo.addItem("Select a league");
        combo.addItem("Italia - Serie A");
        combo.addItem("Italia - Serie B");
        combo.addActionListener(listener);
        return combo;
    }

    private JPanel leaguePanel;
    private JComboBox comboLeague;
    private JLabel labelLeagueImage;
    private ActionListener listener;

    private static final int FRAME_WIDTH = 300;
    private static final int FRAME_HEIGHT = 600;            

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:39:08.840

在您创建组合框并分配侦听器时，在 中`createComboLeague()`，侦听器仍然为空。仅在调用该`createComboLeague()`方法后才对其进行初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:51:04.067

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class ChooseFrame extends JFrame
{
     private JPanel leaguePanel;
        private JComboBox comboLeague;
        private JLabel labelLeagueImage;
        private ActionListener listener;

        private static final int FRAME_WIDTH = 300;
        private static final int FRAME_HEIGHT = 600;  
    public ChooseFrame()
    {
        labelLeagueImage = new JLabel("Liga");
          comboLeague = createComboLeague();

       // listener = new ChooseListener();
        leaguePanel = new JPanel();
        leaguePanel.add(comboLeague);
        leaguePanel.add(labelLeagueImage);
        add(leaguePanel);
        setSize(FRAME_WIDTH, FRAME_HEIGHT);
    }

    public JComboBox createComboLeague()
    {
        JComboBox combo = new JComboBox();
        combo.addItem("Select a league");
        combo.addItem("Italia - Serie A");
        combo.addItem("Italia - Serie B");
        combo.addActionListener(listener);
        combo.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent event) {
                // TODO Auto-generated method stub
                String league = (String)comboLeague.getSelectedItem();

                if (league.equals("Italia - Serie A"))
                {
                    ImageIcon icon = new ImageIcon("Italia - Serie A.png");
                    labelLeagueImage.setIcon(icon);  
                }

            }
        });
        return combo;
    }

    public static void main(String[] args) {
        ChooseFrame cs=new ChooseFrame();
        cs.setVisible(true);
    }

} 
```

# c# - 使用新的实体框架 DbContext 处理 IQueryable

> ID：15436311
> 
> 赞同：1
> 
> 时间：2013-03-15T15:35:00.090
> 
> 标签：c#, entity-framework, c#-4.0, parallel-processing

我一直在努力改进使用 EF 5 构建的库。我想使用 Parallel 库来提高性能。我知道 DbContext 不是线程安全的，并且对于每个事务都需要创建一个新的 DbContext。

我相信我遇到的问题是如何在每次迭代我的 IQueryable 时生成一个新的上下文。这是我的实现的截断方法：

```
 public virtual void ProcessAttachments(IQueryable<File> results)
    {            
        var uniqueOrderKeys = results.Select(r => r.ForeignKey).Distinct();
        //process each order
        Parallel.ForEach(uniqueOrderKeys, key =>
        {                                                                                                                                                         
            var key1 = key;
            var resultsForKey = results.Where(result => result.ForeignKey == key1);

            //process File objects for the order
            Parallel.ForEach(resultsForKey, result =>
            {                                                                                              
                string orderNum;
                using (var da = new DataAccess()) //DataAccess creates the DbContext and is implementing IDisposable
                {
                    orderNum = da.GetOrderNumberByOrderKey(key);
                }
            });
        });
    } 
```

有没有办法指定一个新的 DbContext 用于循环和检索我的 IQueryable 结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-27T18:07:58.083

我只是把它放在一起，我认为它可以帮助你：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using WhereverYourObjectContextLives;

/// <summary>
/// Provides an iterator pattern over a collection such that the results may be processed in parallel.
/// </summary>
public abstract class ParallelSkipTakeIterator <T>
{
    private int currentIndex = 0;
    private int batchSize;

    private Expression<Func<T, int>> orderBy;

    private ParallelQuery<T> currentBatch;

    /// <summary>
    /// Build the iterator, specifying an Order By function, and optionally a <code>batchSize</code>.
    /// </summary>
    /// <param name="orderBy">Function which selects the id to sort by</param>
    /// <param name="batchSize">number of rows to return at once - defaults to 1000</param>
    /// <remarks>
    /// <code>batchSize</code> balances overhead with cost of parallelizing and instantiating
    /// new database contexts.  This should be scaled based on observed performance.
    /// </remarks>
    public ParallelSkipTakeIterator(Expression<Func<T, int>> orderBy, int batchSize = 1000)
    {
        this.batchSize = batchSize;
        this.orderBy = orderBy;
    }

    /// <summary>
    /// Accesses the materialized result of the most recent iteration (execution of the query).
    /// </summary>
    public ParallelQuery<T> CurrentBatch
    {
        get
        {
            if (this.currentBatch == null)
            {
                throw new InvalidOperationException("Must call HasNext at least once before accessing the CurrentBatch.");
            }
            return this.currentBatch;
        }
    }

    /// <summary>
    /// Does the current iterator have another batch of data to process?
    /// </summary>
    /// <returns>true if more data can be accessed via <code>CurrentBatch</code></returns>
    /// <remarks>
    /// Creates a new database context, issues a query, and places a materialized collection in <code>CurrentBatch</code>.
    /// Context is disposed once the query is issued.
    /// Materialized collection is specified by <code>BuildIQueryable</code>.  Use of any associated navigation properties
    /// must be accounted for by using the appropriate <code>.Include</code> operator where the query is
    /// built in <code>BuildIQueryable</code>.
    /// </remarks>
    public bool HasNext()
    {
        using (YourObjectContextHere db = new YourObjectContextHere())
        {

            this.currentBatch = this.BuildIQueryable(db)
                .OrderBy(this.orderBy)
                .Skip(this.currentIndex)
                .Take(this.batchSize)
                .ToList()
                .AsParallel();

            this.currentIndex += this.batchSize;
            return currentBatch.Count() > 0;
        }            
    }

    /// <summary>
    /// Given a Database Context, builds a query which can be executed in batches.
    /// </summary>
    /// <param name="db">context on which to build and execute the query</param>
    /// <returns>a query which will be executed and materialized</returns>
    /// <remarks>Context will be disposed as soon a HasNext has been executed.</remarks>
    protected abstract IQueryable<T> BuildIQueryable(YourObjectContextHere db);
} 
```

然后你可以继承这个东西并实现`BuildIQueryable`如下：

```
 class MyObjectIterator: ParallelSkipTakeIterator<MyObject>
    {
        private List<int> instanceIds;

        public PropertyRecordMatchFileIterator(List<int> someExtraInfoNeededByQuery)
            : base(f => f.InstanceId)
        {
            this.instanceIds = someExtraInfoNeededByQuery;
        }

        protected override IQueryable<MyObject> BuildIQueryable(YourObjectContextHere db)
        {
            IQueryable<MyObject> myObjects= db.SomeCollection.Select(x => this.instanceIds.Contains(x).Include("SomethingImportant");

            return myObjects;
        }
    } 
```

最后，您可以像这样遍历数据集：

```
 MyObjectIterator myIterator = new MyObjectIterator(someExtraInfoNeededByQuery);
        while (myIterator.HasNext())
        {
            ParallelQuery<MyObject> query = myIterator.CurrentBatch;
            query.ForAll(item =>
                doSomethingCool(item));
        } 
```

# java - 将 Maven3 项目从一个 Eclipse 实例导出到另一个

> ID：15436312
> 
> 赞同：1
> 
> 时间：2013-03-15T15:35:00.093
> 
> 标签：java, eclipse, maven-3, m2eclipse

我在 Eclipse STS (maven-archetype-webapp) 中创建了一个 Maven3 Web 项目。

现在我想在两台机器之间进行该项目，只需从 eclipse 中导出它并将其导入另一台机器上的 eclipse 中。
我的目标是在另一台机器上的 Eclipse IDE 中完美地克隆正在开发的项目及其所有源代码，以便我可以继续工作。

对于普通的 Java EE Web 应用程序，我总是导入和导出一个战争文件。在 maven 项目中，我丢失了 pom 文件和我的依赖项。
从命令行使用“maven 包”，我仍然会松开 pom，并在战争中将依赖项作为罐子携带。我更喜欢反过来，保留 pom 文件并将新的依赖项下载到目标机器上的本地存储库中。
另一方面，只需将项目的工作区目录复制到目标机器，我就会遇到 maven 依赖问题。

当然，我也许可以通过在 pom 文件中精心配置打包参数来调整所需的行为，但必须有比这更直接的方法......

那么，将eclipse中的maven3项目克隆到另一个eclipse实例的最简单方法是什么，最好是从IDE中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:48:57.197

我想，最安全和最简单的方法是创建项目的存档文件（tar，zip ...）。

但是...为什么不使用 SCM 来保证您的资源安全？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T02:28:58.407

正如 BigMike 所说，最简单的解决方案是将项目文件夹复制到 USB 闪存驱动器，将其复制到目标计算机上，然后通过*Import Existing Projects into Workspace*将其导入本地 Eclipse 工作区。但是将大量小文件复制到 USB 闪存驱动器（或其他任何地方）比复制一个大 ZIP 文件需要更多时间。

并且 Eclipse 已经具有该功能:-)

要打包项目，请右键单击它（项目根目录）并*导出...* >*常规*>*存档文件*>*下一步*>指定文件名并单击*完成*。

在接收端执行*File* > *Import...* > *General* > *Archive File* > *Next* > 选择文件并单击*Finish*。

# c - 简单可变 C 函数参数错误

> ID：15436314
> 
> 赞同：2
> 
> 时间：2013-03-15T15:35:05.803
> 
> 标签：c, variadic-functions

我有一个非常简单的代码。此代码在 Linux 机器上运行。但是当我使用交叉编译构建并在嵌入式硬件参数上运行时，可变参数函数的值是错误的。是关于编译（交叉编译）吗？所有应用程序运行良好，但可变参数功能不起作用。

我的示例代码如下。foo 和 formatString 函数都工作错误。

```
void foo(char *fmt, ...)
{
    va_list ap;
    int d;
    char c, *s;

    va_start(ap, fmt);
    while (*fmt)
    {
        switch (*fmt++) 
        {
            case 's' :
                s = va_arg(ap, char *);
                printf("string %s\n", s);
                break;
            case 'd' : 
                d = va_arg(ap, int);
                printf("int %d\n", d);
                break;
            case 'c':               
                c = (char) va_arg(ap, int);
                printf("char %c\n", c);
                break;
       }
   va_end(ap);
}

void formatString(char* format, ...)
{
    va_list args;
    char buffer[100];

    va_start(args, format);
    sprintf(buffer, format, args);
    va_end(args);

    printf((char*)buffer);
}

int main(int argc, char **argv)
{
    printf("\nProgram Started");

    foo("MSG : %d", 10);

    formatString("MSG : %d", 10);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T15:41:03.367

您的呼叫`sprintf`不正确。如果您想将 a 传递给`va_list`您`sprintf`应该使用该`vsprintf`函数。

此外，为了更安全一点，请考虑使用`snprintf`(`vsnprintf`在这种情况下) 而不是`sprintf`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:57:24.257

您的 formatString 函数不正确：

```
void formatString(char* format, ...)
{
    va_list args;
    char buffer[100];

    va_start(args, format);
    vsprintf(buffer, format, args);
    va_end(args);

    printf("%s\n", (char*)buffer);
} 
```

您还应该考虑 vsnprintf，但我猜它仅用于测试目的。

# python - 递归遍历字典

> ID：15436318
> 
> 赞同：4
> 
> 时间：2013-03-15T15:35:14.097
> 
> 标签：python, recursion, dictionary, python-2.7

我需要递归遍历字典并**记住以前的键**。

让我解释：

```
dic = {u'resources': {u'info': {u'load': (u'37', u'17')}}, u'peak': {u'load': (u'0', u'1')}} 
```

元素始终是一个值或字典，直到它达到一个值。我想像这样打印上面的`dic`内容：（省略下面的xxx，它最终应该是两个值的差异）

```
resources info load 37 17 xxx
resources peak load 0 1 xxx 
```

这是我到目前为止的代码：

```
def convertToTable(var):
    if isinstance(var, tuple):
        if len(var) != 2:
            return str(var)

        v1, v2 = var
        try:
            v1 = float(v1)
            v2 = float(v2)
        except ValueError:
            pass
        if type(v1) != type(v2):
            return '\t%s\t%s\n' % (v1, v2)
        elif isinstance(v1, int) or isinstance(v1, float):
            sign = '+' if v2 - v1 > 0 else ''
            return '\t%s\t%s\t%s%s\n' % (v1, v2, sign, v2 - v1)
        elif isinstance(v1, list):
            ret = ''
            for i in range(max(len(v1), len(v2))):
                v1v = v1[i] if i < len(v1) else ''
                v2v = v2[i] if i < len(v2) else ''
                ret += '\t%s, %s\n' % (v1v, v2v)
            return ret
        else:
            return '\t%s\t%s\n' % (v1, v2)
    elif isinstance(var, dict):
        ret = ''
        for key, value in var.iteritems():
            # fix this crap, it's not printing all recursive levels of keys!
            ret += '%s %s' % (key, convertToTable(value))
        return ret
    else:
        return '%s\n' % (var) 
```

我不知道如何再次将以前的键递归地传递给函数！要么我得到额外的钥匙打印，要么什么都没有！（请不要建议我应该使用`json.dumps`它，因为它并不能真正满足我的需要！）我希望有人可以检查我的解决方案并指出其中的缺陷！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:24:15.120

我不确定您的代码有什么问题，但这可能会满足您的要求：

```
def iteritems_recursive(d):
  for k,v in d.iteritems():
    if isinstance(v, dict):
      for k1,v1 in iteritems_recursive(v):
        yield (k,)+k1, v1
    else:
      yield (k,),v

dic = {u'resources': {u'info': {u'load': (u'37', u'17')}, u'peak': {u'load': (u'0', u'1')}}}

for p,v in iteritems_recursive(dic):
  print p, "->", v 
```

`iteritems_recursive`遍历传入的字典，并返回一个`(path, value)`元组。`path`本身就是一个元组，它描述了到达该项目的键。

上面的代码打印：

```
(u'resources', u'info', u'load') -> (u'37', u'17')
(u'resources', u'peak', u'load') -> (u'0', u'1') 
```

如果您想漂亮地打印表格，请将上面的 for 循环替换为：

```
for p,v in iteritems_recursive(dic):
  diff = float(v[0]) - float(v[1])
  p = ''.join('{:10}'.format(w) for w in p)
  v = ''.join('{:5}'.format(f) for f in v)
  print p, v, diff 
```

哪个打印：

```
resources info      load       37   17    20.0
resources peak      load       0    1     -1.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:24:34.030

```
def convertToTable(inp, history=[]):
    for key, value in inp.iteritems():
        history.append(key)
        if type(value) == dict:
            convertToTable(value, history)
        else:
            print '{} {} {}'.format(' -> '.join(history), value[0], value[1])
        history.pop()

dic = {'peak': {'load': ('0', '1'), 'unload': ('2', '3')}, 'resources': {'info': {'loadxx': ('37', '17')}}}
convertToTable(dic)

# peak -> load 0 1
# peak -> unload 2 3
# resources -> info -> loadxx 37 17 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T16:26:22.367

我有两个解决方案，第一个将所有键的名称带到各个级别，并在返回堆栈之前将它们打印在底部。

第二个在下降的过程中打印它们，从而避免必须“记住”级别

```
import sys

dic = {u'resources':
            {u'info':
                {u'load': (u'37', u'17')}
            },
       u'peak':
            {u'load': (u'0', u'1')}
      }

def racecar(goomba, levels=None):
    if levels == None:
        levels = []
    for key in goomba:
        if type(goomba[key]) is dict:
            levels.append(key)
            levels = racecar(goomba[key], levels)
        else:
            levels.append(key)
            for name in levels:
                sys.stdout.write(name + ' ')
            for val in goomba[key]:
                sys.stdout.write(val + ' ')
            sys.stdout.write('xxx\n')
            return []

def racecar2(goomba):
    for key in goomba:
        sys.stdout.write(key + ' ')
        if type(goomba[key]) is dict:
            racecar(goomba[key])
        else:
            for val in goomba[key]:
                sys.stdout.write(val + ' ')
            sys.stdout.write('xxx\n')

racecar(dic)
racecar2(dic) 
```

返回：

```
peak load 0 1 xxx
resources info load 37 17 xxx 
```

# android - OpenGL 将纹理传递到下一次渲染

> ID：15436320
> 
> 赞同：0
> 
> 时间：2013-03-15T15:35:19.170
> 
> 标签：android, opengl-es-2.0

我对 OpenGL 很陌生，我正在尝试创建一个 2 通道着色器。基本上，它有两个帧缓冲区和两个着色器程序。它像往常一样运行第一遍，然后我需要获取生成的纹理并将其作为输入传递给第二个着色器。这是怎么做到的？我似乎看不到您如何获取生成的纹理并将其用作下一个纹理的输入？

这是一些代码：此代码假设我已经正确设置了第二个过滤器程序，以及程序中的一些属性和制服

```
@Override
public void onDraw(final int textureId, final FloatBuffer cubeBuffer,final FloatBuffer textureBuffer){
    //this draws the first pass (this is tested and working)
    super.onDraw(textureId, cubeBuffer, textureBuffer);

    //change the program
    GLES20.glUseProgram(secondFilterProgram);

    //clear the old colors
    GLES20.glClearColor(0, 0, 0, 1);
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    GLES20.glActiveTexture(GLES20.GL_TEXTURE3); //change the texture
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, secondFilterOutputTexture[0]);
    GLES20.glUniform1i(secondFilterInputTextureUniform, 3);

    cubeBuffer.position(0);
    GLES20.glVertexAttribPointer(secondFilterPositionAttribute, 2, GLES20.GL_FLOAT, false, 0, cubeBuffer);
    GLES20.glEnableVertexAttribArray(secondFilterPositionAttribute);

    textureBuffer.position(0);
    GLES20.glVertexAttribPointer(secondFilterTextureCoordinateAttribute, 2, GLES20.GL_FLOAT, false, 0, textureBuffer);
    GLES20.glEnableVertexAttribArray(secondFilterTextureCoordinateAttribute); //same as line from init

    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);
    GLES20.glDisableVertexAttribArray(secondFilterPositionAttribute);
    GLES20.glDisableVertexAttribArray(secondFilterTextureCoordinateAttribute);
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, 0);

    GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, 0);

} 
```

我觉得我在这里错过了一块拼图。再说一次，我对 OpenGL 很陌生，所以任何帮助，即使是概念上的，都值得赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:14:50.510

您要实现的称为**渲染到纹理**

A small tutorial how to do this with android can be found here: [http://blog.shayanjaved.com/2011/05/13/android-opengl-es-2-0-render-to-texture/](http://blog.shayanjaved.com/2011/05/13/android-opengl-es-2-0-render-to-texture/)

# ruby-on-rails - 设计 before_save 过滤器不适用

> ID：15436321
> 
> 赞同：0
> 
> 时间：2013-03-15T15:35:19.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

在我的用户注册之前，我需要先通过 api 对他们进行身份验证，以查看他们的信息是否有效。无论如何，我的 validate_api 方法可以正常工作，但我已经对此进行了测试，但我不确定为什么当我尝试使用错误的 api 注册时它仍然可以节省用户。

我把我的方法放在一个控制器中，用一个有效的 api 调用它，它返回 true，然后用错误的 api 调用它，它返回 false。

因此，如果该方法正在工作，它要么被忽略，要么被某些东西覆盖。

我的用户模型

```
class User < ActiveRecord::Base
  attr_accessor :login

    before_save :validate_api

    # Include default devise modules. Others available are:
    # :token_authenticatable, :confirmable,
    # :lockable, :timeoutable and :omniauthable
    devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :authentication_keys => [:login]

    validates :username, :presence => true, :length => { :minimum => 6, :maximum => 255 }
    validates :apiid, :presence => true, :numericality => { :only_integer => true }
    validates :vcode, :presence => true, :length => { :minimum => 20, :maximum => 255 }

    # Setup accessible (or protected) attributes for your model
    attr_accessible :login, :username, :group, :apiid, :vcode, :email, :password, :password_confirmation, :remember_me

    # Check if user is banned before login
    def active_for_authentication?
      super && self.banned == 0
    end

    # Redefine authentication procedure to allow login with username or email
    def self.find_for_database_authentication(warden_conditions)
      conditions = warden_conditions.dup
      if login = conditions.delete(:login).downcase
        #where(conditions).where('$or' => [ {:username => /^#{Regexp.escape(login)}$/i}, {:email => /^#{Regexp.escape(login)}$/i} ]).first
        where(conditions).where("username = '#{login}' OR email = '#{login}'").first
      else
        where(conditions).first
      end
    end

    # Validate API information
    private
    def validate_api

        require 'nokogiri'
        require 'open-uri'

        uri = "https://*******?keyID=#{self.apiid}&vCode=#{self.vcode}"
        xml = Nokogiri::XML(open(uri))

        xml.xpath("//row").each do |row|
            if row['****'].downcase == '****'
                return true
            else
                return false                
            end
        end
    end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:27:27.180

如果 api 检查失败，`before_save :validate_api`您应该使用，而不是使用`validate :check_api`，然后添加错误消息（例如：）。`errors[:apiid] << "must be a valid API id."`

# javascript - 如何在文本框中的字符串之间删除 IE 中的 crlf

> ID：15436323
> 
> 赞同：1
> 
> 时间：2013-03-15T15:35:23.310
> 
> 标签：javascript, html, forms, newline, delimited

我有一个简单的文本框。出于调试目的，我有一个提交按钮。现在，当我在文本框中写一些东西并单击提交按钮时，我正在打印文本框的内容，一切都很好。但是，当我从 excel 文档中复制文本时，如果它们是水平行格式，它可以正常工作，但是当我从垂直列格式复制粘贴内容时，只有第一个字符串显示在文本框中，并且提交仅打印 Internet Explorer 中的第一个文本。它在 Chrome 和 Firefox 中运行良好。当我在 Notepad++ 中复制粘贴垂直字符串时，我看到它们是由 CRLF 确定的。所以我很好奇如何获得 chrome 中的所有内容。在 chrome 中，当我复制粘贴相同的内容时，所有字符串都在文本框中可见，并且打印效果很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:40:54.423

从应用程序复制和粘贴到 Web 浏览器是一罐蠕虫。一些浏览器有一个“粘贴为纯文本”选项，可以去掉特殊的控制字符。IE 似乎没有该选项。Microsoft 声称 CTRL+V 将按原样粘贴，而 Edit->Paste 将粘贴为纯文本。这对我从来没有用过。

tl; dr：在粘贴到 IE 之前，您可以在另一个应用程序中删除它们。

资源：

*   [answers.microsoft.com](http://answers.microsoft.com/en-us/ie/forum/ie8-windows_vista/is-there-a-way-to-paste-plain-text-in-internet/918a9641-905c-e011-8dfc-68b599b31bf5?msgId=7ca7f890-5e5d-e011-8dfc-68b599b31bf5)
*   [drupal.org](http://drupal.org/node/745020)

# c++ - 从 string 到 char[] 的转换如何使它更长？

> ID：15436325
> 
> 赞同：0
> 
> 时间：2013-03-15T15:35:25.583
> 
> 标签：c++, arrays, string

我有一个问题，我无法真正理解它是如何存在的。

我有一堆按时间排序并包含一堆对象的文件。结果应该是每次在每个对象的目录中排序的一个文件。

它工作得很好，但是在我将`Outputstring`a转换为`char[]`要使用`fstream.open()`的地方，数组的字符比字符串多 3 个字符。

```
#include <iostream>
#include <stdio.h>
#include <string.h>
using namespace std;
int main()
{
    string strOutput;
    char *OutputFile;
    short z;

    strOutput = "/home/.../2046001_2013-02-25T0959.txt";
    cout << strOutput << endl;

    OutputFile = new char[strOutput.length()];
    z = 0;
    while (z < strOutput.length())
    {
            OutputFile[z] = strOutput[z];
            z++;
    }

    cout << OutputFile << endl;

    return 0;
} 
```

第一个输出总是正确的，但第二个有时有结尾`.txt60A`，`.txt5.a`或`.txt9.A`。当它发生时，它总是相同的对象和时间，并且每次尝试都会发生。但并非每个对象都这样做。

由于显而易见的原因，我无法在这个最小的代码片段中重现此错误，但我也不想发布整个 390 行代码。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:39:14.807

您在 C 字符串的末尾缺少终止 null 。修理：

```
OutputFile = new char[strOutput.length() + 1]; // notice +1
z = 0;
while (z < strOutput.length())
{
    OutputFile[z] = strOutput[z];
    z++;
}
OutputFile[z] = 0; // add terminating 0 byte 
```

* * *

当然有更好的方法来完成整个事情......你根本不需要复制，只需摆脱`OutputFile`整个循环，并使用里面的 char 数组`std::string`：

```
cout << strOutput.c_str() << endl; 
```

我假设真正的代码需要一个 C 字符串。`std::cout`可以直接打印`std::string`，当然：

```
cout << strOutput << endl; 
```

* * *

如果你真的想创建一个副本，最好只复制`std::string`并存储它，并在需要时使用 c_str-method 获取 C 缓冲区：

```
string OutputFile = strOutput; 
```

* * *

如果您知道确实*需要*从堆分配的原始 char 数组，您应该使用`std::unique_ptr`（或者可能是其他一些 C++ 智能指针类）来包装指针，因此您不需要手动删除并避免内存泄漏，并且还使用标准进行复制的库函数：

```
#include <memory>
#include <cstring> 
```

...

```
unique_ptr<char[]> OutputFile(new char[strOutput.length() + 1];
::strcpy(OutputFile, strOutput.c_str()); // :: means top level namespace 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:39:14.527

Char 数组需要一个额外的空字符或`\0`附加到末尾，否则读取字符串的代码将运行到数组末尾，直到找到一个。

```
OutputFile = new char[strOutput.length() + 1];
z = 0;
while (z < strOutput.length())
{
    OutputFile[z] = strOutput[z];
    z++;
}
OutputFile[z] = '\0'; 
```

如果数组后面的下一个字节恰好为空，它可能会起作用，但这只是巧合。我确定这就是您的代码在第一遍时有效的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:54:55.550

> > 在我将 Outputstring 转换为 char[] 以使用 fstream.open()

你不必那样做。改为执行以下操作：

```
outfile.open(Outputstring.c_str(), std::fstream::out) 
```

当然，如果你有一个兼容 C++11 的编译器，你可以这样做：

```
outfile.open(Outputstring, std::fstream::out) 
```

# azure - Windows Azure 表存储行大小限制小于规定的 1MB

> ID：15436330
> 
> 赞同：5
> 
> 时间：2013-03-15T15:35:44.773
> 
> 标签：azure, azure-table-storage

我使用以下资源对表存储及其大小限制、开销等进行了大量研究：

*   [http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx)
*   [http://msdn.microsoft.com/en-us/library/dd179338.aspx](http://msdn.microsoft.com/en-us/library/dd179338.aspx)

使用这些信息，我编写了一些代码来有效地跨多个属性存储二进制数据，计算任何行和属性开销并保持在 64KB 属性限制和 1MB 行限制内。

不幸的是，它只是行不通。例如，存储大约 0.5MB 会返回 400 Bad Request 说明实体太大 - 我不明白为什么会给出 1MB 行大小限制。

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <code>EntityTooLarge</code>
  <message xml:lang="en-GB">The entity is larger than allowed by the Table Service.</message>
</error> 
```

我一直在使用的代码相当简单，但我可能在估计开销时犯了错误——但我怀疑它会偏离数据大小的 100%。

```
class Program
{
    static void Main(string[] args)
    {
        var client = CloudStorageAccount.DevelopmentStorageAccount.CreateCloudTableClient();
        var table = client.GetTableReference("sometable");
        table.CreateIfNotExists();

        const int rowOverhead = 4;
        const int maxRowSize = 1024 * 1024; // 1MB row size limit
        const int maxProperties = 252; // 255 less 3 system properties
        const int maxPropertySize = 64 * 1024; // 64KB property size limit

        var stream = new MemoryStream(new byte[512 * 1024]); // 0.5MB of data
        var entity = new DynamicTableEntity("pk", "rk");
        var buffer = new byte[maxPropertySize];
        var keySize = (entity.PartitionKey.Length + entity.RowKey.Length) * 2;
        var used = rowOverhead + keySize;

        for (var i = 0; i < maxProperties + 1; i++)
        {
            if (i > maxProperties)
            {
                throw new ArgumentException(string.Format("You have exceeded the column limit of {0}.", maxProperties));
            }

            var name = string.Concat("d", i);
            var overhead = CalculatePropertyOverhead(name, EdmType.Binary);
            var read = stream.Read(buffer, 0, maxPropertySize - overhead);
            used += read + overhead;

            if (used > maxRowSize)
            {
                throw new ArgumentException(string.Format("You have exceeded the max row size of {0} bytes.", maxRowSize));
            }

            if (read > 0)
            {
                var data = new byte[read];
                Array.Copy(buffer, 0, data, 0, read);
                entity.Properties.Add(name, new EntityProperty(data));
            }
            else
            {
                break;
            }
        }

        Console.WriteLine("Total entity size: {0}", used);
        table.Execute(TableOperation.InsertOrReplace(entity));
    }

    static int CalculatePropertyOverhead(string name, EdmType type)
    {
        const int propertyOverhead = 8;
        int propertyNameSize = name.Length * 2;
        int propertyTypeSize;

        switch (type)
        {
            case EdmType.Binary:
            case EdmType.Int32:
            case EdmType.String:
                propertyTypeSize = 4;
                break;
            case EdmType.Boolean:
                propertyTypeSize = 1;
                break;
            case EdmType.DateTime:
            case EdmType.Double:
            case EdmType.Int64:
                propertyTypeSize = 8;
                break;
            case EdmType.Guid:
                propertyTypeSize = 16;
                break;
            default:
                throw new NotSupportedException();
        }

        return propertyOverhead + propertyNameSize + propertyTypeSize;
    }
} 
```

感谢您解释我所缺少的任何帮助！

谢谢，

马蒂亚斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:14:48.367

Mattias，您所指的限制是针对实际存储服务的，但您的目标是本地存储模拟器。模拟器使用本地 SQL Server 作为其后备存储，并且具有与实际存储服务不同的限制。有关更多信息，请参阅[http://msdn.microsoft.com/en-us/library/windowsazure/gg433135.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg433135.aspx)，尤其是这一行：

```
* The total size of a row in a table in the storage emulator is limited to less than 1 MB. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-18T07:09:22.257

我认为kwill的答案是正确的。但是，它引出了实际限制是什么的问题。在我自己的代码中，我想在单个实体中打包尽可能多的字节，因此我同时遇到了实体限制和请求正文限制。

在编写了一些繁琐的代码之后，这就是我发现的。

在存储模拟器上，最大实体大小似乎基于分区键和/或行键（也可能是表名）。[使用Azure 文档中提供](https://docs.microsoft.com/en-us/archive/blogs/avkashchauhan/how-the-size-of-an-entity-is-caclulated-in-windows-azure-table-storage)的实体大小计算，最大实体大小**约为 393,250 字节。**

这是我摆弄的代码： [https ://gist.github.com/joelverhagen/bca6e0f9ed8fa779fcabc5c2904505ae](https://gist.github.com/joelverhagen/bca6e0f9ed8fa779fcabc5c2904505ae)

我最好的猜测是模拟器的实体大小计算是错误的，这导致了这种差异。

我将通过检查存储 URI 的主机（127.0.0.1 表示模拟器）来让我的代码检测模拟器是否正在运行。

# excel - 如何将多个链接工作表的 .xlsx 拆分为单独的工作表文件，然后如何重新组合？

> ID：15436331
> 
> 赞同：5
> 
> 时间：2013-03-15T15:35:45.450
> 
> 标签：excel, vba, excel-2010

一个非 IT 相关的班级被分配了一个小组项目，他们所做的工作将被存储在一个单独的 .xlsx 文件中。成员们决定协作编辑所述文件的最佳方式是将其拆分为组成工作表，将每个 *.xlsx 工作表上传到 SVN 存储库，并使用锁和 .txt 文件来组织工作表/成员责任。

该小组已经使用 VB 脚本（由这个精彩的网站提供）完成了所述文件的拆分，如下所示：

```
Sub SaveSheets()
Dim strPath As String
Dim ws As Worksheet

Application.ScreenUpdating = False

strPath = ActiveWorkbook.Path & "\"
For Each ws In ThisWorkbook.Sheets
    ws.Copy
    'Use this line if you want to break any links:
    BreakLinks Workbooks(Workbooks.Count)
    Workbooks(Workbooks.Count).Close True, strPath & ws.Name & ".xlsx"
Next

Application.ScreenUpdating = True
End Sub

Sub BreakLinks(wb As Workbook)
    Dim lnk As Variant
    For Each lnk In wb.LinkSources(xlExcelLinks)
        wb.Breaklink lnk, xlLinkTypeExcelLinks
    Next
End Sub 
```

因此，该组现在有一个存储库，每个成员当前都在编辑他们各自的文件。那么问题是，我们如何能够自动将这些文件重新统一为一个 .xlsx 文件*，*同时保留原始链接。

编辑 4/2：开始赏金//我知道链接已被上述脚本“破坏”，但我不确定这意味着什么，尽管我怀疑它会使重新组装*并*保留原始链接更加困难。应该注意的是，具有链接的原始文件仍然可用，并且可以用来帮助解决这个问题。

编辑 4/2：Excel 版本是 2010 - 当前文件中不存在原始链接。

编辑 4/3：原始链接不在当前文件中，但希望通过重新统一重新创建/保留原始链接（来自原始未编辑文件，预拆分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:53:57.493

为了帮助您，我们可能需要更多详细信息，但您可以按以下方式完成您需要的事情（也许这可以启动解决方案）：

*   循环浏览工作簿中的工作表
*   对于每张纸
    *   打开相应的 xlsx 文件
    *   识别非公式单元格
    *   对于每个单元格
        *   复制到主工作簿中的相同位置
    *   关闭 xlsx 文件

下面是一个示例（基于您的 SaveSheets 代码）。如果您尝试此操作，请务必先备份所有内容。我们显然不知道电子表格的布局和使用方式。如果一切都搞砸了，那真的很糟糕。此外，还有一些假设：

*   xlsx 文件中的布局和使用范围与原始工作簿中显示的布局和使用范围完全相同。
*   您所指的链接是公式（指向另一个工作表或另一个工作簿）。

如果这些假设是错误的，您将需要进行适当的修改（确定要复制的特定范围和/或向例程添加更健壮的逻辑）。

请注意，执行此操作的实际代码非常短。我添加了注释和基本错误处理，显着增加了代码量。

此代码将添加到原始工作簿中。

```
Sub RetrieveSheets()
Dim strPath As String
Dim ws As Worksheet
Dim ws2 As Worksheet
Dim wbk As Workbook
Dim rng As Range

Application.ScreenUpdating = False

strPath = ActiveWorkbook.Path & "\"
For Each ws In ThisWorkbook.Sheets

    'Open the xlsx file (read only)
    Set wbk = Nothing
    On Error Resume Next
        Set wbk = Workbooks.Open(strPath & ws.Name & ".xlsx", ReadOnly:=True)
    On Error GoTo 0

    'Continue if xlsx file was successfully opened
    If Not wbk Is Nothing Then
        Set ws2 = Nothing
        On Error Resume Next
            Set ws2 = wbk.Worksheets(ws.Name)
        On Error GoTo 0

        'Continue if appropriate sheet was found
        If Not ws2 Is Nothing Then
            'Identify cells to copy over (cells that are constants)
            For Each rng In ws2.Cells.SpecialCells(xlCellTypeConstants)
                'set the cell value equal to the identical cell location in the xlsx file
                If (Left(ws.Range(rng.Address).Formula, 1)) <> "=" Then
                    ws.Range(rng.Address) = rng
                End If
            Next
            Set ws2 = Nothing
        End If

        'Close the xlsx file
        wbk.Close False
    End If
Next
Set wbk = Nothing
Application.ScreenUpdating = True 
```

结束子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T00:41:54.977

然后链接并没有真正适用于解决方案，因为您说原始没有任何链接，因此不需要使用链接重新组装。

提供的脚本甚至嵌入了一条评论，说“如果您想断开任何链接，请使用此行：”。因此，如果您将下面的行注释掉（在该行前加上'），它将保留子工作簿中的链接。

[使用上一个关于将工作表复制到另一个工作簿](https://stackoverflow.com/a/15023350/1613971)重组的问题的答案可以通过以下 VBA 完成：

```
Sub CombineSheets()
Dim strPath As String
Dim ws As Worksheet
Dim targetWorkbook As Workbook

Set targetWorkbook = ActiveWorkbook

Application.ScreenUpdating = False

'Adjust path location of split files
strPath = "C:\code\xls-split"

Dim str As String

    'This can be adjusted to suit a filename pattern.
    str = Dir(strPath & "\*.xl*")
    Do Until str = ""
        'Open Workbook x and Set a Workbook variable to it
        Set wbResults = Workbooks.Open(strPath & "\" & str, UpdateLinks:=0)
            For Each Sheet In ActiveWorkbook.Sheets
              Sheet.Copy After:=targetWorkbook.Sheets(targetWorkbook.Sheets.Count)
            Next Sheet
        wbResults.Close SaveChanges:=False
        str = Dir()
    Loop
Application.ScreenUpdating = True

End Sub 
```

这会将其他工作簿附加到当前打开的工作簿中。

Sourced[替换 FileSearch 函数](http://social.msdn.microsoft.com/Forums/en-US/isvvba/thread/bb35b1be-7ed7-49c6-a52a-463c34eedcb4/)，用于在目录中查找 xls 文件的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:22:42.880

如果您有 SharePoint，则都可以更新同一个 Excel（2003 或 2010）书籍。

[http://office.microsoft.com/en-us/excel-help/about-shared-workbooks-HP005262294.aspx](http://office.microsoft.com/en-us/excel-help/about-shared-workbooks-HP005262294.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T01:18:34.250

查看这篇关于合并来自多个工作簿 (.xls/.xlsx) 文件的数据的 MSDN 文章

[http://msdn.microsoft.com/en-us/library/office/gg549168%28v=office.14%29.aspx](http://msdn.microsoft.com/en-us/library/office/gg549168%28v=office.14%29.aspx)

我对 VBA 了解不多，但我认为这就是您正在寻找的。

另请注意，它确实不需要文本文件来管理文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T01:05:03.417

这是我如何完成此任务的粗略概述：

1.  使用 Office2013 而*不是*Office 2010
2.  使用原始 .xlsx 分配文件创建 tmp/ 目录。
3.  在 tmp/ 中创建 source/ 目录
4.  使用拆分表模块（在此页面上列出），但注释掉断开链接的行。
5.  将所有生成的 .xlsx 文件放入 source/ （您可以删除原始 .xlsx 文件）
6.  从源/文件夹中远程第一张纸，并将其放置在../
7.  打开第一个工作表，然后导入/使用此页面上列出的“combinesheets”模块。
8.  保存工作表，重新打开它，系统会提示您更新链接。这样做，然后选择“更改来源”并在步骤 6 中选择第一张表 Re。
9.  链接会自动更新；完毕。

注意：您必须将文件保存为启用宏，...

# javascript - Javascript 画布和字体

> ID：15436332
> 
> 赞同：-2
> 
> 时间：2013-03-15T15:35:46.467
> 
> 标签：javascript

使用 javascript 在画布上工作时，是否可以使用 ctx.fillText 返回输入值？

我猜是这样的：

```
(html)
    (Customize:(input id="custom" value="Default Message" /)
    (p)(button onclick="msg()")Try it(/button)(/p)
    (canvas id="myCanvas" width="500" height="500")
    (/canvas)
(/html)

(script)

var canvas = document.getElementById("myCanvas"); 
var ctx = canvas.getContext("2d");

var message
message = document.getElementById("custom").value;

function msg(){
    ctx.fillStyle = "rgb(255, 255, 255)";
    ctx.font = "italic 800 30px Verdana";
    ctx.fillText(message, 485, 245, 1000);
}

msg();

(/script) 
```

因此，当单击“Try It”时，无论用户在输入中键入什么内容，都将在画布上绘制。这是可能的还是我偏离了轨道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:16:08.053

你试过你的代码吗？它基本上没问题，除了您需要确定函数`message`内的值`msg()`以便它可以在用户更改它时更改，并且您应该选择一种新颜色，或者向画布添加颜色以便您可以看到它：

```
<body>
Customize:<input id="custom" value="Default Message" />
    <p><button onclick="msg()">Try it</button></p>
    <canvas style="background-color:#cccccc" id="myCanvas" width="500" height="500">
    </canvas>
    <script>
    var canvas = document.getElementById("myCanvas"); 
    var ctx = canvas.getContext("2d");

    var message;

    function msg(){
    message=document.getElementById('custom').value;
    ctx.fillStyle = "rgb(255, 255, 255)";
    ctx.font = "italic 800 30px Verdana";
    ctx.fillText(message, 100, 245, 1000);
    }

    msg();
    </script>
</body> 
```

# java - MessageSourceAware 是一个特例还是我可以以类似的方式注入其他依赖项？

> ID：15436333
> 
> 赞同：1
> 
> 时间：2013-03-15T15:35:48.753
> 
> 标签：java, spring, inversion-of-control

使用 Spring，可以定义实现[`MessageSourceAware`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/context/MessageSourceAware.html). 然后容器将`MessageSource`自动注入一个（参见*[本文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#context-functionality-messagesource)**的结尾*）。

这是一个特例还是我也可以使用这个概念来注入其他依赖项？例如，我的类是否可以实现以下接口：

```
public interface MyServiceAware {
  void setMyService(MyService service);
} 
```

然后以某种方式自动连接一个合适的bean？

*注意：我目前只使用 XML 配置，我不愿意转向基于 Java 的注释。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:07:30.990

`*Aware`接口由[`BeanPostProcessor`](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html)在应用程序上下文中自动注册的 a 处理 ( ) `org.springframework.context.support.ApplicationContextAwareProcessor`。

您可以创建并注册自己的后处理器来处理`MyServiceAware`bean。

还要记住，XML 配置确实支持对适当配置的 bean 进行[自动装配](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-autowire)。

# c# - 在 WPF 中将自定义纸张尺寸打印到冲击式打印机

> ID：15436334
> 
> 赞同：6
> 
> 时间：2013-03-15T15:35:51.237
> 
> 标签：c#, wpf, printing, dot-matrix

我正在使用装有**8.5 x 8.5**英寸纸张的冲击式打印机进行打印。当我打印时，打印机弹出 11 英寸而不是 8.5 英寸。

```
PageMediaSize pageSize = new PageMediaSize(PageMediaSizeName.Unknown, element.Width, element.Height);

PrintDialog dialog = new PrintDialog();
dialog.PrintTicket.PageMediaSize = pageSize;
Console.WriteLine(dialog.PrintableAreaHeight); // 816, good!
dialog.PrintQueue = myQueue;                   // selected from a combobox
Console.WriteLine(dialog.PrintableAreaHeight); // 1056 :(

dialog.PrintVisual(element, description); 
```

使用“[如何在 .NET 中将 Twips 转换为像素？](https://stackoverflow.com/questions/4044397/how-do-i-convert-twips-to-pixels-in-net) ”我确定 8.5 英寸是 816 像素，这是我的`element.Width`和`element.Height`. 我正在设置一个新的`PageMediaSize`，但这似乎没有效果，`dialog.PrintableAreaHeight`当我在对话框上设置队列时仍然以 1056 结束。

如果我这样做`dialog.ShowDialog()`了，请手动选择我的打印机，然后在打印机的高级设置中手动查找并更改纸张尺寸，然后`dialog.PrintableAreaHeight`正确反映更改。

此页面[http://go4answers.webhost4life.com/Example/set-printdialogs-default-page-size-168976.aspx](http://go4answers.webhost4life.com/Example/set-printdialogs-default-page-size-168976.aspx)建议我只能设置`PageMediaSize`打印机支持的。使用`GetPrintCapabilities`my 上的函数`PrintQueue`，我看到了 10 个左右页面大小的列表，其中没有一个是 8.5 x 8.5。这与我在 Windows 中转到打印机的高级设置时看到的列表相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T04:18:12.860

请在下面找到代码，它根据需要设置纸张尺寸

```
 var printerSettings = new PrinterSettings();
        var labelPaperSize = new PaperSize { RawKind = (int)PaperKind.A6, Height = 148, Width = 105 };
        printerSettings.DefaultPageSettings.PaperSize = labelPaperSize;
        var labelPaperSource = new PaperSource { RawKind = (int)PaperSourceKind.Manual };
        printerSettings.DefaultPageSettings.PaperSource = labelPaperSource;
        if (printerSettings.CanDuplex)
        {
            printerSettings.Duplex = Duplex.Default;
        } 
```

# android - 班级登录密码

> ID：15436340
> 
> 赞同：0
> 
> 时间：2013-03-15T15:35:57.497
> 
> 标签：android

这是登录设置的代码，以便进入设置页面。onClickView 报错，必须在 Setting 类中实现。有什么建议或解决方案吗？

```
public class Setting1 extends Settings  implements OnClickListener{

  public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.pass_set);
    EditText et = (EditText)findViewById(R.id.passwordedittext);
    Button buttonEnter = (Button)findViewById(R.id.sumbitbutton);
    buttonEnter.setOnClickListener(this);
  }

  @Override
  public void onCLick(View v){
    EditText et = (EditText)findViewById(R.id.passwordedittext);
    String password = et.getText().toString();
    et.getEditableText().toString();
    if(password.equals("Password")){
      Intent intent = new Intent(Setting1.this, Settings.class);
      startActivity(intent);
    }
    else{
      AlertDialog.Builder builder = new AlertDialog.Builder(this); 
      builder.setTitle("YOU SUCK!"); 
      builder.setMessage("Try Again!"); 
      builder.setPositiveButton("OK", null); 
      AlertDialog dialog = builder.show();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:50:38.687

正如*@A--C*已经在评论中指出的那样，

```
public void onClick(View v){
.
.
.    
    } 
```

您拼写**`onClick`**错误（您的代码有*onCLick*）。

# eclipse - 如何自定义 Eclipse 函数注释块解析？

> ID：15436346
> 
> 赞同：2
> 
> 时间：2013-03-15T15:36:23.447
> 
> 标签：eclipse, comments

如果我有这样的代码块：

```
/**
 * function description text here
 * with
 * other
 * stuff
 * on 
 * multiple
 * lines
 */
function somefunction() ... 
```

悬停函数的函数描述将显示中间有空格的行，例如：

```
function description here

with

other

... 
```

如何自定义 Eclipse 函数注释块解析器以使其没有多余的空间？当然，我也想定制它来做其他事情，但这似乎是一个不错的起点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:04:46.093

尝试从以下菜单进行更改：

窗口>首选项>Java>代码样式>格式化程序>编辑>注释选项卡>常规设置

# javascript - Javascript 超时

> ID：15436349
> 
> 赞同：0
> 
> 时间：2013-03-15T15:36:29.950
> 
> 标签：javascript

每次我在沙盒环境中运行这段代码时，我都会超时并最终崩溃。我已经通过多个 IDE 运行它，但仍然找不到任何语法错误。如果有人看到我没有看到的东西，我将非常感谢您的意见。

```
//assign variables to memory
var carModel = new Array()
var milesDriven = new Array()
var gallonsUsed = new Array()
var milesperGallon = new Array()
var questionState, epaRating, conditionofVehicle, totalAverage;

var runningAverage = 0;
var i = 0;

do {
    //retrieve basic information about vehicle from standard input: model, miles, gallons
    carModel[i] = prompt("What type of vehicle do you drive?");
    milesDriven[i] = parseInt(prompt("How many miles have you 
                                   driven with this vehicle?"));
    gallonsUsed[i] = parseInt(prompt("How many gallons of gas have you used when driving this  vehicle?"));

    //calculate miles per gallon
    milesperGallon[i] = milesDriven[i] / gallonsUsed[i];
    runningAverage = runningAverage + milesperGallon[i];

    do {
        questionState = prompt("Do you have any more vehicles that you would like to enter? If yes, type 'yes'. If no, type 'no'.");
    } while (questionState != "yes" && questionState != "no");

    i++;
} while (questionState == "yes");

totalAverage = runningAverage / i;

// parse through each element of carModel, milesDriven, gallonsUsed
for (var j = 0; j <= i; j++) {
    //determine performance standards based upon M.P.G of vehicle
    if (milesperGallon[j] >= 38) {
        conditionofVehicle = "Good";
        epaRating = 10;
        //output the performance standards to user
        document.writeln("Your" + " " + carModel[j] + " " + "receives" + " " + milesperGallon[j] + " " + "miles per gallon.");
        document.writeln("Based upon this metric your vehicle is in" + " " + conditionofVehicle + " " + "condition and has a EPA rating of" + " " + epaRating + ".");
    } else if (milesperGallon[j] >= 31 && milesperGallon[j] < 38) {
        conditionofVehicle = "Good";
        epaRating = 9;
        //output the performance standards to user
        document.writeln("Your" + " " + carModel[j] + " " + "receives" + " " + milesperGallon[j] + " " + "miles per gallon.");
        document.writeln("Based upon this metric your vehicle is in" + " " + conditionofVehicle + " " + "condition and has a EPA rating of" + " " + epaRating + ".");
    } else if (milesperGallon[j] >= 27 && milesperGallon[j] < 31) {
        conditionofVehicle = "Good";
        epaRating = 8;
        //output the performance standards to user
        document.writeln("Your" + " " + carModel[j] + " " + "receives" + " " + milesperGallon[j] + " " + "miles per gallon.");
        document.writeln("Based upon this metric your vehicle is in" + " " + conditionofVehicle + " " + "condition and has a EPA rating of" + " " + epaRating + ".");
    } else if (milesperGallon[j] >= 23 && milesperGallon[j] < 27) {
        conditionofVehicle = "Fair";
        epaRating = 7;
        //output the performance standards to user
        document.writeln("Your" + " " + carModel[j] + " " + "receives" + " " + milesperGallon[j] + " " + "miles per gallon.");
        document.writeln("Based upon this metric your vehicle is in" + " " + conditionofVehicle + " " + "condition and has a EPA rating of" + " " + epaRating + ".");
    } else if (milesperGallon[j] >= 22 && milesperGallon[j] < 23) {
        conditionofVehicle = "Fair";
        epaRating = 6;
        //output the performance standards to user
        document.writeln("Your" + " " + carModel[j] + " " + "receives" + " " + milesperGallon[j] + " " + "miles per gallon.");
        document.writeln("Based upon this metric your vehicle is in" + " " + conditionofVehicle + " " + "condition and has a EPA rating of" + " " + epaRating + ".");
    } else if (milesperGallon[j] >= 19 && milesperGallon[j] < 22) {
        conditionofVehicle = "Fair";
        epaRating = 5;
        //output the performance standards to user
        document.writeln("Your" + " " + carModel[j] + " " + "receives" + " " + milesperGallon[j] + " " + "miles per gallon.");
        document.writeln("Based upon this metric your vehicle is in" + " " + conditionofVehicle + " " + "condition and has a EPA rating of" + " " + epaRating + ".");
    } else if (milesperGallon[j] >= 17 && milesperGallon[j] < 19) {
        conditionofVehicle = "Fair";
        epaRating = 4;
        //output the performance standards to user
        document.writeln("Your" + " " + carModel[j] + " " + "receives" + " " + milesperGallon[j] + " " + "miles per gallon.");
        document.writeln("Based upon this metric your vehicle is in" + " " + conditionofVehicle + " " + "condition and has a EPA rating of" + " " + epaRating + ".");
    } else if (milesperGallon[j] >= 15 && milesperGallon[j] < 17) {
        conditionofVehicle = "Bad";
        epaRating = 3;
        //output the performance standards to user
        document.writeln("Your" + " " + carModel[j] + " " + "receives" + " " + milesperGallon[j] + " " + "miles per gallon.");
        document.writeln("Based upon this metric your vehicle is in" + " " + conditionofVehicle + " " + "condition and has a EPA rating of" + " " + epaRating + ".");
    } else if (milesperGallon[j] >= 13 && milesperGallon[j] < 15) {
        conditionofVehicle = "Bad";
        epaRating = 2;
        //output the performance standards to user
        document.writeln("Your" + " " + carModel[j] + " " + "receives" + " " + milesperGallon[j] + " " + "miles per gallon.");
        document.writeln("Based upon this metric your vehicle is in" + " " + conditionofVehicle + " " + "condition and has a EPA rating of" + " " + epaRating + ".");
    } else if (milesperGallon[j] >= 0 && milesperGallon[j] < 13) {
        conditionofVehicle = "Bad";
        epaRating = 1;
        //output the performance standards to user
        document.writeln("Your" + " " + carModel[j] + " " + "receives" + " " + milesperGallon[j] + " " + "miles per gallon.");
        document.writeln("Based upon this metric your vehicle is in" + " " + conditionofVehicle + " " + "condition and has a EPA rating of" + " " + epaRating + ".");
    } else {
        document.writeln(" ");
    }
}
// check to make sure there is an input value
if (totalAverage >= 0) {
    document.writeln("You have" + " " + i + " " + "vehicles." + " " + "Between them      
                   they average" + " " + totalAverage + " " + "miles per gallon.");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:41:19.137

您不能将字符串拆分为多行：

```
milesDriven[i] = parseInt(prompt("How many miles have you 
                               driven with this vehicle?")); 
```

它应该是：

```
milesDriven[i] = parseInt(prompt("How many miles have you driven with this vehicle?")); 
```

与此行类似：

```
if (totalAverage >= 0) {
    document.writeln("You have" + " " + i + " " + "vehicles." + " " + "Between them      
                   they average" + " " + totalAverage + " " + "miles per gallon.");
} 
```

应该：

```
if (totalAverage >= 0) {
    document.writeln("You have" + " " + i + " " + "vehicles." + " " + "Between them they average" + " " + totalAverage + " " + "miles per gallon.");
} 
```

当我进行这些更改时，它对我有用。

# iphone - iOS Google Plus API - 无需前往 Safari 即可共享或登录

> ID：15436352
> 
> 赞同：4
> 
> 时间：2013-03-15T15:36:33.327
> 
> 标签：iphone, ios, google-api, google-plus

到目前为止，我在这个主题上发现的一切都是否定的。

当用户登录和分享时，我的应用程序运行良好，但是这两个操作都需要移动 safari，这对用户来说不是理想的体验，有没有人找到一种方法来分享帖子或使用 UIWebView 登录到 Google+ 或获取/发布？

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T16:30:58.247

正如你所说，最简单的答案是否定的。SDK 实际上会尝试通过以下方式回退：

1.  通过 Google+ 应用登录（这是不错的结果，但需要安装 Google+ 应用）
2.  通过 Chrome 登录
3.  通过移动 Safari 登录

您可以使用 GPPSignIn 对象上的 attemptSSO 标志来控制第一部分 - 如果您将其设置为 NO，它将不会尝试使用 Google+ 应用程序。您通常希望它先试用 Google+ 应用程序。不过，共享总是通过网络（chrome/safari）和当前的 API 版本（1.2.1）进行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T03:38:47.960

您可以通过 Google+ 登录到 UIWebView。

```
 GTMOAuth2ViewControllerTouch *_googlePlusCtrl = [[GTMOAuth2ViewControllerTouch alloc]
                                                   initWithScope:@"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/plus.me"
                                                   clientID:GOOGLE_PLUS_CLIENT_ID
                                                   clientSecret:GOOGLE_PLUS_CLIENT_SECRET
                                                   keychainItemName:@"GooglePlus_Sample_App"
                                                   delegate:self
                          finishedSelector:@selector(viewController:finishedWithAuth:error:)]; 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-17T11:18:36.667

事情就是这样。这是可能的。第一步 - 从这里下载示例项目 - [https://github.com/emysa341/Login-with-gmail-google-g--using-oath-2.0-protocol](https://github.com/emysa341/Login-with-gmail-google-g--using-oath-2.0-protocol)。第二步，在响应连接完成加载后，发出另一个请求 - [https://www.googleapis.com/oauth2/v1/userinfo?access_token=%@](https://www.googleapis.com/oauth2/v1/userinfo?access_token=%@)。使用您从第一个请求中获得的访问令牌。现在在响应中，您将获得用户数据。此外，如果您需要用户的电子邮件，请将范围更改为“ [https://www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email) ”。

# linq - 使用 LinqToCSV 将 CSV 写入 MemoryStream 不会返回任何数据

> ID：15436354
> 
> 赞同：4
> 
> 时间：2013-03-15T15:36:35.537
> 
> 标签：linq, asp.net-mvc-4, memorystream

我已经使用`System.Text.Encoding.ASCII.GetString(ms.ToArray));`我的内存流验证了预期的数据。

但是，使用 LinqToCSV nuget 库不会生成我的 csv 文件。我没有抛出任何错误或异常。当我被提示打开文件时，我只是得到一个空文件。

这是我的操作方法

```
 public FileStreamResult  Export(){

        var results = _service.GetProperties().Take(3);
        System.IO.MemoryStream ms = new System.IO.MemoryStream();
        System.IO.TextWriter  txt = new System.IO.StreamWriter(ms); 

        CsvFileDescription inputFileDescription = new CsvFileDescription{
            SeparatorChar =',',
            FirstLineHasColumnNames = true
        }
            ; 

        CsvContext csv = new CsvContext();

        csv.Write(results,txt,inputFileDescription);

        return File(ms , "application/x-excel"); 
    } 
```

我发现这很有趣，如果我将返回类型更改为 contentResult，并将返回方法更改为 Content() 并传递它，`System.Text.Encoding.ASCII.GetString(ms.ToArray));`我会得到一个显示我的数据的浏览器窗口。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T17:02:32.113

确保将流位置重置为 0。还要确保`StreamWriter`在此之前刷新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-12T20:09:36.083

调用 Web API 方法从 JavaScript 返回 CVS 文件。

```
public HttpResponseMessage Bidreport([FromBody]int formData)..... 
```

填写您的`IEnumerable<YourObject>query`= from LINQ query .... 这是如何返回它：

```
 using (var ms = new MemoryStream())
            {
                using (TextWriter txt = new StreamWriter(ms))
                {
                    var cc = new CsvContext();
                    cc.Write(query, txt, outputFileDescription);
                    txt.Flush();
                    ms.Position = 0;
                    var fileData = Encoding.ASCII.GetString(ms.ToArray());
                    var result = new HttpResponseMessage(HttpStatusCode.OK) {Content = new StringContent(fileData)};
                    result.Content.Headers.ContentType = new MediaTypeHeaderValue("application/x-excel");
                    return result;
                }
            } 
```

# c# - 自定义控件设计时

> ID：15436355
> 
> 赞同：5
> 
> 时间：2013-03-15T15:36:36.397
> 
> 标签：c#, .net, winforms

我想创建我自己的具有设计时支持的 TabControl 类。

这是我的设计师：

```
public class TabListDesigner : ParentControlDesigner
{
    protected TabList TabListControl { get { return this.Control as TabList; } }

    protected override void WndProc(ref Message m)
    {
        switch (m.Msg)
        {
            case 0x7b: // WM_CONTEXTMENU
                this.OnContextMenu(Cursor.Position.X, Cursor.Position.Y);
                break;
            default:
                base.WndProc(ref m);
                break;
        }
    }

    protected override bool GetHitTest(Point point)
    {
        return this.TabListControl.HitTest(this.TabListControl.PointToClient(point)) != null;
    }

    protected override void OnPaintAdornments(PaintEventArgs pe)
    {
        base.OnPaintAdornments(pe);
        ControlPaint.DrawFocusRectangle(pe.Graphics, this.Control.ClientRectangle);
    }

    public override void InitializeNewComponent(IDictionary defaultValues)
    {
        base.InitializeNewComponent(defaultValues);
        this.AddTabListPage();
        this.AddTabListPage();
    }

    protected virtual void AddTabListPage()
    {
        IDesignerHost host = (IDesignerHost)this.GetService(typeof(IDesignerHost));

        if (host != null)
        {
            using (DesignerTransaction transaction = host.CreateTransaction(string.Format("Add TabListPage to '{0}'", this.TabListControl.Name)))
            {
                try
                {
                    TabListPage page = (TabListPage)host.CreateComponent(typeof(TabListPage));
                    MemberDescriptor controlsProperty = TypeDescriptor.GetProperties(this.TabListControl)["Controls"];

                    this.RaiseComponentChanging(controlsProperty);

                    this.TabListControl.Add(page);
                    this.TabListControl.Controls.Add(page);

                    this.RaiseComponentChanged(controlsProperty, null, null);

                    transaction.Commit();
                }
                catch
                {
                    transaction.Cancel();
                    throw;
                }
            }
        }
    }
} 
```

在设计器中，我将 Tabcontrol 添加到表单中，并且 2 TabPages 正确显示。现在我测试项目，2 个标签页消失了。我回到设计师那里，标签页已经不存在了。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T15:21:24.270

我曾经创建过一个控件设计器，不是表单设计器使用的，而是更像是单个控件的实际表单设计器。我不记得该项目的太多内容，但我确实记得遇到了完全相同的问题，并且我不得不提醒 Visual Studio 我以某种方式更改了值。

保存设计器选项卡后，Visual Studio 将继续根据语言将该更改转换为代码，并将其写入表单的设计器文件中。您还可以使用 codeDom 编写自己的特定代码生成器，但这是非常先进的。

这不是你想要的，但我敢打赌这个问题是相关的，所以请耐心等待。我能在现场找到的唯一例子是一个古老的 c# 项目，叫做“Shape Designer”之类的。我是从一个浅蓝色的网站上得到的。我做了一些搜索，但我无法找到该页面。无论如何，代码有据可查，他非常彻底地解释了你的问题。

我也有我的项目，这是一个选项卡式的东西，当你转到另一个页面时，它会在页面之间进行动画处理。它在 vb.net 中，没有很好的文档记录，但您可能想一睹它的风采。

[这是项目](https://dl.dropboxusercontent.com/u/69377299/Pages.zip)， [这是设计师的图像](https://dl.dropboxusercontent.com/u/69377299/PageDesigner.png)，以及 [最终结果的动画 gif](https://dl.dropboxusercontent.com/u/69377299/PageControl.gif)

编辑：

在我的项目中，在“DesignerControl.vb”文件的第 187 行：

```
' The controldesigner don't always save properties which are changed directly :/
Private Sub SetValue(itm As Item, pName$, val As Object)
    Dim Prop As PropertyDescriptor = TypeDescriptor.GetProperties(itm.Page)(pName)
    If Prop IsNot Nothing AndAlso Prop.PropertyType Is val.GetType Then Prop.SetValue(itm.Page, val)
End Sub 
```

# r - 过度分配真实长度超过 1000 次的潜在问题

> ID：15436356
> 
> 赞同：5
> 
> 时间：2013-03-15T15:36:39.303
> 
> 标签：r, data.table

**tl;dr：在真实长度过度分配警告之后有哪些潜在问题？**

最近我做了一件像这样愚蠢的事情：

```
m <- matrix(seq_len(1e4),nrow=10)

library(data.table)
DT <- data.table(id=rep(1:2,each=5),m)
DT[,id2:=id]

#Warning message:
#  In `[.data.table`(DT, , `:=`(id2, id)) :
#  tl (2002) is greater than 1000 items over-allocated (ncol = 1001). 
#     If you didn't set the datatable.alloccol option very large, 
#     please report this to datatable-help including the result of sessionInfo().

DT[,lapply(.SD,mean),by=id2] 
```

经过一番搜索，很明显警告是通过引用具有太多列的 data.table 添加列而产生的，我发现了一些相当技术性的解释（例如[this](http://lists.r-forge.r-project.org/pipermail/datatable-help/2012-August/001260.html)），我可能并不完全理解。

我知道我可以避免这个问题（例如， use `data.table(id=rep(1:2,each=5),stack(as.data.frame(m)))`），但我想知道在这样的警告之后是否会出现问题（除了使用宽格式 data.table 带来的明显性能劣势）。

```
R version 2.15.3 (2013-03-01)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
  [1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252    LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                    LC_TIME=German_Germany.1252    

attached base packages:
  [1] stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
  [1] data.table_1.8.8 fortunes_1.5-0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T16:57:06.627

好问题。默认情况下 v1.8.8 ：

```
> options()$datatable.alloccol
max(100, 2 * ncol(DT)) 
```

这可能不是最好的默认值。尝试改变它：

```
options(datatable.alloccol = quote(max(100L, ncol(DT)+64L)) 
```

更新：我现在已经将 v1.8.9 中的默认值更改为该值。

该选项仅控制分配了多少备用列指针插槽，以便`:=`可以通过引用添加列。

* * *

来自v1.8.9的[NEWS中的注释](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)

> *   的默认值`datatable.alloccol`已从 更改`max(100L, 2L*ncol(DT))`为`max(100L, ncol(DT)+64L)`。并在错误消息中添加了一个指针`?truelength`，这要归功于 Roland：
>     [over-allocating truelength 超过 1000 次的潜在问题](https://stackoverflow.com/questions/15436356/potential-problems-from-over-allocating-truelength-more-than-1000-times)

# sql - Grails 使用主键和外键显示来自两个表的值

> ID：15436358
> 
> 赞同：0
> 
> 时间：2013-03-15T15:36:41.300
> 
> 标签：sql, grails

我希望这可能很明显，但我找不到一个我认为可以回答我的问题的例子。

我有一个我无法修改的 SQL 数据库，其中有两个表，分别与主键/外键链接（分别为 test_scenario 和 test_exec_queue，因此 test_scenario 的 PK 值可以在 test_exec_queue 中多次显示）以及当我在屏幕上显示数据时我想要它，而不是显示来自 test_exec_queue 的 FK 值，我希望它使用它从 test_scenario 表中获取 testScenarioName 并显示它。

到目前为止，我的课程看起来像这样，但我不知道要放入什么来执行上述逻辑，还是我在其他地方这样做？在控制器中？任何帮助表示赞赏

```
class TestExecQueue {

    static constraints = {
        testscenarioid(blank:false, editable:false)
        myPriority(inList:[0,1,2,3,4], blank:false)
        myState(inList:["READY"], blank:false)
    }

    static mapping = {
        table "test_exec_queue"
        version false
        columns{

            id column:"test_exec_queue_id"
            testscenarioid column:"test_scenario_id"
            myPriority column:"Priority"
            myState column:"State"
        }
    }

    Integer testscenarioid
    Integer myPriority
    String myState
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:20:06.410

除了已经实现的类之外，您还需要创建一个映射`test_scenario`表的类。`TestExecQueue`

在您的`TestExecQueue`班级中，您将按班级链接到场景，而不是通过整数字段：

```
class TestExecQueue {
    static mapping = {
        scenario column:'test_scenario_id'
    }

    TestScenario scenario
} 
```

*注意：这是映射关系的一个示例，您应该查看[Grails 文档的域建模部分以](http://grails.org/doc/latest/guide/GORM.html#domainClasses)了解其他选项。*

类的显示完全取决于您的控制器和视图，这需要您进行更多详细说明才能清楚地回答。一种选择是在`public toString()`要打印的类上设置方法。

# ruby - 如何使用 selenium-webdriver 在确认窗口上单击“确定”按钮？

> ID：15436364
> 
> 赞同：4
> 
> 时间：2013-03-15T15:36:52.607
> 
> 标签：ruby, selenium-webdriver

我正在使用`selenium-webdriver`网页编写文件删除脚本。现在，当我单击`RED`下图所示的十字按钮时，页面上会出现另一个确认窗口。

知道如何点击`OK`按钮吗？

![如何点击确定按钮](../Images/c1d95bb69680a985caab62bb45bcc208.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T21:03:32.040

下面的代码最终可以处理提到的图片`modal`窗口：

```
driver.switch_to.alert.accept 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:57:33.910

您是否尝试过以下逻辑？

```
Alert alert = driver.switch_to.alert
alert.accept 
```

# machine-learning - 支持向量机缩放输入值

> ID：15436367
> 
> 赞同：15
> 
> 时间：2013-03-15T15:36:59.053
> 
> 标签：machine-learning, computer-vision, svm, libsvm

我正在使用 libSVM。假设我的特征值采用以下格式：

```
 instance1 : f11, f12, f13, f14
                         instance2 : f21, f22, f23, f24
                         instance3 : f31, f32, f33, f34
                         instance4 : f41, f42, f43, f44
                         ..............................
                         instanceN : fN1, fN2, fN3, fN4 
```

我认为有两种缩放可以应用。

1.  缩放每个实例向量，使每个向量的均值和单位方差为零。

    ```
     ( (f11, f12, f13, f14) - mean((f11, f12, f13, f14) ). /std((f11, f12, f13, f14) ) 
    ```

2.  将上述矩阵的每一列缩放到一个范围。例如 [-1, 1]

根据我对 RBF 内核 (libSVM) 的实验，我发现第二次缩放 (2) 将结果提高了约 10%。我不明白为什么（2）给了我一个改进的结果。

谁能解释我应用缩放的原因是什么以及为什么第二个选项会给我带来更好的结果？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T20:36:20.333

标准做法是使每个维度（或属性，或列（在您的示例中））的均值和单位方差为零。

这使 SVM 的每个维度都具有相同的量级。来自[http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf](http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf)：

> 缩放的主要优点是避免较大数值范围内的属性支配较小数值范围内的属性。另一个优点是避免了计算过程中的数值困难。因为核值通常取决于特征向量的内积，例如线性核和多项式核，较大的属性值可能会导致数值问题。我们建议将每个属性线性缩放到 [-1,+1] 或 [0,1] 的范围内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-07T18:33:36.950

我相信这很大程度上取决于您的原始数据。

如果您的原始数据在某些列中有一些极值，那么我认为您在线性缩放时会丢失一些定义，例如在 [-1,1] 范围内。

假设您有一列，其中 90% 的值介于 100-500 之间，其余 10% 的值低至 -2000 和高至 +2500。

如果您线性缩放此数据，那么您将拥有：

```
-2000 -> -1 ## <- The min in your scaled data
+2500 -> +1 ## <- The max in your scaled data

 100 -> -0.06666666666666665 
 234 -> -0.007111111111111068
 500 ->  0.11111111111111116 
```

您可能会争辩说，与原始数据相比，缩放数据中最初 100 和 500 之间的可辨别性更小。

最后，我相信这很大程度上取决于您的数据的具体情况，并且我相信 10% 的性能提升是非常巧合的，您肯定不会在您尝试两种缩放方法的每个数据集上看到如此巨大的差异。

同时，在另一个答案中列出的链接中的论文中，您可以清楚地看到作者建议对数据进行线性缩放。

我希望有人觉得这很有用！

# ios - AppDelegate 未在 iOS / Allegro 5 上调用

> ID：15436368
> 
> 赞同：0
> 
> 时间：2013-03-15T15:36:59.440
> 
> 标签：ios, appdelegate, uiapplication, allegro

-- 在我的 appdelegate.m 中，我在所有其他默认调用中都有这个： --

```
@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    [self.window makeKeyAndVisible];
    NSLog(@"Launched");
    return YES;
} 
```

-- 我的 main.mm 看起来像这样： --

```
#import <UIKit/UIKit.h>

#import "AppDelegate.h"
#include <allegro5/allegro.h>
ALLEGRO_DISPLAY *Display;

int main(int argc, char *argv[])
{
    al_init();
    al_set_new_display_option(ALLEGRO_SUPPORTED_ORIENTATIONS,
                           ALLEGRO_DISPLAY_ORIENTATION_LANDSCAPE,ALLEGRO_REQUIRE);
    Display = al_create_display(960, 640);
    printf("%d, %d", al_get_display_width(Display),                
                    al_get_display_height(Display));

    return 0;
} 
```

一旦我在我的项目中包含 allegro.h 和所有必需的库/框架并在 main 中调用 al_init()，程序就会停止打印“已启动”。似乎 AppDelegate 被完全忽略了。有人有任何提示吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:26:21.677

Allegro 程序在源代码级别是跨平台的。因此，您不需要提供 AppDelegate，因为 Allegro 已经这样做了。操作系统事件将转换为您可以跨平台方式响应的 Allegro 事件。

如果您真的需要自己的 AppDelegate，那么您需要编辑 Allegro 的源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:00:09.587

而不是返回 0 你应该设置一个整数返回值：

```
 int retVal = UIApplicationMain(argc, argv, nil, nil);
   return retVal; 
```

或者

```
 return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

这可能会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:15:04.213

Allegro 5.1 没有设置 rootViewController。我修改了 allegro 源代码来做到这一点，现在一切都可以在 iOS 6.0/6.1 上运行。

我向 ViewController.m 添加了**shouldAutorotate**和**supportedInterfaceOrientations**方法，并添加了 window.rootViewController = vc; 在 allegroAppDelegate.m 下的“static void iphone_add_screen(UIScreen *screen)”-方法中。然后我重新编译了快板。

谢谢大家的帮助。

# c - 在 Windows xp/7 中访问并口的特殊驱动程序

> ID：15436371
> 
> 赞同：0
> 
> 时间：2013-03-15T15:37:00.130
> 
> 标签：c, windows, drivers

我刚刚在几篇文章中读到，我们需要某种特殊的并行端口驱动程序才能通过 C 访问它，如在 win xp 和 7 中，我们无法直接访问它们。

有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T17:43:22.647

正确的。您需要驱动程序才能访问端口。如果您的目的只是将数据写入端口进行实验，您可以使用 WDK 提供的示例（WinDDK\7600.16385.1\src\general\portio）来实验端口。该示例提供了您可以构建和安装的驱动程序，并提供了一个示例用户模式程序，该程序描述了如何使用 Ioctls 来实现所需的端口 IO。

# ruby-on-rails - 用户控制器中的参数错误#update

> ID：15436373
> 
> 赞同：0
> 
> 时间：2013-03-15T15:37:00.613
> 
> 标签：ruby-on-rails

我没有更改我的 users_controller 文件，但现在我在更新用户配置文件“参数数量错误（2 比 1）”后收到此错误。它指向“app/controllers/users_controller.rb:41:in `update'”。

我的代码看起来是正确的，但我必须遗漏一些东西。有任何想法吗？

用户控制器：

```
class UsersController < ApplicationController

  def new
    @user = User.new
  end

  def profile
    @profile = User.profile
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      UserMailer.registration_confirmation(@user).deliver
      session[:user_id] = @user.id
      redirect_to root_url, notice: "Thank you for signing up!"
    else
      render "new"
    end
  end

  def show
    @user = User.find(params[:id])
  end

    def edit
      @user = User.find(params[:id])
end

  def index
    @users = User.all
  end

  def destroy
     User.find(params[:id]).destroy
     flash[:success] = "User deleted."
     redirect_to users_url
   end

def update
    @user = if current_user.role?(:admin)
       User.find(params[:id])
     else
       current_user
     end
    if @user.update_attributes(params[:user])
      flash[:success] = "Account updated"
      redirect_to @user
    else
      render 'edit'
    end
end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:55:26.420

我找到了解决问题的方法。

在 user.rb 我必须添加：

```
 def has_role?(role_name)
    role.present? && role.to_sym == role_name.to_sym
  end 
```

然后在我刚刚添加的控制器中：

```
 @user = if current_user.has_role?(:admin) 
```

在它缺少**“.has”**部分之前。

# font-awesome - 我为 Font Awesome 安装哪些文件

> ID：15436374
> 
> 赞同：6
> 
> 时间：2013-03-15T15:37:02.780
> 
> 标签：font-awesome

您好，
我正在努力将 Font Awesome 添加到我的网站。

在 Font Awesome github 页面上，它简单地说：

“安装 FontAwesome.otf 并访问复制和粘贴页面。快乐设计”

请有人建议我 - 我是否需要安装从 github 下载的文件夹中的所有其他文件？其他文件是：
fontawesome-webfont.eot
fontawesome-webfont.svg
fontawesome-webfont.ttf
fontawesome-webfont.woff

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:39:59.733

是的:) 我会安装所有这些。它们是用于不同浏览器支持的字体文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:43:17.010

将文件上传到您的网站并在 CSS 中使用 @font-face

[http://www.font-face.com/](http://www.font-face.com/)

这样可以确保最多的用户能够看到您的字体。

这是一个例子：

```
@font-face {
    font-family: 'myFont';
    src: url('includes/fonts/DejaVuSans-webfont.eot');
    src: url('includes/fonts/DejaVuSans-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/LDejaVuSans-webfont.woff') format('woff'),
         url('includes/fonts/DejaVuSans-webfont.ttf') format('truetype'),
         url('includes/fonts/DejaVuSans-webfont.svg#DejaVuSansBook') format('svg');
    font-weight: normal;
    font-style: normal;
}

body{ font-family: myFont, arial; } 
```

# python - PySide 中的终端应用程序

> ID：15436378
> 
> 赞同：3
> 
> 时间：2013-03-15T15:37:11.713
> 
> 标签：python, qt, pyside

我正在 PySide 中制作一个应用程序，我想添加一个类似控制台/终端的屏幕，您可以在其中看到提示并且可以键入命令。我怎么能做到这一点。我猜测 QPlainTextEdit/QTextEdit 的输出和实际提示的 QLineEdit 的某种组合。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:21:10.300

你可以看看 Spyder。他们使用 PyQt（类似）并有一个终端。我认为您可以导入他们的终端小部件，但我没有玩过它。

[https://code.google.com/p/spyderlib/](https://code.google.com/p/spyderlib/)

此外，它是迄今为止我最喜欢的 Python 编辑器！

我花了很多时间试图找到这样的东西，但无济于事。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T14:57:06.047

我使用自定义 QPlainTextEdit 和自定义 QLineEdit 做到了这一点。我还有一个指示器标签，它会在终端上显示“>>>”以显示用户输入。它需要更多的工作。最好的方法是基于 QTextEdit 和您自己的 io 处理程序创建您自己的自定义小部件。下面是我的执行方法示例，self.input 是 QLineEdit，self.view 是 QTextEdit。它应该让你大致了解。

```
import io, subprocess, shlex, code, rlcompleter, platform

def execute(self, currentText=None):
    """Execute runs the command given based on the console type.

    If the console type is "both" then execute will run python commands 
    unless the user give the input ::os::command or ("::(platform.syste())::command").
    Otherwise the console type will determine the what the input will execute with.

    Args:
        currentText(str): Text to execute. None will run the text from the QLineEdit self.input.
    """
    # Check for given text
    if currentText is None:
        currentText = self.input.text()
        self.input.clear()
        self.view.display(currentText, "input")
    else:
        cmd = re.search("^>>>", currentText) # search for start only 
        if cmd is None:
            currentText = ">>>" + currentText
        else:
            self.view.display(currentText, "input")
    # end

    # Variables
    self.completer.clear()
    cmdString = re.sub("^>>>", "", currentText)
    result = None
    displayType = "output"
    run, cmdString = self.getRunType(cmdString)

    try:
        # Check where the output is going
        sys.stdout = self.out = io.StringIO()
        sys.stderr = sys.stdout

        if run == "python": # Run python command
            result = self._runInterpreter(cmdString)
            displayType = "python"

        elif run == "os": # Run os command
            result = self._runSubprocess(cmdString)
            displayType = "os"
    except Exception as err:
        result = str(err)
        displayType = "Error"

        notFoundPython = "NameError:" in result and "is not defined" in result 
        notFoundWindows = "returned non-zero exit status" in result
        if notFoundPython or notFoundWindows:
            result = "Command not found"
    finally:
        sys.stdout = self.old_stdout
        sys.stderr = self.old_stdout

        self.display(result, displayType)
# end execute

def getRunType(self, cmdString):
    run = self._consoleType

    # Check the run type
    if self._consoleType == "both":
        if re.search("^::python::", cmdString) is not None:
            cmdString = re.sub("^::[a-z]*::", "", cmdString)
            run = "python"

        elif re.search("^(::os::|::"+platform.system()+"::)", cmdString) is not None:
            cmdString = re.sub("^::[a-z]*::", "", cmdString)
            run = "os"
        else:
            run = "python"
    # end

    return run, cmdString
# end getRunType

def _runInterpreter(self, cmdString, outIO=None, run=None):
    # Check for a proper console type
    if(self._consoleType != "both" and self._consoleType != "python"):
        return

    # Get the IO
    if outIO is None:
        outIO = sys.stdout

    # Run python command       

    self.interpreter.push(cmdString)

    # Check outIO
    result = "Unreadable buffer: Check python's sys.stdout"
    if isinstance(outIO, io.StringIO):
        result = outIO.getvalue()
    else:
        if outIO.readable():
            result = str(outIO.readlines())

    # Check for error
    if re.search("^Traceback", result) or re.search("[a-zA-z]*Error:", result):
        raise ValueError(result)

    return result
# end _runInterpreter

def _runSubprocess(self, cmdString, run=None):
    # Check for a proper console type
    if(self._consoleType != "both" and self._consoleType != "os"):
        return

    # Run OS command
    cmd = shlex.split(cmdString)
    result = subprocess.check_output(cmd, shell=True, stderr=subprocess.STDOUT).decode("utf-8")

    # Check for error
    if re.search("^Traceback", result) or re.search("[a-zA-z]*Error:", result):
        raise ValueError(result)

    return result
# end _runSubprocess 
```

# php - 使用 PHP 从远程服务器下载多个图像（大量图像）

> ID：15436388
> 
> 赞同：5
> 
> 时间：2013-03-15T15:37:45.660
> 
> 标签：php, curl, upload, copy

我正在尝试从外部服务器下载大量文件（大约 3700 张图像）。这些图像每个从 30KB 到 200KB。

当我`copy()`在 1 张图像上使用该功能时，它可以工作。当我在循环中使用它时，我得到的只是 30B 图像（空图像文件）。

我尝试使用`copy`, `cURL`,`wget`和`file_get_contents`. 每次，我要么得到很多空文件，要么什么都没有。

这是我尝试过的代码：

wget：

```
exec('wget http://mediaserver.centris.ca/media.ashx?id=ADD4B9DD110633DDDB2C5A2D10&t=pi&f=I -O SIA/8605283.jpg'); 
```

复制：

```
if(copy($donnees['PhotoURL'], $filetocheck)) {
  echo 'Photo '.$filetocheck.' updated<br/>';
} 
```

卷曲：

```
$ch = curl_init();
$source = $data[PhotoURL];
curl_setopt($ch, CURLOPT_URL, $source);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$data = curl_exec ($ch);
curl_close ($ch);

$destination = $newfile;
$file = fopen($destination, "w+");
fputs($file, $data);
fclose($file); 
```

似乎没有什么工作正常。不幸的是，我没有太多选择一次下载所有这些文件，我需要一种方法让它尽快工作。

非常感谢，安托万

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T16:00:09.337

一个一个地获取它们可能会很慢。考虑将它们分成 20-50 个图像的包并用多个线程抓取它们。这是帮助您入门的代码：

```
$chs = array();
$cmh = curl_multi_init();
for ($t = 0; $t < $tc; $t++)
{
    $chs[$t] = curl_init();
    curl_setopt($chs[$t], CURLOPT_URL, $targets[$t]);
    curl_setopt($chs[$t], CURLOPT_RETURNTRANSFER, 1);
    curl_multi_add_handle($cmh, $chs[$t]);    
}

$running=null;
do {
    curl_multi_exec($cmh, $running);
} while ($running > 0);

for ($t = 0; $t < $tc; $t++)
{
    $path_to_file = 'your logic for file path';
    file_put_contents($path_to_file, curl_multi_getcontent($chs[$t]));
    curl_multi_remove_handle($cmh, $chs[$t]);
    curl_close($chs[$t]);
}
curl_multi_close($cmh); 
```

我最近使用这种方法抓取了几百万张图像，因为一张一张需要长达一个月的时间。

您一次抓取的图像数量应取决于它们的预期大小和您的内存限制。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T15:45:54.333

我为此使用了这个功能并且工作得很好。

```
function saveImage($urlImage, $title){

    $fullpath = '../destination/'.$title;
    $ch = curl_init ($urlImage);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER,1);
    $rawdata=curl_exec($ch);
    curl_close ($ch);
    if(file_exists($fullpath)){
        unlink($fullpath);
    }
    $fp = fopen($fullpath,'x');
    $r = fwrite($fp, $rawdata);

    setMemoryLimit($fullpath);

    fclose($fp);

    return $r;
} 
```

结合另一个防止内存溢出：

```
function setMemoryLimit($filename){
   set_time_limit(50);
   $maxMemoryUsage = 258;
   $width  = 0;
   $height = 0;
   $size   = ini_get('memory_limit');

   list($width, $height) = getimagesize($filename);
   $size = $size + floor(($width * $height * 4 * 1.5 + 1048576) / 1048576);

   if ($size > $maxMemoryUsage) $size = $maxMemoryUsage;

   ini_set('memory_limit',$size.'M');

} 
```

# symfony - 如何指定数据库进行逆向工程？

> ID：15436394
> 
> 赞同：3
> 
> 时间：2013-03-15T15:37:56.713
> 
> 标签：symfony, doctrine-orm

我正在按照[本指南](http://symfony.com/doc/2.1/cookbook/doctrine/reverse_engineering.html)对数据库进行逆向工程。该指南说它使用该`paramters.yml`文件作为数据库参数，但我怎样才能覆盖它呢？我的 中列出了几个连接`config.yml`，我希望能够选择其中一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:43:40.200

使用`--em`参数指定您要使用的实体管理器。

```
doctrine:mapping:convert [--filter="..."] [--force] [--from-database] [--extend[="..."]] [--num-spaces[="..."]] [--namespace[="..."]] [--em[="..."]] to-type dest-path 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:56:21.333

如果您将每个 Doctrine 连接分配给它自己的实体管理器，那么您可以使用`--em="entity_manager_name"`标志指定实体管理器。但是，您必须手动将每个捆绑包映射到实体管理器。在以下示例配置中，另一个连接和实体管理器名为*customer*

```
$ php app/console doctrine:mapping:convert yml ./src/Acme/CustomerBundle/Resources/config/doctrine/metadata/orm --em="customer" --from-database --force 
```

配置.yml

```
# Doctrine Configuration
doctrine:
    dbal:
        default_connection:   default
        connections:
            default:
                driver:   %database_driver%
                host:     %database_host%
                port:     %database_port%
                dbname:   %database_name%
                user:     %database_user%
                password: %database_password%
                charset:  UTF8
           customer:
                driver:   %database_driver2%
                host:     %database_host2%
                port:     %database_port2%
                dbname:   %database_name2%
                user:     %database_user2%
                password: %database_password2%
                charset:  UTF8

    orm:
        default_entity_manager:   default
        entity_managers:
            default:
                connection:       default
                mappings:
                    AcmeDemoBundle: ~
                    AcmeStoreBundle: ~
            customer:
                connection:       customer
                mappings:
                    AcmeCustomerBundle: ~ 
```

# php - Kohana DB 连接从 MySql 更改为 PDO

> ID：15436400
> 
> 赞同：0
> 
> 时间：2013-03-15T15:38:08.987
> 
> 标签：php, mysql, pdo, kohana-3.2

我用 kohana 3.2 构建了一个项目并使用 mysql 作为默认驱动程序，现在我正在考虑将其更改为 PDO，我只需要知道它是否会对我的应用程序产生任何影响，如果是的话，我应该在哪里检查/修复可能的问题。

# android - 以编程方式结合几种类型的xml布局android

> ID：15436401
> 
> 赞同：1
> 
> 时间：2013-03-15T15:38:12.243
> 
> 标签：android, android-layout, android-linearlayout

我有一个要求，其中有 2 个以编程方式生成的屏幕和 2 个 xml 布局。现在我需要多次组合这些布局。

For ex, i have screen 1 - programatically created, screen 2 - programatically created, screen 3- from a xml layout, screen 4 - from a xml layout

My final layout design should be a single screen with screen1, screen2, screen 3, screen 4, screen 2... with all screens sharing equal screen space based on the number of screen i input. Please let me know the approach. Some screens are having relative layout and some linear ones. So it should combine these.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:48:06.467

您需要`addView()`在主布局上调用。一旦构建了主布局（包含所有其他布局），该`addView()`方法将向现有的主布局添加新视图。

要添加新布局，您需要先对其进行充气。

```
LinearLayout primaryLayout;

LayoutInflater layoutInflater = (LayoutInflater)this.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
LinearLayout newLayout = (LinearLayout)layoutInflater.inflate(R.layout.your_new_layout, null, false);

primaryLayout.addView(newLayout); 
```

AddView 还提供了一个索引选项，用于将新布局放置在主布局中的特定点。

尝试从一个空白的 XML 布局开始（比如称为 primary_layout）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/primaryLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</RelativeLayout> 
```

然后，当您的活动开始时，首先设置它，然后根据需要充气并添加：

```
setContentView(R.layout.primary_layout);
LinearLayout primaryLayout = (LinearLayout) findViewById(R.id.primaryLayout); 
```

然后，您可以将新视图添加到该视图中。至于多次添加，我相信是通过引用完成的，所以它只看到一个视图。尝试在方法中构建视图，然后返回视图。如：

```
private View buildNewView(){

    LayoutInflater layoutInflater = (LayoutInflater)this.getSystemService( Context.LAYOUT_INFLATER_SERVICE );  
    LinearLayout newView = (LinearLayout)layoutInflater.inflate( R.layout.my_new_view null, false );

    return newView ;
} 
```

并通过调用它`primaryLayout.addView(buildNewView();`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:14:40.373

你可以看看碎片。他们似乎完全按照您的需要做。以下是它们的[培训](http://developer.android.com/training/basics/fragments/index.html "Android 开发者 - 培训 - 片段")和[API 指南](http://developer.android.com/guide/components/fragments.html "Android 开发者 - API 指南 - 片段")的链接。

在您的 xml 文件中，您可以在父项中指定 4 个子布局`LinearLayout`，每个子布局都有一个属性`android:layout_weight="1"`，因此每个子布局只会占用相同数量的空间。如果是纵向，建议设置`android:layout_width="match_parent`和`android:layout_height="0dp"`现在，您可以将每个子布局的 id 标记为 id1、id2、id3 等，但您也可以将您将创建的两个布局标记为`android:id="@+id/fragment_container_first`和`android:id="@+id/fragment_container_second`。

在 Java 代码中，您可以将 contentView 设置为 xml 文件的 id (`setContentView(R.layout.myXMLLayout);`），按照我上面提供的培训指南链接创建片段的两个实例，然后使用类似`getSupportFragmentManager().beginTransaction() .add(R.id.fragment_container_first, firstFragment).commit();`和`getSupportFragmentManager().beginTransaction() .add(R.id.fragment_container_second, secondFragment).commit();`（如果您使用的是支持库，这就是培训指南使用）。

我真的希望这可以帮助你。您可以使用 Fragments 构建一个非常灵活的 UI。例如，稍后，您可以在运行时将前两个片段替换为其他片段，从而增加灵活性。您甚至可以为不同的屏幕尺寸设置不同的 UI，在手机上使用更紧凑的视图，但在平板电脑等更大的屏幕上提供更多功能。

如果这对您有所帮助，我很想听听！

# java - 将jar文件放在存储库中的位置

> ID：15436403
> 
> 赞同：0
> 
> 时间：2013-03-15T15:38:17.773
> 
> 标签：java, jar, repository

我在 github 上托管了一个 Java 项目。`.jar`我的项目需要导入几个自定义文件。由于我能够在任何地方运行该项目，我想在 git 存储库中包含 jar 文件。是否有推荐的常规位置来保存 jar 文件，例如`lib`根项目目录的 dir？

附言

目前我没有使用 Maven，也没有考虑它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:45:31.150

通常的情况实际上是一个*lib*文件夹。或者*webapp/WEB-INF/lib*它是一个 Web 应用程序。

但是通常情况很糟糕。我不会把罐子放在我的源代码管理系统中。如果您需要添加对另一个项目的引用，您可以考虑查看[git submodules](http://git-scm.com/book/en/Git-Tools-Submodules)（尽管您使用的是 Github）。

# django - django模板中的request.path

> ID：15436407
> 
> 赞同：7
> 
> 时间：2013-03-15T15:38:31.547
> 
> 标签：django

我尝试这样的事情：

```
{% if request.path == 'contact' %}
    <p>You are in Contact</p>
{% endif %}

{% if request.path == 'shop' %}
    <p>You are in Shop</p>
{% endif %} 
```

为什么那行不通？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T15:58:31.303

默认情况下，Django 的模板处理器是

```
TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.static",
    "django.core.context_processors.tz",
    "django.contrib.messages.context_processors.messages"
) 
```

（见[文档](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS)）

您需要在模板`django.core.context_processors.request`中使用`request`，因此将其添加到**settings.py**中的列表中。如果那里没有该变量，请设置它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-05-26T07:20:24.823

尝试这个：

```
{% if 'contact' in request.path %} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T15:48:41.287

尝试：

```
{% if request.path == '/contact/' %}
    <p>You are in Contact</p>
{% elif request.path == '/shop/' %}
    <p>You are in Shop</p>
{% endif %} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-16T11:57:30.960

**1.8 之前的** **settings.py**

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'other.required.processors.names',
    'django.core.context_processors.request',
) 
```

**views.py（使用 className.as_view）**

```
from django.template import *

class className(TemplateView):
    template_name = "name.html" 
```

**views.py（正常使用）**

```
from django.shortcuts import render_to_response

def name(request):
    return render_to_response('name.html'{},context_instance=RequestContext(request)) 
```

# php - 在 htaccess 中为用户配置文件创建重写规则

> ID：15436413
> 
> 赞同：2
> 
> 时间：2013-03-15T15:38:48.817
> 
> 标签：php, apache, mod-rewrite, url-rewriting, rewrite

所以我有一个难题..

无法弄清楚如何将此 URL 重写为此 URL：

URL=www.EXAMPLE.com/users/USERNAME

此 URL= www.EXAMPLE.com/USERNAME

这不是我第一次使用 Stack Overflow，但这是我第一次真正需要一个帐户来找到我的答案。我会相应地感谢。

谢谢，尼克

编辑：

```
 RewriteRule ^user/(.*)$ /$1 [R=301,L] 
```

但是我得到一个 404 页面，我说很奇怪。

页面重定向成功，但使用 404 代替。

HTACCESS如下：

```
 ## Mod_rewrite in use.

   RewriteEngine On
   RewriteRule ^user/(.*)$ /$1 [R=301,L]

   ## Begin - Rewrite rules to block out some common exploits.
   # If you experience problems on your site block out the operations listed below
   # This attempts to block the most common type of exploit `attempts` to Joomla!
   #
   # Block out any script trying to base64_encode data within the URL.
   RewriteCond %{QUERY_STRING} base64_encode[^(]*\([^)]*\) [OR]
   # Block out any script that includes a <script> tag in URL.
   RewriteCond %{QUERY_STRING} (<|%3C)([^s]*s)+cript.*(>|%3E) [NC,OR]
   # Block out any script trying to set a PHP GLOBALS variable via URL.
   RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
   # Block out any script trying to modify a _REQUEST variable via URL.
   RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
   # Return 403 Forbidden header and show the content of the root homepage
   RewriteRule .* index.php [F]
   #
   ## End - Rewrite rules to block out some common exploits.

   ## Begin - Custom redirects
   #
   # If you need to redirect some pages, or set a canonical non-www to
   # www redirect (or vice versa), place that code here. Ensure those
   # redirects use the correct RewriteRule syntax and the [R=301,L] flags.
   #

   ## End - Custom redirects

   ##
   # Uncomment following line if your webserver's URL
   # is not directly related to physical file paths.
   # Update Your Joomla! Directory (just / for root).
   ##

   # RewriteBase /

   ## Begin - Joomla! core SEF Section.
   #
   RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]
   #
   # If the requested path and file is not /index.php and the request
   # has not already been internally rewritten to the index.php script
   RewriteCond %{REQUEST_URI} !^/index\.php
   # and the request is for something within the component folder,
   # or for the site root, or for an extensionless URL, or the
   # requested URL ends with one of the listed extensions
   RewriteCond %{REQUEST_URI} /component/|(/[^.]*|\.(php|html?|feed|pdf|vcf|raw))$ [NC]
   # and the requested path and file doesn't directly match a physical file
   RewriteCond %{REQUEST_FILENAME} !-f
   # and the requested path and file doesn't directly match a physical folder
   RewriteCond %{REQUEST_FILENAME} !-d
   # internally rewrite the request to the index.php script
   RewriteRule .* index.php [L]
   #
   ## End - Joomla! core SEF Section. 
```

[2013 年 4 月 8 日更新] 所以过了一会儿，我发现我使用的扩展程序与 Joomla 一起工作的唯一方法！您需要使用一个名为 sh404sef 的单独扩展来完成这项工作。所以简而言之，像我想的那样编辑 HTACCESS 文件是没有用的。最终花了 40 美元，它立即奏效。哈哈

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:41:25.653

我发现对 .htaccess url 重写有用的网站是： [http ://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html](http://roshanbh.com.np/2008/03/url-rewriting-examples-htaccess.html)

这个例子：

> 将 yoursite.com/user.php?username=xyz 重写为 yoursite.com/xyz
> 
> 你检查过 zorpia.com。如果你在浏览器中输入[http://zorpia.com/roshanbh233](http://zorpia.com/roshanbh233) ，你可以在那里看到我的个人资料。如果您想执行相同类型的重定向，即[http://yoursite.com/xyz](http://yoursite.com/xyz)到 [http://yoursite.com/user.php?username=xyz](http://yoursite.com/user.php?username=xyz) ，那么您可以将以下代码添加到 .htaccess 文件中。

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$ user.php?username=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ user.php?username=$1 
```

因此，在您的情况下，您可以选择：

```
RewriteRule ^users/([a-zA-Z0-9_-]+)$ user.php?username=$1
RewriteRule ^users/([a-zA-Z0-9_-]+)/$ user.php?username=$1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T15:43:40.637

这应该回答你的问题

```
RewriteRule ^users/(.*)$ $1 
```

来源：[.htaccess 从子目录重写到根目录](https://stackoverflow.com/questions/8617799/htaccess-rewrite-from-subdirectory-to-root)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T20:18:17.933

请参阅[https://stackoverflow.com/questions/20610980/mod-rewrite-redirect-except-parked-domain](https://stackoverflow.com/questions/20610980/mod-rewrite-redirect-except-parked-domain) 所有 www.primary.com 转到 www.primary.com/webtrees

```
Options -Indexes +SymLinksIfOwnerMatch
RewriteEngine on
RewriteBase /
RewriteCond $1 !^parked.com/
RewriteCond $1 !^piwik/
RewriteCond $1 !^wordpress/
RewriteCond $1 !^marker.htm
RewriteCond %{REQUEST_URI} !^/webtrees/
RewriteRule ^(.*)$ /webtrees/$1 [L] 
```

# asp-classic - 从经典 ASP、IIS7.5 调用的 .NET dll

> ID：15436414
> 
> 赞同：1
> 
> 时间：2013-03-15T15:38:49.030
> 
> 标签：asp-classic, interop, iis-7.5

我有一个用 C# 编写的 .NET、COM 可见 DLL，我从经典 ASP 页面调用它。

在 32 位 Win Server 2003 和 IIS 6 上一切正常，但我无法让它在我的 64 位开发机器（Win7、IIS 7.5）上运行。

我收到以下错误：

> Microsoft VBScript 运行时错误“800a01ad”
> 
> ActiveX 组件无法创建对象

上线失败

> 设置 objMyDll = Server.CreateObject("MyDLL.ProgId")

我使用它注册了我的 DLL `regasm /codebase`，它在注册表中看起来都很好。

我也尝试`regasm /tlb`将DLL放入GAC无济于事。

我在 IIS 中启用了 32 位应用程序。

我在应用程序池中以经典模式和集成模式进行了尝试。

我的 DLL 没有引用任何其他 DLL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:35:03.487

这是一个权限问题。我刚刚写了**[这个答案](https://stackoverflow.com/questions/15251240/installed-word-on-the-server-but-cannot-find-it-to-set-permissions-in-component/15490603#15490603)**- 看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:34:04.420

您在事件日志中有一些错误吗？我认为，您需要在 COM+ 设置中授予指定 ProgID 的执行和启动权限。

# java - 无法使用 BufferedReader.readline() 从套接字读取

> ID：15436415
> 
> 赞同：0
> 
> 时间：2013-03-15T15:38:50.790
> 
> 标签：java, sockets

我正在尝试在 java 中开发客户端/服务器通信应用程序。但在最初阶段，我无法使用`BufferedReader.readline()`. 我用谷歌搜索了很多，但找不到我的问题的具体答案。
调试客户端应用程序显示客户端应用程序在`response.readline()`.

服务器：

```
package myserver;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;

public class MyServer {
    public static void main(String[] args) {
        String[] tokens = new String[10];
        int count = 0;
        ServerSocket server = null;
        try {
            server = new ServerSocket(16);
        } catch (IOException ex) {
            Logger.getLogger(OdeskServer.class.getName()).log(Level.SEVERE, null, ex);
        }
        if (server != null) {
            while (true) {
                PrintWriter response;
                BufferedReader command;
                String inCommand;
                try {
                    Socket client = server.accept();
                    System.out.println("Connected!");
                    response = new PrintWriter(client.getOutputStream());
                    command = new BufferedReader(new InputStreamReader(client.getInputStream()));
                    response.print("EHLO\r\n");
                    command.read(); //just to stop the application to start a new iteration
                } catch (IOException ex) {
                    Logger.getLogger(OdeskServer.class.getName()).log(Level.SEVERE, null, ex);
                }
            }
        }
    }
} 
```

客户：

```
package myclient;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.logging.Level;
import java.util.logging.Logger;

public class MyClient {

    public static void main(String[] args) {
        Socket server = null;
        PrintWriter command;
        BufferedReader response;
        BufferedReader Console = new BufferedReader(new InputStreamReader(System.in));
        try {
            server = new Socket("175.107.231.218", 16);
            System.out.println("Connected");
            command = new PrintWriter(server.getOutputStream());
            response = new BufferedReader(new InputStreamReader(server.getInputStream()));
            while (server.isBound()) {
                String input = response.readLine(); //Here is where the communication halts
                System.out.print(input);
            }
        } catch (UnknownHostException ex) {
            Logger.getLogger(OdeskClient.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(OdeskClient.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:48:21.353

您可能需要`response.flush()`从服务器调用以确保套接字不会缓冲您的消息以等待更多写入一起批处理。

# jquery - Asp.net Web API 在 ajax 调用中给出错误

> ID：15436419
> 
> 赞同：1
> 
> 时间：2013-03-15T15:39:01.513
> 
> 标签：jquery, asp.net-mvc-4, asp.net-web-api

我已经创建了 ASP.NET Web API 服务并托管了它。当我检查 Fiddler 时，该服务工作正常，但是当我通过 jQuery ajax 调用该服务时，它不起作用，我也没有收到任何错误。我尝试调用不同的 API 方法但遇到相同的问题

网络接口：

```
namespace WebApi.Controllers
{
    public class ValuesController : ApiController
    {
        // GET api/values
        public IEnumerable<string> Get()
        {
            return new string[] { "value1", "value2" };
        }

        // GET api/values/5
        public string Get(int id)
        {
            return "value";
        }

        // POST api/values
        public string Post(Interview Interview)
        {

            return "Date: " + Interview.DateOfSurvey + " \n rdInterviewObtained: " + Interview.rdInterviewObtained + "\n txtWhowasinterOther: " + Interview.txtWhowasinterOther;
        }

        // PUT api/values/5
        public void Put(int id, [FromBody]string value)
        {

        }

        // DELETE api/values/5
        public void Delete(int id)
        {
        }
    }
} 
```

阿贾克斯调用：

```
$("#btnSave2").click(function () {
var person = { DateOfSurvey: '01-01-2012', rdInterviewObtained: 'N', txtWhowasinterOther: 'N' };
alert('inside button click');
jQuery.support.cors = true;

        $.ajax({
            url: "http://url/api/Values",
            type: 'GET',
            //data: person,
            //dataType: 'json',
            success: function (data) {
                alert('success');

            },
            error: function (x, y, z) {
                alert('error');
                alert(x + '\n' + y + '\n' + z);
            }
        });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:53:07.197

您似乎在某个按钮的 .click 处理程序中调用此 AJAX 方法。如果这是一个提交按钮，请确保您通过从回调中返回 false 来取消默认操作，否则您的 AJAX 调用可能永远没有时间执行。

您的代码的另一个问题是您已指示 jQuery 使用 CORS，但要使其正常工作，您需要 Web API 发送正确的响应标头。这是[`an article`](http://blogs.msdn.com/b/carlosfigueira/archive/2012/02/20/implementing-cors-support-in-asp-net-web-apis.aspx)您可能会读到的，它说明了如何在服务器上实现这一点。

```
jQuery.support.cors = true;

$('#btnSave2').click(function () {
    $.ajax({
        url: 'http://url/api/Values',
        type: 'GET',
        success: function (data) {
            alert('success');
        },
        error: function (x, y, z) {
            alert('error');
            alert(x + '\n' + y + '\n' + z);
        }
    });

    return false;
}); 
```

# dynamics-crm-2011 - CRM 2011 插件未触发

> ID：15436423
> 
> 赞同：2
> 
> 时间：2013-03-15T15:39:09.777
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm

我有两个插件（一个是创建前处理程序，另一个是更新后处理程序）。我使用 snk 从这两个文件构建了一个插件 DLL，将 dll 移动到服务器 bin 并使用注册工具注册了这两个插件并重置服务。出于某种原因，插件没有触发......只是为了确保它没有在我的任何插件代码上出错，我将以下行作为两个插件中的第一段代码：

抛出新的 InvalidPluginExecutionException("1");

尽管如此，插件都不会触发，创建和更新都会简单地完成。有谁知道我是否在这里遗漏了什么...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T21:53:25.003

您是否将它们注册为同步或异步？如果是异步，则检查您的 crm 异步服务是否正常工作。尝试将它们注册为同步并查看当您按下实体上的保存时它是否会更长，这可能意味着插件正在工作..另外请发布插件注册的打印屏幕

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T16:00:55.047

您可以使用 CRMDiagTool 在 CRM 服务器上启用跟踪，以查看您的插件是否生成任何异常：

[CRM诊断工具](http://crmdiagtool2011.codeplex.com/)

在平台跟踪选项卡上，选择应用程序和异常类别，单击启用跟踪，在 CRM 中执行您希望触发插件的操作。然后单击禁用跟踪，单击打开跟踪目录并打开生成的跟踪文件。您可能会在文件中看到有关问题的异常或一些线索。

# java - Java Time - 在终端中输入并查看是否在一个范围内

> ID：15436424
> 
> 赞同：0
> 
> 时间：2013-03-15T15:39:11.510
> 
> 标签：java, time

我正在做一些需要用户在终端窗口中输入值的事情，例如：

开始时间：`0800` 结束时间：`1200`

然后我需要检查这个人的开始和结束时间是否在一个范围内。因此，如果工作时间是 0900 - 1700 并且现在是 11:45，则上述用户将显示为可用，而如果是 1201，则上述用户将不可用。

目前我只是将时间作为字符串拉入：

```
void setWorkHours(String hrs)
    {
        this.hours=hrs;
    }

    public String getWorkHours()
    {
        return hours;
    } 
```

非常感谢任何帮助。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:54:09.687

如果用户可以输入开始日期和时间以及结束日期和时间会更好。这将允许用户一次输入他们的整个星期。

尽管如此，解决方案几乎相同。

*   将开始时间（日期/时间）转换为[日历](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)实例。
*   将结束时间（日期/时间）转换为 Calendar 实例。
*   使用 Calendar after 和 before 方法确定输入的时间（日期/时间）是否在开始时间和结束时间之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:58:27.187

我不会为你做作业，但我会为你提供以下建议：

1.  您将需要从终端获取输入（查看`System.in`）
2.  您将需要解析输入。为此，您需要确定什么是有效输入。“0800”、“08:00”、“08.00”、“8:00”、“8:00 AM”、“07:60”、“8 点钟”……哪些是有效的，哪些是有效的你会拒绝吗？你的错误处理策略是什么？只是炸毁应用程序，还是向用户提供一个好消息？
3.  你在做什么数据类型来解析输入？您可能有四个`ints`: `startHours`, `startMins`, `endHours`, `endMins`。或者，也许您将使用 Java 的`Date`或`Calendar`对象。还有其他选项，您需要选择最适合您的选项。
4.  你在乎秒吗？毫秒？
5.  一旦你解析了办公时间，你将需要一些方法来确定你是在工作时间之内还是时间之外。大概这是一个单独的输入。您需要解析它（提示，使用实用方法进行解析，并在此处重用它），然后将其传递给执行某些计算的方法。类似的东西`bool isInOfficeHours(int hours, in mins)`。此方法的参数可能应该与您用于存储办公时间的数据类型相匹配。

我希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:24:33.460

下面的代码将在 startTime 和 endTime 中采用两个字符串，并将与范围对象进行比较，您必须根据需要定义范围。我已经发表评论来解释代码。

```
 /*
      * this method will split hhmm time into two parts. 
      */
 public String[] getTimeHHMM(String time){   
      String hhmm[] = new String[2];

      if(time !=null && time.length() > 1){
          hhmm[0] = time.substring(0, time.length() - 2);
          hhmm[1] = time.substring(time.length() - 2, time.length());
      }
      else{
          // time not formatted correctly so deal with here
          hhmm[0] = "";
          hhmm[1] = time;
      }
      return hhmm;
 }

     //assuming hrs is a string containing only one time in the format hhmm
     String startTime[] = getTimeHHMM(startTimeStr);
     String endTime[] = getTimeHHMM(endTimeStr);

    int startTimeHrs =  Integer.parseInt(startTime[0]);
     int startTimeMins = Integer.parseInt(startTime[1]);

     int endTimeHrs = Integer.parseInt(endTime[0]);
     int endTimeMins = Integer.parseInt(endTime[1]);

     Date start = new Date();
     Date end = new Date();

 Calendar start = Calendar.getInstance();
 start.set(Calendar.HOUR_OF_DAY, startHrs);
 start.set(Calendar.MINUTE, startMins );

 Calendar end = Calendar.getInstance();
 end.set(Calendar.HOUR_OF_DAY, endHrs);
 end.set(Calendar.MINUTE, endMins );

 ///lets say the range is startRange and endRange it should be Calendar instances, you will need to construct these as I did above with setting your range whatever you like
 Calendar endRange;
 Calendar startRange;

 if(start.compareTo(startRange) >= 0 && end.compareTo(endRange) <=0 ){

    // Here it means it is within working hours

 } 
```

# html - 锚标记文本中显示的 URL

> ID：15436434
> 
> 赞同：0
> 
> 时间：2013-03-15T15:39:48.673
> 
> 标签：html, url, anchor, phpbb3

有一个真正令人头疼的问题，我在我的站点中有一个使用 PHPBB3 的论坛，它在大多数浏览器上都可以正常工作，但在 PC 上的 IE 和 Firefox 上存在一些问题，直接在某些链接的标签文本中显示 HREF 属性。

请看下面的截图：

![IE9 截图](../Images/aad896adb5002c8ab6d1d3e174fc29da.png)

但是，在 HTML 中，锚文本中绝对没有 HREF。这是从 IE8 视图源复制的 HTML：

```
<p class="author">
  <a href="./viewtopic.php?p=2#p2">
    <img src="./styles/proSpecial/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post"  style="height:9px;;width:11px;" />
  </a>
  by
  <strong>
    <a href="./memberlist.php?mode=viewprofile&amp;u=2" style="color: #AA0000;" class="username-coloured">
      admin
    </a>
  </strong> 
  &raquo; Tue Mar 12, 2013 5:00 pm 
</p> 
```

您可以在[此处查看相关页面](http://www.retrogamesparty.co.uk/forum/viewtopic.php?f=3&t=2)

以下是我的发现：

Mac：所有浏览器变体都能正常工作 PC：Chrome 和 Safari 都很好，IE 显示图片中的链接，Firefox 显示更多显示的 URL。

完全坚持尝试什么，CSS 中没有任何东西试图隐藏或显示东西，所以它看起来像是浏览器的怪癖。

请注意，在左侧，在所有浏览器中，作者链接不会显示其 URL，仅在右侧面板中显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:53:55.933

`:after`使用伪类在 CSS 中有一个奇怪的条目：

```
P A[href]:after {
    content: "" attr(title) "";
} 
```

在“style-fixer.php”中的某个地方。

# java - 使用 jdbc.sqlserver 的 TCP/IP 连接问题

> ID：15436436
> 
> 赞同：0
> 
> 时间：2013-03-15T15:39:54.027
> 
> 标签：java, sql-server, jdbc, driver, connection-string

我正在尝试连接到我网络上机器上的 SQL 数据库。据我所知，TCP/IP 设置和防火墙设置都是正确的，可以连接，但我的连接字符串没有运气。

代码：

```
static String dbUser = "user";
static String dbPass = "pass";
static String dbURL = "jdbc:sqlserver://SERVER1/BKUPEXEC;Instance=SQL2005;databaseName=images;";
static String driverName = "com.microsoft.sqlserver.jdbc.SQLServerDriver";

try {
        Class.forName(driverName).newInstance();
        con = DriverManager.getConnection(dbURL, dbUser, dbPass);
        System.out.println("Connected with host:port/database.");
    } catch (ClassNotFoundException | InstantiationException | IllegalAccessException |    SQLException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

错误：

```
SEVERE: null
com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host TMTSERVER1, port 1433 has failed. Error: "connect timed out. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.". 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:48:25.130

尝试

```
"jdbc:sqlserver://SERVER1/BKUPEXEC;instanceName=SQL2005;databaseName=images;"
                                   ^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:00:59.943

我最终将连接字符串更改为使用服务器的 IP 地址而不是域名。还证明 SQL 服务器没有使用默认端口号。

这是新的工作连接字符串：

```
static String dbURL = "jdbc:sqlserver://192.168.1.240:1053;databaseName=SI_images;"; 
```

# charts - 在智能 gwt 面图中设置线宽

> ID：15436440
> 
> 赞同：0
> 
> 时间：2013-03-15T15:39:59.063
> 
> 标签：charts, smartgwt

我正在取消 FacetChart 小部件以同时显示多个图表。使用 ChartType.LINE 时的默认线宽相当大。很难区分具有几乎相似值的图。有没有办法设置更小的线宽？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:50:12.213

使用 FusionCharts，只需设置“lineThickness”属性即可设置线宽。此外，它还支持各种属性来配置线图在​​图表上的显示方式。它可以显示为虚线，使用各种颜色的线图等。试试吧！！！

# php - 关于 WHERE 查询的 PHP 错误代码

> ID：15436443
> 
> 赞同：0
> 
> 时间：2013-03-15T15:40:06.773
> 
> 标签：php, mysql, sql

好的，我在这里感到困惑。

我有这段代码，它完美无缺

```
$result = mysql_query("SELECT * FROM e_track_access_log WHERE member_id>0 ORDER BY     
datetime_accessed DESC LIMIT 0,20");
?>
            <?php
while($rows=mysql_fetch_array($result)){
?> 
```

我获取大于 0 的字段 member_id 中的所有内容

我现在所做的只是改变了以下

```
$result = mysql_query("SELECT * FROM e_track_access_log WHERE dealer=Demo ORDER BY    
datetime_accessed DESC LIMIT 0,15");
?>
           <?php
while($rows=mysql_fetch_array($result)){
?> 
```

我想要做的只是显示其中包含 Demo 的经销商信息。

这是我收到的错误

```
Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in   
/home/www/controldemo.e-track.co.za/control_main.php on line 177 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:40:48.110

您需要引号来比较字符串：

```
$result = mysql_query("SELECT * FROM e_track_access_log WHERE dealer='Demo' ORDER BY datetime_accessed DESC LIMIT 0,20"); 
```

但请注意，在这种情况下不要使用双引号，否则您将关闭当前`mysql_query`字符串参数。

无论如何，正如已经提到的那样，`mysql_query` [已弃用](http://php.net/manual/en/function.mysql-query.php)。我建议您使用[PDO](http://php.net/manual/es/book.pdo.php)，它还可以为您提供更高的 SQL 注入安全性。

下面是它的用法示例：

```
$mysqlString =  'mysql:' 
              .'host='.$yourHost.';' 
              .'dbname='.$yourDBName; 

$conn = new PDO( $mysqlString, $yourUser, $yourPassword);  

$stmt = $conn->prepare(("SELECT * FROM e_track_access_log WHERE dealer=:dealer ORDER BY datetime_accessed DESC LIMIT 0,20");

$stmt->bindParam(':dealer', 'demo');

$stmt->execute();

$data = $query->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T15:41:02.763

因为`demo`是字符串，所以应该用单引号括起来。

```
SELECT * 
FROM e_track_access_log 
WHERE dealer = 'Demo' 
ORDER BY datetime_accessed DESC 
LIMIT 0,15 
```

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:47:56.367

其实问题是，没有引号，mysql会像列一样评估语句，而当前范围内显然不存在Demo列。查询失败，返回与此类似的错误：`ERROR 1054 (42S22): Unknown column 'Demo' in 'where clause'`。为了避免这种情况，您需要使用错误检查。

既然到了这一章，让我提醒你，mysql_* 函数将来会被删除，你不应该再使用它们了。

由于先前的 mysql 错误，您的查询结果为 false，因此您在那里没有资源，只有一个简单的布尔值，因此您的 php 代码中有错误，也是因为检查不足。

避免这种情况的 2 种可能性：检查 mysql 错误，并检查查询函数返回的结果是否实际上不为假。

# macos - Brew 安装在 OS X 上失败 - 可能与新的 XCode 有关

> ID：15436445
> 
> 赞同：3
> 
> 时间：2013-03-15T15:40:12.910
> 
> 标签：macos, osx-mountain-lion, homebrew, fontconfig

我正在尝试在 OS X 10.8.3 上进行 fontconfig 的 brew 安装，但遇到了一个令人讨厌的错误。我安装了 XCode 4.6.1。

```
$ brew install fontconfig
 ==> Installing fontconfig dependency: pkg-config
 ==> Downloading https://downloads.sf.net/project/machomebrew/Bottles/pkg-config-0.28.mountain_lion.bottle.tar.gz
 ######################################################################## 100.0%
 ==> Pouring pkg-config-0.28.mountain_lion.bottle.tar.gz   /usr/local/Cellar/pkg-config/0.28: 10 files, 636K
 ==> Installing fontconfig
 ==> Downloading http://fontconfig.org/release/fontconfig-2.10.91.tar.gz Already downloaded: /Library/Caches/Homebrew/fontconfig-2.10.91.tar.gz 
 ==> Patching patching file src/fcarch.h
 ==> ./configure --with-add-fonts=/Library/Fonts,~/Library/Fonts --prefix=/usr/local/Cellar/fontconfig/2.10.91
 ==> make install 
 ld: symbol(s) not found for architecture x86_64 
 clang: error: linker command failed with exit code 1 (use -v to see invocation) 
 make[2]: *** [libfontconfig.la]  Error 1 
 make[1]: *** [install] Error 2 
 make: *** [install-recursive] Error 1

 READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting 
```

关于这个问题的信息似乎很少，而且非常痛苦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T18:01:47.093

***解决了***

原来我将 DYLD_LIBRARY_PATH 环境变量设置为与 Oracle 一起使用，这导致对 32 位库的引用。

**取消设置 DYLD_LIBRARY_PATH 环境变量修复了这个问题。**

任何在他们的 Mac 上使用 Oracle 客户端的人都应该警惕这一点！

# c++ - 创建着色器文件

> ID：15436447
> 
> 赞同：2
> 
> 时间：2013-03-15T15:40:15.973
> 
> 标签：c++, visual-studio-2010, shader, file-extension, directx-11

我正在尝试学习一些 DirectX11，并且我发现了我正在关注的好教程；然而，由于某种原因，程序崩溃（出现窗口，但随后出现“未响应”消息框），即使构建成功。关于创建着色器文件的一些事情，作者确实指定了如何做，我想确保我没有在那里犯任何错误，这就是我的程序崩溃的原因。所以我的问题是：

1.  如何创建着色器文件？在本教程中，我们使用扩展名 .fx，但是当您在 vs 中添加文件时，您只能从 .h 和 .cpp 中进行选择。您只需要选择 .cpp 然后在文件名末尾添加 .fx 吗？

2.  该文件应该在哪个目录中？（我的文件目前在源文件中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:14:57.527

.fx 将其与效果文件相关联。这意味着您在同一个文件中有许多着色器的组合。你能发布一些你的渲染循环的代码......另外，你是在调用 Present 方法吗？即，

```
m_pSwapChain->Present(0, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T12:07:42.570

1.  是的，这会奏效。另一种方法是创建一个 .txt 然后将扩展名更改为 .fx （要显示文件扩展名只需打开任何文件夹，单击菜单中的组织按钮，然后选择“文件夹和搜索选项”。取消选中该框选项卡视图下的“隐藏已知文件类型的扩展名”）。更改扩展名后，您可以在记事本中打开文档并在那里编写代码

2.  进入您的项目文件夹（在 Windows 文件系统中）并创建一个名为 Data 的地图。在那里添加你的 .fx 文件。然后转到您的解决方案资源管理器并右键单击项目并选择属性。转到构建事件 -> 预构建事件。在“命令行”框中添加“xcopy /y /d "$(ProjectDir)Data" "$(OutDir)" 行。现在在构建项目时，文件将被复制到正确的位置，您将能够使用您的 .fx 文件。

# r - 使用 set() 时的 data.table 问题

> ID：15436448
> 
> 赞同：2
> 
> 时间：2013-03-15T15:40:18.473
> 
> 标签：r, data.table

`data.table`非常快！但是语法有很大不同。这很像从标准的基本绘图功能切换到 ggplot。

代码优先：

```
library(data.table)
DT <- data.table(RF  = 1:10,
              S_1 = 11:20,
              S_2 = 21:30,
              addCol = rnorm(10)) 
bob<-as.data.frame(DT)
larry <- DT
set(DT, j = varnames, value = DT[, varnames, with = F]*DT[, RF]) 
```

问题：

当我运行上述代码时，我只想更改 DT 中的值。但是，对象 larry 中的值也发生了变化。如果这是一项功能，那么我需要帮助了解如何使用它。如何阻止 set 命令同时更改 larry 和 DT？

# duplicates - 如何在新记录上获得 CRM 2011 重复检测以查看所有记录？

> ID：15436449
> 
> 赞同：2
> 
> 时间：2013-03-15T15:40:20.227
> 
> 标签：duplicates, dynamics-crm-2011, detection

现在，如果他们拥有重复记录，它只会看到重复项。我不想授予代表查看或更改其他人的记录的权限，但希望那些可能的重复项出现在重复检测中，这样代表就不会为同一潜在客户添加另一条记录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T20:53:31.593

您的要求冲突。如果您不授予您的代表对其他记录的读取权限，从技术上讲，他们甚至不应该知道重复项。从安全的角度来看，这将允许用户阅读他们不应该阅读的内容，例如知道已经存在另一个具有此名称的记录。

您有两个开箱即用的选项：为代表授予对彼此潜在客户的读取权限或运行重复检测作业。重复检测分为两种方法：Proactive 和 Reactive。您说的是主动式-您甚至不希望系统允许创建副本。但是，如果您不能放松您的安全要求，您将需要迁移到 Reactive - 这需要创建一个按计划运行的重复检测作业，并且您需要指定一个人来查看这些作业并合并重复记录.

如果这些都不可接受，您将需要使用 Daryl 创建插件的选项。但与您的其他两个选项相比，这是很多工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T18:42:16.773

我不知道您描述的重复检测问题只能检查用户有权访问的记录。如果这确实是一个限制，您必须在验证阶段创建自己的自定义插件，该插件将作为提升的用户帐户运行，以检查重复项并在发现重复项时抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T19:58:20.290

我认为上面的答案很好地总结了它。如果工作人员看不到其他记录，则重复数据删除将找不到它们。

我会给他们访问权限，但对其他用户/团队记录具有 R/O 权限。

在我遇到此问题的地方，我还使用审计跟踪来跟踪任何加载他们不应该加载的记录的人，即使它们是只读的。然而，这确实需要一些简单的加载脚本来设置一个字段来触发审计，因为内置的审计工具不会监控访问。

# html - 将复选框样式设置为切换按钮

> ID：15436450
> 
> 赞同：10
> 
> 时间：2013-03-15T15:40:22.637
> 
> 标签：html, css, checkbox, toggle

在我的网站上，用户可以发布文章并使用一些预设标签相应地标记它们。这些标签采用复选框的形式。下面的例子：

```
<input type="checkbox" name="wpuf_post_tags[]" class="new-post-tags" value="Aliens" /> Aliens
<input type="checkbox" name="wpuf_post_tags[]" class="new-post-tags" value="Ghosts" /> Ghosts
<input type="checkbox" name="wpuf_post_tags[]" class="new-post-tags" value="Monsters" /> Monsters 
```

如您所知，复选框将如下所示：

> [ ] 外星人
> 
> [o] 幽灵
> 
> [ ] 怪物

我想做的是让复选框成为一个大按钮，里面有值。然后让它有一个“切换”的效果。

> [外星人] **[幽灵]** [怪物]

我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T15:56:35.747

看看[这个](http://jsbin.com/edipux/3/edit)_

**HTML**

```
<input id="chk_aliens" type="checkbox" name="wpuf_post_tags[]" class="vis-hidden new-post-tags" value="Aliens" />
<label for="chk_aliens">Aliens</label>

<input id="chk_ghosts" type="checkbox" name="wpuf_post_tags[]" class="vis-hidden new-post-tags" value="Ghosts" />
<label for="chk_ghosts">Ghosts</label>

<input id="chk_monsters" type="checkbox" name="wpuf_post_tags[]" class="vis-hidden new-post-tags" value="Monsters" />
<label for="chk_monsters">Monsters</label> 
```

**CSS**

```
.vis-hidden {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
}

label {
  margin: 10px;
  padding: 5px;
  border: 1px solid gray;
}

input:focus + label {
  border-color: blue;
}

input:checked + label {
  border-color: red;
}

input:focus:checked + label {
  border-color: green;
} 
```

请注意，最后一个选择器可能不适用于旧版 IE。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T15:52:34.803

这可以使用复选框和标签、相邻的兄弟选择器以及 CSS3`:selected`伪类来完成。

HTML：

```
<span><input type="checkbox" id="c1"><label for="c1">[ Aliens ]</label></span>
<span><input type="checkbox" id="c2"><label for="c2">[ Ghosts ]</label></span>
<span><input type="checkbox" id="c3"><label for="c3">[ Monsters ]</label></span> 
```

CSS：

```
input { display:none; }
input:checked ~ label { color:red; } 
```

[http://jsfiddle.net/drTg2/](http://jsfiddle.net/drTg2/)

但请注意，这在旧浏览器中很容易失败——因为它们不知道`~`或`:checked`. 并且较旧的 IE 将复选框设置为`display:none`- 提交表单时不会传输它们（尽管可以通过其他隐藏方式克服，例如屏幕的绝对定位）。

如果您不坚持纯 HTML/CSS 解决方案 - 有许多脚本 / {js-framework-of-your-choice}-plugins 可以帮助实现相同的效果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T15:45:40.580

`Checkboxes`，`radio`按钮和`SELECT`元素的样式功能非常有限，并且它们在浏览器中差异很大。

您最好使用样式链接或按钮来完成这些，然后使用 JavaScript 设置实际的开/关外观和表单值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T15:49:57.167

您可以从此[页面](https://stackoverflow.com/questions/9196386/bind-javascript-jquery-click-event-on-label-and-on-checkbox-simultaneously)借用想法！尝试绑定您的文本和复选框。然后尝试使用 jquery 来“切换”与复选框关联的标签。

然后，您可以使用样式和图像使标签看起来像复选框的容器。这就是我会做的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T15:49:02.590

您可以尝试使用 javascript`onclick`事件来更改`img source`属性的图片。然后，使用给定的隐藏控件`id`并在同一`onclick`事件中使用`document.getElementById('hiddencontrol').value = 1 - document.getElementById('hiddencontrol').value`（默认为 0 或 1）。

但是，我不知道如何在没有 Javascript 的情况下制作它。

# apache - 如何在 Apache/Tomcat 负载均衡器中刷新 jsessionid cookie

> ID：15436452
> 
> 赞同：2
> 
> 时间：2013-03-15T15:40:31.900
> 
> 标签：apache, tomcat, refresh, subdomain, jsessionid

我使用一个 Apache HTTPD 和多个 Tomcat 作为负载平衡解决方案。会话粘性基于`JSESSIONID`cookie。我有两个问题真的需要你的帮助。

1）Tomcat版本为7，cookies可以与子域共享。域如下所示：

*   en.mydomain.com
*   es.mydomain.com
*   it.mydomain.com

配置在`context.xml`

```
<Context sessionCookieDomain=".mydomain.com" sessionCookiePath="/"> 
```

同时，我们有分子域的暂存环境，cookies也可以跨以下域共享：

*   en.alpha.mydomain.com
*   es.alpha.mydomain.com
*   it.alpha.mydomain.com

配置在`context.xml`：

```
<Context sessionCookieDomain=".alpha.mydomain.com" sessionCookiePath="/"> 
```

但有时，`JSESSIONID`cookie 可以在`en.mydomain.com`和之间共享`en.alpha.mydomain.com`，这是意料之中的**。**

如何解决这个问题？Cookie 不应**在**不同级别的子域中共享。

2）我尝试刷新`JSESSIONID`上述问题的cookie，但失败了。在 Tomcat JSP 中：

```
session.invalidate();
session = request.getSession(true);
out.print(session.getId()); 
```

`JSESSIONID`cookie 在直接访问此 Tomcat JSP 时会刷新，但在访问其代理 Apache 时保持不变。我应该修改`mod_proxy`等以通过访问 Apache URL 来支持`JSESSIONID`cookie 刷新吗？

# javascript - 将文本长度限制为其容器大小

> ID：15436456
> 
> 赞同：-1
> 
> 时间：2013-03-15T15:40:47.190
> 
> 标签：javascript, jquery, css

[小提琴](http://jsfiddle.net/xdcNe/1/)- 我们有一些 div`header`和`content`。标题可能很短 - 1 行，或更长的 2-3 行高。内容可能很长，需要`cutted`。

如何切割它以占据剩下的所有地方，但仅此而已。我已经考虑了一段时间，对此我没有任何“干净”的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:58:35.420

你想剪切长文本以避免断行吗？如果我明白了，我做了一个简单的例子来满足你的需要。根据您的字体大小调整 CSS 高度：

```
<html>
    <style>
        /*header*/
        h2{
            height: 30px;
            overflow: hidden;
        }
        /*content*/
        div{
            height: 90px;
            overflow: hidden;
        }
    </style>

    <body>
        <h2>
            Vestibulum vestibulum faucibus metus vel sagittis. Vivamus quis venenatis arcu. Etiam ullamcorper lacinia justo ut tristique. Suspendisse orci tortor, auctor sed posuere nec, porta ac arcu. Nullam varius eleifend felis sed egestas. Mauris aliquam rhoncus risus, ut congue augue sollicitudin eget. Sed ullamcorper placerat eleifend. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Fusce et tincidunt ligula. Integer malesuada ligula sit amet nulla dictum sed tincidunt elit scelerisque. Proin venenatis dolor hendrerit metus consectetur ornare. Nulla sed consectetur libero. Nunc feugiat fermentum enim, eget ornare lorem vehicula ac. Nam volutpat tortor a nisi interdum eu sagittis nibh dapibus. Phasellus aliquam ipsum nec sapien gravida auctor. Donec venenatis, magna ut tempus sollicitudin, nunc turpis lacinia metus, ac suscipit sem sem non nisi.
        </h2>
        <div>
            Vestibulum vestibulum faucibus metus vel sagittis. Vivamus quis venenatis arcu. Etiam ullamcorper lacinia justo ut tristique. Suspendisse orci tortor, auctor sed posuere nec, porta ac arcu. Nullam varius eleifend felis sed egestas. Mauris aliquam rhoncus risus, ut congue augue sollicitudin eget. Sed ullamcorper placerat eleifend. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Fusce et tincidunt ligula. Integer malesuada ligula sit amet nulla dictum sed tincidunt elit scelerisque. Proin venenatis dolor hendrerit metus consectetur ornare. Nulla sed consectetur libero. Nunc feugiat fermentum enim, eget ornare lorem vehicula ac. Nam volutpat tortor a nisi interdum eu sagittis nibh dapibus. Phasellus aliquam ipsum nec sapien gravida auctor. Donec venenatis, magna ut tempus sollicitudin, nunc turpis lacinia metus, ac suscipit sem sem non nisi.
            Vivamus ac felis in sem scelerisque porttitor non non nunc. Cras quis ligula augue, non ornare felis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis eu neque orci. Aenean sit amet lorem tortor. Vivamus et elementum nisi. Sed rhoncus, enim vitae tristique fermentum, purus metus pharetra tellus, non pulvinar orci lectus eget sem. Maecenas vel leo ac nulla aliquam varius id id felis. Maecenas eu vulputate lorem. Sed tincidunt est a turpis gravida pulvinar ac quis augue. Cras pharetra lorem nec arcu lobortis vestibulum. Pellentesque dapibus consequat egestas. Ut aliquam lorem eget risus dictum quis sagittis purus tempus.
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:57:23.487

在你的 cont 类中添加这个 justify 属性：

```
text-align:justify; 
```

# c# - 在 XAML 中触发绑定更新？

> ID：15436457
> 
> 赞同：1
> 
> 时间：2013-03-15T15:40:47.703
> 
> 标签：c#, wpf, xaml, binding

我的 XAML 设置有点复杂的代码：

```
<UserControl.Resources>
    <local:SuperCoolObject x:Key="firstObject"/>
    <local:TotallyHotObject x:Key="secondObject"/>
</UserControl.Resources>
<Grid>
    <ItemsControl ItemsSource="{Binding Path=MyItems, Source={StaticResource firstObject}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <DataTemplate.Resources>
                    <lol:MyConverter x:Key="myConverter"  Equals="{Binding Path=SelectedItem, Source={StaticResource secondObject}}" />
                    <Style x:Key="On" TargetType="local:ThemedImage">
                        <Setter Property="Visibility" Value="Hidden"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Converter={StaticResource myConverter}}" Value="True">
                                 <Setter Property="Visibility" Value="Visible" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </DataTemplate.Resources>
            </DataTemplate>
        </ItemsControl.ItemTemplate>    
    </ItemsControl>                 
</Grid> 
```

（我省略了实际的 DataTemplate）

注意`ItemsControl`' 是如何`ItemsSource`绑定`firstObject`和`myConverter`绑定到 的`secondObject`。我需要做的是在绑定（）属性更改`ItemsSource`时刷新绑定。`myConverter``secondObject.SelectedItem`

所有适当的属性都设置为绑定属性，但我需要某种方式或强制`ItemsSource`在 XAML 中刷新。

# performance - Oracle - 月查询的另一种方式？

> ID：15436459
> 
> 赞同：1
> 
> 时间：2013-03-15T15:40:49.360
> 
> 标签：performance, oracle

首先...对不起我的英语。

我有一个这样的查询：

```
Select *
From tableA
Where (
          TO_NUMBER(TO_CHAR(dateA(+),'SYYYY'))  =  2013
          AND  TO_NUMBER(TO_CHAR(dateA(+),'MM'))  =  02
          AND  to_number(to_char(dateA(+),'dd'))  <=  25
          ) 
```

并检索我从每个日期到我作为参数提供的最后一个数字的数据，在这种情况下是第 25 天。这个工作但非常延迟，因为“Where”语句的形式......任何人都知道另一种检索数据的方式，所以快速且具有相同的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:53:08.760

听起来你想要

```
SELECT *
  FROM tableA
 WHERE dateA BETWEEN trunc( date '2013-02-26', 'MM' ) AND date '2013-02-26' 
```

`dateA`这将返回当月第一天和指定日期之间的所有行。如果 上有一个索引`dateA`，Oracle 将能够将它用于此类查询（尽管它是否真的会是一个单独的问题）。

# c# - 检查表达式是否与正则表达式匹配

> ID：15436460
> 
> 赞同：0
> 
> 时间：2013-03-15T15:40:52.430
> 
> 标签：c#, regex

在 C# 中，我有两个字符串：`[I/text]`和`[S/100x20]`.

因此，第一个`[I/`后面是文本并以`]`.

第二个`[S/`后面是一个整数，然后是`x`，然后是另一个整数，最后是`]`。

我需要检查给定的字符串是否与其中一种格式匹配。我尝试了以下方法：

```
(?<word>.*?) and (?<word>[0-9]x[0-9]) 
```

但这似乎不起作用，我错过了`[I/...]`和`[S/...]`部分。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:49:12.117

([I/\w+]) (S/\d+x\d+])

以上作品。

使用[http://regexr.com?34543](http://regexr.com?34543)玩弄你的表情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:46:37.237

遵循正则表达式即可。匹配整个字符串

```
"(\[I/\w+\])|(\[S/\d+x\d+\])" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:46:48.530

这应该做得很好：

```
Regex rex = new Regex(@"\[I/[^\]]+\]|\[S/\d+x\d+\]"); 
```

如果文本`[I/text]`应该只包含字母数字字符，那么@Oleg 使用`\w`而不是`[^\]]`会更好。还 using`+`意味着至少需要有一个前面的字符类，并且`*`allow 类是可选的。根据需要调整..

并使用：

```
string testString1 = "[I/text]";
if(rex.IsMatch(testString1))
{
    // should match..
}

string testString2 = "[S/100x20]";
if(rex.IsMatch(testString2))
{
    // should match..
} 
```

# string - 在项目中拆分字符串

> ID：15436464
> 
> 赞同：1
> 
> 时间：2013-03-15T15:41:00.633
> 
> 标签：string, prolog, swi-prolog

我有一个字符串

```
'a, b, c' 
```

将其拆分为项目的最简单方法是什么？

```
[a,b,c] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:56:47.720

假设您有一个字符串（由一个原子表示），您可以编写一个过程`atoms_list/2`：

```
atoms_list(Atom, List):-
  atomic_list_concat(['[', Atom, ']'], NAtom), 
  term_to_atom(List, NAtom). 
```

例子：

```
?- atoms_list('a,b,c', List).
List = [a, b, c]. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:04:42.767

我最后用了这个

```
atomic_list_concat(L,', ', 'a, b, c').

L=['a','b','c'] 
```

# api - 在 HMVC CodeIgniter 设置上启用 REST

> ID：15436467
> 
> 赞同：1
> 
> 时间：2013-03-15T15:41:08.173
> 
> 标签：api, codeigniter, rest, hmvc

我刚刚按照[此处](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc)的步骤完成了 HMVC CodeIgniter 的设置。

我现在正在尝试创建一个我希望使用[Phil Sturgeon 的 REST 库](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)的模块“api” 。

它[在这里](https://stackoverflow.com/questions/11430118/codeigniter-hmvc-rest)声明我需要扩展 MX_Controller 而不是 CI_Controller，我做到了。

我的初始设置是这样的

```
application
--modules
----api
------config
------controller
------libraries 
```

我在加载 Rest_Controller 时一直出错，因此我尝试将 REST_Controller 和 Format 库移动到似乎可以解决加载问题的应用程序/库，但现在每当我尝试通过[http://example 访问它时都会收到以下错误。 com/codeigniter/index.php/api/example/user/id/1/format/json](http://example.com/codeigniter/index.php/api/example/user/id/1/format/json)

“遇到错误

无法加载请求的类：安全”

我期望输出是 "{"id":1,"name":"Some Guy","email":"example1@example.com","fact":"Loves Swing"}"

我错过了什么？是否可以将 REST_Controller 和 Format 库保留在 api 模块下？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:08:36.693

[来源](https://stackoverflow.com/questions/6268884/security-class-in-codeigniter)

打开 Rest_Controller.php 转到第 173 行并更改以下代码

```
$this->load->library('security'); 
```

到

```
$this->load->helper('security'); 
```

编辑：

在 api 模块下拥有 REST_Controller 和 Format 库。

将 REST_Controller 移动到 api/controllers/REST_Controller.php 并将 Format 移动到 api/libraries/Format.php

# jquery - 从被点击的 div 中的输入字段中选择值

> ID：15436477
> 
> 赞同：0
> 
> 时间：2013-03-15T15:41:28.503
> 
> 标签：jquery, html

我有一系列 div，它们都有唯一的输入字段，其中包含我需要使用 jQuery 获取的不同值。

下面是jQuery：

```
$(document).ready(function() { 
            $(".container").click(function() {
                var input_field = $("a.container .input_field).val();   
                input_field = $.trim(input_field);
                        });
}); 
```

这是html：

```
<a class="container">
<input class="input_field" value="132"/>
</a>

<a class="container">
<input class="input_field" value="674"/>
</a>

<a class="container">
<input class="input_field" value="35fd2"/>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:43:07.973

```
$(document).ready(function() { 
    $(".container").click(function() {
        var input_field = $(this).find(".input_field").val();   
        input_field = $.trim(input_field);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:48:17.380

您应该为输入使用名称和类型

如果您已将输入包装在任何其他已识别的元素中，您可以调用例如：

```
var values = $('#my-form').serialize(); 
```

我不知道你的目标是什么——你需要这些值做什么？

# types - Mule Flow - 将 BLOB 附件类型插入 Oracle 数据库字段

> ID：15436479
> 
> 赞同：2
> 
> 时间：2013-03-15T15:41:39.490
> 
> 标签：types, blob, mule, flow

我是 Mule ESB 的新手，我正在尝试找到一个解决方案，希望能满足常见的业务需求。

我有一个有效负载，其中一个元素将作为 BLOB 类型插入到 Oracle 数据库中。我已经看过一些关于设置“自定义转换器”的讨论，我可以在其中创建 Java 代码以将有效负载转换为字节数组（还看到 Mule 在转换器对象到字节数组中具有此构建）。

有没有一种方法可以通过有效负载隔离 map-payload 元素（在本例中为“附件”文件）并将其转换为字节数组，然后该数组简单地成为一个元素（以及其他其他 map-payload 元素) 在我创建的 SQL 插入语句中？

不确定 Mule 是否还支持元素上的内联转换器而不调用/引用“自定义转换器”？我已经看到几个帖子在这个问题上苦苦挣扎，但我还没有看到我可以轻松应用的答案。

# c# - 从一个数据库结构到另一个数据库结构的逻辑迁移

> ID：15436480
> 
> 赞同：0
> 
> 时间：2013-03-15T15:41:42.650
> 
> 标签：c#, sql-server-ce

我目前正在用 C# 创建一个 SQL Server CE 数据库应用程序，我遇到了一些我认为可能有人可以帮助解决的逻辑问题。

**目标**：能够向最终用户提供一个 XML 文件，该文件告诉程序使用提供的结构创建一组新的表（带`tmp_`前缀的新表）。然后需要将现有数据从旧表移动到新表（具有新结构），然后需要删除旧表。

我写了太多代码，无法将其粘贴到此处，因此我将其分解为逻辑步骤（因为这是一个逻辑问题，而不是编译器问题）。

1.  从提供的 XML 文件中获取新的数据库结构，读入数据表 [DONE]

2.  动态连接 SQL 查询以创建带有`tmp_`前缀 [DONE]的新表

3.  将新结构与旧结构进行比较，跨 [未完成] 移动相关数据

我在第 3 步的逻辑方法上遇到问题。基本上我需要将数据从旧结构移动到新结构 - 忽略未出现在新列集中的旧列，并为新列输入空白数据不会出现在旧列的列表中。我需要遵守新的列架构，例如数据类型、最大长度等。这让我很头疼，因为我对 C# 很陌生。有没有人有想法作为解决这个问题的最佳方法？

提前致谢！

# php - 在类中的函数之间传递 PHP 变量

> ID：15436481
> 
> 赞同：-1
> 
> 时间：2013-03-15T15:41:45.537
> 
> 标签：php

我有一个具有两个功能的类，两个不同的 AJAX 请求正在发布`$variable`和`$anothervariable`to`functionOne`和`functionTwo`. 我需要能够使用`$variable`函数内的值`functionTwo`

```
class MyClass {

    public static function functionOne($variable) {

    }

    public static function functionTwo($anothervariable) {

        // I WANT TO USE $variable HERE

    }

} 
```

我如何`$variable`访问`functionTwo`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:43:40.077

由于您的两种方法都是静态的，您需要在函数之前添加静态变量并将其设置在**functionOne并在****functionTwo**中使用它

 **```
class MyClass {
    static $variable;

    public static function functionOne($variable) {
       self::variable = $variable;
    }

    public static function functionTwo($anothervariable) {
        echo self::variable;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:46:52.763

```
class MyClass {

    function foo($aString) {

        $this->val = $aString;

    }

    function bar() {

        echo $this->val;

    }

}

$test = new MyClass();
$test->foo('test');
$test->bar(); 
```

输出：

```
'test' 
```**

# maven - 如何将 Jenkins 构建工件分组到文件夹中？

> ID：15436487
> 
> 赞同：0
> 
> 时间：2013-03-15T15:41:58.843
> 
> 标签：maven, jenkins, jenkins-plugins

我有一个由 Jenkins 构建的大型 Maven 项目。Jenkins 构建当前存档了大约 30 个工件 - zip 文件、rpm、jar 和各种其他构建平台的零碎。

这些工件在构建结果页面上显示得非常好，但测试团队发现为他们的测试找到构建工件很尴尬。

我的问题是；**如何将工件分组到文件夹中？**

这将使测试人员更容易找到他们所追求的文件。像“Fedora RPMs”、“Documentation”、“Developer JARs”等文件夹。这些工件来自整个构建工作区（主要是 Maven $project/target/ 目录）。

一个目标是在没有额外服务的情况下对工件进行分组/文件夹（例如，将工件推送到 FTP 服务器不是很好——我们希望在 Jenkins 中将它们很好地分组）。詹金斯插件绝对没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:01:26.723

也许[灵活发布插件](https://wiki.jenkins-ci.org/display/JENKINS/Flexible+Publish+Plugin)可以提供帮助？

# r - 绘制时间序列

> ID：15436499
> 
> 赞同：1
> 
> 时间：2013-03-15T15:42:27.730
> 
> 标签：r, time-series

我在三年内研究了 16 个世界指数，我想从这 16 个指数中绘制一个图。

```
all<-read.table("C.../16indices.txt")
dimnames(all)[[2]]<-c("Date","BEL 20","CAC 40","AEX","DAX","FTSE 100","IBEXx 35","ATX","SMI","FTSE MIB","RTX","HSI","NIKKEI 225","S&P 500","NASDAQ","Dow Jones","BOVESPA")
attach(all) 
```

问题

1.  我的日期以“2009-01-05”的形式书写。我只想出现“2009”，否则我将不得不跳很多次。
2.  例如，BOVESPA 的价格从 40.000,15 到 60.000,137。如何获得漂亮的 y 标签？例如 40.000、45.000、...、60.000。
3.  我如何在一个漂亮的图形/情节中获得 16 个这些情节？

我不习惯与 R 一起工作。我尝试过这样的事情，但没有奏效......

```
plot(all[1,],all[,2]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:17:24.403

最大的问题是没有样本数据>这是基于猜测的建议：

```
 I tried something like this but that didn't work...   plot(all[1,],all[,2]) 
```

您需要将日期值格式化为 R Date 类。如果它们是 YYYY-MM-DD 格式，它将很简单：

```
 all$Date <- as.Date(all.Date) 
```

对于您的具体问题：

```
 1) My dates are written in the form "2009-01-05". I want only "2009" to appear otherwise i would have to many jumps. 
```

您将需要在绘图调用中抑制轴绘图，然后需要添加一个 axis() 调用。

```
 2) For example the prices from the BOVESPA go from 40.000,15 to 60.000,137\. How do I get nice y-labels? For instance 40.000, 45.000,...,60.000. 
```

您似乎在欧洲语言环境中，这意味着您最初的 read.table 调用可能会破坏数据输入，您需要阅读文档，该文档`read.csv2`将正确处理数字数据的小数点和逗号含义的反转。您还应该使用 colClasses。

```
 3) How do i get 16 of these plots in one nice figure/plot? 
```

您可能应该从每个系列的初始起点计算比率，以便可以有一个通用的显示比例。

# php - 使用 LOAD DATA INFILE 时将 php 变量插入 csv

> ID：15436507
> 
> 赞同：0
> 
> 时间：2013-03-15T15:42:36.680
> 
> 标签：php, mysql

我想将一个 php 变量插入到 csv 文件中，其中包含要插入到表中的数据。

该表包含 3 列，而 csv 仅包含 2。我想将 csv 转换为 3 列文件，第三列包含所有 csv 行的这个 php 变量。

图表：

表：字段1 | 字段2 | 钥匙

原始 CSV 文件：Field1 | Field2 第 1 行： Value1, Value2 ；第 2 行：值 3、值 4

转换后的 CSV 文件：Field1 | 字段2 | key 第一行： Value1, Value2, $key ; 第二行： Value3 ， Value4 ， $key

我正在阅读可以使用 OUTFILE 操作 CSV 文件的内容，但我看到它只是与 SELECT 一起使用，而不是与 INSERT 一起使用。

如果这太难了，有没有办法呢？我只需要为 csv 行添加相同的 ID，谢谢

```
<?php

if(isset($_POST['submit'])) {

if ($_FILES["file"]["error"] > 0)
{
echo "Error: " . $_FILES["file"]["error"] . "<br />";
}
else
{
include("mysql.php");

$key=fYt5j9oPaW; //key to be inserted into the csv file

    $db = new mysql();
    $query=$db->insert("LOAD DATA LOCAL INFILE '".$_FILES['file']['tmp_name']."' 
 INTO TABLE 2fields FIELDS TERMINATED BY ',' 
 OPTIONALLY ENCLOSED BY '\"' 
 LINES TERMINATED BY '\n'
 ");
   }

 }

?> 
```

# mysql - SQL：将一些字段值复制到同一张表中的另一条记录

> ID：15436509
> 
> 赞同：0
> 
> 时间：2013-03-15T15:42:40.140
> 
> 标签：mysql, sql, sql-update

我有一个表，其中包含大约 100 条记录作为模板和超过 10000 条复制记录回溯到原始记录。我需要从相应的原始副本中重新初始化副本中的一个字段，但无法弄清楚为什么我不能从子查询中引用外部字段。

示例表（[SQLFiddle 链接](http://sqlfiddle.com/#!2/eb9fb/2)）：

```
ID   OriginalID    String
----------------------------
1    NULL          original 1
2    NULL          original 2
3    1             copy of 1
4    2             copy of 2
5    2             another copy of 2 
```

期望的结果：

```
1 no change
2 no change
3 string should change to 'original 1'
4 string should change to 'original 2'
5 string should change to 'original 2' 
```

我试过的 SQL：

```
update data as target set target.string=(select string from 
(select string from data as source where source.id=target.originalid) as x); 
```

错误：

```
Unknown column 'target.originalid' in 'where clause' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:49:51.813

```
UPDATE data a
       INNER JOIN data b
          ON a.originalid = b.id
SET a.data = b.data 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/3c97e/1)

输出

```
╔════╦════════════╦════════════╗
║ ID ║ ORIGINALID ║   STRING   ║
╠════╬════════════╬════════════╣
║  1 ║ (null)     ║ original 1 ║
║  2 ║ (null)     ║ original 2 ║
║  3 ║ 1          ║ original 1 ║
║  4 ║ 2          ║ original 2 ║
║  5 ║ 2          ║ original 2 ║
╚════╩════════════╩════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:45:59.200

您收到该错误是因为子查询只能访问其直接父查询的数据。意味着您`SELECT string FROM () as x`知道`target.*`，但不知道子查询。但是，您也不能在单个查询中选择并写入同一个表。

虽然可能有一种更好的方法来做到这一点......我建议用这些数据填充另一个表，然后重命名你的 2 个表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:47:54.153

如果您尝试以下 SQL，您应该会发现它实现了您的目标（希望如此）：

```
UPDATE data
  SET String = c.String
  FROM data INNER JOIN data c ON c.ID = data.OriginalID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T15:50:08.210

```
update  data d2 join data d1 on d1.Id = d2.OriginalId
set     d2.data = d1.data; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T16:00:29.163

就像是：

```
 UPDATE data d
       JOIN
         ( SELECT id, data
             FROM data
             WHERE originalid IS NULL
         ) AS do
  SET d.data = do.data
  WHERE d.originalid = do.id; 
```

[SQLFiddle](http://sqlfiddle.com/#!2/8f7a3/1)

# css - haml中的“-”是什么意思？

> ID：15436511
> 
> 赞同：0
> 
> 时间：2013-03-15T15:42:46.350
> 
> 标签：css, ruby-on-rails, twitter-bootstrap, haml

我对网页设计非常陌生，并且正在编写一些代码，其中一部分是这样的：

```
 .row-fluid
    - if(params[:offset].to_i>0)
      = link_to t('.previous'), reports_path(offset: give_previous_page(@offset, @limit)),
        { class: 'btn btn-small btn-primary'}
    - else 
```

到目前为止我理解的一些东西，例如好吧，这是一个 Rail 代码，而不是`ERB`我们使用`HAML`了语法，还有一些类似的 twitter 引导类`.row-fluid`，`btn-primary`但我不明白的部分是`"-"`我们看到旁边有 " `if`" an " `else`" 的行。那些是什么，他们做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T15:45:45.183

在 Rails 下的 HAML 中，`-`表示“这一行是 Ruby 代码；不要输出它的值”。

相比之下`=`意味着“这一行是 Ruby 代码；输出它的值”。

# android - 在 imageview 中显示图像的字节数组

> ID：15436512
> 
> 赞同：0
> 
> 时间：2013-03-15T15:42:47.837
> 
> 标签：android, android-layout, bitmap, bitmapfactory

我正在尝试在 android 活动的图像视图中显示来自服务器的图像字节数组。我能够正确获取从服务器发送的字节数组，但是在将其转换为位图时，它总是返回 null。我使用 BitmapFactory.decode(byteArray,0, byteArray.length) 将图像字节数组转换为始终返回 null 的位图。

请帮我解决这个问题并告诉我是否有其他选择。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:33:05.477

那么更好的选择是使用它。我用它来显示服务器上存在的图像。相当快

```
URL url = new URL(link);
InputStream picin = url.openStream();
Bitmap myBitmap = BitmapFactory.decodeStream(picin);
pic.setImageBitmap(myBitmap); 
```

链接指向 jpg 图像的位置。也适用于其他图像格式。

# java - 获取哈希图中的前 10 个值

> ID：15436516
> 
> 赞同：8
> 
> 时间：2013-03-15T15:43:04.697
> 
> 标签：java, sorting, hashmap

我试图弄清楚如何从`HashMap`. 我最初试图使用`TreeMap`并让它按值排序，然后取前 10 个值，但似乎这不是选项，`TreeMap`按键排序。

我希望仍然能够知道哪些键具有最高值，`K, V`地图的`String, Integer`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:52:54.933

也许您应该`Comparable`为存储在哈希图中的值对象实现接口。然后您可以创建一个包含所有值的数组列表：

```
List<YourValueType> l = new ArrayList<YourValueType>(hashmap.values());
Collection.sort(l);
l = l.subList(0,10); 
```

问候

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T15:57:39.523

```
import java.util.Comparator;
import java.util.HashMap;
import java.util.Map;
import java.util.TreeMap;

public class Testing {

    public static void main(String[] args) {

        HashMap<String,Double> map = new HashMap<String,Double>();
        ValueComparator bvc =  new ValueComparator(map);
        TreeMap<String,Double> sorted_map = new TreeMap<String,Double>(bvc);

        map.put("A",99.5);
        map.put("B",67.4);
        map.put("C",67.4);
        map.put("D",67.3);

        System.out.println("unsorted map: "+map);

        sorted_map.putAll(map);

        System.out.println("results: "+sorted_map);
    }
}

class ValueComparator implements Comparator<String> {

    Map<String, Double> base;
    public ValueComparator(Map<String, Double> base) {
        this.base = base;
    }

    // Note: this comparator imposes orderings that are inconsistent with equals.    
    public int compare(String a, String b) {
        if (base.get(a) >= base.get(b)) {
            return -1;
        } else {
            return 1;
        } // returning 0 would merge keys
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:48:56.593

如果您尝试获取地图的 10 个最高值（假设这些值是数字或至少实现 Comparable），请尝试以下操作：

```
List list = new ArrayList(hashMap.values());
Collections.sort(list);
for(int i=0; i<10; i++) {
   // Deal with your value
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:56:02.337

假设您有一个地图，但这个示例适用于任何类型的

```
Map<String, String> m = yourMethodToGetYourMap();
List<String> c = new ArrayList<String>(m.values());
Collections.sort(c);
for(int i=0 ; i< 10; ++i) {
    System.out.println(i + " rank is " + c.get(i)); 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T15:48:28.030

恐怕您将不得不遍历整个地图。[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)是一种常用的数据结构，用于查找前 K 个元素，如[本书](http://books.google.co.uk/books?id=hyvdUQUmf2UC&pg=PA392)中所述。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-15T22:11:42.987

我的答案来自[sk2212](https://stackoverflow.com/questions/15436516/get-top-10-values-in-hash-map/15436724#15436724)

首先你需要实现一个降序比较器：

```
class EntryComparator implements Comparator<Entry<String,Integer>> {

    /**
     * Implements descending order.
     */
    @Override
    public int compare(Entry<String, Integer> o1, Entry<String, Integer> o2) {
        if (o1.getValue() < o2.getValue()) {
            return 1;
        } else if (o1.getValue() > o2.getValue()) {
            return -1;
        }
        return 0;
    }

} 
```

然后你可以在一个方法中使用它，比如这个属性“hashmap”：

```
public List<Entry<String,Integer>> getTopKeysWithOccurences(int top) {
    List<Entry<String,Integer>> results = new ArrayList<>(hashmap.entrySet());
    Collections.sort(results, new EntryComparator());
    return results.subList(0, top);
} 
```

# microsoft-metro - 具有两个方向的 WinRT ISupportIncrementalLoading 视图

> ID：15436519
> 
> 赞同：1
> 
> 时间：2013-03-15T15:43:15.787
> 
> 标签：microsoft-metro, windows-runtime

我有一个 ItemsControl，它显示了包含一些数据的日期列表。我想要这个控件，以便能够在两个方向上无限滚动。

使用 ISupportIncrementalLoading，我可以在结束时增加更多天数。

但是，当达到第一个元素时，我该如何实现呢？有人现在有一个集合类，它返回当前第一个显示项目的位置吗？

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:35:04.710

一种可能性是`IObserveableVector`，根据 MSDN 上的此页面：[Load, store, and display large sets of data Effectively](http://msdn.microsoft.com/en-us/library/windows/apps/hh994637.aspx)

`IObserveableVector`允许您以随机访问顺序访问数据，这将允许您在列表的两端加载数据。

我没有使用过它，也没有看到很多关于如何使用它的示例。

# c++ - Visual Studio 2010 中是否有编译器设置来确保编写可移植的 C++？

> ID：15436520
> 
> 赞同：8
> 
> 时间：2013-03-15T15:43:15.887
> 
> 标签：c++, visual-studio-2010, visual-studio, compiler-errors, portability

我从使用 Visual Studio 2010 编译的开发人员那里收到 C++ 源代码，然后我需要在各种不同的编译器下重新编译：GCC、LLVM、其他版本的 Visual Studio 等。有时他发送给我的代码（编译时不需要VS2010 中的警告）无法在其他编译器下编译。

他是否可以在 VS2010 中设置任何编译器设置来增加他的代码完全可移植的可能性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:02:18.590

在语言层面，没有灵丹妙药。您能做的最好的事情就是尽可能地遵守语言标准。如果您利用特定于特定编译器的扩展（使用 Visual C++，`/Za`将禁用非标准语言扩展），大多数编译器都有发出警告或错误的选项。但这并不完美，因为还没有编译器绝对 100% 地实现该标准，因此即使使用严格兼容的代码，您仍然可能会遇到可移植性问题。

另请注意，许多日常代码实际上利用了扩展或未定义或编译器定义的行为，通常没有意识到这一点，因此在完全符合标准的模式下编译可能不切实际。

您还必须了解标准允许的不同之处。例如，像 int 这样的类型在不同的系统上可能有不同的大小。Windows 是 LLP64，而大多数 Unix 派生的操作系统是 LP64。

在系统级别，我不知道确保程序员不依赖于系统特定的东西（例如，`<windows.h>`或`<pthreads.h>`）的完美方法。

最好的办法是让所有开发人员都能轻松地在所有目标平台上运行测试构建。

# mysql - 显示带有类别的产品列表不会显示未耦合的类别

> ID：15436521
> 
> 赞同：0
> 
> 时间：2013-03-15T15:43:16.270
> 
> 标签：mysql, sql, database, select

我有 3 个表、产品、类别和 Couple_product_category 我希望数据库中的所有产品都带有一串耦合类别。但是，这很好用，当我添加尚未与类别耦合的新产品时，将不会返回。

我想要最快的方法来阻止性能。这就是我现在所拥有的：

```
SELECT 
   product.id, 
   product.product_name, 
   GROUP_CONCAT(productcategory.name SEPARATOR '; ') AS categories
FROM
   m_catalog_products AS product
LEFT JOIN 
   couple_product_category AS category
ON 
   category.product_id = product.id
INNER JOIN 
   m_catalog_productcategoy AS productcategory
ON 
   productcategory.id = category.category_id
GROUP BY 
   product.id
ORDER BY product.id, product.is_active ASC 
```

这将导致类似：

```
ID  Name       Categories
--  ---------  ----------------------
1   Product A  Category A; Category B
2   Product B  Category C 
```

但是，如果产品 C 尚未与任何类别耦合，它应该显示如下：

```
ID  Name       Categories
--  ---------  ----------------------
1   Product A  Category A; Category B
2   Product B  Category C
3   Product C 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:45:42.150

`LEFT JOIN m_catalog_productcategoy`而不是`INNER JOIN`：

```
SELECT 
   p.id, 
   p.product_name, 
   GROUP_CONCAT(pc.name SEPARATOR '; ') AS categories
FROM m_catalog_products AS p
LEFT JOIN couple_product_category AS c ON c.product_id = p.id
LEFT JOIN m_catalog_productcategoy AS pc ON pc.id = c.category_id
GROUP BY  p.id
ORDER BY p.id, p.is_active ASC; 
```

# matlab - MATLAB GUI 中的复选框

> ID：15436527
> 
> 赞同：0
> 
> 时间：2013-03-15T15:43:34.747
> 
> 标签：matlab, matlab-figure, matlab-guide

我的 GUI在单个搜索按钮下方有两个复选框，即`colourcheck`和。`Texturecheck`如果我点击搜索按钮，它应该检查上面提到的两种类型并且相应的程序应该运行，如果两个框都在“MIN”位置，即没有选中它应该给用户一条消息，说明`select type of search`。

我已经剪辑了 search_callback 程序。

```
function Search_Callback(hObject, eventdata, handles)
% hObject    handle to Search (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data

% --- Executes on button press in colourcheck.
function colourcheck_Callback(hObject, eventdata, handles)
% hObject    handle to colourcheck (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data

% Hint: get(hObject,'Value') returns toggle state of colourcheck
if (get(hObject,'Value') == get(hObject,'Max'))
    Search_Callback(hObject, eventdata, handles)
else
   % Checkbox is not checked-take approriate action
end 
```

但是我无法满足要求。请帮助我，任何解决方案都是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:53:26.203

根据您问题中的描述，您不想`Search_Callback`在单击 时被调用`colourcheck_Callback`。相反，您希望在单击搜索按钮时根据选中的复选框采取其他操作。您可以对搜索按钮使用如下回调：

```
% --- Executes on button press in search.
function search_Callback(hObject, eventdata, handles)
% hObject    handle to search (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

isTexture = get(handles.Texturecheck,'Value');
isColour = get(handles.colourCheck,'Value');
if and(isTexture, isColour)
    'do something'
elseif isColour
    'do something else'
elseif isTexture
    'do something else'
else
    'warn user'
end
guidata(hObject, handles); 
```

# php - 如何将输入数组与mysql列进行比较？

> ID：15436532
> 
> 赞同：-1
> 
> 时间：2013-03-15T15:43:48.737
> 
> 标签：php, html, mysql

以下是我在 mysql 查询中显示一些错误的代码：

```
<?php
$con=mysql_connect('localhost','root','');
$str=$_GET["message"];
$stor=explode(" ",$str);// converting message into array
mysql_select_db('words',$con);
for($j=0;$j<=30; $j++)
{
mysql_query($con,"UPDATE blacklist SET $stor=1 where $stor=0");//if column name=element in array then make it as 1 in database
}
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:49:09.943

1.  您的代码容易受到**SQL 注入**的攻击。阅读准备好的语句并使用**PDO/MySQLi**。
2.  $stor 是一个数组对象，不能直接在查询中使用。如果您想使用它，请尝试使用

> IN('.implode(",", $stor).')

上面的代码执行以下操作：

**implode()** - 接受一个数组并将其转换为逗号分隔的字符串。

**IN()** - 比较给定的逗号分隔值，如果其中至少一个存在则返回 true。

**示例（内爆）：**

> 内爆（“，”，数组（1,2,3））等于“1,2,3”

**示例（IN）：**

> TestID IN (1,2,3) 与（TestID = 1 或 TestID = 2 或 TestID = 3）相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:47:52.827

您可能会收到 mysql 错误，因为您的查询最终看起来像这样

```
UPDATE blacklist SET Array=1 where Array=0; 
```

如果您只是回显一个完整的数组，`Array`则相反，您需要指定一个数组元素（`$stor[1]`例如）。

你想要做的是用 foreach 替换你的 for 循环，这样你就可以一次扔掉一个元素。

此外，您的论点是倒退的。

```
foreach($stor as $word)
{
  mysql_query("UPDATE blacklist SET $word=1 where $word=0", $con);
} 
```

# javascript - 继承和模块模式

> ID：15436533
> 
> 赞同：7
> 
> 时间：2013-03-15T15:43:53.657
> 
> 标签：javascript, inheritance, module-pattern

我正在尝试以这种方式使用模块模式实现继承：

```
Parent = function () {

    //constructor
    (function construct () {
        console.log("Parent");
    })();

    // public functions
    return this.prototype = {

        test: function () {
            console.log("test parent");
        },

        test2: function () {
            console.log("test2 parent");
        }

    };
};

Child = function () {

    // constructor
    (function () {
        console.log("Child");
        Parent.call(this, arguments);
        this.prototype = Object.create(Parent.prototype);
    })();

    // public functions
    return this.prototype = {

        test: function()
        {
            console.log("test Child");
        }

    }

}; 
```

但我不能从孩子的实例中调用`test2()`.

```
var c = new Child();
c.test2(); // c.test2 is not a function 
```

我错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T16:07:39.550

您没有以正确的方式使用模块模式。不知何故，您的“构造函数”被称为立即调用的函数表达式（[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)），而模块闭包则不是。应该反过来。

此外，您不能分配给`this.prototype`. 要创建所有实例都将从中继承的原型对象，您需要分配给*构造函数*`prototype`的属性（在您的情况下，[关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)甚至指向全局对象）。*[`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)`window`*

 *并且您应该在获得 IIFE 后立即从 IIFE 返回构造函数，而不是原型对象。

```
Parent = (function () {
    // constructor
    function construct () {
        console.log("Parent");
    };

    // public functions
    construct.prototype.test = function () {
        console.log("test parent");
    };
    construct.prototype.test2 = function () {
        console.log("test2 parent");
    };

    return construct;
})();

Child = (function () {
    // constructor
    function construct() {
        console.log("Child");
        Parent.apply(this, arguments);
    }

    // make the prototype object inherit from the Parent's one
    construct.prototype = Object.create(Parent.prototype);
    // public functions
    construct.prototype.test = function() {
        console.log("test Child");
    };

    return construct;
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:51:24.997

```
(function () {
    console.log("Child");
    Parent.call(this, arguments);
    this.prototype = Object.create(Parent.prototype);
})(); 
```

`this`指`window`，因为您将代码包装到函数中。删除包装函数或`this`作为参数传递。*

# jquery - 无法在窗口加载 (bpopup) 时加载 jQuery 弹出窗口

> ID：15436535
> 
> 赞同：0
> 
> 时间：2013-03-15T15:44:08.713
> 
> 标签：jquery, popup, bpopup

我正在尝试对弹出 jquery 插件 (bpopup) 进行简单调用。

```
;(function($) {
    $(window).load(function(){
        $('#popup').bPopup({
            modalClose: false,
            opacity: 0.6,
            positionStyle: 'fixed'
        });
    });
});
})(jQuery); 
```

应该出现一个 ID 为“popup”的 div，但是当窗口加载时，什么都没有发生（甚至没有弹出窗口被阻止）。

任何建议都非常感谢，谢谢。

编辑：有问题的页面非常轻 - 仅文本，弹出窗口仅包含文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:46:25.980

试试这个，改用 $(document).ready

```
 ;(function($) {
  $(document).ready(function(){
                $('#popup').bPopup({
            modalClose: false,
            opacity: 0.6,
            positionStyle: 'fixed'
                });
            });
        });
    })(jQuery); 
```

window onload 将等待加载所有资产，因此您可能正在加载需要很长时间的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:49:03.470

您的代码中有语法错误。删除其中一个额外的`});`.

```
;(function($) {
    $(window).load(function(){
        $('#popup').bPopup({
            modalClose: false,
            opacity: 0.6,
            positionStyle: 'fixed'
        });
    });
})(jQuery); 
```

# ios - 与 cURL 等效的目标 C 以使用 JSON

> ID：15436538
> 
> 赞同：1
> 
> 时间：2013-03-15T15:44:19.733
> 
> 标签：ios, json, cocoa, nsurlconnection

我试图四处搜索，但找不到确切的答案。

我的朋友使用 cURL 实现网站以 JSON 格式返回数据，如下所示

```
curl http://example.com//api/v1/opens_set_current_position -d '{"latitude":"53.041", "longitude":"-2.90545", "radius":"100000"}' -X GET -H "Content-type: application/json" 
```

我尝试编写代码让我的 iOS 应用程序检索数据。但我不能。我总是收到错误，数据甚至无法通过 NSURLConnection 加载。这是我的代码：

```
NSString *requestString = [NSString stringWithFormat:
                         @"http://example.com//api/v1/opens_set_current_position"];

NSURL *url = [NSURL URLWithString:requestString];

NSMutableURLRequest *req = [NSMutableURLRequest requestWithURL:url];
[req setHTTPMethod:@"GET"];

[req addValue:@"application/json" forHTTPHeaderField:@"Content-type"];

NSString *dataString = @"{\"latitude\":\"53.041\", \"longitude\":\"-2.90545\", \"radius\":\"100000\"}";

NSData *requestData = [NSData dataWithBytes:[dataString UTF8String] length:[dataString length]];

[req setHTTPBody:requestData];

NSURLResponse *theResponse = NULL;
NSError *theError = NULL;
NSData *theResponseData = [NSURLConnection sendSynchronousRequest:req returningResponse:&theResponse error:&theError]; 
```

数据根本没有来。我收到此错误消息：

> 操作无法完成。（kCFErrorDomainCFNetwork 错误 303。）

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:02:05.353

这是因为您在`GET`请求中传递了一个正文。你想要一个`POST`请求。

从`curl`手册页：

```
-d/--data <data>
(HTTP)  Sends  the  specified data in a POST request to the HTTP server,
in the same way that a browser does when a user has filled in an HTML form
and presses the submit button. This will cause curl to pass the data to the
server using the content-type application/x-www-form-urlencoded. 
```

# java - 在 JavaFX 2 中将工具栏按钮设置为正方形且大小相同

> ID：15436539
> 
> 赞同：1
> 
> 时间：2013-03-15T15:44:24.110
> 
> 标签：java, javafx-2

在下面的代码中，我有一个 ToolBar，并向其中添加了各种大小的按钮。我希望按钮是方形的并且大小都一样。所以基本上从所有按钮中找到最长的宽度或高度，并将所有其他按钮的宽度和高度设置为这个大小。但是，按钮可以改变大小，所以我认为我需要一个绑定。我不太明白 - 有人知道怎么做吗？

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.ToolBar;
import javafx.scene.layout.BorderPane;
import javafx.stage.Stage;

public class ToolBarButtonTest extends Application {
    @Override
    public void start(Stage stage) throws Exception {
        BorderPane borderPane = new BorderPane();
        Scene scene = new Scene(borderPane, 500, 500);

        ToolBar toolBar = new ToolBar();

        Button button1 = new Button("s");
        Button button2 = new Button("ss");
        Button button3 = new Button("sss");

        toolBar.getItems().addAll(button1, button2, button3);

        borderPane.setTop(toolBar);

        stage.setScene(scene);
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

谢谢，尼克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T23:03:53.603

干得好。此示例将使用 CSS 将按钮形状变为正方形，并安装验证侦听器以跟踪按钮的布局更改并相应地更新宽度。

```
public class SquareButtons extends Application {
@Override
  public void start(final Stage stage) throws Exception {
    /* Assume these are your toolbar elements */
    final Button[] buttons = new Button[]{
            new Button("Short"),
            new Button("Slightly longer"),
            new Button("Very very very long button")
    };

    /* This would, of course, belong in a style sheet - it turns the buttons square */
    for (Button b : buttons)
        b.setStyle("-fx-background-radius: 0");

    /* This will set the pref width/height of all your buttons to the maximum of the pref width/height of the larget one */
    final InvalidationListener listener = new InvalidationListener() {
        public void invalidated(final Observable observable) {
            double size = 0;
            for (Button b : buttons) {
                size = Math.max(size, b.prefWidth(Integer.MAX_VALUE));
                size = Math.max(size, b.prefHeight(Integer.MAX_VALUE));
            }

            for (Button b : buttons) {
                b.setPrefWidth(size);
                b.setPrefHeight(size);
            }
        }
    };

    for (Button b : buttons)
        b.widthProperty().addListener(listener);

    final ToolBar toolbar = new ToolBar();
    toolbar.getItems().addAll(buttons);

    final Scene scene = new Scene(toolbar);
    stage.setScene(scene);
    stage.setWidth(800);
    stage.setHeight(200);
    stage.show();
  }

  public static void main(String[] args) {
    Application.launch(args);
  }
} 
```

更新：没有充分阅读问题，请参阅评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T22:02:43.700

由于没有其他人回应，我将传递一个部分解决方案。我是 JavaFX 的菜鸟，但由于父节点负责布局子节点，因此我将派生`ToolBar`该类的修改版本并覆盖一些布局代码。这是对您的示例的修改，它有效，但有点笨拙。

```
package toolbarbuttontest;

import javafx.application.Application;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.ToolBar;
import javafx.scene.layout.BorderPane;
import javafx.stage.Stage;

public class ToolBarButtonTest extends Application {

    @Override
    public void start(Stage stage) {
        BorderPane borderPane = new BorderPane();
        Scene scene = new Scene(borderPane, 500, 500);

        Button btn1 = new Button("short");
        Button btn2 = new Button("between");
        Button btn3 = new Button("pretty long");

        SquareButtonToolBar toolBar = new SquareButtonToolBar();
        toolBar.getItems().addAll(btn1, btn2, btn3);

        borderPane.setTop(toolBar);

        stage.setScene(scene);
        stage.show();
        toolBar.requestLayout();
    }

    // A derivative of the ToolBar class that will resize all buttons to be
    // the same size (based on the length of the longest button label) and
    // square.
    class SquareButtonToolBar extends ToolBar {

        @Override
        protected void layoutChildren() {
            double minPrefSize = calculatePrefChildSize();
            for (Node n : getItems()) {
                if (n instanceof Button) {
                    ((Button) n).setPrefWidth(minPrefSize);
                    ((Button) n).setPrefHeight(minPrefSize);
                }
            }
            super.layoutChildren();
        }

        private double calculatePrefChildSize() {
            double minPrefSize = 0.0d;
            for (Node n : getItems()) {
                if (n instanceof Button) {
                    minPrefSize = Math.max(minPrefSize, n.prefWidth(-1));
                }
            }
            return minPrefSize;
        }

    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

该类`SquareButtonToolBar`通过将按钮的首选宽度和高度设置为最长按钮的长度来覆盖布局代码，从而使所有按钮都是正方形且大小相同。`toolBar.requestLayout()`kludge 是方法底部的调用`start`。如果没有这个调用，即使按钮宽度在程序启动时都显示为所需的宽度，但在重新调整窗口大小之前，高度不会正确显示。不知道我自己错过了什么。如果您找到答案，请发布更新。

**更新：**将示例修改为完全正常工作的示例，但带有令人讨厌的 kludge。

# mysql - Mysql可以选择写入列标题吗？

> ID：15436540
> 
> 赞同：0
> 
> 时间：2013-03-15T15:44:28.830
> 
> 标签：mysql, csv

我想将列标题写入我的 csv 文件，但无法弄清楚如何使用`select .. into`语法。

我访问过这个[页面](http://dev.mysql.com/doc/refman/5.6/en/select-into.html)，并查看了一些关于该主题的 SO 帖子。我想知道 MySQL 是否`select .. into`提供了编写列标题的功能，或者是否有另一种方法可以做到这一点，同时仍在编写 .csv 文件。命令行中的普通选择确实会写入列标题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T16:07:55.173

丑陋，但解决了你的问题，

```
select * INTO OUTFILE from (
select 'col1', 'col2', 'col3'
UNION ALL
select col1, col2, col3 from table_name) as t 
```

# java - (MongoDB Java) $push 入数组

> ID：15436542
> 
> 赞同：36
> 
> 时间：2013-03-15T15:44:33.003
> 
> 标签：java, mongodb, mongo-java, nosql-aggregation, jongo

我正在使用 mongo 2.2.3 和 java 驱动程序。我的困境，我必须将一个字段和值推入一个数组，但我似乎无法弄清楚如何做到这一点。我的数据样本：

```
"_id" : 1,
"scores" : [
    {
        "type" : "homework",
        "score" : 78.97979
    },
    {
        "type" : "homework",
        "score" : 6.99
    },
    {
        "type" : "quiz",
        "score" : 99
    }
] 
```

我可以在 shell 中 $push：

```
db.collection.update({_id:1},{$push:{scores:{type:"quiz", score:99}}}) 
```

但是当我把它翻译成java时，我把自己弄糊涂了，把我的键盘扔到墙上。

到目前为止，我的 java 代码（不完整且错误）：

```
DBObject find = new BasicDBObject("_id", 1);
DBObject push = new BasicDBObject("$push", new BasicDBObject(
                        "scores", new BasicDBObject())); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-15T15:47:23.337

```
DBObject listItem = new BasicDBObject("scores", new BasicDBObject("type","quiz").append("score",99));
DBObject updateQuery = new BasicDBObject("$push", listItem);
myCol.update(findQuery, updateQuery); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-10-29T11:28:19.910

因为每个更新案例都有一个带有适当方法`mongodb-driver 3.1.`的构建器类。`com.mongodb.client.model.Updates`在这种情况下，这将是：

```
Document score = new Document().append("type", "quiz")
                               .append("score",99);

collection.updateOne(eq("_id", "1"),Updates.addToSet("scores", score)); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-03-15T15:53:53.480

如果您对 shell 的查询格式更满意，您可能会发现使用它`JSON.parse`来构造您的`DBObject`for更容易`$push`：

```
import com.mongodb.util.JSON;

String json = "{$push:{scores:{type:'quiz', score:99}}}";
DBObject push = (DBObject) JSON.parse(json); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-16T21:37:01.970

使用 Jongo，您可以[像在 shell 中一样](http://jongo.org/#updating)：

```
db.collection.update({_id:1},{$push:{scores:{type:"quiz", score:99}}}) 
```

变成Java：

```
collection.update("{_id:1}").with("{$push:{scores:{type:#, score:#}}}", "quiz", 99); 
```

不需要花哨的 DBObject ;-)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-22T18:55:11.880

MongoDB Java 驱动程序可以简化这一点。使用 $each 而不是 $push。

[$each mongodb 参考文档](https://docs.mongodb.com/manual/reference/operator/update/each/#up._S_each)

Java 示例 -

```
 BasicDBObject addressSpec = new BasicDBObject();
    addressSpec.put("id", new ObjectId().toString());
    addressSpec.put("name", "one");

    BasicDBObject addressSpec2 = new BasicDBObject();
    addressSpec2.put("id", new ObjectId().toString());
    addressSpec2.put("name", "two");

    List<BasicDBObject> list = new ArrayList<>();
    list.add(addressSpec); list.add(addressSpec2);

    UpdateResult updateOne = individualCollection.updateOne(Filters.eq("_id", "5b7c6b612612242a6d34ebb6"), 
            Updates.pushEach("subCategories", list)); 
```

# powershell - 如何在 PowerShell 中从文本文件的内容中设置变量？

> ID：15436550
> 
> 赞同：1
> 
> 时间：2013-03-15T15:45:17.190
> 
> 标签：powershell, powershell-3.0

我知道如何使用 cat 文件

```
cat file.txt 
```

但我有变量

```
[string]$body = "Body message here" 
```

我需要帮助更改它以从中获取文本内容`file.txt`

我试过了，但没有用。

```
 [string]$body = $cat file.txt 
```

这是完整的脚本，我正在尝试更改`param`部分。

```
param 
(        
    [string]$email = $(read-host "Enter a recipient email"),
    [string]$subject = $(read-host "Enter the subject header"), 
    [string]$body = $(read-host "Enter the email text (optional)")
) 
```

到

```
param 
(        
    [string]$email = "my@email.com",
    [string]$subject = "server", 
    [string]$body = gc C:\Users\myuser\Documents\somefolder\GnuWin32\bin\status.txt
)

# ==========================================================================
#   Functions
# ==========================================================================

function Send-Email
(
    [string]$recipientEmail = $(Throw "At least one recipient email is required!"), 
    [string]$subject = $(Throw "An email subject header is required!"), 
    [string]$body
)
{
    $outlook = New-Object -comObject  Outlook.Application 
    $mail = $outlook.CreateItem(0) 
    $mail.Recipients.Add($recipientEmail) 
    $mail.Subject = $subject 
    $mail.Body = $body

    # For HTML encoded emails 
    # $mail.HTMLBody = "<HTML><HEAD>Text<B>BOLD</B>  <span style='color:#E36C0A'>Color Text</span></HEAD></HTML>"

    # To send an attachment 
    # $mail.Attachments.Add("C:\Temp\Test.txt") 

    $mail.Send() 
    Write-Host "Email sent!"
}

Write-Host "Starting Send-MailViaOutlook Script."

# Send email using Outlook
Send-Email -recipientEmail $email -subject $subject -body $body

Write-Host "Closing Send-MailViaOutlook Script." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:48:23.070

尝试以下

```
[string]$body = gc file.txt 
```

该命令`gc`是一个别名`Get-Content`，它将获取指定项目的内容并将其作为`string`

**编辑**

正如所`C.B.`指出的，在您的示例中，您尝试使用`$cat`而不是`cat`. `$cat`试图引用一个未定义但是`cat`另一个别名的变量`Get-Content`

**编辑2**

看起来您正在尝试初始化参数。如果是这样，您需要执行以下操作

```
[string]$body = $(gc "C:\Users\myuser\Documents\somefolder\GnuWin32\bin\status.txt") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:00:15.217

改变：

```
[string]$body = ( gc C:\Users\myuser\Documents\somefolder\GnuWin32\bin\status.txt ) 
```

注意括号。

# xslt - xslt2 从节点中删除指定部分

> ID：15436552
> 
> 赞同：1
> 
> 时间：2013-03-15T15:45:29.613
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我想从我的 html 中的某些列表项中删除不需要的内容。基本上我想剥离给定跨度之前的所有内容（使用类选项卡），但前提是该跨度之前的内容符合某些条件。

以下面的例子为例：

```
<ol class="ast">
  <li>*<span class="tab"><!--tab--></span>Some blabla <img href="#">with a link.</a></li>
  <li>**<span class="tab"><!--tab--></span>Some other blabla, this one without other elements</li>
</ol> 
```

我喜欢得到的是以下内容：

```
<ol class="ast">
  <li>Some blabla <img href="#">with a link.</a></li>
  <li>Some other blabla, this one without other elements</li>
</ol> 
```

或者，用文字来解释，如果我有一个列表项，以一个或多个星号开头，后跟一个制表符跨度，然后只保留跨度之后的内容。

我一直在胡闹，但找不到满足我需求的东西，所以再次欢迎任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:08:20.787

这个怎么样：

```
<xsl:stylesheet 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0"
    exclude-result-prefixes="xs">

    <xsl:template match="@*|node()">
     <xsl:copy>
       <xsl:apply-templates select="@*|node()"/>
     </xsl:copy>
    </xsl:template>
    <xsl:template match="li/node()[1]
                                  [self::text() and 
                                   matches(., '^\*+$') and
                                   following-sibling::node()[1]
                                            [self::span and @class = 'tab']
                                   ]" />
    <xsl:template match="li/node()[2]
                                  [self::span and @class = 'tab']
                                  [matches(preceding-sibling::text(), '^\*+$')]" />

</xsl:stylesheet> 
```

在此输入上运行时：

```
<ol class="ast">
  <li>*<span class="tab"><!--tab--></span>Some blabla <a href="#">with a link.</a></li>
  <li>Not asterisks!<span class="tab"><!--tab--></span>Some other blabla, this one without other elements</li>
  <li>**<span class="tab"><!--tab--></span>Some other blabla, this one without other elements</li>
  <li>***<span>hello</span>Some other blabla, this one without other elements</li>
  <li><a href="#">with a link.</a>*<span class="tab">Some blabla </span></li>
</ol> 
```

结果是：

```
<ol class="ast">
  <li>Some blabla <a href="#">with a link.</a></li>
  <li>Not asterisks!<span class="tab"/>Some other blabla, this one without other elements</li>
  <li>Some other blabla, this one without other elements</li>
  <li>***<span>hello</span>Some other blabla, this one without other elements</li>
  <li><a href="#">with a link.</a>*<span class="tab">Some blabla </span></li>
</ol> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T05:38:27.487

**当前接受的解决方案是不正确的，通常会产生不正确的结果。例如，当应用于此 XML 文件时**：

```
<ol class="ast">
  <li><a href="#">with a link.</a>*<span class="tab">Some blabla </span></li>
  <li>Something else</li>
</ol> 
```

**产生了这个不正确的结果（`span`并且文本被错误地删除）：**

```
<?xml version="1.0" encoding="UTF-8"?><ol class="ast">
  <li><a href="#">with a link.</a></li>
  <li>Something else</li>
</ol> 
```

**这是一个正确的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "li/node()[1]
     [self::text() and not(translate(.,'*',''))
     and following-sibling::node()[self::span[@class='tab']]
     ]"/>

 <xsl:template match=
  "li/node()[2]
      [self::span[@class='tab']
     and preceding-sibling::node()[1]
             [self::text() and not(translate(.,'*',''))]
      ]
 "/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<ol class="ast">
  <li>*<span class="tab"><!--tab--></span>Some blabla <a href="#">with a link.</a></li>
  <li>Not asterisks!<span class="tab"><!--tab--></span>Some other blabla, this one without other elements</li>
  <li>**<span class="tab"><!--tab--></span>Some other blabla, this one without other elements</li>
  <li>***<span>hello</span>Some other blabla, this one without other elements</li>
</ol> 
```

**这种转换产生了想要的、正确的结果：**

```
<ol class="ast">
  <li>*<span class="tab"><!--tab--></span>Some blabla <a href="#">with a link.</a></li>
  <li>Not asterisks!<span class="tab"><!--tab--></span>Some other blabla, this one without other elements</li>
  <li>**<span class="tab"><!--tab--></span>Some other blabla, this one without other elements</li>
  <li>***<span>hello</span>Some other blabla, this one without other elements</li>
</ol> 
```

**当应用于上面的第一个 XML 文档时：**

```
<ol class="ast">
    <li><a href="#">with a link.</a>*<span class="tab">Some blabla </span>
    </li>
    <li>Something else</li>
</ol> 
```

**再次产生正确的结果：**

```
<ol class="ast">
   <li>
      <a href="#">with a link.</a>*<span class="tab">Some blabla </span>
   </li>
   <li>Something else</li>
</ol> 
```

# list - 将动态列表拆分为三列

> ID：15436557
> 
> 赞同：0
> 
> 时间：2013-03-15T15:45:45.083
> 
> 标签：list, dynamic, calculated-columns

我正在为 magento 构建创建产品 A 到 Z。但是，我的代码有效，第二列大于第一列和第三列。我在这里错过了一个技巧，无法理解数学。谁能看到我哪里出错了？

```
<div class="content">
<div class="collapse">
    <?php $letter = $this->getLetter(); ?>
    <?php $_collection = $this->getProductCollection(); ?>

        <h2 class=""><?php echo $this->__( $letter ) ?></h2>

            <?php if( $total = count($_collection)): ?>
                <?php $break = ceil($total / 3); ?>
                <div class="" style="">
                    <ul class="">
                        <?php $i = 0; ?>
                        <?php foreach( $_collection as $_product ): ?>
                            <?php if($i % $break == 0 && $i > 0) : ?>
                                </ul>
                                <ul class="">
                            <?php endif; ?>
                            <li class="productno-<?php echo $i ?>"><a href=""></a></li>

                                <?php $i++; ?>

                        <?php endforeach; ?>
                    </ul>
            <?php else: ?>
                </div>  
            <?php endif; ?>
    </div> 
```

我已经删除了所有没有必要的内容，所以忽略空类和 href

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T19:50:00.903

您可能希望输出完整列表并使用 css 设置样式，而不是在 php 中执行，如[Is there a way to break a list into columns？](https://stackoverflow.com/questions/6509106/css-ways-to-break-list-into-columns-on-page).

```
ul {
    -moz-column-count: 3;
    -moz-column-gap: 20px;
    -webkit-column-count: 3;
    -webkit-column-gap: 20px;
    column-count: 3 it;
    column-gap: 20px;
} 
```

# java - 添加数据库中不存在的额外列

> ID：15436568
> 
> 赞同：0
> 
> 时间：2013-03-15T15:46:34.137
> 
> 标签：java, swing, jtable

下面是我从数据库创建表的代码。我想在最后添加一个不会在数据库中的复选框列。它只是前端的一部分。你能帮忙吗？

尽管选择了一行，但我的 getRow() 方法继续返回-1，有什么建议吗？

```
 package Default;
 import javax.swing.*;
 import javax.swing.event.ListSelectionEvent;
 import javax.swing.event.ListSelectionListener;
import javax.swing.table.*;
 import java.sql.*;

/**
 * This class create JTable from Database table.
 * User program needs to specify database connection and corresponding a table name.
 * 
 */

public class DBTable{
//private String table;

DefaultTableModel dm=new DefaultTableModel();
JTable t1=new JTable();
Object row[];
String c[];
int cols;
PreparedStatement pst;
ResultSet rs  ;  

public DBTable(Connection conn){
   conn=Login.con;
}

/**
* This method return JTable object created from Database table having selected data and structur     * as in original table into database.
* @param table Name of the database table to be coverted to JTable
* @param query Select query to specify selected columns and data to extracted from database table
* @return JTable object that consist of selected data and structure of Database table
* @throws java.lang.Exception Original object is deferent, e.i either SQLException or NullPointerException
*/

public JTable getTable(String table,String query)throws Exception{

    JTable t1=new JTable();
    DefaultTableModel dm=new DefaultTableModel();
    Statement st= Login.con.createStatement();
    ResultSet rs=st.executeQuery(query);
    ResultSetMetaData rsmd=rs.getMetaData();
    //Coding to get columns-
    int cols=rsmd.getColumnCount();
    String c[]=new String[cols];
    for(int i=0;i<cols;i++){
        c[i]=rsmd.getColumnName(i+1);
        dm.addColumn(c[i]);
    }

    //get data from rows
    Object row[]=new Object[cols];
    while(rs.next()){
         for(int i=0;i<cols;i++){
                row[i]=rs.getString(i+1);
            }
        dm.addRow(row);
    }
    t1.setModel(dm);

    return t1;
}

      public int getRow(){

 int row =   t1.getSelectedRow();
JOptionPane.showMessageDialog(null, row);

    return  row; 
}

public void deleteRow(String sql){

try {
    String value = (String) t1.getValueAt(getRow(), 0);
    JOptionPane.showMessageDialog(null, value);
    pst = Login.con.prepareStatement(sql);
    pst.setString(1,  value);
    ((DefaultTableModel)t1.getModel()).removeRow(getRow());
    pst.execute();
    JOptionPane.showMessageDialog(null, "Deleted");

   } catch (Exception e) {
      e.printStackTrace();
      JOptionPane.showMessageDialog(null, e);
     }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:53:09.767

您使用的是 DefaultTableModel，因此在创建模型后，您可以手动添加一列：

```
model.addColumn("CheckBox Column"); 
```

# xslt - 在(XSLT)中选择的值

> ID：15436569
> 
> 赞同：1
> 
> 时间：2013-03-15T15:46:34.310
> 
> 标签：xslt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:30:46.770

您传递给`substring-before()`的只是一个字符串 ( `'%RolesPath%'`)。您似乎正在尝试使用 Windows 环境变量。这不会按照您使用它的方式工作。

我认为你有两个选择：

**选项1**

`xsl:param`调用样式表时将环境变量的值作为 an 传递。这适用于 XSLT 1.0 或 2.0。

你需要`xsl:param`：

```
<xsl:param name="RolesPath"/> 
```

这就是您引用它的方式：

```
<a href="{concat('file:///', substring-before($RolesPath, 'roles'),'Flores.chm')}"/> 
```

* * *

**选项 2**

使用该`environment-variable()`功能。*这仅适用于 XSLT 3.0 处理器，例如 Saxon-PE 或 EE。*

例子：

```
<a href="{concat('file:///', substring-before(environment-variable('RolesPath'), 'roles'),'Flores.chm')}"/> 
```

`environment-variable()`这是显示该功能实际工作的另一个示例：

*XSLT 3.0*

```
<xsl:stylesheet version="3.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/">
        <environment-variable name="TEMP" value="{environment-variable('TEMP')}"/>
    </xsl:template>

</xsl:stylesheet> 
```

*输出*（当应用于任何格式良好的 XML 时）

```
<environment-variable name="TEMP" value="C:\Users\dhaley\AppData\Local\Temp"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T05:03:23.930

**使用这个较短的表达式**：

```
<a href="file:///{substring-before($RolesPath, 'roles')}Flores.chm"/> 
```

where`$RolesPath`作为外部全局参数传递给转换。

**如何准确地将外部参数传递给转换因 XSLT 处理器而异**——请阅读您的 XSLT 处理器文档。一些 XSLT 处理器还允许将字符串类型的参数从命令行执行实用程序传递给转换。

# html - 在 html5 画布上移动已经绘制的形状

> ID：15436575
> 
> 赞同：0
> 
> 时间：2013-03-15T15:46:47.633
> 
> 标签：html, debugging, canvas, drag-and-drop, clipping

我无法在画布上保留一个对象。最初绘制的框将其呈现在正确的位置，但当我拖动它时它消失了：

```
 var canvas = document.getElementById('canvas'),
    context = canvas.getContext('2d'),
    eraseAllButton = document.getElementById('eraseAllButton'),
    strokeStyleSelect = document.getElementById('strokeStyleSelect'),
    guidewireCheckbox = document.getElementById('guidewireCheckbox'),
    drawingSurfaceImageData,
    mousedown = {},
    rubberbandRect = {},
    dragging = false,
    guidewires = guidewireCheckbox.checked,
    w = 90, h = 90;
    count = 0;
    boxesXCo = 0;
    boxesYCo = 0;
    i = 0;

// Functions..........................................................
function drawGrid(color, stepx, stepy) {
   context.save()

   context.strokeStyle = color;
   context.lineWidth = 0.5;
   context.clearRect(0, 0, context.canvas.width, context.canvas.height);

   for (var i = stepx + 0.5; i < context.canvas.width; i += stepx) {
     context.beginPath();
     context.moveTo(i, 0);
     context.lineTo(i, context.canvas.height);
     context.stroke();
   }

   for (var i = stepy + 0.5; i < context.canvas.height; i += stepy) {
     context.beginPath();
     context.moveTo(0, i);
     context.lineTo(context.canvas.width, i);
     context.stroke();
   }

   context.restore();
}

function windowToCanvas(x, y) {
   var bbox = canvas.getBoundingClientRect();
   return { x: x - bbox.left * (canvas.width  / bbox.width),
            y: y - bbox.top  * (canvas.height / bbox.height) };
}

// Save and restore drawing surface...................................
function saveDrawingSurface() {
   drawingSurfaceImageData = context.getImageData(0, 0,
                             canvas.width,
                             canvas.height);
}

function restoreDrawingSurface() {
   context.putImageData(drawingSurfaceImageData, 0, 0);
}

function drawRubberbandShape(loc) {
   context.beginPath();
   context.moveTo(mousedown.x, mousedown.y);
   //context.lineTo(loc.x, loc.y);

   context.stroke();
}

function updateRubberband(loc) {
   //updateRubberbandRectangle(loc);
   context.restore();
   drawRubberbandShape(loc);
}

// Guidewires.........................................................
function drawHorizontalLine (y) {
   context.beginPath();
   context.moveTo(0,y+0.5);
   context.lineTo(context.canvas.width,y+0.5);
   context.stroke();
}

function drawVerticalLine (x) {
   context.beginPath();
   context.moveTo(x+0.5,0);
   context.lineTo(x+0.5,context.canvas.height);
   context.stroke();
}

function drawGuidewires(x, y) {
   context.save();
   context.strokeStyle = 'rgba(0,0,230,0.4)';
   context.lineWidth = 0.5;
   drawVerticalLine(x);
   drawHorizontalLine(y);
   context.restore();
}

// Canvas event handlers..............................................
canvas.onmousedown = function (e) {
   var loc = windowToCanvas(e.clientX, e.clientY);

   e.preventDefault(); // prevent cursor change
   context.restore();
   saveDrawingSurface();
   mousedown.x = loc.x;
   mousedown.y = loc.y;
   dragging = true;
   if (i ==0)
   i++;
   else if(((mousedown.x<=(boxesXCo+w)&&(mousedown.x>=boxesXCo))&&
                  ((mousedown.y<=(boxesYCo+h)&&(mousedown.y>=boxesYCo)))))
   i--;

};

canvas.onmousemove = function (e) {
   var loc; 

   if (dragging) {
      e.preventDefault(); // prevent selections

      loc = windowToCanvas(e.clientX, e.clientY);
      restoreDrawingSurface();
      //updateRubberband(loc);

      if(guidewires) {
         drawGuidewires(loc.x, loc.y);
      }
   }

   if(((mousedown.x<=(boxesXCo+w)&&(mousedown.x>=boxesXCo))&&
                  ((mousedown.y<=(boxesYCo+h)&&(mousedown.y>=boxesYCo))))
   && (dragging)&&(i == 1 )){
         context.restore();
         restoreDrawingSurface();
         context.fillStyle = strokeStyleSelect.value;
         context.fillRect(e.clientX,e.clientY,w,h);

      };

   //Trying to implement moving shapes but need to store values of drawn objs

};

canvas.onmouseup = function (e) {
   loc = windowToCanvas(e.clientX, e.clientY);
   restoreDrawingSurface();
   updateRubberband(loc);
   dragging = false;

      if(i == 0);
      else {
         saveDrawingSurface();
      restoreDrawingSurface();
      context.fillRect(e.clientX,e.clientY, w, h);
      boxesXCo = e.clientX;
      boxesYCo = e.clientY;

      context.restore(); 
      i++;}

      /*else if(i == 1)
      {
         context.restore();
      }*/

   //context.fillRect(mousedown.x,mousedown.y,w,h,"FF0982");
};

// Controls event handlers.......................................

eraseAllButton.onclick = function (e) {
   context.clearRect(0, 0, canvas.width, canvas.height);
   drawGrid('lightgray', 10, 10);
   saveDrawingSurface();
   count =0;
   context.restore();
};

strokeStyleSelect.onchange = function (e) {
   context.strokeStyle = strokeStyleSelect.value;
    context.fillStyle = strokeStyleSelect.value;
};

guidewireCheckbox.onchange = function (e) {
   guidewires = guidewireCheckbox.checked;
};

// Initialization................................................
context.strokeStyle = strokeStyleSelect.value;
context.fillStyle = strokeStyleSelect.value;
drawGrid('lightgray', 10, 10);

//context.fillRect(mousedown.x,mousedown.y,(mousedown.x+50),(mousedown.x+50),"FF0982");
//context.drawRect(mousedown.x-50,mousedown.y-50,mousedown.x+50,mousedown.y+50); 
```

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T19:36:03.073

不是在每次鼠标移动时都绘制到画布上，而是使用[window.requestFrameAnimation](https://developer.mozilla.org/en-US/docs/Web/API/window.requestAnimationFrame)不断绘制。

猜测一下，我会假设浏览器渲染受到干扰或坐标已丢失，但我无法运行您的代码来确定。

我编写了一些伪代码来显示我为渲染事物所做的工作。你需要自己实现它，它不会开箱即用，它只是作为一个指南。

```
var Box = function() {
};
Box.prototype = {
    x: 0,
    y: 0,
    draw: function (canvas) {
        // draw the item on the canvas
    }
};

var box = new Box();

window.requestAnimationFrame(function() {
    box.draw(canvas);
    window.requestAnimationFrame();
});

canvas.onmousemove = function(e) {
    if (dragging) {
        box.x = e.clientX;
        box.y = e.clientY;
    }
} 
```

# google-plus - Google+ 按钮在不同域中共享“+1”的数量

> ID：15436584
> 
> 赞同：1
> 
> 时间：2013-03-15T15:47:09.733
> 
> 标签：google-plus

我在三个不同的域上安装了一个 Google+ 按钮，它们仅在 TLD 部分（、、、）上有本质`example.de`的`example.at`不同`example.ch`。还可能值得注意的是，网站本身几乎相同，这意味着对于其中一个网站上的每个页面，在其他两个域上都有一个相同的页面（不要问我为什么这是由负责的机构提出的要求）搜索引擎优化）。

问题是每当我在主页上使用 +1 按钮时，`example.de`它的计数在其他两个域上也会增加，尽管在我的 +1 个人资料中只显示点击的页面。现在，如果我转到`example.at`主页并单击 +1 按钮以删除我的 +1，它也会从所有其他网站的 +1 计数中删除。

至于问题的技术部分，我使用的是 +1 按钮的标准非异步版本，这意味着我的代码基本上看起来像这样。

```
<!-- Some code... -->
<div class="g-plusone"></div>
<!-- ... even more code... -->
<script type="text/javascript" src="https://apis.google.com/js/plusone.js">{lang: 'de'}</script> 
```

此外，我没有`href`在每个页面上明确设置 +1 按钮的部分，而是让 Google Plus 脚本自行解决。我知道它不是推荐的方法（甚至在 Google Plus 文档中也有说明）但是这种方法从一开始就运行良好，我想知道它突然中断的潜在原因是什么。

老实说，我一无所知。我浏览了 Google+ 上的所有可用文档，但没有运气，而且几乎不可能在网络上找到有关此问题的任何信息。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:45:52.013

您没有提及实际的 URL，或者您是否为相关页面设置了任何其他元数据，但一种可能性是，所有相关页面的规范链接都设置为相同的值。在这种情况下，出于 +1 的目的，Google 将它们都视为相同。有关详细信息，请参阅[https://developers.google.com/+/web/+1button/#target-url](https://developers.google.com/+/web/+1button/#target-url)。

# c# - ListView 或 DataGridView

> ID：15436587
> 
> 赞同：1
> 
> 时间：2013-03-15T15:47:21.450
> 
> 标签：c#, wpf

作为 WPF 的新手，我正在寻找关于哪种控件最适合用于以下场景的指导。

我需要创建一个并排显示两个列表的应用程序。左侧的列表显示用户列表。右侧的列表显示权限列表。

我希望能够通过单击/拖动左侧列表中的用户来动态添加/删除一列指示用户权限到右侧权限列表的复选框。用户权限列的数量将从 0 - 用户总数。该复选框应绑定到基础数据，即更新用户权限。

我应该使用哪个控件来实现右手权限列表，ListView 还是 DataGrid？

我通过使用 ListView 并使用以下答案作为[WPF MVVM 指南创建附加属性来工作：如何将 GridViewColumn 绑定到 ViewModel-Collection？](https://stackoverflow.com/questions/2643545/wpf-mvvm-how-to-bind-gridviewcolumn-to-viewmodel-collection)但这不会为权限状态呈现仅 true/false 的复选框。研究如何动态添加 CellDataTemplate 以呈现复选框让我质疑是否应该使用 DataGrid。

如果我要使用 DataGrid，动态添加列将如何工作？

如果可能的话，我想将代码保持在最低限度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:56:45.253

乍一看你的问题，我认为 Datagrid 会是一个更好的选择。我是一个 vb.net 人，但我认为语法会非常相似

要在运行时添加列，后面的代码如下所示

```
DataGridView1.Columns.Add("Column Name", "Column Heading") 
```

您总是可以在“在 C# 运行时将列添加到 DataGrid”上进行谷歌搜索，这应该会返回一堆示例。

# javascript - 如何防止用户按退格/后退箭头

> ID：15436590
> 
> 赞同：0
> 
> 时间：2013-03-15T15:47:22.957
> 
> 标签：javascript

我有一系列的调查，一个接一个。似乎在一次调查之后，有些人正在按下退格键返回之前的调查，然后重新提交新信息。我怎样才能阻止这个？我假设我需要某种 Javascript 脚本。

我发现这个 [防止退格键从当前表单返回](https://stackoverflow.com/questions/14504534/preventing-backspace-to-go-back-from-the-current-form)

但是如果有人故意这样做似乎没有帮助，这可能就是这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T15:49:25.523

不要破坏后退按钮。这打破了浏览器[HCI 规则](http://hcid.soi.city.ac.uk/cityinteractionlab/blog/5-tips-on-accessible-web-design-with-examples/#point2)。

要正确执行此操作，您需要为正在进行的每个调查实例分配一个唯一 ID。然后，在开始调查时，检查该 ID 是否之前未提交过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:54:42.780

我假设您正在跟踪用户在服务器上的调查进度（通过 cookie）。如果用户已进入调查中的页面 N，并且您不希望他返回并修改他在页面 N-1 上的回答，那么即使他尝试访问 N-，您也可以向他展示页面 N。 1 页。这将照顾用户通过按后退按钮返回 N-1 页面（即使您阻止退格按钮，他/她也可以执行此操作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:55:19.097

我可以通过创建 $_SESSION 并在每个表单完成时更新它来了解如何在 PHP 中完成它。

在每一页的开头，只需检查会话是否与正确的调查相关。

我会试着举个例子。

第一页

```
$_SESSION['status'] = 1;  // allowed to view survey 1
if($_SESSION['status'] != 1){
 header('Location: /page' . $_SESSION['status'] . '.php');
 exit();
}

// your survey
// clicks submit
// goes to 2nd page 
```

.... 第 2 页（第 2 次调查）

```
$_SESSION['status'] = 2; // updates the status to show is on the 2nd page
if($_SESSION['status'] != 2){
     header('Location: /page' . $_SESSION['status'] . '.php');
     exit();
    }

// your survey
// clicks submit
// goes to 3rd page.. etc 
```

# c++ - 需要帮助模板化由多个线程访问的结构

> ID：15436592
> 
> 赞同：0
> 
> 时间：2013-03-15T15:47:25.900
> 
> 标签：c++, multithreading, templates, types

这个问题需要实现一个环形缓冲区，生产者向其中写入数据，消费者从中读取数据。我已经为数据类型做了这个。我想扩展它，以便它适用于任何原始数据类型，但还没有找到一个好的方法来做到这一点。我希望程序从命令行获取输入，例如“program_name data_type size_of_buffer”。
我可以模板化 buffer.start 指针并传递数据类型，但我不知道将数据类型名称分配给变量的方法。有人有想法么？

```
struct buffer{
    int * start;
    int size;
}buffer;

int * producer=NULL;
int * consumer=NULL;
bool donewriting;
bool sleeping;

void *mywrite(void *);
void *myread(void *);

void *mywrite(void * ){
    do{
        cout<<"In Thread 1"<<endl;
        static int x=0;
        *producer=x;
        cout<<"Write thread: wrote value "<<x<<" into buffer"<<endl;

        producer++;
        if(producer==buffer.start+10)
        {   producer=buffer.start;
            donewriting=true;
        }

        if(x==5)
        {
            cout<<"Thread 1 going to sleep"<<endl;
            Sleep(2000);
        }
        x++;
    } while(producer!=buffer.start);
}

void *myread(void *){
    while(!donewriting)
    {   //cout<<"In Thread 2"<<endl;
        if(consumer<producer)
        {  cout<<"Read thread: read value "<<*consumer<<" from buffer"<<endl;
            consumer++;
        }
    }
}

int main()
{
    buffer.size=10;
    buffer.start=new int(10);
    producer=buffer.start;
    consumer=buffer.start;
    donewriting=false;

    cout<<"In main"<<endl;
    pthread_t writeThread,readThread;
    pthread_create(&writeThread,NULL,mywrite,NULL);
    pthread_create(&readThread,NULL,myread,NULL);

    pthread_join(writeThread,NULL);
    pthread_join(readThread,NULL);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:33:13.973

不幸的是，鉴于您所描述的情况，您的目标是不可能的。在内部，**C++ 程序为与模板一起使用的每种数据类型编译模板代码**。换句话说，如果你有一个模板函数 x() 并且你调用

```
x<int>();
x<float>(); 
```

编译器将生成模板函数的两个副本：一个使用`int`数据类型，另一个使用`float`数据类型。在调用该函数之前，根本不会生成任何代码。因此，您无法构建程序并将任意数据类型传递给它。

当然，如果命令行调用仅用于测试代码，并且您将来会在库中使用它，那没关系 - 但您仍然必须指定您正在使用的类型在你的代码中。

您当前执行此操作`void *`的方式可能是最好的方式。

最好指定您希望使用的类型的大小（以字节为单位），而不是指定特定类型本身。只要您的最终生产者和消费者分享有关类型的知识，您就可以了。

# scala - 如何测量和显示单个测试的运行时间？

> ID：15436593
> 
> 赞同：11
> 
> 时间：2013-03-15T15:47:34.063
> 
> 标签：scala, duration, measurement, scalatest

我有一个用*scalatest*编写的可能长时间运行的测试：

```
test("a long running test") {
  failAfter(Span(60, Seconds)) {
    // ...
  }
} 
```

即使测试在超时限制内完成，它的运行时间对运行测试的人来说也很有价值。如何在 scalatest 的输出中测量和显示这个特定测试的运行*时间*？

**更新：**目前我用自己的函数测量运行时间，就像 rv 的回答一样。我想知道*scalatest*是否已经提供此功能。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T16:46:09.720

该`-oD`选项将给出测试的持续时间。例如，我在 build.sbt 中使用以下内容。

```
testOptions in Test += Tests.Argument("-oD") 
```

编辑：

您还可以将以下内容用于单个运行：

```
> test-only org.acme.RedSuite -- -oD 
```

请参阅[http://www.scalatest.org/user_guide/using_scalatest_with_sbt](http://www.scalatest.org/user_guide/using_scalatest_with_sbt)。

此外，您可以为一般时间测量定义以下函数：

```
def time[T](str: String)(thunk: => T): T = {
  print(str + "... ")
  val t1 = System.currentTimeMillis
  val x = thunk
  val t2 = System.currentTimeMillis
  println((t2 - t1) + " msecs")
  x
} 
```

并在任何地方使用它（不依赖于ScalaTest）

```
test("a long running test") {
  time("test running"){
    failAfter(Span(60, Seconds)) {
    // ...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-07T15:42:18.967

除了 rv 的回答：如果您有多项目构建，`testOptions in Test += Tests.Argument("-oD")`则在 build.sbt 的根级别上不起作用，因为 Test 指的是 src/test/scala。你必须把它放在你的子项目设置中

```
Project(id = "da_project", base = file("da_project"))
    .settings(
        testOptions in Test += Tests.Argument("-oDG"),
        libraryDependencies ++= Seq(
            ...
        )
    ) 
```

# vba - Excel 在执行期间冻结

> ID：15436596
> 
> 赞同：1
> 
> 时间：2013-03-15T15:47:43.137
> 
> 标签：vba, excel

当我在 Excel 中执行我的代码（需要 3-4 分钟才能执行）时，我在 excel 或我的用户表单中单击某些内容，它会冻结、变白、几乎崩溃......当执行准备好时，一切都很好了.

执行过程中不能在excel中工作当然是正常的，但是如何避免excel的“崩溃”呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-03-03T06:00:02.307

代码中有循环吗？

如果是这样，请在初始化循环后添加以下行，它应该有助于解决您的问题！

```
DoEvents 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T04:47:12.080

防止此类问题的最佳方法是对代码进行基准测试以确定需要这么长时间的原因。如果您的代码运行时间超过 3 分钟，那么您几乎可以肯定还有优化空间。

以下是您需要采取的步骤：

1.  在正在执行的代码中设置多个断点。
2.  计算从一个断点到下一个断点所需的时间。
3.  一旦你确定了罪魁祸首，重构。
4.  如果您无法提高性能，请发布效率低下的代码并寻求帮助。

一个臭名昭著的性能缓慢的反模式是在循环中选择事物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:38:08.277

在确保没有导致 excel 无响应的无限循环后，请尝试优化您的代码。

我发现[这](http://www.cpearson.com/excel/optimize.htm)是一本关于 vba-excel 代码优化的非常有趣的读物，其中一些实践实际上对我编写的一个大而耗时的模块产生了影响。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:33:21.660

您需要做的是创建一个覆盖 Excel UI 的自定义 UserForm，例如[Progress Bar](https://stackoverflow.com/questions/5181164/progress-bar-in-vba-excel)。您还需要研究强制表单保持在顶部的方法，就像`modal form`. 您不能使用`modal form`'s，因为它们会停止执行。

# php - 使用 codeigniter 替换多个字符串

> ID：15436597
> 
> 赞同：1
> 
> 时间：2013-03-15T15:47:50.550
> 
> 标签：php, string

我知道一定有更好的方法来写这个我只是找不到它或者我没有问正确的问题。

我将如何在一个语句中编写多个 str_replace ？

这是我的代码

```
function create() {
if(array_key_exists('createFolder',$_POST)){
  $data = array(
    'folderName' => $this->input->post('folderName')
 // 'time' => date('Y-m-d H:i:s',now())
  );
  $data = str_replace(' ', '_', $data);
  $data = str_replace('.', '_', $data);
  $data = str_replace('?', '_', $data);
  $datestring = "Year: %Y Month: %m Day: %d - %h:%i %a";
  $time = time();
  // $data = str_replace(' ', '_', $data);
  $this->index_model->createFolder($data, $datestring, $time);
}
$this->foldercreated(); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:49:36.490

你可以使用一个数组：

```
$data = str_replace(array(' ', '.', '?'), '_', $data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:49:40.760

使用类似的数组`$data = str_replace(array(' ', '.', '?'), '_', $data);`

# facebook - 无法使用 Facebook PHP SDK 获取用户 ID

> ID：15436602
> 
> 赞同：0
> 
> 时间：2013-03-15T15:48:00.160
> 
> 标签：facebook

我正在构建一个 Facebook 应用程序，需要直接从 Facebook 获取用户 ID。我打算使用 Facebook PHP SDK 来获取用户 ID，但它总是让我的服务器崩溃。

这是我的代码：

```
<?php
require 'facebook-php-sdk-master/src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'APP_ID',
  'secret' => 'APP_SECRET',
));

// Get User ID
$user = $facebook->getUser();

echo $user;
?> 
```

我总是收到服务器错误消息：

```
HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request. 
```

我正在使用来自[https://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)的 Facebook PHP SDK 。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T16:53:00.023

我发现了错误。事实证明，base_facebook.php 文件中存在错误。您需要修改 getCurrentUrl() 函数以重定向到您在应用设置中使用的应用 URL。希望可以节省几个小时的调试时间！

# oop - ddd 中的验证方法

> ID：15436604
> 
> 赞同：5
> 
> 时间：2013-03-15T15:48:05.890
> 
> 标签：oop, domain-driven-design

我对 ddd 中的验证方法有疑问。我已经阅读了对此颇有争议的意见。有人说这应该存在于实体之外，另一些人说这应该放在实体中。我正在尝试找到一种我可以遵循的方法。

例如，假设我有带有电子邮件和密码的用户实体。用户有一个方法注册（电子邮件，密码）。电子邮件和密码验证应该放在哪里？我个人的看法是它应该在 Register() 方法中。但是这种方法可能会导致 User 类与验证内容混淆。一种方法可能是在单独的策略对象中提取电子邮件和密码规则，并仍然从 Register() 方法调用它们。

您对 DDD 中的验证方法有何看法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T16:42:39.863

首先，我认为验证有点棘手，部分原因是需要考虑的各种[背景。](http://martinfowler.com/bliki/ContextualValidation.html)最终，将在各个应用层执行验证规则。至少，域对象中应该有标准的守卫。这些只是常规的前置条件和参数检查，它们应该是任何设计良好的对象的一部分，并且符合您对该`Reigster`方法的看法。正如lazyberezovsky 所说，这是为了防止对象进入无效状态。在这一点上，我支持始终有效的学校。我认为如果需要将实体保持在无效状态，应该为此创建一个新实体。

然而，单独使用这种方法的一个问题是，经常需要将这些验证规则导出到其他层，例如表示层。此外，在表示层，规则需要有不同的格式。它们需要同时呈现，并可能翻译成另一种语言，例如 JavaScript，以便立即获得客户端反馈。尝试从类引发的异常中提取验证规则可能很困难或不切实际。或者，可以在表示层重新创建验证规则。这要简单得多，尽管可能违反 DRY，但它允许规则依赖于上下文。特定工作流可能需要与实体本身强制执行的验证规则不同的验证规则。

所描述方法的另一个问题是，可能存在实体范围之外的验证规则，并且这些规则必须与其他规则合并在一起。例如，对于用户注册，另一个规则是确保电子邮件地址是唯一的。托管适用用例的应用程序服务通常会强制执行此规则。但是，它还必须能够将此规则导出到其他层，例如表示。

总的来说，我尝试将尽可能多的约束检查放入实体本身，因为我认为实体应该始终有效。有时可以设计规则框架，使其既可用于引发异常又可导出到外层。其他时候，简单地跨层复制规则会更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T15:56:53.427

实际上，用户的有效性取决于上下文。用户可以有效（姓名和电子邮件有效），但注册操作可能无法执行。为什么？因为可能已经存在同名用户。因此，在某些上下文中看起来有效的用户在注册上下文中可能是无效的。

因此，我将验证的一部分移到实体或值对象（例如 Mail 对象）中，以避免明显无效的实体状态（例如具有`null`名称的用户）。但是上下文相关的验证应该存在于那个上下文中。所以，如果我正在注册用户：

```
Mail mail = new Mail(blahblahblah); // validates if blah is valid email
User user = new User(name, mail); // validates if name is valid and mail not null
// check if there already exist user with such name or email
repository.Add(user); 
```

另外我认为该方法`Register`应该是某些域服务（例如 MembershipService）的方法，因为它肯定应该使用某个存储库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T17:58:06.177

> 例如，假设我有带有电子邮件和密码的用户实体。用户有一个方法注册（电子邮件，密码）。电子邮件和密码验证应该放在哪里？

如果您关注 DDD，电子邮件地址和用户名是您域中的关键概念 - 因此它们应该表示为实体。在这种情况下，电子邮件地址的验证位于`EmailAddress`实体中，而用户名的验证应放置在`Username`实体中。

伪代码示例：

```
class EmailAddress
{
    Constructor(string email)
    {
        if (email.DoesNotMatchRegex("\w+@\w+.\w{2,3}"))
            throw error "email address is not valid"
    }
}

class Username
{
    Constructor(string username)
    {
        if (username.length < 6)
            throw error "username must be at least 6 characters in length"
    }
}

class User
{
    Register(Username username, EmailAddress email)
    {
        if (username == null)
            throw error "user must have a username"

        if (email == null)
            throw new error "user must provide email address"

        // At this point, we know for sure that the username and email address are valid...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T00:37:24.943

首先，我将两件事分开：验证和业务规则，后者通常进入服务或实体方法。对于有效电子邮件地址或有效密码等验证，我通常将它们粘贴到拥有它们的实体上，这样如果我将应用程序移植到不同的平台，我可以将它们与实体一起移动。现在对于您的注册方法示例，如果对象处于无效状态，我不明白为什么首先调用此方法，如果将调用它，我将使其成为另一个方法（如 SignUp）的一个步骤，可能会这样做像这样的东西：`if (isValid()) register(username, password)`。

# mongodb - MongoDB 超出范围查询

> ID：15436611
> 
> 赞同：0
> 
> 时间：2013-03-15T15:48:24.010
> 
> 标签：mongodb

我正在尝试查询 MongoDB 以获得类似的东西：

“让年龄不在 [30,40] 范围内的人”

我在做：

```
db.persons.find({'age' : {$nin : [{$lt : 30},{$gt : 40}]}}) 
```

这对我不起作用。我知道我可以做一些年龄<30 和年龄>40 的人，但我想知道我是否可以使用“不在”运算符...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:53:09.673

[像这样使用OR 连词](http://docs.mongodb.org/manual/applications/read/#or-disjunctions)怎么样：

```
db.persons.find($or: [{'age': {$lt: 30}},{'age': {$gt : 40}}]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T03:10:41.727

$in / $nin 是用于查询列表中离散值的运算符，不能用于范围搜索。

在您的示例中，带有 $nin 的查询必须是

```
db.persons.find({age:{$nin:[30,31,32,33,34,35,36,37,38,39,40]}}) 
```

这根本不实用，而且不会使用索引：

```
db.persons.ensureIndex({age:1})
db.persons.find({age:{$nin:[30,31,32,33,34,35,36,37,38,39,40]}}).explain()
    {
        "cursor" : "BasicCursor",
        "isMultiKey" : false,
        "n" : 1,
        "nscannedObjects" : 1,
        "nscanned" : 1,
        "nscannedObjectsAllPlans" : 1,
        "nscannedAllPlans" : 1,
        "scanAndOrder" : false,
        "indexOnly" : false,
        "nYields" : 0,
        "nChunkSkips" : 0,
        "millis" : 0,
        "indexBounds" : {

        },
        "server" : "Aspire-5750:27017"
    } 
```

Sgoettschkes 上面的回答是正确的，并且会使用索引：

```
db.persons.find({$or: [{'age': {$lt: 30}},{'age': {$gt : 40}}]}).explain()
{
    "clauses" : [
        {
            "cursor" : "BtreeCursor age_1",
            "isMultiKey" : false,
            "n" : 0,
            "nscannedObjects" : 0,
            "nscanned" : 0,
            "nscannedObjectsAllPlans" : 0,
            "nscannedAllPlans" : 0,
            "scanAndOrder" : false,
            "indexOnly" : false,
            "nYields" : 0,
            "nChunkSkips" : 0,
            "millis" : 12,
            "indexBounds" : {
                "age" : [
                    [
                        -1.7976931348623157e+308,
                        30
                    ]
                ]
            }
        },
        {
            "cursor" : "BtreeCursor age_1",
            "isMultiKey" : false,
            "n" : 1,
            "nscannedObjects" : 1,
            "nscanned" : 1,
            "nscannedObjectsAllPlans" : 1,
            "nscannedAllPlans" : 1,
            "scanAndOrder" : false,
            "indexOnly" : false,
            "nYields" : 0,
            "nChunkSkips" : 0,
            "millis" : 0,
            "indexBounds" : {
                "age" : [
                    [
                        40,
                        1.7976931348623157e+308
                    ]
                ]
            }
        }
    ],
    "n" : 1,
    "nscannedObjects" : 1,
    "nscanned" : 1,
    "nscannedObjectsAllPlans" : 1,
    "nscannedAllPlans" : 1,
    "millis" : 12,
    "server" : "Aspire-5750:27017"
} 
```

有关有效查询的更多信息，请参阅[http://docs.mongodb.org/manual/core/read-operations/](http://docs.mongodb.org/manual/core/read-operations/)

# c# - HasFlags 对于枚举中的 None (0) 值总是返回 true

> ID：15436616
> 
> 赞同：31
> 
> 时间：2013-03-15T15:48:39.693
> 
> 标签：c#, enums, enum-flags

这是枚举定义：

```
[Flags]
enum Animals
{
    None = 0,
    Dog = 1,
    Cat = 2,
    Horse = 4,
    Zebra = 8,
} 
```

现在，给定以下代码，为什么 HasFlag 方法对 Animals.None 值返回 true？

```
Animals myAnimals = Animals.Dog | Animals.Horse;

var hasNone = myAnimals.HasFlag(Animals.None);    //true! Why?
var hasCat = myAnimals.HasFlag(Animals.Cat);      //false
var hasDog = myAnimals.HasFlag(Animals.Dog);      //true
var hasHorse = myAnimals.HasFlag(Animals.Horse);  //true
var hasZebra = myAnimals.HasFlag(Animals.Zebra);  //false 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-15T15:51:16.937

`HasFlag`实际上是这样的：

```
HasFlag = (GivenFlag & Value) == GivenFlag;

//"Anything" AND 0 == 0  --> always true 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-15T15:52:14.003

我自己之前就遇到过这个问题。它是在 .NET Framework 中设计的：

> 如果 flag 的基础值为零，则该方法返回 true。如果此行为不可取，您可以使用 Equals 方法测试是否与零相等，并仅在 flag 的基础值非零时调用 HasFlag，如下例所示。

您可以在此处的 MSDN 文章中阅读更多相关信息：http: [//msdn.microsoft.com/en-GB/library/system.enum.hasflag.aspx](http://msdn.microsoft.com/en-GB/library/system.enum.hasflag.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-03T12:05:46.300

已经有很多答案描述了为什么会发生这种情况，所以我只想补充一点，你可以做的就是`HasFlag`在这种情况下不使用，而是使用`var hasNone = myAnimals == Animals.None`.

我个人真的很讨厌扩展方法，但是`Enum`如果你真的很重视能够只写`myOptionEnum.HasNoFlags()`. `None`不过，在这种特殊情况下，我将只运行显式检查值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T15:51:23.137

很好`Enum.HasFlags`解决如下：

```
var hasNone = (myAnimals & Animals.None) == Animals.None 
```

对于零值枚举字段，这始终是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T15:51:45.270

来自**[MSDN](http://msdn.microsoft.com/en-us/library/system.enum.hasflag.aspx)**

HasFlag 方法返回以下布尔表达式的结果。

```
thisInstance And flag = flag 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T15:52:00.743

这只是该`HasFlag`方法的定义行为。来自[MSDN](http://msdn.microsoft.com/en-us/library/system.enum.hasflag.aspx)文档

> 如果 flag 的基础值为零，则该方法返回 true

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-02T23:06:14.870

我最终删除了“无”元素。它是一个“神奇值”，会干扰正确的 Flags Enum 操作（如 HasFlag()）。

如果没有价值，那么使用 Nullable 即动物？（现在支持原始类型）

**编辑**：我需要一个“默认”值（非零）用于可序列化对象，以避免使用 Nullable（与业务逻辑冲突）。但我认为这仍然比使用'None = 0'更好。

# string - 如何通过将字符串与另一个字符串进行比较来在 MATLAB 中的元胞数组中搜索字符串？

> ID：15436622
> 
> 赞同：1
> 
> 时间：2013-03-15T15:48:58.413
> 
> 标签：string, matlab, compare

我曾尝试使用 strcmp 但我不知道如何查看元胞数组并仅输出具有该字符串的元胞数组。

例如 str='你好'

```
out=["Hello", "my", "name", "is" "sam"]
out=["What", "is", "you", "name"]
out=["Hello", "my", "name", "is" "John"] 
```

我的代码如下

```
while ~feof(fid)
    line=fgetl(fid)
    if isempty(line)||strncmp(line, '%',1)||~ischar(line)
        continue
    end
    fprintf(line)
    out=regexp(line, '', 'split')
end 
```

我想添加 if(str=="Hello")，只打印出那些数组

输出

```
["Hello", "my", "name", "is" "sam"]
["Hello", "my", "name", "is" "John"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:53:16.123

类似的东西

```
if any(strcmp('Hello', out)) 
```

应该是有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:04:55.727

使用`ismember()`. 例如`out = {'Hello', 'my', 'name', 'is', 'sam'};`，，那么`ismember(out, 'Hello')` 应该是 1。您可以查看此讨论[http://www.mathworks.com/matlabcentral/newsreader/view_thread/284849](http://www.mathworks.com/matlabcentral/newsreader/view_thread/284849)

顺便说一句，`out=["Hello", "my", "name", "is" "sam"]`不是一个单元格的表示。它应该是`out = {'Hello', 'my', 'name', 'is', 'sam'}`

# android - GCM 发送图像而不是消息

> ID：15436624
> 
> 赞同：6
> 
> 时间：2013-03-15T15:48:59.940
> 
> 标签：android, servlets, push-notification, http-post, google-cloud-messaging

我是 Android 新手，我正在使用 Google GCM 发送纯文本消息。是否可以将**图像**文件作为流或其他方法发送？

Java - 服务器

Android - 客户端。

```
 Message message = new Message.Builder()
                .collapseKey("1")
                .timeToLive(3)
                .delayWhileIdle(true)
                .addData("TEST",
                        "Hello Android")
                .build(); 
```

这里的简单信息是`.addData("TEST","Hello Android")`.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T15:53:07.243

您只能发送总大小不超过 4096 字节的键/值对。即使您设法在字符串参数中编码图像，它也将是一个很小的图像。另一种方法是发送一个引用图像位置的字符串，可以是您设备上的本地文件名，也可以是您在处理通知时可以访问以下载图像的 URL。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T15:58:13.180

我写了两篇关于如何做到这一点的博客文章：

[教程：使用 AirBop 在消息负载中发送图像，](http://blog.andromo.com/2012/tutorial-using-airbop-to-push-images-for-bigpicturestyle-notifications/)它向您展示了如何通过 base64 编码图像来做到这一点。

[教程：使用 AirBop 推送 BigPictureStyle 通知的图像](http://blog.andromo.com/2012/tutorial-using-airbop-to-send-images-in-the-message-payload/)，向您展示如何推送图像 url，然后下载图像。

两个教程都使用 AirBop 作为应用程序服务器，但客户端代码与其分开，可以通用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T15:52:29.813

您只能发送一个非常小的图像，因为数据负载限制为 4kB。您还需要以某种方式对其进行编码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-07T16:58:44.103

好的，让我们在这里考虑更大的图景。正如每个人所说，除非您的图像很小，否则使用 gcm 发送图像非常困难或不可能。另一种技术是分部分发送它，但是这很烦人，没有人想把它全部编码出来。我的建议是对服务器进行编码以存储可以发送到设备的密钥和图像凭据。然后，设备使用凭据查询服务器以获取图像下载。这种技术类似于使用推送通知设备服务器上有新数据可用的理论。它最初是用来制作一个使用尽可能少的推送的服务器，但在这种情况下它被用作发送大数据的占位符。

# typo3 - Typo3：如何使用 Automaketemplate 将页面标题插入 BE 内容元素

> ID：15436628
> 
> 赞同：0
> 
> 时间：2013-03-15T15:49:04.833
> 
> 标签：typo3, typoscript

使用 automaketemplate（不是 templavoila），以下在typo3 4.5.2 中工作正常并显示“这是当前页面标题......无论页面标题是什么”：

首先将以下 ts 放入扩展模板中：

```
page.10.subparts.pageTitle = TEXT
page.10.subparts.pageTitle.field = title
page.10.subparts.pageTitle.field.debugData = 1 
```

接下来，在 BE 的标题内容元素中输入以下内容：这是当前页面标题... {page:title}

但是，当更新到版本 4.5.24 时，页面标题不再替换 {page:title} 并且只显示“这是当前页面标题：{page:title}”

也许有更好的方法来完成上述操作？可以在 4.5.24 + 中使用的东西？我已遵循所有升级程序，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:58:04.463

当心，不要在生产中使用调试的东西。大括号中的字段名称与 insertData 一起用于 Typoscript，而不是 BE。因此，例如：

```
page.10.subparts.pageTitle = TEXT
page.10.subparts.pageTitle.value = <h1>{page:title}</h1> 
page.10.subparts.pageTitle.insertData = 1 
```

如果您想将内容元素的标题与页面标题结合起来，请在 TS 模板中执行此操作。

为了与 css_styled_content 一起使用（看看 /typo3/sysext/css_styled_content/static/setup.txt，你可以从这里覆盖所有内容），我会尝试覆盖这个：

```
lib.stdheader.10.2.dataWrap = <h2{register:headerStyle}{register:headerClass}>|</h2> 
```

这样：

```
lib.stdheader.10.2.dataWrap = <h2{register:headerStyle}{register:headerClass}> - {page:title}|</h2> 
```

因为我们已经在使用 dataWrap，它应该足够了！

# c++ - 库中使用的 MFC 导致错误控制台应用程序

> ID：15436630
> 
> 赞同：0
> 
> 时间：2013-03-15T15:49:09.420
> 
> 标签：c++, visual-c++, scheduled-tasks

我正在尝试通过 Visual c++ 使用任务计划。我正在使用 Ctask.h（从[这里](http://www.codeproject.com/Articles/13089/Harnessing-the-task-scheduler)）来完成任务。但是，当我构建解决方案（使用 Visual Studio 11）时，它说

```
fatal error C1189: #error :  Please use the /MD switch for _AFXDLL builds 
```

当我切换到 /MD 时，它给出了这个错误

```
ConsoleApplication12.obj : error LNK2019: unresolved external symbol "public: __thiscall CTask::CTask(void)" (??0CTask@@QAE@XZ) referenced in function _wmain
1>ConsoleApplication12.obj : error LNK2019: unresolved external symbol "public: void __thiscall CTask::SetStartDateTime(class ATL::CTime const &)" (?SetStartDateTime@CTask@@QAEXABVCTime@ATL@@@Z) referenced in function _wmain
1>ConsoleApplication12.obj : error LNK2019: unresolved external symbol "public: void __thiscall CTask::SetFrequency(enum CTask::ETaskFrequency)" (?SetFrequency@CTask@@QAEXW4ETaskFrequency@1@@Z) referenced in function _wmain
1>ConsoleApplication12.obj : error LNK2019: unresolved external symbol "public: void __thiscall CTask::SetProgram(wchar_t const *)" (?SetProgram@CTask@@QAEXPB_W@Z) referenced in function _wmain
1>ConsoleApplication12.obj : error LNK2019: unresolved external symbol "public: void __thiscall CTask::SetAccountName(wchar_t const *)" (?SetAccountName@CTask@@QAEXPB_W@Z) referenced in function _wmain
1>ConsoleApplication12.obj : error LNK2019: unresolved external symbol "public: long __thiscall CTask::SaveTask(wchar_t const *,int)const " (?SaveTask@CTask@@QBEJPB_WH@Z) referenced in function _wmain
1>ConsoleApplication12.obj : error LNK2019: unresolved external symbol "public: virtual __thiscall CTask::~CTask(void)" (??1CTask@@UAE@XZ) referenced in function _wmain 
```

其他链接选项也是如此。这是我输入的代码：

```
#include "stdafx.h"
#include "CTask.h"
#include <iostream>
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    CTask task;
    CTime time(2013, 03, 15, 7, 11, 0);
    LPCTSTR sTaskName( L"Task Name" );

    BOOL replace = TRUE;

    task.SetProgram( L"E:\\aaa.txt" );
    task.SetAccountName( L"harshilsharma63" );
    task.SetStartDateTime( time );
    task.SetFrequency( CTask::freqOnce );

    if( S_OK == task.SaveTask( sTaskName, replace))
    {
        cout << "task successfully created!";
        return 0;
    }
    else
    {
        cout << "task creation failed!";
        return 1;
    }

    return 0;
} 
```

我已经将“在共享 DLL 中使用 MFC”设置为“在共享 DLL 中使用 MFC”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:55:38.950

我没有看到任何迹象表明您实际上已将 CTask.cpp 放入您的项目中。仅包含标头会导致您看到的链接器错误，您也需要 .cpp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:59:18.697

You need add to your project the CTask.cpp as well as CTask.h. The original project [http://www.codeproject.com/Articles/13089/Harnessing-the-task-scheduler](http://www.codeproject.com/Articles/13089/Harnessing-the-task-scheduler) can be compiled without any trouble - I just checked it!

# matlab - Matlab中Runge-Kutta延拓法的运动方程

> ID：15436631
> 
> 赞同：0
> 
> 时间：2013-03-15T15:49:09.977
> 
> 标签：matlab, equation, motion, runge-kutta

*   运动方程由下式给出：

![方程](../Images/aecdb25a7771e98b4e961965fe07c725.png) , 其中 m, b 是质量和阻尼的固定值。时变项 f(t) 是激励功率，q(t) 是广义位移。

*   我解决了这个问题：

![在此处输入图像描述](../Images/28882107d640ef46ab245c3b6fca4153.png)

![在此处输入图像描述](../Images/17302e0e18f665bdcdc4159bfbf7483b.png)

*   我应该通过 [t,x]=ode23('rightside',tspan,x0) 在 MatLab 中求解。
*   f(t) 和 k(t) 我通过傅里叶级数求解复数，就像在 Matlab 中那样：

*f(t) 的 % 复数傅立叶级数*

 *```
ft=zeros(size(t)); 
for j=1:2*N+1
n= j-(N+1);    
if n==0
   f(j)=f0/2;
else
   f(j)=f0*( (exp(-i*n*2*pi)*(i*2*pi*n+1)-1)/(4*pi^2*n^2));   
   end
ft=ft+f(j)*exp(i*n*om*t);
end 
```*  **k(t) 的 % 复数傅立叶级数*

 *```
kt=k0*ones(size(t)); 
for s=1:2*N+1
    n= s-(N+1);    
    if n==0
       c(s)=k0;
    else
       c(s)=i*(k0+ktyl)/n/pi*(1-cos(n*pi));     
    end
    kt=kt+c(s)*exp(i*n*om*t);
end 
```*  **   我们知道：

 **```
T=30;
dt=0.01;
t=0:0.01:5*T;
k0=1e6;
om=2*pi/T;
ktyl=0.5e6;
N=10;
m=1;
ks=1e4;
D=0.01;
OMG=sqrt(ks/m);
b=2*D*OMG*m;
f0=100; 
```*  *谢谢你。

*   **它应该是类似的原则：**

```
function v=prst1(t,y)
global m b k Om D F omeg
v(1)=....;
v(2)=y(1);
v=v(:); 
```

*   **和：**

```
global m b k Om D F omeg
m=1;
b=10;
k=1000;
F=10;
Om=sqrt(k/m);
omeg=1*Om;
D=b/(2*Om*m);
x0=[0;0];
[t,x]=ode23('prst1',0:0.01:10,x0);
plot(t,x) 
```

*   **但我不知道如何到达那里 f(t) 和 k(t)。******

# asp.net-mvc - 使用 EF 掌握详细结构

> ID：15436634
> 
> 赞同：0
> 
> 时间：2013-03-15T15:49:15.180
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

我的 mvc 模型中有以下类，我正在使用 EF

```
 public class Patient
    {
        [Key()]
        public int PatientId { get; set; }
        public string Name { get; set; }
     }

public class Treatment
    {
        [Key()]
        public int Id { get; set; }

        [ForeignKey("Patient")]
        public int PatientId { get; set; }
        public Patient Patient { get; set; }

        [DataType(DataType.DateTime)]
        public DateTime TreatmentDate { get; set; }
} 
```

我想显示患者的姓名，并在同一行显示他们接受的治疗次数。

我能想到但寻找更优雅的两种解决方案：

1.  迭代我的患者并为每个计数其治疗
2.  分组治疗和计数。然后加入该结果和患者之间。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:55:58.483

```
public class Patient
{
    [Key()]
    public int PatientId { get; set; }
    public string Name { get; set; }
    public ICollection<Treatment> Treatments
 } 
```

在你看来；

```
@foreach(var item in Model)
{
    <h1>@item.Name</h1>
    <h2>@item.Treatment.TreatmentDate
} 
```

在您的查询中；

```
db.EntityName.Select(p=> new Treatment()
{
    PatientId = p.PatientId,
    .....
...
    Treatments = p.Treatments
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:02:14.687

终于我找到了答案——而且很简单！！！

```
db.Patients.Include("Treatments").ToList() 
```

然后在我看来我只是做

```
@Html.DisplayFor(modelItem => item.Treatments.Count) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T08:26:03.040

您应该为您的 Views 使用 ViewModel 。我认为这是更好的做法。在这里您可以阅读：[什么是 MVC 中的 ViewModel？](https://stackoverflow.com/questions/11064316/what-is-viewmodel-in-mvc). 基本上它是一个简单的类，只有你的视图需要的这个属性。我不太了解您的模型，但我会做这样的事情

```
 public class Patient
    {

        public int Id { get; set; }// if it's Id it's default Primery Key
        public string FirstName { get; set; }
 public string LastName { get; set; }
     }

public class Treatment
    {

        public int Id { get; set; }// if it's Id it's default Primery Key

        public Patient IdPatient { get; set; } // Your Foreign key

        [DataType(DataType.DateTime)]
        public DateTime TreatmentDate { get; set; }
} 
```

这样，一名患者可能有不止一个 TreatmentDate 。我不只是爱好者。祝你好运。

# extjs - Chart.ux.Highcharts 如何使用简单商店

> ID：15436635
> 
> 赞同：0
> 
> 时间：2013-03-15T15:49:19.713
> 
> 标签：extjs, charts, extjs4, highcharts, store

我正在尝试使用 Highcharts 插件，我从他的文档中的简单示例开始，我已经正确设置了环境（我确定）。这是我声明的窗口：

```
//other part of app.js (working)
launch:function():{
var sto = Ext.create('AM.store.mysto');
var win = new Ext.create('Ext.window.Window', {
    layout: 'fit',
    items: [{
       xtype: 'highchart',
       series:[{
          dashStyle: 'DashDot',
          dataIndex: 'value'
       }],
       xField: 'month',
       store: sto,
       chartConfig: {
          chart: {
             type: 'spline'
          },
          title: {
             text: 'A simple graph'
          }
       }
    }]
}).show();
//other part of app.js (working)
}
//........more other part of app.js (working) 
```

我已将商店声明如下：

```
Ext.define('AM.store.mysto', {
  extend : 'Ext.data.Store',
  model : 'AM.model.mysto',
  data : [{
    month : 'x',
    value:1
  }, {
    month : 'y',
    value:12,

    value:2
  }, {
    month : 'z',
    value:3
  }]
}); 
```

最后这是我的模型：

```
Ext.define('AM.model.mysto', {
  extend : 'Ext.data.Model',
  fields : [{
    name : 'month'
  }, {
    name : 'value'
  }]
}); 
```

如果我执行我的应用程序，这将是我的窗口：一个没有图表的空窗口。

![窗户](../Images/c78169fa49a84c827668f415e35aa553.png)

我与文档示例的唯一区别是商店。有人可以告诉我有什么问题吗？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:35:35.053

Sencha 的大师“mitchellsimoens”说：“你有 layout : 'fit' on the window，它将子项的大小调整为窗口的大小，所以你需要给窗口一个大小。”

这是真的。我已经添加了大小，它工作正常：

```
 var win = new Ext.create('Ext.window.Window', {
    layout: 'fit',

//HERE!!!!
      width: 200,
      height: 200,

    items: [{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T14:11:58.887

问题实际上不是窗口大小，
问题是 - 窗口为空并且里面没有图表
顺便说一句同样的问题

在原始示例中，商店未加载，甚至商店中的自动加载也不适合您

```
, autoLoad: true 
```

因为你应该只在商店加载数据后创建窗口或在创建窗口后重新加载商店
我会这样做

```
var chartStore = Ext.create('chartStore'); 
chartStore.load({

    callback: function (data, operation, success) {

        // here the store is loaded with data already 
        var winChart = new Ext.create('Ext.window.Window', {
            width: 400 
            , height: 400
            , layout: 'fit' 
            items: [{
                xtype: 'highchart' 
                , series: [{
    } 
```

此外，这也可以是一个想法 Chart.ux.Highcharts >>> initAnimAfterLoad

> 由于 Highcharts 的初始动画和更新动画并不相同，如果要确保有初始动画，则应按特定顺序创建 store 和 extension。首先，将 Ext.data.Store.autoLoad 选项设置为 false，使用 store 创建 Highcharts 组件，然后调用 Ext.data.Store.load 方法。initAnimAfterLoad 延迟在内部创建图表，直到加载存储。禁用它，扩展程序将立即创建图表，您只会在加载后看到更新动画。

这个商店参数也在控制台中提供更多信息

```
, debug: true 
```

**在同事的建议下解决了**
这应该添加到商店中，这就像一个魅力

```
, autoLoad: true 
```

谢谢你

# ios - 如何覆盖我的应用委托的方法？

> ID：15436636
> 
> 赞同：1
> 
> 时间：2013-03-15T15:49:21.900
> 
> 标签：ios, objective-c

我在应用程序委托中使用它来为所有视图提供旋转，但在一个视图中并不是我需要重写此方法，因此视图仅支持纵向视图

方法（delegate.m）

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{
  return UIInterfaceOrientationMaskPortrait  | UIInterfaceOrientationMaskLandscape;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:53:25.573

为什么不使用[`UIViewController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)自身可用的方法呢？

您可以根据需要在特定类中使用这些方法。

```
- (BOOL)shouldAutorotate
- (NSUInteger)supportedInterfaceOrientations
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation 
```

在您的 AppDelegate 中，您已经拥有此方法，您在其他任何地方都不需要它。

```
-(NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window

{
    return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

来自 Apple 文档

> 此方法返回界面方向以用于任何未明确指定自己的视图控制器。如果视图控制器没有覆盖 supportedInterfaceOrientations 或 shouldAutorotateToInterfaceOrientation: 方法，则使用此方法返回的方向。
> 
> 如果您不实现此方法，应用程序将使用应用程序 Info.plist 的 UIInterfaceOrientation 键中的值作为默认界面方向。

**如果使用更新`UINavigationController`**

在这种情况下，您需要实现自定义`UINavigationController`，因为您`navigationController`可能会干扰您为不同视图控制器提供的界面方向。

**自定义导航控制器.h**

```
#import <UIKit/UIKit.h>

@interface CutomNavigationController : UINavigationController
@end 
```

**自定义导航控制器.m**

```
#import "CutomNavigationController.h"

@interface CutomNavigationController ()

@end

@implementation CutomNavigationController

//overriding shouldRotate method for working in navController
-(BOOL)shouldAutorotate
{

  return   [self.visibleViewController shouldAutorotate];

}

-(NSUInteger)supportedInterfaceOrientations
{

      return [self.topViewController supportedInterfaceOrientations];

}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
  return [self.topViewController preferredInterfaceOrientationForPresentation]; 
} 
```

最后`CustomNavigationController`在您的中使用它`AppDelegate`，这将被`navigationcontroller`所有视图控制器引用为您的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:54:36.027

这都应该在视图控制器中处理。使用 UIViewController 方法：

```
- (NSUInteger)supportedInterfaceOrientations{} 
```

# php - 在 PHP 中递归搜索键匹配或值匹配的数组？

> ID：15436639
> 
> 赞同：0
> 
> 时间：2013-03-15T15:49:28.447
> 
> 标签：php, arrays, recursion

例如，我有一个可以有很多层次的数组

```
'For Sale' => array(
        'Baby & Kids Stuff' => array(
            'Car Seats & Baby Carriers',
                            ),
        ),
'For Rent' => array(
        'Other' => array(
            'Baby Clothes',
        ),
         'Prices' => 'hhhhhh',
                   ), 
```

我想要做的是搜索数组键和值以匹配字符串，到目前为止我已经想出了这个但是它不起作用......

```
// validate a category
public function isValid($category, $data = false) {

    if(!$data) {
        $data = $this->data;
    }
    foreach($data as $var => $val) {
        if($var === $category) {
            return true;
        } elseif(is_array($val)) {
            $this->isValid($category, $data[$var]);
        } elseif($val === $category) {
            return true;
        }
    }
} 
```

我不知道我做错了什么，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:51:30.737

```
} elseif (is_array($val)) {
    return $this->isValid($category, $val);
    ^^^^^^
} 
```

您`return`甚至需要进行递归调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:16:14.287

如果您使用 PHP >= 5.1.0，则最好使用`RecursiveArrayIterator`/`RecursiveIteratorIterator`

```
$arr = array(
    'For Sale' => array(
        'Baby & Kids Stuff' => array(
            'Car Seats & Baby Carriers',
        ),
    ),
    'For Rent' => array(
        'Other' => array(
            'Baby Clothes',
        ),
        'Prices' => 'hhhhhh',
    ),
);

function isValid($category, array $data)
{
    $iterator = new RecursiveIteratorIterator(new RecursiveArrayIterator($data), RecursiveIteratorIterator::CHILD_FIRST);

    foreach ($iterator as $key => $value) {
        if (is_string($key) && ($category == $key)) {
            return true;
        }
        if (is_string($value) && ($category == $value)) {
            return true;
        }
    }
    return false;
}

var_dump(isValid('Baby Clothes', $arr)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:52:14.730

// 验证一个类别 public function isValid($category, $data = false) {

```
if(!$data) {
    $data = $this->data;
}
foreach($data as $var => $val) {
    if($var === $category) {
        return true;
    } elseif(is_array($val)) {
        return $this->isValid($category, $data[$var]);
    } elseif($val === $category) {
        return true;
    }
}
return false;
} 
```

# c# - Json DateTime Conversion 在 web api 中返回新的日期时间

> ID：15436640
> 
> 赞同：3
> 
> 时间：2013-03-15T15:49:32.680
> 
> 标签：c#, asp.net-web-api, json.net

我有一个 web api 控制器方法，它接受一个复合对象，其中一个属性是 DateTime。当我将对象作为 XML 发布时，一切正常。但是，如果我将其发布为 JSON，则会失败。

为了获得更多关于为什么它可能会失败的信息，我添加了一个自定义日期时间转换器，只需重用 Json.Net 附带的基本 IsoDateTimeConverter，并通过在转换后的值上放置一个断点，我可以看到值转换得很好，但是当它到达模型时，属性会填充一个新的日期时间，而不是我发送的值。发送与 XML 完全相同的模型可以正常工作。

我对事件的顺序以及它如何从转换为日期时间对象然后在模型绑定时立即丢失感到有些困惑。我在交互的两端使用 Json.Net IsoDateTimeConverter 进行序列化和反序列化。

JSON 设置：

```
NullValueHandling = NullValueHandling.Ignore,
DateFormatHandling = DateFormatHandling.IsoDateFormat,
DateTimeZoneHandling = DateTimeZoneHandling.Utc,
Converters = new JsonConverter[]
{
    new StringEnumConverter(),
    new IsoDateTimeConverter()
} 
```

用于在 web api 端进行反序列化的自定义转换器（使用 IsoDateTimeConverter）：

```
public class CustomDateTimeConverter : DateTimeConverterBase
{
    IsoDateTimeConverter isoConverter;

    public CustomDateTimeConverter()
    {
        isoConverter = new IsoDateTimeConverter();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        isoConverter.WriteJson(writer, value, serializer);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var returned = isoConverter.ReadJson(reader, objectType, existingValue, serializer);
        return returned;
    }
} 
```

模型上的日期属性（两端）

```
public DateTime DateOfBirth { get; set; } 
```

正在发布的 Json 格式：

```
"DateOfBirth":"1980-02-01T00:00:00" 
```

转换器价值：

```
{01/02/1980 00:00:00} 
```

控制器中模型的值：

```
{01/01/0001 00:00:00} 
```

断点时返回的变量显示正确的反序列化日期时间，但是之后的模型直接是新的日期时间。

相当困惑这如何反序列化并且决定它没有立即发生！非常感谢任何帮助。

在进一步调查中，似乎 json binder 通常也无法绑定属性 - 大量基本字符串属性未正确绑定，因此这可能是另一个问题的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T15:51:46.637

Json 不做日期。将它们作为字符串传回并在您的客户端脚本中解析它们。

[http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx](http://www.hanselman.com/blog/OnTheNightmareThatIsJSONDatesPlusJSONNETAndASPNETWebAPI.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:36:26.890

事实证明，这与 JSON 无关 - JSON 正确反序列化，正如我通过覆盖日期转换器发现的那样。问题是对象上有必填字段，在 Web API 下也需要 [DataMember(IsRequired = true)] 才能强制执行必填字段。问题在于对象的其余部分没有用 [DataMember] 属性装饰，因此它们被忽略了——我假设模型被绑定时。

追踪令人讨厌的错误，特别是当解决方案如此简单时......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-19T07:26:27.237

```
 function ConvertDateTime(dt) {
        var cdt = new Date();
        var dateString = dt.substr(6);
        var currentTime = new Date(parseInt(dateString));
        var month = currentTime.getMonth();
        var m = months[month];
        var day = currentTime.getDate();
        var year = currentTime.getFullYear();
        var hr = currentTime.getHours();
        var mi = currentTime.getMinutes();
        var date = day + "/" + m + "/" + year + " " + hr + ":" + mi;
        return date;
    } 
```

# android - 添加到下载列表 Android

> ID：15436650
> 
> 赞同：4
> 
> 时间：2013-03-15T15:49:56.603
> 
> 标签：android

类中的以下函数`DownloadManager`将文件添加到下载数据库系统，因此它可以出现在下载应用程序中（从而有资格由下载应用程序管理）。

```
addCompletedDownload(String title, String description,
    boolean isMediaScannerScannable, String mimeType,
    String path, long length, boolean showNotification) 
```

我面临的问题是这个函数是在 API 12 中添加的。所以我正在寻找这个函数的**替代方法**，它至少适用于 API 10。提前致谢！:)

**还有一点我忘了提到我实际上并没有下载任何文件。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-05-19T08:45:40.440

只需将此文件夹用作目录并确保您的应用程序有权存储数据。即使您在清单中检查了该权限，您也可能需要转到您的应用设置并再次激活它（或通过 Intent 获取）：

```
string downloads_folder = 
  Path.Combine(
    Android.OS.Environment.ExternalStorageDirectory.AbsolutePath,
    Android.OS.Environment.DirectoryDownloads); 
```

然后您可以创建/写入/读取任何文件并在您的设备下载文件夹中浏览它，即：

```
FileStream file= File.Create(Path.Combine(downloads_folder, "hello.txt"); 
```

# git - 在 Heroku 上编辑 settings.xml 文件

> ID：15436658
> 
> 赞同：3
> 
> 时间：2013-03-15T15:50:27.110
> 
> 标签：git, maven, heroku

我们正在 Heroku 上构建一个 Maven 项目。Github 是 SCM

该项目依赖于我们的私有 Maven 存储库。

```
<repositories>
    <repository>
        <id>archiva</id>
        <url>http://My-URL/archiva/repository/snapshots/</url>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
        <releases>
            <enabled>true</enabled>
        </releases>
    </repository>

</repositories> 
```

此凭据在本地 maven 的 settings.xml 中指定。

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <servers>
    <server>
      <id>archiva</id>
      <username>admin</username>
      <password>admin</password>
    </server>
  </servers>
</settings> 
```

当我将代码推送到 Heroku 时，它需要此凭据才能从私有仓库下载依赖项 jar。在 Heroku 上，我如何编辑此文件或 heroku 上的 Maven 主位置，以便我们可以使用`heroku run bash --app Appname`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:58:13.283

[jcabi-heroku-maven-plugin](http://www.jcabi.com/jcabi-heroku-maven-plugin/)主要是为了解决这个特殊问题而创建的。Heroku 希望您将源代码推送到他们的 Git 存储库并让他们在那里编译并运行。提到的插件工作方式不同。它依赖于已编译的 JAR/WAR 工件并仅提交`settings.xml`给`pom.xml`Heroku Git。然后，在它的帮助下`maven-invoker-plugin`远程运行你的 JAR/WAR。

您可以在 setting.xml 中使用私有存储库 - 它们的配置将自动移动到 Heroku。

# qt - C++ BlackBerry10：所有自定义类都应该从 QObject 扩展吗？

> ID：15436660
> 
> 赞同：3
> 
> 时间：2013-03-15T15:50:37.443
> 
> 标签：qt, qml, blackberry-10, qobject

我想制作我的第一个 BB10 应用程序。我的问题是，所有对象是否都应从 QObject 扩展，以及仅由控制器使用而不在 QML 文件中使用的自定义类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:56:55.543

QObject 类构造函数接受一个指向父 QObject 的指针。当父 QObject 调用其析构函数时，其子 QObject 也将被销毁。Qt 为您保留此对象树的事实使 UI 的内存管理变得更加容易。当窗口关闭时，该树中的所有小部件都会自动清理。当我第一次开始使用 Qt 时，这对我来说是一个巨大的帮助。

作为一般经验法则，我从 QObject（或 QObject 的派生）继承任何 UI 组件，或者将直接从 QML 中的 UI 使用的组件。

# php - 使用分页和 MySQL 查询

> ID：15436661
> 
> 赞同：1
> 
> 时间：2013-03-15T15:50:39.250
> 
> 标签：php, html

我们使用了分页 123 按钮，这里如果我们单击下一步按钮也意味着它应该转到下一页。但是在这里它不会转到下一页，因为这里我将 sql 查询中的 _POST 变量传递给 where 条件，所以如果单击下一页它不会显示相关页面。我们认为点击其他页面后 POST 变量值不会更新。这是我的代码。提前致谢。

```
if(isset($_POST['submit']))
 {
  $bool = true;     
  $gender=$_POST['gender'];      
 } 

 if(($bool == true) 
 {

   $bool1=true;
   $connection = mysql_connect("localhost","root","Sakthi");      
  if (!$connection)
  {
   die('Could not connect: ' . mysql_error());
  }
  mysql_select_db("nursingcarein",$connection);

  if (isset($_GET["page"])) { $page  = $_GET["page"]; } else { $page=1; };
  $start_from = ($page-1) * 3;

  $gender1=$gender;
  $profession1=$profession;
  $state1=$state;

  /**** Here gender value doesnt update when click the next page i think we have a error in this query ****/      
  $sql = "SELECT id,description,name FROM nursereg WHERE gender='$gender1' LIMIT     $start_from, 3";

  $rs_result = mysql_query ($sql,$connection);
  echo "<table>
  <tr><td>Image</td><td>Description</td></tr>";
   while($row=mysql_fetch_array($rs_result)) {
    echo" <tr>";
        echo"<td>"; echo "<img src='image1.php?id=".$row['id']."'>"; echo"</td>";
        echo"<td>"; echo  $row['name']; echo"</td>";
        echo"<td>"; echo  $row['description']; echo"</td>";
        echo"</tr>";
     };
  echo"</table>"; 
  $sql = "SELECT COUNT(Name) FROM nursereg";
 $rs_result = mysql_query($sql,$connection);
  $row = mysql_fetch_row($rs_result);
  $total_records = $row[0];
  $total_pages = ceil($total_records / 5);    
 for ($i=1; $i<=$total_pages; $i++) {
   $pageno = $i;
       echo "<a href='index2.php?page=".$i."'>".$i."</a> ";   
     };
 };

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:58:28.640

您的分页使用 href，这不会像您的代码建议的那样调用 POST

```
$gender1=$_POST['gender']; 
```

尝试将性别添加到分页并通过 GET 获取

```
echo "<a href=\"index2.php?page=$i&gender=$gender1\">".$i."</a> "; 
```

然后在你的代码中

```
$gender1 = isset($_POST['gender']) ? $_POST['gender'] : $_GET['gender']; 
```

# objective-c - 为什么类方法中的“self = [[Rectangle alloc] init]”不好？

> ID：15436662
> 
> 赞同：8
> 
> 时间：2013-03-15T15:50:40.737
> 
> 标签：objective-c, cocoa, class-method

在 Apple 的文档“Objective-C Programming Language”中，第 48 页说：

```
+ (Rectangle *)rectangleOfColor:(NSColor *) color
{
    self = [[Rectangle alloc] init]; // BAD
    [self setColor:color];
    return self;
}

+ (id)rectangleOfColor:(NSColor *)color
{
     id newInstance = [[Rectangle alloc] init]; // GOOD
     [newInstance setColor:color];
     return newInstance;
}

+ (id)rectangleOfColor:(NSColor *)color
{
     id newInstance = [[self alloc] init]; // EXCELLENT
     [newInstance setColor:color];
     return newInstance;
} 
```

一个是坏的，一个是好的，一个是优秀的。这是为什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-15T16:13:27.600

还有第四种模式......

(1) 类型不匹配是 BAD。

(2) 对类的静态引用产生在子类中行为不正确的方法

(3) 动态引用类意味着子类将被实例化为子类实例

* * *

(4)

```
+ (instancetype)rectangleOfColor:(NSColor *)color // Über-bestest evar!
{
     Rectangle *newInstance = [[self alloc] init];
     [newInstance setColor:color];
     return newInstance;
} 
```

llvm 添加了`instancetype`关键字“哟！此方法返回调用它的任何类的实例”。因此，如果您要对上述内容进行子类化，您可以：

```
RectangleSub *rs = [RectangleSub rectangleOfColor:[NSColor paisleyColor]]; 
```

但这会警告（除了可怕的颜色选择）：

```
RectangleSub *rs = [Rectangle rectangleOfColor:[NSColor puceColor]]; 
```

而 (id) 返回类型在第二种情况下不会发出警告。

请注意，我还切换声明`newInstance`为显式类型`Rectangle*`。这也更好，因为在*该方法的上下文中，*只能`newInstance`安全地视为`Rectangle*`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-15T15:59:14.393

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-15T15:56:37.293

在第一种情况下，您将`self`指针（应该指向`Rectangle`类对象）分配给`Rectangle`. 这是绝对不正确的。

第二，你硬编码一个类来实例化——`Rectangle`在这种情况下。

在第三个中，您允许类的标识来确定实例的类，而不是在代码中明确指定它。然后，如果您的`Dodecahedron`班级需要使用相同的代码，则不需要更改班级名称。

# r - 润滑和 ifelse

> ID：15436665
> 
> 赞同：4
> 
> 时间：2013-03-15T15:50:52.250
> 
> 标签：r, lubridate

更新：澄清了问题和代码以回应评论者。

我不明白为什么`date.ie`创建一个 POSIXct 对象而是`date.ipt`创建一个数字对象。在这两种情况下，我都使用 lubridate 为日期添加天数。

```
set.seed(34859)
date.ie = (ymd("2013/07/01", tz="Africa/Nairobi")) + days(round(runif(10)*(150), 
                                         digits=0))

# creates this POSIXct object
# structure(c(1382821200, 1373922000, 1385326800, 1385154000, 1381093200, 
#             1381870800, 1372971600, 1377982800, 1382216400, 1383512400), class = c("POSIXct", 
#                                                                                    "POSIXt"), tzone = "Africa/Nairobi")

date.ie <- format(date.ie, format="%Y-%m-%d")

# creates this character object
# c("2013-10-27", "2013-07-16", "2013-11-25", "2013-11-23", "2013-10-07", 
#   "2013-10-16", "2013-07-05", "2013-09-01", "2013-10-20", "2013-11-04"
# )

date.ie2 <- ymd(date.ie)
treat <- rep(0:1, 5)
start.ipt <- (sample(x=c(0,1), size=10, replace=TRUE,                
                     prob=c(.5, .5))) # changed to even prob for small dataset 
```

* * *

更新 2：

下一个块是我的旧方法，由于行为方式，它不起作用`ifelse`。谢谢@hadley 指出这一点。

```
date.ipt <- ifelse(treat==0 & start.ipt==1,
                   date.ie2 + days(round(runif(10)*(90), digits=0)),
                   ifelse(treat==1 & start.ipt==1,
                          date.ie2 + days(round(runif(100)*(60), digits=0)),NA))

# creates this numeric object
# c(1384992000, 1375488000, NA, NA, NA, 1385337600, 1375142400, 
# 1381449600, 1383782400, 1384560000)

date.ipt = format(data$date.ipt, format="%Y-%m-%d") 
```

这是我的修复。我没有使用 ifelse 一步创建 date.ipt，而是分几步进行。我到达了我想去的地方，但这需要一段时间。希望评论者对如何更有效地做到这一点提出建议。

```
date.ipt.c <- date.ie2 + days(round(runif(10)*(90), digits=0))
date.ipt.c = format(date.ipt.c, format="%Y-%m-%d")

date.ipt.t <- date.ie2 + days(round(runif(10)*(60), digits=0))
date.ipt.t = format(date.ipt.t, format="%Y-%m-%d")

date.ipt <- ifelse(treat==1 & start.ipt==1, date.ipt.t, ifelse(treat==0 & start.ipt==1, date.ipt.c, NA))
date.ipt <- format(date.ipt, format="%Y-%m-%d")
date.ipt2 <- ymd(date.ipt)

days.to.ipt <- difftime(date.ipt2, date.ie2, tz="Africa/Nairobi", units="days")

data <- data.frame(date.ie, treat, start.ipt, date.ipt, days.to.ipt) 
```

# javascript - 上下文丢失

> ID：15436666
> 
> 赞同：0
> 
> 时间：2013-03-15T15:50:53.717
> 
> 标签：javascript, scope

当我没有在回调中绑定“this”时，为什么我会丢失 setTimeout 的上下文。
在下面的代码中，您可以看到 onTime 在 3 个地方被调用。
一次从班里出来。哪个工作正常。
一次从课外。哪个工作正常。
当计时器触发呼叫时。“this”需要绑定方法。
有没有办法在每次回调中不使用绑定来强制上下文？

```
var MyBaseClass = function () {
    "use strict";
    this._base = {};
    this._base.baseFunc = function () {
        console.log('baseFunc called')
    };
    return this._base;
};

var TestClass =  function () {
    "use strict";
    if (TestClass.prototype._singletonInstance) {
        return TestClass.prototype._singletonInstance;
    }
    TestClass.prototype._singletonInstance = this;
    this._timer = {};
    console.log('constructor')
};
TestClass.prototype = new MyBaseClass();        // Set prototype to MyBaseClass
TestClass.prototype.constructor = TestClass;   // Set constructor back to TestClass

TestClass.prototype.onTime = function () {
    "use strict";
    console.log('ontime called')
    console.log(this, "<--- why do i lose context")
    this.baseFunc()
}
TestClass.prototype.init = function () {
    "use strict";
    console.log('local')
    this.onTime()
    //this._timer = setTimeout(this.onTime.bind(this),500)// works
    this._timer = setTimeout(this.onTime, 500) // no work
};

var asdf = new TestClass()
asdf.init()
console.log('global')
asdf.onTime() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:59:22.690

请注意，您只将一个函数传递给 setTimeout，而不是一个对象，因此 setTimeout 不可能知道您想要的上下文。解决方案是使用包装函数来保存上下文（dojo 的障碍，在许多其他库中称为绑定）。这*是*强制上下文的方法，我不确定你为什么要寻找其他东西。一种选择可能是在构造函数中绑定一次，然后您可以传递函数而不用担心上下文，如下所示：

`this.onTime = this.onTime.bind(this); // now you can pass the function around this._timer = setTimeout(this.onTime, 500) // works`

澄清并尝试处理您关于原型的问题......

您将在构造函数中绑定函数（这是我假设您的 init 函数将被用作）而不是其他任何地方的原因是，如果您构造（使用`new`）第二个对象，您希望该对象成为在其上执行的功能的上下文。直接执行函数时可以免费获得此行为 ( `myObj.myFunc`)，但在传递函数时需要小心 (`setTimeout(myObj.myFunc, 50)`或`var callback = myObj.myFunc;`)。这是您遇到的核心问题，您可以使用两种策略：

## 传递函数时绑定

这基本上是您自己开发的方法，当将您的函数传递给 时`setTimeout`，您将它绑定到您的对象。我仍然不确定我是否理解您为什么不喜欢这种技术，但它是许多库等使用的有效模式。

```
setTimeout(myObj.myFunc.bind(myObj), 50); 
```

## 构造对象时绑定

这是您可以绑定的最快时间 - 在原型上设置函数时无法绑定，因为尚未构造对象，您将绑定到什么？使用这种技术，您可以正常调用 setTimeout，在知道您传递的函数已“预绑定”的情况下是安全的。

```
var myObjClass = function(){
    this.myFunc = this.myFunc.bind(this);
}
myObjClass.prototype.myFunc = function(){};
var myObj = new myObjClass();

setTimeout(myObj.myFunc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:53:54.680

[JSFiddle](http://jsfiddle.net/9FSzx/1/)

为了保持上下文，在 setTimeout 中创建一个新方法。您正在传递没有上下文关联的方法引用。

```
TestClass.prototype.init = function () {
    "use strict";
    console.log('local')
    this.onTime();
    var me = this; 
    //this._timer = setTimeout(this.onTime.bind(this),500)// works
    this._timer = setTimeout(function(){
        me.onTime();
        }, 500) 
}; 
```

# watir - Watir Webdriver : 如何禁用使用 Watir 加载广告

> ID：15436667
> 
> 赞同：3
> 
> 时间：2013-03-15T15:50:55.970
> 
> 标签：watir, watir-webdriver

我正在尝试使网站自动化，但正在发生的事情是广告需要很长时间才能加载，因此完整的套件需要很长时间才能完成。

有没有办法可以禁用使用 watir webdriver 加载广告？我不想在浏览器上禁用它，因为我还必须在网站上测试广告位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:02:40.280

这实际上与 watir 无关，但您可以在 hosts 文件中将广告主机 URL 设置为 127.0.0.0。这将导致这些广告立即解析主机并且广告永远不会加载。

视窗：

*   windows/system32/驱动程序/etc/hosts

操作系统：

*   /私人/等/主机

    ads.advertiserswebhost.com 127.0.0.0

# ruby-on-rails - d3.js 未加载到 Rails 资产管道中

> ID：15436668
> 
> 赞同：1
> 
> 时间：2013-03-15T15:50:56.963
> 
> 标签：ruby-on-rails, d3.js, asset-pipeline

我正在尝试将我编写的一些 d3.js 代码移植到 ruby​​ on rails 3.2 应用程序中。我似乎已经移植了所有东西，除了 rails 不会加载 d3.js，即使它加载了我所有其余的 javascript。

在 development.rb 我有：

```
 config.assets.compress = false
  config.assets.debug = true 
```

我尝试通过 application.js 将其包含在内，并使用将其添加到我的视图中

```
 - content_for :javascript_include do
    = javascript_include_tag 'ems/reports/floor_logs/d3' 
```

在这两种情况下，脚本标签都会正确包含在我渲染的源代码中

```
 <script src="/assets/d3.js?body=1" type="text/javascript"></script> 
```

并且 Rails 服务器记录它以 200 Ok 呈现。

但是在控制台中它说 GET 失败。当我在浏览器中加载 js :3000/assets/d3.js 的 url 时，它会快速加载文件的文本，但会无限期地继续加载。

此外，如果我从 d3.js 获取代码并将其发布到我的另一个正常加载的 javascript 文件中，它会导致该文件有同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:20:21.773

虽然我仍然不完全确定为什么我无法通过资产管道成功提供 d3js（可能与 https 有关），但我能够通过使用 d3js 的托管版本来让我的代码正常工作。

```
= javascript_include_tag '//cdnjs.cloudflare.com/ajax/libs/d3/3.0.8/d3.min.js' 
```

# php - PHP 将更新的 POST 请求发送到外部服务器并访问页面

> ID：15436669
> 
> 赞同：1
> 
> 时间：2013-03-15T15:51:00.043
> 
> 标签：php, post, payment-processing

我正在使用 Cashflows 在线支付系统，并尝试根据网页上的表单向他们的服务器提交动态生成的价格。但是，在我需要发送到 Cashflows 终端的 POST 请求中，我需要包含一个带有哈希键的输入字段。我的问题是哈希是基于密钥的，并且该密钥是使用其中一个参数生成的，即价格（见下文），正如[集成指南](http://www.cashflows.com/support/kb/payment_page_integration_guide.pdf)所建议的那样。

如何使用 PHP 将带有以下 POST 参数的表单提交到门户网站？

**PHP：**

```
<?php

    $secret_key = 'foobar';
    $store_id = $_POST['store_id'];
    $cart_id = $_POST['cart_id'];
    $amount = $_POST['amount'];
    $currency = $_POST['currency'];
    $test = $_POST['test'];
    $description = $_POST['description'];
    echo $check = hash('sha256', $secret_key . ':' . $store_id . ':' . $cart_id . ':' . $amount . ':' . $currency . ':' . $test . ':' . $description);
    $price = $_POST['price'];
    $qty = $_POST['qty'];
    $carriage_amount = $_POST['carriage_amount'];
    $postage_and_packaging = $_POST['postage_and_packaging'];
    $name = $_POST['name'];
    $address = $_POST['address'];
    $postcode = $_POST['postcode'];
    $country = $_POST['country'];
    $tel = $_POST['tel'];
    $email = $_POST['email'];
    $amount = $_POST['amount'];

?> 
```

**具有动态生成价格的表格，其[集成示例](http://www.cashflows.com/support/index.php?page=developers&sub=hosted_payment_page&subsub=hosted_payment_page_examples)的修改版本：**

```
<form action="submit.php" method="POST">
    <input type="hidden" name="store_id" value="5939523" />
    <input type="hidden" name="cart_id" value="captubes" />
    <input type="hidden" name="currency" value="GBP" />
    <input type="hidden" name="test" value="1" />
    <input type="hidden" name="description" value="Fruush" />
    <input type="hidden" name="check" value="SOME KEY HERE" />

    <script type="text/javascript" type="text/javascript">

        // The next two functions round numbers to numerical formatting. They do not need to be altered when adding or removing products.
        function roundOff2(value, precision) {
            return places(value,1,precision);
        }

        function places(X, M, N) {
            var T, S=new String(Math.round(X*Number("1e"+N)))
            while (S.length<M+N) S='0'+S
            var y = S.substr(0, T=(S.length-N));
            if(N>0) 
            {
                y += '.' + S.substr(T, N);
            }

            return y;
        }

        // This function checks for empty quantities. It does not need to be altered when adding or removing products.
        function CheckNull2(value) {
            if (value == "") {
                value = "0";
            }

            return value;
        }

        // This function defines the postage and packaging location. It does not need to be altered when adding or removing products.
        function typeOfCarriage(x,whereabouts) {
            x.carriage_amount.value = whereabouts;
        }

        // This function addeds the postage and packaging to the total price of the products. Add new postage rates here, and also edit further down the page to add them to the table.
        function calculate(x) {

            basicprice = calc(x);

            if( Number(basicprice) > 0 ) {

                var postage_and_packaging = 0;

                switch (x.carriage_amount.value) {
                    case "uk" :
                        postage_and_packaging = 1.99;
                        break;
                    case "europe" :
                        postage_and_packaging = 2.99;
                        break;
                    default :
                        postage_and_packaging = 4.99;
                        break;
                }

                x.amount.value = Number(basicprice) + postage_and_packaging;

            } else {

                x.amount.value = "0";

            }

            x.amount.value = roundOff2(x.amount.value,2);

        }

        // The standard price, exluding postage and packaging is calculated here. It does not need to be altered when adding or removing products.
        function calc(x) {

            var b = Number(CheckNull2(x.price.value));
            var c = Number(CheckNull2(x.qty.value));
            var a = (b * c);

            return a;

        }

    </script>

    <p>
        <h3>Number of caps</h3>
        Tube of 6 caps: &pound;4.99 - Quantity: <input name="price" value="4.99" type="hidden" /><input name="qty" size="3" value="1" />
    </p>

    <p>
        <h3>Postage &amp; Packaging:</h3>
        <input name="carriage_amount" value="uk" type="hidden">
        <input checked="checked" name="postage_and_packaging" onClick="typeOfCarriage(this.form,'uk');calculate(this.form)" value="" type="radio" />UK (&pound;1.99)
        <input name="postage_and_packaging" onClick="typeOfCarriage(this.form,'europe');calculate(this.form)" value="" type="radio" />Europe(&pound;2.99)
        <input name="postage_and_packaging" onClick="typeOfCarriage(this.form,'world');calculate(this.form)" value="" type="radio" />Rest of World (&pound;4.99)
    </p>

    <p>
        <h3>Your Details (you will get a chance to change these):</h3>
        <span style="width: 100px; float: left;">Name:</span> <input type="text" name="name" /><br />
        <span style="width: 100px; float: left;">Address:</span> <input type="text" name="address" /><br />
        <span style="width: 100px; float: left;">Postcode:</span> <input type="text" name="postcode" /><br />
        <span style="width: 100px; float: left;">Country:</span> <input type="text" name="country" /><br />
        <span style="width: 100px; float: left;">Telephone:</span> <input type="text" name="tel" /><br />
        <span style="width: 100px; float: left;">Email:</span> <input type="text" name="email" />
    </p>

    <input name="calcButton" onClick="calculate(this.form)" value="Calculate Total" type="button"> Total: &pound; <input type="text" name="amount" value="6.98" />
    <input value="Checkout" onClick="calculate(this.form)" type="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:56:20.870

我要做的是将表单发布到服务器上的 PHP 页面，生成哈希，然后将其发布到将接收它的页面。您可以使用 fsockopen() 或 cURL 完成所有这些操作，并且有大量关于如何使用它们的示例。

绝对不要将该变量作为隐藏字段存储在表单上，​​因为它可以被读取、拦截和操作，并在以后给您的电子商务系统带来麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:04:25.557

您可以发布到您的页面，该页面将生成密钥并向用户发送另一个带有隐藏字段的表单，一旦页面加载，该隐藏字段将自动提交到现金流。这是该表单的示例：

```
<html>
<head>
<script type="text/javascript">
function submit_form()
{
    document.myform.submit();
}
</script>
</head>
<body onload="submit_form();">
    <form method="POST" name="myform" action="http://www.google.com/">
        <input type="hidden" name="field1" value="value1"/>
        <input type="hidden" name="field2" value="value2"/>
    </form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T21:56:22.790

最后，答案相对简单——我找不到没有 JavaScript 的解决方案，所以我没有在客户端计算所有内容，而是使用 AJAX 拉入具有正确生成哈希的表单。

# ms-access - 移动或删除文件夹中最后一个文件的权限被拒绝

> ID：15436674
> 
> 赞同：0
> 
> 时间：2013-03-15T15:51:14.363
> 
> 标签：ms-access, foreach, vba, file-management, filesystemobject

我在一个模块中有一个 MS Access VBA 过程，该模块对特定文件夹中的文件有一个 for each 循环。

在循环内部，我在一个单独的文件夹中创建了一个新文件，然后用循环中文件中的清理数据填充该文件。我将新文件的数据导入 SQL Server 2005 数据库。成功导入后，脚本会删除已清理的文件并**尝试**将循环中的文件移动（或复制/删除）到同一目录中的存档子文件夹。

> **文件循环适用于循环文件夹中的所有文件......除了最后一个文件。那是弹出 Permission Denied 错误的时候。**

在上述情况下，错误消息总是发生在以下之一（我尝试了几个类似的命令）：

```
fso.MoveFile
fso.DeleteFile (just after copy)
f.Move
f.Delete (just after copy)
Name origin As destination 
```

这是我的代码：

```
Dim fso As New Scripting.FileSystemObject
Dim f As file
Dim processingFiles As Files

If fso.FolderExists(incomingPath) Then
    Set processingFiles = fso.GetFolder(incomingPath).Files
End If

For Each f In processingFiles

    /*this is where the create a new file and clean it part runs - works fine*/

    If fso.FileExists(archivePathFile) Then
        Kill archivePathFile
    End If

    If fso.FileExists(tempPath & "\cleaned_processing_file.txt") Then
        Kill tempPath & "\clean_processing_file.txt"
    End If

    f.Move archivePathFile   '<------------- Permission Denied, last file in folder
    Debug.Print f.Name & " is now in " & incomingPath & "\Archive"

    'f.Copy archivePathFile, True 
    'f.Delete True '<----------------------- Permission Denied, last file

    'Name origPathFile As archivePathFile '< Path/File access error, last file

Next '<--- For Each Loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:53:03.930

我将此作为“答案”发布，因此代码会显示出来，但您（显然）不必接受它......

我刚刚测试了最小的情况......

```
Sub move_to_foo()
Dim fso As New FileSystemObject
Dim processingFiles As Files, f As File
Set processingFiles = fso.GetFolder("C:\__tmp").Files
For Each f In processingFiles
    Debug.Print "Moving """ & f.Name & """..."
    f.Move "C:\__tmp\foo\" & f.Name
Next
End Sub 
```

...并且它不会在文件夹中的最后一个文件上失败，因此您的问题必须与*您的*代码有关。如果您选择编辑您的问题并提供更多详细信息，那么我很乐意提供帮助，但现在您的问题 - 如前所述 - 没有答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-18T00:53:55.850

我和你有完全相同的问题。除最后一个文件外，所有文件都将从源目录直接移动到目标目录，这将导致显示“Permission Denied”。如果有 2 个文件或 30 个文件，就会发生这种情况。在移动文件之前，我正在将数据从文件复制到 SQL 数据库。解决方案是在对象用于解析文件和插入 SQL 数据后，将其设置为“Nothing”。

例如，插入 SQL 脚本数据后，可以移动文件。释放对象资源：

```
Set objFSO = Nothing
Set objTextFile = Nothing 
```

# twitter-bootstrap - Bootstrap Select 字段的打印垂直线 (Chrome/OSX)

> ID：15436675
> 
> 赞同：1
> 
> 时间：2013-03-15T15:51:15.107
> 
> 标签：twitter-bootstrap

从我的应用程序中的页面打印时，Bootstrap 设置了选择字段的样式，打印输出显示垂直线在页面的任一侧向下延伸。只是为了检查，当您在 Bootstrap 演示站点上打印页面时也会发生这种情况。

这是在 OSX 上使用 Chrome 时，但在其他浏览器和 Windows 上的 Chrome 中似乎没问题。

任何想法为什么/如何解决这个问题？![在此处输入图像描述](../Images/56d7d47e189411236f10b07a30f52acd.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-28T18:08:38.170

将此规则添加到打印样式表（或使用媒体查询）：

```
select {
  -webkit-appearance: none;
} 
```

# asp.net-mvc-3 - 如何在 mvc 3 的同一视图中添加列表和创建脚手架？

> ID：15436677
> 
> 赞同：0
> 
> 时间：2013-03-15T15:51:17.173
> 
> 标签：asp.net-mvc-3, partial-views

我正在使用 mv3，我正在创建应用程序，当我单击创建按钮时需要将数据提交到数据库并更新按钮下方的列表。

我也尝试过部分视图，但它显示错误：

> 传入字典的模型项的类型为“System.Collections.Generic.List`1[MvcStudent.stu]”，但此字典需要“MvcStudent.Models.StuModel”类型的模型项。

我在下面列出我的代码请帮助

**学生控制器.cs**

```
 public class StudentController : Controller
    {
        //
        // GET: /Student/
        stdataDataContext stdb = new stdataDataContext();
        public ActionResult Index()
        {
            return View();
        }

        public ActionResult create()
        {

            return View(stdb.stus.ToList());
        }

        [HttpPost]
        public ActionResult create(MvcStudent.Models.StuModel stu)
        {

            stu student = new stu();
            student.name = stu.name;
            student.address = stu.addr;
            stdb.stus.InsertOnSubmit(student);
            stdb.SubmitChanges();

            return View();

        }

    } 
```

**_Create.cshtml**

```
 @model MvcStudent.Models.StuModel

    @{
        ViewBag.Title = "Create";
    }

    <h2>Create</h2>

    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" typ

e="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>StuModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.name)
            @Html.ValidationMessageFor(model => model.name)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.addr)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.addr)
            @Html.ValidationMessageFor(model => model.addr)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.gen)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.gen)
            @Html.ValidationMessageFor(model => model.gen)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

@Html.Partial("_PartialGrid"); 
```

**_PartialGrid.cshtml**

```
 @model IEnumerable<MvcStudent.Models.StuModel>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            name
        </th>
        <th>
            addr
        </th>
        <th>
            gen
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.addr)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.gen)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |
            @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
        </td>
    </tr>
}

</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:15:25.580

错误告诉你你需要知道什么。再看一遍

> 传入字典的模型项的类型为“System.Collections.Generic.List`1[MvcStudent.stu]”，但此字典需要“MvcStudent.Models.StuModel”类型的模型项。

您正在将一个类型的对象`System.Collections.Generic.List`1[MvcStudent.stu]`从您的控制器传递到您的视图。您的视图需要一个类型为 的对象`MvcStudent.Models.StuModel`。

再看看你的控制器 -

```
public ActionResult create()
{
    return View(stdb.stus.ToList());
} 
```

因为您没有指定视图，所以它使用操作的名称来选择要尝试加载的视图 - 所以在这种情况下：`Create`. 您的“创建”视图在顶部包含此行

```
@model MvcStudent.Models.StuModel 
```

这声明您必须传递该类型的对象才能加载视图。

这解释了您遇到的错误-在我看来，您将“创建”视图与“列表”视图混合在一起。也许考虑将它们分开。

# qt - QStateMachine 错误状态

> ID：15436679
> 
> 赞同：0
> 
> 时间：2013-03-15T15:51:20.400
> 
> 标签：qt, state, qstatemachine

我有具有三个状态 s1、s2、s3 和 s4 的状态机。从状态 s1、s2 和 s3 机器可以进入错误状态。

```
QStateMachine machine;
QState *s1 = new QState();
QState *s2 = new QState();
QState *s3 = new QState();
QFinalState *s4 = new QFinalState();
s1->addTransition(object, SIGNAL(done()), s2);
s2->addTransition(object, SIGNAL(done()), s3);
s3->addTransition(object, SIGNAL(done()), s4);
machine.addState(s1);
machine.addState(s2);
machine.addState(s3);
machine.addState(s4);
machine.setInitialState(s1); 
```

做这个的最好方式是什么？我在谷歌上搜索，但没有运气。可以做这样的事情吗？

```
QFinalState *sx = new QFinalState();
machine.addState(sx);
s1->addTransition(object, SIGNAL(error()), sx );
s2->addTransition(object, SIGNAL(error()), sx );
s3->addTransition(object, SIGNAL(error()), sx ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:10:34.727

```
QFinalState *sx = new QFinalState();
machine.addState(sx);
s1->addTransition(object, SIGNAL(error()), sx );
s2->addTransition(object, SIGNAL(error()), sx );
s3->addTransition(object, SIGNAL(error()), sx ); 
```

看起来它会起作用，是的。必须为所有状态调用 addTransition() 可能有点麻烦，因此您可以通过向它们添加父状态来对所有状态进行分组。然后，您只需要在父级上进行一次错误转换。

# metadata - Neo4j：如何获取图数据库元数据？

> ID：15436686
> 
> 赞同：2
> 
> 时间：2013-03-15T15:51:36.783
> 
> 标签：metadata, neo4j

我已经开始使用 neo4j 图形数据库，我想知道是否有办法获取图形元数据：节点数量、图形中的关系等信息。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T19:27:45.263

[您可以按照http://docs.neo4j.org/chunked/stable/tutorials-java-embedded-jmx.html](http://docs.neo4j.org/chunked/stable/tutorials-java-embedded-jmx.html)中的说明访问 JMX bean 。有关 bean 的参考，请查看[http://docs.neo4j.org/chunked/stable/jmx-mxbeans.html](http://docs.neo4j.org/chunked/stable/jmx-mxbeans.html)。

# c# - 延期执行与否

> ID：15436688
> 
> 赞同：0
> 
> 时间：2013-03-15T15:51:40.497
> 
> 标签：c#, linq-to-sql

以下关于延迟执行的评论是否正确？

```
1\. var x = dc.myTables.Select(r=>r);//yes
2\. var x = dc.myTables.Where(..).Select(r=>new {..});//yes
3\. var x = dc.myTables.Where(..).Select(r=>new MyCustomClass {..});//no 
```

换句话说，我一直认为投影自定义类对象总是会导致急切执行。但我找不到支持/否认它的参考资料（尽管我看到的结果与它相矛盾，因此发表了这篇文章）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T15:53:44.207

您问题中的每个语句都是延迟执行的示例。`Select`and语句的内容对`Where`结果值是否延迟执行没有影响。`Select`+`Where`语句本身决定了这一点 。

作为一个反例，考虑该`Sum`方法。无论输入是什么，这总是急切地执行。

```
var sum = dc.myTables.Sum(...);  // Always eager 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T19:08:06.063

为了证明你的观点，你的测试应该是这样的：

```
var tracer = string.Empty;
Func<inType, outType> map = r => {
       tracer = "set";
       return new outType(...);
    } 

var x = dc.myTables.Where(..).Select(map);

// this confirms x was never enumerated as tracer would be "set".
Assert.AreEqual(string.Empty, tracer);
// confirm that it would have enumerated if it could
CollectionAssert.IsNotEmpty(x); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T15:53:53.397

据我观察，立即强制执行的唯一方法是强制迭代集合。我通过调用`.ToArray()`我的 LINQ 来做到这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T15:56:54.463

通常返回序列的方法使用延迟执行：

```
IEnumerable<X> ---> Select ---> IEnumerable<Y> 
```

并且返回单个对象的方法不会：

```
IEnumerable<X> ---> First ---> Y 
```

因此，像`Where`, `Select`, `Take`,和之类的方法使用延迟执行是因为它们可以，而像, ,和`Skip`之类的方法因为不能而不能。`GroupBy``OrderBy``First``Single``ToList``ToArray`

从[这里](https://stackoverflow.com/questions/3894490/linq-what-is-the-quickest-way-to-find-out-deferred-execution-or-not)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-15T15:59:45.063

`.Select(...)`总是被推迟。

当您使用 时`IQueryable<T>`，this 和其他延迟执行方法会构建一个表达式树，并且在迭代之前不会将其编译为实际的可执行表达式。也就是说，您需要：

*   对投影的可枚举执行 for-each。
*   调用一个在内部枚举可枚举的方法*（即`.Any(...)`, `.Count(...)`, `.ToList(...)`, ...）。*

# android - 嵌套的 Drawable

> ID：15436689
> 
> 赞同：3
> 
> 时间：2013-03-15T15:51:44.343
> 
> 标签：android

我可以在另一个drawable中包含一个drawable吗？

背景故事很简单——我有一个可绘制对象，我需要为一个项目提供不同颜色的背景，但我希望其他属性（角、笔划等）相同。

假设我以此为基础：

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
     android:shape="rectangle"> 

    <corners 
         android:bottomRightRadius="7dp" 
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp" 
         android:topRightRadius="7dp"/> 
          <stroke android:width="4dp" android:color="#FF00FF00" />

</shape> 
```

然后我将其包含在另一个可绘制对象中：

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
     android:shape="rectangle"> 

    <include 
         android:include="@drawable/base" /> 
              <solid android:color="#00000000"/> 

</shape> 
```

如果这是不可能的，如何管理这种事情？

# r - 估计 Cohen's d 的效应大小

> ID：15436702
> 
> 赞同：14
> 
> 时间：2013-03-15T15:52:19.907
> 
> 标签：r, statistics

给定两个向量：

```
x <- rnorm(10, 10, 1)
y <- rnorm(10, 5, 5) 
```

如何计算效应大小的 Cohen's d？

例如，我想使用[pwr 包](http://www.statmethods.net/stats/power.html)来估计具有不等方差的 t 检验的功效，它需要 Cohen 的 d。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-15T16:07:30.080

在[**这个链接**](http://www.statmethods.net/stats/power.html)和[**维基百科**](http://en.wikipedia.org/wiki/Cohen%27s_d#Cohen.27s_d)之后，科恩的 t 检验似乎是：

![在此处输入图像描述](../Images/8d75750c3758db469c171819a4b16034.png)

其中`sigma`（分母）是：

![在此处输入图像描述](../Images/b39312b8aa920be66bd4e81db48223eb.png)

因此，使用您的数据：

```
set.seed(45)                        ## be reproducible 
x <- rnorm(10, 10, 1)                
y <- rnorm(10, 5, 5)

cohens_d <- function(x, y) {
    lx <- length(x)- 1
    ly <- length(y)- 1
    md  <- abs(mean(x) - mean(y))        ## mean difference (numerator)
    csd <- lx * var(x) + ly * var(y)
    csd <- csd/(lx + ly)
    csd <- sqrt(csd)                     ## common sd computation

    cd  <- md/csd                        ## cohen's d
}
> res <- cohens_d(x, y)
> res
# [1] 0.5199662 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-15T16:02:45.890

有几个包提供了计算 Cohen's d 的功能。例如，您可以使用包中的`cohensD`函数`lsr`：

```
library(lsr)
set.seed(45)
x <- rnorm(10, 10, 1)
y <- rnorm(10, 5, 5)
cohensD(x,y)
# [1] 0.5199662 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-18T09:43:13.180

另一种选择是使用[effsize](https://cran.r-project.org/web/packages/effsize/effsize.pdf)包。

```
library(effsize) 
set.seed(45) x <- rnorm(10, 10, 1) 
y <- rnorm(10, 5, 5) 
cohen.d(x,y)
# Cohen's d
# d estimate: 0.5199662 (medium)
# 95 percent confidence interval:
#        inf        sup 
# -0.4353393  1.4752717 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-29T09:53:43.687

另一个更新的选项是使用`effectsize`，它非常灵活并且还返回置信区间： [https ://easystats.github.io/effectsize/reference/cohens_d.html](https://easystats.github.io/effectsize/reference/cohens_d.html)

```
library(effectsize)

x <- rnorm(10, 10, 1)
y <- rnorm(10, 5, 5)

# for independent measures design
cohens_d(x, y)
#> Cohen's d |        95% CI
#> -------------------------
#> 0.77      | [-0.15, 1.67]
#> 
#> - Estimated using pooled SD.

# in case design is paired
cohens_d(x, y, paired = TRUE)
#> Cohen's d |        95% CI
#> -------------------------
#> 0.49      | [-0.19, 1.20] 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v2.0.0）于 2021-06-29 创建)

# css - 浮动：在 FF 中右下放文本

> ID：15436703
> 
> 赞同：2
> 
> 时间：2013-03-15T15:52:20.003
> 
> 标签：css, firefox, css-float

我在 ExtJs 中有一个标题栏，其中有一个带有用户名的 div。我希望它出现在标题栏的右侧，我可以让它与'float：right;'有关 但在 FF 中，它会将文本放在一行中，因为它在 Chrome 中很好？

HTML：

```
<span unselectable="on" class="x-panel-header-text x-panel-header-text-default" id="programList_header_hd-textEl">Program Access permissions (TestResetValidity)<div class="programusername">Test Reset Validity</div></span> 
```

CSS：

```
.programusername {
    position: relative;
    float: right;
    margin-right: 70px;
} 
```

![在此处输入图像描述](../Images/93a560ea26f8cddcc5beac4553d8e93b.png)

我怎样才能让它们在所有浏览器中都像这样排列，而不仅仅是 chrome（下）？

![在此处输入图像描述](../Images/1306895ddbb1ab9caea0b4c01d7fac44.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:05:17.603

首先，永远不要将块元素放在`div`像`span`.

您可以将正确的文本放在另一个 div 中，然后将其放在后面`div#programusername`，这将解决它。

此外，无需将位置更改为相对位置。

`<div style="clear: both;">`最后，在你用浮动衬里的元素后面放一个，以防止取代其他页面元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T15:59:44.640

尝试添加`overflow: hidden;`到父级`<span>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T15:59:37.470

试试这个：

```
.programusername {
    position: relative;
    float: right;
    margin-right: 70px;
    display: inline-block;
} 
```

# jquery - jQuery slideUp元素A如果可见则slideDown元素B

> ID：15436706
> 
> 赞同：2
> 
> 时间：2013-03-15T15:52:22.960
> 
> 标签：jquery

我有以下 HTML 表单：-

```
<form id="subform">
    <p>
        <input type="button" id="btn" value="Go!"/>
    </p>
    <p>
        <select id="optlist">
            <option value="1">Option 1</option>
            <option value="2">Option 2</option>
            <option value="3">Option 3</option>
        </select>
    </p>
</form> 
```

以及以下 jQuery 片段：-

```
$("#btn").click(function () {
    // if address select list is visible slide it up and then slide down new <p> tag
    if ($('#optlist').is(":visible")) {
        $('form > p:nth-child(2)').slideUp('slow', function () {
            $('<p id="noresults">No results found</p>').insertAfter('form > p:nth-child(2)').hide().slideDown("slow");
        });
    }
    // else if select list is not visible just slide down the new <p> tag
    else {
        $('<p id="noresults">No results found</p>').insertAfter('form > p:nth-child(2)').hide().slideDown("slow");
    }
}); 
```

我想要做的是，如果`#optlist`当前可见`slideUp()`则`slideDown()`一个新`<p>`标签，否则只是`slideDown()`一个新`<p>`标签（如果`#optlist`当前隐藏）。

这在上面工作得很好，虽然它有点笨拙，例如我必须`<p>`在 the`if`和`else`语句中重复插入 new 。

除此之外，还有一个小错误，如果`#noresults <p>`标签已经存在，它将当前添加另一个标签，如果它已经存在，我如何让它闪烁当前`#noresults`？

我可以检查它是否存在，`if ( $("#noresults").length ) {};`但我还需要重复这个（在`if`and中`else`）。

我可以将新的检查和创建`<p>`放在一个函数中并调用它。

有没有更好的方法来构建当前代码？

[在这里](http://jsfiddle.net/general_exception/zjUXV/6/)提琴

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:02:42.237

似乎由于所需的行为始终是隐藏#optlist 并显示#noresults div。你可以做这样的事情：

的HTML：

```
<form id="subform">
    <p>
        <input type="button" id="btn" value="Go!"/>
    </p>
    <p id="optlist_container">
        <select id="optlist">
            <option value="1">Option 1</option>
            <option value="2">Option 2</option>
            <option value="3">Option 3</option>
        </select>
    </p>
    <p id="noresults" style="display: none;">No results found</p>
</form> 
```

对于 jQuery：

```
$('#btn').click(function() {
    $('#optlist_container').slideUp('slow', function() {
        $('#noresults').slideDown('slow');
    });
}); 
```

如果您总是要隐藏它，我认为没有任何理由检查#optlist 的可见性。而且您可以轻松地将#noresults 元素放在适当的位置，因此您没有理由继续附加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:01:38.250

您永远不必重复代码。您始终可以将重复的代码移动到函数中。

例如，对代码进行最小的更改以避免重复：

```
function noResults() {
    $('<p id="noresults">No results found</p>')
        .insertAfter('form > p:nth-child(2)')
        .hide()
        .slideDown("slow");
}

$("#btn").click(function() {
    // if address select list is visible slide it up and then slide down new <p> tag
    if ($('#optlist').is(":visible")) {
        $('form > p:nth-child(2)').slideUp('slow', noResults);
    }
    // else if select list is not visible just slide down the new <p> tag
    else {
        noResults();
    }
}); 
```

我还在重复代码中提取了长的 jQuery 链并重新格式化以提高可读性。删除重复使这更可行。

# ruby-on-rails-3 - Rails 3 + 具有不同型号名称的设计

> ID：15436707
> 
> 赞同：0
> 
> 时间：2013-03-15T15:52:24.240
> 
> 标签：ruby-on-rails-3, devise

我正在为两个 Web 应用程序共享一个数据库。User 模型已经用于其中一个应用程序，因此，为了登录另一个应用程序，我必须创建另一个模型以避免混淆用户信息。

我可以让 Devise 为这个名为 SystemUser 的新模型工作。现在的问题是我必须使用另一个名称的每个变量。例如：`current_system_user`,`system_user_signed_in?`等。我在整个应用程序中使用这些变量及其原始名称，我想知道是否有办法避免覆盖它。例如：通过创建一个名为 return 的方法`current_user`，`current_system_user`并使用前面提到的其他变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:07:36.820

我认为这应该可以解决问题：

```
devise_for :users, class_name: 'SystemUser' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:09:14.983

我终于可以通过再次生成设计视图来解决这个问题。我不知道为什么，但是 devise/sessions 文件夹丢失了，它是用另一个视图来做的，当我开始使用它时，它就起作用了。

不管怎么说，还是要谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:08:49.267

您是否考虑过使用 CanCan 作为角色？

[https://github.com/ryanb/cancan](https://github.com/ryanb/cancan)

# mybatis - 如何在 MyBatis 中检查空字符串？

> ID：15436712
> 
> 赞同：11
> 
> 时间：2013-03-15T15:52:34.397
> 
> 标签：mybatis

MyBatis的动态SQL中如何检查空字符串？我在文档中找到下面的代码，但我想检查空字符串，而不是空字符串。

```
<select id="findActiveBlogWithTitleLike" parameterType="Blog" resultType="Blog">
    SELECT * FROM BLOG WHERE state = ‘ACTIVE’
    <if test="title != null">
        AND title like #{title}
    </if>
</select> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-15T19:02:24.913

在 MyBatis 中，您可以使用`!= ''`与空字符串进行比较，因此在您的查询中，它将类似于：

```
<select id="findActiveBlogWithTitleLike" parameterType="Blog" resultType="Blog">
  SELECT * FROM BLOG WHERE state = ‘ACTIVE’
  <if test="title != null and title != ''">
    AND title like #{title}
  </if>
</select> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-24T08:35:03.410

英语说得不好。谢谢你的病人。

它的函数 xml 文件。

```
<mapper namespace="org.jacknie.mybatis.Functions">
  <sql id="isBlank">
    <bind name="isBlank" value=":[@org.apache.commons.lang3.StringUtils@isBlank(#this)]" />
  </sql>
  <sql id="sysout">
    <bind name="sysout" value=":[@System@out.println(#this)]" />
  </sql>
</mapper> 
```

它是映射器 xml 文件。

```
<mapper namespace="org.jacknie.test.TestMapper">
  <select id="selectTest" resultType="_int">
    <include refid="org.jacknie.mybatis.Functions.isBlank" />
    <include refid="org.jacknie.mybatis.Functions.sysout" />
    SELECT '1' FROM DUAL
    <if test="#fn = isBlank, not(#fn(map.name))">
      <bind name="forLogging" value="#fn = sysout, #fn('Hello' + map.name)" />
    </if>
  </select>
</mapper> 
```

想想这个技巧怎么样...

[在此处输入链接描述](https://gist.github.com/jacknieKorean/3f51046d1a53a86a549a4994ff4f0a8c)

# .net - 基于 XmlWriterTraceListener 的线程安全跟踪监听器

> ID：15436714
> 
> 赞同：1
> 
> 时间：2013-03-15T15:52:36.240
> 
> 标签：.net, thread-safety, extend, tracelistener

我想用一个基于文件大小限制或当前日期切换文件的侦听器替换默认的 Microsoft XmlTraceListener。我想保留默认的 XmlTraceListener 文件格式，以便可以使用 ServiceTraceViewer 工具打开文件。

我发现了一篇文章[http://www.codeproject.com/Articles/30956/A-Rolling-XmlWriterTraceListener](http://www.codeproject.com/Articles/30956/A-Rolling-XmlWriterTraceListener)但从评论看来，即使应用了建议的补丁，这个监听器也有一些不稳定性。

然后我找到了微软自己实现的 CircularListener [http://msdn.microsoft.com/en-us/library/aa395205.aspx](http://msdn.microsoft.com/en-us/library/aa395205.aspx)

我想扩展它，但注意到它有

```
static CircularStream m_stream = null; 
```

后来这个变量在没有锁的情况下被访问。在阅读[http://msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)时，我发现即使 XmlWriterTraceListener 本身也不是线程安全的。MSDN 说：

> 因为 System.Diagnostics.XmlWriterTraceListener 不是线程安全的，所以跟踪源在输出跟踪时可能会独占锁定资源。当许多线程将跟踪输出到配置为使用此侦听器的跟踪源时，可能会发生资源争用，从而导致严重的性能问题。要解决此问题，您应该实现一个线程安全的自定义侦听器。

所以本质上，这意味着`TraceListener.IsThreadSafe`属性与`false`XmlWriterTraceListener 一样，所以每次调用 TraceData / TraceEvent 时，更高级别的跟踪系统都会锁定，对吗？

`static CircularStream m_stream`在它周围添加一个锁并`true`从覆盖的`IsThreadSafe` 属性中返回会有什么好处吗？或者它可能与 XmlTraceListener 中已经完成的事情相同？

我该怎么做才能使 CircularTraceListener 线程安全且高效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:13:29.877

我认为`CircularTraceListener`基本上是有缺陷的。正如您所注意到的，有一个`static` `m_stream`. 但是，更糟糕的是，当您构造 a 时，`CircularTraceListener`它会沿着新流传递到基 ( `XmlWriterTraceListener`)。这意味着虽然`CircularTraceListener`只知道*最后*创建的流，但基类可能正在使用许多流之一。而且，当然，如果`CircularTraceListener`被释放，基类将释放共享`m_stream`对象。

我建议你不要`CircularTraceListener`从头开始做任何事情。

# 更新：

对于像循环日志这样的事情，我在 log4net 和 NLog 方面的运气要好得多。

# python - 表示要拆分的训练集的最佳方法

> ID：15436716
> 
> 赞同：0
> 
> 时间：2013-03-15T15:52:41.247
> 
> 标签：python, arrays, numpy, artificial-intelligence

训练集由一组样本和一组标签组成，每个样本都有一个标签。在我的例子中，样本是向量，而标签是标量。为了解决这个问题，我使用 Numpy。考虑这个例子：

```
samples = np.array([[1,0],[0.2,0.5], [0.3,0.8]])
labels = np.array([1,0,0]) 
```

现在我必须将训练集分成两个分区，对元素进行洗牌。这个事实引发了一个问题：我失去了与标签的对应关系。我该如何解决这个问题？

由于性能在我的项目中至关重要，因此我不想构建置换向量，因此我正在寻找一种将标签与样本绑定的方法。现在我的解决方案是使用样本数组的最后一列作为标签，例如：

```
samples_and_labels = np.array([[1,0,0],[0.2,0.5,0], [0.3,0.8,1]]) 
```

这是我的情况下最快的解决方案吗？或者有没有更好的？例如创建对？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:04:51.030

索引与浮点数据类型的混合让我感到不安。当您说拆分训练集时，这是完全随机的吗？如果是这样，我会使用随机排列向量 - 我认为您的解决方案不会更快（即使没有我的数据类型保留），因为您在创建 samples_and_labels 数组时仍在分配内存。

你可以做类似的事情（假设`len(samples)`是为了简单的说明）：

```
# set n to len(samples)/2
ind = np.hstack((np.ones(n, dtype=np.bool), np.zeros(n, dtype=np.bool)))
# modifies in-place, no memory allocation
np.random.shuffle(ind) 
```

然后你可以做

```
samples_left, samples_right = samples[ind], samples[ind == False]
labels_left, labels_right = labels[ind], labels[ind == False] 
```

并打电话

```
np.random.shuffle(ind) 
```

每当您需要新的拆分时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:36:52.300

没有 numpy，也许它不会那么快。您可以尝试导入“_random”而不是“random”以获得更好的洗牌性能。

```
import random

samples = [[1,0],[0.2,0.5], [0.3,0.8]]
labels = [1,0,0]

print(samples, '\n', labels)

z = list(zip(samples, labels))
random.shuffle(z)

samples, labels = zip(*z)

print(samples, '\n', labels) 
```

# callback - 什么是平均 Facebook 积分对话 CTR？

> ID：15436717
> 
> 赞同：1
> 
> 时间：2013-03-15T15:52:45.700
> 
> 标签：callback, payment, facebook-credits, credits

我们正在 Facebook 上运行一个游戏，大约。30 万月活跃用户。但是，我们注意到很少有信用支付。

所以我调查了一下，发现点击率看起来很奇怪。

**在我们的游戏支付对话框**中，用户可以选择虚拟货币包的点击率约为。**46%**（选择套餐并点击“支付”的人）。

**在游戏顶部打开的FB 积分对话框**上的 CTR仅为大约。**0.3%**。由于这是付款过程的最后一步，我会假设这个点击率要大得多。

背景：FB 积分对话框上的点击率是根据回调调用“payments_get_items”与状态为“已放置”的“payments_status_update”的数量计算得出的。

我试图弄清楚是否存在一些实施问题。但是，我浏览了两次实施指南，但迄今为止没有发现任何内容。到目前为止，所有测试付款都有效。

听听其他游戏开发者的经历会很有趣。

谢谢，

查尔斯·麦卡利斯特

# c# - 使用 Dapper.NET 修剪字符串

> ID：15436718
> 
> 赞同：3
> 
> 时间：2013-03-15T15:52:46.233
> 
> 标签：c#, sql, dapper

我已经使用`Dapper.NET`了一段时间了。我只是想知道是否可以让 Dapper 在将字符串分配给对象的属性时修剪字符串。

我目前`LTRIM(RTRIM(fieldname))`在 SQL 和/或`value.Trim()`属性设置器中使用。

然而，我正在使用一个使用 chars 而不是 varchar 的遗留数据库，我想知道是否有办法减少我必须修剪所有内容的时间。

我自己编辑了 dapper 的源代码，但最终破坏了其他映射等，所以放弃了。

只是想知道是否有人有任何可以减少这种开销的建议。（我可能遗漏了一些非常简单的东西！）

顺便说一句，我正在使用 C# 3.5。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-10T00:11:38.107

我不喜欢直接修改 Dapper 的想法。我决定通过创建一个扩展方法来包装 Dapper 并反映结果并修剪所有字符串属性来解决这个问题。

```
public static class DapperExtensions {
    public static IEnumerable<T> Query<T>(this IDbConnection cnn, string sql, object param = null, IDbTransaction transaction = null, bool buffered = true, int? commandTimeout = null, CommandType? commandType = null) {
        var dapperResult = SqlMapper.Query<T>(cnn, sql, param, transaction, buffered, commandTimeout, commandType);
        var result = TrimStrings(dapperResult.ToList());
        return result;
    }

    static IEnumerable<T> TrimStrings<T>(IList<T> objects) {
        //todo: create an Attribute that can designate that a property shouldn't be trimmed if we need it
        var publicInstanceStringProperties = typeof (T).GetProperties(BindingFlags.Public | BindingFlags.Instance).Where(x => x.PropertyType == typeof (string) && x.CanRead &&  x.CanWrite);
        foreach (var prop in publicInstanceStringProperties) {
            foreach (var obj in objects) {
                var value = (string) prop.GetValue(obj);
                var trimmedValue = value.SafeTrim();
                prop.SetValue(obj, trimmedValue);
            }
        }
        return objects;
    }

    static string SafeTrim(this string source) {
        if (source == null) {
            return null;
        }
        return source.Trim();
    }
} 
```

对我的解决方案至关重要（因为我想使用与 Dapper 相同的名称）是扩展方法解析的工作原理，您可以在[此处](https://stackoverflow.com/a/1451184/725957)阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T04:03:48.860

我假设您想要一种更自然的方式来通过 POCO 暗示 LTRIM(RTRIM()) 函数，这样您就不需要每次想要返回该字段时手动输入 LTRIM(RTRIM()) ，给出无需人工重复劳动即可获得 SQL 性能。

我有两个选择：

**在 Dapper-Dot-Net 方面：**

您可以在查询函数阶段添加一些代码，对原始 SQL 查询执行替换算法。

*   如果查询中有多个表，我会认为这超出了范围
*   否则，我相信这可以很容易地完成，而不会破坏 Dapper 引擎的其余部分。

过程：

*   首先对你的表名执行一个无知的 IndexOf，忽略大小写，如果不是，你可以快速传递。
*   如果找到表名，则对查询执行一些更可靠的分析，确保您找到的表名实际上是查询中的表名。在这里您还可以确保查询中只有一个表并且没有连接。
*   如果 select 上有 *，则可以根据您的 poco 定义将其扩展为字段名称
*   因此，现在您只需在选择的阵容中有字段
*   对于所有字段，在选择队列中，找到 poco 定义中的名称，其中有 [Trim] 属性，将字段名称替换为 LTRIM(RTRIM({FieldName})) 为 [{FieldName}]

**在 SQL 端：**

如果您有权在服务器上创建视图，那么您可以编写一个存储过程来创建/更改（更新）一组视图，这些视图为 char 字段公开 varchar 接口。

批量更新 - 每次架构更改时运行： 1\. 遍历所有用户表 2\. 创建或更新相应的视图

UpdateTableView(tableName): 1\. 如果没有 char 字段则退出 2\. 使用 cast(LTRIM(RTRIM(..)) as varchar(CHAR_FIELD_SIZE) 自动创建视图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-26T20:42:13.313

马特，

这可以很容易地完成。我做了这个改变来清理 SQL 字符空间。我已经对其进行了测试，如果由于更改而变慢，我的代码没有任何迹象。

**首先**确保备份现有的源代码，以便在需要时更容易恢复。

**接下来**创建以下方法：

```
public static string ReadString(object value) /*** CUSTOM CODE ***/
{
    if (value == null || value is DBNull) return null; 
    return value.ToString().Trim();
} 
```

我总是用 / *** CUSTOM CODE *** / 标记我的所有代码更改，以便以后可以轻松找到我的更改

**接下来**找到以下方法：

```
public static void SetTypeMap(Type type, ITypeMap map) 
```

现在在该方法中找到以下行：

```
if (memberType == typeof (char) || memberType == typeof (char?))
{
    il.EmitCall(OpCodes.Call, typeof (SqlMapper).GetMethod(
        memberType == typeof (char) ? "ReadChar" : "ReadNullableChar",
        BindingFlags.Static | BindingFlags.Public), null);
        // stack is now [target][target][typed-value]
}
else 
```

并修改如下：

```
if (memberType == typeof (char) || memberType == typeof (char?))
{
    il.EmitCall(OpCodes.Call, typeof (SqlMapper).GetMethod(
        memberType == typeof (char) ? "ReadChar" : "ReadNullableChar",
        BindingFlags.Static | BindingFlags.Public), null);
        // stack is now [target][target][typed-value]
}
else if (memberType == typeof(string)) /*** CUSTOM CODE START ***/
{
    il.EmitCall(OpCodes.Call, typeof(SqlMapper).GetMethod("ReadString", BindingFlags.Static | BindingFlags.Public), null);
    // stack is now [target][target][typed-value]
}    /*** CUSTOM CODE END ***/
else 
```

编译，你准备好了

# android - 在 getLocalActivityManager().getCurrentActivity() 上获取空指针异常

> ID：15436719
> 
> 赞同：0
> 
> 时间：2013-03-15T15:52:46.413
> 
> 标签：android, android-activity, android-tabactivity

我有一个有 5 个选项卡的选项卡视图。每个选项卡都是一个活动。在一个选项卡中，它正在打开一个新活动，该活动打开一个警报。直到现在一切正常。

我的问题是当我从（后退按钮按下）返回时，它正在调用它的父活动的 onBackPressed 子活动，所以我正在检查活动名称`getLocalActivityManager().getCurrentActivity().toString()`，当我从子活动按下后退按钮时它也可以工作，它检查活动名称使用`getLocalActivityManager().getCurrentActivity().toString()`.

但是当我从我的父活动中按下返回按钮时，它会给出 NullPointer 异常。`getLocalActivityManager().getCurrentActivity().toString()`从父活动调用时可能无法正常工作

**LogCat 错误**

![在此处输入图像描述](../Images/3d73cda26a60066fa7708ea0cb6cf645.png)

**家长活动**

```
public class ProgressActivity extends ActivityGroup 
{
private ArrayList<View> history;
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.progress_tabview);
    this.history = new ArrayList<View>();
}
public void showProgress(View v) 
{
    Intent intMyProg = new Intent(this,ShowProgress.class);
    //intMyProg.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    //startActivity(intMyProg);

    //This will help to open a new activity within existing TabView
    //Need to extend ActivityGroup
    //Need to declare "private ArrayList<View> history;"
    //Need to Define "this.history = new ArrayList<View>();" within onCreate
    View MyView = getLocalActivityManager()
            .startActivity("MyIntent", intMyProg
            .addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP))
            .getDecorView();

    replaceView(MyView);
}

public void replaceView(View v) 
{
    history.add(v);
    setContentView(v);
}

//@Override  
public void onBackPressed() 
{  
    String activityName = getLocalActivityManager().getCurrentActivity().toString();

    if(activityName.contains("ShowProgress"))
    {
        getCurrentActivity().onBackPressed();
    }
    else
    {
        Toast.makeText(getApplicationContext(), "Back button from parent Activity", Toast.LENGTH_SHORT).show();
        //finish();
    }
}
} 
```

**儿童活动**

```
public class ShowProgress extends ActivityGroup
{
private ArrayList<View> history;
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.progress);
    this.history = new ArrayList<View>();

    AlertDialog alertDialog = new AlertDialog.Builder(ShowProgress.this.getParent()).create();
    alertDialog.setTitle("Hello ...");
    alertDialog.setMessage("Hello world this is Anirban !");
    alertDialog.setIcon(R.drawable.tick);
    alertDialog.setButton("OK", new DialogInterface.OnClickListener() 
    {
        public void onClick(DialogInterface dialog, int which) 
        {
            //Toast.makeText(getApplicationContext(), "You clicked on OK", Toast.LENGTH_SHORT).show();
        }
    });
    alertDialog.show();
}

//@Override  
public void onBackPressed() 
{  
    Intent intMyProg = new Intent(this,ProgressActivity.class);
    View MyView = getLocalActivityManager()
            .startActivity("MyIntent", intMyProg
            .addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP))
            .getDecorView();

    replaceView(MyView);
}

public void replaceView(View v) 
{
    history.add(v);
    setContentView(v);
}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:12:37.150

由于您在此过程中遇到错误，因此摆脱它的最简单方法是像这样更改它

```
//@Override  

public void onBackPressed() 
{  
    LocalActivityManager localManager = getLocalActivityManager();
    Activity currentActivity = null;
    if (localManager!=null){
          currentActivity = localManager.getCurrentActivity();
    }

    String activityName = null;
    if (currentActivity!=null){
      activityName = currentActivity.toString()
    }

    if(activityName!=null && (activityName.contains("ShowProgress"))
    {
        getCurrentActivity().onBackPressed();
    }
    else
    {
        Toast.makeText(getApplicationContext(), "Back button from parent Activity", Toast.LENGTH_SHORT).show();
        //finish();
    }
} 
```

# r - 使用 par 时图例框宽度不正确

> ID：15436720
> 
> 赞同：7
> 
> 时间：2013-03-15T15:52:46.527
> 
> 标签：r, plot, width, legend

我有问题，我的图例太大了，我的代码：

```
par(mfrow=c(1,2))
hist(alvsloss,breaks = 100, freq=F,main="Histogramm,
 density curve (gaussian kernel) \n and fitted normal distribution of Allianz simple losses ",xlim=c(-0.15,0.15),xlab="loss",ylab="density",cex.axis=1.2,cex.lab=1.2)
lines(density(alvsloss), col="black", lwd=2)
curve(dnorm(x, mean = mean(alvsloss), sd = sd(alvsloss)), add=TRUE, col="black",lwd=2,lty="dotted")

legend(-0.155, 30, c("(Gaussian) Kernel density","fitted normal distribution"),lwd=2, cex=0.8, 
   col=c("black","black"), lty=1:2)

qqnorm(alvsloss,main="normal QQ Plot",cex.axis=1.2,cex.lab=1.2)
qqline(alvsloss) 
```

这给出了以下图片：

![图表](../Images/eee7af989884d6c41a1f49fcaa54e206.png)

问题是，左边的图例太大了，如何控制框的宽度？箱子太大了。

数据可以在这里找到：http: [//uploadeasy.net/upload/ocafq.rar](http://uploadeasy.net/upload/ocafq.rar)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-16T11:49:29.997

你图例右边的空白告诉我你手动加宽了你的绘图窗口。在手动调整大小时，图例不能很好地缩放。

解决方案是在绘图之前打开您需要的确切大小的绘图。在 Windows 中，这是通过`windows(width=10, height=8)`. 单位为英寸。周围的框现在应该与文本更紧密。

如果这仍然不令人满意，您应该尝试：

1.  减小图例的字体大小`cex=0.7`
2.  删除图例周围的框`bty = "n"`并使用`\n`将图例拆分为几行
3.  `"topleft"` 您可以使用而不是坐标将图例更多地放在左侧

这是我的做法：

```
legend("topleft", 
 legend=c("(Gaussian)\nKernel\ndensity","Fitted\nnormal\ndistribution\n"),
 bty = "n",lwd=2, cex=0.7, col=c("black","black"), lty=1:2) 
```

![在此处输入图像描述](../Images/89e083c6871b67b8ac1bcd14b1eb96ae.png)

# java - 从字符串中获取枚举索引？

> ID：15436721
> 
> 赞同：33
> 
> 时间：2013-03-15T15:52:47.943
> 
> 标签：java, android, enums

我有一个字符串值，我还有一个字符串数组和一个包含范围的枚举。为了获取数组中字符串的索引，从提供的值中我写了这个：

```
Arrays.asList(myClass.BAUD_RATES).indexOf(username) 
```

我如何为枚举执行此操作？我可以使用序数吗？还是我必须制作自己的方法？

该方法可能如下所示：

```
public enum Fruit {
   ...
   static public boolean isMember(String aName) {
       Fruit[] aFruits = Fruit.values();
       for (Fruit aFruit : aFruits)
           if (aFruit.fruitname.equals(aName))
               return aFruit;
       return false;
   }
   ...
} 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-03-15T15:56:50.527

不确定我是否正确理解您，但根据您可能正在寻找的问题标题

```
YourEnum.valueOf("VALUE").ordinal(); 
```

1.  `YourEnum.valueOf("VALUE")`返回带有名称的枚举*值*`"VALUE"`
2.  每个枚举*值*都知道它的位置（从零开始索引），我们可以通过调用它的`ordinal()`方法来获得它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-15T15:57:48.200

我可能不明白你的问题，但同样的代码也适用于枚举：

```
int index = Arrays.asList(YourEnum.values()).indexOf(YourEnum.ENUM_ITEM); 
```

或者你可以得到：

```
int index = YourEnum.valueOf("ENUM_ITEM").ordinal(); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-06-20T11:43:00.447

试试这个简单的解决方案：

```
Fruit.values()[index] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T16:02:28.483

如果要检索索引，可以使用序数。如果您想为 String 分配一些特定的值，您可以定义自己的方法来检索它。

```
 enum DAY
 {
  MONDAY(10),
  TUESDAY(20);
  int value;
  DAY(int x)
  {
   this.value = x;
  }
  public int getValue()
  {
    return value;
   } 
```

现在 value 和 ordinal 可以检索为：

```
 for(DAY s : DAY.values() )
    {
        System.out.println(s.ordinal());
        System.out.println(s.getValue());
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-16T06:14:12.103

以下逻辑也将起作用。

如果您想检查并且您知道水果名称已经不使用 for 循环，请使用 Pshemo 提到的方法

```
for (Fruit aFruit : aFruits)
           if (aFruit.name().equals(aName))
               return aFruit.ordinal(); 
```

# laravel - 使用 Hash::make 方法更新表中的所有条目

> ID：15436725
> 
> 赞同：1
> 
> 时间：2013-03-15T15:53:01.650
> 
> 标签：laravel, eloquent

由于我正在将应用程序移植到 Laravel 并且它使用 Auth 类，因此我需要将用户表中的所有密码更改为 bycrypt（使用`Hash::make()`）。

问题是我想使用用户名作为默认密码（所以当迁移完成后，我的用户“Mario”的密码将是“Mario”）——我想通过迁移对数据库的所有条目执行此操作，但我似乎无法做到，因为我不知道如何获取选择的值，对其进行哈希处理，然后在更新中使用它。

有没有办法在*不使用循环*的情况下做到这一点？（即每个用户不进行一次查询）

**编辑：**是的，没有循环这是不可能的。我意识到。@Adrenaxus 有正确的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:04:36.400

你为什么不做这样的事情：

```
foreach(User::all() as $user){
    $user->password = Hash::make($user->username);
    $user->save();
} 
```

# java - 这是天真的等于，哈希码好吗？

> ID：15436726
> 
> 赞同：7
> 
> 时间：2013-03-15T15:53:01.583
> 
> 标签：java, equals, hashcode

我有一个代表具有唯一 Id 属性的 DB-Entries 的类。是否可以仅基于此属性实现`equals()`and方法`hashcode()`

```
 @Override public int hashCode()
  { return id;
  }

  @Override public boolean equals(Object obj)
  {
    if (this == obj)                  return true;
    if (obj == null)                  return false;
    if (getClass() != obj.getClass()) return false;
    Task other = (Task) obj;
    if (id != other.id)
      return false;
    return true;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:56:19.667

一般来说，是的。如果所有 id 都是小的连续整数，则可以通过使用在可用 32 位中更广泛地分布位的函数从大集合中获得更好的性能。但这应该可以找到其他方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:56:49.400

我看不出这段代码有什么问题。但是，您可能需要思考一些问题：

*   您可以拥有多个相同的对象`id`吗？
*   这个类会被子类化吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:22:15.993

你在你的评论中说这个类是最终的，那么我会建议像 Integer.equals 这样的 equals 设计

```
public boolean equals(Object obj) {
    if (obj instanceof Integer) {
        return value == ((Integer)obj).intValue();
    }
    return false;
} 
```

# jvectormap - jVectorMap - 如何显示区域标签，而不仅仅是选择带有外部链接的区域

> ID：15436727
> 
> 赞同：3
> 
> 时间：2013-03-15T15:53:05.837
> 
> 标签：jvectormap

当我从外部链接中选择一个区域时，我需要显示一个 HTML 标签。我可以使用这个选择区域：`map.setSelectedRegions([region])`但这不显示区域标签。

任何人都可以帮助我吗？我可以用 HTML 内容生成这个标签吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-10T03:06:21.960

尝试这个

```
 onRegionClick:function(event, code, region){
                          switch(code){
                            case"your_state":
                                    window.location.replace("http://your_link_address/");
                            break;
                            case"your_state":
                                    window.location.replace("http://your_link_address/");
                            break;  }
                          } 
```

将“your_state”更改为您的州/地区。将“your_link_address”更改为您的地址。

# ios - 在PhoneGap 2.4中未显示飞溅微调器

> ID：15436733
> 
> 赞同：2
> 
> 时间：2013-03-15T15:53:09.873
> 
> 标签：ios, cordova

出于某种原因，我的飞溅微调器无法在适用于 iOS 的 PhoneGap 2.4 应用程序中运行，但我有

```
<preference name="ShowSplashScreenSpinner" value="true" /> 
```

是否有任何基本的故障排除技巧可以尝试使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:58:29.650

我有同样的问题，但在 PhoneGap 2.5 中。我刚从 2.4 迁移过来，微调器曾经出现在 iPad 和模拟器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:00:24.720

您是否使用正确的防溅屏图像规格？你能在 XCode 项目摘要中看到它们吗？请检查[这个](https://stackoverflow.com/questions/11117556/is-a-splash-screen-necessary-for-an-iphone-app)和[这个](http://www.appcoda.com/how-to-add-splash-screen-in-your-ios-app/)。

# spring-batch - 使用 Spring Batch 使用动态创建的 xml 配置启动作业

> ID：15436735
> 
> 赞同：0
> 
> 时间：2013-03-15T15:53:18.067
> 
> 标签：spring-batch

我想知道我是否可以使用 Spring Batch 执行以下操作（只是尝试一下，因为它似乎符合我们的要求）。

我们希望保存基于用户请求的 XML 配置（本质上是作业/步骤/流的列表）。在未来的某个时候，我们希望使用此 XML 来启动作业。作业的流程将在创建/修改时确定。作业的执行只需要读取 XML，然后启动所有作业。我找不到可以让我们将 XML 传递给 jobLauncher（或类似的东西）的东西。

此外，有没有办法将一组作业序列化为 XML，以便我们可以在保存配置的部分使用它？

提前谢谢你的帮助。非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:04:24.227

在[Spring Batch Admin中支持使用作业上传 xml 文件](http://static.springsource.org/spring-batch-admin/reference/jobs.html)

# ios - 如果每 10 毫秒生成一次坐标，如何有效地存储坐标

> ID：15436738
> 
> 赞同：3
> 
> 时间：2013-03-15T15:53:32.290
> 
> 标签：ios, objective-c, core-motion

我有一个 iPad 应用程序，它每 10 毫秒从陀螺仪获取 X、Y 和 Z 坐标。我需要做的是将这些存储在内存中，直到它们可以在方便的时候持久化。什么是这样做的有效方法。我的第一个想法是使用 NSMutableArray，但我不知道`[array addObject]`每 10 毫秒调用一次在性能方面是否是个好主意。创建一个链表或使用其他存储方法会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:12:02.033

让我们具体一点。

3 浮点 x 每秒 100 x 每分钟 60 秒 x 60 分钟内 1 次保存机会 = 4320000

它每小时只有 4.2 MB，对 iPad 的容量和处理能力没有任何意义。

只需 NSMutableArray 即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:12:00.433

我会看一下这个链接： [一个与 NSObject 指针配合得很好的 C 数组](http://bynomial.com/blog/?p=137) 它应该就在你的小巷里......

也就是说，我会使用 NSMutableArray，直到您确定它不能提供您想要的性能。

# css - CSS：专门针对 iOS 5.1 的悬停问题

> ID：15436739
> 
> 赞同：1
> 
> 时间：2013-03-15T15:53:36.630
> 
> 标签：css, safari, hover

我目前正在开发一个跨浏览器的下拉菜单。
但目前我在“悬停”（意味着：触摸）主级导航链接时特别在 iOS 5.1 上遇到了一些问题。

在 iOS >= 6.0 上，使用 return false 来阻止链接操作，并且子菜单将可见性更改为显示并将不透明度更改为 1。

但是在 iOS 5.1 上什么也没有发生。链接操作和下拉菜单均未显示。

编辑：代码示例

```
$(function() {
    if ((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i))) {
        $("#mainNavigation ul li.dropactive > a").click(function() {
            return false;
        });
    }
}); 
```

这个 iOS Safari 有什么特殊的解决方法吗？

干杯，
~MxAgent

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T15:55:42.673

除了“悬停”之外，还添加了一个“焦点”选择器。

[http://www.w3schools.com/cssref/sel_focus.asp](http://www.w3schools.com/cssref/sel_focus.asp)

# c# - MonoTouch：SQLite-net 线程安全和 SQLiteConfig.Serialized

> ID：15436741
> 
> 赞同：1
> 
> 时间：2013-03-15T15:53:52.043
> 
> 标签：c#, iphone, ios, sqlite, xamarin.ios

我试图通过调用如下代码使**SQLite默认为“更多”线程安全：**

```
SqliteConnection.SetConfig (SQLiteConfig.Serialized); 
```

我认为这与设置有关：

```
 DSQLITE_THREADSAFE=1 
```

但如何做到这一点也是一个谜。

为 MonoTouch使用 Awesome **SQLite-NET ORM**，似乎没有办法设置 SQLiteConfig.Serialized？

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:04:45.830

我的（不是最近的）副本在类型`SQLite.cs`中定义了这个方法：`SQLite3`

```
public static extern Result Config (ConfigOption option); 
```

并`ConfigOption`定义为：

```
public enum ConfigOption : int
{
    SingleThread = 1,
    MultiThread = 2,
    Serialized = 3
} 
```

# python - 如何使用 Python 调用 Soap API

> ID：15436749
> 
> 赞同：12
> 
> 时间：2013-03-15T15:54:11.027
> 
> 标签：python, api, soap

虽然我过去使用过 API，但这是我尝试使用的第一个 SOAP。我从 SOAP 教程中复制、粘贴和更改了其中的一些代码，但我已经在 10 个不同的示例中看到它以 10 种不同的方式完成，但没有一个对代码的解释非常清楚。也许下面的代码不是最好的方法，但这就是为什么我正在寻找一些帮助和一个明确的方向。非常感谢。

```
import string, os, sys, httplib

server_addr = "auctions.godaddy.com"
service_action = "GdAuctionsBiddingWSAPI/GetAuctionList"

body = """
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns="http://www.example.com/services/wsdl/2.0">
<soapenv:Header/>
<soapenv:Body>
<ns:serviceListRequest>
<ns:userInfo>
</ns:userInfo>
</ns:serviceListRequest>
</soapenv:Body>
</soapenv:Envelope>"""

request = httplib.HTTPConnection(server_addr)
request.putrequest("POST", service_action)
request.putheader("Accept", "application/soap+xml, application/dime, multipart/related, text/*")
request.putheader("Content-Type", "text/xml; charset=utf-8")
request.putheader("Cache-Control", "no-cache")
request.putheader("Pragma", "no-cache")
request.putheader("SOAPAction", "https://auctions.godaddy.com/gdAuctionsWSAPI/gdAuctionsBiddingWS.asmx?op=GetAuctionList" + server_addr + service_action)
request.putheader("Content-Length", "length")
request.putheader("apiKey", "xxxxxx")
request.putheader("pageNumber", "1")
request.putheader("rowsPerPage", "1")
request.putheader("beginsWithKeyword", "word")
request.endheaders()
request.send(body)
response = request.getresponse().read()

print response 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T15:57:27.593

不要尝试推出您自己的 SOAP 客户端 — 尽管名称如此，SOAP 一点也不简单。

找到任何[合适的 SOAP 库](http://docs.python-zeep.org/en/master/)并将其用于您的 SOAP 通信。

一般来说，[哪个 SOAP 库是“最好的”](https://stackoverflow.com/questions/206154/whats-the-best-soap-client-library-for-python-and-where-is-the-documentation-f)这个问题本质上是有争议的，而且随着项目的出现和过时，答案往往会随着时间而变化。选择一个适合*您的*用例的，任何一个都可能比自己编写更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:02:26.440

我可以建议你使用[suds](https://pypi.python.org/pypi/suds)。它非常好并且被广泛使用。

**更新：**基础 suds 项目很长时间没有活动。当前项目有一个新的分支，现在非常活跃。

[asuds项目](https://pypi.python.org/pypi/asuds/0.2)

# c# - Linq Contains() 不支持

> ID：15436753
> 
> 赞同：1
> 
> 时间：2013-03-15T15:54:20.703
> 
> 标签：c#, linq, entity-framework, entity

```
(from a in GetCtx().Application
                     where identifiers.Contains(a.os + ":" + a.osIdentifier)
                     select a.id).ToList(); 
```

它给了我 NotSupportedException：

> LINQ to Entities 无法识别方法 'System.String Format(System.String, System.Object, System.Object)' 方法，并且此方法无法转换为存储表达式。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:14:57.680

如果您对 SQL Server 使用 LINQ to Entities ，则可以使用[SqlFunctions](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions.aspx)：

```
(from a in GetCtx().Application
 where identifiers.Contains(SqlFunctions.StringConvert((double)a.os) + ":" + a.osIdentifier)
 select a.id).ToList(); 
```

# javascript - 将元素添加到 HTML 并使用 jquery 读取它

> ID：15436757
> 
> 赞同：0
> 
> 时间：2013-03-15T15:54:40.510
> 
> 标签：javascript, jquery, html

我有以下代码：

```
var row =  "<div class="camera_rec_mode" style="text-align: center;"><img class="img_state center" title="Recording Always" src="/static_media/img/rec_always_.png" alt="1"><div class="rec_state_edit" style="text-align: center;padding-top:10px;"><img class="state_dropdown" src="/static_media/img/dropdown.png" width="23/"></div></div>" 
```

我想要做的是在这个 HTML 中添加一个元素来存储一个值，然后读取这个值。我已经通过添加以下内容来尝试这个：

```
<input type="hidden" name="isPtz" id="isPtz" value="true"> 
```

所以它变成：

```
var row =  "<div class="camera_rec_mode" style="text-align: center;"><input type="hidden" name="isPtz" id="isPtz" value="true"><img class="img_state center" title="Recording Always" src="/static_media/img/rec_always_.png" alt="1"><div class="rec_state_edit" style="text-align: center;padding-top:10px;"><img class="state_dropdown" src="/static_media/img/dropdown.png" width="23/"></div></div>" 
```

然后做

```
var isPtz = $('.isPtz', row); 
```

但在 Chrome 调试器中，这给出： e.fn.e.init[0] 基本上是空的。

如何添加然后从这个 HTML 中提取元素值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:00:19.650

js：

```
var newitem = '<input type="hidden" name="isPtz" id="isPtz" value="true">';
$('.camera_rec_mode').prepend(newitem); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:00:39.163

选择它后，您需要访问它的 value 属性

```
var isPtz = $("#isPtz", row);
var value = isPtz.prop("value"); 
```

我已经像 Andreas 建议的那样使用它的 id 来选择它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:02:00.200

您使用的是 id，而不是类，因此您的选择器应该有`#isPtz`，而不是`.isPtz`

此外，如果你想将该 html 添加到 DOM 中，听起来你想使用[append](http://api.jquery.com/append/)或类似的东西，即

```
$('#isPtz').append(row); 
```

我不知道你想如何添加 HTML、你的情况和你的目标——你的帖子的措辞充其量是模糊的。

# asp.net-mvc - 在 ASP.NET MVC 中使用 INotifyDataErrorInfo

> ID：15436764
> 
> 赞同：1
> 
> 时间：2013-03-15T15:55:01.970
> 
> 标签：asp.net-mvc, inotifydataerrorinfo

我知道 ASP.NET MVC 使用 Data Annotations 进行了很好的验证。是否可以使用 INotifyDataErrorInfo 进行数据验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:57:12.830

不，但您可以使用该[`IValidatableObject`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx)界面。Scott Gu[`blogged`](http://weblogs.asp.net/scottgu/archive/2010/12/10/class-level-model-validation-with-ef-code-first-and-asp-net-mvc-3.aspx)关于它。

# entity-framework - 努力进行单元测试

> ID：15436765
> 
> 赞同：1
> 
> 时间：2013-03-15T15:55:13.647
> 
> 标签：entity-framework, unit-testing

我目前正在尝试使用“Effort”框架（[http://effort.codeplex.com/wikipage?title=Tutorials&referringTitle=Home](http://effort.codeplex.com/wikipage?title=Tutorials&referringTitle=Home)）对实体框架的上下文类进行单元测试。

这是我的测试目前的样子：

```
[TestMethod]
public void GetUseraccountsForRealTest()
{
    DbConnection connection = Effort.DbConnectionFactory.CreateTransient();
    SqlContext context = new SqlContext(connection);

    context.TaskComment.Add(new TaskComment() { Id = 1, Message = "Test" });
} 
```

最后一行不起作用。没发生什么事。

这是我的 SqlContext 类的外观：

```
public class SqlContext : DbContext
{
    ...
    public IDbSet<TaskComment> TaskComment { get; set; }
    ...

    //Constructor used by webserver
    public SqlContext(string connectionString) : base(connectionString)
    {
    }

    //Constructor used for unit testing
    public SqlContext(DbConnection connection) : base(connection, true)
    {
        this.Configuration.LazyLoadingEnabled = false;
    }

    /// 
    /// <param name="modelBuilder"></param>
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();   
    }
} 
```

任何人都知道我该如何解决这个问题？没有任何“努力”的经验，也没有太多的文档。:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T08:51:57.697

我自己解决了这个问题。我没有在我的上下文中使用 IDbSet，而只是使用 DbSet，这会导致一些困难。

# jquery - 清理逻辑以根据选择进行切换

> ID：15436768
> 
> 赞同：0
> 
> 时间：2013-03-15T15:55:26.597
> 
> 标签：jquery, toggle, onchange

所以我有一个选择字段。

```
<select name="selection_group_1" id="selection_group_1" onChange="guests()">
  <option value="0">0</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="2">3</option>
</select> 
```

注意 onChange。我用它来调用一个函数而不是 jQuery 的 $().change() 只是因为我对任何 jquery .click、.change 等都没有运气......总是有问题。但如有必要，我愿意使用它。

所以基本上当用户选择 0、1、2、3 时，我想切换 div。这个设置看起来像这样。

```
<div id="guestNames" style="display:none;">
<table cellpadding="0" cellspacing="0" border="0">
    <tr><td colspan="3">Please enter the guest names</td></tr>
    <tr>
        <td>Guest #</td><td>First</td><td>Last</td>
    </tr>
</table>
</div>
<div id="guest1" style="display:none;">
<table cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td>Guest #1:</td>
        <td><input type="text" name="text_field_5" id="text_field_5" style="width:70px;" /></td>
        <td><input type="text" name="text_field_6" id="text_field_6" style="width:70px;" /></td>
    </tr>
</table>
</div>
<div id="guest2" style="display:none;">
<table cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td>Guest #2:</td>
        <td><input type="text" name="text_field_7" id="text_field_7" style="width:70px;" /></td>
        <td><input type="text" name="text_field_8" id="text_field_8" style="width:70px;" /></td>
    </tr>
</table>
</div>
<div id="guest3" style="display:none;">
<table cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td>Guest #3:</td>
        <td><input type="text" name="text_field_9" id="text_field_9" style="width:70px;" /></td>
        <td><input type="text" name="text_field_10" id="text_field_10" style="width:70px;" /></td>
    </tr>
</table>
</div> 
```

div #guestNames 应该默认显示，只要它不为 0。其余的 div #guest1、#guest2、#guest3 应该像这样显示... if(1) - 显示 div #guest1 if(2) - 显示 #guest1 和#guest2 if(3) - 显示 #guest1 和 #guest2 和 #guest3 if(0) - 全部隐藏。

现在我可以按照自己的方式做到这一点，但我是一个 jquery nooblet，而且我的方式很麻烦，而且逻辑甚至都不是万无一失的。最初我尝试使用 .toggle() 但是当我选择 2 时效果不佳，而不是 1 会隐藏而 2 会显示......它总是取决于我的第一选择。比我尝试检查.css（“display”），但这只是一个更长的版本，也导致了同样的问题。

所以我在做和理解方面真正需要帮助（如果有人可以花一点时间来解释）是我如何清楚地告诉下拉列表中列出的 jQuery 并正确切换这些。

这是我可怕的 jfiddle - [http://jsfiddle.net/xFZuH/](http://jsfiddle.net/xFZuH/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:04:03.707

我冒昧地修复了你的小提琴：http: [//jsfiddle.net/xFZuH/1/](http://jsfiddle.net/xFZuH/1/)

首先，您必须想办法将选择选项的值映射到要显示的 div，在这种情况下，我选择直接通过 ID 映射它们

```
<select name="selection_group_1" id="selection_group_1" onChange="guests()">
    <option value="guestNames">0</option>
    <option value="guest1">1</option>
    <option value="guest2">2</option>
    <option value="guest3">3</option>
</select> 
```

然后你应该找到一种方法来同时选择你正在操作的所有 div，因为我给了它们所有相同的类

```
<div id="guestNames" class="divsToToggle"> 
```

然后只需捕获select上的change事件，获取当前选中的值，隐藏所有div，显示与选中值匹配的div

```
$('#selection_group_1').change(function () {
    var id = $(this).val();
    $(".divsToToggle").hide();
    $("#"+id).show();
}); 
```

当然，为了可重用性，我建议将所有这些包装在一个共同的父级中，这样您就可以只选择所需的 div，或者添加 div 的类以切换到数据属性上的 select 元素，例如：

```
<select id="bla" data-target=".divsToToggle">
    ....
</select>

....

$('#selection_group_1').change(function () {
    var id = $(this).val();
    var target = $(this).data("target");
    $(target).hide();
    $("#"+id).show();
}); 
```

# php - 如何在不添加任何数据的情况下创建 mongodb 数据库集合？

> ID：15436774
> 
> 赞同：6
> 
> 时间：2013-03-15T15:55:48.050
> 
> 标签：php, mongodb

我正在使用 MongoDb 做一个项目。我的问题是当我创建集合时，我还必须插入数据。但我想创建没有数据的集合（与在没有数据的 mysql 中创建表相同。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T15:58:24.343

[http://docs.mongodb.org/manual/reference/method/db.createCollection/](http://docs.mongodb.org/manual/reference/method/db.createCollection/)

一个快速的谷歌会揭示这一点。

`db.createCollection("something")`

**编辑**

PHP方法： http: [//php.net/manual/en/mongodb.createcollection.php](http://php.net/manual/en/mongodb.createcollection.php)

`$db->createCollection("something");`

# apache - Apache 给出 403 禁止

> ID：15436775
> 
> 赞同：0
> 
> 时间：2013-03-15T15:55:48.257
> 
> 标签：apache, http-status-code-403

我最近不得不重新安装 Ubuntu 和其他所有东西，因为我的 SSD 崩溃了。

我已经设置了 Apache/MySQL/PHP，并且可以毫无问题地访问 localhost/。运行 PHP 和 MySQL 也可以正常工作。

我将我的项目保存在 Dropbox 文件夹中（自崩溃以来），`/home/powerbuoy/Dropbox/Projects/`并设置了指向其中一些项目的 VHOST。我还进行了设置，`/etc/hosts`以便我可以通过`http://project-name.dev`.

但是，当我尝试访问时，`http://any-project.dev`我得到的只是`403 forbidden`. 我已经运行`chmod -R 777 Projects/`，所有文件和文件夹现在在终端中都是绿色的。那没有帮助。

我检查了错误日志，他们说：

```
[crit] [client 127.0.0.1] (13)Permission denied: /home/powerbuoy/Dropbox/.htaccess pcfg_openfile: unable to check htaccess file, ensure it is readable 
```

但是那里甚至不应该有一个`.htaccess`文件。

我什至建立了一个完全空的项目（`/home/powerbuoy/Dropbox/Projects/test/index.php`就`<?php phpinfo()`在里面），设置了一个 VHOST 和一个`http://test.dev`URL。我在这里得到同样的错误。

有任何想法吗？

谢谢

编辑：我尝试将我的测试项目移动到桌面（`/home/powerbuoy/Desktop/test/`），现在它可以工作了：P

也许它与位于 Dropbox 文件夹中的项目有关？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-24T23:07:34.220

很可能这是一个 chmod 问题。您必须更改所有树的 chmod 设置。如果您有 ssh 访问权限，您可以尝试以下命令：

```
chmod 755 $(find /home/user/public_html -type d)
chmod 644 $(find /home/user/public_html -type f) 
```

请将 /home/user/public_html 部分替换为“您的真实路径”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:09:46.830

显然，仅仅`chmod`ing 项目所在的目录是不够的。我还必须访问`chmod`树中更高的所有目录。

因此，即使我的 VHOST 指向`/home/powerbuoy/Dropbox/Projects/AProject/`简单的`chmod`ing是不够的，但它必须从它看起来`/AProject/`一路完成。`/home/powerbuoy/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:16:24.490

您必须对目录树上的权限进行 chmod 的原因是 Linux 不允许您简单地访问文件夹，例如`/home/jsmith/my_folder`直接访问。您还必须对 `/` `/home/`和具有执行权限`/home/jsmith`。执行位允许受影响的用户进入目录，并访问其中的文件和目录。

# javascript - Select2 - 如果未找到结果，拒绝可以清理输入字段并禁用表单

> ID：15436782
> 
> 赞同：0
> 
> 时间：2013-03-15T15:56:16.020
> 
> 标签：javascript, jquery, json, coffeescript, jquery-select2

我有这个 json 文件`/api/searches`：

```
[{"id":"513dbb61a61654a845000005","text":"ingeniero agrónomo"},{"id":"513a11d4a6165411b2000008","text":"ingeniero industrial"}] 
```

我正在使用 select2 来显示结果。

这是我当前的 select2 设置：

```
$('#query_txt').select2
  createSearchChoice: (term, data) ->
    if $(data).filter(->
      @text.localeCompare(term) is 0
    ).length is 0
      id: term
      text: term
  width: 'resolve'
  minimumInputLength: 3
  tags: true
  showSearchBox: true
  maximumSelectionSize: 1
  closeOnSelect: true
  multiple: false
  selectOnBlur: true
  ajax:
    url: "/api/v1/cvs/searches"
    quietMillis: 100
    dataType: 'json'
    data: (term, page) ->
      q: term, 
      page_limit: 9
    results: (data, page) ->
      results: data
  initSelection: (element, callback) ->
    $.get "/api/searches/" + element.val(), (data) ->
      callback {id: data.id, text: data.occupation} 
```

在此示例中，[http://jsfiddle.net/nqWNJ/6/](http://jsfiddle.net/nqWNJ/6/)或[http://jsfiddle.net/uDrvp/1/](http://jsfiddle.net/uDrvp/1/)如果您在文本字段中键入单词`"asdfasdf"`或随机单词，并且如果您单击输入字段的输出，关键字保留在输入中，并且该关键字不会被 select2**删除**。

**我想，如果没有找到结果或用户在文本字段之外单击，则不会删除关键字并且不会禁用我的表单**

我怎样才能达到这个目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:07:33.740

您必须在配置中添加`selectOnBlur:true`选项并升级到最新的 master。这是一个工作小提琴：http: [//jsfiddle.net/nqWNJ/7/](http://jsfiddle.net/nqWNJ/7/)

# php - JQuery 在使用 PHP 的 Twitter Bootstrap 模式中进行验证

> ID：15436794
> 
> 赞同：0
> 
> 时间：2013-03-15T15:56:45.650
> 
> 标签：php, jquery, twitter-bootstrap, jquery-validate, modal-dialog

我正在研究交通规划器，在我的任务表中，我有一个按钮来签署任务的路线编号。当一个任务根本没有路由编号时，该按钮将调用一个引导模式来为该任务分配一个新的路由编号，这也是标准的路由编号。

当一个任务已经有一个路由编号时，该按钮将调用**相同**的模式并添加一个新的复选框。未选中表示，仅在今天更改路由编号，选中表示，将插入的路由编号设为标准路由编号。

我正在使用 JQuery 进行验证，但没有发生任何事情，并且表单在未经验证的情况下提交。我究竟做错了什么..？

**调用模式的链接：**

```
<a href="#routenummer_view<?php echo $row['planning_id']; ?>" class="btn strong" data-toggle="modal"><?php if ($row['routenummer'] != ''){ echo $row['routenummer']; } if ($row['routenummer'] == ''){ ?><i class="icon-plus"></i><?php }?></a> 
```

**模态：**

```
<div id="routenummer_view<?php echo $row['planning_id']?>" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="routenummer_viewLabel" aria-hidden="true">
    <form class="modal-form" action="../includes/modals/routenummer/submit_view_routenummer.php"
        data-remote="true" method="post" id="routenummer_edit">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 id="routenummerviewLabel"><?php if ($row['routenummer'] == ''){ echo 'Standaard Routenummer Invoeren';} else echo 'Routenummer Wijzigen';?></h3>
        </div>
        <div class="modal-body">

            <label>Routenummer:</label> 
                <input type="text" name="routenummer" <?php if ($row['routenummer'] != NULL){ ?>value="<?php if ($row['routenummer'] != NULL){ echo $row['routenummer']; echo '" /><br />';}?> <?php } if ($row['routenummer'] == NULL){ ?> placeholder="Typ hier een routenummer..." /><?php if ($row['routenummer'] != NULL){ echo '<br />'; }}?>
                <?php if ($row['routenummer'] != NULL){ ?>
                 <label class="checkbox">
                    <input type="checkbox" name="standaard"> Maak standaard routenummer.</label>
                     <?php }?>

        </div>
        <div class="modal-footer">
            <input type="hidden" name="opdrachtid" value="<?php echo $row['planning_id']; ?>" />
            <input type="submit" value="<?php if ($row['routenummer'] == ''){ echo 'Invoeren';} else echo 'Wijzigen';?>" class="btn btn-primary" />
            <a href="#" class="btn" data-dismiss="modal">Annuleren</a>
        </div>
  </form>
</div> 
```

**查询：**

```
$(document).ready(function() {
    $("#routenummer_edit").validate({
        onkeyup : false,
        rules : {
            routenummer : {
                required : true,
                digits: true
            }
        },
        messages : {
            routenummer : {
                required : "Routenummer is verplicht.",
                digits : "Routenummer moet een getal zijn."
            }
        },
    });
}); 
```

**示例图片** ![示例图片](../Images/f59dd12ae1455d7a6d782fc8566317e3.png)

**编辑**

**渲染的 HTML**

**当任务没有标准路由编号时：**

```
<div id="routenummer_view90" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="routenummer_viewLabel" aria-hidden="true">
    <form class="modal-form" action="../includes/modals/routenummer/submit_view_routenummer.php"
        data-remote="true" method="post" id="routenummer_edit">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 id="routenummerviewLabel">Standaard Routenummer Invoeren</h3>
        </div>
        <div class="modal-body">

            <label>Routenummer:</label> 
                <input type="text" name="routenummer"  placeholder="Typ hier een routenummer..." />                     
        </div>
        <div class="modal-footer">
            <input type="hidden" name="opdrachtid" value="90" />
            <input type="submit" value="Invoeren" class="btn btn-primary" />
            <a href="#" class="btn" data-dismiss="modal">Annuleren</a>
        </div>
  </form>
</div> 
```

**当任务*确实*有标准路由编号时：**

```
<div id="routenummer_view67" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="routenummer_viewLabel" aria-hidden="true">
    <form class="modal-form" action="../includes/modals/routenummer/submit_view_routenummer.php"
        data-remote="true" method="post" id="routenummer_edit">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 id="routenummerviewLabel">Routenummer Wijzigen</h3>
        </div>
        <div class="modal-body">

            <label>Routenummer:</label> 
                <input type="text" name="routenummer" value="21" /><br />                                <label class="checkbox">
                    <input type="checkbox" name="standaard"> Maak standaard routenummer.</label>

        </div>
        <div class="modal-footer">
            <input type="hidden" name="opdrachtid" value="67" />
            <input type="submit" value="Wijzigen" class="btn btn-primary" />
            <a href="#" class="btn" data-dismiss="modal">Annuleren</a>
        </div>
  </form>
</div> 
```

**编辑**

```
$(document).ready(function() {
$('.modal-form').each(function () {
            $(this).validate({ // initialize the plugin
                rules: {
                    routenummer: {
                        required: true,
                        digits: true
                    }
                },
                messages : {
                    routenummer : {
                        required : "Routenummer is verplicht.",
                        digits : "Routenummer moet een getal zijn."
                    }
            }
        });
});
}); 
```

**编辑**

**模态**

```
<div id="routenummer<?php echo $row['planning_id']?>" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="routenummerLabel" aria-hidden="true">
    <form class="modal-form" action="../includes/modals/routenummer/submit_routenummer.php"
        data-remote="true" method="post">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 id="routenummerLabel"><?php if ($row['routenummer'] == ''){ echo 'Standaard Routenummer Invoeren';} else echo 'Routenummer Wijzigen';?></h3>
        </div>
        <div class="modal-body">

            <label>Routenummer:</label> 
                <input type="text" name="routenummer" <?php if ($row['routenummer'] != NULL){ ?>value="<?php if ($row['routenummer'] != NULL){ echo $row['routenummer']; echo '" /><br />';}?> <?php } if ($row['routenummer'] == NULL){ ?> placeholder="Typ hier een routenummer..." /><?php if ($row['routenummer'] != NULL){ echo '<br />'; }}?>
                <?php if ($row['routenummer'] != NULL){ ?>
                 <label class="checkbox">
                    <input type="checkbox" name="standaard"> Maak standaard routenummer.</label>
                     <?php }?>

        </div>
        <div class="modal-footer">
            <input type="hidden" name="opdrachtid" value="<?php echo $row['planning_id']; ?>" />
            <input type="submit" value="<?php if ($row['routenummer'] == ''){ echo 'Invoeren';} else echo 'Wijzigen';?>" class="btn btn-primary" />
            <a href="#" class="btn" data-dismiss="modal">Annuleren</a>
        </div>
  </form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:01:08.340

验证在您的两个示例中都按预期工作......

* * *

您的***“当任务没有标准路由编号时”***示例正在运行：

**[http://jsfiddle.net/qdX8y/1/](http://jsfiddle.net/qdX8y/1/)**

（验证将不允许提交空字段）

* * *

您的***“当任务确实有标准路由号”***示例也有效。但是，[它会立即通过验证，](http://jsfiddle.net/qdX8y/2/)因为您在字段中已经有一个满足复合规则要求的值，`required`并且`digits`.

```
<input type="text" name="routenummer" value="21" /> 
```

删除`value="21"`会触发验证消息。

**[http://jsfiddle.net/qdX8y/](http://jsfiddle.net/qdX8y/)**

* * *

**编辑**：

根据对 OP 的评论，发现 OP 有多个`form`元素共享相同的`id`. 这不仅是无效的 HTML，而且会破坏 Validate 插件，因为它不知道`form`要定位哪个。

但是，所有`form`元素都可以共享相同的`class`名称，然后您可以使用 jQuery`.each()`将它们全部选中。此示例包含五个重复`<form>`元素，每个元素都具有`class="myform"`并假设所有五个`form`元素共享相同的`.validate()`选项。

```
$(document).ready(function () {

    $('.myform').each(function () {
        $(this).validate({ // initialize the plugin on each form
            // your options and rules
        });
    });

}); 
```

**演示：http: [//jsfiddle.net/cWtd6/](http://jsfiddle.net/cWtd6/)**

# java - Java 正则表达式 emptyString 只有数字和 . 或 , 需要的数字

> ID：15436795
> 
> 赞同：0
> 
> 时间：2013-03-15T15:56:46.237
> 
> 标签：java, regex

到目前为止，我正在尝试用 Java 开发一个简单的正则表达式，但没有成功。这是我想要完成的。

1.  不接受空字符串。分隔数字的左侧或右侧至少需要一组数字。`13.`被接受；`.13`也被接受。

2.  分隔符可能是`.`或`,`。

3.  只允许出现一个或零个字符分隔符。

4.  不允许单独使用不带数字的分隔符。例如，`.`不允许单独使用。

我面临的主要问题是如何使分隔符成为可选的。我正在尝试这个：

```
private final Pattern pattern = Pattern.compile("^[0-9]*.?|,?[0-9]*$"); 
```

在这里，我试图在字符串的开头指定一个数字列表，这些数字是可选的。稍后，我指定了一个分隔符，它可以是可选的，`.`也可以`,`是可选的。后来右边，也是一串数字，也是可选的。这是问题所在：只有一个`.`或一个空字符串匹配。

这是我的代码：

```
 Matcher matcher = clazz.pattern.matcher(input);// a empty string should not be matching
    System.out.println(input+" "+matcher.matches());
    input="a";
    matcher = clazz.pattern.matcher(input);//true how can i fix this letter should not be allowed....
    System.out.println(input+" "+matcher.matches());
    input="13.";
    matcher = clazz.pattern.matcher(input);//returns true is OK.
    System.out.println(input+" "+matcher.matches());        
    input=".13";
    matcher = clazz.pattern.matcher(input);//returning false why is this if . is a character separator allowed.
    System.out.println(input+" "+matcher.matches());
    input="13.,";
    matcher = clazz.pattern.matcher(input);//false is OK only one separator might be specify.
    System.out.println(input+" "+matcher.matches());        
    input=",.13";
    matcher = clazz.pattern.matcher(input);//false is OK only one separator might be specify.
    System.out.println(input+" "+matcher.matches());        
    input="13,";
    matcher = clazz.pattern.matcher(input);//true is OK only one separator might be specify. , in this case
    System.out.println(input+" "+matcher.matches());        
    input=",13";
    matcher = clazz.pattern.matcher(input);
    System.out.println(input+" "+matcher.matches());//true is ok the separator is , in this case
    input="1131313133";
    matcher = clazz.pattern.matcher(input);
    System.out.println(input+" "+matcher.matches());//true only numbers        
    input="113.1313.133.13";
    matcher = clazz.pattern.matcher(input);
    System.out.println(input+" "+matcher.matches());//false is OK only one appeareance of the separator is allowed.        
    input="1131313133.132313";
    matcher = clazz.pattern.matcher(input);
    System.out.println(input+" "+matcher.matches());//false why is this... please help
    input=".";
    matcher = clazz.pattern.matcher(input);
    System.out.println(input+" "+matcher.matches()); //true how can i fix this i need a left or right sequence of numbers.       
    input=".....";
    matcher = clazz.pattern.matcher(input);
    System.out.println(input+" "+matcher.matches());//false is OK
    input=",,,,,,,";
    matcher = clazz.pattern.matcher(input);
    System.out.println(input+" "+matcher.matches());//false is OK 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:01:56.323

其中一个问题是，由于运算符优先级

```
^[0-9]*.?|,?[0-9]*$ 
```

基本上是一样的

```
(^[0-9]*.?)|(,?[0-9]*$) 
```

所以`digits.digits`不会匹配。

并且`[0-9]*`意味着零或更多，所以`.`会匹配。

另请注意，`^`在`$`这种情况下实际上并不需要它，更多的是在您使用`find()`或类似时使用。

**你想要的可能更像是：**

```
[0-9]+[.,]?|[0-9]*[.,][0-9]+ 
```

`[.,]`表示要么`.`要么`,`。
`[0-9]+`表示**一位**或多位数字。
似乎您熟悉其他语法。

[参考](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

**编辑：**

另请注意，对于您可能不想`00000`匹配的数字，尽管要求中没有说明。所以像：

```
(0|[1-9][0-9]*)[.,]?|(0|[1-9][0-9]*)?[.,][0-9]+ 
```

以上将匹配`0`可选分隔符左侧不以零开头的 a 或任何数字（如果分隔符右侧有某些内容，则不匹配）。

# android - 滑动到侧面板，第一个面板部分可见

> ID：15436797
> 
> 赞同：1
> 
> 时间：2013-03-15T15:56:47.757
> 
> 标签：android, android-layout

我不认为这些示例使用 viewpager，但在视觉上它们看起来有点像 viewpager。

查看印象笔记的设置：

[http://1.androidauthority.com/wp-content/uploads/howto/evernote-screenshots-120524.jpg](http://1.androidauthority.com/wp-content/uploads/howto/evernote-screenshots-120524.jpg)

Pocket Casts 的手持控制面板：

[http://www.shiftyjelly.com/android/pocketcasts](http://www.shiftyjelly.com/android/pocketcasts)

基本上，面板从左侧滑入，但前一个面板的左边缘仍然可见。

所以我的问题是，这个 UI 模式是否出现在你看到的示例中，或者这两个是用整块布做成的，现在我也必须这样做？

为后代编辑：

从 Google I/O 2013 开始，它现在已内置到 Android 中。他们称之为导航抽屉：http: [//developer.android.com/training/implementing-navigation/nav-drawer.html](http://developer.android.com/training/implementing-navigation/nav-drawer.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:06:33.257

~~[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)~~

~~这个库可能会帮助你。我认为这就是你想要达到的目标。~~

**编辑**

我已经更新了指向另一个 SlidingMenu 库的链接，但截至 2015 年 9 月 16 日，**我无论如何都不会使用这里引用的库**。Google 在 v4 支持库中提供了[DrawerLayout](https://developer.android.com/reference/android/support/v4/widget/DrawerLayout.html "抽屉布局")来实现这一点。在抽屉内部，为了更标准的结构化导航，设计支持库还提供了可以放置在 DrawerLayout 内部的 NavigationView，并使用标准菜单资源来填充其中包含的项目[。](https://developer.android.com/reference/android/support/design/widget/NavigationView.html)这个[SO](https://stackoverflow.com/questions/30586725)可以帮助解决实现的细节。

# c# - 修复与他们的 Ngit 中的合并冲突？

> ID：15436801
> 
> 赞同：1
> 
> 时间：2013-03-15T15:56:54.437
> 
> 标签：c#, jgit, ngit

我一直在环顾四周，关于如何解决这个问题并没有很多明确的例子。我[在堆栈上找到了这个示例](https://stackoverflow.com/questions/12138659/how-to-merge-in-jgit)，`JGit`但它似乎不适用于`NGIT`.

我已经搞定了：

```
var merge = NG.Merge.MergeStrategy.THEIRS.NewMerger(localRepo);
var obj = new NG.ObjectId[] { localRepo.Resolve("a"), localRepo.Resolve("c") };
merge.Merge(obj); 
```

但是“a”和“c”解析为空。不出所料，合并失败并出现空引用异常。

这里的任何帮助将不胜感激！

# html - 如何创建一个单页网站？

> ID：15436803
> 
> 赞同：-1
> 
> 时间：2013-03-15T15:56:57.183
> 
> 标签：html, css, user-interface

我对网页设计和了解我正在浏览 YouTube 的网站布局相当陌生，我看到了[这个视频](http://www.youtube.com/watch?v=bKrY0o_3TqU)，视频博主解释了他最喜欢的 5 个网站设计。

有时`1:44`他开始谈论单页设计并谈论[SplitSecnd](https://www.splitsecnd.com/)。我喜欢他们的背景设计方式。

我知道如何为`div`元素赋予不同的背景图像或颜色，但我想知道如何创建相似或复制它们的背景？他们的背景有图像和一个三角形，然后一个新的部分开始:)

对此的任何帮助将不胜感激。我会很感激一些示例代码的解释:)

```
<!DOCTYPE html>
<html>
<title> Lot of Divs </title>
<style>

    body{
        margin: 0;
        padding: 0;
    }
    .content{
        width: 1280px;
        height: 800px;
        font-family: "Courier New",monospaced;
        font-size: 18px;
        color: white;
    }
    #div1{
        background-image: url("../img/mentalist-1.jpg");
        background-repeat: no-repeat;
        margin: 0;
        padding: 0;
    }
    #div2{
        background-image: url("../img/prisonbreak-1.jpg");
        background-repeat: no-repeat;
        margin: 0;
        padding: 0;
    }
    p{
        text-align: justify;
    }
</style>
<body>
    <div class = "content" id="div1">
        <p>
            An infamous 'psychic' abandons his public persona, outing himself as a fake, to focus on his work as a consultant 
            for the California Bureau of Investigation in order to find "Red John," the madman who killed his wife and daughter.
        </p>
    </div>
    <div class = "content" id="div2">
        <p>
            Structural Engineer Michael Scofield turns himself in to the Fox River Penitentiary in order to break out his brother Lincoln Burrows, 
            who is on death row for the murder of the Vice President's brother. 
            But Lincoln was set up by some of the Company (an agency formed by corrupt government officials) guys, 
            headed by General Jonathan Krantz. Michael breaks out from Fox River with his brother Lincoln and other convicts
        </p>
    </div>
</body>
</html> 
```

我想要实现的是：

*   背景风格类似于SplitSecnd*   让背景中的两个图像粘在一起（底部没有空格）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:46:48.547

SplitSecnd 的构建比您想象的要容易。他们正在堆叠透明的 *.png 图像。例如第一个在这里：[https ://www.splitsecnd.com/assets/images/core/road_crop_v3-min.png](https://www.splitsecnd.com/assets/images/core/road_crop_v3-min.png)

从那里你可以把它们堆叠起来。使用 div 和`position: absolute;`,`z-index: ...`和`top: ...px;`。

z-index 越高，它在“堆栈”上的位置就越高（离你的屏幕越近，就像 z 轴一样）。位置 top 允许您将 div 放置在彼此下方（y-asis）。您必须使用接近图像高度的值，然后对其进行微调。

# android - android对话框在旋转时崩溃

> ID：15436808
> 
> 赞同：2
> 
> 时间：2013-03-15T15:57:10.307
> 
> 标签：android, dialog, rotation, illegalargumentexception, window-managers

在我的应用程序中，当我打开一个对话框并且设备旋转时，应用程序崩溃。

我以为我已经在尽一切努力自己处理旋转了

在我的所有活动中，我在清单中启用了此功能

```
android:configChanges="keyboardHidden|orientation"
        android:screenOrientation="fullSensor" 
```

对于有问题的对话框，我有这个代码

```
 if(!WebViewActivity.this.isFinishing() && dialog != null && dialog.isShowing()){
                dialog.dismiss();
  } 
```

但是，如果在设备旋转时对话框打开，我仍然会收到此崩溃消息

```
 java.lang.IllegalArgumentException: View not attached to window manager
at android.view.WindowManagerGlobal.findViewLocked(WindowManagerGlobal.java:383)
at android.view.WindowManagerGlobal.removeView(WindowManagerGlobal.java:285)
at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:79)
at android.app.Dialog.dismissDialog(Dialog.java:323)
at android.app.Dialog.dismiss(Dialog.java:306)
at bundle.android.views.WebViewActivity$1.onPageFinished(WebViewActivity.java:133)
at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:323)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method) 
```

或此错误消息

```
 android.view.WindowManager$BadTokenException: Unable to add window -- token  android.os.BinderProxy@42173a50 is not valid; is your activity running? 
```

这个例子是关于一个名为的活动`WebViewActivity`，但我有许多其他活动有同样的问题

我觉得不需要使用`onConfigurationChanged`生命周期方法，但欢迎任何解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:03:19.460

答案是使用

```
android:configChanges="keyboardHidden|orientation"
android:screenOrientation="fullSensor" 
```

`screenSize`就像我正在使用的那样，以及android api level 13+的额外参数

```
android:configChanges="keyboardHidden|orientation|screenSize"
android:screenOrientation="fullSensor" 
```

这必须为清单中可能存在对话框问题的每个活动完成，以及放入

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);

} 
```

# c# - 使用网格视图内的下拉列表更新 SQL Server 数据库表

> ID：15436810
> 
> 赞同：0
> 
> 时间：2013-03-15T15:57:19.963
> 
> 标签：c#, sql-server, gridview, visual-studio-2012

我有一个带有几个文本框和一个网格视图的 Web 表单。输入 ID 号后，网格视图会显示来自 SQL 数据源的特定数据。理论上，网格视图中的信息可以通过下拉列表删除或编辑。问题是当在下拉列表中进行选择并单击更新按钮时，网格视图会刷新为原始选择。

我已经研究了我可能做错了什么，但我想我已经看了很长时间了，我只是在旋转我的轮子。我有一种感觉，通过反复试验在 C# 代码中移动可能是一些格式错误，或者它可能是我没有的东西。我想另一双眼睛不会受伤。

谢谢

这是我的 HTML：

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="../Styles/Styles.css" rel="stylesheet" />
    <style type="text/css">
        .auto-style1 {
            width: 50%;
        }
        </style>
</head>
<body>
    <form id="form1" runat="server">
        <div class="main outside">
            <div class="user">
                <table class="auto-style1">
                    <tr>
                        <td>
                            <asp:Label ID="lblName" runat="server" Text="Name: "></asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="txtName" runat="server"></asp:TextBox>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <asp:Label ID="lblEmail" runat="server" Text="Email:"></asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="txtEmail" runat="server"></asp:TextBox>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <asp:Label ID="lblUserName" runat="server" Text="User Name:"></asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="txtUserName" runat="server"></asp:TextBox>
                        </td>
                    </tr>
                    <tr>
                        <td>

                        </td>
                        <td>

                        </td>

                    </tr>
                    <tr>
                        <td>

                    <asp:Label ID="lblTest" runat="server" Text="Test User ID:"></asp:Label>

                        </td>
                        <td>

                                <asp:TextBox ID="txtTest" runat="server"></asp:TextBox>

                        </td>
                    </tr>
                </table>
            </div>
            <div class="baby">

                <asp:GridView ID="grdvwBabyInfo" runat="server" AutoGenerateColumns="False" 
                    DataKeyNames="id_baby" DataSourceID="SqlDataSource1">
                    <Columns>

                        <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
                        <asp:BoundField DataField="id_baby" HeaderText="id_baby" InsertVisible="False" 
                            ReadOnly="True" SortExpression="id_baby" Visible="False" />
                        <asp:BoundField DataField="id_user" HeaderText="id_user" 
                            SortExpression="id_user" Visible="False" />
                        <asp:TemplateField HeaderText="Your Relation" SortExpression="relation_to_baby">
                            <EditItemTemplate>
                                <asp:DropDownList ID="drpDwnRelation" runat="server" 

                                    SelectedValue='<%# Bind("relation_to_baby") %>' AutoPostBack="False">
                                    <asp:ListItem>mother</asp:ListItem>
                                    <asp:ListItem>father</asp:ListItem>
                                    <asp:ListItem>brother</asp:ListItem>
                                    <asp:ListItem>sister</asp:ListItem>
                                    <asp:ListItem>aunt</asp:ListItem>
                                    <asp:ListItem>uncle</asp:ListItem>
                                    <asp:ListItem>grandmother</asp:ListItem>
                                    <asp:ListItem>grandfather</asp:ListItem>
                                    <asp:ListItem>niece</asp:ListItem>
                                    <asp:ListItem>nephew</asp:ListItem>
                                    <asp:ListItem>friend</asp:ListItem>
                                    <asp:ListItem>other</asp:ListItem>
                                </asp:DropDownList>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label1" runat="server" Text='<%# Bind("relation_to_baby") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Baby's Gender" SortExpression="sex_of_baby">
                            <EditItemTemplate>
                                <asp:DropDownList ID="drpDwnGender" runat="server" 
                                    SelectedValue='<%# Bind("sex_of_baby") %>' AutoPostBack="False">
                                    <asp:ListItem>a baby boy</asp:ListItem>
                                    <asp:ListItem>a baby girl</asp:ListItem>
                                    <asp:ListItem>twins</asp:ListItem>
                                    <asp:ListItem>triplets</asp:ListItem>
                                    <asp:ListItem>unknown</asp:ListItem>
                                    <asp:ListItem>other</asp:ListItem>
                                </asp:DropDownList>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label2" runat="server" Text='<%# Bind("sex_of_baby") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Est. Due Date" SortExpression="due_date">
                            <EditItemTemplate>
                                <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                            </EditItemTemplate>
                            <ItemTemplate>
                                <asp:Label ID="Label3" runat="server" Text='<%# Bind("due_date") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:BoundField DataField="baby_first_name" HeaderText="Baby's First Name" 
                            SortExpression="baby_first_name" />
                    </Columns>
                </asp:GridView>

                <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConflictDetection="CompareAllValues" ConnectionString="<%$ ConnectionStrings:bbvs_d01ConnectionString %>" DeleteCommand="DELETE FROM [bbuser_baby] WHERE [id_baby] = @original_id_baby AND [id_user] = @original_id_user AND [relation_to_baby] = @original_relation_to_baby AND [sex_of_baby] = @original_sex_of_baby AND (([due_date] = @original_due_date) OR ([due_date] IS NULL AND @original_due_date IS NULL)) AND (([baby_first_name] = @original_baby_first_name) OR ([baby_first_name] IS NULL AND @original_baby_first_name IS NULL))" InsertCommand="INSERT INTO [bbuser_baby] ([id_user], [relation_to_baby], [sex_of_baby], [due_date], [baby_first_name]) VALUES (@id_user, @relation_to_baby, @sex_of_baby, @due_date, @baby_first_name)" OldValuesParameterFormatString="original_{0}" SelectCommand="SELECT * FROM [bbuser_baby] WHERE ([id_user] = @id_user)" UpdateCommand="UPDATE [bbuser_baby] SET [id_user] = @id_user, [relation_to_baby] = @relation_to_baby, [sex_of_baby] = @sex_of_baby, [due_date] = @due_date, [baby_first_name] = @baby_first_name WHERE [id_baby] = @original_id_baby AND [id_user] = @original_id_user AND [relation_to_baby] = @original_relation_to_baby AND [sex_of_baby] = @original_sex_of_baby AND (([due_date] = @original_due_date) OR ([due_date] IS NULL AND @original_due_date IS NULL)) AND (([baby_first_name] = @original_baby_first_name) OR ([baby_first_name] IS NULL AND @original_baby_first_name IS NULL))">
                    <DeleteParameters>
                        <asp:Parameter Name="original_id_baby" Type="Int32" />
                        <asp:Parameter Name="original_id_user" Type="Int32" />
                        <asp:Parameter Name="original_relation_to_baby" Type="String" />
                        <asp:Parameter Name="original_sex_of_baby" Type="String" />
                        <asp:Parameter DbType="Date" Name="original_due_date" />
                        <asp:Parameter Name="original_baby_first_name" Type="String" />
                    </DeleteParameters>
                    <InsertParameters>
                        <asp:Parameter Name="id_user" Type="Int32" />
                        <asp:Parameter Name="relation_to_baby" Type="String" />
                        <asp:Parameter Name="sex_of_baby" Type="String" />
                        <asp:Parameter DbType="Date" Name="due_date" />
                        <asp:Parameter Name="baby_first_name" Type="String" />
                    </InsertParameters>
                    <SelectParameters>
                        <asp:ControlParameter ControlID="txtTest" Name="id_user" PropertyName="Text" Type="Int32" />
                    </SelectParameters>
                    <UpdateParameters>
                        <asp:Parameter Name="id_user" Type="Int32" />
                        <asp:Parameter Name="relation_to_baby" Type="String" />
                        <asp:Parameter Name="sex_of_baby" Type="String" />
                        <asp:Parameter DbType="Date" Name="due_date" />
                        <asp:Parameter Name="baby_first_name" Type="String" />
                        <asp:Parameter Name="original_id_baby" Type="Int32" />
                        <asp:Parameter Name="original_id_user" Type="Int32" />
                        <asp:Parameter Name="original_relation_to_baby" Type="String" />
                        <asp:Parameter Name="original_sex_of_baby" Type="String" />
                        <asp:Parameter DbType="Date" Name="original_due_date" />
                        <asp:Parameter Name="original_baby_first_name" Type="String" />
                    </UpdateParameters>
                </asp:SqlDataSource>

            </div>
            <div class="testbox">
                </div>
            <div class="bottom">
                <div class="buttons"><asp:Button ID="btnSave" runat="server" Text="Save Changes" OnClick="btnSave_Click" /><asp:Button ID="btnLoad" runat="server" Text="Load" OnClick="btnLoad_Click" /></div></div>
        </div>
    </form>
</body>
</html> 
```

还有我的 C# 代码：

```
using System;
using System.Configuration;
using System.Data;
using System.Data.Sql;
using System.Data.SqlClient;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace BabyEditForm
{
    public partial class EditForm : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {            
        }

        protected void btnLoad_Click(object sender, EventArgs e)
        {
            string source = System.Configuration.ConfigurationManager.
            ConnectionStrings["bbvs_d01ConnectionString"].ConnectionString;            

            SqlConnection conn = new SqlConnection(source);            
            conn.Open();
            SqlDataReader readerBBUser = null;

            SqlCommand myCommand = new SqlCommand("select * from bbuser WHERE id_user='" + txtTest.Text + "'", conn);

            readerBBUser = myCommand.ExecuteReader();
            while (readerBBUser.Read())
            {
            txtName.Text = (readerBBUser["name"].ToString());
            txtEmail.Text = (readerBBUser["email"].ToString());
            txtUserName.Text = (readerBBUser["username"].ToString());            
            }          
            conn.Close();
        }       

        protected void btnSave_Click(object sender, EventArgs e)
        {

            string source = System.Configuration.ConfigurationManager.
            ConnectionStrings["bbvs_d01ConnectionString"].ConnectionString;

            SqlConnection conn = new SqlConnection(source);

            conn.Open();
            SqlCommand cmdA = new SqlCommand("UPDATE bbuser SET name = @name, email = @email, username = @username WHERE id_user='" + txtTest.Text + "'", conn);

            cmdA.Parameters.AddWithValue("@name", txtName.Text);
            cmdA.Parameters.AddWithValue("@email", txtEmail.Text);
            cmdA.Parameters.AddWithValue("@username", txtUserName.Text);

            cmdA.ExecuteNonQuery();

            SqlCommand cmdB = new SqlCommand("UPDATE bbuser_baby SET relation_to_baby = @relation_to_baby, sex_of_baby = @sex_of_baby, due_date = @due_date, baby_first_name = @baby_first_name WHERE id_user'" + txtTest.Text + "'", conn);

            if (!IsPostBack)
            {
                foreach (GridViewRow row in grdvwBabyInfo.Rows)
                {
                    string dropDownRelationText = ((DropDownList)
                    row.FindControl("drpDwnRelation")).SelectedItem.Value;
                    Response.Write(dropDownRelationText);

                    string dropDownGenderText = ((DropDownList)
                    row.FindControl("drpDwnGender")).SelectedItem.Value;
                    Response.Write(dropDownGenderText);

                    cmdB.Parameters.AddWithValue("@relation_to_baby", dropDownRelationText);
                    cmdB.Parameters.AddWithValue("@sex_of_baby", dropDownGenderText);
                    grdvwBabyInfo.DataBind();
                    cmdB.ExecuteNonQuery();
                }
            }                    
            conn.Close();

                }
            }           
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:34:43.197

请尝试交换以下 FROM：

```
grdvwBabyInfo.DataBind(); 
cmdB.ExecuteNonQuery(); 
```

至：

```
cmdB.ExecuteNonQuery(); 
grdvwBabyInfo.DataBind(); 
```

# java - Java：如何返回一个数组？

> ID：15436816
> 
> 赞同：0
> 
> 时间：2013-03-15T15:57:30.933
> 
> 标签：java, android, arrays, return

这是代码，据我了解，它应该可以工作。此外，当我调试我的程序时，似乎该数组正在填充相同方法正在创建的对象。但是，当我尝试打印它时，它仍然显示“null”返回 agian，就像“return”不起作用一样。为什么会这样？

```
public class Course {

String courseName;
String teacherName;
int gradeAv;
static int counter;
static int maxNumOfStudents;
Student studentsArray[] = new Student[5];
int numOfStudents = studentsArray.length;

public Course() {

}

public Course(String courseName) {

    this();
    this.courseName = courseName;
}

public Course(String courseName, String teacherName) {

    this(courseName);
    this.courseName = courseName;
    this.teacherName = teacherName;
}

public Student[] addStudent(String name, int age, int grade) {

    for (int i = 0; i < 5; i++) {

        studentsArray[i] = new Student(name, age, grade);

        age += 10;
        grade += 10;
    }
    return studentsArray;
}

public void printStudentArray(Student studentArray[]) {

    studentArray = this.studentsArray;

    for (int i = 0; i < studentsArray.length; i++) {

        System.out.println(studentsArray[i]);
    }
}

public int gradeAv() {

    for (int i = 0; i < studentsArray.length; i++) {

        int temp = 0;

        if (studentsArray[i].grade > temp) {
            gradeAv = temp;
            System.out.println(gradeAv);
        }
    }
    return gradeAv;
}

public void printCourse() {

    System.out.println("Course: ");
    System.out.println("Course Name: " + courseName + ". "
            + "Teacher's Name: " + teacherName + ". "
            + "Number Of Students: " + numOfStudents + ". ");

}
   } 
```

这是我的主要课程：

```
public class MainClass {

public static void main(String[] args) {

    Student stud = new Student();
    Course cour = new Course("Java", "Ronni");

    stud.addStudent("Joe", 23, 100);

    stud.printStudent();
    System.out.println();
    stud.printCourse();

    System.out.println();

    cour.printStudentArray(cour.studentsArray);
    System.out.println(); 
```

// cour.gradeAv();

```
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:09:39.060

在

```
Student stud = new Student();
Course cour = new Course("Java", "Ronni");

stud.addStudent("Joe", 23, 100); 
```

* * *

`stud.addStudent("Joe", 23, 100);`不会将任何学生添加到您的课程中。 `stud`是一个完全不同的类的实例，`Student`的实现`Student`不在您发布的代码中。

调用`addStudent`方法`cour`而不是 for`stud`

```
cour.addStudent("Joe", 23, 100); 
```

反而

* * *

我还想补充一点，您的代码中有很多奇怪的元素，其中一些人在评论中提出了。把它们都列出来会很乏味。我会仔细检查一下，以确保您没有做多余的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:22:28.467

试试这个例如：

课程类别：

```
import java.util.ArrayList;
import java.util.List;

public class Course {

private List<Student> students = new ArrayList<Student>();
private String teacherName;
private String subjectName;

public Course(String subjectName, String teacherName) {
    this.subjectName = subjectName;
    this.teacherName = teacherName;
}

public void addStudent(Student student) {
    students.add(student);
}

public float getAverageGrade() {
    float grade = 0;
    for (Student student : students) {
        grade += student.getGrade();
    }
    return grade / students.size();
}

public void printCourse() {
    System.out.println("Course "+subjectName+" taught by "+teacherName);
    System.out.println("Students:");
    printStudents();
    System.out.println("Aberage grade: "+getAverageGrade());
}

public void printStudents() {
    for (Student student : students) {
        System.out.println(student.getName()+"\t age "+student.getAge()+" \t grade "+student.getGrade());
    }
}
} 
```

学生班级：

```
public class Student {

private String name;
private int age;
private int grade;

public Student(String name, int age, int grade) {
    this.grade = grade;
    this.age = age;
    this.grade = grade;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public int getAge() {
    return age;
}

public void setAge(int age) {
    this.age = age;
}

public int getGrade() {
    return grade;
}

public void setGrade(int grade) {
    this.grade = grade;
}

} 
```

# php - 在没有框架的情况下使用zend框架组件并在eclipse中获取类型提示

> ID：15436819
> 
> 赞同：0
> 
> 时间：2013-03-15T15:57:36.090
> 
> 标签：php, eclipse, zend-framework

使用eclipse juno，我想在没有框架的项目中使用一些ZF组件。

我想我可以将它们与 require_once 语句一起使用，而无需类自动加载器。我将 ZF 源代码放在包含路径中。但是如果我使用 require_once 来导入类，eclipse 不会输入 ZF 类。但是，如果我使用“使用”语句，则 eclipse 是类型提示。

我希望在我写完“require_once 'Zend/ ...”后输入提示，这没有发生。但是，如果我输入“使用 Zend”，它的输入提示是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:08:32.517

我将 zend 框架源代码转移到 eclipse 工作区中，并且它起作用了。不知道为什么它在外面不起作用。ZF 是一个外部库，应该在工作区之外。反正我的问题解决了。我使用 ZF 的两份副本进行类型提示。

# c++ - 对于循环变量似乎无缘无故下地狱？

> ID：15436820
> 
> 赞同：0
> 
> 时间：2013-03-15T15:57:36.100
> 
> 标签：c++, loops, for-loop, corruption

我遇到了一个似乎非常晦涩的错误。我的程序涉及长时间循环一些代码，并最终在循环中运行一些函数。奇怪的是，在我运行一个特定的函数之后，我的 for 循环变量“z”从 3200 跳到了 1059760811 附近的某个地方（它每次都会改变）。该函数自然不会使用循环变量，所以老实说我不知道​​这里发生了什么。

整个代码太长，这里就不贴了，所以我会尽量只贴重要的部分，先贴相关函数，再贴for循环：

```
void enterdata(float dpoint,int num){
        autodata[num] += dpoint;
    }
float autocorr(){
        float autocorrelation = 0;
        for(int a = 0; a<SIZEX; a++)
        {
            for(int b = 0; b<SIZEY; b++)
            {
                if(grid[a][b] == reference[a][b]){autocorrelation++;}
            }
        }
        autocorrelation /= SIZEX*SIZEY;
        autocorrelation -= 0.333333333333;
        return autocorrelation;
    }

for (long z = 0.0; z<MAXTIME; z++)
    {
        for (long k=0; k<TIMESTEP; k++)
        {
            grid.pairswap();
        }
        if (z == autostart_time)
        {
            grid.getreference();
            signal = 1; // signal is used in the next if statement to verify that the autocorrelation has a reference.
        }
        if ((z*10)%dataint == 0)
        {
            if (signal == 1) {
            //!!! this is the important segment!!!
            cout << z << " before\n";
            grid.enterdata(grid.autocorr(),count);
            cout << z << " after\n";
            cout << grid.autocorr() << " (number returned by function)\n";
            count++;
            }
        }
        if (z%(dataint*10) == 0) { dataint *= 10; }
    } 
```

从代码中标记的“重要部分”，这是我的输出：

3200 之前，1059760811 之后，0.666667（函数返回的数字）

显然，在函数期间，“z”变量发生了一些奇怪的事情。我也确信它是 enterdata 函数，而不是来自单独运行的测试的自相关函数。

我不知道如何解决这个问题，或者发生了什么。帮助？！？！？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:25:44.087

看起来您的函数 中可能存在*堆栈溢出*问题。`enterdata`

在数组开始之前或数组末尾写入会导致未定义的行为，包括覆盖已经在堆栈上的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:25:52.260

@WhozCraig 是对的，被调用函数覆盖堆栈似乎是最可能的解释。

您应该能够在调试器中找到如何中断`any change to the memory at address of z`，这将很快提供准确的诊断。

对于 Visual Studio（例如），请参见[此处](http://msdn.microsoft.com/en-us/library/350dyxd0%28v=vs.100%29.aspx)。

# sql-server - 使用 xquery 转换为 html？

> ID：15436826
> 
> 赞同：1
> 
> 时间：2013-03-15T15:57:47.030
> 
> 标签：sql-server, xml, sql-server-2008, xquery

我有以下用于数据库电子邮件的 T-Sql。

```
-- create proc TableToHtml @table varchar(max) as
declare @table varchar(max) = '(select 1 a, ''one'' b union all select 2, ''two'') t '
declare @sql varchar(max) = '
    declare @xml xml = (
        select * from ' + @table + ' 
        for xml path(''tr''), root(''table'')
    ); 
    select @xml'
declare @tmp table (x xml)
insert into @tmp exec(@sql) 
declare @x xml = (select x from @tmp)
select @x 
```

它返回

```
<table>
  <tr>
    <a>1</a>
    <b>one</b>
  </tr>
  <tr>
    <a>2</a>
    <b>two</b>
  </tr>
</table> 
```

是否可以编写 xquery 让它返回以下 html？

```
<table>
  <tr>
    <th>a</th>
    <th>b</th>
  </tr>
  <tr>
    <td>1</td>
    <td>one</td>
  </tr>
  <tr>
    <td>2</td>
    <td>two</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:35:16.790

我想出了一个不那么黑客的东西。唯一的问题是它将创建`<td />`而不是`<td></td>`如果值为空。当电子邮件发送到一些旧的 Outlook 客户端时，它会导致一些布局问题。

```
declare @table varchar(max) = '(select 1 a, ''one'' b union all select 2, ''two'') t '
declare @sql varchar(max) = '
    declare @xml xml = (
        select * from ' + @table + ' 
        for xml path(''tr''), root(''table'')
    ); 
    select @xml'
declare @tmp table (x xml)
insert into @tmp exec(@sql) 
declare @x xml = (select x from @tmp)
select @x.query('<body>
<table>
  <tr>
    {for $c in /table/tr[1]/* return element th { local-name($c) } }
  </tr>
  {
    for $r in /table/* 
    return element tr { for $c in $r/* return element td { data($c) } } 
  }
</table>
</body>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:08:32.307

**重大黑客警报！**

可能有一种更优雅的方法可以做到这一点，但这里是快速破解：

```
declare @xml xml = (
    select * from (
        select 'a' + '</th><th>' + 'b' as th, null as td
        union all
        select null, '1' + '</td><td>' + 'one'    
        union all
        select null, '2' + '</td><td>' + 'two'    
    ) t
    for xml path('tr'), root('table')
); 
select cast(replace(replace(cast(@xml as varchar(max)), '&lt;/th&gt;&lt;th&gt;', '</th><th>'), '&lt;/td&gt;&lt;td&gt;', '</td><td>') as xml) 
```

**输出：**

```
<table>
  <tr>
    <th>a</th>
    <th>b</th>
  </tr>
  <tr>
    <td>1</td>
    <td>one</td>
  </tr>
  <tr>
    <td>2</td>
    <td>two</td>
  </tr>
</table> 
```

**黑客列表：**

*   使用空值在同一“列”中获取 th 和 td
*   显式添加标题值 a 和 b
*   连接列值并在中间显式放置结束和开始标记
*   将xml转换为varchar
*   用尖括号版本替换这些标签的净化版本
*   转换回xml

其中大部分可能可以重构为使用变量，可能是从您的输入/数据中收集的。

**笔记：**

一般来说，您应该让您的表示层为您创建 html。您可能可以在您的数据库中创建一个通用函数来从表中创建 html，但是已经有很多很棒的表示类、控件等旨在执行此操作。您的应用程序几乎总是可以比您的数据库更好地扩展。

# javascript - 神秘的 Javascript 代码行

> ID：15436829
> 
> 赞同：1
> 
> 时间：2013-03-15T15:57:52.103
> 
> 标签：javascript, web

我正在调查一些使用内部开发的 Javascript 库的软件中的错误。我正在处理的错误出现在下面的行中：

```
GetVal1("dispLetter")(GetVal1("dispLetter").selectedIndex).value + '~' + (bFinal == true ? '1' : '0'); 
```

我最初不确定这条线是否有效，但是，根据源代码控制，这条线就在附近，因为该文件是在错误相对较新时创建的。当我调试时，我发现这条线抛出了一个错误，上面写着`GetVal1(...) is not a function`. 我再次检查以确认包含函数定义的 Javascript 文件，标题如下所示：

```
function GetVal1(strHTMLId) 
```

所以，我想我的问题是，这一行是有效的 Javascript 代码吗？有什么可以告诉您可能引发错误的吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:36:59.990

```
GetVal1("dispLetter")(GetVal1("dispLetter").selectedIndex).value + ... 
```

执行以下操作：

*   `GetVal1`使用参数调用`"dispLetter"`。
*   再次调用`GetVal1`参数`"dispLetter"`。
*   检索`selectedIndex`第二次调用的返回值的属性`GetVal1`
*   `GetVal1`使用一个参数调用 的第一次调用的返回值，即 的值`selectedIndex`。这使您的情况失败，并抱怨该值不可调用。
*   返回值的`value`属性被取消引用。字符串连接如下。

换句话说，这段代码似乎假设第一次调用`GetVal1("dispLetter")`返回一个函数（这是不寻常的），第二次调用返回一个具有属性的对象`selectedIndex`（这是不寻常的，因为第一次调用返回一个函数）。

一些想法：

*   如果`new`该行之前有一个关键字。然后第一次调用将是构造函数调用。出乎意料的是，构造函数调用会返回一个函数，而非构造函数调用则不会。

*   如果前一行（或现在）有一个尾随句点，`GetVal1`则将引用（或现在引用）某个对象的属性。不过，我闻到了违反命名约定的味道，if`GetVal1`是一个对象属性。

*   全局`GetVal1`被（或最近不再被）同名函数遮蔽。再一次，我闻到了违反命名约定的味道。

*   最有可能的是，`GetVal1`它本身已经改变了。当将此字符串作为第一个参数给出时，验证`GetVal1`可以返回一个函数。

*   也许绑定到函数的*状态*`GetVal1`已经改变（比如说，在代码之前的某个地方又多了一个调用。不过，如果这个函数在每次调用时返回具有相同参数的不同类型的对象，这很可能是一个设计错误。但话又说回来，代码中的某处可能*存在*设计错误或命名违规。

*   另一个合理的解释是，这条线从一开始就存在，但以前从未达到过。在这种情况下，它可能一直都是错误的。

# vb.net - 重新查询子窗体 Visual Basic

> ID：15436830
> 
> 赞同：1
> 
> 时间：2013-03-15T15:57:58.747
> 
> 标签：vb.net, ms-access, vba

我只是想知道是否有人可以帮助我的子表单不请求。我的目标是，一旦将记录添加到我的子表单中，我就不必按下“全部刷新”按钮，我希望它自动刷新。我在主窗体的插入后和子窗体上尝试了以下编码，但它没有奏效。除了我尝试的方式之外，如果有人对如何做到这一点有任何其他想法，那就太好了，谢谢。

Creations 是表单的名称。

```
Private Sub Form_AfterUpdate()
    Form![Creations].Requery
End Sub 
```

和

```
Private Sub Form_AfterUpdate
    DoCmd.Close acForm, "Creations", acSaveNo
    DoCmd.OpenForm "Creations
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:08:25.847

如果您通过代码添加记录，则重新查询应进入添加记录的过程。大多数事件不是由对数据的编程更改触发的。

对于在子窗体中运行的代码：

```
Me.Requery 
```

主要形式：

```
Me.Subformcontrolname.Form.Requery 
```

别处

```
Forms!Mainformname.Subformcontrolname.Form.Requery 
```

# mysql - 维护价格表每天都在变化

> ID：15436834
> 
> 赞同：0
> 
> 时间：2013-03-15T15:58:15.780
> 
> 标签：mysql, database, database-design

> 州 (st_id,st_name)
> 区 (d_id,d_name,st_id[FK])
> 产品 (pid,pnme)
> 价格 (max_price,min_price,pid[FK],d_id[FK])

![在此处输入图像描述](../Images/aeb432a6da3304814bad80dc96d43aea.png)

1.）这是我的表格结构，我想显示 5 个州及其地区的产品价格，但在价格表中，我为每个地区重复产品（超过 10 个）。

我的价格有什么问题，您能否给出一个使其正常化的想法..

2.）现在我正计划在价格表中添加日期戳（开始日期）字段，以便我可以维护历史价格表，但是我如何在每个日期不重复产品（如下所示）的情况下做到这一点..任何减少 tbl 行的更好解决方案

```
_______________________________________
product| price |district|date(mm/dd/yy)| 
_______|_______|________|______________|
fan      200   delhi    3/15/2013
speaker  400   delhi    3/15/2013
fan      210   chenni   3/15/2013
speaker  403   chenni   3/15/2013
fan      200   delhi    3/16/2013
fan      210   chenni   3/16/2013 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:30:10.247

1) 您的表设计没有什么问题 - 但是，示例数据没有意义，因为产品 1 和 111 区有重复。您可能希望在 pid 和 d_id 上创建复合主键。

2）同样，桌子设计没什么问题；您可能会考虑仅在发生更改时输入数据，以便检索给定日期的价格会搜索所需数据之前的最后一条记录。这减小了表的大小。

一般要点：请选择一个命名约定并遵守它 - 您使用 pid 和 d_id（一个带下划线，一个不带下划线）；一般来说，我更喜欢描述性更强的列名，但一致性是关键。

此外，只要数据不是冗余的，大表也没有问题。您的设计似乎没有冗余。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:36:09.523

> 1.）这是我的表格结构，我想显示 5 个州及其地区的产品价格，但在价格表中，我为每个地区重复产品（超过 10 个）。

如果您在所有这些地区提供所有产品，并且价格取决于产品在哪个地区销售，那么只有在每个地区重复该产品才有意义。

> 我的价格有什么问题，您能否给出一个使其正常化的想法..

*看起来*您的价格表没有合理的主键。

如果您按照这些思路构建表格。. .

```
create table prices (
  district_id integer not null references districts (district_id),
  product_id integer not null references products (product_id),
  primary key (district_id, product_id),
  min_price numeric(14,2) not null,
  max_price numeric(14,2) not null
); 
```

假设最低和最高产品价格因地区而异，您将在 5NF 中获得一张表。但是你的样本数据不可能适合它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:17:36.727

1）在您的价格（价格范围）表中，我不明白为什么 (d_id, pid) 重复？应该只有一个价格范围，除非您在表格中添加了生效日期列。

2) 你可以有一个未来价格表、一个当前价格表和一个历史价格表。这允许您提前输入价格变化，保持当前价格表简短，并允许您在需要时不频繁地获取历史价格。您的应用程序代码维护这些价格表之间的关系。

由于您定义了州和地区，因此我不确定您的其他价格表中的城市来自哪里。

# mysql - 使用非特定外键；级联不同的行

> ID：15436837
> 
> 赞同：0
> 
> 时间：2013-03-15T15:58:23.473
> 
> 标签：mysql, cascade

假设我有两个称为`Table1(Id, name)`and的表`Table2(Id, nameClean)`。他们共享`Id`s（外键）。我想对其进行设置，以便如果您更改名称（而不是外键），它将通过一个函数级联并运行名称以创建`nameClean`，然后将其存储到`Table2`.

我已经考虑过做一个`onUpdate`and `onInsert`on the`Table1`但这使得当有人看着`Table2`它时很难知道`nameClean`来自哪里。如果`nameClean`并且`name`是准确的，那么将这些作为外键很容易，我可以做一个很好的级联效果。

那么有没有办法将不同的列级联然后外键或更好的方法来进行`Table2`自动更新并连接/列出触发器`Table1`？

# jquery - 浏览器中加载的图像不适合（html5+jquery）

> ID：15436838
> 
> 赞同：2
> 
> 时间：2013-03-15T15:58:23.877
> 
> 标签：jquery, image, html, load, filereader

我正在尝试做一些简单的事情，但我有一个小问题。

我想在浏览器中打开图像，以获取该图像的实际大小，然后调整图像大小以适合容器（600px）。这是我所做的：http: [//jsfiddle.net/amok/DUNL9/1/](http://jsfiddle.net/amok/DUNL9/1/) 但这是问题所在 - 有时第一张图片加载不正确（或速度不够快），我无法获得宽度所以这个代码不运行：

```
$('#photo').css("max-width", "600px") 
```

试图捕捉文件完全加载的时刻：

```
$('#photo').load(function () {... 
```

，但随后每个打开的图像都出现在某种循环中（当您添加第二张图像时，您可以在警报弹出窗口中看到它）并且不知道如何解决这个问题。 [http://jsfiddle.net/amok/DUNL9/2/](http://jsfiddle.net/amok/DUNL9/2/)

第二个版本运行良好，只是这个所有旧图像的循环有点烦人。希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:06:07.680

你应该看看[https://stackoverflow.com/a/7306807/587536](https://stackoverflow.com/a/7306807/587536)

```
$(document).waitForImages(function() {
   // Images Loaded.
   $('#photo').css("max-width", "600px")
}); 
```

# java - 处理 / box2d - 使用 setTransform() 设置对象的位置未按预期工作

> ID：15436841
> 
> 赞同：1
> 
> 时间：2013-03-15T15:58:25.297
> 
> 标签：java, box2d, processing, jbox2d

我正在使用处理和 box2d 制作 2d 游戏。在我的游戏中，我有一个对象`targetBox`是`Box`. 在游戏开始时`targetBox`出现并停留在跷跷板上。游戏的目标是使用弹弓在跷跷板上发射其他盒子并将其发射`targetBox`到窗台上。如果玩家错过了窗台，盒子将降落在一个区域，99% 的时间都不会是跷跷板。

我正在尝试实现允许玩家通过按“r”或“R”将盒子重置到其原始位置（在跷跷板上）的功能。

`targetBox`最初在函数中添加到 box2d 世界中`draw()`：`targetBox.display(true);`

如果按下“r”或“R”...

```
if(key == 'R' || key == 'r')
{
    targetBox.reset();
} 
```

...调用类的重置功能`Box`：

```
public void reset()
{
    body.setTransform(new Vec2(width/2+75, height-70), body.getAngle());
    // width and height are same as values given to targetBox when it's created
} 
```

在游戏中，当“r”或“R”被按下时，`targetBox`会消失并且不会回到原来的位置。我对处理或box2d不太熟悉。有谁知道为什么会这样？帮助表示赞赏。

**编辑**- 添加更多代码：

```
public class Main extends PApplet 
{

public static void main(String[] args) 
{
    PApplet.main(new String[] { "Main" });
}

PBox2D box2d;
Box targetBox;

public void setup() 
{
    size(800, 600);
    smooth();
    // initialize box2d and world
    box2d = new PBox2D(this);
    box2d.createWorld();
    // targetBox to get on ledges
    targetBox = new Box(width/2+75, height-70); 
}

public void draw() 
{
    background(255);
    // always step through time
    box2d.step();
    // draw the targetBox
    targetBox.display(true);
}

public void keyPressed()
{
    if(key == 'R' || key == 'r')
    {
        targetBox.reset();
    }
}

// a class that represents a box
class Box 
{
    // We need to keep track of a Body and a width and height
    Body body;
    FixtureDef fd;
    float w;
    float h;

    // Constructor
    Box(float X, float Y) 
    {
        float x = X;
        float y = Y;
        w = 24;
        h = 24;
        // Add the box to the box2d world
        makeBody(new Vec2(x,y),w,h);
    }

    // This function removes the particle from the box2d world
    public void killBody() 
    {
        box2d.destroyBody(body);
    }

    boolean contains(float x, float y) 
    {
        Vec2 worldPoint = box2d.coordPixelsToWorld(x, y);
        Fixture f = body.getFixtureList();
        boolean inside = f.testPoint(worldPoint);
        return inside;
    }

    // Drawing the box
    public void display(boolean isFirst)
    {
        // We look at each body and get its screen position
        Vec2 pos = box2d.getBodyPixelCoord(body);
        // Get its angle of rotation
        float a = body.getAngle();

        if(isFirst == true)
        {
            rectMode(PConstants.CENTER);
            pushMatrix();
            translate(pos.x,pos.y);
            rotate(a);
            fill(255,0,0);
            stroke(0);
            rect(0,0,w,h);
            popMatrix();
        }
        else
        {
            rectMode(PConstants.CENTER);
            pushMatrix();
            translate(pos.x,pos.y);
            rotate(a);
            fill(175);
            stroke(0);
            rect(0,0,w,h);
            popMatrix();
        }
    }

    // This function adds the rectangle to the box2d world
    public void makeBody(Vec2 center, float w_, float h_) 
    {
        // Define and create the body
        BodyDef bd = new BodyDef();
        bd.type = BodyType.DYNAMIC;
        bd.position.set(box2d.coordPixelsToWorld(center));
        body = box2d.createBody(bd);

        // Define a polygon (this is what we use for a rectangle)
        PolygonShape sd = new PolygonShape();
        float box2dW = box2d.scalarPixelsToWorld(w_/2);
        float box2dH = box2d.scalarPixelsToWorld(h_/2);
        sd.setAsBox(box2dW, box2dH);

        // Define a fixture
        fd = new FixtureDef();
        fd.shape = sd;
        // Parameters that affect physics
        fd.density = 2.5f;
        fd.friction = 2f;
        fd.restitution = 0.2f;

        body.createFixture(fd);
        //body.setMassFromShapes();

        // Give it some initial random velocity
        body.setLinearVelocity(new Vec2(random(-5, 5), random(2, 5)));
        body.setAngularVelocity(random(-5, 5));
    }

    // reset box to initial position
    public void reset()
    {
        body.setTransform(new Vec2(width/2+75, height-70), body.getAngle());
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-01T17:04:53.017

我研究了这个函数，它采用**世界空间形式**的坐标。这意味着如果您使用**屏幕窗体**坐标，您不会收到错误，但它会在 box2d 世界中的任何坐标处传送它。您必须将您想要的屏幕坐标转换为空间坐标，如下所示：

```
 body.setTransform(box2d.coordPixelsToWorld(x,y),0); 
```

# typescript - 如何将 Fancybox 与 Durandal en TypeScript 结合使用

> ID：15436844
> 
> 赞同：1
> 
> 时间：2013-03-15T15:58:27.543
> 
> 标签：typescript, fancybox-2, durandal, hottowel

我正忙于使用 John Papa 的 Hot Towel 模板进行原型设计和开发。我没有使用 Javascript，而是使用 TypeScript 并遇到了一个问题。

当用户单击 SPA 中的图像时，我希望图像以花式框弹出。但是我无法实现这一点。我想我把我的fancybox代码放在de Activate函数中，因为每次加载视图时都会调用它（我在这里可能是错的）。

但我还发现 Fiddler 在 .html 之前加载了 de .js（ModelView），这意味着 viewmodel 无法调整 .html（我在这里也可能错了）。

我将发布视图和模型。

正如我在 Chrome 或 Fiddler 中所说，所有 javascript 库都已正确加载。

**看法**

```
<div>
    <h1>Details</h1>
    <label data-bind="click: vm.test">klik me</label>
    <a class="fancybox-thumb" rel="fancybox-thumb" href="" title="Porth Nanven (MarcElliott)">
        <img src="" alt="" />
    </a>
</div> 
```

**模型视图**

```
/// <reference path="../durandal/durandal.d.ts" />
/// <reference path="../../Scripts/knockout.d.ts" />
/// <reference path="../../Scripts/fancybox.d.ts" />

import app = module('durandal/app');
import logger = module('services/logger');
import services = module('services/dataservice');

var dataservice;

export var vm = {
    newCustomer: ko.observable(""),
    customers: ko.observableArray(),
    test:test,
    includeArchived: ko.observable(false) //,
    //addItem: addItem,
   // edit: edit,
    //completeEdit: completeEdit,
   // removeItem: removeItem,
   // archiveCompletedItems: archiveCompletedItems,
   // purge: purge,
   // reset: reset
};
//start();

function test() {
    alert("dsd");
}

function start() {
    //initialize viewmodel

    //initialize fancybox
    function test() {
        $(".fancybox-thumb").fancybox({
            prevEffect: 'none',
            nextEffect: 'none',
            helper: {
                title: {
                    type: 'outside'
                },
                thumbs: {
                    width: 50,
                    height: 50
                }
            }
        });
    }

    $(document).ready(function () {
        test();
    });

    //vm.includeArchived.subscribe(get

    //dataservice = new services.Dataservice(); //create a new instance of the dataservice
    //logger.log("Collecting data", null, 'details', true);

}

export function activate() {

   $(".fancybox-thumb").fancybox({
        prevEffect: 'none',
        nextEffect: 'none',
        helper: {
            title: {
                type: 'outside'
            },
            thumbs: {
                width: 50,
                height: 50
            }
        }
    });

    logger.log('Details view activated', null, 'details', true);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T00:06:19.623

要连接 DOM，您需要公开“viewAttached”方法。以下是 Durandal 在组合视图时将调用的前三个事件：

1.  canActivate（查找 true 或 false 的返回值）
2.  激活（如果您返回一个承诺，将不会加载视图，并将等待承诺解决）
3.  viewAttached（在这里，您处于视图和视图模型绑定在一起的位置，因此您可以在此处执行 jquery 和 Fancybox 的操作）。

这是否回答你的问题？因为打字稿与它无关。

公开上述函数如下所示：

```
\\any viewmodel that implements the revealing module pattern
define(function(require)){

return{
   canActivate: function(){ return true;},
   activate: function(){},
   viewAttached: function(){}
}
}; 
```

# android - 如何制作视频库

> ID：15436850
> 
> 赞同：-1
> 
> 时间：2013-03-15T15:58:52.030
> 
> 标签：android, android-layout

我目前有一个应用程序可以拍摄视频并将它们存储在 sdcard 上。我现在想做的是有另一个意图将这些视频组织在不同的画廊中。我还希望用户可以在其中创建新画廊并将任何视频广告到任何文件夹。

我该怎么做。我有一个想法，但我不太确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:11:33.737

您必须在 mediastore 中查询视频和缩略图以及其他与视频相关的信息。然后您可以使用列表视图或网格视图来显示内容。

看看这里。[http://www.androidcookbook.info/android-media/full-mediastore-video-example.html](http://www.androidcookbook.info/android-media/full-mediastore-video-example.html)

# ios - Objective-C：如何声明/定义 tableView 上使用的方法

> ID：15436851
> 
> 赞同：0
> 
> 时间：2013-03-15T15:58:56.703
> 
> 标签：ios, objective-c, uitableview

我最初在 a 中选择多行的问题`UITableView`已在[此](https://stackoverflow.com/questions/6057819/didselectrowatindexpath-selecting-more-than-one-row-at-a-time)问题中得到解答。但答案让我无法独自继续下去，因为我对 Objective C 和 iOS 开发非常陌生。

按照[daxnitro](https://stackoverflow.com/users/760958/daxnitro)的回答，我想实现他/她建议的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([tableView indexPathIsSelected:indexPath]) {
        [tableView removeIndexPathFromSelection:indexPath];
    } else {
        [tableView addIndexPathToSelection:indexPath];
    }
    // Update the cell's appearance somewhere here
    [tableView deselectRowAtIndexPath:indexPath animated:NO];
} 
```

我仍然需要这些方法，我认为我可以这样做`indexPathIsSelected`（例如）这样：

```
@interface MyTableViewController ()
- (BOOL)indexPathIsSelected:(NSIndexPath *)indexPath;
@end

@implementation MyTableViewController

// ...

- (BOOL)indexPathIsSelected:(NSIndexPath *)indexPath
{
    BOOL bIsSelected = NO;
    // ...
    return bIsSelected;
}
@end 
```

但这不起作用。错误消息是：*“UITableView”没有可见的@interface 声明选择器“indexPathIsSelected:”*注意：如果我在.h 文件的界面中声明方法，也会发生同样的情况。

现在，让我感到困惑的是：`[tableView indexPathIsSelected:indexPath]`以某种方式调用`tableView`对象，我什至不知道为什么。这是我在方法声明/定义中必须考虑的事情吗？我现在真的很愚蠢，我什至不能通过看到它的调用来编写一个方法。

如何正确定义和声明方法`indexPathIsSelected`，以便正确使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:07:52.817

在您的`didSelectRowAtIndexPath`中，变量`tableView`是 a `UITableView`。

您的实现`indexPathIsSelected`在类`MyTableViewController`中，这*可能是*一个`UITableViewController`.

`UITableViewController`并且`UITableView`是不同的类别。

所以你找不到方法`indexPathIsSelected`，`UITableView`因为它没有在那里实现，`MyTableViewController`它是在不同的类上实现的。

所以...我将进行有根据的猜测，并假设这`didSelectRowAtIndexPath`是课堂的一部分`MyTableViewController`。如果是这种情况，那么

```
[self indexPathIsSelected:indexPath] 
```

可能是答案（即调用`indexPathIsSelected`而`self`不是表视图）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:06:20.533

您看到的错误消息是问题的关键。该方法`indexPathIsSelected`在您的自定义类中实现`MyTableViewController`。但是，您拥有的 UITableView 显然仍然是基本的`UITableView`. 至少您需要进入情节提要并将表格视图控制器对象的自定义类设置为`MyTableViewController`.

为此，请打开情节提要（或 nib）并选择表格视图控制器。然后在身份检查器中（通常在右侧），在自定义类下，`MyTableViewController`从下拉列表中选择。

# c# - 根据一些突出显示datadridview c#中的特定行

> ID：15436852
> 
> 赞同：0
> 
> 时间：2013-03-15T15:58:58.090
> 
> 标签：c#

我正在 Visual Studio 中开发桌面应用程序。我希望我的 datagridview 突出显示某些单元格的值不在特定范围内的行。例如，如果我在行的 X 列中输入一个值，并且该值不在 5 和 8 之间，我希望该行以另一种颜色显示为红色。

请问有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:19:43.210

```
 private void dataGridView1_CellValueChanged(object sender, DataGridViewCellEventArgs e)
    {
        if (e.RowIndex == -1) return;

        int CellValue;
        if (int.TryParse(dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString(),out CellValue))
        {
            if (CellValue < 5 && CellValue > 8)
            {
                dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Style = new DataGridViewCellStyle() { ForeColor = Color.Red };
            }

        } 
```

使用事件查看哪个单元格发生了变化，并通过 CellSytle 类操作布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:16:40.823

我知道 vb.net，所以语法会有点不同，但看起来像这样

```
 For i As Integer = 0 To datagrid.Attributes.Count - 1

                If somecondtion Then
                    datagrid.Columns.Item(i).CellStyle.BackColor = Color.somecolor
                Else
                    datagrid.Columns.Item(i).CellStyle.BackColor = Color.othercolor
                End If
            Next 
```

# angularjs - Sublime Text 2：基于上下文的不同语言突出显示？（网络风暴）

> ID：15436858
> 
> 赞同：15
> 
> 时间：2013-03-15T15:59:15.953
> 
> 标签：angularjs, sublimetext2, webstorm

我在[Egghead.io](http://www.egghead.io)上观看了一些关于 AngularJS 的视频。视频的创建者使用 Webstorm（而且，我相信，为他们工作）。我注意到的一个特点是他可以在不同的范围或引号内设置不同的语法高亮。因此，在如下代码中（来自 AngularJS 指令）

```
return {
    template: '<div>something</div>',
    //         ^^^ these guys ^^^
} 
```

...他可以得到引号的内部以突出显示为 HTML。

我使用*Sublime Text 2*，并且非常喜欢它。是否有现有的 Sublime 功能/插件可以处理这样的情况？如果不是，那么使用 Sublime Text 2 API 在技术上是否可行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T20:33:48.183

我不认为它是内置的，但它肯定是可能的。我一直在用 graphviz 做一些工作，并想做类似的事情。可以使用类似 html 的语法生成标签。无论如何，我玩弄了该`.tmLanguage`文件并添加了一个新模式以匹配 html 类条目有效的上下文（我寻找`label = <`）。我用于捕获的模式不是那么好，但对我来说效果很好。这给了我以下内容，我认为这与您正在寻找的内容相似。

![演示](../Images/27a85bb65ccc4ce19156bc5b3b421e01.png)

我对 AngularJS 一无所知，所以我无法为您提供任何具体的帮助，但这当然是可能的。请注意，在下图中，最后一个`<table></table>`只是为了显示突出显示不会在那里发生。

编辑：

忘记在原始帖子中包含此内容，但这是我更新的 tmLangauage 文件。第一个模式是我添加的（[链接](https://gist.github.com/skuroda/5173451#file-gistfile1-json-L11)）。我使用[PlistJsonConverter](https://github.com/facelessuser/PlistJsonConverter)从 JSON 转到 plist，然后将文件保存为`.tmLanguage`. 希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-27T22:38:15.943

@skuroda 是对的，我用一个附加插件实现了@skuroda 的代码，以便在 AngularJS 指令 JS 文件中轻松编辑 HTML。结果是在指令 JS 文件中突出显示 HTML 语法，以及在编辑模板时删除与字符串相关的分隔符的附加功能...... [Sublime AngularJS HTML 模板插件](https://github.com/gitsome/sublime_angular_templates)

# zend-framework - 带有 smarty 的复杂 foreach 以显示引导轮播

> ID：15436865
> 
> 赞同：0
> 
> 时间：2013-03-15T15:59:26.363
> 
> 标签：zend-framework, twitter-bootstrap, smarty

我将实现 twitter bootstrap 的轮播，以便一次显示五个项目。我的系统使用模板引擎 smarty。

我已经熟悉 smarty 基础知识了。以下代码将显示我的所有项目：

```
<ul class="thumbnails">
{foreach $items as $item}
    <li class="span2">
        <div class="caption">
            <h5>{$item.title}</h5>
        </div>
        <div class="thumbnail">
            <img src="{$item.image}" alt="">
        </div>
    </li>        
{/foreach}
</ul> 
```

不幸的是，twitter bootstrap 的轮播需要将所有项目分成块，如下所示：

```
<ul class="thumbnails">
    <div class="item active">
        <ul class="thumbnails">
            <li class="span2 offset1">...</li>
            <li class="span2">...</li>
            <li class="span2">...</li>
            <li class="span2">...</li>
            <li class="span2">...</li>
        </ul>
    </div>
    <div class="item">
        <ul class="thumbnails">
            <li class="span2 offset1">...</li>
            <li class="span2">...</li>
            <li class="span2">...</li>
            <li class="span2">...</li>
            <li class="span2">...</li>
        </ul>
    </div>
    ...
  </ul> 
```

我如何通过使用 smarty 的 foreach 循环来实现这一点：

*   将 5 个项目放入一个 div.item，接下来的 5 个项目放入下一个 div.item，依此类推
*   第一个 div.item 应该让类“活动”
*   每个 div.item 中的第一项应该获得类 '.offset1'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T17:29:38.763

Smarty 定义了一些神奇的变量，让您可以查看循环执行了多少次（有关所有详细信息，请参阅[文档`{foreach}`](http://www.smarty.net/docs/en/language.function.foreach.tpl)）。

在您的情况下，您要检查：

*   `{$item@first}`打开第一个活动的 div.item
*   `{$item@iteration is div by 5}`关闭和打开下一个 div.item，并给它的第一个 li`offset1`类
*   `{$item@last}`关闭最后一个 div.item 是否可以被 5 整除

# c# - 关于 C# 中的集合初始化器

> ID：15436866
> 
> 赞同：3
> 
> 时间：2013-03-15T15:59:26.597
> 
> 标签：c#, collections, initializer

我承认我对 c# 的经验还很远，所以这可能很明显，但我不得不问——这两个代码示例之间有什么区别吗？如果不明显，第一条语句在 new 运算符的末尾省略 ()。在这种情况下，有什么区别还是 () 只是多余的？

```
private static Dictionary<string, string> dict1 = new Dictionary<string, string>
{
    { "a", "A" },
    { "b", "B" }
};

private static Dictionary<string, string> dict2 = new Dictionary<string, string>()
{
    { "a", "A" },
    { "b", "B" }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T16:00:40.147

> 在这种情况下，有什么区别还是 () 只是多余的？

没有区别。`()`使用集合初始值设定项时添加是可选的，但生成的编译 IL 是相同的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T16:01:29.310

不，没有。如果您检查 IL 代码，您会发现两个构造函数调用之间没有区别：

```
IL_0028:  newobj      System.Collections.Generic.Dictionary<System.String,System.String>..ctor
IL_002D:  stloc.1     // <>g__initLocal1
IL_002E:  ldloc.1     // <>g__initLocal1
IL_002F:  ldstr       "a"
IL_0034:  ldstr       "A"
IL_0039:  callvirt    System.Collections.Generic.Dictionary<System.String,System.String>.Add
IL_003E:  ldloc.1     // <>g__initLocal1
IL_003F:  ldstr       "b"
IL_0044:  ldstr       "B"
IL_0049:  callvirt    System.Collections.Generic.Dictionary<System.String,System.String>.Add
IL_004E:  ldloc.1     // <>g__initLocal1 
```

# php - 我的代码没有返回使用 Jquery 生成的 cookie 的正确值

> ID：15436867
> 
> 赞同：1
> 
> 时间：2013-03-15T15:59:28.230
> 
> 标签：php, jquery, events, cookies

我正在尝试在 wordpress 网站上设置两种不同类型的用户、访客或参展商。为此，我的 header.php 顶部有两个链接。

```
<a href="" id="">visitor</a>
<a href="" id="">exhibitor</a> 
```

使用 jquery.cookie.js，我在我的 js 文件 main.js 中设置了一个名为 user_type 的 cookie。

```
$('a#btn-visiteur').click(function(){
    $.cookie('user_type', 'visitor', { expires: 7, path: '/' });
});
$('a#btn-exposant').click(function(){
    $.cookie('user_type', 'exhibitor', { expires: 7, path: '/' });
}); 
```

回到我的 header.php，我只想表明我的 cookie 设置正确，所以我只是在我的文件中回显 cookie。

```
<?php if(isset($_COOKIE['user_type'])){

        if($_COOKIE['user_type'] == 'visitor'){
            echo 'visitor';
        }
        if($_COOKIE['user_type'] == 'exhibitor'){
            echo 'exhibitor';
        }

} ?> 
```

使用 Firebug，我看到我的 cookie 设置正确，但我的 php 代码没有返回正确的结果。它只显示 cookie 的先前值。

我希望它可以理解我对英语不太满意。亲爱的 stackoverflow 的人们，我需要你的帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:16:33.013

设置变量后只需重新加载页面。

例子：

```
$('a#btn-visiteur').on('click',function(){
    $.cookie('user_type', 'visitor', { expires: 7, path: '/' });
    location.reload();
}); 
```

# ios - Restkit 0.20rc1 - 没有 KVC 的映射实体

> ID：15436869
> 
> 赞同：1
> 
> 时间：2013-03-15T15:59:38.167
> 
> 标签：ios, json, mapping, restkit, key-value-observing

所以我正在尝试使用 Restkit 0.20 映射没有 KVC 的 JSON 对象

### 没有 KVC 的 JSON

```
{
    "created_at": "2013-03-11T22:13:05Z",
    "facebookId": "2343434322",
    "firstname": "testuser",
    "id": 197,
    "mail": "test@gmail.com",
    "name": "test",
    "phone": "098748394",
    "sex": null,
    "twitterId": null,
    "updated_at": "2013-03-11T22:13:05Z",
    "vehiculeDescription": "car",
    "recommendCount": 0
} 
```

### 我的应用委托

```
RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:WEBSERVICE]];

// Initialize managed object store
NSURL *modelURL = [NSURL fileURLWithPath:[[NSBundle mainBundle]      pathForResource:@"KojoClient" ofType:@"momd"]];
// NOTE: Due to an iOS 5 bug, the managed object model returned is immutable.
NSManagedObjectModel *managedObjectModel = [[[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL] mutableCopy];
RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
manager.managedObjectStore = managedObjectStore;

RKEntityMapping *utilisateurMapping =
    [RKEntityMapping mappingForEntityForName:NSStringFromClass([Utilisateur class]) inManagedObjectStore:manager.managedObjectStore];
utilisateurMapping.identificationAttributes = @[@"remoteid"];
[utilisateurMapping addAttributeMappingsFromDictionary:@{
    @"remoteid": @"id",
    @"name": @"name",
    @"firstname": @"firstname",
    @"phone": @"phone",
    @"facebookid": @"facebookId",
    @"mail": @"mail",
    @"vehiculeDescription" : @"vehiculeDescription",
    @"recommendCount" : @"recommendCount",
    @"created_at": @"created_at",
    @"updated_at": @"updated_at",
    @"twitterId": @"twitterId"
 }];

/**
 Register our mappings with the provider
 */

RKResponseDescriptor* utilisateursDescriptor =
[RKResponseDescriptor responseDescriptorWithMapping:[utilisateurMapping inverseMapping]
                                        pathPattern:@"/utilisateurs"
                                            keyPath:@""
                                        statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

RKResponseDescriptor* utilisateurDescriptor =
    [RKResponseDescriptor responseDescriptorWithMapping:[utilisateurMapping inverseMapping]
                                            pathPattern:@"/utilisateurs/:remoteid"
                                            keyPath:@""
                                            statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
RKResponseDescriptor* facebookUtilisateurDescriptor =
                                            [RKResponseDescriptor responseDescriptorWithMapping:[utilisateurMapping inverseMapping]
                                            pathPattern:@"/face_utilisateurs/:facebookid"
                                            keyPath:@""
                                            statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

[manager addResponseDescriptorsFromArray:@[utilisateursDescriptor, utilisateurDescriptor, facebookUtilisateurDescriptor]];

// Serialize to JSON
manager.requestSerializationMIMEType=RKMIMETypeJSON;

/**
 Complete Core Data stack initialization
 */

[managedObjectStore createPersistentStoreCoordinator];

NSString *storePath = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"Application.sqlite"];
NSError *error;

NSPersistentStore *persistentStore = [managedObjectStore addSQLitePersistentStoreAtPath:storePath fromSeedDatabaseAtPath:nil  withConfiguration:nil options:@{NSMigratePersistentStoresAutomaticallyOption:@YES, NSInferMappingModelAutomaticallyOption:@YES} error:&error];

NSAssert(persistentStore, @"Failed to add persistent store with error: %@", error);

// Create the managed object contexts
[managedObjectStore createManagedObjectContexts];

// Configure a managed object cache to ensure we do not create duplicate objects
managedObjectStore.managedObjectCache = [[RKInMemoryManagedObjectCache alloc] initWithManagedObjectContext:managedObjectStore.persistentStoreManagedObjectContext]; 
```

问题是当我想获得我的对象时：

```
[[RKObjectManager sharedManager] getObjectsAtPath:path parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {

                 if(![[mappingResult firstObject] isKindOfClass:[Utilisateur class]]) {
                     //Dont work
                 }

             } nil]; 
```

RKMappingResult 对象没有类。

[未知类图像](http://i.imgur.com/zIHgL3P.png)

但是映射工作

> mappingResult->_keyPathToMappedObjects 的打印描述： { "" = {​​ "created_at" = "2013-03-11T22:13:05Z"; facebookid = 4567898765; 名字 = 测试；邮件=“test@gmail.com”；名称 = 测试名称；电话 = 45678976587；推荐计数 = 0; 远程ID = 197；"updated_at" = "2013-03-11T22:13:05Z"; 车辆描述 = “测试”；}; }

我不明白为什么我的对象映射没有类。

我遵循了[没有 KVO 的对象映射教程](https://github.com/RestKit/RestKit/wiki/Object-mapping)

并且无法更改服务器 JSON 样式。

### 更新 1

我尝试不使用 NSStringFromClass，不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:47:16.587

为什么你使用`[utilisateurMapping inverseMapping]`for `RKResponseDescriptor`with `RKEntityMapping`？也许如果你尝试：

```
RKResponseDescriptor* utilisateursDescriptor =
[RKResponseDescriptor responseDescriptorWithMapping:utilisateurMapping
                                        pathPattern:@"/utilisateurs"
                                            keyPath:@""
                                        statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)]; 
```

# plugins - 按条目数过滤 GWCODE 类别

> ID：15436873
> 
> 赞同：0
> 
> 时间：2013-03-15T15:59:44.033
> 
> 标签：plugins, expressionengine, categories

我在 ExpressionEngine 中为我的侧边栏使用 GWCODE 类别插件。

有没有办法只显示具有 15 个或更多条目的子 (depth_2) 类别？我知道有一个 entry_count 变量，但我不确定如何使用它来过滤输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:44:43.607

使用 entry_count 变量时，请确保将其指定为参数，否则它不会输出任何内容。

```
{exp:gwcode_categories channel="example" depth="2" entry_count="yes"}
    {if {depth} == 2 && {entry_count} >= 15}
        {cat_name}
    {/if}
{/exp:gwcode_categories} 
```

如果您指定/澄清您当前使用的代码，我可以改进上面的示例。

# javascript - 这个三元表达式有什么问题？

> ID：15436876
> 
> 赞同：-2
> 
> 时间：2013-03-15T15:59:45.453
> 
> 标签：javascript, jquery

我只是想在`display: block;`和之间切换`display: none;`。

```
($('#menu').css('display') = "block") ? $('#menu').css('display', 'none') : $('#menu').css('display', 'block'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T16:00:57.837

更改`=`为`==`

```
($('#menu').css('display') == "block") ? $('#menu').css('display', 'none') : $('#menu').css('display', 'block'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:10:15.673

您无需尝试重​​新发明轮子。jQuery 已经有一个方法可以为你做到这一点：[`.toggle()`](http://api.jquery.com/toggle/).

```
$('#menu').toggle(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:07:58.970

我会通过使用`:visible`而不是显式检查特定`display`值来进行小改动。

```
$('#menu').css('display', $('#menu').is(':visible') ? 'none' : 'block'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:01:46.420

您正在使用`=`而不是`==`进行比较。

试试这个：

```
(function(e) {e.display = e.display == 'none' ? 'block' : 'none';})(document.getElementById('menu').style); 
```

# angularjs - 在angularjs中克隆html元素

> ID：15436877
> 
> 赞同：9
> 
> 时间：2013-03-15T15:59:49.607
> 
> 标签：angularjs

我正在尝试在 angularjs 中实现拖放系统。

我希望在拖动开始时克隆拖动的对象。但是我不知道如何在angularjs中克隆一个元素及其范围和链接控制器？

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-16T12:10:20.677

不建议使用 Angular 克隆 DOM 元素，因为它通常用于拖放。相反，克隆您的对象模型。

假设您在 an 中显示项目，`<UL>`并且只有在拖动时才能看到另一个拖动的项目：

```
<ul>
    <li ng-repeat="item in items" class="{{item.shadow}}">{{item.text}}</li>
<ul>
<div ng-show="draggedItem != null">{{draggedItem.text}}</div> 
```

并在控制器中，复制要拖动到 draggedItem 中的项目：

```
$scope.items = [{text:"First"}, {text:"Second"}];
$scope.shadowItem = null; // Item at the original position
$scope.draggedItem = null; // Clone item being moved

$scope.dragStart = function(item) {
    $scope.shadowItem = item;
    $scope.draggedItem = angular.copy(item);
    item.shadow = "shadow"; // set a CSS class to change its look
    // From now on, the DIV is dragged around
}

$scope.drop = function() {
    // Save the new item position
    $scope.draggedItem = null; // Makes the dragged clone item disappear
    $scope.shadowItem.shadow = ""; // give the item its normal look back
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-28T09:57:26.327

我在包装一个克隆我的节点的库时遇到了同样的问题。这是我的解决方案：

```
angular.module('my-module')
.directive('mqAllowExternalClone', function($compile) {
  return {
    link: link,
  };

  function link(scope, elem, attr) {
    var element = elem[0];
    var original = element.cloneNode;
    element.cloneNode = patch;

    function patch(deep) {
      var clone = original.call(element, deep);

      // You can remove this two lines and the result
      //   will be more or less the same.
      // In my case I need it for other reasons
      clone.removeAttribute('mq-allow-external-clone');
      clone.cloneNode = patch;

      $compile(clone)(scope);
      return clone;
    }
  }
}); 
```

[https://gist.github.com/amatiasq/ae6fce9acf74589ef36d](https://gist.github.com/amatiasq/ae6fce9acf74589ef36d)

# powershell - 通过 GPO 部署打印机的 Powershell 启动脚本

> ID：15436878
> 
> 赞同：0
> 
> 时间：2013-03-15T15:59:50.023
> 
> 标签：powershell, gpo, startupscript

我正在尝试通过 powershell 脚本将打印机部署到我组织中的 PC。脚本本身通过组策略部署以在机器启动时运行。当测试 OU 中的机器启动时，它会一直处于等待状态，并且脚本永远不会完成。如果您手动执行该脚本，则该脚本有效。我不会详细介绍它，但直接通过组策略部署打印机不是一种选择。

Powershell 脚本

```
# Print File Server Path
$printsrv = "\\Servername\Deploy\"

# Check FTP Server Status
$file = ($env:computername + '.csv')
$num = 0
IF ((Test-Path ($printsrv + $file)) -eq $false) {
Do {
Start-Sleep -Seconds 5
$num = $num + 1
} Until ((Test-Path ($printsrv + $file)) -eq $true -or $num -eq 3)
} 
if ((Test-Path ($printsrv + $file)) -eq $false) {exit}

# Create Printers
$print = Import-Csv  ($printsrv + $file)
$num = 0
do {
(New-Object -ComObject WScript.Network).AddWindowsPrinterConnection($print.p_address[$num])
$num = $num + 1
} Until ($num -eq $print.Count)

#Set Default
$num = 0
Do {
$contains = $Print.Def_Bit[$num].Contains(1)
$Default = $print.P_Address[$num]
$num++
} until ($contains -eq $true -or $num -eq $print.Count) 
(New-Object -ComObject WScript.Network).SetDefaultPrinter($Default)
Remove-Item -Path ($printsrv + $file) 
```

CSV 文件

```
#TYPE System.Data.DataRow
"P_Address","DEF_Bit"
"\\server\printer",""
"\\server\printer","True" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:09:10.147

我发现了问题（New-Object -ComObject WScript.Network）。AddWindowsPrinterConnection 是我用 rundll32 printui.dll,PrintUIEntry /ga /n\printername 替换它的问题，它现在可以工作了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-10T14:55:42.597

您也可以通过这种方式添加打印机（静态 wmi 方法）：

```
$printClass = [wmiclass]'win32_printer'
$printClass.AddPrinterConnection($printer) 
```

我不推荐“add-printer -connectionname”。

# django-socialauth - 好的，我已经继承了 SocialAuthExceptionMiddleware，现在呢？

> ID：15436879
> 
> 赞同：1
> 
> 时间：2013-03-15T15:59:51.073
> 
> 标签：django-socialauth

我试图弄清楚如何让我的 Web 应用程序处理 AuthAlreadyAssociated 异常并告诉用户他们不能这样做。（请参阅[Django Social Auth 中的 AuthAlreadyAssociated Exception](https://stackoverflow.com/questions/13018147/authalreadyassociated-exception-in-django-social-auth)）有没有办法在不分叉 DSA 的情况下调用我的子类？

哦，[https:](https://docs.djangoproject.com/en/dev/topics/http/middleware/) //docs.djangoproject.com/en/dev/topics/http/middleware/ 嗯。

但是提供的应用程序不能用作 django 中间件类。需要看例子。

# ios - ios NSURLConnection 随机返回超时错误

> ID：15436880
> 
> 赞同：0
> 
> 时间：2013-03-15T15:59:54.407
> 
> 标签：ios, xcode

我一直在研究这个问题一段时间，似乎无法在谷歌和 ios 文档的任何地方找到解决方案。

我的应用程序发送 3 个异步请求。前两个从主线程调用，最后一个从另一个线程调用，按此顺序。它们一个接一个地发送，但它们之间的延迟相对较小。

```
//build the request url
NSURL *defaultResultsURL = [self getDefaultResultsURL];

//create the request
NSMutableURLRequest *request = 
    [NSMutableURLRequest requestWithURL:defaultResultsURL
        cachePolicy:NSURLRequestReloadIgnoringLocalCacheData
        timeoutInterval:MAX_TIMEOUT_BACKEND];

//invoke requestAllDefaultResults for all elements - invoke on main thread
defualtsResponse = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO];
[defualtsResponse scheduleInRunLoop:[NSRunLoop mainRunLoop] forMode:NSDefaultRunLoopMode];
[defualtsResponse start]; 
```

问题是，有时，并非所有时间，并且仅在我正在测试的一部 iPhone 上，并且仅在首次安装应用程序时，第一个请求在不到 5 秒内返回超时错误，这是指定的请求暂停。

我检查了后端服务器，我看到所有三个请求都已收到并已发回响应。

我确实尝试在使用发送请求之前检查当前线程是否正在运行

```
if([NSThread isMainThread]){
  defualtsResponse = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

}

但我仍然收到超时错误。

# python - 在远程 UNIX 机器上安装 Python

> ID：15436881
> 
> 赞同：2
> 
> 时间：2013-03-15T15:59:57.900
> 
> 标签：python, unix, installation, remote-access

我需要在远程 Linux 机器上运行 Python 脚本。问题是那台机器上没有安装 Python。作为一个贪婪地利用 Ubuntu 提供的用户友好工具的 Linux 新手，我不知道如何在没有数据包管理器的情况下安装它（上帝保佑 apt-get！）。我什至不知道远程机器上运行的操作系统是否基于 Debian，但我知道它没有安装 apt-get。

我使用 SSH 连接到它，拥有 root 权限，想在它上面连续运行我的脚本。

请帮我！提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T16:06:35.713

作为*普通用户*运行以下命令：

```
wget http://www.python.org/ftp/python/2.7/Python-2.7.tgz
tar xzf Python-2.7.tgz
cd Python-2.7
./configure --with-pth --with-dec-threads --with-signal-module --prefix=/opt/python-2.7
make 
```

然后作为*root*做（使用or成为*root*）：`sudo``su`

```
make install 
```

**简要说明**：

*   `wget`下载 python 源，如果你愿意，你可以安装另一个版本，也许是 python 3.x
*   `tar`解压下载的文件
*   `configure`检查所有必需的依赖项是否可用并为您自己的系统配置源代码
*   `make`开始编译/链接过程
*   `make install`将编译好的文件复制到正确的位置

在那之后，也许你需要为你的 python 可执行文件或你的 python 文件夹建立一个符号链接，这取决于你

**参考**： - 安装命令是在快速谷歌搜索后从这个[网站复制粘贴的，所以也许你需要不同的配置选项 -](http://www.geeksww.com/tutorials/web_development/python/installation/how_to_download_compile_and_install_python.php)[官方信息在这里](http://docs.python.org/2/using/unix.html#getting-and-installing-the-latest-version-of-python)

**注意**：我这个问题应该更好地放在[superuser.com](http://www.superuser.com)上（原因是这可能更适合[计算机爱好者和高级用户而不是程序员](https://stackoverflow.com/faq#dontask)，因为它不是编程问题，而是软件安装问题）

# javascript - 使用 JS 和 CSS 的页面滚动 + 内部滚动 Div

> ID：15436885
> 
> 赞同：1
> 
> 时间：2013-03-15T16:00:05.873
> 
> 标签：javascript, jquery, css

我正在尝试为我正在构建的具有内部滚动 div 的页面创建一个无缝滚动器。这是我希望它的工作方式：

1.  用户向下滚动页面，直到 scrollTop 到达 div 的顶部。
2.  div 从溢出：隐藏变为溢出：滚动。
3.  用户然后滚动通过 div，直到他们到达终点。
4.  页面再次开始滚动，并且 div 再次从 overflow:scroll 返回到 overflow:hidden。（如果他们反向滚动页面，当他们点击 div 时，它不会过早开始滚动。）

该过程应该以相同的方式反向进行。我认为使用状态可能会有所帮助。我的三个状态是**pre**、**on**和**post**。如果您通过阈值并且您的状态是**pre**，它会更改为**on**并且 div “解锁”以进行滚动。然后，当您完成滚动 div 时，它会自然地将整个页面向上推。状态从**on**切换到**post**。

我的问题是，如果你滚动得太快，浏览器不会注册这些更改，直到为时已晚，div 已经过去了。我编写了这段代码来管理转换：

```
function onScroll() {
    if (cur_coord > cap_y && 
            cap_state == 'pre') { // Pre -> On
        container.css({ 'overflow-y':'scroll'});
        $(window).scrollTop(cap_y); 
        cap_state = 'on';
    } else if (cur_coord > cap_y && 
            cap_state == 'on') { // On -> Post
        container.css({ 'overflow-y':'hidden'});
        cap_state = 'post';
    } else if (cur_coord < cap_y && 
            cap_state == 'post') { // Post -> On
        container.css({ 'overflow-y':'scroll'});
        $(window).scrollTop(cap_y);
        cap_state = 'on';
    } else if (cur_coord < cap_y &&   
            cap_state == 'on') { // On -> Pre
        container.css({ 'overflow-y': 'hidden'});
        cap_state = 'pre';
    }
} 
```

我创造了一个小提琴来玩：

[http://jsfiddle.net/vD8kQ/6/](http://jsfiddle.net/vD8kQ/6/)

有什么想法可以让这成为一种无缝的滚动体验吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:10:17.407

如果您想构建自己的滚动条，这不是一个选项。如果您不介意使用 jQuery 库... [http://manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)

# java - 获取setter方法

> ID：15436897
> 
> 赞同：0
> 
> 时间：2013-03-15T16:00:39.117
> 
> 标签：java

我正在尝试在 Java 中使用 get set 方法从一个类中获取输出值到另一个类中。第一类将结果打印为`0.0`.

这是一级。

```
Paper paperone = new Paper();
    float a = paperone.getPercentage(); 
    System.out.println("percentage " + a); 
```

这是第二类：

```
private float percentage;
    public float getPercentage() {
        return percentage; }
    public void setPercentage(float percentage) {
        this.percentage = percentage; } 
```

这是我想从中获得结果的地方：

```
int total;
total = count+count1+count2;
System.out.println("The total is : ");

setPercentage((total * 100/ 5000));
System.out.println("The percentage for: " + getPercentage() + "%"); 
```

我从正在读取的行列表中获取计数。当我从第二类打印时，我得到了正确的结果，但不是从第一类打印。有什么我做错了吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:04:23.237

```
Paper paperone = new Paper();
float a = paperone.getPercentage(); 
System.out.println("percentage " + a); 
```

您创建了一个新的`Paper`类对象。它的`float percentage`字段被初始化为`0.0f`。你不叫`setPercentage()`所以`percentage`仍然`0.0f`。

顺便说一句，使用`double`代替`float`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:05:30.783

你的`total`变量是一个`int`，所以这一行正在执行整数数学：

```
setPercentage((total * 100/ 5000)); 
```

任何`total`小于 50 的值，乘以 100 将小于 5000，整数除以 5000 的结果将为 0。

将其转换为浮点数以获得正确的结果：

```
setPercentage(((float) total * 100/ 5000)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:07:38.967

由于您在这里创建了新对象

```
Paper paperone = new Paper(); 
```

您还需要调用`setPercentage`此对象。

如果您希望类`percentage`的每个对象的字段都相同，`Paper`则将其声明更改为静态

```
private static float percentage; 
```

# javascript - 使用 Javascript/Node.js 在代码中执行 mongoimport

> ID：15436900
> 
> 赞同：9
> 
> 时间：2013-03-15T16:00:52.990
> 
> 标签：javascript, json, node.js, mongodb, mongoimport

node.js/javascript 中是否有任何库允许个人`mongoimport`在代码中使用？

据我了解，mongoimport 有点像 .exe，您必须先执行它，然后才能使用它的文本输入环境。

是否可以在我的代码中执行 mongoimport，然后在我的代码中直接解析我需要的任何命令？

我目前的算法涉及：

```
fs.appendFile('log.txt',JSON.stringify(obj, null, 2)); 
```

`JSON.stringify`obj 是一个对象，它指定使用 node.js的`res`方法（请求 HTTP 响应）解析成哪些函数

```
var obj = {};
obj.url = hostNames[i];
obj.statusCode = res.statusCode;
obj.headers = res.headers; 
```

然后我使用 mongoimport 将此 JSON 文档导入到我的 MongoDB 中。

`mongoimport --host localhost -db scrapeapp -collection scrape --file log.txt --jsonArray`

这种方法显然效率低下。我想一口气完成所有这些步骤。

帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-09T21:53:01.683

这就是我在代码中的做法

```
let exec = require('child_process').exec
let command = 'mongoimport -d database -c collection --file import.json'
exec(command, (err, stdout, stderr) => {
  // check for errors or if it was succesfuly
  cb()
}) 
```

我执行 mongoimport 命令，然后在代码旁边传递 cb 以使其可访问，或者如果您不使用异步样式，则可以同步执行`child_process.execSync(command[,options])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T15:37:36.897

我绝不是节点专家 - 但如果您有现有的 JSON 文件，您可以在 Node 中执行 mongoimport 作为 shell 命令，如此[处](http://www.dzone.com/snippets/execute-unix-command-nodejs)或各种[答案](https://stackoverflow.com/questions/14458508/node-js-shell-command-execution)中所述。

# asp.net - ImageUrl 正确但图像未显示在 Gridview RSS 中

> ID：15436905
> 
> 赞同：0
> 
> 时间：2013-03-15T16:00:55.297
> 
> 标签：asp.net, database, image, linq, gridview

**我的数据库** ![在此处输入图像描述](../Images/e10253f2ded3c2bcf7fcc11db43a3b0e.png)

**广告.aspx**

```
<asp:TemplateField HeaderText="Hình ảnh">
       <ItemTemplate>
               <asp:Image ID="imgHinhanh" ImageUrl='<%#Eval("adv_Url") %>' runat="server"></asp:Image>
      </ItemTemplate>
</asp:TemplateField> 
```

**做广告.apsx.cs**

```
public void BindGrid() {
    grdAdver.DataSource = AdvertiseService.adv.Adver_GetAll();
    grdAdver.DataBind();
} 
```

**广告服务.cs**

```
public List<AdvertiseInfo> Adver_GetAll()
{
    return adv.Adver_GetAll();
} 
```

**广告信息.cs**

```
public partial class AdvertiseInfo
{
    public int adv_id { get; set; }
    public string adv_Name { get; set; }
    public string adv_Url { get; set; }
    public int? adv_Width { get; set; }
    public int? adv_Height { get; set; }
    public string adv_Link { get; set; }
    public int? adv_Target { get; set; }
    public int? adv_Position { get; set; }
    public int? adv_Order { get; set; }
    public int? adv_Status { get; set; }
} 
```

请帮我。我浪费了很长时间来修复，但我不能。谢谢任何人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:14:53.530

这不是一个答案。但我想给你看截图。

最简单的调试方法是`View Source`获取图像 URL。

![在此处输入图像描述](../Images/cca9b2280629fe2681a93094c77a59f1.png)

然后将该 URL 复制并粘贴到您的浏览器中（如果您使用 Chrome，则可以单击它）。

如果图像不显示，则它不在您的文件系统中或 URL 不正确。

![在此处输入图像描述](../Images/a04629dd0300c249f9f5c3caf7b72aa8.png)

# java - 尝试将 Spring Mobile 添加到我当前的 Spring MVC 项目中

> ID：15436909
> 
> 赞同：4
> 
> 时间：2013-03-15T16:01:08.417
> 
> 标签：java, spring, spring-mvc, spring-mobile

我正在尝试将 Spring Mobile 添加到我当前的 Spring MVC 项目中，但我不断收到以下错误：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.mobile.device.Device]: Specified class is an interface
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)

root cause

org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.mobile.device.Device]: Specified class is an interface
    org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:101)
    org.springframework.web.method.annotation.ModelAttributeMethodProcessor.createAttribute(ModelAttributeMethodProcessor.java:136)
    org.springframework.web.servlet.mvc.method.annotation.ServletModelAttributeMethodProcessor.createAttribute(ServletModelAttributeMethodProcessor.java:81)
    org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:102)
    org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)
    org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:162)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:123)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:100)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:604)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:565)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

这是我的控制器：

```
@Controller
@RequestMapping("/ask")
class IndexController {

    private static final Logger logger = LoggerFactory.getLogger(IndexController.class);

    @RequestMapping(method = RequestMethod.GET)
    public String displayRequestPage(Device device, SitePreference sitePreference) {

        logger.info("SitePreference : " + sitePreference);
        logger.info("Device : " + device);

        String page = "index";

        if (device.isMobile()) {
            logger.info("Hello mobile user!");
            page = page  + "-mobile";
        } else if (device.isTablet()) {
            logger.info("Hello tablet user!");
            page = page  + "-tablet";
        } else {
            logger.info("Hello desktop user!");
        }
        return "index";
     }

} 
```

这是我的 WebConfig：

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages= {"com.johnathanmsmith.mvc.web"})
public class WebMVCConfig extends WebMvcConfigurerAdapter {

    private static final String MESSAGE_SOURCE = "/WEB-INF/classes/messages";

    private static final Logger logger = LoggerFactory.getLogger(WebMVCConfig.class);

    @Bean
    public  ViewResolver resolver() {
        UrlBasedViewResolver url = new UrlBasedViewResolver();
        url.setPrefix("views/");
        url.setViewClass(JstlView.class);
        url.setSuffix(".jsp");
        return url;
    }

    @Bean
    public LiteDeviceDelegatingViewResolver liteDeviceAwareViewResolver() {
        InternalResourceViewResolver delegate = new InternalResourceViewResolver();
        delegate.setPrefix("views/");
        delegate.setSuffix(".jsp");
        LiteDeviceDelegatingViewResolver resolver = new LiteDeviceDelegatingViewResolver(delegate);
        resolver.setMobilePrefix("mobile/");
        resolver.setTabletPrefix("tablet/");
        return resolver;
    }

    @Bean(name = "messageSource")
    public MessageSource configureMessageSource() {
        logger.debug("setting up message source");
        ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();
        messageSource.setBasename(MESSAGE_SOURCE);
        messageSource.setCacheSeconds(5);
        messageSource.setDefaultEncoding("UTF-8");
        return messageSource;
    }

    @Bean
    public LocaleResolver localeResolver() {
        SessionLocaleResolver lr = new org.springframework.web.servlet.i18n.SessionLocaleResolver();
        lr.setDefaultLocale(Locale.ENGLISH);
        return lr;
    }

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        logger.debug("setting up resource handlers");
        registry.addResourceHandler("/resources/").addResourceLocations("/resources/**");
    }

    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        logger.debug("configureDefaultServletHandling");
        configurer.enable();
    }

    @Override
    public void addInterceptors(final InterceptorRegistry registry) {
        registry.addInterceptor(new LocaleChangeInterceptor());
        registry.addInterceptor(new DeviceResolverHandlerInterceptor());
    }

    @Bean
    public SimpleMappingExceptionResolver simpleMappingExceptionResolver() {
        SimpleMappingExceptionResolver b = new SimpleMappingExceptionResolver();

        Properties mappings = new Properties();
        mappings.put("org.springframework.web.servlet.PageNotFound", "p404");
        mappings.put("org.springframework.dao.DataAccessException", "dataAccessFailure");
        mappings.put("org.springframework.transaction.TransactionException", "dataAccessFailure");
        b.setExceptionMappings(mappings);
        return b;
    }
} 
```

我不知道它是什么。如果你想克隆我在 github 上的项目， 地址是**git@github.com:JohnathanSmith/springmvc-mobile.git**

# ajax - Bootstrap 下拉项与 Ajax 源的绑定

> ID：15436911
> 
> 赞同：4
> 
> 时间：2013-03-15T16:01:13.050
> 
> 标签：ajax, twitter-bootstrap, dropdownbox

我有 Bootstrap 下拉按钮，我想在用户单击此下拉按钮时获取数据，而不是在页面加载时需要加载国家/地区列表，这是我的代码；

```
<div class="btn-group">
<input class="text-box single-line" data-val="true" data-val-required="The Country field   is required." id="Country" name="Country" type="text" value="US" />
<a class="btn dropdown-toggle country" id="country" data-toggle="dropdown">
<span class="caret"></span>
</a>
<ul class="dropdown-menu countrys" role="menu" aria-labelledby="dropdownMenu">
   //store country list
</ul>
</div> 
```

我单击下拉按钮，它无法触发 jquery 工作，似乎 Bootstrap 不允许自定义下拉功能。

```
$(document).ready(function () {
        $('#country').click(function () {
            // Only call notifications when opening the dropdown
            if (!$(this).hasClass('open')) {
                $.ajax({
                    type: "GET",
                    url: "/getCountries",
                    async: false,
                    dataType: "script"
                });
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-04T07:06:50.660

您可以尝试在 dropdown-open 事件中添加 ajax 请求。像这样的东西：

```
$('#myDropdown').on('show.bs.dropdown', function () {
  // do something…
}) 
```

show.bs.dropdow——这个事件在调用 show 实例方法时立即触发。切换锚元素可用作事件的 relatedTarget 属性。

# jenkins - 在 Jenkins 中将变量从 shell 传递到 email-ext

> ID：15436915
> 
> 赞同：11
> 
> 时间：2013-03-15T16:01:36.260
> 
> 标签：jenkins, jenkins-plugins

我有执行 shell 部分的 Jenkins 作业，其中我有一些动态填充的变量 BUILD。

构建执行后，我想将此变量传递给 email-ext 插件默认内容以显示它的值。

我尝试了几种方法都没有成功：

1.  无法识别在默认内容中传递此 ${BUILD} 值（在此上下文中仅可见 Jenkins 环境变量）
2.  定义了新的 Jenkins 全局环境变量并试图在 shell 上下文中覆盖它的初始值，这显然是不可能的

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-08-31T03:45:28.063

就我而言，我不是管理员，所以我无法安装插件。但是可以通过解决方法来完成。

在`Content Token Reference`帮助中，您可以找到一个有用的工具。

```
${PROPFILE,file="FILENAME",property="PROPERTYNAME"} 
```

> 扩展为属性文件中的属性值。文件名是相对于构建工作区根目录的。

然后将值保存在里面的属性文件中`Build > Execute Shell`：

```
rm -f ${WORKSPACE}/env.properties
touch ${WORKSPACE}/env.properties 
store="/opt/current/store"

echo "store.folder=${store}" >> ${WORKSPACE}/env.properties

echo "${store}" 
```

并从中阅读`Post-build Actions > Editable Email Notification`：

```
${PROPFILE,file="env.properties",property="store.folder"} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-22T09:52:42.870

简单易行：

在您的“执行外壳”中

```
echo "test log" > /some/file/path/logFile.txt 
```

然后在您的“可编辑电子邮件通知-默认内容”中

```
${FILE,path="/some/file/path/logFile.txt"} 
```

构建，您将收到一封内容为“测试日志”的电子邮件

* * *

要查看更多电子邮件令牌，您可以单击“可编辑电子邮件通知”部分中“内容令牌参考”旁边的问号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T11:40:03.243

在“shell 部分”中写入该文件后，使用[EnvInject 插件从文件中读取变量。](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)

* * *

一般来说，环境变量永远不会从子进程返回到父进程，这是 Windows 和 Unix 操作系统家族的基本特征。子进程总是获得父环境的副本，如果它修改它，它会修改它自己的副本（然后如果它启动任何子进程，则会将其复制到任何子进程等）。但是要取回更改，必须使用其他方法，例如子将所需的更改写入文件，然后由父解析，然后父可以根据它编辑自己的环境。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-22T12:21:24.147

您可以使用以下方法将构建参数传递给电子邮件分机插件：

${ENV,var="CAPITALIZED:VAR_NAME"}

这样，我在收到的邮件中看到了变量值。

# c# - 从子表单到父表单获取价值

> ID：15436922
> 
> 赞同：1
> 
> 时间：2013-03-15T16:01:53.563
> 
> 标签：c#, axwindowsmediaplayer

我的媒体播放器项目中有 2 个表单，我创建了 from1 的对象（父表单），并通过它从 form3 中的 form1 获取值。但我还需要从form3到form1获取变量的值。但问题是当我像这样在form1中制作form3的对象时

```
 Form3 m_child;

    public Form1(Form3 frm3)
    {
        InitializeComponent();
        m_child = frm3; 
    } 
```

它显示了**program.cs**中的错误，即**from1 不包含包含 0 参数的构造函数**。我知道我必须在那里传递一个参数`Application.Run(new Form1());`

但我应该通过什么我不知道。如果有任何解决方案或任何其他方式可以从子表单获取值到父表单，请帮助。

这是我的form3代码现在我想在form1中使用smileplay、surpriseplay、sadplay、normalplay、ambiguousplay的值

```
 Form1 m_parent;
    public Form3(Form1 frm1)
    {
        InitializeComponent();
        m_parent = frm1; 
    }

    private void Form3_Load(object sender, EventArgs e)
    {
       WMPLib.IWMPPlaylistArray allplaylist= m_parent.axWindowsMediaPlayer1.playlistCollection.getAll();
       for (int litem = 0; litem < allplaylist.count; litem++)
       {
         smilecombo.Items.Add( allplaylist.Item(litem).name);
         surprisecombo.Items.Add(allplaylist.Item(litem).name);
         sadcombo.Items.Add(allplaylist.Item(litem).name);
         normalcombo.Items.Add(allplaylist.Item(litem).name);
         ambiguouscombo.Items.Add(allplaylist.Item(litem).name);
       }
    }

    private void savebtn_Click(object sender, EventArgs e)
    {
      WMPLib.IWMPPlaylist smileplay=   m_parent.axWindowsMediaPlayer1.playlistCollection.getByName(smilecombo.SelectedItem.ToString()).Item(0);
      WMPLib.IWMPPlaylist surpriseplay = m_parent.axWindowsMediaPlayer1.playlistCollection.getByName(surprisecombo.SelectedItem.ToString()).Item(0);
      WMPLib.IWMPPlaylist sadplay = m_parent.axWindowsMediaPlayer1.playlistCollection.getByName(sadcombo.SelectedItem.ToString()).Item(0);
      WMPLib.IWMPPlaylist normalplay = m_parent.axWindowsMediaPlayer1.playlistCollection.getByName(normalcombo.SelectedItem.ToString()).Item(0);
      WMPLib.IWMPPlaylist ambiguousplay = m_parent.axWindowsMediaPlayer1.playlistCollection.getByName(ambiguouscombo.SelectedItem.ToString()).Item(0);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:18:51.603

我会添加一个新的构造函数。

```
public Form3 : Form
{
    public Form1 Parent { get; set; }

    // TODO: Replace object with the proper type.
    public object SomeComboboxValue
    {
                    // TODO: Replace with the value you want to access.
        get { return SomeComboBox.PropertyYouWantToAccess; }
    }

    public Form3()
    {
        InitializeComponent();
    }

    public Form3(Form1 form1)
    {
        InitializeComponent();
        Parent = form1; 
    }
}

public Form1 : Form
{
    private Form3 _form3;

    public Form1()
        :this(new Form3())
    {
    }

    public Form1(Form3 form3)
    {
        _form3 = form3;
        _form3.Parent = this;
    }
} 
```

然后`Application.Run(new Form1());`就可以正常工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:07:23.570

```
 public Form1(Form3 frm3)
 {
    InitializeComponent();
    m_child = frm3; 
 } 
```

初始化 form1 时需要提供 Form3 对象

就像是：

```
Application.Run(new Form1(new Form3())); 
```

或者简单的方法是创建两个新的空构造函数。在 C# 中，当您创建构造函数时，您会丢失默认构造函数。

添加这两个构造函数：

```
 public Form1()
 {
    InitializeComponent();
 }

 public Form3()
 {
    InitializeComponent();
 } 
```

# ssis - 执行 SQL 任务中无法识别的变量

> ID：15436927
> 
> 赞同：0
> 
> 时间：2013-03-15T16:02:13.997
> 
> 标签：ssis

1.  我在我的 ssis 包中运行了这个 sql 语句。我已经硬编码了电子邮件地址。我如何将它作为变量传递并外部化变量并可以从配置文件传递值？

2.  是`@PackageStartTime`系统启动时间。我已经声明了该变量并在属性窗口中设置了表达式`@[System::StartTime]`并评估了该表达式。但是当我运行这个包并且当它遇到这个特定的任务时，它会卡在那里说`PackageStartTime`参数无法识别并且结果属性设置不正确。

这是我的代码：

```
DECLARE @PackageStartTime Varchar(250) 
SET @PackageStartTime =?

IF (SELECT COUNT(*) FROM [dbo].[Table1] WHERE RowCDate >= @PackageStartTime) > 0
BEGIN
    DECLARE @SUB Varchar(250) 
    SET @SUB = 'File Failed' + @@SERVERNAME

    DECLARE @BODY Varchar(250) 
    SET @BODY = 'File Failed' + @@SERVERNAME

EXEC msdb.dbo.sp_send_dbmail 
    @profile_name='default',
    @recipients='dev@null.com', 
    @subject=@SUB, 
    @body=@BODY,
    @query= 'SELECT DISTINCT FileLoadName FROM [dbo].[Table1] WHERE RowCDate  >= @PackageStartTime', 
    @attach_query_result_as_file=1 
```

知道如何解决这两个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:15:07.180

Maina，我刚刚回复了你关于这个主题的另一篇文章。到目前为止，我遇到了三个帖子。您在这一篇中提出的问题本质上非常笼统，可以在任何一本好书（例如 Professional Microsoft SQL Server 2008 Integration Services）中找到答案。您还可以在许多网站上找到完整的分步答案（但不要将它们用作书籍的替代品；否则您对 SSIS 的了解可能仍然不完整。

话虽如此，这里有两个链接可以回答您的问题： 1\. 传递变量：[https ://www.simple-talk.com/sql/ssis/passing-variables-to-and-from-an-ssis-task /](https://www.simple-talk.com/sql/ssis/passing-variables-to-and-from-an-ssis-task/)（实际上，我之前似乎也将这个链接发给了你。）

1.  从配置分配变量值 - [http://www.bidn.com/blogs/DevinKnight/ssis/1655/passing-values-into-an-ssis-package-at-runtime-from-outside-the-package](http://www.bidn.com/blogs/DevinKnight/ssis/1655/passing-values-into-an-ssis-package-at-runtime-from-outside-the-package)

首先关注第 1 项。练习之后，创建一个新的 Execute sql 任务并将他的大量代码放入其中：

声明@PackageStartTime Varchar(40)=?; SELECT COUNT(*) FROM [dbo].[Table1] WHERE RowCDate >= @PackageStartTime;

并将此行数存储在包变量 iCount 中。返回值是通过 ResultSet 属性完成的。如果您能够完成此任务，那么您已经提高了执行 SQL 任务的熟练程度。

# json - Spring @RequestBody Json 到 LinkedHashMap

> ID：15436928
> 
> 赞同：1
> 
> 时间：2013-03-15T16:02:16.573
> 
> 标签：json, spring, rest

我确实将以下 json 数据接收到我的 RESTful spring web 服务之一。我确实使用 spring @RequestBody 从请求正文中检索数据。数据作为 LinkedHashMap 检索，其中两个 java.util.ArrayList(s) 分别用于 Player 和 Fixture 对象。但问题是 java.util.ArrayList(s) 中的每个对象都不是 Player 或 Fixture 类型；它又是 LinkedHashMap 类型。是否可以告诉 spring 将数据转换为 java.util.ArrayList(s)。一个列表应该包含 Player 的对象，另一个应该包含 Fixture 类型的对象。

```
{"Player":[
    {"idPlayer":101,"FirstName":"Stevenson","LastName":"Martin"},
    {"idPlayer":102,"FirstName":"Kevin","LastName":"Main"}
  ],
"Fixture":[
     {"idFixture":1,"HomeTeamId":"2","AwayTeamId":"9"},
     {"idFixture":2,"HomeTeamId":"6","AwayTeamId":"2"},
     {"idFixture":3,"HomeTeamId":"5","AwayTeamId":"3"}
   ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:18:52.280

如果顶部元素是地图，我认为这是不可能的。

但是，如果您可以将 Map 更改为另一个类，则有可能

```
public class Form {
    private List<Player> player;
    private List<Fixture> Fixture;
    //gettters and setters
} 
```

# c# - 字符串到数字生成器

> ID：15436935
> 
> 赞同：1
> 
> 时间：2013-03-15T16:02:36.057
> 
> 标签：c#, hash

我正在寻找一种将字符串转换为唯一 ID 的方法。

受邀提出一种算法的想法，该算法为发送给它的每个字符串提供一个唯一编号。

我尝试使用哈希码，但后来意识到两个字符串可能具有相同的哈希码。

如何为每个字符串生成一个唯一代码作为输入，并且两个相同的字符串应该始终为我生成相同的 id。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:08:40.083

您的“唯一 ID”中可以包含字符吗？如果是这样，这应该工作;-)

```
public string MakeUnique(string s)
{
    return s;
} 
```

所有 ID 对于所提供的值都是唯一的。相同的字符串，将产生完全相同的 ID。这就是你想要的对吗？

* * *

如果它是您想要的整数结果，如何将每个字符转换为 int...

```
public int MakeUnique(string s)
{
    string result = "";

    foreach(var c in s)
    {
        result += ((int)c).ToString();
    }

    return Int.Parse(result);
} 
```

**警告**：如果字符串[太大，这将中断](http://msdn.microsoft.com/en-gb/library/system.int32.maxvalue.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:03:39.127

只需附加或预先添加一个 guid：

```
string foo = "MyString";

//Simply throw it on the end
string uniqueString = foo + Guid.NewGuid();

//Prepend with underscore
string uniqueString = String.Format("{0}_{1}", foo, Guid.NewGuid());

//Append with underscore
string uniqueString = String.Format("{0}_{1}", Guid.NewGuid(), foo); 
```

**编辑（新要求）**

您没有提供足够的信息让我对这个问题发表一个很好的答案。例如，环境（web、winforms 等）将是有益的。

为您指明正确的方向...

如果第二次传入字符串时返回的唯一字符串需要相同，则可以维护生成字符串的历史记录，并在每次请求生成时检查它。

说实话，有很多方法可以给这只猫剥皮……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:27:20.010

如果原始字符串是敏感字符串，类似于[Gravatar](https://en.gravatar.com/)，您可以使用[MD5 加密对字符串进行加密](https://en.gravatar.com/site/implement/hash/)

正如您所说，[@Austin Salonen](https://stackoverflow.com/questions/15436935/string-to-number-generator/15437439#comment21836024_15436935)评论说，它们不是 100% 独特的，但风险很低：

[像 MD5 这样的哈希函数有何独特之处？](https://stackoverflow.com/questions/2444321/how-are-hash-functions-like-md5-unique)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:10:27.250

字符串可以很长，由字符组成，字符是 16 位值。可能的字符串数量很大（远远超过整数或 Guid 的范围）。所以你不能有一个函数“只是”将一个字符串翻译成一些有保证的唯一代码，没有一些帮助。

您可以使用数据库表：在表中查找您的字符串。如果它不存在，则插入它，生成一个新的（连续的）唯一 ID。如果它在那里，请使用该 ID。可能的字符串数量很大，您遇到的字符串数量可能不是。

# java - Oracle 创建表，如果它不存在

> ID：15436942
> 
> 赞同：9
> 
> 时间：2013-03-15T16:03:02.033
> 
> 标签：java, database, oracle10g, sqlplus

只有当数据库中当前不存在表时，任何人都可以指出要使用的正确语法来创建表吗？

我目前正在编写 Java GUI 以连接到 Oracle 并在我的数据库上执行语句，我想知道我是否会将其实现为 Java 约束或 SQLPlus 约束。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T16:09:05.800

通常，检查表是否存在没有多大意义，因为不应该在运行时创建对象，并且应用程序应该知道在安装时创建了哪些对象。如果这是安装的一部分，您应该知道在过程中的任何时候存在哪些对象，因此您不需要检查表是否已经存在。

但是，如果你真的需要，

*   您可以尝试创建表并捕获“ORA-00955：名称已被现有对象使用”异常。
*   您可以查询`USER_TABLES`（或`ALL_TABLES`根据`DBA_TABLES`您是否正在创建其他用户拥有的对象以及您在数据库中的权限）来检查表是否已经存在。
*   您可以尝试在创建表之前删除它，如果不存在，则捕获“ORA-00942：表或视图不存在”异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:27:44.533

您可以使用以下程序执行此操作 -

```
BEGIN
    BEGIN
         EXECUTE IMMEDIATE 'DROP TABLE <<Your Table Name>>';
    EXCEPTION
         WHEN OTHERS THEN
                IF SQLCODE != -942 THEN
                     RAISE;
                END IF;
    END;

    EXECUTE IMMEDIATE '<<Your table creation Statement>>';

END; 
```

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-21T15:02:48.607

@Archie 我想回答你的问题。@Piyas De 很抱歉窃取了您的代码 :)。

只是对@Piyas De 答案的一点更新。

```
BEGIN
    BEGIN
        EXECUTE IMMEDIATE '<<Your table creation Statement>>';
    EXCEPTION
        WHEN OTHERS THEN
            IF SQLCODE == -955 THEN
                RAISE;
            END IF;
    END;
END; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:35:33.567

```
try
{
    // insert query for insert new record in your table 
}
catch(Exception Ex)
{
    //if it throw exception then catch it

     int s=Ex.getErrorCode(); // check it for 903 error

     //903 is table not existing error in oracle11g

 // then create your new table here otherwise if table present then record get stored in database
} 
```

# asp.net - WCF REST + 路由 + 基本身份验证 + 自定义身份验证不起作用

> ID：15436944
> 
> 赞同：2
> 
> 时间：2013-03-15T16:03:15.950
> 
> 标签：asp.net, wcf, rest, basic-authentication, asp.net-routing

潜入 WCF RESTful 服务并遇到以下错误：

## >“/”应用程序中的服务器错误。

```
 IIS specified authentication schemes 'None', but the binding only supports
 specification of exactly one authentication scheme. Valid authentication
schemes are Digest, Negotiate, NTLM, Basic, or Anonymous.
Change the IIS settings so that only a single authentication scheme is used. 
```

这是场景：

我正在开发一个使用路由`.svc`从 URL 中删除的 WCF 服务。这样我就可以到达`http://mySite/MyService`. 当我启用匿名身份验证时，这非常有效。

为了做到这一点，我遵循[了 Steve Michelotti 的教程“RESTful WCF Services with No svc file and No config”](http://geekswithblogs.net/michelotti/archive/2010/08/21/restful-wcf-services-with-no-svc-file-and-no-config.aspx)。

代码分解为以下内容：

我的实际服务等级是：

```
Imports System.ServiceModel
Imports System.ServiceModel.Web
Imports System.ServiceModel.Activation

 Namespace Service

<ServiceContract()> _
<AspNetCompatibilityRequirements(RequirementsMode:=AspNetCompatibilityRequirementsMode.Allowed)> _
Public Class Product

    <OperationContract()> _
    <WebInvoke(Method:="GET")> _
    Public Function GetProducts() As String
        Return "Listing ALL Products"
    End Function

End Class 
```

结束命名空间

在“Global.asax”文件中启用了路由，如下所示：

```
Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)
    RouteTable.Routes.Add(New ServiceRoute("Product", New WebServiceHostFactory(), GetType(Service.Product)))
End Sub 
```

我的“web.config”看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
        <add name="OLAPIBasicAuthModule" type="Service.ServiceValidator" />
    </modules>
    <security>
        <authentication>
            <windowsAuthentication enabled="false" />
            <anonymousAuthentication enabled="false" />
            <basicAuthentication enabled="false" />
        </authentication>
    </security>
</system.webServer>

<system.web>
    <httpRuntime requestValidationMode="2.0" />
    <compilation debug="true" strict="false" explicit="true" targetFramework="4.0">
        <assemblies>
            <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
            <add assembly="System.Data.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
            <add assembly="System.Data.Services.Client, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        </assemblies>
    </compilation>
</system.web>

<system.serviceModel>        
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
</system.serviceModel> 
```

现在，为了处理基本身份验证，我遵循了[Mike Volodarsky 关于“使用 .NET 开发模块”的教程](http://www.iis.net/learn/develop/runtime-extensibility/developing-a-module-using-net)。

这基本上给了我一个验证请求的类。

当我运行调试器时，浏览器会向我请求用户名/密码。当我输入它们时，它会通过我的自定义验证器进行验证并返回 true，但是，服务调用随后会失败，并出现此问题顶部的错误。

正如我所说，如果我启用匿名身份验证一切正常。我可以访问`http://mySite/Product/GetProducts`并返回我的测试字符串。

我在 web.config 中尝试了许多条目，设置各种服务/绑定/行为等来启用基本身份验证，尽管它们通常会导致上述错误。

我有一种感觉，因为我在混合技术；IE 使用路由来调用我的服务，而不是使用端点等。

也就是说，目前我对 WCF 服务的理解非常有限。

最终，我需要能够使用路由（在 URL 中否定 .svc）并启用基本身份验证，但有我自己的自定义验证器，因为用户名/密码将在 SQL 中，对服务器/IIS 本身没有帮助。

有任何想法吗？

哦......我也在我的配置中试过这个：

```
<bindings>
        <basicHttpBinding>
            <binding name="httpBinding">
                <security mode="Transport">
                    <transport clientCredentialType="Basic" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings> 
```

仍然导致同样的错误

# sql - 在一个sql server表中查找两组数据中的重复记录

> ID：15436945
> 
> 赞同：0
> 
> 时间：2013-03-15T16:03:15.983
> 
> 标签：sql, sql-server, sql-server-2008

我有一个包含一组数据的 sql server (2008) 表。

```
Source    PersonId    Date      Description   Code     IsDup
------    --------    -----     -----------   ------   ----- 
EHR       1234        1/1/2012  Fever         120.12
EHR       1234        6/1/2012  Fracture      101.00
EHR       1234        11/4/2012 Hypertension  223.15
RAM       1234        1/1/2012  Fever         120.12              <-- Duplicate
RAM       1234        6/1/2012  Fracture      101.00              <-- Duplicate
RAM       1234        4/1/2012  Diabetic      601.00
TAR       1234        2/1/2012  Asthma        456.00
TAR       1234        1/1/2012  Fever         120.12              <-- Duplicate 
```

我需要比较不同组之间的数据。“EHR”作为主组，我需要检查是否有任何其他组的数据与表中“EHR”主组中的数据完全匹配。然后它应该用 1 更新 IsDup 列。

**预期结果：**

```
Source    PersonId    Date      Description   Code     IsDup
------    --------    -----     -----------   ------   ----- 
EHR       1234        1/1/2012  Fever         120.12
EHR       1234        6/1/2012  Fracture      101.00
EHR       1234        11/4/2012 Hypertension  223.15
RAM       1234        1/1/2012  Fever         120.12     1
RAM       1234        6/1/2012  Fracture      101.00     1
RAM       1234        4/1/2012  Diabetic      601.00
TAR       1234        2/1/2012  Asthma        456.00
TAR       1234        1/1/2012  Fever         120.12     1 
```

我知道如何检查表中的重复项，但不确定如何进行比较以保持一组静态。

我从一个stackoverflow线程中得到了这个来识别重复，但是如何添加分组比较：

```
with x as   (select  *, rn = row_number()
            over(PARTITION BY [PersonId], [Date], [Description], [Code] order by [PersonId], [Date], [Description], [Code])
            from    Results)

select * from x
where rn > 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:14:27.207

您可以使用 self join 更新您的表：

```
update r1 set isDup = 1
from results r1 join results r2 on 
     r1.PersonId = r2.PersonId and r1.Date = r2.Date and 
     r1.Description = r2.Description and r1.Code = r2.Code 
where r1.Source <> 'EHR' and r2.Source = 'EHR' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:14:14.130

这应该这样做：

```
UPDATE A
SET IsDup = 1 
FROM YourTable A
WHERE [Source] != 'EHR'
AND EXISTS (SELECT 1 FROM YourTable
            WHERE [Source] = 'EHR'
            AND PersonId = A.PersonId 
            AND [Date] = A.[Date]
            AND Description = A.Description
            AND Code = A.Code) 
```

[这是一个演示](http://sqlfiddle.com/#!3/e0f1f/4)供您尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:18:00.140

试试这个：

```
;With rootQuery as 
(
Select  SOURCE, PersonId, Date, Description, Code
From    MedicalHistory 
Where   Source = 'EHR'
)
Update mhd
Set IsDuplicate = 1
From    rootquery mh 
Join    MedicalHistory mhd on mh.PersonId = mhd.PersonId
Where   mh.Description = mhd.Description
And     mh.Code = mhd.Code
And         mh.Date = mhd.Date
And     mhd.Source != 'EHR' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T06:39:41.963

请试试这个..

```
 update tab
   set tab1.isDup=1
   from table1 tab1, table1 tab2
   where 
   tab1.PersonId=tab1.PersonId and
   tab1.Date=tab2.Date and
   tab1.desription=tab2.desription and
   tab1.Code=tab2.Code and
   tab1.Source != tab2.source 
```

# c# - 动态事件订阅和 1 个处理程序

> ID：15436946
> 
> 赞同：3
> 
> 时间：2013-03-15T16:03:16.443
> 
> 标签：c#, events, reflection

我已经看到了几个答案，但不知何故我无法让我的工作。我想动态使用各种控件（文本框、复选框、按钮等）的任何事件，最好将它们分配给一个事件处理程序。应在运行时分配处理程序。此外，我想在处理程序中知道哪个事件触发了处理程序。

我得到了这个部分工作。使用 lambda 表达式，我调用我的处理程序 (EventAssistant) 并传递一个包含事件名称的额外参数 (command)。它适用于使用 EventHandler 类型的事件。但是，它不适用于需要不同处理程序的事件，例如 MouseEventHandler 类型。它将无法在 AddEventHandler 订阅。

```
private void RegisterEventHandlers(Control ctl)
{
  foreach (Command command in CommandList)
  {
    EventInfo eventInfo = ctl.GetType().GetEvent(command.Name);
    EventHandler handler = (sender, args) =>
    {
      EventAssistant(sender, args, command);
    };
    eventInfo.AddEventHandler(ctl, handler);
  }
}

public void EventAssistant(object sender, EventArgs e, Command c)
{
  //do lots of other fun stuff
} 
```

基于[C# 将额外参数传递给事件处理程序？](https://stackoverflow.com/questions/4215845/c-sharp-passing-extra-parameters-to-an-event-handler)

* * *

作为替代方案，我尝试使用表达式树来解决问题，如下所示：[为什么动态创建事件处理程序时出现参数异常？](https://stackoverflow.com/questions/3627625/why-am-i-getting-an-argument-exception-when-creating-event-handler-dynamically) 显然，可以从 EventInfo 中检索 EventHandlerType 并在 lambda 表达式中使用。

但是，无论我做什么，我总是得到一个 InvalidOperationException “Lambda Parameter not in scope”。

```
private void RegisterEventHandlers(Control ctl)
{
  foreach (Command command in CommandList)
  {
    EventInfo eventInfo = ctl.GetType().GetEvent(command.Name);

    var sender = Expression.Parameter(typeof(object), "sender");
    var e = Expression.Parameter(typeof(EventArgs), "e");
    var c = Expression.Parameter(typeof(Command), "command");
    Expression[] arg = new Expression[] { sender, e, c };
    MethodInfo mi = this.GetType().GetMethod("EventAssistant");
    var body = Expression.Call(Expression.Constant(this), mi, arg);
    var lambda = Expression.Lambda(eventInfo.EventHandlerType, body, sender, e);

    eventInfo.AddEventHandler(ctl, lambda.Compile());
  }
} 
```

我在表达式树上做错了什么？

此外，第一段代码看起来更干净。是否有可能使用第一个代码示例得到我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:44:58.993

在您的第二次尝试中，变量`c`不应该是 a `ParameterExpression`，而是 a`ConstantExpression`的值设置为 current `command`。使用当前代码，您正在创建一个处理程序，它基本上如下所示：

```
(_sender, _e) => this.EventAssistant(_sender, _e, _c)
// The expression expects "_c" to be a parameter of the lambda, which is why
// you're getting that exception 
```

然而，如果你改变

```
var c = Expression.Parameter(typeof(Command), "command"); 
```

到

```
var c = Expression.Constant(command); 
```

生成的代码看起来（当然也可以工作）如预期：

```
(_sender, _e) => this.EventAssistant(_sender, _e, command) 
```

# php - 仅允许通过本地服务器上的 ajax 访问 PHP 文件

> ID：15436948
> 
> 赞同：14
> 
> 时间：2013-03-15T16:03:22.563
> 
> 标签：php, jquery, ajax, security

我有一个网站需要根据用户交互来增加数据库中的值。当用户单击一个按钮时，会调用一个增加值的 php 脚本。我想保护这个脚本不被外部脚本访问。目前，用户可以使用 javascript 函数编写自己的网页，该函数反复访问同一个 php 文件以炸毁数据库中的值。

这是我的执行递增的 jquery 代码：

```
jQuery(function(){
$('.votebtn').click(function(e){
    var mynum = $(this).attr('id').substring(0,5);
    $.ajax({
            url:"countvote.php",
            type:"GET",
            data: { 
                thenum:mynum
            },
            cache: false,
            success:function(data) {
                alert('Success!');
                }
            }
        });
});
}); 
```

我将如何去做，以便只有来自本地服务器上的 ajax/jquery 的调用才能访问“countvote.php”？如果这不是正确的方法，我愿意接受任何可以防止我的 php 脚本被外部脚本滥用的建议。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-12-02T21:06:37.600

解决方案需要两个步骤。

首先，ajax 文件必须只允许使用此代码在 ajax 请求中访问。

```
define('IS_AJAX', isset($_SERVER['HTTP_X_REQUESTED_WITH']) &&      strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest');
if(!IS_AJAX) {die('Restricted access');} 
```

其次，ajax 文件可以访问使用命令 $_SERVER['HTTP_REFERER'] 调用它的文件名。因此，您只能在主机服务器中限制访问。

```
$pos = strpos($_SERVER['HTTP_REFERER'],getenv('HTTP_HOST'));
if($pos===false)
  die('Restricted access'); 
```

也许代码只能与第二部分一起使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T16:06:43.153

您可以检查 if `$_SERVER['HTTP_X_REQUESTED_WITH']`equals `xmlhttprequest`，但这不是确定请求是否为 AJAX 请求的可靠方法，总有办法解决这个问题。但它可以保护您免受随机点击，例如错误输入的网址、爬虫等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T16:08:45.393

没有真正做到 100% 的方法。AJAX 请求总是来自客户端。使用 POST 请求而不是 GET，这将有助于阻止任何问题，但不能完全阻止它们，在您的 php 中，只需删除所有 get 请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-20T18:49:32.907

我不确定这是否可行，但是关于设置 API 密钥的方法是什么。index.php 到一个`$_SESSION`变量中，afaik 这对用户不可见，除非您手动执行此操作，然后在受限制的 php 文件中，检查`$_SESSION['VOTEAPIKEY']`或其他

# deployment - 如何从 jetty:run-war 切换到 jetty:run？

> ID：15436950
> 
> 赞同：0
> 
> 时间：2013-03-15T16:03:25.697
> 
> 标签：deployment, intellij-idea, jetty

我有一个在码头上运行的多模块 maven 应用程序，我想使用 jetty:run 来加快开发速度 + 可用于热引入热部署。我使用了本教程： [https](https://gist.github.com/naaman/1053217) ://gist.github.com/naaman/1053217 但我必须使用`<webAppSourceDirectory>`参数指向提取的战争目录。问题是我无法编译代码，看看热部署是否有效。Maven 说某些资源正在使用中，因此无法替换。我正在开发 IntelliJ IDE。有没有办法让 jetty:run 和 hot deploment 一起工作？欢迎任何想法

# c# - LINQ to Entity 和铸造

> ID：15436952
> 
> 赞同：1
> 
> 时间：2013-03-15T16:03:31.167
> 
> 标签：c#, .net, entity-framework, linq-to-sql, entity-framework-5

我有一些具有 CategoryId 成员的 EF 代码第一类，该成员也在名为 ICategoryFilterable 的接口中定义。

```
 public class One : ICategoryFilterable
    {
        public int CategoryId { get; set; }
        /* more properties here */
    }

    public class Two : ICategoryFilterable
    {
        public int CategoryId { get; set; }
        /* more properties here */
    }

    public interface ICategoryFilterable
    {
        int CategoryId { get; set; }
    } 
```

现在，我想按指定类别从数据库中检索记录。我为此创建了一个通用方法，但它不起作用，我找不到解决方案。

```
 private IQueryable<T> FilterByCategory<T>(IQueryable<T> items, IEnumerable<int> filter)
        where T : ICategoryFilterable
    {
        return from item in items
               where filter.Contains(item.CategoryId)
               select item;
    } 
```

> 无法将类型“MyNamespace.One”转换为类型“MyNamespace.ICategoryFilterable”。LINQ to Entities 仅支持转换 EDM 基元或枚举类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:06:44.697

这*应该*工作...

您可以使用委托来选择适当的类别 ID：

```
 private IQueryable<T> FilterByCategory<T>
                (IQueryable<T> items, IEnumerable<int> filter, 
                 Func<T, int> categorySelector)
    {
        return items.Where(i => filter.Contains(categorySelector(i)));
    } 
```

快速使用示例：

```
 var source = Enumerable.Empty<One>().AsQueryable();
        var filter = Enumerable.Empty<int>();

        var filtered = FilterByCategory(source, filter, s => s.CategoryId); 
```

# android - 如何解决 Dalvik 编译器对 64K 方法的限制问题？

> ID：15436956
> 
> 赞同：27
> 
> 时间：2013-03-15T16:03:40.540
> 
> 标签：android, protocol-buffers, dalvik, dex

我和我的团队从另一个团队继承了一个大型 Android 项目。据报道，包含所有库的整个应用程序有大约 35000 个方法。我们现在的任务是在需要使用协议缓冲区的应用程序中实现新服务。

问题是生成的包含所有必需 .proto 文件的 .jar 文件创建了另外几个 35000 个方法，即 70000 个方法。如果您不知道，Android 编译器对每个 .dex 文件有 65536 个方法的限制。我们显然超出了该限制，并且在尝试编译应用程序时遇到以下错误：

```
Unable to execute dex: method ID not in [0, 0xffff]: 65536
Conversion to Dalvik format failed: Unable to execute dex: method ID not in [0, 0xffff]: 65536 
```

是的，应用程序架构可能应该进行重组，但这需要时间。目前，我们正试图找出一个临时解决此问题的解决方案。

有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T01:15:34.660

您可以使用另一个 DEX 文件。这就是你的做法：

[http://android-developers.blogspot.co.il/2011/07/custom-class-loading-in-dalvik.html](http://android-developers.blogspot.co.il/2011/07/custom-class-loading-in-dalvik.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T22:39:10.283

启用 Proguard ( [http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html) ) 以删除未使用的方法。protobuf 生成器创建了数千个从未实际使用过的方法。

微协议缓冲区 ( [https://code.google.com/p/micro-protobuf/](https://code.google.com/p/micro-protobuf/) ) 也可能有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-01T16:57:53.523

Square 也有类似的问题，他们构建了[Wire](https://github.com/square/wire)来处理由 protobufs 引起的方法爆炸。他们声称已经杀死了 10,000 种方法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-27T08:32:23.607

在 6.5 之前的 Google Play 服务版本中，您必须将整个 API 包编译到您的应用程序中。在某些情况下，这样做会使您的应用程序中的方法数量（包括框架 API、库方法和您自己的代码）保持在 65,536 个限制以下变得更加困难。

从 6.5 版开始，您可以有选择地将 Google Play 服务 API 编译到您的应用程序中。例如，要仅包含 Google Fit 和 Android Wear API，请在 build.gradle 文件中替换以下行：

```
compile 'com.google.android.gms:play-services:6.5.87' 
```

这些行：

```
compile 'com.google.android.gms:play-services-fitness:6.5.87'
compile 'com.google.android.gms:play-services-wearable:6.5.87' 
```

更多参考，您可以点击[这里](http://developer.android.com/google/play-services/setup.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T23:38:59.147

如果这是第一次使用协议缓冲区，您可以查看替代 JavaME 实现，即

*   [protobuf-javame](http://code.google.com/p/protobuf-javame/)
*   [protobuf-j2me](http://code.google.com/p/protobuf-j2me/)

[第三方插件](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns#Programming_Languages)中还列出了其他内容。如果没有使用它们中的任何一个，但它们似乎更小并且没有标准协议缓冲区创建的所有方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-18T03:32:25.343

我们最近向 Android 添加了[Nano Protobufs](https://android.googlesource.com/platform/external/protobuf/+/64d8d8f89050c5ada85341f967af391f4716a7cb)，这显着减少了生成的方法数量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-11T06:29:48.600

如果您使用的是 Eclipse，这是最简单的解决方法，请[单击此处！](http://www.m2techtronix.com/2016/07/unable-execute-dex-method/)

# jquery - Jquery 显示/隐藏具有 3 个不同导航栏的多个 div

> ID：15436957
> 
> 赞同：0
> 
> 时间：2013-03-15T16:03:43.310
> 
> 标签：jquery, hide, show, html

我正在使用基于以下 jsfiddle 的代码在我的网页上显示/隐藏 div：http: [//jsfiddle.net/XwN2L/420/](http://jsfiddle.net/XwN2L/420/)

它适用于我页面的一部分，在第一个导航栏中。我需要考虑另外两个导航栏，它们使用相同的代码。例子...

```
 $('.showSingle').on('click', function () {
    /* $(this).addClass('selected').siblings().removeClass('selected'); */
    $('.targetDiv').hide();
    $('#div' + $(this).data('target')).show();
    });

    $('.showSingle').first().click(); 
```

和

```
<div id="headnav">
<ul>
<li><a href ="#" class="showSingle" data-target="1">&bull;&nbsp;HOME</a> </li>
<li><a href ="#" class="showSingle" data-target="2">&bull;&nbsp;ABOUT US</a> </li>
<li><a href ="#" class="showSingle" data-target="3">&bull;&nbsp;CONTACT</a> </li>
<li><a href ="#" class="showSingle" data-target="4">&bull;&nbsp;WHERE TO BUY</a> </li>
</ul>
</div>
<div id="nav">
<ul>
    <li><a href ="#" class="showSingle" data-target="5">&bull;&nbsp;PIPE TOBACCO</a>
        <ul>
            <li><a href ="#" class="showSingle" data-target="6">KENTUCKY SELECT</a></li>
            <li><a href ="#" class="showSingle" data-target="7">BUCKHORN</a></li>
        </ul>
    </li>
    <li><a href ="#" class="showSingle" data-target="8">&bull;&nbsp;ORGANIC TOBACCO</a></li>
    <li><a href ="#" class="showSingle" data-target="9">&bull;&nbsp;CIGARETTE TOBACCO</a></li>
    <li><a href ="#" class="showSingle" data-target="10">&bull;&nbsp;FILTER CIGARS</a></li>
    <li><a href ="#" class="showSingle" data-target="11">&bull;&nbsp;E-CIGARETTES</a></li>
</ul> 
```

等等...有关更详细的列表，请访问 www.rcgraphicsstudio.com/ecryo。您会注意到页眉和页脚都固定在顶部和底部，所以我希望这不是导致问题的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:12:35.827

#div5 到 11 元素实际上嵌套在 #div4 元素中。因此，当您单击链接“target=5”时，您会隐藏要显示的 div 的父元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:13:17.650

我去了你的网站，看起来问题是每个 subnav 元素都包含在其中，`#div4`所以如果`$(this).data('target')) > 4`你需要同时显示`#div4`和`$('#div' + $(this).data('target'))`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:15:26.377

在您给定的页面 (www.rcgraphicsstudio.com/ecryo) 上，jQuery 很好。您遇到的问题是您的 div5 到 div14 都在 DOM 中的 div4 内。div1 - div4 在同一级别，然后您将其余部分嵌套在 4 内。修复该问题，您的页面将正常工作。

# visual-studio-lightswitch - 我可以使用 Microsoft Visual Studio Lightswitch 2011 来编写 WIN32 API 吗？

> ID：15436959
> 
> 赞同：0
> 
> 时间：2013-03-15T16:03:48.553
> 
> 标签：visual-studio-lightswitch

我一直在尝试在 Microsoft Visual Studio Lightswitch 2011 中进行 win32 api 编程，但是打开的项目资源管理器显示 VB 和 c#。真的有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:13:26.127

基本上，LightSwitch 解决方案是一个 100% 的 Visual Studio 解决方案，顺便说一下，有许多特定于 Visual Studio LightSwitch 的程序集公开了只能在 LightSwitch 应用程序中使用的命名空间、类和用户控件。

这是您无法将项目导入 Visual Basic 的主要原因。不过，您可以使用 VB 编写扩展：

> Visual Studio LightSwitch 是用于为桌面、Web 和云开发业务应用程序的工具。您可以使用 Microsoft Visual Studio Professional 2012、Visual Studio 2012 SDK 和 LightSwitch Extensibility Toolkit for Microsoft Visual Studio 2012 创建扩展来扩展 LightSwitch 的功能。

如果你想做一个 Win32API 编程，你可以使用 VS Express for C++： http: [//www.microsoft.com/visualstudio/eng/products/visual-studio-express-products](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T15:55:32.190

新人在开始使用 LightSwitch 编程时遇到的主要问题是期望能够访问完整 .NET Framework 的所有功能。

*客户端层*和中间*层*都基于 Silverlight，因此只能访问 Silverlight 公开的功能。

可以从*客户端层*触发一个 .NET 功能（将在*服务器层*上运行） ，但它需要更多的代码来完成，使用类似于我们称之为*命令表模式*的东西。

# java - 如何使用 JAXB 在 Java 中创建此 XML O/p

> ID：15436967
> 
> 赞同：0
> 
> 时间：2013-03-15T16:04:11.800
> 
> 标签：java, xml, jaxb

这是我应该从我的 java 代码中得到的输出。如何在 Java 中创建这样的 XML。我已经阅读了一些教程，但仍然想获得这样的 o/p。只需给我一个代码来构建它。我会做自己的其他步骤。

```
 This should be generated from my java code using JAXB

             <place id="p1">

               <graphics>

               <position x="150.0" y="75.0"/>

               </graphics>

               <name>

               <value>p1</value>

               <graphics>

               <offset x="50.0" y="0.0"/>

               </graphics>

               </name>

               <initialMarking>

               <value>0</value>

               <graphics>

               <offset x="0.0" y="0.0"/>

               </graphics>

               </initialMarking>

               <capacity>

               <value>0</value>

               </capacity>

               </place> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T16:36:15.750

您可以在以下链接中深入了解从 Java 代码编写 XML 文件 -

[http://www.kodejava.org/examples/477.html](http://www.kodejava.org/examples/477.html)

希望这对您有所帮助。如果您的 Java 代码仍有问题，请发布它 - 我们将对其进行审核。

# c - 为什么 libpcap 函数捕获的数据包的以太网和 ip 标头失真

> ID：15436969
> 
> 赞同：1
> 
> 时间：2013-03-15T16:04:15.420
> 
> 标签：c, linux, libpcap

我使用 libpcap 函数 pcap_next() 从其他主机捕获一些 tcp 数据包我检查了捕获数据包的字节，并注意到数据包的以太网和 ip 标头被扭曲，与很多 0 混乱，但 TCP 标头很好

造成这种情况的潜在原因是什么？

代码：

```
pcap_t* create_pcap_handler()
{
    pcap_t *handle;                 /* Session handle */
    char *dev;                      /* The device to sniff on */
    char errbuf[PCAP_ERRBUF_SIZE];  /* Error string */
    struct bpf_program fp;          /* The compiled filter */
    char filter_exp[] = "port 32000";  /* The filter expression */
    bpf_u_int32 mask;               /* Our netmask */
    bpf_u_int32 net;                /* Our IP subnet*/

    /* Define the device */
    dev = pcap_lookupdev(errbuf);
    if (dev == NULL) {
            fprintf(stderr, "Couldn't find default device: %s\n", errbuf);
            exit(2);
    }
    /* Find the properties for the device */
    if (pcap_lookupnet(dev, &net, &mask, errbuf) == -1) {
            fprintf(stderr, "Couldn't get netmask for device %s: %s\n", dev, errbuf);
            net = 0;
            mask = 0;
    }

    struct in_addr tmp;
    tmp.s_addr=net;
    char IPdotdec[20];
    inet_ntop(AF_INET, (void *)&tmp, IPdotdec, 16);
    printf("net is %s\n", IPdotdec);
    tmp.s_addr=mask;
    inet_ntop(AF_INET, (void *)&tmp, IPdotdec, 16);
    printf("mask is %s\n", IPdotdec);
    printf("dev is %s\n",dev);

    handle = pcap_open_live(dev, BUFSIZ, 0, 0, errbuf);
    if (handle == NULL) {
            fprintf(stderr, "Couldn't open device %s: %s\n", dev, errbuf);
            exit(2) ;
    }
    /* Compile and apply the filter */
    if (pcap_compile(handle, &fp, filter_exp, 0, mask) == -1) {
            fprintf(stderr, "Couldn't parse filter %s: %s\n", filter_exp, pcap_geterr(handle));
            exit(2);
    }
    if (pcap_setfilter(handle, &fp) == -1) {
            fprintf(stderr, "Couldn't install filter %s: %s\n", filter_exp, pcap_geterr(handle));
            exit(2);
    }

    return handle;
} 
```

和主要功能

```
int main()
{
    pcap_t * pcap_handler=create_pcap_handler();
    struct pcap_pkthdr pcap_header;      /* The header that pcap gives us */
    const u_char *pcap_packet;           /* The actual packet */
    pcap_packet = pcap_next(pcap_handler, &pcap_header);
    if(pcap_packet !=NULL)
            printf("capture one packet with length of %d\n", pcap_header.len);
    pcap_close(pcap_handler);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:26:40.627

```
pcap_packet = pcap_next(pcap_handler, &pcap_header);
if(pcap_packet !=NULL)
        printf("capture one packet with length of %d\n", pcap_header.len);
pcap_close(pcap_handler);
parse_pkt(pcap_packet,pcap_header.len); 
```

那是行不通的。

当您 close`pcap_handler`时，不能保证调用`pcap_next()`或`pcap_next_ex()`with返回的任何指针`pcap_handler`将继续有效。

尝试

```
pcap_packet = pcap_next(pcap_handler, &pcap_header);
if(pcap_packet !=NULL)
        printf("capture one packet with length of %d\n", pcap_header.len);
parse_pkt(pcap_packet,pcap_header.len);
pcap_close(pcap_handler); 
```

反而。

# php - php字符串转xml

> ID：15436973
> 
> 赞同：0
> 
> 时间：2013-03-15T16:04:27.820
> 
> 标签：php, xml

我正在使用 php v5.3。我想将字符串转换为有效的 xml。Xml 显然需要将 '&' 字符编码为，`&amp;`但我能找到的所有函数也会将 'ë' 之类的字符转换为 xml 不接受的 html 实体（`&euml;`在这种情况下）。我应该使用什么功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T16:17:03.240

`htmlspecialchars`是你需要的。`htmlentities`与 不同，它对转换的内容更具选择性。

从`htmlentities` [文档](http://php.net/manual/en/function.htmlentities.php)：

> 此函数在所有方面都与 htmlspecialchars() 相同，除了 htmlentities() 之外，所有具有 HTML 字符实体等效项的字符都将转换为这些实体。

```
<?php
$a = "I love things & stuffë";
$b = htmlspecialchars($a);
$c = htmlentities($a);
echo "$b\n$c\n"; 
```

输出：

```
I love things &amp; stuffë
I love things &amp; stuff&Atilde;&laquo; 
```

[http://www.php.net/manual/en/function.htmlspecialchars.php](http://www.php.net/manual/en/function.htmlspecialchars.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:59:06.123

如果您创建 XML，那么您可能已经准备好`DOMDocument`了。即使没有，您也可以轻松创建一个。使用 a`DOMDocument`您可以为 XML 创建 100% 格式正确的文本：

```
$text = "I'm using php v5.3\. I would like to convert a string to valid xml. Xml apparently requires '&' characters to be encoded to &amp; but all functions I can find which do this also convert characters like 'ë' to html entities xml doesn't accept (&euml; in this case). What function should I use?";

$doc = new DOMDocument();
echo $doc->saveXML($doc->createTextNode($text)); 
```

这将为您提供以下输出（逐字）：

> `I'm using php v5.3\. I would like to convert a string to valid xml. Xml apparently requires '&amp;' characters to be encoded to &amp;amp; but all functions I can find which do this also convert characters like 'ë' to html entities xml doesn't accept (&amp;euml; in this case). What function should I use?`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:11:41.703

```
$str = preg_replace('/\s&\s/', '&amp', $str); 
```

这将替换用尾随和结束空格包围的所有“&”。只需根据需要稍微制定模式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T16:15:41.857

如果你只想转换 & 为`&amp;`你可以试试这个：

```
$encoded_str = str_replace('&','&amp;',$original_str); 
```

为了避免得到类似`&amp;amp;`如果你最初有一个`&amp;`，防止它的一种方法是`&amp;`先将所有转换为 &

```
$encoded_str = str_replace('&','&amp;',str_replace('&amp;','&',$original_str)); 
```

# html - 如何使用 jsoup 仅从 html 文件中提取文本

> ID：15436977
> 
> 赞同：8
> 
> 时间：2013-03-15T16:04:37.617
> 
> 标签：html, jsoup

我用过这段代码：

```
String innerHtml = Jsoup.parse(htmlCode,"ISO-8859-1").select("body").html(); 
```

但它只删除`<html>`标签

内的任何`HTML`标签`body`仍然会出现

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T16:08:31.430

使用`.text()`而不是`.html()`获取元素及其所有子元素的组合文本。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T16:07:52.790

尝试使用`.text()`：

```
Jsoup.parse(htmlCode,"ISO-8859-1").select("body").text(); 
```

而不是`.html()`.

# spring - Sql 是必需的错误 Spring StoredProcedure

> ID：15436983
> 
> 赞同：2
> 
> 时间：2013-03-15T16:04:48.093
> 
> 标签：spring, stored-procedures

当我执行下面的代码时，我得到属性“sql”是必需的错误。有人能帮我吗？我不知道如何在 TestDAO 类中注入数据源以使其正常工作。

```
public class TestDAO extends BaseStoredProcedure
{

    final protected Logger logger = Logger.getLogger(this.getClass().getName());

     private static final String SPROC_NAME = "dbo.SP1";

     @Autowired
     private JdbcTemplate jdbcTemplate;

    public java.util.ArrayList<IssuerProductResponse> validIssuersProducts(java.util.ArrayList<IssuerProductRequest> issuersProducts)
    {
        //PARAM MAP set here

        //compile SP
        HIOSBaseStoredProcedure hiosBaseSP = new HIOSBaseStoredProcedure(jdbcTemplate.getDataSource(),SPROC_NAME,inMap,null,null,null);

        //now set parameters

        Map<String, Object> result = super.execute(parameters);
        System.out.println(result);

        return liReponse;
    }

} 
```

BaseStoreProcedure 类

```
public class BaseStoredProcedure extends StoredProcedure {

    public BaseStoredProcedure() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * 
     * @param ds
     * @param spname
     * @param map
     * @param sqlOutKey
     * @param returnType
     * @param rowmapper
     */
    public BaseStoredProcedure (DataSource ds, String spname,
            Map<String, Integer> map, String sqlOutKey, Integer returnType,
            RowMapper rowmapper) {
        super();
        setDataSource(ds);

        /* resultset has to be declared first over other declare parameters */
        if (rowmapper != null) {
            declareParameter(new SqlReturnResultSet(sqlOutKey, rowmapper));
        }

        if (map != null) {
            Iterator itr = map.keySet().iterator();
            while (itr.hasNext()) {
                String key = (String) itr.next();
                Integer value = (Integer) map.get(key);
                declareParameter(new SqlParameter(key, value.intValue()));
            }
        }

        /*
         * sql out paramter has to be declared based on the order in stored
         * procedures, In all our stored procedures we have it after input
         * parameters
         */
        if (returnType != null) {
            declareParameter(new SqlOutParameter(sqlOutKey, returnType
                    .intValue()));
        }

        setSql(spname);
        compile();
    }
} 
```

弹簧配置

```
 <bean id="dao" class="test.dao.TestDAO">               <property name="jdbcTemplate" ref="jdbcTemplate"></property>     </bean> 
            <bean id="baseSP" class="test.dao.BaseStoredProcedure">         </bean>
         <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource" ref="dataSource"/>
     </bean>
         <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"      destroy-method="close">
        <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />        <property name="url" value="jdbc:sqlserver://IP:1433;databaseName=DB;" />       <property name="username" value="username" />       <property name="password" value="password" />               <property name="validationQuery" value="SELECT 1" />        <property name="initialSize" value="1"/>        <property name="maxActive" value="20"/>     </bean> 
```

# asp.net-mvc - 在带有 .NET 4.0 的 ASP MVC 4 上使用 MEF2

> ID：15436986
> 
> 赞同：-3
> 
> 时间：2013-03-15T16:04:54.073
> 
> 标签：asp.net-mvc, mef

我想知道是否有计划将 MEF2，特别是 MEF 与 ASP MVC 集成带回 .NET 4.0？

由于服务提供商的限制，我目前必须使用 .NET 4.0，并且我正在使用来自 CodePlex 的旧 MEF 代码来使用 MEF 到 ASP MVC 集成。这可行，但并不理想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:39:28.197

来自codeplex的代码？但在组合命名空间下......

MEF 是 Microsoft .NET Framework 的一部分，其类型主要位于*System.ComponentModel.Composition* .* 命名空间下。

*   MEF 附带 .NET 4.0（包括 asp mvc）和 Silverlight 4
*   MEF 2 正在开发中
    *   .NET Framework 4.5 的预发布版本中提供了新功能
    *   通过 NuGet 支持 Windows 8 应用商店应用

# python - 在 Google App Engine (Python) 中存储和检索实体的统计信息

> ID：15436987
> 
> 赞同：1
> 
> 时间：2013-03-15T16:04:58.743
> 
> 标签：python, google-app-engine

我正在寻找一种方法来存储和检索有关 GAE 数据存储中的一些实体的统计信息。假设我正在存储这些模型：

```
NewsSource(db.Model)

Article(db.Model)
   NewsSource
   CommentCount
   VoteCount 
```

所以每篇文章都有一个新闻来源、投票数和评论数，而一个新闻来源有多个文章。Commentcount 和 votecount 道具可以经常更新。

现在假设我希望能够检索有关 Newsources 的统计信息，这些统计信息告诉我新闻源在过去 x 周（或其他时间段）每周（或一天或其他时间段）有多少票和/或评论。

我想出了这个：

对于我想要统计信息的每个时期都有一个 cron 工作。所以每周运行一个，每天运行一个。然后这个 cron 作业将遍历 Newssources 和每个新闻源，获取所有文章，处理数据并将 Stats 作为单独的实体存储在数据存储中。

但必须有更好的东西。是否有任何现有的模式来处理这些类型的问题？

谢谢

# c++ - TinyXML 解析多字节字符但跳过 [x] 字符

> ID：15436988
> 
> 赞同：2
> 
> 时间：2013-03-15T16:04:59.550
> 
> 标签：c++, utf-8, iso-8859-1, tinyxml

我有一个 c++ 程序，它从服务器接收一些 xml，然后尝试解析它以填充一些组合框，例如

```
<?xml version="1.0"?>
    <CustomersMachines>
        <Customer name="bob" id="1">
            <Machine name="office1" id="1" />
            <Machine name="officeserver" id="2" />
        </Customer>
     </CustomersMachines> 
```

对于这些值，TinyXML 可以很好地解析，并且生成的组合框会按预期填充。当多字节字符放置在名称元素的末尾（或靠近，取决于多少字节）时，就会出现问题。

```
<Customer name="boß" id="3"> 
```

将导致组合框被填充值**boß" id=**

通过调试器，我看到当多字节字符传递给 ReadText() 时，元素中的以下 1-3 个单字节字符会被跳过但会自动包含在内，因此 tinyXML 不会注册结束引号并保留解析直到到达下一个。在发送 xml 的服务器上运行的应用程序主要使用 ISO-8859-1 编码，而 tinyXML 默认为 UTF-8。

我尝试将 tinyxml 调整为默认使用 TIXML_ENCODING_UNKNOWN，这似乎可以解决问题，但会在程序的其他地方引起大量问题。我尝试过的其他事情是在发送之前对 xml 服务器端进行 utf8_encode（但这会导致奇怪的字符显示在应该是多字节字符的组合框中），并强制编码到发送到的 xml客户端程序无济于事。

在这种情况下，任何人都知道如何防止多字节字符自动忽略以下 1-3 个字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:00:28.700

序言未`<?xml?>`指定编码。如果编码在 XML 之外无法通过带外方式获得，则必须根据 XML 规范[附录 F](http://www.w3.org/TR/2008/REC-xml-20081126/#sec-guessing)中概述的规则，通过分析 XML 的起始字节来猜测编码。在这种情况下，这可能会导致选择 UTF-8。如果 XML 实际上不是 UTF-8 编码的，那将解释您所看到的行为。

在 ISO-8859-1 中，`ß`被编码为 byte octet `0xDF`，并且`"`被编码为 byte octet `0x22`。

在 UTF-8 中，`0xDF`是 2 字节八位字节序列的起始字节，它解释了`"`被跳过的原因。但是，`0xDF 0x22`它不是有效的 UTF-8 2 字节字节序列，因此 TinyXml 应该会导致解析失败并出现错误。如果没有，那么这是 TinyXml 中的一个错误。

如果 XML 实际上是 ISO-8859-1 编码的，则服务器必须提供该信息。如果不是，那么这是服务器中的错误。

# lisp - CMUCL 的奇怪 GC 行为

> ID：15436990
> 
> 赞同：1
> 
> 时间：2013-03-15T16:05:06.027
> 
> 标签：lisp, common-lisp

为什么这段代码会用 CMUCL 溢出堆？即使我给它 400MB 内存`(setq extensions:*bytes-consed-between-gcs* 400000000)`CMUCL 仍然会窒息它。

```
; [GC threshold exceeded with 12,012,544 bytes in use.  Commencing GC.]
; [GC completed with 188,064 bytes retained and 11,824,480 bytes freed.]
; [GC will next occur when at least 400,188,064 bytes are in use.]
; [GC threshold exceeded with 400,202,280 bytes in use.  Commencing GC.]
; [GC completed with 207,120 bytes retained and 399,995,160 bytes freed.]
; [GC will next occur when at least 400,207,120 bytes are in use.] 
```

这段代码在 CCL 和 SBCL 上运行正常，尽管我没有查看它们的内存使用情况。

这是 CMUCL 中的错误吗？我相信所有这些函数都是尾递归的。

```
(defun sqrt-iter (guess x)
  (if (good-enough? guess x)
      guess
      (sqrt-iter (improve guess x)
                 x)))

(defun improve (guess x)
  (average guess (/ x guess)))

(defun average (x y)
  (/ (+ x y) 2))

(defun good-enough? (guess x)
  (< (abs (- (* guess guess) x)) 0.001))

(defun mysqrt (x)
  (sqrt-iter 1.0 x))

(defun zint (x acc step)
  (setq num-iter (+ 1 num-iter))
  (if (>= x 10000.0)
      acc
      (zint (+ x step)
           (+ acc (* step (mysqrt x)))
           step)))

(setq num-iter 0)
(format t "result=~A; iterations=~A~%" (zint 0.0 0.0 .001) num-iter)
(quit) 
```

**编辑：** 是的，CMUCL 肯定会造成很多不必要的损失。试试这个简单的例子：

```
$ ~/cmucl/bin/lisp 
...
* (defun foo () (bar))

FOO
* (defun bar () (foo))

BAR
* (foo)
; [GC threshold exceeded with 12,009,008 bytes in use.  Commencing GC.]
; [GC completed with 111,816 bytes retained and 11,897,192 bytes freed.]
; [GC will next occur when at least 12,111,816 bytes are in use.]
; [GC threshold exceeded with 12,120,912 bytes in use.  Commencing GC.]
; [GC completed with 120,016 bytes retained and 12,000,896 bytes freed.]
; [GC will next occur when at least 12,120,016 bytes are in use.]
; [GC threshold exceeded with 12,133,576 bytes in use.  Commencing GC.] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:28:09.353

有两个“尾递归”函数：sqr-iter 和 zint。

**一般建议**：

为了让编译器优化这些，DEBUG 优化级别需要为 2 或更低。

您可以通过反汇编来查看编译器是否生成尾递归代码。使用功能`disassemble`。

GC 调用本身不是问题。大多数实现不会在 GC 上打印任何内容。CMUCL 默认打印它（IIRC）。CMUCL 可能会为未优化的代码分配大量浮点数 - 这可能会导致大量 GC。

只有当 CMUCL 发生堆栈溢出时，您才会看到尾调用优化不起作用。GCs 本身只显示大量的 consing。

因此，要调试您的问题，您首先需要查看代码是否在使用尾调用优化的情况下编译。你可以反汇编代码。另一种选择是在运行时将代码放入调试器，然后查看堆栈回溯。在堆栈上不应该有大量的递归调用——它们将被跳转所取代。

如果代码以恒定的堆栈空间运行，那么您需要查看浮点数的分配。然后您需要检查代码是否分配了太多浮点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T19:29:48.283

我认为这取决于设置...这是相关的 SBCL。

```
* (declaim (optimize (speed 0) (compilation-speed 0) (safety 3) (debug 3)))
* (defun foo () (bar))
* (defun bar () (foo))
*  (foo)
INFO: Control stack guard page unprotected
Control stack guard page temporarily disabled: proceed with caution

INFO: Control stack guard page reprotected
#<sb-kernel::control-stack-exhausted {1002DBD4D3}> 
```

但是如果你告诉它你希望它运行得快而不用担心调试......它会更好

```
(declaim (optimize (speed 3) (compilation-speed 0) (safety 1) (debug 0)))
(defun foo () (bar))
(defun bar () (foo))
(foo)  ;;; CPU topped out, but no stack issues or garbage collecting 
```

# wpf - 在 Visual Studio 2012 中，ClickOnce“发布”期望在哪里找到 .Net 4 客户端配置文件？

> ID：15436991
> 
> 赞同：4
> 
> 时间：2013-03-15T16:05:10.520
> 
> 标签：wpf, clickonce, publishing, prerequisites, .net-client-profile

安装 Visual Studio 2012 后，发布功能停止工作。**发布无法找到必备的 Microsoft .Net Framework 4 客户端配置文件（x86 和 x64）。以前在 Visual Studio 2010 中这工作得很好。**我使用 64 位 Windows 7。

确切的 Visual Studio 2012 错误消息如下：

```
Error 104 - To enable 'Download prerequisites from the same location 
as my application' in the Prerequisites dialog box, you must download file
'DotNetFX40Client\dotNetFx40_Client_x86_x64.exe' for item 'Microsoft .NET 
Framework 4 Client Profile (x86 and x64)' to your local machine. For more 
information, see http://go.microsoft.com/fwlink/?LinkId=239883 
```

我将文件`dotNetFx40_Client_setup.exe`放在以下位置： `C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper\Packages\DotNetFX40Client`

我也把它留在了原来的位置（注意 v7.0A）：

`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\DotNetFX40Client`

**编辑（解决问题后）：**我看到正确的设置文件（**dotNetFx40_Client_x86_x64.exe**）实际上在 v7.0A 文件夹中。如果我只是从那里复制它，一切都会奏效（而不是下载错误的设置）。

当我将选项“从与我的应用程序相同的位置下载先决条件”更改为“从组件供应商的网站下载先决条件”选项时，发布工作正常（在项目属性 - > 发布 - > 先决条件...）

我注意到（选中的）“Windows Installer 3.1”旁边有一个黄色感叹号，并带有警告：“无法找到引导的先决条件”。为此，我在文件`WindowsInstaller-KB893803-v2-x86.exe`夹中有文件：

`C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages\WindowsInstaller3_1`

该应用程序在过去一年与 Visual Studio 2010 一起发布时在我公司的网络中运行良好。我在 VS 2012 中打开了解决方案文件（第一次），它在本地编译和运行良好。只有发布功能被破坏。

我错过了什么吗？**ClickOnce Publish 期望在哪里找到我的 WPF 应用程序的这些先决条件？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T17:32:23.223

我在回答我自己的问题。当我使用不同的 .Net 4 客户端安装程序时，问题就消失了。适合我的 exe 是**dotNetFx40_Client_x86_x64.exe**，位于：

[http://www.microsoft.com/en-us/download/details.aspx?id=24872](http://www.microsoft.com/en-us/download/details.aspx?id=24872)

错误的安装程序是 dotNetFx40_Client_setup.exe，我是按照 Microsoft MSDN 帮助主题[How to: Include Prerequisites with a ClickOnce Application (Visual Studio 2012)](http://msdn.microsoft.com/en-us/library/vstudio/hh873130.aspx)引导的，这导致我找到了[这个指向 setup 的链接](http://go.microsoft.com/fwlink/?linkid=182804)。我使用 Chrome 下载了我没有意识到的网络安装程序不是我需要的文件。如果我一直使用 IE，这一切都不会发生。我被[这个 StackOverflow 问题](https://stackoverflow.com/questions/12148234/can-not-use-clickonce-publish-on-net-4-0-application-from-vs-2012?rq=1)暗示了这个问题，它建议重命名安装程序。我没有重命名它，而是下载了正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T01:24:38.410

回复：Windows 安装程序：VS2012 不包含与 VS2010 相同的先决条件，但是您可以将软件包从以前的 SDK 文件夹复制到新的文件夹中，它会神奇地出现在 VS2012 的先决条件列表中并且可以正常工作！

# php - 通过 AJAX 删除项目后，页面向上滚动

> ID：15436995
> 
> 赞同：0
> 
> 时间：2013-03-15T16:05:20.953
> 
> 标签：php, ajax

描述：您好，我正在开发在线食品订购网站。我几乎完成了这个项目，但我被困在购物车里。。

问题：当我从购物车中删除商品时遇到问题，当我从购物车中删除商品时，页面向上滚动。我正在使用 AJAX 从购物车中添加和删除商品。

什么是可能的解决方案，以便当我从购物车中删除商品时页面不会向上滚动。？？

您可以在这里查看链接：[http](http://gogaily.com/restaurant_details.php?hotel_id=14) ://gogaily.com/restaurant_details.php?hotel_id=14 页面重定向后单击“菜单”选项卡以查看菜单项...当您单击菜单项时，将显示一次购物车u 从购物车中删除商品页面向上滚动。如何避免页面向上滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:16:37.843

我认为您在删除按钮中使用了锚标记。IE。

```
<a href="#" ...>Delete</a> 
```

像这样的东西。用它做

```
<a href="">Delete</a> 
```

或使用按钮，即

```
<button ...>Delete</button> 
```

希望你的问题会得到解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:16:39.510

那是因为你使用了一个链接元素`href="#"`——空的哈希被浏览器视为“滚动到顶部”。

在执行 JS 代码后，您必须简单地取消“正常”链接功能——关键字是`event.preventDefault`or `return false`（后者用于“传统”事件处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:16:58.490

将 href="#" 替换为 href="javascript:void();"

# php - PHP获取第一个数组元素

> ID：15436996
> 
> 赞同：3
> 
> 时间：2013-03-15T16:05:28.700
> 
> 标签：php, arrays, api, element

嘿，我正在尝试从电影 API 获取数据。格式是这样的：

```
page => 1
results =>
   0 =>
    adult =>
    backdrop_path => /gM3KKixSicG.jpg
    id => 603
    original_title => The Matrix
    release_date => 1999-03-30
    poster_path => /gynBNzwyaioNkjKgN.jpg
    popularity => 10.55
    title => The Matrix
    vote_average => 9
    vote_count => 328
  1 =>
    adult =>
    backdrop_path => /o6XxGMvqKx0.jpg
    id => 605
    original_title => The Matrix Revolutions
    release_date => 2003-10-26
    poster_path => /sKogjhfs5q3aEG8.jpg
    popularity => 5.11
    title => The Matrix Revolutions
    vote_average => 7.5
    vote_count => 98
 etc etc.... 
```

如何仅获取第一个元素 [0] 的数据（如背景路径、原始标题等）？我是 PHP 数组的新手 :)。

当然，这就是我用来输出数组数据的内容：

```
 print_r($theMovie) 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T16:15:53.840

另一种解决方案：

```
$arr = reset($datas['results']); 
```

返回第一个数组元素的值，如果数组为空，则返回 FALSE。

或者

```
$arr = current($datas['results']); 
```

current() 函数只返回内部指针当前指向的数组元素的值。它不会以任何方式移动指针。如果内部指针指向元素列表末尾之外或数组为空，则 current() 返回 FALSE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T16:09:10.243

你可以用这个指向数组，`$theMovie['result'][0]['backdrop_path'];`或者你可以像这样循环遍历它，

```
foreach($theMovie['results'] as $movie){
   echo $movie['backdrop_path'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T16:08:08.020

假设所有这些代码都存储在一个变量中`$datas`：

```
$results = $datas['results'];
$theMovie = $results[0]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T16:08:22.073

尝试

```
$yourArray['results'][0] 
```

但请记住，当结果数组为空时，这会产生错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T16:17:20.273

您可以使用`array_shift`弹出第一个元素，然后检查它是否有效（如果没有结果或该项目不是数组，`array_shift`将返回）。`null`

```
$data = array_shift($theMovie['results']);
if (null !== $data) {
    // process the first result
} 
```

如果要遍历所有结果，`foreach`可以 `while`使用`array_shift`.

```
foreach($theMovie['results'] as $result) {
    echo $result['backdrop_path'];
}

while ($data = array_shift($theMovie['results'])) {
    echo $data['backdrop_path'];
} 
```

或者`$theMovie['result'][0]['backdrop_path'];`在检查`$theMovie['result'][0]`实际设置后，按照已经建议的方式使用。

# java - 您如何自定义配置 RESTeasy 以与 Mockito 一起使用？

> ID：15436997
> 
> 赞同：0
> 
> 时间：2013-03-15T16:05:29.503
> 
> 标签：java, spring, jackson, mockito, resteasy

我试图弄清楚如何配置 RESTeasy 以与 Mockito 一起使用。我必须创建自定义序列化器和反序列化器。我发现[这篇](http://blog.palominolabs.com/2012/06/05/writing-a-custom-jackson-serializer-and-deserializer/)文章谈到了创建自定义序列化器和反序列化器并将它们变成一个模块。

我还找到[了这篇](http://wiki.fasterxml.com/JacksonFAQJaxRs)文章和[这篇](http://jersey.576304.n2.nabble.com/Customizing-ObjectMapper-td6234597.html)关于配置 Jackson 以使用我编写的新自定义模块的文章。

我遇到的问题是我不知道如何测试它。其中一篇文章说

> 答案是在 resteasy-jaxrs.war/WEB-INF/web.xml 的 resteasy.providers 部分中有 Jackson(Jaxb)JsonProvider

我正在使用 Mockito 来测试一切。据我所知，没有制作 resteasy-jaxrs.war 文件。无论如何，我可以伪造这个吗？

我可能还应该补充一点，我正在使用 spring，并且我有一个 applicationContext.xml 文件，该文件仅用于创建假 bean 等以进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:15:38.930

如果您想要单元测试 REST 应用程序，请使用 REST-assured。它是一个非常简单而强大的库——你不需要模拟一切。有关其他选项，请参阅[测试 RESTful 服务的方法？](https://stackoverflow.com/questions/2165561/ways-to-test-restful-services).

请记住，即使您设法模拟所有内容，这样的测试也可能几乎没有用 - 您将测试您的模拟，而不是真正的应用程序。