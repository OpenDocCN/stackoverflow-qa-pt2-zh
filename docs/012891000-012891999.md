# StackOverflow 问答 12891000-12891999

# c# - 在 WPF 中的图像控件中显示拖放图像的预览

> ID：12891001
> 
> 赞同：0
> 
> 时间：2012-10-15T07:26:24.957
> 
> 标签：c#, .net, wpf, desktop-application

在我的应用程序中，我创建了一个具有图像控件的表单，我为其添加了拖放事件功能。我的问题是，一旦用户放入图像，我想向用户显示表单的预览。我已经编写了一个方法来获取表单的屏幕截图并显示它，但我不知道什么时候调用这个方法。如果我从 Drop 事件中调用此方法，则屏幕截图是表单的先前状态。我的意思是如果图像控件包含图像 A 作为初始图像并且用户将图像 B 放入其中，然后调用我的屏幕截图方法给我一个具有图像 A 的表单的屏幕截图。我希望​​有一个事件在 WPF 中可以告诉我控件中的图像渲染完成了吗？我已经尝试过诸如 Loaded、SourceUpdated 等事件，但它们似乎不起作用。

非常感谢任何指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:05:47.430

如果你想要像下图这样的东西。您应该看看[如何在数据绑定 ItemsControls 之间拖放项目](http://www.zagstudio.com/blog/488)。 ![在此处输入图像描述](../Images/df8bda62c63e95cfc9a0f4aab043ebeb.png)

# java - 在 Redhat linux 中初始化 VM 时发生错误

> ID：12891002
> 
> 赞同：0
> 
> 时间：2012-10-15T07:26:34.503
> 
> 标签：java, installation

我下载了 JDK 版本 1.6.33（64 位）并按照[这个说明](http://blog.algoworks.com/archives/210)设置环境。

当我尝试

`echo $JAVA_HOME`

它返回 `/usr/java/jdk1.6.0_33/`，

为了`echo $PATH`

表明

`/usr/java/jdk1.6.0_33//bin:/usr/lib64/qt-3.3/bin:/usr/local /sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin`和

为了`echo $CLASSPATH`

它显示`.:/usr/java/jdk1.6.0_33//lib/classes.zip`。

然后当我尝试启动任何应用程序服务器时，我收到以下错误

> 初始化虚拟机时出错

`java/lang/NoClassDefFoundError: java/lang/Object`

请告诉我我做错了什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:42:42.203

问题是由于双斜杠。试试这个：

```
export JAVA_HOME=/usr/java/jdk1.6.0_33
export PATH=$PATH:$JAVA_HOME/bin 
```

这样，它将修复路径并且可以正常工作。

# iphone - iPhone中的随机图像滑动

> ID：12891006
> 
> 赞同：1
> 
> 时间：2012-10-15T07:26:45.063
> 
> 标签：iphone, image

我必须生成 11 到 20 之间的随机数并将其存储在按钮中。每次生成随机数和在 iPhone 中滑动两个图像的随机数，例如，如果随机数为 12，则图像滑动 12 次然后滑动将是停了下来。

我已经生成了随机数，但无法使用随机数滑动图像。

这是我的代码

```
-(IBAction)btngeneratePressed:(id)sender{

number = 1 + arc4random() % 10 + 10;

for (int j=1;j<number-1;j++)  // generate unique random number only once
{

    NSArray *myImageNames = [NSArray arrayWithObjects:@"1.png", @"2.png", nil];
    //int index = arc4random() % [myImageNames count];

    int index = arc4random() % 2;

    UIImage *myImage = [UIImage imageNamed:[myImageNames objectAtIndex:index]];
    img.image = myImage;

    if(number == j){

        NSLog(@"Number %d ",j);

        UIAlertView *someError = [[UIAlertView alloc] initWithTitle: @"Rendom number" message: @"Image swip" delegate: self cancelButtonTitle: @"Ok" otherButtonTitles: nil];

        [someError show];
        [someError release];
        break;

    }

}
}

- (void)viewDidLoad
{

    number = 1 + arc4random() % 10 + 10;

    NSString *string=[NSString stringWithFormat:@"%i",number];

    int p=string;

    label.text = string;

    for(int j=1;j<number-1;j++)

    {   

        UISwipeGestureRecognizer *recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self 
                                                                                         action:@selector(btngeneratePressed:)]; 
        [recognizer setDirection:(UISwipeGestureRecognizerDirectionLeft)];
        recognizer.numberOfTouchesRequired = 1;
        recognizer.direction=UISwipeGestureRecognizerDirectionLeft;
        [self.view addGestureRecognizer:recognizer];
        [recognizer release];    

        //Add a right swipe gesture recognizer
        recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self 
                                                               action:@selector(btngeneratePressed:)];
        recognizer.numberOfTouchesRequired = 1;
        recognizer.delegate = self;

        [recognizer setDirection:(UISwipeGestureRecognizerDirectionRight)];
        [self.view addGestureRecognizer:recognizer];
        [recognizer release]; 

        if(number == j){

            NSLog(@"Number %d ",j);

            UIAlertView *someError = [[UIAlertView alloc] initWithTitle: @"Rendom number" message: @"Image swip" delegate: self cancelButtonTitle: @"Ok" otherButtonTitles: nil];

            [someError show];
            [someError release];
            break;

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:44:35.110

我不完全理解您要做什么，但是我会通过将其分解为块来解决问题，而不是尝试一次全部完成，然后一切都混乱了。

将伪随机唯一数生成器作为一次任务整理出来，并将其封装在一个类/方法中。弄清楚如何滑动图像并捕捉/计数单次，然后多次滑动 整理图像显示 将它们连接在一起

就目前而言，您正在生成 1 号滑动手势识别器，这绝对是不正确的。你想要一个。

每次调用 btngeneratePressed: 时都会重新生成所有图像，这绝对是低效且缓慢的。

将问题分解为离散的部分并解决每个部分，以构建您需要的最终解决方案。

# ios - 播放 HTML5 音频时原生 iOS 音乐播放器暂停

> ID：12891009
> 
> 赞同：1
> 
> 时间：2012-10-15T07:27:02.580
> 
> 标签：ios, html5-audio, background-music

我的 Google-Fu 让我失望了。

从 HTML5 Web 应用程序中播放声音时，本机 iOS 音乐播放器是否可以不暂停？我知道本机应用程序没有这个问题，但我正在为 HTML5 苦苦挣扎。

（使用 iOS6）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:19:57.683

请看这个话题：[iPod - 让原生音乐应用在后台播放声音](https://stackoverflow.com/questions/4635496/ipod-let-the-native-music-app-to-play-sound-in-background)。我使用相同的方法在玩游戏时使用嵌入的环境和声音来播放 iPod 音乐。

# wordpress - wordpress 从 url 中删除帖子类别

> ID：12891013
> 
> 赞同：2
> 
> 时间：2012-10-15T07:27:17.093
> 
> 标签：wordpress, url, permalinks

我已经为此设置了永久链接

```
> /%postname%/ 
```

但是在 url 中，如果帖子有一个类别，它仍然显示在 url

是否可以更改进行更改，以便此 url：

> [http://www.website.com.au/post-category/post-name/](http://www.website.com.au/post-category/post-name/)

对此

> [http://www.website.com.au/post-name/](http://www.website.com.au/post-name/)

htaccess 看起来像这样

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:30:43.897

安装无类别基础插件：[http ://wordpress.org/extend/plugins/wp-no-category-base/](http://wordpress.org/extend/plugins/wp-no-category-base/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T09:17:47.400

以前的插件将从 URL 中删除类别词。如果您想删除类别，还请尝试以下插件： [http ://wordpress.org/extend/plugins/remove-parents/](http://wordpress.org/extend/plugins/remove-parents/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-23T14:12:42.557

如果您使用的是 Yoast 插件，您可以转到高级 > 永久链接 > 从类别 URL 中剥离类别库。

或者，我写了一篇关于如何在没有下面插件的情况下剥离类别 url 的博客文章。

[http://jonnyjordan.com/blog/how-to-remove-category-from-your-urls-in-wordpress/](http://jonnyjordan.com/blog/how-to-remove-category-from-your-urls-in-wordpress/)

# iphone - 在一个视图中显示两个 UIView 和搜索显示控制器

> ID：12891018
> 
> 赞同：0
> 
> 时间：2012-10-15T07:27:35.970
> 
> 标签：iphone, uiview, uisearchdisplaycontroller

我有`uiview`一个按钮。当单击该按钮时，我正在显示一个`subview`.

子视图包含 a`table view`和 a `search display controller`。当我在搜索栏输入内容时，它将显示搜索结果`tableview`。

一旦搜索完成并返回超级视图并再次返回子视图，显示所有记录的表格视图不可滚动，并且搜索栏包含之前输入的文本，即搜索栏包含文本但`tableview`不是搜索结果表视图。

如果我单击搜索栏的取消按钮，则不会出现此问题，如果我返回超级视图，则不单击取消按钮，就会出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:33:57.437

当您当时使用 searchBar 显示 yourTableview 时，请设置以下代码..

```
searching = NO; // if you use this BOOL value.. 
```

并清除 UISearchBar 的文本，即

```
searchBar.text = @""; 
```

并且在 reloadData 之后`UITableView`

```
-(void)showSearchTable   // its an example
{
     searching = NO;
     searchBar.text = @"";
     [yourTableView reloadData];
} 
```

# java - Jython AttributeError：只读属性

> ID：12891021
> 
> 赞同：5
> 
> 时间：2012-10-15T07:27:40.317
> 
> 标签：java, jython, readonly

我正在尝试编写一个关于 .py 扩展 java 接口的程序，就像[IBM developerworks 上的示例](http://www.ibm.com/developerworks/cn/java/j-lo-jythonconfig/)一样。

但我遇到了这样的问题：

```
AttributeError: read-only attr: cardID 
```

但奇怪的是，如果我将 cardID 重命名为 cardNum，它就可以了。这是我的代码：

卡片信息.py

```
from com.jyt import CardInfo
class CardInfo(CardInfo):
    def __init__(self):
        self.cardName = "Dark Magician"
        self.cardID = "888"

    def getName(self):
        return self.cardName

    def getCardID(self):
        return self.cardID

    def setID(self,newID):
        self.cardID = newID 
```

和java接口：

```
public interface CardInfo {
    public String getCardID();
    public String getName();
    public void setID();
} 
```

和java文件

```
 Object javaObject;
        PythonInterpreter interpreter = new PythonInterpreter();
//      PySystemState sys = Py.getSystemState();
        interpreter.execfile("./res/CardInfo.py");
        interpreter.exec("cardInfo=CardInfo()");
        PyObject pyObject = interpreter.get("cardInfo");
        pyObject.invoke("setID",new PyString("12345"));
        try{
            javaObject = pyObject.__tojava__(CardInfo.class);
            CardInfo cardInfo = (CardInfo)javaObject;
            System.out.println(cardInfo.getCardID());
            System.out.println(cardInfo.getName());
        }catch(Exception e){
            e.printStackTrace();
        } 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T12:16:04.650

这只是一个猜测（现在无法测试它，因为我不在我自己的电脑上），但您的问题可能与[jython 为 javas getter/setter 方法生成属性访问器](http://wiki.python.org/jython/UserGuide#javabean-properties)的（有些未充分记录的）事实有关，这与您的属性名称冲突，从而影响您的实际属性。

`get`如果我的假设是正确的，那么在这种情况下的问题是您有一个与属性具有相同名称（减去部分）的 getter 方法。Jython 看到该方法并为其生成一个属性，这是`read-only`因为没有匹配的 setter 方法。

可能您可以通过将`setID`方法重命名为`setCardID`以便 jython 正确地将属性解释为可写来解决此问题。如果由于某种原因这不起作用，则以下其中一项绝对应该起作用：

*   将属性重命名为其他名称，例如`self.myCardID`
*   或者，将方法重命名为其他名称，例如`getID`

这两种解决方案都应该使属性不再被属性访问器遮蔽。

# javascript - 取消按钮的活动状态

> ID：12891027
> 
> 赞同：0
> 
> 时间：2012-10-15T07:28:11.500
> 
> 标签：javascript, html, css, mobile

我在使用`css`以下代码按下按钮时使用一个来控制动画：

```
.btn_1:active {
 background-color: #4E4F4F;
} 
```

但是当在手机中显示页面时，我触摸`button`并在按钮上拖动手指而不在按钮上释放它，按钮保持`active`状态。

传递按钮时如何取消它？

# .net - 放置texfile的位置

> ID：12891032
> 
> 赞同：0
> 
> 时间：2012-10-15T07:28:46.167
> 
> 标签：.net, visual-studio-2010, c#-4.0, iis-7

我正在 Visual Studio 中创建一个 .net 网站。

该网站利用文本文件的读写，我的问题是在哪里放置我的文本文件，访问文件的物理路径是什么。

在我的项目中，我使用以下语句访问文件

```
var sr = new StreamReader(@"C:\Users\Vinu\Desktop\token.txt"); 
```

我想知道文件的路径应该是什么而不是`@"C:\Users\Vinu\Desktop\token.txt";`

这样我就可以在使用 IIS7 发布站点后访问该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:36:50.850

要回答您的问题，这取决于文件的体积，如果文件的体积很大并且您想将它放在单独的文件服务器中并访问它。您可以将其放置在共享位置`\\sharelocation`并进行访问，否则您可以将其放入应用程序目录本身并使用

```
 Server.Mappath(".") 
```

这将为您提供根目录的物理路径，对于将其放在共享位置的第一个选项，您可以在 appsettings 下的 web.config 中有一个变量，该变量将为您提供共享位置。

我不建议在 App_Data 中使用它的原因是，如果您在网络负载平衡器中，您的 app_data 文件夹特定于您的 Web 应用程序的一个实例，我更喜欢将文件放在共享位置并访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:33:38.897

在您的解决方案中使用“App_Data”文件夹。

如果你真的想在桌面上存储你的数据，使用`Environment.SpecialFolder`枚举来获取动态路径。例如

`Environment.GetFolderPath( Environment.SpecialFolder.Desktop));`

注意：`Environment.SpecialFolder`枚举包含其他位置，如 MyDocuments、ProgramFiles 等，请在此处查看更多信息：http: [//msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)

# sql-server - 如何在 MVC 控制器中调用存储过程？

> ID：12891036
> 
> 赞同：0
> 
> 时间：2012-10-15T07:28:52.963
> 
> 标签：sql-server, asp.net-mvc-3, stored-procedures

> **可能重复：**
> [ASP.NET MVC：调用存储过程的最佳方式](https://stackoverflow.com/questions/4259989/asp-net-mvc-best-way-to-call-stored-procedure)

我正在开发 MCV3 应用程序。

我想在应用程序的控制器之一中调用存储过程。

我已经在用于应用程序的数据库中保存了存储过程。

查询是

```
Create Procedure ConvertLeadToCustomer1
@CompanyID int
as
begin 
update Companies set __Disc__ = 'Customer' where CompanyID = @CompanyID
end 
```

现在，我想将此过程调用到控制器中......

```
namespace CRMWeb.Controllers
{ 
    public class LeadController : Controller
    {
        private CRMWebContainer db = new CRMWebContainer();

        //
        // GET: /Lead/

        public ViewResult Index()
        {
            //return View(db.Companies.ToList());
            return View(db.Companies.OfType<Lead>().ToList());

        }

           public ActionResult Convert(int id)
        {

            // I want to write code here to call stored procedure...

        }
    }
} 
```

怎么称呼它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T07:40:42.897

在 mvc 中没有什么不同，如果使用 ADO.net，下面的代码调用存储过程：

```
public ActionResult Convert(int id)
{
    var connection = new SqlConnection("YOUR CONNECTION STRING");

    var command = new SqlCommand("ConvertLeadToCustomer1",connection)
    command.CommandType = CommandType.StoredProcedure;
    command.Parameters.AddWithValue("@CompanyID", id);

    connection.Open();

    command.ExcuteNonQuery();

    connection.Close();
} 
```

# java - java Apache Cxf HTTP 身份验证

> ID：12891040
> 
> 赞同：5
> 
> 时间：2012-10-15T07:29:17.000
> 
> 标签：java, cxf

我有`WSDL`。我需要进行`HTTP`基本（抢先式）身份验证。该怎么办？

我试过 ：

```
Authenticator myAuth = new Authenticator() {
    @Override
    protected PasswordAuthentication getPasswordAuthentication() {
        return new PasswordAuthentication("user", "pass".toCharArray());
    }
};
Authenticator.setDefault(myAuth); 
```

但它不起作用： 原因：

> java.io.IOException：服务器返回 HTTP 响应代码：401 for URL ..

PS 我使用 Apache CXF 2.6.2 和 JBoss 5.0.1

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-15T11:31:48.163

您为身份验证指定的内容还不够。你应该这样做：

```
private YourService proxy;

public YourServiceWrapper() {
    try {
        final String username = "username";
        final String password = "password";
        Authenticator.setDefault(new Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(
                        username,
                        password.toCharArray());
            }
        });
        URL url = new URL("http://yourserviceurl/YourService?WSDL");
        QName qname = new QName("http://targetnamespace/of/your/wsdl", "YourServiceNameInWsdl");
        Service service = Service.create(url, qname);
        proxy = service.getPort(YourService.class);
        Map<String, Object> requestContext = ((BindingProvider) proxy).getRequestContext();
        requestContext.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, url.toString());
        requestContext.put(BindingProvider.USERNAME_PROPERTY, username);
        requestContext.put(BindingProvider.PASSWORD_PROPERTY, password);
        Map<String, List<String>> headers = new HashMap<String, List<String>>();
        requestContext.put(MessageContext.HTTP_REQUEST_HEADERS, headers);
    } catch (Exception e) {
        LOGGER.error("Error occurred in web service client initialization", e);
    }
} 
```

**特性：**

1.  YourService - 您生成的 Web 服务客户端接口。
2.  YourServiceWrapper() - 初始化服务的包装类构造函数。
3.  url - 带有`?WSDL`扩展名的 Web 服务的 URL。
4.  qname - 第一个构造函数参数：`WSDL`文件中的目标命名空间。第二：您的服务名称来自`WSDL`.

然后您将能够像这样调用您的 Web 服务方法：

```
proxy.whatEverMethod(); 
```

# ruby-on-rails - 通过控制台在关联模型中插入记录

> ID：12891046
> 
> 赞同：2
> 
> 时间：2012-10-15T07:30:06.407
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有 2 个表 User 和 Member 并且关系是 In user

> has_one :member, :class_name => 'User::Member' Member belongs_to :user

我正在尝试使用控制台插入数据，并且正在使用此代码

```
 u = User.create(
    :group         => UserGroup.find_by_slug(:members),
    :first_name    => 'abc',
    :last_name     => 'fgh',
    :company_name  => 'xyz',
    :email         => 'test@test.com',
    :password      => '123456',
    :password_confirmation => '123456'
    )   
 m = User::Member.create(
    :user           => u,
    :pricing_plan   => PricingPlan.order('RANDOM()').first,
    :state          => UserState.order('RANDOM()').first,
    :industry       => Industry.order('RANDOM()').first,
    :fy_start_month => 7
    ) 
```

它抛出这个错误

> 语法错误，意外的 tIDENTIFIER，需要 $end ) m = User::Member.create(

我想知道我的语法有什么问题。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:35:43.620

这可能是由于不可见的字符（不是空格）。您的语法似乎没问题，但是如果您的编辑器允许您显示不可见的内容（例如，在 textmate 中，转到查看 > 显示不可见内容，请尝试这样做。有时我会插入不可见内容而不是空格。

为了给你一个印象，我在说什么：

这是隐形的隐藏

![在此处输入图像描述](../Images/5bb0ef1ae4afc86a9ef51981106a3410.png)

这是无形的显示。您在正常模式下看不到的隐形菱形会导致语法错误：

![在此处输入图像描述](../Images/2cc0429ba5e817c7b2840c70afce8749.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:40:25.463

尝试这个

在您的用户模型中

```
 has_one :member
  attr_accessible :member_attributes
  accepts_nested_attributes_for :member 
```

在您的会员模型中

```
 belongs_to :user 
```

然后在您的控制台和表单中尝试

```
user = User.create(
  :group         => UserGroup.find_by_slug(:members),
  :first_name    => 'abc',
  :last_name     => 'fgh',
  :company_name  => 'xyz',
  :email         => 'test@test.com',
  :password      => '123456',
  :password_confirmation => '123456'
 ) 
```

和

```
user.build_member(
 :pricing_plan   => PricingPlan.order('RANDOM()').first,
 :state          => UserState.order('RANDOM()').first,
 :industry       => Industry.order('RANDOM()').first,
 :fy_start_month => 7
) 
```

或者

```
member = Member.create(
  :user_id           => user.id,
  :pricing_plan   => PricingPlan.order('RANDOM()').first,
  :state          => UserState.order('RANDOM()').first,
  :industry       => Industry.order('RANDOM()').first,
  :fy_start_month => 7
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:33:40.113

我假设`user_id`是您的`foreign key`哪个与`users`表格相关联。如果是这样，请使用以下

```
m= Member.create(
    :user_id           => u.id,
    :pricing_plan   => PricingPlan.order('RANDOM()').first,
    :state          => UserState.order('RANDOM()').first,
    :industry       => Industry.order('RANDOM()').first,
    :fy_start_month => 7
    ) 
```

# cron - Cronjob 不执行 (Cygwin)

> ID：12891048
> 
> 赞同：0
> 
> 时间：2012-10-15T07:30:25.423
> 
> 标签：cron, cygwin

我正在使用 Cygwin 在 Windows 机器和 Apache 服务器之间同步文件夹。如果我执行命令它工作正常，但我无法让 Cronjob 正常工作。

我尝试创建一个简单的 mkdir 命令作为 cronjob，当我保存 crontab 时，它成功安装了它。

我的 Cronjob 是： `*/1 * * * * mkdir newfolder`

我等待新文件夹出现，但没有任何反应。

在`cron.log`它说：

`Cron 7072 fork: child -1 - CREATEPROCESSW failed for c:cygwin/usr/sbin/cron.exe, errno 30`

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:11:18.807

我解决了这个问题：（鼓声）我重新配置它......经常！

我一次又一次地尝试“cron-config”，现在它可以工作了。我仍然没有更聪明地配置错误/正确。

如果遇到同样问题的人偶然发现此问题，我很抱歉提供模糊的帮助。

# java - 随机数生成查询

> ID：12891049
> 
> 赞同：0
> 
> 时间：2012-10-15T07:30:27.127
> 
> 标签：java, random

我使用以下代码生成随机数：

```
long randNo = Math.round(Math.random() * 10000); 
```

我在某些情况下发现了重复项。它有可能产生相同的数字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:33:54.183

是的，这是可能的。如果您需要从 0 到 9999 生成 10000 个不同的随机数。您可以生成 10000 个连续数字的列表，然后调用`Collections.shuffle`它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:55:04.780

对于随机数，该范围内的所有数字的可能性相同。这意味着如果您得到一个数字，则下一个值出现的可能性与第一次出现时一样。

顺便说一句：在您的示例中使用 round 不是一个好主意，因为数字 1 到 9999 的可能性相同，但数字 0 和 10000 的可能性只有一半，因为它们只出现在向下舍入的一半或向上舍入的一半上。

更有效的模式是使用

```
Random rand = new Random();

// as needed
int num = rand.nextInt(10000); // will be [0, 10000) 
```

如果您需要生成唯一编号，您可以使用 Collections.shuffle

```
List<Integer> nums = new ArrayList<Integer>();
for(int i = 0; i < 10000; i++) nums.add(i);
Collections.shuffle(nums); 
```

这将为您提供多达 10000 个随机顺序的唯一数字。

# php - PHP/SQL 重复循环，直到数据在 PHP 中唯一或创建 SQL 查询 ad hoc

> ID：12891050
> 
> 赞同：0
> 
> 时间：2012-10-15T07:30:32.030
> 
> 标签：php, codeigniter, controls, key, unique

我需要为用户生成密钥代码，所以我需要它在数据库中是唯一的。

我需要重复这个循环，直到键是唯一的：

```
create key;

if($key is not in db){

  insert key;

}else{

repeat control with new key;

} 
```

我想到了 while() 但不明白如何实现它。

插入数据库唯一键和更新数据库唯一键的其他方法可以直接用 sql 查询而不是使用 php 脚本编写？（使用 Sql 查询插入/更新唯一键）

希望是清楚的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T07:33:24.703

```
$key = create_unique_key();

while( this_key_exists($key) )
{
 $key = create_unique_key();
}
//If you got here - the value of $key is unique and doesn't exist in db 
```

说明：您首先使用自定义函数创建了一个唯一键`create_uniuqe_key`，所以现在我们有了 的起始值`$key`。其次，我们有一个`while`循环，请记住：

> 而（表达式）

只要表达式返回 true，我们就会进入循环。因此，只要我们的自定义函数`this_key_exists`（返回 true 或 false）返回 true（这意味着 - 密钥不是 uniuqe - 存在于数据库中），我们将创建一个新的唯一密钥并一次又一次地检查它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T07:36:59.807

尝试仅使用[UUID](http://dev.mysql.com/doc/refman/5.0/en/miscellaneous-functions.html#function_uuid)

或在数据库中的列上添加唯一约束并继续尝试插入行，直到没有mysql错误

```
do {
    //insert using uniqid() or some random string
} while( $check_for_mysql_error ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:34:32.850

```
/**
 * Creates a unique URL for a page language by adding a 'dash number'
 * at the end of the provided user URL
 * @param string $page The current page
 * @param string $url The URL to make unique
 * @param type $lang The language to make unique for (you can have the same URL for same page in diffrent languages)
 * @return string The new URL
 */
function uniquePageUrl($page, $url, $lang){
    while(TRUE){
        $result = $this->db->from('pages')->where('page <>', $page)->where('lang',$lang)->where('url',$url)->limit(1)->get()->row();
        if($result) //we already have a page URL for this language like the one we try to use
            $url = increment_string($url,'-');
        else
            return $url;
    }
} 
```

# c# - 使用 c# 检查 htmlnode 集合的 null

> ID：12891051
> 
> 赞同：1
> 
> 时间：2012-10-15T07:30:32.853
> 
> 标签：c#, html-parsing, html-agility-pack

我正在使用 html 敏捷包来使用 c# 解析 html。

```
 HtmlNodeCollection hNodes = myHtmDoc.DocumentNode.SelectNodes("//h1"); 
```

我正在遍历这个 hNodes。有时它可能为空。那么如何检查 hNodes 是否为空。对于字符串，您可以使用 IsNullOrEmpty。像这样，这里有什么可以检查 null 的。我想要结果为

```
If (hNodes != null)
 DoSomething 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:32:45.110

您的代码是完美的，您可以通过这句话检查成员的可空性。

# ios - 如何在 ipad 的一个主视图中给出两个视图？

> ID：12891056
> 
> 赞同：0
> 
> 时间：2012-10-15T07:31:08.763
> 
> 标签：ios, user-interface

我想在一个主视图中有两个表视图。我的应用程序仅在横向模式下运行。左侧是第一个表格视图，右侧是第二个表格视图。我现在有这两个。

我需要在右侧再调用 4 个额外视图。但是这个视图调用应该来自左侧的表格视图，因为在左侧，显示了一个视图名称列表。如果我单击任何单元格，右侧视图应显示我单击的视图。

我没有使用 splitview，也不想在此应用程序中使用 splitview，那么如何从左侧调用该视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:08:01.863

您可以只使用两个表，一个在左侧，第二个在右侧： tableview1.tag = 0; tableview.tag = 2;

只需在单击左侧表格上的任何行时重新加载带有 tag = 2 的表格视图

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section        {
     if (tableView.tag == 1)
                return 5;
            else if (tableView.tag == 2)
                return 10;
        }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

            static NSString *identifier = @"CellIdentifier";    
            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];

            if (cell == nil) {
                cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier] autorelease];

            }
            if (tableView.tag == 1)
            {
        ///// Do whatever you want to do
            }
            else if (tableView.tag == 2)
            {
        ///// Do whatever you want to do
            }
            cell.textLabel.text = @"example";       
            return cell;
        } 
```

# android - 尝试通过膨胀 xml 添加视图时出现 Java 非法状态异常

> ID：12891058
> 
> 赞同：0
> 
> 时间：2012-10-15T07:31:17.677
> 
> 标签：android, android-relativelayout, layout-inflater, illegalstateexception

Em 得到 java.lang.IllegalStateException: 指定的孩子已经有一个父母。您必须首先在孩子的父母上调用 removeView()。

无法找出必须删除哪个视图，任何帮助都会非常有帮助。

这是代码片段

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:id="@+id/mainLayout"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

</RelativeLayout> 
```

数据.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

</RelativeLayout> 
```

活动代码

```
public class ToDo extends Activity {
    /** Called when the activity is first created. */
    Button addNew;
    RelativeLayout mainLayout;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mainLayout=(RelativeLayout)findViewById(R.id.mainLayout);

        RelativeLayout rel;
        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        for(int idx=0;idx<2;idx++){
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

            rel = (RelativeLayout) inflater.inflate(R.layout.data,null);
            params.setMargins(0, 50, 0, 0);

             TextView fromWeb= (TextView) rel.findViewById(R.id.txt);
             fromWeb.setText("AA");

             mainLayout.addView(rel,params);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:40:41.390

下面的代码不正确：

```
TextView fromWeb= (TextView) rel.findViewById(R.id.txt);
fromWeb.setText("AA");
rel.addView(fromWeb,params); // the TextView is alredy in the rel RelativeLayout!
mainLayout.addView(rel); 
```

因为您**再次**添加（使用`addView`方法）`TextView`已经在布局文件中（正如您之前使用 搜索它`findViewById`）。相反，它应该是这样的：

```
TextView fromWeb= (TextView) rel.findViewById(R.id.txt);
fromWeb.setText("AA");
mainLayout.addView(rel); 
```

如果你想为你的`TextView`然后在布局文件中设置它们的边距：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="50dp"
        android:text="TextView" />

</RelativeLayout> 
```

# c# - 为什么我的代码不能在 Java 中运行？

> ID：12891061
> 
> 赞同：-1
> 
> 时间：2012-10-15T07:31:42.113
> 
> 标签：c#, java

这是我在 C# 中的代码：

```
 string month;
        do
        {
            Console.WriteLine("put month");

            month = Console.ReadLine();
            switch (month)
            {
                case "1":
                    Console.WriteLine("dsad");
                    Console.ReadLine();
                    Console.WriteLine("\neheheh!");
                    Console.WriteLine("\nhihihihi");
                    break;

            }
        }while(month!="Quit"); 
```

这是Java：

```
 Console C = System.console();

    String month;
    int year;

    do {
        month = C.readLine("\nPlease put a valid month: \n");
        switch (month) {
            case "1":

                C.readLine("\nPlease put a valid year: \n");
                System.out.println("\nThe month is January!");
                System.out.println("\nJanuary has 31 days!");
                break; 
        }
    } while (month != "Quit"); 
```

我的问题是即使我输入“退出”这个词，我的 Java 代码也不会终止。

[这是对这个问题](https://stackoverflow.com/questions/12882907/writing-an-infinite-loop-on-the-command-line)的跟进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T07:35:18.290

使用`equals`等值方法。

```
do{
}while (!month.equals("Quit")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T07:35:25.213

在 Java 中，使用[`.equals()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equals%28java.lang.Object%29)而不是`==`比较字符串：

> 将此字符串与指定对象进行比较。当且仅当参数不为 null 并且是表示与此对象相同的字符序列的 String 对象时，结果才为真。

如果你使用`==`(or `!=`)，你只是测试引用相等，而不是值相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:39:43.177

您应该在 Java 中使用`.equals()`代替`==`或代替`!=`String。还有一点，不要使用`!month.equals("Quit")`，可能会导致 NullPointerException。

作为经验丰富的开发人员，他们总是这样写：`!"Quit".equals(month)`

# mysql - 对 SQL 表达式执行计数

> ID：12891062
> 
> 赞同：-2
> 
> 时间：2012-10-15T07:31:43.397
> 
> 标签：mysql, sql

我目前有当前的查询：

```
SELECT count(*) as number_of_items,
    if(first_name <> "", 1, 0)
    + if(last_name <> "", 1, 0)
    + if(current_avatar is not null, 1, 0)
    + if(username <> "" 
        AND email <> "" 
        AND gender <> "" 
        AND date_of_birth <> "" ,1,0) AS completeness 
FROM `user` HAVING (completeness = '4') 
```

但这并没有按预期工作。似乎它们的完整性都为 2。如果我删除计数和有子句，它确实会看到所有不同的完整性计数（从 1 到 4）。有没有办法计算个人的完整性计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:52:16.980

你需要一个`group by completeness`才能工作：

```
SELECT count(*) as number_of_items,
    if(first_name <> "", 1, 0)
    + if(last_name <> "", 1, 0)
    + if(current_avatar is not null, 1, 0)
    + if(username <> "" 
        AND email <> "" 
        AND gender <> "" 
        AND date_of_birth <> "" ,1,0) AS completeness 
FROM `user`
GROUP BY completeness
HAVING (completeness = '4') 
```

# java - 在超类和基类的构造函数中调用层次结构

> ID：12891064
> 
> 赞同：3
> 
> 时间：2012-10-15T07:31:49.613
> 
> 标签：java, inheritance, constructor

```
class a
{
a(){System.out.println("A");}
}

class b extends a
{
b()
{
super();
System.out.println("B");}
}

class c extends b
{
c(){System.out.println("c");}
}

class last
{
public static void main(String aaa[])
{
c obj = new c();
}
} 
```

输出如下：

一个

乙

C

不应该是：

一个

一个

乙

C

因为 super 关键字

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T07:33:25.983

`super();`如果您未明确指定，则始终存在。如果您没有明确指定，Java 只会添加自动调用。

所以你的代码

```
 B() {
        super();
        System.out.println("B");
    } 
```

和

```
 B() {
        System.out.println("B");
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T07:33:12.093

不。如果您`super`在构造函数中调用，则不会添加自动调用。如果您不使用，编译器只会添加自动调用。因此`super();`in 行`b`是不必要的，因为这正是编译器将为您添加的内容（对默认构造函数的调用）。也就是说，这两位源代码产生相同的字节码：

```
// This
class b {
    b() {
    }
}

// Results in the same bytecode as this
class b {
    b() {
        super();
    }
} 
```

能够直接调用超类构造函数的原因是为了向它传递参数，因为编译器只会添加对默认构造函数的调用（如果超类上没有调用，则会报错）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T07:35:56.310

`super();`**通过继承树**在任何构造函数中调用**一次**，无论是显式执行还是隐式执行。所以你不应该期望“A”会被打印两次。

 **这不会编译：

```
b()
{
    super();
    super();
    System.out.println("B");
} 
```

**错误消息：** *构造函数必须是构造函数中的第一条语句。*

这意味着您不允许`super()`在构造函数中多次调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T07:40:51.780

如果您使用 extends 关键字创建其他类的子类，那么 java 编译器会将*super()*调用作为构造函数的第一行（以防您自己没有这样做）。在您的示例中，类**a**扩展（默认情况下）*java.lang.Object()*并在编译后第一行是 call *super()*，它调用*Object*默认构造函数。所以在运行子类构造函数中的代码之前，运行其超类构造函数中的代码。

为什么**A**没有打印多次？因为 Java 编译器只有在你自己没有这样做的情况下才会在构造函数的开头添加*super() 。*（例如，您可能想调用接受某些参数的超类构造函数）

希望这能澄清一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-05T19:32:09.093

```
package threaddemo;

public class NewClass {
    NewClass() {
        System.out.println("hello");
    }
}

class Child extends NewClass {

    Child() {
        System.out.println("child");
    }

    public static void main(String []ar) {
        Child c1=new Child();
    }
} 
```**

# r - 显示两个或多个对象之间差异的功能

> ID：12891067
> 
> 赞同：4
> 
> 时间：2012-10-15T07:32:07.327
> 
> 标签：r

使用 R 时，我通常使用`identical(a,b)`检查对象`a`和`b`是否相同。如果返回`FALSE`，我希望能够看到这些差异在哪里......是否有一个函数可以告诉我这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T08:04:21.660

您正在寻找 all.equal()

```
a <- data.frame(A = 1)
b <- data.frame(B = 1)
all.equal(a, b)

[1] "Names: 1 string mismatch"

d <- data.frame(B = 2)
all.equal(b, d)

"Component 1: Mean relative difference: 1"

all.equal(a, d)

[1] "Names: 1 string mismatch"                
[2] "Component 1: Mean relative difference: 1" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T08:31:38.127

这并不能完全回答您的问题，但您可能也对[“比较”包](http://cran.r-project.org/web/packages/compare/)感兴趣。

特别是，`allowAll=TRUE`该函数有一个参数“”，`compare()`它似乎试图转换比较对象以匹配输入，它说明需要进行哪些转换以及对象是否相同。

首先，一些数据。“a”、“b”、“d”和“e”非常相似。

```
a <- data.frame(A = 1:10, B = LETTERS[1:10])
b <- data.frame(C = 1:10, B = LETTERS[1:10])
d <- data.frame(A = 1:10, B = letters[1:10])
e <- data.frame(A = 1:10, B = letters[1:10])
f <- data.frame(A = c(1, 3, 4, 5, 6, 7, 8, 11, 12, 13), 
                B = LETTERS[c(1, 3, 2, 4, 5, 6, 9, 8, 7, 10)]) 
```

现在，使用比较来查看它是否能够使数据相同。对于“b”、“d”和“e”，它能够应用某些变换使它们与“a”相同，但在比较“f”和“a”时却不能这样做。

```
(w <- compare(a, b, allowAll=TRUE))
# TRUE
#   renamed
#   dropped names
(x <- compare(a, d, allowAll=TRUE))
# TRUE 
#   [B] dropped attributes
(y <- compare(a, e, allowAll=TRUE))
# TRUE 
#   [B] dropped attributes
(z <- compare(a, f, allowAll=TRUE))
# FALSE [FALSE, FALSE]
#   [A] coerced from <numeric> to <integer> 
```

您还可以查看有关比较对象的更多详细信息。

```
str(x)
# List of 8
#  $ result          : logi TRUE
#  $ detailedResult  : Named logi [1:2] TRUE TRUE
#   ..- attr(*, "names")= chr [1:2] "A" "B"
#  $ transform       : Named chr "[B] dropped attributes"
#   ..- attr(*, "names")= chr "B"
#  $ tM              :'data.frame':  10 obs. of  2 variables:
#   ..$ A: int [1:10] 1 2 3 4 5 6 7 8 9 10
#   ..$ B: int [1:10] 1 2 3 4 5 6 7 8 9 10
#  $ tC              :'data.frame': 10 obs. of  2 variables:
#   ..$ A: int [1:10] 1 2 3 4 5 6 7 8 9 10
#   ..$ B: int [1:10] 1 2 3 4 5 6 7 8 9 10
#  $ tMpartial       :'data.frame': 10 obs. of  2 variables:
#   ..$ A: int [1:10] 1 2 3 4 5 6 7 8 9 10
#   ..$ B: Factor w/ 10 levels "A","B","C","D",..: 1 2 3 4 5 6 7 8 9 10
#  $ tCpartial       :'data.frame': 10 obs. of  2 variables:
#   ..$ A: int [1:10] 1 2 3 4 5 6 7 8 9 10
#  ..$ B: Factor w/ 10 levels "a","b","c","d",..: 1 2 3 4 5 6 7 8 9 10
#  $ partialTransform: chr(0) 
#  - attr(*, "class")= chr [1:2] "multipleComparison" "comparison" 
```

该包还包括其他几个函数，以及许多可以限制或扩展比较前允许的转换类型的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T07:36:25.023

您可以使用创建具有逻辑值的对象

```
a == b 
```

这将具有`FALSE`两个对象具有不同值的值。

您还可以使用：

```
a[a != b] 
```

或者

```
b[a != b] 
```

看看差异在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-14T19:41:09.290

我有机会确定两个数据帧 c1 和 c2 的不同之处，并创建了像这样的快速破解。如果对您有帮助，请继续调整。

```
for (i in 1:nrow(c1)) {
  if (!identical(c1[i,], c2[i,])) {
    print(paste("Differs in row", i))
    stop()
  }
} 
```

# php - 选择不同的 parent_id

> ID：12891069
> 
> 赞同：-1
> 
> 时间：2012-10-15T07:32:13.757
> 
> 标签：php, mysql

```
 //select parent_id - display unique value
<?php
//database connection
$con = mysql_connect("xxxx","xxxx","xxxx");
if (!$con) {
  die('Could not connect: ' . mysql_error());
}
mysql_select_db("btreedata", $con);
//select distinct query
$query  = mysql_query("SELECT DISTINCT parent_id FROM btree");
$result = mysql_query($sql); 
//dropdown list
echo "<select name='parent_id'>"; 
while ($row = mysql_fetch_array($result)) { 
    echo "<option value='".$row[0]."'>".$row[0]."</option>"; 
} 
echo "</select>"; 
?> 
```

输出显示如下：

```
1000
1000
1004
1004
1003
1001
1005
1001 
```

我怎样才能只显示

```
1000
1001
1003
1004
1005 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:36:32.897

```
SELECT  parent_id FROM btree group by parent_id order by parent_id ASC 
```

# android - Android Google Map：如何绘制具有（1、2、3、4、5..等）文本的图钉？

> ID：12891070
> 
> 赞同：3
> 
> 时间：2012-10-15T07:32:19.837
> 
> 标签：android, android-maps

![在此处输入图像描述](../Images/642794ff19cbf0ed960f5cd3f5839f69.png)

我需要显示我在地图上绘制的图钉内的文本我如何在 android 中实现它任何想法请为此提供任何建议。为了绘制图钉，我使用了 MyItemized 覆盖类。下面是我班级的代码..

```
public class MyItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

    public MyItemizedOverlay(Drawable defaultMarker, Context ctx) {
        super(boundCenterBottom(defaultMarker));

    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    public void clear() {

        mOverlays.clear();
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    @Override
    protected boolean onTap(int index) {
        return true;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) {

        return false;
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {
        if (!shadow) {
            super.draw(canvas, mapView, false);
        }
    }

} 
```

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:35:49.173

做这样的事情并根据您的方便调整文本的位置和大小

```
public void draw(Canvas canvas, MapView mapView, boolean shadow) 
{

super.draw(canvas, mapView, shadow);
    int n = size();
    Projection proj = mapView.getProjection();
    Point out;
    Paint paint = new Paint();
    paint.setTextSize(20);
    paint.setColor(Color.BLACK);
    for (int i = 0; i < n; i++) 
    {
    GeoPoint geoPoint = mOverlays.get(i).getPoint();
    out = new Point();
        proj.toPixels(geoPoint, out);
    canvas.drawText("" + i, out.x, out.y, paint);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:44:50.753

您需要为每个“ItemizedOverlay”提供不同的可绘制对象。

或者覆盖那个'ItemizedOverlay's'绘图方法并在drawable上绘制数字？

对于逐项叠加的动态绘图，请遵循[本](http://deckjockey.blogspot.co.uk/2010/01/android-baloon-display-on-map.html)教程。即使它是一个气球标注，您也可以对其进行自定义以使其适合您。

# sql - 学生课程表查询收藏课程

> ID：12891071
> 
> 赞同：1
> 
> 时间：2012-10-15T07:32:22.723
> 
> 标签：sql, join

我有三张桌子：

```
Student(StudentID, StudentName)
Course(CourseID, CourseName)
StudentCourse(StudentID, CourseID) -- junction table to assign courses to students 
```

我将如何查询以获得最喜欢的课程 - “注册学生人数最多的课程”？

[SQLFiddle](http://sqlfiddle.com/#!3/7fc66/1)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T07:37:12.267

尝试使用`TOP...WITH TIES`

```
SELECT  TOP 1 WITH TIES c.CourseName,
        COUNT(c.CourseID) totalCount
FROM    student a
        INNER JOIN studentcourse b
            ON a.studentID = b.studentID
        INNER JOIN course c
            ON b.courseID = c.courseID
GROUP BY c.CourseName
ORDER BY totalCount DESC 
```

`WITH TIES`显示具有相同最高计数的记录。

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/7fc66/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:39:48.107

```
SELECT TOP 1 WITH TIES COURSEID 
FROM   STUDENTCOURSE 
GROUP  BY COURSEID 
ORDER  BY Count(*) DESC 
```

# excel - 如何根据excel中每个月的天数从每日值计算每月值？

> ID：12891088
> 
> 赞同：-1
> 
> 时间：2012-10-15T07:33:27.157
> 
> 标签：excel

我有一些 2000 年的每日值如下：

```
 A   B          C 
     daily   monthly
 1   0.5       .
 2   0.2       .
 3   0.4       .
 4   0.6       .
 .    .
 .    .
 .    .
366  0.8 
```

我想按月计算 2000 年每个月的天数？请问有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:38:49.933

```
=B2 / DAY(DATE(2000,MONTH(DATE(2000,1,1)-1+A2)+1,1)-1) 
```

*   `DATE(2000,1,1)-1+A2`将获得由 A 表示的日期。
*   `DAY(DATE(2000,MONTH(DATE(2000,1,1)-1+A2)+1,1)-1)`将获得该月的天数。

请注意，2000 年是闰年，因此最后一条记录实际上应该是第 366 天，而不是 365 天。

# c++ - C ++如何从函数返回和收集地址

> ID：12891093
> 
> 赞同：2
> 
> 时间：2012-10-15T07:33:44.660
> 
> 标签：c++, parameters, return

我需要使用什么返回值和变量类型来捕获传递给函数的变量地址的返回值？

说：

```
RETURNTYPE get_address(int num){
return &num;
}

int main(){
int num = 1;
DATATYPE = get_address(num);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T07:36:50.100

RETURNTYPE 和 DATATYPE 应该是`int*`，但请注意，返回指向函数参数的指针没有多大意义。

只要函数正在执行，函数参数就存在。一旦函数返回该变量不再存在并且使用返回的地址本质上是未定义的行为。

如果您想在调用站点将变量的地址用作参数，那么您根本不需要该函数`get_address()`，只需使用`&`运算符：

```
int main(){
  int num = 1;
  int* pnum = &num;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T07:41:13.060

**如果您可以访问 C++11，则可以使用内置的[std::addressof](http://en.cppreference.com/w/cpp/memory/addressof)。**

您可以实现一个返回参数地址的通用函数，如下所示：

```
template<typename T>
T* addr(T& param)
{
   return (T*)&(char&)param;
} 
```

（这是C++11的实现，之所以这样是因为一元`&`可以重载）

**请注意，您必须通过引用传递参数，**否则您将返回局部变量的地址，这可能导致未定义的行为。

或者您可以简单地使用`&`. :)

> 我只需要验证 num 上的地址在按值传递时在函数内部和外部是不同的。

您可以通过值和引用传递相同的参数：

```
void compareAddresses(int passedByValue, int& passedByReference)
{
   std::cout << &passedByValue << " " << &passedByReference;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T07:36:38.277

指针是保存地址的变量。所以你需要指向 int 的指针。

```
int* get_address (int num) {
    return &num;
}

int main () {
    int num = 1;
    int* pointer = get_address(num);
    return 0;
} 
```

这当然不会起作用，因为您通过复制传递值，并且变量将从堆栈中释放并且指针将无效。

如果你需要一个函数，你应该通过引用传递它（这将返回变量的正确指针地址）：

```
int* get_address (int &num) {
    return &num;
} 
```

虽然你不需要函数。有点过分了。这工作得很好：

```
int* pointer = &num; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T07:40:09.603

你不能，或者我应该说你不应该返回局部范围变量的地址，因为它们在函数返回后不再存在。因此，你得到的只是垃圾。

```
int num = 1;
int* addr = &num; 
```

在 C++11 中，当您不知道类型时可以使用 auto，但不能从函数返回 auto。

```
auto num = 1;
auto addr = &num; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T07:44:05.633

函数完成后，局部变量被销毁。函数调用可能会被其他函数调用覆盖。你不会得到你想要的。所以你不应该返回一个指向函数局部变量的指针。

# javascript - 使用 eval 获得正确的范围

> ID：12891094
> 
> 赞同：0
> 
> 时间：2012-10-15T07:33:52.280
> 
> 标签：javascript, eval

我正在研究这个脚本，它可以让您使用插值变量构建正则表达式。目前我得到了这个，它工作得很好：

```
function sRegExp( regex, vars ) {
  vars = Array.prototype.slice.call( arguments, 1 );
  regex = regex.toString();
  var newRegex = regex.replace(/(^\/|\/$|\/([igm]+)$)/g, '')
    .replace( /#\{(\d)\}/g, function( a, b ) { return vars[ +b ]; });
  var mods = regex.match( /\/([igm]+)$/ );
  return new RegExp( newRegex, mods ? mods[1] : '' );
} 
```

我像这样使用它：

```
function func() {
  var foo = 'lol';
  return sRegExp( /baz #{0}/i, foo );
}

console.log( func() ); //=> /baz lol/i 
```

我想通过使用变量名来改进这个脚本，而不是使用索引并将变量作为参数传递，所以我想到了使用`eval`，所以我去掉`vars`并重构了代码：

```
function sRegExp( regex ) {
  regex = regex.toString();
  var newRegex = regex.replace(/(^\/|\/$|\/([igm]+)$)/g, '')
   .replace( /#\{(\w+)\}/g, function( a, b ) { return eval( b ); });
                 __^__                               __^__
  var mods = regex.match( /\/([igm]+)$/ );
  return new RegExp( newRegex, mods ? mods[1] : '' );
} 
```

上一个示例现在的问题是：

```
console.log( func() ); //=> foo is not defined 
```

但在全球范围内...

```
var foo = 'lol';
function func() {
  return sRegExp( /baz #{foo}/i );
}

console.log( func() ); //=> /baz lol/i 
```

如何设置`eval`. 我试过`eval.call(func)`了，但这显然没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:50:58.777

您不能设置 的范围`eval`。它继承了本地执行上下文，因此只能看到其调用上下文看到的内容（在本例中为 within `func`）。不幸的是，没有办法解决这个问题。

> 当控制进入 eval 代码的执行上下文时，先前的活动执行上下文（称为调用上下文）用于确定作用域链、变量对象和 this 值。如果没有调用上下文，则初始化作用域链、变量实例化和 this 值的确定就像全局代码一样执行。

来自：[ES 3.1 10.2.2 评估代码](http://bclary.com/2004/11/07/#a-10.2.2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T07:54:24.043

我不喜欢`eval`也不喜欢弄乱全球空间。所以，我的回答是有偏见的。

您可以将命名变量作为参数传递。

```
function func() {
  return sRegExp( /baz #{foo}/i, { foo: "lol" } );
} 
```

和

```
function sRegExp( regex, vars ) {
  ...
  var newRegex = regex.replace(/(^\/|\/$|\/([igm]+)$)/g, '')
      .replace( /#\{(\w+)\}/g, function( a, b ) { return vars[b]; });
  ...
} 
```

# clearcase - 如何通过 cleartool 命令将文件夹中的所有文件添加到源代码管理？

> ID：12891096
> 
> 赞同：2
> 
> 时间：2012-10-15T07:33:51.997
> 
> 标签：clearcase, clearcase-ucm, cleartool

我有一个文件夹，其中有很多文件和子文件夹，通过 UI 将其添加到源代码控制会耗费大量时间。

如何使用 cleartool 将所有文件（包括子文件夹内的文件）添加到源代码管理？

（我正在使用clearcase UCM）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:58:02.007

正如“[我如何使用 ClearCase 以递归方式“添加到源代码控制......”](https://stackoverflow.com/questions/138321/how-can-i-use-clearcase-to-add-to-source-control-recursively)中所述，`clearfsimport`这是要走的路。

但是，`clearfsimport`将在您的视图中导入一个源，因此：

*   最好将源代码保留在您的视图*之外*（以避免在 ClearCase 尝试将源文件添加到同一目录的目标中时产生混淆）
*   您必须首先“清理”源目录（因为该`clearfsimport`命令将导入...您提到的根目录下的*所有文件）*

请参阅“[在 ClearCase 中创建新的子目录结构？](https://stackoverflow.com/questions/416875/creating-a-new-subdirectory-structure-in-clearcase/418196#418196) ”作为示例：您可以先*预览*导入的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-05T12:15:06.710

请用户 clearfsimport 或者如果您正在使用 eclipse 或 Intellij 则有来自 sourceforge (eclipse) 的插件，可以选择一次将整个项目共享到 CLearcase，以下是插件详细信息。 [https://sourceforge.net/projects/eclipse-ccase/](https://sourceforge.net/projects/eclipse-ccase/) 注意：Clearcase 有一个限制，如果有一个单行超过 8000 个字符的文本文件，使用 clearfimport 实用程序在运行时会出错，这个可以解决通过编写自己的 bash 脚本，通过处理异常情况进行递归签入。希望能帮助到你 。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-04-28T12:40:37.750

我从一个类似的 clearcase 问题中看到了另一条评论，该评论建议在所需的最顶层目录中输入“*”，全选，rc->cc->add to source control。

# visual-studio-2010 - 链接：致命错误 LNK1104：无法打开文件 'OrgeMain_d.lib。尝试设置一个 ogre3d 应用程序

> ID：12891106
> 
> 赞同：0
> 
> 时间：2012-10-15T07:34:43.793
> 
> 标签：visual-studio-2010, linker, installation, ogre, ogre3d

我四处搜寻，找不到任何与我的问题有关的东西。

```
#include "Ogre\ExampleApplication.h"

class Example1 : public ExampleApplication
{
public:
    void createScene()
    {
    }
};

int main(void)
{
    Example1 app;
    app.go();

    return 0;
} 
```

我采取的步骤：

*   将 ...\OgreSDK_vc10_v1-7-4\include 添加到我的项目的包含路径中。
*   将 ...\OgreSDK_vc10_v1-7-4\boost_1_42 添加到我的项目的包含路径中。
*   添加 ...\OgreSDK_vc10_v1-7-4\boost_1_42\lib 到我的库路径。
*   添加 ...\OgreSDK_vc10_v1-7-4\lib\debug 到我的库路径。
*   链接 OgreMain_d.lib 和 OIS_d.lib

我也尝试过 Ogre 网站教你的方式。但我得到同样的错误。使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:06:05.180

似乎库名称拼写错误。它应该是 OgreMain_d.lib，而不是 OrgeMain_d.lib。

# c# - 全局注册动作过滤器时跳过特定动作的过滤器

> ID：12891115
> 
> 赞同：12
> 
> 时间：2012-10-15T07:35:36.797
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我编写了自己的动作过滤器并在 global.asax 文件中注册，现在我的问题是如何跳过特定动作的过滤器，我通过为例如创建自定义属性`DontValidate` 并将其放置在我的动作上来考虑这一点想要跳过验证，在我的操作过滤器代码中，我会设置一个条件，如果操作包含 `DontValidate`属性，则跳过验证。所以目前我不知道如何实现它：

下面的代码是我的验证操作过滤器

```
 public class ValidationActionFilter : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext context)
        {
            if (context.Request.Method.ToString() == "OPTIONS") return;
            //bool dontValidate =  context.ActionDescriptor. // here im stuck how to do
            var modelState = context.ModelState;
            if (!modelState.IsValid)
            {
                JsonValue errors = new JsonObject();
                foreach (var key in modelState.Keys)
                {
                    // some stuff
                }

                context.Response  = context.Request.CreateResponse<JsonValue>(HttpStatusCode.BadRequest, errors);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-15T07:52:34.493

`ActionDescriptor`您可以从上下文的属性中获取用于装饰控制器操作的属性列表：

```
public class ValidationActionFilter : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext context)
    {
        if (context.ActionDescriptor.GetCustomAttributes<DontValidateAttribute>().Any())
        {
            // The controller action is decorated with the [DontValidate]
            // custom attribute => don't do anything.
            return;
        }

        if (context.Request.Method.ToString() == "OPTIONS") return;
        var modelState = context.ModelState;
        if (!modelState.IsValid)
        {
            JsonValue errors = new JsonObject();
            foreach (var key in modelState.Keys)
            {
                // some stuff
            }

            context.Response = context.Request.CreateResponse<JsonValue>(HttpStatusCode.BadRequest, errors);
        }
    }
} 
```

# vb.net - 在 VB.Net 中不提示执行 cmd

> ID：12891118
> 
> 赞同：1
> 
> 时间：2012-10-15T07:35:40.377
> 
> 标签：vb.net, cmd

> **可能重复：**
> [即使在 ProcessWindowStyle.Hidden 之后，控制台窗口仍会弹出；](https://stackoverflow.com/questions/3497924/console-window-still-popping-up-even-after-processwindowstyle-hidden)

我正在开发一个创建联结的应用程序，这是 cmd.exe 的本机功能（它是一个 cmd 函数，它不是单独的 exe），命令是“mklink /J Link Target”。非常简单。

但是应用程序会连续做50个左右，我真的不希望出现50个提示，这会很烦人。

我的代码目前如下所示：

```
Public Sub createJunction(ByVal link, ByVal target)
    Dim shortcutexec As New Process()
    Dim arguments As String = "/Q /C mklink /J """ + link + """ """ + target + """"
    shortcutexec.StartInfo.FileName = "cmd.exe"
    shortcutexec.StartInfo.Arguments = arguments
    shortcutexec.StartInfo.UseShellExecute = False
    shortcutexec.StartInfo.RedirectStandardOutput = True
    shortcutexec.StartInfo.WindowStyle = ProcessWindowStyle.Hidden

    shortcutexec.Start()

    'Debug
    MessageBox.Show(shortcutexec.StandardOutput.ReadToEnd())
End Sub 
```

虽然我是重定向输出，将窗口样式设置为隐藏，但提示仍然出现。**有没有其他方法可以做到这一点，而不会出现提示？**

谢谢！

# c# - 将 Crystal Reports 项目从 VS2005 更新到 VS2010，报告生成速度极慢

> ID：12891127
> 
> 赞同：0
> 
> 时间：2012-10-15T07:35:59.713
> 
> 标签：c#, crystal-reports-2010

我面前有一个 Crystal Reports 项目。它最初是在 Visual Studio 2005 中完成的，现在正在转换为 Visual Studio 2010。2005 年使用了合并模块，据我所知，2010 年的方法有点不同。

经过一番摆弄后，我得到了它的编译和安装程序来打包应用程序。一切似乎都运行良好，但后来我注意到针对某些数据库的一些报告需要很长时间才能生成。我说的是15分钟或类似的东西。在一个需要这么长时间才能生成的报告最终完成后，我尝试生成的任何其他报告都没有数据。我必须重新启动应用程序才能再次获取报告中的数据。

在查看程序时，我得出的结论是它使用了Code Project 中的[Crystal Reports Helper 类](http://www.codeproject.com/Articles/15024/Crystal-Reports-helper-class)。

我已经尝试对应用程序进行分析，看起来花费这么多时间的事情是在 Crystal Reports 本身中，而不是当前应用程序中的某些功能。

有没有人从 Visual Studio 2005 更新到 Visual Studio 2010 并一直在使用帮助程序类，遇到过任何类似的问题并有任何尝试的指示？从帮助程序类发送数据的方式是否可能与 Crystal Reports 与 Visual Studio 2010 一起使用的新方式不兼容？

有些报告工作得很好。感觉我在黑暗中摸索了一下。

为了排除不兼容问题，安装的 SAP 特定的东西是

*   水晶报表 10
*   适用于 .Net Framework 4（32 位）的 SAP Crystal Reports 运行时引擎
*   适用于 .Net Framework 4（64 位）的 SAP Crystal Reports 运行时引擎
*   适用于 Visual Studio 2010 的 SAP Crystal Reports 版本

# jsf - 上传已禁用 - 在移动设备上访问网站时

> ID：12891131
> 
> 赞同：0
> 
> 时间：2012-10-15T07:36:24.597
> 
> 标签：jsf, web-applications, file-upload, jsf-2, cross-browser

> **可能重复：**
> [<t:inputFileUpload> 在 ipad 中不起作用](https://stackoverflow.com/questions/12712400/tinputfileupload-not-work-in-ipad)

使用 JSF 2.0 的应用程序。我有文件上传选项，我也使用过战斧。

```
<t:inputFileUpload /> 
```

`t`在哪里`xmlns:t="http://myfaces.apache.org/tomahawk"`。

当我通过手机浏览网站时，我无法上传。我将选项视为`Upload Disabled`.

谁能告诉我这个错误是什么以及如何解决这个问题？

我在下面的手机上看到了这个问题。

```
iPhone 4s (Safari default browser)
Sony Ericson Xperia X10 Mini Pro (Android Default browser) 
```

* * *

## 编辑 1

yahoo 和 gmail 也会发生同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:40:59.893

它不`t:inputFileUpload`相关，但浏览器...

从市场下载*Opera mini ...*

# asp.net - event.preventDefault() 阻止所有 onclick 事件，而不仅仅是一个

> ID：12891135
> 
> 赞同：0
> 
> 时间：2012-10-15T07:36:30.657
> 
> 标签：asp.net, jquery, preventdefault

我想为我的 ASP.NET FileUpload 控件打上烙印，由于无法做到 OOB，我选择只使用 javascript 复制它的功能。

我将“浏览”按钮`onclick`事件附加到我的按钮并使用`event.preventDefault()`它按预期工作。但我还有另外 2 个按钮；保存、删除，这些都是普通的 asp.net 按钮。`onclick`在我的“自定义”浏览按钮上触发事件后，其他两个按钮`onclick`事件将不会触发。

[Javascript]

```
$(document).ready(function () {
    // The "custom" browse button.
    $('#<%=ProfilePictureBrowsePicture.ClientID%>').click(function (event) {
        event.preventDefault();
        $('#<%=ProfilePictureUpload.ClientID%>').click();
    });

    // the "custom" fileupload box to display the selected image path.
    $('#<%=ProfilePictureUpload.ClientID%>').change(function () {
        $('#<%=ProfilePictureShowFile.ClientID%>').val($(this).val());
    });
}); 
```

[HTML]

```
<asp:FileUpload ID="ProfilePictureUpload" CssClass="filename" runat="server" />
<asp:TextBox ID="ProfilePictureShowFile" CssClass="fba-txtBox showSelectedFile" runat="server" /><br />
<asp:Button ID="ProfilePictureBrowsePicture" CssClass="btnYellow" runat="server"  Text="Gennemse" ToolTip="Gennemse billede" />
<asp:Button ID="ProfilePictureUploadButton" CssClass="btnYellow" runat="server" Text="Gem" ToolTip="Gem billede" OnClick="ProfilePictureUploadButton_Click" />
<asp:Button ID="ProfilePictureDeleteButton" CssClass="btnYellow" runat="server" Text="Slet" ToolTip="Slet billede" OnClick="ProfilePictureDeleteButton_Click" EnableViewState="false" /> 
```

我尝试使用谷歌搜索是否`event.preventDefault()`会影响 onclick 事件，而不是它存在于函数中的事件，但没有运气。

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:44:04.120

```
event.preventDefault();   // Cancels the postback  ...
$('#<%=ProfilePictureUpload.ClientID%>').click(); 
```

// 这是一个客户端事件。

```
OnClick="ProfilePictureUploadButton_Click"  // This is server side event 
```

所以这里的客户端**.click()事件和****Onclick 服务端**事件是不一样的。。

**因为您正在使用preventDefault**停止回发，所以服务器端事件显然不会触发......

要触发服务器端事件，您可以使用`__doPostback()` 或删除该`preventDefault()`方法..

# android - Mopub：Smaato 的自定义原生适配器

> ID：12891141
> 
> 赞同：4
> 
> 时间：2012-10-15T07:36:43.537
> 
> 标签：android, mobile, ads

有没有人为集成 Smaato SDK 编写了 Mopub 自定义本机适配器？

谷歌搜索没有发现任何有用的东西。只是想在自己写东西之前检查一下。

# javascript - 时间线图未准确显示日期

> ID：12891148
> 
> 赞同：0
> 
> 时间：2012-10-15T07:36:59.963
> 
> 标签：javascript, asp.net

我正在处理时间线图，我从日期开始获取日期和日期。我通过javascript将该值绑定到时间线图。但 Graph 提前一个月显示。

例如：我的日期是 2011 年 6 月 12 日，但在图表中我接近 2011 年 7 月 12 日。

我该如何解决这个问题？

# vhdl - VHDL - 设置传感器的采样率

> ID：12891150
> 
> 赞同：0
> 
> 时间：2012-10-15T07:37:06.973
> 
> 标签：vhdl, sensors, sampling, rate, adc

SO用户，

我正在尝试以 5Hz 的频率（每秒 5 个样本）对我的电阻式湿度传感器进行采样。我正在使用 ADC 读取输出。现在，有人告诉我，您可以以任何频率运行 ADC，但您需要使用 5hz 时钟来启动转换并从 ADC 读取值。

我这样做的方式是通过以 5hz 运行并有一个标志来启动转换的过程，在时钟的上升沿将“start_convert”说为“1”。

```
PROCESS (CLK_5HZ)       
BEGIN
    IF (CLK_5HZ'EVENT AND CLK_5HZ = '1') THEN
        START_CONVERT <= '1';
    END IF;
END PROCESS; 
```

然后我有一个 ADC 的状态机；

```
PROCESS (CURR_STATE, INTR)
                BEGIN

                CASE CURR_STATE IS

                        WHEN STARTUP =>
                            WR <= '0';
                            READ_DATA <= '0';
                            IF (START_CONVERT = '1') THEN
                                NEXT_STATE <= CONVERT;
                            ELSE
                                NEXT_STATE <= STARTUP;
                            END IF;

                        WHEN CONVERT =>
                            IF (INTR = '0' AND STREAM = '1') THEN
                                NEXT_STATE <= WAIT500;
                            ELSIF (INTR = '0' AND STREAM = '0') THEN
                                NEXT_STATE <= READ1;
                            ELSE
                                NEXT_STATE <= CONVERT;
                            END IF;
                            WR <= '1';
                            READ_DATA <= '0';

                        WHEN WAIT10 =>
                            IF (COUNTER_WAIT = 10) THEN
                                NEXT_STATE <= READ1;
                            ELSE
                                NEXT_STATE <= WAIT10;
                            END IF;
                            COUNTER_WAIT <= COUNTER_WAIT + 1;

                        WHEN READ1 =>
                            NEXT_STATE <= CONVERT;
                            WR <= '1';
                            READ_DATA <= '1';

                        WHEN OTHERS =>
                            NEXT_STATE <= STARTUP;
                END CASE;
                END PROCESS; 
```

然后我在 5hz 使用另一个进程来检测 READ_DATA 是否为 1，以便我从 ADC 读取值。

```
PROCESS (CLK_5HZ, RST)
    BEGIN
    IF (RST = '1') THEN
    Y <= (OTHERS => '0');
    ELSIF (CLK_5HZ'EVENT AND CLK_5HZ = '1') THEN
        IF (READ_DATA = '1') THEN
        Y <= DATA_IN (0) & DATA_IN (1) &
         DATA_IN (2) & DATA_IN (3) &
         DATA_IN (4) & DATA_IN (5) &
         DATA_IN (6) & DATA_IN (7);
    END IF;
   END IF;
END PROCESS; 
```

谁能告诉我这是否是正确的方法？

编辑：我正在使用 Spartan-3 板连接 ADC (ADC0804)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:54:40.660

当不知道您要连接的设备的具体情况时，很难给出具体的建议。

但是，关于您的代码的一些一般性评论：

*   您的异步过程（`PROCESS (CURR_STATE, INTR)`）在合成它时会生成很多锁存器，因为您不是在所有情况下都设置所有信号。`WR`并且`READ_DATA`例如没有设置在您的`WAIT10`状态。这很可能会导致严重的时间问题，所以纠正这是你绝对想做的事情。

*   `WAIT10`同一进程中的状态将为您提供一个组合循环，因为它在`COUNTER_WAIT`更新时运行。由于该状态也会更新`COUNTER_WAIT`，理论上它会继续运行，但实际上大多数合成器只会给你一个错误（我认为）。您需要将增量移动到同步/时钟过程，这也可以让您控制每个周期需要多长时间。

*   Your 5 Hz processes seem to run on a separate clock (`CLK_5HZ`). I presume that the rest of your system is running at a faster clock? This essentially gives you two (or more) clock domains, that will need special interface logic for interfacing them with each other. A much, much better solution is to run everything on the same (fast) clock, and control slower processes using clock enables. Everything is thus inherently synchronized, and shouldn't give you any nasty timing surprises.

# python - 如何在 Windows 上选择日语语言环境？

> ID：12891154
> 
> 赞同：0
> 
> 时间：2012-10-15T07:37:36.230
> 
> 标签：python, windows, locale

当我尝试

```
import locale
locale.setlocale(locale.LC_COLLATE, 'ja-JP') 
```

我收到错误消息

```
locale.Error: unsupported locale setting 
```

我该如何解决？我在 Windows 7 上使用 Python 2.7.3。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T07:47:23.283

如果您使用的是 Windows，这不起作用，因为日语语言环境是“jpn”。尝试：

```
locale.setlocale(locale.LC_COLLATE, 'jpn') 
```

[以下](http://msdn.microsoft.com/en-us/library/cdax410z)是支持的国家/地区字符串列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T07:43:25.343

在 Windows 上，您必须使用字符串“japanese”而不是“ja-JP”作为 locale.setlocale() 的第二个参数。

# php - 图像复制不起作用

> ID：12891155
> 
> 赞同：3
> 
> 时间：2012-10-15T07:38:01.583
> 
> 标签：php, gd

我试图从属于某种模式的多个图像中形成一个图像。但最后我只得到一个灰色框和日期，尽管找到的图像数组不是空的。

```
$name = $_GET['gn'];
$dest = 'images/sprites/';
$images = array();
$dir = getcwd() . '/images/thumb';

$dir_b = $dir.'/real-size';

$pattern = $dir_b.'/{'.$name.'}*.jpg';
$images = glob($pattern,GLOB_BRACE);
list($step_w,$step_h) = getimagesize($images[0]);

$fi = imagecreate($step_w*count($images), $step_h);
$bg = imagecolorallocate($fi, 200, 200, 200);
imagefill($fi, 0, 0, $bg);
imagealphablending($fi, false);
imagesavealpha($fi, true);
ksort($images);

foreach($images as $k => $i){
    $pi =  imagecreatefromjpeg($i);
    imagecopy($fi,$pi,$k*$step_w,0,0,$step_w,$step_h);  
    imagedestroy($pi);
}
$textcolor = imagecolorallocate($fi, 0, 0, 255);

imagestring($fi, 5, 0, 0, date('H:i:s'), $textcolor);

imagepng($fi, $dest.$name.'.png');
imagedestroy($fi); 
```

错误在哪里，我能做些什么来解决它？

经过一些评论：我可以肯定地说循环通过了所有四次，每次变量`$pi`都取有效值

# relational-database - 这种关系在 BCNF 中吗？

> ID：12891159
> 
> 赞同：2
> 
> 时间：2012-10-15T07:38:11.230
> 
> 标签：relational-database

我有关系

```
Competitor(PID, EventName, Pname, TeamName, TeamCoach,EventDate, TeamRating). 
```

我有我的 FD

```
PID -> Pname
PID --> TeamName
TeamName --> TeamCoach
EventName --> EventDate
TeamName, EventName --> TeamRating 
```

这将形成我的关系

```
Competitor(_PID_, Pname, TeamName*)
Team(_TeamName_, TeamCoach)
Event(_EventName_, EventDate)
Rating(_TeamName_*, _EventName_*, TeamRating)
Entry(_PID_*, _EventName_*) 
```

但是，由于我的候选键是 {PID, EventName}，如果 TeamName 甚至不是键的一部分，Team 关​​系怎么可能在 BCNF 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T20:16:01.777

您的问题中写下的一组 FD 适用于单个关系模式。应用于给定关系模式的 FD 集决定了该关系模式的**键**。

例如，您的 5 个 FD 集对应于您开始使用的 7 列关系模式。并且这组 FD 允许确定您的 7 列关系模式的键确实是 {PID EventName}。

但是，如果您将该 7 列模式分成几部分，那么这会产生哪些 FD 仍然适用以及哪些部分适用的后果。

例如。假设你单挑

```
 Team(_TeamName_, TeamCoach) 
```

然后离开

```
 Competitor(PID, EventName, Pname, TeamName, EventDate, TeamRating). 
```

对于每个单独的 FD，您现在必须决定单独的 FD 应用于两个新关系模式中的哪一个。

在手头的例子中：

```
 Team(_TeamName_, TeamCoach)
 TeamName --> TeamCoach

 Competitor(PID, EventName, Pname, TeamName, EventDate, TeamRating)
 PID -> Pname
 PID --> TeamName
 EventName --> EventDate
 TeamName, EventName --> TeamRating 
```

您现在不仅有两个关系模式，**而且有两组不同的 FD，分别适用于它们**。teamname->teamcoach FD 现在不再适用于（修订的）竞争对手关系模式，而仅适用于团队模式。这使您可以得出结论，TeamName 将是**Team 模式**的关键。

顺便说一句，并非总是可以保留您开始使用的**所有FD。**一个 FD，其整体属性集（左侧加右侧）使得在模式拆分后，不再有任何包含所有这些属性的关系模式，这样的 FD 不能再被表达，并且必须在最终的设计中恢复为不采用 FD (/key) 形式的数据库约束。这就是“依赖保存”的问题。

# c# - c# Excel保存后丢失公式

> ID：12891160
> 
> 赞同：1
> 
> 时间：2012-10-15T07:38:11.340
> 
> 标签：c#, excel

Excel 公式保存后丢失，替换为上次计算结果。

**问题：是否有特殊的保存选项来保存公式？**

```
rangeTarget = workSheetTeam.get_Range(workSheetTeam.Cells[40, BG], workSheetTeam.Cells[40, BG]);
rangeTarget.Formula = "=MAX(BF8:BF25)"; 
```

# java - 如何在 AppEngine 数据存储区中存储单个实例对象

> ID：12891163
> 
> 赞同：0
> 
> 时间：2012-10-15T07:38:28.793
> 
> 标签：java, google-app-engine, datastore

我需要在 AppEngine 数据存储区中创建并存储一个对象的单个实例（永远不需要多个对象）。这是我正在安排的 cron 作业的最后一次运行时间。这个想法是 cron 作业只会拾取自上次运行以来创建/更新的那些行进行处理，并在完成后更新上次运行时间，考虑到并发问题，最好的方法是什么好吧 - 如果以前的工作没有完成运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:59:29.410

如果我正确理解您的问题，听起来您可以创建一个“作业簿记”实体，记录作业当前是否正在运行，以及有关您正在处理的作业的任何必要状态。

然后，使用事务访问该簿记实体，以便一次只有一个进程可以对其进行读取 + 更新。这将让您在开始新工作之前安全地检查另一个工作是否仍在运行。

（数据存储是非关系的，所以我猜你提到的“行”，你的意思是你需要处理的某种实体？你的簿记实体可以存储一些关于你处理了哪些实体的状态，所以到目前为止，这将让您查询新的要处理的）。

# c++ - Visual Studio is not loading modules when attaching to process

> ID：12891167
> 
> 赞同：13
> 
> 时间：2012-10-15T07:38:53.093
> 
> 标签：c++, visual-studio-2010, debugging

I have a C++ application. When i press F5 in visual studio application starts and i can debug it. But when I run application from windows explorer and then attach this process in visual studio I see breakpoints can be hit (they are completely red) but breakpoint does not hit. When I see modules window nothing is present there. What is problem?

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-15T07:55:24.830

Verify the code type Visual Studio is configured to load symbols. Attach To Process dialog has Select Code Type option to specify which symbols to load. Here you can select Managed symbols and/or Native symbols.

Also the assemblies should be of same version.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:49:32.100

It sounds like the executable code that you are debugging (F5) is not the same as the one you are running from explorer. Check the date of the executable you are running. Also, it may be picking up a different version of DLL if you are using them. Try renaming one of your DLL files and then running from explorer. Use depends.exe to see which modules are being loaded.

# jquery - 在 JQuery 动画运行时监控 css 属性

> ID：12891168
> 
> 赞同：0
> 
> 时间：2012-10-15T07:38:54.667
> 
> 标签：jquery, jquery-animate

我正在寻找一种在运行 jquery 动画时跟踪 css 属性的方法。

例如：

我有一个将滑入页面的 div。动画完成后，一切看起来都很好，但是在动画中，div 低了几个像素，我想看看这是导致哪个 css 属性。但是动画太快了，在调试器中看不到任何东西。

有没有办法在动画运行时监视其中一个浏览器调试器中的 css 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:04:15.223

您可以`step:`为 jQuery 动画使用回调选项。它会在设置之前向您发送即将设置的确切属性，然后您可以对其执行 console.log() 以分析发生了什么。

有关步骤回调的更多信息，请参阅[jQuery`animate()`文档](http://api.jquery.com/animate/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:50:08.570

您是否尝试过使用 mozilla 开发人员网络“监控 DOM 更改”？看看这个链接..

[监控 dom 变化](https://developer.mozilla.org/en-US/docs/XUL_School/Appendix_F%3a_Monitoring_DOM_changes "监控 DOM 转换器")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T08:08:58.820

放慢动画速度，以便您可以查看检查器中的数字。

```
.animate({left:"+=250"},20000) 
```

# c# - 显示未找到控件消息

> ID：12891169
> 
> 赞同：0
> 
> 时间：2012-10-15T07:38:59.633
> 
> 标签：c#, asp.net, telerik, radwindow

```
Error Message displayed as "AddFavoriteRadWindow not found" 
```

**我的代码：**

```
protected void btnAddReport_Click(object sender, ImageClickEventArgs e)
    {
         this.form1.Controls.Add(AddFavoriteRadWindow); // working fine
    }

protected void btnOk_Click(object sender, EventArgs e)
{
    if (txtReportFavorite.Text != string.Empty)
    {
        // code for inserting into db..
        AddFavoriteRadWindow.Visible = false; // not working 
    }
} 
```

当我想隐藏 rad 窗口时显示“找不到 AddFavoriteRadWindow”消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:40:39.537

您需要从控件集合中获取添加的控件的实例。尝试

```
(this.form1.FindControl(AddFavoriteRadWindow.ID) as RadWindow).Visible = false; 
```

您可以对 null 进行检查。就像是。

```
if((this.form1.FindControl(AddFavoriteRadWindow.ID) as RadWindow) != null) 
```

*（我不确定您的班级名称，我使用过`RadWindow`，但您可以将其替换为您的班级名称）*

编辑：您应该在 FindControl 方法中传递控件的字符串`id`以获取该特定控件

# php - 使用php将表单中的数据输入数据库

> ID：12891175
> 
> 赞同：-1
> 
> 时间：2012-10-15T07:39:25.497
> 
> 标签：php, mysql

我正在尝试将数据输入数据库，但我不断收到错误消息。我不知道问题出在哪里。这是代码：

```
<?php 
  $sql = "INSERT INTO $db_table (title,group,overlapok,userid,name,phone,email,description,managers,location,notify,notifyman,
remind,remindman,appmsg,viewaccess,viewulist,viewclist,makeaccess,makeulist,makeclist,showappinfo) 
VALUES ('".mysql_real_escape_string(stripslashes($_REQUEST['txtTitle'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['chkGroupCal'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['chkAllowOverlap'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['txtUserID'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['txtOwner'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['txtPhone'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['txtEmail'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['txtDesc'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['txtManagers'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['txtLocation'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['chkNotifyMe'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['chkNotifyMgrs'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['chkRemind'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['chkRemindMan'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['txtAppText'])).
"','".mysql_real_escape_string(stripslashes($_REQUEST['selViewBlockRestr'])).
     "','".mysql_real_escape_string(stripslashes($_REQUEST['txtViewBlocksUserID']))
   "','".mysql_real_escape_string(stripslashes($_REQUEST['txtViewBlocksCourseID']))."','".mysql_real_escape_string(stripslashes($_REQUEST['selMakeApptRestr']))."','".mysql_real_escape_string(stripslashes($_REQUEST['txtMakeApptUserID']))."','".mysql_real_escape_string(stripslashes($_REQUEST['txtMakeApptDptID']))."','".mysql_real_escape_string(stripslashes($_REQUEST['chkShowAppInfo']))."')"; 

if($result = mysql_query($sql,$db)) 
   {
    echo '<h1>Thank you</h1> Your information has been entered into our database<br><br>
        <p> <a href="viewcalendar.page.php"> View Calendar </a> </p>
        <img src="eDiary.jpg"';

    } 
   else 
   {
    echo "ERROR: ";
   }  ?> 
```

该表单包括可以留空复选框的部分。

我听从了您的建议并使用了 PDO。一直返回以下错误：警告：PDO::__construct() [pdo.--construct]: [2002] /opt/lampp/htdocs/Scheduler/pages/enterCal 中的参数无效（尝试通过 unix:// 连接）第 72 行的 .page.php 连接失败：SQLSTATE [HY000] [2002] 无效参数致命错误：在 /opt/lampp/htdocs/Scheduler/pages/enterCal.page 中的非对象上调用成员函数 exec() .php 在第 80 行。

我认为 $db 不是一个对象，并且连接没有被执行。我该如何处理？我试过谷歌，但似乎想不出任何可行的方法。

```
 <?php

$dsn = 'mysql:host=localhost;dbname=eDiary';
$user = 'root';
$password = '';

try 
{
        $db = new PDO($dsn,$user,$password);
        $db -> setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);}                
catch (PDOException $e) {
  echo 'Connection Failed: ' . $e->getMessage();
    }

$result = $db->exec("INSERT INTO wassCalendar(title, group, overlapok, userid, name, phone, email, description, managers, location, notify, notifyman, remind, 
remindman, appmsg, viewaccess, viewulist, viewclist, makeaccess, makeulist, makeclist, showappinfo) 
VALUES($txtTitle, $chkGroupCal, $chkAllowOverlap, $txtUserID, $txtOwner,  $txtPhone, $txtEmail, $txtDesc, $txtManagers, 
$txtLocation, $chkNotifyMe, $chkNofityMgrs, $chkRemind, $chkRemindMan, $txtAppText, $selViewBlockRestr, 
$txtViewBlocksUserID, $txtViewBlocksCourseID, $selMakeApptRestr, $txtMakeApptUserID, $txtMakeApptDptID, 
$chkShowAppInfo)"; 

$insert_id = mysql_insert_id();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:46:14.613

在需要在查询中使用用户输入的情况下，您需要对查询进行参数化。

[这](https://stackoverflow.com/questions/12756251/textareas-with-dynamically-assigned-name-throws-my-code/12756338#12756338)是我讨论相同问题的另一个主题。

依靠清理输入是非常糟糕的做法，最终会咬你。

# ruby-on-rails - 设置设计用户确认所有回复电子邮件，而不是点击链接

> ID：12891184
> 
> 赞同：0
> 
> 时间：2012-10-15T07:40:06.303
> 
> 标签：ruby-on-rails, devise, devise-confirmable

我在 Devise 中看到的一个问题是确认电子邮件可以进入垃圾邮件文件夹。如果用户可以简单地回复电子邮件，这将有助于确认电子邮件地址，并训练 gmail 发件人不是垃圾邮件。

关于这是否值得做以及我将如何做的任何建议？

或者也许有一种更简单的方法可以避免发送的应用程序邮件进入垃圾邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T03:19:07.640

我一直有完全相同的问题，经过一个漫长的夜晚，我相信我已经解决了。

1) 确保为您的域设置了 SPF 记录。
2) 在您的邮件服务器上设置 DKIM 并将您的公钥放入您的 DNS（TXT 记录）中。
3) 确保您的 html 电子邮件格式正确（我必须将 html 开始和结束标签添加到我的，Devise 默认情况下没有这样做）。
4) 最后一个难题是确保我在电子邮件中同时发送纯文本和 html MIME 部分。只需为我的每个邮件视图创建一个额外的纯文本“text.erb”文件似乎就可以解决问题（Rails 自动神奇地将它拾取并为我构建了多部分电子邮件）。

您可以通过查看 Gmail 中的“原始”电子邮件并确保在标题中看到类似“spf=pass”和“dkim=pass”的内容来验证 1 和 2 是否设置正确。

在我花了将近一整个晚上从 WTH 出发后，一位朋友告诉我一项名为 SendGrid 的服务（我相信还有其他服务提供商会做同样的事情）是 DKIM？-- 比我想要的更熟悉 SMTP、DNS 和 postfix。但它现在有效，而且我可能太便宜而无法支付第三方服务:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:25:50.613

这不是德维斯的错。设计实际上遵循有关确认电子邮件地址的最佳实践。

我相信您属于批量电子邮件发件人的类别，并且您必须遵循相当多的准则来解决这个问题。

我建议您浏览 Google 帮助页面以获取有关如何解决此问题的更多信息：

*   配置帮助：[https ://support.google.com/mail/bin/answer.py?hl=en&answer=81126](https://support.google.com/mail/bin/answer.py?hl=en&answer=81126)
*   帮助向导：[https ://support.google.com/mail/bin/static.py?hl=en&ts=2696779&page=ts.cs](https://support.google.com/mail/bin/static.py?hl=en&ts=2696779&page=ts.cs)

# javascript - 编辑初始化时给定的 iscroll4 参数

> ID：12891187
> 
> 赞同：0
> 
> 时间：2012-10-15T07:40:23.300
> 
> 标签：javascript, ios, cordova, iscroll4

我正在尝试在我的 IOS 应用程序开发中使用 cordova 2.1.0 使用 iscroll4。

```
<script type="application/javascript" src="iscroll.js"></script>
<script type="text/javascript">
var myScroll;
function loaded() {
    setTimeout(function () {
        myScroll = new iScroll('wrapper');
    }, 100);
}
window.addEventListener('load', loaded, false);
</script> 
```

如果我想动态编辑 vScroll、vScrollBar、fixedScrollbar 等参数，即。在 iscroll(myScroll = new iScroll('wrapper');) 初始化之后，我怎么能在 javascript 中做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:12:39.360

我不会试图寻找“适用于所有情况”的解决方案。

我会：

1.  总结您想要修改的特定选项。

2.  查看这些选项中的哪些在初始化过程中很重要

3.  以编程方式（手动）更改这些选项

4.  仅在运行时重要的选项（即在事件发生时读取），我只是尝试修改 myScroller.options 对象。

例如，您可以设置以下选项：

```
myScroller = new iScroll( el, { x:20, y:30, onRefresh: function(){ alert(11); } } ); 
```

考虑到我要执行的步骤，您是否想修改这 3 个（或更多..）：

1.  x, y, 滚动条类

2.  在初始化中，我们看到使用了 x 和 y（第 120 行）：

    // 设置起始位置 that.x = that.options.x; 那.y = 那.options.y;

这意味着这些选项影响的不仅仅是运行时的东西，在初始化期间它会修改 that.x 和 that.y（即使到目前为止非常简单）。

3.

```
myScroller.x = newX;
myScroller.options.x = newX;
myScroller.y = newY; 
myScroller.options.y = newY;
// Also depeneds on x & y, but only do this if you actually useTransform and care about this!

/*
 * obtain required variables..
 */
var appVersion = navigator.appVersion,
    vendor = (/webkit/i).test(appVersion) ? 'webkit' :
        (/firefox/i).test(navigator.userAgent) ? 'Moz' :
        'opera' in window ? 'O' : '',

has3d = 'WebKitCSSMatrix' in window && 'm11' in new WebKitCSSMatrix(),

trnOpen = 'translate' + (has3d ? '3d(' : '('),
    trnClose = has3d ? ',0)' : ')';

// Code that actually matters, and where we use above variables
if (that.options.useTransform) that.scroller.style[vendor + 'Transform'] = trnOpen + that.newX + 'px,' + that.newY + 'px' + trnClose;
        else that.scroller.style.cssText += ';position:absolute;top:' + that.newY + 'px;left:' + that.newX + 'px'; 
```

4.

```
myScroller.options.onRefresh = function() { alert(33); } 
```

*也许你甚至可以在 options.onDestroy 属性中做所有这些事情；）*

更新：我还注意到了销毁功能，如果您确实想“完全清除”滚动条，可能会很方便。但我没有看到会删除物理创建的滚动条的代码，但我不确定。

# twisted - 扭曲的大文件传输

> ID：12891192
> 
> 赞同：4
> 
> 时间：2012-10-15T07:40:38.060
> 
> 标签：twisted, file-transfer

我这样编写客户端-服务器应用程序：client(c#) <-> server (twisted; ftp proxy and additional functional) <-> ftp server

服务器有两个类：我自己的类协议继承自 LineReceiever 协议和 FTPClient 来自 twisted.protocols.ftp。

但是当客户端发送或获取大文件（10 Gb - 20 Gb）时，服务器会捕获 MemoryError。我的代码中没有使用任何缓冲区。当调用 transport.write(data) 数据附加到反应器编写器的内部缓冲区时会发生这种情况（如果我错了，请纠正我）。

我应该用什么来避免这个问题？还是我应该改变解决问题的方法？

我发现对于大流，我应该使用 IConsumer 和 IProducer 接口。但最后它会调用 transfer.write 方法，效果是一样的。还是我错了？

**升级版：**

这是文件下载/上传的逻辑（从 ftp 通过 Twisted 服务器到 Windows 上的客户端）：

客户端向 Twisted 服务器发送一些标头，然后开始发送文件。扭曲的服务器接收标头，然后（如果需要）调用`setRawMode()`，打开 ftp 连接并从/向客户端接收/发送字节，并在所有关闭连接之后。这是上传文件的部分代码：

FTPManager 类

```
def _ftpCWDSuccees(self, protocol, fileName):
        self._ftpClientAsync.retrieveFile(fileName, FileReceiver(protocol))

class FileReceiver(Protocol):
    def __init__(self, proto):
        self.__proto = proto

    def dataReceived(self, data):
        self.__proto.transport.write(data)

    def connectionLost(self, why = connectionDone):
        self.__proto.connectionLost(why) 
```

主要代理服务器类：

```
class SSDMProtocol(LineReceiver)
... 
```

在 SSDMProtocol 对象（调用`obSSDMProtocol`）解析标头之后，它调用打开 ftp 连接（`FTPClient`from `twisted.protocols.ftp`）并设置 FTPManager 字段 _ftpClientAsync 的对象`_ftpCWDSuccees(self, protocol, fileName)`并`protocol = obSSDMProtocol`在文件的字节收到时调用`dataReceived(self, data)`FileReceiver 对象的调用。

并且当`self.__proto.transport.write(data)`被调用时，数据附加到内部缓冲区比发送回客户端更快，因此内存耗尽。当缓冲区达到一定大小时我可以停止读取并在缓冲区全部发送到客户端后恢复读取？或类似的东西？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-15T13:55:49.213

如果您将 20 GB（千兆位？）字符​​串传递给`transport.write`，您将需要至少 20 GB（千兆位？）的内存 - 可能更像是 40 或 60，因为在 Python 中处理字符串时需要额外的复制.

即使您从未将单个字符串传递到`transport.write`20 GB（千兆位？），如果您`transport.write`以比您的网络处理速度更快的速度反复调用短字符串，发送缓冲区最终会变得太大而无法放入内存，而您会遇到一个`MemoryError`。

这两个问题的解决方案是生产者/消费者系统。使用`IProducer`and`IConsumer`给你的好处是你永远不会有一个 20 GB（千兆位？）的字符串，你永远不会用太多较短的字符串填满发送缓冲区。网络将受到限制，因此字节的读取速度不会超过您的应用程序处理它们并忘记它们的速度。您的字符串最终将达到 16kB - 64kB 的大小，应该很容易放入内存中。

您只需要调整您的使用`FileReceiver`以包括将传入连接注册为传出连接的生产者：

```
class FileReceiver(Protocol):
    def __init__(self, outgoing):
        self._outgoing = outgoing

    def connectionMade(self):
        self._outgoing.transport.registerProducer(self.transport, streaming=True)

    def dataReceived(self, data):
        self._outgoing.transport.write(data) 
```

现在只要`self._outgoing.transport`发送缓冲区填满，它就会告诉`self.transport`暂停。一旦发送缓冲区清空，它将告诉`self.transport`恢复。 `self.transport`现在了解如何在 TCP 级别执行这些操作，以便进入服务器的数据也将减慢。

# html - 为什么当我单击图库中的图像链接时它不起作用？

> ID：12891195
> 
> 赞同：0
> 
> 时间：2012-10-15T07:40:41.203
> 
> 标签：html, wordpress

当我点击图片时，我有[这个网站。](http://www.centerwow.com/roei/22072012/orenram/)

我需要通过以下链接获取新页面**[http://www.centerwow.com/main/portfolio/2/](http://www.centerwow.com/main/portfolio/2/)**

![在此处输入图像描述](../Images/b8912e94c8f5410e3b29e397441a537d.png)

你可以看到下面的代码：

```
<div class="box-1" style="direction: rtl;">
        <a href="http://www.centerwow.com/main/portfolio/2/"><img class="alignnone size-full wp-image-322" title="אתר לדוגמא" src="http://www.centerwow.com/roei/22072012/orenram/wp-content/uploads/2012/10/page1-img3.jpg" alt="" width="219" height="124"></a>        <a href="http://www.centerwow.com/main/portfolio/0/">example portfolio</a>
        <span>just click here</span>
        <p> some text</p>
    </div> 
```

当我单击图像或`HTML <a> Tag`我应该转到其他页面但没有任何反应时。

相同的代码在[jsFiddle](http://jsfiddle.net/centerwow/24A9b/855/)中工作。

我应该怎么做才能使它工作/转到其他页面。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:01:00.540

查看第 92 行的“jquery.elastislide.js”文件（指向以下代码）：

```
$.elastislide.defaults = {
speed : 450, // animation speed
easing : '', // animation easing effect
imageW : 190, // the images width
margin : 3, // image margin right
border : 0, // image border
minItems : 3, // the minimum number of items to show.
// when we resize the window, this will make sure minItems are always shown
// (unless of course minItems is higher than the total number of elements)
current : 0, // index of the current item
// when we resize the window, the carousel will make sure this item is visible
--> onClick : function() { return false; } // click item callback**
}; 
```

只需删除“return false;” 从这条线

# json - 从 XDocument 中获取元素并使用 Json.net 将其解析为 JSON 的最佳方法？

> ID：12891204
> 
> 赞同：2
> 
> 时间：2012-10-15T07:41:17.820
> 
> 标签：json, serialization, .net-4.0, linq-to-xml, xmldocument

我是否需要通过 XmlDocument 对象才能使用 JsonConvert.SerializeXmlNode？我只需要源 XDocument 中的一个组合元素。

简而言之 - 最好的方法（也是从性能角度来看）是什么？

# jquery - 具有相同名称的 jQuery 自动完成组结果

> ID：12891209
> 
> 赞同：0
> 
> 时间：2012-10-15T07:41:30.103
> 
> 标签：jquery, autocomplete

我将帖子绑定到一个位置，因此当我在该位置字段上进行 jQuery 自动完成时，下拉列表中会出现具有相同名称的结果。

例如：

如果有 10 个位置为柏林的帖子，我开始输入城市名称，自动填充将为我提供位置名称乘以帖子数量。我想知道是否有一种方法可以使用 jQuery 对位置名称进行分组。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:15:15.887

[此 jquery ui 演示](http://jqueryui.com/autocomplete/#categories)与您的要求相似。

原始数据：

```
var data = [
                { label: "anders", category: "" },
                { label: "andreas", category: "" },
                { label: "antal", category: "" },
                { label: "annhhx10", category: "Products" },
                { label: "annk K12", category: "Products" },
                { label: "annttop C13", category: "Products" },
                { label: "anders andersson", category: "People" },
                { label: "andreas andersson", category: "People" },
                { label: "andreas johnson", category: "People" }
            ]; 
```

您可以将它们更改为

```
 var data = [
                { label: "Berlin", category: [post1, post2] },
                { label: "Paris", category: [post3, post4, post5] },
                { label: "Tokyo", category: [post6, post7, post8] },
                { label: "Taipei", category: [] }
                ...
      ]; 
```

检索值

```
select: function( event, ui ) {
                console.log( ui.item.label );
                console.log( ui.item.category ); //this is an array
                return false;
} 
```

而[http://jqueryui.com/autocomplete/#custom-data](http://jqueryui.com/autocomplete/#custom-data) 是关于dropmenu的自定义数据格式的demo

我希望这个样本有帮助。

# tdd - 单一职责原则 (SRP) 是否允许使用实用程序类

> ID：12891211
> 
> 赞同：3
> 
> 时间：2012-10-15T07:41:37.870
> 
> 标签：tdd, solid-principles, single-responsibility-principle

我刚刚回答了一个与 SRP 相关的问题，这让我想到：SRP 在实用程序类上的地位如何？

根据定义，实用程序类往往会做很多事情。我可以看到单个接入点上的门控相关实用程序是如何有用的。根据 SRP 标准，您不能在一个类中实现这些实用程序。这是否意味着实用程序类是禁止的，或者如果它只是多个类的外观，SRP 是否允许它，每个类都遵守 SRP？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T09:55:46.243

实用程序类被认为是*反模式*：

1.  违反您提到的 SRP，因为它通常需要承担多个责任。
2.  大部分是静态类，不利于测试设计能力，不能mock。
3.  这个名字本身是没有意义的，它们通常被命名为*Helper*、*Util*、*Utility*或类似的名字。

纠正：

将您的实用程序类划分为更小的具有有意义名称的非静态类，每个类只承担一项责任。

# android - 实施谷歌应用内订阅

> ID：12891212
> 
> 赞同：0
> 
> 时间：2012-10-15T07:41:40.773
> 
> 标签：android, android-layout, android-intent

开发者指南给出了应用内计费的示例，以及相同示例应用程序所需的订阅，并说修改它以进行订阅。我想修改这个“地下城”示例应用程序进行订阅，但在开发者指南中没有将此示例修改为订阅的信息。我应该改变什么。我想知道修改这个示例的完整步骤。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:23:44.950

如果您`InApp Product Purchase`使用旧的计费 API 实现。然后

1.  将计费 API 代码更新到版本 2
2.  变化不大`InApp subscription`。而不是`mBillingService.requestPurchase(productId, Consts.ITEM_TYPE_SUBSCRIPTION, null)`
3.  要检查订阅的项目，您可以使用`Restore purchases`. In App 订阅也充当“InApp 产品”

我希望它对你有帮助。

# javascript - 如何在javascript中拖动期间更改光标图像

> ID：12891214
> 
> 赞同：2
> 
> 时间：2012-10-15T07:41:53.800
> 
> 标签：javascript, drag-and-drop, cursor

我有个问题

我无法更改光标图像的大小

我的代码有什么问题？

```
document.getElementById("myDiv").addEventListener("dragstart", function(e){
    var img = new Image(30, 40);
    img.src = "http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg";
    e.dataTransfer.setDragImage(img, -15, -15);
},false); 
```

我把我的代码放在这个小提琴上：http: [//jsfiddle.net/CNuk9/](http://jsfiddle.net/CNuk9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:09:42.097

尝试使用

```
.triggerHandler("dragstart", function(e).... 
```

这曾经对我有用，可以解决我曾经遇到过与您的第一个问题类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:48:46.150

您可以通过更改 CSS 属性来更改光标，请查看[此链接](http://www.echoecho.com/csscursors.htm)以获取不同光标的 css 属性列表

希望有帮助！

# mysql - 将转换加载提取到 MySql

> ID：12891215
> 
> 赞同：0
> 
> 时间：2012-10-15T07:41:56.567
> 
> 标签：mysql, csv, etl, talend

我基本上来自微软背景，在 SSIS 上为 ETL 寻求的项目做了大量工作。

现在我手头有另一个项目来处理将 .csv 文件加载到 MySql 数据库中。在加载这些表的过程中，数据必须经过一些转换，然后进入目标表。这是 ETL 项目的大部分内容。

**客户没有 SSIS (BIDS)，被迫使用开源工具。**

我做了一些研究，发现**Talend Data Integration**工具最适合我的情况。

作为这个环境的新手，并且我确信这方面有专家，我需要一些关于执行此类 ETL 的最佳工具和最佳实践的建议。

如果需要任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:47:36.357

如果我没记错的话，PhpMyAdmin 可以将 CSV 导入 MySQL，[这个问题](https://stackoverflow.com/questions/8143110/loading-csv-files-into-mysql-workbench)也是关于类似的主题，但这些与 SSIS 可以提供的内容并不接近......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:19:48.000

是的，你是对的 Talend Open Studio 是一个非常好的工具，有数百个连接器，在你的情况下，只需创建以 CSV 作为源和 MySQl 为目标的作业，如果需要应用任何转换并加载它。

[您可以通过示例Talend 论坛](http://www.talendforge.org/forum/viewforum.php?id=2)获取有关 CSV 到 MySQL 加载的更多信息

如果您有任何基本计划，请与我分享，我可以指导您如何将 CSV 传输到 MySQL 表。

# android - Android BroadcastReceiver：在默认进程或新进程中运行它？

> ID：12891217
> 
> 赞同：4
> 
> 时间：2012-10-15T07:42:09.500
> 
> 标签：android, process, receiver

我有一个带有两个广播接收器的应用程序，其中一个用于接收数据，另一个用于发送数据。我已经看到它们有一个属性 android:process 来使它们在应用程序的默认进程或另一个进程中运行。在我使用 google 找到的示例中，接收器被设置为在进程 ":remote" 中运行。

我的问题是，使用每个选项的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:00:37.917

当您想与另一个应用程序共享资源时，使用与应用程序的默认进程不同的进程很方便。

Todo 所以你需要安排两个具有相同进程名的应用程序，如果你的进程名以 lowerchar 开头，则会产生一个全局进程。如果它以冒号 : 开头，则该进程是私有的。请记住，要在两个应用程序之间共享进程，您需要相同的用户 ID 和相同的应用程序证书。

您还必须只加载一次资源并获得内存消耗的好处。

了解[更多信息](http://developer.android.com/guide/topics/manifest/application-element.html#proc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:11:37.933

一个进程有它自己的主线程。因此，当使用不同的进程 ie 时`:remote`，这意味着在该进程中定义的代码将在单独的线程上运行。对于普通的工作流程，您通常不需要这样做。

# css - 无法摆脱一些填充

> ID：12891219
> 
> 赞同：0
> 
> 时间：2012-10-15T07:42:21.817
> 
> 标签：css, html

我有一个锚标签内的图像。我希望图像有一个粗灰色边框，当我用鼠标悬停它时，图像应该被一个细黑色边框包围，它不会完全覆盖灰色边框。我用两个边框实现了这个想法：图像有一个边框，锚点有另一个边框。以我的理解应该可以正常工作，但事实并非如此：图像底部有一种填充边距。我在样式上做错了吗？下面是我使用的代码，复制粘贴自己看吧：

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            a img {border:1px #cccccc solid}
            a:hover img {border:1px #000000 solid}
            a {float:left;border:2px #cccccc solid}
        </style>
    </head>
    <body>
        <a href=""><img src="https://sites.google.com/site/davikokar/lavaligiafelice/puglia2012/thumbs/IMG_7861_2_3.jpg"/></a>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:51:40.927

将 display:block 添加到 img

[http://jsfiddle.net/renekoch/MDy3n/](http://jsfiddle.net/renekoch/MDy3n/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:49:35.543

尝试删除此行

```
a {float:left;border:2px #cccccc solid}​ 
```

如果您的意图是仅在悬停时突出显示图像并且效果很好

[http://jsfiddle.net/LpPVq/](http://jsfiddle.net/LpPVq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:49:47.690

我不是 CSS 方面的专家，但您似乎正在重新定义`a`CSS 第 3 行

# git - 我们如何通过浏览器使用 TortoiseGit 的所有功能？

> ID：12891220
> 
> 赞同：2
> 
> 时间：2012-10-15T07:42:25.467
> 
> 标签：git, web, interface, tortoisegit

我使用 Git 作为版本控制工具，使用 TortoiseGit 来管理我的存储库。

但我需要知道是否可以通过浏览器作为 Web 界面使用 TortoiseGit 的所有功能。
如果可能的话，它应该是一个免费的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-29T18:06:26.757

自 2012 年以来，[TortoiseGit](https://tortoisegit.org/)仍然提供*本地*repo 管理。

您将使用 Web 界面来管理*远程*存储库（即不在您计算机上的存储库）
通常，用于 Git 托管服务器的开源 Web 客户端将是[GitLab](https://about.gitlab.com/)、[Gogs](https://gogs.io/)、[Gitea](https://gitea.io/en-US/)、[Gitblit](http://gitblit.com/)，...

但是它们没有提供与 TortoiseGit 完全相同的功能：它们不会为您提供 repo 的本地状态。

为此，您可能会考虑另一个基于 Web 技术的客户端：[GitHub Desktop](https://desktop.github.com/)，最近（2017 年 5 月）用[Electron](https://electron.atom.io/)重新设计。[Electron 允许使用最初为Web 应用程序](https://en.wikipedia.org/wiki/Web_application)
开发的前端和后端组件开发桌面 GUI 应用程序：后端的[Node.js](https://en.wikipedia.org/wiki/Node.js)运行时和前端的[Chromium](https://en.wikipedia.org/wiki/Chromium_(web_browser))。（来源[维基百科](https://en.wikipedia.org/wiki/Electron_(software_framework))）

# javascript - 从字符串创建多维数组

> ID：12891226
> 
> 赞同：-3
> 
> 时间：2012-10-15T07:42:43.020
> 
> 标签：javascript, multidimensional-array

> **可能重复：**
> [在 JavaScript 中解析查询字符串](https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript)

我想从一个字符串创建一个选项数组。我如何创建一个数组作为

```
{
    width : 100, 
    height : 200
} 
```

从像这样的字符串

```
'width=100&height=200' 
```

有没有创建这样的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:47:13.073

试试这个：

```
JSON.parse('{"' + decodeURI(myString.replace(/&/g, "\",\"").replace(/=/g,"\":\"")) + '"}') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:48:33.620

这不是一个数组，它是一个对象。它也不是多维的。

但无论如何，您可以在`&`分隔符上拆分字符串，然后在 上拆分每个项目`=`：

```
var input = 'width=100&height=200',
    output = {},
    working = input.split("&"),
    current,
    i;

for (i=0; i < working.length; i++){
    current = working[i].split("=");
    output[current[0]] = current[1];
}

// output is now the object you described. 
```

当然，这不会验证输入字符串，并且不会满足同一属性出现多次的情况（在这种情况下，您可能希望创建一个值数组），但它应该可以帮助您入门。将上述内容封装在一个函数中会很好，但我将其作为练习留给读者......

# c# - 如何对 ASP.NET Web API 路由进行单元测试？

> ID：12891229
> 
> 赞同：33
> 
> 时间：2012-10-15T07:42:53.160
> 
> 标签：c#, unit-testing, asp.net-web-api

我正在尝试编写一些单元测试，以确保对我的 Web API 发出的请求被路由到具有预期参数的预期 API 控制器操作。

我尝试使用`HttpServer`该类创建测试，但我从服务器收到 500 条响应，但没有任何信息可以调试问题。

有没有办法为 ASP.NET Web API 站点的路由创建单元测试？

理想情况下，我想使用创建一个请求`HttpClient`并让服务器处理该请求并将其传递给预期的路由过程。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-15T12:29:47.563

我写了一篇关于测试路线的博客文章，并做了你所问的几乎所有事情：

[http://www.strathweb.com/2012/08/testing-routes-in-asp-net-web-api/](http://www.strathweb.com/2012/08/testing-routes-in-asp-net-web-api/)

希望能帮助到你。

另一个优点是我使用反射来提供操作方法 - 所以不是使用带有字符串的路由，而是以强类型的方式添加它们。使用这种方法，如果您的操作名称发生更改，测试将无法编译，因此您将能够轻松发现错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-15T08:49:44.323

为您的 ASP.NET Web API 应用程序测试路由的最佳方法是集成测试您的端点。

这是您的 ASP.NET Web API 应用程序的简单集成测试示例。这主要不是测试您的路线，而是无形地测试它们。另外，我在这里使用 XUnit、Autofac 和 Moq。

```
[Fact, NullCurrentPrincipal]
public async Task 
    Returns_200_And_Role_With_Key() {

    // Arrange
    Guid key1 = Guid.NewGuid(),
         key2 = Guid.NewGuid(),
         key3 = Guid.NewGuid(),
         key4 = Guid.NewGuid();

    var mockMemSrv = ServicesMockHelper
        .GetInitialMembershipService();

    mockMemSrv.Setup(ms => ms.GetRole(
            It.Is<Guid>(k =>
                k == key1 || k == key2 || 
                k == key3 || k == key4
            )
        )
    ).Returns<Guid>(key => new Role { 
        Key = key, Name = "FooBar"
    });

    var config = IntegrationTestHelper
        .GetInitialIntegrationTestConfig(GetInitialServices(mockMemSrv.Object));

    using (var httpServer = new HttpServer(config))
    using (var client = httpServer.ToHttpClient()) {

        var request = HttpRequestMessageHelper
            .ConstructRequest(
                httpMethod: HttpMethod.Get,
                uri: string.Format(
                    "https://localhost/{0}/{1}", 
                    "api/roles", 
                    key2.ToString()),
                mediaType: "application/json",
                username: Constants.ValidAdminUserName,
                password: Constants.ValidAdminPassword);

        // Act
        var response = await client.SendAsync(request);
        var role = await response.Content.ReadAsAsync<RoleDto>();

        // Assert
        Assert.Equal(key2, role.Key);
        Assert.Equal("FooBar", role.Name);
    }
} 
```

我在这个测试中使用了一些外部助手。其中之一是`NullCurrentPrincipalAttribute`. 由于您的测试将在您的 Windows 身份下运行，因此`Thread.CurrentPrincipal`将使用此身份进行设置。因此，如果您在应用程序中使用某种授权，最好首先摆脱它：

```
public class NullCurrentPrincipalAttribute : BeforeAfterTestAttribute {

    public override void Before(MethodInfo methodUnderTest) {

        Thread.CurrentPrincipal = null;
    }
} 
```

然后，我创建了一个 mock `MembershipService`。这是特定于应用程序的设置。因此，这将针对您自己的实现进行更改。

为我`GetInitialServices`创建了 Autofac 容器。

```
private static IContainer GetInitialServices(
    IMembershipService memSrv) {

    var builder = IntegrationTestHelper
        .GetEmptyContainerBuilder();

    builder.Register(c => memSrv)
        .As<IMembershipService>()
        .InstancePerApiRequest();

    return builder.Build();
} 
```

该`GetInitialIntegrationTestConfig`方法只是初始化我的配置。

```
internal static class IntegrationTestHelper {

    internal static HttpConfiguration GetInitialIntegrationTestConfig() {

        var config = new HttpConfiguration();
        RouteConfig.RegisterRoutes(config.Routes);
        WebAPIConfig.Configure(config);

        return config;
    }

    internal static HttpConfiguration GetInitialIntegrationTestConfig(IContainer container) {

        var config = GetInitialIntegrationTestConfig();
        AutofacWebAPI.Initialize(config, container);

        return config;
    }
} 
```

该`RouteConfig.RegisterRoutes`方法基本上注册了我的路线。我也有一些扩展方法来创建一个`HttpClient`超过`HttpServer`.

```
internal static class HttpServerExtensions {

    internal static HttpClient ToHttpClient(
        this HttpServer httpServer) {

        return new HttpClient(httpServer);
    }
} 
```

最后，我有一个名为的静态类`HttpRequestMessageHelper`，它有一堆静态方法来构造一个新`HttpRequestMessage`实例。

```
internal static class HttpRequestMessageHelper {

    internal static HttpRequestMessage ConstructRequest(
        HttpMethod httpMethod, string uri) {

        return new HttpRequestMessage(httpMethod, uri);
    }

    internal static HttpRequestMessage ConstructRequest(
        HttpMethod httpMethod, string uri, string mediaType) {

        return ConstructRequest(
            httpMethod, 
            uri, 
            new MediaTypeWithQualityHeaderValue(mediaType));
    }

    internal static HttpRequestMessage ConstructRequest(
        HttpMethod httpMethod, string uri,
        IEnumerable<string> mediaTypes) {

        return ConstructRequest(
            httpMethod,
            uri,
            mediaTypes.ToMediaTypeWithQualityHeaderValues());
    }

    internal static HttpRequestMessage ConstructRequest(
        HttpMethod httpMethod, string uri, string mediaType, 
        string username, string password) {

        return ConstructRequest(
            httpMethod, uri, new[] { mediaType }, username, password);
    }

    internal static HttpRequestMessage ConstructRequest(
        HttpMethod httpMethod, string uri, 
        IEnumerable<string> mediaTypes,
        string username, string password) {

        var request = ConstructRequest(httpMethod, uri, mediaTypes);
        request.Headers.Authorization = new AuthenticationHeaderValue(
            "Basic",
            EncodeToBase64(
                string.Format("{0}:{1}", username, password)));

        return request;
    }

    // Private helpers
    private static HttpRequestMessage ConstructRequest(
        HttpMethod httpMethod, string uri,
        MediaTypeWithQualityHeaderValue mediaType) {

        return ConstructRequest(
            httpMethod, 
            uri, 
            new[] { mediaType });
    }

    private static HttpRequestMessage ConstructRequest(
        HttpMethod httpMethod, string uri,
        IEnumerable<MediaTypeWithQualityHeaderValue> mediaTypes) {

        var request = ConstructRequest(httpMethod, uri);
        request.Headers.Accept.AddTo(mediaTypes);

        return request;
    }

    private static string EncodeToBase64(string value) {

        byte[] toEncodeAsBytes = Encoding.UTF8.GetBytes(value);
        return Convert.ToBase64String(toEncodeAsBytes);
    }
} 
```

我在我的应用程序中使用基本身份验证。所以，这个类有一些方法可以`HttpRequestMessege`用 Authentication 头构造一个。

最后，我执行我的*Act*和*Assert*来验证我需要的东西。这可能是一个矫枉过正的样本，但我认为这会给你一个好主意。

这是一篇关于[使用 HttpServer 进行集成测试](http://www.strathweb.com/2012/06/asp-net-web-api-integration-testing-with-in-memory-hosting/)的精彩博文。此外，这里还有一篇关于[在 ASP.NET Web API 中测试路由的](http://www.strathweb.com/2012/08/testing-routes-in-asp-net-web-api/)好文章。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-21T04:43:20.723

嗨，当您要测试您的路线时，主要目标是使用此测试测试 GetRouteData()，您可以确保路线系统正确识别您的请求并选择正确的路线。

```
[Theory]
[InlineData("http://localhost:5240/foo/route", "GET", false, null, null)]
[InlineData("http://localhost:5240/api/Cars/", "GET", true, "Cars", null)]
[InlineData("http://localhost:5240/api/Cars/123", "GET", true, "Cars", "123")]
public void DefaultRoute_Returns_Correct_RouteData(
     string url, string method, bool shouldfound, string controller, string id)
{
    //Arrange
    var config = new HttpConfiguration();

    WebApiConfig.Register(config);

    var actionSelector = config.Services.GetActionSelector();
    var controllerSelector = config.Services.GetHttpControllerSelector();

    var request = new HttpRequestMessage(new HttpMethod(method), url);
    config.EnsureInitialized();
    //Act
    var routeData = config.Routes.GetRouteData(request);
    //Assert
    // assert
    Assert.Equal(shouldfound, routeData != null);
    if (shouldfound)
    {
        Assert.Equal(controller, routeData.Values["controller"]);
        Assert.Equal(id == null ? (object)RouteParameter.Optional : (object)id, routeData.
        Values["id"]);
    }
} 
```

这很重要，但还不够，即使检查是否选择了正确的路由并提取了正确的路由数据也不能确保选择了正确的控制器和操作，如果您不重写默认的**IHttpActionSelector**和**IHttpControllerSelector**服务，这是一种方便的方法用你自己的。

```
 [Theory]
        [InlineData("http://localhost:12345/api/Cars/123", "GET", typeof(CarsController), "GetCars")]
        [InlineData("http://localhost:12345/api/Cars", "GET", typeof(CarsController), "GetCars")]
        public void Ensure_Correct_Controller_and_Action_Selected(string url,string method,
                                                    Type controllerType,string actionName) {
            //Arrange
            var config = new HttpConfiguration();
            WebApiConfig.Register(config);

            var controllerSelector = config.Services.GetHttpControllerSelector();
            var actionSelector = config.Services.GetActionSelector();

            var request = new HttpRequestMessage(new HttpMethod(method),url);

            config.EnsureInitialized();

            var routeData = config.Routes.GetRouteData(request);
            request.Properties[HttpPropertyKeys.HttpRouteDataKey] = routeData;
            request.Properties[HttpPropertyKeys.HttpConfigurationKey] = config;
            //Act
            var ctrlDescriptor = controllerSelector.SelectController(request);
            var ctrlContext = new HttpControllerContext(config, routeData, request)
            {
                ControllerDescriptor = ctrlDescriptor
            };
            var actionDescriptor = actionSelector.SelectAction(ctrlContext);
            //Assert
            Assert.NotNull(ctrlDescriptor);
            Assert.Equal(controllerType, ctrlDescriptor.ControllerType);
            Assert.Equal(actionName, actionDescriptor.ActionName);
        }
    } 
```

# r - 排除具有一天中特定时间的行

> ID：12891232
> 
> 赞同：6
> 
> 时间：2012-10-15T07:43:03.327
> 
> 标签：r, datetime, time, posixct

我有一个时间序列的连续数据，每隔 10 分钟测量一次，为期五个月。为简单起见，数据分为两列，如下所示：

```
时间戳 Temp.Diff
2011 年 2 月 14 日 19:00 -0.385
2011 年 2 月 14 日 19:10 -0.535
2011 年 2 月 14 日 19:20 -0.484
2011 年 2 月 14 日 19:30 -0.409
2011 年 2 月 14 日 19:40 -0.385
2011 年 2 月 14 日 19:50 -0.215

```

......它会持续接下来的五个月。我已经使用`as.POSIXct`.

我想选择一天中特定时间的行（例如，从中午 12 点到下午 3 点），我想排除一天中的其他时间，或者只提取这 3 个小时但仍然有数据流顺序（即在时间序列中）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T08:31:27.763

您似乎知道基本概念，但只是缺少细节。正如您所提到的，我们只是将时间戳转换为 POSIX 对象，然后是子集。

**润滑液**

最简单的方法可能是使用 lubridate。首先加载包：

```
library(lubridate) 
```

接下来转换时间戳：

```
##*m*onth *d*ay *y*ear _ *h*our *m*inute
d = mdy_hm(dd$Timestamp) 
```

然后我们选择我们想要的。在这种情况下，我想要晚上 7:30 之后的任何日期（无论是哪一天）：

```
dd[hour(d) == 19 & minute(d) > 30 | hour(d) >= 20,] 
```

* * *

**基础 R 解决方案**

首先创建一个上限：

```
lower = strptime("2/14/2011 19:30","%m/%d/%Y %H:%M") 
```

接下来转换 POSIX 对象中的时间戳：

```
d = strptime(dd$Timestamp, "%m/%d/%Y %H:%M") 
```

最后，一些数据帧子集：

```
dd[format(d,"%H:%M") > format(lower,"%H:%M"),] 
```

*感谢最后一部分的plannapus*

* * *

上例的数据：

```
dd = read.table(textConnection('Timestamp Temp.Diff
"2/14/2011 19:00" -0.385
"2/14/2011 19:10" -0.535
"2/14/2011 19:20" -0.484
"2/14/2011 19:30" -0.409
"2/14/2011 19:40" -0.385
"2/14/2011 19:50" -0.215'), header=TRUE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:42:19.460

您可以使用 xts 包中基于时间的子集轻松完成此操作。假设您的 data.frame 被命名为`Data`：

```
library(xts)
x <- xts(Data$Temp.Diff, Data$Timestamp)
y <- x["T12:00/T15:00"]
# you need the leading zero if the hour is a single digit
z <- x["T09:00/T12:00"] 
```

# tridion - 在 Tridion 动态组件演示中使用 REL 的正确配置

> ID：12891234
> 
> 赞同：0
> 
> 时间：2012-10-15T07:43:24.237
> 
> 标签：tridion, tridion-2011, rel, tridion-content-delivery

我们有一个动态 CT 来渲染组件输出，其中有一个带有链接文本的组件链接。预览时，输出看起来是正确的，但是一旦我们发布页面并点击，链接就不会显示（甚至是链接文本）。
DCT 和目标语言的输出格式都设置为 REL，但我们的 tcdl:link 没有解析，动态组件演示也没有呈现。在不解析 tcdl:link 标记的情况下，嵌入的演示文稿正在与页面一起呈现。存储文件指向 sql db。

您能否建议还需要做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T08:01:29.640

也许您可以将问题标题编辑得更具体一些。我假设您希望使用 REL 在动态组件演示中解析动态链接。听起来您已正确设置，但只是为了确保这是一个快速检查列表：

1.  您正在使用 Tridion 2011 SP1（REL DCP 中的动态链接在 2011 GA 中无法解析）
2.  组件模板输出格式为REL，设置为动态（注意发布目标语言不一定是REL）
3.  组件模板输出组件链接

发布包含动态组件演示的页面。检查以下内容：

1.  在已发布的页面内容中，您应该会看到类似`<tridion:ComponentPresentation ..../>`DCP 的插入位置
2.  在数据库中，您应该在`COMPONENT_PRESENTATIONS`表中看到您的 REL DCP，这应该包含`<tcdl:Link...>`链接应该位于的标记

在浏览器中请求页面。检查组件演示是否显示，链接是否呈现为`<a../>`锚标记

如果没有，请检查内容传递日志文件，看看是否有任何错误。另请检查动态链接是否在“正常”页面上运行。

# magento - GetStoreConfig 返回空

> ID：12891237
> 
> 赞同：0
> 
> 时间：2012-10-15T07:43:31.740
> 
> 标签：magento

在 Magento 中，该函数`getStoreConfig($path)`将获取 table 中 $path 的值`core_config_data`。我已经检查了`$path`我使用的值是`carriers/flatrate/infotext`，但我仍然没有从调用中返回任何内容`Mage::getStoreConfig('carriers/flatrate2/infotext')`。

我试图禁用缓存以及刷新所有缓存，但它仍然不起作用。

当我尝试为 Magento 安装 GLS 扩展时发生这种情况，是否有任何情况会以某种方式干扰此功能？谢谢

*更新：*

我刚刚发现：这个函数实际上返回了文本，我发现它没有任何问题但是它不起作用，当我尝试`Magento::getStoreConfig`直接使用时，它起作用了。

```
protected function getInfoText($carrierCode)
{
  if ($text = Mage::getStoreConfig('carriers/'.$carrierCode.'/infotext')) {
    return $text;
  }
  return '';
} 
```

Magento 版本：1.7 CE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:26:16.150

Magento 将 StoreConfig 缓存在内存中，因此请确保在 Magento 中更改 config_store_data 后刷新所有缓存。当您尝试升级或安装新扩展时会发生这种情况 - 这是我的情况。

# jsp - 显示标签中的外部分页示例

> ID：12891238
> 
> 赞同：0
> 
> 时间：2012-10-15T07:43:40.693
> 
> 标签：jsp, struts2, external, paging, displaytag

我是显示标签的新手。我正在使用显示标签 1.2、struts2 和休眠。显示标签效果很好，除了当我点击下一页时它会获取整个数据库行。我发现我必须使用显示标签的外部分页。由于我是新手，因此任何完整的外部分页示例都将被占用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:20:25.873

我对 paginatedList 有一些问题

> 这是我以前在页面上显示列表的休眠方法

```
public List<TXT_Beans> regenerateListData(int cust_Id)
{
   Session session = HibernateUtil.getSessionFactory().getCurrentSession();
   String sqlQuery=null;
   List<TXT_Beans> txtList = new ArrayList<TXT_Beans>();

  try  
  {
   sqlQuery="select `accounts`.`account_id`,`customer_information`.`customer_unique_enroll_id`,`accounts`.`branch_id`,csp_information`.`bc_csp_code`,`csp_information`.`csp_alpha_id`,`customer_information`.`first_name`,from `customer_information` join `customer_accounts_xref` using (customer_unique_enroll_id) WHERE`customer_accounts_xref`.`customer_unique_enroll_id`="+cust_Id;
     session.beginTransaction(); 
```

.............这是我之前的查询，当显示标签获取整行时。现在如何针对我必须仅获取指定编号的情况进行修改。行而不是使用显示标签的整个数据库，无需排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:45:16.827

外部寻呼是 4 步过程。

1.  获取`total result count`, 除以页面大小并在 UI 中显示页码。
2.  进行数据库调用`pageNumber`以检索数据以及过滤条件（如果有）来自服务器组件，例如您的休眠
3.  `pagesize * pagenumber +1` 在您的服务器端代码中，您必须从to开始检索记录`pagesize * (pagenumber+1)`并返回。这称为分页结果。
4.  `paged result`在 UI 中显示第 3 步的返回并`pagenumber`选中。

# svn - SVN结帐后配置YII webapp

> ID：12891239
> 
> 赞同：0
> 
> 时间：2012-10-15T07:43:43.207
> 
> 标签：svn, nginx, yii

我有一个使用的 YII webapp 项目`svn checkout repo`。当我尝试在我的 NGINX 服务器上运行这个 webapp 时，它（**project1**）给了我一个错误 -

```
Application runtime path "~/workspace/project1/protected/runtime" is not valid. Please make sure it is a directory writable by the Web server process. 
```

但是当我创建其他一些 YII 项目（**project2**）时，比如 -

```
yiic webapp ~/workspace/project2
#and then the MVC procedure
./protected/yiic shell
>>model User users
>>crud User 
```

我可以在浏览器中运行我的 webapp。

是不是因为没有配置*project1*？我必须手动对我的配置进行什么配置`working copy`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:01:59.923

您必须为 nginx 用户授予对*运行时文件夹的写入权限。*

Yii 在运行时使用这个文件夹来存储临时文件，来自[指南](http://www.yiiframework.com/doc/guide/1.1/en/basics.convention#directory "http://www.yiiframework.com/doc/guide/1.1/en/basics.convention#directory")：

> WebRoot/protected/runtime：此目录保存应用程序运行期间生成的私有临时文件。此目录必须可由 Web 服务器进程写入。

因此，yii 在[CApplication`setRuntimePath()`](https://github.com/yiisoft/yii/blob/1.1.12/framework/base/CApplication.php#L268 "https://github.com/yiisoft/yii/blob/1.1.12/framework/base/CApplication.php#L268")中进行了此项检查：

```
if(($runtimePath=realpath($path))===false || !is_dir($runtimePath) || !is_writable($runtimePath)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T09:53:36.760

您还可以使用该`yiic webapp`命令在签出项目中设置权限，假设您`yii/framework`与开发项目具有相同的相对路径。

```
svn checkout http://domain.tld/myproject myproject
cd myproject
protected/yiic webapp . 
```

**只要确保不覆盖现有文件即可。**

# artificial-intelligence - SURF 描述符提取的值是神经网络的良好输入吗？

> ID：12891245
> 
> 赞同：0
> 
> 时间：2012-10-15T07:43:57.153
> 
> 标签：artificial-intelligence, surf

如标题中所述，这些值是否足以训练神经网络进行分类任务（2 类）？

我的目标是尝试使用使用 SURF 提取的特征点来分割前景和背景。这些提取的特征点将被输入到神经网络（监督或分类）中。

我的问题是，这些值（128 或 64 梯度信息）是训练 NN 的好选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:44:28.887

简短的回答：是的，非常好。

稍微长一点的答案：您依靠 SURF 来做 SURF 最擅长的事情，并且您依靠 NN 来分类/识别这些输入的模式。这是完全正确的。实际上，它总是取决于手头的确切任务，如果无论出于何种原因，SURF 没有获取与您正在构建的模型相关的特征，那么您就会遇到麻烦。但总的来说：竖起大拇指。

# bash - Bash - 替换变量

> ID：12891251
> 
> 赞同：1
> 
> 时间：2012-10-15T07:44:15.453
> 
> 标签：bash, sed

非常感谢您的帮助！

我想转换这个变量：

win_path= **/cygdrive/g** /virtual_tours/.archives/vt_template_8_0_15/test_directory_2/panos

进入：

win_path_dir= **G:** /virtual_tours/.archives/vt_template_8_0_15/test_directory_2/panos

这是我到目前为止所拥有的，但它不起作用。当我回显 $win_path 它什么都不返回（黑色，空白）

```
$win_path=$(echo $i | sed -e 's/\/cygdrive\/g/G\:/g') 
```

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:50:24.530

你的方法很好，只有一点错字：

```
win_path=$(echo $i | sed -e 's/\/cygdrive\/g/G\:/g') 
```

`$win_path`定义变量win_path的值时不要写(no $)。当您编写`$win_path`外壳程序时，会扩展变量的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:47:41.810

`$`定义或设置变量时，不要在变量前面加上：

```
win_path=$(echo $i | sed -e 's/\/cygdrive\/g/G\:/g') 
```

`$`导致字符串被变量*名*`$name`的值替换，请参见[bash 手册页](http://linux.die.net/man/1/bash)。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T10:05:08.277

如果可以使用 wine，[winepath](http://wiki.winehq.org/winepath)就是完成这项工作的工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T13:00:06.583

使用`bash`替换：

```
prefix=/cygdrive/g
win_path=${winpath/#$prefix/G:} 
```

请注意，定义`prefix`并不是绝对必要的；它只是让您无需转义目录分隔符。以下工作很好，虽然它的可读性稍差：

```
win_path=${winpath/#\/cygdrive\/g/G:} 
```*

# c# - 在生成的 Excel 文档中设置最大行高

> ID：12891253
> 
> 赞同：0
> 
> 时间：2012-10-15T07:44:32.973
> 
> 标签：c#, asp.net

在我的 Web 应用程序中，用户可以获得 excel 报告。问题是：当行中的一个单元格包含长文本时，所有行都在增长，并且 Excel 报告看起来很糟糕。我需要为我的 excel 文档中的所有行设置最大行高。

```
 public bool UseOldFormat { get; set; }

 public ExcelFile GetExcelFile()
        {
            var excel = new ExcelFile();

            if (!string.IsNullOrEmpty(SourceFileName))
            {
                if (SourceFileName.EndsWith("xls"))
                {
                    excel.LoadXls(SourceFileName);
                }
                else
                {
                    excel.LoadXlsx(SourceFileName, XlsxOptions.PreserveMakeCopy);
                }
            }

            return excel;
        }

public void GenerateReport(string fileName)
        {
            ExcelFile excel = GetExcelFile();

            InsertDataInExcel(excel);

            if (UseOldFormat)
            {
                excel.SaveXls(fileName);
            }
            else
            {
                excel.SaveXlsx(fileName);
            }
        } 
```

在 excel 选项中找不到此功能。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:09:25.170

您可以指定列的范围，然后可以调整它们的宽度，高度如下：

```
Microsoft.Office.Tools.Excel.NamedRange setColumnRowRange;
    private void SetColumnAndRowSizes()
    {
        setColumnRowRange = this.Controls.AddNamedRange(
            this.Range["C3", "E6"], "setColumnRowRange");
        this.setColumnRowRange.ColumnWidth = 20;
        this.setColumnRowRange.RowHeight = 25;
        setColumnRowRange.Select();
    } 
```

访问：http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.namedrange.rowheight.aspx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T18:15:47.727

如果您的文件行数太高，则此宏可以解决问题：（
由您决定，Oleg，如何将其集成到文档创建工具中，以防万一）

```
Sub MaxRowHeight()
    Dim Re As Long
    Re = ActiveCell.SpecialCells(xlLastCell).Row
    For i = 1 To Re
        If Rows(i).Height > 43.2 Then Rows(i).RowHeight = 43.2
    Next i
End Sub 
```

学分转到这篇文章和那里的讨论：
[http ://excelribbon.tips.net/T010381_Adjusting_to_a_Maximum_Row_Height.html](http://excelribbon.tips.net/T010381_Adjusting_to_a_Maximum_Row_Height.html)

# facebook - new_style_message 对我来说不再工作了，还有其他解决方法可以像 branchout/glassdoor 那样发送带有自定义消息的 apprequest 吗？

> ID：12891255
> 
> 赞同：2
> 
> 时间：2012-10-15T07:44:41.530
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

为了发送带有自定义消息的 apprequest，我使用的是 js api，未记录的参数`new_style_message`设置为 true，但现在它似乎停止工作。

这就是我发送请求的方式：

```
FB.ui({method: 'apprequests',
       message: 'notification message',
       title: 'tile of request',
       data: '$gid',
       to: user_ids,
       new_style_message:true
      }, requestCallback); 
```

有没有人有任何解决方法？请帮忙。

**更新**：请求正在正确发送，只是没有显示我向其发送请求的自定义消息。我想知道有没有办法可以通过自定义消息发送它？

# c# - 什么是好的 NetworkStream.Read 缓冲区大小？

> ID：12891256
> 
> 赞同：4
> 
> 时间：2012-10-15T07:44:44.370
> 
> 标签：c#, tcp, tcpclient, networkstream

我将使用 TcpClient 与直接（通过交叉电缆）连接到我的目标系统的系统进行通信。

我将收到的消息通常很简单，实际上它们大多是不超过 10 行的 XML 消息。

偶尔，一个更大的可能会通过。

为 NetworkStream 的 (Begin)Read 方法定义缓冲区大小的一个好的经验法则是什么？在很多例子中它是 1024 字节。让它变得非常大或非常小是否有意义，或者这是一个很好的默认值？

# iphone - iOS - 如何在识别到任何触摸手势时停止视图动画

> ID：12891257
> 
> 赞同：2
> 
> 时间：2012-10-15T07:44:44.970
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我有一个 UIView，我在其上添加了 PanGestureRecognizer，我的 UI 将表现得像平移，并且在平移手势结束后，它应该继续沿该方向移动并减速。我已经做到了。以街区显示减速

```
[UIView animateWithDuration:slideFactor*2
                      delay:0
                    options:UIViewAnimationOptionCurveEaseOut | UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                     _movieView.center = finalPoint;
               } completion:nil]; 
```

现在在动画过程中，如果它识别出另一个触摸或点击或平移，它应该在那个点停止。因此，可以进行进一步的平移。

我的 PanGestureRecognizer 选择器方法正在做这样的事情。

```
if ([panGesture state] == UIGestureRecognizerStateChanged)
{
    [self mpvGestureStateBeginOrChanged:panGesture];
}
if ([panGesture state] == UIGestureRecognizerStateEnded)
{
    [self mpvGestureStateEnd:panGesture];
}
if ([panGesture state] == UIGestureRecognizerStateBegan) 
{
    [self.view.layer removeAllAnimations];
    // It stops at the final end position of the view
    // I want to stop animation right at the this point.
} 
```

**注意**由于 UI 的一些限制，我不能使用 UIScrollView。请给我一些建议或解决问题

# c# - LINQ 中的案例查询等价于 sql 查询

> ID：12891262
> 
> 赞同：5
> 
> 时间：2012-10-15T07:44:59.650
> 
> 标签：c#, sql, linq

我有一个包含调用者、被调用者字段的数据集，我需要一些 LINQ 查询来操作这个数据集，相当于这个 sql 查询

```
SELECT CASE
     WHEN caller < callee THEN callee
     ELSE caller
   END      AS caller1,
   CASE
     WHEN caller < callee THEN caller
     ELSE callee
   END      AS caller2,
   Count(*) AS [Count]
    FROM   YourTable
   GROUP  BY CASE
        WHEN caller < callee THEN callee
        ELSE caller
      END,
      CASE
        WHEN caller < callee THEN caller
        ELSE callee
      END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:12:40.797

这就是你所追求的吗？

```
DataSet dataSet = new DataSet();
DataTable dataTable = new DataTable("dataTable");

dataTable.Columns.Add("caller", typeof(String));
dataTable.Columns.Add("callee", typeof(String));

dataTable.Rows.Add("999", "888");
dataTable.Rows.Add("888", "999");
dataTable.Rows.Add("999", "555");
dataTable.Rows.Add("555", "333");
dataTable.Rows.Add("555", "999");

dataSet.Tables.Add(dataTable);

string filter = "999";

var result = dataSet.Tables["dataTable"].Select().Select(dr =>
    new
    {
        caller1 = StringComparer.CurrentCultureIgnoreCase.Compare(dr["caller"], dr["callee"]) < 0 ? dr["callee"] : dr["caller"],
        caller2 = StringComparer.CurrentCultureIgnoreCase.Compare(dr["caller"], dr["callee"]) < 0 ? dr["caller"] : dr["callee"]
    })
        .Where(dr => String.IsNullOrEmpty(filter) || dr.caller1 == filter || dr.caller2 == filter)
        .GroupBy(drg => new { drg.caller1, drg.caller2 } )
        .Select(drg => new { drg.Key.caller1, drg.Key.caller2, count = drg.Count() }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:53:53.600

这就是您要查找的内容，请注意范围变量的使用，这有助于我们重用 case 语句并简化 LINQ 查询。

```
var query = from y in YourTable
            //place the result of the case statement into a range variable so we can reuse it for the grouping
            let caller1 = y.caller < y.callee ? y.callee : y.caller
            let caller2 = y.caller < y.callee ? y.caller : y.callee
            //group the results
            group y by new { caller1, caller2 } into grouping
            select new
            {            
                //get the range variables from the grouping key
                grouping.Key.caller1,
                grouping.Key.caller2,
                //get the count of the grouping
                Count = grouping.Count(),
            }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:47:39.247

```
SELECT CASE
  WHEN caller < callee THEN callee
  ELSE caller
END      AS caller1 
```

被翻译成

```
caller1 = x.caller < x.callee ? x.callee : x.caller 
```

# javascript - jQuery文件上传插件不调用成功回调

> ID：12891264
> 
> 赞同：7
> 
> 时间：2012-10-15T07:45:28.187
> 
> 标签：javascript, jquery, jquery-file-upload

我正在使用 jQuery 文件上传插件，一旦文件上传完成，我想做一些自定义 jQuery 的东西

从这里 [https://github.com/blueimp/jQuery-File-Upload/wiki/Options](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)

现在它这么说

```
Callback for successful upload requests.
$('#fileupload')
       .bind('fileuploaddone', function (e, data) {/* ... */}) 
```

现在我已经在我自己的 js 文件中定义了这个用于测试的自定义函数

```
$('#fileupload').bind('fileuploaddone', function (e, data) {/* ... */
alert('Hello');
}) 
```

但它不起作用。

但是如果我在这里编辑主文件

```
 // Callback for successful uploads:
            done: function (e, data) { 
```

然后它工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T20:05:20.563

检查服务器端上传脚本是否返回 JSON 回复 - 在我的情况下，当回复为空时它不起作用，但文件已成功上传。

所以，下面是为我工作的 jQuery 1.9.1 和“jQuery 文件上传插件”的最新版本 - 5.21.3

```
$("#fileupload").bind("fileuploaddone", function (e, data) {
    console.log("fileuploaddone event fired");
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T08:02:43.407

查看库代码，似乎所有事件都被重命名为删除'fileupload'......所以'fileuploaddone'变成了'done'。它适用于所有其他回调。看这个部分：

```
 // Other callbacks:
    // Callback for the submit event of each file upload:
    // submit: function (e, data) {}, // .bind('fileuploadsubmit', func);
    // Callback for the start of each file upload request:
    // send: function (e, data) {}, // .bind('fileuploadsend', func);
    // Callback for successful uploads:
    // done: function (e, data) {}, // .bind('fileuploaddone', func);
    // Callback for failed (abort or error) uploads:
    // fail: function (e, data) {}, // .bind('fileuploadfail', func);
    // Callback for completed (success, abort or error) requests:
    // always: function (e, data) {}, // .bind('fileuploadalways', func);
    // Callback for upload progress events:
    // progress: function (e, data) {}, // .bind('fileuploadprogress', func);
    // Callback for global upload progress events:
    // progressall: function (e, data) {}, // .bind('fileuploadprogressall', func);
    // Callback for uploads start, equivalent to the global ajaxStart event:
    // start: function (e) {}, // .bind('fileuploadstart', func);
    // Callback for uploads stop, equivalent to the global ajaxStop event:
    // stop: function (e) {}, // .bind('fileuploadstop', func);
    // Callback for change events of the fileInput(s):
    // change: function (e, data) {}, // .bind('fileuploadchange', func);
    // Callback for paste events to the pasteZone(s):
    // paste: function (e, data) {}, // .bind('fileuploadpaste', func);
    // Callback for drop events of the dropZone(s):
    // drop: function (e, data) {}, // .bind('fileuploaddrop', func);
    // Callback for dragover events of the dropZone(s):
    // dragover: function (e) {}, // .bind('fileuploaddragover', func); 
```

如果您对发生的事情有一些疑问，只需查看里面的代码即可。这个库没有压缩，所以很容易看到。例如

```
// start: function (e) {}, // .bind('fileuploadstart', func); 
```

`start`实现回调。`fileuploadstart`不是。

# .net - 在类库项目中缺少“System.ServiceModel”

> ID：12891266
> 
> 赞同：2
> 
> 时间：2012-10-15T07:45:48.433
> 
> 标签：.net, c#-4.0, .net-4.0, .net-3.5

我有一个在 3.5 框架中制作的类库项目。现在我想将此项目更新为框架 4.0。通过使用项目属性，我已将此项目从 3.5 更改为 4.0 Target 框架。现在它给了我一个错误，即

> 错误：命名空间“System”中不存在类型或命名空间名称“ServiceModel”（您是否缺少程序集引用？）

在此之前，当这个项目在 3.5 框架中成功构建但在更改 4.0 框架后，它会抛出此错误。

我对 4.0.0.0 版本的 System.ServiceModel 进行了新的引用，如下所示： ![在此处输入图像描述](../Images/7370eec84db7d100d1a98d39e0ece52b.png)

但在添加这个新的 System.ServiceModel dll 之后，它会显示相同的错误，如下所示： ![在此处输入图像描述](../Images/a08fdfbf42ac6e84015a269127a31273.png)

如何将这个 3.5 项目转换为 4.0？

如何解决此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:47:26.117

您描述的步骤似乎是正确的。编译后黄色问号应该会消失。

1.  将目标 .NET 框架从 .NET 3.5 更改为 .NET 4.0（**不是**.NET 4.0 客户端配置文件，否则 System.ServiceModel 程序集不会出现在“添加引用”对话框中）
2.  在项目中添加对`System.ServiceModel`4.0.0.0 的引用

# php - 如何使用 facebook 注册实现 codeigniter 注册

> ID：12891267
> 
> 赞同：0
> 
> 时间：2012-10-15T07:45:51.360
> 
> 标签：php, facebook, codeigniter

我需要使用 Facebook 注册流程实现将用户注册到我当前网站的功能

任何人都可以向我提供一些指南或博客的链接，其中已经提供了一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:52:02.607

动用你的想象力。只需查看[Facebook 文档](https://developers.facebook.com/docs/authentication/client-side/)。它的文档记录不如它可能的那么好，但它可以让你至少阅读所有内容两次。

进行身份验证，如果需要，检索您想要的信息，例如[电子邮件](https://developers.facebook.com/docs/authentication/permissions/)等。如果您从 Facebook 获得的信息足够多，请像其他任何帐户一样创建一个帐户，但请保存 Facebook ID，以便下次登录。

如果您需要更多信息，您可以在提交其他数据后检索[Facebook 数据](https://developers.facebook.com/docs/reference/api/)并注册用户。

如果制作自己的版本太难或太费时，请谷歌搜索现有版本。标签：**codeigniter 脸书登录**

* * *

就个人而言，我通过个人制作的库使用[Facebook 的图形 API](https://developers.facebook.com/docs/reference/api/)，该库处理我对 Facebook 的所有调用。使用他们提供的简单而干净的 API，无需 php sdk 即可轻松管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:51:36.680

这是 Facebook 开发者门户网站上关于使用 Facebook 注册插件注册用户的官方文章

< [http://developers.facebook.com/docs/plugins/registration/](http://developers.facebook.com/docs/plugins/registration/) >

另外，这是我刚刚在 GitHub 上找到的一个插件。我认为这正是您正在寻找的

< [https://github.com/falexandrou/Codeigniter-Social-Register](https://github.com/falexandrou/Codeigniter-Social-Register) >

编辑：

另外，请参阅此 SO 问题：[Using Facebook PHP-SDK 3.x to register/login user with Codeigniter 2.1.0](https://stackoverflow.com/questions/9454238/using-facebook-php-sdk-3-x-to-register-login-user-with-codeigniter-2-1-0)

# objective-c - 使用 iOS 4.3 多次发送 SMS 时，MFMessageComposeViewController 始终包含第一条消息的数据

> ID：12891268
> 
> 赞同：0
> 
> 时间：2012-10-15T07:45:52.707
> 
> 标签：objective-c, ios, xcode, mfmessagecomposeview

我正在使用 MFMessageComposeViewController 从 iPhone 设备发送短信。

这适用于 iOS 5 及更高版本。

但在 iOS 4.3 中，我只能正确发送一次短信。所有接下来的尝试都向我展示了 MFMessageComposeViewController 来自第一条 SMS 的数据。

我正在使用启用了 ARC 的 Xcode 4.3.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:47:51.057

应 Shivan Raptor 的要求：

有需要打电话

```
[controller dismissModalViewControllerAnimated:YES]; 
```

在 -

```
(void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result 
```

# struts2 - 将所有请求后跟一些名称重定向到单个页面

> ID：12891272
> 
> 赞同：0
> 
> 时间：2012-10-15T07:46:09.393
> 
> 标签：struts2

如果有任何用户请求页面，例如 /q/abc1 和 /q/abc2 等。我想将 q 后面的所有请求重定向到单个页面。

假设每当用户使用 www.mysite.com/q/abc1 或 www.mysite.com/q/abc2 请求时，我想将所有后跟 q 的请求重定向到单个页面，例如 handler.jsp。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:53:48.450

我认为您应该在 fwd 到 struts 2 框架（FilterDispatcher）之前使用过滤器并过滤掉请求

```
public class SampleServletFilter implements Filter {
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest httpRequest = (HttpServletRequest) request;
            String requestURI = httpRequest.getRequestURI();
            if(requestURI.contains("/q/")) {
               // redirect to handler.jsp
            } else {
                chain.doFilter(request, response);
            }     

       }    
   } 
```

因为使用 struts2 拦截器处理这种情况很棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:16:34.900

`package`嗯... with`namespace="/q"`和 default action怎么样
`<default-action-ref name="someAction"/>`。

# git - git push 失败，寻找部分文件历史删除

> ID：12891273
> 
> 赞同：3
> 
> 时间：2012-10-15T07:46:09.830
> 
> 标签：git, heroku, binary, push, history

我一直在使用 heroku 和 git 通过基本工作流程更新 facebook 应用程序。我是唯一一个工作的人，唯一发生的事情是每周一次新的二进制文件。git commit -am “新更新” git push heroku

二进制文件已增长到大约 30 MB。最近所有的推送命令都像这样失败：计数对象：7，完成。压缩对象：100% (4/4)，完成。致命：sha1 文件''写入错误：无效参数错误：无法将一些参考推送到'mysecretgitplace'

我查看了很多地方，发现这是一个非常常见的问题，似乎没有什么特别的原因，可能是任何原因。现在，随着时间的推移唯一改变的是二进制文件的大小增加和提交的数量增加，它可能就是这样。

所以现在我想尝试通过删除/销毁/删除这个二进制文件的历史来减少我正在使用的服务器空间（完全除了当前版本（在服务器上的头/主服务器上）。我会除了每周提交二进制文件外，每隔一段时间就这样做一次。

有没有让我这样做的命令？（提交新的二进制文件后，无需重新添加文件的整个“已删除”历史记录）

（很明显，我只想在我的游戏上工作，而不是为所有的服务器和版本控制而烦恼。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:42:37.147

Git 允许您通过[过滤](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)删除部分历史记录。

在您的情况下，第一个示例应该可以解决问题：`git filter-branch --index-filter 'git rm --cached --ignore-unmatch filename' HEAD`.

尽管如此，您应该非常仔细地阅读此命令以及需要在您的存储库和远程执行哪些操作才能使其生效（特别是，您必须`git gc`在本地存储库中使用）。

您可以在[github 帮助部分](https://help.github.com/articles/remove-sensitive-data)阅读更多相关信息。

附带说明一下，git 在管理大文件方面并不是很好（寻找`git annex`潜在的解决方案）。

# php - 如何调整上传图片的大小？

> ID：12891292
> 
> 赞同：0
> 
> 时间：2012-10-15T07:47:57.800
> 
> 标签：php

```
<?php
require_once ('../index.php'); 
if ($_FILES["file"]["error"] > 0)
{
    echo "Error: " . $_FILES["file"]["error"] . "<br/>";
}
else
{   
}
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif") || ($_FILES["file"]["type"] == "image/jpeg") || ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg")) && ($_FILES["file"]["size"] < 200000) && in_array($extension, $allowedExts))
{
    if ($_FILES["file"]["error"] > 0)
    {
        echo "Return Code: " . $_FILES["file"]["error"] . "<br/>";
    }
    else
    {
        if (file_exists("../uploadedImages/" . $_FILES["file"]["name"]))
        {
            echo $_FILES["file"]["name"] . " already exists. ";
        }
        else
        {
            move_uploaded_file($_FILES["file"]["tmp_name"],
            "../uploadedImages/" . $_FILES["file"]["name"]);
            echo "Du har laddat upp en bild.";
        }
    }
}
else
{
    echo "Invalid file";
} 
```

* * *

当我上传图片时，我希望能够调整图片大小。我现在拥有的代码将图像上传到我的uploadImages 文件夹，并且我想将图像调整为小拇指。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:51:03.207

谷歌“上传时php调整图片大小”

[http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

看起来像我几年前实现的东西，因此我可以推荐这篇文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:52:33.620

此脚本将图像大小调整为两个 60 像素和 25 像素。看看 $newwidth 你必须修改大小值。

```
<?php 

 define ("MAX_SIZE","400");

 $errors=0;

 if($_SERVER["REQUEST_METHOD"] == "POST")
 {
        $image =$_FILES["file"]["name"];
 $uploadedfile = $_FILES['file']['tmp_name'];

  if ($image) 
  {
  $filename = stripslashes($_FILES['file']['name']);
        $extension = getExtension($filename);
  $extension = strtolower($extension);
 if (($extension != "jpg") && ($extension != "jpeg") 
&& ($extension != "png") && ($extension != "gif")) 
  {
echo ' Unknown Image extension ';
$errors=1;
  }
 else
{
   $size=filesize($_FILES['file']['tmp_name']);

if ($size > MAX_SIZE*1024)
{
 echo "You have exceeded the size limit";
 $errors=1;
}

if($extension=="jpg" || $extension=="jpeg" )
{
$uploadedfile = $_FILES['file']['tmp_name'];
$src = imagecreatefromjpeg($uploadedfile);
}
else if($extension=="png")
{
$uploadedfile = $_FILES['file']['tmp_name'];
$src = imagecreatefrompng($uploadedfile);
}
else 
{
$src = imagecreatefromgif($uploadedfile);
}

list($width,$height)=getimagesize($uploadedfile);

$newwidth=60;
$newheight=($height/$width)*$newwidth;
$tmp=imagecreatetruecolor($newwidth,$newheight);

$newwidth1=25;
$newheight1=($height/$width)*$newwidth1;
$tmp1=imagecreatetruecolor($newwidth1,$newheight1);

imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,
 $width,$height);

imagecopyresampled($tmp1,$src,0,0,0,0,$newwidth1,$newheight1, 
$width,$height);

$filename = "images/". $_FILES['file']['name'];
$filename1 = "images/small". $_FILES['file']['name'];

imagejpeg($tmp,$filename,100);
imagejpeg($tmp1,$filename1,100);

imagedestroy($src);
imagedestroy($tmp);
imagedestroy($tmp1);
}
}
}
//If no errors registred, print the success message

 if(isset($_POST['Submit']) && !$errors) 
 {
   // mysql_query("update SQL statement ");
  echo "Image Uploaded Successfully!";

 }
 ?> 
```

查找文件扩展名。

```
function getExtension($str) {

         $i = strrpos($str,".");
         if (!$i) { return ""; } 
         $l = strlen($str) - $i;
         $ext = substr($str,$i+1,$l);
         return $ext;
 } 
```

# java - 如何更改 Struts 操作类中的语言环境？

> ID：12891293
> 
> 赞同：6
> 
> 时间：2012-10-15T07:47:58.400
> 
> 标签：java, struts2, internationalization, locale

我有一个 Action 类，我想获取我的应用程序的语言环境并在此处进行更改，但我不知道如何也找不到答案。

我可以使用获取当前语言环境`super.getLocale().toString();`

但是如何**设置语言环境**我不知道。

```
public class LoginAction extends ActionSupport {

    private String login;
    private String password;
    private String language;

    @Override
    public String execute() throws Exception {
        String result = Factory.INSTANCE.getUserDao().checkUser(login, password);
        if(result == null){
            return ERROR;
        }
        return SUCCESS;
    }

    public String getLogin() {
        return login;
    }

    public void setLogin(String login) {
        this.login = login;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getLanguage() {
        return language;
    }

    public void setLanguage(String language) {
        this.language = language;
    }

    @Override
    public void validate() {
        super.validate();
        if(login.isEmpty() | password.isEmpty()){
            addActionError(getText("login.error"));
        }else {
            addActionMessage(getText("login.correct"));
        }
    }
} 
```

我想在上面的 Action 类中更改我的应用程序的语言环境。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T08:36:08.990

使用`ActionContext.getContext().setLocale(locale)`and 把它放在 HTTP session 中 `session.put(I18nInterceptor.DEFAULT_SESSION_ATTRIBUTE, locale)`。

# exec - google golang exec 退出状态 2 和 1

> ID：12891294
> 
> 赞同：5
> 
> 时间：2012-10-15T07:48:03.293
> 
> 标签：exec, go

我想在 Go 语言的 Android SDK 平台工具中执行 dexdump。

我已经设置了 PATH 变量。（我使用的是 Ubuntu 12.04）

这是我的代码：

```
package main

import (
    "bytes"
    "fmt"
    "log"
    "os/exec"
)

func main() {
    path, err := exec.LookPath("dexdump")
    if err != nil {
        log.Fatal(err)
    }
    fmt.Println(path)

    cmd := exec.Command(path)
    var out bytes.Buffer
    cmd.Stdout = &out
    err2 := cmd.Run()
    if err2 != nil {
        log.Fatal(err2)
    }
    fmt.Printf("%q\n", out.String())
} 
```

结果：/home/gunwoo/android-sdk-linux/platform-tools/dexdump

2012/10/15 16:44:39 退出状态2

退出状态 1

为什么 go 找不到路径？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T08:37:14.550

您没有为`exec.Run` `dexdump`命令提供任何参数，这可能会产生如下错误：

```
dexdump: no file specified
dexdump: [-f] [-h] dexfile...

-d : disassemble code sections
-f : display summary information from file header
-h : display file header details
-C : decode (demangle) low-level symbol names
-S : compute sizes only 
```

当您运行以下版本的程序时，您会得到什么输出？

```
package main

import (
    "bytes"
    "fmt"
    "log"
    "os/exec"
)

func main() {
    path, err := exec.LookPath("dexdump")
    if err != nil {
        log.Fatal("LookPath: ", err)
    }
    fmt.Println(path)
    cmd := exec.Command(path)
    var out bytes.Buffer
    cmd.Stdout = &out
    err = cmd.Run()
    fmt.Printf("%s\n", out.String())
    if err != nil {
        log.Fatal("Run: ", err)
    }
} 
```

# windows - 存储过滤器驱动程序中的 MDL 数据已损坏

> ID：12891298
> 
> 赞同：0
> 
> 时间：2012-10-15T07:48:15.610
> 
> 标签：windows, memory-management, driver

我正在开发低级 (SCSI) 存储过滤器驱动程序。驱动程序拦截读取 IO 并将数据以较小的块写入其他位置。在极少数情况下，驱动程序读取的数据已损坏。驱动程序的流程是这样的：

1.  接收 IRP 和 MDL
2.  使用 IoBuildPartialMdl() 函数构建驱动程序 IRP 和 MDL。
3.  发送原始 IRP 并等待响应。
4.  使用“自定义”构建 MDL 发送驱动程序 IRP
5.  等待响应并回复上层。

在第 4 步中，数据有时会损坏。需要说明的是，并非所有数据都已损坏，并且通常在不久之前对该数据有单独的 IO 请求。这里发生了什么？我使用的 MDL 不正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:11:20.677

显然，MDL 可能包含数据将被损坏的间隙。正确的解决方法是复制数据。 [http://msdn.microsoft.com/en-us/library/windows/hardware/gg463193.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463193.aspx)

# jquery - jQuery 相当于给出的 CoffeeScript 示例

> ID：12891300
> 
> 赞同：0
> 
> 时间：2012-10-15T07:48:20.943
> 
> 标签：jquery, coffeescript

如何在 jQuery 中编写这个 CoffeeScript？我究竟做错了什么？

```
$ ->
    $('.shop .item > img').click ->
        $(this).parent().find(':submit').click() 
```

这是我尝试将 CoffeeScript 转换为 jQuery

```
$(document).ready(function () {
    $(".shop .item > img").click(function(){
        $(this).parent().find(":submit").click()
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:51:57.520

看起来你在最后一行有错字..

牙套错位了。。

```
 });
)}; 
```

应该是

```
 });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T08:01:48.977

你意识到coffeescript 可以编译成javascript 对吗？您可以在[coffeescript.org](http://coffeescript.org/#try%3a%24%20-%3E%0A%20%20%20%20%24%28%27.shop%20.item%20%3E%20img%27%29.click%20-%3E%0A%20%20%20%20%20%20%20%20%24%28this%29.parent%28%29.find%28%27%3asubmit%27%29.click%28%29)上自己尝试，但输出如下：

```
$(function() {
  return $('.shop .item > img').click(function() {
    return $(this).parent().find(':submit').click();
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T07:51:27.507

发现错别字。`)}`最后用更改`})`。

# django - 在Django中按关系字段过滤多对多关系

> ID：12891302
> 
> 赞同：27
> 
> 时间：2012-10-15T07:48:41.460
> 
> 标签：django, filtering, django-orm

**我试图通过类**字段过滤一些多对多关系。

引用 Django 文档，我将解释我的目标

```
class Person(models.Model):
      name = models.CharField(max_length=128)

      def __unicode__(self):
          return self.name

class Group(models.Model):
      name = models.CharField(max_length=128)
      members = models.ManyToManyField(Person, through='Membership')

      def __unicode__(self):
          return self.name

class Membership(models.Model):
      person = models.ForeignKey(Person)
      group = models.ForeignKey(Group)
      date_joined = models.DateField()
      invite_reason = models.CharField(max_length=64) 
```

在此示例中，我的目标是过滤多对多关系并仅获取从某个日期（**date_joined 字段**）开始加入某个**组的****人员**。

 ****可能吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-15T08:36:30.617

您可以使用 django ORM[查询跨关系](https://docs.djangoproject.com/en/dev/topics/db/queries/#spanning-multi-valued-relationships)（或在本例中为反向关系）：

```
person = Person.objects.filter(
    membership__group=example_group,
    membership__date_joined__gte=example_date
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-28T15:18:25.090

你也可以这样做：

```
person = example_group.members.filter(
    membership__date_joined__gte=example_date
) 
```****

# c++ - 使用 OpenCV 2.4 在 MFC SDI 视图或控制中加载图像

> ID：12891307
> 
> 赞同：0
> 
> 时间：2012-10-15T07:48:53.667
> 
> 标签：c++, opencv, mfc, controls

在旧版本的 opencv 中，我们有像 CvvImage 这样的类，它很容易用于 MFC 控件以显示来自 OpenCV 的相机图像或简单图像。但是在 2.4 或 2.3 中，这种支持是由 OpenCV 完成的，我想知道我们在新版本中是否还有其他类。

我的应用程序是 MFC SDI，在内部视图中，我正在使用 OnPaint 功能。在以前的opencv中，我使用的是Paint函数，比如

```
void CRightCameraView::OnPaint()
{
    CPaintDC dc(this); // device context for painting
    m_CVvimageObj.CopyOf(m_iplImageFrame); //copy IplImage frame

    if(m_bImageDisplay)
    {
    m_CVvimageObj.Show(dc.GetSafeHdc(),10,0,m_CVvimageObj.Width(),m_CVvimageObj.Height());
    }

} 
```

请指导我哪个是最新版本的类来做同样的事情并支持 MFC 的这种 DC 控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:38:08.043

由于我找不到答案，我想帮助别人我所做的。

我已经手动提取了 cvvimage 类并添加到我的项目中，然后我做了以下..

在我的视图头文件中我声明

```
CvvImage m_CVvImageObj;
cv::Mat m_matImage; 
```

在我的 CPP 文件视图中，我在初始化函数中调用了以下内容

```
m_matImage = cv::imread(strA.GetBuffer(),CV_LOAD_IMAGE_COLOR);   // Read the file

if(! m_matImage.data )                              // Check for invalid input
{
    AfxMessageBox(L"Could not open or find the image");
}

 IplImage iplimg = m_matImage;
 m_CVvImageObj.CopyOf(&iplimg);
 UpdateData();
 Invalidate(); 
```

在我添加的 OnPaint 内部视图的覆盖函数中

```
if(m_CVvImageObj.GetImage())
{       
    //m_CurrentFrame.Show
        m_CVvImageObj.Show(dc.GetSafeHdc(),10,0,m_CVvImageObj.Width(),m_CVvImageObj.Height());
} 
```

cvvimage h文件如下

```
#pragma once

//#pragma once  
#ifndef CVVIMAGE_CLASS_DEF  
#define CVVIMAGE_CLASS_DEF  

#include <opencv2\highgui\highgui.hpp>    
class CvvImage  
{  
public:  
    CvvImage();  
    virtual ~CvvImage();  

    virtual bool Create( int width, int height, int bits_per_pixel, int image_origin = 0 );  
    virtual bool Load( const char* filename, int desired_color = 1 );  
    virtual bool LoadRect( const char* filename,  

    int desired_color, CvRect r );  

#if defined WIN32 || defined _WIN32  
    virtual bool LoadRect( const char* filename,int desired_color, RECT r )  
    {  
        return LoadRect( filename, desired_color,  
            cvRect( r.left, r.top, r.right - r.left, r.bottom - r.top ));  
    }  
#endif  

    virtual bool Save( const char* filename );  
    virtual void CopyOf( CvvImage& image, int desired_color = -1 );  
    virtual void CopyOf( IplImage* img, int desired_color = -1 );  
    IplImage* GetImage() { return m_img; };  
    virtual void Destroy(void);  
    int Width() { return !m_img ? 0 : !m_img->roi ? m_img->width : m_img->roi->width; };  
    int Height() { return !m_img ? 0 : !m_img->roi ? m_img->height : m_img->roi->height;};  
    int Bpp() { return m_img ? (m_img->depth & 255)*m_img->nChannels : 0; };  
    virtual void Fill( int color );  
    virtual void Show( const char* window );  

#if defined WIN32 || defined _WIN32  
    virtual void Show( HDC dc, int x, int y, int width, int height,  
        int from_x = 0, int from_y = 0 );  
    virtual void DrawToHDC( HDC hDCDst, RECT* pDstRect );  
    virtual void DrawToHDC( HDC hDCDst, CvRect pDstRect ); 
#endif  

protected:

    IplImage* m_img;

};

typedef CvvImage CImage;

#endif 
```

cvvimage 类的 CPP 文件如下

```
///////////////////////////////////////////////////////////////////////////////////////////////////
//CvvImage.cpp

#include "StdAfx.h"  
#include "CvvImage.h"
///////////////////////////////////////////////////////////////////////////////////////////////////

CV_INLINE RECT NormalizeRect( RECT r );
CV_INLINE RECT NormalizeRect( RECT r )
{
    int t;
    if( r.left > r.right )
    {
        t = r.left;
        r.left = r.right;
        r.right = t;
    }
    if( r.top > r.bottom )
    {
        t = r.top;
        r.top = r.bottom;
        r.bottom = t;
    }

    return r;
}
CV_INLINE CvRect RectToCvRect( RECT sr );
CV_INLINE CvRect RectToCvRect( RECT sr )
{
    sr = NormalizeRect( sr );
    return cvRect( sr.left, sr.top, sr.right - sr.left, sr.bottom - sr.top );
}
CV_INLINE RECT CvRectToRect( CvRect sr );
CV_INLINE RECT CvRectToRect( CvRect sr )
{
    RECT dr;
    dr.left = sr.x;
    dr.top = sr.y;
    dr.right = sr.x + sr.width;
    dr.bottom = sr.y + sr.height;

    return dr;
}
CV_INLINE IplROI RectToROI( RECT r );
CV_INLINE IplROI RectToROI( RECT r )
{
    IplROI roi;
    r = NormalizeRect( r );
    roi.xOffset = r.left;
    roi.yOffset = r.top;
    roi.width = r.right - r.left;
    roi.height = r.bottom - r.top;
    roi.coi = 0;

    return roi;
}
void FillBitmapInfo( BITMAPINFO* bmi, int width, int height, int bpp, int origin )
{
    assert( bmi && width >= 0 && height >= 0 && (bpp == 8 || bpp == 24 || bpp == 32));

    BITMAPINFOHEADER* bmih = &(bmi->bmiHeader);

    memset( bmih, 0, sizeof(*bmih));
    bmih->biSize = sizeof(BITMAPINFOHEADER);
    bmih->biWidth = width;
    bmih->biHeight = origin ? abs(height) : -abs(height);
    bmih->biPlanes = 1;
    bmih->biBitCount = (unsigned short)bpp;
    bmih->biCompression = BI_RGB;
    if( bpp == 8 )
    {
        RGBQUAD* palette = bmi->bmiColors;
        int i;
        for( i = 0; i < 256; i++ )
        {
            palette[i].rgbBlue = palette[i].rgbGreen = palette[i].rgbRed = (BYTE)i;
            palette[i].rgbReserved = 0;
        }
    }
}
CvvImage::CvvImage()
{
    m_img = 0;
}
void CvvImage::Destroy()
{
    cvReleaseImage( &m_img );
}
CvvImage::~CvvImage()
{
    Destroy();
}
bool CvvImage::Create( int w, int h, int bpp, int origin )
{
    const unsigned max_img_size = 10000;

    if( (bpp != 8 && bpp != 24 && bpp != 32) ||
        (unsigned)w >= max_img_size || (unsigned)h >= max_img_size ||
        (origin != IPL_ORIGIN_TL && origin != IPL_ORIGIN_BL))
    {
        assert(0); // most probably, it is a programming error
        return false;
    }
    if( !m_img || Bpp() != bpp || m_img->width != w || m_img->height != h )
    {
        if( m_img && m_img->nSize == sizeof(IplImage))
            Destroy();

        m_img = cvCreateImage( cvSize( w, h ), IPL_DEPTH_8U, bpp/8 );
    }
    if( m_img )
        m_img->origin = origin == 0 ? IPL_ORIGIN_TL : IPL_ORIGIN_BL;
    return m_img != 0;
}
void CvvImage::CopyOf( CvvImage& image, int desired_color )
{
    IplImage* img = image.GetImage();
    if( img )
    {
        CopyOf( img, desired_color );
    }
}
#define HG_IS_IMAGE(img) \
    ((img) != 0 && ((const IplImage*)(img))->nSize == sizeof(IplImage) && \
    ((IplImage*)img)->imageData != 0)
void CvvImage::CopyOf( IplImage* img, int desired_color )
{
    if( HG_IS_IMAGE(img) )
    {
        int color = desired_color;
        CvSize size = cvGetSize( img ); 
        if( color < 0 )
            color = img->nChannels > 1;
        if( Create( size.width, size.height,
            (!color ? 1 : img->nChannels > 1 ? img->nChannels : 3)*8,
            img->origin ))
        {
            cvConvertImage( img, m_img, 0 );
        }
    }
}
bool CvvImage::Load( const char* filename, int desired_color )
{
    IplImage* img = cvLoadImage( filename, desired_color );
    if( !img )
        return false;

    CopyOf( img, desired_color );
    cvReleaseImage( &img );

    return true;
}
bool CvvImage::LoadRect( const char* filename,
                        int desired_color, CvRect r )
{
    if( r.width < 0 || r.height < 0 ) return false;

    IplImage* img = cvLoadImage( filename, desired_color );
    if( !img )
        return false;
    if( r.width == 0 || r.height == 0 )
    {
        r.width = img->width;
        r.height = img->height;
        r.x = r.y = 0;
    }
    if( r.x > img->width || r.y > img->height ||
        r.x + r.width < 0 || r.y + r.height < 0 )
    {
        cvReleaseImage( &img );
        return false;
    }

    if( r.x < 0 )
    {
        r.width += r.x;
        r.x = 0;
    }
    if( r.y < 0 )
    {
        r.height += r.y;
        r.y = 0;
    }
    if( r.x + r.width > img->width )
        r.width = img->width - r.x;

    if( r.y + r.height > img->height )
        r.height = img->height - r.y;
    cvSetImageROI( img, r );
    CopyOf( img, desired_color );
    cvReleaseImage( &img );
    return true;
}
bool CvvImage::Save( const char* filename )
{
    if( !m_img )
        return false;
    cvSaveImage( filename, m_img );
    return true;
}
void CvvImage::Show( const char* window )
{
    if( m_img )
        cvShowImage( window, m_img );
}
void CvvImage::Show( HDC dc, int x, int y, int w, int h, int from_x, int from_y )
{
    if( m_img && m_img->depth == IPL_DEPTH_8U )
    {
        uchar buffer[sizeof(BITMAPINFOHEADER) + 1024];
        BITMAPINFO* bmi = (BITMAPINFO*)buffer;
        int bmp_w = m_img->width, bmp_h = m_img->height;
        FillBitmapInfo( bmi, bmp_w, bmp_h, Bpp(), m_img->origin );
        from_x = MIN( MAX( from_x, 0 ), bmp_w - 1 );
        from_y = MIN( MAX( from_y, 0 ), bmp_h - 1 );
        int sw = MAX( MIN( bmp_w - from_x, w ), 0 );
        int sh = MAX( MIN( bmp_h - from_y, h ), 0 );
        SetDIBitsToDevice(
            dc, x, y, sw, sh, from_x, from_y, from_y, sh,
            m_img->imageData + from_y*m_img->widthStep,
            bmi, DIB_RGB_COLORS );
    }
}
void CvvImage::DrawToHDC( HDC hDCDst, RECT* pDstRect ) 
{
    if( pDstRect && m_img && m_img->depth == IPL_DEPTH_8U && m_img->imageData )
    {
        uchar buffer[sizeof(BITMAPINFOHEADER) + 1024];
        BITMAPINFO* bmi = (BITMAPINFO*)buffer;
        int bmp_w = m_img->width, bmp_h = m_img->height;
        CvRect roi = cvGetImageROI( m_img );
        CvRect dst = RectToCvRect( *pDstRect );
        if( roi.width == dst.width && roi.height == dst.height )
        {
            Show( hDCDst, dst.x, dst.y, dst.width, dst.height, roi.x, roi.y );
            return;
        }
        if( roi.width > dst.width )
        {
            SetStretchBltMode(
                hDCDst, // handle to device context
                HALFTONE );
        }
        else
        {
            SetStretchBltMode(
                hDCDst, // handle to device context
                COLORONCOLOR );
        }
        FillBitmapInfo( bmi, bmp_w, bmp_h, Bpp(), m_img->origin );
        ::StretchDIBits(hDCDst,dst.x, dst.y, dst.width, dst.height,roi.x, roi.y, roi.width, roi.height,\
            m_img->imageData, bmi, DIB_RGB_COLORS, SRCCOPY );
    }
}
void CvvImage::DrawToHDC( HDC hDCDst, CvRect pDstRect )
{
    RECT rDest=CvRectToRect(pDstRect);
    DrawToHDC(hDCDst,&rDest);
}
void CvvImage::Fill( int color )
{
    cvSet( m_img, cvScalar(color&255,(color>>8)&255,(color>>16)&255,(color>>24)&255) );
} 
```

请享用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-14T10:05:26.040

1.首先加载图片获取图片名称和路径。

```
void CvlistDlg::OnBnClickedRead()
{
    CString     FilePathName;
    CString     FileName;
    CFileDialog openVideo(true);
    openVideo.m_ofn.lpstrTitle = _T("Open");
    if (IDOK == openVideo.DoModal()){
        FileName = openVideo.GetFileName();
        FilePathName = openVideo.GetPathName();
        _currentFile._fileName = FileName;
        _currentFile._filePath = FilePathName;
    }
 } 
```

2.在您的按钮回调函数中添加跟随代码。

```
void CvlistDlg::OnBnClickedOk(){
    cv::Mat img = cv::imread(str);
    CDC *pDC = GetDlgItem(IDC_Pic)->GetDC();
    HDC hDC = pDC->GetSafeHdc();
    CRect rect;
    GetDlgItem(IDC_Pic)->GetClientRect(&rect);
    int rw = rect.right - rect.left;     //the width of your picture control
    int rh = rect.bottom - rect.top;
    if (!img.data){
        MessageBox(_T("read picture fail！"));
        return;
    }
    cv::resize(img, img, cv::Size(rw, rh));     
    IplImage iplimg = img;
    m_CVvImageObj.CopyOf(&iplimg);
    UpdateData();
    if (m_CVvImageObj.GetImage()){
        m_CVvImageObj.Show(pDC->GetSafeHdc(), 0, 0, rw, rh);
    }
} 
```

我希望这些能给你一些帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-24T14:06:19.847

你不需要 IplImage。基本上，您可以使用 StretchDIBits 将 cv::Mat 绘制到 MFC 控件的 DC。它接受指向存储位图的内存块的指针......在这种情况下为 cv::Mat.data

但请记住（这让我之前发疯）

*   GDI 需要 DWORD 对齐，而 cv::Mat 不使用任何行填充
*   此外，您的 Mat 可能是 ROI，这意味着在每一行的末尾没有下一行，而是继续的图像

您可以在 OpenCV 中使用 cols % 4 == 0 的图像进行 DWORD 对齐，这样您就可以为图像添加边框

```
 border = 4 - (img.cols % 4);
  if ( (border<4 && border > 0) || img.isContinuous() == false)
  {
    cv::copyMakeBorder(img, tmpImg, 0, 0, 0, border, cv::BORDER_CONSTANT, 0);
  }
  else
    tmpImg = img 
```

使用 copyMakeBorder 您将解决这两个要求

另一个问题是灰色图像，因为 MFC 需要一个平面调色板来显示它。您可以使用 cvtColor 转换您的 Mat 或创建调色板：

```
 uchar buffer[sizeof(BITMAPINFO) + 1024];
   BITMAPINFO* bmi = (BITMAPINFO*)buffer;
   BITMAPINFOHEADER* bmih = &(bmi->bmiHeader);
   bmih->biBitCount = 8*img.elemenSize()
   bmih->biWidth = tmpImg.cols;
   bmih->biHeight = -tmpImg.rows;// DIB are bottom ->top
   bmih->...

  //The palette is required for grey image
  if (bmih->biBitCount == 8)
  {
    RGBQUAD* palette = bmi->bmiColors;
    for (int i = 0; i < 256; i++)
    {
      palette[i].rgbBlue = palette[i].rgbGreen = palette[i].rgbRed = (BYTE)i;
      palette[i].rgbReserved = 0;
    }
  } 
```

终于画到HDC

```
imgH = img.rows;
imgW = img.cols; //use original cols  to avoid border

ClientDC hDC(WinCtrl);

//rr is relative to control
RECT rr; WinCtrl->GetClientRect(&rr);  

StretchDIBits(hDC,
  0, 0, rr.right, rr.bottom,
  0, 0, imgW, imgH,
  tmpImg.data, bmi, DIB_RGB_COLORS, SRCCOPY); 
```

您可以在此处找到详细信息和管理图像拟合的课程： [http ://www.pklab.net/?&id=390&lang=EN&t=How-to-display-an-OpenCV-image-or-video-in-your -自己的 MFC 接口](http://www.pklab.net/?&id=390&lang=EN&t=How-to-display-an-OpenCV-image-or-video-in-your-own-MFC-interface)

# android - UI和后台线程之间的通信

> ID：12891310
> 
> 赞同：0
> 
> 时间：2012-10-15T07:49:03.720
> 
> 标签：android, multithreading

这是我第一次制作一个相当大的应用程序，其中有很多部分。

我想将 UI 和后台进程保留在不同的类中以避免混淆。但是，我如何以最好的方式在他们之间进行交流。到目前为止，我遇到了几种方法：

1.  在不同的类中声明后台线程并在 UI 线程中定义其 onPostExecute() 方法。

    ```
     new SetupDefaultFeeds(context) {
        @Override
        protected void onPostExecute(List<Feed> result) {
            default_feeds = result;

            for (Feed t : result) {
                String log = t.toString();
                Log.d("DEFAULT feed", log);
            }
            menu_btn[0].performClick();
        }
    }.execute(); 
    ```

2.  在后台和 UI 线程之间使用标志变量发出信号。

3.  线程和处理程序。

还有其他方法吗？最好的方法是什么。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:29:12.143

Passing messages through a [Handler](http://developer.android.com/reference/android/os/Handler.html) is usually the most "Android-ish" way to do this. Trying to do all communication through flag variables is most likely going to be quite a headache.

*Edit*: Android itself doesn't provide a way for you to link the two classes together, you need to do that by hand. One way which works quite well is to create an interface for your communication and have either the UI class or background thread implement it. Then, when creating the class, you can pass a reference to the other object and communicate through the interface.

However, if you want to completely decouple the two classes, you might want to use a BroadcastReceiver instead and use it to send messages between the UI and background thread.

# matlab - 3 CUDA 中的整数键查找

> ID：12891312
> 
> 赞同：6
> 
> 时间：2012-10-15T07:49:15.730
> 
> 标签：matlab, data-structures, cuda, hashmap, lookup-tables

我想在大约一百万点的大型数据集中查找 3 个整数（即 [1 2 3]）。

我目前正在使用 MATLAB 的 Map (hashmap)，并且对于每一点我都在执行以下操作：

```
key = sprintf('%d ', [1 2 3]);       % 23 us
% key = '1 2 3 '
result = lookup_map( key );          % 32 us 
```

不过，这非常耗时 - 100 万点 * 55 我们 = 55 秒。

我想使用 CUDA 将其移至 GPU，但我不确定解决此问题的最佳方法。

我可以传输四个数组 - `key1, key2, key3, result`，然后对键执行二进制搜索，但这需要每个键进行 20 次迭代 (2^20 = 1048576)。然后，由于每个线程的并发内存访问，我也会有延迟。

是否有针对 CUDA 中的并行（理想情况下为 O(1)）多个键查找优化的数据结构？

* * *

**问：三个整数的界限是多少？以及查找哪些数据？**

整数键目前可以在 0 到 ~75,000 之间，但将来可能会更大（200,000+）。

出于这个问题的目的，我们可以假设`result`是介于 0 和数据集大小之间的整数。

* * *

**问：为什么不将所有三个数字打包成一个 64 位数字（每个数字 21 位给您 0-2,097,152 的范围）。并使用它来索引稀疏数组？**

```
>> A = uint64(ones(10));
>> sparse_A = sparse(A)
??? Undefined function or method 'sparse' for input arguments of type 'uint64'.

>> A = int64(ones(10));
>> sparse_A = sparse(A)
??? Undefined function or method 'sparse' for input arguments of type 'int64'. 
```

看来我的 matlab 不支持 64 位数字的稀疏数组。

如果这对其他人有帮助，我编写了一个快速函数来从三个 <2^21 无符号整数创建一个 64 位密钥：

```
function [key] = to_key(face)
    key = uint64(bitsll(face(1), 42) + bitsll(face(2), 21) + rand(face(3),1));
end 
```

* * *

**问：来自@Dennis - 为什么不使用逻辑索引？**

让我们测试一下！

```
% Generate a million random integers between 0 and 1000
>> M = int32(floor(rand(10000000,4)*1000));
% Find a point to look for
>> search =  M(500000,1:3)             
search =
         850         910         581  
>> tic; idx = M(:,1)==search(1) & M(:,2)==search(2)&M(:,3)==search(3); toc;
Elapsed time is 0.089801 seconds.
>> M(idx,:)
ans =
         850         910         581         726 
```

不幸的是，这需要 89801us，比我现有的解决方案（55us）慢 1632 倍！运行一百万次需要 2.5 小时！

`M`我们可以在每次搜索后尝试过滤：

```
>> tic; idx1=M(:,1)==search(1); N=M(idx1,:); idx2=N(:,2)==search(2); N2=N(idx2,:); idx3 = N2(:,3)==search(3); toc;
Elapsed time is 0.038272 seconds. 
```

这比使用 Map 快一点，但仍然慢 696 倍。

* * *

我一直在考虑这个问题，我决定分析从单个键查找动态重新生成一些数据的速度——考虑到潜在的问题，它可能比 3 键查找更快用这种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:28:40.467

I'm guessing this question is related to your [previous question](https://stackoverflow.com/questions/12724751/large-mostly-empty-data-structure-for-tetrahedron-faces/12728294#12728294) about tetrahedron faces. I still suggest you should try the `sparse` storage and sparse matrix-vector multiplication for that purpose:

```
size(spA)
ans =

 1244810     1244810

tic;
vv = spA*v;
idx = find(vv);
toc;

Elapsed time is 0.106581 seconds. 
```

This is just timing analysis, see my previous answer about how to implement it in your case. Before you move to CUDA and do complicated stuff, check out simpler options.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:47:49.797

鉴于这个问题已经受到关注，感觉这个答案太简单了，但你为什么不这样做：

```
M=[1:6; 2:7; 3:8; 4:9]'; %Some matrix that contains key 1 2 3, corresponding value is 4
idx=M(:,1)==1&M(:,2)==2&M(:,3)==3;
M(idx,4) 
```

这应该很快评估，即使`M`是 100 万 x 4。

# postgresql - How to tell PostgreSQL not to verify datatype

> ID：12891318
> 
> 赞同：0
> 
> 时间：2012-10-15T07:49:47.450
> 
> 标签：postgresql, triggers, insert, foreign-keys, postgresql-9.0

I have a table like:

```
CREATE TABLE test(
id integer not null default nextval('test_id_seq'::regclass),
client_name_id integer not null
); 
```

Foreign-key constraints:

```
"test_client_name_id_fkey" FOREIGN KEY (client_name_id) REFERENCES company(id) DEFERRABLE INITIALLY DEFERRED 
```

and company table:

```
CREATE TABLE company(
id integer not null default nextval('company_id_seq'::regclass),
company_name character varying(64) not null
) 
```

Now I have trigger on test table which fetch id from company table using provided value client_name_id which is string by matching it with company_name. but when I insert record PostgreSQL return error that client_name_id is string and int required which is true.

How can I tell PostgreSQL not to verify inserted row as I have taken care of it in my triggers.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:40:02.317

What you are trying to do is very unorthodox. Are you sure, this is what you want? Of course, you cant enter a string (with non-digits) into an integer column. No surprise there, right? If you want to enter the text instead, you'd have to add a text column instead - with a fk-constraint to `company(company_name)` if you want to match your current layout.

```
ALTER TABLE test ALTER DROP COLUMN client_name_id; -- drops fk constraint, too
ALTER TABLE test ADD COLUMN client_name REFERENCES company(company_name); 
```

You would need a `UNIQUE` constraint on `company.company_name` to allow this.

However, I would advise to rethink your approach. Your table layout seems proper as it is. The trigger is the unconventional element. Normally, you would reference the primary key, just like you have it now. No trigger needed. To get the company name, you would join the table in a `SELECT`:

```
SELECT *
FROM   test t
JOIN   company c ON t.client_name_id = c.id; 
```

Also, these non-standard modifiers should only be there if you need them: `DEFERRABLE INITIALLY DEFERRED`. Like, when you have to enter values in table `test` before you enter the referenced values in table `company` (in the same transaction).

# c - 如何在 C 源代码中存储一个段落？

> ID：12891319
> 
> 赞同：2
> 
> 时间：2012-10-15T07:49:48.290
> 
> 标签：c, perl

我是一名 perl 程序员，惊讶地发现 c 语言没有方便的方法来存储段落，例如：

```
 my $a = <<'dd';
          hello wolrd..
           1
            2
             3
       dd 
```

那么我如何在 C 中进行 smilary 操作呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T07:59:58.650

您的问题有两个不同的答案，它们提供了许多相同的功能。

两个都

```
char *str="Line 1\nLine 2\nLine 3"; 
```

和

```
char str[]="Line 1\nLine 2\nLine 3"; 
```

允许您这样打印段落：

```
printf("%s",str); 
```

但是，第一个声明 ( `char *str`) 在通常为只读的内存中创建了一个字符串，而第二个声明允许在运行时编辑该字符串。这种划分很重要，但并不总是很清楚。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/1704893/how-is-read-only-memory-implemented-in-c)。

该字符`\n`是换行符，您应该检查以确保它的行为方式符合您在目标平台上的预期方式。例如，在 DOS 上，您可能需要使用 `"\r\n"，即回车 + 换行。Wiki 上有[一篇](https://en.wikipedia.org/wiki/Newline)关于此的文章。

正如一位评论者指出的那样，这些形式的另一个区别是，它`*str`可以用作指针，而`str[]`不能。他们经常（但并非总是）具有相同的行为；[这个问题](https://stackoverflow.com/questions/1461432/what-is-array-decaying)有更多关于这个的信息。

正如一些评论者所指出的，在一些编译器中，字符串文字的长度是有限制的。MSVC 有 2048 个字符的限制（请参阅[此处](http://msdn.microsoft.com/en-us/library/69ze775t%28v=vs.80%29.aspx)），而 GCC 则没有限制，根据某些帐户。C90 保证至少 509 个单字节字符的长度；在 C99 中增加到 4095。

无论如何，如果你想避免这个长度限制或者你想以更漂亮的方式组织文本，你可以使用这种格式（注意必须明确使用换行符和引号，编译器将相邻的字符串视为连接）：

```
char *str =
  "Line 1\n"
  "Line 2\n"
  "Line 3\n"; 
```

或者这个（行尾的反斜杠转义您为格式化插入的换行符，如果您在此处缩进代码，它将成为字符串的一部分）：

```
char *str =
"Line 1 \
Line 2 \
Line 3"; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T07:52:48.883

它是这样完成的：

```
char a[] = 
    "hello world\n"
    " 1\n"
    "  2\n"
    "   3\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T07:56:06.403

你可以试试

```
char *str = "hello world\n 1\n  2\n   3\n"; 
```

# scala - 为什么特征是可实例化的？

> ID：12891321
> 
> 赞同：6
> 
> 时间：2012-10-15T07:49:51.897
> 
> 标签：scala

据我所知，Scala 中的特征类似于 Java 中的接口，只是方法允许有实现。此外，与 Scala 类相比，您不能将参数传递给它们以进行构造。

到目前为止，一切都很好。但是为什么我可以实例化它们呢？真的，我认为没有充分的理由允许这样做。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-15T07:55:38.777

你并没有真正实例化它们。当您与 Java 进行类比时，让我们更深入地研究它。您可以在 Java 中从抽象类或接口构建匿名类。在 Scala 中几乎是一样的：

```
scala> trait A
defined trait A

scala> new A {}
res0: A = $anon$1@5736ab79 
```

请注意，当您从特征创建对象时，大括号是**必需的。**例如，你不能这样做：

```
scala> new A
<console>:9: error: trait A is abstract; cannot be instantiated
              new A
              ^ 
```

虽然它适用于一个类：

```
scala> class B
defined class B

scala> new B
res2: B = B@213526b0 
```

当然，如果你的 trait 中的某些元素没有实现，你需要在创建对象时实现它们：

```
scala> trait C {def foo: Int}
defined trait C

scala> new C {}
<console>:9: error: object creation impossible, since method foo in trait C of type => Int is not defined
              new C {}
                  ^

scala> new C {def foo = 42}
res4: C = $anon$1@744957c7 
```

# python - 视图没有返回 HttpResponse 对象

> ID：12891324
> 
> 赞同：0
> 
> 时间：2012-10-15T07:50:00.177
> 
> 标签：python, django, django-views, httpresponse

这是我得到的错误：视图 myapp.views.view_page 没有返回 HttpResponse 对象

谁能看到我在这里做错了什么？我似乎无法弄清楚为什么我会得到那个异常，因为我正在返回一个 HttpResponseRedirect。

视图.py

```
from myapp.models import Page
from django.shortcuts import render_to_response
from django.http import HttpResponseRedirect
from django.template import Template, RequestContext
from django.core.context_processors import csrf

def view_page(request, page_name):
        try:
                    page = Page.objects.get(pk=page_name)
        except Page.DoesNotExist:
                    return render_to_response("create.html", {"page_name" :page_name},context_instance=RequestContext(request))

                    content=page.content
                    return render_to_response("view.html", {"page_name" :page_name , "content" :content},context_instance=RequestContext(request))

def edit_page(request, page_name):
        try:
                    page = Page.objects.get(pk=page_name)
                    content=page.content
        except Page.DoesNotExist:
                    content = ""
                    return render_to_response("edit.html", {"page_name" :page_name, "content" :content},context_instance=RequestContext(request))         

def save_page(request, page_name):
                content = request.POST["content"]
        try:
                    page = Page.objects.get(pk=page_name)
                    page.content=content

        except Page.DoesNotExist:
                    page = Page(name=page_name, content=content)
                    page.save()
                    return HttpResponseRedirect("/myproject/" + page_name + "/") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T20:11:11.047

你的缩进是完全错误的。我不知道你是否已经解决了你的问题，但正如我在你问一分钟后的第一条评论中所说的那样，你应该执行以下操作：

*   评论除一种方法外的所有内容
*   例如保留方法 view_page
*   仔细看看试试
*   考虑以下问题：**我是否在所有情况下都返回了一些东西？**
    *   我是否在`try`条款上返回一些东西？
    *   我是否在我的`except`条款中返回一些东西？
    *   我的*缩进*可能是*错误*的？

如果您仔细查看您的代码，您会发现它吗？:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:01:50.507

你有一个没有返回任何东西的执行路径——当没有引发异常时。您所拥有的缩进将两个 return 语句都放在了 except 块中；实际上从不执行第二次返回：

```
from django.shortcuts import render

def view_page(request, page_name):
    try:
        page = Page.objects.get(pk=page_name)
    except Page.DoesNotExist:
        return render(request,"create.html",{"page_name" :page_name})

    content=page.content
    return render(request,"view.html",{"page_name":page_name,"content":content}) 
```

您还需要对其他方法执行相同的操作：

```
def edit_page(request, page_name):

    try:
        page = Page.objects.get(pk=page_name)
        content=page.content
    except Page.DoesNotExist:
        content = ""
    return render(request,"edit.html", {"page_name":page_name,"content":content})

def save_page(request, page_name):

    content = request.POST["content"]
    page,_ = Page.objects.get_or_create(pk=page_name)
    page.content = content
    page.save()
    return HttpResponseRedirect("/myproject/" + page_name + "/") 
```

我正在使用[`render`自动](http://django.me/render)包含`RequestContext`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T17:54:56.213

您的 view_page 功能是

```
def view_page(request, page_name):
    try:
        page = Page.objects.get(pk=page_name)
        content=page.content
    except Page.DoesNotExist:
        content=None
    return render_to_response("view.html",{"page_name": page_name,
                                           "content": content},
                              context_instance=RequestContext(request)) 
```

同样的编辑和保存方法是

```
def edit_page(request, page_name):
    try:
        page = Page.objects.get(pk=page_name)
        content=page.content
    except Page.DoesNotExist:
        content = ""
    return render_to_response("edit.html", {"page_name": page_name,
                                            "content": content},
                              context_instance=RequestContext(request))         

def save_page(request, page_name):
    content = request.POST["content"]
    try:
        page = Page.objects.get(pk=page_name)
        page.content=content
    except Page.DoesNotExist:
        page = Page(name=page_name, content=content)
    page.save()
    return HttpResponseRedirect("/myproject/" + page_name + "/") 
```

# c++ - c++11 shared_ptr + Boost::序列化

> ID：12891328
> 
> 赞同：1
> 
> 时间：2012-10-15T07:50:33.663
> 
> 标签：c++, serialization, boost, shared-ptr

我需要 std::shared_ptr 的 Boost::Serialization 专业化。

我正在编写一个通过 Boost::Asio 发送对象的程序，其中许多对象在内部使用 shared_ptrs。使用一种解决方法来仅序列化它们所指的对象是非常不舒服的。

我一直在尝试自己制作，查看为 Boost::shared_ptr 提供的实现，但我对如何处理这些对象缺乏了解。

更改 Boost::shared_ptr 序列化中的命名空间使得序列化指针成为可能，但反序列化对我不起作用。

作为最后的手段，我可​​以（也许应该）切换到对我的对象使用 std::unique_ptrs，因为目前它们似乎拥有它们，但这会导致我遇到同样的问题，只有 unique_ptr。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:07:07.573

你说你在`std::shared_ptr`内部使用。那么为什么不使用`boost::shared_ptr`它来代替它，它完全支持`boost::serialization`并具有相同的功能`std::shared_ptr`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:10:53.547

我不确定这是否是最好的方法，但它似乎有效。

更改命名空间并将此加载方法添加到从 Boost::shared_ptr 专业化复制的 shared_ptr 专业化标头中：

```
template<class Archive, class T>
inline void load(
    Archive & ar,
    std::shared_ptr< T > &t,
    const unsigned int /* file_version */
){
    T * t_ptr;
    ar >> boost::serialization::make_nvp("px", t_ptr);
    t = std::shared_ptr<T>(t_ptr);
} 
```

# android - 可滚动视图中的可滚动文本视图或列表视图

> ID：12891332
> 
> 赞同：0
> 
> 时间：2012-10-15T07:50:53.110
> 
> 标签：android, android-layout

我一直在思考这个问题，是否可以在整个布局的 ScrollView 中有一个可滚动的 TextView 或 ListView ？

例如：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent">
<LinearLayout

    android:id="@+id/linearTest"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textTest"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:maxLines="2"
        android:gravity="center"
        android:scrollbars="vertical"
        android:padding="@dimen/main_text_padding"
        android:text="@string/main_introduction" />

</LinearLayout>
</ScrollView> 
```

在此处的示例中，textview 不会在滚动视图中滚动，但是如果取出滚动视图并且为 textview 提供方法 new ScrollingMovementMethod()，则 textview 将滚动。

我知道在可滚动视图中不应该有可滚动的，因为它会为设备造成冲突，以确定在用户交互时要调用哪个滚动。

有替代方案吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:14:08.600

有一种方法可以使 textview 中的文本滚动。

```
textView.setMovementMethod(new ScrollingMovementMethod()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:23:50.877

如果你想让 TextView 滚动而不是 ScrollView，你可以创建自己的 ScrollView，它从 ScrollView 扩展，并重写方法`onInterceptTouchEvent()`并更改返回值`return false;`，但我不明白你为什么要这样做，因为这里的 ScrollView 没有意义.

# mysql - MYSQL LOAD DATA INFILE 忽略重复行（自动增量为主键）

> ID：12891337
> 
> 赞同：30
> 
> 时间：2012-10-15T07:51:08.993
> 
> 标签：mysql, csv, load-data-infile

我在使用 LOAD DATA INFILE 命令时遇到了一些麻烦，因为我想忽略数据库中已经存在的行。如果我有一个包含如下数据的表，

```
id  |name   |age
--------------------
1   |aaaa   |22
2   |bbbb   |21
3   |bbaa   |20
4   |abbb   |22
5   |aacc   |22 
```

其中 id 是自动增量值。我拥有的 csv 文件包含如下数据，

```
"cccc","14"
"ssee","33"
"dddd","22"
"aaaa","22"
"abbb","22"
"dhgg","34"
"aacc","22" 
```

我想忽略行，

```
 "aaaa","22"
    "abbb","22"
    "aacc","22" 
```

并将其余的上传到表中。我尚未将所有内容上传到表的查询如下，

```
 LOAD DATA INFILE 'member.csv'
    INTO TABLE tbl_member
    FIELDS TERMINATED BY ','
           ENCLOSED BY '"'
           ESCAPED BY '"'
           LINES TERMINATED BY '\n'
    (name, age); 
```

请帮助我完成这项任务..将不胜感激..我尝试了很多链接但没有帮助:(

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-16T23:03:19.367

在 age 列上创建一个 UNIQUE 索引，然后：

```
LOAD DATA INFILE 'member.csv'
IGNORE INTO TABLE tbl_member
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
ESCAPED BY '"'
LINES TERMINATED BY '\n'
(name, age); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T09:52:07.133

一种方法是使用临时表。上传到这里并使用 SQL 从临时表中更新 tbl_member。

```
INSERT INTO tbl_member
SELECT Field1,Field2,Field3,... 
FROM temp_table
WHERE NOT EXISTS(SELECT * 
             FROM tbl_member 
             WHERE (temp_table.Field1=tbl_member.Field1 and
                   temp_table.Field2=tbl_member.Field2...etc.)
            ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-30T08:03:30.447

您可以在多个列上创建唯一索引。LOAD DATA 不会在所有这些列上插入与现有行匹配的行。

例如 ALTER TABLE tbl_member ADD UNIQUE unique_index(name,age)

# php - 如何使用 CSS 设置 PHP 回显结果的样式？

> ID：12891338
> 
> 赞同：0
> 
> 时间：2012-10-15T07:51:20.513
> 
> 标签：php, css, forms, styles

我正在为包装数据库创建一个搜索表单，并使用 CSS 来设置调用 PHP 页面的 HTML 表单的样式。我希望能够使用与搜索表单样式相同的 CSS 来设置来自 PHP 页面的所有结果的样式，因为 PHP 继续将结果作为单独的元素回显，我希望所有这些结果都显示在单独的小框中。它是否像我认为的那样简单，例如只是用标签包围 PHP？正如我目前正在尝试的那样，但它似乎不起作用。

```
 <body>

        <?php
            $con = mysql_connect ("localhost", "root", "");
                   mysql_select_db ("delyn_db", $con);

            if (!$con)
                { 
                    die ("Could not connect: " . mysql_error());
                }

            $descrip = mysql_real_escape_string($_POST['descrip']); 
            $depth   = mysql_real_escape_string($_POST['depth']);

            $varWidth = mysql_real_escape_string($_POST['traywidth']);
            $varHeight= mysql_real_escape_string($_POST['trayheight']);
            $varRange = mysql_real_escape_string($_POST['trayrange']);
            $varType  = mysql_real_escape_string($_POST['traytype']);
            $varShape = mysql_real_escape_string($_POST['trayshape']);
            $varImage = mysql_real_escape_string($_POST['imagename']);

            if (isset($varHeight) && !empty($varHeight)) {
                    $low  = ($varHeight."00");
                    $high = ($varHeight."99");
                } else {
                    $low  = ("000");
                    $high = ("999");
                }

            if (isset($varWidth) && !empty($varWidth)) {
                    $min  = ($varWidth."00");
                    $max = ($varWidth."99");
                } else {
                    $min  = ("000");
                    $max = ("999");
                }   

            $sql = "SELECT * FROM delyn WHERE 
                        description LIKE '%".$descrip."%'  
                    AND trayrange   LIKE '%".$varRange."%' 
                    AND traytype    LIKE '%".$varType."%' 
                    AND trayshape   LIKE '%".$varShape."%'
                    AND traywidth   BETWEEN '".$min."'  AND '".$max."' 
                    AND trayheight  BETWEEN '".$low."' AND '".$high."' ";

    ?>

    while ($row = mysql_fetch_array($r_query)) 
                    { 
                        echo '<p class="results">';
                        echo '<br /><img src="   '. $row['imagename'] . '" width="120" length="50">';
                        echo '<br /><strong> Tool Code: </strong>  '. $row['toolcode'];
                        echo '<br /><strong> Description: </strong> '. $row['description']; 
                        echo '<br /><strong> Tray range: </strong> '. $row['trayrange']; 
                        echo '<br /><strong> Tray type:  </strong> '. $row['traytype'];
                        echo '<br /><strong> Tray size:  </strong> '. $row['traysize']; 
                        echo '<br /><strong> Tray shape: </strong> '. $row['trayshape'] . '<br />' . '<br />' . '</p>';;  
                    }
                if (mysql_num_rows($r_query) <= 0){
                    echo 'No results match your search, please try again';
               }

        ?>  
  </body> 
```

CSS（对于 HTML 表单，我希望 Form div 标签的相同属性适用于结果）：

```
 @charset "UTF-8"; 
```

/* CSS 文档 */

```
 body {

}

.results {
width: 190px;
padding: 10px;
background: #E8CF24;
overflow:auto;
display:block;

font-family: Verdana, Geneva, sans-serif; 
font-size: 11px;

border: 1px solid #cccccc;
-moz-border-radius: 7px;
-webkit-border-radius: 7px;
border-radius: 7px;

-moz-box-shadow: 2px 2px 2px #cccccc;
-webkit-box-shadow: 2px 2px 2px #cccccc;
box-shadow: 2px 2px 2px #cccccc;
} 
```

现在编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:55:17.007

而不是使用中断使用段落标签。

```
<p><?php echo  $row['imagename']; ?></p> 
```

例如。然后，您可以将类分配给段落标签。

因此，如果您想为每个部分分配一个类，只需：

```
<p class="image_name_class"><?php echo  $row['imagename']; ?></p>
<p class="tool_code_class"><?php echo  $row['toolcode']; ?></p> 
```

或以一种形式：

```
<label class="control-label" for="input01">Tool Code</label>
<input class="input" ID="tool_code" runat="server"><?php echo  $row['toolcode']; ?></input > 
```

尽管您在该 CSS 中有 .input ，但您可以只输入而不是 .input ，这样您就不必为您的输入分配一个类，它将是自动的。

# vbscript - 在 VBS 中检索 XML 属性的值

> ID：12891340
> 
> 赞同：5
> 
> 时间：2012-10-15T07:51:26.173
> 
> 标签：vbscript, xml-parsing, xml-attribute

```
<Requirement Description="description" Operation="Configure">
   <Action ID="1000" Name="Split">
     <Contract>
       <Parameter Name="Version">4</Parameter>
       <Parameter Name="DefaultServer">192.168.00.</Parameter>
       <Parameter Name="DefaultUser">administrator</Parameter>
       <Parameter Name="DefaultPassword">password</Parameter>
       <Parameter Name="DefaultDomain">192.168.00.00</Parameter>
       <Parameter Name="Split">1</Parameter>
     </Contract>
   </Action>
</Requirement> 
```

从上面的 XML 文档中，我的目标是从 VBScript 中替换属性默认服务器和默认域的 IP 地址。

```
Set objXMLDoc = CreateObject("Microsoft.XMLDOM")
objXMLDoc.async = False
objXMLDoc.load(XMLFullPath) 
Set NodeList = objXMLDoc.documentElement.SelectNodes("//Parameter")

NodeList(i).nodeName 
```

将名称作为参数并`NodeList(i).Text`给我 4、IP 地址、管理员等值。但是我无法获取属性名称，因此我可以直接更改属性的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T05:35:05.900

要回答您的问题，您可以使用该[`getAttribute`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms761380%28v=vs.85%29.aspx)函数来访问属性的值：

```
NodeList(i).getAttribute("Name") 
```

* * *

您还可以在`SelectNodes`调用中向 XPath 表达式添加谓词以仅检索所需的元素：

```
Set NodeList = objXMLDoc.documentElement.SelectNodes("//Parameter[@Name = 'DefaultServer' or @Name = 'DefaultDomain']") 
```

这样，您不必检索和循环访问您不感兴趣的 Parameter 节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T08:19:27.817

有点生疏，但我认为您可以使用它通过节点名检索节点值：

```
Function getTag(nList, nName)
    Dim i
    i = 0
    Do while i < nList.childNodes.length
        if (nList.childNodes(i).nodeName = nName) then
            getTag = nList.childNodes(i).childNodes(0).text
            Exit Function
        end if
        i = i + 1
    Loop
End Function 
```

设置它，可能

```
Sub setTag(nList, nName, val)
    Dim i
    i = 0
    Do while i < nList.childNodes.length
        if (nList.childNodes(i).nodeName = nName) then
            nList.childNodes(i).childNodes(0).text = val
            Exit Sub
        end if
        i = i + 1
    Loop
End Sub 
```

# javascript - javascript函数未在文本框上调用，而仅在保存时调用（用于验证组）

> ID：12891349
> 
> 赞同：0
> 
> 时间：2012-10-15T07:51:49.373
> 
> 标签：javascript, asp.net

我在验证组下有一个带有日期选择器的文本框和一个自定义验证器，用于网页末尾的保存按钮。问题是在保存时调用了 javascrip 函数，但在此文本框值更改时没有调用。我究竟做错了什么？

文本框：

```
<td valign="middle">
            <asp:TextBox ID="txtPassingDate" runat="server" Width="106px" Text='<%# Bind("PassingDate") %>'></asp:TextBox>
            <img style="width: 17px; height: 16px" id="IMG1" onclick="javascript:calendarPicker('ContentPlaceHolder1_txtPassingDate');"
                alt="Select Date" src="../Images/show-calendar.gif" border="0" />
        </td> 
```

验证器：

```
 <asp:CustomValidator runat="server" ID="valCusRangePassingDate" ValidationGroup="Save"
                Display="Dynamic" ControlToValidate="txtPassingDate" ClientValidationFunction="CompareDateRange"
                ErrorMessage="Only last three months reimbursement is allowed" ForeColor="Red"
                Font-Bold="False"></asp:CustomValidator> 
```

注意：还有其他自定义 vlidator JS 函数也与同一文本框相关联。当前调用我的 JS 的保存按钮：

```
 <asp:Button ID="Save" Text="Save" runat="server" OnClick="Save_Click" ValidationGroup="Save"
                OnClientClick="return  ConfirmSave()" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:15:12.657

您可以在 TextBox 值更改事件中使用客户端验证检查。

```
function textbox_change()
{
    if(Page_ClientValidate('Save'))
    {
        //Your Code
    }
    else
    {
       //your code
    }
} 
```

`Page_ClientValidate`是从客户端进行验证的功能。您可以将验证组作为参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:26:58.620

问题是当您的控件由日期选择器操作时，您的 asp.net 控件看不到更改。添加此代码应该可以解决您的问题：

```
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js" ></script>

 <script type="text/javascript">
    $(document).ready(function () {
        $('.datepicker').datepicker({
            onSelect: function () {
                this.fireEvent && this.fireEvent('onchange') || $(this).change();
            }
        });
    });
 </script>

 <asp:TextBox ID="txtPassingDate" runat="server" Width="106px" CssClass="datepicker" Text='<%# Bind("PassingDate") %>'></asp:TextBox> 
```

This will fire the onChange event of your control when the datepicker value is selected. 此示例使用实际的 jQueryUI 日期选择器，它可能比您使用的 CalendarPicker 更好、更容易使用。

# drools - 每次需要评估规则时创建新的 Drools 知识库是否昂贵？

> ID：12891359
> 
> 赞同：1
> 
> 时间：2012-10-15T07:52:20.627
> 
> 标签：drools

我有一种情况，对于每种产品，我都有不同的规则。

因此，每个产品我将有 1 个 drl。

因此，据我了解，我有一个选择：

1.  将所有这些知识包添加到一个知识库中。

然后让 Drools 使用产品的 id 匹配正确的规则。

```
when 

avs : AvailabilityStatus( available == true, quantity <= 50, productId = 7899 ) 

then    

avs.setDiscountRate("0.65");

end 
```

1.  为每个产品创建一个新的知识库，即 50 个产品，50 个知识库，每个知识库只加载一个 drl。

在我的网络应用程序中，每个请求都需要对产品规则进行新的评估。

我不知道哪种方法更有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:03:28.900

KnowledgeBase 是一个非常非常昂贵的实例化对象，所以我不会在每次需要评估规则时都创建一个。

我认为您提到的第一种方法更好（将所有规则都放在一个 drl 中）。这也为跨产品制定规则留出了余地（想象一下，如果您想添加价格规则，并且您想模拟*购买 2，获得第 3 次免费*）。

还有第三种方法，您仍然可以为每个产品拥有一个 drl，但您将所有这些都加载到同一个知识库中。这类似于[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，但适用于规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:12:34.810

如果您需要为每个产品编写规则，则可能有多个规则具有相同类型的 LHS，仅更改参数，例如

```
when 
  avs : AvailabilityStatus( available == true, quantity <= 50, productId = 7899 ) 
then
  //update 
```

那么你可以考虑使用决策表。Drools 可以自己生成规则。[如用户指南中所述](http://docs.jboss.org/drools/release/5.4.0.Final/drools-expert-docs/html/ch02.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T00:22:08.640

我建议您只创建一个知识库并将二进制包存储在文件系统中。当您想要添加新规则时，您需要重新生成二进制包。不要为每个规则创建一个 drl，这没有任何意义。干杯

# wcf - WCF 中的上下文和实例

> ID：12891360
> 
> 赞同：2
> 
> 时间：2012-10-15T07:52:22.357
> 
> 标签：wcf

我正在阅读 Juval Löwy 的 Programming WCF 服务。它提到：

> 在 WCF 中，我们有 Context，我们在其中有实例。默认情况下，上下文的生命周期与其托管的实例的生命周期相同。我们可以有两个不同的生命周期。WCF 还允许在没有关联实例的情况下存在上下文。

为什么我们要释放实例并保持上下文为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:43:18.583

巧合的是，我最近阅读了您可能所指的那一章。Löwy 在他的书中解释了为什么这可能有用。首先他写道：

> WCF 还允许在没有关联实例的情况下存在上下文。我将此实例管理技术称为*上下文停用*。

在提到这通常是使用具有特定[ReleaseInstanceMode](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationbehaviorattribute.releaseinstancemode.aspx)的 OperationBehavior 完成后，他继续并提示您何时可以使用它：

> 您通常在某些但不是所有服务方法上应用实例停用，或者在不同方法上使用不同的值。[...]您通常偶尔应用它的原因是，如果您要统一应用它，您最终会得到一个类似每次调用的服务，在这种情况下，您不妨将服务配置为每次调用.

因此，您可以使用此“停用”来确保具有会话的服务中只有某些方法的行为就像它们是每次调用服务的一部分一样。上面提到的 MSDN 文章也用不同的措辞解释了这一点：

> 使用 ReleaseInstanceMode 属性指定 WCF 在执行方法的过程中何时回收服务对象。默认行为是根据 InstanceContextMode 值回收服务对象。设置 ReleaseInstanceMode 属性会更改该默认行为。在事务场景中，ReleaseInstanceMode 属性通常用于确保在处理方法调用之前清理与服务对象关联的旧数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:41:56.630

在以下情况下断开上下文与实例的连接是有意义的：

1.  实例创建是自定义/扩展的。例如，如果您使用带有依赖注入库（例如 Unity）的自定义 IInstanceProvider 创建服务实例，您可能需要 Unity 生命周期管理器来处理服务实例生命周期。

2.  一些但不是所有操作会导致昂贵的服务实例失效。例如：服务对象在创建过程中加载大量费用资源。如果客户端调用的服务操作修改或使资源无效，则需要为下一个调用者释放和重新加载。如果操作没有使资源无效，则服务实例可以被下一个调用者重用。（几乎在所有情况下都有更好的方法来解决这个问题，但 WCF 允许这样做）。

我敢肯定还有其他用例。

# .net - 嵌入 .exe 以在 VB 表单中使用

> ID：12891361
> 
> 赞同：0
> 
> 时间：2012-10-15T07:52:22.537
> 
> 标签：.net, winforms

我需要在 Windows 窗体中嵌入一个 notepad.exe [就像在网页中嵌入 Flash 一样] ...这可能吗

# excel - 将 csv 保存为 excel 格式时丢失精度

> ID：12891364
> 
> 赞同：3
> 
> 时间：2012-10-15T07:52:33.783
> 
> 标签：excel, csv

我有一个 CSV 文件，其中一列存储了一些帐号文本，例如`99010124450000237`，但是当我尝试将其保存到 excel 时，它总是将数字格式化为`99010124450000200`，最后一位`2`数字被四舍五入。这太烦人了，因为实际上我只希望帐号是文本字段，但 Excel 将始终将其视为数字，更糟糕的是，它是四舍五入的。有人有相同的观点，也许有一些建议？

我尝试将列格式化为特定格式，并尝试导入数据。两种方法都不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:28:09.280

You don't say what version you're using, but the following seems to work in Excel 2007:

1.  Use Data ... Get External Data ... From Text Select your file and click "Import"
2.  In Text Import Wizard Step 1, set Original Data Type to "Delimited" (the default on my installation)
3.  In Text Import Wizard Step 2, select your delimiter (my test file uses Comma)
4.  In Text Import Wizard Step 3, click on the column with the account number (it should be highlighted) and change "Column Data Format" to "Text"
5.  Click "Finish"

I used a file with the following text, selecting the second column to be Text:

```
"99010124450000237",99010124450000237,"99010124450000237"
99010124450000237,"99010124450000237","99010124450000237" 
```

and got this output:

```
 A                 B                     C
1    9.90101E+16    99010124450000237   9.90101E+16
2    9.90101E+16    99010124450000237   9.90101E+16 
```

# security - 加密长度

> ID：12891367
> 
> 赞同：0
> 
> 时间：2012-10-15T07:52:49.523
> 
> 标签：security, encryption

哈希加密的加密长度会影响他自己的安全吗？

我的意思是如果我使用 md5() 或 sha() 如果返回的哈希有 35 个字符或 55 个字符，这会以某种方式影响哈希的安全性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:58:28.447

哈希没有“安全性”，因为它们通常不能反转。他们确实有冲突的风险，即两个不同的消息（文件名、密码等）映射到同一个哈希值。为了防止这种情况发生，您拥有的位越多越好，前提是散列分布尽可能平坦（分散）。

在这种情况下，冲突概率大约是位长的倒数：32 位散列是 1/2**32，等等。

还有其他考虑：在某些情况下，可能会与 MD5 发生冲突，因此最好使用 SHA。攻击的难度非常高，因此除了非常高的安全场景外，您仍然可以将 MD5 用于大多数用途。

# python - 如何从 python 运行和控制命令行程序？

> ID：12891369
> 
> 赞同：0
> 
> 时间：2012-10-15T07:53:00.397
> 
> 标签：python, csv, cmd

我有一个 python 脚本，它将提供一个输出文件。我需要将此输出文件提供给命令行程序。有什么方法可以调用命令行程序并控制它以在 python 中处理文件？

我试图运行这段代码

```
import os
import subprocess
import sys

proc = subprocess.Popen(["program.exe"], stdin=subprocess.PIPE)
proc.communicate(input=sys.argv[1]) #here the filename should be entered
proc.communicate(input=sys.argv[2]) #choice 1
proc.communicate(input=sys.argv[3]) #choice 2 
```

有什么方法可以输入来自命令行的输入。而且虽然cmd程序在我运行代码后打开界面闪烁。

谢谢。

注：平台为windows

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:55:44.173

看看[http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)。这是启动外部程序时的当前方式。有很多例子，你必须自己检查哪一个最适合你的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T07:58:34.107

您可以这样做[`os.system(somestr)`](http://docs.python.org/library/os.html#os.system)，让您`semestr`在命令行上作为命令执行。然而，随着时间的推移，这已经被审查为不安全等（一旦我找到它就会发布一个链接）。

结果，它通常被替换为[`subprocess.popen`](http://docs.python.org/library/subprocess.html#subprocess.Popen)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:07:57.807

如果您的目标程序期望输入 on ，您可以使用[管道](http://en.wikipedia.org/wiki/Pipeline_%28Unix%29)`STDIN`重定向：

```
python myfile.py | someprogram 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T09:11:03.867

除了使用管道重定向数据流外，您还可以处理命令行，例如：

```
mycode.py -o outputfile inputfilename.txt 
```

您必须导入 sys

```
import sys 
```

在你的主要功能中：

```
ii=1
infile=None
outfile=None
# let's process the command line
while ii < len(sys.argv):
arg = sys.argv[ii]
        if arg == '-o':
            ii = ii +1
            outfile = sys.argv[ii]
else:
            infile=arg  
        ii = ii +1 
```

当然，您可以添加一些文件检查等...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T08:04:46.247

根据您需要多少控制，您可能会发现使用[pexpect](http://pexpect.sourceforge.net/pexpect.html "期待")更容易，这使得解析程序的输出变得相当容易，也可以很容易地用于与程序标准输入通信。查看网站，他们有一些很好的例子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T08:58:05.797

正如我刚刚回答了关于子流程的[另一个问题](https://stackoverflow.com/questions/12891724/subprocess-using-several-command-line-tools)，有一个更好的选择！

请看一下伟大的库[python sh](http://amoffat.github.com/sh/)，它是一个成熟的 Python 子进程接口，它允许你调用任何程序，就好像它是一个函数一样，更重要的是，它是令人愉悦的 pythonic。

# unit-testing - Web 应用程序的 Visual Studio 2012 编码 UI 测试 - 代码覆盖率

> ID：12891370
> 
> 赞同：5
> 
> 时间：2012-10-15T07:53:05.843
> 
> 标签：unit-testing, visual-studio-2012, coded-ui-tests

我有一个网络应用程序。我正在使用 VS 2012 Coded UI 来测试 Web 应用程序。我已经记录了测试并运行它，它工作正常。但是代码覆盖率窗口只给出了测试项目的代码覆盖率，它没有给出网站项目和web项目中引用的其他dll项目的代码覆盖率。

我已在解决方案中添加了 testsetting 文件并选择了相同的文件。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:47:59.950

需要验证的几件事

a) 您是否通过测试设置将所有这些程序集添加到代码覆盖配置的程序集列表中？

b) 您对 Web 应用程序的部署是否作为测试运行的一部分进行？如果是这样，那么理想情况下，您应该选择“仪器就位”选项

# python - python中三角形函数的积分

> ID：12891372
> 
> 赞同：1
> 
> 时间：2012-10-15T07:53:18.597
> 
> 标签：python, geometry, integral

我刚刚定义了一个函数，它是给定阶跃函数的积分，现在我想对获得的三角形函数进行积分。![在此处输入图像描述](../Images/4cca75fdf6746972750aaa6089b488ad.png) jerk:1,-1,1-1 步进函数对应于给定的连续 jerk 列表。为了获得三角形函数，

我使用了这个公式：`a(t)=kt+ac`k 是 Jerk，ac 是一个常数，它确保了每一步的连续性和变化。但是要知道，如果我使用公式`v(t)=(1/2)kt^2+ac*t+vc`，我会得到不正确的速度负值。

我找到了一些 scipy 函数，它返回一个整数的数字，但我需要一条曲线，你知道如何整合它吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:55:48.670

你可以使用`scipy.integrate.quad`函数...

```
from scipy.integrate import quad

def g(x): # your triangle function
    return abs((x+1)%2-1)

for x in (0.1*i for i in xrange(40)):
    I = quad(g, 0, x)[0]
    print "x = %f -> g(x) = %f -> I(g, 0, x) = %f" % (x, g(x), I) 
```

是你要找的东西吗？

@编辑：

当 g 函数是离散的时，您可以对非离散区间的积分求和：

```
from math import floor
from scipy.integrate import quad

I = 0.0
for x in (1.0*i for i in xrange(4)):
    print "x = %f -> g(x) = %f -> I(g, 0, x) = %f" % (x, g(x), I)
    if floor(x) % 2 == 0:
        g = lambda x: 1
    else:
        g = lambda x: -1
    I += quad(g, x, x+1.0)[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:10:57.843

这可能是您正在寻找的：

![在此处输入图像描述](../Images/2e6e3c89af876d424dec06ba2b65e422.png)

```
import numpy as np
import matplotlib.pyplot as plt
from scipy import integrate

# step Function
def jerkstep(xprime,k):
    return (1 - 2*( int(xprime)%2 == 1 ) )*k

# Triangle function ( step integration)
def jerkint(x,k,ac): 
    return  integrate.quad( jerkstep ,0, x, args =(k) )[0] + ac*x

# Integrate of triangle
def jerkintint(x,k,ac,vc):
    return integrate.quad( jerkint, 0 , x , args = (1,0) )[0] + vc*x

# linearly spaced time samples (~ x axis)
t = np.linspace(2.0, 10.0, num = 100)

#optional arguments
k = 1
ac = 0
vc = 0

#output functions
jerk = np.array(t);
triangle = np.array(t);
curve = np.array(t);

# Warning : it can be long ( integration not optimized )
for indice,time in zip(range(len(t)),t): # Double indexation on t indices and t values
    print "Time, in seconds : ", time

    jerk[indice] = jerkstep(time,k)
    print "Step function : " , jerk[indice]

    triangle[indice] =jerkint(time,k,ac)
    print "Step function integrate ( = triangle ) : " , triangle[indice]

    curve[indice] = jerkintint(time,k,ac,vc)
    print "Step function double integrate ( = triangle integrate ) : " , curve[indice]
    print "\n"

# plot figure in mathplotlib
fig, axs = plt.subplots(3, 1, sharex=True, sharey=False)
axs[0].plot(t, jerk, 'o-', label=str("Step Function"))
axs[1].plot(t, triangle, 'o-' , label=str("Triangle Function"))
axs[2].plot(t, curve, 'o-' , label=str("Curve Function"))
fig.show()
plt.show() 
```

# ios - 地图和法律提及

> ID：12891373
> 
> 赞同：2
> 
> 时间：2012-10-15T07:53:24.727
> 
> 标签：ios, objective-c, google-maps, mkmapview

在 iOS < 6.0 中，我们能够在地图视图上重新定位“Google”链接（通过浏览地图视图的子视图）。现在有了 iO6，有一个“合法”链接，这是一个 MKAttributeLabel。一个我们无法操作的私有类......

我的问题是我必须在我的地图上添加一个页脚子视图，它会隐藏合法链接......我怎样才能在没有任何 App Store 拒绝的情况下解决这个问题？

我可以自己创建另一个合法按钮并将其添加到我的地图视图中我想要的位置吗？我不知道我能做什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T09:13:28.480

有一些答案建议您在`viewDidAppear`视图控制器中移动合法标签，但是如果您随后调整地图视图的大小（就像我一样），这将不起作用。

最好的方法是子类化`MKMapView`并覆盖该`layoutSubviews`方法。在我的示例中，我只需要轻推半透明工具栏上方的法律标签。

```
-(void)layoutSubviews
{
    [超级布局子视图];
    UILabel *legalLabel;
    for(UIView *view in self.subviews)
    {
        if([查看 isKindOfClass:[UILabel 类]])
        {
            法律标签 = (UILabel *) 视图；
            休息;
        }
    }
    legalLabel.center = CGPointMake(legalLabel.center.x, self.bounds.size.height - 55.0f);
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T19:27:36.007

页脚视图是否必须在地图边界内，为什么不将地图和页脚放在同一个超级视图中？

# jakarta-ee - autosys 作业从 servlet 触发两次

> ID：12891376
> 
> 赞同：1
> 
> 时间：2012-10-15T07:53:55.260
> 
> 标签：jakarta-ee, servlets, autosys

我们的应用程序从 servlet 触发了两次 autosys 作业。该作业计划在周一至周六下午 4 点运行。但有时该作业被触发两次并向客户发送空指针异常。（该作业并非整天触发两次，它很少发生，例如预定一周中的 2 天）

在检查 autosys 日志时，我们没有得到任何线索表明该作业被触发了两次。但在客户方面，它已被记录。

一个工作被触发两次的所有可能性是什么？在分析时，我们遇到了异常，例如 http post Connection 错误、超时和重叠（在时间排除中！）。但不确定是什么类型的问题导致了这种情况。

任何线索，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:36:11.373

如果我理解您的意思是 Autosys 日志显示该作业只运行了一次，但应用程序日志显示它运行的命令出现了两次。如果这是真的，请将您的精力集中在应用程序方面。在一家非常大的商店中运行 Autosys 的 10 多年中，我不记得 Autosys 在没有在日志中记录某些内容的情况下运行命令的任何情况。并不是说这不可能发生，但在我调查同一问题的绝大多数时间里，问题出在应用程序方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T12:23:01.250

一旦父框满足其依赖关系，框就会触发并开始运行（Active 状态和 Running 状态之间会有延迟）。在它可以进入运行状态之前，如果它没有任何其他依赖项，则会触发子作业。并且一旦作业框移动到运行状态，将再次启动子作业。可以通过比较开始时间和处理时间来推断。

我看到了一个实时示例：盒子从 10.00.00 开始，处理时间为 10.00.45。子作业于 10.00.15 开始，并于 10.00.32 完成。10.00.45 后再次开始

希望这可以帮助！！！

# javascript - Braintree“透明重定向”是如何实现的？

> ID：12891377
> 
> 赞同：4
> 
> 时间：2012-10-15T07:53:56.693
> 
> 标签：javascript, http-headers, payment-gateway, meta-tags, braintree

在 Braintree 的[“透明重定向如何工作”的](https://www.braintreepayments.com/developers/api-overview)*第 2 步*中，他们指出：

> 然后支付网关存储数据并将客户重定向回您的站点。由于支付网关将客户重定向回您的网站而不显示任何内容，因此客户不会注意到他或她曾经离开过您的网站。

**这种透明重定向**究竟是如何实现的？

*   HTML 元刷新？
*   Javascript 加载 URL 片段？
*   HTTP 3xx 重定向？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T16:11:04.703

我是 Braintree 的开发人员。

我们目前使用 HTTP 重定向来实现这一点。商家通过将表单设置`action`为 Braintree URL 来配置要发布给我们的表单。

当我们收到表单帖子时，我们会将用户重定向回商家的网站，而不显示任何内容。我们通过`HTTP 3xx`带有标头的响应来做到这一点`Location`。

除非用户正在查看他们的浏览器状态栏，否则他们不会有任何明显的迹象表明他们离开了商家的网站。这使商家可以控制结账过程的用户体验，而无需让信用卡数据通过他们的服务器。

您还可以在我们的网站上阅读[我们的透明重定向 API 的概述。](https://developers.braintreepayments.com/ios+ruby/deprecated/transparent-redirect/create-transaction)

# c# - 通过 net 2.0 上传 SkyDrive 文件

> ID：12891379
> 
> 赞同：0
> 
> 时间：2012-10-15T07:54:04.407
> 
> 标签：c#, winforms, .net-2.0, onedrive

我想使用 .Net Framework 2.0 System.Net 库在 SkyDrive 上上传文件（该文件夹是公共的）。（带有winform或控制台项目）

Skydrive 文件夹是`"<http://sdrv.ms/P0lta5>"`

我搜索了结果，发现了一些代码：

```
WebClient wc = new WebClient();
byte[] up = wc.UploadFile(@"<http://sdrv.ms/P0lta5>", @"d:/1.jpg"); 
```

但是使用此代码我的文件不会上传到给定文件夹。

`WebClient`（任何带有,的代码示例`HttpWebRequest`都会有所帮助）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:14:51.797

尝试使用以下api，

[http://skydriveapiclient.codeplex.com/](http://skydriveapiclient.codeplex.com/)

# php - Newsletter thru plesk (PHPList) 的批处理

> ID：12891380
> 
> 赞同：2
> 
> 时间：2012-10-15T07:54:11.093
> 
> 标签：php, email, plesk, phplist

我需要向 20,000 个电子邮件 ID 发送时事通讯，但要分批发送，而且我对这个邮件发送过程非常陌生，所以我只是在开始时就卡住了。

我的邮件服务器是共享服务器，所以我的限制是每小时 100 封电子邮件，但我需要将其发送到数据库中的整个 20,000 个电子邮件 ID。我的网站上有以下内容

1.  收件人列表（在名为 emails 的表格中）
2.  电子邮件设置表单（包含 IP、电子邮件、密码、批量大小、间隔等字段）
3.  上述字段的表..
4.  我的站点托管在 Plesk（基于 Windows 的 Web 服务器）上。

我对此进行了谷歌搜索，我得到的 phpList 完全符合我的所有要求，但我需要我自己的界面，它也可以安装在 CPanel 中，我知道如何在 Plesk 上安装它。

请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-14T09:57:30.730

首先，您需要通过 plesk 的“邮件”设置来设置邮件服务器设置。

完成上述配置后，转到 www/public_html 文件夹 1) 在那里上传 phplist 文件。2）在 config.php 中进行必要的设置 3）彻底安装（您也可以在此处获得安装说明：http: [//docs.phplist.com/PhplistInstallation.html](http://docs.phplist.com/PhplistInstallation.html)）

注意：电子邮件发送限制仅取决于您的服务器配置 + 您的 ISP 可以发送垃圾邮件的法律。

# android - 如何通过 android 应用在 google Plus 中共享图像？

> ID：12891382
> 
> 赞同：18
> 
> 时间：2012-10-15T07:54:16.090
> 
> 标签：android, android-intent, google-plus

我已经尝试过此代码，但我没有看到在我的帐户中共享的照片。

```
File file = new File("sdcard/1346249742258.jpg");
String photoUri = null;
photoUri = file.getAbsolutePath();

Intent shareIntent = ShareCompat.IntentBuilder.from(this)
        .setText("Sharing an image on Google!").setType("image/jpeg")
        .setStream(Uri.parse(photoUri)).getIntent()
        .setPackage("com.google.android.apps.plus");
startActivity(shareIntent); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-17T21:48:34.780

Google+ 应用仅支持[content:// URI](http://developer.android.com/reference/android/content/ContentUris.html)。`MediaStore`为此，您需要使用API。

```
 File tmpFile = new File("/path/to/image");
 final String photoUri = MediaStore.Images.Media.insertImage(
         getContentResolver(), tmpFile.getAbsolutePath(), null, null);

 Intent shareIntent = ShareCompat.IntentBuilder.from(this)
         .setText("Hello from Google+!")
         .setType("image/jpeg")
         .setStream(Uri.parse(photoUri))
         .getIntent()
         .setPackage("com.google.android.apps.plus"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-03T12:14:53.047

将 ForGooglePlus Activity 集成到您的代码中，并将 URL(imageUrl) 、Description(description text) 和 contentUrl(URL) 放在相同的位置。注意：波纹管代码也适用于我的应用程序。

```
public class ForGooglePlus extends Activity
{
    private String imageUrl, description, contentUrl;
    private Context mContext;
    private int REQUEST_FOR_GOOGLE_PLUS = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        mContext = this;
        imageUrl = getIntent().getStringExtra("URL");
        description = getIntent().getStringExtra("Description");
        contentUrl = getIntent().getStringExtra("contentUrl");

        if (isPackageInstalled("com.google.android.apps.plus", mContext)) {
            if (imageUrl == null) {
                imageUrl = "";
            }
            if (description == null) {
                description = "";
            }
            // Intent shareIntent = new PlusShare.Builder(this)
            // .setType("image/jpeg")
            // .setText(description)
            // .setStream(getUriFromUrl(imageUrl))
            // .setContentUrl(Uri.parse(contentUrl))
            // .getIntent();

            Uri uri = getUriFromUrl(imageUrl);
            if (uri != null) {
                Intent shareIntent = ShareCompat.IntentBuilder
                        .from(ForGooglePlus.this)
                        .setText(description + "\n" + contentUrl)
                        .setType("image/jpeg").setStream(uri).getIntent()
                        .setPackage("com.google.android.apps.plus");
                startActivityForResult(shareIntent, REQUEST_FOR_GOOGLE_PLUS);
            } else {
                Intent shareIntent = ShareCompat.IntentBuilder
                        .from(ForGooglePlus.this)
                        .setText(description + "\n" + contentUrl)
                        .setType("image/jpeg").getIntent()
                        .setPackage("com.google.android.apps.plus");
                startActivityForResult(shareIntent, REQUEST_FOR_GOOGLE_PLUS);
            }
        } else {
            Toast.makeText(mContext, "Application not found", Toast.LENGTH_LONG)
                    .show();
            finish();
        }
    }

    public Uri getUriFromUrl(String thisUrl) {
        try {

            Bitmap inImage = ImageLoader.getInstance().loadImageSync(thisUrl);
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            inImage.compress(Bitmap.CompressFormat.JPEG, 100, bytes);
            String path = Images.Media.insertImage(
                    mContext.getContentResolver(), inImage, "Title", null);
            return Uri.parse(path);
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();

        }
        return null;
    }

    private boolean isPackageInstalled(String packagename, Context context) {
        PackageManager pm = context.getPackageManager();
        try {
            pm.getPackageInfo(packagename, PackageManager.GET_ACTIVITIES);
            return true;
        } catch (NameNotFoundException e) {
            return false;
        }
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == REQUEST_FOR_GOOGLE_PLUS) {
            if (resultCode == RESULT_OK) {
                finish();
            } else {
                Toast.makeText(mContext,
                        mContext.getString(R.string.msg_gp_cancel),
                        Toast.LENGTH_LONG).show();
                finish();
            }
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T15:37:10.407

我还使用意图通过android在google plus上发布图像我正在拍摄设备的屏幕截图并将其发布在google plus上，我使用你的代码我得到异常FileNotFoundException（）并且正如你提到使用绝对路径我得到错误，方法 getAbsolutePath() 对于 String 类型未定义我的代码在下面给出请建议我在代码中更正

```
 package com.testproject;

    import java.io.File;
    import java.io.FileNotFoundException;

    import android.app.Activity;
    import android.content.Intent;
    import android.graphics.Bitmap;
    import android.net.Uri;
    import android.os.Bundle;
    import android.provider.MediaStore;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.RelativeLayout;

    public class TestProjectActivity extends Activity {

        private Button share_btn = null; 
        private String url=null;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            share_btn = (Button)findViewById(R.id.share_btn);
            share_btn.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View arg0) {
                    // TODO Auto-generated method stub
                    Intent intent=new Intent(TestProjectActivity.this,ShareDialogActivity.class);
                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);    
                    startActivityForResult(intent, 1);  
                }
            });
        }
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            String url =takeScreenShot();
            super.onActivityResult(requestCode, resultCode, data);
            switch (resultCode) {
            case 1:
                String share = data.getExtras().getString("NAME");
                if(share!=null && share.equalsIgnoreCase("Share with Instagram")){
                    Intent i = new Intent(Intent.ACTION_SEND);
                    i.setType("image/jpg");
                    i.putExtra(Intent.EXTRA_STREAM, Uri.parse(url));
                    startActivity(Intent.createChooser(i, "Share Image"));
                }

                if(share!=null && share.equalsIgnoreCase("Share with GooglePlus")){
                    Intent shareIntent = new Intent(Intent.ACTION_SEND);
                    File tmpFile = new File(url);
                    String photoUri=null;
                    photoUri = url.getAbsolutePath();
                    try {
                        photoUri = MediaStore.Images.Media.insertImage(
                                getContentResolver(), tmpFile.getAbsolutePath(), null, null);
                        shareIntent = ShareCompat.IntentBuilder.from(this)
                        .setText("Hello from Google+!")
                        .setType("image/jpeg")
                        .setStream(Uri.parse(photoUri))
                        .getIntent()
                        .setPackage("com.google.android.apps.plus");
                        startActivity(shareIntent);
                    } catch (FileNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
                break;
            }
        }
        public String takeScreenShot(){
            try{
                RelativeLayout  view = (RelativeLayout)findViewById(R.id.icflag_layout);
                View v1 = view.getRootView();
                System.out.println("Root View : "+v1);
                v1.setDrawingCacheEnabled(true);
                Bitmap bm = v1.getDrawingCache();
                url =MediaStore.Images.Media.insertImage(getContentResolver(), bm,"screeshot.jpg", 1233+ ".jpg Card Image");
            }
            catch(OutOfMemoryError e){

            }
            return url;
        }
    } 
```

谢谢你和问候尼丁

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T08:52:23.440

不要使用绝对路径。

OnActivityResult() 在从相机捕获图像后使用它。

```
Uri photoUri = intent.getData();                
Intent shareIntent = ShareCompat.IntentBuilder.from(this)
                         .setText("Hello From Google+!")
                             .setType("image/jpeg")
                             .setStream(photoUri)
                             .getIntent()
                     .setPackage("com.google.android.apps.plus");
startActivity(shareIntent); 
```

这对我有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T10:27:06.200

嘿，Deepika，您正在获取文件，也没有发现异常，因为设备上不存在该 google plus 应用程序，您编码的方式只是从设备启动本机应用程序

只有当本机 ap 确实存在时它才会起作用

其他方法是拥有 google plus sdk，这是一个小 jar 文件，您可以使用它共享图像

[https://developers.google.com/+/mobile/android/](https://developers.google.com/+/mobile/android/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-08T08:58:19.953

您可以使用以下 api 共享图像。详细步骤查看教程

[http://androidsrc.net/integrating-google-plus-sign-in-into-your-android-application/](http://androidsrc.net/integrating-google-plus-sign-in-into-your-android-application/)

```
 /**
     * API to process media post request start activity with MIME type as video
     * and image
     */
    private void processShareMedia() {
        Intent photoPicker = new Intent(Intent.ACTION_PICK);
        photoPicker.setType("video/*, image/*");
        startActivityForResult(photoPicker, PICK_MEDIA_REQUEST_CODE);

    }

/**
 * Handle results for your startActivityForResult() calls. Use requestCode
 * to differentiate.
 */
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == PICK_MEDIA_REQUEST_CODE) {
        // If picking media is success, create share post using
        // PlusShare.Builder
        if (resultCode == RESULT_OK) {
            Uri selectedImage = data.getData();
            ContentResolver cr = this.getContentResolver();
            String mime = cr.getType(selectedImage);

            PlusShare.Builder share = new PlusShare.Builder(this);
            share.setText("Hello from AndroidSRC.net");
            share.addStream(selectedImage);
            share.setType(mime);
            startActivityForResult(share.getIntent(),
                    SHARE_MEDIA_REQUEST_CODE);
        }
    }
} 
```

# cmd - 为多个参数正确引用 cmd.exe

> ID：12891383
> 
> 赞同：58
> 
> 时间：2012-10-15T07:54:19.003
> 
> 标签：cmd

我想打电话

```
cmd /c "C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\devenv.com" mysolution.sln /build "release|win32" 
```

不幸的是，这不起作用，因为我收到错误：

> 'C:\Program' 不是内部或外部命令、可运行程序或批处理文件。

据我了解，我需要为 | 引用空格和引号，但我只能使用引号一次。

任何想法如何正确引用此命令行调用？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-10-15T09:29:56.760

注意`""`开头和结尾！

运行一个程序并传递一个长文件名

```
cmd /c write.exe "c:\sample documents\sample.txt" 
```

* * *

程序路径中的空间

```
cmd /c ""c:\Program Files\Microsoft Office\Office\Winword.exe"" 
```

* * *

程序路径中的空格 + 参数

```
cmd /c ""c:\Program Files\demo.cmd"" Parameter1 Param2 
```

* * *

程序路径中的空格 + 带空格的参数

```
cmd /k ""c:\batch files\demo.cmd" "Parameter 1 with space" "Parameter2 with space"" 
```

* * *

启动 Demo1，然后启动 Demo2

```
cmd /c ""c:\Program Files\demo1.cmd" & "c:\Program Files\demo2.cmd"" 
```

[CMD.exe（命令外壳）](http://ss64.com/nt/cmd.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-31T10:25:38.957

Spaces are used for separating Arguments. In your case **C:\Program** becomes argument. If your file path contains spaces then add Double quotation marks. Then cmd will recognize it as single argument.

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2014-04-14T21:14:48.590

文件名或目录名中的空格很糟糕。

正确的语法是将每个包含空格的目录名称用双引号括起来

cmd /c C:\"Program Files"\"Microsoft Visual Studio 9.0"\Common7\IDE\devenv.com mysolution.sln /build "release|win32"

# c++ - C++ 嵌套前向声明继承

> ID：12891386
> 
> 赞同：-1
> 
> 时间：2012-10-15T07:54:37.060
> 
> 标签：c++, inheritance, forward-declaration

我的问题是：

我定义了类（生成器），在其中我定义了一个前向嵌套结构（主题和 it_set）。

我在 .cpp 文件中声明了这个嵌套类。

在此之后，我声明了第二个类（ImageGenerator），它是生成器的继承。

当我在 ImageGenerator 的声明文件中尝试时遇到问题。

反正有没有使这成为可能？

我的代码是这些：

```
<i>
 //base.hpp
</i>

 class generator{

 protected:

    struct topics;
    struct it_set;

    NodeHandle _nh;

    cv::Ptr<topics> _topics;
    cv::Ptr<it_set> _set;

    cv::Mat _data;

public:

   generator(ros::NodeHandle&,const std::string&,const std::string&,const std::string&);

    virtual ~generator(void);

    bool ok(void)const;

protected:

    virtual void grab(void) = 0;

};

<i>
// base.cpp
</i>

static void cam_from_sub(const std::string& _subscriber,std::string& _cam){

    std::stringstream str;

    std::vector<std::string> words;

    std::string tmp;

    for(std::string::const_iterator it = _subscriber.begin();it != _subscriber.end();it++)
        (*it != '/')?(str<<*it):(str<<std::endl);

    while(!str.eof()){
        str>>tmp;
        words.push_back(tmp);
        tmp.clear();
    }

    words.pop_back();

    for(std::vector<std::string>::iterator it = words.begin(); it != words.end();it++){
        _cam+=*it+std::string("/");
        it->clear();
    }

    words.clear();

    _cam+= std::string("camera_info");

}

struct generator::topics{

    std::string _publisher;
    std::string _subscriber;
    std::string _camera_info;

    topics(const std::string& _pub,const std::string& _sub,const std::string& _cam):_publisher(_pub),_subscriber(_sub),_camera_info(_cam){}
    topics(const std::string &_pub, const std::string &_sub):_publisher(_pub),_subscriber(_sub){cam_from_sub(_subscriber,_camera_info);}
    ~topics(void){}
};

struct generator::it_set{

    image_transport::ImageTransport _it;
    image_transport::SubscriberFilter _is;
    image_transport::Publisher _pb;
    message_filters::Subscriber<sensor_msgs::CameraInfo> _cam_info;

    it_set(NodeHandle& _nh,cv::Ptr<generator::topics>& _topics):_it(_nh),_is(_it,_topics->_subscriber,1),_cam_info(_nh,_topics->_camera_info,1){ this->_pb = this->_it.advertise(_topics->_publisher,1);}

};

generator::generator(NodeHandle & nh, const std::string & subscribe, const std::string & publish, const std::string & camera_info):_nh(nh),_topics(new topics(publish,subscribe,camera_info)),_set( new it_set(_nh,_topics)){}

generator::~generator(void){ _set.release(); _topics.release();}

bool generator::ok(void)const{ return this->_nh.ok();}

<i>
// image.hpp
</i>
class ImageGenerator : public generator{

private:

    NodeHandle _nh;

    static bool _sht;

    bool _first_sht;
    bool _is_sub;

public:

    typedef void(*function_type)(const cv::Mat&,cv::Mat&);

private:

    function_type _fun;

    virtual void callback(const sensor_msgs::ImageConstPtr&);

    virtual void grab(void);

public:

    ImageGenerator(const NodeHandle&,const std::string&,const std::string&,const std::string&,function_type);

    ~ImageGenerator(void);

    void operator>>(cv::Mat&);
    void operator<<(const cv::Mat&);

};

<i>
// image.cpp
</i>

bool ImageGenerator::_sht = false;

void ImageGenerator::grab(void){

    if(!this->_is_sub)
        this->_set->_is.registerCallback(boost::bind(&ImageGenerator::callback,this,_1));

    ros::CallbackQueue* mloop = ros::getGlobalCallbackQueue();

    while(!this->_sht)
        mloop->callAvailable(ros::WallDuration(0.1f));

    this->_sht = true;

    mloop = NULL;

    this->_is_sub = true;

}

void ImageGenerator::callback(const sensor_msgs::ImageConstPtr &msg){

    cv_bridge::CvImagePtr cv_ptr;

    cv_ptr = cv_bridge::toCvCopy(msg);

    this->_data = cv_ptr->image;
}

ImageGenerator::ImageGenerator(const NodeHandle & nh, const std::string & subscribe, const std::string & publish, const std::string & camera_info, function_type fun):_nh(nh),base::generator(_nh,subscribe,publish,camera_info),_fun(fun){ this->grab();}

ImageGenerator::~ImageGenerator(void){} 
```

我要解决的问题是

> void ImageGenerator::grab(void)

它的 ：

> this->_set->_is.registerCallback(boost::bind(&ImageGenerator::callback,this,_1));

编译器回答：

> 错误无效使用不完整类型生成器::it_set

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:47:10.817

类型不完整，因为编译器没有看到该结构的定义。

如果要在 的子类中使用结构`generator`，则需要将它们的定义移动到`generator`“base.hpp”中的定义中。

# networking - 如何在我的办公室访问被阻止的 Yahoomail？

> ID：12891392
> 
> 赞同：0
> 
> 时间：2012-10-15T07:55:02.503
> 
> 标签：networking, network-programming, network-protocols

实际上，我的网络管理员阻止了我办公室的**www.yahoomail.com**。但我需要访问它来阅读一些重要的邮件。有没有可能？

我在一些第三方网站上试过。输入登录凭据（***用户名和密码***）后。我收到一个错误“**此页面要求您在浏览器上启用 Javascript。** ”

但它已经在我的浏览器中启用。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:58:17.230

您可以尝试安装 TOR -> [https://www.torproject.org/](https://www.torproject.org/)

它通过一些代理发送您的请求，因此它应该有助于访问被阻止的站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:00:26.023

最常用的方法之一是使用代理服务器，特别是俄罗斯人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:01:50.083

虽然您可以访问 Yahoomail，但我认为您应该只要求管理员或您的团队负责人或 PM 允许您在工作中使用 Yahoomail。

如果您在未经许可的情况下尝试连接 Yahoomail 时被抓到，情况会更糟 :)

# java - Java 使用泛型类型

> ID：12891393
> 
> 赞同：0
> 
> 时间：2012-10-15T07:55:03.050
> 
> 标签：java, generics, quicksort

我有一个接受泛型类型 T 数组的快速排序我创建了一个 int 数组并尝试使用快速排序，但它不知道如何接受 int 数组。我不能调用 intArray = quickSort(intArray); 关于主要方法。我该怎么做才能使用泛型快速排序方法？

```
public class BasicTraining 
{
    public static <T extends Comparable<? super T>> T[] quickSort(T[] array) 
    {
        sort(0, array.length - 1, array);
        return array;
    }

    public static <T extends Comparable<? super T>> void sort(int low, int high, T[] array)
    {
        if (low >= high) return;
        int p = partition(low, high, array);
        sort(low, p, array);
        sort(p + 1, high, array);
    }

    private static <T extends Comparable<? super T>> int partition(int low, int high, T[] array)
    {
        T pivot = array[low];

        int i = low - 1;
        int j = high + 1;
        while (i < j)
        {
            i++; 
            while (array[i].compareTo(pivot) < 0) 
                i++;
            j--; 
            while (array[j].compareTo(pivot) > 0) 
                j--;
            if (i < j) 
                swap(i, j, array);
         }
         return j;
      }

    private static <T extends Comparable<? super T>> void swap(int i, int j, T[] array)
    {
        T temp = array[i];
        array[i] = array[j];
        array[j] = temp;
    }

    public static void main(String[] args)
    {
        int[] intArray = new int[] {9,3,6,2,1,10,15,4,7,22,8};
        for(int i = 0; i < intArray.length; i++)
        {
            System.out.print(intArray[i] + ", ");
        }
//      intArray = quickSort(intArray);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T07:56:46.123

*泛型类型是通过类型参数化的泛型类或接口，java 不支持原始类型。*

使用整数数组而不是原始类型 int。

```
Integer[] intArray = new Integer[] {9,3,6,2,1,10,15,4,7,22,8}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:59:44.923

那是因为`int`是原始类型，因此不是 type `T extends Comparable<? super T>`。

因此，您需要将数组转换为`Integer[]`或编写特定的`quicksort(int[] array)`方法。这实际上是在 JDK 中所做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T07:58:16.013

您需要非基元数组`Integer`。[来自通用类型](http://docs.oracle.com/javase/tutorial/java/generics/types.html)的 oracle 文档

> 类型变量**可以是您指定的任何非原始类型**：任何类类型、任何接口类型、任何数组类型，甚至是另一个类型变量。

```
Integer[] intArray = new Integer[]{9, 3, 6, 2, 1, 10, 15, 4, 7, 22, 8}; 
```

# c# - 带参数的 SQL 事务

> ID：12891395
> 
> 赞同：0
> 
> 时间：2012-10-15T07:55:10.327
> 
> 标签：c#, asp.net, sql, sqltransaction

我正在使用 SQL Transaction 语句来执行存储过程。传统上，我会使用命令参数将不同的变量插入到命令中。

当我尝试对事务使用相同的方法时，该过程不会插入到数据库中，尽管事务可以正常工作而不会出现错误。

这是我尝试的方法：

```
SqlConnection db = DataConn.SqlConnection();

    db.Open();
    SqlTransaction transaction = db.BeginTransaction();

    try
    {
        const string strSql = "procSiteAddMember @uID, @userName, @password, @nickname, @email, @siteAddress";

        var sqlComm = new SqlCommand(strSql, db, transaction) {CommandType = CommandType.Text};

        sqlComm.Parameters.Add(new SqlParameter("@uID", SqlDbType.VarChar, 255)).Value = uID;
        sqlComm.Parameters.Add(new SqlParameter("@userName", SqlDbType.VarChar, 20)).Value =
            txtRegisterUsername.Text.Trim();
        sqlComm.Parameters.Add(new SqlParameter("@password", SqlDbType.VarChar, 20)).Value =
            txtRegisterPassword.Text;
        sqlComm.Parameters.Add(new SqlParameter("@nickname", SqlDbType.VarChar, 20)).Value =
            txtRegisterNickname.Text.Trim();
        sqlComm.Parameters.Add(new SqlParameter("@email", SqlDbType.VarChar, 20)).Value = txtRegisterEmail.Text.Trim();
        sqlComm.Parameters.Add(new SqlParameter("@siteAddress", SqlDbType.VarChar, 20)).Value = lblNickname.Text.Trim();

        //sqlComm.ExecuteNonQuery();
        //DataConn.Disconnect();

        transaction.Commit();

        Response.Redirect("~/Member/" + txtRegisterNickname.Text);
    }
    catch (Exception ent)
    {
        Response.Write("Error: " + ent.Message);
    } 
```

我看到了[这篇文章](https://stackoverflow.com/questions/2386588/insert-with-transaction-and-parameters)- 但它似乎很长，有很多变数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-27T09:52:51.083

您已经解决了这个问题，但由于没有人回答，我会这样做以供将来参考。

您仍然需要执行查询，因此取消注释您的行`sqlComm.ExecuteNonQuery();`

也不要忘记添加`transaction.Rollback();`你的 catch 块，你必须把它放在另一个 try-catch 块中，以防回滚抛出异常。

例子：

```
try
{
    ...
    transaction.Commit();

}
catch (Exception ex)
{
    try
    {
        ...
        transaction.Rollback();
    }
    catch (Exception ex2)
    {
        ...
    }
} 
```

欲了解更多信息，请访问：[https ://msdn.microsoft.com/en-us/library/86773566(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/86773566(v=vs.110).aspx)

# httpwebrequest - 优化图像精灵大小与 http 请求

> ID：12891399
> 
> 赞同：0
> 
> 时间：2012-10-15T07:55:36.903
> 
> 标签：httpwebrequest, sprite, css-sprites

我正在创建一个网站，并且设计有很多背景图像，所以我使用图像精灵来优化页面加载时间。

问题是我有 3 个精灵图像，其中 2 个是 200 KB，尺寸不超过 900x700 像素。

我的问题是关于优化页面速度。什么会产生最好的结果？使用两个 200 KB 的 sprite 会更好，还是将它们分成 4 个每个 100 KB 的 sprite 图像会更好。

就我阅读的许多文章而言，大多数开发人员和专家都说要尽量减少 http 请求，因为现在互联网速度足够快，所以下载不需要太多时间。我在某种程度上同意，但我无法在图像尺寸较小的另外 2 个 http 请求或图像尺寸较大的 http 请求较少之间下定决心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:12:42.450

这对我来说似乎是微优化，但无论如何最高效的方法是将图像嵌入到 html 页面中，因此您只需使用页面的单个 http 请求。

您可以使用新`data:`协议嵌入图像并将图像包含为**base64**编码字符串，查看本[教程](http://www.websiteoptimization.com/speed/tweak/inline-images/)了解详细信息。

另请参阅[浏览器](http://caniuse.com/#feat=datauri)对此功能的支持。

# mysql - 如何删除表中重复的记录？

> ID：12891402
> 
> 赞同：1
> 
> 时间：2012-10-15T07:55:49.057
> 
> 标签：mysql, sql

嗨，我遇到了一种情况，错误地没有删除表，我运行了表的批处理文件，该文件包含一些详细的插入语句

我有一个像 alert_priority 这样的表，由像这样的记录组成

```
Id  priority_name
---  --------------
1     P0
2     P1
3     P2 
```

现在错误地没有删除**alert_priority**我已经执行了包含一些插入语句的表的脚本文件，现在在执行脚本之后我在表中的记录就像

```
Id  priority_name
---  --------------
1     P0
2     P1
3     P2
1     P0
2     P1
3     P2 
```

现在我想删除额外的记录（Id 3 之后的记录），并且我应该拥有在执行脚本文件之前存在的所有记录。

虽然我可以选择删除表并再次执行脚本文件，但我想知道有什么方法可以通过 sql 查询来完成
**我的表中没有主键**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:00:59.460

首先，考虑将您的`ID`字段设置为 AI（自动递增）甚至 PK（主键）。

为了删除那些重复的行，我们将创建一个新表并将所有这些重复的行移到其中。之后，删除该表。

> 创建临时表 bad_temp AS SELECT DISTINCT * FROM alert_priority

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:00:17.167

您可以将所有唯一记录复制到新表中，然后删除旧表：

```
SELECT DISTINCT * INTO new_table FROM old_table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T08:06:11.303

```
CREATE TABLE new_tbl(id int AUTO_INCREMENT,priority_name);

INSERT INTO new_tbl
select priority_name from old_tbl group by priority_name; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T08:01:15.670

在 SQL-Server 中，使用 ROW_NUMBER 会很容易，但可惜 MySQL 没有这样的功能 :-(

解决它的最佳方法如下：

*   创建一个与第一个结构相同但没有数据的新表。
*   使用查询：`INSERT INTO name_of_new_table SELECT DISTINCT * FROM name_of_old_table`
*   丢弃旧表
*   将新表重命名为旧表的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T08:09:29.243

只删除重复的新行并保留旧行（基于我假设已经有其他表的行引用原始行）： -

```
DELETE FROM alert_priority
WHERE Id IN (SELECT MaxId
FROM (SELECT priority_name, MAX(Id) AS MaxId, COUNT(Id)  AS CountId
FROM alert_priority
GROUP BY priority_name
HAVING CountId > 1)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T08:30:08.413

以下查询将为您提供要保留的所有记录：

```
SELECT min(id)
FROM alert_priority
GROUP BY priority_name
HAVING count(*) > 1
    OR min(id) = max(id) 
```

要删除所有重复项，请运行以下查询：

```
DELETE FROM alert_priority
WHERE id NOT IN (
    SELECT min(id)
    FROM alert_priority
    GROUP BY priority_name
    HAVING count(*) > 1
        OR min(id) = max(id)
) 
```

# php - empty($val) 和 !$val 有什么区别？

> ID：12891406
> 
> 赞同：-9
> 
> 时间：2012-10-15T07:56:19.273
> 
> 标签：php

如 ：

```
return empty(!$val); 
```

并返回 !$val();

只需创建一个布尔条件，例如：

```
if (!empty($val)) {} 
```

和

```
if ($val) {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T07:59:56.570

PHP doc对此非常清楚。没有什么要补充的：

[http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

> 确定一个变量是否被认为是空的。如果变量不存在或其值等于 FALSE，则认为该变量为空。如果变量不存在，empty() 不会生成警告。

和

> 以下内容被认为是空的：
> 
> ```
> "" (an empty string)
> 0 (0 as an integer)
> 0.0 (0 as a float)
> "0" (0 as a string)
> NULL
> FALSE
> array() (an empty array)
> $var; (a variable declared, but without a value) 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T07:57:35.140

从[手册为空](http://php.net/empty)：

> 确定一个变量是否被认为是空的。如果变量不存在或其值等于 FALSE，则认为该变量为空。**如果变量不存在，empty() 不会生成警告。**

它可以避免`$_GET['foo']`在您无法保证 URL 包含`foo`查询字符串参数等情况下出现错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T07:57:34.563

从手册：

> 如果变量不存在，则不会生成警告。这意味着 empty() 本质上等同于 !isset($var) || $var == 假。

换句话说，除了空不发出警告之外，它们完全相同。

# php - php单独运行避免用户超时

> ID：12891414
> 
> 赞同：0
> 
> 时间：2012-10-15T07:57:03.203
> 
> 标签：php, forms

我想找到一种方法让我的用户不必等待 php 脚本的输出并在脚本在服务器上运行时被重定向到页面。

基本上，用户提交了一个需要很长时间才能处理的表单，我想将用户重定向到一个页面，通知他该表单正在处理并且其输出稍后将可用（我想在输出时打开一个选项卡准备好）。

基本上我想要这样的东西，我尝试过但没有成功，

```
if ($form_valid) {
   process_form(); // this would need not to be running on the current page so that the user don't have to wait for it to be ready (timeout problems)
   header('Location: http://example.com/form_submitted_output_coming_soon.html');
} 
```

我希望它不会太模糊。

预先感谢您对我如何做到这一点的任何帮助/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T07:58:38.177

解决此类问题的最佳方法是使用 AJAX 在后台向服务器发出请求，然后在完成处理后更新用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T07:59:48.337

您可以使用异步请求 (ajax) 提交表单并使用 javascript 处理页面转发。这样你的表单就被异步处理了——你甚至可以等待响应告诉用户一旦你有答案。此异步请求不会阻塞 UI。

如果您真的只想为此使用 php，则仅出于完整性考虑： [异步运行 PHP 任务](https://stackoverflow.com/questions/858883/run-php-task-asynchronously)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T08:04:32.160

这真的取决于脚本执行所需的时间，如果它是几秒钟，在 10 岁以下我会做一个 ajax 请求并有一个模态进度消息

如果他们花费大量时间，我的方法是创建或使用现有的任务调度程序/报告生成器

*   调用中央管理脚本的单个系统计划任务条目（可能不是最佳的）
*   您将任务/报告标记为执行
*   并发。计数，限制当前执行的数量（这样你就不会超载服务器）
*   用户通过 ajax 汇集他们的任务/报告或使用 Web 套接字推送到客户端

[如何将 php 分叉到后台的示例](http://squirrelshaterobots.com/programming/php/building-a-queue-server-in-php-part-4-run-as-a-background-daemon-a-k-a-forking/)

**更新**

我认为你会从机器人中获得更好的性能，不断检查数据库或文件以完成工作并将结果提交回数据库。当他们需要的工作完成/更新时，通过 ajax、Web 套接字和/或电子邮件提醒用户。

这里有一个很好的介绍[如何在php中构建一个网络爬虫](http://www.makeuseof.com/tag/build-basic-web-crawler-pull-information-website/)

# hibernate - 升级到 JBoss 7.1 和 Hibernate 4.0 时无法连接到 JNDI

> ID：12891415
> 
> 赞同：0
> 
> 时间：2012-10-15T07:57:17.357
> 
> 标签：hibernate, jboss, upgrade, jboss7.x

我们正在将我们的服务器从 Jboss 5.1 升级到 Jboss 7.1 Final。但并非所有服务器都会立即迁移到新技术。

我正在升级 Hibernate 4.0 和 Jboss 7.1 上的第一台服务器。但无法通过 JNDI 连接到位于其他 Jboss 服务器（5.1）上的数据源。

数据源 (*-ds.xml)

```
<?xml version="1.0" encoding="UTF-8"?>
<datasources>
  <local-tx-datasource>
    <jndi-name>jdbc/wc-mysql</jndi-name>

    <connection-url>jdbc:mysql://XXX:3306/wellclub</connection-url>
    <driver-class>com.mysql.jdbc.Driver</driver-class>
    <user-name>myclub</user-name>
    <password>myclub</password>

    <exception-sorter-class-name>
          org.jboss.resource.adapter.jdbc.vendor.MySQLExceptionSorter
    </exception-sorter-class-name>

    <!-- The minimum connections in a pool/sub-pool. 
         Pools are lazily constructed on first use -->
    <min-pool-size>50</min-pool-size>
    <!-- The maximum connections in a pool/sub-pool -->
    <max-pool-size>200</max-pool-size>
    <!-- setting java context as Global so outsider can also use it. -->
    <use-java-context>false</use-java-context>
    <metadata>
       <type-mapping>mySQL</type-mapping>
    </metadata>
  </local-tx-datasource>
</datasources> 
```

休眠.cfg.xml

```
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>

        <property name="hibernate.connection.datasource">jdbc/wc-mysql</property>
        <property name="hibernate.jndi.url">jnp://jndi.wellclub.me:1099</property>
        <property name="hibernate.transaction.factory_class">org.hibernate.transaction.JTATransactionFactory</property>
        <property name="hibernate.jta.UserTransaction">UserTransaction</property>

        <property name="hibernate.show_sql">true</property>
        <property name="hibernate.current_session_context_class">jta</property>
        <property name="hibernate.transaction.manager_lookup_class">org.hibernate.transaction.JBossTransactionManagerLookup</property>
    </session-factory>
</hibernate-configuration> 
```

在 Hibernate Utility 类中，我将 SessionFactory 启动为

```
Configuration configuration = new Configuration().configure();

// Add all the Annotated classes here...

ServiceRegistryBuilder builder = new ServiceRegistryBuilder();
builder.applySettings(configuration.getProperties());
serviceRegistry = builder.buildServiceRegistry();

sessionFactory = configuration.buildSessionFactory(serviceRegistry); <== Error 
```

**例外：**

```
03:28:01,820 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/core]] (MSC service thread 1-2) Exception sending context initialized event to listener instance of class com.wellclub.service.WCStartupService: org.hibernate.service.jndi.JndiException: Unable to lookup JNDI name [jdbc/wc-mysql]
    at org.hibernate.service.jndi.internal.JndiServiceImpl.locate(JndiServiceImpl.java:68) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.service.jdbc.connections.internal.DatasourceConnectionProviderImpl.configure(DatasourceConnectionProviderImpl.java:116) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.buildJdbcConnectionAccess(JdbcServicesImpl.java:223) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:89) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.service.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:75) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:159) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:131) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:71) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2273) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2269) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1738) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    at com.wellclub.model.util.ParentHibernateUtil.initiateSessionFactory(ParentHibernateUtil.java:131) [wc-model-2.3.0.jar:]
    at com.wellclub.model.util.HibernateUtil.initiateSessionFactory(HibernateUtil.java:32) [classes:]
    at com.wellclub.service.WCStartupService.contextInitialized(WCStartupService.java:44) [classes:]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_26]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_26]
Caused by: javax.naming.NameNotFoundException: jdbc/wc-mysql -- service jboss.naming.context.java.jdbc.wc-mysql
    at org.jboss.as.naming.ServiceBasedNamingStore.lookup(ServiceBasedNamingStore.java:97)
    at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:178)
    at org.jboss.as.naming.InitialContext.lookup(InitialContext.java:113)
    at javax.naming.InitialContext.lookup(InitialContext.java:396) [rt.jar:1.6.0_26]
    at org.hibernate.service.jndi.internal.JndiServiceImpl.locate(JndiServiceImpl.java:65) [hibernate-core-4.1.1.Final.jar:4.1.1.Final]
    ... 24 more 
```

错误线

```
org.hibernate.service.jndi.JndiException: Unable to lookup JNDI name [jdbc/wc-mysql] 
```

请告诉我我错过了什么。如果我以正确的方式做这件事，我也想要一个指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:19:34.410

我注意到两件事可能是原因，

```
 1\. <use-java-context>false</use-java-context>   - set it to true

 2\. hibernate.jndi.class is different for Jboss 4 and 7 atleast. 
```

这些东西可能会奏效..

但我强烈建议你在 JBoss 7 上创建本地数据源。

*   麦迪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:15:21.263

可能您应该尝试像这样查找数据源 jndi 名称

```
<property name="hibernate.connection.datasource">java:jboss/datasources/jdbc/wc-mysql</property> 
```

在 Jboss 服务器管理控制台中，在配置文件选项卡下

在 Connectors -> DataSources 部分，列出了数据源的 JNDI 名称

# javascript - 使用 validate.js 进行表单验证不起作用

> ID：12891416
> 
> 赞同：0
> 
> 时间：2012-10-15T07:57:27.060
> 
> 标签：javascript, jquery, jquery-validate

验证在以下代码中不起作用。我正在使用 validate.js。可以请任何人指出问题吗？

```
<form id="tf">
    <input type="text" id="q" name="q" />
    <input type="submit" value="Submit" />
</form>

<script type="text/javascript">
    $(document).ready(function () {
        $("#tf").validate({
            rules: {
                q: {
                    required: true
                }
            },
            messages: {
                q: {
                    required: "Done"
                }
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:25:41.377

Have you tried adding

```
class="required" 
```

to the inputs?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:20:37.377

我认为您需要添加一个类，而不是一个 ID，才能使验证工作。

```
<input type="text" id="q" class="q" name="q" /> 
```

# php - 跟踪哪个网页用户位于（查看）

> ID：12891428
> 
> 赞同：0
> 
> 时间：2012-10-15T07:58:30.867
> 
> 标签：php, javascript, html

> **可能重复：**
> [建立一个数据库来跟踪哪些用户点击了哪些链接？](https://stackoverflow.com/questions/10199521/setting-up-a-database-for-tracking-which-users-have-clicked-which-links)

我想知道一种可以跟踪用户进出我的网页的方法，例如：用户进入我网站的“some_page”，或退出我网站的“some_page”，或退出我的网站。

也许我可以在 php 中设置一个变量来跟踪这个？（确切地知道我的用户位于哪个页面的想法）您能否提供一种方法或代码来解决此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:41:26.663

您可以在每个页面上传递一个查询字符串或设置一个变量。例如，您有一个 var $urlId，然后您传递一个值 Home.php...

```
 public function visitedPage()
                {
                    $urlId = 'Home.php'; 
                    if ($urlId)
                    {
                        $count = 1;
                        $ip = $_SERVER['REMOTE_ADDR']; 
                        $page = array(
                            'page' => $urlId, 'ip' => $ip, 'count' => $count, 
                        );
                        return $page;
                    }
                } 
```

您可以保存到您的数据库 -> $urlID 或页面。

您可以保存到您的数据库 - > 用户的 $ip - 这是您可以确定唯一访问者等...您可以添加其他功能。

您可以保存到您的数据库 -> $count...“编辑此部分”。添加其他功能或方法以在用户再次访问该站点/页面后自动增加计数。您将知道他访问该页面/站点的次数。您可以通过 IP 确定是否为同一用户。

希望这个小想法会有所帮助。

# android - 使用图像按钮，在每个列表视图项目行中并尝试开始一个新活动

> ID：12891431
> 
> 赞同：-1
> 
> 时间：2012-10-15T07:58:35.930
> 
> 标签：android, android-layout, android-intent, android-listview

我在每个 listview 项目行中使用图像按钮，并尝试使用 Button onClick 侦听器启动新活动，但得到：- 源附件不包含 ComponentName.class 的源

```
package com.example.androidhive;

public class LazyAdapter extends BaseAdapter {

protected static final Context Context = null;
private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.
  getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView title = (TextView)vi.findViewById(R.id.title); 
    TextView artist = (TextView)vi.findViewById(R.id.description); 
    TextView duration = (TextView)vi.findViewById(R.id.cost); 
    TextView regular = (TextView)vi.findViewById(R.id.regular); 
    TextView small = (TextView)vi.findViewById(R.id.small); 
    TextView large = (TextView)vi.findViewById(R.id.large); 
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.item_image); 
    ImageButton btn_add=(ImageButton)vi.findViewById(R.id.addorder);

    HashMap<String, String> song = new HashMap<String, String>();

    song = data.get(position);

    // Setting all values in listview
    title.setText(song.get(CustomizedListView.KEY_TITLE));
    artist.setText(song.get(CustomizedListView.KEY_DESC));
    duration.setText(song.get(CustomizedListView.KEY_COST));
    regular.setText(song.get(CustomizedListView.KEY_REGULAR));
    small.setText(song.get(CustomizedListView.KEY_SMALL));
    large.setText(song.get(CustomizedListView.KEY_LARGE));

    imageLoader.DisplayImage(song.get(CustomizedListView.KEY_THUMB_URL), thumb_image);

    btn_add.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
           Intent intent = new Intent(Context, FinalOrder.class);
           startActivity(intent);
        }
    });

    return vi;

   }

protected void startActivity(Intent intent) {
    // TODO Auto-generated method stub

}

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:35:28.897

在链接中提到的自定义适配器中，在`getView`方法中将单击列表器添加到图像按钮因此您可以处理自定义适配器中图像按钮的单击，如果您想在活动之间发送数据，您也可以在该单击列表器中发送它基于点击位置

```
myImageButton.setOnClickListener(new OnClickListener()
            {
                public void onClick(View v)
                {
Intent intent = new Intent(Context, nextactivity.class);
intent.putExtra("value",ValueArray[position]);
startActivity(intent);
})}; 
```

检查一下，如果这对你有帮助，请告诉我

将您的代码与下面发布的代码进行比较

```
/*
 * Copyright (C) 2010 Eric Harlow
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.ericharlow.DragNDrop;

import java.util.ArrayList;

import android.content.Context;
import android.content.Intent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public final class DragNDropAdapter extends BaseAdapter implements RemoveListener, DropListener{

    //private int[] mIds;
    //private int[] mLayouts;
    private LayoutInflater mInflater;
    private ArrayList<String> mContent;
    private Context mContext;

    public DragNDropAdapter(Context context, ArrayList<String> content) {
        mContext = context;
        init(context,new int[]{android.R.layout.simple_list_item_1},new int[]{android.R.id.text1}, content);
    }

    /*public DragNDropAdapter(Context context, int[] itemLayouts, int[] itemIDs, ArrayList<String> content) {
        init(context,itemLayouts,itemIDs, content);
    }*/

    private void init(Context context, int[] layouts, int[] ids, ArrayList<String> content) {
        // Cache the LayoutInflate to avoid asking for a new one each time.
        mInflater = LayoutInflater.from(context);
        //mIds = ids;
        //mLayouts = layouts;
        mContent = content;
    }

    /**
     * The number of items in the list
     * @see android.widget.ListAdapter#getCount()
     */
    public int getCount() {
        return mContent.size();
    }

    /**
     * Since the data comes from an array, just returning the index is
     * sufficient to get at the data. If we were using a more complex data
     * structure, we would return whatever object represents one row in the
     * list.
     *
     * @see android.widget.ListAdapter#getItem(int)
     */
    public String getItem(int position) {
        return mContent.get(position);
    }

    /**
     * Use the array index as a unique id.
     * @see android.widget.ListAdapter#getItemId(int)
     */
    public long getItemId(int position) {
        return position;
    }

    /**
     * Make a view to hold each row.
     *
     * @see android.widget.ListAdapter#getView(int, android.view.View,
     *      android.view.ViewGroup)
     */
    public View getView(final int position, View convertView, ViewGroup parent) {
        // A ViewHolder keeps references to children views to avoid unneccessary calls
        // to findViewById() on each row.
        ViewHolder holder;

        // When convertView is not null, we can reuse it directly, there is no need
        // to reinflate it. We only inflate a new View when the convertView supplied
        // by ListView is null.
        if (convertView == null) {
            mInflater = LayoutInflater.from(mContext);
            convertView = mInflater.inflate(R.layout.dragitem, null);
            // Creates a ViewHolder and store references to the two children views
            // we want to bind data to.
            holder = new ViewHolder();
            holder.text = (TextView) convertView.findViewById(R.id.TextView01);
            holder.image=(ImageView)convertView.findViewById(R.id.ImageView01);
            convertView.setTag(holder);
        } else {
            // Get the ViewHolder back to get fast access to the TextView
            // and the ImageView.
            holder = (ViewHolder) convertView.getTag();
        }
        holder.image.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                Toast.makeText(mContext,"ImageClickClick "+position, Toast.LENGTH_LONG).show();
                Intent noteIntent = new Intent(mContext,AnotherActivity.class);
                noteIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                mContext.startActivity(noteIntent);
            }
        });
        // Bind the data efficiently with the holder.
        holder.text.setText(mContent.get(position));

        return convertView;
    }

    static class ViewHolder {
        TextView text;
        ImageView image;
    }

    public void onRemove(int which) {
        if (which < 0 || which > mContent.size()) return;       
        mContent.remove(which);
    }

    public void onDrop(int from, int to) {
        String temp = mContent.get(from);
        mContent.remove(from);
        mContent.add(to,temp);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:29:18.723

您的适配器正在向您返回视图。正确的？

现在在你的 onitemclickListener

```
ImageButton myImageButton = (ImageButton) view.findViewById(R.id.addorder); 
```

现在在您的 myImageButton 上应用 onclicklistener。

# jsp - 无法在 JSP 中检索会话属性

> ID：12891434
> 
> 赞同：0
> 
> 时间：2012-10-15T07:58:58.837
> 
> 标签：jsp, session, jsf-1.2

我有基于 JSF 1.2 的`Servlet`. 我在我的 bean 中设置`Session`属性`Servlet`。Bean 在请求范围内。在这`Servlet`有一个链接。单击此链接时，它会调用另一个`Servlet`. 这第二个 Servlet 不是基于 JSF。它只包含一个 JSP 页面来显示数据。我试图通过检索`Session`1st 中设置的属性来显示此 JSP 中的数据`Servlet`。但是，在 JSP 页面中获取的数据是`null`. 两个 Servlet 中的会话 ID 相同。我的 JSP 页面中有以下相关代码。

```
<%@page language="java" session="true" %>
<%@page session="true" %>
 session = request.getSession();
 String userName = (String)session.getAttribute("uname"); 
```

以下是在bean中设置会话属性的方式

```
HttpSession session = null;
    HttpServletRequest req = null;
    req = (HttpServletRequest) PolicyContext.getContext("javax.servlet.http.HttpServletRequest");
    session = req.getSession();
session.setAttribute("uname", this.uname); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T16:27:20.737

尝试使用[EL](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)来检索您的会话属性。例如：

```
${sessionScope['uname']} 
```

# html - 引用 opentype 字体，在本地工作，但不是实时的

> ID：12891436
> 
> 赞同：0
> 
> 时间：2012-10-15T07:59:04.720
> 
> 标签：html, css, font-face, opentype

在我的 CSS 中，我有

```
@font-face{font-family:"MyFont"; 
src:url("MyFont.otf")format("opentype"); 
```

在我的服务器上，我在同一个文件夹中-

```
Index.html
mystyles.css
MyFont.otf 
```

但它从来没有成功过，关于 otfs 有什么我应该知道的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:06:35.553

好吧，从您的代码中，它似乎缺少一个';'，但无论如何，您都可以查看本教程： [如何使用 CSS @font-face](http://nicewebtype.com/notes/2009/10/30/how-to-use-css-font-face/)

或者您可以查看这个非常有用的网站以及它的工具包和发电机

[字体松鼠](http://www.fontsquirrel.com/)

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:50:50.917

.otfs 不是一个很好的文件类型。我没有见过使用它们的字体的好例子。

您还应该提供 .woff 和 .ttf 文件类型，.svg 文件也可以在字体堆栈中看到。

看看这个工具是否有帮助：[FontSquirrel font kit generator](http://www.fontsquirrel.com/fontface/generator)

# facebook - Facebook按时限获得墙

> ID：12891441
> 
> 赞同：0
> 
> 时间：2012-10-15T07:59:22.717
> 
> 标签：facebook, api, datetime, sdk, facebook-fql

我收到了 facebook sdk 的墙贴

$get = $facebook->api('/me/posts', 'GET'); 或 $get = $facebook->api('/me/feed', 'GET' );

我需要将它们保存到我自己的数据库中，并且在新请求之后，我需要获取尚未保存的帖子。但是我找不到任何要添加的参数来获取信息，例如过去 7 天，或者在通过时间戳 smth 发布之后。

我看到有 FQL 有时间字段，但它只在状态表中，我需要所有这些，喜欢、分享、状态、评论等。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:11:33.957

您可以添加`since=[time]`和/或`until=[time]`作为查询字符串来获取特定的时间片。

例如，要获得从 2012 年 10 月 1 日开始的 7 天帖子，请尝试以下操作：

```
'/me/feed?since=2012-10-01&until=2012-10-08' 
```

您的时间字符串可以是 ISO-8601 日期字符串或 UNIX 时间戳。

# java - jBPM 5：如何删除或更改已完成的任务？

> ID：12891442
> 
> 赞同：2
> 
> 时间：2012-10-15T07:59:25.330
> 
> 标签：java, workflow, jbpm

让我们看看你能不能帮我一把。提前致谢。

我正在开发一个 Web 应用程序，通过具有不同状态的工作流来管理发票。我为此目的使用 jBPM 5，接下来我通过工作流启动一张特定发票的方式是：

*   getTaskService().activate(taskId, userId);
*   getTaskService().claim(taskId, userId);
*   getTaskService().start(taskId, userId);
*   getTaskService().complete(taskId, userId, taskContentData);

我的问题是第四条指令，涉及交易性。我有一个实用程序类，一旦发票通过其工作流程处理，它就会执行操作，如果这个类抛出异常，jBPM 发票任务在不应该时保持为“已完成”。

我的问题是：在这种情况下我该如何进行？我希望前 4 条指令仅在一个事务中执行，或者至少如果出现一个异常，任务状态不会更改为“已完成”，但这由 jBPM 控制，看起来并不容易。我应该尝试再次将任务状态从“已完成”更改为“已创建”吗？或者创建一个状态为“已创建”的新任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-20T13:59:20.833

我知道这是旧线程，但对其他人来说，..

在这种情况下，它应该通过流程来处理和指示。您可以参考异常处理[https://docs.jboss.org/jbpm/v6.0/userguide/jBPMExceptionManagement.html](https://docs.jboss.org/jbpm/v6.0/userguide/jBPMExceptionManagement.html)

基本上，如果在处理发票后发生错误（无论是哪个任务），并且如果发生错误，它应该执行错误处理条件语句并返回上一个流程（任务）。

# sequence - 找到一个序列，使得 k 之间恰好有 k 个数字

> ID：12891444
> 
> 赞同：2
> 
> 时间：2012-10-15T07:59:37.770
> 
> 标签：sequence

我试图在谷歌上搜索它，但找不到任何相关链接。如果对这个问题有任何参考，那就足够了。

2n 个数字，每个数字从 1 到 n 两次，将按顺序排列，使得数字 k 之间恰好有 k 个数字。是否有可能为任何 n 找到这样的安排？什么可以是为一些 n 找到这样的序列的一般策略。

例如，
n = 3 --> 231213
n = 4 --> 41312432

我只是通过点击和试验找到了它们，但无法找到 n = 5 和 6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:53:48.377

请参阅此处[http://en.wikipedia.org/wiki/Langford_pairing](http://en.wikipedia.org/wiki/Langford_pairing)了解更多信息。特别是：“朗福德配对仅在 n 与 0 或 3 模 4 一致时存在；例如，当 n = 1、2 或 5 时，不存在朗福德配对。” 意味着您在 n = 5 和 n = 6 时运气不佳。

有关给定 n 的解决方案数量，请参见[http://oeis.org/A014552 。](http://oeis.org/A014552)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:03:33.910

不存在任意*n的这样的序列，可以通过对**n* 2、5 或 6的详尽搜索轻松验证：

```
def check(t, n): 
  for i in range(1, n + 1): 
    p1 = t.index(i)
    p2 = t.index(i, p1 + 1)
    if p2 - p1 != i + 1:
      return False
  return True

assert check((2, 3, 1, 2, 1, 3), 3)
assert check((4, 1, 3, 1, 2, 4, 3, 2), 4)

def allseqs(n):
  if n > 1:
    for seq in allseqs(n - 1): 
      for i in range(len(seq) + 1): 
        for j in range(i, len(seq) + 1): 
          yield seq[:i] + (n,) + seq[i:j] + (n,) + seq[j:]
  else:
    if n == 1:
      yield (1, 1)
    else:
      yield ()

def findseqs(n):
  for p in allseqs(n):
    if check(p, n): 
      print p 
```

n=2, 3, 4, 5 的结果：

```
>>> findseqs(2)
>>> findseqs(3)
(2, 3, 1, 2, 1, 3)
(3, 1, 2, 1, 3, 2)
>>> findseqs(4)
(2, 3, 4, 2, 1, 3, 1, 4)
(4, 1, 3, 1, 2, 4, 3, 2)
>>> findseqs(5)
>>> findseqs(6)
>>> 
```

n=7 有很多解决方案，但详尽的搜索需要几分钟。

# visual-c++ - 键盘、鼠标事件通知到 vc++ 应用程序

> ID：12891459
> 
> 赞同：2
> 
> 时间：2012-10-15T08:00:32.987
> 
> 标签：visual-c++, mouseevent, keyboard-events, keyboard-hook, lost-focus

我想用 vc++ 编写应用程序，它监听键盘、鼠标事件，即使我的 vc++ 应用程序在后台运行，即即使 **焦点丢失**，它也必须获得有关事件的通知，并且**我不想使用任何第三方库。** 我确实搜索了 Hook 机制，但这对我来说没有任何意义。

这是 Hook 机制的链接：

[http://msdn.microsoft.com/en-us/library/ms632589%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms632589%28v=vs.85%29.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:00:39.323

Windows 操作系统不会发出任何键盘或鼠标事件。

Window 接收有关鼠标和键盘活动的消息。也许这就是为什么挂钩对您没有意义。

如果您想从所有应用程序接收鼠标和键盘消息，您将不得不使用挂钩，即低级挂钩 WH_KEYBOARD_LL 和 WH_MOUSE_LL，无论它们是在 dll 库还是可执行模块中，它们都是全局的。

什么具体没有意义？

# jquery - 当 autoOpen false 时 jquery-ui 对话框中的按钮不显示

> ID：12891467
> 
> 赞同：0
> 
> 时间：2012-10-15T08:01:07.057
> 
> 标签：jquery, jquery-ui

将 autoOpen 设置为 false 后，我无法在 jquery-ui 对话框中显示按钮。

我用这样的按钮设置了我的对话框。

```
$(document).ready(function() {
    $("#dialog-form").dialog({
        autoOpen: false,
        modal: true,
        buttons: {
            Ok: function() {
                $(this).dialog("close");
            }
        }
    });
}); 
```

单击页面上的其他内容后，我运行此行以打开我的对话框。

```
$("#dialog-form").dialog("open"); 
```

但是，该对话框不显示任何按钮。我发现如果我设置`autoOpen: true`了，那么当对话框立即打开时，按钮就会显示出来。如何在需要通过调用（即设置`autoOpen: false`）打开对话框时显示按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:31:05.527

根据 API，原始代码也应该可以工作：来自 API 的示例：

```
....
<script>
$( "#dialog" ).dialog({ autoOpen: false });
$( "#opener" ).click(function() {
    $( "#dialog" ).dialog( "open" );
});
</script>
... 
```

我没有看到在文档就绪时初始化的代码......如果代码在文档就绪时未初始化，则包含小部件标签的部分还无法加载，并且小部件将不会被初始化。调用`$( "#dialog-form" ).dialog( "open" );`时将应用新的初始化，因此按钮不会出现。

将您的 JS 初始化代码放入 document.ready 部分

```
$(function() {

  $("#dialog-form").dialog({
    autoOpen: false,
    modal: true,
    buttons: {
        Ok: function() {
            $(this).dialog("close");
        }
    }
  });

}); 
```

# android - Android 将相同分辨率的可绘制资源合并到一个文件夹中

> ID：12891471
> 
> 赞同：2
> 
> 时间：2012-10-15T08:01:32.217
> 
> 标签：android, resources, drawable

原谅我的英语。我有一个支持 800x480、1280x720、1280x800 像素屏幕分辨率的应用程序。800x480 和 1280x800 的可绘制资源是相同的。问题：如何将这两种资源类型组合在一个资源文件夹中（drawable-800x480 + drawable-1280x800）

# sql-server - SQL Server 导入导出向导错误

> ID：12891474
> 
> 赞同：3
> 
> 时间：2012-10-15T08:01:43.090
> 
> 标签：sql-server, odbc

我正在尝试通过非常旧的 ODBC 驱动程序（FairCom c-tree）导入一些表，但我无法让 SQL 2012 Express 中的向导工作。我一直在使用 OdbcConnection.GetSchema 方法来匹配 ProviderDescriptors.xml 文件，但是架构中似乎没有 ORDINAL_POSITION 值。有没有办法克服这个问题？我可以很好地预览数据，但得到一个关于 ORDINAL_POSITION 的错误，并被告知去修复 ProviderDescriptors.xml 文件。

谢谢。

![错误](../Images/9206e98052bd8b4fcc5750396712b10e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:59:50.817

如果您能够为您的数据源创建 DSN，您可能会成功地使用[OPENROWSET](http://msdn.microsoft.com/en-us/library/ms190312.aspx)直接从中选择数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-06T13:26:51.033

请参阅此线程： [从 PostgreSQL 迁移到 SQL Server 2008](https://stackoverflow.com/questions/3711028/migrating-from-postgres-to-sql-server-2008)

编辑 ProviderDescriptors.xml 文件时，如果您安装了 64 位版本的 SQL Server，请务必更改位于 Program Files (x86) 树中的那个。

# c# - 如何为richTextBox 中的不同文本着色？

> ID：12891481
> 
> 赞同：0
> 
> 时间：2012-10-15T08:02:25.777
> 
> 标签：c#, winforms

> **可能重复：**
> [如何为richTextBox 中的特定文本部分着色？](https://stackoverflow.com/questions/12854031/how-do-i-color-a-specific-part-of-text-in-a-richtextbox)

我有这个功能：

```
private void richTextBoxLoadKeys(Dictionary<string, List<string>> dictionary, string FileName)
        {
            string line = System.String.Empty;
            using (StreamReader sr = new StreamReader(keywords))
            {
                while ((line = sr.ReadLine()) != null)
                {
                    string[] tokens = line.Split(',');
                    dictionary.Add(tokens[0], tokens.Skip(1).ToList());
                    richTextBox2.AppendText("Url: " + tokens[0] + " --- " + "Localy KeyWord: " + tokens[1]+Environment.NewLine);
                    AppendText(richTextBox2, "Url: ", Color.Red);
                }
                sr.Close();
            }
        } 
```

我有函数AppendText：

```
public void AppendText(RichTextBox box, string text, Color color)
        {
            box.SelectionStart = box.TextLength;
            box.SelectionLength = 0;
            box.SelectionColor = color;
            box.AppendText(text);
            box.SelectionColor = box.ForeColor;
        } 
```

在richTextBox 我有例如：

```
Url: http://www.google.com --- Localy KeyWord: google
Url: http://www.cnet.com --- Localy KeyWord: cnet
Url: http://www.g.com --- Localy KeyWord: g 
```

尝试将其着色为红色时的结果是，第一个 Url: 为黑色，然后后面的两个为红色，最后仅使用 Url: 为红色添加新行。

我想要做的是将 URL 用红色着色：它自己的链接用黄色 --- 用绿色表示 localy 关键字：用粉红色和 google 或 cnet 或 g 用蓝色。

我希望每行中文本的每个部分都采用另一种颜色。

解决了它：

```
void AppendText()
        {

            int len = this.richTextBox2.TextLength;
            int index = 0;
            int lastIndex = this.richTextBox2.Text.LastIndexOf("Url: ");

            while (index < lastIndex)
            {
                this.richTextBox2.Find("Url: ", index, len, RichTextBoxFinds.None);
                this.richTextBox2.SelectionColor = Color.Red;
                index = this.richTextBox2.Text.IndexOf("Url: ", index) + 1;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:30:20.500

解决了这个问题：

```
void AppendText(string text,Color color)
        {

            int len = this.richTextBox2.TextLength;
            int index = 0;
            int lastIndex = this.richTextBox2.Text.LastIndexOf(text);

            while (index < lastIndex)
            {
                this.richTextBox2.Find(text, index, len, RichTextBoxFinds.None);
                this.richTextBox2.SelectionColor = color;
                index = this.richTextBox2.Text.IndexOf(text, index) + 1;
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:44:04.297

你必须`Select`在设置之前打电话`SelectionColor`。下面是示例代码。

```
box.Select(0, 10);
box.SelectionColor = color; 
```

# c# - WPF 文本框绑定

> ID：12891482
> 
> 赞同：0
> 
> 时间：2012-10-15T08:02:32.643
> 
> 标签：c#, wpf, textbox, bind

我有一个名为 VoucherEntity 的类，包括一个名为“Customer”的属性，一个 CustomerEntity 类的对象，所以我有以下代码，

```
<TextBox Height="23" IsReadOnly="False" HorizontalAlignment="Stretch" Margin="124,48,174,0" Name="txt_customer" VerticalAlignment="Top" Text="{Binding Path=Customer.Name}" /> 
```

在 .cs 文件中，我有以下代码

```
_voucher = new VoucherEntity();
this.DataContext = _voucher; 
```

意思是，一开始Customer属性为null，点击按钮后，我会给_voucher的Customer属性一个CustomerEntity对象，然后希望TextBox能立即显示，但是失败了，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:07:05.063

如果您想排除视图中的更改，您应该通知视图有关更改。

因此，只需`INotifyPropertyChanged`在类中实现接口`VoucherEntity`并在设置 Customer 道具后触发`PropertyChanged`事件

```
public class VoucherEntity: INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void FirePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private CustomerEntity _customer;
    public CustomerEntity Customer
    {
        get {return _customer;}
        set
        {
            if (_customer != value)
            {
                _customer= value;
                FirePropertyChanged("Customer");
            }
        }
    }
} 
```

# vimeo - 如何链接到 vimeo 视频的高清版本

> ID：12891486
> 
> 赞同：3
> 
> 时间：2012-10-15T08:02:48.080
> 
> 标签：vimeo, fancybox-2

我正在使用链接在一个精美的盒子中播放我的 vimeo 视频

[https://vimeo.com/513](https://vimeo.com/513) ...但是它们出现在非高清版本中。我必须单击高清才能查看它们。

我如何链接到高清版本

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T08:15:12.033

这是来自[Vimeo 的常见问题解答](http://vimeo.com/help/faq/embedding#default_hd)

> Plus 和 PRO 用户不仅可以选择以高清格式嵌入他们的视频，还可以默认以高清格式观看这些视频。这是确保您的清晰高清视频在嵌入 Vimeo 时以全分辨率荣耀呈现的一种很好的方式。
> 
> 如果您希望所有视频都默认为高清，只需转到您的帐户设置并选择“视频”选项卡。在“源文件、移动设备和高清嵌入呢？”下 选择“尽可能以高清播放我的视频”，然后单击“保存为默认值”按钮。选中“另外，应用于现有视频”即可。
> 
> 否则，如果您想要将特定视频默认为高清模式，请单击视频剪辑页面上视频下方显示的“设置”按钮，然后选择“嵌入”选项卡。选中“嵌入时将此视频默认为高清质量”旁边的框，然后单击“保存更改”按钮。

看来您必须是 Plus 或 PRO 用户。如果是，应该有可以在帐户设置页面上控制的设置。

# asp-classic - 调用 recordCount 后出现 BOF 或 EOF 错误

> ID：12891488
> 
> 赞同：1
> 
> 时间：2012-10-15T08:02:56.643
> 
> 标签：asp-classic, vbscript

我必须调用`recordCount`函数来获取记录集的计数。但是一旦我调用`recordCount`函数，记录集就会失控。

```
...
Dim objRootDSE, strDNSDomain, adoCommand, adoConnection
Set adoCommand = CreateObject("ADODB.Command")
'Set adoRecordset = adoCommand.Execute
Set adoRecordset = Server.CreateObject ("ADODB.Recordset") 
adoRecordset.cursorType = 3
adoRecordset.CursorLocation = adUseClient 
adoRecordset = adoCommand.Execute
...

totalcnt = adoRecordset.recordCount

If totalcnt > 0 Then 
...
    Do until adoRecordset.EOF
        ' Retrieve values... But it fails because it seems adoRecordset is in EOF
        ... 
```

所以我使用`movefirst`并尝试检索值。

```
If adoRecordset.recordCount > 0 Then 
                                            adoRecordset.movefirst
    ... 
```

但是出现错误（以下由google翻译）

```
ADODB.Recordset 오류 '800a0bcd' 
BOF or EOF is True, or the current record has been deleted. Requested operation requires a current record. 
```

如果我不打电话`recordCount`，就没有问题。但我应该知道记录的数量。

整个代码是：

```
 <%
'On Error Resume next
 Dim objRootDSE, strDNSDomain, adoCommand, adoConnection
 Dim strBase, strFilter, strAttributes, strQuery, adoRecordset
 Dim strDN, strUser, strPassword, objNS, strServer
 Dim name,company,physicalDeliveryOfficeName

 Const ADS_SECURE_AUTHENTICATION = 1
 Const ADS_SERVER_BIND = 0

 ' Specify a server (Domain Controller).
 strServer = "my_ad_server_domain"

 ' Specify or prompt for credentials.
 strUser = "my_account"
 strPassword = "my_passwrd"

 ' Determine DNS domain name. Use server binding and alternate
 ' credentials. The value of strDNSDomain can also be hard coded.
 Set objNS = GetObject("LDAP:")
 Set objRootDSE = objNS.OpenDSObject("LDAP://" & strServer & "/RootDSE", _
      strUser, strPassword, _
      ADS_SERVER_BIND Or ADS_SECURE_AUTHENTICATION)
 strDNSDomain = objRootDSE.Get("defaultNamingContext")

 ' Use ADO to search Active Directory.
 ' Use alternate credentials.
 Set adoCommand = CreateObject("ADODB.Command")
 Set adoConnection = CreateObject("ADODB.Connection")
 adoConnection.Provider = "ADsDSOObject"
 adoConnection.Properties("User ID") = strUser
 adoConnection.Properties("Password") = strPassword
 adoConnection.Properties("Encrypt Password") = True
 adoConnection.Properties("ADSI Flag") = ADS_SERVER_BIND _
      Or ADS_SECURE_AUTHENTICATION
 adoConnection.Open "Active Directory Provider"
 Set adoCommand.ActiveConnection = adoConnection

 ' Search entire domain. Use server binding.
 strBase = "<LDAP://" & strServer & "/" & strDNSDomain & ">"

 ' Search for all users.
 strFilter = "(&(objectCategory=user)(ExADObjectStatus=10)(samaccountname=*"&"my_search_value"&"*))"

 ' Comma delimited list of attribute values to retrieve.
 strAttributes = "name,company,physicalDeliveryOfficeName"

 ' Construct the LDAP query.
 strQuery = strBase & ";" & strFilter & ";" _
      & strAttributes & ";subtree"

 ' Run the query.
 adoCommand.CommandText = strQuery
 adoCommand.Properties("Page Size") = 100
 adoCommand.Properties("Timeout") = 60
 adoCommand.Properties("Cache Results") = False
 Set adoRecordset = adoCommand.Execute

if not adoRecordset.EOF then 
    totalcnt = adoRecordset.recordCount 
    If totalcnt > 0 Then  
    Response.write 111
        Do until adoRecordset.EOF
            name = adoRecordset.Fields("name").Value
              company = adoRecordset.Fields("company").Value
              physicalDeliveryOfficeName = adoRecordset.Fields("physicalDeliveryOfficeName").Value
              Response.Write name & "<br/>"
              Response.Write company & "<br/>"
              Response.Write physicalDeliveryOfficeName
              adoRecordset.MoveNext
        Loop 
    end if 
end if 

 ' Clean up.
 adoRecordset.Close
 adoConnection.Close 
%> 
```

**它只显示一个记录结果。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:10:53.103

如错误所示，如果记录集中没有记录，则 recordCount 将失败。

您可以在代码块之前对此进行测试。试试这个：

```
if not adoRecordset.EOF then
    totalcnt = adoRecordset.recordCount
    If totalcnt > 0 Then 
        ...
        Do while not adoRecordset.EOF
        ...
        Loop
    end if
end if 
```

**编辑**：更正循环以测试**不是**adoRecordset.eof

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T08:35:41.257

您可以尝试从不同的角度面对问题。而不是试图修复内部`recordCount`属性（你不能）简单地自己计算记录：

```
totalcnt = 0
Do until adoRecordset.EOF
    totalcnt = totalcnt + 1
    adoRecordset.MoveNext
Loop

If totalcnt>0 Then
    adoRecordset.MoveFirst
    Do until adoRecordset.EOF
        name = adoRecordset.Fields("name").Value
        '...
        adoRecordset.MoveNext
    Loop
End If 
```

**更新**：看起来在那种特定情况下，MoveFirst 只是失败了，可能是因为它是 LDAP 而不是来自数据库的普通查询。为了一劳永逸地解决这个问题，您可以在迭代记录时填充自己的集合，然后尽可能多地使用该集合：

```
Dim oData, oField, tempArray
Set oData = Server.CreateObject("Scripting.Dictionary")
totalcnt = 0
For Each oField In adoRecordset.Fields
    oData.Add oField.Name, Array()
Next
Do until adoRecordset.EOF
    For Each oField In adoRecordset.Fields
        tempArray = oData(oField.Name)
        ReDim Preserve tempArray(UBound(tempArray) + 1)
        tempArray(UBound(tempArray)) = oField.Value
        oData(oField.Name) = tempArray
    Next
    totalcnt = totalcnt + 1
    adoRecordset.MoveNext
Loop
adoRecordset.Close

Dim x
If totalcnt>0 Then
    Response.Write("found total of " & totalcnt & " records<br />")
    For x=0 To totalcnt-1
        name = oData("name")(x)
        company = oData("company")(x)
        physicalDeliveryOfficeName = oData("physicalDeliveryOfficeName")(x)
        Response.Write name & "<br/>"
        Response.Write company & "<br/>"
        Response.Write physicalDeliveryOfficeName
    Next
End If 
```

# dotnetnuke - DNN：启用 SSL 的站点，但主机菜单不起作用

> ID：12891489
> 
> 赞同：0
> 
> 时间：2012-10-15T08:03:01.147
> 
> 标签：dotnetnuke

我有一个配置为安全的 dnn 网站。每当我访问主机菜单的安全页面时使其安全后，它会引发错误并且我无法访问主机安全页面。

请尽快帮助我！

错误详情 ：

方法：DotNetNuke.Entities.Portals.PortalSettings.GetPortalSettings StackTrace：消息：System.Exception：未处理的错误：---> System.NullReferenceException：对象引用未设置为对象的实例。在 DotNetNuke.Entities.Portals.PortalSettings.GetPortalSettings(Int32 TabId, PortalAliasInfo objPortalAliasInfo) 在 DotNetNuke.Entities.Portals.PortalSettings..ctor(Int32 tabId, PortalAliasInfo objPortalAliasInfo) 在 DotNetNuke.HttpModules.UrlRewriteModule.OnBeginRequest(Object s, EventArgs e)在 System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 在 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) --- 内部异常堆栈跟踪结束 --- 谢谢，Kusum

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:08:26.020

1.  尝试重新安装您的证书
2.  清除 Web 浏览器缓存
3.  重新启动站点（在您的 web.config 文件中添加一个空格并保存）

# asp.net - IE10 中缺少 webresource.axd

> ID：12891490
> 
> 赞同：1
> 
> 时间：2012-10-15T08:03:03.310
> 
> 标签：asp.net, webresource.axd, internet-explorer-10

我有以下问题。我们的 LIVE 环境网站在 IE10 中无法运行。

出现如下错误：“无效的 __doPostBack 函数”或“WebForm_DoPostBackWithOptions 未定义”。

我查看了页面源代码，发现该页面的呈现方式不同。例如，缺少 src 等于“webresource.axd...”的脚本。表单上还有一些属性，例如 onsubmit="javascript:return WebForm_OnSubmit();" 并且 onkeypress="javascript:return WebForm_FireDefaultButton(event, 'lbFind')" 也不会呈现。

这仅在 IE10 中重现，并且适用于所有其他浏览器（Chrome、Firefox、IE8-IE9 等）。在测试环境中，我们的网站在 IE10 中运行。ASP.Net 版本是 4.0。

你能建议什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:08:55.100

这可能会对您有所帮助，但可能不会...阅读一下...

[http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

# ios - 在 iOS 应用程序上存储 secretAccessKey 的安全方法

> ID：12891492
> 
> 赞同：2
> 
> 时间：2012-10-15T08:03:04.093
> 
> 标签：ios, security, amazon-s3

我正在使用 amazon S3 提供 IAP 内容。

是否有一种“安全”的方式将 secretAccessKey 存储在我的应用程序中，这样黑客就无法使用它来获取文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:18:43.120

做到这一点的最好方法是根本不提供正常的秘密访问密钥。

首先创建一个只能访问所需内容的 IAM 用户，这样即使有人确实获得了凭据，他们也只能访问您想要的内容（例如，从特定的 S3 存储桶获取文件，但不能修改它们）

当 iOS 应用程序需要访问 S3 文件时，它会连接到您控制的 Web 服务器。该 Web 服务器使用[STS](http://docs.amazonwebservices.com/STS/latest/APIReference/Welcome.html?r=3044)生成一组凭据，这些凭据将在所需的时间后过期。这些看起来像普通的 aws 凭证（访问密钥、秘密、会话 ID），但最终会过期。

[亚马逊提供了这些代币自动售货机](https://github.com/amazonwebservices/aws-tvm-identity)的一些参考实现，并有[一篇文章](http://aws.amazon.com/articles/4611615499399490)更详细地讨论了设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:09:58.647

您是否使用钥匙串框架寻找合适的方法？[iOS 的钥匙串服务任务](http://developer.apple.com/library/ios/#documentation/Security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)

# c++ - 使用 cin.eof()

> ID：12891496
> 
> 赞同：1
> 
> 时间：2012-10-15T08:03:16.620
> 
> 标签：c++, cin

我有一些代码，我想使用 cin.eof() 来阻止我的程序读取输入。我正在考虑这样做：

```
char array[10]
while(!cin.eof())
{
  for(int i = 0; i < 10; i++)
  {
    cin >> array[i];
  }
} 
```

代码还在继续。但是，当我单击“\n”时，会输出我的输出。当我单击 cntrl + d 时，（在 UNIX 终端上）程序再次执行输出，然后继续结束。当我只键入一次 cntrl + d 时，如何让我的程序停止在换行符处读取并打印我的输出？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:11:14.997

首先，`cin.eof()`在输入失败之前不做任何有用的事情。你永远不想在循环的顶部使用它。

其次，我不太清楚您要做什么。就像是：

```
std::string line;
while ( std::getline( std::cin, line ) ) {
    //  ...
} 
```

也许？这会将一行文本读入变量`line`，直到文件结束；当您遇到文件结尾时，输入将失败，您将退出循环。

# c# - asp.net 网站构建良好，但发布给出错误

> ID：12891500
> 
> 赞同：2
> 
> 时间：2012-10-15T08:03:59.863
> 
> 标签：c#, asp.net, .net

我正在使用ablecommerce asp.net CMS 开发asp.net 网站。我正在尝试建立网站并且它有效。但是当我尝试在本地发布网站以将其部署在 IIS 上时，我开始收到此页面不可用等错误。我看到未找到页面的错误实际上位于某些 dll 中并添加了引用。

错误是这样的：

```
Error   5   The type or namespace name 'admin_orders_create_creditcardpaymentform_ascx' does not exist in the namespace 'ASP' (are you missing an assembly reference?)  \Final Code\WebSite\Admin\Orders\Create\CreateOrder4.aspx.cs 
```

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-20T12:41:16.097

从项目中删除`bin folder`，然后尝试发布项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-20T19:41:49.940

关闭项目，删除临时文件，然后重试并发布代码，如果这不起作用，请检查您是否有 website.publishprog 文件，如果您有然后删除该文件，然后再次尝试发布网站。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-18T07:45:49.533

如果您使用路由（我认为也有 cms）而不是路由新页面。首先你关闭预编译模式检查它，如果错误仍然存​​在检查路由设置。

# ruby-on-rails - 将 SSL 证书添加到 rails 站点，apache2 乘客

> ID：12891501
> 
> 赞同：2
> 
> 时间：2012-10-15T08:04:04.373
> 
> 标签：ruby-on-rails, ssl, apache2, ssl-certificate, passenger

我有一个运行 Ubuntu 10.04、apache2 和乘客的 linux 服务器。它是一个 1and1 软件包，并附带一个 SSL 证书，其中包含 /etc/ssl 中存在的各种 .crt 和 .key 文件。

我在这台服务器上托管了 3 个应用程序，其中只有 1 个需要 SSL 加密。所有应用程序都作为 SubURI 运行，例如 domain.com/app1、domain.com/app2 等，并在 /etc/apache2/sites-enabled 中创建了符号链接。

我怎样才能让 app3 使用 SSL 证书，同时仍保留在服务器的子 URI 下？

提前致谢！

apache2.conf

```
<VirtualHost *:80>
ServerName domain.eu
DocumentRoot /var/www
<Directory /var/www>
Allow from all
</Directory>

RailsBaseURI /app1
<Directory /apps/app1/public>
Options -MultiViews
</Directory>

RailsBaseURI /app2
<Directory /apps/app2/public>
Options -MultiViews
</Directory>

RailsBaseURI /app3
<Directory /apps/app3/public>
Options -MultiViews
</Directory> 
```

# asp.net - 在 asp.net 和 Join 语句中连接到 Access 数据库

> ID：12891505
> 
> 赞同：0
> 
> 时间：2012-10-15T08:04:16.353
> 
> 标签：asp.net, .net, asp.net-mvc, ms-access

假设有一个带有 Access 数据库的 Asp.ne5 3.5 Web 应用程序。数据库有两个这样的表：

![在此处输入图像描述](../Images/74d898d8fccf3948bf9176a5379b5527.png)

在某些页面中，我可以使用“page.users.identity.name”获取用户名。在这个应用程序中，每个用户都可以创建很多页面。我的问题是如何编写语句来获取使用特定用户名（加入的 Group_ID）创建的页面。

注意：这是我尝试过的，我得到“错误读取数据库”。

```
SELECT Pages.* FROM 
Pages INNER JOIN Users ON Pages.Group_ID = Users.Group_ID
WHERE Users.Username = page.users.identity.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:32:17.627

您是否尝试过使用参数化查询：

```
public ActionResult SomeAction()
{
    // get the username of the currently connected user
    string username = User.Identity.Name;

    string cs = WebConfigurationManager.ConnectionStrings["MyConnStr"].ConnectionString;
    using (var conn = new OleDbConnection(cs))
    using (var cmd = conn.CreateCommand())
    {
        conn.Open();
        var sql = 
            @"SELECT Pages.* FROM Pages 
              INNER JOIN Users 
              ON Pages.Group_ID = Users.Group_ID
              WHERE Users.Username = ?";
        cmd.CommandText = sql;
        cmd.Parameters.AddWithValue("Username", username);
        using (var reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                ... 
            }
        }
    }

    ...

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:31:09.390

试试这个查询，

```
SELECT Pages.* FROM 
Pages,Users where Pages.Group_ID = Users.Group_ID
and Users.Username = page.users.identity.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T11:05:55.700

我错过了 page.users.identity.name 语句中的单引号“'”。现在应该是这样的：

昏暗持续为 string="'"

```
"SELECT Pages.* FROM 
Pages INNER JOIN Users ON Pages.Group_ID = Users.Group_ID
WHERE Users.Username ='" &  page.users.identity.name & lasts 
```

# security - Windows 8 上的 Wmi 安全性

> ID：12891508
> 
> 赞同：1
> 
> 时间：2012-10-15T08:04:35.733
> 
> 标签：security, windows-8, wmi, remote-access

我有一些关于 Windows 8 上的 WMI 脚本的问题。更准确地说，是从 Win7（不相关）到 Windows 8 的远程连接。请注意，当客户端计算机运行 Windows 7 时，不会发生以下问题。

第一个是获取有关该机器上当前共享的数据。具体来说，我正在尝试获取共享的 Path 属性，即本地路径。

在 Windows 7 中它可以完美运行，但在 Windows 8 中它返回 null（使用远程计算机上的 wbemtest 运行）。

首先我认为WMI系统有问题。然后我直接在win8机器上运行了同样的查询。这返回了共享的实际本地路径。这让我相信那台机器上的 WMI 安全存在问题。

我在 win8 上使用 WMI 的另一个问题是它不允许我以管理员身份运行，即使用于登录的用户是管理员。

关于win8机器上的安全设置，我逐渐降低了，试了一下我能操作的准确位置。我已经达到了每个人都可以访问的级别，因此它是最低的安全性。希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:00:10.487

在围绕 Wmimgmt.msc 和 dcomcnfg 玩了几天安全之后，我终于找到了一种在远程计算机上以管理员身份运行 wmi 的方法。虽然这不是我所做的，但我发现这很好用：我激活了管理员帐户：net user administrator /active:yes。然后我输入用户帐户并为管理员帐户设置密码。然后我打开 Wmimgmt.msc 并设置允许根节点和 cimv2 节点的所有安全性。在此 Wmi 远程（以管理员身份登录）后作为一个魅力

# mysql - INSERT / UPDATE SQL 随机且唯一的 VARCHAR

> ID：12891510
> 
> 赞同：0
> 
> 时间：2012-10-15T08:04:45.840
> 
> 标签：mysql, random, insert, unique, varchar

我需要能够`INSERT/UPDATE UNIQUE RANDOM UTF8 ALPHANUMERICAL VARCHAR 55`进入一个名为“key”的表字段。

找不到任何好的查询示例，有人可以给我看或链接我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:27:28.553

这个答案是基于mysql的。

此选择将创建 55 个字符长的随机字符串：

```
select substr(concat(md5(rand()),md5(rand())),1,55); 
```

要填充您的表格列，您可能想尝试：

```
create table example (keycol varchar(55)); 
```

**插入示例 (keycol) 值 (substr(concat(md5(rand()),md5(rand())),1,55));**

结果将是：

```
select keycol from example;

+---------------------------------------------------------+
| keycol                                                  |
+---------------------------------------------------------+
| 4517f4be669301a4a529b53fc18d646dec42d4d07d911d33a67c863 | 
| 3caa1c98f0f9ee39515aa6f4ddb3f84fa41abd5392f610c5d24bcd9 | 
| 8e52cb4ce29e58514671c9b68f19832f26ddf53f277621ac420bd2e | 
| 3adcccfb6cb729ce1c0a14fb75f6fd54f58992dc0751527c969e007 | 
| c28c5879589dc90f4fb0963673e5668fa5789d325423ba043e0243b | 
| 8f7a2af97d73261008f0d0d7249480fde56a3a91f2ce6e8bf0b0070 | 
| ff4f74f25b92da3eaab282218c23a75d4cfa77c8f8bfdf74d7ebdf9 | 
+---------------------------------------------------------+ 
```

# java - Java - getResourceAsStream 不起作用（Eclipse）

> ID：12891512
> 
> 赞同：2
> 
> 时间：2012-10-15T08:04:47.647
> 
> 标签：java, inputstream, outputstream

我尝试提取附加在我的“src”文件夹中的文件。

所以我想从文件中获取 Inputstream 并将其写入例如 c:/file.txt

我的代码：

```
InputStream is = Main.class.getResourceAsStream("test.txt");

OutputStream os = new FileOutputStream("c:/file.txt");
byte[] buffer = new byte[4096];
int length;
while ((length = is.read(buffer)) > 0) {
    os.write(buffer, 0, length);
}
os.close();
is.close(); 
```

错误：

> 类型不匹配：Eclipse 无法从 java.io.InputStream 转换为 org.omg.CORBA.portable.InputStream

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T08:06:49.400

删除此导入

```
import org.omg.CORBA.portable.InputStream; 
```

从你的班级，并添加

```
import java.io.InputStream 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:06:58.430

你输入错了`InputStream`。

尝试导入`java.io.InputStream`而不是`org.omg.CORBA.portable.InputStream`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T08:07:05.997

删除导入`org.omg.CORBA.portable.InputStream`并将其更改为 `java.io.InputStream`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T08:07:51.517

您导入了错误的类`org.omg.CORBA.portable.InputStream`。正确的类是`java.io.InputStream`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T08:08:06.697

您是否导入了： -`org.omg.CORBA.portable.InputStream`而不是`java.io.InputStream`？

检查一下，如果你有第一个导入，用后面的替换它。

# node.js - node.js 中的 mysql 模块不适用于我的情况

> ID：12891513
> 
> 赞同：-1
> 
> 时间：2012-10-15T08:04:52.443
> 
> 标签：node.js, node-mysql

所以我有下一个测试代码，我在[这里找到了](http://net.tutsplus.com/tutorials/javascript-ajax/node-js-for-beginners/)

```
// Include http module,
var http = require('http'),
// And mysql module you've just installed.
   mysql = require("mysql");
// Create the connection.
// Data is default to new mysql installation and should be changed according to your configuration.
var connection = mysql.createConnection({
   user: "root",
   password: "pass",
   database: "db_name"
});
// Create the http server.
http.createServer(function (request, response) {
   // Attach listener on end event.
   request.on('end', function () {
      // Query the database.
      connection.query('SELECT * FROM your_table;', function (error, rows, fields) {
         response.writeHead(200, {
            'Content-Type': 'x-application/json'
         });
         // Send data as JSON string.
         // Rows variable holds the result of the query.
         response.end(JSON.stringify(rows));
      });
   });
// Listen on the 8080 port.
}).listen(8080); 
```

我下载了 mysql 模块，当然安装了 mysql，然后运行下一个脚本，但没有得到任何结果。你能给我建议我做错了什么吗？

当我试图加载

```
http://localhost:8080/ 
```

浏览器尝试加载页面几分钟，也没有结果。

谢谢。

**更新** ![在此处输入图像描述](../Images/beb0822b4446bdc7685e128d927e7ee6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T12:01:28.517

我想你忘记了

```
connection.connect() 
```

我现在正在使用这些，它对我来说很好。

```
// Include http module,
var http = require('http'),
// And mysql module you've just installed.
   mysql = require("mysql");
// Create the connection.
// Data is default to new mysql installation and should be changed according to your configuration.
var connection = mysql.createConnection({
   host: "localhost",
   user: "root",
   password: "pass",
   database: "db_name"
});
connection.connect();
// Create the http server.
http.createServer(function (request, response) {
   // Attach listener on end event.
   request.on('end', function () {
      // Query the database.
      connection.query('SELECT * FROM your_table;', function (error, rows, fields) {
         response.writeHead(200, {
            'Content-Type': 'x-application/json'
         });
         // Send data as JSON string.
         // Rows variable holds the result of the query.
         response.end(JSON.stringify(rows));
      });
   });
// Listen on the 8080 port.
}).listen(8080); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T06:40:13.757

@石川耀西

使用回调

```
// Include http module
var http = require('http')
// And mysql module you've just installed.
 mysql = require("mysql");

 var Query1 = "SELECT * from Tablexyz WHERE xx = 'doh'";

   var connection = mysql.createConnection({
    host     : 'host',
    user     : 'dbuser',
    password : "pword",
    database : 'database',
    });

   connection.connect();

   function getData(callback){
   console.log('in getData');
    connection.query( Query1 , function(err, rows ,fields) {
    if (err) {
        return callback(new Error("An error has occured" + err));
    }
    if (rows.length > 0){
        callback( rows);
    }

});
}

// Create the http server.
http.createServer(function (request, response) {
// Attach listener on end event.

  // Query the database.
 getData(function (rows , err) {
    if (err) {
       console.log(err);
    }
     else{
         response.writeHead(200, {"Content-Type": "text/html"});
         response.write( 'query: ' + JSON.stringify( rows ) );
         response.end();
     }
});
   // Listen on the 4001 port.
   }).listen(4001); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T06:22:30.207

很少有以前的答案可以帮助你

[Express.JS + Node-Mysql 和每个 http 请求 1 个连接](https://stackoverflow.com/questions/14630669/express-js-node-mysql-and-1-connection-per-http-request?rq=1)

[如何在nodejs中启动http服务器之前查询mysql](https://stackoverflow.com/questions/17873022/how-to-query-mysql-before-starting-http-server-in-nodejs)

[从 db 获取简单信息到 node.js http 服务器响应](https://stackoverflow.com/questions/6081117/get-simple-info-from-db-into-a-node-js-http-server-response/6081551#6081551)

在 mysql [Node.js MySQL 中使用池需要持久连接](https://stackoverflow.com/questions/17015590/node-js-mysql-needing-persistent-connection?rq=1)

一个更复杂的解决方案将您的代码分成文件并将数据库代码放在 db.js 或响应处理程序或路由器中。

我的代码正在使用池。

保存到五个文件然后运行 ​​npm install

例如（请原谅可怕的格式）

```
 // requestHandlers.js
    // request handler with mysql code

    var mysql = require("mysql");
    var Query1 = "SELECT * from Tablexyz WHERE xx = 'doh'";

    var body = '<html>'+
'<head>'+
'<meta http-equiv="Content-Type" content="text/html; '+
'charset=UTF-8" />'+
'</head>'+
'<body>'+
'<h1> Query </h1>';

    var body1 = '</body>'+
'</html>';

    var pool = mysql.createPool({
    host     : 'host',
    user     : 'dbuser',
    password : "pword",
    database : 'database',
    connectionLimit: 10,
    queueLimit: 10
     });

    function qquery(callback){
    console.log('in qquery');
        pool.getConnection(function(err, connection) {
        pool.query( Query1 , function(err, rows ,fields) {
            if (err) {
                    return callback(new Error("An error has occured" + err));
                }
            if (rows.length > 0){
             callback( rows);
             connection.release();          
            }
        });
        });
        }

    function start(response) {
    console.log("Request handler 'start' was called.");

    qquery( function (rows , err) {
             if (err) {
                console.log(err);
             }
             else{
                 console.log(rows);
                 response.writeHead(200, {"Content-Type": "text/html"});
                             response.write(body);
                 response.write( 'query: ' + JSON.stringify( rows ) );
                 response.write(body1);
                             response.end();
             }
    });

} 
```

出口.开始=开始；

```
 ///////////////////////////////////- new file
    //server.js

    var http = require("http");
    var url = require("url");

    function start(route, handle) {
     function onRequest(request, response) {
    var pathname = url.parse(request.url).pathname;
    console.log("Request for " + pathname + " received.");
    route(handle, pathname, response);
     }
     http.createServer(onRequest).listen(8888);
     console.log("Server has started.");
    }

    exports.start = start;
  ///////////////////////////////////-new file
  // router.js

  function route(handle, pathname, response) {
   console.log("About to route a request for " + pathname);
   if (typeof handle[pathname] === 'function') {
    handle[pathname](response);
   } else {
    console.log("No request handler found for " + pathname);
    response.writeHead(404, {"Content-Type": "text/plain"});
    response.write("404 Not found");
    response.end();
   }
  }

  exports.route = route;
  ///////////////////////////////////- new file
  //index.js

  var server = require("./server");
  var router = require("./router");
  var requestHandlers = require("./requestHandlers");
  var handle = {}
  handle["/"] = requestHandlers.start;
  handle["/start"] = requestHandlers.start;
  handle["/upload"] = requestHandlers.upload;
  server.start(router.route, handle);

  ///////////////////////////////////- new file
  //package.json
   {
     "name": "application-name",
     "version": "0.0.1",
     "private": true,
     "scripts": {
     "start": "node app.js"
    },
     "dependencies": 
    {
      "express": "3.4.0",
      "jade": "*",
      "stylus": "*",
      "mysql": "*"
     } 
```

}

# eclipse - Xtext MWE2 工作流程的键盘快捷键

> ID：12891514
> 
> 赞同：0
> 
> 时间：2012-10-15T08:04:55.077
> 
> 标签：eclipse, keyboard-shortcuts, xtext

是否有可能通过键盘快捷键启动/运行 MWE2 工作流程以生成 Xtext 工件，尤其是在 Mac OS X 下？我能看到的唯一动作是通过上下文菜单/鼠标右键单击 mwe2 文件。此操作随后被列为运行历史记录的条目，但没有任何快捷方式可以从该运行历史记录开始条目。我发现的唯一方法是通过整个菜单结构：Ctrl-F2（关注菜单栏）/“R”（关注“运行”菜单）/5x 向下箭头（选择“运行历史记录...”）/1x 箭头对（打开子菜单）/启动运行历史记录中的条目。但那是 IMO 太多的击键。有没有更简单的解决方案？

亲切的问候多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:59:08.727

已解决：塞巴斯蒂安的回答是正确的......但我找到了一个完美的解决方案。请记住，如果您在包含打开的语法文件的编辑器中，目标是按键盘快捷键生成工件。然后使用该语法的单元测试切换到编辑器，再次击键并执行该单元测试。

很长一段时间以来，我在 Preferences / General / Keys 中将 CMD-F12 定义为“Rerun JUnit Test”，因此第二个目标已经实现：可以通过选择类名来运行 xtend 类中定义的所有 JUnit 测试并点击Alt-CMD-XT (Run as JUnit Test). 之后，可以使用上面提到的键绑定重新运行该 JUnit 测试。

为了实现第一个目标（这是该问题的最初原因），我为 Xtext 项目本身配置了运行/调试启动配置！如果活动编辑器中的文件不能作为其他东西运行（JUnit 测试、Java 应用程序、Applet 等），则可以使用这样的启动配置。此行为由 Preferences / Run/Debug / Launching 控制：有一个选项对于“如果无法启动”，则为“启动相关项目”。活动编辑器中的 Xtext 语法文件“不可启动”。

项目启动配置被创建为项目的属性（右键单击项目或在选定项目上按 Alt-Enter）。有一个“运行/调试设置”部分可以为项目创建新的启动配置。使用与自动创建的 MWE2 启动配置相同的值（请参阅您的运行配置..."）

完成这些步骤后，可以在语法编辑器和单元测试文件之间切换并使用 (Shift)CMD-F11 (Run/Debug) 和 CMD-F12 (Rerun JUnit Test) ！

# c# - 数学计算检索两点之间的角度？

> ID：12891516
> 
> 赞同：14
> 
> 时间：2012-10-15T08:04:59.313
> 
> 标签：c#, math, distance, angle

> **可能重复：**
> [如何计算两点之间相对于水平轴的角度？](https://stackoverflow.com/questions/7586063/how-to-calculate-the-angle-between-two-points-relative-to-the-horizontal-axis)

我一直在寻找这个很久了，它真的很烦我，所以我决定只是问......

假设我有两个点（即 x1，y1 和 x2，y2），我想计算这两个点之间的角度，假设当 y1 == y2 和 x1 > x2 时，角度是 180 度...

我有以下我一直在使用的代码（使用高中的知识），但我似乎无法产生预期的结果。

```
float xDiff = x1 - x2;
float yDiff = y1 - y2;
return (float)Math.Atan2(yDiff, xDiff) * (float)(180 / Math.PI); 
```

先谢谢了，我很沮丧...

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-15T09:12:41.133

根据我收集到的信息，您希望保留以下内容：

*   水平线：`P1 -------- P2`=> 0°
*   水平线：`P2 -------- P1`=> 180°

## 顺时针旋转水平线

你说，你希望角度顺时针方向增加。

将这条线旋转`P1 -------- P2`到`P1`上方`P2`，因此角度必须为 90°。

但是，如果我们朝相反的方向旋转，`P1`则会在下方`P2`且角度为 -90° 或 270°。

## 与`atan2`

**依据**：考虑`P1`为原点，测量`P2`相对于原点的角度，即可`P1 -------- P2`正确屈服`0`。

```
float xDiff = x2 - x1;
float yDiff = y2 - y1;
return Math.Atan2(yDiff, xDiff) * 180.0 / Math.PI; 
```

但是，`atan2`让我们在 CCW 方向上增加角度。绕原点逆时针方向旋转，`y`经过以下值：

*   y = 0
*   y > 0
*   y = 0
*   y < 0
*   y = 0

这意味着，我们可以简单地反转符号`y`来翻转方向。但是因为C#的坐标是从上往下递增的，所以在计算的时候符号已经反转了`yDiff`。

# android - 如何以编程方式更改 android 中位图的对比度？

> ID：12891520
> 
> 赞同：21
> 
> 时间：2012-10-15T08:05:14.000
> 
> 标签：android, image-processing, bitmap, contrast

我想以编程方式更改位图的对比度。直到现在我已经尝试过了。

```
private Bitmap adjustedContrast(Bitmap src, double value)
    {
        // image size
        int width = src.getWidth();
        int height = src.getHeight();
        // create output bitmap
        Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());
        // color information
        int A, R, G, B;
        int pixel;
        // get contrast value
        double contrast = Math.pow((100 + value) / 100, 2);

        // scan through all pixels
        for(int x = 0; x < width; ++x) {
            for(int y = 0; y < height; ++y) {
                // get pixel color
                pixel = src.getPixel(x, y);
                A = Color.alpha(pixel);
                // apply filter contrast for every channel R, G, B
                R = Color.red(pixel);
                R = (int)(((((R / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
                if(R < 0) { R = 0; }
                else if(R > 255) { R = 255; }

                G = Color.green(pixel);
                G = (int)(((((G / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
                if(G < 0) { G = 0; }
                else if(G > 255) { G = 255; }

                B = Color.blue(pixel);
                B = (int)(((((B / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
                if(B < 0) { B = 0; }
                else if(B > 255) { B = 255; }

                // set new pixel color to output bitmap
                bmOut.setPixel(x, y, Color.argb(A, R, G, B));
            }
        }
        return bmOut;
    } 
```

但这并没有按预期工作。请帮助我或提供任何其他解决方案来实现这一目标。提前致谢。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-07-26T17:36:27.520

这是完整的方法：

```
/**
 * 
 * @param bmp input bitmap
 * @param contrast 0..10 1 is default
 * @param brightness -255..255 0 is default
 * @return new bitmap
 */
public static Bitmap changeBitmapContrastBrightness(Bitmap bmp, float contrast, float brightness)
{
    ColorMatrix cm = new ColorMatrix(new float[]
            {
                contrast, 0, 0, 0, brightness,
                0, contrast, 0, 0, brightness,
                0, 0, contrast, 0, brightness,
                0, 0, 0, 1, 0
            });

    Bitmap ret = Bitmap.createBitmap(bmp.getWidth(), bmp.getHeight(), bmp.getConfig());

    Canvas canvas = new Canvas(ret);

    Paint paint = new Paint();
    paint.setColorFilter(new ColorMatrixColorFilter(cm));
    canvas.drawBitmap(bmp, 0, 0, paint);

    return ret;
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-15T08:47:22.747

尝试这个。您的代码不起作用，因为您只创建了一个可变位图，并且如果我没记错的话，没有将源位图的图像复制到可变位图。

希望能帮助到你 ：）

```
private Bitmap adjustedContrast(Bitmap src, double value)
{
    // image size
    int width = src.getWidth();
    int height = src.getHeight();
    // create output bitmap

    // create a mutable empty bitmap
    Bitmap bmOut = Bitmap.createBitmap(width, height, src.getConfig());

    // create a canvas so that we can draw the bmOut Bitmap from source bitmap
    Canvas c = new Canvas();
    c.setBitmap(bmOut);

    // draw bitmap to bmOut from src bitmap so we can modify it
    c.drawBitmap(src, 0, 0, new Paint(Color.BLACK));

    // color information
    int A, R, G, B;
    int pixel;
    // get contrast value
    double contrast = Math.pow((100 + value) / 100, 2);

    // scan through all pixels
    for(int x = 0; x < width; ++x) {
        for(int y = 0; y < height; ++y) {
            // get pixel color
            pixel = src.getPixel(x, y);
            A = Color.alpha(pixel);
            // apply filter contrast for every channel R, G, B
            R = Color.red(pixel);
            R = (int)(((((R / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
            if(R < 0) { R = 0; }
            else if(R > 255) { R = 255; }

            G = Color.green(pixel);
            G = (int)(((((G / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
            if(G < 0) { G = 0; }
            else if(G > 255) { G = 255; }

            B = Color.blue(pixel);
            B = (int)(((((B / 255.0) - 0.5) * contrast) + 0.5) * 255.0);
            if(B < 0) { B = 0; }
            else if(B > 255) { B = 255; }

            // set new pixel color to output bitmap
            bmOut.setPixel(x, y, Color.argb(A, R, G, B));
        }
    }
    return bmOut;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-11T13:07:29.013

我们可以用它`seek bar`来调整对比度。

[![在此处输入图像描述](../Images/17c3d0735b104f3d9666f9bbd3421814.png)](https://i.stack.imgur.com/tn5z4.png)

**MainActivity.java：**

```
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.ColorMatrix;
import android.graphics.ColorMatrixColorFilter;
import android.graphics.Paint;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.widget.ImageView;
import android.widget.SeekBar;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity {

    ImageView imageView;
    SeekBar seekbar;
    TextView textView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        imageView = (ImageView) findViewById(R.id.image);
        textView = (TextView) findViewById(R.id.label);

        seekbar = (SeekBar) findViewById(R.id.seekbar);
        seekbar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            @Override
            public void onProgressChanged(SeekBar seekBar, int progress, boolean b) {
                imageView.setImageBitmap(changeBitmapContrastBrightness(BitmapFactory.decodeResource(getResources(), R.drawable.lhota), (float) progress / 100f, 1));
                textView.setText("Contrast: "+(float) progress / 100f);
            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {}

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {}
        });

        seekbar.setMax(200);
        seekbar.setProgress(100);
    }

    public static Bitmap changeBitmapContrastBrightness(Bitmap bmp, float contrast, float brightness) {
        ColorMatrix cm = new ColorMatrix(new float[]
                {
                        contrast, 0, 0, 0, brightness,
                        0, contrast, 0, 0, brightness,
                        0, 0, contrast, 0, brightness,
                        0, 0, 0, 1, 0
                });

        Bitmap ret = Bitmap.createBitmap(bmp.getWidth(), bmp.getHeight(), bmp.getConfig());

        Canvas canvas = new Canvas(ret);

        Paint paint = new Paint();
        paint.setColorFilter(new ColorMatrixColorFilter(cm));
        canvas.drawBitmap(bmp, 0, 0, paint);

        return ret;
    }
} 
```

**activity_main.java：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <ImageView
        android:id="@+id/image"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/label"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="8dp"
        android:textAppearance="@android:style/TextAppearance.Holo.Medium" />

    <SeekBar
        android:id="@+id/seekbar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-04-19T16:47:10.607

这是一个 Renderscript 实现（[来自 Gradle 示例项目](http://tools.android.com/tech-docs/new-build-system)）

ip.rsh

```
#pragma version(1)
#pragma rs java_package_name(your.app.package) 
```

对比.rs

```
#include "ip.rsh"

static float brightM = 0.f;
static float brightC = 0.f;

void setBright(float v) {
    brightM = pow(2.f, v / 100.f);
    brightC = 127.f - brightM * 127.f;
}

void contrast(const uchar4 *in, uchar4 *out)
{
#if 0
    out->r = rsClamp((int)(brightM * in->r + brightC), 0, 255);
    out->g = rsClamp((int)(brightM * in->g + brightC), 0, 255);
    out->b = rsClamp((int)(brightM * in->b + brightC), 0, 255);
#else
    float3 v = convert_float3(in->rgb) * brightM + brightC;
    out->rgb = convert_uchar3(clamp(v, 0.f, 255.f));
#endif
} 
```

爪哇

```
private Bitmap changeBrightness(Bitmap original RenderScript rs) {
    Allocation input = Allocation.createFromBitmap(rs, original);
    final Allocation output = Allocation.createTyped(rs, input.getType());
    ScriptC_contrast mScript = new ScriptC_contrast(rs);
    mScript.invoke_setBright(50.f);
    mScript.forEach_contrast(input, output);
    output.copyTo(original);
    return original;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-05-08T09:48:39.043

> 假设 - ImageView 用于显示位图

我对鲁斯兰的回答做了更多的改进

我们可以处理ImageView的**颜色过滤器**，而不是每次都替换**位图（如果您使用搜索栏，这会变慢）。**

 **```
float contrast;
float brightness = 0;
ImageView imageView;

// SeekBar ranges from 0 to 90
// contrast ranges from 1 to 10  
mSeekBarContrast.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
        @Override
        public void onProgressChanged(SeekBar seekBar, int i, boolean b) {
            contrast = (float) (i + 10) / 10;
            // Changing the contrast of the bitmap
            imageView.setColorFilter(getContrastBrightnessFilter(contrast,brightness));
        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {

        }
});

ColorMatrixColorFilter getContrastBrightnessFilter(float contrast, float brightness) {
    ColorMatrix cm = new ColorMatrix(new float[]
            {
                    contrast, 0, 0, 0, brightness,
                    0, contrast, 0, 0, brightness,
                    0, 0, contrast, 0, brightness,
                    0, 0, 0, 1, 0
            });
    return new ColorMatrixColorFilter(cm);
} 
```

PS - 使用此方法也可以更改亮度和对比度

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-08-05T09:59:45.133

我刚刚遇到了同样的问题，最终使用了`Color Matrix`Ruslan Yanchyshyn 描述的那个。我需要根据图像自动调整亮度，因此我使用 BoofCV 从图像的缩放版本创建直方图 - 处理整个图像需要很长时间。然后我分析了直方图 - 查看最暗和最亮的颜色，然后创建一个颜色矩阵来转换颜色，使最暗的颜色为 0，最亮的颜色为 255。这样，新图像使用了从黑暗开始的整个光谱现在/黑色到浅色/白色。

如果有人感兴趣的话，最后在我们公司的博客上写了一篇关于我是如何做到的小文章。[http://appdictive.dk/blog/projects/2016/07/26/levels_with_color_matrix/](http://appdictive.dk/blog/projects/2016/07/26/levels_with_color_matrix/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-15T08:08:33.907

也许你可以试试这个：

[http://xjaphx.wordpress.com/2011/06/21/image-processing-contrast-image-on-the-fly/](http://xjaphx.wordpress.com/2011/06/21/image-processing-contrast-image-on-the-fly/)

希望有帮助！:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-15T08:57:10.673

[http://android.okhelp.cz/bitmap-set-contrast-and-brightness-android/](http://android.okhelp.cz/bitmap-set-contrast-and-brightness-android/)

看看这个，这可能会解决你的问题**

# javascript - javascript 通过键值访问关联数组

> ID：12891526
> 
> 赞同：2
> 
> 时间：2012-10-15T08:06:06.810
> 
> 标签：javascript, jquery

我有一个这样的数组：

```
employees = [
        {
        "id": 1,
        "shift_id": 1,
        "days": {
            "2012-03-01": 1,
            "2012-03-02": 1,
            "2012-03-03": 1,
            "2012-03-04": 0,
            "2012-03-05": 0,
            "2012-03-06": 0
        }},
    {
        "id": 2,
        "shift_id": 1,
        "days": {
            "2012-03-01": 0,
            "2012-03-02": 1,
            "2012-03-03": 1,
            "2012-03-04": 1,
            "2012-03-05": 1,
            "2012-03-06": 0
        }},
    {
        "id": 3,
        "shift_id": 2,
        "days": {
            "2012-03-01": 0,
            "2012-03-02": 0,
            "2012-03-03": 1,
            "2012-03-04": 1,
            "2012-03-05": 1,
            "2012-03-06": 1
        }}

    ]; 
```

有没有办法使用 id 值访问这个数组中的元素？也许在 jquery 中？喜欢`$(employees('id = 1');`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T08:09:58.307

只需遍历您的数组并检查 id：

```
var yourId = 1;
for (var i = 0, len = employees.length; i < len; i++) {
  if (employees[i].id == yourId) {
     // ...
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T08:15:53.623

您可以使用这样的函数，它会适当地过滤数组：

```
var getEmployee = function (id) {
  return employees.filter(function(i) { return i.id == id; });
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-15T08:17:31.347

您可以使用[此处](http://api.jquery.com/jQuery.grep/)`.grep()`记录的方法：

```
var employee = $.grep(employees, function(e) { return e.id == 1 })[0]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-15T08:14:02.783

好吧，有一种 jQuery 方法可以做到这一点：

```
var findElementById = function(elements, id) {
  return $.grep(elements, function(e) { return e.id === id; })[0];
} 
```

我仍然想知道为什么不直接索引源数组`id`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-15T08:08:26.090

或这个：

```
$.each(employee, function(){
    if(this["id"] == 2){
        console.log(this);
    }
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-15T08:15:43.047

也许您正在寻找类似以下的内容：

```
$.grep(employees, function(n){return n.id==1}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-15T08:12:46.637

据我所知，为了实现这一点，您必须遍历它们

```
 Array.prototype.getObjectById = function(x){
      var catcher = false, i = 0;
      while(!catcher){
        catcher = this[i].id == x ? this[i] : false;
        i++;
      }
      return catcher;
    } 
```

这个功能应该有帮助。它将扩展数组对象，因此您可以将其用作`myArray.getObjectbyId(id);`

按照设计，这将返回第一个满足条件的对象。你可以像这样扩展它：

```
Array.prototype.getObjectsById = function(x){
  var catcher = [], i = 0;
  for(var i = 0; i < this.length; i++){
    if(this[i].id == value){
      catcher.push(this[i]);
    }
    i++;
  }
  return catcher.length == 1 ? catcher[0] : catcher;
} 
```

如果多个对象与条件匹配，这将返回一组对象。

```
 Array.prototype.getObjectsByAttribute = function(x, criteria){
      if(!criteria){criteria = 'id';}
      var catcher = [], i = 0;
      for(var i = 0; i < this.length; i++){
        if(this[i].criteria == value){
         catcher.push(this[i]);
        }
        i++;
      }
      return catcher.length == 1 ? catcher[0] : catcher;
    } 
```

这进一步扩展它以寻找任何标准。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-19T19:15:37.307

我知道这个问题很老，但如果其他人偶然发现这个问题，供将来参考......

与其尝试过度设计函数来解析/检查 JSON，不如考虑更改数据结构以适应其目的。

**考虑问题中的示例：**

```
 data =  [ {
    "id": 1,
    "shift_id": 1,
    "days": {
        "2012-03-01": 1,
        "2012-03-02": 1,
        "2012-03-03": 1,
        "2012-03-04": 0,
        "2012-03-05": 0,
        "2012-03-06": 0
    }}, { .. }, {...} ] 
```

以这种方式构建数据只能让您按顺序访问对象，而无法通过特定索引查找对象。在这种情况下，数组索引通常没有意义。

```
data[0] => { id : 1, .. }
data[1] => { id : 2, .. } 
```

如果 id 是非连续的或字母数字的会发生什么？

使用数组不会帮助您更快地搜索，您仍然需要循环......

**而是考虑使用哈希表/对象：**

```
{
'id1' =>  { id : 1 , data : { ... } }, 
'id99' => { id : 99, data : { ... } },
'id2' =>  { id : 2 , data : { ... } },
} 
```

您可以使用字符串值作为键，并通过执行以下操作直接访问数据：

```
 data['id2'] => { id : 2, ... } 
```

这将使您可以直接访问要查找的数据（通过 id）。通过简单地重新组织数据的结构，我们能够从 O(n) 搜索变为 O(1) 搜索。

请记住，对于某些解决方案，此方法可能比其他解决方案效果更好，并且还有许多其他考虑因素需要考虑。

当您想通过唯一属性查找数据时，这只是解决问题的一种方法。

# javascript - 如何用 Javascript 替换更多内容？

> ID：12891532
> 
> 赞同：1
> 
> 时间：2012-10-15T08:06:42.317
> 
> 标签：javascript, replace

我想检查用户的输入。如果有问题，我希望该代码可以用其他代码替换它。

这是我第一次尝试使用 Javascript：

```
var userInput= "Hello, I am 22 years old."
document.write(userInput.replace(/I am/g, "I'm"); 
```

它工作正常，但我也想替换`22`为`23`. 我怎样才能做到这一点尽可能简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:09:12.923

`document.write(userInput.replace(/I am/g, "I'm").replace(/22/g, "23"));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:17:40.920

你可以试试类似的东西。希望这可以帮助。

```
var userInput= "Hello, I am 22 years old."
document.write(userInput.replace(/I am/g, "I'm").replace(/(\d+)/g, "23")); 
```

# css - CSS 巨大的元素宽度（100.000+px）有哪些可能的问题？

> ID：12891533
> 
> 赞同：2
> 
> 时间：2012-10-15T08:06:44.377
> 
> 标签：css

超宽元素的理论问题是什么，比如轮播元素的图像容器。有什么原因会导致 10,000px 或 1,000,000px 的固定容器宽度之间存在差异？性能在什么时候成为现实问题？

我知道在实践中有更好的方法来做到这一点（比如动态计算宽度）。我只对与巨大元素相关的最大值和问题感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:56:15.690

我刚刚在 10,000 像素、100,000 像素和 1,000,000 像素处进行了测试。它在一毫秒内呈现相同的内容。我在 Chrome 中使用了谷歌开发者工具。

```
<html>
<head></head>
<body>
<div style="width:100000px;background:#000;height:100000px;">&nbsp;</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:40:05.743

你不能有一个确切的数字，它取决于操作系统内存管理、浏览器内存管理、物理内存、占用内存（选项卡和其他正在运行的应用程序的数量）等等。

为了确保您不会让浏览器（或操作系统）陷入停顿，并且如果您确实必须拥有一个那么大的容器，请确保对内容使用某种延迟加载。空的 div 不是问题。

有关某些数字，请参阅此问题[确定最大可能的 DIV 高度](https://stackoverflow.com/questions/7719273/determine-maximum-possible-div-height)

# php - PHP exec（）一次又一次地重新执行相同的脚本

> ID：12891534
> 
> 赞同：1
> 
> 时间：2012-10-15T08:06:45.140
> 
> 标签：php, jquery, webserver, hosting, exec

在这里，我将详细介绍我的流程。

我正在同一主机上执行 Ajax 请求。AJAX 调用`saveUser.php`

在`saveUser.php`，我已经包括在内`Common.php`。

`Common.php`有`createFile1()`和`createFile2()`功能。

`createFile1()`功能只是`sample1.php`为了另一个目的而创建。

在`createFile2()`，我正在创建一个文件`sample2.php`并执行一个`exec('php /home/public/sample2.php > /dev/null &');`命令来执行该文件。

我分别调用这个`createFile1()`和`createFile2()`函数`saveUser.php`，AJAX 请求从中调用它。

由于我已将 exec 命令设置为在命令`&`结束时通过 ' ' 在后台运行，因此它无需等待响应即可返回，并且一切顺利。

但是当我检查我的服务器时，这些文件 sample1.php 和 sample2.php 被一次又一次地创建。似乎所有这些`saveUser.php`操作都在一次又一次地执行，直到我`sample2.php`从 SSH 停止该进程。

我检查了进程列表，每次 ' `php /home/public/sample2.php`' 都有`new process_id`，所以它确认它正在一次又一次地执行。如果我删除`exec()`代码并从 SSH 执行这个 sample2.php，它会按预期工作，不存在这样的问题。

请建议我怎么了？服务器配置是否有问题，我使用的是hostgator共享帐户。

我也包含相同`Common.php`的文件`sample2.php`，以防万一它可以帮助它。

提前感谢您的帮助。

**saveUser.php 代码**

```
include_once dirname(__FILE__).'/Common.php';

createFile1();

createFile2();

echo 'saved successfully!'; 
```

**Common.php 代码**

```
function createFile1()
        {
                $template = file_get_contents('sendDmTemplate.php');

                $serviceFp = fopen('sendDmFiles/sample1.php',"w");
                fwrite($serviceFp , $fileContent);
                fclose($serviceFp);
        }

        function createFile2()
        {
                $fileContent = file_get_contents(dirname(__FILE__).'/sampleFileTemplate.php');

                $serviceFp = fopen('sample2.php',"w");
                fwrite($serviceFp , $fileContent);
                fclose($serviceFp);

                exec('php '.dirname(__FILE__).'/sample2.php > /dev/null &');
        } 
```

**sample2.php 代码**

```
include_once dirname(__FILE__).'/Common.php';
echo 'hi'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:21:03.040

检查以下内容：

1）你确定你没有多次调用你的脚本 saveUser.php 吗？Mayby javascript XHR 中某处的编码错误？通过查看 (apache?) 日志来检查这一点。

2）你确定你的php没有-q可以正常执行吗？我使用 php -q pathtoscript.php

3）如果不是 1 或 2：在 saveUser.php 的此处（或某处）发布代码

编辑：我看到你的问题。您创建的文件再次包含 common.php，并再次执行该文件。等等 <-- 错误 哎呀。我写的太早了。现在再看一遍。

4) 您是否可以使用一些错误处理来重定向到您的 saveUser.php？

编辑：

5) 可能会出现问题，因为您将执行命令本身的文件与 include_once 结合在一起，但我不确定。您可以通过调整 sampleFileTemplate.php 来更改您的 sample2.php 内容来简单地测试这一点。创建一个 common2.php（内容与 common.php 相同），然后使用它。你能测试一下那个设置并报告吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-21T07:38:29.543

这完全一样的事情发生在我身上。我试图让一个 php 脚本在另一个 php 脚本上调用 exec() 但由于某种奇怪的原因，它只会 exec() 本身再次创建一个无限循环。当前接受的答案没有让我到任何地方，但我能够通过指定 php.ini 的绝对路径来让它工作。

所以，而不是

```
exec('php /home/public/sample2.php > /dev/null &'); 
```

这将是

```
exec('/usr/local/bin/php /home/public/sample2.php > /dev/null &'); 
```

# jquery - 如何从具有相同名称的字段的表单创建 JSON 文件？

> ID：12891535
> 
> 赞同：3
> 
> 时间：2012-10-15T08:06:45.700
> 
> 标签：jquery, json, forms, field

我创建了一个包含多个同名字段的表单：

```
<form ... >
<input type=text name="problem"  value="problem1" />
<input type=text name="question" value="question1" />
<input type=text name="answer"   value="answer1" />

<input type=text name="problem"  value="problem2" />
<input type=text name="question" value="question1" />
<input type=text name="answer"   value="answer1" />
<input type=text name="question" value="question2" />
<input type=text name="answer"   value="answer1" />
<input type=text name="answer"   value="answer2" />
...
<input type=hidden name="jsonString" value="" />

<input type=submit value="Send" />
</form> 
```

这些字段可以通过javascript动态添加/删除

我想在隐藏字段中放入一个字符串（使用 JSON.strinfigy）并在提交之前通过表单传递：

```
{
    problem: [  
        {   
            name: problem 1, 
            question: [
                {
                    name: question 1,
                    answer: [
                        name:answer1
                    ]
                }
            ]
        },

        {   
            name: problem 2, 
            question: [
                {
                    name: question 1,
                    answer: [
                        name:answer1
                    ]
                },  
                {
                    name: question 2,
                    answer: [
                        name:answer1,
                        name:answer2
                    ]
                }   
            ]
        }       
    ]
} 
```

有什么想法吗？谢谢

抢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:19:28.703

没有任何方法可以由此序列化 json；尝试简单地创建，如下所示：

```
var myJson;
$("input[name=problem]").each(function(){
   myJson.Push( { "name": $this.val()});
}); 
```

（查看[adding-removing-items-from-json-data-with-jquery](https://stackoverflow.com/questions/4538269/adding-removing-items-from-json-data-with-jquery)形式更多指令）

# c# - 如何探索 Azure 报告 (SSRS) 呈现扩展

> ID：12891537
> 
> 赞同：0
> 
> 时间：2012-10-15T08:06:53.120
> 
> 标签：c#, .net, reporting-services, azure, reporting

是否可以探索 Azure 报告支持的呈现扩展？我想为用户提供他/她可以选择的支持扩展列表。我希望生成该列表，而不是硬编码（也不在配置中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T09:32:33.807

[我在这里](http://www.sqlmusings.com/2012/08/25/get-sql-server-2012-ssrs-report-rendering-extensions-using-powershell/)找到了答案。

解决办法是：实例化一个新的ReportViewer类实例，设置处理模式为remote，调用ListRenderingExtensions方法。

```
private RenderingExtension[] getSupportedRenderingExtensions()
{
    var reportViewer = new Microsoft.Reporting.WebForms.ReportViewer();
    reportViewer.ProcessingMode = ProcessingMode.Remote;
    reportViewer.ServerReport.ReportServerUrl = new Uri(_reportingAgent.ReportingServiceUrl);
    reportViewer.ServerReport.ReportServerCredentials = new ReportServerCredentials("user", "password", "ReportingServiceUrl");

    return reportViewer.ServerReport.ListRenderingExtensions();
 } 
```

# yii - 查看相关表的另一个属性——yii

> ID：12891542
> 
> 赞同：0
> 
> 时间：2012-10-15T08:07:08.790
> 
> 标签：yii, yii-components

我想显示`country name`而不是`country id`在用户个人资料视图中显示（`country id`在用户个人资料 tbl 中是 FK）。

任何人都可以帮助我吗？

这是我的视图控制器/动作，其中我也有 Country 模型：

```
public function actionView($id) 
            {

        $model = new TblUserProfile;

        $model = TblUserProfile::model()->find('user_id=:user_id', array(':user_id' => $id));

      $countrymodel =  new Country;

       $countrymodel = Country::model()->findAll();
//       var_dump($countrymodel->name);
//       die();
        $this->render('view', array(
            'model' => $model ,
            'country' =>$countrymodel

        ));
    } 
```

这是我的看法

```
<div class="view">

    <b><?php echo CHtml::encode($data->getAttributeLabel('id')); ?>:</b>
       <?php echo CHtml::link(CHtml::encode($data->id), array('view', 'id'=>$data->id)); ?>

    <br />

    <b><?php echo CHtml::encode($data->getAttributeLabel('user_id')); ?>:</b>
    <?php echo CHtml::encode($data->user_id); ?>
    <br />

    <b><?php echo CHtml::encode($data->getAttributeLabel('user_occuption')); ?>:</b>
    <?php echo CHtml::encode($data->user_occuption); ?>

    <br />
    <b><?php

     // $model = TblUserProfile::model()->find('country_id=:country_id', array(':user_id' => $id));

//echo CHtml::encode($model->getAttributeLabel('country')); ?>:</b>
    <?php// echo CHtml::encode($model->name);

        ?>

    <br />

</div> 
```

现在我想在上面的视图中显示国家名称。

这些是国家和用户资料表的关系

```
public function relations() {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
            'user' => array(self::BELONGS_TO, 'TblUser', 'user_id'),
            'country' => array(self::BELONGS_TO, 'country', 'country_id'),
            'state' => array(self::BELONGS_TO, 'state', 'state_id'),
            'city' => array(self::BELONGS_TO, 'city', 'city_id')

        );
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:32:02.623

使用以下代码：

```
<b><?php echo CHtml::encode($data->country->getAttributeLabel('name')); ?>:</b>
<?php echo CHtml::encode($data->country->name); ?>
<br /> 
```

假设在您的国家模型中，国家名称列是`name`.

由于关系已经到位，我们可以使用它来访问每个用户的相关国家/地区。

在详细视图中，它将更改为：

```
// instead of 'country_id'
array(
    'name'=>'country_id',
    'value'=>$model->country->name
) 
```

阅读[`CDetailView`文档](http://www.yiiframework.com/doc/api/1.1/CDetailView#attributes-detail "http://www.yiiframework.com/doc/api/1.1/CDetailView#attributes-detail")以了解如何更改更多内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T11:22:00.177

我会使用：

```
$model = TblUserProfile::model()->with('country')->find('user_id=:user_id', array(':user_id' => $id)); 
```

with('country') 解释：字符串 country 来自于数组关系键。

然后在视图中显示您将使用：

```
$model->country->CountryName; 
```

*   $model 包含
*   country 包含由关系外键连接的国家的“模型”
*   CountryName 是 Country 表中的列名

这是以 MVC 方式进行的推荐方法。我的示例和上面的示例都有效，但是上面的示例在视图中有更多的过程/逻辑决策，这打破了 MVC 的概念，其中模型应该是胖模型并包含所有可能的逻辑/处理，然后控制器将拉取这个数据并将其提供给视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-09T09:51:58.767

您也可以按照以下答案进行操作：只需将以下代码放入您的`view.php`文件中

```
 [
                "attribute"=>"User_Country_Id",
                'value' =>$model->country->conName ,
            ],
            [
                "attribute"=>"User_State_Id",
                'value' =>$model->states->stsName ,
            ],
            [
                "attribute"=>"User_City_Id",
                'value' =>$model->cities->ctName ,
            ], 
```

# path - raphaeljs 的形状可以相互转换吗？

> ID：12891543
> 
> 赞同：0
> 
> 时间：2012-10-15T08:07:15.327
> 
> 标签：path, raphael, transform, shapes

我有一个形状

```
var a = paper.rect(10,10,50,20); 
```

我想把这个形状变成

```
var b = paper.circle(10,10,20); 
```

有没有办法将这些内置形状相互转换。我知道路径可以随心所欲地变换，但形状也可以变换吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-01T15:24:44.877

如果有一点创造力，你可以做到这一点。如果宽度、高度和 r（半径）都相同，则矩形可以是圆形。然后将矩形转换为“圆”变为：

`p=Raphael(10, 50, 600, 300); myrect=p.rect(50,50, 300,150,0).attr({"fill":"cyan"}); myrect.animate({"width":25,"height":25, "r":25}, 3000);`

JSfiddle：http: [//jsfiddle.net/s1pz6Lzc/30/](http://jsfiddle.net/s1pz6Lzc/30/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:04:21.247

我认为这是不可能的，除非您只是淡出一种形状并淡入另一种形状。原因是在转换过程中的某个时间点，形状既不是矩形也不是圆形，而 SVG 中的任何单个动画形状都必须在整个动画过程中保持相同的形状，我相信。

# java - 更改微调器第一行中的文本颜色

> ID：12891544
> 
> 赞同：0
> 
> 时间：2012-10-15T08:07:16.963
> 
> 标签：java, android

我有一个微调器。当用户单击它时，会出现一个对话框，其中包含几行和该行内的文本可供选择。微调器内的默认文本是`Select facility`. 第一行文字是一样的，即`select facility`。现在我想要的是更改微调器对话框中第一行的文本颜色，即选择工具的颜色。

我怎样才能做到这一点？

这是我相信我可以更改它的代码。

```
if (position == 0 && hideFirstText) {
        ((TextView) convertView).setText(R.string.select_facility);
        convertView.setBackgroundResource(R.color.light_green);
        return convertView;
    } 
```

这是我已经尝试过的

```
 ((TextView) convertView).setTextColor(4737352); 
```

但上述解决方案完全删除了第一行文本。

我也试过这个

```
 convertView.setTextColor(4737352); 
```

但是 convertView 没有 setTextColor() 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:17:12.003

你应该重写 getView 方法，像这样

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
View view = super.getView(position, convertView, parent);
TextView text = (TextView) view.findViewById(R.id.spinner);
text.setTextColor(Color.RED);
return view;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:12:11.263

当对话框打开时，它在内部调用 getDropDownView 所以像这样自定义适配器的这个方法

```
public View getDropDownView (int position, View convertView, ViewGroup parent){
        View row=super.getView(position, convertView, parent);
        if(position == 0){
            //Do custom stuff here like find textview & change textcolor
        }
        return(row);
    } 
```

# php - 展开 PHP 函数

> ID：12891547
> 
> 赞同：-9
> 
> 时间：2012-10-15T08:07:41.483
> 
> 标签：php, arrays, string

有什么办法可以炸掉这个字符串吗？

```
$img_name = "123_black_bird_aaaa";
explode("_", $img_name); 
```

现在这样的图像名称包含多个下划线。我怎样才能在第一个下划线爆炸它而不关心剩余的字符串有多少下划线？

```
$img_name = "123_black_bird_aaaa";
$array = explode("_", $img_name);       
$first_underscore_part = $array[0];
$remaining_string      = $array[1]; 
```

例如一个名字`"123_black_bird_aaaa"`

现在我想要`"123_"`在`0`数组的索引和数组`"black_bird_aaaa"`的索引`1`处。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T08:09:24.707

这只是一个注释，参数列表来自： http: [//php.net/explode](http://php.net/explode)

```
 array explode ( string $delimiter , string $string [, int $limit ] )
                                                      ^^^^^^^^^^^^^ 
```

不要赞成这个答案，而是反对这个问题和/或投票关闭并删除它。谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:11:07.057

```
<?php
$img_name = explode("_", $img_name,2);
print_r($img_name);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:11:36.450

你可以在没有`explode`.

```
$pos = strpos($img_name, "_"); //finds the first underscore position
if ($pos === false)
{ //we have an underscore
 $firstPart = substr(0 , $pos , $img_name);
 //Get the characters before the position of the first underscode
} 
```

如果你愿意`explode`，@hakre 的答案是 AWSOME。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T09:22:40.653

您可以通过使用explode函数将limit参数的值作为参数传递来在第一个分隔符处拆分字符串。

下面是使用explode函数在第一个分隔符处拆分字符串的代码片段

```
 $delimiter='_';
    $img_name = "123_black_bird_aaaa";
    $result=explode($delimiter,$img_name,2); 
```

# actionscript-3 - AS3 视差速度

> ID：12891549
> 
> 赞同：0
> 
> 时间：2012-10-15T08:07:43.823
> 
> 标签：actionscript-3

我正在创建一个将移植到 iOS 的 AS3 游戏，我正在使用视差功能，但我无法让图层的速度低于 0.1。这是最慢的还是有办法让它更慢？

我想要一个天空层去 0.05 或更慢。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:45:12.553

我不确定你是否完全理解机制

**想法：**

*   速度由在一帧中移动的像素数和帧率给出。如果您的 fps 为 50，速度为 0.02，那么您的游戏应该在 1 秒内将背景移动 1 个像素。
*   由于 1 像素是您可以移动的最小单位，因此将背景移动 0.1 或 0.0000001 像素不会影响到所有视图，直到达到单位（对于用户 x=12.1212 与 x=12.1213 相同）。当然，我们必须排除任何抗锯齿。

**因此，作为答案：**设置任何速度都应该有效！

**建议：**在设置 x、y、width 和 height 属性时，出于**性能**原因，将值转换为**int 。**无论如何，如果您不使用任何级别的抗锯齿，视觉结果将是相同的。

# droppable - 将一些东西拖到谷歌地图标记和弹出窗口上，这可能吗？

> ID：12891550
> 
> 赞同：0
> 
> 时间：2012-10-15T08:07:48.913
> 
> 标签：droppable, marker

我想对谷歌地图标记做一些影响，但似乎我尝试了很多方法但没有希望。

现在我有谷歌地图和几个标记，很好。我想使用 jquery 的可放置功能使所有标记都可放置，这样我就可以将小图片拖到标记中并弹出一些东西。

那可能吗？？亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:31:37.943

好的，我找到了使它起作用的想法。我覆盖了另一个附加了 id 属性的图层，然后我可以自由地使用 jquery droppable 事件。谢谢

# javascript - 如何让 Raphael 与 IE8 及更低版本一起工作？

> ID：12891556
> 
> 赞同：0
> 
> 时间：2012-10-15T08:08:13.447
> 
> 标签：javascript, browser, raphael

我开发了 java 脚本来使用 Raphael 绘制图形形状。它完美适用于 IE9 和其他浏览器，如 firefox 和 google chrome。但它不适用于 IE8 和较低版本的 IE。任何人都可以帮助我让 Raphael 使用 IE8 和更低版本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T08:10:17.430

Rapheal js 支持`Firefox 3.0+, Safari 3.0+, Chrome 5.0+, Opera 9.5+ and Internet Explorer 6.0+`，所以如果它不能在 IE8 中工作，那么你可能需要检查你的代码

# mysql - 如何删除表中重复的记录？

> ID：12891558
> 
> 赞同：-1
> 
> 时间：2012-10-15T08:08:20.783
> 
> 标签：mysql

> **可能重复：**
> [如何删除表中重复的记录？](https://stackoverflow.com/questions/12891402/how-to-delete-records-in-the-table-which-are-repeated)

嗨，我遇到了一种情况，错误地没有删除表，我运行了表的批处理文件，该文件包含一些详细的插入语句

我有一个像 alert_priority 这样的表，由像这样的记录组成

```
Id  priority_name
---  --------------
1     P0
2     P1
3     P2 
```

现在错误地没有删除 alert_priority 我已经执行了包含一些插入语句的表的脚本文件，现在在执行脚本之后我在表中的记录就像

```
Id  priority_name
---  --------------
1     P0
2     P1
3     P2
1     P0
2     P1
3     P2 
```

现在我想删除额外的记录（Id 3 之后的记录），并且我应该拥有在执行脚本文件之前存在的所有记录。

虽然我可以选择删除表并再次执行脚本文件，但我想知道有什么方法可以通过 sql 查询来完成我的表中没有主键

# asp.net-mvc-3 - 如何在 asp.net MVC3、razor 中限制列表框以单选

> ID：12891564
> 
> 赞同：1
> 
> 时间：2012-10-15T08:08:37.167
> 
> 标签：asp.net-mvc-3

我正在使用 ASP.Net MVC3 Razor，我在 .cshtml 中有两个列表框，比如说 lbox1 和 lbox2。我在控制器中绑定了数据并使用 viewbag 发送到列表框。两个列表框都有相同的数据，如 A、B、C、D。但我们可以从列表框中选择多个项目。现在我希望 lbox1 选择模式为单个。我怎样才能将其限制为单选？？？

我有一个绑定数据的控制器

```
public Actionresult Index()
{
    ViewBag.lbox1= new SelectList(db.boxes, "ID", "Name");
} 
```

这是我的看法

```
<table>
<tr>
    <td>
    @Html.ListBox("lbox1")

    </td>
    <td>

    @Html.ListBox("lbox2")
    </td>
    </tr>
</table> 
```

谁能帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:23:54.087

使用 DropDown 而不是 ListBox：

```
@Html.DropDown("lbox1") 
```

# java - 在Java中返回一个只有两位小数的双精度数作为较大字符串的一部分？

> ID：12891565
> 
> 赞同：0
> 
> 时间：2012-10-15T08:08:52.267
> 
> 标签：java, floating-point, formatting, return, decimal

作为一个更大程序的一部分，我有这个函数，当被调用时，它会返回返回的字符串。accountHolder、balance、interestRate 和 points 是 RewardsCreditAccount 类型的对象中的变量。因此，例如，我在这里声明一个对象：

```
RewardsCreditAccount testAccount = new RewardsCreditAccount("Joe F. Pyne", 7384.282343837483298347, 0.173, 567); 
```

所以这个对象会设置 accountHolder = "Joe F. Pyne", balance = 7384.282343837483298347，等等。

在下面的函数中，我以如下所示的字符串返回此信息：

> Joe F. Pyne，7384.282 美元，17.28%，567 分

使用此功能：

```
 public String toString() {
    return (accountHolder + ", $" +  + balance + 100*interestRate + "%, " + points + " points");
} 
```

然而，它实际上是在返回这个：

> Joe F. Pyne，7384.282 美元，17.299999999999997%，567 分

我试过这个，但没有用

```
public String toString() {
    return (accountHolder + ", $" +  + ("%,1.2f",balance) + 100*interestRate + "%, " + points + " points");
} 
```

这很烦人，因为我希望它只返回两位小数。我知道这可以使用 %1.2f 来完成，但我不知道如何格式化它的语法。对于正确显示十进制值的任何帮助，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T08:11:22.597

您必须使用[`String.format();`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)该格式字符串。

所以这

```
public String toString() {
    return (accountHolder + ", $" +  + ("%,1.2f",balance) + 100*interestRate + "%, " + points + " points");
} 
```

应该：

```
public String toString() {
    return String.format("%s, $%,1.2f %s%%, %s points", accountHolder, balance, 100*interestRate, points );
} 
```

使用格式化程序设置，以便根据您的需要打印。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T08:12:27.757

使用 DecimalFormater 格式化您的值。

```
new DecimalFormat("###.##").format(17.299999999999997); 
```

供[参考](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T08:18:31.433

您将需要用于`String.format()`格式化返回的字符串：-

```
String.format("%5.2f",balance) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T08:17:59.367

浮点数并不总是容易处理的。

您的问题在于浮点类型（如 float 和 double，以及它们的盒装对应物）只是其十进制表示的二进制近似值，因此如果不考虑这一点，可能会出现各种此类问题。

处理非常大的值时还必须注意，因为可能会发生`(a== (a+1))==true`...

此外，对于货币和其他此类关键数据，我建议使用**[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)**，它存储确切的字符串表示形式，而不是二进制近似值。虽然这不是地球上最微不足道的处理，但考虑到数据的重要性，我认为这是不可避免的。

# gnuplot - 绘制耦合数据

> ID：12891566
> 
> 赞同：0
> 
> 时间：2012-10-15T08:08:54.950
> 
> 标签：gnuplot

我无法理解如何在`Gnuplot`不编写输入文件的情况下绘制耦合数据。

假设我有这种格式的数据：

```
(x_val, y_val) 
```

我想做类似的事情：

```
x <- [x_val_1, x_val_2, ... x_val_n]
y <- [y_val_1, y_val_2, ... y_val_n]
plot x y 
```

是否可以？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:58:47.273

如果我理解正确，您可以使用 gnuplot 的`"-"`伪数据文件：

```
#for documentation, refer to 
# `help plot datafile special-filenames` 
#  at the gnuplot prompt
plot '-' w points
  1 2
  3 4
  5 6
  7 8
  9 10
  11 12
  e 
```

如果您尝试使用 gnuplot 来计算点数，那么这是行不通的。根据您计算点的方式，您可以将其绘制在参数曲线上。

# android - 应用程序未安装在模拟器上：警告：打开音频输入失败

> ID：12891568
> 
> 赞同：2
> 
> 时间：2012-10-15T08:09:00.927
> 
> 标签：android, emulation, uploading

我创建了一个“你好”项目。我没有更改 Eclipse 生成的默认模板的任何内容。然后我运行了应用程序。我没有收到任何错误。但是，该应用程序并未安装在模拟器上。

环境 ：

```
windows7 x64
jdk-7u7-windows-x64
installer_r20.0.3-windows
eclipse-jee-juno-SR1-win32-x86_64 
```

我搜索了很多文章，但没有找到任何解决方案。

```
[2012-10-15 16:39:42 - hello] Android Launch!
[2012-10-15 16:39:42 - hello] adb is running normally.
[2012-10-15 16:39:42 - hello] Performing com.example.hello.MainActivity activity launch
[2012-10-15 16:39:42 - hello] Automatic Target Mode: launching new emulator with compatible AVD 'AndroidAVD4.1.2'
[2012-10-15 16:39:42 - hello] Launching a new emulator with Virtual Device 'AndroidAVD4.1.2'
[2012-10-15 16:39:42 - Emulator] emulator: warning: opening audio input failed 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T08:50:17.077

我已经阅读了 1 周的许多类似文章，并且我尝试了很多方法来解决这个问题：

*   各种android sdk版本重新安装
*   项目再创
*   avd再创作
*   更改 Eclipse 工作区
*   将 android sdk 文件夹更改为没有空间的 root。
*   重新启动adb和eclipse。

作为试用，我卸载了所有防病毒和防御软件，然后重新启动。这解决了我的问题。

# java - 在多服务器环境中管理会话

> ID：12891569
> 
> 赞同：9
> 
> 时间：2012-10-15T08:09:03.650
> 
> 标签：java, session, tomcat

假设我有多个 Web 应用程序服务器正在运行，并且我正在从 Server1 登录用户，因此他的会话开始。由于 http 是无状态的，假设如果下一个请求转到 Server3 而不是用于登录应用程序的 Sever1，如果我使用 cookie，隐藏形式，它在 Server2 中不起作用。

那么我该如何管理会话呢？，可能是通过生成一个 ID（甚至重用生成的 jsessioid）并将其存储在中央数据库中，以便所有服务器都可以访问此会话 ID 并在处理请求之前对其进行验证。然后在那个在这种情况下，我需要开发一种机制来将所有会话数据作为对象存储到数据库中。

是否有其他可用的内置机制？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-15T08:19:12.417

如果您在多台服务器上部署应用程序，则应使用“集群”。应用程序服务器能够使用“会话复制”来处理这种情况。使用会话复制，每个服务器都将拥有一个活动用户会话的副本。如果第一个请求发送到服务器 A，而第二个请求发送到服务器 B，它将对应用程序代码和最终用户透明。

对于 Tomcat 中的集群/会话复制，您可以查看[此](http://tomcat.apache.org/tomcat-5.5-doc/cluster-howto.html)链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-16T05:19:21.123

Spring 提供了会话管理：

> Spring Session 使得支持集群会话变得微不足道，而无需绑定到应用程序容器特定的解决方案。它还提供与以下内容的透明集成：
> 
> HttpSession - 允许以中立方式替换应用程序容器（即 Tomcat）中的 HttpSession，支持在标头中提供会话 ID 以使用 RESTful API
> 
> WebSocket - 提供在接收 WebSocket 消息时保持 HttpSession 活动的能力
> 
> WebSession - 允许以应用程序容器中立的方式替换 Spring WebFlux 的 WebSession 来源：Spring 文档。

请检查此以获取更多信息：[https ://spring.io/projects/spring-session#overview](https://spring.io/projects/spring-session#overview)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-01T20:17:15.690

如果您的基础架构（服务器 1、2...）连接到单个网络设备（如 Citrix Netscalar），则可以使用 IP 或 Cookie 持久性，以便 netscalar 向同一服务器发送更多请求。

# c# - 返回非常大的字符串时.asmx 请求超时

> ID：12891571
> 
> 赞同：2
> 
> 时间：2012-10-15T08:09:10.303
> 
> 标签：c#, xml, web-services, timeout, large-data

我们有几个 .asmx soap web 服务来处理我们的 web gui 和我们的后端应用服务器之间的通信。最近，我们从在内置 Web 服务器中运行 Visual Studio 2010 解决方案转变为通过 IIS 7.5 运行它。马上，我们开始经历非常缓慢的响应时间，并开始出现我们以前没有看到的各种异常，比如我们的 xml 中的超时和序列化错误。

我们试图将问题缩小到最低限度，但没有一个解决方案，所以现在我们将它“扔在那里”，看看是否有人遇到过同样的问题，或者可能有解决方案。

PS。我们知道 .asmx Web 服务已过时，但目前我们无法将服务转换为 WCF。DS。

此代码将重现错误：

```
[WebMethod]
public string DebugGetAuditTrail()
{
   const string data = "Some random text that is not very interesting. ";
   StringBuilder lotsOfData = new StringBuilder();
   for(int counter=0; counter<100000; counter++)
   {
      lotsOfData.Append(data);
   }

   return lotsOfData.ToString();
} 
```

我们的 web.config 声明：

```
<httpRuntime executionTimeout="600" requestValidationMode="2.0" maxRequestLength="1400000"/> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:14:11.933

理想情况下，不建议使用 Web 服务发送大量数据。但是，要处理这种情况，最好的方法是将数据拆分为小数据包。

您可以做的是，创建一个标头来索引数据包。收到标头后，将服务器配置为发送剩余部分数据。

# java - 没有 IndexOutOfBounds 异常的索引加法

> ID：12891573
> 
> 赞同：1
> 
> 时间：2012-10-15T08:09:19.787
> 
> 标签：java

我有`n`每个对象都有一个识别号。我让它们未排序，但索引范围`(0, n-1)`用于识别它们。我想尽可能快地访问它们。我想 ArrayList 将是最好的选择，我会`n`在 ArrayList 的位置添加带有标识符的对象，索引`n`为：

```
list.add(identifier, object); 
```

问题是，当我添加对象时，我得到了一个，`IndexOutOfBounds Exception`因为我添加的对象是未排序的，并且`size()`较小，尽管我知道以前的位置也会被填充。

另一种选择是使用 HashMap 但我认为这会降低性能。

您知道具有上述行为的集合吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:27:28.933

> 您知道具有上述行为的集合吗？

听起来您需要一个普通的旧 Java 数组。如果你需要它作为一个集合，那么使用“Arrays.asList(...)”为其创建一个`List`包装器。

现在，如果您需要从数组/集合中添加或删除元素，这将不起作用，但听起来您不需要从问题描述中。

如果您*确实*需要添加/删除元素（与使用`set`更新给定位置的元素不同，那么 Peter Lawrey 的方法是最好的。

* * *

相比之下，a`HashMap<Integer, Object>`将是一个昂贵的选择。粗略估计，我会说“索引”操作至少会慢 10 倍，并且与等效数组或`ArrayList`类型相比，数据结构将占用 10 倍的空间。如果数组大且稀疏，则基于哈希表的解决方案才是真正可行的替代方案（从性能角度来看）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:20:24.513

有时，您会弄乱索引。这需要您添加稍后可能会填充的虚拟条目。

```
int indexToAdd = ...
E elementToAdd = ...

while(list.size() <= indexToAdd) list.add(null);
list.set(indexToAdd, elementToAdd); 
```

这将允许您在列表的当前末尾之外添加条目。

* * *

[List.add(int, E)](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#add%28int,%20E%29)和[List.set(int, E)](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#set%28int,%20E%29)的 Javadoc都表示

> IndexOutOfBoundsException - 如果索引超出范围 (index < 0 || index > size())

如果您尝试在末尾添加条目

```
List list = new ArrayList();
list.add(1, 1); 
```

你得到

```
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 1, Size: 0
    at java.util.ArrayList.rangeCheckForAdd(ArrayList.java:612)
    at java.util.ArrayList.add(ArrayList.java:426)
    at Main.main(Main.java:28) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:23:44.403

`HashMap<Integer, T>`我不确定a会贵多少。[`Integer.hashCode()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#hashCode%28%29)非常有效，尽管随着项目数量的增加，唯一真正昂贵的操作可能是将数据复制到一个新的更大的数组中。但是，如果您知道自己的`n`，则可以使用**普通数组**。

作为替代方案，您可以实现自己的[`Map<Integer, T>`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Map.html)，不使用哈希码，而是使用`Integer`它本身。在执行此操作之前，请确保数组既不够用也`HashMap`不够高效！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T08:34:55.970

我认为您至少有两个不错的选择。

第一种是使用初始化为适当长度的直接 Java 数组，然后使用以下语法添加对象：

```
 theArray[i] = object; 
```

第二种是使用 HashMap，并使用以下语法添加对象：

```
 theMap.put(i, object); 
```

I'm not sure what performance issues you're worried about, but adding elements within the range, clearing (out of an array) or removing (out of a HashMap), and finding elements from a given index (or key, for a HashMap) are all O(1) for both structures. I would also suggest taking a look at [Wikipedia's list of data structures](http://en.wikipedia.org/wiki/List_of_data_structures) if neither of these seem good.

# android - 如何连续多次显示相同的图像？

> ID：12891578
> 
> 赞同：0
> 
> 时间：2012-10-15T08:09:43.990
> 
> 标签：android, image, android-layout

我正在为儿童开发一个应用程序。让孩子们愉快地学习基础数学。

在这个应用程序中，我使用苹果图像在屏幕上显示。另外，当他们提供第一个输入和第二个输入时，它应该显示第一个和第二个输入中指定的苹果图像。

有没有人知道这个或任何有源代码的解决方案可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:49:39.767

这是你可以做到的方式，虽然很简单:)

你的 xml 应该是这样的

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<EditText
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/input1" />
 <EditText
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/input2" />
 <Button android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/button"
    android:text="Result"/>
<HorizontalScrollView 
android:id="@+id/scroll1" 
android:layout_width="fill_parent"
android:layout_height="wrap_content">

<LinearLayout android:id="@+id/linear1"
android:orientation="horizontal" 
android:layout_width="fill_parent"
android:layout_height="wrap_content">
</LinearLayout>
</HorizontalScrollView>
<HorizontalScrollView 
android:id="@+id/scroll2" 
android:layout_width="fill_parent"
android:layout_height="wrap_content">
<LinearLayout 
    android:id="@+id/linear2"
android:orientation="horizontal" 
android:layout_width="fill_parent"
android:layout_height="wrap_content">
</LinearLayout>
</HorizontalScrollView>
<HorizontalScrollView 
android:id="@+id/scroll3" 
android:layout_width="fill_parent"
android:layout_height="wrap_content">
<LinearLayout 
    android:id="@+id/linear3"
android:orientation="horizontal" 
android:layout_width="fill_parent"
android:layout_height="wrap_content">
</LinearLayout>
</HorizontalScrollView>
</LinearLayout> 
```

你的活动看起来像这样

```
package com.example.stackanswer;

import android.os.Bundle;
import android.app.ActionBar.LayoutParams;
import android.app.Activity;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.HorizontalScrollView;
import android.widget.ImageView;
import android.widget.LinearLayout;

public class AppleActivity extends Activity {

private LinearLayout linear1;
private LinearLayout linear2;
private LinearLayout linear3;
private HorizontalScrollView scrollbar1;
private HorizontalScrollView scrollbar2;
private HorizontalScrollView scrollbar3;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_apple);
    final EditText input1 = (EditText)findViewById(R.id.input1);
    final EditText input2 = (EditText)findViewById(R.id.input2);
    scrollbar1 = (HorizontalScrollView)findViewById(R.id.scroll1);
    scrollbar2 = (HorizontalScrollView)findViewById(R.id.scroll2);
    scrollbar3 = (HorizontalScrollView)findViewById(R.id.scroll3);
      linear1 = (LinearLayout)findViewById(R.id.linear1);
      linear2 = (LinearLayout)findViewById(R.id.linear2);
      linear3 = (LinearLayout)findViewById(R.id.linear3);
    Button output = (Button)findViewById(R.id.button);
    output.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String input1A = input1.getText().toString();
            String input1B = input2.getText().toString();
            int value1 = Integer.parseInt(input1A);
            int value2 = Integer.parseInt(input1B);
            Log.i("1",""+value1);
            Log.i("2",""+value2);
            linear1.removeAllViews();
            linear2.removeAllViews();
            linear3.removeAllViews();
            linear1.setScrollContainer(true);
            ImageView image ;
            for(int i=0;i<value1;i++){

                image = new ImageView(getApplicationContext());
                image.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT) );

                image.setImageResource(R.drawable.ic_launcher);
                Log.i("i", i+"");
                linear1.addView(image);
                scrollbar1.fullScroll(HorizontalScrollView.FOCUS_RIGHT);
            }
            for(int i=0;i<value2;i++){
                image = new ImageView(getApplicationContext());
                image.setImageResource(R.drawable.ic_launcher);
                Log.i("i", i+"");
                linear2.addView(image);
                scrollbar2.fullScroll(HorizontalScrollView.FOCUS_RIGHT);
            }
            int sum = value1+value2;
            for(int i=0;i<sum;i++){
                image = new ImageView(getApplicationContext());
                image.setImageResource(R.drawable.ic_launcher);
                Log.i("i", i+"");
                linear3.addView(image);
                scrollbar3.fullScroll(HorizontalScrollView.FOCUS_RIGHT);
            }
        }
    });

}

} 
```

完整的源代码[在这里](https://www.dropbox.com/s/9pw4x4qvdxjigkp/StackAnswer.zip)

# magento - magento：如何将模板中的 phtml 块添加到 CMS 页面

> ID：12891579
> 
> 赞同：0
> 
> 时间：2012-10-15T08:09:47.837
> 
> 标签：magento

我在一个名为“shopper”的模板中有一个块。我想在“app\design\frontend\default\shopper\template\tag\popular.phtml”中添加一个块。

我试过了：

```
 {{block type='core/template' area='frontend' template='tag/popular.phtml' }} 
```

该块未显示。也没有 PHP 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:11:20.173

Did you try

```
{{block type="core/template" template="tag/popular.phtml"}} 
```

If that doesn't work, make sure you clear cache (if any) and double check that 'shopper' is set to your default theme.

Read more @ [http://www.magentocommerce.com/boards/viewthread/221573/](http://www.magentocommerce.com/boards/viewthread/221573/)

If the content of 'tag/popular.phtml' is the same or similar to base/template/tag/popular.phtml then try

```
{{block type="tag/popular" template="tag/popular.phtml"}} 
```

# asp.net - 显示代码错误

> ID：12891585
> 
> 赞同：0
> 
> 时间：2012-10-15T08:10:13.747
> 
> 标签：asp.net

当我尝试使用 asp.net 查看源代码时，出现此错误。

拒绝访问路径“C:\Users\user\Desktop\Website1”。

有人知道如何解决这个问题吗？

显示代码如下。我不知道如何解决这个问题。

```
 <%@ Page Language="C#" runat="server" Debug="true" %>
   <%@ Import Namespace="System.IO" %> 
  <script language="C#" runat="server">
void Page_Load()
{
 string filePath = 
Server.MapPath(Request.QueryString["filename"]);
FileName.Text = Request.QueryString["filename"];
FileInfo file = new FileInfo(filePath);

if (file.Extension != ".mdb" 
 && file.Extension != ".xml" 
 && file.Extension != ".exe")
{
 Code.Text = ReadFile(filePath);
 }
   else
{
  Code.Text = "Sorry you can't read a file with an extension of " + file.Extension;
}
  }

     private string ReadFile(string filepath)
    {
         string fileOutput = "";
     try
     {
        StreamReader FileReader = new StreamReader(filepath);
       //The returned value is -1 if no more characters are 
           //currently available.
      while (FileReader.Peek() > -1)
      {
        //ReadLine() Reads a line of characters from the 
          //current stream and returns the data as a string.
        fileOutput += FileReader.ReadLine().Replace("<", "&lt;").
       Replace("  ", "&nbsp;&nbsp;&nbsp;&nbsp;") 
                    + "<br />";
          }
             FileReader.Close();
         }
           catch (FileNotFoundException e)
          {
        fileOutput = e.Message;
         }
        return fileOutput;
      }
     </script>

      <html>
       <head>
     <title>code</title>
         <link rel="stylesheet" href="style1.css" type="text/css">
       </head>
        <body>
           <h1 class="pageHeader">Source Code</h1>
          <asp:label id="FileName" 
               CssClass="codeheader" Runat="server"/>
        <asp:Panel id="pnlCode" CssClass="code" 
         runat="server" Width="80%">
          <asp:label id="Code" Runat="server" />
     </asp:Panel>
    </body>
      </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:13:20.673

右键单击您的`Website1`，单击属性，转到`security`，单击`edit`然后添加`network service`，看看它是否解决了您的问题。

# ms-access - ms 访问中的日期格式

> ID：12891588
> 
> 赞同：1
> 
> 时间：2012-10-15T08:10:28.037
> 
> 标签：ms-access, date

如何一次性告诉 Access 我在英国贝尔法斯特而不是贝尔法斯特 ME？为了说明我的问题，我创建了一个包含 2012 年每一天的日期的表。如果我运行这个查询

SELECT * FROM tblListOfDays WHERE dtmDay BETWEEN #01/05/2012# AND #31/05/2012#

返回 148 行，所有日期从 1 月 5 日到 5 月 31 日。因此 Access 以美国格式读取一个日期，而另一个（可能是因为它别无选择）以英国格式读取。如果我使用

格式（“01/05/2012”，“dd/MM/yyyy”）

代替

# 2012 年 1 月 5 日

然后我得到了我想要的答案，但肯定有比一直使用 Format 更简单的方法吗？据我所知，我所有的区域/语言环境设置都是英国的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:22:08.320

`Format`AFAIK 除了使用函数明确指定日期格式之外别无他法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:10:53.697

正如[petr-abdulin](https://stackoverflow.com/users/735446/petr-abdulin) 所说，您可以使用

```
Format(expression, format) 
```

所以你的代码变成了：

```
SELECT * FROM tblListOfDays WHERE Format(dtmDay, "dd-mm-yyyy") BETWEEN 
     Format("01/05/2012", "dd-mm-yyyy") AND Format("31/05/2012", "dd-mm-yyyy") 
```

并且不要忘记在插入时使用格式。

[在这里](http://office.microsoft.com/en-us/access-help/format-function-HA001228839.aspx)您可以找到有关此功能的更多信息。

# iphone - 在uitableview中按字母顺序对动态数据进行排序

> ID：12891591
> 
> 赞同：-2
> 
> 时间：2012-10-15T08:10:51.627
> 
> 标签：iphone, ios, uitableview

我正在处理来自[这里](http://enterpi.com/tests/leagues.json)的 json 数据，并且必须在 UITableView 中显示数据。

我必须按字母顺序显示部分的内容。每个部分包含多行，每行包含两个标签。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    int section = [indexPath section];

    int row = [indexPath row];

    UITableViewCell *cell =[[UITableViewCell alloc]init];

     UILabel *label1=[[UILabel alloc]initWithFrame:CGRectMake(10, 8, 30, 25)];
     label1.font=[UIFont boldSystemFontOfSize:20];
     label1.backgroundColor=[UIColor lightGrayColor];
     label1.TextAlignment=UITextAlignmentCenter;
     label1.textColor=[UIColor whiteColor];
     label1.text=[[[[[jsonObject valueForKey:@"leagues"]objectAtIndex:section]valueForKey:@"leagues"]objectAtIndex:row]valueForKey:@"id"];

    UILabel *label2=[[UILabel alloc]initWithFrame:CGRectMake(45, 8, 250, 25)];
    label2.font=[UIFont systemFontOfSize:18];
    label2.backgroundColor=[UIColor clearColor];
    label2.text=[[[[[jsonObject valueForKey:@"leagues"]objectAtIndex:section]valueForKey:@"leagues"]objectAtIndex:row]valueForKey:@"league"];

    cell.accessoryType=UITableViewCellAccessoryDetailDisclosureButton;

    cell.selectionStyle=UITableViewCellSelectionStyleNone;

    [cell.contentView addSubview:label1];
    [cell.contentView addSubview:label2];
    return cell;
} 
```

提前致谢和问候.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:26:35.567

If you save your JSON encoded object into objects such as `NSMutableArray`. Then all you need to is simply implement some method...say

`- (void)sortMyData {}`

which implements some known algorithm, such as [MergeSort](http://en.wikipedia.org/wiki/Merge_sort), [QuickSort](http://en.wikipedia.org/wiki/Quicksort) or [BubbleSort](http://en.wikipedia.org/wiki/Bubble_sort). Then before you set your table, you call this method to sort your data and you're good.

NOTE:

It is very common to "bend" the code on the server side -> sort it before you send it.

# actionscript-3 - 旋转后重新排列BOX中元素的顺序

> ID：12891594
> 
> 赞同：0
> 
> 时间：2012-10-15T08:10:56.950
> 
> 标签：actionscript-3, apache-flex, flash-builder, mxml

自 2 天以来，我一直在为此寻找解决方案，但找不到任何解决方案。我对 Flex 的了解是中级的。

我正在编写 flex 应用程序，其中我使用两个元素让我们在 parent 中调用 box 1 和 box 2。有一个按钮可以旋转父级，然后我必须以特定方式重新排列这两个子框。

![在此处输入图像描述](../Images/bdc1e389562d69832472074e4eec7a6d.png)

如图所示，最初父框的方向是水平的，框 1、框 2 的方向是垂直的。当我将父框旋转 90 度时，我需要执行以下任务：

*   重新排列框 1 和框 2 的顺序 => 发生的情况是，在 90 度旋转后框 2 在框 1 的顶部，但我想要的是框 1 应该在第一个，然后框 2 应该在那里。

我所做的 => 例如，我尝试了很多方法来做到这一点

```
box.swapChildAt
```

尽管它有时用于 z 排序，但它确实有效。但我仍在寻找合适的解决方案。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:17:53.487

我认为您遇到的问题是旋转仅将旋转应用于显示对象，而布局逻辑与此无关。因此，如果您有要旋转的背景，我建议您将背景保存在一个隔离的容器中并旋转它，同时将容器与这两个孩子分开保存，并为每个方向引入 4 个状态（0、90、180 , 270)。然后根据旋转应用相应的状态，并在该状态下旋转孩子自己并更改它们的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:43:04.273

我建议一起使用两件事

1) 容器的布局（水平或垂直），例如组 2) 容器中子项的顺序

假设 App 在加载时看起来像

**|一个| |B|** 这里布局是**水平**的，顺序是**A=1**和**B=2**

在 90 处旋转（更改布局和顺序）

|B|

|一个| 这里布局是**垂直**的，顺序是**B=1**和**A=2**

再次旋转 90 度（仅更改布局）

**|B| |一个|** 这里布局是**水平**的，顺序是**B=1**和**A=2**

再次旋转 90 度（更改布局和顺序）

|一个|

|B| 这里布局是**垂直**的，顺序是**A=1**和**B=2**

并再次旋转 90 度（恢复正常）（更改两种布局）

**|一个| |B|** 这里布局是**水平**的，顺序是**A=1**和**B=2**

希望有帮助

# visual-studio-lightswitch - 无法将本地属性添加到 LS 屏幕

> ID：12891597
> 
> 赞同：0
> 
> 时间：2012-10-15T08:11:07.663
> 
> 标签：visual-studio-lightswitch

有没有人遇到过向灯开关屏幕添加本地属性的问题。当我打开添加本地属性对话框时，本地属性类型的下拉列表为空。有什么解决办法吗？

# c# - 如何在我的 Bing 地图应用程序上围绕中心点画一个圆，半径以英里为单位

> ID：12891598
> 
> 赞同：1
> 
> 时间：2012-10-15T08:11:07.290
> 
> 标签：c#, map, bing-maps, geometry

我已经能够使用给定中心点周围的纬度和经度值在我的地图上绘制一个椭圆。虽然我在地图上看到了一个形状，但我得到的是椭圆而不是圆形，我认为它与指定的距离不匹配。我打算用它来显示该圆圈内的对象（这将在稍后我可以正确显示圆圈后完成，这就是为什么我需要一个圆圈而不是椭圆，因为它应该是完美的圆形）。

我正在使用 Bing 地图 API。我希望从通过参数传入的中心以给定的英里（距离）绘制圆，参数中称为英里的另一个变量只是保持 1D 的双精度值。我认为问题与我的数学计算方式有关。有没有人知道如何改进此代码以更好地计算我的里程。

```
private void drawPoly(SearchLocation center, Double miles)
{
//amount of vertex
double vertexCount = 100D;
         //used by the api to carried out searches
List<SearchLocation> vertices = new List<SearchLocation>();
double v = 0;
double radians = Math.PI / 180D;
double radiansPerDegree = Math.PI / 180D;
double degreePerVertex = 360D / vertexCount;
double radiansPerVertex = degreePerVertex * radiansPerDegree;
var centerOfMap = center;
const double degLatMiles = 68.68637156368D;
double degLonMiles = Math.Cos(center.Latitude.Value) * (68.68637156368D);
double milesLat = (miles * degLatMiles) / 3600;
double milesLon = (miles * degLonMiles) / 3600;
for (v = 0; v < vertexCount; v++)
{
    radians = v * radiansPerVertex;
               //adds the miles from the center point and draws a circle
    double centrLat = center.Latitude.Value + (milesLat * Math.Sin(radians));
    double centrLon = center.Longitude.Value + (milesLon * Math.Cos(radians));
    vertices.Add(new SearchLocation() { Latitude = centrLat, Longitude = centrLon });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:24:01.703

好的，我误解了你的问题。这应该工作：

```
 /// <summary>
    /// Calculates the end-point from a given source at a given range (meters) and bearing (degrees).
    /// This methods uses simple geometry equations to calculate the end-point.
    /// </summary>
    /// <param name="source">Point of origin</param>
    /// <param name="range">Range in meters</param>
    /// <param name="bearing">Bearing in degrees</param>
    /// <returns>End-point from the source given the desired range and bearing.</returns>
    public static PointLatLng CalculateDerivedPosition(PointLatLng source, double range, double bearing)
    {
        double latA = source.Lat * DEGREES_TO_RADIANS;
        double lonA = source.Lng * DEGREES_TO_RADIANS;
        double angularDistance = range / EARTH_RADIUS_M;
        double trueCourse = bearing * DEGREES_TO_RADIANS;

        double lat = Math.Asin(
            Math.Sin(latA) * Math.Cos(angularDistance) +
            Math.Cos(latA) * Math.Sin(angularDistance) * Math.Cos(trueCourse));

        double dlon = Math.Atan2(
            Math.Sin(trueCourse) * Math.Sin(angularDistance) * Math.Cos(latA),
            Math.Cos(angularDistance) - Math.Sin(latA) * Math.Sin(lat));

        double lon = ((lonA + dlon + Math.PI) % (Math.PI * 2)) - Math.PI;

        return new PointLatLng(
            lat / DEGREES_TO_RADIANS,
            lon / DEGREES_TO_RADIANS);
    } 
```

Juste 以您的中心为来源：

```
for (int i = 0; i < 360; i++)
{
  vertices.Add(CalculateDerivedPosition(center, circleRadius, i));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-31T09:29:42.197

为了防止在某些纬度上出现省略号，我使用以下代码：

```
// Function to draw circle on map:

private void DrawCircle(BasicGeoposition CenterPosition, int Radius)
    {
    Color FillColor = Colors.Purple;
    Color StrokeColor = Colors.Red;
    FillColor.A = 80;
    StrokeColor.A = 80;
    Circle = new MapPolygon
        {
            StrokeThickness = 2,
            FillColor = FillColor,
            StrokeColor = StrokeColor,
            Path = new Geopath(Functions.CalculateCircle(CenterPosition, Radius))
        };
    mpBingMaps.MapElements.Add(Circle);
}

// Constants and helper functions:

const double earthRadius = 6371000D;
const double Circumference = 2D * Math.PI * earthRadius;

public static List<BasicGeoposition> CalculateCircle(BasicGeoposition Position, double Radius)
{
    List<BasicGeoposition> GeoPositions = new List<BasicGeoposition>();
    for (int i = 0; i <= 360; i++)
    {
        double Bearing = ToRad(i);
        double CircumferenceLatitudeCorrected = 2D * Math.PI * Math.Cos(ToRad(Position.Latitude)) * earthRadius;
        double lat1 = Circumference / 360D * Position.Latitude;
        double lon1 = CircumferenceLatitudeCorrected / 360D * Position.Longitude;
        double lat2 = lat1 + Math.Sin(Bearing) * Radius;
        double lon2 = lon1 + Math.Cos(Bearing) * Radius;
        BasicGeoposition NewBasicPosition = new BasicGeoposition();
        NewBasicPosition.Latitude = lat2 / (Circumference / 360D);
        NewBasicPosition.Longitude = lon2 / (CircumferenceLatitudeCorrected / 360D);
        GeoPositions.Add(NewBasicPosition);
    }
    return GeoPositions;
}

private static double ToRad(double degrees)
{
    return degrees * (Math.PI / 180D);
} 
```

此代码适用于小于几英里的小半径。

# javascript - 用jquery分配输入文本字段的初始值

> ID：12891602
> 
> 赞同：0
> 
> 时间：2012-10-15T08:11:16.357
> 
> 标签：javascript, html, jquery

我正在尝试使用 jquery 为文本框分配初始值。这是文本字段

```
 <input type="text" class="info"/> 
```

这会创建多个文本字段，我需要使用来自数据库的初始值填充文本字段。我遇到了问题，因为我正在尝试使用 jquery 适配器。

对此有任何线索吗？

提前致谢。

下面是详细代码：

我包括 index.html

```
 <?php include "index.html"?>; 
```

这将一些文本字段放入record.php：......

包含 index.html 后，我使用此代码为具有类名“info”的文本框分配初始值：

```
 $('.info').each(function() {
                $('.info').val('yourvalue');
            }); 
```

我将分配一些数据库记录到每个输入字段，而不是分配一个常量值（这里是“yourvalue”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:12:29.127

```
$('.info').val('yourvalue'); 
```

将 yourvalue 替换为您要设置的值..

在您的 ajax 请求的成功回调中设置此值..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:33:54.097

```
 $('.aciklama').each(function() { $('.aciklama').val('yourvalue'); }); 
```

你知道 $('.aciklama') 是一个数组，当你迭代你的数组得到对象时，你仍然得到 $('.aciklama') 数组并设置数组值，正如我所见这是不正确的。你应该这样写：

```
$('.aciklama').each(function(index, item) { $(item).val('yourvalue'); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:21:23.150

```
$('.info').val('value-to-be-set'); 
```

> .val(value) - 设置匹配元素集中每个元素的值

上面的代码将设置输入字段的值，其中类名 if 'info'

[***在这里阅读更多***](http://api.jquery.com/val/)

# c++ - 使用函数的 C++ 字符串输入

> ID：12891603
> 
> 赞同：3
> 
> 时间：2012-10-15T08:11:19.460
> 
> 标签：c++, string, input, logic

我已经编写了一个代码，用于在 C++ 中从用户那里获取字符串。这是代码

```
#include<iostream>
#include<string>
using namespace std;
string input;
void enterstring()
{
    cout<<"\nEnter input: ";
    getline(cin,input);

}
void displaystring()
{
    cout<<"\nyour string is "<<input<<endl;

}
{
    int main()
{
int choice=0;
while(choice!=3)
{

    cout<<"Enter choice: "<<;
          cin>>choice;
    switch(choice)
    {
        case 1: enterstring();
        break;
        case 2: displaystring();
        break;
        case 3: cout<<"\nQuit";
        break;
        default: cout<<"\ninvalid choice try again";
        break;

    }
    return 0;
} 
```

上述代码的输出：

```
Enter choice: 1
Enter input: 
Enter choice: 
```

输入部分被跳过我不知道为什么问题出在哪里。逻辑错了，语法有什么问题。当我在不使用 while 循环等的情况下调用函数时，它工作正常，但在这种情况下它不起作用。帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:15:10.280

问题是您将选择读取为 int 但输入是带有换行符的字符串。

在您的示例中，输入不是 1 是 "1\n" 1 选择为 int，'\n' 在缓冲区中。当您调用该函数从缓冲区读取的 getline 函数时，找到换行符并返回一个空字符串。为避免这种情况，您应该将选项读取为字符串，而不是使用 atoi 强制转换为 int。

编辑：

你说的对。它仍然无法正常工作。但是这里有一个可以工作的版本。

```
#include <iostream>
#include <string>

using namespace std;
string input;
void enterstring(){
    cout<<"\nEnter input: ";
    cin.ignore();
    getline(cin,input);
}

void displaystring(){
    cout<<"\nyour string is "<<input<<endl;
}

int main(){
    int choice=0;
    while(choice!=3){
        cout<<"Enter choice: ";
        cin>>choice;
        switch(choice){
            case 1: enterstring();
            break;
            case 2: displaystring();
            break;
            case 3: cout<<"\nQuit";
            break;
            default: cout<<"\ninvalid choice try again";
            break;
        }
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:20:35.090

您发布的代码无效：您缺少`"`after `Enter choice :`。

除此之外，您的代码似乎可以在 ideone 中运行（我添加了一些缩进并纠正了一些小错误。我还添加了一个`main`函数）。你可以在这里看到它：http: [//ideone.com/ozvB1](http://ideone.com/ozvB1)

# php - 同时模拟接口和特征

> ID：12891606
> 
> 赞同：3
> 
> 时间：2012-10-15T08:11:25.730
> 
> 标签：php, phpunit

是否可以在 PHPUnit 模拟构建器中构建这样的对象（实现接口并同时使用特征）？

```
<?php

class FooClassThatD implements BarInterface
{
    use BazTrait;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T17:57:22.070

我认为本机模拟对象方法不可能做到这一点，因为它们使用特定模板来模拟具有不允许任何扩展点的特征的类。您可以使用构建模拟的特定于测试的类轻松解决它。

```
abstract class BarWithBazTraitTestClass implements BarInterface
{
    use BazTrait;
} 
```

为这个类创建一个模拟，就像为任何其他抽象类一样。

```
$mock = $this->getMockForAbstractClass('BarWithBazTraitTestClass'); 
```

# git - 版本控制和 Git 策略？

> ID：12891607
> 
> 赞同：0
> 
> 时间：2012-10-15T08:11:32.723
> 
> 标签：git, version-control

我使用 git 来维护某种版本控制并在多台机器上同步我的工作，因为我确实倾向于在多台机器上工作。我是唯一一个处理我的代码的人。

我可以使用 git 完成大部分基础操作，例如 git checkout a file 将单个文件返回到早期状态，并使用 git revert （我害怕使用 git revert ，因为我还没有完全理解其中的一些复杂性）来返回整个项目到较早的状态。我有时也会使用 git branch 将代码分叉到不同的方向，特别是在我不确定方向的情况下。

然而，我对 git 的了解有些薄弱，当我进一步研究它时，我仍然倾向于继续逐步重新保存源文件。例如，当我完成代码时，我可能在 project18.c 上工作，在完成代码时已经经历了 1...18。这是在处理文件时频繁进行 git 提交的补充，因此有效地我有两种方法可以“回拨”我在项目上的工作。然而，这种增量文件编号不适用于分布在多个文件中的代码，因为跟踪跨多个文件实现的功能太疯狂了。我怀疑通过更加努力地创建封装的自包含函数，并从周围的函数中隐藏内部实现是解决我的一些问题的更优雅的解决方案。

人们经常建议为每个主要的新特性或代码段执行一次 git 提交，但是当我无法执行频繁的 git 提交时，我经常会花费大量时间手动“退出”一段有问题的代码，如果我我正在放弃实现代码的特定方式。我怀疑提前更好地规划//设计代码有时可能会有所帮助，但通常很难完全预测最终会成为死胡同或有缺陷的代码。

我正在寻找一种实用的版本控制策略，它在事情进展不顺利时特别有用，并且有助于调试问题部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T08:20:37.463

如果您认真对待自己的工作习惯（例如，如果您想为生活编写代码或为某些免费软件项目做出贡献），那么最好习惯于经常提交。提交中仍然应该有一些逻辑，对于您编写的每十行代码有一个单独的提交是一种失礼。如果您遇到回归，小的和逻辑的提交很适合审查或[bisect 。](https://stackoverflow.com/questions/4713088/how-to-use-git-bisect)

如果您需要有许多检查点，您可以为您正在处理的功能的测试套件提交一个提交，并为测试套件的每个通过部分提交一个提交。或者类似的东西，取决于你的工作方式。（如果需要，使用 Git 可以在发布更改时随时清理历史记录。）如果您发现这还不够，那么您做错了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T08:26:15.450

The solution to your problem comes in two different parts:

**Understanding commits**

You need to better understand the idea behind committing and the way it was thought of originally. A commit ideally has to be at the same level with a piece of code that does something (like a function or a refactoring of some part). So you need to commit often, and if you fail to do so, you will simply lose information on your progress that would have been recorded if you did those commits. I recommend reading [http://git-scm.com/book](http://git-scm.com/book) for a better understanding of how git works.

**Exploring branching**

If you are working on different unrelated features on the same project, it may be annoying to do successive commits that have nothing to do with each others. Here comes branching, a powerful feature that lets you work on different ideas on the same time, independently on each other (code-wise). You can find informations on how to branch and so in the previous link. But also, here is an article about a model of working with git branches that is particularly helpful for large softwares with multiple features [http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

# iphone - 将图像插入到 sqlite iphone

> ID：12891611
> 
> 赞同：0
> 
> 时间：2012-10-15T08:11:39.693
> 
> 标签：iphone, ios5, xcode4

大家好我是Xcode的新手我正在尝试将图像从UITableView插入到ios 5中的数据库（sqlite3）我尝试了下面的代码

```
-(void)addItemCUR
{

    if(addStmt == nil) {
        const char *sql = "insert into Table(C_Name, C_Image) Values(?,?)";
        if(sqlite3_prepare_v2(database, sql, -1, &addStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));
    }

    sqlite3_bind_text(addStmt, 1, [C_Name UTF8String], -1, SQLITE_TRANSIENT);

    NSData *ImageData = [[NSData alloc] initWithData:UIImagePNGRepresentation(self.C_Image)];
    int returnValue = -1;
    if(self.C_Image != nil)
       returnValue =        sqlite3_bind_blob(addStmt, 3, [ImageData bytes], [ImageData length], NULL);
    else
        returnValue =         sqlite3_bind_blob(addStmt, 4, nil, -1, NULL);

    if(SQLITE_DONE != sqlite3_step(addStmt))
        NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
    else
        //SQLite provides a method to get the last primary key inserted by using sqlite3_last_insert_rowid
        rowid = sqlite3_last_insert_rowid(database);

    //Reset the add statement.
    sqlite3_reset(addStmt);
} 
```

我收到类似的错误

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFConstantString CGImage]: unrecognized selector sent to instance 0xb7c0'
*** First throw call stack:
(0x158f052 0x1720d0a 0x1590ced 0x14f5f00 0x14f5ce2 0xf8b6c 0x5c65 0x3182 0x7030 0x16d71d 0x16d952 0x9f586d 0x1563966 0x1563407 0x14c67c0 0x14c5db4 0x14c5ccb 0x1478879 0x147893e 0xdda9b 0x2ac8 0x2a25)
terminate called throwing an exceptionsharedlibrary apply-load-rules all
(gdb 
```

请任何人帮助我提前解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:35:34.700

将整个图像存储到数据库中是否有任何特定原因？

我想建议您将图像存储在应用程序的 Documents/Caches 文件夹中，并且只有包含图像名称的位置才会作为 varchar 存储到您的数据库中，而不是将整个图像存储到数据库中。因此，当您下次需要使用图像时，您只需遵循为单个图像存储的路径即可。因此，应用程序也不必费心重复重绘图像，这也将提高应用程序的性能。

下面是练习的示例代码..

```
- (void)saveImage:(UIImage *)image forPerson:(NSString *)fullName  
{
    // 先生成文件名
    NSString *filename = [fullName stringByAppendingString:@".png"]; // 或 .jpg

    // 获取应用文档目录的路径
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    // 附加文件名并获取完整的图像路径
    NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:filename];

    // 现在将图像转换为 PNG/JPEG 并将其写入图像路径
    NSData *imageData = UIImagePNGRepresentation(image);
    [imageData writeToFile:savedImagePath atomically:NO];   

    // 这里你将 savedImagePath 保存到你的数据库
    ...
}

```

要取回图像并显示...

```
- (UIImage *)loadImage:(NSString *)filePath  
{
    返回 [UIImage imageWithContentsOfFile:filePath];
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:37:28.783

尝试将图像存储在本地文档目录中。然后将图像路径存储在 sqlite 中。以下代码将对您有所帮助。

```
NSData *imageData = UIImagePNGRepresentation(photo);//photo - your image
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
NSString *pngFilePath = [NSString stringWithFormat:@"%@/photo.png",documentsDir]; 
[imageData writeToFile:pngFilePath atomically:YES];

NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
NSString *docDirectory = [sysPaths objectAtIndex:0];
NSString *filePath = [NSString stringWithFormat:@"%@/photo.png", docDirectory];

sqlite3 *database;
@try 
{
    NSString *query = [NSString stringWithFormat:@"INSERT INTO Photos(PhotoPath) VALUES('%@')",filePath];
    NSString *databasePath;
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    databasePath = [documentsDir stringByAppendingPathComponent:@"GolfElite.sqlite"];
    if (sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK)    
    {
        NSLog(@"DB opened...");
        sqlite3_exec(database, [query UTF8String], NULL, NULL, NULL);   
    }

}
@catch (NSException * e) 
{
    NSLog(@"Exception = %@", e);
}
@finally
{
    sqlite3_close(database);
}
NSLog(@"Photos inserted successfully.."); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:40:56.197

这是一个包含图像信息的示例，此代码是一个演示代码...

```
- (void) saveAllData {

if(isDirty) {

if(updateStmt == nil) {
const char *sql = "update Coffee Set CoffeeName = ?, Price = ?, CoffeeImage = ? Where CoffeeID = ?";
if(sqlite3_prepare_v2(database, sql, -1, &amp;updateStmt, NULL) != SQLITE_OK)
NSAssert1(0, @"Error while creating update statement. '%s'", sqlite3_errmsg(database));
}

sqlite3_bind_text(updateStmt, 1, [coffeeName UTF8String], -1, SQLITE_TRANSIENT);
sqlite3_bind_double(updateStmt, 2, [price doubleValue]);

NSData *imgData = UIImagePNGRepresentation(self.coffeeImage);

int returnValue = -1;
if(self.coffeeImage != nil)
returnValue = sqlite3_bind_blob(updateStmt, 3, [imgData bytes], [imgData length], NULL);
else
returnValue = sqlite3_bind_blob(updateStmt, 3, nil, -1, NULL);

sqlite3_bind_int(updateStmt, 4, coffeeID);

if(returnValue != SQLITE_OK)
NSLog(@"Not OK!!!");

if(SQLITE_DONE != sqlite3_step(updateStmt))
NSAssert1(0, @"Error while updating. '%s'", sqlite3_errmsg(database));

sqlite3_reset(updateStmt);

isDirty = NO;
}

//Reclaim all memory here.
[coffeeName release];
coffeeName = nil;
[price release];
price = nil;

isDetailViewHydrated = NO;
} 
```

# javascript - 在 IE8 中搜索节点

> ID：12891613
> 
> 赞同：0
> 
> 时间：2012-10-15T08:11:49.770
> 
> 标签：javascript

我使用 Javascript 函数来搜索 html 页面并搜索和替换字符串。但是这个功能在 IE7 和 IE8 中不起作用。问题来自使用`childNodes`. 您是否有用于在 DOM 的所有元素中搜索和替换字符串的源代码或脚本（与 IE 7/8 兼容）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:16:24.400

你可以使用纯javascript函数[替换](http://www.w3schools.com/jsref/jsref_replace.asp)

# database - 需要有关多语言数据存储的建议

> ID：12891614
> 
> 赞同：1
> 
> 时间：2012-10-15T08:11:54.853
> 
> 标签：database, multilingual

对于在多语言网站和电子商店工作过很多经验的人来说，这更像是一个问题。这不是数据库结构问题或类似的问题。这是关于如何存储多语言网站的问题：而不是如何存储翻译。多语种网站不仅可以翻译成多种语言，还可以有特定语言的内容。例如，网站的英文版本可以具有与俄语或任何其他语言的同一网站完全不同的结构。对于这种情况，我想出了 2 种存储模式：

```
// NUMBER ONE

table contents // to store some HYPOTHETICAL content
    id         // content id

table contents_loc // to translate the content
    content, // ID of content to translate 
    lang,    // language to translate to
    value,   // translated content
    online   // availability flag, VERY IMPORTANT

ADVANTAGES:
- Content can be stored in multiple languages. This schema is pretty common, except maybe for the "online" flag in the "_loc" tables. About that below.
- Every content can not only be translated into multiple languages, but also you could mark online=false for a single language and disable the content from appearing in that language. Alternatively, that record could be removed from "_loc" table to achieve the same functionality as online=false, but this time it would be permanent and couldn't be easily undone. For instance we could create some sort of a menu, but we don't want one or more items to appear in english - so we use online=false on those "translations".

DISADVANTAGES:
- Quickly gets pretty ugly with more complex table relations.
- More difficult queries.

// NUMBER 2

table contents // to store some HYPOTHETICAL content
    id,        // content id
    online     // content availability (not the same as in first example)
    lang,      // language of the content
    value,     // translated content

ADVANTAGES:
1\. Less painful to implement
2\. Shorter queries

DISADVANTAGES:
2\. Every multilingual record would now have 3 different IDs. It would be bad for eg. products in an e-shop, since the first version would allow us to store different languages under the same ID and this one would require 3 separate records to represent the same product. 
```

第一个存储选项似乎是一个很好的解决方案，因为您也可以轻松地使用它而不是第二个，但反过来您就不能轻松地做到这一点。唯一的问题是……第一个结构似乎有点矫枉过正（除了产品存储等情况）

所以我对你的问题是：

实施第一个存储选项是否合乎逻辑？根据您的经验，有人会需要这样的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:52:07.727

我们问自己的问题总是：

多种语言的内容是否相同，它们是否需要关系？

**可翻译模型**

如果答案是肯定的，您需要一个可翻译的模型。因此，模型具有同一记录的多个版本。因此，您需要为每条记录设置一个语言标志。

优点：它为您提供了一个结构，您可以在其中查看例如哪些内容尚未翻译。

**每种语言的单独记录** 但很多时候，我们认为另一种解决方案是更好的解决方案：完全分离两种语言。我们主要在 CMS 解决方案中看到这一点。这个故事不仅被翻译了，而且也有所不同。例如，在国家 1，他们有不同的菜单结构、其他新闻项目、其他产品和其他页面。

优点：完全的灵活性，没有来自其他语言的意外记录。

**示例** 我们认为它就像写一本杂志：您可以写一本，然后翻译成另一种语言。是的，这是可能的，但在现实世界中，我们越来越多地看到内容在结构上有所不同。人们不喜欢感到惊讶，因此您需要许多步骤来确保内容不会以错误的语言显示，页面不会被重复创建等。

**共享逻辑** 所以我们做的大部分时间是：共享视图，使按钮、输入等可翻译，但保持内容分离。这样每个管理员都可以在他的区域内工作。如果我们需要确认某些记录在所有语言中都可用，我们总是可以通过在它们之间创建链接（很好的关系）来欺骗它，但这不是我们大部分时间使用的标准。

**像产品这样的真正可翻译的记录** 因为我们在创建模型等方面很灵活，所以我们可以根据需求决定如何使用它们。我不会试图寻找一个适用于所有人的通用解决方案，因为没有。您需要基于您的数据的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:10:08.877

假设您需要一个可**翻译的模型**，正如 Luc 所描述的那样，我建议为内容表的 value 列提供某种特殊字符分隔的键值对格式。例子：

@en=英语术语@de=德语术语

您可以使用 UDF（T-SQL 中的用户定义函数）来设置/获取基于指定语言的适当术语。

用于**选择**：

从内容中选择 id, dbo.GetContentInLang(value, @lang)

对于**更新**：

更新内容集 value = dbo.SetContentInLang(value, @lang, new_content) where id = @id

UDF：

一种。确实会影响性能，但这也是您必须在 content 和 content_loc 表之间进行的连接的情况

和

湾。有点难以实现，但实际上可以在整个数据库中重用。

您也可以在应用程序/UI 层执行上述操作。

# ruby-on-rails-3 - Rails，功能介于枚举和多对多之间的 gem

> ID：12891615
> 
> 赞同：1
> 
> 时间：2012-10-15T08:12:02.483
> 
> 标签：ruby-on-rails-3, activerecord, gem

我有我的 Rails 应用程序模型，它的选项很少（我认为不超过 10 个）。像 Product - Category 之类的东西，其中产品可以是 1 个或多个类别的一部分。但我认为我的类别太少，无法参与成熟的多对多结构。此外，类别列表是预定义的，几乎永远不会改变。

我认为从 sql 方面来看，这可能看起来像`categories`具有此类内容的字符串字段：`"Fruits|Vegetables|..."`

也许有人知道这种功能的预先存在的宝石，或者这样做可能没有真正的优势，我应该选择标准`many-to-many`？

我检查了`acts-as-taggable-on`插件，但我认为它不太适合这项任务。

像我认为最合适的枚举宝石`enumerize`，但它们只允许选择单个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:54:24.817

目前推出了以下组合：

这个宝石： [https ://github.com/pboling/flag_shih_tzu](https://github.com/pboling/flag_shih_tzu)

在模型中：

```
class Product < ActiveRecord::Base
  KINDS =  { 1 => :fruit, 2 => :vegetable }
  include FlagShihTzu
  attr_accessible *KINDS.values
  as_flags KINDS 
```

然后在视图中（haml）：

```
 =form_for [@product] do |f|
      -Product::KINDS.each do |k, v|
        =f.check_box v
        =f.label v 
```

更新：

另一个解决这个问题的宝石：[https ://github.com/joelmoss/bitmask_attributes](https://github.com/joelmoss/bitmask_attributes)

# javascript - 使用 jquery 文档就绪功能在绝对 div 中居中图像在 IE 8 中随机工作

> ID：12891617
> 
> 赞同：2
> 
> 时间：2012-10-15T08:12:04.360
> 
> 标签：javascript, jquery, html, css

显示数据时，我使用此代码将图像居中在结果 div 内的缩略图字段中：

```
<div class='result'>
    <div class='date_field'>15 Okt</div>
    <div class='thumbnail_field th_div'><img src='p.png' class='thumb'></div>
    <div class='content_field'><a href="p.html">p</a></div>
    <div class='price_field'>5</div>
</div>

.result{position: relative;background-color: white;height: 100px;overflow: hidden;margin: 0px 10px;}
.thumbnail_field{position: absolute;top: 8;left: 15%;width: 100px;height: 75px;background-color: #FFF;}
.th_div img{position: absolute;}

$(document).ready(function(){
var h = 75;
var w = 100;
$('.thumb').each(function(){
    $(this).load(function() {
        var width=$(this).width();
        var height=$(this).height();
        var ratio=width/height;
        var pwidth=$(this).parent().width();
        var pheight=$(this).parent().height();
        var newheight;
        var topmargin;
        var newwidth;
        var leftmargin;

        if(width/height>=4/3){
            $(this).css("width",w);
            newheight=w/ratio;
            topmargin=(h-newheight)/2;
            $(this).css("top",topmargin+"px")
        }else{
            $(this).css("height",h);
            newwidth=h*ratio;
            leftmargin=(w-newwidth)/2;
            $(this).css("left",leftmargin+"px")
        }

    });
});
}); 
```

它在 Chrome 和 Firefox 中运行，但在 IE 8 中随机运行。关于可能是什么原因的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:16:51.060

尝试使用`innerWidth()`and`innerHeight`而不是

```
width() and height() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:27:59.483

这可能是 $.load 函数的缓存问题。

如果图像尚未出现在浏览器缓存中，则加载函数的回调会触发。如果图像存在于缓存中，则不会执行图像加载函数回调 - 这解释了 IE8 上代码的不稳定行为。

更多关于这里的信息：[所有 IE 版本中的 jQuery .load() 问题](https://stackoverflow.com/questions/3893081/jquery-load-problem-in-all-ie-versions)

This caveat also listed in the jQuery `.load()` description page: [http://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

**Solution**:

```
$(".thumb").one("load",function(){
// Add your positioning code here
})
.each(function(){
if(this.complete) $(this).trigger("load");
}); 
```

Cheers!

# java - 使用 RequestFactory 和 GAE 数据存储

> ID：12891629
> 
> 赞同：3
> 
> 时间：2012-10-15T08:13:02.137
> 
> 标签：java, google-app-engine, gwt, requestfactory

我正在使用 Google Web Toolkit (2.4) 和 Eclipse 作为 IDE 在 Google App Engine (1.7) 上开发应用程序。要部署我的应用程序，我需要创建实体并使用 GAE 数据存储来存储我的实体值。在今年夏天之前，我注意到有一个“RPC 服务”，它可以创建使用 requestfactory 框架存储实体所需的所有适当的实体代理、值代理和定位器类，但正如我最近在更新后注意到的那样，这些功能已从 eclipse 中删除插入。

有没有人知道使用 requestfactory 的任何方法，而无需为我的应用程序中的每个实体手动创建类列表（代理、值代理、定位器）？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:59:25.883

不可能。拥有一个 Eclipse 插件会很酷，您可以在其中单击 Server-Class 并说“创建代理、定位器等”。

您可以做的更快的是：只需从服务器类的 Refactor 菜单中选择**Extract Interface...**并将其安全地作为代理接口。

如果您使用 objectify，那么您不需要服务器端类，这是真的。

# c# - 如果扩展后在URL中添加了一些单词，如何重定向到自定义错误页面？

> ID：12891634
> 
> 赞同：0
> 
> 时间：2012-10-15T08:13:19.487
> 
> 标签：c#, asp.net, dotnetnuke

我正在做一个 DNN 项目我面临一个问题因为我有以下 URL http://test/EN/Concept/Informationsystems.aspx 并且有些用户在 url 中输入了任何错误但在 .aspx 扩展名之前它重定向到更正通过 web config 设置的错误页面。但我面临的问题是，如果某些用户通过添加和 .aspx 扩展名之前的单词输入错误的 url，例如上面相同的 url 被错误输入，例如 http://test/EN/Concept/Informationsystems.aspx* *qeqwewqeqwe* * 然后它重定向到 IIS 错误页面，但我希望它重定向到我在 Web 配置中设置的相同错误页面。我该怎么做请建议我设置要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:25:38.847

for status specific custom page , you can extend customErrors like this.

So just check which error status code is given by IIS and write code accordingly e.g.

```
<customErrors mode="RemoteOnly" defaultRedirect="~/ErrorPages/Oops.aspx">
    <error statusCode="404" redirect="~/ErrorPages/404.aspx" />
</customErrors> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:24:41.220

在配置文件中添加标签

```
<customErrors mode="On" defaultRedirect="Error.aspx">
  <!--404 error code is for resource not found -->
  <error statusCode ="404"  redirect="Error.aspx" />
</customErrors> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T07:38:58.497

试试这个解决方案：

在下面添加此代码**在 web.config 文件中**

 **```
httpErrors

  remove statusCode="404" subStatusCode="-1" 

  error statusCode="404" prefixLanguageFilePath="" path="" responseMode="ExecuteURL"   

httpErrors 
```

在路径中指定您的自定义错误页面。请检查语法。

我希望这能帮到您...**

# ios - 从 iOS 中的数据库 SQLite 加载数据

> ID：12891636
> 
> 赞同：-2
> 
> 时间：2012-10-15T08:13:34.820
> 
> 标签：ios, database, sqlite

你知道有什么教程告诉我如何从 SQLite 数据库 SQLite 中读取数据并将它们放在一个表中吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-15T08:24:25.760

[我认为你应该试试这个，希望这会有所帮助](http://www.raywenderlich.com/12170/core-data-tutorial-how-to-preloadimport-existing-data-updated)

[还有一个](http://www.raywenderlich.com/913/sqlite-101-for-iphone-developers-making-our-app)

该网站上有一堆专门使用 Core Data 和 SQLite 的教程，我相信它可能会有所帮助

# sql - CTE 的意外结果

> ID：12891637
> 
> 赞同：2
> 
> 时间：2012-10-15T08:13:46.883
> 
> 标签：sql, sql-server-2008, common-table-expression

我创建了一个使用多个 CTE（主要用于递归分层工作）的复杂过程。
在小样本数据集上，一切都按预期进行，但是当我将代码应用于大数据集时，我收到了意外（和错误）的结果。

我认为我已经将其范围缩小到 CTE。递归 CTE 是在几个早期 CTE 中处理的“馈送”数据，这似乎是问题所在。

我设置了一个[示例数据集](http://sqlfiddle.com/#!3/c8a47/6)，如下所示：

*   具有唯一数据的四行
*   每行接收一个随机行号（这是在 CTE 中添加的

然后，我获取第一个 CTE 的结果并在第二个 CTE 中执行自联接。
我希望所有行都加入，每个行都加入。实际发生的是不相等的行连接起来。

有人可以为这种行为提供解释吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T08:17:42.000

这个结果没有什么意外的，除非你不理解它。

每个 CTE 都被解析`each and every time`，它被引用。是的，这就是为什么在高度事务性表上的简单 CTE 可以在一个引用中返回 4 行，在接下来的 2 层中返回 5 行。

然而，在您的示例中，这是因为 ORDER BY NEWID() 为原始 CTE 的每个分辨率提供了不同的 row_number()-ing。您是否认为 CTE 存储在内存中并被缓存？在 SQLFiddle 站点上，在您的结果下，有一个“查看执行计划”链接。它显示**了对 table 的 2 次不同的单独扫描**。

# visual-studio-2010 - 在 VS2010 中添加对 Windows Phone Toolkit 的引用

> ID：12891638
> 
> 赞同：0
> 
> 时间：2012-10-15T08:13:49.680
> 
> 标签：visual-studio-2010, reference, windows-phone-7.1

我正忙于一个 windows phone 应用程序，需要使用一个可扩展的列表控件。经过一番搜索，我发现可以下载并添加对 Windows Phone Toolkit 的引用。

关于使用什么 .dll 文件并将其添加到项目中的说明似乎有点过时了。或者至少是我找到的说明。显然，您必须将 dll 文件添加到位于此处的项目中：

> C:\Program Files\Microsoft SDKs\Windows Phone\v7.1\Toolkit\Aug11\Bin\Microsoft.Phone.Controls.Toolkit.dll

但是我电脑中的目录不一样。我可以跟进这里：

> C:\Program Files\Microsoft SDKs\Windows Phone\v7.1\

然后没有“工具包”文件夹等。我只是想知道是否有人可以指出在哪里可以找到我必须在我的项目中引用的这个 .dll？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T03:22:14.593

您可以从这里下载最新的工具包并获取更多信息[http://silverlight.codeplex.com/releases/view/94435](http://silverlight.codeplex.com/releases/view/94435)。我希望它有帮助

# zend-framework - Zend 控制器中的全局变量

> ID：12891639
> 
> 赞同：1
> 
> 时间：2012-10-15T08:13:52.563
> 
> 标签：zend-framework

```
 class UserController extends Zend_Controller_Action
  {
      protected $varGlobal;
      public function oneAction()
      {
           $this->varGlobal=0;

           .........
       }
      public function twoAction()
       {
            $temp=$this->varGlobal;//temp return null;
        }

  } 
```

执行 oneAction() 后如何保持 varGlobal 的值？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:10:22.237

You could also try static properties :

```
class UserController extends Zend_Controller_Action
  {
      protected static $varGlobal;
      public function init(){
            self::$varGlobal=0;
      }
      public function oneAction()
      {
           self::$varGlobal=15;

           .........
       }
      public function twoAction()
       {
            $temp=self::$varGlobal;//temp return 0,don't change value after excute oneaction();
        }

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T11:39:32.943

为什么不使用 Zend_Controller_Action::_setParam() 和 Zend_Controller_Action::_getParam() ？还是 Zend_Registry ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:35:03.390

好吧，`$this->varGlobal`只要您`twoAction`在同一个对象上调用方法，它就会一直存在。对于每个请求，都会创建新对象。因此，如果您的下一个请求转到 twoAction，则不会触发一个操作。

为了为每个对象设置变量，您可以`init`在那里使用函数并初始化变量。

# objective-c - 如何确保 SMJobSubmit 提交的二进制文件是真实的？

> ID：12891646
> 
> 赞同：1
> 
> 时间：2012-10-15T08:14:19.097
> 
> 标签：objective-c, macos, security, launchd

我在 Mac 上有一个应用程序，它需要提升权限才能执行某些任务。为此，我在我的 App 包中携带了一个二进制可执行文件，每当需要提升时，我都会使用`SMJobSubmit()`. 除了这个可执行文件，我还向可执行文件提交了一个带有某些参数的 plist 文件，以告诉它它需要做什么。

我担心的是如何确保可执行文件运行是我打算运行的文件。如果有人用恶意的可执行文件替换了可执行文件，如果授予 root 权限可能会造成严重破坏怎么办？launchd 或 SMJobSubmit 是否提供任何豁免权，还是我必须在我的最后验证签名和校验和？奇怪的是，我在网上找不到关于这个问题的讨论，也许我在这里遗漏了一些微不足道的东西。

这个[博客](http://www.stairways.com/blog/2012-08-06-smjobsubmit)给出了一个很好的使用 SMJobSubmit 的例子。我已经在相同的线路上实施了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:14:14.953

从您提供的链接中的信息来看，`SMJobSubmit`所做的只是安装一个临时`launchd`守护程序，该守护程序依赖于用户来验证安装是否合法。我不确定你如何设想你的可执行文件被替换，但如果你想防止被篡改，你可以生成文件的校验和，并将其与预先针对真正的二进制文件生成的嵌入式校验和进行比较。

然后再次，如果攻击者可以访问您的整个源，他们可以替换源代码校验和和二进制校验和以匹配，或者完全跳过检查......

# c# - 如何设置控件的 DisplayRectangle 属性 (.NET)

> ID：12891647
> 
> 赞同：1
> 
> 时间：2012-10-15T08:14:26.163
> 
> 标签：c#, .net, controls

我正在设计一个控件，用户可以在其中指定`DisplayRectangle`与`ClientRectangle`.

从我在 MSDN 文档中阅读的内容来看，`DisplayRectangle`只有一个 get 访问器，因此无法设置其尺寸，但这在我的控制中是必不可少的！

任何人都可以建议我如何安全地实现`DisplayRectangle`同时具有 get 和 set 访问器的方法吗？- 或解释为什么这是不好的做法？

谢谢。

**测试：**

1.  将`TabControl`样式设置为`UserPaint`，并调整`Alignment`属性，`DisplayRectangle`移动以补偿选项卡的位置。假设`TabControl`有一个内置机制来设置 Rectangle 边界。

2.  用红色和蓝色创建`DemoControl : Control`、绘制并尝试调用......不是我想要的......但没有产生任何结果！`ClientRectangle``DisplayRectangle``SetDisplayRectLocation(x, y)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:40:22.600

为了允许用户设置控件的 DisplayRectangle 属性的边界，我提出了以下解决方案：

```
public class ExtendedControl : Control
{
    private Rectangle displayRectangle;

    protected override Rectangle DisplayRectangle
    {
        get { return this.displayRectangle; }
    }

    public void SetDisplayRectangle(Rectangle rect)
    {
        this.displayRectangle = rect;
    }

    public ExtendedControl()
    {
        this.displayRectangle = base.DisplayRectangle;
    }
} 
```

# signal-processing - 用离散随机变量计算 SNR

> ID：12891649
> 
> 赞同：0
> 
> 时间：2012-10-15T08:14:33.343
> 
> 标签：signal-processing, probability

认为：

*   信号是一个随机变量，它以概率`S`取值。`{0, 1, 2, 3}``{0.3, 0.2, 0.1, 0.4}`
*   噪声是一个随机变量，它以概率`N`取值。`{-2, -1, 0, 1, 2}``{0.1, 0.1, 0.6, 0.1, 0.1}`

由`SNR`给出`(Power of S)/(Power of N) = ((Amplitude of S)/(Amplitude of N))^2`。

我的问题是：如何计算随机变量的幅度？是吗：

*   均方根 (RMS) 幅度 ?
*   差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:40:19.093

这是期望运算符`E[S^2]/E[N^2]`所在的位置。`E`

# javascript - 如何根据javascript中的两个属性对数组进行排序

> ID：12891653
> 
> 赞同：-1
> 
> 时间：2012-10-15T08:15:00.677
> 
> 标签：javascript

我正在使用以下代码在 javascript 中对数组进行排序：

```
 array.sort(function(a,b){
             var score_a = $.fuzzyMatch(a['name'], user).score,
                 score_b = $.fuzzyMatch(b['name'], user).score;

            return score_a < score_b ? -1 : score_a === score_b ? 0 : 1;
       }); 
```

排序是获取数组中每一行的“名称”属性，并通过我的模糊匹配函数运行它并返回一个分数，以便在数组顶部返回最相关的匹配项。

但是，我希望在这种情况下包含另一个属性，`a['folcode']`或者`b['folcode']`

所以总结一下，我如何修改我的代码以始终将包含的行放在`['folcode'] == 4`顶部，按最佳`['name']`匹配排序，然后返回`['folcode'] == 3`行，也按最佳名称匹配排序......等等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:19:33.523

如果您想按`folcode`主要和`name` *在*each中进行排序`folcode`，您将不得不产生一个比较，`folcode`就像您当前正在做的那样，但*仅在等于条件时*`name`返回名称比较的值。

 *```
function(a,b) {

    var code_a = a.folcode;
    var code_b = b.folcode;

    var score_a = $.fuzzyMatch(a.name, user).score;
    var score_b = $.fuzzyMatch(b.name, user).score;

    if(code_a === code_b)
        return score_a < score_b ? -1 : score_a === score_b ? 0 : 1;

    return code_a < code_b ? -1 : 1;

} 
```*

# javascript - CouchDB 查看搜索中的空白空间

> ID：12891660
> 
> 赞同：0
> 
> 时间：2012-10-15T08:15:21.997
> 
> 标签：javascript, view, couchdb

我正在尝试使用蒲团中的临时视图在 couchDb 中进行搜索。

视图代码是这样的：

```
function(doc)
 {
  if(doc.Time Zone.value == "America/Los_Angeles")
  { 
   emit([doc.owner, doc.source], null); 
  }
 } 
```

但是当我尝试晒出这个视图时，它给出了以下错误：错误：compile_error

表达式不评估函数。((new String("function(doc) { if(doc.Time Zone.value == \"America/Los_Angeles\") { emit([doc.owner, doc.source], null); } }")) )

我认为这是因为 doc.Time Zone 中有一个空格。如果删除这个空间，它会编译但没有给出任何值。编译器不想要这个空白空间。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:24:26.977

这是因为您访问文档的*时区* 字段的方式无效。

访问该字段的正确方法是

```
doc['Time Zone'].value 
```

这是您面临的基本 JavaScript 问题。

# java - android 移动设备未显示在 Eclipse 的设备选择器上

> ID：12891667
> 
> 赞同：0
> 
> 时间：2012-10-15T08:16:07.820
> 
> 标签：java, android

花了很多时间后，这个问题没有解决。我正在使用 karbonn a+1，在安装所有驱动程序并运行`adb kill-server`and`adb start-server`之后`adb devices`，它没有在设备选择器上显示设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:19:32.700

您是否在设备上启用了“USB 调试”？

您可以在开发设置中找到此设置。如果您需要有关如何启用它的信息，请查看[有关使用硬件设备的 android 手册](http://developer.android.com/tools/device.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T05:56:59.070

可能是因为没有安装驱动。

*   从控制面板转到设备管理器。

现在如果Android手机下有一些驱动程序，那么其他设置可能会导致这种情况。否则，如果你的安卓显示黄色小标记，则说明驱动程序有问题。

*   右键单击那个'android'按钮
*   单击更新驱动程序并从计算机中选择最新的驱动程序。

那应该行得通。如果您购买了新手机，例如 Karbonn，并且尝试像我一样在线搜索 adb 驱动程序，它实际上是在您自己的手机上。导航到手机上的 SD-Card 并将“Pcdriver”复制到您的桌面。解压缩并更新您的驱动程序选择。希望这可以帮助。

如果您在 Windows 8 上，您可能必须在此之前禁用驱动程序签名：

1.  将鼠标指针移动到显示器的右上角。这将打开魅力栏。
2.  单击设置超级按钮。
3.  单击“设置”菜单底部的“更改 PC 设置”链接。
4.  单击立即重新启动按钮。
5.  单击疑难解答。
6.  单击高级选项。
7.  单击启动设置。
8.  单击重新启动按钮。您的计算机将重新启动。
9.  重新启动后，按 [F7] 键。这将选择 7) 禁用驱动程序签名强制选项。
10.  登录到 Windows 8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T10:46:54.080

如果您拥有来自小型制造商的具有自定义 USB ID 的 Android 设备，则必须完成这些步骤。

*   下载 Google USB 驱动程序（Android SDK Manager -> Extras）
*   在控制面板 -> 设备管理器中找到您的设备
*   单击属性-> 详细信息并选择硬件标识符属性。您应该会看到类似 USB\VID_2207&PID_0010&REV_0222&MI_01
*   更改 sdk/extras/google/usb_driver/android_winusb.inf

复制

> ```
> ;Google Nexus One
> %SingleAdbInterface%        = USB_Install, USB\VID_18D1&PID_0D02
> %CompositeAdbInterface%     = USB_Install, USB\VID_18D1&PID_0D02&MI_01 
> ```

为您的平板电脑添加新条目。将 VID 和 PID 更改为您设备的。（步骤 2 中的那些。）

> ```
> ;Orion Tablet
> %SingleAdbInterface%        = USB_Install, USB\VID_2207&PID_0010
> %CompositeAdbInterface%     = USB_Install, USB\VID_2207&PID_0010&MI_01 
> ```

*   将设备的 VID 添加到 Users/%user%/.android/adb_usb.ini 的末尾。注意 0x 六进制符号！

> ```
> # ANDROID 3RD PARTY USB VENDOR ID LIST -- DO NOT EDIT.
> # USE 'android update adb' TO GENERATE.
> # 1 USB VENDOR ID PER LINE.
> 0x2207 
> ```

*   删除设备的所有现有设备驱动程序
*   在您的设备上打开 USB 调试
*   插入设备
*   选择手动安装驱动
*   从 sdk/extras/google/usb_driver 中选择驱动程序
*   选择Android Composite ADB Interface
*   运行 adb kill-server
*   运行 adb 设备

您的设备现在应该显示在设备列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T08:21:44.733

你可以这样做

*   右键单击您的项目。

*   选择运行方式-> 运行配置。

*   `select tab`目标 - > 选择始终提示选择设备。

这可能会解决您的问题。:)

# c# - 在运行时更改用户及其在 WPF/Prism 桌面应用程序中的权限的常用方法

> ID：12891670
> 
> 赞同：2
> 
> 时间：2012-10-15T08:16:14.527
> 
> 标签：c#, wpf, prism, prism-4

我在使用基于 Microsoft Prism 框架的 WPF 桌面应用程序时遇到问题。该应用程序在启动时具有登录对话框，该对话框创建 AuthenticationContext（用户和角色）并运行 Prism Bootstrapper（创建 ShellWindow 并加载模块）。权限是使用标记扩展实现的，因此据我了解，在创建视图时会对其进行解析：

```
<MenuItem IsEnabled="{op:AuthToEnabled {x:Static a:ACL.CAN_CLOSE}}" ...> 
```

现在我正在尝试添加在运行时更改当前用户（及其权限）的能力。重新创建整个引导程序或 shell 窗口的可能方法无法按预期工作，并且通常看起来像 hack。

通常在使用 Prism 或 WPF 时，是否有通用的方法或最佳实践来执行此类操作（用户、权限本身及其更改）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:16:01.263

我不是肯定的，但我相信`{x:Static }`只会评估一次，即使您的权限发生变化也不会重新评估

当用户选择更改登录时，完全重新启动您的应用程序怎么样？

我使用我的一个应用程序执行此操作，该应用程序在登录信息更改时需要重新启动：

```
Process.Start(Application.ResourceAssembly.Location);
Application.Current.Shutdown(); 
```

# multithreading - 编排 Windows Azure Web 角色以应对偶尔的高工作负载

> ID：12891678
> 
> 赞同：2
> 
> 时间：2012-10-15T08:17:18.507
> 
> 标签：multithreading, azure, load-balancing

我正在运行一个 Windows Azure Web 角色，在大多数情况下，该角色接收的流量非常低，但有一些（可预见的）事件可能导致必须完成大量后台工作。后台工作由许多数据库调用 (Azure SQL) 和对外部 Web 服务的 HTTP 调用组成，因此它并不是真正的 CPU 密集型工作，但它需要大量等待数据库或 Web 服务响应的线程。后台工作由对 Web 角色的正常 HTTP 请求触发。

**我看到有两种选择来协调这一点，但我不确定哪个更好。**

*   **选项 1，线程：**当后台工作请求进来时，Web 角色会根据需要启动尽可能多的线程（或将各个工作项排队到线程池中）。在这个选项中，我会在繁重的工作负载期间配置一个更大的实例，因为这些线程可能需要大量内存。
*   **选项 2，自调用：**当后台工作的请求进来时，接收它的 Web 角色会为每一项后台工作向自己生成一个 HTTP 请求。在此选项中，我可以配置多个 Web 角色实例，因为 Windows Azure 的负载平衡器会在实例之间平衡 HTTP 请求。

选项 1 稍微简单一些，但它的缺点是只有一个实例可以处理后台工作。如果我希望多个 Azure 实例参与后台工作，除了将 HTTP 请求从角色发送到自身之外，我看不到任何其他选项，以便负载均衡器可以将一些工作委派给其他实例。

也许还有其他选择？

**编辑：**关于选项 2 的更多想法：当后台工作请求进来时，接收它的实例会将要完成的工作保存在某种队列中（Windows Azure 队列或一些作为任务工作的 SQL 表队列）。然后，它会向自己生成大量 HTTP 请求，以便负载均衡器“激活”所有角色实例。然后每个实例从队列中取出一个任务并执行该任务，然后获取下一个任务等，直到所有任务完成。这就像*偶尔将网络角色用作工作者角色一样*。

我知道这种方法有一种臭味（滥用 Web 角色作为工作角色，对同一个 Web 角色的 HTTP 请求），但我没有看到真正的缺点。

**编辑 2：**我看到我应该详细说明应用程序的确切情况：

该应用程序需要一直执行一些小任务。这些任务通常不会超过 1-10 秒，而且它们不需要大量的 CPU 工作。在正常的日子里，我们只有 50-100 个任务要完成，但在“特殊日子”（新年就是其中之一），他们可能会进入几个 10000 个任务，这些任务必须在 1-2 内完成小时窗口。这些任务以 Web 角色完成，我们有一个**Cron 作业，它****每分钟**启动一次任务。因此，Web 角色每分钟都会收到处理新任务的请求，因此它会检查必须处理哪些任务，将它们添加到某种队列中（目前它是一个带有 UPDATE 和 OUTPUT INSERTED 的 SQL 表，但我们打算切换有时到 Azure 队列）。目前，同一个实例处理任务**排队后立即**，但这不会扩展，因为几个 10'000 任务的串行处理需要太长时间。这就是为什么我们正在寻找一种**机制来将事件“任务可用”从初始实例广播到其他实例的原因。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:42:26.033

您是否考虑过使用队列来分配工作？您可以将需要处理的“任务”放入队列中，然后将工作分配给多个工作进程。

我在方法 1 中看到的问题是我将其视为“Scale Up”模式而不是“Scale Out”模式。通过部署许多小型 VM 实例而不是一个大型实例将为您提供更多的可扩展性 + 可用性恕我直言。此外，您提到您的工作不是 CPU 密集型的。如果您考虑 X-Small 实例，以 1 个小型实例（0.12 美元/小时）的成本，您可以部署 6 个 X-Small 实例（0.02 美元/小时），同样，以 1 个大型实例（0.48 美元）的成本，您可以部署 24 个X-小型实例。

此外，在“横向扩展”模式的情况下，您只需添加或删除实例就可以轻松扩展。在“Scale Up”（或“Scale Down”）模式的情况下，因为您正在更改 VM 大小，您最终将重新部署包。

对不起，如果我有点切线:) 希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T10:21:48.040

[添加作为单独的答案以避免 SO 告诉我切换到聊天模式 + 绕过评论长度限制] & 大声思考:)

我明白你的意思了。基本上通过 HTTP 请求，您可以将要处理的新任务的可用性广播到其他实例。

因此，如果我理解正确，当一个实例接收到要处理的任务的请求时，它会将该请求推送到某种队列中（就像你提到的那样，它可能是 Windows Azure 队列 [我个人实际上更喜欢那个] 或 SQL Azure 数据库[不喜欢那样，因为您必须实现自己的消息锁定算法]）然后将消息广播到需要完成某些工作的所有实例。剩余的实例（或者可能是广播它的实例）然后可以查看它们是否可以自由处理该任务。一个实例取决于其可用性，然后可以从队列中获取任务并开始处理该任务。

假设您使用了 Windows Azure 队列，当一个实例获取消息时，它会在一段时间内立即对其他实例不可用（Azure 队列的可见性超时期限），从而避免重复处理任务。如果任务处理成功，则处理该任务的实例可以删除该消息。

如果由于某种原因，该任务没有被处理，它会在可见性超时期限到期后自动重新出现在队列中。然而，这导致了另一个问题。由于您的实例基于触发器（生成 HTTP 请求）而不是轮询来查找任务，您将如何确保所有任务都完成？假设您只处理一个任务和一个任务并且由于您没有收到处理第二个任务的请求而失败，那么第一个任务将永远不会再被处理。显然它不会在实际情况下发生，但您可能需要考虑一下。

这有意义吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T01:28:38.873

我同意 Gaurav 和其他人考虑使用 Azure Queue 选项之一。这确实是一种方便的模式，可以清晰地分离关注点，同时还可以平滑负载。

这种基本的以队列为中心的工作流 (QCW) 模式在处理 Web 角色的 HTTP 请求（触发工作的机制，显然是通过调用 wget 的 cron 作业完成）时将工作请求放置在队列中。然后，Web 角色中的 IIS Web 服务器继续做它最擅长的事情：处理 HTTP 请求。它不需要负载均衡器的任何支持。

Web 角色需要尽快接受请求（然后为每个请求排入队列），但出队部分是*拉取*的，因此可以轻松调整负载以适应可用容量（或为负载调整容量！这就是云！）。您可以选择一次处理一个、一次处理两个或一次处理 N 个：无论您的测试（调整大小练习）告诉您什么都适合您部署的 VM 大小。

您可能也知道，Web 角色上的 RoleEntryPoint::Run 方法也可以实现为连续工作。Web 角色的默认实现基本上只是永远休眠，但您可以实现无限循环来查询队列以删除工作并处理它（并且不要忘记在队列中没有可用消息时休眠！失败这样做会导致资金泄漏，并可能使您受到限制）。正如 Gaurav 所提到的，在稳健地实施这种 QCW 模式时还有一些其他考虑因素（如果我的节点失败，或者如果我的代码中有错误（“毒药”）消息、错误等会发生什么），但您的用例没有似乎对此过于担心，因为 cron 工作的下一次踢球显然会解释任何（罕见，

将队列中的项目与处理队列中的项目分离确实是一个合乎逻辑的设计点。我的意思是您可以随时更改它并将处理端（从队列中拉出的代码）移动到另一个应用程序层（服务层）而不破坏基本设计的任何部分。这提供了很大的灵活性。大多数时候，您甚至可以在单个 Web 角色节点上运行所有内容（或者两个，如果您需要 SLA - 根据您的一些评论不确定您是否这样做）（两层），然后根据需要通过添加一堆处理虚拟机，比如过年。

处理节点的数量也可以根据来自环境的信号动态调整 - 例如，如果队列长度正在增长或超过某个阈值，则添加更多处理节点。这就是云，这台机器可以完全自动化。

**现在越来越投机，因为我对您的应用程序不太了解...**

通过使用前面提到的 Run 方法，您也可以消除 cron 作业并在该无限循环中完成该工作；这当然取决于 cron 调度的复杂性。或者，您甚至可以通过让您的 cron 作业将工作请求项直接放在队列中（可能使用[SDK 之一](https://www.windowsazure.com/en-us/develop/overview/)）来消除整个 Web 层（Web 角色）。您仍然需要代码来处理请求，这当然仍然可以是您的 Web 角色，但此时可以很容易地使用工作角色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T10:38:57.190

我肯定会选择横向扩展解决方案：更简单、更易于管理且定价更好。另外，在部署失败的情况下，您的停机风险较小（当然，故障和升级域的机制应该涵盖这一点，但尽管如此）。因此，就此而言，我完全支持 Gaurav！

# objective-c - CGPDFDocumentCreateWithURL ARC 内存泄漏

> ID：12891679
> 
> 赞同：0
> 
> 时间：2012-10-15T08:17:26.247
> 
> 标签：objective-c, ios, pdf, memory-leaks, core-graphics

我想在 iOS 上渲染 PDF，当我调用**CGPDFDocumentCreateWithURL()**时出现内存泄漏。我知道这个问题之前已经讨论过，但我不知道我的情况是否不同，因为我使用的是 ARC。

通过在我的 viewDidLoad 上运行以下代码，我提取并简化了问题：

```
// Bridge resourceRef to ARC with no ownership change (still owned by ARC)
CFURLRef resourceRef = (__bridge CFURLRef) [NSURL fileURLWithPath:htmlPath];

CGPDFDocumentRef pdf;
pdf = CGPDFDocumentCreateWithURL(resourceRef);
CGPDFDocumentRelease(pdf);

// Do not need to release resourceRef because ARC will release it 
```

Instruments 告诉我泄漏的对象是一个 Malloc 48 字节，由 CoreGraphics 负责。堆栈跟踪中有 CGPDFDocumentCreateWithURL 。泄漏意味着存在没有所有者的对象。

我已经创建了一个复制问题的 git repo： [https ://github.com/indika/PDFLeaks](https://github.com/indika/PDFLeaks)

有任何想法吗。将不胜感激任何帮助或“指针”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:22:47.330

resourceRef 将被过度释放。看看你在做什么。

1) 与 ARC 的桥接`resourceRef`，没有所有权变更（仍归 ARC 所有）

2)`CFRelease`开`resourceRef`

3) ARC 也发布`resourceRef`

您不需要第 2 步

这不是内存泄漏，而是过度释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:08:10.597

我犯了很多错误，尤其是在双重发布文档参考时。然而，在我的情况下，这并不是真正的小动物。

我正在加载一个损坏的 PDF！我正在使用 pdftk 对 pdf 文档进行切片和合并，并且我正在破坏索引。所以请记住，在将 PDF 与 pdftk 合并后，使用以下命令修复文件：

```
pdftk original output destination 
```

# c# - 安装 MVC 4 后 MVC 3 中的 System.Web.WebPages 程序集引用错误

> ID：12891680
> 
> 赞同：1
> 
> 时间：2012-10-15T08:17:28.317
> 
> 标签：c#, asp.net-mvc

我有一个使用 System.Web.Mvc 版本 3 和 System.Web.WebPages 版本 1 的类库。安装 Visual Studio 2012（MVC 版本 4）后，我在 Visual Studio 2010 中编译此类库时遇到问题：

```
Assembly 'System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' uses 'System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' which has a higher version than referenced assembly 'System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' c:\Program Files\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies\System.Web.Mvc.dll 
```

在这个项目中，我还不想使用 MVC 4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:17:28.317

我在文本编辑器中打开 .csproj 文件并找到以下行：

```
<Reference Include="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 3\Assemblies\System.Web.Mvc.dll</HintPath>
</Reference> 
```

我注意到`HintPath`我的机器上不存在（Windows 7 32 位），所以显然 Visual Studio 会自动采用最新版本（可能在 GAC 中）。我从项目引用中删除了 System.Web.Mvc 并通过浏览到正确的路径再次添加它。.csproj 现在看起来像这样：

```
<Reference Include="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\..\..\..\..\..\..\..\Program Files\Microsoft ASP.NET\ASP.NET MVC 3\Assemblies\System.Web.Mvc.dll</HintPath>
</Reference> 
```

还要确保版本参数设置为 3.0.0.0。

# magento - 在列表视图 magento 中显示产品选项（既可配置，也可用于具有自定义选项的简单产品）

> ID：12891688
> 
> 赞同：1
> 
> 时间：2012-10-15T08:18:03.247
> 
> 标签：magento, options, product, configurable

我的网站中有可配置产品和带有自定义选项的简单产品。我想在产品列表（类别页面）中显示选项列表，在这两种情况下，也适用于具有自定义选项的简单产品以及具有简单产品作为选项的可配置产品。我使用 magento 1.7.0.2。谢谢你的帮助。

# php - php - 检查多个域中是否存在文本的最快方法（超过 1000 个）

> ID：12891689
> 
> 赞同：-2
> 
> 时间：2012-10-15T08:18:06.047
> 
> 标签：php, curl, screen-scraping, web-scraping

我有一个 php 脚本正在运行并使用 cURL 来检索我想检查是否存在某些文本的网页内容。

现在它看起来像这样：

```
for( $i = 0; $i < $num_target; $i++ ) {
    $ch = curl_init();
    $timeout = 10;
    curl_setopt ($ch, CURLOPT_URL,$target[$i]);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt ($ch, CURLOPT_FORBID_REUSE, true);
    curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    $url = curl_exec ($ch);
    curl_close($ch);

    if (preg_match($text,$url,$match)) {
        $match[$i] = $match;
        echo "text" . $text . " found in URL: " . $url . ": " . $match .;

        } else {
        $match[$i] = $match;
        echo "text" . $text . " not found in URL: " . $url . ": no match";
        }
} 
```

我想知道是否可以使用一种特殊的 cURL 设置来使其更快（我在 php 手册中选择了对我来说似乎最好的选项，但我可能忽略了一些可以提高脚本速度和性能的选项）。

然后我想知道使用 cgi、Perl 或 python（或其他解决方案）是否会比 php 更快。

提前感谢您的任何帮助/建议/建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:17:05.923

您可以使用`curl_multi_init`.... 它允许并行处理多个 cURL 句柄。

例子

```
$url = array();
$url[] = 'http://www.huffingtonpost.com';
$url[] = 'http://www.yahoo.com';
$url[] = 'http://www.google.com';
$url[] = 'http://technet.microsoft.com/en-us/';

$start = microtime(true);
echo "<pre>";
print_r(checkLinks($url, "Azure"));
echo "<h1>", microtime(true) - $start, "</h1>"; 
```

输出

```
Array
(
    [0] => http://technet.microsoft.com/en-us/
)

1.2735739707947 <-- Faster 
```

使用的功能

```
function checkLinks($nodes, $text) {
    $mh = curl_multi_init();
    $curl_array = array();
    foreach ( $nodes as $i => $url ) {
        $curl_array[$i] = curl_init($url);
        curl_setopt($curl_array[$i], CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl_array[$i], CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.2) Gecko/20090729 Firefox/3.5.2 (.NET CLR 3.5.30729)');
        curl_setopt($curl_array[$i], CURLOPT_CONNECTTIMEOUT, 5);
        curl_setopt($curl_array[$i], CURLOPT_TIMEOUT, 15);
        curl_multi_add_handle($mh, $curl_array[$i]);
    }
    $running = NULL;
    do {
        usleep(10000);
        curl_multi_exec($mh, $running);
    } while ( $running > 0 );
    $res = array();
    foreach ( $nodes as $i => $url ) {
        $curlErrorCode = curl_errno($curl_array[$i]);
        if ($curlErrorCode === 0) {
            $info = curl_getinfo($curl_array[$i]);
            if ($info['http_code'] == 200) {
                if (stripos(curl_multi_getcontent($curl_array[$i]), $text) !== false) {
                    $res[] = $info['url'];
                }
            }
        }
        curl_multi_remove_handle($mh, $curl_array[$i]);
        curl_close($curl_array[$i]);
    }
    curl_multi_close($mh);
    return $res;
} 
```

# asp-classic - 经典的 asp 异步 sql 执行

> ID：12891691
> 
> 赞同：0
> 
> 时间：2012-10-15T08:18:17.137
> 
> 标签：asp-classic

我有一个经典的 asp 应用程序（在 Windows 2000/IIS 5.0 上运行的 ASP 3.0），它允许用户编写自定义 SQL 查询以从数据库（Oracle 10g）中获取数据，更像是 SQL Developer。有时用户编写了无限期运行的复杂查询，尽管用户会单击后退按钮返回上一页，但查询可能仍会在数据库上运行。现在用户要求他们被赋予一个点击按钮就可以终止查询的功能。

我是asp的初学者，所以我不确定这在asp中是否可行。我们使用 ADODB.RecordSet 对象通过 RecordSet.Open 和 RecordSet.GetRows 获取数据。请告知这是否可以在经典 asp 中实现。

```
Set connection = Server.CreateObject("ADODB.Connection")
connection.Open DATA_SOURCE, LOGON_ID, PASSWORD
Set resultset = Server.CreateObject("ADODB.Recordset")
Dim sql
sql="select sysdate from dual"
resultset.Open sql, connection 
Dim DBData
DBData = resultset.GetRows(NUMROWS)
resultset.close
connection.close
Set resultset = Nothing
Set connection = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:37:43.333

尝试这个

```
arrayRs = resultset.GetRows()
if arrayRs(0,0)<> "" then
response.write(arrayRs(0,0))
end if 
```

或者您可以在获取多个字段时尝试循环

# assembly - 低内存地址 0x4c 和 0x4e

> ID：12891693
> 
> 赞同：1
> 
> 时间：2012-10-15T08:18:33.253
> 
> 标签：assembly, x86, interrupt, bios

我试图扭转 mbr rootkit 并遇到低内存地址 0x4c 和 0x4e 的问题。我不知道他们的目的地。

```
[0x000000000009f51c] 9f40:011c (unk. ctxt): xor ax, ax                ; 33c0
[0x000000000009f51e] 9f40:011e (unk. ctxt): mov ds, ax                ; 8ed8  
...  
[0x000000000009f52e] 9f40:012e (unk. ctxt): cli                       ; fa
...
[0x000000000009f52f] 9f40:012f (unk. ctxt): xor ax, ax                ; 33c0
[0x000000000009f531] 9f40:0131 (unk. ctxt): mov word ptr ds:0x4c, ax  ; a34c00
[0x000000000009f534] 9f40:0134 (unk. ctxt): mov ax, es                ; 8cc0
[0x000000000009f536] 9f40:0136 (unk. ctxt): add ax, 0x0040            ; 054000
[0x000000000009f539] 9f40:0139 (unk. ctxt): mov word ptr ds:0x4e, ax  ; a34e00
[0x000000000009f53c] 9f40:013c (unk. ctxt): sti                       ; fb 
```

在 9f40:0131 DS 为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:30:48.683

实模式中断向量表从地址 0 开始，它包含 256 个 4 字节（远）指针，指向 256 个中断服务程序。

0x4c/4=19, 0x4e/4=19，因此代码正在访问指向向量 19(=0x13) 的 ISR 的指针。

`int 0x13`该 ISR 很特殊，它通过指令调用以访问磁盘。详情请查阅 Ralf Brown 的中断列表。

上面的代码改变了中断向量表中这个 ISR 的地址。它这样做可能是为了拦截来自其他软件（例如操作系统加载程序）的磁盘 I/O，因此它可以伪造一些数据。

它将 ISR 地址设置为 0x40:0，就在中断向量表结束之后。

# c - 不使用种子 C 编程的随机数

> ID：12891694
> 
> 赞同：1
> 
> 时间：2012-10-15T08:18:35.340
> 
> 标签：c, random

有什么方法可以在不使用种子的情况下在 C 中生成随机数。

到目前为止，这里有什么，但它仍在使用 srand(time(NULL)); 这是一粒种子。

```
#include <stdio.h>
#include <time.h>
#include <math.h> /* required for sqrt() */
#include <stdlib.h> /* required for rand() */

int gen_rand();   /* note these are declarations of functions */

void main()
{
   int number;
   srand (time(NULL)); /* everytime you run program, it will give you different result */

   number = gen_rand();

   printf("%d is the power of 2 of %.0lf\n", number, sqrt(number));
}

/* Function generates random number power 2 of 20 - 230 */
int gen_rand()
{
   int n;
   n = rand() % 211;  /* n is random number in range of 0 - 210 */
   n = n + 20; /* n is now in range of 20 - 230 */
   return(n*n); /* return n to the power of 2 */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:28:38.477

是和不是。基本上有两种方法可以在 c 中获得甚至是远程随机数。

1) 有一个带有种子的伪随机数生成器——这是一种算法，它使用巧妙的算术运算符和可能的大量混合、置换、扭曲等内部变量产生一些数字序列。种子可以是隐式的（即始终为零，并且每次运行程序时，都会生成相同的序列）。或者它可以是显式的，在运行之间可以以某种方式更改种子。

2）使用*外部*数据源，在运行之间以某种方式发生变化。这可能来自*计时器*、环境变量（可能是程序 ID）、来自相机的噪音、鼠标移动等。

1+2) 使用外部噪声源作为伪随机数生成器的种子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:25:25.333

所有基于非硬件的 PRNG 都需要某种形式的随机输入来对抗其确定性，因此始终需要种子。

您可以尝试`/dev/rand`在 linux 下滥用（但它也是一个 PRNG），或者如果您有一个非常现代的 Intel CPU，他们新的[数字 RNG 工具](http://software.intel.com/en-us/articles/intel-digital-random-number-generator-drng-software-implementation-guide)就可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:26:06.453

不会。如果您不为自动数字生成器播种，它的行为将具有确定性，并且每次都产生相同的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T11:15:21.523

是的。`rand()`但是，通过使用函数而不使用种子来生成随机数将为您提供相同的随机数集。

# html - 如何将值写入输入类型 = 使用 php 的表单文件

> ID：12891699
> 
> 赞同：0
> 
> 时间：2012-10-15T08:18:54.463
> 
> 标签：html

我能够将值写入输入 t 表单类型 = 文本

例如

```
 <input type="text" value="xyz"> 
```

但我想要的是，将一个值写入 input type="file" 。我已经尝试了下面的代码，但它不起作用。

```
 <input type="file" value="something"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T08:20:59.373

出于相当明显的安全原因，您不能。

如果网页可以为文件输入指定默认值，那么它可以（例如）指定`c:\place\where\finance\software\stores\accounts\by\default`（然后使用 JavaScript 提交表单，而无需用户执行任何操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:28:04.153

PHP aside, HTML doesn't let you assign values to `input type="file"` elements as a security measure. If HTML had this power, you could setup several of these fields and point each one to a windows file on the user's computer. The result would be a victim submitting a form with no idea they were also submitting sensitive information. No JavaScript is required. The victim might submit such a form to log in or post a comment on a blog somewhere. Why wouldn't the victim notice they are also submitting a file? CSS can style such elements offscreen using negative coordinates so its a lot like an `input type="hidden"`, just in this case it would submitting a file instead.

# lotus - 是否可以在不使用 Lotus notes api 的情况下检索 Lotus notes 富文本？

> ID：12891700
> 
> 赞同：1
> 
> 时间：2012-10-15T08:18:56.210
> 
> 标签：lotus

我需要创建一个接收莲花笔记文档文件的应用程序。是否可以在不使用 Lotus notes api 的情况下检索 Lotus notes 富文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-07T07:54:30.963

您还可以使用 Web API 通过 http/https 获取富文本。应打开 HTTP 任务才能使用此方法。只需使用如下请求： *server/databasefilepath/databasename/viewname/selectionkey/richtextitemname?OpenField*

这将为您返回富文本项目，转换为 html，这非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:22:43.400

是的，您可以使用 Domino XML 语言 (DXL)。这会呈现一个 XML 样式格式，然后您可以处理它，但是如果用户添加了很多项目符号点，将奇怪的图像加粗等，它会很复杂。

您将必须在您的应用程序中使用 CreateDXLExporter() 或通过网络从 Notes 代理呈现，但是一旦您构建了它，每个文档都将可供您使用，实际上整个数据库都将可用。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-15T12:08:15.903

如果你不能按照 shiv 的建议使用 HTTP 任务，你可以试试 Julian Robichaux 的这个工具 [http://www.nsftools.com/tips/NotesTips.htm#richtexttohtml](http://www.nsftools.com/tips/NotesTips.htm#richtexttohtml)。

作者的注释：

> 这个数据库有一个脚本库，它描述了一种技术，允许您将常规富文本字段的内容作为 MIME/HTML 获取，即使该字段未设置为将内容存储为 MIME。

# hadoop - Hadoop - copyFromLocal 内部工作流程？

> ID：12891704
> 
> 赞同：0
> 
> 时间：2012-10-15T08:19:19.927
> 
> 标签：hadoop, hdfs

当我们发出类似`copyFromLocal`或 put 命令将数据从客户端复制到 HDFS 时，这个过程实际上是如何工作的？

我在 HDFS 架构中读到，客户端将联系 Namenode 以获取数据节点列表，然后建立连接并传输数据。

有没有其他方法或任何方法可以使它更快？

哪些类正在调用此行为，例如检查数据节点列表等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:25:06.167

`copyFromLocal`您可以在类中的方法处开始浏览代码

```
org.apache.hadoop.fs.FsShell 
```

为方便起见，我引用了[网址](http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hadoop/hadoop-core/0.20.2-320/org/apache/hadoop/fs/FsShell.java#FsShell.copyFromLocal%28org.apache.hadoop.fs.Path%5B%5D,java.lang.String%29)

# string - 查找具有字符索引的子字符串

> ID：12891705
> 
> 赞同：-1
> 
> 时间：2012-10-15T08:19:19.803
> 
> 标签：string, perl, join

> **可能重复：**
> [如何在 perl 中连接两个子字符串](https://stackoverflow.com/questions/12889754/how-to-join-two-substrings-in-perl)

如何找到与用户输入的字符索引相对应的字符串数组的子字符串？

例如：如果有一个字符串，如果用户输入位置为 6 和 10，现在`$string = 'MFHYRAKCLAMSCTLPHCAKNDHGCTH';`它被分解为数组，那么如何搜索并连接两个对应的子字符串？`@string = ( "MFHYRA","KCLAM", "SCTLP", "HCAKNDHGCTH" ) ;``A`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:08:33.813

本质上，您要问的是：我们在初始字符串中有一个位置。字符串被拆分为子字符串。位置在哪个子串中？

假使，假设

```
@pos = ( 5, 7, 9 ) ; 
```

是您要为其查找子字符串的位置列表。

```
my $n = 0 ; # current position

my %results ;
foreach my $ss ( @substrings ) {

  $n += length( $ss ) ;

  foreach my $p ( @pos ) {
    if( ! $results{$p} and $p < $n ) { $results{$p} = $ss ; }
  }

}

foreach my $p ( @pos ) {
  print "Position $p, substring $results{$p}\n" ;
} 
```

`@pos`显然，这段代码可以使用一些优化，例如——如果我们已经有一个子字符串，则不需要循环遍历元素，我们应该在`@pos`得到它的子字符串的最后一个元素之后中断操作，但是对于几个位置为用户输入这并不重要。

# android - 如何在 android 上使用 dropbox sdk 删除文件夹？

> ID：12891721
> 
> 赞同：0
> 
> 时间：2012-10-15T08:21:00.247
> 
> 标签：android, dropbox

我想使用 dropbox sdk 删除带有 android 的 Dropbox 中的文件夹。

在下面的这个 URL 中，写入了函数的名称。但我不明白如何编写代码。

[https://www.dropbox.com/static/developers/dropbox-java-sdk-1.5-docs/com/dropbox/client2/DropboxAPI.html#delete%28java.lang.String%29](https://www.dropbox.com/static/developers/dropbox-java-sdk-1.5-docs/com/dropbox/client2/DropboxAPI.html#delete%28java.lang.String%29)

如果我将文件放在保管箱上，我可以这样做：

> entry entry = mApi.putFile(path, is, length, null, null);

虽然当我删除 Dropbox 上的文件夹并在下面编写代码时，它不起作用。

> 入口入口 = mApi.delete(path);

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T19:31:19.467

以“/”结束文件路径

例如，如果文件夹名称是“MyPhotos”，Dropbox 将返回“/MyPhotos”的路径，所以只需检查并在文件路径中添加“/”：

```
if (e.isDir)
   mApi.delete(e.path +"/");
else
   mApi.delete(e.path); 
```

这将删除文件夹及其内容。

delete(String path) 也是一个 void 函数，所以你不会得到任何东西，所以你的

```
Entry entry = mApi.delete(path); 
```

无效。

您也可能希望将其包装在 try catch 中，因为它会引发 DropboxException 并在后台线程上运行它，因为删除文件可能需要一段时间。

# python - 子进程 - 使用几个命令行工具

> ID：12891724
> 
> 赞同：1
> 
> 时间：2012-10-15T08:21:16.333
> 
> 标签：python, command-line, subprocess, pipe, os.system

我是一个学习 python 和在命令行中工作的新手，例如管道。

我读过鼓励子进程而不是os.system。我正在创建一个调用 shell 的脚本，但我无法使用子进程来完成它。不过，使用 os.system 很简单：

```
os.system("cut -f1-4 " + temp1.name + "| uniq --count | sort -rn > " + temp2.name) 
```

我已经成功地将 subprocess 用于其他命令，但不是那些将多个工具与“|”组合在一起的命令。阅读 subprocess python 文档令人困惑，对我没有帮助。我也尝试搜索其他问题，但找不到与我的问题类似的问题。这是我尝试过的（但失败了）：

```
subprocess.call = (["cut", "-f1-4", temp1.name, "|",  "uniq", "--count", "|", "sort". "-rn"], stdout = open(temp2.name, 'w')) 
```

我也试过用 sp.Popen 代替 sp.call，但失败了。谁能帮忙提供一些清晰的例子和解释？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:26:48.047

如果你想使用管道，你应该添加`shell=True`

```
subprocess.check_output("cut -f1-4 " + temp1.name + "| uniq --count | sort -rn > " +    temp2.name, shell=True) 
```

请注意，如果`temp1.name`或`temp2.name`来自不受信任的来源（例如，来自用户在 Web 应用程序中提供的数据），则使用`shell=True`存在安全风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T08:44:13.427

值得一看的是伟大的库[python sh](http://amoffat.github.com/sh/)，它是一个成熟的 Python 子进程接口，允许你调用任何程序，就好像它是一个函数一样，更重要的是，它是令人愉悦的 Python 风格。

对于您在这种情况下的特定需求，它提供了一些“高级管道”功能，如下所示：

```
# the inner command executes first, then sends its data to the outer command
from sh import *
sort(uniq(cut("-f1-4", _in="temp1.name"), "--count"), "-rn", _out="temp2.name") 
```

# node.js - Node.js：使用 child_process 向客户端发送图像？

> ID：12891732
> 
> 赞同：0
> 
> 时间：2012-10-15T08:22:11.800
> 
> 标签：node.js

为多个客户提供多个文件（图像）以便能够同时为它们提供服务的最佳方式是什么？

例如，服务器必须每秒服务： - 3,000 个小图像（每个 1 ko） - 750 个大图像（每个 100 ko） 有 150 个客户端。

我想知道使用 child_process 会有所帮助吗？我正在寻找仅使用 node.js 而没有库的解决方案（构建）。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:09:57.557

使用本机[http](http://nodejs.org/api/http.html)模块来服务它的 HTTP 端和本机[fs](http://nodejs.org/api/fs.html)模块的异步部分来读取文件。不要超越简单的方法，直到你发现这还不够。

我希望它会正常工作，因为这正是 node.js 旨在擅长的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:20:02.680

您可能还想查看[sendfile(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/sendfile.2.html)系统调用。node.js 真的是必需品吗？如果不是，我建议只使用 Nginx 或 Apache HTTPD，因为它们非常稳定、完善且性能良好（尤其是静态文件）。

# .net - 读取 .csv 时出现 OutOfMemoryException

> ID：12891735
> 
> 赞同：0
> 
> 时间：2012-10-15T08:22:24.637
> 
> 标签：.net, vb.net, csv, out-of-memory

我有一个控制台应用程序，我需要在其中读取一些 .csv 文件。我没有问题阅读前两个非常轻的（每个大约 10 000 条记录）。但是当它开始读取第三个（更重，大约 220 000 条记录）时，我一直遇到错误“OutOfMemoryException 未处理：mscorlib.dll 中发生了“System.OutOfMemoryException”类型的未处理异常”

我不明白它对于前两个 csv 是否正常工作......

这是我读取 csv 文件的函数，拆分时发生错误：

```
Function FileToString(filePath As String) As String()
    Dim myfile As New StreamReader(filePath, System.Text.Encoding.GetEncoding("iso-8859-1"))
    Dim allData As String = myfile.ReadToEnd()
    Dim rows As String() = allData.Split(vbCr.ToCharArray)
    Return rows
End Function 
```

我怎么能防止这种情况？有没有更好的读取csv的方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:24:57.007

你应该逐行阅读，ReadToEnd 只会将完整的文件内容加载到内存中，如果你有大文件，你会得到 OutOfMemoryException

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:27:24.803

有 2 件事需要考虑

1) 而不是 String 使用 StringBuilder 作为 Dim builder 作为 New StringBuilder

2) 对于文件读取，使用缓冲方法而不是 myfile.ReadToEnd()

例子

```
Function FileToString(filePath As String) As String 
    Dim f As System.IO.FileStream
    Dim mylength As Integer
    Dim i As Integer

    f = New System.IO.FileStreamfilePath, IO.FileMode.Open, IO.FileAccess.Read)

    Dim streamLength As Integer = Convert.ToInt32(f.Length)
    Dim fileData As Byte() = New Byte(streamLength) {}

    f.Read(fileData , 0, streamLength)
    f.Close()
    return fileData.ToString();
End Function 
```

如果你想逐行使用下面的代码

```
Dim sr As StreamReader = New StreamReader("TestFile.txt")
Dim line As String
Do
    line = sr.ReadLine()
    Console.WriteLine(Line)
Loop Until line Is Nothing
sr.Close() 
```

# c# - 将多个 DataTables 转换为单个 datagridview 中的列

> ID：12891744
> 
> 赞同：0
> 
> 时间：2012-10-15T08:23:13.657
> 
> 标签：c#

我在 C# 中有三个 DataTable，分别称为 MIT、Oracle 和 Difference。您能否让我知道如何将这三个表作为单独的列添加到 gridview 中？我知道如何将 DataTable 绑定到 gridview，如下所示。但我需要对几个 DataTables 做同样的事情。请帮忙

```
dataGridView1.DataSource = MIT; 
```

[这](http://i.stack.imgur.com/VkxgP.png)是 GridView 的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:28:25.480

即使在 GridView 中添加这三个不同的表（添加每个 DataTable 的列）。您将如何填充每一行中的数据，因为这三者可能不同。因此，必须有某种方法首先根据任何关系将这些表连接成一个表，然后您可以将生成的 DataTable 关联/绑定到 GridView：

```
EnumerableRowCollection<DataRow> result = 
              from t1 in dt1.AsEnumerable()
              join t1 in dt2.AsEnumerable()
              on t1.Field<int>("KeyId") equals
                  t2.Field<int>("KeyId")
              select new
              {
                   KeyId = t1.Field<int>("KeyId"),
                   Column1 = t1.Field<string>("Column1"),
                   Column2 = t2.Field<string>("Column2"), 
                   .
                   . 
              };

dataGridView1.DataSource = result.AsDataView(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:37:39.677

我认为你应该将你的表组合成一个`DataSet`然后使用一个公共列（我假设有一个！）`DataRelations`在表之间创建。这将允许您将您`DataGridView`的结果绑定到`DataSet`.

欲了解更多信息：请参阅[此处](http://msdn.microsoft.com/en-us/library/system.data.datarelation.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:42:36.243

您应该将多个数据表合并为一个数据表，然后将其作为数据源提供给 datagridview。下面的链接将有助于将数据表合并为一个。

[http://www.aspnettutorials.com/tutorials/database/bind-mult-table-gridview-asp4.aspx](http://www.aspnettutorials.com/tutorials/database/bind-mult-table-gridview-asp4.aspx)

**或者**

您应该使用适当的连接将您的数据选择到单个表中。DataGridViews 以单表格式显示它们的数据——DataGridView 中没有“多表”概念。

`DataSet.Merge()`可以帮助您将不同对象的 DataRows 合并为一个。

# uitableview - 滑动删除在 iPad 上不起作用

> ID：12891745
> 
> 赞同：0
> 
> 时间：2012-10-15T08:23:17.633
> 
> 标签：uitableview, ios6, swipe

我有带有自定义单元格的 UITableView，滑动删除在 iPad 模拟器中工作得很好，但它从来没有在 iPad 设备上工作。

这是我的代码：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
        return YES;
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
        return UITableViewCellEditingStyleDelete;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView beginUpdates];
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        if(_itemsArray == nil)
            NSLog(@"\n\nNIL ARRAY\n\n");
        NSLog(@"\nindexPath.row = %d\nItemsArray Count:%d",indexPath.row,_itemsArray.count);
        int row = [[[_itemsArray objectAtIndex:indexPath.row]valueForKey:@"itemRow"] integerValue];
        [_itemsArray removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [[self delegate]didDeletedBillItemRow:row];
    }
    [tableView endUpdates];
} 
```

我还在我的自定义单元控制器中实现了 layoutSubviews：

```
-(void)layoutSubviews
{
    [super layoutSubviews];
} 
```

你认为问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-19T10:57:00.557

我只在编辑期间将选择模式的属性更改为“编辑期间的单选”而不是“编辑期间的多选”，我现在可以完美地使用滑动删除来删除行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T05:04:43.010

可能对你有用，也可能对你不起作用。我花了一段时间弄清楚为什么它对我不起作用。我意识到这是因为启用的单元格用户交互已关闭。我不知道为什么它仍在模拟器上工作，但这为我修复了它。

# spotify - Spotify 收听时间

> ID：12891746
> 
> 赞同：1
> 
> 时间：2012-10-15T08:23:24.093
> 
> 标签：spotify

有没有办法使用 Spotify 应用程序 api 查看 Spotify 免费帐户用户还剩多少收听时间？

如果可能的话，当用户没有或只有很少的收听时间时，我想阻止我的 Spotify 应用程序中的特定流程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T15:39:18.397

抱歉，但我相信目前这是不可能的。

# php - Zend 表单单选多选项标题属性

> ID：12891748
> 
> 赞同：2
> 
> 时间：2012-10-15T08:23:27.570
> 
> 标签：php, html, zend-framework, zend-form

我的问题是；是否可以为 Zend 表单上的每个单选按钮添加唯一的标题属性？

到目前为止，我的代码是：

```
$this->addElement('radio', 'vtype', array('label'=>'Type of Visit:'));
$vtype = $this->getElement('vtype');
$vtype->addMultiOption("A","A");
$vtype->addMultiOption("B","B");
$vtype->addMultiOption("C","C");
$vtype->addMultiOption("D","D");
$vtype->addMultiOption("E","E");
$vtype->setAttribs(array('label_class'=>'radio_label'));
$vtype->setSeparator("");
$vtype->setDecorators($myDecorators); 
```

更新 - 如果可能的话，这就是我想要实现的目标：

```
<input type="radio" name="vtype" title="Click A for some reason" value="A" />
...
<input type="radio" name="vtype" title="Click E for some reason" value="E" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:51:36.580

我建议你在 jquery 中这样做：

```
$("#form input[radio]").each(){
  $(this).attr('title', 'Click ' + $(this).val() + ' for some reason');
}); 
```

# c++ - 接口上的引用作为参数

> ID：12891750
> 
> 赞同：2
> 
> 时间：2012-10-15T08:23:43.780
> 
> 标签：c++

> **可能重复：**
> [指针与引用](https://stackoverflow.com/questions/114180/pointer-vs-reference)

我想知道在某些接口上使用引用而不是指针是否有任何好处。更具体地说，让我们考虑一个小例子：

```
struct MyInterface {
   virtual ~MyInterface() {}
   virtual void f() = 0;
};

class MyClass : public MyInterface
{
   virtual void f()
   {
      std::cout << "F()" << std::endl;
   }
};

void myFunction(MyInterface& obj);

int main(int argc, char *argv[])
{
   MyInterface* pObj = new MyClass;

   myFunction(*pObj);

   delete pObj;

   getchar();
   return 0;
}

void myFunction(MyInterface& obj)
{
   obj.f();
} 
```

在*myFunction中**MyClass*的实例可以作为指针传递，这在很多书上都有写。我的问题是什么可以被认为是一种好的做法（指针或参考），什么更有效？

抱歉，如果以前以某种方式问过这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:40:45.037

一旦传递了一个值，传递一个引用在性能方面和语义方面都是一样的，就像传递一个指针一样。在您编写的示例中，您传递的是从指针获得的引用，因此引用输入函数施加的限制在这里无效。确实，如果你写

```
MyInterface* pObj = 0;
myFunction(*pObj); 
```

你会得到一个运行时错误。但错误是因为你在做

```
myFunction( *0 ); 
```

即，因为您要*取消引用*空指针，而不是因为您要*传递*零值。实际上，

```
myFunction( 0 ); 
```

会给你一个编译时异常（这很棒）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T08:57:29.767

这取决于您的需要。

使用指针：

*   如果您有机会想要传递“无对象”
*   如果您希望能够将传递的指针指向不同的位置
*   如果您出于某种原因想获取指针变量的地址

否则使用参考。引用更像是变量的别名，而不是指向它的指针。这种语义为编译器打开了一些可能的优化，并使其比指针更高效。

# forms - 致命错误：在 Form.php 中的非对象上调用成员函数 toOptionArray()

> ID：12891760
> 
> 赞同：1
> 
> 时间：2012-10-15T08:24:34.963
> 
> 标签：forms, magento, payment

配置付款方式时，我的付款界面出现此错误

```
'USD', 'label'=>Mage::helper('adminhtml')->__('USD')), array('value' => 'EUR', 'label'=>Mage::helper('adminhtml')->__('EUR')), ); } } ?> 
Fatal error: Call to a member function toOptionArray() on a non-object in C:\xampp\htdocs\pjsnorge2\app\code\core\Mage\Adminhtml\Block\System\Config\Form.php on line 399 
```

并在 processingCurrency.php

```
class Gspay_Redirect_Model_ProcessingCurrency
{
    public function toOptionArray()
    {
        return array(
            array('value' => 'USD', 'label'=>Mage::helper('adminhtml')->__('USD')),
            array('value' => 'EUR', 'label'=>Mage::helper('adminhtml')->__('EUR')),
        );
    }

} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:31:59.847

解决上述错误。请打开上述路径文件。

```
if ($e->source_model) {
$sourceModel = Mage::getSingleton((string)$e->source_model);
if ($sourceModel instanceof Varien_Object) {
$sourceModel->setPath($path);
}
$field->setValues($sourceModel->toOptionArray($fieldType == 'multiselect'));
} 
```

用下面的代码替换上面的代码：

```
if ($e->source_model) {
$sourceModel = Mage::getSingleton((string)$e->source_model);
if ($sourceModel instanceof Varien_Object) {
$sourceModel->setPath($path);
}
if(is_object($sourceModel)){
$field->setValues($sourceModel->toOptionArray($fieldType == 'multiselect'));
} else {
Mage::log($e->source_model);
}
} 
```

请参阅此[链接](https://indianicorange.wordpress.com/2010/10/04/fatal-error-call-to-a-member-function-tooptionarray-on-a-non-object/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T05:29:10.150

更改此文件 app/code/core/Mage/Adminhtml/Block/System/Config/Form.php 中的以下代码，上面由@ILLA 回答，它完全可以工作。

```
if ($e->source_model) 
{
 $sourceModel = Mage::getSingleton((string)$e->source_model);
 if ($sourceModel instanceof Varien_Object) 
 {
  $sourceModel->setPath($path);
 }

 if(is_object($sourceModel))
 {
  if (method_exists($sourceModel, "toOptionArray"))
  {
   $field->setValues($sourceModel->toOptionArray($fieldType == 'multiselect'));
  }
 } 
 else 
 {
  Mage::log($e->source_model);
 }
} 
```

# wpf - WPF：CheckBox中的TextTrimming没有固定宽度

> ID：12891765
> 
> 赞同：0
> 
> 时间：2012-10-15T08:25:12.703
> 
> 标签：wpf, checkbox, grid, resizable, texttrimming

我有一个位于列跨度为 3 的网格中的复选框，其中 2 列可调整大小，并且可以在运行时调整大小。

我希望复选框在其文本不适合时显示省略号，但无法使其正常工作。

这是我的 XAML 代码。

```
<Grid>
     <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" />
     </Grid.ColumnDefinitions>
...
    <CheckBox IsEnabled="False"  Grid.Row="2" Padding="5" Margin="11,12,0,0" Name="chkSelectedCat" VerticalAlignment="Top" HorizontalAlignment="Stretch" Grid.ColumnSpan="3">
         <AccessText Text="Search in selected category only." TextTrimming="CharacterEllipsis"/>
    </CheckBox> 
```

在此先感谢您的帮助。

**编辑**

有`CheckBox`问题的位于 a 内`Grid`，而 a 又包含在 a 内`GroupBox`，该列位于与使用 a 调整大小的列相邻的列中`GridSplitter`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:50:40.800

问题是`GroupBox`它的子控件分配了无限宽度，正如在这个[MSDN 论坛线程中所讨论的那样。](http://social.msdn.microsoft.com/Forums/en/wpf/thread/9ee21e9e-120c-4239-a0c8-79dc98c3fee9)

事实上，当将 a 设置为 时`MaxWidth`，`CheckBox`文本修剪会起作用并显示省略号。

但是，`CheckBox`最大宽度需要在运行时更改。

我尝试使用[MultiValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)将 的 绑定到三列`MaxWidth`的`CheckBox`总数`ActualWidth`，但该`Convert`方法仅在初始化期间被调用（我再次认为这与如何`GroupBox`将大小分配给其子控件有关）。

`ChechkBox`无论如何，我设法通过删除's`AccessText`并使用 a`TextBlock`代替`StackPanel`它，然后用 a 包围所有内容来实现我想要的`Border`。

```
<Border Grid.Row="2" Grid.ColumnSpan="3" Name="chkBorder" SizeChanged="chkBorder_SizeChanged">
     <StackPanel Orientation="Horizontal" VerticalAlignment="Stretch">
               <CheckBox IsEnabled="False" Padding="0" Margin="11,7,0,5" Name="chkSelectedCat"  VerticalAlignment="Center"/>
               <TextBlock Foreground="Black" Name="txtChkSelectedCat" Text="Search in selected category only." TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" VerticalAlignment="Center" Margin="0,5,5,5"/>
      </StackPanel>
</Border> 
```

当`Border`更改大小时，我会更新`Width`事件处理程序中 StackPanel 的 ，并相应地更新`TextBox`修剪中的文本。

```
private void chkBorder_SizeChanged(object sender, SizeChangedEventArgs e)
{
     this.txtChkSelectedCat.Width = this.chkBorder.ActualWidth - this.chkSelectedCat.ActualWidth - 11 - 5 - 5; // margins
} 
```

希望这对将来的某人有所帮助（即使它是一种黑客行为）。

**更新**

如果您可以消除`StackPanel`并使用 a`Grid`代替，则`TextTrimming`自动工作，无需进行任何事件处理，如下所示。

```
<Grid Grid.Row="2" Grid.ColumnSpan="3">
     <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="*" />
     </Grid.ColumnDefinitions>
     <CheckBox Grid.Column="0" IsEnabled="False" Padding="0" Margin="11,7,0,5" Name="chkSelectedCat" VerticalAlignment="Center" ToolTipService.ShowOnDisabled="True"/>
     <TextBlock Grid.Column="1" Foreground="Black"  Name="txtChkSelectedCat" Text="Search in selected category only." TextTrimming="CharacterEllipsis" TextWrapping="NoWrap" VerticalAlignment="Center" Margin="0,5,5,5" MouseLeftButtonDown="txtChkSelectedCat_MouseLeftButtonDown" ToolTip="{Binding ElementName=chkSelectedCat, Path=ToolTip}" />
</Grid> 
```

确保将`Width`包含文本框的列的 设置为`"*"`，因为`"Auto"`基本上告诉`TextBox`它可以拥有尽可能多的空间，因此`TextTrimming`不起作用。

# android - 编辑联系人 URI 在 android 4.0 及更高版本中不起作用

> ID：12891775
> 
> 赞同：1
> 
> 时间：2012-10-15T08:25:41.007
> 
> 标签：android, edit, android-contacts, contactscontract

我已经开发了一个代码来编辑联系人，但它不适用于 android 4.0 及更高版本。编辑活动正在启动但立即关闭并返回父活动。不知道是什么问题，这是我的代码：

```
Intent i = new Intent(Intent.ACTION_EDIT);
i.setData(Uri.parse(ContactsContract.Contacts.CONTENT_LOOKUP_URI
                                                + "/" + contactId[position]));
int REQUEST_CODE = 2;
startActivityForResult(i, REQUEST_CODE); 
```

任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:59:04.680

对上述问题进行研究并提出一种解决方案如下：

```
Intent i = new Intent(Intent.ACTION_EDIT);
i.setData(Uri.parse(ContactsContract.Contacts.CONTENT_URI
                                            + "/" + contactId[position]));
int REQUEST_CODE = 2;
startActivityForResult(i, REQUEST_CODE); 
```

您只需要使用 content_uri 而不是 content_lookup_uri。

# unix - Extracting a random pattern after matching a word in following lines

> ID：12891778
> 
> 赞同：0
> 
> 时间：2012-10-15T08:25:48.533
> 
> 标签：unix, sed, awk

Extract household data corresponding to a keyword.

```
Z1/NEW "THE_PALM" 769 121003   1545     
NEW HOUSE IN
SOMETHING SOMETHING

SN                HOUSE            CLASS
FIRST             PSD93_PU         1579

CHAIRS
WOOD
SILVER SPOON
GREEN GARDEN

Z1/OLD "THE_ROSE" 786 121003   1343     
NEW HOUSE OUT
SOMETHING NEW

SN                HOUSE            CLASS
FIRST_O           PSD1000_ST       1432

CHAIRS
WOOD
GREEN GARDEN
BLACK PAINT

Z1/OLD "The_PURE" 126 121003   3097    
NEW HOUSE IN
SOMETHING OLD

SN                HOUSE            CLASS
LAST_O            JD4_GOLD         1076

CHAIRS
SILVER SPOON 
```

I have a very large sized file. There is a list of items about the house at the end of every description. Corresponding to the houses containing `SILVER SPOON`, I want to extract the `HOUSE` ID as in data `PSD93_PU` and date `121003`. I tried the following:

```
awk 'c-->0;$0~s{if(b)for(c=b+1;c>1;c--)print r[(NR-c+1)%b];print;c=a}b{r[NR%b]=$0}' b=7 a=0 s="SILVER" infile > outfile 
```

But the problem is that the number of lines above the keyword `SILVER` are so random, that I can't figure out the solution.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:10:27.447

使用 sed：

```
sed -n -e 's/^Z1[^"]*"[^"]*"[ \t]*[0-9]*[ \t]*\([0-9]*\).*/\1/p'
       -e '/^SN[ \t]*HOUSE/ { n; s/^[^ \t]*[ \t]*\([^ \t]*\).*/\1/p }' 
```

首先，我们使用选项调用`sed`以`-n`告诉它只打印我们告诉它的内容。

第一个命令将搜索特定模式以提取日期。该模式包括：

1.  `^Z1`：以字符串“Z1”开头的行。
2.  `[^"]*`: 零个或多个不是双引号的字符
3.  `"`: 双引号字符
4.  `[^"]*`: 零个或多个不是双引号的字符
5.  `[ \t]*`: 零个或多个制表符或空格字符
6.  `[0-9]*`: 零个或多个数字
7.  `[ \t]*`: 零个或多个制表符或空格字符
8.  `\([0-9]*\)`: 零个或多个数字。反斜杠括号用于捕获匹配，即。匹配存储到辅助变量`\1`中。
9.  `.*`: 零个或多个字符，有效地跳过所有字符直到行尾。

然后将匹配的行替换为`\1`，其中包含我们捕获的内容：日期。`p`after 命令告诉 sed 打印结果。

第二行包含两个组合在一起的命令（在大括号内），因此它们仅在大括号之前的“地址”上执行。地址是一个模式，因此它会在与该模式匹配的每一行上执行。该模式包含以“SN”开头的一行，后跟一系列空格或制表符，然后是字符串“HOUSE”。

当模式匹配时，我们首先执行`n`下一个命令，从输入中加载下一行。然后，我们以类似于提取日期的方式从新行中提取 ID。要匹配的替代模式是：

1.  `^[^ \t]*`: 以零个或多个不是空格或制表符（空白）的字符开头的字符串。
2.  `[ \t]*`: 然后有零个或多个空格和/或制表符的序列。
3.  `\([^ \t]*\)`：然后捕获一系列非空白字符
4.  `.*`: 匹配剩余的字符以便跳过它们。

替换成为捕获的 ID，我们再次告诉 sed 将其打印出来。

这将打印出包含日期的行，然后是包含 ID 的行。如果您想要格式中的一行`ID date`，您可以将 sed 的输出通过管道传输到另一个 sed 实例中，如下所示：

```
sed -n -e [...] | sed -e 'h;n;G;s/\n/ /' 
```

此 sed 实例执行以下操作：

1.  读取一行，`h`命令告诉它将该行存储到保持空间（辅助缓冲区）中。
2.  使用命令阅读下一行`n`。
3.  get 命令会将保持空间的`G`内容附加到模式空间（工作缓冲区）中，所以现在我们有了 ID 行和日期行。
4.  最后，我们将换行符替换为空格，因此这些行合并为一行。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T12:38:06.503

如果你的记录被两三个空行隔开，并且家居用品前的行距一致，你可以这样使用`GNU awk`：

```
awk -r 'BEGIN { RS="\n{3}\n*"; FS="\n" } /SILVER SPOON/ { split($1, one, OFS); split($6, two, OFS); print two[2], one[4] }' file.txt 
```

结果：

```
PSD93_PU 121003
JD4_GOLD 121003 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T09:36:12.317

假设每个新房子都从`Z1`

```
 $ awk '$1 ~ /^Z1/ { date=$4; id=""; f=0; next; } \
        $1 == "SN" { f=1; next; }                 \
        f == 1 { id=$2; f=0; next; }              \
        $1" "$2 == "SILVER SPOON" { print id,date }' file 
```

即，在新房子上，重置所有变量并获取日期，如果*SN*匹配，则下一行包含 id如果找到“*银勺*`id`”，则从该行获取打印， 如果找不到，则打印新房子将满足并重置变量。*`id``date`*

 *使用给定数据进行测试：

```
$ awk '$1 ~ /^Z1/ { date=$4; id=""; f=0; next; } $1 == "SN" { f=1; next; } f == 1 { id=$2; f=0; next; } $1 == "SILVER SPOON" && $2 == "SPOON" { print id,date }' file 
PSD93_PU 121003
JD4_GOLD 121003 
```

*注意*：如果有人知道如何以及是否`$1 == "SILVER" && $2 == "SPOON"`可以在一个很好的语句中合并在一起:) - 比如：`$1,$2 == "SILVER SPOON"`

*编辑*：可以用`$1" "$2 == "SILVER SPOON"`.
一个人可能会省略空格并做`$1$2 == "SILVERSPOON"`，但即使`$2`是空的并且`$1`包含整个字符串，或者`$1`是*SILVERSPO*并且`$2`是*ON* ，它也会匹配。因此，空间在充当严格匹配。*

# css - 将子 ul 悬停在下拉列表中时，如何保持父 ul 的悬停？

> ID：12891780
> 
> 赞同：0
> 
> 时间：2012-10-15T08:26:00.470
> 
> 标签：css, drop-down-menu, hover

我在下拉导航中的“ul a”上设置了一个悬停，将 a 的背景颜色更改为橙​​色，将文本更改为白色。问题是，当您将鼠标悬停到打开父级“ul a”上的橙色背景的子菜单时，会回到未悬停状态。

这是页面顶部的下拉菜单 [http://www.brainbuzzmedia.com/themes/simplybusiness/](http://www.brainbuzzmedia.com/themes/simplybusiness/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:38:43.250

您应该在“ul a”中使用下拉“ul”来保持悬停效果。

```
 <ul>
        <li><a> maintitle
            <ul class="dorp-down-list">
               //------ li li li li
            </ul>
        </a></li>
    </ul> 
```

然后将 CSS 类从 'ul a' 编辑为 'ul > a'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:28:47.017

我认为解决此问题的方法是将悬停链接到 ul 而不是其中的 a

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T13:44:07.217

/* 激活第二个下拉菜单 */

标题 ul li:hover > ul{visibility: visible;}

/* 保持父级颜色相同 */

标题 ul li:hover > a{color: #000;}

# cocos2d-iphone - cocos2d onEnter, onExit

> ID：12891783
> 
> 赞同：1
> 
> 时间：2012-10-15T08:26:23.387
> 
> 标签：cocos2d-iphone, cocos2d-x, memory-management

eg)
1\. 当 X sprite 被触摸时，X 的指针存储在类 Y
2\. 当 X sprite 从Parent 中移除时，X sprite 会通知 Y 它要离开

如何实现第二步？
具体来说， onExit(of class X) 是做这种事情的好地方吗？
何时调用 onEnter/onExit？我认为参考对此没有帮助。

> *   (void) 每次 CCNode 离开“舞台”时调用的 onExit 回调。如果 CCNode 离开“阶段”并进行转换，则在转换完成时调用此回调。在 onExit 期间，您无法访问兄弟节点。

```
X::onExit()
{
getY()->notify_X_Dies(this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:35:23.407

是的，没错。当你从它的父节点中移除节点时，或者当它的父节点从舞台/其他父节点中移除时，会调用 onExit。

# ruby-on-rails - 从传递给 Rails.cache.fetch 的块中返回 nil 值会清除它吗？

> ID：12891790
> 
> 赞同：5
> 
> 时间：2012-10-15T08:26:39.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3

假设我有这样的方法：

```
 def foo
    Rails.cache.fetch("cache_key", :expires_in => 60.minutes) do
      return_something
    end
  end 
```

`return_something`有时会返回一个`nil`值。发生这种情况时，我不希望将`nil`值缓存 60 分钟。相反，下次我调用时`foo`，我希望传递给的块`fetch`再次执行。

`Rails.cache.fetch`默认情况下是这样工作的吗？还是我必须实现这个功能？

# 更新（有答案）

事实证明，答案是否定的，至少在使用 Memcached 时是这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T10:01:55.817

这取决于您正在使用的缓存存储的实现。我会说它不应该缓存`nil`值，但是可以缓存空字符串。

看看[dalli 商店的实现](https://github.com/mperham/dalli/blob/master/lib/active_support/cache/dalli_store.rb#L84-L113)，即：

```
 def fetch(name, options=nil)
    options ||= {}
    name = expanded_key name

    if block_given?
      unless options[:force]
        entry = instrument(:read, name, options) do |payload|
          payload[:super_operation] = :fetch if payload
          read_entry(name, options)
        end
      end

      if !entry.nil?
        instrument(:fetch_hit, name, options) { |payload| }
        entry
      else
        result = instrument(:generate, name, options) do |payload|
          yield
        end
        write(name, result, options)
        result
      end
    else
      read(name, options)
    end
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-12T17:23:43.317

这个问题的更新答案是：默认情况下`fetch`缓存`nil`值，但使用`dalli_store`引擎可以通过`cache_nils`选项避免它：

```
Rails.cache.fetch("cache_key", expires_in: 60.minutes, cache_nils: false) do
  return_something
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-01T13:02:01.267

值得注意的是，Dalli 的默认值近年来发生了变化——nil-caching 的标志目前默认为 false。见 [https://github.com/petergoldstein/dalli](https://github.com/petergoldstein/dalli)

绝对值得添加一个测试来检查您的设置是否符合您的预期（特别是对于生产模式）

# jsf - Declaring HTML array of items in JSF Data Table

> ID：12891798
> 
> 赞同：0
> 
> 时间：2012-10-15T08:27:25.823
> 
> 标签：jsf, primefaces

I am displaying a grid as follows

```
<p:dataTable id="dataTable" binding="#{table}" var="list" value="#{addIPDetails.IPAllocationDetailList}" >  
<f:facet name="header">  
    <font class="table-heading">Update Allocated IPs List</font>
</f:facet>  

<p:column>
    <f:facet name="header"> </f:facet>
    #{table.rowIndex + 1}
</p:column>

<p:column>
    <f:facet name="header">  
        <h:outputText value="IP Address" />  
    </f:facet>  
    <h:outputText value="#{list.ip_address}" />  
</p:column>

<p:column>
    <f:facet name="header">Description</f:facet>
    <p:inputText id="description" value="#{list.description}"></p:inputText>
</p:column>

<f:facet name="footer">
    <p:row>
        <p:column>
            <p:commandButton value="Update..." update="dataTable" id="btnSave" actionListener="#{addIPDetails.updateDetails}" 
                onstart="bui.show();" oncomplete="bui.hide();" style="width:140px" /> 
        </p:column>
    </p:row>
</f:facet> 
```

And when I press the update button it post all the values as below format

```
dataTable:0:description
dataTable:1:description
dataTable:2:description 
```

All I want to do is to post it as an HTML array like in simple HTML we can declare it as "description[]" and upon submit we get complete array. So that after submit traverse through the array will be easy. Please advise.

# dll - 包括缺少的 DLL

> ID：12891801
> 
> 赞同：1
> 
> 时间：2012-10-15T08:27:32.637
> 
> 标签：dll, runtime, directx

我正在 DX 10/11 中开发，当我在另一台带有 NV 660 的计算机上尝试代码时，它说找不到 d3dx11d_43。我重新安装了**Visual C++ 2012 32/64 bit** & **DirectX Runtime**，但仍然这么说。我认为用户需要安装 SDK 什么的。

我收到无法找到调试信息的警告。
从我所阅读的内容来看，这是因为我有一些依赖于调试相关的东西。不知道是什么。

有没有办法让游戏使用大多数（如果不是全部）DLL 进行编译？我不介意额外的尺寸。许多游戏的内容超过了使用的额外 DLL。

我确实编译为 Release。

**编辑：** 删除第一个问题，因为没有人回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:58:38.947

您可以将您需要的dll添加到资源文件中，然后将资源文件编译为您的exe文件，最后在运行时解析资源文件以获得您需要的dll。这里有一个[类似的问题](https://stackoverflow.com/questions/9808467/embed-dll-in-mfc-c-exe)，你可以看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:08:07.967

d3dx11d_43 是 d3dx11_43 的调试版本，当您进行调试构建而不是发布构建时，您的程序会链接到该版本。调试版本不包含在 directx 运行时安装程序中，仅包含在 SDK 中。

该许可证也不允许您分发它。

您应该构建和分发代码的发布版本，或者要求用户安装可能不会那么受欢迎的 SDK！

# java - getting exception in the below code "expatparser parseexception"

> ID：12891802
> 
> 赞同：2
> 
> 时间：2012-10-15T08:27:39.203
> 
> 标签：java, android

I was Converting the running code of android 2.2 to android 4.0 but now I am getting an expatparser parseexception.

```
try {    
   String xmls = LoginActivity.xml;
   SAXParserFactory saxPF = SAXParserFactory.newInstance();
   SAXParser saxP = saxPF.newSAXParser();
   XMLReader xmlR = saxP.getXMLReader();

   XMLHandler myXMLHandler = new XMLHandler();
   xmlR.setContentHandler(myXMLHandler);
   InputStreamReader isr = new InputStreamReader(
     new ByteArrayInputStream(xmls.getBytes("UTF-8")));
   xmlR.parse(new InputSource(isr));

  } catch (Exception e) {
   System.out.println(e);
  } 
```

# asp.net - 我的 asp.net 页面导致向上滚动.. 仅在 Firefox 的情况下

> ID：12891803
> 
> 赞同：0
> 
> 时间：2012-10-15T08:27:50.020
> 
> 标签：asp.net, html, firefox, scroll

在我的 ASP.net 页面中，它确实有滚动条，我放置了一个自定义控件，其中我使用了一个 HTML 复选框（它就像分层结构）。

当我向下滚动页面（以到达该控件）然后从该复选框中选择任何项目时，页面将向上滚动到页面顶部，而不会导致回发。

如何阻止滚动问题的发生？

注意：它只发生在 Firefox 上，不会发生在其他浏览器上，即 IE 8/9 和 Chrome。

这是我在我的另一个 asp.net 页面中使用的自定义控件，当我检查以下任何项目时。它会导致页面向上滚动。

```
<asp:Panel ID="TreeViewPanel" runat="server" style="border: 1px solid #CCC; width: 210px; padding:5px 0;">
<ul id="tree">
<li>
    <label>
        <input type="checkbox" value="treeHdrCheck1" runat="server"/>Win Exe
    </label>
    <ul>
        <li>
            <label>
                <input type="checkbox" value="1" runat="server"/>.EXE</label></li>
        <li>
            <label>
                <input type="checkbox" value="2" runat="server"/>.DLL</label></li>
        <li>
            <label>
                <input type="checkbox" value="3" runat="server"/>.OCX</label></li>
        <li>
            <label>
                <input type="checkbox" value="4" runat="server"/>.SYS</label></li>
        <li>
            <label>
                <input type="checkbox" value="5" runat="server"/>.SCR</label></li>
    </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:57:34.870

你在设计你的复选框吗？

如果您使用 CSS 之类的

```
label {
    display: block;
    overflow: hidden;
}

label input[type="checkbox"] {
    position: absolute;
    left: -10000px;
    top: -10000px;
} 
```

要从包含标签中隐藏实际的输入元素，那么您可能需要删除该`top: -10000px;`部分，因为 Firefox 似乎想要将输入元素滚动到视图中。

# youtube-api - Information API Youtube

> ID：12891804
> 
> 赞同：3
> 
> 时间：2012-10-15T08:27:52.033
> 
> 标签：youtube-api

Good morning,

Recently I've been watching the YouTube API and have not found any information about the collection of data from a youtube account.

I have a Youtube channel and would like more information about users who subscribe to it, I also have a website where users are registered and need to know if the user is registered follower of my Youtube channel, I can only guess identify the user by email. So my question is whether it is possible by Youtube API or any other method of identifying this person and know if follower.

Thank you very much in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:36:27.940

我认为使用 Youtube API V3 中的活动列表，您可以获得频道中特定用户的活动，为登录的用户指定“channelId”参数和“mine”参数。

[https://developers.google.com/youtube/v3/docs/activities](https://developers.google.com/youtube/v3/docs/activities)

如果活动列表将视频作为项目返回，您可以从视频片段中获取频道 ID

[https://developers.google.com/youtube/v3/docs/videos/](https://developers.google.com/youtube/v3/docs/videos/)

对于此解决方案，用户必须经过身份验证并授予应用程序访问其在 youtube 中的数据的权限

# jquery - jquery i+1 显示/隐藏

> ID：12891806
> 
> 赞同：0
> 
> 时间：2012-10-15T08:27:57.650
> 
> 标签：jquery, coffeescript

当它可以从一个开始有各种样式时，我怎么能在点击时显示/隐藏元素。我需要点击第一个子项目 - 显示第一个项目等。

代码是这样的：

```
$('sub-item-' + (i + 1)).click ->
  $('item-' + (i + 1)).show()
  #coffeescript

<div class="item-1">1</div>
<div class="item-2">2</div>
<div class="item-3">3</div>
<div class="item-4">4</div>
etc..

<a href="#" class="sub-item-1">Click 1</a>
<a href="#" class="sub-item-2">Click 2</a>
<a href="#" class="sub-item-3">Click 3</a>
<a href="#" class="sub-item-4">Click 4</a>
etc.. 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:32:42.003

我建议（在“普通”jQuery 中）：

```
$('div[id^="item-"]').click(
    function(){
        $('a.' + this.id).toggle();
    }); 
```

参考：

*   [属性开始与 ( `[attribute^="value"]`) 选择器](http://api.jquery.com/attribute-starts-with-selector/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:33:00.967

对于您的*具体*示例，您可以使用[以 selector 开头的属性](http://api.jquery.com/attribute-starts-with-selector/)，然后解析被单击的实际元素上的类名。但我不会那样做，它很脆弱。（例如，假设您在`class`属性中添加了第二个类？这会使解析复杂化，并且如果您将其放在`sub-item-*`类之前，则会弄乱选择器。）相反，我可能会使用该项目在其中的位置容器（如果可以的话），或者更改标记以使用[`data-*`](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)属性。

这是一个示例，假设您的项目是其容器中唯一的东西：

[实例](http://jsbin.com/itukal/1)| [来源](http://jsbin.com/itukal/1/edit)

```
<!-- (The 'items' are unchanged) -->    

<div><!-- the container, this div is just an example -->
    <a href="#" class="sub-item">Click 1</a>
    <a href="#" class="sub-item">Click 2</a>
    <a href="#" class="sub-item">Click 3</a>
    <a href="#" class="sub-item">Click 4</a>
</div> 
```

然后，您可以使用[`index`](http://api.jquery.com/index)来找出单击了哪个 div：

```
$(".sub-item").click(function() {
    var $this = $(this),
        index = $this.index() + 1;
    $(".item-" + index).show(); // Or toggle, whatever
    return false;
}); 
```

（你需要`+ 1`因为`index`是从零开始的。）

但如果它们不是容器中唯一的东西，您可以使用`data-*`属性：

[实例](http://jsbin.com/itukal/2)| [来源](http://jsbin.com/itukal/2/edit)

```
<!-- (The 'items' are unchanged) -->    

<div><!-- the container, this div is just an example -->
    <a href="#" class="sub-item" data-index="1">Click 1</a>
    <a href="#" class="sub-item" data-index="2">Click 2</a>
    <a href="#" class="sub-item" data-index="3">Click 3</a>
    <a href="#" class="sub-item" data-index="4">Click 4</a>
</div> 
```

...这真的很容易：

```
$(".sub-item").click(function(e) {
    var $this = $(this),
        index = $this.attr("data-index");
    $(".item-" + index).show(); // Or toggle, etc.
    return false;
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T08:34:23.883

您可以使用此选择器选择所有以特定类名开头的锚标记

```
$('a[class^="sub-item-"]') 
```

试试这个

```
$('a[class^="sub-item-"]').on('click', function(e) {
    e.preventDefault();

    var $parts = this.className.split('-');

    var $class  = $parts[1] + '-' + $parts[2];

    $('div').hide();

    $('.' + $class).show();
})​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/aBrsZ/2/)**

# android - 从 URL 启动自定义应用程序

> ID：12891811
> 
> 赞同：0
> 
> 时间：2012-10-15T08:28:09.490
> 
> 标签：android, android-intent

嗨，我已经尝试了很多从 url 打开自定义应用程序，但我失败了，我有这个链接来打开自定义应用程序[点击这里](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser)

根据我已经完成编码的链接，我的编码如下

AndroidManifest.xml 文件....

```
 <application
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name=".AnimatedScreen"
        android:label="Last Alert Pro"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

     <activity
        android:name=".MapInfo"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <activity
        android:name=".MapInfo"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <data android:scheme="my.lastalertpro.scheme" />
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
        </intent-filter>
    </activity>
    </activity> 
```

现在在浏览器中的编码部分html链接如下所示

```
 String linkForAndroid = "my.lastalertpro.scheme//" + lon + "/" + lat + "/" + alt; 
```

现在我在 Java 部分中获取数据的编码是

```
 Uri data = getIntent().getData();
    String scheme = data.getScheme(); // "http"

    if (scheme != null) {
    String host = data.getHost(); // "my.lastalertpro.scheme"
    List<String> params = data.getPathSegments();
     try {
    lon = Double.parseDouble(params.get(0)); // longitude
    } catch (Exception e) {
    lon = 0.0;
        } 
```

现在的问题是我在 gmail 中获得了这个链接。当我收到邮件并尝试单击此链接时，浏览器列表未显示，并且应用程序直接在默认浏览器中启动:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:48:34.007

最后我找到了答案

如果您在 gmail 中发送以下链接...

```
 String linkForAndroid = "my.lastalertpro.scheme//" + lon + "/" + lat + "/" + alt; 
```

**不知道为什么，但在ANDROID PHONE ---NOT--- ON DESKTOP COMPUTER**中被认为是这样的

 **```
 in mail if you got link and click on this the link will be looking like 

  http://my.lastalertpro.scheme/70.77188993/22.28305819/96+m. 
```

所以你必须像这样在 AndroidManifest.xml 文件中传递意图过滤器

```
 <intent-filter>
      <data android:scheme="http" android:host="my.lastalertpro.scheme" />
      <action android:name="android.intent.action.VIEW" />
      <category android:name="android.intent.category.DEFAULT" />
      <category android:name="android.intent.category.BROWSABLE" />
   </intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:54:01.937

尝试添加下面给定的标签以及 action_view

```
<action android:name="android.intent.action.VIEW" />
<category android:name="android.intent.category.DEFAULT" />
<category android:name="android.intent.category.BROWSABLE" /> 
```**

# sql-server - 交互式排序需要两次点击才能工作

> ID：12891812
> 
> 赞同：1
> 
> 时间：2012-10-15T08:28:19.240
> 
> 标签：sql-server, reporting-services, ssrs-2008

一个小烦恼，希望很容易解决。

我有一个简单的 SSRS tablix，在第一列上进行交互式排序，这也是报告中唯一的组，由字符串组成。

我在这个列中添加了交互式排序，如下所示：

![在此处输入图像描述](../Images/18ba27953af94dbe4b13a6f898569d40.png)

最初呈现报告时，它按字母顺序排序；这是通过 Group 的排序属性完成的`RepOperName`。

为什么当我第一次点击此交互式按钮时在门户网站中查看报告时什么也没发生，即它最初是按 AZ 排序的，但它保持按 AZ 排序；只有当我第二次点击它时，它才会变成 ZA 排序 - 我如何解决这个问题，以便在我第一次点击交互式按钮时它变成 ZA？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T19:25:22.213

这有点棘手 - 排序工作正常，问题是，默认情况下，交互式排序总是首先按升序对记录进行排序。在第二次“命中”之后，它按降序排序。坏消息是，这种行为无法改变。部分好消息是，您可以更改用于排序的源字段以具有不同的顺序，但对于文本列，它可能会影响性能。这是显示可能解决方法的链接。

[http://www.bidn.com/blogs/Daniel/ssas/1820/ssrs-change-the-interactive-sort-default-to-descending](http://www.bidn.com/blogs/Daniel/ssas/1820/ssrs-change-the-interactive-sort-default-to-descending)

第二种解决方案，但不是那么优雅，默认情况下会在您的表格中应用降序。

# javascript - Take register detail down to other div

> ID：12891816
> 
> 赞同：0
> 
> 时间：2012-10-15T08:28:28.737
> 
> 标签：javascript, jsp

I have a table with a check option column for each register. What I want to do is when one of the checks is available and press button "modify" It will appear the detail of the selected register in a new div.

Show and hide detail when button is pressed no problem. Fill the detail with the selected row is the problem.

how would you do it?

thanks all.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T08:18:16.223

反正也没那么难。

[CodePen.IO 示例](http://codepen.io/anon/pen/Lkbuw)

```
function rowToDiv() {

    var row = document.getElementById("row1"),
        html = [];

    for( var i = 0, cells = row.children, ln = cells.length; i < ln; i++ ) {

        html.push( cells[ i ].innerText + " " );
    }

    alert( html.join('') );
} 
```

# c++ - 如果在声明时未初始化，c 中的 const 值有什么用？

> ID：12891818
> 
> 赞同：10
> 
> 时间：2012-10-15T08:28:35.560
> 
> 标签：c++, c

> **可能重复：**
> [C 中的 const 与 C++ 中的 const](https://stackoverflow.com/questions/6087729/const-in-c-vs-const-in-c)

我有以下代码

**在 C 中**

```
int main()
{
    const int k;//allowed but garbage and later we can't modify
    printf("%d",k);
} 
```

> o/p=垃圾

**在 C++ 中**

```
int main()
{
    const int k; //not allowed from here itself
    printf("%d",k);
} 
```

> o/p-编译时错误

我怀疑如果要在没有声明的情况下声明它，但在它之后我们不能声明它，`const`那么 in C的用途是什么。`allowed``initialization``declaration``initialize`

但是`c++`我们不能在`const`没有`initialization`.

里面的变量有什么用`k`还是`C`没用，如果我们只声明它，因为以后修改是不可能的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T08:34:15.730

它本身没有用。

但是，有一些编译器特定的扩展再次变得有用。 `C Compilers for embedded platforms`例如，通常具有允许为变量提供固定地址或作为内存映射 I/O 端口的别名的扩展。

将`const`表明/强制您`only read`来自该地址，例如`memory mapped input port.`

# delay - Unwanted delay with UIGestureRecognizerStateEnded

> ID：12891827
> 
> 赞同：3
> 
> 时间：2012-10-15T08:29:11.977
> 
> 标签：delay, uipangesturerecognizer

I need to do some actions when the user starts touching the screen, moves a finger and then ends a touch. Touch began works fine, move as well, but touch end runs with a delay between 0.5-1 sec. Below there's a code:

```
-(id) init {    
    if (self = [super init]) {
        //Adding a listener for catching touch events and get call back to selector method 
        [self addGestureListener:@selector(gestureCallback:)];

        CCScene *scene = [CCScene node];

        [scene addChild: self];

        [[CCDirector sharedDirector] runWithScene:scene];
    }
    return self;
} 

- (UIPanGestureRecognizer *)addGestureListener:(SEL)selector {
    UIPanGestureRecognizer *recognizer = [[[UIPanGestureRecognizer alloc] initWithTarget:self action:selector] autorelease];
    [[[CCDirector sharedDirector] openGLView] addGestureRecognizer:recognizer];
    return recognizer;
}

-(void) gestureCallback:(UIPanGestureRecognizer *) recognizer {

    if (recognizer.state == UIGestureRecognizerStateBegan) {
        NSLog(@"start");
    } else if (recognizer.state == UIGestureRecognizerStateChanged) {
        NSLog(@"moved");
    } else if (recognizer.state == UIGestureRecognizerStateEnded) {
        NSLog(@"ended");
    }
} 
```

In the log (last 2 lines) I see this:

```
2012-10-15 11:29:03.609 App[6169:c07] moved
2012-10-15 11:29:04.267 App[6169:c07] ended 
```

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-31T22:04:56.007

查看 GestureRecognizer 的[delaysTouchesEnded 属性](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instp/UIGestureRecognizer/delaysTouchesEnded)。来自 Apple 的文档：

当此属性的值为 YES（默认值）并且接收器正在分析触摸事件时，窗口会暂停将 UITouchPhaseEnded 阶段的触摸对象传递到附加视图。如果手势识别器随后识别出它的手势，则取消这些触摸对象（通过 touchesCancelled:withEvent: 消息）。如果手势识别器无法识别其手势，则窗口在调用视图的 touchesEnded:withEvent: 方法时传递这些对象。将此属性设置为 NO 以在手势识别器分析相同的触摸时将 UITouchPhaseEnded 中的触摸对象传递到视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-13T17:27:18.040

我只是在模拟器上得到这个延迟。当我使用物理设备时，我没有看到相同的延迟。

# shell - 等待服务完成启动的shell命令是什么？

> ID：12891831
> 
> 赞同：0
> 
> 时间：2012-10-15T08:29:20.120
> 
> 标签：shell, batch-file, windows-services, wait

我需要一个简单的批处理命令，它会等到指定的服务（实际上是 SQL Server）完成启动。看，该`bat`文件运行一些非服务可执行文件，它们在启动时尝试连接到 SQL 服务器。他们失败了。

我尝试`help`（“/？”键）一些 Windows Shell 命令，但它们似乎没有响应我需要的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:43:11.487

不幸的是，这个命令不存在。`sc`可以启动和停止服务，并且可以查询服务的状态（请[参阅此答案](https://stackoverflow.com/a/133926/34088)）。但是即使查询，也只会得到“Service is running”；没有办法知道该服务在其启动中走了多远。

有两种解决方法：

1.  睡一会儿
2.  循环运行一个简单的 SQL 命令

第一种方法会有所帮助，但不能完全解决问题；当服务器处于负载状态时，启动可能需要更长的时间。

对于第二种方法，使用超时的循环（伪代码）：

1.  将计数器设置为 X
2.  尝试连接
3.  如果连接成功，则退出成功
4.  递减计数器
5.  如果计数器 <= 0 -> 错误
6.  睡眠 1s
7.  转到第 2 步

为了更加安全，您可以在其中添加一个`sc query`以确保服务没有失败。

# android - 当我按主页键时，如何从另一个活动返回我的活动？

> ID：12891833
> 
> 赞同：0
> 
> 时间：2012-10-15T08:29:28.217
> 
> 标签：android

我从活动A启动活动B，现在我想在按home键时回到活动A而不是Launcher，如何实现？

我发现了一个类似的情况，LockPatternKeyguardView，它启动一个紧急拨号器，然后按home键，可以再次回到LockPatternKeyguardView，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:40:40.763

您不能覆盖主页按钮的行为，因为如果这样做，您可以让用户永远不会退出您的应用程序，而 android 不会让您这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:33:28.843

Home 按钮是一个非常危险的覆盖按钮，因此，Android 不会让你覆盖它的行为，就像你做 BACK 按钮一样。

当按下 Home 按钮时，会在您的活动中调用 onStop 方法。所以你可以做的是添加finish(); 在 onStop 方法中销毁您的活动。最终将引发 onDestroy 方法以确认您的活动已完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T08:46:59.970

```
case R.id.home:                     
        Intent i = new Intent(this,Aactivity.class);
        startActivity(i);
        return  true; 
```

我只知道我呈现的一种方式....

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T08:47:30.047

按下主页按钮意味着用户想要退出您的应用程序，您不应该覆盖它来留住用户。此外，只有主页按钮才能让用户摆脱卡住的应用程序。考虑将菜单项设置为“主页”或覆盖后退按钮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T08:44:23.663

您可以在按下按钮时启动您的活动。为此，您必须将活动的操作声明为 HOME。

```
<intent-filter> 
    <action android:name="android.intent.action.MAIN" /> 
    <category android:name="android.intent.category.HOME" /> 
</intent-filter> 
```

但是这样做也有缺点：

1.  当您按下主页按钮时，将出现一个选择器。这将让您决定要启动哪个活动。由于默认启动器应用程序也具有相同的操作 (HOME)，它会询问您要启动哪个活动。
2.  当用户按下主页按钮时，您可以将您的活动设为默认活动。您可以在按下主页按钮后获得选择器对话框时执行此操作，只需检查选择器对话框上出现的复选框即可。

在第二种情况下，您可以在按下主页按钮时将您的活动设置为默认活动，但它不会启动默认主页屏幕，这在您想要启动其他应用程序时非常有用。所以总是建议不要处理主页按钮。

您也不能像其他键事件一样处理 Home 键（如返回键、菜单键等）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T09:16:04.900

当按下主页按钮时，活动进入 onStop() 状态。因此覆盖活动 B 中的 onStop() 方法并完成活动。如下所示，

```
 protected void onStop() {
        finish();
        super.onStop();
    } 
```

# c++ - 编译 sfml c++ (ubuntu)

> ID：12891834
> 
> 赞同：2
> 
> 时间：2012-10-15T08:29:33.997
> 
> 标签：c++, ubuntu, compilation, sfml

我按照[本](http://sfmlcoder.wordpress.com/2011/08/16/building-sfml-2-0-with-make-for-gcc/)教程安装 sfml 2.0，但在编译时遇到问题，我尝试了以下脚本的许多变体。我正在使用[本](http://sfml-dev.org/tutorials/2.0/start-linux.php)教程中的代码。

这就是我尝试做的

g++ main.o -o -I/home/hassan/Development/sfml——编译

然而

g++ main.o -o -L/home/hassan/Development/sfml/lib -lsfml-graphics -lsfml-window -lsfml-system

才不是

“/usr/bin/ld: 无法打开输出文件 -L/home/hassan/Development/sfml/: 没有这样的文件或目录”

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:14:12.670

来自“man g++”：

> ```
>  -o file
>       Place output in file file.  This applies regardless to whatever
>       sort of output is being produced, whether it be an executable file,
>       an object file, an assembler file or preprocessed C code. (...) 
> ```

g++ 的 -o 选项需要一个输出文件作为参数。所以在行

```
g++ main.o -o -L/home/hassan/Development/sfml/lib -lsfml-graphics -lsfml-window -lsfml-system 
```

您告诉将可执行文件放入文件“-L/home/hassan/Development/sfml/lib”中，这实际上没有意义。尝试

```
g++ main.o -o sfml-app -L/home/hassan/Development/sfml/lib -lsfml-graphics -lsfml-window -lsfml-system 
```

# javascript - 为什么 $(window).animate scrollTop 不起作用？

> ID：12891836
> 
> 赞同：2
> 
> 时间：2012-10-15T08:30:07.767
> 
> 标签：javascript, jquery, html

如果以下代码有效（当然可以）

```
$( 'html, body' ).animate(
    {
        "scrollTop": "500"
    }, 
    500
); 
```

那么为什么下面的代码不起作用？

```
$( window ).animate(
    {
        "scrollTop": "500"
    }, 
    500
); 
```

如果以下代码有效

```
$( window ).scroll( myScrollFunctionHandler ); 
```

那么为什么下面的代码不起作用？

```
$( 'html, body' ).scroll( myScrollFunctionHandler ); 
```

有人可以对为什么必须这样做一个全面的解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T08:34:06.903

`window`没有 scrollTop 属性，这就是您的第一个示例不起作用的原因。`document.body`做。

至于您的第二个示例，`$(window).scroll`是[window.onscroll](https://developer.mozilla.org/en-US/docs/DOM/window.onscroll)的事件处理程序安装程序。没有“body onscroll”事件，因此显然不会调用安装在 body（或 html）元素上的事件处理程序，因为事件不会在 DOM 中冒泡，而只会向上冒泡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-06T16:59:54.390

这应该是由于`$(window).animate()`. 实验结果表明，在这个 jQuery animate() 代码中，`$(window).scrollTop()`总是返回零并且`$(window).scrollTop(value)`不能正确设置值。

但是，这些工作`animate()`在其步骤回调函数之前和之中。因此，下面的代码可以正常工作。

```
function scrollNow(final_val){
    var initial_val = $(window).scrollTop(),
        diff = final_val - initial_val
    ;
    $(window).animate(
        {
            scrollTop: diff,
        },
        {
            duration: 1000,
            step: function(now, fx){
               $(window).scrollTop(initial_val + now);
            }
        }
    );
} 
```

# android - 哪个手机关机的时间戳？

> ID：12891840
> 
> 赞同：4
> 
> 时间：2012-10-15T08:30:16.593
> 
> 标签：android, android-alarms

对于 Android 设备，有没有办法找出设备关闭的时间（或时间戳）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T08:36:40.087

我认为没有任何预定义的支持。但是，使用您的自定义逻辑很容易完成此操作。您需要做的就是定义一个`BroadcastReceiver`监听意图的对象`android.intent.action.ACTION_SHUTDOWN`。一旦它收到意图，只需将当前保存`Date`在*SharedPreferences*、*SQLite*或任何你想要的地方。稍后，手机开机，读取​​保存的值可以知道手机关机的估计时间。例如：

接收器代码：

```
public class ShutdownReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        //save the date here
    }
} 
```

并在**AndroidManifest.xml**

```
<receiver android:name=".ShutdownReceiver">
  <intent-filter>
    <action android:name="android.intent.action.ACTION_SHUTDOWN" />
  </intent-filter>
</receiver> 
```

# javascript - 在 kinetic.js 中旋转 kinetic.group 的问题

> ID：12891841
> 
> 赞同：2
> 
> 时间：2012-10-15T08:30:22.953
> 
> 标签：javascript, css, html, kineticjs

我正在使用动力学 js。我正在将图像、线条等添加到 kinetic.group 并尝试旋转该组，并且它正在正确旋转。但是在旋转组之后，如果我尝试画一条线，它不会正确地绘制在当前鼠标位置上。它正在像旋转之前一样绘制。

问题可能是，如果我旋转组，舞台坐标似乎没有旋转。我应该怎么做才能防止这种情况发生？

参考代码 - -

```
var rootGroup = new Kinetic.Group({
                    x:  stage.getWidth()/3, 
                    y:  stage.getWidth()/6, 
                    draggable: true,
                    offset: [images.darthVader.width/2, images.darthVader.height/2]
                });
rootGroup.add(line);
rootGroup.setRotationDeg(rootGroup.getRotationDeg()+90); 
```

我就是这样画线的。

```
 var activeline = new Kinetic.Line({
   points: [{x:0,y:0}],
   stroke: "blue",
   strokeWidth: 3,
   lineCap: "round",
   lineJoin: "round",
 });
 var mousePos = stage.getMousePosition();

 points.push({
            x: mousePos.x,
            y: mousePos.y
 });

 activeline.setPoints(points);
 rootGroup.add(activeline); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:37:03.473

我对 KineticJS 不熟悉，但似乎您必须将转换矩阵重置为其默认状态。OpenGL 有 glLoadIdentity() 方法。在 KineticJS 上搜索类似的方法。

请参阅本教程 [http://www.html5canvastutorials.com/advanced/html5-canvas-reset-transform-tutorial/](http://www.html5canvastutorials.com/advanced/html5-canvas-reset-transform-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:34:09.727

这应该让你相当接近：http: [//jsfiddle.net/k4qB8/24/](http://jsfiddle.net/k4qB8/24/)

```
 // This rotates that added active line along with your group.
 // This makes the draw direction correct
 activeline.setRotationDeg(0-rootGroup.getRotationDeg()); 
```

# javascript - 如何用 jQuery 替换变量数组中的值

> ID：12891842
> 
> 赞同：3
> 
> 时间：2012-10-15T08:30:24.370
> 
> 标签：javascript, jquery

我有这个代码

```
newRow =  "<tr><td>[[var1]]</td><td>[[var2]]</td><td>[[var3]]</td></tr>" 
```

现在我有这个数组

```
data['var1'] ='test1';
data['var2'] ='test2';
data['var3'] ='test3'; 
```

我想以最简单的方式替换 newRow 中的上述数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T08:33:12.687

```
$.each(data, function(key, item) {
    newRow = newRow.replace('[[' + key + ']]', item);
}); 
```

[演示](http://jsfiddle.net/H7MXH/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T08:34:27.493

不需要 jQuery：

```
newRow = newRow.replace(/\[\[(\w+)\]\]/g, function($0, $1) {
  return ($1 in data ? data[$1] : '');
  // empty string as fallback, if not available in data
}); 
```

# java - （Java）将四元数转换为弧度（或度数）？

> ID：12891843
> 
> 赞同：1
> 
> 时间：2012-10-15T08:30:26.127
> 
> 标签：java, opengl, quaternions, bulletphysics, radians

在过去的几天里，我一直在使用 OpenGL 和 JBullet。经过大量的修补，我终于设法修复了 JBullet 中的一些错误，并使其可用于一些演示。我目前遇到的问题是我无法将翻译转换为度数，到目前为止，我使用四元数获得了最好的结果，使用以下代码转换为弧度：

```
public Vector3f getRadians(Quat4f quat) {
    Vector3f v = new Vector3f();
    //float scale = (float) Math.abs(quat.x * quat.y * quat.z); //Apparently the scale of the angle, thought without I get a almost perfect result on the X-Axis
    float angle = (float) Math.abs(Math.acos(quat.w)) * 2.0f;

    v.x = angle * Math.round(quat.x);
    v.y = angle * Math.round(quat.y);
    v.z = angle * Math.round(quat.z);               

    return v;
} 
```

值得注意的是，我唯一的成功是在四元数的 X 轴上，而且在任何其他轴上都没有平移。更不用说它偏离了 0-6 度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:34:05.477

我真的不确定这是你想要的，但来自 glm::gtx::quaternion ：

```
inline valType roll
(
    detail::tquat<valType> const & q
)
{
    return atan2(valType(2) * (q.x * q.y + q.w * q.z), q.w * q.w + q.x * q.x - q.y * q.y - q.z * q.z);
}

template <typename valType> 
inline valType pitch
(
    detail::tquat<valType> const & q
)
{
    return atan2(valType(2) * (q.y * q.z + q.w * q.x), q.w * q.w - q.x * q.x - q.y * q.y + q.z * q.z);
}

template <typename valType> 
inline valType yaw
(
    detail::tquat<valType> const & q
)
{
    return asin(valType(-2) * (q.x * q.z - q.w * q.y));
} 
```

因此，以更易读的形式：

```
float roll = atan2(valType(2) * (q.x * q.y + q.w * q.z), q.w * q.w + q.x * q.x - q.y * q.y - q.z * q.z);
float pitch = atan2(valType(2) * (q.y * q.z + q.w * q.x), q.w * q.w - q.x * q.x - q.y * q.y + q.z * q.z);
float yaw = asin(valType(-2) * (q.x * q.z - q.w * q.y));
vec3 EulerAngles = vec3(pitch, yaw, roll); 
```

# iis - Red5 媒体服务器 + jwPlayer 未按预期工作

> ID：12891847
> 
> 赞同：1
> 
> 时间：2012-10-15T08:30:58.247
> 
> 标签：iis, video-streaming, red5

嗨，我在我的 win 2003 服务器上运行 red5 媒体服务器，它被分配给它自己的 IP 地址。我已经使用 jwplayer 设置了一个测试用例来流式传输视频，不幸的是它没有按预期工作（在本地工作，端口是开放的，当使用端口 5080 时，我可以从外部运行 red5-demos）

我正在为 jwplayer 使用以下设置：

```
 jwplayer('mediaspace').setup({
    'flashplayer': 'player.swf',
    'file': 'test.flv',
    'protocol': 'rtmp',
    'streamer': 'rtmp://myserver.com:1935',
    'controlbar': 'bottom',
    'width': '470',
    'height': '320'
  }); 
```

问题是 jwplayer 显示错误：

```
Server not found: rtmpt://myserver.com:80 
```

虽然我在端口 1935 上定义了协议 rtmp，但 jwplayer 试图在端口 80 上使用 rtmpt？有什么想法有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:36:46.807

我认为 JWPlayer 默认尝试在端口 80 上回退到 RTMPT。

所以那个消息：

```
Server not found: rtmpt://myserver.com:80 
```

可以翻译成人类可读的信息：

```
I tried to connect to rtmp://myserver.com:1935, was not able to connect, 
falled back to rtmpT (rtmp over HTTP Tunneling to bypass firewalls) 
on port 80\. But still failed 
```

塞巴斯蒂安

# asp.net-mvc - ASP.NET MVC 使用 ViewModel 的最佳方式是什么？

> ID：12891849
> 
> 赞同：0
> 
> 时间：2012-10-15T08:31:03.110
> 
> 标签：asp.net-mvc, viewmodel

**客户.cs**

```
public partial class Customers
{
    public int sno { get; set; }
    public string CustomerName { get; set; }
    public string CustomerNo { get; set; }
    ...
    // 20 more attribute too...
} 
```

**城市.cs**

```
public partial class Cities
{
    public int sno { get; set; }
    public string CityName { get; set; }
    public string CityPlate { get; set; }
    public string CityPhoneCode { get; set; }
} 
```

**AddCustomerViewModel.cs**

```
public class AddCustomerViewModel
{

    [Required(ErrorMessage = "Şehir seçiniz.")]
    [Display(Name = "Şehir")]
    public Nullable<int> CityId { get; set; }

    // same with Customers.cs
    public int sno { get; set; }

    [Required(ErrorMessage = "Müşteri adını giriniz!")]
    [Display(Name = "Müşteri Adı")]
    public string CustomerName { get; set; }

    [Required(ErrorMessage = "Müşteri numarası giriniz!")]
    [Display(Name = "Müşteri Numarası")]
    public string CustomerNo { get; set; }
    ...
    // 20 more attribute too...
} 
```

**控制器**

```
[Authorize(Roles = "Administrator")]
public ActionResult AddCustomer()
{
    AddCustomerViewModel addCustomerViewModel = new AddCustomerViewModel();
    addCustomerViewModel.Cities = entity.Cities;

    return View(addCustomerViewModel);
}

[HttpPost]
[Authorize(Roles = "Administrator")]
public ActionResult AddCustomer(AddCustomerViewModel addCustomerViewModel)
{
    entity.Customers.Add(GetCustomerFromViewModel(addCustomerViewModel));
    entity.SaveChanges();

    return View(addCustomerViewModel);
} 
```

我正在使用一个被调用`GetCustomerFromViewModel`来将 addCustomerViewModel 转换为 Customer 的函数，如下所示：

**GetCustomerFromViewModel()**

```
private Customers GetCustomerFromViewModel(AddCustomerViewModel addCustomerViewModel)
{
    Customers customer = new Customers();

    customer.CityId = addCustomerViewModel.CityId;
    customer.CreatorUserId = (Guid)System.Web.Security.Membership.GetUser().ProviderUserKey;
    customer.CustomerName = addCustomerViewModel.CustomerName;
    customer.CustomerNo = addCustomerViewModel.CustomerNo;
    customer.Description = addCustomerViewModel.Description;
    ...
    // 20 more attribute too...

    return customer;
} 
```

但是客户类有太多变量 (customerNo, CustomerName, ...) ，所以这是不好的方法。

当我使用 DbContextGenerator 并将类添加到 dataAnnotations 然后当我更新模型时， dataAnnotations 被删除。（因为 DbContext 类也更新了）

如何将 ViewModel 与 DataAnnotations 一起使用。以及对 Db 的有效插入操作？文章、教程、示例或建议？

我希望我能解释一下。

非常感谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:38:58.983

你可以看看[AutoMapper](http://automapper.org/)，它将简化你的域模型和视图模型之间的映射逻辑，这样你就不需要手动映射每个属性。除此之外，您的代码没有任何问题。您已经在使用视图模型并拥有一个映射层。所以你的`GetCustomerFromViewModel`功能可能会变成：

```
private Customers GetCustomerFromViewModel(AddCustomerViewModel addCustomerViewModel)
{
    return Mapper.Map<AddCustomerViewModel, Customers>(addCustomerViewModel);
} 
```

或完全摆脱它并直接在控制器操作中使用 AutoMapper 调用，因为此功能不再带来太多价值：

```
[HttpPost]
[Authorize(Roles = "Administrator")]
public ActionResult AddCustomer(AddCustomerViewModel addCustomerViewModel)
{
    var customer = Mapper.Map<AddCustomerViewModel, Customers>(addCustomerViewModel);
    entity.Customers.Add(customer);
    entity.SaveChanges();

    return View(addCustomerViewModel);
} 
```

# c# - Metro 应用程序的 XAML 流体布局

> ID：12891856
> 
> 赞同：1
> 
> 时间：2012-10-15T08:31:20.743
> 
> 标签：c#, xaml, windows-runtime, winrt-xaml

> **可能重复：**
> [WPF - 保证金百分比](https://stackoverflow.com/questions/3907880/wpf-margin-in-percentage)

我使用 C# 和 XAML 编写简单的 Metro 应用程序。我有图像背景和背景图像填充整个屏幕 - 分辨率独立。但现在，我想放置一些按钮，它们使用边距定位。但这个解决方案不是分辨率独立性。

有什么办法可以放置与分辨率无关的元素？CSS中的百分比边距之类的东西？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:36:44.763

一种解决方案是在 Grid.ColumnDefinitions/RowDefinitions 中使用星形列宽和列高，因此您可以这样做：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition
            Width="5*" />
        <ColumnDefinition
            Width="4*" />
        <ColumnDefinition /> <!-- 1* is the default -->
    </Grid.ColumnDefinitions>
    <TextBlock
        Text="Percentage aligned text in column 0 (default)" />
    <TextBlock
        Text="Percentage aligned text in column 2"
        Grid.Column="1" />
</Grid> 
```

另一种方法是将其设计为特定的宽度/高度，并将其放在 Viewbox 控件中，该控件会将其拉伸到可用的尺寸。

*编辑

我写了一篇关于布局的博客文章，也可能对您有所帮助。

[http://blog.safaribooksonline.com/2012/10/13/layout-and-formatting-with-windows-8-xaml-development/](http://blog.safaribooksonline.com/2012/10/13/layout-and-formatting-with-windows-8-xaml-development/)

# ios - 在 iOS6 上 insertObject:atIndex: 的异常

> ID：12891858
> 
> 赞同：5
> 
> 时间：2012-10-15T08:31:27.393
> 
> 标签：ios, exception, core-data, ios6

我在 iOS6 上遇到以下异常（在带有 CoreData 的应用程序上）：

“2012-10-15 10:21:28.952 MyApp[68650:c07] *** 由于未捕获的异常 'NSInvalidArgumentException' 导致应用程序终止，原因：'*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil' ***第一次抛出调用堆栈：（0x28e6012 0x2659e7e 0x2899b6a 0x2899a20 0x1646941 0x1642c67 0x164f846 0x164f908 0x6c540 0x2057e83 0x28a5376 0x28a4e06 0x288ca82 0x288bf44 0x288be1b 0x33967e3 0x3396668 0x15a165c 0x13a22 0x2845）的libc ++ abi.dylib：终止称为抛出异常”

这在 iOS5 上不会发生，所以在 iOS6 上会发生一些我不明白的事情。我在调用 insertObject:atIndex: 的每个点上都设置了一个断点：但这些没有被调用——它必须是这个 libc++abi.dylib 中的某个东西，它被调用并崩溃。有谁知道可能出了什么问题？

谢谢你

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-15T09:10:48.800

这可能是因为 iOS5 没有为这个错误抛出异常（并且应该有，但现在 iOS6 抛出一个比以后出现不稳定行为更好的异常），或者因为你在 iOS6 中有一些不同的行为，这使得你的对象`nil`原本是不在iOS5中。

无论是什么原因，您都可以在符号上添加一个符号断点`insertObject:atIndex:`，这样每次调用此方法时它都会中断，无论它在您的应用程序中的任何位置（在您自己的代码中或不在您自己的代码中）。

*   转到“断点导航器”视图（`Cmd-6`快捷方式）
*   点击“+”按钮添加符号断点 ![添加符号断点](../Images/080214765f920168287ee157175d51a7.png)
*   将符号断点设置为在遇到符号时中断`[NSArray insertObject:atIndex:]` ![编辑符号断点](../Images/76927e698ecc400aa1f3427435a8aac2.png)

因此，您可以查看何时使用`nil`第一个参数的值调用它，并在出现问题的地方解决您的问题。

您还可以添加一个**异常断点**来在抛出异常时中断，从而知道代码中何时发生异常。这是另一种让您知道代码的哪一部分（您自己的或其他的）生成异常的方法。

![异常断点](../Images/ec3ff292b819aca58110c40ae40cc136.png)

一旦断点被​​命中并且程序在异常发生之前停止，您可以在调用堆栈中检查您自己的代码的哪一部分导致最后触发了此异常。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-15T08:35:12.117

崩溃的原因是您尝试插入的对象是`nil`. 这意味着它没有正确实例化。这反过来意味着在您遇到该异常**之前出现了问题。**

您能否发布对您尝试插入的对象进行`alloc`编辑和初始化的代码？`init`

为了找到相关的代码行，请尝试以下操作： 转到 Xcode 项目中的“异常”选项卡：

![例外选项卡](../Images/959436597e324b7314e2ff540933c6d7.png)

然后单击“+”按钮（在页面底部）并选择“Add Exception Breakppoint ...”。将所有设置保留为默认值，然后单击“完成”。

如果你重新运行你的项目，它现在应该在抛出异常之前停止在相关的代码行。然后，您可以向上移动调用堆栈并确定您在代码中从何处调用了负责此行为的库函数。然后尝试查看此时是否所有对象都已正确初始化。

# python - 在 matplotlib 图中交互式选择系列

> ID：12891860
> 
> 赞同：10
> 
> 时间：2012-10-15T08:31:34.200
> 
> 标签：python, matplotlib

我一直在寻找一种方法，可以在创建绘图后选择绘图上可见的系列。

我需要这个，因为我经常有很多系列的情节。它们太多了，无法同时绘制，我需要快速交互式地选择哪些系列是可见的。理想情况下，将有一个窗口，其中包含绘图和复选框中的系列列表，其中选中复选框的系列可见。

有谁知道这是否已经在某处实施？如果没有，那么有人可以指导我如何自己做吗？

谢谢！

奥马尔

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T00:00:16.333

这完全取决于您愿意付出多少努力以及确切的要求是什么，但您可以打赌它已经在某个地方实施了:-)

如果主要目的是不使图像混乱，则使用内置功能可能就足够了；您可以在 matplotlib 示例库中找到相关代码：

*   [http://matplotlib.org/examples/event_handling/legend_picking.html](http://matplotlib.org/examples/event_handling/legend_picking.html)
*   [http://matplotlib.org/examples/widgets/check_buttons.html](http://matplotlib.org/examples/widgets/check_buttons.html)

如果你真的想要一个 UI，那么你可以通过限制绘图/数据的数量来保护性能，你通常会使用一个 GUI 工具箱，比如 GTK、QT 或 WX。在此处查找一些文章和示例代码：

*   [http://eli.thegreenplace.net/2009/05/23/more-pyqt-plotting-demos/](http://eli.thegreenplace.net/2009/05/23/more-pyqt-plotting-demos/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T08:58:14.187

如果您有几个或更少的图，带有复选框的列表会很好，但对于更多的图，弹出菜单可能会更好。不过，我不确定 matplotlib 是否可以实现这些。

我曾经实现这一点的方法是使用滑块从列表中选择绘图 - 基本上您使用滑块来设置应显示的系列的索引。每个数据集有几百个系列，所以这是快速浏览它们的好方法。

我的设置代码大致是这样的：

```
fig = pyplot.figure()
slax = self.fig.add_axes((0.1,0.05,0.35,0.05))
sl = matplotlib.widgets.Slider(slax, "Trace #", 0, len(plotlist), valinit=0.0)
def update_trace():
    ax.clear()
    tracenum = int(np.floor(sl.val))
    ax.plot(plotlist[tracenum])
    fig.canvas.draw()
sl.on_changed(update_trace)
ax = self.fig.add_axes((0.6, 0.2, 0.35, 0.7))
fig.add_subplot(axes=self.traceax)
update_trace() 
```

这是一个例子：

![绘图图像](../Images/64ac2cdb934f83a155b06fc0ab068ab0.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-24T01:17:05.890

现在 plot.ly 已经开源了他们的库，它是 python 中交互式绘图的一个非常好的选择。参见例如：[https](https://plot.ly/python/legend/#legend-names) ://plot.ly/python/legend/#legend-names 。您可以单击图例迹线并选择/取消选择迹线。

如果您想嵌入 Ipython/Jupyter Notebook，这也很简单：[https ://plot.ly/ipython-notebooks/gallery/](https://plot.ly/ipython-notebooks/gallery/)

# java - EJB 3.1 Unit Test，两个Bean，一个@DependsOn另一个，通过mock交换

> ID：12891869
> 
> 赞同：2
> 
> 时间：2012-10-15T08:31:57.963
> 
> 标签：java, unit-testing, jakarta-ee, mocking, ejb

我目前正在使用 Glassfish 3.1.2.2 进行我的第一个 EJB 项目。我有两个豆子：

```
@Singleton
@Startup
public class ABean implements AInterface {
//implementation
} 
```

和

```
@DependsOn("ABean")
@Startup
@Singleton
@EJB(name = "ABean", beaninterface = AInterface)
public class BBean implements BInterface {
//implementation
} 
```

我想对“BBean”进行单元测试并模拟“ABean”。目前，当我启动 JUnitTest 时，“ABean”将启动，但**有没有办法将“ABean”与“ABeanMock”交换？**

我需要一种自动机制来与模拟交换实现，因为这些测试将在詹金斯服务器上运行。因此，手动采用代码对于单个手动测试是可以的，但不能用于自动测试。

我正在使用 Glassfish Embedded API 进行单元测试。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T11:08:54.720

You can use [Arquillian](http://arquillian.org/) for this.

[Arquillian](http://arquillian.org/guides/) runs your tests inside a container, deploying to an application server if necessary. You can choose to use selected classes only, so this would allow you to create a replacement `ABean` that implements `AInterface`, and choose not to deploy the *real* `ABean` - which would result in your replacement being used instead.

The test would look something like this:

```
@Singleton(name = "ABean")
class AMockBean implements AInterface {
  // Mocked bean implementation
}

@RunsWith(Arquillian.class)
public class MyTests {

  @Inject
  private BBean bbean;

  @Deployment
  public Archive<?> deployment() {
     return ShrinkWrap.create(JavaArchive.class)
            .addClass(BBean.class)
            .addClass(AMockBean.class)
            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
  }

  @Test
  public void testBBean() {
    bbean.whatever();
  }
} 
```

This is all untested, but it should be something along the lines of this. Depending on your environment and dependencies, it might be more difficult to configure correctly.

Arquillian is a wonderful tool, but it can be difficult to set up exactly the way you want it when starting out. Luckily there are [several guides](http://arquillian.org/guides/) to help you through the process.

# xslt - 将 jsonx 数组转换为 xslt 中的 xml

> ID：12891873
> 
> 赞同：0
> 
> 时间：2012-10-15T08:32:22.800
> 
> 标签：xslt, xslt-1.0, jsonx

我的输入 XML 将是这样的

```
<json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <json:object name="Login">
        <json:array name="Group">
            <json:object>
                <json:string name="Name">john</json:string>
                <json:string name="Password"/>
            </json:object>
            <json:object>
                <json:string name="Name">john</json:string>
                <json:string name="Password"/>
            </json:object>
        </json:array> 
    </json:object>
</json:object>
    <alice xmlns="http://some-namespace" xmlns:charlie="http://some-other-namespace">
    <bob>david</bob>
    <charlie:edgar>frank</charlie:edgar>
</alice>
    {
   "alice":{
      "bob":{
         "$":"david",
         "@xmlns":{
            "charlie":"http:\/\/some-other-namespace",
            "$":"http:\/\/some-namespace"
         }
      },
      "charlie:edgar":{
         "$":"frank",
         "@xmlns":{
            "charlie":"http:\/\/some-other-namespace",
            "$":"http:\/\/some-namespace"
         }
      },
      "@xmlns":{
         "charlie":"http:\/\/some-other-namespace",
         "$":"http:\/\/some-namespace"
      }
   }
}

<json:object xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.datapower.com/schemas/json jsonx.xsd">
    <json:object name="alice">
        <json:object name="bob">
            <json:string name="$">david</json:string>
            <json:object name="@xmlns">
                <json:string name="charlie">http://some-other-namespace</json:string>
                <json:string name="$">http://some-namespace</json:string>
            </json:object>
        </json:object>
        <json:object name="charlie:edgar">
            <json:string name="$">frank</json:string>
            <json:object name="@xmlns">
                <json:string name="charlie">http://some-other-namespace</json:string>
                <json:string name="$">http://some-namespace</json:string>
            </json:object>
        </json:object>
        <json:object name="@xmlns">
            <json:string name="charlie">http://some-other-namespace</json:string>
            <json:string name="$">http://some-namespace</json:string>
        </json:object>
    </json:object>
</json:object>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:json="http://www.ibm.com/xmlns/prod/2010/jsonx" xmlns:b="http://www.ibm.com/xmlns/prod/2009/jsonx" exclude-result-prefixes="json #default">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match="/json:object">
        <xsl:apply-templates/>
    </xsl:template>
    <xsl:template match="json:array[@name]">
        <xsl:apply-templates mode="noname">
            <xsl:with-param name="nme" select="name()"/>
        </xsl:apply-templates>
    </xsl:template>
    <xsl:template match="json:object" mode="noname">
        <xsl:param name="nme"/>
        <xsl:element name="{../@name}" namespace="{namespace-uri()}">
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="json:array">
        <xsl:element name="{../@name}">
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="json:object[@name]">
        <xsl:if test="not(*[namespace-uri()=''])">
            <xsl:element name="{@name}" namespace="{namespace-uri()}">
                <!--                <xsl:copy-of select="namespace::*[name()]"/>
                <xsl:apply-templates select="node()"/>-->
                <xsl:apply-templates/>
            </xsl:element>
        </xsl:if>
        <!--        <xsl:element name="{@name}">
            <xsl:apply-templates/>
        </xsl:element>-->
    </xsl:template>
    <xsl:template match="json:string[@name]">
        <xsl:if test="not(*[namespace-uri()=''])">
            <xsl:element name="{@name}" namespace="{namespace-uri()}">
                <def>
                    <xsl:copy-of select="namespace-uri-for-prefix(json)"/>
                </def>
                <xsl:value-of select="."/>
            </xsl:element>
        </xsl:if>
    </xsl:template>
    <xsl:template match="json:string">
        <xsl:element name="{../@name}">
            <xsl:value-of select="."/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="json:number[@name]">
        <xsl:element name="{@name}">
            <xsl:value-of select="."/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="json:null[@name]">
        <xsl:element name="{@name}">
            <xsl:value-of select="."/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="json:boolean[@name]">
        <xsl:element name="{@name}">
            <xsl:value-of select="."/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="json:boolean[@name]">
        <xsl:element name="{@name}">
            <xsl:value-of select="."/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

我需要如下输出：

```
<Login>
    <Group>
        <Group>
            <Name>john</Name>
            <Password/>
        </Group>
        <Group>
            <Name>jack</Name>
            <Password/>
        </Group>
    </Group>
</Login> 
```

我正在使用下面的 xsl

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:func="http://exslt.org/functions" xmlns:xalan="http://xml.apache.org/xslt" xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx" xmlns:regexp="http://exslt.org/regular-expressions">
    <xsl:output method="text" encoding="utf-8"/>
    <xsl:template match="/*[node()]">
        <xsl:text>{</xsl:text>
        <xsl:apply-templates select="." mode="detect"/>
        <xsl:text>}</xsl:text>
    </xsl:template>
    <xsl:template match="*" mode="detect">
        <xsl:choose>
            <xsl:when test="name(preceding-sibling::*[1]) = name(current()) and name(following-sibling::*[1]) != name(current())">
                <xsl:apply-templates select="." mode="obj-content"/>
                <xsl:text>]</xsl:text>
                <xsl:if test="count(following-sibling::*[name() != name(current())]) &gt; 0">, </xsl:if>
            </xsl:when>
            <xsl:when test="name(preceding-sibling::*[1]) = name(current())">
                <xsl:apply-templates select="." mode="obj-content"/>
                <xsl:if test="name(following-sibling::*) = name(current())">, </xsl:if>
            </xsl:when>
            <xsl:when test="following-sibling::*[1][name() = name(current())]">
                <xsl:text>"</xsl:text>
                <xsl:value-of select="name()"/>
                <xsl:text>" : [</xsl:text>
                <xsl:apply-templates select="." mode="obj-content"/>
                <xsl:text>, </xsl:text>
            </xsl:when>
            <xsl:when test="count(./child::*) > 0 or count(@*) > 0">
                <xsl:text>"</xsl:text>
                <xsl:value-of select="name()"/>" : <xsl:apply-templates select="." mode="obj-content"/>
                <xsl:if test="count(following-sibling::*) &gt; 0">, </xsl:if>
            </xsl:when>
            <xsl:when test="count(./child::*) = 0">
                <xsl:text>"</xsl:text>
                <xsl:value-of select="name()"/>" : "<xsl:apply-templates select="."/>
                <xsl:text>"</xsl:text>
                <xsl:if test="count(following-sibling::*) &gt; 0">, </xsl:if>
            </xsl:when>
        </xsl:choose>
    </xsl:template>
    <xsl:template match="*" mode="obj-content">
        <xsl:text>{</xsl:text>
        <xsl:apply-templates select="@*" mode="attr"/>
        <xsl:if test="count(@*) &gt; 0 and (count(child::*) &gt; 0 or text())">, </xsl:if>
        <xsl:apply-templates select="./*" mode="detect"/>
        <xsl:if test="count(child::*) = 0 and text() and not(@*)">
            <xsl:text>"</xsl:text>
            <xsl:value-of select="name()"/>" : "<xsl:value-of select="text()"/>
            <xsl:text>"</xsl:text>
        </xsl:if>
        <xsl:if test="count(child::*) = 0 and text() and @*">
            <xsl:text>"text" : "</xsl:text>
            <xsl:value-of select="text()"/>
            <xsl:text>"</xsl:text>
        </xsl:if>
        <xsl:text>}</xsl:text>
        <xsl:if test="position() &lt; last()">, </xsl:if>
    </xsl:template>
    <xsl:template match="@*" mode="attr">
        <xsl:text>"</xsl:text>
        <xsl:value-of select="name()"/>" : "<xsl:value-of select="."/>
        <xsl:text>"</xsl:text>
        <xsl:if test="position() &lt; last()">,</xsl:if>
    </xsl:template>
    <xsl:template match="node/@TEXT | text()" name="removeBreaks">
        <xsl:param name="pText" select="normalize-space(.)"/>
        <xsl:variable name="myVar" select="regexp:replace($pText,'\\','gi','\\')"/>
        <xsl:variable name="myVar2" select="regexp:replace($myVar,'&#x22;','gi','\&#x23;')"/>
        <xsl:variable name="myVar3" select="regexp:replace($myVar2,'&#x2F;','gi','&#x5C;&#x2F;')"/>
        <xsl:variable name="myVar4" select="regexp:replace($myVar3,'\t','gi','\t')"/>
        <xsl:variable name="myVar5" select="regexp:replace($myVar4,'\n','gi','\n')"/>
        <xsl:variable name="myVar6" select="regexp:replace($myVar5,'\r','gi','\r')"/>
        <xsl:choose>
            <xsl:when test="not(contains($myVar6, '&#xA;'))">
                <xsl:copy-of select="$myVar6"/>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="concat(substring-before($myVar6, '&#xD;&#xA;'), ' ')"/>
                <xsl:call-template name="removeBreaks">
                    <xsl:with-param name="pText" select="substring-after($myVar6, '&#xD;&#xA;')"/>
                </xsl:call-template>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

在这里，我在模板 json:object 中使用名称作为“对象”，但我需要数组名、数组名……等等。有人可以帮我得到这个输出吗？

[https://datatracker.ietf.org/doc/html/draft-rsalz-jsonx-00#page-4](https://datatracker.ietf.org/doc/html/draft-rsalz-jsonx-00#page-4) [http://controlfreak.net/xml-to-json-in-xslt-a-toolkit/](http://controlfreak.net/xml-to-json-in-xslt-a-toolkit/) [从中提取信息使用 XSLT 1.0 版的 JSON 文件](https://stackoverflow.com/questions/12188064/extracting-information-from-a-json-file-using-xslt-version-1-0) [http://badgerfish.ning.com/](http://badgerfish.ning.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:44:42.483

如果您对此感到满意：-

```
<?xml version="1.0" encoding="utf-8"?>
<Login>
    <Group>
        <Group>
            <Name>john</Name>
            <Password/>
        </Group>
        <Group>
            <Name>john</Name>
            <Password/>
        </Group>
    </Group>
</Login> 
```

然后以下工作： -

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0" xmlns:json="http://www.ibm.com/xmlns/prod/2009/jsonx" exclude-result-prefixes="json">
    <xsl:template match="/json:object">
        <xsl:apply-templates/>
    </xsl:template>
    <xsl:template match="json:array[@name]">
        <xsl:element name="{@name}">
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="json:object">
        <xsl:element name="{../@name}">
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:template>
    <xsl:template match="json:string[@name]">
        <xsl:element name="{@name}">
            <xsl:value-of select="."/>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

# jquery - 使用 pip 和 requirements.txt 安装非 Python 存储库

> ID：12891875
> 
> 赞同：0
> 
> 时间：2012-10-15T08:32:27.793
> 
> 标签：jquery, python, git, github, pip

所以我正在制作一个 Flask 应用程序，我正在使用 pip 和 requirements.txt 管理 Flask 和一些必要的插件。但是，我的应用程序也使用了来自 Github 的几个 jQuery 和 JS 项目。

以与其他 Python 包相同的方式处理它们将非常简单——在 requirements.txt 中列出它们的 git URL 并在给定标记处克隆该存储库。当然，问题是这些非 python 项目没有 setup.py 文件。

即使没有 setup.py，是否可以将 pip 配置为简单地将这些 repos 克隆到特定路径中？或者你有另一种推荐的方法来处理这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-15T08:26:31.367

在某种程度上这是可能的。对于 jQuery，这很容易，因为有人已经为它准备了包：[https](https://pypi.python.org/pypi/django-jquery) ://pypi.python.org/pypi/django-jquery 。

对于 Github 上的其他 JS 项目，您实际上必须分叉它们，并创建一个合适的 setup.py 文件，然后将它们上传到 pypi.python.org。

我没有任何这样做的经验，所以我不确定 python 社区在使用他们的打包工具打包非 python 软件时是否会有任何问题。在 django-jquery 案例中，他们添加了一些 django 胶水，使其易于在 django 项目中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-23T19:40:59.310

有一个[`fanstatic`](http://www.fanstatic.org/en/latest/)包可以做到这一点。

`fanstatic`有一个预打包的库列表[，可以在这里找到](http://www.fanstatic.org/en/latest/libraries.html#packaged-libs)。这些包基本上是一些流行的 javascript/css 库的端口，带有`setup.py`.

它确实有`jquery`和大多数有用的插件，, `knockout`, `knockback`, `underscore`, `yui`, `bootstrap`, `d3`...`backbone`

其中大部分都是`pypi`以`js.<libraryname>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T08:34:50.730

不，除了 python 发行版，你不能`pip`用来安装任何东西。

使用其他安装工具；[buildout](http://buildout.org/)可以使用名为 recipes 的 Python 扩展来管理 Python 发行版*和*其他安装任务。

或者，您可以将 jQuery 依赖项打包为 python 分发，但这样的分发将*非常*紧密地绑定到您的应用程序。Plone 社区确实这样做了，但它们包括 Plone CMS 的配置，以将库集成到他们的注册表中；例如[`plone.app.jquery`](http://pypi.python.org/pypi/plone.app.jquery)，[包的内容](https://github.com/plone/plone.app.jquery/tree/1.7/plone/app/jquery)不仅包括 jQuery。

# visual-studio-2010 - 视觉工作室资源贴栏

> ID：12891888
> 
> 赞同：5
> 
> 时间：2012-10-15T08:33:20.397
> 
> 标签：visual-studio-2010, visual-studio, copy-paste

我在 Visual Studio 中使用资源编辑器。我正在尝试从一个资源文件的值列中复制值并将它们粘贴到另一个资源文件的注释列中。

我尝试使用`SHIFT+ALT`which 正确复制列，但是粘贴无法按预期工作（而不是粘贴在评论 col. 中，生成新键）

这可能吗？如果有怎么办？

![在此处输入图像描述](../Images/c7de939f6f4a9377b605fa79d83cba25.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:42:57.610

由于粘贴在 Visual Studio 资源编辑器中不起作用，我将值列数据粘贴到谷歌文档电子表格中并且有效。

# ios - Paypal 可以在模拟器中使用，但不能在真实设备中使用？

> ID：12891891
> 
> 赞同：0
> 
> 时间：2012-10-15T08:33:38.303
> 
> 标签：ios, paypal

我在我的应用程序中实现了 Paypal 支付网关。但是，它在模拟器中运行良好，但在真实设备中运行良好。当我点击 Checkout with Paypal 按钮时，它会点击此方法

```
- (void)couldNotFetchDeviceReferenceToken 
```

并在控制台中记录此错误：

```
FILE SYSTEM CHECK FAILED
Device interrogation failed. 
```

可能是什么原因？我试图研究它，但他们说需要使用新的 Paypal API，但我认为这不是解决方案，因为它在模拟器上运行良好但在真实设备上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:57:42.710

这是我们在服务器端的错误，现在已解决。详细信息在 X.com 上进行了介绍：[https ://www.x.com/developers/paypal/forums/mobile/problems-paypal-api](https://www.x.com/developers/paypal/forums/mobile/problems-paypal-api)

# ant - 如何在 Ant 中动态包含 ant-contrib.jar

> ID：12891893
> 
> 赞同：5
> 
> 时间：2012-10-15T08:33:48.430
> 
> 标签：ant, fdt

我正在寻找一种在 Ant 文件中包含 .jar 的方法，以便我可以立即使用它并在我的目标中调用它的方法。就我而言，它是`ant-contrib-1.0b3.jar`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T19:16:29.480

最好的方法是将 Ant-Contrib jarfile 放入您的项目中。例如，假设`build.xml`位于项目的根目录中。在项目中创建一个名为的目录`ant.lib\ant-contrib`，然后将其`ant-contrib*.jar`放入此文件夹中。您可以将此方法用于您可能需要的其他可选 Ant 任务（例如，Ivy、Findbugs、Cobrrtura 等）。

然后，在您的`build.xml`文件中，您可以执行以下操作：

```
<taskdef resource="net/sf/antcontrib/antlib.xml">
     <classpath>
         <fileset dir="${basedir}/ant.lib/ant-contrib"/>
     </classpath>
</taskdef> 
```

我喜欢这样做，因为带有任务的可选 jar 包含在项目中。如果您将所有内容都签入您的版本控制系统，那么有人可以签出您的代码并进行构建，而无需下载 Ant-Contrib 并自行安装。

您可以定义一个 XML 命名空间。这为您的 Ant-Contrib 任务提供了一个前缀，以避免在您使用具有相同任务名称的其他可选 ant 任务时发生任务名称冲突。此外，它会提醒用户这不是标准的 Ant 任务。

如果使用 XML 命名空间，则需要在`<project>`标题中放置 XMLNS 声明。这将包含一个*URI*，它将您的 Ant Contrib 任务连接到您的 XML 命名空间。例如，`ac:`命名空间适用于所有 Ant Contrib 任务：

```
<project name="my.project" default="package" basedir="."
    xmlns:ac="http://ant-contrib.sourceforge.net">

 <taskdef resource="net/sf/antcontrib/antlib.xml"
      uri="http://ant-contrib.sourceforge.net">
     <classpath>
         <fileset dir="${basedir}/ant.lib/ant-contrib"/>
     </classpath>
</taskdef> 
```

这样做是将 XML 命名空间 (xmlns)`ac`与 URI匹配`http://ant-contrib.sourceforge.net`。URI 可以是任何东西。例如：

```
<project name="my.project" default="package" basedir="."
    xmlns:ac="hamburger:with-fries">

 <taskdef resource="net/sf/antcontrib/antlib.xml"
      uri="hamburger:with-fries">
     <classpath>
         <fileset dir="${basedir}/ant.lib/ant-contrib"/>
     </classpath>
</taskdef> 
```

标准是使用类似的东西`antlib:net.sf.antcontrib`：

```
<project name="my.project" default="package" basedir="."
    xmlns:ac="antlib:net.sf.antcontrib">

 <taskdef resource="net/sf/antcontrib/antlib.xml"
      uri="antlib:net.sf.antcontrib">
     <classpath>
         <fileset dir="${basedir}/ant.lib/ant-contrib"/>
     </classpath>
</taskdef> 
```

但是，我喜欢使用项目的 URL。这样，如果有人想要关于 Ant-Contrib 任务的文档，他们就知道 Ant-Contrib 项目所在的 URL。

在上述所有三种情况下，我都使用`ac`. 因此，您必须在所有 Ant-Contrib 任务名称前加上`ac:`. 你可以使用`antcontrib`或任何你喜欢的。使用`ac:`命名空间，您的 Ant-contrib 任务将如下所示：

```
<ac:if>
   <istrue value="${include.debug.code}"/>
   <ac:then>
        [...]
   </ac:then>
   <ac:else>
        [...]
   </ac:else>
<ac:if> 
```

如果您跳过整个命名空间的事情，您可以简单地使用 Ant-Contrib 任务，如文档所述：

```
<if>
   <istrue value="${include.debug.code}"/>
   <then>
        [...]
   </then>
   <else>
        [...]
   </else> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T17:20:42.993

最好的解决方案是集成 apache ivy 依赖管理器。Ivy 可用于管理所有构建类路径的 Maven 风格！

# 例子

## 常春藤.xml

该文件描述了您的项目的第 3 方依赖项。Ivy 使用配置在逻辑上将文件分组在一起。在您的情况下，请注意特殊的“构建”配置用于配置构建所需的 ANT 任务：

```
<ivy-module version="2.0">
    <info organisation="com.myspotontheweb" module="demo"/>

    <configurations>
        <conf name="compile" description="Required to compile application"/>
        <conf name="runtime" description="Additional run-time dependencies" extends="compile"/>
        <conf name="test"    description="Required for test only" extends="runtime"/>
        <conf name="build"   description="3rd party ANT tasks"/>
    </configurations>

    <dependencies>
        <!-- compile dependencies -->
        <dependency org="org.slf4j" name="slf4j-api" rev="1.6.4" conf="compile->default"/>

        <!-- runtime dependencies -->
        <dependency org="org.slf4j" name="slf4j-simple" rev="1.6.4" conf="runtime->default"/>

        <!-- test dependencies -->
        <dependency org="junit" name="junit" rev="4.10" conf="test->default"/>

        <!-- Build dependencies -->
        <dependency org="ant-contrib" name="ant-contrib" rev="1.0b3" conf="build->default"/>
    </dependencies>

</ivy-module> 
```

笔记：

*   默认情况下，从托管大约 90% 的开源 jar 的[Maven 中心](http://search.maven.org/)检索依赖项

## 构建.xml

```
<project name="demo" default="build" xmlns:ivy="antlib:org.apache.ivy.ant" xmlns:antcontrib="antlib:net.sf.antcontrib">

    <target name="bootstrap" description="Install ivy">
        <mkdir dir="${user.home}/.ant/lib"/>
        <get src="https://repository.sonatype.org/service/local/artifact/maven/redirect?r=central-proxy&amp;g=org.apache.ivy&amp;a=ivy&amp;v=LATEST&amp;e=jar"
             dest="${user.home}/.ant/lib/ivy.jar"/>
    </target>

    <target name="init" description="Use ivy to resolve classpaths">
        <ivy:resolve/>

        <ivy:report todir='build/ivy-reports' graph='false' xml='false'/>

        <ivy:cachepath pathid="compile.path" conf="compile"/>
        <ivy:cachepath pathid="runtime.path" conf="runtime"/>
        <ivy:cachepath pathid="test.path"    conf="test"/>
        <ivy:cachepath pathid="build.path"   conf="build"/>
    </target>

    <target name="taskdefs" depends="init" description="Declare 3rd party ANT tasks">
        <taskdef uri="antlib:net.sf.antcontrib" classpathref="build.path"/>
    </target>

    <target name="build" depends="taskdefs" description="Build logic using ant-contrib tasks">
        <echo message="The first five letters of the alphabet are:"/>

        <antcontrib:for list="a,b,c,d,e" param="letter">
            <sequential>
                <echo>Letter @{letter}</echo>
            </sequential>
        </antcontrib:for>
    </target>

    <target name="clean" description="Cleanup build files">
        <delete dir="build"/>
    </target>

    <target name="clean-all" depends="clean" description="Additionally purge ivy cache">
        <ivy:cleancache/>
    </target>

</project> 
```

笔记：

*   有一个特殊的“引导”目标用于启动新安装。不幸的是，ivy 没有与核心 ANT 一起分发
*   cachepath ivy 任务用于创建包含由 ivy 下载和缓存的 jar 的 ANT 路径[。](http://ant.apache.org/ivy/history/latest-milestone/use/cachepath.html)
*   ivy 报告任务对于理解 3rd 方库的传递依赖关系非常有用。
*   antcontrib 现在作为一个[ANT 库](http://ant.apache.org/manual/Types/antlib.html)分发，解释了奇怪的命名空间的东西。

# javascript - 在脚本源 Google Map API 中添加变量

> ID：12891895
> 
> 赞同：0
> 
> 时间：2012-10-15T08:34:03.047
> 
> 标签：javascript, google-maps-api-3

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=.......&sensor=false&libraries=places"></script> 
```

我想添加`&libraries=geometry`到上面的脚本中，如何描述呢？

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=.......&sensor=false&libraries=places&libraries=geometry"></script> 
```

或者

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=.......&sensor=false&libraries[]=places&libraries[]=geometry"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:41:55.613

根据[文档](https://developers.google.com/maps/documentation/javascript/libraries)，您应该给多个库以逗号分隔：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=.......&sensor=false&libraries=places,geometry"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:44:08.483

您不能指定具有相同名称的变量，post/get 脚本只会处理我建议您将 'libraries=places&libraries=geometry' 替换为 'libraries=places,geometry' 并查看它如何为您工作的变量之一。

# android - Android：检查我的服务是否在后台运行

> ID：12891903
> 
> 赞同：5
> 
> 时间：2012-10-15T08:34:39.900
> 
> 标签：android, service

我正在运行一项**服务**以在我的应用程序中每 1 小时获取一次**通知。**

该服务绝对每 1 小时运行一次；我使用 Logcat 检查了它。

但是由于我是在`onResume()`MainActivity 中启动这个服务，所以我想检查这个服务是否已经在运行，并且只有在它没有运行时才启动它。

我使用了这段代码：

```
private boolean isMyServiceRunning() {
    ActivityManager manager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if ("com.android.MyApp.MyServices.NotificationsService".equals(service.service.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

但我总是**假**的。

所以我检查了输出`service.service.getClassName()`给出的内容。我的服务不在列表中。

是因为我的应用程序未知吗？或者是其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T05:11:59.573

```
private boolean isMyServiceRunning(Context mContext) {
    ActivityManager manager = (ActivityManager) mContext
            .getSystemService(Context.ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager
            .getRunningServices(Integer.MAX_VALUE)) {
        if (**HERE_YOUR_SERVICE'S_CLASS_NAME**.class.getName().equals(
                service.service.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

// i have background GPS service and i have successfully checked that my GPS service is either running or not.

// Happy coding...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T14:17:35.107

我知道它有点晚了，但这个答案可能会帮助其他正在寻找相同的人。

您是否使用 开始了您的服务`context.startService()`？
确保清单文件包含以下内容：

```
<service android:name="com.android.MyApp.MyServices.NotificationsService" /> 
```

# iphone - 我在我的程序中使用了键盘它不起作用

> ID：12891909
> 
> 赞同：0
> 
> 时间：2012-10-15T08:35:03.310
> 
> 标签：iphone, ios, xcode

我有两个类型的文本字段`UITextField`。我有两个按钮*click*和*cancel*。

这个想法是输入两个数字，它将导航到下一个视图。此视图应显示这两个数字。

问题是如果我单击文本字段之一，那么键盘就会响应；当我单击返回时，它不会跳转到下一个字段。

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField{[textField resignFirstResponder];return YES;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:43:40.533

您需要从或程序连接`UITextFiled` **代表**`nib`，如下图所示：

![在此处输入图像描述](../Images/6cc6624f46f0097e89197ed2041b200d.png)

或者

其他方式是程序化的，例如您的`viewDidLoad`方法或`viewWillAppear`方法：

```
Yourtxtfild.delegate = self; 
```

**编辑** 跳转另一个视图使用这个文本文件的委托方法： -

```
 - (void)textFieldDidEndEditing:(UITextField *)textField
 {

  [textField resignFirstResponder];
  //you can set your textfiled string in to globle Variable and use it in another viewController
  YourViewCntroller *objViewController = [[YourViewCntroller alloc] initWithNibName:@"YourViewCntrollernib" bundle:nil];
            [self.navigationController pushViewController:objViewController animated:YES];

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:43:29.363

您必须将文本字段的委托设置为您编写`textFieldShouldReturn:`方法的类的对象。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T08:53:01.907

@Ragavan：您只是辞职第一个文本字段，但您没有让另一个文本字段做出响应。因此，请使用下面的代码作为参考以使其工作。

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField1 resignFirstResponder];
    [textField2 becomeFirstResponder];
    return YES;
} 
```

# silverlight - RIA 服务 SP2 问题

> ID：12891910
> 
> 赞同：1
> 
> 时间：2012-10-15T08:35:10.847
> 
> 标签：silverlight, wcf-ria-services

我有一个使用 RIA 服务的 Silverlight 4 应用程序。我将 Ria 服务 SP1 更新为 SP2。在我的本地 pc 中，我的应用程序可以正常工作，但是当我将它部署到服务器并尝试使用它时，我收到一条非常烦人的消息：“HTTP 404。您正在寻找的资源（或其依赖项之一）可能有已删除、更改名称或暂时不可用。请检查以下 URL 并确保拼写正确“

在我的应用程序完美运行之前，我只是应用了 ria services sp2 升级。

Ria Servcies 未安装在服务器上，但必要的 dll 位于 bin 文件夹中。

任何人都可以帮助我吗？

l.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T13:05:33.490

在服务器上安装 RIA... 这样您就可以确保在机器上的正确位置安装和注册了所有正确的 DLL。

您需要使用 SERVER=TRUE [http://msdn.microsoft.com/en-us/library/ff426912(v=vs.91).aspx运行 msiexec](http://msdn.microsoft.com/en-us/library/ff426912(v=vs.91).aspx)

# javascript - 在下拉框中删除选项

> ID：12891913
> 
> 赞同：0
> 
> 时间：2012-10-15T08:35:18.553
> 
> 标签：javascript, jquery, drop-down-menu

我正在使用 24 个下拉菜单。我想为某个职位选择一名司机。但是，当我为第一个位置选择驱动程序时，它应该从其他下拉列表中删除，因此我不能两次使用驱动程序。下拉菜单是：

```
<select name="rijderQual1">
<option value="1">S. Vettel</option>
<option value="2">M. Webber</option>
<option value="3">J. Button</option>
<option value="4">L. Hamilton</option>
<option value="5">F. Alonso</option>
<option value="6">F. Massa</option>
<option value="7">M. Schumacher</option>
<option value="8">N. Rosberg</option>
<option value="9">K. Raikkonen</option>
<option value="10">R. Grosjean</option>
<option value="11">R. 11</option>
<option value="12">R. 12</option>
<option value="14">K. Kobayashi</option>
<option value="15">S. Perez</option>
<option value="16">R. 16</option>
<option value="17">R. 17</option>
<option value="18">P. Maldonado</option>
<option value="19">R. 19</option>
<option value="20">H. Kovalainen</option>
<option value="21">J. Trulli</option>
<option value="22">P. de</option>
<option value="23">R. 23</option>
<option value="24">T. Glock</option>
<option value="25">C. Pic</option>
</select> 
```

名称是`rijderQual1`rijderQual24。因此，当我选择`S Vettel`例如它时，`rijderQual1`它应该从其他 23 个下拉列表中删除。

有没有办法做到这一点？我认为应该用 JS 或 jQuery 来完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:42:18.083

每次更改某些选定值时，您都可以遍历所有选项并隐藏在其他地方选择的选项：

```
$('select').change(function() {

    var selectedValues = $('select').map(function() { return this.value; }).get();

    $('option').show();

    $.each($('option'), function(i, item) {

        if($(this).val() != 0 && $.inArray($(this).val(), selectedValues) > -1 )
        {
            $(this).hide();
        }
    });

});​ 
```

[演示](http://jsfiddle.net/Xff7K/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T08:38:25.587

尝试通过数组填充下拉框，并在每个选定的项目上从该数组中删除该项目。JS 和 JQuery 都可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T09:08:58.043

我仍然相信另一种方法会更明智，例如对所有选择了相同值的下拉菜单进行颜色编码。或者，如果您在另一个下拉列表中选择它，请从第一个下拉列表中取消选择该选项。这样你就不会剥夺用户做他们想做的事，但如果他们试图做一些不允许的事情，就会警告他们。更适合用户体验。有点像这样的东西。

```
// Store text labels for options
$("option")
    .each(function() {
        $(this).data("label", $(this).text());
    });

$('select').change(function() {
    // Get selected values
    var  selectedValues = $('select').map(function() { return this.value; }).get();
    // Reset conflicting dropdowns
    currentVal = $(this).val();
    $(this).siblings("select")
        .each(function() { 
            if ($(this).val() == currentVal) $(this).val(0);
        });
    // Mark selected options as unavailable
    $("option")
        .each(function() {
            if( $(this).val() != 0 && $.inArray($(this).val(), selectedValues) > -1 && !$(this).is(":selected"))
                $(this).text("(" + $(this).data("label") + ")");
            else
                $(this).text($(this).data("label"));
        });

});​ 
```

演示：http: [//jsfiddle.net/NAWNP/](http://jsfiddle.net/NAWNP/)

尽管如此，根据您的要求，这将遍历选项，禁用其他下拉菜单正在使用的选项。这样，您仍然可以看到您的选择，即使您无法做出选择。

```
$('select').change(function() {

    var selectedValues = []
    $("option:selected").each(function() { selectedValues.push($(this).val()) });
    $("option")
        .removeAttr("disabled")
        .each(function() {
            if( $(this).val() != 0 && $.inArray($(this).val(), selectedValues) > -1 && !$(this).is(":selected"))
            {
                $(this).attr("disabled", "true");
            }
        });

});​ 
```

演示：http: [//jsfiddle.net/ntxmh/2/](http://jsfiddle.net/ntxmh/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T08:52:58.800

**工作演示** [http://jsfiddle.net/zyGH7/](http://jsfiddle.net/zyGH7/)

**另一个** [http://jsfiddle.net/fLTxj/](http://jsfiddle.net/fLTxj/)

*非常简洁的版本。*这是来源：[jQuery删除选项除了当前](https://stackoverflow.com/questions/9112112/jquery-remove-options-except-current)（写得很好）

希望它符合原因！`B-)`

**代码**

```
$('document').ready(function() {
    $(".hulk").change(function() {
        var val = this.options[this.selectedIndex].value;
        $('select').not(this).children('option').filter(function() {
            return this.value === val;
        }).remove();

    });
});​ 
```

# javascript - 如何将 tabGroup 放入窗口或查看 Titanium Mobile

> ID：12891918
> 
> 赞同：1
> 
> 时间：2012-10-15T08:35:38.960
> 
> 标签：javascript, titanium, appcelerator, titanium-mobile, appcelerator-mobile

我在 Titan Mobile 中进行了简单的登录和菜单显示。这是我的登录代码：

登录.js

```
function Login() {
    var loginView = Titanium.UI.createView({
        backgroundColor:'#C4FBFF',
        layout:'vertical'
    });

    var txtUsername = Titanium.UI.createTextField({
        width:'75%',
        hintText:'Username',
        borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED
    });

    var txtPassword = Titanium.UI.createTextField({
        width:'75%',
        hintText:'Password',
        borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
        passwordMask:true
    });

    var btnLogin = Titanium.UI.createButton({
        title:'Login',
        width:'75%'
    });

    loginView.add(txtUsername);
    loginView.add(txtPassword);
    loginView.add(btnLogin);

    btnLogin.addEventListener('click',function(e){
        var alertDialog = Titanium.UI.createAlertDialog({ 
            title: 'Confirmation', 
            message: 'You will be logged in as ' + txtUsername.value + ', continue?',
            buttonNames: ['Yes','No'] 
        });

        alertDialog.addEventListener('click',function(e){
            if (e.index === 0){ //Yes Pressed
                var isAndroid = Ti.Platform.osname === 'android' ? true : false;
                var MainMenu = isAndroid === true ? require('ui/handheld/android/MainMenu') : require('ui/handheld/MainMenu');

                var mainMenuWindow = Titanium.UI.createWindow({
                    backgroundColor:'#336699',
                    title:'Main Menu',
                    modal:true,
                    navBarHidden: isAndroid === true ? true : false
                });

                var mainMenu = new MainMenu(mainMenuWindow);
                mainMenuWindow.add(mainMenu);

                mainMenuWindow.open();

            }
            else{ // No Pressed
                makeAlert('Login','Please contact your system administrator');
            }
        });

        alertDialog.show();
    });

    function makeAlert(title, message) {
        var customAlertDialog = Titanium.UI.createAlertDialog({ 
            title: title, 
            message: message,
            buttonNames: ['Ok']
        });
        return customAlertDialog.show();
    }

    return loginView;
}

module.exports = Login; 
```

这是 MainMenu.js

```
function MainMenu(_parent){
    var mainMenuView = Titanium.UI.createView({
        backgroundColor:'#C4FBFF',
        layout:'vertical'
    });

    var btnLeftNavBar = Titanium.UI.createButton({
        title:'Logout'
    });

    var txtTest = Titanium.UI.createTextField({
        hintText:'iPhone',
        width:'75%',
        borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED
    });

    _parent.setLeftNavButton(btnLeftNavBar);
    mainMenuView.add(txtTest);  

    btnLeftNavBar.addEventListener('click',function(e){
        _parent.close();
    });

    return mainMenuView;
}

module.exports = MainMenu; 
```

MainMenu.js 仅在 navBar 上显示一个按钮用于关闭窗口..

主要问题是我想将 tabGroup 放在 MainMenu.js 上，这样我就可以从中选择一些菜单。

是否可以将 tabGroup 放在窗口内？有什么建议，所以我可以在不更改主应用程序结构的情况下将 tabGroup 放在 MainMenu.js 中？

非常感谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T13:35:25.450

不能将选项卡组添加为任何其他元素的子元素。参考：[Top Level Containers@tabgroup的add方法](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.View-method-add)

文本：

> 顶级容器
> 
> 某些顶级容器不打算作为其他视图的子级添加。这些顶级容器包括 Window、SplitWindow 和 TabGroup。其他类型的视图必须添加到顶级容器才能显示在屏幕上。

# mysql - 无法安装 mysql-connector-java，没有可用的软件包

> ID：12891920
> 
> 赞同：3
> 
> 时间：2012-10-15T08:35:47.600
> 
> 标签：mysql, jdbc, centos

我需要为在 CentOS 中运行的 MySQL 安装 JDBC。

我尝试使用此命令

> 百胜安装 mysql-connector-java

但它说

> 没有可用的包 mysql-connector-java
> 
> 没事做

您知道任何其他旨在安装 JDBC 的命令吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:24:43.997

这是我为解决问题所做的工作：

1.  [在此处](http://dev.mysql.com/downloads/connector/j/)下载 JDBC

2.  将文件提取到您想要的任何位置。要提取，请按照以下命令

> tar -zxvf [TAR 文件名]

*   您将在该文件夹中找到 mysql-connector-java-5.1.22-bin.jar。复制并粘贴到（在我的情况下）/%android-sdk%/tools/lib

*   将 mysql-connector-java-5.1.22-bin.jar 的新位置添加到类路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T08:38:48.053

mysql java连接器是平台无关的。您可以从以下链接下载它 [http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)

您可以将 jar 文件放在 /lib/ 或 /webapps//web-inf/libs

我假设您使用的是tomcat。

谢谢

# php - PEAR HTML_QuickForm2：如何将保存的会话容器恢复为表单

> ID：12891927
> 
> 赞同：4
> 
> 时间：2012-10-15T08:36:13.457
> 
> 标签：php, pear, quickform

我正在使用控制器制作多页表单。我正在将已提交和未提交的应用程序数据保存到数据库字段：

```
$serialized_data = $oCon->dbConn->real_escape_string(
    serialize($ctrl->getSessionContainer())
);
$oCon->dbConn->query(
    "INSERT INTO form_data SET (data) VALUES ('" . $serialized_data . "')"
); 
```

这很好用，但我如何将保存的对象返回到会话中以获取未完成的条目？使用 和 将它们保存到数据库字段时，
只取回值有效`getValue()`

```
$ctrl->addDataSource(new HTML_QuickForm2_DataSource_Array($unserialized_data)); 
```

但我也需要具有有效页面数组的整个对象。

我想答案隐藏在[此页面](http://pear.php.net/manual/en/package.html.html-quickform2.controller-migration.php)中，但我无法使其与`storeDataSources()`,`addDataSource()`和的任何组合一起使用`setDataSources()`。似乎缺少一种`setSessionContainer()`方法。

这是我在这个论坛上的第一个问题，我试图遵守所有规则，如果我犯了愚蠢的错误或者这是一个愚蠢的问题，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T14:10:05.603

我认为您误解了如何使用 Quickform2。如果您需要使用多页表单，那么您需要使用 QuickformController：[http ://pear.php.net/manual/en/package.html.html-quickform2.controller-overview.php](http://pear.php.net/manual/en/package.html.html-quickform2.controller-overview.php)

# android - 生成 Ant 构建文件错误

> ID：12891928
> 
> 赞同：4
> 
> 时间：2012-10-15T08:36:24.793
> 
> 标签：android, eclipse, ant

我正在尝试生成 ant 构建文件。但我收到一个错误

```
"The build class path order of the source directories of project library is not correct. Exported Ant buildfile will not compile your sources correctly until you swap the order of these directories:
gen<->src" 
```

我使用 file->export->Ant-buildfile 从 eclipse 构建

当我尝试从命令行构建时，我收到：

```
$ ant debug
Buildfile: /build.xml

BUILD FAILED
Target "debug" does not exist in the project "com.Grupp01.gymapp.MainActivity". 
```

错误和日食的屏幕截图： ![在此处输入图像描述](../Images/7cea2d4b6b14f87f505e5df4791c031a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-02T13:05:13.773

我有同样的问题。解决方法是：右键单击库 -> 属性 -> Java 构建路径 -> 排序和导出。条目“gen”必须在“src”之后（使用向上、向下按钮）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T08:30:45.873

我已经使用这个步骤解决了这个问题。

右键单击您的项目-> 属性-> Java 构建路径-> “gen”应该高于“src”。所以，重新排列文件夹。它对我有用。

# jsf - 级联 p:selectOneMenu 失败并出现验证错误：值无效

> ID：12891933
> 
> 赞同：1
> 
> 时间：2012-10-15T08:36:40.897
> 
> 标签：jsf, primefaces, hashmap, selectonemenu

我有两个级联`p:selectOneMenu`组件。第一个显示来自 hashmap 的区域，第二个显示通过 ajax 选择区域的城市。但是当提交选择城市的表格时，我得到

> 验证错误：值无效

这是视图

```
<p:selectOneMenu id="area" value="#{bean.area}">
    <f:selectItem itemLabel="Select Area" itemValue="" />
    <f:selectItems value="#{bean.areas}" />
    <p:ajax update="city" listener="#{bean.handleAreaChange()}" />
</p:selectOneMenu>
<p:selectOneMenu id="city" value="#{bean.city}">
    <f:selectItem itemLabel="Select City" itemValue="" />
    <f:selectItems value="#{bean.cities}" />
</p:selectOneMenu> 
```

这是豆子：

```
private String area;
private String city;
private Map<String, String> areas = new HashMap<String, String>();
private Map<String, String> cities = new HashMap<String, String>();
private Map<String, Map<String, String>> allCities = new HashMap<String, Map<String,String>>();

public void handleAreaChange() {
    if (area != null && !area.isEmpty()) {
        cities = allCities.get(area);
    } else {
        cities = new HashMap<String, String>();
    }
} 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:44:50.120

当下拉列表的提交值未包含在可用值列表中时，您将收到此错误。所以这意味着与显示表单的 HTTP 请求相比，在表单提交的 HTTP 请求期间可用值列表发生了不兼容的变化。这反过来通常意味着支持 bean 是请求范围的，并且可用值列表未在其（后）构造函数中预初始化。

*将 bean 放在视图范围内，*或者**添加*根据请求参数正确预初始化可用值列表的代码，应该可以解决您的问题。*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T14:25:17.577

As BalusC said the value (identifier) of the `selectItem` has changed. This can happen if your bean is request scoped or if the objects have changed server side.

A common solution I use is to set the value of the `selectItem` to an id of the object it represents.

Lets assume `City` and `Area` have unique identifiers (id) and looks like this:

```
public class City //or Area
{
    private Long id;
    private String name;

    //Rest of class
} 
```

You can then introduce a converter for `City` and `Area`:

```
@FacesConverter("cityConverter")
public class CityConverter implements javax.faces.convert.Converter
{
    @Override
    public Object getAsObject(FacesContext ctx, UIComponent cmp, String str)
    {
        //Convert id to Object (City) and return it
    }

    @Override String getAsString(FacesContext ctx, UIComponent, Object obj)
    {
        //Return the id that represents the Object (City) here
        return ((City)obj).getId().toString();
    }
} 
```

In your JSF page make use of the converter:

```
<p:selectOneMenu id="area" value="#{bean.area}" converter="areaConverter">
    <f:selectItem itemLabel="Select Area" itemValue="" />
    <f:selectItems value="#{bean.areas}" />
    <p:ajax update="city" listener="#{bean.handleAreaChange()}" />
</p:selectOneMenu>
<p:selectOneMenu id="city" value="#{bean.city}" converter="cityConverter">
    <f:selectItem itemLabel="Select City" itemValue="" />
    <f:selectItems value="#{bean.cities}" />
</p:selectOneMenu> 
```

[More about how to implement a FacesConverter on this site](http://www.mkyong.com/jsf2/custom-converter-in-jsf-2-0/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T14:57:36.007

您需要做的第一件事是告诉将 ajax 链接到一个事件。所以你可能希望它发生在 valueChange 事件上，所以你的 ajax 应该是：

```
<p:ajax update="tmil2" event="valueChange" listener="#{BeanAreaAndCity.handleCityChange()}"></p:ajax> 
```*

# c# - 使用 c# 读取 PuTTY 输出

> ID：12891935
> 
> 赞同：15
> 
> 时间：2012-10-15T08:36:48.163
> 
> 标签：c#, windows, io, putty

**我想要什么：**我想用 C# 读取 PuttY 窗口的输出

**我所拥有的：**我们公司有数百台服务器，至少有 2-3 名技术用户（正在运行应用程序）。我们得到了一个包含所有用户和密码的数据库。所以它基本上是搜索，复制和粘贴登录。

**我想要做什么：**编写一个自动执行此操作的软件。

**我有多远：**编写了一个工具，它读取单个 PuTTY 实例的日志文件并查找密码提示。确定目标用户和服务器（基于当前服务器和 su - [用户名]）。检索密码并通过 PostMessage 将其发送到选定的 PuTTY。

**问题或我想改变的：**

我希望能够直接从 PuTTY 窗口读取 PuTTY 输出，因为日志文件有点不可靠（TAB、ESCAPE 等会扰乱输出）。我已经使用 UISpy 和其他工具来获得控件，但没有运气。

我不想使用键盘记录机制或类似的东西。

也许是一个钩子或其他东西，但以前从未这样做过。

**附加信息：**

*   通过 JumpServer 建立连接，只允许从那里到目标服务器的 ssh 连接。
*   使用技术直接登录。用户被禁用。
*   PuTTY 窗口已打开并用于在服务器上工作。
*   编写一个全新的连接管理器是没有选择的。同事们都熟悉 PuTTY，这个解决方案应该是某种独立的后台工作者。

**附加信息 2：** 目标是编写严格的第 3 方软件。不要使用其他 SSH 库，修改 PuTTY 源或其他方法。问题是：如何从日志文件旁边的 PuTTY 窗口中读取文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T00:50:08.183

我不知道为什么还没有建议这样做，但是 plink（它是 PuTTY 套件的一部分）是 PuTTY 的命令行版本，您只需要重定向 stdin 和 stdout 以获得相对强大的（与功能一样，您仍然需要自己解释 telnet 内容）SSH 客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T16:34:19.500

您是否考虑过使用 OCR？

解决方案的草图将是：

1 - 代理运行等待通知 Putty 窗口（向操作系统注册新进程的回调或定期检查正在运行的进程列表）

2 - 当注意到一个腻子时，代理会截取屏幕截图并提取被腻子占用的屏幕部分。您需要提取窗口位置，但可以通过操作系统调用来完成，假设您有步骤 1 中的句柄

3 - 将此图像数据泵入[tesseract](http://code.google.com/p/tesseract-ocr/)或其他东西，并获取文本输出。检查是否有密码提示

4 - 如果有提示，听起来您在此之后完成了其余的工作（通过 PostMessage 发送所需的信息）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:14:28.903

如果您可以使用修改版的 putty，您应该修改 putty 源并包括一些与您的 c# 应用程序通信的管道（或套接字）。像这样，您的同事保留相同的软件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T08:53:09.813

你应该看看[这个链接（Putty StdIn / StdOut](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/c14d5871-28c9-4bfc-a56d-d3d3a50395f4)。展示了如何从 ac# 应用程序打开 putty 以及如何处理标准输入、输出和错误输出以与你的 putty 实例通信。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T09:01:45.970

如果您使用 putty 作为 SSH 工具，请使用[http://www.routrek.co.jp/en/product/varaterm/granados.html](http://www.routrek.co.jp/en/product/varaterm/granados.html) C# SSH 库

如果您使用 putty 作为串行工具，请使用内置的 IO 类

Telnet 也有 C# 库，没有一个我可以提供任何知识输入到什么是好的。

# iphone - 以 PC 浏览器为中心呈现，但在 iphone 浏览器中不对齐

> ID：12891942
> 
> 赞同：0
> 
> 时间：2012-10-15T08:37:38.413
> 
> 标签：iphone, html, css

好吧，我有一个居中的 div 用作页脚，只需：`<div id="bottom-footer">Powered by Coolname</div>`和样式：

```
#bottom-footer {
width: 100%;
height: 20px;
position: absolute;
bottom: 1px;
text-align: center;
} 
```

这在 PC 浏览器中可以正常显示： ![在此处输入图像描述](../Images/57a64007596e92f737a7632c32f07190.png)

但是当你在 iPhone 上试用时，它看起来像这样：

![在此处输入图像描述](../Images/d45283daccdc2e99c0295a65c54231f3.png)

显然没有居中，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T08:54:31.657

看起来包含`body`元素或 div 本身有边距或填充。将此添加到您的样式表以重置浏览器的自然行为：

```
html {
margin:0px;
padding:0px;
}

body {
margin:0px;
padding:0px;
}

#bottom-footer {
width: 100%;
height: 20px;
position: absolute;
bottom: 1px;
text-align: center;
margin:0px;
padding:0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T09:10:11.817

消除`width:100%`

```
#bottom-footer {
height: 20px;
position: absolute;
bottom: 1px;
text-align: center;
} 
```

# java - Jdom 解析器无法识别特殊字符属性

> ID：12891946
> 
> 赞同：-1
> 
> 时间：2012-10-15T08:37:51.357
> 
> 标签：java, jdom

使用jdom解析特殊字符属性的问题

前任

```
< tag xml:lang="123" > 
```

这个案例`getAttributes()`方法返回`null`

有什么解决方案可以解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:57:40.127

对我来说没有问题：

```
public class TestJdom
{
  public static void main(String[] args) throws JDOMException, IOException {
    String xmlString = "<test><tag xml:lang=\"123\"></tag></test>";
    SAXBuilder builder = new SAXBuilder();

    StringReader stringReader = new StringReader(new String(xmlString
        .getBytes()));

    Document doc = builder.build(stringReader);
    List<?> attrs = doc.getRootElement().getChild("tag").getAttributes();
    System.out.println(attrs);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:58:58.030

您可能需要设置命名空间，检查[http://cs.au.dk/~amoeller/XML/programming/jdomexample.html](http://cs.au.dk/~amoeller/XML/programming/jdomexample.html)

# asp.net - MVC 日期时间选择器验证

> ID：12891947
> 
> 赞同：1
> 
> 时间：2012-10-15T08:37:51.533
> 
> 标签：asp.net, asp.net-mvc

我有一个 MVC 应用程序。我的页面包含两个日期时间选择器。开始日期和结束日期。我的要求是，当任何人选择开始日期时，结束日期应计算为开始日期 +10 天。

还有一个条件，结束日期不应早于开始日期。我怎么可能？

$(文档).ready(函数 () {

```
 $("#txtstartdate").datepicker
        ({
            dateFormat: 'mm/dd/yy',
            showAnim: "slideDown",
            showOptions: {
                origin: ["top", "left"]
            }
        });

    $("#txtEnddate").datepicker
        ({
            dateFormat: 'mm/dd/yy',
            showAnim: "slideDown",
            showOptions: {
                origin: ["top", "left"]
            }
        });

}); 
```

我正在使用 jquery 日期时间选择器。

我只是使用了 javascript 代码，但是当我选择日期时间选择器时，它总是显示 prevoius 选择的日期。如何在选择日期时间选择器时获得选定的日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:41:14.283

尝试这个：

```
$(function () 
{
    $('#txtStartDate, #txtEndDate').datepicker(
    {
        showOn: "both",
        beforeShow: customRange,
        dateFormat: 'mm/dd/yy',
        showAnim: "slideDown",
        showOptions: {
            origin: ["top", "left"]
        },
        firstDay: 1, 
        changeFirstDay: false
    });

});

function customRange(input) 
{ 
    var min = new Date(2008, 11 - 1, 1); //the absolute minimum date
        var dateMin = min;
        var dateMax = null;
        var dayRange = 10;  //range of days

        if (input.id == "txtStartDate") 
        {
            if ($("#txtEndDate").datepicker("getDate") != null)
            {
                dateMax = $("#txtEndDate").datepicker("getDate");
                dateMin = $("#txtEndDate").datepicker("getDate");
                dateMin.setDate(dateMin.getDate() - dayRange);
                if (dateMin < min)
                {
                        dateMin = min;
                }
             }
             else
             {
                dateMax = new Date(); //the absolute maximum date
             }                      
        }
        else if (input.id == "txtEndDate")
        {
                dateMax = new Date(); //the absolute maximum date
                if ($("#txtStartDate").datepicker("getDate") != null) 
                {
                        dateMin = $("#txtStartDate").datepicker("getDate");
                        var rangeMax = new Date(dateMin.getFullYear(), dateMin.getMonth(), dateMin.getDate() + dayRange);

                        if(rangeMax < dateMax)
                        {
                            dateMax = rangeMax; 
                        }
                }
        }
    return {
                minDate: dateMin, 
                maxDate: dateMax,
            }; 

}​ 
```

**演示**：http: [//jsfiddle.net/XdFpg/](http://jsfiddle.net/XdFpg/)

# iphone - Objective-C 从 Web 服务显示 HTML 文件

> ID：12891950
> 
> 赞同：1
> 
> 时间：2012-10-15T08:38:07.730
> 
> 标签：iphone, html, objective-c, ios, web-services

哪些方法能够将字节数据保存在 Java 中是 byte[] 的位置，然后将字节数组转换为字符串？

我正在从 Web 服务中检索 HTML 文件，其中 HTML 文件以字节为单位。将字节转换为字符串后，它显示在`UIWebView.`我尝试使用`NSData`和初始化`initWithContentsOfFile`但它不起作用。代码如下：

```
NSData *htmlContent=[[NSData alloc] initWithContentsOfFile:[[[[[[[theDict   objectForKey:@"S:Envelope"] objectForKey:@"S:Body"] objectForKey:@"ns2:ReportResponse "] objectForKey:@"return"] objectForKey:@"Report"] objectForKey:@"report"] objectForKey:@ "text"]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:03:09.643

如果您的路径正确，将创建 NSData 对象。只要确保您提供的文件的路径是正确的。记录正在使用的路径。

我对您从 Web 服务获得的内容有点困惑。它是html文件内容吗？还是您将其保存到某个文件中？无论如何使用 NSURLConnection 你会得到一个最终的 NSData 对象，我猜。

**编辑：** 使用 NSString 方法将 NSData 转换为 NSString：

```
NSString *htmlString = [[NSString alloc] initWithData:<NSData object> encoding:NSUTF8Encoding]; 
```

然后也许您可以使用 UIWebView 的以下方法进行显示：

`loadHTMLString:baseURL:`

# grails - Grails Eager 获取空关联返回 null

> ID：12891951
> 
> 赞同：0
> 
> 时间：2012-10-15T08:38:16.030
> 
> 标签：grails, one-to-many, eager, empty-list

我的域类如下

```
Class Author{
String name 

List books = LazyList.decorate(new ArrayList(), FactoryUtils.instantiateFactory(Book.class)

static hasMany = [books:Book]

}

Class Book {
String title
static belongsTo = [author:Author]

} 
```

现在我正在尝试获取作者

```
Author authorInstance = Author.find("from Author a inner join fetch a.books where a.id =:authorid",[authorid:Long.parseLong(params.id)] 
```

现在，当该作者没有任何书籍时，即书籍关联为空 authorInstance 返回为 null

我不确定，但我认为这是因为lazyList（我使用lazyList 的原因是为了更容易的数据绑定）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T10:07:45.683

发现问题在于内连接，当关联为空时内连接显然不会返回任何内容，所以我将其更改为左外连接，它开始工作

# java - JAX-B - 如何将模式元素映射到现有 Java 类

> ID：12891958
> 
> 赞同：5
> 
> 时间：2012-10-15T08:38:51.097
> 
> 标签：java, jaxb

> **可能重复：**
> [jaxb xjc 映射到现有域对象](https://stackoverflow.com/questions/10420137/jaxb-xjc-mapping-to-existing-domain-objects)

我正在使用 JAX-B 从 XML 模式生成 Java 类。

我的模式中有一个元素我想绑定到我的项目中存在的 Java 类。我的绑定是在一个 .xjb 文件中完成的。我尝试了几种方法，但无法正常工作。

这可能吗？如果是这样，怎么做？

这是我的问题的一个较小的例子：

我现有的 Java 类：

```
package com.existing; 

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlType;

@XmlAccessorType(XmlAccessType.FIELD)
public class Existing {
    private String prop; 
    public String getProp() { return prop; }
    public void setProp(String prop) { this.prop = prop; }
} 
```

我的架构：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
     targetNamespace="http://www.baloiselife.com/xpression/policy"
     xmlns="http://www.baloiselife.com/xpression/policy" >

<xs:element name="root_node">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="some_other_propery" type="xs:string"/>
      <!-- I want this element to map onto my existing Java class -->
      <xs:element name="special_element" type="existing_type" minOccurs="0" />
    </xs:sequence>
  </xs:complexType>
</xs:element>

<!-- I want this element to be ignored, and instead my Java class used -->
<xs:complexType name="existing_type">
  <xs:sequence>
    <xs:element name="prop" type="xs:string" minOccurs="0" />
  </xs:sequence>
</xs:complexType> 
```

那么有什么想法我的绑定应该是什么？我尝试使用 jxb:class 设置，但无法让它工作。我的最终结果有两个要求：

1.  ExistingType 类*不是*从 Schema 生成的
2.  RootNode 类有一个 Existing 类型的元素，它映射到我现有的 Java 类

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T11:29:10.243

您可以使用外部绑定文件来配置 XJC 以执行您想要的操作。

**绑定.xjb**

```
<jxb:bindings 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">

    <jxb:bindings schemaLocation="yourSchema.xsd">
        <jxb:bindings node="//xs:complexType[@name='existing_type']">
            <jxb:class ref="com.existing.Existing"/>
        </jxb:bindings>
    </jxb:bindings>
</jxb:bindings> 
```

**XJC 呼叫**

```
xjc -d outputDir -b binding.xjb yourSchema.xsd 
```

# c# - SqlDataReader 中的无效列名错误

> ID：12891968
> 
> 赞同：1
> 
> 时间：2012-10-15T08:39:32.667
> 
> 标签：c#, asp.net

我正在使用 SQL Datareader 填充 .aspx 页面中的文本框。我的下面

```
#region "[--------Function To Fill Up All TextBox---------]>"
public void FillTextBox(string Sqlstring)
{

    SqlConnection Conn =  new SqlConnection(ConfigurationManager.ConnectionStrings["SQL Connection String"].ConnectionString);
    SqlDataReader MyDataReader = null;
    SqlCommand MyOleDbCommand = new SqlCommand();
    MyOleDbCommand.Connection = (Conn);
    Conn.Open();
    MyOleDbCommand.CommandText = Sqlstring;
    MyDataReader = MyOleDbCommand.ExecuteReader();
    try
    {

        while (MyDataReader.Read())
        {

            txtuniv.Text = (MyDataReader[0].ToString());
            txtcollrno.Text = (MyDataReader[1].ToString());
            /*txtLastName.Text = (MyDataReader[2].ToString());
            txtClass.Text = (MyDataReader[3].ToString());
            txtSession.Text = (MyDataReader[4].ToString());
            txtobt.Text = (MyDataReader[5].ToString());
            txttot.Text = (MyDataReader[6].ToString());

            */
        }
    }
    catch (System.Exception err)
    {
        MyDataReader.Close();
        Conn.Close();
        Conn.Dispose();
    }

}
#endregion 
```

在 PageLoad() 事件中

```
 protected void Page_Load(object sender, EventArgs e)
{
    Label1.Text = User.Identity.Name.ToString();

    string SqlStr = null;
    SqlStr = "Select * from TB_User where UserID=" + Label1.Text;
    FillTextBox(SqlStr);
} 
```

我有表 TB_User，其中包含 UserID 和 Password 列。它分别具有值 test1 和 test1。但它给出了以下错误：

> ```
> Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.
> Exception Details: System.Data.SqlClient.SqlException: Invalid column name 'test1'.
> 
> Source Error:
> 
> Line 40:         Conn.Open();
> Line 41:         MyOleDbCommand.CommandText = Sqlstring;
> Line 42:         MyDataReader = MyOleDbCommand.ExecuteReader();
> Line 43:         try
> Line 44:         { 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:44:51.627

您忘记在参数周围添加单引号。

```
"Select * from TB_User where UserID='" + Label1.Text +"'"; 
```

1.  **但是**，您可以接受[SQL 注入](http://msdn.microsoft.com/en-us/library/ms161953%28v=sql.105%29.aspx)。不要连接字符串来构建您的查询。而是使用参数。
2.  用于[`using-statement`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)您的连接（以及所有其他实现`IDisposable`）。Dispose 也会关闭连接，`using`即使出现错误。

这是一个例子：

```
using (var con = new SqlConnection(ConfigurationManager.ConnectionStrings["SQL Connection String"].ConnectionString)) {
    var sql = "Select * from TB_User where UserID=@UserID";
    using (var cmd = new SqlCommand(sql, con)) {
        cmd.Parameters.AddWithValue("@UserID", Label1.Text);
        con.Open();
        using(var reader = cmd.ExecuteReader())
        {
            while(reader.Read())
            {
                // ...
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T08:43:51.553

UserID 必须封装`'`在查询中。

```
SqlStr = "Select * from TB_User where UserID='" + Label1.Text + "'"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T08:44:02.420

尝试更改以下内容：

```
SqlStr = "Select * from TB_User where UserID=" + Label1.Text; 
```

到：

```
SqlStr = string.Format("Select * from TB_User where UserID='{0}'",Label1.Text); 
```

在原始版本中，数据库认为您正在寻找列 Test1 而不是与值“Test1”进行比较

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T08:44:49.893

试试这个，在 userID 周围加上引号

```
SqlStr = "Select * from TB_User where UserID='" + Label1.Text + "'"; 
```

考虑在您的代码中使用参数化查询 - 避免 SQL 注入攻击并避免可能损坏 SQL 语法的意外字符

```
SqlStr = "Select * from TB_User where UserID=@UserID"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T08:45:47.893

从安全角度来看，您的代码很糟糕。此行要求进行 Sql 注入：

```
SqlStr = "Select * from TB_User where UserID=" + Label1.Text; 
```

此外，您应该将对象放在 finally 块中，而不是在 catch 中，因为这样您只会在出现问题时释放资源。

第三也是最后，在查询中指定列名并告诉我们它是如何进行的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-06T10:06:25.183

检查列名的拼写是否正确。

# macos - NSWindow 中的后台应用程序和 NSTextField

> ID：12891970
> 
> 赞同：1
> 
> 时间：2012-10-15T08:39:49.023
> 
> 标签：macos, cocoa

我隐藏了我的 Cocoa 应用程序的停靠图标

```
ProcessSerialNumber psn = { 0, kCurrentProcess };
TransformProcessType(&psn, kProcessTransformToBackgroundApplication); 
```

`makeKeyAndOrderFront:`当用户单击状态栏菜单项时，我的代码会加载一个 NIB 文件并显示该 NIB ( ) 的窗口。该窗口包含一个 NSTextField。

我无法在此文本字段中输入文本。似乎没有正确激活该窗口。

当不使用上述代码隐藏停靠图标时，文本输入工作正常。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:36:47.810

试试这个

```
[[NSApplication sharedApplication]  activateIgnoringOtherApps:YES];
[window makeKeyAndOrderFront:self];
[[textField window] makeFirstResponder: textField]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T17:43:07.633

我找到了解决我的问题的方法。

基本上，它默认使应用程序成为代理应用程序，并在必要时以编程方式带回停靠图标。

有关详细信息，请参阅[我的博客](http://codebrickie.com/blog/2012/10/16/switching-between-dock-and-status-bar-mode-in-cocoa/)。

# postgresql - PostgreSQL：在哪里而不是在哪里

> ID：12891971
> 
> 赞同：7
> 
> 时间：2012-10-15T08:40:04.810
> 
> 标签：postgresql, where-in

我有两个表，`A`并且由字段引用，因此任何值都存在于.`B``A``B``A.id_b B.id``id_b``B.id`

我有三个查询： 第一个：

```
SELECT COUNT(b.id)
FROM B b
WHERE b.id NOT IN (
    SELECT a.id_b
    FROM A a) 
```

它给了我`0`；

第二个，区别仅在于`NOT`：

```
SELECT COUNT(b.id)
FROM B b
WHERE b.id IN (
    SELECT a.id_b
    FROM A a) 
```

这个查询给了我：`1899`

第三个：

```
SELECT COUNT(b.id)
FROM B b 
```

这个查询给了我`3599`

相同的结果：

```
SELECT a.id_b
FROM A a 
```

保证我`B.id`分成两组，并且两组中的元素计数必须有很多总元素计数，但我有：**1899 + 0 != 3599**。

那怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T11:24:24.117

找到了原因。A 中有记录，其`NULL`值为`A.id_b`. 这就是为什么查询：

```
SELECT COUNT(b.id)
FROM B b
WHERE b.id NOT IN (
    SELECT a.id_b
    FROM A a) 
```

正在返回`0`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T09:01:56.337

这个查询告诉我们表 B 总共有 3599 行：

```
SELECT COUNT(b.id)
FROM B b 
```

下一个查询告诉我们，来自 B 的每个 id 都在 A 中使用：

```
SELECT COUNT(b.id)
FROM B b
WHERE b.id NOT IN (
    SELECT a.id_b
    FROM A a) 
```

此外，此查询表明表 B 有 1899 个 id，这些 id 在表 A 中提到：

```
SELECT COUNT(b.id)
FROM B b
WHERE b.id IN (
   SELECT a.id_b
   FROM A a) 
```

对此唯一可能的解释是，某些 B.id 在表 A 中被用作 A.id_b 每行不止一次。运行此查询将显示表 A 中所有重复提及 id_b 的列表：

```
SELECT a.id_b
FROM A a
GROUP BY a.id_b
HAVING count(a.id_b) > 1 
```

# forms - 敏捷工具包重新加载 CRUD 表单的字段

> ID：12891973
> 
> 赞同：0
> 
> 时间：2012-10-15T08:40:07.813
> 
> 标签：forms, field, reload, crud, agiletoolkit

我有一个粗略的表格，我想用我的数据库中的数据自动完成一些字段（不是全部）。我不想因为弹出窗口而重新加载所有表单（更改将丢失）。当我尝试重新加载这样的简单字段时。$myfield = $crud->form->getElement('myfield'); 并在 $myfield->js()reload() 事件之后执行。myfield 中有一个新表单，所有字段都包含在子表单中。

我的问题是是否可以独立于 crud 表单重新加载字段以及如何正确执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:48:42.497

试试这个。如果有不清楚的地方，请告诉我。

```
$form->js()->atk4_form(
         'reloadField',
         'field_name',
         array($this->api->url(),'some_other_var'=>'some_other_var_value')
) 
```

*   field_name - 要重新加载的字段的名称
*   some_other_var - 要添加到 url 的附加变量

[更多关于 reloadField js 函数的信息在这里](https://github.com/atk4/atk4/blob/master/templates/js/ui.atk4_form.js#L185)

# lucene - 如何索引和搜索动态字段名称和值

> ID：12891981
> 
> 赞同：1
> 
> 时间：2012-10-15T08:40:21.067
> 
> 标签：lucene, hibernate-search

我有两个班。

```
public Class Student
{
  //primary key
  private String id;
  private String name;//name = Jonathan
  ....
  private List<CustomField> customFields;
}

public Class CustomField 
{
  //primary key
  private String id;

  private String fieldName;
  ....
  private String fieldValue;
} 
```

customFields 由用户定义，可以是任何字段和值。例如：customFields 列表中有两个对象。它们是 [id = 001,fieldName = age,value = 30] [id=002,fieldName = score,value = 90]。（用户也可以在 customFields 列表中添加/更新一些必要的字段，customFields 是动态的）

因此，如果“学生”课程发送到我的网页，它将在网页上显示：姓名：[Jonathan] Age:[30] Score:[90]。

用户案例：用户可以按姓名、年龄、分数等字段进行搜索。所以这些字段应该被索引到 Lucene 文档中。如果使用 Hibernate 搜索索引自定义字段，我如何为动态字段编写索引注释？

所以我需要使用 Hibernate Search 索引和搜索动态 customFields，我可以实现它吗？你懂我的意思吗？

**编辑：**

```
public class CustomFieldBriddge implements FieldBridge
{

    public void set(String name, Object value, Document document, LuceneOptions luceneOptions)
    {
        Field.Store store           = luceneOptions.getStore();
        Field.Index index           = luceneOptions.getIndex();
        Field.TermVector termVector = luceneOptions.getTermVector();
        Float boost                 = luceneOptions.getBoost();
        if (value != null)
        {
            List<CustomField> customFields              = (List) value;
            for (CustomField customField : customFields)
            {

                String fieldName = customField.getFiledName();
                String fieldValue = customField.getFiledValue();
                Field field = new Field(fieldName, fieldValue, store.YES, index.NOT_ANALYZED,
                    termVector);    // is the field will index into Lucene document one by one?and it can be searched out? right?
                field.setBoost(boost);
                document.add(field); // is this operation will index the field into Lucuene Document?
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:17:57.487

看看如何实现自定义*FieldBridge* - [http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#d0e4019](http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#d0e4019)

使用自定义字段桥，您基本上将获得*CustomField*实例列表以及传递给您的 Lucene 文档。然后由您来创建*Fieldables*。在您的情况下， *CustomField#fieldName*成为 Lucene *Document*字段名称，*CustomField#fieldValue*成为字段值。查看*DateSplitBridge*示例。

# macos - 使用 UNC 路径在 Parallels 中通过 IIS7.5 连接到 OSX

> ID：12891986
> 
> 赞同：1
> 
> 时间：2012-10-15T08:40:46.760
> 
> 标签：macos, authorization, iis-7.5, unc, parallels

我有 IIS7.5 和 ASPNET 4.0 在我连接到我的 MacBook Air 的外部硬盘上的 Windows 7 上的 Parallels 虚拟机中运行。我的网站源文件在我的 MacBook Air 上。我想在 IIS7.5 中配置一个指向 MacBook Air 上文件的网站。我现在在物理路径下有这个（IIS 中的“基本设置...”）：\psf\home\dropbox\inetpub\mysite
我的 Windows 7 和 OSX 的用户名和密码是相同的。
但是当我在“连接为”下输入这些凭据时，当我单击“测试设置”时它不起作用。已检查身份验证，但授权失败并显示“路径可能不存在且无法验证 (\psf\home\dropbox\inetpub\mysite)”。
当我直接在 Windows 资源管理器中输入 UNC 路径时，我可以查看文件。

如何正确配置它？

# opengl - NPOT 纹理分配失败，具有精确的相应数据

> ID：12891987
> 
> 赞同：1
> 
> 时间：2012-10-15T08:40:48.080
> 
> 标签：opengl, textures

据我所知，OpenGL 从 3.0 开始就高度支持 NPOT 纹理。现在我面临着一个奇怪的现象，即 NPOT 纹理无法分配精确的对应数据。词很简单。我的测试代码如下。

```
glGenTextures(1, &texVoxels);
glBindTexture(GL_TEXTURE_3D, texVoxels);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE);

int width = 513;
int height = 513;
int depth = 513;
unsigned char *data = new unsigned char[width*height*depth];
memset(data, 0, sizeof(unsigned char)*width*height*depth);

glTexImage3D(GL_TEXTURE_3D, 0, GL_LUMINANCE8, width, height,depth, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, data);

delete []data;
data = NULL; 
```

如上所示的代码，我需要分配一个 2^N +1 的 NPOT 立方纹理。*但是程序会在glTexImage3D()*上退出错误。我认为该错误是由“*数据*大小小于所需纹理”引起的。因为如果我分配的*数据*足够大，程序就会通过。

我怎样才能使用 NPOT 纹理并像这样分配数据？即使当程序通过的数据大小足够大时，我真的不确定数据如何与纹理位置完全对应。

PS。我的显卡是 quadro fx 4800，它支持 OpenGL 3.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T09:33:07.857

您可能需要设置像素存储参数。最重要的是行对齐。尝试添加一个

```
glPixelStorei(GL_UNPACK_ALIGNMENT, 1); 
```

打电话之前`glTexImage3D`。

# c# - 为什么应该将空值转换为可空结构

> ID：12891989
> 
> 赞同：3
> 
> 时间：2012-10-15T08:40:55.223
> 
> 标签：c#, type-conversion, nullable

我有一个返回 nullable 的函数`struct`。我注意到两个类似的案例

第一：效果很好：

```
public static GeometricCircle? CircleBySize(GeometricPoint point, double size)
{
    if (size >= epsilon)
        return null;

    return new GeometricCircle(point.Position, new Vector(1, 0, 0), size, true);
} 
```

第二：需要将空值转换为GeometricCircle？

```
public static GeometricCircle? CircleBySize(GeometricPoint point, double size)
{
    return size > epsilon ? new GeometricCircle(point.Position, new Vector(1, 0, 0), size, true) : (GeometricCircle?)null;
} 
```

有人知道有什么区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T08:49:33.077

在您的第一个示例中，您正在返回`null`when `size >= epsilon`。编译器知道这`null`是可空类型的有效值。

在您的第二个示例中，您使用的是[`?:`三元运算符](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)，它带有自己的一组规则。

```
condition ? first_expression : second_expression; 
```

[MSDN](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)告诉我们（我的重点）...

> `first_expression`和的类型`second_expression`必须相同，或者必须存在从一种类型到另一种类型的*隐式转换。*

这里的关键区别在于`null`不能*隐式*转换为`GeometricCircle`, （您的类型`first_expression`）。

因此，您必须*明确地*使用转换为`GeometricCircle?`，然后*隐式*转换为`GeometricCircle`。

# git - 通过代理服务器推送到heroku

> ID：12891991
> 
> 赞同：7
> 
> 时间：2012-10-15T08:41:00.363
> 
> 标签：git, heroku

我已经安装了 Heroku 并设置了一个帐户，但由于我大学的代理，我无法将我的应用程序代码推送到它上面。

我尝试使用[此](https://stackoverflow.com/questions/10555546/error-in-git-push-heroku-master-through-ssh-behind-proxy)线程中给出的解决方案，并阅读了有关让 github 通过代理工作的[此页面，但我仍然收到错误消息，即：](http://tachang.tumblr.com/post/22265579539/using-github-through-draconian-proxies-windows-and)

```
$git push heroku origin
ssh_exchange_identification: Connection closed by remote host
fatal: The remote end hung up unexpectedly

$git remote -v
heroku  git_heroku:secret-hamlet-7718.git (fetch)
heroku  git_heroku:secret-hamlet-7718.git (push)
origin  https://github.com/saasbook/hw2_rottenpotatoes.git (fetch)
origin  https://github.com/saasbook/hw2_rottenpotatoes.git (push) 
```

我的 .ssh/config 文件包含：

```
ProxyCommand corkscrew [proxy_address] [proxy_port] %h %p

Host git_heroku
  Hostname heroku.com
  User git
  Port 443 
```

.git/config 文件的相关部分：

```
[remote "heroku"]
    url = git_heroku:secret-hamlet-7718.git
    fetch = +refs/heads/*:refs/remotes/heroku/* 
```

我很确定我错过了一些东西。我希望有人能指出什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:32:12.167

将您`[remote "heroku"]`更改为此有帮助吗？

```
[remote "heroku"]
    url = git@heroku:secret-hamlet-7718.git
    fetch = +refs/heads/*:refs/remotes/heroku/* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:13:49.680

您可以尝试将 ProxyCommand 放在该`Host`部分中：

```
Host git_heroku
  Hostname heroku.com
  User git
  ProxyCommand corkscrew 10.3.100.211 8080 %h %p
  Port 443 
```

# java - 从节点列表中按名称获取节点

> ID：12891992
> 
> 赞同：2
> 
> 时间：2012-10-15T08:41:04.437
> 
> 标签：java, xml, dom

我试图通过它的名称而不是它的索引来获取节点，`item(i)`因为`Document`我正在阅读的节点并不总是每次都在同一个地方，但节点的名称总是相同的。我正在尝试获取节点`<reference>`

到目前为止，我有：

```
System.out.println("Current Reference: " + 
    configurationDocument.getElementsByTagName("Parent").
        item(0).getChildNodes().item(0)); 
```

这样做的问题是最后一个`item(0)`总是得到错误的节点。如何通过 name ( `String`) 而不是 by获取节点`int`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T08:55:45.707

使用 XPath 获取您感兴趣的节点。像这样：

```
XPath xpath = XPathFactory.newInstance().newXPath();
XPathExpression xpr = xpath.compile("//Parent/name-of-item/name-of-item");
System.out.println(xpr.evaluate(configurationDocument, XPathConstants.STRING)); 
```

# css - 背景图像在 Safari 中有线条？

> ID：12891993
> 
> 赞同：2
> 
> 时间：2012-10-15T08:41:07.820
> 
> 标签：css, background-image, safari

我在一个不想在 Safari 中正常工作的网站上有一个背景图像。

这是它在 Safari 中的样子：
![野生动物园<br />](../Images/a088b931732cdcef9fccb89824b3075e.png)

下面是它的样子，以及它在 Firefox 和 Chrome 中的样子：
![火狐和铬](../Images/f38db08860529e3c76685b42c245504d.png)

有谁知道这里发生了什么，为什么会这样，以及我该如何解决？

**编辑**
添加背景图像的代码如下：

```
body {
    background-image: url(../imgaes/bg.jpg);
    background-repeat: repeat;
} 
```

**编辑 2**
body 标签具有以下样式：

```
overflow-x: hidden;
overflow-y: scroll; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:51:49.650

由于您没有提供太多关于到底发生了什么的信息，我建议将一些内容放在 body 标签中，因为我认为 Safari 会解释代码，使您的 body 的高度为 0px，这就是为什么它只重复一个您的背景图像的一小部分一遍又一遍，您可以将 a`min-height: 100%`放入您身体的 CSS 代码中，或者像我之前所说的那样尝试在其中插入一些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T09:43:46.097

重新创建背景图像解决了这个问题。

# android - 将 Holo 主题分配给自定义按钮 (LinearLayout)

> ID：12891994
> 
> 赞同：0
> 
> 时间：2012-10-15T08:41:12.157
> 
> 标签：android, android-linearlayout, android-resources

我正在尝试将 Holo 主题分配给我使用 LinearLayout 制作的自定义按钮：

我在用

```
 android:background="@drawable/btn_default_holo_dark" 
```

获取系统 Holo 主题。由于该资源不是公开的，我复制了

```
btn_default_holo_dark.xml 
```

在我的可绘制文件夹中，但仍然`btn_default_holo_dark.xml`引用我无法找到和复制的其他私人资源......

这是 btn_default_holo_dark.xml：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_enabled="true"
    android:drawable="@drawable/btn_default_normal_holo_dark" />
<item android:state_window_focused="false" android:state_enabled="false"
    android:drawable="@drawable/btn_default_disabled_holo_dark" />
<item android:state_pressed="true" 
    android:drawable="@drawable/btn_default_pressed_holo_dark" />
<item android:state_focused="true" android:state_enabled="true"
    android:drawable="@drawable/btn_default_focused_holo_dark" />
<item android:state_enabled="true"
    android:drawable="@drawable/btn_default_normal_holo_dark" />
<item android:state_focused="true"
    android:drawable="@drawable/btn_default_disabled_focused_holo_dark" />
<item
     android:drawable="@drawable/btn_default_disabled_holo_dark" />
</selector> 
```

我无法在“平台”文件夹中找到这些资源。他们在哪里？

谢谢

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-15T08:44:42.437

请检查 res 文件夹中的 drawable 文件夹。

# c# - 消失的 FormClosing/FormClosed 事件

> ID：12891998
> 
> 赞同：0
> 
> 时间：2012-10-15T08:41:36.447
> 
> 标签：c#, .net, winforms, winapi, events

以下代码片段可能看起来很奇怪，但它是重现与不同应用程序的复杂交互问题的一种非常简单的方法。

示例应用程序有两个表单，两个表单都注册 FormClosing 和 FormClosed 事件，只是在那里执行 Debug.WriteLine。

主要功能：

```
[STAThread]
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Form2 form2 = new Form2();
    form2.Show();
    Application.Run(new Form1());
} 
```

当我关闭 Form2 时，我收到了预期的事件。当我关闭 Form1 时，应用程序退出并且 Form2 也被关闭。但是：Form2 的事件不会发生。

我覆盖了 Form2 的 WndProc。当我关闭 Form2 时，我收到

```
15.10.2012 10:25:04 WndProc - WM_CLOSE
15.10.2012 10:25:04 OnClosing
15.10.2012 10:25:04 Form2_FormClosing
15.10.2012 10:25:04 OnClosed
15.10.2012 10:25:04 Form2_FormClosed
...
15.10.2012 10:25:04 WndProc - WM_DESTROY
...
15.10.2012 10:25:04 WndProc - WM_NCDESTROY 
```

当我关闭 Form1 时，Form2 没有收到 WM_CLOSE。但是收到了 WM_DESTROY 和 WM_NCDESTROY。

编辑：获得这种奇怪行为的另一种方法如下：该项目有三个表单，Form1 和 Form2 各有一个用于打开下一个表单的按钮。在form2的按钮点击事件中，执行：

```
Form3 frm3 = new Form3();
frm3.Parent = null;
frm3.Show(null); 
```

同样，如上所述注册事件处理程序。关闭 form2 时，应用程序保持运行（仍显示 form1），但 form3 也关闭，并且没有收到 WM_CLOSE 事件。请注意，我已经将表单的 Parent 和 Owner 都设置为 null。

这种奇怪行为的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T08:51:56.637

`WM_CLOSE`发送消息以选择取消关闭。请参阅此流程图：

![在此处输入图像描述](../Images/1d032c76a726f33245137855cc78c8ed.png)

因此，当窗口即将被销毁时，此消息中没有必要。这是设计行为。当您关闭应用程序的主要形式时，`Application.ThreadExit`方法被调用。它描述为：

> 退出当前线程上的消息循环并关闭该线程上的所有窗口。

如果您希望所有打开的表单都接收`WM_CLOSE`消息，则需要`Application.Exit`改用：

> 通知所有消息泵它们必须终止，然后在处理完消息后关闭所有应用程序窗口。

因此只需订阅`Form1_FormClosing`事件并通知所有打开的窗口关闭：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    Application.Exit();
} 
```