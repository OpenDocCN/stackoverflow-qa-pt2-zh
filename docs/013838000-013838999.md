# StackOverflow 问答 13838000-13838999

# css - 寻求规则

> ID：13838000
> 
> 赞同：0
> 
> 时间：2012-12-12T10:45:38.107
> 
> 标签：css, 960.gs

百分比网格宽度 CSS 规则，例如 960gs 和 Skeleton grid 非常简洁，我不时使用它们。但是，我想知道......是否有人创建了一个变体，其中相对网格单元格宽度根据可用的窗口宽度/屏幕宽度而变化。我的意思是这个

取一个 960gs 的 16 列网格，按 2:12:2 的比例分成三部分，即百分比宽度为 12.5:75:12.5。这适用于大屏幕尺寸。对于较小的屏幕，通常最好放弃列布局并简单地将东西堆叠在另一个下方 - 这就是我通常所做的。但是，如果您想保留网格布局怎么办？将比例更改为预设“地板”宽度以下的系统会很好。

我在这里大声思考，并计划看看我能不能想出点什么来。但是，我不想重新发明轮子，所以任何指向“它已经完成”的指针都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:26:18.627

给遇到此线程的任何人的说明。简短的回答 - 如果没有一些脚本支持，这可能是不可能的。如果您可以使用一些脚本，则解决方案相对简单。简要步骤

1.  将百分比网格单元格包装在容器 div 中
2.  给容器 div 一个虚拟类，比如“flx”和一个数据属性，比如 data-flx，在其中你按照

    {"a":"8","b":"16","w":100000},{"a":"18","b":"6","w":"500"}, {"a":"12","b":"12","w":"400"}]

本质上，我们定义了当设备/屏幕宽度低于“地板”宽度时使用的网格单元比例。w:100000 是适用于大屏幕的默认值。在这里，我定义了两个额外的楼层 - 400 像素和 500 像素。我的示例假设有两个网格单元。如果您有超过 2 个单元格，则只需放入

```
"c":"proportion", "d":"proportion" 
```

等等。您需要的另一点是 jQuery 代码。

```
$(document).ready(function()
{$(window).bind("orientationchange resize pageshow",scaleGrids());}

function scaleGrids()
{

 function adaptIt(w,grd)
 {
  var fvd = $(grd).data('flx');
  var ndx = 0;
  for(var i=1;i < 3;i++) if (w < fvd[i].w) ndx = i;
  //the "floor" to use has now been established as fvd[ndx]

  fvd = fvd[ndx];
  var ckls = new Array();
  var cells = $(grd).children();
  ckls.push('st_' + fvd.a);
  ckls.push('st_' + fvd.b);
  //for convenience  we push the proportions to use into an array

  ndx = 0;
  $.each(cells,function(i,cell){$(cell).removeClass().addClass(ckls[ndx++])});
  //iteratively reclass each cell in the grid 
 }

 var w = $(window).width();
 $.each($('.flx'),function(ndx,grd){adaptIt(w,grd)});
 //iteratively rescale each element bearing the class flx
} 
```

简要说明 - 当屏幕调整大小或设备旋转时，我们建立了我们发现自己的“地板”。对于所有带有“flx”类的 DOM 元素，我们遍历它们的子元素（网格单元），去掉所有当前的类声明并添加新的。

最后一点 - 要真正发挥作用，您需要使用非常精细的网格单元尺寸。我正在使用 24 列网格来使用 jQuery Mobile。计算出必要的 CSS 很容易，但为了同样的完整性，我还是在这里给出它

```
.st_1,.st_2,.st_3,.st_4,.st_5,.st_6,.st_7,.st_8,
.st_9,.st_10,.st_11,.st_12,.st_13,.st_14,.st_15,.st_16,
.st_17,.st_18,.st_19,.st_20,.st_21,.st_22,.st_23,.st_24
{margin:0;padding:0;border:0;float:left;}

.flex24{min-height:1em;overflow:hidden;padding:0;margin:0}

.flex24 .st_1{width:4.16666666666667%;}
.flex24 .st_2{width:8.333333333333333%;}
.flex24 .st_3{width:12.5%;}
.flex24 .st_4{width:16.666666666667%;}
.flex24 .st_5{width:20.833333333333%;}
.flex24 .st_6{width:25%;}
.flex24 .st_7{width:29.166666666667%;}
.flex24 .st_8{width:33.33333333333%;}
.flex24 .st_9{width:37.5%;}
.flex24 .st_10{width:41.66666666667%;}
.flex24 .st_11{width:45.83333333333%;}
.flex24 .st_12{width:50%;}
.flex24 .st_13{width:54.16666666667%}
.flex24 .st_14{width:58.33333333333%}
.flex24 .st_15{width:62.5%;}
.flex24 .st_16{width:66.66666666667%;}
.flex24 .st_17{width:70.83333333333%;}
.flex24 .st_18{width:75%;}
.flex24 .st_19{width:79.16666666667%;}
.flex24 .st_20{width:83.33333333333%;}
.flex24 .st_21{width:87.5%;}
.flex24 .st_22{width:91.66666666667%;}
.flex24 .st_23{width:95.83333333333%;}
.flex24 .st_24{width:100%;} 
```

后面是一个工作示例的链接。

# vba - 按列值排序表（从最大值到最小值）

> ID：13838004
> 
> 赞同：-2
> 
> 时间：2012-12-12T10:45:44.173
> 
> 标签：vba, excel

我有一个包含一些值的表：

![在此处输入图像描述](../Images/90a754f3e0877a3f372c41aeb6d6700a.png)

我需要用 vba 按从最大值到最小值的值列对这个表进行排序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:02:07.900

认为这是你需要的

```
Columns("A:E").Select
Selection.Sort Key1:=Range("E2"), Order1:=xlDescending, Header:=xlGuess, _
    OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, _
    DataOption1:=xlSortNormal 
```

# php - 提交表单时，使用提交的值作为url

> ID：13838005
> 
> 赞同：0
> 
> 时间：2012-12-12T10:45:44.773
> 
> 标签：php

我正在尝试创建以下条件

1）用户访问页面 2）用户输入代码 3）如果代码有效，用户进入与代码对应的页面 4）如果代码无效，用户失败

这样人们就可以查看公寓租赁公司的某些 PDF。

我想做的是创建一个带有特殊代码输入的表单。

提交表单后，它会简单地重定向到 url.com/[[value of input]].php

我尝试创建一个 PHP 处理程序来执行此操作，但是当我尝试它时，我得到一个空白页。我对 PHP 的经验有限，所以我可能会走上完全错误的道路。

对此深表感谢

这是我的表格

```
 <form id="enter_code" name="enter_code" action="code_handler.php" method="post">

        <label for="code">Enter Your Apartment Code</label>
        <input id="code" name="code" size="30" type="text" />

        <input class="button" name="commit" style="font-weight:normal" type="submit" value="Sign in" />

  </form> 
```

这是我的 code_handler.php

```
<?php

   header( 'Location: http://www.opohills.com/guests/pdf/<?=htmlspecialchars($_POST['code'], ENT_COMPAT)?>.php' ) ;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:52:28.313

如果您在 PHP 代码中，则无需再次打开引号：

```
<?php

   header( 'Location: http://www.opohills.com/guests/pdf/'.htmlspecialchars($_POST['code'], ENT_COMPAT).'.php' ) ;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:51:14.707

为什么在 php 中使用 php

```
header( 'Location: http://www.opohills.com/guests/pdf/'.htmlspecialchars($_POST['code'], ENT_COMPAT).'.php' ) ; 
```

# ldap - 用于组成员身份的 ldap 过滤器

> ID：13838013
> 
> 赞同：0
> 
> 时间：2012-12-12T10:45:59.847
> 
> 标签：ldap

我需要有关 LDAP 过滤器的帮助来检索组成员资格。我的目标如下：假设我需要检索通用 AD 服务器的组成员身份（直接/嵌套）[因此，我不能使用 MS-AD 自定义的 LDAP_MATCHING_RULE_IN_CHAIN 来实现我的目标]。因此，这就是我的计划：假设用户 A 是组 A、B、C 的直接成员。在内部 A 的 memberOf 属性是 D，B 的 memberOf 属性是 E，C 的 memberOf 是 F。那么，有没有办法在单个 LDAP 查询可以查询所有 3 个组 A、B、C 的成员资格属性，以检索与 D、E、F 等相关的信息。

如果有任何这样的 LDAP 过滤器，有人可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T19:54:36.730

我不确定您是否可以对此进行直接查询。我只能想到一个嵌套的 ldap 查询。

# ruby - Bundler 找不到已安装的 gem

> ID：13838014
> 
> 赞同：0
> 
> 时间：2012-12-12T10:46:01.867
> 
> 标签：ruby, gem, bundler

我有一个包含以下内容的 Gemfile：

```
source 'https://rubygems.org'
gem 'knife-cloudstack', :git => 'git://github.com/CloudStack-extras/knife-cloudstack.git' 
```

在进行捆绑安装时，我得到以下输出

```
bundle install --binstubs
...
Using knife-cloudstack (0.0.13) from git://github.com/CloudStack-extras/knife-cloudstack.git (at master)
... 
```

但是现在当我做捆绑展示时，捆绑器找不到刀云堆栈宝石

```
bundle show knife-cloudstack
Could not find gem 'knife-cloudstack (>= 0) ruby' in the gems available on this machine 
```

我不确定我在这里缺少什么。请协助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:34:32.243

刚刚尝试了完全相同的事情，似乎对我来说很好。你用的是什么版本的红宝石？“宝石环境”的输出是什么？运行“捆绑秀”会显示任何宝石吗？你在linux机器上运行吗？如果是这样，您也许可以找出它在哪里将 gem 写入使用：“strace -f -eopen -o/tmp/strace.log bundle install”

干杯

# mongodb - map reduce 函数返回 id 而不是 count

> ID：13838015
> 
> 赞同：1
> 
> 时间：2012-12-12T10:46:06.520
> 
> 标签：mongodb, mapreduce, mongoengine

我正在应用 map reduce 功能，但面临一个问题。如果只有一条记录，它会返回 id 而不是 count = 1。

```
 map_func = """function () {
        emit(this.school_id, this.student_id);
    }"""
    reduce_func = """
        function (k, values) {               
                values.length;
        }
    """ 
```

如果学校 100 只有一个学生，那么它应该返回学校 ID 100，值 =1，但在这种情况下，它返回学校 ID = 100，值 = 12（12 是它在 db 中的学生 ID）。对于其他记录，它工作正常。

```
 map_func = """function () {            
         emit({this.school_id, this.student_id},{count:1});
    }"""
    reduce_func = """
        function (k, values) {
            var count =0 ;
            values.forEach(function(v)
            {
               count += v['count'];
            });
            return {count:count};
        }
    """
     map_func2 = """
    function() {
        emit(this['_id']['school_id'], {count: 1});
    }
    """ 
```

[http://cookbook.mongodb.org/patterns/unique_items_map_reduce/](http://cookbook.mongodb.org/patterns/unique_items_map_reduce/) 我使用了这个例子，但它使用了两个 maps-reduce 函数，所以需要更多时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:52:23.710

看起来你可能误解了 mapReduce 的一些机制。

emit 将在每个文档上调用，但 reduce 只会在发出多个值的键上调用（因为 reduce 函数的目的是将一组结果合并或归约为一个）。

你的 map 函数是错误的——它需要发出一个键，然后是一个你想要的值——在这种情况下是一个计数。

您的 reduce 函数需要减少这些计数（添加它们），但即使它被多次调用它也必须正常工作（以重新减少以前减少的结果）。

我建议阅读[此处](http://docs.mongodb.org/manual/reference/method/db.collection.mapReduce/)了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:14:01.810

如果你想计算每所学校的学生人数：map = """emit(this.school_id, 1)"""

reduce = """function (key, values) {var total = 0; for (var i = 0; i < values.length; i++) { total += values[i]; } return total;} """

# xml - 如何在 XSLT 样式表中应用谓词，以便显示相同级别元素的表中的多行被谓词过滤

> ID：13838017
> 
> 赞同：1
> 
> 时间：2012-12-12T10:46:10.640
> 
> 标签：xml, xslt, dom

我正在使用嵌入在 HTML 表单中的 javascript 将 xpath 表达式应用到 XSLT 样式表中，主要是在 anXSLT 样式表的 for each 和 value-of 部分中。我想过滤我的表格数据（在 HTML 表单的区域中显示为 HTML 表格的多个 XML 元素数据）。如果我有 dvd 标题和价格元素，那将是一个 XPATH 表达式，包括谓词，让我在一个表中显示所有 DVD 标题和价格信息（两个元素），只显示价格 > 2.00 的那些？目前，在处理谓词以过滤我的表数据和显示 2 个元素的所有行数据方面，我遇到了很多问题。我有一个 xpath 表达式，可以让我过滤并只显示一个元素，而不是两个。

感谢任何帮助。

我已经更新了 xml 文件

```
<?xml version="1.0"?>
<catalog>
<dvd>
<title>Gone with the wind</title><price>2.00</price>
</dvd>
<dvd>
<title>Independence Day</title><price>3.00</price>
</award>
</catalog> 
```

如上所述，我想在我的 HTML 表中输出标题和价格输出，其中行输出是满足价格 > 2.00 的行

XML 的内容被简化了，其中包含更多的 DVD 元素。我将 XPATH 表达式作为字符串传递到 for each 中的 XSLT 模板和 XSLT 样式表的选定部分的值。

XSLT 片段如下。在javascript中，我用XPATH表达式字符串“price[.>2.00]”替换每个“*”，显示价格> 2.00。我希望能够在我的 HTML 表格中以一行的形式显示该价格的标题

```
<xsl:template match="/*/*">
  <tr>    
  <xsl:for-each select="*">
     <td><xsl:value-of select="."/></td>
  </xsl:for-each>
  </tr>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:38:22.917

```
<?xml version="1.0"?>
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="html" indent="yes"/>

    <xsl:template match="/">
        <table>
            <tbody>
                <xsl:apply-templates select="/catalog/dvd[number(price) > 2.0]"/>
            </tbody>
        </table>
    </xsl:template>

    <xsl:template match="dvd">
        <tr>
            <td><xsl:value-of select="title"/></td>
            <td><xsl:value-of select="price"/></td>
        </tr>
    </xsl:template>

</xsl:transform> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:45:15.910

**使用**：

```
/*/dvd[price > 2] 
```

这将选择任何命名`dvd`的元素，该元素是 XML 文档顶部元素的子元素，并且至少有一个`price`子元素，其字符串值转换为数字大于 2。

# python - 在 python 中进行注册操作的最佳时间是什么时候？

> ID：13838019
> 
> 赞同：2
> 
> 时间：2012-12-12T10:46:13.120
> 
> 标签：python, registration, tornado, crypt

在注册操作中，有一个密码 crypt，据我所知，它不能并行化，因为如果它对密钥派生（例如 PBKDF2）进行操作，那么它需要以前的值，那么我猜它是线性操作？

让这个过程变慢，对用户是有益的，因为他的密码对于暴力破解来说会更强，但是还有另一个问题：DOS 攻击！如果每个注册操作需要1秒，那么使用像NGinx这样的负载均衡器每秒会处理8个同时注册操作，这会阻塞应用程序吗？如果我们添加其他操作，比如说：2秒，那么应用程序不好吗？

那么，有什么建议吗？使用 Tornado 不会解决问题，因为 Tornado - 据我了解 - 在 I/O 操作中进行异步操作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T17:12:18.677

[像PBKDF2这样的](http://en.wikipedia.org/wiki/PBKDF2)[关键拉伸](http://en.wikipedia.org/wiki/Key_stretching)函数允许您通过调整迭代计数（或其他函数的其他等效参数）来控制散列密码所需的时间。您正确地观察到在使密码难以通过暴力破解和避免 DoS 攻击之间存在权衡。您需要选择一个迭代计数来平衡这两个考虑因素。

请记住，现代 CPU 每秒可以计算数百万次哈希迭代。即使您使用仅 1000 次的迭代计数，这仍然使破解密码比不迭代哈希要困难 1000 倍，即使使用 1000 次迭代对单个密码进行哈希处理只需要大约一毫秒。

还有其他方法可以避免或减轻登录 DoS 攻击。例如，您可以实施基于 IP 的限制，这样每个 IP 地址每分钟只能进行一些有限的登录尝试次数。当然，分布式 DoS 攻击可以解决这个问题，但这仍然是任何潜在攻击者都需要克服的障碍。

此外，如果您实施[登录反 CSRF 令牌](https://stackoverflow.com/questions/6412813/do-login-forms-need-tokens-against-csrf-attacks)（并且您应该这样做），它们还将通过在进行任何登录尝试之前需要额外的往返来获取令牌来保护您免受某些简单类型的登录 DDoS 攻击。 [CAPTCHA](http://en.wikipedia.org/wiki/CAPTCHA)可能是另一种处理登录 DoS 尝试的有用方法。最后，您可能希望将所有登录请求限制到一组单独的服务器和/或进程，并具有适当的资源限制，这样即使对登录表单的成功 DoS 攻击也不会破坏您网站的*其余部分。*

如果你真的想变得花哨，你甚至可以要求客户提交一份加密[工作证明，](http://en.wikipedia.org/wiki/Proof-of-work_system)或多或少等同于对密码进行哈希处理。例如，您可以向客户端发送一个随机字符串，并要求它向该字符串发回一个后缀，以便随机字符串加上后缀散列到一个以*n*零位结尾的值，其中 2 ^(*n*)大约是您的迭代计数。存在可用于实现此类系统客户端的[JavaScript 加密库。](http://www.google.com/search?q=javascript+crypto+library)

# jsp - 列表的弹簧输入路径

> ID：13838021
> 
> 赞同：6
> 
> 时间：2012-12-12T10:46:16.883
> 
> 标签：jsp, spring-mvc

我在jsp中使用Spring输入路径

前任：

```
<div class="cell label"> 
    <form:label path="order.paymentTransactions.payerEmail">Payer Mail</form:label>
</div> 
<div class="cell"> 
    <form:input path="order.paymentTransactions.payerEmail" name="payerEmail"/>
</div> 
```

在这里，订单是我的主要对象和内部订单，paymentTransaction 是一个列表，我必须输入数据才能通过 payerEmail 中的 dao 进行检查。

但它向我显示错误和无效路径。请建议我在jsp中定义输入路径的好方法。谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T14:06:13.937

在 Spring 中映射 bean 列表时，很难提供路径属性。您可以将 替换为`<form:input>`纯 html `<input>`。

```
<input name="order.paymentTransactions[0].payerEmail" /> 
```

这是在 Spring MVC 中将 List 映射为表单对象的完整示例

示例：[Spring MVC：使用 Bean 列表提交多行表单](http://viralpatel.net/blogs/spring-mvc-multi-row-submit-java-list/)

上面的示例还讨论了为什么在使用列表时难以使用`<form:input>`。这是因为如果您尝试使用以下内容：

```
<form:input path="order.paymentTransactions[0].payerEmail" name="payerEmail"/> 
```

Spring 将简单地将其呈现为 HTML：

```
<input name="order.paymentTransactions0.payerEmail" /> 
```

忽略括号 [ ]。

因此它不可能`<form:input>`用于映射列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-22T09:45:37.390

我们可以通过 spring 来做 list 的映射。请在您的网站上更新。谢谢你。

例子：

```
<c:forEach var="marksList" items="${personDTO.marksList}" varStatus="status">

<form:input path="marksList[${status.index}].hindi" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-13T07:56:47.463

你可以这样做：

```
<c:set var="list" value="order.paymentTransactions[0].payerEmail" scope="page" />

<form:input path="${list}" name="payerEmail"/>
```

这些对我有用。

# wcf - 通过套接字的 WCF 服务

> ID：13838023
> 
> 赞同：0
> 
> 时间：2012-12-12T10:46:21.810
> 
> 标签：wcf, sockets, service

我开发了 WCF 服务。现在我希望我的客户可以使用套接字访问它。我在我的 WCF 服务上实现了 TCPListener 系统，但是当我尝试在单独的线程中实例化我的 TCPListener 对象时，我收到以下错误：**尝试以访问权限禁止的方式访问套接字**。

我的 WCF 服务在本地托管。

有人帮我吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:55:58.593

你不应该让你的服务实现一个套接字，通信是绑定的任务。你可以实现一个自定义绑定来实例化一个 TCP 通道，[这里](http://winterdom.com/2007/02/writingawcftransportchannelpart2)和[这里](http://msdn.microsoft.com/en-us/library/ms729350.aspx)的一些提示。如果性能是您的目标，您也可以只使用 net.tcp 绑定。

最后，如果您在网络上搜索它，您得到的错误非常清楚：这意味着您正在尝试侦听需要管理权限或已在使用的端口。

# vb.net - vb.net 顺序文件访问

> ID：13838024
> 
> 赞同：1
> 
> 时间：2012-12-12T10:46:23.853
> 
> 标签：vb.net

我正在寻找一种方法来监视文件夹的文件。

我想获取有关文件夹中使用最多的文件的信息。

我已经研究过使用 vb.net `FileSystemWatcher`，但它似乎不包含任何类。我发现的文章没有提到任何这样的功能。我发现一个论坛说要使用`LastAccess`in 中的时间戳`FileSystemWatcher`。但描述与该功能并不真正匹配。

vb.net 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:40:57.803

这[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)确实是您要使用的类。

msdn 文档包含如何使用它的示例。

只要确保您设置[`NotifyFilter`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.notifyfilter.aspx)使用[`LastAccess`](http://msdn.microsoft.com/en-us/library/system.io.notifyfilters.aspx)过滤器：

```
watcher.NotifyFilter = NotifyFilters.LastAccess 
```

通过这种方式，您可以创建一个应用程序或服务来监控您的文件夹并计算每个文件的访问频率。

* * *

但要进行这项工作，您必须启用**Last Access Time**功能。默认情况下，这在 Windows Vista 及更高版本上被禁用。

您可以使用此注册表项启用/禁用此功能

> HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\NtfsDisableLastAccessUpdate

或者通过简单地运行

> fsutil 行为设置 disablelastaccess 0

从具有管理员权限的命令提示符。

# css - simple_html_dom 向表中添加类或 ID

> ID：13838027
> 
> 赞同：1
> 
> 时间：2012-12-12T10:46:40.817
> 
> 标签：css, simple-html-dom

我正在尝试使用 simple_html_dom 打开文件并替换 TR 属性。

该文件包含一个表，其中有几行没有分配 css 类或 id：

```
<tr OnMouseOver="changeCouleur(this);" onMouseOut="remetCouleur(this);" OnClick="show('13510.php');"> 
```

我使用此代码仅从加载的页面中获取表格：

```
$html = file_get_html('mandats/banque.html');

foreach ($html->find('table') as $node) 
{ echo $node;} 
```

到目前为止，表格显示正确，但我无法删除 OnMouseOver 和 onMouseOut 并添加一个 css 类来修改行。

我试过了： `$html->find('table,0')->class = 'mndlnk';`没有成功

基本上我想删除所有当前属性，保留链接引用并向每个 tr 元素插入一个 css 类。

提前感谢您的宝贵建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T05:58:06.263

在你的问题中，你有

```
$html->find('table,0')->class = 'mndlnk'; 
```

假设代码已正确粘贴到此处，看起来您不小心将 ',0' 放在了应该是的引号内

```
$html->find('table',0)->class = 'mndlnk'; 
```

如果这仍然不起作用，您可能还想尝试

```
$html->find('table', 0)->setAttribute('class', 'mndlnk'); 
```

# naming-conventions - 龙卷风模板文件命名约定？

> ID：13838035
> 
> 赞同：1
> 
> 时间：2012-12-12T10:47:13.760
> 
> 标签：naming-conventions, tornado

我的团队正在使用 Tornado Web 服务器和包含的[Tornado 模板语言](http://www.tornadoweb.org/documentation/template.html)。

目前，我们和示例一样，对 Tornado 模板文件使用“.html”。这让我有些恼火，因为 Tornado 模板不是纯 HTML。

例如，Django 一般使用 .dtml，Mustache 使用 .mustache。

Tornado 模板文件是否有类似的约定？如果是这样，它是什么？

# android - Android小部件没有调用服务onStart

> ID：13838039
> 
> 赞同：2
> 
> 时间：2012-12-12T10:47:29.667
> 
> 标签：android, service, widget

我对 android 开发很陌生，我想为我的应用程序创建一个小部件。不幸的是，我无法让它工作。我希望我的小部件启动服务。该服务应包含所有逻辑，例如根据内部存储文件的数据读取更新文本字段。我必须每分钟更新一次我的小部件，因为我想显示剩余时间。为此，我想到了一个 AlarmManager。

我以此作为参考： [http ://www.helloandroid.com/tutorials/mastering-android-widget-development-part4](http://www.helloandroid.com/tutorials/mastering-android-widget-development-part4)

这是我到目前为止所尝试的：AppWidgetProvider：

```
public class WidgetCtrl extends AppWidgetProvider {
public static String WIDGET_UPDATE = "WIDGET_UPDATE";
public static int UPDATE_RATE = 60 * 1000;
private SessionData sessionData = SessionData.getInstance();
private BaseCtrl baseCtrl = BaseCtrl.getInstance();

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {

    // Service Intent
    Intent serviceIntent = new Intent(context, UpdateWidgetService.class);
    serviceIntent.setAction(UpdateWidgetService.UPDATE);
    PendingIntent servicePendingIntent = PendingIntent.getService(context,
            0, serviceIntent, 0);
    // send Service intent
    try {
        servicePendingIntent.send();
    } catch (CanceledException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    // start alarm manager for all widget instances
    for (int appWidgetId : appWidgetIds) {
        setAlarm(context, appWidgetId, UPDATE_RATE);
    }
    super.onUpdate(context, appWidgetManager, appWidgetIds);
}

@Override
public void onReceive(Context context, Intent intent) {

    if (WIDGET_UPDATE.equals(intent.getAction())) {
        Toast.makeText(context, "onReceiver()", Toast.LENGTH_LONG).show();
    }

    super.onReceive(context, intent);

}

@Override
public void onDisabled(Context context) {
    context.stopService(new Intent(context, UpdateWidgetService.class));
    super.onDisabled(context);
}

public static void setAlarm(Context context, int appWidgetId, int updateRate) {
    Intent serviceIntent = new Intent(context, UpdateWidgetService.class);
    serviceIntent.setAction(UpdateWidgetService.UPDATE);
    PendingIntent servicePendingIntent = PendingIntent.getService(context,
            0, serviceIntent, 0);

    AlarmManager alarms = (AlarmManager) context
            .getSystemService(Context.ALARM_SERVICE);
    if (updateRate >= 0) {
        alarms.setRepeating(AlarmManager.ELAPSED_REALTIME,
                SystemClock.elapsedRealtime(), updateRate, servicePendingIntent);
    } else {
        // on a negative updateRate stop the refreshing
        alarms.cancel(servicePendingIntent);
    }
} 
```

}

服务：

```
public class UpdateWidgetService extends Service {
public static String UPDATE = "update";
private SessionData sessionData = SessionData.getInstance();
private BaseCtrl baseCtrl = BaseCtrl.getInstance();
private Context ctx;

@Override
public void onStart(Intent intent, int startId) {
    ctx = getApplicationContext();
    int appWidgetId = intent.getExtras().getInt(
            AppWidgetManager.EXTRA_APPWIDGET_ID);

    // TODO update information and display      

    AppWidgetManager appWidgetManger = AppWidgetManager.getInstance(ctx);
    int[] allWidgetIds = intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);

    ComponentName currWidget = new ComponentName(ctx, WidgetCtrl.class);

    RemoteViews remoteViews = new RemoteViews(ctx.getPackageName(), R.layout.widget);
    remoteViews.setTextViewText(R.id.widget_text, "test");

    final Intent updateIntent = new Intent(ctx, UpdateWidgetService.class);
    final PendingIntent pending = PendingIntent.getService(ctx, 0, updateIntent, 0);
    final AlarmManager alarm = (AlarmManager) ctx.getSystemService(Context.ALARM_SERVICE);
    alarm.cancel(pending);
    long interval = 60;
    alarm.setRepeating(AlarmManager.ELAPSED_REALTIME, SystemClock.elapsedRealtime(),interval, pending);

    appWidgetManger.updateAppWidget(appWidgetId, remoteViews);
    super.onStart(intent, startId);
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
} 
```

}

我遇到的问题是服务似乎永远不会被调用。我在服务的 onStart 方法中设置了断点，但我从来没有到达那里。有人可以帮忙吗？

如果您为我的程序建议不同的结构，也请告诉我。

**编辑**：我忘了添加清单代码。在应用程序标签之间，我在小部件的接收器对象后面有这段代码：

```
<service android:name=".UpdateWidgetService"></service> 
```

这个对吗？

我真的希望有人能给我一个解决方案或提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:14:32.820

OK，终于找到问题了：

在清单中，我必须添加服务的完整路径。

所以我不得不将.UpdateWidgetService 更改为com.example.UpdateWidgetService。

我希望这可以帮助其他人节省几个小时的搜索时间；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-19T20:20:40.577

我忘了在清单中添加服务。经过几个小时处理我的 appwidget 代码。最后，我发现了我的小错误。以下清单添加对我在远程视图中列出数据有很大帮助。

> ```
>  <service
>         android:name="np.com.bpb.capstoneroomtest2.widget.JobWidgetRemoteViewsService"
>         android:exported="false"
>         android:permission="android.permission.BIND_REMOTEVIEWS" >
>     </service>
> </application><!--Just before closing this tag, add your service--> 
> ```
> 
> 希望，我的经验对你有帮助。

# javascript - 在 jsp 页面正文中，onload 函数在 jquery 对话框加载中不起作用

> ID：13838040
> 
> 赞同：1
> 
> 时间：2012-12-12T10:47:31.467
> 
> 标签：javascript, jquery, html

我在 jQuery 对话框和 jsp 页面中工作，我的问题是当我从父窗口单击按钮时，在子窗口中加载 body onload 功能后，jQuery 对话框将在那里打开，但在子窗口中，body onload 功能仅 jQuery 对话框 ui 不起作用仅显示有人帮助我吗？

**父窗口是：**

```
<a id="composeeditors" href="javascript:void(0)" onClick="callRequirementParsingInfo();">Send</a> 
```

**jQuery代码是：**

```
$('#composeeditors').load("/jsp/parsing.jsp?",function(){
    $('#compose_editor').dialog({
        autoOpen: false,
        resizable: false,
        position: ['center',150]
    });
}); 
```

**子窗口是：**

```
<div id="compose_editor" data-options="title:'Requirement Parsing Informations'" style="padding:0px;width:700px; height:600px; overflow:auto;">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:59:04.223

尝试改用 open 或 create 事件：

[http://api.jqueryui.com/dialog/#event-open](http://api.jqueryui.com/dialog/#event-open)

# iphone - 如何在Objective-C中将顶点数组作为参数传递？

> ID：13838042
> 
> 赞同：-7
> 
> 时间：2012-12-12T10:47:43.160
> 
> 标签：iphone, objective-c, ios, opengl-es

我有下面的代码，我想将一个数组 meshVerts 传递给下面的方法：

```
- (GLuint)make:(float *)cubeVerts {

    GLuint _vertexArray;
    GLuint _vertexBuffer;

    glEnable(GL_DEPTH_TEST);

    glGenVertexArraysOES(1, &_vertexArray);
    glBindVertexArrayOES(_vertexArray);

    glGenBuffers(1, &_vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(cubeVerts), cubeVerts, GL_STATIC_DRAW);

} 
```

但是，这似乎对我不起作用？有什么我做错了吗？

![在此处输入图像描述](../Images/db46dbc5893e0060b524f73c4ebde4eb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:54:00.053

对不起，我在帖子中的错字......这是我设法修复它的方法：

```
- (GLuint)make:(float[])meshVerts withSizeOfMeshVerts:(int)sizeMeshVerts
{
        GLuint _vertexArray;
        GLuint _vertexBuffer;

        glEnable(GL_DEPTH_TEST);

        glGenVertexArraysOES(1, &_vertexArray);
        glBindVertexArrayOES(_vertexArray);

        glGenBuffers(1, &_vertexBuffer);
        glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
        glBufferData(GL_ARRAY_BUFFER, sizeMeshVerts, meshVerts, GL_STATIC_DRAW);
} 
```

# javascript - API YouTube - 在 YouTube 播放列表中添加多个视频

> ID：13838047
> 
> 赞同：5
> 
> 时间：2012-12-12T10:47:51.293
> 
> 标签：javascript, youtube-api

我想使用 API v3 在 YouTube 播放列表中添加多个视频，但只添加了其中一些视频……看来问题是响应中随机的asset.position。

也许有两个请求延迟？我怎样才能解决这个问题？

**重现问题的代码：**

```
var apiKey = '***';
var youtubeClientId = '***';
var youtubeScopes = [
        'https://www.googleapis.com/auth/youtube',
        'https://www.googleapis.com/auth/youtube.upload',
        'https://www.googleapis.com/auth/youtubepartner'
    ];
var playlistId = '***';

function init() {
    gapi.client.setApiKey(apiKey);
    window.setTimeout(checkAuth, 1);
}

function checkAuth() {
    gapi.auth.authorize({client_id: youtubeClientId, scope: youtubeScopes, immediate: true}, handleAuthResult);
}

function handleAuthResult(authResult) {
    var authorizeButton = document.getElementById('importYoutube');
    if (authResult && !authResult.error) {
        gapi.client.load('youtube', 'v3', showSearch);
    }
}

function showSearch() {
    document.getElementById('search').style.display = '';
}

function singleCallback(resp, rawResp) {
    console && console.log(resp);
}

function writeResponse(resp) {
    var infoDiv = document.getElementById('info');
    var result = resp.result;
    if (!result.items) {
        return;
    }

    var responseTitle = document.createElement('strong');
    responseTitle.innerHTML = 'Profiles results for ' + resp.id + ':';
    infoDiv.appendChild(responseTitle);

    for (var i = 0; i < result.items.length ; i++) {
        var profileResult = result.items[i];
        var profileInfo = document.createElement('P');

        if (profileResult.image && profileResult.image.url) {
            var profilePic = document.createElement('IMG');
            profilePic.src = resizeImage(profileResult.image.url);
            profileInfo.appendChild(profilePic);
        }

        var profileLink = document.createElement('A');
        profileLink.style.marginLeft = '5px';
        profileLink.href = profileResult.url;
        profileLink.innerHTML = profileResult.displayName;
        profileInfo.appendChild(profileLink);

        infoDiv.appendChild(profileInfo);
    }
}

function batchCallback(resp, rawResp) {
    console.log(resp);
    var infoDiv = document.getElementById('info');
    infoDiv.innerHTML = '';
    for (var id in resp) {
        writeResponse(resp[id]);
    }
}

function makeRequest() {

    addToPlaylist('lRGoIiKXl8s');
    addToPlaylist('xvtNS6hbVy4');
    addToPlaylist('9I9Ar6upx34');
    addToPlaylist('Hr2Bc5qMhE4');
    addToPlaylist('ZaI2IlHwmgQ');
    addToPlaylist('fyMhvkC3A84');
    addToPlaylist('nv44r3q6zgo');
}

function addToPlaylist(videoId, startPos, endPos) {

    console.log('addToPlaylist videoId' + videoId);
    console.log('addToPlaylist playlistId' + playlistId);

    gapi.client.load('youtube', 'v3', function() {

        var details = {
            videoId: videoId,
            kind: 'youtube#video'
        }

        if (startPos != undefined) {
            details['startAt'] = startPos;
        }

        if (endPos != undefined) {
            details['endAt'] = endPos;
        }

        var request = gapi.client.youtube.playlistItems.insert({
            part: 'snippet',
            resource: {
                snippet: {
                    playlistId: playlistId,
                    resourceId: details
                }
            }
        });

        request.execute(function(response) {
            console.log(JSON.stringify(response.result));
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-24T23:32:07.600

我也遇到了同样的问题（请参阅*[不能将多个视频插入播放列表 - YouTube API v3](https://stackoverflow.com/questions/28654637/can-not-insert-multiple-videos-into-a-playlist-youtube-api-v3)*）。

您必须在每次调用 addToPlaylist() 后创建一个延迟。

# kendo-ui - kendo ui 网格编辑/导航

> ID：13838051
> 
> 赞同：2
> 
> 时间：2012-12-12T10:48:08.903
> 
> 标签：kendo-ui

剑道 UI 网格上是否有诸如“编辑模式”与“导航模式”之类的东西？通常预期的行为是，一旦开始编辑某个单元格，导航（例如向上和向下箭头键等）被禁用，并且所有此类键操作都被编辑组件接收。

我正在使用自定义组件对单元格进行编辑（内容可编辑的 div），我想知道在进行编辑时是否需要执行任何操作来禁用导航。

# hibernate - Hibernate 4.0 逻辑表达式或条件通过所有类的属性

> ID：13838055
> 
> 赞同：0
> 
> 时间：2012-12-12T10:48:12.897
> 
> 标签：hibernate

我有一个项目，我必须在数据库上实现一种惰性搜索。

我想做的是使用 org.hibernate.criterion.Example 但对每个属性使用“或”条件。

例如，假设我有一个像下面这样的课程

```
public class Cat{
   private String name;
   private String breed;
   private Date birthDay;
/*getter and setter omitted*/
} 
```

我为所有三个字段设置了一些值

```
Cat cat2Find = new Cat();
cat2Find.setName("Nabi");
cat2Find.setBreed("That hairless Egyptian cat");
cat2Find.setBirthDay( someDate );    //5th May 2005 for example 
```

我想找一只名叫“Nabi”或品种是“无毛埃及猫”或生日是 2005 年 5 月 5 日的猫

我尝试使用 org.hibernate.criterion.Example 但 show_sql 向我展示了它对每个字段都使用了 And 条件。我还尝试将 org.hibernate.criterion.Disjunction 与 LogicalExpression 一起使用，但遍历所有字段非常麻烦。

我想知道是否有一些类可以像标准一样工作。示例但每个字段都有条件，或者我可以选择“与”或“或”。

感谢您的时间 ： ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:36:56.797

```
 // Use disjunction() or conjunction() if you need more than 2 expressions
Disjunction aOrBOrC = Restrictions.disjunction(); // A or B or C
aOrBOrC.add(Restrictions.eq("b", "a"));
aOrBOrC.add(Restrictions.eq("b", "b"));
aOrBOrC.add(Restrictions.eq("b", "c"));

// Use Restrictions.and() / or() if you only have 2 expressions
crit.add(Restrictions.and(Restrictions.eq("a", "abc"), aOrBOrC)); 
```

这样你就可以用“AND”/“OR”进行简单的查询。

# jquery-mobile - jQueryMobile：未捕获的 TypeError：无法调用未定义的方法“_trigger”

> ID：13838056
> 
> 赞同：7
> 
> 时间：2012-12-12T10:48:13.127
> 
> 标签：jquery-mobile, backbone.js

我正在使用带有backbone.js 的jQuery Mobile。当我加载主页时，出现以下错误：

```
Uncaught TypeError: Cannot call method '_trigger' of undefined 
```

这就是我加载主页的方法。在 routes.js 中：

```
routes:{
    '':'home',
}
home:function () {
    new HomeView();
    this.changePage(new HomeContentView());
},
changePage:function (page) {
    $(page.el).attr('data-role', 'page');
    console.log($(page.el));
    page.render();
    $('body').append($(page.el));
    var transition = $.mobile.defaultPageTransition;
    if (this.firstPage) {
        transition = 'none';
        this.firstPage = false;
    }
    $.mobile.changePage($(page.el), {changeHash:false, transition: transition});
} 
```

在 view.js 中

```
window.HomeView = Backbone.View.extend({
template : Handlebars.compile($('#home').html()),
render : function (eventname) {
    this.$el.html(this.template());
    this.header = new HeaderElement();
    this.$el.find('div.header_element').append(this.header.$el);
    this.footer = new FooterElement();
    this.$el.find('div.footer_element').append(this.footer.$el);
    return this;
}
});

window.HomeContentView = Backbone.View.extend({
    initialize: function(options) {
        this.collection = new Fan();
        this.template = Handlebars.compile(tpl.get('elements/home'));
        //~ console.log(tpl.get('home'));
        this.collection.on("reset",this.render,this);
        this.init = true;

        if (this.init) {
            upLimit = 1;
            this.collection.index();
            this.init = false;
        }
    },
    el: '#home_content_view',
    render : function (eventName) {
        var self = this;
        var js = (self.collection.toJSON())[0];
        console.log(js);

        $('#home_content_view').html(self.template(js));
        $('#home_content_view').trigger("create");
    }
}); 
```

在 home.html

```
<div data-role="content">
hi
</div> 
```

错误堆栈跟踪：

```
 Uncaught TypeError: Cannot call method '_trigger' of undefined jquery.mobile-1.1.1.js:2843
transitionPages jquery.mobile-1.1.1.js:2843
$.mobile.changePage jquery.mobile-1.1.1.js:3465
Backbone.Router.extend.changePage routes.js:153
Backbone.Router.extend.home routes.js:37
f.extend.route backbone-min.js:27
f.extend.loadUrl backbone-min.js:32
b.some.b.any underscore-min.js:14
f.extend.loadUrl backbone-min.js:32
f.extend.start backbone-min.js:31
(anonymous function) routes.js:162
$.ajax.success view.js:29
v.Callbacks.l jquery-1.8.3.min.js:2
v.Callbacks.c.fireWith jquery-1.8.3.min.js:2
T jquery-1.8.3.min.js:2
v.support.ajax.v.ajaxTransport.send.r jquery-1.8.3.min.js:2 
```

其他页面正确呈现。只有主页给我带来了麻烦。我哪里错了？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T13:37:36.460

我认为这个错误可能是因为 jQuery Mobile 需要一个元素来过渡到`changePage`. 这是一个 hack，但是在你的 index.html 中放置一个属性设置为“page”的空应该可以解决`div`它：`data-role`

```
<body>
    <!-- jQM seems to need a page to exist in the document before it transitions to the first dynamically generated one -->
    <div data-role="page"></div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:53:00.193

我发现问题的根源是 jquery-mobile 版本 1.3.0。当我回退到 JSM 1.2.0 或 1.2.1 时，“Uncaught TypeError: Cannot call method 'trigger' of undefined”问题就消失了。

顺便说一句，我没有使用 Backbone，但我遇到了问题。

# xml - 在 Windows phone 7 中从 XML 读取 JSON 并绑定到 ListBox

> ID：13838057
> 
> 赞同：-2
> 
> 时间：2012-12-12T10:48:13.570
> 
> 标签：xml, windows, windows-phone-7

我想从 XML 响应中获取 JSON 数据。实际上 Web 服务正在返回响应如下：

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">
[
    {
        "id": 1,
        "name": "paresh",
    },
    {
        "id": 2,
        "name": "jacob",
    },
    {
        "id": 3,
        "name": "color",
    },
    {
        "id": 4,
        "name": "Adil color",
    }
]</string> 
```

我已经参考了一些文章。如果响应只是 XML，那么我可以实现如下：

```
 MyListBox.ItemsSource = from tweet in xmlTweets.Descendants("student")
                                          select new StudentItem
                                          {
                                              ID = tweet.Element("id").Value,
                                              Name = tweet.Element("name").Value,
                                          }; 
```

但这里我的问题是获取内部的 JSON，并在 ListBox 中显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:40:34.600

您可以通过使用 ScriptMethod 属性装饰 webmethod 来定义 web 方法响应格式。代码就是这样。

```
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
```

一旦你得到 json 格式字符串的代码，你就可以用 json 解析它。

如果您有任何困惑，请告诉我。

## 更新：

所以你必须从[子字符串](http://www.dotnetperls.com/substring)方法中`<string>`手动删除标签。这是你的代码。

```
string Header = "<string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\">";
        string str = "<string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\">[{\"id\": 1,\"name\": \"paresh\"}]</string>";
        string TempStr = str.Remove(0, Header.Length);
        string FinalStr = TempStr.Substring(0, TempStr.Length - 9); 
```

FinalStr 是您的 json 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:04:06.387

您可能想使用 twitter 用 Scala 编写的 finagle 将 xml 转换为 json，方法如下：

```
 val xmlResponse = <string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">
     [
         {
            "id": 1,
            "name": "paresh",
          },
          {
             "id": 2,
             "name": "jacob",
           },
           {
              "id": 3,
              "name": "color",
           },
          {
                "id": 4,
                "name": "james bond",
           }
     ]</string>

  val properties = (xmlResponse \\ "string")    //parse the xml

  val responseContent = xmlResponse.toSeq.toJson.toString() 
```

您可以通过以下方式检查：

```
 println(responseContent) 
```

在选择 finagle 之前，请尝试 scala 中的一个简单示例，然后您可能想探索 finagle 库。它在处理来自众多服务器（电子邮件、asp.net、SQL、短信等）的不同类型的响应时很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:04:53.907

我将使用您发布的初始 XML，然后使用[JSON.Net](http://james.newtonking.com/projects/json-net.aspx)之类的库来操作 XML，提取 JSON 并将其存储在一个对象中，然后再将其与您的 ListBox 绑定。

这是 JSON.Net 上的几个关键点（取自网站）

*   灵活的 JSON 序列化器，用于在 .NET 对象和 JSON 之间进行转换
*   LINQ to JSON 用于手动读写 JSON
*   高性能，比 .NET 的内置 JSON 序列化程序更快
*   编写缩进、易读的 JSON
*   将 JSON 与 XML 相互转换
*   支持 .NET 2、.NET 3.5、.NET 4、Silverlight 和 Windows Phone

# mysql - 更正公式的 Sql 脚本

> ID：13838058
> 
> 赞同：2
> 
> 时间：2012-12-12T10:48:14.757
> 
> 标签：mysql, sql, database

谁能帮我为以下公式编写 SQL 脚本？

```
If DEP = 1
   If DROP 1
      PLV = 334.86 * exp(0.3541 * ACTIVE_DAYS) + 0.25 * DROP + 20 * DEP
   Else
      If DROP < 0
         PLV = DROP + 70 * ACTIVE_DAYS
      Else
         PLV = 0.25 * DROP + 70 * ACTIVE_DAYS 
```

我拥有的 SQL 脚本如下

```
 SELECT IF(dep=1, if(dep=1, (334.86 * exp(0.3541 * act_days)) + 
 (0.25 * 'drop') + (20 *   dep),
 if('drop'<0, 'drop' + (70 * act_days), (0.25 * 'drop') + (70 * act_days))),'0')
 as PLV 
```

但是上面的查询是不正确的，因为公式说的地方缺少一些东西

```
Else
PLV = 0.26 * DROP 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:17:57.003

这个怎么样：

```
CASE "DEP" 
  WHEN 1 
  THEN CASE  
         WHEN "DROP" = 1 THEN 334.86 * exp(0.3541 * "ACTIVE_DAYS") + 0.25 * "DROP" + 20 * "DEP"
         WHEN "DROP" < 0 THEN "DROP" + 70 * "ACTIVE_DAYS"
         ELSE 0.25 * "DROP" + 70 * "ACTIVE_DAYS"
         END
  END 
```

# javascript - Google V3 添加点击列表器

> ID：13838062
> 
> 赞同：1
> 
> 时间：2012-12-12T10:48:25.440
> 
> 标签：javascript, google-maps-api-3

我是 JavaScript 新手，我想从 Google V2 迁移到 Google v3，为此我只是更改了在 V2 中使用的方法，所有这些方法都在工作，但是当我尝试`addListener`从 V2 更改为 V3 时，我遇到了类似的问题在 v2 中，相同的侦听器用于将标记放在地图上，但是当涉及到 V3 时，我无法在地图上放置标记。这里我发布了 v2 代码和 V3 代码。请帮我解决这个问题。V2是：

```
GEvent.addListener(map, "click", function(marker, point) {
                console.debug('after Click map is '+map+' marker is '+marker+' point is '+point);
                if (marker) {
                        if(PolygonMarkers.length == 1){ //Only one marker in the array
                            map.removeOverlay(PolygonMarkers[0]);
                            map.removeOverlay(PolygonMarkers[0]);
                            PolygonMarkers = [];
                            if(Polygon){map.removeOverlay(Polygon)};
                        } else{                     /*More then one marker*/
                            var RemoveIndex = -1;
                            var Remove;
                            //Search for clicked Marker in PolygonMarkers Array
                            for(var m=0; m<PolygonMarkers.length; m++)
                            {
                                if(PolygonMarkers[m].getPoint().equals(marker.getPoint()))
                                {
                                    RemoveIndex = m; Remove = PolygonMarkers[m];
                                    break;
                                }
                            }
                            //Shift Array elements to left
                            for(var n=RemoveIndex; n<PolygonMarkers.length-1; n++)
                            {
                                PolygonMarkers[n] = PolygonMarkers[n+1];
                            }
                            PolygonMarkers.length = PolygonMarkers.length-1 //Decrease Array length by 1
                            map.removeOverlay(Remove); //Remove Marker
                            geofencedetails.drawPolygon(); //Redraw Polygon
                          }  

                        allMarkers = PolygonMarkers;

                  } else {
                    // Adds a new Polygon boundary marker 
                        var markerOptions = { icon: icon, draggable: true };
                        var marker = new GMarker(point, markerOptions);
                        PolygonMarkers.push(marker); //Add marker to PolygonMarkers array
                        map.addOverlay(marker); //Add marker on the map
                        GEvent.addListener(marker,'dragstart',function(){ //Add drag start event
                            marker.setImage(icon.image);
                            polygon_resizing = true;
                        });
                        GEvent.addListener(marker,'drag',function(){ 
                            geofencedetails.drawPolygon(); 
                            }); //Add drag event
                        GEvent.addListener(marker,'dragend',function(){   //Add drag end event
                            marker.setImage(icon.image);
                            polygon_resizing = false;
                            geofencedetails.drawPolygon();
                        });
                        geofencedetails.drawPolygon();

                        allMarkers = PolygonMarkers;
                 }
                });` 
```

V3 是

```
 google.maps.event.addListener(map, "click", function(marker, point) {
            if (marker) {
                //console.debug('marker '+marker.toSource());
                if(PolygonMarkers.length == 1){ //Only one marker in the array
                    map.removeOverlay(PolygonMarkers[0]);
                map.removeOverlay(PolygonMarkers[0]);
                PolygonMarkers = [];
                if(Polygon){
                    map.removeOverlay(Polygon)
                };
                }else {                     /*More then one marker*/
                    //console.debug('PolygonMarkers.length is '+PolygonMarkers.length);
                    var RemoveIndex = -1;
                    var Remove;
                    //Search for clicked Marker in PolygonMarkers Array
                    for(var m=0; m<PolygonMarkers.length; m++){
                        //console.debug('PolygonMarkers['+m+'] '+PolygonMarkers[m]);
                        if(PolygonMarkers[m].getPosition().equals(marker.getPosition())){
                            //console.debug('Both are equal ');
                            RemoveIndex = m;
                            Remove = PolygonMarkers[m];
                            break;
                        }
                    }
                    //Shift Array elements to left
                    for(var n=RemoveIndex; n<PolygonMarkers.length-1; n++){
                        PolygonMarkers[n] = PolygonMarkers[n+1];
                    }
                    PolygonMarkers.length = PolygonMarkers.length-1 //Decrease Array length by 1
                    /*map.removeOverlay(Remove); //Remove Marker*/
                    for (var i = 0; i < allMarkers.length; i++ ) {
                        allMarkers[i].setMap(null);
                    }
                    geofencedetails.drawPolygon(); //Redraw Polygon
                }  

                allMarkers = PolygonMarkers;

            } else {
                //console.debug('In else block');
                // Adds a new Polygon boundary marker 
                var markerOptions = { icon: icon, draggable: true };
                //console.debug('1');
                var marker = new GMarker(point, markerOptions);
                //console.debug('2');
                PolygonMarkers.push(marker); //Add marker to PolygonMarkers array
                //console.debug('3');
                map.addOverlay(marker); //Add marker on the map
                //console.debug('4');
                GEvent.addListener(marker,'dragstart',function(){ //Add drag start event
                    //console.debug('5');
                marker.setImage(icon.image);
                //console.debug('6');
                polygon_resizing = true;
                });
                GEvent.addListener(marker,'drag',function(){ 
                    geofencedetails.drawPolygon(); 
                }); //Add drag event
                GEvent.addListener(marker,'dragend',function(){   //Add drag end event
                    marker.setImage(icon.image);
                polygon_resizing = false;
                geofencedetails.drawPolygon();
                });
                geofencedetails.drawPolygon();

                allMarkers = PolygonMarkers;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:29:15.393

您需要将点击事件绑定到标记而不是地图。

```
google.maps.event.addListener(marker, "click", function(event) { .... } ); 
```

> Google Maps API V3 中的 UI 事件通常传递一个事件参数，事件侦听器可以访问该参数，记录事件发生时的 UI 状态。例如，一个 UI 的“点击”事件通常会传递一个包含 latLng 属性的 MouseEvent，该属性表示地图上被点击的位置。请注意，此行为是 UI 事件所独有的；MVC 状态更改不会在其事件中传递参数。

# javascript - 切换javascript函数

> ID：13838064
> 
> 赞同：2
> 
> 时间：2012-12-12T10:48:28.593
> 
> 标签：javascript, toggle, togglebutton

我正在使用这段代码来启动一个日志文件：

```
function startTail(str) {
if (str== "stop") {
stopTail();
} else {
t= setTimeout("getLog()",1000);
}
} 
```

这称为使用：

```
<button id="start" onclick="getLog('start');"> 
```

并停止使用：

```
<button id="stop" onclick="getLog('stop');"> 
```

无论如何我可以将其更改为一个可以切换开始/停止的按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:51:34.647

尝试：

```
<button id="start" value="Toggle Log" onclick="getLog('start', this);">

function startTail(str, element) {
    if (str == "stop") {
        stopTail();
        element.setAttribute('onclick', "getLog('start', this);");
    } else {
        element.setAttribute('onclick', "getLog('stop', this);");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:51:13.460

你可以试试这个

```
var flag = false;
function startTail() {
 if (flag)
  {
    stopTail();
    document.getElementById('start').value = "Start";
    flag = false;
  }
 else 
  {
    t= setTimeout("getLog()",1000);
    flag = true;
    document.getElementById('start').value = "Stop";
  }
}

<button id="start" onclick="startTail();" value="Start"> 
```

# c++ - 如何从 std::string 执行“getline”？

> ID：13838065
> 
> 赞同：19
> 
> 时间：2012-12-12T10:48:28.607
> 
> 标签：c++, string, stream, getline

我有个问题。我加载整个文件，然后通过它获取一些信息。然而，在地图格式中，信息可能有 0 或 20 条“线”。我需要知道如何通过 std::string 获取行。有一个函数（源流，目标字符串，十进制），但我需要（源字符串，目标字符串，十进制）。在 C++ 中无法在流中搜索（仅使用许多临时字符串并多次提取和插入，尚不清楚，我不想以那种凌乱的方式进行）。所以我想知道如何从 std::string 获取行。

比

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-12T10:50:50.627

您似乎想要[`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream)，它在标题中[`<sstream>`](http://www.cplusplus.com/reference/sstream/stringstream/)：

```
std::string some_string = "...";

std::istringstream iss(some_string);

std::string line;
while (std::getline(iss, line))
{
    // Do something with `line`
} 
```

# r - colname 未按预期显示

> ID：13838067
> 
> 赞同：2
> 
> 时间：2012-12-12T10:48:41.463
> 
> 标签：r

我有一个`y`包含 18 列的 data.frame：我通过添加的最后一个

```
y$ced <- Limt 
```

其中 Limt 是拟合长度的数值向量。现在发生这种情况：

```
colnames( y )    
...
[13] "is_term"   "is_cover"  "is_other"  "CoRI"      "Prot"      "ced"
                                                                  ^^^ 
```

最后一个 colname 完全符合预期。但：

```
head( y, 1 )
....
  is_price is_term is_cover is_other CoRI Prot Limt
1                                       0    0 5000
                                               ^^^^ 
```

对我来说，完全出乎意料的是，原始变量名称显示为标题。

`y$ced`提出了预期的数字，而

```
y$Limt
NULL 
```

可能这是应该的，但我没有找到解释。我将非常感谢提示在哪里查看为什么会这样，以及如何获得所需的信息`ced`。解决这个问题很容易，但我真的很想知道......

我试过`colnames( y )[18] <- "ced"`但这个死无济于事。

```
sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-pc-linux-gnu (64-bit) 
```

可重现的示例-不确定这是否足够好，但我想到的唯一一件事：

```
> x <- head( y$ced )
> x
   Limt
1  5000
2 10000
3 20000
4 40000
5  5000
6 10000
> dput( x )
structure(list(ced = structure(list(Limt = c(5000, 10000, 20000, 
40000, 5000, 10000)), .Names = "Limt", row.names = c(NA, 6L), class = "data.frame")), .Names = "ced", row.names = c(NA, 
6L), class = "data.frame") 
```

我看到`.Names`那里的东西，大概就是这样。我使用 RSQLite 从数据库文件中获取数据，是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:05:46.137

最有可能的是，您并没有像您所说的那样分配向量，而是分配了一个 data.frame：

```
y <- head(cars, 3)
Limt <- data.frame(Limt = 1:3)
y$ced <- Limt
names(y)
# [1] "speed" "dist"  "ced"
y
#       speed dist Limt
# 1     4    2    1
# 2     4   10    2
# 3     7    4    3

str(y)
# 'data.frame': 3 obs. of  3 variables:
#  $ speed: num  4 4 7
#  $ dist : num  2 10 4
#  $ ced  :'data.frame':    3 obs. of  1 variable:
#   ..$ Limt: int  1 2 3 
```

如果您分配一个向量，它将按预期工作：

```
y$ced <- Limt$Limt
y 
#   speed dist ced
# 1     4    2   1
# 2     4   10   2
# 3     7    4   3 
```

# ms-access - MS Access 2007 VBA DAO.Relation 对象神秘地未设置。这是怎么回事？

> ID：13838068
> 
> 赞同：2
> 
> 时间：2012-12-12T10:48:42.833
> 
> 标签：ms-access, vba, ms-access-2007

我得到了这个示例代码：

```
<!-- language: lang-vb -->

Option Compare Database

Private Function get_relation() As String
  get_relation = CurrentDb.Relations(1).name
  Debug.Print "Inside get_relation() relation name is " & get_relation
' Inside get_relation() relation name is Table1Table2
  Debug.Print "Again, the name is " & CurrentDb.Relations(get_relation).name
' Again, the name is Table1Table2
End Function

Public Sub test()
  Dim R As DAO.Relation, name As String
  name = get_relation()
  Debug.Print "Outside, the name is still " & name
' Outside, the name is still Table1Table2
  Set R = CurrentDb.Relations(name)
  Debug.Print "Again, the name is " & R.name
' At the line above it throws error!
End Sub 
```

输出是：

```
Inside get_relation() relation name is Table1Table2
Again, the name is Table1Table2
Outside, the name is still Table1Table2 
```

然后有一个错误：

```
Runtime error '3420':
Object invalid or no longer set. 
```

这是我在手表中看到的：

```
Watch :   : Name : "Table1Table2" : String : Playground.test
Watch : - : CurrentDb.Relations(Name) :  : Object/Relation : Playground.test
   : Attributes : <Object invalid or no longer set.> : Long : Playground.test
   : Fields : <Object invalid or no longer set.> : Fields : Playground.test
   : ForeignTable : <Object invalid or no longer set.> : String : Playground.test
   : Name : <Object invalid or no longer set.> : String : Playground.test
   : PartialReplica : <Object invalid or no longer set.> : Boolean : Playground.test
   : Properties : <Object invalid or no longer set.> : Properties : Playground.test
   : Table : <Object invalid or no longer set.> : String : Playground.test
Watch : - : R :  : Relation/Relation : Playground.test
   : Attributes : <Object invalid or no longer set.> : Long : Playground.test
   : Fields : <Object invalid or no longer set.> : Fields : Playground.test
   : ForeignTable : <Object invalid or no longer set.> : String : Playground.test
   : Name : <Object invalid or no longer set.> : String : Playground.test
   : PartialReplica : <Object invalid or no longer set.> : Boolean : Playground.test
   : Properties : <Object invalid or no longer set.> : Properties : Playground.test
   : Table : <Object invalid or no longer set.> : String : Playground.test 
```

因此，在某些时候，我的 DAO.Relation R 未设置（或者至少它的所有成员都未设置）。此外，CurrentDB.Relations("Table1Table2") 和 CurrentDB.Relations(1) 处于相同状态（所有成员均无效或未设置）。

同时通过手表检查的 CurrentDB.Relations 显示所有成员都已设置，并且一切似乎都正常。

我知道我的问题不是很具体，但我真的不明白。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:23:36.873

您正在使用 CurrentDb 而不是显式变量分配给 R，因此它超出了范围。而是使用：-

```
dim db as dao.database
set db = currentdb
...
dim r as dao.relation
set r = db.relations (rname) 
```

（“名称”不是变量的好名称，因为它是保留字。）

# python - 在 Python 中为数组分配范围

> ID：13838081
> 
> 赞同：2
> 
> 时间：2012-12-12T10:49:32.997
> 
> 标签：python, arrays, range

我知道为数组分配一些值如下：

```
arrayX = [20080711, 20080712, 20080713, 20080714] 
```

但我不知道如何快速将这些值作为范围分配给数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T10:50:52.303

在 Python 2.x 中：

```
arrayX = range(20080711, 20080714+1) 
```

在 Python 3.x 中：

```
arrayX = list(range(20080711, 20080714+1)) 
```

但是，如果您的整数代表日期（YYYYMMDD）之类的东西，那就更棘手了：

```
from datetime import datetime, timedelta
arrayX = []
dt = datetime(2008, 7, 11)
while dt <= datetime(2008, 7, 14):
    arrayX.append(int(dt.strftime('%Y%m%d')))
    dt += timedelta(days=1) 
```

它可以工作数月和数年。

# c# - 从c#中的最新子目录复制文件

> ID：13838086
> 
> 赞同：0
> 
> 时间：2012-12-12T10:49:50.103
> 
> 标签：c#

我已经为此苦苦挣扎了几天，无法弄清楚。

我需要从目录中最后创建的子目录复制文件，子目录还有一些子目录可以在我访问文件之前导航，这就是问题所在。

我希望我说清楚了，我将在下面给出一个目录示例，在此先感谢您的帮助。

```
C:\ProgramFiles\BuildOutput\mmh\LongTerm\**49**\release\MarketMessageHandler\Service\ 
```

以粗体突出显示的数字是我需要找到最新的子目录，并且在服务文件夹中是我需要从中复制文件的位置...

这是我尝试过的代码

字符串 sourceDir = @"\sttbedbsd001\BuildOutput\mmh\LongTerm\51\release\MarketMessageHandler\Service"; 字符串目标 = @"C:\Users\gwessels\Desktop\test\";

```
 string[] sDirFiles = Directory.GetFiles(sourceDir, "*", SearchOption.TopDirectoryOnly);

            string targetDir;

            if (sDirFiles.Length > 0)
            {
                foreach (string file in sDirFiles)
                {
                    string[] splitFile = file.Split('\\');
                    string copyFile = Path.GetFileName(file);
                    string source = sourceDir + "\\" + copyFile;

                    targetDir = target + copyFile;

                    try
                    {
                        if (File.Exists(targetDir))
                        {
                            File.Delete(targetDir);
                            File.Copy(source, targetDir);
                        }

                        else
                        {
                            File.Copy(source, targetDir);
                        }
                    }
                    catch (Exception e)
                    {
                        Console.WriteLine(e);
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:59:38.500

假设该`LongTerm`目录是已知的，因为它存储在某处（fe Application-Settings）：

```
string longTermDirectory = Properties.Settings.Default.LongTermDirectory;
DirectoryInfo dir = new DirectoryInfo(longTermDirectory);
dir.Create(); // does nothing if it already exists
int Number = int.MinValue;
DirectoryInfo latestFolder = dir.EnumerateDirectories("*.*", SearchOption.AllDirectories)
    .Where(d => int.TryParse(d.Name, out Number))
    .Select(Directory => new { Directory, Number })
    .OrderByDescending(x => x.Number)
    .Select(x => x.Directory)
    .First(); 
```

`Directory.EnumerateDirectories`with`SearchOption.AllDirectories`递归地枚举所有目录。`Enumerable.OrderByDescending`使用目录名称的编号将按数字和最高的顺序排列它们（因此 50 在 49 之前和 100 在 99 之前）。

# c# - 如何为 HttpWebRequest 定义更激进的超时？

> ID：13838088
> 
> 赞同：10
> 
> 时间：2012-12-12T10:49:54.940
> 
> 标签：c#, .net, httpwebrequest, async-await, portable-class-library

在可移植类库中，我有以下将数据发布到特定 URL 的方法。该方法效果很好。但是我想指定一个更激进的超时（默认为 100 秒）。

考虑到可移植类库中的 HttpWebRequest 类上没有 Timeout 属性，如果调用时间超过几秒钟，如何确保调用被放弃？

```
public async Task<HttpResponse> PostAsync(Uri uri, string data)
{
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
    request.Method = "POST";
    request.ContentType = "application/x-www-form-urlencoded";

    using (Stream requestStream = await request.GetRequestStreamAsync())
    {
        byte[] postBytes = Encoding.UTF8.GetBytes(data);
        requestStream.Write(postBytes, 0, postBytes.Length);
    }

    HttpWebResponse response = (HttpWebResponse)await request.GetResponseAsync();
    return new HttpResponse(response.StatusCode, await new StreamReader(response.GetResponseStream()).ReadToEndAsync());
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-12T11:49:22.727

如果超时，下面的代码将返回 HttpWebResponse 或 null。

```
HttpWebResponse response = await TaskWithTimeout(request.GetResponseAsync(), 100);
if(response != null)
{
  ....
} 
```

* * *

```
Task<HttpWebResponse> TaskWithTimeout(Task<WebResponse> task, int duration)
{
    return Task.Factory.StartNew(() =>
    {
        bool b = task.Wait(duration);
        if (b) return (HttpWebResponse)task.Result;
        return null;
    });
} 
```

**- 编辑 -**

创建一个扩展方法会更好

```
public static class SOExtensions
{
    public static Task<T> WithTimeout<T>(this Task<T> task, int duration)
    {
        return Task.Factory.StartNew(() =>
        {
            bool b = task.Wait(duration);
            if (b) return task.Result;
            return default(T);
        });
    }
} 
```

用法是：

```
var response = (HttpWebResponse)await request.GetResponseAsync().WithTimeout(1000); 
```

**--编辑2--**

另一种方法

```
public async static Task<T> WithTimeout<T>(this Task<T> task, int duration)
{
    var retTask = await Task.WhenAny(task, Task.Delay(duration))
                            .ConfigureAwait(false);

    if (retTask is Task<T>) return task.Result;
    return default(T);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:05:52.837

```
// Abort the request if the timer fires. 
private static void TimeoutCallback(object state, bool timedOut) { 
    if (timedOut) {
        HttpWebRequest request = state as HttpWebRequest;
            if (request != null) {
              request.Abort();
        }
    }
} 
```

是的，客户端应用程序有责任实现自己的超时机制。您可以从上面的代码中执行此操作，该代码设置超时并使用 ThreadPool.RegisterWaitForSingleObject 方法。有关完整详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.abort.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.abort.aspx)。本质上，它会从 GetResponse、BeginGetResponse、EndGetResponse、GetRequestStream、BeginGetRequestStream 或 EndGetRequestStream 中止。

# java - 文件选择器对话框未关闭

> ID：13838089
> 
> 赞同：2
> 
> 时间：2012-12-12T10:50:06.097
> 
> 标签：java, javafx-2, javafx

这是我的文件选择器对话框操作代码...

```
FileChooser fc = new FileChooser();
fc.setTitle("Pointel File");
File file1 = fc.showOpenDialog(MainFrame.objComponent.getPrimaryStage());

int i =0;
while(i < 90000){
System.out.println(i);
i++;
} 
```

在上面的代码中，对话框一直等到“while”循环完成执行，而不是在我们单击“打开”按钮时自行关闭。

我是否遗漏了代码中的某些内容，当我们单击“打开”或“取消”按钮时会关闭对话框？
谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:04:54.547

您在 UI 的[应用程序线程](http://docs.oracle.com/javafx/2/api/javafx/application/Application.html)上运行了很长时间，这不应该这样做，否则 UI 将变得无响应。

*而是在应用程序线程*上创建[`Task`](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)或`Thread`执行长时间运行的进程。

 *有关JavaFX 中的并发的更多信息，请参阅[此链接](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)

这是一个简短的示例`Task`：

```
import javafx.concurrent.Task;

....

FileChooser fc = new FileChooser();
fc.setTitle("Pointel File");
File file1 = fc.showOpenDialog(MainFrame.objComponent.getPrimaryStage());

    final Task task = new Task<Void>() {
        @Override
        protected Void call() throws Exception {
            int i = 0;
            while (i < 90000) {
                System.out.println(i);
                i++;
            }
            return null;
        }
    };
    Thread th = new Thread(task);
    th.setDaemon(true);
    th.start(); 
```

还请记住，如果您修改任何 JavaFX UI 组件，则将代码包装在[`Platform.runLater(Runnable r)`](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)块中，如下所示：

```
import javafx.concurrent.Task;

....

final Task task = new Task<Void>() {
    @Override
    protected Void call() throws Exception {
        int i = 0;
        while (i < 90000) {
            System.out.println(i);
            i++;
        }
    Platform.runLater(new Runnable() {//updates ui on application thread
            @Override
            public void run() {
                //put any updates to ui here dont run the long running code in this block or the same will happen as doing a long running task on app thread
            }
        });
        return null;
    }
};
Thread th = new Thread(task);
th.setDaemon(true);
th.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:25:24.467

Never do the GUI and the computational tasks on the same thread. Your UI should be running on one thread and your computational tasks should be on other threads. UI becomes unresponsive if they both are running on the same thread.

Firstly read about,

[Threads](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

[The Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)

Using the `Event Dispatch Thread`, you can dispatch your UI threads. Look at the [answer](https://stackoverflow.com/questions/3636591/where-is-the-event-dispatch-thread-called) given by @Erick Robertson related to `EDT`.

Many posts available in SO about the above stated topics.*

# java - Java多态的困惑

> ID：13838097
> 
> 赞同：0
> 
> 时间：2012-12-12T10:50:35.893
> 
> 标签：java

我对java多态性感到困惑。在动态方法绑定中，jvm 在运行时决定必须调用哪个类方法。假设我有 A、B 和 C 三个班级。

```
class A{
    int get(){
        return 10;
    }

    int getParent(){
        return 10;
    }
}

class B extends A
{
    int get(){
        return 20;
    }
}

public class C
{
    public static void main(String args[])
    {
        A a = new A();
        A a1 = new B();
        System.out.println(a.get());/////////////////////////LINE1    
        System.out.println(a1.get  ());////////////////////////LINE2    
        System.out.println(a.getParent());////////////////////////LINE3
    }
} 
```

我在编译时和运行时绑定的第 1 行和第 3 行有混淆。在第 3 行中，它是 a.getParent()，并且此方法仅在父类中，因此它必须在运行时决定。

在第 1 行中，引用和对象都来自同一个类，所以它必须再次决定。

请向我发送运行时和编译时绑定如何工作的任何好的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:04:21.567

```
 class A
    {
      public doIt( )
      {
        //this does something
      }
    }

    class B extends A
    {
      public doIt( )
      {
        //this does something
      }
    }

    class C extends B
    {
      public doIt( )
      {
        //this does something
      }

    }        

    public static void main(String[] args) {
          A x = new B( );

          x.doIt( );

    } 
```

引起很多混乱的语句是“A x = new B();” 陈述。尽管变量 x 是 A 类型的对象，但它被实例化为 B 类的对象——因为“= new B( );” 声明的一部分。Java 运行时基本上会看这个语句并说“即使 x 被明确声明为类型 A，它也被实例化为 B 类的对象，所以我将运行 B 类中定义的 doIt() 方法的版本。”

由对象 x 执行的 doIt() 方法的版本是 B 类中的版本，因为在 Java 中称为**动态绑定**——上面的代码可以被认为是动态绑定的一个示例。动态绑定基本上意味着实际调用的方法实现是在运行时确定的，而不是在编译时确定的。这就是为什么它被称为**动态绑定**——因为将要运行的方法是在运行时选择的。动态绑定也称为**后期绑定。**

在**早期绑定**中，数据和方法在编译时绑定，而在后期绑定中，数据和方法将在运行时绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:58:43.143

B 类**覆盖**get() 方法。**因此，每当您在B**类型的对象上调用 get() 时，它将使用被覆盖的方法。

因为 B 没有覆盖 getparent()，所以当你在 B 类上调用它时，父 getParent() 将被调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:02:55.483

A 类为 Object 实例`a`提供了一个虚方法表，其中包含 A.get 和 A.getParent。

B 类为 Object 实例`a1`提供了一个虚拟方法表，该表首先取自 A 类，并进行了扩展（此处没有可扩展的内容）。该`get`方法被 B.get 覆盖。

a1.get，即使是 A，也会调用 B.get。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:09:28.470

这里的多态性仅适用于 line2 的情况。没有适用于 line1 和 line3 的多态性概念。

# asp.net - 如何为所有下拉菜单应用焦点 css？

> ID：13838099
> 
> 赞同：0
> 
> 时间：2012-12-12T10:50:47.250
> 
> 标签：asp.net, css

我对所有文本框都有以下课程

```
textarea:focus,input[type="text"]:focus,input[type="password"]:focus
{
border-color:#BBBBBB;
box-shadow: inset 0 0 2px #888;
border-color:#3C8CDD;
color: #063E61;
color: rgb(171, 171, 171);
color:#063E61;
border-color: #3C8CDD;
font-family:Verdana;
font-size: 10px;
font-size:normal;
} 
```

我可以将相同的 CSS 类用于类型下拉列表吗？

```
 <asp:DropDownList ID="EnqDDL" runat="server" TabIndex="1" AutoPostBack="true" CssClass="dropdown" OnSelectedIndexChanged="EnqDDL_SelectedIndexChanged" ValidationGroup="Save_Group">
                                                        </asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:11:01.180

an在 HTML`asp:DropDownList`中呈现为 a 。`select`

因此，要在所有下拉列表中实现焦点 CSS，请将以下内容添加到您的 CSS 规则中：

```
select:focus{} 
```

所以你的代码变成了这样：

```
textarea:focus,input[type="text"]:focus,input[type="password"]:focus,select:focus
{
    border-color:#BBBBBB;
    box-shadow: inset 0 0 2px #888;
    border-color:#3C8CDD;
    color: #063E61;
    color: rgb(171, 171, 171);
    color:#063E61;
    border-color: #3C8CDD;
    font-family:Verdana;
    font-size: 10px;
    font-size:normal;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:11:15.610

```
​select:focus {
    background-color:red;
}​ 
```

将用于下拉列表。

**示例** [http://jsfiddle.net/c8wjL/](http://jsfiddle.net/c8wjL/)

# php - 表单输入字段的动态扩展

> ID：13838101
> 
> 赞同：1
> 
> 时间：2012-12-12T10:50:50.980
> 
> 标签：php, javascript, html, mysql, forms

我一直在为工作开发基于 Web 的设备管理系统，但在向用户展示根据需要添加更多字段的选项时遇到了问题。例如，某些设备会说 4x 驱动器、6x ram 模块等。到目前为止，我的选择是……

*   对 MySQL 数据库进行硬编码，使其具有 X 数量的每种类型的字段。4 个磁盘驱动器字段、6 个 ram 模块字段等。但是，大多数机器的数量会少于此数量，而有些机器可能会更多。

*   为可能具有多个
    值的每种类型创建一个表。比如一个device_drives表，device_memory表等。

会有更有效（和动态）的方法来做到这一点吗？我考虑过的两种方法似乎都很愚蠢。这是一个视觉示例，红色箭头表示用户可以单击以添加另一个该类型的图标。

![在此处输入图像描述](../Images/de826ec7c8b2cf64cdf86b33d6246402.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:13:33.040

为什么听起来很傻？假设您在数据库中有一亿个项目。每次添加新的字段类型时，您会更改该表吗？这听起来很聪明吗？

我会建议另一种解决方案。您可以为字段类型创建一个表，为字段值创建另一个表。通过这种方式，您可以将配置数据与设备数据分开，这可能是个好主意。无论设备有多少字段类型，每个字段有多少值，或者在添加字段类型或值的情况下，您仍然可以安全地使用此架构。

至于字段的可视化创建，只需在右侧添加“+”即可，可点击并在当前字段下创建另一个类似的字段。

# iphone - 将带有文本的滚动视图对象添加到 UIViewController Stortboard 应用程序

> ID：13838102
> 
> 赞同：0
> 
> 时间：2012-12-12T10:50:50.807
> 
> 标签：iphone, objective-c, ios, storyboard, scrollview

我是 iPhone 应用程序开发的新手，只是开发一个应用程序。

我有带有标签的故事板应用程序。一个标签与视图控制器相关联。

现在，我想向 UI 视图控制器添加一个滚动视图对象；而且，滚动视图对象应该在其中显示一些文本。在滚动视图的顶部，我想显示一个图像，这是固定的。只有文本会滚动。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:05:02.957

从库中拖动一个`UIImageView`实例并将其添加到您的控制器 ![图像视图](../Images/9ac798e125f51bf5937ecec82fea1655.png)

将图像视图放置在控制器视图中所需的位置

![在此处输入图像描述](../Images/c74383a8337109d98b395000269e452d.png)

选择图像视图并在属性检查器中设置其图像

![在此处输入图像描述](../Images/546043605f3e9cafcecdcf0a89aca1a8.png)

从库中拖动一个`UITextView`实例并将其添加到您的控制器

![在此处输入图像描述](../Images/7d6489d708baa2c0ddffecc010f39eff.png)

将文本视图放置在您想要的位置

![在此处输入图像描述](../Images/537988617cb887bc364791724bb3ce45.png)

选择文本视图并在属性检查器中设置其文本

![在此处输入图像描述](../Images/12728a24f9cc7314949b35a3c02f5fbc.png)

如果要动态更改文本和图像，则需要在控制器中为它们添加插座。这样您就可以访问它们的`image`和`text` `property`s 并更改它们。

# windows - 如何将 IMAP 文件导入 Outlook

> ID：13838106
> 
> 赞同：1
> 
> 时间：2012-12-12T10:50:55.690
> 
> 标签：windows, outlook, imap

我有一个 Merak 邮件服务器的备份，其中包含许多 Imap 文件。如果我将它们重命名为 .eml，我可以使用 Outlook 2003 打开它们（耶！）。如果这样做，我还可以将其保存到现有帐户中，无论是 POP3 还是 IMAP。

现在，我的最终目标是将一批 1000 多封邮件导入现有的 IMAP 帐户。我确实有[imapsync](http://imapsync.lamiral.info/)可用，我可以将其连接到该过程中。

关于如何更有效地解决这个问题的任何想法，而不是使用 Outlook 一个一个地打开和保存它们？

我考虑过运行本地邮件服务器，然后在其上释放 imapsync，但问题是我无法找到可以托管它们的（免费）服务器（Merak 当然会）。顺便说一句，我正在运行 Windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:18:27.990

这个问题与“编程”无关，因此不适合 SO。无论如何，您的问题的答案是打开 eml 文件是 Outlook Express，然后将其导出到 PST。获得 PST 后，您需要将邮件导入回您的邮件帐户。

# java - Android/java Sqlite：如何检索最大日期时间？

> ID：13838107
> 
> 赞同：11
> 
> 时间：2012-12-12T10:50:58.717
> 
> 标签：java, android, sqlite

下面是我从 sqlite db 得到的查询的快照。

在谷歌搜索并阅读了一些问题之后，我开始知道使用聚合函数来检索最大日期`max()`时间是不可能的，因为 sqlite 不支持很多数据类型，但将数据类型视为`text`.

所以，我把这些数据带到了一个`List`或一个`java`水平。那么我现在如何从这个列表中获得最大日期时间。

> java中是否有这种格式的直接构造？或者我们是否有一些我找不到的 sqlite 级别的东西。

![Sqlite 返回数据](../Images/608c13516d8c890f7bad4fe15b4473cd.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T11:03:54.547

文本可以在 SQLite 中进行比较、排序和排序。

您的格式似乎是 YYYY-MM-dd hh:mm:ss。幸运的是，订购这种格式会导致按日期订购。

只是

```
select current_test_id from someTable order by test_datetime desc limit 1 
```

或者

```
select current_test_id, max(test_datetime) from someTable 
```

（或其他东西，第二个不完全确定）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-30T11:32:10.890

如果您设置日期时间字段文本的类型，那么您可以执行以下查询，但日期时间必须是`yyyy-mm-dd hh:mm:ss`

```
select max(datetime) from tableName; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:03:18.403

一种常见的方法是存储转换后的数据。

用于`date.getTime()`从您的 Date 实例中获取 long 并`Date date = new Date(timestamp);`从您的时间戳中获取日期对象。

一旦你的数据库中有一个 long ，你就可以执行任何你想要的排序/比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-11T10:41:50.137

要从一组时间类型（字符串）中检索最大值，我们必须使用子字符串进行一些连接。使用此查询最大或最小时间可以使用 sql lite 找出

```
select max(datetime(case 
when substr(TimeIn,7,2)='PM' 
then substr(TimeIn,1,2)+12 
else substr(TimeIn,1,2) 
end  || ':' || substr(TimeIn,4,2) || ':' || '00'))  
from tablename 
where Date='10/06/2016' 
```

# c# - 是否有任何机制来保护我在 SQL Server Express 2008 中的 .mdf 文件？

> ID：13838108
> 
> 赞同：4
> 
> 时间：2012-12-12T10:51:10.843
> 
> 标签：c#, wpf, sql-server-2008

我开发了 C# 和 SQL Server Express 数据库项目。我可以避免复制和粘贴我的`.mdf`文件吗？有什么方法可以保护我的`.mdf`文件不被架构监视？所以没人能看到我的数据库的功能和表吗？没有将其分离或附加到其他实例？你有任何想法如何做或任何准备好的机制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T16:22:06.890

我在我的项目中使用了 DbDefence。我对现在的安全感到满意。它有一个减号 - 免费版本只允许加密 77Mb，这在我的项目中已经足够了。如果你想要更多，你可以购买商业的。非常易于安装和使用。您可以在这里找到更多信息[http://www.dbdefence.com/index.php](http://www.dbdefence.com/index.php) 如果您需要任何帮助，请与我联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:07:08.367

看看我的问题：[使用 Winforms 应用程序部署 SQL Server 数据库](https://stackoverflow.com/q/3846081/337294)。

我最终使用了[SQL Server CE](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/compact.aspx)，对此我非常满意。无需安装 SQL Server（只需几个额外的 dll）。你也可以为你的数据库设置密码。如果您使用的是 Winforms，则会出现一些故障。但是可以通过简单的谷歌搜索找到每个解决方法。

# c# - Observable.Timer()：如何避免定时器漂移？

> ID：13838113
> 
> 赞同：15
> 
> 时间：2012-12-12T10:51:18.100
> 
> 标签：c#, .net, system.reactive

在 C# (.NET 4.0) 应用程序中，我使用响应式扩展 (2.0.20823.0) 生成时间边界，以将事件分组为聚合值。为了简化对结果数据库的查询，这些边界需要在整小时（或以下示例中的秒）上对齐。

使用`Observable.Timer()`：

```
var time = DefaultScheduler.Instance;

var start = new DateTimeOffset(time.Now.DateTime, time.Now.Offset);

var span = TimeSpan.FromSeconds(1);

start -= TimeSpan.FromTicks(start.Ticks % 10000000);
start += span;

var boundary = Observable.Timer(start, span, time);

boundary.Select(i => start + TimeSpan.FromSeconds(i * span.TotalSeconds))
    .Subscribe(t => Console.WriteLine("ideal: " + t.ToString("HH:mm:ss.fff")));

boundary.Select(i => time.Now)
    .Subscribe(t => Console.WriteLine("actual: " + t.ToString("HH:mm:ss.fff"))); 
```

您可以看到计时器滴答的预期时间和实际时间相差很大：

```
ideal: 10:06:40.000
actual: 10:06:40.034
actual: 10:06:41.048
ideal: 10:06:41.000
actual: 10:06:42.055
ideal: 10:06:42.000
ideal: 10:06:43.000
actual: 10:06:43.067
actual: 10:06:44.081
ideal: 10:06:44.000
ideal: 10:06:45.000
actual: 10:06:45.095
actual: 10:06:46.109
ideal: 10:06:46.000
ideal: 10:06:47.000
actual: 10:06:47.123
actual: 10:06:48.137
ideal: 10:06:48.000
... 
```

我也使用 a `HistoricalScheduler`，当然我在那里没有问题。我可以容忍轻微的不准确，我不需要关心系统时钟的变化。这些 Observable 不会触发重量级操作。

[另外，我知道在这篇博](http://blogs.msdn.com/b/rxteam/archive/2012/06/20/reactive-extensions-v2-0-release-candidate-available-now.aspx)文中对 RX 定时器漂移问题进行了冗长的讨论，但我似乎无法理解它。

定期安排`Observable`没有系统的计时器漂移的正确方法是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-12T13:06:59.933

大多数机器上的默认 Windows 时钟中断率是每秒 64 个中断。由 CLR 舍入为 15.6 毫秒。如果您要求 1000 毫秒的间隔，这不是一个快乐的数字，没有整数除数。最接近的匹配是 64 x 15.6 = 998（太短）和 65 x 15.6 = 1014 毫秒。

这正是您所看到的，41.048 - 40.034 = 1.014。44.081 - 43.067 = 1.014 等等。

您实际上可以更改中断率，您可以调用 timeBeginPeriod() 并要求 1 毫秒的间隔。您需要 timeEndPeriod() 在程序终止时重置它。这并不是一件非常合理的事情，它具有系统范围的副作用并且对功耗非常不利。但是会解决你的问题。

一个更理智的方法是承认你永远无法通过增加间隔来准确地保持时间。CLR 使用的 15.6 毫秒已经是一个近似值。始终使用绝对时钟重新校准。通过要求 998 毫秒而不是 1000 毫秒来接近。等等。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-13T01:01:59.487

您可以使用[Observable.Generate](http://msdn.microsoft.com/en-us/library/hh229270%28v=vs.103%29.aspx)：

```
var boundary = Observable.Generate(
    0, _ => true, // start condition
    i => ++i,     // iterate
    i => i,       // result selector
    i => start + TimeSpan.FromSeconds(i * span.TotalSeconds),
    time); 
```

这将根据每次迭代的绝对时间重新安排。

这是一些示例输出：

```
actual: 01:00:44.003
ideal: 01:00:44.000
actual: 01:00:44.999
ideal: 01:00:45.000
actual: 01:00:46.012
ideal: 01:00:46.000
actual: 01:00:47.011
ideal: 01:00:47.000
actual: 01:00:48.011
ideal: 01:00:48.000
actual: 01:00:49.007
ideal: 01:00:49.000
actual: 01:00:50.009
ideal: 01:00:50.000
actual: 01:00:51.006
ideal: 01:00:51.000 
```

它不完全匹配，我想是由于汉斯解释的原因，但没有漂移。

编辑：

[这是来自RxSource](https://rx.codeplex.com/SourceControl/changeset/view/323dbd5c2b78#Rx.NET/System.Reactive.Linq/Reactive/Linq/Observ%CE%B1ble/Timer.cs)的一些评论

```
// BREAKING CHANGE v2 > v1.x - No more correction for time drift based on absolute time. This
//                             didn't work for large period values anyway; the fractional
//                             error exceeded corrections. Also complicated dealing with system
//                             clock change conditions and caused numerous bugs.
//
// - For more precise scheduling, use a custom scheduler that measures TimeSpan values in a
//   better way, e.g. spinning to make up for the last part of the period. Whether or not the
//   values of the TimeSpan period match NT time or wall clock time is up to the scheduler.
//
// - For more accurate scheduling wrt the system clock, use Generate with DateTimeOffset time
//   selectors. When the system clock changes, intervals will not be the same as diffs between
//   consecutive absolute time values. The precision will be low (1s range by default). 
```

# cassandra - Cassandra Pycassa 连接池，如何正确使用？

> ID：13838115
> 
> 赞同：1
> 
> 时间：2012-12-12T10:51:20.357
> 
> 标签：cassandra, connection-pooling, pycassa

为了让 Cassandra 插入更快，我正在使用多线程，它工作正常，但是如果我添加更多线程它没有任何区别，我认为我不会产生更多连接，我想我可能应该使用池。 execute(f, *args, **kwargs) 但我不知道如何使用它，文档很少。到目前为止，这是我的代码..

```
import connect_to_ks_bp
from connect_to_ks_bp import ks_refs
import time
import pycassa
from datetime import datetime 
import json
import threadpool
pool = threadpool.ThreadPool(20)
count = 1
bench = open("benchCassp20_100000.txt", "w")

def process_tasks(lines):

    #let threadpool format your requests into a list
    requests = threadpool.makeRequests(insert_into_cfs, lines)

    #insert the requests into the threadpool
    for req in requests:
        pool.putRequest(req) 

    pool.wait()

def read(file):
    """read data from json and insert into keyspace"""
    json_data=open(file)
    lines = []
    for line in json_data:
        lines.append(line)
    print len(lines)
    process_tasks(lines)

def insert_into_cfs(line):
    global count
    count +=1
    if count > 5000:
            bench.write(str(datetime.now())+"\n")
            count = 1
    #print count
    #print kspool.checkedout()
    """
    user_tweet_cf = pycassa.ColumnFamily(kspool, 'UserTweet')
    user_name_cf = pycassa.ColumnFamily(kspool, 'UserName')
    tweet_cf = pycassa.ColumnFamily(kspool, 'Tweet')
    user_follower_cf = pycassa.ColumnFamily(kspool, 'UserFollower')
    """
    tweet_data = json.loads(line)
    """Format the tweet time as an epoch seconds int value"""
    tweet_time = time.strptime(tweet_data['created_at'],"%a, %d %b %Y %H:%M:%S +0000")
    tweet_time  = int(time.mktime(tweet_time))

    new_user_tweet(tweet_data['from_user_id'],tweet_time,tweet_data['id'])
    new_user_name(tweet_data['from_user_id'],tweet_data['from_user_name'])
    new_tweet(tweet_data['id'],tweet_data['text'],tweet_data['to_user_id'])

    if tweet_data['to_user_id'] != 0:
        new_user_follower(tweet_data['from_user_id'],tweet_data['to_user_id'])

""""4 functions below carry out the inserts into specific column families"""        
def new_user_tweet(from_user_id,tweet_time,id):
    ks_refs.user_tweet_cf.insert(from_user_id,{(tweet_time): id})

def new_user_name(from_user_id,user_name):
    ks_refs.user_name_cf.insert(from_user_id,{'username': user_name})

def new_tweet(id,text,to_user_id):
    ks_refs.tweet_cf.insert(id,{
    'text': text
    ,'to_user_id': to_user_id
    })  

def new_user_follower(from_user_id,to_user_id):
    ks_refs.user_follower_cf.insert(from_user_id,{to_user_id: 0})   

    read('tweets.json')
if __name__ == '__main__': 
```

这只是另一个文件..

```
import pycassa
from pycassa.pool import ConnectionPool
from pycassa.columnfamily import ColumnFamily

"""This is a static class I set up to hold the global database connection stuff,
I only want to connect once and then the various insert functions will use these fields a lot"""
class ks_refs():
    pool = ConnectionPool('TweetsKS',use_threadlocal = True,max_overflow = -1)

    @classmethod
    def cf_connect(cls, column_family):
        cf = pycassa.ColumnFamily(cls.pool, column_family)
        return cf

ks_refs.user_name_cfo = ks_refs.cf_connect('UserName')
ks_refs.user_tweet_cfo = ks_refs.cf_connect('UserTweet')
ks_refs.tweet_cfo = ks_refs.cf_connect('Tweet')
ks_refs.user_follower_cfo = ks_refs.cf_connect('UserFollower')

#trying out a batch mutator whihc is supposed to increase performance
ks_refs.user_name_cf = ks_refs.user_name_cfo.batch(queue_size=10000)
ks_refs.user_tweet_cf = ks_refs.user_tweet_cfo.batch(queue_size=10000)
ks_refs.tweet_cf = ks_refs.tweet_cfo.batch(queue_size=10000)
ks_refs.user_follower_cf = ks_refs.user_follower_cfo.batch(queue_size=10000) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T21:09:51.910

一些想法：

*   10,000 的批量太大了。试试 100。
*   使您的 ConnectionPool 大小至少与使用该`pool_size`参数的线程数一样大。默认值为 5。仅当活动线程数可能随时间变化时才应使用池溢出，而不应在线程数固定时使用。原因是它会导致很多不必要的新连接的打开和关闭，这是一个相当昂贵的过程。

解决这些问题后，请查看以下内容：

*   我不熟悉您正在使用的线程池库。确保如果您将 Cassandra 的插入从图片中移除，当您增加线程数时，您会看到性能的提高
*   由于 GIL，Python 本身对可用线程的数量有限制。它通常不应该在 20 时达到最大值，但如果你正在做一些 CPU 密集型或需要大量 Python 解释的事情，它可能会。我在前一点中描述的测试也将涵盖这一点。在这种情况下，您可能应该考虑使用该`multiprocessing`模块，但您需要更改一些代码来处理它（即，不在进程之间共享 ConnectionPools、CF 或几乎没有其他任何东西）。

# batch-file - bat cmd 或 vb 脚本将特定文件从一个位置移动到另一个位置

> ID：13838116
> 
> 赞同：0
> 
> 时间：2012-12-12T10:51:25.253
> 
> 标签：batch-file, vbscript

有人可以帮助我使用 bat cmd 将特定文件从一个位置移动到另一个位置

我的文件结构

**源位置**

```
E:\Test1\2011\18\5730547\5730552\html
E:\Test1\2011\18\5730547\6430552\html
E:\Test1\2011\38\7730140\2330582\html
E:\Test1\2011\19\5718547\5730552\html 
```

其中`html`文件夹包含`css`文件夹`xml`和`html`文件。

我只想将文件名包含`testcase.html`和`images.html`文件从上面的位置移动到下面的位置

**所需位置**

```
E:\Final1\2011\18\5730547\5730552\html
E:\Final1\2011\18\5730547\6430552\html
E:\Final1\2011\38\7730140\2330582\html
E:\Final1\2011\19\5718547\5730552\html 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:09:15.633

```
for %%a in (testcase.html images.html) do (
xcopy E:\Test1\2011\18\5730547\5730552\html\%%a /s E:\Final1\2011\18\5730547\5730552\html\*1.*
xcopy E:\Test1\2011\18\5730547\6430552\html\%%a /s E:\Final1\2011\18\5730547\6430552\html\*2.*
xcopy E:\Test1\2011\38\7730140\2330582\html\%%a /s E:\Final1\2011\38\7730140\2330582\html\*3.*
xcopy E:\Test1\2011\19\5718547\5730552\html\%%a /s E:\Final1\2011\19\5718547\5730552\html\*4.*
) 
```

它们将在文件名后附加数字 1-4 进行复制，否则每次将下一个文件夹副本复制到同一目标文件夹时，它们将被覆盖。

# java - 在 Eclipse 中，是否有显示当前选定元素的成员的视图

> ID：13838117
> 
> 赞同：3
> 
> 时间：2012-12-12T10:51:31.807
> 
> 标签：java, eclipse

当我在编辑器中打开一个接口或类时，我可以看到大纲中的所有成员。“Javadoc”视图显示当前选择的元素的文档——无论我点击什么。

我想要这些观点的组合。我想查看当前选定元素的所有成员。我知道如果我声明一个变量并调出内容辅助，我可以看到它们。但这太麻烦了。我想单击一个元素，在视图中查看其有效的方法和属性，而无需将文件加载到主编辑器窗口中。

可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T07:46:31.263

您可以使用`Ctrl`+`F3`打开带有当前元素轮廓的弹出窗口，并将焦点放在搜索字段中。我认为这是最有用的。Skike `Ctrl`+`F3`在同一个弹出窗口中获取继承的成员。

您还可以使用`F4`在选定元素上快速打开类型层次结构视图。此视图包含元素的子类型和/或超类型层次结构，以及元素的成员/方法（及其带有“显示所有继承的成员”按钮的父级）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T10:58:24.987

您可以展开 Package explore 中的元素并查看声明的所有方法和变量![在此处输入图像描述](../Images/b91df2ba6d1cea14194a51525de5e61a.png)

# jquery - 在 jquery 中访问控制器操作变量并在 ruby on rails 中显示它

> ID：13838124
> 
> 赞同：0
> 
> 时间：2012-12-12T10:51:48.127
> 
> 标签：jquery, ruby-on-rails

我是 Jquery 和 Ajax 的新手……我想做的是……我有一个控制器操作，它读取文件内容并将其存储在变量中。我想从 jquery 传递文件名，并希望通过 jquery 中的变量访问该文件内容并将其显示在 div 标签中。为此，我在控制器中使用了此代码...

requests_controller.rb

```
def download
   IO.foreach "#{RAILS_ROOT}/Backend/History/#{params[:filename]}" do |line|
      @file_content << line
      @file_content << '<br/>'
   end 
end 
```

Jquery 中的代码是...

```
jQuery("#play").click(function() {
    jQuery.get("/requests/download_log", { filename: filename});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:16:58.317

目前尚不清楚您要做什么。您想将控制器变量访问到 jquery 视图中，还是希望从 ajax jquery 函数请求控制器操作并从响应中获取一些数据？

我认为你想做第一件事，所以你可以在控制器上做：

```
class MyController < ApplicationController
  def my_action
    @file_content = some_content
  end
end 
```

在视图 my_action.html.erb

```
<script type="text/javascript">
  $(document).ready(function() {
    $("#play").click(function() {
      $.get("/requests/download_log", { filename: <%= j @file_content %> });
    });
  });
</script> 
```

* * *

现在，如果碰巧你想做我说的第二件事，你可以做

```
class MyController < ApplicationController
  def download_log
    @file_content = some_content
    respond_to do |format|
      format.json { render json: @file_content.to_json }
    end
  end
end 
```

并且在视图中

```
success_handler = function(json_data) {
  // Do any operation with the json_data 
}

error_handler = function(jqXHR, textStatus, errorThrown) {
  // Handle ajax errors here
} 

$("#play").click(function() {
  $.ajax("/requests/download_log.json", dataType: "json",  success: success_handler, error: error_handler);
}); 
```

# flash - 补间动画剪辑

> ID：13838125
> 
> 赞同：0
> 
> 时间：2012-12-12T10:51:57.817
> 
> 标签：flash, flash-cs5

我正在使用时间线制作补间动画，它适用于电影剪辑。我的问题是我也可以使用 as3 吗？我有 24 帧用于简单的补间动画，当我在 flash6 到 as3 编辑区域中单击“动作”时，我不能？

我希望能够像超链接一样单击影片剪辑以加载另一个网页。

这是因为你不能两者兼得吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:26:10.853

将所有操作脚本代码放在单独的层中。因为在 AS3 中，您不能将任何代码直接应用于显示对象。这是几行代码，我用于 ball_mc -

```
import flash.net.navigateToURL;

    var link:String = 'http://www.google.com';

    ball_mc.addEventListener(MouseEvent.CLICK, onClick);

    function onClick(event:MouseEvent):void {
        //trace('click');
        navigateToURL(new URLRequest(link));
    } 
```

# javascript - 通过 javascript 的标签顺序

> ID：13838126
> 
> 赞同：0
> 
> 时间：2012-12-12T10:52:00.807
> 
> 标签：javascript, dynamics-crm-2011

我想将表单上的标签顺序设置为从左到右。我在网上看到了以下代码

```
for (var i = 0; i < crmForm.all.length; i++) 
{
    var element = crmForm.all[i];
    if (element.tabIndex && element.tabIndex != "0") {
        if (element.className == 'ms-crm-Hidden-NoBehavior') 
            continue;
        if (element.tagName == 'A') {
            if (element.className != 'ms-crm-InlineTabHeaderText') 
                continue;
        }

        element.tabIndex = 10000 + (i * 10);
    }
} 
```

它设置了我想要的标签顺序。但是，在货币字段中存在一个问题，因为当您第一次在其中选择货币符号时，您无法键入任何内容，并且您必须再次使用 tab 才能在字段中键入任何内容。

代码有没有办法忽略这些符号并直接进入该字段本身？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:03:30.160

您的方法构成不受支持的自定义，但只需少量手动工作，您就可以以完全受支持的方式实现相同的结果。您需要做的就是在表单中为每一行字段添加一个新的“部分”（不显示标题或分隔符）。

结果是没有不受支持的 JScript 和与应用程序的其余部分完全一致的可预测行为。

在下面的示例中，我展示了一个示例，说明我必须如何布置我的表单，以使本机制表行为“有意义”。但是，如果我想使用水平制表符，我可以重新排列我的表单，引入一些新的部分，然后让它在没有代码的情况下按我的意愿工作。

这种方法的美妙之处在于它只影响您想要的表单部分。

![使用表单布局强加标签顺序的示例](../Images/5f3de0fa79b9fc4054a62e2826171cc1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T22:52:42.430

虽然从技术上讲它仍然不受支持，但我似乎已经解决了这里的货币问题：

```
function TabOrderLefttoRight() {
    for (var i = 0; i < crmForm.all.length; i++) {
    var element = crmForm.all[i];
    if (element.tabIndex && element.tabIndex > "0") { //less than zero instead of !=
        if (element.className == 'ms-crm-Hidden-NoBehavior')
            continue;
        if (element.tagName == 'A') {
            if (element.className != 'ms-crm-InlineTabHeaderText')
                continue;
        }

        element.tabIndex = 10000 + (i);
    }
} 
```

}

这样，它不会影响 tabindex（货币字段）中低于 0 的项目。

# c# - 是否可以在类摘要 xml 标记中使用 ToString() 值？

> ID：13838132
> 
> 赞同：0
> 
> 时间：2012-12-12T10:52:19.823
> 
> 标签：c#, .net, xml, string, summary

是否可以在摘要 xml 标记中使用 ToString()？

```
 /// <summary>
    /// I want to use the value from ToString() here.
    /// </summary>
    public class TheObject
    {
        public override string ToString()
        {
            return "Hellow World!";
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:54:01.500

不，这是不可能的。

这些是[*注释*](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)，而不是可执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:59:29.897

您*可能可以*使用 AOP（面向方面​​的编程）来做这样的事情。

但是由于这涉及*评论*，我个人看不到任何定义这样的“动态”评论的感觉（我想，如果字符串发生变化，您也希望该评论也发生变化）。注释必须是功能的基本描述，而不需要深入研究它描述的工件内的代码的*具体*实现细节和值。

# emacs - 在 Emacs Lisp 中，有些关键字没有定义

> ID：13838139
> 
> 赞同：0
> 
> 时间：2012-12-12T10:52:45.787
> 
> 标签：emacs, lisp, keyword

我最近拿起一本关于 lisp 的旧书，我正在尝试使用 emacs 学习 lisp。我同时使用了 ielm 模式和交互模式，但是我遇到了未定义关键字的问题。我正在遵循这本书的例子，但有时我会得到一个

> *** eval 错误 *** Symbol 的函数定义为 void: -the keyword-

诸如：DEFINE、TIMES、DIFFERENCES、ADD1 等关键字将不起作用。而其他关键字，如：SQRT、MAX、MIN 等也可以。

我是 emacs 的完整初学者，所以我不明白什么是错的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T10:57:08.090

lisp有几种[方言](http://en.wikipedia.org/wiki/Dialect_%28computing%29)，例如 Common Lisp、Scheme、Emacs Lisp 等。在一种方言中可用的函数、变量或关键字可能在另一种方言中不可用。

正如 Rainer 所说，您书中的方言可能不再使用，您不应该学习它。选择最近的一本并购买一本书或在线查找文档。如果您是 Lisp 新手，那么从作为 Lisp 的主要方言且相对简单的[Scheme](http://en.wikipedia.org/wiki/Scheme_%28programming_language%29)开始可能是一个好主意。

最后一件事：Emacs 是一个编辑器，你可以用它来用任何 Lisp 方言编程。现在，Emacs 本身（主要）是用 Emacs Lisp 编写的，这是一种专为 Emacs 设计的 Lisp 方言。仅当您想修改或自定义 Emacs 时，了解它才有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:40:45.263

您的书可能很旧，并且使用了不再使用的 Lisp 方言。

您可能希望获得该书的稍新版本。

请参阅：[http](http://people.csail.mit.edu/phw/Books/#AI) ://people.csail.mit.edu/phw/Books/#AI 以获取本书的旧 Common Lisp（来自 80 年代）代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:48:02.613

您可能会更好地阅读一本书讨论`Emacs Lisp`（一本与 Emacs 本身捆绑在一起，键入`C-h i m Emacs Intro RET`以访问它）。

顺便说一句，这本书看起来很古老，我猜它描述了一种非标准的 Lisp 方言。考虑改为阅读诸如[Practical Common Lisp](http://www.gigamonkeys.com/book/)或[Structure and Interpretation of Computer Programs](http://mitpress.mit.edu/sicp/)之类的内容。

# asp.net-mvc - 将所有方法放在一个 .tt 文件中，并在 MVC 的 CodeTemplates 中的另一个 t4 文件中使用它

> ID：13838142
> 
> 赞同：2
> 
> 时间：2012-12-12T10:53:03.647
> 
> 标签：asp.net-mvc, asp.net-mvc-3, t4

我使用 ASP.NET MVC 3 [Custom CodeTemplates](http://www.hanselman.com/blog/ModifyingTheDefaultCodeGenerationscaffoldingTemplatesInASPNETMVC.aspx)我需要将一些方法放在一个 t4 文件中，然后在我的所有 t4 模板中使用它。

所以这是我的 general.tt 文件：

```
<#@ template language="C#" #>
<#@ assembly name="System" #>
<#@ assembly name="System.Core" #>
<#@ assembly name="System.ComponentModel.DataAnnotations" #>
<#@ assembly name="System.Data" #>
<#@ assembly name="System.Data.Entity" #>
<#@ assembly name="System.Data.Linq" #>
<#@ assembly name="System.Xml.Linq" #>
<#@ import namespace="System" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="System.ComponentModel.DataAnnotations" #>
<#@ import namespace="System.ComponentModel" #>
<#@ import namespace="System.Data.Linq.Mapping" #>
<#@ import namespace="System.Data.Objects.DataClasses" #>
<#@ import namespace="System.Reflection" #>
<#@ import namespace="Microsoft.VisualStudio.Web.Mvc.Scaffolding.BuiltIn" #>

<#+ 
public class XXD {
    public string getitNow(){
        return "Yup thats it!";
    }
}
 #> 
```

然后我在 create.tt 文件中使用它，如下所示：

```
<#@ include file="general.tt" #>

...

<#+

private string GetitNow(){
   XXD xx = new XXD();
   return xx.getitNow();
} 
```

但是当我想添加视图使用创建模板时出现错误：

**错误**：加载包含的文件“general.tt”返回空字符串。转换将不会运行。

那么问题出在哪里？你有什么建议这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T20:10:18.330

上次我检查时，MVC 脚手架仍然使用 ITextTemplatingEngineHost 的自定义实现，它实现 include 指令的方式与 Visual Studio 中的 ITextTemplating 服务不同。我建议您提交一个[Connect](http://connect.microsoft.com/visualstudio)错误，描述您遇到的问题并要求将 MVC 中的 T4 实现更改为内置的 ITextTemplating 服务，该服务没有此限制和其他限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:41:38.013

这通常意味着找不到该文件。是`general.tt`在不同的路径`create.tt`？

# java - 使用（或不使用）Fest 框架从 JTree 获取 JLabel

> ID：13838143
> 
> 赞同：1
> 
> 时间：2012-12-12T10:53:04.427
> 
> 标签：java, swing, jlabel, jtree, fest

我正在使用 Fest 来检查两个条目是否具有相同的图标。

我实际上有一个 JTreeFixture，我可以通过它的路径访问一个特定的条目。

```
JTreeFixture tree = getTreeFromWindow();
JLabel label  = (JLabel) tree.selectPath("/folder2/entry2").component.getCellRenderer();

JLabel labe2  = (JLabel) tree.selectPath("/folder2/entry3").component.getCellRenderer(); 
```

我得到了两个 JLabel，但它们都指向我的文件夹 2 中的最后一个条目。由于 Fest 在这里似乎帮不上什么忙，我打算直接使用 JTree（感谢 JTreeFixture.component() => 返回 JTree），并直接从 JTree 中提取信息。

知道条目的路径，我如何才能将 JLabel 包含在 JTree 中？

已解决：我创建了这个方法：

```
public Icon getIconeFromPath(String path){
    JTreeFixture tree = getTreeFromWindow();
    PreMadeCellRenderer renderer = (PreMadeCellRenderer) tree.component().getCellRenderer().;
    DefaultMutableTreeNode node = (DefaultMutableTreeNode) tree.clickPath(path).component().getLastSelectedPathComponent();
    JLabel label = (JLabel) renderer.getTreeCellRendererComponent(tree.component(), node, true, true, true, 0, true);
    return label.getIcon();
} 
```

getTreeFromWindow 返回一个 JTreeFixture PreMadeCellRenderer 是一个扩展 DefaultTreeCellRenderer 的渲染器 getTreeCellRendererComponent 返回一个组件，这里解释了它的参数[http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeCellRenderer.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeCellRenderer.html)

我使用参数 0 是因为我不知道要输入什么，并且工作了 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T10:56:22.643

Swing 使用相同的共享 JLabel 对象来绘制所有树节点（出于性能原因）。我建议检查树节点的用户对象（通常是字符串）。

另见： [Difficulties understand the renderers mechanism of swing's JTable and JTree](https://stackoverflow.com/questions/13672980/difficulties-understanding-the-renderers-mechanism-of-swings-jtable-and-jtree)

# ssas - SQL Server Analysis Services 是否适合近实时 KPI 计算？

> ID：13838146
> 
> 赞同：0
> 
> 时间：2012-12-12T10:53:14.410
> 
> 标签：ssas, olap, kpi

我设计了一个应该计算几个 KPI 指标的系统。有一个比较简单的事务型数据库，将这个数据库中的数据传输到 SQL Server 数据仓库（1 个事实表，5 个维度表）。事实表包含有关呼叫中心电话会话的数据。每秒有近 1000 个新的事实表行被添加到数据仓库中。

我需要建立 KPI 指标（例如，过去 2 小时内每个呼叫中​​心操作员的平均通话时长）。并且从数据更新（新的事实行）到 KPI 更新的时间应该小于 2 秒。

是否可以使用 SQL Server Analysis Services 构建如此快速的解决方案？

# netty - Netty 4 - 改变频道的事件循环

> ID：13838149
> 
> 赞同：4
> 
> 时间：2012-12-12T10:53:24.480
> 
> 标签：netty

我的问题是关于更改已注册频道的频道事件循环。

通道绑定到 io-eventloop 线程，来自 serverboostrap 上设置的 EventLoopGroup。好的。但是在“协议协商”之后，我想将某个通道的 io-eventloop 更改为专用的 io-eventloop。所以我做这样的事情：

```
 channel.deregister().addListener(new ChannelFutureListener() {

          @Override
          public void operationComplete(ChannelFuture future) throws Exception {

            newIoLoop.register(future.channel()).sync();
          }
        }); 
```

一切正常，但有一个问题：channel.eventloop 已更新，并且将使用此事件循环创建更新的 ChannelHandlerContext。但是 channel.pipeline.head 仍然绑定到旧的事件循环。这是预期的行为吗？

这会生成 AbstractNioByteChannel.NioByteUnsafe.read() 方法引发的异常：

```
 case 2:
  // Let the inbound handler drain the buffer and continue reading.
  if (read) {
    read = false;
    pipeline.fireInboundBufferUpdated(); // event fired in the pipeline to try to read some bytes but without waiting for handler executed in another loop
    if (!byteBuf.writable()) {  // byteBuf may always be full and exception is raised
        throw new IllegalStateException(
          "an inbound handler whose buffer is full must consume at " +
                      "least one byte.");
    }
  } 
```

就我而言，更改频道注册时更改 pipeline.head.eventloop 将解决此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:02:34.000

这是一个错误..你能在我们的问题跟踪器上打开一个错误报告吗？

谢谢！

# ibm-mq - C# 中的 MQ 分发列表

> ID：13838152
> 
> 赞同：2
> 
> 时间：2012-12-12T10:53:43.043
> 
> 标签：ibm-mq

我们可以在 c# 中访问 Websphere MQ 分发列表吗？.Net 手册“csqzav07”未提供有关此的任何信息。如果有人已经尝试过或者可以分享任何关于此的信息，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:03:08.897

当前的 MQ .NET API 不支持分发列表。如果您愿意，可以通过[http://www.ibm.com/developerworks/rfe/execute?use_case=submitRfe向 IBM 提交 RFE](http://www.ibm.com/developerworks/rfe/execute?use_case=submitRfe)

# typescript - 在 TS 中导入外部模块会导致“ReferenceError: require is not defined”

> ID：13838155
> 
> 赞同：6
> 
> 时间：2012-12-12T10:53:50.173
> 
> 标签：typescript

所以当像这样导入外部模块时

```
import GameObjects = module("GameObjects") 
```

输出的 JS 在文件顶部有这个：

```
var GameObjects = require("./GameObjects") 
```

但是在 chrome 中运行时会出现此错误：> Uncaught ReferenceError: require is not defined

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T11:24:08.967

外部模块需要存在模块加载器。如果你在浏览器中运行它，你必须注意自己包含一个模块加载器。请查看[require.js](http://requirejs.org)，它包含运行模块加载器所需的所有文档。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-10T21:02:17.123

如果您想使用内置的 Microsoft 解决方案，请将您的替换`import`为[Triple Slashes](https://www.typescriptlang.org/docs/handbook/triple-slash-directives.html)。

因此`import GameObjects = module("GameObjects")`，您可以`/// <reference path="./Gameobjects.ts" />`在文件顶部执行，而不是 。

# android - 猴子没有给出输出：没有找到运行的活动，猴子中止

> ID：13838159
> 
> 赞同：3
> 
> 时间：2012-12-12T10:54:06.430
> 
> 标签：android, testing, android-monkey

我是猴子测试工具的新手，它说运行以下命令

> adb shell monkey -p "包名" -v 3

我不清楚是从项目目录内部还是从我的项目所在的工作区传递此命令。

每次我运行我都会收到以下错误

> :Monkey: seed=0 count=3
> :AllowPackage: com.and
> :IncludeCategory: android.intent.category.LAUNCHER
> :IncludeCategory: android.intent.category.MONKEY
> ** 没有找到要运行的活动，monkey 中止了。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:06:33.037

当您使用 运行命令`adb shell`时，该命令将在连接的 Android 设备或模拟器上运行。因此，该命令的当前工作目录将是设备的工作目录。您是“从项目目录内部还是从我的项目所在的工作区”执行它有什么关系？

查看您收到的错误，很明显您没有正确给出允许的包名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:53:31.537

检查您的应用程序是否在清单文件中有 Activity (android.intent.category.LAUNCHER)。如果它不存在，您将收到此错误。实际上我也在用猴子工具测试移动应用程序并得到这个错误。如果您有任何疑问，请使用活动和意图过滤器创建示例项目并运行猴子工具。

# ios - 如何在 AlertView 中添加 UIActivityIndi catorView

> ID：13838165
> 
> 赞同：1
> 
> 时间：2012-12-12T10:54:21.023
> 
> 标签：ios, uialertview, uiactivityindicatorview

我想显示一个警报视图，说明该过程正在进行中，并希望在警报视图中添加 UIActivityIndi​​catorView 以显示该过程正在进行中，而不是在警报视图之外。我怎么做？任何指导都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:04:58.960

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@" "Process in Progress..." " ];
UIActivityIndicatorView *progress= [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(125, 50, 30, 30)];
progress.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
[alert addSubview:progress];
[progress startAnimating];
[alert show]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:10:37.943

我宁愿建议你使用[MBProgressHud](https://github.com/jdg/MBProgressHUD)

如果您需要显示一些图像和文字，请[使用它](https://github.com/scalessec/Toast)

# selenium - 使用 selenium webdriver 时无法获取包含警报框的窗口的 URL

> ID：13838171
> 
> 赞同：1
> 
> 时间：2012-12-12T10:54:31.023
> 
> 标签：selenium, webdriver, modal-dialog, alert

我正在为我的自动化脚本使用 selenium webdriver + java + eclipse + testng。

我正在尝试获取包含警报框的窗口的 URL。单击网页上的下载按钮时，它会在新窗口中打开一个警告框。我想获取这个窗口的 URL。

我为此尝试了 getCurrentURL 命令，但我得到**UnhandledAlertException : Modal dialog present**。如果我关闭警报框，则包含的窗口会立即关闭，因此无法获取 URL。

似乎警报框（此处为模态对话框）正在阻止 webdriver 读取窗口的 URL。请为此建议我一个解决方案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:45:42.240

我不确定我是否理解这个问题，因为警报框没有任何 URL！

无论如何，您可以通过这种方式访问​​它： `Alert alert = webDriver.switchTo().alert();` 然后您可以检索文本内容或与其交互，如下所述：http: [//selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium /警报.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Alert.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:39:54.227

我认为您需要先为此获取一组 windowHandles `driver.getWindowHandles();`。然后通过迭代获得新打开的窗口所需的句柄。之后，您可以使用切换到打开的窗口`driver.switchTo().window("pass the handle here");`

现在您的控件进入新窗口。然后像这样使用`driver.getCurrentUrl();`

希望这可以帮助你。此致 ：）

# sql - 如何认为解释计划是好的 - Oracle 10G

> ID：13838173
> 
> 赞同：2
> 
> 时间：2012-12-12T10:54:36.613
> 
> 标签：sql, oracle, sql-execution-plan

当一个预言机解释计划被认为是好的？我正在尝试重构 DB Schema，并且视图中有很多查询和非常慢的包。

例如，这是最糟糕的查询之一，给我这个解释计划：

计划 ALL_ROWS成本：18,096 字节：17 基数：1

我不问如何修复查询，只问如何认为解释计划很好。谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:02:20.333

成本估算是根据预言机对需要访问多少块才能回答您的查询的猜测。18,096 是个好数字吗？这取决于你在做什么、你的服务器有多快以及你需要它多快运行。这个数字作为绝对值没有什么意义。

如果您更改 SQL 或和索引并且成本估算下降，这是一个好兆头，但真正重要的是它实际损坏的时间。甲骨文有时会做出错误的估计。

话虽如此，对于在用户等待时运行的东西来说它看起来有点高，但对于批处理作业来说是合理的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T11:40:50.233

在考虑解释计划的结果之前，我们需要了解以下术语，基数——估计每个操作产生的行数。
• 访问方法——通过表扫描或索引访问来访问数据的方式。• 连接方法——用于将表相互连接的方法（例如，散列、排序合并等）。• 连接类型– 连接类型（例如，外、反、半等）。• 连接顺序– 表相互连接的顺序。
• 分区修剪——是否只访问必要的分区来回答查询？
• 并行执行——在并行执行的情况下，计划中的每个操作是否并行执行？是否使用了正确的数据重新分配方法？

通过回顾四个关键要素：基数估计、访问方法、连接方法和连接顺序；您可以确定执行计划是否是最佳可用计划。本白皮书将对您有所帮助，[http://www.oracle.com/technetwork/database/focus-areas/bi-datawarehousing/twp-explain-the-explain-plan-052011-393674.pdf](http://www.oracle.com/technetwork/database/focus-areas/bi-datawarehousing/twp-explain-the-explain-plan-052011-393674.pdf)

# iphone - NSThread 导致 UIWebView 崩溃

> ID：13838174
> 
> 赞同：0
> 
> 时间：2012-12-12T10:54:46.780
> 
> 标签：iphone, ios, nstimer, nsthread, nsrunloop

我想从一开始就解释我的问题。我正在使用 UIWebView 创建一个应用程序。此外，我正在用户使用该应用程序的那一刻捕获屏幕，并使用该图像阵列创建一个视频。

我正在使用 NSTimer 来获取屏幕截图。我工作得很好，但我遇到了一个问题。那是当用户开始滚动网页或当用户在屏幕上按住触摸时 NSTimer 暂停并且在他释放触摸后 NSTimer 继续。

这是我用来获取屏幕截图的 NSTimer。

```
assetWriterTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f/24.0f
                                                    target:self
                                                  selector:@selector (writeSample)
                                                  userInfo:nil
                                                   repeats:YES]; 
```

我用谷歌搜索了这个问题，大多数人都遇到了和我一样的问题。所以他们找到了答案，那就是使用 NSRunLoop。他们说它停止暂停 NSTimer。

所以我使用 NSRunLoop 并将 NSTimer 添加到 NSRunLoop 中，这是我这样做之后的代码。

```
NSRunLoop* runLoop = [NSRunLoop currentRunLoop];
assetWriterTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f/24.0f
                                                    target:self
                                                  selector:@selector (writeSample)
                                                  userInfo:nil
                                                   repeats:YES];

[runLoop addTimer:assetWriterTimer forMode:NSRunLoopCommonModes];
[runLoop run]; 
```

这段代码运行良好，它没有停止暂停 NSTimer。但是在我使用 NSRunLoop 之后，我的应用程序变得非常慢。将网页加载到 WebView 中也需要花费大量时间，并且滚动速度也很慢。

于是我又开始在谷歌搜索，我发现了这个问题。那就是所有这些事情都在主线程中进行，而 iphone 无法同时处理所有事情。所以人们建议使用 NSThread 来解决这个问题。所以我所做的是创建一个 NSThread 并将进程附加到自定义线程。

这是我将 NSThread 应用到它之后的代码。

```
 [NSThread detachNewThreadSelector:@selector(launchTimer) toTarget:self withObject:nil];

 -(void)launchTimer{

    NSRunLoop* runLoop = [NSRunLoop currentRunLoop];
    assetWriterTimer = [NSTimer scheduledTimerWithTimeInterval:1.0f/24.0f
                                                        target:self
                                                      selector:@selector (writeSample)
                                                      userInfo:nil
                                                       repeats:YES];

    [runLoop addTimer:assetWriterTimer forMode:NSRunLoopCommonModes];
    [runLoop run];

 }

-(void) writeSample{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    //did some coding here to take screen shot
    [pool release];
} 
```

这解决了永远放慢应用程序的问题，我的应用程序再次运行非常顺利，但现在带来了严重的问题。我猜这是因为使用线程而发生的。我的自定义线程和主线程现在发生冲突并导致应用程序崩溃。我搜索了谷歌的原因。我发现了一些与此类问题相关的问题，有些人回答了这些问题并说任何 UI 更改都需要在主线程中完成。UIWebView WebThread 也必须在主线程中运行。

这些是我收到的一些错误报告，

![在此处输入图像描述](../Images/7e65d048daf9d6c714a46c470ccb346c.png)

![在此处输入图像描述](../Images/1564443f9abb068b4c73645711629f56.png)

这些错误就像一些线程冲突。但我不知道如何解决这个问题。我将我的代码用于一些没有任何 Web 视图或地图的本机应用程序。所以它在没有崩溃的情况下运行良好。但是当我将它用于具有 WebView 或 Map 的应用程序时，它有时会崩溃并给我这个错误。

我在这里遇到了很多麻烦，如果有人可以给出任何想法或示例代码来处理线程，处理线程优先级，或者在不使用 NSThreads 的情况下使用 NSTimer 和 NSRunLoop，或者在不使用 NSThread 的情况下克服应用程序缓慢，任何答案都是非常非常非常有帮助，我期待很快收到您的来信。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:17:44.303

我的猜测是您为捕获屏幕截图而编写的代码导致了问题。一个简单的测试是注释掉 writeSample 方法中的所有代码，看看应用程序是否仍然崩溃。我这样说是因为你是对的，所有与 UI 相关的任务都应该始终在主线程中工作。

我建议为计时器使用单独的线程，这样您的计时器就不会暂停，然后从 writeSample 方法强制屏幕捕获代码在主线程上运行。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:14:50.230

首先：

一旦你使用了定时器，你就在使用运行循环——你可以[从参考中很容易地看到](http://developer.apple.com/library/ios/documentation/cocoa/reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)：

> 计时器与运行循环一起工作。

（这是第二段的第一句话）

有了这个，你的症状：

*   通过捕获图像阻塞线程会导致它结结巴巴。

这不应该让你感到惊讶！

*   将工作从该线程上移开，释放第一个线程的压力。

震惊，我知道！

好吧，鉴于您没有向我们展示任何导致同步问题的代码，（阅读：崩溃）这个讽刺的答案是我可以为您提供的所有帮助。

那以及阅读和内化我上面链接到的文档的技巧……</p>

* * *

**编辑**

我只是忘了提，这个：

```
NSRunLoop* runLoop = [NSRunLoop currentRunLoop];
assetWriterTimer = [NSTimer scheduledTimerWithTimeInterval:blablabla];
[runLoop addTimer:assetWriterTimer forMode:NSRunLoopCommonModes];
[runLoop run]; 
```

没有多大意义，因为……</p>

> ### -scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:
> 
> 创建并返回一个新的 NSTimer 对象，并以默认模式将其安排在当前运行循环中。

（这在[宏伟的文档](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html#//apple_ref/doc/uid/20000319-CHDDAEIA)中也有解释。）

本质上：当您在自己的私有线程上时，默认模式就足够了。不过，您必须确保运行循环实际上正在运行。

这实际上是由该代码片段的最后一行完成的，但它实际上会导致您的方法在定时器被取消之前不会返回......</p>

# dynamics-crm-2011 - 单击自定义导航链接时显示活动选项卡

> ID：13838176
> 
> 赞同：0
> 
> 时间：2012-12-12T10:54:56.337
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在为 CRM 2011 进行自定义。我创建了一个自定义实体（它基于活动，因此也是一种活动类型），创建了与帐户的关系，并在帐户表单上创建了一个指向 Web 资源的自定义导航链接这将为自定义显示提供动力（这只是一个带有 JavaScript 的 html 页面）。

使用 Web 资源而不是标准关系链接，因为它正在执行列表和预览显示，而不仅仅是开箱即用功能提供的列表视图。

我想要做的是在帐户表单上显示活动选项卡（活动功能区选项卡），每当按下自定义导航链接并且用户进入该部分时，它的显示方式与单击活动导航链接时显示的方式相同. 我似乎找不到太多关于标签显示规则的信息，因为我认为这是应该完成的地方（如果可能的话）。

此外，如果有一种 JavaScript 方法（尽管我还没有找到），那么它也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:20:18.190

我们有一个解决方案。

**免责声明**不推荐（或支持）此解决方案，因为它是史诗般的完整破解，但它为我们解决了问题。这是一个临时的功能，因为我们构建了一个更适合客户的自定义解决方案，所以它不会继续向前发展，这就是黑客对我们有用的原因。此外，脚本可以写得更好，我们只是想把它拿出来。

**注意：此解决方案将使用一些外部库，例如 JQuery 和 CRM FetchKit**

**1) 为自定义对象和账户添加关系** 我们有一个自定义实体，我们创建了一个从 Account 实体到我们的自定义实体的 1:N 关系。这使我们能够做的是在帐户表单上创建一个导航链接，该链接指向我们自定义实体的关联视图。一旦链接进入，我们将保存并发布更改。

**2) 获取创建的新导航链接的 id** 上面的链接现在应该在表单上，​​所以在保存和发布之后，我们转到实时视图并使用 IE 开发人员工具获取链接的 id，因为我们需要捕获onclick 并稍后用它做一些事情。

**3) 装饰创建的导航链接的 onclick** 我们有 id 所以我们想用一些额外的功能来装饰 onclick。我们创建了 2 个新的网络资源：

*   **"YourCustomEntity"** _init : Javascript Web 资源：这将用于在帐户表单的 onload 中获取我们创建的链接并更改 onclick 以执行一些其他操作
*   **YourCustomEntity** _page : HTML Page Web Resource：根据原始问题，我们还有一个显示预览窗格的附加要求，这就是我们不能使用标准网格的原因

**“YourCustomEntity”_init** 的代码非常基本，没有任何对象缓存或类似的东西，它只是为了解决我们的问题而编写的。我在代码中添加了注释。Entity 也是一个通用名称，这是我们自定义类型的名称。我们将原始关联视图设置为隐藏而不是显示：无，因为我们仍然需要它在后台加载，因为这是功能区更新和加载的地方，所以肯定有一些脚本正在执行此操作，希望我们知道所以我们可以使用它:)

```
function previewEntityInit(){
    //Catch any navigation link click, we need this because we need to hide our 
    //grid when we are not on the custom entity page
    $('.ms-crm-Nav-Subarea-Link, .ms-crm-FormSelector-SubItem').click(function () {

    //Get the id of the link clicked and the frame injected object
    var id = $(this).attr('id'),
        cFrame = $('#entity_frame_preview');

    //if the frame has already been injected
    if(cFrame.length !== 0) {
        //If we are not in the correct section 
        //(i.e. activities nav link was clicked) hide it 
        if (id !== 'nav_new_account_new_entity') {
            cFrame.attr('style', 'display:none;');
        }
        else{
            //The correct link was clicked, so show it
            cFrame.attr('style', 'display:block; width:100%; height:100%;');
            $('#new_account_new_entityFrame').attr('style', 'visibility: hidden;');
        }
    }
    else{
       //This is the first time the correct link has been clicked
       //So we hide the default associated view and inject our
       //own iframe point to the YourCustomEntity_page embedded resource we created
       var src = Xrm.Page.context.getServerUrl();
        if (id === 'nav_new_account_new_entity') {
           $('#new_account_new_entityFrame').attr('style', 'visibility: hidden;');

          $('<iframe />', {
                id: 'entity_frame_preview',
                src: src + '/WebResources/new_entity_page',
                width: '100%',
                height: '100%'
            }).prependTo('#tdAreas');
        }
    }
}); 
```

**YourCustomEntity_page** 不会在此处显示所有代码，但我们基于此链接：

[预览表单链接](http://bingsoft.wordpress.com/2011/08/07/crm-2011-grid-with-preview-form/) 我们通过以下方式对其进行了更改：

*   只有视图名称是硬编码，其余通过代码获取（代码如下）
*   我们不使用第二个 iframe 选项，而是使用一个简单的 HTML 部分来加载它（下面的代码和我们的加载函数）

**没有硬编码值**

```
var server = Xrm.Page.context.getServerUrl();             
var orgName = "";

// grid related settings
var entityId = window.parent.Xrm.Page.data.entity.getId();
var entityType = "1";
var areaView = "new_account_new_entity"; 
var internalGridElement = "crmGrid_new_account_new_entity";
var timeoutKey = null; 
```

**用于预览的 HTML**

```
<div id="previewForm" style="display: none;">
    <ol>
        <li><span class="lbl">Account:</span><span id="lblAccount"></span></li>
        <li><span class="lbl">Created:</span><span id="lblDate"></span></li>
        <li><span class="lbl">Regarding:</span><span id="lblRegarding"></span></li>
        <li><span class="lbl">Owner:</span><span id="lblOwner"></span></li>
    </ol>
    <div id="subject">
       <span class="lbl">Subject:</span><span id="lblSubject" class="value"></span>
    </div>
    <div>
       <span id="lblMsg"></span>
    </div>
</div> 
```

**加载预览代码**

这使用了一个名为 CRMFetchKit 的外部库。该代码实际上执行了三个 fetch 调用，这并不理想，它应该是一个（使用连接，google it :)），但这不起作用并且正在拖动，所以我们决定只使用三个，因为整个部分将很快就会被托管解决方案取代。

```
function LoadPreviewPane(entity) {
            if (entity != null) {
                $('#previewForm').show();

                var fetchxml = ['<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false">',
                                '  <entity name="new_entity">',
                                        '<attribute name="subject" />',
                                        '<attribute name="description" />',
                                        '<attribute name="createdon" />',
                                        '<attribute name="new_account" />',
                                        '<attribute name="ownerid" />',
                                '    <filter type="and">',
                                '      <condition attribute="activityid" operator="eq" value="' + entity.Id + '" />',
                                '    </filter>',
                                '  </entity>',
                                '</fetch>'].join('');

                CrmFetchKit.Fetch(fetchxml).then(function (results) {

                    var account = window.parent.Xrm.Page.getAttribute("name").getValue(),
                        subject = results[0].getValue('subject'),
                        desc = results[0].getValue('description'),
                        created = new Date(results[0].getValue('createdon')),
                        theDate = created.getDate() + "/" + (created.getMonth() + 1) + "/" + created.getFullYear(),
                        owner = '',
                        regarding = '';

                    var fetchxml2 = ['<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false">',
                                '  <entity name="systemuser">',
                                        '<attribute name="fullname" />',
                                '    <filter type="and">',
                                '      <condition attribute="systemuserid" operator="eq" value="' + results[0].getValue('ownerid') + '" />',
                                '    </filter>',
                                '  </entity>',
                                '</fetch>'].join('');

                    CrmFetchKit.Fetch(fetchxml2).then(function (users) {
                        owner = users[0].getValue('fullname');
                        $('#lblOwner').html(owner);
                    });

                    var fetchxml3 = ['<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false">',
                    '  <entity name="account">',
                    '<attribute name="name" />',
                    '    <filter type="and">',
                    '      <condition attribute="accountid" operator="eq" value="' + results[0].getValue('new_accountname') + '" />',
                    '    </filter>',
                    '  </entity>',
                    '</fetch>'].join('');

                    CrmFetchKit.Fetch(fetchxml3).then(function (regardings) {
                        regarding = regardings[0].getValue('name');
                        $('#lblRegarding').html(regarding);
                    });

                    $('#lblAccount').html(account);
                    $('#lblSubject').html(subject);
                    $('#lblMsg').html(nl2br(desc));
                    $('#lblDate').html(theDate);                        

                });
            }
        } 
```

# c++ - 统一散列函数

> ID：13838178
> 
> 赞同：2
> 
> 时间：2012-12-12T10:55:02.147
> 
> 标签：c++, c, algorithm, hashtable, big-o

哈希表基础知识： - 即将进行重大测试。我们将不胜感激所有帮助。

我基本上对键的统一散列有点困惑。

```
----------------------
| X X X                    <=== Chains; X represents an item in there
----------------------
| X X X                    <=== Multiple X represents collisions
---------------------- 
| 
----------------------
| X X X
----------------------
| X
---------------------- 
```

1.  考虑上述哈希表的情况，其中 M = 5（行数）且总长度为 10。我怎么知道这是哈希表是否被统一哈希？

2.  如果一个人对一组键进行统一散列，这是否意味着散列表中链内的列表也就是由于冲突而导致的链表具有相同的长度？或者它的意思是平均值？

3.  如果对键进行统一散列，这是否意味着该散列表的查找和删除函数是 O(1)（摊销）和 O(n/M) 的纯复杂度，其中 M 是链的总数？

4.  负载因子或 (N/#ofChains) 是否识别散列的一致性？

我希望你能帮助我解决这些问题。我的教授在课堂上提出了很多概念，而我基本上只是在这里将它们弯曲在一起，当我将这些概念放在一起时我会感到困惑。

我在网上搜索更多关于这个概念的研究，我看到了一组幻灯片，如下所示。**如果您能向我解释第二张幻灯片中与键的统一散列相关的等式的含义，**我将不胜感激。

**另外，当他们说“映射到每个插槽的键数相等”时，这是什么意思。是否会说上面显示的我的哈希表不是统一哈希的？**

![在此处输入图像描述](../Images/efd351ab12cb980cbbb5091ef592de7d.png)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T11:14:42.263

幻灯片正在讨论键的所有可能值。重要的是要意识到在您的哈希图中，您在任何给定时间都只有一个键子集。不管你的散列函数有多好，你可能很幸运这些键映射到桶，或者你可能不是。

> 1）考虑上述哈希表的情况，其中 M = 5（行数）且总长度为 10。我怎么知道这是哈希表是否均匀散列？

均匀散列是散列函数的属性，而不是散列表的属性。因此，仅仅通过查看哈希表的内容，是做不到的。您必须查看哈希函数本身以确定它是否是统一的。

> 2）如果一个人对一组键进行统一散列，这是否意味着哈希表中链内的列表也就是由于冲突而导致的链表具有相同的长度？或者它的意思是平均值。

这意味着平均。

> 3）如果一个人对键进行统一散列，这是否意味着这个散列表的查找和删除函数是 O(1)（摊销）和 O(n/M) 的纯复杂度，其中 M 是链的总数.

除了散列函数的属性外，复杂度还取决于负载因子。如果存储桶的数量在元素数量中线性增长，则`O(1)`平均会找到并删除（只要您适当地摊销重新存储桶）。

# jboss - JBoss 应用服务器 7.1 上的 ModeShape 3.0

> ID：13838179
> 
> 赞同：0
> 
> 时间：2012-12-12T10:55:06.190
> 
> 标签：jboss, jcr, federation, modeshape

我正在尝试在 JBoss Application Server 7.1.1 上设置 ModeShape AS7 Kit。ModeShape 具有以下结构。

```
/docs
   /schema
      modeshape_1_0.xsd
/modules
   /javax/jcr/*
   /org/modeshape/*
   /org/hibernate/search-engine/4.1/*
   /org/apache/lucene/3.5/*
/standalone
   /configuration/
      standalone-modeshape.xml
   /deployments
      /modeshape-rest.war/
         .dodeploy
         /META-INF/*
         /WEB-INF/* 
```

有人可以帮助将这些文件复制到 JBoss AS7 安装目录的位置以使 ModeShape 启动并运行吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:35:27.523

查看[文档](https://docs.jboss.org/author/display/MODE/ModeShape+and+JBoss+AS7)，其中包括为 AS7 安装 ModeShape 套件的说明。它实际上就像在现有的 AS7 安装顶部解压缩套件一样简单。

该工具包包含一个示例配置，但如果您创建一个适合您自己需求的配置会更好。最好的方法是[使用](https://docs.jboss.org/author/display/MODE/Configuring+ModeShape+in+AS7)AS7 的命令行界面来设置 Infinispan 缓存、安全性和存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:25:55.283

工作过：

将 ModeShape AS Kit 中的所有内容复制并粘贴到 JBoss 的应用程序服务器的目录中（如果它们存在，或者它们将从 ModeShape 源复制）并运行 JBoss 的

```
./standalone.sh -c="standalone-modeshape.xml". 
```

享受 ：）

# mysql - PDO MySQL 是否只需要一行？

> ID：13838185
> 
> 赞同：0
> 
> 时间：2012-12-12T10:55:22.580
> 
> 标签：mysql, database, pdo

我是否需要在没有用户输入的情况下对只输出一行的查询使用 PDO？我在想我应该在没有 PDO 的情况下使用它来提高一点性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:00:34.327

即使对于这样的查询，使用 PDO 也是一个好主意。我相信 mysql_ 函数（API 的一部分）正在被弃用，如果它们还没有被弃用的话。

# android - 为什么我的文字在设备屏幕上显示时不是粗体

> ID：13838201
> 
> 赞同：0
> 
> 时间：2012-12-12T10:56:25.940
> 
> 标签：android, android-layout, android-emulator

我的**string.xml**：

```
<!--I try to bold my argument %s, like below:-->
<string name="hello">Hello to: <b>%s</b> !</string> 
```

我的布局**main.xml**：

```
<LinearLayout
   ...>

<TextView
     android:id="@+id/hello_txt"
     ...
     .../>

</LinearLayout> 
```

我的**片段**类：

```
public class MyFragment extends Fragment{
  TextView helloTxt;

  @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
      super.onCreateView(inflater, container, savedInstanceState);

    helloTxt = (TextView) findViewById(R.id.hello_txt);

  }

  @Override
  public void onStart() {
     super.onStart();

     //pass "Monday" as the argument to my string
     helloTxt.setText(String.format(getString(R.string.hello), "Monday"));

  }
} 
```

当我在我的设备上运行我的应用程序时，屏幕上显示“ *Hello to: Monday！ ”，但“* **Monday** ”不是**粗体**，但我`<b>`在我的**string.xml**中使用了。为什么不加粗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:24:09.827

试试这个：

字符串.xml：

```
<string name="hello">Hello to:  &lt;b>%s&lt;/b>.</string> 
```

在您的活动中：

```
TextView mytext1 = (TextView) findViewById(R.id.tx1);
mytext1.setText(Html.fromHtml(String.format(getString(R.string.hello), "Monday"))); 
```

这个对我有用。

希望它可以帮助你。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:00:44.050

使用 Html.fromHTML() 方法

```
String str = HTML.fromHTML(String.format(getString(R.string.hello), "Monday"));
helloTxt.setText(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:04:42.827

如果您正在使用`html`标记，那么您需要使用`Html.fromHtml`，如下所示：

```
String styledText = "This is <font color='red'>simple</font>.";

textView.setText(Html.fromHtml(styledText), TextView.BufferType.SPANNABLE); 
```

# jquery - jQuery显示嵌套在div中的段落中的文本

> ID：13838204
> 
> 赞同：0
> 
> 时间：2012-12-12T10:56:46.137
> 
> 标签：jquery, html, text, html-parsing

我的 HTML 看起来像这样：

```
<div class='textbox' data-title='Sometitle'>
<div class='textareaedit'>
     <p><strong>Test sample text</strong></p>
</div>
</div> 
```

我有时会在 div 内有几个不同`<p>`的标签`textareaedit`，有时会在 div`strong`内的文本周围添加标签`<p>`（如本例所示），有时是一个`span`标签，有时在`<p>`.

我想遍历`textbox`我页面上的每一个，获取它的标题以及嵌套`<p>`在`textareaedit`. 我通过控制台提供输出以进行测试。这是我的 jQuery 代码，但第二`console.log()`行没有输出：

```
$('.textbox').each(function() {
    $this = $(this);
    console.log($this.attr('data-title')+ ":\n");
    $this.children('textareadit').children('p').each(function(){
        console.log($(this).html()); // not giving any output, it's blank
    });
}); 
```

我也试过`$(this).text()`了，但没有区别。您可能认为此示例在 中的`<strong>`标记内包含示例文本`<p>`，但我也尝试了没有强项的相同示例，其中文本是 的直接子级`<p>`，但没有任何区别。如何捕获文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:59:20.293

传递给`children()`函数的类选择器`.`在类名之前缺少一个。类名也有拼写错误，`textareadit`应该是`textareaedit`.

```
$this.children('.textareaedit').children('p').each(function(){
    console.log($(this).html()); // not giving any output, it's blank
}); 
```

示例：http: [//jsfiddle.net/aWRaS/](http://jsfiddle.net/aWRaS/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T10:59:58.580

您可以使用`find()`方法来定位它。尝试这样的事情：

```
$this.find('.textareadit > p').each(function(){
    console.log($(this).html());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T11:01:56.773

```
.children('textareadit') 
```

应该读：

```
.children('.textareadit') 
```

当您选择课程时

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T11:06:00.967

类名也拼错了

```
.children('textareadit') should be .children('.textareaedit') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T11:06:12.770

您的选择器中缺少 a `.`，并且您的`textareadit`. 正确的应该是——

```
$this.children('.textareaedit').children('p').each(function(){
    console.log($(this).html()); // now it prints
}); 
```

您将`class selector`作为参数传递给第一个`children`调用，因此您应该在它前面加上一个`.`，因为这是类选择器的工作方式。

[JSF](http://jsfiddle.net/bkHFZ/1/)中。

# javascript - 在文档准备好时调用 AngularJS 函数

> ID：13838205
> 
> 赞同：28
> 
> 时间：2012-12-12T10:56:46.307
> 
> 标签：javascript, angularjs

有没有办法从 JavaScript 函数调用 Angular 函数？

```
function AngularCtrl($scope) {
  $scope.setUserName = function(student){  
    $scope.user_name = 'John';
  }
} 
```

我的 HTML 中需要以下功能：

```
jQuery(document).ready(function(){
  AngularCtrl.setUserName();
} 
```

这里的问题是我的 HTML 代码在页面加载时存在，因此 html 中的 ng 指令没有被编译。所以我想`$compile(jQuery("PopupID"));`在加载 DOM 时。

有没有办法在准备好的文档上调用 Angular 函数？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-20T09:13:33.023

Angular 有自己的功能来测试准备好的文档。您可以进行手动引导，然后设置用户名：

```
angular.element(document).ready(function () {
    var $injector = angular.bootstrap(document, ['myApp']);
    var $controller = $injector.get('$controller');
    var AngularCtrl = $controller('AngularCtrl');
    AngularCtrl.setUserName();
}); 
```

为此，您需要从 html 中删除 ng-app 指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-08T13:44:42.537

上面的答案虽然正确，但却是反模式。在大多数情况下，当您想要修改 DOM 或等待 DOM 加载然后做一些事情（准备好文档）时，您不是在控制器中而是在链接函数中进行。

```
angular.module('myModule').directive('someDirective', function() {
  return {
    restrict: 'E',
    scope: {
      something: '='
    },
    templateUrl: 'stuff.html',
    controller:  function($scope, MyService, OtherStuff) {
        // stuff to be done before the DOM loads as in data computation, model initialisation...
    },
    link: function (scope, element, attributes) 
        // stuff that needs to be done when the DOM loads
        // the parameter element of the link function is the directive's jqlite wraped element
        // you can do stuff like element.addClass('myClass');
        // WARNING: link function arguments are not dependency injections, they are just arguments and thus need to be given in a specific order: first scope, then element etc.
    }
  };
}); 
```

老实说，$document 或 angular.element 的有效使用极为罕见（无法使用指令而不仅仅是控制器），并且在大多数情况下，您最好审查您的设计。

PS：我知道这个问题很老，但仍然必须指出一些最佳实践。:)

# gwt-2.5 - 如何在 GWT 中以不透明度加载时禁用页面

> ID：13838206
> 
> 赞同：0
> 
> 时间：2012-12-12T10:56:49.787
> 
> 标签：gwt-2.5

我有一个要求，当页面加载时，我需要禁用（其中的所有小部件都应该可见但禁用）褪色（不透明度）的页面并仅启用繁忙指示器。.

我怎样才能在 gwt 中实现这一点？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:48:17.153

此功能称为**掩蔽**。有很多方法可以做到这一点。一种方法是通过将屏幕中的所有小部件设为**只读**并通过 css 设置不透明度来禁用所有事件。另一种方法是使用透明的轻微不透明图像作为具有非常高**z-index**属性的背景，并在不再需要该图像时删除它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T07:43:36.870

应用以下 css 样式后，将在所有浏览器中应用遮罩。
.maskingStyle { 背景：#666666; 位置：绝对；左：0；高度：0；z指数：10000；显示：内联块；
宽度：100%；高度：100%；不透明度：0.2；过滤器：文字（“阿尔法（不透明度= 20）”）；-webkit-transition：不透明度 OPACITY_DURATION；-moz 过渡：不透明度 OPACITY_DURATION；-o-transition：不透明度 OPACITY_DURATION；过渡：不透明度 OPACITY_DURATION；}

# javascript - 突出显示 Gridview 行而不是分页器行（ASP.Net，jQuery）

> ID：13838207
> 
> 赞同：0
> 
> 时间：2012-12-12T10:56:54.563
> 
> 标签：javascript, jquery, asp.net, gridview

当鼠标悬停在行上时，我使用以下函数突出显示 gridview 行：-

```
 function pageLoad() {
        $(document).ready(function() {
            $(".Gridview tr").mouseover(function() { $(this).addClass("over"); }).mouseout(function() { $(this).removeClass("over"); });
        });
    } 
```

这对于没有分页的 gridview 工作得很好，但是当 gridview 实现了分页时，当鼠标经过它时，分页器行会突出显示。

任何人都可以提供有关如何防止在鼠标悬停时突出显示寻呼机行的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:10:14.477

尝试添加：

```
PagerStyle-CssClass="pager" 
```

到您的网格视图标记并将您的 js 更新为：

```
 function pageLoad() {
    $(document).ready(function() {
        $(".Gridview tr:not(.pager)").mouseover(function() { $(this).addClass("over"); }).mouseout(function() { $(this).removeClass("over"); });
    });
} 
```

# java - 使用 JMeter 对 GWT RPC 应用程序进行负载测试

> ID：13838208
> 
> 赞同：4
> 
> 时间：2012-12-12T10:56:59.403
> 
> 标签：java, gwt, jmeter

我正在开发一个在 GWT 中开发的项目。由于 GWT-RPC 序列化，请求/响应被编码。您能否告诉我是否有任何方法可以使用 Jmeter 对这种 GWT 应用程序进行性能测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:10:27.420

这个问题已经在这里处理过：

*   [使用 jmeter 进行 GWT 负载测试](https://stackoverflow.com/questions/2803661/gwt-load-testing-with-jmeter)

*   [http://jmeter.512774.n5.nabble.com/Load-Testing-of-GWT-Application-td4841382.html](http://jmeter.512774.n5.nabble.com/Load-Testing-of-GWT-Application-td4841382.html)

我的公司 (UBIK-INGENIERIE) 分发[UBIK LOAD PACK](http://www.ubikloadpack.com)一个**商业**Apache JMeter 插件来加载测试 GWT 和 GWT RPC 应用程序。

您可以使用 Apache JMeter 的标准知识轻松记录、可变和重放基于 GWT 和 GWT RPC 的应用程序。

# symfony - Symfony2：所有捆绑包的全局可配置后端前缀？

> ID：13838211
> 
> 赞同：0
> 
> 时间：2012-12-12T10:57:10.473
> 
> 标签：symfony, configuration, routing

我正在寻找路由前缀的全局配置。有许多不同的捆绑包，我需要一条到后端控制器的路径。

```
/**
 * @Route("/admin/post")
 */
class PostAdminController extends Controller {
} 
```

当我以这种方式配置它时，如果应该更改前缀，我必须编辑很多文件。是否可以使用变量或过滤器？

```
/**
 * @Route("/%BACKEND_PREFIX%/post")
 */
class PostAdminController extends Controller {
} 
```

配置中的某处：

```
backend_prefix = admin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:04:28.677

好的，现在我找到了一个解决方案，但它似乎从 2.1 版开始工作。

[http://symfony.com/doc/current/cookbook/routing/service_container_parameters.html](http://symfony.com/doc/current/cookbook/routing/service_container_parameters.html)

# spring - 为什么需要特定的 Spring FXML Loader

> ID：13838213
> 
> 赞同：2
> 
> 时间：2012-12-12T10:57:15.907
> 
> 标签：spring, javafx-2, fxml

我正在看这个例子：[在 JavaFX 2.0 中构建应用程序](http://www.oracle.com/technetwork/articles/java/zonski-1508195.html)，它们显示了一个自定义 SpringFxmlLoader：

```
import java.io.IOException;
import java.io.InputStream;
import javafx.fxml.FXMLLoader;
import org.springframework.context.ApplicationContext;
public class SpringFxmlLoader
{
private ApplicationContext context;

public SpringFxmlLoader(ApplicationContext context)
{
    this.context = context;
}

public Object load(String url, Class<?> controllerClass) throws IOException
{
    InputStream fxmlStream = null;
    try
    {
        fxmlStream = controllerClass.getResourceAsStream(url);
        Object instance = context.getBean(controllerClass);
        FXMLLoader loader = new FXMLLoader();
        loader.getNamespace().put("controller", instance);
        return loader.load(fxmlStream);
    }
    finally
    {
        if (fxmlStream != null)
        {
            fxmlStream.close();
        }
    }
}
}` 
```

为什么需要创建一个特定的 spring FXML Loader？我的意思是，即使使用简单的 fxml 加载器，当您像这样加载 fxml 时：

`AnchorPane page = (AnchorPane) FXMLLoader.load(TabePaneGraph.class.getResource("Sample.fxml"));`无论如何都会调用示例控制器，并且仍然完成任何初始化。我试图了解这个特定的自定义 SpringFxmlLoader 实现背后的动机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:57:22.720

给猫剥皮的方法有很多种。我猜想在那篇文章中使用 Spring 的动机是因为许多 Web 开发人员都会熟悉它。它还可能使它看起来更像是 Java EE 应用程序的替代品。它是，但不是因为你可以用它来使用弹簧。

您不需要任何依赖注入框架来使用 JavaFX 进行开发，实际上我们需要仔细查看我们的依赖项，因为如果您希望用户下载您的应用程序，它们会增加下载时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:56:27.710

有（至少）2种方法，如何指定控制器：

*   在 FXML 文件中声明控制器类：请注意，您在此处指定类而不是实例。FXMLoader 将创建一个新实例。
*   将现有实例（例如“this”或此处使用 Spring 实例化的 bean）作为控制器传递给 FXMLLoader

> ```
> loader.getNamespace().put("controller", instance); 
> ```

我不确定这部分，但我认为可以`setController()`在最新的 JavaFX 版本中替换它。

# facebook - Facebook 实时更新：页面管理员更改？

> ID：13838221
> 
> 赞同：1
> 
> 时间：2012-12-12T10:57:48.637
> 
> 标签：facebook, facebook-graph-api

你知道如果用户失去或获得 facebook 页面的权利，是否可以得到通知？

我找到了页面的“管理员”字段，但它不可订阅。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T22:08:25.487

如果订阅页面中没有它，那么您将无法订阅它。您将不得不在没有实时更新的情况下正常轮询。

# javascript - 同时调用服务器端方法和javascript代码

> ID：13838223
> 
> 赞同：0
> 
> 时间：2012-12-12T10:57:50.120
> 
> 标签：javascript, asp.net, asp.net-3.5

我正在为移动开发 Web 应用程序，我想从 javascript 打开 SMS 编辑器。下面是我的aspx代码

```
<a class="redBtn fltrt" href="#" id="lnkBuy" runat="server" onclick="return makePayment()" onserverclick="lnkBuy_Click" rev='12' rel='21'>Buy</a> 
```

和 onClick 方法

```
function makePayment()
    {
        try
        {
            var res=confirm('Are you sure to continue?');
            if(res == true)
            {
                window.location='sms:+334343434343';
                return true;
            }
            else
            {
                return false;
            }
        }
        catch(Error)
        {

        }
    } 
```

这是我想打开短信编辑器并调用我的代码背后的代码

```
protected void lnkBuy_Click(object sender, EventArgs e)
{
     //code goes here
} 
```

通过使用它，我可以打开 SMS 编辑器，但无法重定向到我的代码后面的代码。任何人都可以建议我以任何方式同时执行这两项操作或任何其他方便的方式。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:59:15.967

也许你可以用另一种方式来做，先做服务器调用，然后向客户端发送重定向到 "sms:+334343434343" ？

或者，不使用 ASP.NET 回调机制，而是在 window.location 更改之前向服务器发送 AJAX 调用。

这取决于您需要在服务器端做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:26:32.137

我使用 XMLHTTPRequest 将调用发送到我的处理页面并编写另一个函数来重定向到本机 SMS 编辑器调用。

下面是我的代码

```
function makeoldPayment(courseId,basketId)
    {
        try
        {
            var res=confirm('Are you sure to continue?');
            if(res == true)
            {                   
                var mobNo = document.getElementById('hidMNo').value;
                var lerid = document.getElementById('hidLId').value;
                var sendDataToServerReq = getXMLHttpRequest();

                var newURL = window.location.protocol + "//" + window.location.host + "/Learners/SaveToDB.aspx?cid=1&mbid=123456&bid=43&lid=3;
                //alert(newURL)
                sendDataToServerReq.open("POST", newURL, false);

                sendDataToServerReq.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8;");
                gosms();
                sendDataToServerReq.send("mobno="+mobNo+"&lerid="+lerid+"&basketid="+basketId+"&recordid="+courseId);
                location.reload();
                return false;
            }
            else
            {
                return false;
            }
        }
        catch(Error)
        {

        }
    }

    function gosms()
    {
    try
        {
        window.location='sms:+334343434343';
        }
        catch(Error)
        {
        }
    }

    function getXMLHttpRequest()
    {
       var httpRequest = null;

        // Create the appropriate HttpRequest object for the browser.
        if (window.XMLHttpRequest != null){
            httpRequest = new window.XMLHttpRequest();
        }else if (window.ActiveXObject != null){
            // Must be IE, find the right ActiveXObject.
            var success = false;
            for (var i = 0; i < XMLHTTPREQUEST_MS_PROGIDS.length && !success; i++)
            {
                try{
                    httpRequest = new ActiveXObject(XMLHTTPREQUEST_MS_PROGIDS[i]);
                    success = true;
                }
                catch (ex)
                {}
            }
        }

        if (httpRequest == null){
            //alert("Error in HttpRequest():\n\nCannot create an XMLHttpRequest object.");
        }

        return httpRequest;
    } 
```

跳这会帮助一些人:)

# php - Post Loop - Wordpress - 无标题

> ID：13838224
> 
> 赞同：0
> 
> 时间：2012-12-12T10:57:51.787
> 
> 标签：php, wordpress

当我尝试从我的 Wordpress 商店为 Google 购物制作 XML 提要时，我有以下代码：

```
query_posts('post_type=product&showposts=-1&&hide_empty=0');
if (have_posts()) : while (have_posts()) : the_post();

$columns.='<item>';

$columns.='<title>';
$columns.= $post–&gt;post_title;
$columns.='</title>';

$columns.='<link>';
$columns.= 'http://mydomain.co.uk/products/'.$post–&gt;post_name;
$columns.='</link>';

$columns.='<description>';
$columns.=$post–&gt;post_content;
$columns.='</description>';

$columns.='<g:image_link>';
$columns.="http://www.example.com/".$result[$i]['image'];
$columns.='</g:image_link>';

$columns.='<g:price>';
$columns.=$result[$i]['Price'];
$columns.='</g:price>';

$columns.='<g:condition>';
$columns.='new';
$columns.='</g:condition>';

$columns.='<g:id>';
$columns.=$post->ID;;
$columns.='</g:id>';

$columns.='</item>';
endwhile; endif; 
```

但由于某种原因，我无法让标题、内容或邮政名工作......但 ID 会显示正常！？

关于我要去哪里错的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:14:12.040

改变

```
$columns.= $post–&gt;post_title; 
```

到

```
$columns.= get_the_title(); 
```

法典：[get_the_title()](http://codex.wordpress.org/Function_Reference/get_the_title)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:00:31.037

我的 WP 生锈了，但是如果你改变了会发生什么

```
$columns.= $post–&gt;post_title; 
```

到

```
$columns.= the_title(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:10:32.220

弄清楚了。从互联网上复制了 -> - 字符似乎略有不同 - 重新输入了它们，现在看起来很好。谢谢。

# java - 三星galaxy s3上的微调器问题

> ID：13838226
> 
> 赞同：0
> 
> 时间：2012-12-12T10:58:00.277
> 
> 标签：java, android, android-spinner, android-4.0-ice-cream-sandwich

我使用三星 Galaxy s3 来测试我的应用程序，我有三个编辑文本和一个微调器。每当我单击微调器时，它都会清除三个edittext 的edittext 值，并且在单击微调器中的项目后，我会得到编辑文本的值。对于以下版本的 android，微调器会像对话框一样显示，覆盖最大屏幕。但是在Android 4.0 中，它的like 下拉，并且它也清除了edittext 数据。

如何解决这个问题？

```
 spRejectionCode = (Spinner) findViewById(R.id.spRejection);     
    ArrayAdapter<String> adapterNo = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item,Constants.rejectioncode);
    adapterNo.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spRejectionCode.setAdapter(adapterNo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:05:04.697

这不是问题，在早期版本中，微调器看起来像对话框，现在在 android 4.0 及更高版本中看起来像下拉，所以不要担心微调器的外观和感觉。

# php - 从图像大小调整中分离图像标签

> ID：13838227
> 
> 赞同：0
> 
> 时间：2012-12-12T10:58:09.543
> 
> 标签：php, image-processing, imagemagick

我目前在 PHP 中有一个名为 img() 的函数，它至少需要两个参数，例如：

```
print img("foo.jpg", 100); 
```

这将返回如下内容：

```
<img src='/cache/foo_XXXXX.jpg' width='100' height='76' /> 
```

因此，该函数接受参数，调整原始文件的大小并将其保存为服务器上的缓存文件并返回图像标签。显然，如果缓存的版本已经存在，它只是返回它并保存下一次处理。

现在，这在 100 种情况下的 99 种情况下都可以完美运行，但是对于某些网站，有些页面的图片非常多，并且由于图片的缓存版本在 X 天后过期，因此需要重新创建 img() 函数50+ 高分辨率图像到小缩略图，加载这样的页面需要几秒钟，这是不可接受的。

所以我的想法是把它分开。所以这样做：

```
print img("foo.jpg", 100); 
```

会返回这个：

```
<img src='img.php?ARGUMENTS' width='?' height='?' /> 
```

这意味着 img() 函数实际上根本不处理文件，而是输出 HTML，告诉浏览器从 PHP 脚本而不是服务器上的静态图像文件中获取图像。

现在，“ARGUMENT”部分当然会包含 img.php 处理文件所需的所有信息，就像 img() 处理文件一样——也许是函数所有参数的序列化字符串版本？

但问题是图像标签的宽度/高度值！由于处理移到了当前脚本的范围之外，它不知道生成的图像会有多大，对吧？我显然等不及 img.php 完成并返回它。我正在使用 imagemagick 进行处理（所以第二个参数可以是 100、“50%”、“<40”等等），也许有一种方法可以用 imagemagick “dryrun”它 - 即让 imagemagick 返回结果大小使用特定命令的特定文件？

你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:04:48.557

您在数据库中某处拥有所有图像的列表，对吗？您可以在生成 HTML 时添加宽度和高度字段并计算缩放的宽度和高度。您还可以将缩略图的宽度和高度添加到数据库中。

# python - 在 python 连接对象中发生异常之前，如何提交所有待处理的查询

> ID：13838231
> 
> 赞同：1
> 
> 时间：2012-12-12T10:58:27.047
> 
> 标签：python, postgresql, transactions, commit, psycopg2

我在 python 中使用 psycopg2，但我的问题是 DBMS 不可知论（只要 DBMS 支持事务）：

我正在编写一个将记录插入数据库表的 python 程序。要插入的记录数超过一百万。当我编写代码以便在每个插入语句上运行提交时，我的程序太慢了。因此，我更改了我的代码以每 5000 条记录运行一次提交，速度上的差异是巨大的。

我的问题是，在插入记录时会在某些时候发生异常（某些完整性检查失败），我希望将我的更改提交到该点，当然，导致异常发生的最后一个命令**除外**，并继续其余的我的插入语句。

我还没有找到实现这一目标的方法；我实现的唯一一件事就是捕获异常，回滚我的事务并从那个点继续，在那里我松开了我挂起的插入语句。此外，我尝试（深度）复制光标对象和连接对象也没有任何运气。

有没有办法直接或间接地实现此功能，而无需回滚并重新创建/重新运行我的语句？

谢谢大家，

乔治。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:29:02.007

我怀疑你会找到一种快速的跨数据库方法来做到这一点。当一个条目导致批处理失败时，您只需优化批处理大小带来的速度增益和重复工作的速度成本之间的平衡。

一些 DB 可以在出错后继续进行事务，但 PostgreSQL 不能。但是，它确实允许您使用该`SAVEPOINT`命令创建子事务。这些远非免费，但它们的成本低于完整交易。所以你可以做的是每（比如）100 行，发出 a`SAVEPOINT`然后释放之前的保存点。如果你遇到错误，`ROLLBACK TO SAVEPOINT`提交，然后从你离开的地方继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T22:38:33.227

如果您在每 5000 个记录间隔后提交事务，您似乎可以对输入数据进行一些预处理，并将其分解为 5000 个记录块的列表，即`[[[row1_data],[row2_data]...[row4999_data]],[[row5000_data],[row5001_data],...],[[....[row1000000_data]]]`

然后运行您的插入，并跟踪您正在处理的块以及您当前正在插入的记录。当您收到错误时，您重新运行该块，但跳过有问题的记录。

# xpages - 在 XPage 中长时间运行 Java 代码的最佳方法是什么？

> ID：13838232
> 
> 赞同：0
> 
> 时间：2012-12-12T10:58:27.947
> 
> 标签：xpages

所以我有一些 Java 代码需要一些时间才能完成（大约 2 分钟）。我对此无能为力。

但我想知道如何最好地在 XPages UI 中解决这个问题，这样用户可能仍然需要等待，但在它运行时有更多的控制/交互（不仅仅是一个旋转的轮子）。

因此，据我所知，我可以执行以下操作。

*   在 XPage 中调用的 Java 类包装在一个线程中。
*   在线程中从 XPage 调用的 Java 代理。
*   从 XPage 调用的 Java 代理，但等待更新文档。
*   Eclipse 插件（用于客户端）已激活。不确定它会如何与 XPage 对话（通过文档？）。

还有其他方法吗？

如果您在 XPage 中创建了线程，那会在服务器端引起任何问题吗？我是否必须避免在 Java 类中使用 Notes 对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T13:25:46.453

我建议使用 OSGi Tasklet 服务，也就是[DOTS](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=OSGI%20Tasklet%20Service%20for%20IBM%20Lotus%20Domino)。这种方法允许 Java 任务被调度或绑定到事件，就像代理一样，但执行效率明显高于代理。也许与您的需求最相关的是通过控制台触发 DOTS 任务的附加功能，这将允许您的 XPages 代码仅通过通过对象发出远程控制台命令来启动 Java 代码`session`。

此外，请查看[XSP Starter Kit](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XSP%20Starter%20Kit)中用于提供`serverScope`变量的技术。如果您的代码在 DOTS 任务（甚至是代理）中运行，它在不同的 Java 应用程序中运行，因此它不能直接与标准范围变量对话。该`serverScope`方法理论上允许您存储可以从 XPage 和触发任务访问的对象。这有助于使用 Mark 的技术，正如 Per 上面提到的，在任务运行时向用户传达进度：您只需将进度信息存储`serverScope`在`sessionScope`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:57:04.143

一个解决方案是让代理对在数据库中保存新文档做出反应，而不是在您的应用程序中踢代理并使用线程（因为线程可能非常危险并且很容易杀死您的 http 任务）

您可以研究的另一件事是为什么您要执行的代码需要 2 分钟才能完成。代码是干什么用的？在其他数据库中做事或连接到其他非笔记资源？

# solr - 获取 solr 中多值字段的计数

> ID：13838235
> 
> 赞同：7
> 
> 时间：2012-12-12T10:58:36.900
> 
> 标签：solr, solrj

在 solr 中，我有一个名为 animal 的 multiValued 字段，它的值是 {cat,dog}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:15:43.213

如果要计算多值字段中的项目，请使用[CountFieldValuesUpdateProcessorFactory](http://lucene.apache.org/solr/4_0_0/solr-core/org/apache/solr/update/processor/CountFieldValuesUpdateProcessorFactory.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:18:08.317

没有直接的方法来获取多值字段中的项目数。
您始终可以在索引期间维护字段计数并使用它。

如果在查询期间不使用，您可以随时计算列表大小。

# javascript - 内容滑块 - JQuery 问题

> ID：13838239
> 
> 赞同：0
> 
> 时间：2012-12-12T10:59:03.350
> 
> 标签：javascript, jquery, html, css

我正在尝试使用该站点的演示： http: [//slidesjs.com/#overview](http://slidesjs.com/#overview)
并尝试在页面上实现两个滑块。我正在自定义链接演示。

1.  由于我使用了两个不同的滑块：具有不同 css 的滑块 1 和滑块 2，因此我将 global.css 用于滑块 1，并为滑块 2 创建了 text.css。我注意到 js:slides.min.jquery.js 文件使用了像 slides_container、next、prev 这样的“css”元素，所以我创建了另一个 js :slider.text.jquery.js 将 css 内容替换为：slides_containerT、nextT、prevT根据 text.css。但代码不起作用。请帮助我，因为我的项目将于下周一到期。

请帮助解决问题，如果需要更多详细信息，请告诉我。

抱歉，我尝试添加 html、css 和 jquery 代码，但遇到错误。

您能否建议我应该对 js 进行哪些更改：slides.min.jquery.js 以便它使用 css 内容呈现我的第二个滑块：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Demo</title>
 <link rel="stylesheet" href="css/new.css">  
 <link rel="stylesheet" href="css/text.css">    
 <script src="js/slider/jquery.min.js"></script>
 <script src="js/slider/slides.min.jquery.js"></script>
 <script src="js/slider/slider.text.jquery.js"></script>
 <script>
 $(function(){
  // Set starting slide to 1
        var startSlide = 1;
        // Get slide number if it exists
        if (window.location.hash) {
            startSlide = window.location.hash.replace('#','');
        }
        // Initialize Slides 1
        $('#slides1').slides({
            preload: true,
            preloadImage: 'img/slider/loading.gif',
            generatePagination: true,
            play: 5000,
            pause: 2500,
            hoverPause: true,
            // Get the starting slide
            start: startSlide,
            animationComplete: function(current){
                // Set the slide number as a hash
                window.location.hash = '#' + current;
            }
        });

    // Initialize Slides 2
        $('#slides2').slides({
            preload: true,
            preloadImage: 'img/slider/loading.gif',
            generatePagination: true,
            play: 5000,
            pause: 2500,
            hoverPause: true,
            // Get the starting slide
            start: startSlide,
            animationComplete: function(current){
                // Set the slide number as a hash
                window.location.hash = '#' + current;
            }
        });     

    });
  </script>

<div id="container">
 <div id="example"> 
  <div id="slides1">
   <div class="slides_container">
  <div class="slide">
   <img src="img/slider/slide-1.jpg" height="150" style="max-width: 200px" alt="Slide">   
     <div class="tmpSlideCopy">
      <h1>A History of Innovation</h1>
      <p>SLIDE 1  </p>
     </div> 
   </div>
   <div class="slide">
    <img src="img/slider/slide-2.jpg" height="150" style="max-width: 230px" alt="Slide">   
     <div class="tmpSlideCopy">
      <h1>Second Slide</h1>
      <p>Slide 2</p>
     </div> 
   </div>
   <div class="slide">
   <img src="img/slider/slide-3.jpg" height="150" style="max-width: 230px" alt="Slide">   
    <div class="tmpSlideCopy">
     <h1>Third Slide</h1>
     <p>Slide 3</p>
    </div>  
   </div>
</div>
<a href="#" class="prev"><img src="img/slider/arrow-prev.png" width="24" height="43" alt="Arrow Prev"></a>
<a href="#" class="next"><img src="img/slider/arrow-next.png" width="24" height="43" alt="Arrow Next"></a> 
```

欢呼帕姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:49:01.370

你可以试试下面的代码。

```
$(function(){
  $("#slides").slides({
    container: 'slides_container'
  });
}); 
```

其中容器是“css”样式。

```
 .slides_container {
            width:570px;
            height:270px;
        } 
```

有关各种属性和样式的更多信息，请访问[http://slidesjs.com/#docs](http://slidesjs.com/#docs)

# python - sql语句中的pyodbc路径不起作用

> ID：13838241
> 
> 赞同：1
> 
> 时间：2012-12-12T10:59:05.657
> 
> 标签：python, copy, odbc, directory, pyodbc

我对python很陌生，想使用pyodbc将一个表从一个mdb复制到另一个mdb。如果文件夹名称以数字开头，则路径似乎存在问题。我现在google了一个小时，找不到解决方案：

```
DBfile = r"W:\path\1020 Folder\MDB1.mdb"
conn = pyodbc.connect('DRIVER={Microsoft Access Driver (*.mdb)};DBQ='+DBfile1)
cursor = conn.cursor()

sql = """SELECT Table1.* INTO test FROM [W:\path\A 1020 Folder\MB2.mdb].Table1;""" 
sql1 = """SELECT Table1.* INTO test FROM [W:\path\1020 Folder\MB2.mdb].Table1;""" 

cursor.execute(sql) #WORKING
cursor.execute(sql1)  #NOT WORKING
conn.commit() 
```

非常感谢，阿奇姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:01:49.313

You must be very careful when you want to use backshlash `\` in strings. You can escape those using `\\`:

```
sql1 = """SELECT Table1.* INTO test FROM [W:\\path\\1020 Folder\\MB2.mdb].Table1;""" 
```

You can also use raw string just like you did it with `DBfile`

# svn - 如何从 SVN 冲突文件中获取我的代码

> ID：13838253
> 
> 赞同：1
> 
> 时间：2012-12-12T11:00:02.207
> 
> 标签：svn, tortoisesvn

我知道，如果多个开发人员在同一个文件上工作，就会发生冲突。我处理过 NoName.js 文件。后来有人处理这些文件。现在，我看到了这些文件：

```
NoName.js

NoName.js.mine

NoName.js.r11143

NoName.js.r11153 
```

哪个文件包含我工作的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:19:32.053

请查看涵盖您问题的[TortoiseSVN 手册](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-conflicts.html#tsvn-dug-conflicts-file)和[SVNBook章节。](http://svnbook.red-bean.com/en/1.7/svn.tour.cycle.html#svn.tour.cycle.resolve)

包含您的代码的文件（即在您之前的工作副本中存在的代码`svn update`）是**`NoName.js.mine`**

来自[TortoiseSVN 手册](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-conflicts.html#tsvn-dug-conflicts-file)：

> **文件名.ext.mine**
> 
> 这是您的文件，因为它在您更新工作副本之前存在于您的工作副本中 - 也就是说，没有冲突标记。该文件包含您的最新更改，仅此而已。

# java - 如何为 6、6.6 和 6.6.6 等过滤器定义正则表达式？

> ID：13838255
> 
> 赞同：1
> 
> 时间：2012-12-12T11:00:11.933
> 
> 标签：java, sql

我需要维护一个遗留应用程序，它会触发 SQL 查询来搜索存储在不同位置（即站、槽和子槽）的项目。当前查询将“AND (...)”部分附加到主查询，因此它可以动态构建更严格的搜索条件。

当第一个*if*返回 true（意味着用户在桌面应用程序的字段中键入内容并按下 Enter 键）时，我需要检查 jTextFieldPCA 的数据是否符合任何内部条件。数据的值通常是一个数字，但也可以是一个字母。

我正在尝试的正则表达式是这些，但我错过了一些东西。如何确保 6 的值落在第一个内部条件上，6.6 的值落在第二个内部条件上，以及 6.6.6 的值被第三个内部条件捕获？

```
if (jTextFieldPCA.getText().compareTo("") != 0) {

            if (jTextFieldPCA.getText().matches("[A-Za-z0-9]") ) {
                strBuilder.append(" AND CAST(complist.Station AS VARCHAR) LIKE ");
            }

            if (jTextFieldPCA.getText().matches("[A-Za-z0-9]" + "." + "[A-Za-z0-9]") ) {
                strBuilder.append(" AND CAST(complist.Station AS VARCHAR) + '.' + CAST(complist.Slot AS VARCHAR) LIKE ");
            }

            if (jTextFieldPCA.getText().matches("[A-Za-z0-9]" + "." + "[A-Za-z0-9]" + "." + "[A-Za-z0-9]") ) {
                strBuilder.append(" AND CAST(complist.Station AS VARCHAR) + '.' + CAST(complist.Slot AS VARCHAR) + '.' + CAST(complist.SubSlot AS VARCHAR) LIKE ");
            }
(...) 
```

提前致谢，

特鲁德维希

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:03:34.637

在点字符之前添加反斜杠

```
jTextFieldPCA.getText().matches("[A-Za-z0-9]" + "\\." + "[A-Za-z0-9]") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:05:04.810

点是正则表达式中的特殊字符（表示任何数字），您需要对其进行转义

```
 "[A-Za-z0-9]" + "\\." + "[A-Za-z0-9]" 
```

查看**预定义字符类** [正则表达式模式部分](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)

# java - java关闭服务器套接字并打开端口

> ID：13838256
> 
> 赞同：3
> 
> 时间：2012-12-12T11:00:16.157
> 
> 标签：java, timeout, serversocket

我正在创建一个基于 Java 的服务器。

我正在使用服务器套接字来接受传入的消息。

但是在我的程序中的某个时刻，我希望服务器套接字监听另一个端口。

我关闭服务器套接字。并用我的新端口开始一个新的。一切都很好。

但是，当我再次将服务器套接字更改为以前的端口时，它给了我一个错误。

我读过服务器套接字在我关闭它后会保持一段时间处于超时状态的内容。

所以这是我的问题：我可以绕过服务器套接字的这种超时状态，并在我关闭它之后再次使我的端口可用并想再次收听同一个端口吗？

* * *

编辑：我制作和监听服务器套接字的函数和我的使服务器套接字无效并在之后创建一个新套接字的函数

```
public void makeServerSocketWithPort(int portnr) throws IOException, Exception
{
    server = new ServerSocket(portnr);
    server.setReuseAddress(true);
    while(!portchanged)
    {
        Socket sock = server.accept();
        System.out.println(server.getLocalPort());
        System.out.println(sock.getLocalPort());
        handler = new Requesthandler(sock); //should be in a thread
        System.out.println(server.getLocalPort());
        System.out.println(sock.getLocalPort());
    }

}

public void invalidateRequestHandler(int newPort)
{   
    if(server != null)
    {
       portchanged = true; 
        try {
            server.close();
        } catch (IOException ex) {
            Logger.getLogger(Controlserver.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    portchanged = false;
    makeServerSocketWithPort(newPort);
} 
```

* * *

错误堆栈跟踪：

```
Exception in thread "main" java.net.SocketException: Socket closed
at java.net.PlainSocketImpl.socketAccept(Native Method)
at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)
at java.net.ServerSocket.implAccept(ServerSocket.java:462)
at java.net.ServerSocket.accept(ServerSocket.java:430)
at stuff.Controlserver.makeServerSocketWithPort(Controlserver.java:63)
at stuff.Main.main(Main.java:44) 
```

* * *

编辑：第二次尝试修复它无济于事：

```
public void makeServerSocketWithPort(int portnr, boolean invalidated) throws IOException, Exception
{
    if(!invalidated)
    {
        server = new ServerSocket();
        server.setReuseAddress(true);
        server.bind(new InetSocketAddress(portnr));

        portchanged = false;
    }
    else
    {
        //TODO: invalidate the old requestHandler
        if(server != null)
        { 
            try 
            {
                server.close();
                server = null;
            } 
            catch (IOException ex) 
            {
                Logger.getLogger(Controlserver.class.getName()).log(Level.SEVERE, null, ex);
            }
        }

        if(server.isClosed())
        {
            System.out.println("closed biatch!");
        }
        else
        {
            System.out.println("surprise moddafakkaaaaa!!!");
        }

        //---------------------------------------------
        //then make new requestHandler with new port
        portchanged = true;
    }

    while(!portchanged)
    {
        if(server != null && !server.isClosed() && !invalidated)
        {
            Socket sock = server.accept();
            System.out.println(server.getLocalPort());
            System.out.println(sock.getLocalPort());
            System.out.println("test");
            handler = new Requesthandler(sock); //should be in a thread
            handler.start();
            System.out.println("ja harm");
            System.out.println(server.getLocalPort());
            System.out.println(sock.getLocalPort());
        }
        else
        {
            portchanged = true;
        }
    }

    if(portchanged)
    {
        portchanged = false;
        makeServerSocketWithPort(portnr, false);
    }
} 
```

这再次正常工作。我可以浏览我的 html 页面。当我通过其中一个网页更改端口号时，它会在我的存储 xml 文件中正确存储和更改。但是当我更改我的套接字并通过该套接字立即导航到一个页面时，它说它已关闭并且在我重新启动我的应用程序之前无法工作。

我仍在寻找一种方法来规避这种重启。

* * *

好吧，我解开了这个谜。事情是我只需要稍微重建我的类以更好地支持线程。我没有关闭套接字然后创建一个新线程，而是启动了一个新线程然后关闭了套接字。经过一番摆弄，它似乎工作得很好。

感谢您的回复和东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:14:25.013

这是操作系统的正常服务器套接字行为。操作系统将端口保持在 WAIT_TIMEOUT 状态。要解决此问题，请尝试使用 `ServerSocket.setReuseAddress(boolean on)`. 这将启用/禁用`SO_REUSEADDR`套接字选项。 [在此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html#setReuseAddress%28boolean%29)查看文档。

引用方法的javadoc`setReuseAddress`

> 当 TCP 连接关闭时，连接可能会在连接关闭后的一段时间内保持超时状态（通常称为 TIME_WAIT 状态或 2MSL 等待状态）。对于使用众所周知的套接字地址或端口的应用程序，如果存在涉及套接字地址或端口的处于超时状态的连接，则可能无法将套接字绑定到所需的 SocketAddress。
> 
> 在使用 bind(SocketAddress) 绑定套接字之前启用 SO_REUSEADDR 允许绑定套接字，即使先前的连接处于超时状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:45:56.690

使用[TCPview](http://tcpview.en.softonic.com/)查看系统中所有打开的端口。您可以关闭那些正在使用的端口。

# excel - excel数字格式 - 不同的十进制数字

> ID：13838273
> 
> 赞同：1
> 
> 时间：2012-12-12T11:01:37.230
> 
> 标签：excel, formatting, cell

我正在尝试使用这些规则设置特殊的单元格编号格式：

*   显示百分比
*   最多显示 3 位数字（小数 + 整数部分）

所以我可以显示 100% 或 99.3% 或 1.27% 但不能显示 100.9% 或 100.27% 或 99.27%。

当然，我可以有负数（-27.3%），这不会影响我的规则。

我尝试使用单元格格式化选项但没有成功：

```
[<1]0.00%;[<10]0.0%;0% 
```

因为似乎excel（2010）在单元格格式中不支持超过2个条件（所以我不能扩展它来管理负数......）

反正它在那里做我想做的事吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-09T09:31:40.260

通过在 VBA 中实现一个函数，我有一个相当原始的解决方案：

```
Function formatStr(myVal As Double) As String
' the smaller the number, the more digits are to be shown
Dim retStr      As String
Dim absVal      As Double

    absVal = Abs(myVal)

    If absVal >= 100 Then
        retStr = "0"
    ElseIf absVal >= 10 Then retStr = "0.0"
    ElseIf absVal >= 1 Then retStr = "0.00"
    Else ' number is between -1 and 1
        retStr = ".000"
    End If

    formatStr = retStr
End Function 
```

...然后可以在这样的 VBA 语句中使用：

```
 myVal = 0.5555: ActiveSheet.Cells(27, 4).Value = Format(myVal, formatStr(myVal)) 
```

如果你想在工作表单元格中使用它，你需要另一个小功能

```
 Function FormatAlignDigits(myVal As Double) As Double
     FormatAlignDigits = Format(myVal, formatStr(myVal))
  End Function 
```

=> 您可以在需要结果的单元格中输入***=FormatAlignDigits(B27)***。B27 是本例中包含源数据的单元格。

我的测试结果：

100.3 => 100
100.5 => 101
10.53 => 10.5
10.55 => 10.6
1.553 => 1.55
1.555 => 1.56
0.5553 => 0.555
0.5555
=> 0.556
-0.5555 => -0.556
-0.5553 = > -0.555 -1.555 => -1.56
-1.553 => -1.55
-10.55 => -10.6
-10.53 => -10.5
-100.5 => -101
-100.3 => -100

我确信可以有一个更花哨的解决方案，例如使用函数“formatStr”的参数，它告诉数字位数下降到 0 的幂（这里：幂 = 2；意思是如果值 >= 100） . 对我来说，这个原始的东西很好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:27:23.797

在功能区的主页选项卡下选择条件格式：

![有条件的瓷砖](../Images/33a1119b790864f2688771ca4cffe370.png)

然后选择新规则或管理规则（使用后者，您可以选择新规则，但也可以概览所有当前规则）

然后选择**使用公式来确定要格式化的单元格**并参考单元格本身输入公式（在我的情况下，单元格**A1**被选中，去掉 $ 符号以使其也可以应用于其他单元格本身！）：

![新规则](../Images/aee79b6b497b8930cdc8986782b66282.png)

现在单击 Format... 并选择所需的数字格式作为百分比和所需的小数位数。

对您要区分的所有情况重复此操作。

由于值可能是负数，我使用 ABS() 始终测试单元格绝对值的规则。

请注意，您可以使所有规则适用于 2 侧有限值范围（在我的示例中，最小值为 0.1，最大值为 1（分别为 10% 和 100%）。或者，您只能确定最小值或最大值并勾选右端的 Stof If True 框用于所有涉及的规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-16T11:01:14.763

我最近解决了这个问题，但最多配置 6 位小数。请求如下：

> 我们希望以与用户输入相同的方式显示数字，但允许不超过 6 位小数：

*   1 -> 1
*   1,1 -> 1,1
*   1,12 -> 1,12
*   ...
*   1,123456 -> 1,123456
*   1,1234567 -> 1,12345 **7** *（从这一点开始）*

这可以使用条件格式和从整数开始的每个小数的一条规则来解决。整数是没有小数的数字，所以`X MOD 1 = 0`. 我们可以应用这个逻辑，将数字乘以 10^N，即 N 是我们想要的小数位数。此外，当我们检测到单元格值中的小数位数时，我们希望停止应用规则，因此请务必标记“如果为真则停止”标志，并且规则的顺序是从最严格的一个（整数）到限制性越小（代表允许的最大小数位数）。

总而言之，您必须配置以下方式（在我为 B 列做的示例中）：

*   整数：`=MOD(B2;1)=0`
*   一位小数：`=MOD(B2*10;1)=0`
*   两个小数：`=MOD(B2*100;1)=0`
*   ...
*   六个小数：`=MOD(B2*1000000;1)=0`

[![在此处输入图像描述](../Images/2a15bcd77ce29b2e93cbf8eeda56ed15.png)](https://i.stack.imgur.com/KI4RS.png)

[![在此处输入图像描述](../Images/0ceb6d5e473d0a74d075c3bcca61ff2b.png)](https://i.stack.imgur.com/abdom.png)

还将单元格的默认格式设置为具有支持的最大小数位数的数字：

[![在此处输入图像描述](../Images/cf2fcc169aac812290814db5b689de6b.png)](https://i.stack.imgur.com/PC1o7.png)

最后是 Excel 上的工作结果：

[![在此处输入图像描述](../Images/438bfa243246378edd05ba1b20f027fe.png)](https://i.stack.imgur.com/acj0q.png)

# javascript - 向这个 javascript 倒计时脚本添加前导零？

> ID：13838278
> 
> 赞同：0
> 
> 时间：2012-12-12T11:01:51.660
> 
> 标签：javascript, countdown

我正在使用以下倒计时脚本，效果很好，但我不知道如何在数字中添加前导零（例如，它显示 09 而不是 9。）有人可以帮帮我吗？这是当前脚本：

```
function countDown(id, end, cur){
        this.container = document.getElementById(id);
        this.endDate = new Date(end);
        this.curDate = new Date(cur);

var context = this;

var formatResults = function(day, hour, minute, second){
    var displayString = [
                '<div class="stat statBig">',day,'</div>',
                '<div class="stat statBig">',hour,'</div>',
                '<div class="stat statBig">',minute,'</div>',
                '<div class="stat statBig">',second,'</div>'
    ];
    return displayString.join("");
}

var update = function(){
    context.curDate.setSeconds(context.curDate.getSeconds()+1);

    var timediff = (context.endDate-context.curDate)/1000; 

    // Check if timer expired:
    if (timediff<0){ 
        return context.container.innerHTML = formatResults(0,0,0,0);
    }

    var oneMinute=60; //minute unit in seconds
    var oneHour=60*60; //hour unit in seconds
    var oneDay=60*60*24; //day unit in seconds

    var dayfield=Math.floor(timediff/oneDay);
    var hourfield=Math.floor((timediff-dayfield*oneDay)/oneHour);
    var minutefield=Math.floor((timediff-dayfield*oneDay-hourfield*oneHour)/oneMinute);
    var secondfield=Math.floor((timediff-dayfield*oneDay-hourfield*oneHour-minutefield*oneMinute));

    context.container.innerHTML = formatResults(dayfield, hourfield, minutefield, secondfield);

    // Call recursively
    setTimeout(update, 1000);
};

// Call the recursive loop
update();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T11:05:43.047

您只需要检查变量是否小于 10 并将它们添加到前导零。尝试以下操作：

```
function countDown(id, end, cur){
        this.container = document.getElementById(id);
        this.endDate = new Date(end);
        this.curDate = new Date(cur);

var context = this;

var formatResults = function(day, hour, minute, second){
    day = (day < 10) ? "0"+day : day;
    hour = (hour < 10) ? "0"+hour : hour;
    minute = (minute < 10) ? "0"+minute : minute;
    second = (second < 10) ? "0"+second: second; 
    var displayString = [
                '<div class="stat statBig">',day,'</div>',
                '<div class="stat statBig">',hour,'</div>',
                '<div class="stat statBig">',minute,'</div>',
                '<div class="stat statBig">',second,'</div>'
    ];
    return displayString.join("");
}

var update = function(){
    context.curDate.setSeconds(context.curDate.getSeconds()+1);

    var timediff = (context.endDate-context.curDate)/1000; 

    // Check if timer expired:
    if (timediff<0){ 
        return context.container.innerHTML = formatResults(0,0,0,0);
    }

    var oneMinute=60; //minute unit in seconds
    var oneHour=60*60; //hour unit in seconds
    var oneDay=60*60*24; //day unit in seconds

    var dayfield=Math.floor(timediff/oneDay);
    var hourfield=Math.floor((timediff-dayfield*oneDay)/oneHour);
    var minutefield=Math.floor((timediff-dayfield*oneDay-hourfield*oneHour)/oneMinute);
    var secondfield=Math.floor((timediff-dayfield*oneDay-hourfield*oneHour-minutefield*oneMinute));

    context.container.innerHTML = formatResults(dayfield, hourfield, minutefield, secondfield);

    // Call recursively
    setTimeout(update, 1000);
};

// Call the recursive loop
update();
} 
```

* * *

**更新：**

您还可以使用@Alnitak 解决方案并用函数包装它，效果是一样的，您将集中您的逻辑：

```
function countDown(id, end, cur){
        this.container = document.getElementById(id);
        this.endDate = new Date(end);
        this.curDate = new Date(cur);

var context = this;

var addLeadingZeros = function(number){
    return (number < 10) ? "0"+number : number;
}

var formatResults = function(day, hour, minute, second){
    day = addLeadingZeros(day);
    hour = addLeadingZeros(hour);
    minute = addLeadingZeros(minute);
    second = addLeadingZeros(second); 
    var displayString = [
                '<div class="stat statBig">',day,'</div>',
                '<div class="stat statBig">',hour,'</div>',
                '<div class="stat statBig">',minute,'</div>',
                '<div class="stat statBig">',second,'</div>'
    ];
    return displayString.join("");
}

var update = function(){
    context.curDate.setSeconds(context.curDate.getSeconds()+1);

    var timediff = (context.endDate-context.curDate)/1000; 

    // Check if timer expired:
    if (timediff<0){ 
        return context.container.innerHTML = formatResults(0,0,0,0);
    }

    var oneMinute=60; //minute unit in seconds
    var oneHour=60*60; //hour unit in seconds
    var oneDay=60*60*24; //day unit in seconds

    var dayfield=Math.floor(timediff/oneDay);
    var hourfield=Math.floor((timediff-dayfield*oneDay)/oneHour);
    var minutefield=Math.floor((timediff-dayfield*oneDay-hourfield*oneHour)/oneMinute);
    var secondfield=Math.floor((timediff-dayfield*oneDay-hourfield*oneHour-minutefield*oneMinute));

    context.container.innerHTML = formatResults(dayfield, hourfield, minutefield, secondfield);

    // Call recursively
    setTimeout(update, 1000);
};

// Call the recursive loop
update();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:05:10.980

最简单的事情是输入一个实用函数来填充你的数字：

```
function pad2(n) {
    return (n < 10) ? '0' + n : n;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T11:37:22.813

IMO，获得前导零的最简单方法是使用`substr`：

```
var n = 10;
console.log(('00' + n).substr(-2));//logs 10
n = 2;
console.log(('00' + n).substr(-2));//logs 02 
```

十分简单。如果要将其倒入函数中，则返回一个字符串：

```
function addLeadingZeroes(n)
{
    return ('00' + n).substr(-2);
} 
```

就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:11:30.020

这应该有助于：

```
function countDown(id, end, cur){
        this.container = document.getElementById(id);
        this.endDate = new Date(end);
        this.curDate = new Date(cur);

var context = this;

var formatNum = function (num) {
    if (num.toString().length < 2) {
        return '0' + num;
    }    
    return num;
}

var formatResults = function(day, hour, minute, second){
    formatNum(day);
    formatNum(hour);
    formatNum(minute);
    formatNum(second);    
    var displayString = [
                '<div class="stat statBig">',day,'</div>',
                '<div class="stat statBig">',hour,'</div>',
                '<div class="stat statBig">',minute,'</div>',
                '<div class="stat statBig">',second,'</div>'
    ];
    return displayString.join("");
}

var update = function(){
    context.curDate.setSeconds(context.curDate.getSeconds()+1);

    var timediff = (context.endDate-context.curDate)/1000; 

    // Check if timer expired:
    if (timediff<0){ 
        return context.container.innerHTML = formatResults(0,0,0,0);
    }

    var oneMinute=60; //minute unit in seconds
    var oneHour=60*60; //hour unit in seconds
    var oneDay=60*60*24; //day unit in seconds

    var dayfield=Math.floor(timediff/oneDay);
    var hourfield=Math.floor((timediff-dayfield*oneDay)/oneHour);
    var minutefield=Math.floor((timediff-dayfield*oneDay-hourfield*oneHour)/oneMinute);
    var secondfield=Math.floor((timediff-dayfield*oneDay-hourfield*oneHour-minutefield*oneMinute));

    context.container.innerHTML = formatResults(dayfield, hourfield, minutefield, secondfield);

    // Call recursively
    setTimeout(update, 1000);
};

// Call the recursive loop
update();
} 
```

唯一的区别是方法`formatNum`和它的四个调用：

```
formatNum(day);
formatNum(hour);
formatNum(minute);
formatNum(second); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T11:14:02.107

如果数字小于 10 与天、小时、秒...

```
day = day<10?'0' + day : day;
hour = hour<10?'0' + hour : hour;
second = second<10?'0' + second : second; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-30T13:52:54.470

我是新手，但我做到了，而且成功了！

```
if (days< 10) {
        day =  "0"+days;}

  if (hours < 10) {
    hours = "0"+hours;
}

  if (minutes < 10) {
    minutes = "0"+minutes;
  }

  if (seconds < 10) {
    seconds = "0"+seconds;
}

  // Output the result
  document.getElementById("demo").innerHTML = days + ":" + hours + ":"
  + minutes + ":" + seconds + ""; 
```

# java - 推送融合图表的多个更新

> ID：13838280
> 
> 赞同：1
> 
> 时间：2012-12-12T11:01:57.093
> 
> 标签：java, fusioncharts

我正在使用 zoomline 融合图表在 UI 上显示，通过使用 AJAX 我正在获取数据`@label=4:20PM,4:30PM&ToolText=123,515,4125|635,125,452,369&value=1,1,1,1|2,2,2,2`。

如何将此数据添加到我的缩放线图表？我的图表最初加载了 JSON 数据。

# iphone - 如何将图像转换为位图代码以在 iphone 中进行蓝牙打印

> ID：13838283
> 
> 赞同：2
> 
> 时间：2012-12-12T11:02:14.313
> 
> 标签：iphone, ios, nsdata

我有兴趣使用蓝牙打印机设备以编程方式从 iPhone 打印图像。

在其中一个示例代码中，我实现了文本打印代码，但在该示例中，我没有了解如何将图像转换为格式，例如

```
 unsigned char buffer3[796]={
        0x55 ,  0x66 ,  0x77 ,  0x88 ,  0x44 ,  0x1B ,  0x58 ,  0x31 ,  
        0x19, 0x20, 
        0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x80 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x01 ,0xC0 ,0x00
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x01 ,0x80 ,0x00 ,0x03 ,0x60 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x03
        ,0xA0 ,0x00 ,0x07 ,0xB0 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x05 ,0x60 ,0x00 ,0x07 ,0xD8 ,0x00
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x05 ,0xA0 ,0x00 ,0x13 ,0xEC ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x04 
        ,0x20 ,0x00 ,0x29 ,0xF4 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x03 ,0xC0 ,0x00 ,0x64 ,0xF9 ,0x00
        ,0x0F ,0xFF ,0x9C ,0x01 ,0xC0 ,0x19 ,0xFF ,0xC0 ,0x7F ,0xFC ,0x7F ,0xF9 ,0xC0 ,0x3D ,0xFF
        ,0xF1 ,0xFF ,0xE3 ,0xFF ,0xC0 ,0x00 ,0x00 ,0xF2 ,0x73 ,0x80 ,0x0F ,0xFF ,0x9C ,0x01 ,0xC0
        ,0x19 ,0xFF ,0xC0 ,0x7F ,0xFE ,0x7F ,0xFD ,0xE0 ,0x3D ,0xFF ,0xF1 ,0xFF ,0xE3 ,0xFF ,0xC0
        ,0x00 ,0x00 ,0x79 ,0x26 ,0xC0 ,0x0F ,0xFF ,0xDC ,0x01 ,0xC0 ,0x19 ,0xFF ,0xC0 ,0x7F ,0xFE
        ,0xFF ,0xFD ,0xF0 ,0x7D ,0xFF ,0xFB ,0xFF ,0xF7 ,0xFF ,0xE0 ,0x00 ,0x03 ,0x3C ,0x8F ,0x60
        ,0x0C ,0x01 ,0xDC ,0x01 ,0xC0 ,0x19 ,0x80 ,0x00 ,0x70 ,0x0E ,0xE0 ,0x1D ,0xF0 ,0x7D ,0x80
        ,0x3B ,0x80 ,0x77 ,0x00 ,0xE0 ,0x00 ,0x04 ,0x9E ,0x8F ,0xB0 ,0x0E ,0x01 ,0xDC ,0x01 ,0xC0
        ,0x19 ,0x80 ,0x00 ,0x70 ,0x0E ,0xE0 ,0x1D ,0xF8 ,0xFD ,0x80 ,0x33 ,0x80 ,0x77 ,0x00 ,0xE0
        ,0x00 ,0x0E ,0x4F ,0x27 ,0xD8 ,0x0F ,0xFF ,0x9C ,0x01 ,0xC0 ,0x19 ,0xFF ,0xC0 ,0x7F ,0xFC 
        ,0xE0 ,0x1D ,0xF9 ,0xFD ,0xFF ,0xF3 ,0x80 ,0x77 ,0x00 ,0xE0 ,0x00 ,0x0F ,0x26 ,0x53 ,0xC8
        ,0x0F ,0xFF ,0x9C ,0x01 ,0xC0 ,0x19 ,0xFF ,0xC0 ,0x7F ,0xFC ,0xEF ,0xFD ,0xDD ,0xDD ,0xFF
        ,0xF3 ,0x80 ,0x77 ,0x00 ,0xE0 ,0x00 ,0x07 ,0x90 ,0xC9 ,0xF0 ,0x0F ,0xFF ,0xDC ,0x01 ,0xC0
        ,0x19 ,0xFF ,0xC0 ,0x7F ,0xFE ,0xEF ,0xFD ,0xDF ,0x9D ,0xFF ,0xFB ,0x80 ,0x77 ,0x00 ,0xE0
        ,0x00 ,0x03 ,0xC9 ,0xE4 ,0xE0 ,0x0C ,0x00 ,0xDC ,0x01 ,0xC0 ,0x19 ,0x80 ,0x00 ,0x70 ,0x06 
        ,0xE7 ,0xFD ,0xCF ,0x9D ,0x80 ,0x3B ,0x80 ,0x77 ,0x00 ,0xE0 ,0x00 ,0x01 ,0xF0 ,0xF2 ,0x40
        ,0x0E ,0x01 ,0xDC ,0x00 ,0xC0 ,0x19 ,0x80 ,0x00 ,0x70 ,0x0E ,0xE0 ,0x1D ,0xCF ,0x1D ,0x80
        ,0x3B ,0x80 ,0x77 ,0x00 ,0xE0 ,0x00 ,0x00 ,0xE6 ,0x79 ,0x00 ,0x0F ,0xFF ,0xDF ,0xFC ,0xFF
        ,0xF9 ,0xFF ,0xC0 ,0x7F ,0xFE ,0xE0 ,0x1D ,0xC7 ,0x1D ,0xFF ,0xFB ,0xFF ,0xF7 ,0xFF ,0xE0
        ,0x00 ,0x00 ,0x49 ,0x3D ,0x00 ,0x0F ,0xFF ,0x9F ,0xFC ,0xFF ,0xF9 ,0xFF ,0xC0 ,0x7F ,0xFE
        ,0xE0 ,0x1D ,0xC2 ,0x1D ,0xFF ,0xF1 ,0xFF ,0xE3 ,0xFF ,0xC0 ,0x00 ,0x00 ,0x1C ,0x9E ,0x00 
        ,0x0F ,0xFF ,0x1F ,0xFC ,0x7F ,0xE1 ,0xFF ,0xC0 ,0x7F ,0xFC ,0xE0 ,0x1D ,0xC0 ,0x1D ,0xFF
        ,0xE0 ,0xFF ,0xC1 ,0xFF ,0x80 ,0x00 ,0x00 ,0x1E ,0x4C ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
        ,0x00 ,0x00 ,0x0F ,0x20 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x07 ,0x90 ,0x00
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x03 ,0xE0 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x01 ,0xC0 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x80 ,0x00
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 ,0x00 
        ,0x00 ,0x00 ,0x00   
    };

    //[self addLabel:@"buffer3 is selected"];
    [[session outputStream] write:(const uint8_t *)buffer3 maxLength:796];//send print package*/ 
```

这是图像打印的示例代码我无法打印任何其他图像，因为我不知道如何将 UIImage 或 NSData 转换为下面提到的位代码。如果有任何正确的分步方法来进行图像到位图的转换，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T12:55:05.157

你可以看看这个问题，这个问题和我的问题基本相同，你问的是：[如何将十六进制数组转换为 UIImage？](https://stackoverflow.com/questions/14093143/how-do-i-convert-a-hex-array-into-a-uiimage)

查看 p25 打印机的开发人员指南（pdf 附在答案中的上述链接中）[特别是通过 p.20 - 24；p。一些示例见第 48 - 53 页，示例代码中的 iPhone 特定打印命令见第 56 页] 第 22 页显示了图像是如何由像素组成的。我正在考虑将 .png 图像转换为 .bmp 或一些简单的黑白图像格式，我还不知道。如果你有任何成功，你可以分享。其他六个问题中给出的解决方案与您的完全一样，还没有帮助我完全解决问题（尽管我还没有放弃）

祝你好运！

**更新**

到目前为止，我已经设法通过将像素值设置为黑色或白色来将 .png 图像转换为黑白图像，具体取决于 RGB 值的平均值。我的代码是来自不同帖子的代码的组合，我没有在这里发布它们的链接。

每个像素由 4 个字节表示。一旦我将像素的颜色值更改为黑色或白色，我只需要查看每 4 个像素的第一个字节即可进行其余的计算。如果它的值为 0（r、g、b 都 == 0，因此像素的颜色为黑色）我将 2^7 存储在**int** var **pixelCount**中，它以二进制表示**10000000**，因此根据打印机为 1 个像素. 然后我继续到下一个像素，如果该组 4 个字节的第一个**字符的值为 0（像素为黑色），则将 2^6（二进制的 01000000）添加到****pixelCount 。**添加 8 个像素的 2^ 值并存储为**无符号字符******它代表 8 个像素（1 个字节）。我已将这些 char 值的缓冲区数组发送到打印机，但它会打印 ASCII 字符，这可能意味着我的打印图像命令输入错误。****

 ****任何关于我的代码的评论将不胜感激。希望这可以帮助。

```
UIImage *image = [UIImage imageNamed:@"label.png"];
CGImageRef imageRef = [image CGImage];
NSUInteger width = CGImageGetWidth(imageRef);
NSUInteger height = CGImageGetHeight(imageRef);
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

unsigned char *rawData = (unsigned char*) calloc(height*width*4, sizeof(unsigned char));
NSUInteger bytesPerPixel = 4;
NSUInteger bytesPerRow = bytesPerPixel* width;
NSUInteger bitsPerComponent = 8;
//this methid returns the pixel data in rawData
CGContextRef context = CGBitmapContextCreate(rawData,
                                             width,
                                             height,
                                             bitsPerComponent,
                                             bytesPerRow,
                                             colorSpace,
                                             kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Big);

CGContextDrawImage(context, CGRectMake(0,0, width,height), imageRef);
CGContextRelease(context);

size_t length = image.size.height*image.size.width*4;
CGFloat intensity;

//black or white
int bw;

//initialize print buffer
size_t bufferLength = (image.size.height*image.size.width) / 8+10;
unsigned char buffer[bufferLength];

buffer[0] = 0x55; buffer[1] = 0x66; buffer[2] = 0x77; buffer[3] = 0x88; //esc sequence
buffer[4] = 0x44; //print command
buffer[5] = 0x1B; buffer[6] = 0x58; buffer[7] = 0x31;buffer[8] = (char) 200/8 ; buffer[9] = 30 ;  //and iOS specific print image command

int pixelCount = 0;
int byteCount = 10;

//check pixel values and average to black or white (4 bytes per pixel)
for(int index = 0; index<length;index+=4){
    intensity = (float)(rawData[index]+rawData [index+1] + rawData[index+2])/3.;

    if(intensity >= 128 ){
        bw = 255;
        //if pixel white, bit is 0

    }
    else {
        bw = 0;
                    //if black pixel, set one bit of byte on
        buffer[byteCount] += (char) pow(2, 7 - pixelCount);

    }

    //next pixel
    pixelCount++;

    //every 8 pixels, move to next char of print buffer
    if(pixelCount % 8 == 0)
        byteCount++;

    //      NSLog(@"Pixel %i : r: %i g: %i b: %i a: %i", counter++, rawData[index], rawData[index+1], rawData[index+2], rawData[index+3]);

    //save pixel values as black or white for new image
    rawData[index]   = bw;
    rawData[index+1] = bw;
    rawData[index+2] = bw;
    rawData[index+3] = 255;
}

CGContextRef bitmapContext=CGBitmapContextCreate(rawData, image.size.width, image.size.height, 8, 4*image.size.width, colorSpace,  kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);

CFRelease(colorSpace);

free(rawData);
CGImageRef cgImage=CGBitmapContextCreateImage(bitmapContext);
CGContextRelease(bitmapContext);

UIImage *bwImage = [UIImage imageWithCGImage:cgImage];
[imageView setImage:bwImage];

//          NSLog(@"2011printing imagelog");
//      //[self addLabel:@"buffer3 is selected"];
//      [[session outputStream] writ 
```****

# c# - C# - 将所有方法参数传递给另一个方法？

> ID：13838288
> 
> 赞同：5
> 
> 时间：2012-12-12T11:02:28.727
> 
> 标签：c#, oop

我有一个类，它有三个重载方法。比方说，有：

```
class MyChildClass
{
    public void myMethod(int i)
        { /* do something with i */ }
    public void myMethod(int a, string b)
        { /* get i from a and b and call: */ myMethod(i); }
    public void myMethod(string c, string d)
        { /* get i from c and d and call: */ myMethod(i); }
} 
```

现在我希望这个类成为其他（父）类中的私有字段，但我需要这三种方法可以访问。现在，我刚刚做了：

```
class MyBaseClass
{
    private MyChildClass myObject = new myChildClass(); // or similar
    public void myMethod(int i) 
        { myObject.myMethod(i);    }
    public void myMethod(int a, string b) 
        { myObject.myMethod(a, b); }
    public void myMethod(string c, string s) 
        { myObject.myMethod(c, d); }
} 
```

有没有办法将它作为一种短方法来实现？看起来像：

```
public void myMethod(unknownListOfArgumentsOfDifferentTypes args)
    { myObject.myMethod(args); } 
```

我尝试使用`public void myMethod(params object[] something)`但没有用。有可能，还是我必须将每种方法“投影”到另一种方法中？

**编辑：**子类有各种方法和字段，我希望仅父类可以访问它们。这就是为什么我不希望父母继承它。我没有解释，对不起，如果它看起来像子类只包含这三个方法。这些是我希望作为父类的公共方法访问的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:10:15.797

你为什么不做

```
class MyChildClass : MyBaseClass
{
} 
```

效果一样，代码少，这种方式`MyChildClass`是`MyBaseClass`

* * *

如果您使用反射实现某种通用外观，您只会降低性能，绕过类型安全的好处并延迟问题的发现。

您还将有一个“具有”关系而不是“是”关系，这与您的类名不一致。

* * *

如果您想放弃这种简单性及其相关的好处，您可以使用本文中[`GetMethodBySig`](https://stackoverflow.com/a/5152539/659190)接受的扩展。

像这样的东西，

```
class SemiGenericFacade<T> where T : new()
{
    private readonly t = new T();

    public void CallVoidOnT(string name, params object[] parameters)
    {
        var paramTypes = parameters.Select(p => typeof(p))

        var match = typeof(T).GetMethodBySig(typeof(void), paramTypes)
            .Single(mi => mi.Name == name);

        match.Invoke(this.t, parameters);
    }
} 
```

根据 Piotr Justyna 的评论，实施和使用这种方法会导致猫变成老虎并吃掉她的小猫。

* * *

如果你要这样做，添加到链接的扩展是有意义的

```
public static class Extensions
{
    public static MethodInfo GetMethodByNameThenSig(
        this Type type,
        string name, 
        Type returnType, 
        params Type[] parameterTypes)
    {
        return type.GetMethods().Where((m) =>
        {
            if (m.Name != name)
            {
                return false;
            }

            if (m.ReturnType != returnType)
            {
                return false;
            }

            var parameters = m.GetParameters();
            if ((parameterTypes == null || parameterTypes.Length == 0))
            {
                return parameters.Length == 0;
            }

            if (parameters.Length != parameterTypes.Length)
            {
                return false;
            }

            for (int i = 0; i < parameterTypes.Length; i++)
            {
                if (parameters[i].ParameterType != parameterTypes[i])
                {
                    return false;
                }
            }

            return true;
        }).Single();
    }
} 
```

你可以这样使用，

```
class GenericFacade<T> where T : new()
{
    private readonly t = new T();

    public void CallOnInternal(string name, params object[] parameters)
    {
        var paramTypes = parameters.Select(p => typeof(p))

        var match = typeof(T).GetMethodByNameThenSig(
            name,
            typeof(void),
            paramTypes);

        match.Invoke(this.t, parameters);
    }

    public TResult CallOnInternal<TResult>(string name, params object[] parameters)
    {
        var paramTypes = parameters.Select(p => typeof(p))

        var match = typeof(T).GetMethodByNameThenSig(
            name,
            typeof(TResult),
            paramTypes);

        return (TResult)match.Invoke(this.t, parameters);
    }
} 
```

* * *

**最终编辑**

查看使用反射所涉及的代码，并考虑与类型安全损失相关的成本。我建议最好以传统方式明确建立“有”关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:21:45.863

显而易见的答案是继承。

在您的情况下（即使类的名称另有说明），这样做的方法是继承 BaseClass 中的 ChildClass，这样您就可以通过 BaseClass 公开 ChildClass 的方法。

前任：

```
class MyBaseClass: MyChildClass
{
} 
```

如果这些类不相关，并且您只想在 MyBaseClass 中有一个 MyChildClass 的实例，但只公开一组方法但不将其他方法设为私有，您可以做的是通过只公开必要的接口公开 MyChildClass 实例像这样的字段：

```
public class BaseClass
{
    public  IChildClass ChildClassInstance = new ChildClass();
}

public class ChildClass : IChildClass
{
    public void myMethod(int i)
    { /* do something with i */ }
    public void myMethod(int a, string b)
    { /* get i from a and b and call: */ myMethod(i); }
    public void myMethod(string c, string d)
    { /* get i from c and d and call: */ myMethod(i); }
}

public interface IChildClass
{
    void myMethod(int i);
    void myMethod(int a, string b);
} 
```

然后您只能访问允许通过基类实例公开的方法：

```
BaseClass test = new BaseClass();
test.ChildClassInstance.myMethod(1);
test.ChildClassInstance.myMethod(1,"test"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T11:21:01.190

您可以使用`public void myMethod(params object[] something)`如下：

```
public static void Main()
{
    UnknownArgumentsMethod1(1, 2, 3, "foo");
}

public static void UnknownArgumentsMethod1(params object[] list)
{
    UnknownArgumentsMethod2(list);
}

public static void UnknownArgumentsMethod2(params object[] list)
{
    foreach (object o in list)
    {
        if (o.GetType() == typeof(int))
        {
            Console.WriteLine("This is an integer: " + (int)o);
        }
        else if (o.GetType() == typeof(string))
        {
            Console.WriteLine("This is a string: " + (string)o);
        }
    }
} 
```

# apache - 无法安装 apache 2.2。显示端口 80 和 443 已在使用中

> ID：13838289
> 
> 赞同：-2
> 
> 时间：2012-12-12T11:02:30.630
> 
> 标签：apache, xampp

无法安装 apache 2.2。显示端口 80 和 443 一直在使用中。需要帮助

阿斯米塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:06:33.320

您已经有一个网络服务器正在运行。假设您使用的是某个版本的 Linux（您没有说），您可以使用`lsof`.

```
lsof -i :80 
```

请参阅[此处](http://www.debian-administration.org/articles/184)了解更多详细信息

# google-app-engine - 大查询与文本搜索 API

> ID：13838290
> 
> 赞同：1
> 
> 时间：2012-12-12T11:02:34.983
> 
> 标签：google-app-engine, google-bigquery

我想知道 Big Query 是否会用 Text Search API 取代/竞争？这是一个愚蠢的问题，但文本搜索 API 处于测试阶段几个月，并且有非常严格的 API 调用限制。Bug Big Query 已经存在并且看起来很有前途。任何提示选择什么来搜索不断出现的错误日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:22:56.740

Google BigQuery 和 App Engine Search API 可满足不同类型应用程序的需求。

BigQuery 非常适合对非常大的表中的固定架构数据结构进行聚合查询（想想：全表扫描）。目标是速度和灵活性。BigQuery 缺乏索引的概念（按设计）。虽然它可以用于“大海捞针”类型的搜索，但它确实适用于具有固定模式的大型结构化数据集。在文档类型搜索方面，BigQuery 记录具有固定的最大大小，因此不适合文档搜索引擎。因此，我会使用 BigQuery 进行以下查询：在我的 200Gb 日志文件中，10 个最常见的引荐域是什么，我多久看到一次？

搜索 API 提供对各种类型的文档数据（文本、HTML、地理点等）的排序搜索结果。搜索 API 非常适合查询，例如查找包含特定字符串的文档的特定出现。一般来说，搜索 API 非常适合基于查询输入的文档检索。

# sql-server-2008 - netbeans 和 microsoft sql server 连接异常

> ID：13838298
> 
> 赞同：1
> 
> 时间：2012-12-12T11:03:20.537
> 
> 标签：sql-server-2008, jdbc, netbeans-7

我正在尝试连接到我的数据库，称为“Recept”。首先，我在端口方面遇到了一些麻烦，但我修复了它。现在我有这个代码：

```
try {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        String connectionUrl = "jdbc:sqlserver://127.0.0.1:1433;"
                + "databaseName=Recept;";
        Connection con = DriverManager.getConnection(connectionUrl);
    } catch (SQLException e) {
        System.out.println("SQL Exception: " + e.toString());
    } catch (ClassNotFoundException cE) {
        System.out.println("Class Not Found Exception: " + cE.toString());
    } 
```

我得到了这个例外：

```
SQL Exception: com.microsoft.sqlserver.jdbc.SQLServerException: Login failed for user ''. ClientConnectionId:01819eae-5044-426b-a462-645f247003d6 
```

我不知道我的用户名和密码是什么，这是我可以连接到我的服务器的方式，你可以看到，我不需要用户名和密码： ![在此处输入图像描述](../Images/262da02ecf44fc3ac1e1c4640346919d.png)

请有人帮助我，我应该如何用java编写我的“connectionUrl”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:57:59.263

为了能够将 Windows 身份验证与 SQL Server JDBC 驱动程序一起使用，您需要通过在 java.library.path 上添加 sqljdbc_auth.dll（32 位或 64 位，具体取决于您的 JVM）来加载正确的身份验证 dll，并包括JDBC url 中的连接属性`integratedSecurity=true`。

有关详细说明和背景，请参阅[http://msdn.microsoft.com/en-us/library/ms378428.aspx#Connectingintegrated](http://msdn.microsoft.com/en-us/library/ms378428.aspx#Connectingintegrated)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:45:08.667

你真的不能使用 JdbcOdbc 驱动程序吗？

```
{
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    con = DriverManager.getConnection("jdbc:odbc:Recept","sa","sasasa");
}
catch(Exception e)
{
    e.printStackTrace();
} 
```

# python - Python Flask webapp 简单的代理配置以使用 Apache 启用 SSL/HTTPS

> ID：13838302
> 
> 赞同：4
> 
> 时间：2012-12-12T11:03:43.000
> 
> 标签：python, apache, web-applications, proxy, flask

我有一个基于 Python 的工作 webapp，Flask。（配置为在 http://host:port 上工作）

我需要让它与 https 一起工作。我得到了一个 Apache 代理——它以这种方式重定向所有请求：

(Apache) https://host/myApp --> http://host:port（我的基于 Flask 的应用程序）。其中***host:port***是我的应用程序正常工作的标准配置。

我能够访问服务和索引页面。但是，访问所有静态内容存在问题，这是通过 vi **url_for**方法请求的（如*ico、图像*等）。

你能指出我的任何资源/信息吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T23:16:26.917

我们在 httpd.conf 中添加一行来处理 /static/ 而不是将其代理给 gunicorn：

```
<VirtualHost oursite.com>

  # Tells apache where /static/ should go
  Alias /static/ /full/path/to/flask/app/static/

  # Proxy everything to gunicorn EXCEPT /static and favicon.ico
  ProxyPass /favicon.ico !
  ProxyPass /static !
  ProxyPass / http://gunicorn.oursite.com:4242/
  ProxyPassReverse / http://gunicorn.oursite.com:4242/

</VirtualHost> 
```

这是有效的，因为我们在同一个盒子上运行了 gunicorn 和 apache，这可能对你有用，也可能不适合你。作为站点部署的一部分，您可能必须将静态文件复制到 apache 主机。

可能有更好的方法来做到这一点，但它对我们有用。

# linux - 为什么在复制大量小文件时，NTFS 文件系统比 EXT3 文件系统慢？

> ID：13838303
> 
> 赞同：9
> 
> 时间：2012-12-12T11:03:46.170
> 
> 标签：linux, windows, filesystems, ntfs, ext3

我已经运行了以下测试，我使用此批次创建了一个包含 15'000 个 400 字节文件的文件夹：

```
@ECHO off
SET times=15000

FOR /L %%i IN (1,1,%times%) DO (
    fsutil file createnew filename%%i.txt 400
) 
```

然后我使用以下命令在我的 Windows 计算机上复制过去：

```
robocopy LargeNumberOfFiles\ LargeNumberOfFiles2\ 
```

完成后，我可以看到传输速率为 915810 字节/秒，小于 1 MB/秒。我花了几秒钟来复制 7 MBytes 请注意，这非常慢。

我已经尝试过使用单个文件为 50 MB 的文件夹，传输速率为 1219512195 字节/秒。（是的 GB/s）瞬时。

**为什么复制大量文件会占用 Windows 文件系统上的大量时间资源？**

请注意，我尝试在具有 ext3 文件系统的虚拟机（vmware 播放器）中的同一台计算机上运行的 linux 系统上执行相同的操作。

我使用 cp 命令，复制是瞬时的！

另请注意以下事项：

*   没有杀毒软件
*   我已经在多台 Windows 计算机（总是 ntfs）上测试了这种行为，我总是得到可比较的结果（传输速率低于 1MB/s，平均 7-8 秒复制 7 MBytes）
*   我已经在多个 linux ext3 系统上进行了测试，该副本始终是即时的（15000 个 400 字节的文件）
*   问题是要了解是什么让 Windows 文件系统复制大量文件的速度比 Linux 文件系统慢。

# android - Android onNewIntent 总是收到相同的 Intent

> ID：13838313
> 
> 赞同：1
> 
> 时间：2012-12-12T11:04:31.867
> 
> 标签：android, android-intent, android-notifications

我有 2 个`Notifications`：一个用于传入消息，一个用于传出消息。`Notification`单击时，它将发送`PendingIntent`给自己。我输入了一个额外的值来确定哪个`Notifications`被点击：

```
private static final int INID = 2;
private static final int OUTID = 1;

private void update(boolean incoming, String title, String message, int number) {
    notificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
    Intent intent = new Intent(this, Entry.class);
    intent.putExtra((incoming ? "IN" : "OUT"), incoming);
    PendingIntent pi = PendingIntent.getActivity(Entry.this, 0, intent, Intent.FLAG_ACTIVITY_NEW_TASK);
    Notification noti = new Notification(incoming ? R.drawable.next : R.drawable.prev, incoming ? "Incoming message" : "Outgoing message", System.currentTimeMillis());
    noti.flags |= Notification.FLAG_NO_CLEAR;
    noti.setLatestEventInfo(this, title, message, pi);
    noti.number = number;
    notificationManager.notify(incoming ? INID : OUTID, noti); 
} 
```

`Intent`并在方法中捕获`onNewIntent`：

```
@Override
protected void onNewIntent(Intent intent) {
    setIntent(intent);
    if (intent.getExtras() != null) 
        for (String id : new ArrayList<String>(intent.getExtras().keySet())) {
            Object v = intent.getExtras().get(id);
            System.out.println(id + ": " + v);
        }
    else
        log("onNewIntent has no EXTRAS");
} 
```

加上`manifest`确保只有一项任务（在`activity`标签中）的行：

```
android:launchMode="singleTop" 
```

我记录了它通过该`onNewIntent`方法运行，但始终使用相同的`intent`（即，如果我单击 IN 或 OUT `notification`，则额外的意图始终包含相同的`bundle`（日志：）`OUT: false`）。它总是最后创建的 Intent，我发现这是因为两个 Intent 的初始化发生在另一个序列中，而不是在它们被更改时：

```
private void buttonClick(View v) {      
    update(true, "IN", "in", 1);
    update(false, "OUT", "out", 3);
}

private void setNotificationSettings() {
    update(false, "IN", "===out message===", 0);
    update(true, "OUT", "===in message===", 0);
} 
```

**为什么我总是收到相同的（最后创建的）`Intent`？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T11:11:07.170

你传递`requestcode`的所有意图都是相同的，为什么你每次都收到最后一个意图，所以你必须传递不同`requestcode`的待处理意图。

像下面的代码

**你的代码：**

```
 PendingIntent pi = PendingIntent.getActivity(Entry.this, 0, intent, Intent.FLAG_ACTIVITY_NEW_TASK); 
```

**需要改变：**

```
PendingIntent pi = PendingIntent.getActivity(Entry.this, your_request_code, intent, Intent.FLAG_ACTIVITY_NEW_TASK); 
```

# jquery - 访问 Div 属性 Jquery 和 rails 3

> ID：13838314
> 
> 赞同：3
> 
> 时间：2012-12-12T11:04:31.817
> 
> 标签：jquery, ruby-on-rails

我正在为一个小型在线考试应用程序使用[countTimer 插件。](http://keith-wood.name/countdown.html)这个想法是当计时器达到零时，我想将用户重定向到给定的 url（到问题控制器中名为 time_expired 的操作）。所以 url 的形式是：`/questions/:id/time_expired`。

在`show.html.erb`问题控制器中，我有以下 div 元素：

```
<div id="count-down" data-url=<%= time_expired_path %> ></div> 
```

我在这个 div 中显示计时器。

现在在我的`application.js`文件中，我想获取我的 div 的 data-url 属性的值，并使用 expiryUrl 指向该 url。

```
$(document).ready(function(){

    myUrl = $("div").attr("data-url");
    alert(myUrl); // Prints undefine
    $('#count-down').countdown({expiryUrl: myUrl, format: 'MS', until: +10)
}); 
```

为什么变量“myUrl”未定义？我可以用萤火虫检查值，我的 div 中确实有一个 url。

这是萤火虫的输出：

```
<div id="count-down" data-url="/questions/2/time_expired"></div> 
```

rails 版本：3.2.8 Ruby 版本：1.9.3 Jquery：Rails 附带的 Jquery rails

任何帮助和建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:05:31.777

试试这个：

```
myUrl = $("#count-down").data("url"); 
```

# oracle - Oracle 动态 PL/SQL。我无法让它工作

> ID：13838315
> 
> 赞同：0
> 
> 时间：2012-12-12T11:04:32.190
> 
> 标签：oracle, dynamic, plsql

所以这是我的代码：

```
CREATE OR REPLACE PROCEDURE UPDATE_USER
(
  updateColumn IN USERS.column_name%type,
  changeStr IN VARCHAR2,
  unID IN VARCHAR2
)
IS
BEGIN
  EXECUTE IMMEDIATE
    'UPDATE
      users
    SET :1 = :2
    WHERE
      uniqueID = :3'
  USING updateColumn, changeStr, unID; 
END;
/ 
```

我已经为此搜索了其他答案，据我所知，这应该可行。但是我收到错误：'错误（3,25）：PLS-00302：必须声明组件'COLUMN_NAME''

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:21:30.303

错误消息指定第 3 行，字符 25，它指向参数`column_name`的声明中`updateColumn`。您似乎正在尝试将要更新的列名作为参数传递，但这意味着在编译时该列是未知的，因此它的类型是未知的。这也没有任何意义——如果它是一个`number`列，那么你会尝试将列名传递给一个数字参数，这无论如何都行不通。如果您不想将其声明为 simple `varchar2`，则可以改用`user_tab_columns.column_name%type`.

但是您不能使用绑定变量在更新语句中动态设置列名。它会编译，但会`ORA-01747`从以冒号开头的明显名称开始执行。您需要将其连接起来，例如：

```
CREATE OR REPLACE PROCEDURE UPDATE_USER
(
  updateColumn IN user_tab_columns.column_name%type,
  changeStr IN VARCHAR2,
  unID IN VARCHAR2
)
IS
BEGIN
  EXECUTE IMMEDIATE
    'UPDATE
      users
    SET ' || updateColumn || ' = :1
    WHERE
      uniqueID = :2'
  USING changeStr, unID; 
END;
/ 
```

但是您需要清理列名以[避免 SQL 注入](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#BJECFFHD)。例如， APC[对您链接到的问题的回答](https://stackoverflow.com/a/3690058/266304)提到了使用`DBMS_ASSERT`包。

# iphone - 检查自定义库是否存在

> ID：13838316
> 
> 赞同：0
> 
> 时间：2012-12-12T11:04:40.563
> 
> 标签：iphone, objective-c, ios

我想检查图书馆是否存在。如何检查是否已经存在同名的库？

我想以编程方式检查由以下代码创建的库是否存在，我如何以编程方式检查库是否存在？

谢谢

我使用以下代码保存自定义库。

```
//Code for create custom library and save image

-(void)savePhoto
{
self.library = [[ALAssetsLibrary alloc] init];
[self.library addAssetsGroupAlbumWithName:@"My Library" resultBlock:nil failureBlock:nil];
[self savePhotoFinal:[UIImage imageNamed:@"tattoo1.jpg"];
}

-(void)savePhotoFinal:(UIImage *)image
{
[self.library saveImage:image toAlbum:@"My Library" withCompletionBlock:^(NSError *error) {
    if (error!=nil) {
        NSLog(@"Big error: %@", [error description]);
    }
}];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:25:39.453

当您创建自定义库并将文件保存在其中时，同时设置一个使用 NSUserDefault 的标志，例如

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
 [defaults setValue:@"0" forKey:@"LIBRARYEXIST"]; 
```

后者只需检查此保存标志的字符串值是否为 0

```
 NSString *libraryCheckStr =[defaults objectForKey:@"LIBRARYEXIST"]; 
```

如果发现字符串变量 libraryCheckStr 的值为 0，则库存在，否则不存在。

当用户将在删除库的操作方法上手动删除库时，将同一键 LIBRARYEXIST 的标志设置为 1。更进一步的是您的业务逻辑。

# php - PHP 中的 LDAP 身份验证 - 无需提供密码即可进行身份验证

> ID：13838324
> 
> 赞同：6
> 
> 时间：2012-12-12T11:05:00.183
> 
> 标签：php, ldap

我的 LDAP 身份验证出现了一个奇怪的行为，我需要这个来使用他们的 AD 凭据对用户进行身份验证，这就是我所拥有的：

```
session_start(); 
$adServer = "MY IP"; 
$ldapconn = ldap_connect($adServer) or $this->msg = "Could not connect to LDAP server.";

$ldaprdn = "DOMAIN\\" . $_POST["username"];
$ldapbind = ldap_bind($ldapconn, $ldaprdn, $_POST["password"]);

if ($ldapbind) {
//$msg = "Successfully Authenticated";
    $_SESSION['loggedin'] = 1;
    $_SESSION['username'] = $username;
    header("Location: ../main.php");
} else {
    header("Location: ../index.php?login_failed=1");
} 
```

这是我得到的不同行为：

*   无用户名/无密码 = 已通过身份验证（错误）
*   用户名/无密码 = 已通过身份验证 (BAD)
*   不正确的用户名/密码（两个字段都给出）= 未通过身份验证
*   正确的用户名/密码（两个字段均已给出）= 已通过身份验证

我发现这很难召集，如果未使用密码字段，所有用户都将被验证。但是，如果我确实使用密码字段，它只会使用正确的凭据对用户进行身份验证。

我在这里做错了什么还是应该开始唠叨 IT 人员？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T12:14:32.557

在做了一些研究之后，我得出一个结论，我们使用的 LDAP 服务器允许匿名绑定。

更多信息在这里： [https ://issues.jfrog.org/jira/browse/RTFACT-3378](https://issues.jfrog.org/jira/browse/RTFACT-3378)

> 警告：尝试使用空白密码进行绑定总是会成功，因为 LDAP 协议认为这是“匿名”绑定，即使指定了用户名也是如此。绑定前请务必检查是否有空白密码。

为了解决这个问题，我现在检查 PHP 中的密码输入字段：

```
if (strlen(trim($user_pass)) == 0) {
    //login failed
} else {
    $ldaprdn = "DOMAIN\\" . $_POST["username"];
    $ldapbind = ldap_bind($ldapconn, $ldaprdn, $_POST["password"]);
} 
```

空密码输入（或空格）将始终返回登录失败。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T11:49:37.067

使用“简单”的 BIND 身份验证方法，有四种可能性：

*   空 DN，空密码（匿名）：不进行身份验证，因此此会话和授权状态不安全
*   DN，空密码（未经身份验证）：不进行身份验证，因此此会话和授权状态不安全
*   DN 和密码：进行身份验证，成功或失败
*   空 DN，密码：不进行身份验证，因此此会话和授权状态不安全

3d 是唯一进行身份验证的设备。正确配置的 LDAP 目录服务器将拒绝其他 3 种可能性，因为与问题所述相反，不会进行身份验证。API 的方法不抛出异常或返回`true`并不表示是否进行了身份验证。BIND 结果包含一个整数结果代码，指示身份验证是否成功。

### 也可以看看

*   [LDAP：身份验证最佳实践](http://www.ldapguru.info/ldap/authentication-best-practices.html)
*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T11:26:39.127

在您唠叨 IT 人员之前，请检查该值是否在行中传递

> $ldapbind = ldap_bind($ldapconn, $ldaprdn, $_POST["密码"]);

是正确的，你可能已经检查过了，但是做一个

> var_dump($ldaprdn); var_dump($_POST["密码"]);

看看数据是否准确。

手动放置数据，例如

> $ldapbind = ldap_bind($ldapconn, "用户名", "密码");

还要检查您是否必须提供整个 DN，例如 CN=Username,DC=xxx,DC=com 作为用户名。

此外，有时您必须给出诸如“用户名”之类的名称，而不是“user.name”，因为这可能是它的存储方式。

如果这一切都失败了，你可以去吃 IT 人的脑袋:-P

# visual-studio-2010 - 使用 TFS 撤消意外签入

> ID：13838331
> 
> 赞同：2
> 
> 时间：2012-12-12T11:05:29.447
> 
> 标签：visual-studio-2010, tfs

> **可能重复：**
> [如何在 Visual Studio TFS 中回滚？](https://stackoverflow.com/questions/2276780/how-to-rollback-in-visual-studio-tfs)

我需要撤消在 TFS 中的签入。

我该怎么办？我在哪里可以阅读如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:10:13.683

我找到了很多例子，我没有正确搜索它

[如何在 Visual Studio TFS 中回滚？](https://stackoverflow.com/questions/2276780/how-to-rollback-in-visual-studio-tfs)

[如何回滚 TFS 签入？](https://stackoverflow.com/questions/32607/how-do-i-rollback-a-tfs-check-in)

# asp.net-mvc - 我应该注释我的视图模型还是我的模型？

> ID：13838333
> 
> 赞同：0
> 
> 时间：2012-12-12T11:05:34.727
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

如果我使用 MVVM 模式来填充我的视图，即除了模型类之外，我还使用视图模型。模型类不与视图对话；视图模型填充视图。

在这种情况下，如果我需要使用数据注释进行验证等。我需要注释我的视图模型类而不是我的模型类，对吗？

例如，是否应该在 [Required] 属性上注释：

```
namespace MyApp.ViewModels
{
    public class Category
    {
        [Required]
        [StringLength(50)]
        public string CategoryName { get; set; }

        [StringLength(255)]
        [AllowHtml]
        public string Description { get; set; }
    }
} 
```

或者应该是这样：

```
namespace MyApp.Models
{
    public partial class Category
    {
        [Required]
        public virtual string CategoryName
        {
            get;
            set;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:22:59.630

正确，您的视图模型不应使用 Models(entity) 但可以包含模型属性，例如：

```
//wrong
public class Person{
     public string FirstName{get;set;}
     public string LatsName{get;set;}
}

public class ViewModel{
     public Person Person{get;set;}
} 
```

这是对视图模型的更好使用：

```
public class ViewModel{
     public string FirstName{get;set;}
     public string LastName{get;set;}
} 
```

是的，您的注释应该在视图模型上。

* * *

您也可以在视图模型中将注释设置为复杂类型，但请注意，复杂类型不应是实体/域类，而是仅特定于视图模型的数据模型类，例如：

```
public class InsertPerson{
     [Required]
     public string FirstName{get;set;}
}

public class EditPerson{
     [Required]
     public string Id{get;set;}

     [Required]
     public string FirstName{get;set;}
}

public class ViewModel{
     public InsertPerson insertPerson{get;set;}
} 
```

# kendo-ui - DataSourceRequest 的替代方案

> ID：13838334
> 
> 赞同：-1
> 
> 时间：2012-12-12T11:05:40.007
> 
> 标签：kendo-ui

KendoUI 框架中有`DataSourceRequest`类。它具有允许对网格中配置的每个过滤器进行`Filters`过滤的集合。`Expressions`是否有替代类`DataSourceRequest`包含“纯”格式的所有网格数据，未解析格式，无法构建表达式但所有表单数据“原样”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:37:18.300

没有这样的内置类。但是，您可以轻松地从 Request 对象中获取原始数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T21:59:30.783

覆盖 Telerik 的 DataSourceRequest 模型绑定器以实现您想要的功能可能是一个更好的主意。

# c++ - 在 Android 设备上获取 COCOS2D-X 中文件的完整路径

> ID：13838341
> 
> 赞同：3
> 
> 时间：2012-12-12T11:06:00.040
> 
> 标签：c++, cocos2d-x

我正在尝试在我的项目中获取 XML 文件，但我似乎无法正常工作。我正在使用`libXML`（cocos2d-x-2.0.4 附带的那个）来解析 XML 文件。

我正在使用`CCFileUtils::sharedFileUtils() -> fullPathFromRelativePath( );`，但问题是，对于 Android 版本，它不会给出完整路径。不过，它在 iOS 上运行良好。

然后我查看了 GitHub，发现了一些奇怪的东西。事实证明，它`fullPathFromRelativePath( )`只会**返回你传递给它的任何东西**。

来自[GitHub](https://github.com/cocos2d/cocos2d-x/blob/gles20/cocos2dx/platform/android/CCFileUtils.cpp)：

```
const char* CCFileUtils::fullPathFromRelativePath(const char *pszRelativePath)
{
    return pszRelativePath;
} 
```

我到处寻找，我得到的只是如何使用`CCFileUtils`. 我已经能够解析 XML 文件。唯一的问题是我无法获得`fullPathFromRelativePath()`在 Android 中使用的 XML 文件的完整路径。

如何在 Android 中获取 XML 文件的完整路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T22:32:24.913

该功能没有任何问题。问题是您的 xml 文件在 apk 中，这是一个压缩文件，您无法直接读取该文件，您应该使用类似

```
long tmpSize;
const char* xmlData = CCFileUtils::sharedFileUtils()->getFileData(YOUR_PATH_TO_FILE, "r", &tmpSize); 
```

然后你可以使用 lib xml 来处理你得到的数据。

但请记住，您不能修改 apk 文件中的任何内容。如果要写入 xml，则需要先将其复制到某个可写路径（如`sdcard`或使用`getWritablePath()`）。

对于不在 apk 中的文件，可以直接使用 fopen()，不再需要 getFileData()。

希望这可以帮助。

# html - 如何修复 IE 文本重叠输入填充

> ID：13838349
> 
> 赞同：0
> 
> 时间：2012-12-12T11:06:11.923
> 
> 标签：html, css, internet-explorer, internet-explorer-8, internet-explorer-9

在 IE9 之前的所有 IE 中，文本的输入都是重叠的。我还没有测试 IE 10。寻找 css hack 或类似的东西

```
padding: 7px 35px 7px 5px !important; 
```

IE中的结果似乎是这样的

![在此处输入图像描述](../Images/950ac2a3f1fca673814a76bb4ffeeb43.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:15:15.950

我不认为这有什么技巧，我建议您将填充应用于这样的 wrap 元素：

[http://jsbin.com/udezuz/1/](http://jsbin.com/udezuz/1/) 这在 IE 中没有正确填充被忽略的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:24:36.213

我认为您无法选择使用相同的代码来解决。

`span`您可以像图像背景一样附加。

# google-app-engine - 在 Google AppEngine 中设置 Grails 应用程序

> ID：13838350
> 
> 赞同：2
> 
> 时间：2012-12-12T11:06:16.483
> 
> 标签：google-app-engine, grails, groovy, grails-plugin

我创建了 grails 应用程序并尝试在 google 应用程序引擎中设置该应用程序。

我有这样的错误

```
../plugins/app-engine-0.8.10/src/groovy/org/grails/appengine/Log4jConfigListener.groovy: 32: unable to resolve class org.codehaus.groovy.grails.plugins.logging.Log4jConfig
 @ line 32, column 1.
   import org.codehaus.groovy.grails.plugins.logging.Log4jConfig;
   ^

../plugins/app-engine-0.8.10/src/groovy/org/grails/appengine/Log4jConfigListener.groovy: 83: unable to resolve class org.codehaus.groovy.grails.plugins.logging.Log4jConfig 
 @ line 83, column 1.
   class AppEngineLog4jConfig extends org.codehaus.groovy.grails.plugins.logging.Log4jConfig{
   ^ 
```

然后我搜索，我发现“Grails 2.0 或更高版本不支持应用引擎插件”的一些信息，你可以看到[这里](http://permalink.gmane.org/gmane.comp.lang.groovy.grails.user/121976)。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:35:38.823

尚未针对 Grails 2.x 更新 App Engine 插件。请参阅此[问题](https://stackoverflow.com/questions/12430706/grails-on-google-app-engine-is-it-dead)以获取更多信息。

# php - 带有字符串键或嵌套引号的数组到 php 中的 lambda 函数中

> ID：13838355
> 
> 赞同：1
> 
> 时间：2012-12-12T11:06:23.593
> 
> 标签：php, arrays, lambda, quotes

我想创建一个 lambda 函数，我正在这样做：

```
create_function('$range',  'return " ( ABS(a.price) > format_money($range["min"] AND ABS(a.price) <  format_money($range["max"]) ) OR a.price is null " '); 
```

但是 $range["min"] 部分打破了我的尝试......嵌套引号有问题，我不知道如何解决它，我什至不知道是否可以这样做或者 php 不是这么强，有光吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:18:48.907

使用转义的单引号并`;`解析它，不知道执行情况。

```
create_function('$range',  'return \' ( ABS(a.price) > format_money($range["min"] AND ABS(a.price) <  format_money($range["max"]) ) OR a.price is null \'; '); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:17:29.643

我可以通过将您的值连接到这样的字符串来完成此操作：

```
create_function('$range',  'return " ( ABS(a.price) > format_money(" . $range["min"] . " AND ABS(a.price) <  format_money(" . $range["max"] . ") ) OR a.price is null "; '); 
```

该函数的输出是：

```
string(92) " ( ABS(a.price) > format_money(10 AND ABS(a.price) <  format_money(20) ) OR a.price is null " 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T11:12:24.193

您不能在单引号内调用变量。

```
create_function('$range',  'return " ( ABS(a.price) > format_money('.$range["min"].' AND ABS(a.price) <  format_money('.$range["max"].') ) OR a.price is null " '); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:15:56.473

算了，编错了，正确的做法是：

```
create_function('$range',  'return " ( ABS(a.price) > ".format_money($range[\'min\'])." AND ABS(a.price) < ".format_money($range[\'max\'])." ) OR a.price is null "; '); 
```

现在它起作用了！

# linux - 如何通过 WebDAV/DeltaV 访问 subversion 存储库？

> ID：13838358
> 
> 赞同：2
> 
> 时间：2012-12-12T11:06:26.363
> 
> 标签：linux, svn, redmine, webdav

我安装并设置了 BitNami Redmine Stack 并创建了存储库：

```
svnadmin create /var/svn/repository0/ 
```

我使用基本身份验证。

httpd.conf 的一部分：

```
<Location>
   DAV svn
   SVNParentPath /var/svn
   AuthName "Subversion Repository"
   AuthType Basic
   AuthUserFile /etc/svn-auth.passwd
   Require valid-user
   Satisfy Any
   AuthzSVNAccessFile /var/svn/authz
</Location> 
```

svn-auth.passwd 的一部分：

```
htpasswd -c -m /etc/svn-auth.htpasswd someuser
someuser:$apr1$bTN... 
```

授权：

```
[/]
* = r

[repository0:/]
someuser = rw 
```

当我浏览此网址时：`http://remote-linux-host:81/svn/repository0/`我得到以下信息：

![在此处输入图像描述](../Images/1ffec92567cd2f1bc1be7c53c09e27a9.png)

我输入我的凭据并看到：

```
Forbidden

You don't have permission to access /svn/repository0/ on this server. 
```

对于这个网址`http://remote-linux-host:81/svn/`，我得到：

```
<D:error><C:error/><m:human-readable errcode="2">
Could not open the requested SVN filesystem
</m:human-readable></D:error> 
```

我在error.log中有什么：

```
...
[Wed Dec 12 15:16:17 2012] [error] [client ..ip...] Failed to load the AuthzSVNAccessFile: /var/svn/authz:22: Option expected
[Wed Dec 12 15:16:17 2012] [error] [client ..ip...] Access denied: 'someuser' GET svn:/repository0
[Wed Dec 12 15:16:20 2012] [error] [client ..ip...] Failed to load the AuthzSVNAccessFile: /var/svn/authz:22: Option expected
[Wed Dec 12 15:16:20 2012] [error] [client ..ip...] Access denied: 'someuser' GET svn:/repository0
[Wed Dec 12 15:16:38 2012] [error] [client ..ip...] Failed to load the AuthzSVNAccessFile: /var/svn/authz:22: Option expected
[Wed Dec 12 15:16:38 2012] [error] [client ..ip...] Access denied: 'someuser' GET svn:/repository0
[Wed Dec 12 15:16:46 2012] [error] [client ..ip...] (20014)Internal error: Can't open file '/var/svn/format': No such file or directory
[Wed Dec 12 15:16:46 2012] [error] [client ..ip...] Could not fetch resource information.  [500, #0]
[Wed Dec 12 15:16:46 2012] [error] [client ..ip...] Could not open the requested SVN filesystem  [500, #2]
[Wed Dec 12 15:16:46 2012] [error] [client ..ip...] Could not open the requested SVN filesystem  [500, #2] 
```

我在`authz`文件中做了一些小改动：

```
[groups]
developers = someuser

[repository0:/]
@developers = rw 
```

现在，当我再次浏览此网址时，`http://remote-linux-host:81/svn/repository0/`我得到以下信息：

```
<D:error><C:error/><m:human-readable errcode="2">
Could not open the requested SVN filesystem
</m:human-readable></D:error> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:45:57.250

我为运行 Apache 的用户提供了读/写访问权限，现在一切正常。

![在此处输入图像描述](../Images/d5f7d427cb06993a9c88f78d523f3c90.png)

# jboss5.x - 我在 JBOSS5.1.1 中启动服务器后如何运行石英调度程序

> ID：13838366
> 
> 赞同：1
> 
> 时间：2012-12-12T11:06:43.127
> 
> 标签：jboss5.x

目前我已经在 jboss5.1.1 中添加了quartz-1.8.6 和quartz-jboss-1.8.6 jar 和quartz-service.xml 文件，并且我已经在EAR 应用程序中添加了quartz1.8.6 相关的jar 文件并且我已经返回代码如下：

```
public void doGet(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
try {
InitialContext ctx = new InitialContext();
SchedulerFactory sf = new StdSchedulerFactory();
Scheduler sched = sf.getScheduler();
JobDetail job = new JobDetail("job1", "group1", SimpleJob.class);
CronTrigger trigger = new CronTrigger("trigger1", "group1", "job1", "group1", "0/5 * * * * ?");
sched.addJob(job, true);
Date ft = sched.scheduleJob(trigger);
try
{
 Thread.activeCount();
catch (Exception e)
 {
}
sched.start();
} 
catch (Exception exc){ 
exc.printStackTrace();
}
.....
} 
```

但是一旦我登录链接，这段代码就会成功运行......但是一旦服务器启动，我需要它来运行 crontask

# python-sphinx - 使用 Sphinx 时不生成模块索引“modindex”

> ID：13838368
> 
> 赞同：43
> 
> 时间：2012-12-12T11:06:49.320
> 
> 标签：python-sphinx

我在使用 sphinx-build 创建文档目录 (html) 时遇到了麻烦。

我试过了

```
sphinx-build -b html source build 
```

也

```
make html 
```

但在这两种情况下，只会生成 html 文件 search.html、index.html 和 genindex.html。文件 modindex.html 丢失。

在我设置的文件 conf.py

```
html_domain_indices = True 
```

所以我应该有一个 modindex.html 文件。我究竟做错了什么？构建 html 文件后，我没有收到任何错误消息。我在 Windows XP 上使用 Sphinx 1.1.3 和 Python 2.7。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-03-30T22:55:06.660

# 精简版

*   跑`sphinx-apidoc -o . mymodule`
*   取消注释和修改`conf.py`。对于这个例子，`sys.path.insert(0, os.path.abspath('mymodule'))`
*   重新运行`make html`

# 长答案

我可以使用此示例模块重现该问题：

```
$cat mymodule/mymodule.py
def fn1():
    '''First function'''
    pass

def fn2():
    '''Second function'''
    pass 
```

运行`sphinx-quickstart`产生以下树：

```
$tree
.
├── Makefile
├── _build
├── _static
├── _templates
├── conf.py
├── index.rst
├── mymodule
    └── mymodule.py

$cat index.rst
.. sphinx example documentation master file, created by
   sphinx-quickstart on Mon Mar 30 15:28:37 2015.
   You can adapt this file completely to your liking, but it should at least
   contain the root `toctree` directive. 
```

默认`index.rst`：

```
Welcome to sphinx example's documentation!
==========================================

Contents:

.. toctree::
   :maxdepth: 2

Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search` 
```

此时运行`make html`不会在 中产生任何输出`_build/html/py-modindex.html`。这是因为`sphinx`需要描述每个模块的 .rst 文件。幸运的是，它很容易使用`sphinx-apidoc -o . mymodule`. 这提供了两个新文件，其中仅`mymodule.rst`是修复问题中的 modindex 问题所必需的。

```
$head *mod*rst
==> modules.rst <==
mymodule
========

.. toctree::
   :maxdepth: 4

   mymodule

==> mymodule.rst <==
mymodule module
===============

.. automodule:: mymodule
    :members:
    :undoc-members:
    :show-inheritance: 
```

此时运行`make html`仍然行不通。`sys.path.insert`但是取消注释并更改以in开头的行可以`conf.py`解决问题。

我的是：`sys.path.insert(0, os.path.abspath('mymodule'))`

PS：为避免额外的警告，请添加`modules`到文件`Contents:`中的目录树中`index.rst`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-01T20:37:41.150

> 以下是我为我的项目所做的。

**1.安装狮身人面像**

```
 pip install -U sphinx 
```

**2.安装主题**（我选择了sphinx_rtd_theme。请用您的选择替换它）

```
 pip install sphinx sphinx_rtd_theme 
```

**3.在你的项目文件下创建一个doc目录**

```
 mkdir docs 
```

**4.进入那个目录**

```
 cd docs 
```

**5\. 运行 sphinx-quickstart 命令**

```
 sphinx-quickstart 
```

**6\. 运行以下**命令（如果您启用了 autodoc shpinx 扩展）

```
 sphinx-apidoc -o source/ ../<modules_folder> 
```

其中***source***是 sphinx 使用的源文件夹，***modules_folder***是项目的 .py 文件模块所在的文件夹。

**7.**会提示您**回答以下问题**（根据您的需要更改答案）

```
 > Separate source and build directories (y/n) [n]: y
   The project name will occur in several places in the built documentation.
   > Project name: project_name
   > Author name(s): your_nme
   > Project release []: 1.01
   > Project language [en]: en 
```

**8.如果运行成功**，应该如下所示：****

 **```
 Creating file ...<***modules_folder***>/docs/source/conf.py.
   Creating file ...<***modules_folder***>/docs/source/index.rst.
   Creating file ...<***modules_folder***>/docs/Makefile.
   Creating file ...<***modules_folder***>/docs/make.bat.

   Finished: An initial directory structure has been created. 
```

**9\. 编辑 conf.py**并确保以下行没有被注释 (#)：

```
 import os               # line 13
   import sys              # line 14 
```

**注意：** .. 代表从 doc 目录向上的一个目录 <modules_folder> 是您项目的 .py 文件模块所在的文件夹

```
 sys.path.insert(0, os.path.abspath('../<modules_folder>/'))          # line 16 
```

确保以下行存在

```
 extensions = ['sphinx.ext.autodoc']                                  # line 34 
```

如果您愿意，可以更改主题

```
 html_theme = 'sphinx_rtd_theme'                                      # line 51 
```

**10\. 运行 shpinx-apidoc 命令**

```
 sphinx-apidoc -o . .. 
```

笔记： 。>> 用于当前目录..>> 用于上一级目录，即 <modules_folder> 项目目录

**11.运行make html命令**

```
 .\make clean
  .\make HTML

or

   make clean
   make html 
```

**12.打开你新建的网页**

```
 <modules_folder>/docs/build/html/index.html 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2019-10-30T16:21:15.330

老问题，但“在硬盘上工作而不是在 ReadTheDocs 上工作”通常很容易解决。

*   去阅读文档
*   导航到您的“项目主页”
*   点击“管理员”，然后点击“高级设置”
*   找到并选中“安装项目”复选框
*   返回“概览”
*   构建一个新版本
*   检查它是否有效
*   回来谢谢我**

# android - 如何将图像与文本视图重叠

> ID：13838370
> 
> 赞同：0
> 
> 时间：2012-12-12T11:06:50.450
> 
> 标签：android, imageview, android-edittext

我想要一个 EditText 下方的图像，这样它就可以让我看到我实际上是在图像上书写的。例如图像上显示的光标。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:10:21.220

首先，您可以将图像设置为 Edittext 的背景

其次，您可以像这样使用 frameLayout

```
<FrameLayout
    ...... 
    ...... >
<ImageView
    .....
    ....../>
<EditText
    ....
    ..../>
</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:16:50.360

您可以按照 Android Killer 的说明进行操作，也可以使用相对布局，然后放置一个 imageview，然后将 edittext 放在 imageview 之前。代码会像

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".EventActivity" >

    <ImageView 
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:background="#CCFFCC"/>
    <EditText
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:background="#00000000"
        />

</RelativeLayout> 
```

# iphone - 在 Facebook (IOS) 中使用 SSO 发布 Feed

> ID：13838371
> 
> 赞同：1
> 
> 时间：2012-12-12T11:06:51.177
> 
> 标签：iphone, facebook, xcode4, single-sign-on, facebook-ios-sdk

我正在研究 Facebook 集成并尝试使用发布提要功能进行单点登录。
我正在使用最新的 FacebookSDK。我有 Facebook 的 Hackbook 示例代码，但是我对这一切都很陌生，所以很难完全理解所有这些东西。

在 SSO 上搜索时，我得到了一些代码，它工作正常。这是我正在使用的代码（在本页末尾附有源代码）

[FBUtils.h 和 FBUtils.m 类](http://www.mobisoftinfotech.com/blog/iphone/facebook-ios-sdk-tutorial-iphone-app-facebook-integration-with-sso-single-sign-on/)

**视图控制器.m**

```
- (IBAction)publishFeed:(id)sender { 

//For SSO

[[FBUtils sharedFBUtils] initializeWithAppID:@"3804765878798776"];
NSArray *permision = [NSArray arrayWithObjects:@"read_stream",@"publish_stream", nil];
[[FBUtils sharedFBUtils] LoginWithPermisions:permision];
[FBUtils sharedFBUtils].delegate = self;
FBSBJSON *jsonWriter = [FBSBJSON new];

/// for publishfeed

    NSArray* actionLinks = [NSArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:
                                                  @"Get Started",@"name",@"https://itunes.apple.com?ls=1&mt=8",@"link", nil], nil];
    NSString *actionLinksStr = [jsonWriter stringWithObject:actionLinks];
    // Dialog parameters
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"I have lot of fun preparing.", @"name",
                               @" exam", @"caption",
                               @" ", @"description",
                               @"https://itunes.apple.com", @"link",
                               @"http://mypng", @"picture",
                               actionLinksStr, @"actions",
                               nil];

    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [[delegate facebook] dialog:@"feed"
                      andParams:params
                    andDelegate:self]; 
```

当我在我的应用程序中点击 Facebook 按钮时，它会将我重定向到 Facebook，然后重新调整回我的应用程序。现在，我想要的是在返回应用程序后立即触发 publishFeed 事件，它应该直接向用户询问发布或取消选项。但它要求像这样再次登录。

![在此处输入图像描述](../Images/fe8883b30128c353cf9a5bc215189b82.png)

任何人都可以帮助我，或者请建议我正确的方式。
您的建议将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:29:49.800

在您的方法中，您没有检查应用程序是否有权发布帖子以及用户之前是否登录。因此，每次您调用此方法时，应用程序都希望您登录。我认为这就是问题所在。

如果我是对的，您需要像这样在您的方法中添加权限和登录控制。这是我另一个项目的示例代码，你可以得到它背后的逻辑。

```
- (IBAction)facebookShare:(id)sender
{

    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

    // You check the active session here.
    if (FBSession.activeSession.isOpen)
    {
             // You check the permissions here.
             if ([FBSession.activeSession.permissions
             indexOfObject:@"publish_actions"] == NSNotFound) {
            // No permissions found in session, ask for it
            [FBSession.activeSession
             reauthorizeWithPublishPermissions:
             [NSArray arrayWithObject:@"publish_actions"]
             defaultAudience:FBSessionDefaultAudienceFriends
             completionHandler:^(FBSession *session, NSError *error) {
                 if (!error) {
                     // If permissions granted, publish the story
                     [self postFacebook];

                     [[[UIAlertView alloc] initWithTitle:@"Result"
                                                 message:@"Posted in your wall."
                                                delegate:self
                                       cancelButtonTitle:@"OK"
                                       otherButtonTitles:nil]
                      show];
                 }
             }];
        } else {
            // If permissions present, publish the story
            [self postFacebook]; // ------> This is your post method.

            [[[UIAlertView alloc] initWithTitle:@"Sonuç"
                                        message:@"Duvarında paylaşıldı."
                                       delegate:self
                              cancelButtonTitle:@"Tamam"
                              otherButtonTitles:nil]
             show];
        }
    }

    else
    {
     // If there is no session, ask for it.
     [appDelegate openSessionWithAllowLoginUI:YES];
    }

    // NSLog(@"Post complete.");

} 
```

# opencv - 从单应性opencv中查找相机方向

> ID：13838373
> 
> 赞同：2
> 
> 时间：2012-12-12T11:06:58.997
> 
> 标签：opencv, homography

如果我有一个已经校准的相机，那么我已经知道失真系数和相机矩阵。而且我有一组都在一个平面上的点，并且我知道这些点的真实世界度量和像素位置，我已经构建了一个单应性。

鉴于这个单应性、相机矩阵和失真系数，我怎样才能以最简单的方式找到相机姿势？最好使用openCV。

例如，我可以使用“DecomposeProjectionMatrix()”函数吗？它只接受一个 3x4 投影矩阵，但我有一个简单的 3x3 单应性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T09:54:09.560

在这篇较旧[的帖子](https://stackoverflow.com/a/10781165/744859)中，您有一个方法。这是一种数学转换，可为您提供姿势矩阵，即平移和旋转。

# opencv - Opencv中CacadeClassifier的加载函数的代码在哪里？

> ID：13838375
> 
> 赞同：0
> 
> 时间：2012-12-12T11:07:06.890
> 
> 标签：opencv, opencvdotnet

函数 load(string) 的声明在 objdetect.hpp 我想知道函数的内部代码，以便回答[这个](https://stackoverflow.com/questions/13824620/error-in-loading-cascade-classifier-in-opencv-using-cascade-load)问题。

我已经尝试了该查询中已回答的任何内容，但分类器仍未加载...

我在 VS 2010 中使用 OpenCV 2.3。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:38:30.193

该文件是`modules/objdetect/src/cascadedetect.cpp`.

您应该下载 OpenCV 源代码以查看此文件。

[这是方法的](https://code.ros.org/trac/opencv/browser/trunk/opencv/modules/objdetect/src/cascadedetect.cpp?rev=3827#L620)链接`load`。

# jquery - jQuery UI - 删除焦点上的橙色标签边框

> ID：13838377
> 
> 赞同：23
> 
> 时间：2012-12-12T11:07:11.510
> 
> 标签：jquery, jquery-ui, tabs, focus, border

我正在尝试删除此边框：

![在此处输入图像描述](../Images/843908f76d3cbca7e7ba4acf3e717468.png)

并且由于它仅显示在焦点上，因此我无法使用 chrome 控制台找到要覆盖的类。

有没有人这样做并且知道我应该覆盖什么类？

编辑：我想这是标准行为，[在这里](http://jqueryui.com/tabs/)你可以看到这个例子。我也在使用 Chrome。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-12T11:18:45.600

```
li a
{
    outline-color: transparent;
}​ 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-26T01:27:24.487

# 快速解决方案：

**如果你想影响实际的 .ui 元素的解决方案。**

```
.ui-state-active a, .ui-state-hover a {
    outline: none;
} 
```

**Anon 和 Konstantin D 的答案有什么区别？**

Anon 正确地针对“li 标签”中的实际“a 标签”。永远记住，那个 tabs(); 在未排序的列表中使用“a tags”。实际显示标签导航。

# 例子：

**CSS 也会影响 li:a 标签的轮廓**

```
.ui-state-active a, .ui-state-hover a {
    outline: none;
} 
```

**触发 jQuery UI 选项卡小部件**

```
$('#my-tabs').tabs(); 
```

**HTML中的标签标记**

```
<div id="my-tabs">
    <ul>
        <li><a href="#tab-1">Tab 1</a></li>
        <li><a href="#tab-2">Tab 1</a></li>
    </ul>
    <div id="tab-1"></div>
    <div id="tab-2"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-07-03T17:21:37.903

我喜欢丹尼尔的解决方案，我只是将其添加到其中：

```
.ui-state-active a, .ui-state-hover a, .ui-state-visited a, .ui-state-focus a  {
    outline: none;
} 
```

当您单击不同的选项卡`.ui-state-visited a`/`.ui-state-focus a`鼠标离开悬停区域时，它会停止显示大纲

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-03T18:01:30.557

我的答案是上述所有答案的简单和简短的混合使用以下

```
.ui-tabs .ui-tabs-nav li a { 
    outline:none;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-28T18:47:49.207

接受的答案在 Firefox 中有效，但我在 Mac 上的 Chrome 中遇到了问题。
大纲样式属性似乎为我解决了这个问题。

```
.ui-state-focus {
        outline-style:none;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-12T11:43:20.830

您可以覆盖`ui-state-focus`和`ui-state-active`css 类。

```
.ui-state-focus {
    border: none;
    outline: none;
}

.ui-state-active {
    border: none;
    outline: none;
} 
```

在*jQuery UI 选项卡*覆盖的情况下`ui-state-active`应该足够了。

**更新**：在您的情况下，这不是 ui-state-active 类，而是 webkit 中的常规锚大纲。我已经更新了你的小提琴：http: [//jsfiddle.net/ukPW6/4/](http://jsfiddle.net/ukPW6/4/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-14T06:14:29.877

如果上面的解决方案仍然不起作用，那么它是由`box-shadow`财产引起的。尝试这个：

```
.ui-state-focus:focus, .ui-state-focus, li a {
    box-shadow:none;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-16T11:21:34.420

我面临同样的问题。jQuery mobile 在运行时应用类，我尝试了上述解决方案，但它对我不起作用，然后我删除了 满足我要求**的 ui-shadow**类表单。`<div data-role="navbar" class="ui-corner-all">`

# google-maps - jquery-mobile 谷歌地图从地址而不是地球长纬度设置标记位置？

> ID：13838380
> 
> 赞同：0
> 
> 时间：2012-12-12T11:07:26.797
> 
> 标签：google-maps, jquery-mobile

如何根据地址而不是位置正确设置位置？作为一个侧节点，我尝试将其设置为一个不错的缩放值。有谁知道文档中的哪个地方提到了这一点？

使用下面的代码，但找不到任何关于如何根据“地址、街道、城市、州、国家/地区设置标记位置的参考”

```
$(document).live("pageshow", "#map_page", function() {
$('#map_canvas').gmap().bind('init', function(ev, map) {
    $('#map_canvas').gmap('addMarker', {'position': '57.7973333,12.0502107', 'bounds': true}).click(function() {
    });
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:27:28.457

*   使用 google geocoding API 将地址转换为 latlng 对象，然后在地图中绘制位置 [https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

*   使用`fitBounds`基于
    您正在绘制的点调整缩放级别的方法。
    [https://developers.google.com/maps/documentation/javascript/reference#Map](https://developers.google.com/maps/documentation/javascript/reference#Map)

# javascript - iScroll lite 在我到达滚动结尾或元素底部时查找

> ID：13838384
> 
> 赞同：5
> 
> 时间：2012-12-12T11:07:50.897
> 
> 标签：javascript, jquery, html, iscroll

好的，我一直在寻找答案，但尚未在我正在寻找的一般区域中找到答案。对 iScroll 不太熟悉（该项目的前开发人员添加了它，现在我正在接管它）。我一直在试图找出从 iScroll 开始的地方。

现在，就上下滚动而言，一切似乎都在相应地工作。但我想为已开发的整个应用程序添加一些功能，例如获取旧数据并将其附加到当时列出的更新数据中。无限卷轴。

通过 ajax 提取数据，并使用它来将其附加到 iScroll 长度并刷新 iScroll 长度并不是问题（我认为，至少目前是这样）。我的问题是找到到达底部的那一刻并启动我将要获取的数据并附加它的功能。

我在任何地方都找不到任何例子，所以我希望这里有人能给我一些想法

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T22:05:27.857

因为这个问题很老了。此解决方案适用于任何将来的参考。

使用**iScroll v4.2.5：**

```
var scroll = new iScroll('scroll-wrapper');
scroll.options.onScrollEnd = function(){
    if(Math.abs(this.maxScrollY) - Math.abs(this.y) < 10){
        // RUN CODE if scroll is 10px from the bottom.
    }
}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-16T03:48:17.410

一天之后，我使用 iscroll4 实现了平滑的无限滚动并拉动以刷新示例应用程序。这两个功能是在我创建的一个示例应用程序中实现的。希望它对这个移动应用程序开发者社区有用。

首先假设：

1.  您熟悉 iscroll4 函数（没有太大必要，因为我也不是大师）。
2.  你知道如何对 json 文件或 json/php 文件进行 ajax 调用

我的应用摘要：

当用户加载我的应用程序时，它会对我服务器上的 json/php 文件进行 ajax 调用，并返回一些值。

问题性质：我希望在拉动的同时进行**无限滚动****以刷新**功能，并且我不想使用除 iscroll4 之外的任何其他框架。

我的解决方案：

```
 <!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link href="http://fonts.googleapis.com/css?family=Headland+One%7COpen+Sans:400,300&amp;subset=latin,cyrillic" rel="stylesheet" type="text/css"></link>
  <link href="css/mystylesheet.css" rel="stylesheet">
<style>

/**
 *
 * Horizontal Scrollbar
 *
 */
.myScrollbarH {
    position:absolute;
    z-index:100;
    height:8px;
    bottom:1px;
    left:2px;
    right:7px
}

.myScrollbarH > div {
    position:absolute;
    z-index:100;
    height:100%;

    /* The following is probably what you want to customize */
    background:-webkit-gradient(linear, 0 0, 100% 0, from(#226BF4), to(#226B8F));
    background-image:-moz-linear-gradient(top, #226BF4, #226B8F);
    background-image:-o-linear-gradient(top, #226BF4, #226B8F);

    border:1px solid #226BF4;

    -webkit-background-clip:padding-box;
    -moz-background-clip:padding-box;
    -o-background-clip:padding-box;
    background-clip:padding-box;

    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    -o-box-sizing:border-box;
    box-sizing:border-box;

    -webkit-border-radius:4px;
    -moz-border-radius:4px;
    -o-border-radius:4px;
    border-radius:4px;

    -webkit-box-shadow:inset 1px 1px 0 rgba(255,255,255,0.5);
    -moz-box-shadow:inset 1px 1px 0 rgba(255,255,255,0.5);
    -o-box-shadow:inset 1px 1px 0 rgba(255,255,255,0.5);
    box-shadow:inset 1px 1px 0 rgba(255,255,255,0.5);
}

/**
 *
 * Vertical Scrollbar
 *
 */
.myScrollbarV {
    position:absolute;
    z-index:100;
    width:8px;bottom:7px;top:2px;right:1px
}

.myScrollbarV > div {
    position:absolute;
    z-index:100;
    width:100%;

    /* The following is probably what you want to customize */
    background:-webkit-gradient(linear, 0 0, 100% 0, from(#226BF4), to(#226B8F));
    background-image:-moz-linear-gradient(top, #226BF4, #226B8F);
    background-image:-o-linear-gradient(top, #226BF4, #226B8F);

    border:1px solid #226BF4;

    -webkit-background-clip:padding-box;
    -moz-background-clip:padding-box;
    -o-background-clip:padding-box;
    background-clip:padding-box;

    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    -o-box-sizing:border-box;
    box-sizing:border-box;

    -webkit-border-radius:4px;
    -moz-border-radius:4px;
    -o-border-radius:4px;
    border-radius:4px;

    -webkit-box-shadow:inset 1px 1px 0 rgba(255,255,255,0.5);
    -moz-box-shadow:inset 1px 1px 0 rgba(255,255,255,0.5);
    -o-box-shadow:inset 1px 1px 0 rgba(255,255,255,0.5);
    box-shadow:inset 1px 1px 0 rgba(255,255,255,0.5);
}

/**
 *
 * Pull down styles
 *
 */
#pullDown, #pullUp {
    background:#fff;
    height:40px;
    line-height:40px;
    padding:5px 10px;
    border-bottom:1px solid #ccc;
    font-weight:bold;
    font-size:14px;
    color:#888;
}
#pullDown .pullDownIcon, #pullUp .pullUpIcon  {
    display:block; float:left;
    width:40px; height:40px;
    background:url(images/pull-icon@2x.png) 0 0 no-repeat;
    -webkit-background-size:40px 80px; background-size:40px 80px;
    -webkit-transition-property:-webkit-transform;
    -webkit-transition-duration:250ms;  
}
#pullDown .pullDownIcon {
    -webkit-transform:rotate(0deg) translateZ(0);
}
#pullUp .pullUpIcon  {
    -webkit-transform:rotate(-180deg) translateZ(0);
}

#pullDown.flip .pullDownIcon {
    -webkit-transform:rotate(-180deg) translateZ(0);
}

#pullUp.flip .pullUpIcon {
    -webkit-transform:rotate(0deg) translateZ(0);
}

#pullDown.loading .pullDownIcon, #pullUp.loading .pullUpIcon {
    background-position:0 100%;
    -webkit-transform:rotate(0deg) translateZ(0);
    -webkit-transition-duration:0ms;

    -webkit-animation-name:loading;
    -webkit-animation-duration:2s;
    -webkit-animation-iteration-count:infinite;
    -webkit-animation-timing-function:linear;
}

@-webkit-keyframes loading {
    from { -webkit-transform:rotate(0deg) translateZ(0); }
    to { -webkit-transform:rotate(360deg) translateZ(0); }
}

</style>
</head>
<body style="overflow: hidden;" onload="do_refresh();">
<div class="wrap">
<div id="wrapper">
        <div id="scroller">
        <div id="pullDown">
            <span class="pullDownIcon"></span><span class="pullDownLabel">Pull down to refresh...</span>
        </div>

    <div class="content">
    <input type="hidden" id="last_id">              
            <div id="responsecontainer"></div>
        </div>

        <span class="load_more_loading" ></span>
    </div>
    </div>
</div>

       <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
        <script src="js/iscroll.js"></script>
<script src="js/pulltorefresh.js"></script>
<script src="js/infinitescroll.js></script>

<script src="js/myinitialloadscript.js"></script>
    <script src="js/mymobileframework.js"></script> <!--independent of this script. eg. whormhole from mosync-->

    </body>
        </html> 
```

接下来是创建 myinitialloadscript.js 脚本。这允许在该页面上首次将内容加载到应用程序中。

```
 function do_refresh()
    {

    var url = "http://localhost/public_html/landing.php?token=908765789897867567687989089786768980&validator=jhjhjjhjhkhj"; //just url params
    // -------------------------------------------

    $.ajax({
            type: 'GET',
            url: url,
            contentType: "application/json; charset=utf-8",
            dataType: "jsonp",
            // Evaluate text as a json expression
            converters: {"text jsonp": jQuery.parseJSON},
            timeout:30000,
            async: true,
            jsonp: true,
            jsonpCallback: "myJsonMethod",
            beforeSend: function()
            {

//add loading image i dint bcos the image or values becomes double in a case of network delay
            $("#responsecontainer").html("images/loader.gif").show();
            },
            success: function(data)
            {
           ajax.parseJSONP(data);
            },
            error: function(jqXHR, textStatus, errorThrown)
            {
            console.log(errorThrown);
            alert("Could Not Refresh.");
            $("#responsecontainer").html("");//remove loading image
            //$("#responsecontainer").load("refresh_h.html"); //load a page with refresh option.
            }
        });
    $.ajaxSetup({ cache: false }); //fetch data from db not cache content
    }

//if data is fectched successfully then

    var ajax = {  

        parseJSONP:function(data){

            $.each(data, function(i, row) {
            if (i==0){
            $("#responsecontainer").html('');
            }

            var ul = '<li>'+row.myjsondatakey+'</li>'; //could be <div></div> This only displays your values from db in a styled manner
            $(ul).appendTo('#responsecontainer');// append the value to the responsecontainer

//Now watch closely. remember it was assumed you have a json file or json/php file, and in
//most cases you get your json data format from PHP file. so we assume its from a php file.
//also note that php calls to db can have a LIMIT. so in this case my PHP file data LIMIT 
//was set to 5\. because of infinite scrolling, i need to know the id of the last element 
//from my returned data. so i write the following. note that my row.id_comments which is my
 //value i want to get was written into an input whose visibility is hidden. this is to 
//enable me over write its value when the last id changes.
            if (i==4)
            {
            //set last id value
            $('#last_id').val(row.id_comments);
            } 

    });
    }
    } 
```

接下来是实现pulltorefresh.js，这个就不多说了，因为iscroll4 中的例子很清楚。

```
var myScroll,
    pullDownEl, pullDownOffset,
    pullUpEl, pullUpOffset,
    generatedCount = 0;

function pullDownAction () {
        var el;
        el = document.getElementById('responsecontainer');

var url = "http://localhost/public_html/landing.php?token=78654567897654356789976546789&valid=jhjhjjhjhkhj";

        $.ajax({
        type: 'GET',
        url: url,
        contentType: "application/json; charset=utf-8",
        dataType: "jsonp",
        // Evaluate text as a json expression
        converters: {"text jsonp": jQuery.parseJSON},
        timeout:30000,
        async: true,
        jsonp: true,
        jsonpCallback: "myJsonMethod",
        error: function(){
        myScroll.refresh(); //do nofin
        },
        success: function(data){
        //console.dir('success');
        ajax.parseJSONP(data);
        }
        });
$.ajaxSetup({ cache: false }); //fetch data from db not cache content

var ajax = {  

    parseJSONP:function(data){
        $.each(data, function(i, row) {

        if (i==0){
        $("#responsecontainer").html('');
        }

        var ul = '<li>'+row.myjsondatakey+'</li>';
        $(ul).appendTo(el);

if (i==4)
            {
            //set last id value
            $('#last_id').val(row.id_comments);
            } 
        myScroll.refresh(); // Remember to refresh when contents are loaded (ie: on ajax completion)

});
}
}
}

    function loaded() {
        pullDownEl = document.getElementById('pullDown');
        pullDownOffset = pullDownEl.offsetHeight;

        myScroll = new iScroll('wrapper', {
           scrollbarClass: 'myScrollbar',
            useTransition: true,
            topOffset: pullDownOffset,
            onRefresh: function () {
                if (pullDownEl.className.match('loading')) {
                    pullDownEl.className = '';
                    pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Pull down to refresh...';
                } 
            },
            onScrollMove: function () {
                if (this.y > 5 && !pullDownEl.className.match('flip')) {
                    pullDownEl.className = 'flip';
                    pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Release to refresh...';
                    this.minScrollY = 0;
                } else if (this.y < 5 && pullDownEl.className.match('flip')) {
                    pullDownEl.className = '';
                    pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Pull down to refresh...';
                    this.minScrollY = -pullDownOffset;
                } 
            },

//here is where infinite scroll comes in
                onScrollEnd: function () {
                //infinite scroll started
                if(Math.abs(this.maxScrollY) - Math.abs(this.y) < 10)
                {
                // Do infinite if scroll is 10px from the bottom.
                doInfinite_scroll();
                }

                //infinite scroll ended

                if (pullDownEl.className.match('flip')) {
                    pullDownEl.className = 'loading';
                    pullDownEl.querySelector('.pullDownLabel').innerHTML = 'Loading...';                
                    pullDownAction();   // Execute custom function (ajax call?)
                } 
            }
        });

        setTimeout(function () { document.getElementById('wrapper').style.left = '0'; }, 800);
    }

    document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);

    document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false); 
```

最后但并非最不重要的一点是主要的infinitescroll.js 记得我们之前在pulltorefresh.js 中调用了这个函数，我们说如果滚动条到最后10px 则应该触发inifite 滚动。然后我们将其作为要发射的镜头。

```
function doInfinite_scroll()
{
        var last_id = $('#last_id').val();
        var searching = false;
        if (!searching) { // only initiate a new ajax request if this variable is false this is to avoid data duplication.
        var el;
        el = document.getElementById('responsecontainer');
        var url = "http://localhost/public_html/landing_more.php?last_id="+last_id+"&token=9876543456789765432456789876543&valid=jhjhjjhjhkhj";
        // -------------------------------------------

        $.ajax({
        type: 'GET',
        url: url,
        contentType: "application/json; charset=utf-8",
        dataType: "jsonp",
        // Evaluate text as a json expression
        converters: {"text jsonp": jQuery.parseJSON},
        timeout:30000,
        async: true,
        jsonp: true,
        jsonpCallback: "myJsonMethod",
        error: function(){
        myScroll.refresh(); //do nofin
        },
        beforeSend: function()
        {
        //add loading image i dint bcos the image or values becomes double in a case of network delay
        searching = true; // set variable to true
        },
        success: function(data){
        searching = false; // set variable to false
       //console.dir('success');
        ajax.parseJSONP(data);

        }
        });
        $.ajaxSetup({ cache: false });//fetch data from db not cache content
        var ajax = {  

        parseJSONP:function(data){
        $.each(data, function(i, row) {

        var ul = '<ul>'+row.comments+'</ul>';
        if (i==1) //bcos its php data limit was set to 2 so its always N-1 i.e yourlimit - 1
        {
        //resset lastdeed id value
        $('#lastdeed_id').val(row.id_comments); //update the value in the hidden input field to enable the next set of data load properly
        } 
        $(ul).appendTo(el);
        myScroll.refresh();     // Remember to refresh when contents are loaded (ie: on ajax completion)

});
}
}
}
} 
```

因此，以防万一您迷失了 php 文件的外观。这个文件是landing.php

```
<?php
// Prevent caching.
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 01 Jan 1996 00:00:00 GMT');

if ((isset($_GET['token'])) && (isset($_GET['valid']))) {

@require_once('connect/connectionfile.php');  

$token=htmlspecialchars($_GET['token'],ENT_QUOTES);
$token= mysql_real_escape_string($token);
$valid=htmlspecialchars($_GET['valid'],ENT_QUOTES);
$valid= mysql_real_escape_string($valid);

//now validating the token
$sql="SELECT * FROM bla WHERE blabla='$token'";
$result=mysql_query($sql);

//if token exists
if(mysql_num_rows($result))
{
 header('Content-type: application/json');
//valid token
 $fakevalue = mysql_fetch_assoc($result);
 $uid = $fakevalue['id'];
 $results = array();
 $query = "SELECT * FROM bla bal WHERE bla bla bla DESC LIMIT 0, 5";
 $rsult = mysql_query($query);
 while($value = mysql_fetch_assoc($rsult, MYSQL_ASSOC))
 $results[] = $value;
 {
 echo "myJsonMethod".'('.json_encode($results).')'; //ECHO RESULTS IN JSONP FORMAT

}

}
else 
{
 //Invalid token
 header('Content-type: application/json');
 echo "myJsonMethod({\"token\":".utf8_encode(json_encode('failed'))."})";
}
}
else {
    header('Content-type: application/json');
    echo "myJsonMethod({\"token\":".utf8_encode(json_encode('Invalid token check parameters'))."})";
    }
?> 
```

下一个文件用于无限滚动，它被称为landing_more.php

```
<?php
// Prevent caching.
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 01 Jan 1996 00:00:00 GMT');

if ((isset($_GET['token'])) && (isset($_GET['validator']))) {

@require_once('connect/connectionfile.php');  

$token=htmlspecialchars($_GET['token'],ENT_QUOTES);
$token= mysql_real_escape_string($token);
$validator=htmlspecialchars($_GET['validator'],ENT_QUOTES);
$validator= mysql_real_escape_string($validator);
$last_id=htmlspecialchars($_GET['last_id'],ENT_QUOTES);
$last_id=mysql_real_escape_string($last_id);

//now validating the token
$sql="SELECT * FROM bla WHERE blabla='$token'";
$result=mysql_query($sql);

//if token exists
if(mysql_num_rows($result))
{
 header('Content-type: application/json');
//valid token
 $fakevalue = mysql_fetch_assoc($result);
 $uid = $fakevalue['id'];
 $results = array();
 $query = "SELECT * FROM bla bla WHERE bla && bla bla && a.id_comments < '$last_id' ORDER BY a.id_comments DESC LIMIT 0, 2";
 $rsult = mysql_query($query);
 while($value = mysql_fetch_assoc($rsult, MYSQL_ASSOC))
 $results[] = $value;
 {
 echo "myJsonMethod".'('.json_encode($results).')'; //ECHO RESULTS IN JSONP FORMAT

}

}
else 
{
 //Invalid token
 header('Content-type: application/json');
 echo "myJsonMethod({\"token\":".utf8_encode(json_encode('failed'))."})";
}
}
else {
    header('Content-type: application/json');
    echo "myJsonMethod({\"token\":".utf8_encode(json_encode('Invalid token check parameters'))."})";
    }
?> 
```

# php - ubuntu 服务器 12.04 - php 文件下载

> ID：13838386
> 
> 赞同：1
> 
> 时间：2012-12-12T11:07:55.910
> 
> 标签：php, apache, fastcgi, ubuntu-12.04

希望有人可以帮助我，我在尝试下载 php 文件时遇到了同样的问题。

我已经尝试了所有答案，但：

ln -s /etc/apache2/mods-available/php5.conf /etc/apache2/mods-enabled/php5.conf ln -s /etc/apache2/mods-available/php5.load /etc/apache2/mods-enabled /php5.load

当我尝试它们时，我无法创建符号链接文件存在，所以我想这一切都准备好了，其他人还有更多我可以尝试的东西，我是 linux 新手，我按照本指南进行了设置：[http:// www.howtoforge.com/perfect-server-ubuntu-12.04-lts-apache2-bind-dovecot-ispconfig-3](http://www.howtoforge.com/perfect-server-ubuntu-12.04-lts-apache2-bind-dovecot-ispconfig-3)

奇怪的是 joomla 和 drupal 网站可以工作，但自己的 php 脚本却没有。

我已经尝试了此页面上的所有内容： [ubuntu 上的 apache2 - php 文件正在下载](https://stackoverflow.com/questions/6245895/apache2-on-ubuntu-php-files-downloading/13837737#13837737) ，但它们都不起作用。

当我尝试运行此命令时： sudo a2enmod php 我得到，模块 php 不存在。我想我需要运行一个命令来安装它？如果是的话，请问是什么。

谢谢大家。

继承人要求的更多信息：

不确定 isp config 将每个网站的文件夹存储在哪里，但我连接到 ftp 站点并上传到 web 文件夹中，就像我为正在工作的 drupal 和 joomla 网站所做的那样

启用的网站：

```
/
000-apps.vhost@
000-default@
000-ispconfig.conf@
000-ispconfig.vhost@
100-analytics.cyberglide.co.uk.vhost@
100-cyberglide.co.uk.vhost@
100-hideandcollars.co.uk.vhost@
100-jubileeleather.co.uk.vhost@
100-rookselectrical.co.uk.vhost@
100-wolds-uniforms.co.uk.vhost@ 
```

所有网站都在工作（他们正在运行 joomla 或 drupal），但 www.jubileeleather.co.uk/index.php 必须放置一个 html 文件，直到我可以对其进行排序。

php脚本：

```
 <?php
    //Add required class and config files below
    require ('_class/cms.php');
    require ('config/db.php');

    //Get Required Page, if its not set call it the index
   $page = (isset($_GET['page'])) ? $_GET['page'] : 'index';

   //If the page is set as index
    if($page == 'index'){
    //Include Index
    require ('public/index.php');
    }

    //Else if the page is contact
    elseif ($page == 'contact') {
    //Include Contact
    require ('public/contact.php');

    //If the page is none of the above  
    } else {
    //Include Layout
    require ('public/layout.php');
    }
    ?> 
```

我正在通过 ssh 使用腻子，我如何将文件中的内容复制到此处发布？您还需要哪些文件？再次感谢。

这是 jubileeleather v 主机文件的内容，不确定我在这里寻找什么：

AllowOverride None Order Deny,Allow Deny from all

DocumentRoot /var/www/jubileeleather.co.uk/web

```
ServerName jubileeleather.co.uk
ServerAlias www.jubileeleather.co.uk
ServerAdmin webmaster@jubileeleather.co.uk

ErrorLog /var/log/ispconfig/httpd/jubileeleather.co.uk/error.log

Alias /error/ "/var/www/jubileeleather.co.uk/web/error/"
ErrorDocument 400 /error/400.html
ErrorDocument 401 /error/401.html
ErrorDocument 403 /error/403.html
ErrorDocument 404 /error/404.html
ErrorDocument 405 /error/405.html
ErrorDocument 500 /error/500.html
ErrorDocument 502 /error/502.html
ErrorDocument 503 /error/503.html

<IfModule mod_ssl.c>
</IfModule>

<Directory /var/www/jubileeleather.co.uk/web>
    Options FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>
<Directory /var/www/clients/client3/web4/web>
    Options FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>

# suexec enabled
<IfModule mod_suexec.c>
  SuexecUserGroup web4 client3
</IfModule>
# Clear PHP settings of this website
<FilesMatch "\.ph(p3?|tml)$">
    SetHandler None
</FilesMatch>
# php as fast-cgi enabled
# For config options see: http://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html
<IfModule mod_fcgid.c>
    IdleTimeout 300
    ProcessLifeTime 3600
    # MaxProcessCount 1000
    DefaultMinClassProcessCount 0
    DefaultMaxClassProcessCount 100
    IPCConnectTimeout 3
    IPCCommTimeout 360
    BusyTimeout 300
</IfModule>
<Directory /var/www/jubileeleather.co.uk/web>
    AddHandler fcgid-script .php .php3 .php4 .php5
    FCGIWrapper /var/www/php-fcgi-scripts/web4/.php-fcgi-starter .php
    Options +ExecCGI
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>
<Directory /var/www/clients/client3/web4/web>
    AddHandler fcgid-script .php .php3 .php4 .php5
    FCGIWrapper /var/www/php-fcgi-scripts/web4/.php-fcgi-starter .php
    Options +ExecCGI
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>

# add support for apache mpm_itk
<IfModule mpm_itk_module>
  AssignUserId web4 client3
</IfModule>

<IfModule mod_dav_fs.c>
  # Do not execute PHP files in webdav directory
  <Directory /var/www/clients/client3/web4/webdav>
    <FilesMatch "\.ph(p3?|tml)$">
      SetHandler None
    </FilesMatch>
  </Directory>
  DavLockDB /var/www/clients/client3/web4/tmp/DavLock
  # DO NOT REMOVE THE COMMENTS!
  # IF YOU REMOVE THEM, WEBDAV WILL NOT WORK ANYMORE!
  # WEBDAV BEGIN
  # WEBDAV END
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:44:17.350

除了在启用了 PHP 解析的目录中拥有自己的 PHP 文件（由于我有一段时间没有使用 Apache，我不能真正说出它是如何完成的），您应该检查您的脚本是否具有正确的扩展名（应该始终.php) 和脚本开始标签`<?php`- 不要使用短标签`<?`以避免将脚本移动到实时服务器时可能出现的问题。

由于您的文件被返回以供下载，我认为您的目录中没有启用 PHP 解析的脚本。发布您的 Apache 和 PHP 配置文件可以帮助我们识别问题。

# c++ - 符号提升无法解决

> ID：13838389
> 
> 赞同：2
> 
> 时间：2012-12-12T11:08:09.313
> 
> 标签：c++, eclipse, boost

我使用 boost 和 eclipse 作为我的 IDE。

Boost 位于 /home/ubuntu/cpp/boost_1_52_0/boost

在 Eclipse IDE 中，我得到一条红色的波浪线，上面写着：

```
symbol boost could not be resolved-> using namespace boost; 
```

在 ide 和 eclipse 设置中，我有 include 指定了路径 home/ubuntu/cpp/boost_1_52_0/。Soo ..我如何使提升工作？我错过了什么？

```
#include <iostream>
#include <stdlib.h>
#include <vector>
#include <string>
#include <time.h>

#include <boost/tokenizer.hpp>
using namespace boost;

using namespace std; 
```

# php - 从填写的网站表单收到的电子邮件信息中的要点

> ID：13838390
> 
> 赞同：0
> 
> 时间：2012-12-12T11:08:13.630
> 
> 标签：php, html, forms, email

我正在构建一个网站表单页面，用户在其中输入信息，一旦提交，这些信息就会发送到我的电子邮件中。这似乎工作正常，但是，我希望信息在发送后以项目符号的形式显示在电子邮件中。

下面显示了以一大块发送所有信息的代码，但是如何从每个标题（即公司名称、电子邮件、电话号码等）中添加项目符号？甚至行空间也可以...

**代码：**

```
$to = 'bla@hotmail.com';
$subject = 'Quote';
$message = 'FROM: '.$companyname. '-' .$fullname. 'Email: '.$email. ' Phone Number:     '.$phonenumber;
$headers = 'From: bla@hotmail.com' . "\r\n"; 
```

**预期结果：**

公司名：

全名：

电子邮件：

电话号码：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:22:49.967

要发送带有格式（或一般格式文本）的列表，您必须使用 HTML。

所以，`$headers`会变成：

`$headers = 'From: bla@hotmail.com' . "\r\nContent-type: text/html\r\n";`

告诉客户这封邮件是 HTML 而不是纯文本。

然后，消息将是

```
 $message = <<<EOF 
  <html> 
    <body> 
  <ul>
  <li>Company name: $companyname</li>
  <li>Full name: $fullname </li>
  </ul>
    </body> 
  </html> 
  EOF; 
```

另请参阅[此处的“示例 #4 发送 HTML 电子邮件”](http://php.net/manual/en/function.mail.php)

# c++ - C++ 跨平台轻量级文件、线程和处理库

> ID：13838393
> 
> 赞同：2
> 
> 时间：2012-12-12T11:08:28.043
> 
> 标签：c++, multithreading, process

我正在为我自己的 C++ 编程语言编写一个包装库。我的库的一些最重要的意图是它必须快速、简单、便携和轻量级。

目前它取决于 Boost 库。boost 库的问题在于它相对较大（文件大小）。此外，这取决于您必须自己构建的静态库。与任何本机编译器 (std) 附带的预构建库相比，它缺少 4 个内涵中的 2 个：

*   简单 - 用户需要自己构建提升
*   轻量级 - Boost 本身大约 100 MB

我希望得到一些建议，因为目前我仅将 boost 用于 std 不提供线程、文件搜索和进程创建（使用不被接受的 Boost.Process）之类的目的。

对我来说最好的选择是什么，继续使用 boost，自己编写库，或者你们知道其他可以满足我需求的好的库吗？

**编辑：**这个项目正在 Windows 上使用 MinGW 开发，以便与其他平台 (GCC) 移植。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:18:19.110

[从 C++11 标准开始，C++ 就在标准库](http://en.cppreference.com/w/cpp/thread)中内置了线程。

# python - 我可以在 Python 中轻松获得分辨率较低的日期时间吗？

> ID：13838394
> 
> 赞同：10
> 
> 时间：2012-12-12T11:08:34.217
> 
> 标签：python, datetime

显然我可以从中获取日期和时间`datetime.datetime.now()`，但我实际上并不关心秒数，尤其是微秒数。

有什么地方可以轻松获得日期+小时+分钟吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-12T11:18:54.460

您可以像这样清除日期时间值的第二个和微秒部分：

```
dt = datetime.datetime.now()
#Now get rid of seconds and microseconds component:
dt = dt.replace(second=0, microsecond=0) 
```

这将允许您将日期时间与分钟粒度进行比较。

如果您只想打印没有秒/微秒组件的日期，请使用适当的格式字符串：

```
dt = datetime.datetime.now()
print dt.strftime("%Y/%m/%d %H:%M")

>>> '2012/12/12 12:12' 
```

# javascript - 为什么我们需要主干 js 或任何 JS MVC 框架？

> ID：13838395
> 
> 赞同：6
> 
> 时间：2012-12-12T11:08:34.917
> 
> 标签：javascript, model-view-controller, backbone.js, frameworks, backend

如果我们已经在使用后端 MVC 框架（例如 Django 或 ROR），为什么还需要使用 JS MVC 框架（骨干）。我无法理解两个 MVC 框架的概念以及它们如何组合在一起。我认为所有前端相关的文件或逻辑（html、css、js）都在后端框架的视图组件下。有人可以用更简单的术语解释一下吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T11:18:39.623

Backbone 位于客户端[浏览器]，以便快速交互和体验。[通过这种方式，您可以利用通过websockets](http://en.wikipedia.org/wiki/WebSocket)或[LocalStorage](http://www.html5rocks.com/en/features/storage)进行的实时通信。

使用客户端 MVC [MVVM 更好，在 Backbone 的情况下] 意味着您只需从服务器提供一组 RESTful 资源[可以在许多其他上下文中重用]，而不是完整的 HTML 生成堆栈。

也就是说，客户端 MVC 更接近于面向桌面/移动 UI 的 MVC 实现 [参见 Cocoa / iOS]，而不是面向 Web 的 MVC [Symfony、Django、RoR ...]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:17:18.863

这主要是因为可扩展性，每个 MV* 框架都允许您制作模块化代码。为了给用户使用网站的高体验，JS代码和一些烟花是必要的。JavaScript 还提供了将后端从不必要的计算中解脱出来的可能性，并且由于这些简单的事实和当前制作的网站的规模（后端和前端的大量模块），这样的 MV* JavaScripts 框架被制作并变得越来越流行.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-24T19:10:28.027

这些 JavaScript MVC 框架开始流行的原因之一似乎是为了给客户端 JavaScript 代码带来一些结构。近年来，JavaScript 在 Web 应用程序中的使用越来越多，因为它极大地增强了客户端体验，但是当你不断添加越来越多的内容时，它很快就会变成一堆乱七八糟的意大利面条代码。如果您曾经继承过一个包含大量 JavaScript 的 Web 应用程序，那么您就会知道可能需要很长时间来整理所有的回调、函数、DOM 操作等，这只是为了掌握应用程序的工作原理和绑在一起。它可能真的很乱。这些 JavaScript MVC 框架也有助于组织所有这些代码并带来结构，因此它不会失控。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:14:58.873

你可能想看看这篇文章[为什么使用 MVVM？](https://stackoverflow.com/questions/2653096/why-use-mvvm)

我一直在使用 MVVM，发现它对前端非常有用。渲染更快更流畅，并且视图模型绑定在客户端完成。

# sql-server-2008 - 选择最大值（数据）

> ID：13838398
> 
> 赞同：1
> 
> 时间：2012-12-12T11:08:43.867
> 
> 标签：sql-server-2008

我有一张桌子：

```
id  cod_pr      Date        nr
-------------------------------
1     22     12.10.2012     2
2     25     12.10.2012     3
3     22     12.11.2012     5
4     25     12.11.2012     2
5     22     12.12.2012     4
6     23     12.10.2012     3 
```

我如何从每个 cod_pr 中仅选择最大日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:12:38.177

```
select cod_pr,MAX(Date) from Table
group by cod_pr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:11:11.830

如果您想要所有列，您可以`ROW_NUMBER`在 CTE 中使用：

```
WITH CTE AS
(
   SELECT id,cod_pr,Date,nr,
      ROW_NUMBER() OVER (PARTITION BY cod_pr ORDER BY Date DESC) AS RN
   FROM dbo.Table
)
SELECT id,cod_pr,Date,nr, FROM CTE WHERE RN = 1 
```

否则你可以简单地使用`GROUP BY`

```
SELECT cod_pr, MAX(Date) AS MaxDate
FROM dbo.Table
GROUP BY cod_pr 
```

# mysql - 在这种情况下我必须使用哪种方式使用外键？

> ID：13838404
> 
> 赞同：1
> 
> 时间：2012-12-12T11:09:28.393
> 
> 标签：mysql, database-design

嗨，我有点困惑..！

```
address_details(e_address_id(pk),hno,street....)
emp_details(eid(pk),ename,...,e_address_id(fk)) 
```

或者

```
emp_details(eid(pk),ename,...,)
address_details(e_address_id(pk),eid(fk)hno,street....) 
```

无论哪种方式它都有效..但我无法决定我需要选择哪个，让我知道哪个更好..我是 DB Design 的新手。感谢广告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:46:51.823

第一个设计更好，但可能还不够好。

第二种设计要求如果两个员工共享相同的地址，则必须以冗余方式存储地址详细信息。

第一个设计允许多个员工共享一个地址，这可能是必要的。然而，第一种设计只允许员工拥有一个地址。如果这就是您的系统所需的全部，那么第一个设计就可以了。

但是，如果您可能需要允许员工拥有多个地址并由多个员工共享地址，那么您将不得不考虑从任一表中删除外键并将它们移动到新的*交集表*：

```
employee_address(e_id(fk), e_address_id(fk)) 
```

您选择的设计取决于您的业务规则以及现实中的合理预期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:55:16.640

您需要了解关系数据库中的多重性概念或关系概念。

```
address_details(e_address_id(pk),hno,street....)
emp_details(eid(pk),ename,...,e_address_id(fk)) 
```

此结构将调用（emp entity1 和 Address entity2）从 Employee 到地址的一对多关系。这意味着多个员工可以住在同一个地址。但同时一名员工不能住在多个地点
所以 EmpA 住在 Add-A
EmpB 住在 Add-B
Empc 住在 Add-A（EmpA 也住在哪里）
在以下结构中 EmpA 不能住在两个地址。

```
emp_details(eid(pk),ename,...,)
address_details(e_address_id(pk),eid(fk)hno,street....) 
```

上述结构是多一关系。
一个人可以住在多个地址，但两个人不能住在一个地址。希望这能解释很多。

了解更多关系数据库中的读取多重性

# python - 熊猫数据框中的自定义排序

> ID：13838405
> 
> 赞同：117
> 
> 时间：2012-12-12T11:09:42.730
> 
> 标签：python, pandas

我有 python pandas 数据框，其中一列包含月份名称。

如何使用字典进行自定义排序，例如：

```
custom_dict = {'March':0, 'April':1, 'Dec':3} 
```

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-12-12T11:44:10.410

Pandas 0.15 引入了[Categorical Series](http://pandas.pydata.org/pandas-docs/stable/categorical.html)，它允许以更清晰的方式执行此操作：

首先将月份列设为分类并指定要使用的排序。

```
In [21]: df['m'] = pd.Categorical(df['m'], ["March", "April", "Dec"])

In [22]: df  # looks the same!
Out[22]:
   a  b      m
0  1  2  March
1  5  6    Dec
2  3  4  April 
```

现在，当您对月份列进行排序时，它将根据该列表进行排序：

```
In [23]: df.sort_values("m")
Out[23]:
   a  b      m
0  1  2  March
2  3  4  April
1  5  6    Dec 
```

*注意：如果一个值不在列表中，它将被转换为 NaN。*

* * *

对于那些感兴趣的人来说，一个较旧的答案......

您可以创建一个中间系列，然后[`set_index`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.set_index.html)：

```
df = pd.DataFrame([[1, 2, 'March'],[5, 6, 'Dec'],[3, 4, 'April']], columns=['a','b','m'])
s = df['m'].apply(lambda x: {'March':0, 'April':1, 'Dec':3}[x])
s.sort_values()

In [4]: df.set_index(s.index).sort()
Out[4]: 
   a  b      m
0  1  2  March
1  3  4  April
2  5  6    Dec 
```

* * *

正如所评论的，在较新的 pandas 中，Series 有一种[`replace`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.replace.html)更优雅的方法：

```
s = df['m'].replace({'March':0, 'April':1, 'Dec':3}) 
```

*细微的差别是，如果字典之外有值，这不会提高（它会保持不变）。*

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2019-01-22T04:19:13.410

# 熊猫 >= 1.1

您很快就能使用`sort_values`with`key`参数：

```
pd.__version__
# '1.1.0.dev0+2004.g8d10bfb6f'

custom_dict = {'March': 0, 'April': 1, 'Dec': 3} 
df

   a  b      m
0  1  2  March
1  5  6    Dec
2  3  4  April

df.sort_values(by=['m'], **key=lambda x: x.map(custom_dict)**)

   a  b      m
0  1  2  March
2  3  4  April
1  5  6    Dec
```

该`key`参数将一个系列作为输入并返回一个系列。该系列在内部是 argsorted，排序后的索引用于重新排序输入 DataFrame。如果有多个列要排序，键函数将依次应用于每一列。请参阅[使用键排序](https://pandas.pydata.org/pandas-docs/dev/whatsnew/v1.1.0.html#sorting-with-keys)。

* * *

# 熊猫 <= 1.0.X

一种简单的方法是使用输出[`Series.map`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.map.html)并[`Series.argsort`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.argsort.html)索引到`df`using [`DataFrame.iloc`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.iloc.html)（因为 argsort 产生排序的整数位置）；因为你有字典；这变得容易。

```
df.iloc[df['m'].map(custom_dict).argsort()]

   a  b      m
0  1  2  March
2  3  4  April
1  5  6    Dec 
```

如果您需要**按降序排序**，请反转映射。

```
df.iloc[(-df['m'].map(custom_dict)).argsort()]

   a  b      m
1  5  6    Dec
2  3  4  April
0  1  2  March 
```

请注意，这仅适用于数字项目。否则，您将需要使用[`sort_values`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_values.html)和访问索引来解决此问题：

```
df.loc[df['m'].map(custom_dict).sort_values(ascending=False).index]

   a  b      m
1  5  6    Dec
2  3  4  April
0  1  2  March 
```

更多选项可用于`astype`（现在已弃用）或[`pd.Categorical`](https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.Categorical.html#pandas-categorical)，但您需要指定`ordered=True`它才能正常*工作*。

```
# Older version,
# df['m'].astype('category', 
#                categories=sorted(custom_dict, key=custom_dict.get), 
#                ordered=True)
df['m'] = pd.Categorical(df['m'], 
                         categories=sorted(custom_dict, key=custom_dict.get), 
                         ordered=True) 
```

现在，一个简单的[`sort_values`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_values.html)调用就可以解决问题：

```
df.sort_values('m')

   a  b      m
0  1  2  March
2  3  4  April
1  5  6    Dec 
```

对输出进行排序时，也将遵守分类排序`groupby`。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-11-19T05:40:45.837

# 更新

使用[选定的答案](https://stackoverflow.com/a/13839029/3888719)！它比这篇文章更新，不仅是在 pandas 中维护有序数据的官方方式，它在各个方面都更好，包括功能/性能等。不要使用我在下面描述的 hacky 方法。

我只是写这个更新，因为人们一直在支持我的答案，但它肯定比接受的更糟糕:)

# 原帖

游戏有点晚了，但这里有一种方法可以创建一个函数，使用任意函数对 pandas Series、DataFrame 和多索引 DataFrame 对象进行排序。

我使用了该`df.iloc[index]`方法，它按位置引用 Series/DataFrame 中的一行（与`df.loc`按值引用的 相比）。使用它，我们只需要一个返回一系列位置参数的函数：

```
def sort_pd(key=None,reverse=False,cmp=None):
    def sorter(series):
        series_list = list(series)
        return [series_list.index(i) 
           for i in sorted(series_list,key=key,reverse=reverse,cmp=cmp)]
    return sorter 
```

您可以使用它来创建自定义排序功能。这适用于安迪·海登回答中使用的数据框：

```
df = pd.DataFrame([
    [1, 2, 'March'],
    [5, 6, 'Dec'],
    [3, 4, 'April']], 
  columns=['a','b','m'])

custom_dict = {'March':0, 'April':1, 'Dec':3}
sort_by_custom_dict = sort_pd(key=custom_dict.get)

In [6]: df.iloc[sort_by_custom_dict(df['m'])]
Out[6]:
   a  b  m
0  1  2  March
2  3  4  April
1  5  6  Dec 
```

这也适用于多索引 DataFrames 和 Series 对象：

```
months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']

df = pd.DataFrame([
    ['New York','Mar',12714],
    ['New York','Apr',89238],
    ['Atlanta','Jan',8161],
    ['Atlanta','Sep',5885],
  ],columns=['location','month','sales']).set_index(['location','month'])

sort_by_month = sort_pd(key=months.index)

In [10]: df.iloc[sort_by_month(df.index.get_level_values('month'))]
Out[10]:
                 sales
location  month  
Atlanta   Jan    8161
New York  Mar    12714
          Apr    89238
Atlanta   Sep    5885

sort_by_last_digit = sort_pd(key=lambda x: x%10)

In [12]: pd.Series(list(df['sales'])).iloc[sort_by_last_digit(df['sales'])]
Out[12]:
2    8161
0   12714
3    5885
1   89238 
```

对我来说，这感觉很干净，但它大量使用了 python 操作，而不是依赖于优化的 pandas 操作。我没有进行任何压力测试，但我想这可能会在非常大的 DataFrame 上变慢。不确定性能与添加、排序和删除列相比如何。任何有关加快代码速度的提示将不胜感激！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-12T11:28:39.633

```
import pandas as pd
custom_dict = {'March':0,'April':1,'Dec':3}

df = pd.DataFrame(...) # with columns April, March, Dec (probably alphabetically)

df = pd.DataFrame(df, columns=sorted(custom_dict, key=custom_dict.get)) 
```

返回包含 March、April、Dec 列的 DataFrame

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-03T22:27:45.820

我有同样的任务，但增加了对多列的排序。

解决方案之一是使两列**pd.Categorical**并将预期顺序作为参数“类别”传递。

但是我有一些要求，我不能强制未知\意外的值，不幸的是，这就是 pd.Categorical 正在做的事情。**此外，不**支持将None作为类别并自动强制执行。

所以我的解决方案是使用一个键以自定义排序顺序对多个列进行排序：

```
import pandas as pd

df = pd.DataFrame([
    [A2, 2],
    [B1, 1],
    [A1, 2],
    [A2, 1],
    [B1, 2],
    [A1, 1]], 
  columns=['one','two'])

def custom_sorting(col: pd.Series) -> pd.Series:
    """Series is input and ordered series is expected as output"""
    to_ret = col
    # apply custom sorting only to column one:
    if col.name == "one":
        custom_dict = {}
        # for example ensure that A2 is first, pass items in sorted order here:
        def custom_sort(value):
            return (value[0], int(value[1:]))

        ordered_items = list(col.unique())
        ordered_items.sort(key=custom_sort)
        # apply custom order first:
        for index, item in enumerate(ordered_items):
            custom_dict[item] = index
        to_ret = col.map(custom_dict)
    # default text sorting is about to be applied
    return to_ret

# pass two columns to be sorted
df.sort_values(
    by=["two", "one"],
    ascending=True,
    inplace=True,
    key=custom_sorting,
)

print(df) 
```

输出：

```
5  A1    1
3  A2    1
1  B1    1
2  A1    2
0  A2    2
4  B1    2 
```

请注意，此解决方案可能会很慢。

# azure - 我无法从不同的 VS2012 发布 - 指向服务运行时不存在的错误？

> ID：13838407
> 
> 赞同：1
> 
> 时间：2012-12-12T11:09:44.710
> 
> 标签：azure, visual-studio-2012

我刚刚将我的应用程序移动到另一台计算机上。第一台计算机运行的是 VS2012，第二台计算机也运行的是 VS2012。但是，在我尝试部署的第二台计算机上，我收到以下消息：

```
6:51:20 PM - Warning: There are package validation warnings.
6:51:20 PM - Preparing deployment for X - 12/12/2012 6:47:41 PM with Subscription ID 'X' using Service Management URL 'https://management.core.windows.net/'...
6:51:20 PM - Connecting...
6:51:22 PM - Verifying storage account 'dX'...
6:51:24 PM - Uploading Package...
6:58:57 PM - Updating...
7:02:46 PM - Role instances recycled for a certain amount of times during an update or upgrade operation. This indicates that the new version of your service or the configuration settings you provided when configuring the service prevent role instances from running. The most likely reason for this is that your code throws an unhandled exception. Please consider fixing your service or changing your configuration settings so that role instances do not throw unhandled exceptions. Then start another update or upgrade operation. Until you start another update or upgrade operation, Windows Azure will continue trying to update your service to the new version or configuration you provided
7:02:47 PM - Deployment failed with a fatal error 
```

当我检查 Intellitrace 时，它​​告诉我加载服务运行时时出现问题。

```
Could not load file or assembly 'Microsoft.WindowsAzure.ServiceRuntime, Version=1.7.0.0 
```

目前我有 1.7 DLL 加载了 CopyLocal 到 False。有谁知道为什么它不会加载。我假设我不需要将其设置为 CopyLocal - True。

仅供参考，Web 平台安装程序显示：

```
Windows Azure Libraries for .NET 1.7 Installed
Windows Azure Libraries for .NET 1.8 Installed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T18:07:35.097

根据以下错误消息，您似乎正在使用不同版本的 SDK 更新云应用程序：

```
 Role instances recycled for a certain amount of times during an update or upgrade operation. This indicates that the new version of your service or the configuration settings you provided when configuring the service prevent role instances from running. 
 The most likely reason for this is that your code throws an unhandled exception. Please consider fixing your service or changing your configuration settings so that role instances do not throw unhandled exceptions. 
 Then start another update or upgrade operation. Until you start another update or upgrade operation, Windows Azure will continue trying to update your service to the new version or configuration you provided 
```

因此，您之前的应用程序可能基于 SDK 1.8，而更新的应用程序基于 SDK 版本 1.7，这就是您在 Intellitrace 中看到错误的原因。或者它还表明您的应用程序配置发生了很大变化，需要新的部署而不是更新。

您可以执行以下操作：

*   确保两个（以前的和更新的）应用程序版本来自同一个 SDK。如果 SDK 相同，则更新可以达到特定的配置设置，但在某些情况下需要新的部署并且更新将不起作用。
*   如果更新版本是更高版本的 SDK，并且应用程序配置基于较新 SDK 中的一些新功能进行了更改，您将不得不删除部署并部署新的。

# intellij-idea - 如何让intellij idea通过enter完成插入？

> ID：13838408
> 
> 赞同：5
> 
> 时间：2012-12-12T11:09:45.213
> 
> 标签：intellij-idea

当我准备好使用自动完成时，我按回车键，但没有得到完整的单词，而是添加了新行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T12:59:21.757

使用向上/向下箭头选择完成变体或将此选项设置为`Always`：

![完成](../Images/4891553c09ab48cfd5d66dde79f97db6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T14:51:18.543

哎呀，问题是我配置错误的键盘映射。默认情况下，该`enter`密钥有效。

# javascript - PHP/AJAX/Javascript/MySQL 表单提交

> ID：13838411
> 
> 赞同：0
> 
> 时间：2012-12-12T11:09:53.927
> 
> 标签：javascript, html, mysql, ajax, forms

我正在关注一个教程，这个版本的表单有效，我使用 onchange。但是，下面我尝试使用 onsubmit 的第二个版本不起作用。有人可以帮忙吗？

```
<form>
<select name="users" onchange="showUser(users.value)">
    <option value="">Select a person:</option>
    <option value="1">Peter Griffin</option>
    <option value="2">Lois Griffin</option>
    <option value="3">Glenn Quagmire</option>
    <option value="4">Joseph Swanson</option>
</select> 
```

这是一个不起作用的，我不知道为什么？

```
<form onsubmit="showUser(users.value)">
<select name="users">
    <option value="">Select a person:</option>
    <option value="1">Peter Griffin</option>
    <option value="2">Lois Griffin</option>
    <option value="3">Glenn Quagmire</option>
    <option value="4">Joseph Swanson</option>
</select>
<input type="submit" value="Submit"  > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:12:00.227

尝试这个：

```
<select name="users" onchange="showUser(this[this.selectedIndex].value);">
    <option value="">Select a person:</option>
    <option value="1">Peter Griffin</option>
    <option value="2">Lois Griffin</option>
    <option value="3">Glenn Quagmire</option>
    <option value="4">Joseph Swanson</option>
</select> 
```

对于另一个：

```
<form onsubmit="showUser(this.users[this.users.selectedIndex].value); return false;">
<select name="users">
    <option value="">Select a person:</option>
    <option value="1">Peter Griffin</option>
    <option value="2">Lois Griffin</option>
    <option value="3">Glenn Quagmire</option>
    <option value="4">Joseph Swanson</option>
</select>
<input type="submit" value="Submit" /> 
```

使用`return false;`可防止浏览器将表单发布到 url 并因此重新加载页面。

# android - 触摸事件响应缓慢

> ID：13838412
> 
> 赞同：1
> 
> 时间：2012-12-12T11:09:58.480
> 
> 标签：android, graphics, touch

我需要让图像响应 Android 中的触摸事件。换句话说，用户应该能够在屏幕上移动图像。我正在使用 API Demos 的 TouchExampleActivity 项目中的代码，但我看到的是图像响应缓慢。

当我拖动图像时，它会跟踪我的光标（在模拟器上）。如果我缓慢移动，它会稍微移动一点，以便光标和图像之间有几毫米的距离。如果我移动得更快，分离会变得更糟。

以下是 Android 提供的代码示例中的相关方法：

```
public TouchExampleView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mIcon = context.getResources().getDrawable(R.drawable.icon);
    mIcon.setBounds(0, 0, mIcon.getIntrinsicWidth(), mIcon.getIntrinsicHeight());
    mDetector = VersionedGestureDetector.newInstance(context, new GestureCallback());
}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    mDetector.onTouchEvent(ev);                
    return true;
}

@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    canvas.save();
    canvas.translate(mPosX, mPosY);
    canvas.scale(mScaleFactor, mScaleFactor);
    mIcon.draw(canvas);
    canvas.restore();
} 
```

有任何想法吗？理想情况下，我需要图像以“自然”的方式跟随我的光标（手指），就好像我在物理世界的桌子上移动一个对象一样。

# mysql - 使用重复数据删除 SQL 插入数百万条记录

> ID：13838415
> 
> 赞同：3
> 
> 时间：2012-12-12T11:10:06.660
> 
> 标签：mysql, sql, deduplication

这是一个理论场景，当涉及到大型 SQL 数据库时，我不仅仅是业余爱好者......

我将如何将大约 200 万条记录插入现有数据库中的 600 万条记录（表 1 到表 2），同时使用电子邮件重复数据删除（站点 2 中可能已经存在一些订阅者，但我们不想插入那些已经存在）？

我了解如何简单地从站点 1 获取记录并将它们添加到站点 2，但是我们如何在如此大规模的情况下执行此操作，并且不会导致数据重复？任何阅读资源都会对我有帮助，因为我发现这是一场斗争。

即： **表1：site1Subscribers**

site1Subscribers(subID, subName, subEmail, subDob, subRegDate, subEmailListNum, subThirdParties)

**表 2：site2Subscribers**

site2Subscribers（subID、subName、subEmail、subDob、subRegDate、subEmailListNum、subThirdParties）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:15:19.097

我会尝试这样的事情：

```
insert into site2Subscribers
select * from site1Subscribers s1
left outer join site2Subscribers s2
    on s1.subEmail = s2.subEmail
where s2.subEmail is null; 
```

与`left outer join`空检查一起将仅返回那些在`site1Subscribers`中没有匹配条目的行`site2Subscribers`。

# sharepoint-2010 - 想要在按钮单击事件后留在同一页面上

> ID：13838422
> 
> 赞同：0
> 
> 时间：2012-12-12T11:10:23.793
> 
> 标签：sharepoint-2010, runtime-error

我正在使用 SharePoint 中的小型应用程序。我有一个自定义应用程序页面，我在方法`.ascx`下加载 Control `Page_Load()`。`.ascx`控件是一个带有文本框和按钮的小表单。现在，当我单击按钮时，信息成功保存在 SharePoint 的列表中，但它给出了运行时错误：

> 说明：服务器上发生应用程序错误。此应用程序的当前自定义错误设置阻止查看应用程序错误的详细信息。
> 
> 详细信息：要在本地服务器计算机上查看此特定错误消息的详细信息，请在位于当前 Web 应用程序根目录的“web.config”配置文件中创建一个 customErrors 标记。然后，此 customErrors 标记应将其“mode”属性设置为“RemoteOnly”。要在远程机器上查看详细信息，请将“mode”设置为“Off”。

我检查了我的 web.config，并且 customError 标记在那里并且模式设置为“关闭”。

什么是问题？单击按钮后，我想留在同一页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:39:36.027

通过使用 Response.Redirect(Request.RawUrl); 解决了上述问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:16:13.710

它肯定与 asp.net 页面始终保持在同一页面上，并且始终仅在您明确要求它这样做时才向其自身发回并重定向。您的代码或 web.config 文件中存在一些错误。

此外，错误出现在回发代码块中，即页面上的某处有一些代码，例如

```
if (isPostBack)
{
  **//Some code with error**
} 
```

因为该错误仅在您回发时发生。

我建议您逐步调试并指出确切的错误行。

# node.js - Nodejs和java之间的通信

> ID：13838426
> 
> 赞同：-1
> 
> 时间：2012-12-12T11:10:36.313
> 
> 标签：node.js

大家好，我正在编写用于在 Node.js 和 server.java 之间建立连接的程序。我的客户端在 nodejs 中，而服务器在 Java 中……我应该怎么去……有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:23:00.100

正如 shift66 所说，node.js 是服务器端，但它可以是 java 服务的客户端，因此充当 java 服务和前端 UI 之间的控制器。

这可以通过多种方式完成，具体取决于您的具体用例。然而，最常见的两种方法是：

通过 http 使用 node.js 创建对 Java 服务公开的端点的 REST 请求。

或者使用诸如 AMQP 和 node.js 库之类的消息传递协议，例如 node-amqp 使用 RPC 模式从消息队列发送/接收消息。

但是，正如我所说，这取决于您的用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-22T16:41:34.487

尝试使用rabbitMQ。它是消息代理。

# python - 平均精度显示不正确（scikit）

> ID：13838427
> 
> 赞同：2
> 
> 时间：2012-12-12T11:10:40.547
> 
> 标签：python, scikit-learn

我正在使用 sklearn 的分类报告，这是输出：

```
 precision    recall  f1-score   support

      1     0.5525    0.8118    0.6575     71194
      2     0.8782    0.1371    0.2372     13877
      3     0.5343    0.6083    0.5689     61591
      4     0.7953    0.3230    0.4594     13187
      5     0.6621    0.6701    0.6661     57530
      6     1.0000    0.0008    0.0017      2391
      7     0.6655    0.2095    0.3187     30223 
```

平均/总计 **0.6221** 0.5852 0.5566 249993

但是当您手动执行此操作时，您会发现它是不正确的。[可以在这里看到](http://www.wolframalpha.com/input/?i=%280.552452%20%2b%200.878173%20%2b0.534334%2b0.795331%2b0.662109%2b1.000000%2b0.665476%29/7)

知道这是为什么吗？

对于其他算法的所有其他报告，我确实得到了正确的结果。我怀疑这与精度有关

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T08:02:17.397

我认为这可能是由不平衡的类引起的。我认为总数不是班级的平均值，而是所有示例的总数。因此，当类的大小不同时，您必须取加权平均才能获得相同的结果。

# android - Activity 不活动时忽略 Android 接收器

> ID：13838428
> 
> 赞同：0
> 
> 时间：2012-12-12T11:10:43.503
> 
> 标签：android, android-service

我有一个后台服务，它有一个用于连接更改的接收器，只有在活动处于活动状态时才会收到该接收器。

```
@Override
public void onCreate() {

    mContext = this;

    IntentFilter connectivityChangeFilter = new IntentFilter("android.net.conn.CONNECTIVITY_CHANGE");
    registerReceiver(receiver, connectivityChangeFilter); 
```

我在清单中设置如下：

```
<service
     android:name="com.myservice.TimeService"
     android:label="com.myservice.TimeService" >
     <intent-filter>
          <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
     </intent-filter>
</service> 
```

我有另一个用于启动的接收器，它工作正常，它在清单中注册为接收器（与这个不同）。

意图过滤器是否不足以运行广播？我希望接收者调用服务上的方法，因此它需要能够访问服务的方法，但我不认为接收者可以绑定到服务。

-- 更新 简而言之，我想知道我是否可以静态声明一个与服务交互的接收器。动态声明仅在应用程序处于活动状态时才有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:23:06.807

使用[android 粘性意图](https://stackoverflow.com/questions/3490913/what-is-a-sticky-intent-android)

正常的广播 Intent 在被系统发送和处理后不再可用。如果您使用 sendStickyBroadcast(Intent) 方法，则 Intent 是粘性的，这意味着您发送的 Intent 在广播完成后仍然存在。

示例代码[在这里：](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html#broadcastreceiver_sticky)

# android - 如何在android应用程序中嵌入sqlite数据库文件

> ID：13838438
> 
> 赞同：-5
> 
> 时间：2012-12-12T11:11:18.507
> 
> 标签：android, sqlite, embedded-database

我基本上是在开发一个基本的 android-sqlite-database 应用程序。我已经成功运行它。它获取“姓名”和“电话号码”并添加到数据库中的“data/data/com.android.databaseapp” 现在我想将数据库放入应用程序中，我按照教程操作但没有成功。请在这里给我一些详细的指示，我已经在资产中添加了 .db 文件，并为此遵循了 2 个教程，但资产/.db 文件没有得到更新。只有“data/data/com.android.databaseapp/.db”文件得到更新我的 DatabaseHadler 类是：

```
private static final int DATABASE_VERSION = 1;

private static final String DATABASE_NAME = "contactsManager";

private static final String TABLE_CONTACTS = "contacts";

private static final String KEY_ID = "id";
private static final String KEY_NAME = "name";
private static final String KEY_PH_NO = "phone_number";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {
    String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_CONTACTS + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
            + KEY_PH_NO + " TEXT" + ")";
    db.execSQL(CREATE_CONTACTS_TABLE);
    db.close();
}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_CONTACTS);

    // Create tables again
    onCreate(db);
    db.close();
} 
```

请在这里指导我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-18T04:50:14.257

[这](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)是您可以找到的关于在 android 中创建和执行数据库的最佳教程

您也可以从此链接下载示例并执行它。

（如果您想通过将数据库保存在资产文件夹中来执行数据库，只需点击此[链接](http://iamvijayakumar.blogspot.in/2013/11/copy-sqlite-database-file-from-assets.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:20:17.687

如果将数据库放入 assets 文件夹，则需要在数据库连接器类中为其指定新路径。

创建一个将处理与数据库的连接的类，并使用 SQLiteDatabase 类中的 openDatabase 方法：

```
if(File.exists(databasePath))
{
    this.yourDataBase = 
        SQLiteDatabase.openDatabase( databasePath , 
                                     null, 
                                     SQLiteDatabase.OPEN_READWRITE);
} 
```

确保 databasePath 指向您的`...app/assets/database.db3`文件

# javascript - JavaScript：如何计算 2 天前的日期？

> ID：13838441
> 
> 赞同：104
> 
> 时间：2012-12-12T11:11:25.630
> 
> 标签：javascript

> **可能重复：**
> [从javascript中的日期减去天数](https://stackoverflow.com/questions/1296358/subtract-days-from-a-date-in-javascript)

我有一个基本上返回 2 天前的日期的 JavaScript。如下：

```
var x;
var m_names = new Array("January", "February", "March", 
    "April", "May", "June", "July", "August", "September", 
    "October", "November", "December");

var d = new Date();
var twoDaysAgo = d.getDate()-2;  //change day here
var curr_month = d.getMonth();
var curr_year = d.getFullYear();
var x = twoDaysAgo + "-" + m_names[curr_month] + "-" + curr_year;

document.write(x); 
```

假设今天是 2012 年 12 月 12 日，上面将返回 2012 年 12 月 10 日的日期。我不认为这会随着我们进入新的一个月而动态工作，或者将日期从 -2 更改为 -15。它将仅从本月 3 日开始工作。

我该如何修改它，所以今天是 2012 年 12 月 12 日，我希望它返回 15 天前的日期，它应该是 2012 年 11 月 27 日......而不是 2012 年 12 月 -3 日？

任何帮助表示赞赏。谢谢！我是 Javascript 新手。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-12-12T11:23:23.223

如果您有一个日期对象，您可以通过从日期中减去两个来将其设置为两天前：

```
var d = new Date();
d.setDate(d.getDate() - 2);
console.log(d.toString());

// First of month
var c = new Date(2017,1,1); // 1 Feb -> 30 Jan
c.setDate(c.getDate() - 2);
console.log(c.toString());

// First of year
var b = new Date(2018,0,1); // 1 Jan -> 30 Dec
b.setDate(b.getDate() - 2);
console.log(b.toString());
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-12-12T11:15:06.883

您可以执行以下操作

```
​var date = new Date();
var yesterday = date - 1000 * 60 * 60 * 24 * 2;   // current date's milliseconds - 1,000 ms * 60 s * 60 mins * 24 hrs * (# of days beyond one to go back)
yesterday = new Date(yesterday);
console.log(yesterday);​ 
```

日期以毫秒为单位提供，您将今天减去两天并使用该毫秒数创建一个新日期

# php - open_basedir 限制生效

> ID：13838443
> 
> 赞同：0
> 
> 时间：2012-12-12T11:11:34.670
> 
> 标签：php, apache, file-upload, open-basedir

我在服务器上使用文件上传脚本时遇到问题 - 得出的结论是，这是因为 PHP 正在 Apache 模块上运行，因此重新配置 PHP 以作为 FastCGI 运行。

不幸的是，现在当我尝试通过 uploadify 上传文件时出现错误

> 警告：move_uploaded_file()[function.move-uploaded-file] open_base_dir 限制生效。文件（/var/www/vhosts/domain.com/uploads/filename.txt）不在允许的路径内：（/var/www/vhosts/domain.com/httpdocs:/tmp）... ..

然后它让我参考我的脚本的第 32 行，内容如下：

```
move_uploaded_file($tempFile,$targetFile); 
```

$tempFile 如下：

```
$tempFile = str_replace(" ","",$_FILES['Filedata']['tmp_name']); 
```

我已经尝试以多种方式更改我的 vhost.conf 文件但没有成功 - 它目前处于

```
<Directory /var/www/vhosts/domain.com/httpdocs>
    <IfModule sapi_apache2.c>
            php_admin_flag engine off
            php_admin_flag safe_mode on
            php_admin_value open_basedir none
    <IfModule mod_php5.c>
            php_admin_flag engine on
            php_admin_flag safe_mode off
            php_admin_value open_basedir none
   </IfModule>
</Directory> 
```

我似乎在兜圈子 - 似乎找不到 tmp 目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:56:33.257

如果它是您的服务器并且您实际上可以搞乱配置，您可以关闭`open_basedir`您的 php.ini 中的，重新加载 PHP 并尝试它是否有效。`safe_mode`默认情况下应在 PHP 中关闭，因为此选项只会导致问题。

或者您可以尝试以下操作：

```
<Directory /var/www/vhosts/domain.com/httpdocs>
    php_admin_value open_basedir "/var/www/vhosts/domain.com/httpdocs/:/tmp/:/var/www/vhosts/domain.com/uploads/"
</Directory> 
```

如果您决定在那里设置配置，同样可以申请 php.ini。

# sql - PL/SQL 开发人员如何获取导致插入失败的行？

> ID：13838446
> 
> 赞同：6
> 
> 时间：2012-12-12T11:11:47.460
> 
> 标签：sql, oracle

我正在做一种插入到具有唯一列的表中的方法。我不知道我是否可以访问导致插入失败的插入值。

例如：

```
table1(id,name, phone);

name is unique.

insert (1,a,123);

insert (2,a,1234); 
```

我想要的是当我进行第二次插入时，我返回 id 值 '1' 而不必重复查询。

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T13:59:47.397

从 oracle 10g r2 开始，您可以使用[insert命令的](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9014.htm#i2163698)[log errors](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_9014.htm#i2163698)子句在单独的表中记录错误。这是一个例子：

```
SQL> create table test_table(
  2    id   number primary key,
  3    col1 varchar2(7)
  4  )
  5  ;

Table created

-- creates a table for logging errors (table name will be prefaced with err$_)
SQL> begin dbms_errlog.create_error_log('TEST_TABLE'); end;
  2  /

PL/SQL procedure successfully completed

-- violates primary key constraint
SQL> insert into test_table(id, col1)
  2  (  select 1, level
  3      from dual
  4    connect by level <= 3)
  5    log errors reject limit unlimited;

1 row inserted

SQL> commit;

SQL> select * from test_table;

        ID COL1
---------- -------
         1 1

SQL> select * from err$_test_table;

ORA_ERR_NUMBER$ ORA_ERR_MESG$                                           ORA_ERR_ROWID$  ORA_ERR_OPTYP$ ORA_ERR_TAG$ ID  COL1
--------------- ------------------------------------------------------------------------------------------------------------
              1 ORA-00001: unique constraint (HR.SYS_C008315) violated  I                                            1     2
              1 ORA-00001: unique constraint (HR.SYS_C008315) violated  I                                            1     3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:27:27.457

也许你可以在你的表上写一个触发器（在插入之前），插入即将发生。在此您可以检查表中是否已存在列值（名称）。如果确实如此，您可以将此重复记录插入另一个表中以供进一步参考

另一种方法是在可以检查名称并且可以将重复名称存储在表中的过程中编写插入。

希望能帮助到你

# java - 在 Java 中验证 MAC 和 IP 地址

> ID：13838447
> 
> 赞同：0
> 
> 时间：2012-12-12T11:11:51.033
> 
> 标签：java, regex

我正在编写一个程序来从一个 Excel 表中读取数据，该表包含一堆关于计算机的信息，这些信息将由用户输入。然后，此 excel 文件将转换为其他格式以供其他用途。我可以毫无问题地读取所有值，但我只需要帮助验证用户输入的 MAC 和 IP 地址以确保信息正确。一些正则表达式会很棒，因为我相信我会在某个阶段再次使用它们。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:15:18.300

```
 "^([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
    "([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
    "([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\." +
    "([01]?\\d\\d?|2[0-4]\\d|25[0-5])$" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:58:47.480

([0-9A-F]{2}[:-]){5}([0-9A-F]{2})

这是mac地址

# jquery - 如何强制js代码按书面顺序执行？

> ID：13838452
> 
> 赞同：0
> 
> 时间：2012-12-12T11:12:09.107
> 
> 标签：jquery, show, slidetoggle

```
$("#btnGall").click(function() {
    $('#gall').slideToggle('slow');
    $("#gInfo").show();
}); 
```

为什么此代码首先执行第二行，然后执行第一行。
我不想`#gInfo`在 slideToggle 完成之前显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:13:20.957

那是因为动画是异步的，脚本不会等待它们完成（感谢上帝）。在大多数执行动画的 jQuery 函数中添加了针对此特定用途的内置回调：

```
$("#btnGall").click(function() {
    $('#gall').slideToggle('slow', function() {
        $("#gInfo").show();
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:13:41.527

滑动切换允许在操作完成后进行回调

```
$("#btnGall").click(function() {
    $('#gall').slideToggle('slow', function () {    $("#gInfo").show();});

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T11:13:50.893

从指定为传递给 slidetoggle 函数的成功回调的匿名函数调用该函数。

```
$("#btnGall").click(function() {
    $('#gall').slideToggle('slow', function(){
        $("#gInfo").show();
    });
}); 
```

[SlideToggle 文档](http://api.jquery.com/slideToggle/)

工作示例：http: [//jsfiddle.net/2zn6G/](http://jsfiddle.net/2zn6G/)

# c# - 尝试使用 except 从 IEnumerable 结构中排除元素

> ID：13838454
> 
> 赞同：1
> 
> 时间：2012-12-12T11:12:19.227
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

我正在尝试从另一个 IEnumerable 中删除 IEnumerable 类型中的元素。

在这里我得到了完整的清单

```
var tiposObj = from t in context.sistema_DocType
                               select
                                   new tgpwebged.Models.SettingsModels.TipoIndiceModel
                                   {
                                       id = t.id,
                                       tipo = t.tipoName
                                   };

                classificacaoModel.tipos = tiposObj.ToList(); 
```

这里是从第一个列表中排除的部分列表

```
 var tiposAtribuidosObj = from t in context.sistema_DocType
                                        join c in context.sistema_ClassificacaoTipo on t.id equals c.idTipo
                                        where c.idClassificacao == classificacaoId
                                        select new tgpwebged.Models.SettingsModels.TipoIndiceModel
                                        {
                                            id = t.id,
                                            tipo = t.tipoName
                                        };
                classificacaoModel.tiposAtribuidos = tiposAtribuidosObj.ToList(); 
```

这是我排除的方式：

```
classificacaoModel.tiposNaoAtribuidos = classificacaoModel.tipos.Except(classificacaoModel.tiposAtribuidos); 
```

第一个列表中不排除任何元素。想不通为什么。它们具有相同的结构和相同的类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:18:23.047

.NET 框架无法比较`TipoIndiceModel`. 为此，您必须实现[IEqualityComparer](http://msdn.microsoft.com/en-us/library/ms132151.aspx) 或从`EqualityComparer`.

来自 MSDN 的提示[除了](http://msdn.microsoft.com/en-us/library/bb300779.aspx)：

> 此接口仅支持相等比较。IComparer 通用接口提供了排序和排序比较的自定义。
> 
> 我们建议您从 EqualityComparer 类派生而不是实现 IEqualityComparer 接口，因为 EqualityComparer 类使用 IEquatable.Equals 方法而不是 Object.Equals 方法测试相等性。这与 Dictionary 类和其他泛型集合的 Contains、IndexOf、LastIndexOf 和 Remove 方法一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:16:55.133

它们可能是相同的类型，但它们不是相同的实例。

解决方案是覆盖`Equals`on`TipoIndiceModel`以提供成员相等性，而不是默认的引用相等性。也考虑实施`IEquatable<TipoIndiceModel>`！

参考：

IEquatable 接口：http: [//msdn.microsoft.com/en-us/library/ms131187.aspx](http://msdn.microsoft.com/en-us/library/ms131187.aspx)

> 如果您实现 IEquatable，您还应该重写 Object.Equals(Object) 和 GetHashCode 的基类实现，以便它们的行为与 IEquatable.Equals 方法的行为一致。

重载 Equals() 和运算符 == 的指南 [http://msdn.microsoft.com/en-us/library/ms173147%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms173147%28v=vs.80%29.aspx)

# html - 将 .css 文件添加到共享点

> ID：13838460
> 
> 赞同：1
> 
> 时间：2012-12-12T11:12:42.383
> 
> 标签：html, css, sharepoint, sharepoint-2007

我正在尝试将这行 html 包含在我刚刚创建的页面内的 sharepoint 2007 内容部分中。我是主人。

```
<link rel="stylesheet" type="text/css" href="/sites/gskglobal/mcLaren-partnership/Documents/live.css" /> 
```

`Edit HTML Source`我在一块上输入了这个`content`（这是我可以找到如何直接输入 HTML 的唯一方法）。

当我单击确定时，样式显示完美，已经上传了 css 文件。

当我单击保存时，它会删除整个`link`元素并让我没有样式表。

我可以把样式放在一起，但我真的不想这样做。

注意没有错误只显示

> 警告：您输入的 HTML 源代码可能已被修改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T21:16:40.987

这两种方法都可以，但是 CSS 可能会在呈现 SharePoint 页面后执行。

简短而简单的方法是将 CSS 文件添加到任何文档库（样式库也是如此）。将上面的链接脚本添加到文本文件中并上传。将内容编辑器 Web 部件添加到页面并通过设置将其指向带有脚本的 TEXT 文件。

CEWP 部分在构建页面时的 HTML 创建过程中执行，因此 CSS 与标题一起执行（与 SharePoint 的其余 CSS 一样）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:19:28.830

尝试将您的 .css 文件添加到您的主网络“样式库”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T19:16:17.797

您只需要发布您的 css 文件

*   转到您的所有文档视图
*   找到你的文件
*   发布

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:12:25.320

我发现在`html`添加 Web 部件时将任何形式`form`的

```
 Warning: The HTML source you entered might have been modified. 
```

它只会将标记保留在那里，而不会删除共享点或编辑您的标记

Just wanted to make people aware that this is possible and maybe an option if you don't have access to the other suggests.

# jsf - 无法在 JSF 阶段侦听器中停止处理请求

> ID：13838461
> 
> 赞同：0
> 
> 时间：2012-12-12T11:12:44.140
> 
> 标签：jsf, jsf-2

在阶段侦听器中，我无法停止处理。jsf 不在乎我的 responseComplete 调用。如何在阶段侦听器中停止处理？

```
@Override
public PhaseId getPhaseId() {return PhaseId.RESTORE_VIEW;}

@Override
public void beforePhase(PhaseEvent event) {}

@Override
public void afterPhase(PhaseEvent event) {
    FacesContext fc = FacesContext.getCurrentInstance();
    UIViewRoot viewRoot = fc.getViewRoot();
    if (checkweirdcase()) {
        LOGGER.debug("ViewId " + viewRoot.getViewId());
    } else {
        event.getFacesContext().responseComplete();
    }
    LOGGER.debug(event.getPhaseId());
} 
```

# css - 在 css 代码中 a:active 不起作用

> ID：13838462
> 
> 赞同：0
> 
> 时间：2012-12-12T11:12:43.923
> 
> 标签：css, menu, background, navigation, hover

我正在使用这样的 CSS 代码

```
.top_nav ul li a{ 
  color: #444; background: #111;
}
.top_nav ul li a:hover{
  color: #fff; background: #555;
}
.top_nav ul li a:active{
  color: #111; background: #fff;
} 
```

但问题是当任何页面处于活动状态时，在**导航菜单**上链接的背景不会改变。该链接的背景与其他链接的背景相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:17:52.480

您可能正在寻找以不同颜色聚焦菜单中的活动链接。`a:active`不打算用于此目的的头脑。

链接仅在单击时才占用`a:active`状态，因此您只能在几秒钟内看到更改。您应该寻找一种不同的方式来完成它，例如为从服务器端脚本中选择的菜单项添加一个新的 css 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:14:38.350

a:active 选择器指的是链接的活动状态，而不是您的活动页面。

[http://www.w3schools.com/cssref/sel_active.asp](http://www.w3schools.com/cssref/sel_active.asp)

您必须为您当前正在查看的页面的菜单项设置一些“活动页面”类，并在您的 CSS 中引用该类。

如果您有静态 HTML 页面，您可以向导航项添加一个类来表示当前活动页面：

```
<li class="current">...</li> 
```

然后将您的CSS更改为：

```
.top_nav ul li.current a {
  color: #111; background: #fff;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:19:09.437

只有当您单击它时才会应用活动。像这样做：

```
<li><a href="" class="active">Link</a></li> 
```

然后样式化

```
top_nav ul li a.active {
   color: #111;
   background: #fff;
} 
```

# c# - 在 WinRT 中将 GeneralTransform 转换为 MatrixTransform

> ID：13838463
> 
> 赞同：0
> 
> 时间：2012-12-12T11:12:48.700
> 
> 标签：c#, windows-runtime, transform, matrix-transform

在完整的 .net 中，我可以使用代码将 GeneralTransform 转换为 MatrixTransform（查看[另一个问题](https://stackoverflow.com/questions/8237438/getting-a-matrixtransform-for-any-transform)）：

```
var matrixTransform = new MatrixTransform(generalTransform.Value); 
```

但在 WinRT GeneralTransform 中没有`Value`属性。如何在 WinRT 中进行转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:44:31.203

在完整的 .NET 版本（WPF、Silverlight）中，[`GeneralTransform`](http://msdn.microsoft.com/en-us/library/system.windows.media.generaltransform.aspx)该类也没有`Value`属性。*此属性在派生*自的[`Transform`](http://msdn.microsoft.com/en-us/library/system.windows.media.transform.aspx)类中引入。我想这在 WinRT 中是一样的。通常不可能将 a 转换为 a，因为 a 的转换不一定基于（或可以表示为）矩阵。*`GeneralTransform``GeneralTransform``MatrixTransform``GeneralTransform`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T10:54:49.533

也许是这样的：

```
transformGroup.Children.Add(generalTransform);
var matrixTransform = new MatrixTransform();
matrixTransform.Matrix = transformGroup.Value; 
```*

# php - 将自定义列添加到 Propel 模型？

> ID：13838465
> 
> 赞同：3
> 
> 时间：2012-12-12T11:13:02.423
> 
> 标签：php, orm, propel, symfony-2.1

目前我正在使用以下查询：

```
$claims = ClaimQuery::create('c')
        ->leftJoinUser()
        ->withColumn('CONCAT(User.Firstname, " ", User.Lastname)', 'name')
        ->withColumn('User.Email', 'email')
        ->filterByArray($conditions)
        ->paginate($page = $page, $maxPerPage = $top); 
```

但是我想手动添加列，所以我认为这很简单：

```
foreach($claims as &$claim){
    $claim->actions = array('edit' => array(
            'url' => $this->get('router')->generate('hera_claims_edit'),
            'text' => 'Edit'    
            )
        );
    }

return array('claims' => $claims, 'count' => count($claims)); 
```

但是，当返回数据时，Propel 或 Symfony2 似乎在将自定义数据与所有多余的模型数据一起转换为 JSON 时剥离。

以这种方式手动添加数据的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-28T08:58:51.707

要将虚拟列导出到数组，您可以通过以下方式执行此操作：

```
/**
 * Propel result set
 * @var \PropelObjectCollection
 */
$claims = ClaimQuery::create('c')-> ... ->getResults();

/**
 * Array of data with virtual columns
 * @var array
 */
$claims_array = array_map(function (Claim $claim) {
   return array_merge(
       $claim->toArray(), // using "native" export function
       array( // adding virtual columns
           'Email' => $claim->getVirtualColumn('email'),
           'Name' => $claim->getVirtualColumn('name')
       )
   );
}, $claims->getArrayCopy()); // Getting array of `Claim` objects from `PropelObjectCollection`

unset($claims); // unsetting unnecessary object if we have further operations to complete 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:02:48.050

这个问题的答案在于 toArray() 方法，所以：

```
$claims = ClaimQuery::create('c')
    ->leftJoinUser()
    ->withColumn('CONCAT(User.Firstname, " ", User.Lastname)', 'name')
    ->withColumn('User.Email', 'email')
    ->filterByArray($conditions)
    ->paginate($page = $page, $maxPerPage = $top)->getResults()->toArray(); 
```

然后您可以根据需要进行修改，这里唯一的问题是当前的 toArray 方法不返回虚拟列，因此您必须修补该方法以包含它们。（这是在 PropelObjectCollection 类中）

最后我决定将这些部分分开：

```
return array(
        'claims' => $claims, 
        'count' => $claims->count(),
        'actions' => $this->actions()
    ); 
```

这样您就不必担心虚拟列会丢失，而只需在另一端以不同的方式操作您的数据。

# javascript - 更改字符串的一部分，区分大小写

> ID：13838468
> 
> 赞同：0
> 
> 时间：2012-12-12T11:13:08.327
> 
> 标签：javascript, jquery

我想搜索一个不区分大小写的字符串，但是用原始字符串的大小写字母更改子字符串。

```
var mystring = "FiRst Last";
var term = "first";  // it could be "FIRST" or fIRST

var re = new RegExp("^" + term, "i") ;
//option 1
//var t = mystring.replace(re,"<span style='font-weight:bold; color:Blue;'>" + term + "</span>");
//option 2
var t = mystring.replace(re,term.bold().fontcolor("Blue")); 
```

上面的代码给出 了蓝色的**第一个LAST，但是我希望它是第一个 LAST 作为****mystring**的大小写顺序

也许可以使用 indexof() 方法，但是可能有一种简单有效的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:26:50.977

只需将捕获组与您的第一个选项一起使用

```
var str = "FiRst Last";
var term = "first";

var t = str.replace( /(first)/i, "<span style='font-weight:bold; color:Blue;'>$1</span>"); 
```

t 现在将包含

```
"<span style='font-weight:bold; color:Blue;'>FiRst</span> Last" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:28:10.483

```
var querystr = 'first';
var output = "FiRst Last";
var reg = new RegExp(querystr, 'gi');
var final_str = output.replace(reg, function(str) {return str.bold().fontcolor("Blue")}); 
```

请参阅以下链接...

[Javascript：突出显示保留原始大小写但在不区分大小写模式下搜索的子字符串](https://stackoverflow.com/questions/3294576/javascript-highlight-substring-keeping-original-case-but-searching-in-case-inse)

user113716给出的解决方案可能会有所帮助......

# c# - 如何从 C# .net 中的另一个线程唤醒睡眠线程？

> ID：13838469
> 
> 赞同：1
> 
> 时间：2012-12-12T11:13:16.740
> 
> 标签：c#, .net, multithreading

> **可能重复：**
> [有没有办法唤醒睡眠线程？](https://stackoverflow.com/questions/3460280/is-there-a-way-to-wake-a-sleeping-thread)

我在 C# .net 中有一个 Windows 窗体应用程序。我正在使用 namedpipes 与 c++ 应用程序进行通信。通讯部分运行良好。在表单加载事件中，我启动了两个后台线程，其中一个用于接收。接收线程处于无限while循环中。当没有要读取的数据时它会休眠，当数据到达时，它会读取它，然后将其推送到消息队列（全局创建）中。我想使用我在加载表单时创建的另一个来读取消息队列并更新 UI。我想要的是，一旦创建了第二个线程，它就应该进入无限睡眠状态，并且当阅读线程已经阅读了 4 条或更多消息时，它应该生成某种信号来唤醒睡眠线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:17:01.107

您应该等待[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)或[AutoResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)而不是休眠。

# php - 使用多个字段对 MySQL 进行排序以供选择

> ID：13838471
> 
> 赞同：0
> 
> 时间：2012-12-12T11:13:21.403
> 
> 标签：php, mysql, sorting

我有一个投资组合，我想按照 ASC 排序顺序列出，根据列表顶部的几个字段进行选择。不排序打印输出是完美的，但是在激活排序语句（第 35 行）时，我收到以下错误消息：

> 警告：mysql_fetch_array()：提供的参数不是第 47 行 /home/domain/public_html/db_name/portfolio.php 中的有效 MySQL 结果资源

有人可以帮忙告诉我如何处理这段代码吗？非常感谢您的任何建议：

```
<html>
<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Portfolio</title>
<link rel="stylesheet" type="text/css" href="../scripts/css/formate.css" />
</head>
<body>

<?php 
 // Connects to Database 
 mysql_connect("localhost","user","passw") or die(mysql_error()); 
 mysql_select_db("db_name") or die(mysql_error()); 
 ?>

<table>
    <tr>
        <th><a href="?orderBy=ref_id">Order by Villa name   |</a></th>
        <th><a href="?orderBy=bedrooms">Order by no. of Beds   |</a></th>
        <th><a href="?orderBy=max_occupants">Order by Sleeps   </a></th>
    </tr>
</table>

<?php
// sort table as selected
$orderBy = array('ref_id', 'bedrooms', 'max_occupants');
$order = 'ref_id';
if (isset($_GET['orderBy']) && in_array($_GET['orderBy'], $orderBy)) {
    $order = $_GET['orderBy'];
}

// Read table ---> and sort it:

// $data = mysql_query("SELECT * FROM res_properties"); 

 $data = mysql_query("SELECT * FROM db_row ORDER BY '.$order"); 

 Print "<table border cellpadding=3>"; 
 Print "<br><h3>Portfolio</h3 ><p> <br>";
 echo 'Listings as per: -       ';
 print date('r');
 print "\\n";
 Print "<br><p> <br>";

 Print "<table border cellpadding=3 >"; 
 Print "<tr align='center'><th width=130>Villa Name</th><th width=40>Beds</th><th width=40>Baths</th><th width=60>Sleeps</th><th width=200 >Property Website </th><th width=50 >Prop.ID</th></tr>"; 

   while($info = mysql_fetch_array( $data )) 

{ 

 Print "<tr align='center'><font face='arial' size='2' color='000000'>"; 
 Print "<td>".$info['ref_id'] . "</td> "; 
 Print "<td>".$info['bedrooms'] . " </td>"; 
 Print "<td>".$info['bathrooms'] . " </td>"; 
 Print "<td>".$info['max_occupants'] . " </td>"; 
 Print "<td><a href=\"http://www.domain.com/properties/index.php/property/" . $info['slug'] . ".html\">Open website here</a></td>";
 Print "<td>".$info['id'] . "</td></tr> "; 

 } 
 Print "</table>"; 
 ?> 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:15:30.313

我认为这只是您构建查询的方式。

```
 $data = mysql_query("SELECT * FROM db_row ORDER BY '.$order"); 
```

至

```
 $data = mysql_query("SELECT * FROM db_row ORDER BY " . $order); 
```

如果这不起作用，则在执行该语句后添加[mysql_error](http://php.net/manual/en/function.mysql-error.php)并查看错误是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:16:33.527

尝试

```
$data = mysql_query("SELECT * FROM db_row ORDER BY '$order'"); 
```

或者

```
 $data = mysql_query("SELECT * FROM db_row ORDER BY " . $order."'"); 
```

**注意 2**：[**不推荐**](https://wiki.php.net/rfc/mysql_deprecation)`mysql_*`使用函数，即使它会在[**php5.5**](http://downloads.php.net/dsp/)中生成警告，所以如果你想在这里学习 pdo ，请使用或代替，[这是很好的教程](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php/14110189#14110189)[](https://wiki.php.net/rfc/mysql_deprecation)**[**`E_DEPRECATED`**](https://wiki.php.net/rfc/mysql_deprecation)[](http://downloads.php.net/dsp/)**`PDO``MySQLi`****

 ***** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T11:17:33.510

也许您正在寻找这样的东西？：

```
$data = mysql_query('SELECT * FROM db_row ORDER BY ' . $order . ' ASC'); 
```

为了进行升序和降序排序，您需要在链接中添加另一个参数。如果它是`asc`或`desc`默认情况下是你的电话，无论什么更有意义。在这种情况下，我为上升设置了 0，为下降设置了 1。

```
<a href="?orderBy=ref_id&sort=0"> 
```

您要做的下一件事是为排序处理添加逻辑：

```
$sortBy = array('asc', 'desc');
$sort = 0;
if (isset($_GET['sort']) && in_array($_GET['sort'], array_keys($sortBy))) {
    $sort = $_GET['sort'];
} 
```

最后要做的是在您第二次单击链接时更改`asc`to `desc`，反之亦然。如果您将我提供的代码（排序处理逻辑）和处理代码`$order`放在导航表上方（以使变量在表中可访问），则可以在链接中添加条件：

```
<a href="?orderBy=ref_id&sort=<?php echo ($order == 'ref_id' ? !$sort : 0); ?>"> 
```

您的 MySQL 查询将如下所示：

```
$data = mysql_query('SELECT * FROM db_row ORDER BY ' . $order . ' ' . $sortBy[$sort]); 
```****

# java - 实现接口的类列表

> ID：13838472
> 
> 赞同：9
> 
> 时间：2012-12-12T11:13:31.260
> 
> 标签：java, list, class, interface

有没有办法实现类似

```
 List<Class<? implements MyInterface>> ClassList = new ArrayList<Class<? implements MyInterface>>(); 
```

我的目标是从该列表创建一个哈希图，其中键是类的 toString 方法（在 MyInterface 中定义），值是类本身。此类的每个对象的 toString 方法都返回相同的结果。这样，我可以通过搜索正确的字符串来使用地图创建类的实例。

谢谢你的帮助，问候

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T11:15:52.937

```
List<Class<? implements MyInterface>> ClassList = new ArrayList<Class<? implements MyInterface>>(); 
```

应该

```
List<Class<? extends MyInterface>> ClassList = new ArrayList<Class<? extends MyInterface>>(); 
```

在泛型世界中**没有 implements 关键字**。如果您想要一个实现接口的类型参数，请使用**extends 关键字**来表示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:48:13.520

由于您似乎对我解释的方式感兴趣，这里有一个快速实现，以验证它可以完成......

```
import java.util.ArrayList;
import java.util.List;

enum NumberClass
{
  ONE("One"),
  TWO("Two"),
  THREE("Three");

  private final String className;

  NumberClass(String name)
  {
    className = name;
  }

  String getName()
  {
    return className;
  }
}

public class Test
{
  public static void main(String[] args)
  {
    List<NumberClass> numbers = new ArrayList<NumberClass>();

    numbers.add(NumberClass.ONE);
    numbers.add(NumberClass.THREE);
    numbers.add(NumberClass.TWO);
    numbers.add(NumberClass.ONE);
    numbers.add(NumberClass.THREE);
    numbers.add(NumberClass.ONE);
    numbers.add(NumberClass.TWO);

    SomeNumber[] nbs = new SomeNumber[numbers.size()];
    int i = 0;
    for (NumberClass nbC : numbers)
    {
      SomeNumber nb;
      try
      {
         nb = (SomeNumber) Class.forName(nbC.getName()).newInstance ();
         nbs[i++] = nb;
      }
      // Cleanly handle them!
      catch (InstantiationException e) { System.out.println(e); }
      catch (IllegalAccessException e) { System.out.println(e); }
      catch (ClassNotFoundException e) { System.out.println(e); }
    }
    for (SomeNumber sn : nbs)
    {
      System.out.println(sn.getClass().getName() + " " + sn.getValue());
    }
  }
}

// The following must be in their own files, of course
public interface SomeNumber
{
  int getValue();
}

public class One implements SomeNumber
{
  public int getValue() { return 1; }
}
public class Two implements SomeNumber
{
  public int getValue() { return 2; }
}
public class Three implements SomeNumber
{
  public int getValue() { return 3; }
} 
```

如果它不能回答您的问题，我希望将其视为教育材料。:-)

# symfony - symfony 2，演示无法在远程服务器上运行

> ID：13838477
> 
> 赞同：0
> 
> 时间：2012-12-12T11:13:44.677
> 
> 标签：symfony, openshift

我创建了包含 AcmeDemoBundle 的全新 symfony 2 应用程序。它工作正常。

我注释掉了，`app_dev.php`以便可以从远程服务器（openshift 云）访问它。在本地主机上它可以正常工作。我将 git 推送到 openshift，并按`app_dev.php`预期工作。

然后我将演示路线移至 route.yml（用于生产）。

在本地主机上`app.php`工作没有任何问题。所以我 git 推送到 openshift 但随后`app.php`抛出错误：

> 无法打开流 Acme/DemoBundle/Resources/views/Welcome/index.html.twig

因此，我将演示路线放回`routes_dev.yml`git push，但 openshift 错误仍然存​​在。

可能是什么问题？

编辑：问题是在我的本地主机路径上树枝模板是“/var/www/html/jba/php/src/JBA/MainBundle/Resources/views/Default/index.html.twig”但在openshift上它仍然看起来到同一个目录。但是openshift dir布局不同，所以找不到模板。我想我必须配置 openshift 才能查看正确的目录。就是不知道怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:59:32.567

我在上传之前发出了以下命令，但不知何故缓存似乎还没有被清除。

```
php /var/www/html/jba/php/app/console cache:clear --env=prod --no-debug
php /var/www/html/jba/php/app/console cache:clear 
```

只有明确删除 app/cache 下的 prod 和 dev 目录才有帮助。另请参阅 [Symfony2：在生产中访问与开发相同的路线](https://stackoverflow.com/questions/6631190/symfony2-access-same-route-in-production-as-development)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:02:24.040

您是否清除了 prod 环境的缓存？

```
php app/console cache:clear --env=prod 
```

如果这没有帮助，您还可以查看 app/logs/prod.log 中的服务器日志/ sf2 日志。

# css - Twitter Bootstrap - 使页脚全宽运行

> ID：13838482
> 
> 赞同：1
> 
> 时间：2012-12-12T11:13:56.617
> 
> 标签：css, twitter-bootstrap

我试图让我的页脚像导航一样在网页的整个宽度上运行，但是我想让页脚的内容与上面的内容内联。

```
<footer>
    <div class="container narrow">
       <div class="row-fluid footer">
          <div class="span4">
          </div>
          <div class="span3">
          </div>
          <div class="span5">
          </div>
       </div>
    </div>
</footer> 
```

我认为`<div class="container narrow">`在页脚中添加类会使内容居中，但这并没有奏效。有任何想法吗？

该网站可在此处获得 - [http://www.openreachmarketing.co.uk/](http://www.openreachmarketing.co.uk/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:34:36.043

您在`.footer`类中定义了页脚背景。所以你需要`.footer`环绕`.container.narrow`.

这在我尝试时有效：

```
<footer>
    <div class="footer">
       <div class="container narrow row-fluid">
          <div class="span4">
          </div>
          <div class="span3">
          </div>
          <div class="span5">
          </div>
       </div>
    </div>
</footer> 
```

# indexing - Neo4J node_auto_indexing 和 relationship_auto_indexing

> ID：13838488
> 
> 赞同：0
> 
> 时间：2012-12-12T11:14:24.540
> 
> 标签：indexing, neo4j

我想知道，neo4j.properties中的node_auto_indexing和relationship_auto_indexing这两个设置是否与节点和rels的id有关？

或者为插入的节点和rels的ids自动创建neo4j索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:48:31.940

自动索引为文件中该`*_keys_indexable`行定义的所有属性创建索引`neo4j.properties`。

然后索引将节点 ID 与特定属性值绑定。因此，在索引中搜索属性值将返回节点。

因为你的问题对我来说有点不清楚，你可能想看看官方文档：http: [//docs.neo4j.org/chunked/milestone/auto-indexing.html](http://docs.neo4j.org/chunked/milestone/auto-indexing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:15:22.340

不，您不应该将您的 ID 添加到自动索引中。它没有用，因为您已经可以按 ID 检索节点，而无需使用自动索引。

然而，在某些情况下，通常的 ID 是不够的。例如，在与用户合作时，您可能拥有某种类型的用户 ID。然后，您将其存储在一个属性中，并将该属性添加到自动索引中。这样，您可以按用户 ID 进行搜索。在底层，Neo4J 将您的自定义用户 ID 与实际节点 ID 匹配。

这里要记住的重要一点是，根据定义，自动索引不是唯一的。如果您期望单个节点结果，您需要以属性实际上是唯一的方式设计您的应用程序。

# r - R 累积权益数据 - 添加时间和价格

> ID：13838490
> 
> 赞同：0
> 
> 时间：2012-12-12T11:14:29.643
> 
> 标签：r, accumulate

我有一些数据格式如下。我对此进行了一些分析，并希望能够在与分析数据相同的图表中绘制价格发展。这要求我对数据有相同的 x 轴。

所以我想以 150 个增量聚合“shares”列，并在其中添加“finalprice”和“time”。聚合应包括最新的时间和价格，因此如果需要在两行或多行数据上进行聚合，则最后一行应提供价格和时间数据。

我的问题是如何创建一个每行有 150 个共享的新向量。向量的长度将等于 sum(shares)/150。

是否有捷径可寻？提前致谢。

**编辑：我考虑过使用 rep(finalprice, share) 扩展观察结果，然后获取扩展向量的每 150 个值。**

数据样本：

```
"date","ord","shares","finalprice","time","stock"
20120702,E,2000,99.35,540.84753333,500
20120702,E,28000,99.35,540.84753333,500
20120702,E,50,99.5,542.03073333,500
20120702,E,13874,99.5,542.29411667,500
20120702,E,292,99.5,542.30191667,500
20120702,E,784,99.5,542.30193333,500
20120702,E,13300,99.35,543.04805,500
20120702,E,16658,99.35,543.04805,500
20120702,E,42,99.5,543.04805,500
20120702,E,400,99.4,546.17173333,500
20120702,E,100,99.4,547.07,500
20120702,E,2219,99.3,549.47988333,500
20120702,E,781,99.3,549.5238,500
20120702,E,50,99.3,553.4052,500
20120702,E,1500,99.35,559.86275,500
20120702,E,103,99.5,567.56726667,500
20120702,E,1105,99.7,573.93326667,500
20120702,E,4100,99.5,582.2657,500
20120702,E,900,99.5,582.2657,500
20120702,E,1024,99.45,582.43891667,500
20120702,E,8214,99.45,582.43891667,500
20120702,E,10762,99.45,582.43895,500
20120702,E,1250,99.6,586.86446667,500
20120702,E,5000,99.45,594.39061667,500
20120702,E,20000,99.45,594.39061667,500
20120702,E,15000,99.45,594.39061667,500
20120702,E,4000,99.45,601.34491667,500
20120702,E,8700,99.45,603.53608333,500
20120702,E,3290,99.6,609.23213333,500 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:57:05.050

我想我已经解决了。

```
expand <- rep(finalprice, shares) 

Increment <- expand[seq(from = 1, to = length(expand), by = 150)] 
```

# xtify - 每次用户从托盘中读取推送通知时，如何将 iOS 上的徽章计数器减一？

> ID：13838492
> 
> 赞同：1
> 
> 时间：2012-12-12T11:14:28.897
> 
> 标签：xtify

我正在通过 Application Craft 使用 Xtify 插件。

查看 Xtify 的帮助页面后：http: [//developer.xtify.com/display/sdk/PhoneGap+Cordova+for+iOS+Xtify+Integration+Guide](http://developer.xtify.com/display/sdk/PhoneGap+Cordova+for+iOS+Xtify+Integration+Guide)

在部分：**管理徽章计数**

我找到了一组函数来控制徽章编号。

但是从这些功能中不清楚，在用户阅读收到的通知之一后，如何将徽章计数器减一。目前我只能完全清除托盘中的所有通知（并且徽章计数器消失）。

但是，如果用户收到了 4 个未读通知，则标记计数器设置为 4。然后，如果用户阅读了其中一个通知，则标记计数器仍停留在“4”。我想简单地将计数器减一并仅从托盘中删除“读取”通知，而不是所有通知。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:08:16.590

有设置/获取徽章 javascript 方法可以设置和获取本机 iOS 徽章计数。但是，只有在应用程序平台中包含 Xtify 本机目标 C 插件类并与应用程序一起编译时，这才有效。javascript 函数与底层 Xtify xCode/obj-c 函数交互。

这将是此页面上的步骤 9-14：http: [//developer.xtify.com/display/sdk/PhoneGap+Cordova+for+iOS+Xtify+Integration+Guide](http://developer.xtify.com/display/sdk/PhoneGap+Cordova+for+iOS+Xtify+Integration+Guide)

您可能必须直接联系 AC 以支持 Xtify 本机 phonegap cordova 插件。

# javascript - 使用 $.getJSON() 填充 .data()

> ID：13838493
> 
> 赞同：2
> 
> 时间：2012-12-12T11:14:36.930
> 
> 标签：javascript, jquery

我正在尝试`$('div').data()`通过 JSON 填充。它适用于`JQuery.parseJSON`但不适用于`$.getJSON`.

```
// works as expected
$('div').data('dat', { xmin: '-10', xmax: 40 });
$('div').data('dat', jQuery.parseJSON('{"bbx" : {"xmin" : "-10", "xmax" : "40"}}'));

// doesnt work
$('div').data('dat', $.getJSON("init.php", function(json) {return(json);})); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T11:18:35.897

你可以这样做：

```
$.getJSON("init.php", function(json) {
    $('div').data('dat', json);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T11:19:03.180

可能是因为 getJSON 是一个异步操作。到您的成功函数执行时，原始语句现在已超出范围。

你不能这样做吗？

```
$.getJSON("init.php", function (json) {
    $('div').data('dat', json);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T11:25:15.493

`getJSON`是一个异步的ajax调用，所以函数本身不返回任何东西，它只是调用适当的回调，所以你可以这样做：

```
$.getJSON("init.php", function(json){
    $('div').data('dat', json);
}) 
```

注意：`$.get`会将 JSON 作为字符串检索，并且不会`getJSON`像`$.get`. 存储解析的对象也可以（通过使用`getJSON`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T11:31:55.807

您还可以以数组格式存储数据：

```
$.getJSON('init.php', function(data) {
    var items = [];

    $.each(data, function(key, val) {
        items.push(val);
    });

    $('div').data('dat', items)
}); 
```

# java - Apache POI 货币数据格式

> ID：13838495
> 
> 赞同：6
> 
> 时间：2012-12-12T11:14:38.273
> 
> 标签：java, apache-poi

我尝试使用 Apache POI 将数字转换为欧洲货币样式

```
HSSFDataFormat cf = workbook.createDataFormat();
currencyCellStyle = workbook.createCellStyle();
currencyCellStyle.setDataFormat(cf.getFormat("#.###,#0")); 
```

例如，我有数字 2400 和 2.4

我想要的是 2400,00 和 2,40 。但是 POI 给了我 2400,0 和 2,40。当我尝试将其更改为

```
currencyCellStyle.setDataFormat(cf.getFormat("#.###,00")); 
```

我得到的结果是 2400,00 和 2,400。那也不是我想要的。

是否有可能使两个值都正确？

谢谢和问候

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T13:39:56.803

最后，Gagravarr 给出了解决这个问题的正确提示。

最终解决方案是：

```
HSSFDataFormat cf = workbook.createDataFormat();
currencyCellStyle = workbook.createCellStyle();
currencyCellStyle.setDataFormat(cf.getFormat("#,##0.00\\ _€")); 
```

手动创建excel文件后出现了解决方案。然后由 Apache Poi 读取并提取格式字符串

```
 cell.getCellStyle().getDataFormatString() 
```

结果是#,##0.00\ _€</p>

所以我在上面的代码片段中使用了这种格式，它给出了正确的结果。

谢谢

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-20T09:27:29.643

对上述方法的更新：手动创建具有所需货币格式的 excel 文件后，可以在“自定义”类别下（在“格式单元格”对话框中）获取格式字符串。这样我们就不需要通过 poi 读取 excel 来获取这个字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-09T13:37:02.533

由于我的声誉，无法写评论。但是，如果您需要 Integer €，每个第三个数字都有点（例如 24.000.123 €），则模式为：

```
#,##0\ "€";\-#,##0\ "€" 
```

所以设置格式：

```
cell.getCellStyle().setDataFormat(cf.getFormat("#,##0\\ \"€\";\\-#,##0\\ \"€\"")); 
```

希望这会有所帮助。

# javascript - 触发浏览器pagedown

> ID：13838499
> 
> 赞同：2
> 
> 时间：2012-12-12T11:14:52.073
> 
> 标签：javascript, keypress

有没有办法用 javascript 触发浏览器 pagedown 操作？

```
var e = document.createEvent('KeyboardEvent');
e.initKeyboardEvent('keydown', true, true, window, false, false, false, false, 34, 0);
document.dispatchEvent(e); 
```

似乎不起作用。按键在那里，但实际滚动没有发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-25T00:02:50.453

像这样的东西在 Chrome 中模拟它：

```
window.scrollTo(0,window.scrollY+window.innerHeight*.9); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-12T11:25:29.127

试试看解决方案

```
window.onkeyup= function(e) {
    if (e.keyCode === 34) {
      alert('PageDown');        
    }
}​ 
```

示例：http: [//jsfiddle.net/hzCFD/4/](http://jsfiddle.net/hzCFD/4/)

# android - 来自数据库的条形图

> ID：13838503
> 
> 赞同：0
> 
> 时间：2012-12-12T11:14:58.677
> 
> 标签：android, database, sqlite, bar-chart, achartengine

嗨，我是 android 新手，我编写了以下代码来绘制折线图。我正在使用数据库将值传递给图表但图表没有绘制。

您能否告诉我如何更改以下代码以绘制条形图。

```
import org.achartengine.ChartFactory;
import org.achartengine.chart.PointStyle;
import org.achartengine.model.TimeSeries;
import org.achartengine.model.XYMultipleSeriesDataset;
import org.achartengine.renderer.XYMultipleSeriesRenderer;
import org.achartengine.renderer.XYSeriesRenderer;

import android.app.Activity;
import android.content.ContentValues;
import android.content.Context;
import android.content.Intent;
import android.database.Cursor;
import android.database.DatabaseErrorHandler;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.graphics.Color;
public class ChartActivity<BMICalculatorDB> extends Activity{

    public ChartActivity() {
        super();
    }
        public ChartActivity(Context context, String name, CursorFactory factory,
            int version, DatabaseErrorHandler errorHandler) {
        super();
        // TODO Auto-generated constructor stub
    }

        public static final String KEY_BMIID = "bmi_id";
        public static final String KEY_BMIDATA = "bmi_data";
        public static final String KEY_BMIDATE = "bmi_date";

        private static final String DATABASE_NAME = "Jayant";
        private static final String DATABASE_TABLE = "android_metadata";
        private static final int DATABASE_VERSION = 2;

        private DBHelper ourHelper;
        private static Context ourContext;
        private SQLiteDatabase ourDatabase;

        private static class DBHelper extends SQLiteOpenHelper{

            public DBHelper(Context context) {
                super(context, DATABASE_NAME, null, DATABASE_VERSION);
                // TODO Auto-generated constructor stub
            }

            @Override
            public void onCreate(SQLiteDatabase db) {
                // TODO Auto-generated method stub
                db.execSQL( "CREATE TABLE " + DATABASE_TABLE + " (" +
                KEY_BMIID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                        KEY_BMIDATA + " TEXT NOT NULL, " +
                        KEY_BMIDATE + " TEXT NOT NULL );"
                        );
            }

            @Override
            public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
                // TODO Auto-generated method stub
                db.execSQL( "DROP TABLE IF EXISTS " + DATABASE_TABLE );
                onCreate(db);
            }

        }

        public void BMICalculatorDB(Context c){
            ourContext = c;
        }

        @SuppressWarnings("unchecked")
        public BMICalculatorDB open(){
            ourHelper = new DBHelper(ourContext);
            ourDatabase = ourHelper.getWritableDatabase();
            return (BMICalculatorDB) this;
        }

        public void close(){
            ourHelper.close();
        }

        public long createEntry( String data, String date ) {
            //, String date 
            // TODO Auto-generated method stub
            ContentValues cv = new ContentValues();
            cv.put(KEY_BMIDATA, data);
            cv.put(KEY_BMIDATE, date);
            return ourDatabase.insert(DATABASE_TABLE, null, cv);
        }

        public String getBMIID() {
            // TODO Auto-generated method stub
            String[] column =
                    new String[]{ KEY_BMIID };
            Cursor c = 
                    ourDatabase.query(DATABASE_TABLE, column, null, null, null, null, null);

            String result = "";
            int iID = c.getColumnIndex(KEY_BMIID);

            for ( c.moveToFirst(); ! c.isAfterLast(); c.moveToNext() ){
                result = result + c.getString(iID);
            }

            return result;
        }

        public String getBMIDataData(){

            String[] column =
                        new String[]{ KEY_BMIDATA };
                Cursor c = 
                        ourDatabase.query( DATABASE_TABLE, column, null, null, null, null, null );

                String result = "";
                int iData = c.getColumnIndex( KEY_BMIDATA );

                for ( c.moveToFirst(); ! c.isAfterLast(); c.moveToNext() ){
                    result = result + c.getString( iData );
                }

            return result;
        }

        public String getBMIDateData(){
            String[] column =
                    new String[]{ KEY_BMIDATE };
            Cursor c = 
                    ourDatabase.query( DATABASE_TABLE, column, null, null, null, null, null );

            String result = "";
            int iDate = c.getColumnIndex( KEY_BMIDATE);

            for ( c.moveToFirst(); ! c.isAfterLast(); c.moveToNext() ){
                result = result + c.getString( iDate );
            }

        return result;
        }

        public void updateEntry( long lId, String mData, String mDate ) {
            // TODO Auto-generated method stub
            ContentValues cvUpdate = new ContentValues();

            cvUpdate.put( KEY_BMIDATA, mData );
            cvUpdate.put( KEY_BMIDATE, mDate );
            ourDatabase.update( DATABASE_TABLE, cvUpdate, KEY_BMIID + " = lId", null );
        }

        public String getData(long l) {
            // TODO Auto-generated method stub
            return null;
        }

        public String getDate(long l) {
            // TODO Auto-generated method stub
            return null;
        }

        public XYMultipleSeriesDataset getDemoDataset(String title) {

            String[] column =
                    new String[]{ KEY_BMIDATA };
            Cursor c = ourHelper.getWritableDatabase().query( DATABASE_TABLE, column, null, null, null, null, null );

            XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

            TimeSeries series = new TimeSeries("Bar1");
            TimeSeries series2 = new TimeSeries(title);

            getBMIDataData();

            while (!c.isAfterLast()) {
                int date = c.getInt((Integer) c.getColumnIndexOrThrow("DAYS"));
                int weight = c.getInt((Integer) c.getColumnIndexOrThrow("TOP 10"));
                series2.add(weight, date);
                c.moveToNext();
            }

            c.close();

            dataset.addSeries(series);
            dataset.addSeries(series2);

            return dataset;
        }

        public Intent getIntent(Context context) {

            //Lager TimeSeries for den første linja
            XYMultipleSeriesDataset dataset = getDemoDataset("Bar1");

            //Kode for render
            XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();

            //Optimalisering linje1
            XYSeriesRenderer renderer = new XYSeriesRenderer();
            renderer.setColor(Color.YELLOW);
            renderer.setPointStyle(PointStyle.CIRCLE);
            renderer.setFillPoints(true);

            // Optimalisering linje2 husk rekke følgen
            XYSeriesRenderer renderer2 = new XYSeriesRenderer();
            renderer2.setColor(Color.BLUE);
            renderer2.setPointStyle(PointStyle.SQUARE);
            renderer2.setFillPoints(true);

            //Legger til render seriene
            mRenderer.addSeriesRenderer(renderer);

            //Optimalisering grafen
            mRenderer.setChartTitle("Test");
            mRenderer.setZoomEnabled(true);
            mRenderer.setZoomButtonsVisible(true);
            mRenderer.setBackgroundColor(Color.BLACK);
            mRenderer.setApplyBackgroundColor(true);
            mRenderer.setXTitle("Dager");
            mRenderer.setShowGrid(true);

            mRenderer.addSeriesRenderer(renderer2);

            Intent intent = ChartFactory.getLineChartIntent(context, dataset, 
                    mRenderer, "Bar Graph Title");

            return intent;

        }

        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub

        }

        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:19:11.080

只需添加一个空的构造函数并从内部调用 super()

```
public ChartActivity() {
    super();
} 
```

它应该工作。问题在这里：

```
Caused by: java.lang.InstantiationException: can't instantiate class flu.solutions.travelsense.ChartActivity; no empty constructor 
```

# python - 为什么重定向不适用于 python 脚本？

> ID：13838508
> 
> 赞同：3
> 
> 时间：2012-12-12T11:15:10.327
> 
> 标签：python, bash, shell, redirect

> **可能重复：**
> [在 python 中管道 stdout 时设置正确的编码](https://stackoverflow.com/questions/492483/setting-the-correct-encoding-when-piping-stdout-in-python)

以下按预期在python shell（2.7.3）中运行

```
for i in range(999):
    print i, unichr(i) 
```

将其保存在文件（asd.py）中，并在 shell 中运行

```
$ ./asd.py 
```

也可以，但是

```
$ ./asd.py > asd.txt 
```

给出：

```
Traceback (most recent call last):
  File "./asd.py", line 3, in <module>
    print i, unichr(i)
UnicodeEncodeError: 'ascii' codec can't encode character u'\x80' in position 0: ordinal not in range(128) 
```

这是为什么？如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:26:25.507

试试这个代码，

```
#!/usr/bin/python
for i in range(999):
   print i, unichr(i).encode('utf-8') 
```

# php - php中的日期时间格式检查

> ID：13838509
> 
> 赞同：-1
> 
> 时间：2012-12-12T11:15:11.093
> 
> 标签：php, mysql, datetime

我将如何检查我的数据库中的拍卖是否已过期？我在 MySQL 中有一个 datetime 列，我相信它的格式如下：YYY-MM-DD hh:mm:ss。如果是这种情况，以下检查是否有效 - 即只想从数据库中的表中选择过期的拍卖......

```
<?php

//Some code    

$auctioncheck = mysql_query("

 SELECT * FROM auction WHERE ($date_time > finish_time)

");

?> 
```

而“完成时间”是上述引用格式的数据库中的一列。假设这有效，我实际上如何将当前日期转换为相同的格式？如果有人知道我会非常感激欢呼。如果上述查询不起作用并且需要其他内容，则更是如此。再次感谢。

哦，当然我会定义 date_time 变量开始

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:31:39.540

你真的需要这个`$date_time`变量吗？最简单的方法是`SELECT * FROM auction WHERE finish_time < NOW()`. 这样您就可以得到结果，而不必从 PHP 中设置日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:23:10.420

您可以使用

```
<?php

//Some code    
$date_time=strtotime($date_time);
$auctioncheck = mysql_query("

SELECT * FROM auction WHERE ( $date_time > UNIX_TIMESTAMP(finish_time))

");

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:19:50.047

这个解决方案：

```
// to show both date and time,
$date->get('YYYY-MM-dd HH:mm:ss');

// or, to show date only
$date->get('YYYY-MM-dd') 
```

来自这篇文章：[PHP Zend 日期格式](https://stackoverflow.com/questions/6201768/php-zend-date-format)

这是另一个解决方案：[如何在 javascript 中以 MM/dd/yyyy HH:mm:ss 格式格式化日期？](https://stackoverflow.com/questions/10632346/how-to-format-a-date-in-mm-dd-yyyy-hhmmss-format-in-javascript)

并在 php 中执行： [如何在 PHP 中获取当前日期和时间？](https://stackoverflow.com/questions/470617/get-current-date-and-time-in-php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:20:37.087

功能[日期](http://php.net/manual/function.date.php)是为它制作的：

```
// Get the current date
$date_time = date("y-m-d H:i:s"); 
```

查看文档页面以查看其他格式标志；）

# windows - Windows Server 2008 任务计划程序 - 作为组执行作业

> ID：13838519
> 
> 赞同：0
> 
> 时间：2012-12-12T11:15:37.833
> 
> 标签：windows, windows-server-2008

我想在我们的任务调度程序中设置一些作业。问题是我们不想使用用户作为用户运行，而是使用蚂蚁组。那可能吗？

我还没有找到关于这个特定主题的任何文档，这里的一些人说它必须是一个用户，其他人说它看起来好像可以使用一个组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:59:46.027

据我所知，您可以通过为任务分配一个组来做到这一点

[检查这个](http://d.pr/i/l1qP)

# java - 从输入中省略连续的 8 位数字（非数字）

> ID：13838520
> 
> 赞同：1
> 
> 时间：2012-12-12T11:15:40.827
> 
> 标签：java, javascript, regex

我有一个考虑验证的任务，如果字符串连续包含 8 个字母形式的数字，我想修剪一个字符串，例如：

“三四五五二三四一二”或“三四五五二三四一二”

我想知道这个或其他一些建议是否可能是一些正则表达式。

它可以是 Javascript 或 Java

**输入字符串：** “*示例字符串三四五五二三四一二剩余img字符串*”

或者

**输入字符串：** “样本字符串三四五五二三四一二剩余img字符串”

我预期的字符串：“*示例字符串剩余字符串*”

谢谢，吉比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:30:39.523

这应该适用于Javascript：

```
str.replace(
    /(?:(?:zero|one|two|three|four|five|six|seven|eight|nine)\s*){8,}/g,
    ""
); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T11:25:50.743

如果数字像您的示例中一样拼写出来，并且您在 JavaScript 中需要它，那么试试这个：

```
var eightDigitsRegex = /(?:(?:zero|one|two|three|...|nine)\s*){8,}/;
if (string.match(eightDigitsRegex)) {
    // It matches.
} 
```

确保将其余数字添加到`eightDigitsRegex`.

*   `(?:)`是非捕获组
*   `zero|...|nine`- 数字替代品
*   `{8}`- 重复次数（任意数字对应的非捕获组会遇到8次

**编辑**：这里只有正则表达式匹配。请准确地澄清什么是*“修剪”*。删除匹配的子字符串？周围有空格吗？...

# .net - 服务器 WCF 跟踪日志中记录的此平台问题不支持或未启用扩展保护

> ID：13838521
> 
> 赞同：5
> 
> 时间：2012-12-12T11:15:44.740
> 
> 标签：.net, wcf, silverlight, long-polling, polling

不明白为什么我在 WCF 跟踪日志中收到很多警告：

**跟踪标识符：**

[http://msdn.microsoft.com/en-GB/library/System.ServiceModel.Activation.WebHostNoCBTSupport.aspx](http://msdn.microsoft.com/en-GB/library/System.ServiceModel.Activation.WebHostNoCBTSupport.aspx)

**描述：**

> 此平台不支持或未启用扩展保护。如果您希望通过 Windows 身份验证对 https 提供扩展保护支持，请安装相应的补丁并启用它。

**资源：**

System.ServiceModel.Activation.MetabaseSettingsIis6/17653682

据我所见，它出现在我手动强制 IIS 重新启动或回收 AppPool 之后，然后客户端服务重新连接到服务器，或者客户端最终开始获得`404 not found`服务器响应，顺便说一句，不清楚为什么在 IIS 重新启动后它开始得到 404 并且不能从中恢复 1-10 分钟甚至更长时间。

关于我正在使用的 WCF 配置的一些信息：

*   HTTP 轮询双工
*   Silverlight 4 客户端
*   NTLM 身份验证
*   在 IIS 匿名身份验证上。已禁用，并启用了 Windows 集成身份验证。
*   IIS 6.0
*   视窗服务器 2003
*   单进程 AppPool 中只有一个 WCF 服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T05:31:48.833

您是否在代码中使用与 DateTime 相关的任何文化信息？我们使用的是服务器 2003，当 appool 重新启动时，它会偶尔使用无效的区域性。在这个场景中，一切都很好，然后在重新启动几周后，应用程序池将停止请求或在它们上出错。我现在在 2008 年，但这个 KB 在我们的案例中有效

“...我找到了 server 2003 的热修复程序。值得一试...它可能会工作...” [http://support.microsoft.com/default.aspx?scid=kb;EN-US;2404988](http://support.microsoft.com/default.aspx?scid=kb;EN-US;2404988)

# java - JSR 181：pom.xml 中的错误

> ID：13838522
> 
> 赞同：2
> 
> 时间：2012-12-12T11:15:50.423
> 
> 标签：java, maven, dependencies

我的 pom.xml 中有一个奇怪的错误。Maven（我正在使用 Maven 2）正在发出信号`Missing artifact javax.jws:jsr181:jar:1.0`，即使我在 pom.xml 中获得了相应的依赖项：

```
<dependency>
    <groupId>javax.jws</groupId>
    <artifactId>jsr181</artifactId>
    <version>1.0</version>
</dependency> 
```

什么可能是这个错误的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:21:29.400

好的，我找到了问题的解决方案。我认为找到它的方法也可能很有趣。

当我查看[mvnrepository.com](http://mvnrepository.com/artifact/javax.jws/jsr181/1.0)时，存储库上的[pom 文件](http://repo1.maven.org/maven2/javax/jws/jsr181/1.0/jsr181-1.0.pom)指向 bea.com 上的 URL，该 URL 不再可用。所以我不得不更改为[维护版本](http://mvnrepository.com/artifact/javax.jws/jsr181-api/1.0-MR1)，就像 Brian Agnew 建议的那样。当然，更新我的 pom.xml 中的一些其他依赖项，它们需要在自己的依赖项中使用过时的版本。Maven 是有代价的...

```
<!-- https://mvnrepository.com/artifact/javax.jws/jsr181-api -->
<dependency>
    <groupId>javax.jws</groupId>
    <artifactId>jsr181-api</artifactId>
    <version>1.0-MR1</version>
</dependency>
<dependency>
    <groupId>javax.xml.ws</groupId>
    <artifactId>jaxws-api</artifactId>
    <version>2.1-1</version>
    <exclusions>
        <exclusion>
            <groupId>javax.jws</groupId>
            <artifactId>jsr181</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:18:03.980

查看我的存储库，我认为您想要：

```
<dependency>
  <groupId>sun-jaxws</groupId>
  <artifactId>jsr181-api</artifactId>
  <version>1.0</version>
</dependency> 
```

# ruby-on-rails - Carrierware：根据 created_at 日期将文件存储在目录中

> ID：13838526
> 
> 赞同：0
> 
> 时间：2012-12-12T11:16:04.527
> 
> 标签：ruby-on-rails, carrierwave

我正在使用carrierwave 来处理我的上传。我已经通过以下方式指定了**store_dir**：

```
def store_dir
  "uploads/#{Time.now.year}/#{Time.now.month}/#{Time.now.day}"
end 
```

上传文件就像一个魅力 - 每次我上传一个文件时，它都会在它应该结束的目录中结束；即“今天的目录”。

当我尝试下载文件时，carrierwave 正在根据**store_dir**选项动态构建下载路径。因此，假设在 1.12.2012 上传的文件可在 fliesystem 的以下路径中找到：

```
/uploads/2012/12/01/file.ext 
```

将被carrierwave检索为：

```
/uploads/2012/12/12/file.ext 
```

这显然会导致“无法读取文件”错误。

我提供了 2 种不同的可能解决方案：

1.  创建一个单独的文件，我将在创建文件时存储文件的实际文件路径，然后使用该值来检索文件。
2.  重载**retrieve_from_store！**方法（它是carrierwave gem的一部分）并使其基于文件记录中的**created_at**字段而不是**store_dir**构造路径。

我倾向于第二种可能性，因为它感觉不那么脏。然而，两者都觉得“不走寻常路”。哪个更好用，为什么？或者也许carrierwave提供了解决这个问题的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:39:36.027

完全在这里猜测，但通过查看文档，我认为这样的事情应该可行：

```
def store_dir
    "uploads/#{model.created_at.year}/#{model.created_at.month}/#{model.created_at.day}"
end 
```

# ios - ios以编程方式重绘嵌套视图平铺

> ID：13838529
> 
> 赞同：0
> 
> 时间：2012-12-12T11:16:15.417
> 
> 标签：ios

我正在市场上寻找一个很好的完整示例/教程链接或演示，以编程方式创建和重绘/调整具有嵌套平铺视图的视图的旋转大小。这意味着根视图需要在旋转时旋转，并触发所有嵌套视图也旋转和调整大小。

例如，假设您有一个视图，其中包含 40 个平铺的矩形视图，我想旋转 iphone/ipad 并让 40 个嵌套视图也旋转（不难），但更重要的是调整大小和移动。一个四乘十的网格可能会变为五乘八。

我能够以编程方式实现这一点，但我发现 x/y 边界等都偏离了轨道。

请不要对“但只使用故事板”发表评论......

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:51:22.443

我发现要让它按照您的意愿/期望工作通常需要一些努力。要考虑的事情是您用来进行轮换的回调，有 3 个，它们的用途略有不同

`- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration`

这可能是您要使用的那个，此时当您查询`self.view.frame`（或任何用于获取超级帧的内容）时，它将返回旋转完成后该帧*的值。*它还考虑了自动调整大小，并在旋转发生*之前*为您提供了这一点（即尚无可见效果）。使用它来计算视图的所有新位置和大小并设置它们。

`- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration`

这告诉您旋转即将发生，但仍返回当前方向的框架，用于隐藏/显示视图，但不适用于计算新位置！

`- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation`

一旦旋转完成就会调用它，它会返回新的尺寸和帧，但是如果您尝试在此处重新定位视图，它们看起来就像在旋转完成后它们正在四处跳动。

我还建议使用自动调整大小，因为这可能是一个真正的婊子。我有时会在代码和 xib 中设置自动调整大小，以确保没有有趣的事情！

如果矩形嵌套在视图控制器中，它们应该自动旋转（您可能知道我只是想以防万一）

# c++ - C++：在头文件中声明结构返回类型函数

> ID：13838531
> 
> 赞同：0
> 
> 时间：2012-12-12T11:16:17.687
> 
> 标签：c++, data-structures, header-files

我有一个头文件“ `check.h`”，它定义了以下内容`struct`：

```
#ifndef CHECK_H
#define CHECK_H
#include<string>
struct Test{
    std::string check;

};

#endif 
```

我有另一个头文件“ `test.h`”，它具有以下函数，返回类型如上`struct Test`定义：

```
#ifndef TEST_H
#define TEST_H
#include<string>
#include "check.h"
Test display(std::string);
#endif 
```

但即使包含`"check.h"`在此头文件中，我也会收到`unable to resolve identifier`错误消息。我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:44:42.890

只要您没有用 name 定义其他东西（例如变量或函数），您的代码就应该没问题`Test`。

如果你有，那么你需要明确指出你指的是类而不是其他东西：

```
struct Test display(std::string);
^^^^^^ 
```

尽管更好的解决方案是避免对不同的事物使用相同的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:22:15.623

您应该返回`struct Test`，因为`test.h`定义了结构而不是类型。

或者只是将您的结构定义更改为 typedef：

```
typedef struct s_Test{
    string check;
} Test; 
```

[在那里](http://en.wikipedia.org/wiki/Struct_%28C_programming_language%29)查看维基百科

# c# - 在 ASP.NET WebForms 中使用 FindControl 从未知类型返回值

> ID：13838534
> 
> 赞同：0
> 
> 时间：2012-12-12T11:16:26.457
> 
> 标签：c#, webforms, findcontrol

我创建了一个类，我想从组合框、复选框或文本框中返回选定的值。

代码如下所示：

```
private string GetControlValue(string controlId)
    {
        var control = FindControl(controlId);

        if (control.GetType() == typeof(RadTextBox))
        {
            return ((RadInputControl)control).Text;
        }
        else if (control.GetType() == typeof(RadComboBox))
        {
            return ((RadComboBox)control).SelectedValue;
        }
        else if (control.GetType() == typeof(CheckBox))
        {
            return ((CheckBox)control).Checked.ToString();
        }
        else
        {
            return null;
        }
    } 
```

我可以以更有效的方式做到这一点吗？我想我的例子可能是对每种类型进行拳击，它会降低性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:33:17.267

您可以使用继承树来缩短代码：

```
private string GetControlValue(string controlId)
{
    var control = FindControl(controlId);
    if(control is ITextControl)
    {
        return ((ITextControl) control).Text; // works also for the RadComboBox since it returns the currently selected item's text
    }
    else if(control is ICheckBoxControl)
    {
        return ((ICheckBoxControl)control).Checked.ToString();
    }
    else
    {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:20:00.160

您可以使用以下`as`关键字：

```
private string GetControlValue(string controlId)
{
    var control = FindControl(controlId);
    var radTextBox = control as RadTextBox;
    if (radTextBox != null)
    {
        return radTextBox.Text;
    }

    var radComboBox = control as RadComboBox;
    if (radComboBox != null)
    {
        return radComboBox.SelectedValue;
    }

    var checkBox = control as CheckBox;
    if (checkBox != null)
    {
        return checkBox.Checked.ToString();
    }

    return null;
} 
```

顺便说一句：您的代码中没有发生拳击。

# jquery - 如何检查是否应在单击另一个复选框时从一组复选框中选择至少一个复选框？

> ID：13838540
> 
> 赞同：0
> 
> 时间：2012-12-12T11:16:54.117
> 
> 标签：jquery, jquery-selectors, jquery-validate

我有一个表格，其中有一些复选框组。请找到以下代码。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"  />
<title>Untitled Document</title>

<script type="text/javascript" src="jquery-1-4-2.js"></script>
<script type="text/javascript" src="jquery_validate.js"></script>
<script type="text/javascript" src="jquery.keyfilter-   1.7.js"></script>
<script type="text/javascript" >
$(document).ready(function (){
        $("#mainfruit").click(function(){
            if($('#mainfruit').is(':checked')){
                $('input[id^="fruit_"]').attr ( "checked" , false );                
                $('input[id^="fruit_"]').attr ( "disabled" , false );
            }else{
                $('input[id^="fruit_"]').attr ( "checked" , false );                
                $('input[id^="fruit_"]').attr ( "disabled" , true );                
            }
        });
        $("#idchecktest").validate({
            rules: {
                name: {
                    required: true
                      },
                fruit: {
                    subselect: true
                      }
                },
            messages: {
                foldername: {
                        required: "<br>Please enter the name."
                    },
                fruit: {
                        subselect:"<br>Please select sub checkbox."
                      }
              },
            //errorClass: 'errortext',
            errorLabelContainer: "#messagebox"
        });
    });
$.validator.addMethod('subselect', function (value) { 
    if($('#mainfruit').is(':checked')){
        /*var che=$('input[id^="fruit_"]');
        var i=0;
        che.each(function (i){
            if($(this).is(':checked')){
                i=1;
                return true;
                //break;
            }else{
                i=0;
                //continue;
            }
        });*/
        if($("'input[id^="fruit_"]':checked").length>0){
            return true;
        }else{
            return false;
        }
    }else{
        return true;
    }
}, 'check atleast one checkbox');
</script>
</head>
<body>
<form name="checktest" action="" id="idchecktest" method="get">
<table width="200" border="1">
  <tr>
    <td>Name</td>
    <td><input type="text" name="name" /></td>
  </tr>
  <tr>
    <td>Select Fruits </td>
    <td><p>
      <input type="checkbox" name="fruit" id="mainfruit" />
      Fruits<br />
         <input type="checkbox" name="mango" id="fruit_mango" disabled="disabled" />
        Mango <br />
        <input type="checkbox" name="pineapple" id="fruit_pineapple" disabled="disabled"/>
        Pineapple<br />
        <input type="checkbox" name="watermellon" id="fruit_watermellon" disabled="disabled"/>
        watermellon        <br />
        <input type="checkbox" name="orange" id="fruit_orange" disabled="disabled"/>
Orange</p>      </td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td><div id="messagebox"> </div></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td><label>
      <input type="submit" name="submit" id="submit" value="Submit" />
    </label></td>
  </tr>
</table>
</form>
</body>
</html> 
```

在上面的代码中，我使用了 jquery 表单验证插件。现在我想为一组复选框添加一个自定义验证，即每当用户选中 Fruits 复选框时，他必须在其下选择至少一个复选框。如果他只选中水果复选框而不是它下面的复选框，那么应该会显示一条错误消息。

在上面的代码中，它显示了与复选框相关的错误消息，但是当我们取消选中 maincheckbox 即水果复选框时，相应的错误消息不会出现。1\. 请朋友们告诉我我的 jquery 代码有什么问题。2.我也想知道是否可以为另一组复选框使用相同的自定义验证功能，如鲜花

请各位朋友指导一下。谢谢你！

# android - 从另一个片段启动对话框片段：IllegalStateException：onSaveInstanceState 后无法执行此操作

> ID：13838545
> 
> 赞同：5
> 
> 时间：2012-12-12T11:17:17.523
> 
> 标签：android, android-fragments, illegalstateexception, android-dialogfragment

所以我一直试图了解如何解决这个问题，但我无法真正解决它。现在我有一个带有一个按钮的片段。当您按下此按钮时，它将启动`DialogFragment`带有确定/取消按钮的自定义。

如果我按下 ok 按钮，它将启动另一个 custom `DialogFragment`，这次它是一个`ProgressDialog`片段。问题是，当我旋转时出现 ok/cancel 对话框，然后按下 ok 按钮然后调用`ProgressDialog`片段，我得到这个错误。如果我只在显示进度对话框片段时旋转，则根本没有问题。我正在使用支持包 v4。这是课程：

**主要活动：**

```
public class MainActivity extends FragmentActivity implements OnFragmentAttachedListener, Callbacks{

boolean mResumed = false;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    FragmentManager fragmentManager = getSupportFragmentManager();
    FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

    fragmentTransaction.add(R.id.main_id, new EmptyFragmentWithCallbackOnResume());
    fragmentTransaction.commitAllowingStateLoss();

}
@Override
public void onTaskFinished()
{
    // Hooray. A toast to our success.
    Toast.makeText(this, "Task finished!", Toast.LENGTH_LONG).show();
    // NB: I'm going to blow your mind again: the "int duration" parameter of makeText *isn't*
    // the duration in milliseconds. ANDROID Y U NO ENUM? 
}

@Override
public void OnFragmentAttached() {

} } 
```

**okcancel 对话框片段：**

```
public class OkCancelDialogFragment<T> extends DialogFragment {

public final static String TITLE="title";

private OkCancelDialogEvents<T> buttonEvents;
private T[] params;

public OkCancelDialogFragment(String title, OkCancelDialogEvents<T> buttonEvents, T... params) {

    this.buttonEvents=buttonEvents;

    Bundle args = new Bundle();
    args.putString(TITLE, title);
    this.setArguments(args);

    this.params=params;

}

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    this.setRetainInstance(true);
}

@Override
public void onDestroyView() {
  if (getDialog() != null && getRetainInstance())
    getDialog().setDismissMessage(null);
  super.onDestroyView();
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

     String title = getArguments().getString(TITLE);
     return new AlertDialog.Builder(getActivity())
    //.setIcon(R.drawable.alert_dialog_icon)
     .setTitle(title)
     .setPositiveButton("ok",
         new DialogInterface.OnClickListener() {
             public void onClick(DialogInterface dialog, int whichButton) {
                 buttonEvents.onPositiveClick(params);
             }
         }
     )
     .setNegativeButton("cancel",
         new DialogInterface.OnClickListener() {
             public void onClick(DialogInterface dialog, int whichButton) {
                 buttonEvents.onNegativeClick();
             }
         }
     )
     .create(); }} 
```

**进度对话框片段：**

```
public class TaskFragment extends DialogFragment{
// The task we are running.
GenericTask<?,?> mTask;
ProgressDialog mProgressDialog;
String title, message;

public void setTask(MyTask task)
{
    mTask = task;

    // TellsetFragment the AsyncTask to call updateProgress() and taskFinished() on this fragment.

    mTask.setFragment(this);
}

public void setTitleMessage(String title, String message){
    this.title=title;
    this.message=message;       
}

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    // Retain this instance so it isn't destroyed when MainActivity and
    // MainFragment change configuration.
    setRetainInstance(true);

}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    mProgressDialog= new ProgressDialog(getActivity());
    mProgressDialog.setTitle(title);
    mProgressDialog.setMessage(message);
    mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    mProgressDialog.setCanceledOnTouchOutside(false);

    return mProgressDialog;
}

// This is to work around what is apparently a bug. If you don't have it
// here the dialog will be dismissed on rotation, so tell it not to dismiss.
@Override
public void onDestroyView()
{
    if (getDialog() != null && getRetainInstance())
        getDialog().setDismissMessage(null);
    super.onDestroyView();
}

// Also when we are dismissed we need to cancel the task.
@Override
public void onDismiss(DialogInterface dialog)
{
    super.onDismiss(dialog);
    // If true, the thread is interrupted immediately, which may do bad things.
    // If false, it guarantees a result is never returned (onPostExecute() isn't called)
    // but you have to repeatedly call isCancelled() in your doInBackground()
    // function to check if it should exit. For some tasks that might not be feasible.
    if (mTask != null)
        mTask.cancel(false);

    // You don't really need this if you don't want.
    if (getTargetFragment() != null)
        getTargetFragment().onActivityResult(MainFragment.TASK_FRAGMENT, Activity.RESULT_CANCELED, null);
}

@Override
public void onResume()
{
    super.onResume();
    // This is a little hacky, but we will see if the task has finished while we weren't
    // in this activity, and then we can dismiss ourselves.
    if (mTask == null)
        dismiss();
}

// This is called by the AsyncTask.
public void updateProgress(int percent)
{
    mProgressDialog.setProgress(percent);
}

// This is also called by the AsyncTask.
public void taskFinished()
{
    // Make sure we check if it is resumed because we will crash if trying to dismiss the dialog
    // after the user has switched to another app.
    if (isResumed())
        dismiss();

    // If we aren't resumed, setting the task to null will allow us to dimiss ourselves in
    // onResume().
    mTask = null;

    // Tell the fragment that we are done.
    if (getTargetFragment() != null)
        getTargetFragment().onActivityResult(MainFragment.TASK_FRAGMENT, Activity.RESULT_OK, null);
} 
```

}

**主要片段：**

```
public class MainFragment extends Fragment implements OkCancelDialogEvents<Void>, OnClickListener{
// This code up to onDetach() is all to get easy callbacks to the Activity. 
private Callbacks mCallbacks = sDummyCallbacks;

private static Callbacks sDummyCallbacks = new Callbacks()
{
    public void onTaskFinished() { }
};

@Override
public void onAttach(Activity activity)
{
    super.onAttach(activity);
    if (!(activity instanceof Callbacks))
    {
        throw new IllegalStateException("Activity must implement fragment's callbacks.");
    }
    mCallbacks = (Callbacks) activity;
}

@Override
public void onDetach()
{
    super.onDetach();
    mCallbacks = sDummyCallbacks;
}

// Save a reference to the fragment manager. This is initialised in onCreate().
private FragmentManager mFM;

// Code to identify the fragment that is calling onActivityResult(). We don't really need
// this since we only have one fragment to deal with.
static final int TASK_FRAGMENT = 0;

// Tag so we can find the task fragment again, in another instance of this fragment after rotation.
static final String TASK_FRAGMENT_TAG = "task";

@Override
public void onCreate(Bundle savedInstanceState)
{
    //this.setRetainInstance(true);
    super.onCreate(savedInstanceState);
    // At this point the fragment may have been recreated due to a rotation,
    // and there may be a TaskFragment lying around. So see if we can find it.
    mFM = getFragmentManager();
    // Check to see if we have retained the worker fragment.
    TaskFragment taskFragment = (TaskFragment)mFM.findFragmentByTag(TASK_FRAGMENT_TAG);

    if (taskFragment != null)
    {
        // Update the target fragment so it goes to this fragment instead of the old one.
        // This will also allow the GC to reclaim the old MainFragment, which the TaskFragment
        // keeps a reference to. Note that I looked in the code and setTargetFragment() doesn't
        // use weak references. To be sure you aren't leaking, you may wish to make your own
        // setTargetFragment() which does.
        taskFragment.setTargetFragment(this, TASK_FRAGMENT);
    }

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState)
{
    return inflater.inflate(R.layout.fragment_main, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {

    super.onActivityCreated(savedInstanceState);
    if(savedInstanceState!=null)
        Toast.makeText(getActivity(), savedInstanceState.getString("documents"), Toast.LENGTH_SHORT).show();
}

@Override
public void onSaveInstanceState(Bundle outState) {

    super.onSaveInstanceState(outState);
    outState.putString("documents", "teste");
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState)
{
    super.onViewCreated(view, savedInstanceState);

    // Callback for the "start task" button. I originally used the XML onClick()
    // but it goes to the Activity instead.
    view.findViewById(R.id.taskButton).setOnClickListener(this);
}

@Override
public void onClick(View v)
{

    OkCancelDialogFragment<Void> dialog = new OkCancelDialogFragment<Void>("Teste", this);
    dialog.setTargetFragment(this, 2);
    dialog.show(getFragmentManager(), "basic_dialog");

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (requestCode == TASK_FRAGMENT && resultCode == Activity.RESULT_OK)
    {
        // Inform the activity. 
        mCallbacks.onTaskFinished();
    }
}

@Override
public void onPositiveClick(Void... params) {

    // We only have one click listener so we know it is the "Start Task" button.

    // We will create a new TaskFragment.
    TaskFragment taskFragment = new TaskFragment();
    // And create a task for it to monitor. In this implementation the taskFragment
    // executes the task, but you could change it so that it is started here.

    MyTask task=new MyTask();
    task.execute("one","two");

    taskFragment.setTask(task);
    taskFragment.setTitleMessage("File Download", "Downloading...");
    // And tell it to call onActivityResult() on this fragment.
    taskFragment.setTargetFragment(this, TASK_FRAGMENT);
    // Show the fragment.
    // I'm not sure which of the following two lines is best to use but this one works well.
    taskFragment.show(mFM, TASK_FRAGMENT_TAG);
    //mFM.beginTransaction().add(taskFragment, TASK_FRAGMENT_TAG).commit();

}

@Override
public void onNegativeClick() {

}} 
```

这是错误：

```
 12-12 11:24:52.144: E/AndroidRuntime(2451): FATAL EXCEPTION: main
12-12 11:24:52.144: E/AndroidRuntime(2451): java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
12-12 11:24:52.144: E/AndroidRuntime(2451):     at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1327)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1338)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:595)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:574)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at android.support.v4.app.DialogFragment.show(DialogFragment.java:127)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at com.example.progressdialog.MainFragment.onPositiveClick(MainFragment.java:149)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at com.example.progressdialog.MainFragment.onPositiveClick(MainFragment.java:1)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at com.example.progressdialog.OkCancelDialogFragment$1.onClick(OkCancelDialogFragment.java:56)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:196)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at android.os.Looper.loop(Looper.java:123)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at android.app.ActivityThread.main(ActivityThread.java:4627)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at java.lang.reflect.Method.invokeNative(Native Method)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at java.lang.reflect.Method.invoke(Method.java:521)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
12-12 11:24:52.144: E/AndroidRuntime(2451):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:37:41.477

这似乎是兼容性包的一个错误（尚未解决）。无论如何，您可以通过修改代码以更好地处理片段之间的通信来避免该错误。我已经修改了您的示例项目（可以在[此处](http://dl.dropbox.com/u/95923721/DefaultProgressDialog.7z)找到）。关于这一点，我不知道您的示例有多简单，但是如果所有回调都指向活动，那么您应该让活动类处理片段（例如启动对话框）以及它们之间的通信，因为它“ sees”并知道其中所有片段的状态。

# html - 如何在 div 中居中动态变化的网格？

> ID：13838550
> 
> 赞同：0
> 
> 时间：2012-12-12T11:17:31.250
> 
> 标签：html, css, css-float

![正方形](../Images/bb2d2acc8a896eab72ec699218085655.png)

我需要创建一个居中的正方形网格，其中包含文本。使用 jQuery 帮助用户将能够添加或删除正方形（在行和列中）。

基本上代码是：

```
<style>
div.square{
    padding: 5px;
    margin: 5px;
    border: 1px solid green;
    /*display: inline-table; /* IE fail*/
    /*display: inline-block; /* IE fail*/
    float: left;
}
div.row{
    margin: 0 auto;
}
</style>

<div style="width:500px; border:1px solid red; margin: 0 auto">
    <div class="row">
        <div class="square">1</div>
        <div class="square">2</div>
        <div class="square">3</div>
    </div>
    <div style="clear:both"></div>
    <div class="row">
        <div class="square">1</div>
        <div class="square">2</div>
        <div class="square">3</div>
    </div>
    <div style="clear:both"></div>
    <div class="row">
        <div class="square">1</div>
        <div class="square">2</div>
        <div class="square">3</div>
    </div>
    <div style="clear:both"></div>
</div> 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:44:31.740

您是否正在寻找这样的东西：

[http://jsbin.com/etunuk/1/](http://jsbin.com/etunuk/1/)

1.  浮动元素收缩包装，因此它们需要附加宽度。
2.  要使浮动元素居中，您需要添加它们的宽度 + 填充 + 边距 + 边框并将该宽度分配给包装器，在本例中为 .row 和中心 .row。

如果去掉边框，需要去掉行宽，1px * 6 等。

# iphone - 如何使用 setViewController:direction:animated 方法

> ID：13838552
> 
> 赞同：0
> 
> 时间：2012-12-12T11:17:33.027
> 
> 标签：iphone, ipad, uipageviewcontroller

我如何在页面视图控制器中使用 setViewControllers 方法，是否有可用的示例。或者有人可以发布任何示例代码，我们如何使用它导航到其他视图控制器。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:32:26.287

您是否考虑过在此处发布之前使用谷歌搜索它？看起来不像……

这里有几个链接。。

[UIPageViewController - 我如何跳转到特定的页码？](https://stackoverflow.com/questions/11334967/uipageviewcontroller-how-can-i-jump-to-a-particular-page-number)

[http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)

# c - C中多进程的描述和工作

> ID：13838554
> 
> 赞同：0
> 
> 时间：2012-12-12T11:17:37.773
> 
> 标签：c, process

我是 C 中多个进程的新手。

一旦在 C 中创建了一个新的子进程，所有代码都将复制到该进程中。当我试图创建一个子进程时我很困惑，但是它的 int main() 函数会发生什么，因为我是从其他函数创建这个子进程的。

我正在使用 Windows XP、VS2005。

我为这个令人困惑的问题道歉。

我想索取一些文档，以帮助我了解如何在 C 中创建和使用新流程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:28:47.437

在 Windows 上，您应该查看 winapi [CreateProcess()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)函数，该函数创建一个运行所需命令的新进程，还可以在[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682512%28v=vs.85%29.aspx)中查看此示例。

# c# - 在 WPF 应用程序中显示文档中的表格

> ID：13838558
> 
> 赞同：4
> 
> 时间：2012-12-12T11:17:51.670
> 
> 标签：c#, wpf, interop

我正在开发一个小型应用程序，它可以读取 word 文档并对其进行分析。文档中存在的数据以表格的形式存在，有没有办法在应用程序中显示数据（表格数据）..？如果DGV是显示表格的唯一解决方案，有没有办法将Interop表格绑定到Datagrid

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:07:46.167

我不知道这是否是最好的方法，但这就是我现在想出的。谷歌表明有许多解决方案可以将 Excel 绑定到 DataGridView，但对于 Word 几乎没有。事实上，Stackoverflow 也有很多关于将 Word 转换为 Excel 的答案。那么，为什么不将Word内容转成Excel，然后将Excel内容绑定到DGV呢？我知道这是一个环形交叉路口，但有总比没有好。以下是一些可能在这方面有所帮助的链接：

[以编程方式从 MS Word 转换为 Excel](https://stackoverflow.com/questions/698410/programatically-converting-from-ms-word-to-excel)

[在 Datagridview 中显示 excel 文件内容](https://stackoverflow.com/questions/7315782/display-excel-file-content-in-a-datagridview)

[http://www.dotneter.com/reading-excel-and-binding-to-datagridview-using-microsoft-office-interop-excel](http://www.dotneter.com/reading-excel-and-binding-to-datagridview-using-microsoft-office-interop-excel)

[将数据从 Excel 传输到 dataGridView](https://stackoverflow.com/questions/8206418/transfering-data-from-excel-to-datagridview?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T07:12:40.980

如果只是显示问题，则直接*`Word`*在您的 WPF 应用程序中显示文档。在这里，实现这一点的[***链接。***](http://www.c-sharpcorner.com/uploadfile/mahesh/viewing-word-documents-in-wpf/)

# puppet - 为什么 puppet 找不到我的班级？

> ID：13838559
> 
> 赞同：3
> 
> 时间：2012-12-12T11:17:54.853
> 
> 标签：puppet

我正在尝试实施此处找到的配方[https://github.com/puppetlabs/puppetlabs-firewall#readme](https://github.com/puppetlabs/puppetlabs-firewall#readme)我似乎犯了一个我看不到的菜鸟木偶错误。我有一个名为 mwsettings 的模块，它本身可以找到（mwsettings/init.pp 存储了一个用于加载一些模板的帮助程序并且可以正常工作），但是我的 site.pp 中有以下代码

```
Firewall {
  notify  => Exec['persist-firewall'],
  before  => Class['mwsettings::postfirewall'],
  require => Class['mwsettings::prefirewall'],
} 
```

炸毁

```
Error: Failed to apply catalog: Could not find dependency Class[Mwsettings::Prefirewall] for Firewall[100 accept mysql - XXXXXXXX] 
```

当我稍后在 site.pp 中的代码调用时

```
firewall { "100 accept mysql - $name":
    proto => 'tcp',
    action => 'accept',
    dport => 3306,
    source => $name,
} 
```

但是，看来我已经为预防火墙正确设置了清单：

```
# cat modules/mwsettings/manifests/prefirewall.pp 
class mwsettings::prefirewall {
  Firewall {
    require => undef,
  }
<snip> 
```

我在这里错过了一些非常微不足道的东西吗？由于这是我第一次使用 puppet 进行牛仔竞技表演，我什至不完全确定如何调试它。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T21:53:06.420

您指的是尚未声明的类。

如果您添加它，它应该可以工作：

```
include mwsettings::prefirewall

include mwsettings::postfirewall 
```

# javascript - Javascript特殊字符删除不起作用

> ID：13838567
> 
> 赞同：0
> 
> 时间：2012-12-12T11:18:29.487
> 
> 标签：javascript, jsp

我编写了一个 jsp 代码，其值来自其他 jsp，我需要删除字符串中的特殊字符。但我无法删除特殊字符。请帮忙

```
 <html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
       <script>
            function change(chars){
                var dchars=document.getElementById("chars").value;
                dchars = dchars.replaceAll("!@#$%^&*()+=[]\\\';,/{}|\":<>?", '');
            document.getElementById("chars").innerHTML=dchars;
            }
        </script>
    </head>
   <%
String res=request.getParameter("tes");
       %>
       <body onload="change(chars)" ><script>
        change(res)
</script>
     <div id="chars"> <%=res%></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:29:15.517

尝试这个....

```
 document.getElementById('chars').innerHTML = dchars; //div has no value.. 
```

假设通过特殊字符，您的意思是任何不是字母的东西，这是一个解决方案：

```
alert(dchars.replace(/[^a-zA-Z ]/g, "")); 
```

或者

```
alert(dchars.replace(/[^a-z0-9\s]/gi, '')); //will filter the string down to just alphanumeric values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:21:45.047

div 元素没有“价值”。您需要使用innerHtml insted：

```
document.getElementById('chars').innerHTML = dchars; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:16:12.510

使用 innerHTML 的问题是某些字符会自动转换为 HTML 实体，例如`&`转换为`&amp;`

```
function cleanCharsText(){

    var el = document.getElementById("chars");
    var txt = el.innerText || el.textContent;
    el.innerHTML = txt.replace( /[!@#$%^&*()+=\\[\]\';,/{}\|\":<>\?]/gi, '');
} 
```

但是，如果您`<span> text </span>`的 chars 元素中有以下内容，则当您运行上述函数时，html span 标签将被删除，因为我们只提取文本。

# php - PHP simplexml 和 xpath 访问节点值

> ID：13838569
> 
> 赞同：1
> 
> 时间：2012-12-12T11:18:34.523
> 
> 标签：php, xpath, xml-parsing, simplexml

我有来自 UPS Rates API 的以下 XML 响应，我需要仅在 RateType 节点 = 'RATED_ACCOUNT_SHIPMENT' 的情况下为每个 'RateReplyDetails' 获取 'ServiceType'、'Amount' 和 'Currency' 节点的值。

我的尝试如下，ServiceType 有效，但金额和货币无效。有人可以帮忙吗？

```
$RateReply = $fedex_xml->children("env", true)->Body->children("v13", true)->RateReply;

 foreach($RateReply->RateReplyDetails as $details){
    $service = $details->ServiceType;
    $amount = $details->xpath("/RatedShipmentDetails/ShipmentRateDetail/RateType['RATED_ACCOUNT_SHIPMENT']/TotalNetCharge/Amount");
    $currency = $details->xpath("/RatedShipmentDetails/ShipmentRateDetail/RateType['RATED_ACCOUNT_SHIPMENT']/TotalNetCharge/Currency");

 }

<soapenv:Envelope><env:Header/><env:Body><v13:RateReply><v13:HighestSeverity>SUCCESS</v13:HighestSeverity><v13:Notifications><v13:Severity>SUCCESS</v13:Severity><v13:Source>crs</v13:Source><v13:Code>0</v13:Code><v13:Message>Request was successfully processed. </v13:Message><v13:LocalizedMessage>Request was successfully processed. </v13:LocalizedMessage></v13:Notifications><ns1:TransactionDetail><ns1:CustomerTransactionId> *** Rate Available Services Request v13 using PHP ***</ns1:CustomerTransactionId></ns1:TransactionDetail><ns1:Version><ns1:ServiceId>crs</ns1:ServiceId><ns1:Major>13</ns1:Major><ns1:Intermediate>0</ns1:Intermediate><ns1:Minor>0</ns1:Minor></ns1:Version><v13:RateReplyDetails><v13:ServiceType>INTERNATIONAL_FIRST</v13:ServiceType><v13:PackagingType>YOUR_PACKAGING</v13:PackagingType><v13:DeliveryStation>DKKA </v13:DeliveryStation><v13:DeliveryDayOfWeek>THU</v13:DeliveryDayOfWeek><v13:DeliveryTimestamp>2012-12-13T09:00:00</v13:DeliveryTimestamp><v13:CommitDetails><v13:CommodityName>DOCUMENTS</v13:CommodityName><v13:ServiceType>INTERNATIONAL_FIRST</v13:ServiceType><v13:CommitTimestamp>2012-12-13T09:00:00</v13:CommitTimestamp><v13:DayOfWeek>THU</v13:DayOfWeek><v13:DestinationServiceArea>A4</v13:DestinationServiceArea><v13:BrokerToDestinationDays>0</v13:BrokerToDestinationDays><v13:CommitMessages><v13:Code>134</v13:Code><v13:Message>REQUEST COMPLETED</v13:Message></v13:CommitMessages><v13:DeliveryMessages> 9:00 A.M. IF NO CUSTOMS DELAY</v13:DeliveryMessages><v13:DocumentContent>DOCUMENTS_ONLY</v13:DocumentContent><v13:RequiredDocuments>INTERNATIONAL_AIRWAY_BILL</v13:RequiredDocuments></v13:CommitDetails><v13:DestinationAirportId>BUF</v13:DestinationAirportId><v13:IneligibleForMoneyBackGuarantee>false</v13:IneligibleForMoneyBackGuarantee><v13:OriginServiceArea>AM</v13:OriginServiceArea><v13:DestinationServiceArea>A4</v13:DestinationServiceArea><v13:SignatureOption>INDIRECT</v13:SignatureOption><v13:ActualRateType>PAYOR_ACCOUNT_SHIPMENT</v13:ActualRateType><v13:RatedShipmentDetails><v13:ShipmentRateDetail><v13:RateType>PAYOR_ACCOUNT_SHIPMENT</v13:RateType><v13:RateScale>0000000</v13:RateScale><v13:RateZone>GB001O</v13:RateZone><v13:PricingCode>ACTUAL</v13:PricingCode><v13:RatedWeightMethod>ACTUAL</v13:RatedWeightMethod><v13:CurrencyExchangeRate><v13:FromCurrency>UKL</v13:FromCurrency><v13:IntoCurrency>USD</v13:IntoCurrency><v13:Rate>1.59</v13:Rate></v13:CurrencyExchangeRate><v13:DimDivisor>0</v13:DimDivisor><v13:FuelSurchargePercent>17.5</v13:FuelSurchargePercent><v13:TotalBillingWeight><v13:Units>KG</v13:Units><v13:Value>1.0</v13:Value></v13:TotalBillingWeight><v13:TotalBaseCharge><v13:Currency>USD</v13:Currency><v13:Amount>129.74</v13:Amount></v13:TotalBaseCharge><v13:TotalFreightDiscounts><v13:Currency>USD</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalFreightDiscounts><v13:TotalNetFreight><v13:Currency>USD</v13:Currency><v13:Amount>129.74</v13:Amount></v13:TotalNetFreight><v13:TotalSurcharges><v13:Currency>USD</v13:Currency><v13:Amount>22.71</v13:Amount></v13:TotalSurcharges><v13:TotalNetFedExCharge><v13:Currency>USD</v13:Currency><v13:Amount>152.45</v13:Amount></v13:TotalNetFedExCharge><v13:TotalTaxes><v13:Currency>USD</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalTaxes><v13:TotalNetCharge><v13:Currency>USD</v13:Currency><v13:Amount>152.45</v13:Amount></v13:TotalNetCharge><v13:TotalRebates><v13:Currency>USD</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalRebates><v13:Surcharges><v13:SurchargeType>FUEL</v13:SurchargeType><v13:Description>Fuel</v13:Description><v13:Amount><v13:Currency>USD</v13:Currency><v13:Amount>22.71</v13:Amount></v13:Amount></v13:Surcharges></v13:ShipmentRateDetail></v13:RatedShipmentDetails><v13:RatedShipmentDetails><v13:ShipmentRateDetail><v13:RateType>RATED_ACCOUNT_SHIPMENT</v13:RateType><v13:RateScale>0000000</v13:RateScale><v13:RateZone>GB001O</v13:RateZone><v13:PricingCode>ACTUAL</v13:PricingCode><v13:RatedWeightMethod>ACTUAL</v13:RatedWeightMethod><v13:CurrencyExchangeRate><v13:FromCurrency>UKL</v13:FromCurrency><v13:IntoCurrency>UKL</v13:IntoCurrency><v13:Rate>1.0</v13:Rate></v13:CurrencyExchangeRate><v13:DimDivisor>0</v13:DimDivisor><v13:FuelSurchargePercent>17.5</v13:FuelSurchargePercent><v13:TotalBillingWeight><v13:Units>KG</v13:Units><v13:Value>1.0</v13:Value></v13:TotalBillingWeight><v13:TotalBaseCharge><v13:Currency>UKL</v13:Currency><v13:Amount>81.7</v13:Amount></v13:TotalBaseCharge><v13:TotalFreightDiscounts><v13:Currency>UKL</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalFreightDiscounts><v13:TotalNetFreight><v13:Currency>UKL</v13:Currency><v13:Amount>81.7</v13:Amount></v13:TotalNetFreight><v13:TotalSurcharges><v13:Currency>UKL</v13:Currency><v13:Amount>14.3</v13:Amount></v13:TotalSurcharges><v13:TotalNetFedExCharge><v13:Currency>UKL</v13:Currency><v13:Amount>96.0</v13:Amount></v13:TotalNetFedExCharge><v13:TotalTaxes><v13:Currency>UKL</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalTaxes><v13:TotalNetCharge><v13:Currency>UKL</v13:Currency><v13:Amount>96.0</v13:Amount></v13:TotalNetCharge><v13:TotalRebates><v13:Currency>UKL</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalRebates><v13:Surcharges><v13:SurchargeType>FUEL</v13:SurchargeType><v13:Description>Fuel</v13:Description><v13:Amount><v13:Currency>UKL</v13:Currency><v13:Amount>14.3</v13:Amount></v13:Amount></v13:Surcharges></v13:ShipmentRateDetail></v13:RatedShipmentDetails></v13:RateReplyDetails><v13:RateReplyDetails><v13:ServiceType>INTERNATIONAL_PRIORITY</v13:ServiceType><v13:PackagingType>YOUR_PACKAGING</v13:PackagingType><v13:DeliveryStation>DKKA </v13:DeliveryStation><v13:DeliveryDayOfWeek>THU</v13:DeliveryDayOfWeek><v13:DeliveryTimestamp>2012-12-13T10:30:00</v13:DeliveryTimestamp><v13:CommitDetails><v13:CommodityName>DOCUMENTS</v13:CommodityName><v13:ServiceType>INTERNATIONAL_PRIORITY</v13:ServiceType><v13:CommitTimestamp>2012-12-13T10:30:00</v13:CommitTimestamp><v13:DayOfWeek>THU</v13:DayOfWeek><v13:DestinationServiceArea>A4</v13:DestinationServiceArea><v13:BrokerToDestinationDays>0</v13:BrokerToDestinationDays><v13:CommitMessages><v13:Code>134</v13:Code><v13:Message>REQUEST COMPLETED</v13:Message></v13:CommitMessages><v13:DeliveryMessages>10:30 A.M. IF NO CUSTOMS DELAY</v13:DeliveryMessages><v13:DocumentContent>DOCUMENTS_ONLY</v13:DocumentContent><v13:RequiredDocuments>INTERNATIONAL_AIRWAY_BILL</v13:RequiredDocuments></v13:CommitDetails><v13:DestinationAirportId>BUF</v13:DestinationAirportId><v13:IneligibleForMoneyBackGuarantee>false</v13:IneligibleForMoneyBackGuarantee><v13:OriginServiceArea>AM</v13:OriginServiceArea><v13:DestinationServiceArea>A4</v13:DestinationServiceArea><v13:SignatureOption>INDIRECT</v13:SignatureOption><v13:ActualRateType>PAYOR_ACCOUNT_SHIPMENT</v13:ActualRateType><v13:RatedShipmentDetails><v13:ShipmentRateDetail><v13:RateType>PAYOR_ACCOUNT_SHIPMENT</v13:RateType><v13:RateScale>0000000</v13:RateScale><v13:RateZone>GB001O</v13:RateZone><v13:PricingCode>ACTUAL</v13:PricingCode><v13:RatedWeightMethod>ACTUAL</v13:RatedWeightMethod><v13:CurrencyExchangeRate><v13:FromCurrency>UKL</v13:FromCurrency><v13:IntoCurrency>USD</v13:IntoCurrency><v13:Rate>1.59</v13:Rate></v13:CurrencyExchangeRate><v13:DimDivisor>0</v13:DimDivisor><v13:FuelSurchargePercent>17.5</v13:FuelSurchargePercent><v13:TotalBillingWeight><v13:Units>KG</v13:Units><v13:Value>1.0</v13:Value></v13:TotalBillingWeight><v13:TotalBaseCharge><v13:Currency>USD</v13:Currency><v13:Amount>98.46</v13:Amount></v13:TotalBaseCharge><v13:TotalFreightDiscounts><v13:Currency>USD</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalFreightDiscounts><v13:TotalNetFreight><v13:Currency>USD</v13:Currency><v13:Amount>98.46</v13:Amount></v13:TotalNetFreight><v13:TotalSurcharges><v13:Currency>USD</v13:Currency><v13:Amount>17.23</v13:Amount></v13:TotalSurcharges><v13:TotalNetFedExCharge><v13:Currency>USD</v13:Currency><v13:Amount>115.69</v13:Amount></v13:TotalNetFedExCharge><v13:TotalTaxes><v13:Currency>USD</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalTaxes><v13:TotalNetCharge><v13:Currency>USD</v13:Currency><v13:Amount>115.69</v13:Amount></v13:TotalNetCharge><v13:TotalRebates><v13:Currency>USD</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalRebates><v13:Surcharges><v13:SurchargeType>FUEL</v13:SurchargeType><v13:Description>Fuel</v13:Description><v13:Amount><v13:Currency>USD</v13:Currency><v13:Amount>17.23</v13:Amount></v13:Amount></v13:Surcharges></v13:ShipmentRateDetail></v13:RatedShipmentDetails><v13:RatedShipmentDetails><v13:ShipmentRateDetail><v13:RateType>RATED_ACCOUNT_SHIPMENT</v13:RateType><v13:RateScale>0000000</v13:RateScale><v13:RateZone>GB001O</v13:RateZone><v13:PricingCode>ACTUAL</v13:PricingCode><v13:RatedWeightMethod>ACTUAL</v13:RatedWeightMethod><v13:CurrencyExchangeRate><v13:FromCurrency>UKL</v13:FromCurrency><v13:IntoCurrency>UKL</v13:IntoCurrency><v13:Rate>1.0</v13:Rate></v13:CurrencyExchangeRate><v13:DimDivisor>0</v13:DimDivisor><v13:FuelSurchargePercent>17.5</v13:FuelSurchargePercent><v13:TotalBillingWeight><v13:Units>KG</v13:Units><v13:Value>1.0</v13:Value></v13:TotalBillingWeight><v13:TotalBaseCharge><v13:Currency>UKL</v13:Currency><v13:Amount>62.0</v13:Amount></v13:TotalBaseCharge><v13:TotalFreightDiscounts><v13:Currency>UKL</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalFreightDiscounts><v13:TotalNetFreight><v13:Currency>UKL</v13:Currency><v13:Amount>62.0</v13:Amount></v13:TotalNetFreight><v13:TotalSurcharges><v13:Currency>UKL</v13:Currency><v13:Amount>10.85</v13:Amount></v13:TotalSurcharges><v13:TotalNetFedExCharge><v13:Currency>UKL</v13:Currency><v13:Amount>72.85</v13:Amount></v13:TotalNetFedExCharge><v13:TotalTaxes><v13:Currency>UKL</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalTaxes><v13:TotalNetCharge><v13:Currency>UKL</v13:Currency><v13:Amount>72.85</v13:Amount></v13:TotalNetCharge><v13:TotalRebates><v13:Currency>UKL</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalRebates><v13:Surcharges><v13:SurchargeType>FUEL</v13:SurchargeType><v13:Description>Fuel</v13:Description><v13:Amount><v13:Currency>UKL</v13:Currency><v13:Amount>10.85</v13:Amount></v13:Amount></v13:Surcharges></v13:ShipmentRateDetail></v13:RatedShipmentDetails></v13:RateReplyDetails><v13:RateReplyDetails><v13:ServiceType>INTERNATIONAL_ECONOMY</v13:ServiceType><v13:PackagingType>YOUR_PACKAGING</v13:PackagingType><v13:DeliveryStation>DKKA </v13:DeliveryStation><v13:DeliveryDayOfWeek>MON</v13:DeliveryDayOfWeek><v13:DeliveryTimestamp>2012-12-17T16:30:00</v13:DeliveryTimestamp><v13:CommitDetails><v13:CommodityName>DOCUMENTS</v13:CommodityName><v13:ServiceType>INTERNATIONAL_ECONOMY</v13:ServiceType><v13:CommitTimestamp>2012-12-17T16:30:00</v13:CommitTimestamp><v13:DayOfWeek>MON</v13:DayOfWeek><v13:DestinationServiceArea>A4</v13:DestinationServiceArea><v13:BrokerToDestinationDays>0</v13:BrokerToDestinationDays><v13:CommitMessages><v13:Code>134</v13:Code><v13:Message>REQUEST COMPLETED</v13:Message></v13:CommitMessages><v13:DeliveryMessages> 4:30 P.M. IF NO CUSTOMS DELAY</v13:DeliveryMessages><v13:DocumentContent>DOCUMENTS_ONLY</v13:DocumentContent><v13:RequiredDocuments>INTERNATIONAL_AIRWAY_BILL</v13:RequiredDocuments></v13:CommitDetails><v13:DestinationAirportId>BUF</v13:DestinationAirportId><v13:IneligibleForMoneyBackGuarantee>false</v13:IneligibleForMoneyBackGuarantee><v13:OriginServiceArea>AM</v13:OriginServiceArea><v13:DestinationServiceArea>A4</v13:DestinationServiceArea><v13:SignatureOption>INDIRECT</v13:SignatureOption><v13:ActualRateType>PAYOR_ACCOUNT_SHIPMENT</v13:ActualRateType><v13:RatedShipmentDetails></v13:RatedShipmentDetails><v13:RatedShipmentDetails><v13:ShipmentRateDetail><v13:RateType>RATED_ACCOUNT_SHIPMENT</v13:RateType><v13:RateScale>0000000</v13:RateScale><v13:RateZone>GB001O</v13:RateZone><v13:PricingCode>ACTUAL</v13:PricingCode><v13:RatedWeightMethod>ACTUAL</v13:RatedWeightMethod><v13:CurrencyExchangeRate><v13:FromCurrency>UKL</v13:FromCurrency><v13:IntoCurrency>UKL</v13:IntoCurrency><v13:Rate>1.0</v13:Rate></v13:CurrencyExchangeRate><v13:DimDivisor>0</v13:DimDivisor><v13:FuelSurchargePercent>17.5</v13:FuelSurchargePercent><v13:TotalBillingWeight><v13:Units>KG</v13:Units><v13:Value>1.0</v13:Value></v13:TotalBillingWeight><v13:TotalBaseCharge><v13:Currency>UKL</v13:Currency><v13:Amount>49.7</v13:Amount></v13:TotalBaseCharge><v13:TotalFreightDiscounts><v13:Currency>UKL</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalFreightDiscounts><v13:TotalNetFreight><v13:Currency>UKL</v13:Currency><v13:Amount>49.7</v13:Amount></v13:TotalNetFreight><v13:TotalSurcharges><v13:Currency>UKL</v13:Currency><v13:Amount>8.7</v13:Amount></v13:TotalSurcharges><v13:TotalNetFedExCharge><v13:Currency>UKL</v13:Currency><v13:Amount>58.4</v13:Amount></v13:TotalNetFedExCharge><v13:TotalTaxes><v13:Currency>UKL</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalTaxes><v13:TotalNetCharge><v13:Currency>UKL</v13:Currency><v13:Amount>58.4</v13:Amount></v13:TotalNetCharge><v13:TotalRebates><v13:Currency>UKL</v13:Currency><v13:Amount>0.0</v13:Amount></v13:TotalRebates><v13:Surcharges><v13:SurchargeType>FUEL</v13:SurchargeType><v13:Description>Fuel</v13:Description><v13:Amount><v13:Currency>UKL</v13:Currency><v13:Amount>8.7</v13:Amount></v13:Amount></v13:Surcharges></v13:ShipmentRateDetail></v13:RatedShipmentDetails></v13:RateReplyDetails></v13:RateReply></env:Body></soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:36:55.497

```
//amount
"/RatedShipmentDetails/ShipmentRateDetail[RateType = 'RATED_ACCOUNT_SHIPMENT']/TotalNetCharge/Amount"

//currency
"/RatedShipmentDetails/ShipmentRateDetail[RateType = 'RATED_ACCOUNT_SHIPMENT']/TotalNetCharge/Currency" 
```

看到他们在[这里跑](http://codepad.org/T18t1omG)

xpath 的来源：[文档](http://www.w3.org/TR/xpath/) [示例](http://msdn.microsoft.com/en-us/library/ms256086.aspx)

## 更新

```
foreach ($fedex_xml->xpath("//RateReply//RateReplyDetails") as $details) {

    $amounts = $details->xpath("./RatedShipmentDetails/ShipmentRateDetail[RateType = 'RATED_ACCOUNT_SHIPMENT']/TotalNetCharge/Amount");
    $currencies = $details->xpath("./RatedShipmentDetails/ShipmentRateDetail[RateType = 'RATED_ACCOUNT_SHIPMENT']/TotalNetCharge/Currency");

    var_dump($amounts);
    var_dump($currencies);
} 
```

我使用 xpath 表达式来选择 every `RateReplyDetails`，然后使用其他一些 xpath 表达式来提取值。请注意，`./`这些开头的部分非常重要，它表示解释当前范围内的 xpath 表达式（RateReplyDetails 节点）。

# ruby - 修改字符串实例

> ID：13838578
> 
> 赞同：0
> 
> 时间：2012-12-12T11:18:56.223
> 
> 标签：ruby, string, mutable

我有一个字符串：

```
str="D\\projects\\myown\\java" 
```

我将此字符串分配给两个变量，例如：

```
str1=str
str2=str 
```

在我做了以下操作后：

```
idgb1=str1.gsub!("\\","_") 
```

我得到`str1`了`D_projects_myown_java`和`str2`是一样的。为什么会这样？我不想`str2`改变它的价值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T11:22:56.503

`str1`并且`str2`只是对 的引用`str`，字符串不会复制到这些变量中。并`String#gsub!`更新字符串。

如果你想保持`str2`完整，你需要这样做：

```
str2 = str.dup 
```

或者

```
str2 = str.clone 
```

此外，如果您使用`String#gsub`而不是`String#gsub!`,`str`并且`str2`不会更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T01:37:09.053

有关更多信息，您可能还想阅读浅拷贝和深拷贝，这里有一个解释这个概念的维基百科链接： [在此处输入链接描述](http://en.wikipedia.org/wiki/Object_copy)

另外，我想补充一下，'！通常标识所谓的“爆炸方法”。这些方法最终会改变它们被调用的变量的状态。

此链接涉及 bang 方法，实际上有一个与您描述的问题非常相似的示例： [在此处输入链接描述](http://dablog.rubypal.com/2007/8/15/bang-methods-or-danger-will-rubyist)

希望这可以帮助

# svn - svn mergeinfo 加星标的修订

> ID：13838581
> 
> 赞同：5
> 
> 时间：2012-12-12T11:19:03.000
> 
> 标签：svn, merge

我正在将分支上的修订合并回主干（使用 TortoiseSVN 1.7.10，Build 23359 - 64 位）。

当我运行合并信息命令时，例如

```
svn mergeinfo https://url/code/branches/project.2.5/@{2012-12-11} https://url/code/trunk -R --show-revs=eligible 
```

我收到了一个标有星号的修订版

```
r12345* 
```

如果我检查主干上的 svn:mergeinfo 属性，该修订号看起来像是合并了，例如

```
/code/branches/project.2.5:10000-15000 
```

所以，如果我理解正确的话，那个版本已经被合并了，那为什么它仍然被认为是*合格*的呢？

（对于上下文，我有一个日常任务来监视所有分支并报告它们中的任何一个有任何未完成的合并，这样我就可以跟踪任何有可能从主干严重偏离的分支。我想知道我是否可以忽略此修订或是否需要特别注意。）

结果中的星号是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:06:08.677

回答我自己的问题，但在一位同事指出[手册中的合并信息部分之后](http://www.open.collab.net/community/subversion/articles/merge-info.html)，特别是*Mergeinfo Inheritance 和 Non-Inheritable Ranges*部分。

基本上问题在于路径中存在冲突`svnmergeinfo`的属性 - 因此，虽然在根级别看起来修订已被合并，但在树的下方有目录，更接近在不合格修订中实际更改的文件，包含相互矛盾的信息。

在我的情况下，这可能是因为我一直在手动更新根级别属性，而没有意识到某些子目录有自己的、冲突的、先前的 mergeinfo 值。

# sql-server - 如何使用 SSIS 将区分大小写的数据从 Oracle 导入 SQL Server

> ID：13838582
> 
> 赞同：1
> 
> 时间：2012-12-12T11:19:02.763
> 
> 标签：sql-server, oracle, ssis, migration, case-sensitive

我正在尝试使用 SSIS 将数据从 Oracle 导入 SQL Server。

问题是我`VARCHAR2(200)`在 Oracle DB 中具有区分大小写数据的表之一中有一个数据类型的 PK。因此，SSIS 在导入数据时正在抛出

> *违反PK，不能在PK中插入重复值*

我应该如何解决这个问题？[这个](https://stackoverflow.com/questions/7371234/problem-with-database-collation-change-sql-server-2008)除了接受答案的任何解决方案，因为我不可行删除并创建数据库以启用区分大小写的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:12:20.607

您不需要重新创建数据库。您只需要设置区分大小写的列。

在设计模式下打开表格，选择您的列并按排序规则行。

![表设计模式](../Images/af888b19534ee757446f924bc5cd689e.png)

只需选中“区分大小写”复选框，按 OK 并保存表格。现在它会好的。

![校对编辑](../Images/c9c6340781e58f3dce0f222ca86e0b59.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:56:33.433

如果您可以添加新列，请将其排序规则设置为区分大小写的排序规则，重新加载记录，然后相应地重命名它们：

```
SELECT 1 AS TEST INTO #TT
ALTER TABLE #TT ADD new_pk_case_sensitive VARCHAR(200) COLLATE Latin1_General_CS_AS 
```

# git - 如何显示樱桃挑选的提交顺序

> ID：13838584
> 
> 赞同：1
> 
> 时间：2012-12-12T11:19:06.490
> 
> 标签：git

有时我会收到来自主分支的一组提交，我应该将这些提交提交`cherry-pick`给我们的发布分支。但是，由于我收到的集合是无序的，我会手动检查 git 日志，以确保我选择提交的顺序与它们出现在主分支上的顺序相同。

如何使用命令执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:26:30.960

你不需要做任何事情——`git cherry-pick`会自动以正确的顺序应用提交。命令行中的顺序无关紧要。

# css - 父级之外的子 div

> ID：13838585
> 
> 赞同：1
> 
> 时间：2012-12-12T11:19:08.843
> 
> 标签：css, css-float, overflow

我目前正在设计一个网站。但是在我的一个父 div`box_t`中，孩子 div`box_t1`和.`box_t2``box_t`

**网页**：

```
<div id="main_container">
  <div class="box_t">
    <div class="box_t1">
      <h2>Start</h2>
    </div>
    <div class="box_t2">
      <div class="boxt21">
        <h2>Name</h2>
      </div>
      <div class="boxt22">
        Hi
      </div>
    </div>
  </div>
</div> 
```

**CSS**：

```
#main_container
{
  width:960px;
  margin:0 auto;
}
.box_t
{
  padding:20px 14px 20px 15px;
  color:#07337a;
  overflow:hidden;
}
.box_t h2
{
  font-family: "Lucida Grande", "Lucida Sans Unicode", "Lucida Sans", Geneva, Verdana, sans-serif;
}
.box_t1
{
  width:340px;
  float:left;
}
.box_t2
{
  float:left;
}
.box_t2
{
  margin-left:255px;
}
.boxt21
{
  float:left;
}
.boxt22
{
  float:left;
} 
```

![Dreamweaver 设计和代码视图](../Images/ab842fd04fbf55fb6facd15dea23dbed.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:30:14.067

您的子 div 不会超出父 div，但您在 Dream Waver 上看到的内容是由于 Dream Waver 显示 html 内容的风格。

在浏览器中检查代码的实际呈现

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:28:19.313

您应该对父块使用 clearfix。有很多方法可以`overflow:hidden`在底部元素中设置或设置`clear: both`父元素中的空块。我最喜欢的方式是：

```
 // for modern browsers
  .clearfix:before,
  .clearfix:after {
     content: "";
     display: table;
  }
  .clearfix:after {
     clear: both;
  }

  /* IE6-7 */
  .clearfix {
     zoom: 1;
  } 
```

在你的父 div 上使用它的类，就是这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T11:46:14.793

每当您使用`float`div 时。请记住`clear`浮动。整个问题是`floated objects do not add to the height`正确驻留的对象的问题。因此子 div 似乎在父 div 之外。我们需要做的就是清除浮动，整个问题就消失了。将这个空 div 放在最后一个浮动对象之后：

`<div style="clear: both;"></div>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:24:38.877

你需要清除你的浮动

```
<div id="main_container">
<div class="box_t">
            <div class="box_t1">
                <h2>Start</h2>
            </div>
            <div class="box_t2">
                <div class="boxt21">
                    <h2>Name</h2>
                </div>
                <div class="boxt22">
                    Hi
                </div>
            </div> 
```

```
 </div> 
```

有一个更好的方法可以做到这一点，创建一个名为`clearfix`并将其添加到 br 的类......实际上你甚至应该包括一个 br......但是你去了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-08T07:16:28.657

我建议在开发布局时在所有 div 上使用边框（style="border:1px solid red"），这有助于了解 div 的确切位置。

这有助于不使用 Dreamweaver 或其他编辑工具的开发人员。

# imagemagick - Magick++ 是否提供底层 API 的所有内容？

> ID：13838588
> 
> 赞同：0
> 
> 时间：2012-12-12T11:19:10.520
> 
> 标签：imagemagick, magick++, language-binding

Magick++ 是否让您做 ImageMagick 可以做的所有事情？快速浏览文档并不能回答这个问题，例如，我找不到 Magick++ 相当于[MagickSelectiveBlurImage](http://www.imagemagick.org/api/magick-image.php#MagickSelectiveBlurImage)。

如果 Magick++ 以这种方式受到限制，是否可以使用 C API 中的一些方法来填补空白？即 2 个 API 可以互操作吗？

PythonMagick 怎么样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:51:43.320

Magick++ API 可能没有跟上 ImageMagick API 的变化。ImageMagick API 仍然可以通过 MagickLib 命名空间使用，如果您研究 Magick++ Image 类的工作原理，您会发现可以使用 C API 并将结果传递给 Image。可以从 Magick++ Image 继承并以这种方式添加新方法。

PythonMagick 基于 Magick++ API，因此它支持 Magick++ 所做的事情。

Bob Friesenhahn（Magick++ 作者）

# java - byte[] 到 bufferedImage 的转换给出了 null

> ID：13838589
> 
> 赞同：1
> 
> 时间：2012-12-12T11:19:12.963
> 
> 标签：java, image, awt, javax.imageio

我正在尝试将字节 [] 数组转换为缓冲图像，这样我就可以调整图像的大小..但问题是转换总是变成空值。这是我的代码..

```
 ByteArrayInputStream bais = new ByteArrayInputStream(user.getUser_image());
 //Here user.getUser_image() returns byte[] returned from server..
 try {
      BufferedImage image = ImageIO.read(bais);
      System.out.println("============><================"+image);//Here it prints null
      BufferedImage scaledImage = Scalr.resize(image,48);
 }
 .....and so on 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:33:21.027

这意味着 ImageIO 类无法选择合适的 ImageReader。这样做的目的可能是损坏的字节数组或不受支持的图像类型。尝试调试它。

# html - 为什么 Web 服务不能返回字典？

> ID：13838592
> 
> 赞同：1
> 
> 时间：2012-12-12T11:19:16.240
> 
> 标签：html, web-services, asmx

我有一个 ASMX Web 服务，它返回一个字典，但每次发布时都会出错

> 类型 System.Collections.Generic.Dictionary`2[[System.String, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[BL.Customer, BL, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] 不受支持，因为它实现了 IDictionary

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:21:44.320

最好发布您实际收到的错误，但随着它的进展....... 默认情况下，Web 服务不支持 IDictionaries，因此最好序列化您正在解析的字典。[本文](http://msdn.microsoft.com/en-us/magazine/cc164135.aspx)展示了如何序列化 IDictionary

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:03:17.493

即使您可以序列化字典，SOAP 也没有字典类型结构的表示。客户端不会知道该服务正在发送字典。

# c++ - C++ - 读取.tga文件时访问冲突读取位置

> ID：13838594
> 
> 赞同：0
> 
> 时间：2012-12-12T11:19:25.433
> 
> 标签：c++, file-io

我正在写一个 .tga 阅读器。我可以完美地读取标题，然后我想读取文件的数据部分，但如果我到了那里，它会给我错误：

```
Unhandled exception at 0x76ffa2ce in TGALoader.exe 0xC0000005: Access violation reading location 0xffff0008 
```

文件的长度是`65580`，我在长度标头`65536`之后读取`18 bytes`。

我当前的代码是（我删掉了不重要的部分）：

```
// Texture variables    
GLint   bitsPP;
GLsizei width;
GLsizei height;
GLubyte *imgData;
/////////////////////////////////////////////////

file.seekg( 0, std::ios::end );
std::cout << file.tellg() << "\n"; // 65580
file.seekg( 0, std::ios::beg );

file.read( ( char* )&tGAHeader, sizeof( tGAHeader ) );

texture->width  = tGAHeader[13] * 256 + tGAHeader[12];
texture->height = tGAHeader[15] * 256 + tGAHeader[14];
texture->bitsPP = tGAHeader[16];

short bytesPP = texture->bitsPP / 8; // 4
unsigned int imgSize = texture->width * texture->height * bytesPP; // 65536

texture->imgData = new GLubyte[imgSize];

file.read( ( char* )&texture->imgData, imgSize ); // Access violation reading location 
```

我无法想象有什么问题，所以我希望有人能帮助我。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:58:00.073

改变

```
file.read( ( char* )&texture->imgData, imgSize ) 
```

经过

```
file.read( ( char* )texture->imgData, imgSize ) 
```

`texture->imgData`只是一个指针，不要在第二个间接级别使用它

# objective-c - iOS 将 3D 模型插入 Open GL 游戏

> ID：13838598
> 
> 赞同：-1
> 
> 时间：2012-12-12T11:19:34.403
> 
> 标签：objective-c, ios, opengl-es

我想制作我的第一个 3D 游戏。我决定在 Open GL 中制作。我正在使用新的 Open GL 游戏项目附带的 Apple 代码。我知道如何导入自己的对象并对其进行操作。我想知道是否有人可以告诉我在哪里可以找到好的教程或知道如何显示对象。事实上，我知道在默认项目中，两个立方体都是相同的模型，显示两次。可悲的是，我找不到显示它们并应用不同颜色的部分在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:52:12.043

> 可悲的是，我找不到显示它们并应用不同颜色的部分在哪里。

这只是告诉你，你需要先学习 OpenGL 的基础知识。

我们可以向您突出显示负责的行，但您所看到的只是属性指针、索引数组和奇怪的东西的“奇怪”分配，调用制服传递。

# java - 在 Java 中编写意味着“什么都不做”的注释的常见做法是什么？

> ID：13838599
> 
> 赞同：2
> 
> 时间：2012-12-12T11:19:36.927
> 
> 标签：java, exception, comments

我有下一个代码：

```
InputStream is = new FileInputStream("test.txt");
// do something
try {
    is.close();
} catch(IOException ex) {
    // do nothing
    // or
    // NOP
    // or something else?
} 
```

问题是 Java 世界中是否有任何评论约定什么都不做？就像我的情况一样，如果无法关闭 InputStream，我什么也不想做。“NOP”评论是否可以接受？它来自汇编程序，意思是“无操作”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T11:21:34.030

```
try {
    ...
} catch (IOException ignored) {} 
```

完整、清晰、简洁。

* * *

但是您应该使用类似[Apache Commons IO`IOUtils.closeQuietly(InputStream)`](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#closeQuietly%28java.io.InputStream%29)的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T11:23:54.803

没关系，虽然我比其他人更经常看到 NOP，但没有明确的约定。对我来说，重要的是标记您忽略异常的*原因。*我个人更喜欢“//NOP - Explanation”风格，例如

```
//NOP - If we can't read this input file it doesn't matter as next block will try another 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T11:23:08.937

没有标准的做法，甚至没有标准说你必须在那里发表评论。如果有指南的话，它会在贵公司的编码标准中。如果没有，请使用您喜欢的任何东西。

我只能说一件事。确保清楚你的意思。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T11:24:21.407

据我所知，没有约定。我通常把 // pass，用于 python 语句。

# jquery - 如何使用 Objective C 以编程方式触发 href 链接

> ID：13838600
> 
> 赞同：0
> 
> 时间：2012-12-12T11:19:37.290
> 
> 标签：jquery, objective-c, hyperlink

我需要做的是，当我单击一个按钮或执行某个操作时，我想让 webview 传输，就像我单击了一个 href 链接一样，该函数应该使用 href id 来知道要转到哪个链接。

这是我到目前为止所尝试的：

```
 [WebView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"window.location.hash='%@'",footNoteNum]];
    float offsetX = [[WebView stringByEvaluatingJavaScriptFromString:@"window.pageXOffset"] floatValue];
    NSLog(@"offsetX %f", offsetX);
    int page = ceil(offsetX/748);

    page++;
    NSLog(@"page %i", page);
    [self scrollToPage:page]; 
```

但是当 webview 大于 25 页时，它开始为 offsetX 提供错误的数字。

所以我想如果我可以像一个可以动态单击的 href 链接那样做，那么当我使用滚动条时，它会将我带到 webview 中的正确位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:34:41.573

我完成类似问题的方式（单击特定的 tableView 行并将其转到同一场景中 UIWebView 中的特定位置）是在 html 中嵌入锚点，然后直接导航到它们。当然，这假设您可以控制以这种方式导航到脚注。

锚点位于 html 中的每个页面上，就在每个脚注的文本之前，如下所示：

```
<a name=footnote12> 
```

然后在您的代码中，您将拥有：

```
 // baseURLForPageWithoutAnchor is the NSURL* for the page prior to going to any footnotes

    NSString* anchor = [@"#" stringByAppendingFormat:@"footnote%d", footNoteNum];
    NSString* baseForAnchor = baseURLForPageWithoutAnchor.absoluteString;
    NSURL* anchorURL = [NSURL URLWithString:[baseForAnchor stringByAppendingString:anchor]];
    [self.nestedWebView loadRequest:[NSURLRequest requestWithURL:anchorURL]]; 
```

这将直接跳转到锚点，并且无需计算您一直尝试按百分比滚动的 UIWebView 的百分比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T01:09:26.800

```
- (void)viewDidLoad
{
   [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"YOUR_STRING_WITHOUT_ANCHOR"]]];
}

- (void)webViewDidStartLoad:(UIWebView *)_webView {
   [self.webView stringByEvaluatingJavaScriptFromString:@"document.getElementById('YOUR_ANCHOR_HERE_WITHOUT_#').scrollIntoView(true);"];
} 
```

# entity-framework - 找不到类型或命名空间名称“FixupCollection”

> ID：13838601
> 
> 赞同：0
> 
> 时间：2012-12-12T11:19:41.837
> 
> 标签：entity-framework, entity-framework-4, poco, efpocoadapter

我使用 EF POCO 模板生成了 POCO。当我构建我的项目时，它告诉我缺少对 FixupCollection 的引用。我错过了哪个图书馆参考资料？

这是错误： *找不到类型或命名空间名称“FixupCollection”（您是否缺少 using 指令或程序集引用？）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:52:26.663

我重新运行模板工具以重新生成模型类，问题就消失了。

我看到问题的发生是因为（我不知道如何）我不小心删除了定义`FixupCollection<T>`模板工具生成的类的代码。此代码生成并显示在解决方案资源管理器`YourModelName.cs`下的文件`YourModelName.tt`中。

我正在回答我自己的问题，因为我在这个问题上被耽搁了几个小时，我用谷歌搜索，但找不到一个可以提供关于这个主题的帮助的链接。只有少数其他链接都在问同样的问题，但没有答案。

# c# - 如何在 C# 中使用子元素反序列化 XML？

> ID：13838607
> 
> 赞同：1
> 
> 时间：2012-12-12T11:20:07.187
> 
> 标签：c#, xml, xml-serialization

我正在尝试序列化/反序列化以下 XML 代码结构：

```
<Person>
    <Name/>
    <Age/>
    <Address>
        <BuildingNumber/>
        <Street/>
        <Town/>
        <PostCode/>
    </Address>
</Person> 
```

使用类

```
public class Person {
    public string Name { get; set; }
    public int Age { get; set; }
    public Address Address { get; set; }
}

public class Address {
    public string BuildingNumber { get; set; }
    public string Street { get; set; }
    public string Town { get; set; }
    public string PostCode { get; set; }
} 
```

我`IXmlSerializable`在这两个类上都实现了（我知道，对于这个特定的例子来说，它是过度设计的，但它是我正在处理的一个相当复杂的项目所必需的！），序列化工作正常，但反序列化却不行。

问题出现在`Person.ReadXml()`方法中，我将其写为：

```
public void ReadXml(XmlReader reader) {
    reader.ReadStartElement();
    if (!reader.IsEmptyElement) {
        Name = reader.ReadElementContentAsString("Name", string.Empty);
        Age = reader.ReadElementContentAsInt("Age", string.Empty);
        Address = (Address)reader.ReadElementContentAs(typeof(Address), null, "Address", string.Empty);
        // Also failed: Address = (Address)reader.ReadElementContentAsObject("Address", string.Empty);
    }
    reader.ReadEndElement();
} 
```

初始化的最后一行`Address`是抛出异常：

> 不能对具有子元素的元素调用 ReadElementContentAs() 方法。（Xml 异常）

基本上，我将如何处理带有子元素的元素`IXmlSerializable`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:26:09.453

我想你可以简单地`XmlSerializer`在这里使用：

```
XmlSerializer serializer = new XmlSerializer(typeof(Person));
Person person = (Person)serializer.Deserialize(reader); 
```

序列化也很简单：

```
serializer.Serialize(stream, person); 
```

如果您需要自定义 xml（不是您当前的情况），那么只需使用 xml 序列化属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:54:37.347

你可以这样尝试：

```
public void ReadXml(XmlReader reader)
{
    reader.MoveToContent();
    reader.ReadStartElement();
    Name = reader.ReadElementString("Name");
    Age = Convert.ToInt32(reader.ReadElementString("Age"));
    var xmlSerializer = new XmlSerializer(typeof (Address));
    Address = (Address) xmlSerializer.Deserialize(reader);
    reader.ReadEndElement();
} 
```

*   请注意，每次都为地址新建一个 XmlSerializer 可能效率低下，并且缓存它可能是一个好主意。
*   这将独立于地址是否实现 IXmlSerializable
*   正如其他人所说，仅将 IXmlSerializable 用作最后的手段，如果属性可以工作，这是一种更好的方法。

# linux - 以非 root 用户身份运行服务

> ID：13838610
> 
> 赞同：1
> 
> 时间：2012-12-12T11:20:29.167
> 
> 标签：linux, service, administration

我正在以非特权用户身份运行一些服务（apache、mongo、memcached）。如果机器重新启动或崩溃，确保它们自动启动的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:28:27.680

我当时解决这种方式的方法是让一个脚本每分钟从 cron 运行一次。该脚本然后检查以确保我想要运行的所有内容实际上都在运行，如果没有，则启动它。

我可能不会认为这是“最好的方法”，但它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:15:07.347

另一个可能的选择是使用*monit*或*mon*工具。他们能够监视正在运行的服务并重新启动它们。

# php - PHP 5，具有静态/私有、$this 和 self:: 的类和变量/方法范围

> ID：13838615
> 
> 赞同：0
> 
> 时间：2012-12-12T11:21:03.283
> 
> 标签：php, class, scope

我有这个：

```
class Database{    
    private $name = '';
    private $user = '';
    private $password = '';   
    private $host = 'localhost';
    private $prefix = '';   
    private $connection_handle = null;

    private function Connect(){
        $this->connection_handle = mysql_connect($this->host, $this->user, $this->password); 

        if( !$this->connection_handle ){
            die( 'Could not connect: ' . mysql_error() );
        }else{
            mysql_select_db( $this->name, $this->connection_handle );
        }
    }

    private function Close(){
        mysql_close( $this->connection_handle );
    } 

    public static function Query( $query ){
        $this->Connect();   
            $result = mysql_query( $query, $this->connection_handle );
            if( !$result ){
                die( 'Error: ' . mysql_error() );
            }else{
                $DatabaseQuery = new DatabaseQuery();
                    $DatabaseQuery->result = $result;       
                    $DatabaseQuery->mysql_num_rows = mysql_num_rows($result);

                return $DatabaseQuery;
            }
        $this->Close();
    } 
} 
```

我已将 Query 设为静态，因为它将被称为“Database::Query” 其他函数不需要由任何其他类访问，因此我将它们设为私有...

从 Query 函数访问 Connect 函数时出现此错误。

*“不在对象上下文中使用 $this”*

考虑到私有使这些变量对此类私有但对其中的所有方法都可用，我在获取函数范围时遇到了问题......

我可以做 self::Connect() 但我对它的理解不足以保证使用它......

你能解释一下 self:: 和 %this-> 之间的区别吗？

我也无法访问我的私有变量，并且它们真的不需要在此类之外访问，因此我再次将它们设为私有......但是 $this->connection_handle 没有该变量的范围。

我真的需要将它们全部公开吗？必须有一种方法使它们仅可用于此类及其扩展吗？

**- - - - - - - - - - - 编辑：///**

我最终将所有变量设为私有静态。这是一种可接受的方式吗？

**- - - - - - - - - - - 编辑：///**

我现在得到了这个代码：

```
class Database{    
    private static $name = '';
    private static $user = '';
    private static $password = '';   
    private static $host = 'localhost';
    private static $prefix = '';   
    private static $connection_handle = null;

    private static function Connect(){
        self::$connection_handle = mysql_connect(self::$host, self::$user, self::$password); 

        if( !self::$connection_handle ){
            die( 'Could not connect: ' . mysql_error() );
        }else{
            mysql_select_db( self::$name, self::$connection_handle );
        }
    }

    private static function Close(){
        mysql_close( self::$connection_handle );
    } 

    public static function Query( $query ){
        self::Connect();   
            $result = mysql_query( $query, self::$connection_handle );
            if( !$result ){
                die( 'Error: ' . mysql_error() );
            }else{
                $DatabaseQuery = new DatabaseQuery();
                    $DatabaseQuery->$result = $result;       
                    $DatabaseQuery->$mysql_num_rows = mysql_num_rows($result);

                return &$DatabaseQuery;
            }
        self::Close();
    } 
} 
```

但是返回指针引用不起作用？我实际上对 PHP 指针不是很了解，有人对我在这里做错了什么有所了解吗？

这是因为我在函数中声明了 DatabaseQuery 类的新实例，不是吗。帮助:)

编辑：：///////

我已经完成了我的课程，它看起来像这样：

```
class DatabaseQuery{
    public $result;
    public $mysql_num_rows;        
}

class Database{    
    private static $name = '';
    private static $user = '';
    private static $password = '';   
    private static $host = 'localhost';
    private static $prefix = '';   
    private static $connection_handle = null;

    protected function Connect(){
        self::$connection_handle = mysql_connect(self::$host, self::$user, self::$password); 

        if( !self::$connection_handle ){
            die( 'Could not connect: ' . mysql_error() );
        }else{
            mysql_select_db( self::$name, self::$connection_handle );
        }
    }

    protected function Close(){
        mysql_close( self::$connection_handle );
    } 

    public static function FetchQueries( &$queries ){
        $db_query = array();
            self::Connect();   
                foreach( $queries as $key => $query ){
                    $result = mysql_query( $query, self::$connection_handle );
                    if( !$result ){
                        die( 'Error: ' . mysql_error() );
                    }else{
                        $DatabaseQuery = new DatabaseQuery();
                            $DatabaseQuery->result = $result;       
                            $DatabaseQuery->mysql_num_rows = mysql_num_rows($result);  
                            $db_query[ $key ] = $DatabaseQuery; 
                    }
                }
            self::Close();
        return $db_query;
    } 
} 
```

现在您可以以模型视图控件 (MVC) 的方式调用它，因为您在顶部（或在单独的文件中）定义所有数据

```
$queries = array(
    "bottoms" => "SELECT * FROM bottoms", 
    "users" => "SELECT * FROM users"           
);            
$dbr = Database::FetchQueries( $queries );

//display some users
while( $row = mysql_fetch_object( $dbr["apps"]->result ) ){
    echo $row->title; 
}    

//display some bottoms
while( $row = mysql_fetch_object( $dbr["bottoms"]->result ) ){
    echo $row->title; 
} 
```

您能告诉我您对这种 MVC 方法的看法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:40:18.600

你应该让你的`Database`类可以实例化。现在，您正在为每个查询打开一个新连接，这具有糟糕的性能（非常糟糕）。您可以使此类成为单例（实际上通常是这样做的，因为通常只有一个与数据库的连接是有意义的）。

所以你的代码（非常简化）应该是这样的：

```
class Database
{
  private static $instance;

  protected function __construct() {
    self::$instance = mysql_connect(...);
    // do some error checking!
  }

  protected function __clone() {}

  public static function getInstance() {
    if (!isset(self::$instance)) {
      self::$instance = new Database();
    }
    return self::$instance;
  }

  public function query($sql) {
    do mysql_query(...) and error checking, return $result or your own DatabaseQuery()
  }
} 
```

这样您就不能*直接*进行查询调用静态函数，但您可以在此类中添加另一个函数：

```
public static function makeQuery($sql) {
  $db = self::getInstance();
  return $db->query($sql);
} 
```

要将此类与实例一起使用，您应该调用`$db = Database::getInstance();`，并且 $db 是一个数据库对象，您可以正常调用它的公共方法。如果您只想继续进行静态调用以进行查询，只需调用`$result = Database::makeQuery($sql)`. 无论哪种方式，都可以保证您只有一个与数据库的连接（这就是单例所做的），因此您没有为每个查询启动新连接的当前开销。

**还可以考虑使用[`mysqli`](http://php.net/mysqli)or[`pdo-mysql`](http://php.net/pdo-mysql)代替旧的和**不推荐使用的函数（** **参见**`mysql_*`顶部的警告[`mysql_connect`](http://php.net/mysql-connect)）。有关每个 API 的更多信息和优势，请参阅[`Choosing a MySQL API`](http://php.net/manual/en/mysqlinfo.api.choosing.php)**

# java - 循环内的数组列表覆盖

> ID：13838621
> 
> 赞同：2
> 
> 时间：2012-12-12T11:21:25.497
> 
> 标签：java, arrays, loops, arraylist

提前感谢您能给我的任何帮助！基本上我有一个数组列表，每行三个单词用逗号分隔。我想用逗号分隔字符串以创建一个新的数组列表，每行一个字符串。我被卡住了，因为在我的循环中每次都会覆盖arraylist，所以我的新数组列表只包含原始数组列表（array1）的最后一行（3 个字符串以逗号分隔）。我已经在循环之外声明了第二个数组列表，但它仍然每次都被覆盖。它可能真的很愚蠢，但这里是代码，非常感谢任何帮助或指针！..

```
String[] array = new String[array1.size()];
List<String> array2 = new ArrayList<String>();

for (int i = 0; i < array1.size(); i++) {
array = ((array1.get(i)).split(","));
array2 = Arrays.asList(array1);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:25:08.983

只需添加 **array2.addAll**而不是**array2 =**这样您就可以附加 spit 操作的结果

```
 String[] array = new String[array1.size()];
   List<String> array2 = new ArrayList<String>();

for (int i = 0; i < array1.size(); i++) {
    array = ((array1.get(i)).split(","));
     array2.addAll(Arrays.asList(array1));
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:26:46.643

如果`array1`包含文本行，它应该是这样的：

```
List<String> array1 = ... // your read lines
List<String> splitted = new LinkedList<String();

for(String line : array1) {
    String[] splittedLine = line.split(",");
    splitted.addAll(Arrays.asList(splittedLine));
} 
```

基本上，您的问题是您分配了*新列表*而`array2`不是向其中添加元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:26:53.840

这个问题有点不清楚，但我的猜测是，而不是*覆盖*列表

```
array2 = Arrays.asList(array1); 
```

你想*附加*到它

```
array2.addAll(Arrays.asList(array1)); 
```

但请注意，这会为每行提供多个元素，最好使用列表列表或数组列表（每行一个条目，每个条目都有一个字段列表）。

# asp.net - 如何编译单个文件程序集？

> ID：13838632
> 
> 赞同：0
> 
> 时间：2012-12-12T11:21:47.277
> 
> 标签：asp.net, web-services, sharepoint

我有一个 Web 应用程序项目，其中包含一些带有代码的 asmx 文件。我怎样才能编译它们，以便每个文件都有一个单独的 dll，即我得到 file1.dll、file2.dll 等而不是 project.dll？TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:30:38.973

你不能。单个 .NET 项目编译为单个 .NET 程序集。如果您想要多个程序集，请创建多个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:18:03.663

我不确定您为什么要这样做，但我建议为每个服务创建一个项目，并且我还建议对所有项目使用相同的公钥。

# android - 如何在表面视图上执行撤消重做

> ID：13838633
> 
> 赞同：0
> 
> 时间：2012-12-12T11:21:52.010
> 
> 标签：android

我目前正在为绘图目的在表面视图上工作，但我面临一个问题，即没有使用命令模式在表面视图上执行撤消重做操作。如果有人知道它，请帮助。

我的代码是 XML ..

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical">

<FrameLayout
     android:id="@+id/frameLayout"
     android:layout_width="fill_parent"
     android:layout_height="430dp"/>
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:gravity="center_horizontal"
        android:layout_gravity="bottom"
        android:background="#c2300f">
        <Button
            android:id="@+id/buttonUndo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Undo" />
        <Button
            android:id="@+id/buttonRedo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Redo" />
        <Button
            android:id="@+id/buttonColor"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Color" />
    </LinearLayout>       
   </LinearLayout> 
```

主要活动是......

```
package com.example.surfacetuto;

 import android.app.Activity;
 import android.graphics.Paint;
 import android.graphics.Point;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.MotionEvent;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.FrameLayout;
 import android.widget.TextView;
 import android.widget.Toast;

 public class MainActivity extends Activity implements OnClickListener{
DrawingSurface ds;
FrameLayout frm;
Button btnU,btnR,btnC;
int color=0xfff00000;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ds=new DrawingSurface(this);
    setContentView(R.layout.activity_main);

    frm=(FrameLayout)findViewById(R.id.frameLayout);
    frm.addView(ds);

    btnU=(Button)findViewById(R.id.buttonUndo);
    btnR=(Button)findViewById(R.id.buttonRedo);
    btnC=(Button)findViewById(R.id.buttonColor);

    btnU.setOnClickListener(this);
    btnR.setOnClickListener(this);
    btnC.setOnClickListener(this);

    btnU.setEnabled(true);
    btnR.setEnabled(true);
}
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.buttonUndo:
        ds.undo();
        if( ds.hasMoreUndo() == false ){
            btnU.setEnabled( false );
        }
        btnU.setEnabled( true );
        Toast.makeText(getApplicationContext(), "Undo", 0).show();
        break;
    case R.id.buttonRedo:
        ds.redo();
        if( ds.hasMoreRedo() == false ){
            btnR.setEnabled( false );
        }

        btnR.setEnabled( true );
        Toast.makeText(getApplicationContext(), "Redo", 1).show();
        break;
    case R.id.buttonColor:
        Toast.makeText(getApplicationContext(), "Color", 2).show();
        ds.colorNew();

        break;

    default:
        break;
    }
}   
   } 
```

绘图表面类是......

```
package com.example.surfacetuto;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.Paint.Cap;
import android.graphics.Rect;
import android.util.AttributeSet;
import android.util.DisplayMetrics;
import android.util.Log;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Toast;

public class DrawingSurface extends SurfaceView implements SurfaceHolder.Callback {

       Canvas cacheCanvas;
       Bitmap backBuffer;
       int width, height, clientHeight;
       Paint paint;
       Context context;
        SurfaceHolder mHolder;
        protected DrawThread thread;
      private Boolean _run;
      public boolean isDrawing = true;
      private Bitmap mBitmap;
      private CommandManager commandManager;

public DrawingSurface(Context context) {
    super(context);
    this.context = context;
    init();
}
public DrawingSurface(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.context = context;      
    init();
}

private void init() {
    mHolder = getHolder();
    mHolder.addCallback(this);
    commandManager = new CommandManager();
    thread = new DrawThread(getHolder());

}
class DrawThread extends  Thread{
    private SurfaceHolder mSurfaceHolder;
    public DrawThread(SurfaceHolder surfaceHolder){
        mSurfaceHolder = surfaceHolder;
    }
    public void setRunning(boolean run) {
        _run = run;
    }
    @Override
    public void run() {
        Canvas canvas = null;
        while (_run){
            if(isDrawing == true){
                try{
                    canvas = mSurfaceHolder.lockCanvas(null);
                    if(mBitmap == null){
                        mBitmap =  Bitmap.createBitmap (100, 100, Bitmap.Config.ARGB_8888);
                    }
                    final Canvas c = new Canvas (mBitmap);
                    c.drawColor(Color.WHITE);
                    canvas.drawColor(Color.WHITE);
                    commandManager.executeAll(c);
                    canvas.drawBitmap (mBitmap, 0,  0,null);
                } finally {
                    mSurfaceHolder.unlockCanvasAndPost(canvas);
                }
                isDrawing = true;
            }

          }

        }
    }
 public void addDrawingPath (DrawingPath drawingPath){
        commandManager.addCommand(drawingPath);
    }

int lastX, lastY, currX, currY;
boolean isDeleting;
@Override
public boolean onTouchEvent(MotionEvent event) {
    super.onTouchEvent(event);
    int action = event.getAction();
    switch(action & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN:
        lastX = (int) event.getX();
        lastY = (int) event.getY();
        break;
    case MotionEvent.ACTION_MOVE:
        if(isDeleting) break;

        currX = (int) event.getX();
        currY = (int) event.getY();
        cacheCanvas.drawLine(lastX, lastY, currX, currY, paint);
        lastX = currX;
        lastY = currY;

        break;
    case MotionEvent.ACTION_UP:
        if(isDeleting) isDeleting = false;
        break;
    case MotionEvent.ACTION_POINTER_DOWN:
        cacheCanvas.drawColor(Color.WHITE);
        isDeleting = true;
        break;
    case MotionEvent.ACTION_POINTER_UP:
        break;
    }
    draw(); 
    return true;
}

protected void draw() {

    if(clientHeight==0) {
        clientHeight = getClientHeight();
        height = clientHeight;
        backBuffer = Bitmap.createBitmap( width, height, Bitmap.Config.ARGB_8888);
        cacheCanvas.setBitmap(backBuffer);
        cacheCanvas.drawColor(Color.WHITE);
    }
    Canvas canvas = null;
    try{
        canvas = mHolder.lockCanvas(null);

        canvas.drawBitmap(backBuffer, 0,0, paint);
    }catch(Exception ex){
        ex.printStackTrace();
    }finally{
        if(mHolder!=null)  mHolder.unlockCanvasAndPost(canvas);
    }
}

private int getClientHeight() {
    Rect rect= new Rect();    
    Window window = ((Activity)context).getWindow();     
    window.getDecorView().getWindowVisibleDisplayFrame(rect);     
    int statusBarHeight= rect.top;    
    int contentViewTop= window.findViewById(Window.ID_ANDROID_CONTENT).getTop();     
    int titleBarHeight= contentViewTop - statusBarHeight;
    return ((Activity)context).getWindowManager().getDefaultDisplay().
            getHeight() - statusBarHeight - titleBarHeight;
}
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
}

public void surfaceCreated(SurfaceHolder holder) {

        thread.setRunning(true);
        thread.start();

    width = getWidth();
    height = getHeight();
    cacheCanvas = new Canvas();
    backBuffer = Bitmap.createBitmap( width, height, Bitmap.Config.ARGB_8888); 
    cacheCanvas.setBitmap(backBuffer);
    cacheCanvas.drawColor(Color.WHITE);
    paint = new Paint();
    paint.setColor(Color.BLUE);
    paint.setStrokeWidth(10);
    paint.setStrokeCap(Paint.Cap.ROUND);
    paint.setStrokeJoin(Paint.Join.ROUND);
    draw();

}

public void surfaceDestroyed(SurfaceHolder holder) {
     boolean retry = true;
        thread.setRunning(false);
        while (retry) {
            try {
                thread.join();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }
}

public void colorNew() {
    // TODO Auto-generated method stub
    paint.setColor(Color.GRAY);
}
public void undo() {
    // TODO Auto-generated method stub
     isDrawing = true;
    commandManager.undo();
}
public void redo() {
    // TODO Auto-generated method stub
     isDrawing = true;
    commandManager.redo();
}
public boolean hasMoreUndo() {
    // TODO Auto-generated method stub
    return commandManager.hasMoreUndo();
}
public boolean hasMoreRedo() {
    // TODO Auto-generated method stub
     return commandManager.hasMoreRedo();
}
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:22:22.927

我已经尝试了很多在您的代码中实现撤消和重做，但我没有成功。

我把带有撤消和重做操作的完整项目放在这里。

[https://github.com/niravranpara/CanvasDrawings](https://github.com/niravranpara/CanvasDrawings)

# java - 从java执行时语法错误

> ID：13838636
> 
> 赞同：1
> 
> 时间：2012-12-12T11:22:06.827
> 
> 标签：java, sql-server-2008, jdbc

我有一个存储过程（存储过程接受 1 个参数）我正在从 java 执行它。

对于该存储过程，我们发送参数 param1

这里

```
 param1 = "(''parent''),(''child'')"; //added double single quotes for sql server 
```

//实际值为

```
 param1 =  "('parent'), ('child')"; 
```

它显示以下错误

**'PARENT00005' 附近的语法不正确。**

当我在 MS SQLServer Management Studio 中手动执行该语句时，它被接受。

# c# - 经理类设计模式

> ID：13838640
> 
> 赞同：4
> 
> 时间：2012-12-12T11:22:21.787
> 
> 标签：c#, design-patterns

什么是**经理**类？管理器类和对象管理器有什么区别？它有什么设计模式吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:06:59.957

原子对象[是指](http://spin.atomicobject.com/2008/01/30/presenter-first-get-your-triads-talking/)在 Presenter-first MVP 变体的上下文中的“管理器”的概念。这可能是你要找的吗？它的作用是协调 MVP 三元组。

# java - 在java中如何确保传递的对象只被传递给它的对象修改？

> ID：13838641
> 
> 赞同：0
> 
> 时间：2012-12-12T11:22:21.270
> 
> 标签：java

假设我有一个类，它接受一个 Key 对象数组来构造一个类 keyHandler 的对象，如下所示：

```
class KeyHandler {
    Key[] keys;
    public KeyHandler(Key[] keys) {
        this.keys=keys 
    }
    //more methods which modify key;
} 
```

现在我从 main 调用这个构造函数

```
KeyHandler keyhandler = new KeyHandler(keys); 
```

我想确保键数组不是从 main() 修改的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:41:09.970

如果`Key`是不可变类，只需克隆数组：

```
this.keys = keys.clone(); 
```

如果`Key`对象不是不可变的，您将需要通过一一复制数组的元素来进行深度克隆。如果`Key`有一个复制构造函数，KeyHandler 构造函数可能如下所示：

```
this.keys = keys.clone();
for (int i = this.keys.length - 1; i >= 0; i--) {
    this.keys[i] = new Key(this.keys[i]);
} 
```

您可以通过在网上搜索“防御性复制”来获取有关此做法的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:41:40.203

KeyHandler 类应该创建密钥数组的内部副本。然后就安全了。

```
class Keyhandler {    
   private Key[] keys;
   public KeyHandler(Key[] keys) {
      this.keys = new Key[keys.length]; 
      System.arrayCopy(keys, 0, this.keys, 0, keys.length); 
   }
     //more methods which modify key;
} 
```

请注意，现在无法从外部操作键数组。但是仍然可以更改关键属性。为了绝对安全，您也应该克隆密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:42:13.000

最好的方法是在你的类中制作一个数组的副本：

```
this.keys = Arrays.copy(keys, keys.length); 
```

但是请注意，如果`Key`对象是可变的并且您的 main 方法改变了您在数组中保存的键之一，那么您的本地副本也会观察到这种变化。为防止这种情况发生，您可以制作`Key`不可变对象或制作每个单独`Key`对象的副本（深拷贝）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:44:42.873

您可以通过对传递的数组进行深层复制来实现这一点。您使用 object.clone(); 创建深层副本；您可以进一步保护该数组免受外部更改，方法是不直接访问它，或者在 getArray(); 中返回数组的深层副本；您还可以考虑使用 Collections.unmodifiableList();

# c# - 使用 linq 进行分组（范围 + 计数）

> ID：13838643
> 
> 赞同：0
> 
> 时间：2012-12-12T11:22:37.403
> 
> 标签：c#, linq, group-by, range

```
var data = new[] {
 new { Id = 0, Cat = 1, Price = 2 },
 new { Id = 1, Cat = 1, Price = 10 },
 new { Id = 2, Cat = 1, Price = 30 },
 new { Id = 3, Cat = 2, Price = 50 },
 new { Id = 4, Cat = 2, Price = 120 },
 new { Id = 5, Cat = 2, Price = 200 },
 new { Id = 6, Cat = 2, Price = 1024 },
};

var ranges = new[] { 10, 50, 100, 500 }; 
```

所需输出按等于或大于根据类别使用的范围分组价格计数。 **（在一个 linq 语句中）**

```
cat    range       count
-------------------------------------
1       10           2    (In 1\. categories there is 2 item that price >= 10(range) [10;30]) 
2       10           4    (In 2\. categories there is 4 item that price >= 10(range) [50;120;200;1024]) 
2       50           4    ....
2      100           3    ....
2      500           1    (In 2\. categories there is 1 item that price >= 500(range) [1024]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T11:38:07.087

试试这个：

```
var data = new[] {
 new { Id = 0, Cat = 1, Price = 2 },
 new { Id = 1, Cat = 1, Price = 10 },
 new { Id = 2, Cat = 1, Price = 30 },
 new { Id = 3, Cat = 2, Price = 50 },
 new { Id = 4, Cat = 2, Price = 120 },
 new { Id = 5, Cat = 2, Price = 200 },
 new { Id = 6, Cat = 2, Price = 1024 },
};

var ranges = new[] { 10, 50, 100, 500 };

var result = from r in ranges
        from g in data
        where g.Price >= r
        select new {g.Cat, Price=r};

var groupedData = 
        from d in result
        group d by new{d.Cat, d.Price} into g
        select new{Cat=g.Key.Cat, Price=g.Key.Price, TotalCount=g.Count()}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T11:40:17.350

这应该有效：

```
var values =
data.SelectMany(x => ranges.Where(y => x.Price >= y)
                           .Select(y => new { Record = x, Range = y }))
    .GroupBy(x => new { Cat = x.Record.Cat, Range = x.Range })
    .Select(x => new { Cat = x.Key.Cat, Range = x.Key.Range, Count = x.Count()}); 
```

结果：

```
{ Cat = 1, Range = 10,  Count = 2 }
{ Cat = 2, Range = 10,  Count = 4 }
{ Cat = 2, Range = 50,  Count = 4 }
{ Cat = 2, Range = 100, Count = 3 }
{ Cat = 2, Range = 500, Count = 1 } 
```

# java - 链式哈希 VS 双重探测

> ID：13838647
> 
> 赞同：1
> 
> 时间：2012-12-12T11:22:47.243
> 
> 标签：java, data-structures, complexity-theory, double-hashing

我正在尝试比较链接和双重探测。我需要在表大小 100 中插入 40 个整数，当我用 nanotime（在 java 中）测量时间时，我发现 Double 更快。那是因为在链接的插入方法中，我每次都创建 LinkedListEntry，它是添加时间。Chaining 怎么会比 Double Probing 更快呢？（这就是我在维基百科上看到的）

谢谢！！

这是链接的代码：

```
public class LastChain
{
    int tableSize;
     Node[] st;
    LastChain(int size) {
        tableSize = size;
        st = new Node[tableSize];
        for (int i = 0; i < tableSize; i++)
            st[i] = null;
    }

    private class Node
    {
        int key;
        Node next;
        Node(int key, Node next)
        {
            this.key   = key;
            this.next  = next;
        }
    }

    public void put(Integer key) 
    {
       int i = hash(key);
       Node first=st[i];
       for (Node x = st[i]; x != null; x = x.next)
          if (key.equals(x.key))
             { 
             return; 
              }

       st[i] = new Node(key, first);

    }

    private int hash(int key)
    {  return key%tableSize;
    }

      }
} 
```

这是双重探测的相关代码：

```
public class HashDouble1 {
  private Integer[] hashArray; 

  private int arraySize;

  private Integer bufItem; // for deleted items

  HashDouble1(int size) {
    arraySize = size;
    hashArray = new Integer[arraySize];
    bufItem = new Integer(-1);
  }

  public int hashFunc1(int key) {
    return key % arraySize;
  }

  public int hashFunc2(int key) {
    return 7 - key % 7;
  }

  public void insert(Integer key) {
        int hashVal = hashFunc1(key); // hash the key
        int stepSize = hashFunc2(key); // get step size
        // until empty cell or -1
        while (hashArray[hashVal] != null && hashArray[hashVal] != -1) {
          hashVal += stepSize; // add the step
          hashVal %= arraySize; // for wraparound
        }
        hashArray[hashVal]  = key; // insert item
      }

} 
```

这样，在 Double 中的插入比 Chaining 更快。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:25:43.763

链接在高负载因子下效果最佳。尝试在 100 个表中使用 90 个字符串（不是很好的整数选择）。

链接也更容易实现删除/删除。

注意：在 HashMap 中，无论是否链接，都会创建一个 Entry 对象，而不是那里没有保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:48:33.400

Java 有一个特殊的“特性”，对象会占用大量内存。

因此，对于大型数据集（这将具有任何相关性）双重探测将是好的。

但作为第一件事，请将您的 Integer[] 更改为 int[] -> 内存使用量将是四分之一左右，性能会大幅提升。

但总是有性能问题：测量，测量，测量，因为你的情况总是很特别。

# iphone - 如何在 UIPageViewController 中使用弹出框控制器？

> ID：13838653
> 
> 赞同：0
> 
> 时间：2012-12-12T11:22:57.763
> 
> 标签：iphone, objective-c, ios, ipad, uipopovercontroller

我可以使用弹出框控制器返回页面视图控制器中的先前视图控制器吗？有什么方法可以做到这一点。

我正在尝试此代码。

```
-(void)goNext
{
Vcontr = [self.pageController.viewControllers objectAtIndex:0];

UIPopoverController *popoverController = [[UIPopoverController alloc] initWithContentViewController:pageController];

if(popoverController == nil){   //make sure popover isn't displayed more than once in the view
    popoverController = [[UIPopoverController alloc] initWithContentViewController:pageController];
}
[popoverController presentPopoverFromRect:self.view.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

popoverController.delegate = self;

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:26:40.220

这里有一些教程：

[iPad for iPhone Developers 101：UIPopoverController 教程](http://www.raywenderlich.com/1056/ipad-for-iphone-developers-101-uipopovercontroller-tutorial)

[iPad UIPopoverController 视频](http://ulapp.us/ipad-app-video-ipad-app-tutorial-uipopovercontroller/)

并阅读[Apple 开发人员](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPopoverController_class/Reference/Reference.html)

你可以找到[苹果开发者的示例代码](http://developer.apple.com/library/ios/#samplecode/Popovers/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:32:10.143

```
 UIPopoverController *popoverController ;///defin this in the .h

if(popoverController == nil){   //make sure popover isn't displayed more than once in the view
    popoverController = [[UIPopoverController alloc] initWithContentViewController:yourPageViewController]; 
}
[popoverController presentPopoverFromRect:self.view.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

popoverController.delegate = self;
} 
```

# bash - 提取由点分隔的字符串，后跟另一个字符串

> ID：13838658
> 
> 赞同：1
> 
> 时间：2012-12-12T11:23:08.447
> 
> 标签：bash, shell

我需要在我的日志文件中获取浏览器版本，然后是浏览器名称和 /。例子

```
Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0.5.7 
```

在这里，我想提取 Firefox ie (17.0.5.7) 之后的版本。我尝试了以下方法，但没有成功。当我使用 AIX 时，我无法使用 -O 标志。

```
grep -w 'Firefox\/[^ ,]\+' $line
sed 's/^.*\(Firefox\/[^ ,]*\).*$/\1/' $line 
```

我还需要在while循环中使用命令，如下所示

```
while read -r line
do
case $line in    
*Firefox*) print "<browser Firefox>\"" command_to_be_executed $line "\"</browser>";;
*) print "<browser>\"Unknown\"</browser>";;
esac
done < filename 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:26:47.457

您的 sed 版本有什么问题是 Firefox 之前的大括号。只需更改如下：

```
sed 's/^.*Firefox\/\([^ ,]*\).*$/\1/' your_file 
```

以上应该工作。其他方法是：

```
awk '{for(i=1;i<=NF;i++)if($i~/Firefox/){split($i,a,"/");print a[2]}}' file_name 
```

也在 sed（为我工作）：

```
sed -e 's/.*Firefox\/\([^\s]*\)/\1/g' your_file 
```

在 perl 中：

```
perl -F -ane 'foreach (@F){if(/Firefox/){$_=~s/Firefox\///g;print $_}}' your_file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:32:47.127

对您的 sed 尝试的小修正：

```
$ sed 's|.*Firefox/\([^ ,]*\).*|\1|' file
17.0.5.7 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T11:37:02.020

由于它是该行中的最后一个字段，您可以执行以下操作：

```
awk -F'[ /]' '$(NF-1)=="Firefox"{print $NF}' file.log 
```

它打印检查它是否是“Firefox”的行并打印随后的版本。

* * *

只需执行 echo on`line`并获取版本。

```
while read -r line
do
case $line in    
*Firefox*) version=$(echo $line | awk -F'[ /]' '{print $NF}' )
print "<browser Firefox>\"" $version "\"</browser>";;
*) print "<browser>\"Unknown\"</browser>";;
esac
done < filename 
```

# php - 我想在使用 str_ireplace 时排除 html 标签内的内容

> ID：13838661
> 
> 赞同：-1
> 
> 时间：2012-12-12T11:23:21.007
> 
> 标签：php, regex

我有这个作为示例文本

```
......
$text = "Swiss Real";
...... 
```

现在我做的是这个

```
$text = str_ireplace('swiss','<font color="red">swiss</font>',$text); 
```

现在我的字符串是

```
$text is '<font color="red">swiss</font> Real' 
```

现在我想做

```
$text = str_ireplace('re','<font color="red">re</font>',$text); 
```

现在这是我的问题......我只想改变'Real'而不是'color =“red”'中的re
我如何实现它。
请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:28:54.503

你需要使用`boundary`

`\bre\b`

* * *

与`boundary`您可以匹配被字符包围的`non-word`字符..

只需将它放在`\b`一个单词周围即可匹配单个单词

* * *

例如对于字符串`"Begin it in stackoverflow"`，如果你想替换`in`为`IN`

`in`正则表达式会将其替换为`"BegIN it IN stackoverflow"`

`\bin\b`正则表达式会将其替换为`"Begin it IN stackoverflow"`

# ruby-on-rails - 如何限制图像上的右键单击选项？

> ID：13838664
> 
> 赞同：0
> 
> 时间：2012-12-12T11:23:27.767
> 
> 标签：ruby-on-rails, right-click

我正在用 ruby​​ on rails 设计我的投资组合。为了限制图像被复制，我想禁用右键单击和从网站复制图像的其他功能。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:29:18.763

在大多数现代浏览器中，您可以禁用特定图像的右键单击菜单。为此，您可以使用`oncontextmenu="return false;"`定义图像的 IMG 标记中的事件处理程序：

```
<IMG border=0 src="..." oncontextmenu="return false;"> 
```

例如，此图像的上下文菜单已被禁用：

注意：在较旧的浏览器（例如 Internet Explorer 4.x 或更早版本）中，此技巧将不起作用。此外，如果用户禁用了 JavaScript，上下文菜单也会显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:41:37.597

正如所有其他人已经说过的那样：以可靠的方式不可能。您唯一可以考虑的就是为您的图像添加水印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:25:34.977

您可以使用 javascript 禁用右键单击。

然而，这是一个非常糟糕的主意。

由于您的图像被发送到访问者的浏览器，因此可以通过在缓存文件中显示源或分析 HTTP 请求或简单地截屏来访问它们。

您不应该通过禁用右键单击来破坏用户导航，您的图像将是可复制的，您对此无能为力。处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:25:11.380

遗憾的是，无法阻止人们复制您页面上的图像。

仅禁用右键单击是不够的，任何人都可以查看源代码以查看图像 url

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T11:50:41.660

[http://www.hypergurl.com/norightclick.html](http://www.hypergurl.com/norightclick.html) 这家伙提到我们可以添加一个透明的 gif 图像来限制复制功能，但我不知道怎么做。我在轮播中显示我的图像。轮播有时会变得非常棘手。我还把我的图片上传到云端，所以如果一个人可以获得图片的 URL，那么他需要某些参数来访问它，而这些参数只有所有者拥有。

# qt - 带有 QListView 的 QStandardItemModel，外部放置操作不起作用

> ID：13838665
> 
> 赞同：1
> 
> 时间：2012-12-12T11:23:32.273
> 
> 标签：qt, drag-and-drop, qstandarditemmodel

我正在使用 Qt 4.2。

我有一个 QMainWindow，里面有一个 QListView，它使用 QStandardItemModel 来显示我从 .desktop 文件中获得的一些项目。

现在我正在尝试在应用程序上实施放置操作，例如：当 .html 文件放置在 firefox 项目上时，我可以运行 firefox。

所以这就是我所做的：

- 对于列表视图：

```
 viewport()->setAcceptDrops(true);
 setAcceptDrops(true);
 setDragEnabled(true);
 setDropIndicatorShown(true);
 setDragDropMode(QListView::DragDrop); 
```

- 对于标准项目模型：

```
Qt::DropActions supportedDropActions() const {
    return Qt::CopyAction | Qt::MoveAction;
}
Qt::ItemFlags flags(const QModelIndex &index) const {
    return Qt::ItemIsSelectable | Qt::ItemIsDragEnabled |
           Qt::ItemIsDropEnabled | Qt::ItemIsEnabled;
}
QStringList mimeTypes() const {
    QStringList types;
    types<<"text/uri-list";
    return types;
}
bool dropMimeData(const QMimeData *data, Qt::DropAction action,
                  int row, int column, const QModelIndex &parent) {
    qDebug() << "dropMimeData";
} 
```

之后，当我将一些文件放到应用程序上时，我再也没有收到 dropMimeData 调试消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:56:51.313

您还需要重新实现`dragEnterEvent()`-`dropEvent()`它们是`QListView`.

从文档中：

> 掉落
> 
> 为了能够接收放置在小部件上的媒体，请为小部件调用 setAcceptDrops(true)，并重新实现 dragEnterEvent() 和 dropEvent() 事件处理函数。
> 
> 例如，以下代码在 QWidget 子类的构造函数中启用了放置事件，从而可以有效地实现放置事件处理程序：

```
 void Window::dragEnterEvent(QDragEnterEvent *event)
 {
     if (event->mimeData()->hasFormat("text/plain"))
         event->acceptProposedAction();
 }

 void Window::dropEvent(QDropEvent *event)
 {
     textBrowser->setPlainText(event->mimeData()->text());
     mimeTypeCombo->clear();
     mimeTypeCombo->addItems(event->mimeData()->formats());

     event->acceptProposedAction();
 } 
```

# asp.net-mvc - 如何在 asp.net mvc4 中定义此路由？

> ID：13838668
> 
> 赞同：0
> 
> 时间：2012-12-12T11:23:51.403
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我是 asp.net mvc 的初学者。

我有 2 个控制器：

**HomeController 动作：** index,about

我需要的网址：

```
 index action url: mydomain

  about action url: mydomain/about 
```

**其他控制器动作：**索引

```
 index action url: mydomain/other 
```

**MyCode 那不起作用**：

```
routes.MapRoute(
      "Other",
     "{controller}/{action}/{id}",
     new { controller = "Other", action = "Index", id = UrlParameter.Optional }
 );

  routes.MapRoute(
     name: "Default",
     url: "{action}/{id}",
     defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
 ); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:46:32.653

对于您的家庭控制器，点击

```
index action url: mydomain 
```

你需要

```
routes.MapRoute(
 name: "Home",
 url: "",
 defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

打

```
about action url: mydomain/about 
```

你需要

```
routes.MapRoute(
 name: "Home",
 url: "about",
 defaults: new { controller = "Home", action = "About", id = UrlParameter.Optional }
); 
```

对于您的其他控制器，点击

```
index action url: mydomain/other 
```

你需要

```
routes.MapRoute(
 name: "Other",
 url: "other",
 defaults: new { controller = "Other", action = "Index", id = UrlParameter.Optional }
); 
```

请注意，在所有情况下，“名称”参数并不重要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T11:40:37.930

我认为您错过`{controller}`了`Default`路由规范。

```
routes.MapRoute(
     name: "Default",
     url: "{controller}/{action}/{id}",
     defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

# php - 如何获取输入的电子邮件地址并在 FormToEmail.php 脚本中使用它？

> ID：13838677
> 
> 赞同：-2
> 
> 时间：2012-12-12T11:24:39.373
> 
> 标签：php, html, email

我正在使用 FormToEmail.php 免费脚本从用户输入他们的电子邮件和收件人电子邮件的页面发送一些表单数据，显然还有一些文本作为消息。

在 FormToEmail.php 中有一个地方可以插入我希望提交内容的电子邮件。

我需要在 FormToEmail.php 文件中动态设置作为“收件人”电子邮件输入的电子邮件，以便内容将通过电子邮件发送到收件人的电子邮件。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:41:16.537

该脚本的注释中有一段文字：

```
Step 2:

Enter your email address. 
```

在评论块之后有一行：

```
$my_email = "delete these words and put the email address only in here between the quotes"; 
```

假设您有硬编码地址而不是“删除这些......”。您只需将该行替换为：

```
$my_email = !empty($_REQUEST['recepient_email_field_name']) ? $_REQUEST['recepient_email_field_name'] : "default email address"; 
```

表单上的字段名称在哪里`recepient_email_field_name`，用户应在其中输入他的电子邮件，默认电子邮件地址应替换为您当前拥有的电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:49:57.680

而不是这段代码：

```
$my_email = "delete these words and put the email address only in here between the quotes"; 
```

添加这个：

```
if (!empty($_POST['email'])) {
  $my_email = trim($_POST['email']);
} else {
  $my_email = "defaultemailaddress@domain.com";
} 
```

用您自己的或任何其他替换默认值。

# winforms - Winforms 在列表框中绑定 SelectedItems

> ID：13838680
> 
> 赞同：1
> 
> 时间：2012-12-12T11:24:47.580
> 
> 标签：winforms

使用标准列表框，我想将它绑定到一组对象并更新绑定的项目集合以包括那些选定的项目。

所以我有类似的东西：

```
 _pContext = new BindingSource();
_pContext.DataSource = _gpContext;
_pContext.DataMember = "ParentEntities";
_AllChildrenListBox.DataSource = _container.ChildEntities;
_AllChildrenListBox.DataBindings.Add("MySelectedItems", _pContext, "ChildEntities", false); 
```

_allChildrenListBox 是列表框。我创建了一个从 ListBox 继承的新列表框类型，因此我可以创建另一个 SelectedItems 属性，然后封装设置/取消设置项目的逻辑。

所以简而言之，问题是：在上面， ChildEntities 是“ChildEntity”对象的集合。我的列表框包含所有可能的 ChildEntity 对象，我希望选择 ChildEntities 中的元素，并在选择更改时更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:54:59.990

我找到了解决这个问题的方法。目前它有点难看，但有效。以后可以细化。

所以首先是绑定本身。

```
_AllChildrenListBox.DataBindings.Add("SelectedItems2", _pContext, "ChildEntities2", true); 
```

这里的关键似乎是将格式参数设置为 true。

接下来，我需要 SelectedItems2 中的一些东西来完成我的肮脏工作。这是一团糟，但有效。这是完整的课程：

```
 public class MyListBox : ListBox
{
    private IEnumerable<object> _original;

    public IEnumerable<object> SelectedItems2
    {
        get
        {
            return UpdateSet();
        }
        set
        {
            SelectItems(value);
        }
    }

    private IEnumerable<object> UpdateSet()
    {
        var listSource = _original as IListSource;
        IList list = null;
        if (listSource != null)
        {
            list = listSource.GetList();
        }
        var iList = _original as IList;
        if (list == null && iList != null)
        {
            list = iList;
        }
        if (list == null)
        {
            return _original;
        }

        foreach (var item in SelectedItems)
        {
            if (!list.Contains(item))
            {
                list.Add(item);
            }
        }
        foreach (var item in _original.ToList())
        {
            if (!SelectedItems.Contains(item))
            {
                list.Remove(item);
            }
        }

        return _original;

    }

    private void SelectItems(IEnumerable<object> items)
    {
        _original = items;
        var hashset = new HashSet<object>();
        foreach (var item in items)
        {
            hashset.Add(item);
        }
        for(var i=0;i<Items.Count;i++)
        {
            SetSelected(i, hashset.Contains(Items[i]));
        }
    }
} 
```

基本上我打破了所有规则并假设 IEnumerable 隐藏了一个更美味的基于列表的界面，如果它使用它来更改基础集。

最后，我使用的是 EF（实体框架），你不能调用集合属性的设置器，所以我的实体目前看起来像这样：注意我是如何复制所有完全没有必要的列表更改操作的，但是我确实说过这只是第一次工作。

```
 public partial class ParentEntity
{
    public IEnumerable<object> ChildEntities2
    {
        get
        {
            return new List<object>(ChildEntities);
        }
        set
        {
            if (value == null)
            {
                return;
            }
            foreach (var item in ChildEntities.ToList().Where(item => !value.Contains(item)))
            {
                ChildEntities.Remove(item);
            }

            foreach (var item in value)
            {
                var cItem = item as ChildEntity;
                if (cItem != null)
                {
                    if (!ChildEntities.Contains(item as ChildEntity))
                    {
                        ChildEntities.Add(item as ChildEntity);
                    }
                }
            }                
        }
    }
} 
```

# c# - System.Data.Entity 对于 MVC 实体框架没有按预期工作

> ID：13838681
> 
> 赞同：0
> 
> 时间：2012-12-12T11:24:48.593
> 
> 标签：c#, entity-framework

我有下面的代码片段，它在“i.tPersons.Any”处生成错误：

“WhatWorks.Models.tPerson”不包含“Any”的定义，并且找不到接受“WhatWorks.Models.tPerson”类型的第一个参数的扩展方法“Any”（您是否缺少 using 指令或程序集引用?)

'Any' 是 System.Data.Entity 的一种方法，所以我希望它会被采纳。我错过了什么？

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using WhatWorks.Models;

namespace WhatWorks.Controllers
{
    public class InterventionController : Controller
    {
        private WhatWorksEntities db = new WhatWorksEntities();

        //
        // GET: /Intervention/

        // where parameter list only includes id
        public ActionResult Index(int id)
        {
            var model =
                    (
                        from i in db.tInterventions
                        where (i.householdID == id && !(i.tPersons.Any(t => i.householdID == id)))
                        select i
                    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:31:26.453

Any() 是一种 Linq 扩展方法，可应用于 IEnumerables 和 IQueryables。

看起来您正在 tPersons 集合上执行 .Any() ，但在 Predicate for Any 中您使用的是 'i'，在您的情况下这是 tInterventions 的一个实例。

因此，要么将 i.householdID 中的 i 替换为 t.householdID，要么直接在 tIntervensions 上执行 Any。

# php - 为什么 PHP 的 MySQL 库不将affected_rows 与查询结果对象相关联？

> ID：13838683
> 
> 赞同：1
> 
> 时间：2012-12-12T11:25:02.933
> 
> 标签：php, mysqli

我认为这是一个非常简单的问题，但我将解释我的想法：

除非我弄错了，否则受影响的行数始终与已执行的查询相关联。类似地，SELECT 返回的行数本质上与该查询相关联，并且按如下方式检索值：

```
echo $mysql_result_object->num_rows; 
```

为什么要从 UPDATE 或 DELETE 语句之类的语句中检索受影响的行，应该通过连接对象访问该值？

```
echo $mysql_connection_object->affected_rows; 
```

这对我来说似乎不太合乎逻辑。

仅仅是因为查询函数（例如`mysqli_query`）为 INSERT/UPDATE/DELETE 语句返回布尔值 true 吗？在这种情况下......他们不应该返回一个空的结果对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:40:29.257

你几乎回答了你自己的问题，所以我只是在澄清一下。

`num_rows`对结果集进行操作。因此，它仅对返回结果集的操作有效。即选择或显示。

INSERT、UPDATE 和 DELETE 不返回结果集。回答你的最后一句话；他们不能返回一个空的结果集，因为他们已经返回一个布尔值。

`affected_rows`将返回与 link_identifier 关联的最后一个查询的受影响行数。

因此，不能`num_rows`用于 INSERT、UPDATE、DELETE，但**可以**用于`affected_rows`SELECT，在这种情况下，它的操作类似于`num_rows`.

# python - 使用 python 生成 amqp 消息并使用 java 使用相同的消息

> ID：13838687
> 
> 赞同：0
> 
> 时间：2012-12-12T11:25:16.640
> 
> 标签：python, rabbitmq, amqp, pika, spring-amqp

**我正在尝试从 python 生成一条 amqp 消息并使用来自 java/spring 的相同消息。**

这是我的**生产者**代码（python）：

```
import pika, sys, pickle

sys.path.append("trc/suivi/amqp")

from Person import Person

connection = pika.BlockingConnection()
channel = connection.channel()
me = Person("Juliano", 38)
pickled_me = pickle.dumps(me)
channel.basic_publish(exchange='', 
                      routing_key="myqueue",
                      body=pickled_me,
                      properties=pika.BasicProperties(delivery_mode=1)) 
```

这是我的**消费者**代码（java）：

```
ApplicationContext context = new GenericXmlApplicationContext("classpath:/applicationContext.xml");
AmqpTemplate template = context.getBean(AmqpTemplate.class);
Person me = (Person) template.receiveAndConvert("myqueue");
System.out.println("Me: " + me.getName() + ":" + me.getAge()); 
```

这是 Person 的 java 类：

```
package trc.suivi.amqp;

import java.io.Serializable;

public class Person implements Serializable {
    private static final long serialVersionUID = 1L;
    private String name;
    private int age;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

} 
```

和相应的python类：

```
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age 
```

（位于**trc/suivi/amqp**目录结构中）

我得到一个**类转换异常**。我很确定这与包/模块名称或一些序列化问题有关......

**编辑**：我现在正在使用 JSon，我在 java 反序列化时得到了这个：

```
Exception in thread "main" org.springframework.amqp.support.converter.MessageConversionException: failed to convert Message content. Could not resolve
 __TypeId__ in header
    at org.springframework.amqp.support.converter.DefaultJavaTypeMapper.retrieveHeader(DefaultJavaTypeMapper.java:104)
    at org.springframework.amqp.support.converter.DefaultJavaTypeMapper.toJavaType(DefaultJavaTypeMapper.java:53)
    at org.springframework.amqp.support.converter.JsonMessageConverter.fromMessage(JsonMessageConverter.java:118)
    at org.springframework.amqp.rabbit.core.RabbitTemplate.receiveAndConvert(RabbitTemplate.java:425)
    at trc.suivi.amqp.Consumer.main(Consumer.java:12) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:36:31.097

您是否使用通用的序列化库？看看这个答案了解更多细节[是否有任何库可以用 python 反序列化，它是用 java 序列化的](https://stackoverflow.com/questions/1714624/is-there-any-library-to-deserialize-with-python-which-is-serialized-with-java)。

您可以尝试序列化为 json，然后在您的 python 代码中反序列化它会很容易

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T22:47:01.937

这样做的关键是使用可以用多种语言编码和解码的标准消息格式。许多人只是在 UTF-8 编码的字符串中使用 JSON，但我发现 MessagePack 几乎与 JSON 一样灵活，而且带宽效率更高。[http://msgpack.org/](http://msgpack.org/)

我喜欢使用对象样式的格式，因为很容易将数据添加到消息中，然后将其发送到另一个队列。我这样做是为了处理错误（通过添加错误原因代码并将消息分派到队列中，处理程序将检查原因并重试或修复并重试）。此外，添加时间戳对于绘制系统中的运输时间非常有用。处理完一条消息（将包含前几个步骤的时间戳）后，它会被发送到记录队列中的时间和每个步骤的处理时间的绘图仪。

# html - 表单链接（按钮）未触发

> ID：13838691
> 
> 赞同：1
> 
> 时间：2012-12-12T11:25:31.840
> 
> 标签：html

我正在使用这段代码，当我把它放在需要静态 HTML 的页面中时它没有触发。如果您创建一个纯 HTML 页面，它确实有效，但它不适用于我需要的页面。

会是什么呢？

```
 <form name="CTTPDD" action="https://example.com" method="post" target="_blank">

    <input type="hidden" value="##.##" name="campaign" />

    <input name="repeat" type="hidden" value="1">

    <input type="image" src="image.gif" value="submit" name="submit" />

    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:50:47.863

你有 `<input type="image" src="image.gif" value="submit" name="submit" />` 我认为真的应该说 `<input type="image" src="image.gif" name="submit" />`你的问题是你 `value="Submit`说图像应该说这会搞砸一切。

# asp.net - 在文本框中有一个默认文本并通过在 asp.net 中键入一个字母来清除它

> ID：13838697
> 
> 赞同：0
> 
> 时间：2012-12-12T11:25:59.860
> 
> 标签：asp.net, css

我正在使用 c# 在 asp.net 中开发 web 应用程序，所以我将 asp:textbox 放在 web 应用程序中。当我加载页面时，我希望在文本框中有默认文本，当我将光标放在它上面并输入第一个字母时，文本框从文本框中变得清晰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:03:21.293

你问的是所谓的水印。有很多方法可以做到这一点

第三方工具，例如：

一个。Ajax 工具包。你可以在[这里看到它的作用](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx)

湾。Telerik RadTextBox 控件（通过设置其*EmptyMessage*属性）。

等等。

您可以自己使用简单的 javascript 构建一个，如下所示：

```
<script>
$(document).ready(function() {
 var watermark = 'textbox watermark text';
 $('#inputTextboxId').blur(function(){
  if ($(this).val().length == 0)
    $(this).val(watermark).addClass('watermark');
 }).focus(function(){
  if ($(this).val() == watermark)
    $(this).val('').removeClass('watermark');
 }).val(watermark).addClass('watermark');
});
</script> 
```

并在您的容器中放置一个输入控件，例如 body

```
<body>

<input id="inputTextboxId" type="text" />
</body> 
```

此外，如果您的整个工作区都位于支持 HTML5 的浏览器中，那么只需执行以下操作：

```
<input type="text" placeholder="Enter your name..."> 
```

并且您的文本框将带有水印“输入您的姓名...”，该水印会在焦点上消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:52:27.200

尝试下面提到的以下代码，它将帮助您解决问题

```
<asp:TextBox ID="Textbox"
             CssClass="Input" 
             onfocus="if(this.value == 'Name'){this.value='';}" 
             onblur="if(this.value == ''){this.value='Name';}" 
             Width="300" 
             runat="server" 
             text="Name" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:00:42.557

另一种选择是[HTML5 Placeholder tag](http://www.w3schools.com/html5/att_input_placeholder.asp)，尽管并非所有浏览器都完全支持它。

我会推荐 @Jon Malcolm 建议的 javascript 替代方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:01:13.217

You can do this using the [AjaxControlToolkit](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/)'s [TextBoxWatermark extender](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/TextBoxWatermark/TextBoxWatermark.aspx). Add the AjaxControlToolkit to your project (using Nuget is the easiest way), and then in your markup you can specify the text to be displayed like this:

```
<asp:textbox runat="server" id="MyTextBox" />
<ajaxtoolkit:TextBoxWatermarkExtender runat="server" id="MyTextBoxExtender" TargetControlId="MyTextBox" WatermarkText="Default Text" /> 
```

Or you can do this with the jQuery Watermark plugin - there's details on how to implement this in the answer to [this question](https://stackoverflow.com/questions/13762026/asp-input-field-on-click-clear-value/13762120#13762120).

# c# - 无法将“ASP.XXX_master”类型的对象转换为“XXX.MasterPage”类型

> ID：13838700
> 
> 赞同：2
> 
> 时间：2012-12-12T11:26:04.057
> 
> 标签：c#, asp.net, casting, master-pages, .net

我想从使用它的页面访问母版页中的特定控件，因此我编写了以下代码行：

```
this.Master.FindControl("pnl_Buttonss").Visible = false; 
```

现在

我从页面 .designer.cs 得到以下异常：

```
Unable to cast object of type 'ASP.masterpage2_master' to type 'GuideUI.MasterPage'. 
```

* * *

```
 public new GuideUI.MasterPage Master {
            get {
                return ((GuideUI.MasterPage)(base.Master));
            }
        } 
```

这是引发异常的代码。如何修复此错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-27T00:30:50.770

确保您在该页面上使用的母版页与您要投射到的母版页相同。

# java - 如何比较向量中的整数值？

> ID：13838702
> 
> 赞同：-2
> 
> 时间：2012-12-12T11:26:08.517
> 
> 标签：java, compare

在此示例中，它打印出学生的姓名并将用户从键盘输入的内容记入 Vector。

但我只想打印出超过 30 个学分的向量。

谢谢你的帮助。

```
public class Main {

    public static void main(String[] args) {
       Teacher t = new Teacher("Prof. Smith", "F020");
       Student s = new Student("Gipsz Jakab", 34);

       Vector<Person> pv = new Vector<Person>(); 
       pv.add(t);
       pv.add(s);

       Scanner sc = new Scanner(System.in);
       String name;
       int credits;

       for (int i=0;i<5;i++){

         System.out.print("Name: ");
         name = sc.nextLine();
         System.out.print("Credits: ");
         credits = sc.nextInt(); 
         sc.skip("\n"); 

         pv.add(new Student(name, credits));
       }
       System.out.println(pv); 
       System.out.println("The size of the Vector is: " + pv.size()); 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:32:30.330

您应该/必须使用迭代器，简单的方法是：

```
Iterator it = pv .iterator();
while(it.hasNext()){
    Student s= it.next();
    if(s.credits>30) System.out.println(s);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:29:59.423

您需要使用[if 语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/if.html)。检查 credists 是否大于 30。

```
if (x > n ) {
 // this block of code will be executed when x is greated then n.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:30:44.090

您需要在添加到向量之前进行检查。出于兴趣，您使用向量而不是[ArrayList的任何原因](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)

```
 for (int i=0;i<5;i++){
     System.out.print("Name: ");
     name = sc.nextLine();
     System.out.print("Credits: ");
     credits = sc.nextInt(); 
     sc.skip("\n"); 

     if (credits >= 30) { //this additional check is needed
          pv.add(new Student(name, credits));
      } 
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:30:52.470

这行得通吗？

```
if (credits > 30){
    pv.add(new Student(name, credits));
} 
```

代替：

```
pv.add(new Student(name, credits)); 
```

# c# - C# Vector.Add 与 PointF

> ID：13838704
> 
> 赞同：1
> 
> 时间：2012-12-12T11:26:17.360
> 
> 标签：c#, vector, drawing

我正在编写一个用于解释和绘制 G 代码的小程序（用于 CNC - 机器）

为了用半径连接两条线，我写了一个小程序，并且必须使用函数 Vector.Add。

```
No code, had probelems with formatting :)
p1,p2,p3 are the three points 
p1->p2 = vector ab 
p2->p3 = vector bc 
eab = Unit vector ab 
ebc = Unit vector bc 
eres = resulting vector 
```

我的问题是：对于操作`Vector.Add()`，我需要 a`Vector`和 a `Point`(`PointF`不允许)，但`PointF`由于准确性，我必须使用。我该怎么办？

```
eab = ab / ab.Length;
ebc = bc / bc.Length;
eres = Vector.Add(eab, ebc);
PointF test= new PointF();
test= Vector.Add(5 * eres, test ); 
```

我`System.Windows.Drawing`用于绘图和`System.Windows.Base`矢量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:44:58.660

在 System.Drawing.dll 的命名空间`System.Drawing`中，有：

```
public struct Point { ... }
public struct PointF { ... } 
```

其坐标分别为`int`( `System.Int32`) 和`float`( `System.Single`)。

在 WindowsBase.dll 的命名空间`System.Windows`中，还有*另一个*：

```
public struct Point { ... } 
```

其坐标为`double`( `System.Double`)。

如果两者都需要，可以

*   将指令`using System.Drawing;`和`using System.Windows;`文件放在同一级别，然后在代码中给出全名（例如`System.Winodws.Point`，而不是 just `Point`），只要有歧义（即编译器需要时）。或者：
*   只有一个 using 指令（您使用最多的指令），然后在您使用其他命名空间中的类型（如结构）的情况下给出全名。或者：
*   创建一个或多个[`using` *别名*指令（见链接）](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)。

# c# - MVC3：用户代码 C# 未处理 NullReferenceException

> ID：13838712
> 
> 赞同：0
> 
> 时间：2012-12-12T11:26:39.073
> 
> 标签：c#, asp.net-mvc-3, razor, jqgrid

当我尝试对 JQGrid 值进行排序时，用户代码异常未处理 NullReferenceException。

```
 public ActionResult GetSearch(string sidx, string sord, int page, int rows)
            {
                if (sidx != "")
                {
//In the Session["ResourceSearch"] I have loaded the values
    DataContractClass[] SortResult = Session["ResourceSearch"] as DataContractClass[];
    //Sort the JQGrid value from input 'sidx'                
        SortResult = SortResult.OrderBy(p => p.GetType().GetProperty(sidx).GetValue(p, null)).ToArray() as DataContractClass[];
    //Load data here
                }
            } 
```

![在此处输入图像描述](../Images/667b6e5134d630a54e6cd733b45973c0.png)

只有将 int 属性作为 . 的输入时，我才会遇到问题`sidx`。但如果任何字符串属性都`sidx`没有问题。我能够对数据进行排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:32:30.293

任何一个：

*   `p`在 lambda 中为空
*   没有名称与所表示的类型*完全相同*（即大小写匹配）的公共实例属性`sidx``p`

我的猜测是第二种。

检查是否确实存在一个名称等于`sidx`抛出此异常时的任何值的公共属性。顺便说一句 - 这基本上就是消息框中的第二个帮助字符串告诉你要做的事情。

# workflow - “创建时间”和“记录创建时间”之间的差异

> ID：13838714
> 
> 赞同：3
> 
> 时间：2012-12-12T11:26:40.353
> 
> 标签：workflow, dynamics-crm-2011

在 CRM 中，当我尝试设置工作流程时，我可以选择与某个实体的创建时间相关的超时。有三个相关的领域。

*   *记录创建于*
*   *创建于*
*   *修改于*

虽然最后一个非常明显，但我看不出其他两个之间有任何逻辑差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T14:08:30.480

不同之处在于*Created On* ( `createdon`) 在您实际创建记录时由服务器自动填写，而*Record Created On* ( `overriddencreatedon`) 通常为*空*（除非记录已导入 CRM*并且*您选择显式覆盖记录创建日期在另一个系统中创建时匹配）。

您应该使用第一个并跳过后者，因为它不受支持（目前我在与 MVP 谈论它时说得对）。为什么会这样，她不知道，我也不知道。也许@JamesWood 有机会。他通常会。*（正在吸吮）*

我从来没有用过后者，我相信如果你坚持同样的方法，你会让你的头发不灰白。

从 SDK：

> *createdon*属性指定创建记录的日期和时间。*要在createdon*属性中导入数据，请将包含此数据的源列映射到*overriddencreatedon*属性。
> 在导入期间，记录的*createdon属性将使用映射到**overriddencreatedon*属性的值进行更新，并且overriddencreatedon*属性*设置为导入数据的日期和时间。
> 如果没有源值映射到*overriddencreatedon*属性，则*createdon*属性设置为导入数据的日期和时间，并且*overriddencreatedon*属性未设置为任何值。

*   [链接到 BlogSpot](http://ronaldlemmen.blogspot.co.uk/2008/01/overriddencreatedon.html)
*   [链接到社交 MSDN](http://social.microsoft.com/Forums/sv/crm/thread/251c9ad8-61dd-4e3d-a5de-86fa75738d4c)

# oracle10g - 使用Oracle查询每周的第一个值等等

> ID：13838724
> 
> 赞同：0
> 
> 时间：2012-12-12T11:27:05.680
> 
> 标签：oracle10g

我有一张桌子

> 2010-4-16 199
> 
> 2010-4-19 310
> 
> 2010-4-20 229
> 
> 2010-4-21 275
> 
> 2010-4-22 64
> 
> 2010-4-23 504
> 
> 2010-4-26 631
> 
> 2010-4-27 565
> 
> 2010-4-28 286

理想的结果是：

> 2010-16 199
> 
> 2010-17 310

...

我想查询每周分组数据的第一个值，查询如下：

```
 select distinct(to_char(date1,'yyyy-mm-w')) b,
first_value(a) OVER 
(partition by  distinct(to_char (date1,'yyyy-mm-w'))
 order by date1
range BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING )  c,

from t4 
```

关于这个问题的正确解决方案是什么？我可以查询数据，但不能查询我想要的实际结果。结果之前引用的sql查询的结果是

> 2010-16 199
> 
> 2010-17 504

但不幸的是不是我想要的。

需要帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:38:49.660

通过使用您的查询稍作修改::

```
 select distinct to_char(dt,'yyyy-iw') b,
first_value(num) OVER 
(partition by to_char (dt,'yyyy-iw')
 order by dt range BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING )  c
from tbl
order by 1; 
```

你得到像这样的o/p::

```
B   C
2010-04-15  199
2010-04-16  310
2010-04-17  631 
```

您想根据该日期的总周数对数据进行分组。

请参阅我已使用选项**“iw”**来获得此结果。

# android - 仅使用移动信号强度的移动设备的位置？

> ID：13838725
> 
> 赞同：0
> 
> 时间：2012-12-12T11:27:12.700
> 
> 标签：android, mobile, location, signal-strength

是否可以编写应用程序以仅使用来自不同移动塔的移动信号强度来获取移动设备的大致位置？我的意思是开发人员可以访问这些数据还是仅限于服务提供商？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:33:00.987

[http://developer.android.com/guide/topics/location/strategies.html](http://developer.android.com/guide/topics/location/strategies.html)

您可以获取 GPS 或网络位置，或一次获取两个。从 Cell Towers 或 WI-FI 获取位置的权限是：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /> 
```

只需注册一个监听器并获取更新

```
LocationManager manager = (LocationManager)
            context.getSystemService(Context.LOCATION_SERVICE);

manager.requestLocationUpdates(
            LocationManager.NETWORK_PROVIDER, 60, 10, listener); 
```

# python - 将子字符串匹配到 django 中的字符串列表

> ID：13838728
> 
> 赞同：0
> 
> 时间：2012-12-12T11:27:30.213
> 
> 标签：python, django

我有一个字符串列表（比如`s = ['1995','1996','1997']`）。我需要在我的数据库中查找所有行，其中某些列的前四个字符匹配该列表中的任何项目（例如`1995-01-01`或`1996-05-04`）。

Found `__in`，但它找到完全匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:34:38.500

```
import operator
years = ['1995','1996','1997', ...]
query = reduce(operator.or_, [Q(year__startswith=year) for year in years])
results = queryset.filter(query) 
```

这将为您提供类似于在给定数据集`WHERE year LIKE '1995%' OR year LIKE '1996%' ...;`时[可能表现不佳](https://stackoverflow.com/questions/3074713/in-vs-or-in-the-sql-where-clause)的 SQL 。使用手动编写 SQL 可能会获得更好的性能[`extra()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra)

奇怪的是，我刚刚用几乎完全相同的代码回答[了另一个问题！](https://stackoverflow.com/a/13838553/396300)

# entity-framework - 使用实体框架更新多条记录

> ID：13838729
> 
> 赞同：0
> 
> 时间：2012-12-12T11:27:31.947
> 
> 标签：entity-framework, entity-framework-4, entity-framework-5

我正在使用 Entity Framework 5。我正在寻找一种更好的方法来更新多条记录。

人们在谈论[EF 扩展](https://github.com/loresoft/EntityFramework.Extended)。但我不确定如何在我的场景中使用它。

这是我的方法签名。

```
internal void Update( List<Models.StockItem> stockItemsUpdate) 
```

我需要更新所有相应的`stockitem`实体。

```
using (var context = new  eCommerceEntities())
{
   var items = context.StockItems.Where(si => stockItemsUpdate.Select(it => it.ID).Contains(si.ID));
} 
```

我相信上面的查询会返回这些实体。

在这种情况下如何使用 EF 扩展？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:11:51.483

在`EntityFramework.Extended`'s[`BatchExtensions`](https://github.com/loresoft/EntityFramework.Extended/blob/master/Source/EntityFramework.Extended/Extensions/BatchExtensions.cs)中有一个`Update`带有这个签名的扩展方法：

```
public static int Update<TEntity>(
        this IQueryable<TEntity> source,
        Expression<Func<TEntity, TEntity>> updateExpression) 
```

您可以按如下方式使用它：

```
items.Update(item => new StockItem { Stock = 0 }); 
```

将所选项目的库存设置为 0。

# ios - 刷新 UINavigationController 堆栈中的视图

> ID：13838731
> 
> 赞同：1
> 
> 时间：2012-12-12T11:27:42.480
> 
> 标签：ios, ios5, uinavigationcontroller

我目前正在 viewDidLoad 方法中构建我的视图，它添加了链接到另一个视图的各种按钮。我遇到的问题是，当用户单击一个按钮并进入另一个视图时，他们可以购买 IAP，然后当用户单击后退按钮时，我希望视图“刷新”以显示此购买现在已经活跃起来了。

如何刷新视图？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T19:32:27.613

构建视图，`viewDidLoad`因此您只需添加一次控件，但在`viewWillShow`. 请记住，`viewWillShow`将在构建完成后立即刷新它`viewDidLoad`。因此，将定义控件外观的值保留`viewController`在委托可变数组中

`NSMutableArray`例如，在您的`AppDelegate.h`和 .m中创建并启动

在.h界面

```
NSMutableArray *yourArray; 
```

添加属性

```
@property (retain, nonatomic) NSMutableArray *yourArray; 
```

米

```
@synthesyze yourArray; 
```

在 .m 中启动它

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

yourArray=[[NSMutableArray alloc]init];

//add initial objects to it as many as you have controls
} 
```

在第一`viewController`

```
#import "AppDelegate.h"

-(void)viewWillShow:(BOOL)animated{

AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

//pull objects from array and apply to your controls, say you have a string as a 1st obj

NSString *tmpStr=[appDelegate.yourArray objectAtIndex:0];//use it some where, say button's title

//etc
} 
```

`viewController`您将根据用户的选择在第二次更改这些值

```
#import "AppDelegate.h" 
```

`viewController`在 yourArray中的第二个代码更新值的某处说

```
-(void)viewWillDisappear:(BOOL)animated{

AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

//run a loop and update all objects

[appDelegate.yourArray replaceObjectAtIndex:i withObject:newObj];
} 
```

当您返回 1st 时`viewController`，`viewWillShow`将从您的委托数组中刷新它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:36:08.433

任何视图都可以通过调用`setNeedsDisplay`该视图来显式刷新。
此外，您不应将条款`UIViewController`与`UIView`.
我假设你没有刷新问题，你只会在自编程的自定义视图中遇到。我预计相关视图的数据没有更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:13:55.767

你有几个选择。存储是否进行了购买，然后在您希望更改的视图的 viewWillAppear 方法中运行检查是否进行了购买的方法

或者...设置一个委托回调，在购买页面上进行更改时更改按钮（http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-custom-delegates/）

或者... 通过从 navigationController 堆栈访问前一个视图直接操作它 ([[self.navigationController viewControllers]objectAtIndex:YOURVIEW])

# php - CakePHP 在登录时保存日期/时间

> ID：13838735
> 
> 赞同：3
> 
> 时间：2012-12-12T11:27:55.897
> 
> 标签：php, cakephp, datetime, controller, save

我的控制器中有波纹管登录功能，并试图将登录日期/时间保存到 last_login 字段下的用户数据库表中，这是一个 DATETIME 字段，登录工作正常，但该字段永远不会被填充..关于什么的任何想法停止这个或如何解决应该得到的输出？

```
public function login() {
    $this->layout = 'login';
    if ($this->request->is('post')) {
        if ($this->Auth->login()) {

            $this->User->id = $this->Auth->user('id'); // target correct record
            $this->User->saveField('last_login', date(DATE_ATOM)); // save login time

            $this->redirect($this->Auth->redirect());
        } else {
            $this->Session->setFlash('Invalid username or password, try again', 'default', array('class' => 'warning'));
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T11:32:11.367

如果您在 db 中的 last_login 字段设置为`DATETIME`then，您需要执行以下操作：

```
$this->User->saveField('last_login', date("Y-m-d H:i:s")); 
```

因为`DATE_ATOM`返回类似的东西`2012-08-15T15:52:01+00:00`，所以它不会被插入尝试禁用 AuthComponent::autoRedirect，比如

```
public $components = array(
    'Auth' => array(
        ......
        'autoRedirect' => false  //set to false to disable auto redirect
    ),
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:15:46.613

```
Use this to print query:

$log = $this->User->getDataSource()->getLog(false, false);
debug($log);
exit; 
```

# c++ - file.cpp from windows to linux

> ID：13838736
> 
> 赞同：-3
> 
> 时间：2012-12-12T11:27:57.153
> 
> 标签：c++, linux, windows

I have a file.cpp which as an file.h included. This works on windows. Is there a easy way to change the code to be compiled on linux or do I have to rewrite all of it.

Thanks in advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:31:00.790

Some Pointers towards Porting Code to different OS:

1.  Check all the system headers included in the file. If there are OS specific headers, put them under OS specific macros and add different header files appropriate to Linux OS
2.  Check all the system function calls and replace them.
3.  Check if there are any compiler specific macros or code present and change it.
4.  Check if the data types used are supported in all OS.

# jquery - 最小高度 100% 侧边栏 - 滚动时在下方创建一个间隙

> ID：13838737
> 
> 赞同：2
> 
> 时间：2012-12-12T11:28:09.353
> 
> 标签：jquery, html, css

如果你看这里，你可以看到如果右边有一个滚动条，左边的侧边栏应该填满整个身体，在底部会产生一个空隙。

```
**CSS**

html, body {
    height: 100%;    
    min-height: 100%;
}
.wrapper {
    width: 960px;
    margin: 0 auto;
    position: relative;
}
.sidebar {
    background: black;
    width: 260px;
    float: left;
    height: auto !important;
}
.wrapper, .sidebar {
    height: 100%;
    min-height: 100%;    
}

.content {
    float: left;
    margin-top: 15%;
    width: 700px;
}

footer {
    float: left;
    padding: 15px 0;
    width: 700px;
    text-align: center;    
}
​

**HTML** 

<div class="wrapper">
            <div class="sidebar">
                <nav> 
                    <ul>
                        <li><a href="#">Menu</a></li>
                        <li><a href="#">Menu</a></li>
                        <li><a href="#">Menu</a></li>
                        <li><a href="#">Menu</a></li>
                        <li><a href="#">Menu</a></li>
                    </ul>
                </nav>
            </div>
            <div class="content">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent ac ligula congue felis accumsan scelerisque sed eu risus. Nulla sed leo velit. Sed at commodo orci. Nam vitae varius risus. Vestibulum facilisis tortor aliquam orci rutrum vestibulum. Cras tincidunt pretium mauris non tristique. Vestibulum et justo tortor, at facilisis erat.</p>
                <footer>
                    <p>FOOTER</p>
                </footer>
            </div>
        </div>​ 
```

[http://jsfiddle.net/5YHX7/567/](http://jsfiddle.net/5YHX7/567/)

以及发生的事情的屏幕截图

![问题](../Images/5573614c61f1d13a394b32615ba1f7c0.png) 我希望黑色继续向下页面到内容的底部。

我意识到 100% 的高度仍然有效，但它似乎填充了窗口而不是继续填充内容。

我可以使用仿列技术，但理想情况下我想在 css 中解决这个问题，我也愿意使用 jquery。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:55:00.847

[http://jsfiddle.net/5YHX7/578/](http://jsfiddle.net/5YHX7/578/)检查这个例子。您需要固定侧边栏并将一些元素浮动到右侧。希望能帮助到你。

突出显示的 CSS 更改：

```
 .sidebar {
  background: black;
  width: 260px;
  float: left;
  height: auto !important;
  position:fixed;
 }

 .content {
  float: right;
  margin-top: 15%;
  width: 700px;
 }

 footer {
  float: right;
  padding: 15px 0;
  width: 700px;
  text-align: center;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T09:22:59.117

也许有点晚了，但我的解决方案是一个仅基于 css 的解决方案。我没有通过 js (jquery) 为侧边栏提供 100% 的高度，而是在侧边栏之前创建了一个元素，该元素具有相同的颜色和宽度，并且是固定的：

```
sidebar:before {
    content: " ";
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    width: 200px;
    display: block;
    background-color: black;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:37:33.377

只需输入保证金：0；在体内，你就完成了。

```
html, body
        {
            height: 100%;
            margin:0;
        } 
```

完整的例子

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <style>
        html, body
        {
            height: 100%;
            margin:0;
        }
        .wrapper
        {
            width: 960px;
            margin: 0 auto;
            position: relative;
        }
        .sidebar
        {
            background: black;
            width: 260px;
            float: left;
        }
        .wrapper, .sidebar
        {
            height: 100%;
            min-height: 100%;
        }

        .content
        {
            float: left;
            margin-top: 15%;
            width: 700px;
        }

        footer
        {
            float: left;
            width: 700px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="sidebar">
            <nav> 
                    <ul>
                        <li><a href="#">Menu</a></li>
                        <li><a href="#">Menu</a></li>
                        <li><a href="#">Menu</a></li>
                        <li><a href="#">Menu</a></li>
                        <li><a href="#">Menu</a></li>
                    </ul>
                </nav>
        </div>
        <div class="content">
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent ac ligula congue
                felis accumsan scelerisque sed eu risus. Nulla sed leo velit. Sed at commodo orci.
                Nam vitae varius risus. Vestibulum facilisis tortor aliquam orci rutrum vestibulum.
                Cras tincidunt pretium mauris non tristique. Vestibulum et justo tortor, at facilisis
                erat.</p>
            <footer>
                    <p>FOOTER</p>
                </footer>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:01:25.510

我找到的解决方案是使用 jquery

```
var contentHeight = $(".content").outerHeight();
    $(document).ready(function() {
        $(".sidebar").css('min-height', contentHeight);
    }); 
```

它使用一个变量来获取内容的高度，然后将此值作为最小高度应用到侧边栏，这样如果某人的视口很小或内容非常长，它将应用内容的最小高度.

# magento - Magento - local.xml 无法识别 customer_logged_out

> ID：13838739
> 
> 赞同：0
> 
> 时间：2012-12-12T11:28:11.983
> 
> 标签：magento

我正在使用 Magento 1.7.0.2，并且只想在客户注销时显示一些链接。

如果我将以下代码添加到 local.xml，则不会发生任何事情（我已注销）：

```
 <customer_logged_out>
        <reference name="top.links">
            <action method="addLink" translate="label title" module="customer"><label>Test</label><url helper="customer/getLoginUrl"/><title>Test</title><prepare/><urlParams/><position>100</position></action>
        </reference>
        <remove name="reorder"></remove>
</customer_logged_out> 
```

但是，一旦我删除了 customer_logged_out 标签，就会显示链接（对所有人），即：

```
 <reference name="top.links">
        <action method="addLink" translate="label title" module="customer"><label>Test</label><url helper="customer/getLoginUrl"/><title>Test</title><prepare/><urlParams/><position>100</position></action>
    </reference>
    <remove name="reorder"></remove> 
```

如果我尝试使用 customer_logged_in 标签，也不会显示任何内容。

为什么这些logged_in/logged_out 标签在local.xml 中不起作用？

# mysql - 带有连接的特定选择

> ID：13838745
> 
> 赞同：0
> 
> 时间：2012-12-12T11:28:45.330
> 
> 标签：mysql, join

大家好

我正在尝试获取 DISTINCT 用户 ID 的列表：

*   进行了现场签到
*   和我在同一个match_id
*   是我的朋友（他们的 fb_user_uid 在我的 fb_friends 字段中）
*   并且超过 3 个（正如我所说，在同一场比赛中）

这是DB的设计。

![在此处输入图像描述](../Images/1ba5e703fc9adb3796b4661cc6c14a27.png)

具有值的字段 fb_friends 示例：1430344176,646668302,1471539456,546098131

我已经检索了现场比赛，有超过 3 个不同的用户，但我不知道如何检查他们是否是我的朋友 :(。

这是我尝试过的，但它没有返回预期的结果。

```
SELECT DISTINCT
    f.id
FROM
    fanusers f
WHERE
    f.fb_user_uid IN(
        SELECT
            f1.fb_friends
        FROM
            fanusers f1
        JOIN checkins c1 ON f1.id = c1.fanuser_id
        WHERE
            c1.ctype = 'live'
        AND 
            c1.match_id IN(
                SELECT
                    c2.match_id
                FROM
                    checkins c2
                GROUP BY
                    c2.match_id
                HAVING
                    COUNT(*)> 3
            )
    ) 
```

要准确理解 fanusers 的表结构，请看这张图片：

![在此处输入图像描述](../Images/22fabb1e1a4137bc8c31e045c429824d.png)

除了我的解决方案之外，它很丑，它也很慢:(

任何想法？谢谢。

# mysql - MySQL JOIN 语法优先级

> ID：13838746
> 
> 赞同：0
> 
> 时间：2012-12-12T11:28:45.910
> 
> 标签：mysql, join

我有两张桌子

```
members
+------------+-------------+------+-----+---------+----------------+
| Field      | Type        | Null | Key | Default | Extra          |
+------------+-------------+------+-----+---------+----------------+
| mindex     | smallint(4) | NO   | PRI | NULL    | auto_increment | 
| memberid   | smallint(5) | YES  | MUL | NULL    |                | 
| forenames  | varchar(40) | YES  |     | NULL    |                | 
| surname    | varchar(20) | YES  |     | NULL    |                | 
| nameprefix | varchar(30) | YES  |     | NULL    |                | 
| namesuffix | varchar(50) | YES  |     | NULL    |                | 
| died       | smallint(5) | YES  |     | NULL    |                | 
| notes      | text        | YES  |     | NULL    |                | 
+------------+-------------+------+-----+---------+----------------+ 
```

和

```
memberships;
+------------+-------------+------+-----+---------+----------------+
| Field      | Type        | Null | Key | Default | Extra          |
+------------+-------------+------+-----+---------+----------------+
| mshipindex | smallint(4) | NO   | PRI | NULL    | auto_increment | 
| memberid   | smallint(5) | YES  | MUL | NULL    |                | 
| msid       | smallint(5) | YES  |     | NULL    |                | 
| mstype     | varchar(20) | YES  |     | NULL    |                | 
| msyear     | smallint(5) | YES  |     | NULL    |                | 
| msposition | varchar(15) | YES  |     | NULL    |                | 
+------------+-------------+------+-----+---------+----------------+ 
```

我想搜索一年的会员资格（在`memberships.msyear`）并获得`memberships.mstype`和`members.surname`。我只是无法获得正确的 JOIN 语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:32:57.390

你将使用这样的东西：

```
select m.surname,
  s.mstype
from members m
left join memberships s
  on m.memberid = s.memberid
where s.msyear = yourYear 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/ea813/1)

我用 a`LEFT JOIN`来返回所有成员，即使是那些可能没有会员记录的人。如果成员在成员资格表中没有记录，则它将返回 null。

如果您在学习 JOIN 语法方面需要帮助，这里有一个[关于连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:31:44.900

如果您只需要语法这里是：

```
Select *
from members m
inner join membership ms on (m.memberid = ms.memberid)
where memberships.msyear = 2012 
```

# php - PHP while 循环一分为二

> ID：13838755
> 
> 赞同：0
> 
> 时间：2012-12-12T11:29:18.247
> 
> 标签：php, mysql, while-loop

我正在运行一个 while 循环，它从 mySQL 中获取行并将它们回显出来。很标准。但是，第一个项目需要有不同的 HTML 标记，接下来的两个项目，然后它会继续正常进入 while 循环。

目前，我的 while 循环看起来像这样：

```
while( ( $row = mysql_fetch_object( $result ) ) !== false )
    {   

    // Places ad based of predefined variable frequency
    if ($ad == $adFrequency){

     echo '<div class="one-advertisement-article clearfix">';
     echo '<div class="grid_9 suffix_2"><img src="http://placehold.it/263x75/000000/ffffff"></div>';
     echo '<div class="grid_1"><a class="navigate-right-icon ss-icon" href="#">navigateright</a></div>';
     echo '</div>';

     $ad = 0;
    }

    echo '<div class="one-news-article clearfix">';
    if( $row->imagelibid )
            {
                $imageid = intval( $row->imagelibid );
                $image_result = mysql_query( "SELECT * FROM imagelib WHERE id = {$imageid}", $db );

                $image_row = mysql_fetch_object( $image_result );

                $image_url = "http://www.#.com/slir/w280/imagelib/" . $image_row->id . "_" . $image_row->filename;

                echo '<div class="grid_4"><a href="#"><img src="'.$image_url.'"></a></div>';        
            }
    else {
                echo '<div class="grid_4"><div class="news-placeholder"><span class="ss-icon">ellipsischat</span></div></div>';
        }

    echo '<div class="grid_7">';
    echo '<h2><a href="item-news.php?id='.$row->id.'">'.$row->title.'</a></h2>';

    $published_date = date('D, d M Y', strtotime($row->datein));
    echo '<p class="published-date">'.$published_date.'</p>';

    echo '</div>';
    echo '<div class="grid_1">';
    echo '<div class="news-item-vertical-sep">&nbsp;</div>';
    echo '<p></p>';
    echo '</div>';
    echo '</div>';

    $ad++;

    } 
```

这很好用，但我需要获取前三个新闻项目并使用它：

```
echo ' <div class="one-news-featured-article clearfix">';
    echo '  <div class="grid_12">';

    if( $row->imagelibid )
            {
                $imageid = intval( $row->imagelibid );
                $image_result = mysql_query( "SELECT * FROM imagelib WHERE id = {$imageid}", $db );

                $image_row = mysql_fetch_object( $image_result );

                $image_url = "http://www.#.com/slir/w280/imagelib/" . $image_row->id . "_" . $image_row->filename;

                echo '<div class="large-featured-image-container"><img src="'.$image_url.'">/div>'; 
            }   

    echo '      <div>';
    echo '        <h2><a href="item-news.php?id='.$row->id.'">'.$row->title.'</a></h2>';
    echo '      </div>';
    echo '    </div>';
    echo '  </div>';
    echo '  <div class="grid_6">'; 
```

有什么帮助吗？本质上，它需要将第二个代码应用于查询中的前三个项目，然后继续执行当前 while 循环中包含的代码 - 我猜是一个偏移量。

谢谢，R

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:37:56.543

这很简单。我希望我正确理解了你的问题：

```
$i = 0;
while ( ( $row = mysql_fetch_object( $result ) ) !== false ) {
    if ($i < 3) {
        // First code
    } else {
        // Second code
    }
    $i += 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T12:06:43.777

首先，您应该避免使用任何`mysql_`函数，因为它们都已被弃用，并将从 PHP 的未来版本中删除。我建议改用 PDO。请参阅[本教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)以开始使用。

然后，它只是做这样的事情：

```
foreach($db->query($query) as $index => $row) {
    if ($index < 3) {
        // first 3 items
    } else {
        // other items
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:35:25.517

您可以使用简单的计数器和 if 语句轻松完成：

```
$count = 0;

while(fetching) {
    if($count < 3) {
        // items 1, 2 and 3
    } else {
        // do normal
    }

    $count++;
} 
```

# itext - ColumnText.ShowTextAligned

> ID：13838757
> 
> 赞同：0
> 
> 时间：2012-12-12T11:29:29.833
> 
> 标签：itext

有两个 PDF 文档 - A.pdf 和 B.pdf。它们具有相同的页面大小。我在两个文档的页面中添加了一个对象短语。

```
Stamper_A:=New PdfStamper(reader_A,  
             New System.IO.FileStream(
                 out_file1, 
                 System.IO.FileMode.CreateNew));

ContentByte_A:=Stamper_A.GetOverContent(2);
ColumnText.ShowTextAligned(
    ContentByte_A, 
    Element.ALIGN_LEFT, 
    phrase, 
    75, 
    680, 
    0);

Stamper_B:=New PdfStamper(reader_B,  New System.IO.FileStream(out_file2, System.IO.FileMode.CreateNew));
ContentByte_A:=Stamper_B.GetOverContent(2);
ColumnText.ShowTextAligned(ContentByte_B, Element.ALIGN_LEFT, phrase, 75, 680,0); 
```

但在文件 out_file1 中的短语高于文件中的 out_file2。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:00:15.793

A.pdf 和 B.pdf 具有不同的 MediaBox 和/或不同的 CropBox。

# c# - 水晶报表参数详细打印1次以上

> ID：13838759
> 
> 赞同：0
> 
> 时间：2012-12-12T11:29:41.133
> 
> 标签：c#, visual-studio-2010, crystal-reports

我`crystal report`只在 C# 中使用参数，我将参数放在详细部分。我希望这些参数打印超过 1 次（将在运行时给出）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:14:15.860

为什么不通过公式中的循环打印它？

```
local numbervar TimesToPrint := 8;
local numbervar i; //for-loop counter 
local stringvar out; //return variable

for i := 1 to TimesToPrint do
    out := out + {?YourParameter} + chr(13); //format your output

out
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:57:51.847

如果您需要打印参数的可变次数是“合理的”，您可以创建该数量的报告页脚部分并将参数放置在其中的每一个中。然后根据您希望它打印的次数将部分抑制公式设置为抑制。

如果您希望它们打印的次数可能非常高，您可能需要使用某种数据源。然后，您可以将参数放在详细信息部分，并使用该参数来驱动返回的记录数。

# asp-classic - 什么会导致经典的 asp 脚本在 ScriptTimeout 值之后继续运行？

> ID：13838762
> 
> 赞同：0
> 
> 时间：2012-12-12T11:29:59.067
> 
> 标签：asp-classic

我有一个经典的 asp 脚本，其中包含以下代码行：

```
Server.ScriptTimeout = 60*90; 
```

这意味着它将在 90 分钟后超时。

但它在 90 分钟后继续。所以肯定有别的东西压倒它。脚本中没有此变量的其他设置。

所以我的问题是，什么可以覆盖这个设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:46:58.580

根据 Microsoft 文档，当服务器组件正在处理时，超时不会生效：

[http://msdn.microsoft.com/en-us/library/ms524831%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms524831%28v=vs.90%29.aspx)

也许您正在调用 ASP 领域之外的外部服务器组件，这导致脚本超时被忽略。

# c# - DataTable 行删除错误

> ID：13838764
> 
> 赞同：0
> 
> 时间：2012-12-12T11:30:04.010
> 
> 标签：c#, asp.net, visual-studio-2008

我有一个数据表说 DT 有 11 行，我尝试使用删除 id=3 的行

```
string DeptID ="3";
string s = "id='" + DeptID + "'";
rows = DT.Select(s);
foreach (DataRow r in rows)
r.Delete(); 
```

我有 5 行 id=3 但删除后数据表中的行数没有改变，并且删除行的每个字段（列）中都有一些红色符号。有人知道为什么会这样吗？

每当我尝试使用

```
 for(int i=0;i<dt1.Rows.Count;i++)
      {
      if (dt1.Rows[i][0].ToString() == "")
        {
        }
      } 
```

它显示错误'已删除的行不能接受'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T11:42:38.757

删除行后，请将 Acceptchanges() 传递给数据表，以便与新数据同步。

```
dt.AcceptChanges();
//And u can also add a condition,while fetching the data,
foreach (DataRow dr in rows)
{  if(dr.RowState!=DataRowState.Deleted ||dr.RowState!=DataRowState.Detached)
{
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:36:46.917

您将该行标记为删除，这就是出现红色符号的原因。`row.Delete()`只会将您的行状态更改为已删除。当您接受然后更改（通过`AcceptChanges`方法）时，将发生实际删除。

有关更多信息，这些是一些 msdn 链接： [http://msdn.microsoft.com/en-us/library/03c7a3zb.aspx](http://msdn.microsoft.com/en-us/library/03c7a3zb.aspx) http://msdn.microsoft.com/en-us/library/system.data.datarow .delete.aspx [http://msdn.microsoft.com/en-us/library/system.data.datarow.acceptchanges.aspx](http://msdn.microsoft.com/en-us/library/system.data.datarow.acceptchanges.aspx)

# c++ - 分配内存后构造函数未捕获的异常

> ID：13838766
> 
> 赞同：2
> 
> 时间：2012-12-12T11:30:12.270
> 
> 标签：c++, exception, constructor, shared-ptr

我已经阅读了 Michael Burr 关于引发异常的构造函数的精彩总结，这里是：[以下代码会导致 C++ 中的内存泄漏](https://stackoverflow.com/questions/147572/will-the-below-code-cause-memory-leak-in-c)

我的问题是：当从构造函数调用的函数引发异常时，行为是否相似？即，如果异常没有在它被抛出的地方被捕获，因此它会爬到构造函数并进一步爬到调用构造函数的函数。

我特别想知道该对象的类中包含的成员对象是什么，它们的析构函数会被调用吗？更具体地说，在我的例子中，它是关于 boost::shared_ptr 类型的成员。

考虑以下示例：

```
class A {
    A() { throw some_exception }
};

class B {
    B() { A a = new A(); }
};

class C {
    boost::shared_ptr<B> p2b;
    int i;
    int *pint;
    someclass objsomeclass;
    someclass* psomeclass;

public:
    C() {
        objsomeclass = someclass();
        psomeclass = new someclass();
        pint = new int(); 
        p2b(new B);
    }
};

void foo()
{
    C c();
}

main()
{
    foo();
} 
```

会调用 p2a 的析构函数吗？如果您能指出一个涵盖此案例的适当且可靠的资源，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:44:39.307

假设您更改代码以使其编译，`p2a`(now `p2b`) 的析构函数将被调用，因为它已成功默认构造。但是，它仍将保持 NULL，因为您尝试在主体中重置它`C::C`失败。

分配的内存`new B`将由堆栈展开过程自动清理。但是，`pint`两者都`psomeclass` *将*被泄露，因为您没有为这些成员使用 RAII。

为了澄清，让我们单步执行代码：

```
C::C() {
    objsomeclass = someclass();

    psomeclass = new someclass();
    pint = new int();

    p2b.reset(new B);
    /* in your code as posted, the call sequence is:
       new B (allocate sizeof B)
         -> B::B
           -> new A (allocate sizeof A)
             -> A::A which throws
           <- new A failed, so memory is freed
         <- B::B failed (initialized subobjects would be
            destroyed here, but there are none)
       new B failed, so memory is freed
    */
} 
```

注意：

*   所有成员都已经默认初始化（因为您没有使用初始化列表），所以当主体展开时它们都会被`C::C`销毁
*   如果`psomeclass`并且`pint`是智能指针，这将释放它们动态分配的内存。他们不是，所以这被泄露了。

一般来说，使用初始化列表和 RAII 会更好。

作为参考，也许从这篇（非常古老的）文章开始：[GOTW 66](http://www.gotw.ca/gotw/066.htm)

# .net - WCF Silverlight 客户端收到 404 未找到轮询消息的响应

> ID：13838777
> 
> 赞同：7
> 
> 时间：2012-12-12T11:30:58.137
> 
> 标签：.net, wcf, silverlight, polling, pollingduplexhttpbinding

最终，WCF 双工 Silverlight 4 客户端开始收到`404 Not Found`轮询消息错误，轮询从 WCF 服务发送到 Silverlight 客户端后，有时会在第二轮轮询时发生这种情况，有时连接工作数小时甚至数天，但大部分在第一分钟失败。

！有趣的是，这个问题就像使用`MaxMessagesPerPoll`双工模式时已知的 Silverlight 4 错误一样，[这里](http://blogs.msdn.com/b/silverlightws/archive/2010/12/15/pollingduplex-using-multiplemessagesperpoll-issue-in-latest-sl4-gdrs.aspx)和[这里](https://stackoverflow.com/questions/4184469/silverlight-pollingduplex-innerchannel-faulted-with-multiplemessagesperpoll-ser)描述了解决方案，但我使用的是`SingleMessagePerPoll`模式。无论如何，我尝试`ClientStack`按照建议使用，但没有任何改变。

一般流程：

1.  SL 客户端执行 WCF 服务方法，收到响应
2.  然后*立即*SL 客户端开始向服务发送轮询消息，然后获取第二个或 Ns 轮询消息的异常

    > System.Net.WebException：远程服务器返回错误：NotFound

3.  Fiddler 仅显示`404`民意调查消息的空响应
4.  然后引发客户端 Channel Faulted 事件

我正在尝试在出现此类故障后重新连接 SL 客户端，单次重新连接重试流程：

1.  处理`Faulted`事件
2.  取消订阅所有频道事件，例如`Closed/Closing/Opened/Opening`
3.  使用正确的方式关闭频道`try { close } catch { abort }`
4.  所有以下内容都在一个新的线程投票线程中：（我发现这有点稳定 -[请参阅这篇文章](http://www.silverlightplayground.org/post/2009/09/25/Handling-faults-on-PollingDuplex-while-server-is-not-available.aspx)）
5.  等待 45-70 秒
6.  使用同一个`DuplexChannelFactory<T>`实例创建一个新频道，订阅所有频道事件，仅用于记录目的
7.  执行 WCF 服务方法

经过 1-10 次重试（约 1-10 分钟）后，客户端最终连接到服务器并继续正常轮询。

在 WCF 服务日志中，我看到它得到了所有客户端请求，没有任何异常处理，所以 Silverlight 客户端似乎发生了一些事情。

# 基本信息：

*   .NET 框架 4.0
*   轮询双工
*   异步 WCF 方法
*   IIS 6.0 托管的 WCF 服务
*   Silverlight 4 客户端
*   客户端操作系统：Windows XP SP2
*   服务器操作系统：Windows 2003 R2 SP2
*   NTLM 身份验证
*   双工模式：SingleMessagePerPoll
*   还有一个 WCF 服务在我的服务开始工作之前执行请求/回复，它不使用双工连接
*   在 SL 客户端服务上，我将所有内容都记录到 UI 中，以便查看所有事件流并为每个特定事件留出时间
*   IIS 日志、服务器事件日志中没有错误

# 客户：

```
var binaryBinding = new BinaryMessageEncodingBindingElement();
binaryBinding.ReaderQuotas.MaxStringContentLength = int.MaxValue;

var httpbindingElement = new HttpTransportBindingElement
{
    MaxReceivedMessageSize = 131072
};

var pollingDuplexBindingElement = new PollingDuplexBindingElement
{
    ClientPollTimeout = new TimeSpan(0, 0, 1, 30),
    InactivityTimeout = new TimeSpan(0, 8, 0, 0),
};

_binding = new CustomBinding(
           pollingDuplexBindingElement,
           binaryBinding,
           httpbindingElement)
       {
           SendTimeout = new TimeSpan(0, 0, 0, 45),
           CloseTimeout = new TimeSpan(0, 0, 0, 25),
           ReceiveTimeout = new TimeSpan(0, 8, 0, 0),
           OpenTimeout = new TimeSpan(0, 0, 0, 45)
       };

httpbindingElement.AuthenticationScheme = AuthenticationSchemes.Negotiate;
var endpoint = new EndpointAddress(_endpointAddress);
_channelFactory = new DuplexChannelFactory<TWebService>(
                       new InstanceContext(instanceOfClientServiceClass), 
                       _binding, 
                       endpoint);

// then this factory used to create a new channels
// Also for a new channel I'm setting OpTimeout
var contextChannel = newChannel as IContextChannel;
if (contextChannel != null)
{
   contextChannel.OperationTimeout = TimeSpan.FromSeconds(45);
} 
```

# 服务器：

*   WCF、PerSession、多线程
*   一切都是线程安全的
*   执行时没有服务器服务异常
*   很多日志记录，所以我看到了服务上发生了什么
*   所有 WCF 跟踪都使用 switchValue 启用`All`，没有任何可疑之处

```
<binding name="customName"
             sendTimeout="00:01:00"
             receiveTimeout="08:00:00"
             openTimeout="00:01:00"
             closeTimeout="00:00:35">
     <pollingDuplex
         inactivityTimeout="08:00:00"
         serverPollTimeout="00:01:00" />
         <binaryMessageEncoding />
           <httpTransport authenticationScheme="Ntlm"
                          maxReceivedMessageSize="131072">              
         </httpTransport>
</binding>

<behavior name="customBehavior">
        <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        <serviceDebug includeExceptionDetailInFaults="true" />
        <serviceThrottling
             maxConcurrentCalls = "500"
             maxConcurrentSessions = "500"
             maxConcurrentInstances = "500" />
</behavior> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:34:56.777

如果一切似乎都运行良好，那么这可能是网络基础设施/配置问题（例如 dns 配置）。在本地运行或使用 IP 地址而不是主机名时，您是否会遇到同样的问题？

如果您在 IIS 的站点上配置了多个绑定，也可能会出现类似的问题（有关详细信息，请参见此处：http: [//blogs.msdn.com/b/rampo/archive/2008/02/11/how-can-wcf-support -multiple-iis-binding-specified-per-site.aspx](http://blogs.msdn.com/b/rampo/archive/2008/02/11/how-can-wcf-support-multiple-iis-binding-specified-per-site.aspx) )

另一件事是您如何从服务器到客户端进行通信。如果你在一个循环中迭代客户端并一个一个地调用回调方法，那么你可能会得到显示为 404 的超时。回调通常应该在后台线程上调用（每个客户端一个）。

根据您进行通信的方式，这也可能是由死锁引起的（当 UI 线程参与向服务发送/接收消息/回调时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T14:45:50.130

在调查此 StackOverflow 帖子中描述的问题时，[为 PerSession WCF 服务调用了两次静态构造函数，](https://stackoverflow.com/questions/14031344/static-constructor-called-twice-for-persession-wcf-service)我发现当我将底层配置切换为使用单个工作进程而不是之前指定的那样时，它`Polling Duplex`开始稳定工作。我不知道为什么之前设置，因为我不拥有这台服务器，但无论如何这就是我现在所拥有的 - 在同一台机器上启动的多个 Silverlight 客户端工作稳定并且 polls polls polls 并且没有错误，所有客户端在尝试重新连接之后IIS 重新启动并回收...`IIS``AppPool``2``2``404``1`

有关更多详细信息，请参阅[性能应用程序池设置](http://msdn.microsoft.com/en-us/library/aa720391(v=vs.71).aspx)

**TL;DR：** 当 IIS 托管的 WCF 驻留在具有多个工作进程的 AppPool 中时 - 轮询双工变得不稳定。因此，在高负载的情况下，IIS 启动了第二个进程并开始在第二个进程中创建 WCF 服务实例，所以我遇到了在一个进程中创建客户端会话但似乎轮询有时到达另一个不知道当前的进程的情况连接/会话因此开始拒绝此类消息和整个连接故障。

因此，按设计轮询双工不能跨单个 IIS 服务器和 AppPool 范围内的多个进程进行扩展，换句话说，如果您有超过 1 个工作进程 - 这是 WebGarden 环境，并且[双工不能跨网络场和花园进行扩展](http://tomasz.janczuk.org/2009/09/scale-out-of-silverlight-http-polling.html)

# html - div 浮动在 div 上的文本 - 不好

> ID：13838780
> 
> 赞同：1
> 
> 时间：2012-12-12T11:31:04.960
> 
> 标签：html, css

好的，谢谢你们帮助我解决 100% 的身高问题。它现在有效..

现在我有另一个问题。

我的html：

```
<div id="menu"> Test </div>

<div id="content">

    <div id="submnu">
    Submenu 1 <br />
    <br />
    Submenu 2 <br />
    <br />
    Submenu 3 <br />
    <br />
    Submenu 4 <br />
    <br />
    Submenu 5 <br />
    <br />
    <br />
    LOGIN FORM<br />
    <br />
    <form method="POST" action="...php">
    Username:<br />
    <input type="text" name="username" style="width: 200px; border: #373c39 double 2px;" /><br /><br />
    Password:<br />
    <input type="password" name="password" style="width: 200px; border: #373c39 double 2px;" /><br /><br />
    <input type="submit" value="Login" />
    </form>

    </div>

    <div id="txt">
    <table>
    <tr>
    <td>
    <img src="images/producttest.png" border="0" />
    </td>
    <td align="left" valign="top" style="padding-top: 50px;">
    Productomschrijving: <br />
    <p>

    <div id="scimg">
    Winkelwagen<br />
    </div>

    Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.<br />
    Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. 
    <br />Donec eu libero sit amet quam egesta semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. 
    <br />Quisque sit amet est et sapien ullamcorper pharetra. 
    <br />Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. 
    <br /><br />
    Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci,<br />
    sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis.<br />
    Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue,<br />
    eu vulputate magna eros eu erat. Aliquam erat volutpat.<br />
    Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus
    <br /><br />
    Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.<br />
    Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. 
    <br />Donec eu libero sit amet quam egesta semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. 
    <br />Quisque sit amet est et sapien ullamcorper pharetra. 
    <br />Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. 
    <br /><br />
    Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci,<br />
    sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis.<br />
    Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue,<br />
    eu vulputate magna eros eu erat. Aliquam erat volutpat.<br />
    Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus
    </p>

    </tr>
    </table>
    </div>

</div> 
```

我的CSS：

```
html {
    height: 100%;
}
body {
    background-color: #28B04B;
    margin: 0;
    font-family: Verdana, Geneva, sans-serif;
    font-size: 12px;
    height: 100%;
}
#head {
    height: 147px;
    overflow: auto;
    width: 1297px;
}
#logo {
    background-image: url("images/logo.png");
    background-position: left center;
    background-repeat: no-repeat;
    float: left;
    height: 147px;
    width: 297px;
}
#header {
    background-image: url("images/headbg.png");
    background-repeat: no-repeat;
    float: left;
    height: 147px;
    width: 1000px;
}
#menu {
    background-color: #d4efdb;
    border-bottom: 2px double #373C39;
    border-top: 2px double #373C39;
    height: 30px;
    padding-left: 320px;
}
#content {
    background-color: #e9f7ed;
    height: 100%;
    overflow: hidden;
    min-height: 100%;
}
#txt {
    margin-left: 320px;
    margin-top: 10px;
}
#submnu {
    background-color: #d4efdb;
    width: 247px;
    min-height: 100%;
    overflow: hidden;
    float: left;
    padding-left: 50px;
    padding-top: 20px;
    display: block;
}
#scimg {
    background-image: url(images/scimg.png);
    background-repeat: no-repeat;
    width: 210px;
    height: 310px;
    z-index: 10;
    position: absolute;
    right: 0;
    top: 50;
    padding-top: 20px;
    padding-left: 20px;
} 
```

我创建了一个购物车（div id：scimg）。但是当我以较低的分辨率观看它时。购物车的 div 流过上下文文本。我该如何解决？希望早日收到你的消息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:35:01.483

在 div 内容处添加 height:100%
参见演示：

[演示](http://jsfiddle.net/bvMHB/)

```
#content {
    background-color: #e9f7ed;
    min-height: 100%;
    height:100%;
    overflow: hidden;
} 
```

# jquery - 使用 jQuery 的 each() 影响除一个元素之外的所有元素

> ID：13838781
> 
> 赞同：2
> 
> 时间：2012-12-12T11:31:05.837
> 
> 标签：jquery, html

一个关于 jQuery`each()`函数的快速问题；

当我使用`each()`时，通常是因为我想影响除一个之外的所有元素。例如：

```
$("a.aboutMenu").each(function () {
    $(this).css("color","#FFF");
});

$(this).css("color","#111"); 
```

有没有更好的速写方法？我意识到我可以`if`在`each`函数中添加一个，但必须有某种写法“`each`除了`$(this)`”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T11:34:33.377

在这种情况下，您甚至不需要`each`，但通常您可以使用 排除`this`选择器`not()`，并在同一步骤中应用它的 CSS：

```
$("a.aboutMenu").not($(this).css('color', '#111')).each(function() {
    $(this).css("color", "#FFF");
});​ 
```

这是可行的，因为`css()`作为 setter 使用会返回原始的 jQuery 对象，它非常适合作为参数[`not()`](http://api.jquery.com/not)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T11:35:50.600

如果您在 jQuery API 上看到，则完全一样。

在您的示例中，您是在说：对于每个 a.aboutMenu 将 css 颜色更改为白色。

你也可以写：

```
$.each('a.aboutMenu', function() { $(this).css("color","#FFF");} }); 
```

如果你需要一个控件，只需`if`在你的函数中添加一个。

* * *

编辑：

要仅删除`this`元素，您可以编写：

```
$('.aboutMenu').not(this).css('color', '#FFF'); 
```

或更好：

```
$('.aboutMenu').not(this).addClass('whiteColor'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T11:37:30.990

好吧，您可以执行以下操作：

```
$("a.aboutMenu").not( $(this) ).each(function () {
     $(this).css("color","#FFF");
});
$(this).css("color","#111"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T11:34:33.780

你可以这样做：

```
$("a.aboutMenu").css("color","#FFF");
$(this).css("color","#111"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-05T09:06:17.977

作为典型`.each()`方法的替代方法，在某些情况下使用`.siblings()`效果更好。特别是在您想要定位除一个特定元素之外的所有内容的情况下。

例如：

```
$('a.aboutMenu').on('click', function() {
  // the initiating element..
  this.css('color','#ddd');

  // all anchor siblings..
  this.siblings('a').css('color','#fff');

  // the initiating element and all '.menu' siblings..
  this.css('color','#ddd').siblings('a.menu').css('color','#fff');
}); 
```

当然，这是一个简单的示例，它不适合不会（或不应该）更新的元素，但关键是您可以从单个入口点（单击的元素、当前活动的元素等）开始工作..) 然后对它的所有兄弟姐妹进行修改。

也许有点超出这个问题的范围，但这甚至可以使用一些创造性的选择器命名来扩展。请记住，两者都`$('.menu-about')`将`$('[class=|"menu"]')`匹配一个类选择器，例如“menu-about”（有关详细信息，请参阅[此](http://www.w3.org/TR/CSS2/selector.html#matching-attrs)内容），您可以创建一个单一的、小型的、易于重用的样式更新函数，它几乎可以满足任何菜单布局。

# javascript - 如何更改 jquery.mentionsInput（jquery 插件）中的默认选项？

> ID：13838784
> 
> 赞同：2
> 
> 时间：2012-12-12T11:31:08.833
> 
> 标签：javascript, jquery, jquery-plugins, default, options

如何更改 jquery.mentionsInput（jquery 插件）中的默认选项

```
(function ($, _, undefined) {

  // Settings
  var defaultSettings = {
    triggerChar   : '@',
    onDataRequest : $.noop,
    minChars      : 2,
    showAvatars   : true,
    elastic       : true,
    classes       : {
      autoCompleteItemActive : "active"
    },
    templates     : {
      wrapper                    : _.template('<div class="mentions-input-box"></div>'),
      autocompleteList           : _.template('<div class="mentions-autocomplete-list"></div>')
    }
  };
.... 
```

如何设置其他 triggerChar 值

```
 $('textarea.mention, input.mention').mentionsInput({

    onDataRequest:function (mode, query, callback) {
      var data = [
        { id:1, name:'Kenneth Auchenberg', 'avatar':'http://cdn0.4dots.com/i/customavatars/avatar7112_1.gif', 'type':'contact' }
      ];
    }
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:49:15.873

从您设置的[文档](http://podio.github.com/jquery-mentions-input/)`triggerChar`中，例如

```
$('textarea.mention, input.mention').mentionsInput({

  onDataRequest: function(){},
  triggerChar: '#'
}); 
```

# regex - Web主机和本地主机上的.HTACCESS修改

> ID：13838787
> 
> 赞同：0
> 
> 时间：2012-12-12T11:31:21.500
> 
> 标签：regex, .htaccess

```
#Redirect non-www to www
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

目前我有这段代码，当我把它放在我的网络主机上时它就可以工作了。但问题是，在将网站上线之前，我使用我的本地主机（自己的电脑）来开发网站。因此，当我在本地主机上使用它时，网址会转到 www.localhost，这使我无法在本地主机上访问自己的网站。

有什么办法，也许是某种类型的 if 语句，只有当我实际将它放在网络主机上而不是当我将它放在本地主机上时，它才会使那段代码工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:40:43.260

是的，htaccess 中有一个 if 语句。看看这里： [http ://httpd.apache.org/docs/trunk/mod/core.html#if](http://httpd.apache.org/docs/trunk/mod/core.html#if)

您还可以看到： [HTACCESS RewriteCond without messing up localhost](https://stackoverflow.com/questions/3184018/htaccess-rewritecond-without-messing-up-localhost)

```
RewriteCond %{HTTP_HOST}  \. 
```

正如那里提到的，这应该适用于本地主机检查。

# c# - 显示文章中图像的缩略图

> ID：13838789
> 
> 赞同：1
> 
> 时间：2012-12-12T11:31:29.127
> 
> 标签：c#, asp.net, thumbnails, ravendb

所以我有这个网站，用户可以在其中发布文章，每篇文章至少包含一张照片。我想要做的是当我在网站上显示文章列表时，我还想在文章名称旁边显示一个缩略图。

棘手的部分来了：图像没有托管在我的服务器上，只是托管在某些图像托管网站上的链接。另一个问题是我不知道图片出现在帖子的什么位置（它们可能在文章的开头、结尾或中间）。

在这种情况下，创建缩略图系统的最佳方法是什么？

我在想也许我可以这样做：每次发布或编辑文章并将其存储到数据库中时，我都可以扫描整篇文章的图像链接并将第一个链接存储在数据库中的单独值中（这可能有点慢尽管）。此外，一旦我存储了这些值并且我必须显示缩略图，唯一的方法就是显示调整为缩略图大小的完整图像（这意味着用户必须下载多个完整大小的图像才能查看文章列表带缩略图）。

有没有更好的方法？（您可以看到标签中使用的技术）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:44:12.710

*   创建在文章发布后在后台运行的缩略图任务。

*   [使用正则表达式在文章 HTML 中查找图像标签](http://regexadvice.com/forums/thread/43119.aspx)。

*   [获取这些图像并创建缩略图，然后将它们本地保存在服务器的文件夹中](https://stackoverflow.com/questions/2808887/create-thumbnail-image)。

*   [保护该文件夹/位置免受盗链](http://blogs.iis.net/webdevelopertips/archive/2008/12/15/tip-34-did-you-know-how-to-stop-hot-linking-from-your-site-using-url-rewrite-in-iis-7-0.aspx)。

*   使用这些本地图片作为缩略图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:38:03.093

*   使用 HtmlAgilityPack 作为启动器从图像主机获取图像。
*   使用 ASP.NET 处理程序来生成缩略图。这样，您就不必在本地存储任何内容，缩略图仅存在于内存中，无法进行盗链

# ios - Xcode 中的本地化应用程序名称未在设备上正确显示

> ID：13838792
> 
> 赞同：2
> 
> 时间：2012-12-12T11:31:33.613
> 
> 标签：ios, xcode, localization

我的应用程序支持 22 种语言，并在 infoPlist.strings 文件中设置了

```
CFBundleDisplayName = "App Name";
CFBundleName = "App Name"; 
```

除了项目应用程序的 plist 中的应用程序已本地化显示名称标志也设置为“是”。

我的问题是在第一次运行时它按预期工作。如果我重新编译而不从设备中删除应用程序，应用程序名称将变为 xcode 中目标的名称。

我错过了什么吗？

更新：我意识到在第三次运行时，bundledisplay 名称也正确显示。目标名称来自 ${PRODUCT_NAME}。如果我将静态值设置为 bundle 名称，它会每隔第二次显示一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:53:28.183

您是否尝试清理项目（`cmd`++ `shift`）`K`并从设备中删除应用程序？

# objective-c - 如何用点分割字符串？

> ID：13838794
> 
> 赞同：-1
> 
> 时间：2012-12-12T11:31:40.797
> 
> 标签：objective-c, nsstring

我有一个 NSString`string = @"abce20aa.fasgfh458sfs456456";`

我怎样才能`abce20aa`只接受另一个字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T11:36:05.310

请参阅[componentsSeparatedByString](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/componentsSeparatedByString:)：

```
[[string componentsSeparatedByString:@"."] objectAtIndex:0] 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-12T11:49:41.467

**这可以通过这种方式完成：-**

```
string s = @"abce20aa.fasgfh458sfs456456";
 string d = s.Split('.')[0]; 
```

# android - Android - 是否可以在文本上叠加文本？

> ID：13838795
> 
> 赞同：3
> 
> 时间：2012-12-12T11:31:42.420
> 
> 标签：android, text, rendering

我想为数学创建特殊字符，用于 android 应用程序。
而且我想知道是否可以将一个字符覆盖在另一个字符之上，或者是否可以对文本的呈现方式进行一些精细控制（以及您如何去做）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T09:26:10.287

如果您需要一种显示数学方程式的通用方法，请查看[jqMath](http://mathscribe.com/author/jqmath.html)。我认为您可以使用`WebView`.

许多数学符号都有 Unicode 代码点。具体来说，圆圈内“+”符号的 Unicode 代码点是 U+2295。如果字体支持，它们可以直接渲染。有关具有相应 Unicode 代码点的一些数学符号的列表，请查看[此 Wikipedia 文章](http://en.wikipedia.org/wiki/Mathematical_operators_and_symbols_in_Unicode)。

另请查看[此问题](https://stackoverflow.com/q/1784786/165674)以获取在 Java 中使用 MathML 的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T02:13:58.210

我将扩展 View 类，然后使用您在 onDraw 方法中收到的 Canvas 对象的 drawText 方法。听起来您需要对绘制文本的坐标进行精细控制，而扩展 View 将为您提供这一点。看看 Canvas.drawText ，您可以根据需要使用 x 和 y 坐标来覆盖文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:01:36.950

试试这个：

这样您就可以添加上标文本：

```
TextView out_unit2 = (TextView) findViewById(R.id.out_unit2);
out_unit2.setText((Html.fromHtml("meter<sup><small>2</small></sup>"))); 
```

下标文字：

```
TextView out_unit2 = (TextView) findViewById(R.id.out_unit2);
out_unit2.setText((Html.fromHtml("meter<sub><small>2</small></sub>"))); 
```

您可以使用它在代码中添加尽可能多的内容。

希望它可以帮助你。

谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T21:15:06.400

它可能很快就会变得非常混乱，但是您可以使用 FrameLayout 和内部的几个 TextView 来完成它。例如，“0”的 XML 与“+”、上标“+”和下标“-”重叠：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="0"
        android:textSize="@dimen/title_bar_font_size" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="+"
        android:textSize="@dimen/title_bar_font_size" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="+"
        android:textSize="12sp"
        android:layout_marginLeft="12sp" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="-"
        android:textSize="12sp"
        android:layout_marginLeft="12sp"
        android:layout_gravity="bottom" />
</FrameLayout> 
```

导致：

![输出](../Images/b3a36b1457de52c53d5b095d87e38bc7.png)

# postgresql - 为什么在 Postgres 9 上 ON DELETE CASCADE 有时需要很长时间？

> ID：13838803
> 
> 赞同：4
> 
> 时间：2012-12-12T11:32:03.847
> 
> 标签：postgresql, postgresql-9.1

我在表之间有一些关系，这些表都与一个“所有者”表相关。所以只是为了这个例子：

*   具有 PK id 的表所有者
*   带有 PK id 和 FK owner_id 的表 Parent 指的是 Owner.id，上面有一个索引，并且 `ON DELETE CASCADE`.
*   带有 PK id 和 FK parent_id 的表 Child 引用 Parent.id，上面有一个索引，并且`ON DELETE CASCADE`.

Child 表很大（约 5000 万行），Parent 表有几千行，而 Owner 表非常小（约 10 行）。

还有一些与 Owner 和 Parent 相关的其他表，但它们相对较小（几千个）并且还具有外键索引，并且`ON CASCADE DELETE`.

有时，当我删除通过所有删除（大约 1200 万个子行和 1000 个父行）级联的所有者行时，工作速度非常快（几秒钟），但有时需要将近一个小时。

我如何弄清楚是什么原因造成的？我做`explain`了 on `delete from child where parent_id in (select id from parent where owner_id = 1)`，其中 1 是所有者行之一的 id（我尝试了各种 id 以确保）并且它说它正在使用 Bitmap Heap Scan -> Bitmap Index Scan 和 Index Scan。但是，我不确定我是否在模仿有`ON DELETE CASCADE`触发器时实际所做的事情。我怎样才能弄清楚是什么导致了这些巨大的延误？是不是有时 Postgres 更喜欢进行顺序扫描（由于行数）？

插入相同的行只需要 8 分钟（包括应用程序逻辑和几千个事务提交），所以我不明白为什么直接删除需要这么长时间。

我正在使用 Postgres 9.1.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T10:49:01.243

你说有时它会从几秒到几小时。有相当多的行要删除。您可能要处理从数据缓存到行锁的各种因素。不幸的是，如果这些是暂时的情况，那么当它没有发生时可能很难追踪它们。

您最初应该看的几件事是您是否可以找到任何模式。看看`SELECT * FROM pg_locks`它什么时候发生。当问题发生时，您还应该`SELECT * FROM pg_stat_activity`查看可能持有锁的位置。

# vb6 - TypeOf ctl Is ComboBox 给出错误“模块不是有效类型”

> ID：13838804
> 
> 赞同：1
> 
> 时间：2012-12-12T11:32:07.183
> 
> 标签：vb6

我正在尝试通过此代码清空我的 VB6 表单上的所有控件

```
Public Sub ClearControls(frmName As Form, TagName As String)
Dim ctl As Control
For Each ctl In frmName.Controls
If ctl.Tag = TagName Then

If TypeOf ctl Is TextBox Then
ctl.Text = ""
ElseIf TypeOf ctl Is ListView Then
ctl.ListItems.Clear
ElseIf TypeOf ctl Is ComboBox Then
ctl.Clear
ElseIf TypeOf ctl Is OptionButton Then
ctl.Value = False
ElseIf TypeOf ctl Is DTPicker Then
ctl.Value = Date
ElseIf TypeOf ctl Is Label Then
ctl.Caption = ""
ElseIf TypeOf ctl Is CheckBox Then
ctl.Value = 0
End If

End If
Next
End Sub 
```

检查 Combobox 和 Listview 时出现以下错误

“模块不是有效类型”

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:55:15.760

`ComboBox`您是否有一个名为or的代码模块（类、表单、.BAS 文件、用户控件）`ListView`？

尝试完全限定名称，使其不模棱两可

```
ElseIf TypeOf ctl Is VB.ComboBox Then 
```

而且我建议您取消勾选 VB6 选项中的“按需编译”，因为最好立即告知编译错误，而不是在代码执行到达问题行时。

# android - 如何在android中禁用拨号盘软键盘？

> ID：13838805
> 
> 赞同：-1
> 
> 时间：2012-12-12T11:32:08.207
> 
> 标签：android, android-keypad

我正在使用平板电脑模式下的电话应用程序。我想禁用软键盘，我们单击编辑文本。任何人都可以帮助我.. 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:36:47.403

在您的清单中：

```
 <activity android:name=".MainActivity" 

            android:windowSoftInputMode="stateHidden" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:44:06.783

用这个隐藏

```
InputMethodManager imm = (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(edit.getWindowToken(), 0); 
```

用这个来表演

```
 InputMethodManager imm = (InputMethodManager)context.getSystemService(Context.INPUT_METHOD_SERVICE); 
imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0); 
```

# google-app-engine - Jsf on Google App Engine

> ID：13838811
> 
> 赞同：2
> 
> 时间：2012-12-12T11:32:26.397
> 
> 标签：google-app-engine, jsf-2

Though ive done everything like in this tutorial [http://www.mkyong.com/google-app-engine/google-app-engine-jsf-2-example/](http://www.mkyong.com/google-app-engine/google-app-engine-jsf-2-example/)

Somtimes when i refresh/load view it throws exception, which only occurs when i run it locally

```
WARNING: /javax.faces.resource/theme.css.jsf
java.lang.NumberFormatException: Wed, 12 Dec 2012 10:32:00 GMT
    at org.mortbay.io.BufferUtil.toLong(BufferUtil.java:106)
    at org.mortbay.jetty.HttpFields$Field.getLongValue(HttpFields.java:1479)
    at org.mortbay.jetty.HttpFields.getLongField(HttpFields.java:720)
    at org.mortbay.jetty.Request.getIntHeader(Request.java:728)
    at javax.servlet.http.HttpServletRequestWrapper.getIntHeader(HttpServletRequestWrapper.java:106)
    at com.google.appengine.tools.development.ResponseRewriterFilter$RequestWrapper.getDateHeader(ResponseRewriterFilter.java:405)
    at com.sun.faces.application.resource.ResourceImpl.getIfModifiedHeader(ResourceImpl.java:370)
    at com.sun.faces.application.resource.ResourceImpl.userAgentNeedsUpdate(ResourceImpl.java:347)
    at com.sun.faces.application.resource.ResourceHandlerImpl.handleResourceRequest(ResourceHandlerImpl.java:255)
    at javax.faces.application.ResourceHandlerWrapper.handleResourceRequest(ResourceHandlerWrapper.java:125)
    at org.primefaces.application.PrimeResourceHandler.handleResourceRequest(PrimeResourceHandler.java:85)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:591)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

**web.xml**

```
<xml>

    <display-name>JavaServerFaces</display-name>

    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>

    <welcome-file-list>
        <welcome-file>faces/hello.xhtml</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- Map these files with JSF -->
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>SystemServiceServlet</servlet-name>
        <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
        <init-param>
            <param-name>services</param-name>
            <param-value/>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>SystemServiceServlet</servlet-name>
        <url-pattern>/_ah/spi/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

**welcome.xhtml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html">

<h:head>
    <title>GAE + JSF</title>
</h:head>
<h:body bgcolor="white">

    <h1>Google App Engine + JSF 2.0 example - welcome.xhtml</h1>

</h:body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:49:34.070

Seems like a know issue since GAE SDK 1.7.2

Take a look here and *star* it to be updated upon possible updates regarding the issue...

[Issue 8420: java.lang.NumberFormatException Thrown for Files Managed by JSF 2.0 Resource Management Framework](http://code.google.com/p/googleappengine/issues/detail?id=8420)

You can try using SDK prior to 1.7.2

* * *

**Edit**

Look for possible fix in here : [Issue 8415: Parsing date header as int caused NumberFormatException](http://code.google.com/p/googleappengine/issues/detail?id=8415)

# ios - 使用像 [NSArray 数组] 这样的创建者创建一个类

> ID：13838815
> 
> 赞同：0
> 
> 时间：2012-12-12T11:32:48.057
> 
> 标签：ios, class

很久以前写过，现在找不到了。

如何为使用相同语法的类创建创建者函数`[NSArray array];`？

IE

```
+ (id)object; 
```

代替...

```
- (id)initWithBlah... 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:39:05.043

它被称为**构造函数**，典型的实现可能是

```
+ (NSArray *)array
{
    return [[[self alloc] init] autorelease];
} 
```

# java - 谷歌分析异常

> ID：13838817
> 
> 赞同：0
> 
> 时间：2012-12-12T11:32:52.713
> 
> 标签：java, json, google-analytics, guava

我正在尝试使用 java api 实现谷歌分析。但我遇到了这个异常

```
java.lang.NoSuchMethodError: com.google.common.base.Joiner.on(C)Lcom/google/common/base/Joiner;
at com.google.api.client.auth.oauth2.AuthorizationCodeFlow$Builder.setScopes(AuthorizationCodeFlow.java:644)
at com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow$Builder.setScopes(GoogleAuthorizationCodeFlow.java:256)
at com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow$Builder.<init>(GoogleAuthorizationCodeFlow.java:225)
at com.stpl.pats.bl.event.general.HelloAnalyticsApiSample.authorize(HelloAnalyticsApiSample.java:71)
at com.stpl.pats.bl.event.general.HelloAnalyticsApiSample.initializeAnalytics(HelloAnalyticsApiSample.java:157)
at com.stpl.pats.bl.event.general.HelloAnalyticsApiSample.main(HelloAnalyticsApiSample.java:39) 
```

请建议我的代码有什么问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:27:05.807

显然，在运行时找到的版本没有`Joiner.on(char separator)`返回 a `Joiner`，即使 Guava 中的版本自从它从 google-collections 导入以来一直有它，所以它看起来像是另一个 jar 中代码的嵌入式版本（所以没有任何问题您的代码，仅在您的依赖项中）。

我假设`HelloAnalyticsApiSample`是您的代码并且可以修改。`main()`在第 39 行之前添加以下内容：

```
System.out.println(com.google.common.base.Joiner.class
        .getProtectionDomain().getCodeSource().getLocation()); 
```

（或使用您选择的日志框架）。然后，您应该获得包含违规版本的 jar 的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:05:29.410

就我而言，这是因为我的项目中还有一个 google-collection-rc1.jar，因此找到了 Joiner 类的旧版本（没有该方法），而不是番石榴中的正确版本罐。

要么删除该集合 jar（推荐），要么将其移到类路径中的后面，而不是 guava jar（这基本上是同一件事，因为我认为集合 jar 中的所有类都在 guava jar 中）。

# android - 用于在 Android 应用程序中登录的 Facebook 登录按钮

> ID：13838818
> 
> 赞同：2
> 
> 时间：2012-12-12T11:32:53.287
> 
> 标签：android, facebook-android-sdk

我在我的应用程序中创建了一个 Facebook 登录按钮。这是我的 Java 代码，我的活动扩展`FacebookActivity`：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);
                loginButton = (LoginButton) findViewById(R.id.authButton);
        loginButton.setUserInfoChangedCallback(new  LoginButton.UserInfoChangedCallback() {
            @Override
            public void onUserInfoFetched(GraphUser user) {
                LoginActivity.this.user = user;

            }
        });
} 
```

使用此代码，我将获得 facebook 登录。现在我想在成功登录后开始一个活动。另外我想存储用户输入的登录ID进行登录。

目前我正在尝试在我的活动中覆盖 onComplete 方法。这给了我错误，`The method onComplete(Bundle) of type LoginActivity must override or implement a supertype method`. 我正在使用 facebook-android-sdk-3.0.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:14:20.843

请将您的 SDK 更新为 Android 版 Facebook SDK 3.0 的最终版本。

FacebookActivity 类已被删除，这使您可以更轻松地将 SDK 集成到现有应用程序和代码库中。

获取设置的下载和完整演练位于[https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/) - 祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:02:40.560

要存储登录 ID，这是我进行的方式：

```
//set userID at start if session is valid
if (Utility.mFacebook.isSessionValid()){
   try{
   JSONObject me = new JSONObject(Utility.mFacebook.request("me"));
   String loginId = me.getString("id");
}catch... 
```

在 Facebook 示例[https://github.com/facebook/facebook-android-sdk/](https://github.com/facebook/facebook-android-sdk/)中，您已经创建了一个登录按钮

# cakephp-2.1 - 我怎样才能得到cakephp中的循环计数

> ID：13838820
> 
> 赞同：0
> 
> 时间：2012-12-12T11:32:52.233
> 
> 标签：cakephp-2.1

我怎样才能得到cakephp中的循环计数

```
[Book] => Array
                    (
                        [0] => Array
                            (
                                [id] => 48
                                [bookmaster_id] => 6
                                [condition] => not bad
                                [comments] => not bad
                                [isArchived] => 
                            )

                        [1] => Array
                            (
                                [id] => 50
                                [bookmaster_id] => 6
                                [condition] => ok
                                [comments] => ok
                                [isArchived] => 
                            )

                    ) 
```

我想得到 arry book 的计数值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:36:26.153

假设这个数组被称为 $books

```
count($books) 
```

除非您想在数据库中进行计数，否则请使用`find('count', array..)`

[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:41:29.983

您必须在数组中指定直接父索引：如果您只是这样做`count($books);`，输出将为 1

尝试

```
pr(count($books['Book']));
//Output 2 
```

# java - Java初始化顺序错误

> ID：13838821
> 
> 赞同：2
> 
> 时间：2012-12-12T11:32:53.460
> 
> 标签：java, static

我想问一下为什么下面的代码会导致错误：

```
class A
{
    A()
    {
       statObj.x = 5; 
    }

    int x;
    static A statObj = new A();
} 
```

我得到 ExceptionInInitializerError。我不明白为什么。在这种情况下，静态变量`statObj`将被初始化为第一个。所以，如果我是对的，静态对象`statObj = new A()`将被创建为第一个。

这个内部静态对象的创建和初始化顺序是什么？在调用内部静态对象构造函数之前，statObj.x 不是默认初始化为 0 值`statObj.A()`吗？如果是这样，为什么 statObj.x 的行为就像它没有被初始化（我认为它是默认初始化为 0 值）？

还有一个为什么这个问题只发生在构造函数中而不发生在方法中？以下代码工作正常：

```
 class A
        {
            A()
            {  
            }

            void met1()
            {
                statObj.x = 5; 
            }

            int x;
            static A statObj = new A();
        }

        public MainClass
        {
            public static void main(String[] arg)
            {
                A a = new A();
                a.statObj.met1();
            }
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T11:36:11.130

考虑会发生什么。以下静态初始化程序：

```
static A statObj = new A(); 
```

调用`A()`，然后尝试访问`statObj`：

```
A() {
  statObj.x = 5; 
} 
```

但是，此时`statObj`尚未初始化，因此`null`. A`NullPointerException`被抛出，然后被翻译成一个`ExceptionInInitializerError`（因为`NPE`已经发生在静态初始化程序中）。

第二个例子没有这个问题，因为当你尝试访问`statObj`时，它已经完全初始化了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:38:30.247

问题是您使用包含此静态的构造函数初始化了一个静态。

要正确完成，构造函数应该具有该静态值。但是要拥有静态值构造函数，必须首先完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:35:56.460

您收到 NullPointerException，因为您试图在创建该对象之前访问存储在静态字段中的实例。发生这种情况是因为它仅在其构造函数完成后才被创建。但是您是从构造函数中调用它的。

第二个代码工作正常，因为构造函数（什么都不做）有机会完成。

再次：

```
 static A statObj = new A(); 
```

`statObj``new A()`在构造函数 ( ) 完成之前将为 null 。

> 如果创建新对象，创建顺序如下： - 找到 A.class 文件， - 静态变量的初始化， - 非静态变量的默认初始化， - 为对象分配内存 - 非静态变量的显式初始化， - 构造函数执行

好吧，这里的问题是，在“静态变量的初始化”期间，您正在调用尝试使用相同静态变量的构造函数，如果您愿意的话，会在您的序列中向前跳跃一点。

> 那么当我们创建 statObj 时，statObj.x 不应该在调用 statObj 构造函数之前默认初始化（按 0）吗？

是的，但这不是这里的问题。这里的问题是，`statObj`在其构造函数完成之前，它本身为 null。

> statObj.x = 5;

如果你这样做了`this.x`，它会起作用的。但`statObj`当时仍然为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:37:03.067

您正试图在创建对象 (statObj.x) 之前对其进行访问。试试这个：

```
class A
{
    A()
    { 
    }

    int x;
    static A statObj = new A();

    static {
        statObj.x = 5;
    }
} 
```

# javascript - 服务器端和客户端的时区偏移量不同

> ID：13838825
> 
> 赞同：1
> 
> 时间：2012-12-12T11:33:00.227
> 
> 标签：javascript, asp.net, timezone-offset

我正在开发一个 Web 应用程序，其中日期时间以 UTC 格式存储在数据库中。现在，当我检索要在 UI 中显示的日期时间时，我必须将日期时间转换为用户使用应用程序的特定时间。

为了将时间从 UTC 转换为特定的本地时间，我正在做一些演示研究。我找到了两种转换时间的方法。一个来自服务器端，另一个来自客户端。在服务器端我使用 ASP.NET，在客户端我使用 JavaScript。但问题是答案并不相同。

我正在给出代码。

服务器端：

```
Label1.Text = TimeZone.CurrentTimeZone.GetUtcOffset(DateTime.Now).ToString(); 
```

客户端：

```
$(document).ready(function () {
    var offset = new Date().getTimezoneOffset();
    $('#Label1').text(offset / 60);
}); 
```

对于服务器端代码，它在标签中显示 05:30:00。在客户端代码的情况下，它在标签中显示 -5.5。

我的问题是为什么这两个 UTC 偏移量不一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:40:31.090

偏移量的格式不同。
服务器端示例似乎是一个`Date`-like 对象。客户端版本似乎是`int`( `330`)。

不过，这些值似乎匹配。

查看[规范](http://msdn.microsoft.com/en-us/library/system.timezone.getutcoffset.aspx)，您的服务器端代码返回一个`TimeSpan`对象，[而您的 JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)确实返回一个整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:51:46.863

这只是一个格式化的东西。如果您的偏移量是 +5:30，那么`getTimezoneOffset`将返回 330，这是添加到本地时间以获取 UTC 的分钟数。

如果您将时间作为自 1970-01-01T00:00:00Z 以来的毫秒值传递，那么您可以直接将其提供给 Date 构造函数：

```
var localDate = new Date(timevalue); 
```

要返回等效的 UTC 时间值，请使用`getTime`：

```
var UTCTimeValue = localDate.getTime(); 
```

Javascript 日期对象使用带有系统时区偏移量的 UTC 时间值来返回本地日期和时间值（例如[getDate](http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.14)、[getHours](http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.18)等），或者如果调用 UTC 方法（例如[getUTCDate](http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.15)、[getUTCHours](http://ecma-international.org/ecma-262/5.1/#sec-15.9.5.19)等），则返回 UTC 值。

# c# - 使用面向服务架构支持富对象传输的设计模式？

> ID：13838827
> 
> 赞同：1
> 
> 时间：2012-12-12T11:33:02.593
> 
> 标签：c#, web-services, design-patterns, coding-style

我有一个存在于服务器上的**Employee**类，我希望将它公开在 Web 服务中，以便客户端可以使用它。

这是我的课：

```
public class Employee
{
    public CountryCode { get; private set;} 
    public EmployeeType {get; set;}

    public bool IsTaxable
    {
       get
       {
           return (CountryCode != Codes.CaymanIslands 
                  && Status != EmployeeType.Contract);
       }
    }

    public void Employee(EmployeeType type, CountryCode code)
    {
        EmployeeType = type;
        CountryCode = code;
    } 

    private void Employee() {}
} 
```

私有构造函数和私有设置器帮助这个类成为强类型，遵守 DRY 原则，并确保它**只能在****有效**状态下被实例化。

例如，我确保***IsTaxable***未在构造函数中设置，而是根据其他类属性动态评估。这样，如果修改了***EmployeeType ，*** ***IsTaxable***的结果将反映这种变化。我用这个简单的例子来强调这个对象逻辑*丰富的事实。*

假设这个*Employee*类存在于服务器上，我希望在客户端上访问它。我构建了一个 WebService（在 .NET 中我将使用 WCF），公开该类并使用开箱即用的工具连接，并且能够在我的客户端中通过网络使用该类。

问题是，这样做会导致我**丢失大部分封装的逻辑**。在接收端，客户端看不到这个富类及其私有设置器、隐藏构造函数、IsTaxable 属性中的逻辑等。相反，在客户端，我将看到一个像这样的轻量级类：

```
public class Employee
{
    public CountryCode { get; private set;} 
    public EmployeeType {get; }
    public bool IsTaxable {get; }
} 
```

现在，客户端可以通过执行以下操作将类实例化为无效状态：

```
Employee e = new Employee();
e.EmployeeType = EmployeeType.Contractor;
e.IsTaxable = true; 
```

失去丰富的对象仅仅是面向服务的生活的一个事实，是我们必须忍受的事情吗？

此类服务传输对象是否仅出于传输信息的目的而被视为弱数据传输实体，并且应该是只读的。

在客户端，您是否应该（如果需要）将它们包装在更丰富的对象中？

是否有任何方法可以通过线路传递逻辑完整的丰富对象，或者是否真的需要？

是否有任何既定的模式来处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:48:58.813

在查看设计模式之前，您需要查看的第一件事是您真正希望逻辑发生在哪里，以及如果“流氓”客户端更改它通过网络接收的数据实际会发生什么。

大多数客户端-服务器架构的设计方式是客户端尝试做的任何事情都必须由服务器验证。因此，如果客户端决定更改`IsTaxable`为 true，或者更改 Employee 的姓名或 ID 等，它不会对存储在服务器端的真实数据产生任何影响。客户端必须执行操作以更新服务器上的数据，并且只有当他有权这样做时，数据才会传播到数据库和系统的其余部分。

客户端总是“处于危险之中”（它可能被用户操纵、被黑客入侵、通过网络嗅探等），因此服务器必须足够安全以承受这种情况。

“传输对象”通常仅用于携带数据。然后，任何逻辑要么由客户端执行（例如，将数据格式化为对用户更友好的表示形式），要么由服务器执行。如果客户端需要对数据执行操作，则需要请求服务器执行（以便集中更新）。

因此，在您的情况下，您的 Web 服务需要为您的客户端公开操作以执行您可能需要的任何逻辑。

您可能想要了解的另一件事是如何创建[Contract First](http://msdn.microsoft.com/en-us/magazine/cc163783.aspx) Web 服务。这被认为是最佳实践，因为它不仅可以确保您的 Web 服务可与其他平台（例如 Java）互操作，还可以让您考虑要向客户公开哪些操作和数据，并帮助您避免错误（例如期望只有服务器可以访问的对象实例）。

契约优先意味着您创建描述操作的 WSDL 和描述要在 XML 中传输的消息和对象的 XSD。他们只是从那些 WSDL 和 XSD 文档中自动生成代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:59:17.237

您不能对任意客户端执行此操作，但如果您同时控制客户端和服务器，则可以向客户端添加对包含您的`Employee`类的程序集的引用，然后将此类型用于 WCF 协定。

在 Visual Studio 中，您可以使用“添加服务引用”/“高级”/“在引用的程序集中重用类型”来执行此操作。

> 失去丰富的对象仅仅是面向服务的生活的一个事实，是我们必须忍受的事情吗？

是的，这是真的。在真正的面向服务的架构中，您不会在客户端和服务器之间共享行为，而只会交换消息。但是，如果您在控制双方的客户端-服务器体系结构中使用 WCF，则可以使用上述方法。

# java - Android，ListView中的交替行布局，可以用ArrayAdapter完成吗？

> ID：13838830
> 
> 赞同：0
> 
> 时间：2012-12-12T11:33:16.767
> 
> 标签：java, android, adapter, android-arrayadapter, baseadapter

我知道您可以扩展 BaseAdapter 并覆盖`getViewTypeCount()`and`getItemViewType(postion)`方法并以这种方式获得各种行布局。

但是，我刚刚完成了一个教程，其中 ArrayAdapter 被扩展并且`getView(int position, View convertView, ViewGroup parent)`是唯一被覆盖的方法。

在我看来，仅遵循这种方法并使用可能与 if/switch 一起使用的位置来确定为给定行膨胀的视图要简单得多。

这是一个正确的假设还是这种方法有问题？

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T11:39:24.070

不，你的假设是错误的。如果您需要`inflate`不同`View`的 s，正确的方法是`override` `getViewTypeCount()/ getItemViewType(postion)`配对。这样，android 将`convertView`根据`getViewTypeCount()`返回的内容为您提供不同的充气。

正如文档中的立场：

`getViewTypeCount() Returns the number of types of Views that will be created`

# c# - 代码合同：IEnumerable.Min 上的静态检查失败

> ID：13838832
> 
> 赞同：1
> 
> 时间：2012-12-12T11:33:27.697
> 
> 标签：c#, code-contracts

我收到以下包含代码合同的代码的警告。

```
public static int Min(IEnumerable<int> set)
{
    Contract.Requires(set != null);
    Contract.Requires(set.Any());

    Contract.Ensures(Contract.ForAll(set, x => x >= Contract.Result<int>()));

    int min = set.Min();

    return min;
}

static void Main(string[] args)
{
    Console.WriteLine(Min(new int[] {3,4,5}));
    Console.WriteLine(Min(new int[] {})); // should fail
} 
```

我收到以下警告：

```
Requires unproven: set.Any() on Min(new int[] {3,4,5})

Ensures unproven: Contract.ForAll(set, x => x > Contract.Result<int>()) 
```

两个问题：

1.  我的后置条件声明 x >= Contract.Result()，但“确保未经证实”的警告声明 x > Contract.Result()。（Greather or equal vs. Greather）这怎么会发生？

2.  为什么不能在上面的语句中证明 set.Any() ？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:22:29.313

该`Ensures`子句不适用于 all`IEnumerable`的开头。您可以编写一个`IEnumerable`在第一次枚举时返回一个序列（例如`1, 2, 3`），第二次返回另一个列表（例如`0`）。它是一个具有任意实现的接口。

`IEnumerable`的通常有*很多*（可能生成的）东西在幕后进行。我不认为 CC 可以看穿这一点，即使具体的运行时类型以某种方式已知。

CC 甚至能够启发式地推理`IEnumerable`'s 吗？那对我来说是新的。它必须假设如果多次枚举序列不会改变（在数据库查询的情况下这是微不足道的错误）。

让我作为主观的旁注指出，我发现 CC 检查器太有限而无法使用。证明有趣的属性会带来很多麻烦。它不能很好地处理抽象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:47:47.597

STATIC 代码检查器无法确定该集合包含任何数据。如果您考虑一下，检查器不知道各种方法和属性的作用，除非在方法本身内部定义了一些协定。

在您的情况下，检查器不知道扩展方法 Any() 或 Min() 的结果可能是什么，因此它无法验证任何 Requires 和 Ensures。

您可以通过更改参数的类型获得更少的警告，但最终代码检查器仍然无法确保您的代码能够满足 Min(...) 的要求。

如果将类型更改为 int[] 或 List，某些警告可能会消失。以下代码不返回任何警告：

```
 public static int Min(List<int> set)
    {
        Contract.Requires(set != null);
        Contract.Requires(set.Count>0);

        Contract.Ensures(Contract.ForAll(set, x => x >= Contract.Result<int>()));

        int min = set.Min();

        return min;
    }

    static void Main(string[] args)
    {

        Console.WriteLine(Min(new List<int> { })); // should fail
        Console.WriteLine(Min(new List<int> { 3, 4, 5 }));
        Console.ReadKey();
    } 
```

当然，如果您运行此代码，它将失败并出现异常，因此代码检查器可能足够聪明，可以检测到这一点。

如果您保留原始订单，您仍然会收到警告：

```
 Console.WriteLine(Min(new List<int> { 3, 4, 5 }));
        Console.WriteLine(Min(new List<int> { })); // should fail 
```

在这两种情况下，您还会得到一些疯狂的建议，例如在 Main() 中添加 Contract.Ensures(false)。

# php - 在 PHP 中动态生成 XML - 解析错误

> ID：13838833
> 
> 赞同：2
> 
> 时间：2012-12-12T11:33:34.637
> 
> 标签：php, xml

**当我包含newstext**时，我正在动态生成`xml`文件并出现错误。！ 通过删除**新闻文本**生成完美。这是我正在使用的代码。**`Error: XML Parsing Error: undefined entity`![错误](../Images/0077e9f20b954fd59c939858c496e993.png)
**`xml`****

 ****```
$sqlNews    =   "SELECT * FROM news";

$runSqlNews =   mysql_query($sqlNews);

while ($rowSqlNews  =   mysql_fetch_array($runSqlNews)) 
    $arrSqlNews[]   =   $rowSqlNews;

    header('Content-type: text/xml');
    header('Pragma: public');
    header('Cache-control: private');
    header('Expires: -1');
    echo "<?xml version=\"1.0\" encoding=\"utf-8\"?>";

    echo '<xml>';

for($i=0;$i<count($arrSqlNews);$i++) 
{
    echo "<news>";
        echo "<newsId>".$arrSqlNews[$i][id]."</newsId>";
        echo "<newsAuthor>".$arrSqlNews[$i][news_author]."</newsAuthor>";
        echo "<newsText>".$arrSqlNews[$i][news_text]."</newsText>";
        echo "<description>".$arrSqlNews[$i][news_description]."</description>";
        echo "<image>".$arrSqlNews[$i][news_image]."</image>";
    echo "</news>";       
}
    echo '</xml>'; 
```

希望我的问题很清楚。提前致谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:39:15.230

每当您使用字符串时，请考虑添加[CDATA标记，因为特殊字符可能会破坏您的 XML 解析。](http://www.w3schools.com/xml/xml_cdata.asp)

```
echo "<newsText><![CDATA[".$arrSqlNews[$i][news_text]."]]></newsText>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:40:27.857

试试这个：

```
echo "<newsText><![CDATA[".$arrSqlNews[$i][news_text]."]]></newsText>"; 
```

它将阻止浏览器从该字段内容中解析标签。****

# php - 为什么没有加载 php.ini 中的设置？

> ID：13838834
> 
> 赞同：0
> 
> 时间：2012-12-12T11:33:46.190
> 
> 标签：php, error-reporting

当我们调用未定义的变量时，我试图让 PHP 显示警告。

`php.ini`有行`error_reporting = E_ALL | E_STRICT`。

问题是，严格的警告消息没有输出到浏览器。

在 PHP 脚本中，回`E_ALL | E_STRICT`显显示值`32767`。

然而返回的值`error_reporting()`是`22519`. 我在网上读到这个值实际上是匹配`E_ALL & ~E_NOTICE & ~E_DEPRECATED`的。

my`php.ini`中的值是否`error_reporting`可能被覆盖？如果是这样，我将如何调查其值的设置位置？`error_reporting`没有在脚本中的任何地方设置。我正在编辑正确的`php.ini`文件，因为我正在编辑`/etc/php5/apache2/php.ini`由`phpinfo()`.

## 编辑

`phpinfo()`包括以下信息：

```
Loaded Configuration File   /etc/php5/apache2/php.ini

Additional .ini files parsed    /etc/php5/apache2/conf.d/curl.ini, /etc/php5/apache2/conf.d/gd.ini, /etc/php5/apache2/conf.d/mcrypt.ini, /etc/php5/apache2/conf.d/mysql.ini, /etc/php5/apache2/conf.d/mysqli.ini, /etc/php5/apache2/conf.d/pdo.ini, /etc/php5/apache2/conf.d/pdo_mysql.ini 

error_reporting no value (Local)    no value (Master) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:40:30.113

我认为您必须在更改 php.ini 文件后重新加载 apache，才能看到更改生效。根据您的分布，类似`sudo service apache2 reload`或`sudo /etc/init.d/apache2 reload`应该完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:12:52.540

问题是**我在 php.ini 中引入了语法错误**。

我认为我在问题中提到`phpinfo()`的值是它设置的 PHP 的默认值。他们没有被触动，因为 PHP 无法加载它的 ini 文件。

感谢所有回复这里帮助调试问题的人。

# php - 如何使用表单在 PHP 中发送数据？

> ID：13838836
> 
> 赞同：-1
> 
> 时间：2012-12-12T11:33:47.450
> 
> 标签：php, jquery, html

我无法使用我制作的表单在 PHP 中发送数据。出于某种原因，当我单击提交按钮时没有任何反应。

我想问题可能出在我的 Jquery.main 中的提交点​​击区域，或者在 HTML 表单的提交中，或者使用了 $_SERVER['PHP_SELF']。

我正在使用 localhost、apache 和我自己的计算机进行测试。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title>Create New Account</title>

    <link rel="stylesheet" type="text/css" href="css/style.css" media="all" />

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/jquery.inputfocus-0.9.min.js"></script>
    <script type="text/javascript" src="js/jquery.main.js"></script>
</head>
<body>

<?php

/**
 * @author Emile Jobity
 * @copyright 2012
 * @abstract displays a form, inserts data from the form to the database
 * @example http://webexpedition18.com/articles/how-to-create-a-multi-step-signup-form-with-css3-and-jquery/
 */

if (isset($_POST['submit'])):

  $username = "root";
$password = "xxxx";

//connection to the database
try {
    $pdo = new PDO('mysql:host=localhost;dbname=cwalcott_ei2', $username, $password);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
}

  $username = $_POST['username'];
  $password = $_POST['password'];
  $firstname = $_POST['firstname'];
  $lastname = $_POST['lastname'];
  $email = $_POST['email'];
  $company = $_POST['company'];
  $phone = $_POST['phone'];
  $country = $_POST['country'];

 try{ 
  $stmt = $pdo->prepare('INSERT INTO user (username, password,firstname,lastname,email,company,phone,country,register_date) 
                            VALUES(:username,:password,:firstname,:lastname,:email,:company,:phone,:country,:register_date)');
  $stmt->execute(array(
    ':username' => $username,
    ':password' => $password,
    ':firstname' => $firstname,
    ':lastname' => $lastname,
    ':email' => $email,
    ':company' => $company,
    ':phone' => $phone,
    ':country' => $country,
    ':register_date' => NOW()
  ));
  # Affected Rows?
  echo $stmt->rowCount(); // 1
} catch(PDOException $e) {
  echo 'Error: ' . $e->getMessage();
}

?>

<p><a href="<?=$_SERVER['PHP_SELF']?>">Create an Account</a></p>

<?php
  else: // Allow the user to enter a new data
?>

<div id="container">
        <form action="<?=$_SERVER['PHP_SELF']?>" method="post">

            <!-- #first_step -->
            <div id="first_step">
                <h1>SIGN UP FOR A FREE <span>GOLDENICON</span> ACCOUNT</h1>

                <div class="form">
                    <input type="text" name="username" id="username" value="username" />
                    <label for="username">At least 4 characters. Uppercase letters, lowercase letters and numbers only.</label>

                    <input type="password" name="password" id="password" value="password" />
                    <label for="password">At least 4 characters. Use a mix of upper and lowercase for a strong password.</label>

                    <input type="password" name="cpassword" id="cpassword" value="password" />
                    <label for="cpassword">If your passwords aren’t equal, you won’t be able to continue with signup.</label>
                </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
                <input class="submit" type="submit" name="submit_first" id="submit_first" value="" />
            </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

            <!-- #second_step -->
            <div id="second_step">
                <h1>SIGN UP FOR A FREE <span>GOLDENICON</span> ACCOUNT</h1>

                <div class="form">
                    <input type="text" name="firstname" id="firstname" value="first name" />
                    <label for="firstname">Your First Name. </label>

                    <input type="text" name="lastname" id="lastname" value="last name" />
                    <label for="lastname">Your Last Name. </label>

                    <input type="text" name="email" id="email" value="email address" />
                    <label for="email">Your email address. We send important administration notices to this address. </label>       

                </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
                <input class="submit" type="submit" name="submit_second" id="submit_second" value="" />
            </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

            <!-- #third_step -->
            <div id="third_step">
                <h1>SIGN UP FOR A FREE <span>GOLDENICON</span> ACCOUNT</h1>

                <div class="form"> 
                    <input type="text" name="company" id="company" value="company" />
                    <label for="company">Your Comapny Name. </label>

                    <input type="text" name="phone" id="phone" value="phone" />
                    <label for="phone">Your Phone No.#. </label>

                    <select id="country" name="country">
                        <option>Trinidad and Tobago</option>
                        <option>United States</option>
                        <option>United Kingdom</option>
                        <option>Canada</option>   
                        <option>Caribbean</option>                     
                    </select>
                    <label for="country">Your country. </label> <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

                </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
                <input class="submit" type="submit" name="submit_third" id="submit_third" value="" />

            </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

            <!-- #fourth_step -->
            <div id="fourth_step">
                <h1>SIGN UP FOR A FREE <span>GOLDENICON</span> ACCOUNT</h1>

                <div class="form">
                    <h2>Summary</h2>

                    <table>
                        <tr><td>Username</td><td></td></tr>
                        <tr><td>Password</td><td></td></tr>
                        <tr><td>Email</td><td></td></tr>
                        <tr><td>Name</td><td></td></tr>
                        <tr><td>Company</td><td></td></tr>
                        <tr><td>Phone</td><td></td></tr>
                        <tr><td>Country</td><td></td></tr>
                    </table>
                </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
                <input class="send submit" type="submit" name="submit" id="submit" value="" />            
            </div>

        </form>
    </div>
    <div id="progress_bar">
        <div id="progress"></div>
        <div id="progress_text">0% Complete</div>
    </div>

<?php endif; ?>
</body>
</html> 
```

jQuery.main

```
$(function(){
    //original field values
    var field_values = {
            //id        :  value
            'username'  : 'username',
            'password'  : 'password',
            'cpassword' : 'password',
            'firstname'  : 'first name',
            'lastname'  : 'last name',
            'company' : 'company',
            'phone'  : 'phone',
            'email'  : 'email address'
    };

    //inputfocus
    $('input#username').inputfocus({ value: field_values['username'] });
    $('input#password').inputfocus({ value: field_values['password'] });
    $('input#cpassword').inputfocus({ value: field_values['cpassword'] }); 
    $('input#lastname').inputfocus({ value: field_values['lastname'] });
    $('input#firstname').inputfocus({ value: field_values['firstname'] });
    $('input#company').inputfocus({ value: field_values['company'] });
    $('input#phone').inputfocus({ value: field_values['phone'] });
    $('input#email').inputfocus({ value: field_values['email'] }); 

    //reset progress bar
    $('#progress').css('width','0');
    $('#progress_text').html('0% Complete');

    //first_step
    $('form').submit(function(){ return false; });
    $('#submit_first').click(function(){
        //remove classes
        $('#first_step input').removeClass('error').removeClass('valid');

        //ckeck if inputs aren't empty
        var fields = $('#first_step input[type=text], #first_step input[type=password]');
        var error = 0;
        fields.each(function(){
            var value = $(this).val();
            if( value.length<4 || value==field_values[$(this).attr('id')] ) {
                $(this).addClass('error');
                $(this).effect("shake", { times:3 }, 50);

                error++;
            } else {
                $(this).addClass('valid');
            }
        });        

        if(!error) {
            if( $('#password').val() != $('#cpassword').val() ) {
                    $('#first_step input[type=password]').each(function(){
                        $(this).removeClass('valid').addClass('error');
                        $(this).effect("shake", { times:3 }, 50);
                    });

                    return false;
            } else {   
                //update progress bar
                $('#progress_text').html('33% Complete');
                $('#progress').css('width','113px');

                //slide steps
                $('#first_step').slideUp();
                $('#second_step').slideDown();     
            }               
        } else return false;
    });

    $('#submit_second').click(function(){
        //remove classes
        $('#second_step input').removeClass('error').removeClass('valid');

        var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;  
        var fields = $('#second_step input[type=text]');
        var error = 0;
        fields.each(function(){
            var value = $(this).val();
            if( value.length<1 || value==field_values[$(this).attr('id')] || ( $(this).attr('id')=='email' && !emailPattern.test(value) ) ) {
                $(this).addClass('error');
                $(this).effect("shake", { times:3 }, 50);

                error++;
            } else {
                $(this).addClass('valid');
            }
        });

        if(!error) {
                //update progress bar
                $('#progress_text').html('66% Complete');
                $('#progress').css('width','226px');

                //slide steps
                $('#second_step').slideUp();
                $('#third_step').slideDown();     
        } else return false;

    });

    $('#submit_third').click(function(){
        //update progress bar
        $('#progress_text').html('100% Complete');
        $('#progress').css('width','339px');

        //prepare the fourth step
        var fields = new Array(
            $('#username').val(),
            $('#password').val(),
            $('#email').val(),
            $('#firstname').val() + ' ' + $('#lastname').val(),
            $('#company').val(),
            $('#phone').val(),
            $('#country').val()                       
        );
        var tr = $('#fourth_step tr');
        tr.each(function(){
            //alert( fields[$(this).index()] )
            $(this).children('td:nth-child(2)').html(fields[$(this).index()]);
        });

        //slide steps
        $('#third_step').slideUp();
        $('#fourth_step').slideDown();            
    });

/*
    $('#submit').click(function(){
        //send information to server
        alert('Submitting Data press Ok');
    });
*/
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:37:08.460

您正在使用简短的开始标签

```
<form action="<?=$_SERVER['PHP_SELF']?>" method="post"> 
```

这是不推荐的，默认情况下将关闭。

确保您的表单获得表单操作的价值

改变这个

```
<form action="<?=$_SERVER['PHP_SELF']?>" method="post"> 
```

对此

```
<form action="<?php echo $_SERVER['PHP_SELF']?>" method="post"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:06:52.357

首先，剥离所有 javascript 并尝试它是否可以作为纯 HTML+PHP 解决方案工作。我建议不要使用重复的提交按钮，而是使用类似`<a href="#">Next Step</a>`, 样式的按钮外观。这样您就不必关心表单提交，直到在成功填写表单后显示/启用提交按钮的最后一步。

另外，我建议使用现有的表单向导解决方案。使用已经完成和测试的东西更容易 - 让您专注于开发中更关键的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T02:12:04.740

我在 Jquery 主程序中使用它来正常工作

```
$('#submit').click(function(){
        //send information to server
        $('form').unbind('submit').submit();
    }); 
```

# jquery - 格式：如果我在 kendoGrid 中使用 rowTemplate，“{0:n0}”将不起作用

> ID：13838837
> 
> 赞同：4
> 
> 时间：2012-12-12T11:33:48.907
> 
> 标签：jquery, kendo-ui

如果我在 Grid 中使用 rowTemplate，则数字格式不起作用。

如果我评论 rowTemplate 行号格式工作正常.. 是否有任何关系 b/w rowTemplate 和格式：`{0,n0}`？在这里，我使用行模板从数据库中获取属性值。

```
<script id="SellTemplate" type="text/x-kendo-tmpl">
    <tr>
        <td>
            ${Fore}
        </td>           
        <td align="Left">    
            <img src="/Images/${ Indicator }.png"  width="20" height="20" />          
        </td>
    </tr>
</script>

$("#grid1").kendoGrid({
    width: 1500,
    dataSource: data.d,
    resizable: true,
    rowTemplate:kendo.template($("#SellTemplate").html()),;
    kendo.template($("#SellTemplate").html()),
    height: 750,                                
    selectable: true,
    columns: [
        { title: 'Fore', field: 'Fore', width: '12%', format: "{0:n0}", sortable: true },
        { title: 'Indicator', field: 'Indicator', width: '4%', sortable: true},
    ]
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:41:57.887

当您指定时，`rowTemplate`您可以完全控制网格行渲染。内置的行模板被自定义的覆盖。您仍然可以格式化值 - 在模板中使用[kendo.format](http://docs.kendoui.com/api/framework/kendo#format)函数：

```
 <td>
        ${kendo.format("{0:n0}", Fore)}
    </td> 
```

# c++ - 使用 libav 从内存中解码视频文件

> ID：13838841
> 
> 赞同：7
> 
> 时间：2012-12-12T11:34:02.720
> 
> 标签：c++, ffmpeg, h.264, libav

假设我在内存中有一个完整的视频文件，我想使用 libav 来解码整个帧。我该怎么做？关键是我可以使用 avformat_open_input() 函数直接从文件中读取，但我确实需要从存储在内存中的文件中读取。

我的 AVIOContext 实现：

```
class AVIOMemContext
{

public:

    AVIOMemContext(char* videoData, const int videoLen)
    {
        // Output buffer
        bufferSize = 32768;
        buffer = static_cast<char*>(av_malloc(bufferSize));

        // Internal buffer
        pos = 0;
        this->videoData = videoData;
        this->videoLen = videoLen;

        ctx_ = avio_alloc_context((unsigned char*) buffer, bufferSize, AVIO_FLAG_READ, this, &AVIOMemContext::read, &AVIOMemContext::write, &AVIOMemContext::seek);
    }

    ~AVIOMemContext()
    {
        av_free(videoData);
    }

    static int read(void *opaque, unsigned char *buf, int buf_size)
    {
        AVIOMemContext* This = static_cast<AVIOMemContext*>(opaque);

        // Read from pos to pos + buf_size
        if (This->pos + buf_size > This->videoLen)
        {
            int len = This->videoLen - This->pos;
            memcpy(buf, This->videoData + This->pos, len);
            return len;
        }
        else
        {
            memcpy(buf, This->videoData + This->pos, buf_size);
            return buf_size;
        }
    }

    static int write(void *opaque, unsigned char *buf, int buf_size)
    {
        /*
        AVIOMemContext* This = static_cast<AVIOMemContext*>(opaque);
        return fwrite(buf, 1, buf_size, This->f_);
        */

        return 0;
    }

    static int64_t seek(void *opaque, int64_t offset, int whence)
    {
        AVIOMemContext* This = static_cast<AVIOMemContext*>(opaque);

        if (offset + whence > This->videoLen)
        {
            This->pos = This->videoLen;

            return -1;
        }
        else
        {
            This->pos = offset + whence;

            return 0;
        }
    }

    AVIOContext *get_avio()
    {
        return ctx_;
    }

private:

    // Output buffer
    int bufferSize;
    char* buffer;

    // Internal buffer
    int pos;
    char* videoData;
    int videoLen;

    AVIOContext* ctx_;

}; 
```

我当前的代码：

```
[...]

av_register_all();
avcodec_register_all();

AVFormatContext* context;
AVCodec* pCodec;
AVPacket packet;
AVCodecContext* pCodecCtx;
int video_stream_index;
int res;
int got_picture;

// Init variables and objects
context = avformat_alloc_context();

AVIOMemContext priv_ctx(videoData, videoLen); 
context->pb = priv_ctx.get_avio();

res = avformat_find_stream_info(context, NULL);

if (res < 0)
{
    // Error
    avformat_free_context(context);

    return 0;
}

// Obtain the video stream of the total set of streams
for (unsigned int k = 0; k < context->nb_streams; ++k)
{
    if (context->streams[k]->codec->codec_type == AVMEDIA_TYPE_VIDEO)
        video_stream_index = k;
    context->streams[k]->codec->time_base.den = 90000;
}

pCodecCtx = context->streams[video_stream_index]->codec;
pCodec = avcodec_find_decoder(pCodecCtx->codec_id);

avcodec_open(pCodecCtx, pCodec);

//allocate video frame
AVFrame *pFrame = avcodec_alloc_frame();

unsigned int nFrame = 0;

while (av_read_frame(context, &packet) >= 0)

[...] 
```

提前致谢，

迪达克·佩雷斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:03:25.333

您可以创建自己的`AVIOContext`. 您必须调用`::avio_alloc_context`然后将其设置为`AVFormatContext::pb`. 有关详细信息，请参阅我对[如何在不使用其他 libav 库的情况下使用 libavformat？](https://stackoverflow.com/questions/13634539/how-can-libavformat-be-used-without-using-other-libav-libraries/13642438#13642438)

# node.js - 使用 node-oauth 模块下载文件失败

> ID：13838842
> 
> 赞同：1
> 
> 时间：2012-12-12T11:34:06.253
> 
> 标签：node.js, oauth

在 Node.js 中，我使用下面的代码从服务器下载文件。API调用成功。我将“数据”以“二进制”编码保存到本地文件后，相应软件无法打开本地文件。我比较了本地文件和服务器文件的文件大小。有一个小的区别。

我找不到我错的地方。OAuth 库是否支持文件下载？

```
var OAuth = require('oauth').OAuth;

var consumer = new OAuth('',
            null,
            consumer_key, consumer_key_secret, '1.0',
            null, 'HMAC-SHA1');

consumer.get(url
        , oauth_token, ooauth_token_secret
        , function (err, data, response){
            var filename = path.join(__dirname, "test.dwg");
            var file = fs.createWriteStream(filename);

            console.log('Data length: ' + data.length);

            file.write(data, 'binary', function(err){                       
                console.log('Complete');
            });             
        }       
    ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:35:13.143

I got the solution after some testing.

The reason of this issue is we are receiving the http body in 'utf8' encoding. Use the 'binary' encoding can fix it.

The oauth module only supports the utf8 encoding when get the response. This is hard code in file "oatuh\lib\oauth.js" at "Line # 375, response.setEncoding('utf8');".

Even though I set the encoding as the code below. It still doesn't work. So this module can't be used to download binary files.

```
var consumer = new OAuth('',
            null,
            consumer_key, consumer_secret, '1.0',
            null, 'HMAC-SHA1', 32, {encoding: "binary"}); 
```

**Solution**: Use the request module to download the file. The code is as below.

```
var oauth = {
    consumer_key: consumer_key
    , consumer_secret: consumer_secret
    , token: token
    , token_secret: token_secret
};
request.get({url:url, oauth:oauth, encoding: "binary"}, function(err, res, body){..}); 
```

# iphone - 将Plist填充到UITableView，存储在文档目录中

> ID：13838844
> 
> 赞同：1
> 
> 时间：2012-12-12T11:34:09.053
> 
> 标签：iphone, ios, uitableview, plist, nsdocumentdirectory

我有 plist 存储在，如果它存储在文档目录中`Document Directory`，如何调用`UITableView`

![进入图像](../Images/b1e7f6869fcf6af8d8ebdbe3ca1bb001.png) . 这就是我从 plist 中读取的方式。

在`ViewDidLoad`

```
- (void)viewDidLoad {

 NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                             NSUserDomainMask, YES); 
NSString *documentsDirectory = [documentPaths objectAtIndex:0];
NSString *documentPlistPath = [documentsDirectory stringByAppendingPathComponent:@"p.plist"];

NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:documentPlistPath];

NSArray *valueArray = [dict objectForKey:@"title"];

self.mySections = valueArray;

[super viewDidLoad];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
//Return the number of sections.
return [self.mySections count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
NSString *key = [self.mySections objectAtIndex:section];
NSArray *dataInSection = [self.myData objectForKey:key];
return [dataInSection count];
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
NSString *key = [self.mySections objectAtIndex:section];
return [NSString stringWithFormat:@"%@", key];
}

-(NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
return self.mySections;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
 static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] ;
}

// Configure the cell...

NSUInteger section = [indexPath section];
NSUInteger row = [indexPath row];

NSString *key = [self.mySections objectAtIndex:section];

NSDictionary *dataForSection = [[self.myData objectForKey:key] objectAtIndex:0];
NSArray *array=dataForSection.allKeys;

cell.textLabel.text = [[dataForSection allKeys] objectAtIndex:row];    
cell.detailTextLabel.text=[dataForSection valueForKey:[array objectAtIndex:indexPath.row]];

return cell;
} 
```

**编辑** 当我`NSlog` `valueArray`输出是 `( { pass = tryrt; title = tyr; }, { pass = tryrt; title = tyr; }, { pass = tryrt; title = tyr; }, { pass = tryrt546546; title = tyr; } )`

这意味着问题出在

`cellForRowAtIndexPath`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:20:35.980

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
//Return the number of sections.
return [self.mySections count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
NSArray *allKeys = [[self.mySections objectAtIndex:section] allKeys];
return [allKeys count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
 static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] ;
}

// Configure the cell...

NSUInteger section = [indexPath section];
NSUInteger row = [indexPath row];
NSArray *allKeys = [[self.mySections objectAtIndex:section] allKeys];
cell.textLabel.text = [[self.mySections objectAtIndex:section] objectForKey:[allKeys objectAtIndex:0]];    
cell.detailTextLabel.text=[[self.mySections objectAtIndex:section] objectForKey:[allKeys objectAtIndex:1]];

return cell;
} 
```

# shell - 查找早于 FILE 的文件而不包括 FILE

> ID：13838845
> 
> 赞同：3
> 
> 时间：2012-12-12T11:34:09.610
> 
> 标签：shell, find

我有一个计划用来`find`给我一个比某些 FILE 更旧的文件列表，然后使用`xargs`(或`-exec`) 将文件移动到其他地方。搬东西不是问题；`| xargs mv {} ~/trash`工作正常。

现在，如果我尝试使用`! -newer FILE`, then`FILE`被包含在列表中，这是我不想要的！

不过，该命令参数的功能在逻辑上确实有意义，因为“不是较新”很可能被解释为“相同或较旧”，如下所示：

```
$ find . ! -newer Selection_008.png -exec ls -l {} \; 
```

包括来自 compare 参数的文件：

```
-rw-r--r-- 1 and and 178058 2012-09-24 11:46 ./Selection_004.png
-rw-r--r-- 1 and and 16260 2012-09-21 11:25 ./Selection_003.png
-rw-r--r-- 1 and and 38329 2012-10-04 17:13 ./Selection_008.png
-rw-r--r-- 1 and and 177615 2012-09-24 11:53 ./Selection_005.png 
```

（`ls -l`仅显示日期以作说明）

我真正需要的`find`是一个`-older`选项，但没有一个列在`find(1)`...

当然，可以只通过`grep -v`、 use`sed`等管道输出，或者利用环境变量来重用文件名（fx. for `grep -v`），这样我就可以享受 DRY 原则，比如

```
$ COMP=Selection_008.png find . ! -newer $COMP | grep -v $COMP | xargs ... 
```

但这似乎是一个单行者的大量写作，而这不是我想要的。

有没有比我更短/更简单的方法`find`或者我错过了一些选择？我检查了手册页，并搜索了 Google 和 SO...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T11:51:44.507

你可以试试这个：

```
find . ! -newer $COMP ! -name $COMP 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-02T02:28:40.560

它不*完全是* `-older`，但`! -samefile`会排除特定文件。

```
$ find . ! -newer Selection_008.png ! -samefile -exec ls -l {} \; 
```

这仍然会捕获一个与文件年龄完全相同的文件，并且由于它是基于 inode 的，因此也可能存在处理链接的警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:22:48.283

Find 似乎不支持这一点。您可以将测试委托给`test`：

```
find . -exec test "{}" -ot "$COMP" \; -print 
```

效率不高，因为它为每个文件运行一个分叉。

# c# - 如果存储过程超过 300 行，如何在 C# 中编写存储过程

> ID：13838846
> 
> 赞同：-3
> 
> 时间：2012-12-12T11:34:17.943
> 
> 标签：c#, sql, stored-procedures

如何在C#中编写下面的存储过程

我正在创建类库文件。我遇到了一种情况....不要将脚本文件提供给客户...所以我必须在 C# 代码中创建 SP。我非常想把它保存在 C# 程序集中让我知道这可能吗

```
IF EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[AdjustTax]') AND type in (N'P', N'PC'))

DROP PROCEDURE [dbo].[AdjustTax]

SET ANSI_NULLS ON

GO

SET QUOTED_IDENTIFIER ON

GO
CREATE PROCEDURE [dbo].[AdjustTax] 

    @IN_SOPType       INT,
    @IN_SOPNo         VARCHAR(21),
    @IN_AdjustAmount  NUMERIC(19,5),
    @O_iError         INT OUTPUT  

AS

BEGIN

  DECLARE @Sequence       INT,

          @FunctionalAmt  NUMERIC(19,5),
          @OriginalAmt    NUMERIC(19,5),
          @TaxDetail      VARCHAR(30),
          @TaxAmt         NUMERIC(19,5),
          @CreditAmt      NUMERIC(19,5),
          @DexRowIDSOP    INT,
          @SOPHdrTbl      VARCHAR(20)  

    SET NOCOUNT ON;

BEGIN TRANSACTION

    SET @O_iError = 0  

    SELECT @SOPHdrTbl = RTRIM(DB_NAME()) + '.dbo.SOP10100'

    SELECT @DexRowIDSOP = DEX_ROW_ID 

      FROM SOP10100 (nolock)

        WHERE SOPTYPE=@IN_SOPType AND SOPNUMBE=@IN_SOPNo

    IF (EXISTS(SELECT 1 FROM tempdb..DEX_LOCK (NOLOCK) WHERE table_path_name = @SOPHdrTbl AND row_id = @DexRowIDSOP))

    BEGIN  

      SET @O_iError = 2022 

    END

    ELSE

    BEGIN   

      SET @FunctionalAmt = @IN_AdjustAmount

      SET @OriginalAmt   = @IN_AdjustAmount     

      UPDATE SOP10100 

        SET TAXAMNT  = TAXAMNT   + @FunctionalAmt,

            DOCAMNT  = DOCAMNT   + @FunctionalAmt,

            ACCTAMNT = ACCTAMNT  + @FunctionalAmt,

            ORTAXAMT = ORTAXAMT  + @OriginalAmt, 

            ORDOCAMT = ORDOCAMT  + @OriginalAmt,  

            ORACTAMT = ORACTAMT  + @OriginalAmt  

          WHERE SOPTYPE=@IN_SOPType AND SOPNUMBE=@IN_SOPNo  

      SELECT TOP 1 @TaxDetail = TAXDTLID, @TaxAmt = STAXAMNT

        FROM SOP10105

          WHERE SOPTYPE=@IN_SOPType AND SOPNUMBE=@IN_SOPNo

        ORDER BY LNITMSEQ

      UPDATE SOP10105

        SET STAXAMNT = STAXAMNT + @FunctionalAmt,

            ORSLSTAX = ORSLSTAX + @OriginalAmt      -- Currently the same as Functional Amount

          WHERE SOPTYPE=@IN_SOPType AND SOPNUMBE=@IN_SOPNo 

            AND LNITMSEQ=0

            AND TAXDTLID=@TaxDetail     

      SELECT TOP 1 @Sequence = SEQNUMBR, @CreditAmt=CRDTAMNT

        FROM SOP10102

          WHERE SOPTYPE=@IN_SOPType AND SOPNUMBE=@IN_SOPNo

            AND DISTTYPE=9 

            AND ((DEBITAMT + CRDTAMNT) = @TaxAmt) 

      IF (@CreditAmt <> 0) 
      BEGIN

        UPDATE SOP10102

          SET CRDTAMNT = CRDTAMNT + @FunctionalAmt,

              ORCRDAMT = ORCRDAMT + @OriginalAmt  

          WHERE SOPTYPE=@IN_SOPType AND SOPNUMBE=@IN_SOPNo

            AND SEQNUMBR=@Sequence
      END

      ELSE

      BEGIN 

        UPDATE SOP10102

          SET DEBITAMT = DEBITAMT + @FunctionalAmt,

              ORDBTAMT = ORDBTAMT + @OriginalAmt    

          WHERE SOPTYPE=@IN_SOPType AND SOPNUMBE=@IN_SOPNo

            AND SEQNUMBR=@Sequence
      END 

      SELECT TOP 1 @Sequence = SEQNUMBR, @CreditAmt=CRDTAMNT
        FROM SOP10102

          WHERE SOPTYPE=@IN_SOPType AND SOPNUMBE=@IN_SOPNo
            AND DISTTYPE=2 AND ((DEBITAMT + CRDTAMNT) > 0.0)

      IF (@CreditAmt <> 0) 
      BEGIN
        UPDATE SOP10102

          SET CRDTAMNT = CRDTAMNT + @FunctionalAmt,
              ORCRDAMT = ORCRDAMT + @OriginalAmt   

          WHERE SOPTYPE=@IN_SOPType AND SOPNUMBE=@IN_SOPNo
            AND SEQNUMBR=@Sequence
      END
      ELSE
      BEGIN 
        UPDATE SOP10102

          SET DEBITAMT = DEBITAMT + @FunctionalAmt,

              ORDBTAMT = ORDBTAMT + @OriginalAmt   

          WHERE SOPTYPE=@IN_SOPType AND SOPNUMBE=@IN_SOPNo

            AND SEQNUMBR=@Sequence
      END            
    END

IF (@O_iError = 0)

  COMMIT TRANSACTION

ELSE

  ROLLBACK TRANSACTION

END

GO 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T11:37:04.470

为什么首先要用 C# 编写它？

如果要管理 DB 架构，请使用*Visual Studio 数据库*项目。

如果您非常想将其保留在 C# 程序集中，请创建一个单独的 .sql 文件，将其作为资源嵌入，然后将其作为字符串加载到 C# 中。

在文件属性中将*Build Action*更改为**Embedded Resource**并使用以下代码加载它

```
using (Stream stream = Assembly.GetExecutingAssembly()
                               .GetManifestResourceStream("Your assembly namespace" + "file.sql"))
using (StreamReader reader = new StreamReader(stream))
{
    string result = reader.ReadToEnd();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:37:41.300

300行SP就可以了，只要清晰易懂

对于大部分 SP 最好写一些评论

# jquery - Jquery AJAX保存textarea的图像

> ID：13838850
> 
> 赞同：0
> 
> 时间：2012-12-12T11:34:23.453
> 
> 标签：jquery

我正在尝试使用该区域中的 html 内容“动态地”保存我的 textarea 的图像，例如编辑后的 ​​html 电子邮件模板。无论如何通过Jquery，Ajax来做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:37:44.463

没有。

您应该将元素信息、内容和位置发送到服务器，并使用该信息在那里创建图片。

干杯。

# linux - 查看在特定日期编辑的所有文件

> ID：13838861
> 
> 赞同：0
> 
> 时间：2012-12-12T11:34:45.933
> 
> 标签：linux, ubuntu, vi

我想知道 linux 中是否有一种方法可以查看我在特定日期编辑的文件列表。我知道如果我执行 ls -lt 它将列出上次修改的文件夹和文件，但我想查看子文件夹等中的文件列表，并且 ls -lt 仅适用于我所在的当前文件夹（不是子文件夹中的文件）。我例如，在 Windows 资源管理器上知道您可以按修改日期搜索文件，所以我认为在 linux 中会有类似的东西，但看不到如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:37:10.707

这甚至会进入子目录：

```
ls -lRt 
```

要排除任何特定目录，请使用：

```
ls | tee | grep -Fxv "folder_name" | xargs ls -lRt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T11:45:55.903

这是一个小例子，这可能会对您有所帮助。

```
ls -lRc | grep "Nov 28" 
```

**小说明**

```
-l Shows you huge amounts of information (permissions, owners, size, and when last modified.
-R  Includes the contents of subdirectories.
-c  Use time of last modification of the i-node (file created, mode changed, and so forth) for sorting (-t) or printing (-l or -n). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:37:17.510

您应该能够将 find 与 -mtime 一起使用。

查找 |目录路径| -mtime -1 -打印

实际上是[Shell 脚本 — 获取所有在 <date> 之后修改](https://stackoverflow.com/questions/848293/shell-script-get-all-files-modified-after-date) 的文件有所有答案。

# jquery - JQuery 打字插件：

> ID：13838863
> 
> 赞同：1
> 
> 时间：2012-12-12T11:35:00.210
> 
> 标签：jquery, ticker

我使用jqueryticker并在使用“typewrite”效果时使用打字效果此代码禁用链接并且仅在浏览器中显示文本，当我更改打字机时：false，问题已解决但我想使用打字机效果此代码：

```
 (function ($) {
        $.fn.Ticker = function (options) {
            var defaults = {
                // Time to display each news item. (integer, milliseconds)
                pause: 5000,
                // Time taken to fade in next news item. (integer, milliseconds)
                fadeIn: 800,
                // Time taken to fade out current news item. (integer, milliseconds)
                fadeOut: 800,
                // Pause between displaying each item when fading between items. (integer, milliseconds)
                delay: 500,
                // Next news item typed out one character at a time. If false item will fade in. (boolean)
                typewriter: true,
                // Time to type each character if using the typewriter effect (integer, milliseconds)
                speed: 35,
                // Character to use to mimic a computer cursor if using the typewriter effect (string|boolean)
                cursor: '_'
            };
            // Merge default options with user options
            var opts = $.extend({}, defaults, options);
            return $(this).each(function () {
                var list = $(this), typewriter = {}, interval;
                // Activate ticker and display first item
                list
                .addClass('ticker-active')
                .children(':first')
                .css('display', 'block');
                function changeItem() {
                    var item = list.children(':first'),
                    next = item.next(),
                    copy = item.clone();
                    clearTimeout(interval);
                    // Append copy of current item to bottom of list
                    $(copy)
                    .css('display', 'none')
                    .appendTo(list);
                    // Fade current item out, remove from DOM then animate the next item
                    item.fadeOut(opts.fadeOut, function () {
                        $(this).remove();
                        // Animate
                        if (opts.typewriter) {
                            typewriter.string = next.text();
                            next
                            .text('')
                            .css('display', 'block');
                            typewriter.count = 0;
                            typewriter.timeout = setInterval(type, opts.speed);
                        }
                        else {
                            next
                            .delay(opts.delay)
                            .fadeIn(opts.fadeIn, function () {
                                setTimeout(changeItem, opts.pause);
                            });
                        }
                    });
                }
                function type() {
                    typewriter.count++;
                    var text = typewriter.string.substring(0, typewriter.count);
                    if (typewriter.count >= typewriter.string.length) {
                        clearInterval(typewriter.timeout);
                        setTimeout(changeItem, opts.pause);
                    }
                    else if (opts.cursor) {
                        text += ' ' + opts.cursor;
                    }
                    list
                    .children(':first')
                    .text(text);
                }
                // Test there are more items to display then start ticker
                if (list.find('li').length > 1) {
                    interval = setTimeout(changeItem, opts.pause);
                }
            });
        };
        $('.ticker').Ticker();
    })(jQuery);
});//]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:54:18.130

您可以尝试将您的文本添加到 .

然后就可以调用a->span的打字机函数了

```
<a href=""><span>Here your Link</span></a>
$('a span').typewriter({options...}) 
```

# php - 从 Word 问题中复制的 Tinymce 编辑器

> ID：13838866
> 
> 赞同：0
> 
> 时间：2012-12-12T11:35:23.130
> 
> 标签：php, javascript, jquery, tinymce

我正在使用 Tinymce 编辑器。其中有一个从单词粘贴的选项。在它的点击动作上，它调用一个函数 windowmanager.open

我的目标是在弹出窗口中显示编辑器的现有内容。

我正在使用查询字符串传递内容，但有时内容太大，我得到 URI 限制超出错误。

请帮助我了解如何将内容传递给视图文件。

```
var actualContent = ed.getBody().innerHTML;
ed.windowManager.open({
                                file : url + '/pasteword.php?preContent='+encodeURIComponent(actualContent),
                                width : 450,
                                height : 400,
                                inline : 1
                            }, {
                                plugin_url : url
                            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:00:46.423

公然从这个[问题的答案中窃取信息](https://stackoverflow.com/questions/3091485/what-is-the-limit-on-querystring-get-url-parameters)

> HTTP 协议对 URI 的长度没有任何先验限制。服务器必须能够处理它们所服务的任何资源的 URI，并且如果它们提供可以生成此类 URI 的基于 GET 的表单，则应该能够处理无限长度的 URI。如果 URI 比服务器可以处理的长（参见第 10.4.15 节），服务器应该返回 414（Request-URI Too Long）状态。注意：服务器应谨慎依赖 255 字节以上的 URI 长度，因为一些较旧的客户端或代理实现可能无法正确支持这些长度。

需要注意的是这一行：

> 如果 URI 比服务器可以处理的长，服务器应该返回 414（Request-URI Too Long）状态

因此，您似乎没有任何简单的方法可以像您尝试那样传递如此大的字符串，除非您有权配置服务器并且可以进行这样的配置。

# java - heroku worker 工作 java playframework

> ID：13838873
> 
> 赞同：1
> 
> 时间：2012-12-12T11:35:41.847
> 
> 标签：java, heroku, playframework-1.x, worker

阅读所有文章后，我找不到解决问题的方法。

1.  我有一个在 Heroku 上运行良好的 java play 网络应用程序。在 Procfile 中有一个 web:xxx 进程
2.  在同一个应用程序中，我定义了一些工作。
    *   我有扩展 play.Job 的 MyJob 类
    *   我有一个 Main 类 while(true) 等待并执行 MyJob。

我的 Procfile 看起来像这样。

```
web:    play run --http.port=$PORT $PLAY_OPTS
worker: java -cp target/classes;target/dependency/* jobs.MyJob 
```

我明白，因为这不是一个 Maven 项目类和依赖目录不存在。

但是，我该如何设置工人：`java xxxx command`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:09:38.380

你在注释你的工作类吗？要在 Play 开始时开始工作，只需执行以下操作：

```
@OnApplicationStart
public class Bootstrap extends Job { 
```

或者使用 @Every 或 @On 注释：

```
@On("0 0 12 * * ?")
public class Bootstrap extends Job {

@Every("1h")
public class Bootstrap extends Job { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:42:38.757

玩！作业在 Web 应用程序内运行。如果您想在您的 heroku 应用程序上使用它们 - 最好将它们嵌入到您的网络应用程序中，而无需启动专门的工作人员。有了这个，你只能在 heroku 上拥有 web dyno。

只需注释您的作业，`@OnApplicationStart`它们将与应用程序一起运行。

# ubuntu - 在 Ubuntu 12.04 上编译 CUDA 时出错。重新定义变量

> ID：13838878
> 
> 赞同：0
> 
> 时间：2012-12-12T11:36:02.550
> 
> 标签：ubuntu, cuda, ubuntu-12.04, nvcc

我正在尝试编译一个以前在其他平台上工作过的 CUDA 程序，但现在出现以下错误：

```
In file included from /usr/local/cuda-5.0/bin/crt/link.stub:79:0:
/tmp/tmpxft_00006ff5_00000000-1_align_dlink.reg.c:2:1: error: redefinition of 'const unsigned char def_module_id_str__NV_MODULE_ID []'
/tmp/tmpxft_00006ff5_00000000-1_align_dlink.reg.c:1:1: error: 'const unsigned char def_module_id_str__NV_MODULE_ID [19]' previously defined here
/tmp/tmpxft_00006ff5_00000000-1_align_dlink.reg.c: In function 'void __cudaRegisterLinkedBinary__NV_MODULE_ID(void (*)(void**), void*, void*)': 
```

等等一些变量。

我有：

```
$ nvcc -V
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2012 NVIDIA Corporation
Built on Fri_Sep_21_17:28:58_PDT_2012
Cuda compilation tools, release 5.0, V0.2.1221 
```

gcc 版本 4.6.3、Tesla M2090 和 64 位 Ubuntu 12.04。

我已经成功构建并运行了 CUDA 示例，因此我认为我的环境设置正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:06:07.450

nvcc 版本 5 中的链接器的工作方式与版本 4 不同。我的 make 文件中的编译过程与版本 5 不兼容。我安装了 CUDA 版本 4 并且一切正常。

# c# - 如何在 WPF 中绑定命令

> ID：13838884
> 
> 赞同：14
> 
> 时间：2012-12-12T11:36:10.663
> 
> 标签：c#, wpf, icommand, commandbinding

有时我们使用了很多次复杂的方法，我们忘记了完成任务的最简单方法。

我知道如何进行命令绑定，但我总是使用相同的方法。

创建一个实现 ICommand 接口的类，并从视图模型中创建该类的新实例，绑定就像一个魅力。

这是我用于命令绑定的代码

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;            
        testCommand = new MeCommand(processor);
    }

    ICommand testCommand;

    public ICommand test
    {
        get { return testCommand; }
    }
    public void processor()
    {
        MessageBox.Show("hello world");
    }
}

public class MeCommand : ICommand
{
    public delegate void ExecuteMethod();
    private ExecuteMethod meth;
    public MeCommand(ExecuteMethod exec)
    {
        meth = exec;
    }

    public bool CanExecute(object parameter)
    {
        return false;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        meth();
    }
} 
```

但我想知道这样做的基本方法，没有第三方 dll 没有新的类创建。使用单个类执行这个简单的命令绑定。实际类从 ICommand 接口实现并完成工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T12:07:29.720

[Prism](http://msdn.microsoft.com/en-us/library/gg406140.aspx)已经提供了[Microsoft.Practices.Prism.Commands.DelegateCommand](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.commands(v=pandp.40).aspx)

我不确定它是否被视为第 3 方。至少它是官方的并记录在 MSDN 上。

一些本机内置命令，如复制、粘贴，实现了 ICommand 接口。恕我直言，它遵循打开（用于扩展）/关闭（用于更改）原则。这样我们就可以实现自己的命令。

* * *

# 更新

正如 WPF 命令[在此处](http://msdn.microsoft.com/en-us/library/ms752308.aspx)记录的那样，摘录...

> WPF 提供了一组预定义的命令。例如 Cut、BrowseBack 和 BrowseForward、播放、停止和暂停。
> 
> 如果命令库类中的命令不能满足您的需求，那么您可以创建自己的命令。有两种方法可以创建自定义命令。首先是从头开始并实现 ICommand 接口。另一种方式，**也是更常见的方法**，是创建一个[RoutedCommand](http://msdn.microsoft.com/en-us/library/system.windows.input.routedcommand.aspx)或一个[RoutedUICommand](http://msdn.microsoft.com/en-us/library/system.windows.input.routeduicommand.aspx)。

我一开始就尝试了 RoutedCommand 模型，最终实现了 ICommand。

**示例 XAML 绑定**

```
<CommandBinding Command="{x:Static custom:Window1.CustomRoutedCommand}"
                    Executed="ExecutedCustomCommand"
                    CanExecute="CanExecuteCustomCommand" /> 
```

RoutedCommand 与 RoutedEvent 没有什么不同。这似乎是一个更好的按钮的“点击”事件处理程序。它的目的是：将应用程序逻辑与 View 分开，但需要一些附加 DependencyProperty 或代码隐藏。

我个人觉得只实现我的 ICommand 会更舒服。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T16:38:44.297

我倾向于使用内置 RelayCommand 的 MVVM 轻框架。

您将 ICommand 属性添加到您的视图模型，然后为其分配一个中继命令：-

```
ICommand ClickMeCommand {get;set;}
private void InitCommands()
{
   ClickMeCommand = new RelayCommand(()=>HasBeenClicked=true);
   //or
   ClickMeCommand = new RelayCommand(ClickMeEvent);
}
public void ClickMeEvent()
{
   HasBeenClicked=true;
} 
```

在 xaml 中，您只需使用普通绑定：-

```
<Button Content='Push me' Command='{Binding ClickMeCommand}' /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T05:38:39.160

如果您不想创建新类，请使用路由命令。这是一个小片段。我创建了一个路由命令作为 Save 并将其绑定到 window 的命令绑定，从 button.and 发出命令，瞧！.....我希望这可以帮助你

```
 public partial class Window1 : Window
 {
    public static readonly RoutedCommand Foo = new RoutedCommand();

    public Window1()
    {
        InitializeComponent();
    }

    void Foo_CanExecute(object sender, CanExecuteRoutedEventArgs e)
    {
        // The Window gets to determine if the Foo 
        // command can execute at this time.
        e.CanExecute = true;
    }

    void Foo_Executed(object sender, ExecutedRoutedEventArgs e)
    {
        // The Window executes the command logic when the user wants to Foo.
        MessageBox.Show("The Window is Fooing...");
    }
}

 <Window.CommandBindings>
 <CommandBinding
  Command="{x:Static  local:Window1.Foo}"
  CanExecute="Foo_CanExecute"
  Executed="Foo_Executed"
  /> 
```

我希望我能很好地理解你的问题。

PS：命令设计模式的需要是将执行的逻辑和命令的调用者解耦，所以Command类是一种封装逻辑的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T12:11:06.610

从您在 VS 中不运行代码的情况下所做的判断，您的问题是您调用`InitializeComponent`（渲染 XAML），然后设置属性中`DataContext`没有任何值`test`，最后设置一个私有成员。UI 应该如何注意到您的 Command 不再为空（这是它在属性中找到的最后一个值）？

为什么不像这样懒惰地实例化命令：

```
public ICommand test
{
    get
    { 
      if(testCommand== null)
      {
         testCommand= new MeCommand(processor);
       }
      return testCommand; 
    }
} 
```

这样它就会在需要时立即出现，并且您不需要更改通知（除非您稍后在运行时更改该命令）。

顺便说一句，有几个地方你会感觉在命令绑定场景中没有执行任何代码：

1) CanExecute() 返回 false ：只需返回 true 或根据您的业务案例进行评估。

2) CanExecute 的条件发生变化，因此它会返回 true，但不会被调用：您可以将 Command 与 CommandManager 类挂钩，请参见[此处](https://stackoverflow.com/questions/3768301/wpf-custom-icommand-implementation-and-the-canexecutechanged-event)。在尝试此操作之前，请确保 1) 已解决。这可以确保您的 UI 将`CanExecute`非常频繁地重新查询，如果这仍然不够，请`CommandManager.InvalidateRequerySuggested()`显式调用方法。

3）您的绑定错误。像这样更改绑定代码：

```
Command="{Binding Path=test, PresentationTraceSources.TraceLevel=High}" 
```

每当绑定的值被拉出或推送时，这都会向您的输出窗口发送垃圾邮件。请注意“使用最终值”一词。如果它为空，则您的 Command 不在它应该在的位置（还）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T09:38:28.543

好吧，你几乎拥有它。只要确保 CanExecute() 将返回 true，否则您的代码将不会被执行。（我认为它实际上会，但仍然如此）。还要确保将“NotifyPropertyChanged('yourCommand')”添加到

```
 public ICommand test
    {
        get { return testCommand; }
        set { testCOmmand = value; NotifyPropertyChanged("test"); }
    } 
```

到这里。

你也可以做 test = new MeCOMmand(); 数据上下文 = 这个；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-27T00:02:20.747

在 WPF 窗口构造函数中，要链接键盘快捷键，只需添加与委托的绑定，并将其与按键手势相关联。

```
public YourWindow() //your constructor
{
   ...
   //bind keyboard command shortcuts
   InputBindings.Add(new KeyBinding( //add a new key-binding, bind it to your command object which takes a delegate
      new WindowCommand(this)
      {
         ExecuteDelegate = TogglePause //REPLACE TogglePause with your method delegate
      }, new KeyGesture(Key.P, ModifierKeys.Control)));
   ...
} 
```

创建一个简单的 WindowCommand 类，该类接受一个执行委托来触发其上设置的任何方法。

```
public class WindowCommand : ICommand
{
    private MainWindow _window;
    public Action ExecuteDelegate { get; set; }

    public WindowCommand(MainWindow window)
    {
        _window = window;
    }

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        if (ExecuteDelegate != null)
        {
            ExecuteDelegate();
        }
        else
        {
            throw new InvalidOperationException();
        }
    }
} 
```

# focus - 在 wxpython 列表中更改焦点，而不是使用向上/向下键进行选择

> ID：13838885
> 
> 赞同：1
> 
> 时间：2012-12-12T11:36:13.237
> 
> 标签：focus, wxpython, selection, listctrl

当我使用箭头键在 wxpython ListCtrl 中导航时，选择会随着焦点直接变化。但我只想改变焦点，而不是选择。我尝试绑定到按键事件，并且当它是导航键（按键向下/向上，页面向下/向上）时，根本不将其跳过到父级：

```
if event.GetKeyCode() == wx.WXK_DOWN:
    curr = self.GetFocusedItem()
    if not curr == self.GetItemCount()-1:
        self._set_focused_item(curr+1)
#...(other keys)
else:
    event.Skip() 
```

但这样我也必须重新实现其他东西。例如，如果列表对于 listctrl 来说太大并且可以滚动，则可见区域将不会随着焦点自动滚动。

那么，有没有更简单的方法来实现这一点？坦克

# ruby-on-rails - 没有数据库的活动记录

> ID：13838889
> 
> 赞同：8
> 
> 时间：2012-12-12T11:36:41.693
> 
> 标签：ruby-on-rails, activerecord

我的应用程序不需要任何数据库后端，因为它是客户端和其他服务器之间的代理服务器。

但我发现在我的项目中拥有所有 Active Record 设施（验证、关联等）会很好。

如何设置 Active Record 根本不使用数据库？

Ryan Bates 在 219 演员“The Active Model”中只描述了验证部分，但我需要关联设施。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:27:25.847

看看[ActiveModel](https://github.com/rails/rails/tree/master/activemodel)。这就是 AR 在幕后使用的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-09T17:36:37.003

这两个宝石可能是您想要的：

[主动模型协会](https://github.com/joker1007/activemodel-associations)

[主动模型](https://github.com/rails/rails/tree/master/activemodel)

# php - 使用 PHP 将 mysql 表导出为 CSV - 标题问题

> ID：13838890
> 
> 赞同：0
> 
> 时间：2012-12-12T11:36:44.017
> 
> 标签：php, mysql, header, export

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

将 mysql 表转换为 .CSV 文件的 PHP 脚本给出了无法修改标头信息和不将数据写入 CSV 文件等错误：

以下是错误：

> 警告：无法修改标头信息 - 标头已由第 30 行 /home/public_html/amgtst/export-tst.php 中的（输出开始于 /home/public_html/amgtst/export-tst.php:3）发送
> 
> 警告：无法修改标头信息 - 标头已由第 31 行 /home/public_html/amgtst/export-tst.php 中的（输出开始于 /home/public_html/amgtst/export-tst.php:3）发送
> 
> 警告：无法修改标头信息 - 标头已由第 32 行 /home/public_html/amgtst/export-tst.php 中的（输出开始于 /home/public_html/amgtst/export-tst.php:3）发送
> 
> 警告：无法修改标头信息 - 标头已由第 33 行 /home/public_html/amgtst/export-tst.php 中的（输出开始于 /home/public_html/amgtst/export-tst.php:3）发送

```
Area Area DC_No Area DC_No Product_type Area DC_No Product_type DC_date Area DC_No Product_type DC_date Ac_code Area DC_No Product_type DC_date Ac_code PO_No Area DC_No Product_type DC_date Ac_code PO_No PO_date Area DC_No Product_type DC_date Ac_code PO_No PO_date Inv_No Area DC_No Product_type DC_date Ac_code PO_No PO_date Inv_No CNo_Qty Area DC_No Product_type DC_date Ac_code PO_No PO_date Inv_No CNo_Qty Deleted Area DC_No Product_type DC_date Ac_code PO_No PO_date Inv_No CNo_Qty Deleted Vehicle_no Area DC_No Product_type DC_date Ac_code PO_No PO_date Inv_No CNo_Qty Deleted Vehicle_no "Jayanagar" "100" "Gas" "2012-11-30" "2" "2012-11-30" "11" "KA123-333" "Jayanagar" "104" "Gas" "2012-12-03" "3" "2012-12-03" "14" "Jayanagar" "101" "Gas" "2012-12-03" "3" "2012-12-03" "13" "Jayanagar" "105" "Gas" "2012-12-03" "3" "2012-12-03" "17" "Jayanagar" "106" "Gas" "2012-12-03" "3" "2012-12-03" "16" "Jayanagar" "107" "Gas" "2012-12-03" "3" "2012-12-03" "KA576" "Jayanagar" "108" "Gas" "2012-12-03" "2" "2012-12-03" "25" "KA01P213" "Jayanagar" "111" "Gas" "2012-12-04" "2" "2012-12-04" "27" "Jayanagar" "125" "Gas" "2012-12-04" "3" "2012-12-04" "12" "Jayanagar" "116" "Gas" "2012-12-06" "2" "2012-12-06" "Jayanagar" "117" "Gas" "2012-12-06" "2" "2012-12-06" "19" "Jayanagar" "118" "Gas" "2012-12-06" "2" "2012-12-06" "20" "Jayanagar" "119" "Gas" "2012-12-06" "2" "2012-12-06" "21" "Jayanagar" "130" "Gas" "2012-12-06" "3" "2012-12-06" "22" "KA-01-A4564" "Jayanagar" "131" "Gas" "2012-12-08" "2" "2012-12-08" "23" "KA01-23212" "Jayanagar" "132" "Gas" "2012-12-08" "2" "PIA-234234-ERES" "2012-12-08" "24" "KA-10-23232" "Jayanagar" "133" "Gas" "2012-12-08" "2" "verbal" "2012-12-08" "26" "ka91901212" 
```

我的php脚本：

```
 <?php
    include 'dbconnect.php';

    echo "Exporting file - process"."<br><br>";

        header("Content-type: application/csv");
        header("Content-Disposition: attachment; filename=download.csv");
        header("Pragma: no-cache");
        header("Expires: 0");

    $query = "SELECT * FROM DCHDR";

    $export = mysql_query ($query ) or die ( "Sql error : " . mysql_error( ) );

    $fields = mysql_num_fields ( $export );

    for ( $i = 0; $i < $fields; $i++ )
    {
        $header .= mysql_field_name( $export , $i ) . "\t";

        echo $header;
    }

    while( $row = mysql_fetch_row( $export ) )
    {
        $line = '';
        foreach( $row as $value )
        {                                            
            if ( ( !isset( $value ) ) || ( $value == "" ) )
            {
                $value = "\t";
            }
            else
            {
                $value = str_replace( '"' , '""' , $value );
                $value = '"' . $value . '"' . "\t";
            }
            $line .= $value;
        }
        $data .= trim( $line ) . "\n";
    }
    $data = str_replace( "\r" , "" , $data );

    if ( $data == "" )
    {
        $data = "\n(0) Records Found!\n";                        
    }

    print "$header\n$data";

    exit();

    php?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:43:34.643

在这一行

```
echo "Exporting file - process"."<br><br>"; 
```

你做了一些输出，而几行之后你尝试了几个`header()`调用。

引用[PHP 文档](http://php.net/manual/en/function.header.php)：

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。

在创建之前，请执行任何标头调用，将一些输出发送到客户端（使用`echo`或类似）！

除此之外，您可以使用本机[`fputcsv()`](http://php.net/manual/en/function.fputcsv.php)创建 CSV 文件。[`tmpfile()`](http://php.net/manual/en/function.tmpfile.php)如果您想将输出发送到客户端，可能与 结合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:41:55.153

使用 ob_start(); 文件顶部的函数并删除所有回声，除了最后一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:42:18.877

消除

```
echo "Exporting file - process"."<br><br>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:42:58.840

（**编辑**：看看[这个问题](https://stackoverflow.com/questions/10887505/building-csv-with-array)）

您需要使用`ob_start();`然后`ob_end_flush()`，因为看起来您正在尝试在某些内容已发送到浏览器之后设置标题。

尝试这个：

```
<?php

ob_start();

include 'dbconnect.php';

echo "Exporting file - process"."<br><br>";

    header("Content-type: application/csv");
    header("Content-Disposition: attachment; filename=download.csv");
    header("Pragma: no-cache");
    header("Expires: 0");

$query = "SELECT * FROM DCHDR";

$export = mysql_query ($query ) or die ( "Sql error : " . mysql_error( ) );

$fields = mysql_num_fields ( $export );

for ( $i = 0; $i < $fields; $i++ )
{
    $header .= mysql_field_name( $export , $i ) . "\t";

    echo $header;
}

while( $row = mysql_fetch_row( $export ) )
{
    $line = '';
    foreach( $row as $value )
    {                                            
        if ( ( !isset( $value ) ) || ( $value == "" ) )
        {
            $value = "\t";
        }
        else
        {
            $value = str_replace( '"' , '""' , $value );
            $value = '"' . $value . '"' . "\t";
        }
        $line .= $value;
    }
    $data .= trim( $line ) . "\n";
}
$data = str_replace( "\r" , "" , $data );

if ( $data == "" )
{
    $data = "\n(0) Records Found!\n";                        
}

print "$header\n$data";

ob_end_flush();

exit();

php?> 
```

您也可能想使用 php 内置的 CSV 函数[fputcsv](http://php.net/manual/en/function.fputcsv.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T11:43:20.380

您不能在标题信息之前发送任何数据，所以行

```
echo "Exporting file - process"."<br><br>"; 
```

必须删除。

# jquery - Fancybox 在 IE8 中不起作用 [对象不支持属性或方法 'fancybox']

> ID：13838893
> 
> 赞同：0
> 
> 时间：2012-12-12T11:36:51.397
> 
> 标签：jquery, fancybox

我`fancybox`用于添加我网站的购物车部分。`fancybox`在 Firefox、Chrome 和 IE9 上运行良好，但在 IE8 上不行。真的不知道为什么，请帮忙。

```
 $(document).ready(function() {

        $(".addToOrderButton").click(function(){
            $(".addToOrderButton").fancybox({
                'type'      : 'iframe',
                'width'     : '75%',
                'height'    : '75%',
                'autoScale'     : false,
                'transitionIn'  : 'none',
                'transitionOut' : 'none',
                'helpers'       : {overlay : { closeClick: false}},
                'href'          : 'includes/shopping_cart.php?drink_id='+$(this).attr("drink_id")

            });
        });

        $(".addToOrderButton").fancybox({
                 'type'     : 'iframe', 
            'width'     : '75%',
            'height'    : '75%',
            'autoScale'         : false,
            'transitionIn'  : 'none',
            'transitionOut' : 'none'

        });
    });

</script>
<button drink_id="$drink->id" id="addToOrderButton_$drink->id" class="addToOrderButton" type="button" name="drink_add" value="Add" style="border: 0;cursor: pointer;background: transparent">
    <img src="./images/add_but.png" alt="submit" />
</button> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T16:14:12.457

谢谢大家的尝试，终于我破解了。

将 $(document).ready(function() { 替换为 jQuery(function( $ ){

IE8问题已解决！诡异的 ！！

# php - 原则：不能为子查询分配别名

> ID：13838901
> 
> 赞同：4
> 
> 时间：2012-12-12T11:37:06.840
> 
> 标签：php, mysql, symfony1, doctrine, alias

我有一个学说查询，它在选择中有一个子查询，以便从另一个表中获取一个字段（并摆脱繁重的左连接）。

问题是 Doctrine 返回给我的别名不是我想要的，因此我很想定制它们。这可能吗？

这是我的查询：

```
$query->select(
        "id, page_id, status, title, "
      . "segment, url, current_user_id, "
      . "current_user_last_action_time, pt.name,"
    )
        ->addSelect("(SELECT s.username from sfGuardUser s where id = current_user_id) ")
        ->innerJoin( 'PbType pt' )
        ->innerJoin( 'LatestVersion lv WITH version=lv.version' )
        ->where('is_visible = 1')
        ->groupBy( 'page_id' ); 
```

这向我返回了这样的查询：

```
SELECT `p`.`id` AS `p__id`, `p`.`page_id` AS `p__page_id`, 
`p`.`status` AS `p__status`, `p`.`title` AS `p__title`, `p`.`segment` AS `p__segment`,
 `p`.`url` AS `p__url`, `p`.`current_user_id` AS `p__current_user_id`, 
`p`.`current_user_last_action_time` AS `p__current_user_last_action_time`, 
`p2`.`id` AS `p2__id`, `p2`.`name` AS `p2__name`, 
(SELECT `s`.`username` AS `s__username` FROM `sfguard`.`sf_guard_user` `s` WHERE 
`p`.`id` = `p`.`current_user_id`) AS `p__0` 
FROM `personaltable`.`page` `p` INNER JOIN `personaltable`.`type` `p2` ON `p`.`type_id` = `p2`.`id` 
INNER JOIN `personaltable`.`latest_page_version` `p3` ON `p`.`page_id` = `p3`.`page_id` 
AND `p`.`version` = `p3`.`version` WHERE `p`.`is_visible` = 1 
GROUP BY `p`.`page_id` 
```

这 **就是`p__0`**我想要改变的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:40:52.940

它应该像

```
->addSelect("(SELECT s.username from sfGuardUser s where id = current_user_id) AS alias") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:37:24.147

前段时间我遇到了同样的问题，刚刚找到了一个可行的解决方案，但不使用 orm。通过像这样通过您当前的学说连接使用真正的 mysql 来尝试它。

```
$query = 'SELECT p.id, p.page_id, p.status, p.title, p.segment, p.url, p.current_user_id,
                 p.current_user_last_action_time, p2.name, 
         ( SELECT s.username from sfGuardUser s where id = p.current_user_id ) as XXX
         FROM personaltable.page p 
         INNER JOIN personaltable.type p2 ON p.type_id = p2.id 
         INNER JOIN personaltable.latest_page_version p3 ON p.page_id = p3.page_id AND p.version = p3.version 
         WHERE p.is_visible = 1 
         GROUP BY p.page_id';

$connection = Doctrine_Manager::getInstance()->getCurrentConnection();
$statement = $connection->execute($query)->fetchAll();

foreach ($statement as $key => $val) {
    $id = $statement[$key]['XXX'];
} 
```

XXX 是您不想自定义的别名。

我知道这不是好的风格，但我无法以任何其他方式做到这一点。

# python - 我正在转储管道数据，但是当我尝试使用 pickle.loads 读取时出现错误

> ID：13838903
> 
> 赞同：1
> 
> 时间：2012-12-12T11:37:11.630
> 
> 标签：python, stdout, pickle

这段代码运行良好

```
 allWriteNodes=nuke.allNodes("Write")
    test = nuke.allNodes()
    for index,each in enumerate(test):
        wrtNodelst.insert(index,each.name())
        print index, each.name()
    sys.stdout.write(pickle.dumps(wrtNodelst))
    quit()
except RuntimeError:
  sys.stderr.write('could not find %s\n' % target_file)
  raise 
```

但是要在不同文件中读取的这一行会导致错误：

```
print pickle.loads(process.stdout.read()) 
```

给出 IndexError : list index out of range ... 知道是什么原因导致它读取腌制的标准输出数据吗？ **回溯错误**

```
Traceback (most recent call last):
File "\RenderUI.py", line 384, in execApp
print pickle.loads(process.stdout.read())
File "D:\Python26\lib\pickle.py", line 1374, in loads
return Unpickler(file).load()
File "D:\Python26\lib\pickle.py", line 858, in load
dispatch[key](self)
File "D:\Python26\lib\pickle.py", line 1203, in load_setitems
mark = self.marker()
File "D:\Python26\lib\pickle.py", line 874, in marker
while stack[k] is not mark: k = k-1
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:23:23.570

采用

```
print pickle.load(process.stdout) 
```

这行得通吗？

read 可能不会返回整个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:34:06.913

这一行：

```
 print index, each.name() 
```

导致问题，因为它在发送`stdout`泡菜之前发送调试输出。

# .net - WaitForFullGCApproach 错过了 GC 收集

> ID：13838916
> 
> 赞同：1
> 
> 时间：2012-12-12T11:38:03.360
> 
> 标签：.net, garbage-collection

我正在使用 GC.RegisterForFullGCNotification、GC.WaitForFullGCApproach 和 GC.WaitForFullGCComplete 方法来获取即将进行的垃圾回收的通知。GC.WaitForFullGCApproach 位于不同的线程中，循环如下：

```
 while (!gcAbort)
            {
                GCNotificationStatus s = GC.WaitForFullGCApproach(10 * 60 * 1000);

                if (s == GCNotificationStatus.Succeeded)
                {
                    Console.WriteLine(GCState.Approaching, "GC is approaching ... ");
                    gcApproachNotificationCount++;
                }
                else
                {
                    if (s == GCNotificationStatus.NotApplicable)
                    {
                        Console.WriteLine("Concurrent garbage collection is enabled, or the time specified for the millisecondsTimeout parameter has expired and no garbage collection notification was obtained.");
                        continue;
                    }
                    else
                    {
                        Console.WriteLine("Unexpected GCNotificationStatus " + s);
                        break;
                    }
                }

                if (forceGCWhenApproaching)
                {
                    int maxGenCollectionCountBefore = GC.CollectionCount(GC.MaxGeneration);
                    Thread.Sleep(12000);
                    int maxGenCollectionCountAfter = GC.CollectionCount(GC.MaxGeneration);
                    if (maxGenCollectionCountBefore == maxGenCollectionCountAfter)
                    {
                        Console.WriteLine("Inducing forced Gen {0} GC.. Collection count is {1}".FormatWith(GC.MaxGeneration, maxGenCollectionCountBefore));
                        GC.Collect(GC.MaxGeneration, GCCollectionMode.Forced, false);
                    }
                    else
                    {
                        Console.WriteLine("GC was already triggered by the system! Old collection count was {0}; new count is {1}".FormatWith(maxGenCollectionCountBefore, maxGenCollectionCountAfter));
                    }
                }

                // Check for a notification of a completed collection.
                s = GC.WaitForFullGCComplete(10 * 60 * 1000);
                if (s == GCNotificationStatus.Succeeded)
                {
                    Console.WriteLine(GCState.Okay, "GC completed.");
                }
                else
                {
                    Console.WriteLine(GCState.Unknown, "Unexpected GCNotificationStatus: " + s);
                    break;
                }
            } 
```

问题是我没有收到有关所有垃圾收集的通知。所以有时我会看到这样的东西：

```
GC is approaching ... 

GC was already triggered by the system! Old collection count was 19; new count is 23

GC completed.

GC is approaching ...

GC was already triggered by the system! Old collection count was 33; new count is 37

GC completed. 
```

这意味着在收集计数 23 和 33 之间，我错过了所有这些。

在我的 web.config 文件中，我禁用了并发 GC：

```
 <runtime>
    <gcConcurrent enabled="false" />
  </runtime> 
```

对于 GC.RegisterForFullGCNotification，我尝试了多个阈值，但结果相同。

你能告诉我为什么我会观察到这种行为吗？

# scala - 如何使用 Scala Camel DSL 进行类型转换

> ID：13838921
> 
> 赞同：1
> 
> 时间：2012-12-12T11:38:16.323
> 
> 标签：scala, apache-camel

如何使用 Camel Scala DSL 进行类型转换？

换句话说，这个 Java DSL 示例的 Scala DSL 版本是什么：

```
from("file:/tmp/myfile").convertBodyTo(String.class).to("log:com.example") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T11:53:06.810

而不是 convertBodyTo 你应该使用`as(...)`方法。

如果您尝试查找 Scala 和 Java DSL 元素之间的映射，那么在源代码中查看的有用位置之一是 SAbstractDefinition。这就是我找到您问题的答案的方式，因为[http://camel.apache.org/scala-dsl-eip.html](http://camel.apache.org/scala-dsl-eip.html)仅`as`作为另一个示例的一部分提及（并没有说它是 convertBodyTo 的替代品）

# php - imagick ::stegano图像使用

> ID：13838922
> 
> 赞同：3
> 
> 时间：2012-12-12T11:38:16.917
> 
> 标签：php, imagick

我试图了解 PHP 中的 steganoImage 命令是如何工作的，但文档在 PHP.net 中无济于事（我的意思是不完整）

有人可以向我解释如何使用该命令，还是更适合运行纯 ImageMagick 来获取其全部功能？

提前致谢

*更新抱歉没有提供链接这是来自 PHP 站点[http://php.net/manual/en/imagick.steganoimage.php的链接](http://php.net/manual/en/imagick.steganoimage.php)

# asp.net-mvc - 复杂表单数据的模型

> ID：13838923
> 
> 赞同：0
> 
> 时间：2012-12-12T11:38:27.323
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我需要使用默认的 ASP.NET MVC 模型绑定器构建要从以下表单数据中解析的服务器模型：

```
page:1
pageSize:10
filter[filters][0][field]:ApplicantName
filter[filters][0][operator]:eq
filter[filters][0][value]:e
filter[filters][1][field]:ApplicantName
filter[filters][1][operator]:eq
filter[filters][1][value]:d
filter[filters][2][field]:FamilySize
filter[filters][2][operator]:eq
filter[filters][2][value]:2
filter[filters][3][logic]:or
filter[filters][3][filters][0][field]:WaitList
filter[filters][3][filters][0][operator]:eq
filter[filters][3][filters][0][value]:3
filter[filters][3][filters][1][field]:WaitList
filter[filters][3][filters][1][operator]:doesnotcontain
filter[filters][3][filters][1][value]:3 
```

可以`page`，`pageSize`但不能对过滤器做同样的事情。尝试了以下方法：

```
public class DataSourceRequest
{
    public int Page { get; set; }
    public int PageSize { get; set; }
    public DataSourceFilter Filter { get; set; }
}

public class DataSourceFilter
{
    public IEnumerable<DataSourceFilter> Filters { get; set; }
    public string Logic { get; set; }
    public string Field { get; set; }
    public string Operator { get; set; }
    public string Value { get; set; }
} 
```

但没有成功。Root`Filter`不为空，但没有任何嵌套数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:08:33.573

> 我需要使用默认的 ASP.NET MVC 模型绑定器构建要从以下表单数据中解析的服务器模型：

你不能。默认模型绑定器不理解也不支持这种语法。请阅读[`following article`](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)以更好地了解默认模型绑定器使用的支持的有线格式。

然后修复您的请求以符合预期的格式：

```
page                                   1
pageSize                               10
filter.filters[0].field                ApplicantName
filter.filters[0].operator             eq
filter.filters[0].value                e
filter.filters[1].field                ApplicantName
filter.filters[1].operator             eq
filter.filters[1].value                d
filter.filters[2].field                FamilySize
filter.filters[2].operator             eq
filter.filters[2].value                2
filter.filters[3].logic                or
filter.filters[3].filters[0].field     WaitList
filter.filters[3].filters[0].operator  eq
filter.filters[3].filters[0].value     3
filter.filters[3].filters[1].field     WaitList
filter.filters[3].filters[1].operator  doesnotcontain
filter.filters[3].filters[1].value     3 
```

如果由于某种原因您无法修改请求格式，则必须编写自定义模型绑定器并手动解析值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:11:32.150

我建议使用这种方法来处理过滤器列表：

[编辑可变长度列表](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

这将按照模型绑定器可以理解的格式发布到服务器。

如果您删除和添加过滤器，它也会对您有所帮助......因为索引将在 secuence 中出现“漏洞”（默认模型绑定器不支持）......并且这种方法在这方面更健壮不是依靠整数secuence。

# internationalization - Orbeon：国际化等

> ID：13838926
> 
> 赞同：1
> 
> 时间：2012-12-12T11:38:33.913
> 
> 标签：internationalization

我们是乌拉圭的政府机构 (www.agesic.gub.uy)。现在我们的任务是评估 Orbeon 在不同状态级别创建表单的能力。

国际化问题 Orbeon 专业版支持国际化。

*   它的国际化程度如何？
*   是否支持动作按钮的国际化？
*   后端有国际化吗？对于后端，我们的意思是：表单生成器、预先设计的表单等。

部署问题 - 是否可以将 Orbeon 与其他 Web 应用程序集成：示例：我们有一个简单的 Web 应用程序登录。用户登录后可以触发操作，此操作将显示 Orbeon 表单。用户填写 Orben 表单后，他将单击“提交”（表单存储在 Orbeon 中），然后显示我们 Web App 的网页。如何访问用户填写的数据？（不使用 Orbeon）

谢谢你的时间。

问候，布鲁诺

# facebook - 画布应用程序：signed_request POST 参数命名不同

> ID：13838929
> 
> 赞同：1
> 
> 时间：2012-12-12T11:38:48.583
> 
> 标签：facebook, login, facebook-canvas

我感觉有些文档已经过时了？

例如看[这个](http://developers.facebook.com/docs/howtos/login/signed-request/)。

它说：`$signed_request = $_REQUEST['signed_request'];`

但是当我打印请求时，我得到：`[fbsr_(my_app_id)] => (long_string)`

我认为这是实际的`signed_request`，我是对的吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:21:33.367

Facebook 上的一些文档是[自动](https://developers.facebook.com/blog/post/2012/12/06/making-our-documentation-better/)生成的。

该`parse_signed_request`函数将签名的请求解码为有用信息的数组。

您是否尝试过使用`parse_signed_request`功能`$_REQUEST['signed_request']`？

# mongodb - 如何告诉 MongoDB C# 驱动程序以字符串格式存储所有 Guid？

> ID：13838931
> 
> 赞同：6
> 
> 时间：2012-12-12T11:38:51.440
> 
> 标签：mongodb, serialization, mongodb-.net-driver

我目前正在将该`[BsonRepresentation(BsonType.String)]`属性应用于我的域模型中的所有`Guid`属性，以使这些属性以字符串格式序列化。除了令人厌烦之外，有时这也行不通，例如使用自定义`Wrapper<T>`类：

```
public class Wrapper<T>
{
    public T Value { get; set; }

    // Further properties / business logic ...
} 
```

当`T`is时`Guid`，该`Value`属性将存储为类型的二进制数据`UuidLegacy`（任何`Guid`未使用上述属性修饰的类型的属性也是如此）。但是，我希望所有`Guid`s，包括`Wrapper<Guid>.Value`，都在数据库中表示为字符串。

有没有办法告诉 MongoDB C# 驱动程序以`Guid`字符串格式存储所有 s？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T16:22:30.540

这可以使用约定来实现

类似于以下内容：

```
var myConventions = new ConventionProfile();
myConventions.SetSerializationOptionsConvention(
    new TypeRepresentationSerializationOptionsConvention(typeof (Guid), BsonType.String));

BsonClassMap.RegisterConventions(myConventions, t => t == typeof (MyClass)); 
```

这应该在您的应用程序启动中的某个地方。

您可以在此处阅读有关约定的更多信息：[http ://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-Conventions](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-Conventions)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-04T00:34:34.193

可以通过简单地调用一行代码来完成在不设置 a 的情况下全局执行此操作的替代方法`Convention`（鉴于*实际问题是有效的，我认为这是过大的杀伤力：“如何在全局范围内应用它”）：*

```
BsonSerializer.RegisterSerializer(typeof(Guid), 
    new GuidSerializer(BsonType.String)); 
```

只需确保这是就 MongoDb 的序列化配置而言触发的第一件事（即使在注册类映射之前，发布的基于约定的解决方案也是如此）。

就我个人而言，我认为这是一个比使用“总是返回真”谓词创建约定更好的解决方案，大多数人似乎都在暗示。约定非常适合更复杂的场景，也适用于对序列化配置集进行分组，其中*实际*使用了谓词，并且多个`Conventions`被捆绑到一个`ConventionPack`. 但是对于简单地应用全局序列化格式，只需使用上面的代码行保持简单。

如果您稍后决定您有一个合法`Convention`的需要此规则的变体，只需注册它以覆盖我们设置的全局规则，就像您`Convention`将覆盖*默认*的全局规则一样，该规则设置为`Guid's`表示为`BsonType.Binary`. 最终结果将是全局规则优先，然后是，*仅*在自定义适用的情况下（基于您的自定义谓词）`Convention`，它将覆盖我们的自定义全局规则。*`ConventionPack`*

 ** * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T12:15:55.690

虽然使用约定会起作用，但请注意两个重要（和相关）点：

1.  该`filter`参数是必需的，如果过滤器过于笼统（例如`t => true`：），它可以覆盖其他注册的约定。
2.  请注意，注册约定的顺序很重要，首先注册特定过滤器，然后注册一般约定。

另一种选择是为 Guid 类型创建一个 BSON 类映射，它将表示设置为字符串：

```
if (!BsonClassMap.IsClassMapRegistered(typeof(Guid))) {
    BsonClassMap.RegisterClassMap<Guid>(cm => {
        cm.AutoMap();
        cm.Conventions.SetSerializationOptionsConvention(new  TypeRepresentationSerializationOptionsConvention(typeof(Guid), BsonType.String));
    });
} 
```

这应该在使用 BsonSerializer 进行任何读/写之前完成，否则将创建默认的 Class Map，并且您将无法更改 Class Map。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-21T11:29:45.860

不推荐使用 ConventionProfile。如果您不想在全局范围内应用该规则，而仅适用于特定类（这应该在您的应用启动中的某个位置）：

```
var pack = new ConventionPack { new GuidAsStringRepresentationConvention () };
ConventionRegistry.Register("GuidAsString", pack, t => t == typeof (MyClass));

public class GuidAsStringRepresentationConvention : ConventionBase, IMemberMapConvention
    {
        public void Apply(BsonMemberMap memberMap)
        {
            if (memberMap.MemberType == typeof(Guid))
            {
                var serializer = memberMap.GetSerializer();
                var representationConfigurableSerializer = serializer as IRepresentationConfigurable;
                if (representationConfigurableSerializer != null)
                {
                    var reconfiguredSerializer = representationConfigurableSerializer.WithRepresentation(BsonType.String);
                    memberMap.SetSerializer(reconfiguredSerializer);
                }
            }
        }
    } 
```*

# regex - 检查“哈希键字符串”是否包含 perl 中的单词

> ID：13838943
> 
> 赞同：2
> 
> 时间：2012-12-12T11:39:44.537
> 
> 标签：regex, perl, perl-hash

我想检查哈希键中是否存在特定单词。

我尝试了以下方式：

```
while (($key, $value) = each(%hash))
{
   if( $key =~ /\b$some_word\b/ ) 
   {
      print"$key contains $some_word \n";
   } 
} 
```

我的问题是有相同的内置函数还是有任何替代方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T11:50:14.717

```
use warnings;
use strict;

my %hash = (
    'foo' => 1,
    'foo bar' => 2,
    'bar' => 3,
    'food' => 4
);

my $some_word = "foo";

for (grep /\b\Q$some_word\E\b/, keys %hash)
{
    print "$_ contains $some_word (value: $hash{$_})\n" 
} 
```

**更新：**也包括价值。

**更新 2：**感谢 kenosis，建议使用引号文字修饰符 ( `\Q...\E`)，这在将变量放入正则表达式时通常是一个好主意。它确保变量中的任何内容都不会被解释为正则表达式元字符。

# android - eclipse v4.2.1 在 Windows 7 上非常慢

> ID：13838944
> 
> 赞同：2
> 
> 时间：2012-12-12T11:39:45.437
> 
> 标签：android, eclipse

我的 Eclipse 很慢。我将它用于 android 项目，并且在构建或清理项目时它非常慢。我安装了最新的 android sdk 21 和 ADT 21。我的笔记本电脑的配置是：-
Dell Latitude 4 gb ram core i5 32 bit OS

我尝试更改 eclipse.ini 文件，但每次我增加堆大小时，eclipse 都不会启动并显示错误“无法运行 Java 虚拟机”。这是我的ini文件：-

```
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.200.v20120522-1813
-showsplash
org.eclipse.platform 
--launcher.XXMaxPermSize
768m
--launcher.defaultAction
openFile
-vmargs
-Xms768m
-Xm1280m 
```

请提出一些技巧以使其快速。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:00:01.353

您的规格已经足够好，Eclipse 在后台执行大量任务以使您的生活更轻松。现在我已经使用 Eclipse 八年多了，我已经想出了一套调整来让它对我来说运行得更快。我会在这里列出它们，您可以选择应用全部或部分应用，这取决于您。

通过转到 Window 菜单并选择 Preferences 打开 Preferences（假设您使用的是默认配置）：

1.  在常规下，选中“始终在后台运行”

2.  在常规>外观下，取消选中“启用动画”

3.  在 General>Startup and Shutdown 下，禁用所有未使用的服务

4.  在常规>工作区下，取消选中“自动构建”

5.  在 Java>Editor>Content Assist 下，取消选中“启用自动激活”

我确信还有其他可以调整的东西，我自己修改的选项比我上面提到的要多，但它们只是为了满足我的需要，我只强调了会影响速度的那些。您还需要检查的是在使用 Eclipse 时为您自动执行操作的任何选项，然后决定您是否可以接受手动完成的选项。

您可能还需要确保您的笔记本电脑设置为使用高性能电源配置。在其他电源配置下，某些笔记本电脑将以 CPU 一半的功率运行。

最后，我建议您将调整好的首选项导出到一个文件中，以便将来可以将它们导入其他工作区。

*导出转到文件菜单>导出>常规>首选项*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:52:57.100

哥们，我也有同样的问题。Eclipse android项目编译打包太牛逼了。我将 IDE 从 Eclipse 更改为 Intellij IDEA - 它工作得更好一些，不是最好的编译和打包速度，但也比 Eclipse 更好。给你试试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-07T07:05:17.077

我正在使用 ADT 22.0 或更高版本。我的应用程序包含 AdMob，并且在运行或调试步骤期间，admob jar 中的类文件被转换为 dex 文件。

我暂时从项目中删除了 admob 代码和 jar，构建过程再次加快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:51:19.827

我喜欢你的名字 ;) 无论如何，你可以检查并做一些事情来让它更快。

1.  检查笔记本电脑的电源计划。保持插电状态并将计划保持在高性能状态。这显着提高了我的案例的性能。
2.  Eclipse 很慢。理所当然。当使用 DDMS 进行调试和记录时，您会发现它甚至更慢。你可以做的是去**TASK MANAGER**在进程列表中找到 eclipse。*右键单击*它并转到*Set Affinity*。**选择CPU 0**以外的任何其他内核。您始终可以为其设置多个核心。
3.  如果在执行你的 android 程序的过程中，你的 AVD 耗时太长，请尝试增加 RAM 大小并减小 AVD 的屏幕大小。那应该有帮助。

# sql-server - @@IDENTITY、SCOPE_IDENTITY 和 IDENT_CURRENT 之间的区别

> ID：13838945
> 
> 赞同：0
> 
> 时间：2012-12-12T11:39:49.003
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我在msdn上研究了以下行。

"`@@IDENTITY`并将`SCOPE_IDENTITY`返回当前会话中任何表中生成的最后一个标识值。

但是，`SCOPE_IDENTITY`仅返回当前范围内的值。

`@@IDENTITY`不限于特定范围”

所以我的问题是上面几行中的“什么是`current session`和`current scope`”。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:36:26.210

如果要返回刚刚插入的值（用于插入到子表中），那么通常需要使用作用域_identity()。它特定于您的连接运行的语句的范围。它不会给你任何其他人的身份价值。

@@identiy，也特定于您的范围，但它还包括范围中的触发器值，因此如果表有一个触发器也插入到一个标识，那就是返回的标识。因此，这意味着不应使用 @@identity 来返回您插入的值，因为一旦有人添加触发器，它将开始返回磨损的值。

然后是ident_current。这是最危险的，因为无论将它放在哪个连接中，它都会重新调整表上的最后一个身份。因此，如果您使用它来获取身份值，则需要注意它与您的连接记录无关放入并使用它来获取用于插入子表的标识是数据完整性问题的保证。

较新版本的 SQL Server 有一个 OUTPUT 子句，这远远优于使用上述三个项目中的任何一个，因为您可以返回一组身份和其他字段的值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-12T12:29:41.850

@@IDENTITY 范围仅限于当前会话但 SCOPE_IDENTITY() 具有服务器所有会话的范围

# c - 如何修改数组？

> ID：13838947
> 
> 赞同：0
> 
> 时间：2012-12-12T11:39:53.947
> 
> 标签：c, arrays, steganography

我目前正在尝试使用一些 .wav 文件进行隐写术。

我想要做的是编写一个程序，将声音文件打开到一个数组中，然后修改所述数组，但这就是我卡住的地方。

目前我有：

```
#include <stdio.h>
#include "scc110wav.h"

int main ()
{
    unsigned char *soundData = LoadWavAudioFile("3stepoct.wav");

    int byte;

    for (byte = 0; byte <= 5554944; byte++){
        printf("%d\n", soundData[byte]);
    }
} 
```

我目前所能做的就是打印数组，但无法更改数组的值。我知道我不需要在最后打印数组，特别是因为它太大了，但我只是想感受一下文件，这样我就可以将数组值更改为 ASCII 值，而无需监听检测到声音的大部分变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:44:01.180

`soundData`is not `const`，因此您可以使用`[]`运算符访问流的字节并对这些数据执行任何操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:33:05.707

根据我的理解，您对需要更改的地方感到困惑，以便 wav 文件可以播放。如果这是问题，您可以从以下链接了解有关波形文件格式的所有信息

[点击此处了解 Wave 文件格式](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

并且您可以通过保留有关块大小等的其他详细信息来更改数据部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:33:47.930

当您使用说明符`soundData[byte]`在`for`循环中打印时`%d`，您正在打印存储在 .so 中的字符的 ASCII 值。因此，您可以像使用普通数组一样`soundData[byte]`轻松访问和修改存储在任何时间点的数据。此外`soundData[byte]`它只是`unsigned char *`没有什么能阻止你修改数组中的任何东西。

您可能需要考虑更改`byte`from `int`to的数据类型，`long long`因为`5554944`在`for`循环中使用的数据类型超出了`int`最大存储值限制。所以，基本上你会一遍又一遍地滚动。

一旦你了解了如何访问音频文件中的数据，你真正应该看看的是一个很好的隐写算法，可以在你的输入流上实现。最简单的一种是基于 LSB 的算法。

# plone - 图像不显示。URI中的UID和URI的构造似乎是错误的

> ID：13838948
> 
> 赞同：3
> 
> 时间：2012-12-12T11:39:55.623
> 
> 标签：plone, uid

“使用 UID 的链接”已激活。“链接完整性”也是如此。

在几页图像不显示。图像的链接类似于 `.../datenabgleichtool/resolveuid/4ff237ae-1b26-4854-90cc-892ee84a1ad0/@@images/image/preview`.

当我手动编辑页面并在 TinyMCE 中重新插入图像时，此图像 url 更改为`/datenabgleichtool/screenshot_odbc.png/@@images/a96678a5-1fc1-45eb-832e-e24ddecda8da.png`.

可能发生了什么？如何在不手动重新插入图像的情况下更正所有页面？感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:53:50.277

使用 UID 的链接是一个很棒的功能。克隆存储“resolveuid/YOURUID”作为对象的路径。因此，您可以更改此对象的路径，而无需更新所有使用它的内容。

当渲染发生时，Plone 将论文转换为真实路径/ URL。

即使没有发生转换，带有 resolveuid 的 URL 也可以在浏览器中工作，因为有一个视图或 PythonScript 可以进行重定向。

因此，如果您的图像未显示，则可能是：

*   因为你已经删除了
*   因为你现在的位置很奇怪。
*   有一个错误

# sql - Oracle - SQL - 使用子选择插入

> ID：13838951
> 
> 赞同：9
> 
> 时间：2012-12-12T11:40:13.310
> 
> 标签：sql, oracle

我`ORA-00947: not enough values`从下面的查询中得到：

```
insert into tableb
(colA, colb, colc, cold)
select
(select max(rec_no)+1 from tableb)
F2,
F3,
F4
from tablea; 
```

有人可以指出正确的方法来包含插入/选择语句的子查询吗？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T11:44:02.103

你只是少了一个逗号。事实上，Oracle 认为`F2`是您的子选择的名称。

```
insert into tableb
(colA, colb, colc, cold)
select
(select max(rec_no)+1 from tableb) ,   -- comma here
F2,
F3,
F4
from tablea; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T12:05:28.747

生成唯一 ID 的唯一可靠、快速且可扩展的方法是使用序列。

“解决方案”不起作用的原因`max()`是一个事务不会看到另一个事务未提交的更改。因此，两个并发事务可以使用相同的值结束，`max()`这反过来会生成重复的 id 值。

要在您的情况下从序列创建值，您显然需要首先创建一个序列：

```
create sequence seq_b; 
```

然后在您的选择语句中使用该序列：

```
insert into tableb
  (colA, colb, colc, cold)
select seq_b.nextval,
       F2,
       F3,
       F4
from tablea; 
```

# websocket - Websocket over SSL 使用播放框架/javascript

> ID：13838952
> 
> 赞同：2
> 
> 时间：2012-12-12T11:40:14.507
> 
> 标签：websocket, playframework-2.0

使用播放框架，我可以使用下面的代码行轻松创建 WebSockets.... var chatSocket = new WS("@routes.Application.chat(username).webSocketURL(request)")

由于 WebSocket 可能不适用于某些旧代理，因此建议按照[http://www.websocket.org/echo.html](http://www.websocket.org/echo.html)使用 SSL 。如何更改上述代码行以使用 SSL 创建 WebSocket？任何建议表示赞赏。

谢谢，
普拉萨纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T00:53:55.070

True adding the true parameter to the webSocketURL call. Looking at the source, it looks like it would work.

```
var chatSocket = new WS("@routes.Application.chat(username).webSocketURL(request, true)") 
```

(source is [here](https://github.com/playframework/playframework/blob/master/framework/src/play/src/main/java/play/mvc/Call.java))

# c# - 如何在隐藏模式下以管理员权限启动进程

> ID：13838954
> 
> 赞同：0
> 
> 时间：2012-12-12T11:40:16.717
> 
> 标签：c#

我正在制作程序，该程序应该以管理员权限启动一个进程并且它应该被隐藏我试过这个但它不起作用

```
 ProcessStartInfo startInfo = new ProcessStartInfo(Application.StartupPath + "\\launcher.exe");
           startInfo.WindowStyle = ProcessWindowStyle.Hidden;

           startInfo.CreateNoWindow = true;  
           Process.Start(startInfo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:21:45.563

```
SecureString pass = new SecureString ();
foreach (char c in "yourpassword".ToCharArray())
{
    pass.AppendChar(c);
}    
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.FileName = Application.StartupPath + "\\cmd.exe";
startInfo.WindowStyle = ProcessWindowStyle.Hidden;
startInfo.CreateNoWindow = true;
startInfo.UseShellExecute = false;
startInfo.Domain = "yourdomain"
startInfo.UserName = "yourusername"
startInfo.Password = pass;
Process.Start(Info); 
```

只需根据需要填写即可。

要提升您必须提示输入 UAC，为此您可以使用

```
startInfo.Verb = "runas"; 
```

或创建一个清单文件，右键单击您的项目 -> 添加项目 -> 清单文件

找到写着的那一行

```
<requestedExecutionLevel level="asInvoker" uiAccess="false"/> 
```

并将其更改为

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T15:47:06.093

隐藏窗口？那么你应该试试这个：

```
[DllImport("kernel32.dll")]
static extern IntPtr GetConsoleWindow();

[DllImport("user32.dll")]
static extern bool ShowWindow(IntPtr hWnd, int nCmdShow);

private const int c_SwHide = 0;
private const int c_SwShow = 5; 
```

通过使用以下方法：

```
static void Main()
{
    ShowWindow(GetConsoleWindow(), c_SwHide);
} 
```

希望这可以帮助。:) 如果要再次显示，只需将第二个参数“c_SwHide”替换为“c_SwShow”即可。

# matlab - 用Word、matlab写报告

> ID：13838960
> 
> 赞同：1
> 
> 时间：2012-12-12T11:40:36.777
> 
> 标签：matlab

我想用matlab写一份报告。

在程序中，我得到了一些数字。我将所有数字保存为 jpg。这些数字和公司标志以及一些文字应该出现在报告中。

问题是如何使用 matlab 将所有这些图像粘贴到 Word 文档中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:50:51.950

研究 Matlab`publish`提供的编写`doc`格式文件的功能。自从我使用它以来已经有一段时间了，但它曾经可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:58:22.023

您可以使用命令连接到 Word 或 Excel `actxserver`，例如

```
wd = actxserver('Word.Application')
xl = actxserver('Excel.Application') 
```

然后，您可以与 Word 或 Excel 通信以创建新文档、插入文本和数字，以及将 MATLAB 图形复制并插入到报告中。有很多关于如何控制 Word 或 Excel 的知识，但您可以从在 MATLAB 中键入`wd.`or`xl.`并`tab`按下键开始 - 这将向您展示您可以使用的方法，例如`AddWorksheet`方法和设置`Range.Value`单元格的属性. 另请参阅与 Excel 交互的 Microsoft[文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel%28v=office.14%29.aspx)（Word 也有类似的文档）。

我一直提到 Excel 的原因是我都尝试过，而且我几乎可以保证你会发现 Excel 比 Word 更容易。请注意，对于最新版本的 Office，两者都可以保存为 PDF。如果您特别需要 Word，我发现最简单的方法是手动制作模板 Word 报告，其中包含一些可识别的标记，用于插入内容；然后在 MATLAB 中，打开模板的副本，并遍历您的标记，替换为您要插入的内容。

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T01:29:10.943

有几个[文件交换](http://www.mathworks.com/matlabcentral/fileexchange/)项目可以完成这项任务。

查看[Word Report](http://www.mathworks.com/matlabcentral/fileexchange/17953-wordreport)，其中包含一些演示代码。这使用了与其他帖子中描述的相同的 active-X 接口，包装在 Matlab 中。

# ruby-on-rails - 将方法合并到 link_to rails 3

> ID：13838962
> 
> 赞同：0
> 
> 时间：2012-12-12T11:40:40.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3, methods, hyperlink

我正在构建一个简单的食谱应用程序。我有一个按最受欢迎的顺序返回国家列表的方法

```
 class Country < ActiveRecord::Base

def self.top_countries
joins(:recipes).
  select('countries.*, count(*) AS recipes_count').
  group('countries.id').
  order('recipes_count DESC')
end 
```

然后我像这样在视图中输出它

```
<% @toprankingcountry.each do |r|%>
 <ul>
 <li><%= link_to r.name %></li>
</ul> 
```

所以这只是列出了我所有的结果

然后，我有一个名为 worldrecipes 的单独控制器，其中包含每个国家/地区名称的操作

我想要做的是链接到该国家/地区的特定操作（该操作将与该国家/地区命名相同）

作为 Rails 的新手，我不确定要阅读哪些资源来实现这一点，最好有一种方法来遍历这个逻辑，然后在块中使用该方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:56:44.713

a）我建议您不要在您的路线中针对每个国家/地区采取行动，因为这会真正使您的 routes.rb 混乱。您可以将通配符和参数定义为路线的一部分，但只有一个操作应处理不同的国家/地区。

所以你可以有这样的 url：/world/germany, /world/france 但是它们都应该在你的控制器中调用相同的动作。

b)`link_to`采用 2 个参数。首先要显示的标题，第二个参数是 url。

所以你可以像这样链接到那些排名靠前的国家：

```
<li><%= link_to r.name, country_worldrecipes_path(r) %></li> 
```

现在您只需为 country_worldrecipes_path 定义正确的路线。有关路由的更多信息，[请查看此处](http://guides.rubyonrails.org/routing.html)。

# java - Android - 谷歌电子表格 API

> ID：13838963
> 
> 赞同：21
> 
> 时间：2012-12-12T11:40:40.427
> 
> 标签：java, android, api, google-sheets, google-drive-api

我不知道应该使用哪些库来开发管理 Google 电子表格的 Android 应用程序。我需要连接、复制、编辑、读取用户电子表格，但今天我不明白这是哪种方式。

```
Google Drive Api : https://developers.google.com/drive/
Google Spreadsheet Api: https://developers.google.com/google-apps/spreadsheets/
Google APi java client: http://code.google.com/p/google-api-java-client/ 
```

哪个是正确的？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-12T11:48:37.457

简短回答：所有三个

长答案：

您必须使用新的[Drive API](https://developers.google.com/drive/)，它允许上传、下载和修改 Google Drive 中的文件。有了这个，你只能对电子表格进行有限的操作，基本上是下载或上传。

[Google Spreadsheet Api](https://developers.google.com/google-apps/spreadsheets/)允许在电子表格中进行复杂的操作，例如按行和列访问数据。

[Google API java 客户端](http://code.google.com/p/google-api-java-client/)是所有 Google API 中的一个依赖项，它用于以不同的方式授权连接，例如 OAuth 或服务帐户。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-14T08:42:01.553

最后我使用的库是：

```
gdata-client-1.0.jar
gdata-client-meta-1.0.jar
gdata-core-1.0.jar
gdata-spreadsheet-3.0.jar
gdata-spreadsheet-meta-3.0.jar
google-api-client-1.12.0-beta.jar
google-api-client-android-1.12.0-beta.jar
google-http-client-1.12.0-beta.jar
google-http-client-android-1.12.0-beta.jar
google-oauth-client-1.12.0-beta.jar
gson-2.1.jar
guava-13.0.1.jar
jackson-core-asl-1.9.9.jar
jsr305-1.3.9.jar
protobuf-java-2.4.1.jar 
```

正如 Eugenio 所建议的（谢谢！！！）我将电子表格 api 中的库与 java-client-api “混合”，在身份验证之后，我使用以下内容获取单元格

```
SpreadsheetEntry spreadsheet = null;
URL metafeedUrl = new URL("https://spreadsheets.google.com/feeds/spreadsheets/private/full");

SpreadsheetFeed spreadsheetFeed = service.getFeed(metafeedUrl, SpreadsheetFeed.class);
List<SpreadsheetEntry> spreadsheets = spreadsheetFeed.getEntries();
for (SpreadsheetEntry entry : spreadsheets) {
   if (entry.getTitle().getPlainText().equals(spreadsheetTitle)) {
      spreadsheet = entry;
   }
}

if (spreadsheet == null) {
    throw new FileNotFoundException("Cannot find the required spreadsheet '" + spreadsheetTitle + "'");
}

WorksheetEntry worksheet = null;
WorksheetFeed worksheetFeed = service.getFeed(spreadsheet.getWorksheetFeedUrl(), WorksheetFeed.class);
List<WorksheetEntry> worksheets = worksheetFeed.getEntries();
    for (WorksheetEntry entry : worksheets) {
    if (entry.getTitle().getPlainText().equals(worksheetTitle)) {
         worksheet = entry;
    }
}

if (worksheet == null) {
    throw new FileNotFoundException("Cannot find the required worksheet '" + worksheetTitle + "'");
}

URL listFeedUrl = worksheet.getListFeedUrl();
ListFeed listFeed = service.getFeed(listFeedUrl, ListFeed.class); 
```

目前我使用了“最差”的身份验证系统，我应该在 OAuth2 中打开它，但目前 ClientLogin 是以这种方式完成的：

```
SpreadsheetService service = new SpreadsheetService("v1");
service.setProtocolVersion(SpreadsheetService.Versions.V3);
service.setUserCredentials(email, password); 
```

# facebook - 在没有公司的情况下测试 Facebook 支付

> ID：13838969
> 
> 赞同：5
> 
> 时间：2012-12-12T11:40:59.150
> 
> 标签：facebook, facebook-credits

我想将[Facebook Payments](https://developers.facebook.com/docs/payments/)集成到我的应用中。我正在使用与实时应用程序分开的开发 Facebook 应用程序进行开发。然而，要在这个应用程序上启用 Facebook 支付，我似乎必须首先输入公司详细信息，我还没有。

有办法解决吗？同样，仅用于开发和测试，而不用于实际支付。

注意：我有另一个较旧的开发应用程序，用于完全不同的应用程序，它设置了“公司国家/地区”，看来我可以测试该应用程序的付款。但是，国家选项在我的新应用中不可见。

# java - JList 选择已更改

> ID：13838970
> 
> 赞同：-1
> 
> 时间：2012-12-12T11:41:04.443
> 
> 标签：java, swing, listener, jlist

我正在使用 Netbeans 创建一个 JList 和一个事件侦听器。我想检索用户选择的对象，当它被选中时。到目前为止，我有这个：

```
private void listKurserValueChanged(javax.swing.event.ListSelectionEvent evt) {
    System.out.println("" + ((listKurser)evt.getSource()));
} 
```

但是，我在 JList 的 listKurser 上得到“找不到符号”。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:45:36.600

尝试

```
private void listKurserValueChanged(javax.swing.event.ListSelectionEvent evt) {
    System.out.println("" + ((JList)evt.getSource()));

    JList changedList = (JList)evt.getSource();
    if (listKurser == changedList) {
        //listKurser was changed
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:53:35.837

只是作为序言，我不使用 Netbeans，但是当我看到这条线时：

```
private void listKurserValueChanged(javax.swing.event.ListSelectionEvent evt) { 
```

我猜 Netbeans 会自动生成要从附加到名为“listKurser”的 JList 的 ListSelectionListener 调用的方法。

因此，它是一个独特的侦听器，仅附加到特定的 JList，这不一定是坏事。如果是这样，则无需强制转换，甚至无需调用 event.getSource()。只需简单地调用：

```
listKurer.getSelectedValue() //or whatever you're trying to call 
```

# tfs - 已创建 TFS2008 错误分支

> ID：13838971
> 
> 赞同：0
> 
> 时间：2012-12-12T11:41:06.857
> 
> 标签：tfs, branch, branching-and-merging

我用 TFS2008 创建了一个分支：在一个名为 Main 的文件夹上，我创建了一个名为 Dev 的分支，一切正常，在 Dev 文件夹中有来自 Main 的所有代码。

但是当我开始使用 Dev 文件夹时，我看到了一个名为 Main 的子文件夹，但我不知道它是如何创建的（在我创建 Dev 分支的同一时刻）。

这是结构：

*   $/项目
    *   主要的
        *   [档案]
    *   开发
        *   [档案]
        *   主要的
            *   [档案]

当我尝试删除 $/Project/Dev/Main 时，稍后当我合并来自 Dev 的更改时，tfs 将 $/Project/Main 标记为待删除。

综上所述，有什么办法可以删除$/Project/Dev/Main和$/Project/Main之间的链接？$/Project/Dev 中的文件可以很好地与 $/Project/Main 合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:44:03.223

最后，我找到了解决问题的棘手方法：

*   将 $/Project/Dev/Main 移动到 $/Project/BadMainBranch
*   删除 $/Project/BadMainBranch 并签入。

问题解决了......但如果有人能展示另一种解决它的方法，也许我能理解到底发生了什么！

# c++ - libuv线程安全吗？

> ID：13838972
> 
> 赞同：16
> 
> 时间：2012-12-12T11:41:14.583
> 
> 标签：c++, node.js, pthreads, libuv

我创建了一个专用于 libuv 运行循环的新线程。线程函数看起来像这样：

```
void thread_function()
{
  uv_loop_t *loop = uv_loop_new();
  uv_ref( loop );
  uv_run( loop );
} 
```

ref 计数器增量使线程保持活动状态并处于处理 libuv 事件的状态。我希望能够通过`uv_unref`在主线程上执行来导致运行循环结束，从而导致线程退出。

但是，在检查`uv_ref`源代码时，我没有看到任何保证在并发访问期间对引用计数器变量的访问将同步。此外，在运行循环期间，我没有看到任何放弃对操作系统的控制的 yield 调用，这意味着程序将无法与其他进程很好地协作。

这让我相信我没有以正确的方式使用 libuv。如果有人可以解释我做错了什么，那就太好了！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-12T16:47:28.827

不，libuv 以这种方式不是线程安全的。您应该使用 uv_async 来指示循环退出。uv_async 是 libuv 拥有的唯一线程安全工具。

它看起来像这样：

```
uv_async_t exit_handle;

void exit_async_cb(uv_async_t* handle, int status) {
  /* After closing the async handle, it will no longer keep the loop alive. */
  uv_close((uv_handle_t*) &exit_handle, NULL);
}

void thread_function() {
  uv_loop_t *loop = uv_loop_new();
  /* The existence of the async handle will keep the loop alive. */
  uv_async_init(loop, &exit_handle, exit_async_cb);
  uv_run(loop);
} 
```

现在从另一个线程，您可以通过调用来指示此循环退出

```
uv_async_send(&exit_handle); 
```

您需要注意不要`uv_async_send()`在其他线程完成设置循环和 uv_async 句柄之前调用。最新版本的 libuv 包括您可以使用的[uv_barrier同步原语；](https://github.com/joyent/libuv/blob/731adacad2426d349d4c51ca608184f7e01c93c6/include/uv.h#L1870-L1872)但是 Node.js 0.8 附带的 libuv 版本尚不支持此功能，因此您可能需要使用 pthread 工具来完成此工作。

在旁注中，您似乎正在调用`uv_ref`并`uv_unref`使用循环引用作为参数。在最近的 libuv 版本中，这已经改变，你现在应该`uv_ref`和`uv_unref`一个特定的句柄。详见[uv.h。](https://github.com/joyent/libuv/blob/731adacad2426d349d4c51ca608184f7e01c93c6/include/uv.h#L254-L259) _

# linux - 一起使用 find、grep 和 sed

> ID：13838973
> 
> 赞同：4
> 
> 时间：2012-12-12T11:41:15.267
> 
> 标签：linux, sed, grep, find

我正在尝试查找所有出现的具有指定字符串的文件，然后清除所有这些文件的内容。因此，其中包含“stringtofind”的文件随后将是一个空文件。

为此，我尝试了以下方法，但出现错误：

随着以下我得到错误： find: missing argument to `-exec'

```
 find / -maxdepth 1 -xdev -type f -exec grep -i "stringtofind" -l -exec sed -i '/./d' 
```

随着以下我得到错误：

grep：/ nis

/tset.any

/test2.文件

/test.txt

: 没有这样的文件或目录 sed: 没有输入文件

```
find / -maxdepth 1 -xdev -type f -print | xargs -0 grep -i "stringtofind" -l | xargs sed -i '/./d' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:36:46.123

缺少参数的 find 命令非常接近工作。尝试：

```
find / -maxdepth 1 -xdev -type f -exec grep -i "stringtofind" -l {} \; -exec sed -i '/./d' {} \; 
```

您只需要在每个操作的末尾添加一个反斜杠转义分号`-exec`并添加`{}`以使其知道替换文件名的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:59:55.887

您需要为. `{}`_ 此外，我建议您使用 GNU 并行处理文件：`;``+``-exec`

```
find / -maxdepth 1 -xdev -type f -exec grep -li "stringtofind" {} + | 
  parallel sed "'/./d'" '{}' 
```

要处理带有换行符的文件名，您需要按照其他人的建议使用零终止：

```
find / -maxdepth 1 -xdev -type f -exec grep -Zli "stringtofind" {} + | 
  parallel -0 sed "'/./d'" '{}' 
```

### 编辑

这是一个非并行依赖的替代方案：

```
find / -maxdepth 1 -xdev -type f -exec grep -Zli "stringtofind" {} + | 
  while IFS= read -r -d $'\0' file; do
    sed '/./d' "$file"
  done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T11:52:28.540

```
find / -maxdepth 1 -xdev -type f|xargs grep -l 'string'| xargs perl -pi -e 's/.*\n//g' 
```

上面的这个命令甚至会删除文件中的换行符。如果你想保留新行并删除每一行中的内容，请使用以下内容：

```
find / -maxdepth 1 -xdev -type f|xargs grep -l 'string'| xargs perl -pi -e 's/.//g' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T11:51:49.013

您对包含空格的文件名有疑问。使用 的`-0`参数时`xargs`，您应该使用`-print0`的最终参数`find`。`grep`应该对此感到高兴。

但是，虽然这将解决`find`and之间管道中的问题`grep`，但它不允许将管道中的零分隔名称从`grep`to 传递`sed`。所以，`sed`还是会抱怨...

因此，您应该`grep`在`find`using中进行测试`-exec`，并使用单个管道到`sed`，如下所示。请注意在占位符`"`周围使用双引号。`{}`

```
find / -maxdepth 1 -xdev -type f -exec grep -i "stringtofind" -q "{}" \; -print0 | xargs -0 sed '/./d' 
```

它使您能够通过仅运行命令的第一部分（最多但不包括`|`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T11:59:01.453

单程：

```
$ for file in $(find / -maxdepth 1 -xdev -type f  -exec grep -li stringtofind '{}' \;)
> do
>   > $file
> done 
```

# typescript - BreezeJS - 如何编写复杂的查询？

> ID：13838975
> 
> 赞同：1
> 
> 时间：2012-12-12T11:41:32.500
> 
> 标签：typescript, breeze, jaydata

如何使用 BreezeJS + OData 或 WebAPI 编写复杂的查询？我想在 JayData 中使用 Northwind 作为参考数据库是这样的吗？我的问题是我不知道如何表达同时引用数据库的查询（不是与常量相比的字段）以及具有复杂逻辑树（a || (b && c)）的查询？

```
context.Products.filter(function(product) {
   return (product.Unit_Price < product.Category.BudgetPriceLimit) || 
   (product.Category.IsOnSale && product.Supplier.IsFavored)
}).toArray(...) 
```

我的另一个问题是关于 TypeScript + 查询。如何在 BreezeJS 中使用箭头函数进行查询？因此，有一种方法可以代替表达式构建器：

```
query(Product => Product.Unit_Price < Product.Category.BudgetPriceLimit) 
```

感谢您的帮助，如果这些是明显的问题，对不起。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T20:01:50.520

***这篇文章已经过编辑，以纠正我的一个错误，以及从 v 0\. 77.1 开始添加到微风中的新功能。***

好问题！

Breeze 现在支持跨属性查询表达式（从 v 0.77.1 开始），例如：

```
var shippedLateQuery = EntityQuery.from("Orders")
                                  .where("requiredDate",">","shippedDate"); 
```

第三个参数（上面的“shippedDate”）将被视为属性表达式或文字，具体取决于上下文。通常，如果该值可以解释为属性表达式，那么它将被解释为，否则将被视为文字。在大多数情况下，这很有效，但您也可以强制解释。有关详细信息，请参阅 API 文档。

通过 Predicates 完成使用轻而易举的组合复杂查询，即 (a || (b && c))。这里有一些很好的例子：

[查询示例 - 请参阅带有谓词的复合条件主题](http://www.breezejs.com/documentation/query-examples#Where%20clauses%20EntityQuery.where)

此外，这里的第一个微风教程：[教程](http://learn.breezejs.com/)还可以让您尝试这些功能（请参阅步骤 5）。

我们正在积极关注 Typescript，并计划完全启用它，但我们仍处于早期阶段。

**更新：从 v 0.84.4 开始，Breeze 提供完整的 TypeScript 支持。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:39:30.670

在 Breeze 支持字段到字段比较之前，您可能会考虑在服务器端控制器上编写自定义查询方法，以构建可以进行字段到字段比较的 LINQ 查询。为了给你的客户端更多的灵活性，它可以传递你的控制器方法解释的参数来影响查询构造；使用*withParameters*子句。您可以结合使用 OData 查询子句和*withParameters*子句。

# android - Http Get方法在android中显示地图

> ID：13838978
> 
> 赞同：0
> 
> 时间：2012-12-12T11:41:38.393
> 
> 标签：android, http-get

我在 xxx.php 文件中有一个谷歌地图代码。如何使用 android 中的 Http Get 方法使用 android 应用程序显示该地图。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:14:37.767

看看[WebView](http://developer.android.com/reference/android/webkit/WebView.html) 更好的方法是使用谷歌地图的安卓库。

# mysql - SQL 大小写正则表达式查询

> ID：13838982
> 
> 赞同：1
> 
> 时间：2012-12-12T11:41:41.683
> 
> 标签：mysql, regex

我的代码中出现了一个错误，它允许重复条目出现在数据库表中，但大小写不同。我正在使用 MySQL。

**例如**，在本例中，不应该添加第二行，但它确实添加了。

```
 ID    Name          Description
-------------------------------------
    1    HELLO WORLD    Saying hello
    2    Hello world    Saying hello 
```

为了纠正不正确的数据，我想在出现重复的地方删除全名大写的行。我可以在 SQL 中做正则表达式，这是最好的解决方案，我该怎么做？

完整的表格如下

> 'ADDRESSBOOK_GROUP', 'CREATE TABLE `ADDRESSBOOK_GROUP`( `ID` int(10) unsigned NOT NULL default ''0'', `NAME`varchar(255) collat​​e utf8_unicode_ci NOT NULL, `DESCRIPTION`text collat​​e utf8_unicode_ci, `ADDRESSBOOK_ID`int(10) default NULL, `TYPE` int(10) unsigned NOT NULL default ''1'', 主键 ( `ID`), 键 `ADDRESSBOOK_ID`( `ADDRESSBOOK_ID`)) ENGINE=MyISAM 默认字符集=utf8 COLLATE=utf8_unicode_ci ROW_FORMAT=DYNAMIC'

**编辑 -**我也忘了之前提到我只希望在 ADDRESSBOOK_ID 为“6”时进行重复检查；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T11:56:39.973

以下选择存在双精度的所有大写值

```
delete t.* from table_name t
inner join (
    select distinct t.id
    from table_name t
    left join table_name t2
        on t2.col_name = t.col_name
    where t.col_name LIKE BINARY UPPER(t.col_name)
) as a
    on a.id = t.id; 
```

编辑：

```
delete t.* from ADDRESSBOOK_GROUP t
inner join (
    select distinct t.ID
    from ADDRESSBOOK_GROUP t
    left join (
        select
            count(*) as n,
            NAME,
            ADDRESSBOOK_ID
        from ADDRESSBOOK_GROUP
        group by 
            NAME,
            ADDRESSBOOK_ID
    ) as t2
        on t2.name = t.name
        and t2.ADDRESSBOOK_ID = t.ADDRESSBOOK_ID
    left join ADDRESSBOOK_GROUP t_n
        on t_n.ID = t.ID
        and t_n.NAME REGEXP ('^[0-9]+$') 
    where 
        t.NAME like binary upper(t.NAME)
        and t_n.ID is null
        and t2.n > 1
) as a
    on a.ID = t.ID
where t.ADDRESSBOOK_ID = 6; 
```

# html - 光标出现到手

> ID：13838983
> 
> 赞同：0
> 
> 时间：2012-12-12T11:41:43.067
> 
> 标签：html, css

下面的锚标记有效。但是，我的问题是，“锚标签如何在鼠标悬停时强制**光标将其外观更改为*手（就像大多数链接一样）？”***

```
<a href="javascript:void(0);" onclick="doSomethingh('value');">
      <label class="someClass">Click Me</Label>
</a> 
```

**已编辑**

我希望光标显示为手，但它显示指针

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:44:30.220

添加`cursor:pointer`到标签

```
label {cursor:pointer }​ 
```

**[演示](http://jsfiddle.net/5YHX7/572/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:46:31.657

在您的`.someClass`CSS 规则中，添加：

```
cursor:pointer; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T17:07:13.997

这可以通过[**CSS cursor 属性**](http://www.w3.org/TR/CSS21/ui.html)来完成。 cursor 属性指定当指向元素时要显示的光标类型。

```
.someClass {
    cursor: pointer;
} 
```

现在考虑白框`someClass`比鼠标悬停在`someClass` 光标上看起来像下面

> ![在此处输入图像描述](../Images/92d73e996be8942cbd3b15d27103d330.png)

[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/EPVm9/)

* * *

**好读**

[MDN：`cursor`CSS 属性](https://developer.mozilla.org/en-US/docs/CSS/cursor)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-12T11:44:25.593

```
.someClass {
    cursor: pointer;
} 
```

# javascript - 使用 $.getJSON() 我无法在任何版本的 IE 中接收结果。火狐/Chrome 工作正常

> ID：13838984
> 
> 赞同：0
> 
> 时间：2012-12-12T11:41:44.763
> 
> 标签：javascript, jquery, json, https, html-parsing

问题是我无法检索`.json file`我在安全服务器上访问的结果，但这仅在使用***任何版本***的**IE**网络浏览器时才会发生。

Firefox 和 Chrome 运行良好，检索数据时不会报告控制台错误。

由于这只是一个 IE 问题，我想知道检索它的最佳方法，`.json file`以便我可以解析接收到的数据的内容。想法？

这是代码：

```
<!doctype html>
<html>
<head>
<title>AFD TEST</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/datejs/1.0/date.min.js"></script>

<script>
$(document).ready(function(){
$.getJSON('https://www.inquicker.com/facility/americas-family-doctors.json',
    function(data){
        var earliest = {};
        var doctor = {};
        var links = {};
        $.each(data.schedules, function(i, name) {
            var location = name.name.split(' - ')[0];
            var dr_name = name.name.split(' - ')[1];

                if (name.available_times.length) {
                   if (location in earliest) {   // location has already been stored.
                      var newTime = parseAvailableDate(name.available_times[0].when);
                      if (newTime.isBefore(earliest[location]))       {
                         earliest[location] = newTime;
                         doctor[location] = dr_name;  
                         links[location] = name.available_times[0].url;
                      }                    
                   }
                   else {
                      earliest[location] = parseAvailableDate(name.available_times[0].when); 
                      doctor[location] = dr_name;
                      links[location] = name.available_times[0].url; 
                   }
                }
        });
        displayDetailsBrentwood("Brentwood", earliest, doctor, links);
        displayDetailsSmyrna("Smyrna", earliest, doctor, links);
        displayDetailsSpring("Spring Hill", earliest, doctor, links);
});
});

function parseAvailableDate(dateString) {
var trimmedString = dateString.replace(/^\s\s*/, '');
var avTime=trimmedString.split(' ')[0],
    ampm=trimmedString.split(' ')[1],
    avDay=trimmedString.split(' ')[2];
var avDate = Date.parse("next "+avDay);
avDate.addHours(avTime.split(':')[0]).addMinutes(avTime.split(':')[1]);
if (ampm == "pm" && avTime.split(':')[0] != "12") avDate.addHours(12);

return avDate;
}

function displayDetailsBrentwood(location, earliest, doctor, links) {
$("#brentwood").append("<ul><a  href='"+links[location]+"'>"+earliest[location].toString("MM/dd/yyyy h:mm tt")+"</a></ul>");         
}
function displayDetailsSmyrna(location, earliest, doctor, links) {
$("#smyrna").append("<ul><a href='"+links[location]+"'>"+earliest[location].toString("MM/dd/yyyy h:mm tt")+"</a></ul>");         
}
function displayDetailsSpring(location, earliest, doctor, links) {
$("#spring_hill").append("<ul><a  href='"+links[location]+"'>"+earliest[location].toString("MM/dd/yyyy h:mm tt")+"</a></ul>");         
}
</script>
</head>
<body>
<ul id="brentwood"></ul>
<ul id="smyrna"></ul>
<ul id="spring_hill"></ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:14:35.143

您的测试网页看起来不错，只是缺少`meta tag`字符编码。

修改后的头部：

```
<!doctype html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>AFD TEST</title> 
```

[**W3C 标记验证服务**](http://validator.w3.org/check)没有报告其他错误，所以让我们找出您的脚本有什么问题。

* * *

**参考1：** [**https ://www.inquicker.com/facility/americas-family-doctors.json**](https://www.inquicker.com/facility/americas-family-doctors.json)

上面的`.getJSON()`URL 正在使用**`https`**，当直接从**IE8**地址栏访问该 URL 时，它将失败并显示警告消息。这在将 JSON 文件显示为文本的 Firefox 或 Chrome 中不会发生。

这意味着您的脚本在与 IE 浏览器一起使用时也会失败，直到可以像 Firefox 和 Chrome 一样通过地址栏访问**JSON文件。**

注意 IE，我可以**`http`**用来访问您的**JSON**文件，但只能作为下载选项。这适用于您的 URL 的所有 IE 版本。

话虽如此，我不确定这是否是所有 IE 浏览器的标准行为，所以我寻找另一个安全的 JSON 文件在 IE8 中进行测试。

**参考2：** [**https ://raw.github.com/fhellwig/pkgconfig/master/package.json**](https://raw.github.com/fhellwig/pkgconfig/master/package.json)

这个新的参考 URL 经过测试，在 IE 浏览器中没有发现任何问题，数据可以很容易地以文本形式查看。旁注：此文件上的 SSL 是 128 位，而您的是 256 位。

***底线：***由于您不需要像[**SO Question/Answers**](https://stackoverflow.com/q/2483771)提供的那样执行注册表黑客，***简单的解决方案***是调整您的**服务器设置**以允许**在浏览器中显示JSON**文件类型，而不是将其作为下载提供。

很有可能**您无法更改此服务器设置**或***出于安全原因不想更改***，因此需要另一个解决方案。

**使用数据抓取方法**

[**与Yahoo Query Language**](http://developer.yahoo.com/yql/)一起使用`.ajax()`方法将检索用于任何版本的 IE 的 JSON 文件，而不会出现问题。[](http://developer.yahoo.com/yql/)**`https`**

 **要查看脚本将收到的结果，请为此目的使用**YQL 开发人员在线工具。**在树视图中查看结果可以查看网页结构，这对于在脚本中创建指向该位置的直接路径很有用。

示例：[**使用 https URL 的 YQL**](http://developer.yahoo.com/yql/console/?q=SELECT%20*%20FROM%20html%20WHERE%20url%3D%22https%3A%2F%2Fwww.inquicker.com%2Ffacility%2Famericas-family-doctors.json%22)

示例：[**YQL 使用带有 XPATH 的 https URL 直接访问特定数据节点**](http://developer.yahoo.com/yql/console/?q=SELECT%20*%20FROM%20html%20WHERE%20url%3D%22https%3A%2F%2Fwww.inquicker.com%2Ffacility%2Famericas-family-doctors.json%22%20AND%20xpath%3D%22%2F%2Fp%22)

对于上面的两个示例，按**JSON 单选按钮**，然后按**TREE 按钮**查看结果。获得结果后，展开`results`树中的节点，直到看到数据。

然后，要查看此**YQL 语句**将如何在您的脚本中发挥作用，请在 IE 中查看此在线演示，该演示以转义形式使用该语句的大部分。转义形式非常独特，是通过按`permalink Button`（长链接）获得的。*只有当您使用非常长/复杂的 XPATH 时，您才会注意到这个 YQL 转义代码确实是多么独特，因为它实际上可能在战略位置包含单引号。*

[**jsFiddle 演示：americas-family-doctors.json 在 IE 中在安全连接上查看**](http://fiddle.jshell.net/7WpvP/)

**注意：**这些`console.log`消息在 IE 中的使用最少，但由于它们处于打开状态，因此请确保启用浏览器控制台。例如，在 IE8 中看到的错误是 jsFiddle 错误，而不是脚本错误。使用 Firefox 和 Chrome`console.log`正确查看消息。

* * *

**额外：**这是一个演示如何**解析**和使用返回结果的版本。

[**jsFiddle 演示：.json 文件和 IE 安全连接上所有数据的解析**](http://fiddle.jshell.net/5sFX2/)**

# bash - Bash：Cd 的真正作用是什么？

> ID：13838986
> 
> 赞同：3
> 
> 时间：2012-12-12T11:41:53.807
> 
> 标签：bash, readline

如果我在输入结束时按下`C-d`，输入似乎被刷新，但没有`EOF`发送到程序。但是，如果我再按`C-d`一次，`EOF`则发送。

为什么我第一次按 EOF 没有发送`C-d`？这种行为记录在哪里？

为了试验自己玩`cat`，这里有一个例子：

```
$ cat
abc<C-d>abc<C-d>
$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:07:47.537

`C-d`是[传输结束 (EOT) 字符](http://en.wikipedia.org/wiki/End-of-transmission_character)：

> 在 Unix 中，文件结尾字符（默认为 EOT）导致终端驱动程序立即使其输入缓冲区中的所有字符可用；通常，驱动程序会收集字符，直到它看到一个行尾字符。如果输入缓冲区为空（因为自最后一个行尾或文件尾以来没有输入任何字符），则从终端读取的程序读取的字节数为零。在 Unix 中，这种情况被理解为已到达文件末尾。

在您的示例中，当您运行`cat`并键入几个字符后跟 时`C-d`，键入到该点的字符将被发送到将`cat`它们打印到屏幕上。现在输入缓冲区是空的，所以当您`C-d`再次键入时，`cat`从缓冲区读取零字节并终止，因为已满足文件结束条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:54:00.887

使用 bash，您可能正在使用 readline 库。

正如您要求的文档，[这里是](http://www.gnu.org/software/bash/manual/bashref.html#Readline-Bare-Essentials)

你会看到 Ctrl-D 删除了光标下的字符，如果你继续阅读，你会发现很多很棒的快捷键！

# node.js - nodejs：安装新的节点版本后出现 npm 错误

> ID：13838988
> 
> 赞同：0
> 
> 时间：2012-12-12T11:41:57.543
> 
> 标签：node.js, npm

我正在调用：`npm install nodetime`我收到以下错误：

```
module.js:340
throw err;
      ^
Error: Cannot find module 'c:\Program Files (x86)\nodejs\node_modules\npm\bin\npm-cli.js'
at Function.Module._resolveFilename (module.js:338:15)
at Function.Module._load (module.js:280:25)
at Module.runMain (module.js:492:10)
at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我认为它只是在我安装了新的节点版本后才开始发生（但我先卸载了旧版本，所以我不确定）。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:04:03.227

在我从命令提示符调用相同的命令后修复。

# java - 在 Cassandra 中实现 FIFO 读取

> ID：13838990
> 
> 赞同：2
> 
> 时间：2012-12-12T11:41:59.617
> 
> 标签：java, sorting, cassandra, hector

给定一个 Cassandra 数据库，是否有一种以 FIFO 方式获取记录的机制，以便可以按插入时间的升序读取记录。我基本上需要分批读取 N 最旧的行，处理它们并在处理完成后删除该批次。

据我了解，列按其类型排序（由 CompareWith 指定），行按其分区器排序。

我可以使用 OrderPreservingPartitioner 按插入时间的升序对行进行排序吗？我在单个节点上运行 Cassandra，所以我并不担心密钥的分配。如果可以使用 OrderPreservingPartitioner，如何配置我的键的排序条件，以便记录按插入的升序维护？

或者，Hector 是否提供了一种始终获取行的机制，以便首先获取最旧的行？

**编辑 ：**

看完rs_atl的帖子后，我还有一些疑问：

1.  如果我正确理解了这一点，我将创建一个以 TimeUUIDType 作为比较器的列族。然后，我将不得不对列名使用时间戳。我想到的直接问题是如何将列名的排序顺序定义为升序或降序？我可以在创建列族时执行此操作，还是必须通过客户端 API 执行此操作？

2.  如果我决定使用“小时”作为我的分片间隔，即，如果我将小时附加到我的键，我如何检索最早一小时的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:55:02.117

在尝试使用 Cassandra 进行此类解决方案时，需要考虑许多事项：

1.  始终使用 RandomPartitioner，因为如果你不这样做，你会得到热点。
2.  您的密钥应该是时间段（如几天或几小时），因此您可以在给定的时间段内提前知道它们。
3.  您的列名应该是按时间顺序排序的时间戳（按字典顺序或数字顺序）。这将允许您查询范围。
4.  确保至少使用 QUORUM（或 LOCAL_QUORUM）读取和写入，这样您就不会遇到一致性问题。
5.  您需要在您的应用程序中找到一种方法，以确保您不会多次处理相同的数据，因为其他人可能会在您读取记录以进行处理然后将其删除（即，它不像队列）。

Hector 根本不决定排序。这发生在插入时，并且基于您选择的比较器。如果您想要特定的顺序，则必须以这种方式写入数据（参见上面的第 3 点）。

关于您编辑中的其他信息：

1.  我不会使用 TimeUUIDType 作为您的比较器，只是一个长值，它可以是 Unix 纪元，也可以是 YYYYMMDDxx 形式的时间数字表示，达到您需要的精度水平。您可以在查询时决定是否需要正常（升序）或反向（降序）顺序的值。

2.  您可以要求所有密钥，然后只取最小的一个，这可能会很好，也可能是一个糟糕的主意，具体取决于您拥有的数量和延迟要求。或者（当然更有效），您实际上可以在某处写入最旧的密钥（一个文件，另一个 CF，在内存中，任何有意义的东西）。

# javascript - 测试字段值是否为数字且不为空

> ID：13838992
> 
> 赞同：3
> 
> 时间：2012-12-12T11:42:03.010
> 
> 标签：javascript, html

> **可能重复：**
> [验证字符串是否为正整数](https://stackoverflow.com/questions/10834796/validate-that-a-string-is-a-positive-integer)

所以我想检查一个表单字段是否为空，并允许它只有正数，没有空格或字母。到目前为止，我使用以下代码成功检查了该字段是否为空的第一部分：

```
function validate(form) {
    var elements = form.elements;

    if (form.qty.value == "") {
        alert("Please enter the field");
        document.forms[0].qty.focus()
        document.forms[0].qty.select()
        return false;
    }

    return true;
} 
```

表格中的某处：

`<form action="addtocart.php" method ="post" onsubmit="return validate(this);" />`...

但现在我只想允许数字以及检查该字段是否为空。我找到了一些脚本，但我不知道如何将代码合并到一个有效的脚本中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T11:45:44.963

```
if (Number(form.qty.value) > 0) {
    // Only executes if value is a positive number.
} 
```

请注意，如果该值为空字符串，则该语句将不会返回 true。`null`, `NaN`（显然）和 也是如此`undefined`。数字的字符串表示被转换为它们的数字对应物。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T11:46:45.540

您可以使用正则[表达式](http://www.regular-expressions.info/)
， 您的模式是`^\d+$`.

`^`- 行首
`$`- 行尾
`\d`- 数字
`+`- 1 次或多次

```
if(mystr.match(/^\d+$/))
{
    //
} 
```

如果您不需要第一个符号，`0`则应编写`/^(0|[^1-9]\d*)/`
阅读正则表达式文档以了解此模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T11:48:54.197

尝试使用`search()`函数和正则表达式。像这样：

```
if (form.qty.value.search(/^([0-9\.]+)$/)==-1)
{
alert ("Please enter the field");
document.forms[0].qty.focus()
document.forms[0].qty.select()
return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:50:17.487

检查以下答案：[https ://stackoverflow.com/a/10270826/783743](https://stackoverflow.com/a/10270826/783743)

在您的情况下，我会执行以下操作：

```
function validate(form) {
    return isPositive(+form.qty.value);
}

function isPositive(n) {
    return +n === n && n >= 0;
} 
```

**解释：**

1.  该表达式`+form.qty.value`将字符串强制转换为数字。如果字符串为空或不是数字，它将表示`NaN`。
2.  该函数`isPositive`仅在`n`为数字 ( `+n === n`) 且大于或等于零 ( `n >= 0`) 时返回正数。