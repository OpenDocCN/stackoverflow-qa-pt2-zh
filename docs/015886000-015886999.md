# StackOverflow 问答 15886000-15886999

# c++ - 提升 IPC 警告 - 包含 managed_shared_memory

> ID：15886000
> 
> 赞同：1
> 
> 时间：2013-04-08T18:12:16.793
> 
> 标签：c++, boost, ipc, boost-interprocess

嗨，我收到以下警告

```
g++ -std=c++0x -Wall -c -I/usr/local/boost_1_53_0 -I/home/aditya/CodeBase/includes      MAIN.cpp 
In file included from /usr/local/boost_1_53_0/boost/interprocess/detail/managed_open_or_create_impl.hpp:15:0,
             from /usr/local/boost_1_53_0/boost/interprocess /managed_shared_memory.hpp:22,
             from MAIN.cpp:22:
/usr/local/boost_1_53_0/boost/interprocess/detail/os_thread_functions.hpp: In function  ‘void boost::interprocess::ipcdetail::thread_sleep(unsigned int)’:
/usr/local/boost_1_53_0/boost/interprocess/detail/os_thread_functions.hpp:169:65: warning: narrowing conversion of ‘(ms / 1000u)’ from ‘unsigned int’ to ‘__time_t {aka long int}’ inside { } [-Wnarrowing]
/usr/local/boost_1_53_0/boost/interprocess/detail/os_thread_functions.hpp:169:65: warning: narrowing conversion of ‘((ms % 1000u) * 1000000u)’ from ‘unsigned int’ to ‘long int’ inside { } [-Wnarrowing] 
```

在编译以下程序时

```
#include <iostream>
#include <memory>
#include <boost/thread.hpp>
#include <boost/managed_shared_memory.hpp>

int main(){

   return 0;
} 
```

我在 ubuntu 12.04 上使用 gcc 4.7

# objective-c - UITableViewCell 扩展了 UITableView

> ID：15886002
> 
> 赞同：1
> 
> 时间：2013-04-08T18:12:21.743
> 
> 标签：objective-c, xcode, uitableview

我的 iPad 应用程序中有一个 UITableView，由于某种原因，UITableViewCell 似乎比我的 tableView 宽，所以它实际上挂在右侧几个像素处。我尝试`cell.contentview`将其设置为与 uitableview 的宽度相匹配`cellforRow`，但它没有改变任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:51:59.453

我认为您应该将 UITableViewCell 的框架宽度设置为`cellForRowAtIndexPath`. 使用这样的东西。

```
 cell.frame = CGRectMake(0,0,self.tableView.frame.size.width,cell.frame.size.height); 
```

# css - 为什么 chrome 会为 h* 元素添加特定属性？

> ID：15886005
> 
> 赞同：0
> 
> 时间：2013-04-08T18:12:26.120
> 
> 标签：css, google-chrome

我想知道为什么 Chrome 会在家族的标题元素中添加样式属性`<h>`。当我添加这样一个元素，并且没有做特定的 css 标记时，chrome 会添加以下内容：

```
h3 {
display: block;
font-size: 1.17em;
-webkit-margin-before: 1em;
-webkit-margin-after: 1em;
-webkit-margin-start: 0px;
-webkit-margin-end: 0px;
font-weight: bold;
} 
```

我必须用类似的东西覆盖它

```
h3{
    display: block;
    font-size: 1.2em;
    -webkit-margin-before: 0;
    -webkit-margin-after: 0;
    -webkit-margin-start: 0;
    -webkit-margin-end: 0;
    cursor: default;
    font-weight: normal;
} 
```

好的，我可以接受他们将其设置为粗体并增加字体大小的部分，但他们为什么要更改边距？

有时我觉得这很令人困惑，因为我重新排列了上述元素并想知道为什么 and 的行为`<p>`不同`<h>`，因为我忘记了这一点。

还是只有我，我错过了重要的部分？

原谅我的英语，我尽力了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T18:22:00.893

停用 CSS：您将了解为什么浏览器有默认样式表（由他们选择）。

*   想象一下列表中的列表中的列表没有任何`padding/margin-left`项目集：所有列表项无论其级别如何都是左对齐的并且非常难以阅读。
*   如果没有 1em 之间的边距`p`，您将无法判断 2 组句子是在两个不同的段落中还是仅由 a 分隔`<br>`（那个和折叠边距......仅垂直）
*   `a`默认情况下带有下划线，并具有我们非常习惯的这种蓝色。如果没有（没有下划线和黑色的），您将如何判断文本中有链接？

所有这些都定义了文本的*自然*显示，这是在 Lie 和 Bos 发明 CSS 之前纯 HTML 所必需的。

至于`-start`, `-end`,`-before`和`-after`后缀，这只是一种与 CSS3*无关*的表示顶部、右侧、底部和左侧的方式。我所说的不可知论者的意思是语言可能是`RTL`（从右到左书写，如阿拉伯语和希伯来语）或`LTR`（从左到右，如英语或法语）或一天从上到下，*线条*从左到右，无论主要方向和次要方向方向，你可以*在前面*说，浏览器会从上下文中理解它是在顶部还是在左边……
但这就是浏览器的内部结构：当然，`margin`指令是没有前缀的，如果你甚至不关心 RTL 语言，它会*长期*与 TRBL 合作;)
所以继续简单的事情，比如

```
margin: 1em 10px 1.333em 20px 
```

编辑： CSS 写作模式模块第 3 级的
定义[- 流相关方向](http://www.w3.org/TR/css3-writing-modes/#logical-directions)：

> 相对于流的方向，**before、after**、start 和 end，是相对于页面上的内容流定义的。在 LTR 'horizo​​ntal-tb' 书写模式中，它们分别对应于**top、bottom**、left 和 right 方向。

# javascript - 如何检测要删除的字符何时为零宽度空格并执行两次删除或退格命令？

> ID：15886006
> 
> 赞同：1
> 
> 时间：2013-04-08T18:12:34.800
> 
> 标签：javascript, jquery, internet-explorer-8

我有一个内容可编辑的 div，我在其中使用零宽度空格字符，以使我的`<p></p>`标签可见且不包含空格字符。

像这样

```
<div id="myeditor" contenteditable="true">
    <p><b>My Heading 1</b></p>
    <p>&#8203;</p>
    <p>&#8203;</p>
    <p>&#8203;</p>
    <p><b>My Heading 2</b></p>
    <p>&#8203;</p>
    <p>&#8203;</p>
    <p>&#8203;</p>
    <p><b>My Heading 3</b></p>
    <p>&#8203;</p>
    <p>&#8203;</p>
    <p>&#8203;</p>
</div> 
```

这很好用，只是用户在尝试删除`ZWSP`角色另一侧的内容时必须按两次退格键或两次删除。

我希望能够检测到我即将删除`ZWSP`并在删除执行之前将其删除或执行两次删除命令。我怎样才能做到这一点？我也需要这个才能在 Internet Explorer 中工作......

到目前为止我有

```
$(document).on('keydown', "#myeditor", function (e) {
    var keyPressed = e.keyCode | e.which;
    if(keyPressed == 8 || keyPressed == 46){
        //TODO: determine character to be deleted and remove it if it is ZWSP
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:39:48.067

它远非完美，但它可能会给你一个启动。看看这里[http://jsbin.com/eweqon/3/edit](http://jsbin.com/eweqon/3/edit)

这个想法是确定我们要删除的字符是否在`textNode`仅包含`&#8203;`字符的 a 中。如果是，我们进一步检查它是否`parentNode`是一个`p`标签，并且该标签只包含一个`textNode`. 如果满足所有条件，我们就可以安全地`p`从其父标签中删除标签。它似乎运作良好，但是，我不确定如何处理`p`标签包含其他子元素的情况。

```
$(document).on('keydown', "#myeditor", function (e) {
var keyPressed = e.keyCode | e.which,
    emptyCharsOnly = true,
    node,
    range,
    i,
    len,
    text,
    p;
if(keyPressed == 8 || keyPressed == 46){
    //TODO: determine character to be deleted and remove it if it is ZWSP
  range = document.getSelection().getRangeAt(0);
  node = range.startContainer;
  p = node.parentNode;
  text = node.wholeText;

  if (!text) {
    return;
  }

  len = text.length;

  for (i = 0; i < len; i++) {
    if (text.charCodeAt(i) !== 8203) {
      emptyCharsOnly = false;
      break;
    }
  }

  if (
    node.nodeType === 3 &&
    emptyCharsOnly &&
    p && p.tagName === 'P'
  ) {

    //make sure the p tag only contains this text node
    if (p.childNodes.length === 1) {
      p.parentNode.removeChild(p);
    } else {
      //not sure what to do here exactly
      //i tried removing the previousSibling but it
      //did not give expected results.
    }
  }
} 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:21:34.690

我会考虑更改您提供的标记，特别是当您的用户添加空行时，他们不会以包含零宽度空间的段落结束。

一个快速实验显示 Firefox 使用 <br/>，而 Chrome 使用 <div><br/></div>。我认为您最好使用 <br/> 而不是段落标签。但是，您需要做的实验比我必须确定的要多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:37:21.860

这似乎奏效了。

```
$(document).on('keydown', "#myeditor", function (e) {
    var keyPressed = e.keyCode | e.which;
    if(keyPressed == 8){
       //TODO: determine character to be deleted and remove it if it is ZWSP
       var range = document.selection.createRange();
        range.moveStart('character', -1);
        if(range.text === String.fromCharCode(8203))
        {
            range.text = "";
        }
    }
}); 
```

# java - 在 Mountain Lion Mac OSX 上使用 Java 制作 .app 文件

> ID：15886009
> 
> 赞同：2
> 
> 时间：2013-04-08T18:12:47.400
> 
> 标签：java, macos

我通读了 Apple 提供的[关于 Mac 上 Java 开发的完整教程](https://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/00-Intro/JavaDevelopment.html)

但是，该教程中提到的大部分内容都没有出现在我的 Mac 中。上述文章最后一次由 Apple 于 2010 年 10 月更新。所以，我想知道是否仍然可以使用 Java 开发 OSX 应用程序。

我是否能够像其他 OSX 应用程序一样实现本机外观？如果是，您如何以及如何制作应用程序包。我使用网豆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:40:55.817

要制作原生 Mac .app 应用程序包，您需要使用[XCode](https://developer.apple.com/technologies/tools/)中包含的“Jar Bundler”工具。

要使用本机外观：

```
try {
    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
} catch (Exception e) {
    LOG.warn("Unable to set look & feel: " + e.getMessage(), e);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T19:12:10.257

旧的 Mac“Jar Bundler”应用程序不再可用。它不包含在 Xcode 中，也不能从 Mac Developer 网站获得。

如果您想以 Java 7 为目标，那么创建应用程序包的新推荐方法是使用 Oracle 的`appbundler.jar`. 有关分步指南，请参见[此处。](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html)

# openssl - 一种使用命令行 openssl 对填充的 SHA256 哈希进行 RSA“加密”的方法

> ID：15886012
> 
> 赞同：1
> 
> 时间：2013-04-08T18:12:48.900
> 
> 标签：openssl, rsa, encryption, bignum

我正在尝试使用openssl提出一个单线解决方案，它将接收消息的填充SHA256摘要（在这种情况下为256字节，对于RSA2048），并将RSA“解密”应用于256字节摘要，即

```
m^d mod n 
```

其中 n 是模数，d 是私有指数，m 是摘要消息（填充）。这在正常的 RSA2048 身份验证中通常会发生，但我需要逐步完成。

我试过了，但没有用。

```
openssl rsautl -decrypt -in msg.sha256 -inkey secret.pem -out msg.sha256.sig
RSA operation error
2675740:error:04065084:rsa routines:RSA_EAY_PRIVATE_DECRYPT:data too large for
modulus:rsa_eay.c:532: 
```

希望我混淆加密和解密（因为我想在计算中使用私有指数）我也试过这个

```
openssl rsautl -encrypt -in msg.sha256 -inkey secret.pem -out msg.sha256.sig
RSA operation error
2675740:error:0406D06E:rsa routines:RSA_padding_add_PKCS1_type_2:data too large
for key size:rsa_pk1.c:151: 
```

阅读 RSA“加密/解密”，在这种情况下，我认为我将文件加密/解密与单消息加密/解密混淆了。文件加密显然是涉及 AES128 和所有这些的更高级别的协议。我不希望那样，我只想用私有指数进行模幂运算。

我也尝试过`pkeyutil`（我知道这是具有相同结果的首选方法）。我很确定我走错了路，也许这在命令行中是不可能的（我知道使用“bignum”从 C API 中是可行的。）

- - 更新 - -

我尝试从 SHA256 散列中删除 PKCS1 v1.5 填充（所以我只剩下 32 个字节的散列），并通过它，但这也不起作用。

```
$ head -32c msg.sha256 | openssl.exe rsautl -decrypt -inkey secret.pem -out test.sig
RSA operation error
2675740:error:0407106B:rsa routines:RSA_padding_check_PKCS1_type_2:block type is
 not 02:rsa_pk1.c:190:
2675740:error:04065072:rsa routines:RSA_EAY_PRIVATE_DECRYPT:padding check failed
:rsa_eay.c:616: 
```

我尝试了同样的`-raw`方法，它没有错误地完成，但结果不是我所期望的（这是我所期望的，因为它没有 PKCS1v1.5 填充）。然后我尝试颠倒输入文件的字节顺序，因为 openssl 似乎在抱怨输入文件（作为 256 字节 BIGNUM）略大于模数（作为 256 字节 BIGNUM）的事实，如果你颠倒字节顺序，然后尾随 0 变为前导零，并且更小。它完成了，但结果仍然不正确。

```
$ perl -e '$a = `cat msg.sha256`; print "".reverse($a);' > msg.sha256r

$ head -256c msg.sha256r | openssl.exe rsautl -encrypt -raw -inkey secret.pem -out test3e.sig
$ head -256c msg.sha256r | openssl.exe rsautl -decrypt -raw -inkey secret.pem -out test3d.sig 
```

是的，我意识到我只是在黑暗中蹒跚而行，但你会惊讶于我有多少次这样幸运......

test3e.sig 和 test3d.sig 都不同意我通过 3rd 方工具进行的计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T02:26:47.737

您得到的错误`data too large for modulus`是因为您输入`if`了以下代码中的第二个：

```
/* make data into a big number */
if (BN_bin2bn(from,(int)flen,f) == NULL) goto err;

if (BN_ucmp(f, rsa->n) >= 0)
    {
    RSAerr(RSA_F_RSA_EAY_PRIVATE_DECRYPT,RSA_R_DATA_TOO_LARGE_FOR_MODULUS);
    goto err;
    } 
```

`BN_bin2bn`将您的数据`from`(unsigned char*) 转换为 bignum `f`(BIGNUM)。
`BN_ucmp`然后比较 bignums`f`和modules `n`。`>=0`意味着`f>=n`。

由于您的输入是 SHA256 摘要（256 字节，2048 位），因此转换后的摘要的值可能大于 2048 位模数`n`，因此会发生错误。

如果您可以将消息修改为更短的消息，这似乎是可行的。此外，您调用的函数在计算`f^d mod n`为以下行后会进行填充

```
if (!rsa->meth->bn_mod_exp(ret,f,d,rsa->n,ctx,
            rsa->_method_mod_n)) 
```

您可能需要切换到`RSA_NO_PADDING`模式以获得预期的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:23:55.127

也许尝试使用`-raw`参数。如果消息已经填充到正确的大小，那么您不希望实用程序尝试填充它。默认情况下它假定`-pkcs`（PKCS 1.5），这可以解释为什么你会得到一个“太大”的错误。

# jquery - 双击调用jquery click

> ID：15886014
> 
> 赞同：0
> 
> 时间：2013-04-08T18:12:53.293
> 
> 标签：jquery, click

再会！请帮忙，如果在嵌套元素中触发点击事件，我会使用嵌套，调用函数和外部父级。如何为内部发起一次事件？

**html**

```
<ul>
    <li><a href="#">Item</a></li>
    <li><a href="#">Item 2</a>
        <ul>
            <li><a href="#">Subitem 1</a></li>
            <li><a href="#">Subitem 2</a></li>
            <li><a href="#">Subitem 3</a></li>
        </ul>
    </li>
</ul> 
```

**jQuery**

```
$("ul li").on("click", function(e){
    alert($("a", this).text());
}); 
```

代码[http://jsfiddle.net/fSkLb/1/](http://jsfiddle.net/fSkLb/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:16:00.073

Instead of listening on `li`, you can listen to the `a`

```
$("ul li a").on("click", function(e){
    alert($(this).text());
    return false;
}); 
```

Also, `return false` here stops the propogation.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T18:14:59.283

The easiest way is for you to prevent propagation of the event to the parent elements

[http://jsfiddle.net/fSkLb/3/](http://jsfiddle.net/fSkLb/3/)

```
$("ul li").on("click", function(e){    
    e.stopPropagation();
    alert($("a", this).text());
}); 
```

Some of the other answers say to use `return false`. I wouldn't suggests that unless you're trying to prevent the link from being followed. `e.stopPropagation` is the way with the least amount of side effects.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:16:03.363

You need to prevents further propagation of the current event. so try this

```
$("ul li").on("click", function(e){
    alert($("a", this).text());
    e.stopPropagation()
}); 
```

[JS Fiddle Example](http://jsfiddle.net/fSkLb/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T18:18:20.660

I think I found the answer...

```
$("ul li").on("click", function(e){
    e.stopPropagation();
    alert($("a", this).text());
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T18:15:23.897

You can use the event's `stopPropagation` method, which will prevent the event from bubbling up the DOM tree:

```
$("ul li").on("click", function(e){
    e.stopPropagation();
    alert($("a", this).text());
}); 
```

Here's an updated jsfiddle: [http://jsfiddle.net/fSkLb/5/](http://jsfiddle.net/fSkLb/5/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T18:15:44.177

```
$("ul li").on("click", function(e){
    alert($("a", this).text());
    return false;
}); 
```

`return false` avoids event bubble. The same can be done with [`stopPropagation`](http://api.jquery.com/event.stopPropagation/).

# wordpress - 附加图像的名称（wordpress）

> ID：15886017
> 
> 赞同：-1
> 
> 时间：2013-04-08T18:13:03.290
> 
> 标签：wordpress, post, blogs

如果可能，请在 wordpress 中告诉图片中附加项目的名称（例如摘录、帖子摘要或其他任何内容）。知道名称的目的是为了可以在互联网上搜索适当的术语。

如果可能的话，也请告诉如何通过插件或编程来实现。（在特定页面上显示属于特定类别的帖子..

问候，![请在wordpress中告诉项目的名称](https://i.stack.imgur.com/tfE81.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:14:20.080

图片有很多术语，可以参考the_post_thumbnail、附件、图片类型附件、缩略图、特色图片。等取决于上下文。

但我认为您正在搜索的术语是[the_post_thumbnail()](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)和[Featured_image](http://codex.wordpress.org/Post_Thumbnails)

# java - 如何在 SQLite 中测试早于当前日期的日期

> ID：15886021
> 
> 赞同：0
> 
> 时间：2013-04-08T18:13:14.800
> 
> 标签：java, database, sqlite, loops, resultset

我正在使用 SQLite 存储一些数据，并且我知道日期对象不能存储在 SQLite 数据库中，所以我使用的是字符串。

我的问题是我想检查表格的最早日期。因此，如果有 2 张卡，其中一张是 01/04/2013 和 04/05/2013，我想识别 01/04/2013 是较早的日期并返回该行。

到目前为止，我提出了 2 个解决方案：

**对数据库的多个查询**

我已经能够实现一个成功的解决方案，它将遍历数据库并将日期对象减 1，然后将其用作匹配日期的字符串。问题是数据库可能需要查询 100 次才能找到最早的日期。这样做是不好的做法吗？

**遍历结果集**

另一种可能性是遍历表中所有抽认卡的结果集。但是，这将涉及 2 个循环，一个循环遍历表中的每一行，这将在一个循环内，将日期减 1。

我觉得这两个都不是很好的解决方案。我想知道是否有人可以帮助我以更有效的方式实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T18:17:55.957

如果您以`YYYY-MM-DD`格式存储日期，则可以使用`<`、`>`和 ，`BETWEEN`就像使用实际的 Date 数据类型一样。使用`YYYY-MM-DD`日期格式，字典顺序与时间顺序相同。

另一个好处是`YYYY-MM-DD`日期格式与[SQLite 日期和时间函数](http://www.sqlite.org/lang_datefunc.html)兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:19:58.760

将日期存储为自 1970 年 1 月 1 日以来的天数。

这样，SQL就变成了

```
Select MIN(days) 
```

# gwt - 带有折线图/饼图的 Google Web Toolkit

> ID：15886022
> 
> 赞同：2
> 
> 时间：2013-04-08T18:13:26.060
> 
> 标签：gwt, graph, charts

目前我正在将 Google Charts 与 Google Web Toolkit 一起使用，但我想探索其他绘图选项。我查看了 jGraph 和 gwt 扩展 mxgraph 但这似乎只支持流程图/图表的实际图形？

是否有任何其他库（Google 图表除外）可用于直观地显示折线图/饼图？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:51:47.683

请查看高级可视化图表

[http://www.moxiegroup.com/moxieapps/gwt-highcharts/](http://www.moxiegroup.com/moxieapps/gwt-highcharts/)

和精彩的展示在这里

[http://www.moxiegroup.com/moxieapps/gwt-highcharts/showcase/](http://www.moxiegroup.com/moxieapps/gwt-highcharts/showcase/)

希望有帮助。祝你好运。

# maven - Maven POM 错误 - POM 丢失

> ID：15886024
> 
> 赞同：3
> 
> 时间：2013-04-08T18:13:30.580
> 
> 标签：maven

我正在尝试构建一个 Maven 项目。我的其他团队成员能够毫无问题地构建它。我收到以下错误：

```
[WARNING] The POM for org.hectorclient:hector-core:jar:1.0-3 is missing, no dependency information 
available
[WARNING] The POM for org.hectorclient:hector-test:jar:1.0-3 is missing, no dependency information     
available 
```

然后构建失败并出现错误：无法解析项目 XYZ 的依赖项。可能出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T09:54:49.437

当然，您的本地存储库`jar`中缺少。`.m2`假设依赖项写在 pom.xml 中。

我的建议：

1.  案例：当你有互联网时

    1.  `mvn install`将跟随您的火，`POM.xml`它将下载所有必要的罐子。
    2.  然后开火`mvn compile`建造。
2.  案例：您的互联网连接受到限制/没有互联网

    1.  从其他编译成功的机器上获取存储库 + POM
    2.  然后开火`mvn -o compile`

我认为它会解决你的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-02T10:20:55.240

@Vaibs你是对的。添加到您的答案：

“检查你和其他人的settings.xml。如果由于某种原因你无法像你提到的那样从互联网下载依赖项，那么你需要在其他地方设置maven并在那里启动“mvn install”获取最新的依赖项并将这些 .m2 放入您的。”

# python - arcpy TypeError：“浮动”对象不可迭代

> ID：15886026
> 
> 赞同：2
> 
> 时间：2013-04-08T18:13:30.813
> 
> 标签：python, sum, arcpy

尝试通过 ArcGIS 10.1 中的 UpdateCursor 进行一些看似简单的字段计算，并收到有关无法迭代浮点数的错误。这是我的代码——有些东西被注释掉了 b/c 这对我的问题并不重要，所以忽略它。

```
 #import arcpy module
    import arcpy

    #doing some fancy math
    import math

#message to let you know the script started
print "Begin Field Calculation for age-adjusted-rate."

#input shapefile
inputFC = 'C:\\blahblah.shp'

#variable to define the new field name
Field_Name = ['Age_Adj_R', 'wt_1', 'wt_2', 'wt_3']

#add the new Fields
#arcpy.AddField_management(inputFC, Field_Name[0], "DOUBLE", "", "", "", "",        "NULLABLE", "NON_REQUIRED", "")
#arcpy.AddField_management(inputFC, Field_Name[1], "DOUBLE", "", "", "", "", "NULLABLE", "NON_REQUIRED", "")
#arcpy.AddField_management(inputFC, Field_Name[2], "DOUBLE", "", "", "", "", "NULLABLE", "NON_REQUIRED", "")
#arcpy.AddField_management(inputFC, Field_Name[3], "DOUBLE", "", "", "", "", "NULLABLE", "NON_REQUIRED", "")

#list variable for the fields in the table that will be used
fields = ["Cnt1", "Cnt2", "Cnt3", "Pop1", "Pop2", "Pop3", "Crude_Rate", "Age_Adj_R", "wt_1", "wt_2", "wt_3"]
#wt_age_avg = [0.2869, 0.5479, 0.1652]

#populate the weighted average fields
cursor = arcpy.da.InsertCursor(inputFC, ["wt_1", "wt_2", "wt_3"])
for x in xrange(0, 51):
    cursor.insertRow([0.2869, 0.5479, 0.1652])
del cursor

#function to perform the field calculation using an update cursor
with arcpy.da.UpdateCursor(inputFC, fields) as cursor:
for row in cursor: #iterate through each row
    if not -99 in row: #check for missing values
        row[7] = str(sum((row[6]) * ((row[0] * row[8]) + (row[1] * row[9]) + (row[2] * row[10]))) #do the calculation
    else:
        row[7] = 0 #missing values found, place a null response
    cursor.updateRow(row) #save the calculations
del row  #release the variables

#acknowledge completion
   print "Calculation Completed." 
```

IDLE 中的错误：

```
Traceback (most recent call last):
  File "C:\blahblah.py", line 48, in <module>
    row[7] = str(sum((row[6]) * ((row[0] * row[8]) + (row[1] * row[9]) + (row[2] * row[10])))) #do the calculation
TypeError: 'float' object is not iterable 
```

好的——但我想我在它甚至会填充字段之前将它更改为一个字符串......我不知道如何让这个计算工作。它应该看起来像：

sum(crude_rate* sum(weighted_averages))

如果我使用常量值字段的方式不起作用，我也尝试将值作为变量传递（请参阅变量：wt_age_avg），但没有运气。也使用其他求和函数，如 math.fsum 也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:21:14.767

[`sum()`期望一个可迭代的](http://docs.python.org/2/library/functions.html#sum)：

> `sum(iterable[, start])`
> 总和从左到右开始和**可迭代** 的项目并返回总数。start 默认为 0。iterable 的项一般为数字，start 值不允许为字符串。

但有趣的是：你不需要在`sum()`这里使用！你可以这样做：

```
row[7] = str( (row[6] * row[0] * row[8]) + 
              (row[1] * row[9]) + 
              (row[2] * row[10]) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:21:23.520

接线员就够了，`+`不需要`sum()`打电话。错误正在调用`sum(number)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:30:43.703

其他答案是正确的，但如果您希望`sum()`用于可读性目的，您可以将您的值作为列表传递......

```
row[7] = str(sum([row[6] * row[0] * row[8],
                  row[1] * row[9],
                  row[2] * row[10]] )) 
```

# vb.net - 在 Windows.Forms 中将文本对齐到复选框的左侧

> ID：15886027
> 
> 赞同：15
> 
> 时间：2013-04-08T18:13:34.097
> 
> 标签：vb.net

我检查了 Checkbox 类并搜索以找到一种将文本与复选框左侧对齐的方法，但没有发现任何特定于 Windows 窗体的内容。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-09-01T01:06:24.243

**检查对齐**

CheckAlign 属性是用于对齐 CheckBox 的标签的正确属性。即使 Right-to-Left 属性可以得到你想要的结果（在某些情况下），它实际上是不正确的。

这就是为什么 CheckAlign 属性是移动 CheckBox 标签的正确属性，而 Right-to-Left 则不是：

从右到左处理语言。一些口语（如阿拉伯语/希伯来语）从右到左书写句子。因此，在 Checkbox 控件上使用 Right-to-Left 属性旨在与您用作标签的口语一致。基本上，如果您的标签是英语（或西班牙语等），您将不想使用 Right-to-Left 属性。

CheckAlign 处理复选框的位置。如果您希望您的复选框位于上方、下方、45° 或其他位置，那么您将想要使用 CheckAlign 属性。

让我举两个例子来说明差异。

► 示例编号 1：问题复选框 |带有标签文本的 C-Box 设置为：“您想要这个吗？[]”

*   **从右到左属性：**否 | 控制的外观：“？你想要这个[]”

*   **CheckAlign 属性：** Middle-Right | 控制的出现：“你想要这个吗？[]”

► 示例编号 2：您的标签是用希伯来语/阿拉伯语编写的，并且您希望正确显示文本（即 rtl），但您还希望右侧的复选框。Right-to-Left 属性不能两者兼得。它只对一个人有好处。因此，您必须使用 CheckAlign 属性。

好吧，长话短说，如果您想在标签的任何一侧定位复选框，那么要设置的正确属性是**CheckAlign**属性。

干杯

# python - 在 Django 中同时使用天真和时区感知日期时间

> ID：15886029
> 
> 赞同：0
> 
> 时间：2013-04-08T18:13:38.070
> 
> 标签：python, django, datetime

Django 文档非常清楚不应使用幼稚的日期时间，但我有一个用例，我认为在我认为需要它们的地方相当普遍。有时在我的项目中需要跨时区查询对象，但要基于当地时间。

例如，这只是一个人为的例子，假设我想*根据每个用户的 local timezone*查找在给定日期的下午 4 点到 5 点之间最后更新个人资料的所有用户。我可以简单地这样做：

```
qs = User.objects.filter(profile__datelastupdated__gte=datetime(2013,4,1,16))
qs = qs.filter(profile__datelastupdated__lte=datetime(2013,4,1,17)) 
```

但是，因为我有时区支持处于活动状态，这会导致警告：

```
RuntimeWarning: DateTimeField received a naive datetime (YYYY-MM-DD HH:MM:SS) while time zone support is active. 
```

我理解为什么会抛出警告，所以我的问题是：我没有以正确的方式考虑日期时间吗？是否有一种惯用的 Django 方式来获得 tz 感知日期时间的特殊性，而这正是您想要的，并且还具有天真的日期时间提供的有时需要的所需通用性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:34:43.700

您必须使用 datetime + timezone 过滤数据库，数据库中的所有日期始终存储为 utc。如果您提供没有时区的日期，django 会将其默认为 utc 并给您带来交战。
如果您支持时区，则必须存储用户时区。使用日期+当前用户时区询问数据库与放置日期相同。

# jquery - 多个下拉菜单并单击样式问题

> ID：15886031
> 
> 赞同：0
> 
> 时间：2013-04-08T18:13:51.843
> 
> 标签：jquery

我知道添加这个问题对于任何想要回答的人来说都是一个很长的问题，因为我必须遍历我所有的 JQuery 脚本来解决我目前遇到的任何问题，但是我不知道还能去哪里找。

**实时视图：** [https ://tornhq.com/WorkingOn/Account/Management/PageBuilder/box.html](https://tornhq.com/WorkingOn/Account/Management/PageBuilder/box.html)

我最近实现了，所以当你实现另一个下拉菜单时，你可以有多个下拉菜单，只需稍作修改，但是我在执行以下操作时遇到了一些问题；

*   点击输入框后：
    *   另一个输入字段在鼠标悬停效果上丢失
    *   将鼠标悬停在您选择的输入字段的下拉菜单上后，样式将恢复
*   单击一个输入字段后，它会下拉，但下拉内容然后单击另一个输入字段会损坏。

这是我的第一个真正的 JQuery 脚本，而我所做的其他任何事情主要是来自这里和那里的片段等等。我不知道如何解决这些问题，此刻我完全不知所措。

非常感谢您花时间提供帮助以及您提供的任何帮助和/或建议，

最好的祝福，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:00:28.263

你是对的，这里发生了很多事情......

1）为什么在本质上做同样事情的同一个选择器上的 mousedown 和 click 事件处理程序？

2）而不是 mouseover 和 mouseout，我可能会使用悬停，或者仅当您所做的只是修改 CSS 时才尝试使用 CSS。

3) 变量状态 = 假；第 85 行是全局的，不能被多个对象唯一使用。如果您需要在单个元素上设置一些状态属性，请改用元素的 data 属性。

4) 请记住，当使用 jQuery 时，您通常会处理一组匹配的元素，而不仅仅是一个。所以你需要确保你正在处理你想要的一个元素。

5）只是我如何编写代码的一部分的一个例子：

代替：

```
 $('.Row1 input:text').mouseover(function () {
        var thisParent = $(this).parent().attr("id");
        if (!FZTxtInputState) {
            $("#" + thisParent + " .DropBtn").css({ 
```

我会：

```
 $('.Row1 input:text').mouseover(function () {
            if (!FZTxtInputState) {
                $(this).closest(".DropBtn").css({ 
```

这不会解决你所有的问题，但我至少可以看到你正在尝试学习 jQuery！

# c# - 从超链接弹出窗口

> ID：15886032
> 
> 赞同：0
> 
> 时间：2013-04-08T18:13:53.123
> 
> 标签：c#, asp.net

```
HyperLink myweek = new HyperLink();
myweek.Text = "week";
myweek.NavigateUrl = "Summary.aspx";

cell.Controls.Add(myweek); 
```

以上`HyperLink`是在我的控制中动态创建的。

当我单击超链接时，它会打开一个弹出窗口，这是预期的，但问题是它正在打开所有信息（如地址栏..等）。

我可以在上面的代码中更改什么以显示没有工具栏的弹出窗口？我可以不使用Javascript吗？我是否需要对上述代码进行任何更改才能在 FireFox 和其他浏览器中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:19:32.730

是的，我相信你需要 Javascript 来做到这一点。你可以这样做：

```
hlWhatever.NavigateUrl = "javascript:window.open('http://www.google.com',null,'resizable=no,toolbar=no,scrollbars=no,menubar=no,status=no,width=125,height=125');" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:30:47.793

编辑：如果您更喜欢在 CS 代码中执行此操作，请添加 onclick 属性并使用 window.open。例子：

```
myweek.Attributes["onclick"] = "javascript:window.open('http://www.google.com',width='300',height ='300', toolbar='no')";
myweek.NavigateUrl = "#"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:12:24.113

窗口的外观属性（具有 addressBar 或 ...）与 HyperLink 控件无关，因此您不应期望它出现在其属性中。恐怕唯一的方法是通过 javascript 。你可以检查这个[讨论](http://forums.asp.net/t/1066843.aspx/1)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-05T14:13:28.543

下面提到的方法将起作用。

```
hyperlink1.Attributes.Add("onclick","javascript:window.open('./ViewItems/product.aspx',null,'resizable=no,toolbar=no,scrollbars=no,menubar=no,status=no,width=350,height=350'); return false"); 
```

# exception - 例外：打开的文件太多 (MonoTouch)

> ID：15886034
> 
> 赞同：0
> 
> 时间：2013-04-08T18:14:01.127
> 
> 标签：exception, xamarin.ios

我正在编写一个 MonoTouch 应用程序，它可以下载 1000 多个单独的 PDF 文件并将它们作为一个巨大的 pdf 文件打开。我查看文档没有问题，但如果我多次关闭/打开文档，它会抛出

**例外：打开的文件过多 t System.IO.FileStream..ctor（System.String 路径、FileMode 模式、FileAccess 访问、FileShare 共享、Int32 bufferSize、布尔匿名、FileOptions 选项）[0x00275] 在 /Developer/MonoTouch/Source/ Mono/mcs/class/corlib/System.IO/FileStream.cs:310 在 System.IO.FileStream..ctor （System.String 路径，FileMode 模式）[0x00000] in :0**

我已经使用 MonoTouch 几年了，没有遇到过这样的问题。这可能是一个新的 Xamarin.iOS 问题吗？

我还在论坛上看到他们使用**ulimit -a**解决了这个问题，但我如何将它应用到 iPad 应用程序？

任何人？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T18:38:59.727

Xamarin.iOS 本身对打开的文件没有限制。但是，当操作系统（本例中为 iOS）报告打开的文件过多时，将引发此异常。

检查您的设备日志（例如 Xcode 管理器），您应该会看到 iOS 抱怨打开文件的数量。

在处理文件时，甚至比其他文件更`IDisposable`重要的是，当您不再需要它们时关闭它们是很重要的。IOW 不要等待 GC*自动*执行此操作。

[此外，您可能想尝试使用 Instruments 或类似的](https://stackoverflow.com/q/4083608/220643)东西 来查看打开了哪些文件 - 这应该会提示您谁打开了它们。例如，它们可能并不都是您的（例如，如果您在应用程序中嵌入了许多字体）。

# sql - 动态更新 SSIS 中 Web 服务任务中的 wsdl 文件

> ID：15886035
> 
> 赞同：3
> 
> 时间：2013-04-08T18:14:01.893
> 
> 标签：sql, web-services, ssis

我正在尝试使用 Web 服务任务开发 SSIS 包，我已经 `http://localhost/myservice.asmx?wsdl`在连接管理器中指定了服务 url 并使用表达式配置了 wsdl 的位置

但是当我将包部署到产品环境时，SSIS 包将位于数据库服务器上，而 Web 服务将托管在不同的服务器上，这意味着我需要更改 dtsConfig 文件中的服务 url。

但我面临的问题是当我更改 dtsConfif 文件中的连接字符串 url 时，它不会更新 wsdl 文件，它指向旧 url 并且包失败并出现 404 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:12:17.023

如果我理解，您正在更改 dtsConfig 中的值，但您的 SSIS 包没有采用新值。您确定它在运行时正在查看更新的 dtsConfig 文件吗？

例如，您应该有一个正在执行 SSSI 包的 SQL Server 代理作业，并且它应该指向更新的配置文件；否则，作业应该覆盖配置的值。您可以尝试不同的方法将 url 字符串设置为所需的目标。

# joomla - 数据库 escape() 和 quote() 是做什么用的？

> ID：15886038
> 
> 赞同：5
> 
> 时间：2013-04-08T18:14:29.723
> 
> 标签：joomla

我查看了一些 joomla 组件，其中有类似的功能

```
$db->escape()
$db->quote() 
```

它们是用来做什么的？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T18:17:20.077

转义函数用于转义坏字符，以防止 SQL 注入。

quote* 函数用于引用字符串，因为不同的数据库方言有不同的引用字符。

所以根据你使用的数据库系统，Joomla 会选择合适的引用字符。

# multithreading - Powershell 运行空间和颜色输出

> ID：15886040
> 
> 赞同：2
> 
> 时间：2013-04-08T18:14:43.673
> 
> 标签：multithreading, powershell

简短的问题描述：

我需要来自我的脚本生成的其他 powershell 运行空间的非散布输出。我需要能够设置输出中各行的颜色。

长问题描述：

我编写了一个脚本来将更新部署到多个远程服务器上的供应商应用程序。最初该脚本旨在一次仅部署一个更新，但我有一个新要求，即我现在以交互方式处理多个更新。所以我重写了我的脚本来使用运行空间，这样我就可以在所有服务器上打开会话，初始化它们，然后对于用户输入的每次更新，都会为每个初始化的会话创建一个运行空间，部署工作就完成了。我以前使用过作业，但必须去运行空间，因为您不能将 PSSession 传递给作业。

我现在可以运行我的脚本，但输出不太理想。作业版本的输出很好，因为我可以调用 Receive-Job 并将所有输出按线程分组。我也可以使用 write-host 记录输出，允许彩色响应（即更新失败时的红色文本）。我已经能够让我的运行空间版本的作业按线程对输出进行分组，但只能使用写输出。如果我使用 write-host 输出立即发生，导致不可接受的穿插输出。不幸的是，写输出不允许彩色输出。设置 $host.UI.RawUI.ForegroundColor 也不起作用，因为如果在设置颜色的那一刻没有发生输出，则不会发生效果。由于我的输出直到最后才会发生，因此 $host 设置不再起作用。

下面是一个快速演示脚本来说明我的困境：

```
#Runspacing output example. Fix interleaving
cls

#region Setup throttle, pool, iterations
$iterations = 5
$throttleLimit = 2
write-host ('Throttled to ' + $throttleLimit + ' concurrent threads')

$iss = [System.Management.Automation.Runspaces.InitialSessionState]::CreateDefault()
$Pool = [runspacefactory]::CreateRunspacePool(1,$throttleLimit,$iss,$Host)
$Pool.Open()    
#endregion

#This works because the console color is set at the time output occurs
$OrigfC = $host.UI.RawUI.ForegroundColor
$host.UI.RawUI.ForegroundColor = 'red'
write-host 'THIS IS RED TEXT!'
start-sleep 2
$host.UI.RawUI.ForegroundColor = $OrigfC    

#define code to run off the main thread
$scriptBlock = { 
    $nl = ([Environment]::NewLine.Chars(0)+[Environment]::NewLine.Chars(1))               

    #This does not work because output won't occur until after color has been reset
    $OrigfC = $host.UI.RawUI.ForegroundColor
    $host.UI.RawUI.ForegroundColor = 'yellow'
    write-output ($nl + '  TEST: ' + $args[0])
    Write-Output ('  Some write-output: ' + $args[0])
    Start-Sleep 1
    write-host ('  Some write-host: ' + $args[0]) -ForegroundColor Cyan # notice write-host occurs immediately
    Start-Sleep 1
    $host.UI.RawUI.ForegroundColor = $OrigfC
}

#Start new runspaces
$threads = @()  
$handles = @(for($x = 1; $x -le $iterations; $x++)
{
    $powerShell = [PowerShell]::Create().AddScript($scriptBlock).AddParameters(@($x))
    $powershell.RunspacePool = $Pool
    $powerShell.BeginInvoke()
    $threads += $powerShell
})    

#Wait for threads to complete
$completedCount = 0
$completed = ($handles | where-object {$_.IsCompleted -eq $true}).count
while($handles.IsCompleted.Contains($false))
{
    if($completedCount -ne ($handles | where-object {$_.IsCompleted -eq $true}).count)
    {
        $completedCount = ($handles | where-object {$_.IsCompleted -eq $true}).count
        write-host ('Threads Completed: ' + $completedCount + ' of ' + $iterations) 
    }
    write-host '.' -nonewline
    Start-Sleep 1 
}
write-host ('Threads Completed: ' + ($handles | where-object {$_.IsCompleted -eq $true}).count + ' of ' + $iterations) 

#output from threads
for($z = 0; $z -lt $handles.Count; $z++)
{
    $threads[$z].EndInvoke($handles[$z]) #causes output
    $threads[$z].Dispose()
    $handles[$z] = $null 
}

$Pool.Dispose() 
```

**输出如下，除非指定输出为灰色：**
我的目标是能够将“Some write-output: X”设置为一种颜色，并将“TEST: X”设置为另一种颜色. 想法？请注意，我正在从 powershell 提示符运行。如果您在 ISE 中运行，您将获得不同的结果。

```
Throttled to 2 concurrent threads
THIS IS RED TEXT!                #Outputs in Red
.  Some write-host: 1            #Outputs in Cyan
  Some write-host: 2             #Outputs in Cyan
.Threads Completed: 2 of 5       #Outputs in Yellow
.  Some write-host: 3            #Outputs in Cyan
  Some write-host: 4             #Outputs in Cyan
.Threads Completed: 4 of 5       #Outputs in Yellow
.  Some write-host: 5            #Outputs in Cyan
.Threads Completed: 5 of 5

  TEST: 1
  Some write-output: 1

  TEST: 2
  Some write-output: 2

  TEST: 3
  Some write-output: 3

  TEST: 4
  Some write-output: 4

  TEST: 5
  Some write-output: 5 
```

编辑：添加另一个示例来解决 Mjolinor 的答案。M，你是对的，我可以将会话传递给工作；我在上面的例子中过于简化了。请考虑下面的这个例子，我正在向工作发送一个函数。如果此行（ if(1 -ne 1){MyFunc -ses $args[0]} ）在下面被注释掉，它将运行。如果未注释掉该行，则会话（类型 System.Management.Automation.Runspaces.PSSession）将转换为 Deserialized.System.Management.Automation.Runspaces.PSSession 类型，即使无法命中 MyFunc 调用。我无法弄清楚这一点，所以我开始转向运行空间。你认为有面向工作的解决方案吗？

```
cls
$ses = New-PSSession -ComputerName XXXX
Write-Host ('Outside job: '+$ses.GetType())

$func = {
    function MyFunc {
        param([parameter(Mandatory=$true)][PSSession]$ses)
        Write-Host ('Inside fcn: '+$ses.GetType())
    }
}    

$scriptBlock = {
    Write-Host ('Inside job: '+$args[0].GetType())
    if(1 -ne 1){MyFunc -ses $args[0]}
    }

Start-Job -InitializationScript $func -ScriptBlock $scriptBlock -Args @($ses) | Out-Null                 
While (Get-Job -State "Running") { }    
Get-Job | Receive-Job          
Remove-Job *     
Remove-PSSession -Session $ses 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:46:27.467

我不太明白您不能将 PSSession 传递给工作的说法。您可以使用 -Session 和 -AsJob 参数运行 Invoke-Command，创建针对会话的作业。

至于着色难题，您是否考虑过使用 Verbose 或 Debug 流来输出您想要的不同颜色？Powershell 应该根据它来自的流自动使其成为不同的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-11T23:52:47.403

这在 Powershell 7 中变得更容易了，在最初提出问题时它还不可用。

在 powershell 7 中，您可以使用该`foreach-object -parallel {} -asjob`命令，然后在所有作业完成后获取结果。

在这个例子中：

*   有 5 个不同的作业，有 5 个子步骤

*   每一步都有 0.5 秒的延迟来演示交错

*   每个作业都有特定于作业的颜色

*   每个步骤都有特定于步骤的颜色

*   输出是彩色编码的，并按作业分组

    ```
    $script = {
      foreach ( $Step in 1..5 ) {
          write-host "Job $_" -ForegroundColor @{'1'='red';'2'='yellow';'3'='cyan';'4'='magenta';'5'='green'}[[string]$_] -NoNewLine
          write-host " Step $Step" -ForegroundColor @{'1'='red';'2'='yellow';'3'='cyan';'4'='magenta';'5'='green'}[[string]$Step]
          sleep 0.5
          } # next step
      } # end script

    $Job = 1..5 | ForEach-Object -Parallel $Script -ThrottleLimit 5 -AsJob 
    $job | Wait-Job | Receive-Job 
    ```

[![在此处输入图像描述](https://i.stack.imgur.com/N1dbL.png)](https://i.stack.imgur.com/N1dbL.png)

需要注意的是：

1.  面临的挑战`$job | Wait-Job | Receive-Job`是，如果任何一项作业挂起，则此命令将永远不会返回。有很多帖子描述了如何处理这个限制。

2.  `Foreach-object`并且`Foreach-Object -Parallel`是两种完全不同的动物。前者可以调用预定义的函数，而后者只能访问脚本块中定义的内容。

# javascript - 要_destroy() 还是要destroy()？

> ID：15886043
> 
> 赞同：2
> 
> 时间：2013-04-08T18:14:46.850
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-widget-factory

对于要在 jQuery UI Widget 中实现哪个`_destroy`或方法，我有点困惑。`destroy`

在这个[MSDN Widget Reference](http://msdn.microsoft.com/en-us/library/hh404085.aspx)中它说要实现`destroy()`，但在这个[Tutorial Plus](http://net.tutsplus.com/tutorials/javascript-ajax/an-in-depth-review-of-jquerys-widget-factory/)参考中它说要实现`_destroy()`。

两个参考资料都说这些方法应该将元素返回到它的*小部件前*状态。所以那部分我明白了，但是为什么小部件工厂中有这个方法的两个版本呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:18:23.223

从 jQuery UI 而不是 MSDN 上阅读文档

[http://wiki.jqueryui.com/w/page/12138135/Widget%20factory](http://wiki.jqueryui.com/w/page/12138135/Widget%20factory)

```
// Use the destroy method to clean up any modifications your widget has made to the DOM
destroy: function() {
  // In jQuery UI 1.8, you must invoke the destroy method from the base widget
  $.Widget.prototype.destroy.call( this );
  // In jQuery UI 1.9 and above, you would define _destroy instead of destroy and not call the base method
} 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T14:29:40.887

只是为了澄清（并基于[此](http://jqueryui.com/upgrade-guide/1.9/)）：

在 jQuery UI 1.8 中，您的小部件应如下所示：

```
$.widget( "demo.widget", {
    destroy: function() {
        // Invoke the base destroy method
        $.Widget.prototype.destroy.call( this );
        // Perform widget-specific cleanup
        ...
    }
}); 
```

在 jQuery UI 1.9 中，像这样：

```
$.widget( "demo.widget", {
    _destroy: function() {
        // Perform widget-specific cleanup
        ...
    }
}); 
```

也就是说，在 1.9 中，您不应该定义（公共）`destroy`方法；`_destroy`改为定义；并且在其中不需要调用基本调用析构函数。

# excel - Excel - 将文本从一个单元格复制到另一个单元格而不删除原始内容

> ID：15886046
> 
> 赞同：1
> 
> 时间：2013-04-08T18:14:51.067
> 
> 标签：excel, copy-paste, vba

基本上我有以下场景：

2 列，600 行数据。

我需要从第 2 列复制数据并将其放在第 1 列中相同行的内容末尾。这将导致第 1 列具有其原始内容加上第 2 列的附加内容。

任何有关我如何做到这一点的信息将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:38:00.697

这是一个简单形式的 VBA。只需创建一个宏，将这些行添加到它。然后选择您的原始列（您所称的第 1 列），然后运行宏。

```
a = ActiveCell.Value
b = ActiveCell(1, 2).Value

ActiveCell.Value = a + b 
```

括号中的单元格引用是一个相对语句 - 1, 2 表示“同一行，右侧一列”，因此您可以根据需要进行更改。您可以通过扩展使其循环：

```
Do
a = ActiveCell.Value
b = ActiveCell(1, 2).Value

ActiveCell.Value = a + b

ActiveCell.Offset(1, 0).Select

If ActiveCell.Value = "" Then
    Exit Do
End If
Loop 
```

该循环将继续进行，直到找到一个空白单元格，然后它将停止。因此，请确保您有一个要停止的空白单元格。您还可以在组合的行中添加额外的字符。所以在上面的示例中它是`ActiveCell.Value = a + b`，但您可以制作它`ActiveCell.Value = a + " - " + b`或其他任何可能有帮助的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:40:30.987

这应该从第 2 列中获取值并将它们按顺序放置在第 1 列的底部。

```
Sub test()
Dim rng1 As Range
Dim rng2 As Range
Dim cl As Range
Dim r As Long

Set rng1 = Range("A1", Range("A1048576").End(xlUp))
Set rng2 = Range("B1", Range("B1048576").End(xlUp))

r = rng1.Rows.Count + 1

For Each cl In rng2
    Cells(r, 1).Value = cl.Value
    r = r + 1
Next

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:46:02.070

保持简单。这是代码。

```
Sub copyCol()
  Dim lastRow As Long
  lastRow = Range("A65000").End(xlUp).Row
  Range("B1:B" & lasrow).Copy Range("A" & lastRow).Offset(1, 0)
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-01T13:57:58.623

由于这个问题收到了很多观点（10,000+），我认为分享另一个更简单的解决方案也很重要：

在单元格 C1 中使用公式：

```
=(A1 & B1) 
```

这会将单元格 A1 和 B1 的内容复制到单元格 C1 中。将公式拖到所有其他行（在我的例子中为第 600 行）。

然后复制列并使用“仅值”粘贴。

然后，您将在 C 列中的单元格包含逐行的单个单元格中的 A 列和 B 列的内容。

# javascript - 有没有办法使用 HTML5 大纲算法和 CSS（可能还有 JS）生成文档导航？

> ID：15886047
> 
> 赞同：5
> 
> 时间：2013-04-08T18:14:51.317
> 
> 标签：javascript, css, html, tableofcontents

有没有办法使用 HTML5 大纲算法和 CSS（可能还有 JS）生成文档导航，比如 TeX 可以生成目录？

编辑：有没有办法在不明确编写的情况下显示 HTML 文档的链接大纲？我正在考虑类似`\tableofcontents`TeX 的东西。因此，例如，一个空`<nav>`标签将填充到页面中各个部分的链接的无序列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:36:56.170

对于将从文档大纲创建自动目录的 javascript，您目前必须开发自己的目录。[我实际上没有找到复制粘贴解决方案]

研究这个 ：

*   [http://code.google.com/p/h5o/](http://code.google.com/p/h5o/)
*   [http://code.google.com/p/h5o/downloads/detail?name=outliner.0.5.0.62.js&can=2&q=](http://code.google.com/p/h5o/downloads/detail?name=outliner.0.5.0.62.js&can=2&q=)
*   [https://chrome.google.com/webstore/detail/html5-outliner/afoibpobokebhgfnknfndkgemglggomo](https://chrome.google.com/webstore/detail/html5-outliner/afoibpobokebhgfnknfndkgemglggomo)
*   [https://developer.mozilla.org/en-US/docs/HTML/Sections_and_Outlines_of_an_HTML5_document?redirectlocale=en-US&redirectslug=Sections_and_Outlines_of_an_HTML5_document](https://developer.mozilla.org/en-US/docs/HTML/Sections_and_Outlines_of_an_HTML5_document?redirectlocale=en-US&redirectslug=Sections_and_Outlines_of_an_HTML5_document)

还有这个

*   [http://blog.tremily.us/posts/HTML5_outlines/](http://blog.tremily.us/posts/HTML5_outlines/)
*   [http://projects.jga.me/toc/](http://projects.jga.me/toc/) （你可能想要适应的 jQuery 插件）

[**附加**]

来自用户[@unor](https://stackoverflow.com/users/1591669/unor)的建议阅读：[github.com/DylanFM/outliner](https://github.com/DylanFM/outliner)将我发送到这个[jsFiddle](http://jsfiddle.net/dylanfm/AbpXZ/)，那里还有另一个 javascript 启动。

Javascript

```
// See http://html5doctor.com/document-outlines/
// That article begins with info on HTML4 document outlines
// This doesn't do that yet, it just handles the HTML5 stuff beneath in the article
// I'm sure there are problems with handling that HTML5 stuff tho

var headingElements = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'],
sectioningElements = ['SECTION', 'ARTICLE', 'NAV', 'ASIDE'];

function makeOutline(root) {
var ar = [],
    el = root.firstChild,
    nested, hg;
while(el) {
    // If it's a sectioning element, create a new level in the outline
    if(sectioningElements.indexOf(el.tagName) > -1) {
        nested = makeOutline(el);
        if(nested.every(function(i){ return typeof i !== 'string'; })) {
            nested.unshift('Untitled ' + el.tagName.toLowerCase());
        }
        ar.push(nested);
    } else if(headingElements.indexOf(el.tagName) > -1) {
        ar.push(el.textContent);
    } else if(el.tagName === 'HGROUP') {
        hg = undefined;
        // Find the highest heading element within
        // Use its text, otherwhise it's untitled
        try {
            headingElements.forEach(function(t) {
                els = el.getElementsByTagName(t);
                if(els.length) {
                    hg = els[0].textContent;
                    throw BreakException;
                }
            });
        } catch(e) {}
        if(!hg) {
            hg = 'Untitled hgroup';
        }
        ar.push(hg);
    }
    el = el.nextSibling;
}
return ar;
};

var outline = makeOutline(document.body);

// This is just used for displaying the outline. 
// Inspect the outline variable to see the generated array:
// console.log(outline);

function describeOutline(outline) {
var indentForDepth = function(depth) {
    var str = '';
    for(i=depth;i>0;i--) {
        str += '\t';
    }
    return str;
},
childrenAreStrings = function(ar, depth) {
    var depth = (depth && (depth + 1)) || 1;
    return ar.map(function(item) {
        if({}.toString.call(item)=='[object Array]') {
            return childrenAreStrings(item, depth).join('\n');
        } else {
            return indentForDepth(depth) + '- ' + String(item);
        }
    });
};
// Make sure all items in ar are strings
return childrenAreStrings(outline).join('\n');    
}

(document.getElementsByTagName('pre')[0]).textContent = describeOutline(outline); 
```

# r - 如何使用 R 编辑或修改或更改大型文本文件中的单行

> ID：15886048
> 
> 赞同：10
> 
> 时间：2013-04-08T18:14:54.817
> 
> 标签：r

我正在使用 R 将一些大型文本文件读入数据库，但它们包含数据库软件的非法字段名称。大文本文件的列名就在第一行——是否可以只编辑第一行而不循环遍历文件中的每一行（这似乎浪费资源）？

这里有两个例子，我试图用一些示例数据做些什么。第一个将所有内容读入 ram - 所以这不适用于我的大型数据表。第二个可以工作，但速度很慢，因为它处理文件中的每一行。

我认为解决方案跨平台工作*并且*不需要安装外部软件（除了 R 包）是很重要的，因为我将与其他人共享这个脚本，并且不想让他们执行更多不必要的步骤。我正在寻找*仅在 R*中执行此操作的最快方法 :)

```
# create two temporary files
tf <- tempfile() ; tf2 <- tempfile()

# write the mtcars data table to a file on the disk
write.csv( mtcars , tf )

# look at the first three lines
readLines( tf , n = 3 )

# read in the entire table
z <- readLines( tf )

# make the only substitution i care about
z[1] <- gsub( 'disp' , 'newvar' , z[1] )

# write the entire table back out to the table
writeLines( z , tf2 )

# confirm the replacement
readLines( tf2 , 2 )
# done!

# # # # # # # OR

# blank out the output file
file.remove( tf2 )

# create a file connection to the text file
incon <- file( tf , "r" )

# create a second file connection to the secondary temporary file
outcon <- file( tf2 , "w" )

# read in one line at a time
while( length( one.line <- readLines( incon , 1 ) ) > 0 ){

    # make the substitution on every line
    one.line <- gsub( 'disp' , 'newvar' , one.line )

    # write each line to the second temporary file
    writeLines( one.line , outcon )
}

# close the connections
close( incon ) ; close( outcon )

# confirm the replacement
readLines( tf2 , 2 )
# done! 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T18:21:45.070

您为此使用了错误的工具。改用一些命令行工具。例如 using `sed`, smth like`sed -i '1 s/disp/newvar/' file`应该这样做。如果您*必须*在 R 中执行此操作，请使用

```
filename = 'myfile'
scan(pipe(paste("sed -i '1 s/disp/newvar/' ", filename, sep = ""))) 
```

这是一个特定于 Windows 的版本：

```
filename = 'myfile'
tf1 = tempfile()
tf2 = tempfile()

# read header, modify and write to file
header = readLines(filename, n = 1)
header = gsub('disp', 'newvar', header)
writeLines(header, tf1)

# cut the rest of the file to a separate file
scan(pipe(paste("more ", filename, " +1 > ", tf2)))

# append the two bits together
file.append(tf1, tf2)

# tf1 now has what you want 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T21:35:10.443

为什么不只编辑标题，然后分块阅读其余部分？我不知道这个文件有多大，但可能是几行（我猜是 10000）。根据您有多少内存，您可以将其调整为更大或更小。

```
##setup
tf <- tempfile(); tf2 <- tempfile()
write.csv(mtcars,tf)

fr <- file(tf, open="rt") #open file connection to read
fw <- file(tf2, open="wt") #open file connection to write 
header <- readLines(f,n=1) #read in header
header <- gsub( 'disp' , 'newvar' , header) #modify header    
writeLines(header,con=fw) #write header to file
while(length(body <- readLines(fr,n=10000)) > 0) {
  writeLines(body,fw) #pass rest of file in chunks of 10000
}
close(fr);close(fw) #close connections
#unlink(tf);unlink(tf2) #delete temporary files 
```

它应该更快，因为 R 将`while`每 10000 行而不是每行运行一次循环。此外，R 将只调用`gsub`您想要的行，而不是每一行，从而节省您的 R 时间。R 不能“就地”编辑文件，可以这么说，因此无法读取和复制文件。如果您必须在 R 中执行此操作，则使您的块与内存允许的一样大，然后通过您的文件。

我看到这两种方式之间有 3 倍的性能差异：

```
#test file creation ~3M lines
tf <- tempfile(); tf2 <- tempfile()
fw <- file(tf,open="wt")
sapply(1:1e6,function(x) write.csv(mtcars,fw))
close(fw)

#my way
system.time({
fr <- file(tf, open="rt") #open file connection to read
fw <- file(tf2, open="wt") #open file connection to write 
header <- readLines(f,n=1) #read in header
header <- gsub( 'disp' , 'newvar' , header) #modify header    
writeLines(header,con=fw) #write header to file
while(length(body <- readLines(fr,n=10000)) > 0) {
  writeLines(body,fw) #pass rest of file in chunks of 10000
}
close(fr);close(fw) #close connections
})    
#   user  system elapsed 
#  32.96    1.69   34.85 

#OP's way
system.time({
incon <- file( tf , "r" )
outcon <- file( tf2 , "w" )
while( length( one.line <- readLines( incon , 1 ) ) > 0 ){
    one.line <- gsub( 'disp' , 'newvar' , one.line )
    writeLines( one.line , outcon )
}
close( incon ) ; close( outcon )
})
#   user  system elapsed 
# 104.36    1.92  107.03 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-11T06:54:06.370

你有没有尝试过：

```
iocon <- file("originalFile","r+")
header <- readLines(iocon,n=1)
header <- gsub('disp', 'newvar', header)
writeLines(header, con=iocon) 
```

这只会覆盖第一行，并且取决于它管理系统资源的方式可能非常有效。一定要有备份。

# javascript - 如何使我的当前位置居中？（谷歌地图）

> ID：15886049
> 
> 赞同：3
> 
> 时间：2013-04-08T18:14:55.413
> 
> 标签：javascript, jquery, google-maps-api-3

我正在尝试将我当前的位置放在谷歌地图的中心。这将使具有特定纬度和经度变量的位置居中。

```
var coords = new google.maps.LatLng(62.39081100, 17.30692700); 
```

但我尝试使用此功能获取用户位置：

```
function grabMyPosition() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(centerMe);
    } else {
        alert("You don't support this");
    }
}
function centerMe(center) {
    var me_location = {
        lat: position.coords.latitude,
        lon: position.coords.longitude
    };
} 
```

然后这样做：

```
var coords = new google.maps.LatLng(me_location.lat, me_location.lon); 
```

但后来我明白了：

```
Uncaught TypeError: Cannot read property 'lat' of undefined 
```

那是因为我在一个函数中存储和填充这个“me_location”变量。我怎样才能使它“全局”，以便它可以在我的功能之外使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T18:20:16.053

```
function grabMyPosition() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(centerMe);
    } else {
        alert("You don't support this");
    }
}
function centerMe(position) {
    var coords = new google.maps.LatLng(
        position.coords.latitude,
        position.coords.longitude
    );

    map.setCenter(coords);
    // or
    map.panTo(coords);
} 
```

假设你的`map`变量是全局的..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T18:22:16.173

您没有从函数 centerMe 返回任何值

# perl - Printing user arugments in while loop

> ID：15886053
> 
> 赞同：0
> 
> 时间：2013-04-08T18:15:05.303
> 
> 标签：perl, while-loop, arguments

I'm trying to take user arguments into an array and print them into a while loop, can anyone help?

```
my @user_args = sort (@ARGV);
chomp(@user_args);
my $i = -1;
while (++$i <= $#ARGV)
{

    print "$ARGV[$i] \n";

}

print "\nStep #2\n";
my @user_args2 = sort {$b cmp $a} @ARGV;
while (++$i <= $#ARGV)
{

    print "@user_args2[$i] \n";

} 
```

this is my updated code, I'm trying now to figure out how to sort it increasingly and decreasing based off of these arguments "Ask ask as How 100 "abc def" oK ok" please help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:25:22.313

`while`只要条件表达式为真，就重复循环。

如果用户提供了一些参数，则为`@user_args`真，因此将进入循环。由于循环没有改变`@user_args`，循环将无限重复。

如果您想使用`while`，则必须将您的条件更改为非恒定的。例如，您可以更改`@user_args`循环体。如果您要删除`@user_args`循环的每次传递的第一个元素怎么办...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:40:57.753

就像@ikegami 说的那样，你的循环是一个无限循环。如果用户传入参数“abc”和“123”，则其内容`@user_args`将是`('abc', 123)`while 循环的每次迭代。

有很多方法可以实现这一点，但一种方法是使用从数组`shift`中取出第一项。`@user_args`在 while 循环中执行此操作，这样，一旦从数组中移出最后一个元素，while 循环将不再值为 true，while 循环将退出。

有关如何将元素移出数组的更多信息，请参阅[shift 文档。](http://perldoc.perl.org/functions/shift.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:41:36.947

如果您希望它在 while 循环中执行，则使用另一个变量 $i，以保持正在打印的数组的索引，如下所示：

```
#!usr/bin/perl -w
use strict;

my $i = -1;
while ( ++$i <= $#ARGV ) 
{

    print "$ARGV[$i]\n";

} 
```

$#ARGV 给出数组 $#ARGV 的最后一个元素的索引，例如，如果 @ARGV 是这样的：

```
@ARGV = ("one","two"); 
```

然后 $#ARGV 将给出 1，即第二个元素“two”的索引。

# java - Google Drive API：更改文件的所有权不起作用（只有作家/读者有效）

> ID：15886060
> 
> 赞同：2
> 
> 时间：2013-04-08T18:15:16.850
> 
> 标签：java, file-permissions, google-drive-api, google-api-java-client

我正在尝试将文件更改为另一个用户并使新用户成为文件的所有者，但这不起作用。

我首先做了一个权限插入并将新用户添加为作家，这没问题。但我没有直接将用户添加为“所有者”（返回内部 500 错误）

然后我尝试使用 Permission: 列表并将 newuser 视为作家。得到该用户的 id 并尝试使用 Permisson Update，并使用“transferOwnership”给新用户。但这也不起作用，我总是收到 500 Internal Server 错误。

这可能是新用户不属于我作为所有者所属的同一个电子邮件域的任何东西吗？如果这是原因，是否还有其他原因将所有权更改为外部域？

```
Content-Type:  application/json
Authorization:  Bearer ya29.AHES6ZRkl82BYjpu
X-JavaScript-User-Agent:  Google APIs Explorer

{
"role": "owner",
"type": "user",
"value": "newuser@officedomain.com"
} 
```

这给出了一个错误：

```
500 Internal Server Error

- Show headers -

{
"error": {
"errors": [
{
"domain": "global",
"reason": "internalError",
"message": "Internal Error"
}
],
"code": 500,
"message": "Internal Error"
}
} 
```

编辑：发现当两个用户具有相同的电子邮件域时可以更改所有权。但现在到另一个问题。当所有权转移到另一个使用时，该文件未显示在“共享文件”中对我来说听起来是正确的，但它也没有显示在目录结构中。如果我选择“显示所有文件”，它是可见的，如果我指定文件名，则可以搜索。但它不应该也在根目录的“我的驱动器”中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T21:15:57.750

您无法`owner`为其他域的用户添加权限。您只能`owner`为当前文件所有者所属域中的用户添加权限。

我认为我们可以使用以下算法解决它：

*   为来自destination-domain.com 的用户添加`writer`对源文件的权限。[权限：插入](https://developers.google.com/drive/v2/reference/permissions/insert)。（请求 source-domain.com）
*   现在你可以复制这个文件了。[文件：复制](https://developers.google.com/drive/v2/reference/files/copy). （请求destination-domain.com）。
*   复制您想要的权限、评论和任何其他属性。

我知道，这不是最简单的解决方案，但它有效。

# java - & 符号在 Play 框架 2.0 中不起作用

> ID：15886061
> 
> 赞同：1
> 
> 时间：2013-04-08T18:15:18.960
> 
> 标签：java, internationalization, playframework-2.0

我在 Playframework 2.0 项目中创建了一个简单的 scala.html 模板。如果我使用 @Messages("message") 引用消息

```
<div id="content">
    @Messages("test")
</div> 
```

显示正确的字符串。但是，如果我尝试使用文档中的 & 符号

```
<div id="content">
       &{'test'}
</div> 
```

它不会被替换。有什么问题？我在任何地方都找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:48:39.597

你和文档混`Play 1`在一起。`Play 2`在 Play 2*中，一切都*发生了变化，您只需要确保您正在阅读正确版本的文档！

`@Messages("test")`是在 Play 2 中获取翻译消息的**默认**方法，也是**唯一的方法。**

# c# - SQL Server CLR TVF not multithread capable?

> ID：15886072
> 
> 赞同：0
> 
> 时间：2013-04-08T18:15:38.090
> 
> 标签：c#, multithreading, user-defined-functions, sql-function

Regarding this previous stackoverflow question:

[DRY CLR table-valued functions](https://stackoverflow.com/questions/6426918/dry-clr-table-valued-functions)

It seems it only runs in single thread mode. To test this I modified the code slightly to prepend the Name field with the current thread number. All of the returned results had the same thread number assigned. Is this action by design? Is there anyway to get it to multithread? Thanks.

```
private class ResultRow
// This class holds a row which we want to return.
{
    public SqlInt32 CustId;
    public SqlString Name;

    public ResultRow(SqlInt32 custId_, SqlString name_)
    {

        int mythread = Thread.CurrentThread.ManagedThreadId;
        CustId = custId_;
        Name = "[" + mythread.ToString() + "] " + name_;
    }
} 
```

EDITED per Marc's question:

Here's the full piece of code. It returns 3470 records in 7 seconds.

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using Microsoft.SqlServer.Server;
using System.Runtime.InteropServices;
using System.Text;
using System.Collections.Generic;
using System.Collections;
using System.Threading;

namespace CS_CLR_TVF
{

  public partial class UserDefinedFunctions
  {

    // This class holds a row which we want to return.
    private class ResultRow
    {
        public SqlString fldProductName;
        public ResultRow(SqlString product_)
        {
            int mythread = Thread.CurrentThread.ManagedThreadId;
            fldProductName = "[" + mythread.ToString() + "] " + product_;
        }
    }

    [SqlFunction(DataAccess = DataAccessKind.Read, FillRowMethodName = "Test_FillRow", TableDefinition = "fldProductName nvarchar(1024)")]
    public static IEnumerable xudf_cs_tvf(SqlString strSearchClue)
    {
        ArrayList results = new ArrayList();

        using (SqlConnection connection = new SqlConnection("context connection=true"))
        {
            connection.Open();
            string s1;

            using (SqlCommand select = new SqlCommand("SELECT fldProductName FROM tblProducts", connection))
            {
                using (SqlDataReader reader = select.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        s1 = reader.GetSqlString(0).ToString();

                        // do a substring compare, if "match" grab the row
                        int idx = s1.IndexOf(strSearchClue.ToString());
                        if (idx > -1) results.Add(new ResultRow(reader.GetSqlString(0)));
                    }
                }
            }
        }
        return results;
    }

    // This function takes a row and tells SQL Server what variables we want to 
    // return from it and what types it contains.
    public static void Test_FillRow(object resultsObj, out SqlString fldProductName)
    {
        ResultRow selectResults = (ResultRow)resultsObj;
        fldProductName = selectResults.fldProductName;
    }
  }
} 
```

Pretty straight forward internal select statement:

```
SELECT fldProductName FROM tblProducts 
```

. . . . Here's a version implemented as a scalar UDF and it does do multithreading. It returns 3470 records in <1 second.

```
[Microsoft.SqlServer.Server.SqlFunction]
public static long xudf_csfake(SqlString strSearchClue, SqlString strStringtoSearch)
{
    string s1 = strStringtoSearch.ToString();
    // do a substring compare, if "match" grab the row
    int idx = s1.IndexOf(strSearchClue.ToString());
    if (idx > -1) return 1;

    return 0;
} 
```

Here is it's external select statement:

```
SELECT  fldProductName FROM tblProducts  WHERE (dbo.xudf_csfake('METAL' ,fldProductName) = 1) 
```

So I seem to getting the opposite of what the article indicates.

# c++ - boost::filesystem::path 运算符/ c2296 错误

> ID：15886073
> 
> 赞同：0
> 
> 时间：2013-04-08T18:15:38.883
> 
> 标签：c++, boost, filesystems

我是这个 boost 的新手，对 boost::filesystem::path 有一点疑问。我有一个应用程序，它使用启动此应用程序所需的配置文件的相对路径。我目前使用：

```
boost::filesystem::path PATH(".\\..\\dir1\\file1.xml"); 
```

我查看了 boost::filesystem::path 的 / 运算符，并对使用它感兴趣。

我试过这个：

```
boost::filesystem::path const PATH("."/"dir1"/"file1.xml"); 
```

但出现错误：错误 C2296：“/”：非法，左操作数的类型为“const char [2]”：错误 C2297：“/”：非法，右操作数的类型为“const char [5]”

这是他们使用它的一种干净的方式吗？

如何使用 / 运算符来完成此操作？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:26:27.403

的至少一个操作数`/`必须已经是路径，尝试：

```
boost::filesystem::path const PATH(boost::filesystem::path(".")/"dir1"/"file1.xml"); 
```

或者如果允许使用 C++11，则将其简化为：

```
const auto PATH = boost::filesystem::path(".")/"dir1"/"file1.xml"; 
```

# mysql - 查询优化（WHERE、GROUP BY、LEFT JOIN）

> ID：15886077
> 
> 赞同：14
> 
> 时间：2013-04-08T18:15:49.010
> 
> 标签：mysql, optimization, group-by, left-join

我正在使用 InnoDB。

**查询、解释和索引**

```
选择
  故事。*,
  count(comments.id) 作为评论，
  GROUP_CONCAT(
    DISTINCT 分类 2.name SEPARATOR ';'
  ) 作为分类名称，
  GROUP_CONCAT(
    不同的图像.id
    ORDER BY images.position,
    images.id 分隔符';'
  ) 作为 images_id,
  GROUP_CONCAT(
    不同的图像.caption
    ORDER BY images.position,
    images.id 分隔符';'
  ) 作为 images_caption,
  GROUP_CONCAT(
    不同的图像.thumbnail
    ORDER BY images.position,
    images.id 分隔符';'
  ) 作为 images_thumbnail,
  GROUP_CONCAT(
    不同的图像.medium
    ORDER BY images.position,
    images.id 分隔符';'
  ) 作为图像_媒体，
  GROUP_CONCAT(
    不同的图像.大
    ORDER BY images.position,
    images.id 分隔符';'
  ) AS images_large,
  GROUP_CONCAT(
    DISTINCT users.id
    ORDER BY users.id SEPARATOR ';'
  ) 作为作者 ID，
  GROUP_CONCAT(
    DISTINCT users.display_name
    ORDER BY users.id SEPARATOR ';'
  ) 作为作者显示名称，
  GROUP_CONCAT(
    不同的 users.url
    ORDER BY users.id SEPARATOR ';'
  ) 作为作者 URL
从
  故事
  LEFT JOIN 分类
    ON stories.id = 分类.story_id
  LEFT JOIN 分类 AS 分类2
    ON stories.id = classifications2.story_id
  左加入评论
    ON stories.id = comments.story_id
  左连接 image_story
    ON stories.id = image_story.story_id
      左连接图像
        ON images.id = image_story.`image_id`
  左连接 author_story
    ON stories.id = author_story.story_id
      左加入用户
        ON users.id = author_story.author_id
 WHERE 分类。`name` LIKE 'Home:Top%'
   AND stories.status = 1
GROUP BY stories.id
按分类排序。`名称`，分类。`位置`

+----+-------------+------------------+--------+-- -------------+---------+---------+--------------- ---------+--------+------------------------------- ---------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+------------------+--------+-- -------------+---------+---------+--------------- ---------+--------+------------------------------- ---------------+
| 1 | 简单 | 故事 | 参考 | 状态 | 状态 | 1 | 常量 | 434792 | 使用哪里；使用临时的；使用文件排序 |
| 1 | 简单 | 分类 | 参考 | 故事ID | 故事ID | 4 | 故事.id | 1 | 使用位置 |
| 1 | 简单 | 分类2 | 参考 | 故事ID | 故事ID | 4 | 故事.id | 1 | 使用位置 |
| 1 | 简单 | 评论 | 参考 | 故事ID | 故事ID | 8 | 故事.id | 6 | 使用哪里；使用索引 |
| 1 | 简单 | 图片故事 | 参考 | 故事ID | 故事ID | 4 | 故事.id | 1 | 空 |
| 1 | 简单 | 图片 | eq_ref | 初级 | 初级 | 4 | image_story.image_id | 1 | 空 |
| 1 | 简单 | 作者故事 | 参考 | 故事ID | 故事ID | 4 | 故事.id | 1 | 使用位置 |
| 1 | 简单 | 用户 | eq_ref | 初级 | 初级 | 4 | author_story.author_id | 1 | 使用位置 |
+----+-------------+------------------+--------+-- -------------+---------+---------+--------------- ---------+--------+------------------------------- ---------------+

+-----------------+------------+-------------+---- ----------+-------------+------------+------------- +---------+--------+------+------------+
| 表 | 非唯一 | 键名 | Seq_in_index | 列名 | 整理 | 基数| 子部分 | 包装 | 空 | 索引类型 |
+-----------------+------------+-------------+---- ----------+-------------+------------+------------- +---------+--------+------+------------+
| 故事 | 0 | 初级 | 1 | 编号 | 一个 | 869584 | 空 | 空 | | BTREE |
| 故事 | 1 | created_at | 1 | created_at | 一个 | 434792 | 空 | 空 | | BTREE |
| 故事 | 1 | 来源 | 1 | 来源 | 一个 | 2 | 空 | 空 | 是 | BTREE |
| 故事 | 1 | source_id | 1 | source_id | 一个 | 869584 | 空 | 空 | 是 | BTREE |
| 故事 | 1 | 类型 | 1 | 类型 | 一个 | 2 | 空 | 空 | | BTREE |
| 故事 | 1 | 状态 | 1 | 状态 | 一个 | 2 | 空 | 空 | | BTREE |
| 故事 | 1 | 类型状态 | 1 | 类型 | 一个 | 2 | 空 | 空 | | BTREE |
| 故事 | 1 | 类型状态 | 2 | 状态 | 一个 | 2 | 空 | 空 | | BTREE |
| 分类 | 0 | 初级 | 1 | 编号 | 一个 | 207 | 空 | 空 | | BTREE |
| 分类 | 1 | 故事ID | 1 | 故事ID | 一个 | 207 | 空 | 空 | | BTREE |
| 分类 | 1 | 姓名 | 1 | 姓名 | 一个 | 103 | 空 | 空 | | BTREE |
| 分类 | 1 | 姓名 | 2 | 职位 | 一个 | 207 | 空 | 空 | 是 | BTREE |
| 评论 | 0 | 初级 | 1 | 编号 | 一个 | 239336 | 空 | 空 | | BTREE |
| 评论 | 1 | 状态 | 1 | 状态 | 一个 | 2 | 空 | 空 | | BTREE |
| 评论 | 1 | 日期 | 1 | 日期 | 一个 | 239336 | 空 | 空 | | BTREE |
| 评论 | 1 | 故事ID | 1 | 故事ID | 一个 | 39889 | 空 | 空 | | BTREE |
+-----------------+------------+-------------+---- ----------+-------------+------------+------------- +---------+--------+------+------------+

```

**查询时间**

平均`0.035 seconds`需要运行。

如果我只删除，平均`GROUP BY`时间会下降到`0.007`。

如果我只删除`stories.status=1`过滤器，时间平均下降到`0.025`。这似乎可以很容易地优化。

如果我只删除`LIKE`过滤器和`ORDER BY`子句，`0.006`平均时间会下降。

## 更新 1：2013-04-13

我的理解通过答案得到了多方面的改善。

我添加了索引`author_story`，`images_story`这似乎改进了`0.025`几秒钟的查询，但出于某种奇怪的原因，该`EXPLAIN`计划看起来好多了。此时删除`ORDER BY`删除查询到`0.015`秒并删除两者`ORDER BY`并将`GROUP BY`查询性能提高到`0.006`. 我是现在要关注的两件事吗？如果需要，我可能会`ORDER BY`进入应用程序逻辑。

以下是修改后`EXPLAIN`的`INDEXES`

```
+----+-------------+------------------+--------+-- -------------------------------+----------+-------- --+--------------+------+-------------- -------------------------------------------------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+------------------+--------+-- -------------------------------+----------+-------- --+--------------+------+-------------- -------------------------------------------------------+
| 1 | 简单 | 分类 | 范围 | story_id,名称 | 姓名 | 102 | 空 | 14 | 使用索引条件；使用临时的；使用文件排序 |
| 1 | 简单 | 故事 | eq_ref | 初级，状态 | 初级 | 4 | 分类.story_id | 1 | 使用位置 |
| 1 | 简单 | 分类2 | 参考 | 故事ID | 故事ID | 4 | 故事.id | 1 | 使用位置 |
| 1 | 简单 | 作者故事 | 参考 | author_id,story_id,author_story | 故事ID | 4 | 故事.id | 1 | 使用索引条件 |
| 1 | 简单 | 用户 | eq_ref | 初级 | 初级 | 4 | author_story.author_id | 1 | 使用位置 |
| 1 | 简单 | 评论 | 参考 | 故事ID | 故事ID | 8 | 故事.id | 8 | 使用哪里；使用索引 |
| 1 | 简单 | 图片故事 | 参考 | story_id,story_id_2 | 故事ID | 4 | 故事.id | 1 | 空 |
| 1 | 简单 | 图片 | eq_ref | PRIMARY,position_id | 初级 | 4 | image_story.image_id | 1 | 空 |
+----+-------------+------------------+--------+-- -------------------------------+----------+-------- --+--------------+------+-------------- -------------------------------------------------------+

+-----------------+------------+------------------ --+----------------+--------------+------------+------ --------+----------+--------+------+------------+-- --------+---------------+
| 表 | 非唯一 | 键名 | Seq_in_index | 列名 | 整理 | 基数| 子部分 | 包装 | 空 | 索引类型 | 评论 | 索引评论 |
+-----------------+------------+------------------ --+----------------+--------------+------------+------ --------+----------+--------+------+------------+-- --------+---------------+
| 作者故事 | 0 | 初级 | 1 | 编号 | 一个 | 220116 | 空 | 空 | | BTREE | | |
| 作者故事 | 0 | 故事作者 | 1 | 故事ID | 一个 | 220116 | 空 | 空 | | BTREE | | |
| 作者故事 | 0 | 故事作者 | 2 | 作者_id | 一个 | 220116 | 空 | 空 | | BTREE | | |
| 作者故事 | 1 | 作者_id | 1 | 作者_id | 一个 | 第2179章 空 | 空 | | BTREE | | |
| 作者故事 | 1 | 故事ID | 1 | 故事ID | 一个 | 220116 | 空 | 空 | | BTREE | | |
| 图片故事 | 0 | 初级 | 1 | 编号 | 一个 | 148902 | 空 | 空 | | BTREE | | |
| 图片故事 | 0 | 故事图片 | 1 | 故事ID | 一个 | 148902 | 空 | 空 | | BTREE | | |
| 图片故事 | 0 | 故事图片 | 2 | image_id | 一个 | 148902 | 空 | 空 | | BTREE | | |
| 图片故事 | 1 | 故事ID | 1 | 故事ID | 一个 | 148902 | 空 | 空 | | BTREE | | |
| 图片故事 | 1 | image_id | 1 | image_id | 一个 | 148902 | 空 | 空 | | BTREE | | |
| 分类 | 0 | 初级 | 1 | 编号 | 一个 | 257 | 空 | 空 | | BTREE | | |
| 分类 | 1 | 故事ID | 1 | 故事ID | 一个 | 257 | 空 | 空 | | BTREE | | |
| 分类 | 1 | 姓名 | 1 | 姓名 | 一个 | 128 | 空 | 空 | | BTREE | | |
| 分类 | 1 | 姓名 | 2 | 职位 | 一个 | 257 | 空 | 空 | 是 | BTREE | | |
| 故事 | 0 | 初级 | 1 | 编号 | 一个 | 962570 | 空 | 空 | | BTREE | | |
| 故事 | 1 | created_at | 1 | created_at | 一个 | 481285 | 空 | 空 | | BTREE | | |
| 故事 | 1 | 来源 | 1 | 来源 | 一个 | 4 | 空 | 空 | 是 | BTREE | | |
| 故事 | 1 | source_id | 1 | source_id | 一个 | 962570 | 空 | 空 | 是 | BTREE | | |
| 故事 | 1 | 类型 | 1 | 类型 | 一个 | 2 | 空 | 空 | | BTREE | | |
| 故事 | 1 | 状态 | 1 | 状态 | 一个 | 4 | 空 | 空 | | BTREE | | |
| 故事 | 1 | 类型状态 | 1 | 类型 | 一个 | 2 | 空 | 空 | | BTREE | | |
| 故事 | 1 | 类型状态 | 2 | 状态 | 一个 | 6 | 空 | 空 | | BTREE | | |
| 评论 | 0 | 初级 | 1 | 编号 | 一个 | 232559 | 空 | 空 | | BTREE | | |
| 评论 | 1 | 状态 | 1 | 状态 | 一个 | 6 | 空 | 空 | | BTREE | | |
| 评论 | 1 | 日期 | 1 | 日期 | 一个 | 232559 | 空 | 空 | | BTREE | | |
| 评论 | 1 | 故事ID | 1 | 故事ID | 一个 | 29069 | 空 | 空 | | BTREE | | |
| 图片 | 0 | 初级 | 1 | 编号 | 一个 | 147206 | 空 | 空 | | BTREE | | |
| 图片 | 0 | source_id | 1 | source_id | 一个 | 147206 | 空 | 空 | 是 | BTREE | | |
| 图片 | 1 | 职位 | 1 | 职位 | 一个 | 4 | 空 | 空 | | BTREE | | |
| 图片 | 1 | position_id | 1 | 编号 | 一个 | 147206 | 空 | 空 | | BTREE | | |
| 图片 | 1 | position_id | 2 | 职位 | 一个 | 147206 | 空 | 空 | | BTREE | | |
| 用户 | 0 | 初级 | 1 | 编号 | 一个 | 981 | 空 | 空 | | BTREE | | |
| 用户 | 0 | users_email_unique | 1 | 电子邮件 | 一个 | 981 | 空 | 空 | | BTREE | | |
+-----------------+------------+------------------ --+----------------+--------------+------------+------ --------+----------+--------+------+------------+-- --------+---------------+

选择
故事。*,
count(comments.id) 作为评论，
GROUP_CONCAT(DISTINCT users.id ORDER BY users.id SEPARATOR ';') AS authors_id,
GROUP_CONCAT(DISTINCT users.display_name ORDER BY users.id SEPARATOR ';') AS authors_display_name,
GROUP_CONCAT(DISTINCT users.url ORDER BY users.id SEPARATOR ';') AS authors_url,
GROUP_CONCAT(DISTINCT classifications2.name SEPARATOR ';') AS classifications_name,
GROUP_CONCAT(DISTINCT images.id ORDER BY images.position,images.id SEPARATOR ';') AS images_id,
GROUP_CONCAT(DISTINCT images.caption ORDER BY images.position,images.id SEPARATOR ';') AS images_caption,
GROUP_CONCAT(DISTINCT images.thumbnail ORDER BY images.position,images.id SEPARATOR ';') AS images_thumbnail,
GROUP_CONCAT(DISTINCT images.medium ORDER BY images.position,images.id SEPARATOR ';') AS images_medium,
GROUP_CONCAT(DISTINCT images.large ORDER BY images.position,images.id SEPARATOR ';') AS images_large
从
  分类
  INNER JOIN 故事
    ON stories.id = 分类.story_id
  LEFT JOIN 分类 AS 分类2
    ON stories.id = classifications2.story_id
  左加入评论
    ON stories.id = comments.story_id
  左连接 image_story
    ON stories.id = image_story.story_id
  左连接图像
    ON images.id = image_story.`image_id`
 INNER JOIN author_story
    ON stories.id = author_story.story_id
 INNER JOIN 用户
    ON users.id = author_story.author_id
 WHERE 分类。`name` LIKE 'Home:Top%'
   AND stories.status = 1
GROUP BY stories.id
按空排序

```

## 更新 2：2013-04-14

我注意到另一件事。如果我不选择`stories.content`(LONGTEXT) 和`stories.content_html`(LONGTEXT)，则查询会从`0.015`几秒下降到`0.006`几秒。现在我正在考虑是否可以不用它们`content`，`content_html`或者用其他东西代替它们。

我在上面的 2013-04-13 更新中更新了查询、索引和解释，而不是在这个更新中重新发布，因为它们是次要的和增量的。该查询仍在使用`filesort`. 我无法摆脱，`GROUP BY`但已经摆脱了`ORDER BY`。

## 更新 3：2013-04-16

根据要求，我从两者中删除了 stories_id INDEXES `image_story`，`author_story`因为它们是多余的。结果是解释的输出只发生了变化，表明发生了`possible_keys`变化。不幸的是，它仍然没有显示`Using Index`优化。

也更改`LONGTEXT`为`TEXT`现在正在获取`LEFT(stories.content, 500)`，而不是`stories.content`在查询执行时间上产生了非常显着的差异。

```
+----+-------------+------------------+--------+-- ---------------+--------------+-------- --+--------------+------+-------------- -------------------------------------------------- ------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+------------------+--------+-- ---------------+--------------+-------- --+--------------+------+-------------- -------------------------------------------------- ------+
| 1 | 简单 | 分类 | 参考 | 故事ID，姓名，姓名位置| 姓名 | 102 | 常量 | 10 | 使用索引条件；使用哪里；使用临时的；使用文件排序 |
| 1 | 简单 | 故事 | eq_ref | 初级，状态 | 初级 | 4 | 分类.story_id | 1 | 使用位置 |
| 1 | 简单 | 分类2 | 参考 | 故事ID | 故事ID | 4 | 故事.id | 1 | 使用位置 |
| 1 | 简单 | 作者故事 | 参考 | 故事作者 | 故事作者 | 4 | 故事.id | 1 | 使用哪里；使用索引 |
| 1 | 简单 | 用户 | eq_ref | 初级 | 初级 | 4 | author_story.author_id | 1 | 使用位置 |
| 1 | 简单 | 评论 | 参考 | 故事ID | 故事ID | 8 | 故事.id | 8 | 使用哪里；使用索引 |
| 1 | 简单 | 图片故事 | 参考 | 故事图片 | 故事图片 | 4 | 故事.id | 1 | 使用索引 |
| 1 | 简单 | 图片 | eq_ref | PRIMARY,position_id | 初级 | 4 | image_story.image_id | 1 | 空 |
+----+-------------+------------------+--------+-- ---------------+--------------+-------- --+--------------+------+-------------- -------------------------------------------------- ------+

innodb_buffer_pool_size
134217728

TABLE_NAME INDEX_LENGTH
image_story 10010624
image_story 4556800
图片故事 0

TABLE_NAME INDEX_NAMES 大小
黎明/image_story story_image 13921

```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T03:18:09.203

我可以立即看到两个优化机会：

**将 OUTER JOIN 更改为 INNER JOIN**

您的查询当前正在扫描 434792 个故事，并且您应该能够更好地缩小范围，假设不是每个故事都有一个与“Home:Top%”匹配的分类。最好使用索引来查找您要查找的分类，*然后*查找匹配的故事。

但是您使用`LEFT OUTER JOIN`的是分类，这意味着所有故事都将被扫描，无论它们是否具有匹配的分类。然后，您通过在`WHERE`子句中对分类设置条件来打败它，有效地强制要求有一个与您的模式匹配的分类`LIKE`。所以它不再是外连接，而是内连接。

如果您将分类表放在首位，并使其成为内部连接，优化器将使用它来将搜索范围缩小到具有匹配分类的故事。

```
. . . 
FROM
  classifications
  INNER JOIN stories
    ON stories.id = classifications.story_id 
. . . 
```

优化器应该能够确定何时重新排序表是有利的，因此您可能不必更改查询中的顺序。`INNER JOIN`但是在这种情况下您确实需要使用 an 。

**添加复合索引**

您的交集表 image_story 和 author_story 没有复合索引。将复合索引添加到多对多关系的交集表中通常是一个很大的优势，这样它们就可以执行连接并获得“使用索引”优化。

```
ALTER TABLE image_story ADD UNIQUE KEY imst_st_im (story_id, image_id);
ALTER TABLE author_story ADD UNIQUE KEY aust_st_au (story_id, author_id); 
```

* * *

重新发表您的评论和更新：

我不确定您是否正确创建了新索引。您的索引转储不显示列，并且根据更新的 EXPLAIN，没有使用新索引，我希望会发生这种情况。使用新索引将导致 EXPLAIN 的额外字段中出现“使用索引”，这应该有助于提高性能。

如您所示，每个表的输出`SHOW CREATE TABLE`将比索引转储（没有列名）更完整的信息。

创建索引后，您可能必须在每个表上运行一次 ANALYZE TABLE。此外，多次运行查询，以确保索引在缓冲池中。这个表是 InnoDB 还是 MyISAM？

我还注意到在您的 EXPLAIN 输出中，该`rows`列显示被触摸的行数要少得多。这是一个进步。

你真的需要`ORDER BY`吗？如果您使用`ORDER BY NULL`，您应该能够摆脱“使用文件排序”，这可能会提高性能。

* * *

重新更新：

您仍然没有从您的`image_story`和`author_story`表中获得“使用索引”优化。我的一个建议是消除冗余索引：

```
ALTER TABLE image_story DROP KEY story_id;
ALTER TABLE author_story DROP KEY story_id; 
```

原因是任何可以从 story_id 上的单列索引中受益的查询也可以从 (story_id,image_id) 上的两列索引中受益。消除冗余索引有助于优化器做出更好的决策（以及节省一些空间）。[这是pt-duplicate-key-checker](http://www.percona.com/doc/percona-toolkit/pt-duplicate-key-checker.html)等工具背后的理论。

我还会检查以确保您的缓冲池足够大以容纳您的索引。您不希望索引在查询期间分页进出缓冲池。

```
SHOW VARIABLES LIKE 'innodb_buffer_pool_size' 
```

检查 image_story 表的索引大小：

```
SELECT TABLE_NAME, INDEX_LENGTH FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_NAME = 'image_story'; 
```

并将其与这些索引中当前驻留在缓冲池中的数量进行比较：

```
SELECT TABLE_NAME, GROUP_CONCAT(DISTINCT INDEX_NAME) AS INDEX_NAMES, SUM(DATA_SIZE) AS SIZE 
FROM INFORMATION_SCHEMA.INNODB_BUFFER_PAGE_LRU 
WHERE TABLE_NAME = '`test`.`image_story`' AND INDEX_NAME <> 'PRIMARY' 
```

当然，将上面的 `test` 更改为您的表所属的数据库名称。

该 information_schema 表是 MySQL 5.6 中的新表。我假设您使用的是 MySQL 5.6，因为您的 EXPLAIN 显示“使用索引条件”，这在 MySQL 5.6 中也是新的。

除非我真的需要很长的字符串，否则我根本不使用 LONGTEXT。记住：

*   TEXT 最多可容纳 64KB
*   MEDIUMTEXT 最多可容纳 16MB
*   LONGTEXT 最多可容纳 4GB

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-11T15:45:20.557

当您使用 MYSQL 时，您可以利用[`Straight_join`](http://dev.mysql.com/doc/refman/5.0/en/select.html)

`STRAIGHT_JOIN forces the optimizer to join the tables in the order in which they are listed in the FROM clause. You can use this to speed up a query if the optimizer joins the tables in nonoptimal order`

还有一个改进范围是过滤表的数据，`stories`因为您只需要状态为 1的数据

因此，在表单子句中，不要添加整个`stories`表，而是添加唯一需要的记录，因为您的查询计划显示该表有`434792`相同的行`classification`

```
FROM
   (SELECT 
       * 
   FROM
       STORIES
   WHERE 
       STORIES.status = 1) stories
LEFT JOIN
   (SELECT 
       * 
   FROM
       classifications
   WHERE
       classifications.`name` LIKE 'Home:Top%') classifications
ON stories.id = classifications.story_id 
```

[`sort_buffer_size`](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_sort_buffer_size)当您显示为`order by`和时，您还可以增加一个建议`group by`，但是随着每个会话的缓冲区大小的增加，请小心增加缓冲区大小。

此外，如果可能的话，您可以在您的应用程序中订购您的记录，因为您已经提到删除该`order by`子句可以提高`1/6`原始时间的一部分......

## **编辑**

`image_story.image_id`为`image_story`表和表添加索引，`author_story.story_id`因为`author_story`这些列用于连接

`images.position, images.id`还必须在您使用它时创建索引。

## **编辑 16/4**

我想你几乎优化了你的查询，看到你更新......

仍然可以改进的一个地方是使用 BillKarwin 提到的适当的数据类型......您可以使用**[`ENUM`](http://dev.mysql.com/doc/refman/5.6/en/enum.html)**或**[`TINYINT`](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)**键入状态和其他没有任何增长范围的列，它将帮助您优化查询性能，还您的桌子的存储性能....

希望这可以帮助....

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-11T14:26:04.450

计算

```
GROUP_CONCAT(DISTINCT classifications2.name SEPARATOR ';') 
```

可能是最耗时的操作，因为`classifications`它是一个大表，并且由于所有连接，要使用的行数成倍增加。

因此，我建议使用**临时表**来获取该信息。此外，为了避免两次计算 LIKE 条件（一次用于临时表，一次用于“真实”查询），我还将为此创建一个临时表。

您的原始查询，在一个非常简化的版本（没有图像和用户表，以便更容易阅读）是：

```
SELECT
    stories.*,
    count(DISTINCT comments.id) AS comments,
    GROUP_CONCAT(DISTINCT classifications2.name ORDER BY 1 SEPARATOR ';' )
        AS classifications_name
FROM
    stories
    LEFT JOIN classifications
        ON stories.id = classifications.story_id
    LEFT JOIN classifications AS classifications2
        ON stories.id = classifications2.story_id
    LEFT JOIN comments
        ON stories.id = comments.story_id
WHERE
    classifications.`name` LIKE 'Home:Top%'
        AND stories.status = 1
GROUP BY stories.id
    ORDER BY stories.id, classifications.`name`, classifications.`positions`; 
```

我将用以下查询替换它，使用临时表`_tmp_filtered_classifications`（名称为 LIKE Home:Top%' 的分类 id）和`_tmp_classifications_of_story`（对于每个故事 id 'contained' in `_tmp_filtered_classifications`，所有分类名称）：

```
DROP TABLE IF EXISTS `_tmp_filtered_classifications`;

CREATE TEMPORARY TABLE _tmp_filtered_classifications
    SELECT id FROM classifications WHERE name LIKE 'Home:Top%';

DROP TABLE IF EXISTS `_tmp_classifications_of_story`;

CREATE TEMPORARY TABLE _tmp_classifications_of_story ENGINE=MEMORY
    SELECT stories.id AS story_id, classifications2.name
        FROM 
        _tmp_filtered_classifications
        INNER JOIN classifications        
            ON _tmp_filtered_classifications.id=classifications.id
        INNER JOIN stories
            ON stories.id = classifications.story_id
        LEFT JOIN classifications AS classifications2
            ON stories.id = classifications2.story_id
        GROUP BY 1,2;

SELECT
    stories.*,
    count(DISTINCT comments.id) AS comments,
    GROUP_CONCAT(DISTINCT classifications2.name ORDER BY 1 SEPARATOR ';')
        AS classifications_name
FROM
    _tmp_filtered_classifications
    INNER JOIN classifications        
        ON _tmp_filtered_classifications.id=classifications.id
    INNER JOIN stories
        ON stories.id = classifications.story_id
    LEFT JOIN _tmp_classifications_of_story AS classifications2
        ON stories.id = classifications2.story_id
    LEFT JOIN comments
        ON stories.id = comments.story_id
WHERE
    stories.status = 1
GROUP BY stories.id
    ORDER BY stories.id, classifications.`name`, classifications.`positions`; 
```

请注意，我在您的查询中添加了更多“order by”子句，以检查两个查询是否提供相同的结果（使用差异）。我还更改`count(comments.id)`为`count(DISTINCT comments.id)`否则查询计算的评论数是错误的（同样，因为连接乘以行数）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T00:38:42.543

我不知道要实验的数据的所有细节，但我知道您应该首先执行匹配最少数据量的操作，从而为后续操作消除最多数据量。

根据您的整体查询的复杂程度，您可能无法以这种方式重新排序操作。但是，您可以执行两个单独的查询，其中第一个只是消除绝对不需要的数据，然后将其结果提供给第二个查询。其他人建议使用临时表，这是处理这种情况的好方法。

如果您需要对此策略进行任何澄清，请告诉我。

** 更新：当每个操作与其他操作匹配大约相同百分比的数据时使用的类似策略是分别为每个操作计时，然后首先运行使用最少时间的操作。一些搜索操作比其他操作更快，如果所有其他因素都相同，最快的应该是第一个。这样，较慢的搜索操作将使用较少的数据，整体结果将是更高的性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T13:24:08.723

我敢打赌，`LIKE`条件是您要求的最糟糕的事情。
你确定你必须这样做吗？

4个步骤：

1.  在表上创建一个`IsHomeTop`布尔索引列`classifications`
2.  跑`UPDATE classifications SET IsTopHome = 1 WHERE NAME LIKE 'Home:Top%'`
3.  运行您的初始查询`WHERE classifications.IsTopHome == 1`
4.  享受

您的查询对于让`LIKE`操作员降低您的性能来说太重要了。
如果`stories`更新很多，我不认为你的`classifications`桌子是这样的。所以给你一个机会，消灭`LIKE`运营商。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T13:08:05.440

您可以在这里尝试一些方法：

```
1) create covering index on classifications.`name` 
```

您可以通过创建覆盖索引来加快查询速度。

覆盖索引是指查询中选择的所有字段都被索引覆盖的情况，在这种情况下，InnoDB（不是 MyISAM）永远不会读取表中的数据，而只会使用索引中的数据，显着加快选择。

CREATE TABLE `classifications`( KEY `class_name`( `name`,...all columns) ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

2）而不是`classifications.name LIKE 'Home:Top%'` 使用`locate('Home:Top',classifications.name)`

# security - MEF doesn't work unless I run as Administrator

> ID：15886090
> 
> 赞同：0
> 
> 时间：2013-04-08T18:16:14.513
> 
> 标签：security, mef

When I run my application in Release mode, MEF does not import my exports "Unless" I run as Administrator. I tried adding a manifest setting level=requireAdministrator but this didn't help. Here is my MEF code...I'm running Windows 7 .Net 4.0.

```
 var compositionBatch = new CompositionBatch();
 compositionBatch.AddPart(this);
 _aggregateCatalog = new AggregateCatalog();
 _aggregateCatalog.Catalogs.Add(_solverDirectoryCatalog);
compositionContainer.Compose(compositionBatch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:05:24.710

上面的 _solverDirectoryCatalog 是通过在文件夹前面加上“environment.currentdirectory”创建的。这就是失败的原因......它应该引用“appdomain.currentdomain.basedirectory”

# undefined - Undefined variable (opencart)

> ID：15886093
> 
> 赞同：2
> 
> 时间：2013-04-08T18:16:22.193
> 
> 标签：undefined, opencart

on the line where the error apparently is the code looks like this:

```
<?php if ($filter_name) { ?> 
```

I know this is probably a vague questions but if anyone can help that would be great!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T08:26:57.243

这是一个非常模糊的问题。很可能您会在 header.tpl 中收到此错误，因为您正在使用为 1.5.4.x（或更早版本）制作的主题和 1.5.5.x

```
in your catalog/view/theme/your_theme/template/common/header.tpl 
```

寻找

```
<?php if ($filter_name) { ?>
    <input type="text" name="filter_name" value="<?php echo $filter_name; ?>" />
    <?php } else { ?>
    <input type="text" name="filter_name" value="<?php echo $text_search; ?>" onclick="this.value = '';" onkeydown="this.style.color = '#000000';" />
    <?php } ?> 
```

用。。。来代替

```
<input type="text" name="search" placeholder="<?php echo $text_search; ?>" value="<?php echo $search; ?>" /> 
```

如果您在询问之前进行搜索，您会发现这个[http://forum.opencart.com/viewtopic.php?f=20&t=97790](http://forum.opencart.com/viewtopic.php?f=20&t=97790)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T07:04:05.997

```
go to path : catalog/view/theme/your_theme/template/common/header.tpl
open the file header.tpl
search <?php if($filter_name) { ?>
replace above by <?php if(isset($filter_name)) { ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T03:18:53.807

是的，这是一个版本缺陷，当你在 1.5.5 版本中使用 1.5.4 主题时很常见，但你可以使用上述方法轻松解决（如果出现一两个错误）。只需要修改这个文件：catalog/view/theme/your-theme/template/common/header.tpl，为了安全不要破解核心文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-05T10:44:05.957

[https://github.com/justinmarsan/opencart-blank-theme/issues/7](https://github.com/justinmarsan/opencart-blank-theme/issues/7)

这个链接真的帮助了我，

只需更换

**这个：**

```
<?php if ($filter_name) { ?> 
```

**有了这个：**

```
<?php if (isset($filter_name)) { ?> 
```

# javascript - 无限执行nodejs应用程序的任务

> ID：15886096
> 
> 赞同：3
> 
> 时间：2013-04-08T18:16:44.073
> 
> 标签：javascript, node.js, io

假设我有代码，像这样

```
function execute() {
    var tasks = buildListOfTasks();
    // ...
} 
```

`buildListOfTask`创建函数数组。函数是异步的，可能会发出 HTTP 请求或/和执行数据库操作。

如果任务列表显示为空或所有任务都已执行，我需要再次重复相同的`execute`例程。再说一次，说“无限循环”。所以，它就像应用程序的守护进程。

我可以很理解如何在同步世界中实现这一点，但有点困惑如何在 node.js 异步世界中实现它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T18:33:21.030

使用[async.js](https://github.com/caolan/async)和它的队列对象。

```
function runTask(task, callback) {
    //dispatch a single asynchronous task to do some real work
    task(callback);
}
//the 10 means allow up to 10 in parallel, then start queueing
var queue = async.queue(runTask, 10);

//Check for work to do and enqueue it
function refillQueue() {
  buildListOfTasks().forEach(function (task) {
    queue.push(task);
  });
}    

//queue will call this whenever all pending work is completed
//so wait 100ms and check again for more arriving work
queue.drain = function() {
  setTimeout(refillQueue, 100);
};

//start things off initially
refillQueue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:26:24.073

如果您已经熟悉类似 的库`async`，可以使用`execute()`作为最终回调来重新启动任务：

```
function execute(err) {
    if (!err) {
        async.series(buildListOfTasks(), execute);
    } else {
        // ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:26:22.000

我认为你必须使用 async.js，可能是并行函数。[https://github.com/caolan/async#parallel](https://github.com/caolan/async#parallel)

在全局回调中，只需调用execute即可进行递归调用。

```
async.parallel(tasks,
    function(err, results){
        if(!err) execute();
    }
); 
```

# highcharts - Can i snap Highstock navigator extremes to existing points?

> ID：15886097
> 
> 赞同：0
> 
> 时间：2013-04-08T18:16:47.577
> 
> 标签：highcharts, highstock

I'm looking for a way to snap the users min and max extremes to existing points when they use the navigator slider. Is this something i can accomplish with existing options or has anyone else accomplished this? The ultimate goal here would be if i set two points in a series, for example (1365444905, 1) and (1365444919, 10) when the user slides the bar i should only ever get back 1365444905 or 1365444919.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:44:05.560

不幸的是，使用现有选项无法做到这一点。我认为它需要对导航器`mouseMoveHandler`方法进行一些修改。你可以在这里找到它：[https ://github.com/highslide-software/highcharts.com/blob/5b1f3b0bc492252bbe0e283ec698480dbc179ba5/js/parts/Scroller.js#L651](https://github.com/highslide-software/highcharts.com/blob/5b1f3b0bc492252bbe0e283ec698480dbc179ba5/js/parts/Scroller.js#L651)

这是您应该查看的功能部分：

```
// drag left handle
if (scroller.grabbedLeft) {
    hasDragged = true;
    scroller.render(0, 0, chartX - navigatorLeft, scroller.otherHandlePos);

// drag right handle
} else if (scroller.grabbedRight) {
    hasDragged = true;
    scroller.render(0, 0, scroller.otherHandlePos, chartX - navigatorLeft);

// drag scrollbar or open area in navigator
} else if (scroller.grabbedCenter) {

    hasDragged = true;
    if (chartX < dragOffset) { // outside left
        chartX = dragOffset;
    } else if (chartX > navigatorWidth + dragOffset - range) { // outside right
        chartX = navigatorWidth + dragOffset - range;
    }

    scroller.render(0, 0, chartX - dragOffset, chartX - dragOffset + range);
} 
```

# ruby-on-rails - 为什么 Rails 中没有自定义路由的路径名

> ID：15886101
> 
> 赞同：14
> 
> 时间：2013-04-08T18:17:20.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, custom-routes

在我的rails应用程序中跟随routes.rb

```
resources :users 
```

导致“rake routes”的以下输出

```
 users        GET    /users(.:format)                 users#index
              POST   /users(.:format)                 users#create
 new_user     GET    /users/new(.:format)             users#new
 edit_user    GET    /users/:id/edit(.:format)        users#edit
 user         GET    /users/:id(.:format)             users#show
              PUT    /users/:id(.:format)             users#update
              DELETE /users/:id(.:format)             users#destroy 
```

& 在 routes.rb 中跟随（对于我的自定义控制器'home'）

```
match  '/new_user'        =>          'home#new_user', via: [:get]
match  '/users/:id/edit'  =>          'home#edit_user', via: [:get]
match  '/users/:id'       =>          'home#show_user', via: [:get]
match  '/users/:id'       =>          'home#create_user', via: [:post] 
```

导致“rake routes”的以下输出

```
GET    /new_user(.:format)                home#new_user
GET    /users/:id/edit(.:format)          home#edit_user
GET    /users/:id(.:format)               home#show_user
POST   /users/:id(.:format)               home#create_user 
```

为什么第二种情况没有路径名？就像在第一种情况下（'new_user'，'edit_user'）

有没有办法为第二种情况提供路径名？因为我想在我的视图中使用这些路径名

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-08T18:19:51.027

没有路径名，因为您没有指定路径名。如果您提供自定义路由而不是 using `resources`，则需要 use`:as`提供路径名：

```
match '/new_user' => 'home#new_user', via: :get, as: :new_user 
```

您还应该只使用`get`而不是`match... via: :get`：

```
get '/new_user' => 'home#new_user', as: :new_user 
```

但是，鉴于您的路线集，您最好的选择是继续使用`resources`，但要通过以下方式提供有限的操作列表`:only`和自定义控制器`:controller`：

```
resources :users, only: %w(new edit show create), controller: "home" 
```

# session - displaying specific session variables

> ID：15886106
> 
> 赞同：0
> 
> 时间：2013-04-08T18:17:30.857
> 
> 标签：session, variables

I have this simple session, and was trying to get it to display specific session variables to the screen. have not been able to find anything on the web that has been helpful

```
<?php 
session_start(); 

// makes an array 
$colors=array('red', 'yellow', 'blue'); 
// adds it to our session 
$_SESSION['color']=$colors; 
$_SESSION['size']='small'; 
$_SESSION['shape']='round'; 
print "Done";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:23:32.537

你有没有尝试过类似的东西

```
foreach($_SESSION as $key => $var) {
  echo "\$key = \$var<br>\n";
} 
```

# c# - C# web service and dll library

> ID：15886108
> 
> 赞同：-2
> 
> 时间：2013-04-08T18:17:49.077
> 
> 标签：c#, c++, visual-studio-2010, dll, dllimport

I have this doubt ..

I have a `C++` library dll and I am writing in my `c#` web service. I should call my web service a method of this dll. for example using:

```
[DllImport ("mydll.dll")]
.... 
```

but how the type mappings? For example, If That library dll function pointers?

Import and calls the dll adds a overead significant as regards the perdformance?

it may be desirable from the point of view of performance write the web service in `C++`? using `c#` I think it's much faster to implement.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:54:14.573

我想您是在询问编组过程，特别是编组函数指针？CLR 将大多数本机类型[编组](http://msdn.microsoft.com/en-us/library/aa446538.aspx)到它们的托管等效项中。`MarshalAs`使用该属性可以实现对编组过程的更细粒度的控制。就函数指针而言，您可以使用[GetDelegateForFunctionPointer](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.getdelegateforfunctionpointer.aspx)为您的本机函数指针获取托管委托。[这是](http://blogs.msdn.com/b/junfeng/archive/2004/07/14/181932.aspx)一个例子。

您还询问了与 P/Invoke 相关的性能注意事项。使用 P/Invoke 时显然会有一些开销。这是[msdn](http://msdn.microsoft.com/en-us/library/ms235282.aspx)所说的。

> PInvoke 每次调用的开销在 10 到 30 条 x86 指令之间。除了这个固定成本之外，编组还会产生额外的开销。在托管和非托管代码中具有相同表示的 blittable 类型之间没有编组成本。例如，在 int 和 Int32 之间进行转换是免费的。为了获得更好的性能，请使用更少的 PInvoke 调用来编组尽可能多的数据，而不是更多的调用来编组每次调用的更少数据。

总结一下，如果没有您调用的 DLL 的托管等效项，请使用 P/Invoke。为了避免 P/Invoke 对性能的影响，最好只在托管代码中实现 DLL。当然，可能还有其他性能考虑导致您将其实现为本机 DLL。你只需要权衡利弊，做看起来正确的事情。

# c# - Issues with toggleclass in jquery

> ID：15886119
> 
> 赞同：0
> 
> 时间：2013-04-08T18:18:37.533
> 
> 标签：c#, jquery, razor, background-image, background-position

I have a condition , where i have to use toggle class plus delete the class of all other list in a drop down menu , for instance if i select any product from the list , all the other products background position should be 0,0 , also on clicking the same selected product again the bacground position should go back to 0,0\. something similar to toggle . I just cant get the both functionality work together. any ideas on how to get it working or any other way of doing it below is the code which i have tried so far:

for toggle i used the following jquery code :

```
<script type="text/javascript">
     $(document).ready(function() {
         $('.option-list.swatch.brass label').on("click", function() {
            $(this).toggleClass('not-selected selected-value');
         });       
     });
 </script> 
```

To change the background position of all the other list labels apart from the selected ones

```
<script type="text/javascript">
     $(document).ready(function() {
         $('.option-list.swatch.brass label').on("click", function() {
             $(".option-list.swatch.brass label").each(function() {
                 $(this).css("background-position", "0px 0px");
             });

             $(this).css("background-position", "0px 50px");
         });       
     });
</script>

<ul>
@foreach (var pvaValue in attribute.Values)
                { 
         <li>

          <label for="" class="not-selected" style="background-image:url(@(pvaValue.MenuIcon));width:50px;height:49px;">@pvaValue.Name</label>

                   }
                         </li> </ul>
<style type="text/css">
    label.not-selected{background-position:0px 0px;}
    label.selected-value{background-position:0px 50px;}

</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:41:39.577

它是由于 Javascript 冲突而发生的。较早调用的将被稍后的单击绑定函数覆盖。

我会说，结合两个点击范围的逻辑..

```
 $('.option-list.swatch.brass label').on("click", function() {
         //FIRST LOGIC
         $(this).toggleClass('not-selected selected-value');
         //SECOND LOGIC
         $(".option-list.swatch.brass label").each(function() {
             $(this).css("background-position", "0px 0px");
         });

         $(this).css("background-position", "0px 50px");
     }); 
```

这应该可以解决您的问题。在一个点击事件函数中调用这两个逻辑是可以的。:-)

# php - 如果为复选框 id 设置 isset？

> ID：15886120
> 
> 赞同：0
> 
> 时间：2013-04-08T18:18:41.210
> 
> 标签：php, forms, isset

我有一个这样的复选框

```
<input type="checkbox" name="power" id="electrical"> 
```

那么，我可以像这样在 PHP 中检查复选框是否被选中

```
if(isset($_POST['electrical'])) 
```

我知道 $_POST 仅与字段名称一起使用，但是如何在 PHP 中获取带有 id 的字段？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:21:19.480

由于您无法读取`id`，而只能读取`name`& `value`，因此解决方案是将 ID 放入名称中，如下所示：

```
<input type="checkbox" name="power[electrical]" id="electrical" value="test"> 
```

然后该值将转到：

```
$_POST['power']['electrical'] 
```

或存储`ID`在值字段中

```
<input type="checkbox" name="power[electrical]" id="electrical" value="electrical"> 
```

然后你会在这里找到它：`$_POST['power']`

当您有多个相同的复选框时`name`，您应该使用我的第一个解决方案

# django - Extract from QueryDict/json in Django 1.5

> ID：15886125
> 
> 赞同：2
> 
> 时间：2013-04-08T18:19:09.940
> 
> 标签：django, json, request

From `self.request.body` I have

```
changes%5B0%5D%5B%5D=1&changes%5B0%5D%5B%5D=query&changes%5B0%5D%5B%5D=first&changes%5B0%5D%5B%5D=second 
```

I know %5B = "[" og %5D = "]", so the string is

```
changes[0][]=1 & changes[0][]=query & changes[0][]=first & changes[0][]=second 
```

With `self.request.POST` I get

```
<QueryDict: {u'changes[0][]': [u'1', u'query', u'first', u'second']}> 
```

How can I use these values? I need to store the values '1', 'query', 'first', and 'second'.

I've tried `json.loads(self.request.body)` which results in error `ValueError: No JSON object could be decoded`.

# oracle - Oracle：更新非唯一字段

> ID：15886127
> 
> 赞同：0
> 
> 时间：2013-04-08T18:19:13.400
> 
> 标签：oracle, loops, plsql

我需要更新一个非唯一字段。我有一张桌子：

```
create table tbl (A number(5)); 
```

tbl 中的值：1、2、2、2 .. 2。

我需要用新的非唯一值替换所有 2

新值：1、100、101、102、103 .. 我写道：

```
DECLARE
    sql_stmt VARCHAR2(500);
   cursor curs is 
        select A from tbl group by A having count(*)>1;
   l_row curs%ROWTYPE;
   i number(5);
   new_mail VARCHAR2(20);
BEGIN
  i:=100;
  open curs;
  loop
    fetch curs into l_row;
    exit when curs%notfound; 
    SQL_STMT := 'update tbl set a='||i||' where a='||l_row.A;
    i:=i+1;
    EXECUTE IMMEDIATE sql_stmt;
  end loop;
  close curs;
END;
/ 
```

但我得到了：

```
 A
----------
         1
       100
       ...
       100 
```

有什么问题？为什么循环不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:52:51.453

关于什么

```
update tbl
set a = 100 + rownum 
where a in (
    select a 
    from    tbl 
    group by a
    having count(*) > 1 ) 
```

子查询找到重复的 A 字段，更新为它们提供从 100 开始的唯一标识符。（您在这里遇到其他问题，例如，如果 id 100、101.... 已经存在怎么办）。

PLSQL 的第一条规则说，**你可以用 SQL 做的事情总是用 SQL 做**。直接写`for` `loop`会导致 sql 和 pl/sql 引擎之间的上下文切换分配。即使 oracle 自动将其转换为批量语句 (10g<)，使用纯 SQL 仍然会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:57:09.233

您的光标每个唯一值获得一行`A`：

```
select A from tbl group by A having count(*)>1; 
```

您需要获取与这些值匹配的所有不同行。一种方法是这样做：

```
select a, r from (
    select a, rowid as r, count(*) over (partition by a) as c
    from tbl
) where c > 1; 
```

...然后使用这些`rowid`值进行更新。我不确定您为什么要使用动态 SQL，因为它根本没有必要，您可以简化（IMO）循环：

```
declare
    i number(5);
begin
    i:=100;
    for l_row in (
        select a, r from (
            select a, rowid as r, count(*) over (partition by a) as c
            from tbl
        ) where c > 1) loop
        update tbl set a=i where rowid = l_row.r;
        i:=i+1;
    end loop;
end;
/ 
```

* * *

我将其保留为 PL/SQL 以显示您尝试的内容有什么问题，但@haki 是非常正确的，如果可能的话，您应该（并且可以）[用纯 SQL 执行此操作](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:5500485045890)。即使您需要它是 PL/SQL，因为您正在循环中执行其他工作（如该`new_mail`领域可能建议的那样），那么您仍然可以在过程中进行一次更新，而不是围绕环形。

# excel - 在 Excel VBA 中使用表单另存为位置保存工作表

> ID：15886130
> 
> 赞同：0
> 
> 时间：2013-04-08T18:19:23.333
> 
> 标签：excel, vba

好吧，我不是开发人员，而是 Excel 的普通用户，它会在工作时尝试自动化某些过程，所以请理解我的问题是否简单。

我只想要一个宏，当我运行宏时，它将允许我浏览计算机，以便我可以按照我喜欢的方向和文件名保存文件如果可能默认位置是工作簿的位置，只是为了保存时间

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:26:00.983

试试下面的代码：

```
Sub SaveAsDailog()

Application.DisplayAlerts = False
Dim filePath As Variant
filePath = Application.GetSaveAsFilename("abcd.xlsx", "Excel Files (*.xlsx), *.xlsx")

If VarType(filePath) = vbString Then
 ActiveWorkbook.SaveAs Filename:=filePath
End If

Application.DisplayAlerts = True
End Sub 
```

# facebook - FB.api query return empty result only on Firefox

> ID：15886132
> 
> 赞同：1
> 
> 时间：2013-04-08T18:19:28.463
> 
> 标签：facebook, facebook-graph-api, firefox, facebook-apps

Im using FB.api query to fetch a user friends list (that already using my app). This worked till today, now it continue to work in every browser but Firefox, in Firefox the response return "Unknown Error".

```
 FB.api({
    method: 'fql.query',
    query: 'SELECT uid,name FROM user WHERE has_added_app=1 AND uid IN (SELECT uid2 FROM friend WHERE uid1 = ' + user_facebook_id+ ')'
    }, function (response) {

    } 
```

I have noticed that facebook perform this http call:

`https://www.facebook.com/dialog/oauth?client_id=.....`

And its response is:

SECURITY WARNING: Please treat the URL above as you would your password and do not share it with anyone.

I guess that this problem is due to facebook api security update, my question is how to solve it and why it happens only in Firefox? Thanks!

# c++ - C ++：指数中的最后一位数字 - 错误答案

> ID：15886133
> 
> 赞同：0
> 
> 时间：2013-04-08T18:19:28.980
> 
> 标签：c++, algorithm

我正在尝试实现一个简单的程序，该程序采用基数和指数并输出求幂结果的最后一位，但在线法官说我的程序给出了错误的答案。有什么问题？

PS 程序的约束必须是 700 kb，这在这里不是问题（我可以删除空格和注释并使用单字母变量来避免该问题）

```
#include <iostream>

using namespace std;

int main()
{
    int t; // t - number of test cases
    cin >> t;
    cin.get();
    for (int i = 0; i < t; ++i)
    {
        int base, exp; // base - base, exp - exponent
        cin >> base >> exp;
        cin.get();

        if (exp == 0)
            cout << 1 << endl;

        else if (base % 10 == 0)
            cout << 0 << endl;

        else if (base % 10 == 1)
            cout << 1 << endl;

        else if (base % 10 == 5)
            cout << 5 << endl;

        else if (base % 10 == 6)
            cout << 6 << endl;

        else if (base % 10 == 2 || base % 10 == 3 || base % 10 == 7 || base % 10 == 8)
        {
            int pattern = exp % 4; // pattern repeats every 4th exponent
            int lastDigit = base; // lastDigit - result of program

            if (pattern == 0)
                pattern = 4;

            for (int i = 1; i < pattern; ++i)
                lastDigit = (lastDigit * base) % 10;

            cout << lastDigit << endl;
        }

        else if (base % 10 == 4 || base % 10 == 9)
        {
            int pattern = exp % 2; // pattern repeats every 2nd exponent
            int lastDigit = base; // lastDigit 0 result of program

            if (pattern == 0)
                pattern = 2;

            for (int i = 1; i < pattern; ++i)
                lastDigit = (lastDigit * base) % 10;

            cout << lastDigit << endl;
        }
    }
} 
```

这里是样品。

```
INPUT

3 10
6 2
7 3123123
0 1
1 0
0 0

OUTPUT

9
6
3
0
1
1 
```

提前致谢。

编辑：

原始问题：[http ://www.spoj.com/problems/LASTDIG/](http://www.spoj.com/problems/LASTDIG/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T19:21:04.723

这是错误的：

```
int lastDigit = base; // lastDigit - result of program 
```

您应该以 10 取模以获得最后一位数字。

您确实稍后会执行模数 10，但并非在所有情况下（当 for 循环不需要任何迭代时）。因此，在某些情况下，您的代码会输出一个多于一位的数字。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T18:28:17.943

`lastDigit * base`此代码在溢出时失败。

# cocos2d-iphone - Cocos2d - 在转换后运行一个块

> ID：15886137
> 
> 赞同：-1
> 
> 时间：2013-04-08T18:19:57.277
> 
> 标签：cocos2d-iphone

我有这个代码：

```
[[CCDirector sharedDirector] replaceScene:
 [CCTransitionProgressRadialCW transitionWithDuration:0.5f scene:scene2]]; 
```

有没有办法`CCCallBlock`在转换完成后调用 a ？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:25:38.617

不确定回调，但我相信 cocos 对象有

```
-(void)onEnterTransitionDidFinish {
} 
```

你可以使用它。

# ios - 禁用滚动的 UITableView 的行选择很差，闪烁

> ID：15886141
> 
> 赞同：0
> 
> 时间：2013-04-08T18:20:11.343
> 
> 标签：ios, uitableview, row, selection

我有一个 UITableView 作为 UIViewController 的实例变量，它也是 UITableViewDelegate 和 UITableViewDataSource。表格是固定的并且比屏幕高度短，所以滚动被禁用。如果您非常轻柔地对待行选择，则它会起作用 - 没有直接在行上滑动的牢固按压就可以了。

但是任何类型的快速点击、一些滑动或多点触控都会导致行闪烁，并且不会发送对 didSelectRowAtIndexPath 的调用。例如，如果第 0 行被选中并且当前突出显示，当您按下第 2 行时，它将突出显示，然后向下拖动到第 3 行，不会突出显示任何内容，并且在您抬起手指时，第 0 行会突出显示。

这可以改进吗？这是预期的行为吗？无论如何，故意拖动可能是有意取消，但快速点击是我宁愿捕捉的东西，而不是现在似乎正在做的事情。

这是我设置表格视图的代码：

```
tableView2 = [[UITableView alloc]initWithFrame:CGRectMake(self.view.frame.origin.x, self.view.frame.origin.y + HEADERANDFOOTERHEIGHT,
                                                          LEFTIMPORTWIDTH, self.view.frame.size.height - HEADERANDFOOTERHEIGHT * 2)];

[tableView2 setDataSource:self];
[tableView2 setDelegate:self];
tableView2.scrollEnabled = NO;
tableView2.exclusiveTouch = YES;
tableView2.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bkg_ptn_darkgraynoise.png"]];
[tableView2 setSeparatorStyle: UITableViewCellSeparatorStyleNone];
[tableView2 setRowHeight:52.0f];
[self.view addSubview:tableView2]; 
```

但我认为该代码中没有任何奇怪之处。我认为这只是我期望比默认行为更好的性能的一个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:36:52.850

最后，我将启用滚动。尽管菜单永远不需要滚动，但如果您不小心沿着菜单拖动手指，感觉会更直观。

如果我再次这样做，我可能会将其设为按钮列表而不是 UITableView，但这是一个相对较小的问题。

# forms - MS Access form -> Combox used to filter other combobox results

> ID：15886142
> 
> 赞同：0
> 
> 时间：2013-04-08T18:20:11.323
> 
> 标签：forms, vba, ms-access, drop-down-menu

I have a dropdown combo box in a form for a `"Project_ID"` called: `Combo28` (this is the primary key basically). There are also 5 other `"Error_Code"` combo boxes called: `cboErrCod1, cboErrCod2, cboErrCod3, cboErrCod4, cboErrCod5.`

I'm looking to create some sort of "On Change" code that will only display the Error Codes pertaining to the Project_ID selected in the Combo box `"Combo28"` only.

The error codes are stored in a separate table and each code is associate to a particular `project_Id.`

Can anyone help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:24:20.547

我不确定为什么你有五个错误代码组合框。要轻松完成此操作并让 access 为您完成所有工作，您可以：

答：有一个包含 project_ID 下拉列表的父表单。创建子表单（连续表单视图）。将记录源设置为您的错误代码和`Link to Master using Project_ID`

B：使用记录源创建一个子表单，`"Select ErrorCodes from yourTable WHERE Project_ID = [Forms]![yourForm]![combo28]` 其中 combo28 是您的 project_ID。在您的组合框的更新后事件中，调用`.requery`并且可能`.refresh`在您的子窗体上。

# php - How to use PHP templating features properly?

> ID：15886150
> 
> 赞同：1
> 
> 时间：2013-04-08T18:20:42.403
> 
> 标签：php, html, templates, view, reusability

Before i get to the point, let me introduce the context :) I've been working on the view layer of a MVC framwork i'm trying to develop. I've created several reusable views such as an accordion, a drop down menu, a text editor, a color picker, etc. Using this, i can do, for example :

```
<?php
$template = newView('Template');
$template->panel()->add(newView('Accordion')
    ->add('Accordion entry 1')
    ->add('Accordion entry 2')
    ->add('Accordion entry 3'));
$template->content()->add(newView('Block')
    ->add('Bla bla bla')
    ->add('Bla bla bla')
    ->add('Bla bla bla'));
echo $template;
?> 
```

And that sort of things. The problem is that, to be able to do that, i have to mix PHP and html code. For example : here is how i generate the HTML of a drop down menu :

```
public function __toString() {
    $output =
        '<nav'.$this->_getHeader().'>'.
            $this->_label.
            '<ul>';
    for($i = 0, $l = count($this->_entries), $last = $l - 1; $i < $l; ++$i) {
        if($i === 0) {
           $this->_entries[$i]->addClass('First');
        }
        elseif($i === $last) {
           $this->_entries[$i]->addClass('Last');
        }
        $output .= '<li>'.$this->_entries[$i].'</li>';
    }
    $output .=
            '</ul>'.
        '</nav>';
    return $output;
} 
```

A developper could easily design this by beautifying the code using Firebug or reading the PHP code, but a designer wouldn't like it. To solve this i would like to use the PHP templating system. This, for example, would be much more readable by a designer.

```
<table>
    <?php foreach($users as $user); ?>
    <tr>
        <td><?= $user->firstName ?></td>
        <td><?= $user->lastName  ?></td>
    </tr>
    <?php endforeach; ?>
</table> 
```

My problem is, how can i do, using the PHP templates, to create reusable views ? For example, imagine that i have a view representing a picture thumb with a picture and details about it. If i need to display a page containing 100 of them, how can i do ? Should i require the view 100 times ? Will it be executed / parsed / loaded from the damn slow disk 100 times ? I don't see how i could build some kind of "lego-style" view layer using the templaetes. Do you have any idea or even examples ?

Thanks for reading.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:44:43.470

为防止重复读取文件，您可以加载文件一次并将其内容保存到变量中。

重复行是视图的责任，不希望出现在模板本身内。

至于模板本身，我建议避免使用纯 PHP 模板，而使用带有变量/占位符的被动模板，如下所示：

```
<!-- table.tpl - Template for table. -->
<table>
{{rows}}
</table>

<!-- table-row.tpl - Template for table row. -->
<tr>
    <td>{{first_name}}</td>
    <td>{{last_name}}</td>
</tr> 
```

然后，您可以将模板变量替换为其所需的值。例如，在最简单的情况下（现实世界的模板当然更复杂）：

```
$tableTpl = file_get_contents('tpl_dir/table.tpl');
$rowTpl   = file_get_contents('tpl_dir/table-row.tpl');

$rows = array(
    array(
        'first_name' => 'Lorem',
        'last_name'  => 'Ipsum'
    ),
    array(
        'first_name' => 'Foo',
        'last_name'  => 'Bar'
    )
);

$rowsFrags = array();

// This loop can be moved to a method of a template engine class.
foreach ($rows as $row) {
    $names = array_keys($row);

    foreach ($names as &$name) {
        $name = '{{' . $name . '}}';
    }

    $rowsFrags[] = str_replace($names, array_values($row), $rowTpl);
}

$rowsCode  = implode("\n", $rowsFrags);
$tableCode = str_replace('{{rows}}', $rowsCode, $tableTpl);

echo $tableCode; 
```

# asp.net - Ninject ASP.NET extension throwing TypeLoadException

> ID：15886157
> 
> 赞同：2
> 
> 时间：2013-04-08T18:20:59.063
> 
> 标签：asp.net, webforms, ninject-3

I'm trying to use Ninject 3 in an ASP.NET webforms application. We've been using it without the Ninject.Web extension for a while by creating a new injection kernel everywhere we needed one. It didn't occur to me until now that that's not the right way to do things. I wrote a little test application that is successfully using Ninject.Web, but when I tried to do the same thing in our real application, I'm receiving a TypeLoadException as soon as the page loads. It doesn't even make it into my code where I can set a breakpoint. Here's the exception and stack trace:

> Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.
> 
> Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.
> 
> Exception Details: System.TypeLoadException: Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.
> 
> Source Error:
> 
> An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.
> 
> Stack Trace:
> 
> [TypeLoadException: Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'.]
> System.ModuleHandle.ResolveType(RuntimeModule module, Int32 typeToken, IntPtr* typeInstArgs, Int32 typeInstCount, IntPtr* methodInstArgs, Int32 methodInstCount, ObjectHandleOnStack type) +0
> System.ModuleHandle.ResolveTypeHandleInternal(RuntimeModule module, Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext) +525
> System.ModuleHandle.ResolveTypeHandle(Int32 typeToken, RuntimeTypeHandle[] typeInstantiationContext, RuntimeTypeHandle[] methodInstantiationContext) +19
> System.Reflection.RuntimeModule.ResolveType(Int32 metadataToken, Type[] genericTypeArguments, Type[] genericMethodArguments) +315
> System.Reflection.CustomAttribute.FilterCustomAttributeRecord(CustomAttributeRecord caRecord, MetadataImport scope, Assembly& lastAptcaOkAssembly, RuntimeModule decoratedModule, MetadataToken decoratedToken, RuntimeType attributeFilterType, Boolean mustBeInheritable, Object[] attributes, IList derivedAttributes, RuntimeType& attributeType, IRuntimeMethodInfo& ctor, Boolean& ctorHasParameters, Boolean& isVarArg) +208
> System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeModule decoratedModule, Int32 decoratedMetadataToken, Int32 pcaCount, RuntimeType attributeFilterType, Boolean mustBeInheritable, IList derivedAttributes, Boolean isDecoratedTargetSecurityTransparent) +1171 System.Reflection.CustomAttribute.GetCustomAttributes(RuntimeAssembly assembly, RuntimeType caType) +146
> WebActivator.AssemblyExtensions.GetActivationAttributes(Assembly assembly) +114
> WebActivator.ActivationManager.RunActivationMethods() +286
> WebActivator.ActivationManager.RunPreStartMethods() +38
> WebActivator.ActivationManager.Run() +56
> 
> [InvalidOperationException: The pre-application start initialization method Run on type WebActivator.ActivationManager threw an exception with the following error message: Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'..]
> System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1 methods) +11567502
> System.Web.Compilation.BuildManager.CallPreStartInitMethods() +465
> System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +1167
> 
> [HttpException (0x80004005): The pre-application start initialization method Run on type WebActivator.ActivationManager threw an exception with the following error message: Could not load type 'System.Runtime.CompilerServices.ExtensionAttribute' from assembly 'mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089'..]
> System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +11556592 System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +141 System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +4813333

None of my searching has turned up anything terribly helpful, but the main avenue I've explored is a potential conflict between the version of .NET that Ninject was built against and the version that I'm actually running. I've never installed .NET 4.5 on my system, so I'm certain that I'm building against 4.0\. I then built the most recent version of Ninject (3.0.2) and the extensions from source to be sure that it's using 4.0 as well. I also tried adding all the libraries that I'm using in the real app to my test app to see if there's a conflict but that didn't turn up anything. (However, I didn't go so far as to put in code that exercises them. I don't know if that would change anything.)

Has anyone seen this kind of problem before or have any ideas that I can try? Is there more info I can provide that would be helpful?

Alternatively, is there some other way I can use Ninject in an ASP.NET application instead of the ninject.web extension? Would wrapping the Ninject kernel up in a singleton work just as well?

# mysql - MySql 使用浮点数据类型来存储地理坐标

> ID：15886158
> 
> 赞同：5
> 
> 时间：2013-04-08T18:21:03.067
> 
> 标签：mysql, google-maps, geolocation

我有一个存储经度和纬度坐标的表（谷歌地图）我将列定义为**浮点**但是当我尝试插入值 -61.45859899999999 和 10.28289 时，它们被四舍五入为 -61.46 和 10.30。如何修改列以按原样保存数据。

我正在使用**mysql 蟾蜍**。下面是表格的代码：

```
CREATE TABLE `tblGeoCodes` (
  `recNo` int(11) NOT NULL AUTO_INCREMENT,
  `longLocation` float(30,2) DEFAULT NULL,
  `latLocation` float(30,2) DEFAULT NULL 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-08T18:35:18.627

您的实施存在两个问题。

值都被舍入到 2 位精度的原因是您明确将比例定义为 2。

此外，FLOAT 在 MySQL 中是一种不精确的数据类型。

要解决这两个问题，您应该使用具有适当精度和比例的 DECIMAL 数据类型。

例如，像这样：

```
CREATE TABLE `tblGeoCodes` (
  `recNo` int(11) NOT NULL AUTO_INCREMENT primary key,
  `longLocation` decimal(18,14) DEFAULT NULL,
  `latLocation` decimal(18,14) DEFAULT NULL
); 
```

例子：

```
mysql> CREATE TABLE `tblGeoCodes` (
    ->   `recNo` int(11) NOT NULL AUTO_INCREMENT primary key,
    ->   `longLocation` decimal(18,14) DEFAULT NULL,
    ->   `latLocation` decimal(18,14) DEFAULT NULL
    -> ); 
Query OK, 0 rows affected (0.02 sec)

mysql> 
mysql> insert into tblGeoCodes (longLocation,latLocation) values(-61.45859899999999 , 10.28289);
Query OK, 1 row affected (0.00 sec)

mysql> 
mysql> select * from tblGeoCodes;
+-------+--------------------+-------------------+
| recNo | longLocation       | latLocation       |
+-------+--------------------+-------------------+
|     1 | -61.45859899999999 | 10.28289000000000 |
+-------+--------------------+-------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T18:37:25.887

`,2`in `float(30,2)`代表 2 位小数。我使用`float(10,6)`它，因为这足以容纳坐标

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:28:29.537

我建议转换为 MISAM 以利用 GS [​​I](http://dev.mysql.com/doc/refman/5.1/en/creating-spatial-indexes.html)。它更适合该目的并且应该表现更好。

然而，正如已经建议的那样，提高浮点字段的精度可能是一个更简单的解决方案。由于您已将问题标记为 google-maps releted，因此我还建议您在 Google 的开发站点上使用[本教程。](https://developers.google.com/maps/articles/phpsqlsearch_v3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T09:52:23.347

请记住，`FLOAT(10,6)`这没有任何意义，这为整数部分保留了 4 位数字。

就个人而言，我更喜欢，`DOUBLE(9,6)`但您可能会使用它`FLOAT`来节省 4 个额外的字节。

# xpath - How can I shorten this xpath expression?

> ID：15886162
> 
> 赞同：1
> 
> 时间：2013-04-08T18:21:15.547
> 
> 标签：xpath, set, expression

I have defined a variable called tags which selects a node set of elements whose names are one of several values:

```
<xsl:variable name="tags" select="//xs:element[@name='Subscription' or @name='Account' or @name='Product'  or @name='ProductRatePlan' or @name='ProductRatePlanCharge' or @name='Usage']"/> 
```

I would like to define a variable as such:

```
<xsl:variable name="tagNames" select="'Subscription','Account','Product','ProductRatePlan','ProductRatePlanCharge','Usage'/> 
```

How could I rewrite the first expression to select all the nodes whose names are in the set $tagNames? In essence, I'm looking for an operation that is analagous to a SQL set membership:

```
SELECT * FROM tags WHERE name in ('Subscription', 'Account', 'Product'....) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:00:26.683

在 XPath 2.0 中，您可以编写：

```
<xsl:variable name="tags" select="//xs:element[@name=('Subscription','Account','Product','ProductRatePlan','ProductRatePlanCharge','Usage')]"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T04:02:47.890

**一种方法**：

```
//xs:element
  [contains('|Subscription|Account|Product|ProductRatePlan|ProductRatePlanCharge|Usage|',
            concat('|', @name, '|'))] 
```

**所以，你可以有一个变量或参数**：

```
<xsl:variable name="vTags"
 select="'|Subscription|Account|Product|ProductRatePlan|ProductRatePlanCharge|Usage|'"/> 
```

**并且您的主要 XPath 表达式变为**：

```
//xs:element[contains($vTags, concat('|', @name, '|'))] 
```

# php - 计算两个日期之间的星期日

> ID：15886166
> 
> 赞同：5
> 
> 时间：2013-04-08T18:21:19.530
> 
> 标签：php, time

我想计算给定两个日期之间的所有星期日。我尝试了以下代码。如果天数较少但如果我输入更多天数，它工作正常。它继续处理并且最大执行时间超过了我更改的时间，但它甚至继续处理，即使执行时间为 200 秒。

代码是

```
<?php
$one="2013-01-01";
$two="2013-02-30";

$no=0;
for($i=$one;$i<=$two;$i++)
{

    $day=date("N",strtotime($i));
    if($day==7)
    {
    $no++;
    }
}
echo $no;

?> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-08T19:16:50.693

约翰康德的回答是正确的，但这里有一个更有效和数学的解决方案：

```
$start = new DateTime('2013-01-06');
$end = new DateTime('2013-01-20');
$days = $start->diff($end, true)->days;

$sundays = intval($days / 7) + ($start->format('N') + $days % 7 >= 7);

echo $sundays; 
```

让我为你分解一下。

```
$start = new DateTime('2013-01-06');
$end = new DateTime('2013-01-20'); 
```

首先，创建一些[DateTime](http://www.php.net/manual/en/datetime.diff.php)对象，它们是功能强大的内置 PHP 对象，专门用于解决此类问题。

```
$days = $start->diff($end, true)->days; 
```

接下来，使用[DateTime::diff](http://www.php.net/manual/en/datetime.diff.php)求出 from `$start`to的差异`$end`（此处作为第二个参数传递`true`可确保该值始终为正），并获取它们之间的天数。

```
$sundays = intval($days / 7) + ($start->format('N') + $days % 7 >= 7); 
```

大的来了——但它并没有那么复杂，真的。首先，我们知道每个星期都有一个星期日，所以我们至少有`$days / 7`星期日开始，用 向下舍入到最接近`int`的值`intval`。

最重要的是，在不到一周的时间内可能会有一个星期天；例如，周五到下周的周一包含 4 天；其中之一是星期天。所以，根据我们开始和结束的时间，可能会有另一个。这很容易解释：

*   `$start->format('N')`（参见[DateTime::format](http://php.net/manual/en/datetime.format.php)）为我们提供了*[ISO-8601](http://en.wikipedia.org/wiki/ISO_8601)*星期几作为开始日期，它是一个从 1 到 7 的数字（1 是星期一，7 是星期日）。
*   `$days % 7`给我们剩余的天数，这些天数没有均匀地划分为几周。

如果我们的开始日和剩余天数加起来是 7 天或更多，那么我们就到了星期天。知道了这一点，我们只需要添加那个表达式，它会告诉我们`1`它是真还是`0`假，因为我们将它添加到一个`int`值中。

你有它！这种方法的优点是它不需要在给定时间之间每天迭代并检查是否是星期天，这将为您节省大量计算量，而且它会让您看起来非常聪明。希望有帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-08T18:26:16.950

```
<?php
$no = 0;
$start = new DateTime('2013-01-01');
$end   = new DateTime('2013-04-30');
$interval = DateInterval::createFromDateString('1 day');
$period = new DatePeriod($start, $interval, $end);
foreach ($period as $dt)
{
    if ($dt->format('N') == 7)
    {
        $no++;
    }
}
echo $no; 
```

[看到它在行动](https://3v4l.org/1fi4u)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-08T09:51:11.723

如果您希望星期天在特定日期范围内，这是一个解决方案。

```
function dateRange($begin, $end, $interval = null)
{
  $begin = new DateTime($begin);
  $end = new DateTime($end);

  $end = $end->modify('+1 day');
  $interval = new DateInterval($interval ? $interval : 'P1D');

  return iterator_to_array(new DatePeriod($begin, $interval, $end));
}

/* define date range */
$dates = dateRange('2018-03-01', '2018-03-31');

/* define weekdays */
$weekends = array_filter($dates, function ($date) {
  $day = $date->format("N");
  return $day === '6' || $day === '7';
});

/* weekdays output */
foreach ($weekends as $date) {
  echo $date->format("D Y-m-d") . "</br>";
}

/* define sundays */
$sundays = array_filter($dates, function ($date) {
  return $date->format("N") === '7';
});

/* sundays output */
foreach ($sundays as $date) {
echo $date->format("D Y-m-d") . "</br>";
}

/* define mondays */
$mondays = array_filter($dates, function ($date) {
 return $date->format("N") === '1';
});

/* mondays output */
foreach ($mondays as $date) {
echo $date->format("D Y-m-d") . "</br>";
} 
```

只需在输出中更改您想要的任何天数：

```
Monday = 1
Tuesday = 2
Wednesday = 3
Thursday = 4
Friday = 5
Saturday = 6
Sunday = 7 
```

# java - Getting the path of folder when a file is pasted into it

> ID：15886167
> 
> 赞同：0
> 
> 时间：2013-04-08T18:21:22.707
> 
> 标签：java

How to generate an event when the paste option(while copying a file) is selected in some folder, in which that event should get the path of that folder where the paste option is being selected.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:29:31.207

此代码监视添加、删除或修改文件的目录：

```
Path testDirectory = Files.createTempDirectory( getClass().getName());
WatchService watcher = FileSystems.getDefault().newWatchService();
testDirectory.register( watcher,
    StandardWatchEventKinds.ENTRY_CREATE, 
    StandardWatchEventKinds.ENTRY_MODIFY, 
    StandardWatchEventKinds.ENTRY_DELETE );
for(;;) {
   WatchKey key = watcher.take();
   log( "key = watcher.take()" );
   if( key.isValid()) {
      log( "key.isValid()" );
      List< WatchEvent< ? >> lst = key.pollEvents();
      for( WatchEvent<?> e : lst ) {
         log( "WatchEvent polled: " + e.kind() + ": " + e.context());
         if( e.kind() == StandardWatchEventKinds.ENTRY_CREATE ) {
            Path path = (Path)e.context();
            File file = path.toFile();
            addFile( new File( testDirectory.toFile(), file.getPath()));
         }
         else if( e.kind() == StandardWatchEventKinds.ENTRY_DELETE ) {
            Path path = (Path)e.context();
            File file = path.toFile();
            removeFile( new File( testDirectory.toFile(), file.getPath()));
         }
      }
      key.reset();
   }
} 
```

这段代码涉及的类有：

*   [小路](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)
*   [观察服务](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)
*   [标准观察事件种类](http://docs.oracle.com/javase/7/docs/api/java/nio/file/StandardWatchEventKinds.html)

[io 教程的这一部分](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)展示了更多内容并解释了这个 API 的动机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:35:33.303

[这](http://docs.oracle.com/javase/tutorial/essential/io/examples/WatchDir.java)是所需的Java 教程。 `java.nio.file`包提供了一个文件更改通知 API，称为 Watch Service API。此 API 使您能够向监视服务注册一个（或多个目录）。注册时，您告诉服务您感兴趣的事件类型：文件创建、文件删除或文件修改

更多关于它[的信息](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)。

# android - Cordova 2.xx 插件程序

> ID：15886177
> 
> 赞同：-1
> 
> 时间：2013-04-08T18:21:47.690
> 
> 标签：android, cordova, sequence, procedure

我不太了解cordova插件程序。我发现它可以通过 Cordova Webview 工作，但我不知道哪些函数和类是必需的。

如果有人有时间解释它会很棒，序列图将是最好的理解。

问候，库尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:08:33.323

这可能有助于您了解更多：

> ## [使用 Web 视图](http://android-developers.blogspot.in/2008/09/using-webviews.html)
> 
> WebView 使用与浏览器相同的呈现和 JavaScript 引擎，但它在您的应用程序的控制下运行。WebView 可以是全屏的，也可以与其他 View 混合使用。WebView 的内容可以来自任何地方。WebView 可以从 Web 下载内容，也可以来自存储在资产目录中的本地文件。内容甚至可以由您的应用程序代码动态生成。

和

> ## [Android WebView、Javascript 和 CSS](http://techdroid.kbeanie.com/2010/10/android-webview-javascript-and-css.html)
> 
> 我遇到过一些必须使用 WebView 来显示一些 HTML 内容的情况。显示 HTML 内容非常简单。但是当涉及到控制 web 视图时，它会变得有点复杂。诸如显示警报、操作 div 和控制活动（关闭/完成）之类的事情。这个例子展示了一些技术，可以让你在 WebView 中使用 Javascript 和 CSS。

# c# - 单击菜单项后返回母版页？

> ID：15886181
> 
> 赞同：0
> 
> 时间：2013-04-08T18:21:57.207
> 
> 标签：c#, asp.net

我有一个母版页，其中有菜单列表。当我点击任何菜单项时，我的整个页面都会被回复。我不希望这种情况发生。相反，我只想要需要刷新/更改的内容。

对上述问题有任何快速/简单的解决方案吗？

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:27:10.920

您将需要利用[`UpdatePanel`](http://msdn.microsoft.com/en-us/library/bb386454%28v=VS.100%29.aspx). 我无法在这里建立一个可行的示例，但该链接将引导您完成详尽的解释。这将使您可以简单地更新需要更改的内容，而不是整个页面。我不能在这里建立一个例子的另一个非常明显的原因是因为你的问题没有包含足够的信息来做到这一点。

# jquery - 如何拉取和显示父div

> ID：15886183
> 
> 赞同：0
> 
> 时间：2013-04-08T18:22:03.163
> 
> 标签：jquery, html, dom

我是一个 jQuery 菜鸟。我想遍历一个 html 类列表，并为每个类显示父 div 的名称。具体来说，我想遍历下面的 food_type 类并显示每个类的父 ID（例如，'chicken'）。所以像这样的事情......

```
$(".food_type").each(function() {
      alert(...)

  <div id="chicken">
      <div class="kg"></div>
      <div class="food_type">100</div>
      <div class="label">Chicken</div>
  </div>

 <div id="eggs">
    <div class="kg"></div>
    <div class="food_type">100</div>
    <div class="label">Eggs</div>
  </div>

  <div id="pork">
    <div class="kg"></div>
    <div class="food_type">100</div>
    <div class="label">Pork</div>
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:23:11.847

在`each`方法内部，`this`关键字与被迭代的元素有关。所以你将它包装到一个 jQuery 对象中（通过做`$(this)`）并得到它的`parent`. 最后，你得到了父母的`id`属性。把它们放在一起，你就有了：

```
$(".food_type").each(function() {
    alert($(this).parent().attr("id"));
} 
```

进一步阅读：

*   [http://api.jquery.com/each/](http://api.jquery.com/each/)
*   [http://api.jquery.com/parent/](http://api.jquery.com/parent/)
*   [http://api.jquery.com/attr/](http://api.jquery.com/attr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:23:19.653

尝试

```
$(".food_type").each(function() {
  alert($(this).parent().attr("id"));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:23:46.167

```
$(".food_type").each(function() {
    alert($(this).parent().prop("id"));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T18:24:09.030

你可以做：

```
$(".food_type").each(function() {
    alert($(this).parent().attr("id"));
} 
```

`parent()`获取元素的父元素，并`attr("id")`获取元素的 ID。`each`只是遍历由 . 生成的数组`$(".food_type")`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T18:25:41.087

```
$(".food_type").each(function() {
      var category = $(this).parent().attr('id');
}); 
```

# java - c++ 来自 java 应用程序打包在一个 jar 文件中

> ID：15886192
> 
> 赞同：1
> 
> 时间：2013-04-08T18:22:43.977
> 
> 标签：java, c++, jar

我想从java应用程序调用一个c++程序，打包在一个jar文件中。是否可以从jar文件中打包和调用c++？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:25:29.213

从 Java 调用 C++ 函数，您需要阅读有关[JNI](http://en.wikipedia.org/wiki/Java_Native_Interface)的信息。

导出的 C++ 函数将存储在动态库中，例如`.dll`(Windows) 或`.so`(Linux) 文件。

然后尝试将该`.dll`文件打包到 jar 文件中（[阅读此](https://stackoverflow.com/questions/1611357/how-to-make-a-jar-file-that-include-dll-files)内容）。

# javascript - Jquery Datatables 在表单发布后填充

> ID：15886197
> 
> 赞同：4
> 
> 时间：2013-04-08T18:22:55.200
> 
> 标签：javascript, jquery, html, datatables

我正在尝试使用一些参数并基于我要填充数据表的参数进行表单提交（POST）。但我不太擅长 Javascript（我的语言是 Java），所以我试图通过 Ajax 调用来做到这一点。但这对我不起作用。一切都对我有用，除了对 servlet 进行带有参数的 POST。数据表总是自动填充，但它应该在表单提交后填充。

有人知道我的例子吗？我在这里阅读了很多表单帖子和教程，但没有一个案例（？）。

我的代码现在如下，这对我有用。除了我不能再在这个表中排序或搜索。什么不见​​了？

谢谢你。

```
<script type="text/javascript" language="javascript" src="/global/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" language="javascript" src="/global/js/jquery.dataTables.min.js"></script>

<form name="myform" id="myform" action="" method="POST">  
  <label for="season">Season:</label>  
  <input type="text" name="season" id="season" value=""/> <br />
  <label for="type">Type:</label>  
  <input type="text" name="type" id="type" value=""/> <br/>
  <input type="button" id="btnSubmit" name="btnSubmit" value="Search"> 
</form>

<table class="display" id="example">
  <thead>
    <tr>
      <th>Name</th>
      <th>NationId</th>
      <th>RegionId</th>
      <th>Attendance</th>
    </tr>
  </thead>
  <tbody>
    <!-- data goes here -->
  </tbody>
</table>

<script>
  $("#btnSubmit").click( function() {
    var formData = "season=" + $("input#season").val() + "&type=" + $("input#type").val();
    $('#example').dataTable( {
      "bJQueryUI": true,
      "bProcessing": true,
      "bDestroy": true,
      "sAjaxSource": "/servlets/service/competitions/",
      "fnServerData": function ( sSource, aoData, fnCallback, oSettings ) {
        oSettings.jqXHR = ${esc.d}.ajax( {
          "dataType": 'json',
          "type": "POST",
          "url": sSource,
          "data": formData,
          "success": fnCallback
          } );
      }
    } );
  } );
</script> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T21:40:58.103

好的，这是您问题的完整答案

你需要做三个事件，第一个加载数据表中的数据库信息，第二个事件插入数据库中的新信息，第三个刷新数据表内容。

```
<html>
<head>
<script type="text/javascript" language="javascript" src="/global/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" language="javascript" src="/global/js/jquery.dataTables.min.js"></script>
<script type="text/javascript">
//Global variables 
var otable;
var dataTab;
$(document).ready(function () {
    chargeData();
    $('#btnSubmit').click(function () {
       insertData();
    });   
}); 

// 1\. charge all data 
function chargeData() {
    $.ajax({
        type: "POST",
        //create a method for search the data and show in datatable
        url: "/servlets/service/competitions/",
        contentType: "application/json; charset=utf-8",
        data: '{ }',
        dataType: "json",
        success: AjaxGetFieldDataSucceeded,
        error: AjaxGetFieldDataFailed
    });
}

function AjaxGetFieldDataSucceeded(result) {
    if (result != "[]") {

        dataTab = $.parseJSON(result);
        //instance of datatable
        oTable = $('#example').dataTable({
            "bProcessing": true,
            "aaData": dataTab,
            //important  -- headers of the json
            "aoColumns": [{ "mDataProp": "season" }, { "mDataProp": "type" }],
            "sPaginationType": "full_numbers",
            "aaSorting": [[0, "asc"]],
            "bJQueryUI": true,

        });

    }
}

function AjaxGetFieldDataFailed(result) {
    alert(result.status + ' ' + result.statusText);
}

// 2\. this function only insert the data in your database
function insertData() {
    var email = $("#season").val();
    var evento = $("#type").val();
    $.ajax({
        type: "POST",
        //in this method insert the data in your database
        url: "/servlets/service/competitions/",
        contentType: "application/json; charset=utf-8",
        data: '{ season : "' + season + '", type : "' + type + '"}',
        dataType: "json",
        success: AjaxUpdateDataSucceeded,
        error: AjaxUpdateDataFailed
    });
}

function AjaxUpdateDataSucceeded(result) {
    if (result != "[]") {
        alert("update ok");
        refreshDatatable();
    }
}

function AjaxUpdateDataFailed(result) {
    alert(result.status + ' ' + result.statusText);
}

// 3\. This function refresh only the datatable not all page  in varius events you can call like INSERT,UPDATE,DELETE ;D
function refreshDatatable() {
    $.ajax({
        type: "POST",
        //same event used in chargeData function
        url: "/servlets/service/competitions/",
        contentType: "application/json; charset=utf-8",
        data: '{ }',
        dataType: "json",
        success: AjaxRefreshDataSucceeded,
        error: AjaxRefreshDataFailed
    });
}

function AjaxRefreshDataSucceeded(result) {
    if (result.d != "[]") {
        var jposts = result;
        dataTab = $.parseJSON(jposts);
        //when the instance of datatable exists, only pass the data :D
        oTable.fnClearTable();
        oTable.fnAddData(dataTab);
    }
}

function AjaxRefreshDataFailed(result) {
    alert(result.status + ' ' + result.statusText);
}

<script>
</head>
<body>
<form name="myform" id="myform" action="">  
  <label for="season">Season:</label>  
  <input type="text" name="season" id="season" value=""/> <br />
  <label for="type">Type:</label>  
  <input type="text" name="type" id="type" value=""/> <br/>
  <input type="button" id="btnSubmit" name="btnSubmit" value="Search"> 
</form>

<table class="display" id="example">
  <thead>
    <tr>
      <th>SEASON</th>
      <th>TYPE</th>
    </tr>
  </thead>
  <tbody>
    <!-- data goes here -->
  </tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:36:04.717

这里数据在 ajax 函数中作为 string(formData) 传递，默认情况下 ajax 期望 json 对象。在字符串中传递数据可以通过两种方式完成

1) 将生成的查询字符串附加到 url

```
 oSettings.jqXHR = ${esc.d}.ajax( {
           "dataType": 'json',
           "type": "POST",
           "url": sSource + "?" + formData, /*  here url need be proper, as url can have some query string params in that case it shoukd be join with "&" not "?" */
           /* "data": formData, no need to have data config then */
           "success": fnCallback,
           "processData": false
          } ); 
```

2) 当数据已经序列化为字符串时，在 ajax 中将 processData 标志设置为 false

```
oSettings.jqXHR = ${esc.d}.ajax( {
          "dataType": 'json',
          "type": "POST",
          "url": sSource,
          "data": formData,
          "success": fnCallback,
          "processData": false
          } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T08:52:38.117

我有和你一样的功能。我处理事情的方式有点不同。

我做什么 ...

```
<input type="text" id="searchCondition"/>

<div id="container">
  <div id="ajaxDataTable"></div> 
</div> 
```

在 document.ready 上，我调用 ajax 函数来获取将 searchCondition 的值传递给我的 servlet 的数据表。结果（这只是表）放在 ajaxDataTable div 中。ajax 命令成功后，我对数据表进行正常初始化。

现在在任何搜索中，我都会调用相同的 ajax 命令并再次传递搜索条件。

对我来说很好！

# groovy - 播放框架 1.2.5 中的 for 循环（groovy 模板）

> ID：15886208
> 
> 赞同：0
> 
> 时间：2013-04-08T18:23:34.607
> 
> 标签：groovy, playframework-1.x

我正在使用以下代码将 for 循环与列表一起使用（我也熟悉下面复制的其他语法）。第一个 for 循环对我不起作用，即使它是相同的列表。关于如何解决此问题的任何想法：

```
#{list items:0..items.size(), as:'item'}${item}#{/list}  //Not Working - I have tried moving the items.size out of the loop as well but it has not worked for me 
```

这适用于相同的列表：

```
#{list items, as:'item'}${item}#{/list} 
```

任何想法/建议为什么？提前致谢。

编辑：该列表是用户定义实例的列表（主要包含字符串和整数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:21:55.630

语法不正确，items 参数需要一个可迭代的并且你给它一个整数，如果你需要一个索引你可以使用 item_index 变量

# java - 当 Javadoc 标记不完整时，Maven 无法在 Java 8 中运行

> ID：15886209
> 
> 赞同：334
> 
> 时间：2013-04-08T18:23:36.573
> 
> 标签：java, maven, migration, java-8, javadoc

由于我使用 Maven，我已经能够在我的本地存储库中构建和安装具有不完整 Javadoc 标记（例如，缺少参数）的项目。

但是，由于我迁移到 Java 8 (1.8.0-ea-b90)，当我尝试构建或安装一个没有 Javadoc 的项目时，Maven 对缺少文档标签非常严格，并且会向我显示许多与 Javadoc 问题相关的 Javadoc 错误“完美的”。我尝试在本地存储库中编译和安装的一些项目是我无法控制的第三方项目。因此，在我的场景中，仅修复所有这些项目中的所有 Javadocs 的解决方法似乎并不可行。

这是我在项目中执行时看到的一小部分输出`mvn clean package install`：

```
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 9.026s
[INFO] Finished at: Mon Apr 08 21:06:17 CEST 2013
[INFO] Final Memory: 27M/437M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:2.9:jar (attach-javadocs) on project jpc: MavenReportException: Error while creating archive:
[ERROR] Exit code: 1 - /Users/sergioc/Documents/workspaces/heal/jpc/src/main/java/org/jpc/engine/prolog/PrologDatabase.java:10: error: @param name not found
[ERROR] * @param terms the terms to assert
[ERROR] ^
[ERROR] /Users/sergioc/Documents/workspaces/heal/jpc/src/main/java/org/jpc/engine/prolog/PrologDatabase.java:11: warning: no description for @return
[ERROR] * @return
[ERROR] ^ 
```

Javadoc Maven 插件在我的 POM 中是这样配置的：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.9</version>
    <executions>
        <execution>
            <id>attach-javadocs</id>
            <goals>
                <goal>jar</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

正如我之前所说，如果我回到 Java 7，一切都会正常工作。也许这是与在 Java 8 中运行的 Maven 相关的错误？我如何使用 Java 8 使其工作（即，能够构建项目的 Javadoc 并将其代码安装在我的本地存储库中）？我已经在 OSX 中测试了 Maven 3.0.3 和 3.0.5。

**更新：**

`<failOnError>false</failOnError>`如果我用（感谢 Martin）更改我的 Javadoc 插件配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.9</version>
    <executions>
        <execution>
            <id>attach-javadocs</id>
            <goals>
                <goal>jar</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

然后该项目安装在我的本地存储库中。但是，仍然没有生成 Javadoc JAR。

我在控制台中看到的带有这个新配置的输出片段是：

> [错误] MavenReportException：创建存档时出错：退出代码：1 - /Users/....java:18：警告：没有@param ...命令行是：/Library/Java/Home/bin/javadoc @options @packages
> 
> 请参阅“/Users/sergioc/Documents/workspaces/heal/minitoolbox/target/apidocs”目录中生成的 Javadoc 文件。
> 
> 在 org.apache.maven.plugin.javadoc.AbstractJavadocMojo.executeJavadocCommandLine(AbstractJavadocMojo.java:5043) 在 org.apache.maven.plugin.javadoc.AbstractJavadocMojo.executeReport(AbstractJavadocMojo.java:1990) 在 org.apache.maven.plugin .javadoc.JavadocJar.execute(JavadocJar.java:181) 在 org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101) 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java :209) 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145) 在 org.apache. org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)。 maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84) 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder。buildProject(LifecycleModuleBuilder.java:59) at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183) at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)在 org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320) 在 org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156) 在 org.apache.maven.cli.MavenCli.execute(MavenCli.java :537) 在 org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196) 在 org.apache.maven.cli.MavenCli.main(MavenCli.java:141) 在 sun.reflect.NativeMethodAccessorImpl.invoke0( Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method。在 org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230) 的 org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290) 调用(Method.java:491)在 org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409) 在 org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)

关于如何在使用 Java 7 时一步构建源代码、安装项目和生成 Javadoc JAR 的任何解决方法？

* * *

## 回答 #1

> 赞同：411
> 
> 时间：2013-05-24T20:28:39.100

最好的解决方案是修复 javadoc 错误。如果由于某种原因不可能（即：自动生成的源代码），那么您可以禁用此检查。

[DocLint 是 Java 8 中的一个新特性，](http://openjdk.java.net/jeps/172)总结如下：

> 提供一种在开发周期早期检测 Javadoc 注释中的错误的方法，并且可以轻松链接回源代码。

这是默认启用的，并且会在生成 Javadocs 之前运行大量检查。[您需要按照此线程](http://mail.openjdk.java.net/pipermail/build-infra-dev/2013-January/002899.html)中的指定为 Java 8 关闭此功能。您必须将其添加到您的 Maven 配置中：

```
<profiles>
  <profile>
    <id>java8-doclint-disabled</id>
    <activation>
      <jdk>[1.8,)</jdk>
    </activation>
    <properties>
      <javadoc.opts>-Xdoclint:none</javadoc.opts>
    </properties>
  </profile>
</profiles>
<build>
  <plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>2.9</version>
        <executions>
            <execution>
                <id>attach-javadocs</id>
                <goals>
                    <goal>jar</goal>
                </goals>
                <configuration>
                    <additionalparam>${javadoc.opts}</additionalparam>
                </configuration>
            </execution>
        </executions>
    </plugin>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-site-plugin</artifactId>
        <version>3.3</version>
        <configuration>
          <reportPlugins>
            <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-javadoc-plugin</artifactId>
              <configuration>
                <additionalparam>${javadoc.opts}</additionalparam>
              </configuration>
            </plugin>
          </reportPlugins>
        </configuration>
      </plugin>
   </plugins>
</build> 
```

**对于 maven-javadoc-plugin 3.0.0+：** 替换

```
<additionalparam>-Xdoclint:none</additionalparam> 
```

和

```
<doclint>none</doclint> 
```

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2014-03-10T09:16:28.093

使用 java 8 和 java 7 的最简单方法是在构建中使用配置文件：

```
<profiles>
  <profile>
    <id>doclint-java8-disable</id>
    <activation>
      <jdk>[1.8,)</jdk>
    </activation>

    <build>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-javadoc-plugin</artifactId>
          <configuration>
            <additionalparam>-Xdoclint:none</additionalparam>
          </configuration>
        </plugin>
      </plugins>
    </build>
  </profile>
</profiles> 
```

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2014-11-07T16:50:54.023

这是我知道忽略doclint警告的最简洁的方法，无论使用什么java版本。无需在多个配置文件中复制插件配置，只需稍作修改。

```
<profiles>
  <profile>
    <id>doclint-java8-disable</id>
    <activation>
      <jdk>[1.8,)</jdk>
    </activation>
    <properties>
      <javadoc.opts>-Xdoclint:none</javadoc.opts>
    </properties>
  </profile>
</profiles>

<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-javadoc-plugin</artifactId>
      <version>2.9.1</version>
      <executions>
        <execution>
          <id>attach-javadocs</id> <!-- The actual id should be apparent from maven output -->
          <configuration>
            <additionalparam>${javadoc.opts}</additionalparam>
          </configuration>
        </execution>
      </executions>
    </plugin>
    ...
  </plugins>
</build> 
```

在 oracle/open jdk 6、7、8 和 11 上测试。

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2016-01-04T12:46:43.133

# 适用于任何 Java 版本的最短解决方案：

```
<profiles>
    <profile>
        <id>disable-java8-doclint</id>
        <activation>
            <jdk>[1.8,)</jdk>
        </activation>
        <properties>
            <additionalparam>-Xdoclint:none</additionalparam>
        </properties>
    </profile>
</profiles> 
```

只需将其添加到您的 POM 中，您就可以开始使用了。

这基本上是[@ankon 的回答](https://stackoverflow.com/a/22296107/2352699)加上@zapp 的[回答](https://stackoverflow.com/a/30274114/2352699)。

* * *

### 对于 maven-javadoc-plugin 3.0.0 用户：

代替

`<additionalparam>-Xdoclint:none</additionalparam>`

经过

`<doclint>none</doclint>`

* * *

## 回答 #5

> 赞同：38
> 
> 时间：2015-05-16T09:44:13.407

添加到 pom 文件中的全局属性部分：

```
<project>
    ...
    <properties>
        <additionalparam>-Xdoclint:none</additionalparam>
    </properties> 
```

其他答案中提供的通用解决方案（在插件部分添加该属性）由于某种原因不起作用。只有通过全局设置，我才能成功构建 javadoc jar。

* * *

## 回答 #6

> 赞同：33
> 
> 时间：2016-01-15T11:15:18.547

我不认为仅仅关闭 DocLint 是一个好的解决方案，至少不是长期的。好在 Javadoc 变得更严格了，所以解决构建问题的正确方法是**解决底层问题**。是的，您最终需要修复这些源代码文件。

以下是您之前可以避免的需要注意的事项：

*   格式错误的 HTML（例如缺少结束标记、未转义的括号等）
*   无效`{@link }`的 （类似的标签也是如此，例如`@see`）
*   无效`@author`值。这曾经被接受：`@author John <john.doe@mine.com>`但由于未转义的括号而不再如此。
*   Javadoc 中的 HTML 表格现在需要摘要或标题。请参阅[此问题](https://stackoverflow.com/q/22528767/1504556)以获取解释。

您只需修复您的源代码文件并继续构建您的 Javadoc，直到它可以构建而不会失败。是的，很麻烦，但我个人喜欢将我的项目提升到 DocLint 级别，因为这意味着我可以更加确信我生成的 Javadoc 确实是我想要的。

如果您在一些您自己没有生成的源代码上生成 Javadoc，例如因为它来自一些代码生成器，例如[wsimport](http://docs.oracle.com/javase/8/docs/technotes/tools/index.html#webservices) ，那么当然会出现问题。奇怪的是，Oracle 在实际发布 JDK8 之前并没有为 JDK8 合规性准备自己的工具。似乎[直到 Java 9 才会修复](http://openjdk.java.net/jeps/212)。仅在这种特殊情况下，我建议关闭本页其他地方记录的 DocLint。

* * *

## 回答 #7

> 赞同：31
> 
> 时间：2014-04-10T07:15:30.820

仅覆盖`maven-javadoc-plugin`配置，不能解决问题`mvn site`（例如在发布阶段使用）。这是我必须做的：

```
<profile>
  <id>doclint-java8-disable</id>
  <activation>
    <jdk>[1.8,)</jdk>
  </activation>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <configuration>
          <additionalparam>-Xdoclint:none</additionalparam>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-site-plugin</artifactId>
        <version>3.3</version>
        <configuration>
          <reportPlugins>
            <plugin>
              <groupId>org.apache.maven.plugins</groupId>
              <artifactId>maven-javadoc-plugin</artifactId>
              <configuration>
                <additionalparam>-Xdoclint:none</additionalparam>
              </configuration>
            </plugin>
          </reportPlugins>
        </configuration>
      </plugin>
    </plugins>
  </build>
</profile> 
```

* * *

## 回答 #8

> 赞同：25
> 
> 时间：2013-05-22T20:07:53.140

您可以尝试将`failOnError`属性（请参阅[插件文档](http://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html#failOnError)）设置为`false`：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>2.9</version>
    <executions>
        <execution>
            <id>attach-javadocs</id>
            <goals>
                <goal>jar</goal>
            </goals>
            <configuration>
              <failOnError>false</failOnError>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

正如您从文档中看到的，默认值为`true`.

* * *

## 回答 #9

> 赞同：18
> 
> 时间：2016-05-03T15:36:39.293

由于它取决于用于运行 maven 命令的 JRE 版本，因此您可能不想`DocLint`在 pom.xml 中默认禁用

因此，您可以从命令行使用 switch `-Dadditionalparam=-Xdoclint:none`。

例子：`mvn clean install -Dadditionalparam=-Xdoclint:none`

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2017-12-20T21:50:01.177

配置属性名称已在 maven-javadoc-plugin 的最新版本 3.0.0 中更改。

因此 <additionalparam> 将不起作用。所以我们必须修改它如下。

```
 <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-javadoc-plugin</artifactId>
      <version>3.0.0</version>
      <configuration>
         <doclint>none</doclint>
      </configuration>
  </plugin> 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2017-10-15T14:05:33.747

我想对其他答案添加一些见解

就我而言

> -Xdoclint：无

没用。

让我们从这个开始，在我的项目中，我根本不需要 javadoc。只有一些必要的插件对它有构建时间依赖。

因此，解决我的问题的最简单方法是：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <configuration>
        <skip>true</skip>
    </configuration>
</plugin> 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-01-31T14:54:46.377

从 maven-javadoc-plugin 3.0.0 开始，您应该一直使用[additionalJOption](https://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html#additionalJOption)来设置附加的 Javadoc 选项，因此如果您希望 Javadoc 禁用 doclint，则应该添加以下属性。

```
<properties>
    ...
    <additionalJOption>-Xdoclint:none</additionalJOption>
    ...
<properties> 
```

您还应该提及 maven-javadoc-plugin 的版本为 3.0.0 或更高版本。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-javadoc-plugin</artifactId>
    <version>3.0.0</version>    
</plugin> 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2018-02-15T00:46:15.420

在下面添加

```
JAVA_TOOL_OPTIONS=-DadditionalJOption=-Xdoclint:none 
```

进入詹金斯工作：

***配置 > 构建环境 > 将环境变量注入构建过程 > 属性内容***

通过 Jenkins Maven 解决了我的代码构建问题 :-)

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-08-07T14:26:18.280

所以，为自己节省一些我没有的时间，如果它似乎不起作用，试试这个：

```
 <additionalJOption>-Xdoclint:none</additionalJOption> 
```

标签已针对较新的版本进行更改。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-04-03T02:58:50.800

我不确定这是否会有所帮助，但即使我最近在使用**oozie-4.2.0**版本时也遇到了完全相同的问题。在阅读了上述答案后，我刚刚通过命令行添加了 maven 选项，它对我有用。所以，就在这里分享一下。

我正在使用 java **1.8.0_77**，尚未尝试使用 java 1.7

bin/mkdistro.sh -DskipTests **-Dmaven.javadoc.opts='-Xdoclint:-html'**

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-05-14T10:37:54.037

要忽略缺失`@param`和`@return`标签，禁用`missing` [doclint 组](http://docs.oracle.com/javase/8/docs/technotes/tools/windows/javadoc.html#BEJEFABE)就足够了。这样，仍将检查 javadoc 是否存在更高级别和语法问题：

```
 <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>3.0.0</version>
        <configuration>
            <doclint>all,-missing</doclint>
        </configuration>
    </plugin> 
```

请注意，这适用于插件版本 3.0 或更高版本。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-02-10T01:29:20.813

我参加聚会有点晚了，但我也被迫寻找解决方法，最终来到这里，然后找到了它。

这对我有用：-

```
export JAVA_TOOL_OPTIONS=-DadditionalJOption=-Xdoclint:none 
```

然后开始你的 Maven 构建，任何 Linux 发行版构建等等。它不需要修改 Maven*配置*文件 - 我不能这样做，因为我的目标是重建一堆**Centos** rpm 包，所以不得不走得很深。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-11-10T19:44:48.760

在我的情况下，我使用的是父 pom（不确定这是真正的原因，因为我在争分夺秒地运行），使用了 maven 2.x 和 java 1.6，由于某种原因，上述解决方案不起作用，所以我添加了以下配置文件并对其进行管理以使其运行：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mycompany</groupId>
    <artifactId>myapp</artifactId>
    <packaging>war</packaging>
    <name>myapp</name>
    <version>0.0.1-SNAPSHOT</version>
    <description>My App</description>
    <parent>
        <groupId>com.mycompany</groupId>
        <artifactId>parent-artifact</artifactId>
        <version>0.0.1</version>
    </parent>

    <profiles>
        <profile>
            <id>doclint-java6-disable</id>
            <activation>
                <jdk>[1.6,)</jdk>
            </activation>
            <properties>
                <additionalparam>--allow-script-in-comments</additionalparam>
            </properties>
        </profile>
    </profiles>
</project> 
```

# javascript - 根据输入在 For 循环中选择对象

> ID：15886212
> 
> 赞同：0
> 
> 时间：2013-04-08T18:23:40.123
> 
> 标签：javascript, jquery

我想根据先前选择的选项的值填充选择选项。

```
 <label for="state" class="block">State:*</label>
            <select name="state" id="state" tabindex="1">
                <option value="Arizona">Arizona</option>
                <option value="Arkansas">Arkansas</option>
                <option value="Colorado">Colorado</option>
            </select>

            <label for="location" class="block">Preferred Location:*</label>
            <select name="location" id="location" tabindex="2">
                <option value=""></option>
            </select> 
```

那是我的html。现在我有我的js，它可以工作，但我想知道是否有一种方法。

```
 var State = $('#state').val();
        var Location = $('#location');

        setOptions(State);

        function setOptions(chosen){

        var Location=document.myform.location;
        Location.options.length=0;

        var Arizona = {
        0 : 'Select Location',
        3 : 'Phoenix (Chandler)',
        4 : 'Scottsdale',
        5 : 'Tuscon'
        };

        var Arkansas = {
        2 : 'Little Rock'
        };          

        var Colorado = {
        6 : 'Colorado Springs'
        };

        if(chosen=="Arizona"){              
        var myobject = Arizona;
        }

        if(chosen=="Arkansas"){
        var myobject = Arkansas;
        }

        if(chosen=="Colorado"){         
        var myobject = Colorado;
        }

        for(index in myobject) {
                Location.options[Location.options.length]=new Option(myobject[index], index);
        } 
```

有没有办法根据另一个选择框告诉它使用哪个对象？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:28:55.820

使用嵌套对象：

```
var locations = {
    Arizona: {
        0 : 'Select Location',
        3 : 'Phoenix (Chandler)',
        4 : 'Scottsdale',
        5 : 'Tuscon'
    },
    Arkansas: {
        2 : 'Little Rock'
    },
    Colorado: {
        6 : 'Colorado Springs'
    }
};

var myobject = locations[chosen];
for(index in myobject) {
    Location.options.push(new Option(myobject[index], index));
} 
```

# android - 崩溃后无法重新打开 BluetoothSocket

> ID：15886214
> 
> 赞同：1
> 
> 时间：2013-04-08T18:23:47.133
> 
> 标签：android, bluetooth

我正在开发一个连接到各种蓝牙打印机的应用程序。它大部分时间都有效。但是，如果应用程序在没有正确关闭其 BluetoothSocket 的情况下崩溃或被 ADB 杀死，则在重新启动应用程序时它无法重新建立套接字。它总是以特定的异常消息失败：

`java.io.IOException: [JSR82] connect: Connection is not created (failed or aborted).`

我发现清除这种情况的唯一方法是重新启动平板电脑和/或它所连接的设备。还有其他方法吗？希望应用程序完成后不会崩溃太多，但我仍然希望它具有弹性。

我在运行 4.0.4 的联想平板电脑上看到了这一点，但我需要支持 2.3 甚至 2.2 的设备。

# matlab - 使用 matlab / octave 使用“For循环”创建数字

> ID：15886215
> 
> 赞同：0
> 
> 时间：2013-04-08T18:23:50.123
> 
> 标签：matlab, for-loop, octave, numerical-methods

我正在尝试使用matlab / octave中的For循环循环数字模式我正在寻找的模式是 **40,80,160,320,280,200**，然后将**1添加到每个**模式中，因此模式如下所示：

```
40,80,160,320,280,200,41,81,161,321,281,201,42,82,162,322,282,202 
```

我尝试在下面使用 for 循环

```
clear all
numL_tmp=[40;80;160;320;280;200]

numL=[numL_tmp];
for ii=1:length(numL_tmp)
    for jj=1:4
        numL=[numL;numL_tmp(ii,1)+jj]
    end
end 
```

但我明白了

```
40,80,160,320,280,200,41,42,81,82,161,162,321,322,281,282,201,202 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:29:11.353

对于所述问题，**嵌套循环是不必要的**。您可以简单地执行以下操作：

```
clear all;
numL_tmp=[40;80;160;320;280;200];

numL = numL_tmp;
for ii=1:2
    numL = [numL;numL_tmp+ii];
end

numL 
```

这将产生：

```
numL =

    40
    80
   160
   320
   280
   200
    41
    81
   161
   321
   281
   201
    42
    82
   162
   322
   282
   202 
```

这是有效的，因为 MATLAB 将这段代码识别`numL_tmp+ii`为等效于`numL_tmp + ii*ones(size(numL_tmp))`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T18:39:26.717

您可以完全避免循环：

```
N = 3;
numL = kron(ones(N,1),numL_tmp) + kron((0:N-1)',ones(numel(numL_tmp),1)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T18:29:40.070

有更简单的方法可以做到这一点，但您的代码的根本问题是内部和外部循环的顺序错误。看看如果你让你的代码保持原样会发生什么，只是简单地交换两个循环的顺序：

```
...
numL=[numL_tmp];
for jj=1:4
    for ii=1:length(numL_tmp)
       numL=[numL;numL_tmp(ii,1)+jj]
   end
end 
```

# scala - Lifty 和 SBT 0.12

> ID：15886216
> 
> 赞同：1
> 
> 时间：2013-04-08T18:23:51.727
> 
> 标签：scala, sbt, lifty

我是使用 SBT 的新手，我正在尝试安装和配置[Lifty](http://lifty.github.io/)，但是当我尝试运行 sbt 时，出现以下错误：

```
[error] (*:update) sbt.ResolveException: unresolved dependency: org.lifty#lifty;1.7.4: not found 
```

根据为 Lifty[安装插件](http://lifty.github.io/Installing+The+Plugin.html)`~/.sbt/plugins/build.sbt`的说明，我的文件如下所示：

```
resolvers += Resolver.url("sbt-plugin-releases", new URL("http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases/"))(Resolver.ivyStylePatterns)
addSbtPlugin("org.lifty" % "lifty" % "1.7.4") 
```

我的`~/.sbt/build.sbt`文件包括以下行：

```
seq( Lifty.liftySettings : _*) 
```

但是，在尝试运行此程序时，我收到上面列出的 SBT 错误，如果我尝试使用`1.7.5-SNAPSHOT`Lifty 版本，我会收到类似的错误。

我在 Ubuntu 12.10 上使用 SBT 启动器版本 0.12.0 和 Scala 版本 2.10.1（Java HotSpot(TM) 64 位服务器 VM，Java 1.7.0_17）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:55:39.923

您使用了错误的定义。这是您需要的；

```
resolvers += Resolver.url("sbt-plugin-snapshots", new URL("http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-snapshots/"))(Resolver.ivyStylePatterns)

addSbtPlugin("org.lifty" % "lifty" % "1.7.4") 
```

如果您想让它可用于所有项目，请输入`~/.sbt/plugins/plugins.sbt`. 否则它会进入：`ProjectFolder/project/plugins.sbt`

**但是他们没有发布 Scala 2.10 或 SBT 0.12。**. [在这里](http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases/org.lifty/lifty/)寻找可用的东西。

# wcf - WCF REST 资源设计 - 发布与获取

> ID：15886220
> 
> 赞同：1
> 
> 时间：2013-04-08T18:24:01.927
> 
> 标签：wcf, rest

我正在为我的公司设计一个 REST 服务。这里没有人对 REST 有太多经验，所以我通读了几本关于这个主题的书，但我被困在 POST 的资源设计与 GET 请求的资源设计对相同数据的对比上。尤其是在涉外关系的情况下。

例如，我有一个类 PurchaseRequest 代表购买某些固定资产的请求。在幕后，我的服务是关系数据库的接口。有一个 PURCHASE_REQUEST 表，它具有一个外键到一个资产表（定义正在请求的固定资产列表中的哪一个）和一个 PERSON 表（定义哪些用户正在执行请求）。目前在我的服务中，当针对购买请求发出 GET 命令时，该服务会返回整个内容：PURCHASE_REQUEST 表条目的 XML 表示以及资产条目列表，如下所示：

```
<PurchaseRequest>
    <ID></ID>
    <RequestDate></RequestDate>
    <Requestor href="/requestors/requestorID">
        <RequestorID></RequestorID>
        <FirstName></FirstName>
        <LastName></LastName>
    </Requestor>
    <RequestedAssets>
        <RequestedAsset href="/assets/AssetNumber" >
            <AssetNumber></AssetNumber>
            <Year></Year>
            <Make></Make>
            <Model></Model>
            <Cost></Cost>
        </RequestedAsset>
        <RequestedAsset href="/assets/AssetNumber" >
            <AssetNumber></AssetNumber>
            <Year></Year>
            <Make></Make>
            <Model></Model>
            <Cost></Cost>
        </RequestedAsset>
        <RequestedAsset href="/assets/AssetNumber" >
            <AssetNumber></AssetNumber>
            <Year></Year>
            <Make></Make>
            <Model></Model>
            <Cost></Cost>
        </RequestedAsset>
    </RequestedAssets>
</PurchaseRequest> 
```

这非常有效。消费应用程序发出单个请求并获取整个内容，并在需要时链接到完整的资源请求者资源或资产资源。

问题出现在 POST 上。我的直觉告诉我尝试使用相同的资源布局来发布新的购买请求，就像我用来检索现有的一样。无论如何，这就是我读过的书中的所有示例所做的。我只需要知道资产编号和请求者 ID 即可完成 POST。这意味着数据不是必需的，但仅是低效率并不是困扰我的问题。最主要的是您在创建采购请求时不应该能够编辑资产的年份、品牌或型号，这些字段是预定义的。您还应该能够在创建采购请求时创建新的资产定义。同样，在创建采购请求时，您不应该能够更新/创建一个人的详细信息。有用于创建/更新人员和资产的单独服务。

我唯一能想到的是为 POST 定义一个不同的 DataContract 类，该类具有识别资产或人员的最少信息，并且不公开那些无法更新的字段。我真的不喜欢这个选项，因为它会创建大量的 DataContracts 类（我的数据库中几乎所有的表都有外部关系，这不是孤立于一个请求，否则我不会担心）但是我真的不喜欢我目前的设计，因为 REST 没有只读字段。我的服务的消费者现在有责任不断检查，“它是否保存了这个字段......这个呢？......” 有没有其他人遇到过这个问题？必须为 POST 和 GET 定义单独的 DataContract 类是否很常见？似乎是一个非常基本的设计问题，但我没有看到很多关于这个主题的帖子，所以我希望我只是错过了一些东西。任何帮助表示赞赏。

# hyperlink - 你将如何使用流星自动格式化超链接

> ID：15886222
> 
> 赞同：1
> 
> 时间：2013-04-08T18:24:04.267
> 
> 标签：hyperlink, meteor

我正在开发一个聊天室应用程序，并希望自动格式化超链接，以便无需复制/粘贴即可访问它们。

我找到了 autolink.js 并能够使用静态 HTML 模板使其工作，但无法使其与流星一起工作。

有什么建议么？

编辑 -

流星版本 0.6.1

聊天室应用程序 - [https://github.com/SmashBrando/chatroom](https://github.com/SmashBrando/chatroom)

Autolink.js - [https://github.com/bryanwoods/autolink-js](https://github.com/bryanwoods/autolink-js)

（这没有设置，因为它不起作用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:26:35.393

把它放在你想要显示超链接的助手中。假设你已经在你的文件夹中设置了 autolink.js，`/client/lib`只需将它与你的助手一起使用

例如

**客户端js**

```
Template.hello.greeting = function() {
    return "This is a link to Google http://google.com".autoLink()
} 
```

并且您需要确保您的 HTML 使用可以提供 html 输出的把手（即两侧有 3 个花括号而不是 2 个）：

**模板中的 html**

```
{{{greeting}}} 
```

这应该输出

```
This is a link to Google <a href="http://google.com">http://google.com</a> 
```

* * *

### 使用 transform 自动链接游标

当使用返回光标的把手助手时，例如`Messages.find()`在您的代码中，您需要`transform`您的集合。因此，您需要使用您的代码更改返回值：

```
Template.messages.messages = function () {
    return Messages.find({}, { sort: {time: -1}, transform: function(doc) {
        if(doc.message) doc.message = doc.message.autoLink()
            return doc;
        }
    });
}; 
```

[转换会更改](http://docs.meteor.com/#collections)集合中的文档，因此在上面的每个消息都是自动链接的。

您还需要让车把将其显示为可点击的链接，方法是更改​​ HTML 的车把以使用 3 个花括号来确保您的 ' 不会被转义：

```
<template name="message">
<p><strong>{{name}}:</strong> {{{message}}}</p>
</template> 
```

# php - 为用户创建后续页面

> ID：15886225
> 
> 赞同：0
> 
> 时间：2013-04-08T18:24:09.920
> 
> 标签：php, .htaccess

我的意思是，假设我有一个用户本身的页面：`localhost/blog/profile/ImUser1`

我想为用户提供其他页面，例如： `localhost/blog/profile/ImUser1/my_subscribers` 或者 `localhost/blog/profile/ImUser1/my_posts`

如何创建此类页面，例如订阅者页面？

我当前的 .htaccess 代码：

```
RewriteEngine On
CheckCaseOnly On
CheckSpelling On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^profile/(.*)$ /blog/profile.php?username=$1 [QSA,L] 
```

这使我可以访问用户页面。我需要在 URL 中包含用户名，因为这就是我提取订阅者信息的方式。

到目前为止，这是我构建 PHP 的方式：

```
if(isset($_GET['username']) === true && empty($_GET['username']) === false){
    $username = $_GET['username'];

    if(user_exists($username) === true){
           echo 'Welcome to '.$username.' page!';
    }
}else{
           echo 'Please enter a username in the URL';
} 
```

如何调整我的 PHP 和 .htaccess 以使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:26:40.630

您可以在 profile.php 的请求中添加一个额外的查询字符串变量来指定模式。像这样的东西：

```
RewriteRule ^profile/([a-zA-Z0-9_-]+)/?$ /blog/profile.php?username=$1 [L]
RewriteRule ^profile/([a-zA-Z0-9_-]+)/([a-z][a-z_]*)/?$ /blog/profile.php?username=$1&mode=$2 [L] 
```

这样，请求`/blog/profile/some_user/some_mode`将发送请求以`profile.php?username=some_user&mode=some_mode`允许您的 PHP 脚本检查模式变量并相应地呈现页面或重定向页面。

我已将用户名模式从 更改`(.*)`为`[a-zA-Z0-9_-]+`以阻止它使用正斜杠，并要求它的长度至少为一个字符。而且我已经使用`[a-z][a-z_]*`模式模式要求它以小写字母开头，然后允许下划线。

# java - 如何确保谷歌语音 api 返回值 - java

> ID：15886229
> 
> 赞同：1
> 
> 时间：2013-04-08T18:24:19.260
> 
> 标签：java, android, android-asynctask

我尝试为 android 应用程序编写一个代码，该代码采用从谷歌语音 api 返回的字符串，并使用它在同一线程内发送到其他对象“levenshte.testLevenshteindistance”。

我不能让它同步工作的问题！我的意思是我的代码在谷歌语音 api 返回值“取决于互联网速度”之前调用对象？！

```
ublic class MainActivity extends Activity {

public ListView sList;
ArrayList<String> names;
int sfound;
mp3Player mp3Player;    
Levenshteindistance levenshte;

public static final int VOICE_RECOGNITION_REQUEST_CODE = 1234;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    voiceinputbuttons();
    starVoiceRecognation();
}

private void starVoiceRecognation() {
      Thread timer = new Thread(){           
        public void run(){
                new VoiceRecognizer().execute();

            //names is an ArrayList returnd by google speech api

                sfound=levenshte.testLevenshteindistance(names.get(0).toString());

        }
      };timer.start(); 
}

public void voiceinputbuttons() {
    sList = (ListView) findViewById(R.id.list);
    //default value if create mp3player before set sName or rName or actionNumbe
     names=null;
     levenshte = new Levenshteindistance();

}

public void informationMenu() {
    startActivity(new Intent("android.intent.action.INFOSCREEN"));
    }

public void startVoiceRecognitionActivity() {

Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
intent.putExtra(RecognizerIntent.EXTRA_PROMPT,"Speech recognition demo");
    try {
    startActivityForResult(intent, VOICE_RECOGNITION_REQUEST_CODE);
    } catch (ActivityNotFoundException e) {
    }

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {

        // i want the timer thread wait until assign a value to  this name variable

        names = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
            if (names.contains("information")) {
                informationMenu();
            }
        super.onActivityResult(requestCode, resultCode, data);
    }
}

private class VoiceRecognizer extends AsyncTask<String, Integer, String> {
@Override
    protected String doInBackground(String... url1) {

        startVoiceRecognitionActivity();

        return null;
        }

}

} 
```

我想确保在调用 levenshte.testLevenshteindistance(names.get(0).toString()); 时名称不为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:29:37.027

你为此设置错误。您不会在任务中启动语音识别并假设它会在某个计时器运行时结束。语音识别需要时间，完成后它会在 onActivityResult 中回叫您。你应该在那里开始你的新活动。

此外，语音识别活动可能会在出错时返回 null。无论如何，我都会做一个空检查，只是为了确保。

# javascript - 闭包在函数范围之外不起作用

> ID：15886230
> 
> 赞同：0
> 
> 时间：2013-04-08T18:24:21.203
> 
> 标签：javascript, closures

刚开始学习闭包，在 FireBug 中写了这段代码：

```
var later;

function outerFunc() {
  var innerVar = "Inside Outer";
  function innerFunc() {
     console.log(innerVar);
  }

  later = innerFunc;
};

outerFunc();
later(); 
```

但是在调用`later();`它时会返回一个未定义的值。不应该打印出来吗`"Inside Outer" ?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:30:19.763

```
var later;

function outerFunc() {
  var innerVar = "Inside Outer";
  function innerFunc() {
     console.log(innerVar);
  }

  later = innerFunc;
};

outerFunc(); //Don't run innerFunc, just set later = innerFunc
later(); // Execute innerFunc 
```

所以它只记录一次..看起来不错..

# ruby - 使用 Ruby CKAN 客户端？

> ID：15886232
> 
> 赞同：1
> 
> 时间：2013-04-08T18:24:22.553
> 
> 标签：ruby, api, opendata, ckan

我已经开始探索[CKAN Ruby 客户端](https://github.com/apohllo/CKAN)，但我似乎无法完全掌握它。这就是我想出的：

```
require "ckan"

CKAN::Package.find(:tags => ["statistics"]).each do |pack|
  puts pack
end
# CKAN::Package[2000-us-census-rdf]
# CKAN::Package[adb-sdbs]
# CKAN::Package[at-statistics]
# CKAN::Package[au-abs]
# ...and tons more... 
```

这给了我一个带有标签的所有包`statistics`。假设我想要在上面生成的输出`nhs`中显示的包。`CKAN::Package[nhs]`这是我坚持的部分。我如何实际使用该软件包？我如何读取它的数据？我想它会给我JSON？我查看了它的[源代码](https://github.com/apohllo/CKAN/tree/master/lib/ckan)，虽然我不确定要使用哪个类，但它似乎很容易理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:11:12.160

如果您查看[Package Class](https://github.com/apohllo/CKAN/blob/master/lib/ckan/package.rb)，您将看到您可以使用此库访问的属性：

`:name, :title, :url, :version, :author, :author_email, :maintainer, :maintainer_email, :license_id, :notes`

你想要包信息还是资源信息？

# php - JQuery：OpenLayers 地图在 onlclick 方法后无法加载

> ID：15886236
> 
> 赞同：0
> 
> 时间：2013-04-08T18:24:35.923
> 
> 标签：php, jquery, html, jquery-mobile, openlayers

我的 JQM 站点上有一个无法正确加载的 OpenLayers 地图。我确信这取决于 onclick() 方法，但我不太确定其他任何方法。我已经查看了 JQuery 站点上的 .click() 方法，但由于该方法的工作原理，我认为这不会起作用。

onclick() 方法位于一个列表中，并加载一个 JS 函数来更新另一个页面上的 html。该列表由一个 PHP 循环填充，该循环从数组中获取数据；更改的 HTML 取决于选择的项目。该函数还在同一页面上创建地图。

这是 PHP 循环：

```
<?php       
          for ($row = 0; $row < $arrlength; $row++)
          {
              echo "<li>";   
              echo "<a href='#room-info' onclick='updateRoom(\"".$rooms[$row]["Room"]."\", \"".$rooms[$row]["Building"]."\", \"".$rooms[$row]["Campus"]."\", \"".$rooms[$row]["X"]."\", \"".$rooms[$row]["Y"]."\");'>";
              echo $rooms[$row]["Room"];
              echo "</a>"; 
              echo "</li>";
          }
?> 
```

这是JS函数：

```
function updateRoom(roomNumber, building, campus, xCoor, yCoor)
    {
        x=document.getElementById("roomInfo");  // Find the element
        x.innerHTML="<h1>Room</h1>" + roomNumber + "<br><h1>Building</h1>" + building + "<br><h1>Campus</h1>" + campus;    // Change the content

        var map, baseLayer;
        var options = {numZoomLevels: 7, isBaseLayer: true,};

        map = new OpenLayers.Map('map');            
        baseLayer = new OpenLayers.Layer.Image("College Lane","college-lane-large.png", 
        new OpenLayers.Bounds(-1000, -1000, 1000, 1000),
        new OpenLayers.Size(1500,1500), options);
        map.addLayer(baseLayer);

        var center = new OpenLayers.LonLat(xCoor,yCoor);
        map.setCenter(center ,0);  

        map.addControl(new OpenLayers.Control.LayerSwitcher());
        map.addControl(new OpenLayers.Control.MousePosition());

        var size = new OpenLayers.Size(21,25);
        var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
        var icon = new OpenLayers.Icon('http://www.openlayers.org/dev/img/marker.png',size,offset);
        var markers = new OpenLayers.Layer.Markers( "Marker" );
        map.addLayer(markers);
        markers.addMarker(new OpenLayers.Marker(center), icon);
    } 
```

一旦选择了一个项目，您就会被带到一个页面，该页面显示更新的 HTML 以及 OpenLayers 地图。html 文本正确更新，但 OpenLayers 地图为空。

我会把代码放在这里，但有很多。我的网站可以在这里找到：http: [//getontinternet.com/fyp/index.php](http://getontinternet.com/fyp/index.php)

要进入麻烦的页面，您必须首先单击“查找房间”，搜索 LC154，因为这是我唯一正确设置的项目。选择该房间后，它将显示该页面。

我已经尝试解决这个问题好几天了，所以如果有人真的设法弄清楚它为什么不起作用，我将非常感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:48:03.843

您的结果页面出现此错误：TypeError: $.event.handle is undefined。我认为您应该看一下：[取回事件处理程序返回未定义](https://stackoverflow.com/questions/3440707/getting-back-the-event-handler-returns-undefined)

# .htaccess - 为什么这个 mod_rewrite 规则不适用于 CodeIgniter？

> ID：15886237
> 
> 赞同：0
> 
> 时间：2013-04-08T18:24:40.473
> 
> 标签：.htaccess, codeigniter, mod-rewrite

```
RewriteRule ^(new-york/new-york-city/chelsea/10001) index.php [L] 
```

上面的代码不起作用。它在 Codeigniter 中给了我一个 404 错误。但是，以下代码确实有效。

```
RewriteRule ^(new-york/new-york-city/chelsea/10001) http://anywebsitehere.com/ [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:55:14.023

如果您有一个设置，则`RewriteRule`只是重写为`index.php`调用默认路由。如果你想去你的搜索，你必须重写搜索控制器和方法，并将漂亮的 URL 或它的一部分作为参数传递

```
RewriteRule ^new-york/new-york-city/chelsea/10001 index.php/search_controller/search_method/$0 [L] 
```

这将以漂亮的 URL 作为参数调用`application/controllers/search_controller.php`方法`search_method`

```
search_method('new-york', 'new-york-city', 'chelsea', '10001'); 
```

# matrix - 使用视图矩阵进行截锥剔除

> ID：15886238
> 
> 赞同：0
> 
> 时间：2013-04-08T18:24:41.103
> 
> 标签：matrix, glsl, frustum, culling

在 GLSL 着色器中，我需要省略一些曲面细分补丁以显着提高性能。这些补丁是三角形，每个顶点都有给定的世界坐标。但是，当我将这些坐标转换为视锥体剔除的视图空间时，存在误差。

这是原始地形。

![地形](https://i.imgur.com/BxqvAD0.jpg?1)

这就是错误在顶部影响它的方式。

![地形破碎](https://i.imgur.com/rhYqBOl.jpg)

这是一个有污垢的部分的特写镜头。

![地形破碎](https://i.imgur.com/OHPGnyU.jpg)

这些错误不仅发生在屏幕顶部，还发生在侧面和底部。这是我用来确定是否应该排除三角形的代码（在 GLSL 中）。

```
bool inFrustum( vec3 p,vec3 q,vec3 r) {
    vec4 Pclip = camera * vec4(p, 1.0f);
    vec4 Qclip = camera * vec4(q, 1.0f);
    vec4 Rclip = camera * vec4(r, 1.0f);
    if(((-Pclip.w>Pclip.x&&-Qclip.w>Qclip.x&&-Rclip.w>Rclip.x)||    (Pclip.x>Pclip.w&&Qclip.x>Qclip.w&&Rclip.x>Rclip.w))||
       ((-Pclip.w>Pclip.y&&-Qclip.w>Qclip.y&&-Rclip.w>Rclip.y)||(Pclip.y>Pclip.w&&Qclip.y>Qclip.w&&Rclip.y>Rclip.w))||
       ((-Pclip.w>Pclip.z&&-Qclip.w>Qclip.z&&-Rclip.w>Rclip.z)||(Pclip.z>Pclip.w&&Qclip.z>Qclip.w&&Rclip.z>Rclip.w))){
    return false;
    }
    else{
    return true;
    }
} 
```

我将不胜感激任何帮助！贝希米斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T18:58:01.487

在我的着色器中，我使用以下内容来剔除补丁：

```
bool visible(vec3 vert)
{
    int clipoffset = 5; //a bit offset because of displacements
    vec4 p = MVP*vec4(vert,1);
    return !(( p1.x < -(p1.w+clipoffset))||
            ( p.x >  (p.w+clipoffset))||
            ( p.y < -(p.w+clipoffset))||
            ( p.y >  (p.w+clipoffset))||
            ( p.z < -(p.w+clipoffset))||
            ( p.z >  (p.w+clipoffset)));
} 
```

从上面看是这样的：![在此处输入图像描述](https://i.stack.imgur.com/gk0gE.png)

PS：我使用四边形镶嵌，所以我检查其中一个顶点是否在平截头体中：

```
if( visible(inPos[0])||
            visible(inPos[1])||
            visible(inPos[2])||
            visible(inPos[3]))
        {
            outt[0] = calcTessellationLevel(inPos[3],inPos[0]);
            outt[1] = calcTessellationLevel(inPos[0],inPos[1]);
            outt[2] = calcTessellationLevel(inPos[1],inPos[2]);
            outt[3] = calcTessellationLevel(inPos[2],inPos[3]);

            inn[1] = (outt[0]+outt[2])/2;
            inn[0] = (outt[1]+outt[3])/2;
        } 
```

编辑：在您的代码中，可能是（和）`||`运算符导致了问题，请在每第二条语句后尝试不带括号：

```
if(S1||S2||S3||S4) 
```

代替

```
if((S1||S2)||(S3||S4)) 
```

编辑:: 嗯....我没有看过它被问到的日期，不知道我是怎么找到它的....哦

# c# - 带有 Ajax 模型 ID 问题的 Kendo Grid

> ID：15886239
> 
> 赞同：0
> 
> 时间：2013-04-08T18:24:41.943
> 
> 标签：c#, kendo-ui, kendo-grid, kendo-asp.net-mvc

考虑[这个例子](http://demos.kendoui.com/web/grid/editing-inline.html)。

如果您使用此示例（在调试模式下的代码上），您会看到在添加第二个对象并按下更新按钮后，将向服务器发送两个请求（这就是为什么存在两个具有相同 id 的对象） . 我正在寻找一种方法来避免这种情况（generatedynamic id）的帮助？

谁能帮助我提供代码或信息来满足我的需求？

# wordpress - 搜索结果未显示完整帖子，仅显示摘录（Wordpress）

> ID：15886241
> 
> 赞同：1
> 
> 时间：2013-04-08T18:24:50.470
> 
> 标签：wordpress, search, filter

这是我第一次在这个网站上发帖，如果这个问题不完全合适，我深表歉意，但我正在为我的作曲家兄弟建立一个投资组合网站，他需要他的音乐库能够进行复选框过滤。问题是当我使用过滤器进行搜索时，结果只显示摘录，而不是我需要的音频播放器。

[图书馆页面显示带有音频播放器的完整帖子](http://samijano.com/library/)

[搜索结果页面仅显示帖子标题，没有其他内容](http://samijano.com/?s=793dc11df1&formid=31&taxo%5B0%5D%5Bname%5D=category&taxo%5B0%5D%5Bterm%5D%5B%5D=epic&wqsfsubmit=Search)

另外，请原谅该网站的纯粹粗糙。我今天早上才开始...提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:09:16.883

要显示您必须使用`the_content`功能的完整内容，请在您的`search.php`文件中替换以下内容

```
<?php the_excerpt(); // partial content ?> 
```

和

```
<?php the_content(); // full content ?> 
```

还记得。`the_excerpt`功能会去除所有`HTML`标签，因此可能会出现问题，您可以阅读[本文](http://heera.it/show-vipers-video-excerpt)。

# visual-studio-2012 - 如何在与 IE 不同的浏览器中启动 VStudio 的“启动性能向导”选项？

> ID：15886242
> 
> 赞同：7
> 
> 时间：2013-04-08T18:25:00.830
> 
> 标签：visual-studio-2012, performance-testing

我正在尝试使用 Visual Studio 2012 中“分析”菜单选项中的“启动性能向导”选项。它使用 Internet Explorer 作为默认浏览器。我需要将默认浏览器更改为“Firefox”，因此当我启动性能向导时，将打开 Firefox 而不是 Internet Explorer。谁能告诉我如何实现这一目标？

# java - javac e java 命令行

> ID：15886251
> 
> 赞同：0
> 
> 时间：2013-04-08T18:25:32.850
> 
> 标签：java, javac

假设我有以下文件夹结构：

*   我的项目
    *   来源
        *   com
            *   狡猾的
                *   MyClass.java
    *   班级
        *   com
            *   狡猾的
                *   MyClass.class

我将使用哪个命令“java.exe”来运行 MyClass.class 类，承认我在文件夹“源”中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:30:24.830

您需要为类文件夹指定类路径，因此您需要执行以下操作：

```
java -cp ../classes com.wickedlysmart.MyClass 
```

或者

```
java -cp <full-path-to>/classes com.wickedlysmart.MyClass 
```

注意：这是假设您在帖子中使用具有`com`和`wickedlysmart`在同一级别上的层次结构出错。如果它们应该在同一级别，请`com.`从上面的示例中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:29:32.807

无论您使用什么命令在其文件夹中运行 MyClass.class 以及导航到 Myclass.class。

假设您正在使用

```
java MyClass 
```

从它的目录运行它。现在你必须使用

```
java -cp ../../myproject/classes com.wickedlysmart.MyClass 
```

从其他目录运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:29:56.263

```
java -cp myProject/classes com.wickedlysmart.MyClass 
```

# html - Android 上的响应式设计滚动问题

> ID：15886256
> 
> 赞同：1
> 
> 时间：2013-04-08T18:25:41.730
> 
> 标签：html, css, responsive-design

我正在将我的网站转换为响应式设计。它看起来很棒，除了一个烦人的问题。当我在我的 Android 设备上滚动时，我的幻灯片不断在网站上跳来跳去。它在 iPhone 和计算机上都可以正常工作。

我用于幻灯片的脚本是[http://swipejs.com/](http://swipejs.com/)

这是一个常见问题吗？

# c++ - readdir 在已安装的 cifs 目录上花费了很长时间

> ID：15886262
> 
> 赞同：1
> 
> 时间：2013-04-08T18:26:10.637
> 
> 标签：c++, ubuntu, cifs

我正在运行以下代码：

```
void EnumerateFolder(std::string folder)
{ 
    DIR* directory;
    struct dirent* entry;

    directory = opendir(folder.c_str());
    if(directory != NULL)
    {
        while((entry = readdir(directory)) != NULL)
        {
            std::cout << entry->d_name;
        }
    }
} 
```

当它到达我有 readdir() 的已安装 CIFS 文件夹时，有时需要**15 分钟**才能返回。有人愿意告诉我正在发生的事情以及如何获得更友好的体验吗？每次我运行代码并且具有共享文件夹的计算机处于脱机状态时，都会发生这种情况。它也是任意发生的（据我所知），也许是当具有共享文件夹硬盘的计算机“空闲”时。

你说的文件夹是怎么挂载的？

```
cat /etc/fstab
//192.168.0.6/MyShare /home/MyUser/MountedShare cifs guest 0 0 
```

192.168.0.6 正在运行 Windows 8，如果这很重要的话。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:16:41.847

15 秒是标准[CIFS Send2 超时](http://markmail.org/thread/vxxoicoo43ukz47v)。如果您希望它更快地失败，您可以`timeo`在挂载选项上放置一个选项。以十分之一秒为单位指定超时。

文件系统并不真正知道应用程序*为什么*要读取文件。快速超时可能会破坏长时间运行的进程，例如，如果可执行代码页面出现错误。所以一般来说，网络文件系统试图模仿本地文件系统的语义，即等待底层存储响应所需的时间。

# ios - 以编程方式将视图加载到 UIViewController

> ID：15886265
> 
> 赞同：-1
> 
> 时间：2013-04-08T18:26:21.933
> 
> 标签：ios, objective-c, uiview, uiviewcontroller, storyboard

我实际上有 2 个问题。首先，我将解释这个场景。我有一个简单的 Storyboard 应用程序。第一个控制器是`UITableViewController`显示邮件类型列表。当点击一个单元格时，它会转到 a`UIViewController`并且根据所选的邮件类型，它会将 a 加载`UIView`到`UIViewController`. 这一切都很好。我的问题是，

我的一个`UIView`身高是559。我在`UIScrollView`里面放了一个，`UIViewController`这样当`UIView`加载额外高度的时候，它就可以滚动了。但不是发生这种情况，而是将`UIView`大小调整为`UIViewController`. 如何保持其原始高度并将其嵌入到`UIScrollView`? 在界面生成器中，我`UIToolbar`在`UIViewController`. 但是，当`UIView`加载到其中时，`UIToolbar`消失了。我猜`UIView`出现在`UIToolbar`(?) 的顶部。我怎样才能避免这种情况发生？

我知道这一定有点让人难以理解。因此，我上传了一个 Xcode 项目，展示了[这里](http://www14.zippyshare.com/v/50134738/file.html)的 2 个问题。

请看看并告诉我我应该做什么。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:54:12.517

我发现您在项目中所做的事情存在一些问题，这可以解释为什么您会得到这些结果。

1.  在`NewMailViewController.m`中，您将在情节提要中创建的视图（具有滚动视图和工具栏的视图）替换为您从笔尖加载的视图（即`self.view = [nib objectAtIndex:0];`）。尝试在 -loadView 中执行此操作

    ```
    [super loadView];

    UIView *someView = nil;

    if ([self.mailTypeName isEqualToString:@"Email"]) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"Email" owner:self options:nil];
        someView = [nib objectAtIndex:0];
    }
    else if ([self.mailTypeName isEqualToString:@"Facsimile"]) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"Facsimile" owner:self options:nil];
        someView = [nib objectAtIndex:0];
    }
    else if ([self.mailTypeName isEqualToString:@"Memorandum"]) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"Memorandum" owner:self options:nil];
        someView = [nib objectAtIndex:0];
    }
    else if ([self.mailTypeName isEqualToString:@"ProjectMemo"]) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ProjectMemo" owner:self options:nil];
        someView = [nib objectAtIndex:0];
    }

    CGRect frame = someView.frame;
    frame.size.width = self.myScrollView.frame.size.width;
    [someView setFrame: frame];

    [self.myScrollView addSubview: someView];
    [self.myScrollView setContentSize: someView.bounds.size]; 
    ```

2.  您会注意到我在上面的代码片段中引用了滚动视图。您需要为`NewMailViewController`类中的滚动视图创建一个出口，以便您可以根据需要引用它。它涉及将其放入您的头文件中：

    `@property (strong, nonatomic) IBOutlet UIScrollView *myScrollView;`

    您需要将定义的插座连接到实际故事板的滚动视图。您可以在 Internet 上搜索“在 Xcode 中创建或连接插座”以获取更多信息。

3.  工具栏似乎是滚动视图的子视图。当滚动视图的内容滚动时，您不希望工具栏停留在视图的底部吗？如果是这样，您需要将该工具栏视图从滚动视图中移出。

以下是更改：[http ://www62.zippyshare.com/v/90505016/file.html](http://www62.zippyshare.com/v/90505016/file.html)

# python - sys.path.append 不适用于 Python 3.x

> ID：15886267
> 
> 赞同：0
> 
> 时间：2013-04-08T18:26:22.813
> 
> 标签：python, python-3.x

我有 Blender 2.66a，它是一个提供 Python 3.3 API 的应用程序，在我的系统上，我安装了 Python 3.2，其中包含我希望在 Blender 中使用的几个模块，我都尝试了

```
sys.path.append(r"/usr/lib/python3.2/")
sys.path.append("/usr/lib/python3.2/") 
```

并且这个命令没有给出任何错误，事实上，即使自动完成功能也可以工作并且新模块被索引，所以我尝试了

```
import tkinter 
```

但这会产生以下错误

```
Traceback (most recent call last):
  File "<blender_console>", line 1, in <module>
  File "/usr/lib/python3.2/tkinter/__init__.py", line 42, in <module>
    raise ImportError(str(msg) + ', please install the python-tk package')
ImportError: No module named '_tkinter', please install the python-tk package 
```

而且我不明白这个错误的意义，因为它无法加载一个模块，它要求我安装相同的模块，因为该模块没有安装（？）。

什么会导致这个晦涩的问题？

* * *

编辑

**tkinter 模块从 gnome-terminal 工作**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:03:55.627

如果我没听错，您使用的是 Blender 的 Python 3.3，但尝试包含 3.2 标准库。这势必会给你带来一连串的问题，你不应该*那样*做。寻找另一种方式。Blender 很可能提供了一种使用 3.3 标准库的方法（这与 3.2 有 99% 的兼容性）。当然，纯 Python 第三方库可以通过摆弄`sys.path`.

您现在看到的具体问题可能是由版本差异引起的。正如人们在评论中指出的那样，Python 3.3 没有找到`_tkinter`扩展模块。虽然它存在（因为它适用于 Python 3.2），但它很可能在一个带有与 Blender 的 Python 3.3 不兼容的[ABI 标签](http://www.python.org/dev/peps/pep-3149/)的 .so 文件中，因此它甚至不会查看它（很像 a`module.txt`不被考虑为`import module`）。**这是一件好事。**扩展模块是高度特定于版本的，轻微的 ABI 不匹配（例如在 3.2 和 3.3 之间，或使用不同选项编译的两个 3.3 之间）可能导致几乎任何类型的错误，从崩溃到内存泄漏到无声数据损坏甚至完全不同的东西.

`import _tkinter; print(_tkinter.__file__)`您可以通过3.2 shell验证是否是这种情况。或者，`_tkinter`可能完全位于不同的目录中。添加该目录实际上并不能解决上述真正的问题。

# javascript - 函数调用和函数引用有什么区别？

> ID：15886272
> 
> 赞同：38
> 
> 时间：2013-04-08T18:26:46.317
> 
> 标签：javascript, function, reference, call

我有以下功能

```
function hello() {
 alert("hi!");
} 
```

拿这段代码：

```
var elem = document.getElementById("btn");
elem.onclick = hello; 
```

我的问题可能有点难以理解，所以请耐心等待：这段代码与普通调用的区别是什么，或者是什么让这段代码需要对函数变量的引用而不是常规调用？( `hello();`)

我怎么知道我应该在哪里引用该函数，以及何时应该实际调用它？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-08T18:29:51.383

好吧，该`onclick`属性需要一个对函数的引用，以便在单击元素时执行它。通常它是：

```
element.onclick = funcRef; 
```

或者

```
element.onclick = function () {
    funcRef();
}; 
```

（当然，最好使用`addEventListener`and `attachEvent`）

注意它们都是对函数的引用，而不是调用。

当某些东西需要引用时，您不会调用它...您为其分配引用（第一个示例）。

当您想专门调用一个函数时，您可以使用`()`（第二个示例）调用它。但是请注意，在第二个示例中，仍然存在对分配给函数的引用`onclick`——它只是一个匿名函数。

**可能更重要的部分：**

有些人认为你想这样做：

```
element.onclick = funcRef(); 
```

但这会立即执行函数（因为`()`），并将其返回值分配给`onclick`. 除非返回值**是**一个函数，否则这不是你想要的。

我认为这个故事的寓意是，当您现在想要/需要执行某些操作时，您可以调用该函数。如果需要该函数以供以后使用或需要存储，则不要调用它。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-08T18:31:31.380

你想让它现在执行吗？然后调用它。

`a=hello()`表示“尽快调用`hello()`，并将其返回值设置为`a`”。

另一方面，`a=hello`表示“`a`是 的别名`hello`。如果你调用`a()`，你会得到与调用相同的结果`hello()`”

您将后者用于回调等，您想告诉浏览器在事件发生后您想要发生什么。例如，您可能想说“`hello()`用户点击时调用”（如示例中所示）。或者，“当 AJAX 查询返回结果时，`callback()`对返回的数据调用函数”。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-08T18:30:12.190

> 我怎么知道我应该在哪里引用该函数，以及何时应该实际调用它？

**您现在需要该功能吗？**

比添加 () 来执行它

**您是否需要引用函数以便稍后调用它？**

不要添加 ()。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-08T18:30:34.160

无论如何调用它，都需要在*某处引用您的函数。*这里的区别在于您没有显式调用该`hello`函数。您正在将对该函数的引用分配给`elem`DOM 节点的`onclick`事件处理程序，以便在`onclick`为该节点触发时，调用您的函数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-08T18:32:02.037

JavaScript 中几乎所有的语句都有返回值。除非另有说明，否则 JavaScript 中的函数将`undefined`在调用时返回。因此，如果要返回一个函数，则在此赋值语句中调用您的函数是有意义的唯一上下文：

```
function hello() {
    return function() {
        alert("hi!");
    }
}

elem.onclick = hello(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-08T18:31:27.647

hello() 表示调用该函数，即直接执行该函数。

而当您有 elem.onclick = hello 时，这称为回调。hello 不会直接执行，但仅在触发某个事件时（在这种情况下，当单击元素时）

# bash - 如何在 Makefile 中使用 eval

> ID：15886273
> 
> 赞同：5
> 
> 时间：2013-04-08T18:27:03.643
> 
> 标签：bash, shell, makefile, eval

我正在学习makefile。我在理解 makefile 中 eval 的用法时遇到问题。

这是我的 Makefile：

```
testt:
    @R=5
    $(eval $(echo $R)) 
```

当我运行**make testt**时，没有显示任何内容。你能告诉我是什么原因吗？非常感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T10:57:11.957

当 make 读取你的 makefile 时，它​​将 shell 命令块存储`testt`为单个递归扩展变量。还没有发生任何不愉快的事情。

在读入你的 makefile 之后，make 现在决定要构建什么。`testt`是第一个目标，所以它有一个去。您的文件系统中没有调用`testt`文件，因此 make 决定它必须运行 shell 命令块。

在这一点上，它试图扩展它之前隐藏的变量。它开始于

```
@R=5
$(eval $(echo $R)) 
```

首先是展开`$R`。扩展是空的，留下make with

```
@R=5
$(eval $(echo )) 
```

现在，它扩展了`$(echo )`. 这个变量也不存在，make 已经到了

```
@R=5
$(eval ) 
```

Make 确实知道`$(eval ...)`，但其输出始终为空。所以现在make有了

```
@R=5 
```

扩展完成，make 现在将每一行分别依次传递给 shell 的新调用，检查每个的返回码。所以，shell 看到`R=5`. 此命令（对*shell*变量的简单赋值）完成且没有错误。`@`由于前缀，Make 不会将其回显到标准输出。全部做完。

*始终*使用`--warn-undefined-variables`.

```
$ make --warn-undefined-variables
Makefile:3: warning: undefined variable `R'
Makefile:3: warning: undefined variable `echo '
make: Nothing to be done for `testt'. 
```

（请注意变量名末尾的额外空格：（``echo '`是的，您可以使用包含空格的变量名）。）

哦，虽然我在使用它，但它`$(eval ...)`确实很有用，但不要在 shell 命令中使用它。这很少有意义。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T18:34:08.523

我不知道 stackoverflow 是您在此处查找的信息级别的最佳位置。最好回答具体问题，但基于这个例子，你需要先获得一些更基本的理解。

仅供参考，测试中的第一行是设置*shell*变量`R`。然后该行结束，从该 shell 调用中退出，现在您的变量设置丢失了。然后在下一行中，您通过引用访问*make*变量。那从来没有在任何地方设置过，所以总是一个空字符串。然后您尝试将其提供给 make 函数，但 make 中没有这样的函数，因此也可以扩展为空字符串。然后将生成的空字符串传递给函数，并评估空字符串会产生另一个空字符串，然后将其作为运行命令提供给 shell，它什么都不做。`R``$R``$(echo ...)``$(eval ...)`

如果您想问一个特定的问题（“我如何做 XYZ？”），那么我们可以给出答案……但在这个级别上需要 GNU make 手册的重要部分来提供帮助。你也可以在 help-make@gnu.org 邮件列表上提问。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-12-03T14:02:49.343

指示评估在 makefile 评估中使用带有“shell”命令的 shell `$(shell xxx)`。

不知道为什么需要这样做，但 Makefile 与命令行不同 - 可移植性，但如果这不是问题，则使用 shell 指令。

```
$(eval $(shell echo $R)) 
```

参考“使用 GNU make 管理项目”，O'Reilly，2004，第三次添加，第 89 页：

```
$(eval $(shell echo Shell echo 1>&2)) 
```

# c - 为什么我用 fscanf 读取第二行时得到一个空字符？

> ID：15886279
> 
> 赞同：0
> 
> 时间：2013-04-08T18:27:30.640
> 
> 标签：c

我正在尝试完全读取文件的第一行，直到`\n`将其存储在变量中。然后我尝试读取文件的第二行，但它没有给出正确的输出。我不确定发生了什么。它是在读取空白，还是文件指针在 fscanf() 之后移动？

abc.txt 文件包含：

```
>hello test file<br>
1 
```

但是输出（我在 printf 中得到的）是：

```
status:
>pwd :hello test file 
```

那么为什么这里缺少状态呢？

这是我的程序：

```
#include <stdio.h>
#include <string.h>

int main()
{
  char status,pwd[30];
  FILE *fp;
  fp=fopen("abc.txt","r");
  if(fp == NULL)
    {
        printf("Cannot open file ");
        fclose(fp);
       return 0;
    }

  fscanf(fp,"%29[^\n]",pwd);  
  fscanf(fp,"%c",&status);

  fclose(fp);
  printf("\n Status : %c pwd: %s",status,pwd);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:33:04.917

这里：

```
 fscanf(fp,"%29[^\n]",pwd); 
```

你告诉`fscanf()`它阅读，直到它看到一个换行符，然后停止。这里：

```
 fscanf(fp,"%c",&status); 
```

您要`fscanf()`读取下一个字符（即换行符）。那么这里：

```
printf("\n Status : %c pwd: %s",status,pwd); 
```

它将换行符打印为一个字符（所以你看不到它，它只是一个空行）

如果您想使用 fscanf() 像这样读取它，则需要使用该换行符。

一种选择是只做类似的事情：

```
fscanf(fp,"%29[^\n]",pwd); 
fgetc(fp);
fscanf(fp,"%c",&status); 
```

`%c`另一种解决方案是在告诉`fscanf()`忽略空白字符之前添加一个空格：

```
fscanf(fp,"%29[^\n]",pwd); 
fscanf(fp," %c",&status); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:33:25.153

第一个`fscanf`是将换行符放回原处，因此第二个`fscanf`只是读取换行符，而不是您想要的字符。您可以通过在 之前放置一个空格来解决此问题`%c`，例如

```
fscanf(fp," %c",&status); 
```

# php - 任何用于字符串的简单编码解码或加密解密类 php？

> ID：15886280
> 
> 赞同：2
> 
> 时间：2013-04-08T18:27:35.643
> 
> 标签：php, encode, encryption

我一直在寻找 phpclasses，谷歌，但还找不到一个简单的编码类，它允许我将字符串（唯一数字）编码/加密为**唯一**的短字母数字代码，然后将其解码/解密回原始数字。主要目的是在应用程序中对 facebook 用户 ID 进行编码。

**例子：**

```
1544686448 => EHO1RUJF0G => 1544686448  
1063344785 => ABN2BDOIEH => 1063344785  
50124558 => POKDJMFNE => 50124558 
```

我很确定那里一定存在一个简单的，并且不能花整个月做我自己的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:45:14.110

这是 XTEA 加密算法的 PHP 实现。

```
<?php    
/**
 * This class uses the Tiny Encryption Algorithm (TEA) to provide a fast,
 * simple method to encrypt/decrypt data.
 * 
 * Usage:
 * <?php
 * require_once('xtea.php');
 * // The salt is usually created when a user logs in.
 * $salt = md5(gmdate('Y-m-d H:i:s')); // Generate a better random salt than this!
 *  $_SESSION['salt'] = $salt;
 * // Then we create the xtea object with the previously created $_SESSION['salt'].
 * $xtea = new xtea($_SESSION['salt']);
 * $encrypted_data = $xtea->encrypt('Whatever data you want to encrypt');
 * $decrypted_data = trim($xtea->decrypt($encrypted_data));
 * ?>
 *
 * @see http://en.wikipedia.org/wiki/Tiny_Encryption_Algorithm
 */
class xtea{
    //Private members.
    /**
     * The salt to be used in encrypting/decrypting data.
     * @var string
     */
    private $key;

    /**
     * Flag indicating whether to use CBC or ECB mode. Normally CBC mode would be the right choice so this member defaults to TRUE.
     * @var boolean
     */
    private $cbc = TRUE;

    /**
     * Constructor.
     * @param string $key A string of characters to be used as a salt.
     */
    function __construct($key){
        $this->key_setup($key);
    }

    /**
     * Verify the implementation of the Blowfish algorithm.
     *
     * @return boolean TRUE if the implementation is correct, FALSE otherwise.
     */
    public function check_implementation(){
        $xtea = new xtea("");
        $vectors = array(
            array(array(0x00000000,0x00000000,0x00000000,0x00000000), array(0x41414141,0x41414141), array(0xed23375a,0x821a8c2d)),
            array(array(0x00010203,0x04050607,0x08090a0b,0x0c0d0e0f), array(0x41424344,0x45464748), array(0x497df3d0,0x72612cb5)),
        );

        //Correct implementation?
        $correct = true;

        //Test vectors, see http://www.schneier.com/code/vectors.txt
        foreach($vectors AS $vector){
            $key = $vector[0];
            $plain = $vector[1];
            $cipher = $vector[2];

            $xtea->key_setup($key);
            $return = $xtea->block_encrypt($vector[1][0],$vector[1][1]);

            if((int)$return[0] != (int)$cipher[0] || (int)$return[1] != (int)$cipher[1]){
                $correct = false;
            }
        }
        return $correct;
    }

    /**
     * Decrypt data. Note: all trailing spaces that might have been added in the encrypt method are trimmed.
     *
     * @param string $text The data to be decrypted.
     * @return string The decrypted data.
     */
    public function decrypt($text){
        $plain = array();
        $cipher = $this->_str2long(base64_decode($text));

        if($this->cbc){
            $i = 2; //Message start at second block
        }else{
            $i = 0; //Message start at first block
        }

        for($i; $i<count($cipher); $i+=2){
            $return = $this->block_decrypt($cipher[$i],$cipher[$i+1]);

            //XORed $return with the previous ciphertext
            if($this->cbc){
                $plain[] = array($return[0]^$cipher[$i-2],$return[1]^$cipher[$i-1]);
            }else{
                //EBC Mode
                $plain[] = $return;
            }
        }

        $output = '';
        for($i = 0; $i<count($plain); $i++){
            $output .= $this->_long2str($plain[$i][0]);
            $output .= $this->_long2str($plain[$i][1]);
        }
        return rtrim($output);
    }

    /**
     * Encrypt some data and return it base64 encoded.
     *
     * @param string $text The data to be encrypted.
     * @return string The encrypted data
     * @see base64_encode
     */
    public function encrypt($text){
        $n = strlen($text);
        if($n%8 != 0){
            $lng = ($n+(8-($n%8)));
        }else{
            $lng = 0;
        }

        $text = str_pad($text, $lng, ' ');
        $text = $this->_str2long($text);

        //Initialization vector: IV
        if($this->cbc){
            $cipher[0][0] = time();
            $cipher[0][1] = (double)microtime()*1000000;
        }

        $a = 1;
        for($i = 0; $i<count($text); $i+=2){
            if($this->cbc){
                //$text is XORed with the previous ciphertext
                $text[$i] ^= $cipher[$a-1][0];
                $text[$i+1] ^= $cipher[$a-1][1];
            }
            $cipher[] = $this->block_encrypt($text[$i],$text[$i+1]);
            $a++;
        }

        $output = "";
        for($i = 0; $i<count($cipher); $i++){
            $output .= $this->_long2str($cipher[$i][0]);
            $output .= $this->_long2str($cipher[$i][1]);
        }
        return base64_encode($output);
    }

    /**
     * Decrypt a block of data.
     *
     * @param integer $y
     * @param integer $z
     * @return array The decrypted block of data.
     */
    private function block_decrypt($y, $z){
        $delta=0x9e3779b9;
        $sum=0xC6EF3720;
        $n=32;

        /* start cycle */
        for ($i=0; $i<32; $i++){
            $z      = $this->_add($z, -($this->_add($y << 4 ^ $this->_rshift($y, 5), $y) ^ $this->_add($sum, $this->key[$this->_rshift($sum, 11) & 3])));
            $sum    = $this->_add($sum, -$delta);
            $y      = $this->_add($y, -($this->_add($z << 4 ^ $this->_rshift($z, 5), $z) ^ $this->_add($sum, $this->key[$sum & 3])));
        }
        /* end cycle */
        return array($y,$z);
    }

    /**
     * Encrypt a block of data.
     *
     * @param integer $y
     * @param integer $z
     * @return array The encrypted block of data.
     */
    private function block_encrypt($y, $z){
        $sum=0;
        $delta=0x9e3779b9;

        /* start cycle */
        for ($i=0; $i<32; $i++){
            $y      = $this->_add($y, $this->_add($z << 4 ^ $this->_rshift($z, 5), $z) ^ $this->_add($sum, $this->key[$sum & 3]));
            $sum    = $this->_add($sum, $delta);
            $z      = $this->_add($z, $this->_add($y << 4 ^ $this->_rshift($y, 5), $y) ^ $this->_add($sum, $this->key[$this->_rshift($sum, 11) & 3]));
        }

        /* end cycle */
        $v[0]=$y;
        $v[1]=$z;

        return array($y,$z);
    }

    /**
     * Set up the salt.
     *
     * @param string $key The salt to be used in encrypting/decrypting data.
     */
    private function key_setup($key){
        if(is_array($key)){
            $this->key = $key;
        }else if(isset($key) && !empty($key)){
            $this->key = $this->_str2long(str_pad($key, 16, $key));
        }else{
            $this->key = array(0,0,0,0);
        }
    }

    /**
     * I have no idea what this function actually does. :-)
     *
     * @param integer $i1
     * @param integer $i2
     * @return integer The manipulated data.
     */
    private function _add($i1, $i2){
        $result = 0.0;

        foreach (func_get_args() as $value){
            // remove sign if necessary
            if (0.0 > $value){
                $value -= 1.0 + 0xffffffff;
            }
            $result += $value;
        }

        // convert to 32 bits
        if (0xffffffff < $result || -0xffffffff > $result){
            $result = fmod($result, 0xffffffff + 1);
        }

        // convert to signed integer
        if (0x7fffffff < $result){
            $result -= 0xffffffff + 1.0;
        }elseif (-0x80000000 > $result){
            $result += 0xffffffff + 1.0;
        }
        return $result;
    }

    //Convert a longinteger into a string
    /**
     * Convert a long integer into a string.
     *
     * @param integer $l The long integer to be converted.
     * @return string The converted integer.
     */
    private function _long2str($l){
        return pack('N', $l);
    }

    /**
     * Right shift some data.
     *
     * @param integer $integer
     * @param integer $n
     * @return integer The shifted data.
     */
    private function _rshift($integer, $n){
        // convert to 32 bits
        if (0xffffffff < $integer || -0xffffffff > $integer){
            $integer = fmod($integer, 0xffffffff + 1);
        }

        // convert to unsigned integer
        if (0x7fffffff < $integer){
            $integer -= 0xffffffff + 1.0;
        }elseif (-0x80000000 > $integer){
            $integer += 0xffffffff + 1.0;
        }

        // do right shift
            if (0 > $integer){
                $integer &= 0x7fffffff;         // remove sign bit before shift
                $integer >>= $n;                    // right shift
                $integer |= 1 << (31 - $n); // set shifted sign bit
            }else{
                $integer >>= $n;                    // use normal right shift
            }
        return $integer;
    }

    /**
     * Convert a string into a long integer
     *
     * @param string The string to be converted to a long integer.
     * @return integer The converted string.
     */
    private function _str2long($data){
        $n = strlen($data);
        $tmp = unpack('N*', $data);
        $data_long = array();
        $j = 0;

        foreach ($tmp as $value){
            $data_long[$j++] = $value;
        }
        return $data_long;
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:19:12.847

感谢 Benny Hill，我找到了解决方案。使用 Base36 转换

一个例子：

[使用 PHP 进行 Base36 编码和解码](http://darklaunch.com/2009/07/31/base36-encode-and-decode-using-php-with-example-base36-encode-base36-decode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:42:39.030

我发现了有趣的功能：

```
function dsCrypt($input,$decrypt=false) {
    $o = $s1 = $s2 = array();
    $basea = array('?','(','@',';','$','#',"]","&",'*'); // base symbol set
    $basea = array_merge($basea, range('a','z'), range('A','Z'), range(0,9) );
    $basea = array_merge($basea, array('!',')','_','+','|','%','/','[','.',' ') );
    $dimension=9;
    for($i=0;$i<$dimension;$i++) { // create Squares
        for($j=0;$j<$dimension;$j++) {
            $s1[$i][$j] = $basea[$i*$dimension+$j];
            $s2[$i][$j] = str_rot13($basea[($dimension*$dimension-1) - ($i*$dimension+$j)]);
        }
    }
    unset($basea);
    $m = floor(strlen($input)/2)*2;
    $symbl = $m==strlen($input) ? '':$input[strlen($input)-1];
    $al = array();
    for ($ii=0; $ii<$m; $ii+=2) {
        $symb1 = $symbn1 = strval($input[$ii]);
        $symb2 = $symbn2 = strval($input[$ii+1]);
        $a1 = $a2 = array();
        for($i=0;$i<$dimension;$i++) {
            for($j=0;$j<$dimension;$j++) {
                if ($decrypt) {
                    if ($symb1===strval($s2[$i][$j]) ) $a1=array($i,$j);
                    if ($symb2===strval($s1[$i][$j]) ) $a2=array($i,$j);
                    if (!empty($symbl) && $symbl===strval($s2[$i][$j])) $al=array($i,$j);
                }
                else {
                    if ($symb1===strval($s1[$i][$j]) ) $a1=array($i,$j);
                    if ($symb2===strval($s2[$i][$j]) ) $a2=array($i,$j);
                    if (!empty($symbl) && $symbl===strval($s1[$i][$j])) $al=array($i,$j);
                }
            }
        }
        if (sizeof($a1) && sizeof($a2)) {
            $symbn1 = $decrypt ? $s1[$a1[0]][$a2[1]] : $s2[$a1[0]][$a2[1]];
            $symbn2 = $decrypt ? $s2[$a2[0]][$a1[1]] : $s1[$a2[0]][$a1[1]];
        }
        $o[] = $symbn1.$symbn2;
    }
    if (!empty($symbl) && sizeof($al))
        $o[] = $decrypt ? $s1[$al[1]][$al[0]] : $s2[$al[1]][$al[0]];
    return implode('',$o);
} 
```

例子：

```
$test = "Some test string";
$encoded = dsCrypt($test);
echo $encoded; //output g!1W]!76F(D2JSHO
echo dsCrypt($encoded, true); //output Some test string 
```

资料来源：[http ://habrahabr.ru/post/61309/](http://habrahabr.ru/post/61309/)

# python - 如何使用 Form 子类作为另一个 Form 子类的数据属性？

> ID：15886283
> 
> 赞同：0
> 
> 时间：2013-04-08T18:27:57.563
> 
> 标签：python, python-2.7, flask, wtforms, flask-wtforms

我想做这样的事情，但不知道是否有可能：

```
 from flask.ext.wtf import Form, TextField
    class Foo(Form):
        a = TextField('name')
    class Bar(Form):
        b = Foo() 
```

我得到的错误是

```
 Traceback (most recent call last):
   File "data_attr.py", line 4, in <module>
     class Bar(Form):
   File "data_attr.py", line 5, in Bar
     b = Foo()
   File "/usr/local/lib/python2.7/dist-packages/wtforms/form.py", line 178, in __call__
     return type.__call__(cls, *args, **kwargs)
   File "/usr/local/lib/python2.7/dist-packages/flask_wtf/form.py", line 44, in __init__
     csrf_enabled = current_app.config.get('CSRF_ENABLED', True)
   File "/usr/local/lib/python2.7/dist-packages/werkzeug/local.py", line 336, in __getattr__
     return getattr(self._get_current_object(), name)
   File "/usr/local/lib/python2.7/dist-packages/werkzeug/local.py", line 295, in _get_current_object
     return self.__local()
   File "/usr/local/lib/python2.7/dist-packages/flask/globals.py", line 26, in _find_app
     raise RuntimeError('working outside of application context')
   RuntimeError: working outside of application context 
```

还有其他方法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:53:34.163

您可以通过`FormField`类使用 Field Enclosure

```
class Foo(Form):
    a = TextField('name')

class Bar(Form):
    b = FormField(Foo) 
```

[http://wtforms.simplecodes.com/docs/1.0.3/fields.html#field-enclosures](http://wtforms.simplecodes.com/docs/1.0.3/fields.html#field-enclosures)

# python - 如何测试文件是否包含完整路径或仅包含文件名，Python？

> ID：15886285
> 
> 赞同：3
> 
> 时间：2013-04-08T18:28:00.067
> 
> 标签：python

我有一个从 GUI 运行的脚本。GUI 在 ArcGIS 中运行，基本上，第一个参数可以接受已嵌入 ArcMap 中的文件，或者我可以使用资源管理器对话框导航到文件位置。

如果我使用选项来选择嵌入文件，那么它只返回文件名：

> 即'SOIL_LINES'

如果我使用导航选项，那么它会返回文件名和填充路径：

> C:\SOIL\SOIL_LINES.shp

我想测试输入参数以查看文件是否只是文件名，或者它是否还包含完整路径。我最终需要解析选项 2 中的路径以隔离文件名本身。那部分我已经想通了。

我已经使用过`os.path.isfile`，但这会在两种情况下都返回文件，因为它们都被视为文件。

谢谢，迈克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T18:31:27.730

除了`isabs()`在另一个答案中提到测试它是否是完整路径之外，您还可以使用`os.path.basename()`and`os.path.dirname()`来查找文件名或目录路径。无需自己解析它们。

那个图书馆里有很多很酷的东西。我建议阅读有关它的完整文档——它不长。[http://docs.python.org/2/library/os.path.html](http://docs.python.org/2/library/os.path.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T18:29:29.120

你可能会用[`os.path.isabs`](http://docs.python.org/2/library/os.path.html#os.path.isabs)这个......

# c - 如何正确排序数组？

> ID：15886286
> 
> 赞同：1
> 
> 时间：2013-04-08T18:28:03.130
> 
> 标签：c, sorting, qsort

我有这个排序数组的代码`polsum`：

```
int comp (const void * a, const void * b){   
   double aa = *(double*)a, bb = *(double*)b;

   if (aa < bb) return -1;
   if (aa > bb) return  1;
   return 0;
}

double sort(double *polsum){                              
    int p;
    qsort(polsum, sizeof(double),sizeof(double), comp);
    return 0;
} 
```

但输出是：

```
5,01/
80,86/
85,01/
85,01/
300,88/
600,88/
77888,88/
100400,00/
670,88/
80,86/
80,86/ 
```

我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:33:24.310

您传入 sizeof(double) 以获取要排序的元素数。大小（双）== 8

考虑将以下内容添加到您的排序函数中：

```
双排序（双 *polsum，int 计数）{
    诠释 p;
    qsort(polsum, count, sizeof(double), comp);
    返回0；
}

```

# validation - 骨干验证插件始终验证为真

> ID：15886287
> 
> 赞同：1
> 
> 时间：2013-04-08T18:28:04.627
> 
> 标签：validation, backbone.js

# 第一次尝试

试图让[Backbone.Validation 插件](https://github.com/thedersen/backbone.validation)工作。我已经声明了要验证的属性...

```
class window.Models.SearchQuery extends Backbone.Model

   defaults:
       city: ''
       keywords: ''
       lat: ''
       long: ''
       location: ''
       performed_at: ''
       region: ''

   validation:
       keywords:
           required: true
           pattern: 'number'
       location:
           required: true
           pattern: 'number' 
```

（我将位置设置为一个数字只是为了测试）然后在 Chrome 开发工具中......

```
 s = new Meg.Models.SearchQuery({validate:true})
  s.set({'location': ''})
  s.isValid()
  // true 
```

它总是通过验证..

* * *

# 第二次尝试

将验证混合到模型中，其他一切都相同（如上）。

```
class App.Routers.AppRouter extends Backbone.Router

    initialize: ->
        _.extend(Backbone.Model.prototype, Backbone.Validation.mixin)

s = new App.Models.SearchQuery({validate:true})
//returns object..
m.set({'location': 'ewf3ef3ref3rf'})
//returns object with changed attrs
m.isValid('location')
//TypeError: Cannot call method 'call' of undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:55:30.223

假设您正确设置了 mixin：

```
_.extend(Backbone.Model.prototype, Backbone.Validation.mixin) 
```

使用 Backbone.Validation 时，您需要`true`显式传递以强制验证整个模型。（是的，它与 Backbone 的内置功能不一致）。

从[代码](https://github.com/thedersen/backbone.validation/blob/master/src/backbone-validation.js#L181)`isValid`中可以看出，如果没有明确告知验证所有属性或数组或单个属性，该方法将返回缓存的验证状态。

```
s.isValid(true); 
```

或者，例如：

```
s.isValid("location"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T08:08:07.470

第三方库可能会破坏它。

我今天有完全相同的症状。Mixin 集，验证集，但 model.isValid(true) 始终返回 true。调试后，我发现 Backbone.Validation 使用下划线 _.without 函数（当它为您的模型获取验证规则时），它调用深层 Array.indexOf 中的某处，该函数被 Stylish Select 覆盖（[http://github.com /sko77sun/Stylish-Select](http://github.com/sko77sun/Stylish-Select) ) 导致没有函数返回总是空数组 []。这使得 Backbone.Validation 认为我的模型好像没有设置验证规则，这就是为什么我的模型的任何状态都验证为 true 的原因。

# email - Azure 应用程序的 CNAME 导致电子邮件问题，MX 和 A 记录被忽略

> ID：15886288
> 
> 赞同：7
> 
> 时间：2013-04-08T18:28:05.803
> 
> 标签：email, azure, dns, cname, mx-record

我们有一个在 Microsoft Azure 上运行的应用程序，并设置了一个 CNAME 记录来覆盖该域，因此我们可以拥有[http://example.com](http://example.com)的漂亮 URL （请注意，我在整个过程中将我们的真实域替换为 example.com）。

```
CNAME
mydomain.com -> mydomainapp.cloudapp.net 
```

我们正确设置了 MX 和 A 记录，因此 MX 包含 mailserver.example.com 和将邮件服务器指向正确 IP 地址的 A 记录。

```
MX
mailserver.example.com

A
mailserver -> 198.168.111.111 (note this IP is fictitious) 
```

一切都很好，对于大多数电子邮件，但对于某些邮件服务器（尚不确定是什么技术），他们现在使用 CNAME 而不是 MX 和 A 记录。

因此，发送至 jerry@example.com 的电子邮件实际上会发送至 jerry@exampleapp.cloudapp.net，其中 example.cloudapp.net 是我们使用 CNAME 映射的 Azure 域。

```
EMAIL TO: jerry@example.com
BECOMES: jerry@exampleapp.cloudapp.net 
```

我能找到的唯一建议只是说没有域级别的 CNAME 或根本不使用 CNAME，但当然 Azure IP 地址可以更改，因此我们必须使用 CNAME。我们可以为所有内容添加前缀 www.example.com，但肯定有更好的解决方案。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T08:34:30.407

不可能在域级别使用 CNAME 记录，因为 CNAME 是所有 RR 类型的别名，因此它**总是**会导致 MX、SOA、NS 等查找的重定向。

以下 RFC1912 第 2.4 节的摘录非常清楚地说明了这一点：

> CNAME 记录不允许与任何其他数据共存。换句话说
> ，如果 suzy.podunk.xx 是 sue.podunk.xx 的别名，那么你
> 不能同时拥有 suzy.podunk.edu 的 MX 记录，或者 A 记录，
> 甚至是 TXT 记录。尤其不要尝试
> 像这样组合 CNAME 和 NS 记录！：
> 
> ```
>  podunk.xx.      IN      NS      ns1
>                        IN      NS      ns2
>                        IN      CNAME   mary
>        mary            IN      A       1.2.3.4 
> ```
> 
> 经验不足的管理员通常会尝试这样做，这是让您的域名也成为主机的明显方法。但是，像 BIND 这样的 DNS 服务器会看到 CNAME 并拒绝为该名称添加任何其他资源。由于不允许其他记录与 CNAME 共存，因此忽略 NS 条目。因此，podunk.xx 域中的所有主机也会被忽略！

所以你**不能**使用 CNAME 记录`mydomain.com`！

因此，您必须为`mydomain.com`（根据需要在 MX:s 和其他记录中）设置 A 记录，因为这是 DNS 方面唯一可行的解​​决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T06:18:33.193

是的，有一个更好的解决方案 - 为您的应用程序使用二级域。让它成为`portal.mydomain.com`并使用 a`CNAME`映射`portal.mydomain.com`到`mydomainapp.cloudapp.net`并设置`MX`记录`mydomain.com`并具有表格中的所有地址`user@mydomain.com`。这样一来，您仍然很清楚您拥有`mydomain.com`所有电子邮件，并且您的所有电子邮件看起来仍然很严肃- `user@mydomain.com`，不是`john1094@gmail.com`。

顺便说一句，从技术上讲，上述设置确实意味着您没有域级别`CNAME`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T19:22:23.140

好的，经过大量研究，似乎最好的（至少在我看来）解决方案是使用 A 记录而不是 CNAME 作为域级别记录。

您可能会尖叫“什么！但是 IP 地址是动态分配的！”。是的，但前提是您拆除部署并更换它。只要您发布到登台并使用“交换生产和登台”选项，Windows Azure 就会保留您的 VIP 地址。这样做会保留您的 VIP 地址，因此您可以在 DNS 中使用 A 记录而不是 CNAME。

有关一些背景信息，请参阅[http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns/](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns/)。

注意 MS 官方线路是推荐 CNAME 而不是 A 记录，因为可能会交换 IP 地址，但我猜他们并没有考虑人们想在 Azure 平台上运行[http://mydomain.com 。](http://mydomain.com)

我还找到了其他可能的解决方案，包括在您的应用程序中构建一个 SMTP 侦听器，该侦听器读取端口 25 上的邮件并将其转发回。技术上不错，但是大锤和坚果突然出现在脑海中，而且还有一件事会出错，当然还有一大堆资源需要支付。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T01:10:43.407

正如@Jezbers 在他的回答中提到的那样，我们为我们的根域使用了一条`A`记录，这很好用。该`A`记录不会破坏电子邮件。但是，该`CNAME`记录会影响其他记录（它允许您拥有“重定向域”功能，因此 foo@mydomain.com 也适用于 foo@mynewdomain.com）。

如果您正在寻找比 SMTP 侦听器解决方法更好的“解决方法”解决方案，那么您可以考虑以下事项：

将您的网站托管在`www`子域中并将其放在`CNAME`那里。*让其他东西*托管 301 重定向`www`并使用记录将您`A`的根域指向此重定向站点。

不完美，但很可能是比 SMTP 选项更好的选项。

# android - 从 Web 服务器 Android 下载 XML 文件

> ID：15886291
> 
> 赞同：1
> 
> 时间：2013-04-08T18:28:08.427
> 
> 标签：android, xml, android-asynctask, xmlpullparser

我正在开发一个连接到 Web 服务器并从服务器`XML`上读取数据的大学应用程序。该应用程序正在运行，但我目前正在尝试真正分解代码并准确了解正在发生的事情。

我的问题是我有一个扩展类的内部`AsyncTask`类。在这个内部类中，我创建一个新`URL`对象并获得一个`InputStream`. 我知道因为我这样做了，所以我可以从后台线程成功连接到 Web 服务器并发出我喜欢的任何请求。

过去我总是使用`DefaultHttpClient`来执行`HTTP`请求。但是，在这段代码中，我没有在任何地方创建此类的实例。相反，我只是得到一个输入流来读取字节序列。

有人可以在下面的代码中解释解析规范的含义，以及是否在幕后某个地方`HTTP`实际发出请求？

```
URL url = new URL("http://feeds.pcworld.com/pcworld/latestnews"); 
```

Android Dev 上的文档说：

> 通过解析规范创建一个新的 URL 实例。

这是我的全部`MainActivity`

```
public class MainActivity extends ListActivity {

List<Item>items;//Holds item objects containing info relating to element pulled from XML file.
Item item; //Instance of Item - contains all data relating to a specific Item.
ArticleListAdapter adapter;//Generates the Views and links the data source (ArrayList) to the ListView.

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //Set the layout
    setContentView(R.layout.activity_main);

    //initialize variables
    items = new ArrayList<Item>();

    //Perform a http request for the file on the background thread. 
    new PostTask().execute();

    //Create instance of the adapter and pass the list of items to it.
    adapter = new ArticleListAdapter(this, items);

    //Attach adapter to the ListView.
    setListAdapter(adapter);        

}

private InputStream getInputStream(URL url) {
    try{
        return url.openConnection().getInputStream();
    }catch(IOException e){
        return null;
    }
}

/**
 * Executed when an Item in the List is clicked. Will display the article being clicked in a browser.
 */
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    //Get the link from the item object stored in the array list
    Uri uri = items.get(position).getLink();
    //Create new intent to open browser
    Intent intent = new Intent(Intent.ACTION_VIEW, uri);
    startActivity(intent);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

//ASYNC CLASS
private class PostTask extends AsyncTask<String, Integer, String>{

    @Override
    protected String doInBackground(String... arg0) {
        try{
            //link to data source
            URL url = new URL("http://feeds.pcworld.com/pcworld/latestnews");

            //Set up parser
            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();

            //get XML from input stream
            InputStream in = getInputStream(url);
            if (in == null) {
                throw new Exception("Empty inputstream");
            }
            xpp.setInput(in, "UTF_8");

            //Keep track of which tag inside of XML
            boolean insideItem = false;

            //Loop through the XML file and extract data required
            int eventType = xpp.getEventType();

            while (eventType != XmlPullParser.END_DOCUMENT) {

                if (eventType == XmlPullParser.START_TAG) {
                    Log.v("ENTER", String.valueOf(xpp.getEventType()));

                    if (xpp.getName().equalsIgnoreCase("item")) {
                        insideItem = true;

                        //Create new item object
                        item = new Item();

                    } else if (xpp.getName().equalsIgnoreCase("title")) {
                        if (insideItem){
                            item.setTitle(xpp.nextText());
                            Log.i("title", item.getTitle());
                        }

                    } 

                    else if (xpp.getName().equalsIgnoreCase("description")) {
                        if (insideItem){
                            item.setDescription(xpp.nextText());
                        }
                    }

                    else if (xpp.getName().equalsIgnoreCase("link")) {
                        if (insideItem){
                            item.setLink(Uri.parse(xpp.nextText()));                            
                        }
                    }
                }else if(eventType==XmlPullParser.END_TAG && xpp.getName().equalsIgnoreCase("item")){

                    //If no longer inside item tag then we know we are finished parsing data relating to one specific item.
                    insideItem=false;
                    //add item to list
                    items.add(item);

                }

                eventType = xpp.next(); //move to next element
                publishProgress(); //update progress on UI thread.
            }

                } catch (MalformedURLException e) {

                    e.printStackTrace();

                } catch (XmlPullParserException e) {

                    e.printStackTrace();

                } catch (IOException e) {

                    e.printStackTrace();

                }
                catch (Exception e) {

                    e.printStackTrace();

                }

        return "COMPLETED";
    }

    /*
     * Update the List as each item is parsed from the XML file.
     * @see android.os.AsyncTask#onProgressUpdate(Progress[])
     */
    @Override
    protected void onProgressUpdate(Integer... values) {
        adapter.notifyDataSetChanged();

    }

    /*
     * Runs on UI thread after doInBackground is finished executing.
     * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
     */
    public void onPostExecute(String s) {
        //Toast message to inform user of how many articles have been downloaded.
        Toast.makeText(getApplicationContext(), s + " Items: " + items.size(), Toast.LENGTH_SHORT).show();
        adapter.notifyDataSetChanged();
    }

} 
```

}

如果这个问题非常基本，我很抱歉，但就像我说的我正在努力学习，这就是这个网站的全部内容，对吗？

我很感激人们对此主题的任何反馈或帮助。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:37:32.157

`parsing spec`- 意味着它将解析您传递给构造函数的字符串。URL API 创建者只是以更通用的方式命名此字符串 (url/uri) - 规范。可能是因为它**指定**了您将连接到的资源。如果 string 不代表一个有效的 URL，那么它会抛出`MalformedURLException`. 解析后，它知道用于发出 HTTP 请求的主机、端口、路径等。

创建`URL`实例的事实并不意味着发生任何联网。它类似于`File`API - 创建`File`实例不会打开/读取/写入任何内容。

`url.openConnection().getInputStream()`- 这里是网络发生的地方（一个 HTTP 请求被触发）。

这里是 ULR 的源代码：http: [//www.docjar.com/html/api/java/net/URL.java.html](http://www.docjar.com/html/api/java/net/URL.java.html)所以你可以看看它是如何工作的。

# matlab - 如何根据向量矩阵的顺序对单元格数组列重新排序，同时在 Matlab 中保持行完整？

> ID：15886292
> 
> 赞同：5
> 
> 时间：2013-04-08T18:28:12.187
> 
> 标签：matlab, matrix, cell

我有一个 108x8 矩阵（称为矩阵），如下所示：

```
5   8   3   6   2   1   7   4
8   4   2   7   1   3   6   5
5   4   3   2   1   7   8   6
1   7   8   5   6   4   3   2 
```

我有另一个 108x8 元胞数组（称为数据），如下所示：

```
 'B'  'B' 'B' 'A' 'B' 'B' 'A' 'B'
   'A'  'B' 'B' 'A' 'B' 'A' 'A' 'A'
   'A'  'A' 'B' 'A' 'A' 'B' 'B' 'B'
   'A'  'A' 'A' 'B' 'A' 'A' 'A' 'A' 
```

我想重新排列矩阵，使每一行保持完整并按升序排序。这可以通过`[vals order] = sort(matrix,2)`命令轻松完成。我想以相同的方式重新排列数据矩阵。

以前的解决方案建议使用以下命令：

```
reordered_data=data(order) 
```

但是，这并没有给出预期的结果，它确实重新排列了数据，但顺序不正确。

希望这很清楚，如果需要澄清，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:01:39.983

您可以将`order`索引转换为矩阵索引，因此您不需要循环。

```
[vals, order] = sort(matrix,2);
[r,c] = size(matrix);
index = bsxfun( @plus, order, (0:r-1)'*c );
data = data';
reordered_data = data(index')'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:34:38.123

你试过使用[`sortrows`](http://www.mathworks.nl/help/matlab/ref/sortrows.html)吗？

```
[vals, I] = sortrows(matrix);
for i = 1:size(matrix,1);
     reordered_data(i,:) = data(I(i),:);
end 
```

这是结果：

```
reordered_data = 

    'A'    'A'    'A'    'B'    'A'    'A'    'A'    'A'
    'A'    'A'    'B'    'A'    'A'    'B'    'B'    'B'
    'B'    'B'    'B'    'A'    'B'    'B'    'A'    'B'
    'A'    'B'    'B'    'A'    'B'    'A'    'A'    'A' 
```

# c++ - 在 Visual Studio 2010 中使用 C++ 进行 UI 编程

> ID：15886296
> 
> 赞同：-3
> 
> 时间：2013-04-08T18:28:23.010
> 
> 标签：c++, visual-studio-2010, forms, visual-c++

我想在 Visual Studio 2010 中编程。我选择的编程语言是 C++。我想知道当我点击新项目时我应该选择什么项目？我知道解决方案是项目的集合。

我相信我需要在下面的快照中选择 Win32 项目类型。

![在此处输入图像描述](https://i.stack.imgur.com/C8Npl.jpg)

当我创建新项目时，我得到一个目录结构，其中包括以下文件夹：
1\. 外部依赖项
2\. 头文件
3\. 资源文件
4\. 源文件

我想了解以下内容：

1.  如何以及在哪里编辑 UI 屏幕？我试着玩弄这个项目，但我想不明白从哪里到 IDE 中的屏幕，我可以在其中创建表单、按钮、文本框等。
    我知道我们可以在资源视图中添加对话框（表单） . 但这是唯一的方法吗？如何找到相关的后端代码？
    什么是理解这些概念的好参考资料？

2.  如果创建的解决方案中有多个项目，它们如何相互依赖？

3.  我看过一些示例代码。在那里我看到 `DECLARE_MESSAGE_MAP()`了结尾没有分号的语句。我想知道这是什么意思？从哪里可以了解创建类似项目时要遵循的基本架构。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:38:25.710

在 VC++ 中，如果要从 UI 开始，请从 MFC 项目开始。根据您的需要，您可以创建基于文档视图或对话框的项目。

如果您创建了基于对话框的项目，则有一个资源视图，您可以在其中看到要修改的默认对话框，并且可以在选择对话框视图时看到小部件（按钮、编辑框等）工具箱。

从 Visual Studio 2010 到任何其他版本，开发 MFC 应用程序并没有太大差异。你可以从下面的教程中得到基本的理解。 [http://msdn.microsoft.com/en-us/vstudio/bb693459.aspx](http://msdn.microsoft.com/en-us/vstudio/bb693459.aspx)

# caching - 将从 YAML 文件解析的 PHP 数组存储在 Symfony 的缓存中

> ID：15886307
> 
> 赞同：5
> 
> 时间：2013-04-08T18:28:53.853
> 
> 标签：caching, symfony, yaml

我有一些 YAML 文件要从服务中解析。

但是在每次点击页面时，这些 YAML 文件都会被解析并转换为 PHP 数组。我了解 Symfony 会缓存默认的 YAML 文件，因此它不会在每个页面点击时解析每个 yaml 文件。

我想知道这里的最佳做法是什么。有没有办法让我的 YAML 文件只解析一次并与 Symfony2 的缓存一起存储？如果是这样，我能否指出正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:00:58.483

这完全取决于您希望如何进行缓存。

*   **HTTP 缓存**仅在 Web 上下文中以及当您解析并将这些文件添加到数组的操作的特定输出相对静态时才有意义。如果满足这两个条件，那么这是最好的方法。

*   **您可以轻松地使用 APC**进行缓存。它使缓存变量的内容变得非常简单。Doctrine 提供了围绕 APC 的缓存抽象，或者您可以使用原生 PHP 函数。

在 config.yml

```
 services:
        cache:
            class: Doctrine\Common\Cache\ApcCache 
```

然后在您的控制器或服务中：

```
if ($yamlArray = $this->get('cache')->fetch('foo')) {
    $yamlArray = unserialize($yamlArray);
} else {
    // do the work
    $this->get('cache')->save('foo', serialize($yamlArray));
} 
```

*   **制作自己的缓存服务并将其挂接到 Symfony 缓存命令中**

[有关创建缓存预热器的详细信息](http://blog.servergrove.com/2012/04/18/how-to-create-a-cache-warmer-in-symfony2/)

[有关 cache_clearer 的详细信息](https://github.com/symfony/symfony/pull/2857)（已添加但未充分记录）。

# c++ - 带有自定义类的 std::atomic (C++ 11)

> ID：15886308
> 
> 赞同：25
> 
> 时间：2013-04-08T18:28:54.420
> 
> 标签：c++, xcode, c++11, atomic

我在我的库中使用 std::atomic 和自定义类。MSVC 一切正常，但现在我试图让它在 macOS 上运行，我得到一个链接器错误：

架构 x86_64 的未定义符号：“__atomic_store”，引用自：main.o 中的 _main

我创建了一些测试代码来复制它

```
#include <iostream>
#include <atomic>

using namespace std;

class Vec {
    public:
    int x, y, z;
    Vec() { x = y = z = 0; }
};

std::atomic<Vec> x;

int main()
{
  Vec a;
  x = a;
  cin.get();
    return 0;
} 
```

当然这个例子没有多大意义，但它是我能想到的最短的例子。它确实在 VS2012 中运行，但不在 xcode 中（给我上面显示的链接器错误）。

发生什么了？我在这里滥用 std::atomic 吗？我正在研究的库是大量多线程的，用于音频处理。因此，如果我没有以正确的方式使用 std::atomic，它并没有真正显示出来，因为性能非常好，而且我没有任何线程问题。还是 xcode 可能缺少什么？

**更新：**

我检查了安德烈的答案，因为它包含最多的信息，尽管所有 3 个答案都很有用。我不是这方面的专家（显然），但似乎 VS2012 超出了应该在 C++11 中实现的范围。

那么如何从这里出发呢？我看到几个选项。

1.  不要对此类使用原子。在我的特殊情况下，这将非常困难，因为我的矢量类在整个代码中都使用了。锁定和解锁互斥锁可能会大大减慢速度。
2.  自己实现原子的功能。这对我来说看起来很复杂。我会把它保存为最后一个选项。
3.  看看是否可以使用 boost::atomic 完成某些事情。乍一看，这似乎有效。不过，我必须对其进行更多测试。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T19:18:09.677

如[http://en.cppreference.com/w/cpp/atomic/atomic](http://en.cppreference.com/w/cpp/atomic/atomic)中所述：

> 标准库为以下类型提供了 std::atomic 模板的完整特化：
> 
> 1) bool 类型及其 typedef 的一种
> 特化 2) 整数类型的特化和 typedef
> 3) 所有指针类型的 std::atomic

**Boost.Atomic**怎么样。如[Boost.Atomic 限制](http://www.boost.org/doc/libs/1_53_0/doc/html/atomic/limitations.html)中所述：

> 使用非 POD 类作为 atomic 的模板参数会导致未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:13:38.963

在**clang 编译器设置的****项目页面**中检查您正在使用的标准库。它应该是支持 c++11 的 GNU 的 libstdc++ 或 libc++。

 **希望它会有所帮助。**

# android - https文件从android传输到windows机器

> ID：15886312
> 
> 赞同：1
> 
> 时间：2013-04-08T18:29:07.220
> 
> 标签：android, ssl, https, bouncycastle

我使用http成功地做到了这一点。然后 1) 我对服务器和代码进行了 reqd 更改。2）生成必要的证书并将它们添加到android中的原始文件夹中。（以 bks 格式） 3）即使经过 2 天和很多更改，我仍然会出错。我认为我的证书在服务器上的位置不正确。请让我知道 servertruststore.jks 和 server.jks 到底需要去哪里。

我按照这个链接获取[certis](http://blog.callistaenterprise.se/2011/11/24/creating-self-signed-certificates-for-use-on-android/)（非常棒！）

我的代码：

```
public int uploadFile(String sourceFileUri, Context context) {
          String upLoadServerUri = "https://10.112.72.217/upload_test/upload_media_test.php";
          String fileName = sourceFileUri;

          HttpsURLConnection conn = null;
          DataOutputStream dos = null;  
          String lineEnd = "\r\n";
          String twoHyphens = "--";
          String boundary = "*****";
          int bytesRead, bytesAvailable, bufferSize;
          byte[] buffer;
          int maxBufferSize = 1 * 1024 * 1024; 
          File sourceFile = new File(sourceFileUri); 
          if (!sourceFile.isFile()) {
           Log.e("uploadFile", "Source File Does not exist");
           return 0;
          }

              try {

                  TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
                InputStream clientTruststoreIs = context.getResources().openRawResource(R.raw.clienttruststore);
                  KeyStore truststore = null;
                  truststore = KeyStore.getInstance("BKS");
                  truststore.load(clientTruststoreIs, "meghna".toCharArray());

                  trustManagerFactory.init(truststore);
                  System.out.println("Loaded server certificates: " + truststore.size());

//                  //final KeyStore keystore = this.loadStore(context.getResources().openRawResource(R.raw.client, "meghna", "BKS");
//                  KeyStore keystore = null;
//                  try {
//                      InputStream clientTruststoreIs2 = context.getResources().openRawResource(R.raw.client);
//                      
//                      keystore = KeyStore.getInstance("BKS");
//                      keystore.load(clientTruststoreIs2, "meghna".toCharArray());
//                      System.out.println("Loaded server certificates: " + keystore.size());
//                  } catch (KeyStoreException e) {
//                      // TODO Auto-generated catch block
//                      e.printStackTrace();
//                  }

                  // open a URL connection to the Servlet

//                  TrustManagerFactory tmf = TrustManagerFactory.getInstance("X509");
//                  tmf.init(keystore);

                  SSLContext context2 = SSLContext.getInstance("TLS");
                  context2.init(null, trustManagerFactory.getTrustManagers(), null);

                  URL url = new URL(upLoadServerUri);
                  conn = (HttpsURLConnection) url.openConnection();
                  conn.setSSLSocketFactory(context2.getSocketFactory());
                  InputStream in = conn.getInputStream();

                  FileInputStream fileInputStream = new FileInputStream(sourceFile);

               conn.setDoInput(true); // Allow Inputs
               conn.setDoOutput(true); // Allow Outputs
               conn.setUseCaches(false); // Don't use a Cached Copy
               conn.setRequestMethod("POST");
               conn.setRequestProperty("Connection", "Keep-Alive");
               conn.setRequestProperty("ENCTYPE", "multipart/form-data");
               conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
               conn.setRequestProperty("uploaded_file", fileName); 
               dos = new DataOutputStream(conn.getOutputStream());

               dos.writeBytes(twoHyphens + boundary + lineEnd); 
               dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+ fileName + "\"" + lineEnd);
               dos.writeBytes(lineEnd);

               bytesAvailable = fileInputStream.available(); // create a buffer of  maximum size

               bufferSize = Math.min(bytesAvailable, maxBufferSize);
               buffer = new byte[bufferSize];

               // read file and write it into form...
               bytesRead = fileInputStream.read(buffer, 0, bufferSize);  

               while (bytesRead > 0) {
                 dos.write(buffer, 0, bufferSize);
                 bytesAvailable = fileInputStream.available();
                 bufferSize = Math.min(bytesAvailable, maxBufferSize);
                 bytesRead = fileInputStream.read(buffer, 0, bufferSize);               
                }

               // send multipart form data necesssary after file data...
               dos.writeBytes(lineEnd);
               dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

               // Responses from the server (code and message)
               serverResponseCode = conn.getResponseCode();
               String serverResponseMessage = conn.getResponseMessage();

               Log.i("uploadFile", "HTTP Response is : " + serverResponseMessage + ": " + serverResponseCode);
               if(serverResponseCode == 200){
                   runOnUiThread(new Runnable() {
                        public void run() {
                            tv.setText("File Upload Completed.");
                            Toast.makeText(Mainactivity.this, "File Upload Complete.", Toast.LENGTH_SHORT).show();
                        }
                    });                
               }    

               //close the streams //
               fileInputStream.close();
               dos.flush();
               dos.close();

          } catch (MalformedURLException ex) {  
              dialog.dismiss();  
              ex.printStackTrace();
              Toast.makeText(Mainactivity.this, "MalformedURLException", Toast.LENGTH_SHORT).show();
              Log.e("Upload file to server", "error: " + ex.getMessage(), ex);  
          } catch (Exception e) {
              dialog.dismiss();  
              e.printStackTrace();
              //Toast.makeText(Mainactivity.this, "Exception : " + e.getMessage(), Toast.LENGTH_SHORT).show();
              Log.e("Upload file to server Exception", "Exception : " + e.getMessage(), e);  
          }
          dialog.dismiss();       
          return serverResponseCode;  
         } } 
```

这是错误日志：

```
04-08 23:49:59.843: I/Adreno200-EGL(7728): <qeglDrvAPI_eglInitialize:290>: EGL 1.4 QUALCOMM build: AU_LINUX_ANDROID_ICS_STRAWBERRY_RB2.04.00.04.22.006_msm7627a_ICS_STRAWBERRY_RB2.2_CL2527005_release_AU (CL2527005)
04-08 23:49:59.843: I/Adreno200-EGL(7728): Build Date: 09/12/12 Wed
04-08 23:49:59.843: I/Adreno200-EGL(7728): Local Branch: 
04-08 23:49:59.843: I/Adreno200-EGL(7728): Remote Branch: m/ics_strawberry_rb2.2
04-08 23:49:59.843: I/Adreno200-EGL(7728): Local Patches: NONE
04-08 23:49:59.843: I/Adreno200-EGL(7728): Reconstruct Branch: NOTHING
04-08 23:50:02.093: I/System.out(7728): Loaded server certificates: 1
04-08 23:50:02.233: W/System.err(7728): javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
04-08 23:50:02.233: W/System.err(7728):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:413)
04-08 23:50:02.243: W/System.err(7728):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:257)
04-08 23:50:02.243: W/System.err(7728):     at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:210)
04-08 23:50:02.243: W/System.err(7728):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:477)
04-08 23:50:02.253: W/System.err(7728):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
04-08 23:50:02.263: W/System.err(7728):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
04-08 23:50:02.263: W/System.err(7728):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
04-08 23:50:02.263: W/System.err(7728):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
04-08 23:50:02.263: W/System.err(7728):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
04-08 23:50:02.263: W/System.err(7728):     at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
04-08 23:50:02.273: W/System.err(7728):     at com.example.uploadimagedemo.Mainactivity.uploadFile(Mainactivity.java:145)
04-08 23:50:02.273: W/System.err(7728):     at com.example.uploadimagedemo.Mainactivity$1$1.run(Mainactivity.java:78)
04-08 23:50:02.273: W/System.err(7728):     at java.lang.Thread.run(Thread.java:864)
04-08 23:50:02.273: W/System.err(7728): Caused by: java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
04-08 23:50:02.283: W/System.err(7728):     at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkTrusted(TrustManagerImpl.java:184)
04-08 23:50:02.283: W/System.err(7728):     at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:163)
04-08 23:50:02.283: W/System.err(7728):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.verifyCertificateChain(OpenSSLSocketImpl.java:593)
04-08 23:50:02.283: W/System.err(7728):     at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
04-08 23:50:02.283: W/System.err(7728):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:410)
04-08 23:50:02.283: W/System.err(7728):     ... 12 more
04-08 23:50:02.293: W/System.err(7728): Caused by: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
04-08 23:50:02.293: W/System.err(7728):     ... 17 more
04-08 23:50:02.313: E/Upload file to server Exception(7728): Exception : java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
04-08 23:50:02.313: E/Upload file to server Exception(7728): javax.net.ssl.SSLHandshakeException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:413)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:257)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at libcore.net.http.HttpConnection.setupSecureSocket(HttpConnection.java:210)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:477)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at com.example.uploadimagedemo.Mainactivity.uploadFile(Mainactivity.java:145)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at com.example.uploadimagedemo.Mainactivity$1$1.run(Mainactivity.java:78)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at java.lang.Thread.run(Thread.java:864)
04-08 23:50:02.313: E/Upload file to server Exception(7728): Caused by: java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkTrusted(TrustManagerImpl.java:184)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:163)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.verifyCertificateChain(OpenSSLSocketImpl.java:593)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_do_handshake(Native Method)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:410)
04-08 23:50:02.313: E/Upload file to server Exception(7728):    ... 12 more
04-08 23:50:02.313: E/Upload file to server Exception(7728): Caused by: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
04-08 23:50:02.313: E/Upload file to server Exception(7728):    ... 17 more
04-08 23:50:02.313: I/System.out(7728): RES : 0 
```

# android - 如何在android中读取联系人

> ID：15886320
> 
> 赞同：0
> 
> 时间：2013-04-08T18:29:34.397
> 
> 标签：android

我正在开发一个 android 短信应用程序，我想在其中使用以下代码从联系人中读取联系人号码

```
 Intent ContactPickerIntent = new Intent(Intent.ACTION_PICK,ContactsContract.Contacts.CONTENT_URI);
            ContactPickerIntent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);
            startActivityForResult(ContactPickerIntent, CONTACT_PICKER_RESULT); 
```

它在模拟器上运行良好，但在设备上运行良好。我应该进行哪些更改才能使其在设备上运行。

这是我的 onactivityresult 函数

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
     if (resultCode == RESULT_OK)
     {  
         switch (requestCode) 
         {  
         case CONTACT_PICKER_RESULT:
             Cursor cursor=null;
             try
             {   
                 Uri result = data.getData();
                 Log.v(DEBUG_TAG, "Got a contact result: " + result.toString());

                 // get the contact id from the Uri     
                 String id = result.getLastPathSegment();

                 // query for everything contact number  
                 cursor = getContentResolver().query(  
                      Phone.CONTENT_URI, null,  
                      Phone.CONTACT_ID + "=?",  
                      new String[]{id}, null); 

                 cursor.moveToFirst();
                 int phoneIdx = cursor.getColumnIndex(Phone.NUMBER);  
                 if (cursor.moveToFirst())
                 {   
                     phonenofromcontact = cursor.getString(phoneIdx);
                     finallistofnumberstosendmsg +=","+phonenofromcontact;
                     Log.v(DEBUG_TAG, "Got phone no : " + phonenofromcontact);  
                 }
                 else 
                 {                                
                     Log.w(DEBUG_TAG, "No results"); 
                 }
             }
             catch(Exception e)
             {
                 Log.e(DEBUG_TAG, "Failed to get contact number", e);
             }
             finally
             {
                 if (cursor != null)
                 {  
                     cursor.close();
                 }
             }
             phonePhoneno= (EditText)findViewById(R.id.phonenofromcontact);
             phonePhoneno.setText(finallistofnumberstosendmsg);
             //phonePhoneno.setText(phonenofromcontact);
             if(phonenofromcontact.length()==0)
             {
                 Toast.makeText(this, "No contact number found for this contact",
                         Toast.LENGTH_LONG).show(); 
             }
            break;  
         }  
     } 
     else
     {  
         Log.w(DEBUG_TAG, "Warning: activity result not ok");
     }  
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:06:59.860

您正在使用以下方法过滤您的意图：

```
ContactPickerIntent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE); 
```

它告诉 Contacts Provider 只返回包含 Phone 内容类型的联系信息。

因此，Contacts Provider 返回的 ID 是`_ID`表的`ContactsContract.Data`- 而不是`CONTACT_ID`

尝试将光标查询更改为：

```
 // query for everything contact number  
 cursor = getContentResolver().query(  
              Phone.CONTENT_URI, null,  
              Phone._ID + "=?",  
              new String[]{id}, null); 
```

这应该会返回您选择的联系人号码。

`ContactPickerIntent.setType`顺便说一句，如果您没有调用Intent ，您最初编写的数据查询将会起作用（**如果您进行了上述更改 - 那么您仍然需要调用它！）**

它可能很幸运地在你的模拟器上工作 - 我猜你的模拟器上可能有一个联系人与一个电话号码？很可能 Data 表的 the`CONTACT_ID`和 the`_ID`都为 1，这会巧合地返回正确的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:34:31.170

您需要将权限添加`android.permission.READ_CONTACTS`到您的 AndroidManifest.xml 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:39:36.950

需要 android manifest 文件中的权限：

```
<uses-permission android:name="android.permission.READ_CONTACTS" >
    </uses-permission> 
```

这是我的工作代码：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("content://contacts/people/"));
startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-03T15:16:46.750

只是改变

```
// query for everything contact number  
                 cursor = getContentResolver().query(  
                      Phone.CONTENT_URI, null,  
                      Phone.CONTACT_ID + "=?",  
                      new String[]{id}, null); 
```

到

```
// query for everything contact number  
                 cursor = getContentResolver().query(  
                      Phone.CONTENT_URI, null,  
                      Phone._ID + "=?",  
                      new String[]{id}, null); 
```

# go - 惯用的方式来超时 websocket.Dial in go？

> ID：15886323
> 
> 赞同：4
> 
> 时间：2013-04-08T18:29:38.663
> 
> 标签：go

我有如下代码：

```
_, err := websocket.Dial("wss://remote-server", "", "http://localhost")

if (err == nil) {
  fmt.Println("Worked!")
} else {
  fmt.Println("Fail")
} 
```

关闭时`remote-server`，超时需要 60 秒。我找到了`websocket.SetDeadline`（[http://godoc.org/code.google.com/p/go.net/websocket#Conn.SetDeadline](http://godoc.org/code.google.com/p/go.net/websocket#Conn.SetDeadline)），但我还没有连接来应用它。我可以将 a 传递`Config`给`DialConfig`，但我看不到在哪里指定超时时间。

我找到了[https://code.google.com/p/go-wiki/wiki/Timeouts](https://code.google.com/p/go-wiki/wiki/Timeouts)，我必须这样做吗？如何正确地将错误代码从 goroutine 传回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:12:25.310

我还没有使用 go websocket 包，但从我可以从文档中推断出应该使用[net.DialTimeout(...)](http://godoc.org/net#DialTimeout)和[websocket.NewClient(...)](http://godoc.org/code.google.com/p/go.net/websocket#NewClient)

[DialConfig](https://code.google.com/p/go/source/browse/websocket/client.go?repo=net#80)的来源使用相同的方法，但仅限于 net.Dial。

# asp.net-mvc-3 - 我找不到解决方案的 MVC 路由问题

> ID：15886326
> 
> 赞同：0
> 
> 时间：2013-04-08T18:29:50.633
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我有一个名为用户的区域。在该区域下，我有一个名为 Index 的视图。

只有一条路线的区域注册：

```
public override void RegisterArea(AreaRegistrationContext context)
{
context.MapRoute(
                "0",
                "user/signup",
                new { action = "Index", controller = "Signup" },
                new string[] { "Company.Web.Areas.User.Controllers" }
            );
} 
```

控制器路径：

```
Areas\User\Controllers\SignupController.cs 
```

查看路径：

```
Areas\User\Views\Signup\Index.cshtml 
```

这就是我尝试使用注册超链接在标头中生成 URL 的方式：

```
<a href="@Url.Action("Index", "Signup", new { area = "User", returnUrl=ViewContext.HttpContext.Request.Url.PathAndQuery })">Signup</a> 
```

这是我得到的网址： [http ://www.myserver.com/user/signup?returnUrl=home/main](http://www.myserver.com/user/signup?returnUrl=home/main)

url 看起来正确，路由只有一个路由。

但是当我点击网址时，它说：找不到资源。用户/注册

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:34:21.860

尝试

```
context.MapRoute(
            "signup",
            "{controller}/{action}", // URL with parameters
            new { controller = "Signup", action = "Index" } // Parameter defaults
        ); 
```

这应该映射到注册控制器和索引操作

# java - 密码加密

> ID：15886330
> 
> 赞同：0
> 
> 时间：2013-04-08T18:29:57.130
> 
> 标签：java, encryption, cryptography, password-encryption

我正在尝试编写一个密码加密类，可用于加密和存储用户密码。我想确保我做的正确。这段代码工作正常，似乎生成了一个加密密码，但我想在这里发布它以获得一些反馈。对我来说，这相当复杂，而且我知道加密货币中的任何东西都很容易犯错误，而没有意识到你正在犯错误。

这是我的代码：

```
 public CipherHandler {

        public String encryptPassword(char[] plaintext, String encoding) throws Exception {

            MessageDigest msgDigest = null;
            String hashValue = null;

            /* Convert char array plaintext to byte array */
            byte[] b = new byte[plaintext.length << 1];
            for (int i = 0; i < plaintext.length; i++) {
                b[i] = (byte) plaintext[i]; //will this work regardless of encoding?
            }

            try {
                msgDigest = MessageDigest.getInstance("SHA-256");
                msgDigest.update(b);
                byte rawByte[] = msgDigest.digest();
                hashValue = (new BASE64Encoder()).encode(rawByte);
            } catch (NoSuchAlgorithmException e) {
                System.out.println("No Such Algorithm Exists");
            }

            System.out.println(hashValue);
            return hashValue;
        }            
    } 
```

这个函数通常会从 Swing 事件处理程序中调用，用户将在其中将密码输入到 JPassword 字段中，这就是我从 char[] 开始的原因。为了测试，我使用这段代码来调用函数：

```
CipherHandler cp = new CipherHandler();
String initPW;
try {
    initPW = cp.encryptPassword("welcome".toCharArray(), "UTF-8");
} 
```

由于这是我第一次尝试，我想我忽略了一些东西。我对*任何*建议或意见感兴趣。不过，我确实有几个具体问题：

1.  当我将 char[] 转换为 byte[] 时，我不相信我这样做是正确的。我怎么知道要使用哪种编码？在这里，我输入了“UTF-8”，主要是作为占位符，但我担心这在某些情况下可能会失败。

2.  我已经读过我应该在密码被消化后使用盐和迭代，但我不知道如何做到这一点。有人可以给我建议吗？

3.  我正在使用 SHA-256。这是建议的算法吗？我也读过MD5。有没有一种算法更适合密码加密？

谢谢你的帮助。我很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:33:20.100

通常，密码是通过散列而不是加密来存储的。

```
MessageDigest md = MessageDigest.getInstance("SHA-256");
byte[] hash = md.digest(password.getBytes("UTF-8")); 
```

然后将新生成的哈希与您存储在数据库或任何地方的哈希进行比较。

对密码加盐也是一个好主意 - 这是一个明文值，您在对密码进行散列之前附加到密码。这使得某人更难以执行离线暴力攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:41:48.830

MD5 已经死了，UTF-8 应该是你最不担心的。阅读[本文](https://security.stackexchange.com/questions/17421/how-to-store-salt/17435#17435)
当然，根据您加密密码的目的（取决于您获得的目标受众类型），如果您在安全堆栈交换中搜索足够长的时间，您将很快找到您所面临挑战的完整答案。

只是我的 0.02 美元

# ios - 在 ViewController 中使角变成正方形的方法？

> ID：15886334
> 
> 赞同：0
> 
> 时间：2013-04-08T18:30:23.500
> 
> 标签：ios, xcode

我已经构建了一个演示应用程序，并且想知道现在是否有任何方法可以将这个应用程序更改为在应用程序的顶部菜单栏中具有方角？我已经看到其他具有此功能的应用程序，并且想知道是否有人可以为我指出如何实现此目的的正确方向。谢谢！

```
Before: 
```

![在此处输入图像描述](https://i.stack.imgur.com/2ACjm.png)

```
After: 
```

![在此处输入图像描述](https://i.stack.imgur.com/2x2pG.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:11:32.607

在 iOS 6.0 或更高版本中，如果将状态栏样式设置为`UIStatusBarStyleBlackOpaque`，则会得到圆角。如果将状态栏样式设置为`UIStatusBarStyleDefault`或`UIStatusBarStyleBlackTranslucent`，则会得到方角。

![状态栏样式](https://i.stack.imgur.com/XaZL6.gif)

# ruby-on-rails - 多态关联 ids、has_one 和唯一性

> ID：15886335
> 
> 赞同：0
> 
> 时间：2013-04-08T18:30:23.733
> 
> 标签：ruby-on-rails, polymorphic-associations

我有一个多态关联，其中管理员和开发人员各有一个用户（用于通用身份验证机制）

**开发者.rb**

```
class Developer < ActiveRecord::Base
  attr_accessible :skype_name
  has_one :user, :as => :profile, :dependent => :destroy
  accepts_nested_attributes_for :user
end 
```

**Admin.rb**相同，但没有添加任何新属性

**用户.rb**

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation, :profile_id, :profile_type
  has_secure_password

  belongs_to :profile, :polymorphic => true
  before_save { |user| user.email = email.downcase }

  ... some validations for unique email and before_save stuff ...
end 
```

当我通过 rails 控制台创建开发人员或管理员时，User.profile_id 始终是唯一的，它与我刚刚创建的开发人员或管理员相同。它似乎也与[这里的图表相匹配](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)

如果我有一个带有`profile_type`=的用户`Developer`，并且我想获得对开发人员的引用，那么通过调用获得引用是否安全，`Developer.find(u.profile_id)`对于管理员也是如此？如果没有，那么我怎样才能安全地做到这一点？

它目前有效，但我不确定这是否只是幸运，因为我的桌子很小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:41:40.020

是的。快速回答是，因为您将配置文件类型设置为“开发人员”，所以用户配置文件 ID 应该与开发人员表中的 ID 匹配。想象一下你有

# 用户一

```
id: 1
name: Bob
profile_type: Developer
profile_id: 1 
```

# 用户二

```
id: 2
name: Shelly
profile_type: Admin
profile_id: 1 
```

因为您设置了多态关联，Rails 会为您处理所有工作。无需担心身份冲突。当然，除非您将用户二更改为

# 更新用户二

```
id: 2
name: Shelly
profile_type: Developer
profile_id: 1 
```

然后，当您有两个用户作为同一个开发人员时，Rails 将不知道该怎么做。

在您的开发人员和管理员表中，您应该找到

# 开发人员表

```
id: 1
skype_name Bob123 
```

# 管理员表

```
id: 1
skype_name Shelly78 
```

# jquery - 我什么时候需要在 jquery 中使用每个

> ID：15886336
> 
> 赞同：0
> 
> 时间：2013-04-08T18:30:24.483
> 
> 标签：jquery, each

例如，如果我有一些这样的 HTML

```
<ul>
    <li><a href="#">one</li>
    <li><a href="#">two</li>
    <li><a href="#">three</li>
</ul 
```

我想使用 jquery 来影响每个`li`项目中的锚标记。在什么情况下我需要在`each`它们之间循环，在什么情况下 jquery 会自动应用于所有`li`的

例如，如果我这样做

```
jQuery('ul li a').css('color', 'red'); 
```

这将使每个 a 标记都变成红色，但是无论我使用哪种方法都是这种情况，是否还有其他需要使用的场景（不同的 HTML 或选择器）`each`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:33:55.703

`jQuery('ul li a').css('color', 'red')`是颜色为 的示例`red`。但是，您可以使用`$.each`for 假设您必须在应用颜色之前进行一些处理`red`。例子：

```
$('ul li a').each(function(){
    if($(this).parent().hasAttr('error')){  
        $(this).css('color', 'red');
    }
}); 
```

在第一种情况下您无法进行检查，但您可以使用`.each`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:32:32.557

如果你想做一些更复杂的事情，你可以运行一个函数。

例如，如果您想对每个元素发出警报：

```
$('ul li a').each(function(index, value) { alert(index); }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:46:10.217

大多数时候，`each`是多余的或暗示的。如果`each`您需要该特定元素独有的东西（主要示例是`id`），请使用。

使用`$('ul li a').attr('id')`查找 the`id`只会提供第一个`id`. 这意味着您必须使用：

```
$('ul li a').each(function(){
   $(this).attr('id');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T18:36:34.243

每当您想遍历子元素时，您都可以使用`each`. 无论它们是列表、div 集、跨度还是段落。

每当您想为包装器中的每个孩子编写一些逻辑时，您都可以使用`each`

例子 ：

```
$('#oneDiv div').each(function(){
     if(div.text() === null)
        //do Something
 }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-12T11:37:36.117

正如您在 jQuery API 文档中看到的那样：[https](https://api.jquery.com/each/#each-function) ://api.jquery.com/each/#each-function ，对于您的示例，不需要如他们的示例所示。

```
// The .each() method is unnecessary here:
$( "li" ).each(function() {
  $( this ).addClass( "foo" );
});

// Instead, you should rely on implicit iteration:
$( "li" ).addClass( "bar" ); 
```

# javascript - Skrollr 动画在 IE 8 和 IE 9 中不稳定

> ID：15886339
> 
> 赞同：6
> 
> 时间：2013-04-08T18:30:37.860
> 
> 标签：javascript, jquery, html, css

在 IE 8 和 9 中滚动页面时，我使用 Skrollr 构建的页面上的动画非常不稳定。我已经在 IE 8 中的[https://github.com/Prinzhorn/skrollr](https://github.com/Prinzhorn/skrollr)上的示例部分测试了其他一些站点，并且9 并且没有注意到动画上的任何波动。关于为什么会在我的网站上发生这种情况的任何想法？[http://group.com/womens-ministry/where-moms-connect](http://group.com/womens-ministry/where-moms-connect)

# python - 如何从字符串中提取所有 UPPER？Python

> ID：15886340
> 
> 赞同：20
> 
> 时间：2013-04-08T18:30:43.017
> 
> 标签：python, string, extract, uppercase, lowercase

```
#input
my_string = 'abcdefgABCDEFGHIJKLMNOP' 
```

如何从字符串中提取所有 UPPER？

```
#output
my_upper = 'ABCDEFGHIJKLMNOP' 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-08T18:32:56.983

使用列表理解：

```
>>> s = 'abcdefgABCDEFGHIJKLMNOP'
>>> ''.join([c for c in s if c.isupper()])
'ABCDEFGHIJKLMNOP' 
```

使用生成器表达式：

```
>>> ''.join(c for c in s if c.isupper())
'ABCDEFGHIJKLMNOP 
```

您也可以使用正则表达式来做到这一点：

```
>>> re.sub('[^A-Z]', '', s)
'ABCDEFGHIJKLMNOP' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T18:34:54.733

```
import string
s = 'abcdefgABCDEFGHIJKLMNOP'
s.translate(None,string.ascii_lowercase) 
```

[string.translate(s, table[, deletechars])](http://docs.python.org/2/library/string.html#string.translate)函数将从字符串中删除 deletechars 中的所有字符，这是**一个**字符列表。然后，将使用 table 翻译字符串*（在这种情况下我们不使用它）*。

要仅删除小写字母，您需要传递[string.ascii_lowercase](http://docs.python.org/2/library/string.html#string.ascii_lowercase)作为要删除的字母列表。

`table`是 None 因为当 table 是 时，`None`只会执行字符删除步骤。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-08T18:38:17.160

高阶函数来救援！

```
filter(str.isupper, "abcdefgABCDEFGHIJKLMNOP") 
```

**编辑**：如果您不知道过滤器的作用：过滤器接受一个函数和一个可迭代对象，然后将该函数应用于可迭代对象中的每个元素。它保留所有返回 true 的值并丢弃所有其余的值。因此，这将返回“ABCDEFGHIJKLMNOP”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-08T18:38:19.437

您可以使用更实用的方法

```
>>> s = 'abcdefgABCDEFGHIJKLMNOP'
>>> filter(str.isupper, s)
'ABCDEFGHIJKLMNOP' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-08T18:35:43.573

或使用正则表达式...这是一个简单的答案

```
import re
print ''.join(re.findall('[A-Z]+',my_string)) 
```

只是为了比较

```
In [6]: %timeit filter(str.isupper,my_list)
1000 loops, best of 3: 774 us per loop

In [7]: %timeit ''.join(re.findall('[A-Z]+',my_list))
1000 loops, best of 3: 563 us per loop

In [8]: %timeit re.sub('[^A-Z]', '', my_list)
1000 loops, best of 3: 869 us per loop

In [10]: %timeit ''.join(c for c in my_list if c.isupper())
1000 loops, best of 3: 1.05 ms per loop 
```

所以这个 join plus findall 是最快的方法（每个 ipython %timeit (python 2.6)），使用 10000 个字符长的相同字符串

**编辑**：或不

```
In [12]: %timeit  my_list.translate(None,string.ascii_lowercase)
10000 loops, best of 3: 51.6 us per loop 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-22T19:20:06.020

干得好：

```
my_string = 'abcdefgABCDEFGHIJKLMNOP'

cleanChar = ''

for char in my_string:
    if char in 'ABCDEFGHIJKLMNOPQRSTUVWXYZ':
        cleanChar = cleanChar + char

newChar = cleanChar
print(" {}".format(newChar)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-11T21:44:37.670

```
for char in my_string:
     if char in "ABCDEFGHIJKLMNOPQRSTUVWXYZ":
         print(char) 
```

# c++ - c ++从嵌套类方法访问变量

> ID：15886345
> 
> 赞同：4
> 
> 时间：2013-04-08T18:30:51.743
> 
> 标签：c++, oop

如何从其嵌套类方法访问类属性？

```
class Class1
{
public:
    int attribute;
    void Method1() { 
        class Class2
        {
            public:
               void Method2() { 
                   //here I need to access attribute from Class1
               }
        };
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:39:22.857

您可以传递`this`给内部类。例如：

```
class Class1
{
public:
    Class1() : class2(this) {
    }

    int attribute;
    void Method1() { 
    };

    class Class2
    {
        Class1 *parent;
    public:
        Class2(Class1 *parent) : parent(parent) {
        }
        void Method2() { 
             // parent->attribute
        }
   } class2;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T19:06:42.460

以下是对 OP 代码进行细微更改的一种方法。

```
#include <cassert>

class Class1
{
    public:
        Class1( int attribute ) : attribute_( attribute ) {
        }
        void Method1() { 
            class Class2
            {
                public:
                    Class2( Class1 * parent ) : parent_( parent ) {
                    }
                    int parentAttribute() const { 
                        return parent_->attribute_;
                    }
                private:
                    Class1 * parent_;
            };
            Class2 c2( this );
            assert( c2.parentAttribute() == attribute_ );
        }
    private:
        int attribute_;
};

int main() {
    Class1 c1( 42 );;
    c1.Method1();
} 
```

该代码也发布在[http://codepad.org/MUF3a8jL](http://codepad.org/MUF3a8jL)

# android - 从 Internet 资源更新 ContentProvider 的底层 SQLite 数据库

> ID：15886359
> 
> 赞同：2
> 
> 时间：2013-04-08T18:31:37.177
> 
> 标签：android, android-contentprovider

我已经实现了`ContentProvider`一个从底层 SQLite 数据库提供地理位置列表的服务。

这些位置实际上是模型的输出，并以简单的 JSON 字符串形式在线提供；我不想在每次启动应用程序时都继续下载它们，所以我想将它们本地存储在数据库中并以预定义的时间间隔更新它们（例如每天一次）。

我的问题是，我应该在哪里实现下载和解析代码？它应该成为我`ContentProvider`实施的一部分吗？还是`SQLiteOpenHelper`实施的一部分？

我开始将它实现为`updateSiteList`在 my中调用的公共函数`ContentProvider`，但我不知道如何实际调用它（ContentProvider 通常通过 间接访问`CursorLoader`）！

我对如何进步感到有点困惑！

谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:11:44.873

有几种方法可以实现这一目标。我使用的两种最常见的方法是：-

1）自定义同步适配器。

2) 意向服务。

使用选项 1，您可以获得 Android 系统处理网络连接问题的好处，并且是 android 开发人员推荐的方法

使用选项 2，您可以更好地控制何时下载数据，这可能是也可能不是用户或 Android 系统的最佳时间。

无论哪种方式，解决方案都是相同的。在某个时间点，您将在后台服务中向 url 发出 HTTP get 请求。当您的请求完成时，您将需要检查响应的状态，如果合适，您将致电内容提供商以相应地插入或更新您的数据。无论您采取哪种方法，这部分都是一样的。

一些进一步的阅读给你。 [https://sites.google.com/site/andsamples/concept-of-syncadapter-androidcontentabstractthreadedsyncadapter](https://sites.google.com/site/andsamples/concept-of-syncadapter-androidcontentabstractthreadedsyncadapter)

请务必观看 Google I/O 视频

无论您采用哪种方法，下载 json 并插入到您的内容提供程序的代码在从您的同步适配器或从您的应用程序中的某个位置调用的 IntentService 中可能看起来像这样（如果不使用同步适配器）。

```
public class ServiceInitialiseData extends IntentService {
    static final String TAG = "ServiceSyncData";
    //ACTION should include application package convention, just to show that this can
    //be any string
    public static final String SYNC_COMPLETED_ACTION="com.pjmobile.games.fantasyf1.SyncCompleted";

    public ServiceInitialiseData() {
        super("InitialiseDataService");
    }

    @Override
    protected void onHandleIntent(Intent intent) {
        String sJson;
        try {
            sJson = downloadFromServer("Some parsed url");
            int i, x;
            boolean res = false;
            List <ContentValues> bulkValues = new ArrayList <ContentValues>();
            JSONArray entries;
            try {
                entries = new JSONArray(sJson);
                ContentValues cvEntity = null;
                JSONObject entity;
                x = entries.length();
                for (i=0;i<x;i++){
                    entity = entries.getJSONObject(i).getJSONObject("some_json_key");
                    bulkValues.add(cvEntity);
                }
            }
            int qCount = getContentResolver().bulkInsert(uri,
            (ContentValues[])bulkValues.toArray(new
                    ContentValues[bulkValues.size()]));

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    private String downloadFromServer(String url) throws ClientProtocolException, IOException {
        HttpResponse sJson = getJSONEntityFromURL(this, url);
        return EntityUtils.toString(sJson.getEntity());
    }

    private static HttpResponse getJSONEntityFromURL(Context context, String url) throws ClientProtocolException, IOException {
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(url);
        httpget.addHeader("Accept", "application/json");
        httpget.addHeader("Content-Type", "application/json; charset=UTF-8");
        HttpResponse response;

        response = httpclient.execute(httpget);
        return response;
    } 
```

要使上述方法正常工作，您必须对内容提供者的批量插入方法进行 ode，这可能看起来像这样

```
 @Override
    public int bulkInsert(Uri uri, ContentValues[] values) {
        final SQLiteDatabase db = mDB.getWritableDatabase();
        final int match = sURIMatcher.match(uri);
        int numInserted= 0;
//        Util.log_debug_message("@@@@ URI MATCH - " + match);
        switch(match){
            case TEAMS:
                numInserted = insertTeams(db, values);
                break;
            default:
                throw new UnsupportedOperationException("unsupported uri: " + uri);
        }
        getContext().getContentResolver().notifyChange(uri, null, false);
        return numInserted;
    }

    private int insertTeams(SQLiteDatabase db, ContentValues[] values) {
        int numInserted = 0;
        db.beginTransaction();
        try {
        //standard SQL insert statement, that can be reused
            SQLiteStatement insert = 
                db.compileStatement(INSERT_OR_REPLACE_STRING + TeamModel.TEAM_TABLE_NAME
                        + "(" + TeamModel.COL_SERVER_ID
                        + "," + TeamModel.COL_BONUS_RACE_ID
                        + "," + TeamModel.COL_POINTS
                        + "," + TeamModel.COL_POSITION
                        + "," + TeamModel.COL_TEAM_NAME + ")"
                        +" values " + "(?,?,?,?,?)");

            for (ContentValues value : values){
    //bind the 1-indexed ?'s to the values specified
                insert.bindString(1, value.getAsString(TeamModel.COL_SERVER_ID));
                insert.bindString(2, value.getAsString(TeamModel.COL_BONUS_RACE_ID));
                insert.bindString(3, value.getAsString(TeamModel.COL_POINTS));
                insert.bindString(4, value.getAsString(TeamModel.COL_POSITION));
                insert.bindString(5, value.getAsString(TeamModel.COL_TEAM_NAME));
                insert.execute();
            }
            db.setTransactionSuccessful();
            numInserted = values.length;
        } finally {
            db.endTransaction();
            db.close();
        }
        return numInserted;
    } 
```

这不是复制和粘贴解决方案。只是从我的一个应用程序中删除的一个示例，您应该查看每一行代码并非常小心地了解发生了什么。

# excel - 组合（聚合）多个 Excel 文件的最佳方法是什么？

> ID：15886366
> 
> 赞同：0
> 
> 时间：2013-04-08T18:32:31.667
> 
> 标签：excel

我有多个包含相同列的 EXCEL 电子表格，只是每个源的数据不同。

* * *

**EXCEL 文件 #1：**

网址 | 命中

[http://myothersite.com](http://myothersite.com) 5

[http://mysite.com](http://mysite.com) 8

**EXCEL 文件 #2：**

网址 | 命中

[http://mysite.com](http://mysite.com) 2

**EXCEL 文件合并**：

网址 |
[点击](http://mysite.com) http://mysite.com **10**

[http://myothersite.com](http://myothersite.com) 5

* * *

我需要一个解决方案，将**单个电子表格中的所有数据聚合到一个组合电子表格**中。每个电子表格都有相同的列，只是数据不同。希望这是一些标准解决方案的常见问题。我对编程解决方案和软件解决方案持开放态度。谢谢！

jg

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:36:08.143

请使用插件[RDBMerge](http://www.rondebruin.nl/merge.htm)。

# c# - 如何在 C# 中设置多个整数 ReportParameter？

> ID：15886368
> 
> 赞同：6
> 
> 时间：2013-04-08T18:32:32.520
> 
> 标签：c#, reportbuilder

我正在使用 Report Builder 并在 c# 中加载报告，还在 c# 中设置了一些参数：

我的问题是，当我将它存储在数组中时，如何设置多个整数值的 ReportParameter？

我尝试了以下方法：

```
 MyReportViewer.ServerReport.SetParameters(
      new ReportParameter("storeSelected", new int[3]{2,3,4}, false)
 ); 
```

但是，这不起作用，因为 ReportParameter 不采用 int。

我还尝试了以下方法：

```
 MyReportViewer.ServerReport.SetParameters(
      new ReportParameter("storeSelected", new int[3]{"2", "3", "4" }, false)
 ); 
```

这也不起作用，因为我的参数“storeSelected”是 int 类型，并且会引发类型转换错误。

我需要做什么才能将我的整数数组传递给reportParameter？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T18:36:56.280

根据[Microsoft 的文档](http://msdn.microsoft.com/en-US/library/ms251753%28v=vs.100%29.aspx)，这行代码应为：

```
MyReportViewer.ServerReport.SetParameters(
    new ReportParameter("storeSelected", new string[] { "2", "3", "4" }, false)
); 
```

# ios - 通过命令行从 iOS 设备卸载应用程序

> ID：15886373
> 
> 赞同：11
> 
> 时间：2013-04-08T18:32:45.603
> 
> 标签：ios, xcode, macos, command-line, uninstallation

我正在使用 UIAutomation 对应用程序进行测试，但我需要一种方法来卸载设备（iPhone、iPad、iPod）中的应用程序而不使用越狱。

目前我正在使用 Fruitstrap 将应用程序上传到使用设备 UID 的有线连接设备。

有没有办法通过命令行（是的，它必须是命令行）从设备中删除应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-22T00:56:50.250

使用神奇的`mobiledevice`工具！

[GitHub 上的移动设备存储库](https://github.com/imkira/mobiledevice)

它可以在几秒钟内完成编译，让您可以非常轻松地与连接的 iOS 设备进行交互。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-27T22:57:26.087

利用`ideviceinstaller`

要安装应用程序：`ideviceinstaller -i testApp.ipa`

卸载应用程序：如果您不知道 bundle id，请先获取 bundle id， `ideviceinstaller -l`然后

`ideviceinstaller -U com.testPackage.testApp`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-23T09:06:36.943

新来的孩子 - [ios-deploy](https://github.com/ios-control/ios-deploy)

MobileDevice 是一个很好的工具，但没有被积极开发。ios-deploy 效果很好。

这是命令 -

```
ios-deploy --id <device_id> --uninstall_only --bundle_id com.app.testapp 
```

（ios-deploy 仅从fruitstrap 派生）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-30T20:33:21.210

通过命令行：`uninstall [-i/--id device_id] -b/--bundle bundle.app`

从指定的设备中删除指定的包标识符（例如 com.foo.MyApp），如果没有指定，则删除所有连接的设备。

使用[此](https://github.com/jacksonh/fruitstrap)存储库注意：适用于 SDK 6.1.3，但不适用于 SDK 6.1.4

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-25T15:12:07.867

对于那些仍然通过谷歌到达这里的人：您可以安装 ruby​​ gem ios_app_installer（这是 ios-deploy 的“轻量级”版本）并在安装后使用命令

```
ios_app_installer -b <bundle id> -u 
```

（设备可能必须通过 USB 连接）

# ruby-on-rails - 启动 Rails 服务器时出错

> ID：15886374
> 
> 赞同：0
> 
> 时间：2013-04-08T18:32:50.600
> 
> 标签：ruby-on-rails

**我用*rails new {project_name} -d mysql***创建了一个 rails 站点

 **然后 cd 到 project_name 并运行**rails server**命令，但出现以下错误，可能是什么问题？有谁知道？我必须更改模式 040777 吗？如果是，如何？谢谢

```
/Library/Ruby/Gems/1.8/gems/railties-3.2.13/lib/rails/script_rails_loader.rb:11: warning: Insecure world writable dir /usr/local/bin in PATH, mode 040777
/Library/Ruby/Gems/1.8/gems/bundler-1.3.5/lib/bundler/runtime.rb:216: warning: Insecure world writable dir /usr/local/bin in PATH, mode 040777
/Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle: dlopen(/Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle, 9): Library not loaded: libmysqlclient.18.dylib (LoadError)
  Referenced from: /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
  Reason: image not found - /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle
    from /Library/Ruby/Gems/1.8/gems/mysql2-0.3.11/lib/mysql2.rb:9
    from /Library/Ruby/Gems/1.8/gems/bundler-1.3.5/lib/bundler/runtime.rb:72:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.3.5/lib/bundler/runtime.rb:72:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.3.5/lib/bundler/runtime.rb:70:in `each'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.3.5/lib/bundler/runtime.rb:70:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.3.5/lib/bundler/runtime.rb:59:in `each'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.3.5/lib/bundler/runtime.rb:59:in `require'
    from /Library/Ruby/Gems/1.8/gems/bundler-1.3.5/lib/bundler.rb:132:in `require'
    from /Users/henryjoseph/Sites/simple_cms/config/application.rb:7
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.13/lib/rails/commands.rb:53:in `require'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.13/lib/rails/commands.rb:53
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap'
    from /Library/Ruby/Gems/1.8/gems/railties-3.2.13/lib/rails/commands.rb:50
    from script/rails:6:in `require'
    from script/rails:6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:16:48.613

```
cd ur_dir 
```

然后你必须将你的 mysql 数据库连接到你的项目。为此，您会看到 config/database.yml 文件，您必须在其中添加它

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: your_database_name
  pool: 5
  username: your_db_username
  password: ur_db_password
  host: localhost 
```

然后是轨道**

# javascript - 使用 PhantomJS 从一个非常宽的页面创建 PDF

> ID：15886382
> 
> 赞同：0
> 
> 时间：2013-04-08T18:33:16.543
> 
> 标签：javascript, phantomjs

我有一个非常宽的页面，大约 2000-3000 像素，我想使用 PhantomJS 将其打印为 PDF。无论我将视口设置多宽，页面大小都保持不变，而内容却超出了实际的打印区域。这听起来对我来说是正确的。但是有没有办法正确打印非常宽的页面？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T17:45:58.083

使用 paperSize 属性来增加 phantomjs 将打印到的页面的大小。

# drupal - 提交表单时创建页面

> ID：15886387
> 
> 赞同：0
> 
> 时间：2013-04-08T18:33:24.990
> 
> 标签：drupal

我为 drupal 创建了一个模块。我有 3 个文件：.install、.info、.module

在 .install 文件中，我编写了代码，以便表自动创建。

在 .module 文件中，我有很多表格，所以我不想在这里粘贴它。所以用户输入它的名字等。我点击提交，它被保存到我在数据库中的表中。现在我有了`repman_submissions()`将数据显示到表格中的功能。

我的问题是，当我单击提交（当用户输入数据时）时，我如何创建一个显示输入数据的页面，您以后可以访问（比如说 test.com/user）。

这就像当您使用添加内容时，它会将您编写的标题转换为链接（页面）。我的问题是我不知道该怎么做，我在数据库中有数据，我可以像表格一样显示它，但我没有特定数据的页面，比如让用户名作为链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T06:54:15.933

实现[hook_menu](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)并调用页面回调函数来显示您的数据。

```
function mymodule_menu() {
    $items['abc/def'] = array(
      'page callback' => 'repman_submissions',
    );
    return $items;
  }

  function repman_submissions()($ghi = 0, $jkl = '') {
    // code to display your data
  } 
```

# virtualhost - 使用自制 php dnsmasq mysql 虚拟主机无法正常工作

> ID：15886391
> 
> 赞同：0
> 
> 时间：2013-04-08T18:33:32.960
> 
> 标签：virtualhost, homebrew, vhosts, dnsmasq

我花了几天时间试图弄清楚如何设置本地开发环境。我使用自制软件安装了 php、mysql 和 dnsmasq。

现在我希望我添加到我的站点文件夹中的任何文件夹都可以通过`FOLDERNAME.dev`. 使用本教程（[http://akrabat.com/computing/automatic-apache-vhosts/](http://akrabat.com/computing/automatic-apache-vhosts/)）我能够创建虚拟主机并导航到正确的文件夹，但不是网站，而是包含所有内容的文件夹视图

![文件夹视图而不是实际站点](https://i.stack.imgur.com/dvVSn.png)

所以我虽然 apache 没有运行，但我 sudo'd`apachectl restart`并没有改变。

此外，当我尝试使用 laravel.dev 安装 laravel 时，我收到 500 错误

有没有人有使用自动虚拟主机和自制 php/mysql 的经验？

我正在使用 - Mac osx 10.8.3 - PHP 5.4.13 - MySQL 5.6.10 - DnsMasq 2.65

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T19:20:11.577

这是一个老问题，所以你可能已经放弃或想通了，但我遵循了同样的设置，我花了将近一周的时间才让一切正常工作，所以我想我会发布我的解决方案，以防其他人遇到这个问题。

对于您的问题，我相信可以将 httpd.conf 中的 DirectoryIndex 行修改为： DirectoryIndex index.html index.htm index.php

关于您引用的那个博客，还有其他几篇文章。这是帮助我弄清楚的一个。

[http://blog.evan.pro/how-to-set-up-dynamic-virtual-hosts-for-web-development](http://blog.evan.pro/how-to-set-up-dynamic-virtual-hosts-for-web-development)

# javascript - 使用 javascript 为 EditorFor 赋值

> ID：15886392
> 
> 赞同：2
> 
> 时间：2013-04-08T18:33:33.233
> 
> 标签：javascript, editorfor

我认为我有这段代码：

```
 <div class="drop-down-list">
        <%: Html.EditorFor(model => model.StageId,new { id="hiddenStageID"}) %>
        <%: Html.ValidationMessageFor(model => model.StageId) %>
    </div> 
```

这是我设置 EditorFor 值的 javascript 代码。但它不起作用：

```
<script>
           var e = document.getElementById("stageTwoView");
           var listIndex = e.selectedIndex;
           var stageIdVal = list[listIndex].valueOf();
           document.getElementById('hiddenStageID').value = stageIdVal;
</script> 
```

例如 stageIdVal 得到这个值：“1003”。但是最后一行不起作用！为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:37:29.950

`EditorFor`不接受`htmlAttributes`作为参数（这是我认为你所期待的）；那将是`TextBoxFor`。

您所做的是传递`additionalViewData`给编辑器模板，因此除非您在 EditorTemplate 中使用它，否则您实际上不会为元素分配 ID（因此无法使用 JS 检索它）。

如果你想给文本字段一个 ID，要么自定义你的编辑器模板，要么使用它，`TextBoxFor`这样你*就可以*传递额外的属性：

```
@Html.TextBoxfor(x => x.StageId, new { id = "hiddenStageID" }) 
```

除非我错了（我可能是因为我面前没有可见的模板。您可能已经自定义了它，在这种情况下，我只是做出不准确的假设，我可以更新我的答案）。

# javascript - 使用 Jasmine 测试嵌套的 Promise

> ID：15886393
> 
> 赞同：1
> 
> 时间：2013-04-08T18:33:37.400
> 
> 标签：javascript, unit-testing, jasmine, promise

当我在浏览器中运行 UI 时，这是有效的，但是我的 validateAsync 方法中的“d”总是为 null，需要调用 done 方法才能将其返回到 save 方法。我不知道如何使用andCallFake（需要spyOn 唯一名称测试），但也让它返回延迟调用完成的（jQuery）。希望这段代码能给你足够的上下文来看看我想要完成什么。

```
 validateAsync = function () {
        var d,
            isValid = true,
            isUnique = false;
            // validate that name and description are given
            if (layout.Name() === '') {
                toastr.warning('Layout name is required', 'Layout');
                isValid = false;
            }
             // validate that there are no other layouts of the same type with the same name
            d = uiDataService.GetIsLayoutNameUniqueAsync(layout.LayoutId(), layout.Name(), layout.LayoutTypeId())
                .done(function (isUniqueResult) {
                    isUnique = isUniqueResult.toLowerCase() === "true";
                    if (!isUnique) {
                        toastr.warning('Layout name ' + layout.Name() + ' must be unique. There is already a layout with this name.', 'Layout');
                    }
                    // this is always undefined in my Jasmine tests
                    d.done(isValid && isUnique);
                })
                .fail(function (response) {
                    mstar.AjaxService.CommonFailHandling(response.responseText);
                });
            return d;
    },
    save = function () {
        validateAsync()
            .done(function (isValidResult) {
                var isValid = isValidResult.toLowerCase() === "true";
                if (!isValid) {
                    return;
                }
                 // show a toastr notification on fail or success
                dataContext.SaveChanges(layout, uiDataService)
                    .done(function (layoutIdFromSave) {
                        toastr.success('The layout was saved. Refreshing...');
                    })
                    .fail(function () {
                        toastr.error('There was an error saving the layout.');
                    })
                    .always(function () {
                        // toastr.info('finished');
                    });
            })
            .fail(function () {
                throw new Error('There was an error validating before save');
            });
    };      

    // in uiDataService
     getIsLayoutNameUniqueAsync = function (layoutId, layoutName, layoutTypeId) {
        return ajaxService.AjaxGetJsonAsync(webServiceUrl + "GetIsLayoutNameUnique?layoutId=" + layoutId + "&layoutName=" + escape(layoutName) + "&layoutTypeId=" + layoutTypeId);
    },
    // in ajaxService
 ajaxGetJsonAsync = function (url, cache) {
            return $.ajax({
                type: "GET",
                url: url,
                dataType: "json",
                accepts: {
                    json: "application/json"
                },
                cache: cache === undefined ? false : cache
        });
    },
// in a beforeEach
var getIsLayoutNameUniquePromiseSpy = spyOn(mstar.dataService.UiDataService, "GetIsLayoutNameUniqueAsync")
    .andCallFake(function () {
        spyObj.called = true;
        // http://stackoverflow.com/questions/13148356/how-to-properly-unit-test-jquerys-ajax-promises-using-jasmine-and-or-sinon
        var d = $.Deferred();
        d.resolve('true');
        return d.promise();
    });
// and a test
it("should show a toastr", function () {
    // Act
    vm.GetLayout().Name('Test');
    vm.GetLayout().Description('Test');
    vm.Save();
    // Assert
    expect(toastr.success).toHaveBeenCalledWith('The layout was saved. Refreshing...');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:25:10.050

对齐，我对 Jasmine 了解不多，但根据代码本身的优点，如果它被剥离到裸露的骨头，就会更容易看到发生了什么。

大大简化，`validateAsync()`目前结构如下：

```
validateAsync = function () {
    ...
    var d = fn_that_returns_a_promise().done(function() {
        ...
        d.done(boolean);
    }).fail(function() {
        ...
    });
    return d;
}; 
```

这不可能是正确的，因为`.done()`它不接受布尔参数，并且虽然我不能说这绝对是错误的，但在处理程序`d.done()`内部并不合适`d.done()`（尽管可能在不同的情况下）。

我建议您要使用`.then()`过滤成功案例（从而传递一个用您的布尔值解决的新承诺），同时保留`.fail()`失败案例；给出如下结构：

```
validateAsync = function () {
    ...
    return uiDataService.GetIsLayoutNameUniqueAsync(...).then(function(...) {
        ...
        return isValid && isUnique;
    }).fail(function(...) {
        ...
    });
}; 
```

因此，`save()`可以如下：

```
save = function() {
    validateAsync().done(function(isValid) {
        //validation success
        if(!isValid) return;
        ...
    }.fail(function() {
        //validation failure
        ...
    });
}; 
```

现在你所要做的就是“加入点”（即重新插入你自己的陈述等）并希望我没有犯任何错误。

# .net - SignalR 和 Android Webview

> ID：15886396
> 
> 赞同：0
> 
> 时间：2013-04-08T18:34:02.057
> 
> 标签：.net, android-webview, signalr

我有一个 .NET Web 应用程序，它使用 SignalR 将数据推送到活动客户端。

现在我们计划将这个 Web 应用程序包装为一个 android 应用程序。如果我只是在 Android webview 中加载应用程序，我的 SignalR 推送仍然会继续工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T10:22:24.163

从技术上讲，是的，它应该仍然有效。Phonegap 使用了类似的技术。

# c#-4.0 - 无法更新多对多关系。实体框架代码优先

> ID：15886398
> 
> 赞同：0
> 
> 时间：2013-04-08T18:34:11.650
> 
> 标签：c#-4.0, asp.net-mvc-4, ef-code-first, repository-pattern, service-layer

我正在尝试使用 Code First 更新我在实体框架中设置的多对多关系。我创建了以下模型。

```
[Serializable]
public class ClientFormField : FormField
{
    public ClientFormField()
    {
        CanDisable = true;
    }

    public virtual ClientFormGroup Group { get; set; }
    public virtual ICollection<ClientValue> Values { get; set; }

    public virtual ICollection<LetterTemplate> LetterTemplates { get; set; }
}

[Serializable]
public class CaseFormField : FormField
{
    public CaseFormField()
    {
        CanDisable = true;
    }

    public virtual CaseFormGroup Group { get; set; }

    public virtual ICollection<LetterTemplate> LetterTemplates { get; set; }

    public override IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        foreach (var val in base.Validate(validationContext))
            yield return val;
    }
}

[Serializable]
public class SystemField : TrackableEntity
{
    public string Name { get; set; }
    public string Value { get; set; }
    public string VarName { get; set; }
    public virtual SystemFieldType SystemFieldType { get; set; }
    public int TypeId { get; set; }

    public ICollection<LetterTemplate> LetterTemplates { get; set; }

    public override IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (string.IsNullOrWhiteSpace(Name))
            yield return new ValidationResult("System field must have a name.", new[] { "SystemFieldName" });

        if (string.IsNullOrWhiteSpace(Value))
            yield return new ValidationResult("System field must have a value.", new[] { "SystemFieldValue" });

        var regex = new Regex(@"^[a-zA-Z0-9-_]+$");
        if (!string.IsNullOrWhiteSpace(VarName) && !regex.IsMatch(VarName))
            yield return
                new ValidationResult("Varname can only contain alphanumeric, underscore, or hyphen",
                                     new[] { "SystemFieldVarName" });

        if (TypeId <= 0)
            yield return new ValidationResult("System Field must have a type.", new[] { "SystemFieldType" });
    }
}

[Serializable]
public class LetterTemplate : TrackableEntity
{
    public LetterTemplate()
    {
        ClientFields = new Collection<ClientFormField>();
        CaseFields = new Collection<CaseFormField>();
        SystemFields = new Collection<SystemField>();
    }

    public string Name { get; set; }
    public string Data { get; set; }

    public virtual ICollection<ClientFormField> ClientFields { get; set; }
    public virtual ICollection<CaseFormField> CaseFields { get; set; }
    public virtual ICollection<SystemField> SystemFields { get; set; }

    public override IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if(string.IsNullOrWhiteSpace(Name))
            yield return new ValidationResult("Form Template must have a name", new[] { "Name" });

        if(string.IsNullOrWhiteSpace(Data))
            yield return new ValidationResult("Form Template must have content", new[] { "Data" });
    }
} 
```

下面是 LetterTemplate 类的配置。

```
public class LetterTemplateConfiguration : BaseTrackableEntityConfiguration<LetterTemplate>
{
    public LetterTemplateConfiguration()
    {
        HasMany(c => c.ClientFields).WithMany(c => c.LetterTemplates)
            .Map(m =>
                     {
                         m.MapLeftKey("LetterTemplateId");
                         m.MapRightKey("ClientFormFieldId");
                         m.ToTable("LetterTemplateClientFields");
                     });

        HasMany(c => c.CaseFields).WithMany(c => c.LetterTemplates)
            .Map(m =>
                     {
                         m.MapLeftKey("LetterTemplateId");
                         m.MapRightKey("CaseFormFieldId");
                         m.ToTable("LetterTemplateCaseFields");
                     });

        HasMany(c => c.SystemFields).WithMany(c => c.LetterTemplates)
            .Map(m =>
                     {
                         m.MapLeftKey("LetterTemplateId");
                         m.MapRightKey("SystemFieldId");
                         m.ToTable("LetterTemplateSystemFields");
                     });
    }
} 
```

这是添加/更新的控制器方法和保存添加/更新业务逻辑的服务器方法

```
[HttpPost]
[ValidateAntiForgeryToken]
[ValidateInput(false)]
public ActionResult Manage(LetterTemplate template)
{
    if(ModelState.IsValid)
    {
        if (_letterTemplateService.Save(template) != null)
            return RedirectToAction("List");
    }

    ViewBag.ClientFields = _clientFieldService.GetAllFields().OrderBy(f => f.Name);
    ViewBag.CaseFields = _caseFieldService.GetAllFields().OrderBy(f => f.Name);
    ViewBag.SystemFields = _systemFieldService.GetAllFields().OrderBy(f => f.Name);

    return View(template);
}

public LetterTemplate Save(LetterTemplate template)
{
    var dbTemplate = template;

    if (template.Id > 0)
    {
        dbTemplate = _letterTemplateRepo.GetById(template.Id);
        dbTemplate.Name = template.Name;
        dbTemplate.Data = template.Data;
    }

    dbTemplate.ClientFields.Clear();
    foreach (var field in _clientFieldRepo.All().Where(field => template.Data.Contains("~~" + field.VarName + "~~")))
        dbTemplate.ClientFields.Add(field);

    dbTemplate.CaseFields.Clear();
    foreach (var field in _caseFieldRepo.All().Where(field => template.Data.Contains("~~" + field.VarName + "~~")))
        dbTemplate.CaseFields.Add(field);

    dbTemplate.SystemFields.Clear();
    foreach (var field in _systemFieldRepo.All().Where(field => template.Data.Contains("~~" + field.VarName + "~~")))
        dbTemplate.SystemFields.Add(field);

    return template.Id <= 0 ? _letterTemplateRepo.Add(dbTemplate) : _letterTemplateRepo.Update(dbTemplate);
} 
```

这是信函模板的添加/更新视图。

```
@section RightContent
{
<h4>Manage</h4>
<form method="POST" action="/LetterTemplate/Manage" id="templateForm">
    <div id="toolbar">
        <div style="float: left;padding: 3px 0px 0px 10px;">
            @Html.LabelFor(m => m.Name)
            @Html.TextBoxFor(m => m.Name)
        </div>
        <div class="item" onclick=" $('#templateForm').submit(); ">
            <span class="save"></span>Save
        </div>
        <div class="item" onclick=" window.location = '/LetterTemplate/List'; ">
            <span class="list"></span>Back To List
        </div>
    </div>
    <div class="formErrors">
        @Html.ValidationSummary()
    </div>
    @Html.HiddenFor(m => m.Id)
    @Html.HiddenFor(m => m.Active)
    @Html.HiddenFor(m => m.IsDeleted)
    @Html.TextAreaFor(m => m.Data)
    @Html.AntiForgeryToken()
</form>
} 
```

当我从视图创建新模板时，一切正常。正如我所期望的那样，我在多对多关系表中填充了字段。当我尝试更新应该清除所有现有关系并创建新关系的关系时，什么也没有发生。表完全不受影响。我已经阅读了几篇关于更新多到多表问题的不同帖子，但没有找到任何可以解决我的问题的内容。这是我第一次尝试使用 EF 代码进行多对多操作，并事先遵循了许多教程，但似乎无论我做什么，EF 都不会更新关系表。

**更新：**

添加新模板时生成的查询：

```
DECLARE @0 nvarchar = N'Test',
        @1 nvarchar = N'<p>~~case_desc~~</p>

<p>~~fname~~</p>

<p>~~lname~~</p>
',
        @2 bit = 1,
        @3 bit = 0,
        @4 int = 2,
        @5 int = 2,
        @6 DateTime2 = '2013-04-08T16:36:09',
        @7 DateTime2 = '2013-04-08T16:36:09'

insert [dbo].[LetterTemplates]([Name], [Data], [Active], [IsDeleted], [CreatedById], [ModifiedById], [DateCreated], [DateModified])
values (@0, @1, @2, @3, @4, @5, @6, @7)

DECLARE @0 int = 2,
        @1 int = 1

insert [dbo].[LetterTemplateClientFields]([LetterTemplateId], [ClientFormFieldId])
values (@0, @1)

DECLARE @0 int = 2,
        @1 int = 2

insert [dbo].[LetterTemplateClientFields]([LetterTemplateId], [ClientFormFieldId])
values (@0, @1)

DECLARE @0 int = 2,
        @1 int = 3

insert [dbo].[LetterTemplateClientFields]([LetterTemplateId], [ClientFormFieldId])
values (@0, @1) 
```

更新时生成的查询：

```
DECLARE @0 nvarchar = N'Test',
        @1 nvarchar = N'<p>~~case_desc~~</p>

<p> </p>

<p>~~fname~~</p>

<p> </p>

<p>~~dob~~</p>
',
        @2 bit = 1,
        @3 bit = 0,
        @4 int = 2,
        @5 int = 2,
        @6 DateTime2 = '2013-04-08T16:23:12',
        @7 DateTime2 = '2013-04-08T16:33:15',
        @8 int = 1

update [dbo].[LetterTemplates]
set [Name] = @0, [Data] = @1, [Active] = @2, [IsDeleted] = @3, [CreatedById] = @4, [ModifiedById] = @5, [DateCreated] = @6, [DateModified] = @7
where ([Id] = @8) 
```

**更新**

我的存储库模式有 2 个基本泛型类。基本可跟踪实体存储库和基本存储库。基本可跟踪实体 repo 处理确保已删除项目被软删除、获取未删除项目以及管理 createdby/modifiedby 和 createdDate/UpdatedDate。基本仓库处理其余的基本 CRUD 操作。下面是当我通过 LetterTemplateRepository 调用更新时调用的更新方法和相关方法。由于此 repo 继承了基本可跟踪实体 repo，因此它从基类运行更新。

```
public override T Update(T entity)
{
    return Update(entity, false);
}

public override T Update(T entity, bool attachOnly)
{
    InsertTeData(ref entity);
    entity.ModifiedById = CurrentUserId;
    entity.DateModified = DateTime.Now;
    _teDB.Attach(entity);
    _db.SetModified(entity);
    if (!attachOnly) _db.Commit();
    return entity;
}

private void InsertTeData(ref T entity)
{
    if (entity == null || entity == null) return;
    var dbEntity = GetById(entity.Id);
    if (dbEntity == null) return;
    _db.Detach(dbEntity);
    entity.CreatedById = dbEntity.CreatedById;
    entity.DateCreated = dbEntity.DateCreated;
    entity.ModifiedById = dbEntity.ModifiedById;
    entity.DateModified = dbEntity.DateModified;
} 
```

DbContext 中的 SetModified 方法只是将 EntityState 设置为 Modified。我在单元测试中使用 Fake DbContext 和 DbSet，因此我通过 DbContext 扩展的任何 EF 特定调用都允许我的测试工作，而无需创建一堆 Fake Repositories。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:58:22.970

原来问题出在 InsertTeData 方法中。当它分离我从数据库中提取的实体以确保创建日期和创建日期时，它导致我正在使用的实体丢失有关多对多关系的所有信息。我的猜测是实体跟踪的工作方式，它们都有相同的密钥。

我删除了 InsertTeData 方法，现在在抽象 TrackableEntity 类的构造函数中将所有内容作为默认值进行管理，现在一切正常。

```
public override T Update(T entity, bool attachOnly)
{
    entity.ModifiedById = CurrentUserId;
    entity.DateModified = DateTime.Now;
    _teDB.Attach(entity);
    _db.SetModified(entity);
    if (!attachOnly) _db.Commit();
    return entity;
} 
```

在运行了我所有的单元测试、集成测试和一些手动测试之后，一切都通过了，所以我对这个变化很好。

# php - XQuery 扩展

> ID：15886399
> 
> 赞同：0
> 
> 时间：2013-04-08T18:34:15.060
> 
> 标签：php, xml

是否有任何允许执行 XQuery 的 php 扩展？

我们可以使用 SimpleXML 或 DOM 进行 xpath 查询，但我不了解 Xquery。

编辑：最好是 C 扩展。

谢谢

# c++ - 开始和结束数组索引算法

> ID：15886400
> 
> 赞同：0
> 
> 时间：2013-04-08T18:34:17.030
> 
> 标签：c++, arrays, algorithm

给定一个未排序的数组，例如 9 4 4 9 2 2，我需要一个有效的算法，当该数组被排序时，它可以让我知道该数组中每个数字的起始位置和结束位置。例如，对于上面的数组，数字 2 的起始索引为 0，结束索引为 1。数字 4 的起始索引为 2，结束索引为 3，数字 9 的起始索引为索引为 4，结束索引为 5（排序时）。任何人都知道如何以有效的方式做到这一点？有没有办法在不先对数组进行排序的情况下做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T18:38:16.377

您可以利用只有十个不同元素的事实。

首先，遍历数组一次，计算零、一、二等。

从这些计数中，您可以轻松计算出排序数组中每个数字的开始和结束位置。

这是[Counting Sort](http://en.wikipedia.org/wiki/Counting_sort)的变体，除了我们实际上不填充排序数组。

# ios - iOS 配置文件验证错误

> ID：15886404
> 
> 赞同：0
> 
> 时间：2013-04-08T18:34:24.113
> 
> 标签：ios, certificate, profile, identity

我正在尝试为我的应用程序创建一个开发配置文件。

我在应用中心有一个有效的证书，在我的 MacBook 中它也显示该证书是有效的。

我还在应用中心添加了我的设备。

我创建了一个与我之前创建的证书相关的开发配置文件，它在应用中心显示为有效。但是，当我在管理器中刷新配置文件页面时，配置文件显示状态“未找到有效签名身份”。我已经多次删除并创建了配置文件，但同样的问题正在重复。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:41:48.627

确保您拥有与您拥有的证书配对的***私钥***。

打开***钥匙串访问***，看看是否可以展开证书。

如果不能，则表示您没有私钥。如果您不知道私钥在哪里，则必须撤销当前证书并重新生成一个，这将为您提供私钥。

# css - 使用 CSS 过渡时的文本摆动

> ID：15886410
> 
> 赞同：1
> 
> 时间：2013-04-08T18:34:47.120
> 
> 标签：css, hover, css-transitions, transition, shake

在 Chrome 和 Safari 中，此代码 ( [http://codepen.io/igdaloff/pen/cgCFt](http://codepen.io/igdaloff/pen/cgCFt) ) 中的文本在悬停时会微妙地摆动。我希望文本在整个过渡过程中保持稳定。

我已经尝试了几种替代方法来实现同样的效果（在[这篇文章](https://stackoverflow.com/questions/8451909/expand-div-from-the-middle-instead-of-just-top-and-left-using-css)中进行了解释），但摆动仍然存在。

我需要文本保持垂直居中并且内容完全流畅（仅限百分比）。只要这些要求是真实的，我愿意接受任何解决方案。我正在使用最新的浏览器版本。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:53:49.227

HTML

```
<div class="work-home">         
  <ul>
      <li>
        <a href="">
          <img src="..." />
          <h4>Goats</h4>
        </a>
      </li>
  </ul>
</div> 
```

CSS

```
.work-home {
  text-align: center;
}
.work-home li {
  display: inline-block;
  position: relative;
  margin: 0 0 2em;
  width: 100%;
}

.work-home li:hover a:before {
  opacity: 1;
  top: 5%;
  left: 5%;
  right: 5%;
  bottom:5%;
}

.work-home li:hover h4 {
  opacity:1;
}

.work-home img {
  width: 100%;
  -webkit-transition: all 0.1s ease;
  -moz-transition: all 0.1s ease;
  -o-transition: all 0.1s ease;
  transition: all 0.1s ease;
}

.work-home a:before {
  content:"";
  display:block;
  opacity: 0;
  position: absolute;
  margin: 0;
  top:0;
  right:0;
  left:0;
  bottom:0;
  background-color: rgba(0, 160, 227, 0.88);
  -webkit-transition: all linear .3s;
  -moz-transition: all linear .3s;
  -ms-transition: all linear .3s;
  transition: all linear .3s;
}

.work-home h4 {
  display: block;
  padding: 0;
  margin:0;
  font-family: helvetica, sans-serif;
  font-size: 4em;
  color: #ffffff;
  position:absolute;
  top:50%;
  margin-top:-.8em;
  text-align:center;
  width:100%;
  z-index:1;
  opacity:0;
  -webkit-transition: all linear .3s;
  -moz-transition: all linear .3s;
  -ms-transition: all linear .3s;
  transition: all linear .3s;
} 
```

# clojure - Clojure 循环表单是如何工作的？

> ID：15886412
> 
> 赞同：3
> 
> 时间：2013-04-08T18:34:57.137
> 
> 标签：clojure

我是 Clojure 和函数式编程的新手。我尽力了，理解循环结构。

我可以使用它，我可以查看用它编写的代码并告诉输出，但我不明白的是，它是如何工作的？

是否与编写带有参数的匿名函数然后以相同的数量和新值保持递归在尾部相同？

它是一个内置的宏还是它的东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T18:41:47.297

实际上，`loop`不是函数或宏。它是一种[特殊的形式](http://clojure.org/special_forms)。它的工作原理与`let`（也是一种特殊形式）一样，只是它充当`recur`.

区分函数、宏和特殊形式的一种方法是检查它们的参数是如何计算的：

*   始终评估函数参数，然后将结果传递给函数。
*   在宏扩展为新的未评估形式之前，不会评估宏参数。
*   特殊形式的参数在传递时不会被评估，但特殊形式可能会或可能不会选择在内部评估它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T23:27:18.387

**dbyrne**的回答都是正确的，而且很好，但我想解决您的进一步问题“是否与编写带有参数的匿名函数然后`recur`在尾部具有相同的数量和新值一样？”。是的，就是这样：

```
(loop [x 1, y 2]
  (if (whatever x y)
    (recur (inc x) (dec y))
    (* x y))) 
```

在功能上等同于

```
((fn [x y]
   (if (whatever x y)
     (recur (inc x) (dec y))
     (* x y)))
 1 2) 
```

如果`loop`不存在，您可以将其编写为发出这种形式的简单宏，但编译器有一个`loop`更快的特殊形式。

```
(defmacro loop [bindings & body]
  (let [bindings (partition 2 bindings)]
    `((fn [~@(map first bindings)]
        (do ~@body))
      ~@(map second bindings)))) 
```

# mysql - 如何将数据库转储到远程服务器？

> ID：15886413
> 
> 赞同：0
> 
> 时间：2013-04-08T18:35:03.767
> 
> 标签：mysql, mysqldump

我正在尝试将我的数据库推送到 ClearDB 上托管的远程 mysql 数据库。

我正在使用命令

```
 mysql -u username@us-cdbr-east-*** -pmypwd dbname < mydb.sql 
```

我收到错误

```
 Access denied for user 'bbea98e4ba67c1@us-cdbr-east-**@localhost (using password YES) 
```

我使用正确的语法吗？我尝试将相同的 sql 文件导入本地数据库，并且顺利进行。

我需要在 heroku 上为这个远程数据库授予一些权限吗？如果是，那我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:45:08.173

您应该在数据库上设置权限，以便从您尝试在转储中读取的远程主机访问。为用户名创建访问权限时，您始终指定相应的主机。这可能是任何主机的 % ......在这种情况下，您无需执行任何操作。有时它被设置为特定的主机，在这种情况下，您需要为相同的用户名添加权限，但不同的主机是远程主机。

您还需要正确的语法是：

```
 mysql -u username -h us-cdbr-east-*** -pmypwd dbname < mydb.sql 
```

注意 -h 开关

# java - MediaRecorder 切断文件结尾

> ID：15886416
> 
> 赞同：4
> 
> 时间：2013-04-08T18:35:15.703
> 
> 标签：java, android, audio, mediarecorder

在我的应用程序中，我正在使用 MediaRecorder 以 m4a（AAC 编码）录制音频。我所有的录音都被剪短了（大约半秒）。就我的申请而言，拥有整个文件很重要。这是一个错误还是我遗漏了什么？

记录代码：

```
 //set up recorder
        recorder = new MediaRecorder();
        recorder.setAudioSource(MediaRecorder.AudioSource.VOICE_RECOGNITION);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        recorder.setAudioChannels(1);
        recorder.setAudioSamplingRate(16000);
        recorder.setOutputFile(fileName);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC);

        //begin recording
        recorder.prepare();
        recorder.start(); 
```

停止记录代码：

```
 //stop recording
        recorder.stop();
        recorder.release();
        recorder = null; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-07T00:39:11.097

这似乎是 Android 的基于 AAC 的音频编码器中的一个错误。我发现唯一可行的解​​决方案是使用基于 AMR 的音频编码器。不幸的是，AMR_WB 对于人声以外的任何东西听起来都不是很好。

```
recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_WB); 
```

据我所知，唯一的其他选择是使用 AudioRecord，这要困难得多。

# ios - 将相机应用旋转复制到横向 IOS 6 iPhone

> ID：15886418
> 
> 赞同：8
> 
> 时间：2013-04-08T18:35:22.893
> 
> 标签：ios, uiimagepickercontroller, landscape, portrait

嗨，我正在尝试复制相同的旋转，当方向转移到横向时，可以在相机应用程序中看到。不幸的是，我没有运气。我需要使用 UIImagePickerController 为自定义 cameraOverlayView 进行设置。

从这个肖像（B 是 UIButtons）

```
|-----------|
|           |
|           |
|           |
|           |
|           |    
|           |
| B   B   B |
|-----------| 
```

到这风景

```
|----------------|
|              B |
|                |
|              B |
|                |
|              B |
|----------------| 
```

换句话说，我希望按钮粘在原来的纵向底部并在它们的中心旋转。我正在使用情节提要并启用了自动布局。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-12T09:09:24.183

好的，所以我已经设法解决了这个问题。需要注意的是 UIImagePickerController 类仅根据 Apple[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)支持纵向模式。

要捕获旋转，`willRotateToInterfaceOrientation`这里是没用的，所以你必须使用通知。在运行时设置自动布局约束也不是要走的路。

在 AppDelegate 中`didFinishLaunchingWithOptions`，您需要启用轮换通知：

```
// send notification on rotation
[[UIDevice currentDevice]beginGeneratingDeviceOrientationNotifications]; 
```

在`viewDidLoad`cameraOverlayView 的方法中`UIViewController`添加以下内容：

```
//add observer for the rotation notification
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

最后将`orientationChanged:`方法添加到cameraOverlay`UIViewController`

```
- (void)orientationChanged:(NSNotification *)notification
{
    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
    double rotation = 0;

    switch (orientation) {
        case UIDeviceOrientationPortrait:
            rotation = 0;
            break;
        case UIDeviceOrientationPortraitUpsideDown:
            rotation = M_PI;
            break;
        case UIDeviceOrientationLandscapeLeft:
            rotation = M_PI_2;
            break;
        case UIDeviceOrientationLandscapeRight:
            rotation = -M_PI_2;
            break;
        case UIDeviceOrientationFaceDown:
        case UIDeviceOrientationFaceUp:
        case UIDeviceOrientationUnknown:
        default:
            return;
    }
    CGAffineTransform transform = CGAffineTransformMakeRotation(rotation);
    [UIView animateWithDuration:0.4 delay:0.0 options:UIViewAnimationOptionBeginFromCurrentState animations:^{
        self.btnCancel.transform = transform;
        self.btnSnap.transform = transform;     
    }completion:nil];
} 
```

上面的代码将旋转变换应用于我在本例中使用的 2 个 UIButtons btnCancel 和 btnSnap。这会在旋转设备时为您提供相机应用效果。我仍然在控制台中收到警告，`<Error>: CGAffineTransformInvert: singular matrix.`不确定为什么会发生这种情况，但这与相机视图有关。

希望以上有所帮助。

# c# - MVC 4 ApiController 未正确序列化 System.Json.JsonObject

> ID：15886423
> 
> 赞同：1
> 
> 时间：2013-04-08T18:35:41.613
> 
> 标签：c#, .net, json, asp.net-mvc-4

所以我是使用 MVC4 的新手，后端对象的序列化对我来说似乎很“神奇”，所以如果我以错误的方式执行此操作，请告诉我。

然而，我的目标是构建一个简单的 rest API 并返回 JSON。我想我会使用 System.Json 并返回 JsonObject。为了这个问题，我已经将其简化了，但在我的实际问题中对象要复杂得多。

这是我的控制器....

```
....

 public class ActionsController : ApiController
    {
        // GET api/actions
        public JsonObject Get()
        {
            JsonObject testObjet = new JsonObject();
            testObjet.Add("Name", "Test name");
            testObjet.Add("Description", "Test Description");

            return testObjet;

        }
.... 
```

我希望看到：

```
{"Name":"Test name","Description":"Test Description"} 
```

相反，我看到：

```
{"Name":[],"Description":[]} 
```

实际上，当我返回 JsonObject 的字符串时，我似乎得到了更好的结果，或者甚至只是返回对象本身，但它具有枚举并且我想返回名称而不是数字值，这就是导致我使用 JsonObject 进行自定义的原因.

有谁知道为什么它会降低价值？

编辑：因此，由于 Dan 在下面的评论，我只是为了咯咯笑，看看 XML 序列化器用 JSON 对象吐出什么，我得到了下面的异常......

“不应使用数据合同名称‘JsonPrimitive： http: [//schemas.datacontract.org/2004/07/System.Json](http://schemas.datacontract.org/2004/07/System.Json) ’键入‘System.Json.JsonPrimitive’ 。”

因此，您似乎无法序列化 System.Json.JsonObject 对象，因为它使用了它不期望的类型。

这是令人震惊的。有人有解决方法吗？如果不是，我将了解如何在序列化而不是值时显示枚举名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:54:57.653

所以答案显然是……你不能！

似乎不支持 JsonPrimitive 类型来序列化对象。下面由 Obi 和 Dan 提供的答案帮助我进一步探索并发现 XML 序列化程序实际上抛出了一个异常，而 JSON 序列化程序只是简单地吃掉它并输出一个空数组，这就是您在上面看到的。

这里有任意数量的正确答案。

1.  制作自己的自定义序列化程序
2.  将 JSON 输出为字符串
3.  返回自定义对象，然后解决诸如枚举值之类的问题

我确信还有其他人。

但是无论你做什么都不要尝试使用 System.Json 作为 ApiController 中的返回，因为你会得到上面的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:39:26.013

您不应强制 WebApi 调用使用 JSON 等特定格式。WebApi 的功能之一是您可以将格式指定为请求的一部分。从您的调用中返回一个对象`Get`，并让 WebApi 引擎进行序列化和反序列化：

```
public class DataObject
{
    public string Name { get; set; }
    public string Description { get; set; }
}

public class ActionsController : ApiController
{
    // GET api/actions
    public DataObject Get()
    {
        var testObject = new DataObject
        {
            Name = "Test name",
            Description = "Test Description"
        };

        return testObject;
    }
} 
```

`Accept`您可以通过将标题设置为`application/xml`、`application/json`等来指定格式。

`Name`默认的 JSON 序列化器在序列化简单的字符串属性（如和）时没有问题`Description`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:47:49.090

我建议你这样做

~~// GET api/actions public object Get() { //如果要返回特定类型，则新建一个强类型对象 //并相应地更改 Action 返回类型 var testObjet = new (){ Name= "Test name",描述=“测试描述”}; 返回测试对象；}~~

Dan 在下面发布了类似的答案，所以让我尝试解决您的其他问题。要序列化枚举，我建议您将其隐藏在一个公共字符串属性中，该属性将返回枚举的字符串值，

```
public class DataObject{
    public MyEnum SomeEnumValue;
    public string EnumValue{
       get {
          //..return SomeEnumValue string value
        }
    }
} 
```

然后，您可以从 EnumValue 中读取值，该值应根据需要正确序列化。

# java - 用子类替换 Spring Bean 时出错

> ID：15886426
> 
> 赞同：3
> 
> 时间：2013-04-08T18:35:49.097
> 
> 标签：java, spring, testing

我有一个网络服务的工作电话；我们使用配置了注解的 Spring bean 来实现调用 Web 服务的逻辑：

```
@ManagedResource(objectName = "bean:name=XServiceMBean")
@Service("xService")
public class XServiceImpl implements XService
{
// working code here
} 
```

出于测试目的，我想扩展这个类并注入子类而不是这个，所以我做了：

```
@ManagedResource(objectName = "bean:name=XServiceMBean")
@Service("xService")
public class XServiceImplTest extends XServiceImpl
{
// working code here
} 
```

并注释掉超类中的两个注释行。

春天不喜欢它。当我跑步时，我得到：

```
Error creating bean with name 'xService':Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'xService' must be of type [com.hsc.correspondence.rules.XService], but was actually of type [com.hsc.correspondence.rules.impl.XServiceImplTest] 
```

我再次尝试在我的子类上放置一个明确的“实现 XService”，结果相同。

我在春天做违法的事吗？原来的XServiceImpl里面有很多@Resource注解；我认为这并不重要，我希望他们像以前一样被注射。

有没有办法做我想做的事情，即有一个测试类，对原始文件的更改绝对最小化？（我会考虑在 XML 中进行配置，除非我不在我正在进行的项目中做出这些决定，但我认为这对我正在尝试做的事情并不重要。

* * *

额外的困惑：错误消息说“名为'xService'的Bean必须是...XService类型，但实际上是XServiceImplTest类型”。但是 XServiceImplTest 实现了 XService，就像 XServiceImpl 一样。

额外的困惑#2：我将整个 XServiceImpl 复制到 XServiceImplTest 类中，注释掉 XServiceImpl 中的注释，然后清理并重建并运行。得到了同样的结果。现在这两个类之间的唯一区别是它们的类名。它变得越来越陌生。谁能建议为什么 Spring 可能会关心类名是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:47:04.573

我看到了三个可能的原因：

1.  您的代码看起来不像您正在显示的代码，并且继承层次结构不存在。（因为您说您直接添加了接口，所以这不太可能，但您可能需要仔细检查您的导入）

2.  类路径上有旧的编译类。如果 XServiceImplTest 周围有一个旧的编译版本，这可能会被拾取。尝试清理所有类/目标文件夹。

3.  您正在运行某种类加载器问题，并且接口由与测试实现不同的类加载器加载。在抛出 execption 的行上放置一个断点并检查所涉及的各种类的类加载器。

    您可以通过`x.getClass().getClassLoader()`对任何感兴趣的实例进行操作来做到这一点。在一个普通的 vanilla 应用程序中，这将为所有 x 返回相同的实例。在 OSGI 应用程序和 Web 应用程序中，您可能会得到不同的 ClassLoader。ClassLoader 的类型和它们的父关系应该给出一些关于正在发生的事情的提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:46:17.020

他们不能有相同的名字。您正在向这两个类调用“xService”。例如，您可以给子类一个不同的名称“xServiceTest”并使用@Qualifier 注入它。另一件事，我不是 100% 确定，但我认为你可能会遇到这种继承的问题。如果有，只需创建一个包含所有常见实现的抽象类，然后创建 2 个子类，即服务和测试。

希望这可以帮助。

**[更新]**

> 谁能建议为什么 Spring 可能会关心类名是什么？

您可以检查您的配置是否有奇怪的`context:component-scan`条目。检查您是否定义了这样的内容：

```
 <context:component-scan resource-pattern="<path>/*Impl.class" ...> 
```

和/或某些特定的包含/排除标准。

# awk - awk 命令拆分第 n 个字段

> ID：15886428
> 
> 赞同：0
> 
> 时间：2013-04-08T18:35:52.663
> 
> 标签：awk, gawk

我正在学习 AWK，并且正在尝试一些关于内置字符串函数的练习。

这是我的练习：

我有一个包含如下的文件

```
RecordType:83    
1,2,3,a|x|y|z,4,5 
```

我想要的输出如下：

```
RecordType:83       
1,2,3,a,4,5         
1,0,0,x,4,5         
1,0,0,y,4,5       
1,0,0,z,4,5 
```

我为上面的输出写了一个 awk 命令。

```
awk -F',' '$1 ~ /RecordType:83/{print $0}

$1 == 1{

split($4,splt,"|")

for(i in splt)

{ 

if(i==1) 

print $1,$2,$3,splt[i],$5,$6 

else 

print $1,0,0,splt[i],$5,$6

} 

}' OFS=, file_name 
```

上面的命令看起来很笨拙。有没有办法最小化命令？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:41:53.523

我可以管理的最短的单线：

```
awk -F, 'NR>1{n=split($4,a,"|");for(;i++<n;){$4=a[i];print;$2=$3=0}}NR==1' OFS=, file
RecordType:83    
1,2,3,a,4,5
1,0,0,x,4,5
1,0,0,y,4,5
1,0,0,z,4,5 
```

更具可读性的脚本*（推荐）*：

```
BEGIN {
    FS=OFS=","                                       # Comma delimiter 
}
NR==1 {                                              # If the first line in file
    print $0                                         # Print the whole line
    next                                             # Skip to next line
}
{
    n=split($4,a,"|")                                # Split field four on |
    for(i=1;i<=n;i++)                                # For each sub-field
        print $1,i==1?$2OFS$3:"0"OFS"0",a[i],$5,$6   # Print the output
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:35:45.853

另一个较短的单线

```
 awk -F, -v OFS="," 'NR>1{n=split($4,a,"|");while(++i<=n){$4=a[i];print;$2=$3=0}}NR==1' file 
```

用你的例子：

```
kent$  awk -F, -v OFS="," 'NR>1{n=split($4,a,"|");while(++i<=n){$4=a[i];print;$2=$3=0}}NR==1' file                                                                          
RecordType:83    
1,2,3,a,4,5
1,0,0,x,4,5
1,0,0,y,4,5
1,0,0,z,4,5 
```

# php - 使用 PEAR 从数据库中提取的 Excel 文件中的前导零

> ID：15886430
> 
> 赞同：0
> 
> 时间：2013-04-08T18:35:58.490
> 
> 标签：php, javascript, html, excel, pear

在我网站的管理部分，有一个按钮可以从我的数据库中提取包含数据的 Excel 文件。实际上，它是使用 PEAR 单击按钮时创建的 Excel 文件。我使用 SQL 查询从我的 SQL Server 2008 数据库中获取必要的信息。

其中一个名为“number1”的列包含一个范围为 1-9999 的数字。我一直在寻找一种方法，当它已经没有 4 位数字时，让它在数字前面加上零，但直到现在我还没有运气。例如，如果数据库中的数字是 12，我希望它在我的 Excel 工作表中显示为 0012。

目前使用的代码如下：

```
if ($j == 15){
$worksheet->write($variable1, $j , $variable2[$i][$j], $text222);
    }
where $variable1 = 0; $variable2 = ("my sql query") 
```

感谢您的帮助。

编辑：答案（S）

```
$number = str_pad($value, 4, '0', STR_PAD_LEFT); 
```

或者

JAGAnalyst 的答案，我在代码中实际使用的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:41:30.573

或者，您也可以编辑 SQL 查询以返回四字符文本字符串而不是数字，包括替换功能，即

```
, CASE
WHEN Len(number1) = 1 THEN '000' + CAST(number1 AS VARCHAR(4))
WHEN Len(number1) = 2 THEN '00' + CAST(number1 AS VARCHAR(4))
WHEN Len(number1) = 3 THEN '0' + CAST(number1 AS VARCHAR(4))
ELSE CAST(number1 AS VARCHAR(4))
END AS NEW 
```

这实际上会改变提取的值，而不是简单地改变格式。

# file - 在matlab中读取带有字符串和整数的文件

> ID：15886434
> 
> 赞同：0
> 
> 时间：2013-04-08T18:36:09.380
> 
> 标签：file, matlab, file-io, newline

我必须在 Matlab 中读取一个如下所示的文件：

> D:\Classified\positive-videos\vid.avi 163 3 14 32 54 79 105 130 155 202 216 224 238 250 262 288 288 322 357 369 381 438 457 478 499 525 551
> 
> D:\Classified\positive-video\vid.2 AVI 163 3 14 32 54 79 105 130 155 202 216 224 238 250 262 288 288 322 357 369 381 438 457 478 499 525 551

有许多这样的行由换行符分隔。我需要这样阅读：我丢弃视频名称和第一个整数的路径（例如第一行中的 163）并读取数组中的所有数字，直到出现新行。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:59:29.907

您可以执行以下操作：

```
fid = fopen('test1.txt','r');
my_line = fgetl(fid);
while(my_line ~= -1)
    my_array = regexp(my_line,' ','split');
    my_line = fgetl(fid);
    disp(my_array(3:end));
end
fclose(fid); 
```

这会给你：

```
ans = 

  Columns 1 through 11

    '3'    '14'    '32'    '54'    '79'    '105'    '130'    '155'    '202'    '216'    '224'

  Columns 12 through 22

    '238'    '250'    '262'    '288'    '288'    '322'    '357'    '369'    '381'    '438'    '457'

  Columns 23 through 26

    '478'    '499'    '525'    '551'

ans = 

  Columns 1 through 11

    '3'    '14'    '32'    '54'    '79'    '105'    '130'    '155'    '202'    '216'    '224'

  Columns 12 through 22

    '238'    '250'    '262'    '288'    '288'    '322'    '357'    '369'    '381'    '438'    '457'

  Columns 23 through 26

    '478'    '499'    '525'    '551' 
```

## 编辑

对于数字矩阵结果，您可以将其更改为：

```
clear;
close;
clc;

fid = fopen('test1.txt','r');
my_line = fgetl(fid);
my_array = regexp(my_line,' ','split');
my_matrix = zeros(0, numel(my_array(3:end)));
ii = 1;
while(my_line ~= -1)
    my_array = regexp(my_line,' ','split');
    my_line = fgetl(fid);
    my_matrix = [my_matrix;zeros(1,size(my_matrix,2))];
    for jj=1:numel(my_array(3:end))
        my_matrix(ii,jj) = str2num(cell2mat(my_array(jj+2)));
    end
    ii = ii + 1;
end
fclose(fid); 
```

这将产生：

```
my_matrix =

     3    14    32    54    79   105   130   155   202   216   224   238   250   262   288   288   322   357   369   381   438   457   478   499   525   551
     3    14    32    54    79   105   130   155   202   216   224   238   250   262   288   288   322   357   369   381   438   457   478   499   525   551 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:09:53.423

一种更简单的方法如下：

```
fid = importdata(filename)
results = fid.data; 
```

广告 maiora。

**编辑**

由于您想丢弃字符串后的第一个值，因此您必须调用

```
res = fid.data(:,2:end); 
```

而不是`results`.

# objective-c - CGRectMake 不适用于 viewDidLayoutSubviews 中的自定义框架

> ID：15886435
> 
> 赞同：4
> 
> 时间：2013-04-08T18:36:23.997
> 
> 标签：objective-c, cocoa-touch, ios6, interface-builder, autolayout

这是我正在使用的代码：

```
-(void)viewDidLayoutSubviews{
    CGSize screenSize = [[UIScreen mainScreen] bounds].size;

    if (screenSize.height <= 480.0f) {
        self.img.frame = CGRectMake(21, 20, 280, 275);
        self.text.frame = CGRectMake(21, 20, 280, 275);
        self.decrease.frame= CGRectMake(55, 308, 39, 39);
        self.add.frame = CGRectMake(55, 308, 39, 39);
        self.increase.frame =CGRectMake(55, 308, 39, 39);
    }
    else{
        self.img.frame = CGRectMake(21, 20, 280, 400);
        self.text.frame = CGRectMake(21, 20, 280, 400);
        self.decrease.frame= CGRectMake(55, 308, 39, 39);
        self.add.frame = CGRectMake(55, 308, 39, 39);
    }    
} 
```

我正在使用相同的代码（在 viewDidLayoutSubviews 之外）来更改框架，并且效果很好。我的问题是 viewDidLayoutSubviews 中的代码不起作用。它不会在加载视图时改变帧大小或位置。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:56:08.650

你不应该先调用[super viewDidLayoutSubviews] 吗？

```
-(void)viewDidLayoutSubviews{ 
    [super viewDidLayoutSubviews];
    CGSize screenSize = [[UIScreen mainScreen] bounds].size;

    if (screenSize.height <= 480.0f) {
        self.img.frame = CGRectMake(21, 20, 280, 275);
        self.text.frame = CGRectMake(21, 20, 280, 275);
        self.decrease.frame= CGRectMake(55, 308, 39, 39);
        self.add.frame = CGRectMake(55, 308, 39, 39);
        self.increase.frame =CGRectMake(55, 308, 39, 39);
    }
    else{
        self.img.frame = CGRectMake(21, 20, 280, 400);
        self.text.frame = CGRectMake(21, 20, 280, 400);
        self.decrease.frame= CGRectMake(55, 308, 39, 39);
        self.add.frame = CGRectMake(55, 308, 39, 39);
    }    
} 
```

# r - 如何在 R 中创建时间序列变量

> ID：15886438
> 
> 赞同：1
> 
> 时间：2013-04-08T18:36:44.380
> 
> 标签：r, time-series, hour

您好，我对 R 完全陌生，在开始我的项目之前，我正在尝试对存储在 .csv 文件中的简单时间序列进行简单的时间序列分析，如下所示。

```
Date/Time,AT
01-Jan-2008 00:00,1
01-Jan-2008 01:00,2
01-Jan-2008 02:00,3
01-Jan-2008 03:00,4
01-Jan-2008 04:00,5
01-Jan-2008 05:00,4
01-Jan-2008 06:00,3
01-Jan-2008 07:00,2
01-Jan-2008 08:00,1
01-Jan-2008 09:00,2
01-Jan-2008 10:00,3
01-Jan-2008 11:00,4
01-Jan-2008 12:00,5 
```

从这个 .csv 文件中，我想创建一个时间序列变量。以下代码会产生错误。我可能需要安装软件包吗？

```
test=ts(scan("desktop/test.csv"),frequency=13, start=2008+1/1) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:53:24.003

您可以使用`read.zoo`from `zoo`package 在时间序列中直接读取您的 csv。

```
library(zoo)

fmt <- '%d-%b-%Y %H:%M'

## if data in file replace with this line:
## dat <- read.zoo("myfile.dat",header=TRUE,sep=',',tz='',format=fmt,index=0:1)                     

dat <- read.zoo(text='Date/Time,AT
01-Jan-2008 00:00,1
01-Jan-2008 01:00,2
01-Jan-2008 02:00,3
01-Jan-2008 03:00,4
01-Jan-2008 04:00,5
01-Jan-2008 05:00,4
01-Jan-2008 06:00,3
01-Jan-2008 07:00,2
01-Jan-2008 08:00,1
01-Jan-2008 09:00,2
01-Jan-2008 10:00,3
01-Jan-2008 11:00,4
01-Jan-2008 12:00,5',header=TRUE,sep=',',
                tz='',
                format=fmt,       ## date format
                index=0:1)        ## rownames + first column

dat
2008-01-01 00:00:00 2008-01-01 01:00:00 2008-01-01 02:00:00 2008-01-01 03:00:00 2008-01-01 04:00:00 2008-01-01 05:00:00 
                  1                   2                   3                   4                   5                   4 
2008-01-01 06:00:00 2008-01-01 07:00:00 2008-01-01 08:00:00 2008-01-01 09:00:00 2008-01-01 10:00:00 2008-01-01 11:00:00 
                  3                   2                   1                   2                   3                   4 
2008-01-01 12:00:00 
                  5 
```

当然，您可以将 zoo 对象转换为 ts one（甚至最好使用 zoo 和 xts 包进行时间序列）：

```
dat.ts <- ts(dat) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:36:01.313

另一种方法是使用包“Lubridate”。

```
library(lubridate)
timeseries <- read.table("timeseries.csv", sep=",", header=T, dec=".")
timeseries[,1] <- dmy_hm(timeseries[,1]) 
```

假设您的数据存储在名为“timeseries”的 csv 中，则数据将被读入 data.frame。第一列更改为 POSIXct 类。POSIXct 在 R 中被广泛用作日期/时间格式。

当然也可以把data.frame转成ts：

```
timeseries <- as.ts(timeseries) 
```

# asp.net - Web-farm 中的 Viewstate 验证失败 - 消除了通常的嫌疑人

> ID：15886439
> 
> 赞同：3
> 
> 时间：2013-04-08T18:36:49.077
> 
> 标签：asp.net, viewstate, machinekey

我认为我已经尝试了对这个问题的所有标准响应，并且我知道我已经阅读了数百个关于这个问题的问题和帖子，但他们似乎都没有解决它或阐明原因在我的场景中。（我已经下降了 5 个小时，而且没有更近的时间了 :-( ）

*   我有一个由 2 台服务器组成的网络农场。

*   我已经在两台机器上的 machine.config 中设置了机器密钥和验证密钥

*   加密：SHA1，解密：AES - 这些是默认值，可以更改它们吗？

*   我已验证链中没有其他配置文件（web.cfg、apphost 等）具有这些值的设置。

*   我已经向站点添加了一个页面（[基于此 SO](https://stackoverflow.com/questions/14141066/getting-current-machinekey-or-equivilent-for-hmac-in-web-farm)），该页面将机器键值吐回，并验证它们在对两台机器的请求中是相同的，并且与机器 .config 中的值匹配

*   服务器端会话状态处于共享状态服务器，我已经验证 sessionid 在对 2 个服务器的请求之间保持不变。

*   我已验证页面已完全加载，并且 __EVENTVALIDATION 隐藏字段已在开始发布之前呈现到页面中。视图状态大小在 7.64kb 时还不错

**当页面从对服务器 1 的请求呈现，然后再发回服务器 2 时，我会感到害怕......**

```
Error Message:

Unable to validate data.
at System.Web.Configuration.MachineKeySection.GetDecodedData(Byte[] buf, Byte[] modifier,   Int32 start, Int32 length, Int32& dataLength)
at System.Web.UI.ObjectStateFormatter.Deserialize(String inputString)   HttpApplication.RecordError => HttpApplication.RaiseOnError => global_asax.Application_Error 
```

帖子是由一个标准的、纯粹的 asp 链接按钮触发的，页面上没有 ajax。

任何和所有的帮助将不胜感激。

设置 enableViewStateMAC = false 不是解决方案:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:35:50.423

继承了配置状态下的服务器，我从未质疑过密钥的有效性！！！...刚刚检查了它们在两台服务器上是否匹配...

保持所有加密/解密和验证算法设置不变，我使用**[这个工具](http://www.sourcetree.net/sourcetree/Development/Aspnet%20Examples/GenerateMachineKeyForWebConfig.aspx)**生成了新的密钥，它比其他工具有更多的选项。

问题解决了

**故事的寓意：如果有疑问，请生成新密钥**

...但是为什么以及如何？一些带有视图状态的回发与旧密钥一起工作得很好，只有当回发到不同的服务器时，问题才变得明显。如果密钥无效-缺少字符或其他内容-那么*每个*回发都应该失败-*我认为*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:32:59.747

如果您确定两个盒子上的机器密钥相同，那可能是其加密/解密吗？

您是否尝试过使用 Triple DES 并在两台服务器上的 machine.config 中设置 decryptionKey？

[在这里检查](http://msdn.microsoft.com/en-us/library/w8h3skw9%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:33:30.913

确保 machineKeys 相同的一种简单方法是在 web.config 中添加这样的行。

注意：假设您在两台服务器上都有相同的 web.config 并确保validationKey 和decryptionKey 有效

您可以使用[http://aspnetresources.com/tools/machineKey](http://aspnetresources.com/tools/machineKey)来生成它。

```
<system.web>
  <machineKey validationKey="*D9B0EDEA69D81A89BF5FBA2B08BAF691013F86B89A1F6BA8068C6ECC9539074" decryptionKey="*AE2B1966AF65D08F03EDFB" validation="SHA1" decryption="AES" /> 
```

# javascript - highcharts（highstock）上的范围选择器问题

> ID：15886453
> 
> 赞同：1
> 
> 时间：2013-04-08T18:37:45.720
> 
> 标签：javascript, highcharts, highstock

我正在使用两个不同的 highstock 图表，它们都有 2 个系列。两个图表都加载到同一个 div 中，这取决于选择了哪个按钮。为此，我在用户按下其他按钮时设置系列数据，我遇到的问题是在一个图表中我可以选择大约 10 分钟的最小范围，但在另一个图表中我无法选择范围低于一小时。两者的设置相同，唯一不同的是一个有小数，另一个没有。

我希望您可以选择一个范围，更改图表并保留另一个选择。This work when the selection is bigger than 1 hour.

希望您能够帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T12:27:17.790

您可以尝试使用允许定义范围的 setExtremes() 函数。 [http://api.highcharts.com/highstock#xAxis.events.setExtremes](http://api.highcharts.com/highstock#xAxis.events.setExtremes)

# c# - WPF 不显示数据网格内的数据

> ID：15886454
> 
> 赞同：0
> 
> 时间：2013-04-08T18:37:46.540
> 
> 标签：c#, wpf, xaml

我正在遵循一些示例，但我无法在我的数据网格中显示数据。值得一提的是，我在查看调试器时从 db 获取数据。

主窗口.xaml.cs

```
public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

    }

public partial class MainWindow : Window
{
    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        using (session...)
        {
            using (transaction...)
            {
                var properties = new List<MyProperty>();
                // this variable is populated inside debugger
                properties = session.Query<MyProperty>().ToList();
                if (properties != null)
                {
                    MRDataGrid.Columns[0].Visibility = System.Windows.Visibility.Hidden;
                    MRDataGrid.Columns[1].Visibility = System.Windows.Visibility.Hidden;
                    MRDataGrid.Columns[8].Visibility = System.Windows.Visibility.Hidden;
                }
            }
        }
    }
} 
```

主窗口.xaml

```
<Window x:Class="MyProject.WPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        WindowStartupLocation="CenterScreen" BorderBrush="Black"
        Background="AntiqueWhite" ResizeMode="NoResize"
        Loaded="Window_Loaded">
    <Grid>
        <DataGrid AutoGenerateColumns="False" Height="202" HorizontalAlignment="Left" Margin="22,82,0,0" 
                  Name="MRDataGrid" VerticalAlignment="Top" Width="461" ItemsSource="{Binding}"/>
    </Grid>
</Window> 
```

更新

*   我已在 MainWindow.xaml 中更改为 AutoGenerateColumns="True"
*   添加了 MRDataGrid.ItemsSource = 属性；在 xaml.cs 代码中
*   我应该在 MainWindow.xaml 的 ItemSource 中放什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:45:12.680

您没有设置任何要`ItemsSource="{Binding}"`使用的上下文。

做类似`myDataGrid.DataContext=...`的事情或绑定数据上下文或更改`{Binding}`到您需要它的点

如：

```
if (properties != null)
 {
    myDataGrid.ItemsSource = properties;
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:45:33.137

属性 = session.Query().ToList();

MRDataGrid.ItemsSource = 属性；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:45:36.600

您的数据网格没有列。您需要自己声明它们或设置`AutoGenerateColumns="True"`您还需要像 Sten Petrov 所说的那样分配项目来源

# python - python的简单图形

> ID：15886455
> 
> 赞同：19
> 
> 时间：2013-04-08T18:37:53.107
> 
> 标签：python, user-interface, python-3.x, tkinter

我正在用 python 进行模拟，需要可视化。我正在寻找python拥有的最简单的图形库。有什么可以让我做一些类似的事情：

```
setWindow(10,10)
setCube(0,0,1,1,1)#windowX, windowY, width, length, hight,
updateList = simUpdate
for update in updateList:
    removeShape(0,0)
    setCube(0,0,1,1,1) 
```

有这么简单的事吗？3d不是必须的，但它会很好。据我所知，我正在使用 python 3.3 并且 pygames 尚未在 mac 上更新。我一直在与 tkinter 合作，但想要一些更简单的东西。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-08T18:50:46.087

对于简单的图形，您可以使用[`graphics.py`](http://mcsp.wartburg.edu/zelle/python/graphics.py).

它不包含在 Python 中，因此您应该将其保存为 Python 文件（最好命名为`graphics.py`），Python 可以在其中看到它 --- 在您的`sys.path`.

***注意：***也可以使用`pip install graphics.py` [查看链接](https://pypi.org/project/graphics.py/)

它非常容易学习，并且已经内置了各种形状。没有原生 3D 图形（其中没有），但这样做很容易：对于一个立方体，画一个正方形，另一个画到一边，然后将一个正方形的一个角连接到另一个正方形的相应角。

`graphics.py`用于创建正方形的示例：

```
from graphics import *
win = GraphWin(width = 200, height = 200) # create a window
win.setCoords(0, 0, 10, 10) # set the coordinates of the window; bottom left is (0, 0) and top right is (10, 10)
mySquare = Rectangle(Point(1, 1), Point(9, 9)) # create a rectangle from (1, 1) to (9, 9)
mySquare.draw(win) # draw it to the window
win.getMouse() # pause before closing 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-08T19:01:25.080

`pygame` *确实* [适用于 3.x](http://www.pygame.org/wiki/FrequentlyAskedQuestions#Does%20Pygame%20work%20with%20Python%203?)和 Mac OS X。对于任何最近的 Mac 版本都没有二进制安装程序，但这并没有太大的损失，因为二进制安装程序从来都不是很好。您基本上必须遵循 Unix 安装说明，并自己弄清楚如何安装所有先决条件（如果您使用[Homebrew](http://mxcl.github.io/homebrew/)，它只是`brew install sdl sdl_ttf … jpeg libpng`），然后弄清楚如何告诉安装程序如何找到所有这些先决条件。您可能想查看（甚至可能使用）[这个配方](https://github.com/samueljohn/homebrew-python/blob/master/pygame.rb)，适用于您自己的特定 Python 安装。

据我所知，3D 图形的其他主要替代品是[`PyOpenGL`](http://pyopengl.sourceforge.net/)和[`pyglet`](http://www.pyglet.org/). 前者是 OpenGL 的一个非常直接的包装器，如果你用 GL 术语来思考的话，这是非常棒的。后者是一个更高级别的库，有点类似于`pygame`但直接构建在每个平台上的原生 OpenGL 和原生窗口上，而不是在 SDL 上。

您可能还想查看[Python 3D Software Collection](http://www.vrplumber.com/py3d.py)，它由`PyOpenGL`. 我不知道它是最新的，但他仍然从`PyOpenGL`网站和文档链接到它。

如果您正在寻找面向数学的东西，您可能想看看[`matplotlib`](http://matplotlib.org),[`mplot3d`](http://matplotlib.org/mpl_toolkits/mplot3d/index.html)和朋友。如果您最终尝试绘制复杂的几何形状和变换/相交/等。他们，这是你的朋友。如果您正在尝试构建一个简单的游戏或准 CAD 程序，则不是。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-09T02:06:09.217

Visual Python，来自[www.vpython.org](http://www.vpython.org)

专为非 OpenGL 黑客的人设计。它有一个保留的场景图模型，而不是直接的，一些内置的控件，并且有相当多的科学/工程模拟示例在互联网上流传。

# c - 使用管道捕获子进程的stdin、stdout、stderr

> ID：15886457
> 
> 赞同：1
> 
> 时间：2013-04-08T18:38:03.870
> 
> 标签：c, unix, exec, fork, stdin

我必须用 C (Unix) 编写程序，该程序捕获命令行参数中传递的命令的标准输入、标准输出和标准错误。

例如，

```
./capture echo Hi
== stdout ===
Hi
== end of stdout ==
./capture bc -q
== stdin ==
1+2
== end of stdin ==
== stdout ==
3
== end of stdout == 
```

我已经为 stdout 和 stderr 实现了这样的行为：

```
int pipe_out[2];
int pipe_in[2];
int finished = 0;

void sig_handler(int signo)
{
    if (signo == SIGCHLD)
    {
        finished = 1;
        wait(NULL);
    }
}

void ChildProcess (char * argv[], char * env[])
{

    dup2(pipe_out[1], 1);
    dup2(pipe_out[1], 2);
    dup2(pipe_in[0], 0);

    close(pipe_out[0]);
    close(pipe_out[1]);

    close(pipe_in[0]);
    close(pipe_in[1]);

    int return_code = execvpe(argv[0], argv, env);
    printf("This should not appear: %d\n", return_code);
    printf("Error: %s\n\n", strerror(errno));
}   

void ParentProcess(pid_t pid)
{
    int status;
    char buf[10000];

    fd_set out_fds;
    fd_set in_fds;

    signal(SIGCHLD, sig_handler);

    do
    {
        FD_ZERO(&out_fds);
        FD_ZERO(&in_fds);
        FD_SET(pipe_in[1], &in_fds); 
        FD_SET(pipe_out[0], &out_fds);
        int cnt = select(max(pipe_out[0], pipe_out[0]) + 1, &out_fds, NULL, NULL, NULL);
        if (cnt > 0 && FD_ISSET(pipe_out[0], &out_fds))
        {
            puts("== stdout ==");
            read(pipe_out[0], buf, sizeof(buf));
            printf("%s", buf);
            puts("== end of stdout == ");
            continue;
        }
        if (0 && FD_ISSET(pipe_in[1], &in_fds))
        {
            puts("== stdin ==");
            write(pipe_in[1], "1+2\n", sizeof("1+2\n"));
            puts("== end of stdin ==");
            continue;
        }
    } while (!finished);
} 
```

据我了解，它以这种方式工作：父进程调用 select() 并等待子进程的输出。之后，父进程打印附加信息（== stdout ==）和子进程的输出。

当我尝试为标准输入实现相同的行为时，我发现它`in_fds`总是独立于子进程需要什么。所以`capture`总是从标准输入读取。即使子进程需要输出一些东西。

所以我的问题是如何实现这种行为？

我认为必须有一个特殊信号指示子进程何时需要一些输入，但我找不到任何东西。

# javascript - Sound Mananger 2 设置问题

> ID：15886467
> 
> 赞同：0
> 
> 时间：2013-04-08T18:38:26.930
> 
> 标签：javascript, html

我在配置 Sound Manager 2 时遇到了很多麻烦。我要做的就是将 mp3-player-button 添加到我的 mp3 链接中，但是当单击它时，它会将用户重定向到仅带有音频播放器的源网页并播放歌曲。我似乎无法将 Sound Manager 2 配置为仅播放我网站中的链接。

在我的标题中是

```
<link rel="stylesheet" type="text/css" href="/soundmanager/demo/mp3-player-button/css/mp3-player-button.css" />
<script type="text/javascript" src="/soundmanager/script/soundmanager2.js"></script>
<script type="text/javascript" src="/soundmanager/demo/mp3-player-button/script/mp3-player-button.js"></script> 
```

我输出代码的地方在我的身体里

```
<p><a href="linktomp3" class="sm2_button"</p> 
```

这就是我所做的一切，但它似乎根本不起作用:(

# javascript - 检测用户在文本框中输入

> ID：15886468
> 
> 赞同：3
> 
> 时间：2013-04-08T18:38:31.047
> 
> 标签：javascript

我正在使用侦听器来检测用户何时完成文本框；当文本的值发生更改时，我将使用 innerHTML 将它们的文本粘贴到页面上。

```
document.getElementById("dateinput").addEventListener("change", function() {
     myDate(document.getElementById("dateinput").value);
     }, false); 
```

有没有一种方法可以监听每个按键，以便在键入时立即逐个粘贴 .value 字符？我只想在文本框有焦点时执行此操作。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T18:39:22.117

是的，在现代浏览器中，事件是`keyup`、或 （包括相关元素中的任何用户发起的、非编程的事件）。`keydown``keypress``input``<input>`

参考：

*   事件：
    *   [`input`](https://developer.mozilla.org/en-US/docs/Web/Events/input).
    *   [`keydown`](https://developer.mozilla.org/en-US/docs/Web/Events/keydown).
    *   [`keypress`](https://developer.mozilla.org/en-US/docs/Web/Events/keypress).
    *   [`keyup`](https://developer.mozilla.org/en-US/docs/Web/Events/keyup).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-08T18:39:44.533

您可以使用 keyup/keydown/keypress

```
document.getElementById("dateinput").addEventListener("keyup", function() {
     myDate(document.getElementById("dateinput").value);
     }, false); 
```

你可以使用 onpaste

```
 document.getElementById("dateinput").addEventListener("paste", function() {
         myDate(document.getElementById("dateinput").value);
         }, false); 
```

# python - 删除 Mongoengine 中的所有集合

> ID：15886469
> 
> 赞同：11
> 
> 时间：2013-04-08T18:38:33.880
> 
> 标签：python, mongodb, mongoengine

我已经搜索了 api，但是如果不手动遍历集合，就找不到与删除数据库有关的任何内容。

有没有更简单的`db.dropDatabase()`通过mongoengine调用的方法？迭代并不是什么大不了的事，只是想要一种更简单的方法。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-08T18:53:31.433

这样做怎么样？

```
from mongoengine import connect

db = connect('test')
db.drop_database('test') 
```

或者，您可以从方法获取连接对象`_get_db()`：

```
from mongoengine import connect
from mongoengine.connection import _get_db

connect('test')

db = _get_db()
db.connection.drop_database('test') 
```

# iphone - iphone中的录音格式？

> ID：15886470
> 
> 赞同：0
> 
> 时间：2013-04-08T18:38:37.097
> 
> 标签：iphone, ios, avaudiorecorder, avaudiosession

我想在我的 iphone 应用程序中录制音频，我发现录制格式是 AAC 我可以录制的其他格式是什么，如何录制 MP3 格式的音频，有没有教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:45:20.673

不仅有acc，m4a格式。您可以在录制后稍后使用转换器，即使 iTunes 可以选择转换它

# xml - 我对 DTD 的理解正确吗？

> ID：15886471
> 
> 赞同：3
> 
> 时间：2013-04-08T18:38:47.350
> 
> 标签：xml, dtd

我正在自学 XML，这是我编写的第一个 DTD。下面是 DTD 后跟的 XML 数据。

```
<?xml version="1.0" encoding="unicode" ?>
<!DOCTYPE people SYSTEM "validator.dtd">

<people>
    <student>
        <name>John</name>
        <course>Computer Technology</course>
        <semester>6</semester>
        <scheme>E</scheme>
    </student>

    <student>
        <name>Foo</name>
        <course>Industrial Electronics</course>
        <semester>6</semester>
        <scheme>E</scheme>
    </student>
</people> 
```

和 DTD

```
<!ELEMENT people (student)*>
<!ELEMENT student (name,course,semester,scheme)>
<!ELEMENT name (#PCDATA)>
<!ELEMENT course (#PCDATA)>
<!ELEMENT semester (#PCDATA)>
<!ELEMENT scheme (#PCDATA)> 
```

到目前为止，这是我对 DTD 的理解。
我有一个名为`people`它的根`student`。现在，既然我有一个`*`那么我可以在`zero or more`里面有学生。但我想它应该改为`+`（一个或多个），因为它更有意义？

里面`student`是名字，课程学期和计划。当我在右括号后省略任何符号时，这意味着这些标签中的每一个只能在学生标签内出现一次。这意味着一个学生不能有多个名字、一个学期等

最后，名称、课程、学期和方案具有`#PCDATA`这意味着数据将被其他人解析，并且**在这里排除符号会有所不同吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:11:03.267

你说：

> 当我在右括号后省略任何符号时，这意味着这些标签中的每一个只能在学生标签内出现一次。

我只想补充一点，这些标签中的每一个都**必须**出现一次；除非您有`?`或，否则它们不是可选的`*`。此外，它们必须按该顺序出现（因为您使用了`,`）。

`#PCDATA`表示已解析的字符数据，基本上是将由解析器解析的文本。例如，文本“ `Sample &text;`”将被解析，`&text;`实体引用将被解析。

您真正需要符号（出现指示器）的唯一时间`#PCDATA`是当您有混合内容（文本和元素）时。它也必须是`*`：

```
<!ELEMENT elem (#PCDATA|anotherElem)*> 
```

# ios - 在 iOS 应用中拥有动画背景

> ID：15886478
> 
> 赞同：0
> 
> 时间：2013-04-08T18:39:08.730
> 
> 标签：ios, animation

现在我有一个树的 UIImageView，上面放置了各种 UI 元素。我觉得这种看起来很无聊。我想做的是让我的树在风中飘扬。

我的计划是在 Blender 中创建我的动画，然后将其导出为视频，并使用此视频代替我的背景 UIImageView。

A）是否可以以这种方式使用视频？

B) 我需要什么类型的视图？

C) 是否可以循环播放视频？

* * *

因为我还没有开始制作动画，所以我很灵活，愿意接受其他建议来达到同样的效果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:54:00.937

这是一种方式，它有很多图像并将这些图像传递给 UIImageView。

您有许多图像并将这些图像保存在一个数组中。

```
backgroundImageView.animationImages = imagesArray;//pass in the array
backgroundImageView.animationRepeatCount = 0;
backgroundImageView.animationDuration = duration;//set some time.
[backgroundImageView startAnimating]; 
```

希望这有帮助..只是一个建议

# c# - 列表视图中的数据寻呼机问题

> ID：15886485
> 
> 赞同：0
> 
> 时间：2013-04-08T18:39:26.860
> 
> 标签：c#, asp.net

我有一个列表视图，我在其中放置了 datapager，如下所示。我正在使用 SQl 数据源并将记录绑定到 ListView。

```
asp:ListView runat="server" ID="ListView1" DataKeyNames="ProductId,GameName" DataSourceID="GameTable" OnItemCommand="On_Select_Item" 
```

和 LayoutTemplate 中的 datapager

在项目模板中，我放置了一个按钮，当单击它时，它会调用我试图获取 DatakeyName 值的方法。给出寻呼机时，它在第一页工作正常，但是当移动到寻呼机中的其他页面时，它会抛出异常。这是按钮点击代码，

```
protected void On_Select_Item(object sender, ListViewCommandEventArgs e)
    {

        if (String.Equals(e.CommandName, "AddtoCart"))
        {
            //checks if the user is logged in
            if (User.Identity.IsAuthenticated)
            {
                ListViewDataItem dataItem = (ListViewDataItem)e.Item;
                DropDownList dl = e.Item.FindControl("DropDownList") as DropDownList;
                String val="";

                if (dl != null)
                {
                    val = dl.SelectedValue; //Get the selected value from DropDownList
                }
                String price = Convert.ToString(e.CommandArgument).Trim(); //Get the price for the selected game. 
```

-------------在下面的行抛出异常 ---------

```
 string ProductId =
            ListView1.DataKeys[dataItem.DataItemIndex]["ProductId"].ToString(); //Product Id for the selected game.
            string GameName = ListView1.DataKeys[dataItem.DataItemIndex]["GameName"].ToString(); //gamename

...............................
............................. 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:25:31.377

先定义一个网格（可以把控件名改成listView但是实现是一样的）

```
 <asp:GridView runat="server" ID="grdResult" 
                    CellPadding="2" 
                    OnPageIndexChanging="grdResult_PageIndexChanging"
                    GridLines="None" 
                    Width="100%" 
                    AllowSorting="True" 
                    AllowPaging="True" 
```

然后在底部定义一个数据源

```
<asp:SqlDataSource ID="sqlGridData" runat="server"></asp:SqlDataSource> 
```

现在在后面的代码中用数据加载你的 sqlGridData 控件（它接受许多参数，如数据表、odbcrecordset 你可以使用这里提到的 .provider 属性[http://tinyurl.com/bllyjsz](http://tinyurl.com/bllyjsz)）如果你有静态数据，你甚至在设计中提到时间（在这里完成[http://tinyurl.com/c8b6mbh](http://tinyurl.com/c8b6mbh)）

```
private void BindDataGrid()
    {
        sqlGridData.Provider = dataReader;
        grdResult.DataSourceID = "xmlGridData";
        //grdResult.PageIndex = 0;
    } 
```

试试这个，如果您有任何疑问，请告诉我。

# c# - protobuf-net 的 DeepClone 问题 - 使用枚举

> ID：15886486
> 
> 赞同：3
> 
> 时间：2013-04-08T18:39:30.043
> 
> 标签：c#, .net, protobuf-net

我有一个用 DataContract 和 ProtoContract(ImplicitFields = ImplicitFields.AllFields) 装饰的类，其中一个成员和属性是 Enum。我正在尝试对对象进行深度克隆，但是当源在枚举成员中具有映射到值 0 的值时，在克隆之后我得到默认值

课程是：

```
public enum A {
    A0 = 0,
    A1 = 1,
    A2 = 2
}
[ProtoContract(ImplicitFields = ImplicitFields.AllFields)]
public class Ac {
    private A _aa = A.A2;
    public string sa { get; set; }
    public A aa { get { return _aa; } set { _aa = value; } }
} 
```

带序列化代码：

```
Ac a1 = new Ac();
a1.sa = "dfdf";
a1.aa = A.A0;
Ac a2 = new Ac();
a2.sa = "dfdf";
a2.aa = A.A1;
var sa1 = Serializer.DeepClone<Ac>(a1);
var sa2 = Serializer.DeepClone<Ac>(a2); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:14:25.640

由于遗留原因，protobuf-net 使用“隐式零默认值”行为。我对 v1 感到遗憾，但我们做到了。因此，隐式默认值为`0`=== `A0`。但是，您可以重新教育它：

```
[DefaultValue(A.A2)]
private A _aa = A.A2; 
```

（即告诉系统你的构造函数要做什么）

或者，如果您对了解 protobuf-net 的使用感到满意 - 您可以更改此行为：

```
RuntimeTypeModel.Default.UseImplicitZeroDefaults = false; 
```

在这种情况下，只处理显式默认（`[DefaultValue]`和条件模式，例如`ShouldSerialize*`/ `*Specified`）。

# c++ - boost::algorithm::compare & const char

> ID：15886488
> 
> 赞同：0
> 
> 时间：2013-04-08T18:39:41.800
> 
> 标签：c++, boost, compare

用来`#include <boost/algorithm/string.hpp>`比较`std::string`_`std::vector<std::string>`

```
std::string commandLine

std::string::size_type position

std::string delimiters[] = {" ", ",", "(", ")", ";", "=", ".", "*", "-"};
std::vector<std::string> lexeme(std::begin(delimiters), std::end(delimiters)); 
```

比较

```
while (!boost::algorithm::contains(lexeme, std::to_string(commandLine.at(position)))){
    position--;
} 
```

生成以下错误

```
Error   1   error C2679: binary '==' : no operator found which takes a right-hand operand of type 'const char' (or there is no acceptable conversion) 
```

`const char`? 我不是在定义字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:54:26.743

[`boost::algorithm::contains`](http://www.boost.org/doc/libs/release/doc/html/boost/algorithm/contains.html)测试一个*序列*是否包含在另一个序列中，而不是一个*项目*是否包含在序列中。您正在传递一个字符串序列和一个字符序列（又名字符串）；因此，当它尝试将字符串与字符进行比较时会出现错误。

相反，如果要在字符串序列中查找字符串，请使用`std::find`：

```
while (std::find(lexeme.begin(), lexeme.end(), 
                 std::to_string(commandLine.at(position))) == lexeme.end())
{
    --position;
} 
```

# sql - SQL：为 NULL 列输出默认字符串

> ID：15886491
> 
> 赞同：0
> 
> 时间：2013-04-08T18:39:47.717
> 
> 标签：sql, oracle

我正在使用 sqlplus 命令提示符，我想显示一个默认字符串，让我们对所有 NULL 列说“ITISNULL”而不更新它们。从注册中选择 * ....

Enrollments 是一个可能在其 lgrade 列中包含 null 的表。我不想更新它，只是想要一个输出字符串说，“待分级”打印在它的位置。

我可以为此使用任何 SQL 函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:41:54.230

有几种方法可以做到这一点。一种选择是使用`COALESCE`：

```
SELECT COALSECE(lgrade, 'to be graded')... 
```

您不能为所有字段指定 *，您必须相应地指定每个列名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:42:10.457

NVL 是您的答案，您需要对可能具有空值的每一列执行

[http://www.techonthenet.com/oracle/functions/nvl.php](http://www.techonthenet.com/oracle/functions/nvl.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T18:50:29.180

在 SQL*Plus 中，您可以使用`SET NULL`：

```
SQL> SET NULL 'ITISNULL'
SQL> SELECT ... 
```

所有`NULL`结果将显示为`ITISNULL`。唯一的问题是宽度小于 8（的长度`ITISNULL`）的列可能会换行——至少在我的旧版本 SQL*Plus (9.2) 中是这样。

要将 SQL*Plus 恢复为其默认值，请发出以下命令：

```
SQL> SET NULL '' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T18:55:19.807

当列为空时，有很多方法可以显示字符串。如上所述，一些方法：-

1.  每当 col1 的值为 null 时，使用 NVL 显示“itisnull”。

    ```
    select nvl(col1, 'itisnull') from tableName; 
    ```

2.  每当 col1 的值为 null 时，使用 CASE 显示“itisnull”。

    ```
    select
     case when col1 is null then
     'itisnull'
     else col1
     end colum from tableName; 
    ```

# c# - 将 C dll 函数导入 C#

> ID：15886492
> 
> 赞同：2
> 
> 时间：2013-04-08T18:39:49.913
> 
> 标签：c#, dll, i2c

这是我的第一篇 stackoverflow 帖子。这几天我一直在纠结这个问题。我尝试将作为 C Dll 的 usbi2cio.dll 导入基于 C# 的项目。我浏览了网站中的大多数类似帖子，但我仍然无法解决我的问题，因为我的情况可能略有不同。

所以这里是作为参数的 API 和相关结构的原始定义：

```
LONG _stdcall DAPI_ReadI2c(HANDLE hDevInstance, I2C_TRANS * TransI2C);
typedef struct _I2C_TRANS {
    BYTE byTransType;
    BYTE bySlvDevAddr;
    WORD wMemoryAddr;
    WORD wCount;
    BYTE Data[256];
}I2C_TRANS, *PI2C_TRANS;

//In my C# code, I did the translation like this:
[StructLayoutAttribute(LayoutKind.Sequential), Serializable]
public struct I2C_TRANS
{
    public byte byTransType;
    public byte bySlvDevAddr;
    public ushort wMemoryAddr;
    public ushort wCount;
    [MarshalAsAttribute(UnmanagedType.ByValArray, SizeConst = 256, ArraySubType = UnmanagedType.I1)]
    public byte[] Data;

    public I2C_TRANS(int size)
    {
        Data = new byte[size];
        this.byTransType = 0x00;
        this.bySlvDevAddr = 0x00;
        this.wMemoryAddr = 0;
        this.wCount = 0;
    }
};

public I2C_TRANS TransI2C = new I2C_TRANS(256);
public IntPtr[] hDevice = new IntPtr[DAPI_MAX_DEVICES];
...
TransI2C.byTransType = byTransType;
TransI2C.bySlvDevAddr = bySlvDevAddr;
TransI2C.wMemoryAddr = wMemoryAddr;
TransI2C.wCount = wCount;// no larger than 64
...
if((hDevice[0] = DAPI_OpenDeviceInstance(devName, 0)) != INVALID_HANDLE_VALUE)
    //the returned lReadCnt should be equal to wCount.
    Public int lReadCnt = DAPI_ReadI2c(hDevice[0], ref TransI2C); 
```

由于某种原因，读取的 I2C 事务中的 struct 无法很好地传递，因此该函数返回 0 值而没有错误（我期望与 wCount 的值相同）。对于其他一些类似的 API 和结构，它运行良好。那么这个问题的原因可能是什么？

```
//Here is the P/Invoke declaration:
[DllImportAttribute("UsbI2cIo.dll", EntryPoint = "DAPI_ReadI2c", CallingConvention = CallingConvention.StdCall)]
public static extern int DAPI_ReadI2c(IntPtr hDevInstance, ref I2C_TRANS TransI2C); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-28T21:32:55.047

我有一个类似的问题，我通过编写自己的名为 Bridge 的 C 库来解决它，该库将处理复杂的 C API，但公开可以轻松与 C# 接口的简单方法。

例如，在下面的方法中，我可以将一个字节数组传递给我的 C 代码。从 C# 的角度来看，我只会处理字节、int16 或 int32 或字节数组。

```
[DllImport(DLL)]
private static extern System.Int32 __SPI_Helper_Write(IntPtr lpBuffer, System.Int32 len); 
```

# ios - 如何从 UITableView 中获取选定的行？

> ID：15886493
> 
> 赞同：15
> 
> 时间：2013-04-08T18:39:50.423
> 
> 标签：ios, objective-c, xcode, uitableview

所以我写了这段代码来在我想要选择的行旁边打一个复选标记，因为我想要多个选择的行

```
UITableViewCell *cell = [tableView cellForRowAtIndexPath:path];

if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
    cell.accessoryType = UITableViewCellAccessoryNone;
} else {
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

但是当我使用该方法时：

```
NSArray *selectedIndexPaths = [self.LightsView indexPathsForSelectedRows]; 
```

它只获取我点击的最后一行。复选标记没有选择它吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-08T18:53:07.120

为了使该`indexPathsForSelectedRows:`方法正常工作，您必须配置表格视图以允许选择多个单元格：

```
tableView.allowsMultipleSelection = YES; 
```

# antlr4 - Lexer 规则中没有量词的括号是什么？

> ID：15886494
> 
> 赞同：1
> 
> 时间：2013-04-08T18:39:56.297
> 
> 标签：antlr4

假设以下语法：

```
grammar Demo; 

start: START_BLOCK SEPERATOR;

START_BLOCK: '-.-.-';

ID: ( LETTER SEPERATOR ) (LETTER SEPERATOR)+;
fragment LETTER: L_A|L_K;
fragment L_A: '.-';
fragment L_K: '-.-';

SEPERATOR: '!'; 
```

我将以下输入传递给语法：`-.-.-!`

我希望 ANTLR 能够识别令牌 START_BLOCK 和 SEPERATOR。但相反，它找到了一个 Token 类型`ID`。

我想我可以通过删除词法分析器规则“ID”中的前一对括号来解决这个问题：

```
ID: LETTER SEPERATOR (LETTER SEPERATOR)+; 
```

现在一切正常，但为什么呢？上面的括号对我的语法有什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T14:03:24.330

这是 ANTLR 4 中的一个错误，已在 4.0.1 版本中修复。见：[https ://github.com/antlr/antlr4/issues/224](https://github.com/antlr/antlr4/issues/224)

# sql - 查询 - 如果有多个记录 ID#（非主键）匹配，则使用较晚的日期或更大的主键

> ID：15886496
> 
> 赞同：2
> 
> 时间：2013-04-08T18:40:05.227
> 
> 标签：sql, ms-access, ms-access-2010

我建立了一个 MS Access 数据库，它通过调查创建自定义报告。使用的调查应用程序没有为我们提供所需的报告。我通常抓取数据（excel）并将其导入访问并按照我们需要的方式构建报告。

这是我们第一次让人们重新进行调查，因为他们正在更新某些内容或忘记添加某些内容。我需要能够获取最新的调查数据，这样我们在运行报告时就不会得到重复数据。（我的主报告由几个子报告组成。如果为空，一些子报告将不可见，并且任何未回答的问题都被隐藏和缩小，以防止带有不必要空格的庞大报告。）

```
 record ID (PK) |  FName   |  LName   | IDNum   | Completed
     1          |  Bob     |  Smith   |  57     | 3/31/2013 5:00pm
     2          |  Bob     |  Smith   |  57     | 3/31/2013 7:00pm 
```

我想要记录 ID 2 或在晚上 7 点完成的记录。

查询和报告已经完成，所以我一直在尝试找到一种方法，在我的查询的条件行中添加一行代码，以在 IDnum 与多个记录匹配时获取最新记录。

在过去的几个小时里，我一直在努力寻找最好的方法。我不认为将我的表修改为“没有重复的表”，因为在数据库完成后，技术含量较低的人会使用它。他们要做的就是导入一个新的 excel 文件来覆盖表格，然后查询会做所有事情来构建报告。我也不想手动删除重复的记录。

我知道我需要做一些类似的事情

```
 IIF(count(IDNum)>1, *something, *something) 
```

*我卡在真假部分。我如何告诉访问它需要再次在表中检查以找到具有较大主键的记录？

我以为这很容易，但我想我错了。哈哈

我是 MS Access 的新手，所以我知道我没有充分发挥潜力，而且我可能会以错误的角度进行。任何建议将不胜感激。
我是一名进入信息系统的学生，所以我真的很想学习如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:01:39.577

我相信您正在寻找的查询是

```
SELECT t1.*
FROM YourTable t1 INNER JOIN 
    (SELECT IDNum, MAX(Completed) AS MaxOfCompleted 
     FROM YourTable GROUP BY IDNum
    ) t2
ON t1.IDNum = t2.IDNum AND t1.Completed = t2.MaxOfCompleted; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:04:37.853

当您使用 if 函数时，它应该是 iif 而不是 iff。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:35:07.133

我推荐一个相关的子查询，例如：

```
SELECT
Data.RecordID
, Data.FName
, Data.LName
, Data.IDNum
, Data.Completed

FROM
Data

WHERE
Data.Completed IN

(
SELECT TOP 1
DataSQ.Completed
FROM
Data as DataSQ

WHERE
DataSQ.IDNum = Data.IDNum

GROUP BY
DataSQ.Completed

ORDER BY
DataSQ.Completed DESC
)

GROUP BY
Data.RecordID
, Data.FName
, Data.LName
, Data.IDNum
, Data.Completed

; 
```

**解释**

您可以在主查询的 WHERE 子句中嵌入另一个 SELECT 查询，而不是使用 Max 或 IIF 等函数。嵌套查询用于确定每个 IDNum 的最近完成日期。与使用 SELECT TOP 1 + ORDER BY 直接从表中选择最近的调查（只会返回一条记录）不同，嵌套查询中的 WHERE 子句引用主查询并为每个 IDNum 生成一个结果。这被称为每组前 N 个模式，我发现它非常有用。请注意，在嵌套查询中，您需要使用表名别名，以便 Access 能够区分这两个查询。

此外，我通常建议不要尝试使用表 PK 来执行排序。在很多情况下，PK 顺序值并不能很好地指示相关字段的值。

此代码在对虚拟数据进行测试时有效 - 祝你好运！

# unix - ^A 和 ^S 的正则表达式？不能sed或grep吗？

> ID：15886497
> 
> 赞同：1
> 
> 时间：2013-04-08T18:40:22.943
> 
> 标签：unix, sed, grep

我有一个包含这一行的文件。

输入

```
sls="N" stnid="armID"
sls="N" stnid="C-ARM #11 w^Aw^Aw^A^Sg^Aw"
sls="N" stnid="virtualID" 
```

对于我想要一个像这样的输出

```
sls="N" stnid="armID"
sls="N" stnid=""
sls="N" stnid="virtualID" 
```

我想 sed "C-ARM #11 w^Aw^Aw^A^Sg^Aw" 并将其替换为空白。

问题是我找不到可以替换它的正则表达式。

我试过 sed -es//^//gs/A//g myfile > newfile。

它没有用。

另一个问题是，当我 CAT myfile 时，它​​没有显示 ^A 和 ^S 字符。文件看起来像这样。

```
sls="N" stnid="armID"
sls="N" stnid="C-ARM #11 wwwgw"
sls="N" stnid="virtualID" 
```

请帮助，在此先感谢。

朋友

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:45:03.817

^A 和 ^S 是不可打印的 ASCII 字符的文本表示。这些字符串实际上并不包含子字符串“^A”和“^S”。我相信 ^A 是 ascii 代码 1，而 ^S 是 19。要在 sed 输入中包含原始 ASCII 字符，请使用 $(echo "\001") 和 $(echo "\013")。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:46:22.243

看起来那些是控制字符（`^A`实际上是 ASCII 码 1 的非打印字符）。我可以想到两种方法来解决这个问题。首先，尝试匹配

```
# If you get the pattern of characters right, this will work:
sed -e 's/C-ARM #11 w.w.w..g.w//' myfile > newfile

# This will be less precise, but should still work:
sed -e 's/C-ARM #11 .*"/"/' myfile > newfile 
```

或用于`cat`将那些非打印字符转换为打印字符，然后使用`sed`：

```
cat -A myfile > myfile.fixed
sed -e 's/C-ARM #11 w^Aw^Aw^A^Sg^Aw//' myfile.fixed > newfile 
```

# android - 使用 linux pc 为 android 安装 Apache POI

> ID：15886498
> 
> 赞同：0
> 
> 时间：2013-04-08T18:40:30.207
> 
> 标签：android, linux, apache-poi

我正在使用 eclipse 在 linux(ubuntu) pc 上开发适用于 android 的应用程序。我找不到有关如何安装 Apache POI 的任何信息。有人可以逐步解释如何将Apache POI安装到Linux计算机上吗？

我能找到的关于安装 Apache POI 的每个教程都使用 mac 或 windows，没有 linux 版本。所以我尝试了本教程[http://www.youtube.com/watch?v=w7sOhyxRQ5Y](http://www.youtube.com/watch?v=w7sOhyxRQ5Y)有人在 Mac 上安装 Apache POI。我下载了 Apache POI tar.gz，将其解压缩。然后就像他们在视频中所做的那样，我转到属性，单击“添加 JAR”，添加 jar，然后 jar 文件出现在“引用的库”文件夹中，就像在他们的示例中一样，到目前为止一切都很好。但是现在他们打开了其中一个类只是为了显示它的外观，当我打开该类时，它没有像他们那样显示 java 代码，它显示错误“找不到源”和“jar 文件没有源”附件。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:12:08.187

将评论推广到答案

在[Apache POI 下载页面](http://poi.apache.org/download.html)上，您会找到两组文件，*二进制分发*和*源分发*。从你写的内容来看，你有二进制文件，但也需要源文件

在 Binary Distribution 中，您将找到所有 Apache POI [jars 及其依赖](http://poi.apache.org/overview.html#components)项，以及 JavaDocs。在源代码分发中，您将找到源代码、单元测试源代码、单元测试使用的测试文件以及 javadocs。（如果您想对 Apache POI 进行更改，源包拥有重建它所需的一切）

根据您所说的，您需要下载二进制包，并添加适当的 POI jar 和依赖项 - 请参阅[组件页面](http://poi.apache.org/overview.html#components)以根据 Apache 的哪些部分确定需要哪些 jar 和依赖项您要使用的 POI。然后，下载源代码包，展开并告诉 Eclipse 可以在哪里找到 POI jar 的源代码。届时，您将能够在 Eclipse 中看到 POI 的代码、调试/单步执行等

# android - Android Java 读取 Google 搜索 JSON

> ID：15886499
> 
> 赞同：0
> 
> 时间：2013-04-08T18:40:30.160
> 
> 标签：android, json, android-asynctask

我找到了这个（[http://code.google.com/apis/imagesearch/v1/jsondevguide.html#json_snippets_java](http://code.google.com/apis/imagesearch/v1/jsondevguide.html#json_snippets_java)），我已经将它包含在一个新项目中，我想知道如何从JSON对象。我试图进行搜索，但没有找到任何可以帮助我的东西（我是一个新手 - 自学 Java）。

```
package com.googlesearch;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {

public static String searchstring = "big bang theory";
public static URLConnection connection;
public static URL url;
public static BufferedReader reader;
public static JSONObject json;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    try {
        url = new URL("https://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=" + searchstring);
    } catch (MalformedURLException e) {
    }

    try {
        connection = url.openConnection();
    } catch (IOException e) {
    }
    connection.addRequestProperty("Referer", "www.google.co.uk");
    String line;
    StringBuilder builder = new StringBuilder();

    try {
        reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
    } catch (IOException e1) {
    }
    try {
        while((line = reader.readLine()) != null) {
            builder.append(line);
        }
    } catch (IOException e) {
    }

    try {
        json = new JSONObject(builder.toString());
    } catch (JSONException e) {
    }
}
} 
```

日志猫：

```
04-08 19:59:33.019: E/AndroidRuntime(4965): FATAL EXCEPTION: main
04-08 19:59:33.019: E/AndroidRuntime(4965): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.bigbangtheorywallpapers/com.bigbangtheorywallpapers.MainActivity}: android.os.NetworkOnMainThreadException
04-08 19:59:33.019: E/AndroidRuntime(4965):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at android.app.ActivityThread.access$600(ActivityThread.java:140)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at android.os.Looper.loop(Looper.java:137)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at android.app.ActivityThread.main(ActivityThread.java:4898)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at java.lang.reflect.Method.invokeNative(Native Method)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at java.lang.reflect.Method.invoke(Method.java:511)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at dalvik.system.NativeStart.main(Native Method)
04-08 19:59:33.019: E/AndroidRuntime(4965): Caused by: android.os.NetworkOnMainThreadException
04-08 19:59:33.019: E/AndroidRuntime(4965):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:461)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:433)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:271)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at com.bigbangtheorywallpapers.MainActivity.onCreate(MainActivity.java:43)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at android.app.Activity.performCreate(Activity.java:5206)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
04-08 19:59:33.019: E/AndroidRuntime(4965):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
04-08 19:59:33.019: E/AndroidRuntime(4965):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:05:30.180

根据评论：

> 我刚刚尝试测试上面的代码，但是应用程序在启动时崩溃了。

=> 当您直接在主 UI 线程上进行 Web API 调用时，它`android.os.NetworkOnMainThreadException`实际上是在给予。

要解决此问题，有两种解决方案：

1.  标准方式 => 实现 AsyncTask
2.  懒惰的解决方案 => 在拨打电话之前包括以下几行：

> StrictMode.ThreadPolicy 策略 = new StrictMode.ThreadPolicy.Builder().permitAll().build(); StrictMode.setThreadPolicy(policy);

是的，不要忘记将其添加到 AndroidManifest.xml 文件中：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# jquery - Playframework jquery mobile $.ajax 文件上传

> ID：15886508
> 
> 赞同：0
> 
> 时间：2013-04-08T18:41:09.113
> 
> 标签：jquery, jquery-mobile, file-upload, coffeescript, playframework-2.1

我正在疯狂地尝试使用 scribe、play 框架和 jquery mobile 为 twitter 上传一个简单的文件。

请，任何人都可以帮助设置正确的参数以通过 $.ajax 发送文件来播放框架？

控制器方法：

```
 public static Result postMediaJson() {

    Logger.info("**** postMediaJson ****");
    Logger.info("uid=" + uid);

    if (uid == null) {
        ObjectNode result = Json.newObject();
        result.put("accessTokenNull", "1");
        Logger.info("8.accessTokenNull");
        return ok(result);
    }

    Token accessToken = (Token) Cache.get(uid + "accessToken");

    Logger.info("accessToken=" + accessToken);

    if (accessToken == null) {
        ObjectNode result = Json.newObject();
        result.put("accessTokenNull", "1");
        Logger.info("9.accessTokenNull");
        return ok(result);
    }

    OAuthRequest request = new OAuthRequest(Verb.POST, UPDATEMEDIA_RESOURCE_URL);
    service.signRequest(accessToken, request);

    Logger.info("service=" + service);

    try
    {

        String vparam = form().bindFromRequest().get("status");

        Logger.info("vparam=" + vparam);

        MultipartFormData body = request().body().asMultipartFormData();
        FilePart resourceFile = body.getFile("picture");

        if (resourceFile != null) {
            String fileName = resourceFile.getFilename();
            String contentType = resourceFile.getContentType();
            File file = resourceFile.getFile();

            Logger.info("Justo antes");

            if (file != null && vparam != null) {

                Logger.info("Entra");

                // added lines
                //String myUploadPath = Play.application().configuration().getString("myUploadPath");
                //file.renameTo(new File(myUploadPath, fileName));

                MultipartEntity entity = new MultipartEntity();

                Logger.info("1Entra");

                entity.addPart("status", new StringBody(vparam)); // THIS IS THE TWITTER MESSAGE

                Logger.info("2Entra");

                entity.addPart("media", new FileBody(file)); // THIS IS THE PHOTO TO UPLOAD

                Logger.info("3Entra");

                ByteArrayOutputStream out = new ByteArrayOutputStream();
                entity.writeTo(out);

                Logger.info("4Entra");

                request.addPayload(out.toByteArray());

                Logger.info("5Entra");

                request.addHeader(entity.getContentType().getName(), entity.getContentType().getValue());

                Logger.info("6Entra");

            }else{
                ObjectNode result = Json.newObject();
                result.put("accessTokenNull", "1");
                Logger.info("10.accessTokenNull");
                return ok(result);
            }

        }else{
            ObjectNode result = Json.newObject();
            result.put("accessTokenNull", "1");
            Logger.info("11.accessTokenNull");
            return ok(result);
        }

    }catch (UnsupportedEncodingException e) {
        Logger.info("UnsupportedEncodingException");
        e.printStackTrace();
    }catch (IOException e) {
        Logger.info("IOException");
        e.printStackTrace();
    }catch (NullPointerException e) {
        Logger.info("NullPointerException");
        e.printStackTrace();
        ObjectNode result = Json.newObject();
        result.put("accessTokenNull", "1");
        Logger.info("12.accessTokenNull");
        return ok(result);
    }

    Response response = request.send();

    if ( 0L == Analytic.incPokes() )
        Logger.info("Creating first poke with media of today.");

    return ok(Json.toJson(response.getBody())); 

} 
```

网页：

```
<div data-role="header" data-theme="a">
    <h1>Header</h1>
    <a href="#pageDashboard" data-transition="slide" data-role="button" data-theme="a" data-mini="true" data-direction="reverse">Volver</a>
</div>

<div data-role="content">
    <form id="frmPostMedia" method="POST" enctype="multipart/form-data" action="@routes.Application.postMediaJson()" data-ajax="false">
        <label for="taMPost">¿Qué está pasando?:</label>
        <textarea cols="40" rows="7" maxlength="140" id="status" name="status"></textarea>
        <div id="lblMCount"></div>
        <input type="file" id="picture" name="picture" />
        <input type="submit" data-transition="slide" data-theme="a" data-mini="true" value="Enviar" />
    </form>     
</div> 
```

和咖啡脚本：

```
 $("#pagePostMedia").on 'pageinit', (event) ->

      $("#frmPostMedia").on 'submit', (event) ->
event.preventDefault()
return alert "No puedes pedir apoyo con un mensaje en blanco. ¡Intenta escribir un mensaje inspirador!"if $("#status").val().length < 3  

$("#frmPostMedia").attr("enctype", "multipart/form-data")
$("#frmPostMedia").attr("encoding", "multipart/form-data")

formData = new FormData($(this)[0])

$.ajax '/postMediaJson',
type: 'POST'  
data: formData
contentType: 'multipart/form-data'
processData: false
cache : false
async: false
success: (data)->
  alert JSON.stringify(data)
error: (data)->
  alert "ERROR="+ JSON.stringify(data)

$("#pagePostMedia").on 'pageshow', (event) ->

      res = 140 - $("#status").val().length

      $("#lblMCount").html("Te quedan  <strong>" + res + "</strong> caracteres.")

   $("#status").on 'keyup', (event) ->

      res = 140 - $("#status").val().length

      $("#lblMCount").html("Te quedan  <strong>" + res + "</strong> caracteres.") 
```

结果 request().body().asMultipartFormData() 始终为 null :-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T02:40:12.370

您可能需要设置以下内容：

```
contentType: false 
```

我知道这对我有用。更详细的解释：

[使用 jQuery.ajax 发送 multipart/formdata](https://stackoverflow.com/questions/5392344/sending-multipart-formdata-with-jquery-ajax)

# objective-c - Objective-C 线程

> ID：15886509
> 
> 赞同：1
> 
> 时间：2013-04-08T18:41:12.257
> 
> 标签：objective-c, multithreading

我想了解更多关于objective-c中的线程，所以我做了一个小测试程序，它只会循环并输出它所在的循环迭代。但是，我得到的输出不是我所期望的。我知道为什么，但首先是我的代码：

主文件

```
#import <Foundation/Foundation.h>
#import "Car.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        Car* myCar = [[Car new] autorelease];

        [myCar performSelectorInBackground:@selector(LoopAndSay) withObject:nil];

        for(int i = 0; i < 100; i++ )
        {

            NSLog(@"Main loop on %i", i);
        }

    }
return 0;
} 
```

车

```
#import "Car.h"

@implementation Car
@synthesize name, model;

-(void) LoopAndSay {

    for(int i = 0; i < 100; i++)
    {
        NSLog(@"Looping for the %i time", i);

    }

}
@end 
```

现在，如果我按原样运行它，后台循环有时不会完成（在迭代 94 和 97 之间停止）。此外，如果我切换我的代码，以便在主线程循环之后才调用后台循环，那么它将不会运行任何迭代。这是因为主线程已经完成并且不想等待后台线程运行完成吗？如果是这种情况，有没有办法强制程序继续运行，直到主线程和任何后台线程都完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:47:33.363

这几乎可以肯定是因为~~您在线程完成之前退出自动释放池的范围，~~您的`main`函数在后台线程完成之前返回。尝试`sleep(3)`在其结束之前添加或其他内容，看看您的后台线程是否完成。

在 Mac OS X 上，一个进程在其所有“前台”线程完成后终止。`peformSelectorInBackground:`仅创建一个后台线程，因此一旦`main`返回，您将没有前台线程并且您的进程将终止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T18:50:29.630

`performSelectorInBackground:...`这是因为使用和其他 Objective-C API创建的所有线程都是*分离*的，因此程序可以终止而无需等待它们完成。从[线程编程指南](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html#//apple_ref/doc/uid/10000057i-CH15-SW3)：

> 在应用程序退出时，分离的线程可以立即终止，但可连接的线程不能。[...] 如果您确实想创建可连接的线程，唯一的方法是使用 POSIX 线程...

在这种情况下，您的主线程循环恰好比后台线程完成得早一点，因此后台线程循环不会运行到最后。除了使用 POSIX 线程（不太方便），您还可以使用`NSOperationQueue`，它可以轻松地让您等待队列中的所有操作完成。

# ruby-on-rails - rails sql查询

> ID：15886511
> 
> 赞同：0
> 
> 时间：2013-04-08T18:41:19.907
> 
> 标签：ruby-on-rails

我有：

```
User id:integer name:integer
class User
has_many :complete_tasks
end

Task id:integer style:string uid:string

CompleteTask id:integer style:string uid:string user_id:integer
class CompleteTask
belongs_to :user
end 
```

我在数据库中有一些记录

```
user = User.first 
```

id:1 名称:Den

```
tasks = Tasks.all 
```

id:1 风格 => “奔跑” uid => “河流”

id:2 风格 => “跳跃” uid => “海”

id:3 风格 => “跑” uid =>“海”

id:4 风格 => “跑” uid => “河”

id:5 风格 => "运行" uid =>"森林"

```
user.complete_tasks.all 
```

id:1 style => "run" uid => "river" user_id => 1

id:2 style => "jump" uid => "sea" user_id => 1

如何从任务中获取记录，其中字段：样式和：uid 一起不是模型 CompleteTask 中的等效字段：样式和：uid。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:53:02.203

如果我对您的理解正确，那么您正在尝试查找与完整任务具有不同 ID 的所有任务。

为此，您应该使用[查找条件](http://railscasts.com/episodes/15-fun-with-find-conditions)——类似于：

```
Task.find(:all, :conditions => { :complete => false }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:38:21.747

这是一个糟糕的数据库模型，我建议使用其他东西。可能是模型中的布尔值或类似的东西，`task`因此您可以检查它是否完整。无论如何，这是一个解决方案：

```
all_tasks = Task.all
complete_tasks = CompleteTask.all

complete_tasks.each do |complete_task|
    #find if there is a task with the corresponding uid and style in the complete tasks
    tasks = all_tasks.where(:uid => complete_task.uid, :style => complete_task.style)
    #remove it from all_tasks (all_tasks means tasks that haven't finished yet)
    all_tasks = @all_tasks -  tasks
end

return all_tasks 
```

# java - 构造函数不可见

> ID：15886514
> 
> 赞同：0
> 
> 时间：2013-04-08T18:41:28.487
> 
> 标签：java, android, overriding

我正在开发一个使用该[`ScanResult`](http://developer.android.com/reference/android/net/wifi/ScanResult.html)对象的 Android 应用程序。该对象的形式为：

```
[SSID: __mynetwork__, BSSID: 00:0e:2e:ae:4e:85, capabilities: [WPA-PSK-TKIP][ESS], level: -69, frequency: 2457, timestamp: 117455824743] 
```

我试图`equals()`通过创建我自己的扩展类来覆盖这个类的方法`ScanResult`：

```
public class MyScanResult extends ScanResult {

    public MyScanResult() {
        super();
    }

    @Override
    public boolean equals(Object o) {
        if (this == o)
            return true;
        if (!(o instanceof ScanResult))
            return false;

        ScanResult obj = (ScanResult) obj;
        if (!BSSID.equals(obj.BSSID))
            return false;
        if (!SSID.equals(obj.SSID))
            return false;
        if (!capabilities.equals(obj.capabilities))
            return false;
        if (frequency != obj.frequency)
            return false;
        if (level != obj.level)
            return false;

        return true;
    }

} 
```

但是，当我尝试此操作时，出现以下错误：`The constructor ScanResult() is not visible`. 请问我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T18:46:23.567

公共构造函数签名为`ScanResult`：

```
public ScanResult(String SSID, String BSSID, String caps, int level, int frequency) 
```

您需要使用匹配的参数调用超类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:47:36.553

**显然的好方法**：

`ScanResult`期望参数：

```
public ScanResult(  String SSID, 
                    String BSSID,
                    String caps,
                    int level,
                    int frequency) 
```

[您可以在此处](http://www.java2s.com/Open-Source/Android/android-core/platform-frameworks-base/android/net/wifi/ScanResult.java.htm)查看类定义

**丑陋的方式**：

正如你所说，显然`ScanResult`是私人的。[这个答案](https://stackoverflow.com/a/5593430/616225)告诉您使用反射来获取构造函数。

**可能唯一的方法**：

没有人知道这是怎么发生在你身上的（这实际上很奇怪）。但是有一个改变来解决它。点击[此处](http://www.java2s.com/Open-Source/Android/android-core/platform-frameworks-base/android/net/wifi/ScanResult.java.htm)链接，将该类复制到您的项目中（当然，为您的项目更改它的包），然后`MyScanResult`从这个继承。Android 是开源的，尽管这个类将来可能会发生变化，但您要确保它现在可以工作。然后，如果您需要原始类，您可以尝试使用新的`ScanResult`using 。`(android.net.wifi.ScanResult)scanResult`

# regex - Perl 正则表达式错误

> ID：15886526
> 
> 赞同：0
> 
> 时间：2013-04-08T18:41:57.837
> 
> 标签：regex, perl, unix

我目前正在尝试创建一个日志解析器，它从输入文件（.log）中获取以下格式的一系列 ping 报告：（来自 194.12.224.34 的 64 个字节：icmp_seq=1 ttl=47 time=66.7 ms）和构建一个输出文件（.csv）。

经过多次尝试，我遇到了以下错误。我的同事给了我他的代码（如下），它的写法不同，但本质上是相同的。他的代码给出了同样的错误，尽管他的代码自然地在同样的任务中工作得很好。任何帮助将不胜感激！

我现在相信我的前两个正则表达式的工作正常，第三个是问题。以下是我试图解析的内容：

传输 120 个数据包，接收 120 个数据包，0% 数据包丢失，时间 119247ms rtt min/avg/max/mdev = 65.944/67.381/72.714/1.728 ms

我在这里的第一篇文章，如果有什么遗漏，请见谅。

```
$INPUT  = "ping.log";
$OUTPUT = "pingParsed.csv";

# > operator puts the write function in overwrite mode rather than append.
open (INPUT, '<', $INPUT);
open (OUTPUT, '>', $OUTPUT);

while (<INPUT>) {

# if (timestamp regex)
if(/(\w{3})\s+(\w{3})\s+(\d+)\s+(\d+):(\d+):(\d+)\s+GMT\s+(\2013)/) {

# print OUTPUT (date regex variables, $1 = Day, $2 = Month, $3 = Day, $4 = hour, $7 = year)
print OUTPUT "$1 , $2 , $3 , $4 , $7";

$headers = "IP, Seq, Time";

print OUTPUT "$headers";

}

# if (ping info regex, $1 = IP address, $2 = Seq, $3 = Time)
if ( m/icmp_seq=
(\S+)
\s+ttl=
(\S+)
\s+time=
(\S+) /x) # x allows use of whitespaces and comments in the regex.
{
    print "$1, $2, $3\n";
}

# if (regex for total ping info - I think this is line 55.) 
if (/\d+\d+\d+\s+\packets\s+\transmitted,\s+\d+\d+\d+\s+\received,\s+(\d+)\s+\packet\s+\loss,\s+time\s+(\d+)\ms\s+\min\avg\max\mdev\s+=\s+(\(S+)\\/\(S+)\\/(S+)\\/\(\S+)\s+\ms/) {
headers: 
print ("$15 = packet loss(%), $22 = time(ms), $28 = rttmin, $33 = arg, $35 = max, $37 = ndev");

print OUTPUT ($15, $22, $28, $33, $35, $37);

 } 

}

close $INPUT;
close $OUTPUT; 
```

错误：

```
Backslash found where operator expected at ./pingParseScript.pl line 55, near "/\d+\d+\d+\s+\packets\s+\transmitted
    (Missing operator before \?) 
```

反斜杠在 ./pingParseScript.pl 第 55 行，靠近 ")\" 处找到运算符预期的位置（\ 之前缺少运算符？） 反斜杠在 ./pingParseScript.pl 第 55 行，靠近 ")\" 处找到运算符预期的位置（\ 之前缺少运算符?) ./pingParseScript.pl 第 55 行的语法错误，靠近 "/\d+\d+\d+\s+\packets\s+\transmitted,\s+\d+\d+\d+\s+\received,\ 替换模式未终止于./pingParseScript.pl 第 55 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:57:01.140

我看到两个问题：

1)`while(INPUT)`改变`while (<INPUT>)`

2）最后一个 if 必须包含`{}`并且正则表达式内存重新启动（从`$1`）

```
if(/icmp_seq=(\S+)\s+ttl=(\S+)\s+time=(\S+)/) {
   print OUTPUT "$1, $2, $3"; 
} 
```

此外，以现代 perl 方式使用词法文件句柄：

```
open my $input_fh, '<', $INPUT or die $!;
open my $output_fh, '>', $OUTPUT or die $!;

while( <$input_fh> ) {
   # ...
}

close $input_fh;
close $output_fh; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:54:32.620

if语句后面没有花括号，应该这样写：

```
if(/icmp_seq=(\S+)\s+ttl=(\S+)\s+time=(\S+)/)
{

#if(/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})\s+icmp_seq=(\S+)\s+ttl=\d+\s+time=(\S+)/)

print OUTPUT "$8, $10, $16"; 
} 
```

或这个：

```
print OUTPUT "$8, $10, $16"
    if(/icmp_seq=(\S+)\s+ttl=(\S+)\s+time=(\S+)/); 
```

还

```
while (INPUT) 
```

应该这样写：

```
while (<INPUT>) 
```

用这个替换你的 if 语句：

```
if( /icmp_seq=
(\S+)
\s+ttl=
(\S+)
\s+time=
(\S+)/x ) #x allows use of whitespaces and comments in your regex
{
    print "$1, $2, $3\n"; 
} 
```

# javascript - 用于 Pearson 和/或 Spearman 相关性的 Javascript 库

> ID：15886527
> 
> 赞同：8
> 
> 时间：2013-04-08T18:41:59.510
> 
> 标签：javascript, statistics, correlation

是否有可用于进行[Spearman 和/或 Pearson](https://stats.stackexchange.com/questions/8071/how-to-choose-between-pearson-and-spearman-correlation/8077#8077)相关性的 Javascript 库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-12-11T18:38:56.227

所以这是我在这件事上的两分钱 - 皮尔逊相关性：

```
const pcorr = (x, y) => {
  let sumX = 0,
    sumY = 0,
    sumXY = 0,
    sumX2 = 0,
    sumY2 = 0;
  const minLength = x.length = y.length = Math.min(x.length, y.length),
    reduce = (xi, idx) => {
      const yi = y[idx];
      sumX += xi;
      sumY += yi;
      sumXY += xi * yi;
      sumX2 += xi * xi;
      sumY2 += yi * yi;
    }
  x.forEach(reduce);
  return (minLength * sumXY - sumX * sumY) / Math.sqrt((minLength * sumX2 - sumX * sumX) * (minLength * sumY2 - sumY * sumY));
};
let arrX = [20, 54, 54, 65, 45];
let arrY = [22, 11, 21, 34, 87];
let R = pcorr(arrX, arrY);
console.log('arrX', arrX, 'arrY', arrY, 'R', R);
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T19:58:04.070

有这个

[http://stevegardner.net/2012/06/11/javascript-code-to-calculate-the-pearson-correlation-coefficient/](http://stevegardner.net/2012/06/11/javascript-code-to-calculate-the-pearson-correlation-coefficient/)

除此之外，您可以尝试：

[http://www.jstat.org/download](http://www.jstat.org/download)

或者，如果这些都不符合要求并且您不想自己写一个，您可以随时使用：

[http://www.rforge.net/Rserve/](http://www.rforge.net/Rserve/)

和

[http://www.gardenersown.co.uk/education/lectures/r/correl.htm](http://www.gardenersown.co.uk/education/lectures/r/correl.htm)

去做吧。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-26T21:23:41.367

我在 Github 上使用了[Spearson项目。](https://github.com/agrueneberg/Spearson)我已经测试了它的 Spearman 相关性，它为此提供了准确的值。

我刚刚下载了 repo 文件夹中`spearson.js`的文件。`/lib`以下是在浏览器中使用它的方法：

`<script src="spearson.js"></script>`

```
<script>
    var x = [3, 4, 5];
    var y = [.1, .2, .3];
    var corr = spearson.correlation.spearman(x, y);
</script> 
```

同样，您可以使用`correlation.pearson`Pearson 相关性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-30T08:20:17.620

试试这个：

```
function spearmanCorrelation(multiList, p1, p2){
    N=multiList[p1].length;
    order=[];
    sum=0;

    for(i=0;i<N;i++){
        order.push([multiList[p1][i], multiList[p2][i]]);
    }

    order.sort(function(a,b){
        return a[0]-b[0]
    });

    for(i=0;i<N;i++){
        order[i].push(i+1);
    }

    order.sort(function(a,b){
        return a[1]-b[1]
    });

    for(i=0;i<N;i++){
        order[i].push(i+1);
    }
    for(i=0;i<N;i++){
        sum+=Math.pow((order[i][2])-(order[i][3]), 2);

    }

    r=1-(6*sum/(N*(N*N-1)));

    return r;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-17T12:21:10.997

在问了最初的问题多年后，我推荐了这个很棒的库，它很简单，但仍然有据可查： **[statistics.js](https://thisancog.github.io/statistics.js/index.html)**

在许多其他方法中，它具有计算两个变量**的皮尔逊相关系数的相关系数**[（）](https://thisancog.github.io/statistics.js/inc/correlation.html)和计算**斯皮尔曼等级相关系数的 spearmansRho** [（）](https://thisancog.github.io/statistics.js/inc/correlation.html#spearmansrho)。

# linq - 可视化 Dynamics CRM 数据库

> ID：15886534
> 
> 赞同：0
> 
> 时间：2013-04-08T18:42:22.853
> 
> 标签：linq, dynamics-crm-2011, dynamics-crm

我是 Dynamics CRM（托管）和 LINQ 的新手，所以请原谅我对这个问题的无知......

我需要访问存储在 CRM 中的一些数据，但不知道如何获取它。通常我会打开我的 SQL 管理软件并四处寻找数据，但我无法使用托管 CRM 数据来执行此操作。

所以....我的问题是，是否有可视化“数据库”来查找我需要重新调用的数据？？？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:33:43.457

如果要操作 CRM 2011 实例的数据，则必须遵循一些规则。

对于 CRUD 和业务运营，您需要使用 CRM 2011 Web 服务（也与 LINQ 结合使用）

也可以（如果您可以连接到数据库）从过滤视图中读取数据，过滤视图是映射在标准 CRM 实体上的视图（例如，要从实体帐户中读取数据，您可以使用视图 FilteredAccount）

不支持直接从表中读取或修改数据。

如果您想了解实体的结构，您可以使用 CRM 中的自定义区域，或安装元数据浏览器（CRM 2011 SDK 中提供的解决方案）来查看属性和关系。

一个好的起点始终是 CRM 2011 SDK，您可以在此处下载：

[http://www.microsoft.com/en-us/download/details.aspx?id=24004](http://www.microsoft.com/en-us/download/details.aspx?id=24004)

在里面你会发现很多例子（如果你想使用 LINQ，请检查早期绑定的例子）以及用于开发的程序集和工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T01:34:10.343

[下载 SDK](http://www.microsoft.com/en-us/download/details.aspx?id=24004)并将 Metadata Browser 托管解决方案 (\sdk\tools\metadatabrowser\metadatabrowser_2_0_0_0_managed.zip) 导入您的 CRM Live 实例。

您还可以尝试下载[开箱即用的数据库设置](http://www.microsoft.com/en-us/download/details.aspx?id=2640)的数据库模式。不是最理想的，但它可能对你有用。

您还可以安装本地版本的 Dynamics CRM（例如在虚拟机中）进行测试（通过 MSDN 或免费试用下载）。这将使您能够通过 SQL 访问数据库。

我建议使用元数据浏览器，它可能会为您提供所需的信息。由于元数据浏览器是一个托管解决方案，您可以安装和删除它，而不会影响默认解决方案或组织中的任何其他解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:31:42.777

实际上，使用 Dynamics CRM Online“数据库”的方式与使用任意数量的 SQL 管理器工具几乎相同。

Linqpad4 - 允许您使用多种环境并使用 VB、C# 甚至 SQL 编写查询。

它看起来像一个很棒的工具，并且已经对我帮助很大，它确实使 Dynamics / LINQ 场景更容易探索和学习。

LinqPad4 可以在这里下载：[http://www.linqpad.net/]

并且可以在此处下载 Dynamics CRM 的驱动程序：[http://archive.msdn.microsoft.com/crmlinqpad]

我强烈推荐它。

# tomcat - 拦截 j_security_check

> ID：15886536
> 
> 赞同：0
> 
> 时间：2013-04-08T18:42:27.833
> 
> 标签：tomcat, jboss, jsessionid, j-security-check

在基于 j_security_check 的登录表单中登录时一切正常。在这种情况下，我看到 JSESSIONID cookie 中的路径具有来自 URL 的值。但是当另一个登录页面构建动态表单（它正在使用 /j_security_check 在 url 的末尾提交到第一个登录页面）进行登录时，它失败了，我看到 JSESSIONID cookie 在路径中有一个空值。

当登录/注销到第一页时，JSESSIONID 仍然存在，使用第二个登录页面的登录工作正常。

所以我想也许可以在 j_security_check 过程中修改一些东西来确定空路径。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T09:14:29.357

这是默认行为，解决此问题的方法是在 web.xml 中设置默认页面。这样当用户直接尝试访问登录页面时，一旦成功登录，应用服务器将重定向到默认页面，例如welcome.jsp。

请记住使用 servlet 过滤器或 j_security 保护此页面 (welcome.jsp)，以便在没有成功验证的情况下无法直接访问此页面。

**web.xml**

```
<welcome-file-list>
    <welcome-file>/app/welcome.jsp</welcome-file>
</welcome-file-list> 
```

# php - 当我将在同一页面中选择下拉列表时如何在 PHP 页面中更改下拉列表值

> ID：15886545
> 
> 赞同：0
> 
> 时间：2013-04-08T18:42:56.670
> 
> 标签：php, jquery

这是我的代码，页面名称是`xyz.php`

```
<select name="limit" id="limit" onchange="displayVals()">
    <option value="10">10</option>
    <option value="25">25</option>      
</select>

<?php
    $limit = $_GET['limit'];
    echo $limit;
?>

<script>
function displayVals() {
  var singleValues = $("#limit").val();

  $.ajax({
    type: "GET",
    url: "xyz.php",
    data: {account: singleValues},
    async: false,
  });
}
</script> 
```

基本上我需要当我选择下拉菜单时我会看到下拉值的结果

例如，如果我选择 10，那么它将同时打印 $limit 变量。这将看到 10。

请任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:13:22.647

我有一个好主意，我成功了

这里将更改 php 和 java 脚本，如下所示

```
<?php
if(isset($_GET['limit']))
{
   $limit = $_GET['limit'];
   echo $limit;
}
?>

<script>
function displayVals() {
    var singleValues = $("#limit").val();
    window.location ="xyz.php?limit="+singleValues;
}
</script> 
```

# jquery - 在 Colorbox(s) 之间共享变量加载不同的页面 - 返回变量在哪里？

> ID：15886546
> 
> 赞同：1
> 
> 时间：2013-04-08T18:42:58.570
> 
> 标签：jquery, dom, colorbox

我有一个带有链接的页面，该链接打开一个标准颜色框窗口（1），这是一个记录摘要。在颜色框内显示的页面上，我还有几个链接将打开选择页面，用户可以在其中选择人员或状态并将其保存回摘要表单。这些链接也设计为在颜色框窗口（2）中打开，功能如下：

```
 function makeColorboxMES(mes) {
        if (mes == 'changeLog') {
            href = '/RootDirectory/MyReport/ChangeLog.aspx;
        }
        if(mes == 'employeeByName') {
            href = '/RootDirectory/MyReport/EmployeeByName.aspx?Val=Name;
        }
        if (mes == 'getStatus') {
            href = '/RootDirectory/MyReport/SelectStatus.aspx?Val=Status;
        }
        parent.$.fn.colorbox({ iframe: true, href: href, width: '70%', height: '70%', escKey: true, inline: false, showClose: true, overlayClose: false, onLoad: function () { $('#cboxClose').hide() } }); 
    } 
```

用户做出选择后，母版页上有一个 javascript 函数应该捕获他们的选择，如下所示：

```
 function restartList() {
        if (Val == 'Status') {
                $('[id$=status]').val(Codename);
                $('[id$=hidStatus]').val(CodeNumber);
        }
    } 
```

选择页面本身工作正常并发送变量，但母版页 javascript 函数永远不会触发。我相信这是因为原来的彩盒窗口仍然打开。所以我尝试将代码移动到仍然打开但也不会触发的实际剩余颜色框页面。有人可以帮助我准确了解我的数据返回到 DOM 中的哪个位置吗？

# ruby-on-rails - 在视图中显示来自回形针的图像

> ID：15886550
> 
> 赞同：0
> 
> 时间：2013-04-08T18:43:20.527
> 
> 标签：ruby-on-rails, ruby, paperclip

我正在使用带有多张图片上传的回形针。上传的图片显示在我的@post 视图中：

```
 <% for asset in @post.assets %>
    <%= link_to image_tag(asset.image.url(:thumb)), asset.image.url(:big), :class => "fancybox", :rel => "gallery" if asset.image? %>
  <% end %> 
```

我的问题是我希望这些图片也显示在另一个视图中，如下所示：

```
 <% for asset in @post.assets %>
    <%= image_tag asset.image.url(:thumb) if asset.image? %>
  <% end %> 
```

视图控制器：

```
class HomeController < ApplicationController
  def school_news
    @posts = Post.page(params[:page]).per(4).order('posts.id DESC')
  end
end 
```

现在我有这个错误：

```
 NoMethodError in Home#school_news

Showing D:/Projects/livu_pamatskola/app/views/home/school_news.html.erb where line #17 raised:

undefined method `assets' for nil:NilClass

Extracted source (around line #17):

14:             <%= link_to 'Lasīt vairāk...', posts %> 
15:         </div>
16:     </div>
17:   <% for asset in @post.assets %>
18:     <%= image_tag asset.image.url(:thumb) if asset.image? %>
19:   <% end %>
20:     <div id="separator"></div> 
```

我做错了什么？

# sikuli - java中的Sikuli while循环语法

> ID：15886551
> 
> 赞同：1
> 
> 时间：2013-04-08T18:43:21.953
> 
> 标签：sikuli

这是 Sikuli 脚本的示例

```
while (exists("OK.png"),10):
    click("OK.png") 
```

我怎样才能在 Java 中做同样的事情？

这是我尝试过的：

```
Screen screen = new Screen();
Pattern image = new Pattern("OK.png");

while (screen.exists(image))
{
    screen.click(image);
} 
```

但它无法编译此异常：

```
java: SikuliTest.java:29: incompatible types
found   : org.sikuli.script.Match
required: boolean 
```

谁能提供正确的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:51:03.060

根据[文档](http://doc.sikuli.org/region.html#Region.exists)，如果图像匹配，则`exists()`返回一个`Match`对象，`null`否则。试试这个：

```
while (screen.exists(image) != null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T11:01:19.350

```
import org.sikuli.script.FindFailed;
Screen screen = new Screen();

try{
    while(screen.exists("OK.png") != null){
    screen.click("OK.png");
    }
}
    catch(FindFailed e){
        e.getStackTrace();
    } 
```

# java - 如何在Tomcat中加载dll并调用JNI方法？

> ID：15886552
> 
> 赞同：2
> 
> 时间：2013-04-08T18:43:37.513
> 
> 标签：java, eclipse, tomcat, dll, java-native-interface

我已经成功地从一个使用 JNI 的 Java 程序调用了一个包含在 dll 中的方法。这就是我所做的：

```
public class MyClass {
  static {
     System.load("C:/Users/pabloruiz/library.dll");
     System.loadLibrary("library"); // This works too if the dll is in the Java Build Path
  }

  public native void foo();

  public static void main(String[] args) {
     new MyClass().foo();  // invoke the native method
  }
} 
```

现在我正在尝试做同样的事情，但在一个带有 Tomcat 的网络应用程序中。我尝试过使用绝对路径和相对路径，将 dll 放在 WEB-INF/lib 中，在 Properties->Java Build Path 中选择它，但它不起作用。顺便说一句，我正在研究 Eclipse。

这是我得到的错误：

```
java.lang.UnsatisfiedLinkError: com.example.MyClass.foo() 
```

编辑：

显然，它找到了 dll，因为如果我将名称更改为不存在的名称，我会收到一条错误消息，告诉我找不到 dll。据我了解，它在 dll 中找不到方法 foo()，这很奇怪，因为正如我上面所说，同一个 dll 可以从一个简单的 java 程序（不是网络应用程序）中工作。

# c# - 在c#中访问实例类的静态类型字段

> ID：15886555
> 
> 赞同：0
> 
> 时间：2013-04-08T18:44:12.453
> 
> 标签：c#

很抱歉问了这么简单的问题，但我还没有通过搜索找到答案。

那么，在 C# 中，是否有可能通过类的实例访问类的字段（其值不需要更改），就像您使用类的名称访问类的静态字段一样班级？

例如，如果我有

```
public class Myclass
{
    public int a = 0;
} 
```

我想在代码的其他地方，在另一个类中做

```
Myclass instance = new Myclass();
int b = instance.a; 
```

和

```
int c = Myclass.a; 
```

将 int 设为 static 或 const 无济于事，有什么办法吗？感谢您的任何回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:27:45.030

可能不是一个好主意，但仍然可以这样做

```
class Class1
{
    public static int staticBlah = 0;

    public int blah { 
        get{return Class1.staticBlah;} 
        set{Class1.staticBlah = value;} 
    }

} 
```

当然，您没有使用*完全相同*的名称，但您将访问相同的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:46:28.887

如果`MyClass`是单例，那么是的，你可以这样做，但在你的场景中，这似乎是一个不，因为你在别处实例化它。看，如果`MyClass`是单例，你可以这样做：

```
public class MyClass
{
    private static MyClass _instance = new MyClass();

    public static MyClass Instance { get { return _instance; } }

    public int A { get; set; }
    public static int a { get { return _instance.A; } }

    private MyClass() { }
} 
```

但正如你所看到的，它真的很**hacky。**您真的在这里混合了 OO 概念。`static`访问值 - `MyClass.a`- 和实例值之间存在明显差异。只需处理创建实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T18:48:42.487

这是不可能的。没有类型的实例就不能访问实例字段，C#中不能通过类型的实例访问静态字段，需要通过类型本身来访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T18:49:09.080

据我所知，这是不可能的。可能是您需要更改实施方式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T18:49:43.070

这是不可能的，因为：

(1) 该语言阻止您通过实例引用访问静态字段，并且

(2) 不能有两个同名的字段。（所以你不能有同名的静态和非静态字段。）

# ruby-on-rails - 处理rails中的多对多关系

> ID：15886556
> 
> 赞同：0
> 
> 时间：2013-04-08T18:44:28.393
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-3.2

我在与 rails 一起使用的数据库中存在多对多关系。

假设我有一个看起来像这样的模式：

> **电影院**
> -cinema_id
> - 名称
> 
> **电影**
> - movie_id
> - 名称
> 
> **放映时间**
> - 放映时间 ID - 时间戳 - 电影 ID - 电影 ID

所以基本上：[电影院] 1 -- N [放映时间] N -- 1 [电影]

在我的一个页面中，我有一个电影院 ID，并希望根据cinema_id 显示电影并将每部电影的放映时间分组。我不确定如何正确处理这个问题。在 .Net 中，我会使用 SelectMany linq 运算符并创建电影集合，但这似乎在 ruby​​/rails 中不存在。

我认为这样做的一种方法是：

```
@showtimes = Showtime.where(:cinema_id, cinema_id)
@showtimes.each do |st|
  @movies.add(st.Movie) unless @movies.include? st.Movie
end 
```

那行得通……但看起来……丑陋还是只有我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:48:22.640

如果您在模型中正确设置了关联，您应该能够执行以下操作：

控制器：

```
@showtimes = Showtime.where(:cinema_id, cinema_id) 
```

看法：

```
<%= @showtimes.each do |showtime| %>
    <p><%= showtime.movie.name %></p>  
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:41:27.263

根据您的架构，每个放映时间记录将恰好包含一部电影和一部电影。您可以通过这种方式轻松获得单独的列表：

```
@showtimes = Showtime.where(:cinema_id, cinema_id).order(:showing_at)
@movies = @showtimes.map {|s| s.movie } 
```

您可能还想查看 ActiveRecord 中的 .group 和 .includes 方法。

如果你想直接进入某个电影院放映的电影列表，你也可以这样做：

```
@movies = Movie.joins(:showtimes).where('showtimes.cinema_id = ?', cinema_id) 
```

有了它，您可以循环播放电影并显示每个人的放映时间。

# oracle - 如何在 Oracle 中以变量为参数使用“to_date”函数？

> ID：15886564
> 
> 赞同：-1
> 
> 时间：2013-04-08T18:45:04.227
> 
> 标签：oracle, stored-procedures, to-date

我有一个包含以下内容的存储过程：

```
V_DATACONVERTIDA varchar2(100) := TO_DATE('27/10/1994 23:59:59', 'DD/MM/YYYY HH24:MI:SS.SSSSS'); 
```

它工作正常，但问题是我必须将该日期设为变量。所以我创建了

```
V_DATAEXPIRACAO VARCHAR2(100) := p__formdata; 
```

是*p__formdata* (varchar2) 来自 SP 的参数。

但是，当我进行更改时，出现以下错误：

**ORA-01858: 在需要数字的地方发现了一个非数字字符**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:45:56.860

> “我不明白为什么它说当一切都应该是字符串（或varchar）时它需要一个数值”

很明显，一切*都不*是字符串。Oracle 抛出 ORA-01858 错误，我们尝试将字符串转换为日期，但格式掩码错误；例如，此示例传递了一个字符月份，但在掩码中指定了一个数字月份：`to_date('08-APR-2013', 'DD-MM-YYYY')`。

因此，如果您遇到该错误，您的程序并没有按照您的想法执行。但只有你能看到整个源代码，所以只有你能找出错误所在。

# oracle11g - oracle sql开发者表列不带引号

> ID：15886569
> 
> 赞同：1
> 
> 时间：2013-04-08T18:45:13.050
> 
> 标签：oracle11g, oracle-sqldeveloper

我正在使用 SQL Developer 创建 oracle 表。我正在尝试创建不带引号的列，但是在创建表之后，当我看到 DDL 时，所有列和表名都在引号中。我希望所有列都不区分大小写。

我怎么做？请指教。

这里的上下文是，我在 PHP 中有我的代码。我正在将我的后端从 MySQL 迁移到 Oracle。在使用 MySQL 时，我以小写形式引用了所有表列。但它看起来像`OCI_FETCH_ARRAY`返回大写列中的数据。那么我必须更改我的 PHP 代码以使用大写字母还是有其他替代方法？我有很多代码要更改！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T23:41:01.630

啊，终于想通了。是的，我同意，引号并不总是使对象区分大小写，但我的问题是`OCI_FETCH_ALL`，`OCI_FETCH_ARRAY`等以大写形式检索表列，而我希望它们以小写形式出现。以下语句是该问题的解决方法。它将列转换为小写。

> $data_upper = oci_fetch_assoc($data_res);
> $data = array_change_key_case($data_upper, CASE_LOWER);

谢谢！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:42:44.143

引号并不总是使对象区分大小写。所有大写的对象总是不区分大小写，即使它们被引号包围。

```
SQL> create table test1("QUOTES_DONT_DO_ANYTHING_HERE" number);

Table created.

SQL> select quotes_DONT_do_ANYTHING_here from test1;

no rows selected 
```

您通常只会看到引号，因为某些工具会自动将它们添加到所有内容中。

# html - 最近的 Chrome 更新打破了 td 行跨度？

> ID：15886571
> 
> 赞同：0
> 
> 时间：2013-04-08T18:45:14.603
> 
> 标签：html, google-chrome

我有下表：

```
<table>
    <tbody>
        <tr>
            <td rowspan="2">...</td>
            <td>...</td>
        </tr>
        <tr>
            <td>...</td>
        </tr>
    </tbody>
</table> 
```

我希望呈现如下：

```
+---------+--------+
|         |        |
|         |        |
|         +--------+
|         |        |
|         |        |
+---------+--------+ 
```

确实如此：在*以前版本*的 Chrome、IE10、Firefox 以及我尝试过的所有其他浏览器/版本组合上。

最新版本的 Chrome (26.0.1410.43 m) 将表格呈现如下：

```
+---------+--------+
|         |        |
|         |        |
|         |        |
|         |        |
|         |        |
+---------+--------+
          |        |
          |        |
          |        |
          +--------+ 
```

我的标记是否有缺陷，只有新的 Chrome 才能检测到这一点？或者这是 Chrome 或 Webkit 中的错误？我在[Chromium bugtracker](https://code.google.com/p/chromium/issues/list)上搜索了错误，但没有找到任何解决此问题的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:58:56.473

做了一个小提琴后，我发现它确实可以自己工作。在我的重置 CSS 中添加`vertical-align: baseline;`到表格元素会导致上述行为。我仍然想知道它是否是一个错误，因为它适用于所有其他浏览器，包括旧版本的 Chrome。

**简短回答**：检查您的样式表`vertical-align: baseline;`是否适用于表格元素。

# macos - 如何使 Mac 终端路径更短？

> ID：15886581
> 
> 赞同：5
> 
> 时间：2013-04-08T18:45:41.430
> 
> 标签：macos, terminal

是否可以缩短我的终端路径？

是否可以使它只显示当前目录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T18:52:28.597

在终端试试这个

```
export PS1='\W$ ' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T18:53:29.750

该变量`PS1`定义您的路径查找。

例如：

```
 export PS1="\u@\h \w> " 
```

给

```
 username@host /full/path/to/directory>

  export PS1="\u@\h \W> " 
```

给

```
 username@host directory> 
```

现在你也可以做

```
 export PS1="\u@\h  [\$(Some command with output)]> " 
```

您将不得不编辑您的 ~/.bash_profile。所以它是在启动时加载的。因此将导出`PS1=....`放入 .bash_profile

重新启动终端将恢复您的所有编辑，这就是您将其放入 ~/.bash_profile 的原因

# java - 图片之间的空格怎么去掉

> ID：15886584
> 
> 赞同：0
> 
> 时间：2013-04-08T18:45:45.660
> 
> 标签：java, android, bundle, image

这是我在文字上添加图片的代码，但是图片之间有很大的空间。如何删除空间并让图片彼此相邻而不会弄乱它最初的功能。你能告诉我我应该修改我的代码吗？

```
te2.setText(" ");
String t = te1.getText().toString();

final SpannableStringBuilder builder1 = new SpannableStringBuilder(
                    te1.getText());

            char[] aa = t.toString().toCharArray();

            for (int i = 0; i < aa.length; i++) {

                switch (aa[i]) {

                case 's':

                    while (builder1.toString().indexOf("s") > -1) {
                        ImageSpan imageSpan = new ImageSpan(
                                getBaseContext(), R.drawable.a1);
                        int pos = builder1.toString().indexOf("s");
                        builder1.replace(pos, pos + 1, "$");
                        builder1.setSpan(imageSpan, pos, pos + 1,
                                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                    }

                    te2.setText(builder1);

                    break;

                case 'g':

                    while (builder1.toString().indexOf("g") > -1) {
                        ImageSpan imageSpan = new ImageSpan(
                                getBaseContext(), R.drawable.a2);
                        int pos = builder1.toString().indexOf("g");
                        builder1.replace(pos, pos + 1, "$");
                        builder1.setSpan(imageSpan, pos, pos + 1,
                                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                    }
                    te2.setText(builder1);

                    break;
                case 'v':

                    while (builder1.toString().indexOf("v") > -1) {
                        ImageSpan imageSpan = new ImageSpan(
                                getBaseContext(), R.drawable.a2);
                        int pos = builder1.toString().indexOf("v");
                        builder1.replace(pos, pos + 1, "$");
                        builder1.setSpan(imageSpan, pos, pos + 1,
                                Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                    }
                    te2.setText(builder1);

                    break;

                } // / end of loop

            } // end of switch

        } 
```

# xml - cshtml麻烦ASP.NET版本声明

> ID：15886587
> 
> 赞同：0
> 
> 时间：2013-04-08T18:45:56.870
> 
> 标签：xml, razor

如何指定我在 .cshtml 文件中使用的 ASP.NET 版本？当我没有时，网络浏览器抱怨它，当我去微软页面查看问题时，我创建了一个带有文本的 web.config 文件

```
<?xml version="1.0"?>
    <appsettings>
        <add key="webPages:Version" value="2.0" />
    </appsettings>
</configuration> 
```

就像他们说的那样，现在它说我的代码有错误。说我错过了一个部分声明就行了。

完整的 web.config 文件：

```
<?xml version="1.0"?>
<configuration>
    <system.web>
        <compilation debug="false" targetFramework="4.0" />
    </system.web>

    <appsettings>
        <add key="webPages:Version" value="2.0" />
    </appsettings>
</configuration> 
```

# c++ - 避免对非虚拟析构函数进行对象切片

> ID：15886590
> 
> 赞同：5
> 
> 时间：2013-04-08T18:46:11.837
> 
> 标签：c++, templates, pointers, g++, smart-pointers

我正在为智能指针编写代码作为练习。使用在线教程（[1、2](http://www.codeproject.com/Articles/15351/Implementing-a-simple-smart-pointer-in-c) [）](http://www.davethehat.com/articles/smartp.htm)我开发了一个带有引用计数的普通智能指针类。问题是我无法弄清楚以下内容：

> 当智能指针检测到不再存在对特定对象的引用时，它必须通过指向原始类型的指针删除该对象，即使最终智能指针的模板参数是基类型。这是为了避免对非虚拟析构函数进行对象切片。

我怎样才能做到这一点。基本上我的代码如下所示（来自教程）。

```
template < typename T > class SP
{
private:
    T*    pData;       // pointer
    RC* reference; // Reference count

public:
    SP() : pData(0), reference(0) 
    {
        // Create a new reference 
        reference = new RC();
        // Increment the reference count
        reference->AddRef();
    }

    SP(T* pValue) : pData(pValue), reference(0)
    {
        // Create a new reference 
        reference = new RC();
        // Increment the reference count
        reference->AddRef();
    }

    SP(const SP<T>& sp) : pData(sp.pData), reference(sp.reference)
    {
        // Copy constructor
        // Copy the data and reference pointer
        // and increment the reference count
        reference->AddRef();
    }

    ~SP()
    {
        // Destructor
        // Decrement the reference count
        // if reference become zero delete the data
        if(reference->Release() == 0)
        {
            delete pData;
            delete reference;
        }
    }

    T& operator* ()
    {
        return *pData;
    }

    T* operator-> ()
    {
        return pData;
    }

    SP<T>& operator = (const SP<T>& sp)
    {
        // Assignment operator
        if (this != &sp) // Avoid self assignment
        {
            // Decrement the old reference count
            // if reference become zero delete the old data
            if(reference->Release() == 0)
            {
                delete pData;
                delete reference;
            }

            // Copy the data and reference pointer
            // and increment the reference count
            pData = sp.pData;
            reference = sp.reference;
            reference->AddRef();
        }
        return *this;
    }
}; 
```

**编辑：**

为了实现这一点，我必须有一个指向原始类型的指针。

我在这里发布了一个问题：[delete via a pointer to Derived, not Base](https://stackoverflow.com/questions/15887965/delete-via-a-pointer-to-derived-not-base)

但是现在自从查看评论和答案后，我认为两者都是相关的。我有构造函数：

```
template <typename T>
template <typename U>
Sptr<T>::Sptr(U* u) : obj(u),ref(NULL) {
    //do something
    ref = new RC();
    ref->AddRef();
} 
```

现在考虑从`Sptr<Base1> sp(new Derived);`哪里`Derived`派生`Base1`。Base1 具有受保护的构造函数/析构函数。这是存储类型的对象`T`但我需要通过 U 类型的对象存储它。我需要保留它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T18:57:28.397

您的智能指针需要 3 块信息。

首先，指向数据（`T*`或其他东西）的指针。

其次，您的参考计数：`std::atomic<int>`或其他东西。

第三，你的破坏功能（`std::function<void(T*)>`或什么）。

首次创建智能指针时，会创建销毁函数。当你的智能指针被复制到另一个智能指针时，这个销毁函数被复制。如果新智能指针的类型与旧智能指针的类型不匹配，则该破坏函数将以类型兼容的方式包装（`std::function<void(Base*)> = std::function<void(Derived*)>`开箱即用？无论如何，您基本上都是这样做的）。

默认情况下，这个销毁函数只是`delete t`，但作为一个附带的好处，这允许你的智能指针的用户传入一个销毁函数，这并不总是`delete t`.

有趣的是，在 的等价物上`reset`，您替换了您的破坏功能。因此，您实际上可以将销毁函数的签名设为 be `std::function<void()>`，这使得在智能指针之间移动`T`和`U`键入智能指针更容易一些。

```
template < typename T > class SP
{
private:
  T*    pData;       // pointer
  RC* reference; // Reference count
  std::function<void()> destroyData;
public:
  template<typename U>
  SP(U* pValue):
    pData(pValue),
    reference(nullptr),
    // store how to destroy pValue now, for later execution:
    destroyData([pValue]()->void{
      delete pValue;
    })
  {
    // Create a new reference 
    reference = new RC();
    // Increment the reference count
    reference->AddRef();
  }
  // similar for operator=, and you may have to do something for SP<T> as well:
  template<typename U>
  SP(const SP<U>& sp):
    pData(sp.pData),
    reference(sp.reference),
    destroyData(sp.destroyData)
  {
    // Copy constructor
    // Copy the data and reference pointer
    // and increment the reference count
    reference->AddRef();
  }
  template<typename U>
  SP<T>& operator = (const SP<U>& sp)
  {
    // blah blah blah, then
    destroyData = sp.destroyData;
  }

  ~SP()
  {
    // Destructor
    // Decrement the reference count
    // if reference become zero delete the data
    if(reference->Release() == 0)
    {
        delete reference;
        destroyData(); // here I destroyed it!
    }
  }
}; 
```

或类似的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T21:13:52.393

另一种方法涉及将删除委托给另一个类

```
// non templated base
class DeleterBase {
    public:
        virtual ~DeleterBase() { };
};

template <typename T>
class Deleter : public DeleterBase {
    private:
        T *ptr;
    public:
        Deleter(T *p) // remember the pointer with the correct type here
            : ptr{p}
        { }

        ~Deleter() { 
            delete this->ptr; // invokes correct destructor
        }
}; 
```

现在在智能指针中：

```
template <typename T>
class SP {
    private:
        T *p;
        DeleterBase *deleter;
    public:
        template <typename U> // U is deduced to actual type
        explicit SP(U *p)
            : p{p},
            deleter{new Deleter<U>(p)} // correct type
        { }

        // transfer control in the move constructor/assignment
        // increase the ref count in copy constructor/assignment

        // now just delete the deleter in the dtor
        ~SP() {
            if (reference_count_is_zero()) { // however you implement this
                delete this->deleter;
            }
        }
}; 
```

**由于您已经拥有 RC 类**，因此您可以将我在这里展示的功能移动到该类中。使该类模板化为非模板化基类，并在删除引用计数时销毁指针。少一件要传递的东西。

# ruby-on-rails - Rails has_one ：通过。构建关联对象

> ID：15886591
> 
> 赞同：6
> 
> 时间：2013-04-08T18:46:12.757
> 
> 标签：ruby-on-rails, activerecord

我的 Rails 2.3 应用程序中有以下数据模型

```
class PortraitSubject
  has_many    :portraits
  has_one     :primary_portrait, :through => :portraits, :source => :asset, :conditions => ['portraits.primary = ?', true]
  has_many    :supplementary_portraits, :through => :portraits, :source => :asset, :conditions => ['portraits.primary = ?', false]

  ...
end

class Portrait
  belongs_to :portrait_subject
  belongs_to :asset

  ...
end 
```

我想使用 Rails 构建关联的代理模型，但尝试构建`primary_portrait`失败并出现异常。IE

```
# This works
subject = PortraitSubject.new
subject.supplementary_portraits.build
subject.save

# This doesn't
subject = PortraitSubject.new
subject.build_primary_portrait
# => NoMethodError: undefined method `build_primary_portrait' for #<PortraitSubject:0x007ff16fe38948> 
```

我不确定我做错了什么。浏览 Rails 指南，看起来这应该可以通过`has_one`关系实现。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T17:17:09.327

你会为这些命名约定而发疯。A`PrimaryPortrait`和 a应该是不属于 a 的资产的`SecondaryPortrait`特例。它已经破坏了您无法构建的设计。`Portrait``Portrait`

尝试这个：

```
class PortraitSubject
  has_many    :portraits
  has_one     :primary_portrait, :conditions => {:primary => true}
  has_many    :supplementary_portraits, :conditions => {:primary => false}

  has_many    :portrait_assests, :through => :portraits
  has_one     :primary_portrait_asset, :through => :primary_portrait
  has_many    :supplementary_portrait_assets, :through => :supplementary_portraits

end 
```

那么，如果你需要构建一个`primary_portait_asset`写一个实例方法

```
def build_primary_portrait_asset
  primary_portrait || build_primary_portrait
  primary_portrait.asset || primary_portrait.build_asset
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T13:20:07.037

我建议将其分为两个关联：

```
class PortraitSubject
  has_many    :portraits
  has_one     :primary_portrait, :class_name => "Portrait", :conditions => ['portraits.primary = ?', true]
  has_one     :primary_portrait_asset, :through => :primary_portrait, :source => :asset

  has_many    :supplementary_portraits, :class_name => "Portrait", :conditions => ['portraits.primary = ?', false]
  has_many     :supplementary_portrait_assets, :through => :supplementary_portraits, :source => :asset

  ...
end 
```

然后您可以使用它`subject.build_primary_portrait`来创建肖像模型，并通过`subject.primary_portrait_asset`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:45:22.337

为什么不执行以下操作。

```
class Portrait
  belongs_to :portrait_subject
  belongs_to :asset

  ...
end 
```

-

```
class PrimaryPortrait < Portrait
  ...
end 
```

-

```
class SupplementaryPortraits < Portrait
  ...
end 
```

-

```
class PortraitSubject
  has_one     :primary_portrait
  has_many    :supplementary_portraits
  ...
end 
```

这更接近于 Rails 设计模式。不过，您将不得不添加一个类型列。

# xslt - xslt-如何对重复元素进行分组并组合子元素和属性

> ID：15886595
> 
> 赞同：0
> 
> 时间：2013-04-08T18:46:20.700
> 
> 标签：xslt

为了结合每道菜的所有条件和测量值，我将如何转换以下内容？我正在努力组合重复的子元素。

```
<?xml version="1.0" encoding="UTF-8"?>
<Test>
  <Experiment id='1'>
    <Dish1>
      <Conditions pressure='x' temp='y'/>
      <Measurement timeStamp='8am' reading='y'/>
    </Dish1>
    <Dish2>
      <Conditions pressure='x' temp='y'/>
      <Measurement timeStamp='8am' reading='y'/>
    </Dish2>
    <Dish1>
      <Conditions pressure='x' temp='y'/>
      <Measurement timeStamp='2pm' reading='y'/>
    </Dish1>
    <Dish2>
      <Conditions pressure='x' temp='y'/>
      <Measurement timeStamp='2pm' reading='y'/>
    </Dish2>
   </Experiment>
   <Experiment id='2'>
    <Dish1>
      <Conditions pressure='x' temp='y'/>
      <Measurement timeStamp='9am' reading='y'/>
    </Dish1>
    </Experiment>
    <Experiment id='2'>
      <Dish1>
        ...
</Test> 
```

期望的结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<Test>
   <Experiment id='1'>
     <Dish1>
        <Observation pressure='x' temp='y' timeStamp='8am' reading='y'/>
        <Observation pressure='x' temp='y' timeStamp='2pm' reading='y'/>
     </Dish1>
     <Dish2>
        <Observation pressure='x' temp='y' timeStamp='8am' reading='y'/>
        <Observation pressure='x' temp='y' timeStamp='2pm' reading='y'/>
     </Dish2>
   </Experiment>
   <Experiment id='2'>
     <Dish1>
         <Observation pressure='x' temp='y' timeStamp='9am' reading='y'/>
          ... 
```

谢谢，麻烦您了！

这是我到目前为止所尝试的：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="Experiment">
        <xsl:copy>
            <xsl:for-each select="Dish1">
                <xsl:element name="Observation">
                    <xsl:attribute name="pressure"><xsl:value-of select="Conditions/@pressure"/></xsl:attribute>
                    <xsl:attribute name="temp"><xsl:value-of select="Conditions/@temp"/></xsl:attribute>
                    <xsl:attribute name="TimeStamp"><xsl:value-of select="Measurement/@TimeStamp"/></xsl:attribute>
                    <xsl:attribute name="reading"><xsl:value-of select="Measurement/@reading"/></xsl:attribute>
                </xsl:element>
            </xsl:for-each>
        </xsl:copy>
    </xsl:template>
    <!-- copy everthing not covered above-->
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

在写下我失败的尝试时，我想出了上述转变。它似乎正在工作，但我需要验证输出。任何建议/改进将不胜感激。谢谢你。

...我的转换仅适用于第一个实验。当我添加：

```
<xsl:template match="Experiment">
  <xsl:copy>
  <xsl:for-each select="Dish2">
  <xsl:element name="Observation">
  <xsl:attribute name="pressure"><xsl:value-of select="Conditions/@pressure"/></xsl:attribute>
  <xsl:attribute name="temp"><xsl:value-of select="Conditions/@temp"/></xsl:attribute>
  <xsl:attribute name="TimeStamp"><xsl:value-of select="Measurement/@TimeStamp"/></xsl:attribute>
  <xsl:attribute name="reading"><xsl:value-of select="Measurement/@reading"/></xsl:attribute>
  </xsl:element>
  </xsl:for-each>
  </xsl:copy>
</xsl:template> 
```

...它找不到任何 Dish2 元​​素。

感谢 Ian Roberts，让我写下我失败的尝试引发了一个想法，这导致了下面的工作解决方案。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="Experiment">
        <xsl:copy>
            <xsl:for-each select="Dish1">
                <xsl:element name="Observation">
                    <xsl:attribute name="pressure"><xsl:value-of select="Conditions/@pressure"/></xsl:attribute>
                    <xsl:attribute name="temp"><xsl:value-of select="Conditions/@temp"/></xsl:attribute>
                    <xsl:attribute name="TimeStamp"><xsl:value-of select="Measurement/@TimeStamp"/></xsl:attribute>
                    <xsl:attribute name="reading"><xsl:value-of select="Measurement/@reading"/></xsl:attribute>
                </xsl:element>
            </xsl:for-each>
            <xsl:for-each select="Dish2">
                <xsl:element name="Observation">
                    <xsl:attribute name="pressure"><xsl:value-of select="Conditions/@pressure"/></xsl:attribute>
                    <xsl:attribute name="temp"><xsl:value-of select="Conditions/@temp"/></xsl:attribute>
                    <xsl:attribute name="TimeStamp"><xsl:value-of select="Measurement/@TimeStamp"/></xsl:attribute>
                    <xsl:attribute name="reading"><xsl:value-of select="Measurement/@reading"/></xsl:attribute>
                </xsl:element>
            </xsl:for-each>
        </xsl:copy>
    </xsl:template>
    <!-- copy everthing not covered above-->
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:37:03.747

为了完全灵活，您可能希望避免硬编码**Dish1**和**Dish2**并允许任意数量的菜肴。实际上，您希望通过实验 ID 和菜肴名称对“菜肴”元素进行分组。

在 XSLT 1.0 中，您将为此使用一种称为 Muenchian Grouping 的技术。首先定义一个键来分组你的菜元素

```
<xsl:key name="Dish" match="Experiment/*" use="concat(../@id, '-', local-name())" /> 
```

然后，要获得用于实验的唯一“菜”元素，您必须选择组中最先出现的菜元素作为其给定名称

```
<xsl:apply-templates 
    select="*[generate-id() = generate-id(key('Dish', concat(../@id, '-', local-name()))[1])]" /> 
```

然后，要获取该组中的所有菜肴，您可以像这样选择它们：

```
<xsl:apply-templates select="key('Dish', concat(../@id, '-', local-name()))" mode="group" /> 
```

要组合“Dish”元素的子元素，您只需要一个模板

```
<xsl:template match="Experiment/*" mode="group">
    <Observation>
        <xsl:apply-templates select="*/@*" />
    </Observation>
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="Dish" match="Experiment/*" use="concat(../@id, '-', local-name())" />

   <xsl:template match="Experiment">
      <xsl:copy>
         <xsl:apply-templates select="@*" />
         <xsl:apply-templates select="*[generate-id() = generate-id(key('Dish', concat(../@id, '-', local-name()))[1])]" />
      </xsl:copy>
   </xsl:template>

   <xsl:template match="Experiment/*">
      <xsl:copy>
         <xsl:apply-templates select="key('Dish', concat(../@id, '-', local-name()))" mode="group" />
      </xsl:copy>
   </xsl:template>

   <xsl:template match="Experiment/*" mode="group">
      <Observation>
         <xsl:apply-templates select="*/@*" />
      </Observation>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

注意这里使用**模式**，因为 XSLT 包含两个与**Experiment**的子元素匹配的模板，因此 XSLT 需要区分它们。（第一个是输出不同的“Dish”名称，第二个用于匹配和处理具有该名称的所有元素并组合子项）。

当应用于您的（截断的）XML 示例时，输出以下内容

```
<Test>
   <Experiment id="1">
      <Dish1>
         <Observation pressure="x" temp="y" timeStamp="8am" reading="y"/>
         <Observation pressure="x" temp="y" timeStamp="2pm" reading="y"/>
      </Dish1>
      <Dish2>
         <Observation pressure="x" temp="y" timeStamp="8am" reading="y"/>
         <Observation pressure="x" temp="y" timeStamp="2pm" reading="y"/>
      </Dish2>
   </Experiment>
   <Experiment id="2">
      <Dish1>
         <Observation pressure="x" temp="y" timeStamp="9am" reading="y"/>
      </Dish1>
   </Experiment>
</Test> 
```

如果您可以使用 XSLT 2.0，那么**xsl:for-each-group**就是您最好的新朋友。试试这个用于 XSLT 2.0 的 XSLT

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="Experiment">
      <xsl:copy>
         <xsl:apply-templates select="@*" />
         <xsl:for-each-group select="*" group-by="local-name()">
            <xsl:copy>
               <xsl:apply-templates select="current-group()" />
            </xsl:copy>
         </xsl:for-each-group>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="Experiment/*">
      <Observation>
         <xsl:apply-templates select="*/@*" />
      </Observation>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

请注意，在这两种情况下，任何地方都没有提到**Dish1**和**Dish**，因此您可以轻松拥有**Dish3**或更多，而无需更改 XSLT。

# php - PHP 将 POST 变量转发到其他页面

> ID：15886600
> 
> 赞同：1
> 
> 时间：2013-04-08T18:46:25.147
> 
> 标签：php, javascript, html

我有 html 表单，我必须在该表单所在的同一页面上提交该表单，添加 POST 变量，然后所有变量都传递到下一页。我试过这个：

```
 <form method="POST" action="">
        <input type="TEXT" name="names" />
        <input type="TEXT" name="email" />
        <input type="submit" name="send" />
     </form> 
```

然后是这个 PHP 代码：

```
if($_POST['send']){

    $_POST['digest'] = "someText here";
    header("HTTP/1.0 307 Temporary redirect");
    header("Location:https://nextpage.com/form");

} 
```

但是当我被重定向到另一个页面时，除了“$_POST['digest']”之外的所有 POST 数据都被发送。我该怎么办？

感谢和抱歉英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:48:59.107

您需要在要重定向到的 url 的查询字符串中传递变量。

见[http://www.php.net/manual/en/function.http-build-query.php](http://www.php.net/manual/en/function.http-build-query.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T18:50:08.400

如果您使用 php 的标头函数，则不能通过 POST 重新传输变量。

您在这里有 2 种选择：

1.  在 $_GET 中转换 $_POST（例如 http_build_query）
2.  如果您必须将此数据作为 POST 传输，您可以创建一个空白页面，其中包含输入类型为“隐藏”的表单，然后只需使用 javascript 提交即可。有点难看，但应该可以。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T18:51:29.040

您需要为此使用 cURL。

```
 $fields_string = "name=".$_POST['name']."&email=.$_POST['email'];
    $url = "the website you want to post to";
    $cx = curl_init();
        curl_setopt($cx, CURLOPT_URL,$url);
        curl_setopt($cx, CURLOPT_POST, true);
        curl_setopt($cx, CURLOPT_POSTFIELDS,$fields_string);
        curl_setopt($cx, CURLOPT_SSL_VERIFYPEER, FALSE);
        curl_setopt($cx, CURLOPT_SSL_VERIFYHOST, FALSE);
        curl_setopt($cx, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($cx, CURLOPT_FOLLOWLOCATION, FALSE);
    $init_response = curl_exec($cx);
    curl_close($cx); 
```

[http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)

# jsf - jsf 按钮对齐问题

> ID：15886603
> 
> 赞同：0
> 
> 时间：2013-04-08T18:46:28.913
> 
> 标签：jsf

我在表单中心有带有登录按钮的表单：

```
<h:panelGrid  columns="3" >
.....
<td align="center">
<a:commandButton id="loginButton">
<td>
.....
</h:panelGrid> 
```

我想添加保存按钮，以便两个按钮位于中心。但是，如果只是将按钮添加到`<td>`，则保存按钮设置在右侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T10:21:31.280

jsf 按钮对齐问题

```
 <h:commandButton id="SaveButton" value="Save" style="float:right;margin-right:10px;" action="save"/>

**or use div tag**

<div style="margin-left:200px;">
      <h:commandButton id="SaveButton" value="Save" action="save"/>
</div> 
```

# javascript - 如何使用拉斐尔 .animateWith()

> ID：15886606
> 
> 赞同：8
> 
> 时间：2013-04-08T18:46:39.280
> 
> 标签：javascript, animation, raphael

有没有人`.animateWith()`在 Raphael 中成功地保持快速动画同步？它的记录很差。该库的创建者有一个[视频演示](http://dmitry.baranovskiy.com/post/raphael-1-2-1)，但我找不到代码。

我有一个 Javascript 节拍器，它由一条线（节拍器的臂）和一个梯形的“重量”组成，最终会上下移动以表示速度。我在[这里](http://jsfiddle.net/wDwsW/5/)有一个工作小提琴，有问题的行是：

```
 var ticktock = Raphael.animation({
            "50%": { transform:"R20 " + x + "," + y, easing: "sinoid", callback: function() { tick(this, repeats, done); }},
            "100%": { transform:"R-20 " + x + "," + y, easing: "sinoid", callback: function() { tick(this, repeats, done); }}
        }, interval).repeat(repeats / 2);
        arm.animate(ticktock);
        weight.animateWith(arm, ticktock, ticktock); 
```

如果你检查小提琴并给它一个高节奏和大约 20 个滴答声，你应该看到重量滞后于手臂。（如果不是，请尝试几次——墨菲定律等。）我认为这正是 animateWith() 所阻止的。也许我使用不正确。

如果您查看.animateWith() 函数的[Raphael 源代码，您会看到它同步了每个动画 FWIW 的 .start 参数。](https://github.com/DmitryBaranovskiy/raphael/blob/master/raphael.core.js#L4087)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T18:02:58.707

从[拉斐尔文档](http://raphaeljs.com/reference.html#Element.animateWith)：

> **参数**：
> 
> *element* - 要与之同步的 [object] 元素
> 
> *anim* - 要与之同步的 [object] 动画
> 
> *animation* - [object] 动画对象，参见 Raphael.animation

所以我认为你的代码只需要分离*动画*并将其传递给第二个参数`.animateWith()`：

*动画*部分只是：

```
{
    "50%": { transform:"R20 " + x + "," + y, easing: "sinoid", callback: animationDone },
    "100%": { transform:"R-20 " + x + "," + y, easing: "sinoid", callback: animationDone }
} 
```

所以你可以这样做：

```
var animationDone = function() { 
    tick(this, repeats, done); 
};

var ticktockAnimationParam = {
    "50%": { transform:"R20 " + x + "," + y, easing: "sinoid", callback: animationDone },
    "100%": { transform:"R-20 " + x + "," + y, easing: "sinoid", callback: animationDone }
};
var ticktock = Raphael.animation(ticktockAnimationParam, interval).repeat(repeats / 2);
arm.animate(ticktock);
weight.animateWith(arm, ticktockAnimationParam, ticktock); 
```

见小提琴：http: [//jsfiddle.net/wDwsW/7/](http://jsfiddle.net/wDwsW/7/)

仅供参考，我将回调函数移到外面，而不是使用匿名函数。

# callback - 相互引用的回调函数？嵌套if语句？需要指导

> ID：15886612
> 
> 赞同：0
> 
> 时间：2013-04-08T18:47:07.577
> 
> 标签：callback, nested

第一次在这里很久。我最近才开始用 javascript 编程，我遇到了一个设计问题。

我有一些工作代码：1.等待来自串行端口的特定输入，2.找到输入后，它会移动到下一个函数。3\. 下一个函数通过串口发送命令，然后再次等待输入。

现在我有 9 个函数定义为 stepone() steptwo() 等......必须有更好的方法来做到这一点。除了所需的输入和输出变量不同外，每个函数都是相同的。

但是，我不希望程序跳过步骤。在发送下一个命令之前，它需要等待正确的串行输入。

我尝试过使用相互引用的回调函数，它似乎......错了？此外，它不起作用。它不会在发送命令之前等待正确的输入。

```
 var waitforinput = function(input, regex, callback)
    {
        if (regex.search != -1)
            callback();
    };

    var sendcommand = function(command,callback)
    {
        port.writeline(command);
        if (callback)
            callback();
    };

    var connect = function()
    {
        var int = setInterval(function()
        {
            waitforinput(input, "Please choose:", function()
            {
                sendcommand("1", function()
                {
                    waitforinput(input, "You choosed", function()
                    {
                        sendcommand("saveenv 1");
                    });
                });
            });
        },50);
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T20:48:32.463

我最终在案例中使用了 switch() 并跟踪了一个名为 step 的变量：

```
 step = 1;
    switch(step)
    {
    case 1:
        if (inputbuffer.search('Please choose') !== -1)
        {
            if (!waitdisplaystarted)
            {
                waitdisplaystarted = true;
                waitint = setInterval(showwait,1000);
            }
            window.$("#instructions").hide();
            window.$("#status").html("Step 1: Choosing boot option.");
            SELF.sendserialcommand("1");
            step = 2;
        }
        break;
    case 2:
        if (inputbuffer.search('You choosed 1') !== -1)
        {
            SELF.sendserialcommand('setenv bootargs "board=ALFA console=ttyATH0,115200 rootfstype=squashfs,jffs2 noinitrd"\r');
            setTimeout(function(){SELF.sendserialcommand('saveenv\r');}, 50);
            window.$("#status").html("Step 2: Transferring new kernel.");
            setTimeout(function(){SELF.sendserialcommand('tftp 0x80600000 kernel.bin\r');}, 2000);
            step = 3;
        }
        break;
    case 3:
        if (inputbuffer.search('Bytes transferred = ' + 878938) !== -1)
        {
            window.$("#status").html("Step 3: Erasing old kernel.");
            SELF.sendserialcommand('erase 0x9f650000 +0x190000\r');
            step = 'finished';
        }
    } 
```

# c# - C# - 首次运行程序时将用户定义的文件夹路径设置为字符串变量

> ID：15886613
> 
> 赞同：2
> 
> 时间：2013-04-08T18:47:10.673
> 
> 标签：c#, variables, installation, user-defined

感谢大家到目前为止的帮助！我对 c# 和一般代码非常陌生。我有一个问题，我似乎无法找到答案。

我刚刚编写了一个简单的程序，将文件从一个文件夹移动到一个名为当天日期的新文件夹。请看下面：

```
 private void button1_Click(object sender, EventArgs e)
    {

            DateTime now = DateTime.Now;
            string date = (now.ToString("D"));

            string a = @"m:\\staff docs\\faxes\\";
            string b = @a + date + "\\";
            System.IO.Directory.CreateDirectory(b);

        DirectoryInfo dir1 = new DirectoryInfo("c:\\blah");
        DirectoryInfo dir2 = new DirectoryInfo("@b");

        FileInfo[] DispatchFiles = dir1.GetFiles();
        if (DispatchFiles.Length > 0)
        {
            foreach (FileInfo aFile in DispatchFiles)
            {
                string files = @b + aFile.Name;
                int count = 0;
            Find :
                if (File.Exists(files))
                {
                    files = files + "(" + count.ToString() + ").txt";
                    count++;
                    goto Find;
                }
                aFile.MoveTo(files);
            }
        }   
    {
        MessageBox.Show("Your files have been moved!"); 
```

我想让用户定义源文件夹变量和目标文件夹变量，方法是让他们导航到文件浏览器中的文件夹或 Console.ReadLine - 但不是每次他们运行程序时，只是第一次. 如果他们以后也想改变路径，那将是理想的。

非常感谢！

编辑

我的解决方案是我的表单上的一个按钮，它调用这个块：

```
private void button3_Click(object sender, EventArgs e)
{
 FolderBrowserDialog fbd = new FolderBrowserDialog();
        fbd.Description = "Select source folder";
        fbd.ShowDialog();
        string Source = fbd.SelectedPath;
        Properties.Settings.Default.source = Source;
        Properties.Settings.Default.Save();

        FolderBrowserDialog fbd2 = new FolderBrowserDialog();
        fbd2.Description = "Select destination folder";
        fbd2.ShowDialog();
        string d1 = fbd2.SelectedPath;
        string d2 = "\\";
        string Destination = d1 + d2;
        Properties.Settings.Default.destination = Destination;
        Properties.Settings.Default.Save();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:56:22.740

您可以使用此处描述的“用户设置”：http: [//msdn.microsoft.com/en-us/library/bb397750.aspx](http://msdn.microsoft.com/en-us/library/bb397750.aspx)

//编辑：

假设您有一个名为“MySetting”的字符串类型的用户设置

如果你想阅读它：

```
var someVar = Properties.Settings.Default.MySetting; 
```

如果你想写它（假设你的数据在`someVar`）：

```
Properties.Settings.Default.MySetting = someVar;
Properties.Settings.Default.Save(); 
```

对 Save() 的调用会保留您的更改...更改已绑定到 Windows 用户帐户

在设计时，您的设置应定义为 Scope USER

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:58:24.270

您可以使用几种可能性。一件事是在用户第一次输入路径时
创建一个-file。`XML`您可以检查文件是否存在，如果存在，则从中读取，如果不存在，则创建它并向其写入数据。当然，您可以编辑您的 XML 文件。

有`System.Xml.XmlDocument`-class

```
using System;
using System.IO;
using System.Xml;

public class Sample
{
  public static void Main()
  {

    string inputpath = "C:\....";

    //Create the XmlDocument.
    XmlDocument doc = new XmlDocument();

    //Create a new node and add it to the document.
    //The text node is the content of the price element.
    XmlElement elem = doc.CreateElement("Inputpath");
    XmlText text = doc.CreateTextNode(inputpath);
    doc.DocumentElement.AppendChild(elem);
    doc.DocumentElement.LastChild.AppendChild(text);

    doc.Save(Console.Out);

  }
} 
```

请参阅[此处](http://msdn.microsoft.com/en-us/library/vstudio/fw1ys7w6.aspx)以获取参考。

您也可以将值写入注册表。就像一种可能性一样。

# java - 多头阻塞工作线程

> ID：15886615
> 
> 赞同：1
> 
> 时间：2013-04-08T18:47:12.760
> 
> 标签：java, multithreading

我有 4-5 个工作线程处理大型消息队列。而且我还有另一段代码使用 2-3 个工人运行。我想在处理大型消息队列时阻止所有其他工作人员。

我正在使用 JDK 6 和 Jms

编辑：

队列进程工作者从未终止。当没有消息时，他们阻塞在队列中。这些工人由执行线程池管理。如果我使用读写锁，这些工人之一也会被阻塞。此外，如果使用循环屏障，那么我必须终止线程以释放阻塞的第二个进程。由于工作人员由线程池管理，因此不能保证所有工作人员都会忙于处理消息。

让我知道，

```
final ExecutorService executor = getExecutorManager().getExecutor();
for (int i = 0; i < threadPoolSize; i++) {
executor.submit(new MessageWorker(qConn));
} 
```

以下是第二个模块，我希望在队列处理器工作线程工作时阻止所有工作人员。

```
final ExecutorService executor = getExecutorManager().getExecutor();
for (int i = 0; i < threadPoolSize; i++) {
executor.submit(new DbUpdateWorker());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:49:18.660

您需要使用[CyclicBarrier](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)。

> 一种同步辅助工具，它允许一组线程相互等待以达到共同的障碍点。CyclicBarriers 在涉及固定大小的线程组的程序中很有用，这些线程组必须偶尔相互等待。屏障被称为循环的，因为它可以在等待线程被释放后重新使用。

用于：

```
CyclicBarrier barrier = new CyclicBarrier(numWorkers, runnable); 
```

当您的工作线程完成时，您想要调用`runnable`的 a在哪里。`Runnable`每个线程在完成时调用`barrier.await()`。

# c# - C# 不使用对话框保存图像

> ID：15886617
> 
> 赞同：2
> 
> 时间：2013-04-08T18:47:18.107
> 
> 标签：c#

当用户在我的表单上按“保存团队”时，我无法将用户上传的图像保存到我的“徽标”文件中。

为了让您了解应用程序的功能，我在[这里提供了一个屏幕截图](http://gyazo.com/0c9b2cf308a7467f55da3110b0716522)，按下添加团队后，所有文本框数据都将写入文本文件，我希望图像自动保存到预定义的文件夹“logos”中，但是每当我按保存时，我都会收到 GDI++ 错误。

在浏览了网络上的一些旧线程后，我发现这可能是由文件权限、文件大小、文件名甚至打开的流等一些因素引起的。

下面是我目前用来保存提示错误的文件的代码：

```
 private void btnAddTeam_Click(object sender, EventArgs e)
    {
        //VALIDATION FOR TEXT FILE AND OTHER STUFF HERE...

        //SAVE THE IMAGE FILE
        string filePath = picTeamLogo.ImageLocation;
        Image tempImage = Image.FromFile(filePath);

        tempImage.Save(@"../logos/");
    } 
```

如果您正在查看屏幕截图，请不要对“arsenal.png”感到困惑我知道这不是完整的文件路径，它的转换是用另一种方法处理的，因为只需要将文件名写入文本文件。

如果有人对我哪里出错有任何想法，请指出我正确的方向，模糊的错误，例如我刚刚收到的 GDI 错误，真是令人头疼！

亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:03:54.833

试试这个方法

```
 public void storeFile(FileUpload File, string dirName)
    {
        if (!Directory.Exists(MapPath("~/uploads/" + dirName)))
        {
            Directory.CreateDirectory(MapPath("~/uploads/" + dirName));
        }
        string saveLocation = MapPath("~/uploads/" + dirName + "/" +        Path.GetFileName(File.FileName));
        File.SaveAs(saveLocation);

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:51:07.763

有关类似问题，请参阅我之前的这篇文章...

[Bitmap.Save 方法中的 GDI+ 中发生一般错误](https://stackoverflow.com/questions/15862810/a-generic-error-occured-in-gdi-in-bitmap-save-method/15862892#15862892)

流保持锁定 - 您可以将内存流用作临时位置，然后保存。

> 从文件构造位图对象或图像对象时，文件在对象的生命周期内保持锁定状态。因此，您无法更改图像并将其保存回其原始文件。 [http://support.microsoft.com/?id=814675](http://support.microsoft.com/?id=814675)

```
string outputFileName = "...";
using (MemoryStream memory = new MemoryStream())
{
    using (FileStream fs = new FileStream(outputFileName, FileMode.Create, FileAccess.ReadWrite))
    {
        tempImage.Save(memory, ImageFormat.Jpeg);
        // memory.ToStream(fs) // I think the same
        byte[] bytes = memory.ToArray();
        fs.Write(bytes, 0, bytes.Length);
    }
} 
```

或者替代方法是将图像通过加载`MemoryStream`到图像中 - 所以流不会首先被锁定......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:01:02.137

那是因为你没有指定保存功能的文件名！

看看这个 ：

```
string filePath = picTeamLogo.ImageLocation;
FileInfo fi = new FileInfo(filePath);
Image tempImage = Image.FromFile(fi.FullName);
tempImage.Save(@"../logo/" + fi.Name); 
```

现在它工作正常

# java - if 语句仅在我之前打印到终端时执行

> ID：15886619
> 
> 赞同：1
> 
> 时间：2013-04-08T18:47:20.107
> 
> 标签：java, swing, if-statement, while-loop, jbutton

我正在使用 javax.swing 包来构建一个 gui，并让一个 while 循环在里面永远运行一个 if 语句，以查看是否按下了按钮。出于某种我不知道的原因，此代码仅在我在 while 循环内打印到控制台时才有效。

下面是算法结构：

```
while(true){
   System.out.println(" ");
   if (startOver && playPressed) {//set to true on JButton press
    //do stuff
   }
} 
```

可能这是某种线程问题？有没有人遇到过这样的问题？是否有一种等待按下 JButton 的方法不涉及无限的 while 循环？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:53:13.110

Swing 是基于事件的。您不应该有无限循环等待按下按钮。该循环由 Swing 内部实现。您应该做的是向事件添加一个动作侦听器，单击该按钮时将调用该事件侦听器：

```
button.addActionListener(new ActionListener() {
    @Override 
    public void actionPerformed(ActionEvent e) {
        System.out.println("The button has been clicked!");
        // do stuff
    }
} 
```

这是处理 Swing 时的基本内容。你应该阅读[挥杆教程](http://docs.oracle.com/javase/tutorial/uiswing/)。

swing 事件调度线程中的任何无限循环都将永远冻结 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:58:26.060

我能够在没有无限循环的情况下克服这个问题的唯一方法是为算法的“//do stuff”部分创建一个新线程。

很奇怪，我仍然不明白为什么我必须打印到控制台才能使其在 while 循环中工作。

# asp.net-mvc-4 - MVC 4 视图打开另一个视图

> ID：15886622
> 
> 赞同：0
> 
> 时间：2013-04-08T18:47:36.213
> 
> 标签：asp.net-mvc-4, kendo-grid

我正在使用带有一些 Kendo UI 的 MVC 4，而且我对两者都是新手。
我需要的是让我的剑道网格在单击一行时重定向到另一个页面。

我最初的想法是在网格所在视图的脚本部分中创建一个函数，该函数将调用我需要的另一个视图。但是，我不确定这是否可能，因为我相信视图应该与控制器分开。

我认为我需要以某种方式使所有这些都能够在控制器内工作，但我不知道如何开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:52:15.247

使用@Ajax.ActionLink 调用控制器并接收partialView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T18:52:28.920

如果您正在执行发布操作，您可以在控制器中使用 RedirectToAction()。如果您需要在 JavaScript 中更改窗口，请参见下文。

```
window.location.href = "@Url.Action("(Action)","(Controller)",new {id= (params)})"; 
```

# php - 从 PHP 调用 SQL Server 2008 存储过程

> ID：15886625
> 
> 赞同：0
> 
> 时间：2013-04-08T18:47:45.123
> 
> 标签：php, sql-server, odbc

我正在尝试通过以下代码从 PHP ODBC 调用用 MS SQL SERVER 2008 编写的存储过程，但它似乎不起作用：

```
$statement = odbc_prepare ( $con, "CALL take_snapshot(?)");
if ($statement !== FALSE) {
if (odbc_execute ( $statement, 2010) !== FALSE) {
   return true;
    }
} 
```

在 SQL Server 管理工作室中，我只需在查询窗口中编写： **exec take_snapshot 2010即可执行它，它工作正常。**

谁能指导我从 PHP ODBC 调用过程的正确语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:52:07.347

`odbc_execute`第二个参数需要一个数组。您正在传递一个整数。

> ```
> odbc_execute ( resource $result_id [, array $parameters_array ] ) 
> ```

你应该使用：

```
 odbc_execute ( $statement, array(2010) ) 
```

[见手册](http://php.net/manual/en/function.odbc-execute.php)

# r - 格式化数值

> ID：15886629
> 
> 赞同：0
> 
> 时间：2013-04-08T18:47:55.623
> 
> 标签：r, formatting, printf

我想格式化数值，但在格式化期间它们会失去“数字”质量。有更好的选择吗？

```
> values
[1]  5 10 20 30
> class(values[1])
[1] "numeric"
> class(values)
[1] "numeric"
> out<-sprintf("%6.2f",values)
> out
[1] "  5.00" " 10.00" " 20.00" " 30.00"
> class(out)
[1] "character"
> class(out[1])
[1] "character" 
```

out 不再是数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:56:29.467

您可以使用`options`of`print`更改打印的位数：

```
R> print(3.141592, digits=3)
[1] 3.14 
```

您还可以设置`options(digits)`使其或多或少在您的会话中永久存在：

```
R> options(digits=3)
R> print(3.141592)
[1] 3.14 
```

但这不一定适用于情节等。

# powershell - Powershell - 计划任务、语言独立、Win 7+

> ID：15886636
> 
> 赞同：0
> 
> 时间：2013-04-08T18:48:07.297
> 
> 标签：powershell, internationalization, scheduled-tasks

我知道必须有一个简单的解决方案，但我一直在寻找两天没有运气。

**基本目标：** 我要查询（并设置）使用`Scheduled Defrag`状态`PowerShell`

限制：必须能够在系统设置为任何语言的情况下运行，必须不需要安装任何额外的软件、包等（即干净的系统），必须能够在任何 Windows 7+ 系统上运行（最好甚至更早）

**问题：**

1.  我可以使用它来获取状态，`'schtasks /query /TN '\Microsoft\Windows\Defrag\ScheduledDefrag''`但这取决于**（a）** 目录语言，更重要的是**（b）**将所有内容作为某种字符串返回，这意味着状态类似于`'Disabled'`英语中的 ..。但是每种语言都以自己的字符代码返回自己的“禁用”词，这意味着硬编码超过一百种语言 x 选项的数量
2.  `Windows 7`无法识别`Get-ScheduledTask`（似乎是 Win8+），即使它不确定如何在不使用实际单词的情况下将“禁用”查询为状态

我必须遗漏一些非常基本的东西，但我发现的只是安装 Powershell 包的建议，以及专门处理英语的回复。有什么建议么？

# uml - 什么时候在 UML 中使用自我消息和递归消息？

> ID：15886637
> 
> 赞同：2
> 
> 时间：2013-04-08T18:48:12.130
> 
> 标签：uml

我遇到了以下帖子，但是很难理解它- [self message(non recursive) vs self recursive message](https://stackoverflow.com/questions/11626473/self-messagenon-recursive-vs-self-recursive-message)。

我还在[http://www.zicomi.com/messageRecursion.jsp](http://www.zicomi.com/messageRecursion.jsp)看到了这个例子，希望真实世界的场景会有所帮助，但这让我更加困惑。当订单已传递给厨房和厨师时，为什么需要递归消息。我认为您所需要的只是一条自我信息，即厨师完成订单然后将其传递给服务员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:07:25.850

厨师示例的显示和描述可以说是“错误的”。

简单地说，给*self*的消息只是意味着接下来要调用的方法恰好在同一个对象类中。例如，调用 SavingsAccount.withdraw(anAmount) 可能会调用 SavingsAccount.getBalance() 以确定是否有足够的资金继续提款。

递归调用是对*self*调用的一种特殊情况，因为它是对相同的方法（具有不同的状态，因此它最终可以从递归调用中返回）。一些问题适合这种解决方案。一个例子是阶乘（参见[阶乘](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29#Factorial)）。在没有递归的情况下进行阶乘是不可能的（至少对于所有情况，但最简单的情况是，由于需要大量的内联代码）。如果您查看阶乘代码示例，您会看到调用每次更改一 ( *factorial(n-1) ) 并在**n*达到零时停止。如果没有递归，尝试对像 1,000,000 这样的值进行内联处理是不可行的。

# oracle - 顶点总是执行验证

> ID：15886639
> 
> 赞同：3
> 
> 时间：2013-04-08T18:48:20.960
> 
> 标签：oracle, oracle11g, oracle-apex

无论是提交还是刚刚加载，是否可以在页面加载时执行验证？

我需要为处理页面部分中创建的普通验证和分配给数字字段的最小最大验证实现它。

是否可以实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:43:39.907

确实：进行服务器端验证会引发错误，但页面已提交，因此更改的值处于会话状态。您可以尝试通过 plsql 验证来防止这种情况发生，该验证会在发生错误时清除会话状态值，但可能不是最佳的。我认为一些javascript可以减轻一些麻烦。

这是一些限制往返日期选择器中的可选范围的 javascript。它不允许用户选择比当前更大的，反之亦然。它还将项目设置为只读，因此用户必须通过日期选择器进行选择，并且不能手动更改它。

页面 > Javascript > 函数和全局变量声明

```
function f_check_date(){
  var lFrom = $("#P6_DATE_FROM").datepicker("getDate"),
      lTo = $("#P6_DATE_TO").datepicker("getDate");

  if(lFrom > lTo || lTo < lFrom){
    //in case it does happen
    $("#P6_DATE_FROM").val('');
    $("#P6_DATE_FROM").val('');
    alert('Please select a valid date range.');
  } else {
    //when a date changes, the other datepicker has to be altered so the
    //range is adjusted
    $("#P6_DATE_FROM").datepicker("option","maxDate",lTo);
    $("#P6_DATE_TO").datepicker("option","minDate",lFrom);
  };
}; 
```

动态操作、页面加载、执行 javascript

```
//on load, set the datepicker range in case a date is already present
//when the date changes, call the datecheck function
//and set item to readonly
$("#P6_DATE_FROM")
.datepicker("option","maxDate",$("#P6_DATE_TO").datepicker("getDate"))
.change(f_check_date)
.prop("readonly",true);
$("#P6_DATE_TO")
.datepicker("option","minDate",$("#P6_DATE_FROM").datepicker("getDate"))
.change(f_check_date)
.prop("readonly",true); 
```

# html - jQuery 动态加载页面并在退出时卸载 javascript

> ID：15886641
> 
> 赞同：0
> 
> 时间：2013-04-08T18:48:33.193
> 
> 标签：html, ajax, jquery

我正在尝试构建一个动态加载页面的站点。某些页面有额外的 JavaScript 加载。当页面更改时，我需要能够卸载此 javascript。那可能吗？到目前为止我的代码（仍在进行中）：

```
//When page loads...
$("ul.toggle li:first").addClass("active").show(); //Activate first tab
var taburl = $("ul.toggle li:first a").attr("href").substr(1);
$(document).ready(function(e) {
    $.ajax({
        type: "POST",
        url: taburl+'.php',
        data: '',
        dataType: "html",
        success: function(d){
            $('#main').html(d);        
    }       
});
});

//On Click Event
$("ul.toggle li").click(function() {

    $("ul.toggle li").removeClass("active"); //Remove any "active" class
    $(this).addClass("active"); //Add "active" class to selected tab
    $("#main").fadeOut(500);
    $("#main").html('');

    var activeTab = $(this).find("a").attr("href").substr(1) + '.php'; //Find the href attribute value to identify the active tab + content
    $("#main").load(activeTab).fadeIn(500); //Fade in the active ID content
}); 
```

让我知道是否需要任何其他信息。

# php - PHP while循环，成对显示两个

> ID：15886648
> 
> 赞同：1
> 
> 时间：2013-04-08T18:48:49.547
> 
> 标签：php, jquery, wordpress, while-loop

在 Wordpress 中，我正在创建一个滑块来滑过用户指定的一些内容。如果有人熟悉的话，我正在使用 ACF（高级自定义字段），但是我想要完成的是一次显示两个内容项，同时滑过 jQuery 滑块。

这是我的循环：

```
<?php while(has_sub_field('popular_topic')): ?>
    <li>
        <div class="slide">
            <img src="<?php the_sub_field('popular_topic_image'); ?>" alt="" />
            <div class="img-wrapper"></div>
            <div class="slider-content">
                <?php 

                $len = 60;
                $popularTopicTitle = get_sub_field('popular_topic_title');

                $newContent = substr($popularTopicTitle, 0, $len); 
                if(strlen($newContent) < strlen($popularTopicTitle)) {
                    $newContent = $newContent.'...';
                }
                echo '<p>'.$newContent.'</p>';

                ?>
                <a class="more-arrow" href="<?php the_sub_field('popular_topic_link'); ?>">Read More</a>

            </div>
        </div>
    </li>

<?php endwhile; ?> 
```

这目前正在工作，但它只显示一张幻灯片。我希望它显示两张幻灯片和一次。有什么我可以用柜台做的吗？这有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T02:34:37.317

我的语法可能有点不对，但也许试一试？

```
<?php $i = 0; ?>
<?php while(has_sub_field('popular_topic')): ?>
    <?php
        $len = 60;
        $popularTopicTitle = get_sub_field('popular_topic_title');
        $newContent = substr($popularTopicTitle, 0, $len); 
        if(strlen($newContent) < strlen($popularTopicTitle)) {
            $newContent = $newContent.'...';
        }
        $contentVar[$i] = array (
            'img'   =>  the_sub_field('popular_topic_image'),
            'title' =>  $newContent,
            'link'  =>  the_sub_field('popular_topic_link')
        );
        $i++;
    ?>  
<?php endwhile; ?>
<?php $j = 0; ?>
<?php while ($j < $i) : ?>
<li>
    <div class="slide">
        <img src="<?php echo $contentVar[$j]['img']; ?>" alt="" />
        <div class="img-wrapper"></div>
        <div class="slider-content">
            <p><?php echo $contentVar[$j]['title']; ?></p>
            <a class="more-arrow" href="<?php echo $contentVar[$j]['link']; ?>">Read More</a>
        </div>
        <?php $j++; ?>
        <?php if ($j <= $i) : ?>
            <img src="<?php echo $contentVar[$j]['img']; ?>" alt="" />
            <div class="img-wrapper"></div>
            <div class="slider-content">
                <p><?php echo $contentVar[$j]['title']; ?></p>
                <a class="more-arrow" href="<?php echo $contentVar[$j]['link']; ?>">Read More</a>
            </div>
        <?php endif; ?>
    </div>
</li>
<?php $j++; ?>
<?php endwhile; ?> 
```

# java - 加密/解密，得到 IllegalBlockSizeException

> ID：15886657
> 
> 赞同：0
> 
> 时间：2013-04-08T18:49:26.103
> 
> 标签：java, encryption

我正在使用 Java 的加密库并获得一个`IllegalBlockSizeException.`

我目前正在尝试以 XML 文件格式提取数据库内容。在数据转储期间，我正在创建一个带有字符串的清单文件，该字符串使用数据库中定义的密钥进行解密。

稍后，当 XML 文件的内容被加载到另一个数据库中时，它会从该数据库中获取密钥并使用它来解密清单。如果解密后的清单与原始内容不匹配，则意味着源数据库和目标数据库中的加密密钥不匹配，并通知用户。

以下是代码。EncryptionEngine 对象是一个单例，它使用 Java 加密库来抽象出许多加密细节。假设它工作正常，因为它是相当古老和成熟的代码。

这都是我做的一堂课。首先，我们有这些数据成员：

```
private final String encryptedManifestContents;
private final static String DECRYPTED_MANIFEST_CONTENTS = "This file contains the encrypted string for validating data in the dump and load process";
final static String ENCRYPTED_MANIFEST_FILENAME = "manifest.bin"; 
```

首先是加密过程。字符串加密如下：

```
final EncryptionEngine encryptionEngine = EncryptionEngine.getInstance();
encryptedManifestContents = encryptionEngine.symmetricEncrypt(DECRYPTED_MANIFEST_CONTENTS); // The contents get converted to bytes via getBytes("UTF-8") 
```

然后写入清单文件（目标只是一个将文件路径保存为字符串的变量）：

```
EncryptedManifestUtil encryptedManifestUtil = new EncryptedManifestUtil(); // The class I've created.  The constructor is the code above, which just initialized the EncryptionEngine and encrypted the manifest string.
manifestOut = new FileOutputStream(destination + "/" + ENCRYPTED_MANIFEST_FILENAME);
manifestOut.write(encryptedManifestUtil.encryptedManifestContents.getBytes("UTF-8")); 
```

至此，加密过程完成。我们获取了一个字符串，对其进行加密，然后按顺序将内容写入文件。现在，当有人加载数据时，解密过程开始：

```
BufferedReader fileReader = new BufferedReader(new FileReader(filename)); // Filename is the manifest's file name and location
final EncryptionEngine encryptionEngine = EncryptionEngine.getInstance();
String decryptedManifest = encryptionEngine.decryptString(fileReader.readLine().getBytes("UTF-8")); // This is a symmetric decrypt 
```

当解密发生时，它会抛出这个异常：

```
Caused by: javax.crypto.IllegalBlockSizeException: last block incomplete in decryption
    at org.bouncycastle.jcajce.provider.symmetric.util.BaseBlockCipher.engineDoFinal(Unknown Source)
    at javax.crypto.Cipher.doFinal(DashoA13*..) 
```

它似乎可以正确读取和写入文件，但内容对我来说是乱码。fileReader.readLine() 的结果是：

```
9�Y�������䖷�߾��=Ă���    s7Cx�t�b��_-(�b��LFA���}�6�f����Ps�n�����ʢ�@��  �%��%�5P�p 
```

谢谢您的帮助。

编辑：所以我改变了写入文件的方式。

回想一下这一行：

```
encryptedManifestContents = encryptionEngine.symmetricEncrypt(DECRYPTED_MANIFEST_CONTENTS); 
```

加密首先从输入的字符串中获取字节，然后解密，然后通过首先将字节编码为基本 64 字节，将字节更改回字符串。然后它将基本的 64 字节数组转换回字符串。

考虑到这一点，我将文件编写器更改为 PrintWriter 而不是 FileOutputStream，并直接将字符串写入文件而不是字节。不幸的是，我仍然收到错误消息。但是，读取行的结果字符串中的 � 似乎较少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:00:00.620

看起来问题出在您的 fileReader.readLine() 上-您正在将字节流写入文件，然后将其作为字符串读回。相反，您应该读入字节流，例如[参考这个问题](https://stackoverflow.com/questions/7250229/reading-a-binary-file-into-a-single-byte-array-in-java)，或者使用[Base64 编码](http://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/binary/Base64.html)将字节数组转换为字符串，将其写入文件，从文件中读取，然后将其转换回字节大批。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:02:49.777

我相信您错误地使用了 Reader，它是一个定义为读取字符的对象，而您实际上想要严格以字节为单位进行处理。这很可能不是您问题的全部，但如果您正在写入字节，您应该读取字节而不是字符。

# java - 在辅助监视器上打开模式对话框的简单方法？

> ID：15886658
> 
> 赞同：2
> 
> 时间：2013-04-08T18:49:26.417
> 
> 标签：java, javafx-2

考虑一下：

```
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.SceneBuilder;
import javafx.scene.control.Button;
import javafx.scene.control.ButtonBuilder;
import javafx.scene.control.Label;
import javafx.scene.control.LabelBuilder;
import javafx.scene.layout.FlowPaneBuilder;
import javafx.scene.layout.Pane;
import javafx.stage.Modality;
import javafx.stage.Stage;
import javafx.stage.StageBuilder;

public class DualMonitorProblem extends Application {

public static void main(String[] args) {
    launch(args);
}

@Override
public void start(final Stage stage) throws Exception {

    Label label = LabelBuilder.create().text("I seem to be lost").build();
    Scene dlgScene = SceneBuilder.create().root(label).build();
    final Stage dlgStage = StageBuilder.create().scene(dlgScene).resizable(false).build();
    dlgStage.initModality(Modality.APPLICATION_MODAL);
    dlgStage.initOwner(stage);

    Button btn = ButtonBuilder.create().text("put me on secondary monitor before clicking me").build();
    btn.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent event) {
            dlgStage.showAndWait();
        }
    });
    Button btn2 = ButtonBuilder.create().text("me too").build();
    btn2.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent event) {
            dlgStage.setX(stage.getX() + stage.getWidth() / 2);
            dlgStage.setY(stage.getY() + stage.getHeight() / 2);
            dlgStage.showAndWait();
        }
    });
    Button btn3 = ButtonBuilder.create().text("me too").build();
    btn3.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent event) {
            dlgStage.centerOnScreen();
            dlgStage.showAndWait();
        }
    });

    Pane p = FlowPaneBuilder.create().children(btn, btn2, btn3).build();

    Scene scene = SceneBuilder.create().root(p).width(800).height(600).build();
    stage.setScene(scene);
    stage.show();
}
} 
```

将舞台拖到辅助监视器，然后单击其中一个按钮。当您什么都不做时，模式对话框将在主监视器上打开。在父阶段的中心打开模态对话框的最简单方法是什么？Stage.centerOnScreen() 在考虑双显示器设置时并不相同。我应该认为这是一个错误并将其归档吗？还是有另一种方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:50:44.577

有一个静态方法

```
static ObservableList<Screen> getScreens() The observable list of currently available Screens. 
```

在屏幕类。和

```
static Screen getPrimary() The primary Screen. 
```

使用它们来确定哪个屏幕不是主屏幕。

您可以使用它来确定您拥有哪些屏幕。并使用窗口。setX 和 setY 方法 - 定位窗口 - 只是一个简单的数学运算。

此外，我在 JFX jira 中进行了检查，没有关于添加任何以屏幕为参数的方法居中的功能。因此，您可以提交 RFE，以添加方法 centerOnScreen(Screen)...

# vector - 在 Rust 中制作堆栈（或其他可动态调整大小的类似矢量的东西）的正确方法是什么？

> ID：15886661
> 
> 赞同：4
> 
> 时间：2013-04-08T18:49:35.807
> 
> 标签：vector, stack, dynamic-arrays, rust

谷歌找到了许多关于[现在已经从语言中删除的](https://github.com/mozilla/rust/pull/5279)[旧方法](http://osdir.com/ml/rust-mozilla-developemnt/2012-06/msg00076.html)的链接，但我找不到关于如何处理 Rust 0.6 的参考。

我刚刚实现了一个链表，我可以轻松地将其重新用于堆栈，但我宁愿使用标准库中一些经过良好测试、健壮的现有数据结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:34:53.887

我会按顺序尝试：

*   双[端队列](http://static.rust-lang.org/doc/0.6/std/deque.html)
*   [列表](http://static.rust-lang.org/doc/0.6/std/list.html)或[dlist](http://static.rust-lang.org/doc/std/dlist.html) _
*   一个[向量](http://static.rust-lang.org/doc/0.6/core/vec.html)
*   一个[可变的拥有向量](http://static.rust-lang.org/doc/0.6/tutorial.html#vectors-and-strings)

您可以[在 wiki 上了解有关容器的更多信息](https://github.com/mozilla/rust/wiki/Containers)。

# css - css 字体规则中的 16px/28px 是什么意思？

> ID：15886665
> 
> 赞同：5
> 
> 时间：2013-04-08T18:49:48.063
> 
> 标签：css, font-size

我不断看到类似的字体样式`font: 16px/28px 'Open Sans', 'Helvetica', sans-serif;`，但我无法找出它的`16px/28px`含义。为什么定义了两种不同的字体大小？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T18:50:43.090

它设置字体大小和行高。

请参阅[MDN 文档](https://developer.mozilla.org/en-US/docs/CSS/font)的示例：

> /*设置字体大小为12px，行高为14px。将字体系列设置为无衬线 */
> 
> p { 字体：12px/14px sans-serif }

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T18:50:31.827

`16px/28px`=分别为字体大小和行高

**[http://www.w3.org/TR/CSS2/fonts.html#font-shorthand](http://www.w3.org/TR/CSS2/fonts.html#font-shorthand)**

# matlab - MATLAB - 计算每年的条目数

> ID：15886676
> 
> 赞同：0
> 
> 时间：2013-04-08T18:50:26.810
> 
> 标签：matlab, for-loop, count, while-loop, sum

我有一个 .mat 文件，其中包含 2006-2100 年的数据。每年都有不同数量的线路。我需要计算 2006 年有多少行，2007 年有多少行，等等。

设置，按列，是：年，月，日，纬度，长我只想计算包含相同年份条目的行数，并用包含该信息的数组返回一个数组。

我在想一个 for 或 while 循环应该可以工作，但我不知道如何纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:12:23.643

如果我们假设您的数据在数字矩阵中，您可以这样做：

```
num_lines2006 = sum(data(:,1)==2006);
data2006 = data(data(:,1)==2006),:); 
```

* * *

如果要添加对应年份的行数列，这是一个带有循环的解决方案：

```
for k=size(data,1):-1:1
    num_year(k,1) = sum(data(:,1)==data(k,1));
end
data = [data num_year]; 
```

* * *

这是一个没有循环的解决方案：

```
[unq_year,~,idx] = unique(data(:,1),'stable');
num_year = grpstats(data(:,1),unq_year,@numel);
data = [data num_year(idx)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:19:50.497

要计算数字条目，您可能需要使用`histc`

```
years = unique(data(:,1);
counts = histc(data(:,1),years); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:33:18.260

因为你只想计算行数，你可以写一些简单的东西，比如：

```
years = unique(data(:, 1));
counts = arrayfun(@(year) nnz(data(:, 1) == year), years); 
```

`years`包含唯一的年份，以及`numRows`它们被找到的次数。

您还可以使用受乔纳斯回答启发的单线：

```
[counts, years] = hist(data(:,1), unique(data(:,1))'); 
```

# android - android 传感器在服务中发生了变化

> ID：15886677
> 
> 赞同：1
> 
> 时间：2013-04-08T18:50:27.577
> 
> 标签：android

我有一项服务可以检查电话是否在响铃。在这项服务中，我还会检查电话是否转机。在服务运行时一直运行此传感器检查是否很好，或者这对电池和 CPU 资源来说太多了？

```
@Override
    public void onSensorChanged(SensorEvent event) {
        if (event.sensor.getType() == Sensor.TYPE_ORIENTATION) {

            boolean turnAroundToStop = some code is executed

            if (turnAroundToStop) {
                float value = Math.abs(event.values[1]);
                if (value > orientationLim && !stopped) {
                    // Down
                    do some code
                    stopped = true;
                } else {
                    // Up
                    stopped = false;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:40:53.037

对于 CPU 和电池而言，一直运行该服务的成本很高。我知道有两个选项可以帮助您减少 CPU 负载，如果可能，我建议您使用它们。

选项1：当显示器关闭时停止服务并在显示器打开时启动服务。您可以通过使用`BroadcastReceiver`：

```
public class ScreenReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            // stop service
        } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
            // start service
        }
    }
} 
```

重要提示：以编程方式注册事件：

```
IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
filter.addAction(Intent.ACTION_SCREEN_ON);
filter.addAction(Intent.ACTION_SCREEN_OFF);
BroadcastReceiver receiver = new ScreenReceiver();
registerReceiver(receiver, filter); 
```

选项 2：使用`AlarmManager`代替：如果您的传感器检查也需要在设备待机期间执行，则此选项更好。然而，缺点是它对于短间隔（比如说小于 30 分钟）不是一个好的选择。

```
 public void SetAlarm(Context context) {
    AlarmManager manager = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
    Intent intent = new Intent(context, AlarmManagerBroadcastReceiver.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);
    am.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000 *60 , pendingIntent);
 } 
```

您可能在清单中需要这个：

```
<uses-permission android:name="android.permission.WAKE_LOCK"></uses-permission> 
```

注意：这些不是完整/正在运行的示例。代码片段应该可以帮助您从正确的关键字开始。无论如何，希望这会有所帮助......干杯！

# java - 没有为依赖项找到类型为 path.repositoryClass 的匹配 bean，预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者

> ID：15886680
> 
> 赞同：0
> 
> 时间：2013-04-08T18:50:29.803
> 
> 标签：java, spring, hibernate, model-view-controller, jpa

我是 Spring 的新手，并且已经进行了广泛的搜索以解决这个问题，但还没有成功。
在 src/WEB-INF 文件夹下，我有两个文件：

```
1\. dispatcherServlet-servlet.xml
2\. web.xml 
```

在 src/META-INF 下，我有以下文件：

```
1\. applicationContext.xml 
2\. hibernate-context.xml 
3\. orm.xml
4\. persistence.xml 
5\. spring-data.xml 
6\. spring.properties 
```

所有的源代码都按上面给出的顺序列在问题之后。
当我从 dispatcherServlet-servlet.xml 中删除以下行时，我没有收到错误消息（主题中提到）：

```
<context:component-scan base-package="com.myapp.controller"/> 
```

**但它不是在数据库中创建表。**

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath:applicationContext*.xml
    </param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>dispatcherServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>dispatcherServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>

<session-config>
  <session-timeout>60</session-timeout>
</session-config> 
```

dispatcherServlet-servlet.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:jee="http://www.springframework.org/schema/jee"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:task="http://www.springframework.org/schema/task"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xsi:schemaLocation="http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<mvc:annotation-driven/>
<mvc:resources mapping="/images/**" location="/images/"/>
<mvc:resources mapping="/resources/**" location="/resources/"/>
<context:component-scan base-package="com.myapp.controller"/>

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" p:prefix="/WEB-INF/views/" p:suffix=".jsp"/>

<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/> 
```

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/data/neo4j http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

<context:annotation-config/>
<context:spring-configured/>
<context:component-scan base-package="com.myapp">
 <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
</context:component-scan>   

<tx:annotation-driven mode="aspectj" transaction-manager="transactionManager"/>

<!-- Load Hibernate related configuration -->
<import resource="hibernate-context.xml" />

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
     <array>
       <bean id="jsonConverter"
          class="com.myapp.util.MappingJackson2HttpMessageConverter">
         <property name="objectMapper">
           <bean class="com.myapp.util.HibernateAwareObjectMapper"/>
         </property>
       </bean>
     </array>
    </property> 
```

```
<!-- Imports datasource configuration -->
<import resource="spring-data.xml"/>

<bean id="deployProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean"
p:location="/META-INF/spring.properties" /> 
```

休眠上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
                    http://www.springframework.org/schema/data/jpa
                    http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        ">

<context:property-placeholder location="/META-INF/spring.properties" />
<jpa:repositories base-package="com.myapp.repository" />
<tx:annotation-driven transaction-manager="transactionManager" />   

<!-- Declare a datasource that has pooling capabilities-->   
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
            destroy-method="close"
            p:driverClass="${app.jdbc.driverClassName}"
            p:jdbcUrl="${app.jdbc.url}"
            p:user="${app.jdbc.username}"
            p:password="${app.jdbc.password}"
            p:acquireIncrement="5"
            p:idleConnectionTestPeriod="60"
            p:maxPoolSize="100"
            p:maxStatements="50"
            p:minPoolSize="10" />

</beans> 
```

orm.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings version="2.0" xmlns="http://java.sun.com/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd">
<persistence-unit-metadata>
    <persistence-unit-defaults>
    </persistence-unit-defaults>
</persistence-unit-metadata> 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" version="1.0">
<persistence-unit name="hibernatePersistenceUnit" transaction-type="RESOURCE_LOCAL">
            <provider>org.hibernate.ejb.HibernatePersistence</provider>
            <!--mapping-file>./META-INF/orm.xml</mapping-file-->
            <class>com.myapp.model.ACLEntityManager</class>
            <class>com.myapp.model.MerchantACL</class>
            <class>com.myapp.model.Resource</class>
            <class>com.myapp.model.AdminACL</class>
            <class>com.myapp.model.Aggregator</class>
            <class>com.myapp.model.Customer</class>
    <properties>
        <property name="hibernate.hbm2ddl.auto" value="create" />
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5InnoDBDialect" />
    </properties>
    <mapping-file>./META-INF/orm.xml</mapping-file>
</persistence-unit> 
```

弹簧数据.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/tx 
        http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/jdbc 
        http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
        http://www.springframework.org/schema/data/jpa
        http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
        http://www.springframework.org/schema/util 
        http://www.springframework.org/schema/util/spring-util-3.1.xsd">

<context:property-placeholder properties-ref="deployProperties" />

<tx:annotation-driven transaction-manager="transactionManager" />   

<!-- Activate Spring Data JPA repository support -->
<jpa:repositories base-package="com.myapp.repository" />

<!-- Declare a datasource that has pooling capabilities-->   
<bean id="jpaDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close"
    p:driverClass="${app.jdbc.driverClassName}"
    p:jdbcUrl="${app.jdbc.url}"
    p:user="${app.jdbc.username}"
    p:password="${app.jdbc.password}"
    p:acquireIncrement="5"
    p:idleConnectionTestPeriod="60"
    p:maxPoolSize="100"
    p:maxStatements="50"
    p:minPoolSize="10" />

<!-- Declare a JPA entityManagerFactory -->
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" 
            p:persistenceXmlLocation="./META-INF/persistence.xml"
    p:persistenceUnitName="hibernatePersistenceUnit"
    p:dataSource-ref="jpaDataSource"
    p:jpaVendorAdapter-ref="hibernateVendor"/>

<!-- Specify our ORM vendor -->
<bean id="hibernateVendor" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"
            p:showSql="true"/>

<!-- Declare a transaction manager-->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager" 
    p:entityManagerFactory-ref="entityManagerFactory"/> 
```

spring.properties

```
# database properties
app.jdbc.driverClassName=com.mysql.jdbc.Driver
app.jdbc.url=jdbc:mysql://localhost/mydb
app.jdbc.username=root
app.jdbc.password= 
```

堆栈跟踪：

```
SEVERE: StandardWrapper.Throwable
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adminACLController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.myapp.service.AdminACLService com.myapp.controller.AdminACLController.adminACLService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'adminACLService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.myapp.repository.AdminACLRepository com.myapp.service.AdminACLService.adminACLRepository; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.myapp.repository.AdminACLRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
at javax.servlet.GenericServlet.init(GenericServlet.java:160)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1267)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1186)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1081)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5027)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5314)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardContext.reload(StandardContext.java:3920)
at org.apache.catalina.loader.WebappLoader.backgroundProcess(WebappLoader.java:426)
at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1345)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1530)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)
at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1519)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:02:58.457

AdminACLController

```
package com.myapp.controller;

import com.myapp.dto.AdminACLDTO;
import com.myapp.exception.NotFoundException;
import com.myapp.model.AdminACL;
import com.myapp.service.AdminACLService;
import java.security.NoSuchAlgorithmException;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
public class AdminACLController {
@Autowired
private AdminACLService adminACLService;

@RequestMapping(value = "/adminACL", method = RequestMethod.POST, headers = "Accept=application/json")
public @ResponseBody
AdminACLDTO add(
        // @RequestParam(value = "sessionUserId") String sessionUserId,

        //private Integer ;
//private String adminName;
        @RequestParam(value = "adminId") String adminId,
        @RequestParam(value = "adminName") String adminName
        ) 
        throws NotFoundException, NoSuchAlgorithmException {

    AdminACL checkAdminACL = this.adminACLService.getAdminACL(adminId);

    if (checkAdminACL == null) {
        AdminACL adminACL = new AdminACL();
        adminACL.setAdminId(Integer.parseInt(adminId));
        adminACL.setName(adminName);

        this.adminACLService.addAdminACL(adminACL);
        AdminACLDTO adminACLDTO = new AdminACLDTO(adminACL);
        return adminACLDTO;

    }
    throw new NotFoundException("Resource already added");
}
} 
```

AdminACLService

```
package com.myapp.service;

import com.myapp.model.AdminACL;
import com.myapp.repository.AdminACLRepository;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
public class AdminACLService {
@Autowired
AdminACLRepository adminACLRepository;

private static final Logger logger = LoggerFactory.getLogger(MerchantACLService.class);

@Transactional
public AdminACL addAdminACL(AdminACL admin) {
     adminACLRepository.save(admin);      
     return admin;   
   }

@Transactional
public AdminACL getAdminACL(String adminId) {
  AdminACL policy = adminACLRepository.findByAdminId(Long.parseLong(adminId));
  return policy;
}
} 
```

AdminACL 存储库

```
package com.myapp.repository;

import com.myapp.model.AdminACL;
import org.springframework.data.jpa.repository.JpaRepository;

public interface AdminACLRepository extends JpaRepository<AdminACL, Long> {
AdminACL findByAdminId(Long adminId);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T07:19:22.097

为了使用 Spring 的`JpaRepository`，你需要添加一些 Spring JPA 魔法：

```
<beans
    ...
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xsi:schemaLocation="
        http://www.springframework.org/schema/data/jpa
        http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
        ...
        ">

  <jpa:repositories base-package="com.myapp.repository" /> 
```

在您的情况下，我建议将其添加到`hibernate-context.xml`文件中。

### 第一次尝试

似乎您没有将`com.myapp.repository.AdminACLRepository`（或其任何实现）注释为`@Component`/ `@Service`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T00:43:52.640

我猜 com.myapp.service.AdminACLService 上没有 @Service 注释。如果您在该类上确实有 @Service 注释，您还需要确保您正在扫描此包。

不知道你为什么这样做

```
<context:component-scan base-package="com.myapp">
 <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
</context:component-scan> 
```

虽然我不确定这是否有问题

# google-chrome - CSS 多个背景工作不一致

> ID：15886689
> 
> 赞同：4
> 
> 时间：2013-04-08T18:51:11.307
> 
> 标签：google-chrome, css, background, gradient

我在尝试使用多个背景时遇到了一个奇怪的问题。我想要的基本效果是边缘的渐变背景和中间的透明背景。这是真正的基本代码：

```
background: transparent, linear-gradient(45deg, #f06, yellow);
background-size:50% 50%, 100% 100%;
background-position: 50% 50%, 0 0;
background-repeat: no-repeat; 
```

我正在使用[dabblet](http://dabblet.com)来玩弄它。如果我使用该代码，我将一无所获（我替换`transparent`为`green`确保我能够看到它）：[http ://dabblet.com/gist/5339331](http://dabblet.com/gist/5339331)

但是，如果我反转背景（`backgound: linear-gradient(45deg, #f06, yellow), green;`），它会按预期完美工作，当然它是**相反**的：[http :](http://dabblet.com/gist/5339291) *//dabblet.com/gist/5339291*

 **这里发生了什么？为什么它会以一种方式工作而不是另一种？我还尝试将渐变替换`blue`为使其变得简单，但它不起作用：[http ://dabblet.com/gist/5339396](http://dabblet.com/gist/5339396)

仅供参考，我正在 Chrome 27 中进行测试，并收到黄色`!`警告`Invalid property value.`

**编辑：**这是我想要的效果的[更好（但仍然损坏）示例。](http://jsfiddle.net/redEvo/FGcgY/)在这个例子中，有四块，每块都有自己的渐变背景。理想情况下，我会拥有一件，因为

1.  它将允许看起来正确的渐变。

2.  这看起来很可怕，并且在移动设备上播放效果不佳。

3.  如果可能的话，最好避免额外的固定/绝对 div

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T07:07:59.293

您可能知道，`transparent`是颜色值而不是图像值，就像`blue`. 因为它是一个颜色值，所以它必须在`background`简写中最后指定，并且*只有*在那里，因为[只有基础层可能有背景颜色](http://www.w3.org/TR/css3-background/#the-background-color)。这就是 Chrome 的 Web Inspector 报告您拥有的无效属性值的原因。

不幸的是，没有一种方法可以使用多个背景来指定单个背景图像及其被切掉的区域（例如，在中间部分显示一个透明开口）。

不过，您在 jsFiddle 上所拥有的只是一个步骤。`div`您可以通过向两者添加`::before`和`::after`伪元素来轻松地完全取消额外的元素`html`，`body`相反，您有四个伪元素可以使用。您还需要适当地使用`background-size`和`background-position`调整渐变背景，使它们看起来无缝。

由于您希望渐变在保持无缝的同时保持半透明，因此您需要防止它们重叠。这很容易通过调整偏移量来实现`background-size`。

这是我使用的 CSS：

```
html::before, html::after, body::before, body::after {
    display: block;
    position: fixed;
    background: linear-gradient(45deg, rgba(255, 0, 0, 0.5), rgba(0, 255, 0, 0.5));
    content: '';
}

html::before, html::after {
    height: 25%;
    left: 25%;
    right: 25%;
    background-size: 200% 400%;
}

body::before, body::after {
    width: 25%;
    top: 0;
    bottom: 0;
    background-size: 400% 100%;
}

html::before { top:    0; background-position: top;    }
html::after  { bottom: 0; background-position: bottom; }
body::before { left:   0; background-position: left;   }
body::after  { right:  0; background-position: right;  } 
```

[jsFiddle 预览](http://jsfiddle.net/BoltClock/FGcgY/7)（[带有边框以显示我如何排列伪元素](http://jsfiddle.net/BoltClock/FGcgY/9)）

你不能只用一个盒子来做到这一点，所以是的，它在移动设备上可能表现不佳。如果这不能很好地工作，那么您可以使用 SVG 背景来实现这一点，或者如果失败，您可能不得不回退到使用传统的预渲染背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T20:08:23.727

CSS`background`速记属性语法如下：

`background: background-color background-image background-repeat background-attachment, background-position`

请注意，没有任何逗号，因此最好不要使用它们，尤其是在分隔`background-color`and时`background-image`。

使用所有这些并回到原始示例：[http ://dabblet.com/gist/5340042](http://dabblet.com/gist/5340042)**

# tinymce - 使用窗口宽度的百分比值调用 tinyMCE windowManager.open

> ID：15886690
> 
> 赞同：1
> 
> 时间：2013-04-08T18:51:11.483
> 
> 标签：tinymce

下面的脚本从 tinyMCE 编辑器调用内联弹出窗口。我需要将宽度转换为百分比值而不是基于像素的值。有什么想法吗？

```
(function() {
    // Load plugin specific language pack
    tinymce.PluginManager.requireLangPack('CustomCodes');

    tinymce.create('tinymce.plugins.CustomCodes', {
        /**
         * Initializes the plugin, this will be executed after the plugin has been created.
         * This call is done before the editor instance has finished it's initialization so use the onInit event
         * of the editor instance to intercept that event.
         *
         * @param {tinymce.Editor} ed Editor instance that the plugin is initialized in.
         * @param {string} url Absolute URL to where the plugin is located.
         */
        init : function(ed, url) {
            // Register the command so that it can be invoked by using tinyMCE.activeEditor.execCommand('mceExample');

            ed.addCommand('mceCustomCodes', function() {
                ed.windowManager.open({
                    file : url + '/custom_post.php',
                    width : 1024 + ed.getLang('CustomCodes.delta_width', 0),
                    height : 600 + ed.getLang('CustomCodes.delta_height', 0),
                    inline : 1
                }, {
                    plugin_url : url // Plugin absolute URL
                });
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:29:23.423

您可以弄乱 iframe 的内部宽度并根据所需的宽度百分比分配像素值。

# javascript - JQuery 代码适用于 Firefox、Opera 但不适用于 Chrome 和 IE

> ID：15886694
> 
> 赞同：1
> 
> 时间：2013-04-08T18:51:41.557
> 
> 标签：javascript, jquery, cross-browser

我有以下代码适用于 Firefox-20 和 Opera，但不适用于 Chrome-26 或 IE-10。keyup 函数将印度逗号添加到金额中。

```
$(document).ready(function() {
    $("#readyArea").on('change', function() {
        $("#underConstArea").val($(this).val()).trigger('change');
    });

$('.comma').on('keyup', this, function commaFormatted(){
        var delimiter = ","; // replace comma if desired
        var amount = $(this).val().replace(/\,/g,'');
        var a = amount.split('.',2);
        var d = a[1];
        var i = parseInt(a[0],10);
        if(isNaN(i)) { return ''; }
        var minus = '';
        if(i < 0) { minus = '-'; }
        i = Math.abs(i);
        var n = new String(i);
        var a = [];
        var cnt=0;
        while(n.length > 2)
        {
            if(cnt == 0)
            {
                var nn = n.substr(n.length-3);
                n = n.substr(0,n.length-3);
                cnt++;
            }
            else
            {
                var nn = n.substr(n.length-2);
                n = n.substr(0,n.length-2);
            }
            a.unshift(nn);
        }
        if(n.length > 0)
        {
            a.unshift(n);
        }
        n = a.join(delimiter);
        amount = n;
        amount = minus + amount;
        $(this).val(amount);
    });
}); 
```

这是 JSFiddle[链接](http://jsfiddle.net/46brx/2/)。（正如我所说，如果我在 Firefox 或 Opera 中打开此链接，则 js 可以工作，但不能在 Chrome 或 IE 中工作）。控制台上也没有js错误。我需要为 Chrome 和 IE 做一些特定的事情吗？

**编辑**

澄清一下，在 Chrome 和 IE 中没有触发的是 onChange 事件。Firefox 和 Opera 也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:26:58.710

我在 Chrome 上进行了测试，逗号做得很好，但我从未看到`underConstArea`更新，而在离开文本框后，我确实在 Firefox 上看到了更新。

我不确定那里发生了什么，但我有几种修复它的方法。

首先，似乎`$("#readyArea").on('change')`火灾是否取决于浏览器。我不知道为什么，但是当您更改代码时，Chrome 似乎不会引发更改事件。也许它是在试图避免无限循环的变化；我不太确定。

如果您对数字完成后的唯一更新感到满意`underConstArea`（因为它在 Firefox 中的行为），您可以这样做 on`focusout`而不是 on `change`。我将您的顶行更改为

```
$("#readyArea").on('focusout', function() {
    $("#underConstArea").val($(this).val());
}); 
```

它在 Chrome 和 Firefox 中对我来说效果很好。 [这](http://jsfiddle.net/46brx/3/)是一个更新的小提琴。

或者，如果您希望它在每次用户键入时更新，只需`underConstArea`在您的`commaFormatted`函数中更新。只需添加

```
$("#underConstArea").val(amount); 
```

在你的功能的底部。以及我提供的第二个选项的[链接。](http://jsfiddle.net/46brx/5/)请注意，我删除了所有在`#readyArea`.

# html - 空间表跨越

> ID：15886695
> 
> 赞同：-2
> 
> 时间：2013-04-08T18:51:42.767
> 
> 标签：html, html-table

我正在尝试创建一个像这样的表：2 行和 2 列是“跨越”的，以创建 3 个合并单元格。

我该怎么做呢？

![表格示例](https://i.stack.imgur.com/wop0L.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T18:58:18.323

这是执行此操作的基本思想。您可以通过`colspan`财产来执行此操作。

```
<table width="100%">
    <tr>
        <td style="background-color:green"></td>
        <td style="background-color:Red"></td></tr>
    <tr>
        <td style="background-color:green" colspan="2"></td></tr>
</table> 
```

# c - 测试多个阵列元素

> ID：15886701
> 
> 赞同：1
> 
> 时间：2013-04-08T18:52:03.663
> 
> 标签：c, arrays

试图弄清楚如何编写一个程序来检查数组中的每个元素以查看它是否是：

1.  小于 65

2.  等于或大于 65 但小于 70

3.  等于或大于 70 但小于 80

4.  等于或大于 80 但小于 90

5.  等于或大于 90

然后我还必须显示每个类别中有多少元素，但我很确定我可以自己弄清楚这部分。

目前，除了单独测试数组的每个元素之外，我想不出任何方法来测试它，但这似乎并不正确。

数组初始化如下：

```
double grades[3][6];
grades[0][0] = 55.0;
grades[0][1] = 65.0;
grades[0][2] = 72.0;
grades[0][3] = 77.0;
grades[0][4] = 80.0;
grades[0][5] = 90.0;

grades[1][0] = 99.0;
grades[1][1] = 65.0;
grades[1][2] = 70.0;
grades[1][3] = 71.0;
grades[1][4] = 87.0;
grades[1][5] = 81.0;

grades[2][0] = 66.0;
grades[2][1] = 53.0;
grades[2][2] = 69.9;
grades[2][3] = 89.9;
grades[2][4] = 81.9;
grades[2][5] = 103.5; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:56:31.527

> 除了单独测试数组的每个元素之外，我想不出任何方法来测试它

是的，如果您发现自己完成了一项任务，那是完全一样的，一遍又一遍，您很可能应该进入循环。

像这样测试多维数组中每个元素的最简单方法是使用嵌套的 for 循环：

```
for(int i = 0; i < 3, i++)
    for(int j = 0; j<6; j++)
    {
        if(grades[i][j] < 65)
           // do lt 65 stuff
        else if(grades[i][j] < 70)
           // do 65-70 stuff
        // ...
        else
           // do 90+ stuff
    } 
```

# cocos2d-iphone - 如何使用 cocos2d 和 box2d 像在 LIMBO 游戏中那样创造水？

> ID：15886703
> 
> 赞同：3
> 
> 时间：2013-04-08T18:52:06.047
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我以前见过这个，做我的研究我发现，如果你在 box2d 中创建分配的圆圈对象，然后应用颜色，然后模糊它，最后稍微锐化一点（同样的阶梯，比如“我的在哪里迪士尼制作的“水”游戏）。

但当然，在像 Limbo 这样的游戏中，拥有巨大的世界，这是极其昂贵的。由于我在互联网上的一些游戏中看到了这一点，我仍然试图了解如何使用 box2d 构建它？（互联网上的游戏是在 Flash 中创建的，我想在 iOS 平台的 cocos2d 中完成）

一些关于水如何工作的例子，对于那些没有玩过 Limbo 游戏的人： 1.一个盒子会在水面上流动，盒子会进入水中只有一半，盒子的一半会留在上面水。如果一个物体（比如：玩家）会掉到它上面，盒子就会有泰坦尼克号的末端，它会下沉。

2.石头会下沉。

3.玩家，我猜这里会有不同的选择。

4.A 船，因为我知道 bool 应该可以解决问题，`BOOL canSink;`但我又应该如何制作那种水效果？平衡上面的物体，如果物体落入水中会弹跳，以及下沉较慢的速度？

它可能看起来像很多问题，但最后只是“如何在box2d中创建水效果？”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T19:33:34.583

我猜你正在寻找浮力效应，这里有一些有趣的资源。-

[http://www.iforce2d.net/b2dtut/buoyancy](http://www.iforce2d.net/b2dtut/buoyancy) [http://personal.boristhebrave.com/project/b2buoyancycontroller/demo](http://personal.boristhebrave.com/project/b2buoyancycontroller/demo)

至于水波效果，大家可以看看。-

[http://www.sideroller.com/wck/?f=6](http://www.sideroller.com/wck/?f=6)
[http://www.cocos2d-iphone.org/forum/topic/25494](http://www.cocos2d-iphone.org/forum/topic/25494)

希望能帮助到你。

# android - “没有为此目标安装系统映像”，即使安装了映像

> ID：15886706
> 
> 赞同：53
> 
> 时间：2013-04-08T18:52:24.390
> 
> 标签：android, eclipse, avd

![SDK 管理器](https://i.imgur.com/PSb32th.jpg)

所以我正在尝试创建一个 AVD 模拟器，并且在尝试创建 4.2.2 系统时，即使安装了映像，我仍然收到“没有为此目标安装系统映像”错误（参见 SDK 管理器的图片）。

我的系统是 x64，这有什么不同吗？

![日食错误](https://i.imgur.com/FP9Bxxt.jpg)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-03-05T11:09:38.317

在 SDK 更新之后，我在 API 级别 19 上遇到了同样的问题，在我的情况下，重新启动 eclipse 并没有解决它。

出于某种原因，在`sdk/system-images/android-19`目录中，带有系统映像（armeabi-v7a 和 x86）的子文件夹被放置在`"default"`目录中。我只是将它们移到`android-19`目录中（如果同时运行 eclipse，则必须重新启动它）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-08T19:07:50.073

您只需要重新启动这些工具。我以前见过这个错误。重新启动后将显示适当的安装图像。

您也可以尝试在“包”菜单中刷新，但最简单的方法是重新启动工具。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-03-10T10:25:40.083

转到**sdk\system-images**并打开您正在使用的当前 API 的文件夹（例如，在您的情况下**为 android-19**文件夹）。现在您将找到一个名为**'default'**的文件夹，打开它，您将看到名为**'armeabi-v7a'**的文件夹或您安装的任何系统映像。现在将文件夹**“armeabi-v7a”**移动到目录**sdk\system-images** ...即从**“默认”**文件夹中移出。

而已。我有同样的问题，这种方法对我有用。:D

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-13T19:16:27.490

我重新启动eclipse。它对我有用，问题已解决。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-09T04:40:52.157

我刚遇到同样的问题。我的问题是通过杀死 eclipse (Command + Q) 解决的，因为我是 Mac 用户。因此，如果您在其他操作系统下，请务必终止 Eclipse 的进程并重新启动它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-08T15:09:18.990

这里有很多可能有用的答案，但没有一个对我有用。

在我的 Mac 上，我安装了 Android Studio 和 Visual Studio。人们希望他们会自动在同一个地方寻找 Android SDK，但不，不一定。

在 Android Studio 中，转到工具 -> Android -> SDK 管理器。在弹出的窗口中，记下 Android SDK Location。它应该是这样的

> /用户/[用户]/库/Android/sdk

接下来，在 Visual Studio 中，转到工具 -> SDK 管理器。在弹出的窗口中，左侧应该选择的路径是 Projects -> SDK Location -> Android。在右侧，单击位置选项卡。对我来说，Android SDK 位置路径设置为类似

> /Users/[user]/Library/Developer/Xamarin/android-sdk-macosx

我将其更改为 Android Studio 使用的路径，这为我解决了问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-20T19:22:54.180

当我在谷歌上搜索相同的错误时发现了这个线程。

所以我只想补充一点，如果有人遇到这个线程，但你使用的是**Android Studio**。您只需重新启动 Android Studio。我做到了，现在我可以看到我安装了什么。

![在此处输入图像描述](https://i.stack.imgur.com/tywzP.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-12T08:32:51.493

很简单。我重新启动了 Eclipse，重新加载了我的项目，当创建一个新的模拟器时，问题就消失了

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-24T12:38:01.300

确保您有权`android-sdk-linux`使用以下目录中的所有文件：

```
sudo chown $USER -R ./android-sdk-linux 
```

# jquery - 具有自动完成 Jquery UI 集成的类别

> ID：15886710
> 
> 赞同：0
> 
> 时间：2013-04-08T18:52:29.003
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete, categories

我想将类别添加到自动完成小部件的搜索结果中，例如[http://jqueryui.com/autocomplete/#categories](http://jqueryui.com/autocomplete/#categories)但我无法弄清楚如何将代码集成到下面的工作代码中。

```
 <script> 
        $(function() {
            function split( val ) {
              return val.split( /,\s*/ );
            }
            function extractLast( term ) {
              return split( term ).pop();
            }

            $( "#search" )
              // don't navigate away from the field on tab when selecting an item
              .bind( "keydown", function( event ) {
                if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "ui-autocomplete" ).menu.active ) {
                  event.preventDefault();
                }
              })
              .autocomplete({
                source: function( request, response ) {
                    console.log(request);
                    console.log(response);
                    console.log(extractLast(request.term));
                  $.getJSON( "http://192.168.33.10/app_dev.php/search/query/" + extractLast( request.term ), {
                    term: extractLast( request.term )
                  }, response );
                },
                search: function() {
                  // custom minLength
                  var term = extractLast( this.value );
                  if ( term.length < 2 ) {
                    return false;
                  }
                },
                focus: function() {
                  // prevent value inserted on focus
                  return false;
                },
                select: function( event, ui ) {
                    window.location = ("http://192.168.33.10/" + ui.item.link);
                }
              });
        });
    </script>

    <div class="ui-widget">
        <label for="search">Search</label>
        <input type="text" id="search" />
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:22:42.377

假设您`item.category`在 json 中返回，那么我认为这应该让您非常接近您想要的位置。- 从示例中获取 css 或创建自己的 css。

*   为 rendermenu 内容添加自定义 catcomplete
*   使用它而不是自动完成

代码：

```
$(function () {
    $.widget("custom.catcomplete", $.ui.autocomplete, {
        _renderMenu: function (ul, items) {
            var that = this,
                currentCategory = "";
            $.each(items, function (index, item) {
                if (item.category != currentCategory) {
                    ul.append("<li class='ui-autocomplete-category'>" + item.category + "</li>");
                    currentCategory = item.category;
                }
                that._renderItemData(ul, item);
            });
        }
    });

    function split(val) {
        return val.split(/,\s*/);
    }

    function extractLast(term) {
        return split(term).pop();
    }

    $("#search")
    // don't navigate away from the field on tab when selecting an item
    .bind("keydown", function (event) {
        if (event.keyCode === $.ui.keyCode.TAB && $(this).data("ui-autocomplete").menu.active) {
            event.preventDefault();
        }
    })
        .catcomplete({
        source: function (request, response) {
            console.log(request);
            console.log(response);
            console.log(extractLast(request.term));
            $.getJSON("http://192.168.33.10/app_dev.php/search/query/" + extractLast(request.term), {
                term: extractLast(request.term)
            }, response);
        },
        search: function () {
            // custom minLength
            var term = extractLast(this.value);
            if (term.length < 2) {
                return false;
            }
        },
        focus: function () {
            // prevent value inserted on focus
            return false;
        },
        select: function (event, ui) {
            window.location = ("http://192.168.33.10/" + ui.item.link);
        }
    });
}); 
```

# php - cron kohana 3.3 cli 中的参数错误

> ID：15886711
> 
> 赞同：0
> 
> 时间：2013-04-08T18:52:32.487
> 
> 标签：php, cron, kohana

我收到此错误

> 参数错误：uri - uri 不是此任务的有效选项！

但我的命令看起来有效：

> php /var/www/public_html/index.php --uri=controller/action

我也试过（直接在这个文件夹中）

> php index.php --uri=控制器/动作
> 
> php index.php --uri="控制器/动作"

总是这个错误

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:44:32.733

Kohana 3.3 改变了它处理 CLI 执行的方式。从 3.3 开始，它使用 Minion 模块和`--uri`param 被删除`--task`，因此您必须创建任务（而不是控制器）。

更多文档： http: [//kohanaframework.org/3.3/guide/minion/tasks](http://kohanaframework.org/3.3/guide/minion/tasks)

请注意，文档有错误，不再`$_defaults`有，`$_options`而是有。查看[API 文档](http://kohanaframework.org/3.3/guide-api/Minion_Task)以获取更多详细信息。

# c# - 如果我停止 CryptoStream Read 我得到 Bad Data 异常

> ID：15886714
> 
> 赞同：1
> 
> 时间：2013-04-08T18:52:48.133
> 
> 标签：c#, dispose, cryptostream

我遇到了 CryptoStream 解密器的问题。我正在解密另一个线程上的文件。所以这里是问题：

当我让文件解密到最后时，一切都很好，但是当我停止线程，使用全局变量并退出 while 循环时

```
while( !stopThread && ( nBRead = csFile.Read(readbuf, 0, 8192)) != 0) 
```

我在`cryptostream Dispose()`.

我做错了什么？？

这是我的代码：

```
 string ext; 
            //textBox1.Text = "";

            OpenFileDialog ofdFile = new OpenFileDialog();
            if (textMode)
                ofdFile.Title = "Please select text to decrypt.";
            else
                ofdFile.Title = "Please select file to decrypt.";

            OpenFileDialog ofdKey = new OpenFileDialog();
            ofdKey.Title = "Please select KEY.";

            // mora ovo ili invoke koga nema dialog :)
            originalContex.Send(delegate
            {
                dialogRes    = ofdFile.ShowDialog();
                dialogResKey = ofdKey.ShowDialog();
            }, null);

            if ( dialogRes == DialogResult.OK && dialogResKey == DialogResult.OK )
            {
                FileStream fsKey = new FileStream(ofdKey.FileName, FileMode.Open);
                byte[] iv = new byte[8];
                byte[] key = new byte[24];
                byte[] extB = new byte[20]; 
                fsKey.Read(iv, 0, 8);
                fsKey.Read(key, 0, 24);
                fsKey.Read(extB, 0, 20); 
                fsKey.Dispose();

                FileStream fsOpenedFile = new FileStream(ofdFile.FileName, FileMode.Open, FileAccess.Read);
                CryptoStream csFile = new CryptoStream(fsOpenedFile, new TripleDESCryptoServiceProvider().CreateDecryptor(key, iv), CryptoStreamMode.Read);

                if (textMode)
                {
                    int readbuf;
                    List<byte> lb = new List<byte>();

                    while ((readbuf = csFile.ReadByte()) != -1)
                        lb.Add((byte)readbuf);

                    textBox1.Invoke( new MethodInvoker(() => { textBox1.Text = Encoding.UTF8.GetString(lb.ToArray()); }) );

                    prog.Invoke(new MethodInvoker(() => { prog.Value = 100; }));
                }                   
                else // filemode
                {
                    byte[] readbuf = new byte[8192];
                    ext = Encoding.UTF8.GetString(extB).Trim('\0'); 

                    string saveDir = Path.GetDirectoryName(ofdFile.FileName) + "\\" + Path.GetFileNameWithoutExtension(ofdFile.FileName) + "_DECRYPTED";
                    Directory.CreateDirectory( saveDir );
                    Directory.SetCurrentDirectory( saveDir );

                    FileStream fsDecrFile = new FileStream(Path.GetFileNameWithoutExtension(ofdFile.FileName)  + ext, FileMode.Create, FileAccess.Write);

                    FileInfo fi = new FileInfo(ofdFile.FileName);
                    long oneProc = fi.Length / 100;
                    int nBRead = 0;
                    long nBReadacc = 0;

                    while (   !stopThread  &&  ( nBRead = csFile.Read(readbuf, 0, 8192)) != 0  )
                    {
                        nBReadacc += nBRead;
                        fsDecrFile.Write(readbuf, 0, nBRead);

                        if (nBReadacc >= oneProc)
                        {
                            nBReadacc = 0;
                            prog.Invoke(new MethodInvoker(() => { prog.Value +=1; }));
                        }
                    }

                    try
                    {
                        csFile.Dispose();
                    }
                    catch (CryptographicException e)
                    {                        
                        MessageBox.Show(e.Message);
                    }

                   // MessageBox.Show(nBReadacc.ToString());

                    fsDecrFile.Flush();
                    fsDecrFile.Dispose();   

                    prog.Invoke(new MethodInvoker(() => { prog.Value = 100; }));                   
                }

                fsOpenedFile.Dispose(); 
                // csFile.CopyTo

            }

            ofdFile.Dispose();
            ofdKey.Dispose();            
        } 
```

# jquery - jQuery Dialog，将 href 作为图像源加载到对话框中

> ID：15886717
> 
> 赞同：1
> 
> 时间：2013-04-08T18:52:55.393
> 
> 标签：jquery, ajax, image, dialog, load

我正在尝试将图像打开到 jQuery 对话框中。当我单击 href 链接时，我想将此 href 加载到对话框中。

标记：

```
 <a href="www.blahblahblah.com/blah.jpg" class="slideshow_zoom">Link</a> 
```

jQuery代码：

```
$('.slideshow_zoom').each(function() {
    var $link = $(this);

    var $dialog = $('<div></div>')
         .load($link.attr('href'))
         .dialog({
               autoOpen: false,
               resizable: false,
               modal: true,
               width: 1000,
               closeOnEscape: true,
               dialogClass:'zoom'
            });

        $link.click(function() {
            $dialog.dialog('open');

            return false;
    });
}); 
```

此标记和 jquery 代码仅生成一个对话框，其中没有任何内容。我猜它实际上并没有加载href ...或者可能是href需要更改为图像src才能被查看。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:04:00.157

只需调用以下`.dialog()`方法`img`：

```
var $dialog = $('<img src="' + $link.attr('href') + '" />')
    .dialog({
        autoOpen: false,
        resizeable: false,
        modal: true,
        width: 1000,
        closeOnEscape: true,
        dialogClass: 'zoom'
    }); 
```

# c# - 如何获取列表框选定索引的值

> ID：15886725
> 
> 赞同：0
> 
> 时间：2013-04-08T18:53:28.063
> 
> 标签：c#, listbox, sql-server-express, population

```
string KaloriSorgusu = "use FoodDB select drink_kal from Drinks";
SqlConnection baglanti2 = new SqlConnection("Data Source=" + IPFORM.ip.ToString() + "\\SQLEXPRESS;Initial Catalog=UserDB;User Id=Levent; Password=21012101;Trusted_Connection=False;Integrated Security=False");
 using (baglanti2)
 {
     using (SqlCommand KaloriKomutu = new SqlCommand(KaloriSorgusu, baglanti2))
     {
         baglanti2.Open();
         using (SqlDataReader KALORİokuyucu = KaloriKomutu.ExecuteReader())
         {
              while (KALORİokuyucu.Read())
              {
                  lb_Kalori.Items.Add(KALORİokuyucu.GetValue(0).ToString());
                  total = lb_Kalori.Items.Count;
              }
         }
     }
} 
```

此代码填充列表框，当我尝试从选定索引中获取值时，我似乎无法找到获取索引值的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:16:40.973

可能这个小片段会帮助你。

```
// Get the currently selected item in the ListBox. 
   string curItem = listBox1.SelectedItem.ToString();

 // Find the string in ListBox2\. 
  int index = listBox2.FindString(curItem);
 // If the item was not found in ListBox 2 display a message box, otherwise select it in        ListBox2\. 
 if(index == -1)
    MessageBox.Show("Item is not available in ListBox2");
 else
   listBox2.SetSelected(index,true);` 
```

# c++ - 继承类公共后默认私有设置是否启动

> ID：15886726
> 
> 赞同：0
> 
> 时间：2013-04-08T18:53:29.170
> 
> 标签：c++

```
class DerivedClass : public BaseClass {

    int _classMember1;
    int _classMember2;
  }; 
```

我知道一个类的默认访问是私有的，但我不知道当我从 BaseClass 公开继承时会发生什么。该公共访问权限是否也适用于 _classMember1 或 _classMember2 或者它们继续保持私有状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T18:55:07.270

它们仍然是私有的，因为默认情况下它们是私有的。公共继承不会使它们公开。否则，它违反封装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:58:53.140

派生类的私有成员保持为私有，无论它是否从基类继承为公共成员。

# gwt - 当用户单击对话框外的任何位置时，如何使对话框隐藏？

> ID：15886737
> 
> 赞同：2
> 
> 时间：2013-04-08T18:53:53.113
> 
> 标签：gwt, dialog

当用户单击对话框外的任何位置时，如何使对话框隐藏？

它是一个 GWT 应用程序，其中视图正在扩展对话框。我在对话框中有一个关闭按钮，它的 OnClicked 隐藏了对话框。但是，根据要求，如果用户单击对话框外的任何位置，它应该隐藏。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:25:37.367

使用构造函数[`DialogBox(boolean autoHide)`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/DialogBox.html#DialogBox%28boolean%29)或设置器[`setAutoHideEnabled(boolean autoHide)`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/PopupPanel.html#setAutoHideEnabled%28boolean%29)以在用户单击框外部时自动隐藏框。

您还可以使用[`setAutoHideOnHistoryEventsEnabled(boolean enabled)`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/PopupPanel.html#setAutoHideOnHistoryEventsEnabled%28boolean%29)设置器自动隐藏历史令牌更改。

# firefox - firefox插件面板隐藏

> ID：15886739
> 
> 赞同：2
> 
> 时间：2013-04-08T18:53:57.620
> 
> 标签：firefox, firefox-addon, add-on

我的插件打开一个弹出面板（popup.html）。

当用户将当前选项卡更改为不同的选项卡时，弹出面板被隐藏

当第二次选择选项卡时，我需要它**仍然可用**contentURL (popup.html)，但我确实找到了方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T16:02:51.633

您可以像这样创建面板：

```
<panel 
    id="yourPanel" 
    type="arrow"    
    noautohide="true"
    level="parent">      
</panel> 
```

解释：

**level = "parent"**表示面板显示在面板所在窗口的正上方，但在其上方的其他窗口之后。

**noautohide = "true"**`hidePopup`表示只有在调用该方法时面板才会关闭。

将这两者结合起来，您将获得您正在寻找的行为。

有关参考，请参阅[mdn 面板页面](https://developer.mozilla.org/en-US/docs/XUL/panel)

# html - 水平居中 div

> ID：15886740
> 
> 赞同：2
> 
> 时间：2013-04-08T18:53:59.687
> 
> 标签：html, css, position, alignment

我的页面布局：

```
div for header : position: fixed
div for sidebar: float: left              div for content: float:left
div for footer : position: fixed 
```

位置设置为这样，无论用户在滚动条的哪个位置，页脚和页眉始终可见。然而，侧边栏会随着页面滚动。

内容的 div 包含一个 ui:insert ，因此所有页面都在那里加载。现在在其中一个页面中，我希望内容在分配的空间内居中。为此目的，该页面的所有内容都放置在一个 div 中。无论窗口拉伸到什么大小，我必须使用什么样式才能使内容始终水平居中。我可以为 div 的宽度指定一个固定值。

我不能将位置设置为绝对或固定，因为它会破坏整体设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T18:59:29.957

对于固定宽度：

```
div.center {
    width: 300px;
    margin: 0 auto;
} 
```

对于动态宽度：

```
div.center {
    width: 50%;
    margin: 0 25%;
} 
```

JSFiddle 不工作，但我会尽快搞定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T18:59:51.770

如果我理解正确，如果指定了 div 的宽度，以下应该可以解决问题

```
div {margin: 0 auto;} 
```

# c# - SvnSharp 的 SvnLookClient 变更项动作说明

> ID：15886743
> 
> 赞同：0
> 
> 时间：2013-04-08T18:54:04.293
> 
> 标签：c#, svn, sharpsvn

SvnChangedEventArgs 的属性 Action 是 SvnChangeAction 枚举类型，但我找不到每个枚举值的含义。可能的值为无、添加、删除、修改和替换。

我测试并发现：

*   添加是添加新项目或者是移动或复制的目标。
*   已删除是指项目被删除或者是移动的来源。
*   替换是在修改项目并创建该项目的新修订时。

我可以假设 None 在由于 svnlook 参数而列出未更改的项目时使用。

我找不到修改值的解释。和替换一样吗？什么时候发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T18:29:22.870

*   修改是指文件的内容已被更改。
*   替换是文件本身已被另一个文件替换。
*   None 是什么都没有发生，这通常不应该发生。之所以出现在这里是因为它是[框架设计指南](http://blogs.msdn.com/b/kcwalina/archive/2004/05/18/134208.aspx)推荐的（搜索“none”）

# android - 将文件复制到另一个包文件夹（root、su）

> ID：15886744
> 
> 赞同：3
> 
> 时间：2013-04-08T18:54:10.853
> 
> 标签：android, root, chmod, su

我有我的应用程序包（com.my.package），我希望能够将一些文件（a.txt、b.txt 和 c.txt）复制到另一个包（data/data/com.another.package） /文件）。现在我尝试了一些我发现的东西，但没有一个奏效。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T18:58:11.673

您需要获取运行时并使用该`cat`命令。

```
Runtime.getRuntime().exec("su cat filepath1 > filepath2"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-18T11:09:38.110

```
Runtime.getRuntime().exec("su cat filepath1 > filepath2"); 
```

也为我创建了一个空文件。我必须`su -c`改用

```
Runtime.getRuntime().exec("su -c cat filepath1 > filepath2"); 
```

# facebook - 如何将应用程序的数据添加到用户的默认部分？

> ID：15886745
> 
> 赞同：1
> 
> 时间：2013-04-08T18:54:12.097
> 
> 标签：facebook, collections

在[https://developers.facebook.com/docs/opengraph/guides/collections/#datatodefaultsections](https://developers.facebook.com/docs/opengraph/guides/collections/#datatodefaultsections)它说：

> 有一种方法可以建议人们直接将您应用的数据添加到他们的部分。最好用一个例子来描述。如果您是 rdio，您可以建议将 rdio 的 music.listens 数据添加到音乐部分，如下所示：
> 
> [https://www.facebook.com/me/music?rdiomusic](https://www.facebook.com/me/music?rdiomusic)
> 
> /me 是指人的特殊快捷方式，music 是音乐的特殊部分，rdiomusic 是 rdio 的应用程序名称空间。（可以在应用程序仪表板设置的基本选项卡中找到应用程序命名空间。）

此功能似乎并未对所有开发人员启用或可用。当尝试使用我自己的应用程序和一个部分（电影、音乐、书籍）来执行上述 URL 结构时，没有机会将其添加到所描述的这些部分中。

为什么不？此功能是否尚未上线/所有人都可以使用？

# iphone - 表视图无法正常工作。

> ID：15886748
> 
> 赞同：0
> 
> 时间：2013-04-08T18:54:18.747
> 
> 标签：iphone, ios, objective-c, ipad, uitableview

我正在尝试务实地创建一个表格视图（没有 xib 也没有情节提要），但是食物数组根本没有出现在表格视图中。我将在视图控制器中发布我的所有代码。

视图控制器.h

```
 @interface searchViewController :     ViewController<UITextFieldDelegate,UISearchBarDelegate,UITableViewDataSource>{
  NSMutableArray * getterms;
}

 @property (strong, nonatomic) NSMutableArray* allTableData;
 @property (strong, nonatomic) NSMutableArray* filteredTableData;
 @property (nonatomic, assign) bool isFiltered;
 @property (nonatomic, retain) UITableView *tableView; 
```

视图控制器.m

```
 -(void)viewDidLoad{
   UITableView *tableView = [[UITableView alloc] initWithFrame:CGRectMake(10.0, 10.0, 1000.0, 200.0) style:UITableViewStylePlain];
[self.view addSubview:tableView];
  self.tableView.dataSource = self;

     allTableData = [[NSMutableArray alloc] initWithObjects:
                [[Food alloc] initWithName:@"Steak" andDescription:@"Rare"],
                [[Food alloc] initWithName:@"Steak" andDescription:@"Medium"],
                [[Food alloc] initWithName:@"Salad" andDescription:@"Caesar"],
                [[Food alloc] initWithName:@"Salad" andDescription:@"Bean"],
                [[Food alloc] initWithName:@"Fruit" andDescription:@"Apple"],
                [[Food alloc] initWithName:@"Potato" andDescription:@"Baked"],
                [[Food alloc] initWithName:@"Potato" andDescription:@"Mashed"],
                [[Food alloc] initWithName:@"Bread" andDescription:@"White"],
                [[Food alloc] initWithName:@"Bread" andDescription:@"Brown"],
                [[Food alloc] initWithName:@"Hot Dog" andDescription:@"Beef"],
                [[Food alloc] initWithName:@"Hot Dog" andDescription:@"Chicken"],
                [[Food alloc] initWithName:@"Hot Dog" andDescription:@"Veggie"],
                [[Food alloc] initWithName:@"Pizza" andDescription:@"Pepperonni"],
                nil ];
           }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *MYCellIdentifier = @"MyCellIdentifier";

UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:MYCellIdentifier];
if (cell == nil)
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:MYCellIdentifier];

Food* food;
if(isFiltered)
    food = [filteredTableData objectAtIndex:indexPath.row];
else
    food = [allTableData objectAtIndex:indexPath.row];

cell.textLabel.text = food.name;
cell.detailTextLabel.text = food.description;

return cell;

  }
    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
   {
return 1;
   }

     - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
int rowCount;
if(self.isFiltered)
    rowCount = filteredTableData.count;
else
    rowCount = allTableData.count;

return rowCount;
 }

    - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

if (self) {

}
return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T18:56:01.067

看起来你从来没有将你的表格视图分配给你的控制器，添加

```
self.tableView = tableView 
```

作为第二行`viewDidLoad`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:02:58.537

您需要设置 tableView 的委托。

来自[苹果的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UITableView)：

> UITableView 对象**必须有**一个充当数据源**的对象和一个充当委托的对象**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:39:36.517

确保 cellForRowAtIndexPath 实际被调用（使用 NSlog 或断点检查），如果没有，则您尚未将 UITableViewController 的 tableView 设置为它正在控制的 tableView，或者您尚未设置 dataSource Delegate。

# python - Python，从列表列表中获取索引

> ID：15886751
> 
> 赞同：5
> 
> 时间：2013-04-08T18:54:27.540
> 
> 标签：python, list, indexing

我有一个字符串列表列表，如下所示：

```
l = [['apple','banana','kiwi'],['chair','table','spoon']] 
```

给定一个字符串，我想要它在 l 中的索引。尝试使用 numpy，这就是我最终得到的结果：

```
import numpy as np
l = [['apple','banana','kiwi'],['chair','table','spoon']]
def ind(s):
    i = [i for i in range(len(l)) if np.argwhere(np.array(l[i]) == s)][0]
    j = np.argwhere(np.array(l[i]) == s)[0][0]
    return i, j
s = ['apple','banana','kiwi','chair','table','spoon']
for val in s:
    try:
        print val, ind(val)
    except IndexError:
        print 'oops' 
```

这对苹果和椅子来说失败了，得到一个索引错误。另外，这对我来说看起来很糟糕。这样做有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:08:09.747

返回包含 (outer list index, inner list index) 的元组列表，设计为您要查找的项目可以在多个内部列表中：

```
l = [['apple','banana','kiwi'],['chair','table','spoon']]
def findItem(theList, item):
   return [(ind, theList[ind].index(item)) for ind in xrange(len(theList)) if item in theList[ind]]

findItem(l, 'apple') # [(0, 0)]
findItem(l, 'spoon') # [(1, 2)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:17:43.803

如果你想使用 numpy，你不需要自己动手：

```
import numpy as np
l = np.array([['apple','banana','kiwi'],['chair','table','spoon']])
s = ['apple','banana','kiwi','chair','table','spoon']

for a in s:
    arg = np.argwhere(l==a)
    print a, arg, tuple(arg[0]) if len(arg) else None 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:01:05.543

```
l = [['apple','banana','kiwi'],['chair','table','spoon']]
def search(lst, item):
    for i in range(len(lst)):
        part = lst[i]
        for j in range(len(part)):
            if part[j] == item: return (i, j)
    return None 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T19:02:02.057

我会创建一个字典来将项目映射到它们的索引：

```
>>> import numpy as np
>>> l = [['apple','banana','kiwi'],['chair','table','spoon']]
>>> a = np.array(l,dtype=object)
>>> a
array([[apple, banana, kiwi],
       [chair, table, spoon]], dtype=object)
>>> d = {s:idx for (idx),s in np.ndenumerate(a)}
>>> d['apple']
(0, 0)
>>> d['chair']
(1, 0) 
```

`numpy`+`ndenumerate`非常适合创建索引，但绝对没有必要。当然，如果您可以创建一次索引，然后将其重新用于后续搜索，这将是最有效的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T19:03:10.493

一种方法是利用`enumerate`：

```
l = [['apple','banana','kiwi'],['chair','table','spoon']]
s = ['apple','banana','kiwi','chair','table','spoon']

for a in s:
    for i, ll in enumerate(l):
        for j, b in enumerate(ll):
            if a == b:
                print a, i, j 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-08T19:25:28.673

在计算 i 的行中，如果将 argwhere 应用于整个列表，而不是每个子列表，那么您已经有了答案。无需再次搜索 j。

```
def ind(s):
    match = np.argwhere(np.array(l == s))
    if match:
        i, j = match[0]
    else:
        return -1, -1 
```

这将返回您正在搜索的字符串第一次出现的索引。

此外，您可能会考虑随着问题复杂性的增加，此方法会受到怎样的影响。此方法将遍历列表的每个元素，因此运行时成本会随着列表变大而增加。因此，如果您尝试在列表中查找的测试字符串的数量也增加了，您可能需要考虑使用字典创建一次查找表，那么后续搜索测试字符串的成本会更低。

```
def make_lookup(search_list):
    lookup_table = {}
    for i, sublist in enumerate(list):
        for j, word in enumerate(sublist):
            lookup_table[word] = (i, j)
    return lookup_table

lookup_table = make_lookup(l)

def ind(s):
    if s in lookup_table:
        return lookup_table[s]
    else:
        return -1, -1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-10T08:57:18.270

要在 python 中获取列表列表的索引：

```
theList = [[1,2,3], [4,5,6], [7,8,9]]
for i in range(len(theList)):
    if 5 in theList(i):
        print("[{0}][{1}]".format(i, theList[i].index(5))) #[1][1] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-21T08:29:49.490

此解决方案将找到您要搜索的字符串的所有匹配项：

```
l = [['apple','banana','kiwi','apple'],['chair','table','spoon']]

def findItem(theList, item):
       return [(i, j) for i, line in enumerate(theList)
               for j, char in enumerate(line) if char == item]

findItem(l, 'apple') # [(0, 0), (0, 3)]
findItem(l, 'spoon') # [(1, 2)] 
```

# php - 如何用 jqueryui.com 的自定义标签进度条替换任何进度条？

> ID：15886754
> 
> 赞同：-2
> 
> 时间：2013-04-08T18:54:39.263
> 
> 标签：php, jquery

我在下面有一个多文件上传代码。我想要做的是我想用来自 jqueryui.com 的自定义标签进度条替换这段代码中的进度条。我真的不知道我该怎么做。谁能帮忙？这是代码：

```
<!doctype html>
<head>
<title>File Upload Progress Demo #2</title>
<style>
body { padding: 30px }
form { display: block; margin: 20px auto; background: #eee; border-radius: 10px; padding: 15px }

.progress { position:relative; width:400px; border: 1px solid #ddd; padding: 1px; border-radius: 3px; }
.bar { background-color: #B4F5B4; width:0%; height:20px; border-radius: 3px; }
.percent { position:absolute; display:inline-block; top:3px; left:48%; }
</style>
</head>
<body>
    <h1>File Upload Progress Demo #2</h1>
    <code>&lt;input type="file" name="myfile[]" multiple></code>
    <form action="file-echo2.php" method="post" enctype="multipart/form-data">
        <input type="file" name="myfile[]" multiple><br>
        <input type="submit" value="Upload File to Server">
    </form>

    <div class="progress">
        <div class="bar"></div >
        <div class="percent">0%</div >
    </div>

    <div id="status"></div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script>
<script src="http://malsup.github.com/jquery.form.js"></script>
<script>
(function() {

var bar = $('.bar');
var percent = $('.percent');
var status = $('#status');

$('form').ajaxForm({
    beforeSend: function() {
        status.empty();
        var percentVal = '0%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    uploadProgress: function(event, position, total, percentComplete) {
        var percentVal = percentComplete + '%';
        bar.width(percentVal)
        percent.html(percentVal);
        //console.log(percentVal, position, total);
    },
    success: function() {
        var percentVal = '100%';
        bar.width(percentVal)
        percent.html(percentVal);
    },
    complete: function(xhr) {
        status.html(xhr.responseText);
    }
}); 

})();       
</script>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
<script type="text/javascript">
_uacct = "UA-850242-2";
urchinTracker();
</script> 
```

这是上传文件的PHP脚本：

```
<?php
foreach($_FILES as $file) {
   $n = $file['name'];
    $s = $file['size'];
   if (is_array($n)) {
      $c = count($n);
      for ($i=0; $i < $c; $i++) {
         echo "<br>uploaded: " . $n[$i] . " (" . $s[$i] . " bytes)";
      }
   }
   else
      echo "<br>uploaded: $n ($s bytes)";
}
?> 
```

这是自定义标签进度条的代码：

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Progressbar - Custom Label</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <style>
  .progress-label {
    float: left;
    margin-left: 50%;
    margin-top: 5px;
    font-weight: bold;
    text-shadow: 1px 1px 0 #fff;
  }
  </style>
  <script>
  $(function() {
    var progressbar = $( "#progressbar" ),
      progressLabel = $( ".progress-label" );

    progressbar.progressbar({
      value: false,
      change: function() {
        progressLabel.text( progressbar.progressbar( "value" ) + "%" );
      },
      complete: function() {
        progressLabel.text( "Complete!" );
      }
    });

    function progress() {
      var val = progressbar.progressbar( "value" ) || 0;

      progressbar.progressbar( "value", val + 1 );

      if ( val < 99 ) {
        setTimeout( progress, 100 );
      }
    }

    setTimeout( progress, 3000 );
  });
  </script>
</head>
<body>

<div id="progressbar"><div class="progress-label">Loading...</div></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T03:20:13.447

你可以试试“如果”。

```
if(percentVal == 50);){
percent.html("you´re text here.");
} 
```

您可以创建另一个 HTML 标记并对百分比变量执行相同的操作。

```
var uploadText = document.getElementById(".newTag") or $('.newTag');
if(percentVal == 50);){
uploadText.html("you´re text here.");
} 
```

# asp.net-mvc - MVC 模型绑定子类对象属性填充字符串数组

> ID：15886757
> 
> 赞同：3
> 
> 时间：2013-04-08T18:54:42.523
> 
> 标签：asp.net-mvc, model-binding

我有一个基本视图模型，其 Id 类型为 object 属性（因此我可以让它成为 int 或 Guid），如下所示：

```
public abstract class BaseViewModel
{
    public virtual object Id { get; set; }
} 
```

因此，视图模型由此派生

```
public class UserViewModel : BaseViewModel
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

然后我的 HTML 呈现为：

```
<input id="Id" name="Id" type="hidden" value="240" />
<input id="FirstName" name="FirstName" type="text" value="John" /> 
<input id="LastName " name="LastName " type="text" value="Smith" /> 
```

当提交给 MVC 动作时：

```
 [HttpPost]
    public ActionResult EditUser(UserViewModel model)
    {
       ...code omitted...
    } 
```

模型属性的值为：

```
Id: string[0] = "240"
FirstName: string = "John"
LastName: string = "Smith" 
```

我的问题是，为什么我得到**一个单项字符串数组**作为**Id**的值，而不仅仅是一个字符串？有没有办法改变这种行为？当我尝试将其解析为预期的类型时，它会导致问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:23:58.737

我最终使用自定义模型绑定器解决了这个问题，该绑定器将“Id”对象属性作为特例处理：

```
public class CustomModelBinder : DefaultModelBinder
{
    protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor)
    {
        // apply the default model binding first to leverage the build in mapping logic
        base.BindProperty(controllerContext, bindingContext, propertyDescriptor);

        // since "Id" is a special property on BaseViewModel of type object, 
        // we need to figure out what it should be and parse it appropriately
        if (propertyDescriptor.Name == "Id" && propertyDescriptor.PropertyType == typeof(object))
        {
            // get the value that the default binder applied
            var defaultValue = propertyDescriptor.GetValue(bindingContext.Model);

            // this should be a one element string array
            if (defaultValue is string[])
            {
                var defaultArray = defaultValue as string[];

                // extract the first element of the array (the actual value of "Id")
                var propertyString = defaultArray[0];
                object value = propertyString;

                // try to convert the ID value to an integer (the most common scenario)
                int intResult;
                if (int.TryParse(propertyString, out intResult))
                {
                    value = intResult;
                }
                else
                {
                    // try to convert the ID value to an Guid
                    Guid guidResult;
                    if (Guid.TryParse(propertyString, out guidResult)) value = guidResult;
                }

                // set the model value
                propertyDescriptor.SetValue(bindingContext.Model, value);
            }

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:17:26.947

问题在于将您的 id 属性键入为`object`- 不确定默认绑定应该如何在这里工作，但由于一个对象可能是任何东西 - 就像一个本身具有多个属性的复杂对象 - 也许它会尝试转储所有它在数组中找到的属性？

如果`Id`不总是整数，我建议将其输入为字符串，因为模型绑定机制应该没有问题将通过 HTTP 发送的几乎所有内容映射为字符串，所以：

```
public abstract class BaseViewModel
{
    public virtual string Id { get; set; }
} 
```

# c# - DependencyProperty 未在 NotifyCollectionChanged 事件上通知 UI

> ID：15886762
> 
> 赞同：2
> 
> 时间：2013-04-08T18:55:23.060
> 
> 标签：c#, wpf, xaml, silverlight-5.0

我正在使用具有选定项依赖属性的自定义控件，我已经连接了集合更改事件，但未通知 UI 并且 PropertyChanged 事件始终为空。通常我会说这是一个数据上下文问题。但我无法更改控件上的数据上下文，因为不会显示任何数据。

```
 public ObservableCollection<object> SelectedItems
    {
        get { return (ObservableCollection<object>)GetValue(SelectedItemsProperty); }
        set { SetValue(SelectedItemsProperty, value); }
    }

    // Using a DependencyProperty as the backing store for SelectedItems.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty SelectedItemsProperty =
        DependencyProperty.RegisterAttached("SelectedItems", typeof(ObservableCollection<object>), 
        typeof(MultiSelectComboBox), 
        new System.Windows.PropertyMetadata(new ObservableCollection<object>(), new PropertyChangedCallback(SelectedItemsPropertyChanged)));

    private static void SelectedItemsPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        MultiSelectComboBox relay = d as MultiSelectComboBox;
        if (e.OldValue != null)
        {
            var coll = (INotifyCollectionChanged)e.OldValue;
            coll.CollectionChanged -= relay.SelectedItemsCollectionChanged;
        }
        if (e.NewValue != null)
        {
            var coll = (INotifyCollectionChanged)e.NewValue;
            coll.CollectionChanged += relay.SelectedItemsCollectionChanged;
        }
    } 
```

上面是它在 xaml 中绑定到 ViewModel 上的 ObservableCollection 的属性声明。我错过了什么。该控件实现 INotifyPropertyChanged。

我在下面添加了更多代码。这是原始代码，我想将相同的属性更改为依赖属性以绑定到集合目的。

```
 namespace Kepler.SilverlightControls.MultiSelectComboBox
    {
/// <summary>
/// MultiSelect ComboBox
/// </summary>
public class MultiSelectComboBox : Telerik.Windows.Controls.RadComboBox,    INotifyPropertyChanged
{
    #region Events

    /// <summary>
    /// Est appelé quand une propriété change
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

    #endregion

    #region Constructor

    /// <summary>
    /// Initializes a new instance of MultiSelectComboBox
    /// </summary>
    public MultiSelectComboBox()
    {
        ClearSelectionButtonVisibility = Visibility.Collapsed;

        string xaml = @"<DataTemplate 
            xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation""
            xmlns:x=""http://schemas.microsoft.com/winfx/2006/xaml""
            xmlns:local=""clr-namespace:Kepler.SilverlightControls.MultiSelectComboBox;assembly=Kepler.SilverlightControls"">
            <TextBlock TextWrapping=""Wrap"" local:MultiSelectComboBoxService.SelectionBoxLoaded=""True"" />
            </DataTemplate>";

        var selectionBoxTemplate = (DataTemplate)XamlReader.Load(xaml);
        SelectionBoxTemplate = selectionBoxTemplate;
        EmptySelectionBoxTemplate = selectionBoxTemplate;

        xaml = @"<DataTemplate 
            xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation""
            xmlns:x=""http://schemas.microsoft.com/winfx/2006/xaml""    
            xmlns:local=""clr-namespace:Kepler.SilverlightControls.MultiSelectComboBox;assembly=Kepler.SilverlightControls"">
            <CheckBox local:MultiSelectComboBoxService.ComboBoxItemLoaded=""True"" 
                IsChecked=""{Binding Path=(local:MultiSelectComboBoxService.IsChecked), Mode=TwoWay, RelativeSource={RelativeSource Self}}"" />
            </DataTemplate>";
        ItemTemplate = (DataTemplate)XamlReader.Load(xaml);
    }

    #endregion

    #region Propriétés

    /// <summary>
    /// IsCheckedBindingPath Property
    /// </summary>
    public string IsCheckedBindingPath
    {
        get { return (string)GetValue(IsCheckedBindingPathProperty); }
        set { SetValue(IsCheckedBindingPathProperty, value); }
    }

    // Using a DependencyProperty as the backing store for IsCheckedBindingPath.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty IsCheckedBindingPathProperty =
        DependencyProperty.Register("IsCheckedBindingPath", typeof(string), typeof(MultiSelectComboBox), new PropertyMetadata(null, (obj, e) =>
        {
            Telerik.Windows.Controls.TextSearch.SetTextPath(obj, e.NewValue as string);
        }));

    /// <summary>
    /// DisplayBindingPath Property
    /// </summary>
    public static readonly DependencyProperty DisplayBindingPathProperty = DependencyProperty.Register(
       "DisplayBindingPath", typeof(string), typeof(MultiSelectComboBox), new PropertyMetadata(null, (obj, e) =>
       {
           Telerik.Windows.Controls.TextSearch.SetTextPath(obj, e.NewValue as string);
       }));
    /// <summary>
    /// Gets or sets the display member path (we can't reuse DisplayMemberPath property)
    /// </summary>
    public string DisplayBindingPath
    {
        get { return GetValue(DisplayBindingPathProperty) as string; }
        set { SetValue(DisplayBindingPathProperty, value); }
    }

    private ObservableCollection<object> _selectedItems;
    /// <summary>
    /// Gets the selected items
    /// </summary>
    public ObservableCollection<object> SelectedItems
    {
        get
        {
            if (_selectedItems == null)
            {
                _selectedItems = new ObservableCollection<object>();
                _selectedItems.CollectionChanged += new NotifyCollectionChangedEventHandler(SelectedItemsCollectionChanged);
            }
            return _selectedItems;
        }
    }

    private ObservableCollection<object> _selectedValues;
    /// <summary>
    /// Gets the selected values
    /// </summary>
    public ObservableCollection<object> SelectedValues
    {
        get
        {
            if (_selectedValues == null)
            {
                _selectedValues = new ObservableCollection<object>();
                _selectedValues.CollectionChanged += new NotifyCollectionChangedEventHandler(SelectedValuesCollectionChanged);
            }
            return _selectedValues;
        }
    }

    #endregion

    #region Methods

    /// <summary>
    /// Called when the Items property changed
    /// </summary>
    /// <param name="e">change informations</param>
    protected override void OnItemsChanged(NotifyCollectionChangedEventArgs e)
    {
        base.OnItemsChanged(e);

        int idx;
        var selectedItems = SelectedItems;

        switch (e.Action)
        {
            case NotifyCollectionChangedAction.Add:
            case NotifyCollectionChangedAction.Replace:
            case NotifyCollectionChangedAction.Reset:
                var items = e.NewItems;
                if (items == null)
                {
                    var selected = new List<object>();
                    foreach (var item in this.ItemsSource)
                    {
                        PropertyInfo isCheckedBindingPathProperty = this.IsCheckedBindingPath != null ? item.GetType().GetProperty(this.IsCheckedBindingPath) : null;
                        if (isCheckedBindingPathProperty != null
                            && (bool)isCheckedBindingPathProperty.GetValue(item,null) == true)
                        {
                            selected.Add(item);
                            SelectedValues.Add(item.GetType().GetProperty(SelectedValuePath).GetValue(item, null));
                        }
                    }
                    items = selected;
                }
                if (items != null)
                {
                    foreach (object value in SelectedValues)
                    {
                        foreach (object item in items)
                        {
                            if (GetSelectedValue(item).Equals(value) && !selectedItems.Contains(item))
                            {
                                selectedItems.Add(item);
                            }
                        }
                    } 
                }
                break;
            case NotifyCollectionChangedAction.Remove:
                foreach (object item in e.OldItems)
                {
                    idx = selectedItems.IndexOf(item);
                    if (idx >= 0)
                    {
                        selectedItems.RemoveAt(idx);
                    }
                }
                break;
        }
    }

    private void RemoveCollectionChangedEvents()
    {
        SelectedItems.CollectionChanged -= new NotifyCollectionChangedEventHandler(SelectedItemsCollectionChanged);
        SelectedValues.CollectionChanged -= new NotifyCollectionChangedEventHandler(SelectedValuesCollectionChanged);
    }

    private void AddCollectionChangedEvents()
    {
        SelectedItems.CollectionChanged += new NotifyCollectionChangedEventHandler(SelectedItemsCollectionChanged);
        SelectedValues.CollectionChanged += new NotifyCollectionChangedEventHandler(SelectedValuesCollectionChanged);
    }

    private void SelectedItemsCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (SelectedValuePath != null)
        {
            RemoveCollectionChangedEvents();
            try
            {
                switch (e.Action)
                {
                    case NotifyCollectionChangedAction.Add:
                        AddSelectedValues(e.NewItems);
                        break;
                    case NotifyCollectionChangedAction.Remove:
                        RemoveSelectedValues(e.OldItems);
                        break;
                    case NotifyCollectionChangedAction.Replace:
                        RemoveSelectedValues(e.OldItems);
                        AddSelectedValues(e.NewItems);
                        break;
                    case NotifyCollectionChangedAction.Reset:
                        SelectedValues.Clear();
                        foreach (object item in Items)
                        {
                            UpdateSelectedItem(item, false);
                        }
                        AddSelectedValues(e.NewItems);
                        break;
                }
            }
            finally
            {
                AddCollectionChangedEvents();
            }
        }
        RaiseSelectedItemsPropertyChanged();
    }

    private void RemoveSelectedValues(IList items)
    {
        foreach (var item in items)
        {
            SelectedValues.Remove(GetSelectedValue(item));
            UpdateSelectedItem(item, false);
        }
    }

    private void AddSelectedValues(IList items)
    {
        if (items != null)
        {
            object selectedValue;
            foreach (var item in items)
            {
                selectedValue = GetSelectedValue(item);
                if (!SelectedValues.Contains(selectedValue))
                {
                    SelectedValues.Add(selectedValue);
                }
                UpdateSelectedItem(item, true);
            }
        }
    }

    private object GetSelectedValue(object item)
    {
        return DataControlHelper.GetPropertyInfo(item.GetType(), SelectedValuePath).GetValue(item, null);
    }

    private void SelectedValuesCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        RemoveCollectionChangedEvents();
        try
        {
            switch (e.Action)
            {
                case NotifyCollectionChangedAction.Add:
                    AddSelectedItems(e.NewItems);
                    break;
                case NotifyCollectionChangedAction.Remove:
                    RemoveSelectedItems(e.OldItems);
                    break;
                case NotifyCollectionChangedAction.Replace:
                    RemoveSelectedItems(e.OldItems);
                    AddSelectedItems(e.NewItems);
                    break;
                case NotifyCollectionChangedAction.Reset:
                    var selectedItems = SelectedItems.ToList();
                    SelectedItems.Clear();
                    foreach (object item in selectedItems)
                    {
                        UpdateSelectedItem(item, false);
                    }
                    AddSelectedItems(e.NewItems);
                    break;
            }
        }
        finally
        {
            AddCollectionChangedEvents();
        }
        RaiseSelectedItemsPropertyChanged();
    }

    private void RaiseSelectedItemsPropertyChanged()
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs("SelectedItems"));
            // To update the selection box
        }
    }

    private void RemoveSelectedItems(IList values)
    {
        object item;
        foreach (var value in values)
        {
            item = SelectedItems.FirstOrDefault(e => GetSelectedValue(e).Equals(value));
            if (item != null)
            {
                SelectedItems.Remove(item);
                UpdateSelectedItem(item, false);
            }
        }
    }

    private void AddSelectedItems(IList values)
    {
        if (values != null)
        {
            object item;
            foreach (var value in values)
            {
                item = Items.FirstOrDefault(e => GetSelectedValue(e).Equals(value));
                if (item != null)
                {
                    SelectedItems.Add(item);
                    UpdateSelectedItem(item, true);
                }
            }
        }
    }

    private void UpdateSelectedItem(object item, bool select)
    {
        var obj = ItemContainerGenerator.ContainerFromItem(item);
        if (obj != null)
        {
            var cb = obj.FindChildByType<CheckBox>();
            if (cb != null && cb.IsChecked != select)
            {
                cb.IsChecked = select;
            }
        }
    }

    /// <summary>
    /// Create a new ComboBox item
    /// </summary>
    /// <returns>a new ComboBox item</returns>
    protected override DependencyObject GetContainerForItemOverride()
    {
        return new MultiSelectComboBoxItem(this);
    }

    protected override void OnKeyDown(System.Windows.Input.KeyEventArgs e)
    {
        base.OnKeyDown(e);
        IsDropDownOpen = true;
    }

    #endregion
} 
```

}

该服务等级如下：

```
 namespace Kepler.SilverlightControls.MultiSelectComboBox
    {
/// <summary>
/// Service for the MultiSelect comboBox
/// </summary>
public static class MultiSelectComboBoxService
{
    /// <summary>
    /// IsChecked property
    /// </summary>
    public static DependencyProperty IsCheckedProperty = DependencyProperty.RegisterAttached("IsChecked",
        typeof(bool), typeof(MultiSelectComboBoxService), new PropertyMetadata(false, (obj, e) =>
        {
            MultiSelectComboBoxItem comboBoxItem = obj.GetVisualParent<MultiSelectComboBoxItem>();
            if (comboBoxItem != null)
            {
                MultiSelectComboBox comboBox = comboBoxItem.ParentComboBox;
                var selectedItems = (IList)comboBox.SelectedItems;
                object item = comboBoxItem.DataContext;
                PropertyInfo isCheckedBindingPathProperty = item.GetType().GetProperty(comboBox.IsCheckedBindingPath);
                isCheckedBindingPathProperty.SetValue(item, e.NewValue,null);
                if ((bool)e.NewValue)
                {
                    if (!selectedItems.Contains(item))
                    {
                        selectedItems.Add(item);
                    }
                }
                else
                {
                    selectedItems.Remove(item);
                }
            }
        }));

    /// <summary>
    /// Gets a value indicating if the object is checked or not
    /// </summary>
    /// <param name="obj">DependencyObject</param>
    /// <returns>a value indicating if the object is checked or not</returns>
    public static bool GetIsChecked(DependencyObject obj)
    {
        return (bool)obj.GetValue(IsCheckedProperty);
    }

    /// <summary>
    /// Sets a value indicating if the object is checked or not
    /// </summary>
    /// <param name="obj">DependencyObject</param>
    /// <param name="value">the value indicating if the object is checked or not</param>
    public static void SetIsChecked(DependencyObject obj, bool value)
    {
        obj.SetValue(IsCheckedProperty, value);
    }

    /// <summary>
    /// SelectionBoxLoaded property called on SelectionBox load
    /// </summary>
    public static DependencyProperty SelectionBoxLoadedProperty = DependencyProperty.RegisterAttached("SelectionBoxLoaded",
        typeof(bool), typeof(MultiSelectComboBoxService), new PropertyMetadata(false, (obj, e) =>
        {
            TextBlock targetElement = obj as TextBlock;
            if (targetElement != null)
            {
                targetElement.Loaded += new RoutedEventHandler(targetElement_Loaded);
            }
        }));

    private static void targetElement_Loaded(object sender, RoutedEventArgs e)
    {
        TextBlock targetElement = (TextBlock)sender;
        targetElement.Loaded -= new RoutedEventHandler(targetElement_Loaded);
        MultiSelectComboBox comboBox = targetElement.GetVisualParent<MultiSelectComboBox>();
        if (comboBox != null)
        {
            targetElement.SetBinding(TextBlock.TextProperty, new Binding("SelectedItems")
            {
                Converter = new MultiSelectComboxConverter(),
                Source = comboBox,
                ConverterParameter = comboBox.DisplayBindingPath
            });
        }
    }

    /// <summary>
    /// Gets the value indicating if the object is loaded or not
    /// </summary>
    /// <param name="obj">DependencyObject</param>
    /// <returns>the value indicating if the object is loaded or not</returns>
    public static bool GetSelectionBoxLoaded(DependencyObject obj)
    {
        return (bool)obj.GetValue(SelectionBoxLoadedProperty);
    }

    /// <summary>
    /// Sets the value indicating if the object is loaded or not
    /// </summary>
    /// <param name="obj">DependencyObject</param>
    /// <param name="value">the value indicating if the object is loaded or not</param>
    public static void SetSelectionBoxLoaded(DependencyObject obj, bool value)
    {
        obj.SetValue(SelectionBoxLoadedProperty, value);
    }

    /// <summary>
    /// ComboBoxItemLoaded called on ComboBoxItem load
    /// </summary>
    public static DependencyProperty ComboBoxItemLoadedProperty = DependencyProperty.RegisterAttached("ComboBoxItemLoaded",
        typeof(bool), typeof(MultiSelectComboBoxService), new PropertyMetadata(false, (obj, e) =>
        {
            CheckBox targetElement = obj as CheckBox;
            if (targetElement != null)
            {
                targetElement.Loaded += new RoutedEventHandler(comboBoxItem_Loaded);
                targetElement.SetBinding(MultiSelectComboBoxService.DataContextProperty, new Binding());
            }
        }));

    private static void comboBoxItem_Loaded(object sender, RoutedEventArgs e)
    {
        FrameworkElement element = (FrameworkElement)sender;
        MultiSelectComboBox comboBox = GetComboBox(element);
        if (comboBox != null)
        {
            element.SetBinding(CheckBox.ContentProperty, new Binding(comboBox.DisplayBindingPath));
            //Binding binding = new Binding(comboBox.IsCheckedBindingPath);
            //binding.Mode = BindingMode.TwoWay;
            //element.SetBinding(CheckBox.IsCheckedProperty, binding);
        }
    }

    /// <summary>
    ///Gets the value indicating if the item is loaded or not
    /// </summary>
    /// <param name="obj">DependencyObject</param>
    /// <returns>the value indicating if the item is loaded or not</returns>
    public static bool GetComboBoxItemLoaded(DependencyObject obj)
    {
        return (bool)obj.GetValue(ComboBoxItemLoadedProperty);
    }

    /// <summary>
    /// Sets the value indicating if the item is loaded or not
    /// </summary>
    /// <param name="obj">DependencyObject</param>
    /// <param name="value">the value indicating if the item is loaded or not</param>
    public static void SetComboBoxItemLoaded(DependencyObject obj, bool value)
    {
        obj.SetValue(ComboBoxItemLoadedProperty, value);
    }

    private static MultiSelectComboBox GetComboBox(DependencyObject targetElement)
    {
        MultiSelectComboBoxItem item = targetElement.GetVisualParent<MultiSelectComboBoxItem>();
        if (item != null)
        {
            return item.ParentComboBox;
        }
        return null;
    }

    private static DependencyProperty DataContextProperty = DependencyProperty.RegisterAttached("DataContext",
        typeof(object), typeof(MultiSelectComboBoxService), new PropertyMetadata(null, (obj, e) =>
        {
            CheckBox checkBox = (CheckBox)obj;
            MultiSelectComboBox comboBox = GetComboBox(checkBox);
            if (comboBox != null)
            {
                checkBox.IsChecked = comboBox.SelectedItems.Contains(checkBox.DataContext);
            }
        }));
    private static object GetDataContext(DependencyObject obj)
    {
        return obj.GetValue(DataContextProperty);
    }
    private static void SetDataContext(DependencyObject obj, object value)
    {
        obj.SetValue(DataContextProperty, value);
    }
} 
```

}

转换器如下：

```
 namespace Kepler.SilverlightControls.MultiSelectComboBox
    {
#region Méthodes
public class MultiSelectComboxConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        string displayMemberPath = parameter as string;
        if (String.IsNullOrWhiteSpace(displayMemberPath))
        {
            return String.Empty;
        }

        PropertyInfo propertyInfo;
        return string.Join(", ", (value as IEnumerable<object>).Select(item =>
            {
                propertyInfo = DataControlHelper.GetPropertyInfo(item.GetType(), displayMemberPath);
                if (propertyInfo == null)
                {
                    return String.Empty;
                }
                return propertyInfo.GetValue(item, null);
            }).ToArray());
    }

    /// <summary>
    /// Not implemented
    /// </summary>
    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }

#endregion
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:39:45.523

您不能将依赖项属性注册为附加属性，而应将其注册为常规依赖项属性。此外，您不应将`new ObservableCollection<object>()`其用作默认属性值，因为这将使用相同的集合实例作为您的所有实例上的属性的默认值`MultiSelectComboBox`。

```
public static readonly DependencyProperty SelectedItemsProperty =
    DependencyProperty.Register( // Register instead of RegisterAttached
        "SelectedItems",
        typeof(ObservableCollection<object>), 
        typeof(MultiSelectComboBox), 
        new PropertyMetadata(SelectedItemsPropertyChanged)); // no default value 
```

* * *

我还建议不要`ObservableCollection<object>`用作属性类型，而是简单地`ICollection`或`IEnumerable`代替。这将允许`INotifyCollectionChanged`具体集合类型中的其他实现。

```
public static readonly DependencyProperty SelectedItemsProperty =
    DependencyProperty.Register(
        "SelectedItems",
        typeof(ICollection),
        typeof(MultiSelectComboBox),
        new PropertyMetadata(SelectedItemsPropertyChanged));

public ICollection SelectedItems
{
    get { return (ICollection)GetValue(SelectedItemsProperty); }
    set { SetValue(SelectedItemsProperty, value); }
}

private static void SelectedItemsPropertyChanged(
    DependencyObject obj, DependencyPropertyChangedEventArgs e)
{
    var comboBox = (MultiSelectComboBox)obj;
    var oldCollection = e.OldValue as INotifyCollectionChanged;
    var newCollection = e.NewValue as INotifyCollectionChanged;

    if (oldCollection != null)
    {
        oldCollection.CollectionChanged -= SelectedItemsCollectionChanged;
    }

    if (newCollection != null)
    {
        newCollection.CollectionChanged += SelectedItemsCollectionChanged;
    }
}

private static void SelectedItemsCollectionChanged(
    object sender, NotifyCollectionChangedEventArgs e)
{
    switch (e.Action)
    {
        ...
    }
} 
```

* * *

另请注意，`MultiSelectComboBox`不需要执行`INotifyPropertyChanged`. 这仅在通知非依赖属性的属性更改时是必需的。

# javascript - 对齐在同一行

> ID：15886763
> 
> 赞同：0
> 
> 时间：2013-04-08T18:55:23.827
> 
> 标签：javascript, jquery, html, css

如何使文本框和表单字段在同一行中对齐...我提供了内联显示但它不起作用...在下面提供我的代码...如何修复它...文本字段是一个按钮下方的线......

[http://jsfiddle.net/S9PYV/embedded/result/](http://jsfiddle.net/S9PYV/embedded/result/)

```
<div class="bs-docs-example" id="notesDocumentsOuterDF">        
    <div class="documents-make-container">
        <!--<div class="insert-items-container">
            <label for="idName">Name</label>
            <input id="idName" type="text" name="name" value="" required="required" />
        </div>-->

        <div class="insert-items-container">
            <select class="greenButton">
                <option value="volvo">Create</option>
                <option value="saab">Saab</option>
                <option value="opel">Opel</option>
                <option value="audi">Audi</option>
            </select>

            <select class="greenButton">
                <option value="volvo">Email|Access</option>
                <option value="saab">Saab</option>
                <option value="opel">Opel</option>
                <option value="audi">Audi</option>
            </select>

            <input type="submit" class="greenButton" value="Add Contacts">
        </div>

        <div class="insert-items-container" style="float: right;">
            <!--<label for="idImageUpload">Image</label>-->
            <input type="file" name="file" id="idImageUpload" class="file" size="40">
            <div id="fakefile" class="fakefile">
                <input type="text" class="fakeinput">
                <img src="/images/icons/search.png">
            </div>
        </div>

        <!--<div class="insert-items-container">
            <label for="idContactSel">Contacts List</label>
            <select id="idContactSel" name="contactselect">
                <option value="">select email to share </option>
            </select>                               
            <input id="shareListBtn" class="greenButton" type="button" value="Share List" alt="sharelist">
            <input id="contactListBtn" class="greenButton" type="button" value="Contacts List" alt="contactlist">
            <input id="AddContactBtn" class="greenButton" type="button" value="Add Contacts" alt="addcontacts">
        </div>-->

        <!--<div class="insert-items-container">
            <label for="idShareList">Share List</label>
            <div id="idShareList" class="email-selected-container">
                <table cellspacing="0" cellpadding="0" border="0" class="table">
                    <thead>
                        <tr class="documentsListHeading" role="row">
                            <th width="100px;">name</th>
                            <th width="180px;">Email</th>
                            <th>Permission</th>
                        </tr>
                    </thead>
                    <!-- share list -->
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:21:34.567

你的第一个`insert-items-container`有 100% 的宽度（作为默认的 div），所以它填满了整行。您可以通过将文本框`insert-items-container`与其他表单字段放在相同的位置来解决此问题，或者将所有`insert-items-container`s 设置为`float: left`

# php - 两行中的PHP MySql交换值

> ID：15886765
> 
> 赞同：1
> 
> 时间：2013-04-08T18:55:49.580
> 
> 标签：php, mysql, sql-update

我已经看到了这方面的一些变化，但主要是它们交换整行而不是该行中的一个值，而不是动态交换。

这是问题：

我有三行，每行包含以下单元格（id、title、content、display_order、visible）。id 是 auto_increment。标题和内容是手动输入的，可见是一个切换。display_order 在每行创建时设置并自动设置为最高整数并设置在堆栈的底部。

我这样设置，以便如果要手动删除这些记录中的任何一个，我可以自动重新排序堆栈（如果有 4 条记录，我删除 #2，新订单重置为 1,2,3 而不是 1 ,3,4)。

每行都有一组向上和向下箭头按钮，它们调用 move.php 并查询 id(id)、display_order(pos) 和 direction(dir)。

在 move.php 中，它使用条件来确定是向上还是向下移动记录，具体取决于方向变量的设置。

我需要编写什么 PHP 代码来获取这三个变量（id、pos、dir）并交换表格单元格 display_order 中的值：这是一个可视化表示

最初的：

```
id   title   pos   
-----------------
 1   slide1   1
 2   slide2   2
 3   slide3   3 
```

在我单击记录 ID #3 的 UP 按钮后：

```
id   title   pos   
-----------------
 1   slide1   1
 2   slide2   3
 3   slide3   2 
```

请注意，ID 和 POS 并不总是相同的整数

使用 davidethell 的建议，我创建了这个：

这是我创建的，但我得到的只是 echo $newPos 而不是回到 admin.php：

```
require ("connection.php");
    $id = $_GET['id'];
    $pos = $_GET['pos'];
    $dir = $_GET['dir'];

    if ($dir == 'up') {
        $newPos = $pos-1;
    } else {
        $newPos = $pos+1;
    }

    $fromRow = "SELECT * FROM pages WHERE display_order = ".$pos."";
    $toRow = "SELECT * FROM pages WHERE display_order = ".$newPos."";

    $reord = mysqli_query($conn, "UPDATE pages SET display_order = " . $toRow['display_order'] . " WHERE id = " . $fromRow['id']."; UPDATE pages SET display_order = " . $fromRow['display_order'] . " WHERE id = " . $toRow['id']);

    if ($reord){
        header("Location: admin.php");
    }else{
        echo $newPos;
    } 
```

我遇到的问题是它只呼应 $newPos

更新代码：

```
require ("connection.php");

    $fromArray = array();
    $toArray = array();

    $id = $_GET['id'];
    $pos = $_GET['pos'];
    $dir = $_GET['dir'];

    if ($dir == 'up') {
        $newPos = $pos-1;
    } else {
        $newPos = $pos+1;
    }

    $fromRow = mysql_query("SELECT * FROM pages WHERE display_order = ".$pos."");

    $toRow = mysql_query("SELECT * FROM pages WHERE display_order = ".$newPos."");

    $reord = mysqli_query($conn, "UPDATE pages SET display_order = " . $toRow['display_order'] . " WHERE id = " . $fromRow['id']);
    $reord = mysqli_query($conn, "UPDATE pages SET display_order = " . $fromRow['display_order'] . " WHERE id = " . $toRow['id']);

    if ($reord){
        header("Location: admin.php");
    }else{
        echo $newPos;
    } 
```

结果：回显 $newPos 而不是返回到 admin.php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:21:20.333

您可以使用此查询：

```
UPDATE
  yourtable INNER JOIN (
    SELECT
      MAX(yourtable.pos) pos_prec,
      curr.pos pos_curr
    FROM
      yourtable INNER JOIN
      (SELECT pos FROM yourtable WHERE id=3) curr
      ON yourtable.pos<curr.pos
    GROUP BY
      curr.pos) cp ON yourtable.pos IN (cp.pos_prec, cp.pos_curr)
SET
  pos = CASE WHEN pos=cp.pos_curr
             THEN pos_prec ELSE pos_curr END 
```

有点复杂，但它会将 ID=3 的位置的值与前一项的位置的值交换，即使有间隙。

请[在此处](http://sqlfiddle.com/#!2/7ce01/1)查看小提琴。

**编辑**

如果没有间隙，您可以简单地使用它来移动 ID#3 UP：

```
UPDATE
  yourtable INNER JOIN (SELECT pos FROM yourtable WHERE id=3) curr
  ON yourtable.pos IN (curr.pos, curr.pos-1)
SET
  yourtable.pos = CASE WHEN yourtable.pos=curr.pos
                       THEN curr.pos-1 ELSE curr.pos END; 
```

并且只需使用 +1 而不是 -1 向下移动（如果需要，可以将 UP 和 DOWN 组合在一个查询中）。

**PHP 代码**

这是使用 PHP 和 mysqli，并假设给出的位置：

```
<?php
$mysqli = new mysqli("localhost", "username", "password", "test");

$pos = 3;
$dir = 'down';

if ($dir == 'up') { $newPos = $pos-1; } else { $newPos = $pos+1; }

if ($stmt = $mysqli->prepare("
  UPDATE
    yourtable
  SET
    pos = CASE WHEN yourtable.pos=?
               THEN ?
               ELSE ? END
  WHERE
    pos IN (?, ?)
    AND (SELECT * FROM (
         SELECT COUNT(*) FROM yourtable WHERE pos IN (?,?)) s )=2;"))
{

    $stmt->bind_param("iiiiiii", $pos, $newPos, $pos, $pos, $newPos, $pos, $newPos); 
    $stmt->execute();
    printf("%d Row affected.\n", $stmt->affected_rows);

    $stmt->close();
}
$mysqli->close();
?> 
```

（我还添加了一个检查，如果尝试向上移动第一个位置，或者向下移动最后一个位置，它将什么都不做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:07:00.600

假设每行数据都有一个 $row 对象，只需执行以下操作：

```
if ($dir == 'up') {
    $fromRow = $row2;
    $toRow = $row1;
}
else {
    $fromRow = $row1;
    $toRow = $row2;
}
$sql = "UPDATE mytable SET pos = " . $toRow['pos'] . " WHERE id = " . $fromRow['id'];
// now execute your SQL however you want in your framework
$sql = "UPDATE mytable SET pos = " . $fromRow['pos'] . " WHERE id = " . $toRow['id'];
// now execute your SQL however you want in your framework 
```

将其放入某种函数或类中以使其可重用。

编辑：根据您的编辑，您似乎没有在查询中获取足够的信息。他们应该是：

```
$fromRow = mysql_query("SELECT * FROM pages WHERE display_order = ".$pos."");

$toRow = mysql_query("SELECT * FROM pages WHERE display_order = ".$newPos.""); 
```

您只选择了 id 字段，但随后您尝试使用 display_order 字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:08:49.857

我不会给你写 PHP 代码。但我会给你SQL：

假设如果幻灯片的位置应该升高 1，则 $delta 为 +1，如果幻灯片的位置应降低 1，则为 -1。$id 是幻灯片的 id。哦，让我们假设该表称为 slides_table。

您将需要 2 个查询：

```
update slides_table set pos = pos + $delta where id = $id;
update slides_table set pos = pos - $delta where pos = (select pos from slides_table where id=$id) and id != $id 
```

# events - actionscript 3 使用键盘输入

> ID：15886766
> 
> 赞同：0
> 
> 时间：2013-04-08T18:55:55.737
> 
> 标签：events, logging, textinput

我已经使用两个 TextInput 字段作为用户名和密码构建了一个登录表单。我已经创建了一个简单的按钮。我希望用户可以选择在键盘上按 Enter 登录，而不是单击按钮。我怎么做？而且，您能解释一下 Event.Change 的作用吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:53:38.270

您可以收听 KeyboardEvent.KEY_DOWN，它是在按下键时调度的。一旦发生这种情况，您就可以停止收听。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/KeyboardEvent.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/KeyboardEvent.html)

然后查找 Enter 键 (13) 的 keyCode。 [http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000520.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000520.html)

例子：

```
public static const ENTER:int = 13;
public var pressedEnter:Boolean = false;

public function start():void
{
    passwordField.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown, 
        false, 0, true);
}

private function onKeyDown(e:KeyboardEvent):void
{
    if (!pressedEnter && ENTER == e.keyCode) {
        trace("TODO: Enter form.");
        pressedEnter = true;
    }
} 
```

Event.CHANGE 在每次文本字段更改或小部件中的选项更改为不同选项时调度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T12:40:17.883

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, key_down);

function key_down(e:Event):void
{
    //whatever you want

} 
```

# c#-4.0 - 比较图像中的对象

> ID：15886770
> 
> 赞同：1
> 
> 时间：2013-04-08T18:56:14.707
> 
> 标签：c#-4.0, itextsharp

我在pdf中有两张不同大小的图像。首先我提取图像，然后我需要找到对象的相似性，以检查两个图像是否包含相同的对象。

可以使用哪种算法？比较两张图像中的对象的最佳和最快方法是什么？

# internet-explorer - 新窗口中的 HTTP 基本身份验证保护 url

> ID：15886777
> 
> 赞同：2
> 
> 时间：2013-04-08T18:56:31.837
> 
> 标签：internet-explorer, web-applications, basic-authentication

我们有一个使用 HTTP 基本身份验证保护的应用程序。

我们需要在另一个客户端 Web 应用程序中访问来自上述应用程序的几个 url。

当我们点击这些受保护的 url 时，它们应该会出现在新的弹出窗口中。

我们做到了

```
window.open("http://username:password@server:port/appcontext/otherparams"); 
```

这在 Firefox 和 Chrome 中运行良好，但在 Internet Explorer 中却不行。经过一些谷歌后，我们发现 Internet Explorer 不支持上述格式的 url。

有没有其他方法可以使它在所有浏览器中工作？

**编辑：**

无论如何，我们可以将身份验证移动到服务器端并实现相同的功能。我知道我们可以使用

```
Authenticator.setDefault 
```

但不确定我们如何在身份验证后再次登陆弹出窗口。任何帮助，将不胜感激。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:10:01.780

看看[这篇文章](http://support.microsoft.com/kb/834489)，它提供了很多关于这个问题的信息。

如文章中所述，要在 url 中启用用户名/密码，您可以通过以下方式编辑注册表数据库：

> 要在 Windows Explorer 和 Internet Explorer 中禁用新的默认行为，请在以下注册表项之一中创建 iexplore.exe 和 explorer.exe DWORD 值，并将其值数据设置为 0。
> 
> ```
> For all users of the program, set the value in the following registry key:
> HKEY_LOCAL_MACHINE\Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_HTTP_USERNAME_PASSWORD_DISABLE
> 
> For the current user of the program only, set the value in the following registry key:
> HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_HTTP_USERNAME_PASSWORD_DISABLE 
> ```

# php - Sugar CRM 的 `field_arrays.php` 的解释

> ID：15886778
> 
> 赞同：2
> 
> 时间：2013-04-08T18:56:32.460
> 
> 标签：php, sugarcrm, sugarbean

在 SugarCRM 中，每个带有 bean 的代码模块都有一个`field_arrays.php`文件。

```
ex. 
#File: modules/Accounts/field_arrays.php 
```

这些文件定义了一个由基类中的代码合并的数组`SugarBean`，并且似乎为 Bean 列创建了四个特殊名称

```
column_fields
list_fields
required_fields
export_fields 
```

我已经用谷歌搜索了，但我似乎无法找到关于这些名称中每一个的用途的明确答案。这里有人知道吗？

我可以很容易地推测一些（`required_fields`似乎很明显），但我想听听那些真正**知道**a`column_field`是什么和 a`list_field`等的人的意见。

（另外，我意识到在日常使用中会生成这些文件，我不需要担心这一点——但我试图从编程的角度来理解系统）

# javascript - 图表点击事件上的图表标题

> ID：15886780
> 
> 赞同：0
> 
> 时间：2013-04-08T18:56:52.430
> 
> 标签：javascript, highcharts

我想要的是能够单击图表的标题并执行操作，但是下一个最好的事情是图表级别的单击事件。我能够使用以下方法从事件中找到图表的标题：

```
this.title.element.innerHTML
this.title.element.innerText
this.title.element.childNodes[0].nodeValue
this.title.element.firstChild.data
this.title.element.firstChild.nodeValue 
```

虽然上述所有工作都在 IE8+ 中工作，但它们在 FireFox 中不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:55:11.253

您可以将 useHTML 设置为 true 的标题：

```
 title: {
    text: 'testtest',
 } 
```

然后使用jquery事件点击

```
$('.highcharts-title').click(function(){
    alert('action');
}); 
```

[http://jsfiddle.net/puhtu/1/](http://jsfiddle.net/puhtu/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-15T21:10:43.440

Highcharts 在标题中内置了对 URL 的支持，因此您可以将“a href=" 嵌入到图表的标题中以使其加载页面。

请参阅：[http ://www.java2s.com/Tutorials/highcharts/Example/Title/Add_hyper_link_to_chart_sub_title.htm](http://www.java2s.com/Tutorials/highcharts/Example/Title/Add_hyper_link_to_chart_sub_title.htm)

您加载的页面可以做任何您想做的事情。

这种方法的好处在于，如果您在同一页面上有 10 个图表，则每个图表可以加载不同的 URL。

我使用它从摘要图表导航到包含更详细信息的页面。

# jquery - 谷歌地图内的jquery淘汰赛

> ID：15886781
> 
> 赞同：1
> 
> 时间：2013-04-08T18:56:52.933
> 
> 标签：jquery, google-maps, knockout.js

我有一个谷歌地图和一个包含 jquery 淘汰赛绑定的自定义控件：

```
function ViewModel() {
    this.cities = ko.observableArray();
};
var viewModel = new ViewModel();

// ajax call which populates cities array

var googleMap = new google.maps.Map(document.getElementById("map"), mapOptions);

var controlHtml = $("<ul data-bind='foreach: cities'></ul>");
googleMap.controls[google.maps.ControlPosition.TOP_RIGHT].push(controlHtml[0]);

ko.applyBindings(viewModel); 
```

该列表已添加到地图上，但淘汰赛绑定不起作用。如果我在`body`标签上添加相同的列表，则该列表是绑定的。

是否可以在谷歌地图自定义控件中使用 jquery 淘汰赛？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:12:37.953

添加超时可以解决问题：

```
var controlHtml = $("<ul data-bind='foreach: cities'><li data-bind='text: Name'></li></ul>");
googleMap.controls[google.maps.ControlPosition.TOP_RIGHT].push(controlHtml[0]);

setTimeout(function() {
    ko.applyBindings(viewModel);
}, 1000); 
```

# c# - 如何获取从中提取数据的服务器的服务器地址

> ID：15886784
> 
> 赞同：2
> 
> 时间：2013-04-08T18:57:00.397
> 
> 标签：c#, mongodb, mongodb-.net-driver

我知道我们在 Java 驱动程序中使用 cursor.getServerAddress()。但是，我在 C# 中找不到任何相关的调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:37:20.053

不幸的是，在通过 C# 驱动程序源代码（以及 Java 源代码以查看它在做什么）进行更深入的挖掘之后，用作获取的一部分的实际服务器地址作为私有成员隐藏在 Enumerator 中( `_serverInstance`)。

特别是，它隐藏在一个名为`MongoCursorEnumerator`. 不幸的是，没有一种“诚实”的方式来实现它。我想你可以使用 .NET 反射来实现它，但这通常不是一个好主意，尤其是对于你不拥有的代码。如果您想拥有驱动程序的自定义分支，您可以轻松地将其添加为新属性。您可能想在[此处](https://jira.mongodb.org)添加问题。

通常，您可以获取 MongoDB 连接使用的实例，因为它们在`MongoServerInstance`类、`Address`属性上可用。

```
var client = new MongoClient();
var server = client.GetServer();
// server.Instance.Address 
```

[文档](http://api.mongodb.org/csharp/current/?topic=html/4367254d-0112-f256-be8e-cc97ebc189ab.htm)

但是，在您的情况下，您也可以`cursor`通过以下`Server`属性获取它：

```
cursor.Server.Instance.Address.Host 
```

或者

```
cursor.Server.Instances[] 
```

[光标服务器文档](http://api.mongodb.org/csharp/current/?topic=html/ec0ea469-51cb-255a-ee27-5b814f0565ff.htm)

有趣的是，当有多个实例可用时，C# 驱动程序会抛出异常。因此，如果您不知道有多少个实例，您要么需要处理`exception`( `InvalidOperationException`)，要么总是使用该`Instances[]`属性来返回关联的实例。

# asp.net-mvc-2 - 如何安装 mvc4 的建议？

> ID：15886788
> 
> 赞同：-3
> 
> 时间：2013-04-08T18:57:24.107
> 
> 标签：asp.net-mvc-2, asp.net-mvc-4

在我的系统中，我有 mvc2 和 Vs2008（许可版本）。我正在尝试学习 mvc4。如果我使用此链接 [链接][1] 安装，它会将我的 VS 2008 覆盖到 Vs 2012 吗？我仍然在 MVC2 的一些项目中。基本上我想要另一个安装单独 vs2012.any suggesions？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:02:01.687

VS2012 & VS2008 将并行运行；您将在您的应用程序文件夹中获得两个 VS 文件夹（并将一个 VS2012 项目文件夹添加到我的文档中）。

唯一需要注意的是在 VS2012 中打开项目（因为它需要向上转换它）。但是通常可以选择进行备份（或者您可以在尝试之前自己进行备份）。

# xml - 显示来自不同块的相应 XML 节点

> ID：15886789
> 
> 赞同：0
> 
> 时间：2013-04-08T18:57:25.277
> 
> 标签：xml, xslt

假设我有以下 XML 块..

```
<items>
    <books>
        <book>
            <name>a</name>
            <author>b</author>
        </book>
        <book>
            <name>d</name>
            <author>e</author>
        </book>
    </books>

    <infos>
        <info>
            <id>1</id>
            <year>c</year>
        </info>
        <info>
            <id>2</id>
            <year>f</year>
        </info>
    </infos>
</items> 
```

'info' 的每个实例对应于 'book' 的一个实例。如果 items/infos/info/id 是指书籍元素的位置。
我正在尝试输出以下内容...

```
a  
b  
c  

d
e
f 
```

在此先感谢...任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:08:47.420

如果第 n 个`info`元素匹配到第 n 个，`book`那么您可以通过仔细使用该`position()`函数来做到这一点。例如

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="text" />

  <xsl:template match="/">
    <xsl:apply-templates select="items/books/book" />
  </xsl:template>

  <xsl:template match="book">
    <xsl:variable name="bookNum" select="position()" />
    <xsl:variable name="info" select="/items/infos/info[$bookNum]" />
    <xsl:value-of select="name" />
    <xsl:text>&#x0A;</xsl:text>
    <xsl:value-of select="author" />
    <xsl:text>&#x0A;</xsl:text>
    <xsl:value-of select="$info/year" />
    <xsl:text>&#x0A;</xsl:text>
    <xsl:text>&#x0A;</xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

尽管对于比这个简单示例更复杂的任何事情，我可能会为`info`元素定义一个单独`<xsl:apply-templates select="/items/infos/info[$bookNum]" />`的模板并将其放入`book`模板中，而不是将其全部内联。

# mysql - 我无法在 MySQL 中创建表（错误 1005）

> ID：15886794
> 
> 赞同：0
> 
> 时间：2013-04-08T18:57:35.517
> 
> 标签：mysql, phpmyadmin, mysql-workbench

我正在尝试创建一个表，`users`但是在使用 MySQL Workbench 和 PHPMyAdmin 运行查询时出现错误“无法创建表”。我似乎在它说的地方收到错误：

存储 VARCHAR(5)，

```
CREATE TABLE store
(
    id          INT                 NOT NULL    AUTO_INCREMENT,
    short_name  VARCHAR(5)                      NOT NULL,
    name        VARCHAR(30)                     NOT NULL,
    address1    VARCHAR(50)                     NOT NULL,
    address2    VARCHAR(20),
    city        VARCHAR(30)                     NOT NULL,
    state       VARCHAR(30)                     NOT NULL,
    zip         VARCHAR(10)                     NOT NULL,
    phone       VARCHAR(15)                     NOT NULL,
    CONSTRAINT store_pk PRIMARY KEY (id)
);

CREATE TABLE users
(
    id          INT                     NOT NULL    AUTO_INCREMENT,
    fname       VARCHAR(35)                     NOT NULL,
    lname       VARCHAR(35)                     NOT NULL,
    password    VARCHAR(60),        
    address1    VARCHAR(50)                     NOT NULL,
    address2    VARCHAR(20),
    city        VARCHAR(30)                     NOT NULL,
    state       VARCHAR(30)                     NOT NULL,
    zip         VARCHAR(10)                     NOT NULL,
    phone       VARCHAR(15),
    email       VARCHAR(90),
    store       VARCHAR(5),
    admin       TINYINT             DEFAULT 0   NOT NULL,
    mail_list   TINYINT             DEFAULT 0   NOT NULL,
    active      TINYINT             DEFAULT 0   NOT NULL,
    CONSTRAINT users_pk PRIMARY KEY (id),
    CONSTRAINT users_fk FOREIGN KEY (store)
        REFERENCES store (short_name)
        ON DELETE   SET NULL
        ON UPDATE   CASCADE
); 
```

存储表添加成功。只有当我尝试创建用户表时，我才会收到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:02:50.083

外键引用的列需要被索引。因此，您需要添加一个索引`store.short_name`以允许`users_fk`在外键中引用它。

# google-fusion-tables - Google Fusion Tables 和多层

> ID：15886796
> 
> 赞同：1
> 
> 时间：2013-04-08T18:57:44.887
> 
> 标签：google-fusion-tables

我无法在知识库中找到我的问题的答案，所以我发布了我的问题。

为什么我无法在给定时间在我的谷歌地图上显示以下 3 层。

我的代码如下：

```
 layer1 = new google.maps.FusionTablesLayer({
     query: {
        select: 'geometry',
        from: '1j0sMtIvduL_g4v49iVtliQxMuoejc181SE5E3Js'
    },
    styles:
        [{
            polygonOptions:{
                fillColor: "#ffffff",
                strokeColor: "#ff0000",
                strokeWeight: 2,
                fillOpacity: 0.0
            }
        }],
    map:map,
    suppressInfoWindows: true
});
layer1.setMap(map);

layer2 = new google.maps.FusionTablesLayer({
     query: {
        select: 'geometry',
        from: '1ChsolycFiapOMGv4tarRE0Dl-aGNm6GY6-qe6_o'
    },
    styles:
        [{
            polygonOptions:{
                fillColor: "#0000ff",
                 strokeColor: "#000000",
                strokeWeight: 2,
                fillOpacity: 1.0
            }
        }],
    map:map,
    suppressInfoWindows: true
});
layer2.setMap(map);

 layer3 = new google.maps.FusionTablesLayer({
     query: {
        select: 'geometry',
        from: tableID
    },
    map:map,
    suppressInfoWindows: true
});
layer3.setMap(map); 
```

出于某种原因，我只能在给定时间显示两个图层，例如图层 1&3 和 2&3。任何建议都非常感谢。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T06:42:54.467

这是正确的，您遇到了[Google Fusion Tables 的限制](https://stackoverflow.com/a/11954718/549755)。您可能只定义 5 个图层（您有 3 个，所以这里没有问题），但只有 5 个图层可以设置样式（您当前有 2 个，因此只显示一个）。

在您的示例中`layer1`，`layer2`两者都有`styles`-option 集。目前这是不可能的。

# directx - 使用 DirectX 管道进行 2D 渲染

> ID：15886798
> 
> 赞同：0
> 
> 时间：2013-04-08T18:57:55.500
> 
> 标签：directx, 2d, shader

我想使用 DirectX (11) 渲染 2D 几何图形，并尝试通过创建一个根本不转换顶点的效果文件来实现 - 这就是您通常应用世界/视图/投影矩阵的地方我只是返回（未转换的）输入。

这按预期工作，我的四边形被正确渲染到表面。然后我尝试通过沿 X 轴的平移（2D）对其进行转换，并得到了一些奇怪的视角变化。

谷歌搜索我看到人们在谈论使用正交变换矩阵，但不明白为什么 - 我不想将一般的 3d 数据转换为 2d，我想将 2d 数据转换为 2d（也许是 2d也翻译/缩放）

我觉得我错过了有关管道的一些重要内容？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:37:06.753

您正在使用的投影矩阵是提供透视的透视矩阵。当您在 3D 中工作时这很好，但是当您想要渲染 2D（例如渲染 GUI）时，您不想添加透视图。

正交矩阵是一个基本上忽略透视的矩阵，所以远处的物体和近处的物体一样大。

如果你画一个盒子（一个顶部缺失的立方体），它们之间的区别可以如下所示：

```
Perspective    vs    Orthigonal
O---------O             O---------O
|\       /|             |         |
| o-----o |             |         |
| |     | |             |         |
| o-----o |             |         |
|/       \|             |         |
O---------O             O---------O 
```

那么在你的情况下会发生什么？好吧，不在屏幕中心的对象自然会远离屏幕中心附近的对象。正因为如此，他们被拉得更近了。

例子：

```
A      B      C        Point A (-5, 0, 5)
 \     |     /         Point B ( 0, 0, 5)
  \    |    /          Point C ( 5, 0, 5)
   \   |   /       
    \  |  /      
     \ | /    
      \|/
       V 
```

如您所见，A 点和 B 点距离较远。如果我们使用非常基本的透视图（它更复杂，但作为示例就足够了）来计算每个点在屏幕上的位置，那么我们将使用以下公式：

```
Vector2 Perspective(Vector3 pos)
{
    return Vector2(pos.x, pos.y) / pos.length();
} 
```

现在正交矩阵将更符合以下几点：

```
Vector2 Orthogonal(Vector3 pos)
{
    return Vector2(pos.x, pos.y);
} 
```

因此，当您用新的正交矩阵替换旧的透视矩阵时，您应该不再有透视问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:30:29.940

我认为您可能忘记在完成构造之后但在将其分配给设备之前在您的转换矩阵上调用 m.Transpose()

# google-app-engine - 需要使用 Google 任务 API GAE 登录添加任务？

> ID：15886800
> 
> 赞同：0
> 
> 时间：2013-04-08T18:58:01.847
> 
> 标签：google-app-engine, python-2.7, google-tasks-api

好吧，我有一个目录`'/mytask'`，我已经在那里登录，可以在那里看到我所有任务的列表，现在我想创建另一个目录`'/addmytask'`，我想在其中添加新任务。但是当我尝试以下代码时：

服务=构建（'任务'，'v1'）

```
class addtask(webapp2.RequestHandler):
   def get(self):
       task = {
              'title': 'New Task',
              'notes': 'Please complete me',
              'due': '2010-10-15T12:00:00.000Z'
              }
       result = service.tasks().insert(tasklist='@default', body=task).execute() 
```

它说“需要登录”。

文档还说需要身份验证[https://developers.google.com/google-apps/tasks/v1/reference/tasks/insert#auth](https://developers.google.com/google-apps/tasks/v1/reference/tasks/insert#auth)但我不知道该怎么做？因为我可以在`'/mytask'`目录中看到我的所有任务，所以我认为他们指的是那个登录名。但显然我错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:51:01.670

我需要`@decorator.oauth_required`在我的方法之前使用。

我在我的博客中添加了：http: [//sadaf2605.appspot.com/blog/python%20googole%20api%20Login%20required](http://sadaf2605.appspot.com/blog/python%20googole%20api%20Login%20required)

# sql - 对 Access 数据库使用更新语句 (Vb 2008)

> ID：15886804
> 
> 赞同：0
> 
> 时间：2013-04-08T18:58:10.863
> 
> 标签：sql, database, vb.net

我正在尝试为我的程序创建一个更新语句，该语句将根据用户输入的数据使用 SQL 更新数据库，不幸的是我遇到的问题是我一次只能更新一个，有时它们都不起作用。如果可以提供任何帮助，将不胜感激。

```
Private Sub btnsave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnsave.Click

    Dim con As New OleDb.OleDbConnection

    Dim d1 As New OleDb.OleDbDataAdapter
    Dim d2 As New OleDb.OleDbDataAdapter
    Dim d3 As New OleDb.OleDbDataAdapter
    Dim d4 As New OleDb.OleDbDataAdapter
    Dim d5 As New OleDb.OleDbDataAdapter
    Dim d6 As New OleDb.OleDbDataAdapter
    Dim d7 As New OleDb.OleDbDataAdapter
    Dim d8 As New OleDb.OleDbDataAdapter
    Dim d9 As New OleDb.OleDbDataAdapter
    Dim d10 As New OleDb.OleDbDataAdapter

    Dim dt As New DataTable("Animals")

    'uses the 2010 compatible connection string
    con.ConnectionString = "PROVIDER=Microsoft.ACE.OLEDB.12.0;Data Source = h:\Animals.accdb"
    con.Open()

    MsgBox("UPDATE Animals SET LatinName = '" & latintxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'")
    d1 = New OleDb.OleDbDataAdapter("UPDATE Animals SET LatinName = '" & latintxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d2 = New OleDb.OleDbDataAdapter("UPDATE Animals SET LocationFound = '" & locationtxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d3 = New OleDb.OleDbDataAdapter("UPDATE Animals SET AverageHeight = '" & heighttxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d4 = New OleDb.OleDbDataAdapter("UPDATE Animals SET AverageWeight = '" & weighttxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d5 = New OleDb.OleDbDataAdapter("UPDATE Animals SET DietaryNeeds = '" & diettxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d6 = New OleDb.OleDbDataAdapter("UPDATE Animals SET ConservationStatus = '" & statustxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d7 = New OleDb.OleDbDataAdapter("UPDATE Animals SET AverageLifeSpan = '" & lifetxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d8 = New OleDb.OleDbDataAdapter("UPDATE Animals SET BreedingSeason = '" & breedtxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d9 = New OleDb.OleDbDataAdapter("UPDATE Animals SET AverageLength = '" & lengthtxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)
    d10 = New OleDb.OleDbDataAdapter("UPDATE Animals SET AnimalName = '" & nametxt.Text & "'" & " WHERE AnimalName = " & "'" & Form1.txtname.Text & "'", con)

    d1.Fill(dt)
    d2.Fill(dt)
    d3.Fill(dt)
    d4.Fill(dt)
    d5.Fill(dt)
    d6.Fill(dt)
    d7.Fill(dt)
    d8.Fill(dt)
    d9.Fill(dt)
    d10.Fill(dt)

    con.Close()

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:03:18.780

您的功能非常低效。您应该使用`OleDB.OleDBCommand`'s 而不是数据适配器。数据适配器主要用于从数据库中获取数据而不是更新数据库。您可以使用它们来更新数据，但不能按照您的方式更新。

尝试将您的功能更改为如下所示：

```
Using cn As New OleDbConnection(YOURCONNECTIONSTRING)
    Dim cSQL As String = "THIS WILL BE YOUR SQL"
    Dim cmd As New OleDbCommand(cSQL, cn)
    Try
        If cn.State <> ConnectionState.Open Then cn.Open()
        cmd.ExecuteNonQuery()

        'Now reset cSQL to your second SQL string and recreate your OleDbCommand with the new string.'
        cSQL = "NEW SQL STRING"
        cmd = New OleDbCommand(cSQL, cn)
        cmd.ExecuteNonQuery()

        'Now repeat your process as many times as you like.'
    Catch ex As Exception
        'Handle any errors here.'
    End Try
End Using 
```

话虽如此，您应该像其他人提到的那样对所有输入使用命令参数。这有点高级，你应该在自己的时间谷歌周围自学如何做到这一点。有大量的教程可以引导您完成整个过程。一旦你学会了如何使用这些参数，你就可以很好地保护你未来的项目免受黑客和恶意用户的攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:21:58.053

实际的 sql 可能类似于：

```
update yourtable
set field1 = something
, field2 = something else
etc 
```

您对 .net 代码所要做的就是创建一个类似的字符串。另外，使用查询参数。

# ruby - 嵌入式 ruby 在 highcharts 中不起作用

> ID：15886810
> 
> 赞同：1
> 
> 时间：2013-04-08T18:58:23.110
> 
> 标签：ruby, ruby-on-rails-3, highcharts, embedded-ruby

我在 Highcharts 和 Rails 上查看了 RailsCast #223，当我尝试简单的 for 循环和哈希循环时，图表甚至没有呈现。我正在尝试从可变数量的系列开始。静态系列作品。

直接来自示例的 HighCharts 堆叠列的原始代码

```
$('#container').highcharts({
    chart: {
        type: 'column'
    },
    title: {
        text: 'Stacked column chart'
    },
    xAxis: {
        categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Total fruit consumption'
        },
        stackLabels: {
            enabled: true,
            style: {
                fontWeight: 'bold',
                color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
            }
        }
    },
    legend: {
        align: 'right',
        x: -100,
        verticalAlign: 'top',
        y: 20,
        floating: true,
        backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'white',
        borderColor: '#CCC',
        borderWidth: 1,
        shadow: false
    },
    tooltip: {
        formatter: function() {
            return '<b>'+ this.x +'</b><br/>'+
                this.series.name +': '+ this.y +'<br/>'+
                'Total: '+ this.point.stackTotal;
        }
    },
    plotOptions: {
        column: {
            stacking: 'normal',
            dataLabels: {
                enabled: true,
                color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
            }
        }
    },
    series: [{
        name: 'John',
        data: [5, 3, 4, 7, 2]
    }, {
        name: 'Jane',
        data: [2, 2, 3, 2, 1]
    }, {
        name: 'Joe',
        data: [3, 4, 4, 2, 5]
    }]       
}); 
```

下面是我的嵌入式 Ruby，只是为了在我开始从 DB 中提取之前得到一些工作。它并没有做任何花哨的事情，只是一个简单的 for 循环来创建几个系列。当我重新运行图表时，它不会在浏览器中呈现。注意：该脚本位于 app/assets/javascripts 中的文件 project.js 中，并且位于一个`$(function() {`块中。

```
series: [        
  <% xarray = [1, 2, 3, 4, 5] %> 
  <% for x in xarray %>
   {
    name: "<%= x %>",
    data: [5, 3, 4, 7, 2]
   }
  <% end %> 
```

这是新文件 show.js.erb

```
$(function() {
   $('#container').highcharts({
        chart: {
            type: 'column'
        },
        title: {
            text: 'Resource Load by Project'
        },
        xAxis: {
            categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
        },
        yAxis: {
            min: 0,
            title: {
                text: 'Total hours worked'
            },
            stackLabels: {
                enabled: true,
                style: {
                    fontWeight: 'bold',
                    color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
                }
            }
        },
        legend: {
            align: 'right',
            x: -100,
            verticalAlign: 'top',
            y: 20,
            floating: true,
            backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColorSolid) || 'white',
            borderColor: '#CCC',
            borderWidth: 1,
            shadow: false
        },
        tooltip: {
            formatter: function() {
                return '<b>'+ this.x +'</b><br/>'+
                    this.series.name +': '+ this.y +'<br/>'+
                    'Total: '+ this.point.stackTotal;
            }
        },
        plotOptions: {
            column: {
                stacking: 'normal',
                dataLabels: {
                    enabled: true,
                    color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
                }
            }
        },
        series: [
          <% arr = [1, 2, 3, 4, 5] %>
          <% for arrr in arr %>
          {
            name: <%= arrr %>,
            data: [5, 3, 4, 7, 2]
          }
          <% end %>
        ]

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-04T17:48:54.293

我遇到了同样的问题。主要问题在这条线上

```
name: <%= arrr %>, 
```

这是错误的。正确的将是

```
name: "<%= arrr %>", 
```

检查差异。它是`"`。也检查 Ryan 的 railscasts。

# c# - 数据网格视图中 CellEndEdit 中的参数超出范围异常

> ID：15886816
> 
> 赞同：1
> 
> 时间：2013-04-08T18:58:39.753
> 
> 标签：c#, asp.net, datagridview

我是 ASP.NET 的初学者并正在尝试学习 windows 窗体，我正在尝试在 windows 窗体上创建一个简单的学生表，我将能够在学生表中添加、更新和删除其详细信息。我想使用存储过程进行删除和触发器进行更新。我已经完成了添加部分，它工作正常。我对实现触发器没有太多想法。现在我正在尝试使用 CellEndEdit 属性进行更新和删除，因为当我在网上搜索时，它似乎是最快的编辑和删除方式。我现在得到一个参数超出范围异常。你能帮忙解决它吗，如果可能的话，还给我一个实现触发器的想法。我已经附上了我的表单视图和数据库结构以及到目前为止我已经完成的代码。任何帮助，将不胜感激。

**Class1.cs 的代码**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data;
using System.Data.SqlClient;

namespace WindowsFormsApplication1
{
    public class Class1
    {
    SqlConnection con = new SqlConnection();
    SqlCommand cmd = new SqlCommand();

    public Class1()
    {
        con.ConnectionString = "server=.\\sqlexpress;database=sample;trusted_connection=true";
        cmd.Connection = con;
    }

    public void opencon()
    {
        if (con.State == ConnectionState.Open)
            con.Close();
        con.Open();
    }

    public SqlConnection getcon
    {
        get
        {
            return con;
        }
    }

    public SqlCommand getcmd
    {
        get
        {
            return cmd;
        }

    }

    public DataSet dataview()
    {
        //cmd.CommandType = CommandType.Text;
        //cmd.CommandText = "select * from Student_table";
        SqlDataAdapter adp = new SqlDataAdapter("select * from Student_table",con);
        DataSet ds = new DataSet();
        //adp.SelectCommand = cmd;
        adp.Fill(ds, "Student_table");
        return ds;
    }
}
} 
```

**Form.cs 的代码**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.SqlClient;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    Class1 con = new Class1();
    DataGridView grid = new DataGridView();

    public Form1()
    {
        InitializeComponent();
        //grid.CellEndEdit += new DataGridViewCellEventHandler();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        this.student_tableTableAdapter.Fill(this.sampleDataSet.Student_table);
    }

    private void button4_Click(object sender, EventArgs e)
    {

        con.opencon();
        lblstatus.Text = "Connected";

    }

    private void button1_Click(object sender, EventArgs e)
    {
        con.opencon();
        con.getcmd.CommandText="insert into Student_table values('"+txtstname.Text+"','"+txtgrname.Text+"', '"+Convert.ToDateTime(dob.Value)+"','"+txtadd1.Text+"','"+txtadd2.Text+"')";
        con.getcmd.ExecuteNonQuery();
        //con.Close();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        con.opencon();
        con.getcmd.CommandType = CommandType.Text;
        con.getcmd.CommandText = "select * from Student_table";
        SqlDataAdapter adp = new SqlDataAdapter();
        DataSet ds = new DataSet();
        adp.SelectCommand = con.getcmd;
        adp.Fill(ds,"Student_table");
        ds = con.dataview();

        dataGridView1.DataSource = ds.Tables["Student_table"].DefaultView;
    }

    private void button3_Click(object sender, EventArgs e)
    {
        Application.Exit();
    }

    private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {

    }

    private void btndel_Click(object sender, EventArgs e)
    {

    }

    private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
    {

        string query = string.Format(
        "UPDATE Student_table set {0}='{1}' WHERE id={2}",
        grid.Columns[e.ColumnIndex].Name, grid[e.ColumnIndex, e.RowIndex].Value,
        grid[0, e.RowIndex].Value); //**Argument out of range exception error here**

        try
        {
            con.getcmd.CommandType = CommandType.Text;
            con.getcmd.CommandText = query;
            con.opencon();
            con.getcmd.ExecuteNonQuery();

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.StackTrace);
        }
    }
} 
```

}

**请忽略评论，因为我正在尝试不同的事情来实现我的目标:)** [http://i50.tinypic.com/2yp0kl2.jpg](http://i50.tinypic.com/2yp0kl2.jpg)

[http://i47.tinypic.com/33az3lw.jpg](http://i47.tinypic.com/33az3lw.jpg)

# exception-handling - 如何引发打印消息并返回值的异常？

> ID：15886817
> 
> 赞同：1
> 
> 时间：2013-04-08T18:58:44.617
> 
> 标签：exception-handling, sml

我们的教授要求我们在作业中这样做：

> 如果给定的阈值是负数，您应该打印消息“错误：负阈值”并返回一个空列表。为此，定义一个名为 ThresholdOutOfRange 的异常，如果阈值为负数，则提高它，并处理异常以实现正确的行为。

我不明白如何引发异常、返回值和打印错误消息。现在我引发异常的代码是（只是有异常的重要位）：

```
fun getnearbylist(center, threshold, ziplist) =
    let
      exception ThresholdOutOfRange;
      fun test_threshold(threshold, zip, nil) =nil
      |   test_threshold(threshold, zip, ziplist as x::xs) =
          if (threshold <0.0) then raise ThresholdOutOfRange
(*        [...skipped a long unrelated middle bit. most important is just knowing
              this function returns a string list...] *)
          else x::test_threshold(threshold, zip, xs)
    in
      test_threshold(threshold, center, ziplist)
      handle
      ThresholdOutOfRange => []
    end 
```

因此，当引发异常时，我的代码只会返回一个空列表。鉴于异常必须具有与我所知的引发它们的函数相同的返回类型，我该怎么做才能返回空列表并打印错误消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T22:43:17.233

正确的是，异常处理的结果类型必须与您正在处理异常的表达式相同。换句话说，`exp_1`并且`exp_2`必须在下面的代码中具有相同的类型，就像“then”和“else”一样if 表达式的一部分。

```
exp_1 handle pat => exp_2 
```

因此，您正在寻找的是一种在`exp_2`部件中执行多种操作的方法，特别是具有打印消息的副作用的方法。对于此类事情，您可以使用序列。序列具有以下形式（注意括号）

```
(exp_1; ... ; exp_n) 
```

它本身就是一个表达式。这在下面展示

```
- (print "foo\n"; print "bar\n"; 42);
foo
bar
val it = 42 : int 
```

从这里我们可以看到，序列的最终结果是`exp_n`评估结果。

由于序列经常用在 let 表达式中，因此可以写成以下（没有前面提到的括号）

```
let dec in exp_1 ; ... ; exp_n end 
```

**奖金信息**

序列实际上是一系列案例的派生形式（句法糖）。以下

```
(expr_1 ; ... ; exp_n ; exp) 
```

相当于

```
case expr_1 of _ => 
  case ... =>
    case exp_n of _ => exp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T22:48:05.750

*   首先，声明一个**异常**：

    > ```
    > exception OutOfRangeException; 
    > ```

*   定义将引发异常的函数：

    > ```
    > fun someFunc x =
    >   if x < 0 then 
    >     raise OutOfRangeException
    >   else [1,2,3,4] (*return some list*) 
    > ```

*   最后，通过打印消息并返回空列表来处理异常的函数：

> ```
> fun someFunc_test x=    
>   (someFunc x) handle OutOfRangeException => (print "exception"; []) 
> ```

# php - 每 5 分钟从 00:00 - 23:55 创建阵列时间表

> ID：15886831
> 
> 赞同：5
> 
> 时间：2013-04-08T18:59:49.710
> 
> 标签：php, datetime, time

我想创建一个从 00:00 到 23:55 的所有 5 分钟时间的数组

在这个论坛上我发现：

```
$minutes = 5;
$endtime = new DateTime('2012-01-01 09:00');

//modified the start value to get something _before_ the endtime:
$time = new DateTime('2012-01-01 00:00');
$interval = new DateInterval('PT' . $minutes . 'M');

while($time < $endtime){
    $time->add($interval);
echo $time->format('Y-m-d H:i');
} 
```

如何更改它以便输出可以与 json 一起使用？

例如：-

$aArray = {"00:00":"00:00","00:05":"00:05", ......"23:55":"23:55"}

我的问题不在于创建 json，而在于创建没有日期部分的小时/分钟列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T20:01:53.297

你几乎都在那里，只是小 tweek 和 Terje 建议使用 H:i。也许是这样的：

```
$startTime  = new \DateTime('2010-01-01 00:00');
$endTime    = new \DateTime('2010-01-01 23:55');
$timeStep   = 5;
$timeArray  = array();

while($startTime <= $endTime)
{
    $timeArray[] = $startTime->format('H:i');
    $startTime->add(new \DateInterval('PT'.$timeStep.'M'));
}

echo json_encode($timeArray); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T19:21:07.283

控制字段选择的参数`DateTime::format`如下：

*   Y：年份
*   米：月
*   d: 天
*   H：小时
*   我：分钟

仅获取小时和分钟：`'H:i'`用作格式字符串。

有关更多格式选项：请参阅[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

如果你不能使用 DateTime 函数，我会生成这样的数组：

```
$times = array();
for ($h = 0; $h < 24; $h++){
  for ($m = 0; $m < 60 ; $m += 5){
    $time = sprintf('%02d:%02d', $h, $m);
    $times["'$time'"] = "'$time'";
  }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:01:59.407

尝试：

```
echo json_encode($Var); 
```

这应该可以解决问题。在此处查看手册：[http ://www.php.net/manual/en/function.json-encode.php](http://www.php.net/manual/en/function.json-encode.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-26T11:32:42.657

我知道这已经很晚了，但下面的方法可能对某人有帮助

```
$step = 5;
$periods = new DatePeriod(
    new DateTime("2021-01-01 00:00:00"),
    new DateInterval('PT' . $step . 'M'),
    new DateTime("2021-01-01 23:59:00")
);

foreach($periods as $d){
    echo $d->format("H:i");
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-08T20:21:43.913

必须先更新我的 php 版本才能使用这些 DateTime 类:(所以现在我只是把它写出来并使用了 15 分钟的间隔，例如：

```
function json_select_starttijd_ronde()
{
$jsonStarttijd_ronde = array();

$jsonStarttijd_ronde['00:00'] = '00:00';
$jsonStarttijd_ronde['00:15'] = '00:15';
    // etcetera

$jsonStarttijd_ronde['23:45'] = '23:45';

return $jsonStarttijd_ronde;

} 
```

# node.js - 如何在流星上创建自动增量字段？

> ID：15886833
> 
> 赞同：9
> 
> 时间：2013-04-08T18:59:53.237
> 
> 标签：node.js, mongodb, meteor

我需要一个自动增量字段，但不是用于主 ID，它只是为客户支持应用程序的用户提供一个易于记忆的案例编号。

我发现这篇文章解释了如何在 mongodb [http://docs.mongodb.org/manual/tutorial/create-an-auto-incrementing-field/](http://docs.mongodb.org/manual/tutorial/create-an-auto-incrementing-field/)上创建自动增量字段，但 minimongo 尚不支持此解决方案。

如何实现此功能？我不在乎解决方案是否由于错误而跳过了一些连续的案例编号，但案例编号必须是唯一的。

是否有另一种方法来生成唯一且简短的案例编号？我不想给用户一个像 PxyooJWSKc3sMz6Lc 这样的案例代码，因为他们必须参考案例编号的问题。

**编辑：**

Minimong 不支持 findAndModify，所以我不能使用我发布的链接中列出的第一个解决方案。第二种解决方案还需要 minimongo 上没有的方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-08T21:27:29.467

使用[mongo-counter 包](https://github.com/awwx/meteor-mongo-counter)，可以使用方法创建增量器`incrementCounter(name)`。该实现基于[创建一个自动递增序列字段](http://docs.mongodb.org/manual/tutorial/create-an-auto-incrementing-field/#a-counters-collection)直接访问数据库而不通过流星集合。

```
Meteor.methods({
    'addRecord':function(doc) {
        doc.id = incrementCounter('docId');
        MyCollection.insert(doc);
        return doc.id;
    }
}); 
```

**更新**

Atmosphere 上有[新的 mongo counter 包](https://atmospherejs.com/?q=mongo-counter)，可能比我最初的建议要好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T06:43:15.237

那么有几种方法可以做到这一点。如果您需要它绝对一致，您可以将当前整数存储在您的集合中并使用 Meteor.call 添加新记录，而不是从客户端执行此操作。

例如

**服务器端js**

```
Meteor.methods({
    'addRecord':function(doc) {
        currentId = MyCollection.findOne({},{sort:{id:-1}}).id || 1;
        doc.id = currentId + 1;
        MyCollection.insert(doc);
        return doc.id;
    }
}); 
```

**客户端js**

```
doc = {name:"Bob"}
//MyCollection.insert(doc)

//Use this instead
Meteor.call("addRecord", doc, function(err,result) {
    if(result) {
        console.log("Successfully added new record with auto_inc id " + result);
    }
} 
```

使用 Meteor.call 执行此操作会丢失一件事：延迟补偿。

## 其他可能性

您可以存储从 Unix 时间戳构建的内容并将其缩短为更适用的内容（例如，通过切断前几位数字）：

```
new Date().getTime().toString().substr(4) 
```

# java - 实体管理器提交中的更多信息

> ID：15886836
> 
> 赞同：2
> 
> 时间：2013-04-08T18:59:59.290
> 
> 标签：java, jpa, eclipselink

我将 eclipselink 与 jpa 一起使用，当我确实提交时，有时我会因缺少信息而出错，有一种方法可以获得额外的信息错误，可以帮助我快速找到错误的原因？

```
entityManager.getTransaction().commit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:43:54.683

这是提交本身失败的典型情况。最常见的是当数据库中存在约束时，JPA 层不知道什么。例如，在您的数据库表列上，您可能有一个 JPA 中未定义的唯一约束，在这种情况下，提交将引发错误。所以我的建议是检查违反数据库约束的可能性。此外，您应该了解`javax.transaction.RollbackException`您的交易：

```
try {
  entityManager.getTransaction().begin();
  ...
  entityManager.getTransaction().commit();
} catch (RollbackException e1) {
  System.out.println(e1.getMessage());
  System.out.println(e1.getCause());
  throw ...;
} 
```

`e1.getCause()`应该包含违反的约束。至少在使用文明的数据库和 JDBC 驱动程序时:)。

# android - 使用 SurfaceView 的页面中未显示球。为什么？

> ID：15886838
> 
> 赞同：0
> 
> 时间：2013-04-08T19:00:01.307
> 
> 标签：android, surfaceview

我想编写一个程序，通过 SurfaceView 在屏幕上移动球并更改 drawCircle() 方法的 X 参数，但程序在屏幕上不显示任何内容，只显示黑页。

这是我的代码。

测试表面.java：

```
 public class TestSurface extends SurfaceView implements SurfaceHolder.Callback{
SurfaceHolder surfaceHolder;

public TestSurface(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
    getHolder().addCallback(this);
}

public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

public void surfaceCreated(SurfaceHolder holder) {
    // TODO Auto-generated method stub
    Thread thread=new Thread();
    thread.start();
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // TODO Auto-generated method stub

}

public void drawing(Canvas canvas){
    drawingShape(canvas);
}
int x=100;
public void drawingShape(Canvas canvas){
    canvas.drawColor(Color.BLACK);
    Paint paint=new Paint();
    paint.setColor(Color.RED);
    canvas.drawCircle(x, 100, 50, paint);
    x+=2;
}

public void run(){
    Canvas canvas;
    while(true){
        canvas=null;
        try{
            synchronized(surfaceHolder){
                canvas=getHolder().lockCanvas();
                drawing(canvas);
            }
        }finally{
            if(canvas!=null)
                getHolder().unlockCanvasAndPost(canvas);
        }
    }
}
 } 
```

MainActivity.java：

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    TestSurface test=new TestSurface(this);
    setContentView(test);

}
} 
```

我的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:05:05.857

您的变量`surfaceHolder`永远不会在调用时设置`synchronized()`

考虑添加：

```
surfaceHolder = getHolder(); 
```

...给你的构造函数。

根据以下评论进行编辑::

```
Thread thread = new Thread(new Runnable() {
  public void run() {
    Canvas canvas;
    while(true){
      canvas=null;
      try{
        synchronized(surfaceHolder){
          canvas=getHolder().lockCanvas();
          drawing(canvas);
        }
      }finally{
        if(canvas!=null)
          getHolder().unlockCanvasAndPost(canvas);
      }
      Thread.Sleep(1000);
    }
  }
}).start(); 
```

# perforce - Perforce 编辑/打开只能通过仓库名称工作，而不是本地名称

> ID：15886839
> 
> 赞同：3
> 
> 时间：2013-04-08T19:00:06.507
> 
> 标签：perforce

我设置了我的 perforce 客户端，但在尝试从客户端根目录的子目录中简单地执行“p4 编辑 file.txt”时遇到问题，其中 file.txt 是该目录本地的签入文件。换句话说，如果我执行“p4 have”，我会在列表中看到“//depot/folder/file.txt#2 - /proj/folder/file.txt”。p4 同步似乎很好。但是，“p4 edit file.txt”会给出错误“文件不在客户端”。

我终于通过使用仓库名称获得了 p4 编辑工作。“p4 edit //depot/folder/file.txt”确实有效，奇怪的是它修改了本地文件以具有写权限。

知道问题是什么吗？通过引用本地文件名，我在同一系统上有其他客户端，它们可以按照您期望的方式工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T02:37:08.087

我在使用覆盖映射（客户端视图中带有前导加号的条目）时遇到过这样的问题。

通过更改客户端视图，我也遇到了类似的问题，但之后没有执行完整的“p4 同步”以重新排列我工作站上的所有文件以匹配更新的视图。

您是否有任何机会适合其中任何一种情况？

您是否尝试过运行“p4 where file.txt”和“p4 where //depot/folder/file.txt”？通常，该命令对于找出命令行上的文件名语法未成功解析为存储库文件名的原因非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T16:04:09.503

我有一个类似的问题，我想在这里记录它，因为它是一个追查的虫子，谷歌搜索可能会导致有人在这里有同样的错误。

我有一个分支，我们称之为//depot/foo，我创建了另一个分支来生成一个变体，称之为//depot/foo_bar。从 foo 分支 foo_bar 的步骤，其中：

```
 p4 branch foo_bar 
```

要创建分支规范，然后

```
 p4 integrate -b foo_bar
  p4 submit 
```

我还将 foo_bar 添加到我的客户端工作区。

在此之后，我可以编辑、访问 P4V 中 foo_bar 分支上的所有内容，但我用 p4 尝试的任何命令行命令都会出现错误“文件不在客户端”。

需要明确的是 - 在 P4V 中工作 - p4 命令行中的“不在客户端上的文件”。

原来，分支规范中有一个错误，我添加了一个额外的“。” 例如

```
 View:
    //depot/foo/... //depot/foo_bar/.... 
```

我尝试删除虚假的句号并重新整合。这导致命令行工作正常，但 P4V 具有分支中每个文件的两个副本，一个普通文件和一个带有“。”的文件名。在末尾。同样，需要明确的是，文件第一次看起来很正常 - 没有虚假的“。” 在文件名上，重新集成后 - 文件数量翻倍，但仅在 p4v depot 视图中 - 磁盘上工作区中的每个文件只有一个副本。

最后，我删除了分支并从头开始。

系统配置

*   操作系统：Windows 7 64 位
*   P4服务器版本：P4D/LINUX26X86_64/2012.1/512349（2012/08/18）
*   P4V 版本：Rev. Perforce Visual Client/NTX64/2012.1/500245
*   P4 客户端版本：修订版 P4/NTX64/2012.1/490371 (2012/07/02)。

# django - Django i18n 资源管理器验证失败

> ID：15886840
> 
> 赞同：0
> 
> 时间：2013-04-08T19:00:10.587
> 
> 标签：django

我在我的站点范围模板中使用以下代码...

```
{% for lang in languages %}
                        <li>
                            <form name="setLang{{ lang.1}}" action="/i18n/setlang/" method="POST">{% csrf_token %}
                                <input name="next" type="hidden" value="/" />
                                <input type="hidden" name="language" value="{{ lang.0 }}" />
                                <a class='{% if LANGUAGE_CODE == lang.0  %}selected{% endif %}' href="#" onclick="document.setLang{{ lang.1 }}.submit();return false;">{{ lang.0 }}</a>
                            </form>
                       </li>
                      {% endfor %} 
```

在 urls.py 我有

```
(r'^i18n/', include('django.conf.urls.i18n')) 
```

但是在 Internet Explorer 上，我收到 csrf 验证失败错误...页面上有两个表单的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:18:07.317

好吧，我不确定这是否能解决您的问题，但您绝对应该在后面加一个空格， `{{ lang.1`这样它看起来像`{{ lang.1 }}`. 至少值得尝试一下，看看语义是否在某个地方造成了中断。

# ember.js - Ember，使用模型

> ID：15886841
> 
> 赞同：0
> 
> 时间：2013-04-08T19:00:28.400
> 
> 标签：ember.js, ember-router

我对如何在 Ember.js 中从我的（动态）模型中设置检索信息感到困惑

这是我的模型（到目前为止有效）：

```
App.Router.map(function() {
        this.resource('calendar', { path: '/calendar/:currentMonth'});
});

App.CalendarRoute = Ember.Route.extend({
  model: function (params) {
    var obj = {
       daysList: calendar.getDaysInMonth("2013", params.currentMonth),
       currentMonth: params.currentMonth
    };
    return obj;
  }
}); 
```

我只想取回'currentMonth'属性：

```
App.CalendarController = Ember.Controller.extend({
  next: function() {
    console.log(this.get('currentMonth'));
  }
}); 
```

但我收到“未定义”错误。

我是否必须明确声明我的模型 (Ember.model.extend()) 才能获取和设置值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:13:07.350

关于将 a[设置](http://emberjs.com/guides/routing/setting-up-a-controller/)`Model`为`Controller`.

在 a`Route`中，模型可以是您定义的任何对象或对象集合。有大量适用的约定，在大多数情况下，您不必指定任何内容，因为它使用各种对象的名称来指导自己构建查询并设置控制器的内容，但是，在您的特定代码，您将`obj`作为模型返回。

Ember 提供了一个名为的钩子`setupController`，它将将此对象设置到控制器的`content`属性中。例子：

```
App.CalendarRoute = Ember.Route.extend({
  model: function (params) {
    var obj = {
       daysList: calendar.getDaysInMonth("2013", params.currentMonth),
       currentMonth: params.currentMonth
    };
    return obj;
  },
  setupController: function(controller, model) {
     // model in this case, should be the instance of your "obj" from "model" above
     controller.set('content', model);
  }
}); 
```

话虽如此，你应该尝试`console.log(this.get('content.currentMonth'));`

# image-processing - 人体姿态估计 - 身体部位的有效链接

> ID：15886843
> 
> 赞同：8
> 
> 时间：2013-04-08T19:00:38.450
> 
> 标签：image-processing

**问题描述：** 我正在从事一个项目，其目标是识别图像中的人的身体部位（躯干、头部、左右臂等）。该方法基于找到人体的各个部分（假设），然后搜索最佳姿势配置（= 真正构成人体的所有部分）。[此链接http://www.di.ens.fr/willow/events/cvml2010/materials/INRIA_summer_school_2010_Andrew_human_pose.pdf](http://www.di.ens.fr/willow/events/cvml2010/materials/INRIA_summer_school_2010_Andrew_human_pose.pdf)更好地描述了这个想法。

该假设是在分别对每个身体部位运行检测算法（这里我使用来自机器学习领域的分类器）之后获得的。因此，每个假设的类型都是已知的。此外，每个假设都有一个位置（图像中的 x 和 y 坐标）和方向。

为了确定将两个部分连接在一起的成本，可以考虑将头部类型的每个假设与躯干类型的每个假设联系起来（例如）。但是，位于图像右上角的头部假设不能（从人类的角度）与位于图像左下角的躯干假设联系起来。我试图根据最后一条语句以及由于执行时间来避免这些类型的链接。

**问题：**我计划通过考虑到可能是链接候选的最远假设的距离来减少搜索空间。解决这个搜索问题的最快方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:40:05.307

对于类似的问题，我将源图像分成 16 个（或更多，取决于您尝试链接的部分的相对大小）较小的图像，分别在每个图像中执行检测和链接步骤，以及额外的步骤，您将只为每个子图像执行一个链接步骤，并且它是（可能是 8 个）邻居。

在这种情况下，您甚至永远不会尝试将左上角的一个部分与右下角的一个部分联系起来，而且作为额外的奖励，您的问题的第一部分现在非常平行。

更新：您可以先对图像进行边缘检测，并且永远不要将图像切成两半，因为这意味着将边缘切成两半。递归地这样做可以让你得到很多带有身体部位的小图像，然后你可以单独处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:13:56.970

这种离散分配问题可以使用[匈牙利算法](http://en.wikipedia.org/wiki/Hungarian_algorithm)来解决。

在成本（=距离）矩阵的计算中，当距离大于预定义的阈值时，您可以将条目设置为某个无限或非常高的值，这将防止算法将头部分配给太远的躯干离开。

最后一种技术在跟踪讲座中也称为**门控。**

# python - python：找到围绕某个 GPS 位置的圆的 GPS 坐标的优雅方法

> ID：15886846
> 
> 赞同：9
> 
> 时间：2013-04-08T19:00:56.967
> 
> 标签：python, dictionary, math, gps, coordinates

我有一组十进制的 GPS 坐标，我正在寻找一种方法来找到每个位置周围半径可变的圆中的坐标。

这是我需要[的一个例子。](http://green-and-energy.com/downloads/test_circle.html)它是一个以`1km`坐标为半径的圆`47,11`。

我需要的是**查找圆坐标的算法**，因此我可以在我的 kml 文件中使用多边形来使用它。非常适合python。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-08T23:12:46.497

另请参阅[向 GPS 坐标添加距离，](https://stackoverflow.com/questions/2839533/adding-distance-to-a-gps-coordinate/2839560)了解纬度/经度和短程距离之间的简单关系。

这有效：

```
import math

# inputs
radius = 1000.0 # m - the following code is an approximation that stays reasonably accurate for distances < 100km
centerLat = 30.0 # latitude of circle center, decimal degrees
centerLon = -100.0 # Longitude of circle center, decimal degrees

# parameters
N = 10 # number of discrete sample points to be generated along the circle

# generate points
circlePoints = []
for k in xrange(N):
    # compute
    angle = math.pi*2*k/N
    dx = radius*math.cos(angle)
    dy = radius*math.sin(angle)
    point = {}
    point['lat']=centerLat + (180/math.pi)*(dy/6378137)
    point['lon']=centerLon + (180/math.pi)*(dx/6378137)/math.cos(centerLat*math.pi/180)
    # add to list
    circlePoints.append(point)

print circlePoints 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T07:27:18.157

在此处使用“从起点给定距离和方位的目标点”公式：

[http://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

以您的中心点为起点，以您的半径为距离，并在从 0 度到 360 度的多个方位上循环。这会给你一个圆圈上的点，并且会在两极工作，因为它在任何地方都使用大圆圈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T09:15:26.183

这是一个简单的三角问题。

将坐标系 XOY 设置在圆心。从 开始`y = 0`并找到您的`x`价值`x = r`。`a`然后只需按角度（以弧度为单位）围绕原点旋转半径。您可以使用 , 找到您在圆上的下一个点的`Xi = r * cos(a)`坐标`Yi = r * sin(a)`。重复最后`2 * Pi / a`几次。

就这样。

**更新**

考虑到@poolie 的评论，可以通过以下方式解决问题（假设地球是正确的球体）。`D`考虑通过我们的点（称为）具有最大直径的地球横截面`L`。我们圆的 1 公里长的直径就变成了`AB`地球横截面圆的弦（称为 ）。因此，弧的长度`AB`变为`(AB) = D * Theta`，其中`Theta = 2 * sin(|AB| / 2)`。此外，很容易找到所有其他维度。

![](https://i.stack.imgur.com/Z4MBS.png)

# python - Camelot 单表继承

> ID：15886847
> 
> 赞同：1
> 
> 时间：2013-04-08T19:00:57.813
> 
> 标签：python, sqlalchemy, single-table-inheritance

我尝试将 SqlAlchemy 单表继承示例移植到 Camelot

```
class Person(Entity):
    __tablename__ = 'people'
    id = Column(sqlalchemy.Integer, primary_key=True)
    discriminator = Column('type', sqlalchemy.String(50))
    __mapper_args__ = {'polymorphic_on': discriminator}

    class Admin(EntityAdmin):
        verbose_name = 'Person'
        list_display = ['id','discriminator']

class Engineer(Person):
    __mapper_args__ = {'polymorphic_identity': 'engineer'}
    primary_language = Column(sqlalchemy.String(50))

    class Admin(EntityAdmin):
        verbose_name = 'HR'
        list_display = ['id','discriminator'] 
```

但这会产生以下错误：

```
 Traceback (most recent call last):
    File "D:/Programming/test/main.py", line 41, in <module>
      start_application()
    File "D:/Programming/test/main.py", line 37, in start_application
      from testing.application_admin import MyApplicationAdmin
    File "D:\Programming\test\testing\application_admin.py", line 6, in <module>
      from testing.model import Engineer, Person
    File "D:\Programming\test\testing\model.py", line 17, in <module>
      class Engineer(Person):
    File "C:\Python27\lib\site-packages\camelot\core\orm.py", line 334, in __init__
      super( EntityMeta, cls ).__init__( classname, bases, dict_ )
    File "C:\Python27\lib\site-packages\sqlalchemy\ext\declarative.py", line 1343, in __init__
      _as_declarative(cls, classname, cls.__dict__)
    File "C:\Python27\lib\site-packages\sqlalchemy\ext\declarative.py", line 1336, in _as_declarative
      **mapper_args)
    File "C:\Python27\lib\site-packages\sqlalchemy\orm\__init__.py", line 1129, in mapper
      return Mapper(class_, local_table, *args, **params)
    File "C:\Python27\lib\site-packages\sqlalchemy\orm\mapper.py", line 197, in __init__
      self._configure_inheritance()
    File "C:\Python27\lib\site-packages\sqlalchemy\orm\mapper.py", line 473, in _configure_inheritance
      self.local_table)
    File "C:\Python27\lib\site-packages\sqlalchemy\sql\util.py", line 303, in join_condition
      "between '%s' and '%s'.%s" % (a.description, b.description, hint))
  sqlalchemy.exc.ArgumentError: Can't find any foreign key relationships between 'people' and 'engineer'. 
```

我在做一些不是 Camelot 方式的事情吗？为模型实现继承的最佳方法是什么？我在 Camelot 的文档中找不到任何内容。

编辑：

我尝试将以下内容添加到工程师类

```
__tablename__ = 'people'
__table_args__ = {'extend_existing': True} 
```

但是现在在我尝试选择 Person 或 Engineer 表之后，或者如果我尝试添加它们中的任何一个，我会得到：

```
C:\Python27\lib\site-packages\sqlalchemy\sql\expression.py:2276: SAWarning: Column u'people_id' on table <sqlalchemy.sql.expression.Select at 0x343fb90; Select object> being replaced by another column with the same key.  Consider use_labels for select() statements.
self[column.key] = column 
```

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:05:24.370

在你的 Engineer 类中，`__tablename__`需要设置为 None，否则 Camelot 会分配一个默认的表名，SQLAlchemy 会假设多表继承，因此需要外键关系。

# android - Android 应用的最佳实践架构

> ID：15886853
> 
> 赞同：0
> 
> 时间：2013-04-08T19:01:12.903
> 
> 标签：android

我对 Android 开发很陌生，但对 Java 有基本的了解（来自 Python）。我正在开发一个简单的应用程序，该应用程序将并排列出 10 个 WebView，但是在找到构建布局和活动的正确方法时遇到了一些麻烦。

我有 - 例如 - 一个带有我想要构建的 uri 的数组列表。由此我可以构建相同数量的 WebView。如何将它们并排放置（占据屏幕的 100%）并允许用户（我）在它们之间滑动？这应该在单个活动中还是每次滑动都应该开始一个新活动？

编辑：抱歉重复的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:03:20.303

您可以将它们实现为十个单独的 WebView，然后将它们放在[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)中。ViewPager 将自动处理 WebView 之间的左右滑动。

# jquery - 没有添加内容问textarea

> ID：15886854
> 
> 赞同：1
> 
> 时间：2013-04-08T19:01:19.063
> 
> 标签：jquery, textarea, append

我有一个文本区域：

```
 <script type="text/javascript">
$(document).ready(function(){
$("textarea").append("Hola");
}
</script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<textarea name="txt"></textarea> 
```

我想要的是，当您加载页面时，将“Hello”一词添加到 textarea 但不是因为它不起作用......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:02:22.723

3个问题：

*   你缺少一个右括号（[控制台](https://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers)应该显示它）
*   您必须使用[val](http://api.jquery.com/val/)来更改输入的值。
*   在导入之前使用 jQuery

采用

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $("textarea").val("Hola");
  });
</script> 
```

# rally - 使自定义拉力赛网格成为支持批量编辑的网格

> ID：15886856
> 
> 赞同：0
> 
> 时间：2013-04-08T19:01:26.907
> 
> 标签：rally

是否可以将批量编辑功能添加到自定义 Rally 应用程序中的网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:08:41.943

不幸的是，没有任何预先构建的钩子可供您切换以使 AppSDK2 网格可批量编辑。不过，我可以看到这在哪里有用 - 我建议将此作为功能请求发布到[Rally Ideas](https://ideas.rallydev.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T22:30:46.837

使用 App SDK v2.0rc3，您可以将“enableBulkEdit: true”添加到网格配置列表中，它将添加该功能

# python - Python字符串拆分

> ID：15886857
> 
> 赞同：2
> 
> 时间：2013-04-08T19:01:31.403
> 
> 标签：python, string, hex

我需要取一个十六进制对，例如并将`7A`其分解为单独的变量以供进一步操作。拆分此字符串的正确方法是什么，因为我没有尝试删除任何字符，也没有任何分隔符？`7``A`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T19:05:25.003

您可以使用[列表](http://www.tutorialspoint.com/python/python_lists.htm)：

`list('7A')`这将返回一个包含 7 和 A 的列表：

```
['7', 'A'] #Note that the single quote will not appear when you print the content :) 
```

（`list('7A')[0]`包含 7 并`list('7A')[1]`包含 A）

或通过：

```
[x for x in '7A'] 
```

如果你的字符串中有超过 2 个字符并且你写：

```
lst = list(youtString) 
```

然后`lst`将包含字符串的所有字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-08T19:13:37.240

**将它们拆分为“作为单独的变量以供进一步操作”：**

```
s = "7A"
firstHex, secondHex = list(s) 
```

**输出：**

```
firstHex = 7
secondHex = A 
```

注意：仅当有两位十六进制字符时才有效。

# php - 如何将动态创建的输入框的值插入数据库

> ID：15886858
> 
> 赞同：0
> 
> 时间：2013-04-08T19:01:33.657
> 
> 标签：php, javascript, mysql, codeigniter

你好开发人员我正在使用java脚本函数动态创建2个文本框和1个选择框......现在我想将创建的（n）字段的值发布到数据库（相关表）中，因为我正在使用codeigniter所以我发布脚本和代码

这是我正在使用的简单 java 脚本

```
<script>
  var counter=1;
  function generateRow() {
    var count="<font color='red'>"+counter+"</font>";
    var temp ="<p>&nbsp;&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox' name='stop"+counter+"' placeholder='Stop Name'></input></div>&nbsp;&nbsp;&nbsp;<div class='_25'><input type='textbox' id='textbox' name='timing"+counter+"' placeholder='Timing'></input></div>&nbsp;<div class='_25'><select id='ampm"+counter+"' name='ampm"+counter+"'><option>a.m</option><option>p.m</option></select>  </div>";

    var newdiv = document.createElement('div');
    newdiv.innerHTML = temp + count;

    var yourDiv = document.getElementById('div');
    yourDiv.appendChild(newdiv);
    counter++;
  }
</script> 
```

这是我对 php 文件的划分

```
 <div id="div">
 </div>

 <p>&nbsp;</p>
 <div class="_25">
    <p>
      <input type="button" name="button" class="button red" id="button" value="Add"  onclick="generateRow() "/></a>
    </p>
 </div>
 <input type='button' value='Remove Button' id='removeButton'> 
```

这是我的相关表字段

```
route_number    stop_name   am_pm   timing 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:17:13.380

我最喜欢的方法是尽可能多地使用 DOM。除非绝对必要，否则不要使用计数器（它们只是错误的来源）。这是一个简单的例子：

Html/JS/jQuery（可能会有所不同，我制作了这个以使其易于理解）：

```
<form method="POST" id="theForm">
    <div id="fields">
        <input type="text" name="fields[]"/>
    </div>
    <input type="button" id="addField" value="Add Field"/>
</form>
<script type="text/javascript">
    $(document).ready(function() {
        $('#addField').click(function() {
            $('#fields').append(
                $('<input type="text" name="fields[]"/>')
            );
        })
    });
</script> 
```

请注意我不需要使用任何类型的计数变量。就像 PHP 一样，您可以创建一个 POST 变量数组，而无需指定索引，`[]`并且服务器（或浏览器？我不确定）将为您构建数组。字段在页面上呈现的顺序`<input />`将是它们通过提供给您的 PHP 的顺序`$_POST`。这段代码...

```
foreach ($_POST['fields'] as $fieldIndex => $fieldValue) {
    doStuff($fieldValue);
} 
```

... 将按照添加的顺序处理每个字段。您甚至可以使用 JavaScript*重新排序*或*删除*输入，这将反映在`$_POST`. 这种方法与 JSON 编码相结合，可以快速轻松地处理多输入、自由格式的字段。

# 更新：

将上面的代码应用到您的用例需要一个可能不明显的小添加。您需要为三个输入（停止、计时和安培）中的每一个创建一个数组，如下所示：

```
<form method="POST" id="theForm">
    <div id="fields">
        <input type="text" name="fields[stop][]"/>
        <input type="text" name="fields[timing][]"/>
        <select name="fields[ampm][]">
            <option value="am">AM</option>
            <option value="pm">PM</option>
        </select>
        <br/>
    </div>
    <input type="button" id="addField" value="Add Field"/>
</form>
<script type="text/javascript">
    $(document).ready(function() {
        $('#addField').click(function() {
            $('#fields').append(
                $('<input type="text" name="fields[stop][]"/>'),
                $('<input type="text" name="fields[timing][]"/>'),
                $('<select name="fields[ampm][]"><option value="am">AM</option><option value="pm">PM</option></select>'),
                $('<br/>')
            );
        })
    });
</script> 
```

使用一些测试数据填写此表格会产生以下数组：

```
[fields] => Array
(
    [stop] => Array
        (
            [0] => aaa
            [1] => bbb
        )

    [timing] => Array
        (
            [0] => 1111
            [1] => 2222
        )

    [ampm] => Array
        (
            [0] => am
            [1] => pm
        )

) 
```

在 PHP 中处理它需要一个简单的老式循环：

```
$numFields = count($_POST['fields']['stop']);

for ($i = 0; $i < $numFields; $i++) {

    // Pack the field up in an array for ease-of-use.
    $field = array(
        'stop' => $_POST['fields']['stop'][$i],
        'timing' => $_POST['fields']['timing'][$i],
        'ampm' => $_POST['fields']['ampm'][$i]
    );

    saveToDatabase($field);
} 
```

不幸的是，我现在没有时间确保所有这些都是正确的。应该是，如果不是，它可能仍然有帮助:)。我会在几个小时后回来查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:04:22.663

命名您的动态输入框`"stop["+counter+"]"`（使用大括号作为名称的一部分），而不是在名称的末尾添加一个计数器。然后在您的发布数据中，`$_POST['stop']`将是一个值数组，您可以使用计数器作为子数组中的键进行 foreach 循环。并将`$_POST['stop'][1]`对应于`$_POST['timing'][1]`...等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:10:42.890

您可以构造以下 HTML`input`字段：

```
<input type="text" name="data[]" />
<input type="text" name="data[]" />
<input type="text" name="data[]" />
// ... 
```

`data`当你`var_dump($_REQUEST['data'])`. 试试看。您甚至不需要索引`data[]`数组，因为 PHP 会为您完成。

您可能希望使用循环构造处理您的`$_REQUEST['data']`或`$_POST['data']`数组：`foreach`

```
foreach($_REQUEST['data'] as $data){
  // $data is the corresponding input field's value
} 
```

# python - 将计数器写入文件

> ID：15886859
> 
> 赞同：0
> 
> 时间：2013-04-08T19:01:36.203
> 
> 标签：python

是否有直接的方法来编写`c=Counter()`针对文件声明的计数器。目前我一次使用一对，将它们写入文件。是一种pythonic的方式来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:27:38.243

`pickle.dump(c, file_obj)`如果您已经拥有文件对象，则可以使用。或者，`file_obj.write(pickle.dumps(c))`虽然第一个是首选。

如果您需要安全地完成此操作，则应将其写入临时文件，然后将其移动到所需位置。这样，如果进程在写入过程中终止，您可以避免文件损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:24:41.410

一个猜测，因为我使用没有 Counter 的 3.6

```
 import pickle
 c = Counter()
 f = open("some_file.txt")
 pickle.dump(c,f) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:06:47.353

你可以使用

```
file.writelines('{0}={1}\n'.format(k,v) for k,v in c.items()) 
```

但这并不比循环好多少。

# syntax - 理解语法

> ID：15886869
> 
> 赞同：0
> 
> 时间：2013-04-08T19:02:12.297
> 
> 标签：syntax, foxpro

假设我有一个带有架构的 foxpro文件，因此有一个`.dbf`名为[Logical datatype](http://msdn.microsoft.com/en-US/library/ht3wzswb%28v=vs.80%29.aspx)的列。`active`

然后针对它运行以下查询：

```
select * from table.dbf where active =.T. and active 
```

在这种情况下，第二个是什么`active`意思？为什么？

任何文档也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:45:48.830

在 Foxpro 中使用逻辑字段时，您可以使用以下逻辑字段进行过滤：

```
 WHERE MyField = .t. 
```

或者

```
 WHERE MyField 
```

这些具有相同的含义。在您的示例中，第二个“活动”的含义与第一个“活动”相同。您可以删除第二个“活动”。

# azure - Azure 终结点协议差异

> ID：15886875
> 
> 赞同：2
> 
> 时间：2013-04-08T19:02:25.127
> 
> 标签：azure, azure-worker-roles

您好，我在开发过程中想知道，我可以用于端点的协议类型之间有什么区别？最新的 SDK 有，HTTP、HTTPS、UDP 和 TCP。我当然明白http和Https的区别是什么，我也明白TCP和UDP的区别。

从开发的角度来看，我不明白 TCP 和 HTTP 有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-28T01:32:14.813

TCP/UDP 是 OSI 模型中比 HTTP/HTTPS 更低级别的协议。实际上HTTPS结合了两件事，HTTP over SSL。

阅读描述[Osi 模型的 Wikipedia 文章](http://en.wikipedia.org/wiki/OSI_model#Layer_5:_session_layer)

HTTP 是第 7 层（应用程序）协议，因此有一套严格的规则来管理消息的构造方式以及什么被认为是有效的响应。它不关心实际连接是如何发生的或消息是如何路由的。

TCP 和 UDP 是第 5 层，这意味着它们涉及寻址、建立连接、打包和排序。在两个端点之间交换一系列字节（有效负载）所需的东西。

通常在开发软件时，您希望实现开放和已建立的协议，以简化与其他供应商的系统集成或开放端点供其他人使用的任务。在这种情况下，HTTP 或 HTTPS 是有意义的。

如果您的系统是一个封闭的系统，您可以同时控制客户端和服务器应用程序，或者性能至关重要，那么 TCP 可能是一个不错的选择。在此级别操作意味着您必须关注定义自己的有效负载结构、安全性、数据包丢失等问题。

# c - 获取实时键盘敲击以在 C 中执行功能

> ID：15886876
> 
> 赞同：0
> 
> 时间：2013-04-08T19:02:27.333
> 
> 标签：c

我正在研究我认为应该是一个简单的程序，我用谷歌搜索过，我能找到的只是 C#、C++ 的东西。

我想要完成的是启动我编写的程序`C`并让它监听某些击键。我编写了一个可以移动伺服的函数，因此我想集成向上和向下箭头键来执行将伺服移动到一个方向或另一个方向的功能。这可能`C`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T03:44:40.643

你是在linux还是windows上工作？基于此，可以使用替代方案。如果您在 Windows 上工作，您应该熟悉一个函数：kbhit()？虽然它现在已被弃用，但它的工作知识可能很有用:) 假设您正在使用 linux，您是否尝试过 NCurses？

取自[这里]：（[http://www.linuxmisc.com/9-unix-programmer/d5b30f8d1faf8d82.htm](http://www.linuxmisc.com/9-unix-programmer/d5b30f8d1faf8d82.htm)）

问题有三个方面：

1.  您必须检查数据是否在没有阻塞的情况下可用。一个简单的“读取”或 fgets 或任何会阻止您的进程，直到数据可用 - 您不希望这样。
2.  您必须绕过任何缓冲，否则您将不得不同时检查缓冲区和设备。
3.  您需要强制终端驱动程序在可用时为您提供数据，而不是将整个数据累积成一行。

从同一页面：

也就是说，我提出了以下笨拙、仓促编写、未注释的代码，这些代码可能具有指导意义，也可能没有（部分由我编辑，缺少括号且未缩进）

```
#include <stdio.h> 
#include <termios.h> 
#include <unistd.h> 
#include <sys/time.h> 
#include <sys/types.h> 

static struct termios orig_term; 
void u_cleanup(void) 
{ 
    tcsetattr(0, TCSANOW, &orig_term); 
}
int u_kbhit(void) 
{ 
    struct termios t; 
    int ret; 
    fd_set rfd; 
    struct timeval to; 
    static int first_hit=0; 
    if(first_hit==0) 
    { 
        if(tcgetattr(0, &t)!=0) exit(0); 
        orig_term=t; 
        cfmakeraw(&t); 
        if(tcsetattr(0, TCSANOW, &t)!=0) exit(0); 
        atexit(u_cleanup); 
        first_hit=1; 
    } 

    FD_ZERO(&rfd); 
    FD_SET(0, &rfd); 
    to.tv_sec=0; 
    to.tv_usec=0; 
    if(select(1, &rfd, NULL, NULL, &to)==1) return 1; 
    return 0; 
}
int u_getchar(void) 
{ 
    int ret; 
    fd_set rfc; 
    unsigned char buf; 
    if(read(0, &buf, 1)!=1) ret=0; 
    else ret=buf; 
    return ret; 
}

int main(void) 
{ 
    while(1) 
    { 
        if(u_kbhit()) 
        { 
            int key=u_getchar(); 
            printf("hit: %d\r\n", key); 
            if(key==3) 
            { 
                printf("you hit control-c\r\n"); 
                exit(0);                         
            }         
        } 
        usleep(100); 
    }
    return 0; // inaccessible code, to prevent compiler warning
 } 
```

# php - 如何从选定的标签中获取价值？

> ID：15886877
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:02:29.490
> 
> 标签：php, html, codeigniter, smarty

根据选择的选项，我有不同的费用。如何获得这个值？代码是：

```
.................

{if $value_selected == 5}

 {$taxa_transport = 5}

{/if}
            <td>Valoare transport:</td><td>{$taxa_transport} lei</td>
....................

<select id="id_judet" onchange="getLocalitati($(this).val())">
<option value="-1">-</option>
<option value="0">Alba</option>
<option value="1">Arad</option>
<option value="2">Arges</option>
<option value="3">Bacau</option>
<option value="4">Bihor</option>
<option value="5">Bistrita-Nasaud</option>
<option value="6">Botosani</option>
<option value="7">Braila</option>
<option value="8">Brasov</option>
...................................... 
```

如何获取 $value_selected 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:10:11.130

输入是客户端的，因此您需要一些 JavaScript。我建议在选项更改时使用 AJAX 发布值：

```
$("#id_judet").change(function() {
    $.post("page.php", $(this).val(), function(data) {
        alert(data);
    });
} 
```

如果需要，您也可以发布到同一页面。

HTML 更改：

`<select id="id_judet" name="judet">`

一些PHP代码：

```
<?php

$value_selected = $_POST["judet"];

// Do whatever calculations here

?> 
```

# c++ - MPI C++ 矩阵加法、函数参数和函数返回

> ID：15886878
> 
> 赞同：2
> 
> 时间：2013-04-08T19:02:33.220
> 
> 标签：c++, mpi

在过去的 2 年里，我一直在从互联网上学习 C++，最后我需要深入研究 MPI。我一直在搜索 stackoverflow 和互联网的其他部分（包括[http://people.sc.fsu.edu/~jburkardt/cpp_src/mpi/mpi.html](http://people.sc.fsu.edu/~jburkardt/cpp_src/mpi/mpi.html)和[https://computing.llnl.gov/tutorials/mpi /#LLNL](https://computing.llnl.gov/tutorials/mpi/#LLNL)）。我想我已经掌握了一些逻辑，但我很难理解以下内容：

```
#include (stuff)
using namespace std;

vector<double> function(vector<double> &foo, const vector<double> &bar, int dim, int rows);

int main(int argc, char** argv)
{
    vector<double> result;//represents a regular 1D vector
    int id_proc, tot_proc, root_proc = 0;
    int dim;//set to number of "columns" in A and B below
    int rows;//set to number of "rows" of A and B below
    vector<double> A(dim*rows), B(dim*rows);//represent matrices as 1D vectors

    MPI::Init(argc,argv);
    id_proc = MPI::COMM_WORLD.Get_rank();
    tot_proc = MPI::COMM_WORLD.Get_size();

    /*
    initialize A and B here on root_proc with RNG and Bcast to everyone else
    */

    //allow all processors to call function() so they can each work on a portion of A
    result = function(A,B,dim,rows);

    //all processors do stuff with A
    //root_proc does stuff with result (doesn't matter if other processors have updated result)

    MPI::Finalize();
    return 0;
}

vector<double> function(vector<double> &foo, const vector<double> &bar, int dim, int rows)
{
    /*
    purpose of function() is two-fold:
    1\. update foo because all processors need the updated "matrix"
    2\. get the average of the "rows" of foo and return that to main (only root processor needs this)
    */

    vector<double> output(dim,0);

    //add matrices the way I would normally do it in serial
    for (int i = 0; i < rows; i++)
    {
        for (int j = 0; j < dim; j++)
        {
            foo[i*dim + j] += bar[i*dim + j];//perform "matrix" addition (+= ON PURPOSE)
        }
    }

    //obtain average of rows in foo in serial
    for (int i = 0; i < rows; i++)
    {
        for (int j = 0; j < dim; j++)
        {
            output[j] += foo[i*dim + j];//sum rows of A
        }
    }

    for (int j = 0; j < dim; j++)
    {
            output[j] /= rows;//divide to obtain average
    }

    return output;        
} 
```

上面的代码只是为了说明这个概念。我主要关心的是并行化矩阵加法，但令我惊讶的是：

1）如果每个处理器仅在该循环的一部分上工作（自然我必须修改每个处理器的循环参数）我使用什么命令将 A 的所有部分合并回一个所有处理器都具有的单个更新的 A他们的记忆。我的猜测是我必须做某种 Alltoall，其中每个处理器将其 A 的部分发送到所有其他处理器，但是我如何保证（例如）处理器 3 处理的第 3 行覆盖其他处理器的第 3 行，而不是偶然的第1行。

2）如果我在函数（）中使用Alltoall，是否必须允许所有处理器进入函数（），或者我可以使用...隔离函数（）

```
if (id_proc == root_proc)
{
    result = function(A,B,dim,rows);
} 
```

…然后在 function() 内部处理所有并行化。听起来很傻，我试图在一个处理器上做很多工作（带有广播），并且只是并行化耗时的大循环。只是试图在概念上保持代码简单，这样我就可以得到我的结果并继续前进。

3）对于平均部分，如果我想并行化它，我确定我可以使用减少命令，对吗？

另外，顺便说一句：有没有办法调用 Bcast() 使其阻塞？我想用它来同步我所有的处理器（增强库不是一个选项）。如果没有，那么我将使用 Barrier()。感谢您对这个问题的回答，感谢 stackoverflow 社区在过去两年中学习我如何编程！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:48:30.810

1）您正在寻找的功能是 MPI_Allgather。MPI_Allgather 将让您从每个处理器发送一行并在所有处理器上接收结果。

2) 是的，您可以在函数中使用某些处理器。由于 MPI 函数与通信器一起工作，因此您必须为此目的创建一个单独的通信器。我不知道这是如何在 C++ 绑定中实现的，但 C 绑定使用 MPI_Comm_create 函数。

3) 是的，请参阅 MPI_Allreduce。

旁白：Bcast 阻塞一个进程，直到分配给该进程的发送/接收操作完成。如果您想等待所有处理器完成他们的工作（我不知道您为什么要这样做），您应该使用 Barrier()。

额外说明：我不建议使用 C++ 绑定，因为它们已被贬值，而且您不会找到有关如何使用它们的具体示例。如果您需要 C++ 绑定，Boost MPI 是可以使用的库，但它并不涵盖所有 MPI 函数。

# php - 如何通过 php/ajax/javascript 动态检测蜂窝运营商？

> ID：15886882
> 
> 赞同：12
> 
> 时间：2013-04-08T19:02:54.430
> 
> 标签：php, mysql, mobile, sms, carrier

我问这个是因为我大部分时间都在 SO 上，似乎无法得到/找到答案。

这就是我想要做的（**不使用付费网关**）：

-首先，我正在建立一个包含各种信息和日期的数据库。

- 使用 cron 我将运行一个脚本，在该日期通过电子邮件向 SMS PHP 脚本发送各种信息（用户提供）给用户。

- 避免维护准确的蜂窝运营商列表。我想以某种方式 ping 号码并返回运营商和适当的“@carrier-email-extension”以发送消息。（我不想在注册过程中询问用户；简化注册 - 因为不是 PIA 并获得更多用户） - 我目前有一个下拉列表，列出了大约 50 家运营商（我知道我可能忘记或不小心遗漏了一些），但我不想维护列表。我想删除这部分表格。理想情况下，我想在输入时通过 ajax/javascript 检查号码，并在提交期间将运营商信息发送到 MYSQL。

- 用户已经同意从我的服务中获取 SMS 消息/更新/文本，因此没有恶意行为。他们在设置另一条消息时会同意：

> 您将在 {date}向**您的**手机号码 {mobile number} 发送一条包含以下信息 {listed information} 的 SMS 消息。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:09:28.013

它的两步过程。

1.  查找手机的国家/地区代码..您可以使用 Google API... Google 免费提供（Google：libphonenumber - Google 的电话号码处理库）

2.  网络代码列表可在 Wikipedia 上找到...对于每个国家/地区，您必须通过选择前几位国家/地区代码来实现它。（谷歌：移动国家代码 - 维基百科）

您将找到每个国家/地区的网络代码列表，您将看到运营商名称和 MC /C MNC 列表。当您从手机号码中找出一个国家的国家代码时，每个运营商都有一个唯一的 MCC MNC 。然后对于每个国家，您必须编写一个查找表；选择手机号码的前 3 位数字，并为他分配网络代码... 为您所在国家/地区的运营商做这个练习，您会明白的。

因为我为一个 [文本 API](http://innovativetxt.com)实现了它，所以我可以告诉你这个.. 它的工作量很大。祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T00:26:53.197

如果您想确定电话号码的实际运营商，您应该进行所谓的 HLR（*归属位置寄存器*）查找。许多消息传递服务都提供这样的服务，并且它们通常有一个 HTTP API。然而，它会花费你 - 每次查找都有一个价格，虽然很小，但所有这些都加起来了。

此外，如果您在特定国家/地区需要此功能，负责电话号码的监管机构可能有也可能没有某种可以查询号码数据的数据库服务。这些通常具有固定成本，因此如果您对该国家/地区的数字进行了足够多的查找以便获得回报，则应该进行数学计算。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-23T16:36:24.047

我也遇到了这个问题 - 这是一个快速的解决方案，它将为您提供手机运营商的电子邮件到 SMS 功能，仅给出手机号码：

```
<?php                               
// leave this blank - we may never implement an authentication key
$smsarc_API_key = ''; 

// enter the user's 10 digit cell phone number. 
// example format: $smsarc_to = '5556667777';
$smsarc_number = '3123094991'; 

// lookup carrier
$ch = curl_init();  curl_setopt ($ch, CURLOPT_URL, 'http://www.smsarc.com/api-carrier-lookup.php?sa_number='.$smsarc_number);   $AskApache_result = curl_exec ($ch);        $smsarc_message_status =  $AskApache_result; curl_close($ch);

// print the carrier lookup results
echo $smsarc_carrier;
?> 
```

来自他们网站的开发人员 API： [http ://www.smsarc.com/free-php-cell-phone-carrier-lookup/](http://www.smsarc.com/free-php-cell-phone-carrier-lookup/)

# entity-framework - 在部分类中覆盖 ToString 时对实体关联的空引用 - EntityDataSource.Include 被忽略

> ID：15886884
> 
> 赞同：0
> 
> 时间：2013-04-08T19:03:01.693
> 
> 标签：entity-framework, asp.net-dynamic-data, entitydatasource

我正在为实体框架使用动态数据，不幸的是我被困在 .NET 3.5 上，所以它是 EF1，目前这无法改变。

所以我的问题是，我尝试以几种方式添加 EntityDataSource.Include 属性来处理在 table1 的部分类中覆盖 ToString 方法时得到的空引用。我尝试在 EntityDataSource 声明中设置 Include in 标记，也尝试`EntityDataSource.Include = "table2.table3"`在`EntityDataSource.Selecting`事件中设置，但都没有运气。

如您所见，我需要将包含添加到关联的关联中。我想在 table2 的覆盖 ToString 方法中显示“table3.name + table2.Date”，并在 table1 的编辑模式下反映在关联引用的下拉列表中。

请注意，Include 在 GridDataSource 上工作得很好，无论出于何种原因，我在 DetailsDataSource 上遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:40:25.130

我找到了一种解决方法，即检查关联引用是否加载到 ToString 覆盖中，如果没有加载它。

```
public override string ToString()
{
    if (this.Course == null)
    {
        if (!this.CourseReference.IsLoaded)
            this.CourseReference.Load();

        return this.Course.Name + " - " + string.Format("{0:yyyy-MM-dd}", this.StartDate.Date);
    }
    else
        return this.Course.Name + " - " + string.Format("{0:yyyy-MM-dd}", this.StartDate.Date);
} 
```

# ruby-on-rails - 如何在rails中设计一个数据库，其中所有表都可以通过全局设置进行过滤？默认全局范围？

> ID：15886886
> 
> 赞同：1
> 
> 时间：2013-04-08T19:03:07.443
> 
> 标签：ruby-on-rails, database-design

我正在构建一个 Rails 应用程序，数据应该在每个“季节”重置，但仍然保留。换句话说，从任何表中检索到的唯一数据应该是当前季节的数据，但如果您想访问以前的季节，您可以。

我们基本上需要整个数据库的多个实例，每个季节一个。

客户的想法是在赛季结束时导出数据库并保存，然后重新开始。这样做的问题是我们不能一次查看所有数据。

我唯一的想法是为`season_id`每个模型添加一列。但在这种情况下，每个查询都需要有`where(season_id: CURRENT_SEASON)`. 我应该把它作为每个模型的默认范围吗？

有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:34:31.347

如果您想要一个数据库中的所有数据，那么您必须对其进行过滤，这样您就走在了正确的轨道上。这完全没问题，因为无论如何都会过滤数据，所以这没什么大不了的。此外，您所描述的听起来非常类似于将数据标记为已存档（当前季节中没有的任何内容基本上都已存档），这是非常常见的事情，并且通常通过在每条记录上设置一个布尔标志来完成（我相信） true 或 false 以隐藏它，或一些等效的方法。

[您可能需要 a `scope`or`default_scope`](http://guides.rubyonrails.org/active_record_querying.html#scopes)，其中 a 的主要缺点`default_scope`是您必须`.unscoped`在要访问当前季节之外的所有数据的地方使用，而不使用默认范围意味着您必须在**每次**调用时指定范围。默认范围似乎有时也会应用在有趣的地方，根据我的经验，我更喜欢总是明确说明我正在使用的范围（即我因此从不使用`default_scope`），但这更多是个人喜好。

在如何设计数据库方面，您可以为每条记录添加布尔标志，以告知该数据是否在当前季节，或者如您所述，您可以包含一个`season_id`将根据当前季节 ID 和过滤器进行检查的就这样。无论哪种方式，某种范围都是一种很好的方法。

如果使用简单的布尔值，那么在当前赛季结束或新赛季开始时，您必须将任何当前赛季记录标记为不再是当前的。这可能需要一个 rake 任务或类似的东西来使其方便，但会增加少量维护。

如果在代码中使用`season_id`加号常量来指示当前的季节（可能通过配置文件），则将事物标记为当前季节会更容易，因为每个季节都不需要数据库更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:17:07.430

*[免责声明：我不熟悉 Ruby，所以我将仅从数据库的角度发表评论。]*

> 这样做的问题是我们不能一次查看所有数据。

如果您需要保持旧版本可访问，那么您应该将它们保存在同一个数据库中。

设计“版本化”（或“时间”或“历史化”）数据模型是一种魔法——让我知道您的模型现在的样子，我可能会对如何“版本化”它提出一些建议。在处理版本化对象之间的连接时，事情会变得特别复杂。

同时，请查看[这篇文章](https://stackoverflow.com/a/10988116/533120)，以获取此类模型的示例（与您的领域无关，但希望能提供一些想法）。

或者，您可以尝试使用特定于 DBMS 的机制，例如 Oracle 的闪回查询，但这显然不是每个人都可以使用的，并且可能不适合保留永久历史记录......

# stream - C# - 捕获 RTP 流并发送到语音识别

> ID：15886888
> 
> 赞同：6
> 
> 时间：2013-04-08T19:03:11.727
> 
> 标签：stream, ffmpeg, speech-recognition, vlc, rtp

**我要完成的工作：**

*   在 C# 中捕获 RTP 流
*   将该流转发到 System.Speech.SpeechRecognitionEngine

我正在创建一个基于 Linux 的机器人，它将接受麦克风输入，将其发送给 Windows 机器，该机器将使用 Microsoft Speech Recognition 处理音频并将响应发送回机器人。机器人可能距离服务器数百英里，所以我想通过 Internet 执行此操作。

**到目前为止我做了什么：**

*   让机器人使用 FFmpeg 生成以 MP3 格式（其他可用格式）编码的 RTP 流（机器人在运行 Arch Linux 的 Raspberry Pi 上运行）
*   使用 VLC ActiveX 控件在客户端计算机上捕获的流
*   发现 SpeechRecognitionEngine 有可用的方法：
    1.  识别器.SetInputToWaveStream()
    2.  识别器.SetInputToAudioStream()
    3.  识别器.SetInputToDefaultAudioDevice()
*   看着使用 JACK 将应用程序的输出发送到 line-in，但完全被它弄糊涂了。

**我需要帮助：**

我坚持如何将流从 VLC 实际发送到 SpeechRecognitionEngine。VLC 根本不公开流。有没有一种方法可以捕获一个流并将该流对象传递给 SpeechRecognitionEngine？或者 RTP 不是这里的解决方案？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T18:56:13.867

经过大量工作，我终于`Microsoft.SpeechRecognitionEngine`接受了 WAVE 音频流。这是过程：

在 Pi 上，我正在运行 ffmpeg。我使用此命令流式传输音频

```
ffmpeg -ac 1 -f alsa -i hw:1,0 -ar 16000 -acodec pcm_s16le -f rtp rtp://XXX.XXX.XXX.XXX:1234 
```

在服务器端，我创建一个`UDPClient`并监听端口 1234。我在一个单独的线程上接收数据包。首先，我剥离 RTP 标头（[此处解释标头格式](http://en.wikipedia.org/wiki/Real-time_Transport_Protocol#Packet_header)）并将有效负载写入特殊流。为了让 SpeechRecognitionEngine 工作，我必须使用[Sean 的回复中描述](https://stackoverflow.com/questions/1682902/streaming-input-to-system-speech-recognition-speechrecognitionengine)`SpeechStreamer`的类。它不适用于标准。`Memory Stream`

在语音识别方面我唯一要做的就是将输入设置为音频流而不是默认音频设备。

```
recognizer.SetInputToAudioStream( rtpClient.AudioStream,
    new SpeechAudioFormatInfo(WAVFile.SAMPLE_RATE, AudioBitsPerSample.Sixteen, AudioChannel.Mono)); 
```

我还没有对它进行过广泛的测试（即让它流式传输几天，看看它是否仍然有效），但我能够保存音频样本，`SpeechRecognized`这听起来很棒。我正在使用 16 KHz 的采样率。我可能会将其降低到 8 KHz 以减少数据传输量，但一旦出现问题我会担心。

我还应该提到，响应速度非常快。我可以说一个完整的句子并在不到一秒钟的时间内得到回应。RTP 连接似乎给进程增加了很少的开销。我将不得不尝试一个基准测试并将其与仅使用 MIC 输入进行比较。

编辑：这是我的 RTPClient 类。

```
 /// <summary>
    /// Connects to an RTP stream and listens for data
    /// </summary>
    public class RTPClient
    {
        private const int AUDIO_BUFFER_SIZE = 65536;

        private UdpClient client;
        private IPEndPoint endPoint;
        private SpeechStreamer audioStream;
        private bool writeHeaderToConsole = false;
        private bool listening = false;
        private int port;
        private Thread listenerThread; 

        /// <summary>
        /// Returns a reference to the audio stream
        /// </summary>
        public SpeechStreamer AudioStream
        {
            get { return audioStream; }
        }
        /// <summary>
        /// Gets whether the client is listening for packets
        /// </summary>
        public bool Listening
        {
            get { return listening; }
        }
        /// <summary>
        /// Gets the port the RTP client is listening on
        /// </summary>
        public int Port
        {
            get { return port; }
        }

        /// <summary>
        /// RTP Client for receiving an RTP stream containing a WAVE audio stream
        /// </summary>
        /// <param name="port">The port to listen on</param>
        public RTPClient(int port)
        {
            Console.WriteLine(" [RTPClient] Loading...");

            this.port = port;

            // Initialize the audio stream that will hold the data
            audioStream = new SpeechStreamer(AUDIO_BUFFER_SIZE);

            Console.WriteLine(" Done");
        }

        /// <summary>
        /// Creates a connection to the RTP stream
        /// </summary>
        public void StartClient()
        {
            // Create new UDP client. The IP end point tells us which IP is sending the data
            client = new UdpClient(port);
            endPoint = new IPEndPoint(IPAddress.Any, port);

            listening = true;
            listenerThread = new Thread(ReceiveCallback);
            listenerThread.Start();

            Console.WriteLine(" [RTPClient] Listening for packets on port " + port + "...");
        }

        /// <summary>
        /// Tells the UDP client to stop listening for packets.
        /// </summary>
        public void StopClient()
        {
            // Set the boolean to false to stop the asynchronous packet receiving
            listening = false;
            Console.WriteLine(" [RTPClient] Stopped listening on port " + port);
        }

        /// <summary>
        /// Handles the receiving of UDP packets from the RTP stream
        /// </summary>
        /// <param name="ar">Contains packet data</param>
        private void ReceiveCallback()
        {
            // Begin looking for the next packet
            while (listening)
            {
                // Receive packet
                byte[] packet = client.Receive(ref endPoint);

                // Decode the header of the packet
                int version = GetRTPHeaderValue(packet, 0, 1);
                int padding = GetRTPHeaderValue(packet, 2, 2);
                int extension = GetRTPHeaderValue(packet, 3, 3);
                int csrcCount = GetRTPHeaderValue(packet, 4, 7);
                int marker = GetRTPHeaderValue(packet, 8, 8);
                int payloadType = GetRTPHeaderValue(packet, 9, 15);
                int sequenceNum = GetRTPHeaderValue(packet, 16, 31);
                int timestamp = GetRTPHeaderValue(packet, 32, 63);
                int ssrcId = GetRTPHeaderValue(packet, 64, 95);

                if (writeHeaderToConsole)
                {
                    Console.WriteLine("{0} {1} {2} {3} {4} {5} {6} {7} {8}",
                        version,
                        padding,
                        extension,
                        csrcCount,
                        marker,
                        payloadType,
                        sequenceNum,
                        timestamp,
                        ssrcId);
                }

                // Write the packet to the audio stream
                audioStream.Write(packet, 12, packet.Length - 12);
            }
        }

        /// <summary>
        /// Grabs a value from the RTP header in Big-Endian format
        /// </summary>
        /// <param name="packet">The RTP packet</param>
        /// <param name="startBit">Start bit of the data value</param>
        /// <param name="endBit">End bit of the data value</param>
        /// <returns>The value</returns>
        private int GetRTPHeaderValue(byte[] packet, int startBit, int endBit)
        {
            int result = 0;

            // Number of bits in value
            int length = endBit - startBit + 1;

            // Values in RTP header are big endian, so need to do these conversions
            for (int i = startBit; i <= endBit; i++)
            {
                int byteIndex = i / 8;
                int bitShift = 7 - (i % 8);
                result += ((packet[byteIndex] >> bitShift) & 1) * (int)Math.Pow(2, length - i + startBit - 1);
            }
            return result;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T12:46:03.683

我认为你应该让它更简单。为什么要使用 RTP 和一个特殊的库来捕获 RTP？为什么不直接从 Rasperry Pi 获取音频数据并使用 Http Post 将其发送到您的服务器？

请记住 System.Speech 不支持 MP3 格式。这可能会有所帮助 - [SAPI v5.1 SpeechRecognitionEngine 的帮助总是给出与 C# 相同的错误结果](https://stackoverflow.com/questions/6193874/help-with-sapi-v5-1-speechrecognitionengine-always-gives-same-wrong-result-with/6203533#6203533)。对于 System.Speech，音频必须为 PCM、ULaw 或 ALaw 格式。确定识别器支持哪些格式的最可靠方法是使用 RecognizerInfo.SupportedAudioFormats 询问它。

然后您可以将数据发布到您的服务器（并使用 ContentType = "audio/x-wav"）。我们使用了 URL 格式，例如

```
http://server/app/recognize/{sampleRate}/{bits}/{isStereo} 
```

在请求中包含音频参数。在 POST 正文中发送捕获的 wav 文件。

我们遇到的一个问题是我们必须在将数据发送到 System.Speech 之前将 WAV 文件头添加到数据中。我们的数据是 PCM，但不是 WAV 格式。如果您需要这样做，请参阅[https://ccrma.stanford.edu/courses/422/projects/WaveFormat/ 。](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-02T00:27:54.500

这是一个旧线程，但对我正在从事的项目很有用。但是，我和其他一些尝试使用 dgreenheck 的代码和 Windows PC 作为源代码的人遇到了同样的问题。

让 FFMpeg 使用以下参数对代码进行 0 更改：

```
ffmpeg -ac 1 -f dshow -i audio="{recording device}" -ar 16000 -acodec pcm_s16le -f rtp rtp://{hostname}:{port} 
```

在我的情况下，录音设备名称是“麦克风（Realtek High Definition Audio）”，但我使用以下内容来获取录音设备名称：

```
ffmpeg -list_devices true -f dshow -i dummy 
```

# hibernate - 在内存数据库（HSQLDB 或 H2）上运行具有多个模式域的 grails

> ID：15886889
> 
> 赞同：1
> 
> 时间：2013-04-08T19:03:15.007
> 
> 标签：hibernate, grails, schema, hsqldb, h2

在我的 Grails 1.3.7 应用程序中，我将域映射到旧版 Oracle 数据库。在这个基础中，我使用 GORM 将几个模式映射到我的域。它很复杂，但很有效。

我现在正在尝试创建一个不依赖于 oracle 数据库的环境，以便前端团队可以从公司外部运行应用程序。他们是外包的。因此，我考虑创建一个新的 grails 环境，将数据源指向 HSQLDB 并设置 dbCreate = "create-drop"。

我有以下错误：

hbm2ddl.SchemaExport - 无效的模式名称：语句中的 APR [创建表 APR.PLATAFORMA]

每次它尝试在启动时创建一个表。

问题是我找不到让 hibernate 创建模式的方法。我还尝试在启动时以编程方式创建架构，但没有成功。我还尝试使用 H2 INIT 属性[我可以让 H2 在内存数据库中自动创建模式吗？](https://stackoverflow.com/questions/5225700/can-i-have-h2-autocreate-a-schema-in-an-in-memory-database)但也没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:17:21.370

在创建了一些 bean 后处理和破解 HSQLDialect 之后，我意识到最好的解决方案是从域中删除模式信息。

这最终导致两个数据库（HSQLDB 和 H2）都存在唯一约束问题。由于我的唯一约束是在只读类中定义的，所以我也没有费心去删除它们。

该应用程序仍在使用 oracle 数据库，但现在我可以使用内存数据库（我正在使用 HSQLDB）运行它，并且所有表都在同一架构中。

# java - 让当前线程休眠并让其他线程唤醒它

> ID：15886893
> 
> 赞同：1
> 
> 时间：2013-04-08T19:03:20.070
> 
> 标签：java, multithreading, wait, notify

我有下面的方法`foo`，它需要一个观察者并将当前线程置于睡眠状态，直到观察者唤醒它。

出于某种原因，我不断收到`java.lang.IllegalMonitorStateException`异常`foo`

```
public void foo(Observer o)
{
    Thread currentThread = Thread.currentThread();
    o.setThread(currentThread);
    // sleep until the observer wakes it
    currentThread.wait(2000);   // <<<<< Exception happens here
} 
```

该`Observer`对象会`currentThread.notifyAll()`在稍后调用它时`Observable`调用`update`。

```
public class Observer
{
    private volatile Thread currentThread;
    // ... other code  ....

   public void setThread(Thread t)
   {
       currentThread = t;
   }

   public void update(Observable o)
   {
        currentThread.notify();
   }
} 
```

知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:06:46.900

每当您调用object 的[`wait(long)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#wait%28long%29)or[`notify()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#notify%28%29)方法时，该线程必须拥有该对象的监视器。因此，您应该将调用`wait()`对象的代码块声明为`synchronized`. 所以你的方法

```
public void foo(Observer o) 
```

应按以下方式定义：

```
public void foo(Observer o)
{
    Thread currentThread = Thread.currentThread();
    o.setThread(currentThread);
    // sleep until the observer wakes it
    synchronized(currentThread)
    {
      currentThread.wait(2000);   
    }
 } 
```

**更新：**
按照您的要求，我建议您调用`wait`object `Observer`。所以你的代码`foo`应该是这样的：

```
public void foo(Observer o)
{
    synchronized(o)
    {
      o.wait();//Don't pass time as parameter. Let only the Observer object to wake it up.
    }
 } 
```

你的`Observer` 类应该这样定义：

```
public class Observer
{
    // ... other code  ....

   /*public void setThread(Thread t)
   {
       currentThread = t;
   }*/
   public synchronized void update(Observable o)
   {
        notify();//Will wake up the Thread waiting on the current Object of Observer
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T19:39:00.403

> 这与这个问题不同。我不能将同步放在 foo 中，因为这会导致线程永远休眠。

我认为您不了解如何`wait()`工作`notify()`。您无需*在*线程上等待和通知，而是在同一个*对象*上进行。当您的代码执行以下操作时：

```
currentThread.wait(2000); 
```

它实际上导致当前线程等待它自己的`Thread`对象。通往`notify()`该线程的方式将类似于：

```
Thread thread = new Thread(myRunnable);
...
thread.notify(); 
```

这是一个*非常*奇怪的模式，很可能*不是*您想要做的。哪个线程正在运行该`foo()`方法并不重要。如果您使用的是线程池，您甚至不会知道哪个线程正在运行它。

如果您希望您的`Observer`线程通知等待的线程，`foo()`那么它们都需要使用同一个锁对象。就像是：

```
class MyClass {
    ...
    public synchronized void foo() {
        // this is waiting on the current instance of MyClass
        wait(2000);
    }
}

public class Observer {
     ...
     // to wake up the other thread, we lock the same myClass instance
     synchronized (myClass) {
         // and notify that object
         myClass.notify();
     }
} 
```

或者你可以创建一个他们都应该共享的锁对象。

```
final Object lockObject = new Object();
MyClass c1 = new MyClass(lockObject);
Observer obs = new Observer(lockObject();
...
class MyClass {
    private final Object lockObject;
    public MyClass(Object lockObject) {
        this.lockObject = lockObject;
    }
    ...
    public void foo() {
        // this is waiting on the current instance of MyClass
        synchronized (lockObject) {
            lockObject.wait(2000);
        }
    }
}
...
public class Observer {
    private final Object lockObject;
    public Observer(Object lockObject) {
        this.lockObject = lockObject;
    }
    public void update(Observable o) {
        synchronized (lockObject) {
            lockObject.notify();
        }
    }
} 
```

仅供参考：锁定对象应该几乎总是这样`final`，所以它们不能更改它们的引用。你永远不想锁定像 an`Integer`或 a那样变化的东西`Boolean`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:11:00.887

我宁愿不要使用`wait`，或者`notify`因为它是低级别的，如果没有很好地实施，很快就会变脏。它可以通过二进制信号量来解决。

```
Semaphore sem = new Semaphore(0);
public void foo(Semaphore f){
    f.acquire();
} 
```

其他线程，稍后可以调用`f.release`这将解除阻塞其他线程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T19:25:21.283

您可以使用同步的。当您调用 currentThread.wait() 时，线程将休眠并释放监视器 (currentThread)。该线程将在等待被另一个线程在同一监视器上使用 notify() 唤醒之后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T19:06:37.460

要使用[java.lang.Object.wait()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#wait%28long%29)你必须拥有监视器，它通常由[同步块](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.19)完成：

```
public void foo( Observer o ) throws InterruptedException
{
   Thread currentThread = Thread.currentThread();
   o.setThread( currentThread );
   synchronized( currentThread ) {
      currentThread.wait( 2000 );
   }
} 
```

在 notify() 周围添加相同的机制

```
public void update( Observable o ) throws InterruptedException {
   synchronized( currentThread ) {
      currentThread.notify();
   } 
```

}

# html - 使文本在文档的打印版本中不可见 - 避免颜色校正

> ID：15886895
> 
> 赞同：1
> 
> 时间：2013-04-08T19:03:24.903
> 
> 标签：html, css, printing

我在 html 中有一个简单的“填补空白”练习。有差距，看起来像这样：

> 地球最近的恒星是_ _ _ _。

这些间隙不应该在计算机上填充 - 文档应该以空白打印。但是它们有一个内容，因此，当它们出现时，可以检查答案。
我使用border-bottom 属性来弥补差距。空白处填充了一个文本，但它是白色的，因此用户只能在悬停时看到它。

### CSS：

```
span.gap {
    color: white;
    border-bottom: 1px solid black;
}
span.gap:hover {
    color: gray;

} 
```

### 的HTML：

```
Stephen Hawking is famous for his research of <span class="gap">black holes</span>.
Stackoverflow only helps you if you ask <span class="gap">simple questions</span>. 
```

浏览器似乎将颜色从白色固定为黑色，因此在打印文档中可以看到间隙内容。那我应该如何隐藏文字呢？
我不能使用该`visibility`属性，因为边框必须可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:21:05.317

您可以使用 CSS 媒体类型来处理不同的显示/媒体情况。即在您的 CSS 中添加类似这样的内容：

```
@media print { .gap { /* add your styles */ }} 
```

此外，结合这一点，您可以添加一个`span`仅用于打印的单独显示。像：

**HTML：**

```
Stackoverflow only helps you if you ask 
<span class="gap">simple questions</span>
<span class="print-gap"></span>. 
```

**CSS：**

```
span.gap, span.print-gap {
    color: white;
    border-bottom: 1px solid black;
}
span.gap:hover {
    color: gray;
}
@media screen {
    span.print-gap { display: none; }
}
@media print { 
    span.gap { display: none; } 
    span.print-gap { display: inline-block; width: 100px; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T21:19:47.053

在所有图像替换技术中，有一些无需添加额外元素即可工作。如果您希望跨度显示为内联，所有这些都需要在跨度上设置宽度。

[http://jsfiddle.net/TZD84/](http://jsfiddle.net/TZD84/)

```
span.gap {
    display: inline-block;
    width: 8em;
    white-space: pre;
    overflow: hidden;
    border-bottom: 1px solid black;
    text-indent: 110%;
}

span.gap:hover {
    color: gray;
    text-indent: 0;
} 
```

如果你需要支持旧版浏览器，总有否定的 text-indent 方法

[http://jsfiddle.net/TZD84/1/](http://jsfiddle.net/TZD84/1/)

```
span.gap {
    display: inline-block;
    width: 8em;
    overflow: hidden;
    border-bottom: 1px solid black;
    text-indent: -10em;
}

span.gap:hover {
    color: gray;
    text-indent: 0;
} 
```

# spring - 如何避免使用 Spring Data Rest 进行 n+1 查询？

> ID：15886897
> 
> 赞同：25
> 
> 时间：2013-04-08T19:03:30.583
> 
> 标签：spring, rest, spring-data, spring-data-rest, spring-hateoas

**问题。**如何避免使用 Spring Data REST 进行 n+1 查询？

**背景。**在查询 Spring Data REST 以获取资源列表时，每个生成的顶级资源都具有指向关联资源的链接，而不是将关联资源直接嵌入顶级资源中。例如，如果我查询数据中心列表，相关区域会显示为链接，如下所示：

```
{
  "links" : [ {
    "rel" : "self",
    "href" : "http://localhost:2112/api/datacenters/1"
  }, {
    "rel" : "datacenters.DataCenter.region",
    "href" : "http://localhost:2112/api/datacenters/1/region"
  } ],
  "name" : "US East 1a",
  "key" : "amazon-us-east-1a"
} 
```

然而，想要获得相关信息而不需要进行 n+1 次查询是非常典型的。为了坚持上面的例子，我可能想在 UI 中显示数据中心及其相关区域的列表。

**我试过的。**我在 my 上创建了一个自定义查询，`RegionRepository`以获取给定数据中心键集的所有区域：

```
@RestResource(path = "find-by-data-center-key-in")
Page<Region> findByDataCentersKeyIn(
    @Param("key") Collection<String> keys,
    Pageable pageable); 
```

不幸的是，此查询生成的链接不会与上述数据中心查询生成的链接重叠。以下是我为自定义查询获得的链接：

```
http://localhost:2112/api/regions/search/find-by-data-center-key-in?key=amazon-us-east-1a&key=amazon-us-east-1b

{
  "links" : [ ],
  "content" : [ {
    "links" : [ {
      "rel" : "self",
      "href" : "http://localhost:2112/api/regions/1"
    }, {
      "rel" : "regions.Region.datacenters",
      "href" : "http://localhost:2112/api/regions/1/datacenters"
    }, {
      "rel" : "regions.Region.infrastructureprovider",
      "href" : "http://localhost:2112/api/regions/1/infrastructureprovider"
    } ],
    "name" : "US East (N. Virginia)",
    "key" : "amazon-us-east-1"
  }, {
    "links" : [ {
      "rel" : "self",
      "href" : "http://localhost:2112/api/regions/1"
    }, {
      "rel" : "regions.Region.datacenters",
      "href" : "http://localhost:2112/api/regions/1/datacenters"
    }, {
      "rel" : "regions.Region.infrastructureprovider",
      "href" : "http://localhost:2112/api/regions/1/infrastructureprovider"
    } ],
    "name" : "US East (N. Virginia)",
    "key" : "amazon-us-east-1"
  } ],
  "page" : {
    "size" : 20,
    "totalElements" : 2,
    "totalPages" : 1,
    "number" : 1
  }
} 
```

挑战似乎在于，一旦您已经了解了数据的形状，数据中心查询返回的链接并不是特别有用。例如，我已经知道数据中心 1 的区域位于`/datacenters/1/region`，所以如果我想了解涉及哪个特定区域的实际信息，我必须点击链接获取。特别是，我必须按照链接获取显示在批量查询中的规范 URI，这将允许我避免 n+1 查询。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-09T12:42:13.510

Spring Data REST 像这样工作的原因如下：默认情况下，我们假设每个应用程序存储库都是 REST 服务的主要资源。因此，如果您公开实体相关对象的存储库，您将获得呈现给它的链接，并且我们通过嵌套资源（例如`foo/{id}/bar`）公开一个实体对另一个实体的分配。

为了防止这种情况，请注释相关的存储库接口，`@RestResource(exported = false)`以防止该存储库管理的实体成为顶级资源。

更通用的方法是从 Spring Data REST 开始，让您公开要管理的资源和应用的默认规则。然后，您可以通过实现`ResourceProcessor<T>`并将您的实现注册为 Spring bean 来自定义呈现和链接。然后`ResourceProcessor`将允许您自定义呈现的数据、添加到表示的链接等。

对于其他一切，手动实现控制器（可能混合到默认控制器的 URI 空间中）并通过`ResourceProcessor`实现添加指向这些控制器的链接。[在Spring RESTBucks](https://github.com/olivergierke/spring-restbucks)示例中可以看到一个示例。示例项目使用 Spring Data REST 来管理 Order 实例并实现[自定义控制器](https://github.com/olivergierke/spring-restbucks/blob/master/src/main/java/org/springsource/restbucks/payment/web/PaymentController.java)来实现更复杂的支付流程。除此之外，它还[添加了一个指向 Order 资源的链接，](https://github.com/olivergierke/spring-restbucks/blob/master/src/main/java/org/springsource/restbucks/payment/web/PaymentOrderResourceProcessor.java)以指向手动实现的代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-10T13:22:31.093

如果在 Jackson ObjectMapper 中配置的序列化程序是通过看到 a 触发的，Spring Data REST 只会创建您描述的表示，这是Spring Data REST 中使用`PersistentEntityResource`的一种特殊类型。`Resource`

如果您创建 a`ResourceProcessor<Resource<MyPojo>>`并返回 a `new Resource<MyPojo>(origResource.getContent(), origResource.getLinks())`，则不会触发默认的 Spring Data REST 序列化机制，并且将应用 Jackson 的正常序列化规则。

但是请注意，Spring Data REST 以它的方式进行关联的原因是因为在序列化为 JSON 时很难随意*停止*遍历对象图。通过以它的方式处理关联，它保证了序列化器不会开始遍历 N 级深度的对象图，并且在性能和表示的性能上变得更慢。

确保 Jackson 不尝试序列化 a `PersistentEntityResource`，这是它在默认配置中所做的，将确保不会触发任何 Spring Data REST 关联处理。当然，不利的一面是 Spring Data REST 的任何助手都不会被触发。如果您仍然想要相关资源的链接，则必须确保自己创建这些链接并将它们添加到传出的 plain `Resource`。

# actionscript-3 - 调整 HTMLLoader 大小滞后于位置

> ID：15886898
> 
> 赞同：0
> 
> 时间：2013-04-08T19:03:31.927
> 
> 标签：actionscript-3, flash, air, tween

我正在尝试以`HTMLLoader`相同的量调整 a 的大小和重新定位，但是 a 的大小`HTMLLoader`总是落后于该位置至少一帧。位置和大小都发生了相同的变化。手动更改大小和使用补间时都会发生这种情况。我尝试将控制位置的补间延迟一帧，它有时会有所帮助，但有时会使情况变得更糟。

补间代码：

```
// t is the time, 0.5 in this case
// ease is the easing function, I tried linear and Regular.easeInOut
tweenW  = new Tween(gallery.masker, "width", ease, gallery.masker.width, (full ? largeX : smallX), t, true);
tweenH  = new Tween(gallery.masker, "height", ease, gallery.masker.height, (full ? largeY : smallY), t, true);
tweenX  = new Tween(gallery.masker, "x", ease, gallery.masker.x, (full ? -posX : 0), t, true);
tweenY  = new Tween(gallery.masker, "y", ease, gallery.masker.y, (full ? -posY : 0), t, true);
tweenBX = new Tween(border, "x", ease, border.x, (full ? 0 : posX), t, true);
tweenBY = new Tween(border, "y", ease, border.y, (full ? 0 : posY), t, true);
tweenBW = new Tween(border, "width", ease, border.width, (full ? largeX * borderMultX : smallX * borderMultX), t, true);
tweenBH = new Tween(border, "height", ease, border.height, (full ? largeY * borderMultY : smallY * borderMultY), t, true); 
```

`HTMLLoader`调整代码（Event.EXIT_FRAME）：

```
loader.width = gallery.masker.width;
loader.height = gallery.masker.height;
loader.x = gallery.masker.x;
loader.y = gallery.masker.y; 
```

显示时，大小`gallery.masker`是正确的，但`HTMLLoader`仍然落后

例子：

HTML 内容是一个空的绿色页面，`gallery.masker`是一个红色形状，在`HTMLLoader`. 补间大约完成了一半的扩展。

（它不让我发布图片，有人可以编辑吗？ http: [//img571.imageshack.us/img571/3699/resizeq.png](http://img571.imageshack.us/img571/3699/resizeq.png)）

[编辑： http://www.mediafire.com/?](http://www.mediafire.com/?5c2zkhmb6v9b61u) 5c2zkhmb6v9b61u提供了一个最小示例（包含 CS6 .fla、所有源代码、.swf 和 app.xml）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:55:31.630

包中的补间引擎`fl`存在已知问题，`Tween`应保留每个对象的引用直到完成，否则在大多数情况下，垃圾收集器会在这些对象完成继承工作之前将其删除。因此，目标/补间对象上的属性被冻结。

@Malik Drako 在您的情况下，您可以对`Tween`全局对象进行引用以使它们始终处于活动状态，或者更灵活的方法是采用一个`Vector`并为引用创建一些拉机制，因此在第二种情况下，您不需要命名每个`Tween`对象并且同时您可以根据`Tween`需要创建任意数量的 s。

# ssl - 如何在 Heroku 上禁用 HTTPS

> ID：15886900
> 
> 赞同：21
> 
> 时间：2013-04-08T19:03:35.560
> 
> 标签：ssl, heroku, https, subdomain, cname

我创建了一个站点并将其放在 Heroku 上。然后，我在 Heroku 控制面板中添加了一个自定义域（例如“site.example.com”），并将 DNS 指向我的 Heroku 地址。这工作正常，但是当我访问该站点时，我收到一个很大的浏览器警告，说证书是针对 herokuapp.com，而不是针对“site.example.com”。如何关闭 HTTPS 或以其他方式修复它？（我不需要我自己的网站 SSL 证书。）

**注意**：如果您的应用程序强迫人们使用 SSL，这不是 Heroku 的错。检查`production.rb`以确保它没有说：

```
config.force_ssl = true 
```

如果是，请将其更改为 false：

```
config.force_ssl = false 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T05:44:35.333

不幸的是，您无法阻止某人尝试通过 SSL 访问您的网站。也就是说，任何人都可以简单地添加`https`到开头`://site.example.com`。我建议您[打开支持票证](https://help.heroku.com/)，让支持团队查看您当前的配置。不幸的是，除非您拥有使用[ssl:endpoint](https://devcenter.heroku.com/articles/ssl-endpoint)附加组件指定的自己的 SSL 证书，否则 Cedar 应用程序中存在的[Piggyback SSL会泄漏。](https://devcenter.heroku.com/articles/ssl#piggyback-ssl)`*.herokuapp.com`

事实是，即使 Piggyback SSL 没有到位，您的访问者在访问您网站的 SSL 版本时仍然会收到错误消息。您可能会考虑从[Namecheap](http://www.namecheap.com/)之类的地方购买一个非常便宜的 SSL 证书（看起来您可以以 8 美元/年的价格购买一个超级简单的证书）只是为了摆脱错误。然后，您可以强制重定向到您网站的非 SSL 版本，一切都很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T07:17:59.003

这可能不是最佳实践，但如果您非常想强制**“NO-SSL”**，那么您可以通过 JavaScript 代码执行以下操作。

```
 window.onload=function(){
     $(function(){
         if(window.location.protocol==="https:")
             window.location.protocol="http";
     });
 } 
```

# r - R时间序列数据聚合不相等的时间步

> ID：15886907
> 
> 赞同：2
> 
> 时间：2013-04-08T19:04:08.453
> 
> 标签：r, aggregate, time-series

![数据示例](https://i.stack.imgur.com/EAPHs.jpg)

我有以下数据是雨量计读数的时间序列集合。时间戳是每次雨量计增加计数的时间，而体积是添加到桶中的雨水量。我需要将数据汇总到几个不同的类别中，即每小时、6 小时、每天、每周添加到桶中的总降雨量。我尝试使用围绕 StachOverflow 发布的其他一些数据聚合方法，但它们假定正常的收集间隔。我对 R 不是很好，所以如果这是对已经发布的代码的超级简单编辑，请原谅我。

*我知道数据是来自 excel 的快照，但这只是为了在这个论坛中为了视觉目的而很好地格式化，因为我不知道如何发布表格*

附件是数据的CSV

[数据文件在这里](http://danthemandonin.com/RStuff/Project1.csv)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:18:50.537

一种选择是使用包 Lubridate：

```
library(lubridate)
timeseries <- read.csv("project1.csv", sep=",", header=T, dec=".")
timeseries[,1] <- mdy_hm(timeseries[,1]) 
```

日期已转换为 POSIXct，在 R 中得到广泛认可。接下来，日期将四舍五入到最接近的单位。例如，可以将单位设置为：小时、天、月等。四舍五入的日期存储在新的 data.frame 中，然后与原始 data.frame 连接。最后一步是将值聚合到四舍五入的日期。

```
rdate <- ceiling_date(x=timeseries[,1],unit="hour")
temp <- cbind(rdate,timeseries)
timeseries_hour <- aggregate(x=temp[3],by=list(temp[,1]),FUN=sum) 
```

部分结果：

```
head(timeseries_hour)
          Group.1 Ppt..Amount
1 1996-05-02 01:00:00        0.03
2 1996-05-02 02:00:00        0.02
3 1996-05-02 05:00:00        0.01
4 1996-05-02 06:00:00        0.04
5 1996-05-02 07:00:00        0.38
6 1996-05-02 08:00:00        0.13 
```

# c# - 按结果工资排名前 10 位

> ID：15886908
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:04:08.897
> 
> 标签：c#, linq, linq-to-objects, percentile

我有一个 Job 对象的内存列表，如果 Job 对象有一个名为 Salary 的属性。

如何使用 LINQ 或 C# 过滤此列表以仅包含薪水在前 10 或后 10 个百分位数的工作列表？

这是我的尝试，到目前为止似乎对我有用：

```
var tenthPercentileCount = allJobsCount / 10;
var top10PercentileJobs = allJobs
    .OrderByDescending(j => j.Salary.SalaryAmount)
    .Take(tenthPercentileCount)
    .ToList();
var bottom10PercentileJobs = allJobs
    .OrderBy(j => j.Salary.SalaryAmount)
    .Take(tenthPercentileCount)
    .ToList(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-08T19:52:02.837

首先，您需要计算有多少条目构成 10%。您可以通过将列表的大小除以 10 来做到这一点（并舍入或截断以获得整数）。我们称这个号码为 X。

接下来，您需要**按**salaray**降序****排列**列表。您需要**获取**列表中的前 X 个元素。这些将是前10％的人。

 ******要获得底部的 10%，您需要在从列表中**获取**X之前**跳过**前 90%（您可以使用 9X 或从完整尺寸中减去 X - 其中一个可能无法按预期工作） 。或者，您可以**按**薪水**排序**列表并**取**第一个 X。

 ******[使用System.Linq](http://msdn.microsoft.com/en-us/library/system.linq.aspx)命名空间也会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T10:24:32.383

我已经构建了一个扩展来删除列表的百分比。您需要做的就是在使用扩展程序之前订购列表。

```
 public static IEnumerable<T> RemoveBeforeAndAfter<T>(this IEnumerable<T> source, int percent, bool removeLast = false, bool removeFirst = false)
    {
        var enumerable = source as IList<T> ?? source.ToList();
        var sourceCount = enumerable.Count();
        var noRemove = Convert.ToInt32(Math.Ceiling((percent / 100D) * sourceCount));
        var remove = new List<T>();
        if (enumerable.Any())
        {
            if (removeLast)
                remove.AddRange(enumerable.Reverse().Take(noRemove));
            if (removeFirst)
                remove.AddRange(enumerable.Take(noRemove));
            return enumerable.Where(x => remove.Any(r => x.Equals(r))).ToList();

        }

        return default(IEnumerable<T>);
    } 
```************

# android - 选择图像时，图库视图不会显示完整的 ImageView

> ID：15886909
> 
> 赞同：0
> 
> 时间：2013-04-08T19:04:16.150
> 
> 标签：android, android-gallery

在 Android 中编写图库视图时，我遇到了这个问题。图像（如预期）出现在屏幕的顶部屏幕中，当它们被单击时，它们会说出选择了什么图像（再次如预期）。但是，选择的图像不会显示在 imageView 中。我的代码如下：

```
public class MainActivity extends Activity {

Integer[] imageIDs = {
        R.drawable.fourfromunimon,
        R.drawable.fourfromunisat,
        R.drawable.fourfromunisun,  

};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Gallery gallery = (Gallery) findViewById(R.id.gallery1);

    gallery.setAdapter(new ImageAdapter(this));
    gallery.setOnItemClickListener(new OnItemClickListener()
    {
        @SuppressWarnings("rawtypes")
        public void onItemClick(AdapterView parent, View v,
                int position, long id)
        {
            Toast.makeText(getBaseContext(),
                    "pic" + (position + 1) + " selected",
                    Toast.LENGTH_SHORT).show();

            // Display the image
            ImageView imageView =
                    (ImageView) findViewById(R.id.image1);
            imageView.setImageResource(imageIDs[position]);
        }
    });
}

public class ImageAdapter extends BaseAdapter {

    Context context;

    int itemBackground;

    public ImageAdapter(Context c)
    {
        context = c;

        TypedArray a = obtainStyledAttributes(
                R.styleable.Gallery1);
        itemBackground = a.getResourceId(
        R.styleable.Gallery1_android_galleryItemBackground,
        0);
        a.recycle();
    }

public int getCount(){
    return imageIDs.length;
}

public Object getItem(int position){
    return position;
}

public long getItemId(int position){
    return position;
}

public View getView(int position, View convertView,
ViewGroup parent){
    ImageView imageView;
    if (convertView == null){
        imageView = new ImageView(context);
        imageView.setImageResource(imageIDs[position]);
        imageView.setScaleType(
                ImageView.ScaleType.FIT_XY);
        imageView.setLayoutParams(
                new Gallery.LayoutParams(450, 200));
    }else{
        imageView = (ImageView) convertView;
    }
    imageView.setBackgroundResource(itemBackground);
    return imageView;
    }
} 
```

}

任何帮助将不胜感激，因为我不知道哪里可能出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:25:20.213

利用

```
imageView.invalidate(); 
```

设置新图像后。（[查看此处视图的绘图部分](http://developer.android.com/reference/android/view/View.html)）。

或者

```
imageView.invalidateDrawable(imageView.getDrawable()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:35:47.867

我的 Android 导师（先生）使用 .png 格式，尝试仅使用 .png 格式并将它们全部放在 Eclipse 项目中的所有可绘制文件夹中，如果它有效或不响应

在初始化 imageIDs 之后

```
Integer[] imageIDs = {
    R.drawable.fourfromunimon,
    R.drawable.fourfromunisat,
    R.drawable.fourfromunisun,  
};
declare gallery and imageview here

@Override
protected void onCreate(Bundle savedInstanceState) 
 {
  you can pass the find view by id here of gallery and imageview 
```

并尝试使用这个...

```
@Override
public View getView(int position, View convertView, ViewGroup parent) 
{
    // TODO Auto-generated method stub
    ImageView ivv=new ImageView(context);
    ivv.setImageResource(Garr[position]);
    ivv.setScaleType(ImageView.ScaleType.FIT_XY);
    ivv.setLayoutParams(new Gallery.LayoutParams(450, 200));
    ivv.setBackgroundResource(itembackground);
    return ivv;
} 
```

如果它有效或不响应

# ios - 如何从 plist 中检索数据

> ID：15886914
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:04:26.340
> 
> 标签：ios, nsarray, plist, nsdictionary

嗨，我有以下格式的 plist![在此处输入图像描述](https://i.stack.imgur.com/2JddK.png)

我想根据它们的类别 ID 对这些书进行排序。我有一个包含所有类别 id 的数组“TotalCategory”（例如：cat1，cat2 ..），我想打开下面的 plist 并检查每本书及其类别 id 是否匹配。如果我拥有的类别 id 是与给定书籍的类别 ID 匹配，然后我想将该类别 ID 和书籍 ID（出价）添加到新字典中。有可能吗？

```
NSDictionary *booksPlist = [[NSDictionary alloc] initWithContentsOfFile:path];
NSArray *categoryId=[[booksPlist objectForKey:@"catlist"]valueForKey:@"cid"];
NSLog(@"%@",categoryId);

// getting category list

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *allBooksPath = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"Allbooks.plist"];
NSDictionary *allBookPlist=[[NSDictionary alloc]initWithContentsOfFile:allBooksPath];

NSArray *bookid=[[allBookPlist objectForKey:@"listbook"]valueForKey:@"bid"];
NSString *s=[[[allBookPlist objectForKey:@"listbook"]objectForKey:@"cate" ]valueForKey:@"categories"];  //// this line shows exception

 NSLog(@"%@",s); 
```

/// 我想要这个 ::: 我想和我一起检查类别 id 和每本书中的类别 id，如果匹配，然后检索该书 id（出价）就是它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T00:36:57.217

您的要求不是很清楚，但我发现您的代码存在一些问题。

首先，不要将 的`-objectForKey:`方法`NSDictionary`与`valueForKey:`非正式协议的方法混淆`NSKeyValueCoding`。

后者用于`KVC`访问，最好不要在不知情的情况下混合它们。它可能会起作用，但在某些情况下也可能会爆炸。坚持`objectForKey:`或更好地使用现代订阅语法

```
[dict objectForKey:@"whatever"]; 
```

相当于

```
dict[@"whatever"]; 
```

* * *

也就是说，让我们面对你的具体问题。首先`listbook`是一个数组，所以你不能做

```
[[allBookPlist objectForKey:@"listbook"]valueForKey:@"bid"]; 
```

您需要首先访问数组元素，因此在现代语法中您应该这样做

```
NSString * bookId = allBookPlist[@"listbook"][0][@"bid"]; 
```

获取`bid`第一个元素的。如果你想收集它们，只需在数组上迭代

```
NSArray * books = allBookPlist[@"listbook"];
NSMutableArray * bookIds = [@[] mutableCopy]
for (NSDictionary * book in books) {
     [bookIds addObject:book[@"bid"]];
} 
```

可以使用类似的方法从每本书中获取类别。

# angularjs - AngularJS - 如何在 ng-switch 中访问绑定值

> ID：15886916
> 
> 赞同：0
> 
> 时间：2013-04-08T19:04:33.643
> 
> 标签：angularjs

在 ng-repeat 我有一个 ng-switch 条件。我希望 ng-switch 参数的值是一个绑定。但是，大括号绑定似乎没有转换为预期的生成值。我知道 ng-switch 创建了一个新范围，这肯定会导致问题。我知道[“点”解决](https://stackoverflow.com/questions/15593299/angularjs-ng-switch-does-not-bind-ng-model)方法，但是由于这里的值是通过控制器查询来自服务的，所以我不知道如何在这种情况下实现它。

**html**

```
<tr ng-repeat="user in users">
    <td ng-switch on="editState"><p ng-switch-when="noEdit">{{user.username}}</p><input type="text" value="{{user.username}}" ng-switch-when="{{user.username}}"></td>
</tr> 
```

**控制器.js**

```
$scope.users = Users.query(); 
```

-编辑-

这是触发开关的功能

```
$scope.editUser = function(usernameEdit) {
    $scope.editState = usernameEdit;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:05:28.990

`$scope.editState`如果您希望能够同时编辑多个用户，则单个将不起作用。我建议`edit`在 each 上放置一个属性`user`，并使用该属性来控制 ng-switch：

```
<tr ng-repeat="user in users">
   <td ng-switch on="user.edit"> 
      <span ng-switch-when="true">
         <input  type="text" value="{{user.username}}">
         <a href="" ng-click="user.edit=false">done</a>
      </span>
      <p ng-switch-default>
         <a href="" ng-click="user.edit=true">edit</a> {{user.username}}
      </p>
   </td>
</tr> 
```

[小提琴](http://jsfiddle.net/mrajcok/MW7cq/)

# c# - 字典的字典，如何取值？

> ID：15886920
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:04:44.857
> 
> 标签：c#, dictionary, idictionary

我有这样的事情：

```
private IDictionary<A, IDictionary<B, C>> data; 
```

我想做类似的事情：

```
IDictionary<B, C> values = new Dictionary<B, C>();
values = Data.Values; 
```

就像我在java中做的那样，但这不起作用。我想不通。感谢帮助

错误：

无法将类型 ICollection> 隐式转换为 IDictionary

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:06:33.530

您仍然会调用`.Values`，但它会返回一个 ValueCollection，而不是一个列表。要仅获取值，而不是键/值对列表，请使用 Select：

```
List<C> values = data.Values.Select(x => x.value); 
```

[http://msdn.microsoft.com/en-us/library/ekcfxy3x.aspx](http://msdn.microsoft.com/en-us/library/ekcfxy3x.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:07:48.020

如果您不确定会出现什么结果，请尝试使用类型推断

```
var coll = data.Values; 
```

然后尝试`Collection`使用`foreach`-loop 访问单个字典。

```
foreach(var dic in coll){
//work on Dictionary
} 
```

请参阅[此处](http://msdn.microsoft.com/en-us/library/system.collections.idictionary.values.aspx)以获取参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:21:42.737

您正在尝试访问`ICollection`您的`IDictionary<B, C>`其中一个不起作用，因为集合中有很多词典。

如果您希望将所有字典映射下来，则可以使用[`Lookup`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.tolookup.aspx)：

```
IDictionary<A, IDictionary<B, C>> data;
var values = data.ToLookup(d => d.Value.SelectMany(d => d.Key), d => d.Value.SelectMany(d => d.Value)); 
```

这将为您提供多个值的多个键。

# sql-server - 基于案例陈述的分组

> ID：15886921
> 
> 赞同：1
> 
> 时间：2013-04-08T19:04:58.467
> 
> 标签：sql-server, sql-server-2008-r2, case

我的查询中有以下 case 语句。

```
 case when ID is null then case when netID is null then [text] 
   when netID is not null then 'UnAssigned' else ID End
    else ID  end grp 
```

我想将其分为 2 个类别 1）从 [text] 列填充的所有记录。2）remaning 任何想法？有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:15:22.580

好的，它对我有用...在我的选择中添加了另一个案例，然后在 SSRS 中对其进行分组

```
 case when ID is null then case when netID is null then 1
  when netID is not null then 0 else 0 End
    else 0 end grp 
```

谢谢

# crm - Dynamics CRM 2011 - 如何使用在线 CRM 调试自定义工作流？

> ID：15886924
> 
> 赞同：3
> 
> 时间：2013-04-08T19:05:16.960
> 
> 标签：crm, microsoft-dynamics, dynamics-crm-online

我们正在使用 CRM 的在线版本。我已经创建了一个自定义工作流程，但我似乎找不到任何可以告诉我如何调试它的东西。我读过的所有内容都是指将 pdb 文件复制到服务器 bin/assemblies 文件夹中。由于我们没有使用本地版本，我不确定从这里去哪里。谁能指出我某种类型的文档来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-29T11:48:02.017

请参考这篇文章来调试 CRM Online 中的自定义工作流。

[点击这里](https://community.dynamics.com/crm/b/microsoftdynamicscrmandstuff/archive/2013/03/08/debugging-workflow-custom-activities-with-plugin-registration-tool.aspx#.UaXnotKkprp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T20:35:51.217

您需要使用`ITracingService`，这更像是`alert("I'm here!")`而不是正确的调试。

无论如何，这就像调试插件一样，在此处进行[了描述：调试插件 - 日志记录和跟踪](http://msdn.microsoft.com/en-us/library/gg328574.aspx#loggingandtracing)

> 调试插件的另一种方法是使用跟踪。跟踪通过提供运行时插件信息来帮助开发人员排除插件故障，以帮助诊断插件故障的原因。跟踪对于调试 Microsoft Dynamics CRM Online 注册插件特别有用，因为它是该方案唯一受支持的调试方法。
> 
> ...
> 
> 跟踪服务的实施是为了提供沙盒插件和自定义工作流活动，以便在抛出异常时输出运行时信息。

# java - 为我们其他人开放源代码共享和依赖管理 Java

> ID：15886929
> 
> 赞同：0
> 
> 时间：2013-04-08T19:05:43.243
> 
> 标签：java, maven, open-source, sharing, dependency-management

我是 Java 新手，我来自 Ruby，我有一个问题，关于我们如何轻松共享我们开发的代码，以便任何人都可以使用它们。到目前为止，我一直在使用 Maven 来解决依赖关系，但它们都是由 Apache 基金会等大型组织开发的，在项目的主页上，我看不到如何将我的库添加到他们的存储库中。

在 Ruby 中，我们一般使用 RubyGems (rubygems.org) 来发布开源代码。任何人都可以做到。有没有等价于Java？提交过程是怎样的？任何人都可以参加吗？它可以与Maven集成吗？

我不想仅仅分享 JAR。除非那是唯一的方法。

我认为这些问题对于任何试图真正学习该语言并了解其生态系统的人来说都是至关重要的。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:36:36.120

如果您想托管一个开源项目，请查看：

*   [源锻造](http://sourceforge.net/)
*   [GitHub](https://github.com/)
*   [代码屋](http://www.codehaus.org/)
*   [谷歌代码](http://code.google.com)
*   [JavaForge.com](http://www.javaforge.com)
*   [CodePlex](http://www.codeplex.com/)
*   [比特桶](https://bitbucket.org/)
*   ...可能还有其他人

如果你想发布一个项目到 Maven，你可以使用 Sonatype OSS Maven Repository，查看他们的[使用指南](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:07:45.170

试试[GitHub](https://github.com/)，它简单且开源。
PS：它不是特定于Java的。

# ruby-on-rails - 在黄瓜场景中的 gmaps4rails 中对外部 API 的调用存根

> ID：15886933
> 
> 赞同：0
> 
> 时间：2013-04-08T19:06:02.617
> 
> 标签：ruby-on-rails, cucumber, capybara, gmaps4rails, stubbing

我有使用 gmaps4rails gem 的黄瓜（带水豚）场景，因此在测试执行期间某些步骤会调用 gmaps 外部 API。我想把这些电话打断。实现这一目标的最佳方法是什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T11:43:43.620

我找到了解决方案，而且非常简单。在规范中，我只是对 Gmaps4rails.should_receive(:geocode) 进行了存根，在 Cucumber 场景中，我使用了 webmock gem：对 URL 的调用在 basic_steps.rb 中存根，并且将 json 响应（具有 .json 扩展名的文件）放置到测试/夹具中。

# ios - 如何从 UITableViewCell 中删除内容但仍有分隔符？

> ID：15886934
> 
> 赞同：-1
> 
> 时间：2013-04-08T19:06:06.173
> 
> 标签：ios, objective-c, uitableview

在我的应用程序中，我有一个表格视图，其中我正在根据业务逻辑重新加载数据，因此它之前是重叠的，然后我编写了这段代码以在绘制之前删除内容：

```
for(UIView *view in cell.subviews){
        if ([view isKindOfClass:[UIView class]]) {
            [view removeFromSuperview];
        }
    } 
```

现在它删除了所有东西，包括细胞分离器。知道如何预防吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:09:07.510

删除子视图`[cell contentView]`

如果您不知道自己在做什么，则永远不要直接从单元格中添加视图或删除视图。仅使用`contentView`和。`backgroundView``selectedBackgroundView`

但是，很少有应该从单元格中删除所有视图的用例。为什么不直接创建一个新单元（或重复使用一个）？或者只是将`hidden`属性设置`YES`为子视图？

# ssas - 为用户层次结构赋值

> ID：15886936
> 
> 赞同：0
> 
> 时间：2013-04-08T19:06:15.723
> 
> 标签：ssas, business-intelligence

让我们使用下表定义一个维度“类别”：

```
ID | CategoryLevel1 | CategoryLevel2 | CategoryLevel3
---|----------------|----------------|---------------
 1 | C1             | C11            | C111
 2 | C1             | C11            | C112
 3 | C1             | C11            | C113
 4 | C1             | C12            | C121
 5 | C1             | C12            | C122
 6 | C1             | C12            | C123
 7 | C2             | C21            | C211
...| ...            | ...            | ... 
```

和一个用表定义的事实：

```
CategoryID | Value
-----------|---------
 1         | v1      
 2         | v2      
 3         | v3      
 4         | v4      
 5         | v5      
...        | ... 
```

在 SSAS 中，我们将用户层次结构定义为：

```
CategoryLevel3 --> CategoryLevel2 --> CategoryLevel1 
```

我们注意到它`CategoryLevel3`决定了事实表的粒度。

假设不应该通过求和来汇总事实表（例如：级别 3 的类别的客户数量），而是必须为层次结构中的更高级别（CategoryLevel2 和 CategoryLevel1）设置数据。

是否可以在 SSAS 中以最小的维度表更改来做到这一点（因为它与许多其他事实表一起使用）。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:48:23.627

对于相同类型的事实，可以在不同粒度级别的维度加载多个度量值组。然后通过使用范围陈述，您可以从相应的度量值组中检索数据。

# multithreading - 内存分页期间可以运行其他进程吗？

> ID：15886938
> 
> 赞同：7
> 
> 时间：2013-04-08T19:06:32.067
> 
> 标签：multithreading, memory, multiprocessing, virtual-memory

首先，采用具有多个伪并行运行的进程的单处理器系统。当进程触发页面错误时，这是​​否会强制 CPU 停止执行所有程序，直到从磁盘加载页面？

如果是这样，这在多核或多处理器系统上是否会发生变化，或者其他进程是否可以在处理页面错误时继续读取和写入内存？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T19:49:23.580

首先，调度不适用于进程，但适用于线程。页面错误只会挂起导致错误的线程（在 Linux 和 Windows 上）。线程被取消调度，CPU 可以自由地做其他工作。

在操作系统接口硬件级别，无论如何都没有同步 IO。它不存在（至少在现代硬件中）。操作系统不会处于紧密的自旋循环中，等待硬件发出 IO 完成信号。相反，线程会被取消调度，直到 IO 完成（或相应的等待句柄发出信号）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:39:00.280

是的，这根本不是问题。没有人会设计出无法运行多个进程的多进程操作系统，也不会因为 B 正在等待磁盘 I/O 而任意阻止进程 A。

# c - 在数组中传递字符串

> ID：15886943
> 
> 赞同：1
> 
> 时间：2013-04-08T19:06:46.037
> 
> 标签：c, arrays, string

我正在尝试将字符串（文本文件行）传递到数组（`array`for`f1`和`array2`for `f2`）中。当我只打印 时`buffer` `buffer2`，线条就很好了。当我尝试使用`strcpy`程序通过它们时，没有明显的原因会崩溃。我尝试了以下方法：

*   使用二维数组无济于事
*   使用方法并尝试返回 char 然后将其传递给数组，所以我可以避免这种草率的代码，但现在就可以了。

我正在使用带有 DEV-C++ 的 Windows 7 x64。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[]) 
{
    char *arrayF1[20] ;
    char *arrayF2[20] ;
    int i = 0; 
    int size = 1024, pos;
    int c;
    int lineCount = 0;
    char *buffer = (char *)malloc(size);
    char *buffer2 = (char *)malloc(size);
    char *array[100];
    char *array2[100];

    if (argc!=3)
    {
       printf("\nCommand Usage %s filename.txt filename.txt\n", argv[0]); 
    }
    else
    {        
        FILE *f1 = fopen(argv[1], "r");
        FILE *f2 = fopen(argv[2], "r");

        if(f1) 
         {
          do { // read all lines in file
            pos = 0;
            do{ // read one line
              c = fgetc(f1);
              if(c != EOF) buffer[pos++] = (char)c;
              if(pos >= size - 1) { // increase buffer length - leave room for 0
                size *=2;
                buffer = (char*)realloc(buffer, size);
              }
            }while(c != EOF && c != '\n');
            lineCount++;
            buffer[pos] = 0;
            // line is now in buffer 
            strcpy(array[i], buffer);
            printf("%s", array[i]);
            //printf("%s", buffer);
            i++;
          } while(c != EOF); 
          printf("\n");
          fclose(f1);           
        }
        printf("%d\n",lineCount);
        free(buffer);    

        lineCount=0;
        i=0;
        if (f2)
        {
          do { // read all lines in file
            pos = 0;
            do{ // read one line
              c = fgetc(f2);
              if(c != EOF) buffer2[pos++] = (char)c;
              if(pos >= size - 1) { // increase buffer length - leave room for 0
                size *=2;
                buffer2 = (char*)realloc(buffer, size);
              }
            }while(c != EOF && c != '\n');
            lineCount++;
            buffer2[pos] = 0;
            // line is now in buffer 
            strcpy(array2[i], buffer);
            //printf("%s", buffer2);
            printf("%s", array2[i]);
            i++;
          } while(c != EOF); 
          printf("\n");
          fclose(f2);           
        }
        printf("%d\n",lineCount);
        free(buffer2);    
        }//end first else
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:10:55.400

您还没有为`array`. 您需要先执行此操作，然后才能将字符串复制到那里。

```
array[i] = malloc(pos + 1);

if (array[i] == NULL) {
    // handle error
}

strcpy(array[i], buffer);
printf("%s", array[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:13:01.710

对于`strcpy()`a `char*`，您需要已经为它分配了内存。您可以通过制作静态`char`数组来做到这一点：

```
char array[100][50];   //Strings can hold up to 50 chars 
```

或者您可以使用指针并动态分配它们。

```
char *array[100];

for(int i = 0; i < 100; i++)
    array[i] = malloc(sizeof(char) * 50);    //Up to 50 chars

...

for(int i = 0; i < 100; i++)
   free(array[i]);          //Delete when you're finished 
```

在使用其中一种方法分配它之后，使用`strcpy()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T19:13:33.977

在我看来，您在堆栈上分配了数组，但未能确保它们足够大，因为每个数组都有 size `100`。由于您不知道它们有多大，您可以动态分配它们（使用@JohnKugelman 的解决方案）或等到知道它们的大小需要之后再声明它们（即它们的字符串有多长需要持有）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T19:15:45.213

> 程序在没有明显原因的情况下崩溃

总是有原因的：）

这一行：

```
char *array[100]; 
```

创建一个包含 100 个字符指针的数组。

然后这一行：

```
strcpy(array[i], buffer); 
```

尝试将您的复制`buffer`到第 i^个指针。问题是您从未为这些指针分配任何内存，因此`strcpy()`崩溃。只是这个：

```
array[i] = malloc(strlen(buffer)+1);
strcpy(array[i], buffer); 
```

将解决该错误。

# python - Tkinter：制作一个可以在选择时更改变量的列表框

> ID：15886951
> 
> 赞同：0
> 
> 时间：2013-04-08T19:07:03.680
> 
> 标签：python, variables, listbox, click, tkinter

现在我制作了一个单击按钮即可激活的程序。现在说我有一个名为的列表框：

```
selection = Tkinter.Listbox(b_action)
selection.insert(1,"stuff")
selection.insert(2,"morestuff")
a = 0 
```

每次选择列表框的不同部分时，如何使该过程运行？例如，我首先单击“stuff”，然后单击“morestuff”。单击“stuff”设置`a`为 1，单击“morestuff”`a`再次设置为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T20:04:31.120

您可以创建一个字典，将实际列表框值与您的备用值（`{"stuff": 1, "morestuff": 2}`例如`<<ListboxSelect>>`：你的变量中的那个值。

这是一个例子：

```
import Tkinter as tk

class Example(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
        self.label = tk.Label(self)
        self.selection = tk.Listbox(self, width=40)

        self.label.pack(side="top", fill="x", expand=False)
        self.selection.pack(side="top", fill="both", expand=True)

        self.data = {"stuff": 1, "morestuff": 2}
        self.selection.insert("end", "stuff", "morestuff")

        self.selection.bind("<<ListboxSelect>>", self.on_listbox_select)

    def on_listbox_select(self, event):
        i = self.selection.curselection()[0]
        text = self.selection.get(i)
        self.label.configure(text="new value: %s (%s)" % (self.data[text], text))

if __name__ == "__main__":
    root = tk.Tk()
    Example(root).pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

如果您只想将变量设置为所选项目的索引，则不需要字典。从您的问题中不清楚您是否想要所选内容的索引，或者与列表框项目相关联的一些不同值。

# json - Jackson json：如何找到具有相同节点名称的多个 JSON 节点

> ID：15886956
> 
> 赞同：1
> 
> 时间：2013-04-08T19:07:21.153
> 
> 标签：json, jackson

我正在尝试使用 Jackson Json 解析器解析 JSON 文件，并在此过程中使用它的 get(String nodename) 函数。但是当我有多个同名节点时，它会尝试到达最后一个相似节点并仅对它们进行操作。我如何到达所有节点。

例如，如果我的 json 文件是

```
{"menu":{"a":"1", "b":"2"},
 "menu":{"c":"1", "d":"2"},
 "menu":{"e":"1", "f":"2"}} 
```

如果我正在尝试执行 get("menu") 并尝试在其中打印字段名称，则仅打印 e 和 f 而我希望打印 abcdef。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:37:40.827

我可能会[`@JsonAnySetter`](http://wiki.fasterxml.com/JacksonHowToIgnoreUnknown?highlight=%28jsonanysetter%29)按照以下方式使用 。

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.fasterxml.jackson.annotation.JsonAnySetter;
import com.fasterxml.jackson.databind.ObjectMapper;

public class App
{
  public static void main(String[] args) throws Exception
  {
    /* {"menu":{"a":"1", "b":"2"},"menu":{"c":"1", "d":"2"},"menu":{"e":"1", "f":"2"}} */
    String json = "{\"menu\":{\"a\":\"1\", \"b\":\"2\"},\"menu\":{\"c\":\"1\", \"d\":\"2\"},\"menu\":{\"e\":\"1\", \"f\":\"2\"}}";

    ObjectMapper mapper = new ObjectMapper();
    Foo foo = mapper.readValue(json, Foo.class);
    System.out.println(foo.menus);
  }
}

class Foo
{
  List<Menu> menus = new ArrayList<>();

  @JsonAnySetter
  public void addMenu(String key, Menu menu)
  {
    menus.add(menu);
  }
}

class Menu
{
  Map<String, Object> items = new HashMap<> ();

  @JsonAnySetter
  public void addItems(String itemName, String itemValue)
  {
    items.put(itemName, itemValue);
  }

  @Override
  public String toString()
  {
    return String.format("%s", items);
  }
} 
```

# c# - 如何最好地使用 LINQ to Entites 实现角色层次结构？

> ID：15886959
> 
> 赞同：0
> 
> 时间：2013-04-08T19:07:43.263
> 
> 标签：c#, database, data-structures, linq-to-entities, hierarchy

我的 SQL Server 2008 数据库中有一个角色表，其中包含网站内容用户的不同角色（例如管理员、主管、经理、...、基本用户）。使用 LINQ to Entities 我需要根据权限层次结构的高度来检索不同角色的查询结果。

角色不是线性层次结构，Admin 角色是具有最高权限的 root，但也有 Manager 和 Director 等角色，它们不分上下，但对同一数据具有不同的读取/修改权限。数据对双方都是可见的，但一些仅供董事读取的数据可由经理修改，反之亦然。可以添加新角色，它们是 Director 或 Manager 的子角色，并且只能访问其各自数据集的子集和更严格的读取/修改权限。基本用户是最少的角色，并且具有最受限制的数据访问权限，但也是 Director 和 Manager 的子角色（因此这是 DAG 而不是树）。

我正在尝试在数据库中设计一个角色层次结构（最好只有一个新表），它允许使用 LINQ to Entities 的导航属性轻松查询此 DAG 关系的不同分支。所以类似于：

```
var RoleRestrictedEntities 
    = Entities.Where(e => e.User.Role.RoleType <= currentUserRole.RoleType); 
```

如有必要，可以适当地替换`<=`运算符（我知道我不能在 LINQ to Entities 中进行运算符重载）。请注意，RoleType 实际上是一个具有它自己的字段（例如`int Role.RoleType.Level`）的表，而不仅仅是 Role 的整数字段，这很好。

这种角色层次结构的基本目的是区分谁可以修改数据，谁可以将数据视为只读，谁甚至根本看不到数据。更高级别的角色可以查看或可能修改其下属角色的用户所做的一切。他们看不到他们上面的角色处理过的数据。

这需要相当快地实现（表不多），将新角色插入层次结构或删除旧角色不太困难（这些操作很少见，但我不想要调试噩梦），最重要的是容易使用 LINQ to Entities 查询角色及其子角色。关于如何解决这个问题的任何建议？

# c# - 使用 Agility 包将图像保存在 html 文档中

> ID：15886963
> 
> 赞同：0
> 
> 时间：2013-04-08T19:07:50.003
> 
> 标签：c#, asp.net-mvc, html-agility-pack

我正在尝试将给定页面的图像保存为 jpeg（或任何格式）。

假设我在文档中有这个节点：

```
<td class="leftCol" align="center">
          <img src="/Images/LoadImage/1122334455" id="bp250_bp250_bp250_main_sub_sub_itemImage" alt="Object #1" style="border:none;" />

                    <div class="variations">
                        &nbsp;

                    </div>
                    <div class="rotate">
                        <a href="javascript:void(0)" rel="lightbox" onclick="return RotateCardImage(event, this, true);">
                        </a>
                    </div>
                </td> 
```

我想保存包含在

```
HtmlNodeCollection allImgNodes = docToParse.DocumentNode.SelectNodes("//img"); 
```

然后这个：

```
foreach(var allImgNode in allImgNodes)
{
    if(allImgNode.Attributes["alt] != null)
    {
        if(allImgNode.Attributes["alt"].Value == objName)
        {
            (... and here I am...)
        }
    }
} 
```

objName 是对应于对象名称的字符串，在此示例中，“Object #1”将是 objName。

谁能帮我弄清楚如何做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:26:47.257

感谢 Darin（这里：[C# htmlagility pack，从 URL 保存图像](https://stackoverflow.com/questions/6398566/c-sharp-htmlagility-pack-save-image-from-a-url)），我了解了另一种对我有很大帮助的方法。

首先使用 Html Agility Pack 我得到了我存储的图像的 url，如下所示：

```
string fileName = directoryToStoreImgs + objName + ".jpeg"; 
```

然后我使用 webClient 下载图像：

```
using (var imgClient = new WebClient())
{
    imgClient.DownloadFile(objUrl, fileName);
} 
```

现在我可以存储我的图像了 :)

# mysql - 选择嵌套 AND OR。如何？

> ID：15886964
> 
> 赞同：0
> 
> 时间：2013-04-08T19:07:52.637
> 
> 标签：mysql, sql, comparison

下面我有一个 SQL 查询，它作为登录脚本供选择输入用户名或电子邮件的用户使用。

我注意到，即使它似乎会检查任何一个或作为登录凭据都不会。

`username1 OR username1@email.com`= 仅通过用户名真正查找

```
SELECT * 
FROM tblaccount 
WHERE acc_user='username1' OR acc_email='username1@email.com' 
  AND acc_password='letmein1' AND acc_confirmed='1' AND acc_active='1' 
```

...如果我将其更改为...

`username0 OR username1@email.com`= 它不返回记录。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:09:22.613

在这些条件周围加上一些括号`OR`：

```
SELECT * FROM tblaccount 
WHERE (acc_user = 'username1' OR acc_email = 'username1@email.com' )
   AND acc_password  = 'letmein1' 
   AND acc_confirmed = '1' 
   AND acc_active    = '1'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T19:29:08.730

Mahmoud 的解决方案是正确的。您将必须阅读 mysql 中的运算符优先级。

[http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html](http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html)

由于`OR`优先级低于`AND`，您必须`OR`按照 Mahmoud 提供的方式将 放在括号内。

# java - 在列表视图中选择项目

> ID：15886967
> 
> 赞同：0
> 
> 时间：2013-04-08T19:08:06.280
> 
> 标签：java, android

我已经在我正在制作的一个小应用程序中为菜单创建了一个基本列表，但我正在努力创建当用户单击列表中的项目时将触发事件的方法。

```
public class MainActivity extends Activity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);
    final ListView lv = (ListView) findViewById(R.id.listview);
    String[] values = new String[] {
      "Home", "Profile", "Messenger", "Discussion", "Browse Library", "Grades", "Help"
    };
    final ArrayList<String> list = new ArrayList<String>();
    for (int i = 0; i < values.length; ++i) {
      list.add(values[i]);
    }
    final StableArrayAdapter adapter = new StableArrayAdapter(this, android.R.layout.simple_list_item_1, list);
    lv.setAdapter(adapter);
    lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        Context context = getApplicationContext();
        CharSequence text = "Hello toast!";
        int duration = Toast.LENGTH_SHORT;
        Toast toast = Toast.makeText(context, text, duration);
        toast.show();
      }
    });
  }
} 
```

现在它只是显示一个 Toast 但我希望它开始新的活动或片段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:10:40.640

尝试：

```
lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View v, int arg2,
                long arg3) {
          Intent intent = new Intent(MainActivity.this, ActivityB.class);
          startActivity(intent);

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:10:10.710

那么你的问题是什么？要开始一项活动，只需使用一个 Intent。

```
startActivty(new Intent(YourCurrentActivity.this, YourNewActivity.class)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T19:12:33.137

这很容易：

```
lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg1, View v, int arg2,
                long arg3) {
          Intent intent = new Intent(MainActivity.this, anotherActivity.class);
          startActivity(intent);

        }
}); 
```

# ios - 在 ios 中保存 wifi 身份验证首选项

> ID：15886968
> 
> 赞同：0
> 
> 时间：2013-04-08T19:08:06.593
> 
> 标签：ios, nsuserdefaults

我想在我的用户首选项中保存我的热点身份验证。例如：我使用带有我的用户名和密码的应用程序登录我的 wifi，然后解锁我的网络，所以下次我进入这个 LAN 时，它应该使用我在应用程序中输入的凭据。所以应用程序必须将 wifi 身份验证保存在用户配置文件中。我`NSUserDefaults`用来存储我的用户和钥匙串以获取密码。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:32:28.483

据我所知，该应用程序无法直接在iOS系统中设置接入点；如果系统已经这样做（可能以更安全的方式），我看不到在您的应用程序中保存 wifi 身份验证凭据的理由？如果您只是将其保存在用户的首选项中，那么如果您以后想更改此密码，就会遇到安全问题。但是，是的，您可以将包含凭据的配置文件分发到您的接入点，这样用户就不需要输入它。例如，您可以从应用程序中打开一个指向服务器网址的 URL，该网址将为您的用户提供个人资料。但是，您甚至不需要为此而设计的应用程序。例如，您可以生成指向该 URL 的 QR 码并使用现有的 QRCode 解码应用程序之一。

# ruby - 数组红宝石中的数组

> ID：15886971
> 
> 赞同：0
> 
> 时间：2013-04-08T19:08:20.700
> 
> 标签：ruby, arrays, loops

```
Input: <ArrayOfSMSIncomingMessage xmlns=\"http://sms2.cdyne.com\" xmlns:i=\"http://www.w3.org/2001/XMLSchema-instance\"><SMSIncomingMessage><FromPhoneNumber>19176230250</FromPhoneNumber><IncomingMessageID>cf8ef62d-9169-4908-a527-891fca056475</IncomingMessageID><MatchedMessageID>6838594b-288f-4e9a-863c-3ad9f4d501ca</MatchedMessageID><Message>This is a test</Message><ResponseReceiveDate>2013-04-07T17:19:06.953</ResponseReceiveDate><ToPhoneNumber>13146667368</ToPhoneNumber></SMSIncomingMessage><SMSIncomingMessage><FromPhoneNumber>19176230250</FromPhoneNumber><IncomingMessageID>ebf11b38-c176-439a-a2d0-7a2bb35390df</IncomingMessageID><MatchedMessageID>6838594b-288f-4e9a-863c-3ad9f4d501ca</MatchedMessageID><Message>Does it wotk</Message><ResponseReceiveDate>2013-04-07T17:19:17.303</ResponseReceiveDate><ToPhoneNumber>13146667368</ToPhoneNumber></SMSIncomingMessage></ArrayOfSMSIncomingMessage>
Expected Output:  [["191760250", "This is a test", "2013-04-07T17:19:06.953", "13146636 8"],["191760250", "Does it wotk", "2013-04-07T17:19:17.303", "131466368"]] 
```

我是新手，但我无法解决这个问题或找到答案。目标是解析文本。问题是我将信息放入数组 b 中，然后将数组 b 放入数组 c 中。然而，发生的事情是 c[0] 变得等于 c[1]，即使他们认为它们应该有不同的信息。我不知道如何解决这个问题。

```
data='"<ArrayOfSMSIncomingMessage xmlns=\"http://sms2.cdyne.com\" xmlns:i=\" <FromPhoneNumber>191760250</FromPhoneNumber>'
data=data+'<Message>This is a test</Message><ResponseReceiveDate>2013-04-07T17:19:06.953</ResponseReceiveDate>'
data=data+'<ToPhoneNumber>13146636 8</ToPhoneNumber></SMSIncomingMessage><SMSIncomingMessage><FromPhoneNumber>191760250'
data=data+'</FromPhoneNumber><Message>Does it wotk</Message><ResponseReceiveDate>2013-04-07T17:19:17.303</ResponseRecei'
data=data+'veDate><ToPhoneNumber>131466368</ToPhoneNumber></SMSIncomingMessage></ArrayOfSMSIncomingMessage>'
a=[['<FromPhoneNumber>','</FromPhoneNumber>'],['<Message>','</Message>'],
['<ResponseReceiveDate>','</ResponseReceiveDate>'],['<ToPhoneNumber>','</ToPhoneNumber>']]
b=[]
c=[]
d=true
ii=-1
while data.index(a[0][0])!=nil do
  ii+=1
  for i in 0..3
    print "\ni is #{i} first term: #{a[i][0]} second term #{a[i][1]}\n"
    b[i]= data[data.index(a[i][0])+a[i][0].length..data.index(a[i][1])-1]
    print "b[i] is #{b[i]}\n"
  end
  print "b is #{b}\n"
  print "c is #{c}\n"
  c.push(b)
  print "c is #{c}\n"
  d=data.slice!(0,data.index('</SMSIncomingMessage>')+5)
  print "d is #{d}\n"
  print "data is #{data}\n"
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:18:44.990

我真的不明白你的代码试图完成什么，但是关于你所说的并没有像你期望的那样工作，（*但是，发生的事情是 c[0] 变得等于 c[1] 甚至认为他们应该有不同的信息。*），问题是你正在推送`b`（这是一个参考）`c`，所以当你改变时`b`，你会得到改变内容的外观`c`。

改变

```
c.push(b) 
```

到

```
c.push(b.dup) 
```

如果你希望你所推动的东西`c`即使在你改变之后也保持不变`b`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:37:19.433

您正在解析 XML。不要浪费时间尝试操作字符串，因为您所要做的就是生成脆弱的代码。

相反，使用真正的 XML 解析器，它可以让您在结构中导航，并选择您想要的。

首先，您的 XML 格式不正确，但我通过提供一个结束标记来解决这个问题，将其变成损坏的 XML，但不是致命的。

```
require 'nokogiri'

xml = '<ArrayOfSMSIncomingMessage xmlns="http://sms2.cdyne.com" xmlns:i="">
  <SMSIncomingMessage>
    <FromPhoneNumber>191760250</FromPhoneNumber>
    <Message>This is a test</Message>
    <ResponseReceiveDate>2013-04-07T17:19:06.953</ResponseReceiveDate>
    <ToPhoneNumber>131466368</ToPhoneNumber>
  </SMSIncomingMessage>
  <SMSIncomingMessage>
    <FromPhoneNumber>191760250</FromPhoneNumber>
    <Message>Does it wotk</Message>
    <ResponseReceiveDate>2013-04-07T17:19:17.303</ResponseReceiveDate>
    <ToPhoneNumber>131466368</ToPhoneNumber>
  </SMSIncomingMessage>
</ArrayOfSMSIncomingMessage>'

doc = Nokogiri::XML(xml)

pp doc.search('SMSIncomingMessage').map{ |incoming_msg|
  %w[FromPhoneNumber Message ResponseReceiveDate ToPhoneNumber].map{ |n| incoming_msg.at(n).text }
} 
```

哪个输出：

```
[["191760250", "This is a test", "2013-04-07T17:19:06.953", "131466368"],
["191760250", "Does it wotk", "2013-04-07T17:19:17.303", "131466368"]] 
```

# java - 离开同步块时自动 notify()/notifyAll()

> ID：15886972
> 
> 赞同：0
> 
> 时间：2013-04-08T19:08:21.700
> 
> 标签：java, multithreading, thread-safety

我一直在考虑向 Java 语言架构师发送提案。

在同步块中

```
synchronized(lock) {

// If there is no notification before this point
// <--- implicitly put here // lock.notifyAll(); // OR // lock.notify();  
} 
```

线程离开同步块后，它不能再调用 lock.notifyAll() / lock.notify() 而不会出现异常。

忘记通知其他线程监视器持有者可能会永远让他们（其他线程）等待（除非他们在他们的等待方法中设置了一些超时）。

```
synchronized(lock) {

     lock.wait(); //<--- this thread may forever freeze here
} 
```

我无法想象这种行为（在同步块的末尾插入隐式通知，当没有显式通知时）是不可取的情况。

相同的方法可以应用于同步方法。

* * *

如何（技术上）实现这种行为可能有不同的方法，例如：

```
@autonotify
synchronized(lock) {
...
}

@autonotify
public void synchronized doSomething() {
...
} 
```

或者：

```
@autonotifyAll
synchronized(lock) {
...
}

@autonotifyAll
public void synchronized doSomething() {
...
} 
```

或者 - 使自动通知成为默认行为，但保留抑制它的能力，例如：

```
@suppressautonotify
synchronized(lock) {
...
}

@suppressautonotifyAll
public void synchronized doSomething() {
...
} 
```

* * *

你怎么看？反对？

支持或反对该提案的最佳评论将被接受为答案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T19:14:19.807

自动或默认执行此操作是一个很大的禁忌。在许多情况下，您在锁上同步而不希望在同步块结束时通知。这样做会破坏大量现有程序。

以及为什么要在同步块的末尾`@autonotifyAll`使用简单的而不是这样做。`lock.notifyAll()`如果你忘记打电话`lock.notifyAll()`，你有很多机会忘记`@autonotifyAll`。它会使事情变得不那么可读，也不那么一致。

无论如何，最好的做法是避免使用这些非常低级的方法，而使用更高级别的抽象，如阻塞队列、倒计时锁存器、信号量等。

如果我必须做出决定，您的建议将被拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:26:58.553

`Object.wait`并且`Object.notify/All`被认为是相当低级的同步机制；大多数时候，您会想要使用更高级别的构造，例如[java.util.concurrent](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)或其子包中的构造。如果您的用例足够微妙或特殊，以至于您需要使用这些`Object`方法，而不是 JDK 人员为您构建、测试和优化的高级工具——那么，您可能想要完全控制，并且希望（对于您的代码的用户）您可以处理它。

打个开车的比喻，这个问题就相当于买了一辆手动挡而不是自动挡的车，然后在你想换挡的时候让汽车制造商自动为你工作离合器。

# r - 替代 drop=FALSE 或更改默认行为

> ID：15886974
> 
> 赞同：6
> 
> 时间：2013-04-08T19:08:27.887
> 
> 标签：r

R 中将二维矩阵减少到 1 行的默认行为是实际删除一个维度。这可以通过将 drop=FALSE 放在矩阵搜索的末尾来“修复”。有没有办法让它成为默认值？我有一个很长的程序，刚刚意识到如果没有，我将不得不在大约 100 个地方添加它......我搜索了 ?options、?'[' 和 ?matrix 无济于事。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T20:39:26.957

您可以``[``像这样重新定义：

```
old <- `[`
`[` <- function(...) { old(..., drop=FALSE) } 
```

这种修改应该是交互式范围的本地，因此不会影响依赖于其他行为的例程。不过，没有保证。并准备好这种形式的代码可能会混淆您的代码的读者，他们习惯于其他语义。

也许您可以将此更改本地化到特定函数，而不是所有代码？

一种替代方法是为矩阵对象编写自己的类，您可以为此提供自己的子集运算符实现。如果您在数量非常有限的地方构建矩阵，这是有道理的，但如果有大量代码路径构建这些矩阵，则可能会出现问题。

# perforce - 使用 UNC 名称强制长文件名

> ID：15886976
> 
> 赞同：2
> 
> 时间：2013-04-08T19:08:33.310
> 
> 标签：perforce, long-filenames

有没有人让 perforce windows 客户端使用长文件名？在Perforce KB 上的[这篇文章](http://answers.perforce.com/articles/KB_Article/Submitting-or-Syncing-Files-with-Long-Path-Names)之后，我尝试使用 \?\C:\Temp 作为工作区根目录，但 P4V 给出了以下形式的错误：

> 无法创建目录
> 
> \\?\C:\temp\path...
> 
> mkdir: \\?\C:\: 访问被拒绝。

在我看来，P4V 正在尝试创建目录`\\\\?\\C:\\`，假设我认为它不存在。

我的 P4C 客户端似乎是“2012 年 3 月 9 日”的“Rev. Perforce Visual Client/NTX86/2011.1/428988”版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T06:33:50.797

在我的情况下，“文件名太长”是由于路径名太长。
我猜错误信息不是很清楚。它与 Windows 文件系统限制有关。

我的解决方案是从工作空间名称中删除几个字符。我想这是一个短期的解决方案。
以下[知识库文章](http://answers.perforce.com/articles/KB_Article/Submitting-or-Syncing-Files-with-Long-Path-Names)讨论了此问题的不同解决方法。

我在用：

*   Windows 7（版本 6.1.7601）
*   P4V版本：Perforce Visual Client/NTX64/2012.2/527787

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:14:09.847

您引用的知识库文章与非常长的路径有关，而不是与长文件名有关（我认为您的意思比旧的 DOS“8.3”文件名长度更多）。

由于 Perforce 没有 mkdir 命令，因此您应该像在 Windows 下通常那样创建一个目录，然后在该目录中编辑一个文件。

在这一点上，你根本没有使用过 Perforce。

然后，您可以使用 P4V 将刚刚创建的文件“添加”到 Perforce 树中，并在准备好将文件输入到版本控制系统中时“提交”文件。

# asp.net-mvc - 表单回发上的 ASP.Net MVC 隐藏字段

> ID：15886978
> 
> 赞同：0
> 
> 时间：2013-04-08T19:08:46.407
> 
> 标签：asp.net-mvc, forms, hidden-field

我的解决方案中有一个控制器和一个强类型视图。在视图中，我有一个最初为空白的隐藏字段。我在视图中有一个表单，用户可以单击“提交”按钮将表单提交给控制器操作。在控制器操作中，我正在修改模型内的值，然后使用修改后的模型重新显示相同的表单（之前发布的）。在视图上，我在 HTML 隐藏字段标记内写入模型字段的值，以便客户端 javascript 可以看到它。我遇到的问题是，在 javascript 中，回发表单上隐藏字段的值是空白的，即使在回发后正确设置了隐藏字段的服务器端值。我需要的是客户端 javascipt 能够看到隐藏字段的修改值。

```
<HttpPost()> _
Function Index(ByVal model As MaxDocument, formcollection As FormCollection) As ActionResult
  Dim sCriteria As String = ""
  Dim nKeyIndex As Integer = 0
  Dim nFieldIndex As Integer = -1
  Dim sFieldValue As String = ""
  Dim vrl As List(Of MaxServerLib.ValidationResult) = Nothing

  Try
    model.GetFileCabinetFieldList()
    For nFieldIndex = 0 To (model.IndexFieldCount - 1)
      sFieldValue = ""
      If nFieldIndex > 0 Then
        sCriteria += "~"
      End If
      Dim fcf As MaxServerLib.FileCabinetField = model.criterionAtIndex(nFieldIndex)
        ' Get the field value corresponding to this field
        For Each oKey As Object In FormCollection.AllKeys
          If oKey.ToString = fcf.sFieldName Then
            sFieldValue = FormCollection(oKey.ToString)
            Exit For
          End If
        Next
        sCriteria += sFieldValue
      Next
      If sCriteria = "" Then sCriteria = "[BlankIndex]"

      ' First thing we do is to perform valiation of the criteria
      model.ValidateFieldValues(sCriteria)
      If Not model.AllFieldValuesValid() Then
        ' Handle case where one or more field values are invalid.
        ' In this case we want to redisplay the form but show an error message listing the invalid fields

        ' Populate the message to be displayed to the user
        model.FormatErrorMessage()
        ' test code start
        ModelState.Clear()
        ' test cod end
        ' Return RedirectToAction("Index", New With {.sMaxUrl = model.MaxUrl, .sDataSource = model.DataSource, .sSessionTicket = model.SessionTicket, .dtLastCall = model.LastCall, .sFileCabinetid = model.FileCabinetId, .sFileCabinetName = model.FileCabinetName, .sShowMsg = MaxServerLib.EscapeString(model.ShowMsg)})
        Return View(model)
      Else
        ' All field values are valid, now attempt to add the document
        If model.ExportDocument() Then
          ' Document export was successful
          System.Diagnostics.Debugger.Break()
        Else
          ' Document export failed for some reason
          ModelState.AddModelError("", model.LastError)
          Return View(model)
        End If
      End If

      ' Return RedirectToAction("Index", "SearchResults", New With {.sMaxUrl = model.MaxUrl, .sDataSource = model.DataSource, .sSessionTicket = model.SessionTicket, .dtLastCall = model.LastCall, .sFileCabinetId = model.FileCabinetId, .sFileCabinetName = model.FileCabinetName, .sSearchCriteria = sSearchCriteria})
    Catch ex As Exception
      System.Diagnostics.Debugger.Break()
    End Try
  'End If

  ' If we got this far, something failed, redisplay form
  Return View(model)

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:08:43.730

如果您要回发相同的表单，那么很可能它是在绑定时从模型状态中提取原始值。

在返回表单之前调用 ModelState.Clear() 以查看是否可以修复它。

# vb.net - 为 txt 保存设置正确的文件路径 - vb.NET

> ID：15886981
> 
> 赞同：3
> 
> 时间：2013-04-08T19:08:57.233
> 
> 标签：vb.net, installation, save, setting, filepath

好的。我觉得这应该是编程 101，但我似乎找不到关于如何将文件路径名设置为足够动态以明确设置到安装 exe 的位置的正确答案。

基本上，这个应用程序实际上将安装在用户个人文件夹中，可能类似于本地数据，我需要获取一个由程序创建的 txt 文件，以便创建到与可执行文件相同的目录中。

当前路径：

```
Dim strFilePath As String = "D:\Development\Bobby\Prototyping\Replication Desktop Client\Replication_Desktop_Client\ClientAccessList.txt" 
```

我想将其设置为类似

```
Dim strCurrentLocationOfEXE As String = HardDriveLetter & Users & CurrentUserPath & InstalledDirectory
Dim strFilePath As String = strCurrentLocationOfEXE & "\ClientAccessList.txt"` 
```

但我不能为我的生活弄清楚如何让它确定，因为它不会总是安装到同一个文件夹（即用户名和硬盘驱动器号可能会不同）。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T19:16:02.640

您可以获得程序集运行的路径

```
Dim fullPath = System.Reflection.Assembly.GetExecutingAssembly().Location
Dim folderName = Path.GetDirectoryName( fullPath )
Dim strFilePath = Path.Combine(folderName, "ClientAccessList.txt") 
```

如果您想引用此应用程序的当前用户个人文件夹，那么方法是通过[Environment.SpecialFolder](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)枚举。
此枚举独立于底层操作系统（XP、Win7、x64、x32 等）在这种情况下，您可以使用：

```
Dim fullPath = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)
Dim strFilePath = Path.Combine(fullPath, "your_app_reserved_folder", "ClientAccessList.txt") 
```

在此示例`"your_app_reserved_folder"`中，应该是在安装应用程序期间创建的文件夹，您可以在其中放置每个用户的数据文件。（通常这是推荐的存储数据文件的方法，这些数据文件应该由用户分开）

如果您想在尝试使用之前检查文件夹是否存在，只需将获取文件名的逻辑封装在方法中

```
Public Function GetUserAppClientAccessList() As String

    Dim fullPath = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
    Dim appFolder = Path.Combine(fullPath, "your_app_reserved_folder")
    if Not Directory.Exists(appFolder) then
        Directory.Create(appFolder)
    End If
    return = Path.Combine(appFolder, "ClientAccessList.txt")
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:15:33.093

这将为您提供可执行文件的文件路径：

```
Assembly.GetEntryAssembly().Location 
```

然后要获取文件夹路径，您可以调用`Path.GetDirectoryName`. 因此，要获取文本文件路径，您可以执行以下操作：

```
Dim exeFilePath As String = Assembly.GetEntryAssembly().Location
Dim exeFolderPath As String = Path.GetDirectoryName(exeFilePath)
Dim filePath As String = Path.Combine(exeFolderPath, "ClientAccessList.txt") 
```

不过要注意一点：如果没有 .NET 程序集可执行文件，则`Assembly.GetEntryAssembly`可以返回`Nothing`，例如，如果代码通过 COM 作为库调用。在这种情况下，您可能希望通过调用命令行来使用可执行文件路径`Environment.GetCommandLineArgs()(0)`。如果失败了，出于某种原因，你总是可以求助于`Directory.GetCurrentDirectory()`.

# ajax - Stream Server v0.6.3 如何通过AJAX 读取Dart Client 0.4.3_r20602 发送的PNG 数据？

> ID：15886984
> 
> 赞同：0
> 
> 时间：2013-04-08T19:09:11.617
> 
> 标签：ajax, stream, httprequest, computer-science, dart

Stream Server v0.6.3 Dart Editor 0.4.3_r20602 Dat SDK 0.4.3.5_r26062

Dart Server(Stream) 如何通过 AJAX 读取 Dart Client 发送的 PNG 数据或 Sring？不像 PHP，Dart 的 HttpRequest 没有 request.text 的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T14:18:56.890

一般来说，我们可以使用 StringDecoder() 将传入的 int 列表从 request 转换为 stream，然后使用 stream 的 listener 事件来处理 value。

有关测试示例，请参阅我最近的帖子。干杯

[Dart 0.4.3_r20602 Stream Server 发送和处理PNG客户端服务器示例](https://stackoverflow.com/questions/15816741/dart-0-4-3-r20602-stream-server-example-of-sending-and-handling-png-client-serve)

或搜索“Dart 0.4.3_r20602 流服务器发送和处理PNG客户端服务器示例”

# java - 分发自签名 SSL 证书：如何跳过导入密钥库的要求

> ID：15886990
> 
> 赞同：2
> 
> 时间：2013-04-08T19:09:28.117
> 
> 标签：java, ssl, ssl-certificate, keystore

我开发了一个 Java 应用程序，它使用自签名 SSL 证书通过 https 与我的服务器通信。

现在我想与我的一些客户分享这个应用程序。他们有什么办法可以跳过将证书导入他们的密钥库？还是他们总是必须手动导入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:51:35.843

根据您发布的链接，您正在谈论单向 SSL，您需要让您的客户知道服务器的自签名证书（对吗？）。因此，您的客户端应用程序需要一个所谓的**信任库**。信任库是保存所有您信任的证书的 java 密钥库，例如您要连接的服务器的证书。Java 安装中的`cacerts`文件包含默认信任的各种证书。

无需将服务器证书安装到`cacerts`客户端的 Java 安装文件中，您可以提供自己的信任库，其中包含服务器证书以及客户端应用程序。然后需要使用系统属性启动客户端应用程序`-Djavax.net.ssl.trustStore=path/to/your/truststore`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T00:46:16.730

你这样做是错的。每个客户端都应该使用自己的 SSL 证书：在本地生成密钥对，生成证书，然后离线发送给您。为所有客户端使用一个证书基本上等同于根本不使用一个证书：您无法唯一标识客户端，因此这一切都毫无意义。

# design-patterns - MVVM Light DI 在虚拟机之间共享数据？

> ID：15886991
> 
> 赞同：1
> 
> 时间：2013-04-08T19:09:36.613
> 
> 标签：design-patterns, mvvm, dependency-injection, mvvm-light

目前我正在使用 DI 在虚拟机之间传递数据，想象一下搜索页面和结果页面或主/详细信息的场景。

因此，在这种情况下，我应该创建一个称为“参数 VM”的 VM（有或没有模型）来存储我的搜索参数，并在详细信息或结果 VM 中读取它们。

此外，我在 VMLocator 中注册了此参数 VM，并将其注入到两个 VM 的构造函数中。

我得到的是，当我搜索新数据并将要搜索的数据存储在此参数 VM 中时，我在结果/详细信息 VM 中也成功获取了数据。

所以这是一个使用 MVVM Light 的经过验证的模式，尽管在网络上没有很好的记录，我的问题是这在性能和代码可读性方面是否是一个好方法。我想知道是否有人在不使用 MVVM Light 中的消息系统的情况下使用另一种方法。

我对这种方法的一个烦恼是我必须将我的参数封装在继承 ViewModelBase 的 VM 中，如果我想注入一个普通类，我无法将更改传播到第二个 VM，我仍然不知道为什么我可以'对一个简单的课程做同样的事情，我想知道是否有人也知道原因。我在 VM 中创建一个简单类的原因是因为在 WP 和 W8 中，我可以使用 VMLocator 中的工厂在停用和激活应用程序时恢复模型的状态。

我会很感激你的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T07:06:50.070

我们在模块化 WPF 应用程序中使用[EventAggregator](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)模式。在这种情况下，您的视图模型不需要相互了解。相反，它们都共享一个作为构造函数参数注入的 IEventAggregator 服务实例。然后，Master ViewModel然后使用特殊事件类发布事件（例如，选择更改时），并且详细信息ViewModel订阅该类型的事件，并且在事件发生时，会对其进行反应（通过显示新的详细信息）。使用这种模式，您可以设置不同项目中的视图模型的通信，而无需任何紧密耦合。当然，两个视图模型共享他们可以处理的事件类的知识。

互联网上有这种模式的各种实现。其中一些可以直接从 VisualStudio 中使用 NuGet 安装，例如[Caliburn.Micro.EventAggregator 。](http://www.mindscapehq.com/blog/index.php/2012/02/01/caliburn-micro-part-4-the-event-aggregator/)

希望有帮助=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:10:46.697

根据我的经验，使用 Messenger 是在虚拟机之间以解耦方式进行通信的最佳方式，我认为 IOC，特别是 MVVM Light 中的 SimpleIOC，是一种将依赖项注入虚拟机（如存储库、服务等）的方式。

```
View ----RelayCommand---> VM

VM ----Messenger----> VM

Repositories ---- SimpleIOC ---> VM 
```

# json - Knockout.js JSON 数据具有可选属性

> ID：15886994
> 
> 赞同：0
> 
> 时间：2013-04-08T19:09:44.183
> 
> 标签：json, mvvm, knockout.js, knockout-mapping-plugin

从我的服务器返回的 JSON 具有可选属性（例如）CompanyNumber 有时为 NULL，因此它已从该特定公司的 JSON 响应中删除。(JMSSerializeBundle)。

如果我绑定它以呈现表中的所有公司，一旦有公司没有 CompanyNumber，它就会崩溃。有没有办法防止这种情况发生？

当前代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $.getJSON(Routing.generate('contacts_companies_get_json'), function(data) {
    var companies = ko.mapping.fromJS(data);
    ko.applyBindings({
        'companies': companies
    });
 })
});
</script>

   <table class="table">
   <thead>
       <tr>
           <th>Name</th>
           <th>Company Number</th>
           <th>Account</th>
           <th>Supplier</th>
           <th>Competitor</th>
           <th>Other</th>
           <th></th>
       </tr>
   </thead>
   <tbody data-bind="foreach: companies">
       <tr>
           <td><a href="#" class="title"><span data-bind="text: name"></span> <span data-bind="text: legal_form"></span></a></td>
           <td><span data-bind="text: company_number"></span></td>
           <td><span data-bind="if: type_account" ><i class="icon-check"></i></span></td>
           <td><span data-bind="if: type_supplier" ><i data-bind="if: type_supplier" class="icon-check"></i></span></td>
           <td><span data-bind="if: type_competitor" ><i data-bind="if: type_competitor" class="icon-check"></i></span></td>
           <td><span data-bind="if: type_other" ><i data-bind="if: type_other" class="icon-check"></i></span></td>
           <td><a class="btn btn-mini">Details</a><td>
       </tr>
   </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:13:18.777

你可以试试这个：

```
<div data-bind="text: name() ? name() : ''"></div> 
```

参考：[https ://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/fhVmPzRjdOs](https://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/fhVmPzRjdOs)

可能重复： [淘汰视图模型属性未定义](https://stackoverflow.com/questions/9281196/knockout-viewmodel-property-undefined)

# batch-file - 在 Windows 2008 中从任务管理器运行批处理文件

> ID：15886996
> 
> 赞同：2
> 
> 时间：2013-04-08T19:10:00.917
> 
> 标签：batch-file, taskmanager

我创建了一个 bat 文件来运行 SQL 查询并创建一个文本文件作为输出，前提是查询的值大于 2（下面是 bat 文件）

* * *

```
@echo off
cls

sqlcmd -S PRDDSOLP01 -U OLAP -P PASSWORD -d sqlADM -i \OLAP\olap.sql -h-1 -o olap.txt

set /p value=< olap.txt

if '%value%'=='2' goto Result
goto endif

:Result

sqlcmd -S PRDDSOLP01 -U PRSOLAP -P PRSOLAPonOLAP -d sqlADM -i \OLAP\olap.sql -h-1 -o olap.txt

:endif
DEL "olap.txt"

exit 
```

* * *

当我通过命令提示符在服务器上运行 bat 文件时，这可以正常工作，但是当我安排它使用任务管理器运行时，它不起作用。

我使用管理员帐户创建任务，并且同一个管理员帐户可以完全控制文件夹以及 bat 文件，但没有运气。SQL查询，bat文件都在同一个文件夹中。