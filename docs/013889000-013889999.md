# StackOverflow 问答 13889000-13889999

# java - 在 Java 中设置星期几似乎不会影响这一天

> ID：13889000
> 
> 赞同：0
> 
> 时间：2012-12-15T03:25:04.663
> 
> 标签：java, calendar

所以我认为这个问题很简单，我可以给你三行代码，问题很可能是我对日期类的理解。

```
 public DrawCalendar(GregorianCalendar date){

         date.setFirstDayOfWeek(GregorianCalendar.THURSDAY);
         System.out.print(date.get(GregorianCalendar.DAY_OF_WEEK)); 
```

我的问题是我相信我正在调整一周的开始日期，所以今天，默认情况下是一周的第 6 天。如果我将其更改为随机日期或整数，例如星期四，即使星期四是一周的第一天，我仍然会知道今天是一周的第六天。

这就是我相信正在发生的事情，为什么打印语句不会根据一周的第一天返回一个不同的数字，该数字在它之前的一行进行了调整？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T03:33:30.577

```
Use getFirstDayOfWeek() method
System.out.println(calObj.getFirstDayOfWeek()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T03:33:21.553

`setFirstDayOfWeek`通常是 SUNDAY 或 MONDAY 并影响 WEEK_OF_YEAR 数字。DAY_OF_WEEK 只是星期一，星期二，...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T03:34:57.567

我很确定这是因为：

```
date.setFirstDayOfWeek(GregorianCalendar.THURSDAY); 
```

用于告诉类应该使用一周中的哪一天进行涉及周的日期计算，而

```
date.get(GregorianCalendar.DAY_OF_WEEK); 
```

获取当前对象在时间上表示的星期几（因为当前对象表示特定时间点）。

# javascript - 获取存储为数组的 HTML 输入表单变量作为 javascript 变量

> ID：13889002
> 
> 赞同：0
> 
> 时间：2012-12-15T03:25:13.930
> 
> 标签：javascript

如何获取作为数组存储到 javascript 变量中的 HTML 输入表单的值：

输入字段的 HTML

```
<input type="hidden" name="subject[0]" 
id="contact_subject" value="test message" /> 
```

...

```
<input name="contact" value="Send" type="submit" 
onkeypress="return validateMessage(0); false" 
onclick="return validateMessage(0); false"/> 
```

我的 javascript 尝试：

```
function validateMessage(counter){
var subject = document.forms["Contact"]["subject["+counter+"]"].value; 
```

并尝试过：

```
var subject = document.forms["Contact"]["subject"][counter].value; 
```

两次尝试的主题都是空的。

# java - 某些电影中使用的 GUI 设计和软件

> ID：13889016
> 
> 赞同：-3
> 
> 时间：2012-12-15T03:29:05.003
> 
> 标签：java, user-interface

我是一名 java & php 程序员，我对我看过的一些电影中使用的软件的 GUI 设计很好奇，例如：

*   天使与恶魔电影（科学家使用的 CERN 软件）
*   Skyfall（Ben Whishaw 用作 Gadget-Master Q 的软件）
*   还有一部高科技电影..

这些软件看起来非常漂亮且具有交互性，其中大多数使用蓝色或绿色作为主色，黑色作为背景。

我对开发这样的应用程序非常感兴趣。

开发这样的 GUI 和应用程序需要什么编程语言和工具？

我可以访问有关此问题的任何参考链接吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T03:41:43.280

几乎任何平台都允许您自定义 GUI 的皮肤 - Flex、WPF、Android、iOS 等等。

你知道你绝对可以创建网站来模仿电影中这些 UI 的外观和感觉，使用一些 CSS 和补充图像，然后全屏查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T03:44:15.390

您可以使用当今可用的任何 GUI 工具包开发类似的应用程序。这将需要大量的自定义编码。如果我要写类似的东西，我会在 WPF 中做

# session - 我在 PHP 中的会话变量没有从一个页面保存到另一个页面

> ID：13889017
> 
> 赞同：0
> 
> 时间：2012-12-15T03:29:18.157
> 
> 标签：session, php

所以它曾经可以工作，然后我在代码中更改了一些内容，现在我无法再访问我存储在 login.php 文件中的 Session 变量用户名。我在 login.php 的末尾打印出来，所以我知道它会保存它，但我无法从其他 php 文件中打印它。关于问题是什么的任何想法？

测试.php

```
<html>
<?php
session_start();

$temp = $_SESSION['username'];
echo "$temp";

?>
</html> 
```

登录.php

```
<?php
session_start();

$usernm = $_POST["usernm"];

$_SESSION['username'] = $usernm;
// there is an html form that defines username

echo $_SESSION['username'];
header ('Location: http://www.ugrad.cs.jhu.edu/~rwilso70/test.php');
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T03:31:25.487

```
<html>
<?php
session_start();

$temp = $_SESSION['username'];
echo "$temp";

?>
</html> 
```

应该：

```
<?php
session_start();
?>
<html>
<?php

$temp = $_SESSION['username'];
echo "$temp";

?>
</html> 
```

必须在发送任何内容之前完成，因为 cookie 设置是 HTTP 标头。您应该打开[error_reporting](http://us3.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)否则会出错并告诉您出了什么问题。始终以最高的错误报告进行开发。

# php - 如何包含文件以便项目在多个开发环境中工作

> ID：13889021
> 
> 赞同：3
> 
> 时间：2012-12-15T03:29:54.660
> 
> 标签：php

我正在用 PHP 构建我的第一个网站。我在本地测试它，有两台我正在开发它的计算机，我的家用计算机和我的 Uni 计算机，主要项目存储在 Dropbox 中。

该项目在两台计算机上具有不同的根路径，因为它们具有不同的用户名。

'/home/vadar/Dropbox/ENELWebsite/public_html/'

'/home/tcpb1/Dropbox/ENELWebsite/public_html/'

这显然已经成为一个问题，因为使用根路径包含文件将导致一台计算机上出现错误。

我最初尝试在我的索引页面中包含它，但它还需要包含它的包含文件的根路径，我必须在计算机之间进行更改。

```
$dir_home = '/home/vadar/Dropbox/ENELWebsite/public_html/';
$dir_uni = '/home/tcpb1/Dropbox/ENELWebsite/public_html/';
if(file_exists($dir_home) OR is_dir($dir_home)){
    define('APP_DIR', $dir_home); //home comp
}
elseif(file_exists($dir_uni) OR is_dir($dir_uni)){
    define('APP_DIR', $dir_uni); //uni comp
}
else{
    echo 'No include directory exists';
} 
```

解决这个问题的最聪明的方法是什么？我意识到我可以在其中任何一个上创建一个新的用户文件夹，然后将 Dropbox 文件夹移动到其中，但我确信有一种更智能的方法可以将文件包含在项目本身中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T03:36:15.117

使用[$_SERVER['DOCUMENT_ROOT']](http://php.net/manual/en/reserved.variables.server.php)查找根文件夹。

```
$dir = $_SERVER['DOCUMENT_ROOT']; // will return /home/vadar/Dropbox/ENELWebsite/public_html/
if(file_exists($dir)){ //just to make sure
    define('APP_DIR', $dir); //home comp
}
else{
    echo 'No include directory exists';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T03:59:45.223

```
define('APP_DIR', dirname(__DIR__));     
ini_set('include_path', ini_get('include_path') . PATH_SEPARATOR . APP_DIR); 
```

这将在您的包含路径中插入当前目录。现在，无论您的环境如何，您的包含路径都将始终包含您的当前目录。

在这种情况下，您不依赖`$_SERVER`，因为它可以被客户端操纵。

# asp.net - 如何在 IIS/ASP.Net 中创建长期存在的对象？

> ID：13889023
> 
> 赞同：6
> 
> 时间：2012-12-15T03:30:31.927
> 
> 标签：asp.net, asp.net-mvc, iis, signalr

我目前正在使用 SignalR 和 ASP.Net MVC 4 应用程序。我正在使用来自 RabbitMQ 的消息，并且本质上需要在有新消息进入队列时通过 SignalR 进行广播。问题是在正常使用情况下，IIS 中没有一个长期存在的对象可以存在的地方。我每秒收到大约 1000 条消息，因此通过从外部队列监视服务/应用程序发出请求将消息推送到 IIS 的标准方法几乎会杀死我的 IIS。

我有一个在后台线程上创建单例实例的一般想法。不确定在 iis 中执行此操作的最佳方法是什么，如果应用程序死亡，希望单例自动重新创建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:07:53.227

Are you thinking you would have something in a background thread that would check for messages every so often?

I have used [quartz.net](http://quartznet.sourceforge.net/) to create scheduled jobs in the past. They are fairly simple to set up. You can basically just say, execute this job every x interval starting at y time. With whatever solution you go with you will probably need to add in error handling. I think your quartz job would keep trying to execute every x interval even if it threw an exception, but you will need to make sure that you clear out whatever caused the exception in the first place. Otherwise every time it runs it will fail. I.E. like if there is something wrong with your message such that it will error every time you try and broadcast it.

Watch out for IdleTimeout of your application. If IIS puts your web app to sleep your singleton in your background worker/quartz job goes to sleep too. If you set IdleTimeout to 0 your application will never sleep.

If you init your job/worker in Global.asax.cs Application_Start() your job will always start when your web app does.

When you first deploy your app or update it or restart it you will need to make sure your app is running. Not sure if there is a setting for this in IIS. But normally your application doesn't start up until a request is made to it. Good luck. Let me know if you find a solution to this.

Same deal if you app crashes for some other reason. You need something to re-start your web app.

Hope that helps!

# .htaccess - 如何将 www 和非 www .net 转发到 www .com？

> ID：13889024
> 
> 赞同：-1
> 
> 时间：2012-12-15T03:30:44.690
> 
> 标签：.htaccess

我可以将 www .net URL 转发到 www .com。但是如何将非 www .net 转发到 www .com？

下面的代码是我在 .htaccess 文件中使用的代码，它部分工作。

```
RewriteCond %{HTTP_HOST} !^www\.example\.net$ [NC]
RewriteCond %{HTTP_HOST} ^www\.example\.net$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:39:49.133

发表您的评论，看起来您实际要求的内容是发送到`*.example.net`或`example.net`转发到 www.example.com 的任何内容。这样做的方法是：

```
RewriteCond %{HTTP_HOST} ^.*\.example\.net$ [OR]
RewriteCond %{HTTP_HOST} ^example\.net$
RewriteRule ^(.*)$ http://www.example.com/$1 [R=301,L] 
```

使用正则表达式而不是两个条件可能有一种奇特的方法，但我建议这是最简单和最直接的方法。

# google-bigquery - bigquery api 资源管理器中的错误

> ID：13889025
> 
> 赞同：0
> 
> 时间：2012-12-15T03:30:48.607
> 
> 标签：google-bigquery

使用 api explorer 我收到此错误。请注意，将 Excel 连接器与相同的项目和查询一起使用是有效的。我确实将范围指定为只读。

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "accessDenied",
    "message": "Access Denied: Job shufflepoint-project:job_5c8ec6808a89439eb4ac87943dbc6390: RUN_QUERY_JOB"
   }
  ],
  "code": 403,
  "message": "Access Denied: Job shufflepoint-project:job_5c8ec6808a89439eb4ac87943dbc6390: RUN_QUERY_JOB"
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:55:53.627

运行查询需要[https://www.googleapis.com/auth/bigquery](https://www.googleapis.com/auth/bigquery)范围。鉴于查询结果可以创建表，因此查询并不是真正的只读操作。我们可以仅对未指定表名的查询强制执行此操作。如果您发现这是一个有价值的功能，请告诉我。

# php - PayPal Payflow Pro 错误

> ID：13889026
> 
> 赞同：0
> 
> 时间：2012-12-15T03:30:49.077
> 
> 标签：php, api, sdk, paypal, payflowpro

我在测试帐户上使用 PayPal 的 Payflow pro API，无论如何，它告诉我该字段不正确。我正在使用 PHP。这是发送给他们的字符串：

> USER=xxx&VENDOR=xxx&PARTNER=PayPal&PWD=xxx&TENDER=C&ACTION=A&TRXTYPE=R&PROFILENAME=JerProfile&PAYPERIOD=MONT&START=12152012&TERM=0&ACCT=4012888888881881&AMT=123.45&&BUTTONSOURCE=PF-CCWizard

回应说

```
Array
(
    [RESULT] => 7
    [RPREF] => R1853E1E07BF
    [RESPMSG] => Field format error: Invalid or missing START/NEXTPAYMENTDATE field
) 
```

正如你所看到的，我已经指定了一个每月支付期，并且开始日期是他们的 mmddyyyy 格式。任何帮助将不胜感激，因为这让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T09:44:35.090

利用

> 开始='12152012'

代替`START=12152012`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:42:12.110

你在哪个时区？我看到你的日期超过了 12152012，而今天是第 15 号……当你运行这个时，已经是第 15 号了吗？

文档说...

> 循环计费周期的开始（或重新开始）日期，用于计算应付款的时间。**使用明天的日期或将来的日期。**

所以到目前为止，也许尝试 12162012 会起作用..??

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T12:41:58.367

提交变量的确切顺序很重要：

```
 'TRXTYPE' => 'R',
        'PARTNER' => $API_Partner,
        'VENDOR' => $API_Vendor,
        'USER' => $API_User,
        'PWD' => $API_Password,
        'ACTION' => $action 
```

然后根据哪个操作需要任何其他。对于创建操作，START 必须是明天的日期或将来的日期。希望这可以帮助其他人在使用 PayPal 的 PayFlow API 时遇到问题。

# html - 单个标题内的两个锚标记

> ID：13889033
> 
> 赞同：0
> 
> 时间：2012-12-15T03:31:51.697
> 
> 标签：html, seo, anchor, blogs, html-heading

我现在正在研究一个新博客的设计和标记，我找到了一个地方，我很想在一个标题标签中嵌套两个锚标签：

```
<h3><a>Popular<a/>|<a>Recent</a></h3> 
```

看起来像这样：

[![](../Images/3f9478976c0338e4d2d6bc44b3df0038.png)](https://i.stack.imgur.com/zESAs.png)
[（来源：[autochemky.com](http://autochemky.com/tempo/PR.PNG)）]

这样做的目的（显然）是启用“POPULAR”作为显示热门文章的链接，并启用“RECENT”作为显示最近文章的链接。. . 单击一个或另一个只会更改侧边栏上的可见内容（文章列表），而不会链接到新页面（通过 ajax 或它们都已加载并且一个是隐藏的 div）。

这样做是一种避免涉及多个 h3 元素或多个可见文章列表的额外潜在不必要代码的措施。

我想我的问题是（按重要性排序并假设 HTML5）：

**标记是否有效/可接受？**

**这会对 SEO 产生任何现实/显着的影响吗？**

**您愿意以不同的方式获得相同的结果吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T03:36:23.663

假设 HTML5 - 这是可以接受的，HTML5 引入了任何元素都可以在`<a>`标签内（非常肯定）

> HTML5 的变化 尽管以前的 HTML 版本将 a 元素限制为仅包含短语内容（本质上，在以前的版本中称为“内联”内容），但 a 元素现在是透明的；也就是说，现在允许 a 元素的实例也包含流内容（本质上，在以前的版本中称为“块”内容）——如果该 a 元素实例的父元素是允许包含流内容。

对 SEO 没有显着影响，这是一个小细节，`<h1>`如果这是一个部分的标题，你可能应该使用一个标签，因为这是新 HTML5 语义的基础。

我肯定会坚持你所拥有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:40:22.253

好吧，是的，在标题中包含多个元素是有效的`a`（只要您不*嵌套*`a`元素）。

但我认为你的标题没有意义。它*要么是*“流行” ，*要么*是“最近”，而不是同时出现，对吧？所以你的标题失去了它的目的：描述它的部分的内容。

您应该使用不属于标题的内容切换器：

```
<section>
  <h1>Popular</h1>
  <nav>Or see <a href="#recent">recent content</a></nav>
  <ul>
    <li>…&lt;/li>
    <li>…&lt;/li>
  </ul>
</section> 
```

（如果您愿意，您可以更改措辞和样式，使其看起来像您的示例，方法是将链接定位到标题旁边的其他内容。）

单击“最近的内容”应将标题从“流行”更改为“最近”，并将链接更改为`<a href="#popular">popular content</a>`

如果您不使用 URL 锚点 + CSS 隐藏/显示相应内容，并且您没有针对没有 JS 的用户/机器人的后备，您应该同时为用户显示热门内容和最新内容禁用 JavaScript。

* * *

关于：

> 这`h3`是因为它是侧边栏中的部分之一，而我的侧边栏部分都以`h3`. 我看过一些使用的网站`h2`和一些使用的网站`h3`，我选择了`h3`。

只是为了确定：您不能随意使用您喜欢的任何标题级别。您需要遵循文档大纲。使用`h3`是否正确取决于你的整个页面结构。

# ios - iOS Storyboards 我应该使用它们吗？

> ID：13889034
> 
> 赞同：10
> 
> 时间：2012-12-15T03:32:11.803
> 
> 标签：ios, xcode, storyboard, uistoryboard

我是 iOS 开发的新手（尚未创建任何应用程序），但我向我的朋友寻求建议，他们在市场上拥有非常高评价的应用程序。他说不要使用故事板。

尽管我很想听取他的建议，但他们似乎真的很有帮助。

*   这是否会在将来给我的应用程序带来问题？
*   我有什么理由不想使用故事板吗？

来自 Android 背景，我不明白为什么要使用它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-12T15:25:59.987

除了快速原型之外，我倾向于避免使用故事板。如果您知道您有一个不会变得复杂的非常简单的应用程序，并且您是唯一的开发人员，那么故事板可能没问题。

以下是一些博客文章，详细介绍了使用故事板时的一些痛点：

*   [http://toxicsoftware.com/uistoryboard-issues.html](http://toxicsoftware.com/uistoryboard-issues.html)

*   [http://blog.waynehartman.com/archive/2012/01/07/uistoryboard-on-ios-5-the-good-the-bad-and-the.aspx](http://blog.waynehartman.com/archive/2012/01/07/uistoryboard-on-ios-5-the-good-the-bad-and-the.aspx)

以上两点都有些过时了，但我相信相关点仍然适用。

请注意，理论上您需要使用情节提要来获取静态表，这可能很有用。为了获得这个好处，您可以只将静态表放在情节提要文件中（注意：您可以在应用程序中拥有多个情节提要文件）并使用 xibs 或只为 UI 的其余部分编写代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-12T15:10:10.990

我建议不要使用情节提要或 Interface Builder。

*   如果你花更多的时间使用它，你会更快地学习 Objective-C。在 IB 和代码之间切换，您将有两件事要学习。上下文切换稍后仍会减慢您的速度。
*   Nib 和故事板是大型 XML 文件，不能很好地与源代码控制配合使用；如果你和其他人同时在做一个，你*会*遇到合并冲突。
*   您无法在 IB 中立即看到正在发生的所有事情，因此很难追踪诸如布局问题之类的事情。
*   您无法像在代码中那样在 IB 中搜索或替换
*   笔尖和故事板将您的视图逻辑放入控制器中。这对您来说是否是个问题取决于您是多少 MVC 纯粹主义者。
*   如果您想将您的应用程序移植到 Android 或从 Android 移植，IB 将使其变得更加困难。

这一切都来自经验。我开始运行一个使用 IB 开发 iOS 应用程序的小型软件团队（故事板还没有推出），在一年之内，它引起了很多问题，我不得不禁止使用它。当我们停止使用它时，我们的生产力大大提高了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-12T15:25:19.307

我不认为这个问题真的可以回答。任何技术决策都有其优点和缺点，这一点也不例外。

优点：

*   可视化，因此您可以更快地更好地了解您的应用程序的外观
*   更少的代码
*   自动布局*可以*更容易
*   这不是全有或全无。您可以在 Storyboards 中构建“基础”并在代码中完成它

缺点：

*   XML 文件的大毛球使合并冲突变得非常讨厌
*   灵活性低于代码（无继承等）
*   如果您的应用程序中有很多屏幕，那么除非您有很大的屏幕，否则使用单个故事板可能会非常困难！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-15T03:42:01.010

我认为使用与否并不重要，最重要的是您的应用程序如何？（质量，美观，快速......）。StoryBoard 非常适合初学者缩短设计时间和理解。但是当成为专业的开发人员时，你会喜欢通过编码来绘制你的界面，因为打字比图形更快。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-15T03:43:28.190

它只取决于你。如果您单独开发应用程序，情节提要非常有用。如果您在团队中工作，最好使用 .xibs，因为与故事板相比，将它们与 svn 合并的问题更少

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-15T03:38:08.713

非常广泛的问题。有时故事板很棒，有时却很麻烦。取决于您的应用程序的要求和兼容性需求。

有关何时使用情节提要以及何时使用 XIB 的详细说明，请参阅此答案：

[何时使用 Storyboard 以及何时使用 XIB](https://stackoverflow.com/questions/9404471/when-to-use-storyboard-and-when-to-use-xibs)

# vb.net - 加载大表时 DataGridView 冻结 UI

> ID：13889035
> 
> 赞同：0
> 
> 时间：2012-12-15T03:32:23.703
> 
> 标签：vb.net, asynchronous, datagridview

以下代码冻结了我的 UI。

```
'Load DataTable using backgroundworker with 15,000 records
...

'On backgroundworker's run completed event, pass loaded table
'and fill datagridview control

dim t as DataTable
t = DirectCast(e.Result, DataTable)

'This part takes very long and FREEZE UI
gridview.DataSource = t 
```

有人有解决加载部分的方法吗？DataGridView 中没有异步加载方法，我无法将 gridView.DataSource = t 放在后台工作线程中，因为它会与 UI 线程冲突。请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:03:46.627

使用 Datagridview 虚拟模式解决了这个问题。

# node.js - 使用手表从 grunt 运行节点应用程序

> ID：13889037
> 
> 赞同：3
> 
> 时间：2012-12-15T03:33:01.673
> 
> 标签：node.js, gruntjs

所以，我有下面的 grunt 文件。我想添加一个任务来启动我的节点应用程序并监视目录中的更改并重新启动。我一直在使用supervisor，node-dev（很棒），但我想运行一个命令并启动我的整个应用程序。必须有一个简单的方法来做到这一点，但我只是想念它。它也是用咖啡脚本编写的（不确定这是否会改变事情）......

```
module.exports = function(grunt) {
  grunt.initConfig({
    /*exec: {
        startApi: {
            command: "npm run-script start-api"
        }
    },*/
    //static server
    server: {
        port: 3333,
        base: './public',
        keepalive: true
    },

    // Coffee to JS compilation
    coffee: {
        compile: {
            files: {
                './public/js/*.js': './src/client/app/**/*.coffee'
            },
            options: {
                //basePath: 'app/scripts'
            }
        }
    },

    mochaTest: {
        all: ['test/**/*.*']
    },

    watch: {
        coffee: {
            files: './src/client/app/**/*.coffee',
            tasks: 'coffee'
        },
        mochaTest: {
            files: 'test/**/*.*',
            tasks: 'mochaTest'
        }
    }
});

grunt.loadNpmTasks('grunt-contrib-coffee');
grunt.loadNpmTasks('grunt-mocha-test');
//grunt.loadNpmTasks('grunt-exec');

grunt.registerTask( 'default', 'server coffee mochaTest watch' );
}; 
```

正如您在评论中看到的，我尝试了 grunt-exec，但 node 命令停止了其他任务的执行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T19:14:54.617

您可以设置 grunt 在启动节点应用程序时运行默认任务和监视任务：

在 app.js 中

```
var cp = require('child_process');
var grunt = cp.spawn('grunt', ['--force', 'default', 'watch'])

grunt.stdout.on('data', function(data) {
    // relay output to console
    console.log("%s", data)
}); 
```

然后`node app`正常运行！

[信用](http://cobbweb.me/blog/2012/06/07/using-grunt-dot-js-to-build-your-frontend-in-a-node-dot-js-slash-express-dot-js-app/)

# java - 对值的弱引用的弱哈希图？

> ID：13889051
> 
> 赞同：9
> 
> 时间：2012-12-15T03:36:13.753
> 
> 标签：java, android, weak-references

我正在构建一个 android 应用程序，其中每个实体都有一个表示其精灵的位图。但是，每个实体都可以复制（例如，实体 asdf 可能有 3 个副本）。

一种方法是预先加载所有精灵，然后将正确的精灵放入实体的构造函数中。

但是，我想延迟解码位图，以便实体的构造函数解码位图。唯一的问题是重复的实体将加载相同的位图两次，使用 2 倍的内存（或者如果实体被创建 n 次，则为 n 次）。

为了解决这个问题，我构建了一个 SingularBitmapFactory，它将解码的位图存储到哈希中，如果再次请求相同的位图，将简单地返回先前的哈希位图，而不是构建一个新的位图。但是，问题在于工厂拥有所有位图的副本，因此永远不会被垃圾收集。

将哈希图切换为具有弱引用值的最佳方法是什么？换句话说，我想要一个结构，如果任何其他对象持有对它的引用，则值不会被 GC，但只要没有其他对象引用它，那么它就可以被 GC。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-15T04:58:45.397

你说的差不多 - 使位图（地图的对象侧）成为弱引用而不是位图。然后，您必须添加额外的检查以查看引用是否仍然有效，然后再将其传递回您的实体。以下是总体思路的速写。

```
public class SingularBitmapFactory { 
    private HashMap <String, WeakReference<Bitmap>> cache = new HashMap<String, WeakReference<Bitmap>>();

    public Bitmap getBitmap(String key) {
        Bitmap image = null;
        WeakReference<Bitmap> ref = cache.get(key);
        if(ref != null) {
            image = ref.get();
        }
        if(image == null) {
            // Load image here ... 
            cache.put(key, new WeakReference<Bitmap>(image));
        }
        return image;   
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-02T23:48:34.393

老问题，但我今天需要这个，根据@iagreen的回答我已经概括了这个想法，也许它对某人有用......

```
public static class WeakValueHashMap<K,V> {
    private HashMap<K,WeakReference<V>> mDatabase=new HashMap<K, WeakReference<V>>();
    public V get(K key) {
        WeakReference<V> weakRef=mDatabase.get(key);
        if (weakRef==null) return null;
        V result=weakRef.get();
        if (result==null) {
            // edge case where the key exists but the object has been garbage collected
            // we remove the key from the table, because tables are slower the more
            // keys they have (@kisp's comment)
            mDatabase.remove(key);
        }
        return result;
    }
    public void put(K key, V value) {
        mDatabase.put(key, new WeakReference<V>(value));
    }
} 
```

所以你可以做例如

```
 private WeakValueHashMap<String,Drawable> mTextDrawables=new WeakValueHashMap<String,Drawable>(); 
```

并且可绘制对象将与`Weakreferences`.

“containsValue”方法实现起来会比较棘手，你必须迭代和取消引用所有的 WeakRefs ...

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-15T05:00:12.230

最好的方法是使用 Wea​​kHashMap 类，它为您完成所有工作，并且不需要对您的代码进行任何更改。这里有一个非常好的教程：[http](http://weblogs.java.net/blog/2006/05/04/understanding-weak-references) : //weblogs.java.net/blog/2006/05/04/understanding-weak-references 它相当陈旧但仍然可以。WeakHashMap 存储对键的弱引用很重要。这意味着您不能只使用常量字符串值作为键，而是使用 Integer 之类的东西并将其作为弱引用存储在常量类中。

# css - 在相邻的浮动元素上显示框阴影

> ID：13889053
> 
> 赞同：3
> 
> 时间：2012-12-15T03:36:21.623
> 
> 标签：css

[http://jsfiddle.net/YQ6PU/](http://jsfiddle.net/YQ6PU/)

现在，`.link`的背景在`.main`的 box-shadow 上方。我如何使它在下面？

换句话说，任何东西都不`.left`应该在 box-shadow 的顶部。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T03:56:17.127

添加：

```
.link {
position: relative;
z-index: -10;
} 
```

到`.link`班级

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T04:05:36.853

[http://jsfiddle.net/YQ6PU/2/](http://jsfiddle.net/YQ6PU/2/)

```
body {
    background-color: #f8f8f8;
}

.left {
    float: left;
    width: 100px;
    height: 1000px;
}

.main {
    margin-left: 100px;
    height: 1000px;
    box-sizing: border-box;
    background-color: #fff;
    box-shadow: 0 2px 4px 2px rgba(0, 0, 0, .15);
}

.link {
    margin-top: 10px;
    display: block;
    background-color: #08C;
    position:relative;
z-index: -1;
} 
```

@Perfect Dark 说的对！

# c++ - 使用 stl 替换嵌套子字符串

> ID：13889055
> 
> 赞同：0
> 
> 时间：2012-12-15T03:36:26.807
> 
> 标签：c++, algorithm, stl

你将如何（如果可能的话有效地）转换一个字符串，如

```
"class sfw::Smthing<class sfw::type<double>,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >" 
```

到

```
"class sfw::Smthing<class sfw::type<...>,class std::basic_string<...> >" 
```

在 C++**中最多**使用 stl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:37:38.470

我不会为你做所有的工作，但我会给你基本的想法。

使用 for 循环扫描字符串。跟踪您所处的模板参数级别。您可以通过在找到 a 时计数，在找到 时倒数来做到这`'<'`一点`'>'`。

当您在第 2 级（即外部类型的模板参数的模板参数）或更深时，替换该字符。将其替换为句点，或者，如果您放置了 3 个或更多连续句点（需要另一个变量），则将其替换为您知道不会出现在字符集中其他任何位置的字符，例如`'@'`.

完成后，您的字符串将如下所示：

```
"class sfw::Smthing<class sfw::type<...@@@>,class std::basic_string<...@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@> >" 
```

然后你需要做的就是删除每个'@'：

```
str.erase(std::remove(str.begin(), str.end(), '@'), str.end()); 
```

# c# - 通过遍历列表访问每个对象的常用方法

> ID：13889059
> 
> 赞同：4
> 
> 时间：2012-12-15T03:37:23.720
> 
> 标签：c#, arrays, collections, interface, arraylist

我有多种类型的对象实例，它们继承自一个通用接口。我想通过遍历列表或数组列表或集合来访问每个对象的常用方法。我怎么做？

```
 {

    interface ICommon
    {
        string getName();
    }

    class Animal : ICommon
    {
        public string getName()
        {
            return myName;
        }
    }

    class Students : ICommon
    {
        public string getName()
        {
            return myName;
        }
    }

    class School : ICommon
    {
        public string getName()
        {
            return myName;
        }
    }

   } 
```

当我在对象 [] 中添加动物、学生和学校时，并尝试像这样循环访问

```
for (loop)
{
   object[n].getName // getName is not possible here. 
   //This is what I would like to have.
or 
   a = object[n];
   a.getName // this is also not working. 
} 
```

是否可以从列表或集合中访问不同类型的常用方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T03:51:35.330

您需要将对象投射到`ICommon`

```
var a = (ICommon)object[n];
a.getName(); 
```

或者最好你应该使用一个数组`ICommon`

```
ICommon[] commonArray = new ICommon[5];
...
commonArray[0] = new Animal();
...
commonArray[0].getName(); 
```

或者您可能要考虑使用`List<ICommon>`

```
List<ICommon> commonList = new List<ICommon>();
...
commonList.Add(new Animal());
...
commonList[0].getName(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T03:41:47.323

只需使用“ICommon”数组而不是“Object”数组，否则当您检索“Object”数组的项目时，您将不得不强制转换它们。

# c# - 将千位分隔符添加到双精度值（控制小数，删除零小数）

> ID：13889063
> 
> 赞同：1
> 
> 时间：2012-12-15T03:38:18.083
> 
> 标签：c#, asp.net, .net-4.0, double, string.format

> **可能重复：**
> [.NET String.Format() 为数字添加千位逗号](https://stackoverflow.com/questions/105770/net-string-format-to-add-commas-in-thousands-place-for-a-number)

我有一个双精度值，我想添加千位分隔符，条件如下：
1- 在 dor(.) 后删除零小数
2- 控制小数位数

例如 ：

```
string str_Money = Convert.ToDouble(Money).ToString("N3"); 
```

Money = 50000 的此代码返回 50,000.000，但我不想要零小数（意味着我想要 50,000）
另一个示例：对于 Money = 50000.2355 返回 50,000.235，这正是我想要的，我
该如何重新格式化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:04:58.863

使用[.NET String.Format() 接受的答案在千位中添加逗号作为数字](https://stackoverflow.com/questions/105770/net-string-format-to-add-commas-in-thousands-place-for-a-number)，使用 if 语句控制返回的格式。

```
string str_Money = "";
if (money % != 0) // test for decimals
{
    str_Money = string.Format("{0:n0}", money); // no decimals.
}
else
{
    str_Money = string.Format("{0:n}", money);
} 
```

# c++ - 随机密码生成器上的 OpenMP 多线程

> ID：13889065
> 
> 赞同：0
> 
> 时间：2012-12-15T03:39:01.030
> 
> 标签：c++, string, visual-studio-2010, random, openmp

我正在尝试使用集成到 Visual Studio 2010 中的 OpenMP 的多线程来制作快速密码生成器。

假设我有一个基本的字符串生成器，它可以从字符串中随机提取字符。

```
srand(time(0)); 
for (i = 0; i < length; ++i)
{
    s=pwArr[rand()%(pwArr.size()-1)];
    pw+=s;
}

return pw; 
```

现在，基本思想是使用 OpenMP 启用多线程，以实现真正快速的随机字符查找，如下所示：

```
srand(time(0)); 
#pragma omp parallel for
for (i = 0; i < length; ++i)
{
    s=pwArr[rand()%(pwArr.size()-1)];
    pw+=s;
}

return pw; 
```

但是，这只会使每个线程同时执行自己单独的密码生成器实现，并且我最终会在我的字符串中得到重复。

一个示例输出是

```
ndxP1k1kP1k 
```

此外，对于较大的字符串，这会产生可怕的后果：Debug Assertation Failed 错误。

我只是在错误的工作中使用了错误的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T09:42:54.120

要回答您的问题，并将@CrazyCasta 的评论变成答案：

*是的，您在错误的工作中使用了错误的工具*

`rand`不能像您希望的那样可并行化，并且由于生成任何合理长度的密码已经非常快，因此很难理解您为什么要打扰。

然而，并行伪随机数生成器的主题是一个有趣的话题，并且有很多关于它们的已发表工作，甚至在 SO 上也有一些问题和很好的答案。我建议你把注意力集中在更多的学习上，当你对它们有更多的了解后，再回到你的编程上。

# python - 运行外部命令并获取它消耗的 CPU 量

> ID：13889066
> 
> 赞同：7
> 
> 时间：2012-12-15T03:39:30.717
> 
> 标签：python

很简单，我想从 Python 脚本中运行一个外部命令/程序，一旦完成，我还想知道它消耗了多少 CPU 时间。

硬模式：并行运行多个命令不会导致 CPU 消耗结果不准确。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T13:11:38.203

**在 UNIX 上：** (a) 使用[资源](http://docs.python.org/2/library/resource.html)模块（另见 icktoofay 的回答），或 (b) 使用[time](http://linux.die.net/man/7/time)命令并解析结果，或 (c) 使用[/proc](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)文件系统，解析 /proc/[pid]/stat 和解析出`utime`和`stime`字段。最后一个是特定于 Linux 的。

使用示例`resource`：

```
import subprocess, resource
usage_start = resource.getrusage(resource.RUSAGE_CHILDREN)
subprocess.call(["yourcommand"])
usage_end = resource.getrusage(resource.RUSAGE_CHILDREN)
cpu_time = usage_end.ru_utime - usage_start.ru_utime 
```

注意：fork/execvp 不是必须的，`subprocess.call()`否则其他[子进程](http://docs.python.org/2/library/subprocess.html)方法在这里都可以，而且更容易使用。

注意：您可以使用 subprocess.Popen 或 subprocess.call 和线程同时从同一个 python 脚本运行多个命令，但是资源不会返回它们正确的单个 cpu 时间，它会返回它们在调用 getrusage 之间的时间总和; 要获得单独的时间，请为每个命令运行一个小 python 包装器以按上述方式计时（可以从您的主脚本启动那些），或使用`time`下面的方法，该方法*将*与多个同时命令正常工作（时间基本上就是这样一个包装器） .

使用示例`time`：

```
import subprocess, StringIO
time_output = StringIO.StringIO()
subprocess.call(["time", "yourcommand", "youroptions"], stdout=time_output)
# parse time_output 
```

**在 Windows 上：**您需要以某种方式使用性能计数器（又名“性能数据助手”）。这是底层 API 的[C 示例](http://en.literateprograms.org/CPU_usage_using_performance_counters_%28C,_Windows_2000%29)。要从 python 中获取它，您可以使用以下两个模块之一：[win32pdh](http://docs.activestate.com/activepython/2.7/pywin32/win32pdh.html)（pywin32 的一部分；[示例代码](http://www.cac.cornell.edu/wiki/index.php?title=Performance_Data_Helper_in_Python_with_win32pdh)）或[pyrfcon](http://code.google.com/p/pyrfcon/)（跨平台，也适用于 Unix；[示例代码](http://code.google.com/p/pyrfcon/source/browse/trunk/example.py)）。

这些方法中的任何一种实际上都满足上述“硬模式”要求：即使在繁忙的系统上运行不同进程的多个实例，它们也应该是准确的。在这种情况下，与在空闲系统上仅运行一个进程相比，它们可能不会产生完全相同的结果，因为进程切换确实有一些开销，但它们会非常接近，因为它们最终从 OS 调度程序获取数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T05:43:29.250

在可用的平台上，[该`resource`模块](http://docs.python.org/2/library/resource.html)可能会提供您需要的内容。如果您需要同时为多个命令计时，您可能希望（对于要运行的每个命令）[fork](http://docs.python.org/2/library/os.html#os.fork)，然后创建子进程，以便仅获取该进程的信息。这是您可以执行此操作的一种方法：

```
def start_running(command):
    time_read_pipe, time_write_pipe = os.pipe()
    want_read_pipe, want_write_pipe = os.pipe()
    runner_pid = os.fork()
    if runner_pid != 0:
        os.close(time_write_pipe)
        os.close(want_read_pipe)
        def finish_running():
            os.write(want_write_pipe, 'x')
            os.close(want_write_pipe)
            time = os.read(time_read_pipe, struct.calcsize('f'))
            os.close(time_read_pipe)
            time = struct.unpack('f', time)[0]
            return time
        return finish_running
    os.close(time_read_pipe)
    os.close(want_write_pipe)
    sub_pid = os.fork()
    if sub_pid == 0:
        os.close(time_write_pipe)
        os.close(want_read_pipe)
        os.execvp(command[0], command)
    os.wait()
    usage = resource.getrusage(resource.RUSAGE_CHILDREN)
    os.read(want_read_pipe, 1)
    os.write(time_write_pipe, struct.pack('f', usage.ru_utime))
    sys.exit(0) 
```

然后，您可以使用它来运行一些命令：

```
get_ls_time = start_running(['ls'])
get_work_time = start_running(['python', '-c', 'print (2 ** 512) ** 200']) 
```

执行该代码后，这两个命令应该并行运行。当您想等待它们完成并获取它们执行的时间时，请调用返回的函数`start_running`：

```
ls_time = get_ls_time()
work_time = get_work_time() 
```

现在`ls_time`将包含执行所用的时间`ls`，`work_time`并将包含执行所用的时间`python -c "print (2 ** 512) ** 200"`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T03:42:23.820

您可以在 Python 中进行计时，但如果您想知道程序的总体 CPU 消耗情况，这样做有点愚蠢。最好的办法是只使用 GNU`time`程序。它甚至成为大多数操作系统的标准配置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T05:23:08.497

python的[timeit](http://docs.python.org/2/library/timeit.html)模块对于基准测试/分析目的非常有用。除此之外，您甚至可以从命令行界面调用它。要对外部命令进行基准测试，您可以这样：

```
>>> import timeit
>>> timeit.timeit("call(['ls','-l'])",setup="from subprocess import call",number=1) #number defaults to 1 million
total 16
-rw-rw-r-- 1 nilanjan nilanjan 3675 Dec 17 08:23 icon.png
-rw-rw-r-- 1 nilanjan nilanjan  279 Dec 17 08:24 manifest.json
-rw-rw-r-- 1 nilanjan nilanjan  476 Dec 17 08:25 popup.html
-rw-rw-r-- 1 nilanjan nilanjan 1218 Dec 17 08:25 popup.js
0.02114391326904297 
```

最后一行是返回的执行时间。这里，第一个参数`timeit.timeit()`是调用外部方法的代码，`setup`参数指定要在时间测量开始之前运行的代码。`number`参数是您希望运行指定代码的次数，然后您可以将返回的时间除以`number`得到平均时间。

您还可以使用该`timeit.repeat()`方法，该方法采用类似的参数，`timeit.timeit()`但采用一个附加`repeat`参数来指定`timeit.timeit()`应调用的次数，并返回每次运行的执行时间列表。

**注意**：该`timeit.timeit()`方法返回的执行时间是挂钟时间，而不是 CPU 时间。因此，其他进程可能会干扰计时。因此，如果`timeit.repeat()`您应该取最小值，而不是尝试计算平均值或标准偏差。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-15T03:59:29.367

您可以使用 ipython 的[`%time`魔法功能](http://ipython.org/ipython-doc/dev/api/generated/IPython.core.magics.execution.html#IPython.core.magics.execution.ExecutionMagics.time)来做到这一点：

```
In [1]: time 2**128
CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s
Wall time: 0.00
Out[1]: 340282366920938463463374607431768211456L

In [2]: n = 1000000

In [3]: time sum(range(n))
CPU times: user 1.20 s, sys: 0.05 s, total: 1.25 s
Wall time: 1.37
Out[3]: 499999500000L 
```

# eclipse - 安装eclipse插件

> ID：13889069
> 
> 赞同：0
> 
> 时间：2012-12-15T03:39:53.813
> 
> 标签：eclipse, plugins, installation

我需要安装[测试和性能工具平台 (TPTP)](http://www.eclipse.org/tptp/home/downloads/?ver=4.7.2#requirements)所需的 eclipse 插件。

当我下载 EMF Runtime 时，我有两个目录：一个是功能，另一个是插件。

![在此处输入图像描述](../Images/9136d9e0bb9a0bc119c9d6b7990fbcfd.png)

那么，将它们安装到 eclipse 中的下一步是什么？

我的 Eclipse 安装目录包括功能/插件和 dropins。插件安装是否只是将文件复制到功能/插件目录并重新启动eclipse？还是我需要任何其他安装步骤？

![在此处输入图像描述](../Images/4643606a51cc07dadbf3e5f0265b35a6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T03:52:28.943

只需复制并重新启动eclipse。如果遇到 Eclipse 问题，请在命令行中使用 "`eclipse -clean"`

# javascript - jQuery找不到使用id的元素

> ID：13889070
> 
> 赞同：3
> 
> 时间：2012-12-15T03:40:07.633
> 
> 标签：javascript, jquery, html

我有一个简单的 HTML 表单，但由于某种原因 jQuery 无法找到我正在寻找的元素。

HTML：

```
 <form id="form">
                            <fieldset>
                    <table>
                        <tr class="row">
                            <td class="label">Street</td>
                            <td class="field"><input type="text" size="50" value="" id="s.street"></td>
</tr>
</table>
</fieldset>
        <fieldset>
                        <tr class="row">
                            <td class="label">Street</td>
                            <td class="field"><input type="text" size="50" value="" id="b.street"></td>
</tr>
</table>
</fieldset>
        </form> 
```

jQuery :

```
$(document).ready(
                function() {

                    $("input[id='s.street']").keyup(function() {
                    $('#b.street').val($(this).val());

                    });
}); 
```

我在控制台日志中没有错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T03:48:36.770

如果元素必须具有该确切 ID，请使用：

```
$('#b\\.street')​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T03:53:18.773

ID 应该是唯一的，因此您不必使用输入标签进行过滤。`.`此外，您需要在您的 ID 名称 之前添加一个转义序列。`$('#s\\.street')`是正确的选择器。我实际上建议不要使用`.`...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T03:42:49.007

您的 id 名称与 jquery 选择器语法冲突。

为元素定义 id 时，不要使用 # 。或您 ID 中的任何空格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T03:43:03.813

您的命名约定有问题。将名称中的替换`.`为连字符。

所以：

```
<input type="text" size="50" value="" id="s.street"> 
```

变成

```
<input type="text" size="50" value="" id="s-street"> 
```

然后你用 jquery 像这样选择：

```
$("#s-street"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T03:50:04.387

Sizzle（jQuery 实现的javascript选择`s.street`器库）会将. 与 id 的元素相反。`s``b``street``s.street`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-15T03:42:35.167

从这里开始：[HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)看起来 jquery 对带有句点和冒号的 id 有问题。所以尝试删除它们，看看它是否有效。

# mysql - SQL - 同一字段的不同“ORDER BY”值

> ID：13889075
> 
> 赞同：2
> 
> 时间：2012-12-15T03:41:06.627
> 
> 标签：mysql, sql

以下代码生成一个列表，其中未过期的行在顶部，然后是过期日期未知的行，最后是已经过期的行（所有行都按升序排列）。问题是我希望已过期行的最后一个块按降序排列，因此它会在该块顶部显示最近过期的行，而不会改变其他顶部块的顺序。

基本上，我试图找到一种方法在同一个记录集中合并两个“ORDER BY”子句......

有任何想法吗？谢谢

```
SELECT *
  FROM prueba 
 WHERE UPPER(CONCAT(Company,Deal,keywords,Type,Expiry,Name)) LIKE UPPER(%s) 
ORDER BY (CASE 
            WHEN prueba.Expiry = 'UNKNOWN' THEN 1 
            WHEN prueba.Expiry < CURRENT_DATE THEN 2 
          END)
       , prueba.Expiry ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:13:21.657

试试这个

[演示小提琴](http://sqlfiddle.com/#!2/618f3/22)

```
SELECT * FROM t
order by case 
      when expiry = 'Unknown' Then 1 
      WHEN expiry >= CURRENT_DATE THEN 0 
      ELSE 2 END,
CASE WHEN expiry >= CURRENT_DATE THEN expiry END,
CASE WHEN expiry < CURRENT_DATE THEN expiry END desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T03:55:12.033

将那些已经过期的记录分开到另一个`SELECT`子句中，然后`UNION ALL`：

```
(SELECT *
FROM prueba
WHERE UPPER(CONCAT(Company,Deal,keywords,Type,Expiry,Name)) LIKE UPPER(%s)
AND prueba.Expiry > CURRENT_DATE
ORDER BY prueba.Expiry DESC)
UNION ALL
(SELECT *
FROM prueba
WHERE UPPER(CONCAT(Company,Deal,keywords,Type,Expiry,Name)) LIKE UPPER(%s)
AND prueba.Expiry = 'UNKNOWN')
UNION ALL
(SELECT *
FROM prueba
WHERE UPPER(CONCAT(Company,Deal,keywords,Type,Expiry,Name)) LIKE UPPER(%s)
AND prueba.Expiry < CURRENT_DATE
ORDER BY prueba.Expiry DESC) 
```

# intellij-idea - WebStorm：如何在 WebStorm 的同一窗口中导入多个项目

> ID：13889085
> 
> 赞同：24
> 
> 时间：2012-12-15T03:42:13.920
> 
> 标签：intellij-idea, webstorm

需要帮助来弄清楚如何在 WebStorm 的同一窗口中导入多个项目，在 IntelliJ 中，我们可以使用模块来做到这一点，但我在 WebStorm 中看不到该功能。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-15T11:01:31.040

WebStorm[不支持](http://youtrack.jetbrains.com/issue/WI-15187)在同一个框架中打开多个项目，但是您可以将多个**内容根**添加到同一个项目：

![添加内容根](../Images/6d4dccfb8563a94bd9a8938026c297e7.png)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2019-07-25T09:28:26.720

从 Webstorm 2019.2 - 您可以在同一个 Webstorm 实例中打开多个项目。

文件 --> 打开 --> 转到项目目录 --> 打开：
在“打开项目”对话框中，选择“附加”。

[![在此处输入图像描述](../Images/d91600d91a81aca0b7594a10dd453a4e.png)](https://i.stack.imgur.com/gNm4t.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-20T06:05:20.370

Webstorm 现在支持在一个窗口中打开两个项目。

您所要做的就是打开第一个项目

文件 --> 打开 --> 选择第二个项目文件夹并单击打开 --> 然后从下一个对话框中单击**附加**

**这在 Ubuntu 中工作**

# javascript - node.js - 登录不会更新以显示用户名

> ID：13889093
> 
> 赞同：0
> 
> 时间：2012-12-15T03:43:01.720
> 
> 标签：javascript, html, node.js, login, pug

我有一个用于构建登录系统的 Node.js 应用程序。我的登录系统正常工作，但我必须手动刷新页面才能显示“用户名登录”。它成功隐藏了您需要填写才能登录的登录/注册字段。

这是我的 app.js 代码：

```
/**
  * Application Configuration
  */
app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.enable('jsonp callback');
  app.set('view engine', 'jade');
  app.set('view options', {layout : false});
  app.use(express.bodyParser());
  app.use(express.cookieParser());
  app.use(express.session({
    secret : 'sessionsecret'      
  }));
  app.use(express.methodOverride());
  app.use(express.static(__dirname + '/public'));
  app.use(function(req, res, next){
    res.locals.session = req.session;
    next();
  });
  app.use(app.router);
}); 
```

这是`login.js`我隐藏登录表单的部分。

```
 if(username && password){
      $.post('/login', $(this).serialize(), function(response){
        if(response.retStatus === 'success'){
          $('#loginForm').hide();
          $('#signup-btn').hide();
          //$(location).attr('href', '/admin');
        }else if(response.retStatus === 'failure'){
          $('#signup-error-modal').modal('show');
        }
      });
    }
  }); 
```

最后这是应该自动显示用户名的视图的 JADE/HTML 代码

```
if(session.user)
        div#logoutsection.pull-right
          a#logout-btn.btn.btn-info.pull-right.top-bar-form-button(href='/logout') Logout
          p#loginprompt.pull-right.login-prompt #{session.user.username} 
            small logged In
      else
        a#signup-btn.btn.pull-right.top-bar-form-button(href='#signup-modal', data-toggle="modal") Sign Up
        form.pull-right.form-horizontal.top-bar-form(method="post", id="loginForm")
          input.input-small.top-bar-form-textbox(id="username", type="text", name="User", placeholder="Username")
          input.input-small.top-bar-form-textbox(id="password", type="password", name="Password", placeholder="Password")
          button.btn.btn-primary.top-bar-form-button(type="submit", value="Sign In") Sign In 
```

如果您想查看更多代码，请告诉我，我想我这里都有。但我真的不明白为什么我必须手动刷新它才能显示用户名。欢迎任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T03:54:50.250

问题是，尽管如果会话在jade/html 文件上有用户，则显示用户名。它不会随 Ajax 响应自动更新。相反，您需要做的是更新 ajax 成功函数中的 html。

这是在您的 login.js 文件中，类似于以下内容：

```
if(username && password){
      $.post('/login', $(this).serialize(), function(response){
        if(response.retStatus === 'success'){
          $('#loginForm').hide();
          $('#signup-btn').hide();
          // Add the name of the user to the html here!
          // Edit: If you don't want to send the username from node.js
          $("p#loginprompt").html(username);
        }else if(response.retStatus === 'failure'){
          $('#signup-error-modal').modal('show');
        }
      });
    } 
```

请注意，段落元素在附加到它之前应该存在于 DOM 上。并且用户名应该由服务器在响应中发送并进行清理以避免跨站点脚本攻击。

其他非用户友好的方法是以编程方式刷新页面。但请不要这样做。

# mysql - Codeigniter db 就像不在数组中工作一样

> ID：13889103
> 
> 赞同：0
> 
> 时间：2012-12-15T03:44:24.073
> 
> 标签：mysql, codeigniter, sql-like

我想在我的数据库中添加更多列进行搜索，这是我的原始脚本。

```
public function getProductsByName($name, $limit, $start) {
    $this->db->limit($limit, $start);
    $this->db->order_by("id", "desc"); 
    $this->db->like("name", $name); 
    $query = $this->db->get('products');

    if ($query->num_rows() > 0) {
        foreach ($query->result() as $row) {
            $data[] = $row;
        }
        return $data;
    }

    return false;
} 
```

这是我修改后的脚本，可以在 3 列中找到。

```
public function getProductsByName($name, $limit, $start) {
   $this->db->limit($limit, $start);
   $this->db->order_by("id", "desc"); 
   $array = array('name' => $name, 'code' => $code, 'ean' => $ean);
   $this->db->like($array); 
   $query = $this->db->get('products');

   if ($query->num_rows() > 0) {
        foreach ($query->result() as $row) {
            $data[] = $row;
        }

        return $data;
   }

   return false;
} 
```

这里有什么问题？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:24:52.330

为了像你说的那样选择数据，你需要准确地告诉你使用的变量`$code and $ean`。另一件事是`data[]`你被创建了，没有必要像这样创建一个数组。当你打电话时你会得到同样的结果`$query->result();`

```
public function getProductsByName($name, $limit, $start,$code,$ean) {
    $this->db->limit($limit, $start);
    $this->db->order_by("id", "desc"); 
    $array = array('name' => $name, 'code' => $code, 'ean' => $ean);
    $this->db->like($array); 
    $query = $this->db->get('products');

    if ($query->num_rows() > 0) {
        return $query->result();
    }

    return false;
} 
```

希望对你有帮助

# graphics - 滑块不会改变 VPython 中的值

> ID：13889106
> 
> 赞同：0
> 
> 时间：2012-12-15T03:45:23.777
> 
> 标签：graphics, controls, vpython

我的滑块不会改变我给它的参数值。滑块移动，但值不变。这里重要的是“温度”，我需要随滑块 2 变化。

此外，winsound 不会播放任何内容，并且我的滑块没有标记。这到底是怎么回事？

```
import winsound
import pygame
import time
from visual.controls import *
from visual.graph import *
from math import *

temperature = 50
funct1 = gcurve(color=(temperature*0.04, (temperature*0.04)-2, (temperature*0.04)-2))

for x in arange (0., 100.1, 0.1):
    funct1.plot(pos=(x,5.*cos(2.*x)))
def setdir(direction): 
    cube.dir = direction

def setrate(obj): # called on slider drag events
    cuberate(obj.value) # value is min-max slider position

def cuberate(value):
    cube.dtheta = 2*value*pi/1e3

def woosh(sound):
    winsound.playsound('%s.wav' % sound, winsound.sphere.wav)

x=0
y=0
z=0
w = 350

display(x=w, y=0, width=w, height=w, range=1.5, forward=-vector(0,0,1), newzoom=1)

c = controls(x=0, y=0, width=w, height=w, range=60)

ctrl = slider(pos=(-50,20), width=7, length=100, axis=(1,0,0), text='Temperature', min=0., max=100., value=temperature)
s1 = slider(pos=(-50,40), width=7, length=100, axis=(1,0,0), text='Angular Velocity', action=lambda: setrate(s1))

cube = sphere(color=(temperature*0.04, (temperature*0.04)-2, (temperature*0.04)-2), material=materials.rough, pos=(x,y,z))
sphere.velocity = vector(x,y,z)

setrate(s1) 
setdir(-1) 

side = .4
thk = 0.3

t=0
dt=0.1
while True:
    rate(100)
    cube.p = vector (sin(t*0.02*temperature),sin(t*0.03*temperature),sin(t*0.04*temperature))
    cube.rotate(axis=(0,1,0), angle=cube.dir*cube.dtheta)
    t = t + dt
    cube.pos = cube.p*sin(t*temperature/100)/5
    woosh    
    if not (side > cube.x > -side):
        cube.p.x = -cube.p.x
    if not (side > cube.y > -side):
        cube.p.y = -cube.p.y
    if not (side > cube.z > -side):
        cube.p.z = -cube.p.z 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T12:44:51.623

我认为这是对单词 value 中字母“s”的疏忽。替换`value`为`values`行内ctrl：

```
ctrl = slider(pos=(-50,20), width=7, length=100, axis=(1,0,0), text='temperature', min=0, max=50, values = temperature) 
```

# iphone - UIGesture 识别器，区分单击和双击。

> ID：13889108
> 
> 赞同：3
> 
> 时间：2012-12-15T03:45:32.980
> 
> 标签：iphone, ios, uigesturerecognizer, xcode4.5

我正在使用下面的代码将两个手势识别器添加到视图中。我想要的是：如果用户一旦发生一件事就点击。如果他们点击两次，就会发生另一件事。

事实上，无论用户点击一次还是两次，都会发生单击动作。换句话说，当我双击时，我得到了两个动作，而不是我喜欢的一个

区分

```
//gesture recognizer.
UITapGestureRecognizer *tapRecognizerShowHideMenu = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(doOneThing)];
[tapRecognizerShowHideMenu setDelegate:self];
[tapRecognizerShowHideMenu setNumberOfTapsRequired:1];
[self.view addGestureRecognizer:tapRecognizerShowHideMenu];

UITapGestureRecognizer *tapRecognizerEditEffect = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(doAnotherThing)];
[tapRecognizerEditEffect setDelegate:self];
[tapRecognizerEditEffect setNumberOfTapsRequired:2];
[self.view addGestureRecognizer:tapRecognizerEditEffect]; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-15T03:50:29.193

将此添加到您的代码中：

```
[tapRecognizerShowHideMenu requireGestureRecognizerToFail:tapRecognizerEditEffect]; 
```

当您为手势识别器设置 requireGestureRecognizerToFail: 时，您是说它应该只在其他手势识别器没有识别的情况下识别手势。所以在这里，你告诉单击只有在双击不被识别时才被识别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T04:28:19.393

我认为以下链接可能对您有所帮助，您可以通过覆盖触摸事件处理程序或使用手势识别器来实现。

[http://www.cimgf.com/2010/06/14/differentiating-tap-counts-on-ios/](http://www.cimgf.com/2010/06/14/differentiating-tap-counts-on-ios/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T04:46:51.517

这似乎工作得很好，从安东在上面的评论中给出的链接修改。

[目前如何识别 oneTap/doubleTap？](https://stackoverflow.com/questions/8051627/how-to-recognize-onetap-doubletap-at-moment)

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    if (touch.tapCount == 1) {

        [self performSelector:@selector(showHideMenu) withObject:nil afterDelay:0.15];

    } else if (touch.tapCount == 2) {

        [self performSelector:@selector(editEffect) withObject:nil afterDelay:0];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T03:50:56.197

也许使用长按手势识别器而不是双击手势识别器会更有用。然后你就不会有这样的冲突

# java - 如何在 Jasper PDF 报告中呈现 Bangla SolaimanLipi 字体

> ID：13889113
> 
> 赞同：3
> 
> 时间：2012-12-15T03:46:47.877
> 
> 标签：java, jakarta-ee, jasper-reports, jasperserver, dynamic-jasper

我们正在使用 Jasper 报告 4.x。在 jasperreports-fonts-4.5.0 上嵌入字体后，它可以在 Jasper Viewer 中使用 Unicode 字符集（如阿拉伯语、孟加拉语和 SolaimanLipi）正常工作。但是当我尝试pdf报告时。阿拉伯语和英语字体渲染得很好，但孟加拉字体没有完全渲染希望。

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="BANGLA" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="2f940500-af46-4cbf-97d6-710e159ff606">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <queryString>
        <![CDATA[SELECT
     t01i001.`F_ID` AS ID,
     t01i001.`F_REVISION` AS REVISION,
     t01i001.`F_REGISTER_DATE` AS REGISTER_DATE,
     t01i001.`F_REGISTER_USER` AS REGISTER_USER,
     t01i001.`F_REVISION_DATE` AS REVISION_DATE,
     t01i001.`F_REVISION_USER` AS REVISION_USER,
     t01i001.`F_NAME_BN` AS NAME_BN,
     t01i001.`F_NAME_EN` AS NAME_EN
FROM
     `t01i001` t01i001]]>
    </queryString>
    <field name="ID" class="java.lang.Long"/>
    <field name="REVISION" class="java.lang.Long"/>
    <field name="REGISTER_DATE" class="java.sql.Timestamp"/>
    <field name="REGISTER_USER" class="java.lang.Integer"/>
    <field name="REVISION_DATE" class="java.sql.Timestamp"/>
    <field name="REVISION_USER" class="java.lang.Integer"/>
    <field name="NAME_BN" class="java.lang.String"/>
    <field name="NAME_EN" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="20" splitType="Stretch">
            <staticText>
                <reportElement uuid="9e2ca429-638e-4bf0-a2f9-a40c5edbecf7" x="0" y="0" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[ID]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="e502c14f-a347-4fe5-bd15-fbf85d7ebeee" x="100" y="0" width="214" height="20"/>
                <textElement/>
                <text><![CDATA[NAME_EN]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="156fd960-8182-437f-8a9b-90a89467b1bc" x="314" y="0" width="241" height="20"/>
                <textElement/>
                <text><![CDATA[NAME_BN]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement uuid="1f6fc0f9-33da-4c1c-b97f-4d9e1c975958" x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{ID}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="1986cb1d-ca64-4edc-b74b-c6a49f2549cc" x="100" y="0" width="214" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{NAME_EN}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="4d439fed-f786-44cb-bf31-128a9e8ee3a2" x="314" y="0" width="241" height="20"/>
                <textElement>
                    <font fontName="SolaimanLipi" isPdfEmbedded="true"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{NAME_BN}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

这里我使用了 jasperreports_extension.properties

```
net.sf.jasperreports.extension.registry.factory.simple.font.families=net.sf.jasperreports.engine.fonts.SimpleFontExtensionsRegistryFactory
net.sf.jasperreports.extension.simple.font.families.dejavu=net/sf/jasperreports/fonts/fonts.xml 
```

在 fonts.xml 中做了以下条目

```
<fontFamily name="SolaimanLipi">
       <normal>net/sf/jasperreports/fonts/rdp/SOLAIMANLIPI.ttf</normal>
       <bold>net/sf/jasperreports/fonts/rdp/SOLAIMANLIPI.ttf</bold>
       <italic>net/sf/jasperreports/fonts/rdp/SOLAIMANLIPI.ttf</italic>
       <boldItalic>net/sf/jasperreports/fonts/rdp/SOLAIMANLIPI.ttf</boldItalic>
       <pdfEncoding>Identity-H</pdfEncoding>
       <pdfEmbedded>true</pdfEmbedded>
</fontFamily> 
```

然后我用自己的字体集重建jar文件

例如，它呈现如下：

1.  গ োপালগঞ্ জ 而不是 গোপালগঞ্জ</li>
2.  মুন্ সীগঞ্ জ 而不是 মুন্সীগঞ্জ
3.  ময়মনস িংহ 而不是 ময়মনসিংহ

我只是做了一个虚拟的实现如上。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-06-25T04:12:50.833

我有办法解决这个问题，首先需要使用 Bijoy 编码，然后使用任何 Bijoy unicode 字体（DestinyMJ）。

গোপালগঞ্জ bijoy 编码 - > †MvcvjMÄ

{NAME_BN} = '†MvcvjMÄ';

它将正确打印গোপালগঞ্জ。

# c# - Microsoft.Data.OData.ODataContentTypeException：找不到与响应的内容类型匹配的受支持 MIME 类型

> ID：13889114
> 
> 赞同：3
> 
> 时间：2012-12-15T03:47:28.023
> 
> 标签：c#, .net, sharepoint, rest, odata

我收到以下异常

```
Microsoft.Data.OData.ODataContentTypeException: 
A supported MIME type could not be found that matches the content 
type of the response. None of the supported type(s) 
'application/atom+xml;type=entry, application/atom+xml, application/json;odata=verbose' 
matches the content type 'application/json'.
     at Microsoft.Data.OData.MediaTypeUtils.GetFormatFromContentType.... 
```

使用代码

```
var someJason = "{'__metadata':{'type':'SP.Data.TestObjectItem'}, " + jsonProperties + "}";
var content = new ByteArrayContent(Encoding.UTF8.GetBytes(someJason));
content.Headers.Add("X-RequestDigest", formDigest);

var httpRequestMessage = new HttpRequestMessage(HttpMethod.Post, queryUrl);
httpRequestMessage.Content = content;
httpRequestMessage.Headers.Add(HttpRequestHeader.Accept.ToString(),
                               "application/json;odata=verbose");
httpRequestMessage.Headers.Add(HttpRequestHeader.ContentType.ToString(),
                               "application/json;odata=verbose");
var result = await client.SendAsync(httpRequestMessage); 
```

`result`变量总是返回 400 'Bad Request'。我找不到任何会强制此代码使用允许的内容类型的标头值。在某些情况下，当我在 Accept 标头中设置一些完全垃圾时，我会得到 406 'Not Acceptable'，它完全符合 [http://www.odata.org/documentation/operations](http://www.odata.org/documentation/operations)文档。

根据这个 odata 文档，我试图将查询字符串也设置为`$format=JSON`and `$format=atom`，但我从来没有注意到这个参数有任何区别（似乎它被忽略了）。

所以我的问题是 - 我错过了什么？

代码用于调用 SharePoint 2013 OData 服务 (_api/web/lists/) 的 WinRT 应用程序，但我认为（并希望）问题不是那么具体。

# powershell - .contains 字符串函数的 Powershell 问题

> ID：13889115
> 
> 赞同：0
> 
> 时间：2012-12-15T03:47:35.307
> 
> 标签：powershell, powershell-2.0, powershell-1.0

好的，我正在尝试让这个脚本工作，而不是不断地反复访问同一台计算机，并且无法让它工作。我认为这不是最好的方法，如果您有任何建议，请感谢您。无论如何，第 6 行 "IF (!$Succssful.Contains($Computer)) {" 似乎存在问题，它不会对我产生错误，而是会在每个成熟时结束脚本。我试过删除“！” 但没有我预期的运气。

```
$Computers = "TrinityTechCorp"
$HotFixes = Get-Content HotFixes.csv

While ($Successful -AND $Successful.count -ne $Computers.count) {
    ForEach ($Computer in $Computers) {
        IF (!$Succssful.Contains($Computer)) {
            If (Test-Connection $Computer) {
                $Comparison = get-hotfix -ComputerName $Computer | Select -expand HotFixID
                ForEach ($HotFix in $HotFixes) {
                IF ($Comparison -NotLike "*$HotFix*") {
                    Write-Host "$Computer missing $HotFix"
                }
                $Successful += $Computer
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:30:57.213

这条线

```
While ($Successful -AND $Successful.count -ne $Computers.count) { 
```

永远不能评估为 $true。不存在的变量 ($Successful)的`.count`-property 是 $null，字符串也是如此（因为您只指定了 1 台计算机，它不是数组）。

要强制 Powershell 返回“真实”数量的项目，请使用`@($Successful).count`and `@($Computers).count`代替。这会给你 1，即使 $Computers 没有被定义为一个数组。因此，替换变量后，您的行被解释为

```
While ($null -AND $null.count -ne $null) { 
```

在 Powershell 3 中，如您[在此处](http://blogs.microsoft.co.il/blogs/scriptfanatic/archive/2012/03/19/Counting-objects-in-PowerShell-3.0.aspx "在 Powershell 3 中计数")阅读的，情况不再如此。

# c++ - 将对象作为参数传递时遇到问题

> ID：13889120
> 
> 赞同：2
> 
> 时间：2012-12-15T03:48:12.837
> 
> 标签：c++, class, object, parameter-passing

嘿，我正在尝试将我制作的类对象传递给另一个类来读取该数据。我得到的错误是 c2061: syntax error: identifier 'Player'

这是我的 Player2.h

```
#pragma once
#include "DarkGDK.h"
#include "Input.h"
#include "Player.h"

class Player2{
public:
    Player2();
    void PlayerSetup();
    void PlayerUpdate(Player& user1);
    void PlayerHealthReset();
    void Gravity();
    float GetPosX();
    bool CheckMatchEnd();
    void PlayerFire(Player& user1);
    void PlayerCheckHitEnemies(Player& user1);
private:
    float Vx;
    float Vy;
    float PosX;
    float PosY;
    float Speed;
    int Lives;
    int Health;
    //  
    int gravity;
    bool playerJumping;
    bool matchEnd;
    bool playerIsFiring;
    float playerBullet;
    bool directionBullet;
}; 
```

我得到的错误是即使我引入了 Player 标头，它也无法识别 Player。

这是 Player.h

```
class Player{
public:
    Player();
    void PlayerSetup();
    void PlayerUpdate(float PosX2);
    void PlayerHealthReset();
    float GetPosX();
    float GetPosY();
    void Gravity();
    bool CheckMatchEnd();
    void PlayerFire(float PosX2);
private:
    float Vx;
    float Vy;
    float PosX;
    float PosY;
    float Speed;
    int Lives;
    int Health;
    float playerBullet;
    bool playerIsFiring;
    int gravity;
    bool playerJumping;
    bool matchEnd;
    bool directionBullet;
}; 
```

头文件中的所有相应代码都可以 100% 工作，因为我已经对其进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:08:35.430

player 在 player2 定义之前不会编译，因此放在`class player`player2 的声明上方将在移动到 player 2 之前编译 player。

```
class player;
class player2{
//...
}; 
```

-正如*Hunter McMillen*建议的那样，考虑让玩家 2 从基类继承，也许`player`这定义了所有玩家都会使用的标准方法（我不想窃取猎人的想法，如果他愿意，我会让他发布关于这个的答案更多深入方法）。

# ruby-on-rails - 如何使某些属性只能由具有特定角色的用户访问？

> ID：13889123
> 
> 赞同：7
> 
> 时间：2012-12-15T03:48:47.830
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的`User`模型中，我有这个：

```
attr_accessible :role_ids, :as => :admin 
```

但这似乎不起作用。

我希望只有在以下情况下才能访问此特定属性`current_user.can?(:edit, Role)`- 即只有具有角色`admin`或`superadmin`应该能够访问这些属性的用户。

我该怎么做呢？

编辑 1：我正在使用 Devise、CanCan 和 Rolify。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T11:45:16.223

就像我说的，我们认为将属性限制到某些角色的最好方法是使用 DHH 最近引入的[强参数](https://github.com/rails/strong_parameters)gem。谢天谢地，这也将成为 Rails4 的一部分。

即使它不适合，开始整合这些原则也是一个好主意，因为这将使您的 Rails 3 到 4 升级更容易。

如果你有 Railscasts Pro 会员资格，Ryan Bates 已经制作了另一个[很棒的教程](http://railscasts.com/episodes/371-strong-parameters?view=asciicast)。

简而言之，这就是 Railscast 中推荐的内容。

安装 gem 后，从模型中删除 attr_accessible。

**将此添加到初始化程序：**

```
ActiveRecord::Base.send(:include,  ActiveModel::ForbiddenAttributesProtection) 
```

**更改控制器中的更新操作::**

```
def update
  @topic = Topic.find(params[:id])
  if @topic.update_attributes(topic_params)
    redirect_to topics_url, notice: "Updated topic."
  else
    render :edit
  end
end 
```

**在您的控制器中创建一个私有方法：**

```
 def topic_params
   if current_user && current_user.admin?
     params[:topic].permit(:name, :sticky)
    else
      params[:topic].permit(:name)
    end
  end 
```

在您的情况下，就像我们一样，您必须更改 topic_params 方法才能使用您的角色。

RailsCast 中还有一些建议，真的值 9 美元！（我与该网站无关，它只是被证明对我们来说是无价的）

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:03:02.380

在我的用户模型中

```
class User
  attr_accessible :nickname, as: :admin
end 
```

在我的 Rails 控制台中

```
User.first.update_attributes!({nickname: "uschi"})
# WARNING: Can't mass-assign protected attributes: nickname

User.first.update_attributes!({nickname: "uschi"}, {as: :admin})
# true 
```

更新

也许我很愚蠢地解决了你的问题，但只是做一个

```
if current_user.can?(:edit, Role)
  user.update_attributes!({nickname: "uschi"}, {as: :admin})
else
  first.update_attributes!({nickname: "uschi"})
end 
```

并且可能有更聪明的方法来做到这一点......

# google-maps - 从一个代码块生成两个谷歌地图

> ID：13889127
> 
> 赞同：1
> 
> 时间：2012-12-15T03:49:44.153
> 
> 标签：google-maps, google-maps-api-3

我已经在这个网站上看到了关于这个主题的讨论，并且我尽可能地遵循了建议的代码，但没有运气。谁能告诉我以下代码是否有可能被修复，或者它是否违反了谷歌的基本法律？它试图做的是对同一页面上的两个地图使用一组矩形，使用相同的地理位置代码来定位代表用户位置的标记。我提供了 2 组选项，因为两张地图的缩放、中心和功能不同（显示每个地图的 div 的大小也是如此）。第一张地图被放大到街道水平，用户的位置在中心；第二个是居中的宽视图，以便显示矩形图层的完整范围以及用户在地图上的任何位置。这比我见过的例子要复杂一些，所以也许它不能工作，我只需要有两个完全独立的代码块。虽然不得不重复完整的矩形数组代码，但这将是一种耻辱......

感谢您的任何建议。

```
<script src="http://maps.google.com/maps/api/js?sensor=false">
</script><script type="text/javascript">
if (navigator.geolocation) {navigator.geolocation.getCurrentPosition(function(position){
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;
    var coords = new google.maps.LatLng(latitude, longitude);
    var map,map2;
    var mapOptions1 = {
        zoom: 16,
        center: coords,
        draggable: false, 
        zoomControl: false, 
        scrollwheel: false, 
        disableDoubleClickZoom: true,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
    var mapOptions2 = {
        zoom: 5,
        center: new google.maps.LatLng(0, 0),
        mapTypeControl: true,
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("mapContainer1"), mapOptions1);
        map2 = new google.maps.Map(document.getElementById("mapContainer2"), mapOptions2);
 var marker = new google.maps.Marker({
                position: coords,
                map: map,map2

                           });
 marker.setIcon('sites/default/files/YourLocation_0.png')
 var rectangles = [];

rectangles[0]=new google.maps.Rectangle({
bounds:new google.maps.LatLngBounds(new google.maps.LatLng(a,b),new google.maps.LatLng(x, y)),
map:map,map2,
fillOpacity: 0,
strokeOpacity: 0,
url: 'http://example.com',
clickable: true
});
rectangles[1]=new google.maps.Rectangle({
bounds:new google.maps.LatLngBounds(new google.maps.LatLng(aa, bb),new google.maps.LatLng(xx, yy)),
map:map,map2,
fillOpacity: 0,
strokeOpacity: 0,
url: 'http://example2.com',
clickable: true
});
rectangles[2]=new google.maps.Rectangle({
bounds:new google.maps.LatLngBounds(new google.maps.LatLng(aaa, bbb),new google.maps.LatLng(xxx, yyy)),
map:map,map2,
fillOpacity: 0,
strokeOpacity: 0,
url: 'http://example3.com',
clickable: true
}); 
```

[.....更多的矩形......]

```
for ( i = 0; i < rectangles.length; i++ ){google.maps.event.addListener(rectangles[i], 'click', function() {window.location.href = this.url;
});
}

layer.setMap(map);
layer.setMap(map2);
    });
}else {
    alert("Geolocation API is not supported in your browser.");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:25:37.670

这将不起作用：

```
rectangles[0]=new google.maps.Rectangle({
  bounds:new google.maps.LatLngBounds(new google.maps.LatLng(a,b),new google.maps.LatLng(x, y)),
  map:map,map2,
  fillOpacity: 0,
  strokeOpacity: 0,
  url: 'http://example.com',
  clickable: true
}); 
```

您需要为每个地图创建一个单独的矩形（矩形一次只能在一个地图上）像这样（创建一个二维数组，[1] 用于地图，[2] 用于 map2）：

```
rectangles[1][0]=new google.maps.Rectangle({
  bounds:new google.maps.LatLngBounds(new google.maps.LatLng(a,b),new google.maps.LatLng(x, y)),
  map:map,
  fillOpacity: 0,
  strokeOpacity: 0,
  url: 'http://example.com',
  clickable: true
});

rectangles[2][0]=new google.maps.Rectangle({
  bounds:new google.maps.LatLngBounds(new google.maps.LatLng(a,b),new google.maps.LatLng(x, y)),
  map:map2,
  fillOpacity: 0,
  strokeOpacity: 0,
  url: 'http://example.com',
  clickable: true
}); 
```

# asp.net - 如何在 kendoUI 中隐藏验证消息

> ID：13889130
> 
> 赞同：2
> 
> 时间：2012-12-15T03:50:15.517
> 
> 标签：asp.net, kendo-ui

我正在使用 kendoUI 框架。
我正在尝试为我的`widgets(textbox,dropdown)`.
我不想在验证小部件时显示验证消息，
为此我已经实现了，
我把

```
 required="required" validationMessage="" 
```

还

```
$("#<validationElement> span.k-tooltip-validation").hide(); 
```

但我仍然收到消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:12:16.670

删除与相关字段相关的验证消息：

```
@Html.ValidationMessageFor(model => model.TheAttribute) 
```

# graph - 什么是根切割节点，桥切割节点，父切割节点在寻找关节顶点？

> ID：13889134
> 
> 赞同：3
> 
> 时间：2012-12-15T03:50:57.877
> 
> 标签：graph, depth-first-search

什么是根切割节点，桥切割节点，父切割节点在寻找关节顶点？有人可以用例子解释一下吗？我特别对桥接节点感到困惑。它的定义说

> 如果从 v 中最早可达的顶点是 v，则删除单边 (parent[v], v) 断开图

v 最早可达的顶点怎么可能是 v ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-10T14:48:02.960

不知道你是否还在乎，但我现在正在阅读相同的文本

**根切节点**

我认为根切割节点非常明显

**桥切节点**

记住要改变v的reachable_ancestor必须满足以下三个条件：

*   有一条边 (v, y) 是后边
*   对于边 (v, y)，y 不是 v 的父级
*   y的entry_time在v的reachable_ancestor的entry_time之前

因此，如果您查看本书的图 5.13，您会看到，因为一个（树上较低的）桥切节点没有不是 y 的父节点，所以它的reachable_ancestor 永远不会从最初的reachable_ancestor [v ] = v。这又使它成为桥切节点的父节点，并且（仅因为它不是叶子）使该节点也成为桥切节点。

**父切割节点**

图 5.13 中 v 的 parent 是 parent cut-node（而不是 bridge cut-node）的原因是因为 bridges 必须满足以下条件：

*   边缘是树边缘
*   没有后边缘从 v 或以下连接到 y 或以上

很明显，在图中，v 的子节点连接回它的父节点 (y) 及以上，使得 v 和 y 之间的边不是桥，但使 y 仍然是切割节点。

希望有帮助！

# android - 不同布局文件中的选项卡导致应用程序崩溃

> ID：13889137
> 
> 赞同：0
> 
> 时间：2012-12-15T03:51:59.410
> 
> 标签：android, debugging, tabs

我正在为我的主要活动的各个选项卡使用不同的布局文件。我已经改变了很多。我最初尝试将 tab2.xml 的相对布局设置为 wrap_content，但这并没有帮助。我更改了包含文件的 id 并在我的 java 代码中调用它，但没有用。我尝试了最明显的那些。现在，我不知道出了什么问题。此外，我之前确实这样做过，并且它在 tab2.xml 的高度和宽度处于 match_parent 模式时运行良好。现在的程序应用程序。调试控制台中显示的代码行是“setContentView(R.layout.activity);”。因此，绝对是布局文件，代码中没有任何内容导致应用程序崩溃。

这是主要活动的 xml 代码：“activity.xml”

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
tools:context=".CleanUp" >

<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@style/MyTheme" >

        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <include layout="@layout/tab2"/>            

        </FrameLayout>

    </LinearLayout>
</TabHost>

</RelativeLayout> 
```

这是tab2.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                tools:context=".CleanUp"  >

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/textView1"
    android:layout_marginTop="40dp"
    android:layout_marginRight="20dp"
    android:inputType="text"
    android:ems="10" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/editText1"
    android:layout_alignBottom="@+id/editText1"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="20dp"
    android:layout_marginRight="10dp"
    android:text="Custom extension:"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="Clean" />

</RelativeLayout> 
```

这是我在 Activity 类中用于选项卡的代码：

```
TabHost tabHost = (TabHost) findViewById(android.R.id.tabhost);
    tabHost.setup();
    TabSpec tab1 = tabHost.newTabSpec("Clean Up");
    tab1.setIndicator("Clean up");
    tab1.setContent(R.id.tab2);
    tabHost.addTab(tab1); 
```

**LOGCAT 错误**

[http://pastebin.com/DcXGdCuF](http://pastebin.com/DcXGdCuF)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:03:11.950

此 LogCat 行：

```
Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f050002 a=-1 r=0x7f050002} 
```

让我相信你的错误是在这一行：

```
android:background="@style/MyTheme" 
```

您不能将`@style/X`属性用作背景。您必须将其传递给可绘制对象：

```
android:background="@drawable/MyDrawable" 
```

或者正确地使用它作为一种风格：

```
style="@style/MyTheme" 
```

# javascript - 如何有效地暂停游戏循环

> ID：13889142
> 
> 赞同：0
> 
> 时间：2012-12-15T03:52:54.013
> 
> 标签：javascript, html

我正在从头开始编写一个 html5 游戏。
我需要 gameEngine 中的一个方法，当它被调用时会暂停游戏循环。
有没有比使用 setTimeout,setInterval 更有效的方法？

```
gameEngine.prototype.start = function () {
    var that = this;
    (function gameLoop() {
        that.loop();
        requestAnimFrame(gameLoop, that.canvctx.canvas);
    })();
} 
```

# safari-extension - 设置弹出高度

> ID：13889145
> 
> 赞同：3
> 
> 时间：2012-12-15T03:53:36.630
> 
> 标签：safari-extension

当我单击工具栏项时，我希望能够动态更改弹出窗口的高度。工具栏项和弹出框已经可以正常工作了。代码在弹出框 javascript 中执行。

此页面建议可以完成，但他们没有提供任何示例： [https ://developer.apple.com/library/archive/documentation/Tools/Conceptual/SafariExtensionGuide/AddingPopovers/AddingPopovers.html](https://developer.apple.com/library/archive/documentation/Tools/Conceptual/SafariExtensionGuide/AddingPopovers/AddingPopovers.html)

```
You can change the height and width properties of your popover at runtime. 
```

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T04:46:28.810

例如，从弹出窗口中运行的脚本：

```
safari.self.height = 400; 
```

如果要设置全局页面的高度：

```
safari.extension.popovers[0].width = 600; 
```

# flash - 从浏览器缓存中删除文件

> ID：13889147
> 
> 赞同：0
> 
> 时间：2012-12-15T03:53:52.233
> 
> 标签：flash, caching

有没有办法让站点用户从服务器重新读取文件？文件以前是用大的 max-age 获得的。更改 uri 在技术上是不可能的（/crossdomain.xml，由 flash 播放器直接请求）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T17:20:09.897

If you want to obtain a new version of the file, you can call the filename with some query params. You can do something like this:

```
somedomain.com/filecached.xml?v=someRandomValue 
```

If you add this parameter to the file url, a new version will be obtained.

# python - 如何仅使用对数 xscale 在 pyplot 中绘制累积直方图

> ID：13889153
> 
> 赞同：2
> 
> 时间：2012-12-15T03:55:20.770
> 
> 标签：python, matplotlib

这绘制了对数 xscale 和 yscale。似乎无法弄清楚如何仅绘制对数 xscale。

```
plt.hist(data, bins=10, cumulative=True, log=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T12:55:53.353

您可以使用以下命令更改 y 轴上的日志：

```
plt.gca().set_yscale('linear') 
```

或者在人物对焦时按 L 键。

但是，您的`hist()`with`log=True`不会绘制对数 x 轴。从[文档](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.hist)：

> matplotlib.pyplot.hist(x, bins=10, ...)
> 
> bins：整数个 bin 或给出 bin 的序列。如果 bins 是整数，则将返回 bins + 1 个 bin 边缘，这与 numpy 版本 >= 1.3 的 numpy.histogram() 以及早期版本中的 new = True 参数一致。**如果 bins 是一个序列，则支持不等间距的 bins。**

因此，如果您只是设置`bins=10`它们将是等距的，这就是为什么当您将 xscale 设置为 log 时，它们的宽度会减小。要在 log xscale 中获得等间距的 bin，您需要以下内容：

```
plt.hist(x, bins=10**np.linspace(0, 1, 10)) 
```

# java - Java中的字符串数组

> ID：13889155
> 
> 赞同：1
> 
> 时间：2012-12-15T03:55:31.777
> 
> 标签：java

我正在研究一种算法来查找图中两个节点之间的所有路径。就是这样，我能够对字符串数组中的所有路径进行编码，如下所示：

```
String []paths = new String[50]; 
```

*注意：我使用字符串数组来存储路径，但我可以在必要时将它们存储在任何其他数据结构中。*

我的数组中的数据示例如下表所示，请注意，字母是我的数据，连字符仅用于可视化：

```
 -----------
| A | B | C |
 -----------
| D | E |   |
 ----------- 
```

我只需要处理上述数组，并将所有组合输出为：

```
ABC

AEC

DBC

DEC 
```

我尝试使用迭代方法“循环”来解决这个问题，但我失败了。我认为我们可以通过递归来做到这一点，但我不知道该怎么做。另外，我不知道是否有任何数据结构可以解决这个问题。存储路径而不是字符串数组更好的方法？

无论如何，这是我正在处理的循环：

```
String []temp = new String[100];
for( r=0; r<paths.length ;r++ )
   for( c=0; c<paths[r].length() ;c++ )
      for( j=c+1; j<paths[r].length() ;j+1 )
         temp[r] += paths[j]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:10:29.773

所以正则表达式`[AD][BE][C]`。

这也是一个更好的数据结构：数组旋转 90 度。这将消除检查长度（ABC 与 DE）。

尽管如此，对于您的数据结构：

```
int maxPathLength = 3; // TODO calculate
Set<String> results = new TreeSet<String>();
process(paths, "", 0);

public void process(String[] paths, String prefix, int i, Set<String> results) {
    if (i >= maxPathLength) {
        System.out.println(prefix);
        results.add(prefix);
        return;
    }
    for (String s : paths) {
         if (i < s.length()) {
             process(paths, prefix + s.charAt(i), i + 1, results);
         }
    }
} 
```

# ruby-on-rails - ActiveRecord 使用 Scope 验证唯一性，允许 Nil 作用域

> ID：13889156
> 
> 赞同：26
> 
> 时间：2012-12-15T03:55:41.463
> 
> 标签：ruby-on-rails, activerecord

我有一个看起来像这样的验证：

```
class Book < ActiveRecord::Base

  belongs_to :author
  validates :name, uniqueness: { scope: :author_id }

end 
```

问题是我想允许作者 id 为 nil 的重复名称。有没有办法使用 validates 方法（而不是自定义验证）来做到这一点？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-15T04:01:27.113

是的，在验证器上使用[`Proc`](http://www.ruby-doc.org/core-1.9.3/Proc.html)and 。`:unless`

```
class Book < ActiveRecord::Base

  belongs_to :author
  validates :name, uniqueness: { scope: :author_id }, unless: Proc.new { |b| b.author_id.blank? }

end 
```

**推荐阅读： http:** [//guides.rubyonrails.org/active_record_validations.html#using-a-proc-with-if-and-unless](http://guides.rubyonrails.org/active_record_validations.html#using-a-proc-with-if-and-unless)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-10-12T02:19:15.860

使其有条件：

```
 validates :name, uniqueness: { scope: :author_id }, if: :author_id? 
```

# apache-flex - 带组的 Flex 4 滚动条。滚动条不显示

> ID：13889159
> 
> 赞同：2
> 
> 时间：2012-12-15T03:56:29.063
> 
> 标签：apache-flex, air, flex4, scroller

我知道我以前做过，但是每次我使用滚动条和组时，它都对我不起作用，并且会浪费我的 2 天时间。

```
<s:Scroller width="100%" height="100%" horizontalScrollPolicy="auto" verticalScrollPolicy="auto">
    <s:Group clipAndEnableScrolling="true">...... ..... </s:Group></s:Scroller> 
```

这就是我所拥有的。我的组中有组件，即使在大显示器上也足以带来滚动条。但我没有得到任何滚动条。

请告诉我我在这里做错了什么。因为每次我修复它，我都会为下一次而奋斗。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T06:32:02.190

试试这个

您的滚动父容器需要设置非百分比高度/宽度。

```
<s:BorderContainer width="120" height="100" backgroundColor="#FFFFFF">
    <s:Scroller width="100%" height="100%">
        <s:Group>
            <s:layout>
                <s:VerticalLayout horizontalAlign="justify"
                                  clipAndEnableScrolling="true" />
            </s:layout>
            <s:Button label="button (1)" />
            <s:Button label="button (2)" />
            <s:Button label="button (3)" />
            <s:Button label="button (4)" />
            <s:Button label="button (5)" />
            <s:Button label="button (6)" />
        </s:Group>
    </s:Scroller>
</s:BorderContainer> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T07:54:57.787

感谢您的所有回复。设置 minHeight 后，它现在可以工作了。我能够按预期实现滚动条（让它看起来像浏览器的滚动条）。下面是代码片段

`<s:Scroller width="100%" maxHeight="{this.height}"> <s:VGroup width="100%" minHeight="1000" height="100%" paddingLeft="40" paddingRight="40" paddingTop="0" > ..</s:VGroup></s:Scroller>`

请让我知道是否有更好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:26:37.863

“Raja Jaganathan”本身给出的相同代码将在滚动父高度和宽度上进行小的修改

Capabilities.screenResolutionX、Capabilities.screenResolutionY 将分别为您提供浏览器的宽度和高度。

# eclipse - 使用 maven 插件进行 Weblogic 部署时出错

> ID：13889160
> 
> 赞同：0
> 
> 时间：2012-12-15T03:56:29.797
> 
> 标签：eclipse, maven, maven-3, weblogic11g, weblogic-maven-plugin

我一直在尝试使用 maven 将应用程序部署到 Weblogic 10.3.6

[如本文](http://docs.oracle.com/cd/E17904_01/web.1111/e13702/maven_deployer.htm)所述，我已经为 maven 创建了 weblogic 插件。

我已将以下内容添加到 pom.xml

```
<build>
  <plugins>
    <plugin>
      <artifactId>maven-plugin-plugin</artifactId>
      <version>2.3</version>
      <configuration>
        <goalPrefix>weblogic</goalPrefix>
      </configuration>
    </plugin>
    <plugin> 
  <groupId>weblogic</groupId>
  <artifactId>weblogic-maven-plugin</artifactId>
  <version>10.3.6.0</version>
  <configuration>
    <adminurl>t3://localdomain:7001</adminurl>
    <user>weblogic</user>
    <password>password</password>
    <name>wldemo</name>
    <remote>true</remote>
    <upload>true</upload>
    <targets>AdminServer</targets>
  </configuration>
  <executions>
    <execution>
      <id>deploy</id>
      <phase>pre-integration-test</phase>
      <goals>
        <goal>deploy</goal>
      </goals>
      <configuration>
        <source>target/EmployeesApp-1.0-SNAPSHOT.war</source>
      </configuration>
    </execution>
  </executions>
</plugin>
  </plugins>  
</build> 
```

当我执行 mvn com.oracle.weblogic:weblogic-maven-plugin:deploy 时出现以下错误，我该如何解决这些错误？

```
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------   
[INFO] Final Memory: 3M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.oracle.weblogic:weblogic-maven-plugin:10.3.6.
0:deploy (default-cli) on project EmployeesApp: The parameters 'source' for goal
 com.oracle.weblogic:weblogic-maven-plugin:10.3.6.0:deploy are missing or invali
d 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T16:16:00.417

您已在执行配置中指定了*源*参数，因此为了将其考虑在内，您应该调用此特定执行。可以使用您指定的阶段键来完成，例如：

```
mvn integration-test 
```

Maven 将经历整个生命周期，在*预集成测试阶段（在**集成*测试阶段之前），它将运行您配置的 weblogic-maven-plugin 的执行。

# javascript - Javascript 表单验证

> ID：13889161
> 
> 赞同：0
> 
> 时间：2012-12-15T03:56:38.137
> 
> 标签：javascript, forms, validation

我正在尝试验证 HTML 表单上的输入。我正在尝试使用一个脚本来验证具有多个相似元素的各种表单。总而言之，大约有 15 个不同的字段，但我只放了 3 个。下面适用于具有所有元素的表单，但在任何没有特定字段的表单上都失败。

```
if (form.name.value == ""){ // Check if blank
    alert( "\nEnter a name." );
    form.name.focus();
    return false; // Stop the form processing.
    } 

else if ( !/^\w{10}$/.test( form.phone.value )) { // Check for phone
    form.name.style.border=""
    alert( "\nEnter a valid phone number!" );
    form.phone.focus();
    return false; // Stop the form processing.
    } 

else{
 return true; // Submit! 
```

因为这仅在所有人都存在时才有效，所以我要做的就是仅在存在时进行验证。我尝试将验证嵌套在一个语句下，该语句应该在尝试验证之前检查元素，如果元素不存在，它应该继续下一个。

```
if (document.forms[0].name){ //does field exist?
    if (form.name.value === ""){
        alert( "\nEnter a name." );
        form.name.focus();
        return false; // Stop the form processing.
        }
    else{
        return true; //field ok move on.
        }
    }

else if (document.forms[0].phone){
    if ( !/^\w{10}$/.test( form.phone.value )) {  user
        form.name.style.border=""
        alert( "\nEnter a valid phone number!" );
        form.phone.focus();
        return false; // Stop the form processing.
        } 
    else{
        return true; //field ok move on.
        }
    }
else{
       return true; // Submit!
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:08:40.523

目前您正在检查 (document.forms[0].name) 是否可用，然后如果它已死，则检查 (document.forms[0].phone) 是否为真，然后......然后如果没有一个是真的，它求助于“其他”并且返回是真的。的使用`if else`意味着如果这部分失败了，你只会在之后再去打扰任何事情。

你可以试试。

```
if (document.forms[0].name) {
    if ( !/^\w{10}$/.test( form.phone.value )) {  user
        form.name.style.border=""
        alert( "\nEnter a valid phone number!" );
        form.phone.focus();
        return false; // Stop the form processing.
    } 
}
if (document.forms[0].blah) {
    do stuff...
    if fail
        return false;
}
return true; 
```

由于该函数无论如何都会返回为真，因此您无需在其他任何地方声明返回真（这也将停止进程，因为它已经`returned`停止并停止了）。如果出现问题，停止该过程的唯一原因..因此`return false;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T04:41:24.567

如果您只需要验证表单，那么现在您不需要编写 javascript。您可以使用[html5 表单](http://www.html5rocks.com/en/tutorials/forms/html5forms/)。即使您必须支持没有此功能的浏览器，您也可以将[webshims 库](http://afarkas.github.com/webshim/demos/demos/webforms.html)放在您的页面中以启用它。

# iphone - 使用苹果 Accelerate 框架选择实数与复数 2D FFT

> ID：13889163
> 
> 赞同：3
> 
> 时间：2012-12-15T03:56:53.237
> 
> 标签：iphone, fft

谁能建议使用正确的 FFT（实数或复数）？我看过[这里，](https://stackoverflow.com/questions/3398753/using-the-apple-fft-and-accelerate-framework)但仍有疑问。

我想做图像相关来识别主图像中子图像的位置。我了解 FFT 和 iFFT 的基础知识。

计划：

1.  对主图像执行 FFT。512x512
2.  取子图像的复共轭。
3.  对子图像执行 FFT。30x30 但用零填充到 512x512
4.  将两个结果矩阵相乘
5.  对结果执行 iFFT
6.  即使结果应该（大部分）是真实的，也要取结果矩阵的大小
7.  寻找对应于最大相关性的最大值。

我无法获得预期的结果。

如果我使用真正的 2d fft (vDSP_fft2dzrip)，结果是压缩格式，这使得很难使用 vDSP_zvmul 乘以两个结果矩阵。

如果我使用复杂的 fft (vDSP_fft2dzip)，我根本无法获得任何相关性。

苹果示例和大多数音频示例对正向 FFT 的结果没有做任何事情，除了做逆向。

谁能帮我开始使用图像相关性？第一个问题...我可以使用复杂的 FFT 并避免打包格式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T14:36:47.683

实数和复数 FFT 之间的唯一区别是，实数 FFT 可以通过使用巧妙的打包方案将 2^n 实数 FFT 转换为 2^(n-1) 复数 FFT 稍微更有效。两种情况下的结果应该相同。因此，如果我是您，为了简单起见，我会坚持使用复杂的 FFT，至少在您一切正常之前。

你也看过了`vImageConvolve_ARGB8888`吗？它似乎做了你想做的事，而且省了很多力气:)

# actionscript-3 - 为什么字体不显示在 GIF(flash) 中

> ID：13889166
> 
> 赞同：0
> 
> 时间：2012-12-15T03:57:29.407
> 
> 标签：actionscript-3, flash, actionscript, gif

我正在制作文本的移动动画，我需要将其保存为 GIF 格式，但是为什么像 Verdana 字体这样的标准文本没有在 GIF 中显示，在 SWF 中一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:42:35.083

如果字体未正确转换，则在发布前制作所有字体轮廓。

# php - apc_delete 不再删除缓存数据

> ID：13889168
> 
> 赞同：1
> 
> 时间：2012-12-15T03:57:44.943
> 
> 标签：php, apc

我昨晚升级到 PHP 5.3.19，`apc_delete`不再为我工作。我安装了 APC 3.1.13。

每当我更新新闻条目时，我的代码都应该删除 APC 中存储的帖子。

```
if ($_GET["action"] == "save")
{
     // save the info to mysql database
     ...
     ...
     // delete the post from APC cache
     echo "APC cache post# $sid deleted? - ";
     var_dump( apc_delete("news_$sid") );
} 
```

该值始终用于返回`true`- 现在它正在返回`false`。APC 中存储的新闻帖子不会被删除。

事实上，尝试手动删除存储的条目（通过 apc.php 脚本）也不起作用。我设法删除帖子的唯一方法是单击“清除用户缓存”按钮。

关于发生了什么的任何想法？

# php - 使用 PHP 仅显示数据库中的一个条目

> ID：13889170
> 
> 赞同：0
> 
> 时间：2012-12-15T03:58:49.097
> 
> 标签：php, mysql, variables

以下代码从数据库中检索并显示正确的数据，但它会获取所有数据。我需要一种将它从数据库中检索到的每个值分配给 PHP 变量的方法。例如，如果它从数据库中获取“Joe”、“Henry”和“Robert”，我希望每个变量都有一个变量，现在它返回并包含所有值。

```
<?php
dbCon();
$query1 = mysql_query("SELECT * FROM hosts WHERE name!=''");
while($row1 = mysql_fetch_assoc($query1)) {
$res = $row1['name'] . '<br />';
echo $res;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:21:27.113

```
<?php
function echoName($id) {
dbCon();
$query1 = mysql_query("SELECT * FROM hosts WHERE id='$id'");
while($row1 = mysql_fetch_assoc($query1)) {
$res = $row1['name'] . '<br />';
echo $res;
}
}
?>

<div id="joe_div">
<?
echoName("1");
?>
</div>

.....

<div id="henry_div">
<?
echoName("2");
?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:08:00.497

像这样声明变量变量：

```
while($row1 = mysql_fetch_assoc($query1)) {
  $$row1['name'] = $row1['name']
}

echo $Joe; //returns Joe 
```

虽然我不知道你为什么会需要那个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T04:26:19.370

```
if it gets "Joe", "Henry", and "Robert" from the database, I'd like one variable for each of those 
```

所以试试这个：

```
<?php
 dbCon();
 $query1 = mysql_query("SELECT * FROM hosts WHERE name!=''");
 while($row1 = mysql_fetch_assoc($query1)) {
 $$row1['name'] = $row1['name'];
}

echo $Joe;
echo $Henry;
echo $Robert;
?> 
```

PS：我不知道你为什么要这样做，但我相信你有更好的方法来解决你的问题。

# android - 通过调用 glDrawElements 绘制的纹理数量

> ID：13889171
> 
> 赞同：0
> 
> 时间：2012-12-15T03:58:49.923
> 
> 标签：android, opengl-es, textures

## 概述

我在渲染立方体侧面的纹理时遇到问题。我已经成功地在立方体的顶部和底部渲染了纹理，但无法在侧面渲染。

## 是）我有的

我有一个充满 48 个元素的纹理缓冲区（每个面 4*2 个元素，6 个面是 48 个），它们充满了良好的坐标。

立方体形状正在绘制，但侧面没有被渲染。 ![立方体的屏幕截图](../Images/f59b3a272950f6c8e4ede9395ea630e7.png)

我正在绘制的图像只是一个带有数字 1-9 的图像，正如您从立方体顶部看到的那样。textureBuffer 是一遍又一遍的相同模式......

```
 texture[0] = 0;
        texture[1] = 0;
        texture[2] = 1;
        texture[3] = 0;
        texture[4] = 1;
        texture[5] = 1;
        texture[6] = 0;
        texture[7] = 1;
        texture[8] = 0;
        texture[9] = 0;
        texture[10] = 1;
        texture[11] = 0;
        texture[12] = 1;
        texture[13] = 1;
        texture[14] = 0;
        texture[15] = 1;
        texture[16] = 0f;
        texture[17] = 0f;
        texture[18] = 1f;
        texture[19] = 0f;
        texture[20] = 1f;
        texture[21] = 1f;
        texture[22] = 0f;
        texture[23] = 1f; 
```

它只是加载纹理缓冲区来渲染完整的纹理。

## 可能的问题##

似乎只有前 16 个纹理坐标被绘制和使用，因为只有矩形的顶部和底部表面被纹理化。我已经调试过了，当我填充 TextureBuffer 时，大小是 48。

## 渲染代码

```
@Override
public void draw(GL10 gl)
{
    super.draw(gl);

    //gl.glColor4f(255, 0, 0, 150);
    gl.glEnable(GL10.GL_TEXTURE_2D);
    gl.glEnable(GL10.GL_ALPHA_TEST);
    gl.glAlphaFunc(GL10.GL_GREATER, 0.0f);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glTexCoordPointer(2,GL10.GL_FLOAT,0,textureBuffer);
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textureID);

    gl.glBlendFunc(GL10.GL_SRC_ALPHA,GL10.GL_ONE_MINUS_SRC_ALPHA);
    gl.glEnable(GL10.GL_BLEND);

    gl.glFrontFace(GL10.GL_CCW);
    gl.glEnable(GL10.GL_CULL_FACE);
    gl.glCullFace(GL10.GL_BACK);
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glVertexPointer(3,GL10.GL_FLOAT,0,vertexBuffer);

    gl.glDrawElements(GL10.GL_TRIANGLES,indexBuffer.capacity(),GL10.GL_UNSIGNED_SHORT,indexBuffer);
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glDisable(GL10.GL_CULL_FACE);
    gl.glDisable(GL10.GL_ALPHA_TEST);
    gl.glDisable(GL10.GL_TEXTURE_2D);
    gl.glColor4f(255, 255, 255, 255);
} 
```

## 创建变量 textureBuffer

进来的参数变量texture包含48个元素

```
public void constructTextureBuffer(float[] texture)
{
    ByteBuffer vbb = ByteBuffer.allocateDirect(texture.length*4);
    vbb.order(ByteOrder.nativeOrder());
    textureBuffer = vbb.asFloatBuffer();
    textureBuffer.put(texture);
    textureBuffer.position(0);
} 
```

vertexBuffer 已正确设置并使用索引缓冲区来渲染立方体。你知道为什么立方体的侧面没有被渲染吗？

## 新的！！

所以我尝试手动创建一个形状，但我遇到了与纹理缓冲区相同的情况。我可以渲染两张脸，但不能渲染第三张脸！似乎任何超过 8 个纹理顶点的东西都不起作用。

这张照片显示了我的新形状。注意水平延伸。无论我对这些纹理坐标做什么，该纹理都不会改变。那也是我随机对象的第三张脸。

![在此处输入图像描述](../Images/902f35c145725f2e36a0c48e1c15b81c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:24:16.723

我还没有让索引缓冲区和纹理一起工作。我几乎什么都试过了！所以相反（不幸的是）我正在构建很多三角形。为了解析 blender 生成的 .obj 文件，我编写了这个函数，它为我创建了顶点缓冲区和纹理缓冲区。

```
public static Mesh createMesh(int resourceID)
    {
        Mesh m = new Mesh();

        Scanner s = null;

        BufferedReader inputStream = null;

        ArrayList<Float> readInVerticies        = new ArrayList<Float>();
        ArrayList<Float> readInTextures         = new ArrayList<Float>();
        ArrayList<Short> readInVertexIndicies   = new ArrayList<Short>();
        ArrayList<Short> readInTextureIndicies  = new ArrayList<Short>();

        int numberFaces = 0;

        try
        {
            inputStream = new BufferedReader(new InputStreamReader(context.getResources().openRawResource(resourceID)));
            s = new Scanner(inputStream);
            String line = null;

            /*
             * Read the header part of the file
             */
            line = inputStream.readLine();
            line = inputStream.readLine();
            line = inputStream.readLine();
            line = inputStream.readLine();
            line = inputStream.readLine();

            while(line.charAt(0) == 'v' && line.charAt(1) != 't')
            {
                s = new Scanner(line);
                s.next();
                readInVerticies.add(s.nextFloat());
                readInVerticies.add(s.nextFloat());
                readInVerticies.add(s.nextFloat());
                line = inputStream.readLine();
            }
            while(line.charAt(0)=='v' && line.charAt(1)=='t')
            {
                s = new Scanner(line);
                s.next(); //read in "vt"
                readInTextures.add(s.nextFloat());
                readInTextures.add(s.nextFloat());
                line = inputStream.readLine();
            }
            line = inputStream.readLine();
            line = inputStream.readLine();

            while(line != null && line.charAt(0) == 'f')
            {
                s = new Scanner(line);
                s.useDelimiter("[ /\n]");
                String buffer = s.next();
                short vi1,vi2,vi3,vi4;
                short ti1,ti2,ti3,ti4;

                vi1 = s.nextShort();
                ti1 = s.nextShort();
                vi2 = s.nextShort();
                ti2 = s.nextShort();
                vi3 = s.nextShort();
                ti3 = s.nextShort();
                vi4 = s.nextShort();
                ti4 = s.nextShort();

                readInVertexIndicies.add(vi1);
                readInVertexIndicies.add(vi2);
                readInVertexIndicies.add(vi3);
                readInVertexIndicies.add(vi4);

                readInTextureIndicies.add(ti1);
                readInTextureIndicies.add(ti2);
                readInTextureIndicies.add(ti3);
                readInTextureIndicies.add(ti4);

                numberFaces = numberFaces + 1;
                line = inputStream.readLine();      
            }

            /*
             * constructing our verticies. Use the number of faces * 6 because
             * there are 2 triangles per face and 3 verticies on a triangle but there are
             * also 3 coordinates per vertex.
             * 
             * For the texture, the same number but there are only 2 coordinates per texture
             */
            float verticies[] = new float[numberFaces * 6 * 3];
            float textures[]  = new float[numberFaces * 6 * 2];
            for(int i=0;i<numberFaces;i++)
            {
                verticies[i*18+0]       =   readInVerticies.get((readInVertexIndicies.get(i*4+0)-1)*3+0);
                verticies[i*18+1]       =   readInVerticies.get((readInVertexIndicies.get(i*4+0)-1)*3+1);
                verticies[i*18+2]       =   readInVerticies.get((readInVertexIndicies.get(i*4+0)-1)*3+2);

                textures[i*12+0]        =   readInTextures.get((readInTextureIndicies.get(i*4+0)-1)*2+0);
                textures[i*12+1]        =   readInTextures.get((readInTextureIndicies.get(i*4+0)-1)*2+1);

                verticies[i*18+3]       =   readInVerticies.get((readInVertexIndicies.get(i*4+1)-1)*3+0);
                verticies[i*18+4]       =   readInVerticies.get((readInVertexIndicies.get(i*4+1)-1)*3+1);
                verticies[i*18+5]       =   readInVerticies.get((readInVertexIndicies.get(i*4+1)-1)*3+2);

                textures[i*12+2]        =   readInTextures.get((readInTextureIndicies.get(i*4+1)-1)*2+0);
                textures[i*12+3]        =   readInTextures.get((readInTextureIndicies.get(i*4+1)-1)*2+1);

                verticies[i*18+6]       =   readInVerticies.get((readInVertexIndicies.get(i*4+2)-1)*3+0);
                verticies[i*18+7]       =   readInVerticies.get((readInVertexIndicies.get(i*4+2)-1)*3+1);
                verticies[i*18+8]       =   readInVerticies.get((readInVertexIndicies.get(i*4+2)-1)*3+2);

                textures[i*12+4]        =   readInTextures.get((readInTextureIndicies.get(i*4+2)-1)*2+0);
                textures[i*12+5]        =   readInTextures.get((readInTextureIndicies.get(i*4+2)-1)*2+1);

                verticies[i*18+9]       =   readInVerticies.get((readInVertexIndicies.get(i*4+0)-1)*3+0);
                verticies[i*18+10]      =   readInVerticies.get((readInVertexIndicies.get(i*4+0)-1)*3+1);
                verticies[i*18+11]      =   readInVerticies.get((readInVertexIndicies.get(i*4+0)-1)*3+2);

                textures[i*12+6]        =   readInTextures.get((readInTextureIndicies.get(i*4+0)-1)*2+0);
                textures[i*12+7]        =   readInTextures.get((readInTextureIndicies.get(i*4+0)-1)*2+1);

                verticies[i*18+12]      =   readInVerticies.get((readInVertexIndicies.get(i*4+2)-1)*3+0);
                verticies[i*18+13]      =   readInVerticies.get((readInVertexIndicies.get(i*4+2)-1)*3+1);
                verticies[i*18+14]      =   readInVerticies.get((readInVertexIndicies.get(i*4+2)-1)*3+2);

                textures[i*12+8]        =   readInTextures.get((readInTextureIndicies.get(i*4+2)-1)*2+0);
                textures[i*12+9]        =   readInTextures.get((readInTextureIndicies.get(i*4+2)-1)*2+1);

                verticies[i*18+15]      =   readInVerticies.get((readInVertexIndicies.get(i*4+3)-1)*3+0);
                verticies[i*18+16]      =   readInVerticies.get((readInVertexIndicies.get(i*4+3)-1)*3+1);
                verticies[i*18+17]      =   readInVerticies.get((readInVertexIndicies.get(i*4+3)-1)*3+2);

                textures[i*12+10]       =   readInTextures.get((readInTextureIndicies.get(i*4+3)-1)*2+0);
                textures[i*12+11]       =   readInTextures.get((readInTextureIndicies.get(i*4+3)-1)*2+1);
            }

            m.constructVertexBuffer(verticies);
            m.constructTextureBuffer(textures);

        } 
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
        } 
        catch (IOException e)
        {
            e.printStackTrace();
        }

        return m;
    } 
```

因此，如果您在解析 .obj 文件时遇到问题，请随时将其用作参考或指南！Blender 为您提供具有 4 个顶点的面中的所有内容，这会将所有内容变成 3 个并为每个面构造 2 个三角形。

# javascript - JavaScript 验证错误？

> ID：13889174
> 
> 赞同：1
> 
> 时间：2012-12-15T03:59:42.183
> 
> 标签：javascript

我一直在研究 JavaScript 验证器，但由于某种原因，即使它通过了验证，evalid 也总是返回为假……这是一个错误，好像 evalid 为假，表单不提交。

```
function signup_validate()
    {
        document.getElementById("email_error").innerHTML = "";
        document.getElementById("password_error").innerHTML = "";
        evalid = false;
        pvalid = false;
        email = null;
        pass = null;
        confpass = null;
        email=document.forms["signup_form"]["email"].value.replace(/^\s+|\s+$/g, '');
        atpos=email.indexOf("@");
        dotpos=email.lastIndexOf(".");
        pass=document.forms["signup_form"]["pass"].value;
        confpass=document.forms["signup_form"]["confpass"].value;
            if (atpos<1 || dotpos<atpos+2 || dotpos+2>=email.length)
            {
                document.getElementById("email_error").innerHTML = "<span class='required'>Email must be valid.</span>";
            }
            else
            {
                $.post('/resources/forms/signup.php',{email: email}, function(data){
                    if(data.exists){
                        document.getElementById("email_error").innerHTML = "<span class='required'>This email is already in use.</span>";
                    }
                    else
                    {
                        evalid = true;
                    }
                }, 'JSON');
            }
            if (pass!=""&&pass!=null&&confpass!=""&&confpass!=null&&confpass==pass)
            {
                pvalid = true;
            }
            else
            {
                document.getElementById("password_error").innerHTML = "<span class='required'>Both passwords must match and cannot be left blank.</span>";
            }
            alert(evalid);
            if (evalid == true && pvalid == true)
            {
                document.getElementById("signup_form").submit();
            }
            else
            {
                return false;
            }
        } 
```

我可能错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T04:03:18.337

将“evalid”设置为 true 的唯一时刻是在异步运行的函数内部。换句话说，当你设置“evalid”为真时，主函数已经结束了。

您可以尝试使用`$.ajax`而不是`$.post`使用参数`async:false`

尝试这样的事情：

```
$.ajax({
    type: 'POST',       
    url: '/resources/forms/signup.php',
    data: {email: email},
    success: function(response){
        //your function here
    },
    dataType:'JSON',
    async:false
}); 
```

# git - 如何使用 Macports 安装 git？

> ID：13889177
> 
> 赞同：1
> 
> 时间：2012-12-15T04:00:13.777
> 
> 标签：git, installation, macports

Git 过去在我的 Mac OS X 上运行良好。今天我发现它不工作：

```
$ git
-bash: git: command not found 
```

我以前用 Macports 安装过。现在，如果我再试一次，会发生以下情况：

```
$ sudo port install git-core
Portfile changed since last build; discarding previous state.
--->  Computing dependencies for git-core
--->  Fetching archive for git-core
--->  Attempting to fetch git-core-1.8.0.2_0+credential_osxkeychain+doc+pcre+python27.darwin_10.x86_64.tbz2 from http://packages.macports.org/git-core
--->  Attempting to fetch git-core-1.8.0.2_0+credential_osxkeychain+doc+pcre+python27.darwin_10.x86_64.tbz2 from http://mse.uk.packages.macports.org/sites/packages.macports.org/git-core
--->  Attempting to fetch git-core-1.8.0.2_0+credential_osxkeychain+doc+pcre+python27.darwin_10.x86_64.tbz2 from http://lil.fr.packages.macports.org/git-core
--->  Fetching distfiles for git-core
--->  Attempting to fetch git-1.8.0.2.tar.gz from http://ykf.ca.distfiles.macports.org/MacPorts/mpdistfiles/git-core
--->  Attempting to fetch git-manpages-1.8.0.2.tar.gz from http://ykf.ca.distfiles.macports.org/MacPorts/mpdistfiles/git-core
--->  Attempting to fetch git-htmldocs-1.8.0.2.tar.gz from http://ykf.ca.distfiles.macports.org/MacPorts/mpdistfiles/git-core
--->  Verifying checksum(s) for git-core
--->  Extracting git-core
--->  Applying patches to git-core
--->  Configuring git-core
--->  Building git-core
--->  Staging git-core into destroot
--->  Installing git-core @1.8.0.2_0+credential_osxkeychain+doc+pcre+python27
--->  Activating git-core @1.8.0.2_0+credential_osxkeychain+doc+pcre+python27
Error: org.macports.activate for port git-core returned: Image error: /opt/local/libexec/git-core/git-subtree already exists and does not belong to a registered port.  Unable to activate port git-core. Use 'port -f activate git-core' to force the activation.
Please see the log file for port git-core for details:
    /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_devel_git-core/git-core/main.log
To report a bug, follow the instructions in the guide:
    http://guide.macports.org/#project.tickets
Error: Processing of port git-core failed
21:51 foouser@barhost:~$ sudo port -f activate git-core
--->  The following versions of git-core are currently installed:
--->      git-core @1.7.7.2_0+doc+pcre+python27
--->      git-core @1.7.7.4_0+doc+pcre+python27
--->      git-core @1.7.9_0+doc+pcre+python27
--->      git-core @1.7.9.2_0+doc+pcre+python27
--->      git-core @1.7.9.2_1+credential_osxkeychain+doc+pcre+python27
--->      git-core @1.7.9.4_0+credential_osxkeychain+doc+pcre+python27
--->      git-core @1.7.10_0+credential_osxkeychain+doc+pcre+python27
--->      git-core @1.7.11.3_0+credential_osxkeychain+doc+pcre+python27
--->      git-core @1.7.11.5_0+credential_osxkeychain+doc+pcre+python27
--->      git-core @1.7.12.2_0+credential_osxkeychain+doc+pcre+python27
--->      git-core @1.8.0.1_0+credential_osxkeychain+doc+pcre+python27
--->      git-core @1.8.0.2_0+credential_osxkeychain+doc+pcre+python27
Error: port activate failed: Registry error: Please specify the full version as recorded in the port registry. 
```

它仍然无法正常工作。我应该如何恢复我心爱的 git？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:28:45.290

问题是`git-core`您的系统上安装了多个。您需要更精确地确定要**添加**的 . 否则激活特定版本。

例如，您可以这样做：

```
sudo port install git-core @1.7.11.3_0+credential_osxkeychain+doc+pcre+python27 
```

选择具有上述变体的版本**1.7.11.3_0 。**或者最后一个版本：

```
sudo port install git-core @1.8.0.2_0+credential_osxkeychain+doc+pcre+python27 
```

# c - 为什么下面的代码会进入无限循环？

> ID：13889180
> 
> 赞同：0
> 
> 时间：2012-12-15T04:00:37.420
> 
> 标签：c, for-loop, infinite-loop, goto

考虑以下代码：

```
const char *s = "a   b    c  d !";
const char *p = s;

top:for(; *p; p++) {
    switch(*p) {
    case 0x20: 
    case '\n': 
        goto top;
    default: 
        putchar(*p);
    }
} 
```

有人可以解释为什么它进入无限循环而不是在何时`*p`停止`NULL`？我想到了以下几点：when `*p`is `0x20`or `\n`go to the beginning of the loop again,因为它测试条件并评估表达式`p++`。所以，我看不出它无限循环的理由，或者我真的不明白 C 编程语言中的`goto`语句和`labels`工作方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T04:07:35.087

当你`goto top`,`p++`不被执行，因为 for 循环又从头开始了。然后你`goto top`再来。然后再一次。然后再一次。永远。

如果您希望增量起作用，请使用`continue`而不是`goto`. 或者，更好的是，做一些更清晰的事情：

```
for(p = s; *p != '\0'; p++) {
    switch(*p) {
    case 0x20:
    case '\n':
        // Do nothing.
        break;

    default: 
        putchar(*p);
    }
} 
```

哦，顺便说一句，避免`goto`像瘟疫这样的陈述。除非您以自动方式生成 C 代码并且它不应该是人类可读的，否则`goto`实际上这绝不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T04:11:21.430

做这个

```
const char *s = "a   b    c  d !";
const char *p = s;

 for(; *p; p++) {
    switch(*p) {
    case 0x20: case '\n': continue;
    default: putchar(*p);
    }
  } 
```

原因是，您的代码甚至没有完成一次迭代，因此 p++ 永远不会执行。当您继续而不是使用标签时，它计为一次完整的迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T05:06:53.873

```
const char *s = "a   b    c  d !";
const char *p = s;

top:
for(; *p; p++) {
    switch(*p) {
    case 0x20: 
    case '\n': 
        p ++;
        goto top;
    default: 
        putchar(*p);
    }
} 
```

您必须使用`p ++;`before `goto top;`，因为 go to`top:`意味着您正在重新启动循环。

# java - 从java文件中读取数据

> ID：13889181
> 
> 赞同：0
> 
> 时间：2012-12-15T04:01:19.990
> 
> 标签：java, file

我有以下格式的文本文件：

[详情.txt](http://shrib.com/P5xdvUwP)

该文件是一个 .txt 文件。我想从此文件中读取课程标题并打印相应的教科书和讲师信息。但我不确定要遵循什么流程？将信息存储在数组中效率不高！我应该如何进行？注意：我不能更改文件中的信息，不应该更改！！显然该文件将被以下代码读取：

```
File newFile=new File("C:/details"); 
```

但是我应该如何根据标签课程标题、教科书和讲师从这个文件中提取数据！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T04:15:18.070

使用 String Tokenizer 并分离每个字符串，然后将它们存储在 Linked List 或 Array List 中。为每个标题（如课程标题、讲师等）设置单独的列表，然后打印它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:26:21.257

使用 Scanner 类

```
Scanner s=new Scanner(new File("C:/Details.txt"));
while(s.hasNext())
{
  System.out.println(s.nextLine());
} 
```

如果您想按单词工作，请使用 String Tokenizer

看这篇[文章](http://www.java-examples.com/parse-csv-file-using-stringtokenizer-example)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T04:48:33.027

```
//Find the directory for the SD Card using the API
//*Don't* hardcode "/sdcard"
File sdcard = Environment.getExternalStorageDirectory();

//Get the text file
File file = new File(sdcard,"file.txt");

//Read text from file
StringBuilder text = new StringBuilder();

try {
    BufferedReader br = new BufferedReader(new FileReader(file));
    String line;

    while ((line = br.readLine()) != null) {
        text.append(line);
        text.append('\n');
    }
}
catch (IOException e) {
    //You'll need to add proper error handling here
}

//Find the view by its id
TextView tv = (TextView)findViewById(R.id.text_view);

//Set the text
tv.setText(text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T04:53:16.687

你可以使用 FileUtils.readFileToString(new File(""C:/details.txt");

现在您可以根据自己的意愿提取所需的数据

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T18:28:39.627

1.  首先逐行正确读取文件，然后搜索您输入的课程名称，让我们考虑“Java”

2.  现在你点击了你的标题，你知道你需要文件中的 3 行连续的行，因为与该标题相关的所有信息都在那里。

    ```
    if(str.startsWith(title)); {  // for title = "Java"
      line1 = 1st line  // contains ISBN and First Name
      line2 = 2nd line  // Title and Last Name
      line3 = 3rd line  // Author and Department
      line4 = 4th line  // Email
      break;  // this will take you out of while loop
    } 
    ```

3.  现在在这四行上进行字符串操作并根据需要提取数据并使用它。

我在家，所以我不能给你确切的代码。但是，如果您遵循此操作，它将解决您的问题。如果您在执行此操作时遇到任何问题，请告诉我。

[按照此获取有关字符串操作的一些信息](http://www.javamex.com/tutorials/strings.shtml)

# c - 对齐的结构在全球范围内不可用

> ID：13889183
> 
> 赞同：5
> 
> 时间：2012-12-15T04:01:51.493
> 
> 标签：c, pointers, struct, alignment, draw

我有一个用于 Raspberry Pi 的小型裸机程序，它可以绘制到屏幕上。我使用 C，GCC 作为编译器，Yagarto 作为 ARM 工具链。

目前，我有一个标头（gpu.h），它声明了 GPU 读取的帧缓冲区结构（它包含分辨率和位深度）。GPU 填充结构中的值，包括要绘制的指针：

```
struct frame_buffer {
    int width;
    int height;
    int vwidth;
    int vheight;
    int bytes;
    int depth;
    int ignorex;
    int ignorey;
    int pointer;
    int size;
};
extern struct frame_buffer framebuf; 
```

该结构在 main.c 中定义（不在函数内）：

```
struct frame_buffer framebuf __attribute__ ((aligned (16))) = {GPU_HRES, GPU_VRES, GPU_HRES, GPU_VRES, 0, GPU_BITDEPTH, 0, 0, 0, 0}; 
```

在 main.c 中还有一个将字符绘制到屏幕上的函数 (draw_char)，以及我自己的 putchar() 实现，它使用 draw_char 函数。目前这工作正常。

如果我将 draw_char 函数移动到另一个文件，一切都可以编译，但没有任何东西被绘制到屏幕上。

我认为该结构在全球范围内不可用，因此指针不正确。

关于我应该做些什么来解决这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T22:05:04.900

您没有提供足够的信息来实际解决您的问题，但上述评论很可能是正确的 - 数据结构不同或功能不同。我只能给出一些如何找到原因的建议，这在过去帮助我解决了类似的问题：

1) 使用`objdump`(gcc toolchain) 或类似工具并检查目标文件所需的内容和导出的内容。每个函数和结构应该只存在于单个目标文件中（并且应该从其他文件中导入）。

2）验证是否存在同名的库函数，并在链接阶段被取走（这个名字`putchar()`在这里很危险）。C 链接器不验证参数（与 C++ 链接器不同）。确保链接器首先获取您的对象，然后才是库。对于大多数编译器/链接器，参数的顺序是相关的。

3）在文件和标题中单独重命名变量，并检查代码是否仍然编译。未修改的文件不应编译。

4) 添加调试语句，为您提供函数和变量的地址。运行软件时，变量的地址应该始终相同（我假设您找到了在显示功能旁边输出调试文本的另一种可能性）。

5）您说指针已被获取 - 验证它在整个代码中确实是相同的，并确保这些值不会被覆盖。

对不起，没有更多的想法。

# python - 从结果集中消除连续的数字组合

> ID：13889186
> 
> 赞同：2
> 
> 时间：2012-12-15T04:02:19.170
> 
> 标签：python, combinations, itertools

我有一个 30 个数字的列表：

```
[1, 3, 5, 6, 7, 8, 9, 10, 15, 19, 20, 22, 23, 24, 26, 27, 28, 32, 33, 35, 37, 38, 39, 40, 41, 42, 43, 44, 47, 48] 
```

我正在打印所有可能的 8 位组合，使用此代码效果很好：

```
possible_combinations = itertools.combinations(dedup_list, 8) 

combos = []
for e in possible_combinations:
    combos.append(e)
print combos 
```

我现在想做的是消除所有包含连续 3 位数字的组合，例如：

> `[1, 5, 9,`**22、23、24、** `33, 37]`

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:25:21.593

我认为这可以解决问题：

```
from itertools import combinations, groupby
from operator import itemgetter

data = [1, 3, 5, 6, 7, 8, 9, 10, 15, 19, 20, 22, 23, 24, 26, 27, 28, 32, 33, 35, 37, 38, 39, 40, 41, 42, 43, 44, 47, 48]

def find_consecutive(lst, min_string=3):
    for k, g in groupby(enumerate(lst), lambda (i,x):i-x):
        num_string = map(itemgetter(1), g)
        if len(num_string) >= 3:
            yield num_string

for i in combinations(data, 8):
    if not any(find_consecutive(i, min_string=3)):
        print i 
```

返回：

```
(1, 3, 5, 6, 8, 9, 15, 19)
(1, 3, 5, 6, 8, 9, 15, 20)
(1, 3, 5, 6, 8, 9, 15, 22)
(1, 3, 5, 6, 8, 9, 15, 23)
(1, 3, 5, 6, 8, 9, 15, 24) 
```

……等等等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T04:36:07.773

这是计算差异的一种方法（类似于 numpy's [`diff`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.diff.html)）：

```
def diff(lst):
    return map(lambda x,y: y-x, lst[:-1],lst[1:])

def remove_consecutive(lst):
    previous = None
    for i, current in enumerate(diff(lst)):
        if previous != 1 and current != 1:
            yield lst[i]
        previous = current
    if current != 1:
        yield lst[-1]

list(remove_consecutive([1, 5, 9, 22, 23, 24, 33, 37]))
# [1, 5, 9, 33, 37] 
```

*仅当前一个差值和下一个差值都不为 1 时，该项目才不是连续的。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T04:30:32.887

这可能不会赢得任何效率奖，但您会获得列表理解的风格点数。

这就是我解决问题的方式。列出大小为 3 的滑动窗口。

```
>>> nums = [1, 3, 5, 6, 7, 8, 9, 10, 15, 19, 20, 22, 23, 24, 26, 27, 28, 32, 33, 35, 37, 38, 39, 40, 41, 42, 43, 44, 47, 48]
>>> [nums[i:i+3] for i in xrange(len(nums))]
[[1, 3, 5], [3, 5, 6], [5, 6, 7], [6, 7, 8], [7, 8, 9], [8, 9, 10], [9, 10, 15], [10, 15, 19], [15, 19, 20], [19, 20, 22], [20, 22, 23], [22, 23, 24], [23, 24, 26], [24, 26, 27], [26, 27, 28], [27, 28, 32], [28, 32, 33], [32, 33, 35], [33, 35, 37], [35, 37, 38], [37, 38, 39], [38, 39, 40], [39, 40, 41], [40, 41, 42], [41, 42, 43], [42, 43, 44], [43, 44, 47], [44, 47, 48], [47, 48], [48]] 
```

下一步，摆脱连续的项目，现在这很容易。这个谓词将巧妙地过滤掉连续的项目。

```
>>> [nums[i] for i in xrange(len(nums)) if nums[i:i+3] != range(nums[i],nums[i]+3)]
[1, 3, 9, 10, 15, 19, 20, 23, 24, 27, 28, 32, 33, 35, 43, 44, 47, 48] 
```

编辑：

Eric 提出了一个很好的观点，上面的解决方案并不完全有效。如果你想让这个工作，那么谓词将需要一些加强。首先，我导出了这些方程。他们执行窗口操作。说服自己他们是真的：

```
a = [1,2,3,4,5]
i = 2
a[i-0:i+3] == range(a[i-0], a[i]+3) # left
a[i-1:i+2] == range(a[i-1], a[i]+2) # center
a[i-2:i+1] == range(a[i-2], a[i]+1) # right 
```

然后你*可以*把它塞到一边...

```
[a for i,a in enumerate(nums) if all(nums[i-j:i+k] != range(nums[i-j], nums[i]+k) for j,k in zip(xrange(0,3,1), xrange(3,0,-1)))] 
```

但是，如果您不想被击中，请将谓词拉出到一个函数中：

```
consec_to_buddies = lambda i, xs: (
    xs[i-0:i+3] == range(xs[i-0], xs[i]+3) or
    xs[i-1:i+2] == range(xs[i-1], xs[i]+2) or
    xs[i-2:i+1] == range(xs[i-2], xs[i]+1)
)

[a for i,a in enumerate(nums) if not consec_to_buddies(i, nums)] 
```

同样，这不是最有效的，因为您将计算每个项目的谓词，即使您已经知道要取出它。你为优雅付出的代价:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T04:32:35.023

不是`itemgetter`像 hexparrot 这样的巧妙技术，更接近 Balthamos 在他们的帖子中的做法。

```
sec = []
for combo in combo_lst:
    seq = combo[:]
    for i in combo:
        if list(combo[combo.index(i):combo.index(i)+3]) == range(i, i+3):
            break
        combo = combo[combo.index(i)+1:]
        if len(combo) == 0:
            sec.append(seq)
            break 
```

# css - 网页顶部的额外空白

> ID：13889192
> 
> 赞同：1
> 
> 时间：2012-12-15T04:04:04.383
> 
> 标签：css, whitespace, margin, removing-whitespace

我为我的网站创建了一个包装器 div 以包含正文的全部内容，但由于某种原因，我在包装器 div 上方有额外的空白。我无法准确指出为什么会这样。我为 body 和 wrapper div 设置了零填充和零边距：

```
<body onload="init()" style="margin:0px; padding:0px;">
<div id="wrapper" style="background-color:#000000; margin:0px; padding:0px;">
<div id="pagecontent">
<nav id="navlogo" style="margin:10px;">Some Navigation Stuff
</nav></div></div></body> 
```

（页面内容 Div 包含所有网页的元素并将它们居中。）我也有这个页面内容的 CSS：

```
#pagecontent
{
margin: 0px auto;
width: 1044px;
box-shadow:inset 0px 0px 15px black;
background-color:#000000;
} 
```

我尝试在包装器 div 上使用 -10px 的负边距，结果成功了；这是摆脱这个空白的唯一方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:14:28.397

`<nav id="navlogo" style="margin:10px;">`

此边距包括 margin-top:10px - 这就是问题所在。 `margin:10px;`=`margin-top:10px;margin-right:10px;margin-bottom:10px;margin-left:10px;`

要解决这个问题，您可以将其更改为：

```
margin:10px;margin-top:0; 
```

或使导航栏转到顶部只需更改`margin:10px;`为`padding:10px;`

# php - 有没有办法格式化电子邮件显示？

> ID：13889194
> 
> 赞同：1
> 
> 时间：2012-12-15T04:05:06.093
> 
> 标签：php, html-email

所有信息都来自一个表格。提交表单时，我使用 php`mail()`将所有信息发送到我的邮箱，但我不知道如何格式化提交表单中的所有信息。

有没有办法格式化显示为以下样式的电子邮件。

![在此处输入图像描述](../Images/e63ef1deca8d1fdf5fb0e8d0aca7a41d.png)

如果使用`mail()`可以得到，我该怎么做？或者还有其他方法可以得到，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:22:25.173

不要使用邮件（）。

而是使用 phpmailer 类。 [http://code.google.com/a/apache-extras.org/p/phpmailer/source/browse/trunk/class.phpmailer.php](http://code.google.com/a/apache-extras.org/p/phpmailer/source/browse/trunk/class.phpmailer.php) http://phpmailer.worxware.com/

您在代码中调用该类。

```
require "includes/class.phpmailer.php"; 
```

然后，您使用 HTML 和一些常识来格式化您的邮件字符串。要格式化您想要的方式，您可以使用 p 和换行符。图片，链接，大部分你认为在 html 中使用的东西。它对我来说效果很好。

提示：您不想包含外部 css，因此您的 html 可能必须有点老派，使用文本对齐和设置宽度使用样式。

编辑。调用包含

```
require "includes/class.phpmailer.php"; 
```

然后，设置一些变量，例如您的消息……进行格式化。

```
$mail = new PHPMailer();
$mail->IsMail();

$mail->AddReplyTo($emailAddress, "Your Reply Name");  // could be $replayemail if set
$mail->AddAddress($mailto);                           // who you are emailing  
$mail->SetFrom($emailAddress, "Your From Name");      // from email
$mail->Subject = $subject;                            // keep it simple, email header
$mail->MsgHTML($message);                             // format fun stuff in $message 
$mail->Send(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:07:11.863

Set the headers like this

```
$headers = "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
mail($to,$subject,$message,$headers); 
```

This would allow you to send html in mail.You can apply styling too.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T04:11:18.073

您需要了解 PHP HTML 邮件。

IMO PHP 初学者最好的学校：http: [//www.w3schools.com/php/func_mail_mail.asp](http://www.w3schools.com/php/func_mail_mail.asp)

# c++ - 带有 VS2012 的 OpenCV（Qt 支持）

> ID：13889197
> 
> 赞同：0
> 
> 时间：2012-12-15T04:05:17.337
> 
> 标签：c++, opencv, visual-studio-2012

我正在尝试按照本[手册](http://docs.opencv.org/trunk/doc/tutorials/introduction/windows_install/windows_install.html)在 Windows 32 位上构建 OpenCV 。

*   VS2012 作为 IDE。
*   Qt 支持（根据教程从源代码构建）。
*   芬克斯文档。
*   试图包含 CUDA 支持，但目前它与 VS2012 不兼容。

一切都很好，直到我使用从 cmake 创建的解决方案文件进入构建部分。对于大多数模块，我收到以下错误：

**链接：致命错误 LNK1104：无法打开文件 '....\lib\Debug\opencv_core249d.lib'**

使用不同的文件，但总是错误 LNK1104。

编译完成后，最终结果如下：

构建完成。9 次成功，245 次失败，7 次更新，0 次跳过。

底线，我无法在 vs2012 上构建 opencv，有人有这方面的教程或提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T18:52:03.673

你确定你使用的是 Opencv2.4.9 吗？opencv_core249d.lib 表示您正在使用它。我要发一篇关于如何在VS2012上构建opencv2.4.3的教程，过几天你可以来我的博客。我打算在这个周末发布它。我的博文是[如何使用 Visual Studio 2012 编译 opencv 2.4.3 x86 和 x64](http://www.ycshao.com/?p=668)

# html - PHP避免浏览器在页面刷新时重新发布$_POST？

> ID：13889198
> 
> 赞同：6
> 
> 时间：2012-12-15T04:05:19.143
> 
> 标签：html, post, refresh

我想知道我可以使用哪些技术来避免用户在刷新页面并再次选择提交时两次发布表单？

例如，我在**regiter.php**中有表格，并在**register.php 中处理它。**

**第一次**我可以在另一个文件中处理，例如**register_process.php**并重定向到 register.php，但是我必须创建大约 20 个新页面并重新定位大量代码，我不想要那个选项。

**第二**，我可以玩，`headers`我不记得确切的技巧，但有一些糟糕的体验 - 用户在刷新页面后看到旧数据......

**第三**，我可以在成功后重定向到一些**dummy.php**并从**dummy.php**跳转回**register.php**然后即使他们刷新页面浏览器也不会重新发布，但是它不能使用**后退按钮**并选择重新来防止他们发布，我知道我可以使页面过期，但我发现我和其他用户可能会看到页面过期错误的烦人体验。

**第四**，在页面加载后为每个表单使用一些唯一的“访问密钥”，该页面将与表单一起发布，并且一旦使用就不能重复使用，但是我对该功能的逻辑有点挣扎。如何知道密钥在没有存储在 MySQL DB 的情况下被使用，我认为基于时间的访问也不是很好，因为有些用户在页面打开和表单提交之间可能需要很长时间。

我需要更多关于如何避免用户再次提交表单的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T04:25:02.893

试试这个：

```
<?php
session_start();
if( strcasecmp($_SERVER['REQUEST_METHOD'],"POST") === 0) {
  $_SESSION['postdata'] = $_POST;
  header("Location: ".$_SERVER['PHP_SELF']."?".$_SERVER['QUERY_STRING']);
  exit;
}
if( isset($_SESSION['postdata'])) {
  $_POST = $_SESSION['postdata'];
  unset($_SESSION['postdata']);
} 
```

这基本上会保存 POST 数据并导致浏览器重新请求为 GET 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T04:12:32.270

第五。使用 AJAX 或 jQuery，当在页面上单击表单时，在后台提交该数据。向屏幕输出响应。将该表单标记为已提交，或保存到会话中，当他们刷新时，他们将无法再次提交表单。

在我看来，无论如何，这是最好的方法。我有一个包含 20 个或更多表格的记分牌，它可以很好地发送数据而无需刷新。您可以返回响应并使页面看起来非常专业。使用 jQuery，您还可以使用一些很棒的表单验证来确保他们正在提交所需的字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-04T14:41:34.797

我认为最好的解决方案是这样的：
* 创建一个 md5 或 base64 的已发布数据
* 将此哈希与会话变量进行比较（我们称之为 $_SESSION['repost']）
* 如果哈希匹配，则跳过此保存应该做并输出警告
* 如果哈希不匹配，或者哈希不存在
* 用当前哈希分配会话变量
* 做任何保存应该做的事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T04:22:29.107

当您考虑第一个选项时，我不知道您网站的设计（编程设计^^），但您应该只需要一页。假设您使用所有参数调用redirect.php，您应该调用您的控制器，并且您的控制器应该知道无论参数如何处理它们。

在编程时能够进行一些抽象和良好的设计是一个好习惯，在这种情况下它有很大帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-29T16:35:42.907

另一种方法是将最后一个帖子存储在会话变量中，并检查是否相等，如下所示：

```
<?php
... program ...
if ($_SESSION['PREPOST'] == $_POST) {
    // DO SOMETHING
}
... program ...
$_SESSION['PREPOST'] = $_POST;
?> 
```

# jenkins - 如何在远程 jenkins/hudson 上配置本地 ant 脚本

> ID：13889199
> 
> 赞同：-1
> 
> 时间：2012-12-15T04:05:23.497
> 
> 标签：jenkins

我的本地系统中有一个 build.xml 文件。如何在 jenkins/hudson 服务中配置相同的内容，存在于远程服务器中。如果主/从概念是唯一的方法，任何人都可以给出详细的配置步骤吗？注意：我的本地系统在 windows 平台下运行，jenkins 存在于 linux 服务器机器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:39:42.560

通常，您从某个版本控制系统获取源代码。您应该将构建文件放入同一个版本控制系统中，以便它可以被 Jenkins 签出和运行。

# c# - 在 C# 中使用 set 方法添加数据时遇到问题

> ID：13889202
> 
> 赞同：0
> 
> 时间：2012-12-15T04:06:29.060
> 
> 标签：c#

您好，我正在尝试处理应用程序打开 .csv 文件并从中读取数据并在静态地图中显示不同点的项目。我还想为用户添加一个选项，以在数据列表中添加纬度、经度等。应用程序中的 Listview 仅在打开 .csv 文件时出现。但我很难将新的 gps 点添加到 .csv 文件。我的代码在这里给出

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;

namespace CourseworkExample
{
    public partial class Form1 : Form
    {
        public GPSDataPoint gpsdp;
        List<GPSDataPoint> data;
        List<PictureBox> pictures;
        List<TabPage> tabs;
        public static int pn = 0;
        private TabPage currentComponent;
        private Bitmap bmp1;
        string[] symbols = {  "hospital", "university" };
        Image[] symbolImages;
        ListBox lb = new ListBox();

        public Form1()
        {
            InitializeComponent();
            data = new List<GPSDataPoint>();
            pictures = new List<PictureBox>();
            tabs = new List<TabPage>();
            symbolImages = new Image[symbols.Length];
            for (int i = 0; i < 2; i++)
            {
                string location = "data/" + symbols[i] + ".png";
                symbolImages[i] = Image.FromFile(location);

            }
        }

        private void openToolStripMenuItem_Click(object sender, EventArgs e)
        {
            FileDialog ofd = new OpenFileDialog();
            string filter = "CSV File (*.csv)|*.csv";
            ofd.Filter = filter;
            DialogResult dr = ofd.ShowDialog();
            if (dr.Equals(DialogResult.OK))
            {
                int i = ofd.FileName.LastIndexOf("\\");

                string name = ofd.FileName;
                string path = ofd.FileName;
                if (i > 0)
                {
                    name = ofd.FileName.Substring(i + 1);
                    path = ofd.FileName.Substring(0, i + 1);
                }
                TextReader input = new StreamReader(ofd.FileName);
                string mapName = input.ReadLine();
                GPSDataPoint gpsD = new GPSDataPoint();
                gpsD.setBounds(input.ReadLine());
                string s;
                while ((s = input.ReadLine()) != null)
                {
                    gpsD.addWaypoint(s);
                }
                input.Close();
                TabPage tabPage = new TabPage();
                tabPage.Location = new System.Drawing.Point(4, 22);
                tabPage.Name = "tabPage" + pn;
                ListBox lb = new ListBox();
                lb.Width = 300;
                int selectedindex = lb.SelectedIndex;

                lb.Items.Add(mapName);
                lb.Items.Add("Bounds");
                lb.Items.Add(gpsD.Bounds[0] + " " + gpsD.Bounds[1] + " " + gpsD.Bounds[2] + " " + gpsD.Bounds[3]);
                lb.Items.Add("Waypoint");
                foreach (WayPoint wp in gpsD.DataList)
                {
                    lb.Items.Add(wp.Name + " " + wp.Latitude + " " + wp.Longitude + " " + wp.Ele + " " + wp.Sym);
                }
                tabPage.Controls.Add(lb);
                pn++;
                tabPage.Padding = new System.Windows.Forms.Padding(3);
                tabPage.Size = new System.Drawing.Size(192, 74);
                tabPage.TabIndex = 0;
                tabPage.Text = name;
                tabPage.UseVisualStyleBackColor = true;
                tabs.Add(tabPage);
                tabControl1.Controls.Add(tabPage);
                tabPage = new TabPage();
                tabPage.Location = new System.Drawing.Point(4, 22);
                tabPage.Name = "tabPage" + pn;
                pn++;
                tabPage.Padding = new System.Windows.Forms.Padding(3);
                tabPage.Size = new System.Drawing.Size(192, 74);
                tabPage.TabIndex = 0;
                tabPage.Text = mapName;
                string location = path + mapName;
                tabPage.UseVisualStyleBackColor = true;
                tabs.Add(tabPage);
                PictureBox pb = new PictureBox();
                pb.Name = "pictureBox" + pn;
                pb.Image = Image.FromFile(location);
                tabControl2.Controls.Add(tabPage);
                pb.Width = pb.Image.Width;
                pb.Height = pb.Image.Height;
                tabPage.Controls.Add(pb);
                currentComponent = tabPage;
                tabPage.Width = pb.Width;
                tabPage.Height = pb.Height;
                pn++;
                tabControl2.Width = pb.Width;
                tabControl2.Height = pb.Height;
                bmp1 = (Bitmap)pb.Image;
                int lx, ly;
                float realWidth = gpsD.Bounds[1] - gpsD.Bounds[3];
                float imageW = pb.Image.Width;
                float dx = imageW * (gpsD.Bounds[1] - gpsD.getWayPoint(0).Longitude) / realWidth;
                float realHeight = gpsD.Bounds[0] - gpsD.Bounds[2];
                float imageH = pb.Image.Height;
                float dy = imageH * (gpsD.Bounds[0] - gpsD.getWayPoint(0).Latitude) / realHeight;
                lx = (int)dx;
                ly = (int)dy;

                using (Graphics g = Graphics.FromImage(bmp1))
                {
                    Rectangle rect = new Rectangle(lx, ly, 20, 20);
                    if (gpsD.getWayPoint(0).Sym.Equals(""))
                    {
                        g.DrawRectangle(new Pen(Color.Red), rect);
                    }
                    else
                    {
                        if (gpsD.getWayPoint(0).Sym.Equals("hospital"))
                        {
                            g.DrawImage(symbolImages[0], rect);
                        }
                        else
                        {
                            if (gpsD.getWayPoint(0).Sym.Equals("university"))
                            {
                                g.DrawImage(symbolImages[1], rect);
                            }
                        }
                    }
                }
                pb.Image = bmp1;
                pb.Invalidate();

            }
        }

        private void openToolStripMenuItem_Click_1(object sender, EventArgs e)
        {
            FileDialog ofd = new OpenFileDialog();
            string filter = "CSV File (*.csv)|*.csv";
            ofd.Filter = filter;
            DialogResult dr = ofd.ShowDialog();
            if (dr.Equals(DialogResult.OK))
            {
                int i = ofd.FileName.LastIndexOf("\\");

                string name = ofd.FileName;
                string path = ofd.FileName;
                if (i > 0)
                {
                    name = ofd.FileName.Substring(i + 1);
                    path = ofd.FileName.Substring(0, i + 1);
                }
                TextReader input = new StreamReader(ofd.FileName);
                string mapName = input.ReadLine();
                GPSDataPoint gpsD = new GPSDataPoint();
                gpsD.setBounds(input.ReadLine());
                string s;
                while ((s = input.ReadLine()) != null)
                {
                    gpsD.addWaypoint(s);
                }
                input.Close();
                TabPage tabPage = new TabPage();
                tabPage.Location = new System.Drawing.Point(4, 22);
                tabPage.Name = "tabPage" + pn;
                ListBox lb = new ListBox();
                lb.Width = 300;
                lb.Items.Add(mapName);
                lb.Items.Add("Bounds");
                lb.Items.Add(gpsD.Bounds[0] + " " + gpsD.Bounds[1] + " " + gpsD.Bounds[2] + " " + gpsD.Bounds[3]);
                lb.Items.Add("Waypoint");
                foreach (WayPoint wp in gpsD.DataList)
                {
                    lb.Items.Add(wp.Name + " " + wp.Latitude + " " + wp.Longitude + " " + wp.Ele + " " + wp.Sym);
                }
                tabPage.Controls.Add(lb);
                pn++;
                tabPage.Padding = new System.Windows.Forms.Padding(3);
                tabPage.Size = new System.Drawing.Size(192, 74);
                tabPage.TabIndex = 0;
                tabPage.Text = name;
                tabPage.UseVisualStyleBackColor = true;
                tabs.Add(tabPage);
                tabControl1.Controls.Add(tabPage);
                tabPage = new TabPage();
                tabPage.Location = new System.Drawing.Point(4, 22);
                tabPage.Name = "tabPage" + pn;
                pn++;
                tabPage.Padding = new System.Windows.Forms.Padding(3);
                tabPage.Size = new System.Drawing.Size(192, 74);
                tabPage.TabIndex = 0;
                tabPage.Text = mapName;
                string location = path + mapName;
                tabPage.UseVisualStyleBackColor = true;
                tabs.Add(tabPage);
                PictureBox pb = new PictureBox();
                pb.Name = "pictureBox" + pn;
                pb.Image = Image.FromFile(location);
                tabControl2.Controls.Add(tabPage);
                pb.Width = pb.Image.Width;
                pb.Height = pb.Image.Height;
                tabPage.Controls.Add(pb);
                currentComponent = tabPage;
                tabPage.Width = pb.Width;
                tabPage.Height = pb.Height;
                pn++;
                tabControl2.Width = pb.Width;
                tabControl2.Height = pb.Height;
                bmp1 = (Bitmap)pb.Image;
                int lx, ly;
                float realWidth = gpsD.Bounds[1] - gpsD.Bounds[3];
                float imageW = pb.Image.Width;
                float dx = imageW * (gpsD.Bounds[1] - gpsD.getWayPoint(0).Longitude) / realWidth;
                float realHeight = gpsD.Bounds[0] - gpsD.Bounds[2];
                float imageH = pb.Image.Height;
                float dy = imageH * (gpsD.Bounds[0] - gpsD.getWayPoint(0).Latitude) / realHeight;
                lx = (int)dx;
                ly = (int)dy;

                using (Graphics g = Graphics.FromImage(bmp1))
                {
                    Rectangle rect = new Rectangle(lx, ly, 20, 20);
                    if (gpsD.getWayPoint(0).Sym.Equals(""))
                    {
                        g.DrawRectangle(new Pen(Color.Red), rect);
                    }
                    else
                    {
                        if (gpsD.getWayPoint(0).Sym.Equals("hospital"))
                        {
                            g.DrawImage(symbolImages[0], rect);
                        }
                        else
                        {
                            if (gpsD.getWayPoint(0).Sym.Equals("university"))
                            {
                                g.DrawImage(symbolImages[1], rect);
                            }
                        }
                    }
                }
                pb.Image = bmp1;
                pb.Invalidate();

            }

        }

        private void exitToolStripMenuItem_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void addBtn_Click(object sender, EventArgs e)
        {

            string wayName = nameTxtBox.Text;

            double lat = Convert.ToDouble( latTxtBox.Text);
            float wayLat = (float)lat;

            double lon = Convert.ToDouble( longTxtBox.Text);
            float wayLong = (float)lon;

            double ele = Convert.ToDouble(elevTxtBox.Text);
            float wayEle = (float)ele;

            WayPoint wp = new WayPoint(wayName, wayLat, wayLong, wayEle);

            GPSDataPoint.Add(wp);
         }

        private void lb_SelectedIndexChanged(object sender, System.EventArgs e)
        {
            MessageBox.Show(lb.SelectedIndex.ToString());
        }
    }
} 
```

GPSDataPoint.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CourseworkExample
{
    public class GPSDataPoint
    {
        private float[] bounds;
        private List<WayPoint> dataList;
        public GPSDataPoint()
        {
            dataList = new List<WayPoint>();
        }
        internal void setBounds(string p)
        {
            string[] b = p.Split(',');
            bounds = new float[b.Length];
            for (int i = 0; i < b.Length; i++)
            {
                bounds[i] = Convert.ToSingle(b[i]);
            }
        }
        public float[] Bounds { get { return bounds; } }
        internal void addWaypoint(string s)
        {
            WayPoint wp = new WayPoint(s);
            dataList.Add(wp);
        }
        public WayPoint getWayPoint(int i)
        {
            if (i < dataList.Count)
            {
                return dataList[i];
            }
            else
                return null;
        }
        public List<WayPoint> DataList { get { return dataList; } }

        internal void Add(WayPoint wp)
        {
          //  dataList.Add(wp);
        }
    }
} 
```

航点.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CourseworkExample
{
    public class WayPoint
    {
        private string name;
        private float ele;
        private float latitude;
        private float longitude;
        private string sym;

        public WayPoint(string name, float latitude, float longitude, float elevation)
        {
            this.name = name;
            this.latitude = latitude;
            this.longitude = longitude;
            this.ele = elevation;
        }

        public WayPoint()
        {
            name = "no name";
            ele = 3.5F;
            latitude = 3.5F;
            longitude = 0.0F;
            sym = "no symbol";

        }

        public WayPoint(string s)
        {
            string[] bits = s.Split(',');
            name = bits[0];
            longitude = Convert.ToSingle(bits[2]);
            latitude = Convert.ToSingle(bits[1]);
            if (bits.Length > 4)
                sym = bits[4];
            else
                sym = "";
            try
            {
                ele = Convert.ToSingle(bits[3]);
            }
            catch (Exception e)
            {
                ele = 0.0f;
            }
        }

        public float Longitude
        {
            get { return longitude; }

            set { longitude = value; }
        }

        public float Latitude 
        {
            get { return latitude; }
            set { latitude = value; }

        }

        public float Ele 
        {   
            get { return ele; }
            set { ele = value; }
        }
        public string Name 
        {

            get { return name; }
            set { name = value; }

        }

        public string Sym
        {   
            get { return sym; }
            set { sym = value; }        
        }
    }
} 
```

此外，.csv 文件看起来像

出生地.png 51.483788,-0.351906,51.460745,-0.302982 出生在这里,51.473805,-0.32532,-,医院 出生在这里,51.473805,-0.32532,-,医院

每当我想使用 GPSDataPoint.Add(wp); 时，我都会收到错误消息。我一定是在犯非常愚蠢的错误，但我看不到。请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T04:53:11.983

您需要更改以下功能：

```
private void addBtn_Click(object sender, EventArgs e)
    {

        string wayName = nameTxtBox.Text;

        double lat = Convert.ToDouble( latTxtBox.Text);
        float wayLat = (float)lat;

        double lon = Convert.ToDouble( longTxtBox.Text);
        float wayLong = (float)lon;

        double ele = Convert.ToDouble(elevTxtBox.Text);
        float wayEle = (float)ele;

        WayPoint wp = new WayPoint(wayName, wayLat, wayLong, wayEle);

        GPSDataPoint gdp = new GPSDataPoint();
        gdp.Add(wp);

        //Do something with your gdp variable or use the public on you have declared instead
        //gpsdp.Add(wp);
     } 
```

# jsf-2 - 是否可以恢复到默认的 Windows 外观/主题？

> ID：13889203
> 
> 赞同：0
> 
> 时间：2012-12-15T04:07:00.957
> 
> 标签：jsf-2, primefaces, themes

是否可以“关闭”或“禁用”当前/默认 Primefaces 主题并使用本机**Windows**主题？

如果是这样，如何做到这一点？

--例如，我试图找到一种简单的方法来恢复标准的 Windows***按钮***样式/形状。

感谢您的任何帮助/指导。

s

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T12:43:22.087

简短的回答是否定的。

更长的答案是 Primefaces 带有一组主题（您可以在[http://primefaces.org/themes.html](http://primefaces.org/themes.html)找到列表）。如果您不喜欢其中任何一个，您可以使用 ThemeRoller 创建您自己的 (http://jqueryui.com/themeroller/)。Primefaces 文档中有一个“操作方法”。最新版本 (3.4) 可在[http://primefaces.googlecode.com/files/primefaces_users_guide_3_4.pdf获得，或者您可以在](http://primefaces.googlecode.com/files/primefaces_users_guide_3_4.pdf)[http://primefaces.org/documentation.html](http://primefaces.org/documentation.html)获得另一个版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:33:07.997

您可以通过设置以下上下文参数来关闭所有 primefaces 样式

```
 <context-param>
     <param-name>primefaces.THEME</param-name>
     <param-value>none</param-value>
   </context-param> 
```

在您的 web.xml 中。另请参阅primefaces的团队负责人Cagatay的[这个答案](https://stackoverflow.com/a/10162179/1530938)

# templates - 如何使用 itext 将表中的金额设置为事件？

> ID：13889214
> 
> 赞同：0
> 
> 时间：2012-12-15T04:09:39.440
> 
> 标签：templates, events, event-handling, itext

我可以知道如何设置我作为事件插入 Pdf 表的金额吗？我需要项目数量才能按页面获取总数并显示在页面底部。但是我现在所做的是在 SQL 执行期间设置数据将直接插入到表中的数量。一旦表格完成，然后添加到文档中。结果，我得到了该项目的全部金额，而不是逐页事件，尽管我尝试使用`onEndPage()`. 我想在模板上创建表格，但我不知道将表格插入模板以及如何检索行行号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:11:34.623

您需要一个`TotalAmount`对象和两个不同的单元格事件。

该`TotalAmount`对象应该有一个变量（例如`amount`）和两个或三个方法`addAmount()`：`getAmount()`和`resetAmount()`。

`TotalAmount`使用对象和*数量*作为参数创建第一种类型的单元格事件。将*金额*添加到*layout()*方法中`TotalAmount`。该方法将在绘制体细胞时触发。

 *`TotalAmount`以对象为参数创建第二种类型的单元格事件。将此单元格事件用于空的页脚单元格。使用返回的`getAmount()`值在`layout()`方法中绘制该值。`resetAmount()`如果页脚中显示的总数不是累积的，请使用该方法。

创建表格时，表格对象不知道分页。事件仅在绘制单元格时触发，而不是在您创建表格时触发。这就是为什么您不能在创建表格时添加金额。*

# youtube-api - Youtube API V3 - 如何过滤掉在我的国家无法访问的搜索结果？

> ID：13889221
> 
> 赞同：2
> 
> 时间：2012-12-15T04:11:17.503
> 
> 标签：youtube-api

到目前为止，我一直在使用 v2 API 将搜索查询从 Windows 语音识别发送到 Youtube，然后将最高相关性结果的 URL 直接发送到 VLC 媒体播放器。现在这并不总是那么好用，因为语音识别当然有些不准确。然而，真正让我恼火的是，只要查询中出现一个微小的拼写错误，v2 API 就会呈现完全随机的结果，例如 Poets of the Fall - waar 会导致一些越南战争视频（与正常情况相反youtube 网站，即使在带有拼写错误的引号中，结果仍然是相关的。

经过一些研究，我发现这是 v2 API 的一个常见问题（与普通 youtube 搜索的结果截然不同），但是使用 v3 API 这个问题已经解决了，所以我给自己弄了一个 API 访问密钥并更改了我的WSR 宏使用 v3 之一。除了一件事之外，一切都运行良好：v3 API 有时会显示在我的国家/地区不可用的结果。v2 API 从未发生过这种情况。我已经非常彻底地检查了文档，但我找不到一种方法让搜索查询只发回我实际可以观看的视频。这对我来说似乎是一个很大的疏忽......

这是我目前使用的 API 查询：“https://www.googleapis.com/youtube/v3/search?part=snippet&q=Justin%20Bieber%20is%20the%20best&key=myAPIkey&type=video”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-25T14:05:53.993

你可以试试 regionCode 参数。根据文档：

> **regionCode** string regionCode参数指示API返回指定国家的搜索结果。参数值为 ISO 3166-1 alpha-2 国家代码

.

# android - 在 Android 上使用 XML 以编程方式创建视图

> ID：13889225
> 
> 赞同：35
> 
> 时间：2012-12-15T04:12:22.567
> 
> 标签：android, xml

我想在 XML 中创建一个 UI 布局并将其作为子项插入到现有视图中（它将被插入多次）。

例如，以下是 XML 文件将包含的内容：

```
<RelativeLayout
    android:id="@+id/relativeLayout1" >
    <Button android:id="@+id/myButton"
        android:text="@string/mystring" />
</RelativeLayout> 
```

现在我得到了父`LinearLayout`视图，现在想将该 XML 文件添加为子视图，例如：

```
LinearLayout linear = (LinearLayout) findViewById(R.id.myLayout);

// need to create a view object from the xml file
linear.addView(myXmlObject); 
```

是否可以将 XML 资源转换为视图类型？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-15T04:19:23.863

我相信你想要[LayoutInflater](http://developer.android.com/reference/android/view/LayoutInflater.html)。假设您的示例 XML 在文件中`custom_layout.xml`：

```
LayoutInflater inflater = LayoutInflater.from(context);
RelativeLayout layout = (RelativeLayout) inflater.inflate(R.layout.custom_layout, null, false);

LinearLayout linear = (LinearLayout)findViewById(R.id.myLayout);
linear.addView(layout); 
```

# tsql - 按/超过分区

> ID：13889229
> 
> 赞同：0
> 
> 时间：2012-12-15T04:13:08.843
> 
> 标签：tsql

需要识别每个成员在团队字段中出现的“a”和出现日期（作为一个组）。一个数据样本如下：

```
**member & date**|                    **Team**
a010112|                                  a
a010112|                                  b   
a010112|                                  c  
a010112|                                  d
b010112|                                  b
b010112|                                  b
c010112|                                  a
c010112|                                  b
c010112|                                  c 
```

期望的结果如下：

```
**member & date|                   **team**|       **Occurrence of 'a' per member & date**
a010112|                                  a|             yes
a010112|                                  b|             yes
a010112|                                  c|             yes
a010112|                                  d|             yes
b010112|                                  b|             no
b010112|                                  b|             no
c010112|                                  a|             yes
c010112|                                  b|             yes
c010112|                                  c|             yes 
```

计算字段 - 每个成员和日期分组的“a”的出现是通过案例语句/分区/结束的数据仓库查询的计算字段。可以为所需的语法提供一些帮助吗？

谢谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:07:32.020

尝试这个

```
Declare @t Table ([Member and Date] Varchar(50), Team Varchar(10))
Insert Into @t Values
    ('a010112','a'),('a010112','b'),('a010112','c'),('a010112','d'),
    ('b010112','b'),('b010112','b'),
    ('c010112','a'),('c010112','b'),('c010112','c')

SELECT
    x.[Member and Date]
    ,x.[Team]   
    ,[Occurrence of 'a' per member & date] = CASE WHEN y.[Member and Date] IS NULL THEN 'No' ELSE 'Yes' END

From @t x
Left Join(Select Distinct [Member and Date]
     From @t Where Team = 'a')y
On x.[Member and Date] = y.[Member and Date] 
```

![在此处输入图像描述](../Images/91b0d9f0720e94422aa324d1c446adcb.png)

# python - 如何将字符串日期间隔转换为天数或秒数（ISO_8601）？

> ID：13889230
> 
> 赞同：3
> 
> 时间：2012-12-15T04:13:13.497
> 
> 标签：python

python中是否有一种简单的方法来转换日期间隔的字符串表示：

```
P1M 
```

到时间戳或日期时间对象？

基本上我需要根据这个 ISO 处理日期间隔：[http ://en.wikipedia.org/wiki/ISO_8601](http://en.wikipedia.org/wiki/ISO_8601)

类似于[http://php.net/manual/en/class.dateinterval.php](http://php.net/manual/en/class.dateinterval.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T04:36:12.750

[似乎有一个名为isodate](http://pypi.python.org/pypi/isodate/)的第三方模块可以做你想做的事：

```
In [1]: from isodate import parse_duration

In [2]: parse_duration('P1M')
Out[2]: isodate.duration.Duration(0, 0, 0, years=0, months=1) 
```

如有必要，您还可以将此对象转换为`datetime.timedelta`对象（提供`start`or`end`参数以便可以根据提供的日期计算正确的持续时间）：

```
In [8]: import datetime

In [9]: d = parse_duration('P1M')

In [10]: d.todatetime(start=datetime.datetime.today())
Out[10]: datetime.timedelta(31) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:19:48.427

如果您知道字符串表示的结构，您可以使用`time`模块的`strftime`和`strptime`

```
import time
sdate = 'Sat, 15 Dec 2012 04:01:02'
timestamp = time.strftime("%s", time.strptime(sdate, '%a, %b %d %H:%M:%S'))) 
```

有用的网站：[http ://strftime.org/](http://strftime.org/)

# listview - WinJS ListView 动态分组

> ID：13889232
> 
> 赞同：1
> 
> 时间：2012-12-15T04:13:34.497
> 
> 标签：listview, grouping, winjs

我有一个非常标准的 WinJS ListView 设置来绑定到一些分组数据。

根据应用程序设置，我想更改是否显示分组。我可以通过检查页面何时加载并跳过设置分组属性来部分做到这一点，如下所示：

```
 if (!Data.getCategoryGrouping()) {
                var content = element.querySelector(".itemspage");
                content.className += " noGroup";
                listView.groupHeaderTemplate = null;
                listView.groupDataSource = null;
            }
            else {
                listView.groupHeaderTemplate = element.querySelector(".headerTemplate");
                listView.groupDataSource = Data.groups.dataSource;
            } 
```

但是，在页面已经可见并且用户调整设置的情况下，这无济于事。（老实说，这可能不是最好的方法。）

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:48:42.420

页面加载后，您可以将 groupDataSource 清空以关闭分组。像这样...

```
q("#myButton").onclick = function(e) {
    myListView.groupDataSource = null;
}; 
```

你可以像这样用那个按钮来切换它......

```
q("#myButton").onclick = function(e) {
    if (myListView.groupDataSource != null) myListView.groupDataSource = null;
    else { myListView.groupDataSource = myGroupedList.groups.dataSource; }
}; 
```

顺便说一句，`content.className += " noGroup";`我建议您使用`content.classList.add("noGroup");`.

# lua - LuaJIT vs luac 用于自定义 Lua 字节码解释器

> ID：13889237
> 
> 赞同：2
> 
> 时间：2012-12-15T04:15:01.113
> 
> 标签：lua, interpreter, bytecode, luajit

相关：[标准 Lua 字节码和 LuaJIT 字节码的区别](https://stackoverflow.com/questions/8623052/differences-between-standard-lua-bytecode-and-luajit-bytecode)

我正在编写一个 Lua 字节码解释器，我试图在 LuaJIT 和 luac 之间做出决定以生成初始字节码。由于我正在编写解释器，因此我不会获得任何 JIT 性能，所以这一切都归结为编译器的质量和生成的字节码的设计。

任何一个编译器都明显更好吗？

我在 Dart 中写这个（也是解释的），所以任何来自编译器的免费优化都是值得赞赏的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T09:01:52.320

我会选择 LuaJIT 字节码。Mike Pall 写道，与标准 Lua 字节码相比，[LuaJIT 字节码要小 40%](http://lua-users.org/lists/lua-l/2011-06/msg01052.html)。此外，Tim Caswell（node.js 的贡献者）[宣布](http://article.gmane.org/gmane.comp.lang.lua.general/95495)了一个名为[brozula](https://github.com/creationix/brozula/)的新项目，它允许您将 LuaJIT 字节码转换为 JavaScript 并在浏览器中执行，因此请访问项目站点以获得一些灵感。

# git - 如何使用 stash 删除然后恢复非索引更改，而不会在 git 中发生合并冲突？

> ID：13889242
> 
> 赞同：9
> 
> 时间：2012-12-15T04:15:49.107
> 
> 标签：git, bash

我希望能够使用索引的当前状态为我的项目运行测试，忽略未提交的工作更改（我稍后计划将其添加到预提交挂钩）。但是，我无法弄清楚如何以永远不会导致合并冲突的方式删除然后恢复非索引更改。我需要这个，因为它是由脚本运行的，所以它不应该在完成后改变存储库状态。

`git stash --include-untracked --keep-index`并`git stash pop`接近，但在许多情况下，它会导致合并冲突，即使两个命令之间没有进行任何更改。

例如：

```
mkdir project; cd project; git init .;

# setup the initial project with file.rb and test.rb
cat > file.rb <<EOF
def func()
  return 42
end
EOF

cat > test.rb <<EOF
#!/usr/bin/env ruby
load './file.rb'
if (func() == 42)
  puts "Tests passed"
  exit 0
else
  puts "Tests failed"
  exit 1
end
EOF

chmod +x test.rb
git add .
git commit -m "Initial commit"

# now change file.rb and add the change
cat > file.rb <<EOF
def func()
  return 10 + 32
end
EOF
git add file.rb

# now make a breaking change to func, and don't add the change
cat > file.rb <<EOF
def func()
  return 20 + 32 # not 42 anymore...
end 
EOF 
```

从这里我想针对索引的当前状态运行测试，并恢复未提交的更改。预期结果是测试通过，因为重大更改未添加到索引中。

以下命令不起作用：

```
git commit --include-untracked --keep-index
./test.rb
git stash pop 
```

问题发生在`git stash pop`- 发生合并冲突。

我能想到的唯一其他解决方案是进行临时提交，然后存储剩余的更改，然后使用 回滚提交`git reset --soft HEAD~`，然后弹出存储。然而，这都很麻烦，而且我不确定在预提交挂钩中运行有多安全。

这个问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-01T00:56:34.577

和你一样，我跑

```
git stash --keep-index --include-untracked 
```

然后我可以运行测试等等。

下一部分很棘手。这些是我尝试过的一些事情：

*   `git stash pop`可能会因冲突而失败，这是不可接受的。
*   `git stash pop --index`可能会因冲突而失败，这是不可接受的。
*   `git checkout stash -- .`应用所有跟踪的更改（良好），但也将它们暂存（不可接受），并且不会从存储中恢复未跟踪的文件（不可接受）。藏匿处仍然存在（很好——我可以`git stash drop`）。
*   `git merge --squash --strategy-option=theirs stash`可能会因冲突而失败，这是不可接受的，即使没有冲突，它也不会从存储中恢复未跟踪的文件（不可接受）。
*   `git stash && git stash pop stash@{1} && git stash pop`（尝试以相反的顺序应用变更集）可能会因冲突而失败，这是不可接受的。

但是我发现了一组命令可以满足我们的要求：

```
# Stash what we actually want to commit
git stash
# Unstash the original dirty tree including any untracked files
git stash pop stash@{1}
# Replace the current index with that from the stash which contains only what we want to commit
git read-tree stash
# Drop the temporary stash of what we want to commit (we have it all in working tree now)
git stash drop 
```

为了减少输出，并浓缩为一行：

```
git stash --quiet && git stash pop --quiet stash@{1} && git read-tree stash && git stash drop --quiet 
```

据我所知，唯一不能恢复的是在索引中添加然后从工作树中删除的文件（它们最终会被添加并呈现）和在索引中重命名的文件和然后从工作树中删除（相同的结果）。出于这个原因，我们需要在初始存储之前查找与这两种情况匹配的文件，`git status -z | egrep -z '^[AR]D' | cut -z -c 4- | tr '\0' '\n'`然后在恢复后循环并删除它们。

`git stash --keep-index --include-untracked`显然，如果工作树有任何未跟踪的文件或未暂存的更改，您应该只运行初始。要检查这一点，您可以`git status --porcelain | egrep --silent '^(\?\?|.[DM])'`在脚本中使用测试。

我相信这比现有的答案要好——它不需要任何中间变量（除了树是否脏，以及在恢复存储后需要删除哪些文件的记录），具有更少的命令和不需要为了安全而关闭垃圾收集。有中间藏匿处，但我认为这正是它们的用途。

这是我当前的预提交钩子，它完成了提到的所有事情：

```
#!/bin/sh

# Do we need to tidy up the working tree before tests?
# A --quiet option here doesn't actually suppress the output, hence redirection.
git commit --dry-run >/dev/null
ret=$?
if [ $ret -ne 0 ]; then
    # Nothing to commit, perhaps. Bail with success.
    exit 0
elif git status --porcelain | egrep --silent '^(\?\?|.[DM])'; then
    # There are unstaged changes or untracked files
    dirty=true

    # Remember files which were added or renamed and then deleted, since the
    # stash and read-tree won't restore these
    #
    # We're using -z here to get around the difficulty of parsing
    # - renames (-> appears in the string)
    # - files with spaces or doublequotes (which are doublequoted, but not when
    #   untracked for unknown reasons)
    # We're not trying to store the string with NULs in it in a variable,
    # because you can't do that in a shell script.
    todelete="$(git status -z | egrep -z '^[AR]D' | cut -z -c 4- | tr '\0' '\n')"
else
    dirty=false
fi

if $dirty; then
    # Tidy up the working tree
    git stash --quiet --keep-index --include-untracked
    ret=$?

    # Abort if this failed
    if [ $ret -ne 0 ]; then
        exit $ret
    fi
fi

# Run tests, remember outcome
make precommit
ret=$?

if $dirty; then
    # Restore the working tree and index
    git stash --quiet && git stash pop --quiet stash@{1} && git read-tree stash && git stash drop --quiet
    restore_ret=$?

    # Delete any files which had unstaged deletions
    if [ -n "$todelete" ]; then
        echo "$todelete" | while read file; do
            rm "$file"
        done

        # Abort if this failed
        if [ $restore_ret -ne 0 ]; then
            exit $restore_ret
        fi
    fi
fi

# Exit with the exit status of the tests
exit $ret 
```

欢迎任何改进。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T17:55:03.123

```
$ git config gc.auto 0   # safety play
$ INDEX=`git write-tree`
$ git add -f .
$ WORKTREE=`git write-tree`
$ git read-tree $INDEX
$ git checkout-index -af
$ git clean -dfx
$ # your tests here
$ git read-tree $WORKTREE
$ git checkout-index -af
$ git clean -dfx
$ git read-tree $INDEX
$ git config --unset gc.auto
$ # you're back. 
```

`git clean`-x的联机帮助页相当省略地建议了这个解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T00:48:27.570

这是迄今为止我想出的最好的解决方案。它适用于 git 钩子`pre-commit`和`commit-msg`. 当有以下情况时，我已经对其进行了测试：

*   只有阶段性的变化
*   只有未分阶段的更改
*   分阶段和非分阶段的变化
*   没有变化

在所有三种情况下，它都能正常工作。最大的缺点是它非常hacky，创建和删除临时提交和存储。

```
#!/bin/bash

git commit -m "FOR_COMMIT_MSG_HOOK" -n
commit_status=$?
# git stash save always returns 0, even if it
# failed creating a stash. So compare the new and old git stash list
# output to see if a stash was created
current_stash_count="$(git stash list)"
git stash save -q -u "FOR_COMMIT_MSG_HOOK"
new_stash_count="$(git stash list)"

echo "##### Running tests #####"
# put testing code here

if [[ $commit_status -eq 0 ]]; then
    git reset --soft 'HEAD~'
fi

if [[ "$current_stash_count" != "$new_stash_count" ]]; then
  git stash pop -q
fi

exit $result 
```

# java - Game Dev - 抽象技能/天赋系统实现

> ID：13889243
> 
> 赞同：0
> 
> 时间：2012-12-15T04:17:18.143
> 
> 标签：java, architecture

从 gamedev stackexchange ( [original](https://gamedev.stackexchange.com/questions/45596/abstract-skill-talent-system-implementation) ) 转贴，因为那里已经死了：

我已经制作小型 2D 游戏大约 3 年了（XNA 和最近的 LWJGL/Slick2D）。我的最新想法是在实时游戏中加入某种形式的“天赋树”系统。

我一直在绞尽脑汁，但想不出一个可以容纳人才的结构。就像是

> “你的近战攻击是在目标身后立即杀死”

我想提出一个抽象对象，而不是将随机条件放入其他方法中。我以前解决过一些相对复杂的问题，但我什至不知道从哪里开始。

任何帮助将不胜感激 - Java、伪代码或一般概念都很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:25:33.677

您可以通过创建一组“可组合”技能对象来做到这一点，您可以将其挂接到代码的正确部分。

就像是：

```
ninjaAttackSkill = new ModifiedAttack(originalAttack, 
       new ConditionalHit(behindTargetCondition, new InstantKillHit())); 
```

然后攻击技能对象可以具有类似的方法签名：

```
public SomeResult attack(Thing attacker, Thing target); 
```

然后，您可以为每个可组合的技能对象覆盖它。

[我在我的小 Roguelike 游戏Tyrant](https://github.com/mikera/tyrant)中使用了类似的技术- 基本上有一个“脚本”对象，您可以将其子类化以实现所有类型的脚本功能。

# c++ - 使用 C++ 的 STL 列表 ....传递列表指针数组

> ID：13889244
> 
> 赞同：0
> 
> 时间：2012-12-15T04:17:33.553
> 
> 标签：c++, stl, linked-list, pass-by-reference

我在传递 STL 列表 obj b 引用时遇到问题，这是使用原型的代码

```
void input(list<string>& *x[]) 
```

主要声明

```
list<string> *table[SIZE];
input(table);     //calling 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T04:24:27.767

您的函数正在尝试获取指向指向 a 引用的指针的指针`list<string>`。您的问题是不可能创建指向引用的指针。

相反，您应该尝试引用指向的指针数组`list<string>`：

```
void input(list<string> *(&x)[SIZE]) 
```

# python - python socket.connect - >超时为什么？

> ID：13889246
> 
> 赞同：7
> 
> 时间：2012-12-15T04:17:52.727
> 
> 标签：python, sockets

我在这方面相当天真。我不确定为什么我的连接超时。提前致谢。

```
#!/usr/bin/env python
import socket

def socket_to_me():
    socket.setdefaulttimeout(2)
    s = socket.socket()
    s.connect(("192.168.95.148",21))
    ans = s.recv(1024)
    print(ans) 
```

此代码生成的回溯

```
Traceback (most recent call last):
  File "logger.py", line 12, in <module>
    socket_to_me()
  File "/home/drew/drewPlay/python/violent/networking.py", line 7, in socket_to_me
    s.connect(("192.168.95.148",21))
  File "/usr/lib/python2.7/socket.py", line 224, in meth
    return getattr(self._sock,name)(*args)
timeout: timed out 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T04:22:35.220

您无需更改所有新套接字的默认超时，而是只需设置该特定连接的超时即可。不过这个值有点低，所以把它增加到 10-15 秒就可以了。

首先，这样做：

```
s = socket.socket() 
```

然后：

```
s.settimeout(10) 
```

你应该在连接上使用“try:”，并添加：

```
except socket.error as socketerror:
    print("Error: ", socketerror) 
```

这将在您的输出中显示系统错误消息并处理异常。

您的代码的修改版本：

```
def socket_to_me():
    try:
        s = socket.socket()
        s.settimeout(2)
        s.connect(("192.168.95.148",21))
        ans = s.recv(1024)
        print(ans)
        s.shutdown(1) # By convention, but not actually necessary
        s.close()     # Remember to close sockets after use!
    except socket.error as socketerror:
        print("Error: ", socketerror) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-13T18:09:38.253

将 192.168.95.148 更改为 127.0.0.1（localhost - 连接到您自己）并在同一台机器上运行[此程序。](https://archive.org/details/tucows_367516_Freefloat_FTP_Server)这样你就有了连接的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-16T15:24:19.660

它是一个假地址，我认为如果你想让它工作，你正在阅读暴力 python，输入**socket.gethostname()**而不是 **假 IP**地址，它将连接到你的机器。这是我的代码：

```
 def Socket_to_me(ip,port,time):
        try:
            s = socket.socket()
            s.settimeout(time)
            s.connect((ip,port))
            ans = s.recv(1024)
            print(ans)
            s.shutdown(1) # By convention, but not actually necessary
            s.close()     # Remember to close sockets after use!
        except socket.error as socketerror:
            print("Error: ", socketerror) 

call the method by:
Socket_to_me(socket.gethostname(),1234,10) 
```

# ruby-on-rails - Ruby中的时间解析

> ID：13889249
> 
> 赞同：1
> 
> 时间：2012-12-15T04:18:19.907
> 
> 标签：ruby-on-rails

```
{"creator"=>{"siteStandardProfileRequest"=>{"url"=>"http://www.linkedin.com/profile?viewProfile=&key=966636&authToken=TVqk&authType=name&trk=api*a188142*s196271*"}, "lastName"=>"Emge", "id"=>"EZDn5fpc6X", "pictureUrl"=>"http://m3.licdn.com/mpr/mprx/0_gxkFOrh6iNKSaMhhxOX4OPnLizvm2VTh0ZKZOPFJpPTY1Yn8AMNIK1PcD4zl7j82yyQJAqJM7R4U", "firstName"=>"Ryan O."}, "creationTimestamp"=>1355124057000, "text"=>"Being that it positions itself as a the backbone of the internet, it appears that there will be many long term opportunities in this space.", "id"=>"g-66325-S-194331620-108220061"} 
```

但是`creationTimestamp`有这种格式`1355124057000`。我想把它改成`Sat Dec 15 04:13:14 +0000 2012`. 我在 rails、ruby 1.8.7 和 rails 3.0.4 上使用 ruby
​​ 我该如何更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:25:03.843

我猜你正在寻找`Time.at`功能

```
t = Time.at(1355124057) # for seconds since epoch
t = Time.at(1355124057000/1000) # for milliseconds since epoch 
```

这是[自纪元以来](http://www.epochconverter.com/)的秒数（格林威治标准时间 1970 年 1 月 1 日 00:00:00）

获得时间对象后，`t`应用[`strftime`](http://cheat.errtheblog.com/s/strftime/)以您喜欢的任何方式将时间转换为字符串

所以在你的情况下，它会是

```
t.strftime("%a %b %d %H:%m:%S %z %Y") 
```

# php - 使用冒号分隔符查找逗号分隔值

> ID：13889252
> 
> 赞同：1
> 
> 时间：2012-12-15T04:18:51.437
> 
> 标签：php, mysql

我在我的数据库中为 tourneyID、Selected、Paid、Entered、date 设置值，然后用冒号分隔每个选择

所以我有一个可能看起来像这样的字符串

```
 187,S,,,09-21-2013:141,S,,,06-21-2013:144,S,,,05-24-2013 
```

但它也可能看起来像这样

```
 145,S,,,07-12-2013:142,S,,,05-24-2013:187,S,,,09-21-2013 
```

有时看起来像这样

```
 87,S,,,07-11-2013:125,S,,,06-14-2013 
```

我试图找到这个序列：`187,S,,,09-21-2013`

我有这样存储的数据，因为我花钱请程序员为我编写代码。现在，据我所知，我认为这不是最好的解决方案，但它是我所拥有的，直到我了解更多并且它正在发挥作用。

我的问题是当使用 LIKE 它返回 187 和 87 值

```
 $getTeams = mysql_query("SELECT * FROM teams 
    WHERE (team_tourney_vector LIKE '%$tid,S,P,,$tourney_start_date%' 
    OR team_tourney_vector LIKE '%$tid,S,,,$tourney_start_date%') 
    AND division='$division'"); 
```

我试过这个，`FIND_IN_SET()` 但它只会返回这个字符串的团队ID

```
187,S,,,09-21-2013:141,S,,,06-21-2013:144,S,,,05-24-2013 
```

并且找不到此字符串的团队 ID

```
145,S,,,07-12-2013:142,S,,,05-24-2013:187,S,,,09-21-2013

   SELECT * FROM teams WHERE FIND_IN_SET('187',team_tourney_vector) AND (team_tourney_vector LIKE '%S,,,09-21-2013%') 
```

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:46:07.520

通过以您正在使用的格式存储数据，您使这项任务变得更加困难。

您需要将锦标赛向量存储在单独的表中。每个锦标赛都放在单独的行中，每个逗号分隔的字段放在单独的列中。

然后，您可以使用 SQL 查找特定匹配的 $tid 行，甚至可以使用索引来帮助加快这些搜索。

此外，MySQL 日期应以 YYYY-MM-DD 格式存储。

另请参阅我对[在数据库列中存储分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-comma-separated-list-in-a-database-column-really-that-bad/3653574#3653574)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:22:21.570

不要使用 sql。使用 PHP 更容易`strpos`

```
$getTeams = mysql_query("SELECT * FROM teams WHERE division='$division'");

while ( $rows = mysql_fetch_array($getTeams) ) {
  if ( strpos($rows['team_tourney_vector'],'187,S,,,09-21-2013') ) {
    echo $rows['team_tourney_vector'];
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T21:30:58.123

这是我使用 RLIKE 解决上述问题的方法

```
 $tourney_start_date=date('m-d-Y', strtotime($tourney_start_date));
    $vector = '"'.$tid.',S,,,'.$tourney_start_date.'"';
    $getTeams = mysql_query("
    SELECT * FROM `teams` 
    WHERE `team_tourney_vector` 
    RLIKE $vector 
    AND division='$division'"); 
```

# c++ - 由于动态数组导致的 HashMap 内存泄漏

> ID：13889254
> 
> 赞同：0
> 
> 时间：2012-12-15T04:19:11.723
> 
> 标签：c++, memory-leaks

我正在尝试创建自己的 HashMap 以了解它们是如何工作的。我正在使用链接列表数组将值（字符串）存储在我的哈希图中。

我正在创建这样的数组：

```
Node** list; 
```

而不是这个：

```
Node* list[nSize]; 
```

这样数组在运行时可以是任意大小。但是我认为由于我的操作方式而导致内存泄漏。我不知道错误在哪里，但是当我运行以下简单代码时，.exe 崩溃了。

**为什么我的应用程序崩溃了，我该如何解决？**

*注意：我知道使用向量会比数组好得多，但这只是为了学习，我想挑战自己使用“动态”数组创建哈希图。PS：对于我正在使用的数组，这是正确的术语（动态数组）吗？*

```
struct Node
{
  // to implement
};

class HashMap
{
  public:
     HashMap(int dynSize)
     {
        *list = new Node[dynSize];
        size  = dynSize;  

        for (int i=0; i<size; i++)
            list[i] = NULL;

        cout << "END\n";
     }

     ~HashMap()
     {
        for (int i=0; i<size; i++)
           delete list[i];
     }

  private:
     Node** list; // I could use a vector here but I am experimenting with a pointer to an array(pointer), also its more elegant
     int    size;
};

int main()
{
   // When I run this application it crashes. Where is my memory leak?
   HashMap h(5);

   system("PAUSE");
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:23:27.770

你需要遵循**[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**。

提供复制构造函数和复制赋值运算符，它们对动态分配的成员进行深度复制。

除了，

```
 Node** list; 
 *list = new Node[dynSize]; 
```

只是尊重一个未初始化的指针。`*list`没有指向任何有意义的东西，因为`list`从未初始化过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:00:01.577

正如 Alok Save 所提到的，您正在取消引用未初始化的指针。这里的关键是你有一个需要两步初始化的双指针。首先，您必须将内存分配给`list`：

```
// note that I'm using 'X', simply using 'size' doesn't work for two dimensions
list = new Node*[X]; 
```

现在您有了 X 节点指针，您需要将每个指针指向 Y 节点。

```
for (int i = 0; i < X; i++)
    list[i] = new Node[Y]; 
```

如果 new 无法分配内存，您可能需要进行一些错误处理，但这至少会构建 Node**。

要销毁它，只需以相反的顺序执行，但请记住使用`delete[]`，因为您已将其分配给`new[]`.

```
for (int i=0; i < X; i++)
    delete[] list[i];
delete[] list; 
```

# c++ - GLFW 链接问题 Visual Studio 2012

> ID：13889255
> 
> 赞同：2
> 
> 时间：2012-12-15T04:19:16.983
> 
> 标签：c++, glfw

这让我发疯，我想在第 4.2.1 节之后静态链接到 GLFW.lib。提供的 readme.html 文件我已将 glfw.lib 和 opengl32.lib 添加到 VS 链接器的附加依赖项部分。

我还将包含 glfw.lib 的目录添加到链接器 > 常规下的附加库目录部分。

当然，我已经在我的项目中包含了 glfw.h 文件，但我仍然得到......

```
Error   1   error LNK2019: unresolved external symbol _glfwInit referenced in function _main    C:\Users\Smith_000\Documents\Visual Studio 2012\Projects\Spark\Spark\main.obj   Spark
Error   2   error LNK2019: unresolved external symbol _glfwTerminate referenced in function _main   C:\Users\Smith_000\Documents\Visual Studio 2012\Projects\Spark\Spark\main.obj   Spark
Error   3   error LNK2019: unresolved external symbol _glfwOpenWindow referenced in function _main  C:\Users\Smith_000\Documents\Visual Studio 2012\Projects\Spark\Spark\main.obj   Spark
Error   4   error LNK2019: unresolved external symbol _glfwSwapBuffers referenced in function _main C:\Users\Smith_000\Documents\Visual Studio 2012\Projects\Spark\Spark\main.obj   Spark
Error   5   error LNK2019: unresolved external symbol _glfwGetWindowParam referenced in function _main  C:\Users\Smith_000\Documents\Visual Studio 2012\Projects\Spark\Spark\main.obj   Spark
Error   6   error LNK2019: unresolved external symbol _glfwGetKey referenced in function _main  C:\Users\Smith_000\Documents\Visual Studio 2012\Projects\Spark\Spark\main.obj   Spark
Error   7   error LNK1120: 6 unresolved externals   C:\Users\Smith_000\Documents\Visual Studio 2012\Projects\Spark\Debug\Spark.exe  1   1   Spark 
```

使用以下（示例）代码...

```
#include <glfw.h>
#include <stdlib.h>

int main( void )
{
    int running = GL_TRUE;

    // Initialize GLFW
    if( !glfwInit() )
    {
        exit( EXIT_FAILURE );
    }

    // Open an OpenGL window
    if( !glfwOpenWindow( 300,300, 0,0,0,0,0,0, GLFW_WINDOW ) )
    {
        glfwTerminate();
        exit( EXIT_FAILURE );
    }

    // Main loop
    while( running )
    {
        // OpenGL rendering goes here...
        glClear( GL_COLOR_BUFFER_BIT );
        // Swap front and back rendering buffers
        glfwSwapBuffers();
        // Check if ESC key was pressed or window was closed
        running = !glfwGetKey( GLFW_KEY_ESC ) &&
        glfwGetWindowParam( GLFW_OPENED );
    }

    // Close window and terminate GLFW
    glfwTerminate();

    // Exit program
    exit( EXIT_SUCCESS );
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T03:48:50.867

确保您的 .exe 文件的文件夹中有 glfw.dll。如果这没有帮助，请添加另一个库 glu32.lib。

我通过在 main 函数之前添加这个来在代码中添加库。有了这个，你可以看到你有哪些库，而无需浏览选项和菜单。

```
#pragma comment(lib, "GLFW.lib")
#pragma comment(lib, "opengl32.lib")
#pragma comment(lib, "glu32.lib") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:48:36.323

原因可能是因为您仅在一种构建模式（例如发布）中链接到这些库。

第二个可能的原因：（如果我错了，请纠正我，因为我不是 100% 确定这一点）。LIB 文件可能是在不同的编译器中构建的。例如，LIB 是在 MinGW 中编译的，而您正在使用 MSVC++ 编译器链接到它。

第三个可能的原因：考虑您使用的是什么版本的 GLFW（如 32 位、64 位）。

# php - 存储和显示用户的注册日期

> ID：13889256
> 
> 赞同：0
> 
> 时间：2012-12-15T04:19:19.220
> 
> 标签：php, mysql, database, date, registration

我正在制作一个包含 8-10 个字段的注册表单。除此之外，我的数据库中还有 2 个其他字段，用户 ID 是具有自动递增功能的主键和活动字段，无论用户是否处于活动状态。但我想再添加一个字段，即注册日期并将其存储在 IST（印度标准时间）

当我在 stackoverflow 中单击我的个人资料链接时，我看到我已经注册了 X 个月，并且我访问了该网站 X 次。我想在我的用户的个人资料中添加一个类似的功能，显示他们注册的确切日期和时间！例如，成员自：2001 年 7 月 28 日！类似的东西。

我必须在我的注册表单中进行任何调整吗？还是我必须做其他事情？我在 google 和 stackoverflow 上搜索了相同的内容，也搜索了 php 和 mysql 文档，看到了很多关于日期和时间戳的信息，但我不知道该怎么做，没有得到我想要的和没有的足够确信。请帮我解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:31:52.740

你不需要调整你的表格。

只需将字段“registration_date”添加到您的“用户”表中。

插入新用户时将其设置为当前日期。

这可以在数据库级别完成。

像这样的东西：

```
INSERT INTO `user` ( `registration_date`, other fields...) 
VALUES (NOW(), other values...); 
```

您的表单不需要将“registration_date”传递给数据库。

请注意，NOW() 函数返回数据库服务器日期时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:29:45.163

使用存储在数据库中`NOW()`

或使用 PHP 生成日期

```
$date=(Y-m-d); 
```

# ruby-on-rails - 如何在 Ruby on rails 中获取数组的最后一行？

> ID：13889265
> 
> 赞同：0
> 
> 时间：2012-12-15T04:21:55.990
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

```
<%= m.members %> 
```

这会在下面返回这个数组。如果我只想获取这个数组的最后一行（Ray 的记录），我该如何编码？

```
[#<User id: 4, username: "John", age: 27, deleted_at: nil>, 
#<User id: 8, username: "Mike", age: 27, deleted_at: nil>,
#<User id: 13, username: "Ray", age: 27, deleted_at: nil>] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:22:28.520

```
[#<User id: 4, username: "John", age: 27, deleted_at: nil>, 
#<User id: 8, username: "Mike", age: 27, deleted_at: nil>,
#<User id: 13, username: "Ray", age: 27, deleted_at: nil>].last 
```

如果我们想获取最后一个和第一个元素，如下所示：
例如：**arr = [1,2,3,4]**
$> **arr.last => 4**
$> **arr.first => 1**

# javascript - jQuery处理点击动态数据

> ID：13889267
> 
> 赞同：-2
> 
> 时间：2012-12-15T04:22:15.870
> 
> 标签：javascript, jquery

我有通过 jQuery 动态插入的 HTML

这是一堆我想在点击时处理的 <p> 标签。

然而，`.click`完全忽略了这些标签。

这是我正在尝试做的一个例子

[http://jsfiddle.net/cjds/tc2ty/1/](http://jsfiddle.net/cjds/tc2ty/1/)

**更新**

好的，点击有效，但我仍然对理论有疑问。

注意：问题是这些数据会在一段时间后进入，因为它是通过 AJAX 获取的。它也可能会改变。

因此，在示例中正确切换顺序不会在实际应用中提供解决方案。关于如何为尚未出现的元素设置点击事件的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T04:35:12.343

您的代码几乎没有问题。首先，您要复制具有*相同 id*的元素，并且 id 应该是唯一的。那么您遇到的问题是因为您没有委托点击事件。当您创建新的动态元素时，之前设置的事件不会添加到新元素中。有几种方法可以使这项工作。

您可以在将元素附加到 DOM 之前缓存元素并为其添加点击事件：

```
var $p = $('<p class="reqImg">Random Data</p>').click(function(){ ... });
             --^-- a class not an id 
```

或者，您可以使用最近的静态父对象上的方法附加*委托*`on`事件，在这种情况下，这就是您的包装器：

```
$('#wrapper').on('click', 'p.reqImg', function(){ 
  console.log('Testing for click'); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T04:27:11.757

这是因为事件在元素存在之前就被绑定了。您可以尝试`<p>`在绑定事件之前附加标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T04:28:05.070

您正在将事件挂钩添加到对象上，然后创建它。制作对象后添加钩子并且它可以工作。

```
$('#wrapper').html('<a id="reqImg">Random Data</p> ');

$('#reqImg').click(function(){
            alert('Testing for click');
}); 
```

​</p>

# java - 调试eclipse单元测试代码“测试类应该有一个”和“工作区已关闭”错误

> ID：13889273
> 
> 赞同：0
> 
> 时间：2012-12-15T04:22:53.327
> 
> 标签：java, eclipse, unit-testing, debugging, junit

我正在尝试构建 Eclipse 插件（org.eclipse.jdt.ui.tests.refactoring）。

![在此处输入图像描述](../Images/0a2db1130b9c1f5a21eba327c52efa65.png)

从 git 下载源代码，我可以构建项目。我想调试到 ExtractMethodTest 例程，我只是在 setUP 例程中设置了一个断点，然后启动调试器。

![在此处输入图像描述](../Images/865aec24d321836d6884e9549aa371ec.png)

但是，我遇到了初始化错误。

![在此处输入图像描述](../Images/22c31d3c99bb22f968d7d4e92474f4e8.png)

然后，我尝试通过右键单击`ExtractMethodTests.java`包资源管理器来启动调试器以获取`Workspace is closed`错误。

![在此处输入图像描述](../Images/3ff1eafad04edee59380eebb558cb35e.png) ![在此处输入图像描述](../Images/d88831185cc39fd26897a3e46c0d2ca9.png) 可能有什么问题？我只是想启动`ExtractMethodTests.java`单元测试来逐行跟踪代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:41:07.893

您是否尝试使用错误版本的 JUnit 运行？Eclipse 附带了与 JUnit 3 和 Junit 4 兼容的运行时。

其次，您的单元测试是否真的有一个 0-arg 构造函数？

显然，我没有检查代码库以查看 Eclipse 人员是否知道如何创建单元测试。我只是假设他们这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:46:02.820

## “测试类应该有一个”错误

使用 JUnit 3 作为测试运行器解决了第一个问题，但我仍然遇到工作区问题。我会为它打开另一个帖子。

![在此处输入图像描述](../Images/10b266a4cec34dd7871d0055e65b7909.png)

## “工作区已关闭”错误

根据[Workspace is closed error](https://stackoverflow.com/questions/3200960/workspace-is-closed-error)的提示，我将测试作为插件测试执行以使其工作。

![在此处输入图像描述](../Images/7b9d8ba952abb32a0f4645382df474fc.png)

# python - 外键字段中的默认值 0 引发错误

> ID：13889281
> 
> 赞同：0
> 
> 时间：2012-12-15T04:24:41.003
> 
> 标签：python, django, django-models

我在 Django 模型的外键字段中将默认值设置为 0。但它正在引发 IntigrityError (1048, "Column 'country_id' cannot be null")

嗨，我有这样的代码：

```
class TestModel(models):
    name = models.CharField(max_length=255, blank=True)
    reg_from = models.CharField(max_length=255, blank=True)
    gender = models.CharField(max_length=1, choices=GENDER_CHOICES, blank=True, null=True)
    country = models.ForeignKey(Country, blank=True, default=0) 
```

出于某种原因，在保存 TestModel 时，我无法提供国家信息。我想稍后更新。

克里什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T16:11:21.120

它会引发错误，因为您的 Country 模型中没有对象具有`PK = 0`.

如果您不想将您的字段设置为，`null`则只需使用`pk=0`like:创建一个 Country 对象`Country.objects.create(name='No Country', pk=0)`。

虽然，将字段设置为`null`并拥有`default=0`可能是一个更清洁的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:36:00.383

尝试 None 而不是 0。0 是一个整数，无论​​如何它都不应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T04:50:34.187

我将字段 null 作为快速而肮脏的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-15T05:04:56.863

将您的定义更改为：

```
country = models.ForeignKey(Country, blank=True, null=True, default=0) 
```

该`null=True`属性将在数据库中的列上设置 NULL 参数`country`，否则您应该为该列设置一个值。

也不`default=0`是必需的，因为默认值将为空。

# ios - 如何检查值 null 并在 NSDictionary 中替换它

> ID：13889285
> 
> 赞同：4
> 
> 时间：2012-12-15T04:25:11.270
> 
> 标签：ios, json, nsdictionary

现在，我正在使用 NSUserDefault 和 NSDictionary，我将 NSDictionary 保存在 NSUserDefault 中，不幸的是我不能，因为返回 Json 的 NSDictionary 具有空值。

我需要检查 NSDictionary 是否具有空值并替换。如何？

这是NSDictionary，

```
({
  ID:11,
   name:21-12-2012,
   des:"<null>",
   url: 
     [
       {
         ID:1,
         name: "<null>"
       },
       {
         ID:2,
         name:"<null>"
       }
      ]
},
{
   ID:12,
   name:if i die young,
   des:"<null>",
   url: 
     [
       {
         ID:3,
         name: "<null>"
       },
       {
         ID:21,
         name:"<null>"
       }
      ]
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:36:27.187

你能检查一下这个链接吗，我想，它会对你有帮助，谢谢这个链接 [在嵌套的 NSDictionary 中替换 NSNull 的出现](https://stackoverflow.com/questions/12213822/replace-occurance-of-nsnull-in-nested-nsdictionary)

`UPDATE`：我对原来的进行了一些修改，并使用了一些将 nsarray 转换为 nsdictionary 的功能，从此链接[Convert NSArray to NSDictionary](https://stackoverflow.com/questions/1414852/convert-nsarray-to-nsdictionary)，因为我对您的代码一无所知，所以我尝试使我的 json 字符串尽可能接近和你的一样，它的工作，见下文。:)

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    tmpDict = [[NSMutableDictionary alloc] init];

    NSMutableDictionary *testDict = [[NSMutableDictionary alloc] init];
    [testDict setValue:[NSNull null] forKey:@"NullValue"];
    [testDict setValue:@"test" forKey:@"UnNull"];
    subArr = [[NSMutableArray alloc] initWithObjects:testDict, testDict, nil];

    [tmpDict setValue:[NSNull null] forKey:@"NullHere"];
    [tmpDict setValue:@"wear" forKey:@"NotNull"];
    [tmpDict setObject:subArr forKey:@"Array"];

    myArr = [[NSMutableArray alloc] initWithObjects:tmpDict, tmpDict, nil];
    NSLog(@"struct: %@", myArr);

    [self dictionaryByReplacingNullsWithStrings];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void) dictionaryByReplacingNullsWithStrings {
    const NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary: [self indexKeyedDictionaryFromArray:myArr]];
    const id nul = [NSNull null];
    const NSString *blank = @"";

    for (NSString *key in [replaced allKeys]) {
        const id object = [replaced objectForKey: key];
        if (object == nul) {
            [replaced setObject: blank forKey: key];
        }
        else if ([object isKindOfClass: [NSDictionary class]]) {
            NSLog(@"found null inside and key is %@", key);
            [replaced setObject:[self replaceNullInNested:object] forKey:key];
        }

    }
    NSLog(@"replaced: %@", replaced);
}

- (NSMutableDictionary *)replaceNullInNested:(NSDictionary *)targetDict
{
    //make it to be NSMutableDictionary in case that it is nsdictionary
    NSMutableDictionary *m = [targetDict mutableCopy];
    NSMutableDictionary *replaced = [NSMutableDictionary dictionaryWithDictionary: m];
    const id nul = [NSNull null];
    const NSString *blank = @"";

    for (NSString *key in [replaced allKeys]) {
        const id object = [replaced objectForKey: key];
        if (object == nul) {
            [replaced setObject: blank forKey: key];
        }
        else if ([object isKindOfClass: [NSArray class]]) {
            NSLog(@"found null inside and key is %@", key);
            //make it to be able to set value by create a new one
            NSMutableArray *a = [object mutableCopy];
            for (int i =0; i< [a count]; i++) {

                for (NSString *subKey in [[a objectAtIndex:i] allKeys]) {
//                    NSLog(@"key: %@", subKey);
//                    NSLog(@"value: %@", [[object objectAtIndex:i] valueForKey:subKey]);
                    if ([[object objectAtIndex:i] valueForKey:subKey] == nul) {
                        [[object objectAtIndex:i] setValue:blank forKey:subKey];
                    }
                }

            }
            //replace the updated one with old one
            [replaced setObject:a forKey:key];

        }

    }

    return replaced;
}

- (NSDictionary *) indexKeyedDictionaryFromArray:(NSArray *)array
{
    id objectInstance;
    NSUInteger indexKey = 0;

    NSMutableDictionary *mutableDictionary = [[NSMutableDictionary alloc] init];
    for (objectInstance in array)
        [mutableDictionary setObject:objectInstance forKey:[NSNumber numberWithUnsignedInt:indexKey++]];

    return (NSDictionary *)mutableDictionary;
} 
```

从上面的代码，结果如下：

```
replacenullvalue[1590:11303] struct: (
        {
        Array =         (
                        {
                NullValue = "<null>";
                UnNull = test;
            },
                        {
                NullValue = "<null>";
                UnNull = test;
            }
        );
        NotNull = wear;
        NullHere = "<null>";
    },
        {
        Array =         (
                        {
                NullValue = "<null>";
                UnNull = test;
            },
                        {
                NullValue = "<null>";
                UnNull = test;
            }
        );
        NotNull = wear;
        NullHere = "<null>";
    }
)
2012-12-16 15:16:22.790 replacenullvalue[1590:11303] found null inside and key is 0
2012-12-16 15:16:22.790 replacenullvalue[1590:11303] found null inside and key is Array
2012-12-16 15:16:22.791 replacenullvalue[1590:11303] found null inside and key is 1
2012-12-16 15:16:22.791 replacenullvalue[1590:11303] found null inside and key is Array
2012-12-16 15:16:22.792 replacenullvalue[1590:11303] replaced: {
    0 =     {
        Array =         (
                        {
                NullValue = "";
                UnNull = test;
            },
                        {
                NullValue = "";
                UnNull = test;
            }
        );
        NotNull = wear;
        NullHere = "";
    };
    1 =     {
        Array =         (
                        {
                NullValue = "";
                UnNull = test;
            },
                        {
                NullValue = "";
                UnNull = test;
            }
        );
        NotNull = wear;
        NullHere = "";
    };
} 
```

希望它对你有帮助:)。

# rally - 如何在 Rally sdk 2.0 中过滤上下文？

> ID：13889288
> 
> 赞同：1
> 
> 时间：2012-12-15T04:25:31.340
> 
> 标签：rally

我正在玩 sdk 2.0。我下载了示例，特别是我指的是“网格”示例。我只想显示基于某个工作区（或项目......我无法工作）的结果。

这是我的整个应用程序。我正在尝试在 storeConfig 上设置上下文，如下所示。它不起作用。我的语法错了吗？还是我从根本上误解了此配置设置的目的？

```
Ext.define('CustomApp', {
extend: 'Rally.app.App',
componentCls: 'app',

launch: function() {
    Rally.data.ModelFactory.getModel({
        type: 'UserStory',
        success: function(model) {
            this.grid = this.add({
                xtype: 'rallygrid',
                model: model,
                columnCfgs: [
                    'ScheduleState',
                    'FormattedID',
                    'Name',
                    'Owner',
                    'Project',
                    'Workspace'
                ],
                storeConfig: {
                    context: {
                        workspace: 'Test'
                    },
                    filters: [
                        {
                            property: 'ScheduleState',
                            operator: '=',
                            value: 'Defined'
                        }
                    ]                       
                }
            });
        },
        scope: this
    });
} 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:31:52.180

你做对了，但值必须是工作区的引用，而不是名称：

```
context: {
    workspace: '/workspace/12345' //12345 is the workspace oid
} 
```

在应用程序内部，当前上下文始终可以通过访问器获得，并且可以轻松地传递到 storeConfigs 和其他组件配置，如下所示：

```
context: this.getContext().getDataContext() 
```

# c# - 如何在 Windows 7 win WPF 的任务栏上放置自定义工具栏（DeskBand？）？

> ID：13889290
> 
> 赞同：4
> 
> 时间：2012-12-15T04:25:41.660
> 
> 标签：c#, wpf, winapi, win32gui, taskbar

如何在任务面板之前将自定义工具栏放在 Windows 7 的任务栏上？有一个名为 Pokki 的流行应用程序可以做到这一点。 ![在此处输入图像描述](../Images/38c4792aca1fcf0c4de6084e5745dd1b.png) 我想知道我该怎么做？

Edit1：我需要一种 100% 的方式来为 Windows 7 定制工具栏（DeskBand？）。我不是在寻找一个固定应用程序解决方案，而是一种构建能够处理它自己的消息并显示它的定制解决方案的方法自己的图标。非常感谢 C# 方式。

Edit2：非常感谢 WPF 方式。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-22T15:55:38.030

You'll get plenty of advice to **not** do this in C#. I cannot recommend otherwise, the odds that your deskband will not work are great. At issue is the CLR version injection problem, a process (like explorer.exe) can have only one version of the CLR loaded. And your deskband will not work when it is the wrong version.

There were very specific counter-measures against this problem added in .NET 4.0, its CLR supports in-process side-by-side versions of the CLR. In other words, having more than one CLR loaded in a single process. That feature works in this specific scenario, a COM server that needs the CLR because it was written in managed code. So an absolute requirement is that you'd write your extension targeting .NET 4.0 or better.

But there is still a legacy problem, and the core reason that Microsoft still does not support this scenario for shell extensions. There is a "who comes first" problem. Despite the warning not to do this, there are shell extensions out there that use managed code and target CLR version 2\. If such an extension gets loaded *before* yours, an entirely random event since it depends on the order of keys in the registry, Explorer might get CLR 2 loaded first. Which then prevents the inprocess side-by-side feature from working, it can only come to a good end when CLR version 4 is loaded first.

This is utterly undiagnosable, Explorer doesn't squeak when an extension can't be loaded. And unfixable to the average user, you cannot expect him to tinker with obscure registry keys.

It is going to take a lot of time before this problem can be dismissed completely. Realistically, Windows needs to stop supporting .NET versions prior to .NET 4 to have a guarantee. Windows 8 made a start by not having .NET 3.5 installed by default but it still makes it very easy to add it. So make that a lot of time, a decade or more.

Well, caution to the wind, you can make it work in C# if you don't worry about random failure. You'll next get buried in very obscure COM interface details, surviving them requires black-belt skills with knowing how to properly declare a [ComImport] interface. This is not something you ought to tackle yourself, it has been done by others. I'm not in the habit of recommending products, but can't skip recommending [EZShellExtensions](http://www.ssware.com/ezshell/ezshell.htm), a library specifically designed to help writing shell extensions in C#. Support for deskbands is one of its advertized features. Use the trial version to tinker with this to see if you can bring this to a good end.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T04:29:16.270

以下示例可能会有所帮助：

[http://www.codeproject.com/Articles/185512/Programmatically-PIN-shortcut-onto-Taskbar-on-Win7](http://www.codeproject.com/Articles/185512/Programmatically-PIN-shortcut-onto-Taskbar-on-Win7)

# wcf - 实现 IDisbatchMethodInspector 时未调用服务方法

> ID：13889294
> 
> 赞同：1
> 
> 时间：2012-12-15T04:26:38.940
> 
> 标签：wcf

我正在通过 (1) 从实现 IDispatchMessageInspector 的 BehaviorExtensionElement 派生的类和 (2) 通过应用于服务方法的接口方法定义的属性设置的类来扩展一组服务方法的 WCF 管道，实现 IDispatchMessageFormatter。

我能够单独配置和运行每个配置，但是当配置为在处理 IDispatchMessageInspector.AfterReceiveRequest 中的消息后一起工作时，永远不会调用 IDispatchMessageFormatter.DeserializeRequest 方法。但是，当我删除配置文件的行为配置时会调用它。理想情况下，我会让两个自定义类作为管道的一部分运行并一起工作。

关于问题可能是什么的任何建议或关于如何进一步调试的想法？

我很高兴提供更多细节和简化代码。

干杯，丹妮丝

# xml - R中的MLB XML解析

> ID：13889295
> 
> 赞同：1
> 
> 时间：2012-12-15T04:26:47.847
> 
> 标签：xml, r

我在有效解析从美国职业棒球大联盟 (MLB) 检索到的 XML 时遇到了困难。

首先，这是一个旨在让我熟悉 XML 的辅助项目。我最熟悉 R，所以我觉得一旦成功，我就有更好的机会调试代码。

我可以通过这些代码行获取 xml：

```
xmlurl<-"http://gd2.mlb.com/components/game/mlb/year_2012/month_06/day_11/miniscoreboard.xml"
xmltree<-xmlTreeParse(xmlurl,useInternalNodes=TRUE) 
```

我希望能够在整个 XML 中提取信息。例如，对于这一天进行的所有比赛，我想提取每支球队的得分（“away_team_runs”和“home_team_runs”）。此外，我希望能够从文档中提取我希望的任何内容，但到目前为止我没有成功。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:40:31.237

例如，使用 xpathSApply

```
xpathSApply(xmltree,'//games/*',xmlGetAttr,'away_team_runs') 
[1] "6" "1" "3" "3"
xpathSApply(xmltree,'//games/*',xmlGetAttr,'home_team_runs') 
[1] "3" "4" "0" "2" 
```

# exception - 什么是一元错误？

> ID：13889299
> 
> 赞同：4
> 
> 时间：2012-12-15T04:27:34.617
> 
> 标签：exception, error-handling, monads

我读到了单子错误作为返回值错误和异常的替代方法。有人可以解释并举例说明单子错误如何在命令式伪语言中工作（请不要提供功能示例）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:45:09.247

基本思想：

*   输出成功或错误失败的概念被编码为一种类型。
*   这种类型的值（或函数）可以组合成这种类型的另一个值。可以组合具有不同成功类型的值，但它们必须都具有相同的失败类型。
*   一旦输出错误，执行的其余部分就会短路以传播错误。

这是 C# 中的一个工作示例：

* * *

```
// A discrimated union that can be either an error of type TError, 
// or a successful result of type TResult. 
// IsError indicates which field has a valid value.
class Throws<TError, TResult>
{
    public bool IsError;
    public TError Error;
    public TResult Result;

    // Make a new successful reslt of type TResult.
    public static Throws<TError, TResult> Success(TResult result)
    {
        Throws<TError, TResult> t = new Throws<TError, TResult>();
        t.IsError = false;
        t.Result = result;
        return t;
    }

    // Make a new error of type TError.
    public static Throws<TError, TResult> Fail(TError error)
    {
        Throws<TError, TResult> t = new Throws<TError, TResult>();
        t.IsError = true;
        t.Error = error;
        return t;
    }

    // Composition.
    public Throws<TError, TResultB> Bind<TResultB>(
              Func<TResult, Throws<TError, TResultB>> f)
    {
        if (IsError)
        {
            // If this is an error, then we can short circuit the evaluation
            return Throws<TError, TResultB>.Fail(Error);
        }

        // Otherwise, forward this result to the next computation.
        return f(Result);
    }
}

class Test
{
    // num / demom
    private static Throws<string, double> Div(double num, double denom)
    {
        if (denom == 0)
            return Throws<string, double>.Fail("divide by zero");

        return Throws<string, double>.Success(num / denom);
    }

    // Have the user enter a double.
    private static Throws<string, double> ReadDouble(string name)
    {
        Console.Write("{0}: ", name);

        string input = Console.ReadLine();
        double result;
        if (!double.TryParse(input, out result))
            return Throws<string, double>.Fail(string.Format("can't parse {0}", name));

        return Throws<string, double>.Success(result);
    }

    // Read two doubles and divide them to produce the result.
    private static Throws<string, double> Interact()
    {
        return ReadDouble("numerator").Bind(num => 
               ReadDouble("denominator").Bind(denom => 
               Div(num, denom)));
    }

    public static void TestLoop()
    {
        while (true)
        {
            // Run a computation that asks the user for two numbers,
            // divides them and then prints out the result.
            Throws<string, double> t = Interact();

            // Notice how the return type forces you to address the
            // error if you want to get to the value.
            if (t.IsError)
            {
                Console.WriteLine("Error: {0}", t.Error);
            }
            else
            {
                Console.WriteLine("Success: {0}", t.Result);
            }
        }
    }
} 
```

# php - PHP为CSV爆炸？

> ID：13889305
> 
> 赞同：0
> 
> 时间：2012-12-15T04:28:48.827
> 
> 标签：php

我在 CSV 文件中有数据。我需要读取文件并将数据放入数组中。我的 CSV 文件中有 5 列，如下所示：

```
CAPRICCIOSA | Tomato, Cheese, Mushrooms | $8.00 | $12.00 | $15.00

MARGHERITA  | Tomato, Cheese, Oregano   | $7.00 | $11.00 | $13.00 
```

1.  我怎样才能把`explode()`它变成数组？如果我使用逗号将其分解为数组，它将变为`CAPRICCIOA - Tomato - Cheese`因为我的文本已经有逗号。

2.  如何将其拆分为不同的行，例如 MySQL，以便循环查看结果？

我尝试了以下方法：

```
 $file="dish.csv" ;
 $file=file_get_contents($file);
 $array=explode(",", $file); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T04:32:28.333

如何使用 PHP 函数：fgetcsv()

[http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T04:33:36.330

你应该转向 fgetcsv：

```
<?php
$row = 1;
if (($handle = fopen("test.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $num = count($data);
        echo "<p> $num fields in line $row: <br /></p>\n";
        $row++;
    for ($c=0; $c < $num; $c++) {
        echo $data[$c] . "<br />\n";
    }
}
fclose($handle);

?> 
```

[http://php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T09:23:47.023

试试这个：

```
$fn='dish.csv';

$file_array = file($fn);
foreach ($file_array as $line_number =>&$line)
{
    //$line=utf8_encode($line);
    $row=explode('|',$line);

    echo 'Dish: '.$row[0].'<br>';
    $ingredients=explode(',',$row[1]);
    echo 'Ingredients:';
    echo '<pre>';
    print_r($ingredients);
    echo '<br><br>';
    echo '</pre>';
} 
```

# jquery-mobile - 水平滚动失败，width=device-width iscroll

> ID：13889313
> 
> 赞同：8
> 
> 时间：2012-12-15T04:30:13.057
> 
> 标签：jquery-mobile, mobile-safari, viewport, iscroll4

此处的示例代码：http: [//pastebin.com/95z3pftQ](http://pastebin.com/95z3pftQ)

我正在尝试构建一个带有固定标题和“内容”部分的移动页面，该部分将填充外部（经过清理，但在其他方面是任意的）HTML。我需要使用`iscroll`或类似的东西，因为我需要支持垂直/水平滚动**和缩放**，这没有原生的等效项。

问题在于，使用`width=device-width`元视口指令，移动 Safari 将所有块级元素的大小调整为屏幕宽度，而不考虑其内容的宽度，除非它们指定了宽度。 `iscroll`然后查看容器的宽度（即屏幕的宽度），并且不知道还有更多内容需要水平滚动。所以在这个例子中，`div#container`我 iPhone 上的计算宽度是 290 像素，但计算宽度`table#really-wide-content`是 1000 像素。

是否有某种方式可以禁用页面上一个 div 内的元视口指令的效果？请注意，我无法先验地知道内容的宽度，或者它的 html 结构是什么样的，但如果需要，我可以通过编程方式更改内联样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:18:36.767

您可以在加载后的某个时间点设置 iScroll 的宽度，例如这个 JQuery 示例：

```
$('#scroller').width(your_width); 
```

通过[https://stackoverflow.com/a/13898458/1085891](https://stackoverflow.com/a/13898458/1085891)

无论如何，您可以按照此处的建议在页面加载后销毁并重新创建 iScroll：[如何在 iScroll 中为滚动器设置动态宽度？](https://stackoverflow.com/questions/8471386/how-to-set-dynamic-width-in-iscroll-for-scroller)

`width=device-width`另外，您可以在加载后将视口宽度设置为吗？也许这将允许 iScroll 首先加载容纳内容。

# php - 使用表格助手 Codeigniter 在每一行中添加表单

> ID：13889316
> 
> 赞同：0
> 
> 时间：2012-12-15T04:31:24.890
> 
> 标签：php, codeigniter

嗨，我正在使用表格助手创建表格，但在每一行我想添加表格，在 html 中像这样：

```
<table>
  <form action="">
  <tr>
    <td><input type="text" name="name2"></td>
  </tr>
  </form>

  <form action="">
  <tr>
    <td><input type="text" name="name2"></td>
  </tr>
  </form>
</table> 
```

但我想在表帮手：我试过这个：

```
 $this->table->add_row(
                form_open('myAction').
                form_input('name'.$i),
                form_submit('Submit')
                form_close()
        ); 
```

我使用萤火虫来检查元素产生，如下所示：

```
 <table>
     <tr>
       <form action="myAction">
         <td><input type="text" name="name1"></td>
       </form>
          <td><input type="submit"></td>
      </tr>
  </table> 
```

为什么标签不显示在最后一个标签，而是显示在第一个标签。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:02:18.963

You are missing some dots

```
$this->table->add_row(
            form_open('myAction').
            form_input('name'.$i).
            form_submit('Submit').
            form_close()
    ); 
```

# javascript - 使用 JavaScript 动态重置 CSS 属性

> ID：13889322
> 
> 赞同：1
> 
> 时间：2012-12-15T04:32:12.080
> 
> 标签：javascript, html, css, function, transitions

我正在尝试创建一个具有两种状态的框：

(a) 框的宽度为 70% (b) 框的宽度为 10%

用户应该能够单击该框以在两种状态之间交替，因此如果该框处于状态“a”，则单击时它将转换为状态“b”。如果框处于状态“b”，它会在单击时转换为状态“a”，依此类推。我正在使用下面的 css 来设置盒子的初始状态：

```
#box1 {
position:relative;
left:0%;
top:0%;
width: 70%;
height: 100%;
background-color: #666;
z-index:4;
} 
```

我正在使用下面的 javascript 函数来允许该框可点击：

```
function slideLeft1(){
if(document.getElementById('box1').style.width='70%'){
document.getElementById('box1').style.width='10%';
 }
 else{
 document.getElementById('box1').style.width='70%';
 }
 } 
```

它正在从 70% 到 20%，但不是相反，所以 if 语句有效，但 else 语句无效。有任何想法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:34:41.893

您没有检查条件，而是使用 double == 分配它

```
function slideLeft1(){
if(document.getElementById('box1').style.width == '10%'){
document.getElementById('box1').style.width='70%';
 }
 else{
 document.getElementById('box1').style.width='10%';
 }
 } 
```

# types - 带有参数列表的 Fortran 类型定义

> ID：13889326
> 
> 赞同：2
> 
> 时间：2012-12-15T04:32:40.657
> 
> 标签：types, fortran

请看一下这段代码，为什么会出现问题，我该怎么做呢？

```
program main
type matrix(m,n)
    integer::m,n
    double precision,dimension(1:m,1:n)::value
end type matrix

type(matrix(2,3))::B
print*,"OK"
end program 
```

关于这个的另一个问题是：我可以有一个类型定义或模块定义，然后是一个参数列表吗？因为我从书中看到了这段代码，不知道为什么我不能编译它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T09:09:57.680

撇开 MSB 关于定义点的观察`matrix`，如果你有一个最新的编译器，你可以定义和声明一个*参数化的定义类型*，就像这样：

```
type matrix(m,n,k)
    integer, len :: m,n
    integer, kind :: k
    real(kind=k), dimension(m,n) :: elements
end type matrix

...

type(matrix(4,3,selected_real_kind(0.0)) :: the_matrix 
```

笔记：

*   并非所有广泛使用的 Fortran 编译器都实现了 2008 标准的这一特性；
*   参数`m,n,k`在其声明中具有特殊属性，要么`len`要么`kind`;
*   我包含 kind-type 参数只是为了表明它存在，在定义参数化派生类型时不必包含它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T04:42:49.420

```
program main

type matrix
    integer:: m, n
    double precision, dimension(:,:), allocatable :: value
end type matrix

type (matrix) :: mat1, mat2

mat1 % m = 2
mat1 % n = 3
allocate ( mat1 % value ( mat1 % m, mat1 % n ) )
mat1 % value = 5.0

mat2 % m = 4
mat2 % n = 5
allocate ( mat2 % value ( mat2 % m, mat2 % n ) )
mat2 % value = 6.0

print*,"OK"
end program 
```

一个很好的例子，但没有理由在实际代码中创建这种特定的用户定义类型，因为您可以使用`lbound`and获得矩阵的边界`ubound`- 您不必将它们存储在类型中。

# mysql - 如何通过在其他两个表之间插 入一行来订购 mysql 表

> ID：13889328
> 
> 赞同：0
> 
> 时间：2012-12-15T04:33:12.380
> 
> 标签：mysql, insert

我敢肯定这个标题很混乱。不过，我想不出更好的表达方式。

这是我的困境；我有一张表，由数百行组成。当前列是 id（主键）、mfgr（制造商编号）、描述、价格。现在由于制造商 ID 的方式，87-10 位于 87-11 之前，但如果我通过 mfgr 订购，它将在这两者之间放置 87-100。所以我必须按其他东西订购（在这种情况下，主键自动递增 ID） 问题是，在初始设置时，ID 1 将分配给 87-10，而 id 2 将分配给 87-20。如果将来某个时候需要添加 87-11，则需要在 87-10 和 87-20 之间显示。无论如何，如果不将所有 id 移动一个，我就无法想到这样做。不过，在我这样做之前，我没有想到的另一种方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:37:15.983

拆分制造商编号并存储在 2 个字段中，例如 mfgr1、mfgr2。（例如：将 87-11 拆分为 87 和 11）

然后，您可以根据需要对行进行排序：

```
select * from table1 order by mfgr1, mfgr2; 
```

注意：如果您没有将 mfgr1 和 mfgr2 存储为整数，那么您可能希望在查询时将它们转换为整数。

解决方案 2：

这也必须有效：

```
select * from table1 order by convert(substring(mfgr,1,instr(mfgr,'-')-1), UNSIGNED INTEGER), convert(substring(mfgr,instr(mfgr,'-')+1), UNSIGNED INTEGER); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:38:45.783

存储没有`-`作为一个数字的制造商编号，并`-`仅在您在屏幕上显示时显示（在第一个两位数字之后 - 插入回`-`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T04:40:41.180

你应该能够使用类似的东西来做到这一点

```
SELECT * FROM table1 ORDER BY CAST(`mfgr` AS SIGNED) DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T04:49:49.947

它可能会更慢，但您可以创建自己的函数：

1.  使用 - 符号将字段拆分为两个数字（仍视为字符串）。
2.  使用 MySQL LPAD() 函数确保两个数字在左侧填充相同数量的零。
3.  重新组合两个填充的数字字符串并在函数中返回结果。
4.  将该函数应用于查询的 WHERE 子句。

不过，我只会对一些临时报告使用这样的方法，否则如果查询将运行很多，则分为两列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T04:56:51.250

其他答案假设所有制造商编号都是##-#...（*两位数字 - 一位或多位数字）。情况可能并非如此，或者现在可能是真的，但不能保证。这是数据库设计的问题，而不是“什么算法可以使行保持有序。如果制造商 ID 始终是应该按数字排序的两个数字组件，则它们应该存储为 2 个数字列并格式化为一个以用于显示目的。真的考虑“按顺序插入行”是没有意义的。主键永远不需要更改。听起来您正在对 ID 使用自动增量。在这种情况下，ID 除了唯一标识一行。查询将需要一个 ORDER BY 子句来按顺序排列行。

# jquery - jQuery 获取 attr 标题片段

> ID：13889333
> 
> 赞同：0
> 
> 时间：2012-12-15T04:34:02.010
> 
> 标签：jquery

```
<div class="entry-content">
  <div class="vote gensmall">
  <div class="vote-bar" title="Message reputation : 100% (1 vote)">
<div class="vote-bar-plus" style="height:50px;">
  </div>
</div>
</div> 
```

正如你在 div 上面看到的那样，`.vote-bar`我试图获得标题，不过只是其中的一部分。我只想要那个`1 vote`，就是这样。基本上我这样做是为了得到这个人有多少票，并且它会改变这个 div 的标题。

我尝试使用

```
$('.vote-bar').attr('title',function(){
//function of title
}); 
```

更像，这就是我已经走了多远，我什至不知道现在还能去哪里。或者如果我正确地执行了该功能。我仍在学习，我正在寻求帮助。我已经搜索了所有项目，但找不到我真正需要的东西。如果标题是，我可以调用一个 jQuery 代码来传递，`so forth and so forth`但我几乎没有使用过`.attr()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:36:28.760

`attr()`返回一个字符串。您可以这样对待它并正则表达式出您想要的部分。

```
parseInt(($('.vote-bar').attr('title').match(/\d+(?= vote)/) || ["0"])[0],10); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T04:36:11.957

```
$('.vote-bar').each( function() {
    var s = $(this).attr('title');
    var g = s.split("("); 
    var n = g[1]; 
    var m = n.replace(")", "");
    $(this).children(".vote-bar-plus").html(m);
}); 
```

[http://jsfiddle.net/ayjtY/1/](http://jsfiddle.net/ayjtY/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T06:12:08.507

我认为这样你就可以得到想要的结果：http: **[//jsfiddle.net/UCaeE/1/](http://jsfiddle.net/UCaeE/1/)**

```
$('.vote-bar').each( function() {
    var Title = $(this).attr('title');
    var newTitle = Title.substr(0, Title.indexOf(')')); 
    var finalTitle = newTitle.substr(newTitle.indexOf('(')+1);
    $(this).children(".vote-bar-plus").html(finalTitle);
}); 
```

# c - C 错误 - 不能与以前的“结构”声明说明符结合 && 将“MyMIDINotifyProc”重新定义为不同类型的符号

> ID：13889335
> 
> 赞同：1
> 
> 时间：2012-12-15T04:34:13.070
> 
> 标签：c, coremidi

我还是 C 的新手，但试图通过一个小型 MIDI 音频单元（在 Xcode 4.3.3 中）更好地理解它。我整天都在寻找这个问题的答案，但仍然不明白到底是什么问题。这是有问题的代码：

```
//MyMIDINotifyProc.h

#ifndef MIDIInstrumentUnit_CallbackProcs_h
#define MIDIInstrumentUnit_CallbackProcs_h

void MyMIDINotifyProc (const MIDINotification *message, void *refCon);

#endif

//MyMIDINotifyProc.c

#include <CoreMIDI/CoreMIDI.h>
#include "MyMIDINotifyProc.h"

void MyMIDINotifyProc (const MIDINotification *message, void *refCon) {
//manage notification
} 
```

在标题定义中，我得到了这个：

```
! Cannot combine with previous 'struct' declaration specifier 
```

我确保定义匹配并尝试重命名它们，但我仍然在我的 .c 文件中得到它：

```
! Redefinition of 'MyMIDINotifyProc' as different kind of symbol 
```

这将 .h 定义指向“以前的定义”。

我知道 CoreMIDI 框架中的 MIDIServices.h 定义：

```
typedef void
(*MIDINotifyProc)(const MIDINotification *message, void *refCon); 
```

但我不明白是否/为什么会导致错误。如果有人能提供一些帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:55:25.573

您忘记包含`<CoreMIDI/CoreMIDI.h>`在`MyMIDINotifyProc.h`头文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:08:07.870

更多信息在这里-但我认为您缺少我认为 typedef 所在的 MidiServices.h 文件：

[http://disanji.net/iOS_Doc/#documentation/CoreMidi/Reference/MIDIServices_Reference/Reference/reference.html](http://disanji.net/iOS_Doc/#documentation/CoreMidi/Reference/MIDIServices_Reference/Reference/reference.html)

在标头中的第一个错误之后，源文件中的错误变得毫无意义。

```
/*MIDIClientCreate - Creates a MIDIClient object. */

OSStatus MIDIClientCreate (
CFStringRef     name,
MIDINotifyProc  notifyProc,
void            *notifyRefCon,
MIDIClientRef   *outClient
); 
```

MIDINotifyProc 当 MIDI 状态改变时调用。

typedef void (*MIDINotifyProc) ( const MIDINotification *message, void *refCon );

如果您将回调函数命名为 MyMIDIStateChangedHander，您可以像这样声明它：

void MyMIDIStateChangedHander ( const MIDINotification *message, void *refCon );

参数 message 有关状态更改的信息。

refCon 您提供给 MIDIClientCreate 函数的上下文。

讨论 MIDINotifyProc 回调函数在调用 MIDIClientCreate 函数的同一线程上调用。

可用性 适用于 iOS 4.2 及更高版本。在 MIDIServices.h 中声明

# .net - .NET Reflection 可以在运行的系统上“反射”吗？

> ID：13889340
> 
> 赞同：0
> 
> 时间：2012-12-15T04:35:14.577
> 
> 标签：.net, reflection, methods, excel-dna

背景：Windows 7、Office 2007、ExcelDNA 0.30

鉴于 ExcelDNA 不支持 ParamArray，我有一个古怪的想法：Reflection 可以提供帮助吗？

在对 .NET 和 Reflection 进行了一番摆弄之后，我可以看到它非常擅长获取关于程序集的静态信息，甚至可以深入到方法的名称和数据类型。但是（我不知道去哪里找到它）它可以告诉我有关系统运行时的信息吗？

例如，我是否可以知道有多少参数实际提供给具有 30 个参数（命名为 p1 到 p30）的方法，或者我是否必须对每个参数进行长时间的选择案例检查（就像我现在没有反射一样）？我可以迭代地访问参数，从 1 到“占用”参数的数量吗？

还有一个相关的问题：我可以将两个参数传递给一个用三个参数定义的方法，但我不能将三个参数传递给一个用两个参数定义的方法。有没有一种方法可以定义一种方法来接收任意数量的参数，但**不**使用 ParamArray（请记住，我们在这里使用 ExcelDNA，它不支持 ParamArray）？

# jquery - 如何更快地解析来自 Web 的 JSON 数据

> ID：13889346
> 
> 赞同：2
> 
> 时间：2012-12-15T04:36:40.293
> 
> 标签：jquery, json

我`inventory.json`在服务器上有这样的 json 库存：

```
[ { "body" : "SUV",
    "color" : { "ext" : "White diamond pearl",
        "int" : "Taupe"
      },
    "id" : "276181",
    "make" : "Acura",
    "miles" : 35949,
    "model" : "RDX",
    "pic" : [ { "full" : "http://images1.dealercp.com/90961/000JNBD/001_0292.jpg" } ],
    "power" : { "drive" : "Front wheel drive",
        "eng" : "2.3L DOHC PGM-FI 16-VALVE",
        "trans" : "Automatic"
      },
    "price" : { "net" : 29488 },
    "stock" : "6942",
    "trim" : "AWD 4dr Tech Pkg SUV",
    "vin" : "5J8TB2H53BA000334",
    "year" : 2011
  },
  { "body" : "Sedan",
    "color" : { "ext" : "Premium white pearl",
        "int" : "Taupe"
      },
    "id" : "275622",
    "make" : "Acura",
    "miles" : 40923,
    "model" : "TSX",
    "pic" : [ { "full" : "http://images1.dealercp.com/90961/000JMC6/001_1765.jpg" } ],
    "power" : { "drive" : "Front wheel drive",
        "eng" : "2.4L L4 MPI DOHC 16V",
        "trans" : "Automatic"
      },
    "price" : { "net" : 22288 },
    "stock" : "6945",
    "trim" : "4dr Sdn I4 Auto Sedan",
    "vin" : "JH4CU2F66AC011933",
    "year" : 2010
  } ] 
```

这里有两个索引，几乎有这样的`5000`索引。我这样解析这个json：

```
var url = "inventory/inventory.json";
$.getJSON(url, function(data){
  $.each(data, function(index, item){ //straight-forward loop
    if(item.year == 2012) {
      $('#desc').append(item.make + ' ' + item.model + ' ' + '<br/>' + item.price.net + '<br/>' + item.pic[0].full); 
    }         
  });
}); 
```

这工作正常。但问题是，这个搜索和获取过程有点慢，因为已经有 5000 个索引并且它每天都在增加。看起来，解析数据和正常的`brute-force method`.

现在我想知道是否有任何时间有效的方法来更快地解析。任何更快的方法来解析而不是直接循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T04:39:29.853

数据的解析速度与解析速度一样快。您对此无能为力，因为 jQuery 将`JSON.parse()`在可用时使用本机方法。

这里真正的问题与您如何将数据附加到 DOM 有关。

首先，将您选择的元素缓存在一个变量中以供重复使用：

```
var $desc = $('#desc'); 
```

然后在你的循环中，你可以使用`$desc.append()`.

接下来，我只会在您准备好所有元素后将它们添加到 DOM 中。只做一个追加应该会给你一些速度改进，但这可能会因浏览器而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:04:28.100

如果您想加快速度，我有一些建议。

正如布拉德建议的那样，将元素缓存在变量中。查找 DOM 是昂贵的，只做一次比在循环的每次迭代中都要好得多。

其次，不要使用 jquery .each 方法，而是使用标准循环。它比任何库 foreach 或 map 方法都快得多。

第三，与其进行如此多的追加调用，不如先构建整个字符串，然后再追加。每个函数调用都是有代价的，通常非常小，但在一个长循环中，越少越好。DOM 操作的成本特别高，因此执行一次会快得多。

```
$.getJSON(url, function(data){
  var $desc = $('#desc');
  var toAppend = [];
  for (var i = 0, len = data.length; i < len; i++) {
    //build the html here
    var current = data[i];
    toAppend.push( current.make + 'etc...' );

  }
  $desc.append( toAppend.join() );
} 
```

# jquery - JQuery 获取 id 或类，而不是值

> ID：13889347
> 
> 赞同：0
> 
> 时间：2012-12-15T04:37:01.937
> 
> 标签：jquery

我是 JQuery 的新手，我想问的是如何选择一个选项，然后会自动选择另一个具有第一个选项属性的选项。

我给出了这样的代码：

```
<select name="kendaraan">
    <option value="" selected>pilih kendaraan!</option>
    <option value="B 2011 DR" class="B2011DR">B 2011 DR</option>
    <option value="R 3333 OKI" class="R3333OKI">R 3333 OKI</option>
    <option value="k03">jazz</option>
    <option value="k04">innova</option>
</select>

<select name="driver">
    <option value="" selected>pilih kendaraan!</option>
    <option value="s02" car="B2011DR" style="display:none">jojon</option>
    <option value="s01" car="B2011DR" style="display:none">mamat</option>
    <option value="s04" car="R3333OKI" style="display:none">tukul</option>
    <option value="s03" car="R3333OKI" style="display:none">mamat</option>
    <option value="s07" car="k03" style="display:none">bejo</option>
    <option value="s05" car="k03" style="display:none">mamat</option>
    <option value="s06" car="k03" style="display:none">tukul</option>
    <option value="s08" car="k04" style="display:none">budi</option>
    <option value="s09" car="">komeng</option>
</select>

$('select[name=kendaraan]').change(function() {
    //hide all option
    $('select[name=driver] option').css('display','none');
    //display option only for matched driver
    var isCar = $('select[name=driver] option[car='+$(this).val()+']');
    isCar.css('display','block');
    //auto select first matched diriver
    $('select[name=driver]').val( $(isCar[0]).val() )
}) 
```

但是 jquery 代码是为了获取“kendaraan”的值，如何将它与类匹配，而不是值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:02:16.487

我认为这正是您想要的。尝试以下

```
 <script>
// make a function that will perform your desired task every time when dropdwon value changes.
// so call this function  in document.ready and also bind change event of dropdown to this function
$(function () {
    onDDLchange();
    $('select[name$=kendaraan]').change(function () {
        onDDLchange();
    });
});

function onDDLchange() {
    var j = 0;
    var v = $('select[name$=kendaraan]').val();
    $('select[name$=driver] option').hide();
    $('select[name$=driver] option').each(function (i) {
        if (v == $(this).attr('car')) {
            if (j == 0) {
                $(this).attr('selected', 'selected');
                j = j + 1;
            }
            $(this).show();
        }
    });
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:46:05.110

```
 $(function() {  // document ready
$('option[value=""]').attr('selected', 'selected');
}); 
```

自动选择第一个选项

# php - Codeigniter，仅来自模型的“在非对象上调用成员函数 get()”错误

> ID：13889350
> 
> 赞同：0
> 
> 时间：2012-12-15T04:37:16.073
> 
> 标签：php, database, codeigniter, codeigniter-2

> **可能重复：**
> [在非对象上调用成员函数 get()](https://stackoverflow.com/questions/12024468/call-to-a-member-function-get-on-a-non-object)

我自动加载数据库库。

这是我的控制器

```
class Orders extends CI_Controller {

public function __construct()
{
    parent::__construct();
    $this->load->model('orders_model');

}

public function index()
{
    echo $this->orders_model->test();
    $data['orders'] = $this->orders_model->get_orders(); 
```

这是我的模型

```
class Orders_model extends CI_Model {

public function __construct()
{
    parent::__construct();

}

public function get_orders($slug = FALSE)
{

if ($slug === FALSE)
    {

        $query = $this->db->get('table1');
        return $query->result_array();
    }

    $query = $this->db->get_where('table1', array('numtest' => $slug));
    return $query->row_array();

}
public function test()
{
    $text = "return test";
    return $text;
} 
```

出于故障排除的目的，我将代码从模型移动到控制器成功执行了代码。但不知何故，当我尝试从我的模型中进行 get() 调用时，它不起作用。此外，从模型中调用 test() 函数也可以成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T09:37:20.337

尝试在加载模型时强制与数据库连接。您可以使用：

```
$this->load->model('orders_model', '', TRUE); 
```

# iphone - 最佳音频播放器

> ID：13889362
> 
> 赞同：1
> 
> 时间：2012-12-15T04:40:54.933
> 
> 标签：iphone, objective-c, ios, avaudioplayer

*   我想制作基于音频播放器的应用程序。我之前确实使用过 AVAudioPlayer。现在我想知道哪个是适用于 ios 的最新音频播放器。无论需要哪种集成。但它是所有可用音频播放器中最好的吗？我应该再次使用 AVAudioPlayer 还是市场上有其他好东西？

为了学习新东西，我问了这个问题，否则 AVAudioPlayer 很好。

任何建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:17:39.170

AVAudioPlayer 对音频很有用，但如果你学得不一样，那么你可以试试

mpmovieview 控制器。我也用它在我的一个应用程序中播放音频。其实会玩

视频也和音频。对于流式内容（如来自网络服务的音频/视频或

来自互联网）那么它是完美的播放器。而且它看起来也像 iPhone 默认播放器。搜索

一些关于它的教程并实现它。它也很容易实现。祝你好运。

# java - 如何阻止编译器将未初始化的对象作为错误读取

> ID：13889364
> 
> 赞同：2
> 
> 时间：2012-12-15T04:41:50.637
> 
> 标签：java, object, null

我有 Eclipse，当我尝试查看未初始化的对象是否等于 null 时，它不会让我这样做，它会出现“x 可能尚未初始化”错误，我知道它应该可以工作。

我的意思的例子：

```
 Object obj;
      System.out.println(obj==null ? "no value":"has a value"); 
```

它不会编译，它会说'obj可能没有被初始化'我怎样才能在eclipse中更改我的编译器设置来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T04:47:58.147

> 如何在 eclipse 中更改我的编译器设置来解决这个问题？

你不能。Java 语言规范*要求*任何符合标准的 Java 编译器将此视为编译错误。

没有 Eclipse 编译器设置会导致它违反此规则。

即使（假设地）有这样的设置，我*认为*当 JVM 尝试加载字节码文件时，它也会验证失败。（如果你能以某种方式欺骗 JVM 使用未初始化的局部变量的值，那将破坏运行时类型的安全性，导致 JVM 崩溃……甚至更糟。）

* * *

如果`obj`是实例变量而不是局部变量，它将*默认初始化*为`null`并且您不会收到编译错误。但是局部变量没有默认初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T04:43:55.670

您无需更改 eclipse 中的编译器设置来解决此问题：您只需初始化变量`obj`.

```
 Object obj = null;
      System.out.println(obj==null ? "no value":"has a value"); 
```

来自[Java 规范 4.12.5 - 变量的初始值](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)：

> 局部变量（第 14.4 节、第 14.14 节）必须在使用之前通过初始化（第 14.4 节）或赋值（第 15.26 节）显式赋予一个值，其方式可以使用明确赋值规则（第16）。

如果你真的不想初始化`obj`，你需要让它成为一个类的成员而不是一个局部变量。然后它将有一个默认初始值：（再次，请参阅[Java 规范 4.12.5 - 变量的初始值](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)）

```
public class Example {

    private static Object obj;

    public static void main(String[] argv) throws Exception {
        System.out.println(obj==null ? "no value":"has a value");
    }

} 
```

...但在引擎盖下它仍在初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T04:44:38.603

这是一个局部变量，您需要使用以下方法对其进行初始化：

```
Object obj = null; 
```

虽然类和对象以及数组的某些字段可能被隐式初始化为有用的默认值，但局部变量并非如此。

如果您想理解这一点，则第`16.2.4`( `Local variable declaration statements`) 部分`JLS7`是要阅读的部分，但需要一些时间才能理解，它非常迟钝:-)

您可能希望从`16`( `Definite Assignment`) 部分的顶部开始，然后从那里完成。第一部分有两段在这里最相关（我用斜体表示强调）：

> 对于局部变量或空白`final`字段的每次访问`X`，都`X` *必须*在访问前明确赋值，否则会发生编译时错误。
> 
> *当且仅当*变量的简单名称（或者，对于字段，其简单名称由 限定`this`）出现在赋值运算符的左侧时，才会定义这样的赋值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T04:47:08.997

**编译器显示错误，因为规则是所有局部变量必须在首次读取之前进行初始化。所以先声明局部变量不初始化，稍后初始化，再使用：**

```
Object obj = null;

 System.out.println(obj==null ? "no value":"has a value"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T09:04:19.543

> 如何在 eclipse 中更改我的编译器设置来解决这个问题？

解决方案是修复您的代码。此错误的目的是检测和防止错误。采取措施允许编译损坏的代码通常是一个非常糟糕的主意。

# c# - C# 动态 IF Else 语句

> ID：13889365
> 
> 赞同：-6
> 
> 时间：2012-12-15T04:42:05.917
> 
> 标签：c#, if-statement

```
allrowcol[i] = rowcol + "||"; 
```

是否可以放：

```
if (loop == allrowcol.ToString()) 
```

如果没有，我如何在`if`语句中放置一些值？

我需要在 中包含一些值`if`，并且该值是从文本文件生成的。

例如`if(loop==11||14||15||16")`

我的数组`allrowcol.ToString()`是“11||14||15||16||”。`rowcol`是我从文本文件中提取的数字。但是我的`if`（作为一个完整的字符串阅读）。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T04:51:07.330

我猜你是在问如何在一个未知大小的集合中测试多个项目。如果是这样的话：

```
bool isMatch = true;
string valueToCompare = "some value";

for( int i = 0; i < allrowcol.Length; i++ ){
   if( allrowcol[i] != valueToCompare ){
       isMatch = false;
       break;
   }
}

if( isMatch ){
    // do something
} 
```

或者，如果您只想一次测试所有值，则将它们连接起来，例如使用`string.Join()`. 请参阅此问题：[C#: string[] to delimited string。有单行吗？](https://stackoverflow.com/questions/3558246/c-string-to-delimited-string-is-there-a-one-liner)

# sql - 从 Group By 获取发生次数

> ID：13889368
> 
> 赞同：-2
> 
> 时间：2012-12-15T04:42:55.497
> 
> 标签：sql, count, group-by

我在 MySQL 中有一张表

```
 id     hash                              keyword_id
 5      643876315258ecad248bf0de3bff71df    1
 6      643876315258ecad248bf0de3bff71df    4
 15     7ccd09a7b99d386855004a94ef35b42f    2
 16     7ccd09a7b99d386855004a94ef35b42f    3
 17     7ccd09a7b99d386855004a94ef35b42f    1 
```

我想按keyword_id 的出现次数进行分组，所以我的结果应该是这样的。

```
keyword_id  occurrences 
1             2
2             1
3             1
4             1 
```

我试图这样做：

```
select count(Distinct keyword_id) as "Total"
from default_keywords_applied
groupby keyword_id 
```

但我遇到了一些错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:46:03.207

消除`DISTINCT`

```
SELECT keyword_id, COUNT(keyword_id) AS occurrences 
FROM default_keywords_applied 
GROUP BY keyword_id 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/53268/3)

是的，正如[@PeterJ 所说](https://stackoverflow.com/questions/13889368/getting-the-count-of-occurances-from-a-groupby-in-sql#comment19134337_13889368)`group by`，您的查询中没有空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T04:46:02.443

mysql_query 会是这样的

```
select keyword_id,count(keyword_id) as occurance from table group by keyword_id 
```

# php - 在 SQL/PHP 网站菜单中更改递归条件

> ID：13889369
> 
> 赞同：1
> 
> 时间：2012-12-15T04:43:03.920
> 
> 标签：php, mysql, recursion, navigation

我正在使用从 SQL 数据库中提取的内容修改一个用 PHP 构建的站点。原始开发人员使用以下代码创建了导航。它从 CMS 页面创建导航 - 它适用于顶级页面，但我正在尝试修改子页面的呈现方式。

我想要它做的是当存在子页面时，它首先打开一个包含格式的 DIV，然后使用下面的“while”语句填充子页面菜单。最后，当 subpagemenu 完成时，它会关闭 DIV。

在完成填写子页面菜单的循环之前，我似乎无法确定哪个条件“打开”了子页面菜单。

任何和所有的帮助表示赞赏 - 谢谢！

```
<?
$pagesrc = $_SERVER['SCRIPT_NAME'];
$getPID_sql = "SELECT * FROM tblPages WHERE parentID = 0";
$getPID_result = mysql_query($getPID_sql);
if(!$getPID_result){print mysql_error()."<br />";}else{
    while ($row = mysql_fetch_array($getPID_result, MYSQL_ASSOC)) {
  $parentID = $row["pageID"];
  $linkName = $row["pageTitle"];
  $linkID = $row["pageID"];
  print "<A href = '".$pagename."?id=".$linkID."'>".$linkName."</A> | ";
  if($pageID){
    $subpages_sql = "SELECT * FROM tblPages WHERE parentID = $parentID";
    $subpages_results = mysql_query($subpages_sql);
    if(!$subpages_results){print mysql_error();}else{
        $rowcount = mysql_num_rows($subpages_results);
            if($rowcount > 0){
            while ($row2 = mysql_fetch_array($subpages_results, MYSQL_ASSOC)) {
            $sublinkName = $row2["pageTitle"];
            $sublinkID = $row2["pageID"];
            $sublinkParentID = $row2["parentID"];
            if($sublinkParentID == $pageID || $sublinkParentID == $PID){            
print "<a href='".$pagename."?id=".$sublinkID."'>".$sublinkName."</a>";
            }   
        }   
        }
    }       
    }
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:52:55.927

```
<?
$pagesrc = $_SERVER['SCRIPT_NAME'];
$getPID_sql = "SELECT * FROM tblPages WHERE parentID = 0";
$getPID_result = mysql_query($getPID_sql);
if(!$getPID_result){print mysql_error()."<br />";}else{
    while ($row = mysql_fetch_array($getPID_result, MYSQL_ASSOC)) {
  $parentID = $row["pageID"];
  $linkName = $row["pageTitle"];
  $linkID = $row["pageID"];
  print "<A href = '".$pagename."?id=".$linkID."'>".$linkName."</A> | ";
  if($pageID){
    $subpages_sql = "SELECT * FROM tblPages WHERE parentID = $parentID";
    $subpages_results = mysql_query($subpages_sql);
    if(!$subpages_results){print mysql_error();}else{
        $rowcount = mysql_num_rows($subpages_results);
            if($rowcount > 0){
                    echo "<div class='submenu'>"; //you can either give class or id whatever you want
            while ($row2 = mysql_fetch_array($subpages_results, MYSQL_ASSOC)) {
            $sublinkName = $row2["pageTitle"];
            $sublinkID = $row2["pageID"];
            $sublinkParentID = $row2["parentID"];
            if($sublinkParentID == $pageID || $sublinkParentID == $PID){            
print "<a href='".$pagename."?id=".$sublinkID."'>".$sublinkName."</a>";}   
        } 
            echo "</div>";  
        }
    }       
    }
}
}
?> 
```

在需要的地方添加了标签

# php - 使用复选框从 mysql 表中获取两个值

> ID：13889376
> 
> 赞同：0
> 
> 时间：2012-12-15T04:44:43.813
> 
> 标签：php, mysql

所以我有一个医院收费的mysql表。我的程序目前只获得检查程序的价格。但是现在，我还想在检查时获取过程名称。

```
while($row = mysql_fetch_array($result)){

            echo '
            <tr>
                <td>'.$row[0].'</td>
                <td>'.$row[1].'</td>
                <td>'.$row[2].'</td>';
                $price=$row['price'];
            echo '<td><input type="checkbox" name="er[]" value="'.$price.'"></td>';
            echo "</tr>";

        }
        echo '</table>'; 
```

所以基本上我需要编辑这部分代码：

```
$price=$row['price'];
echo '<td><input type="checkbox" name="er[]" value="'.$price.'"> 
```

它只获得价格行。value 属性可以有两个值吗？我不能只做另一个不合适的复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:54:21.647

您可以简单地将名称放在另一个属性（如标题）中，并且每当您需要获取名称时，您可以使用一些 javascript 来检索它。

```
$price=$row['price'];
echo '<td><input type="checkbox" name="er[]" value="'.$price.'" title="'.$name.'"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:15:14.530

像这样更改代码

```
<?
while($row = mysql_fetch_array($result)){

            echo '
            <tr>
                <td>'.$row[0].'</td>
                <td>'.$row[1].'</td>
                <td>'.$row[2].'</td>';
                $price=$row['price'];
        $procedure_name=$row['$procedure_name'];
            echo '<td><input type="checkbox" name="er" value="'.$price.','.$procedure_name.'"></td>';
            echo "</tr>";

        }
        echo '</table>';
?> 
```

然后使用explode()

# hash - 您将使用哪种数据结构来存储指向非常大图的邻接链表的指针？

> ID：13889378
> 
> 赞同：-3
> 
> 时间：2012-12-15T04:45:16.700
> 
> 标签：hash, graph

假设你想实现一个可以有百万个节点的图。但是节点数会从0增加到百万。不确定它是否会达到百万大关。它也可能跨越到数百万个节点。

我知道邻接表是用来做这个的。但是一个典型的邻接表有一个数据结构维护指向链表的指针。

那么应该使用什么数据结构来存储指向邻接表的指针？

以 Facebook 为例。它拥有数百万用户。假设每个用户代表一个节点。现在所有用户都表示为一个非常大的单个图的节点，您想对其进行操作，您将如何存储它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:47:26.923

好吧，如果您了解它们背​​后的基础知识，那应该不会太难。

通常，您会创建一个名为“buckets”的数组，其中包含键和值，以及用于创建链接列表的可选指针。

当您使用键访问哈希表时，您使用自定义哈希函数处理该键，该函数将返回一个整数。然后你取结果的模数，这就是你的数组索引或“桶”的位置。然后你用存储的密钥检查未散列的密钥，如果匹配，那么你找到了正确的位置。

否则，您就发生了“冲突”，必须爬过链表并比较键，直到匹配为止。（注意一些实现使用二叉树而不是链表来解决冲突）。

查看这个快速哈希表实现：

[http://attractivechaos.awardspace.com/khash.h.html](http://attractivechaos.awardspace.com/khash.h.html)

# jquery - 如何自定义 jquery ui 日期选择器？

> ID：13889379
> 
> 赞同：0
> 
> 时间：2012-12-15T04:45:28.557
> 
> 标签：jquery, datepicker, customization

我想通过将服务器日期设置为当前日期来自定义 jquery ui 日期选择器。

参考一个[问题后](https://stackoverflow.com/questions/1953840/datepickersetdate-issues-in-jquery)

我写下了

```
var queryDate = '2012-11-15',
    dateParts = queryDate.match(/(\d+)/g)
    realDate = new Date(dateParts[0], dateParts[1] - 1, dateParts[2]);  
                                // months are 0-based!

$('#datepicker').datepicker('setDate', realDate);
$('#datepicker').datepicker({ dateFormat: 'yy-mm-dd' }); 
```

它有效，但是当我将第二步更改为

```
$('#datepicker').datepicker({ dateFormat: 'yy-mm-dd',minDate: 0,maxDate: '+6M' }); 
```

它根据系统日期而不是我分配的服务器日期显示日期，

这个怎么解决？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:52:33.340

您可以将输入字段的值设置为来自服务器端的值：

```
<script>
var queryDate = '2012-02-25';
var dateParts = queryDate.match(/(\d+)/g);

var realDate = new Date(dateParts[0], dateParts[1] - 1, dateParts[2]);

var min_date = new Date(2012, 2 - 1, 25 - 20); //feb 5 is the min date
var max_date = new Date(2012, 2 - 1, 25 + 1); //feb 26 is the max date

$( "#date" ).datepicker({dateFormat: 'yy-mm-dd', minDate: min_date, maxDate: max_date});
$( "#date" ).datepicker("setDate", realDate);
</script> 
```

在这种情况下，我们将日期设置为 2012-02-25。为了使其工作，您必须将日期选择器的格式设置为与您用于值的格式相同`'Y-m-d'`

# python - 一个段落中的 Reportlab 粗体和普通文本

> ID：13889384
> 
> 赞同：3
> 
> 时间：2012-12-15T04:46:18.043
> 
> 标签：python, formatting, reportlab

我正在使用 reportlab（与 Django 结合）创建 PDF。我创建了以下代码来创建带有头部和详细信息的表格：

```
elements = []
datas = []
course_info = [
               ['Course Code' , c.course_code] ,
               ['Course Title' , c.course_name],
               ['Prerequisites by Course(s) and Topics', c.pre_reqs],
               ['Assessment Instruments with Weights (some desc)', c.grade_distribution]
            ]

for k in course_info: 
    headpara = Paragraph(k[0], styleB)

    datas.append([headpara , Paragraph(clean_string(k[1]), styleN)])

t = LongTable(datas, colWidths=[5 * cm, 12 * cm])

t.setStyle(TableStyle(org.getTableStyle()))
elements.append(t)
doc.build(elements) 
```

我使用 BaseDocTemplate 作为我的模板。**我想要的是能够将部分设置`headpara`为非粗体，例如`(some desc)`第四行中的部分需要是普通样式而不是粗体。**我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T05:46:36.343

Reportlab 支持简单的 HTML 格式，因此我们可以使用`styleN`所需的文本并将其设为粗体。像这样：

```
course_info = [
               ['<b>Course Code</b>' , c.course_code] ,
               ['<b>Course Title</b>' , c.course_name],
               ['<b>Prerequisites by Course(s) and Topics</b>', c.pre_reqs],
               ['<b>Assessment Instruments with Weights</b> (some desc)', c.grade_distribution]
            ]

for k in course_info: 
    headpara = Paragraph(k[0], styleN) 
    datas.append([headpara , Paragraph(clean_string(k[1]), styleN)]) 
```

# javascript - SyntaxError: Unexpected Number (JSON.parse)

> ID：13889386
> 
> 赞同：4
> 
> 时间：2012-12-15T04:46:47.797
> 
> 标签：javascript, json, parsing

我的 JSON 字符串，

```
JSON.parse('{"start_date_time": ["2012-12-05 04:45:42.135000", "None"], "terminal_no": ["T1081", "None"], "master_doc_no": ["100008", "100008"], "notes": ["", ""], "doc_no": ["1000018", "1000019"], "location_code": ["1005", "1005"], "end_date_time": ["2012-12-05 05:27:04.529000", "None"], "doc_status": ["CC Ended", "Draft"], "bc_list": ["[{\"465\":\"85\"},{\"306\":\"6\"},{\"306\":\"47\"},{\"306\":\"366\"},{\"306\":\"634\"}]", "[{\"257\":\"14\"}]"]}') 
```

但它抛出**SyntaxError: Unexpected Number**

我在这里错在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T05:06:38.250

You can start by simplifying this down to where the problem occurs, in `bc_list`...

```
JSON.parse('{"bc_list": ["", "{\"257\":\"14\"}]"]}') 
```

The issue is that your backslashes are being considered for the outer quotes on `JSON.parse()` instead of the inner data. You must escape the backslashes as well.

```
JSON.parse('{"bc_list": ["", "{\\"257\\":\\"14\\"}]"]}') 
```

Your whole line fixed becomes:

```
JSON.parse('{"start_date_time": ["2012-12-05 04:45:42.135000", "None"], "terminal_no": ["T1081", "None"], "master_doc_no": ["100008", "100008"], "notes": ["", ""], "doc_no": ["1000018", "1000019"], "location_code": ["1005", "1005"], "end_date_time": ["2012-12-05 05:27:04.529000", "None"], "doc_status": ["CC Ended", "Draft"], "bc_list": ["[{\\"465\\":\\"85\\"},{\\"306\\":\\"6\\"},{\\"306\\":\\"47\\"},{\\"306\\":\\"366\\"},{\\"306\\":\\"634\\"}]", "[{\\"257\\":\\"14\\"}]"]}') 
```

Don't use JSON data within strings within JSON data. It's a mess.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-22T16:05:43.183

这通常意味着您在计算中缺少一个运算符，或者有一个非法运算符。

例如：

```
var a = 1000 * 1000; // correct
var b = 1000 1000;   // incorrect
var c = 1234;        // correct
var d = 1,234;       // incorrect 
```

vars b 和 d 将导致：

```
Uncaught SyntaxError: Unexpected number 
```

# javascript - Javascript - 函数工作一次，但不再工作

> ID：13889388
> 
> 赞同：1
> 
> 时间：2012-12-15T04:47:00.667
> 
> 标签：javascript

我正在构建一个非常简单的灯箱脚本；当您单击按钮时，将创建灯箱。当您单击灯箱背景时，它会被删除。

第一次调用该函数时它工作得很好。单击按钮，灯箱显示，单击灯箱，它消失。但是，如果您尝试再次单击按钮，则不会发生任何事情 - 不会调用 div。没有控制台错误什么的，不知道是什么问题。

**JSFIDDLE** [http://jsfiddle.net/3fgTC/](http://jsfiddle.net/3fgTC/)

**代码**

```
function closeLightBox(){
        document.body.removeChild(lightBox);
}

function createElem(){
    var elem = "<div id='lightBox'></div>";
    var bodyElem = document.body;
        bodyElem.innerHTML = elem + bodyElem.innerHTML;
    var lightBox = document.getElementById("lightBox");
        lightBox.style.width = "100%";
        lightBox.style.height = "800px";
        lightBox.style.backgroundColor = "rgba(0,0,0,.5)";
        lightBox.onclick = function(){
            closeLightBox();
        }
}
var button = document.getElementsByClassName("btn");
    for (var i = 0; i<button.length; i++){
        button[i].onclick = function(){
            createElem();
        }
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T04:52:11.947

不要添加到`innerHTML`; 这使得浏览器重新解析 HTML 并重新创建每个 DOM 元素，在此过程中丢失事件处理程序。相反，使用`document.createElement`：

```
var lightBox = document.createElement('div');
document.body.insertBefore(lightBox, document.body.firstChild); 
```

此外，内联`closeLightBox`：

```
lightBox.onclick = function() {
    document.body.removeChild(lightBox);
} 
```

**[试试看。](http://jsfiddle.net/LxmZK/)**

# javascript - 有没有办法在 Javascript 中创建子字符串，但使用字符串字符作为您要选择的参数？

> ID：13889390
> 
> 赞同：1
> 
> 时间：2012-12-15T04:47:11.567
> 
> 标签：javascript, html

所以一个子字符串可以有两个参数，开始的索引和停止的索引，就像这样

```
 var str="Hello beautiful world!";
   document.write(str.substring(3,7)); 
```

但是有没有办法将起点和终点指定为一组要抓取的字符，所以不是起点是 3，我希望它是“lo”，而不是终点是 7，我希望它成为“wo”，所以我会抓住“lo beautiful wo”。是否已经有一个 Javascript 函数可以达到这个目的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T04:56:01.757

听起来您想改用正则表达式和 string.match() ：

```
var str="Hello beautiful world!";
document.write(str.match(/lo.*wo/)[0]); // document.write("lo beautiful wo"); 
```

注意，match() 返回一个匹配数组，如果没有匹配，它可能为空。所以你应该包括一个空检查。

如果您不熟悉正则表达式，这是一个很好的来源： [http ://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T04:52:05.793

使用方法`indexOf`：
`document.write(str.substring(3,str.indexOf('wo')+2));`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T04:54:03.037

是的，您可以使用正则表达式轻松做到这一点：

```
var substr = /lo.+wo/.exec( 'Hello beautiful world!' )[0];
console.log( substr ); //=> 'lo beautiful wo' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T04:56:32.107

正则表达式或许能在一定程度上做到这一点，但是有很多细节是你必须要注意的。

例如，如果要查找以 开头`"lo"`并以**最近的** `"wo"`after结尾的所有子字符串`"lo"`。（如果有超过 1 个匹配项，后续匹配项将选取最后一个匹配项`"lo"`之后的第`"wo"`一个匹配项）。

```
"Hello beautiful world!".match(/lo.*?wo/g); 
```

使用 RegExp 构造函数，您可以使其更加灵活（您可以用您想要查找的实际字符串替换它）`"lo"`：`"wo"`

```
"Hello beautiful world!".match(new RegExp("lo" + ".*?" + "wo", "g")); 
```

**重要提示：** *上述 RegExp 方法的缺点是，您需要知道哪些字符是特殊的才能对它们进行转义 - 否则，它们将与您要查找的实际子字符串不匹配。*

* * *

它也可以用 实现`indexOf`，尽管有点脏。对于第一个子字符串：

```
var startIndex = str.indexOf(startString);
var endIndex =  str.indexOf(endString, startIndex);
if (startIndex >= 0 && endIndex >= 0)
    str.substring(startIndex, endIndex + endString.length) 
```

* * *

如果要查找字符串中以第一个开头`"lo"`并以最后一个结尾的子`"wo"`字符串，可以使用`indexOf`and`lastIndexOf`来查找它（对上面的代码稍作修改）。RegExp 也可以做到这一点，通过在上面的两个示例中更改`.*?`为`.*`（最多会有 1 个匹配项，因此末尾的“g”标志是多余的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T04:57:03.647

使用正则表达式兄弟：

```
 if (/(lo.+wo)/.test("Hello beautiful world!")) {
    document.write(RegExp.$1);
   } 
```

您需要一个备份计划，以防字符串不匹配。因此使用测试。

# css - 如何排列 HTML5 网页元素？

> ID：13889391
> 
> 赞同：1
> 
> 时间：2012-12-15T04:47:15.050
> 
> 标签：css, html

我正在尝试制作一个示例网页来熟悉 HTML5，并且我想尝试复制 Facebook 的页面布局；即跨越整个屏幕宽度的页眉、底部的小页脚和三栏主体，由左侧的链接列表、中间的主要内容和可选部分组成在右侧（用于广告、框架等）。它很整洁，可以在多种窗口大小中很好地显示。

到目前为止，我已经尝试分别使用 a `<header>`、`<footer>`a`<nav>`和`<section>`block 来实现这一点。但是，该页面存在一些异常情况。当窗口最大化时，页脚（包含一个带有版权信息的简单文本块）出现在页面右上角的页眉下方。另一方面，当没有足够的空间来显示窗口中的所有内容时，它会将主体文本放在该部分的下方。换句话说，它不断移动元素以适应窗口。

有人可以告诉我如何实现我想要的外观吗？我已经尝试过使用我通过 Google 阅读到的一些 CSS 属性，但我很确定我不知道自己在做什么，并且真的可以使用一些指导。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:03:46.367

Can't help much without your code. But I am sure it is because of `float` issue. add this CSS property to your footer `clear: both`

Hope it might help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:07:27.890

I'm not sure if you're trying to make yourself a little hack, or if you're looking for a complete library that will do all this for you, but if you're looking for the latter, I recommend [Twitter Bootstrap](http://twitter.github.com/bootstrap/), which is a cross-platform solution for implementing many HTML5 features, and even resorts to fallbacks for non-modern browsers. The only drawback is the requirement of [jQuery](http://jquery.com/) in order to initialize the components that are responsive*. However, this is optional if you are not looking to implement [these features](http://twitter.github.com/bootstrap/javascript.html). The responsive design, amazingly, does not require javascript since it is pure CSS. Hope this helps!

*Edit: meant "interactive" there, not "responsive."

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T05:00:40.060

这不是一个 HTML5 问题，而是对 HTML 和 CSS 的基本理解。如果你要进入网络开发，你需要了解基本的 CSS，比如浮动等。我会推荐一些 YouTube 或 NetTuts 上的教程。只需使用几个 div，在页面中移动它们，使用 CSS 操作它们，它就会开始融合在一起。然后制作一个带有固定页眉和页脚的三列布局看起来就像小菜一碟。

[带 CSS 的浮动 div](http://www.youtube.com/watch?feature=player_detailpage&v=SVVZa01TrwE)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T05:00:49.200

我发现 CSS 非常难。制作一个看起来不错并且可以在许多不同平台和浏览器上运行的页面是相当困难的。您可能会发现使用 CSS 框架是最简单的，例如[Bootstrap](http://twitter.github.com/bootstrap/)。

将其放入您的网站，并使用它来制作您的布局。使用浏览器的开发工具（ Firefox 的[Firebug](http://getfirebug.com/)）来检查应用于各种元素的样式。修改样式以满足您的需求。

HTML5 并没有真正免费为您提供页面布局。您提到的元素（`header`、`section`等）用于创建语义页面，而不是指定它们应该如何显示。

# javascript - jQuery获取文本阴影变量（多个阴影）

> ID：13889405
> 
> 赞同：0
> 
> 时间：2012-12-15T04:50:01.953
> 
> 标签：javascript, jquery, regex, css

我想将所有阴影应用于一个元素。

```
box-shadow:10px 0px 10px rgba(1, 2, 1, .5),0px 10px 10px rgba(1, 1, 1, .5); 
```

我需要将它放入变量中： Shadow1 = "10px 0px 10px rgba(1, 1, 1, .5)" Shadow2 = "10px 0px 10px rgba(1, 1, 1, .5)"

此外，颜色可以是任何格式：rgb()、rgba() 或 #...所以它可以是这样的

```
box-shadow:10px 0px 10px rgb(1, 1, 1, .5),0px 10px 10px #222,0px 10px 10px rgba(1, 1, 1, .5); 
```

我不需要阴影的内部值，只需将每个阴影的字符串分开即可。

```
Shadows = 
{
   shadow1 : "10px 0px 10px rgb(1, 40, 1, .5)",
   shadow2 : "0px 10px 10px #222",
   shadow3 : "0px 10px 10px rgba(1, 1, 1, .5)"
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:51:56.127

一种简单的方法是在类中分离阴影。

# jquery - 呈现页面时，jQuery DataTable 无法正确调整大小

> ID：13889406
> 
> 赞同：1
> 
> 时间：2012-12-15T04:50:36.670
> 
> 标签：jquery, asp.net, datatables

我一直在与这个问题作斗争一段时间。我的 jQuery DataTable 的宽度只有在我调整屏幕大小后才能正确显示。观看此截屏视频，看看会发生什么：

[http://screencast.com/t/QY2ZgZp4By](http://screencast.com/t/QY2ZgZp4By)

这是场景：

使用 ASP.NET，我从 CSV 文件导入数据并动态构建表。该文件具有可变数量的列 - 因此它可以是任意数量的列。

生成表格后，我调用 DataTable 脚本来格式化表格，如下所示：

```
 Private Sub CreateInputDataTable()

        Dim input As BA.Input = CurrentInput
        Dim inputLines As BA.InputLines = input.Lines
        Dim columnHeaders As BA.InputColumnHeaders = input.ColumnHeaders
        'Dim loadDefItems As BA.InputLoadDefinitionItems = CurrentInputLoadDefinition.DefinitionItems

        phInputLoadData.Controls.Clear()

        Dim tblRows As Integer = inputLines.Count
        Dim tblCols As Integer = 19 ' Hard coded col number to create sample
        ' Create a Table and set its properties 
        Dim tbl As Table = New Table()
        ' Add the table to the placeholder control

        tbl.ID = "tblInputLoad"
        tbl.Attributes.Add("runat", "server")
        tbl.Width = Unit.Percentage(100)

        phInputLoadData.Controls.Add(tbl)

        'Add dropdown boxes to row headers
        Dim thr As TableHeaderRow = New TableHeaderRow()
        thr.TableSection = TableRowSection.TableHeader

        For i As Integer = 0 To tblCols - 1
            Dim cboColName As DropDownList = New DropDownList()

            Dim thc As TableHeaderCell = New TableHeaderCell()
            thc.Width = Unit.Pixel(80)

            thc.CssClass = "input-def-col-header"

            With cboColName
                .ID = "cboColName_" + i.ToString()
                .Width = Unit.Pixel(80)

                AddHandler cboColName.PreRender, AddressOf cboColName_PreRender

            End With

            'Add control to the table cell
            thc.Controls.Add(cboColName)

            'Add table cell to the TableRow
            thr.Cells.Add(thc)
        Next

        tbl.Rows.Add(thr)

        ' Add column headers
        thr = New TableHeaderRow()
        thr.TableSection = TableRowSection.TableHeader

        For i As Integer = 0 To tblCols - 1
            Dim thc As TableHeaderCell = New TableHeaderCell()
            thc.Width = Unit.Pixel(80)
            Dim txtBox As TextBox = New TextBox()

            txtBox.CssClass = "input-file-col-header"
            txtBox.Text = columnHeaders(i).ColumnHeaderName
            txtBox.Width = Unit.Pixel(80)
            ' Add the control to the TableCell
            thc.Controls.Add(txtBox)
            ' Add the TableCell to the TableRow
            thr.Cells.Add(thc)
        Next

        tbl.Rows.Add(thr)

        Dim tr As TableRow = New TableRow
        tr.TableSection = TableRowSection.TableBody

        ' Now iterate through input lines and add controls 
        For i As Integer = 0 To tblRows - 1
            tr = New TableRow()

            For j As Integer = 0 To tblCols - 1
                Dim tc As TableCell = New TableCell()
                tc.Width = Unit.Pixel(80)
                Dim txtBox As TextBox = New TextBox()
                txtBox.Width = Unit.Pixel(80)
                txtBox.Text = inputLines(i).Items(j).Value

                If inputLines(i).Items(j).ItemType <> BudgetAllocations.InputDefinitionColumnType.Data Then
                    txtBox.CssClass = "input-file-frozen-left-cols"
                End If

                ' Add the control to the TableCell
                tc.Controls.Add(txtBox)
                ' Add the TableCell to the TableRow
                tr.Cells.Add(tc)
            Next j

            ' Add the TableRow to the Table
            tbl.Rows.Add(tr)
        Next i

        ClientScript.RegisterClientScriptBlock(Me.GetType(), "FormatInputTable", _
              "$(document).ready(function() {FormatInputTable();});", True)

    End Sub 
```

该表被插入到 ASP.NET 占位符中，如下所示：

```
 <div id="div-input-load-cont" style="float: left; width: 70%; margin-top: 5px; height: 350px">
    <asp:PlaceHolder ID="phInputLoadData" runat="server" EnableViewState="False"></asp:PlaceHolder>
  </div> 
```

这是格式化表格的脚本：

```
 function FormatInputTable() {
  var oTable = $('#ctl00_MainContent_tblInputLoad').dataTable({
    "bJQueryUI": false,
    "sScrollY": "300px",
    "sScrollX": "100%",
    "sScrollXInner": "50%",
    "bScrollCollapse": true,
    "bPaginate": false,
    "bRetrieve": false,
    "bFilter": false,
    "bAutoWidth": false
  });
  new FixedColumns(oTable, {
    "iLeftColumns": 2,
    "iLeftWidth": 170,
    "bAutoWidth": false
  });
}; 
```

我的问题：当呈现 HTML 页面时，由于表格的宽度，我的整个右侧容器会浮动到左侧。在这个演示中，我将列数设置为 19。但是，当我最小化屏幕时，所有内容都会按照预期的方式正确显示。

我的问题：我该怎么做才能确保正确显示重新格式化的数据表，而不是向左浮动？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:56:29.030

`float:left`你应该从风格中清除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:16:36.070

将 Overflow:hidden 添加到容器中解决了如下所示的问题：

```
 <div id="div-input-load-cont" style="float: left; width: 100%; overflow: hidden; margin-top: 5px;
            height: 350px">
            <asp:PlaceHolder ID="phInputLoadData" runat="server" EnableViewState="False">
            </asp:PlaceHolder>
        </div> 
```

# php - 这个代码块是如何工作的？

> ID：13889407
> 
> 赞同：0
> 
> 时间：2012-12-15T04:50:37.170
> 
> 标签：php

我无法理解以下代码是如何工作的。

```
$start = 1;
while($start<10){
    if ($start&1) {
      echo "ODD  ".$start." <br/> ";
    }
    else {
      echo "EVEN  ".$start." <br/> ";
    }
    $start++;
} 
```

将`$start&1`分别返回 ODD 和 EVEN。

**输出**

```
ODD 1
EVEN 2
ODD 3
EVEN 4
ODD 5
EVEN 6
ODD 7
EVEN 8
ODD 9 
```

如果我们给出`$start&2`而不是`$start&1`，它会以另一个顺序返回。

`&1` `&2`等等...如何在这里工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T04:52:54.207

它是[按位和运算符](http://en.wikipedia.org/wiki/Bitwise_operation)。

```
 0001 --> 1
& 0001
  ----
  0001 --> 1

  0010 --> 2
& 0001
  ----
  0000 --> 0

  0011 --> 3
& 0001
  ----
  0001 --> 1 
```

根据字节顺序，最左边或最右边的位在此检查中很重要。以上是与 1 的 &ing。在您的第二个示例中，与 2 的 &ing 将是

```
 0001 --> 1
& 0010
  ----
  0000 --> 0

  0010 --> 2
& 0010
  ----
  0010 --> 2

  0011 --> 3
& 0010
  ----
  0010 --> 2 
```

为了进一步比较，这里是 1-3 &ing 与 3

```
 0001 --> 1
& 0011
  ----
  0001 --> 1

  0010 --> 2
& 0011
  ----
  0010 --> 2

  0011 --> 3
& 0011
  ----
  0011 --> 3 
```

要查看发生了什么，请按照两个数字的列向下移动。如果它们都是 1，则结果将该位置的位设置为 1。如果其中任何一个为 0，则结​​果在该位置为 0。所以对于 2 & 3 ..

```
 0010 --> 2
& 0011
  ----
  0010
  ||||
  |||+- 0 and 1, so 0
  ||+-- 1 and 1, so 1
  ++--- 0 and 0, so 0

  0010 == 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T04:53:46.730

此代码基于`&`运算符（`AND` [***按位运算***](http://php.net/manual/en/language.operators.bitwise.php)符）：
`$start&1`如果最右边的位为 1 => 数字为奇数，则返回 true

例如，`5`(odd) 的二进制表示为：

```
101 
```

和`1`：

```
001 
```

所以`101 & 001`将返回`001`它也在`true`PHP 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T05:31:29.193

位运算符`&`处理[位](http://en.wikipedia.org/wiki/Binary_numbers)。在计算机上，数字存储为二进制数据（1 和 0，也称为“位”）。这是循环中使用的数字表。

```
1 = 0001
2 = 0010
3 = 0011
4 = 0100
5 = 0101
6 = 0110
7 = 0111
8 = 1000
9 = 1001 
```

与十进制数不同，二进制数从右到左读取。当您查看该表时，您可以看到偶数和奇数二进制数分别以`0`和结尾。`1`二进制数以`0`偶数结尾，`1`以奇数结尾。

位`&`运算符所做的基本上是从十进制的二进制表示中剔除最后一个数字，然后返回它。

如果我们取数字 5 ( `0101`)，那么我们可以用伪代码来设置它：

```
if last bit in 0101 is 1 then
    number is odd
otherwise
    number is even 
```

至于 PHP 代码，表达式`($start & 1)`返回`1`或`0`。在PHP中，[类型杂耍](http://php.net/juggling)变成`1`,`true`和.`0``false`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T04:54:02.857

它循环 9 次，每次它与 1 逐位与（即与第二个二进制数字与以查看它是否是 2 的复数）并相应地打印

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T04:59:13.133

& 是按位与运算符。在表达式中，它正在寻找这两个值共有的出生数。

下面是 PHP 位运算符使用教程：[http ://www.w3resource.com/php/operators/bitwise-operators.php](http://www.w3resource.com/php/operators/bitwise-operators.php)

# crystal-reports - 如何在水晶报表中用不同的标题分隔详细信息部分

> ID：13889409
> 
> 赞同：-1
> 
> 时间：2012-12-15T04:51:04.123
> 
> 标签：crystal-reports

我想要水晶报表应该是这样的

## 容器尺寸

容器1 20 容器2 30

## 收费率

BL 10 BL 20

但是在创建它时，它会混淆如何分离出细节和标题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:08:10.800

只需添加更多详细信息部分。详细信息部分 a 将包含您的标题“容器大小”，然后部分 b 将包含您的字段...部分 c 将具有“收费率”标题和部分 d 详细信息。

# ios - 为什么我更改 UIImageView 的 alpha 值但没有效果？

> ID：13889414
> 
> 赞同：-1
> 
> 时间：2012-12-15T04:51:43.157
> 
> 标签：ios, uiview, uiimageview

我正在开发一个阅读器应用程序。当你阅读一本杂志时，它会显示前五页，然后一页一页下载。有一个滚动视图可以查看页面的缩略图。一开始，如果页面需要下载，对应的缩略图视图的alpha值设置为0.5（缩略图在文件中，无需下载）。下载页面后，我会将缩略图视图的值更新为 1.0。我使用一个操作来下载页面，当下载一个操作时，我使用委托来设置缩略图视图的 alpha。但是当我更新缩略图视图的 alpha 值时，它仍然与开始时相同。似乎阿尔法没有效果。我想知道我的代码有什么问题吗？一些片段如下：

在 PageViewController.m

```
- (void)loadView
{
   [super loadView];
   //...
   [self createSlideUpViewIfNecessary];
   [self downloadPages];
}
- (void)createSlideUpViewIfNecessary {
    if (!slideUpView) {
        [self createThumbScrollViewIfNecessary];

        // create container view that will hold scroll view and label
        CGRect frame = CGRectMake(CGRectGetMinX(self.view.bounds), CGRectGetMaxY(self.view.bounds), CGRectGetWidth(self.view.bounds), CGRectGetHeight(thumbScrollView.frame));
        slideUpView = [[UIView alloc] initWithFrame:frame];
        [slideUpView setBackgroundColor:[UIColor blackColor]];
        [slideUpView setOpaque:NO];
        [slideUpView setAlpha:0.75];
        [[self view] addSubview:slideUpView];

        // add subviews to container view
        [slideUpView addSubview:thumbScrollView];
    }
}

- (void)createThumbScrollViewIfNecessary {
    if (!thumbScrollView) {
        float scrollViewHeight = THUMB_HEIGHT + THUMB_V_PADDING;
        float scrollViewWidth  = CGRectGetWidth(self.view.bounds);
        thumbScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, scrollViewWidth, scrollViewHeight)];
        [thumbScrollView setCanCancelContentTouches:NO];
        [thumbScrollView setClipsToBounds:NO];

        // now place all the thumb views as subviews of the scroll view
        // and in the course of doing so calculate the content width
        float xPosition = THUMB_H_PADDING;

        for (int i = 0; i < magazine.pageNum ; i++) {
            Page *page = [magazine.pages objectAtIndex:i];
            NSString *name = page.pageName;

            NSString *mfjName =[name stringByReplacingOccurrencesOfString:@".mfj" withString:@"Small.mfj"];
            UIImage *thumbImage = nil;
            if([mfjName hasSuffix:@".mfj"])
                thumbImage = [Reader loadMfjFromSprOrCache:magazine MFJ:mfjName];

            ThumbImageView *thumbView;
            if (thumbImage) {// sometimes mfjname is 0 which means white page in normal and black thumbnail in thumbnail scrollview.
                if (!mThumbnailSizeUpdated) {
                    mThumbnailWidth = thumbImage.size.width;
                    mThumbnailHeight = thumbImage.size.height;
                    mThumbnailSizeUpdated = YES;
                }
                thumbView = [[ThumbImageView alloc] initWithImage:thumbImage];
            } else {
                CGRect thumbFrame;
                if (mThumbnailSizeUpdated) {
                    thumbFrame = CGRectMake(0, 0, mThumbnailWidth, mThumbnailHeight);
                } else {
                    mThumbnailWidth = 80;
                    mThumbnailHeight = 100;
                    thumbFrame = CGRectMake(0, 0, mThumbnailWidth, mThumbnailHeight);
                }
                thumbView = [[ThumbImageView alloc] initWithFrame:thumbFrame];
            }
            NSString *mfjPath= [[magazine getDownloadPath] stringByAppendingPathComponent:name];
            if (![magazine getFileInfo:name]&&![[NSFileManager defaultManager] fileExistsAtPath:mfjPath]) {
                thumbView.alpha = 0.5;
            }
            [thumbView setBackgroundColor:[UIColor blackColor]];
            [thumbView setTag:THUMBVIEW_OFFSET+i];
            [thumbView setDelegate:self];
            [thumbView setImageName:name];
            CGRect frame = [thumbView frame];
            frame.origin.y = THUMB_V_PADDING;
            frame.origin.x = xPosition;
            frame.size.width = frame.size.width+30;
            frame.size.height = frame.size.height+40;
            [thumbView setFrame:frame];
            [thumbScrollView addSubview:thumbView];
            UILabel *pageIndexLabel = [[UILabel alloc] initWithFrame:CGRectMake(xPosition, frame.origin.y+frame.size.height-THUMB_LABEL_HEIGHT, frame.size.width, THUMB_LABEL_HEIGHT)];
            [pageIndexLabel setBackgroundColor:[UIColor clearColor]];
            [pageIndexLabel setText:[NSString stringWithFormat:@"%d",(i+1)]];
            [pageIndexLabel setTextColor:[UIColor whiteColor]];
            [pageIndexLabel setTextAlignment:UITextAlignmentCenter];
            [thumbScrollView addSubview:pageIndexLabel];

            xPosition += (frame.size.width + THUMB_H_PADDING);
        }
        thumbScrollView.showsHorizontalScrollIndicator = NO;
        [thumbScrollView setContentSize:CGSizeMake(xPosition, scrollViewHeight)];
    }
}
- (void)downloadPages
{
   DownloadOperation *op = [[DownloadOperation alloc] initWithMagazine:magazine];
   op.delegate = self;
   [[(AppDelegate *)[[UIApplication sharedApplication] delegate] sharedOperationQueue] addOperation:op];
}

- (void)downloadOperation:(DownloadOperation *)operation finishedAtIndex:(NSUInteger)index
{
   if (thumbScrollView){
      [thumbScrollView viewWithTag:THUMBVIEW_OFFSET+index].alpha = 1.0;
   }
} 
```

在下载操作.m

```
- (void)main
{
   // ...
   NSUInteger index = 0;
   for (Page *page in mMagazine.pages)
   {
       if (/*page doesn't exist*/){
           // download the page;
           if ([delegate respondsToSelector:@selector(downloadOperation:finishedAtIndex:)]) {
                        [delegate downloadOperation:self finishedAtIndex:index];
            }
       }
       index++;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:46:46.503

您正在使用操作队列来下载图像->因此，您的完成回调可能不会到达主线程，但无论如何您都在尝试更新 UI - 尝试将您的 UI 交互包装到主线程上的 dispatch_async 中：

```
 dispatch_async(dispatch_get_main_queue), ^{
     if (thumbScrollView){
         [thumbScrollView viewWithTag:THUMBVIEW_OFFSET+index].alpha = 1.0;
     }
 }); 
```

感谢@Inafziger 提供这方面的线索。

# ruby - 用于设置 HTTP GET 标头的 Ruby 等效项

> ID：13889415
> 
> 赞同：3
> 
> 时间：2012-12-15T04:51:53.537
> 
> 标签：ruby, http-headers

在 C# 中，它相当简单，只需几分钟就可以谷歌：

```
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(@"http://www.example.com?q=someValue");
request.Headers.Add("Authorization: OAuth realm=\"example.com\" oauth_consumer_key=\"BCqrstoO\" ... so on and so forth");
string resultString = "";
using (StreamReader read = new StreamReader(request.GetResponse().GetResponseStream(), true))
{
    resultString = read.ReadToEnd();
} 
```

尝试在 Ruby 中做到这一点并不那么简单（或者只是我错过了一些愚蠢的事情）。我一直在寻找，我找到答案的最接近的事情是[如何使用修改后的标头制作 HTTP GET？](https://stackoverflow.com/questions/587559/how-to-make-an-http-get-with-modified-headers)并[在 Ruby 中发送自定义标头](http://www.dzone.com/snippets/send-custom-headers-ruby)。

所以我的问题，我想，归结为

1.  如何将标题设置为只是一个简单的字符串？
2.  为什么这两个示例显示的标题按原样格式化？
3.  我要求的是什至好的约定吗？如果不是，我该如何格式化我在这些 Ruby 方法所要求的约定中尝试做的事情？

到目前为止，我尝试了这两个示例，这是我最近的非工作尝试：

```
headers = "Authorization: OAuth realm=\"example.com\" oauth_consumer_key=\"BCqrstoO\" ... so on and so forth" 
uri = URI("www.example.com")
http = Net::HTTP.new(uri.host, uri.port)

http.get(uri.path, headers) do |chunk|
  puts chunk
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T06:17:16.517

使用[open-uri](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)。例子：

```
require 'open-uri'

open("http://www.ruby-lang.org/en/",
    "User-Agent" => "Ruby/#{RUBY_VERSION}",
    "From" => "foo@bar.invalid",
    "Referer" => "http://www.ruby-lang.org/") {|f|
    # ...
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-18T11:18:11.773

以防万一您在此时检查此内容，Net:HTTPRequest 对象允许您轻松添加标头。

```
Net::HTTP.start(uri.host, uri.port) do |http|
    request = Net::HTTP::Get.new uri
    request['my-header'] = '1'
    http.request request do |response|
        puts response
    end
end 
```

# ruby-on-rails - 具有相对路径的 Rails 资产管道图像未加载

> ID：13889417
> 
> 赞同：1
> 
> 时间：2012-12-15T04:52:00.743
> 
> 标签：ruby-on-rails, asset-pipeline

我对资产管道的工作方式感到困惑，我使用了一个名为 aloha-rails 的 gem，它有下一个 CSS 规则：

```
button.aloha-button {
    background: url("../img/base.png") no-repeat scroll 0 0 transparent !important;
} 
```

如果我在本地运行它，则该规则已存档：

```
http://local.dev/assets/aloha/css/aloha.css?body=1 
```

我可以看到图像，它是从这个地址加载的：

```
http://local.dev/assets/aloha/img/base.png 
```

但是当我在heroku上运行它时，当我在本地预编译资产时，css规则是从applications.css加载的，该规则仍然带有../img/base.png，因此图像试图从以下位置加载：

```
http://server.herokuapp.com/img/base.png 
```

并且不存在，所以我收到 404 错误并且看不到图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T04:55:38.067

编写如下：
删除`dots(..)`路径之前的。

```
button.aloha-button {
 background: url("/img/base.png") no-repeat scroll 0 0 transparent !important;
} 
```

如果仍然不工作，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T06:26:58.623

为了在生产中访问您的图像资产，资产预编译将在每个文件名的末尾添加一个哈希，`img-url`如果您的 css 具有 .scss 或 .sass 扩展名，您需要使用 sass-rails 提供的帮助程序，或者您可以`asset_path`如果将 .erb 添加到样式表文件名的末尾，请使用帮助程序：

```
button.aloha-button {
    background: image-url("/img/base.png") no-repeat scroll 0 0 transparent !important;
} 
```

似乎 aloha-rails gem 没有这样做。大概还需要把`..`前面的路径丢掉。

# google-chrome - Chrome扩展程序：以编程方式访问地址栏？

> ID：13889431
> 
> 赞同：5
> 
> 时间：2012-12-15T04:54:23.160
> 
> 标签：google-chrome, google-chrome-extension

我正在尝试开发一个 Chrome 扩展程序，允许我在打开新标签后直接在地址栏中输入内容。但是，我找不到以编程方式访问地址栏的方法。有人可以帮我解决这个问题吗？

谢谢！！

# javascript - 解决正则表达式递归字符串

> ID：13889446
> 
> 赞同：6
> 
> 时间：2012-12-15T04:57:07.993
> 
> 标签：javascript, regex, recursion

# 问题

我可以匹配这个字符串

```
(xx) 
```

使用这个正则表达式

```
\([^()]*\) 
```

但它不会匹配

```
(x(xx)x) 
```

所以，这个正则表达式会

```
\([^()]*\([^()]*\)[^()]*\) 
```

但是，这将无法匹配

```
(x(x(xx)x)x) 
```

但同样，这个新的正则表达式会

```
[^()]*\([^()]*\([^()]*\)[^()]*\)[^()]* 
```

这是您可以注意到复制的地方，第二个正则表达式的整个正则表达式模式在第一个正则表达式之后`\(`和最后一个正则表达式`\)`被复制并替换最中心`[^()]*`。当然，最后一个正则表达式不匹配

```
(x(x(x(xx)x)x)x) 
```

但是，您总是可以像我们对上一个正则表达式所做的那样复制替换中心最多的内容，它会捕获更多`[^()]*`组。您添加到正则表达式中的越多，它可以处理的越多，但它总是受限于您添加的数量。`[^()]*\([^()]*\)[^()]*``(xx)`

那么，你如何绕过这个限制并捕获一组括号（或任何两个字符），其中可以包含额外的组？

# 错误假设的解决方案

我知道你可能会认为只是使用

```
\(.*\) 
```

但这将匹配所有

```
(xx)xx) 
```

当它应该只匹配子字符串时`(xx)`。

甚至这个

```
\([^)]*\) 
```

将不匹配具有嵌套对的括号对

```
(xx(xx)xx) 
```

从这里开始，它只会匹配到`(xx(xx)`。

# 可能吗？

那么是否可以编写一个可以匹配括号组的正则表达式？或者这是必须由例行程序处理的事情？

# 编辑

该解决方案必须适用于正则表达式的 JavaScript 实现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:02:58.307

If you want to match only if the round brackets are balanced you cannot do it by `regex` itself..

a better way would be to

1>match the string using `\(.*\)`

2>count the number of `(`,`)` and check if they are equal..if they are then you have the match

3>if they are not equal use `\([^()]*\)` to match the required string

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:20:57.147

正式地说，这是不可能使用正则表达式的！正则表达式定义[正则语言](http://en.wikipedia.org/wiki/Regular_Language)，正则语言不能有平衡括号。

然而，事实证明这是人们一直需要做的事情，因此许多正则表达式引擎已被扩展为包括正式正则表达式之外的更多内容。因此，您可以在 javascript 中使用正则表达式来做平衡括号。本文可能会帮助您入门：[http](http://weblogs.asp.net/whaggard/archive/2005/02/20/377025.aspx) ://weblogs.asp.net/whaggard/archive/2005/02/20/377025.aspx 。它适用于 .net，但同样适用于标准的 javascript 正则表达式引擎。

不过，就个人而言，我认为最好用你自己的函数来解决这样的复杂问题，而不是利用 Regex 引擎的扩展特性。

# java - 是否可以使用泛型方法而不在java中传递参数类型

> ID：13889447
> 
> 赞同：2
> 
> 时间：2012-12-15T04:57:21.413
> 
> 标签：java, generics

问题：

我想创建一个通用函数，它将返回我的类型化对象。

功能 ：

```
public <T > T GetPet(AnimalKingdom allAnimals,int id) {
    return (T) allAnimals.getAnimalsManager().findAnimalById(id);

} 
```

上述函数将返回强类型对象或抛出错误。

用法 ：

```
GetPet<Tiger>(thisZoo,tigersId).Roar(); 
```

来自 C# 背景。谷歌搜索相同但无法找到解决方案，似乎我需要在函数中传递泛型类型才能使其工作。

上面的场景怎么能用java实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T05:43:35.923

在 Java 中，您在方法名称之前显式指定泛型方法的类型参数。例如：

```
class Example {
    public static <T> T getPet(AnimalKingdom allAnimals, int id) {
        return (T)allAnimals.getAnimalsManager().findAnimalById(id);
    }
} 
```

然后调用：

```
Example.<Tiger>getPet(thisZoo, tigersId).roar(); 
```

或者，您可以使用[类型推断](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#Topic7)：

```
Tiger tiger = Example.getPet(thisZoo, tigersId);
tiger.roar(); 
```

顺便说一句，您的`getPet`方法不是很安全，因为没有执行运行时检查以确保返回的对象实际上是`Tiger`. 事实上，Java 编译器在这一行给出了警告：

```
return (T)allAnimals.getAnimalsManager().findAnimalById(id); 
```

原因是由于[类型擦除](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TechnicalDetails.html#Topic3)`(T)`而未检查强制转换。

为了加强您的代码，我建议进行以下更改：

```
class Example {
    public static <T> T getPet(Class<T> clazz, AnimalKingdom allAnimals, int id) {
        return clazz.cast(allAnimals.getAnimalsManager().findAnimalById(id));
    }
} 
```

然后调用：

```
Example.getPet(Tiger.class, thisZoo, tigersId).roar(); 
```

传入类对象 ( `Tiger.class`) 的好处是：

1.  它为编译器提供了要使用的类型`<T>`（再次通过类型推断）。
2.  `Class.cast`您可以通过调用该方法添加自己的显式运行时类型检查。Java 编译器警告消失，类型安全恢复。例如，如果`findAnimalById`在您期望 Tiger 时错误地返回了 Bear 的实例，您将得到一个`ClassCastException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:20:50.800

请尝试类似

```
Tiger tiger = GetPet(thisZoo,tigersId);
tiger.Roar(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T07:36:04.810

在这里使用泛型只是错误的选择。你应该看看继承、虚函数、抽象类和接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:37:10.763

正如 SylvainL 所说，泛型在这里不是正确的选择。对我来说，这看起来像是一个简单的继承/接口问题。

**新的 getPet 方法：**

```
public Animal getPet(AnimalKingdom allAnimals, int id)
{
    return allAnimals.getAnimalsManager().findAnimalById(id);
} 
```

**使用继承：**

```
class Animal { void Roar() { throw new Exception("This animal cannot roar!"); } };
class Tiger extends Animal { @Override void Roar() { ... }; ... }; 
```

用法：

```
getPet(thisZoo, tigersId).Roar(); 
```

**或使用接口：（**稍微复杂一点，但通常可能更好）

注意：在这种情况下你并不真的需要 Animal，你可以使用 Object

```
class Animal { ... }; // no Roar method
interface Roarer { void Roar(); };
class Tiger extends Animal implements Roarer { @Override void Roar() { ... }; ... }; 
```

注意：您可以将以下任何一种用法粘贴到一个方法中，最终得到类似的结果：

```
roar(getPet(thisZoo, tigersId)); 
```

用法：（您可以删除`try {} catch`，但这通常不是一个好主意）

```
try
{
   ((Roarer)getPet(thisZoo, tigersId)).Roar();
}
catch (ClassCastException e) { /* handle error */ }; 
```

替代用法：（为了安全避免`try {} catch`，还没有尝试过，但我认为它可能有效）

```
Animal animal = getPet(thisZoo, tigersId);
if (Roarer.class.isAssignableFrom(animal.class))
   ((Roarer)animal).Roar();
else
   // handle error 
```

# php - 简写 file_exists if/else 的正确语法是什么？

> ID：13889450
> 
> 赞同：-2
> 
> 时间：2012-12-15T04:57:44.213
> 
> 标签：php

我目前有这个：

```
 $imgpath = $domainurl.'images/games/'.$name.'_icon.jpg';
    $img = (file_exists($imgpath) ? '<img src="1">' : '<img src="2">'); 
```

如果文件存在，我想显示 img 1（原始），如果文件不存在，我想显示 img 2（默认）。

现在，代码只会显示第二张图片，即使第一张图片确实存在。

您可以在以下网址看到：[http ://crystalarcade.com/arcade/category/all](http://crystalarcade.com/arcade/category/all)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:59:41.060

这会查找一个名为`$imgpath`. 删除单引号。此外，`$domainurl`听起来它是一个 URL。`file_exists`根据您的 PHP 设置，可能会在 URL 上工作，但如果可能，您应该在本地文件系统上给它一个路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:59:53.677

您需要`''`从 around中删除 qoutes `$imgpath`，并且`()`没有必要-

```
$img = file_exists($imgpath) ? '<img src="1">' : '<img src="2">'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T06:01:26.950

不鼓励使用 PHP 速记并且应该避免使用。

请使用正确的 IF 语句。

请参阅 PSR 0 到 PSR 2 php 开发标准

旁注：起初您可能会认为速记书写更紧凑和逻辑，但与完整的 IF 语句不同，大多数人无法弄清楚哪种情况会发生。

# php - 使用 php 进行电子邮件确认

> ID：13889455
> 
> 赞同：-1
> 
> 时间：2012-12-15T04:59:00.183
> 
> 标签：php, email, registration

我的问题不是电子邮件发送成功，而是我网站上的确认页面。电子邮件已经发送给用户，但是当他们单击链接以激活他们的密码时，它会将他们带到一个确认页面，它应该确认激活并注册他们，但它根本没有做任何事情。它只是显示一个空白页面，我什至检查了数据库，没有任何改变。我需要任何帮助，我也有下面的代码。任何帮助都会很棒。

```
<?php

include('sqlconfig.php');

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB"); 

/* Confirmation Code */
$passkey=$_GET['passkey'];
$tbl_name1="temp_users";

/*retrieve data */
$sql1="SELECT * FROM temp_users WHERE confirm='$passkey'";
$result1=mysql_query($sql1);

if($result1){
$count=mysql_num_rows($result1);

/*Fetch The data From the table */
if($count==1){
$rows=mysql_fetch_array($result1);
$Email=$rows['email'];
$First_Name=$rows['FirstN'];
$Last_name=$rows['LastN'];
$password=$rows['password']; 
$phone=$rows['phone'];
$tbl_name2="users";

/*Insert data into new users table */
$sql2="INSERT INTO $tbl_name2(First Name, Last Name, Email, Password, phone)VALUES('$First_Name', '$Last_name', '$Email', '$password', '$phone')";
$result2=mysql_query($sql2);
}

/*If passkey is not found*/
else {
echo "Wrong Confirmation code";
}

/*If activation successful, show, and delete old data from temp table*/
if($result2){

echo "Your account has been activated";

// Delete information of this user from table "temp_members_db" that has this passkey 
$sql3="DELETE FROM $tbl_name1 WHERE confirm_code = '$passkey'";
$result3=mysql_query($sql3);

}

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:21:26.697

未经测试，它当然需要一些修改，但是：

```
<?php

include('sqlconfig.php');

//Connect to Database
$mysqli = new mysqli($hostname, $username, $password, $databasename);
//PHP > 5.3.0
if ($mysqli->connect_error) {
    die('Connect Error (' . $mysqli->connect_errno . ') '
            . $mysqli->connect_error);
}

/* Confirmation Code */
$passkey = $_GET['passkey'];
$tbl_name1 = "temp_users";

/* create a prepared statement */
if ($stmt = $mysqli->prepare("SELECT * FROM temp_users WHERE confirm=?")) {

    $stmt->bind_param("s", $passkey);
    $result = $stmt->get_result();

    $rows = $result->fetch_assoc();

    $stmt->close();

    $Email = $rows['email'];
    $First_Name = $rows['FirstN'];
    $Last_name = $rows['LastN'];
    $password = $rows['password'];
    $phone = $rows['phone'];
    $tbl_name2 = "users";

    /* Create table doesn't return a resultset */
    if ($mysqli->query("INSERT INTO $tbl_name2(First Name, Last Name, Email, Password, phone)VALUES('$First_Name', '$Last_name', '$Email', '$password', '$phone')") === TRUE) {
        echo "Your account has been activated";

        if ($stmt = $mysqli->prepare("DELETE FROM $tbl_name1 WHERE confirm_code = ?")) {
            $stmt->bind_param("s", $passkey);
            $stmt->execute();
            $stmt->close();
        }
    }
    else {
        echo "Wrong Confirmation code";
    }
} 
```

`$_GET['passkey']`注意：在选择查询中使用的值时，我们使用它`bind_param`来避免 SQL 注入。

我**强烈**推荐阅读这个： http: [//php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated](http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:33:33.570

试试这个。

if($passkey == NULL) //检查passkey是否为null，这可能是黑屏的原因

{ echo "页面上的无效操作"; // 一些错误信息 }

否则 { $flag = FALSE; // 在脚本开头的某个地方启动

```
 /*retrieve data */
    $sql1="SELECT * FROM temp_users WHERE confirm='$passkey'";

    $result1=mysql_query($sql1);

    if(mysql_num_rows($result1))
        {
        $rows=mysql_fetch_array($result1);
        $Email=$rows['email'];
        $First_Name=$rows['FirstN'];
        $Last_name=$rows['LastN'];
        $password=$rows['password']; 
        $phone=$rows['phone'];
        $tbl_name2="users";

        /*Insert data into new users table */
        $sql2="INSERT INTO $tbl_name2(First Name, Last Name, Email, Password, phone)VALUES('$First_Name', '$Last_name', '$Email', '$password', '$phone')";
        if(mysql_query($sql2))
            {
            $flag = TRUE;
            }

        }
    /*If passkey is not found*/
    else 
        {
        echo "Wrong Confirmation code";
        }

    /*If activation successful, show, and delete old data from temp table*/
    if($flag)
        {
        echo "Your account has been activated";
        // Delete information of this user from table "temp_members_db" that has this passkey 
        $sql3="DELETE FROM $tbl_name1 WHERE confirm_code = '$passkey'";
        $result3=mysql_query($sql3);
        } 
```

}

首先，代码将检查查询是否有任何结果，如果是，则它会获取数据并插入到 table2 中。

引入了一个新的变量标志来检查是否执行了查询2，如果是，则执行查询3。

编辑：首先检查传入的密码是否包含某些值，如果没有则显示错误，否则执行其余代码

# c# - 如何使用 c# 获取 powershell 脚本参数列表？

> ID：13889457
> 
> 赞同：-1
> 
> 时间：2012-12-15T04:59:14.397
> 
> 标签：c#, powershell

我需要可以列出给定脚本的参数信息的 ac# 代码。例如，它采用脚本的路径，并应列出所有参数的名称以及参数是可选的还是必需的。

这可能吗？

添加更多信息：我正在 C# 中寻找类似以下 cmdlet 的内容。一个返回格式化输出的 api，cn 易于解析。

获取帮助 MyScript.ps1 -参数 *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:03:51.853

在 C# 中，您可以调用 PowerShell 引擎以执行 PowerShell 代码。SO 中有很多示例展示了如何从 C# 调用 PowerShell 命令。您要调用的命令是：

```
Get-Command <path-to-ps1> 
```

结果将是一个`System.Management.Automation.ExternalScriptInfo`对象。检查它的Parameters 和ParameterSets 属性以获取您需要的信息。

# multithreading - CDI 构造后初始化字段

> ID：13889458
> 
> 赞同：4
> 
> 时间：2012-12-15T04:59:16.927
> 
> 标签：multithreading, cdi, postconstruct

有谁知道在使用 PostConstruct 注释的方法中初始化实例字段是否被认为是线程安全的？我不太确定是否必须使我的 ApplicationScoped bean 的字段易失，以便其他线程可以真正看到这些值...

感谢您的任何提示或答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T14:16:08.400

我没有直接引用绝对保证这一点的规范，但`@PostConstruct`应该是线程安全的。

CDI 运行时完全负责创建 bean，并且只会为给定范围创建一个实例。`@PostConstruct`在此类范围内或通过注入访问 bean 之前运行。

# iphone - 在 iPhone 中保存 Spotify 登录的用户会话

> ID：13889459
> 
> 赞同：1
> 
> 时间：2012-12-15T04:59:22.540
> 
> 标签：iphone, session, spotify, cocoalibspotify-2.0

我正在 iPhone 中实现 Spotify。用户在我的应用程序中登录到 Spotify 后，我想让用户保持登录状态，直到他单击注销按钮，即，即使在应用程序终止并重新启动后，我也应该获得会话。我们如何实现它。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:06:19.557

你需要阅读这个论坛

[保存 Spotify 会话](https://github.com/spotify/cocoalibspotify/issues/85)

并阅读[记住凭据](https://stackoverflow.com/questions/11474055/sploginviewcontroller-to-remember-credentials)

享受编程

# opengl - 高度图数据的法线

> ID：13889461
> 
> 赞同：2
> 
> 时间：2012-12-15T04:59:47.147
> 
> 标签：opengl, normals

我想找到高度图数据的法线。我在我的代码中使用 gl_triangles 作为索引。我如何找到这个的法线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:24:31.697

给定一个三角形`(vert1, vert2, vert3)`，它的法线是`((vert2 - vert1).cross(vert3 - vert1)).normalize()`。

对于平滑的每个顶点法线：对于每个顶点，将顶点所属的每个三角形的面法线相加，然后对总和进行归一化。

**编辑**：示例：

```
#include <GL/glut.h>
#include <vector>
#include <cmath>
#include <Eigen/Core>
#include <Eigen/Geometry>

using namespace std;
using namespace Eigen;

typedef Matrix< Vector3f, Dynamic, Dynamic > VecMat;

// given a matrix of heights returns a matrix of vertices
VecMat GetVerts( const MatrixXf& hm )
{
    VecMat verts( hm.rows(), hm.cols() );
    for( int col = 0; col < hm.cols(); ++col )
        for( int row = 0; row < hm.rows(); ++row )
            verts( row, col ) = Vector3f( col, row, hm( row, col ) );
    return verts;
}

VecMat GetNormals( const VecMat& hm )
{
    VecMat normals( hm );
    for( int col = 0; col < hm.cols(); ++col )
        for( int row = 0; row < hm.rows(); ++row )
        {
            Vector3f sum( Vector3f::Zero() );
            const Vector3f& cur = hm( row, col );
            if( row+1 < hm.rows() && col+1 < hm.cols() )
                sum += ( hm( row+0, col+1 ) - cur ).cross( hm( row+1, col+0 ) - cur ).normalized();
            if( row+1 < hm.rows() && col > 0 )
                sum += ( hm( row+1, col+0 ) - cur ).cross( hm( row+0, col-1 ) - cur ).normalized();
            if( row > 0 && col > 0 )
                sum += ( hm( row+0, col-1 ) - cur ).cross( hm( row-1, col+0 ) - cur ).normalized();
            if( row > 0 && col+1 < hm.cols() )
                sum += ( hm( row-1, col+0 ) - cur ).cross( hm( row+0, col+1 ) - cur ).normalized();
            normals( row, col ) = sum.normalized();
        }
    return normals;
}

// returns an index array for a GL_TRIANGLES heightmap
vector< unsigned int > GetIndices( int rows, int cols )
{
    vector< unsigned int > indices;
    for( int col = 1; col < cols; ++col )
        for( int row = 1; row < rows; ++row )
        {
            // Eigen default storage order is column-major
            // lower triangle
            indices.push_back( (col-1) * rows + (row-1) );
            indices.push_back( (col-0) * rows + (row-1) );
            indices.push_back( (col-1) * rows + (row-0) );
            // upper triangle
            indices.push_back( (col-1) * rows + (row-0) );
            indices.push_back( (col-0) * rows + (row-1) );
            indices.push_back( (col-0) * rows + (row-0) );
        }
    return indices;
}

VecMat heightmap;
VecMat normals;
vector< unsigned int > indices;
void init()
{
    // wavy heightmap
    MatrixXf hm( 64, 64 );
    for( int col = 1; col < hm.cols(); ++col )
        for( int row = 1; row < hm.rows(); ++row )
        {
            float x = ( col - ( hm.cols() / 2.0f ) ) / 2.0f;
            float y = ( row - ( hm.rows() / 2.0f ) ) / 2.0f;
            hm( row, col ) = cos( sqrt( x * x + y * y ) );
        }

    heightmap = GetVerts( hm );
    heightmap.array() -= Vector3f( hm.cols() / 2.0f, hm.rows() / 2.0f, 0 );
    for( int col = 0; col < hm.cols(); ++col )
        for( int row = 0; row < hm.rows(); ++row )
            heightmap( row, col ).array() *= Vector3f( 1 / 4.0f, 1 / 4.0f, 1.0f ).array();

    normals = GetNormals( heightmap );
    indices = GetIndices( heightmap.rows(), heightmap.cols() );
}

void display()
{
    glEnable( GL_DEPTH_TEST );
    glEnable( GL_CULL_FACE );
    glShadeModel( GL_SMOOTH );

    glEnable( GL_LIGHTING );
    GLfloat global_ambient[] = { 0.0, 0.0, 0.0, 1.0 };
    glLightModelfv( GL_LIGHT_MODEL_AMBIENT, global_ambient );
    glEnable( GL_COLOR_MATERIAL );
    glColorMaterial( GL_FRONT, GL_AMBIENT_AND_DIFFUSE );

    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    gluPerspective( 60, w / h, 1, 100 );

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();
    gluLookAt( 8, 8, 8, 0, 0, 0, 0, 0, 1 );

    // spinning light
    glEnable( GL_LIGHT0 );
    float angle = 20 * ( glutGet( GLUT_ELAPSED_TIME ) / 1000.0f ) * (3.14159f / 180.0f);
    float x = cos( -angle ) * 6;
    float y = sin( -angle ) * 6;
    GLfloat light_position[] = { x, y, 2, 1.0 };
    glLightfv( GL_LIGHT0, GL_POSITION, light_position );    
    glDisable( GL_LIGHTING );
    glPointSize( 5 );
    glBegin(GL_POINTS);
    glColor3ub( 255, 255, 255 );
    glVertex3fv( light_position );
    glEnd();
    glEnable( GL_LIGHTING );

    glColor3ub(255,0,0);
    glEnableClientState( GL_VERTEX_ARRAY );
    glEnableClientState( GL_NORMAL_ARRAY );
    glVertexPointer( 3, GL_FLOAT, sizeof( Vector3f ), heightmap(0,0).data() );
    glNormalPointer( GL_FLOAT, sizeof( Vector3f ), normals(0,0).data() );
    glDrawElements( GL_TRIANGLES, indices.size(), GL_UNSIGNED_INT, &indices[0] );
    glDisableClientState( GL_VERTEX_ARRAY );
    glDisableClientState( GL_NORMAL_ARRAY );

    glutSwapBuffers();
}

void timer( int extra )
{
    glutPostRedisplay();
    glutTimerFunc( 16, timer, 0 );
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE );
    glutInitWindowSize( 640, 480 );
    glutCreateWindow( "Heightmap" );
    init();
    glutDisplayFunc( display );
    glutTimerFunc( 0, timer, 0 );
    glutMainLoop();
    return 0;
} 
```

# signalr - 在自托管 SignalR 集线器中获取客户端 IP 地址

> ID：13889463
> 
> 赞同：5
> 
> 时间：2012-12-15T04:59:50.997
> 
> 标签：signalr

您如何在自托管 SignalR 集线器中获取远程客户端的 IP 地址？根据[这个问题](https://stackoverflow.com/questions/11044361/signalr-get-caller-ip-address)，您可以在某一时刻使用 Context.ServerVariables[] 获取它，但这似乎在最新版本的 SignalR 中缺失。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T05:13:31.170

好吧，在最近对 SignalR 项目（特别是[这个](https://github.com/SignalR/SignalR/commit/7f4969c6a8fb32b4c1216efec9d44550c5171f02#src/Microsoft.AspNet.SignalR.Core/Hubs/HubCallerContext.cs)）的提交中，我发现了如何做到这一点。

```
protected string GetIpAddress()
{
    var env = Get<IDictionary<string, object>>(Context.Request.Items, "owin.environment");
    if (env == null)
    {
        return null;
    }
    var ipAddress = Get<string>(env, "server.RemoteIpAddress");
    return ipAddress;
}

private static T Get<T>(IDictionary<string, object> env, string key)
{
    object value;
    return env.TryGetValue(key, out value) ? (T)value : default(T);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-27T08:01:14.637

我没有尝试使用自托管的 SignalR Hub，但使用 SignalR 2.0，`Context.Request`不再有`Items`（至少不是我所看到的）。我想通了，它现在是如何工作的。（如果您愿意，可以将 if / else 部分简化为三元运算符。）

```
protected string GetIpAddress()
{
    string ipAddress;
    object tempObject;

    Context.Request.Environment.TryGetValue("server.RemoteIpAddress", out tempObject);

    if (tempObject != null)
    {
        ipAddress = (string)tempObject;
    }
    else
    {
        ipAddress = "";
    }

    return ipAddress;
} 
```

# c++ - 我应该包括 或者 在 C++ 程序中？

> ID：13889467
> 
> 赞同：60
> 
> 时间：2012-12-15T05:00:29.860
> 
> 标签：c++, include, c++-faq

*   我应该在 C++ 程序中包含什么，`stdio.h`或者`cstdio`？为什么？
*   为什么有两个提供相同功能的头文件？
*   标准对此有何规定？
*   我应该如何包含其他此类标题，是否有我应该遵循的基本规则？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-15T05:01:10.267

考虑以下程序：

**[样品 1：](http://codepad.org/aThyzsXv)**

```
#include<stdio.h>

int main()
{
    printf("Hello World");
    return 0;
} 
```

**[样本 2：](http://codepad.org/TDbD60fx)**

```
#include<cstdio>

int main()
{
    printf("Hello World");
    return 0;
} 
```

两者都按预期工作。**那么哪种用法更合适呢？** 答案是：**都没有！**惊讶吗？继续阅读。

出于兼容性原因，C++ 标准库提供了所有标准 C 头文件，而 C++ 作为一种语言也提供了所有等效的头文件。作为惯例，

*   没有 C++ 标准库头文件（除了为了 C 兼容性而包含的头文件）有任何文件扩展名，并且
*   C 头文件的所有 C++ 等效项都以`cxxxxx`.

*C++ 标准在附件 D（规范）兼容性特性*下提到了这一点：

![标准引文](../Images/99db4ca7f732a5685a88053984810ae8.png)

§2 提到了重要的区别点。适用于上述示例的这条规则意味着：

*   包括**cstdio**会在 std 命名空间中导入符号名称，**也可能**在全局命名空间中。
*   包括**stdio.h**会在全局命名空间中导入符号名称，**也可能**在 std 命名空间中。

让我们将此规则应用于我们的示例代码并衡量优缺点：

**示例 1：** 这会将 stdio.h 中的所有符号带入全局命名空间。优点是您可以在没有任何限制的情况下使用这些符号，因为它们是在全局命名空间中导入的。缺点是您最终会用许多您可能永远不会使用的符号名称污染全局名称空间。这可能会导致符号名称冲突。在 C++ 中，始终将全局命名空间视为雷区，并尽可能避免它。

**示例 2：** 这是一个非常糟糕的做法，因为无法保证实现会将符号放在全局命名空间中，标准根本不要求这样做。我们只是依赖于一种特定编译器实现的行为。我们不能也不应该假设所有编译器都会这样做。所以严格来说，该程序未经标准批准，并且这种用法不能在所有实现中移植。

## 那么正确的用法是什么？

正确的用法是使用`cstdio`并完全限定符号名称，或者通过**[`using`声明](http://msdn.microsoft.com/en-us/library/was37tzw%28v=vs.80%29.aspx)**将它们带入范围。这保证了我们使用的所有符号都存在于`std`命名空间中，并且我们不会污染全局命名空间。正确用法示例：

**[样品 3：](http://codepad.org/axJ8tJ0z)**

```
#include<cstdio>

using std::printf;

int main()
{
    printf("Hello World");
    return 0;
} 
```

请注意，指令[`using namespace std;`，尤其是在标头中，不是一个好的选择](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)，您应该始终使用`using`声明。

请注意，我们认为`stdio.h`vs.`cstdio`这里只是一个示例用例，实际上它适用于~~所有~~most`cxxxx`和`xxxx.h`标头，[除了少数 like`<math.h>`和`<cmath>`](https://stackoverflow.com/questions/8734230/math-interface-vs-cmath-in-c/8734292#8734292)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-25T13:06:29.707

**由于这篇文章有点旧，我想分享以下内容：**

* * *

## 看代码：

```
Using X.h   // Compatible with C language standard
---------------
#include <X.h>

int main() {
    // Invoke X's corresponding function
    return 0;
}

Using X    // Not compatible with C language standard
--------------
#include <X>

int main() {
    // Invoke X's corresponding function
    return 0;
} 
```

## 他们都编译和执行ok！

* * *

## C++ 中哪一个更好？

## 关于[C++11](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf)和[C++17](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4660.pdf)的规范：

> **C.5.1**（来自 C++17 文档的部分）
> **对标头的修改 [diff.mods.to.headers]**
> 
> 1.  为了与 C 标准库兼容，C++ 标准库提供了 D.5 中列举的 C 头文件，但在 C++ 中不推荐使用它们。

2.  `<stdatomic.h>`C 头文件、`<stdnoreturn.h>`和没有 C++ 头文件， `<threads.h>`C 头文件本身也没有

> C++ 的一部分。

3.  C++ 头文件`<ccomplex>`(D.4.1) 和`<ctgmath>`(D.4.4) 以及它们相应的 C 头文件`<complex.h>`和`<tgmath.h>`

> 包含来自 C 标准库的任何内容，而仅包含来自 C++ 标准库的其他头文件。

* * *

> **D.5** **C 标准库头文件 [depr.c.headers]**
> 
> 1.  为了与 C 标准库兼容，C++ 标准库提供了表 141 中所示的 C 头文件。

[![在此处输入图像描述](../Images/7e83773e71825b0bd55dbcd7947652ca.png)](https://i.stack.imgur.com/WaaPa.png)

**C++11**和**C++17**标准规范文档都声明使用仍然`<X.h>`是为了与 C 标准兼容，尽管它们的使用被视为**已弃用**。

* * *

## 关于[C++ 20 标准提案](http://open-std.org/JTC1/SC22/WG21/docs/papers/2017/p0619r0.html#3.5)

他们正在审查**“不赞成”**在 C++20 中使用 C 库头文件。`<X.h>`以绿色突出显示。到目前为止，C++11 和 C++17 的弃用被称为**“弱推荐”**，而保留“ **C 标准库头文件 (c.headers)** ”的“调整”如下所示：

> **“基本的 C 库头文件是一项必不可少的兼容性功能，而且不会很快消失。”** （来自[C++ 20 审查文档](http://open-std.org/JTC1/SC22/WG21/docs/papers/2017/p0619r0.html#3.5)）

* * *

> **D.5 C 标准**
> **库头文件 [depr.c.headers]**
> 
> **弱推荐：**除了上述之外，还要从 C++ 标准中删除相应的 C 标头，就像我们没有相应`<stdatomic.h>`的`<stdnoreturn.h>`, 或`<threads.h>`, 标头一样。如上所述，但有以下调整：20.5.5.2.1 C 标准库头文件 [c.headers]
> 
> 为了与 C 标准库兼容，C++ 标准库提供了表 141 中所示的 C 头文件。 表 141 — C 头文件

```
 <assert.h>  <inttypes.h>   <signal.h>      <stdio.h>   <wchar.h>
 <complex.h> <iso646.h>     <stdalign.h>    <stdlib.h>  <wctype.h>
 <ctype.h>   <limits.h>     <stdarg.h>      <string.h>  
 <errno.h>   <locale.h>     <stdbool.h>     <tgmath.h>
 <fenv.h>    <math.h>       <stddef.h>      <time.h>
 <float.h>   <setjmp.h>     <stdint.h>      <uchar.h> 
```

> 标头的`<complex.h>` 行为就像它只是包含标头一样`<complex>`。标头的`<tgmath.h>`行为就好像它仅包含标头`<complex>`和`<cmath>`.

* * *

> [Bjarne Stroustrup](http://www.stroustrup.com/compat_short.pdf)建议通过尽可能**减少不兼容性来最大限度地提高****C 和 C++ 语言**之间的**互操作性。**其他人则不然，因为它使事情复杂化。

 ****所以，它似乎`<X.h>`不会**去任何地方**。最终，您可以同时使用两者。就个人而言，我会决定使用哪一个，归结为让你的代码**向后兼容 C 代码**。****

# php - 运行 ajaxed javascript

> ID：13889470
> 
> 赞同：0
> 
> 时间：2012-12-15T05:00:50.780
> 
> 标签：php, javascript, ajax

我知道这已经被讨论过几次了，但是当谈到 javascript 时，我完全是个菜鸟，所以我不知道我在做什么。我正在运行一个将变量发送到 php 文件的 javascript，并且该信息使用 innerhtml 被 ajaxed 到当前页面中。这是代码的那部分...

```
function givingHistory(dyear,did)
    {
    var divname="giving" + dyear;
    $.ajax({
        url: 'finance/givinghistory.php',
        type: 'POST',
        data: {
            year: dyear,
            id: did
        },
        success: function(givedata) {
            document.getElementById(divname).innerHTML = givedata;
        }
    });

}
</script> 
```

在`givedata`来自 php 文件的函数响应中，调用了另一个 javascript 函数，该函数已经加载到我的公用`.js`文件中（因此两个 javascript 函数在页面加载时都被加载）。如何让通过 innerhtml 添加的 onClick 工作？在 php 文件中，我检查以查看`if id = a php session variable`. 如果是这样，它会吐出包含`onClick`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:09:15.393

*如果您在 $(' ** ') 函数中加载页面时使用特定的 id/class/identifier，则操作将仅绑定到那个。要将动作绑定到任何尝试使用`$(document).on('click', **selector**, function() {});`.

以前有绑定/实时绑定到元素的时间，但`on`现在是函数。

另外，为什么要将 $.ajax (jQuery) 与 document.getElementById(divname).innerHTML (常规 javascript) 混合在一起？如果您已经在使用 jQuery，您可以使用`$('#'+divname).html(blahbahblah);`

# yii - In yii how to access other tables fields

> ID：13889473
> 
> 赞同：0
> 
> 时间：2012-12-15T05:01:16.770
> 
> 标签：yii

I am creating project in yii framework. I am having table as- Qbquestion QbquestionOption
-questionId -optionId -question -questionId -userId -option -isPublished -isAnswer

In QbquestionOption controller i want to access Qbquestion tables fields. I had written quesry as-

```
 $Question=Qbquestion::model()->findAllByAttributes(array("questionId"=>$number)); 
```

where $number is some random number. When i am using its fields as= $Question->isPublished then its giving error as "trying to get access to property of non-object" Statement var_dump($Question) is showing all record and all values of Qbquestion table. So how can i access records? Please help me

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:09:43.117

`findAllByAttributes`返回一个对象数组。

如果您只想要一个问题，请改用`findByAttributes`它，那么它应该可以按您的意愿工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:10:44.277

试试因为我不知道你的关系。试一试。如果它不起作用，我会发布其他答案。还请告诉我 isPublished 字段在哪个表中？如果它在您的标题中提到的其他表中，您需要将其更改为 echo $qRec->OtherTableRelationArrayKey->isPublished;

```
foreach($Question AS $qRec)
{
      echo $qRec->isPublished;
      echo "<br />";   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T05:10:44.897

`$Question`是一个模型数组，你不能在上面调用模型函数..

你可以做的是：

```
 $questions = Qbquestion::model()->findAllByAttributes(array("questionId"=>$number));
 foreach($questions as $question)
    $question->isPublished() 
```

或者你可以`findByAttribute`用来得到单一的结果..

# ajax - CakePHP Observe field for validation check(already exists)

> ID：13889478
> 
> 赞同：0
> 
> 时间：2012-12-15T05:01:46.020
> 
> 标签：ajax, cakephp-1.3, cakephp-2.0

1.  i have already user observe field in cakephp 1.3 Now i want to do the same thing in cakephp 2.0 I have one form.there is a one field named email. When user insert email. onblur there is a popup one message that displays "email already exists" or "right"

for that i have write below code in my projects. the below code is my add file code

```
<?php $options = array('url' => array( 'controller' => 'users', 'action' => 'is_exist'), 'update' => 'email_exist');
        echo $this->ajax->observeField('UserEmailId',array('url' => array( 'controller' => 'users', 'action' => 'is_exist'), 'update' => 'email_exists'));  ?> 
```

In my controller i have created one function like

```
 public function is_exist($id = null)
    {
    $result = "yes";
    $this->set('existdata',$result);
    } 
```

i have also created is_exists.ctp fiel in view/uers. i dont know why its not working. i did the same thing in Cakephp 1.3 and its working file but not in cakephp 2.0 can anyone tell me how i implement this ? thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:38:58.173

因为 cakephp 2 不支持 ajax 助手。你需要学习如何使用 js 助手检查这个链接：[js helper](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html)

# c++ - C++11 support in GNU automake

> ID：13889479
> 
> 赞同：2
> 
> 时间：2012-12-15T05:02:08.527
> 
> 标签：c++, autotools

I'm trying to port buildsystem of my project to GNU autotools. The code need to be compiled with `-std=c++11` or `-std=c++0x` flag. I want my configure script to check if compiler supports C++11 or not. I tried adding `AX_CHECK_COMPILE_FLAG([-std=c++0x], [CXXFLAGS="$CXXFLAGS -std=c++0x"])` to `configure.ac` file but `configure` fails with this error:

```
 ...
./configure: line 2732: syntax error near unexpected token `-std=c++0x,'
./configure: line 2732: `AX_CHECK_COMPILE_FLAG(-std=c++0x, CXXFLAGS="$CXXFLAGS -std=c++0x")' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T06:04:36.997

希望在未来的 autoconf 版本中对 C++11 有更全面的支持。同时，我使用[GNU autoconf 存档](http://www.gnu.org/software/autoconf-archive/)`ax_cxx_compile_stdcxx_11.m4`中的 C++11 源代码测试：

```
AC_PROG_CXX
AC_LANG_PUSH([C++])

AC_COMPILE_IFELSE([AC_LANG_SOURCE(
  [[template <typename T>
    struct check
    {
      static_assert(sizeof(int) <= sizeof(T), "not big enough");
    };

    typedef check<check<bool>> right_angle_brackets;

    int a;
    decltype(a) b;

    typedef check<int> check_type;
    check_type c;
    check_type&& cr = static_cast<check_type&&>(c);]])],,
  AC_MSG_FAILURE(['$CXX $CXXFLAGS' does not accept ISO C++11])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:03:01.483

您遇到的错误似乎来自`AX_CHECK_COMPILE_FLAG`未在`configure`脚本中扩展。`AX_CHECK_COMPILE_FLAG`您可以通过 grepping in来验证它是否被扩展`configure`。如果 grep 在那里找到它，那么它不会被扩展。

您也可以通过查看 file 来检查它`aclocal.m4`，应该在哪里`aclocal`复制它的定义。

该宏的定义不包含在基本`autoconf`包中，而是包含在`autoconf`档案中。所以你可能错过了这个包。（软件包的确切名称可能因发行版而异，它`sys-devel/autoconf-archive`在 Gentoo 中，似乎`autoconf-archive`在 Debian 和 Ubuntu 中）。

# objective-c - Core Data to-many relationship in code

> ID：13889481
> 
> 赞同：0
> 
> 时间：2012-12-15T05:02:16.707
> 
> 标签：objective-c, ios, core-data

I have three entities: Session, User and Test. A session has 0-many users and a user can perform 0-6 tests. (I say 0 but in the real application always at least 1 is required, at least 1 user for a session and at least 1 test for a user. But I say 0 to express an empty start.) All entities have their own specific data attributes too. A user has a name, A session has a name, a test has six values to be filled in by the user, and so on. But my issue is with the relationships.

1.  How do I set multiple users and have them added to one session (same goes for multiple tests for one user).

2.  How do I show the content in a right way? How do I show a session that has multiple users and these users having completed multiple tests?

Here's my code so far with regard to issue 1:

```
Session *session = [NSEntityDescription insertNewObjectForEntityForName:@"Session"
                                  inManagedObjectContext:context];
session.name = @"Session 1";

User *users = [NSEntityDescription insertNewObjectForEntityForName:@"User"
                                   inManagedObjectContext:context];
users.age = [NSNumber numberWithInt:28];
users.session = session;
//session.user = users;
[sessie addUserObject:users]; 
```

With regard to issue 2: I can log the session, but I can't get the user(s) logged from a session.

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Session"
                                          inManagedObjectContext:context];
[fetchRequest setEntity:entity];
NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
for (Session *info in fetchedObjects) {
 NSLog(@"Name of session: %@", info.name);
 NSLog(@"Having problems with this: %@",info.user);
 //User *details = info.user;
 //NSLog(@"User: %@", details.age);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:16:59.357

我发现它很有用（从我在 SO 看到的代码示例中，这似乎是常见的做法），将复数形式用于对多关系，例如`users`从*Session*到*User*的对多关系。它强调了关系的值是一个*集合*而不是单个对象的事实，并且可能会使事情更清楚一些。

所以你的模型看起来像这样：

![在此处输入图像描述](../Images/f5f1c938a0e82d28072f8bd7fc4826e9.png)

*问题 1：*如果您创建了 a`Session *session`和 a `User *user`，那么

```
user.session = session; 
```

将用户添加到会话。打电话

```
[session addUsersObject:user]; 
```

有同样的效果。但是只需要这些调用中的一个，如果关系被正确定义为反向关系，它会自动暗示另一个。

*问题 2：*对于 a `Session *session`，`session.users`是与该会话相关的所有用户的集合。它是一个`NSSet`，您可以遍历该集合。同样，`user.tests`是用户的所有测试的集合。

因此，以下代码显示了与其用户和测试的所有会话：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Session"
                                          inManagedObjectContext:context];
[fetchRequest setEntity:entity];

NSArray *sessions = [context executeFetchRequest:fetchRequest error:&error];
for (Session *session in sessions) {
    NSLog(@"Name of session: %@", session.name);
    for (User *user in session.users) {
        NSLog(@"   User name %@, age %@", user.name, user.age);
        for (Test *test in user.tests) {
            NSLog(@"      Test: %@", test.name);

        }
    }
} 
```

# jqgrid - jqgrid使用webapi（REST）检索空行

> ID：13889484
> 
> 赞同：0
> 
> 时间：2012-12-15T05:02:22.493
> 
> 标签：jqgrid, asp.net-mvc-4, asp.net-web-api, jqgrid-asp.net

我在一个带有 WebApi (REST) 的 ASPNET MVC4 项目中使用 jqgrid，使用工作单元和存储库模式的实体框架 5。我的问题是我看到数据以 json 格式流向浏览器，我在网格中看到三行，但这些行是空的，并且数据没有显示（网格中的三个空行）。

这是在 WebApi 控制器中获取数据的方法：

```
public dynamic GetGridData(int rows, int page, string sidx, string sord)
{
    var pageSize = rows;
    var index = sidx;
    var order = sord;
    var categories = Uow.Categories.GetAll().OrderBy(t => (string.IsNullOrEmpty(index) ? "Id" : index) + " " + (order ?? "desc"));
    var pageIndex = Convert.ToInt32(page) - 1;
    var totalRecords = categories.Count();
    var totalPages = (int)Math.Ceiling((float) totalRecords / (float) pageSize);
    var categoriesPage = categories.Skip(pageIndex * pageSize).Take(pageSize).ToList();

    return new 
        {
            total = totalPages,
            page = page,
            records = totalRecords,
            rows = (from category in categoriesPage
                    select new
                        {
                            id = category.Id.ToString(),
                            cell = new string[]
                                {
                                    category.Id.ToString(),
                                    category.Name,
                                    category.Description
                                }
                        }).ToArray()
        };
} 
```

这是浏览器收到的json

```
{
    "total": 1,
    "page": 1,
    "records": 3,
    "rows": [{
        "id": "1",
        "cell": ["1", "Category 1", null]
    }, {
        "id": "3",
        "cell": ["3", "Category 3", "asAS"]
    }, {
        "id": "4",
        "cell": ["4", "Category 4", null]
    }]
} 
```

这是带有 jqgrid 的 .js 文件

```
jQuery("#ajaxGrid").jqGrid({
    url: $("#ServiceUrl").val(),
    datatype: "json",
    jsonReader: { repeatitems: false, id: "Id" },
    colNames: ['Id', 'Name', 'Description'],
    colModel: [
        { name: 'id', editable: true, sortable: true, hidden: true, align: 'left' },
        { name: 'name', editable: true, sortable: true, hidden: false, align: 'left' },
        { name: 'description', editable: true, sortable: true, hidden: false, align: 'left' }
],
    mtype: 'GET',
    rowNum: 15,
    pager: '#ajaxGridPager',
    rowList: [10, 20, 50, 100],
    caption: 'List of Categories',
    imgpath: $("#ServiceImagesUrl").val(),
    altRows: true,
    shrinkToFit: true,
    viewrecords: true,
    autowidth: true,
    height: 'auto',
    error: function(x, e)
    {
        alert(x.readyState + " "+ x.status +" "+ e.msg);
    }
});

function updateDialog(action) {
    return {
        url: $("#ServiceUrl").val(),
        closeAfterAdd: true,
        closeAfterEdit: true,
        afterShowForm: function (formId) { },
        modal: true,
        onclickSubmit: function (params) {
            var list = $("#ajaxGrid");
            var selectedRow = list.getGridParam("selrow");
            params.url += "/" + list.getRowData(selectedRow).Id;
            params.mtype = action;
        },
        width: "300",
        ajaxEditOptions: { contentType: "application/json" },
        serializeEditData: function (data) {
            delete data.oper;
            return JSON.stringify(data);
        }
    };
}

jQuery("#ajaxGrid").jqGrid(
    'navGrid',
    '#ajaxGridPager',
     {
         add: true,
         edit: true,
         del: true,
         search: false,
         refresh: false
     },
     updateDialog('PUT'),
     updateDialog('POST'),
     updateDialog('DELETE')
); 
```

顺便说一句，如果我想返回 jqGridData 而不是动态的，我应该怎么做？Did 也显示空行：

```
public class jqGridData<T> where T : class
{
    public int page { get; set; } 
    public int records { get; set; } 
    public IEnumerable<T> rows { get; set; } 
    public decimal total { get; set; } 
}

public jqGridData<Category> GetGridData(int rows, int page, string sidx, string sord)
        {
            var pageSize = rows;
            var index = sidx;
            var order = sord;
            var categories = Uow.Categories.GetAll().OrderBy(t => (string.IsNullOrEmpty(index) ? "Id" : index) + " " + (order ?? "desc"));
            var pageIndex = Convert.ToInt32(page) - 1;
            var totalRecords = categories.Count();
            var totalPages = (int)Math.Ceiling((float)totalRecords / (float)pageSize);
            var categoriesPage = categories.Skip(pageIndex * pageSize).Take(pageSize);

            return new jqGridData<Category>
            {
                page = page,
                records = totalRecords,
                total = totalPages,
                rows = categoriesPage
            };
        } 
```

提前致谢！！！吉列尔莫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:43:29.890

好吧，我不敢相信，但列名就是这样。第一个字母应该大写，因为它在发送的数据中是大写的。

# django - Django - 为什么不反向工作？

> ID：13889493
> 
> 赞同：0
> 
> 时间：2012-12-15T05:05:47.057
> 
> 标签：django, reverse

我正在尝试将视图重定向到另一个视图，以便用户在不满足条件的情况下无法访问它。在这种情况下，密码更改成功。我也想使用 HttpResponseRedirect 来实现这一点。

现在，我以前从未使用过反向，但我认为这是这样做的方法。问题是我无法反向工作。我收到以下错误：

/account/password/ 处的 ViewDoesNotExist 无法导入 findadownload.main.views.foo。模块 findadownload.main.views 中不存在视图。

```
# URLS

from django.conf.urls import patterns, include, url
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from django.conf import settings

#SANDY
from findadownload.sandy.views import *

#TRIVIARIA
from findadownload.trivia.views import *
from findadownload.accounts.views import *

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    url(r'^$', 'findadownload.main.views.presidium_home', name='presidium_home'),
    (r'^web/$', 'findadownload.main.views.web'),
    (r'^web/developers/$', sandy_developers),

    #SANDY (for findadownload!)
    (r'^get/sandy/$', get_sandy),
    (r'^get/sandy/download/$', get_sandy_download),
    (r'^sandy/register/$', sandy_registration),
    (r'^sandy/complete/$', sandy_complete),
    (r'^web/shared/$', sandy_shared_files),
    (r'^web/remove/all/$', sandy_remove_all),
    (r'^web/remove/(?P<file_id>\w+)/$', sandy_remove_file),
    (r'^about/$', 'findadownload.main.views.about'),
    (r'^pytech/$', 'findadownload.main.views.pytech'), 
    (r'^pytech/aboutus$', 'findadownload.main.views.pytech_about'),
    (r'^pytech/services$', 'findadownload.main.views.pytech_services'),
    (r'^pytech/support$', 'findadownload.main.views.pytech_support'),
    (r'^pytech/contactus$', 'findadownload.main.views.pytech_contact'),
    (r'^pytech/sitemap$', 'findadownload.main.views.pytech_sitemap'),
    (r'^pytech/search/$', 'findadownload.main.views.pytech_search'),
    (r'^presidium', 'findadownload.main.views.presidium_home'),

    #TRIVIARIA
    (r'^register/$', register),
    (r'^login/$', login_view, {'template': 'trivia/registration/login.html'}),
    (r'^logout/$', logout_view),
    (r'^trivia/$', submit_question, {'template': 'trivia/trivia_questions.html'}),
    (r'^challenges/$', submit_question, {'template': 'trivia/trivia_challenges.html'}),
    (r'^question/thanks/$', question_thanks),
    (r'^question/answer/$', submit_answer),
    (r'^question/answer/result/(\d+)/(.*)/$', answer_result),
    (r'^question/answer/challenge/$', challenge_answer),
    (r'^account/$', upload_avatar),
    (r'^account/password/$', password_change),
    url(r'^account/password/success/$', 'findadownload.accounts.views.password_success'),
    (r'^(?P<username>\w+)/$', view_user_profile, {'template': 'trivia/trivia_view_user_questions.html'}),
    (r'^(?P<username>\w+)/trivia/$', view_user_profile, {'template': 'trivia/trivia_view_user_questions.html'}),
    (r'^(?P<username>\w+)/challenges/$', view_user_profile, {'template': 'trivia/trivia_view_user_challenges.html'}),

    #FILE SHARING
    (r'^web/share/(?P<file_id>\w+)/$', sandy_download),
    (r'^web/report/(?P<file_id>\w+)/$', sandy_file_report),
    (r'^web/like/(?P<file_id>\w+)/$', like_download),
    #OTHER
    (r'^web/profile/$', 'findadownload.main.views.web_profile'),
    (r'^web/edit/$', 'findadownload.main.views.web_edit'),
    (r'^trivia/$', 'findadownload.main.views.trivia_home', {'template': 'trivia/registration/index.html'}),
    (r'^web/get/$', 'findadownload.main.views.web_get'),
    (r'^web/progress/$', 'findadownload.main.views.web_progress'),
    (r'^web/foo/$', 'findadownload.main.views.foo'),
    (r'^web/search/$', 'findadownload.main.views.web_search'),
    (r'^web/logout/$', 'findadownload.main.views.web_logout'),
    (r'^web/resend/$', 'findadownload.main.views.web_resend'),
    (r'^web/home/$', 'findadownload.main.views.web_home'),
    (r'^web/history/$', 'findadownload.main.views.web_history'),
    (r'^web/verify/(?P<link>\w+)/$', 'findadownload.main.views.web_activate'),
    (r'^web/help/(?P<username>\w+)/$', 'findadownload.main.views.web_help'),
    (r'^web/welcome/(?P<username>\w+)/$', 'findadownload.main.views.welcome'),
    (r'^web/terms/$', 'findadownload.main.views.web_terms'),
    (r'^web/privacy/$', 'findadownload.main.views.web_privacy'),
    (r'^web/signup/$', 'findadownload.main.views.web_signup'),
    (r'^web/login/$', 'findadownload.main.views.web_login'),
    (r'^test$', 'findadownload.main.views.test'),
    # url(r'^findadownload/', include('findadownload.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
)

if 1:
    urlpatterns += patterns('',
        url(r'^uploads/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
            'show_indexes': True,
        }),
   )

urlpatterns += staticfiles_urlpatterns()

    # VIEWS

    from django.http import HttpResponse, HttpResponseRedirect
    from django.shortcuts import render_to_response
    from findadownload.accounts.forms import *
    from django.contrib.auth.models import User
    from django.contrib import auth
    from findadownload.accounts.models import *
    from django.core.urlresolvers import reverse
    from findadownload.trivia.models import *

    def password_success(request):
        return render_to_response('trivia/trivia_password_success.html')

    def password_change(request):
        if request.user.is_authenticated():
            # if for is submitted
            if request.method == 'POST':
                form = PasswordForm(user=request.user, data=request.POST)
                # for the avatar part
                if form.is_valid():
                    cd = form.cleaned_data
                    request.user.set_password(cd['confirm_password'])
                    request.user.save()`enter code here`
                    # redirect to profile page after POST
                    return HttpResponseRedirect(reverse('findadownload.accounts.views.password_success'))
            else:
                form = PasswordForm(user=request.user)

            # render empty form
            return render_to_response('trivia/trivia_password_change.html', {'form': form},
                                      context_instance=RequestContext(request))
        else:
            return HttpResponseRedirect('/login/?next=%s' % request.path) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:08:49.660

您必须`name`在您的 url 中指定 kwargs，在这种情况下：

```
url(r'^account/password/success/$', 'findadownload.accounts.views.password_success', name = 'password_success') 
```

然后像这样使用反向：

```
return HttpResponseRedirect(reverse('password_success')) 
```

你传入的`reverse`是`name`urlpatterns 上的 kwarg。

编辑：

我可以看看你的其余部分吗`urls.py`？我认为问题不在`reverse`，因为 Django 找不到名为`foo`.

# iphone - 在 ios6 中集成 facebook 登录和获取用户详细信息以及 tabbarcontroller

> ID：13889494
> 
> 赞同：4
> 
> 时间：2012-12-15T05:05:53.877
> 
> 标签：iphone, xcode, facebook, facebook-login

我已经在我的应用程序中实现了 facebook 登录。

1---->我能够进行facebook登录，但之后登录用户能够继续使用我的应用程序，即出现一个带有三个选项卡项目的tabbarController，同时我需要获取facebook用户详细信息（电子邮件、名字、姓氏等)

但我无法检索详细信息。我不明白我哪里错了。

在我的 ViewController.m 中：

```
- (IBAction)performLogin:(id)sender
{
    AppAppDelegate *appDelegate = (AppAppDelegate *) [[UIApplication sharedApplication] delegate];

    [appDelegate openSessionWithAllowLoginUI:YES];

    UITabBarController *tabBarController=[[UITabBarController alloc]init];
    SearchViewController *searchViewController=[[SearchViewController alloc]initWithNibName:@"SearchViewController" bundle:nil];

    UProfile *uprofile=[[UProfile alloc]initWithNibName:@"UProfile" bundle:nil];
    userprofile.title=@"My Profile";

    LogOut *logout=[[LogOut alloc]initWithNibName:@"LogOut" bundle:nil];

    logout.title=@"Sign out";
    tabBarController.viewControllers=[NSArray arrayWithObjects:searchViewController,uprofile,logout, nil];

    [self presentModalViewController:tabBarController animated:YES];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(sessionStateChanged:)
                                                 name:FBSessionStateChangedNotification
                                               object:nil];
}

- (void)sessionStateChanged:(NSNotification*)notification {

    if (FBSession.activeSession.isOpen) {

        [FBRequestConnection
         startForMeWithCompletionHandler:^(FBRequestConnection *connection,
                                           id<FBGraphUser> user,
                                           NSError *error) {
             if (!error) {
                 NSString *fbUserEmail= @"";

                 NSLog(@"%@",user);

                 fbUserEmail=[user objectForKey:@"email"];

                 AppAppDelegate *appDelegate = (AppAppDelegate *) [[UIApplication sharedApplication] delegate];

                 appDelegate.fbEmail=fbUserEmail;
             }
         }
         ];
    }
} 
```

但是在这里没有显示 facebook 登录页面，我得到了 tabbarController，我无法检索用户详细信息。

如何先显示 facebook 登录页面，然后显示 tabbarController 和用户详细信息？成功登录 facebook 后，如何在选择第一个 tabitem（对应视图）的 tabbarcontroller 的情况下继续使用我的应用程序？

请帮我解决这个问题...请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:42:53.130

您需要设置 readPermissions 以获取此方法的电子邮件，方法是向它传递一个`NSArray`带有对象“email”。默认返回名称等剩余信息。

```
+ (BOOL)openActiveSessionWithReadPermissions:(NSArray*)readPermissions
                                allowLoginUI:(BOOL)allowLoginUI
                           completionHandler:(FBSessionStateHandler)handler; 
```

facebook sdk 的。如果我没记错的话，除非指定的权限是“电子邮件”，否则用户字典的电子邮件对象是`nil`. 修改您的状态更改处理程序可能会请求用户详细信息，例如电子邮件。如果会话打开，则在`sessionStateChanged:`处理程序内部，您可以调用一个简单地执行此操作的方法

```
if (FBSession.activeSession.isOpen) {
        [[FBRequest requestForMe] startWithCompletionHandler:
         ^(FBRequestConnection *connection,
           NSDictionary<FBGraphUser> *user,
           NSError *error) {
             if (!error) {
                 NSLog(@"%@", user);
                 NSLog(@"%@", [user objectForKey:@"email"]);

             }
         }];
    } 
```

# php - elseif only displaying 2 images

> ID：13889495
> 
> 赞同：-3
> 
> 时间：2012-12-15T05:05:57.727
> 
> 标签：php, mysql, database, if-statement

Okay so I have radio buttons for the user to pick from certain images as their image. Their image starts as the default image and can change it to 2 others. Here's the radio buttons and PHP to display the image:

```
 <input type="radio" id="Default" name="change_image" value="0" />
    <input type="radio" id="Unknown" name="change_image" value="1" />     
    <input type="radio" id="Gasmask" name="change_image" value="2" />     

    <?php 
if ( $user_image < 1 )
{
    echo 
    '<img src="images/user_image/Default.png" width="60" height="60" />';
} 
elseif ( $user_image = 1 )
{
    echo 
    '<img src="images/user_image/Unknown.png" width="60" height="60" />';
}
elseif ( $user_image > 1 )
{
    echo 
    '<img src="images/user_image/GasMask.png" width="60" height="60" />';
}
?> 
```

Well, the if and first elseif work, but the 3rd elseif will not display that image? Are their any reasons why?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T05:21:18.847

您使用`=`which 是赋值语句而不是比较语句。用来`==`比较！

此外，您所做的似乎有点开销（对我来说，我不是专家），但请注意我看不到您如何处理`$user_image`. 这是我的做法：

```
<input type="radio" id="Default" name="change_image" value="Default" />
<input type="radio" id="Unknown" name="change_image" value="Unknown" />     
<input type="radio" id="Gasmask" name="change_image" value="Gasmask" />     

<?php 
if (isset($_POST['change_image'])) { //make sure you validate that the right stuff is being posted
    $user_image = $_POST['change_image'];
    echo "<img src='images/user_image/".$user_image.".png' width='60' height='60' />";
} 
```

我没有测试变量是否正确连接，但是只要您遵循名称作为单选按钮值的约定，这将为您节省许多 if 语句。我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T05:10:31.120

我相信这是由于您的第二个 elseif。

```
elseif ( $user_image = 1 ) 
```

在您应该测试相等性的地方，您将 1 的值分配给 $user_image。尝试将其替换为：

```
elseif ( $user_image == 1 ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T05:10:33.927

如果条件人使用双相等，您正在分配

```
if ( $user_image < 1 )
{
    echo 
    '<img src="images/user_image/Default.png" width="60" height="60" />';
} 
elseif ( $user_image == 1 )
{
    echo 
    '<img src="images/user_image/Unknown.png" width="60" height="60" />';
} 
```

# linux - sh script escaping

> ID：13889499
> 
> 赞同：0
> 
> 时间：2012-12-15T05:06:42.210
> 
> 标签：linux, sh

From a linux terminal the command:

```
 ls application/js/{a*,b*,c*,d*,e.pocket-secure} 
```

Will list all files in the application/js directory that start with a,b,c,d or e.pocket-secure.

If I place that command in doit.sh and execute:

```
sh doit.sh 
```

I get:

```
ls: cannot access application/js/{a*,b*,c*,d*,e.pocket-secure*}: No such file or directory 
```

I think the {} is confusing the shell interpreter, but I tried quoting (single|double) and also tried escaping the {} to no avail.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:13:05.913

当您在终端中键入时，我怀疑您在`bash`. 当你运行时`sh doit.sh`，你正在改变 shell 的特性，要么是因为`bash`处于兼容模式，要么是因为你正在使用类似`dash`. 尝试做`bash doit.sh`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:44:27.637

这种语法只适用于 bash 解释器你可以试试这个

```
#/bin/bash
ls application/js/{a*,b*,c*,d*,e.pocket-secure} 
```

和

```
chmod +x doit.sh
./doit.sh 
```

或者

只需在 shell 上输入

```
bash doit.sh 
```

# excel - Rotate X,Y Coordinates from Bottom Right to Top left

> ID：13889501
> 
> 赞同：1
> 
> 时间：2012-12-15T05:06:55.407
> 
> 标签：excel, vba, excel-formula

I'm using NodeXL to plot a lot of points which are actual coordinates for cities.

The thing is that the way it's plotted now is that North America is on the Bottom Right but it should be on the top left like on a normal map.

It's like this for all of the points so pretty much I need to rotate the whole graph so that what's on the bottom right will be top left after transformation, and what's on the top right will be on the bottom left.

I have two columns with X and Y points as follows (for example):

```
X       Y
6,238.2 9,896.0
6,141.9 9,896.0 
```

I'm not sure the formula or Math behind this kind of rotation.

**The graph is only positive** so from (0,0) upward and outward to the right, there are no negative values on the x or y axis.

Could anyone help me out?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T02:27:13.003

为了回答：

引用@Tim Williams：`Instead of plotting x and y plot (width-x) and (height-y)`

例子：

![SO13889501 示例](../Images/ca176178e6a6345549ff1e3612f41fe2.png)

# windows - Drag 'n' drop won't work on my sublime text 2 installation

> ID：13889504
> 
> 赞同：5
> 
> 时间：2012-12-15T05:07:22.510
> 
> 标签：windows, sublimetext2, sublimetext

I installed sublime text 2 on my windows system and haven't been able to drag and drop directories/folder from windows onto the app. The documentation says it has this feature.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:43:09.583

您是否尝试`FOLDERS`在左侧栏上“下降”？它没有问题，我正在运行`2.0.1 build 2217`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:07:39.283

如果你将一个文件夹拖到 Sublime Text 中，你会看到文件夹名称出现在标题栏中。如果您的侧边栏没有打开，您可以通过查看 > 侧边栏 > 显示侧边栏来打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-17T00:15:47.860

谢谢你们。我最近才注意到这是因为我总是以管理员身份运行该应用程序。如果您以管理员身份运行应用程序，您可能会失去这些功能。我也注意到了记事本。

你可以从中学习。

*注意：当我第一次提出问题时，无法发布作为答案，所以我不得不编辑我的答案。现在发布作为答案，因为我有足够的声誉这样做。*

# ruby-on-rails - 在 Rails 中，product_id 未采用方法显示错误，因为 GetproductsController#show 中的 ActiveRecord::RecordNotFound

> ID：13889508
> 
> 赞同：1
> 
> 时间：2012-12-15T05:07:42.170
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

由于我是 Rails 新手，我无法查明错误。我正在编写一种方法来通过提供 URL 中唯一的 prod_id 来获取数据。我将 URL 作为 localhost:3000/getproducts/PR1.josn 以获取 json 格式的数据。但它显示了一个错误

```
ActiveRecord::RecordNotFound in GetproductsController#show

Couldn't find Product without an ID

Rails.root: /root/Railsapps/Shopping
Application Trace | Framework Trace | Full Trace

app/controllers/getproducts_controller.rb:12:in `show' 
```

**在这里我给我的 getproducts.rb 这是控制器**

```
class GetproductsController < ApplicationController

   def index
    @products = Product.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @products }
    end
  end
  def show
    @product = Product.find(params[:prod_id]) 
    respond_to do|format|
      format.html  {render show.html.erb}
       format.xml  #{ render :xml => @product }
      format.json {render json:@product}
    end
      end

end 
```

**我的模型是product.rb**

```
class Product < ActiveRecord::Base
  attr_accessible :model_name, :brand_name, :prod_id
end 
```

**我的 show.html.erb**

```
<p id="notice"><%= notice %></p>

<p>
  <b>Model Name:</b>
  <%= @product.model_name %>
</p>

<p>
  <b>Brand Name:</b>
  <%= @product.brand_name %>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:31:08.300

您是否还可以在 config/routes.rb 中编写该 url 的路由？

在您的模型上，您需要告诉 rails 您的主键不是预期的“id”，所以这样做

```
class Product < ActiveRecord::Base
   set_primary_key :prod_id

   attr_accessible :model_name, :brand_name, :prod_id
end 
```

然后你可以做

```
Product.find(params[:id]) 
```

它应该工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:21:05.697

我认为问题很可能是 Rails 正在获取您提供的参数并假设它被调用`id`，因此当您要求时`prod_id`，没有这样的参数。这是 show 动作的默认值 - 假定参数被命名`id`。然后您尝试通过 params[:prod_id] 查找，它是 nil，因为 params（可能）只是`{:id => 'PR1'}`.

您可以通过传递`params[:id]`而不是调用来解决此问题，或者通过修改您的 routes.rb 文件来解决此问题，因此：`params[:prod_id]``Product.find_by`

```
resources :getproducts, :except => [:show]

get 'getproducts/:prod_id' => 'getproducts#show' 
```

首先，你告诉 Rails 不要使用这个控制器的默认显示路由（这是`:except`选项）。然后，您定义自己的路由，指定参数的名称。这样，当您调用 时`getproducts/PR1`，“PR1”将作为`params[:prod_id]`. 您需要先排除默认值，因为 Rails 将使用第一个匹配的路由，所以只要默认值仍然存在，它就由`resources`调用定义。

# linux - 如何计算 awk 中输出的实例数？

> ID：13889509
> 
> 赞同：0
> 
> 时间：2012-12-15T05:07:59.997
> 
> 标签：linux, bash, awk

**TL;博士**

这个想法是：

```
awk '{
    IP[$1]++;
  }
  END {
    for(var in IP) 
      print IP[var]
  }
}' getline < sockstat | awk '{print $2 "@" $3}' | grep -v '^PROCESS@PID' 
```

我想计算输出中每个块的实例数 -> sockstat | awk '{打印 $2 "@" $3}' | grep -v '^PROCESS@PID'

看起来像：

```
ubuntu-geoip-pr@2382
chrome@2453
chrome@2453
chrome@2453
chrome@2453
chrome@2453
chrome@2453
chrome@2453
chrome@2453
rhythmbox@4759
rhythmbox@4759
rhythmbox@4759 
```

最后，我想得到输出：

```
1
8
3 
```

这对应于上一个输出中每个项目的出现次数。

**完整的问题：**

sockstat命令输出*localhost*的一些网络统计信息。我首先从输出的第二列和第三列（分别为 PROCESS 和 PID）打印出一个键，格式为 PROCESS@PID。然后，我想从该输出中计算每个唯一键的频率。一种方法是使用 awk getline 结构，但这似乎适用于文件，我无法让它直接从上述命令中提取输入。

我不想使用临时文件，因为这会带走解决方案的优雅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:01:46.180

```
sockstat | awk '{print $2 "@" $3}' | grep -v '^PROCESS@PID' | sort | uniq -c | awk '{print $1}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T11:19:41.970

You could simplify your command:

```
sockstat | awk 'NR>1 { a[$2 "@" $3]++ } END { for (i in a) print a[i], i }' 
```

If you just want the counts, simply edit the print statement:

```
sockstat | awk 'NR>1 { a[$2 "@" $3]++ } END { for (i in a) print a[i] }' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T05:54:12.610

How about this?

```
sockstat | grep -v PROCESS | awk '{key=$2"@"$3; count[key]++} END {for ( key in count ) { print key" "count[key]; } }' 
```

# php - 是否有一种简单的方法可以在 Laravel 中打印出表单输入

> ID：13889518
> 
> 赞同：1
> 
> 时间：2012-12-15T05:09:44.753
> 
> 标签：php, laravel

我有一个基本表单，我想在其中提取用户输入，然后显示表单中的连接输入

```
echo Form::open('url_encoder','GET');
echo Form::token();
echo Form::text('dest', null, array('class' => 'span3', 'placeholder' => 'Destination...'));
echo "<br>";
echo Form::text('utm_source', null, array('class' => 'span3', 'placeholder' => 'Source...'));
echo "<br>";    
echo Form::text('utm_content', null, array('class' => 'span3', 'placeholder' => 'Content...'));
echo "<br>";
echo Form::text('utm_medium', null, array('class' => 'span3', 'placeholder' => 'Medium...'));
echo "<br>";
echo Form::text('utm_campaign', null, array('class' => 'span3', 'placeholder' => 'Campaign...'));   
echo "<br>";
echo Form::submit('Encode');    
echo Form::close(); 
```

我想在这之后添加一些东西来连接输入。在 Laravel 中，我以前的做法是行不通的。`$_GET`我正在设置用于获取表单输入的变量。然后我会调用变量并将变量连接在一起（即。`echo "$var1" . "$var2" . "$var3"`）。

有人可以建议如何在 Laravel 中做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T05:50:09.177

使用[输入类](http://laravel.com/docs/input)

```
echo Input::get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T18:51:52.053

您还可以使用 dd 转储给定变量并结束脚本的执行。

```
dd(\Input::get()); 
```

这会格式化数组、对象、集合等，以获得更好的易读性。

# iphone - 如何保存 FlipsideViewController 中 UITextField 的值并在 MainViewController 中使用它们？

> ID：13889520
> 
> 赞同：0
> 
> 时间：2012-12-15T05:10:03.760
> 
> 标签：iphone, objective-c

**见底部编辑**

我正在`UtilityView`为 iPhone 制作一个应用程序，我希望能够从`FlipsideViewController`. 我有一个问题，每当我从 FlipsideView 切换回 MainView 时，我在 FlipsideView 中更改的文本字段的值似乎都重置为 0 `MainViewController.m`。`flipsideViewControllerDidFinish:`

```
playToInt = [controller.playTo.text intValue];

computerMoveSpeed = [controller.aiSpeed.text intValue]; 
```

文本字段“playTo”与整数“playToInt”坐标，文本字段“aiSpeed”与整数“computerMoveSpeed”坐标。我认为这应该保存值，即使 ViewDidLoad 再次运行，但它们似乎都被重置为 0。

```
if (playToInt != 10 || computerMoveSpeed != 3)   
{
  playBool = true;
} 
else 
{
  playBool = false;
} 
```

我知道布尔值正在工作，因为我可以用它更改整数的值，但它们总是默认为 0。感谢任何帮助。提前致谢。

注意：我已经咨询了上一个问题“将 UISegmentedControl 值从实用程序应用程序中的 FlipSideViewController 传递到主视图控制器……”这对我不起作用……我有太多可能的值无法使用索引或开关。

编辑：我正在尝试一些我认为非常接近工作的东西......我觉得它只是语法不好或其他东西......我在 MainViewController.m 中有：

```
computerMoveSpeed = [FlipsideViewController.aiSpeed.text intValue];

playToInt = [FlipsideViewController.playTo.text]; 
```

编辑：我有一些与上一个相似的东西，但我认为它会有更好的机会在一些帮助下工作......

在`FlipsideViewController.m`我有

> _playToNumber = [_playTo.text intValue];

并且在`MainViewController.m`

> playToInt = [controller.playToNumber];

非常感谢任何帮助，但作为一些附加信息，在它的字符串上`MainViewController`它说它需要`playToNumber`变量上的标识符，但它被声明为`int`......我不知道是否有`int`s 的标识符，但如果有是，请告诉我！

编辑：有什么方法可以将值保存为可用的格式，`MainViewController`以便`prepareForSegue`在`FlipsideViewController`?

编辑：我发现它只是在加载时获取初始值`ViewDidLoad`，所以我开始使用计时器来检索值。这似乎有效，我只需要知道如何从`MainViewController`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:32:46.417

使用委托将值发送回`MainViewController`. 请参阅[本教程](http://alexefish.com/post/15966868557/understanding-and-creating-delegates-in-objective-c)以了解如何使用委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T07:14:29.510

你有很多方法可以完成这项任务，

**1.NSUserDefault** [_](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

关注ma回答[链接](https://stackoverflow.com/questions/13509999/i-have-nsstring-value-in-addviewcontroller-and-i-want-to-display-this-value-in-u/13619879#13619879)

**2.**使用`Getters, setters, property`

关注ma回答 [链接](https://stackoverflow.com/questions/13602840/passing-the-value-from-one-class-to-other-class/13606108#13606108)

**编辑**

如果你想要`int`或者`NSInteger`不需要保留
就做

```
@property(nonatomic) NSInteger YourIntValue; 
```

和

```
_playToNumber = [_playTo.text intValue];

MainViewController *MVC = [[MainViewController alloc] init];
MVC.playToInt=_playToNumber;
[self.navigationController pushViewController:MVC animated:YES]; 
```

# .htaccess - 将动态 URL 转换为具有随机 id 的静态 URL

> ID：13889527
> 
> 赞同：0
> 
> 时间：2012-12-15T05:11:11.220
> 
> 标签：.htaccess, url-rewriting

我想用 htaccess 文件转换我的 URL

从

```
http://example.com/sfdf121d 
```

至

```
http://example.com/test.php?id=sfdf121d 
```

'sfdf121d' 是一个随机的 no ，它是可变的

我的 htaccess 代码是

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^([0-9]+) test.php?id=$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:25:27.783

这是一个选项。尝试这个：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^.*/(\w+)$ [NC]
RewriteRule .* test.php?id=%1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:10:39.433

您应该提供更多信息： - 返回 404 时哪个 URL 是结果 - 是由框架/cms 处理的 404 - 那里存在哪些其他条件和重写

我假设重写规则不是以数字开头，因此它不会重写

尝试从头开始检查。RewriteRule ([0-9]+)$ test.php?id=$1 [L]

无论如何，您还应该检查您的 test.php 是否匹配。所以在上面的行之前添加。

重写规则 (. *)?test.php(.* )? - [大]

这肯定也可以优化:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T05:13:49.020

尝试：

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)$ test.php?id=$1 [L] 
```

# youtube-api - Youtube API v3 是否让您获得仅上传的活动提要

> ID：13889528
> 
> 赞同：4
> 
> 时间：2012-12-15T05:11:20.607
> 
> 标签：youtube-api

调用活动源的默认设置是所有类型。如果有一种按类型过滤的方法，那将是惊人的，这样我就可以获得上传的提要。这可能吗？

[https://www.googleapis.com/youtube/v3/activities?access_token=####&part=id,snippet,contentDetails&home=true&maxResults=50](https://www.googleapis.com/youtube/v3/activities?access_token=####&part=id,snippet,contentDetails&home=true&maxResults=50)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:43:43.227

如果您正在寻找上传内容，您实际上应该调用 Channels 资源以获取 Uploads 播放列表，然后将 PlaylistItems 用于您的活动提要。

因此，要获取 Google 频道的上传内容，请在此处拨打电话：

> [https://www.googleapis.com/youtube/v3/channels?part=contentDetails&id=UCK8sQmJBp8GCxrOtXWBpyEA&key={YOUR_API_KEY}](https://www.googleapis.com/youtube/v3/channels?part=contentDetails&id=UCK8sQmJBp8GCxrOtXWBpyEA&key=%7BYOUR_API_KEY%7D)

您将在 json 响应中找到播放列表 ID (UUK8sQmJBp8GCxrOtXWBpyEA)：

项目 -> contentDetails -> 相关播放列表 -> 上传

然后调用 PlaylistItems 资源，并将“UUK8sQmJBp8GCxrOtXWBpyEA”设置为 playlistId

> [https://www.googleapis.com/youtube/v3/playlistItems?part=id%2Csnippet%2CcontentDetails&maxResults=50&playlistId=UUK8sQmJBp8GCxrOtXWBpyEA&key={YOUR_API_KEY}](https://www.googleapis.com/youtube/v3/playlistItems?part=id,snippet,contentDetails&maxResults=50&playlistId=UUK8sQmJBp8GCxrOtXWBpyEA&key=%7BYOUR_API_KEY%7D)

# php - 文件读取和多维数组

> ID：13889535
> 
> 赞同：0
> 
> 时间：2012-12-15T05:13:19.407
> 
> 标签：php, arrays

这是我正在阅读的文本文件的内容

```
All Guests Listed Below

ID: SeanCarrington [x]
Name: Sean [x]
Email: Carrington [x]

ID: ChrisCarrington [x]
Name: Chris [x]
Email: Carrington [x] 
```

我想提取每个客人的 ID，所以我写了这个

```
preg_match_all("/(ID: )(.*)(\[x\])/", $fileContent, $matches); 
```

一个 print_r`$fileContent`给了我这个

```
Array ( [0] => Array ( [0] => ID: SeanCarrington [x] [1] => ID: ChrisCarrington [x] ) [1] => Array ( [0] => ID: [1] => ID: ) [2] => Array ( [0] => SeanCarrington [1] => ChrisCarrington ) [3] => Array ( [0] => [x] [1] => [x] ) ) 
```

我的目标是打印出每个用户的第 2 组。换句话说，他们的 ID。所以目标输出是

```
SeanCarrington
ChrisCarrington 
```

我试过这个

```
echo $matches[0][2];
echo $matches[1][2]; 
```

但我得到这个错误

```
Notice: Undefined offset: 2 in /data/helios_web/ccarrin2/IT207/lab9/convertToArray.php on line 10
Notice: Undefined offset: 2 in /data/helios_web/ccarrin2/IT207/lab9/convertToArray.php on line 11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:16:48.240

每个用户似乎有两个组，但这些组的索引为 0 和索引为 1。

```
echo $matches[0][0]; // "ID: SeanCarrington"
echo $matches[0][1]; // "ID: ChrisCarrington" 
```

由于您*只*需要 ID 名称，因此请在此处查看您的数组结构：

```
[2] => Array (
    [0] => SeanCarrington
    [1] => ChrisCarrington
) 
```

该组（索引 2）中有两个用户，因此您使用索引 2，*然后*使用索引 0 和 1：

```
echo $matches[2][0]; // "SeanCarrington"
echo $matches[2][1]; // "ChrisCarrington" 
```

# c++ - 按位操作的问题

> ID：13889541
> 
> 赞同：5
> 
> 时间：2012-12-15T05:13:58.473
> 
> 标签：c++, c, 64-bit, bit-manipulation

好的，伙计们，我知道我想做什么，但我不知道它是否已经存在（作为一个函数或理论上）或者如何表达它，所以我需要你的帮助：

*   假设我们有一个二进制数：*(msb)* `10101110`*(lsb)*
*   从位 X 开始，我想在遇到第一个零位时将所有其他位清零（向左）。
*   尽可能**快**地做到这一点，所需的操作和 CPU 周期绝对最少

**一个例子 ：**

*   数字 = 10101110，起始位置 = 1（位置 1 的位 = 1）
*   position++ - 位置 2 = 1，继续
*   position++ - 位置 3 = 1，继续
*   position++ - 位置 4 = 0 的位，哎呀……遇到零……现在，一切都必须归零。

因此，我们想象的函数 CROPLEFT(X,POS) 的最终结果，其中 X=10101110 和 POS=1，将返回`00001110`。

* * *

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-15T05:18:07.510

小菜一碟。

```
y = ~x;    // We like working with 1's, not 0's.
y &= -y;   // Mask off all but the lowest-set bit
x &= y-1;  // Make a mask for the bits below that and apply it. 
```

并添加了位置参数：

```
y = ~x & -1U<<pos; // Change 1U to a larger type if needed.
y &= -y;
x &= y-1; 
```

关键要素是第二行，并且您可以`y`通过应用逻辑和反对来仅用其最低设置位替换一个值`-y`。遗憾的是，获得最高设置位没有这样的运气，除非您有一个特殊的 cpu 指令，所以您很幸运，您的问题要求最低。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T05:27:33.833

好吧，什么鬼：

```
return x & ((x ^ (x + (1UL << POS))) | ((1UL << POS) - 1)) 
```

* * *

值得一提的是，它们都是用 gcc-4.7 -O3 编译的。R..在左边，我在右边：（在他们两个中都使用 unsigned long 和 1UL）

```
 .p2align 4,,15                          .p2align 4,,15
        .globl  zapleft                         .globl  zapleft2
        .type   zapleft, @function              .type   zapleft2, @function
zapleft:                                zapleft2:           
.LFB0:                                  .LFB1:
        .cfi_startproc                          .cfi_startproc
        movl    %esi, %ecx                      movl    %esi, %ecx
        movq    %rdi, %rax                      movl    $1, %edx
        movq    $-1, %rdx                       salq    %cl, %rdx
        salq    %cl, %rdx                       leaq    (%rdx,%rdi), %rax
        notq    %rax                            subq    $1, %rdx
        andq    %rax, %rdx                      xorq    %rdi, %rax
        movq    %rdx, %rax                      orq     %rdx, %rax
        negq    %rax                            andq    %rdi, %rax
        andq    %rdx, %rax                      ret
        subq    $1, %rax                        .cfi_endproc
        andq    %rdi, %rax              .LFE1:
        ret                             .size   zapleft2, .-zapleft2
        .cfi_endproc
.LFE0:
        .size   zapleft, .-zapleft 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T05:28:59.597

```
CROPLEFT(int X,int POS) {

    int mask = 1 << POS;

    while (X & mask)
        mask <<= 1;

    return (X & (mask - 1));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T11:27:26.273

用一个替换尾随零：

```
x = x | (x-1); 
```

用零替换尾随的：

```
x = x & (x+1); 
```

**编辑**：哎呀，看来我误读了这个问题，上面的代码将右侧位归零，而不是左侧位！

要将左边的位归零，我们需要一个最终的 XOR 操作：

```
y = x | (x-1);
y = y & (y+1);
y = x ^ y; 
```

**编辑 2**关于起始位置 POS

我们只需在第一步中将最右边的 POS 位清零。

```
y = x & (-1U<<pos);
y = y | (y-1);
y = y & (y+1);
y = x ^ y; 
```

**编辑 3**如果在 POS 遇到第一组零，则上述解决方案将忽略它们。
如果这不能回答问题，那么代码会更短，但很像现在的 rci ：

```
y = x | ((1U<<pos)-1); // fill trailing positions with ones
y = y & (y+1);         // replace trailing ones by zeroes
y = x ^ y;             // modify leading bits rather than trailing ones 
```

# ruby-on-rails - 按小时分组并在rails中使用用户时区？

> ID：13889545
> 
> 赞同：3
> 
> 时间：2012-12-15T05:14:43.223
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我必须显示过去 30 天内每天有多少次 api 调用给用户，以便构建一个漂亮的图表。到目前为止，我对此没有任何问题。需要注意的重要一点是，数据库和系统时区采用 UTC，但大多数用户位于太平洋时间 (GMT -8)。

为了获得按使用日期分组的 api 使用情况，我可以做类似的事情

```
ApiCall.
  where(user_id: @user.id).
  where("requested_at > ?", Time.zone.now.to_date - 30.days).
  group("date(requested_at)").
  select("count(*) as qty, date(requested_at) as requested_at").all 
```

现在的问题是，位于加利福尼亚的用户的时间与位于英格兰的用户的时间大不相同，这就是我失败的地方。

一位用户在 2012 年 12 月 14 日 21:00:00 GMT -8 进行 API 调用，位于加利福尼亚州。数据库中的 API CALL 存储时间为 2012-12-14 05:00:00（因为它在 GMT 中，所以它增加了 8 小时）。

现在对于那个用户，如果我去查看我的日常使用情况，通过我所做的查询，它将显示我的 api 调用不是在 2012 年 12 月 14 日 21:00:00 进行的，因为它在数据库上存储为2012-12-14 05:00:00，对于用户而言，api 使用情况将显示他在第二天进行了该 api 调用，他会认为系统工作不正常。

简而言之，如何根据用户时区而不是数据库时区对 api 调用进行分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:42:27.603

是的，通过使用 mysql convert timezone 函数，它不是一个很好的解决方案，但它可以工作

```
ApiCall.
  where(user_id: @user.id).
  where("requested_at > ?", Time.zone.now.to_date - 30.days).
  group("date(convert_tz(requested_at, '+00:00', '-08:00'))").
  select("count(*) as qty, date(requested_at) as requested_at").all 
```

稍后我将添加赏金，看看是否有人可以告诉我有关此类带有轨道和时区的报告的更好解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T17:15:26.397

您可以为请求设置时区并在 Rails 中进行日期排序。

```
ApiCall.
  where(user_id: @user.id).
  where("requested_at > ?", Time.zone.now.to_date - 30.days).
  group_by({|api_call| api_call.requested_at.to_date}) 
```

通常在 Rails 中，您在控制器操作的 before_filter 中设置时区。

```
Time.zone = current_user.time_zone if logged_in? 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T10:03:19.110

我不认为 Rails 带有这种范围，它会在对其进行“组”之前转换用户时区中的数据库日期。

但是，您可以定义自己的范围来处理它，例如：

```
class ApiCall  
  scope :group_by_date_in_timezone, lambda{|date_column| 
    group("date(convert_tz(#{date_column}, '+00:00', '#{Time.zone.formatted_offset}'))")
  } 
```

然后您的查询变得更加清晰：

```
ApiCall.
  where(user_id: @user.id).
  where("requested_at > ?", Time.zone.now.to_date - 30.days).
  group_by_date_in_timezone(:requested_at).
  select("count(*) as qty, requested_at").all

  # 'date(requested_at) as requested_at' would be also in DB Time zone
  # Instead we can select 'requested_at' to let Rails do the user timezone conversion
  # you can easily convert it to a date later with #to_date 
```

此范围也可能对其他模型有用，然后您可以按照以下问题的答案将其定义为全局 ActiveRecord 范围：[Hacking ActiveRecord: add global named scope](https://stackoverflow.com/questions/3829174/hacking-activerecord-add-global-named-scope)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-24T21:45:52.883

有点晚了，但是 Postgresql 的答案来了：

首先定义这个 var 使事情更具可读性：

```
requested_at_day = "date(requested_at AT TIME ZONE \'UTC\'
              AT TIME ZONE \'#{Time.zone.tzinfo.identifier}\')" 
```

然后：

```
ApiCall.
  where(user_id: @user.id).
  where("requested_at > ?", Time.zone.now.to_date - 30.days).
  group(requested_at_day).
  select("count(*) as qty, #{requested_at_day} as requested_at_day").all 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-23T23:53:37.297

我认为以 UTC 格式存储所有记录是一个好习惯，因此无需转换任何内容，并且可以正确计算时间间隔。仅在向用户显示时间时转换为用户的本地时区。

# mysql - 选择至少具有特征列表的所有行

> ID：13889547
> 
> 赞同：1
> 
> 时间：2012-12-15T05:15:28.837
> 
> 标签：mysql, database-design, relational-database

我有 EXPERIMENTAL_RUNS (runId)，每个都有与它们关联的任意数量的 SENSORS (sensorId)。考虑到这一点，我有一个 RS 表来连接两者：

```
==========
RS
==========
runId, sensorId 
```

因此，如果 runId=1 的运行中包含 sensorId=1、sensorId=6、sensorId=8 的传感器，则 RS 表中将有 3 个条目： (runId=1, sensorId=1) (runId=1, sensorId =6) (runId=1, sensorId=8)

这真的是我返回所有具有传感器 {11,13,15} 的 EXPERIMENTAL_RUNS 的方式吗？从我读过的内容来看，我似乎想要的是一个嵌套的哈希连接......这会发生什么吗？

```
SELECT a.runId
FROM rs a, rs b, rs c
WHERE
a.runId=b.runId AND
b.runId=c.runId AND
a.sensorId=11 AND
a.sensorId=13 AND
b.sensorId=15 
```

为了澄清，我只想返回具有传感器 11 和 13 和 15 的 EXPERIMENTAL_RUNS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T07:29:36.103

假设`runId, sensorId`在表中是唯一的`rs`，这将找到`runId`具有全部 3 个`sensorId`s 的 s：

```
SELECT runId, COUNT(c) ct
FROM rs
WHERE sensorId IN (11, 13, 15)
GROUP BY runId
HAVING ct = 3 
```

# html - 用于响应式屏幕尺寸的 CSS div

> ID：13889548
> 
> 赞同：1
> 
> 时间：2012-12-15T05:15:45.920
> 
> 标签：html, css

我有徽标和徽标名称作为要显示的文本。请查看下图以清楚地了解我的问题。找到的大多数提示和答案都使用绝对定位，但这不符合我的要求。 ![在此处输入图像描述](../Images/5f96b26f18d8bf5ca7a4a288ac89ee53.png)

**div 类框：** 黄色：容器，绿色：用于徽标，蓝色：徽标文本或徽标名称作为文本

在上面示例 div 布局图像的右侧可以找到所有要实现的正确显示。

**问题总结：**

1.  如果 div（徽标和徽标文本）都向左浮动，那么一切都会正常工作，**但**唯一的问题是它浮动在顶部。如何在“容器”底部显示“徽标文本”？

2.  如果不将“徽标文本”定位到绝对位置，这可能吗？

现在，div 容器、徽标和徽标文本类向左浮动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:52:08.130

我认为`display: inline-block`with`vertical-align: bottom;`可以让你到达你想去的地方；

```
<div class=logo>logo</div>
<div class=name>name</div>​

.logo {
    display: inline-block;
    vertical-align: bottom;
    width: 200px;
    height: 200px;
    background-color: red;
}
.name {
    display: inline-block;
    vertical-align: bttom;
    width: 300px;
    height: 50px;
    background-color: blue;
} 
```

​</p>

这是在行动：http: [//jsfiddle.net/hajpoj/CDBHT/](http://jsfiddle.net/hajpoj/CDBHT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:02:43.200

调整结果窗口的大小以查看效果。

[**演示**](http://jsfiddle.net/HyN54/3/)

让你的孩子 div`inline-block`是解决方案。此外，您需要为您的容器提供一个`max-width`和`min-height`属性，以便它重新调整大小以适合您的内容。看到这个解决方案 -

HTML-

```
<div id="con">
    <div id="lo"></div>
    <div id="tex"></div>
</div> 
```

CSS-

```
#con
{
    max-width:310px;
    min-height:140px;
    background:yellow;
    border: 1px solid aqua;
}

#lo
{
    width:140px;
    height:140px;
    background:green;
    display:inline-block;
    vertical-align:bottom;
}

#tex
{
    width:160px;
    height:60px;
    background:orange;
    display:inline-block;
    vertical-align: bottom;
} 
```

# php - php脚本没有在fedora中运行

> ID：13889550
> 
> 赞同：0
> 
> 时间：2012-12-15T05:15:48.883
> 
> 标签：php, linux, lamp

我之前是 Windows 用户，想转向 Linux。为此，我在我的 FC 15 中安装了 LAMP。但我无法在那里运行任何 php 脚本。我将文件保存到`var/www/html`，但是当我尝试运行`http://localhost/test.php`它时显示一个空白页。注意：`rpm -q php`显示`php-5.4.9-1.fc15.remi.x86_64`. 请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:21:00.800

我认为您还需要安装 php-common 软件包

```
yum install php-common 
```

会做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T13:52:48.460

请执行下列操作...

```
yum install php* 
```

安装所有软件包，然后不要忘记重新启动 apache/LAMP。

如果仍然没有出现，请尝试`http://localhost/index.html`告诉输出（如果可能）的内容`httpd.conf`。docroot 可能是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T05:40:48.937

您没有设置正确的权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-27T22:43:32.150

打开终端并粘贴这两个命令：

```
systemctl start httpd.service 
```

和

# css - CSS3 webkit动画的交叉兼容浏览器编码？

> ID：13889551
> 
> 赞同：-1
> 
> 时间：2012-12-15T05:15:49.627
> 
> 标签：css, css-transitions

好奇地发现我能够在`webkit-animation`非 webkit 浏览器中实现以下功能，例如 Firefox、Internet Explorer 和 Opera？编码会是什么？

```
@-webkit-keyframes FadeIn {
   0% {
    opacity:0;
      }
   100% {
    opacity:1;
      }
}

.object {
    -webkit-animation-name: FadeIn;
    -webkit-animation-timing-function: ease-in;
    -webkit-animation-duration: 3s;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T05:22:46.790

```
@-webkit-keyframes FadeIn
{
        0%
        {
                opacity:0;
        }
        100%
   {
                opacity:1;
        }
}
@-webkit-keyframes FadeOut
{
        0%
        {
                opacity:1;
        }
        100%
   {
                opacity:0;
        }
}
@-moz-keyframes FadeIn
{
  from { opacity:0; } to { opacity:1; }
}
@-moz-keyframes FadeOut
{
  from { opacity:1; } to { opacity:0; }
}
@-o-keyframes FadeIn
{
  from { opacity:0; } to { opacity:1; }
}
@-o-keyframes FadeOut
{
  from { opacity:1; } to { opacity:0; }
}
@keyframes FadeIn
{
  from { opacity:0; } to { opacity:1; }
}
@keyframes FadeOut
{
  from { opacity:1; } to { opacity:0; }
}
#example
{
-webkit-animation:FadeIn ease-in 0.5s;
-moz-animation:FadeIn ease-in 0.5s;
-o-animation:FadeIn ease-in 0.5s;
animation:FadeIn ease-in 0.5s;
-webkit-animation-fill-mode:forwards;
-moz-animation-fill-mode:forwards;
-o-animation-fill-mode:forwards;
animation-fill-mode:forwards;
} 
```

IE 不支持 CSS3 过渡。[从这里](http://css3please.com/)获得更多建议

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:28:01.097

猜你可以用

```
-moz-animation: 
```

对于 Mozilla 和

```
-o-animation: 
```

歌剧。

Internet Explorer 不支持同样的

您可以查看此链接以获取更多信息[http://www.w3schools.com/css3/css3_animations.asp](http://www.w3schools.com/css3/css3_animations.asp)

# php - 处理用户的帖子？什么类型的数据库？

> ID：13889552
> 
> 赞同：-4
> 
> 时间：2012-12-15T05:15:58.617
> 
> 标签：php, html, mysql, database

好的，所以我想知道 Facebook 和 Twitter 等其他网站如何跟上用户的帖子？当用户进入时间线并发布帖子时，我不会想象他们的文本等会保存在 mySQL 数据库中。他们的用户数据可能，但我不认为他们的帖子会。谁能告诉我应该研究什么类型的数据库？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:23:03.057

据我所知，Facebook 使用了一堆使用分片分布的 MySQL 数据库；Twitter 使用他们自己的数据库系统和一个名为[FlockDB](https://github.com/twitter/flockdb) ¹的 MySQL 后端。

¹我无法解释为什么最近没有任何提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:40:46.647

它可以保存在mysql数据库中。如果你还没有，你应该阅读数据库中的外键和主键，它们创建了一个关系，将一个名为的表连接`users`到另一个名为的表，该表`posts`可能有一个`poster`链接到`users`=>`id`或其他东西的列。如果您知道数据库关系，这很容易

# git - Gitblit 推送错误“错误：RPC 失败；结果 = 52，HTTP 代码 = 0”

> ID：13889553
> 
> 赞同：7
> 
> 时间：2012-12-15T05:16:00.290
> 
> 标签：git, push, rpc, gitblit

在我的 Mac OS X 10.8 上设置 gitlbit，但一直无法推送！

在 Gitblit Web 界面中，我创建了一个名为 empty 的空存储库，并通过以下命令将其克隆到本地存储：

```
git clone https://localhost:8443/git/test/empty.git 
```

我添加了一个文件并提交了更改并添加了一个远程

```
git remote add gitblit https://localhost:8443/git/test/empty.git 
```

然后我尝试推动：

```
git push -v gitblit master 
```

错误显示：

```
Pushing to https://localhost:8443/git/test/empty.git
Counting objects: 3, done.
Writing objects: 100% (3/3), 215 bytes, done.
Total 3 (delta 0), reused 0 (delta 0)
POST git-receive-pack (351 bytes)
error: RPC failed; result=52, HTTP code = 0
fatal: The remote end hung up unexpectedly
fatal: The remote end hung up unexpectedly
Everything up-to-date 
```

我尝试了 ssl 和缓冲区设置，但没有帮助。

```
git config http.postBuffer 524288000
git config http.sslVerify false 
git config --global http.postBuffer 524288000
config --global --bool --add http.sslVerify false 
```

我的 Gitblit 绑定设置全部设置为空白以接受对所有接口的绑定：

```
server.httpBindInterface = 
server.httpsBindInterface = 
server.ajpBindInterface = 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T06:21:30.927

我刚刚解决了将 git 版本更新为最新版本（2.1.2）的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T18:24:53.677

这已经很晚了，但我自己也遇到了这个问题，未来的用户可能会觉得这很有帮助。

我的工作组正在设置我们自己的 git 服务器，但忘记为组的远程存储库添加写权限。

使用 chmod 添加组写入权限就可以了。

# git - '你不存在，走开' - 这个heroku错误是什么意思？

> ID：13889557
> 
> 赞同：18
> 
> 时间：2012-12-15T05:16:55.103
> 
> 标签：git, heroku

所以我像往常一样推送我的代码，并且：

> git push heroku master
> 你不存在，走开！
> 致命：远端意外挂断

有谁知道这应该是什么意思？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-02T15:14:11.857

如果您从 OS X 推送，那么 OS X 可能会进入这种时髦状态，您的用户不知道自己的身份——您可以通过键入“id”命令来确认，您会看到您的用户名丢失，或尝试 sudo 不起作用。

出于某种原因，这似乎解决了它：

```
dscacheutil -flushcache 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T07:49:37.390

通常是这样的：

```
The remote end hung up unexpectedly 
```

告诉我们连接问题。但是这个：

```
You don't exist, go away! 
```

通常意味着SSH**客户端**无法解析您的用户名（LDAP错误？）所以，我认为这是您这边的问题，但要解决它，应该有更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T18:11:13.307

您可能正在运行 nscd。该事物缓存 passwd 条目，以便程序不会浪费时间解析 /etc/passwd、调用 NIS、LDAP 或其他任何东西。

如果事物的数据库损坏（现在不太可能），或者如果它缓存了否定答案（更有可能），它可以从缓存中删除任意用户。“sudo nscd -i passwd”应该可以工作。

如果这不能解决问题，请终止 nscd 以便不再缓存请求。解决问题。然后删除`/var/cache/nscd/passwd`并重新启动 nscd。

如果 LDAP/NIS/whatever 没有及时回答，并且未回答被误解为“不存在的条目”而不是“服务问题”，就会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-04T11:16:36.480

这通常是由在用户的身份验证凭据更改之前正在运行的进程引起的。（即密码更改）

sshd 可以缓存用户的凭据，这意味着更改前的凭据仍然有效。重新启动使用 ssh 的服务将解决此问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-15T21:51:21.783

我今天再次尝试推送到heroku，它自动神奇地工作了。我没有任何变化。

不过，感谢其他所有人的所有想法，我正准备做所有这些事情，但我想在潜入之前试一试，它就奏效了。

我想我们永远不会知道它到底是什么...

# iphone - CCSpriteBatchNode 和 CCArray，查找非活动对象

> ID：13889559
> 
> 赞同：0
> 
> 时间：2012-12-15T05:17:45.070
> 
> 标签：iphone, cocos2d-iphone, ccsprite, ccspritebatchnode

对于一个简单的游戏，我有 4 个不同的平台（都在一个 spritesheet 上）。我最初将每个添加 5 个到 CCSpriteBatchNode，并将它们全部设置为不可见。当我设置我的平台时，我想从我的 CCSpriteBatchNode 中获取一个特定类型的平台并更改它以使其可见并定位它。

我无法找到不可见的特定类型的平台。或相反亦然？

我知道你可以使用 [batchnode getchildbytag:tag] 但据我所知，它只返回一个精灵。有什么方法可以将指向特定类型的每个平台的指针放入数组中，以便我可以遍历数组并找到所有不可见的精灵？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:11:14.007

正如 Drama 所建议的那样，您别无选择，只能“迭代”孩子。至于识别哪个精灵对应哪个平台，有几种方法。一个简单的方法是使用精灵的“标签”属性——假设您不将它用于任何其他目的。

```
// some constants 

static int _tagForIcyPlatform = 101;
static int _tagForRedHotPlatform = 102;
... etc

// where you create the platforms

CCSptiteBatchNode *platforms= [CCSpriteBatchNode batchNodeWithFile:@"mapItems_playObjects.pvr.gz"];
CCSprite *sp = [CCSprite striteWithSpriteFrameName:@"platform_icy.png"];
sp.tag = _tagForIcyPlatform;
[platforms addChild:sp];

sp = [CCSprite striteWithSpriteFrameName:@"platform_redHot.png"];
sp.tag = _tagForRedNotPlatform;
[platforms addChild:sp];

// ... etc

// where you want to change properties of 

-(void) setVisibilityOf:(int) aPlatformTag to:(BOOL) aVisibility {
    for (CCNode *child in platforms.children) {
        if (child.tag != aPlatformTag) continue;
        child.visible = aVisibility;
    }
} 
```

再一次，如果您没有将平台的子标签用于其他目的，则此方法有效。如果您出于其他目的需要标签，请考虑在类中使用 NSMutableArray，每种平台类型一个，并将指向适当类型的精灵的指针存储在该数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:45:59.383

没有一种超级简单的方法可以做到这一点。您需要遍历孩子并单独检查每个孩子。

为了编码效率，请考虑向 CCSpriteBatchNode 添加一个类别来为您执行此功能。这样您就可以根据需要轻松复制它。

# c# - 在c#中使用正则表达式从字符串中检索数字

> ID：13889561
> 
> 赞同：-3
> 
> 时间：2012-12-15T05:18:15.587
> 
> 标签：c#, regex

我想从字符串中检索一个数字，只要数字以 8,9 或 6 开头，并且数字的长度应该是 8 或 9 个字符。例如 92000000,9200 0000,9200-0000。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:41:56.803

这个怎么样：`(?<!\d)([896]\d{3})(?:[-\s]?)(\d{4})(?!\d)`。

将`(?:[-\s]?)`可选的分隔符空格或破折号作为非捕获组。

您可以通过连接匹配组 1 和 2 获得您的号码：

```
var input = new string[] {
    "81000000", "92000000", "9200 0000", "9200-0000"
};
var regex = new Regex (@"(?<!\d)([896]\d{3})(?:[-\s]?)(\d{4})(?!\d)");
foreach (var str in input) {
    var match = regex.Match (str);
    Console.WriteLine ("TEST: {0} {1} - {2}", str, match.Success,
                       match.Groups [1].Value + match.Groups [2].Value);
} 
```

我也尝试过`(?<!\d)([896]\d{3}(?:[-\s]?)\d{4})(?!\d)`，这不会从匹配结果中删除分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:43:49.557

试试下面的正则表达式：

```
(?<!\d)[896]\d{3}([- ]?)\d{4}(?!\d) 
```

下次尝试使用**[Regexpal解决。](http://regexpal.com/)**

干杯。

# php - 如果图像存在则显示图像否则显示不同的图像+图像路径

> ID：13889562
> 
> 赞同：-1
> 
> 时间：2012-12-15T05:18:23.707
> 
> 标签：php

```
<?php $img = shellImage($data[$y]->kunena_avatar_rows[$z]->avatar, 'noresize'); ?>
<?php if ($img->exist) : ?>
    <?php echo $img->draw(); ?>
<?php else: ?>
  <img src="media/avatars/resized/size200/nophoto.jpg">
<?php endif; ?> 
```

试图弄清楚如何为图像添加路径。

图片在数据库中的值类似于 users/avatar.jpg ，图片的完整路径为`media/avatars/resized/size200/avatar.jpg`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:22:38.190

利用

```
<?php $img = shellImage($data[$y]->kunena_avatar_rows[$z]->avatar, 'noresize'); ?>
 <?php if ($img->exist) : ?>
     <?php echo  str_replace("users/", "media/avatars/resized/size200/", $img->draw()"); ?>
 <?php else: ?>
   <img src="media/avatars/resized/size200/nophoto.jpg">
 <?php endif; ?> 
```

# c++ - atoi 似乎无法正常工作

> ID：13889564
> 
> 赞同：3
> 
> 时间：2012-12-15T05:18:52.843
> 
> 标签：c++, c, atoi

```
for(int y = 0; y < 5; y++)
{   
   char cst1[2] = {info[x+2], info[x+3]};
   char cst2[2] = {info[x+5], info[x+6]};
   sales[count][atoi(&info[x]) - 1] = atoi(cst1) + atoi(cst2);
   x += 8;
} 
```

每次我执行以下代码时， atoi(cst1) 值乘以 2 然后相加， atoi(cst2) 乘以 100 然后相加 不知道为什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T05:19:53.063

`cst1`并且`cst2`似乎没有以 NUL 结尾。

```
char cst1[] = {info[x+2], info[x+3], '\0'};
char cst2[] = {info[x+5], info[x+6], '\0'}; 
```

# mysql - 忽略相邻匹配行的 SQL 查询

> ID：13889565
> 
> 赞同：3
> 
> 时间：2012-12-15T05:19:03.367
> 
> 标签：mysql, sql

我有一个包含各种活动和散列的活动表`(actorEntity|subjectEntity|activity-type)`

可能存在用户在几秒钟内执行完全相同的活动两次的情况，这意味着数据库中将有两个相邻的行具有完全相同的数据。

对于某些用例，我们不想显示重复的活动，因此我们现在根据哈希过滤掉应用程序中的重复活动。唯一的问题是这些活动在某些情况下也会被分页，这意味着从应用程序中的结果集中提取记录与分页有关。

我正在寻找一种在 SQL 中执行此操作的方法，以便可以在数据库级别完成分页。

给定数据：

```
id  | message           | from  | hash
-------------------------------------
1   | hello             | bryan | b-hello
2   | goodbye           | bryan | b-goodbye
3   | goodbye           | john  | j-goodbye
4   | goodbye           | john  | j-goodbye 
5   | hello             | john  | j-hello   
6   | goodbye           | john  | j-goodbye 
```

我想检索以下结果集：

```
id  | message           | from  | hash
-------------------------------------
1   | hello             | bryan | b-hello
2   | goodbye           | bryan | b-goodbye
4   | goodbye           | john  | j-goodbye
5   | hello             | john  | j-hello
6   | goodbye           | john  | j-goodbye 
```

请注意，虽然第 3 行和第 4 行相同，但只有一个在所需的结果集中，因为它们是相邻的。即使第 6 行是相同的散列，它也应该包含在结果中，因为它不与另一个相同的散列相邻。

我不在乎结果中返回了哪些相邻的行，因为它们是相同的。

我正在使用 MySql 5.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T05:43:30.853

看看这个： * [SQLFIDDLE](http://sqlfiddle.com/#!2/ce86b/1)我有点怀疑，好像这对于你的要求来说太简单了。所以请发表评论。我在样本数据中添加了更多重复记录。以下查询正在删除最新的重复项，保留第一个条目。

样本数据：

```
ID  MESSAGE     FROMA   HASHA
1   hello       bryan   b-hello
2   goodbye     bryan   b-goodbye
3   goodbye     john    j-goodbye
4   goodbye     john    j-goodbye
5   goodbye     john    j-goodbye
6   hello       john    j-hello
7   goodbye     bryan   b-goodbye
8   goodbye     bryan   b-goodbye 
```

查询找到相同的记录（最新的一条或多条）：

```
select* from actors a
join actors b
where b.id + 1 = a.id
and b.hasha = a.hasha
; 
```

结果：

```
ID  MESSAGE     FROMA   HASHA
4   goodbye     john    j-goodbye
5   goodbye     john    j-goodbye
8   goodbye     bryan   b-goodbye 
```

查询以获取唯一记录：

```
select * from actors a
where a.id not in (
select a.id from actors a
join actors b
where b.id + 1 = a.id
and b.hasha = a.hasha
); 
```

结果：

```
ID  MESSAGE     FROMA   HASHA
1   hello       bryan   b-hello
2   goodbye     bryan   b-goodbye
3   goodbye     john    j-goodbye
6   hello       john    j-hello
7   goodbye     bryan   b-goodbye 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:06:21.590

使用 MySQL 查询有很多复杂的方法可以解决这个问题，但我认为最简单的解决方案是修复你的分页逻辑。

我相信您正在通过类似的方式实现分页

```
SELECT * FROM table ORDER BY id LIMIT 0,4;  #page1
SELECT * FROM table ORDER BY id LIMIT 5,9;  #page2
SELECT * FROM table ORDER BY id LIMIT 10,14;  #page3 
```

如果您要处理这样的重复行，您将遇到很多麻烦。你最终想要做的是：

```
SELECT * FROM table ORDER BY id; #page1 returns id:1~5
SELECT * FROM table WHERE id > 5 ORDER BY id; #page2 returns id:6~10
SELECT * FROM table WHERE id > 10 ORDER BY id; #page3 returns id:11~15 
```

**这样您就不必担心通过 MySQL 解决重复行问题。这要简单得多。**

# android - 无法在列表视图中显示项目图像

> ID：13889566
> 
> 赞同：1
> 
> 时间：2012-12-15T05:19:18.500
> 
> 标签：android, android-layout, android-widget, android-listview

我制作了一个程序，其中我使用 PHP 将数据编码为 JSON。我的程序运行良好，没有显示任何错误或问题；我得到了我想要的，但我面临的问题非常小。

在这里，我无法在其中显示项目的图像，`ListView`但是每当我单击其中一个项目行以查看完整的项目详细信息时，我都会获得所选项目的图像。这意味着我应该得到图像`ListView`，但我无法显示，所以有人可以帮忙解决这个错误吗？

```
public class AlbumsActivity extends ListActivity {
// Connection detector
ConnectionDetector cd;

// Alert dialog manager
AlertDialogManager alert = new AlertDialogManager();

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jsonParser = new JSONParser();

ArrayList<HashMap<String, String>> albumsList;

// albums JSONArray
JSONArray albums = null;

String imagepath;

// albums JSON url
private static final String URL_ALBUMS = "MY URL";

// ALL JSON node names
private static final String TAG_ID = "id";
private static final String TAG_NAME = "name";
private static final String TAG_DESCRIPTION = "description";
private static final String TAG_IMAGEPATH = "imagepath";
private static final String TAG_SONGS_COUNT = "songs_count";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_albums);

    cd = new ConnectionDetector(getApplicationContext());

// Check for internet connection
if (!cd.isConnectingToInternet()) {
    // Internet Connection is not present
    alert.showAlertDialog(AlbumsActivity.this, "Internet Connection Error",
            "Please connect to working Internet connection", false);
    // stop executing code by return
    return;
}

    // Hashmap for ListView
    albumsList = new ArrayList<HashMap<String, String>>();

    // Loading Albums JSON in Background Thread
    new LoadAlbums().execute();

    // get listview
    ListView lv = getListView();

    /**
     * Listview item click listener
     * TrackListActivity will be lauched by passing album id
     * */
    lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View view, int arg2,
                long arg3) {
            // on selecting a single album
            // TrackListActivity will be launched to show tracks inside the album
            Intent i = new Intent(getApplicationContext(), TrackListActivity.class);

            // send album id to tracklist activity to get list of songs under that album
            String album_id = ((TextView) view.findViewById(R.id.album_id)).getText().toString();
            i.putExtra("album_id", album_id);               

            startActivity(i);
        }
    });     
}

/**
 * Background Async Task to Load all Albums by making http request
 * */
class LoadAlbums extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(AlbumsActivity.this);
        pDialog.setMessage("Listing Albums ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting Albums JSON
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();

        // getting JSON string from URL
        String json = jsonParser.makeHttpRequest(URL_ALBUMS, "GET",
                params);

        // Check your log cat for JSON reponse
        Log.d("Albums JSON: ", "> " + json);

        try {               
            albums = new JSONArray(json);

            if (albums != null) {
                // looping through All albums
                for (int i = 0; i < albums.length(); i++) {
                    JSONObject c = albums.getJSONObject(i);

                    // Storing each json item values in variable
                    String id = c.getString(TAG_ID);
                    String name = c.getString(TAG_NAME);
                    String description = c.getString(TAG_DESCRIPTION);
                    String imageurl = c.getString(TAG_IMAGEPATH);
                    String songs_count = c.getString(TAG_SONGS_COUNT);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, id);
                    map.put(TAG_NAME, name);
                    map.put(TAG_DESCRIPTION, description);
                    map.put(TAG_IMAGEPATH,imageurl);
                    map.put(TAG_SONGS_COUNT, songs_count);

                    // adding HashList to ArrayList
                    albumsList.add(map);
                }
            }else{
                Log.d("Albums: ", "null");
            }

        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all albums
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        AlbumsActivity.this, albumsList,
                        R.layout.list_item_albums, new String[] 
                                {
                                TAG_ID, TAG_NAME, TAG_DESCRIPTION, TAG_IMAGEPATH, TAG_SONGS_COUNT 
                                }, 
                                new int[] 
                                {
                                R.id.album_id, R.id.album_name, R.id.album_description, R.id.list_image, R.id.songs_count 
                                }
                        );

                // updating listview
                setListAdapter(adapter);
            }
        });

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:14:48.657

在您的适配器中尝试此操作，它可能会对您有所帮助：

```
 String imageURL = "htp://domain/some-path/kdhfbdskf.jpg";

 Bitmap bmp = null;
    try {
        InputStream in = new java.net.URL(imageURL).openStream();
        bmp = BitmapFactory.decodeStream(in);
    }
    catch (IOException e) {
        e.printStackTrace();
    }

    if (bmp != null) {
        holder.UserImageView.setImageBitmap(bmp);
    } else {
        holder.UserImageView.setImageResource(R.drawable.ic_launcher);
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:30:04.047

您必须先下载图像，然后在列表视图中显示它。您不能直接传递图像 URL，它将不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T05:37:47.063

将当前代码更改为并从 onPostExecute 方法中删除 runOnUiThread() ：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_albums);

        cd = new ConnectionDetector(getApplicationContext());

    // Check for internet connection
    if (!cd.isConnectingToInternet()) {
        // Internet Connection is not present
        alert.showAlertDialog(AlbumsActivity.this, "Internet Connection Error",
                "Please connect to working Internet connection", false);
        // stop executing code by return
        return;
    }

        // Hashmap for ListView
        albumsList = new ArrayList<HashMap<String, String>>();

        // Loading Albums JSON in Background Thread
        new LoadAlbums().execute();

    }

    /**
     * Background Async Task to Load all Albums by making http request
     * */
    class LoadAlbums extends AsyncTask<String, String, 
ArrayList<HashMap<String, String>>> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(AlbumsActivity.this);
            pDialog.setMessage("Listing Albums ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting Albums JSON
         * */
        protected ArrayList<HashMap<String, String>> 
     doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();

            // getting JSON string from URL
            String json = jsonParser.makeHttpRequest(URL_ALBUMS, "GET",
                    params);

            // Check your log cat for JSON reponse
            Log.d("Albums JSON: ", "> " + json);

            try {               
                albums = new JSONArray(json);

                if (albums != null) {
                    // looping through All albums
                    for (int i = 0; i < albums.length(); i++) {
                        JSONObject c = albums.getJSONObject(i);

                        // Storing each json item values in variable
                        String id = c.getString(TAG_ID);
                        String name = c.getString(TAG_NAME);
                        String description = c.getString(TAG_DESCRIPTION);
                        String imageurl = c.getString(TAG_IMAGEPATH);
                        String songs_count = c.getString(TAG_SONGS_COUNT);

                        // creating new HashMap
                        HashMap<String, String> map = new 
                HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_ID, id);
                        map.put(TAG_NAME, name);
                        map.put(TAG_DESCRIPTION, description);
                        map.put(TAG_IMAGEPATH,imageurl);
                        map.put(TAG_SONGS_COUNT, songs_count);

                        // adding HashList to ArrayList
                        albumsList.add(map);
                    }
                }else{
                    Log.d("Albums: ", "null");
                }

            } catch (JSONException e) {
                e.printStackTrace();
            }

            return albumsList;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(ArrayList<HashMap<String, 
                             String>> file_url) {
            // dismiss the dialog after getting all albums
            pDialog.dismiss();

            // get listview
            ListView lv = getListView();
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            AlbumsActivity.this, file_url,
                            R.layout.list_item_albums, new String[] 
                                    {
                                    TAG_ID, TAG_NAME, TAG_DESCRIPTION,
TAG_IMAGEPATH, TAG_SONGS_COUNT 
                                    }, 
                                    new int[] 
                                    {
                                    R.id.album_id,
     R.id.album_name, R.id.album_description, R.id.list_image, R.id.songs_count 
                                    }
                            );

                    // updating listview
                    lv.setListAdapter(adapter);

        /**
         * Listview item click listener
         * TrackListActivity will be lauched by passing album id
         * */
        lv.setOnItemClickListener(new android.widget.
                      AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View view, int arg2,
                    long arg3) {
                // on selecting a single album

                Intent i = new Intent(getApplicationContext(),
                       TrackListActivity.class);

                // send album id to tracklist activity to get list of songs 
              //under that album
                String album_id = ((TextView) view.
                    findViewById(R.id.album_id)).getText().toString();
                i.putExtra("album_id", album_id);               

                startActivity(i);
            }
        });  

        }

    } 
```

注意：如果您在 ImageView 中获得了直接的 Web URL，那么这将永远不会起作用，因为您需要先从 Web 下载图像，然后将其设置为 ImageView src。

看这篇文章我们如何从网络服务器获取图像

[如何在 Android 中通过 URL 加载 ImageView？](https://stackoverflow.com/questions/2471935/how-to-load-an-imageview-by-url-in-android)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T06:02:44.847

这意味着您想使用图像和文本自定义列表视图。为此（在我的情况下我做了什么），在两个数组中获取图像 url 和文本。然后通过传递上下文来设置列表视图的适配器，两个数组。

要设置图像，您需要导入库（图像 url 帮助程序或 Universe 图像加载器）。两者都可以很好地帮助您，但我会推荐您使用图像 url 帮助程序库，因为它易于使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T05:32:32.143

从执行后删除 runOnUiThread() 并且您不会将 UI 组件运行到线程中..只需设置图像...

# javascript - jquery ui selectable 如何停止选择内部元素？

> ID：13889576
> 
> 赞同：2
> 
> 时间：2012-12-15T05:21:15.320
> 
> 标签：javascript, jquery, jquery-ui

我曾尝试使用 jquery ui selectable 来解决问题，但它没有按预期工作。当我选择列表项目时，内部项目也在选择，我需要为所选项目添加一个类。这是我的东西的演示。

[演示](http://jsfiddle.net/zZTfA/7/)

```
$(".itemlist").selectable(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:29:58.850

试试这个

```
$(".itemlist").selectable({ filter: 'li' }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:31:23.997

在您的 javascript 中替换以下代码：

```
$(".itemlist").selectable({ filter: "li" }); 
```

希望能帮助到你。

# c - C：演员表警告

> ID：13889580
> 
> 赞同：0
> 
> 时间：2012-12-15T05:21:26.903
> 
> 标签：c, casting, warnings

我有一个代码，但是在编译时有一个警告，这是警告：

```
1_redis.c: In function \342\200\230main\342\200\231:
1_redis.c:131:23: warning: assignment makes integer from pointer without a cast
 [enabled by default] 
```

它说`assignment makes integer from pointer without a cast`，但是`cFile`和`lQueryData`都是`char*`类型，为什么？

```
#define MAX_LINE_NUM 8000000
#define EACH_THREAD_NUM 10000

long i,posF,posDB;
for (i=0;i<DB_NUM;i++) { lQueryPerDB[i] = 0; }
char *lQueryData = (char *)malloc(DB_NUM*MAX_LINE_NUM*sizeof(char));

lLineCount = lFileLen / lLineLen;
for (i=0;i<lLineCount;i++) {
    posF = i * lLineLen;
    iDB = get_DB(cFile[posF]);
    posDB = iDB * MAX_LINE_NUM + lQueryPerDB[iDB];
    lQueryData[posDB] = &cFile[posF];                   // this line have warning!!!!
    lQueryPerDB[iDB]++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:24:10.870

表达式 &cFile[posF] 是一个指向值的指针，所以你应该像这样取它的值：

```
lQueryData[posDB] = cFile[posF]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T05:24:52.050

如果它们都是，`char *`那么为什么要使用 & 运算符。说啊

```
lQueryData[posDB] = cFile[posF]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T05:49:36.613

如果`cFile`是 a `char *`，则对其进行索引`cFile[posF]`与做 相同`*(cFile + posF)`，或者“给我`posF`从数组开头开始的任何位置的值”。您的地址运算符 ( `&`) 是不必要的，如果不是，它可能与您想要的相反（您想要取消引用 -`*`使用下标符号自动为您完成）。

正如其他人所建议的那样，正确的代码很可能是：

```
lQueryData[posDB] = cFile[posF]; 
```

您收到特定警告的原因是因为 using获取了at中字符`&cFile[posF]`的地址（即*指向 的指针*） 。但是，当您尝试将其分配到数组中的某个位置时，它必须首先将其（内部）转换为标量类型。指针只是一个索引到内存中的数字，因此当用于“指向”事物之外的任何东西时，它只是一个整数。因此，您所拥有的是从指针制作整数，而无需显式强制转换。`cFile``posF``lQueryData`

You might consider compiling with [clang](http://clang.llvm.org) instead of (what I presume is) GCC if you have access to it, it has much more accessible error messages. For instance, the error message for your code above is: **warning: incompatible pointer to integer conversion assigning to 'char' with an expression of type 'char *'; remove &** (with a little visual pointer to the offending "&" sign).

# php - PHP 中断，在 2 循环中继续

> ID：13889588
> 
> 赞同：1
> 
> 时间：2012-12-15T05:24:01.133
> 
> 标签：php, loops, foreach, break, continue

我对打破和继续退出循环等感到有点困惑。我有 2 个 SQL 查询将用户权限与用户的实际权限与新的权限相匹配。但是，如果某些新权限与用户拥有的权限匹配，我想跳过 SQL 插入并继续下一个：

```
public static function insertPriveleges($user_id,$priveleges)
{
    $ex = explode(",",$priveleges); // separated by commas
    if(count($ex)>0)
    {
         $x = false;
         foreach($ex as $i => $priv)
         {
             $check_user = mysql_query("SELECT * FROM users_access_codes WHERE user_id='$user_id'") or die(mysql_error()); // get user's current priveleges
             while($check_data = mysql_fetch_array($check_user))
             {
                  if($check_data['access_code']!=$priv)
                  {
                      //if it doesn't match, insert 
                      $sql = "INSERT INTO users_access_codes (uaID,user_id,access_code) VALUES (NULL,'".$user_id."','$priv')";
                  }             
             }
         }
     }
} 
```

我几乎从来没有遇到需要在循环中匹配两个以上的东西的情况。我需要确保我不会为该用户获得双重特权。我知道在内循环的某处必须有一个“继续”语句，但不确定在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T05:34:27.530

在您的`INSERT`声明之后，您可以添加`continue 2`以将您带回到您的`foreach ($ex as ...`. 您也可以`break;`在这种情况下使用，因为您的 inner 之后没有任何内容`while`。

但是，如果您以不同的方式进行操作，则实际上并不需要它。无需阅读每个特权的表格，只需阅读所有特权并进行比较即可。

此代码将从数据库中获取所有权限，然后仅插入缺少的权限，基于`$ex`; 它用于`array_diff()`计算两者之间的差异。

```
public static function insertPriveleges($user_id, $priveleges)
{
    $ex = explode(",", $priveleges); // separated by commas
    if (count($ex) > 0) {
         // get user's current priveleges
         $check_user = mysql_query("SELECT * FROM users_access_codes 
             WHERE user_id='$user_id'") or die(mysql_error()); 
         $actual = array();
         while ($row = mysql_fetch_array($check_user)) {
             $actual[] = $row['access_code'];
         }

         foreach (array_diff($ex, $actual) as $priv) {
             //if it doesn't match, insert 
             $sql = "INSERT INTO users_access_codes (uaID,user_id,access_code) VALUES (NULL,'".$user_id."','$priv')";
             mysql_query($sql);
         }
     }
} 
```

顺便说一句，`INSERT IGNORE INTO`由于竞争条件，您可以考虑使用，但是因为您没有检查语句返回值，所以在这里没关系:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:28:37.460

只需在 INSERT 之后添加一个中断：

```
public static function insertPriveleges($user_id,$priveleges)
{
    $ex = explode(",",$priveleges); // separated by commas
    if(count($ex)>0)
    {
         $x = false;
         foreach($ex as $i => $priv)
         {
             $check_user = mysql_query("SELECT * FROM users_access_codes WHERE user_id='$user_id'") or die(mysql_error()); // get user's current priveleges
             while($check_data = mysql_fetch_array($check_user))
             {
                  if($check_data['access_code']!=$priv)
                  {
                      //if it doesn't match, insert 
                      $sql = "INSERT INTO users_access_codes (uaID,user_id,access_code) VALUES (NULL,'".$user_id."','$priv')";
                      break;
                  }             
             }
         }
     }
} 
```

为了完整起见，我建议阅读以下链接： http: [//php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated](http://php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)

# c++ - C++模板方法选择正确的打印数据方式

> ID：13889592
> 
> 赞同：0
> 
> 时间：2012-12-15T05:24:20.207
> 
> 标签：c++, templates, iostream, iomanip, formatted-text

我有一个用 C++ 编写的程序，它使用矩阵，我想将它们打印出来。在程序中，矩阵的类型要么是整数，要么是无符号字符。这是我现在用来打印的代码。

```
template<class T>
void print_matrix(const int& num_rows, const int& num_cols, T** M)
{
        for (int row = 0; row < num_rows; row++) {
                for (int col = 0; col < num_cols; col++) {
                        std::cout << std::setw(5) << M[row][col];
                }
                std::cout << std::endl;
        }
} 
```

我的问题是，对于 unsigned char 矩阵，这些值不会被解释为数字。例如，对于零矩阵，输出不会显示在控制台上。有什么方法可以使用模板化方法中的类型信息来确定如何正确打印这两种类型的矩阵？我是否必须求助于使用具有正确格式字符串的 printf 的两种不同类型的打印方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:26:48.443

如果矩阵中唯一可以存在的类型是整数类型，那么只需将其转换为`long`：

```
template<class T>
void print_matrix(const int& num_rows, const int& num_cols, T** M)
{
        for (int row = 0; row < num_rows; row++) {
                for (int col = 0; col < num_cols; col++) {
                        std::cout << std::setw(5) << static_cast<long>(M[row][col]);
                }
                std::cout << std::endl;
        }
} 
```

如果这不是您想要的，请告诉我，我会提供另一种解决方案。

* * *

另一种解决方案是创建一个元函数来确定要转换的内容：

```
template<typename T>
struct matrix_print_type {
    typedef T type;
};
template<>
struct matrix_print_type<char> {
    typedef int type; // cast chars to ints
};
template<class T>
void print_matrix(const int& num_rows, const int& num_cols, T** M)
{
        for (int row = 0; row < num_rows; row++) {
                for (int col = 0; col < num_cols; col++) {
                        std::cout << std::setw(5) << static_cast<typename matrix_print_type<T>::type>(M[row][col]);
                }
                std::cout << std::endl;
        }
} 
```

您还可以使用重载或 enable_if。

# json - 如何访问 json 输入

> ID：13889594
> 
> 赞同：0
> 
> 时间：2012-12-15T05:24:36.167
> 
> 标签：json, yii

我在 yii 框架中工作。我将 json 输入作为-

```
$json='{"userId":1,"questionPaperId":1;"optionId":2}'; 
```

因此，在 yii 中创建函数时，我正在对其进行解码并访问这些输入——

```
$obj=CJSON::decode($json);
$option=$obj->optionId;
$userId=$obj->userId;
$paperId=$obj->questionPaperId; 
```

但它给出的错误是“试图获取非对象的属性”。那么如何在 yii 中访问它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:34:42.270

您的 json 字符串语法错误。

```
$json='{"userId":1,"questionPaperId":1;"optionId":2}'; // note the ; in it 
```

应该

```
$json='{"userId":1,"questionPaperId":1,"optionId":2}'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:43:39.157

由于 CJSON::encode 为您提供来自数组的 json 格式字符串，因此 CJSON::decode 返回数组而不是对象。

所以像这样访问它： $option=$obj["optionId"];

# ruby-on-rails - 将 zip 文件提取到 Ruby on Rails 中的动态目标文件夹

> ID：13889595
> 
> 赞同：1
> 
> 时间：2012-12-15T05:24:47.213
> 
> 标签：ruby-on-rails, ruby, zip

好吧，我在我的应用程序中使用 Rails 2.02 和 ruby​​ 1.8.6，我需要提供一个功能来将 zip 文件提取到动态目标文件夹中。即目标文件夹名称是固定的，基于它必须在 PC 上搜索该文件夹并将 zip 文件解压缩到该 PC 中。

例如，

在 PC1 中，目标文件夹路径是`C:/sites/myfolder`

在 PC2 中，目标文件夹路径是`D:/demo/for/myfolder`

在 PC3 中，目标文件夹路径是`C:/myfolder`

在 PC4 中，目标文件夹路径是`F:/path/to/myfolder`

在这里，在这个例子中，我的目标文件夹是 myfolder，所以在上述四种情况下，路径是不同的。我需要的是我的 rails 应用程序应该在 pc 中搜索文件夹并将 zip 文件解压缩到其中。

谢谢您的帮助！

# oracle10g - 在哪里可以找到我的 netbeans 项目的 oracle10g 数据库相关文件？

> ID：13889604
> 
> 赞同：0
> 
> 时间：2012-12-15T05:26:31.050
> 
> 标签：oracle10g, netbeans-6.9

我使用 Netbeans 6.9.1 和 Oracle10g 用 Ja​​va 制作了一个大学管理系统项目。我在哪里可以找到与我的项目相关的数据库文件，以便我可以将这些文件导出到另一个系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:21:22.450

如果“数据库文件”是指您的表、过程和其他数据，那么它们包含在 Oracle 的[数据文件](http://docs.oracle.com/cd/B19306_01/server.102/b14220/physical.htm)中。

您必须[导出数据，然后将它们导入另一个系统](https://stackoverflow.com/questions/3671705/is-this-the-right-way-to-import-oracle-dump-database)。

# google-data-api - 如何在没有 Oauth 的情况下访问 Google 客户端 API（仅 API 密钥）

> ID：13889605
> 
> 赞同：2
> 
> 时间：2012-12-15T05:26:32.010
> 
> 标签：google-data-api, google-api-client

我正在尝试在没有 Oauth 的情况下访问 Google api 客户端（Ruby）。我找到了以下信息：

[http://thecodeabode.blogspot.com.au/2012/07/google-api-ruby-client-authorizing-with.html](http://thecodeabode.blogspot.com.au/2012/07/google-api-ruby-client-authorizing-with.html)

但不幸的是，如果我按照说明进行操作（这就是我所做的）：

```
 require 'google/api_client'
 client = Google::APIClient.new(:key => "MYKEY",:authorization => nil)    
 yt = client.discovered_api("youtube", "v3")
 result = client.execute(
   :api_method => yt.search.list,
   :parameters => {
     :key => "MYKEY",
     :q => "dogs",
     :part => "topicDetails"
   }
 ) 
```

我明白了

“已超过未经验证使用的每日限制。继续使用需要注册”

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:44:43.977

简而言之，所有基于发现的 API 都需要识别您的调用。当 Google API 无法识别您的应用时，我通常会看到您遇到的错误。您通常可以拨打一些身份不明的电话，但您几乎可以肯定很快就会遇到低得多的“身份不明”配额。您可以使用 OAuth（标识您的应用程序）进行身份验证，也可以指定 API 密钥（标识您的应用程序），或者您可以同时执行这两种操作。

这是通过设置`client.key = "<your api key>"`或将其传递给客户端构造函数来完成的（正如您所做的那样）。您可能还应该设置`client.user_ip = request.remote_ip`（或在您选择的框架中获取客户端的 IP 地址），特别是如果您没有使用 OAuth 进行身份验证。

看起来您已经在示例中设置了 API 密钥，但您可能有拼写错误或来自错误 API 项目的密钥，或者您遇到了每个用户的限制，这`user_ip`将解决。另一件重要的事情是，配额可以根据每天的查询来指定，然后每分钟或每小时或在其他时间段内强制执行。所以你可能有一个 10k QPD 配额，但这只是 415 QPH 或 7 QPM。我不知道 YouTube 配额是如何执行的，但请记住这一点。

您不需要做的一件事是将`:key`参数设置`:parameters`为 API 调用。如果你想在每个请求的基础上设置它，那只是作为另一个可选参数直接传递给`execute`. 在您的情况下，这应该由客户自动处理。可能最好从代码中删除它，因为您已经在构造函数中设置了它。

最终结果应该是：

```
require 'google/api_client'
client = Google::APIClient.new(:key => "MYKEY", :authorization => nil)    
yt = client.discovered_api("youtube", "v3")
result = client.execute(
  :api_method => yt.search.list,
  :authenticated => false,
  :user_ip => request.remote_ip,
  :parameters => {
    :q => "dogs",
    :part => "topicDetails"
  }
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:35:12.053

API 控制台中有一个[配额窗格](https://developers.google.com/console/help/)，它将告诉您该实用 API 密钥的每日限制。你在重复使用别人的密钥吗？如果您没有提供账单信息（或者它可能是仅适用于 oAuth 的资源），限制也可能很低

# wordpress - 查找在 Wordpress 中批准评论的用户？

> ID：13889608
> 
> 赞同：0
> 
> 时间：2012-12-15T05:27:03.123
> 
> 标签：wordpress

在 Wordpress 3.4 上，是否有任何功能或任何方式可以让我找到谁（哪个用户）批准了某些特定评论？

我有一个博客，它有多个管理员和一些垃圾评论，但没有得到任何人的批准。我认为它的黑客攻击或某人密码的妥协......所以需要弄清楚哪个用户帐户用于批准评论？

我试图找出来，但无法找到任何方法来找到这些信息？可能这里有人对如何从 wordpress 获取此信息有想法。

# c++ - 强制读取系统调用阻塞

> ID：13889609
> 
> 赞同：0
> 
> 时间：2012-12-15T05:27:21.553
> 
> 标签：c++, serial-port, system-calls

我有一个读取和写入串行端口的程序。我有一个读取器线程，它读取数据并将信息提供给共享内存。读取器线程应该休眠，直到数据可用。所以我想进行`read()`系统调用来阻止调用线程。考虑到手册页，除非您提供`O_NONBLOCK`to `open`，否则`read`应始终阻止。但是我有一个活动线程，它在其中不断`read`返回`-1`。也在改变`VTIME`，`VMIN`并没有什么不同。端口是这样打开的：

```
fd = open(portName.str().c_str()/*/dev/ttyS2*/, O_RDWR | O_NOCTTY);
    if (fd < 0) // if open is not successful
    {
        cerr << ERROR << "Unable to open `" << portName << "'." << endl;
        return false;
    }
    else
    {
        cout << INFO << "Port " << portName.str() << " successfully opened."
                << endl;
        cout << INFO << "Configuring port..." << endl;
        fcntl(fd, F_SETFL,0);
        struct termios port_settings; // structure to store the port settings in
        cfsetispeed(&port_settings, B38400); // set baud rate
        cfsetospeed(&port_settings, B38400); // set baud rate
        port_settings.c_cflag |= CLOCAL | CREAD;
        port_settings.c_cflag &= ~CRTSCTS; // disable H/W flow control
        port_settings.c_lflag &= ~( ISIG | // disable SIGxxxx signals
                IEXTEN | // disable extended functions
                ECHO | ECHOE); // disable all auto-echo functions
        port_settings.c_lflag &= ~ICANON ; // raw mode
        port_settings.c_oflag &= ~OPOST; // raw output
        port_settings.c_iflag &= ~(IXON | IXOFF | IXANY); // disable S/W flow control;
            // Following values do not change timout in runtime:
        port_settings.c_cc[VTIME] = 2; // wait 0.2 second to get data - 
        port_settings.c_cc[VMIN] = 0;

        port_settings.c_cflag = (port_settings.c_cflag &= ~CSIZE) | CS8; // set data byte size
        port_settings.c_cflag &= ~CSTOPB; // set stop bit 1
        port_settings.c_cflag &= ~PARENB; // set no parity
        port_settings.c_iflag |= IGNPAR; // ignore parity
        port_settings.c_iflag &= ~(INPCK | ISTRIP | PARMRK);

        // Set
        if (tcsetattr(fd, TCSANOW, &port_settings) < 0)
        {
            cerr << ERROR << "Unable to configure serial port." << endl;
            return false;
        }
        else
        {
            cout << INFO << "Port `" << portName.str()
                    << "' configuration was successful." << endl;
        } 
```

在读者线程中：

```
byte buffer[256];
while (true)
{
    int packetSize = read(fd, buffer, 256);
    if (packetSize > 0)
    { 
      // use data - this code is never run 
    }
    else 
    {
       // print error - we're always here. no matter how long timout is
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:04:34.387

这里有几件事要考虑。

首先，由于多种原因，read 可能会返回。任何类型的中断都会导致读取解除阻塞并返回 -1，文件也可能存在问题。检查 errno 变量以获取有关它返回 -1 的原因的更多信息。可能的 errno 值的描述在[阅读手册页中](http://linux.die.net/man/2/read)

其次，在您解决了上述问题之后，当数据可用时，读取并不能保证在一次读取中为您提供整个网络数据包，因此您可能需要从多次读取中重新组装。

# java - 对于我的 Java 小程序，我需要为每个屏幕尺寸设置不同尺寸的图形吗？

> ID：13889610
> 
> 赞同：0
> 
> 时间：2012-12-15T05:27:24.990
> 
> 标签：java, graphics

我是 Java 小程序编程的初学者。我目前正在为桌面/移动屏幕设计一个网站。我希望小程序能够显示在尽可能多的不同设备上（例如，台式机、平板电脑和 iPad）。

我的一个问题是关于将图形合并到 Java 小程序中。我想我想多了，但我想知道如果 Java 小程序调整大小，图形是否会调整大小。对于每个单独的屏幕尺寸，我是否需要不同尺寸的图形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:04:06.033

也许您的主要问题是：

> 如果 Java 小程序调整大小，图形是否会调整大小。

对于完整的解释，我会在你初始化小程序时说。正如你所说，每个设备都有自己的大小，所以你应该根据设备的大小来确定小程序的大小。

而且，当用户调整小程序的大小时，小程序会**自动**调用方法`repaint`，你的每一个图形都会重新绘制，太棒了！！！

但是，这并不意味着您的图形会调整大小。这取决于您如何在小程序中编写图形代码。如果图形的大小基于小程序的宽度/高度，它将根据您设置的公式调整大小。但是，如果您根据常数确定图形的大小，则不会发生任何事情。它将重新绘制图形，但**大小相同**。

希望这有帮助:)

# c++ - 如何概括一个接口以要求某个元组的返回值？

> ID：13889613
> 
> 赞同：0
> 
> 时间：2012-12-15T05:27:45.600
> 
> 标签：c++, templates, stl, c++11

我正在使用对[boost 和 std::tuple<>](http://soci.sourceforge.net/doc/boost.html)有很好支持的 SOCI 库。

我的意图是定义一个调用的**抽象接口**`SOCI_Streamable`，它需要一个返回**一些 tuple**的方法。

我让它适用于 gcc 4.7.2 中的**特定元组，但我需要帮助抽象这个接口以适用于****任何 tuple**。

*换句话说，我想把这个要求转换成代码：一个类满足`SOCI_Streamable`它是否可以返回某种 std::tuple 的要求——我不在乎是什么样的。*

只要满足要求，对下面的代码进行重大更改就可以了。我怀疑某种模板代码甚至可能需要 CRTP，但我不确定。

```
#include<tuple>

// want to generalize next line to any std::tuple<>
typedef std::tuple<int const&,char const> some_tuple;    

class SOCI_Streamable
{
public:
  virtual some_tuple obj_as_tuple() const = 0; 
};

class Foo :
    public SOCI_Streamable
{
public:
  virtual some_tuple obj_as_tuple() const 
    {
        return std::forward_as_tuple( m_int, m_char );
    }
private:
    int   m_int;
    char  m_char;
};

int main( int argc, char* argv[] )
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:52:57.863

```
template <class A,class B>
class SOCI_Streamable
{
public:
  typedef std::tuple<A,B> Tuple;
  virtual Tuple obj_as_tuple() const = 0; 
};

class Foo :
   public SOCI_Streamable<int const&,char const>
{ 
```

如果您可以在实现者级别指定类型，则应该可以。但这确实将单个接口变成了一系列接口。让我看看是否有更好的方法。

# java - setListener 时内存泄漏

> ID：13889621
> 
> 赞同：2
> 
> 时间：2012-12-15T05:28:56.760
> 
> 标签：java, android

以下示例中的内存泄漏。

1.SpeedHelper.java：

```
public class SpeedHelper {

    interface Listener {
        void OnSelected(String entry);
    }
    static Listener sListener;

    static void setListener(Listener listener) {
        sListener = listener;
    }
    static Listener getListener() {
        return sListener;
    }
    static void clearListener() {
        sListener = null;
    }
} 
```

2.CallSpeed.java

```
public class CallSpeed {

    protected void speed() {
        SpeedHelper.Listener litener = SpeedHelper.getListener();
        if (litener != null) {
            litener.OnSelected("mEntry");
        }
    }
} 
```

3.MainActivity.java

```
public class MainActivity extends Activity {

    private CallSpeed callspeed;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        SpeedHelper.setListener(mCallSpeedListener);
        callspeed = new CallSpeed();
        callspeed.speed();
    }
    private SpeedHelper.Listener mCallSpeedListener = new SpeedHelper.Listener() {

        @Override
        public void OnSelected(String entry) {
            Toast.makeText(getApplicationContext(), entry, Toast.LENGTH_SHORT).show();
        }
    };
    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        SpeedHelper.clearListener();
    }
} 
```

如何避免“sListener”的内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:19:54.977

您的问题在于以下与静态字段相关的非静态封闭匿名类`sListener`：

```
private SpeedHelper.Listener mCallSpeedListener = new SpeedHelper.Listener() {

        @Override
        public void OnSelected(String entry) {
            Toast.makeText(getApplicationContext(), entry, Toast.LENGTH_SHORT).show();
        }
    }; 
```

因为这是一个非静态封闭类，它包含对其外部类的引用`MainActivity`。`MainActivity`这个隐藏引用阻止了 GC释放类，因为`mCallSpeedListener`包含隐藏引用的对象`sListener`与指令一起存储在静态字段中`SpeedHelper.setListener(mCallSpeedListener);`。因此，`MainActivity`对象永远不会被收集，它的`onDestroy`函数永远不会被调用，一切都保留在内存中；GC 遥不可及。使用静态字段是内存泄漏的大门，封闭类中隐藏引用的存在（匿名或非匿名）放大了这个问题。

在您的情况下，您将不得不删除静态字段`sListener`或将匿名类更改为普通类；一个没有对其外部类的隐藏引用，或者在活动终止时`MainActivity`直接调用活动的另一个回调。`clearListener`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:43:23.397

您可以尝试`static WeakReferences<Listener> sListener`在您的类中使用变量定义 `SpeedHelper`并将您的 getter 和 setter 方法更改为：

```
static void setListener(Listener listener) {
    sListener = new WeakReference(listener);
}
static Listener getListener() {
    return sListener.get();
} 
```

# java - Appengine Channel Api 存在 _ah/channel/connected 不工作

> ID：13889625
> 
> 赞同：1
> 
> 时间：2012-12-15T05:29:58.490
> 
> 标签：java, google-app-engine, channel-api

我在 Java 运行时使用通道 API。我映射到 /_ah/channel/connected 的 servlet 似乎没有运行。我正在创建一个通道，传递令牌，然后在服务器上打开它。这工作正常。我确实在我的日志中看到了对 /_ah/channel/connected 的调用，但是没有出现日志消息并且代码似乎没有运行。下面是我的代码和 web.xml

ChannelConnectedServlet.java：

```
public class ChannelConnectedServlet extends HttpServlet{
    private static final Logger logger = Logger.getLogger(ChannelConnectedServlet.class
          .getName());  

    private void process(HttpServletRequest req, HttpServletResponse resp) throws IOException { 
        logger.log(Level.WARNING,"test");
        //do stuff here
    }

    public void doPost(HttpServletRequest req, HttpServletResponse resp)
                   throws IOException, ServletException {        
       logger.log(Level.WARNING,"Channel connected!");
       process(req, resp);
     }
} 
```

网页.xml：

```
 <servlet-mapping>
     <servlet-name>ChannelConnected</servlet-name>
     <url-pattern>/_ah/channel/connected</url-pattern>
 </servlet-mapping> 

 <servlet>
     <servlet-name>ChannelConnected</servlet-name>
     <servlet-class>com.myapp.server.channel.ChannelConnectedServlet</servlet-class>
 </servlet> 
```

断开连接请求也会发生相同的行为。帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:32:10.240

web.xml 中的这个条目应该在 url 的末尾包含“/”，例如：

```
<servlet-mapping>
 <servlet-name>ChannelConnected</servlet-name>
 <url-pattern>/_ah/channel/connected/</url-pattern> 
```

现在工作。

# list - 如何将项目添加到序言中的列表

> ID：13889644
> 
> 赞同：0
> 
> 时间：2012-12-15T05:33:37.447
> 
> 标签：list, prolog

我在序言中有一个包含多个项目的列表。我需要“规范化”这个列表的内容并将结果写入一个新列表。但是我这样做仍然有问题。以下代码显示了我是如何做到的：

```
 normalizeLists(SourceList, DestList) :-

 % get all the member of the source list, one by one
 member(Item, SourceList),

 % normalize the item
 normalizeItem(Item, NormItem),

 % add the normalize Item to the Destination List (it was set [] at beginning)
 append(NormItem, DestList, DestList). 
```

问题出在附加谓词中。我想这是因为在 prolog 中，我不能在命令式编程中做类似的事情，例如：

DestList = DestList + NormItem，

但是我怎么能在 Prolog 中做这样的事情呢？或者如果我的方法不正确，我该如何编写 prolog 代码来解决此类问题。

非常感谢任何帮助。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:33:05.260

*Prolog 中的变量一旦被unification*绑定，就不能被修改。也就是说，一个变量要么是*自由*的，要么具有确定的值（一个术语，可能是另一个变量）。然后`append(NormItem, DestList, DestList)`将失败，`NormItem`因为它不是一个空列表。

另一个问题是`NormItem`它根本不是一个列表。你可以试试

```
normalizeLists([], []).
normalizeLists([Item|Rest], [NormItem|NormRest]) :-

 % normalize the item
 normalizeItem(Item, NormItem),

 normalizeLists(Rest, NormRest). 
```

或者（如果你的 Prolog 支持它）完全跳过这样的定义，并使用更高阶的谓词，比如 maplist

```
...
maplist(normalizeItem, Items, Normalized),
... 
```

# ruby-on-rails - 如何启用嵌套搜索太阳黑子 solr？

> ID：13889646
> 
> 赞同：1
> 
> 时间：2012-12-15T05:34:04.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sunspot

我有两个模型：`User`和`User_profile`

在 User.rb 中，用户`has_one :user_profile`。

在 User_profile.rb 中， User_profile `belongs_to :user`。

然后我有 users_controller 及其 index.html.erb。所以我将此添加到我的用户模型中，以便通过嵌套列启用搜索，但是当我尝试重新索引时它显示错误。我怎样才能解决这个问题？

> # 未定义的方法“user_profiles”

模型/用户.rb

```
....
  searchable do 
    text :user_profile_nickname do
      user_profiles.map { |user_profile| user_profile.nickname }
    end
  end
.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T05:40:04.683

您在 user.rb 文件中给出了用户`has_one :user_profile`。所以它不能是对象的集合，而是一个成员对象。所以你不能调用`user_profiles.map { |user_profile| user_profile.nickname }`你的**用户**模型。

如果你想调用 write 如下：

```
searchable do 
  text :user_profile_nickname do
    user_profile.nickname
  end
end 
```

以上肯定会奏效。如果不工作，请告诉我。

# java - readLine() 空返回

> ID：13889652
> 
> 赞同：2
> 
> 时间：2012-12-15T05:35:16.297
> 
> 标签：java

我有以下代码：

```
public static void main(String[] args) throws Exception {
    String s = "";
    StringBuilder sb = new StringBuilder();
    File file = new File("C:\\New\\r.txt");

    BufferedReader in = new BufferedReader(new FileReader(file));
    while(in.readLine() != null) {      
        sb.append(in.readLine());
    }

    System.out.println(sb);
    s = sb.toString();
    byte[] b = s.getBytes();

   for(int i = 0; i < b.length; i++) {
       if(b[i] == 1){ b[i]=0; }
       if(b[i] == 0){ b[i]=1; }
   }

   FileOutputStream fos = new FileOutputStream(file);
   DataOutputStream dos = new DataOutputStream(fos);
   dos.write(b);
   in.close();
   fos.close();
   dos.close();
} 
```

当我运行这个程序时，我得到一个 null 的返回。也许我必须提升程序？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:38:50.730

改变：

```
 while(in.readLine()!=null) 
```

到：

```
 while((s = in.readLine())!=null) 
```

进而：

```
sb.append(s); 
```

当您将代码调用`in.readLine()`两次时 - 您正在阅读两行但在每次迭代中只打印第二行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:41:40.233

你扔掉了每一条奇怪的线：

```
while(in.readLine()!=null)
{      
   sb.append(in.readLine());
} 
```

如果`r.txt`只包含一行，你会在 中得到字符串“null” `StringBuffer`，因为第一行是`StringBuffer.append`这样的：

```
public AbstractStringBuilder append(String str) {
  if (str == null) str = "null";
  ....
} 
```

如果有两行，您将得到第一行，行尾带有“null”。

以下会将文件中的所有行附加到`StringBuffer`：

```
String line = null;
while((line = in.readLine()) != null)
{      
   sb.append(line);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T05:43:38.210

你的代码

```
while(in.readLine() != null) {      
        sb.append(in.readLine());
    } 
```

随之改变

```
 while ((s = in.readLine()) != null)
 {               
    sb.append(s);

 } 
```

# android - 如何在android中将一个包中的活动调用到另一个包

> ID：13889653
> 
> 赞同：-3
> 
> 时间：2012-12-15T05:35:19.307
> 
> 标签：android

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.button1:
        Intent i=new Intent(this,com.sms.sms.SmsSync.class);// error at this line
        break;

    default:
        break;
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:39:14.663

`this`可能指的是一个`OnClickListener`，而是引用您的类名，让我们*假设*SmsSync 在同一个包中：

```
Intent i = new Intent(MainActivity.this, SmsSync.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:49:27.853

使用意图。

```
Intent intent = new Intent(this, SmsSync.class);
startActivity(intent); 
```

或者

```
Intent intent = new Intent(YourActivityname.this, SmsSync.class);
startActivity(intent); 
```

以下链接将帮助您开始：

[安卓意图](http://developer.android.com/reference/android/content/Intent.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T05:50:31.340

如果您的活动在不同的包中，那么您必须使用包名称注册您的活动`AndroidMenifest.xml`

像这样

```
 <activity
            android:name="com.sms.sms.SmsSync"/> 
```

之后，您可以像正常活动一样开始活动。

```
 Intent intent = new Intent(your_context, SmsSync.class); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T05:53:02.233

# trello - Trello api 返回不正确的结果

> ID：13889654
> 
> 赞同：2
> 
> 时间：2012-12-14T11:22:32.580
> 
> 标签：trello

使用以下代码片段

```
var url = "https://api.trello.com/1/boards/502b9bff1f4564a45db0f34d/?lists=open&list_fields=all&cards=open&card_fields=name,desc,idList,idShort,closed&key=<appropriate key>&token=<appropriate token>";

var response = UrlFetchApp.fetch(url);
var trelloStuff = Utilities.jsonParse(response.getContentText());
var cards = trelloStuff.cards; 
```

而不是得到 42 张卡，我得到 254 张卡。如果需要，我有 JSON 格式的结果。

我想要的卡片（这块板上的真实卡片）位于 JSON 的末尾。第一组卡片（不需要的且不属于该板）被命名为“卡片 1”到“卡片 9”和“卡片 A”到“卡片 F”。

板上没有存档的卡片，但有一些存档列表在存档之前可能附有或没有附上卡片。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T15:38:32.857

而不是请求`cards=open`使用`cards=visible`.

这应该只返回您在查看棋盘时可以看到的卡片（与“打开”但在已存档列表中的卡片相反）

# c# - 替换字符串中特定数量的空白字符

> ID：13889658
> 
> 赞同：0
> 
> 时间：2012-12-15T05:36:30.490
> 
> 标签：c#, .net

我有看起来像这样的字符串，

```
"ad hominem  ",
"ad lib  ",
"ad lib  ",
"adamantine  ",
"adamite     ",
"adder   ",
"Addisonian  ",
"addlepated  ",
"adduce  ", 
```

所以基本上我想做的是在有多个空格字符（意思不是两个词）的情况下，摆脱它，所以欲望看起来像这样

```
"ad hominem",
"ad lib",
"ad lib",
"adamantine",
"adamite",
"adder",
"Addisonian",
"addlepated",
"adduce", 
```

这是我尝试过的：

```
sb = (Regex.Replace(sb,"  ", ""));
sb = (Regex.Replace(sb,"  ", ""));
sb = (Regex.Replace(sb, "   ", ""));
sb = (Regex.Replace(sb, "   ", ""));
sb = (Regex.Replace(sb, "   ", ""));
sb = (Regex.Replace(sb, "   ", ""));
sb = (Regex.Replace(sb, "      ", ""));
sb = (Regex.Replace(sb, "       ", ""));
sb = (Regex.Replace(sb, "        ", ""));
sb = (Regex.Replace(sb, "         ", ""));
sb = (Regex.Replace(sb, "          ", ""));
sb = (Regex.Replace(sb, "           ", "")); 
```

*edit Trim() 不起作用，因为空格不在末尾或开头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:38:02.587

如果所有单词都如所写，那么您可以使用`TrimEnd(' ')`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:39:42.267

String.Trim() 将在字符串的开头或结尾返回没有额外空格的值。

更多细节请看[这里](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T11:49:19.267

如果你真的想使用正则表达式，你可以做一个

```
sb = Regex.Replace(sb, @"\s{2,}", " "); 
```

用一个空格替换字符串中任何位置的所有连续空格。按照这个`.Trim()`来摆脱开头或结尾的空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T05:39:08.733

您可以使用 Trim() 函数。它将修剪空格

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T05:45:13.937

只需使用`sb.trim();`，这将删除两端的空格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-15T11:37:35.617

使用 Trim() 方法删除所有前导和尾随空格。

# bash - 在 BASH 中按字节读取文件

> ID：13889659
> 
> 赞同：21
> 
> 时间：2012-12-15T05:36:36.143
> 
> 标签：bash

我需要读取我指定的文件的第一个字节，然后是第二个字节，第三个等等。我怎么能在 BASH 上做到这一点？PS我需要得到这个字节的十六进制

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-15T07:30:08.270

# 完全重写：2019 年 9 月！

比以前的版本更短更简单！（更快，但不是那么多）

# 是的，[bash](/questions/tagged/bash "显示标记为“bash”的问题")可以读写二进制文件：

句法：

```
LANG=C IFS= read -r -d '' -n 1 foo 
```

将填充`$foo`1 个二进制字节。不幸的是，由于 bash 字符串不能保存空字节 ($ `\0`)，因此需要读取*一个字节一次*。

但是对于字节读取的*值*，我错过了这个`man bash`（看看 2016 年的帖子，在这个底部）：

> ```
>  printf [-v var] format [arguments]
>  ...
>      Arguments to non-string format specifiers are treated as C constants,
>      except that ..., and if  the leading character is a  single or double
>      quote, the value is the ASCII value of the following character. 
> ```

所以：

```
read8() {
    local _r8_var=${1:-OUTBIN} _r8_car LANG=C IFS=
    read -r -d '' -n 1 _r8_car
    printf -v $_r8_var %d "'"$_r8_car
} 
```

`$OUTBIN`将使用来自 STDIN 的第一个字节的十进制 ascii 值填充提交的变量名称（默认为）

```
read16() {
    local _r16_var=${1:-OUTBIN} _r16_lb _r16_hb
    read8 _r16_lb &&
    read8 _r16_hb
    printf -v $_r16_var %d $(( _r16_hb<<8 | _r16_lb ))
} 
```

将使用来自 STDIN 的前 16 位字的十进制值填充提交的变量名称（默认为`$OUTBIN`）...

当然，要切换[Endianness](https://en.wikipedia.org/wiki/Endianness)，您必须切换：

```
 read8 _r16_hb &&
    read8 _r16_lb 
```

等等：

```
# Usage:
#       read[8|16|32|64] [varname] < binaryStdInput

read8() {  local _r8_var=${1:-OUTBIN} _r8_car LANG=C IFS=
    read -r -d '' -n 1 _r8_car
    printf -v $_r8_var %d "'"$_r8_car ;}
read16() { local _r16_var=${1:-OUTBIN} _r16_lb _r16_hb
    read8  _r16_lb && read8  _r16_hb
    printf -v $_r16_var %d $(( _r16_hb<<8 | _r16_lb )) ;}
read32() { local _r32_var=${1:-OUTBIN} _r32_lw _r32_hw
    read16 _r32_lw && read16 _r32_hw
    printf -v $_r32_var %d $(( _r32_hw<<16| _r32_lw )) ;}
read64() { local _r64_var=${1:-OUTBIN} _r64_ll _r64_hl
    read32 _r64_ll && read32 _r64_hl
    printf -v $_r64_var %d $(( _r64_hl<<32| _r64_ll )) ;} 
```

所以你可以`source`这样，然后如果你`/dev/sda`是`gpt`分区的，

```
read totsize < <(blockdev --getsz /dev/sda)
read64 gptbackup < <(dd if=/dev/sda bs=8 skip=68 count=1 2>/dev/null)
echo $((totsize-gptbackup))
1 
```

答案可能是`1`（第一个 GPT 在扇区 1，一个扇区是 512 字节。GPT 备份位置在字节 32。`bs=8`要跳过 512 -> 64 + 32 -> 4 = 544 -> 68 个块...请参阅[GUID 分区表在维基百科](https://en.wikipedia.org/wiki/GUID_Partition_Table)）。

## 快速小写功能...

```
write () { 
    local i=$((${2:-64}/8)) o= v r
    r=$((i-1))
    for ((;i--;)) {
        printf -vv '\%03o' $(( ($1>>8*(0${3+-1}?i:r-i))&255 ))
        o+=$v
    }
    printf "$o"
} 
```

此函数默认为 64 位，小端。

```
Usage: write <integer> [bits:64|32|16|8] [switchto big endian] 
```

*   使用两个参数时，第二个参数必须是 , 或 , 之一`8`，才能`16`生成输出的位长。`32``64`
*   使用任何虚拟的第三个参数（甚至是空字符串），函数将切换到大端。

.

```
read64 foo < <(write -12345);echo $foo
-12345 
```

...

# 2015年第一次发帖...

### 升级以添加特定 bash 版本（带有 bashisms）

使用新版本的`printf`内置，您可以做很多事情而无需 fork ( `$(...)`) 使您的脚本更快。

首先让我们看看（通过使用`seq`and `sed`）如何解析*高清输出*：

```
echo ;sed <(seq -f %02g 0 $(( COLUMNS-1 )) ) -ne '
    /0$/{s/^\(.*\)0$/\o0337\o033[A\1\o03380/;H;};
    /[1-9]$/{s/^.*\(.\)/\1/;H};
    ${x;s/\n//g;p}';hd < <(echo Hello good world!)
0         1         2         3         4         5         6         7
012345678901234567890123456789012345678901234567890123456789012345678901234567
00000000  48 65 6c 6c 6f 20 67 6f  6f 64 20 77 6f 72 6c 64  |Hello good world|
00000010  21 0a                                             |!.|
00000012 
```

十六进制部分是否从第 10 列开始并在第 56 列结束，间隔 3 个字符并在第 34 列有一个额外的空格。

因此，可以通过以下方式进行解析：

```
while read line ;do
    for x in ${line:10:48};do
        printf -v x \\%o 0x$x
        printf $x
      done
  done < <( ls -l --color | hd ) 
```

### 老原帖

**编辑 2**为十六进制，您可以使用`hd`

```
echo Hello world | hd
00000000  48 65 6c 6c 6f 20 77 6f  72 6c 64 0a              |Hello world.| 
```

或者`od`

```
echo Hello world | od -t x1 -t c
0000000  48  65  6c  6c  6f  20  77  6f  72  6c  64  0a
          H   e   l   l   o       w   o   r   l   d  \n 
```

不久

```
while IFS= read -r -n1 car;do [ "$car" ] && echo -n "$car" || echo ; done 
```

试试看：

```
while IFS= read -rn1 c;do [ "$c" ]&&echo -n "$c"||echo;done < <(ls -l --color) 
```

解释：

```
while IFS= read -rn1 car  # unset InputFieldSeparator so read every chars
    do [ "$car" ] &&      # Test if there is ``something''?
        echo -n "$car" || # then echo them
        echo              # Else, there is an end-of-line, so print one
  done 
```

**编辑**；问题已编辑：需要十六进制值！？

```
od -An -t x1 | while read line;do for char in $line;do echo $char;done ;done 
```

演示：

```
od -An -t x1 < <(ls -l --color ) |        # Translate binary to 1 byte hex 
    while read line;do                    # Read line of HEX pairs
        for char in $line;do              # For each pair
            printf "\x$char"              # Print translate HEX to binary
      done
  done 
```

演示 2：**我们有十六进制和二进制**

```
od -An -t x1 < <(ls -l --color ) |        # Translate binary to 1 byte hex 
    while read line;do                    # Read line of HEX pairs
        for char in $line;do              # For each pair
            bin="$(printf "\x$char")"     # translate HEX to binary
            dec=$(printf "%d" 0x$char)    # translate to decimal
            [ $dec -lt 32  ] ||           # if caracter not printable
            ( [ $dec -gt 128 ] &&         # change bin to a single dot.
              [ $dec -lt 160 ] ) && bin="."
            str="$str$bin" 
            echo -n $char \               # Print HEX value and a space
            ((i++))                       # count printed values
            if [ $i -gt 15 ] ;then
                i=0
                echo "  -  $str"
                str=""
              fi
      done
  done 
```

## 2016年9月新帖：

这在非常特定的情况下可能很有用，（我用它们在两个磁盘之间手动复制 GPT 分区，在低级别，没有`/usr`挂载......）

# 是的，bash 可以读取二进制文件！

...但只有一个字节，一个...（因为 `char(0)' 无法正确读取，正确读取它们的唯一方法是考虑*end-of-file*，如果没有读取字符并且未到达文件末尾，则读取的字符是 char(0))。

这更像是一个概念证明，而不是一个非常有用的工具：有一个***纯[bash](/questions/tagged/bash "显示标记为“bash”的问题")***版本的`hd`(hexdump)。

这使用最近的*bashisms*，低于`bash v4.3`或更高。

```
#!/bin/bash

printf -v ascii \\%o {32..126}
printf -v ascii "$ascii"

printf -v cntrl %-20sE abtnvfr

values=()
todisplay=
address=0
printf -v fmt8 %8s
fmt8=${fmt8// / %02x}

while LANG=C IFS= read -r -d '' -n 1 char ;do
    if [ "$char" ] ;then
        printf -v char "%q" "$char"
        ((${#char}==1)) && todisplay+=$char || todisplay+=.
        case ${#char} in
         1|2 ) char=${ascii%$char*};values+=($((${#char}+32)));;
           7 ) char=${char#*\'\\};values+=($((8#${char%\'})));;
           5 ) char=${char#*\'\\};char=${cntrl%${char%\'}*};
                values+=($((${#char}+7)));;
           * ) echo >&2 ERROR: $char;;
        esac
      else
        values+=(0)
      fi 
```

# 

```
 if [ ${#values[@]} -gt 15 ] ;then
        printf "%08x $fmt8 $fmt8  |%s|\n" $address ${values[@]} "$todisplay"
        ((address+=16))
        values=() todisplay=
      fi
  done

if [ "$values" ] ;then
        ((${#values[@]}>8))&&fmt="$fmt8 ${fmt8:0:(${#values[@]}%8)*5}"||
            fmt="${fmt8:0:${#values[@]}*5}"
        printf "%08x $fmt%$((
                50-${#values[@]}*3-(${#values[@]}>8?1:0)
            ))s |%s|\n" $address ${values[@]} ''""'' "$todisplay"
fi
printf "%08x (%d chars read.)\n" $((address+${#values[@]})){,} 
```

您可以尝试/使用它，但不要尝试比较性能！

```
time hd < <(seq 1 10000|gzip)|wc
   1415   25480  111711
real    0m0.020s
user    0m0.008s
sys     0m0.000s

time ./hex.sh < <(seq 1 10000|gzip)|wc
   1415   25452  111669
real    0m2.636s
user    0m2.496s
sys     0m0.048s 
```

同样的工作： 20 毫秒`hd`vs 2000 毫秒 我的`bash script`.

...但是如果您想读取文件头中的 4 个字节，甚至是硬盘驱动器中的*扇区地址，这可以完成工作...*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-15T08:23:27.750

你试过了`xxd`吗？它直接提供十六进制转储，如你所愿..

对于您的情况，命令将是：

```
xxd -c 1 /path/to/input_file | while read offset hex char; do
  #Do something with $hex
done 
```

注意：从十六进制中提取字符，而不是在读取行时。这是必需的，因为 read 不会正确捕获空白。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-15T05:45:48.030

使用 `read`单个字符可以一次读取如下：

```
read -n 1 c
echo $c 
```

[回答]

试试这个：

```
#!/bin/bash
# data file
INPUT=/path/to/input.txt

# while loop
while IFS= read -r -n1 char
do
        # display one character at a time
    echo  "$char"
done < "$INPUT" 
```

从这个[链接](http://www.cyberciti.biz/faq/linux-unix-read-one-character-atatime-while-loop/)

* * *

第二种方法 Using `awk`，逐个字符循环

`awk '{for(i=1;i<=length;i++) print substr($0, i, 1)}' /home/cscape/Desktop/table2.sql`

* * *

第三种方式，

```
$ fold -1 /home/cscape/Desktop/table.sql  | awk '{print $0}' 
```

* * *

**编辑**：将每个字符打印为`HEX`数字：

假设我有一个文件名`file`：

```
$ cat file
123A3445F 
```

我已经编写了一个`awk`脚本（`named x.awk`）来逐个字符地读取`file`并打印到`HEX`：

```
$ cat x.awk
#!/bin/awk -f

BEGIN    { _ord_init() }

function _ord_init(    low, high, i, t)
{
    low = sprintf("%c", 7) # BEL is ascii 7
    if (low == "\a") {    # regular ascii
        low = 0
        high = 127
    } else if (sprintf("%c", 128 + 7) == "\a") {
        # ascii, mark parity
        low = 128
        high = 255
    } else {        # ebcdic(!)
        low = 0
        high = 255
    }

    for (i = low; i <= high; i++) {
        t = sprintf("%c", i)
        _ord_[t] = i
    }
}
function ord(str,    c)
{
    # only first character is of interest
    c = substr(str, 1, 1)
    return _ord_[c]
}

function chr(c)
{
    # force c to be numeric by adding 0
    return sprintf("%c", c + 0)
}

{ x=$0; printf("%s , %x\n",$0, ord(x) )} 
```

为了编写这个脚本，我使用[了 awk-documentation](http://www.gnu.org/software/gawk/manual/html_node/Ordinal-Functions.html)
现在，您可以将这个`awk`脚本用于您的工作，如下所示：

```
$ fold -1 /home/cscape/Desktop/file  | awk -f x.awk
1 , 31
2 , 32
3 , 33
A , 41
3 , 33
4 , 34
4 , 34
5 , 35
F , 46 
```

注意：`A`值是`41`十六进制十进制。以十进制打印更改`%x`为`%d`脚本的最后一行`x.awk`。

试试看！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T11:16:37.880

另一个解决方案，使用 head、tail 和 printf：

```
for a in $( seq $( cat file.txt | wc -c ) ) ; do cat file.txt | head -c$a | tail -c1 | xargs -0 -I{} printf '%s %0X\n' {} "'{}" ; done 
```

更具可读性：

```
#!/bin/bash

function usage() {
    echo "Need file with size > 0"
    exit 1
}

test -s "$1" || usage

for a in $( seq $( cat $1 | wc -c ) )
do
    cat $1 | head -c$a | tail -c1 | \
    xargs -0 -I{} printf '%c %#02x\n' {} "'{}"
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T05:42:38.487

`read`与`-n`选项一起使用。

```
while read -n 1 ch; do
  echo $ch
done < moemoe.txt 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-02T01:56:41.860

虽然我更想扩展 Perleone 自己的帖子（因为这是*他的*基本概念！），但我的编辑毕竟被拒绝了，我被建议将其作为单独的答案发布。很公平，所以我会这样做。

对 Perleone 原始脚本的改进的简而言之：

*   `seq`在这里完全是矫枉过正。一个用作（同样简单的）计数器变量的简单`while`循环就可以很好地完成工作（也更快）`a`
*   最大值，`$(cat $1 | wc -c)` **必须**分配给一个变量，否则每次都会重新计算，并使这个备用脚本运行得比它派生的那个还要慢。
*   无需在简单的使用信息行上浪费功能。但是，有必要了解两个命令周围的（强制性）花括号，因为没有`{ }`，该`exit 1`命令将在任何一种情况下执行，并且脚本解释器永远不会进入循环。（最后一点：`( )`也可以，但方式不同！括号将产生一个*subshel​​l*，而花括号将在*当前*shell 中执行其中的命令。）

```
#!/bin/bash

test -s "$1" || { echo "Need a file with size greater than 0!"; exit 1; }

a=0
max=$(cat $1 | wc -c)
while [[ $((++a)) -lt $max ]]; do
  cat $1 | head -c$a | tail -c1 | \
  xargs -0 -I{} printf '%c %#02x\n' {} "'{}"
done 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-01T16:39:23.390

我有一个建议要给出，但希望得到每个人的反馈，以及来自 syntaxerror 用户的个人建议。

我对 bash 不太了解，但我认为将“cat $1”存储在变量中可能会更好。但问题是 echo 命令也会带来一点开销，对吧？

```
test -s "$1" || (echo "Need a file with size greater than 0!"; exit 1)
a=0
rfile=$(cat $1)
max=$(echo $rfile | wc -c)
while [[ $((++a)) -lt $max ]]; do
  echo $rfile | head -c$a | tail -c1 | \
  xargs -0 -I{} printf '%c %#02x\n' {} "'{}"
done 
```

在我看来，它会有更好的性能，但我还没有测试过..

# html - 对具有多行表格单元的表格中的多行使用标签标记

> ID：13889660
> 
> 赞同：4
> 
> 时间：2012-12-15T05:36:36.957
> 
> 标签：html, css, forms, html-table, css-tables

我有一个带有复选框的表格，每个复选框行中的单元格包含有关该复选框的信息。所以我想对行使用*标签*，但据我所知，你不能在*table*和*td*标签之间使用*标签*。

 **然后我做了一个相同的 CSS 表格版本，它工作正常。我将*标签*设置为表格行，单元格正确对齐，单击它们将选中/取消选中复选框。

现在的问题：我希望复选框跨越多行。

[http://jsfiddle.net/odraencoded/YaS5v/](http://jsfiddle.net/odraencoded/YaS5v/) - HTML 表格版本具有 rowspan 属性，但我不能在单行中使用*标签*，更不用说多行了。

```
<table>
  <tr>
    <td rowspan=2><input type=checkbox /></td>
    <td>...</td>
  </tr>
  <tr><td>...</td></tr>
</table> 
```

[http://jsfiddle.net/odraencoded/EKzXv/](http://jsfiddle.net/odraencoded/EKzXv/) - CSS 表格版本允许我使用*标签*，但我找不到设置行跨度的方法。

```
<div style="display: table;">
  <label style="display: table-row-group;">
    <span style="display: table-row;">
      <span style="display: table-cell;">
        <input type="checkbox" />
      </span>
      <span...>...</span>
    </span>
    <span...><span...>...</span></span>
  </label>
</div> 
```

有没有办法让标签标签包含多行？它包含的单元格之一是标签的输入复选框？那个输入复选框单元格应该跨越标签包含的所有行？无论如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-11T12:41:27.253

这将是一种方法。请注意复选框上的 id。

```
<table>
  <tbody id="checkbox1">
    <tr>
        <td rowspan="2"><input type="checkbox" id="check1" /></td>
        <td><label for="check1">A</label></td>
        <td><label for="check1">B</label></td>
        <td><label for="check1">C</label></td>
    </tr>
    <tr>
        <td><label for="check1">a</label></td>
        <td><label for="check1">b</label></td>
        <td><label for="check1">c</label></td>
    </tr>
    </tbody>
    <tbody id="checkbox2">
    <tr>
        <td rowspan="2"><input type="checkbox" id="check2" /></td>
        <td><label for="check2">D</label></td>
        <td><label for="check2">E</label></td>
        <td><label for="check2">F</label></td>
    </tr>
    <tr>
        <td><label for="check2">d</label></td>
        <td><label for="check2">e</label></td>
        <td><label for="check2">f</label></td>
    </tr>
  </tbody>
</table>
```**

# apache-flex - as3lxs 是否支持所有版本的 excel（.xls、.xlsx、.csv）

> ID：13889662
> 
> 赞同：0
> 
> 时间：2012-12-15T05:37:21.550
> 
> 标签：apache-flex, actionscript, file-import, as3xls

as3lxs 是否支持所有版本的 excel，即 .xls、.xlsx 和 .csv 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:44:29.490

根据[wiki](http://code.google.com/p/as3xls/wiki/Tutorial)上留下的评论，它不仅不支持 xlsx（它基于 XML，因此您可能会找到其他工具）或 CSV（它不是 excel 格式，而是一组更简单的逗号分隔值，可能手动解析并不难）但看起来它不能与所有口味的 xls 一起使用。但也许总比没有好。

# java - JLabels setPreferredSize 改变所有 JLabels 的大小，而不仅仅是一个？

> ID：13889663
> 
> 赞同：1
> 
> 时间：2012-12-15T05:37:24.430
> 
> 标签：java, swing, user-interface, jlabel, layout-manager

我已经设法创建了一个日历的大部分内容，所有的 JLabels 和框都放在了适当的位置（如果您想查看更多代码，请询问，但通常不赞成太多），我想调整所有框的大小代表日历中的日子。它们应该是整齐的小方块，就像在任何日历上一样。

当我做一个

```
dayBoxNumbers[7].setPreferredSize(new Dimension(50,50)); 
```

它会调整日历中每个 JLabel 的大小以包括星期几等，整个事情看起来很荒谬。我选择索引 7 并没有特别的原因，但我的想法是调整所有天数 (1-31) 的大小，这具有相同的影响。

**编辑以包含所有代码（很少可以省略来表达手头的问题）**

***测试代码.java***

```
package testpackage;

import java.awt.*;
import java.util.Calendar;
import java.util.GregorianCalendar;
import javax.swing.*;

public class TestCode extends JFrame{

GregorianCalendar date = new GregorianCalendar();
int month = date.get(Calendar.MONTH);
DrawCalendar window = new DrawCalendar(date);

    public static void main(String[] args) {

        TestCode frame = new TestCode();
        frame.pack();
        frame.setTitle("Calendar Project");
        frame.setLocationRelativeTo(null);
        frame.setSize(500, 500);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
   public TestCode(){
       setLayout(new BorderLayout());
       add(window);
   }
} 
```

**DrawCalendar.java**

```
package testpackage;

import java.awt.*;
import java.util.GregorianCalendar;
import javax.swing.*;

public class DrawCalendar extends JPanel{

private JLabel[] dayBoxNumbers;
private JLabel month = new JLabel("Month");
private JLabel[] days = {
    new JLabel("Sunday"),
    new JLabel("Monday"),
    new JLabel("Tuesday"),
    new JLabel("Wednesday"),
    new JLabel("Thursday"),
    new JLabel("Friday"),
    new JLabel("Saturday")
};

private JPanel window = new JPanel(new GridLayout(2,1));
private JPanel topLabels = new JPanel(new GridLayout(2,1));
    private JPanel dayLabels = new JPanel(new GridLayout(1, 7));
private JPanel dayBoxes = new JPanel(new GridLayout(0,7));

public DrawCalendar(GregorianCalendar date){

    //put days and month into topLabels then add topLabels to UI
    for(int x = 0; x < 7; x++){
        dayLabels.add(days[x]);
    }

    month.setHorizontalAlignment(SwingConstants.CENTER);
    topLabels.add(month);
    topLabels.add(dayLabels);
    window.add(topLabels, BorderLayout.NORTH);
    window.add(dayBoxes, BorderLayout.CENTER);
    add(window);

    //Find the grid square to start the date
    int firstDay = getFirstDay(date);
    int lastDay = date.getActualMaximum(GregorianCalendar.DAY_OF_MONTH);

    addDaySquares(firstDay, lastDay);

}

private void addDaySquares(int first, int last){
    //Create blank entries into the grid
    for(int i = 1; i < first; i++){
        dayBoxes.add(new JLabel(""));   
    }

    //create array of JLabels for day boxes
    dayBoxNumbers = new JLabel[last];
    for(int x=0; x < last; x++){
        dayBoxNumbers[x] = new JLabel(String.valueOf(x+1));
    }

    //Add JLabels to the grid and edit properties
    for(int j=0; j < last; j++){
        dayBoxNumbers[j].setBorder(BorderFactory.createLineBorder(Color.black));
        dayBoxNumbers[j].setHorizontalAlignment(SwingConstants.RIGHT);
        dayBoxNumbers[j].setVerticalAlignment(SwingConstants.TOP);
        dayBoxNumbers[1].setPreferredSize(new Dimension(30,40));
        dayBoxes.add(dayBoxNumbers[j]);
    }

}

private int getFirstDay(GregorianCalendar firstDay){
    firstDay.set(GregorianCalendar.DAY_OF_MONTH, 1);
    return firstDay.get(GregorianCalendar.DAY_OF_WEEK);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T05:46:42.427

我：

> 一个猜测——你在使用 GridLayout 吗？如果是这样，设置一个组件的大小可以设置所有组件的大小。是的，我们确实需要查看更多代码并且不想看到所有代码。最好发布一个最小的可编译和可运行的例子，一个我们可以测试、修改和帮助纠正的例子，一个没有与问题无关的代码的例子，一个[sscce](http://sscce.org)

你：

> 我正在使用网格布局。有没有办法在一个特定元素中设置每个网格正方形的大小？IE 只调整包含日历天数的所有网格正方形的大小，而不调整包含拼写天数的网格的大小？

根据我的猜测，您已经验证您实际上正在使用 GridLayout。您可能需要使用更复杂的布局，包括嵌套 JPanel，每个 JPanel 都使用自己的布局，或者考虑使用 GridBagLayout 或 MigLayout。

为了获得更好的帮助，请考虑创建并向我们展示您的[sscce](http://sscce.org)。

**编辑 2**
是的，您正在使用 GridLayout 进行所有操作。不要那样做。而是将 JPanel 与其他布局嵌套。例如，主 JPanel 可以使用 BoxLayout 沿页面轴放置所有内容，然后您可以有一个使用 FlowLayout 并保存标题 JLabel 的标题 JPanel，使用具有 7 列的 GridLayout 的一周中的一天 JPanel，以及您的日历 JPanel保存日期并使用 GridLayout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:53:33.663

如果你想调整所有 JLabels 的大小，你应该使用

```
if (int j=0; j<last; j++){
   dayBoxNumbers[j].setPreferredSize(new Dimension(30,40));
} 
```

您已将 JLabel 索引 1 的大小设置为不同

```
dayBoxNumbers[1].setPreferredSize(new Dimension(30,40)); //why this? 
```

# ios - 动画期间未正确定位子视图

> ID：13889673
> 
> 赞同：6
> 
> 时间：2012-12-15T05:38:46.920
> 
> 标签：ios, uiviewanimation

我有一个简单的动画，我正在从旧视图的中心扩展一个新视图，而那个视图会淡出。然而，这个新视图的子视图（一个按钮和一个标签）从屏幕的右下角“飞”进来，因为这个新视图扩展到占据整个屏幕。我尝试过打开和不打开自动布局，虽然这两种情况给出了不同的结果，但它们都是错误的。

设置很简单，我在故事板中有两个未连接的视图控制器，并使用以下代码为视图更改设置动画：

```
-(void)switchViews2:(id)sender {
    UIWindow *win = self.view.window;
    YellowController *yellow = [self.storyboard instantiateViewControllerWithIdentifier:@"Yellow"];
    yellow.view.frame = CGRectMake(0, 0, 1, 1);
    yellow.view.center = self.view.center;
    [win addSubview:yellow.view];
    CGRect  frame = self.view.frame;
    [UIView animateWithDuration:5 animations:^{
        yellow.view.frame = frame;
        self.view.alpha = 0;
    }
             completion:^(BOOL finished) {
                 [self.view removeFromSuperview];
                 win.rootViewController = yellow;
         }];
} 
```

问题是，为什么子视图在动画时不停留在它们应该在其父视图内的位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T08:24:12.813

要将子视图扩展到位，特别是在使用 Autolayout 时，动画转换属性而不是框架要简单得多。这样子视图的 bounds 属性不会改变，所以在动画过程中它不会觉得需要一直中继它的子视图。

添加您的子视图及其最后一帧，将其变换设置为例如 0.1 的缩放仿射变换，然后将其动画化为恒等变换。它将从中心点长出来，所有子视图都在正确的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T07:05:18.630

问题在于布局约束。如果不是在动画块中设置视图框架，而是在窗口和新视图之间添加约束，然后在动画块中调用 layoutIfNeeded 它可以正常工作：

```
-(void)switchViews2:(id)sender {
    UIWindow *win = self.view.window;
    YellowController *yellow = [self.storyboard instantiateViewControllerWithIdentifier:@"Yellow"];
    [yellow.view setTranslatesAutoresizingMaskIntoConstraints:NO];
    yellow.view.frame = CGRectMake(0, 0, 1, 1);
    yellow.view.center = self.view.center;
    [win addSubview:yellow.view];

    NSLayoutConstraint *con1 = [NSLayoutConstraint constraintWithItem:yellow.view attribute:NSLayoutAttributeLeading relatedBy:0 toItem:win attribute:NSLayoutAttributeLeading multiplier:1 constant:0];
    NSLayoutConstraint *con2 = [NSLayoutConstraint constraintWithItem:yellow.view attribute:NSLayoutAttributeTop relatedBy:0 toItem:win attribute:NSLayoutAttributeTop multiplier:1 constant:20];
    NSLayoutConstraint *con3 = [NSLayoutConstraint constraintWithItem:yellow.view attribute:NSLayoutAttributeTrailing relatedBy:0 toItem:win attribute:NSLayoutAttributeTrailing multiplier:1 constant:0];
    NSLayoutConstraint *con4 = [NSLayoutConstraint constraintWithItem:yellow.view attribute:NSLayoutAttributeBottom relatedBy:0 toItem:win attribute:NSLayoutAttributeBottom multiplier:1 constant:0];

    [win addConstraints:@[con1,con2,con3,con4]];

    [UIView animateWithDuration:1 animations:^{
        [win layoutIfNeeded];
        self.view.alpha = 0;
    }
             completion:^(BOOL finished) {
                 [self.view removeFromSuperview];
                 win.rootViewController = yellow;
         }];
} 
```

# objective-c - 这是对 NSArray 的复制方法的一个很好的使用吗？

> ID：13889675
> 
> 赞同：0
> 
> 时间：2012-12-15T05:38:59.750
> 
> 标签：objective-c, ios, automatic-ref-counting

你有一个使用模型/服务类的类或 ViewController，如下所示：

```
@interface MainViewController : UIViewController <TweetServiceDelegate> {

   NSArray *_tweets;
}

@property (nonatomic, strong) TweetService *tweetService;

@end

@implementation MainViewController

- (void)viewDidLoad {

  [super viewDidLoad];
  [self.twitterService queryForLatestTweets];
}

// delegate methods the tweetservice calls back after async getting data

- (void)querySucceededWithTweets:(NSArray *)tweets {

   _tweets = [tweets copy];
}

@end 
```

我问的原因是因为服务对委托的引用很弱，也就是 ViewController。

所以我知道使用 ARC 你不希望两个相互使用的东西都有一个强引用，所以如果它很弱但 ViewController 保留了 NSArray，那么一旦超出范围，服务就不会被收集，假设该服务确实超出了范围，但 ViewController 没有

```
@interface TweetService 

@property (nonatomic, weak) id<TweetServiceDelegate> delegate;

@end

@implementation TweetService

- (void)queryForLatestTweets {

   // do the query with AFNetworking, when succeed block fires, call the delegate

   [self.delegate querySucceededWithTweets:arrayOfTweets];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:01:21.140

我会说这是做这类事情的*推荐方式。*服务由需要它的控制器强烈持有，但服务仅将控制器作为委托弱持有，因为它不需要知道它的委托是什么——或者即使它存在——来运行。

当服务通过委托方法将某些内容返回给其委托时，委托应声明数据的所有权。首选方式是 to `copy`，因为委托对返回值的生命周期一无所知。`copy`创建一个新实例，可以将其视为数据的“快照”。处理此“快照”可确保您的数据在您不希望时不会被修改。这有效地解耦了服务和委托。

附注：你`self._tweets`不会工作，因为`_tweets`它是一个实例变量，但点语法需要一个属性。`_tweets = [tweets copy];`会是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T12:58:03.020

我会说是的，它很好用，因为......

如果您不复制该数组，只需简单地分配 _tweet = tweet 数组。

那么如果你在任何一个阵列中进行更改，它将影响到其他阵列..

所以是的，我建议你在这种时候使用 COPY 方法......

谢谢。

# javascript - 如何使用javascript从日期时间获取日期、年份、月份？

> ID：13889680
> 
> 赞同：1
> 
> 时间：2012-12-15T05:39:57.673
> 
> 标签：javascript

我正在尝试从`datetime`Javascript 中获取年、月、日、小时和分钟。这是我的代码：

```
var newdatestring=document.getElementById("2012-12-11 10:36").value;
var newdate=new Date(newdatestring);

newdate.setMinutes ( newdate.getMinutes() + 30 );
var formdate=newdate.getYear()+"-"+(newdate.getMonth()+1)+"-"+newdate.getDate()+" "+newdate.getHours()+":"+newdate.getMinutes();

alert(formdate); 
```

此代码在 Chrome 和 Opera 浏览器中运行良好，但在 IE 或 Firefox 中不起作用。在那些浏览器中，它显示类似`Nan-Nan-Nan Nan:Nan`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:47:33.940

尝试这个

```
var month = newdate.getUTCMonth();
var day = newdate.getUTCDate();
var year = newdate.getUTCFullYear(); 
```

`newdate`日期是什么时候`object`

# c# - 从 splitcontainer 面板显示 MDI 子项

> ID：13889682
> 
> 赞同：2
> 
> 时间：2012-12-15T05:40:34.660
> 
> 标签：c#, mdi, mdichild

我想先隐藏 childform(frmMenuMasterlist) 然后将 childform(frmMasterlistAdministrationAdd) 显示给 MDI 父级 (frmMain.splitcontainer.panel2)。当按钮像 web 中的母版页一样在父窗体上时它工作正常，但是当我把它放在子窗体中时，只有 this.hide() 执行。任何人都可以在这种情况下帮助我。提前谢谢了

```
private void btn_Administration_Click(object sender, EventArgs e)
    {
        this.Hide();
        frmMasterlistAdministrationAdd frmMasterlistAdministrationAdd = new frmMasterlistAdministrationAdd();
        frmMasterlistAdministrationAdd.TopLevel = false;
        frmMain frmMain = new frmMain();
        frmMasterlistAdministrationAdd.Parent = frmMain.splitContainer3.Panel2;
        frmMasterlistAdministrationAdd.Show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:59:48.583

试试这个：

```
frmMasterlistAdministrationAdd frmMasterlistAdministrationAdd = new frmMasterlistAdministrationAdd();
    frmMasterlistAdministrationAdd.TopLevel = false;
    frmMain frmMain = new frmMain();
    frmMasterlistAdministrationAdd.Parent = frmMain;
    splitContainer3.Panel2.Controles.add(frmMasterlistAdministrationAdd);
    frmMasterlistAdministrationAdd.Show(); 
```

# arrays - Scala从Case类迭代Double数组

> ID：13889683
> 
> 赞同：1
> 
> 时间：2012-12-15T05:40:38.627
> 
> 标签：arrays, scala

**编辑/更新：问题已解决！**

这有点奇怪，因为在 Scala 中迭代集合通常是直截了当的，但是在使用案例类中的双精度数组时，我确实遇到了编译错误。错误说：

```
 error: value foreach is not a member of Array[Double] for(d <- data.data_arr) 
```

好的，这是案例类：

```
case class StatsData (name: String,
                  timeUnit: TimeUnit,
                  data_arr: Array[Double],
                  min: Double,
                  max: Double){} 
```

这是关键点：

```
 /*Doesn't work */ 
 for(d <- data.data_arr) {         
  println(d) // can't fetch value d here   
  number = new Number(col, row, d)
 } 
```

奇怪的是，无论我使用哪种迭代，它根本不起作用。例如使用数组索引

```
 for (i <- data_arr.length-1) 
```

以及将数组转换为序列会引发与上述完全相同的错误；

```
for(d <- data.data_arr.toSeq) 
```

我究竟做错了什么？

感谢您对此事的任何帮助。

编辑/更新：问题已解决！

事实证明，问题的原因是 IntelliJ 的项目设置或结构中的问题，我不能肯定地说，但通过创建一个新项目解决了所有问题。相同的代码现在运行得很好。对此感到抱歉，但几乎所有帖子都帮助我追查了问题。

@yakshaver

“yield”表达式究竟是用来做什么的？

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:43:55.737

两个都

```
Array(1, 2, 3) foreach println 
```

和

```
for(i <- Array(1, 2, 3)) yield i 
```

和

```
for(i <- Array(1, 2, 3)) { println(i) } 
```

对我来说在 2.10.0-RC3 中工作得很好。

# php - 自动建议可以用于 TextArea 字段吗？

> ID：13889686
> 
> 赞同：0
> 
> 时间：2012-12-15T05:41:09.907
> 
> 标签：php, autocomplete

我正在用 php 做一个网站，需要自动建议群组消息。Clent 需要输入以逗号分隔的电话号码。我们需要为 textarea 添加自动建议功能。有人知道吗？请帮助。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:53:05.900

我想你需要这个。

```
$('textarea').keyup(function(){
  $.post('ajax/test.php', function(data) {
   $('#example').autocomplete(data);

   });

}); 
```

[请参阅此处](https://stackoverflow.com/questions/4329617/jquery-plugin-that-suggests-autocompletes-within-a-textarea)以获取插件和所有其他信息。

另[请参阅](https://stackoverflow.com/questions/5966641/attach-jquery-autocomplete-to-a-text-field-which-is-loaded-by-ajax-call)带有修复标签的好示例。

希望，它可以帮助你。谢谢。！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T05:46:52.427

是的，您可以在文本区域使用自动建议。例如，用逗号分隔单词。

输入新字符时，使用自动建议对服务器的 Ajax 调用（使用 jquery 或类似工具） 搜索词是在最后一个逗号之后键入的新词。

当用户选择新建议时，替换自上次逗号以来最后输入的字符。

应该有一些用于 jquery 的插件已经这样做了。

# extjs - ExtJS Combobox 显示一些奇怪的空格

> ID：13889690
> 
> 赞同：0
> 
> 时间：2012-12-15T05:41:42.787
> 
> 标签：extjs, combobox, yii, margins

我的组合框中显示了一些奇怪的空间。我已经在我的项目中替换了 ExtJS 库，但仍然没有运气。

有什么想法可以在这里发生吗？

这是它的外观照片...

![在此处输入图像描述](../Images/8ac454d8d1a55a906a426908e8394abc.png)

这是我使用的代码

```
Ext.define('Ext.view.AddMaintenanceWindow',{
extend      :'Ext.window.Window',
constructor :function(config){
    Ext.apply(this, config);
    var states = Ext.create('Ext.data.Store', {
fields: ['abbr', 'name'],
data : [
    {"abbr":"AL", "name":"Alabama"},
    {"abbr":"AK", "name":"Alaska"},
    {"abbr":"AZ", "name":"Arizona"}
]
});
    Ext.apply(this,{
        title   :'Agregar nueva entrada de mantenimiento',
        items   :[
                    Ext.create('Ext.panel.Panel',{
                        items       :[
                                        Ext.create('Ext.form.ComboBox', {
                                            fieldLabel: 'Choose State',
                                            store: states,
                                            queryMode: 'local',
                                            displayField: 'name',
                                            valueField: 'abbr'
                                        })
                                    ]
                    })
                ]
    });
    this.superclass.constructor.call(this);
},
initComponent:function(){
    this.superclass.initComponent.apply(this, arguments);
}
}) 
```

以防万一...我使用的是 Yii + ExtJS（没有 Ext4Yii）

顺便说一句，我也尝试使用 boxselect（我下载并复制了它）并得到了相同的结果，但使用了 boxselect）

我通过创建一个新的 yii 项目并将所有文件复制到该项目来解决这个问题。奇怪的是，我之前已经这样做了，但没有成功，但这次成功了。我仍然很好奇问题可能是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:18:41.863

从屏幕截图的外观来看，您似乎得到了一些额外的东西`padding`或`margins`在列表中（不是空格）。使用带有 Firebug 的 Chrome 或 Firefox 等现代浏览器来检查“Alabama”周围的元素。查找哪个 CSS 选择器正在添加额外的填充/边距，并为您的列表框覆盖它。

# java - 请求的资源不可用

> ID：13889694
> 
> 赞同：1
> 
> 时间：2012-12-15T05:42:21.027
> 
> 标签：java, html, servlets, tomcat7

我编写了一个 Java servlet 程序并通过本地 Tomcat 7 运行它，但它显示以下错误：

```
HTTP Status 404 - /skypark/registration
type Status report
message /skypark/registration
description The requested resource is not available.
Apache Tomcat/7.0.33 
```

我不知道我的 Html 页面是什么原因

```
 <html>
 <head>
<title>
User registration
</title>
 </head>
<body>
<form action="registration" method="post">
 <center>
<h2><b>Skypark User Registration</b></h2>
 <table border="0">
<tr><td>
First Name
</td><td>
<input type="text" name="fname"/></br>
</td></tr><tr><td>
Last Name
</td><td>
  <input type="text" name="lname"/></br>
  </td></tr><tr><td>
 UserName
 </td><td>
  <input type="text" name="uname"></br>
  </td></tr><tr><td>
  Enter Password
    </td><td>
  <input type="password" name="pass"></br>
   </td></tr><tr><td>
  Re-Type Password
  </td><td>
  <input type="password" name="pass1"></br>
   </td></tr><tr><td>
   Enter Email ID
  </td><td>
   <input type="email" name="email1"></br>
    </td></tr><tr><td>
  Phone Number
 </td><td>
  <input type="number" name="phone">
 </td></tr><tr><td>
 Gender<br>
 </td></tr><tr><td>
   <input type="radio" name="gender" value="Male">Male</input></br>
  </td></tr><tr><td>
  <input type="radio" name="gender" value="Female">Female</input></br>
  </td></tr><tr><td>
   Enter Your Date of Birth<br>
 </td><td>
  <Table Border=0>
   <tr>
  <td>
  Date
  </td>

  <td>Month</td>

   <td>Year</td>
   </tr><tr>
 <td> <select name="date">
   <option value="1">1</option>
  <option value="2">2</option>
   <option value="3">3</option>
     <option value="4">4</option>
   <option value="5">5</option>
    .
    .
    .
     have some code
    .
    .
    .
  </table>
 <input type="submit" value="Submit"></br>
  </center>
  </form>
</body>
  </html> 
```

我的小服务程序是：

```
 package skypark;
  import skypark.*;
   import java.io.*;
  import javax.servlet.*;
  import javax.servlet.http.*;
   import java.sql.*;
   public class Registration extends HttpServlet
     {
public static Connection prepareConnection()throws       ClassNotFoundException,SQLException
{
    String dcn="oracle.jdbc.driver.OracleDriver";
    String url="jdbc:oracle:thin:@JamesPJ-PC:1521:skypark";
    String usname="system";
    String pass="tiger";
    Class.forName(dcn);
    return DriverManager.getConnection(url,usname,pass);
}
public void doPost(HttpServletRequest req,HttpServletResponse resp)throws ServletException,IOException
{
    resp.setContentType("text/html");
    PrintWriter out=resp.getWriter();
  try
  {
    String phone1,uname,fname,lname,dob,address,city,state,country,pin,email,password,gender,lang,qual,relegion,privacy,hobbies,fav;

    uname=req.getParameter("uname");
    fname=req.getParameter("fname");
    lname=req.getParameter("lname");
    dob=req.getParameter("date");
    address=req.getParameter("address");
    city=req.getParameter("city");
    state=req.getParameter("state");
    country=req.getParameter("country");
    pin=req.getParameter("pin");
    email=req.getParameter("email1");
    password=req.getParameter("password");
    gender=req.getParameter("gender");
    phone1=req.getParameter("phone");
    lang="";
    qual="";
    relegion="";
    privacy="";
    hobbies="";
    fav="";
    int phone=Integer.parseInt(phone1);

    Connection con=prepareConnection();
    String Query="Insert into regdetails values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";
    PreparedStatement ps=con.prepareStatement(Query);
    ps.setString(1,uname);
    ps.setString(2,fname);
    ps.setString(3,lname);
    ps.setString(4,dob);
    ps.setString(5,address);
    ps.setString(6,city);
    ps.setString(7,state);
    ps.setString(8,country);
    ps.setString(9,pin);
    ps.setString(10,lang);
    ps.setString(11,qual);
    ps.setString(12,relegion);
    ps.setString(13,privacy);
    ps.setString(14,hobbies);
    ps.setString(15,fav);
    ps.setString(16,gender);

    int c=ps.executeUpdate();

    String query="insert into passmanager values(?,?,?,?)";
    PreparedStatement ps1=con.prepareStatement(query);

    ps1.setString(1,uname);
    ps1.setString(2,password);
    ps1.setString(3,email);
    ps1.setInt(4,phone);

    int i=ps1.executeUpdate();

    if(c==1||c==Statement.SUCCESS_NO_INFO && i==1||i==Statement.SUCCESS_NO_INFO)
    {
        out.println("<html><head><title>Login</title></head><body>");
        out.println("<center><h2>Skypark.com</h2>");
        out.println("<table border=0><tr>");
        out.println("<td>UserName/E-Mail</td>");
        out.println("<form action=login method=post");
        out.println("<td><input type=text name=uname></td>");
        out.println("</tr><tr><td>Password</td>");
        out.println("<td><input type=password name=pass></td></tr></table>");
        out.println("<input type=submit value=Login>");
        out.println("</form></body></html>");
    }
    else
    {
        out.println("<html><head><title>Error!</title></head><body>");
        out.println("<center><b>Given details are incorrect</b>");
        out.println(" Please try again</center></body></html>");
        RequestDispatcher rd=req.getRequestDispatcher("registration.html");
        rd.include(req,resp);
        return;
    }
  }
  catch(Exception e)
  {
      out.println("<html><head><title>Error!</title><body>");
      out.println("<b><i>Unable to process try after some time</i></b>");
      out.println("</body></html>");
      RequestDispatcher rd=req.getRequestDispatcher("registration.html");
      rd.include(req,resp);
      return;
  }
  out.flush();
  out.close();
   }
 } 
```

而 web.xml 文件是

```
 <?xml version="1.0" encoding="UTF-8"?>
   <web-app xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
                  http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
     version="3.0"
   metadata-complete="true">
  <servlet>
<servlet-name>reg</servlet-name>
<servlet-class>skypark.Registration</servlet-class>
  </servlet>
  <servlet-mapping>
<servlet-name>reg</servlet-name>
<url-pattern>/registration</url-pattern>
  </servlet-mapping>
   </web-app> 
```

我保存在 C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\skypark\WEB_INF\web.xml 和 C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\skypark\WEB_INF\classes 中的 servlet 类中\skypark 和 registration.html 在 C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\skypark\

如果这方面的任何错误导致上述错误意味着请帮助我。在此先感谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T05:48:02.163

我认为问题出在这两行：

`<form action="registration" method="post">`在您的 html 页面中。

`<url-pattern>/Registration</url-pattern>`在你的 web.xml

您的操作设置为`registration`并且您的 url 模式期望`Registration`（注意大写`R`和小`r`）。

只需尝试更改它们（两者都相同），它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:17:29.550

尝试将请求映射到您希望请求调用的方法。例如，如果您使用 Spring 框架，则需要在您的情况下将 web.xml 中的 servlet url-pattern 设置为 htm，然后返回 html 文件的名称。

```
@RequestMapping(value ="/registration",method = RequestMethod.GET)
public String render(Model model, HttpServletRequest request, HttpServletResponse response) {
{

--------------- compute ----
return "registration";
} 
```

如果您向 /registration 发出请求，服务器将计算映射到它的方法，然后搜索“registration”（返回值）以显示。

希望能帮助到你 ！

# algorithm - 在间隔/点上优化 DP

> ID：13889704
> 
> 赞同：1
> 
> 时间：2012-12-15T05:44:08.873
> 
> 标签：algorithm

这个问题很容易在 O(n ³ ) 时间内天真地解决。问题是这样的：

> 数轴上有 N 个独特的点。您想用一组间隔覆盖数轴上的每个点。您可以将间隔放置在任何地方，`B + MX`创建间隔的成本，其中`B`是创建间隔的初始成本，是间隔 长度的**一半**`X`，并且是每个间隔长度的成本。您想找到覆盖每个间隔的最低成本。**`M`**

 **样本数据：

```
Points = {0, 7, 100}
B = 20
M = 5 
```

因此最佳解决方案是 57.50，因为您可以以 20 + 3.5×5 的成本构建一个区间 [0,7]，并以 100 + 0×5 的成本在 [100,100] 构建一个区间，总和为 57.50。

我有一个 O(n ³ ) 解决方案，其中 DP 是从`[left, right]`. 所以答案将在`DP[1][N]`. 对于每一对`(i,j)`我只是迭代`k = {i...j-1}`和计算`DP[i][k] + DP[k + 1][j]`。

然而，这个解决方案是 O(n ³ ) （我认为有点像矩阵乘法）所以它在 N > 2000 时太慢了。有什么办法可以优化这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:05:38.410

这是一个二次解：

1.  按坐标对所有点进行排序。叫点`p`。

2.  我们将保留一个数组`A`，`A[k]`以便覆盖第一`k`点的最低成本。设置`A[0]`为零，所有其他元素设置为无穷大。

3.  对于每个`k`from `0`to`n-1`和每个`l`from `k+1`to `n`，设置`A[l] = min(A[l], A[k] + B + M*(p[l-1] - p[k])/2);`

最后，您应该能够说服自己，这是涵盖所有要点`A[n]`的最低成本。`n`（我们考虑了所有可能的最小覆盖间隔，并且在某种意义上我们是从“左到右”这样做的。）

您可以加快速度，使其在 O(n log n) 时间内运行；将步骤 3 替换为以下内容：

设置`A[1] = B`。对于每个`k`from`2`到`n`，设置`A[k] = A[k-1] + min(M/2 * (p[k-1] - p[k-2]), B)`。

这里的想法是我们要么扩展前一个区间以覆盖下一个点，要么我们在 结束前一个区间`p[k-2]`并在 开始一个新区间`p[k-1]`。做出这个决定我们唯一需要知道的是两点之间的距离。

另请注意，在计算 时`A[k]`，我只需要 的值`A[k-1]`。特别是，您不需要存储整个数组`A`；只有它最近的元素。**

# c# - 静态列表和 C#

> ID：13889705
> 
> 赞同：-3
> 
> 时间：2012-12-15T05:44:21.633
> 
> 标签：c#, static

我正在构建一个基于 Winform 的 C# 桌面应用程序。我有许多`Combox`控件，用户可以从下拉列表中选择输入或手动输入输入。Combox Items 本身是从静态列表中填充的。

每当用户输入列表中不存在的新输入时，我都会添加到此静态列表中。

这是执行此操作的小代码片段：

```
 if (!this.client_type.Items.Contains(items.ClientType))
            {
                ComboItems.ClientList.Add(temp.CourtName);
            } 
```

到目前为止，只要应用程序没有关闭或退出，这种方法就可以工作。当应用程序重新启动时，列表中没有手动输入的项目。

我正在考虑将列表保存在配置文件中。除了使用配置文件还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T05:47:33.083

> 除了使用配置文件还有其他方法吗？

是的。（例如，数据库。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T05:57:23.503

任何类型的序列化都应该有效。几个流行的想法：

数据库：如果您已经将数据保存到数据库，或者如果您希望所有用户都可以使用相同的自定义列表，无论他们是否在同一台机器上，那么这可能是最有意义的。

XML：如果更改应该针对它运行的每个盒子，那么您可能希望将其存储在本地。XML 很流行，并且框架中有一些库可用于处理 XML 文件。

[这是查看其他选项的链接。](http://msdn.microsoft.com/en-us/library/vstudio/ms233843.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T12:25:22.053

您可能还考虑将项目列表写入注册表并将其加载到注册表中。这是一个链接，其中包含一个很好的操作教程：http: [//www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C](http://www.codeproject.com/Articles/3389/Read-write-and-delete-from-registry-with-C)

# magento - 如何在magento中设置参数的默认值？

> ID：13889723
> 
> 赞同：1
> 
> 时间：2012-12-15T05:47:47.423
> 
> 标签：magento, parameters, get

如何在 magento 中为 get 方法的参数设置默认值？

$page_num=($this->getRequest()->getParam('page')) ？$this->getRequest()->getParam('page'):0;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:07:41.470

尝试：

`$page_num = $this->getRequest()->getParam('page', 0); // 0 - default value`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T09:56:09.677

第二个参数是默认返回值，可以是你喜欢的任何值。

# python - 一个一个地读取多个文件并在python中处理

> ID：13889724
> 
> 赞同：1
> 
> 时间：2012-12-15T05:47:56.653
> 
> 标签：python

我在 python 中使用 Pybrain（神经网络库）进行图像处理。我在一个目录中有 196 个文件，它保存在下面代码中的 all_files 中。我试图打开每个文件并分别对每个文件进行处理，但是它将所有文件数据放在一个字符串中，我希望每个文件一个一个地打开，在这里进行处理和输出是我的代码：

```
from pybrain.datasets import SupervisedDataSet
from pybrain.supervised.trainers import BackpropTrainer
import glob
ds = SupervisedDataSet(121,121)

all_files = glob.glob('/home/vidula/Desktop/tp/inpt/./*.data')
for filename in all_files:
   indata = tuple()
   outdata = tuple()
   with open(filename,'r')as file:
      for line in file.readlines():
          d = line.strip().split( ',' )
          indata = indata +  (d[0], )
          outdata = outdata + ( d[1], )
          ds.addSample(indata, outdata)
print outdata 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:15:10.623

在读取每个文件之前，您需要重置 indata 和 outdata。IE

```
for filename in all_files:
    indata = tuple()
    outdata = tuple() 
```

# css - 单击图像时显示文本的最简单标记是什么？无需切换，只需简单的 CSS

> ID：13889728
> 
> 赞同：1
> 
> 时间：2012-12-15T05:48:46.783
> 
> 标签：css

单击图像时显示文本的最简单标记是什么？

没有切换、CSS 或 Javascript。我有一系列拇指，我想在单击时为其添加标题。我一直在寻找似乎如此简单的几个小时，但我就是不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:41:08.597

以下方法相当简单，但它使图像标题文本仅在单击页面中的其他内容以跟踪链接之前可见。（这是否可以的问题还不是很清楚。）

使用 CSS 使图像标题文本最初不可见。使图像成为其标题的链接，并使用[`:target`](https://developer.mozilla.org/en-US/docs/CSS/:target)伪类在单击链接时将标题变为可见。演示：[jsfiddle](http://jsfiddle.net/yucca42/pA3dU/)。

```
<style>
a img { border: none; }
.caption { visibility: hidden; }
.caption:target { visibility: visible; }
</style>
<a href=#capt1><img src=test1.png alt=foo></a>
<div class=caption id=capt1>Image caption text</div>
<a href=#capt2><img src=test2.png alt=foo></a>
<div class=caption id=capt2>Image caption text 2</div> 
```

作为副作用，由于单击链接，页面可能会向下移动。如果这是一个问题，您可以改用“自指向”链接：

```
<a href=#capt1 id=capt1><img src=test1.png alt=foo><br>
<span class=caption>Image caption text</span></a> 
```

然后您将修改基本 CSS 规则中的选择器：

```
:target .caption { visibility: visible; } 
```

This works across browsers except IE 8 and older. They can be covered using polyfill, i.e. JavaScript code that emulates support to the pseudo-element in browsers without native support. See [Polyfill for css :target, not(), and [tilde] sibling selectors?](https://stackoverflow.com/questions/6190456/polyfill-for-css-target-not-and-tilde-sibling-selectors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:59:12.977

这会起作用

```
<label for="toggle">
    <img src="your image path" />
</label>
<input type="checkbox" id="toggle" />
<span>your text here</span> 
```

对于 CSS

```
#toggle{
    position: absolute;
    top: -9999px;
    left: -9999px;
}

span{
    display: none;
}

#toggle:checked + span{
    display: block;
}

img{
    cursor: pointer;
} 
```

但是这样做违反了 HTML 的语义规则。

[结果在这里](http://codepen.io/ImBobby/pen/uvigt)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T05:50:10.113

对每个图像使用 jQuery on()，然后在标题上使用这些点击事件来 .toggleClass('visible')。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T05:51:17.080

你也许可以让它与类似的东西一起工作：

```
<img src="myimage.png" tabindex="1" /><div class="caption">Some text!</div> 
```

CSS：

```
img~.caption{display:none}
img:active~.caption{display:block} 
```

然而，这充其量只是hacky。像这样的事情真的应该在 JavaScript 中完成。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-15T06:16:23.910

有办法吗？是的！有没有跨浏览器的方法？不！

如果您不担心它是跨浏览器或有效的 HTML，那么这可以工作：

[http://jsfiddle.net/charlescarver/XRBCF/](http://jsfiddle.net/charlescarver/XRBCF/)

HTML：

```
<input hidden/>​ 
```

CSS：

```
input{
    -webkit-appearance:none;
    -o-apperance:none;
    -moz-appearance:none;
    -ms-appearance:none;
    padding:0;
    border:0;   
    background-image:url(http://placedog.com/400/300);
    height:300px;
    width:400px;
    display:block;
    cursor:default;
}

input:focus{
    outline: none;
}

input:focus:after{
    content:"TEST";
    background-color:red;
    height:30px;
    width:100%;
    display:block;
    position:relative;
    top:270px;
}
​ 
```

# php - 如何从 codeigniter 中删除保存的 facebook 应用程序？

> ID：13889730
> 
> 赞同：0
> 
> 时间：2012-12-15T05:48:59.513
> 
> 标签：php, facebook, codeigniter, facebook-graph-api

任何人都可以帮助我如何使用 php codeigniter 删除 facebook 保存的应用程序。

这是我的代码，首先我加载了 fb 库，然后如何使用这个库删除特定的应用程序？

```
$this->load->library('facebook');
$user = $this->facebook->user();
//here how to send a request to the facebook to delete an requested application 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T05:05:18.337

不，您不能从您的代码中删除 Facebook 应用程序。您在此处加载的 CodeIgniter 库用于访问公共 Facebook API 并获取有关用户的详细信息等。

如果您想删除您创建的 Facebook 应用程序，您可以在 Facebook 的应用程序控制面板中执行此操作。

如果您想删除其他人创建的 Facebook 应用程序，那么您必须通过电子邮件请求 Facebook 执行此操作，但我怀疑这是您想要做的，也无法实现。

如果您想为用户删除应用程序（即通过 API 撤销应用程序访问权限），那么您必须告诉用户自己执行此操作。Facebook API 不允许您操纵其他用户的 Facebook 帐户。

如果是您自己的帐户，则通过您的用户资料登录并删除该应用程序。

基本上你所问的在 Facebook API 中是不可能的，并且与 CodeIgniter 没有任何关系。

# wordpress - 具有包含 Cakephp 网站的 WordPress 目录的网站的 htaccess 问题

> ID：13889740
> 
> 赞同：1
> 
> 时间：2012-12-15T05:50:37.673
> 
> 标签：wordpress, cakephp, mod-rewrite

我正在开发具有使用 WordPress 和 WordPress 目录制作的前端网站的网站

包含一个具有 cakephp 网站的仪表板文件夹。一切都在我的完美运行

本地系统，但是当我将整个网站迁移到在线服务器时，我无法访问

我在这里读到的 www.mywebsite.com/dashboard 文件夹

[https://wordpress.stackexchange.com/questions/20152/cannot-access-non-wordpress-subdirectories-as-wordpress-overrides-them-with-a-40](https://wordpress.stackexchange.com/questions/20152/cannot-access-non-wordpress-subdirectories-as-wordpress-overrides-them-with-a-40)

这是一个 htaccess 问题，但我根本不知道 htaccess 编码，所以这个链接很混乱

如果有人可以向我解释（以简单的方式）为什么会出现这个问题？以及如何

解决这个问题？会对我有帮助

我的 wordpress htaccess 是

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

和 cakephp htaccess，它位于 wordpress-install-directory/dashboard/cakephp-install

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:52:55.000

如果它们位于具有独立 .htaccess 文件的不同文件夹中，您可以尝试为 cakephp 设置基目录，如下所示：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    # Could be dashboard or cakephp-install
    RewriteBase  /dashboard
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:37:10.867

这应该只是更改您的 .htaccess 以匹配以下内容的情况

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase  wordpress-install-directory/dashboard
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

执行上述操作将告诉 cake 所需的文件位于安装目录/仪表板中。

您还需要对 webroot 和 app .htaccess 进行相同的更改

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T14:14:31.957

从这里的stackoverflow答案：http://stackoverflow.com/questions/2322559/htaccess-wordpress-exclude-folder-from-rewriterule/2350305#2350305添加

```
RewriteCond %{REQUEST_URI} !^/(dashboard|dasboard/.*)$ 
```

在 wordpress 目录上的 .htaccess 文件的最后一个 RewriteRule 之前，它应该可以工作。

# go - 解组 JSON 对象的值

> ID：13889745
> 
> 赞同：4
> 
> 时间：2012-12-15T05:51:05.963
> 
> 标签：go, mediawiki, mediawiki-api

如果给定字符串，来自 MediaWiki API 请求：

```
str = ` {
    "query": {
        "pages": {
            "66984": {
                "pageid": 66984,
                "ns": 0,
                "title": "Main Page",
                "touched": "2012-11-23T06:44:22Z",
                "lastrevid": 1347044,
                "counter": "",
                "length": 28,
                "redirect": "",
                "starttimestamp": "2012-12-15T05:21:21Z",
                "edittoken": "bd7d4a61cc4ce6489e68c21259e6e416+\\"
            }
        }
    }
}` 
```

[使用Go 的 json 包](http://golang.org/pkg/encoding/json/)可以做些什么来获取 edittoken （请记住 66984 数字会不断变化）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T06:17:31.747

当您有这样的更改键时，处理它的最佳方法是使用地图。在下面的示例中，我一直使用结构，直到我们到达更改键为止。之后我切换到地图格式。我也链接了一个工作示例。

[http://play.golang.org/p/ny0kyafgYO](http://play.golang.org/p/ny0kyafgYO)

```
package main

import (
    "fmt"
    "encoding/json"
    )

type query struct {
    Query struct {
        Pages map[string]interface{}
    }
}

func main() {
    str := `{"query":{"pages":{"66984":{"pageid":66984,"ns":0,"title":"Main Page","touched":"2012-11-23T06:44:22Z","lastrevid":1347044,"counter":"","length":28,"redirect":"","starttimestamp":"2012-12-15T05:21:21Z","edittoken":"bd7d4a61cc4ce6489e68c21259e6e416+\\"}}}}`

    q := query{}
    err := json.Unmarshal([]byte(str), &q)
    if err!=nil {
        panic(err)
    }
    for _, p := range q.Query.Pages {
        fmt.Printf("edittoken = %s\n", p.(map[string]interface{})["edittoken"].(string))
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T12:59:09.173

请注意，如果您`&indexpageids=true`在 API 请求 URL 中使用参数，则结果将包含一个“pageids”数组，如下所示：

```
str = ` {
    "query": {
        "pageids": [
            "66984"
        ],
        "pages": {
            "66984": {
                "pageid": 66984,
                "ns": 0,
                "title": "Main Page",
                "touched": "2012-11-23T06:44:22Z",
                "lastrevid": 1347044,
                "counter": "",
                "length": 28,
                "redirect": "",
                "starttimestamp": "2012-12-15T05:21:21Z",
                "edittoken": "bd7d4a61cc4ce6489e68c21259e6e416+\\"
            }
        }
    }
}` 
```

因此您可以使用它`pageids[0]`来访问不断变化的数字，这可能会使事情变得更容易。

# c# - 清除表单中的所有控件时出现异常

> ID：13889747
> 
> 赞同：0
> 
> 时间：2012-12-15T05:51:16.410
> 
> 标签：c#, winforms, exception-handling

我的表单中有一些文本框。我编写了休假事件的代码以自动添加 0.00。我编写了将两个文本框值添加到第三个的代码

```
try
{
    decimal netVal = 0;
    decimal.TryParse(txtNetValue.Text, out netVal);
    decimal disc2 = 0;
    decimal.TryParse(txtDisc2.Text, out disc2);
    decimal tax1 = 0;
    decimal.TryParse(txtTax1.Text, out tax1);

    decimal tax = netVal - disc2;
    string strtax = ((tax / 100) * tax1).ToString();
    txtTax2.Text = strtax.Substring(0, strtax.IndexOf(".") + 3);
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

在这种情况下，当我单击新按钮以清除所有控件时，我得到一个例外，即`Index and length must refer to a location within the string. Parameter name: length`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:13:23.667

看起来您的最终目标是将值格式化为金钱。如果是这种情况，那么您可以使用方便的 Decimal.ToString("C")。您可能需要许多其他格式，[请参阅此链接以获取有关格式的更多信息](http://msdn.microsoft.com/en-us/library/26etazsy.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T05:55:24.310

你的问题在这里：

```
strtax.Substring(0, strtax.IndexOf(".") + 3); 
```

我不相信[Substring](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)做你认为它做的事情。参数不是“startIndex”和“endIndex”（Beginning 和 End），它们是“startIndex”和“Length”（*子字符串的开始和长度*）。最有可能的是，这种混淆导致您尝试获取大于字符串大小的子字符串。

例如，您说*我想要 "Test" 的最后 10 个字符*。“测试”只有四个字符，因此尝试获取“最后十个”将导致该错误。

# php - 表单未发送，不推荐使用函数 eregi()

> ID：13889749
> 
> 赞同：0
> 
> 时间：2012-12-15T05:51:35.443
> 
> 标签：php, forms, send, deprecated, eregi

> **可能重复：**
> [如何在 PHP 中将 ereg 表达式转换为 preg？](https://stackoverflow.com/questions/6270004/how-can-i-convert-ereg-expressions-to-preg-in-php)
> [在 mail() 中使用的转义字符串](https://stackoverflow.com/questions/8071916/escape-string-to-use-in-mail)

我正在尝试发送我的表格，但我收到此错误...

> 已弃用：函数 eregi() 已弃用

我尝试用 preg_match() 替换它，但没有运气。这是我的代码：

```
$all_valid = $name_valid = $email_valid = $comments_valid = true;

if (isset($_POST['submit'])) {  

    if ($_POST['name'] == '') {
        $all_valid = $name_valid = false;
    }

    if ($_POST['comments'] == '') {
        $all_valid = $comments_valid = false;
    }

    if (!$validator->check_email_address($_POST['email'])) {
        $all_valid = $email_valid = false;
    }

    if ($all_valid) {
        //  ####    NO PROBLEMS FOUND - PROCESS THE FORM DATA HERE
        $mail_to = 'cat30@hotmail.com'; //  recipient address
        $subject = "Email from website";    //  email message subject line
        $name = mysql_real_escape_string(trim($_POST['name'])); //  sanitize the name
        if (eregi("\r",$name) || eregi("\n",$name)){    //  avoid email header injection
            die();
        }
        $mail_from = mysql_real_escape_string(trim($_POST['email']));   //  sanitize their email address
        if (eregi("\r",$mail_from) || eregi("\n",$mail_from)){  //  avoid email header injection
            die();
        }
        $comments = htmlspecialchars(trim($_POST['comments'])); //  convert HTML characters into entities

        $headers = 'From: '. $mail_from. "\r\n";
        mail($mail_to, $subject, $comments, $headers);

        $response = '<h2>Thanks for contacting us, will get back to you soon</h2>';
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:06:40.540

它返回的值与 eregi 略有不同，但如果我正确阅读了您的代码，您应该能够使用 strpos() 函数来确定字符串中是否存在子字符串。Eregi 忽略大小写，因此您可能还必须将其与 strtolower($string) 调用结合使用。

像这样： if (strpos("\r",strtolower($name)) || strpos("\n",strtolower($name)))

# java - 将目标 GC 堆从 55.234MB 限制到 48.000MB 是什么意思？

> ID：13889750
> 
> 赞同：6
> 
> 时间：2012-12-15T05:51:39.080
> 
> 标签：java, android, garbage-collection, heap-memory

我在一个列表视图中使用 ImageLoader 来显示来自 URL 的图像。滚动列表时，应用程序没有响应。我检查了 logcat 并得到了这个日志报告[http://pastebin.com/Zfsk7r9X](http://pastebin.com/Zfsk7r9X)。在此日志中，显示了“将目标 GC 堆从 55.234MB 固定到 48.00MB”。我怎样才能避免这个内存问题。我已经在 ImageLoader 类中完成了 System.GC() 。我使用的 decodeFile() 如下所示

```
// decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f) {
    try {

        // decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f), null, o);

        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 70;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 2 < REQUIRED_SIZE
                    || height_tmp / 2 < REQUIRED_SIZE)
                break;
            width_tmp /= 2;
            height_tmp /= 2;
            scale *= 2;
        }

        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize = scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T06:36:00.827

消息“Clamp target GC heap”由 VM 在绝望时记录，堆分配失败，尝试后堆返回到以前的理想限制。从`setIdealFootprint`HeapSource.cpp 的文档中：

```
/*
 * Sets the maximum number of bytes that the heap source is allowed
 * to allocate from the system.  Clamps to the appropriate maximum
 * value.
 */ 
```

# javascript - 如何在文档不可见区域对齐 HTML 页脚

> ID：13889754
> 
> 赞同：0
> 
> 时间：2012-12-15T05:52:08.190
> 
> 标签：javascript, jquery, html, xhtml

我现在正在开发一个基于 Flash 的响应式网站。现在我的客户想在这个网站上添加一个 html 页脚，并告诉我做一些事情，当页面加载时，页脚应该位于文档的不可见区域，但是当任何人向下滚动时，他/她会看到页脚。我的客户告诉我，这也应该是响应式的，它可以在任何屏幕尺寸上工作。任何机构有任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:17:50.600

我没有测试它的跨浏览器兼容性，但在 Firefox 上它可以工作。这只是一个概念证明，我不确定您是否可以在不破坏所有内容的情况下修改现有网站，但至少并非不可能。（对于 IE：你可能必须添加一个 doctype 声明来强制它进入标准模式）。

小提琴：http: [//jsfiddle.net/QkX32/](http://jsfiddle.net/QkX32/)

HTML：

```
<body>
     <div id="wrapper">
         <div id="mainPage"></div>
         <div id="footer"></div>
     </div>                
</body> 
```

CSS：

```
body{
    margin:0;
    padding:0;
}   

#mainPage{
    background-color:red;
    position: absolute;
    top: 0;
    bottom:0;
    left:0;
    right:0;    
}

#footer{
    background-color: blue;
    height: 20px;
    position: absolute;
    bottom: -20px;  
    width: 100%;    
}

#wrapper{
    position: absolute;
    top:0;
    bottom:0;
    left:0;
    right:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:18:40.383

您可以`scrollHeight`在页面加载后使用（`.load`）将 div 定位为参数的值`absolute`并将`.scrollHeight`其用作`top`参数的值。这是使用 jQuery 完成的，但您可以使用纯 javascript 实现相同的结果。例如

```
 function getheight(){
    var myheight = document.body.scrollHeight;
 }
 $(document).load(getheight(); #mydiv.css('top', myheight)); 
```

并在 css 中使用 % 值来获得一个液体盒：

```
#mydiv{
  position: absolute;
  width: 90%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T06:21:58.147

您需要测试（文档 - 页脚）是否小于窗口（即至少部分页脚可见），如果是，则将页脚绝对放置在窗口下方

```
if (($(document).height()-$("footer").height())<$(window).height()){
$("footer").css({
"position":"absolute",
"top":$(window).height();
});
} 
```

# ruby-on-rails - 如何根据用户属性限制rails中的路线？

> ID：13889756
> 
> 赞同：0
> 
> 时间：2012-12-15T05:52:33.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我想将特定路线限制为仅“current_user.account_level ==“1””

到目前为止，我有这个，但我无法弄清楚约束部分：

`resources :users, :only => [:show, :index], :constraints => {}`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:57:53.193

我认为，以下将起作用。

```
match '/:id' => 'users#show', :constraints => { :account_level=>'1' } 
match '/' => 'users#index', :constraints => { :account_level=>'1' }
resources :users 
```

在**约束**部分，我们可以给出正则表达式。
例如： `resources :users, :only => [:show, :index], :constraints => { ::account_level => /\1/ }`
否则根据**current_user**给出用户控制器内部的条件。

```
if current_user.account_level == "1"
   ---code---
else
   ---code---
end 
```

# iphone - iPad 视图没有覆盖全屏？

> ID：13889758
> 
> 赞同：1
> 
> 时间：2012-12-15T05:52:57.223
> 
> 标签：iphone, ios, xcode, ipad, cocoa-touch

我通过添加 iPad.XIB 并在源代码编辑器模式下将 IBCocoaTouchFramework 替换为 IBIPadFramework，将我开发的 xib 转换为 iPad 特定的 xib。仍然我的视图没有覆盖全屏，视图周围有很多空白空间，并且这些视图分辨率也不好，除了我上面提到的之外，我还需要做任何额外的事情吗？

编辑：

我已经为 iPad 创建了新项目，它工作正常，如果我在我的旧项目（iPhone）中为 iPad 添加新的 xib 它不起作用，有什么与我们需要更改的项目相关的吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T05:34:14.487

如果出现小视图，我假设您的应用程序不支持 ipad 平台，即它不是通用应用程序。创建新的通用应用程序并在其中添加所有视图控制器类和 xib。– 王子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T05:58:56.463

您应该首先使用以下代码检查设备，现在您创建两个具有相同类的 xib，一个用于 ipad，第二个用于 iphone，并加载设备明智的..

```
 if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) 
     {
         //iphone
     }
     else
     {
         //ipad
     } 
```

**例如**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

 if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) 
    {

        masterViewController = [[cntrMasterViewController alloc] initWithNibName:@"cntrMasterViewController_iPhone" bundle:nil];
        self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];
        // loadingView =[LoadingView loadingViewInView:masterViewController.view:@"Please Wait.."];
        //masterViewController.view.userInteractionEnabled=NO;

        [self.window makeKeyAndVisible];
         self.window.rootViewController = self.navigationController;
        [self.window addSubview:self.navigationController.view];

        } 
    else 
    {
        cntrMasterViewController *masterViewController = [[[cntrMasterViewController alloc] initWithNibName:@"cntrMasterViewController_iPad" bundle:nil] autorelease];
        self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

        UIViewController *viewController1 = [[cntrMasterViewController alloc] initWithNibName:@"cntrMasterViewController_iPad" bundle:nil];

          [self.window makeKeyAndVisible];
          self.window.rootViewController = self.navigationController;
        [self.window addSubview:self.viewController1.view];

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T06:06:38.240

您必须再次设置视图的子视图框架，以使它们看起来适合 iPad 屏幕。在 iPad 的 xib 或编程中执行此操作，使用 nitin 的方法根据您正在使用的设备加载视图

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T08:30:59.663

只需检查您输入的`xib`名称是否正确

```
yourViewController = [[yourViewController alloc] initWithNibName:@"yourIpadNibName" bundle:nil]; 
```

只专注于`yourIpadNibName`

# r - 任意对象作为格函数的参数

> ID：13889762
> 
> 赞同：0
> 
> 时间：2012-12-15T05:53:11.843
> 
> 标签：r, lattice

我不明白如何在某些格子图中处理存储在 data.frame 中的对象。在第二个图中，我得到下面的错误消息。有可能让它工作吗？

```
require(lattice)
require(latticeExtra)
data<-data.frame(a=I(list(1,2,3)),b=factor(1:3))
ecdfplot(~a|b,data=data
             ,layout=c(1,3)              
             ,panel=function(x,...){
                print(x[[1]])
                panel.xyplot(x[[1]],.5,col=2)
              }
         )
 data<-data.frame(a=I(list(diag(1,2,2),diag(1,2,2),diag(1,2,2))),b=factor(1:3))
 ecdfplot(~a|b,data=data
         ,layout=c(1,3)              
         ,panel=function(x,...){
            print(x[[1]][1,1])
            panel.xyplot(x[[1]][1,1],.5,col=2)
          }
     )

Error in prepanel.default.function(darg = list(give.Rkern = FALSE, n = 50,  : 
 (list) object cannot be coerced to type 'double' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:22:23.237

转换`x`为数字更正问题

```
 x <- x[[1]]
    panel.xyplot(as.numeric(x),.5,col=2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:47:05.140

来自`?ecdfplot`：

> 对于“公式”方法，x 是描述条件图形式的公式，并且必须为 ~x 形式，其中 x 假定为数字向量。

如果`x`（在您的情况下，变量`a`）不是数字，它会`as.numeric`在绘制过程中的许多点被强制执行。其中之一是在`prepanel`函数中。

在您的第一个`data`对象中，`data$a`可以将其强制转换为数字（双精度）向量而不会出错。在您的第二个`data`对象中，`data$a`无法成功强制。

```
> as.numeric(data$a)
Error: (list) object cannot be coerced to type 'double' 
```

即使您指定了`panel`应该工作的函数，该`prepanel`函数也会引发错误。

* * *

**澄清后**更新：****

 **有一种方法可以将任意对象传递给面板函数，这是通过通过 的省略号传递参数来完成的`ecdfplot`。参数的命名方式必须与普通格函数中的任何命名参数都不匹配（最好避免使用面板函数中的任何命名参数）。`x`此外， in的公式参数`ecdfplot`还必须表示`ecdfplot`函数可以处理的数据，即不是列表，如上所述。

在下面的示例中，我将 data.frame`data4`两次传递给 plot 函数：一次作为参数`data`，一次通过省略号作为参数`plotData`。这会将整个 data.frame 传递给面板函数，因此也有必要将 传递`subscripts`给面板函数，以便可以为适当的数据下标。

```
# New example data
data4 <- data.frame(a = 0:2, b = factor(1:3),
  forPrint = letters[1:3],
  forXyplot = I(list(list(x = seq(0, 1, .25), y = rev(seq(0, 1, .25))),
  list(x = seq(0, 1, .5), y = rev(seq(0, 1, .5))), list(x = seq(0, 1, .2),
  y = rev(seq(0, 1, .2))))))

> data4
  a b forPrint    forXyplot
1 0 1        a c(0, 0.2....
2 1 2        b c(0, 0.5....
3 2 3        c c(0, 0.2....

ecdfplot(~ a|b, data = data4
         ,layout=c(1,3)              
         ,panel=function(x, subscripts = subscripts, ...){
            # plotData is passed to the panel function via the ellipses,
            # so extract those arguments vial match.call
            args <- match.call(expand.dots = FALSE)$...
            # Print the column forPrint
            print(args$plotData$forPrint[subscripts])
            # Plot the forXyplot column using do.call, since the column is
            # a list with x and y items.
            do.call(panel.xyplot, c(args$plotData[subscripts, "forXyplot"][[1]],
              col=2))
          }
          ,plotData = data4
     ) 
```

您会从图中注意到，x 轴范围覆盖`a`并超出了绘制值的范围。当然，可以通过使用自定义预面板功能来纠正此问题。**

# vim - Where can i find the plugin which opens the file under cursor in Vim

> ID：13889763
> 
> 赞同：-4
> 
> 时间：2012-12-15T05:53:13.687
> 
> 标签：vim, plugins

I am referring to this particular plugin [http://vim.wikia.com/wiki/Open_file_under_cursor](http://vim.wikia.com/wiki/Open_file_under_cursor)

I tried searching in vim site but i am not able to find it. Googled a lot as well , but no luck.

Can anyone point me to the correct link?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T05:56:07.073

这不是插件。这种行为是内置在 vim 中的。只需将光标放在文件名上并键入`gf`.

如果当前文件有未保存的更改，您将在窗口底部看到一条错误说明，并且该文件将无法打开。同样，如果文件不存在。

# vsto - Working on a subproject without first opening it

> ID：13889764
> 
> 赞同：1
> 
> 时间：2012-12-15T05:53:19.857
> 
> 标签：vsto, ms-office, ms-project

I have a ".mpp" file that has a master project and sub-projects. I want to be able to modify and read the sub-projects, without having to call "FileOpen" for each sub-project.

I see that `Globals.ThisAddin.Application.ActiveProject` has a `SubProjects` collection, but each element seems to be of type sub-project.

The problem with `FileOpen` is that it visually pops up a new instance of Microsoft Project.

Basically, is it possible to call `FileOpen` (*or any other similar method*) without visually showing a new instance of Microsoft Project?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:44:54.917

找到了解决方案（但它仅适用于 Office 2010 及更高版本）。

基本上，Globals.ThisAddin.Application.Subprojects[index].SourceProject 将返回对您可以像普通项目一样使用的子项目的引用。

# sql - Simple SQL query too long

> ID：13889768
> 
> 赞同：1
> 
> 时间：2012-12-15T05:54:01.300
> 
> 标签：sql, oracle, sql-server-2008

I just have a simple query. On SQL Server 2008, sometimes it queries too long, nearly hang, sometimes not. The same sql on Oracle server, it always return at once.

```
SELECT D.DESCITEM, D.LONGDESC, D.DESCTABL, D.DESCCOY, D.DESCPFX 
FROM VM1DTA.DESCPF D, VM1DTA.ITEMPF I 
WHERE D.DESCPFX='IT'AND D.DESCITEM=I.ITEMITEM AND I.VALIDFLAG='1' 
AND D.DESCTABL = I.ITEMTABL AND D.DESCCOY = I.ITEMCOY AND "LANGUAGE" =  'E' 
AND "VALIDFLAG" =  '1' AND DESCTABL IN('T1680') 
ORDER BY LONGDESC ASC; 
```

Each table has about 100k records.

Could someone point me about the root cause? Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:53:51.627

我不确定问题是什么，但您的查询可以使用一些重构。这条线看起来也不需要，`"VALIDFLAG" = '1'`因为它没有前缀。`IN`可能与它有关。

```
SELECT D.DESCITEM, D.LONGDESC, D.DESCTABL, D.DESCCOY, D.DESCPFX 
FROM
VM1DTA.DESCPF D INNER JOIN VM1DTA.ITEMPF I ON
D.DESCITEM=I.ITEMITEM
AND
D.DESCTABL = I.ITEMTABL
AND
D.DESCCOY = I.ITEMCOY
WHERE 
D.DESCPFX='IT'
AND
"LANGUAGE" =  'E' 
AND 
I.VALIDFLAG='1' 
AND
"VALIDFLAG" =  '1' 
AND 
I.DESCTABL = 'T1680'
ORDER BY 
LONGDESC ASC; 
```

要查看的另一件事是将索引放在所有连接列上。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:02:50.667

我发现通过自由文本字段连接两个表会占用大量资源和时间。此外，这些字段传统上无论如何都不会被索引。

尝试查看是否有任何值得使用的索引或其他连接。

`I.ITEMTABL`此外，您不需要加入该字段，因为该`D.DESCTBL`字段有一个过滤器，使处理器可以更多地工作以加入两者，除非它是一个索引。

另一种方法是在 where 子句中使用子查询，例如：

```
SELECT D.DESCITEM, D.LONGDESC, D.DESCTABL, D.DESCCOY, D.DESCPFX
FROM   VM1DTA.DESCPF D
WHERE  D.DESCPFX = 'IT'
       AND D.LANGUAGE = 'E' 
       AND D.VALIDFLAG = '1' 
       AND D.DESCTABL = 'T1680'
       AND EXISTS (SELECT NULL
                   FROM   VM1DTA.ITEMPF I
                   WHERE  I.VALIDFLAG = '1' 
                          AND I.ITEMTBL = 'T1680'
                          AND D.DESCITEM = I.ITEMITEM 
                          AND D.DESCCOY = I.ITEMCOY)
ORDER BY LONGDESC ASC; 
```

# ruby-on-rails - Simplecov 覆盖率报告似乎遗漏了某些内容

> ID：13889772
> 
> 赞同：8
> 
> 时间：2012-12-15T05:54:44.600
> 
> 标签：ruby-on-rails, ruby, rspec, code-coverage

就在对 simplecov 如何确定一条线是否已通过测试进行了一些澄清之后。

我有以下方法：

```
def over?
  end_at < Time.zone.now
end 
```

其中 end_at 是对象的 ActiveRecord 属性。

在以下规范中执行：

```
describe CalendarEntry do
  it 'can determine that an event has ended' do
    @entry.end_at = 1.day.ago
    @entry.over?.should be_true
  end
end 
```

运行覆盖率的规范后，它显示以下结果：

![覆盖率报告](../Images/587c9fde831ca7532ddec66ef7e23660.png)

我已经在调试模式下运行了测试，并在此行设置了一个断点，并确认规范确实达到了它。

这并不仅仅局限于此方法中的这一行，包括使用 ActiveRecord 关联的 getter 的每一行都显示为未涵盖。可能是巧合，但似乎有点奇怪。

环境：ruby 1.9.3-p327 (mri)、rails 3.2.8、simplecov 0.7.1、rspec 2.10.0。

关于为什么 simplecov 认为它没有被涵盖的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:14:51.263

好的，所以我添加了与在 Windows 上运行的 JRuby 相同的问题。答案实际上是提示给我的，Simplecov 如果不在调试模式下运行，可能会错过一些行。

```
(j)ruby --debug -S rspec spec 
```

使用 --debug 选项，它确实有效，我按预期恢复了 100% 的覆盖率。

# wso2 - 比较 BPEL 流程中的多个费率 - WSO2

> ID：13889776
> 
> 赞同：2
> 
> 时间：2012-12-15T05:56:13.687
> 
> 标签：wso2, wso2esb, bpel, apache-ode

我们已经使用 Apache ODE / WSO2 BPS 实现了一个 BPEL 流程（它涵盖了整个订单流程，因此我们有长时间运行的流程）。

我们正在从六家供应商处获取一些产品的价格，响应格式已经统一，每个响应包含 5-10 个产品。以下是一些示例响应：

**供应商 1 的回应：**

```
<Products Vendor="1stVendor">
<Product>
    <Brand>Sony</Brand>
    <Model>M5<Model> 
    <Price>800.00<Price>
<Product>
<Product>
    <Brand>Dell</Brand>
    <Model>B6<Model> 
    <Price>900.00<Price>
<Product> 
```

**供应商 2 的回应：**

```
<Products Vendor="2ndVendor">
<Product>
    <Brand>Sony</Brand>
    <Model>M5<Model> 
    <Price>720.00<Price>
<Product>
<Product>
    <Brand>Dell</Brand>
    <Model>B6<Model> 
    <Price>950.00<Price>
<Product>
<Product>
    <Brand>IBM</Brand>
    <Model>H9<Model> 
    <Price>940.00<Price>
<Product> 
```

现在我们需要比较每种产品的价格，以找到每种产品的最便宜价格，并返回最佳选项作为最终响应。对于上面的示例，它应该如下所示：

**最后回应：**

```
<Products>
<Product CheapestVendor="2ndVendor">
    <Brand>Sony</Brand>
    <Model>M5<Model> 
    <Price>720.00<Price>
<Product>
<Product CheapestVendor="1stVendor">
    <Brand>Dell</Brand>
    <Model>B6<Model> 
    <Price>900.00<Price>
<Product>
<Product CheapestVendor="2ndVendor">
    <Brand>IBM</Brand>
    <Model>H9<Model> 
    <Price>940.00<Price>
<Product> 
```

关于以上细节：

1-实现这一目标的最佳和最快方法是什么？

2- 使用 Drools 或 WSO2 BRS 之类的规则引擎来比较这些价格是否有意义？如果是，我们应该将所有响应合并到一条消息中并传递给 BRS，还是必须单独发送消息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T04:28:57.280

此处解释了类似的情况[http://wso2.com/library/articles/2011/05/integrate-business-rules-bpel/](http://wso2.com/library/articles/2011/05/integrate-business-rules-bpel/)

谢谢

蒂利尼

# ruby-on-rails - Redmine::activities 我想在活动中显示项目表中所做更改的通知

> ID：13889781
> 
> 赞同：1
> 
> 时间：2012-12-15T05:57:25.643
> 
> 标签：ruby-on-rails, redmine

**Redmine::活动**

我想在活动中显示项目表中所做更改的通知。我怎样才能做到这一点？

由于我是 Rails 和 redmine 的新手，我想解释一下这些活动将如何进入列表？

# php - jQuery/PHP-MySQL 新闻收录器

> ID：13889786
> 
> 赞同：-1
> 
> 时间：2012-12-15T05:57:53.473
> 
> 标签：php, mysql, slider, news-ticker

我一直在寻找垂直文本滑块或垂直新闻代码，就像这个： [http](http://www.tradekey.com/) ://www.tradekey.com/ （在中间滚动最新的买入/卖出报价）

我发现了一些代码，但我仍然不知道如何从一个特定的 MySQL 表中获取数据并随机显示它们。

有人指出我正确的方向或提供我可以找到任何易于配置的新闻自动收报机的任何链接。

UPDATE-171212：好吧，我检查了 ajax 文件夹，有一些文件从 db 获取用户信息。但它总是显示会员资料中的国家信息，忽略“购买/销售线索”信息中提到的内容。它使用 $country，并且在会员资料信息表和购买/销售线索表中都相同。如果我希望它从购买/销售线索中挑选，如果没有提到国家，那么从会员资料中获取国家数据。例如： [http](http://www.tradeglobus.com) ://www.tradeglobus.com （中间是进出口贸易线索）我必须更正这个国家信息问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:05:08.033

查看`setInterval`混合`AJAX`以更新要显示的项目列表。然后查看`Jquery`添加自动收报机效果。

* * *

详细地说，创建一个从数据库中获取项目的文件。然后使用 ajax 请求定期获取该列表。从那里只需要一个 Jquery 插件或等效的插件来显示`ticker`表单中的列表

# android - android in-app 此版本的应用程序未配置为通过 Google Play 计费

> ID：13889790
> 
> 赞同：0
> 
> 时间：2012-12-15T05:59:31.037
> 
> 标签：android, in-app

> **可能重复：**
> [此版本的应用程序未配置为通过 Google Play 计费](https://stackoverflow.com/questions/11068686/this-version-of-the-application-is-not-configured-for-billing-through-google-pla)
> [此版本的应用程序未配置为通过 Google Play 计费](https://stackoverflow.com/questions/13716750/this-version-of-the-application-is-not-configured-for-billing-through-google-pla)

我将我的 apk 上传到`Draft`（昨晚 10:00 pm）和一些应用内产品（），现在我尝试对其进行测试，但它显示此错误，`this version of application is not configer for billing through Google play .`我已经检查过`android:versionCode`apk 是否相同。那么可能有什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:20:39.073

如果您在 android 设备上安装未签名的 apk，`"This version of the application is not configured for billing through Google Play"`则会显示此错误，因此首先从设备上卸载旧应用程序并在设备上重新安装新的已签名 apk，它将解决您的问题。

有关更多信息，请参见下面的链接。

[此版本的应用程序未配置为通过 Google Play 计费](https://stackoverflow.com/questions/11068686/this-version-of-the-application-is-not-configured-for-billing-through-google-pla)

# tcl - 使用 cisco tcl ivr 重定向呼叫

> ID：13889791
> 
> 赞同：1
> 
> 时间：2012-12-15T05:59:40.657
> 
> 标签：tcl, cisco, ivr

我脑子里有这样的场景：

用户呼叫已连接到支持热线，如果支持团队在 30 秒内未接听，呼叫将被转移到另一个号码，即语音信箱。

我尝试了咨询模式但没有成功，因为我得到了不受支持的错误。现在我正在尝试使用腿部设置和呼叫信息的简单推荐场景。

简而言之，我打了一个电话，支持团队已经响起，没有人接听，30 秒过去了，现在我想使用以下命令重定向呼叫：

```
set VoiceMail 7777

set callInfo(alertTime) 40 

set callInfo(originationNum) 83382992 

set callInfo(mode)        "ROTARY"

set callInfo(rerouteMode) "REDIRECT_ROTARY"

leg setup $VoiceMail callInfo leg_incoming 
```

但是在运行时，这会返回一个错误，指出“CallSetup 已经在腿上处于活动状态”

有什么帮助吗？如果我使用“leg disconnect leg_incoming”断开腿，则呼叫关闭（我认为）

谢谢

# detect - iphone：免提手势

> ID：13889793
> 
> 赞同：0
> 
> 时间：2012-12-15T05:59:59.783
> 
> 标签：detect, face-detection, feature-detection, uitapgesturerecognizer, motion-detection

在我的 iPhone 应用程序中，我需要在不触摸视图的情况下识别用户在视图上做出的手势或动作。

我希望能够识别免提手势并在视图中执行功能。

我需要图像应该随着手势检测而移动。

需要做什么？

我如何识别它？

任何方向或教程将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:23:54.887

您可能想看看 OpenCV。这里有一个关于如何使用 OpenCV 识别手的好例子：[http ://www.andol.info/hci/1661.htm](http://www.andol.info/hci/1661.htm)

# c - 一个警告：在 C 中使用 malloc sizeof struct return 从整数中生成指针而不进行强制转换

> ID：13889794
> 
> 赞同：0
> 
> 时间：2012-12-15T06:00:47.490
> 
> 标签：c, pointers, struct, malloc

所以我`warning: return makes pointer from integer without a cast`在尝试创建指向结构的指针时遇到了问题。

结构：

```
typedef struct _book_
{
    char *title;
    char *cat;
    double price;
}Book_T; 
```

代码：

```
Book_T *book;
...
if((book = malloc(sizeof(Book_T))) == NULL) return 1; 
```

该结构在不同的 .h 文件中声明，但我仔细检查了是否包含它。我有点迷失了这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T06:13:41.993

在 shf301 和 Brian 的帮助下回答我自己的问题，问题在于实际的返回类型，与 malloc() 无关。正确的代码类似于：

```
if((book = malloc(sizeof(Book_T))) == NULL) return NULL; 
```

# android - 片段中的Android多行列表视图

> ID：13889795
> 
> 赞同：0
> 
> 时间：2012-12-15T06:01:06.367
> 
> 标签：android, android-layout, android-listview, android-fragments, android-listfragment

我有一个使用片段的选项卡布局的应用程序，在其中一个片段中我想要一个两行/多行列表视图，我一直在关注本[教程](http://tekeye.biz/2012/two-line-lists-in-android)，它显示了一个`ListActivity`. 我已将代码复制到我的片段中，但似乎无法让它工作。我用于片段布局的所有代码和两行代码与上面链接中的代码相同，但我想在其中显示列表的片段的 Java 类除外。

该片段的代码如下：

```
package com.example.shopsellswap;

import java.util.ArrayList;
import java.util.HashMap;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.SimpleAdapter;

public class Fragment_My_Profile extends ListFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View myProfileView = inflater.inflate(R.layout.fragment_my_profile, container, false);

        return myProfileView;
    }

    //ArrayList holds the data (as HashMaps) to load into the ListView
        ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();
        //SimpleAdapter does the work to load the data in to the ListView
        private SimpleAdapter sa;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            //HashMap links each line of data to the correct TextView
            HashMap<String,String> item;
            for(int i=0;i<StatesAndCapitals.length;i++){
              item = new HashMap<String,String>();
              item.put( "line1", StatesAndCapitals[i][0]);
              item.put( "line2", StatesAndCapitals[i][3]);
              list.add( item );
            }

            sa = new SimpleAdapter(Fragment_My_Profile.this, list,
                    R.layout.my_two_lines,
                    new String[] { "line1","line2" },
                    new int[] {R.id.line_a, R.id.line_b});

            setListAdapter(sa);
        }

        private String[][] StatesAndCapitals =
            {{"Alabama","Montgomery"},
            {"Alaska","Juneau"},
            {"Arizona","Phoenix"},
            {"Arkansas","Little Rock"},
            {"California","Sacramento"}}; 
```

给我错误的部分是

```
 sa = new SimpleAdapter(Fragment_My_Profile.this, list,
                R.layout.my_two_lines,
                new String[] { "line1","line2" },
                new int[] {R.id.line_a, R.id.line_b});

        setListAdapter(sa); 
```

具体错误是：

```
The constructor SimpleAdapter(Fragment_My_Profile, ArrayList<HashMap<String,String>>, int, String[], int[]) is undefined 
```

奇怪的是当我更改`ListFragment`为`ListActivity`错误不再存在时

为什么它不起作用，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:04:44.423

ListFragment 不是 Context 的子类，而 ListActivity 是。您必须将某种类型的 Context 传递给此构造函数。例如，假设您的 Activity（或 FragmentActivity）类名为`MainActivity`：

```
sa = new SimpleAdapter(MainActivity.this, list, ... 
```

* * *

根据您创建此片段的时间可能无法正常工作，因此您可以将所有代码移入`onCreate()`该`onActivityCreated()`方法并使用：

```
sa = new SimpleAdapter(getActivity(), list, ... 
```

# linux - 如何确定某个文件中的每一行是否相同？

> ID：13889800
> 
> 赞同：0
> 
> 时间：2012-12-15T06:01:28.677
> 
> 标签：linux, bash

我有一个文件：

```
$ cat myFile
fang
fang
fung
fang 
```

如何使用 bash 快速确定某个文件中的每一行是否相同？我希望我能找到不同的行号，例如，当 apply to 时`myFile`，我希望输出可以是 3（行号）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T06:05:32.373

```
$uniq -u file1

$uniq -u file2
fung

$grep -n $(uniq -u file2) file2
3:fung 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:10:02.600

```
{
    line=1
    read a
    while read b; do
        ((line++))
        if [[ $b != $a ]]; then
            echo $line
            break
        fi
    done
} < file2 
```

优点：将匹配`fung`. 缺点：不匹配.`fang fang fung fung`
`fang``fang fung fung fung`

# c++ - 有没有一种特殊的方法可以从桌面上删除快捷方式？

> ID：13889801
> 
> 赞同：5
> 
> 时间：2012-12-15T06:01:35.370
> 
> 标签：c++, windows, winapi, desktop-application, shortcut

我使用类似于[本页](http://devmaster.net/forums/topic/5954-how-do-i-create-desktop-shortcuts-from-c/)底部描述的代码的 IShellLink 接口在桌面上创建了一个快捷方式 (.lnk) 文件。

所以我的假设是，要删除这个快捷方式，我可以简单地在 .lnk 文件上调用[DeleteFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363915%28v=vs.85%29.aspx)，但显然这还不够……如果我这样做，我会得到如下所示的快捷方式文件的残余：

![在此处输入图像描述](../Images/209faa944193d4908620a6720f177d4b.png)

但有趣的是，如果我浏览桌面文件夹中的文件，比如使用 Windows 资源管理器，.lnk 文件实际上并不存在。我看到的是桌面 GUI 表面上的一些工件。

知道如何删除快捷方式（微软希望它完成的方式吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T20:17:30.957

好的，根据上面的建议，这是之后需要调用以刷新 shell 的 API：

```
SHChangeNotify(SHCNE_DELETE, SHCNF_PATH | SHCNF_FLUSHNOWAIT, pDeletedFilePath, NULL); 
```

# d - 模板模板参数

> ID：13889802
> 
> 赞同：3
> 
> 时间：2012-12-15T06:01:36.577
> 
> 标签：d

D是否支持模板模板参数？我将如何使以下工作？

```
struct Type(alias a, alias b) { alias a A; alias b B; }

template MakeType(alias a, alias b)
{
  alias Type!(a, b) MakeType;
}

template Foo(alias a, U) // where U is a Type
{
  //...
}

template Foo(alias a, U : MakeType!(a, b), b...)  // where U is a specialization
{
  //...
} 
```

并且`Foo`应该这样称呼：

```
alias MakeType!(5, 7) MyType;
alias Foo!(5, MyType) Fooed;  // error 
```

`Error: template instance Foo!(5,Type!(5,7)) Foo!(5,Type!(5,7)) does not match template declaration Foo(alias a,U : MakeType!(a,b),b...)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T19:26:14.663

我让它工作了:-)

```
template Foo(alias a, U) // where U is a Type
{
  //...
}
template Foo(alias a, U : X, X) if(is(X == MakeType!(a, U.B)))
{
  //...
} 
```

并在使用中：

```
alias MakeType!(1, 3) MyType1;
alias MakeType!(5, 7) MyType2;
Foo!(5, MyType1) // calls the first Foo()
Foo!(5, MyType2) // calls the second Foo() with specialization 
```

# c++ - Qt4：ActionX 添加到多个小部件。如何确定哪个小部件触发了 on_actionX_triggered() 插槽中的操作

> ID：13889806
> 
> 赞同：1
> 
> 时间：2012-12-15T06:02:07.730
> 
> 标签：c++, qt, qt4

我在我的中有一个`actionX`定义，`MainWindow`并且我已将此操作添加到一些`treewidgets`.

在`MainWindow::on_actionX_triggered()`插槽中，我如何才能确定哪个树小部件触发了该操作？

我尝试了以下方法，但运气不佳：

```
 void MainWindow::on_actionX_triggered()
    {
       qDebug()<<sender();  //outputs: QAction(0xe957dd8) 
       qDebug()<<sender()->parent(); //outputs: MainWindow(0x28fdfc, name = "MainWindow")
       qDebug()<<this->parent(); //outputs: QObject(0x0)  
    } 
```

**（2013 年 1 月 27 日）编辑：**对不起，但我觉得有必要提出**这个**问题，看看是否有人可以提供解决方案......谢谢。

# java - 使用 mysql 为每个实例获取唯一的最大 id

> ID：13889807
> 
> 赞同：-1
> 
> 时间：2012-12-15T06:02:38.137
> 
> 标签：java, mysql

我正在使用带有前缀 + 自动增量 ID 的字段。对于每个实例，我都采用 ID 的 max+1 并将其添加到前缀中。任何人都可以建议我一种让这个独一无二的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:20:52.973

使用 max(id)+1 的问题是可能有多个线程进行相同的调用，因此结果不会是唯一的。有几种方法可以解决这个问题。第一种是使用序列，每次请求新的 id 时，数据库服务器都会增加数字。您可以使用包含数字的表格，但您必须在更新数字时锁定表格。或者您可以允许数据库在插入表时为您创建密钥，并在插入后检索密钥。都是有效的。

我更喜欢使用 Hibernate 并让它决定如何为我当前使用的数据库实现 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:16:48.873

你可以试试这个：

```
Insert into table1 (id, user_id)
SELECT MAX(id)+1, CONCAT('a',CAST(MAX(id)+1 AS char))
FROM table1; 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/ca8c1/1)

# c# - 如何将列表中的一项复制到 LINQ 中的对象中？

> ID：13889812
> 
> 赞同：-2
> 
> 时间：2012-12-15T06:02:54.873
> 
> 标签：c#, linq

我有一个这样的列表：

```
List<object> myList=new List<object>();
myLists items:
 obj1 
 obj2 
 obj3 
```

并上课：

```
Class MyClass
{
   public object cObj1{get;set;}
   public object cObj2{get;set;}
   public object cObj3{get;set;}
} 
```

现在我需要将 myList 复制到 MyClass 的对象中：

```
 myClass.cObj1=myList[0];
 myClass.cObj2=myList[1];
 myClass.cObj3=myList[2]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T03:00:14.580

你可以试试这个：

```
 MyClass s = new MyClass();
        int j = 0;
        s.GetType().GetProperties().ToList().ForEach(x => { x.SetValue(s, mylist[j++], null); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:21:53.467

如果您可以区分列表项：

```
var result = new MyClass(){
    cObj1 = myList.Where(item=> item.SomeProprty == someValue).FirstOrDefault()
   ,cObj2 = myList.Where(item=> item.SomeProprty == someValue).FirstOrDefault()
   ,cObj3 = myList.Where(item=> item.SomeProprty == someValue).FirstOrDefault()
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T17:41:51.873

```
MyClass s = new MyClass();           
PropertyInfo[] p = s.GetType().GetProperties();
int i=0;
foreach (PropertyInfo prop in p)
{
    prop.SetValue(s, mylist[i++], null); 
} 
```

当您无法区分项目并且不知道列表中有多少项目时，您可以通过这种方式实现。

以下代码段不起作用

```
var v = p.Select(obj=> { obj.SetValue(s, mylist[i], null); i++; }); 
```

你可以参考[这个](https://stackoverflow.com/questions/4629650/why-does-the-ienumerablet-select-works-in-1-of-2-cases-can-not-be-inferred)。

# jquery - 触发事件时，jquery animate 事件会自动关闭

> ID：13889815
> 
> 赞同：0
> 
> 时间：2012-12-15T06:03:09.977
> 
> 标签：jquery, jquery-ui, drupal, jquery-animate

我有一个 drupal 6.x 站点并且 jquery 有问题。

```
$(document).ready(function() {
    $('#fbToggle').click(function() {
        if ($('#feedback .title').is(":#780F2C")) {
            $('#feedback').css({
                'padding': '50px 50px 0',
                'left': '100px'
            });
            $('#feedback .title').css({
                'background-color': '#393939'
            });
        } else {
            $('#feedback').css({
                'padding': '0',
                'left': '150px'
            });
            $('#feedback .title').css({
                'background-color': '#780F2C'
            });
        }
        $('#fbInner').animate({
            display: 'toggle',
            height: 'toggle'
        }, 300, function() {
            // Animation complete.
        });
    });
}); 
```

我在 div 的点击事件上有一个动画效果触发器，但是当动画完成时，它会关闭而不是保持打开状态；一键切换显示无 -> 阻止 -> 无。

我在 JSFiddle [http://jsfiddle.net/N3wkT/7/上有所有代码（HTML、CSS、脚本）](http://jsfiddle.net/N3wkT/7/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:10:17.177

`display`属性是不可动画的，因此 div 的高度会增加，并且在动画结束时，显示会从块变为无。从动画中删除显示解决了这个问题。

[http://jsfiddle.net/N3wkT/8/](http://jsfiddle.net/N3wkT/8/)

也更好地`slideDown`用于滑动效果

# javascript - 单击缩略图 > 查看下一个缩略图（循环）

> ID：13889817
> 
> 赞同：1
> 
> 时间：2012-12-15T06:03:34.473
> 
> 标签：javascript, jquery

我对 jquery 和 javascript 都很陌生，并尝试学习。我有一个显示许多不同缩略图的站点，现在我希望可以单击缩略图以查看下一个缩略图，并且当没有更多与该元素关联的缩略图时，第一个缩略图将再次显示（循环）。

我还希望缩略图在点击时加载，而不是在访问者进入页面的同时加载（因为这样可以有很多与所有元素关联的缩略图一次加载）。

所以基本上我想更改 img src 并在访问者单击缩略图时加载下一个缩略图，我不知道如何正确编写此代码。

对不起，一些不正确的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:06:25.150

最好使用现有的完整解决方案。

尝试搜索“图像滑块”。

[http://www.google.com/search?q=image%20slider](http://www.google.com/search?q=image%20slider)

# ios - 触摸 UITableView 中的一行时更改 UINavigationBar 中的标题

> ID：13889818
> 
> 赞同：0
> 
> 时间：2012-12-15T06:03:46.630
> 
> 标签：ios, uinavigationbar

好的，所以我尝试了很多不同的方法......

目前我已经把`UINavigationBar`IB 放在了一起。然后用`IBOutlet`.

无论我尝试什么，从那里我似乎都无法更改标题。即使只是在`ViewDidLoad`.

另外，我不需要分配导航栏的代表吗？

这是我的代码：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController < UITableViewDataSource, UITableViewDelegate>
{
    NSArray *myArrayOne;
    NSArray *myArrayTwo;
    UITextView *myTextView;
    UINavigationBar *myNavBar;   
}

@property (nonatomic, retain) NSArray *myArrayOne;
@property (nonatomic, retain) NSArray *myArrayTwo;
@property (nonatomic, retain) IBOutlet UITextView *myTextView;
@property (nonatomic, retain) IBOutlet UINavigationBar *myNavBar;

@end 
```

和：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

//Synthesising anything with a property call in the .h file.
@synthesize myArrayOne;
@synthesize myArrayTwo;
@synthesize myTextView;
@synthesize myNavBar;

- (void)viewDidLoad
{
    //declaring and instantiating datapaths and also
    // reading into arrays from plist.
    NSString *datapath1 = [[NSBundle mainBundle] pathForResource:@"myListOne" ofType:@"plist"];
    NSString *datapath2 = [[NSBundle mainBundle] pathForResource:@"myListTwo" ofType:@"plist"];

    myArrayOne = [[NSArray alloc] initWithContentsOfFile:datapath1];
    myArrayTwo = [[NSArray alloc] initWithContentsOfFile:datapath2];
    self.navigationItem.title = @"Hi";
    [super viewDidLoad];
}

#pragma mark - TableView Delegate stuff

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //myNavBar.title = [myArrayOne objectAtIndex:indexPath.row];

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
}

#pragma mark - TableView Datasource stuff

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    //returns amount of items inside myArrayOne as amount of rows
    return [myArrayOne count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *myCell = nil;
    myCell = [tableView dequeueReusableCellWithIdentifier:@"myReuseCell"];

    if (myCell == nil)
    {
        myCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"myReuseCell"];
    }

    myCell.textLabel.text = [myArrayOne objectAtIndex:indexPath.row];

    return myCell;
}

@end 
```

更改标题的实际代码只是我尝试过的一种方法......

还有什么办法吗？我需要将 IB 中的导航栏与任何东西链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:01:13.353

如果您有一个没有导航控制器的导航栏，则必须给它一个堆栈（在您的情况下是一个堆栈）导航项。

在`viewDidLoad`视图控制器中，将视图控制器的导航项添加到堆栈中：

```
self.myNavBar.items = @[self.navigationItem]; 
```

现在您可以像这样设置标题：

```
self.navigationItem.title = @"Hello"; 
```

它会出现在您的导航栏中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-12T20:44:24.973

jrturton 上面的解决方案可以正常工作，除非您在 UINavigationBar 中还有一个 UIBarButtonItem（例如“完成”按钮）。在这种情况下，建议的解决方案会导致 UIBarButtonItem 消失。

以下是如何以一种让您更改 UINavigationBar 标题但也保留 UIBarButtonItem 的方式进行操作：

添加`IBOutlet UINavigationItem *myNavigationItem;`到您的代码中。

在 IB 中，在大纲视图（不是故事板视图）中，右键单击包含 UIViewController 并拖动到由 IB 在 UINavigationBar 内自动创建的 UINavigationItem 并连接到`myNavigationItem`.

回到您的代码中，添加`self.myNavigationItem.title = @"Hello";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T06:36:09.013

我认为你需要一个 navigationController 而不是你为什么不检查这个链接：

[在objective-C中以编程方式为tableView创建导航栏](https://stackoverflow.com/questions/11537069/create-navigation-bar-for-tableview-programmatically-in-objective-c)

如果您的应用程序委托中已经有一个导航控制器，那么您应该删除您创建的 IBoutlet 然后使用：

```
self.navigationItem.title = @"Hi"; 
```

因为这将在您的应用程序委托中引用 navigationController。

# apache - 子文件夹中的 wamp .htaccess

> ID：13889821
> 
> 赞同：1
> 
> 时间：2012-12-15T06:03:55.697
> 
> 标签：apache, .htaccess

如何在 wampserver 中设置 .htaccess？

我有这个作为文件结构 - www

-> 我的页面

--> 意见

--> .....

我想将 localhost/mypage/views/user/index.php?page=register 的 url 重写为 localhost/mypage/register

我已经能够做到这一点。但前提是我把它放在 Wamp 的 www 文件夹中。我不想把它放在 www 的根目录下。我想把它放在我的 mypage 文件夹中。

这是我使用的重写规则。

```
RewriteEngine On
RewriteRule ^woohoo/([^/.]*)$ /woohoo/views/users/index.php?page=$1 [L] 
```

请帮我解决一下这个。我已经在网上搜索了。但他们只显示它设置在 www 文件夹 wamp 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:44:42.600

试试这个：

```
RewriteEngine On
RewriteBase /mypage
RewriteRule ^woohoo/([^/.]*)$ /woohoo/views/users/index.php?page=$1 [L] 
```

将 .htaccess 文件放入`mypage`

# java - 如何在 LWJGL 中保存游戏？

> ID：13889822
> 
> 赞同：0
> 
> 时间：2012-12-15T06:04:04.880
> 
> 标签：java, lwjgl

我是第一次与 LWJGL 合作，我很享受。我在查找有关制作主菜单或保存/加载游戏状态/信息之类的教程时遇到了小问题。这种事情有没有像样的教程？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:18:32.483

好吧取决于你在做什么。保存和加载的一个好主意是每次保存都使用一个 XML 文件。您可以在该文件中存储任何地图数据或字符数据，然后在加载时读取所有这些信息。

YouTube 上有一些相当不错的教程系列：

TheCodingUniverse - [http://www.youtube.com/playlist?list=PL19F2453814E0E315](http://www.youtube.com/playlist?list=PL19F2453814E0E315)（到目前为止 33 个视频）

如果您只是搜索 LWJGL 教程，则 youtube 上还有更多随机教程。

另外，如果您打算制作 2D 游戏，我会查看[Slick2D](http://www.slick2d.org/)。它基本上是基于 LWJGL 构建的 2D 引擎，它在渲染图形和类似性质的东西方面非常有帮助。请记住，它仅适用于 2D，如果您想要类似 3D 的东西，我会查看[JMonkey](http://jmonkeyengine.com/)

[Java-Gaming](http://www.java-gaming.org/)论坛也是一个有用的地方，这些是我第一次学习 LWJGL 时使用的一些资源。在我看来，我认为使用像 Slick 或 JMonkey 这样的库是做事的方式，因为他们已经完成了每款游戏所需的东西，让你来制作你的游戏。

# php - PHP 联系表格不起作用，第 7 行出现语法错误

> ID：13889829
> 
> 赞同：0
> 
> 时间：2012-12-15T06:05:00.953
> 
> 标签：php, html, forms, syntax, contact

我正在尝试在 PHP 中创建联系表单，提交时出现此错误：第 7 行 /home/aginther14/aginther14.interactivedesignlab.com/contact.php 中的 Parse error: syntax error, unexpected ')'

我是 PHP 新手，如何解决这个问题？谢谢。

```
<?php 
 $to = "gintherthegreat@gmail.com"; 
 $subject = "AdamGinther.com Message"; 
 $email = $_REQUEST['email'] ; 
 $message = $_REQUEST['message'] ; 
 $headers = "From: $email"; 
 $sent = mail($to, $subject, $message, $headers, $email,) ; 
 if($sent) 
 header("Location: contactconfirmed.html");
 else 
 {print "We encountered an error sending your mail"; }
 ?> 

<form name="contact" action="contact.php" method="post" autocomplete="off">
Name: <input type="text" name="Usersname"><br><br>
E-Mail: <input type="text" name="email"><br><br>
Comment:<br> <textarea name="message"></textarea><br><br>
<input type="submit" value="Send Me a Message!" id="button"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:07:39.740

第 7 行是：

```
$sent = mail($to, $subject, $message, $headers, $email,) ;  
                                                      ^--- remove this comma 
```

它应该是这样的：

```
$sent = mail($to, $subject, $message, $headers, $email) ; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-15T06:11:52.227

```
<?php
if (isset($_REQUEST['email']))
//if "email" is filled out, send email
  {
  //send email
  $email = $_REQUEST['email'] ;
  $subject = "AdamGinther.com Message"; 
  $message = $_REQUEST['message'] ;
  mail("gintherthegreat@gmail.com", $subject,
  $message, "From:" . $email);
  echo "Thank you for using our mail form";
  }
else
//if "email" is not filled out, display the form
  {
  echo "<form method='post' action='contact.php'>
  Email: <input name='email' type='text'><br>
  Subject: <input name='subject' type='text'><br>
  Comment:<br>
  <textarea name='message' rows='15' cols='40'>
  </textarea><br>
  <input type='submit'>
  </form>";
  }
?> 
```

# ios - Cocos2D 2.x - 从 CCDirector 获取 framerate_ 值

> ID：13889832
> 
> 赞同：0
> 
> 时间：2012-12-15T06:05:11.713
> 
> 标签：ios, cocos2d-iphone

我想使用在 CCDirector 类的 'showStats' 方法中计算的 ivar 'framerate_' 值。目前我已经向 CCDirector.m/h 文件添加了一个方法来访问该值，例如......

CCDirecor.h：

```
-(ccTime)getCCFrameRate; 
```

CCDirecor.m:

```
-(ccTime)getCCFrameRate {
    return frameRate_;
} 
```

...所以我现在可以像这样得到值：

```
ccTime frameRateOutput = [[MyDirector sharedDirector] getCCFrameRate]; 
```

这可行，但我不想“破解” Cocos2D 框架代码。我已经尝试子类化 CCDirector，但遇到了一些问题。感谢任何关于在不弄乱框架代码的情况下获得此“framerate_”ivar 的最佳方法的建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T08:26:49.370

您可以像这样获得任何对象的任何 ivar：

```
Ivar iv = object_getInstanceVariable(obj, "_framerate");
void *ivp = (char *)obj + ivar_getOffset(iv);
TYPE framerate = *(TYPE *)ivp; 
```

但是，在我看来，这比扩展框架更像是一种 hack。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T14:21:12.643

如果您绝对想避免修改 CCDirector 代码，您可以在自定义类中重现相同的代码。

尽管后者绝对没问题，但如果您升级到更新的 cocos2d 版本，您只会遇到问题。在这种情况下，只需重新应用您的更改，因为它们是如此之少。

您不能轻易地将 CCDirector 子类化，因为它是一个单例，并且它已经具有特定于平台的子类 CCDirectorIOS 和 CCDirectorMac。

# java - System.out.println() 不工作

> ID：13889837
> 
> 赞同：3
> 
> 时间：2012-12-15T06:05:43.073
> 
> 标签：java

这是我的第一篇文章。我对这个社区的一部分感到很兴奋，并且我已经为这个问题苦苦挣扎了一段时间，所以这里是：

在以下代码中：

```
if (j == 0)
      {
        if (!Arrays.equals(cipherData, c))
        {
          System.out.print("C: ");
          for (int i = 0; i < encryptedData.length; i++)
            System.out.print((char)cipherData[i]);
          System.out.println();
        }
      } 
```

该`System.out.println()` 方法根本不返回任何内容。没有线，或任何东西，我不知道为什么。如果条件为真，目标是在打印上面打印的字节数组后打印一个空行。

任何帮助将不胜感激和欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T06:08:58.697

`System.out.print()`不打印换行符。

你正在输出一堆东西，然后用`System.out.println()`. 这会导致光标下降到下一行。

如果你想要一个空行，你需要另一个。

**编辑添加：**我错过了你的`for`循环条件是......与你正在打印的数组不同的事实。你的意思是这样吗？

此外，由于您可能正在打印不可打印的字符，因此您完全有可能导致终端处于换行符不再工作的状态。

归根结底，`println()`没有坏掉。要么它没有被调用，要么你在调用它时没有看到换行符，那么终端处于它不再识别它的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:08:49.210

在迭代 for 循环之前，您可以检查 encryptedData 的长度

System.out.println("encryptedData.length::"+ encryptedData.length);

```
if encryptedData.length return greater than 1 then it will go into for loop.
You should debug step by step . 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T06:09:52.680

查看

[http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#println](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html#println) ()

您可能需要`System.out.print('\n')`；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T06:15:12.897

我对此感到担忧：

```
System.out.print((char)cipherData[i]); 
```

假设这`cipherData`是一个字节数组，那么将一个字节转换为 a`char`并通过字符流打印它不太可能给出漂亮的结果。首先，小于十进制 32 的字节将映射到 ASCII“控制字符”。

而且您可能正在打印错误的数组......或使用错误数组的长度。

（但是对您的问题的解释是，您需要再次调用`println`以成为空白行。第一个 println 只是终止包含密码数组中... umm ...“字符”的行。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T06:25:16.143

听起来问题是您运行的 JVM 没有附加任何标准输出。就像在 Windows 上一样，使用 javaw.exe 运行 jar（这是默认设置，请注意）。Java.exe 输出到控制台窗口，如果您从控制台运行它，但 javaw.exe 不会。如果你从文件资源管理器窗口运行程序，即使你使用的是 java.exe，你*仍然*不会得到任何标准输出，因为它被窗口隐藏了。

因此，在命令行窗口中运行程序，并使用 java.exe，而不是 javaw.exe。

# iis-7 - MSWC.AdRotator 的替代品

> ID：13889849
> 
> 赞同：0
> 
> 时间：2012-12-15T06:07:38.053
> 
> 标签：iis-7, asp-classic, adrotator

我`MSWC.AdRotator`在我的一个网站中使用过用 ASP 创建的。

但是当我将我的应用程序从 移动`IIS 6`到 时`IIS 7`，该控件不起作用。

但我希望`AdRotator`在我的应用程序中使用它。

那么什么是首选的替代方案`AdRotator`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:19:49.457

我已经用 JQuery Rotator 替换了这个组件。

# javascript - 计算另一个对象中的对象数，javascript-json

> ID：13889852
> 
> 赞同：0
> 
> 时间：2012-12-15T06:08:10.590
> 
> 标签：javascript, jquery, json

似乎已经有很多关于计算元素数量的类似问题被问到了，但我没有用我的问题来实现它们。

在 jquery ajax 之后，我得到返回的 JSON 数据，看起来像这样

```
Object {0: Object, 1: Object , xxxx:"asdf" ,yyyy:"asdf", zzzz:"asdf"} 
```

我想得到这个 {} 大括号之间的**对象数（不包括那些 xxx,yyy 元素）**

我试过`.length`哪个不起作用

我也尝试使用这个[JavaScript 对象的长度，](https://stackoverflow.com/questions/5223/length-of-javascript-object-ie-associative-array)但它返回每个对象中元素的数量。我只想要对象的数量

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T06:24:14.300

试试这个：

```
var json = { 0: {}, 1: {}, xxxx: "asdf", yyyy: "asdf", zzzz: "asdf" };

function typeOf( obj ) {
  return ({}).toString.call( obj )
    .match(/\s([a-zA-Z]+)/)[1].toLowerCase();
}

var total = 0;
for ( var o in json ) {
  if ( typeOf( json[o] ) == 'object' ) {
    total++;
  }
}

console.log( total ); //=> 2 
```

JavaScript 中的一切都是对象。操作员具有误导性，`typeof`在这种情况下不起作用。您可以使用`typeOf`我从这篇博文中提取的上述函数：[Fixing the JavaScript typeof operator](http://javascriptweblog.wordpress.com/2011/08/08/fixing-the-javascript-typeof-operator/)（值得一读）。还有其他方法可以做到这一点，但这似乎是最直接的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:31:44.107

如果对象是具有数字属性名称的对象不仅仅是巧合，并且数字属性按顺序计数，您可以执行以下操作：

```
var obj = { /* your object here */ }
for (var i=0; i in obj; i++) {
   // use obj[i] for something
}
// i is now equal to the number of numeric properties 
```

这是有效的，因为一旦`i`足够高以至于您用完了属性，[`in`运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)就会返回`false`。[`.hasOwnProperty()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)如果您愿意，请随意使用。

显然，这是一个专门的解决方案，根本不测试不同属性的类型。（要实际测试该类型，请参阅 elclanrs 的解决方案 - 无论哪种方式，请阅读他链接到的页面。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T06:10:09.090

假设整个 json 在一个名为的变量中`json`：

```
var total_objects = 0;
$.each(json, function () {
   if (typeof this == 'object') {
      total_objects++;
   }
}); 
```

但是，我很好奇您为什么需要知道这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T06:31:57.273

您可以使用此问题[Javascript 对象长度（即关联数组）](https://stackoverflow.com/questions/5223/length-of-javascript-object-ie-associative-array)的代码中的自定义版本，并使用运算符检查元素的类型[`typeof`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)并仅计算那些是`object`（或`array`）的元素。

```
Object.sizeObj = function(obj) {
    var size = 0, key;
    for (key in obj) {
        if (typeof key[obj] === 'object' && obj.hasOwnProperty(key)) size++;
    }
    return size;
};

// Get the count of those elements which are an object
var objectsCount = Object.sizeObj(myArray); 
```

# javascript - 如何在 JavaScript 中获取服务器日期

> ID：13889853
> 
> 赞同：8
> 
> 时间：2012-12-15T06:08:11.597
> 
> 标签：javascript

我正在处理一个处理日期的小项目。

为了获得今天的日期，我目前正在使用以下 JavaScript 代码：

```
 var today = new Date(); 
```

但是，这会导致客户端系统上设置的当前日期，可能因系统而异，因此最终输出不同。

因此，为了在所有客户端上获得相同的结果，我需要知道服务器的当前日期。如何在 JavaScript 中获取服务器日期？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-15T06:18:36.320

如果不查询服务器，肯定无法获得服务器日期。

因此，请进行单独的 AJAX 调用以获取服务器日期，或者如果您的应用程序已经发送了一些 ajax 查询，请将日期放在`Date`服务器端的标头中，然后在客户端中读取它。

此外，如果您的整个页面是动态提供的（如 PHP），请将服务器端日期放在 html 源代码中，如下所示：

```
`<script>
   var serverDate = <?= time() ?>
   var dateDiff = new Date - serverDate;
</script>` 
```

* * *

 `## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T06:19:29.807

javascript 在客户端运行，因此将返回客户端的日期。

要获取服务器的日期，您很可能希望使用服务器端语言，例如 asp.net、php 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T06:52:14.210

您可以在网页中发送您的服务器日期/时间，并让 JavaScript 确定该日期与浏览器日期之间的差异。

根据您的具体要求，您还可以考虑使用 UTC 日期/时间，顾名思义，它是通用的。`

# php - .htaccess 文件导致 Chrome 丢失会话数据

> ID：13889881
> 
> 赞同：1
> 
> 时间：2012-12-15T06:14:32.027
> 
> 标签：php, session, google-chrome, mod-rewrite

我遇到了一个问题，我的会话数据在 Google Chrome 中丢失了。所有其他浏览器都可以很好地处理会话。

我已将其缩小到`.htaccess`文件中的以下行：

```
RewriteRule ^([a-zA-Z0-9-/]+)$ customForest.php?slug=$1 [QSA] 
```

如果我删除此行，会话在 Google Chrome 中可以正常工作。

有谁知道这行中可能导致问题的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:31:17.590

估计是`[QSA]`flag的原因。你可以试试这个：

```
RewriteRule .* customForest.php?%{QUERY_STRING} [L] 
```

# android - 如何将 StartForeground 用于服务 android

> ID：13889885
> 
> 赞同：2
> 
> 时间：2012-12-15T06:14:51.433
> 
> 标签：android, service

我有一个主要活动，可以使用此命令启动服务

> ```
> startService(new Intent(Main.this, Myservice.class)); 
> ```

而Myservice类是这样的

```
 public class Myservice extends Service {
private ShakeListener mShaker;
String startell;
SharedPreferences prefs;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub

    //Something

}

@Override
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub

    //Do Something to detecting shake
            //Show my notification

}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub

    //Stop Shake detection
            //stop notification

    super.onDestroy();
}

} 
```

我的应用程序工作正常，但大约一小时后，服务自动停止，我的意思是大约一小时后抖动检测不再起作用。:(

我用谷歌搜索了一下，我发现我应该使用 StartForeground，但我没有找到如何使用。

现在，我应该如何在我的代码中使用 StartForeground？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:02:05.783

获取和释放锁的代码

//在onCreate()方法中获取唤醒锁

```
devicePowerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);

wakeLock = devicePowerManager.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK, getClass().getName());
        if(wakeLock != null){
            if(wakeLock.isHeld() == false){
                wakeLock.acquire();
            }
        } 
```

//在onDestroy()方法中释放唤醒锁

```
if (wakeLock != null) {
            if(wakeLock.isHeld()){
                wakeLock.release();
                wakeLock = null;
            }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:43:30.917

我认为您的服务因您的设备进入睡眠状态而停止工作。如果您希望它一直在后台工作，您可以使用[WakeLock](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)来防止您的设备进入睡眠状态，但这会显着增加电池消耗，所以要小心。

编辑：你可以`set()`锁定`onCreate`你的方法`Service`和`release()`它`onDestroy()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T06:18:03.143

是的，您可以通过调用`startService`方法启动服务。并通过这个例子，它会帮助你

[示例项目](https://github.com/commonsguy/cw-android/tree/master/Notifications/FakePlayer)

# google-chrome - 边框半径在 Chrome 中不起作用？任何解决方法？

> ID：13889887
> 
> 赞同：2
> 
> 时间：2012-12-15T06:15:20.223
> 
> 标签：google-chrome, css

我已将`border-radius`（以及`-moz-border-radius`对于旧版浏览器）设置为 20px，并且它在 Safari 和 Firefox 中运行良好。然后，我打开 Chrome，它拒绝接受定义的`border-radius`. 有什么建议可以在 Chrome 中解决这个问题吗？

**在此处查看实际的 CSS 编码：http:** [//jsfiddle.net/MAYea/](http://jsfiddle.net/MAYea/)

**Safari 中的屏幕截图：**

![苹果浏览器](../Images/68608ec929a7362209a2e7ceddbf8e13.png)

**Chrome 中的屏幕截图：**

![铬合金](../Images/377ab1b9e0a5daf2baf8ec7ae98b2380.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T06:18:29.953

不是那`border-radius`不起作用，而是`overflow`未能隐藏溢出。

这实际上是 Chrome 中的一个新错误。我的[世界末日时钟](http://adamhaskell.net/misc/doomsday)也有类似的问题，尽管它在早期版本的 Chrome 中运行良好。

作为一种解决方法，您可以`border-radius`在包含的元素以及容器上指定 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-21T15:35:46.340

我有一个类似的问题，它有助于添加

```
z-index: 0; /* or some other value */ 
```

但是也

```
transform: translateY(0); 
```

似乎这正在启用某种不同的渲染（猜测没有像我们有时对强制 GPU 渲染所做的那样的 3d 上下文......）

这行得通的原因我无法解释，也许其他人可以？

我现在有这个特殊的问题，在 OS X 10.10.5 上使用最新的 Chrome v44 ......是的，我知道这是“固定的”，这是一个老问题 =）......

编辑：在另一个 SO-Question 中找到相同的修复程序，请在此处查看：[链接](https://stackoverflow.com/a/25206004/5215202)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T06:17:26.130

`-webkit-border-radius:`我想你在找什么？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T06:21:02.653

将`border-radius: 20px;`CSS 规则添加到两者`:before`和`:after`

[演示](http://jsfiddle.net/bobthyasian/MAYea/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T06:18:58.433

```
-webkit-border-radius: 20px;
-moz-border-radius: 20px;
border-radius: 20px;

 -webkit-border-radius: for the Chrome 
```

如果您需要它，请从[这里尝试这个 javascript 库](http://css3pie.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-08T14:12:38.780

您可以使用，

```
border-radius: 100 
```

代替，

```
border-radius: 100px 
```

它会在 IE 中完成这项工作，但**在 Chrome 中却不行**。

# matlab - 如何在matlab中计算图像中的颜色数量

> ID：13889888
> 
> 赞同：-2
> 
> 时间：2012-12-15T06:15:57.983
> 
> 标签：matlab, image-processing, colors

实际上，我是 Matlab 的新手。我对此了解不多。如何计算图像中的颜色数量？

例如，我有一张 DNA 微阵列的图像（这是一个 RGB 图像），我想计算它有多少个黄点、红点和绿点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-01T15:04:14.867

如果我是你的形象，你可以使用这个：

`size(unique(reshape(I, [], 3), 'rows'), 1)`

首先将图像重塑为 nx3，其中 n 代表图像中的像素数，应用 unique 函数折叠相等的行（具有相同颜色的像素），最后生成矩阵的大小将为您提供唯一的数量颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:26:04.937

如果您使用的是 RGB，那么它也取决于它是 24 位、32 位还是 64 位。例如，对于 24 位图像，有 256*256*256 = 16,777,216 种可能的 RGB 组合。;)

将颜色 R、G、B 分开会不会更容易，然后你计算每个分开的颜色`subplots`？;)

试试这个：取出每个 R、G、B 通道。然后在其上做一个直方图来计算每个 R、G、B 像素。

```
DNA = imread('peppers.png');
redChannel = DNA(:, :, 1);
greenChannel = DNA(:, :, 2);
blueChannel = DNA(:, :, 3);

For red:
[redCount grayCount] = imhist(redPlane);
subplot(2, 2, 2);
imshow( DNA(:,:,2));
>> redcount
ans = 38385 // SAMPLE count 
```

如果您愿意，可以使用 1:3 的循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T08:00:12.467

如果您有单个像素点，并且“红色”、“黄色”和“绿色”正好表示 [255 0 0]、[0 255 255] 和 [0 255 0]，那么您的问题可以很简单地回答：

```
red_dots = (DNA(:,:,1)==255); 
n_red_dots = sum(red_dots(:));

yellow_dots = (DNA(:,:,2)==255 & DNA(:,:,3)==255);
n_yellow_dots = sum(yellow_dots(:));

green_dots = (DNA(:,:,2)==255); 
n_green_dots = sum(green_dots(:)); 
```

如果您的颜色不是那么精确，但仍然是单像素（或者它们的大小大致相同并且您对粗略的比例很感兴趣），您可以进行阈值处理：

```
redish_dots = (DNA(:,:,1)>200 & DNA(:,:,2)<40 & DNA(:,:,3)<40);
n_redish_dots = sum(redish_dots(:)); 
```

等等...

# android - 我如何实现这种表格布局设计？

> ID：13889895
> 
> 赞同：-1
> 
> 时间：2012-12-15T06:17:01.897
> 
> 标签：android, tablelayout, android-tablelayout

我想设计这个页面中给出的表格布局

[http://ashadegreener.co.uk/androidK/agenda.php](http://ashadegreener.co.uk/androidK/agenda.php)

（不是右侧的菜单和带有注销按钮的标题）

只有左侧给出的完整表格布局设计。此设计仅适用于 10 英寸平板电脑，不适用于其他分辨率。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:27:10.663

我得到了答案

```
 <TableLayout         
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:stretchColumns="*" 
         android:background="#FF909090">

        <TableRow  
            android:layout_margin="0.5dip">

            <TextView 
                android:text="Invoice Number"       
                android:background="#E7EFE7"        
                android:layout_margin="0.5dip"          
                android:padding="15dip"/>
            <TextView 
                android:id="@+id/tIN" 
                android:text="9912326989"       
                android:background="#E7EFE7" 
                android:layout_margin="0.5dip"          
                android:padding="15dip" />

        </TableRow>

   </TableLayout> 
```

我忘记为表格行标签提供 layout_margin。

# javascript - 我可以调用函数作为参数吗？

> ID：13889901
> 
> 赞同：1
> 
> 时间：2012-12-15T06:17:45.577
> 
> 标签：javascript, parameters, boolean

说我有一个功能：

```
function foo(){
    // do a bunch of stuff, manipulate DOM, etc.
    // and then:
    if(some_condition) return true;
    else return false;
} 
```

由于同时执行函数的“一堆东西”并使用它的返回值会很好，我想知道这样做是否正确：

```
if( foo() ){ // foo happens right here
    // do some stuff because foo returned true
} 
```

这是正确的语法和用法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:20:04.437

这绝对没问题。即使`foo`不返回布尔值，也将强制返回布尔值，因此无论如何都可以这样做。

您所做的只是不将变量替换为`foo()`.

唯一会出现问题的是如果`foo()`返回不同的值，在这种情况下，如果您希望整个代码中的值相同，则必须将返回值设置为一个变量并改用该变量。

顺便说一句，这是 javascript 的基础知识之一。除非您刚刚开始，否则您应该已经知道这一点。

哦，正如人们在评论中所说，这不是使用函数作为参数。使用函数作为参数将执行此操作：

```
function bar(a) {
    // do something with a
}
function foo(){ 
    // blah blah blah
}
var thing = bar(foo); // notice no parentheses `()` after foo
// do something with thing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:31:14.573

就像其他人所说的那样，它会按您的预期工作。我只想建议一种优化：

```
function foo(){
    // do a bunch of stuff, manipulate DOM, etc.
    // and then:
    return !!some_condition;
} 
```

如果`some_condition`是一个真值（,,,, `1`）`"abc"`然后将表示。否则它会表达。`{}``[]``!!some_condition``true``false`

然后，您可以随意使用它：

```
if (foo()) { // foo happens right here
    // do some stuff because foo returned true
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T06:21:51.083

我觉得还可以吗？你没有使用函数作为参数，你只是这样做：

```
var ret = foo();
if( ret ){     
} 
```

可能某些浏览器可能会在两者之间进行优化，并且级别非常低。（我想可能是因为在您的情况下，返回值未在其他任何地方使用。）

但是想法/语义保持不变。

# python - 如何删除单词的最后一个重复字母

> ID：13889903
> 
> 赞同：1
> 
> 时间：2012-12-15T06:17:52.177
> 
> 标签：python, regex, python-2.7

如何转换`heyyyy`为`hey`使用 python 正则表达式？这是我到目前为止得到的

```
line="heyyy hoooow are you"
word_normalize=compile(r'(\w)\1+')
word_normalize.sub(r'\1\1',line) 
```

哪个打印`hey how are you`

我想要它打印：*嘿，**你**是吗？*

我只想缩短结束字母而不是其他部分。

如果我想要这样的东西， `hey hoow are you` 即结束字符不重复，其他字符最多重复 2 次怎么办。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T06:19:24.170

用于`\b`强制匹配位于单词的末尾。

```
>>> re.sub(r'(\w)\1+\b', r'\1', line)
'hey hoooow are you' 
```

要使内部字母最多重复两次，请使用 添加另一个替换`\B`，这与 是相反的`\b`：

```
>>> re.sub(r'(\w)\1+\B', r'\1\1', re.sub(r'(\w)\1+\b', r'\1', line))
'hey hoow are you' 
```

# google-drive-api - 如何使用电子邮件地址更新文件的用户角色？

> ID：13889904
> 
> 赞同：1
> 
> 时间：2012-12-15T06:17:52.853
> 
> 标签：google-drive-api

我正在开发一个项目管理应用程序[http://kerika.com](http://kerika.com)，我遇到以下情况，我无法将用户在 google-drive 文件中的角色从“writer”降级为“reader”：

1.  用户 U1 拥有的项目与角色“团队成员”的用户 U2 共享。
2.  当一个新文档附加到项目的卡片上时，它会被上传到用户 U1 的 google-drive 帐户。我们将此文件称为 F1。U1 成为 F1 的所有者，并与具有“作者”角色的用户 U2 共享。
3.  当 U1 决定将用户 U2 的角色降级为 kerika 项目的访问者时：Kerika 内部需要将用户 U2 在 google-drive 上的 F1 角色更新为“读者”。
4.  在这里，作为 kerika 开发人员，很难找到用户 U2 修改其角色的权限对象，因为 GoogleDrive API 的权限对象不提供有关用户电子邮件地址的信息。它提供有关用户姓名的信息，但不提供有关电子邮件地址的信息。

我还查看了[http://www.youtube.com/watch?v=Z2OIlwju8UM&list=PL0FA2818902D9D123&index=15](http://www.youtube.com/watch?v=Z2OIlwju8UM&list=PL0FA2818902D9D123&index=15)上的 google-drive-sdk 视频。

视频说 google-drive-api 出于安全原因没有填充用户的电子邮件地址。

首先，google-drive 网页版在不关心安全性的共享对话框中显示其他用户的电子邮件地址？

如果谷歌开发人员决定不填充电子邮件地址，那么他们应该有一些解决这个问题的方法。

例如，当我想将用户的角色从“reader”更改为“write”时，我可以插入一个新的权限记录，角色为“writer”，并且角色正在正确更新。

但是当我将用户的角色从“作者”更新为“读者”时，同样的事情不起作用。

有没有人有同样的问题并找到解决方法？

在此先感谢您的帮助，

奇拉格莫拉迪亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:32:16.127

您应该使用 update() 或 patch() 方法来修改现有用户对文件的权限。显然，这里的难点在于识别出正确的permissionId供用户修改。

您可以尝试将permissionId 表存储到您的电子邮件地址，但假设所有权限更改都在您的应用程序内完成，而不是通过本机Drive UI。

您的另一个选择是让最终用户确定应该修改哪些用户的权限，通过显示 Drive API 为您提供的名称和图片来帮助他们选择。

# php - WordPress 在一定长度的内容后插入指向博客页面的 readmore 链接

> ID：13889908
> 
> 赞同：1
> 
> 时间：2012-12-15T06:18:27.963
> 
> 标签：php, wordpress-theming, wordpress

我只是 WordPress 的新手。在我的博客页面中，我希望在一定长度的字符之后会有阅读更多链接，如果有人点击阅读更多链接，那么他将能够完整阅读该特定内容。现在我可以手动在帖子页面中插入 readmore 超链接，但我不想手动插入。那么有人可以在这里帮助我吗？任何帮助和建议都将是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:10:30.367

检查文档中的[the_excerpt()](http://codex.wordpress.org/Function_Reference/the_excerpt)函数只需更新您的模板`index.php` 或文件（可能是模板部分），其中主循环可用于您的主页，您有

```
the_content() 
```

将其替换为

```
the_excerpt(); 
```

# objective-c - 将内容从缓存替换到文档目录？

> ID：13889916
> 
> 赞同：-3
> 
> 时间：2012-12-15T06:18:49.023
> 
> 标签：objective-c, ios, xcode

在我的文档文件夹中，我在该文件夹中有一个名为 folder1 的文件夹，我有 css、js、main.html 等。我正在 webview 中打开 main.html ....如果在服务器中完成任何更新，我正在下载文件夹 2 并将其解压缩到缓存目录例如：我在文档目录中的文件夹 1 中有 css、js、main.html，并且在服务器中完成了新的更新，我正在下载文件夹 2 并在文件夹 2 的缓存目录中解压缩我只有 css现在我想比较这些文件夹 1 和文件夹 2 的内容，如果此示例中的两个文件夹中都存在相同的方法，我想删除文档目录文件夹 1 中的 CSS，并且我想将文件夹 2 中的 CSS 替换为文件夹 1 ......这是下一次的过程如果完成任何更新，那么我可能会下载 js 而不是 css，那时我只想替换 js。任何人都可以帮助如何检查内容和替换...请帮助我它对我的影响

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T11:15:46.647

根据我的理解，您正在使用 Documents 目录来存储要加载到 UIWebView 和 Caches 目录中的 CSS 和 HTML，以解压缩并存储来自服务器的最新 CSS 和 HTML 文件。解压后，您想将Caches文件夹中的CSS和JS文件的内容与Documents文件夹中的CSS和JS文件的内容进行比较，如果有变化则替换。

这有2个步骤：

1.  标准化两个文件夹中的文件名，以便您知道应该将 Caches 目录中的哪个文件与 Documents 目录中的哪个文件进行比较。为要比较的文件指定相同的名称。

2.  在从服务器获取文件并在 Caches 文件夹中解压缩时，您可以使用 NSFileManager 类访问 Documents 目录中的相同文件（名称与第 1 点中提到的相同），然后在 NSString 中读取它，然后将其与另一个文件进行比较NSString 包含您的 Caches 文件夹内容。如果比较返回相等，您可以跳过。否则，您可以使用

> ```
>  NSFileManager *manager = [NSFileManager defaultManager]; 
> 
>  [manager copyItemAtPath:sourcePath(CachesDir) toPath:destinationPath(DocumentsDir) error:&error] 
> ```

这会将您最新解压缩的项目从 CacheDirectory 复制到 Documents Directory。

但是，您可能需要仔细检查文档目录中保存的内容，因为它备份在设备映射到的 iCloud 帐户上。请进一步阅读。

# vb.net - 输入字符串在 vb.net 中的格式不正确

> ID：13889918
> 
> 赞同：-1
> 
> 时间：2012-12-15T06:19:20.290
> 
> 标签：vb.net

我遇到问题，当我尝试解密消息时提示我该错误..以下是我的代码..

```
Private Sub btndecrypt_Click(sender As Object, e As EventArgs) Handles btndecrypt.Click
    Dim key As Integer = Integer.Parse(txtkey.Text) << THIS CODE GIVE ERROR**'input string was not in the correct format**

    decrypt(key)
    Txtmessage.Text = totaldecry

End Sub

Private Sub decrypt(ByVal key As Integer)
    Dim length As Integer

    length = Len(receivemsg)
    ReDim y(length)
    Dim chararray() As Char = receivemsg.ToCharArray
    For a As Integer = 0 To length - 1
        y(a) = Asc(chararray(a)) - key
    Next

    For a As Integer = 0 To length - 1
        totaldecry = totaldecry & Chr(y(a)).ToString 
    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:37:43.073

很简单：文本框不包含可以转换为整数值的文本。如果我在你的文本框中输入我的名字，你希望如何从中得到一个整数？您需要能够处理不良输入。捕获异常或使用 TryParse() 而不是 Parse() 函数。你想如何处理失败取决于你。

当我们在做的时候，我希望你没有用那个“解密”代码做任何真正的事情......那里根本没有真正的安全性。

但如果你必须，我会这样写解密函数：

```
Private Function decrypt(ByVal key As Integer, ByVal message As String) As String
    Return New String(message.Select(Function(c) Chr(Asc(c)-key)).ToArray())  
End Function 
```

就一个单行。这就是加密的“安全性”。您可以像这样使用该功能：

```
Private Sub btndecrypt_Click(sender As Object, e As EventArgs) Handles btndecrypt.Click
    Try
        Txtmessage.Text = decrypt(Integer.Parse(txtkey.Text), receivemsg)
    Catch
        'do something here to let user know it's a bad key
    End Try
End Sub 
```

另请注意，我更改了您的函数定义，以减少对全局变量和类级变量在函数之间传递信息的依赖。那只是更好的风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T13:22:39.617

Integer.Parse() 函数直接转换值。如果参数不是整数，它不会测试实际值并引发错误。

所以你可以使用 integer.TryParse 如下。if Integer.TryParse(txtkey.Text,key) then '成功转换整数，并将值存储在 key. else 'txtkey.Text 没有任何有效的整数。所以 0 存储在 key 中。万一

最好创建一个具有所有数据类型转换函数的类，并在需要时从该类中调用该函数。我创建了以下类以在我的代码中使用

--------------------------我的代码中的类-------------------- ----------------

```
Public Class NullValue
    '''''''''''''''''' 1\. BYTE type convertion
    Public Shared Function getByte(ByVal mValue As String) As Byte
        Dim mNumber As Byte
        If Byte.TryParse(mValue, mNumber) Then Return mNumber Else Return 0
    End Function

    '''''''''''''''''' 2\. Int16/Short Integer type convertion
    Public Shared Function getInt16(ByVal mValue As String) As Int16
        Dim mNumber As Int16
        If Int16.TryParse(mValue, mNumber) Then Return mNumber Else Return 0
    End Function

    '''''''''''''''''' 3\. Int32/Integer type convertion
    Public Shared Function getInteger(ByVal mValue As String) As Int32
        Dim mNumber As Int32
        If Int32.TryParse(mValue, mNumber) Then Return mNumber Else Return 0
    End Function

    '''''''''''''''''' 4\. Int64/Long Integer type convertion
    Public Shared Function getInt64(ByVal mValue As String) As Int64
        Dim mNumber As Int64
        If Int64.TryParse(mValue, mNumber) Then Return mNumber Else Return 0
    End Function

    '''''''''''''''''' 5\. Single type convertion
    Public Shared Function getSingle(ByVal mValue As String) As Single
        Dim mNumber As Single
        If Single.TryParse(mValue, mNumber) Then Return mNumber Else Return 0
    End Function

    '''''''''''''''''' 6\. Double type convertion
    Public Shared Function getDouble(ByVal mValue As String) As Double
        Dim mNumber As Double
        If Double.TryParse(mValue, mNumber) Then Return mNumber Else Return 0
    End Function

    '''''''''''''''''' 8\. Integer(Int32 type convertion
    Public Shared Function getInt32(ByVal mValue As String) As Integer
        Dim mNumber As Int32
        If Int32.TryParse(mValue, mNumber) Then Return mNumber Else Return 0
    End Function

    '''''''''''''''''' 9\. Short Date type convertion to String '''in Regional format
    Public Shared Function getDateString(ByVal mValue As String) As String
        Dim mDate As Date, strDate As String = ""
        If Date.TryParse(mValue, mDate) Then
            strDate = Format(mDate, "dd/MM/yyyy")
        Else
            strDate = ""
        End If
        Return strDate
    End Function

    '''''''''''''''''' 10\. Short Date type convertion
    Public Shared Function getDate(ByVal mValue As String) As Date
        Dim mDate As Date
        Try
            Date.TryParse(mValue, mDate)
        Catch ex As Exception
            mDate = Date.MinValue
        End Try
        Return mDate
    End Function

    '''''''''''''''''' 11\. Short Date type convertion
    Public Shared Function getDateTime(ByVal mValue As String) As DateTime
        Dim mDate As DateTime
        Try
            Date.TryParse(mValue, mDate)
        Catch ex As Exception
            mDate = Date.MinValue
        End Try
        Return mDate
    End Function

    '''''''''''''''''' 12\. Short Date type convertion
    Public Shared Function getBoolean(ByVal mValue As String) As Boolean
        Dim mBool As Boolean
        If Boolean.TryParse(mValue, mBool) Then Return mBool Else Return False
    End Function

    '''''''''''''''''' 11\. Time Convertion
    Public Shared Function getTime(ByVal mValue As String) As String
        Dim mDate As DateTime, mTime As String = ""
        Try
            mDate = Convert.ToDateTime(mValue)
            If mDate.Year > 1950 Then mTime = mDate.ToShortTimeString
        Catch ex As Exception
        End Try
        Return mTime
    End Function
End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T06:51:26.110

这是一个链接，您可能会检查它，希望它可以让您对您的任务有所了解:)[使用 VB.NET 加密和解密密码](http://www.dotnetspider.com/resources/30280-Encryption-Decryption-Password-using-VB-NET.aspx)

# php - jQuery Ajax Post() 得到零响应.. 为什么？

> ID：13889921
> 
> 赞同：0
> 
> 时间：2012-12-15T06:19:29.650
> 
> 标签：php, wordpress, jquery

我正在使用 word press 。使用 Ajax 提交表单我使用此代码.. 我的 php 代码工作正常，还有 j Query。

但是当我得到响应`post()`并打印它时..它正在打印'零'意味着'0'..作为**“邮件发送0”**

**PHP 代码**

```
 /* Apply Online form enqueue/localize/add action/function script start*/

    wp_register_script("ajax-apply_online", get_bloginfo('template_directory')."/js/custom_js.js", array( "jquery"));
    wp_enqueue_script('ajax-apply_online');
    wp_localize_script("ajax-apply_online","the_ajax_apply_online", array("ajaxurl_apply_online" => admin_url("admin-ajax.php")));

// add actions
   add_action( "wp_ajax_apply_online", "ajax_action_apply_online" );
   add_action( "wp_ajax_nopriv_apply_online", "ajax_action_apply_online" );

   function ajax_action_apply_online(){
     echo "Mail Send";                  
  }
/* Apply Online  form enqueue/localize/add action/function script end*/ 
```

**jQuery 代码**

```
 jQuery.post(the_ajax_apply_online.ajaxurl_apply_online,
                    jQuery("#apply_online_form").serialize(),
                        function(response_from_the_action_function){

                            jQuery("#errfrmMsg").val(response_from_the_action_function).css({"display":"block"});
                        }
            ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T06:07:01.247

尝试添加退出；在回显“邮件发送”之后；

如果在添加附加文本之后执行的 php 的其他部分`mail send`将停止运行

# ios - Cocos 2D 是否可以在执行过程中向节点添加更多的 CCAction？

> ID：13889924
> 
> 赞同：1
> 
> 时间：2012-12-15T06:20:36.153
> 
> 标签：ios, cocos2d-iphone, ccaction

我的游戏中有一个节点，我希望能够在它已经开始执行后将其他操作排队。这还有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:23:50.120

是的，这是可能的。查看 CCSequence（按序列运行的一系列动作）和 CCSpawn（产生新动作，在使用序列时特别有用）。

您唯一不应该做的就是同时运行两个相同类型的操作。例如多个 CCMove* 或 CCTint* 动作。这是因为它们会覆盖彼此的更改，这将导致奇怪的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T12:05:38.243

只是一个想法，还没试过。当您将 CCSequence 构建为最后一个操作时，放置一个 CCCallBlock，在该块内您将拥有一个机制来让您在运行时添加额外的操作。我在这里即时编写伪代码。作为动作的块追加看起来像这样：

```
{
     CCSequence *additionalActions = [MyRuntimeActionClass getAdditionalActionsForObject:spriteRunningTheAction];
     if(additionalActions)
          [spriteRunningTheAction runAction:additionalActions]
} 
```

如果我们为对象存储了额外的动作，我们会得到序列并运行它。additionalActions 可以存储一个字典，其中键是要在其上运行的对象的地址（spriteRunningTheAction），并为要附加的 CCSequence 赋值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T07:50:06.077

你能澄清一下吗？您可以将动作添加到已经执行动作的精灵。如果您希望稍后运行某个操作，您可以使用 scheduleOnce；这将允许您在指定的持续时间后执行方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T10:53:50.333

我不认为您可以在进行时修改序列，但您可以添加一个“CCCallXYZ”操作来安排“一次拍摄”一个可以采取任何操作的类方法，包括为您的对象定义一个新的操作序列。时间和控制可能很棘手:)

# php - 如何使用 PEAR 和 PHP 创建表？

> ID：13889926
> 
> 赞同：3
> 
> 时间：2012-12-15T06:20:45.670
> 
> 标签：php, pear

您好我正在使用以下代码来显示表格，但它显示了这样的错误。

```
Warning: require(HTML/Table.php) [function.require]: failed to open stream: No such file or directory in /home/aspire/public_html/table.php on line 3

Fatal error: require() [function.require]: Failed opening required 'HTML/Table.php' (include_path='.:/usr/share/php:/usr/share/pear') in /home/aspire/public_html/table.php on line 3 
```

这是我的代码。谁能告诉我我犯了什么错误。

```
 require("HTML/Table.php");
 $tableStyle = array("bgcolor"=>"#FFFFFF", "border"=>"1", "width"=>"150",   "cellpadding"=>"1", "cellspacing"=>"2"); 
 $colA = array("field 1", "field 2", "field 3", "", "<b>TOTAL</b>");
 $a = 10;
 $b = 15;
 $c = 8;
 $total = $a+$b+$c;
 $colB = array($a, $b, $c, "", "<b>".$total."</b>");
 $table = new HTML_Table($tableStyle);
 $table->addCol($colA);
 $table->addCol($colB);
 $table->display(); 
```

使用这个“ **php go-pear.phar** ”命令我找到了以下路径。

```
Current include path           : .:/usr/share/php:/usr/share/pear
Configured directory           : /home/aspire/pear/share/pear
Currently used php.ini (guess) : /etc/php5/cli/php.ini 
```

因此，在开始我的代码之前指定路径时

```
 include_path=".:/usr/share/php:/usr/share/pear/"; 
```

它显示了类似的错误

```
Parse error: syntax error, unexpected '=' in /home/aspire/public_html/table.php on line 2 
```

如何解决这个问题呢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:36:46.973

尝试您的示例代码，我收到错误消息：

```
PHP Warning:  require(HTML/Table.php): failed to open stream: No such file or directory in /home/dylan/Desktop/scratch/pear_path.php on line 3
PHP Fatal error:  require(): Failed opening required 'HTML/Table.php' (include_path='.:/usr/share/php:/usr/share/pear') in /home/dylan/Desktop/scratch/pear_path.php on line 3 
```

我解决了这个问题，并且该程序在执行以下操作后似乎可以正常工作：

```
sudo pear install HTML_Table 
```

如果您遇到问题包版本，您可以尝试 pear force 选项。

```
sudo pear install -f --alldeps HTML_Table 
```

我在这里找到了这个：http: [//grokbase.com/p/php/pear-general/05ak6rnj7m/pear-problem-installing-db-dataobject-formbuilder-frontend](http://grokbase.com/p/php/pear-general/05ak6rnj7m/pear-problem-installing-db-dataobject-formbuilder-frontend)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T07:03:28.130

设置包含路径的正确方法是：

```
set_include_path(".:/usr/share/php:/usr/share/pear/"); 
```

# magento - 使用 csv 批量上传可下载产品

> ID：13889927
> 
> 赞同：1
> 
> 时间：2012-12-15T06:20:46.887
> 
> 标签：magento, magento-1.7

谁能告诉我如何通过 .csv 批量上传可下载产品。我尝试过简单的产品，但对于可下载的产品却失败了。需要帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:39:38.287

我使用 Commerce Extensions 的这个模块，可以很容易地批量上传大量可下载的曲目，甚至添加可下载的链接，只需 99 美元，而且支持非常好 - [http://www.commerceextensions.com/magento-product -import-export.html](http://www.commerceextensions.com/magento-product-import-export.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-29T09:40:02.283

默认情况下，您无法导出和导入可下载、可配置、分组、捆绑的全属性产品。你应该为你的工作使用一些扩展。

尝试使用一个[http://www.mlx-store.com/magento-extensions/import-export/export-import-bulk-product-with-configurable-product-bundle-product-grouped-product-downloadable-product-tier -price-group-price-related-products-up-sells-cross-sells-product-tags-magento.html](http://www.mlx-store.com/magento-extensions/import-export/export-import-bulk-product-with-configurable-product-bundle-product-grouped-product-downloadable-product-tier-price-group-price-related-products-up-sells-cross-sells-product-tags-magento.html)

# macos - twisted.internet.error.CannotListenError：无法监听任何内容：80：[Errno 13] 权限被拒绝

> ID：13889928
> 
> 赞同：12
> 
> 时间：2012-12-15T06:20:49.177
> 
> 标签：macos, tcp, twisted

我目前正在做一个在 mac os 山狮上创建 TCP 服务器的项目。我写了一个脚本叫做：Server.py

在这个 python 脚本中，我使用了 twisted 来监听端口 80，如下所示：

```
reactor.listenTCP(80, factory)
reactor.run() 
```

我怎么会收到这样的错误：

```
File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/internet/posixbase.py", line 436, in listenTCP
    p.startListening()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/twisted/internet/tcp.py", line 641, in startListening
    raise CannotListenError, (self.interface, self.port, le)
twisted.internet.error.CannotListenError: Couldn't listen on any:80: [Errno 13] Permission denied. 
```

我在想是不是因为 tcp.py 脚本对管理员用户有错误的权限？或者有没有办法在端口 < 1024 上设置权限？（更改权限，对这样的服务器的安全性有何影响？）

任何更好的解决方案都值得关注。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-23T08:03:08.107

只需转到终端并键入 sudo python server.py。现在它会询问密码，输入您的密码。你的问题将得到解决。快乐编码

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-17T16:18:33.730

我使用命令 sudo + 启动服务器解决了这个问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-15T16:36:49.837

听起来你在正确的轨道上。按照惯例，只有超级用户（或者，在一些较新的系统中，是被授予某些特殊权限的普通用户）才允许绑定到 1024 以下的端口。

该`authbind`工具是将此权限授予非超级用户的便捷方式。似乎有一个 OS X 端口，[https://github.com/Castaglia/MacOSX-authbind](https://github.com/Castaglia/MacOSX-authbind)（尽管我自己只在 Linux 上使用过 authbind）。

另一种方法是为您启动绑定端口并将其交给您的 Twisted 程序。这种方法更典型地是您可能会发现人们在 OS X 上所做的事情，并且是使用（最近引入的）`IReactorSocket.adoptStreamPort`API 完成的。有关如何配置它以及您的 Twisted 程序将如何了解它所采用的套接字的详细信息，请参阅 launchd 文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-02T04:19:32.337

也许您的 tcp46 正在使用您的 80。关闭您的 APACHE，一切都会好起来的。

须藤 apachectl 停止

# html - 有没有办法以与后退按钮一起使用的方式实现无限滚动？

> ID：13889931
> 
> 赞同：0
> 
> 时间：2012-12-15T06:20:57.183
> 
> 标签：html, jquery

单击使用无限滚动的站点中的项目非常令人沮丧，因为我无法通过单击后退按钮轻松返回页面上的位置。我最终花了几分钟回到我原来的位置。为什么让我回到我离开的页面如此困难？

# c++ - TMP：如何编写将任何结构转换为元组的模板代码？

> ID：13889934
> 
> 赞同：7
> 
> 时间：2012-12-15T06:21:09.583
> 
> 标签：c++, templates, c++11, tuples

是否可以使用模板元编程将任何结构或类转换为元组？

例如：

```
struct Foo
{
  char         c;
  int          i;
  std::string  s;
};

typedef std::tuple< char, int, std::string >  Foo_Tuple; 
```

如果有一些模板代码会自动为我生成 Foo_Tuple 那就太好了。

**回答**

对于这样一个简单的情况，这有点过分了，但对于更复杂的情况（例如 ORM 或任何需要编写大量样板代码，而仅仅模板或宏不足以完成任务），[Boost Mirror](http://kifri.fri.uniza.sk/~chochlik/mirror-lib/html/)看起来它可能非常有用。我对 Boost Mirror 进行了深入研究：基本反射功能（在 Mirror 和 Puddle 中）并不难理解，很容易设置并且似乎相当广泛（可以处理许多结构，包括 C++11枚举类等...）。我发现这个基本功能已经绰绰有余——我可以使用 MACROS 来将我的类暴露给反射（这样我就不必编写样板代码）。工厂生成器似乎也非常强大（使用相同的初始宏设置，您可以交换任何您喜欢输出 JSON、SOCI 或流等的工厂生成器...），但学习曲线更大/ setup，如果你想编写自己的工厂生成器。最后几点注意事项：经过一些小的调整，我能够让它在 gcc 4.7.2 上与 C++11 一起工作；此外，文档已经很好地氧化了，似乎有足够多的例子可以快速开始。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T06:42:16.643

我认为在 C++ 中没有办法做到这一点。

我不知道枚举结构中的字段/类型的方法 - 如果你能做到这一点，我认为构造这样的元组将相当简单。

我相信 Boost.Fusion 有一个宏可以帮助解决这个问题，称为 FUSION_ADAPT_STRUCT，但这都是手动的。

这方面的技术术语是“反射”，您可以通过搜索“C++ 反射”找到很多关于它的信息。

这是一篇这样的文章：[如何向 C++ 应用程序添加反射？](https://stackoverflow.com/questions/41453/how-can-i-add-reflection-to-a-c-application)

# java - 如何阻止 ANTLR 抑制语法错误？

> ID：13889941
> 
> 赞同：2
> 
> 时间：2012-12-15T06:22:18.620
> 
> 标签：java, antlr, error-recovery

所以我正在使用 ANTLR 在 Java 中编写一个编译器，我对它如何处理错误感到有些困惑。

默认行为似乎是打印一条错误消息，然后尝试通过令牌插入等方式从错误中恢复并继续解析。我原则上喜欢这个；这意味着（在最好的情况下）如果用户提交了多个语法错误，他们将在每个错误中收到一条消息，但它会提及所有错误，而不是强制他们重新编译以发现下一个错误。默认错误消息对我来说很好。当它完成读取所有令牌时，麻烦就来了。

当然，我正在使用 ANTLR 的树构造函数来构建抽象语法树。虽然通过语法错误继续解析很不错，这样用户就可以看到所有错误，但一旦完成解析，我希望得到一个异常或某种指示输入在语法上无效的指示；这样我就可以停止编译并告诉用户“对不起，修复你的语法错误，然后再试一次”。我不希望它根据它认为用户试图说的内容吐出不完整的 AST，并继续进行下一阶段的编译，没有任何迹象表明出现任何问题（除了出现的错误消息）到控制台，我看不到）。然而，默认情况下，它正是这样做的。

*Definitive ANTLR Reference*提供了一种在检测到语法错误后立即停止解析的技术：覆盖`mismatch`and`recoverFromMismatchedSet`方法来 throw `RecognitionException`s，并添加一个`@rulecatch`动作来做同样的事情。这似乎失去了从解析错误中恢复的好处，但更重要的是，它只是部分起作用。如果缺少必要的标记（例如，如果二元运算符的一侧只有一个表达式），它会按预期抛出异常，但如果添加了无关的标记，ANTLR 会插入它认为属于那里的标记并继续其愉快的方式，产生一个除了控制台消息之外没有任何语法错误指示的 AST。（更糟糕的是，它插入的令牌是`EOF`，所以文件的其余部分甚至没有被解析。）

我确信我可以解决这个问题，例如，向`isValid`解析器添加类似字段的内容并覆盖方法并添加操作，以便在解析结束时，如果有任何错误，它会引发异常。但是有更好的方法吗？我无法想象我正在尝试做的事情在 ANTLR 用户中是不寻常的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:54:11.123

> ... [O] 完成解析后，我想获得一个异常或某种指示输入在语法上无效的指示；这样我就可以停止编译...

您可以`getNumberOfSyntaxErrors`在解析后调用词法分析器和解析器来确定是否存在由 ANTLR 隐蔽容纳的错误。显然，这并没有告诉您这些错误是什么，但我认为这些方法解决了您问题的“一旦完成解析......停止编译”部分。

> Definitive ANTLR Reference 提供了一种在检测到语法错误后立即停止解析的技术：覆盖 mismatch 和 recoverFromMismatchedSet 方法以引发 RecognitionExceptions，并添加 @rulecatch 操作来执行相同操作。

我认为您没有提到您使用的是哪个版本的 ANTLR，但是该方法的 ANTLR v3.4 代码中的文档`recoverFromMismatchedSet`说它“当前未使用”，并且 Eclipse“全局使用”扫描未发现调用者。您的主要问题既不是这里也不是那里，但我想提一下以作记录。它可能是覆盖您的版本的正确方法。

> 如果缺少必要的令牌...，[覆盖的代码]会按预期抛出异常，但是如果添加了无关的令牌，ANTLR会插入它认为属于那里的令牌并继续其愉快的方式...

`recoverFromMismatchedToken`通过分别委托给方法`mismatchIsMissingToken`和方法来测试可恢复的丢失和无关令牌`mismatchIsUnwantedToken`。如果适当的方法确定插入或删除将解决问题，`recoverFromMismatchedToken`则进行适当的更正。如果确定没有操作解决不匹配令牌问题，则`recoverFromMismatchedToken`抛出`MismatchedTokenException`.

如果发生恢复操作，`reportError`则调用 ，它会调用`displayRecognitionError`详细信息。

这适用于 ANTLR v3.4 和可能的更早版本。

这为您提供了至少两个选项：

*   `recoverFromMismatchedToken`在细粒度级别上覆盖和处理错误。从这里，您可以将调用委托给超级实现，滚动您自己的恢复代码，或通过异常退出。无论如何，您的代码都将被调用，因此会知道发生了不匹配错误、可恢复或其他错误。此选项可能等同于覆盖`recoverFromMismatchedSet`.

*   `displayRecognitionError`在课程粒度级别覆盖和处理错误。方法`reportError`做了一些状态杂耍，所以我不建议重写它，除非重写实现调用超级实现。Method`displayRecognitionError`似乎是recovered-token 调用链中最后的调用之一，因此它是确定是否继续的合理位置。我希望它有一个名称，表明它是一个合理的地方，但是哦，好吧。这是一个演示此选项[的答案。](https://stackoverflow.com/questions/13624624/antlr-handling-exceptions/13631070#13631070)

我偏向于覆盖`displayRecognitionError`，因为它很容易提供错误消息文本，并且因为我知道它只会在令牌恢复操作和所需的状态处理之后被调用——我的解析器不需要自己弄清楚如何恢复。`getNumberOfSyntaxErrors`假设您正在使用相关版本的 ANTLR 并且我完全理解您的问题，这似乎为您提供了您正在寻找的选项。

# gps - 在 BlackBerry 10 dev alpha 中激活 GPS

> ID：13889942
> 
> 赞同：0
> 
> 时间：2012-12-15T06:22:21.173
> 
> 标签：gps, wifi, blackberry-10, blackberry-android

我想在 BlackBerry 10 Dev aplha 设备中激活 GPS。在我的应用程序中，我想要用户的当前位置。我可以使用 GPS 或网络提供商来实现这一点，但我的设备中没有 sim 卡，但 wifi 已激活。

如何使用 GPS 或 wifi 网络获取用户的当前位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:15:01.113

如果您在[示例应用程序](https://developer.blackberry.com/cascades/sampleapps/)下查看开发人员站点，您将看到[位置诊断](https://developer.blackberry.com/cascades/files/release/samples/platform/locationdiagnostics.zip)示例。

# php - 如何修改 Php.ini 以启用 GD jpeg 支持？

> ID：13889944
> 
> 赞同：0
> 
> 时间：2012-12-15T06:22:27.570
> 
> 标签：php, jpeg, gd

我在 IIS 6 上使用 PHP 5.2.0。我想知道我应该怎么做才能启用 GD Jpeg 支持，我已经在 php.ini 中取消了 extension = hp_gd2.dll 的注释，但仍然没有得到预期的结果。我错过了一步吗？

编辑 ----------> 很好地使用此代码：

```
<?php
function LoadJpeg($imgname)
{
    /* Attempt to open */
    $im = @imagecreatefromjpeg($imgname);

    /* See if it failed */
    if(!$im)
    {
        /* Create a black image */
        $im  = imagecreatetruecolor(150, 30);
        $bgc = imagecolorallocate($im, 255, 255, 255);
        $tc  = imagecolorallocate($im, 0, 0, 0);

        imagefilledrectangle($im, 0, 0, 150, 30, $bgc);

        /* Output an error message */
        imagestring($im, 1, 5, 5, 'Error loading ' . $imgname, $tc);
    }

    return $im;
}

header('Content-Type: image/jpeg');

$img = LoadJpeg('progressive.jpg');

imagejpeg($img);
imagedestroy($img);
?> 
```

我希望获得渐进式图像加载，但我得到了错误。- 修改php.ini后我没有重新编译php <------我应该吗？如果是这样，我将如何重新编译 php？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:26:43.337

确保您的 php.ini 文件包含类似 "extension_dir="C:\php\ext" 的行，将该文件路径替换为您要激活的 dll 的实际位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:29:41.530

您可以查看以下站点。我认为这可能对您有所帮助。>>

[http://forums.cpanel.net/f5/php-gd-jpeg-support-problem-41642.html](http://forums.cpanel.net/f5/php-gd-jpeg-support-problem-41642.html)

或者没有安装 Perl。

请检查一下。我不是 100% 确定。如果您得到完整的答案，请回复。,

谢谢

# objective-c - 循环播放无间隙的 AVAudioPlayer

> ID：13889948
> 
> 赞同：9
> 
> 时间：2012-12-15T06:23:49.070
> 
> 标签：objective-c, avaudioplayer, avaudiorecorder

我正在使用 AVAudioRecorder 录制声音，然后尝试使用 AVAudioPlayer 播放声音。我试图让声音无限循环，但声音在循环之间有很短的间隙。我已经尝试将 AVAudioRecorder 录制到所有可能的文件类型，但我找不到允许无缝循环的东西。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T01:23:27.757

这是一篇很棒的帖子，它帮助我消除了 AVAudioPlayer 实现中的循环： http://forums.macrumors.com/showthread.php?t= [640862](http://forums.macrumors.com/showthread.php?t=640862)

该帖子的要点是压缩音频添加空白声音以将样本长度填充到 1024 的偶数倍。使用未压缩的音频或专门为循环目的输出的音频将消除故障。

# ruby-on-rails - 回形针，s3 上传失败，但没有显示任何错误

> ID：13889949
> 
> 赞同：3
> 
> 时间：2012-12-15T06:23:49.290
> 
> 标签：ruby-on-rails, upload, amazon-s3, paperclip

我一直在寻找类似主题的解决方案，但我无法让它以某种方式工作。这是我的应用程序日志

```
Command :: identify -format %wx%h '/tmp/0120121215-31657-19vihny.jpg[0]'
Command :: convert '/tmp/0120121215-31657-19vihny.jpg[0]' -auto-orient -resize "32x32!" -     background white -flatten +matte '/tmp/0120121215-31657-19vihny20121215-31657-58mm3a.png'
Command :: identify -format %wx%h '/tmp/0120121215-31657-19vihny.jpg[0]'
Command :: convert '/tmp/0120121215-31657-19vihny.jpg[0]' -auto-orient -resize "320x320!" -background white -flatten +matte '/tmp/0120121215-31657-19vihny20121215-31657-1n3fgl2.png'

[paperclip] Saving attachments.
[paperclip] saving images/:User/50cc0cfb0feea807f6000004/original.jpg
[paperclip] saving images/:User/50cc0cfb0feea807f6000004/small.png
[paperclip] saving images/:User/50cc0cfb0feea807f6000004/medium.png

Started POST "/photos" for 127.0.0.1 at 2012-12-15 12:39:07 +0700
Processing by PhotosController#create as HTML 
Parameters: {"utf8"=>"✓", "authenticity_token"=>"SSjceuOzRNQfJyUCki86mNBfuHsK0bh5qQmX4pBi7uk=", "photo"=>{"image"=>#<ActionDispatch::Http::UploadedFile:0xb27e0164 @original_filename="01.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"photo[image]\"; filename=\"01.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20121215-31657-9oqjbm>>, "description"=>"This is decscription"}, "commit"=>"Create Photo"}

MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7489ms)
MOPED: 127.0.0.1:27017 INSERT       database=image12345_development collection=photos documents=[{"_id"=>"50cc0cfb0feea807f6000004", "image_file_name"=>"01.jpg", "image_content_type"=>"image/jpeg", "image_file_size"=>368812, "image_updated_at"=>2012-12-15 05:39:07 UTC, "description"=>"This is decscription"}] flags=[] (0.2658ms)

[AWS S3 200 8.971826 0 retries] put_object(:acl=>:public_read,:bucket_name=>"image12345",:content_length=>368812,:content_type=>"image/jpeg",:data=>Paperclip::UploadedFileAdapter: 01.jpg,:key=>"images/:User/50cc0cfb0feea807f6000004/original.jpg")  

[AWS S3 200 0.214209 0 retries] put_object(:acl=>:public_read,:bucket_name=>"image12345",:content_length=>2763,:content_type=>"image/png",:data=>Paperclip::FileAdapter: 0120121215-31657-19vihny20121215-31657-58mm3a.png,:key=>"images/:User/50cc0cfb0feea807f6000004/small.png")  

[AWS S3 200 3.498196 0 retries] put_object(:acl=>:public_read,:bucket_name=>"image12345",:content_length=>142791,:content_type=>"image/png",:data=>Paperclip::FileAdapter: 0120121215-31657-19vihny20121215-31657-1n3fgl2.png,:key=>"images/:User/50cc0cfb0feea807f6000004/medium.png")  

Redirected to http://localhost:3000/photos/50cc0cfb0feea807f6000004
Completed 302 Found in 12992ms 
```

我为用户使用**设计**

在我的 gem 文件中有

```
gem "mongoid-paperclip", :require => "mongoid_paperclip"
gem 'paperclip'
gem "aws-sdk" 
```

在我的模型/photo.rb

```
has_mongoid_attached_file :image,
:path           => ':attachment/:User/:id/:style.:extension',
:storage        => :s3,
:s3_credentials => File.join(Rails.root, 'config', 's3.yml'), #s3.yml contain credentials
:styles => {
:small => ['32x32!', :png],
:medium   => ['320x320!',    :png, :jpg],

},
:convert_options => { :all => '-background white -flatten +matte' }  
attr_accessible :image, :description 
```

以我的形式

```
<%= form_for(@photo , :html => {:multipart => true} ) do |f| %>
<div class="field">
    <%= f.label :image %><br />
    <%= f.file_field :image %>
</div>
<% end %> 
```

我已经尝试了许多解决方案，例如 add form_helper :multipart ，在我以前的应用程序中，这个模型和 gem 运行良好，我确信凭证是正确的。它只是告诉我这是一个成功的更新，但没有上传图像。我在哪里可以查找有关此问题的错误？或者我可以使用的任何工具？我真的坚持这一点并想通过它，而不是创建新的应用程序并祝好运。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T08:24:22.987

前段时间已经找到解决方案但忘记发布

在这个问题 [Rails 3 - Amazon S3 Paperclip EU Problem](https://stackoverflow.com/questions/7257745/rails-3-amazon-s3-paperclip-eu-problem)

当我看到一张图片已经上传时才知道，但只是我没有使用正确的地址来访问它们:)

# java - 未找到 Web 服务方法

> ID：13889950
> 
> 赞同：0
> 
> 时间：2012-12-15T06:23:58.060
> 
> 标签：java, eclipse, web-services

我用简单的方法创建了 java web 服务（使用 eclipse）并作为战争导出到我的服务器。现在，当我尝试调用该 Web 服务 wsdl 时，只有 wsdl 存在，但无法处理方法。

请建议是什么原因？

# android - SAX 解析器 XML 帮助

> ID：13889956
> 
> 赞同：0
> 
> 时间：2012-12-15T06:25:08.090
> 
> 标签：android, saxparser

我的XML如下

```
<?xml version="1.0" encoding="utf-8" ?>
<Data>
<Item>
<CategoryId>1</CategoryId>
<Date>20121214</Date>
<Source>mysamplecode@gmail.com</Source>
<ItemDetail>
<quality1>Morning</quality1>
<quality2>12010109Y</quality2>
<quality3>2.00</quality3>
<quality4>7.99</quality4>
 </ItemDetail>
<ItemDetail>
<quality1>Afternoon</quality1>
<quality2>12010109B</quality2>
<quality3>900</quality3>
<quality4>83.50</quality4>
 </ItemDetail>
 <ItemDetail>
 <quality1>Dinner</quality1>
 <quality2>11271581Y</quality2>
  <quality3>16.00</quality3>
  <quality4>8.99</quality4>
  </ItemDetail>
  </Item>

   <Item>
  <CategoryId>2</CategoryId>
  <Date>20121214</Date>
  <Source>code@gmail.com</Source>
  <ItemDetail>
  <quality1>Morning</quality1>
  <quality2>12010109Y</quality2>
 <quality3>2.00</quality3>
  <quality4>7.99</quality4>
 </ItemDetail>
 </Item>

 <Item>
 <CategoryId>3</CategoryId>
<Date>20121214</Date>
 <Source>code@gmail.com</Source>
 <ItemDetail>
  <quality1>Afternoon</quality1>
  <quality2>12010109B</quality2>
  <quality3>900</quality3>
  <quality4>83.50</quality4>
 </ItemDetail>

 </Item>
 </Data> 
```

这是我的 ParserClass

```
 public class OrderXMLHandler extends DefaultHandler {

  boolean currentElement = false;
  String currentValue = "";

 CategoryInfo itemdetail;
 CategoryInfo categoryInfo;
 ArrayList<CategoryInfo> List;

 public ArrayList<CategoryInfo> getList() {
  return List;
}

public void startElement(String uri, String localName, String qName,
   Attributes attributes) throws SAXException {

  currentElement = true;

 /* if (qName.equals("Data")){
  //List = new ArrayList<CategoryInfo>();

 } */
if (localName.equals("maintag"))
 {}
 else if (qName.equals("Item")) {
  List = new ArrayList<CategoryInfo>();
  ;
 }
 else if (qName.equals("ItemDetail")) {
  categoryInfo = new CategoryInfo();
 }
}

public void endElement(String uri, String localName, String qName)
throws SAXException {

  currentElement = false;

 if (qName.equalsIgnoreCase("CategoryId"))
    {
  categoryInfo.setCategoryId(currentValue.trim());
  listId = currentValue.trim();
    }
 else if (qName.equalsIgnoreCase("Date"))
  {//categoryInfo.setDate(currentValue.trim());
  date = currentValue.trim();}
 else if (qName.equalsIgnoreCase("Source"))
  {//categoryInfo.setSource(currentValue.trim());
    source = currentValue.trim();}

 else if (qName.equalsIgnoreCase("quality1"))
  categoryInfo.setQuality1(currentValue.trim());
 else if (qName.equalsIgnoreCase("quality2"))
  categoryInfo.setQuality2(currentValue.trim());
else if (qName.equalsIgnoreCase("quality3"))
  categoryInfo.setQuality3(currentValue.trim());
 else if (qName.equalsIgnoreCase("quality4"))
  categoryInfo.setQuality4(currentValue.trim());
 else if (qName.equalsIgnoreCase("ItemDetail"))
  List.add(categoryInfo);

 currentValue = "";
 }

  public void characters(char[] ch, int start, int length)
throws SAXException {

 if (currentElement) {
    currentValue = currentValue + new String(ch, start, length);
 }

   }

  } 
```

我认为我没有正确解析我组成的 XML。所以当我启动它时，数据只是容器元素，所以我不知道如何读取它并将每个项目转到我的 Arraylist 的下一个元素，该 Arraylist 进入存储每个项目和信息的 Class CateogoryInfo。每个都有标题和项目详细信息或多个项目详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:45:14.580

```
 ArrayList<HashMap<String, String>> menuItems = new
 ArrayList<HashMap<String, String>>();

         XMLParser parser = new XMLParser();
         String xml = parser.getXmlFromUrl(URL); // getting XML
         Document doc = parser.getDomElement(xml); // getting DOM element

         NodeList nl = doc.getElementsByTagName("Item");
         // looping through all item nodes <item>
         for (int i = 0; i < nl.getLength(); i++) {
             // creating new HashMap
             HashMap<String, String> map = new HashMap<String, String>();
             Element e = (Element) nl.item(i);
             // adding each child node to HashMap key => value
             map.put(KEY_ID, parser.getValue(e, "CategoryId"));
             map.put(KEY_NAME, parser.getValue(e, "Source"));

                NodeList n2 = doc.getElementsByTagName("ItemDetail");
          for (int i = 0; i < n2.getLength(); i++) {
             map.put(KEY_COST, "Rs." + parser.getValue(e, "quality1"));
             map.put(KEY_DESC, parser.getValue(e, "quality2"));
           }
             // adding HashList to ArrayList
             menuItems.add(map);
         } 
```

像这样使用..我认为您的解决方案将在这里完成..

# ruby-on-rails - 使用 SharedServer 部署 Rails github

> ID：13889958
> 
> 赞同：1
> 
> 时间：2012-12-15T06:25:18.327
> 
> 标签：ruby-on-rails, ruby, github, dreamhost

我正在尝试在线部署 Rails 应用程序。我现在的主人是梦想主人。虽然我不确定如何部署我的应用程序。目前我在共享服务器上，但我正在考虑升级到 VPS，但问题仍然存在！我是否需要 Git 集线器。如果我需要 git hub 将其设为私有，我必须付费还是存在替代方案。

我不确定如何部署 rails 的意思是我有一个带有 webrick 和 database.yml 设置的本地主机，否则其他一切对我来说都是黑暗的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:55:16.737

您可以使用 capistrano 通过 SSH 将您的应用程序部署到共享主机或 VPS。

[https://help.github.com/articles/deploying-with-capistrano](https://help.github.com/articles/deploying-with-capistrano)。

# ssh - xquartz：无法查询安全扩展和 xterm 失败

> ID：13889961
> 
> 赞同：1
> 
> 时间：2012-12-15T06:25:44.130
> 
> 标签：ssh, osx-lion, x11, xterm, xauth

我正在使用 MacBook Air 上的 OSX 10.7.5 登录远程 Linux 工作站，运行 Suse（/etc/issue: SUSE Linux Enterprise Desktop 11 SP2 (x86_64) - Kernel \r (\l)）

在我开始使用 macports 最新的 X11、XQuartz XWindow System (XQuartz 2.7.4 (xorg-server 1.13.0)) 之前，一切都运行良好。默认情况下，OSX 10.7.5 附带 XQuartz 2.6.4（xorg-server 1.10.6），但是我已经安装并设置了默认 XQuartz 2.7.4。我现在观察两个问题：

（1）当登录到我的远程 Suse 框时（这是通过 VPN 隧道 btw 完成的，不确定是否重要），通过 'user1> ssh -X user2@wks01' 我得到

警告：不受信任的 X11 转发设置失败：未生成 xauth 密钥数据

这（至少看起来）可以追溯到新 Xquarts 服务器上没有“安全”扩展的事实。通过 ssh -vvv 选项进行跟踪，然后由于 xauth 失败，因此在 MacBox 或远程 Suse 上单独运行它会给出：

user2@wks04:~> xauth 生成 "$DISPLAY" 。trustedxauth：（argv）：1：无法查询显示“localhost：10.0”上的安全扩展

'ssh -Y' 在没有警告的情况下登录

(2) 同样有趣的是，在 ssh 模式下 -X 和 -YI 都能够打开并转发到我的显示器上，我检查过的任何 X 应用程序，包括 xclock、xlogo、xcalc 甚至 eclipse。但是，运行简单的“xterm”会导致作业挂起（即显示为正在运行），但 xterm 从不显示在我的 Mac 上。

虽然回滚到 XQuartz 2.6.4 可能有助于解决上述问题（因为上述所有操作之前都运行顺利），但我现在很好奇了解问题的根源。

提前感谢您的帮助，德米特里

# javascript - jQuery 语法错误 {% %}

> ID：13889965
> 
> 赞同：-1
> 
> 时间：2012-12-15T06:26:32.977
> 
> 标签：javascript, jquery

我很难弄清楚这种奇怪的 jQuery 语法是如何工作的。一切正常，除了当你点击按钮时。我不确定 {% %} 东西应该如何解决这样的功能。我目前收到此控制台消息： SyntaxError: Unexpected token )

我的代码：

```
// Check for new upload...if true refresh page
        {% if (file.new_up ) { %}
            {%=file.new_up=false%}
            {%=$("#no_ups").html("Your upload was successfully completed. <button>x</button>") %}
            {%=$("#no_ups").show("slow") %}

            {%=$("button").click(function ( )  { %}
              {%=$("#no_ups").hide("slow") %}
            {% }) %}

       {% } %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:40:37.603

我这样做了，而不是试图弄乱该服务器端代码

```
<script type="text/javascript">
$(document).ready(function () {
    $('#bClose').click(function () {
        $("#no_ups").hide("slow");
        $("#bClose").hide();
    });
});
</script> 
```

# javascript - Javascript - 动态改变元素的宽度

> ID：13889971
> 
> 赞同：1
> 
> 时间：2012-12-15T06:27:29.983
> 
> 标签：javascript

Stack上有一些类似的问题，但我认为我的问题是我的一些语法错误的结果。无论如何，我正在用 javascript 构建一个灯箱，并希望将绝对位置 ( `left %`css) 动态设置为元素宽度的一半。

这是代码中的一个片段。完整代码在这里[http://jsfiddle.net/Yab3Q/4/](http://jsfiddle.net/Yab3Q/4/)

```
var modal = document.getElementById(btnId+"-modal");
var modalChildren = modal.childNodes;

for (var x = 0; x<modalChildren.length; x++){
    if (!(modalChildren[x].className === "lightBox")){
        var childWidth = modalChildren[x].offsetWidth;
        var halfWidth = childWidth / 2;
        modalChildren[x].style.left = halfWidth + "px";
    }
} 
```

该行`modalChildren[x].css.left = halfWidth + "px";`返回“未捕获的类型错误：无法设置未定义的属性‘左’”。但是，`modalChildren[x].className`两者`modalChildren[x].offsetWidth;`都返回预期值，所以我不确定为什么我可以在这里查看但不能更新 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:35:51.387

文本节点没有样式属性：记录并检查：

```
for (var x = 0; x<modalChildren.length; x++){
            console.log(modalChildren[x]);
            console.log(modalChildren[x].style);
            if (!(modalChildren[x].className === "lightBox")){
                var childWidth = modalChildren[x].offsetWidth;
                var halfWidth = childWidth / 2;
                modalChildren[x].style.left = halfWidth + "px";
            }
        } 
```

看看节点类型：[http ://www.javascriptkit.com/domref/nodetype.shtml](http://www.javascriptkit.com/domref/nodetype.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:36:23.463

您尝试更改以下元素的样式属性：

```
0: <div>
1: #text
2: <img>
3: #text 
```

您可以通过键入来查看此列表

```
console.log(modalChildren) 
```

由于 textNode 没有样式属性，因此会引发错误

# php - php正则表达式用链接标签替换“一些词”，但应排除链接标签内的“一些词”

> ID：13889972
> 
> 赞同：5
> 
> 时间：2012-12-15T06:27:34.397
> 
> 标签：php, regex

我将 html 内容存储在数据库表中。在那个 html 内容中，我想用链接标签替换“一些单词”。但是，如果“某些单词”已经在链接标签内，我应该省略它们..

例如
**内容**

```
<p>Lorem ipsum dolor SOME WORDS, consectetur adipiscing elit. <a href="http://example.com">SOME WORDS</a> elementum pharetra velit at cursus. Quisque blandit, nibh at eleifend ullamcorper</p> 
```

**输出应该是**

```
<p>Lorem ipsum dolor <a href="http://someurl">SOME WORDS</a>, consectetur adipiscing elit. <a href="http://example.com">SOME WORDS</a> elementum pharetra velit at cursus. Quisque blandit, nibh at eleifend ullamcorper</p> 
```

如您所见，它应该在替换时排除现有的链接文本。

非常感谢一些进入正确轨道的指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T09:09:10.783

这是您可以使用`DOMDocument`而不是正则表达式来解决它的方法：

```
$contents = <<<EOS
<p>Lorem ipsum dolor SOME WORDS, consectetur adipiscing elit. <a href="http://example.com">SOME WORDS</a> elementum pharetra velit at cursus. Quisque blandit, nibh at eleifend ullamcorper</p>
EOS;

$doc = new DOMDocument;
libxml_use_internal_errors(true);
$doc->loadHTML($contents);
libxml_clear_errors();

$xp = new DOMXPath($doc);

// find all text nodes
foreach ($xp->query('//text()') as $node) {
        // make sure it's not inside an anchor
        if ($node->parentNode->nodeName !== 'a') {
                $node->nodeValue = str_replace(
                    'SOME WORDS', 
                    'SOME OTHER WORDS', 
                    $node->nodeValue
                );
        }
}
// DOMDocument creates a full document and puts your fragment inside a body tag
// So we enumerate the children and save their HTML representation
$body = $doc->getElementsByTagName('body')->item(0);
foreach ($body->childNodes as $node) {
        echo $doc->saveHTML($node);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:47:02.473

简单的正则表达式只有在它是确切的短语并且在链接内没有任何其他符号或单词时才有效。您可以通过计算在出现之前存在打开和关闭链接标签的次数来遍历所有出现的`SOME WORDS`以查看它们是否在链接内。试试这个代码：

```
$str = '<p>Lorem ipsum dolor SOME WORDS, consectetur adipiscing elit. <a href="http://example.com">SOME WORDS</a> elementum pharetra velit at cursus. Quisque blandit, nibh at eleifend ullamcorper</p>';
echo 'Before:' . $str;
$str_lc = strtolower($str);
$phrase = 'SOME WORDS';
$link = '<a href="http://someurl">SOME WORDS</a>';
$offset = 0;
while($position = strpos($str, $phrase, $offset))
{
    if (substr_count($str_lc, "<a", 0, $position) <= substr_count($str_lc, "</a>", 0, $position)) {
        $str = substr_replace($str, $link, $position, strlen($phrase));
        $str_lc = strtolower($str);
        $offset = $position + strlen($link) - strlen($phrase);
    } else {
        $offset = $position + 1;
    }
}
echo 'After:' . $str; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T07:05:13.860

如果您有 3 条线的空间，这将是一个安全的选择：

```
$text=preg_replace('~<a(.*)(SOME WORDS)(.*)</a>~','<a$1PLACEHOLDER$3</a>',$text);
$text=preg_replace('~SOME WORDS~','REPLACEMENT WORDS',$text);
$text=preg_replace('~PLACEHOLDER~','SOME WORDS',$text); 
```

它将使用 PLACEHOLDER 文本/标签/任何内容，因此您不会替换链接内容（如果有的话）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T06:40:09.047

这应该可以解决问题。

如果 SOME WORDS 被标签包围，只需检查正则表达式

```
preg_replace('/[^>]SOME WORDS[^<]/','<a href="http://someurl">SOME WORDS</a>',$str); 
```

# android - 使用选项卡优于 Intent 的优势

> ID：13889974
> 
> 赞同：1
> 
> 时间：2012-12-15T06:27:59.313
> 
> 标签：android

我刚刚发现我们可以用来`overridePendingTransition(0,0)`在覆盖当前 Android 转换的布局之间进行非常简单的转换。

```
switch(v.getId()){  
    case R.id.btnCorner:
        Intent i = new Intent(MainActivity.this, Settings.class);
        startActivity(i);       
        overridePendingTransition(0,0);
        break;
} 
```

与如此简单的过程相比，使用制表符有什么优势？

我的观点是选项卡有助于在一个“窗口屏幕”到另一个“窗口屏幕”之间传输变量。而不是通过意图传递变量。

请注意，我不熟悉使用`Tabs`，我希望有人能澄清在应用程序中使用选项卡的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:47:28.783

乔纳森·休，很好的问题对用户真的很有帮助，在这里我将给你一个简短的描述，比如：意图以我们想要的任何**主从**表单为例，通过点击任何`ListView`项目行需要在这种情况下**调用**另一个`activity`我建议您使用 Intent，因为在同一流程中，您需要完成结果，而另一方面，使用`tab`它将为您提供更多**便利**，以便使用单独的标签将您的愿望清单功能放入应用程序中......

标签喜欢： -

```
private void setTabs()
{
    addTab("Tab1", R.drawable.tab1, tab1.class);
    addTab("Tab2", R.drawable.tab2, tab2.class);

    addTab("Tab3", R.drawable.tab3, tab3.class);
    addTab("Tab4", R.drawable.tab4, tab4.class);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T06:40:26.397

你是什​​么意思`tabs`？Android 中有几种方法可以实现 Tabs 模式。其中一些更好，另一些不是很好或已弃用。并非所有人都是：

> 促进变量的传递

例如，使用 3 个不同`Activity`的 ，将显着增加代码量，增加代码连接性并降低代码质量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T06:45:41.980

根据我的观点，在标签中，与 Intent 相比，您可以更系统地组织您的工作。

# android - addAction() & 服务调用困境

> ID：13889975
> 
> 赞同：1
> 
> 时间：2012-12-15T06:28:10.433
> 
> 标签：android

我在以前的斗争中被困在这里 >>[上一页。斗争！](https://stackoverflow.com/questions/13880004/broadcast-receiver-inside-activity)

Raanan 有帮助！我很多，但后来我认为他因为时区不同而消失了，现在我被我用来调用活动中的 BroadcastReceiver() 的服务代码困住了！而且我没有得到我应该加载什么参数 filter.addAction(action); 代替行动？？

好心指导我！

服务器中的代码：

```
Toast.makeText(Server.this, hr +" , " +min, Toast.LENGTH_LONG).show();

       Intent intent = new Intent(this, andRHOME.class);
       //intent.putExtra("sendMessage","1");
       sendBroadcast(intent); 
```

和活动中的代码（广播接收器）

```
 private BroadcastReceiver ReceivefrmSERVICE = new BroadcastReceiver(){

    @Override
    public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "IN DA BroadCASTER",
                Toast.LENGTH_LONG).show();
                sendMessage("1");
    }
   };
    IntentFilter filter = new IntentFilter(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:46:17.530

您需要添加这些行来注册您的接收器以执行某些操作，例如定义一个全局变量，如下所示：

```
public static String NOTIFCATION_BROADCAST_ACTION = "com.your_packagename.UPDATE_NOTIFICATION_INTENT"; 
```

然后在您的`activity onCreate()`方法中注册这样的操作。

```
 IntentFilter filter = new IntentFilter();
 filter.addAction(Global.NOTIFCATION_BROADCAST_ACTION);
 registerReceiver(ReceivefrmSERVICE, filter); 
```

`service`然后像这样发送广播

```
 Intent broadcast = new Intent();
    broadcast.setAction(Global.NOTIFCATION_BROADCAST_ACTION);
    sendBroadcast(broadcast); 
```

然后在你的`broadcast Receiver`过滤器中这个动作是这样的

```
 private BroadcastReceiver ReceivefrmSERVICE = new BroadcastReceiver(){

    @Override
    public void onReceive(Context context, Intent intent) {

            if (intent.getAction().equals(Global.NOTIFCATION_BROADCAST_ACTION)) {
                //Do your stuff here :)
            }
    }
   }; 
```

# c - 如何在 C LPWSTR 上进行字符串比较？

> ID：13889980
> 
> 赞同：1
> 
> 时间：2012-12-15T06:29:23.207
> 
> 标签：c, visual-c++

在 Visual C 2010 中，如何进行字符串比较以检查 char* 和 LPWSTR 之间的相等性？例如，做某事到

```
LPWSTR *str; 
if (*str == "fileName") //... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T06:38:44.970

我相信 wsccmp 函数应该做你想做的事情。

[http://msdn.microsoft.com/en-us/library/e0z9k731(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/e0z9k731(v=vs.80).aspx)

# ios - iOS 中的 iswalpha() 在 iOS 上返回的值与在 MacOS 上不同

> ID：13889982
> 
> 赞同：1
> 
> 时间：2012-12-15T06:29:41.733
> 
> 标签：ios, widechar

`iswalpha()`我在 iOS 上有一个问题。

我正在 Xcode 4.5 中调整我的应用程序，并尝试将西班牙语字符传递`ú`给`iswalpha()`. xcode 显示的 int 值为`ú`250。

当我尝试在真实设备上运行应用程序时，`iswalpha()`返回 0；但在模拟器中（我在 10.8.2 的 MacBook Air 上运行 Xcode）它返回 1。

我想原因可能是 iOS 的宽字符实现与 MacOS 不同。解决此问题的最佳方法是什么？

**增强的细节：** 西班牙字符的 UTF-16（unicode）编码`ú`在 int 值中是 250。我认为 iswalpha() 应该像 MACOS 一样返回 1，而不是在 iOS 中返回 0。

Dam 新用户无法在此处发布图片。所以对于UTF-16编码`ú`请参考： [http ://www.fileformat.info/info/unicode/char/fa/index.htm](http://www.fileformat.info/info/unicode/char/fa/index.htm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T19:25:36.737

好吧，我现在可以回答我自己的问题，以及一个开发日志，以防我后来忘记了：

这似乎是苹果在 iOS 中实现 libc 的错误。考虑到英语以外的其他语言中的字母，iswalpha() 的实现是不完整的。iswalpha() 无法识别不同语言中的特定字母（ú,á,ó,...），因为它们超出了 0x7F ASCII 边界，并且不知何故它无法被 iOS 的语言环境处理函数识别，但显然在不同的语言环境中，这些仍然应该是可读的字母。

关于它的一些细节：

iOS 中的 iswalph() 被追踪到：

```
__DARWIN_CTYPE_static_inline int
__istype(__darwin_ct_rune_t _c, unsigned long _f)
{
#ifdef USE_ASCII
    return !!(__maskrune(_c, _f));
#else /* USE_ASCII */
    return (isascii(_c) ? !!(_DefaultRuneLocale.__runetype[_c] & _f)
        : !!__maskrune(_c, _f));
#endif /* USE_ASCII */
} 
```

最后返回 0 的是 __maskrune(_c, _f))。

Apple 错过了这一点是可以理解的，因为没有人会在 Objective-C 中使用 iswalpha()。但是，对于某些移植项目，注意这一点可能仍然有用。这是一个广泛使用的功能，因此对于移植到 iOS 的许多遗留项目来说可能很重要。希望苹果可以在以后的版本中修复它。

我现在解决这个问题的方法是使用 iswalpha() 的包装函数，它通过我自己的代码处理这些拉丁字母。现在，该应用程序在我的 iPhone 上完美运行！

# extjs - 使用 Ext.Loader.require 加载后台目录

> ID：13889985
> 
> 赞同：0
> 
> 时间：2012-12-15T06:31:16.713
> 
> 标签：extjs, extjs4

考虑我已将此命名空间定义`Boo`为此路径`/Plugins/Content/App`。现在我需要用`Ext.Loader.require`from加载一个脚本`/Plugins/Content`。

如何从具有`Boo`命名空间的后向文件夹中加载内容？有没有像`Ext.Loader.require("Boo/../")`这样将光标设置为的解决方案`/Plugins/Content`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:01:34.263

我从未尝试过，但您应该能够使用**[setPath()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Loader-method-setPath)**为您定义的命名空间归档它。之后，您可以`Ext.Loader.require()`在此命名空间的类上使用。

要归功于评论：

**不**，这是不可能的。

> ClassManager将无法识别可能的**类**名，因此无法找到用于加载的可能命名空间。

**为什么？**

ClassManager 不关心导航部分`/../`，这会导致问题

# gtk - gtksourceview-3.0 中的 gtk_source_iter_forward_search 发生了什么

> ID：13889987
> 
> 赞同：2
> 
> 时间：2012-12-15T06:31:24.343
> 
> 标签：gtk, gtksourceview

我查看了[GtkSourceView 3 Reference Manual](http://developer.gnome.org/gtksourceview/3.0/)，并且搜索了一段时间，但我找不到任何关于 gtk_source_iter_forward_search 为何从 gtksourceview 中删除或应该改用的内容的提及。

我还查看[了 gtksourceview 网站上的功能链接](http://projects.gnome.org/gtksourceview/features.html)，它作为功能列出：Caseless UTF-8 compliant search。

我查看了 gedit 源版本 3.2.6（因为我知道他们使用 gtksourceview），但他们似乎正在使用 gedit_document_search_forward，我猜它来自其他一些库。所以我的问题是，gtksourceview 中的搜索功能发生了什么变化？是否有另一个库提供与 gtk_source_iter_forward_search 类似的功能，还是现在在 gtksourceview 中以另一种方式完成？

我最初在 gtksourceview-2.0 中编写我的编辑器，现在我正在使用 gtksourceview-3.0 重写它，并且我已经建立了基于 gtk_source_iter_forward_search 函数的搜索转发功能。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:38:53.980

如果您想了解这些内容，请务必浏览源代码。我在[这个提交](http://git.gnome.org/browse/gtksourceview/commit/?id=d83f64f08eeb9aff5815a8b27684625c679066bc)中发现`GtkSourceIter`因为功能被移到`GtkTextIter`.

# greasemonkey - 使用 Greasemonkey 脚本跨域进行本地存储

> ID：13889995
> 
> 赞同：6
> 
> 时间：2012-12-15T06:32:26.000
> 
> 标签：greasemonkey

是否可以使用 Greasemonkey 脚本跨域存储数据？我想允许从使用相同 Greasemonkey 脚本的多个网站访问 Javascript 对象。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T07:00:09.730

是的，这就是它的目的之一[`GM_setvalue()`](http://wiki.greasespot.net/GM_setValue)，它存储数据、*每个脚本*和跨域。

请注意，沼泽标准`GM_setValue()`有些问题。它可以使用大量全局资源或导致脚本实例崩溃。

以下是一些指导方针：

1.  请勿`GM_setValue()`用于存储字符串以外的任何内容。对于其他任何事情，请使用序列化程序，例如[**GM_SuperValue**](http://userscripts.org/scripts/show/107941)。即使是看起来很无辜的整数也可能导致默认值`GM_setValue()`崩溃。

2.  与其存储大量小变量，不如将它们包装在一个对象中并使用其中一个序列化程序存储它可能会更好。

* * *

最后请注意，[`localStorage`](http://diveintohtml5.info/storage.html)它在 javascript 中具有特定含义，并且`localStorage` ***是***特定于域的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-20T22:02:59.367

[http://wiki.greasespot.net/GM_setValue](http://wiki.greasespot.net/GM_setValue)

```
foo = "This is a string";

GM_setValue('myEntry', foo); 
```

[http://wiki.greasespot.net/GM_getValue](http://wiki.greasespot.net/GM_getValue)

```
bar = GM_getValue('myEntry');

bar = GM_getValue('myOtherEntry', "default value if no value was found"); 
```

[http://wiki.greasespot.net/GM_deleteValue](http://wiki.greasespot.net/GM_deleteValue)

```
GM_deleteValue('myEntry');

GM_deleteValue('myOtherEntry'); 
```

[https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Storage](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Storage)

```
foo = "this is a string";

localStorage.setItem('myEntry', foo);

bar = localStorage.getItem('pointer') || "default value";

localStorage.removeItem('myEntry'); 
```

要不就...

```
localStorage.myEntry = "this is a string";

bar = localStorage.myEntry; 
```

# opengl - 访问渲染的 OpenGL 图像

> ID：13889996
> 
> 赞同：0
> 
> 时间：2012-12-15T06:32:30.190
> 
> 标签：opengl

我正在使用 C++ 上的 OpenGL 渲染图像，并希望访问生成的图像以对其进行更多处理。（我正在渲染一个图像，有一个它应该看起来像的实际图像，并且想要计算两者之间的像素差异。）

不过，到目前为止，我只是将图像渲染到屏幕上，我不知道如何渲染图像，然后再访问绘制的直接像素。我并不特别关心我是否可以在屏幕上看到图像，我想要的只是图像被渲染到我可以从 CPU 访问的某个内存区域。你怎么做到这一点？

或者，是否可以将它应该看起来像的图像发送到 OpenGL 并计算 GPU 上的像素差异？任何一种选择都适合我，但我越快越好。（现在，我可以每秒渲染大约 100 帧，但还没有弄清楚如何进行比较。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:02:51.593

是的，你可以在 GPU 上做到这一点。将 2 个图像放入纹理中。用两个纹理绘制一个填充框架的四边形多纹理，并确保提供纹理坐标。编写片段着色器来计算差异。（当评论者问你是否想使用可编程管道时，这是它很重要的一个原因。如果你只使用固定功能管道，你就没有编写片段着色器的选项。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T06:40:24.247

显而易见的方法是使用[`glReadPixels`](http://www.opengl.org/sdk/docs/man/xhtml/glReadPixels.xml)将帧缓冲区中的渲染结果读取到主机内存。