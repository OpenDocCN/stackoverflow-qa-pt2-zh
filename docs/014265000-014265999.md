# StackOverflow 问答 14265000-14265999

# c - 将十六进制打印为字符串

> ID：14265002
> 
> 赞同：0
> 
> 时间：2013-01-10T18:41:36.173
> 
> 标签：c

请帮助我编写一个 C 语言代码，用于打印字符串中的十六进制。

我想做这样的事情：

```
main()
{

  char hex[]={ "00",    "01",   "02",   "03",   "04",   "05",   "06",   "07",   "08",   "09",   "0A",   "0B",   "0C",   "0D",   "0E",   "0F",..................., "FF"};

int Hex;

printf("\nEnter the Hex No.\n");
scanf("%d",&Hex);

printf("\n String value is:");
printf("%c",hex[Hex]);

} 
```

但是当我尝试在初始化字符串矩阵时实现它时，我的编译器出错了，所以你能告诉我问题是什么，或者你可能对此有更好的想法吗？

此致

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:44:52.077

您创建一个数组，`char`然后用字符串（即`char *`）对其进行初始化。

将类型更改为`char *`

```
char *hex[] = { ... }; 
```

它应该工作得更好。

您还需要更改输出，改为打印字符串

```
printf("%s", hex[Hex]); 
```

* * *

当然，更简单的方法是直接打印十六进制数：

```
printf("%02X", Hex); 
```

那么你就不需要数组了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:48:18.583

您以错误的方式初始化。实际方法是

```
 char *hex[] ={"00","01","02" ....} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:45:52.373

你需要使用`char* hex[] = {...}`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:44:41.523

您可以通过 0x## 表示法在 c++ 代码中以十六进制表示字符；以下将编译。

```
char hex[] = {0x01,0x02,...}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T19:23:57.497

我不太明白您要在这里做什么...如果您希望用户按照您的代码所暗示的那样***输入十六进制值：***

```
int Hex;

printf("\nEnter the Hex No.\n");//This tells me you want me to enter 12A4 (a hex value) 
```

然后你应该扫描一个十六进制值：

```
scanf("%x",&Hex);  // The %x tells scanf that the incoming value is base 16 
```

如果您希望用户以 dec（以 10 为基数）输入一个数字，那么您将以您想要的十六进制显示它：

```
int Hex;
printf("\nEnter the number to convert to Hex.\n");
scanf("%d",&Hex);

printf("\n String value is:");
printf("%#x",Hex); 
```

请注意，格式字符串`"%#x"`将以 format: 格式显示一个值，`0x<number>`这非常方便，无需`0x`自己添加。

无需弄乱 char 数组

# c# - Monotouch UITextField 只有数字

> ID：14265006
> 
> 赞同：4
> 
> 时间：2013-01-10T18:41:53.477
> 
> 标签：c#, xamarin.ios, uitextfield, character

我没有找到任何解决方案如何限制`textfield`Monotouch 中只允许数字。

我也希望有不超过 8 个字符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-22T20:19:51.510

为了`UITextField`在 MonoTouch 中实现仅数字 s，我使用以下代码：

```
var numberTextField = new UITextField { KeyboardType = UIKeyboardType.NumberPad };
numberTextField.ShouldChangeCharacters = (textField, range, replacement) =>
    {
        int number;
        return replacement.Length == 0 || int.TryParse(replacement, out number);
    }; 
```

并限制特定数量的字符：

```
const int maxCharacters = 8;
textField.ShouldChangeCharacters = (textField, range, replacement) =>
    {
        var newContent = new NSString(textField.Text).Replace(range, new NSString(replacement)).ToString();
        return newContent.Length <= maxCharacters;
    }; 
```

所以，结合：

```
const int maxCharacters = 8;
var numberTextField = new UITextField { KeyboardType = UIKeyboardType.NumberPad };
numberTextField.ShouldChangeCharacters = (textField, range, replacement) =>
    {
        var newContent = new NSString(textField.Text).Replace(range, new NSString(replacement)).ToString();
        int number;
        return newContent.Length <= maxCharacters && (replacement.Length == 0 || int.TryParse(replacement, out number));
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:51:46.210

实现这一点的最简单方法是创建自己的继承自 的控件`UITextField`，然后创建继承自的委托`UITextFieldDelegate`并将其分配为控件的`Delegate`.

在委托的`ShouldChangeCharacters`override 方法中，您可以对新输入的文本执行适当的测试，如果它无效，您可以返回 false 以防止更新文本字段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T17:08:38.537

在 MonoTouch/C# 中，这是将文本字段限制为数字的更好方法。

```
textCardNumber.ShouldChangeCharacters = (UITextField textField, NSRange range, string replace) => {
        int dummy;
        return replace.Length == 0 || int.TryParse (replace, out dummy);
}; 
```

编辑：增加了能够删除的能力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-11T23:45:57.963

如果您想将 UITextField 子类化为可重用代码，这就是我所做的。

```
[Register("CustomTextField")]
public class CustomTextField : UITextField
{
public CustomTextField() : base() {}

public CustomTextField(IntPtr handle) : base(handle)
{
     Delegate = new CustomDelegate();
}

private class CustomDelegate : UITextFieldDelegate
{
     public override bool ShouldChangeCharacters(UITextField textField, NSRange range, string replacementString)
     {
          int maxCharacters = 8;
          var newContent = new NSString(textField.Text).Replace(range, new NSString(replacement)).ToString();
          int number;
          return newContent.Length <= maxCharacters && (replacement.Length == 0 || int.TryParse(replacement, out number));
     }
} 
```

ShouldChangeCharacters 的内容只是从 redent84 的答案中复制和粘贴的。我只想给出这个答案来展示如何继承 UITextField。

此外，如果您使用我的方法，则不能像 Redent84 那样在 UITextField 上使用委托，因为您会收到运行时错误，说明委托已分配。

如果不创建委托子类，我不知道如何做到这一点。

此外，不要忘记将可视化编辑器中文本字段的类更改为 CustomTextField 或您决定命名的任何名称。

# sql - SQL：对动态远程服务器执行查询

> ID：14265010
> 
> 赞同：0
> 
> 时间：2013-01-10T18:42:02.430
> 
> 标签：sql

我希望能够根据本地查询的结果执行远程查询。

例如：

```
DECLARE @REMOTESERVER VARCHAR(10)

Select TOP 1 @REMOTESERVER = RemoteServer from TABLE 
```

--根据我上面检索到的值在远程服务器上执行下一个查询

```
Select * from tblCustomers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:50:49.930

您使用的是什么 RDBMS？有些人不支持这样做的纯 sql 方式。其他的，如 SQL Server，可能支持这种情况。远程服务器是否可以通过您可以访问的链接服务器访问。然后，您可以使用动态 sql 来创建您的 sql 字符串。像这样的东西应该在 SQL Server 中工作：

```
SET @Sql = 'SELECT * FROM [' + @RemoteServer + '].dbname.schema.tblCustomers'
EXEC @Sql 
```

这是一篇关于链接服务器的帖子：[https ://stackoverflow.com/a/4091984/1073631](https://stackoverflow.com/a/4091984/1073631)

# coffeescript - 如何将 --watch 参数添加到咖啡命令？

> ID：14265014
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:42:16.063
> 
> 标签：coffeescript

我有这个：`coffee --output extension/javascripts/ --compile app.coffee`我想添加 --watch 参数。我该如何实施？

因为当我这样做时，它不起作用

```
─$ coffee --output extension/javascripts/ --compile app.coffee --watch
File not found: --watch.coffee 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:44:33.863

```
coffee -o extension/javascripts/  -cw app.coffee 
```

您可以组合命令。（`cw`编译和观看也是如此）

# android - 不幸的是 test1 已经停止

> ID：14265025
> 
> 赞同：-4
> 
> 时间：2013-01-10T18:43:09.750
> 
> 标签：android

请帮助我想在模拟器上运行我的应用程序，但它没有运行并且不幸地一直显示我

```
package com.example.test1;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button kh = (Button)findViewById(R.id.imageButton3);
        kh.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent kh = new Intent(MainActivity.this , kh.class);
                startActivity(kh);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:46:07.617

你有`Button kh`......在`onClick()`你将意图发送到那个按钮！`Intent kh = new Intent(MainActivity.this , kh.class);`

我想你想要别的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:46:21.980

在您的代码中，`kh.class`应替换为`<Target_Activity>.class`您要启动的活动..

```
Intent kh = new Intent(MainActivity.this , <Target_Activity>.class);
startActivity(kh); 
```

还要确保您在Android 应用程序清单文件的标记中`<Target_Activity>`可用。`<activity />`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T18:49:12.680

`MainActivity`例如，使用不同的名称创建相同的 Activity`SampleActivity`并调用它

```
Intent kh = new Intent(MainActivity.this , SampleActivity.class);
startActivity(kh); 
```

并将该活动包括在`AndroidManifest.xml`

```
<activity android:name=".SampleActivity"
        android:label="@string/yourlabel"></activity> 
```

它应该工作。

# php - 调用包含 javascript 变量的 PHP 函数

> ID：14265026
> 
> 赞同：-5
> 
> 时间：2013-01-10T18:43:09.253
> 
> 标签：php, javascript, function, variables

我网站的用户将能够输入两个数字。一个用于表中的列数，另一个用于表中的行数。然后我的 javascript 构造代码来创建这个表。我的意思是表的开始标签和第一行被添加到变量中。然后它为行中的第一个单元格添加开始单元格标记。

现在我在 javascript 代码中调用我的 PHP 函数，如下所示：

```
<?php getCellInfo(1) ?> 
```

此函数采用 1，查询 mysql 数据库中主键为 1 的记录。然后该函数回显与主键 1 关联的存储名称。

然后，我将标签添加到包含表格代码的变量中以关闭此单元格。我对用户输入的列数重复此操作，这是通过 while 循环完成的。当循环完成时，我添加代码以结束行并开始下一个等，直到我关闭表代码。

然后我更改 div 的 html 以显示表格。这可行，但显然只能用相同的信息填充所有单元格。我想增加传递给 PHP 函数的数字，我可以在 javascript 中执行此操作以在您沿单元格移动时增加数字，但我不知道如何执行此操作。

我尝试定义一个 javascript 变量并将其传递给 PHP 函数。该变量被称为 cellNo ，我尝试了这个：

```
<?php getCellInfo(cellNo) ?> 
```

但这不起作用，任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:01:32.060

PHP 在服务器上运行（在客户端加载页面之前）

JS 在客户端运行，而不是在服务器上运行（显然有像[node.js](http://nodejs.org/)这样的服务器端 JS 库，但这是题外话）

由于它们在不同时间运行，因此无法将 JS 变量传递给 PHP 函数（因为 JS 变量尚未实例化）。

换句话说：当你调用一个 PHP 函数时：

```
myCustomFunction(jsVariable); 
```

`jsVariable`尚未定义。

**那我该怎么办？**

您可以通过 AJAX 将您的 JS 变量发送到后台的 PHP 页面（即当用户单击按钮等时）

**我在哪里可以了解 AJAX 和 PHP？**

这是有关此主题的初学者教程：

[http://www.handyphp.com/index.php/PHP-Resources/Handy-PHP-Tutorials/what-is-ajax-a-beginners-ajax-tutorial.html](http://www.handyphp.com/index.php/PHP-Resources/Handy-PHP-Tutorials/what-is-ajax-a-beginners-ajax-tutorial.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-09T18:59:50.210

`fetchdata`是在那个 php 文件中预先声明的 php 函数

```
$('#mytable').append(" < ? p h p echo fetchdata(2);  ?>"); 
```

# javascript - 以纯文本而不是文本框显示 javascript 输出

> ID：14265027
> 
> 赞同：-6
> 
> 时间：2013-01-10T18:43:12.280
> 
> 标签：javascript

[已解决] 我试图在结果下方显示两个数字的总数，但我不能。请帮助我，我是 javascript 新手。我还在学习。顺便说一句，我是stackoverflow的新手，所以，我无法发布图片。如果你帮助我，这真的很有用

我试过这个

```
 function append()
{
 var num1=Number(document.adding.num1.value);
 var num2=Number(document.adding.num2.value);
 var num3=num1+num2;
 document.getElementById("result").innerHTML = num3;
} 
```

图片链接：[https ://docs.google.com/open?id=0B7s0BYiHsMBtNEx5cVFmRzZHVDQ](https://docs.google.com/open?id=0B7s0BYiHsMBtNEx5cVFmRzZHVDQ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:50:34.907

您可以创建一个 div 标签并将您的结果插入到文本“结果”旁边

# javascript - jQuery.maskedInput - 动态切换输入掩码

> ID：14265028
> 
> 赞同：0
> 
> 时间：2013-01-10T18:43:17.893
> 
> 标签：javascript, jquery, input, mask

我有一个需要掩码的文本字段。根据其他 SO 线程的建议，我正在使用这个 jQuery 插件来执行此操作： http: [//digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)。

但是，我遇到了问题。有 2 种不同的掩码可以应用于我的输入字段。只有在输入前 4 个字符后才能确定使用哪个字符。所以这就是我所拥有的：

```
$('#user-input').keyup(function () {
     current_val = $(this).val();
     if (current_val.replace(/\s*$/, "").length == 4){
         mask = determineMask(current_val);
         $(this).unmask();
         $(this).mask(mask);
     }
}); 
```

当“$(this).mask(mask)”行触发时，所有现有输入都将被删除。有谁知道如何防止这个包这样做？是否有另一个插件、库、代码片段等更适合我在这里尝试做的事情？

# hibernate - 如何使用 JPA 对第三方实体进行约束？

> ID：14265029
> 
> 赞同：0
> 
> 时间：2013-01-10T18:43:18.050
> 
> 标签：hibernate, jpa, persistence

所以，我有一个包含三个实体的模型：*Document*、*Template*和*Origin*。

我的问题的主要来源是我需要*Document*的**编号**对于*Template*的*Source*是唯一的，但是由于原点是`Template`（而不是`Document`）的属性，因此我无法直接为其创建唯一约束——前进的方式。

澄清一下，代码中的模型如下所示：

**起源：**

```
@Entity
public class Origin {
    @Id private Long id;
    // ... some other fields
} 
```

**模板：**

```
@Entity
public class Template {
    @Id private Long id;
    @Column private Origin origin;
    // ... some other fields
} 
```

**文档：**

```
@Entity
public class Document {
    @Id private Long id;
    @Column Template template;
    @Column Long number;
    // ... some other fields
} 
```

因此，Origins 有多个关联的模板，您可以使用模板为 Origin 创建文档。

正如我所说，我的问题的根源是每个来源的文档*编号*必须是唯一的。我能想到的唯一方法是使用*originId*的附加字段，并尝试保持更新。

所以，我试图做这样的事情：

```
@Entity
@Table("documents",
     uniqueConstraints = @UniqueConstraint(columnNames = {"number", "originId"}))
public class Document {
    @Id private Long id;
    @Column Template template;
    @Column Long number;
    // ... some other fields

    // added extra field to use in the constraint:
    @Column Long originId;

    @PrePersist
    @PreUpdate
    private void updateConstraintValue() {
        this.originId = getTemplate().getId();
    }
} 
```

[**注意：**为简洁起见，省略了 getter、setter 和其他样板]

但这并不总是适用于 JPA，因为 Template 对象在持久/更新事件时不需要是托管实体（只需要设置一个 id 才能使关系工作）。

然后我现在认为这可能不是最好的方法。所以，我的问题是：

*   我还有什么其他选择？JPA（或 Hibernate）API 是否有更好的方法来处理这个问题？（我正在使用 JPA 2 和 Hibernate 3.6.10，顺便说一句）
*   我是否应该只信任客户端代码将 Template 对象与具有正确 id 的 Origin 对象一起传递（即使它可能与数据库中的不同）？
*   我会更好地在 Document 中映射 Origin 本身，并信任客户端代码以使其与模板保持同步吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:17:05.660

我可能遗漏了一些东西，但是您能否完全摆脱原始 ID 并简单地为文档使用生成的 ID 而不是手动创建一个？您已经有一个 ID 列。看起来您需要做的就是指定生成 ID。

```
@Entity
@Table("documents" )
public class Document {
    @Id 
    @GeneratedValue( strategy = GenerationType.IDENTITY )
    private Long id;

    @Column Template template;

    @Column Long number;
    // ... some other fields

} 
```

注意：我添加了 GeneratedValue 注释并删除了源 ID

# java - Java计时器在随机时间后未触发

> ID：14265031
> 
> 赞同：1
> 
> 时间：2013-01-10T18:43:31.763
> 
> 标签：java, swing, timer

我有一个 Java Swing 计时器，它每秒更新一个标签。启动计时器后，标签每秒更新一次，一切正常。

然后在从执行到执行的随机时间间隔之后，标签停止更新。我在计时器更新代码中放置了一个断点，它不再被触发。

我还在所有我通常会停止计时器的地方放置了日志语句，但这些地方都没有被调用。

可能是什么问题呢？

编辑：这是代码示例

```
 ActionListener actionListener = new ActionListener() {
        @Override
        public void actionPerformed(java.awt.event.ActionEvent arg0) {
            secondsRemaining--;
            System.out.println("Seconds remaining:" + secondsRemaining);

            //update the progressbar
            double initialLength = currentSettings.getLength()*60;
            double progress = (initialLength - secondsRemaining)/initialLength ;
            progressBarTime.setProgress(progress);

            //update the progress label
            progressPercentage.setText(((int)(progress * 100))  + "%");

            if (secondsRemaining >= 0) {
                updateTimeRemaining(secondsToString(secondsRemaining));
            } else {
                System.out.println(">0 seconds TIMER STOPPED with the number of seconds = " + secondsRemaining);
                treatmentTimer.stop();

                // set the status to Finished
                currentState = State.FINISHED;
            }
        }
    } 
```

和定时器初始化：

```
tTimer = new Timer(1000, actionListener);
tTimer.start(); 
```

奇怪的是，该程序在安装了 JRE 7u7 的 PC 上运行良好，即计时器成功更新了标签，但我已经在两台 7u10 的 PC 上进行了尝试，并且两者都发生了这个计时器停止问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:54:40.270

可能会抛出异常，使用 try catch 或 Use UncaughtExceptionHandler 进行跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:30:55.020

所以我想我解决了这个问题。由于某种未知原因，垃圾收集器正在删除计时器实例。我放了一个

```
System.out.println("message"); 
```

在计时器的 actionlistener 内部，这样它就不会被垃圾收集。

# java - 一有子线程抛出异常就返回主线程

> ID：14265034
> 
> 赞同：6
> 
> 时间：2013-01-10T18:43:36.660
> 
> 标签：java, multithreading, exception, executorservice

我正在使用`Executors.newCachedThreadPool()`and`invokeAll`和 List of `Callable`s 来进行长时间运行的多线程处理。我的主线程被阻塞，直到所有线程都完成并且我可以处理`invokeAll`. 但是，如果其中一个s 抛出异常并终止其他线程，我想`invokeAll`立即返回。`Callable`

使用`execute`而不是`invokeAll`会阻止第一个`future.get()`不需要是抛出执行的那个。

使用忙等待循环遍历所有期货并检查`isDone()`似乎也不是最好的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T18:48:55.773

您可以使用更复杂的同步机制，例如锁存器、屏障或信号量，但请查看[`ExecutorCompletionService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html). 它是一个轻量级的包装器`ExecutorService`，可让您收听第*一个*完成的任务。这是一个简单的例子：

```
final ExecutorService executorService = Executors.newCachedThreadPool();
final ExecutorCompletionService<String> completionService = 
            new ExecutorCompletionService<String>(executorService);
for (int i = 0; i < 10; ++i) {
    completionService.submit(new Task());
}
completionService.take().get(); 
```

代码非常简单。首先你`executorService`用`completionService`. 以后你用它一个接一个地提交任务。最后一行很关键。它需要完成的第一个任务并尝试检索结果。如果它抛出一个异常，它将在这里被重新抛出，并用`ExecutionException`：

```
try {
    completionService.take().get();
} catch (ExecutionException e) {
    e.getCause();       //this was thrown from task!
} 
```

在`catch`块内部，您可以以某种方式处理异常，例如取消剩余任务或关闭整个线程池。

当然，您可以通过调用`take()`十次来等待所有任务完成。只要至少有一个任务完成，每个调用都会阻塞。

# apache-poi - 使用 POI 教程编写日期

> ID：14265040
> 
> 赞同：1
> 
> 时间：2013-01-10T18:43:54.350
> 
> 标签：apache-poi

我正在通过以下教程在 Excel 表 [http://poi.apache.org/spreadsheet/quick-guide.html#CreateDateCells](http://poi.apache.org/spreadsheet/quick-guide.html#CreateDateCells)中使用 poi API 编写日期， 但是当我尝试运行代码时，提交的日期显示“# ##" 而不是实际日期！！这是代码片段

```
CellStyle cellStyle = wb.createCellStyle(); 
cellStyle.setDataFormat(createHelper.createDataFormat().getFormat("m/d/yy h:mm"));
 Cell cell= row.createCell(4);
 cell.setCellValue(new Date());
 cell.setCellStyle(cellStyle); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:26:31.750

当单元格的格式设置为结果文本太长而无法在单元格中显示所有内容时，Excel 会显示一个充满“#”符号的单元格（例如“########”）。当您在 Excel 中打开电子表格时，将列加宽足够长，它将显示格式化的日期。

要让 POI 创建电子表格以使列从一开始就足够宽，那么您需要自己设置列宽。

```
sheet.setColumnWidth(columnIndex, width) 
```

在传入之前将宽度乘以 256，因为此方法使用的宽度单位是字符的 1/256。这是 Javadoc：[工作表](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/Sheet.html)

# three.js - three.js 和 TrackballControls - 保持水平线

> ID：14265043
> 
> 赞同：1
> 
> 时间：2013-01-10T18:44:05.523
> 
> 标签：three.js, webgl

我正在尝试修改 TrackballControls.js，使其旋转类似于 OrbitControls.js，其中地平线保持平坦，但保持在场景（特别是 collada 建筑模型）上和周围旋转的能力。我现在大部分时间都在努力解决这个问题，但我是一名设计师，而不是程序员。:-) 我什至不确定我是否应该专注于 this.rotateCamera 和/或 this.update。

（顺便说一句，我只会使用 OrbitControls.js，但它不支持平移，这在查看大型 collada 建筑模型时是必要的。）

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-10T18:21:29.033

自从提出这个问题以来已经有一段时间了，但是我遇到了同样的问题并且在网上没有找到太多讨论，所以我想我会发布我的解决方案。

如果你必须使用 TrackballControls 并且你想要一个平坦的地平线，你可以通过在 'this.rotateCamera' 方法的末尾添加以下行来简单地编辑 TrackballControls.js 库

```
this.object.up = new THREE.Vector3(0,1,0); 
```

这会将相机向上方向锁定在 (0,1,0) 方向（即 y 方向）。整个修改后的方法函数将显示为：

```
this.rotateCamera = function () {

    var angle = Math.acos( _rotateStart.dot( _rotateEnd ) / _rotateStart.length() / _rotateEnd.length() );

    if ( angle ) {

        var axis = ( new THREE.Vector3() ).crossVectors( _rotateStart, _rotateEnd ).normalize();
            quaternion = new THREE.Quaternion();

        angle *= _this.rotateSpeed;

        quaternion.setFromAxisAngle( axis, -angle );

        _eye.applyQuaternion( quaternion );
        _this.object.up.applyQuaternion( quaternion );

        _rotateEnd.applyQuaternion( quaternion );

        if ( _this.staticMoving ) {

            _rotateStart.copy( _rotateEnd );

        } else {

            quaternion.setFromAxisAngle( axis, angle * ( _this.dynamicDampingFactor - 1.0 ) );
            _rotateStart.applyQuaternion( quaternion );

        }

    }

    // Lock the camera up direction
    this.object.up = new THREE.Vector3(0,1,0);

}; 
```

# c# - 在 C# 中使用字符串名称动态调用 Void 方法

> ID：14265046
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:44:10.633
> 
> 标签：c#, string, dynamic, methods, invoke

我的应用程序当前正在从数据库中读取我需要调用的方法列表，并将它们放入字符串中。

我希望能够通过它们的名称调用这些方法，并将参数传递给它们。

这是我想要实现的一个简单示例：

```
 protected void Page_Load(object sender, EventArgs e)
      {
          ...
          ...
          string MethodOne = "CombineText";
          string WordOne = "Hello";
          string WordTwo = "World";

          CombineText(WordOne, WordTwo);
      }

  public void CombineText(string WordOne, string WordTwo)
      {
          Console.WriteLine(WordOne+" "+WordTwo);
      } 
```

我在网上看到很多关于调用静态方法的示例，但我不知道如何从字符串中按名称调用 Public Void 方法。

有人有什么想法吗？非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:47:30.780

您可以使用[反射](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)。

```
MethodInfo mi = this.GetType().GetMethod(MethodOne);
mi.Invoke(this, new object[] { WordOne, WordTwo }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:51:01.733

我建议使用 a`switch`而不是尝试根据其名称调用该方法。

```
switch(MethodOne)
{
   case "CombineText":
     CombineText(WordOne, WordTwo);
     break;
   default:
     Console.WriteLine("Invalid function: " + MethodOne);
     break;
} 
```

这具有确保您只接受有效参数的优点，并提供了一种在评估之前基于每个函数清理输入的方法（例如，您可能想从 WordTwo 中为一个函数去除空格，或者您想通过较长的一个作为第一个参数，无论顺序如何。）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:50:42.360

你需要看反射。你需要做这样的事情：

```
Type type = GetType();
MethodInfo method = type.GetMethod(Method);
Method.Invoke(this, new object[] { WordOne, WordTwo }); 
```

[http://msdn.microsoft.com/en-us/library/8zz808e6.aspx](http://msdn.microsoft.com/en-us/library/8zz808e6.aspx)

[http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx](http://msdn.microsoft.com/en-us/library/a89hcwhh.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:47:43.663

假设方法是当前类型的实例方法：

```
MethodInfo method = this.GetType().GetMethod(MethodOne);
method.Invoke(this, new[] { WordOne, WordTwo }); 
```

# ios - 无法在objective-c中运行函数

> ID：14265048
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:44:22.887
> 
> 标签：ios, objective-c

我运行这个函数：

```
- (void)insertRows {
    [_objects insertObject:[NSDate date] atIndex:0];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

它必须运行这个函数

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

    NSDate *object = _objects[indexPath.row];
    cell.textLabel.text = [object description];
    return cell;
} 
```

但是这个功能没有运行...请帮助如何运行tableView...功能

```
- (IBAction)insertObject {
    [[MasterViewController alloc] insertRows];
} 
```

- 此代码运行 insertRows，我通过断点检查

```
- (IBAction)insertObject:(id)sender {
    [_objects insertObject:[NSDate date] atIndex:0];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0   inSection:0];
    [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
    NSLog(@"log:insert-indexPath: %i",indexPath.row);
    NSDate *object = _objects[indexPath.row];
    NSLog(@"log:insert-object %@",object.description);
 } 
```

- 使用它，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:04:26.913

这段代码有很多问题：

• 可能想要`addObject:`，`_objects`不是`insertObject:atIndex:`。

•`[[MasterViewController alloc] insertRows];`没有意义。必须有一个`init`地方。

• 您永远不应该将该`description`方法用作向用户显示某些内容的方法。 `description`仅用于调试和记录。

• 要触发 的调用`tableView:cellForRowAtIndexPath:`，您通常`reload`需要使用表。即，该方法由表视图在更新自身时调用。

我建议从[table view programming guide](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)开始。

# sql-server-2008 - 为 VS 2008 安装 BI 功能时出现问题

> ID：14265051
> 
> 赞同：0
> 
> 时间：2013-01-10T18:44:37.890
> 
> 标签：sql-server-2008, sql-server-2005, sql-server-2008-r2, business-intelligence

我在为 Visual Studio 2008 安装 Business intilligence 时遇到一个问题。当我安装此 BI 工具时，BI 功能被添加到 Visual Studio 2010 而不是 Visual Studio 2008。我希望在 VS 2008 中使用此功能。安装文件适用于 sql server 2008 R2。

有没有人有这个问题的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:09:23.240

1.  卸载 BI 工具
2.  卸载视觉工作室 2010
3.  安装 BI 工具
4.  安装视觉工作室 2010

祝你好运

# maven - 如何做maven组织范围的pom管理？

> ID：14265056
> 
> 赞同：0
> 
> 时间：2013-01-10T18:44:48.750
> 
> 标签：maven, jenkins, parent, pom.xml, nexus

嗨，我正在我们的项目中设置 maven+jenkins+nexus，并阅读了几乎所有关于这个主题的帖子。我最终决定使用一个仅包含“distributionManagement”的主 POM 项目，该项目包含对 nexus 版本和快照引用的引用以及一些常见的依赖项，例如几乎所有项目都使用的 log4j、junit。

这是我的情况。我有项目 A 和 B。B 依赖于 A（所以 B pom.xml 依赖于 A.jar）它们都有指向主项目的父标记。当我尝试使用 jenkins 编译项目-B 时，我收到错误消息，指出它无法解决 log4j、junit 等依赖项。Jenkins settings.xml 具有 nexus 的凭据。而且我还没有在nexus上停用匿名用户。

第二个问题，由于某种原因，当我用联系详细信息覆盖我的用户 settings.xml 时，我的 mac 上的 eclipse（我使用 juno）无法成功编译。

```
<mirrors>
<mirror>
  <!--This sends everything else to /public -->
  <id>nexus</id>
  <mirrorOf>*</mirrorOf>
  <url>http://myorg.nexusserver.com:8081/nexus/content/groups/public</url>
</mirror>
</mirrors> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:45:44.557

看起来这是我的 Eclipse 缓存的问题。一旦我关闭-重新打开+刷新，它就开始正常工作了。

# php - 需要一些有关创建 jEditable 自定义输入的指导

> ID：14265058
> 
> 赞同：0
> 
> 时间：2013-01-10T18:44:53.573
> 
> 标签：php, javascript, jquery, mysql, jeditable

我正在使用 jEditable 插件和以下代码在打开和关闭之间切换页面上的一系列设置。

```
$(document).ready(function() {
$('.editable_select').editable(''http://someexamplepage.com/save.php', { 
    indicator: '<img src="/images/spinner.gif">',
    data   : " {'&#x2713;':'&#x2713;','&#x2717;':'&#x2717;'} ",
    tooltip : 'Click to Edit',
    type   : 'select',
    onblur : 'submit',
    style  : 'inherit'
    });
}); 
```

然后在html中：

```
<b class="editable_select" id="setting1" style="display:inline">&#x2713;</b> 
```

单击指示打开的复选标记时，它会生成一个下拉菜单，其中带有复选标记为打开，X 代表关闭，然后用户可以选择它。我更希望单击 check/X 不会打开下拉菜单，而是将当前的 On 或 Off 设置发送到 save.php 文件。然后我可以只编写 save.php 文件来返回相反的值，这样单击就可以在两者之间切换而无需打开任何类型的编辑窗口。我尝试了以下代码：

```
$(document).ready(function() {
$('.editable_select').editable('http://someexamplepage.com/save.php', { 
    indicator: '<img src="/images/spinner.gif">',
    tooltip : 'Click to Edit',
    onclick : 'submit',
    style  : 'inherit'
}); 
```

});

但是单击文本仍然会打开一个小编辑窗口，这是我不想要的。我还是 JavaScript 和 jQuery 的新手，所以非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:37:04.660

我不会为此使用插件，而是在`ready`事件上运行一个非常简单的 jQuery。

我会将当前状态作为 DOM 上的数据属性包含在内，因此将您的标签更改为：

```
<b class="editable_select" id="[ID FOR ITEM]" data-state="checked">&#2713;</b> 
```

然后执行以下操作：

```
$(function(){
    var update_dom = function(data){
        var item_id = data.id;
        var state;
        data.state === 'checked' ? state = '✓' : state = '✗';
        $('#'+item_id).data('state', data.state).html(state);
    };

    var selected = function(evt){
        var item_id = $(this).attr('id');
        var state = $(this).data('state');
        $.ajax({
            url: PATH_TO_SCRIPT, 
            data: {id: item_id, state: state},
            type: "POST",
            success: update_dom
        });
    }

    $('.editable_select').click(selected);
}); 
```

这会将`click`事件绑定到所有具有`editable_select`. 当您单击它时，它将调用该`selected`函数，该函数将从 DOM 获取数据并调用您的脚本。当你的脚本完成后，它应该返回一个响应（JSON 在这里会很好），并且，`success`处理程序将更新 DOM 并将状态显示给用户。

# ember.js - 从控制器访问 Ember 控制器属性

> ID：14265060
> 
> 赞同：0
> 
> 时间：2013-01-10T18:45:05.353
> 
> 标签：ember.js

我有以下控制器：

```
App.ShowController = Ember.Controller.expend({
   buttonTitle: 'Create'
}); 
```

以及以下模板`show.handlebars`

```
<a href='#'>{{buttonTitle}}</a> 
```

但文本没有呈现。是否有特殊的调用来访问该属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:53:16.030

通常，当一个视图被显示（通过路由器）时，视图的上下文会自动设置给控制器，所以应该没有什么特别的。

这是一个示例，其中`MyApp.IndexController`自动设置为的上下文`IndexView`（并且它的模板是`index`模板）：

```
MyApp = Ember.Application.create({});

MyApp.Router = Ember.Router.extend();

MyApp.Router.map(function(match) {
  match('/').to('index');
});

MyApp.IndexController = Ember.Controller.extend({
  buttonTitle: "create"
}); 
```

模板：

```
<script type="text/x-handlebars" data-template-name="index">
  {{buttonTitle}}
</script> 
```

你可以[在这个 JSFiddle 上试试](http://jsfiddle.net/pASLs/)。

注意：我在这里使用 Ember v1.0.0-pre.2-239。将此示例升级为 master 需要进行一些更改

# ios - Windows Phone 等效于 iOS 的 .mobileconfig

> ID：14265062
> 
> 赞同：1
> 
> 时间：2013-01-10T18:45:13.950
> 
> 标签：ios, windows-phone-7, windows-phone-8, mdm

我正在尝试在不安装应用程序的情况下检索 Windows Phone 设备的 UDID。显然，您可以通过向用户发送一个签名的 .mobileconfig 文件来为 iOS 设备执行此操作，该文件安装一个将设备的 UDID 作为查询字符串参数附加的网络剪辑。

请参阅：[在移动 safari 上使用 javascript 从 Iphone 读取 UDID](https://stackoverflow.com/questions/2072240/read-udid-from-iphone-with-javascript-on-mobile-safari)

我想确定在 Windows Phone（7 或理想情况下为 8）上是否有可能发生这样的事情。基本上通过电子邮件将文件发送给安装活动磁贴的用户，该磁贴链接到在查询字符串上添加了 UDID 的站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:48:13.153

不，不幸的是，据我所知，没有这样的事情......不过我很想被证明是错误的：P

# .htaccess - Wordpress - 将外部 .php 请求重定向到无扩展名 url

> ID：14265067
> 
> 赞同：1
> 
> 时间：2013-01-10T18:45:27.290
> 
> 标签：.htaccess

我有一个客户，他的旧网站在每个网址上都有 .php 扩展名。

我使用 Wordpress 建立了他们的新网站。没有 .php 扩展名的 url 都是一样的。我使用 .htaccess 重写来删除 .php 扩展名，效果很好，但问题是我无法再访问 wordpress 的管理区域......这是我添加的内容：

RewriteCond %{THE_REQUEST} ^(.+).php([#?][^\ ]*)?\ HTTP/ RewriteRule ^(.+).php$ [http://www.example.com/](http://www.example.com/) $1 [R= 301,L]

有什么想法吗？

# php - 在 jquery ui 模式中加载 ajax 数据（提交后）

> ID：14265071
> 
> 赞同：0
> 
> 时间：2013-01-10T18:45:33.943
> 
> 标签：php, ajax, jquery-ui, codeigniter

我想将输入表单中的数据传递给我的 codeigniter 控制器，然后通过 JSON 返回一个视图，该视图随后将在 jquery ui 对话框模式中打开......唷！

但它不起作用。提交时，它刷新页面，也没有任何警报工作（如果我把它放在 findcat() 函数的开头）。

这是我的 Javascript 函数：

```
function findcat(){
    var valinput = $('#category_form').val();
    $.ajax({
        type: "POST",
        async: true,
        url: 'http://rickymason.net/omnia/ajax/findcategory',
        dataType: 'json', 
        data: { valinput: valinput },
        success: function(content){
            $('#category_modal').html(content['content']);
            $('#category_modal').dialog({
                autoOpen: false,
                title: 'Hello',
                modal: true,
                height: 350,
                resizable: false 
            });
        return false;
        }
    });  
} 
```

还有我的 HTML：

```
<div class="cus_input">
    <form id="category_form" onsubmit="return findcat();">
        <input type="text" id="category_input" name="category_input" placeholder=" Find Category"/>
        <input type="image" id="category_submit" src="<?php echo base_url() ?>img/board/icons/add.jpg" id="homeSubmit" value="X"/>
    </form>
</div> 
```

我的控制器只是一个模型，用于尝试发回某种内容：

```
 public function findcategory()
    {
        $page['content'] = 'hello-testing';
        return json_encode($page);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:03:23.160

我不明白的是，为什么您不在表单上使用提交按钮，而**codeigniter**控制器应该`echo`和不使用`return`。无论您的形式如何，这里都有适合您的解决方案。

**查询：**

```
function findcat(){
    var valinput = $('#category_form').val();
    $.ajax({
        type: "POST",
        async: true,
        url: 'http://rickymason.net/omnia/ajax/findcategory', //you can use site_url here whic is better for you
        dataType: 'json', 
        data: { valinput: valinput },
        success: function(content){
            $('#category_modal').html(content.content);//not content['content'] 
            $('#category_modal').dialog({
                autoOpen: false,
                title: 'Hello',
                modal: true,
                height: 350,
                resizable: false 
            });
        }
    });  
    return false; //should be in your function scope and not the ajax scope
} 
```

对于您的控制器：

```
public function findcategory()
    {
        $page['content'] = 'hello-testing';
        echo json_encode($page); // echo and not return for codeigniter
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:55:01.237

假设`return false;`用于阻止表单提交，它在错误的位置。它应该直接在`findcat`你拥有它的 ajax 成功函数中。

```
function findcat(){
    var valinput = $('#category_form').val();
    $.ajax({
        type: "POST",
        async: true,
        url: 'http://rickymason.net/omnia/ajax/findcategory',
        dataType: 'json', 
        data: { valinput: valinput },
        success: function(content){
            $('#category_modal').html(content['content']);
            $('#category_modal').dialog({
                autoOpen: false,
                title: 'Hello',
                modal: true,
                height: 350,
                resizable: false 
            });
        }
    });  
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:35:26.077

对于遇到此问题的任何人..感谢上述评论，这是我的解决方案。

关于页面提交和重新加载。

Jquery`.live`会处理它。在您的 JS 中，只需添加以下内容，

`$('#category_form').live('submit', function(){`

在你的功能前面。这将捕获您的提交，运行该功能，然后重新加载页面。为了防止重新加载，在函数末尾添加`return false;`

关于模态和 AJAX 问题...在我的原始代码中，没有“准备”对话框。

由于我的新手编程能力，我没有意识到这一点，但是您需要先使用以下代码设置对话框 div：

```
$('#category_modal').dialog({
    autoOpen: false,
    title: 'Hello',
    modal: true,
    height: 350,
    resizable: false
}); 
```

之后，`$("#category_modal").dialog("open");`在 ajax 请求之后使用它来“激活”它。

```
$('#category_form').live('submit', function(){
    var valinput = $('#category_input').val();
    $.ajax({
        type: "POST",
        async: true,
        url: 'http://rickymason.net/omnia/ajax/findcategory',
        dataType: 'json', 
        data: { valinput: valinput },
        success: function(content){
            $('#category_modal').html(content['content']);
            $("#category_modal").dialog("open");
        }
    });  
    return false;
}); 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:49:14.780

您的表单可能正在执行导致刷新的 POST。

拿

```
onclick="return findcat(); 
```

从表单标签中取出，然后将其放在 a 标签上。

```
<a href="#" onclick="return findcat();">Click</a> 
```

# spring - 如何将 Spring Batch Admin 与 Spring 3.2 和 @Schedule 注释一起使用？

> ID：14265076
> 
> 赞同：3
> 
> 时间：2013-01-10T18:45:53.167
> 
> 标签：spring, spring-batch, spring-batch-admin

我将 Spring Batch Admin 集成到我的应用程序中，该应用程序使用 Spring 3.2。

现在我尝试用 注释一个方法`@Scheduled`并用`<task:annotation-driven/>`. 当我启动 web 应用程序时，我得到了这个异常：

```
Caused by: java.lang.IllegalStateException: @Scheduled method 'removeInactiveExecutions'
found on bean target class 'SimpleJobService', but not found in any interface(s) for bean
JDK proxy. Either pull the method up to an interface or switch to subclass (CGLIB) proxies 
by setting proxy-target-class/proxyTargetClass attribute to 'true' 
```

`SimpleJobService`Spring Batch Admin 在方法上使用了这个注解。

在春季 3.2 中。似乎没有必要将 cglib 放入类路径中，并且 spring-asm 也已过时。`spring-asm`我从 spring-batch-integration 中排除了依赖项。

我可以在哪里设置`proxy-target-class=true`（我已经尝试过`<tx:annotation-config>`了`<aop:config>`？

如何`@Scheduled`在我的应用程序中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-22T10:57:38.373

在 META-INF\spring\batch\override 中添加 execution-context.xml，将 SimpleJobServiceFactoryBean 的代理设置为目标类

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!-- Original jobRepository missing read ${batch.isolationlevel} -->
    <bean id="jobRepository"
        class="org.springframework.batch.core.repository.support.JobRepositoryFactoryBean"
        p:dataSource-ref="dataSource" p:transactionManager-ref="transactionManager" p:isolationLevelForCreate = "${batch.isolationlevel}"/>

    <!-- Original jobService conflicted with @EnableScheduling -->
    <bean id="jobService"
        class="org.springframework.batch.admin.service.SimpleJobServiceFactoryBean">
        <aop:scoped-proxy proxy-target-class="true" />
        <property name="jobRepository" ref="jobRepository" />
        <property name="jobLauncher" ref="jobLauncher" />
        <property name="jobLocator" ref="jobRegistry" />
        <property name="dataSource" ref="dataSource" />
        <property name="jobExplorer" ref="jobExplorer" />
        <property name="transactionManager" ref="transactionManager" />
    </bean>

</beans> 
```

# linux - 为什么在扩展宏“内联”时检测到递归？

> ID：14265078
> 
> 赞同：0
> 
> 时间：2013-01-10T18:45:55.083
> 
> 标签：linux, gcc, kernel

我正在 x86_64 linux 主机上构建 32 位 (i386) linux 内核。主机和目标版本都是 2.6.9。我正在从 linux 源代码树中执行以下操作：

```
make ARCH=i386 CFLAGS='-m32 -Iinclude/asm/mach-default' AFLAGS='--32'  menuconfig
make ARCH=i386 CFLAGS='-m32 -Iinclude/asm/mach-default' AFLAGS='-m32 -Iinclude/asm/mach-default' 
```

我会从第二个 make 中遇到以下错误：

```
 AS      arch/i386/kernel/entry.o
In file included from include/linux/bitops.h:4,
                 from include/asm/cpufeature.h:10,
                 from include/asm/processor.h:16,
                 from include/asm/thread_info.h:16,
                 from arch/i386/kernel/entry.S:45:
include/asm/bitops.h:42: detected recursion whilst expanding macro "inline" 
```

bitops.h 中的第 42 行如下所示：

```
static inline void set_bit(int nr, volatile unsigned long * addr) 
```

由于 gcc 支持内联函数，我不明白为什么这个“内联”被视为宏，怎么会有递归扩展“内联”？

我的 gcc 版本是：

```
gcc --version
gcc (GCC) 3.4.6 20060404 (Red Hat 3.4.6-11) 
```

任何见解都值得赞赏。

# python - 查询有关特定 Twitter 用户的 tweepy (get_followers) 中的分页

> ID：14265082
> 
> 赞同：5
> 
> 时间：2013-01-10T18:46:01.267
> 
> 标签：python, twitter, pagination, tweepy

我对使用游标类的 tweepy 和分页相当陌生。我一直在尝试使用游标类来获取特定 twitter 用户的所有关注者，但我不断收到错误消息`"tweepy.error.TweepError: This method does not perform pagination"` 因此，如果有人可以帮助我完成获得所有关注者的任务，我将不胜感激具有分页功能的特定 Twitter 用户，使用 tweepy。我到目前为止的代码如下：

```
import tweepy

consumer_key='xyz'
consumer_secret='xyz'

access_token='abc'
access_token_secret='def'

auth = tweepy.OAuthHandler(consumer_key, consumer_secret)

auth.set_access_token(access_token, access_token_secret)

api = tweepy.API(auth)

user = api.get_user('somehandle')
print user.name

followers = tweepy.Cursor(user.followers)
temp=[]
for user in followers.items():
    temp.append(user)
    print temp
#the following part works fine but that is without pagination so I will be able to retrieve at #most 100 followers
aDict =  user.followers()
for friend in aDict:
    friendDict = friend.__getstate__()
    print friendDict['screen_name'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-04T21:47:45.710

有一个方便的方法叫做`followers_ids`. 它为给定的（或，或）返回多达 5000 个关注者（[twitter api 限制](https://dev.twitter.com/docs/api/1/get/followers/ids)）ID 。`screen_name``id``user_id``cursor`

然后，您可以在 python 中手动对这些结果进行分页并调用`lookup_users`每个块。只要`lookup_users`一次只能处理 100 个用户 ID（[twitter api 限制](https://dev.twitter.com/docs/api/1/get/users/lookup)），将块大小设置为 100 是非常合乎逻辑的。

这是代码（分页部分取自[此处](https://stackoverflow.com/a/3744531/771848)）：

```
import itertools
import tweepy

def paginate(iterable, page_size):
    while True:
        i1, i2 = itertools.tee(iterable)
        iterable, page = (itertools.islice(i1, page_size, None),
                list(itertools.islice(i2, page_size)))
        if len(page) == 0:
            break
        yield page

auth = tweepy.OAuthHandler(<consumer_key>, <consumer_secret>)
auth.set_access_token(<key>, <secret>)

api = tweepy.API(auth)

followers = api.followers_ids(screen_name='gvanrossum')

for page in paginate(followers, 100):
    results = api.lookup_users(user_ids=page)
    for result in results:
        print result.screen_name 
```

希望有帮助。

# python - 如何导入我在 Python 中创建的类并创建该类的实例？我收到一条错误消息，说对象不可调用

> ID：14265083
> 
> 赞同：1
> 
> 时间：2013-01-10T18:46:02.670
> 
> 标签：python, import, python-3.2

# 学生.py

```
class Student:
    def __init__(self, name="empty", year=0, GPA=1.0):
        self.name = name
        self.year = year
        self.GPA = GPA

    def __str__(self):
        return "{0} is in year {1}, with a GPA of {2}.".format(self.name, self.year, self.GPA) 
```

# 数据库.py

```
import Student 

s1 = Student("Joe", 2, 3.0) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T18:54:42.783

您将*module* `Student`与*class* `Student`混淆了。例如：

```
>>> import Student
>>> Student("Joe", 2, 3)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'module' object is not callable 
```

这是有道理的，因为它是模块：

```
>>> Student
<module 'Student' from './Student.py'> 
```

要获取模块内的类，请使用以下`objectname.membername`语法：

```
>>> Student.Student
<class 'Student.Student'>
>>> Student.Student("Joe", 2, 3)
<Student.Student object at 0xb6f9f78c>
>>> print(Student.Student("Joe", 2, 3))
Joe is in year 2, with a GPA of 3. 
```

或者，您可以直接导入该类：

```
>>> from Student import Student
>>> Student
<class 'Student.Student'>
>>> print(Student("Joe", 2, 3))
Joe is in year 2, with a GPA of 3. 
```

# c++ - 相同类型的继承类向量相同

> ID：14265096
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:46:39.470
> 
> 标签：c++, class, vector

我有一个奇怪的问题。我正在使用名为 shape 的自定义类，它具有球体、长方体等继承的形状......

所有这些形状都存储在

```
vector <Shape*> shape; 
```

一切进展顺利，我可以验证数据是否正确输入。但是，当输入新形状时，以前输入的所有相同类型的形状现在都与最新成员相同。

举个例子：

一个简单的输入文件可以是

```
0 0 0 1 1 1
1
1
0 1 1 1 1 2
0 1 0 0 0.75 1
0 1 0 0 -1.25 1
0 1 10 10 10 1 
```

在第一个形状之后

```
0 0 0 1 1 1
1
1
0 1 1 1 1 2 
```

之后是相同的

```
0 0 0 1 1 1
2
1
0 1 0 0 0.75 1
0 1 0 0 0.75 1 
```

然后它继续发散。

矢量所在的文件在 ShapeContainer.cpp 和 ShapeContainer.H 中，如果您认为另一个文件中的问题是什么，请询问。

非常感谢您的所有帮助。

问候，

约翰

```
#include "ShapeContainer.H"
#include <iostream>
#include <vector>

void ShapeContainer::PrintT3D (ostream & out, ShapeContainer & SC) 
{
  //    Initialize and Assign Counters  //
  unsigned int Vertex_ID = 1;
  unsigned int Curve_ID = 1;
  unsigned int Patch_ID = 1;
  unsigned int Surface_ID = 1;
  unsigned int Shell_ID = 1;
  unsigned int Region_ID = 1;

  for (unsigned int i = 0; i < SC.shape.size(); i++)
    {
            out << "## Shape " << i + 1 << ": " << SC.shape[i]->get_shape_name() << endl;
      SC.shape[i]->prepare_t3d_input(Vertex_ID, Curve_ID, Patch_ID, Surface_ID, Shell_ID, Region_ID, 0);
      out << *SC.shape[i];
    }
}

void ShapeContainer::PrintStat3D (ostream & out, ShapeContainer & SC)
{
  vector <double> LocalCoords;
  vector <double> LocalProps;

  //    Start printing updated Stat3D file //
  out << SC.BoundingBoxDimensions << endl;
  out << SC.shape.size() << endl;
  out << SC.NumberModes(SC) << endl;

  for (unsigned int i = 0; i < SC.shape.size(); i++)
    {
      LocalCoords = SC.shape[i]->get_coords();
      LocalProps  = SC.shape[i]->get_properties();

      out << SC.shape[i]->get_shape_type() << " " << SC.shape[i]->get_mode() << " " << LocalCoords << " " << LocalProps << endl;
    }
}

void ShapeContainer::ThrowOut(ShapeContainer & SC)
{
    for (unsigned int i = 0; i < SC.shape.size(); i++)
    {
            if ((SC.shape[i]->InBoundingBox(SC.BoundingBoxDimensions))==false) {
                SC.shape.erase(SC.shape.begin()+i-1);
                i=i-1;
        }
    }
}

unsigned int ShapeContainer::NumberModes (ShapeContainer & SC)
{
  vector <int> ModesList;
  ModesList.resize(SC.shape.size(),0);

  for (unsigned int i=0;i<ModesList.size();i++) {ModesList[i]=SC.shape[i]->get_mode();}

  sort (ModesList.begin(), ModesList.end());

  unsigned int count=1;
  for(unsigned int i=0;i<ModesList.size()-1;i++)
    {
      if(ModesList[i]!=ModesList[i+1])
    count++;
    }    
  return count;
} 
```

形状容器.H

```
#ifndef _SHAPECONTAINER_H_
#define _SHAPECONTAINER_H_
#include <iostream>
#include <vector>
#include <math.h>
#include "utils.H"

#include "Shape.H"
#include "Sphere.H"
#include "Cuboid.H"
#include "Ellipsoid.H"
#include "Octahedron.H"

using namespace std;

class ShapeContainer
{
public:
    ShapeContainer(){};
    ~ShapeContainer(){};

    void initialize();

/// Friend of Print Functions ///
void PrintT3D (ostream & out, ShapeContainer & SC);
void PrintStat3D (ostream & out, ShapeContainer & SC);

void ThrowOut(ShapeContainer & SC);

/// Private access functions ///
    void set_BoundingBox(vector <double> BB) {BoundingBoxDimensions = BB;};   // Cooresponds to box at (x,y,z) with dims (dx,dy,dz)
    unsigned int NumberModes (ShapeContainer & SC);

/// Vector-Like Functions ///
    void push_back(Shape* NewShape) {shape.push_back(NewShape);}

private:
vector <double> BoundingBoxDimensions;
vector <Shape*> shape;
};

#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:53:37.083

当您有两个似乎指向相同数据的指针时，一个典型的情况是因为实际上*确实*指向相同的数据。当您有一个变量并使用地址操作符将指向该变量的指针推送到集合中时，通常会出现这种情况。

一个例子：

```
struct Foo
{
    // Lost of fields
};

int main()
{
    Foo myFoo;
    std::vector<Foo*> allFoo;

    while (std::getline(cin, input))
    {
        myFoo.field1 = parseFirstValueFromString(input);
        myFoo.field2 = parseSecondValueFromString(input);

        allFoo.push_back(&myFoo);
    }
} 
```

在上面的例子中发生的情况是，第一次将指针压`myFoo`入向量中，但第二次通过循环修改同一个对象，并压入完全相同的指针。

您需要解决上述问题的是在循环中创建一个*全新的对象实例。*这是使用指针和`new`运算符完成的，如下所示：

```
int main()
{
    std::vector<Foo*> allFoo;

    while (std::getline(cin, input))
    {
        Foo* myFoo = new Foo;

        myFoo->field1 = parseFirstValueFromString(input);
        myFoo->field2 = parseSecondValueFromString(input);

        allFoo.push_back(myFoo);
    }
} 
```

在上面的代码中，循环中的每次迭代都会创建一个唯一的实例。

# php - 取消设置php post ajax

> ID：14265099
> 
> 赞同：1
> 
> 时间：2013-01-10T18:46:45.687
> 
> 标签：php, jquery

我有一个像购物车一样的脚本。当用户单击保存时，它会用保存值填充数组帖子，它会重新加载 php 脚本，然后打印“删除”。然后，当用户单击删除时，它会打印“删除”，因为数组帖子中仍有值保存。该代码有错误吗？

```
 if($_POST['statut']=='save'){
    echo "remove";
    unset($_POST['statut']);
}
    if($_POST['statut']=='remove') {
    echo "save";
    unset($_POST['statut']);    
} 
```

保存功能：

```
$.post(host+"button-save.php", {"statut":"save"},  function(result) {$('#button-save').html(result);}); 
```

移除功能

```
 $.post(host+"button-save.php", {"statut":"remove"},  function(result) {$('#button-save').html(result);}); 
```

# jquery - 从ajax的成功回调中使用jquery ui对话框时的奇怪行为

> ID：14265105
> 
> 赞同：0
> 
> 时间：2013-01-10T18:47:12.570
> 
> 标签：jquery, dialog, options, jquery-callback

我正在尝试开发一个 jquery 插件，该插件可以扩展 ui 对话框，并提供我网站所需的一些附加功能。另一个选项是传递一个 url（对于某些 html 内容，或者对于 iframe）。我总共为我的应用程序定义了 13 个选项。一个奇怪的行为是，当我在回调中调用 dialog() 方法时（ajax 将内容加载到尚未创建但尚不可见的元素中），它创建的不是 1 而是 13 对话框！！！

这是代码（我删掉了不必要的代码；更新插件允许直接将 html 内容加载到元素中，我保留在这里，但是）

```
jQuery.fn.isset = function(){return this.length>0;}
jQuery.fn.updater = function() {
    var e = this;
    [...]
    options.url         = options.url           || url
    [...]
    $.ajax(options).success(function(data){e.html($(data);});

}; 
jQuery.bzkModal = {
    show :function(content,options){
        options = options ? options : {};
        $j.extend(true, options, {
            modal       : true,
            onClose     : options.onClose   || function(){},
            onOpen      : options.onOpen    || function(){},
            onShow      : options.onShow    || function(){},
            evalScripts : typeof(options.evalScripts)=='boolean' ? options.evalScripts : true,

            /* additional options */
            type : (options.type=='iframe') ? '<iframe>' : '<div>',
            maxHeight   : options.maxHeight || jQuery(window).height() * 0.9,
            maxWidth    : options.maxWidth  || jQuery(window).width() * 0.9,
            width       : 'auto',
            height      : 'auto',
            autoResize  : true,
            position    : options.position  || { my: "center", at: "center", of: 'body' },
        });

        if($('[id="'+content+'"]').isset())  {
            /* just do the standard dialog with options */
            $j('[id="'+content+'"]').dialog(options);
        }   
        else {
            /* create a DOM element */
            var f = $j(options.type);
            /* get content */
            if(options.type=='iframe') {
                [...]               
            }
            else {
                f.updater({url: content, success: function(){
                    f.dialog();
                }});
            } 
            /* if f.dialog(options) here, it works!!! */
        }
    },
        [...]
}; 
```

如果我在更新程序之后调用 f.dialog(options)，它可以工作，并且我只打开了一个对话框（只是，由于在注入 html 内容之前创建了对话框，所以我在大小和定位方面存在问题对话框）。

有谁知道为什么我可以有这个奇怪的东西（打开 13 个盒子，就像我定义的选项一样......）？

我希望我的问题是全面的，并且我提供了足够的细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:00:31.427

似乎问题来自更新程序。使用以下方法，它可以工作：

```
jQuery.bzkModal = {
    show :function(content,options){
        [...]
        if($('[id="'+content+'"]').isset())  {
            /* just do the standard dialog with options */
            $('[id="'+content+'"]').dialog(options);
        }   
        else {
            /* create a DOM element */
            var f = $(options.type);
            /* get content */
            if(options.type=='iframe') {
                [...]               
            }
            else {
                $.ajax({url: content, evalScripts: options.evalScripts})
                .success(function(data){ f.html(data).dialog(options); });
            }
        }
    },
    [...]
}; 
```

太难了，我不明白问题出在哪里。

# web-services - 调用使用 Windows 凭据保护的 ASMX 服务

> ID：14265108
> 
> 赞同：5
> 
> 时间：2013-01-10T18:47:27.377
> 
> 标签：web-services, asp.net-mvc-4, windows-authentication

我已经获得了一个 Web 服务 (ASMX) 来使用我需要使用**Windows 凭据**的女巫。

所以，我已经设置了我的客户端 VPN 并调用了 WSDL，保存为 XML 文件并使用 生成了代理类`svcutil.exe`，到目前为止，一切都很好......

我将服务称为

```
// Web Service
client = new CmListSync.Models.WebCorePlayersSoapClient();
client.ClientCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;
client.ClientCredentials.Windows.ClientCredential = new System.Net.NetworkCredential(cUser, cPass, cDoma); 
```

在`web.config`我有这个设置：

```
 <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WebCorePlayersSoap" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="true" />
          <security mode="None">
            <transport clientCredentialType="Windows" proxyCredentialType="None" realm="" />
            <message clientCredentialType="Windows" algorithmSuite="Default" negotiateServiceCredential="true" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://vm-wssrv01/players.asmx" binding="wsHttpBinding"
        bindingConfiguration="WebCorePlayersSoap" contract="WebCorePlayersSoap"
        name="WebCorePlayersSoap" />
    </client>
  </system.serviceModel> 
```

但是当我尝试调用该服务时，我得到一个异常说：

> HTTP 请求未经客户端身份验证方案“匿名”授权。从服务器收到的身份验证标头是“Basic realm=\"vm-wssrv01\"'。

**我错过了什么？**由于我提供了 Windows 凭据，服务不应该正常进行身份验证吗？**我还应该做什么？**

我试过的：

*   **将安全模式设置**为**`Message`**，我得到与上述问题相同的错误
*   **将安全模式设置**为**`TransportWithMessageCredential`**我得到：*提供的 URI 方案“http”无效；预期为“https”。\r\n参数名称：通过*
*   **将安全模式设置**为**`Transport`**，我得到：*绑定验证失败，因为 WSHttpBinding 不支持通过传输安全 (HTTPS) 进行的可靠会话。无法打开通道工厂或服务主机。使用消息安全性通过 HTTP 进行安全可靠的消息传递。*

* * *

来自[约翰桑德斯的](https://stackoverflow.com/users/76337/john-saunders)评论：

我已经切换到`basicHttpBinding`

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="WebCorePlayersSoap" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="Windows" proxyCredentialType="Windows" realm="vm-wssrv01" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://vm-wssrv01/players.asmx" binding="basicHttpBinding"
        bindingConfiguration="WebCorePlayersSoap" contract="WebCorePlayersSoap"
        name="WebCorePlayersSoap" />
    </client>
  </system.serviceModel> 
```

并尝试将`security`模式更改为：

*   `TransportWithMessageCredential` {"提供的 URI 方案 'http' 无效；应为 'https'。\r\n参数名称: via"}

*   `TransportCredentialOnly` {"HTTP 请求未经客户端身份验证方案 'Negotiate' 的授权。从服务器收到的身份验证标头是 'Basic realm=\"vm-wssrv01\"'。"}

*   `Message` {“BasicHttp 绑定要求 BasicHttpBinding.Security.Message.ClientCredentialType 等同于安全消息的 BasicHttpMessageCredentialType.Certificate 凭据类型。为 UserName 凭据选择 Transport 或 TransportWithMessageCredential 安全性。”}

*   `Transport` {"提供的 URI 方案 'http' 无效；应为 'https'。\r\n参数名称: via"}

*   `None` {"HTTP 请求未经授权，客户端身份验证方案为“匿名”。从服务器收到的身份验证标头为 'Basic realm=\"vm-wssrv01\"'。"}

我的想法快用完了:(该服务仅是 HTTP，不是 HTTPS，而且我没有要使用的证书...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T20:18:16.620

3 天后，在**John Saunders**的大力帮助下，他说 ASMX 服务的唯一可能绑定是`basicHttpBinding`（我对答案的搜索开始更加集中）我进入了这个：

在服务调用者中，必须使用`client.ClientCredentials.UserName`as：

```
// Web Service
client = new CmListSync.Models.WebCorePlayersSoapClient();
client.ClientCredentials.UserName.UserName = cUser;
client.ClientCredentials.UserName.Password = cPass; 
```

在配置部分，需要使用：

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="WebCorePlayersSoap" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Basic" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://vm-wssrv01/players.asmx" binding="basicHttpBinding"
        bindingConfiguration="WebCorePlayersSoap" contract="WebCorePlayersSoap"
        name="WebCorePlayersSoap">
        <identity>
          <dns value="localhost" />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel> 
```

# javascript - 当 div 随着页面滚动而滚动时，它叫什么，是否有专门为此编写的库？

> ID：14265109
> 
> 赞同：0
> 
> 时间：2013-01-10T18:47:29.123
> 
> 标签：javascript

我正在尝试查找有关在页面滚动时在页面内滚动并具有上限和下限的元素的更多信息。

具体来说，我正在尝试添加在页面滚动时在页眉和页脚范围内滚动辅助内容部分（侧边栏）的功能。

例如，Apple 在选择要包含的产品功能时在商店中使用它 - [http://store.apple.com/us/configure/MD093LL/A](http://store.apple.com/us/configure/MD093LL/A)。

我能够重新创建此功能，但我敢打赌，在 stackoverflow 的帮助下，我可以找到经过更彻底测试、跨浏览器兼容等的代码。

理想情况下，我希望找到可以自己运行的东西，而不是像 jQuery 这样更大的库的一部分。这只是一个偏好，但我对包括 jQuery 类型库的潜在解决方案持开放态度......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:53:01.137

你只需要 CSS `position: fixed`，：

```
body
{
    margin-top: 150px; /* header height */
    margin-bottom: 250px; /* footer height */
}
.header, .footer
{
    position: fixed;
    left: 0;
    right: 0;
}
.header
{
    top: 0;
}
.footer
{
    bottom: 0;
} 
```

这适用于所有相关的桌面浏览器。它在几乎绝迹的 IE6 中不起作用，在任何移动浏览器中也不起作用。事实上，您应该使用媒体查询来覆盖移动浏览器的这些样式。像这样的东西可能会起作用：

```
@media screen and (max-device-width: 500px)
{
    body
    {
        margin-top: 8px;
        margin-bottom: 8px;
    }
    .header, .footer
    {
        position: static;  /* or maybe relative */
    }
} 
```

# instance - Mootools - 检测 css 类的实例

> ID：14265111
> 
> 赞同：1
> 
> 时间：2013-01-10T18:47:35.913
> 
> 标签：instance, dom-events, mootools, multiple-instances, mootools-events

我有一个网站，我添加了一些基本的 Mootools 动画。这是我有问题的网站页面：

[http://www.humsdrums.com/portfolio/webdesign.html](http://www.humsdrums.com/portfolio/webdesign.html)

您会注意到，当您将鼠标悬停在大图像上时，它们会褪色并且放大镜会向下补间。这是我为此制作的名为“放大”的 Mootools 类：

```
var Magnify = new Class({

Implements : [Options, Events],

options : {

    },

initialize : function (item, image, options)
{
    this.setOptions(options);
    this.div = document.id(item);
    this.img = $$(image);

    this.tweenBackground = new Fx.Tween(this.div,{
        duration:'250',
        property:'background-position'

    });

    this.div.addEvent('mouseenter', this.reveal.bind(this));

    this.div.addEvent('mouseleave', this.hide.bind(this));

},

reveal : function()
{
    this.tweenBackground.cancel();
    this.tweenBackground.start('175px -78px', '175px 90px');
    this.img.tween('opacity', .15);
    console.log('mouse over');

},

hide :function ()
{
    this.tweenBackground.cancel();
    this.tweenBackground.start('175px 90px', '175px -78px');
    this.img.tween('opacity', 1);

}

}); 
```

然后，我需要通过获取 css id 为我想要执行此操作的每个元素初始化类的实例。

```
window.addEvent('domready', function()
{

var magnify1 = new Magnify('p1', '#p1 img');
var magnify2 = new Magnify('p2', '#p2 img');
var magnify3 = new Magnify('p3', '#p3 img');
var magnify4 = new Magnify('p4', '#p4 img');
}); 
```

我想要做的很简单，给我想要这个功能的每个元素一个 CSS 类“放大”，这样我就不必每次都使用单独的 ID 并添加另一个 Mootools 类的实例。

如果我将元素添加到 CSS 类并将其放入我的 Mootools 类中，它就会中断。即使它没有中断，似乎 Mootools 只会让所有具有该 CSS 类的元素在只有一个鼠标悬停时同时具有动画效果。

我将如何检测“放大 CSS 类”的哪个实例被鼠标悬停？我唯一的想法是找到一种方法来使用“放大”CSS 类抓取所有元素，将它们放入一个数组中，然后检查是否悬停在上面的项目等于数组中的项目之一。我不知道该怎么做，或者这是否是最好的方法。

任何帮助或建议都会很棒！如果您想查看更多代码或者我是否可以更好地解释一些内容，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:17:20.547

你需要更多地编写模式。首先 - 你有 2 个元素的关系 - 一个包含 div 和一个图像。

您的事件实际上是在父 el 上，但您还需要引用内部元素（图像）并为其设置动画。

`div.item-port > img`如果您想抓取所有图像，您的选择器就是简单的。`div.item-port > img ! div.item-port`将抓取父 div，而不是那些仅将图像作为直接子元素的 div。等等

那么您需要决定将事件附加到哪个元素。您的标记中有很多选择。

在你到达那里之前，你有**一个 href**包装了你的两个元素。这允许您使用跨浏览器 :hover 伪。

你可以很容易地用纯 CSS 做：

```
div.port-item {
    /* defaults you already have and then ... */
    background-position: 175px -78px;
    -webkit-transition: all 0.2s ease-out 0s;
    -moz-transition: all 0.2s ease-out 0s;
    -ms-transition: all 0.2s ease-out 0s;
    -o-transition: all 0.2s ease-out 0s;
    transition: all 0.2s ease-out 0s;
}

.portfolio-item a:hover div.port-item {
    background-position: 175px 90px;
}

.portfolio-item a:hover img {
    opacity: .15; // etc for cross-browser
} 
```

只有当你想在浏览器不支持转换时恢复，你才应该实例化你的 js 类。[http://jsfiddle.net/wMnzb/4/](http://jsfiddle.net/wMnzb/4/)

```
var Magnify = new Class({

  Implements: [Options],

  options: {
    parent: 'div'
  },

  initialize: function (images, options) {
    this.setOptions(options);
    this.elements = document.getElements(images);
    this.attachEvents();
  },
  attachEvents: function () {
    var selector = this.options.parent;
    this.elements.each(function (el) {
      var parent = el.getParent(selector);

      parent.set('tween', {
        duration: '250',
        link: 'cancel'
      });
      parent.addEvents({
        mouseenter: function () {
          this.tween('background-position', '175px 90px');
          el.fade(0.15);
        },
        mouseleave: function () {
          this.tween('background-position', '175px -78px');
          el.fade(1);
        }
      });
    });
  }   

});

new Magnify('div.port-item > img'); 
```

尽可能简化，但你明白了 - 从 ids 和任何这种重复的特异性中完全模棱两可。

# css - d3.js 地图（ ) Auto Fit into Parent Container and Resize with Window

> ID：14265112
> 
> 赞同：37
> 
> 时间：2013-01-10T18:47:37.710
> 
> 标签：css, canvas, svg, d3.js

**更新：我已经在答案部分发布并接受了一个完全有效的解决方案。本节中的任何代码都将用作与您自己的非工作代码进行比较的参考，但不能用作解决方案。**

* * *

我正在构建一个仪表板并使用 d3.js 添加一个世界地图，该地图将根据地理位置实时绘制推文。

d3.json() 行中引用的*world.json文件可在***[此处](https://bitbucket.org/john2x/d3test/src/2ce4dd511244/d3/examples/data?at=default)**下载（称为*world-countries.json*）。

![在此处输入图像描述](../Images/ce7c4bde335d0bb0fdd2be0239439341.png)

地图作为 SVG 容器在页面上，并使用 d3 渲染。

下面是相关的代码片段。

```
<div id="mapContainer">
    <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="500"></svg>
</div> 
```

* * *

```
#mapContainer svg {
    display:block;
    margin:0 auto;
}
#mapContainer path {
  fill:#DDD;
  stroke:#FFF;
} 
```

* * *

```
// generate US plot
function draw() {
    var map = d3.select("svg");
    var width = $("svg").parent().width();
    var height = $("svg").parent().height();

    var projection = d3.geo.equirectangular().scale(185).translate([width/2, height/2]);
    var path = d3.geo.path().projection(projection);
    d3.json('plugins/maps/world.json', function(collection) {
        map.selectAll('path').data(collection.features).enter()
            .append('path')
            .attr('d', path)
            .attr("width", width)
            .attr("height", height);
    });
}
draw();
latestLoop(); 
```

* * *

```
$(window).resize(function() {
    draw();
}); 
```

更新：我已将地图缩放到可接受的大小（对于我的特定浏览器大小），但是当我更改窗口大小时它仍然不会缩放和居中。但是，如果我调整窗口大小，然后单击刷新，则重新加载页面后地图将居中。但是，由于比例是静态的，因此无法正确缩放。

![在此处输入图像描述](../Images/ff6c0fbd7a9668f1fdd0f304cb1472f2.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-12T23:33:02.903

**完整的解决方案：**

这是在用户释放窗口边缘以调整其大小并将其在父容器中居中之后调整地图大小的解决方案。

```
<div id="mapContainer"></div> 
```

* * *

```
function draw(ht) {
    $("#mapContainer").html("<svg id='map' xmlns='http://www.w3.org/2000/svg' width='100%' height='" + ht + "'></svg>");
    map = d3.select("svg");
    var width = $("svg").parent().width();
    var height = ht;

    // I discovered that the unscaled equirectangular map is 640x360\. Thus, we
    // should scale our map accordingly. Depending on the width ratio of the new
    // container, the scale will be this ratio * 100\. You could also use the height 
    // instead. The aspect ratio of an equirectangular map is 2:1, so that's why
    // our height is half of our width.

    projection = d3.geo.equirectangular().scale((width/640)*100).translate([width/2, height/2]);
    var path = d3.geo.path().projection(projection);
    d3.json('plugins/maps/world.json', function(collection) {
        map.selectAll('path').data(collection.features).enter()
            .append('path')
            .attr('d', path)
            .attr("width", width)
            .attr("height", width/2);
    });
}
draw($("#mapContainer").width()/2); 
```

* * *

```
$(window).resize(function() {
    if(this.resizeTO) clearTimeout(this.resizeTO);
    this.resizeTO = setTimeout(function() {
        $(this).trigger('resizeEnd');
    }, 500);
});

$(window).bind('resizeEnd', function() {
    var height = $("#mapContainer").width()/2;
    $("#mapContainer svg").css("height", height);
    draw(height);
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-06T21:23:07.073

选择对象是一个多维数组，尽管在大多数情况下它可能只有一个对象。该对象有一个“clientWidth”字段，告诉您其父对象的宽度。

所以你可以这样做：

```
var selection = d3.select("#chart"); 
width = selection[0][0].clientWidth; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-10T20:12:51.900

这应该有效：

```
<svg 
    xmlns="http://www.w3.org/2000/svg"
    width="860"
    height="500"
    viewBox="0 0 860 500"
    preserveAspectRatio="xMinYMin meet"> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-17T11:40:55.547

最好的选择是在正常定义 d3 图形的宽度和高度时结合使用纵横比。这对我的很多图表工作都有帮助。
第 1 步：动态获取图形必须附加到的 div 的高度。
第 2 步：将宽度声明为相对于动态捕获的高度的纵横比。

```
var graph_div = document.getElementById(graph.divId);
graph.height = graph_div.clientHeight;
graph.width = (960/1200)*graph.height; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-09T06:02:35.467

在 d3 v4 中，我们可以这样做

```
const projection = d3.geo.equirectangular().fitSize([width, height], geojson);
const path = d3.geo.path().projection(projection); 
```

fitSize 等价于

```
fitExtent([[0, 0], [width, height]], geojson) 
```

自由填充以添加填充

# c# - 了解如何使用 System.Diagnostics.Process 控制标准输出

> ID：14265113
> 
> 赞同：0
> 
> 时间：2013-01-10T18:47:37.490
> 
> 标签：c#, .net, doxygen

我看到几个关于如何启动进程并将数据推送到标准输入的问题，但没有看到如何控制它们的输出去向。

首先是我当前的代码，从控制台模式 C# 应用程序运行：

```
 // Prepare the process to run
    ProcessStartInfo start = new ProcessStartInfo();
    // Enter in the command line arguments, everything you would enter after the executable name itself
    start.Arguments = " -";
    // Enter the executable to run, including the complete path
    start.FileName = "doxygen.exe";
    // Do you want to show a console window?
    start.WindowStyle = ProcessWindowStyle.Normal;
    start.CreateNoWindow = false;
    start.RedirectStandardInput = true;
    start.UseShellExecute = false;

    // Run the external process & wait for it to finish
    using (Process proc = Process.Start(start))
    {
        //doxygenProperties is just a dictionary
        foreach (string key in doxygenProperties.Keys)
            proc.StandardInput.WriteLine(key+" = "+doxygenProperties[key]);
        proc.StandardInput.Close();
        proc.WaitForExit();

        // Retrieve the app's exit code
        int exitCode = proc.ExitCode;
    } 
```

当我运行它时会发生什么，我*没有*看到任何新窗口（虽然我认为我应该）并且所有 doxygen.exe 的标准输出都打印到我的应用程序的控制台窗口。

我想要发生的是两件事之一：

1.  Doxygen 在可见窗口中启动，我可以在该窗口中看到它的标准输出，而不是在我的应用程序窗口中。
2.  Doxygen 在隐藏窗口中启动，它的标准输出被写入日志文件。

我怎样才能实现这些？

此外，为什么我没有为生成的进程获得一个单独的窗口，为什么生成的进程将输出写入我的窗口不是它自己的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:52:43.557

您可以做的一件事是使用`RedirectStandardOutput`，而不是使用，`WaitForExit`您可以使用`ReadToEnd`

```
ProcessStartInfo start = new ProcessStartInfo();
start.RedirectStandardOutput = true;

//make other adjustments to start

Process p = new Process();
p.StartInfo = start;
p.Start();
string output = p.StandardOutput.ReadToEnd(); 
```

然后您可以`string output`在闲暇时使用

* * *

如果您想实时获取输出，该`p.StandardOutput`属性具有允许您异步获取输出的方法。我不知道它的所有细节，我以前只用过一次，但是如果你搜索它，那里有很多文献。

* * *

同时重定向时也要小心`StandardOutput`，`StandardError`如果它们足够长，可能会导致死锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:03:08.213

你需要做两件事：

[1) 通过在流程中将RedirectStandardOuput](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx)属性设置为 true，表明您希望将流程的标准输出定向到您的应用程序。

2）在调用之前`WaitForExit`，开始捕获输出：

```
string sOutput = p.StandardOutput.ReadToEnd(); 
```

如果在调用 wait for exit 之前没有开始读取输出，则可能会遇到死锁。

但是，重要的是要知道标准输出只会捕获输出信息，而不是写入应用程序的标准错误流的任何内容。

为了捕获这两个信息流，您可以挂钩流程的[OutputDataReceived](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)和[ErrorDataReceived](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.errordatareceived.aspx)事件，并将事件数据直接写入日志文件或将其存储在类属性中以供流程完成后使用。

# spring - 配置spring通过ssl连接mysql

> ID：14265115
> 
> 赞同：10
> 
> 时间：2013-01-10T18:47:42.157
> 
> 标签：spring, ssl, jdbc, c3p0, spring-jdbc

我正在从我的 Java 应用程序通过 SSL 连接到 MySQL。我已将 MYSQL 配置为支持 SSL 并生成客户端证书。我已将服务器 CA 证书和客户端证书导入密钥库。这就是我的代码目前的样子

```
 String url = "jdbc:mysql://127.0.0.1:3306/MySampleDb? verifyServerCertificate =true&useSSL=true&requireSSL=true"

    System.setProperty("javax.net.ssl.keyStore","/home/cert/keystore");
    System.setProperty("javax.net.ssl.keyStorePassword","password");
    System.setProperty("javax.net.ssl.trustStore","/home/cert/truststore");
    System.setProperty("javax.net.ssl.trustStorePassword","password");

    Class.forName("com.mysql.jdbc.Driver");
    con = DriverManager.getConnection(url, user, password); 
```

我想使用带有 C3p0 的 spring 通过 SSL 连接到 MYSQL。这是我的 spring 配置文件，它从 jdbc.properties 读取参数。

```
<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="${jdbc.driver}"/>
    <property name="jdbcUrl" value="${jdbc.url}"/>
    <property name="user" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
    ........
</bean> 
```

如何配置 spring 来设置属性 **verifyServerCertificate =true
useSSL=true
requireSSL=true"**
也可以在 spring 配置文件中设置**keyStore 和 trustStore值。**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-10T22:04:04.313

`jdbc.url`jdbc.properties 中的值必须是

> jdbc:mysql://127.0.0.1:3306/MySampleDb?verifyServerCertificate=true&useSSL=true&requireSSL=true

这些参数必须直接添加到 MySQL 的 URL。`keyStore`和的参数`trustStore`应该在启动时传递给 JVM，如下所示：

```
-Djavax.net.ssl.keyStore=path_to_keystore_file
-Djavax.net.ssl.keyStorePassword=password
-Djavax.net.ssl.trustStore=path_to_truststore_file
-Djavax.net.ssl.trustStorePassword=password 
```

你*可以* [使用 Spring 来设置系统属性](https://stackoverflow.com/a/3340970/131929)，但我永远不会使用它，它太麻烦了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-08-16T14:16:17.790

无需传递和`keyStore`编程或设置任何系统属性，因为它可以通过每个连接的连接属性来实现！`trustStore``java`

因此，您可以为不同的连接使用不同的证书（如果您在应用程序服务器中，还可以使用应用程序）。

原始答案：[https](https://stackoverflow.com/a/51879119/173149) ://stackoverflow.com/a/51879119/173149相关部分：

> jdbc:mysql://example.com:3306/MYDB?verifyServerCertificate=true&useSSL=true&requireSSL=true&clientCertificateKeyStoreUrl=file:cert/keystore.jks&clientCertificateKeyStorePassword=123456&trustCertificateKeyStoreUrl=file:cert/truststore.jks&trustCertificateKeyStorePassword=123456

它记录在案：

*   [https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-configuration-properties.html](https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-configuration-properties.html)
*   [https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-using-ssl.html](https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-using-ssl.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-04T03:41:49.997

您可以使用基于 Java 的配置来配置 a 的**useSSl**、**requireSSL**和**verifyServerCertificate**属性。`DataSource`类的`addDataSourceProperty`方法`DataSource`为您提供了能力，如下面的代码片段所示（您可以将 HikariDataSource 替换为 C3p0 实例）

MySQL Connector/J 公开了密钥存储的配置属性（例如`trustCertificateKeyStoreUrl`），所以我假设它`addDataSourceProperty`也可以用于这些属性。

我不知道 XML 配置架构是否提供了对应于`addDataSourceProperty`.

```
public DataSource createPslDataSource(final MyDataSourceProperties myDataSourceProperties) {

    HikariDataSource dataSource = new HikariDataSource();

    dataSource.addDataSourceProperty("useSSL", true);
    dataSource.addDataSourceProperty("requireSSL", true);
    dataSource.addDataSourceProperty("verifyServerCertificate", true);

    dataSource.setJdbcUrl(myDataSourceProperties.getJdbcUrl());
    dataSource.setUsername(myDataSourceProperties.getUsername());
    dataSource.setPassword(myDataSourceProperties.getPassword());

    return dataSource;
} 
```

# webkit - webkit 什么时候会淘汰 Web SQL？

> ID：14265118
> 
> 赞同：0
> 
> 时间：2013-01-10T18:47:54.513
> 
> 标签：webkit

我有一个也适用于 indexedDB 的包装器，但发现 web sql 更容易查询。我可以在 Safari 中依赖 Web SQL 多长时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T04:19:34.697

好吧，你不会在这个问题上得到明确的答案。[我对http://bugs.webkit.org](http://bugs.webkit.org)的简短搜索没有显示“删除 Web SQL”票证，但这并不意味着它不存在。但是，如果您的问题有答案，那就是答案。

# java - 当我在另一个下使用静态类时验证 instanceof

> ID：14265121
> 
> 赞同：0
> 
> 时间：2013-01-10T18:48:06.690
> 
> 标签：java, class, inheritance, instanceof

我有一堂课，比如：

```
public class Class0 implements Class1{

    static class Class2 extends Class3 {
        ...
    }

} 
```

在另一个类中，我想验证我的对象是否是 Class2 的实例，使用`obj instanceof Class2`.

所以当我打印我的对象的类时，我得到：

```
class Class0$Class2 
```

我的问题是，在这种情况下我该如何使用`instanceof`？因为当我尝试时`Class0.??!`我没有得到`Class0.Class2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:50:27.313

使用`instanceof Class0.Class2`. 但请确保该类是可见的。您声明了具有包可见性的类。该名称`Class0$Class2`是您的类在编译代码中的名称。通常你不会引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:50:18.910

我认为，如果要确保对象属于特定类，则需要使用`Object.getClass()`方法，而不是`instanceof`运算符。

因为如果给定对象是给定类的实例，则运算符将简单地返回 true，而这对于对象层次结构中的所有父类和接口都是 true。

# php - 来自文件的 Javascript src 取决于域名

> ID：14265134
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:48:46.953
> 
> 标签：php, javascript, iframe

我有文件[http://host1.com/links.txt](http://host1.com/links.txt)

links.txt 包含：

```
com http://host1.com/1.jpg
info http://host1.com/2.jpg
org http://host1.com/3.jpg 
```

我需要根据主机域从该文件中放入此代码 src 链接。

```
a=document.getElementsByTagName('body')[0];
st='iframe';
r=st;
b=document.createElement(r);
b.src=**Here from links.txt**
b.width=300;b.height=300;b.marginHeight=10;b.marginWidth=10;b.frameborder=10;b.align='left';
a.appendChild(b); 
```

例如我有 3 个其他网站

```
1\. http://site1.com
2\. http://site2.info
3\. http://site3.org 
```

在每个站点 index.php 中，我需要放入该 iframe 代码，并在以下源代码中：

[http://site1.com/index.php](http://site1.com/index.php) 我必须有 b.src=http://host1.com/1.jpg

[http://site1.info/index.php](http://site1.info/index.php) 我必须有 b.src=http://host1.com/2.jpg

[http://site1.org/index.php](http://site1.org/index.php) 我必须有 b.src=http://host1.com/3.jpg

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:53:06.347

如果您可以控制`links.txt`并且可以将其更改为 JSON，则可以使用[JSONP](http://api.jquery.com/jQuery.getJSON/)来读取它。

您可以使用`window.location.hostname`.

**链接.php**

```
<?php header('content-type: application/json; charset=utf-8'); ?>

(function(){
    var data = {
        com: 'http://host1.com/1.jpg',
        info: 'http://host1.com/2.jpg',
        org: 'http://host1.com/3.jpg'
    };

    <?php echo $_GET['callback']; ?>(data);
})(); 
```

**javascript**

```
$(function(){
    $.ajax({
       type: 'GET',
        url: 'http://mysite.com/links.php?callback=?',
        async: false,
        jsonpCallback: 'jsonpCallback',
        contentType: "application/json",
        dataType: 'jsonp',
        success: function(json) {
           alert(json.info);
           alert(json.com);
           alert(json.org);
        }
    });
}); 
```

# java - Java 添加多个信任库，每个端口一个

> ID：14265137
> 
> 赞同：1
> 
> 时间：2013-01-10T18:48:59.263
> 
> 标签：java, ssl, client-server, keystore

我有一个带有一台服务器和一个客户端的客户端/服务器进程。

连接设置如下所示：

```
System.setProperty("javax.net.ssl.trustStore", "path/to/store"); 
System.setProperty("javax.net.ssl.trustStorePassword", "passwd");
SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();
sslsocket = (SSLSocket) sslsocketfactory.createSocket(InetAddress.getLocalHost(), port); 
```

1:1，这很好用。现在我正在扩展它，以便服务器正在侦听多个客户端的多个端口。每个连接到服务器的客户端都应该在具有特定信任库的特定端口上执行此操作。

如果我在服务器端注册了两个信任库，当我尝试建立客户端连接时，我会收到错误消息：

```
javax.net.ssl.SSLHandshakeException: Received fatal alert: certificate_unknown Received fatal alert: certificate_unknown 
```

我一直在以[堆栈溢出](http://stackoverflow.com)为例，但一切似乎都过于复杂。有没有一种简单的方法来管理这个？或者一个进程不应该使用多个密钥存储的令人信服的理由？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:58:50.700

我认为使用您的方法是不可能的。由于您正在设置系统属性（这是一个哈希表），因此您编写的最后一个属性将覆盖较早的属性。

而且，我不明白用例。一般来说，信任库是一个客户端概念。这是关于确定要信任的服务器。大多数时候（除非您使用基于证书的身份验证）客户端的可信度是不相关的。

话虽如此，可以为不同的端口设置不同的密钥库。例如在tomcat中

```
<Connector port="443" protocol="HTTP/1.1" SSLEnabled="true"
       maxThreads="150" scheme="https" secure="true"
       keystoreFile="${user.home}/.keystore1"
       keystorePass="changeit"
       clientAuth="false" sslProtocol="TLS" /> 
```

上面的代码片段指出应该在端口 443 ~/.keystore1 上使用。在另一个端口上，可以使用 keystore2。

如果您想使用客户端身份验证，您可以强制客户端发送证书，在上面的示例中，通过将 clientAuth 设置为 true，并添加 truststoreFile 和 truststorePass。

深入研究 tomcat 的源代码可能会帮助您设置环境。特别是文件 java/org/apache/tomcat/util/net/jsse/JSSESocketFactory.java 可能正是你想要的。

# xcode - NSDate / NSCalender 计算一年中的天数

> ID：14265138
> 
> 赞同：-1
> 
> 时间：2013-01-10T18:49:00.447
> 
> 标签：xcode, nsdate, nscalendar

我正在制作一个应用程序，根据某人在公司工作的年限计算薪水。用户输入 2 个日期，第一个是他开始工作的日期（比如 2010 年 1 月 12 日），第二个是结束日期（比如 2012 年 1 月 2 日）。到目前为止，我知道他工作的总天数，但**我想更具体**地计算他的工作时间：

```
30 days in 2010 * 30$ per day = 90$
365 days in 2011 * 35$ per day = 12775$
32 days in 2012 * 40$ per day = 1280$ 
```

这是我第一次使用日期和日历，你可以猜到我对它们完全不熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:44:41.967

试试这个代码：

```
-(NSInteger)daysBetweenTwoDates:(NSDate *)fromDateTime andDate:(NSDate*)toDateTime{

    NSDate *fromDate;
    NSDate *toDate;

    NSCalendar *calendar = [NSCalendar currentCalendar];

    [calendar rangeOfUnit:NSDayCalendarUnit startDate:&fromDate interval:NULL forDate:fromDateTime];
    [calendar rangeOfUnit:NSDayCalendarUnit startDate:&toDate interval:NULL forDate:toDateTime];

    NSDateComponents *difference = [calendar components:NSDayCalendarUnit fromDate:fromDate toDate:toDate options:0];

    return [difference day]+1;//+1 as if start and end both date are same, so 1 day worked.
}

- (IBAction)calculate:(id)sender {
    NSDate *startDate=[self.startDate dateValue];//taking from datepicker
    NSDate *endDate=[self.endDate dateValue];//taking from datepicker

    NSTimeZone *gmt=[NSTimeZone timeZoneWithAbbreviation:@"GMT"];
    NSDateFormatter *dateFormatterYYYY=[NSDateFormatter new];
    [dateFormatterYYYY setTimeZone:gmt];
    [dateFormatterYYYY setDateFormat:@"YYYY"];

    NSDateFormatter *dateFormatterDDMMYYYY=[NSDateFormatter new];
    [dateFormatterDDMMYYYY setDateFormat:@"dd/mm/YYYY"];
    [dateFormatterDDMMYYYY setTimeZone:gmt];

    //1\. startDate to 31/12/StartDateYear
    //2\. loop to endDateYear
    //3\. 01/01/endDateYear to endDate

    /* step 1 */
    //find 31/12/StartDateYear
    NSLog(@"YYYY ; %@",[dateFormatterYYYY stringFromDate:startDate]);

    NSString *lastDateOfStartYearString=[NSString stringWithFormat:@"31/12/%@",[dateFormatterYYYY stringFromDate:startDate]];
    NSDateFormatter *dateFormatddMMyyyy=[NSDateFormatter new];
    [dateFormatddMMyyyy setDateFormat:@"dd'/'MM'/'yyyy"];
    NSDate *lastDateOfStartYear=[dateFormatddMMyyyy dateFromString:lastDateOfStartYearString];

    //no. of days
    NSInteger year=[[dateFormatterYYYY stringFromDate:startDate]integerValue];
    NSInteger days=[self daysBetweenTwoDates:startDate andDate:lastDateOfStartYear];

    //add in dictionary
    NSMutableDictionary *daysForYearDictionary=[NSMutableDictionary new];
    [daysForYearDictionary setValue:@(days) forKey:[NSString stringWithFormat:@"%ld",year]];

    /* step 2*/
    NSInteger nextYearAfterStart=[[dateFormatterYYYY stringFromDate:startDate]integerValue]+1;
    NSInteger previousYearBeforeEnd=[[dateFormatterYYYY stringFromDate:endDate]integerValue]-1;

    for (NSInteger yearCounter=nextYearAfterStart; yearCounter<=previousYearBeforeEnd; yearCounter++) {

        NSString *firstDateString=[NSString stringWithFormat:@"1/1/%ld",yearCounter];
        NSDate *firstDate=[dateFormatddMMyyyy dateFromString:firstDateString];

        NSString *lastDateString=[NSString stringWithFormat:@"31/12/%ld",yearCounter];
        NSDate *lastDate=[dateFormatddMMyyyy dateFromString:lastDateString];

        //no. of days
        days=[self daysBetweenTwoDates:firstDate andDate:lastDate];
        //add in dictionary
        [daysForYearDictionary setValue:@(days) forKey:[NSString stringWithFormat:@"%ld",yearCounter]];
    }

    /* step 3 */
    //find 1/1/EndDateYear
    NSString *firstDateOfStartYearString=[NSString stringWithFormat:@"1/1/%@",[dateFormatterYYYY stringFromDate:endDate]];
    NSDate *firstDateOfEndYear=[dateFormatddMMyyyy dateFromString:firstDateOfStartYearString];

    //no. of days
    year=[[dateFormatterYYYY stringFromDate:endDate]integerValue];
    days=[self daysBetweenTwoDates:firstDateOfEndYear andDate:endDate];
    //add in dictionary
    [daysForYearDictionary setValue:@(days) forKey:[NSString stringWithFormat:@"%ld",year]];

    //printing
    for (NSString *yearStr in daysForYearDictionary) {
        NSLog(@"Year : %@, Days Worked : %@",yearStr,[daysForYearDictionary valueForKey:yearStr]);
    }

} 
```

# php - 带有 \n 的 preg_match_all 错误（换行符）

> ID：14265148
> 
> 赞同：0
> 
> 时间：2013-01-10T18:49:37.220
> 
> 标签：php, pattern-matching, preg-match-all

我有 preg_match_all 的这个模式：`/(<span[^>]*value=.?(\w*).?[^>]*annotation[^>]*>)(.*?)<\/span>/`适用于这个文本：

```
example<span id="Marky100120131906070" class="myMarkGen" value="247" name="annotation">logy.*-/+!\"·$%&/()=?¿hi </span>example 
```

但这在这种情况下不起作用：

```
example<span id="Marky100120131906070" class="myMarkGen" value="247" name="annotation">logy.*-/+!\"

·$%&/()=?¿hi </span>example 
```

注意有一个换行符

在这两种情况下都可以使用的模式是什么，并且无论跨度的内容如何都有效？我需要跨度的文本和跨度的值

[你可以在这里](http://www.functions-online.com/preg_match.html)试试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:53:23.750

加上它会做的修饰符：

```
/(<span[^>]*value=.?(\w*).?[^>]*annotation[^>]*>)(.*?)<\/span>/smi 
```

# javascript - 使用 Javascript 进行地理定位，无需任何地图

> ID：14265150
> 
> 赞同：1
> 
> 时间：2013-01-10T18:49:48.717
> 
> 标签：javascript, geolocation

我正在尝试使用 javascript 进行地理定位。我一直在搜索，但我只能找到使用地图的示例。我只想在标签、文本框或任何纯文本小部件中显示用户的地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:54:47.857

看看[这个例子](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_geolocation)：

```
function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    }
}

function showPosition(position) {
    alert(position.coords.latitude + ", " + position.coords.longitude;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T18:55:23.000

```
<script src="http://j.maxmind.com/app/geoip.js"></script>
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" >
window.onload=getGeo;

function getGeo(){
    if (navigator && navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(geoOK, geoKO);
    } else {
        geoMaxmind();
    }
}

function geoOK(position) {
     showLatLong(position.coords.latitude, position.coords.longitude);
}
function geoMaxmind() {
     showLatLong(geoip_latitude(), geoip_longitude());
}

function geoKO(err) {
if (err.code == 1) {
error('El usuario ha denegado el permiso para obtener informacion de ubicacion.');
} else if (err.code == 2) {
error('Tu ubicacion no se puede determinar.');
} else if (err.code == 3) {
error('TimeOut.')
} else {
error('No sabemos que pasó pero ocurrio un error.');
}
}

function showLatLong(lat, longi) {
var geocoder = new google.maps.Geocoder();
var yourLocation = new google.maps.LatLng(lat, longi);
geocoder.geocode({ 'latLng': yourLocation },processGeocoder);

}
function processGeocoder(results, status){

if (status == google.maps.GeocoderStatus.OK) {
if (results[0]) {
document.forms[0].dir.value=results[0].formatted_address;
document.getElementById("")
} else {
error('Google no retorno resultado alguno.');
}
} else {
error("Geocoding fallo debido a : " + status);
}
}
function error(msg) {
alert(msg);
}
</script>

<form align="left">
        <input type="text" name="dir" />
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T18:55:37.200

查看 HTML5 地理位置 API：[http ://diveintohtml5.info/geolocation.html](http://diveintohtml5.info/geolocation.html)

它很简单：

```
navigator.geolocation.getCurrentPosition(function(location) {
    // This function is called if the location is found. Use location.coords.latitude & location.coords.longitude
}, function() {
    // This function is called if the location is not found.
}); 
```

但并非所有浏览器都支持它。如果您要公开，我还建议使用 Modernizr 来检测支持： http: [//modernizr.com](http://modernizr.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T18:55:25.760

您可以使用`geoplugin`.

将以下内容添加到您的`<head>`标签中。

```
<script  src="http://www.geoplugin.net/javascript.gp" type="text/javascript"></script> 
```

这将根据您的`IP address`.

在您的javascript中，您可以调用

```
latitude = geoplugin_latitude();
longitude = geoplugin_longitude(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T18:56:56.047

尝试这个：

```
 <script src="http://www.merkwelt.com/people/stan/geo_js/js/geo.js?id=1" type="text/javascript" charset="utf-8"></script>
     <script type="text/javascript">
         if (geo_position_js.init()) {
             geo_position_js.getCurrentPosition(success_callback, error_callback, { enableHighAccuracy: true });
         }
         else {
             alert("Functionality not available");
         }

         function success_callback(p) {
             //alert('lat=' + p.coords.latitude.toFixed(2) + ';lon=' + p.coords.longitude.toFixed(2));
             longitude = p.coords.longitude.toFixed(2);
             latitude = p.coords.latitude.toFixed(2);
         }

         function error_callback(p) {
             alert('error=' + p.code);
         }
</script> 
```

然后从经纬度，可以使用google api获取位置： [http ://maps.googleapis.com/maps/api/geocode/json?latlng=33.84,35.52&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=33.84,35.52&sensor=false)

# javascript - 我的跳转菜单将我重定向到正确的页面，但如果没有快速重定向到未找到的页面，则不会显示我的 jQuery 对话框

> ID：14265156
> 
> 赞同：0
> 
> 时间：2013-01-10T18:50:02.103
> 
> 标签：javascript, jquery, select, modal-dialog

我有一个跳转菜单，里面有几个不同的选项。一个选项要求打开一个对话框，而其他两个选项重定向到站点内的其他页面。

我似乎只能一次获得两种选择之一。当我保留 onChange 脚本时，对话框会打开，但随后会快速重定向到“找不到页面”，但会正确重定向到页面。当我删除 onChange 脚本时，对话框打开正常，但其他选项不会重定向我。

我可以同时工作吗？

这是我的菜单：

```
<select name="select_menu" size="1" class="select" onChange="if(this.selectedIndex!=0)
self.location=this.options[this.selectedIndex].value">
   <option selected="selected"><em>Options...</em></option>
   <option value="http://..1">Change Cat</option>
   <option class="bulkConfirmOpen">Approve</option> <!--dialog-->
   <option value="http://..2">Move to Cat</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:14:21.793

发生的情况是，当您单击应该打开对话框的选项时，更改脚本仍会尝试重定向到以选项值作为 url 的页面。在这种情况下，具有“bulkConfirmOpen”类的选项的值为“Approve”。这不是一个有效的网址。

有几种方法可以解决这个问题。如果索引为 2（bulkConfirmOpen 选项的索引），您可以避免设置位置，或者更好的是，在更改位置之前检查 bulkConfirmOpen 类。

```
<select name="select_menu" size="1" class="select" onChange="if(this.selectedIndex!=0 && this.options[this.selectedIndex].className != 'bulkConfirmOpen')
self.location=this.options[this.selectedIndex].value">
   <option selected="selected"><em>Options...</em></option>
   <option value="http://..1">Change Cat</option>
   <option class="bulkConfirmOpen">Approve</option> <!--dialog-->
   <option value="http://..2">Move to Cat</option>
</select> 
```

# cordova - Phonegap 原生日期时间选择器

> ID：14265157
> 
> 赞同：0
> 
> 时间：2013-01-10T18:50:07.910
> 
> 标签：cordova, plugins, time, picker

我在我的应用程序中使用它来选择时间：[https ://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker](https://github.com/phonegap/phonegap-plugins/tree/master/Android/DatePicker)

但是，当本地时间选择器弹出时，时间显示为 24h 格式而不是 12h，有没有办法让时间在选择器中显示为 12h 格式？

选择时间后，输入显示为 12 小时，但当我选择选择器选项时，它们都是 24 小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:59:05.617

如果将[DatePickerPlugin.java](https://github.com/phonegap/phonegap-plugins/blob/master/Android/DatePicker/DatePickerPlugin.java)的第 102 行修改为：

```
mMinutes, false); 
```

“false”将告诉时间选择器以 12 小时格式显示。

# grails - Grails 安装插件 git 错误

> ID：14265165
> 
> 赞同：0
> 
> 时间：2013-01-10T18:50:27.147
> 
> 标签：grails, grails-plugin, grails-2.0

*环境* **Windows 7、Grails 2.2.0/2.X、GGTS**

我已经在我的计算机上成功安装了 git，我现在正在尝试使用命令**install-plugin command**为 grails 安装 Git 插件。我收到以下错误，我一直在寻找解决方案，但尚未找到解决方案。

出现问题（卸载）安装插件。查看详细信息以获取更多信息

------System.out:------------

| 加载 Grails 2.2.0

| 配置类路径。

| 环境设置为开发......

| 警告 install-plugin 命令已被弃用，可能会从 Grails 的未来版本中删除。插件依赖项应该在 grails-app/conf/BuildConfig.groovy 中表示。请参阅[http://grails.org/doc/2.2.x/guide/conf.html#pluginDependencies](http://grails.org/doc/2.2.x/guide/conf.html#pluginDependencies)。

| 解决插件 git。请稍等...

**| 解析插件时出错 [name:git, group:org.grails.plugins, version:1.0-SNAPSHOT]。未找到插件。**

**| 找不到名称 [git] 和版本 [1.0-SNAPSHOT] 的错误插件****

------System.err:------------

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:35:26.213

我在安装可搜索插件时遇到了这个问题，但我发现我的互联网连接是通过代理，所以我得到了直接连接并且安装成功

谢里夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-29T16:10:28.810

我最终改用了该`grails integrate-with --git`命令

# sql - SQL IN 子句正则表达式

> ID：14265171
> 
> 赞同：1
> 
> 时间：2013-01-10T18:50:38.797
> 
> 标签：sql, regex

我正在尝试编写正则表达式来验证 SQL IN 子句，其中括号内的值是数字（id），例如（23,109,1）但不是（23,109，）或（23，）或（）。

我现在的表达是：

```
^\([0-9,]+\)$ 
```

但它也允许错误的值。

我不太擅长正则表达式，也尝试过类似的东西：

```
^\(([0-9]+,)+\)$ 
```

但我想这不是重点。
有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:54:51.970

您的第二次尝试即将完成；问题是，`^\(([0-9]+,)+\)$`需要尾随逗号。让我们试试`^\([0-9]+(,[0-9]+)*\)$`。

不知道您的正则表达式库/方言；也许还有很多需要改进的地方（\d 表示数字；允许元素之间有空格等）。

# java - Swing 不在 Mac 上绘图

> ID：14265183
> 
> 赞同：1
> 
> 时间：2013-01-10T18:51:20.030
> 
> 标签：java, eclipse, macos, swing, paintcomponent

我正在尝试使用 Java 中的 swing 绘制一个非常基本的形状，但是由于某种原因，它似乎不起作用。这是我从讲师那里下载的代码，他在讲座中向我们展示了，但是当我运行它时，窗口打开但没有绘制任何内容，我不知道为什么。

```
package graphicsEx;

import java.awt.*;
import java.awt.geom.*;
import javax.swing.*;

public class Lecture1Example extends JPanel{
    // This is where the JPanel gets (re-)painted when the screen is refreshed.
    public void paintComponent(Graphics g) {
        // Cast to Graphics2D for more features.        
        Graphics2D g2D = (Graphics2D) g;

        Rectangle2D rect = new Rectangle2D.Double(20,30,40,50);
        g2D.setColor(Color.red);
        g2D.draw(rect);
        g2D.fill(rect); 
    }

    public static void main(String args[]) {
        JFrame frame = new JFrame("Playing with Graphics");
        frame.setSize(500, 400);
        frame.setVisible(true);
        frame.setContentPane(new Lecture1Example());        
    }
} 
```

我正在使用 Eclipse IDE。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T19:14:11.013

尊敬的user1821475的讲师：

*   Swing GUI 对象应该*只*在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。

*   “具有 UI 委托的 Swing 组件的子类（与 的直接子类相比`JComponent`）应[`super.paintComponent()`](http://www.oracle.com/technetwork/java/painting-140037.html#callbacks)在其`paintComponent`覆盖范围内调用。

*   “作为一种便利`add`及其变体，`remove`并`setLayout`已被覆盖以根据需要[转发](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)给`contentPane`。”

*   最外层`Container`应该`setVisible()`只*在*调用`pack()`和其他影响几何的方法之后。

# c# - 有条件地允许在 FormView 中进行编辑？

> ID：14265191
> 
> 赞同：2
> 
> 时间：2013-01-10T18:52:16.810
> 
> 标签：c#, asp.net, .net, formview

以编程方式启用或禁用在 C# 中编辑 FormView 的能力的最佳方法是什么？理想情况下，我正在寻找类似的东西：

```
if (user.IsAdmin())
    FormView.Editable = true;

else
    FormView.Editable = false; 
```

但我似乎找不到可以让我这样做的属性。我定义了一个编辑项目模板，所以当我看到 FormView 时总是会出现“编辑”按钮。

如果您需要任何其他信息，请告诉我。我故意没有发布任何代码以使其尽可能通用-我可以根据自己的情况对其进行调整。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:52:20.137

我能给出的最佳建议如下：

使用您要定位的编辑按钮设置您的项目模板。例如

```
<asp:Formview ...>
  ...
  <ItemTemplate>
    ...
    <asp:Button runat="server" id="edit_button" CommandName="Edit" Text="Edit" />
    ...
  </ItemTemplate>
</asp:FormView> 
```

然后，在您的代码隐藏中，您可以根据权限允许/禁止该按钮。例如

```
void Page_Load(...)
{
  ...
  ((Button)this.formView.FindControl("edit_button")).Enabled = User.IsAdmin();
  ...
} 
```

# xml - 尝试将 xslt 文件/模板导入另一个 xslt 文件并传递参数。我在这里做错了什么

> ID：14265192
> 
> 赞同：0
> 
> 时间：2013-01-10T18:52:19.347
> 
> 标签：xml, xslt

我正在使用 XSLT 2.0。这是我的第一个文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0" xmlns:xalan="http://xml.apache.org/xslt" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:IAAXML="http://www.ibm.com/industries/financialservices/IAAXML">
    <xsl:import href="address.xsl"/>
    <xsl:template match="/">
        <Claim>
            <Contact>
                    <xsl:variable name="contact" select="//IAAXML:Invoice/IAAXML:roleInFinancialStatement/IAAXML:party[@xsi:type='IAAXML:Organization']/IAAXML:subOrganisation"/>
                    <xsl:call-template name="address">
                        <!-- <xsl:param name="contactParam" select="$contact"/> -->
                        <xsl:with-param name="contactParam" select="$contact"/>
                    </xsl:call-template>
            </Contact>
        </Claim>
    </xsl:template>
</xsl:stylesheet> 
```

这是我的第二个文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0" xmlns:xalan="http://xml.apache.org/xslt" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:IAAXML="http://www.ibm.com/industries/financialservices/IAAXML">
    <xsl:param name="contactParam" select="'default'"/>
    <!-- <xsl:param name="address" select="'default'"/> -->
    <xsl:template match="/" name="address" >
        <Address>
            <xsl:variable name="address" select="$contactParam[IAAXML:type/IAAXML:name='Department']/IAAXML:partyContactPreferences/IAAXML:contactPoints" />
            <AddressLine1>
                <xsl:value-of select="$address/IAAXML:addressLines" />
            </AddressLine1>
            <City>
                <xsl:value-of select="$address/IAAXML:city" />
            </City>
            <State>
                <xsl:value-of select="$address/IAAXML:state" />
            </State>
        </Address>
    </xsl:template>
</xsl:stylesheet> 
```

我收到以下错误：IXJXE0781E: [ERR 0700][ERR XTSE0680] 将不是隧道参数“contactParam”的参数传递给没有具有相同扩展 QName 的模板参数的模板是静态错误.; SystemID：file:/C:/p4/xslPlay/partyTx/test.xsl；行号：10；第 62 列

我究竟做错了什么？如何完成将参数传递给另一个文件？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:03:27.193

在这种情况下，您的模板不应该有一个名为 contactParam 的参数吗？：

```
<xsl:template match="/" name="address" >
    <xsl:param name="contactParam" select="'default'"/> 
```

我有一种感觉，这就是错误所在。

# mysql - SELECT 仅从 15 分钟前开始

> ID：14265193
> 
> 赞同：0
> 
> 时间：2013-01-10T18:52:28.270
> 
> 标签：mysql, sql

我想从最大的聊天日志中选择文本。15分钟前，但这不起作用

我究竟做错了什么？

我的字段“日期”是`2013-01-04 22:50:53`

```
 select user 
 from chatlog 
 WHERE date  >= DATE_SUB(CURDATE(),INTERVAL 15 MINUTE) 
   AND  room = '".$roomId."' 
   and user != 35 
   and event_id IS NULL 
```

也尝试`<=`过而不是`>=`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:56:16.860

CURDATE 只有一个日期组件（不是时间）。您需要改用 NOW()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:55:52.917

您需要使用`NOW()`：

```
SELECT `user`
FROM chatlog
WHERE date > NOW() - INTERVAL 15 MINUTE
    AND room = '" . $roomId . "' 
    AND `user` != 35 
    AND event_id IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T18:55:49.357

尝试这个：

```
SELECT user FROM chatlog 
     WHERE date  >= NOW() - INTERVAL 15 MINUTE
     AND  room = '".$roomId."' 
     AND user != 35
     AND event_id IS NULL 
```

# c# - 如何使用 LINQ 执行此操作？

> ID：14265194
> 
> 赞同：-4
> 
> 时间：2013-01-10T18:52:30.123
> 
> 标签：c#, linq, linq-to-sql, hierarchy

```
ID  kidID   grandKidID
1   3           7
1   3           8
1   4           9
2   5           10
2   6           11 
```

有两个人 1 和 2（在 ID 列下）。先生 1 有两个孩子 3 和 4。（KidID 列）。他们自己也有自己的孩子（grandKidID 专栏）

可以说我们只考虑这三代人。40 年代出生的人称为 ID，70 年代出生的人称为孩子，2000 年后出生的人称为孙子。

对于内存中的上述列表，我想编写一个 LINQ 查询，它给我一个 ID 列表，以及他们所有的孩子，孩子们会有他们自己的孩子。

我怎样才能在 LINQ 中做到这一点？我写的查询似乎太乏味了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:58:26.097

```
var results = people
    .SelectMany(p => p.Kids
        .SelectMany(c => c.Kids
            .Select(g => new { 
                ID = p.ID, 
                KidID = c.ID, 
                GrandKidID = g.ID
             }))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:13:02.883

按 ID 分组，将 KidID、GrandKidID 提取到新的 Person 中。为孩子们重复这个过程。

```
class Person {
  public int ID {get; set; }
  public List<Person> Kids {get; set; }
}

List<Person> = snafuPersons
     .GroupBy(person => person.ID)
     .Select(group => new Person {
        ID = group.Key,
        Kids = group.GroupBy(kid => kid.KidID)
                .Select(kidGroup => new Person{
                   ID = kidGroup.Key,
                   Kids = kidGroup.Select(grandKid => 
                                     new Person { ID = grandKid.GrandKidID})
                                  .ToList()
                }).ToList()
      }).ToList; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T18:57:47.020

按 ID 和 KidID 分组

```
var result = data.GroupBy (x => new { ID = x.ID, KidID = x.KidID }).Select( x=> x.Key).ToArray(); 
```

# jquery - 在可滚动列表中获取部分隐藏的 div 的宽度（演示可用）？

> ID：14265195
> 
> 赞同：0
> 
> 时间：2013-01-10T18:52:37.693
> 
> 标签：jquery, width, offsetwidth

这让我发疯...

我有一个文件名列表，我只想垂直滚动，所以如果文件名（=div）比列表本身宽，我想“带出”完整的 div 以显示名称。

你可以在这里看到这个我的行动：http: [//j25.wasen.net/index.php/news](http://j25.wasen.net/index.php/news)

我通过在悬停时创建 div 的克隆并将其添加到主体并在其上设置非常高的 zIndex 来解决此问题。这是一个克隆 div 将出现在所有内容的顶部，但与原始 div 的位置相同。

我真的不明白为什么，但由于某种原因，宽度小于列表的 div 显示在错误的位置。但是，超出宽度的项目会显示在正确的位置。

我想检查包含名称的 div 是否超过列表的宽度，然后才创建克隆，这也是只需要它的时候。

但是我无法获得 div 的真实宽度。我添加了 Console.log 语句，以便显示它捕获的宽度。

我检查附加到身体（=克隆）的div的宽度，而不是列表中的div（部分隐藏）......

如何获得 div 的真实宽度？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:28:30.667

下载 Mozilla 的 firebug 插件。安装后，您可以右键单击任何元素以查看其样式和布局等。

选择右下角的布局选项卡，如果将鼠标悬停在 div 上，您将看到元素尺寸，包括任何边距和填充。

在这里下载：[https ://getfirebug.com/](https://getfirebug.com/)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T03:20:18.020

你的大前提是好的。请参阅此示例。为此，我

1.  创建悬停列表项的克隆
2.  用于`offset`正确定位
3.  在 mouseleave 上删除悬停的元素

`Hover`造成不必要的闪烁。因此单独事件处理的原因。

[http://jsfiddle.net/5zErQ/](http://jsfiddle.net/5zErQ/)

```
var $clone;
$('li').mouseenter( function() {
  $clone = $('<span />', {text: $(this).text(), class:'temp'});
  $clone.css({position:'absolute', top:$(this).offset().top, left:$(this).offset().left});
  $('body').append($clone);
});

$('body').on('mouseleave', 'span', function() {
  $(this).remove();
}); 
```

# java - 读取文本文件时出现 Java 异常

> ID：14265196
> 
> 赞同：0
> 
> 时间：2013-01-10T18:52:41.200
> 
> 标签：java, graph, directed-graph

'file.txt' 中的新功能是以下几行：

```
 [noduri1]
   {x0;140;104;31;50;}
   {x1;361;132;55;50;}
   [arce1]
   {a0;160;143;386;173;0;1;}
   [noduri2]
   {x2;192;82;27;50;}
   {x3;174;263;27;50;}
   [arce2]
   {a0;200;119;196;300;0;1;}
   [end_graph] 
```

这些线代表两个有向图的绘制，每一个都在两个不同的 JPanel 中，但是 writefile 函数将它们放在“file.txt”中。

当我想打开任何绘制的图形时，问题从 readfile 类开始，我收到此异常：

```
Exception in thread "AWT-EventQueue-0" java.util.NoSuchElementException
    at java.util.StringTokenizer.nextToken(StringTokenizer.java:349) 
```

读取文件代码是：

```
 package pachet;
          import java.io.File;
          import java.io.FileReader;
          import java.io.BufferedReader;
          import java.io.IOException;
          import java.util.Vector;
          import java.util.StringTokenizer;
          public class FileOperationRead {
private File file;
private Vector lines;
private aArce1 arcele = new aArce1();
private aNoduri1 nodurile = new aNoduri1();
    private bArce2 arcul = new bArce2();
    private bNoduri2 nodul = new bNoduri2();
private FileOperationRead() {
    lines = new Vector();
}
public FileOperationRead(File file) {
    this();
    this.file = file;
    loadList();
    createListaNoduri1();
    createListaArce1();
            createListaNoduri2();
    createListaArce2();
}
public FileOperationRead(String pathAndFileName) {
    this();
    this.file = new File(pathAndFileName);
    loadList();
    createListaNoduri1();
    createListaArce1();
            createListaNoduri2();
    createListaArce2();
}
private void loadList() {
    String line;
    try {
        BufferedReader br = new BufferedReader(new FileReader(file));
        line = br.readLine();
        while (line != null) {
            line = StringExt.blankEliminator(line);
            //add the lin to list
            lines.add(line);
            //read a new line from file
            line = br.readLine();
        }
    } catch (IOException e) {
    }
}
private void createListaNoduri1() {
    aNod nodet = new aNod();

    String line;
    StringTokenizerDebugDecorator st;
    int i = 1;

    //no nodes !!!
    if (lines.size() < 8) {
        return;
    }
    while (!((String) lines.get(i)).toUpperCase().equals("[ARCE1]")) {
        line = (String) lines.get(i);
        //eliminate the '{}'
        line = line.substring(1, line.length() - 1);
        //creating the tokenizer
        st = new StringTokenizerDebugDecorator (line, ";");
        //creating the node
        nodet = new aNod();
        nodet.setLabel(st.nextToken());
        nodet.setX(Integer.parseInt(st.nextToken()));
        nodet.setY(Integer.parseInt(st.nextToken()));
        nodet.setWidth(Integer.parseInt(st.nextToken()));
        nodet.setHeight(Integer.parseInt(st.nextToken()));
        nodet.setSelected(false);

        nodurile.add(nodet);

        //next node...
        i++;
    }
}
private void createListaArce1() {
    aArc arct = new aArc();

    String line;
    StringTokenizerDebugDecorator st;
    int i = 1;
    while (!((String) lines.get(i)).toUpperCase().equals("[ARCE1]")) {
        i++;
    }
    i++;
    if (i == lines.size() - 1) {
        return;
    }
    while (i < lines.size() - 1) {
        line = (String) lines.get(i);
        //eliminate the '{}'
        line = line.substring(1, line.length() - 1);
        //creating the tokenizer
        st = new StringTokenizerDebugDecorator(line, ";");
        //creating the arc
        arct = new aArc();
        arct.setLabel(st.nextToken());
        arct.setX1(Integer.parseInt(st.nextToken()));
        arct.setY1(Integer.parseInt(st.nextToken()));
        arct.setX2(Integer.parseInt(st.nextToken()));
        arct.setY2(Integer.parseInt(st.nextToken()));
        arct.setaNodSrc(nodurile.getaNod(Integer.parseInt(st.nextToken())));
        arct.setaNodDest(nodurile.getaNod(Integer.parseInt(st.nextToken())));
        //add the arc to the arcs list
        arcele.add(arct);

        //add the arc to the arcs list
        arcele.add(arct);

        //next arc...
        i++;
    }
}

   private void createListaNoduri2(){
        bNod nodel = new bNod();
        String line;
    StringTokenizerDebugDecorator st;
    int i = 1;
        while (!((String) lines.get(i)).toLowerCase().equals("[end_graph]")) {
        i++;
    }
    i++;
            if (i == lines.size() - 1) {
        return;
    }
            while (i < lines.size() - 1) {
                line = (String) lines.get(i);
        //eliminate the '{}'
        line = line.substring(1, line.length() - 1);
        //creating the tokenizer
        st = new StringTokenizerDebugDecorator(line, ";");
                    nodel = new bNod();
        nodel.setLabel(st.nextToken());
        nodel.setX(Integer.parseInt(st.nextToken()));
        nodel.setY(Integer.parseInt(st.nextToken()));
        nodel.setWidth(Integer.parseInt(st.nextToken()));
        nodel.setHeight(Integer.parseInt(st.nextToken()));
        nodel.setSelected(false);

        nodul.add(nodel);
                    i++;
            }

    }
   private void createListaArce2(){
       bArc arcl= new bArc();
       String line;
    StringTokenizerDebugDecorator st;
    int i = 1;
        while (!((String) lines.get(i)).toUpperCase().equals("[END_GRAPH]")) {
        i++;
    }
    i++;
            if (i == lines.size() - 1) {
        return;
    }
            while (i < lines.size() - 1) {
                line = (String) lines.get(i);
        //eliminate the '{}'
        line = line.substring(1, line.length() - 1);
        //creating the tokenizer
        st = new StringTokenizerDebugDecorator(line, ";");
                    arcl = new bArc();

        arcl.setLabel(st.nextToken());
        arcl.setX1(Integer.parseInt(st.nextToken()));
        arcl.setY1(Integer.parseInt(st.nextToken()));
        arcl.setX2(Integer.parseInt(st.nextToken()));
        arcl.setY2(Integer.parseInt(st.nextToken()));
        arcl.setbNodSrc(nodul.getbNod(Integer.parseInt(st.nextToken())));
        arcl.setbNodDest(nodul.getbNod(Integer.parseInt(st.nextToken())));
        arcul.add(arcl);
                    i++;

   }
   }
public aNoduri1 getaNoduri1() {
    return ((aNoduri1) nodurile.clone());
}
public aArce1 getaArce1() {
    return ((aArce1) arcele.clone());
}
    public bNoduri2 getbNoduri2(){
        return ((bNoduri2) nodul.clone());
    }
    public bArce2 getbArce2() {
    return ((bArce2) arcul.clone());
} 
```

}

# c++ - DirectShow Sample Grabber 被调用，但回调中的“this”为 NULL

> ID：14265199
> 
> 赞同：0
> 
> 时间：2013-01-10T18:52:49.233
> 
> 标签：c++, windows, webcam, directshow, samplegrabber

我正在研究 DirectShow filtergraph 的基本实现，以从我的应用程序中的网络摄像头获取图像。我已经阅读了文档并创建了一个简单的实现。我创建了这个图：设备 --> samplegrabber -> nullrenderer。

我正在检查所有可能的结果值，并且我没有从 SDK 中得到任何错误。

**问题：**

不知何故，我的回调被正确调用了，但是每当我在回调函数中添加任何代码（这对 SampleCB 和 BufferCB 都有效）时，我的应用程序就会静默崩溃。

我在 BufferCB 中添加了一个断点，我看到“this”是 0x0000000 / NULL。因为我在创建图表时检查了所有结果值，所以我的猜测是我的图表设置是正确的，并且这个问题可能与 COM 相关。但这只是一个疯狂的猜测。

因为 Windows 7.0 SDK 不提供包含 ISampleGrabber 接口的接口的 qedit.h，所以我自己创建了这个文件并添加了相关接口（我在谷歌搜索时在帖子的某处找到了内容）。

我从文档中复制了 saveGraph 函数，以便可以在 GraphEdit 中测试图形。添加渲染节点时，我看到 GraphEdit 会自动编辑颜色转换节点。当我使用渲染器运行图表时，我可以看到来自网络摄像头的图像（在 graphedit 中）。

[我已经在这个要点中粘贴了所有相关代码（带有调用堆栈跟踪+变量）](https://gist.github.com/df1dd70463d78a9fdc55)

有人知道我如何调试这个或这个错误可能是什么？它可能与COM相关吗？

**更新：尝试访问我的成员时调用堆栈** `ISampleGrabberCB`

```
ntdll.dll!_ZwRaiseException@12()  + 0x12 bytes  
ntdll.dll!_ZwRaiseException@12()  + 0x12 bytes  
msvcr100d.dll!__lock_fhandle(int fh)  Line 467  C
qedit.dll!CSampleGrabber::Receive()  + 0x18c bytes  
qedit.dll!CTransformInputPin::Receive()  + 0x33 bytes   
quartz.dll!CBaseOutputPin::Deliver()  + 0x22 bytes  
quartz.dll!CVideoTransformFilter::Receive()  + 0x1aa bytes  
quartz.dll!CTransformInputPin::Receive()  + 0x33 bytes  
quartz.dll!CBaseInputPin::ReceiveMultiple()  + 0x33 bytes   
qcap.dll!COutputQueue::ThreadProc()  + 0x103 bytes  
qcap.dll!COutputQueue::InitialThreadProc()  + 0x16 bytes    
kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:59:33.367

由于 qedit.h 不再在 Windows SDK 上，因此您必须定义 Sample Grabber 相关接口。一种方法是使用旧的 SDK，所有标头仍在上面。另一种方法是`#import`从类型库中获取接口。您可以随时在代码中重新定义它们。

[您可以从那里](http://www.alax.info/trac/public/browser/trunk/Utilities/ConfigureVideoResizerDmo/ConfigureVideoResizerDmo.cpp?rev=84#L20)获取正确的定义：

```
struct __declspec(uuid("0579154a-2b53-4994-b0d0-e773148eff85"))
ISampleGrabberCB : IUnknown
{
  virtual HRESULT __stdcall SampleCB (double SampleTime, struct IMediaSample * pSample ) = 0;
  virtual HRESULT __stdcall BufferCB (double SampleTime, unsigned char * pBuffer, long BufferLen ) = 0;
}; 
```

因为你没有`__stdcall`你的，所以使用了错误的调用约定，而你的`this`是`NULL`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:21:28.817

此问题不太可能仅与 COM 有关。您建议 COM 似乎以某种方式调用您的回调接口，而它是 eventaully `NULL`。但如果是这种情况，即使没有向回调实现添加任何代码，您也会看到崩溃。

您可能知道，COM 中的所有接口函数都是`virtual`. 调用这样的函数涉及首先取消引用接口指针并读取相应`vtable`条目的内容。因此，在接口指针上调用`virtual`函数`NULL`会立即导致访问冲突。OTOH 在对象上调用非虚拟函数`NULL`是可以的（至少从实现的角度来看，将 C++ 标准放在一边）。

我建议您仔细查看调用堆栈。我相信 COM 方法被正确调用。但是，在您的特定示例中，您可能不会直接实现 COM 回调方法，而是可能由一些包装器代码调用它（很可能是 DirectShow 库）。你应该在那里寻找问题。

# java - 枚举中的静态最终方法

> ID：14265200
> 
> 赞同：13
> 
> 时间：2013-01-10T18:52:51.387
> 
> 标签：java, oop, enums

所以我环顾了谷歌和所以，我找不到一个例子或解释：`static` `final`方法的目的是什么`enum`？

我的理解：

1.  `static`可以像函数/过程语言一样访问方法声明。
2.  `final`意味着你不能*覆盖*它。无法更改参考。正如 assylias 在评论中指出的那样，`static`也不能被覆盖。
3.  `enum`s 不能被子类化，[在这里](https://stackoverflow.com/questions/1414755/java-extend-enum)解释。

那么，如果 s 中的`static` `final`方法`enum`永远不会被*覆盖*，那么它的意义何在，因为不会有子类？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T18:57:41.500

通过将静态方法设为 final，[您可以防止它](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.3)被子类隐藏（只有实例方法可以被覆盖）。

由于 enum 不能被子类化，因此将静态方法设为 final 是多余的，但并非禁止。

注意：从技术上讲，每个具有类主体的枚举常量都[隐式定义了一个扩展枚举的匿名类](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.1-300)。但是由于[内部类可能没有声明静态方法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.3-130)，静态最终方法不能隐藏在这样一个常量的类体中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T18:57:21.900

很容易看出为什么`static`方法有意义，所以我想问题是关于`final`修饰符的。

`final`在这里没有任何用处，除了可能使代码更容易阅读，但不是很多。

它类似于`interface`方法通常写成的方式`public void foo();`，即使接口成员始终是公共的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T19:05:33.850

在 Java 中，枚举类型用于表示一组固定的常量，并将其设为 static final 仅有助于其初始化一次，单个副本在所有实例之间共享，使用类名访问变量，而 final 更像是只读的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T19:01:25.633

当您声明枚举的实例时，您可以覆盖枚举的方法，本质上枚举实例被实现为（或被认为）为子类。 `static`在任何情况下都不能覆盖方法，但 OP 和其他`final`对 an 多余的答案的含义`enum`是错误的。

# c# - 从 textbox.text 插入到 gridview

> ID：14265201
> 
> 赞同：0
> 
> 时间：2013-01-10T18:52:54.633
> 
> 标签：c#, asp.net, gridview

我有一个 gridview 控件，我想向文本框输入一个值并单击按钮，以便它将一个值从 textbox.text 插入到 gridview 中。我使用这段代码：

```
 <asp:TextBox ID="txtName" runat="server" ViewStateMode="Enabled"></asp:TextBox>
    <br />
    <asp:Button ID="btnAddName" runat="server" Text="Button" 
        onclick="btnAddName_Click" />
    <br />
    <br />
    <asp:GridView ID="gvName" runat="server" ViewStateMode="Enabled">
    <Columns>
    <asp:TemplateField>
    <ItemTemplate>
    <asp:Label ID="lblName" runat="server"></asp:Label>
    </ItemTemplate>
    </asp:TemplateField>
    </Columns>
    </asp:GridView> 
```

和：

```
protected void btnAddName_Click(object sender, EventArgs e)
    {

        DataTable dt = new DataTable();
        dt.Columns.Add(new DataColumn("lblName", typeof(string)));
        DataRow _dr = dt.NewRow();
        _dr["lblName"] = txtName.Text;
        dt.Rows.Add(_dr);

        gvName.DataSource = dt;
        gvName.DataBind();
    } 
```

我在文本框中输入文本，然后单击按钮将值插入到 gridview。它工作正常，但在第二步，页面回发后它丢失了gridview中的先前数据。

我不想丢失gridview中以前的数据。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:02:56.117

您需要将行添加到您绑定到的原始源`GridView`。如果每次单击按钮时都创建新表并将其绑定到`gridview`，它将显示`DataTable`新旧数据中的数据。

试试这个

```
 protected void btnAddName_Click(object sender, EventArgs e)
  {
    DataTable dt;
    if(Session["dt"] == null)
    {
        dt = new DataTable();
        dt.Columns.Add(new DataColumn("lblName", typeof(string)));
    }
    else
    {
        dt = (DataTable)Session["dt"];
    }

    DataRow _dr = dt.NewRow();
    _dr["lblName"] = txtName.Text;
    dt.Rows.Add(_dr);

    gvName.DataSource = dt;
    gvName.DataBind();

    Session["dt"] = dt; 
   //store dt in session so that you can reuse it again after postback
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:59:26.560

如果您的页面处于 PostBack 模式，您是否正在检查 Page_Load 方法？

```
if(IsPostBack) { //Load the data for the first time } 
```

如果没有，您的原始数据和“旧”数据将绑定到 gridview。

**更新：** 要重用旧数据，请将数据表存储在会话变量中，从那里加载它，添加新行并再次绑定数据数据表。

# hyperlink - 单击包含已知文本的特定部分的链接- watir webdriver

> ID：14265203
> 
> 赞同：3
> 
> 时间：2013-01-10T18:52:57.767
> 
> 标签：hyperlink, click, webdriver, watir

我想单击带有可变文本的链接：

```
@variabletext = 'text' +@timestamp 
```

但是该链接的数字类似于**01 # text010120121134**。我只知道text010120121134。有人可以帮我单击仅包含已知文本的链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T20:03:02.537

如果您只知道链接文本的一部分，请使用正则表达式来匹配文本：

```
browser.link(:text => /text010120121134/).click 
```

这将匹配链接：

```
<a>01 # text010120121134</a> 
```

由于文本“01 # text010120121134”与正则表达式模式“/text010120121134/”匹配。请注意，正则表达式由“/”表示。

# php - Symfony 组件缓存

> ID：14265204
> 
> 赞同：0
> 
> 时间：2013-01-10T18:52:59.577
> 
> 标签：php, caching, symfony-1.4

我通过在我的模块中编辑 cache.yml 文件来打开缓存组件

```
_startpage:
  enabled: true
  contextual: true
  lifetime: 60 
```

之后没有时间差，但我认为组件被缓存了，因为它上面有一个 symfony 缓存框（带有缓存信息）。我意识到对数据库的查询数量与没有缓存的情况相同 - 组件肯定会执行一些查询，那么为什么查询数量没有改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T12:43:55.040

解决了。

工厂.yml

```
view_cache:
  class: sfFileCache
  param:
    automatic_cleaning_factor: 0
    cache_dir:                 %SF_TEMPLATE_CACHE_DIR%
    lifetime:                  86400
    prefix:                    %SF_APP_DIR%/template 
```

# javascript - 如何覆盖 appendChild()？

> ID：14265219
> 
> 赞同：10
> 
> 时间：2013-01-10T18:53:45.430
> 
> 标签：javascript, dom, overriding

```
appendChild = function(message) {
    console.log("intercepted!");
} 
```

使用上面的代码似乎不起作用。

有谁知道？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T18:55:25.633

您可能想要替换的是`Element.prototype.appendChild`，但这可能是一个坏主意。

`intercepted`此示例在插入的元素中添加文本：

```
var f = Element.prototype.appendChild;
Element.prototype.appendChild = function(){f.apply(this, arguments);arguments[0].innerHTML="!Intercepted!"; };
document.body.appendChild(document.createElement("div")); 
```

[示范](http://jsfiddle.net/575qs/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-19T12:47:31.293

不建议覆盖本机函数，但如果这样做，请确保返回附加元素，以防止使用本机“appendChild”函数返回值的代码出现问题：

```
window.callbackFunc = function(elem, args) {
  // write some logic here
}
window.f = Element.prototype.appendChild;
Element.prototype.appendChild = function() {
    window.callbackFunc.call(this, arguments);
    return window.f.apply(this, arguments);
}; 
```

# ios - 带有 NSMutableArray 数据的 UITableView 返回空

> ID：14265220
> 
> 赞同：1
> 
> 时间：2013-01-10T18:53:48.987
> 
> 标签：ios, objective-c, uitableview, uipickerview

我想`TableView`根据`PickerView`视图中的选择填充 a 的内容。我到目前为止的代码是：

```
- (IBAction)findOwnerButtonPressed:(id)sender
{
    findShip.hidden = NO;
    shipOwners.hidden = NO;

    boatsTableView.hidden = YES;
    boatOwners = [NSArray arrayWithObjects:@"Owner1",@"Owner2",@"Owner3", nil];
}

- (IBAction)findShipButtonPressed:(id)sender
{
    shipOwners.hidden = YES;
    findShip.hidden = YES;
    boatsTableView.hidden = NO;
} 
```

**PickerView 数据源**

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    return [boatOwners count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView
             titleForRow:(NSInteger)row
            forComponent:(NSInteger)component
{
    return [boatOwners objectAtIndex:row];
} 
```

**PickerView 委托**

```
- (void)pickerView:(UIPickerView *)pickerView 
      didSelectRow:(NSInteger)row
       inComponent:(NSInteger)component
{
    NSString *boatsFromOwner = [boatOwners objectAtIndex:[shipOwners selectedRowInComponent:0]];
    boatsForOwner = [NSMutableArray arrayWithObjects:nil];
    if ([boatsFromOwner isEqualToString:@"Owner1"]) {
        [self.boatsForOwner addObject:@"Titanic"];
    }
    NSLog(@"%@",boatsFromOwner);
} 
```

**TableView 数据源和委托**

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [boatsForOwner count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SimpleTableItem";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    cell.textLabel.text = [boatsForOwner objectAtIndex:indexPath.row];
    return cell;
} 
```

这应该是从 a 归还船东公司`PickerWheel`，并把他们的船给我。此代码在表中不返回任何内容。当`PickerWheel`我选择它时记录'Owner1'。

我如何将对象添加到数组或如何初始化表或如何将`PickerWheel`结果与单词进行比较是我的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:05:21.160

做完之后

```
[self.boatsForOwner addObject:@"Titanic"]; 
```

您将需要手动刷新您的 tableview .. 所以在那之后

```
[_yourTableView reloadData]; 
```

我也会像这样初始化你的数组：

```
boatsForOwner = [NSMutableArray new]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:05:14.373

我认为首先`alloc`是`init`数组“boatsForOwner”

将您的选择器`didSelectRow` 方法替换为

```
-(void)pickerView:(UIPickerView *)pickerView 
     didSelectRow:(NSInteger)row
      inComponent:(NSInteger)component
{
    NSString *boatsFromOwner = [boatOwners objectAtIndex:[shipOwners selectedRowInComponent:0]];

    if(boatsForOwner) {
        [boatsForOwner release];
        boatsForOwner = nil;
    }

    boatsForOwner = [NSMutableArray alloc] init];

    if ([boatsFromOwner isEqualToString:@"Owner1"]) {
        [self.boatsForOwner addObject:@"Titanic"];
    }

    NSLog(@"%@",boatsFromOwner);

    [tableObject reloadData];

} 
```

当`release` `boatsForOwner`你 `dealloc`.

# python - 关闭时进程不会结束

> ID：14265223
> 
> 赞同：2
> 
> 时间：2013-01-10T18:53:56.533
> 
> 标签：python, tkinter

我用 Python 构建了一个网络爬虫应用程序。它由三个主要部分组成：

1.  GUI（基于 tkinter 构建）
2.  客户端（控制前端和后端之间的接口）
3.  后端代码（各种线程化进程）。

我遇到的问题是，当用户点击 X 退出程序而不是通过界面退出时，似乎 root.destroy() 永远不会被调用并且应用程序永远运行，即使窗口确实消失了。这最终会消耗大量的系统资源。

我尝试将所有线程设置为 Daemon，但没有取得多大成功。退出后程序会继续占用CPU的任何其他原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:59:25.127

您不想将***所有***线程设置为`daemon`. 您想将客户端线程和后端线程设置为守护进程。这样，当 GUI 线程终止时，`daemon`设置为`True`结束的线程也将结束。

从[文档](http://docs.python.org/2/library/threading.html#thread-objects)中：

> 可以将线程标记为“守护线程”。这个标志的意义在于，当只剩下守护线程时，整个 Python 程序就退出了。

# objective-c - 这是在幕后声明属性的方式吗？

> ID：14265230
> 
> 赞同：0
> 
> 时间：2013-01-10T18:54:24.293
> 
> 标签：objective-c, cocoa, properties

我想知道 setter 方法是如何创建的，我这样说是否正确：

保留/强属性：

```
- (void)setProperty:(Class *)class
{
    variable = [class retain];
} 
```

分配/弱属性：

```
- (void)setProperty:(Class *)class
{
    variable = class;
} 
```

复制属性：

```
- (void)setProperty:(Class *)class
{
    variable = [class copy];
} 
```

分配和弱甚至相同吗？

提前致谢！

# python - 在 Mac 上使用 pip 安装 Scrapy 时出错

> ID：14265231
> 
> 赞同：0
> 
> 时间：2013-01-10T18:54:27.107
> 
> 标签：python, scrapy, pip

我运行`pip install Scrapy`，一切似乎都下载正常，但安装最终失败。

权限是否存在某种问题？我是新手，所以非常感谢任何帮助！

精简终端输出：

```
...    

running install_egg_info

running egg_info

writing requirements to Scrapy.egg-info/requires.txt

writing Scrapy.egg-info/PKG-INFO

writing top-level names to Scrapy.egg-info/top_level.txt

writing dependency_links to Scrapy.egg-info/dependency_links.txt

warning: manifest_maker: standard file '-c' not found

reading manifest file 'Scrapy.egg-info/SOURCES.txt'

reading manifest template 'MANIFEST.in'

no previously-included directories found matching 'docs/build'

writing manifest file 'Scrapy.egg-info/SOURCES.txt'

Copying Scrapy.egg-info to /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Scrapy-0.16.3-py2.7.egg-info

running install_scripts

copying build/scripts-2.7/scrapy -> /Library/Frameworks/Python.framework/Versions/2.7/bin

error: /Library/Frameworks/Python.framework/Versions/2.7/bin/scrapy: Permission denied

----------------------------------------
Command /Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python -c "import setuptools;__file__='/Users/pavelfage/build/Scrapy/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /var/folders/x6/wf5kq24j109dnkhgjcs822ym0000gn/T/pip-QgV9nv-record/install-record.txt failed with error code 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:58:32.997

要写入 /Library/Frameworks/* 使用`sudo pip install scrapy`

如果使用虚拟环境，请先激活环境，然后安装

```
 $ . /path/to/venv/bin/activate
 $ pip install scrapy 
```

# java - Java RMI 注册表端口更改问题

> ID：14265232
> 
> 赞同：0
> 
> 时间：2013-01-10T18:54:28.277
> 
> 标签：java, rmi

您可以按如下方式在给定端口创建注册表。

```
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
...
Registry reg;
...
reg = LocateRegistry.getRegistry(port); 
```

没关系。但是，在第一次初始化之后，如何在需要时更改`Registry`( )的端口号？`reg`

我试图重新创建，，`reg = LocateRegistry.getRegistry(port)`但这给出了一些例外..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:20:27.923

> 您可以在给定端口创建注册表，如下所示

不，你不能。该代码只是在该端口构造一个引用注册表的存根，它甚至可能没有运行。做你所说的方法是`LocateRegistry.createRegistry().`

> 如何更改注册表的端口号

取消导出返回的对象并使用不同的端口号`createRegistry()`调用。`createRegistry()`

为什么你会想做这么奇怪的事情是另一回事。目的是什么？

> 我试图重新创建

不，你没有，见上文。所做的只是创建一个指向另一个端口的存根。它不会创建注册表。如果该端口上没有运行注册表，则存根在使用时将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:08:16.887

如果这个端口已经被 rmi 使用，你不能关闭它：

> 当前 RMI 实现的一个已知限制是它在虚拟机的生命周期内从不关闭服务器（被动/侦听）TCP 端口绑定。> Blockquote

来源：[http ://bugs.sun.com/view_bug.do?bug_id=4508962](http://bugs.sun.com/view_bug.do?bug_id=4508962)

也许这可以帮助你：

*   [如何关闭在特定端口上运行的 rmiregistry？](https://stackoverflow.com/questions/8386001/how-to-close-rmiregistry-running-on-particular-port)
*   [关闭 rmi 注册表](https://stackoverflow.com/questions/1087163/closing-rmi-registry)

但请发布例外。

# android - T9 / 多击键盘

> ID：14265240
> 
> 赞同：1
> 
> 时间：2013-01-10T18:54:51.097
> 
> 标签：android, keyboard

我正在尝试实现 T9/Multitap 键盘。目的是能够在两个模块之间切换。

我的问题是，在我的键盘布局中，我必须输入每个键的代码：

例子 ：`<key android:codes="[97,98,99]" android:keyLabel="abc"/>`

问题：如果我像示例中那样使用逗号分隔的值，键盘会自动作为多击键工作并等待一秒钟，然后再允许您键入 2 次相同的键。我找不到如何避免这种行为。

你们有什么想法吗？

# javascript - 动态生成的 html 元素停止工作

> ID：14265242
> 
> 赞同：0
> 
> 时间：2013-01-10T18:54:51.207
> 
> 标签：javascript, jquery

在下面的代码中，我在一个数组中有一些注释，这些注释使用 jQuery 显示在一个 div 中。每个评论都有一个选项按钮，在我发布新评论之前可以正常工作。我尝试为每个元素使用唯一 ID，但它也不起作用。

页面加载时，选项按钮起作用；但是当我提交新评论时，所有按钮都不起作用。我究竟做错了什么？

这是我的脚本：

```
var i = 0;
var comments_display= "";
var comments = ['Hello World!', 'Hello! This is a comment.'];

//reads the entire array, creates the content, and sends it to the div
function show_comments(){
   for (i=0; i<comments.length; i++){
     comments_display += "<div class='single_comment_container'>";
     comments_display += "<div class='comment_comment'>" + comments[i] + "</div>";
     comments_display += "<div class='options'>Options</div></div>";
    }
    $("#comment_container").html(comments_display);
    comments_display = "";
 }

//appends a new comment to the array
function new_comment(){
   if ($("#comment_input").val() == null || $("#comment_input").val() == ""){
      alert("Your comment must be at least 1 character long.");
   }

   else{
      comments.push($('#comment_input').val());
       show_comments();
       $("#comment_input").val("");
   }
}

$(document).ready(function(){
   show_comments();

   $("#submit_comment").click(function(){
      new_comment();
   });

//display a message when an element of the class 'options' is clicked
$(".options").click(function(){
   alert("OPTIONS");
});

}); 
```

这是一个小提琴，看看它是如何工作的。[http://jsfiddle.net/fahKb/3/](http://jsfiddle.net/fahKb/3/)

感谢您抽出宝贵时间阅读此问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:57:55.737

您需要使用委托：

```
$(document).on( 'click', '.options', function() {
   alert("OPTIONS");
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

注意：您可能想要使用除`document`. `div`（一些总是在页面上的父母或其他东西。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:02:39.993

仅仅因为您正在动态添加元素，所以单击将无法在这些元素上工作，因此您必须在页面上找到最近的现有父级，在您的情况下是这样`comment_container`并使用`.on()`处理程序：http: [//jsfiddle.net/fahKb/ 4/](http://jsfiddle.net/fahKb/4/)

```
$('#comment_container').on('click',".options",function(){
  alert("OPTIONS");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T20:05:15.943

```
$(document).on( 'click', '.options', function() {
   alert("OPTIONS");
}); 
```

第一个响应是正确的，原因是当元素加载到 DOM 中时，您分配了事件侦听器。基本上说嘿，如果这是“点击”然后做点什么。问题是在添加新元素时，您还没有添加事件侦听器。通过执行与上述代码类似的操作，基本上您所做的是搜索文档中所有具有“.options”类的内容，最后如果单击它，则执行一些代码。

话虽如此，使用文档并不是最理想的方法，但有时是必要的。一个更好的解决方案是，如果您将所有评论包装在一个“div”或其他一些元素中，然后将其传递给 document。这将不是在整个文档中搜索“.options”，它只会搜索您的包装器，从而消除大量不必要的工作。

```
$('.commentWrapper').on( 'click', '.options', function() {
   alert("OPTIONS");
}); 
```

# ios - IOS 3D Transform like Clear app

> ID：14265244
> 
> 赞同：0
> 
> 时间：2013-01-10T18:54:58.090
> 
> 标签：ios, ios6

所以我想做的是做同样的事情 Clear ( [http://www.realmacsoftware.com/clear/](http://www.realmacsoftware.com/clear/) ) 做。如果我向上或向下平移，它会出现一个具有 3D 视觉效果的新矩形。

我确实通过使用平移和旋转变换以及更改`m34`属性来做到这一点。

问题是，由于我移动了 2 个视图（如 Clear 移动屏幕上显示的矩形，以及出现 3D 视觉效果的矩形），当用户停止触摸屏幕时，我使用

```
[UIView animateWithDuration:0.5
                      delay:0
                    options: UIViewAnimationCurveEaseOut
                 animations:^{
                         ...
                 } 
                 completion:nil]; 
```

要将视图恢复到一致状态，要么显示新矩形，要么不显示（向下滑动），我可以看到 2 个视图之间的黑色背景，这意味着 2 个矩形没有同时重绘。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:16:27.080

如果没有更多细节，很难回答您的具体问题，但您可以查看[https://github.com/mpospese/MPFoldTransition](https://github.com/mpospese/MPFoldTransition)以获得灵感。

[Mark Pospesel 开发了这个包装器来执行这些类型的折叠变换，并在他的“折叠动画剖析”](http://markpospesel.wordpress.com/2012/05/10/anatomy-of-a-folding-animation/)博客文章中详细描述了它们背后的过程。

# google-visualization - 3D 饼图，在图表初始化时触发工具提示

> ID：14265259
> 
> 赞同：1
> 
> 时间：2013-01-10T18:55:41.833
> 
> 标签：google-visualization

无论如何触发特定饼图切片的鼠标悬停事件，该切片的工具提示将通过“就绪”事件出现？

我现在的代码如下：

```
google.visualization.events.addListener(google_chart, 'ready', function () {
    google_chart.setSelection([{row: 0, column: null}]);
}); 
```

setSelection() 似乎不会触发工具提示。

我在移动网络应用程序上使用 Google 图表，并希望避免使用图例，以便图表拥有尽可能多的空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T08:50:50.230

恐怕没有办法在 init 上触发内置工具提示。但是，您可以连接一个在启动时触发的自定义工具提示组件。

# java - 获取 json user_timeline api twitter 1.1

> ID：14265261
> 
> 赞同：0
> 
> 时间：2013-01-10T18:55:42.190
> 
> 标签：java, android, json, twitter, twitter-oauth

我正在为 android 制作一个应用程序，它的一个功能是推文列表，我阅读 twitter api 请求的 json 警报的推文，我使用的是 1.0 版的 api，但仅限于 150对于每小时的请求，它很容易被弹出。

我已经在 twitter 文档上阅读了很多小时，坦率地说，这很糟糕，没有像 facebook 文档这样的真实示例，更不用说没有手册解释每个错误返回的内容，我对此感到非常沮丧。

我需要在 java 中使用 user_timeline Oaut 身份验证的帮助请求

它[在这里](https://api.twitter.com/1/statuses/user_timeline/NAMEYOURACCOUNT.json)工作：

然而是 1.0 api 并且没有身份验证请求 de150 很容易弹出限制。

我不知道如何做到这一点，我发布它已经研究了很多并且没有得到任何具体的 resoltado。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:01:10.980

为什么不使用[Twitter4J 之](http://twitter4j.org/en/index.html)类的 Twitter 库？它支持 OAuth 和 API 1.1 版。

# c++ - 显式模板实例化 - 为什么需要它？

> ID：14265262
> 
> 赞同：0
> 
> 时间：2013-01-10T18:55:42.497
> 
> 标签：c++, templates

> **可能重复：**
> [显式实例化](https://stackoverflow.com/questions/2351148/explicit-instantiation)

为什么需要显式模板实例化？如果我只使用 GCC 和 CLANG（而不使用 MSVC），我是否需要它？

# jquery - jquery load Ajax - 向通过 ajax 加载的类添加点击功能

> ID：14265267
> 
> 赞同：0
> 
> 时间：2013-01-10T18:55:46.217
> 
> 标签：jquery, ajax, load

我一直在兜圈子。我希望有人可以提供帮助。

我一直在使用此代码用图像填充 div，每个图像都有一个 class="click"

```
$('#imagebox').load("../imagebox_builder.cshtml",{id:1}); 
```

我希望能够使用 click 类作为标识符向图像添加处理程序，以使用 load 用数据填充另一个 div。我不确定如何添加点击处理程序。任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:03:29.377

您需要使用`.on()`其未来时态来定位动态创建的元素，这些元素`.click`是在存在的事物中创建的 ( `#imagebox`)

```
$('#imagebox').on('click', '.click', function(e){
    // magic goes here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:03:43.323

**委托活动..**

```
$('#imagebox').on('click', 'img.click', function(){
    console.log("Element with class click has been clicked");

    // Add the div here
}); 
```

# html - @font-face 在本地工作，但在上传到托管空间时不工作

> ID：14265278
> 
> 赞同：4
> 
> 时间：2013-01-10T18:56:16.587
> 
> 标签：html, css, cross-browser, font-face

我正在建立一个网站，并试图获得与名为 Tex Gyre Cursor 的免费字体的跨浏览器兼容性。到目前为止，我已经尝试了几种通过谷歌搜索的方法。

[站点 1](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)、[站点 2](http://blog.themeforest.net/tutorials/how-to-achieve-cross-browser-font-face-support/)和[站点 3](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

他们在 Chrome、Firefox、Safari 和 Opera 上进行本地测试时工作过。虽然不在 IE 上。我不会为 IE 烦恼，因为它是一个巨大的痛苦，我已将 Tahoma 设置为它的备用字体。

我通过 FTP 文件管理器上传文件后出现问题。网络主机是 GoDaddy。

我也上传了字体文件。

我访问了该站点，但字体是 Tahoma，这发生在前面提到的所有浏览器上。

我束手无策，无法辨别问题所在。

这是我第一次尝试使用 CSS：

```
@font-face{    
    font-family:'TexGyreCursor';
        src: url('fonts/texgyrecursor.eot');
        src: local('texgyrecursor'), 
             local('texgyrecursor'), 
             url('fonts/texgyrecursor.ttf') format('truetype'),
             url('fonts/texgyrecursor.svg#font') format('svg'),
             url('fonts/texgyrecursor.otf');
} 
```

我的第二次尝试：

```
@font-face{
    font-family:'TexGyreCursor';
    src: url('fonts/texgyrecursor.eot');
    src: url('fonts/texgyrecursor.otf');
} 
```

如果需要更多信息，请告诉我:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-08T18:51:02.487

我最近遇到了这个问题，我正在使用 xampp 在 Windows 机器上进行设计并上传到 linux 服务器。我终于发现字体文件是 CamelCase 并且 css 代码都是小写的。

它并没有打扰我的本地机器，但 linux 将 CAPITALS.font 和 capitals.font 视为 2 个单独的文件。

您可能想检查一下这是否是您遇到的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T05:07:59.203

我遇到了许多字体嵌入问题，无论是将字体和`CSS`文件托管在不同的服务器上，还是 IE 是绝对的！@?#。

在 IE 中，按 12 将调出您的开发人员工具并检查显示的错误（如果有）。如果您看到以下任何错误：

```
CSS3111: @font-face encountered unknown error.
my-font.eot

CSS3117: @font-face failed cross-origin request. Resource access is restricted.
my-font.eot? 
```

我建议关注我几个月前打开的一个线程，这可能会有所帮助：[@font-face import not working in offline website/different host using online fonts via CSS in IE only](https://stackoverflow.com/questions/12371533/font-face-import-not-working-in-offline-website-different-host-using-online-fon)。这只是 IE 的问题，所以如果您遇到同样的问题，也不会感到惊讶。将字体传输到其他服务器时，我遇到了其他问题。

对于任何未来的字体嵌入，我强烈建议使用以下 CSS 代码并确保所有涉及的文件类型都正确转换：

```
@font-face {
    font-family:'My-Font';
    src:url('../includes/fonts/my-font.eot');
    src:url('../includes/fonts/my-font.eot?#iefix') format('embedded-opentype'),
            url('../includes/fonts/my-font.woff') format('woff'),
            url('../includes/fonts/my-font.ttf') format('truetype'),
            url('../includes/fonts/my-font.svg#my-font') format('svg');
    font-weight:normal;
    font-style:normal;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-11T20:36:28.047

只想快点帮到大家

> 第一：把它放在 .htaccess

```
<FilesMatch "\.(ttf|otf|eot)$">
    <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
    </IfModule>
</FilesMatch> 
```

> 其次：转到您托管网站的位置，在我的情况下，它是 cpanel 并检查文件权限，从字体文件夹到字体应该是 755。

[![像这样！](../Images/118b4eda85cff708cf98ae10171f113b.png)](https://i.stack.imgur.com/nba1o.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T04:45:29.647

代码不应该有任何错误；应该是浏览器或网络问题。

1.  尝试清除所有缓存并重新加载页面几次。
2.  如果这仍然不起作用，请转到 Chrome，加载页面，按`F12`，转到网络选项卡，然后重新加载页面。查看浏览器是否加载字体 CSS 文件和字体。
3.  如果出现 404 Not Found 错误，请将浏览器直接指向字体文件 ( `yourdomain.com/fonts/texgyrecursor.ttf`)。
4.  如果您无法直接访问字体文件，请检查您是否已上传。然后检查文件的权限。
5.  如果这*仍然*不起作用，请尝试添加`<link>`Google Webfonts 提供的标签，然后上传。

希望修复它！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-15T20:08:23.440

确切地！解决方案是从 css 中调用字体，区分大小写。例如不一样的调用是这样的： url (font/arial.ttf) 一个 ARIAL.TTF 文件必须是 url (font/ARIAL.TTF)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-07T18:05:14.700

我刚遇到同样的问题，原来我的“字体”文件夹上有一个大写字母，我用 FileZila 重命名了它，现在它工作得很好！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-11T02:54:41.110

服务器有`utf8`支持。因此，无需单独安装语言字体。如果您需要在您的网站中安装其他字体，请将字体文件上传到您的网站字体文件夹中。但是，如果任何语言不支持，那么您需要`utf8`在您的服务器上启用支持。您可以通过将下面提到的代码放在 head 标签中来做到这一点 -

```
<meta http-equiv=Content-Type content=text/html; charset=utf-8 /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-03-03T07:26:50.560

我遇到了类似的问题 - 只是通过替换字体 URL/路径来解决它。

```
 1\. add this into your head tag
<meta http-equiv=Content-Type content=text/html; charset=utf-8 /> 
```

2.  在脚本上识别您的字体系列，您可以在脚本上的字体链接/url 上找到它。

这是我的：

```
<link href='http://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500italic,700,500,700italic,900,900italic' rel='stylesheet' type='text/css'> 
```

3.  从以上细节可以看出字体家族是ROBOTO。然后我访问[GoogleFont 网站](https://fonts.google.com/)- 然后找到我需要的字体。我的字体：搜索字体：roboto 类别：无衬线字体

4.  一旦找到所需的字体 - 单击“选择此样式”按钮，您将获得如下链接/路径：

    链接 rel="preconnect" href="https://fonts.googleapis.com" 链接 rel="preconnect" href="https://fonts.gstatic.com" 跨域链接 href="https://fonts.googleapis .com/css2?family=Roboto:wght@100;400&display=swap" rel="stylesheet"

将其复制到您的脚本中。

清除您的浏览器 cookie/缓存或在私人浏览器上尝试（隐身）

# java - 将非 Applet 放到网站上

> ID：14265290
> 
> 赞同：1
> 
> 时间：2013-01-10T18:57:18.847
> 
> 标签：java, html, applet

我使用基于状态的游戏在 Java 中制作了一个 GUI，因为它扩展了 StateBasedGame 而不是 JApplet 它不是一个真正的小程序，我想把它放在一个网站上并且不确定如何做到这一点，我被告知以下代码允许我使用 html 将其制作成一个小程序，而不必编辑 Java 代码：

```
 <applet code="org.lwjgl.util.applet.AppletLoader" 
        archive="org.lwjgl.util.applet.AppletLoader" 
        codebase="." 
        width="640" height="480">

  <param name="al_title" value="Ham Blaster"> 
  <param name="al_main" value="org.newdawn.slick.AppletGameContainer"> 
  <param name="game" value="org.javagame.Game">

  <param name="al_jars" value="racegame.jar, lwjgl.jar, slick.jar"> 

  <param name="al_windows" value="windows_natives.jar"> 
  <param name="al_linux" value="linux_natives.jar"> 
  <param name="al_mac" value="macosx_natives.jar"> 

  <param name="separate_jvm" value="true"> 
</applet> 
```

我在 html 上运行它并收到以下错误消息：org.lwjgl.util.applet.AppletLoader 即使我的 lwjgl 中有一个 AppletLoader 类。

如果你能帮我修复上面的代码，请告诉我，但如果不可能，请给我另一种将我的 GUI 放到网站上的方法。

编辑1：

值得一提的是，当我制作 Java GUI 时，我已经将 lwjgl 和 slick 导入到 eclipse 中，所以我假设它们也在我的 racegame.jar 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:11:01.070

该类`org.lwjgl.util.applet.AppletLoader`需要在您的`applet`标签中指定的存档中，`lwjgl_util_applet.jar`. `lwjgl.jar`只是在`AppletLoader`解释的参数中指定的 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T00:13:55.697

尝试使用**JWS**（Java Web Start）。我不太了解 JWS，但您可以在此处了解更多信息：[https](https://www.google.com/search?q=java+web+start) ://www.google.com/search?q=java+web+start 。它允许用户从 Web 运行或下载 java 文件，因此您可以将 java 放入 HTML 中。*再说一次，我对此知之甚少，我*几天前才听说过（我也有同样的问题）。

最好的问候，苏丹。

# jquery - Jquery - 将元素文本存储在变量中以供在更改后访问

> ID：14265294
> 
> 赞同：2
> 
> 时间：2013-01-10T18:57:40.543
> 
> 标签：jquery

任何帮助都将不胜感激，我是 jquery 和 javascript 的新手，但我有这部分代码，我将它们散列在一起：

```
$('.comment-data').click(function() {
    var ThisData = $(this);
    var Thistitle = ThisData.find('h4');
    var original = Thistitle.text();
    var ThisNext = ThisData.next().find('ol');
    ThisNext.stop(true, true).customToggle(500, function() {
    ThisNext.is(':visible') ? Thistitle.text('Hide Comments') : Thistitle.text(original);
});
}); 
```

除了一件事，它还可以正常工作；我需要存储存储在“原始”变量中的初始文本，并在对文本进行更改后保持相同的访问（替换为“隐藏评论”）。希望这是有道理的，目前我假设变量 Thistitle 被更改为值“隐藏评论”，然后我实际上用这个覆盖了原始变量，因此当我将文本设置为原始变量时，我得到“隐藏评论” .

提前感谢您对如何解决此问题的任何见解，我尝试使用 .data 但这只是把所有事情都搞砸了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:59:45.493

将变量声明移到点击事件之外..

```
var original = "";

$('.comment-data').click(function() {
    // Your code here
    if( original === ''){
        original = Thistitle.text();
        // Only set if the variable is empty
    }
    // Then use the initial value here
} 
```

# excel - 将 pdf 批量转换为 Excel

> ID：14265297
> 
> 赞同：0
> 
> 时间：2013-01-10T18:57:49.030
> 
> 标签：excel, pdf, automation

如果这是这个问题的错误论坛，我深表歉意，但我有点绝望。我有 300 个 pdf 文件，我需要从中提取一些信息并将它们组合成一个 Excel 文件。PDF 是不可选择的，只有图像。如果有一种方法可以使流程自动化，那就太好了，但我真正想要的是更灵活的 Mechanical Turk 版本。任何想法将不胜感激。

谢谢！

# actionscript-3 - 任何 AS3 Maps API 仍然可用吗？

> ID：14265298
> 
> 赞同：2
> 
> 时间：2013-01-10T18:57:49.437
> 
> 标签：actionscript-3

我需要一个用于学校项目（AIR 桌面应用程序）的 AS3 地图 API。我想使用 Google Maps API，但由于它已被弃用，我无法获得密钥。我可以使用任何其他好的地图 API 吗？我只需要基本功能：搜索城市、获取坐标、计算距离并在地图上放置元素（圆/线）以连接城市。

任何建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:13:42.137

如果您不必使用 as3，您可以使用 Adob​​e Air 中的 JS Google Maps API。您也可以尝试[http://developer.mapquest.com/web/products/featured/as3-flex-flash](http://developer.mapquest.com/web/products/featured/as3-flex-flash)。我个人没有使用过 MapQuest，但我读过关于它的好评。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:26:01.023

您可以使用 ModestMaps。

*   [图书馆](https://github.com/migurski/modestmaps-as3)。
*   [简单教程](http://www.adobe.com/devnet/flex/articles/interactive_maps.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T22:11:25.523

您可以简单地使用[**flash.media.StageWebView**](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html)对象或[**flash.html**](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/html/package-detail.html)中的类来显示 Web 内容。但是，您必须使用 Google Maps API 和 JavaScript 自己创建 Web 内容。

# ruby-on-rails - Heroku登录时出现红宝石错误

> ID：14265301
> 
> 赞同：0
> 
> 时间：2013-01-10T18:57:56.377
> 
> 标签：ruby-on-rails, ruby, ubuntu, heroku, heroku-toolbelt

我是 ruby​​ 的新手，在尝试在 Heroku 上推送我的项目时发现了一个问题

当我执行：

```
 Heroku login 
```

结果是：

```
rbconfig/datadir.rb and {Rb}Config.datadir is being deprecated from RubyGems.
It will be removed completely on or after June 2011\. If you wish to rely on a
datadir, please use Gem.datadir.
/usr/local/lib/site_ruby/1.9.1/rubygems.rb:1245:in `<top (required)>': 
uninitialized constant RbConfig (NameError)
from <internal:gem_prelude>:1:in `require'
from <internal:gem_prelude>:1:in `<compiled>' 
```

我花了 3 天时间寻找解决此问题的方法，但没有结果

谢谢你能给我的帮助

我的操作系统是 ubuntu 12.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:22:26.873

在 /usr/local/lib/site_ruby/1.9.1/rubygems.rb 文件中查找`'require "RbConfig/datadir"'`并删除它。

感谢[来源](https://github.com/taskjuggler/TaskJuggler/issues/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T03:39:14.110

你在使用 Heroku Toolbelt 吗？[https://toolbelt.heroku.com/](https://toolbelt.heroku.com/)

红宝石已贬值，请勿使用

# javascript - JS：如何生成（随机）ID，如 ItXaK9gw

> ID：14265303
> 
> 赞同：0
> 
> 时间：2013-01-10T18:58:18.517
> 
> 标签：javascript, uid

生成随机（伪唯一）ID 的最佳方法是什么，其中包括：1）小字符 2）大写字符 3）使用 JavaScript（浏览器和节点）的数字。

我知道小字符寄存器的解决方案。

```
return ("00000" + (Math.random()*Math.pow(36,idLength) << 0).toString(36)).substr(-idLength); 
```

我想知道 ItXaK9gw 是否有类似 ID 的直接解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:06:13.437

您似乎已经知道如何生成伪随机整数，那么您需要做的就是对它进行[base64 编码](https://stackoverflow.com/questions/3774622/how-to-base64-encode-inside-of-javascript)。

请注意，尽管 JavaScript 的伪随机数生成器在[密码学上并不强](http://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator)，因此可以在您生成 ID 的同时在浏览器中运行 JS 的攻击者可能能够以相对较高的可能性猜测您生成的数字。

# javascript - 如何在 Opera 的弹出窗口中添加 onload eventListener

> ID：14265305
> 
> 赞同：1
> 
> 时间：2013-01-10T18:58:26.320
> 
> 标签：javascript, dom-events, opera

我正在编写一个需要在加载弹出窗口时调用函数的应用程序。目前，这是我正在使用的，它适用于 Firefox/Chrome/Safari：

```
var win = window.open(...);
win.addEventListener( 'load', function () {...}, true ); 
```

然而，歌剧不喜欢`win.addEventListener`。我也试过`win.opera.addEventListener`了，但这也没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T03:35:37.807

记录一下之前找到的[解决方案](https://stackoverflow.com/questions/10499709/opera-cant-get-load-event-from-window-open)

```
var openedWindow = window.open("test.html", "title");

window.setTimeout(function() {
    openedWindow.addEventListener("load", function() {
        console.log("received load event");
    }, false);
}, 0); 
```

# javascript - 如果已单击，将表行颜色更改回白色

> ID：14265309
> 
> 赞同：1
> 
> 时间：2013-01-10T18:58:41.123
> 
> 标签：javascript

如何修改下面的代码以在现有代码之上添加功能，以便如果已经单击（黑色）并随后再次单击的同一表格行，它将从黑色更改为白色？

周杰伦

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
tr.normal td {
    color: black;
    background-color: white;
}
tr.highlighted td {
    color: white;
    background-color: black;
}
</style>
</head>
<body>
<div id="results" class="scrollingdatagrid">
  <table id="mstrTable" cellspacing="0" border="1">
     <thead>
      <tr> 
        <th>File Number</th>
        <th>Date1</th>
        <th>Date2</th>
        <th>Status</th>
        <th>Num.</th>
      </tr>
    </thead>
    <tbody>
      <tr> 
        <td>KABC</td>
        <td>09/12/2002</td>
        <td>09/12/2002</td>
        <td>Submitted</td>
        <td>0</td>

      </tr>
      <tr> 
        <td>KCBS</td>
        <td>09/11/2002</td>
        <td>09/11/2002</td>
        <td>Lockdown</td>
        <td>2</td>
      </tr>

      <tr> 
        <td>WFLA</td>
        <td>09/11/2002</td>
        <td>09/11/2002</td>
        <td>Submitted</td>
        <td>1</td>
      </tr>
      <tr> 
        <td>WTSP</td>
        <td>09/15/2002</td>
        <td>09/15/2002</td>
        <td>In-Progress</td>
        <td>10</td>
      </tr>
    </tbody>
  </table>
</div>

<script type="text/javascript">
(
  function( )
  {
      var trows = document.getElementById("mstrTable").rows;

      for ( var t = 1; t < trows.length; ++t )
      {
          trow = trows[t];
          trow.className = "normal";
          trow.onclick = highlightRow;
      }

      function highlightRow( )
      {
          for ( var t = 1; t < trows.length; ++t )
          {
              trow = trows[t];
              trow.className = ( trow == this ) ? "highlighted" : "normal";
          }
      }
  }
)();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:03:25.250

简单地改变这个：

```
trow.className = ( trow == this ) ? "highlighted" : "normal"; 
```

对此：

```
trow.className = ( trow == this && trow.className != "highlighted") ? "highlighted" : "normal"; 
```

这是一个带有完整代码的 jsFiddle：http: [//jsfiddle.net/uFrvN/](http://jsfiddle.net/uFrvN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:03:58.880

这将删除所有类并仅设置所需的类。

```
function highlightRow( )
{
    for ( var t = 1; t < trows.length; ++t )
    {
        trow = trows[t];
        if(trow == this) {
            c = trow.className;
            trow.className = "";
            trow.className = ( c == "normal") ? "highlighted" : "normal";
            break;
        }
    }
} 
```

# c++ - 将 xml 转换为 sql 插入语句

> ID：14265310
> 
> 赞同：0
> 
> 时间：2013-01-10T18:58:45.430
> 
> 标签：c++, xml, xslt

> **可能重复：**
> [是否有解决未定义参考/未解决符号问题的通用指南？](https://stackoverflow.com/questions/491859/are-there-general-guidlines-for-solving-undefined-reference-unresolved-symbol-is)

我想转换一个 xml 以插入 sql 语句。我已经准备好 xml 和 xslt 文件，并且我知道转换运行正常（用 Oxygen 测试）。

现在，我用 c++ 编码这个转换失败了。

我试图包括这个库：

```
#include <libxml2/libxml/xmlversion.h>
#include <libxml2/libxml/parser.h>
#include <libxml2/libxml/valid.h>
#include <libxml2/libxml/xmlschemastypes.h>
#include <libxml2/libxml/xmlschemas.h>
#include <libxml2/libxml/xmlmemory.h>
#include <libxml2/libxml/debugXML.h>
#include <libxml2/libxml/HTMLtree.h>
#include <libxml2/libxml/xmlIO.h>
#include <libxml2/libxml/DOCBparser.h>
#include <libxml2/libxml/xinclude.h>
#include <libxml2/libxml/catalog.h>
#include <xalanc/Include/PlatformDefinitions.hpp>
#include <xercesc/util/PlatformUtils.hpp>
#include <xalanc/XalanTransformer/XalanTransformer.hpp> 
```

但是编译器在代码中显示了很多错误，例如：

```
/home/kimpa2007/xml/src/main.cc:108: undefined reference to `xercesc_2_8::XMLUni::fgXercescDefaultLocale'

/home/kimpa2007/xml/src/main.cc:109: undefined reference to `xalanc_1_10::XalanTransformer::initialize(xercesc_2_8::MemoryManager&)' 
```

有人可以解释如何以一种简单的方式对这种转换进行编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T10:12:52.627

它们是进行 XSL 转换的几种方法，请参阅[使用 XSLT 样式表处理 XML 文档 micro howto](http://www.microhowto.info/howto/process_an_xml_document_using_an_xslt_stylesheet.html)：

*   xsltproc
*   夏兰
*   撒克逊B
*   撒克逊6

我看到您打算使用 Xalan。也许这实际上是正确的方法。请注意，需要配置此库。您可以在[Xayno90 帖子](http://www.linuxquestions.org/questions/linux-software-2/compiling-xalan-c-1-10-1-issue-928472/)上获得有关配置它的帮助。我在这里复制粘贴步骤：

> 我终于设法为 Ubuntu 10.04 一起编译和安装 Xerces 和 Xalan，执行以下操作：

第1步

```
sudo apt-get source libxerces-c28
sudo apt-get source libxalan110 
```

第2步。

```
add "export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH" to /etc/ld.so.conf 
```

步骤 3。

```
you may need to change owner of source packages from root to normal user 
```

步骤 4\. 构建 Xerces

```
export XERCESCROOT=/home/user/xerces-c2-2.8.0+deb1
cd $XERCESCROOT
cd src/xercesc
./runConfigure -plinux -cgcc -xg++ -minmem -nsocket -rpthread -b64 -P /usr/local
make
sudo XERCESCROOT=$XERCESCROOT make install 
```

步骤 5\. 构建 Xalan

```
export XERCESCROOT=/usr/local
cd $XERCESCROOT
/usr/local$ cd ~
export XERCESCROOT=/home/user/xerces-c2-2.8.0+deb1
cd $XERCESCROOT
cd ~
export XALANCROOT=/home/user/xalan-1.10/c
cd $XALANCROOT
./runConfigure -p linux -c gcc -x g++ -b64 -P /usr/local
make
sudo XALANCROOT=$XALANCROOT make install 
```

步骤 6。

检查 /usr/local/lib 和 /usr/local/include 的目录以确认 Xerces 和 Xalan 都已安装

需要成为这些 XML 库和包的 Ubuntu 特定安装的 wiki，因为目前没有明确的指南，而且必须解释其他操作系统的安装方法以适应此安装。

还：

*   第 0 步是从 apach 下载项目（[https://xalan.apache.org/old/xalan-c/download.html](https://xalan.apache.org/old/xalan-c/download.html)，[http://ftp.udc.es/apache/xalan/xalan-c/sources/](http://ftp.udc.es/apache/xalan/xalan-c/sources/)）
*   尝试从命令行编译它或在属性项目 IDE 中配置路径。
*   将帖子库更新到当前版本。
*   安装后尝试编译`path/c/samples/XalanTransform`更接近您的需求

最后，阅读这个 SO 帖子：

*   [XSLT 值得吗？](https://stackoverflow.com/questions/78716/is-xslt-worth-it)
*   [是否有任何 XSLT 到 C++ 编译器可用？](https://stackoverflow.com/questions/2317539/are-there-any-xslt-to-c-compilers-available)

# javascript - 不想在控制器中暴露 $http

> ID：14265311
> 
> 赞同：2
> 
> 时间：2013-01-10T18:58:54.310
> 
> 标签：javascript, angularjs

有关于在服务中处理 $http 的[相关问题](https://stackoverflow.com/questions/12505760/angularjs-processing-http-response-in-service)，但我想稍微详细说明一下。我希望我的控制器能够使用类似于 Angular $http API 的 API 执行服务调用：

```
$scope.login = function(user) {
  securityService.login(user).success(function(data) {
    $scope.data = data;
  }).error(function(data) {
    $scope.error = data;
  });
}; 
```

这是一个很好的可读 API。从表面上看，我在服务 API 中需要做的就是：

```
return {
  name : 'User Service',
  login : function(user) {
    return $http.post("/api/login", user);
  }
}; 
```

太好了，它返回了承诺，`success`并且`error`伴随着消息而来。但是......如果我想处理服务中的成功和失败案例怎么办？我想维护漂亮、可读的服务 API。在这种情况下，也许我想保留用户，以便我可以公开诸如`securityService.currentUser()`“securityService.isLoggedIn()”之类的方法。

我尝试了`$http.post().then(...)`promise API，但它们返回了整个 HTTP 响应。同样，我想将 HTTP 与服务隔离并维护一个类似的具体回调 API。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:07:27.383

`login`您可以在使用 angular's时做出自己的承诺`$q`：

```
var deferred = $q.defer(), 
    promise = deferred.promise;

$http.post("/api/login", user).success(...).error(...)

return promise; 
```

在您的服务中 $http 承诺的成功/失败中，解决/拒绝您的延迟对象。

**编辑：**

扩展`$http.post`：

```
$http.post("/api/login", user).success(function(data) {
  if (data == "foo") { // success case?
    deferred.resolve('you logged in!');
  } else {
    deferred.reject('something really bad happened!');
  }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:15:42.203

我刚刚运行了一个测试用例，似乎如果我像这样从服务 API 返回承诺：

```
return $http.post("/api/login", user).success(...).error(...) 
```

我也可以在控制器中做同样的事情：

```
service.login(user).success(...).error(...) 
```

并且都被调用，首先是服务，其次是控制器。那很完美！

# html - 带有 HTTP Range 标头的 src 属性 HTML5 中的元素

> ID：14265315
> 
> 赞同：2
> 
> 时间：2013-01-10T18:59:06.567
> 
> 标签：html, html5-audio

如何在 HTML5 元素的 src 元素中提供 HTTP 范围标头？我需要将音频元素指向来自字节偏移 X 的源音频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-27T23:07:39.550

您可以更改元素`currentTime`的值，而不是指定字节偏移量。`audio`

该值应为实数，以秒为单位；

```
var url = "your/audio/path.mp3";
var audio = new Audio(url);
audio.addEventListener("play", function() {
    audio.currentTime = 10;  // jump to 00:10
});
audio.play(); 
```

它将使浏览器跳转到音频的某个位置，并根据需要使用 HTTP 范围标头进行请求。

# java - 如何在 Java 中从多个线程中获取和处理对象？如何创建多个 Future 实例

> ID：14265316
> 
> 赞同：1
> 
> 时间：2013-01-10T18:59:06.173
> 
> 标签：java, multithreading, concurrency, multiprocessing, threadpool

我需要创建一堆到不同主机的 JMX 连接。我正在尝试并行创建这些连接。现在在这方面的表现要好得多。

我已经将“主机和端口”条目的集合传递给该方法。对于每个条目，将创建一个连接。

现在我正在提交创建与多个线程的连接的任务。但我不知道如何返回并存储线程创建的连接对象。

代码是这样的，

```
ConnectionFactory.createConnections(collection of hostportEntries)

class ConnectionFactory{

public static CollectionOfConnections createConnections(ListOfHostPorts)
{

   ExecutorService exec = Executors.newFixedThreadPool(4);

   for(iterate over hostportEntries)
   {
     Future<Connection> future1 = exec.submit(new connCreator(HostPortEntry));

      //Now here, connCreator is implementing Callable Interface and creating connection. and returning it. I'm taking reference of that Returned connection. 
//But how will I take              Multiple Connection objects returned by Multiple threads. I tried to create Future[] but OPTION like that doesn't seem to be there
      // Can anybody help here?????

   }

//if I succeed in getting the objects return then I'll store in one more collection and return those for further use of those connections.

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:16:04.283

看一下 ThreadPool 的 invokeAll 方法——它接受一个 Callable 集合并返回一个 Future 列表。

编辑：与简单地一次提交一个任务并将 Futures 放在您自己的列表中相比，使用 invokeAll 的优势在于，invokeAll 只会在所有任务完成后返回，因此您不必继续检查所有 Futures看看他们是否已经完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:19:31.447

一旦每个线程（您的 ConnectionCreator）创建了一个连接，它就需要使用某种单例将句柄注册到新创建的连接。如果您在 EJB 容器中运行，这很容易通过会话 bean 完成。本质上，这个会话 bean 可以成为“连接池”。在连接创建器中，您可以执行以下操作（为简洁起见，我不包括异常处理和您应该已经做的其他事情）：

```
Inside of ConnectionCreator
============================

// Create your connection
Connection myConnection = doWhateverToCreateConnection();

// Presuming things went fine, get a handle to the session bean.  You could
// also potentially do this through resource injection using Spring or what not.  
Context ctx = new InitialContext();
ConnectionPoolBean connectionPoolBean = ( ConnectionPoolBean )ctx.lookup( "java:module/ConnectionPoolBean" );

// Now, register the connection with the pool
connectionPoolBean.registerConnection( myConnection ); 
```

然后在您的 ConnectionPoolBean 中，您拥有一个连接对象的集合。您应该在这些对象中注册和取消注册方法——以及可能的 getConnection... 等等。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:21:19.533

根据[this](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html) javadoc `Future<V>`has `.get()`method that return an object of `V`. 您应该调用该方法来接收`Future`执行结果。从被调用线程调用它是安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T20:15:15.700

您可以使用[ExecutorCompletionService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorCompletionService.html)来运行连接打开器，并按照首先打开连接的顺序获取它们：)

因此，使用您的代码，它将类似于

```
ExecutorService exec = Executors.newFixedThreadPool(4);
CompletionService<Result> ecs
       = new ExecutorCompletionService<Result>(exec);

for (HostPortEntry hpe : hostportEntries) { ecs.submit(new ConnCreator(hpe)); }

Collection<Connection> connections = new ArrayList<Connection>(hostportEntries.size());
for (int i = 0; i < hostportEntries.size(); i++) {
    // will add the created connections in order of what finish first.
    connections.add(ecs.take().get());
}
return connections; 
```

希望这可以帮助 ：）

**编辑**

重要提示：您不能使用 CompletionService 和`Executor#submit`. 问题是您的调用`Future#get()` **必须**在另一个循环中完成，否则您将阻塞您的线程，直到刚刚提交的可调用对象完成。所以：

```
Collection<Future> connCreatorsFuture = new ArrayList<Future<Connection>>(hostportEntries.size());
for (HostPortEntry hpe : hostportEntries) { connCreatorsFuture.add(exec.submit(new ConnCreator(hpe))); }

Collection<Connection> connections = new ArrayList<Connection>(hostportEntries.size());
for (Future<Connection> connection : connCreatorsFuture) {
    // will wait until this connCreator finishes.
    connections.add(connection.get());
}
return connections; 
```

# drupal - 打印每个班级的学生人数 - drupal 视图

> ID：14265317
> 
> 赞同：1
> 
> 时间：2013-01-10T18:59:08.250
> 
> 标签：drupal, drupal-6, drupal-7, drupal-views

我有显示我们班级的drupal视图，我们需要在每一行中打印每个班级的学生人数。

这适用于drupal视图吗？

```
[class name]    [desc.]        [No. of students]
class1          class1 desc    40 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T13:53:03.023

这种视图可以通过[Nodereference Count](http://drupal.org/project/nodereference_count)和[References](http://drupal.org/project/references)模块的组合来创建。

首先，您需要下载并启用这两个模块。

在学生内容类型中创建一个引用类节点的节点引用字段。

现在在课堂内容类型中创建“否”。具有“节点引用计数”字段类型的学生字段的数量，用于存储学生内容类型中的节点引用计数，您将在配置此节点引用计数字段时选择该类型。

现在，在您的课程内容类型视图中，您可以添加“否”。的学生领域，以显示被推荐到该课程的学生人数。

但这不适用于现有节点，因为您必须单独或通过[Views Bulk Operations (VBO)](http://drupal.org/project/views_bulk_operations)模块更新这些节点。

# jakarta-ee - 使用来自多个远程服务器的消息的 EJB 模块

> ID：14265318
> 
> 赞同：0
> 
> 时间：2013-01-10T18:59:14.490
> 
> 标签：jakarta-ee, ejb

我正在创建一个使用来自远程服务器的消息的 EJB 模块；我正在使用这段代码：

```
@MessageDriven(mappedName = "jms/Topic", activationConfig =  {
@ActivationConfigProperty(propertyName = "addressList", propertyValue = "192.168.31.10" )
, @ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue = "Auto-acknowledge")
, @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Topic") 
```

}

它有效。现在我会从多个远程服务器接收；我在想这样的事情：

```
@ActivationConfigProperty(propertyName = "addressList", propertyValue = "192.168.31.10 , 192.168.31.11 , 192.168.31.12" ) 
```

但它不起作用。

什么是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:44:06.457

每个 MDB 都必须一次侦听一个资源。

作为一种解决方法，您可以尝试在部署描述符文件中配置它，其中将配置单个 MDB 以侦听多个远程主题。

摘自 MDB 的 Weblogic 文档：

> 如果您的应用程序需要一个 JMS 消费者来为来自多个队列或主题的消息提供服务，那么您必须使用标准 JMS 消费者，或者部署多个消息驱动的 bean 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T19:08:03.133

您还可以创建多个 MDB-s，然后将它们的传入消息转发到同一个业务组件。所以你的 MDB-s 并不真正处理任何事情，只是收集消息。

# linux - 将 jiffies 与毫秒进行比较

> ID：14265321
> 
> 赞同：0
> 
> 时间：2013-01-10T18:59:19.237
> 
> 标签：linux, kernel

在内核中，我想将 jiffies 与毫秒进行比较。我们可以在 if 语句中用 5 ms 做这样的事情吗？你能帮助我吗？

瞬间>5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:04:19.287

来自`include/linux/jiffies.h`：

```
extern unsigned int jiffies_to_msecs(const unsigned long j); 
```

如果它存在于您的内核中，请将 jiffies 转换为毫秒并根据需要进行比较：

```
#include <linux/jiffies.h>
...
... if (jiffies_to_msecs(jiffies)>5u) .... 
```

# java - Java - 选择新的 JTabbedPane 时如何获得对 JTextArea 的关注

> ID：14265326
> 
> 赞同：2
> 
> 时间：2013-01-10T18:59:37.143
> 
> 标签：java, swing, focus, jtextarea, jtabbedpane

我有一个带有多个`JTabbedPane`s 的摇摆 GUI；每个选项卡`JButtons`在顶部包含两个，然后是一个`JTextArea`（用于用户输入）和一个`JTextField`在底部的结果。

`JTextArea`我的问题是，在切换选项卡后，如果不使用鼠标单击或使用键盘上的 tab 键，我无法获得焦点？

我有...

```
frame.addWindowFocusListener(new WindowAdapter() {
                        public void windowGainedFocus(WindowEvent e) {
                            textArea_1.requestFocusInWindow(); 
```

...并且当应用程序首次运行时效果很好（第一个选项卡中的 textArea 具有焦点）但是当我切换到另一个选项卡窗格时，第一个按钮现在具有焦点而不是 textArea，并且当我切换回第一个选项卡 textArea 失去焦点，第一个按钮再次获得焦点。

我已经尝试向每个 textArea 添加一个 requestFocus，并且我已经尝试在每个 textArea 上“带到前面”，并且我已经搞砸了 Focus Traversal，但我所做的似乎没有让 textArea 获得对选项卡更改的关注？

这让我难倒了一个星期，所以任何帮助都会感激不尽？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T19:23:15.003

将 ChangeListener 添加到您的 JTabbedPane。这是一般的想法：

[抱歉，我使用 JTextFields 而不是 JTextAreas，因为我有一个旧存根 - 但想法是一样的。]

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
import javax.swing.event.*;

public class JTabbedPaneDemo3 implements Runnable
{
  JTextField txtFoo;
  JTextField txtBar;
  JTabbedPane tabbedPane;

  public static void main(String[] args)
  {
    SwingUtilities.invokeLater(new JTabbedPaneDemo3());
  }

  public void run()
  {
    txtFoo = new JTextField(10);
    final JPanel pnlFoo = new JPanel();
    pnlFoo.add(new JButton("Button 1"));
    pnlFoo.add(new JLabel("Foo"));
    pnlFoo.add(txtFoo);

    txtBar = new JTextField(10);
    final JPanel pnlBar = new JPanel();
    pnlBar.add(new JButton("Button 3"));
    pnlBar.add(new JLabel("Bar"));
    pnlBar.add(txtBar);

    tabbedPane = new JTabbedPane();
    tabbedPane.addTab("Tab 1", pnlFoo);
    tabbedPane.addTab("Tab 2", pnlBar);

    tabbedPane.addChangeListener(new ChangeListener()
    {
      public void stateChanged(ChangeEvent e)
      {
        Component comp = tabbedPane.getSelectedComponent();
        if (comp.equals(pnlFoo))
        {
          txtFoo.requestFocusInWindow();
        }
        else if (comp.equals(pnlBar))
        {
          txtBar.requestFocusInWindow();
        }
      }
    });

    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(460, 200);
    frame.getContentPane().add(tabbedPane, BorderLayout.CENTER);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);

    txtFoo.requestFocusInWindow();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:09:40.093

我无法让“getSelectedComponent()”为我工作，它只是没有看到对选项卡选择所做的任何更改，但我稍微修改了您的建议并采纳了 MadProgrammer 的建议并添加了 invokeLater ...

```
tabbedPane.addChangeListener(new ChangeListener()
        {
          public void stateChanged(ChangeEvent e)
          {
              JTabbedPane pane = (JTabbedPane) e.getSource();         
              int selectedIndex = pane.getSelectedIndex();         
              if (selectedIndex == 0)
                {
                SwingUtilities.invokeLater( new Runnable() {   
                public void run() {   
                textArea1.requestFocusInWindow(); }});
                }
             else if (selectedIndex == 1)
                {
                SwingUtilities.invokeLater( new Runnable() {   
                public void run() {   
                textArea2.requestFocusInWindow(); }});
                }
             else if (selectedIndex == 2)
                {
                SwingUtilities.invokeLater( new Runnable() {   
                public void run() {   
                textArea3.requestFocusInWindow(); }});
                }
             else if (selectedIndex == 3)
                {
                SwingUtilities.invokeLater( new Runnable() {   
                public void run() {   
                textArea4.requestFocusInWindow(); }});
                }
             else if (selectedIndex == 4)
                {
                SwingUtilities.invokeLater( new Runnable() {   
                public void run() {   
                textArea5.requestFocusInWindow(); }});
                }
          }
       }); 
```

......现在一切都好起来了！谢谢大家。

# itext - iText 移至下一页

> ID：14265327
> 
> 赞同：1
> 
> 时间：2013-01-10T18:59:42.137
> 
> 标签：itext

我正在使用 itext 生成带有图像的 pdf 文件以及该图像的一些描述。

我想在一页中打印一张图像和该图像的描述。

对于下一张图像想要在下一页打印。通过使用 itext 我如何移动到下一页？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T19:18:27.090

有很多方法可以做到这一点。很简单，我从您的问题中了解到如何在 Pdf 文档中生成新页面。算法会是这样的

```
for each image{     
     /*manipulation logic for image and text goes here */     
     document.newPage();    
} 
```

检查最后一次循环是否被迭代，否则它将创建额外的空白页。

# c# - 如何在 C# 中获取每个处理器的 CPU 使用率？

> ID：14265328
> 
> 赞同：2
> 
> 时间：2013-01-10T18:59:44.040
> 
> 标签：c#, performancecounter, system.diagnostics

我想测量每个处理器的 cpu 使用率。

当我运行以下程序时，我得到实例名称`2`、、、、和。我想我应该得到, , , .`3``0``1``_Total``0``1``0,_Total``1,_Total`

结果是什么意思？如何获取每个处理器的总 cpu 使用率。不是每个核心？

```
 class PerfMonitor
{
    static void Main()
    {
        var pc = new PerformanceCounter("Processor", "% Processor Time");
        var cat = new PerformanceCounterCategory("Processor");
        var instances = cat.GetInstanceNames();

        foreach (var s in instances)
        { 
            pc.InstanceName = s;
            Console.WriteLine("instance name is {0}", s);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:31:48.250

> 结果是什么意思？

你的结果是这样的：

```
instance name is 2
instance name is 3
instance name is 0
instance name is 1
instance name is 6
instance name is 7
instance name is 4
instance name is 5
instance name is _Total 
```

除了最后一个是系统上所有处理器的累积实例之外，每个实例都是处理器的逻辑 ID（包括超 V 逻辑 ID）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:25:01.550

由于 Windows 将内核视为处理器，因此这不是一件容易的事。您可能首先尝试[确定物理 CPU 的数量](http://blogs.adamsoftware.net/Engine/DeterminingthenumberofphysicalCPUsonWindows.aspx)，但这很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T01:30:21.303

下载 OpenHardwareMonitor，它是开源的，包含一个 dll，您可以使用它来执行此操作

# video - html5 播放事件与视频标签中的播放事件

> ID：14265332
> 
> 赞同：10
> 
> 时间：2013-01-10T18:59:56.160
> 
> 标签：video, html5-video

我正在阅读有关 HTML5 视频标签的文档，但并不完全理解它。如果用户单击播放按钮或控制栏上的播放箭头，我会认为您只有一个事件，该事件将指示视频正在播放。

但我读到：“播放”在音频/视频已启动或不再暂停时触发。“播放”在音频/视频在暂停或停止缓冲后准备好播放时触发。听起来第二个只有在您暂停视频然后再次播放时才会发生，而第一个会在那时发生，但也会在您第一次开始播放视频时发生。但为什么要这样做？为什么不只是一个事件？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-11T01:02:15.953

造成差异的原因是，一旦您单击播放按钮（或调用`play`方法），`paused`状态为`false`并且`play`事件将触发，但这并不能保证视频会真正开始播放。这只是“尝试”玩。

如果在任何时候视频没有足够的数据，那么它会出现暂停（虽然，再次，`paused`将是错误的）并且`waiting`事件将触发。一旦有足够的数据（并且`readyState`大于或等于`HAVE_FUTURE_DATA`），`playing`事件将触发并且视频将继续播放。

因此，出于实际目的，`play`它非常适合设置播放状态的视觉指示器，例如播放/暂停切换按钮上的图标。如果`playing`您想知道视频何时*实际*播放，请使用。例如，您可能希望在`waiting`事件触发时显示一个旋转的“正在加载”图标，然后在`playing`触发时移除该图标。

（除了没有足够的数据外，还有其他原因导致视频无法播放，即使您想要它，但这些可能不会导致`waiting`and`playing`事件触发。有关[HTML 标准](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#event-media-playing)的更多详细信息。）

# phpstorm - phpStorm 添加自定义代码补全

> ID：14265337
> 
> 赞同：0
> 
> 时间：2013-01-10T19:00:03.177
> 
> 标签：phpstorm, laravel, blade

我希望为 Laravel Blade 视图添加一些自定义自动完成到 phpStorm，但我在文档中找不到任何关于它的信息

具体来说，我希望它在我键入@section('secName') 时附加关闭部分。

所以，打字

```
@section('mySection') 
```

phpStorm 会自动追加

```
@stop 
```

就像你打字的时候

```
<p> 
```

你最终得到

```
<p></p> 
```

我没有[在文档中](http://www.jetbrains.com/phpstorm/webhelp/basic-code-completion-completing-names-and-keywords.html)看到它。我知道实时模板，但这并不完全相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:17:00.123

PhpStorm 目前尚不支持此功能。

虽然在 PhpStorm bugtracker 中有[一张](http://youtrack.jetbrains.com/issue/WI-14172)请求此功能的票，但您可以投票支持该问题以使其在列表中更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T08:16:29.830

您可以在 phpStorm 上创建新的实时模板！与适用的是“无处不在”

```
@section('$CONTENT$')
    $END$
@stop 
```

# html - Firefox 17.0.1 上嵌入了多个视频

> ID：14265343
> 
> 赞同：2
> 
> 时间：2013-01-10T19:00:46.643
> 
> 标签：html, firefox, iframe

我在 Windows 操作系统上加载多个 Vimeo 视频时遇到了 Firefox 17.0.1 的问题。

这是一个我无法弄清楚的奇怪错误，它似乎只能使用此操作系统和浏览器进行复制。

问题是使用 Vimeo 嵌入了许多视频，它似乎只加载前两个视频，然后在页面下方加载一些黑框。

只是想知道是否其他人也有同样的问题，以及可能的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:39:53.413

AFAIK，Firefox*故意*只运行可见的 Flash 对象（并在滚动期间它们变得可见*时运行其他对象）。*这是出于性能原因。

# ruby-on-rails - 数字作为 ruby 1.9.x 语法中的键

> ID：14265345
> 
> 赞同：0
> 
> 时间：2013-01-10T19:01:01.263
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-1.9, ruby-1.9.3

如何在新的 ruby​​ 语法下创建一个以数字为键的哈希？例如`{abc: 123}`创建一个以符号`abc`为键的散列，但抛出异常（`{123: 'abc' }`就像 . 一样。我 `{123.to_sym: 'abc'}`看到的异常是 样式语法。`syntax error, unexpected '}', expecting $end``hash[123] = 'abc'``Hash[123, 200]``{123 => 'abc'}``{123: 'abc'}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:46:23.137

你不能。该语法适用于`Symbol`也是有效 Ruby 标识符的 s 键。`123`是 a `Fixnum`，而不是 a `Symbol`，即使它*是*a `Symbol`，它仍然不是有效的 Ruby 标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:36:13.667

您可以认为 123 已经是一个符号，因为 123 与符号一样独特。所以{123：“abc”}

不可能。

# javascript - 是否在不使用 Backbone.js 删除以前的内容模型的情况下正确替换同一位置的内容？

> ID：14265346
> 
> 赞同：0
> 
> 时间：2013-01-10T19:01:01.520
> 
> 标签：javascript, jquery, backbone.js

我有一个使用 Backbone.js 开发的 Web 应用程序。在应用程序中，有一些按钮可以删除内容视图，但在推送时不会删除内容模型。例如，如果我多次按下同一个按钮，内容会被替换，但不会删除该内容的模型。我怎样才能删除它？

我知道如何使用其他不同的按钮删除内容，但是如果按下相同的按钮（或其他不是注定要删除但要添加的按钮），我不知道如何删除内容。
示例代码：HTML：

```
<button class="ShowCam"></button>
<button class="camClose"></button>
<button class="anotherButton"></button> 
```

JS：

```
var camContent = Backbone.View.extend({
        el: "body",     
    events: {
        "click .ShowCam": "addContentCam", 
                "click .anotherButton": "otherAddContentFunction"                   
    },          
    initialize: function() {
        _.bindAll(this);
        this.model = new ContentCollection();
        this.model.on("add", this.contentAdded);
        this.model.on("remove", this.removeContentCam); 
    },                  
    addContentCam: function(event) {
        this.model.add({ modelName: "IPcam"});          
    contentAdded: function(content) {
        if (content.view == null) {
           var templ_name = 'cam';                                                  
           content.view = new ContentView({
                  model: content,
                  template: $.trim($("[data-template='"+ templ_name +"'] div").html() || "Template not found!")});
           $("div.camBox").empty(); 
           this.$el.find(".content").find("div.camBox").append(content.view.render().el);                                           
        }                   
    },  
    removeContentCam: function(content) {
        if (content.view != null) { 
            content.view.remove();              
        }
        content.clear();  //Clear the properties of the model   
    }   
}); 
var ContentView = Backbone.View.extend({
    tagName: "div",
    template: null,
    events: {
          "click .camClose": "removeView" 
    },
    initialize: function() {
        _.bindAll(this);
        this.template = this.options.template; 
    },
    render: function() {        
        this.$el.html(Mustache.render(this.template, this.model.toJSON())); 
        return this; 
    },
    removeView: function() {
        this.model.collection.remove(this.model); //Remove the model of the collection
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T01:17:35.033

Javascript 使用垃圾收集系统来进行内存管理。这意味着您可以简单地通过删除对它的所有引用来删除*任何*内容（好吧，从技术上讲，在垃圾收集器到达它之前它实际上并没有被删除，但本质上它已被删除）。

因此，如果您想确保模型被移除，您不需要调用任何特殊方法，您只需对`delete someView.model`引用该模型的每个视图（或代码中的其他位置）执行操作即可。

如果您查看上的`remove`方法，您实际上可以在实践中看到所有这些`Backbone.View`。你会发现它真正做的（除了触发事件）就是调用一个内部方法`_removeReference`。有什么作用`_removeReference`？这个：

```
 if (this == model.collection) {
    delete model.collection;
  }
  // (there's also an event-related line here) 
```

现在，话虽如此，如果您要创建一个新视图来替换旧视图，并且它们都具有相同的模型……那么您可能一开始就不应该创建一个新视图。处理这种情况的更标准的 Backbone 方法是在视图上重新调用渲染（而不是创建一个新的）。

# linux - Makefile如何指定程序参数

> ID：14265348
> 
> 赞同：2
> 
> 时间：2013-01-10T19:01:02.133
> 
> 标签：linux, makefile

我编写了一个小型 c 程序并创建了一个 Makefile 来编译和执行它。基本上，我执行以下操作：

```
$ make
$ make run 
```

但是，我的可执行文件需要一些参数，所以我想这样指定它们：

```
$ make run arg1 arg2 
```

有可能实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:49:30.450

这个怎么样？

生成文件

```
 demo: demo1.c
            cc -o demo1 demo1.c
 run:
            ./demo1 $A $B 
```

将参数作为变量传递`A`和`B`

```
[spatel@mg0008 tmp]$ make run A=2 B=3
./demo1 2 3
2 + 3 = 5 
```

# asp.net-mvc - asp.net mvc url 路由：如何获取特定的链接 URL

> ID：14265349
> 
> 赞同：0
> 
> 时间：2013-01-10T19:01:03.760
> 
> 标签：asp.net-mvc, asp.net-mvc-3, url-routing

给定以下路由：

```
routes.MapRoute(
                "RouteName", // Route name
                "ViewFoo/{FooId}",
                new { controller = "Foo", action = "View"}
            ); 
```

对应如下动作方法：

```
public ActionResult View(string fooId = null)
{
  ...blah...
} 
```

确切地说，我将如何调用`Url.Action()`来获取字符串'/ViewFoo/4'？还是我需要以某种方式修改路由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:15:14.483

```
Url.Action("View", "Foo", new { FooId = 4 }) 
```

# git - 在多个位置克隆 bitbucket git repo 失败

> ID：14265355
> 
> 赞同：1
> 
> 时间：2013-01-10T19:01:24.817
> 
> 标签：git, bitbucket

我有一个使用 bitbucket 托管的 git repo，我的主目录上有一个克隆，我正在考虑克隆另一个内部`/var/www`目录。当我尝试将另一个副本克隆到我的`www`文件夹中时，我收到此错误

```
Cloning into 'php'...
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

我的公钥没有任何问题，因为我可以从主文件夹中的克隆存储库推送对 bitbucket 的更改，并且我可以在 bitbucket 网站上看到我所做的最新提交。

这种行为有已知的解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:46:24.407

我认为您不需要将存储库克隆到 /var/www 中。我认为最好的解决方案是在 /var/www 中创建存储库的符号链接。这样您就不需要同步两个存储库。

但是如果想在 /var/www 目录中创建另一个存储库，您需要授予您的用户在该目录中写入的权限，或者为您的 root 用户创建一个新的公钥并将其复制到 bitbucket。

# jsf - ap:accordianpanel 选项卡中的表单不会生成验证消息，但命令按钮可以正常工作

> ID：14265358
> 
> 赞同：0
> 
> 时间：2013-01-10T19:01:24.343
> 
> 标签：jsf, primefaces

我在 p:accordionpanel 的选项卡中有一个表单，因此每个选项卡都有自己的表单和命令按钮。命令按钮工作正常，但不显示 p:messages。如果验证失败，则数据未存储在数据库中，我只是没有收到消息。

支持 bean 是会话范围的。

模板中没有表单，因此没有嵌套在另一个表单中的表单。我试图在命令按钮中添加 f:ajax render="messages"，正如 BalusC 在他广受好评的 11 个问题中所建议的那样，询问命令按钮是否失败，但是命令按钮不再起作用。

谢谢你的帮助！

```
 <ui:define name="content">
    <p:accordionPanel value="#{activityAdminController.activities}" var="a" activeIndex="#{activityAdminController.activeTab}"> 
        <p:ajax event="tabChange" listener="#{activityAdminController.onTabChange}" />
        <p:tab title="#{a.description}">  
            <h:form id="activityForm">
                <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
                <p:panelGrid styleClass="activityGrid">  
                    <p:row>                            
                        <p:column><h:outputLabel for="activity" value="Activity: " /></p:column>
                        <p:column>
                            <p:inputText id="activity" value="#{a.description}" required="true" requiredMessage="Activity name must be entered" />
                        </p:column>

                        <p:column>
                            <h:outputLabel for="duration" value="Duration: " />
                        </p:column>
                        <p:column>
                            <p:inputText id="duration" value="#{a.duration}" >  
                                <f:validateLongRange minimum="1" />
                            </p:inputText>
                        </p:column> 
                    </p:row>

                    <p:row> 
                        <p:column><h:outputLabel for="active" value="Active: " /></p:column>
                        <p:column><p:selectBooleanCheckbox id="active" value="#{a.isActive}" /></p:column>
                    </p:row>                                                

                    <p:row> 
                        <p:column><h:outputLabel value="Monday from: " />  </p:column>
                        <p:column> <p:calendar value="#{a.day2FromTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" /> </p:column>  
                        <p:column><h:outputLabel value="to: " /> </p:column>
                        <p:column><p:calendar value="#{a.day2ToTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" /> </p:column>
                    </p:row>

                    <p:row> 
                        <p:column> <h:outputLabel value="Tuesday from: " />  </p:column>
                        <p:column> <p:calendar value="#{a.day3FromTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" />   </p:column>
                        <p:column><h:outputLabel value="to: " /> </p:column>
                        <p:column><p:calendar value="#{a.day3ToTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" /> </p:column>
                    </p:row>

                    <p:row> 
                        <p:column><h:outputLabel value="Wednesday from: " />  </p:column>
                        <p:column><p:calendar value="#{a.day4FromTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" /> </p:column>  
                        <p:column><h:outputLabel value="to: " /> </p:column>
                        <p:column><p:calendar value="#{a.day4ToTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" /> </p:column>
                    </p:row>

                    <p:row> 
                        <p:column><h:outputLabel value="Thursday from: " /> </p:column> 
                        <p:column> <p:calendar value="#{a.day5FromTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" />   </p:column>
                        <p:column> <h:outputLabel value="to: " /> </p:column>
                        <p:column><p:calendar value="#{a.day5ToTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" /> </p:column>
                    </p:row>

                    <p:row> 
                        <p:column><h:outputLabel value="Friday from: " />  </p:column>
                        <p:column> <p:calendar value="#{a.day6FromTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" />  </p:column> 
                        <p:column><h:outputLabel value="to: " /> </p:column>
                        <p:column><p:calendar value="#{a.day6ToTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" /> </p:column>
                    </p:row>

                    <p:row> 
                        <p:column><h:outputLabel value="Saturday from: " />  </p:column>
                        <p:column> <p:calendar value="#{a.day7FromTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" /> </p:column>  
                        <p:column><h:outputLabel value="to: " /> </p:column>
                        <p:column><p:calendar value="#{a.day7ToTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" /></p:column> 
                    </p:row>

                    <p:row> 
                        <p:column><h:outputLabel value="Sunday from: " />  </p:column>
                        <p:column><p:calendar value="#{a.day1FromTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" />   </p:column>
                        <p:column><h:outputLabel value="to: " /> </p:column>
                        <p:column><p:calendar value="#{a.day1ToTime}" pattern="HH:mm" timeOnly="true" minHour="8" maxHour="22" stepMinute="30" /> </p:column>
                    </p:row>
                </p:panelGrid>  

                <p:commandButton value="Save" action="#{activityAdminController.submit()}" icon="ui-icon-check" process="@form" />
            </h:form>
        </p:tab>  
    </p:accordionPanel>
</ui:define> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:33:58.560

将 update="@parent" 添加到 p:commandButton 解决了这个问题。

感谢 BalusC 关于更新属性的提示。

我正在使用 PrimeFaces 3.4.2

# javascript - 未捕获的类型错误：无法读取属性

> ID：14265367
> 
> 赞同：0
> 
> 时间：2013-01-10T19:02:01.847
> 
> 标签：javascript, html

我收到了这个错误： `Uncaught TypeError: Cannot read property 'd' of undefined`

它在 var d 部分。

```
function sign() {
    var d = document.first.d.value;
    var mon = document.first.mon.value;
    var y = document.first.y.value;
    var curd = new Date(y,mon-1,d);
    var res2 = curd.getMonth();
    var i = 0;
} 
```

我不知道有什么问题。谁能帮我吗。如果您需要一些，我可以详细说明。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:03:57.770

这是一个老式的`DOM 0`访问代码，其中的元素被`name=""`例如`name="first"`不推荐使用。使用`document.getElementById`而不是`document.first.d`.

```
<input id="d" value="10" />
<input id="mon" value="02" />
<script>
(function() {
var first = document.getElementById('d');
alert(first.value);
})();
</script> 
```

您的代码失败是因为它没有得到引用，`document.first`因为可能没有`name=first`但可能是`id=first`. 如果需要，让这 3 个语句使用`gEBI`和 set `id`，并且应该设置。

# javascript - AMD (require.js) 如何处理单个非 amd js 文件中的多个类？

> ID：14265370
> 
> 赞同：2
> 
> 时间：2013-01-10T19:02:19.563
> 
> 标签：javascript, requirejs, amd

我正在使用[MootoolsMore 库中的一堆组件，](http://mootools.net/more/ab0e3a7d86a5d558c13e64a0539eba82)它们都被编译成一个 .js 文件。有没有办法在 shim 中定义一次库并可以访问其中的所有类？以下不起作用，但我该怎么做这样的事情？

```
shim:{
 mootoolsMore:{
  deps    : ["mootools"]
  exports : ["Slider", "Sortables"]
 }
}

// then inside my module I could access the Slider component like so
define( function(require) {
  var Slider = require('mootoolsMore').Slider 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:40:28.233

不需要仅针对 RequireJS 的“shim”功能。您可以只使用标准 AMD 加载程序 API：

```
require(['js!path/to/MooToolsCore.js'], function(){
    // nesting in order to insure that Moo Core runs first
    require(['js!path/to/MooToolsMore.js'], function(){
        // Your Slider and Sortables will be in global.
        // just use them.
        window.Slider(/* ... */)
    })
}) 
```

注意，RequireJS 不需要“js！” 插件要显式声明，但是，只是查看文件的扩展名。如果它是“.js”，它会通过“js”插件运行文件。这是非标准行为（不是在 AMD 规范中），但在 RequireJS 上，您应该能够替换如下行：

```
['js!path/to/MooToolsMore.js'] 
```

有了这个：

```
['path/to/MooToolsMore.js'] 
```

# .net - 在 Compute Emulator 中运行在 IIS Express 下的 Web 角色的 HTTP 500

> ID：14265377
> 
> 赞同：1
> 
> 时间：2013-01-10T19:02:50.057
> 
> 标签：.net, visual-studio-2010, azure, iis-express

我有一个 Web 角色，当在 Compute Emulator 中本地部署时，该角色配置为托管在 IIS 中。现在我想在 IIS Express 下运行它，以便更轻松地分析网站。

因此，我在 Cloud Project 属性中切换了开发服务器（有关精确步骤，请参阅[这篇文章](http://msmvps.com/blogs/nunogodinho/archive/2012/06/07/iis-express-support-for-local-development-in-windows-azure-sdk-1-7.aspx)），并在 Compute Emulator 中启动了 Web 角色。IIS Express 显示的不是我的主页，而是 HTTP 500 错误页面。该站点在 IIS 下运行良好，我不知道为什么 IIS Express 会抱怨，因为它的行为应该像 IIS。

我正在使用 .NET 4.0、Visual Studio 2010、用于计算模拟器的 Windows Azure SDK 1.8 和用于运行时库的 1.7、IIS Express 8，它们都安装在 Windows 7 下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:02:50.057

我按照这些[说明](http://blogs.msdn.com/b/rickandy/archive/2012/11/06/debugging-azure-http-500-errors.aspx)强制 IIS Express 显示详细的错误信息。通过这种方式，我更容易发现我的网站由于`Web.config`.

更准确地说，我有这个部分来启用失败请求的跟踪：

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <tracing>
      <traceFailedRequests>
        <add path="*">
          <traceAreas>
      ... 
```

IIS Express 抱怨在`traceFailedRequests`key下已经有一个元素`*`。我修改了该部分，以便首先删除该部分，然后我的主页最终正确加载。

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <tracing>
      <traceFailedRequests>
        <remove path="*" />
        <add path="*">
          <traceAreas>
      ... 
```

# javascript - ng重复不起作用

> ID：14265381
> 
> 赞同：1
> 
> 时间：2013-01-10T19:02:55.043
> 
> 标签：javascript, arrays, object, angularjs

我有一个由函数生成的数据结构。它以对象数组的形式以相反的顺序（如 11、10、9、8 等）返回最后 30 天。

```
function HoursCtrl($scope) {
    $scope.days = function () {
        var d = new Date();
        var result = [];

        for (i = 0; i < 31; i++) { 
            result.unshift({day:d.getDate() });     
            d.setDate(d.getDate() - 1);
        }
        return result;
    };
}; 
```

这是函数的输出：

```
[ { day: 9 }, { day: 8 }, { day: 7 }, { day: 6 }, { day: 5 }, etc. ] 
```

我正在使用 ng-repeat 将此数据公开为列表：

```
<div ng-controller="HoursCtrl">
  <ul>
    <li ng-repeat="day in days">{{day.day}}</li>
  </ul>
</div> 
```

li 元素没有被生成！我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:05:19.213

您需要将其作为函数调用。

```
ng-repeat="day in days()" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T19:09:39.810

无需将函数设置为作用域上的方法，只需在作用域上填充一个`days`属性：

```
function HoursCtrl($scope) {
    var d = new Date();
    $scope.days = [];
    for (var i = 0; i < 31; i++) { 
        $scope.days.unshift({day:d.getDate() });     
        d.setDate(d.getDate() - 1);
    }
}; 
```

* * *

为了获得更好的性能，您可以尝试反向循环并使用`push`而不是`unshift`：

```
function HoursCtrl($scope) {
    var d = new Date();
    var counter = 31;
    var date = d.getDate();

    $scope.days = [];
    d.setDate(date - counter + 1);

    while ( counter-- ) {
        date = d.getDate();
        $scope.days.push({ day: date });     
        d.setDate(date + 1);
    }
}; 
```

# javascript - 在元素加载到 DOM 之前添加事件

> ID：14265397
> 
> 赞同：2
> 
> 时间：2013-01-10T19:03:46.693
> 
> 标签：javascript, dom

我想在加载 DOM 元素时添加一个事件，但该元素可能尚未在 DOM 中。

我可以想到两个解决方案：

(i) 附在`document.onload()`. 它可能需要一段时间才能发生，如果它发生那么它并不理想

(ii) 检查 DOM 元素的存在

```
window.setInterval(function() {
      if (document.getElementById("id"))  /* do stuff */
    }, 100); 
```

这些都不是很优雅。有没有更好的解决方案？

编辑：我忘了提，我不想使用 jQuery 并且希望在`<head>`不触及`<body>`所有页面的情况下将我的脚本放在

EDIT2：我这样做的原因是跟踪某些元素的正确加载并监视它们需要多长时间才能加载以及它们是否正确加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:16:42.677

您可以尝试**事件委托**..

将单击事件附加到文档，并检查要在其上运行函数的元素。

```
document.onclick = function (event) {
  //IE doesn't pass in the event object
  event = event || window.event;

  //IE uses srcElement as the target
  var target = event.target || event.srcElement;
  var id = target.id;
  if( id === 'id'){
      clickEvent(id);
  }
};

function clickEvent(id){
  console.log("Elemennt with ID : " + id + "has been clicked !!")
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T21:30:39.770

经过一番研究，我认为没有更好的通用方法。对两者都有轻微的改进：`document.onload()`定期检查（保留一个变量以确保我不会做两次）。

[此页面](https://stackoverflow.com/questions/14348702/can-an-element-be-in-the-dom-and-not-loaded)确认在正确加载 DOM 方面两者都是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-16T05:30:40.903

MutationObserver 是现代浏览器提供的用于检测 DOM 变化的 Web API。通过该API，可以监听新添加或删除的节点、属性变化或文本节点文本内容的变化。

你可以在这里阅读更多 [https://blog.sessionstack.com/how-javascript-works-tracking-changes-in-the-dom-using-mutationobserver-86adc7446401](https://blog.sessionstack.com/how-javascript-works-tracking-changes-in-the-dom-using-mutationobserver-86adc7446401)

# php - Twitter bootstrap - 避免在模式内调整大小

> ID：14265399
> 
> 赞同：2
> 
> 时间：2013-01-10T19:03:54.767
> 
> 标签：php, html, twitter-bootstrap

Twitter bootstrap 的所有专家都知道，您有一种响应式的方式来适应屏幕中的内容。如果您使用该 css 类，则所有元素都会在调整窗口大小时调整大小。

对我来说，问题在于将元素放置在 Modal 中。

模态不会调整大小，但它的内部元素会。结果是，当我调整窗口大小时，元素不再适合模式。

有没有人通过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:19:07.030

我找到了怎么做。

打开 modal 时，禁用包含 bootstrap-responsive.css 加载的链接标签。

可以为此使用 jQuery：

```
<link id="lnk_twitter_boostrap-responsive" type="text/css" href="./css/bootstrap-responsive.css" rel="stylesheet"/>

$("#lnk_twitter_bootstrap-responsive").attr("disabled", true); 
```

关闭 Modal 时不要忘记重新启用它。

请记住，这将导致“责任”在打开模式时不起作用。所以你要对自己负责。

# ajax - 如何在 ExtJS 表单提交中使空服务器响应被视为失败

> ID：14265405
> 
> 赞同：1
> 
> 时间：2013-01-10T19:04:03.967
> 
> 标签：ajax, json, forms, extjs4

我有 ExtJS 4 MVC 架构风格的登录表单。也就是说，我有一个控制器和一个视图。

视图文件（仅显示组件创建部分）：

```
initComponent: function() {
    this.items = [
        {border:false, baseCls: 'x-plain', flex:8}, // 13/8 - is golden ratio (approx.)
        {
            border: false,
            baseCls: 'x-plain',
            layout: {
                type: 'vbox',
                pack: 'center',
                align: 'center'
            },
            items: [
                {
                    xtype: 'form',
                    url: 'http://localhost/my_site/login.php',
                    title: 'login_form_title',
                    bodyPadding: 5,
                    width: 280,

                    fieldDefaults: {
                        labelAlign: 'right',
                        labelWidth: 90,
                        anchor: '100%'
                    },

                    items: [
                        {
                            xtype: 'textfield',
                            name: 'username',
                            fieldLabel: 'username',
                            allowBlank: false
                        },
                        {
                            xtype: 'textfield',
                            inputType: 'password',
                            name: 'password',
                            fieldLabel: 'password',
                            allowBlank: false
                        },
                        {
                            border: false,
                            baseCls: 'x-plain',
                            layout: {
                                type: 'hbox',
                                pack: 'center',
                                align: 'center'
                            },
                            items: [
                                {
                                    xtype: 'button',
                                    formBind: true,
                                    disabled: true,
                                    text: 'login',
                                    action: 'login'
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {border:false, baseCls: 'x-plain', flex:13} // 13/8 - is golden ratio (approx.)
    ];
    this.callParent(arguments);
} 
```

在我的控制器中，我将登录按钮 onclick 绑定到某个函数，在该函数中，我使用这段代码将表单提交到服务器：

```
oForm.submit({
    success: function(form, action) {
        console.log('success');
    },

    failure: function(form, action) {
        console.log(action.failureType);
    }
}); 
```

这是`http://localhost/my_site/login.php`

```
<?php
exit; 
```

当我按下登录按钮时，我`success`在开发者控制台中看到。问题如下：

1.  是否可以将空响应视为`failure`，即在这种情况下使开发人员控制台记录一些`failureType`。
2.  为什么空响应被认为是`success`？非常欢迎提供官方文档或其他资源的链接。

使用以下内容`http://localhost/my_site/login.php`时，我进入`server`了开发者控制台，这是正确的。

```
<?php
echo json_encode(
    array(
        'success'=>false, 
        'errors' => array(
            'reason' => 'Invalid username or password'
        )
    )
);
exit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:28:54.383

All you have to do is, to set the HTTP header for the response! Look [here](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes) or [here](http://php.net/manual/en/function.http-response-code.php)

Basically you can say, if the status code of the response is not "200 Success" than ExtJS will call the failure method!

In your case you should do following:

```
<?php
header('WWW-Authenticate: Basic realm="Top Secret Files"');
header("HTTP/1.0 401 Unauthorized");
?> 
```

Also you should set the correct content type. Default is "text/plain" but in you case you should set it to "application/json". If you don't set it to application/json you have to parse the response manually, otherwise ExtJS will do it for you.

```
header('Content-type: application/pdf'); 
```

Here you find a very good [tutorial](http://net.tutsplus.com/tutorials/other/http-headers-for-dummies/) about HTTP headers! And [here](http://docstore.mik.ua/orelly/webprog/php/ch07_05.htm) you have an example in PHP!

I use C# on the server-side, so I don't know the actual php-code, but as long as the HTTP header is **200 OK** Ext-JS will call the success-method!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:47:14.333

> 1.  是否可以将空响应视为`failure`，即在这种情况下使开发人员控制台记录一些 `failureType`。
> 2.  为什么空响应被认为是`success`？非常欢迎提供官方文档或其他资源的链接。

`Ext.form.submit()`根据以下响应被标记为失败 -

```
{
    success: false,
    errors: {
        clientCode: "Client not found",
        portOfLoading: "This field must not be null"
    }
} 
```

空响应只要不包含`success:false`

[您可以在此处](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.action.Submit)了解更多信息

# php - 另一个时间计算时间 - mysql datetime格式

> ID：14265410
> 
> 赞同：0
> 
> 时间：2013-01-10T19:04:15.903
> 
> 标签：php, datetime

我们有一个**MySQL 日期时间格式**的时间，例如：

```
$time = date("Y-m-d H:i:s");
$period = "+1 month"; 
```

现在我们想在这个时间之后计算' *N Days* '，问题是我想要新的计算时间也是**MySQL datetime 格式**，所以我创建了这个函数：

```
// From a date to period date based on date
function fromTime($time, $period){
    $date = DateTime::createFromFormat( 'Y-m-d H:i:s', $time);
    $date->modify($period);
    return $date->format('Y-m-d H:i:s');
} 
```

它在我的本地主机上运行良好，因为我使用的是**PHP > 5.3**，但在我的真实服务器上它不起作用，我收到了这个错误：

```
Fatal error: Call to undefined method DateTime::createFromFormat() in /home/blah/public_html/includes/functions.php on line 38 
```

第 38 行是`fromTime`函数。

我需要如何更改此功能，使其也适用于**PHP < 5.3**

**更新： OP 正在寻找适用于 < 5.2 的解决方案。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:08:14.400

您可以使用较旧的内置日期操作函数，而不是使用 DateTime 类，例如`strtotime()`.

```
function fromTime($time, $period) {
    return date("Y-m-d H:i:s", strtotime($period, strtotime($time)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:09:33.933

我认为一切都是有效的 5.2 除了`DateTime::createFromFormat`. 日期格式没有什么不标准的。我会说删除该行并实例化`dateTime`对象，例如：

```
$date = new DateTime($time); 
```

您需要它与哪个 PHP 版本兼容？< 5.2?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:17:28.273

请尝试一下

```
$d = new DateTime( date("Y-m-d H:i:s") );
$d->modify( 'next month' );
echo $d->format( 'Y-m-d H:i:s' ), "\n"; 
```

# jquery - 在 MVC4 中使用 jquery 检查单选按钮时如何显示文本框？

> ID：14265415
> 
> 赞同：1
> 
> 时间：2013-01-10T19:04:39.863
> 
> 标签：jquery, asp.net-mvc-4

大家好，我有一些与每个广播按钮相对应的广播按钮和文本框。我想做的是检查单个单选按钮时，请从以下格式显示相应的文本框。

```
 @foreach(var item in Viewbag.Ids)
        {
         <div class="group">
          <label class="label">
           @Html.RadioButton("Rdbtn",new{value=@item.value})
          </label>
            <div class="control">
                  <input type="text"  />
            <div>
        </div> 
```

在另一种情况下

```
 <div>
        @Html.RadioButtonFor(m=>m.IsFlat)
        @Html.RadioButtonFor(m=>m.IsFree)
        @Html.RadioButtonFor(m=>m.IsTax)
        @Html.DropDownListFor(m=>m.Products)
       </div> 
```

我在做什么上面只有一个单选按钮必须在选中一个时选中另一个应该取消选中我这样做是这样的

```
 $('input[type=radio]').change( function(){
    if(this.checked)
        {
                  $(this).closest('div').find('input[type=radio]').not(this).attr('checked',false)
        }
     }); 
```

这工作正常，我想在检查“@Html.RadioButtonFor(m=>m.IsTax)”时播放 dropdwon 我该怎么做，如果选中，我必须在编辑模式下检查单选按钮谁能帮我做这件事

如果在编辑时插入时选中了单选框，我必须选中它们检查该单选按钮并显示下拉菜单

# c# - KeyBinding.Keyvalue="F6" 我不能从资源文件 c# 中读取这个值

> ID：14265417
> 
> 赞同：0
> 
> 时间：2013-01-10T19:04:50.533
> 
> 标签：c#, wpf

我正在尝试读取这样的值，`<KeyBinding Key="{x:Static prop:Resources.F6}"` 它给了我一个错误无效类型。它在它的时候工作`<KeyBinding Key="F6"`

对此的任何想法或理由表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:10:17.390

正如[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.input.keybinding.key.aspx)所述，该`KeyBinding.Key`属性是 enum 类型的`Key`。WPF 会将字符串“F6”转换为 Key.F6。除非您的`Resources.F6`属性也返回一个`Key`枚举，否则这将不起作用。

# ruby-on-rails - 根据关系的计算字段确定查询范围？

> ID：14265422
> 
> 赞同：1
> 
> 时间：2013-01-10T19:05:19.833
> 
> 标签：ruby-on-rails, mongoid

假设我有以下（简化的）数据模型：

```
class Location
  include Mongoid::Document

  has_many :event_dates
end

class EventDate
  include Mongoid::Document

  has_many :event_sessions
  belongs_to :location

  def total_spots
    self.event_sessions.sum("max_participants")
  end

  def booked_spots
    self.event_sessions.sum("participants_count")
  end

  def available_spots
    self.total_spots - self.booked_spots
  end
end

class EventSession
  include Mongoid::Document
  belongs_to :event_date

  field :max_participants
  field :participants_count
end 
```

我知道可以简单地获得所有地点的活动日期：

```
Location.event_dates 
```

但是，我如何才能将查询范围限定为仅获取例如具有可用位置的事件日期？IE

```
Location.event_dates.where(available_spots > 0) 
```

由于`available_spots`是计算值而不是 的实际数据库字段`EventDate`，因此这似乎是不可能的。我希望避免将这些计算方法添加到数据库本身，但如果这是唯一的方法......

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:14:53.827

好的，看起来答案隐藏在视线中（像往常一样），在 Mongoid 文档的 Extensions 部分下：

[关系 - 常见行为：扩展](http://mongoid.org/en/mongoid/docs/relations.html#common)

两部分答案：

首先，我想要的方法是`select`，不是`where`，所以虽然我不能做我上面提出的，我*可以*做：

```
Location.event_dates.select {|date| date.available_spots > 0} 
```

为了“确定”（本质上），我想要扩展 Location 中定义的关系，如下所示：

```
class Location
  has_many :event_dates do
    def with_available_spots
      @target.select {|date| date.available_spots > 0}
    end 
```

所以现在我可以简单地调用：

```
Location.event_dates.with_available_spots 
```

等等。

# javascript - AngularJS 方式向 MongoLab 添加新模型字段

> ID：14265425
> 
> 赞同：4
> 
> 时间：2013-01-10T19:05:29.437
> 
> 标签：javascript, mongodb, angularjs, mlab

我有一个*MongoDB 文档*（在 MongoLab.com 上）`client`，它将用于跟踪健身比赛。每周都会有一个“称重”和一些其他细节被跟踪。

我坚持的是如何向文档添加*子*文档以使用*AngularJS*`client`跟踪结果。

 *我觉得这可能是我遗漏的一些明显和基本的东西，但我还没有弄清楚如何将新字段附加到现有记录、数组或非数组。

以下是我认为的相关细节，但如果合适，请随时询问更多细节。

完整代码粘贴在[http://pastebin.com/4tyRiKus](http://pastebin.com/4tyRiKus)

**示例客户端**（我可以轻松添加客户端）

```
{
    "_id": {
        "$oid": "50eee69fe4b0e4c1cf20d116"
    },
    "firstName": "Jon",
    "lastName": "Doe"
} 
```

现在从一个不同的模板中通过`_id`（*/detail/:cliendId*）提取数据，该模板有效，但我希望为称重添加一个数据点。

```
<form ng-submit="addWeighIn()">
    <input type="date" ng-model="date" required />
    <input type="text" ng-model="weight" placeholder="Weight" smart-float required />
    <input type="submit" class="btn btn-primary" value="Add" />
</form> 
```

单击此处的“*添加*”按钮继续下一部分。

**控制处理的函数**（这会触发并在 MongoLab 模块中调用 update()）

```
$scope.addWeighIn = function () {
    console.log("addWeighIn: " + $scope.date + " : " + $scope.weight);
    // the below line is obviously wrong, just out of ideas.
    $scope.client.weights = [ { date: $scope.date, weight: $scope.weight } ];
    $scope.client.update(function () {

    });
}; 
```

控制台显示*addWeighIn*行，网络数据显示它发送请求，但它实际上并没有文档中的权重，与上面相同。

**从 $scope.addWeighIn() 调用的**MongoLab 资源并触发****

 **```
Client.prototype.update = function (cb) {
    console.log("mongolab: update: " + cb);
    return Client.update({ id: this._id.$oid },
        angular.extend({}, this, { _id: undefined }), cb);
}; 
```

**通过 update() 发送的数据**（缺少新的称重数据）

```
{
    "_id": {
        "$oid": "50eee69fe4b0e4c1cf20d116"
    },
    "firstName": "Jon",
    "lastName": "Doe"
} 
```

这就是我在实际数据库中寻找的东西，但我需要添加*权重*并相信我不理解一些基本的东西。

```
{
    "_id": {
        "$oid": "50eee69fe4b0e4c1cf20d116"
    },
    "firstName": "Jon",
    "lastName": "Doe"
    "weights": [
        { "date": "1/3/2013",
          "weight": 155 }
        { "date": "1/10/2013",
          "weight": 150 }
    ]
} 
```

我有几个关于该怎么做的问题。

1.  我可以在*HTML*代码中以声明方式执行此操作，例如设置`ng-model`为*client.weights.date*吗？例如：（`<input type="date" ng-model="client.weights.date" required />`不起作用，但我看看是否有类似的方法）
2.  如果不是声明式的，那么通过 AngularJS 执行此操作的正确方法是什么？
3.  我应该使用什么样的术语来查找相关内容？这似乎是我的主要挫折，找不到例子。

我在[http://docs.mongodb.org/manual/applications/update/找到了](http://docs.mongodb.org/manual/applications/update/)*$push*描述，可能是我需要使用的，但我不确定如何以*AngularJS 方式*使用它。

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T17:21:00.937

我最终发现我的问题与*MongoLab*资源有关。

[我用在https://github.com/pkozlowski-opensource/angularjs-mongolab](https://github.com/pkozlowski-opensource/angularjs-mongolab)上找到的那个替换了我的悲伤实现，它成功了。

由于我很难找到一个例子，这里是如何添加子文档。

**html**

```
<form ng-submit="addWeighIn()">
    <table class="table table-striped">
        <thead>
        <tr>
            <th>Date</th>
            <th>Weight</th>
            <td></td>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="weight in client.weighIn | orderBy:'date'">
            <td>{{weight.date}}</td>
            <td>{{weight.weight}}</td>
            <td></td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
            <td>
                <input type="text" ng-model="date" placeholder="Date of weigh-in" required />
            </td>
            <td class="input-append">
                <input type="text" ng-model="weight" placeholder="Weight" smart-float required />
                <span class="add-on">lbs</span>
            </td>
            <td><input type="submit" class="btn btn-primary" value="Add" /></td>
        </tr>
        </tfoot>
    </table>
</form> 
```

**脚本**

```
$scope.addWeighIn = function () {
    console.log("addWeighIn: " + $scope.date + " : " + $scope.weight);
    $weighIn = { date: $scope.date, weight: $scope.weight };
    // push to the existing array if it exists
    if ($scope.client.weighIn)
        $scope.client.weighIn.push($weighIn);
    // else create the field if it doesn't exist
    else
        $scope.client.weighIn = [ $weighIn ];

    $scope.client.update(function () {
        // do whatever after the update
    });
}; 
```****

# c# - .Net 最大并发计时器线程

> ID：14265430
> 
> 赞同：7
> 
> 时间：2013-01-10T19:05:39.097
> 
> 标签：c#, .net, multithreading

我正在尝试加载一个间隔进程队列。换句话说，我有一个队列，我希望队列中的每个项目都以单独的间隔运行。

我的问题是我似乎一次无法运行超过 25 个线程。我在 64 位机器上使用 .Net 4.5，它的默认最大线程数为 32768。

如何让我的应用程序运行我的机器可以处理的尽可能多的并发线程？

这是一个示例应用程序，它在我的生产代码中复制了实际问题：

```
class Program
{
    static void Main(string[] args)
    {
        System.Threading.ThreadPool.SetMaxThreads(200, 200);
        test t = new test();

        t.LoadUrls("http://www.google.com");

        while (1 == 1)
        {
            System.Threading.Thread.Sleep(1000);//refresh every 5 seconds
            Console.WriteLine(System.Diagnostics.Process.GetCurrentProcess().Threads.Count);
        }
    }

    public class test
    {

        public void LoadUrls(string url)
        {
            for (int i = 0; i < 100; i++)
            {
                System.Threading.Timer t = new System.Threading.Timer(new System.Threading.TimerCallback(RunInterval), url, 0, 1000);
                Console.WriteLine("Loaded {0} feeds.", i);
            }
        }
        private static void RunInterval(object state)
        {
            string url = state as string;
            string data = "";

            using (System.Net.WebClient cl = new System.Net.WebClient())
            {
                Console.WriteLine("getting data for " + url);
                data = cl.DownloadString(url);
            }

            //do something with the data

        }
    }
} 
```

这段代码理论上应该在 2 秒左右后运行 198 个线程。

顺便说一句，这在我的原型应用程序中运行良好；它是用节点写的。但是，现在我无法让它在 c# 中正常工作......

**回答：** 问题实际上是垃圾收集，根本不是线程池问题。池完全能够假脱我扔给它的所有线程。诀窍是使用 System.Threading.Timer 的单参数构造函数；这将使计时器将自身用作信号量，从而避免 gc。

```
class Program
{
    static void Main(string[] args)
    {
        for (int i = 0; i < 100; i++)
        {
            test t = new test();
            t.url = "http://www.google.com?" + i;
            System.Threading.Timer ti = new System.Threading.Timer(new System.Threading.TimerCallback(t.RunInterval));
            ti.Change(0, 1000);
        }

        while (1 == 1)
            System.Threading.Thread.Sleep(int.MaxValue);
    }

    public class test
    {
        public string url { get; set; }
        public void RunInterval(object state)
        {
            Console.WriteLine("getting data for " + this.url);
            string data = "";

            using (System.Net.WebClient cl = new System.Net.WebClient())
            {
                data = cl.DownloadString(this.url);
            }
        }
    }
} 
```

我不确定您为什么希望 gc 收集计时器，但是我知道什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:08:29.487

> 如何让我的应用程序运行我的机器可以处理的尽可能多的并发线程？

那是错误的做法。每个线程都是昂贵的，创建几百个，您的系统将严重退化。

您的代码使用 ThreadPool。池有一个算法来限制线程的数量。当您增加 Sleep() 时间时，您可能会看到更多线程。

更直接的方法是设置 ThreadPool.MinThreads。但期望更少的性能，而不是更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T19:15:47.527

根据[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)

`Use a TimerCallback delegate to specify the method you want the Timer to execute. The timer delegate is specified when the timer is constructed, and cannot be changed. The method does not execute on the thread that created the timer; it executes on a ThreadPool thread supplied by the system.`

然后在[System.Threading.Threadpool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)

`There is one thread pool per process. Beginning with the .NET Framework 4, the default size of the thread pool for a process depends on several factors, such as the size of the virtual address space. A process can call the GetMaxThreads method to determine the number of threads. The number of threads in the thread pool can be changed by using the SetMaxThreads method. Each thread uses the default stack size and runs at the default priority.`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:12:04.077

您想使用名为 MaxDegreeOfParallelism 的属性，但您需要稍微修改您的代码。然后对其进行测试并找出要并行运行的最佳线程数。这是链接：http: [//msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)

# sql - 将数据从csv文件导入msaccess是否正确的Sql

> ID：14265433
> 
> 赞同：1
> 
> 时间：2013-01-10T19:05:57.837
> 
> 标签：sql, csv, ms-access-2007, ms-access-2010

```
"INSERT INTO CricketMatch
(FName,LastName,Runs,Matches,Location,DateofMatch,PLayerId)
SELECT
    Fname,Lname,Runsby,numberofMatches,MatchLocation,DofMatch,Id
FROM [Text;Data Source=C:\\DB\\;HDR=YES].[filename]"; 
```

文件名只是扩展名为 demo.csv 的名称，没有路径

```
cmd.CDataSet da = new DataSet();string filename = Path.GetFileName(txtCSVFilePath.Text);
try {da = this.ConnectCSV(filename);
     string connstring = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\DB\\MatchDetails.accdb"; 
    OleDbConnection conn = new OleDbConnection(connstring);
    OleDbCommand cmd = new OleDbCommand();
cmd.CommandType = CommandType.Text;conn.Open(); 
    for (int i = 0; i <= da.Tables["Ss"].Rows.Count - 1; i++){ 
        for (int j = 1; j <= da.Tables["Ss"].Columns.Count - 1;j++){ 
           cmd.CommandText="INSERTINTOCricketMatch(FName,LastName,Runs,Matches,Location,DateofMatch,PLayerId)SELECT(Fname,Lname,Runsby,numberofMatches,MatchLocation,DofMatch,Id)  FROM [Text;FMT=Delimited(;);HDR=NO;DATABASE=C:\\DB]." + filename;cmd.Connection = conn; cmd.ExecuteNonQuery();} }} 
```

这就是我正在尝试的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T19:15:59.143

您的语法看起来非常接近 - 尝试这样的连接到 csv 文件：

```
SELECT Fname,
  Lname,
  Runsby,
  numberofMatches,
  MatchLocation,
  DofMatch,
  Id 
FROM [Text;FMT=Delimited;HDR=YES;DATABASE=C:\DB].filename.csv; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:59:08.190

就像这样，正如我已经说过的：

```
INSERT INTO CricketMatch
(FName,LastName,Runs,Matches,Location,DateofMatch,PLayerId)
SELECT
    Fname,Lname,Runsby,numberofMatches,MatchLocation,DofMatch,Id
FROM [Text;Database=z:\docs\;HDR=yes].[importfilename.csv] 
```

# asp.net-mvc - 我怎样才能改变我的 web.config 给 调试时自动

> ID：14265436
> 
> 赞同：3
> 
> 时间：2013-01-10T19:06:23.190
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

在我的 Web.Debug.config 我有这个：

```
 <system.web>
    <!--
      In the example below, the "Replace" transform will replace the entire 
      <customErrors> section of your Web.config file.
      Note that because there is only one customErrors section under the 
      <system.web> node, there is no need to use the "xdt:Locator" attribute.

      <customErrors defaultRedirect="GenericError.htm"
        mode="RemoteOnly" xdt:Transform="Replace">
        <error statusCode="500" redirect="InternalError.htm"/>
      </customErrors>
    -->
  </system.web> 
```

如何更改它，以便将配置文件中的值更改为：

`<customErrors mode="Off" /> to <system.web>`在 web.config 文件中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:22:18.297

只需将其更改为：

```
 <customErrors mode="Off" xdt:Transform="Replace">
  </customErrors> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T22:04:54.893

Eonasdan 是在正确的轨道上。

执行此操作的正确方法是，在您的调试配置中，将错误设置为“关闭”。

在您的 Web.Release.config 中，使用转换：

```
<customErrors mode="Off" xdt:Transform="Replace">
</customErrors> 
```

这样，当您将代码推送到生产环境时，使用 Visual Studio 下拉列表中的 Web.Release.config 文件，转换将替换 web.config 文件中的内容。

# ruby-on-rails - 如何遍历使用 Rails 的 Hash#to_xml 创建的哈希？

> ID：14265437
> 
> 赞同：1
> 
> 时间：2013-01-10T19:06:30.473
> 
> 标签：ruby-on-rails, ruby, xml, hash, iteration

我正在使用 thetvdb.com API 来获取节目的剧集列表。通常，XML 格式类似于：

```
<Data>
<Series>...</Series>
<Episode><EpisodeName>Foo</EpisodeName><EpisodeNumber>1</EpisodeNumber></Episode>
<Episode><EpisodeName>Bar</EpisodeName><EpisodeNumber>2</EpisodeNumber></Episode>
</Data> 
```

我所做的是使用解析 XML`Hash.from_xml`然后处理数据。要遍历剧集，我会执行以下操作：

```
hash_data['Data']['Episode'].each do ... 
```

如果有多个剧集，这很有效。但是，如果只有一集，则该`each`方法实际上会遍历该*特定集*的哈希条目，而不是只运行该`each`方法一次。这打破了我所有的代码。

我试过：

```
hash_data['Data']['Episode'].to_a.each do ... 
```

结果相同。必须有一个“正确”的方法来做到这一点？

**更新：**我认为这个问题很清楚，但似乎人们对此感到困惑。澄清一下，我真的只是想遍历剧集并查看内容。数据最初是作为 XML 接收的，所以为了在 Ruby 中检查它，我使用`Hash.from_xml(xml_response)`.

就“预期行为”而言，举个例子：

```
hash_data['Data']['Episode'].each do |e| { puts e['EpisodeNumber'] } 
```

鉴于此初始数据，我希望：

```
<Data>
<Series>...</Series>
<Episode><EpisodeName>Foo</EpisodeName><EpisodeNumber>1</EpisodeNumber></Episode>
<Episode><EpisodeName>Bar</EpisodeName><EpisodeNumber>2</EpisodeNumber></Episode>
</Data> 
```

输出将是：

```
1
2 
```

这样可行。但是，如果我收到这样的输入：

```
<Data>
<Series>...</Series>
<Episode><EpisodeName>Foo</EpisodeName><EpisodeNumber>1</EpisodeNumber></Episode>
</Data> 
```

我崩溃了，因为`e['EpisodeNumber']`它无效。它是无效的，因为在只有一个情节的情况下，`each`实际上迭代*哈希的每个键*（所以进入`each`块的第一个值是情节名称的键值对），而不是像以前那样是一个*哈希数组*元素不止一种。

换句话说，当有多个情节时，`hash_data['Data']['Episode']`是一种`Array`类型`Hash`。当只有一集时，它只是一个`Hash`。如果有一个情节时，我的代码*仍然*是一个`Array`，但其中只有一个项目，我的代码将正常工作。但事实并非如此。我该如何正确处理这个问题？

我希望这能解决吗？

**更新 2**：有人要求我发布`Hash#inspect`返回的数据。这是一个只有一集的节目：

```
{"Data"=>{"Series"=>{"id"=>"263752", "Actors"=>"||", "Airs_DayOfWeek"=>"Thursday", "Airs_Time"=>"10pm", "ContentRating"=>nil, "FirstAired"=>"2013-01-17", "Genre"=>"|Game Show|Reality|", "IMDB_ID"=>"tt2401129", "Language"=>"en", "Network"=>"TBS Superstation", "NetworkID"=>nil, "Overview"=>"Hosted by Robert Carradine and Curtis Armstrong, King of the Nerds is the ultimate nerd-off. The series will follow eleven fierce competitors from across the nerd spectrum as they set out to win $100,000 and be crowned the greatest nerd of them all.\n\nKing of the Nerds will take the glory of geekdom to a whole new level as the eleven competitors live together in \"Nerdvana.\" Each week, they must face challenges that will test their intellect, ingenuity, skills and pop culture prowess. In each episode, the nerds will first compete as teams and then as individuals, facing challenges that range from live gaming to a dance-off to life-sized chess. One competitor will be eliminated each week until one nerd stands alone as the ultimate champion off all things nerdy.", "Rating"=>nil, "RatingCount"=>"0", "Runtime"=>"60", "SeriesID"=>nil, "SeriesName"=>"King of the Nerds", "Status"=>"Continuing", "added"=>"2012-10-31 21:53:29", "addedBy"=>"348252", "banner"=>"graphical/263752-g2.jpg", "fanart"=>"fanart/original/263752-1.jpg", "lastupdated"=>"1357501598", "poster"=>nil, "zap2it_id"=>nil}, "Episode"=>{"id"=>"4428487", "Combined_episodenumber"=>"1", "Combined_season"=>"1", "DVD_chapter"=>nil, "DVD_discid"=>nil, "DVD_episodenumber"=>nil, "DVD_season"=>nil, "Director"=>nil, "EpImgFlag"=>nil, "EpisodeName"=>"Welcome to the Nerdvana", "EpisodeNumber"=>"1", "FirstAired"=>"2013-01-17", "GuestStars"=>nil, "IMDB_ID"=>nil, "Language"=>"en", "Overview"=>nil, "ProductionCode"=>nil, "Rating"=>nil, "RatingCount"=>"0", "SeasonNumber"=>"1", "Writer"=>nil, "absolute_number"=>nil, "filename"=>nil, "lastupdated"=>"1357501766", "seasonid"=>"504427", "seriesid"=>"263752"}}} 
```

请注意，这`Episode`是一个`Hash`类型。

这是一个不止一集的节目：

```
{"Data"=>{"Series"=>{"id"=>"220441", "Actors"=>"||", "Airs_DayOfWeek"=>"Saturday", "Airs_Time"=>"8:30PM", "ContentRating"=>"TV-PG", "FirstAired"=>"2010-12-25", "Genre"=>"|Children|Drama|", "IMDB_ID"=>"tt1765510", "Language"=>"en", "Network"=>"The Hub", "NetworkID"=>nil, "Overview"=>nil, "Rating"=>"7.0", "RatingCount"=>"1", "Runtime"=>"30", "SeriesID"=>nil, "SeriesName"=>"R L Stine's The Haunting Hour", "Status"=>"Continuing", "added"=>"2011-01-10 15:59:43", "addedBy"=>"66501", "banner"=>"graphical/220441-g.jpg", "fanart"=>"fanart/original/220441-1.jpg", "lastupdated"=>"1354439519", "poster"=>"posters/220441-1.jpg", "zap2it_id"=>nil}, "Episode"=>[{"id"=>"3453441", "Combined_episodenumber"=>"1", "Combined_season"=>"1", "DVD_chapter"=>nil, "DVD_discid"=>nil, "DVD_episodenumber"=>nil, "DVD_season"=>nil, "Director"=>nil, "EpImgFlag"=>"2", "EpisodeName"=>"Really You (Part 1)", "EpisodeNumber"=>"1", "FirstAired"=>"2010-10-29", "GuestStars"=>"|Bailee Madison|Connor Price|", "IMDB_ID"=>nil, "Language"=>"en", "Overview"=>"A girl named Lilly (Bailee Madison) is given her very own life-sized \"Really You\" doll which is named Lilly D.; because she is good at manipulating her dad. Lilly remains a spoiled brat, bragging about Lilly D, even going as far as ripping the leg off a friends doll, after the friend informs Lilly that \"Lilly D hates Lilly\". Soon after, strange events begin to occur which Lilly's mother accuses Lilly of doing; despite how Lilly maintains she is innocent, and that Lilly D is alive.", "ProductionCode"=>nil, "Rating"=>"8.0", "RatingCount"=>"1", "SeasonNumber"=>"1", "Writer"=>nil, "absolute_number"=>nil, "filename"=>"episodes/220441/3453441.jpg", "lastupdated"=>"1350772755", "seasonid"=>"393441", "seriesid"=>"220441"}, ... 
```

通知`Episode`现在是一种`Array`类型`Hash`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:12:13.733

### 使用哈希键/值方法

而不是[Enumerator#each](http://www.ruby-doc.org/core-1.9.3/Enumerator.html#method-i-each)，您可能想要使用[Hash#each_key](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-each_key)、[Hash#each_value](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-each_value)或[Hash#each_pair](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-each_pair)来遍历您的哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T20:53:55.057

听起来 Rails 的`Array#wrap`方法可以解决您的问题。我相信这应该有效：

```
Array.wrap(hash_data['Data']['Episode']).each do ... 
```

文档[在这里](http://apidock.com/rails/Array/wrap/class)。

# wpf - WPF 数据绑定更改 ViewModel 中的列宽

> ID：14265438
> 
> 赞同：0
> 
> 时间：2013-01-10T19:06:38.460
> 
> 标签：wpf, binding

我有一个包含 3 列的简单网格

```
<Grid>
   <Grid.ColumnDefinitions>
                <ColumnDefinition Width="{Binding NavigationWidth}"  />
                <ColumnDefinition Width="4" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
    </Grid.ColumnDefinitions>
</Grid> 

  <GridSplitter Grid.Column="1" Grid.Row="2" 
                      ResizeDirection="Columns" 
                      Background="Silver"                      
                      Width="2" HorizontalAlignment="Center" 
                      VerticalAlignment="Stretch" />

<ContentControl x:Name="navigationView"  Grid.Column="0" Grid.Row="1"/>
<ContentControl x:Name="workspaceView" Grid.Column="2" Grid.Row="1"  />

// The NavigationWidth is belongs to the ViewModel

  public int NavigationWidth
  {
     get{ return _navigationWidth; }
     set{
            _navigationWidth = value;
             OnPropertyChanged("NavigationWidth");
        }
 } 
```

因此，基于上面的设置，取决于用户导航到的位置，代码尝试设置网格第一列的宽度。如果用户不手动更改宽度，一切正常。

无论如何，代码是否可以覆盖用户设置的宽度？

谢谢，

奥斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:23:08.520

> 无论如何，代码是否可以覆盖用户设置的宽度？

只要绑定是两种方式，就可以通过在所需时间/位置设置值 NavigationWidth 来实现，例如：

```
<ColumnDefinition Width="{Binding NavigationWidth, Mode=TwoWay} 
```

# .net - vbscript 在 IE10 浏览器模式下不起作用

> ID：14265443
> 
> 赞同：3
> 
> 时间：2013-01-10T19:07:11.710
> 
> 标签：.net, vbscript, internet-explorer-10

我们的客户决定升级到 Windows 7 和 IE 10。我们在 1.1 dot net 框架中的应用程序存在问题，因为它包含 vbscript，一旦用户将浏览器模式更改为 IE 10，它就无法正常工作。如果浏览器工作正常模式选择为 IE 10 兼容性视图。它在 IE9、IE8 上也能正常工作。Vbscript 可以像下面这样简单。

```
<script language="vbscript">
function ValidateEmail(sEmail)
    set myExpression = new RegExp
    myExpression.pattern = "^(\w+\.)*(\w+)@(\w+\.)+([a-zA-Z]{2,4})$"
    If myExpression.test(sEmail.value) = True Then
        msgbox "Valid Email"
    Else
        msgbox "Invalid Email"
    End If
End Function
</script> 
```

我们已经尝试通过在 web config 中添加 X-UA-Compatible 以编程方式更改文档模式，这可以在 google 上找到。

```
<system.webServer>
        <httpProtocol> 
            <customHeaders> 
                <clear /> 
                <add name="X-UA-Compatible" value="IE=9" / > 
            </customHeaders> 
        </httpProtocol>
</system.webServer> 
```

虽然上面的代码不适用于标签 system.webServer 不适用于 1.1 dot net 框架。我们还尝试通过添加自定义部分来更改机器配置。虽然没有成功。:(

您能否为我们提供一个解决方案，通过该解决方案，vbscript 可以在 IE 10 浏览器上同时支持浏览器模式 IE 10 以及 IE 10 兼容性视图？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T12:47:03.343

如果您无法使 http 标头工作，您可以使用元标记：

```
<meta http-equiv="x-ua-compatible" content="IE=9"> 
```

将其放置在尽可能靠近顶部的位置`<head>`，最好是在`<title>`元素之前，例如

```
<html>
    <head>
        <meta http-equiv="x-ua-compatible" content="IE=9">
        <title>My webpage</title>
    </head>
    <body>
        <p>Content goes here.</p>
    </body>
</html> 
```

[在http://msdn.microsoft.com/en-gb/library/jj676915%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-gb/library/jj676915%28v=vs.85%29.aspx)有更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:35:53.680

嗯，我在 Windows 8 下的 IE 10 中尝试了你的代码。它似乎在 IE 10 以及我的兼容模式下工作。也许您可以提供更多信息。页面上还有什么？你在哪里调用函数？

# android - HTML 5 输入类型“数字”，step="any" => Chrome 软键盘上没有小数分隔符

> ID：14265444
> 
> 赞同：7
> 
> 时间：2013-01-10T19:07:14.853
> 
> 标签：android, google-chrome

我想要一个 HTML 5 输入元素，例如：

```
<input type="number" step="any" value="3.5"/> 
```

这适用于我的 iPhone Safari 浏览器，但不适用于 Android 版 Chrome。它显示正确的软键盘，但不显示小数分隔符。所以我无法输入任何小数位。

是否有任何 JavaScript 调整可以使 chrome 浏览器显示正确的键盘？

因为它感觉像是一个错误：有人可以指向我的 Chrome for Android 问题跟踪器来为此打开一个案例吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T12:43:26.163

我遇到了同样的问题，并遇到了这个链接：[Android 上的 Google Chrome (and only Android) Does not allow Decimal with type number and step="any"](https://stackoverflow.com/questions/12514162/google-chrome-on-android-and-only-android-does-not-allow-decimal-with-type-num)

我还没有在 iDevice 上测试过，但我在三星 Galaxy SIII 上遇到了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-25T07:47:44.323

这不是bug，而是根据其他浏览器不遵循的W3规范。修复应该是“任何”，但 Chrome 也没有实现。

# c# - ListView 数据绑定

> ID：14265448
> 
> 赞同：0
> 
> 时间：2013-01-10T19:07:32.483
> 
> 标签：c#, wpf, xaml, listview

我写的很简单`WPF Application`，我想用来`ListView`显示`List`项目。我的代码是：

*`WPF.xaml`*

```
<ListView Grid.Column="0" Grid.Row="1" Margin="10,0,10,5" ItemsSource="{Binding MyCollection.Elements}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding ElementDescriptions}" />
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView> 
```

*`WPF.xaml.cs`*

```
public MyViewModel ViewModel
    {
        get { return DataContext; }
        set { DataContext = value; }
    } 
```

*`MyViewModel.cs`*

```
public OwnedCollection Elements { get; set; } 
```

*`OwnedCollection.cs`*

```
public List<ElementDescriptions> ElementDescriptions { get; set; } 
```

我 100% 确定 和 之间的沟通`View`是`ViewModel`正确的，因为显示简单的信息不会给我带来麻烦。我在做正确的绑定`ListView`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:51:46.010

几件事：

第一的，

```
TextBlock Text="{Binding ElementDescriptions}" 
```

没有多大意义，因为 ElementDescriptions 是一个集合。如果您想遍历 List 中的所有 ElementDescriptions，您实际上应该将 ListView 的 ItemSource 绑定到 ElementDescriptions，然后访问 ElementDescriptions 类的一些文本属性：

```
<ListView Grid.Column="0" Grid.Row="1" Margin="10,0,10,5" ItemsSource="{Binding MyCollection.ElementsElementDescriptions }">
    <ListView.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding ElementDescriptions.SomeTextField}" />
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

其次，您是否使用 INotifyPropertyChanged 以便视图知道更新？更多信息：[OnPropertyChanged with a List](https://stackoverflow.com/questions/3807665/onpropertychanged-with-a-list)

# php - 与 $_GET 一起使用时，file_get_contents 不显示任何内容

> ID：14265449
> 
> 赞同：1
> 
> 时间：2013-01-10T19:07:33.333
> 
> 标签：php, get, file-get-contents

将 file_get_contents 与 $_GET 结合使用时出现问题。例如，我正在尝试使用 file_get_contents 加载以下页面：

[https://bing.com/?q=how+to+tie+a+tie](https://bing.com/?q=how+to+tie+a+tie)

如果我像这样加载它，页面加载正常：

**http://localhost/load1.php**

```
<?
echo file_get_contents("https://bing.com/?q=how+to+tie+a+tie");
?> 
```

但是，当我像这样加载它时，我遇到了问题：

**http://localhost/load2.php?url=https://bing.com/?q=how+to+tie+a+tie**

```
<?
$enteredurl = $_GET["url"];
$page = file_get_contents($enteredurl);
echo $page;
?> 
```

当我使用第二种方法加载时，我得到一个空白页。检查页面源不返回任何内容。当我回显 $enteredurl 时，我得到“https://bing.com/?q=how to tie a tie”。似乎“+”号消失了。

此外，加载**http://localhost/load2.php?url=https://bing.com/?q=how**工作正常。网页出现。

任何人都知道可能导致问题的原因是什么？

谢谢！

**更新**

尝试使用 urlencode() 来实现这一点。我有一个带有输入和提交字段的标准表单：

```
<form name="search" action="load2.php" method="post">
<input type="text" name="search" />
<input type="submit" value="Go!" />
</form> 
```

然后更新 load2.php URL：

```
<?
$enteredurl = $_GET["url"];
$search = urlencode($_POST["search"]);
if(!empty($search)) {
echo '<script type="text/javascript">window.location="load2.php?url=https://bing.com/?q='.$search.'";</script>';
}
?> 
```

代码在这里的某个地方被破坏了。$enteredurl 仍然返回与以前相同的值。（https://bing.com/?q=如何打领带）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:12:08.173

你必须正确编码你的参数`http://localhost/load2.php?url=https://bing.com/?q=how+to+tie+a+tie`应该是`http://localhost/load2.php?urlhttps%3A%2F%2Fbing.com%2F%3Fq%3Dhow%2Bto%2Btie%2Ba%2Btie`. 您可以[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent)在 JavaScript 中或[`urlencode`](http://php.net/manual/en/function.urlencode.php)在 php 中使用来执行此操作。

* * *

```
<?
$enteredurl = $_GET["url"];
$search = urlencode($_POST["search"]);
if(!empty($search)) {
    $url = urlencode('https://bing.com/?q='.$search)
    echo '<script type="text/javascript">window.location="load2.php?url='.$url.'";</script>';
}
?> 
```

# lua - LuaSQL 中的参数化查询

> ID：14265453
> 
> 赞同：2
> 
> 时间：2013-01-10T19:08:07.760
> 
> 标签：lua, luasql

> **可能重复：**
> [如何引用 LuaSQL 的值？](https://stackoverflow.com/questions/1224806/how-to-quote-values-for-luasql)

LuaSQL 是否提供参数化查询？我已经浏览了源代码，这似乎是一个很大的“不”。

# php - 使用 PHP Excel 读取 excel 文件的代码点火器

> ID：14265455
> 
> 赞同：1
> 
> 时间：2013-01-10T19:08:14.710
> 
> 标签：php, codeigniter, phpexcel

我想从具有未指定行数和指定列数的 Excel 工作表中读取数据。我只能用指定的行数来做，任何解决方案都会有很大帮助

```
 $inputFileType = 'Excel5'; 
    $inputFileName = './sampleData/example2.xls'; 

    /**  Define a Read Filter class implementing PHPExcel_Reader_IReadFilter  */ 
    class chunkReadFilter implements PHPExcel_Reader_IReadFilter 
    { 
        private $_startRow = 0; 
        private $_endRow   = 0; 

        /**  Set the list of rows that we want to read  */ 
        public function setRows($startRow, $chunkSize) { 
            $this->_startRow = $startRow; 
            $this->_endRow   = $startRow + $chunkSize; 
        } 

        public function readCell($column, $row, $worksheetName = '') { 
            //  Only read the heading row, and the configured rows 
            if (($row == 1) ||
                ($row >= $this->_startRow && $row < $this->_endRow)) { 
                return true; 
            } 
            return false; 
        } 
    } 

    /**  Create a new Reader of the type defined in $inputFileType  **/ 
    $objReader = PHPExcel_IOFactory::createReader($inputFileType); 

    /**  Define how many rows we want to read for each "chunk"  **/ 
    $chunkSize = 2048; 
    /**  Create a new Instance of our Read Filter  **/ 
    $chunkFilter = new chunkReadFilter(); 

    /**  Tell the Reader that we want to use the Read Filter  **/ 
    $objReader->setReadFilter($chunkFilter); 
      //I want to loop and get values from the excel sheet startrow< undefined number of rows 
    for ($startRow = 2; $startRow <= 65536; $startRow += $chunkSize) {

        /**  Tell the Read Filter which rows we want this iteration  **/ 
        $chunkFilter->setRows($startRow,$chunkSize); 
        /**  Load only the rows that match our filter  **/ 
        $objPHPExcel = $objReader->load($inputFileName); 
        //    Do some processing here 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:04:39.747

您应该在使用以下方法处理每个块后真正卸载它：

```
$objPHPExcel->disconnectWorksheets();
unset($objPHPExcel); 
```

如开发者文档第 4.3 节所述，否则可能不会在每个块之后清除内存。

# box-api - get_group 用户返回 500 内部服务器错误

> ID：14265460
> 
> 赞同：0
> 
> 时间：2013-01-10T19:08:24.553
> 
> 标签：box-api

我正在使用 API 的 v1 版本。当我调用 get_group_users 时，我收到了 500 个内部服务器错误响应。它过去一直有效 - 这是一个新问题吗？

顺便说一句，为 API 调用返回此页面会破坏 XML 格式（我们在尝试解析响应正文时从错误消息“字符串“--”不允许在注释中注意到这一点”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:25:34.927

API V1 也突然出现了同样的问题。当我们与 API 团队一起调查这个问题时，我们需要处理结果的大小。

我们没有解决方案，只能迁移到 API V2，默认情况下页面结果并因此解决了问题。

但是，正如您所知，组不会在新 API 中公开，但我知道它们即将到来，并且只是在积压中以及 API V1 中可以找到的其他缺失功能。

我相信其中一位阅读本文的 API 开发人员可以为在 API V2 中达到 GA 的组提供一些 ETA 建议

# ios - 点击冲突中的 UIButton 和 UISlider

> ID：14265465
> 
> 赞同：1
> 
> 时间：2013-01-10T19:08:38.697
> 
> 标签：ios, cocoa-touch, uikit

我有一个奇怪的问题。设计师为我提供了一个设计（不可能改变），它把一个按钮放在一个非常靠近滑块的地方。为了说明起见，让我们谈谈左侧。该按钮仅从大约注册水龙头。从左边算起三分之二的宽度。如果我进一步向右轻按，轻按就会注册在滑块中。` 即使我在 IB 中更改这些控件的 Z 顺序，它仍然会发生。

为什么以及什么是使按钮的整个区域为自己注册水龙头的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:53:36.340

您应该尊重 Apple HCI 指南，它们的存在是有原因的。和设计师谈谈；-j

# java - 使用 Meta Mask 释放 KeyBinding

> ID：14265467
> 
> 赞同：0
> 
> 时间：2013-01-10T19:08:46.007
> 
> 标签：java, swing, key-bindings, keystrokes

我的 Java 游戏有一个`KeyBinding`，我使用元键和 Z 键向左移动。

```
i.put(KeyStroke.getKeyStroke(KeyEvent.VK_Z, 4), "Z");
m.put("Z", sprite_moveLeft); 
```

我该如何写这个的发布形式？

```
i.put(KeyStroke.getKeyStroke(???????), "rZ");
m.put("rZ", sprite_rmoveLeft); 
```

我已经试过了

```
i.put(KeyStroke.getKeyStroke(KeyEvent.VK_Z, 4), "Z");
m.put("Z", sprite_moveLeft);
i.put(KeyStroke.getKeyStroke(KeyEvent.VK_Z, 4, true), "rZ");
m.put("rZ", sprite_rmoveLeft); 
```

但无济于事，并尝试将 KeyEvents 更改为键码（int）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:14:32.650

尝试使用...

```
KeyStroke.getKeyStroke(int keyCode, int modifiers, boolean onKeyRelease) 
```

**更新了工作示例**

```
public class KeyBindingsTest {

    public static void main(String[] args) {
        new KeyBindingsTest();
    }

    public KeyBindingsTest() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new KeyBindingPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public static class KeyBindingPane extends JPanel {

        private JTextArea textArea;

        public KeyBindingPane() {
            setLayout(new BorderLayout());
            add(new JScrollPane((textArea = new JTextArea())));

            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            ActionMap am = getActionMap();

            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_Z, KeyEvent.ALT_DOWN_MASK, false), "Released");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_Z, KeyEvent.ALT_DOWN_MASK, true), "Pressed");

            am.put("Released", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println("released");
                    textArea.append("Released\n");
                }
            });
            am.put("Pressed", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println("pressed");
                    textArea.append("Pressed\n");
                }
            });

            setFocusable(true);
            requestFocusInWindow();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(100, 100);
        }
    }
} 
```

请注意，我从未见过`KeyEvent.META_DOWN_MASK`在 Windows 上工作...

# php - 使用重写引擎时正确编码 url

> ID：14265470
> 
> 赞同：6
> 
> 时间：2013-01-10T19:08:49.757
> 
> 标签：php, mod-rewrite, url-rewriting, url-routing

我正在使用从 Akelos 框架中提取的 mod_rewrite 和路由系统。

在搜索键参数中使用一些符号时，我遇到了一个非常大的问题。

路由图如下：

```
$map->connect(":lang/search/:string", array('controller' => 'search','action' => 'index')); 
```

现在在控制器中，我得到`$this->registry->map['params']['get']['string']`一个搜索关键字。

我找不到正确编码网址的方法。例如让我们取一个字符串`t\ /#%&=`

`urlencode()`给出`t%5C+%2F%23%25%26%3D`和页面显示`The requested URL /site/en/search/t\+/#%&= was not found on this server.`

`rawurlencode()`给出`t%5C%20%2F%23%25%26%3D`和页面显示相同。

[您可以在此页面上](https://docs.google.com/file/d/0B3-UiPvnVn9nWTg0YmQ1X1VGVnM/edit)下载或查看路由器类源

我真的不想将 base64 用于 url 和您无法读取任何内容的此类编码。

如果您需要这里还有一个`.htaccess`文件内容：

```
<IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

**更新**

[这里实际上是用于进行测试的工作文件。](https://docs.google.com/file/d/0B3-UiPvnVn9nWTg0YmQ1X1VGVnM/edit)

如果您有时间，请下载这些文件并在您的服务器上进行测试。

**指导：**

`controllerclass.php`- 简单的控制器框架，通过在其中定义一个“控制器”类使 searchcontroller.php 能够工作

`routerclass.php`- 从 Akelos 框架中提取的路由器类，可能存在错误

`routes.php`- 一个你定义你的路线的地方，在我们的例子中，我们只有`/search/:string`

`searchcontroller.php`- 测试字符串的基本应用程序 - /search/stringhere 指向此文件

`index.php`- 所有启动和路由恰好开始的地方

`.htaccess`- 我认为这里没有错误

我认为您不需要更改`index.php`, `controllerclass.php`, `routes.php`,`searchcontroller.php`

可能存在错误，`routerclass.php`或者可能需要一些`.htaccess`我不相信的修复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T15:09:15.280

看起来问题是关于RFC [3986 第 7.3 节（后端转码）](https://www.rfc-editor.org/rfc/rfc3986#section-7.3)`urlencode`和`urldecode`. 我在[http://php.net/manual/en/function.urlencode.php#97969](http://php.net/manual/en/function.urlencode.php#97969)稍微修改了函数：

```
function myUrlEncode($string) {
    $entities = array('%21', '%2A', '%27', '%28', '%29', '%3B', '%3A', '%40', '%26', '%3D', '%2B', '%24', '%2C', '%2F', '%5C', '%3F', '%25', '%23', '%5B', '%5D');
    $replacements = array('!', '*', "'", "(", ")", ";", ":", "@", "&", "=", "+", "$", ",", "/", "\\", "?", "%", "#", "[", "]");
    return htmlspecialchars(str_replace($entities, $replacements, urlencode($string)));
} 
```

请注意添加 `%5C`=>`\`和`htmlspecialchars()`(htmlspecialchars 是关于安全性而不是能够使用特殊字符。输入可能是`<script>...`等`<h1>...`:) )。

所以你会像这样使用它：

```
print("<b><i>URL Encode Tests</i></b><br /><br />
    <b>Works:</b> ".myUrlEncode($string[0])." <a href=\"".HTTP_ROOT."/search/".myUrlEncode($string[0])."\">/search/".myUrlEncode($string[0])."</a><br />
    <b>Does not work:</b> ".myUrlEncode($string[1])." <a href=\"".HTTP_ROOT."/search/".myUrlEncode($string[1])."\">/search/".myUrlEncode($string[1])."</a><br />
    <b>Does not work:</b> ".myUrlEncode($string[2])." <a href=\"".HTTP_ROOT."/search/".myUrlEncode($string[2])."\">/search/".myUrlEncode($string[2])."</a><br />
"); 
```

之后，搜索字符串 #3 ( `\ /#%&=`) 会给出一个 PHP 错误，例如“Method **SearchController::t** is invalid in ...\index.php on line 30”。我想这与路由器中的正则表达式有关，因此您可能需要在那里进行一些调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T13:26:45.973

给出的错误是：

> "请求的 URL /**站点**/en/search/"

您的问题中没有提到额外的“站点”一词，这使得难以解释，但错误似乎来自 Apache*而不是*PHP。

该错误表明您的 htaccess 规则不匹配这些 URL。所以你不需要查看任何 PHP 代码来找出错误，错误在 Apache 的某个地方。

[进一步搜索](http://www.jampmark.com/web-scripting/5-solutions-to-url-encoded-slashes-problem-in-apache.html)- 这是因为 URL 无效。查询字符串中允许使用 %2f，但路径中不允许使用。因为它是无效的，所以服务器在它达到重写规则之前拒绝它。

www.jampmark.com 的链接提供了 5 个解决方案的优点和每个解决方案的问题，但将这么多材料复制到此处是不合适的。

1.  在 Apache 中打开“AllowEncodedSlashes”指令
2.  在 url 编码后将 %2F 替换为 %252F 并将 %5C 替换为 %255C
3.  双 urlencode()
4.  使用未编码的斜杠
5.  用下划线 (_) 替换斜杠

此外，您的测试代码中存在错误：

```
$string[2] = "t\ /#%&="; 
```

斜杠空格不是有效的转义序列。您应该将代码更改为 "t\\ /#%&="; 避免反斜杠被解释为转义字符。

# c# - .NET MVC 访问在尝试创建目录时被拒绝

> ID：14265471
> 
> 赞同：0
> 
> 时间：2013-01-10T19:09:03.300
> 
> 标签：c#, asp.net, vb.net, file-io, iis-7

我正在尝试使用 .NET 在 .NET 中创建一个目录`Directory.CreateDirectory`，我按照[此处](https://stackoverflow.com/questions/7334216/iis7-permissions-overview-applicationpoolidentity)的说明授予访问权限，但我仍然收到 UnauthorizedAccessException。有人有建议吗？请注意，这是一个使用 IIS7 服务器的 Web 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:14:57.207

在您尝试创建新目录的目录中，确保您的应用程序池用户对该目录具有读/写权限。除了将用户添加到用户组之外，您还必须专门执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:21:46.320

还有 2 个潜在问题（+1 到 user959729）：

*   您正在与您认为的不同的地方创建目录（即您构建路径错误）
*   该代码在模拟帐户（用户或匿名）下运行，并且此类用户无权创建文件夹（`System.Environment.UserName`在创建目录之前验证尝试检查）。要修复，您需要将代码作为进程帐户运行。

# sql - SQL：删除 GroupBy 中的所有 NOT MAX 记录

> ID：14265472
> 
> 赞同：18
> 
> 时间：2013-01-10T19:09:06.500
> 
> 标签：sql

我的目标是从我的表中删除所有不是分组 CaseKey 的 MAX(recordDate) 的记录。因此，如果我有 3 组 3 个 casekey 的 9 条记录，并且每个 casekey 都有其 3 个日期。我会删除每组的 2 个较低日期并得出 3 个总记录，只有每个剩余的 MAX(recordDate)。

我有以下 SQL 查询：

```
 DELETE FROM table
    WHERE tableID NOT IN (
    SELECT tableID
    FROM (
    Select MAX(recordDate) As myDate, tableID From table
    Group By CaseKey
    ) As foo
    ) 
```

我收到错误：第 3 行出错... 列 'table.tableID' 在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

显然，我可以将 tableID 添加到我的 Group By 子句，但是该语句的结果不正确并返回所有行，而不是仅返回分组 CaseKeys 的 MAX recordDate。

服务器现在已关闭，但明显的答案是：（WildPlasser 答案的微小调整）

```
DELETE zt FROM ztable zt
WHERE EXISTS (
    SELECT * FROM ztable ex
    WHERE ex.CaseKey = zt.CaseKey
    AND ex.recordDate > zt.recordDate
); 
```

换句话说，对于zt中的每条记录，运行一个查询，看看同一条记录是否也有记录日期更高的记录。如果是，则 WHERE EXISTS 语句通过并删除该记录，否则 WHERE 语句失败，该记录为其自己的 MAX recordDate。

谢谢你，WildPlasser，感谢我以某种方式搞砸的那种简单化的方法。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-10T19:13:53.353

MAX 有一个特殊属性：没有记录的值高于 max。因此，我们可以删除所有具有相同 CaseKey 但记录日期更高的记录的记录：

```
DELETE FROM ztable zt
WHERE EXISTS (
    SELECT *
    FROM ztable ex
    WHERE ex.CaseKey = zt.CaseKey
    AND ex.recordDate > zt.recordDate
    ); 
```

顺便说一句：上面的查询（以及`MAX()`版本）假设只有一条具有最大日期的记录。可能有联系。

在平局的情况下，您需要在 where 子句中添加一个额外的字段；作为决胜局。假设`TableId`可以这样运行，查询将变为：

```
DELETE FROM ztable zt
WHERE EXISTS (
    SELECT *
    FROM ztable ex
    WHERE ex.CaseKey = zt.CaseKey
    AND (   ex.recordDate > zt.recordDate
        OR (ex.recordDate = zt.recordDate AND ex.TableId > zt.TableId)
        )
    ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T21:26:26.560

只是表达

> 从我的表中删除所有不是分组 CaseKey 的 MAX(recordDate) 的记录

在 sql 中作为

```
DELETE FROM table t1
WHERE t1.recordDate <> 
  (SELECT MAX(recordDate)
   FROM table t2
   WHERE t2.CaseKey = t1.CaseKey) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T20:19:34.500

您可以对**排名**> 1的所有记录进行`caseKey`排名，以仅返回较低的日期。这样你*就可以*使用你的`tableID`.

```
DELETE FROM [table]
WHERE [tableID] IN
  (SELECT
    [sub].[tableID]
  FROM
  (
    SELECT 
      [tableID],
      Rank() OVER (PARTITION BY [caseKey] ORDER BY [recordDate] DESC, [tableID] DESC) AS [rank]
    FROM [table]
  ) AS [sub]
  WHERE [sub].[rank] > 1) 
```

# c# - 我可以从非虚拟化应用程序访问 Windows 虚拟商店中的文件和注册表项吗？

> ID：14265473
> 
> 赞同：3
> 
> 时间：2013-01-10T19:09:14.587
> 
> 标签：c#, windows-7, uac, registry-virtualization

我有一个“旧版”XP 应用程序，它在 [ProgramFiles]\[Application] 文件夹中写入文件，并在 HKLM\Software\[Application] 路径中写入注册表项。在 Windows Vista 或 Windows 7 中运行应用程序时，文件和注册表项将写入[虚拟存储](http://msdn.microsoft.com/en-us/library/windows/desktop/aa965884.aspx)中。没关系; 它还没有破坏任何东西。

现在，我们已经在 .NET 中重新编写了应用程序。它只在“安全的”用户范围的位置读取和写入文件，我们使用`requestedExecutionLevel`指定的应用程序清单来禁用注册表虚拟化。

当用户升级到最新版本时，我们希望通过从以前的虚拟化文件和注册表设置中导入设置来保持与旧应用程序的兼容性。

所以，问题是：有没有办法从`requestedExecutionLevel`清单中指定的应用程序访问虚拟存储中的文件和注册表项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-07T13:18:09.643

我想我已经把这个问题留得够久了。这是我的发现。

似乎没有任何方法可以从同一进程访问虚拟存储和“真实”注册表和文件系统。虚拟商店会自动应用于未指定`requestedExecutionLevel`且未“以管理员身份”启动的 Windows 应用程序。

那么，答案似乎是一个专门的“迁移”应用程序。此应用程序*不会指定*，`requestedExecutionLevel`从而保证应用程序在没有管理权限的情况下启动时将被放入“虚拟商店”。该应用程序分两个阶段运行：

1.  *在没有*管理权限的情况下启动应用程序。应用程序将从虚拟存储中读取所需的注册表项和文件系统文件，并将它们保存在某个临时（非虚拟化）位置，例如用户的 AppData 目录。
2.  重新启动*具有*管理访问权限的应用程序。应用程序实际上[可以自动为自己执行此操作](https://stackoverflow.com/questions/133379/elevating-process-privilege-programatically)，以简化流程。应用程序现在可以访问“真正的”注册表和文件系统。该应用程序将保存从虚拟存储备份的注册表项和文件，将它们保存到所需的“真实”位置。

理想情况下，此应用程序应该是通用的，在启动期间接受任何用户指定的注册表项和文件作为输入参数。

# templates - 带有空模板的 AngularJS 'A' 指令将标签复制到 DOM

> ID：14265474
> 
> 赞同：0
> 
> 时间：2013-01-10T19:09:17.763
> 
> 标签：templates, angularjs, directive

对于我的项目，我要求定义不修改 DOM 的指令，也不在 DOM 中留下它们存在的工件。我似乎无法使用 AngularJS 完成这项工作。

考虑这些例子：

```
<div empty-arg="some-param"></div>
<div null-arg="another-param"></div> 
```

相关指令定义如下：

```
var module = angular.module( 'component', [] );

module.directive('emptyArg', function() {
    template: '', 
    replace: true, 
    scope: false, 
    link: function() { // ... }
};

module.directive('nullArg', function() {
    template: null,
    replace: true,
    scope: false,
    link: function() { // .... }
}; 
```

编译后，我希望生成的 DOM 元素如下所示：

```
<div></div>
<div></div> 
```

但是缺少模板似乎会导致 AngularJS 忽略替换请求，从而使生成的 DOM 元素看起来像这样：

```
<div empty-arg="some-param"></div>
<div null-arg="another-param"></div> 
```

如何强制 AngularJS 在编译后的 DOM 中删除这些属性？

一个 jsFiddle 展示了这一点，可以在这里找到：

[http://jsfiddle.net/vankirkc/ezN3M/34/](http://jsfiddle.net/vankirkc/ezN3M/34/)

更新：

可以在创建后删除创建的属性，但我真正要寻找的是某种利用模板定义参数来拦截 DOM 元素的创建的方法，这样它就不会复制此指令。看来这在 1.0.3 版中是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:34:31.473

实际上 "empty-arg" 和 "null-arg" 只是 DOM 元素的普通属性，AngularJS 使用它们来标记要在元素上应用哪些指令。

因此，如果一个指令将从 DOM 元素中删除属性，那实际上会很糟糕。例如 - 可以编写另一个指令来使用此属性来修改其行为：在不同的 AngularJS 库中，您可以看到，控件使用`ngModel`属性来获取绑定元素的表达式。

而且由于这些属性已经存在于 DOM 树中，删除它们将导致 DOM 树修改并可能暗示性能问题。

如果您仍然真的想删除这些属性，您可以尝试修改链接函数的第二个参数：

```
attrs.$set('empty',undefined); 
```

但通常我不建议这样做：您*可以*节省一些内存（但我不确定它是否会被保存 - 我认为它应该进行基准测试），但由于 DOM 树会被修改，您会获得更长的加载时间。

但无论如何，[这里是 Fiddle](http://jsfiddle.net/gGzy2/)来证明这是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:51:37.420

如果要删除所有属性，可以在编译函数中进行：

```
for(var i=0; i < tElement[0].attributes.length; i++){
    tElement.removeAttr(tElement[0].attributes[i].name)
}; 
```

[小提琴](http://jsfiddle.net/mrajcok/qYpBJ/)。

**更新：**正如@Josh 在评论中指出的那样，删除属性本质上会使其成为仅运行一次的指令，并且在链接函数中没有任何属性可用，这使得这个答案成为非答案/非解决方案.

# javascript - 为什么要在实例上定义位置方法，而在原型上定义历史方法？

> ID：14265476
> 
> 赞同：2
> 
> 时间：2013-01-10T19:09:34.037
> 
> 标签：javascript, google-chrome

我试图了解在定义 dom 对象方法的占位符时所做的架构决策。例如：

位置对象方法是在同一个位置对象上定义的，而不是在 Location.prototype 上。

虽然历史方法是在 History.prototype 上定义的，而不是在历史对象上。

这里的逻辑是什么？

```
var h = Object.getPrototypeOf(history);
h.hasOwnProperty('go'); //true
history.hasOwnProperty('assign'); //false

var l = Object.getPrototypeOf(location);
l.hasOwnProperty('assign'); //false
location.hasOwnProperty('assign');  //true 
```

# jquery - 关闭一个 jQuery 对话框

> ID：14265479
> 
> 赞同：0
> 
> 时间：2013-01-10T19:09:34.720
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

我目前正在加载一个带有视图的对话框。此视图处理正在购买的产品的插入和编辑。

我遇到的问题是当我保存我的产品时，我需要关闭对话框并刷新原始页面上的网格。当我尝试这样做时，我试图在我的父母中找到对话框并触发关闭事件。到目前为止，我在父级中找到对话一直无效。我已经能够找到网格并强制刷新。

我的问题是，有没有办法从对话框中触发关闭？顺便说一句，我不确定这是否是问题的一部分，但我使用的是完整视图而不是部分视图。

任何帮助，将不胜感激。谢谢。

最诚挚的问候，乍得

编辑：这是我的代码。

查看（父页面）

```
...
<div id="divPOProduct">
</div>

<script type="text/javascript">
    var selectedIds = [];

    $(document).ready(function () {
            $("#divPOProduct").dialog({
                height: 500,
                width: 700,
                modal: true,
                autoOpen: false,
                draggable: false,
                resizable: false,
                open: function () { },
                close: function (event, target) {
                        alert("Here");
                        return false;
                }
            });

   //"Add" button
            $("#add-poproduct").click(function (e) {
                e.preventDefault();

                var link = '@(Url.Action("POProductAddPopup", "PurchaseOrder", new { purchaseOrderId = Model.Id }))';
                //OpenWindow(link, 600, 500, true);

                $("#divPOProduct").load(link);
                $("#divPOProduct").dialog("open");

                return false;
            });

... 
```

查看（对话框）

```
$("#save").click(function (e) {
        var validationTest = CheckValidation();

        if (validationTest) {
            var model = {
                ...
            };
            $.getJSON('@Url.Action("SavePurchaseOrderProduct", "PurchaseOrder")', model, function (result) {
                if (result) {
                    //$(this).closest('.ui-dialog-content').dialog('close')
                    window.parent.$("divPOProduct").dialog("close");
                    //$(window.parent).find("divPOProduct").dialog("close");
                }
            });
            return false;
        }
    });
}); 
```

您将在 if 语句中看到的三个尝试是我迄今为止所尝试的。我现在可以找到父级和 div，但找不到对话框。顺便说一句，从结果返回的所有结果都是真/假。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:38:02.240

`enter code here`嗯试试这个：

```
 window.parent.$("#divPOProduct").dialog("close"); 
```

或详细替代：

```
 window.parent.jQuery("#divPOProduct").dialog("close"); 
```

或替代

```
 window.parent.document.jQuery("#divPOProduct").dialog("close"); 
```

另一种选择：

```
 window.opener.jQuery("#divPOProduct").dialog("close"); 
```

另一种尝试：在父窗口上创建一个新的 JavaScript 函数：

```
function closeMyDialog(){
    alert("closing my dialog");//to debug call
    jQuery("#divPOProduct").dialog("close");
} 
```

然后使用：（在子窗口上）

```
 window.parent.closeMyDialog(); 
```

或者

```
 window.parent.closeMyDialog 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:36:13.323

目前，我的解决方法是刷新父页面。这不是我想要做的，但直到我可以解决它，我唯一的解决方案。 *感觉肮脏*讨厌使用这种方法。

# php - 我在使用 Ajax 显示数据时遇到问题

> ID：14265482
> 
> 赞同：0
> 
> 时间：2013-01-10T19:09:49.563
> 
> 标签：php, javascript, ajax

你好吗，我已经为此工作了 2 个小时，当我更改它时，我似乎无法让我的页面动态显示信息。如果有人能告诉我出了什么问题，将不胜感激。

这是我的 HTML

```
<h2>Feedbacks</h2>
<form>
<select onchange="viewFeedback(this.value);">
    <option value="unread">View Unread</option>
    <option value="all" >View All</option>
</select>
</form>
<div id="feedbackview"></div> 
```

这是我的ajax

```
function createObject() {
var request_type;
var browser = navigator.appName;
if(browser == "Microsoft Internet Explorer"){
    request_type = new ActiveXObject("Microsoft.XMLHTTP");
}else{
    request_type = new XMLHttpRequest();
}
return request_type;

}
var http = createObject();
function viewFeedback(condition) { 
    http.onreadystatechange = function() {
        if(http.readyState == 4) {
            document.getElementById('feedbackview').innerHTML=http.responseText;
        }
        http.open("GET",'viewfeedback.php?condition='+condition,true);
        http.send(null);
    }   
 } 
```

这是php

```
$condition = $_GET['condition'];
$db = new db();

$query = $db->query("SELECT * FROM feedback");
$rows = $db->countRows($query);
if($rows != 0) {
    $results = $db->getRows($query);
    foreach($results as $result) {
        extract($result);
        echo $name;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:13:00.400

和调用不应该在事件内`open()`，将它们移到外面。您也可以将事件从外部移出，因为每次更改下拉列表时都无需重新定义它。`send()``onreadystatechange``viewFeedback()`

```
var http = createObject();
http.onreadystatechange = function() {
    if(http.readyState == 4) {
        document.getElementById('feedbackview').innerHTML=http.responseText;
    }
}
function viewFeedback(condition) { 

    http.open("GET",'viewfeedback.php?condition='+condition,true);
    http.send(null);
 } 
```

另请注意，您不会`$_GET['condition']`在 PHP 端做任何事情，因此无论选择哪个下拉项，响应都将始终相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:29:44.837

首先不知道那个Ajax创建功能有那么厉害。我现在将其注释掉，并且仅当它在受支持的浏览器中不起作用时才将其添加回来。而是这样做：

```
var http = new XMLHttpRequest(); 
```

接下来，尝试直接在浏览器中访问 PHP Web 服务。它在工作吗？如果是这样，请修复 Ajax 请求中的问题：

```
function viewFeedback(condition) {
    http.open("GET", 'viewfeedback.php?condition=' + condition, true);
    http.onreadystatechange = function() {
        if (http.readyState == 4) {
            if (http.status == 200) {
                document.getElementById('feedbackview').innerHTML = http.responseText;
            } else {
                console.log(http.response);
            }
        }
    }
    http.send(null);
} 
```

如果这不起作用，请告诉我。

# python - 在python中的字符串中有@ char

> ID：14265483
> 
> 赞同：-1
> 
> 时间：2013-01-10T19:09:52.467
> 
> 标签：python

我正在为测试目的生成虚拟电子邮件地址，因此希望以下代码能够工作

```
return "test_%@test.tm"% counter(); 
```

但它不起作用，似乎有一些关于 @ 的特殊内容，无法`@`在字符串中包含。

编辑

有人可以告诉我为什么输出在此示例中没有“电子邮件”属性/键 - [https://gist.github.com/4505055](https://gist.github.com/4505055)

顺便说一句，我是 python 新手

编辑

我的错误，电子邮件 attr 丢失，抱歉 :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:13:03.527

看来您忘记了[字符串替换字符](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations) `%s`。

```
return "test_%s@test.tm" % counter() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:13:23.563

那是因为字符串中百分号后面的字符应该指定您要插入的值类型。例如，做

```
"test_%i@test.tm" % 1 
```

...会告诉 Python 你想在 '%i' 所在的位置插入一个整数。但是，'%@' 不是一个公认的字符串插入东西，所以它不起作用。[更多信息](http://docs.python.org/2/library/stdtypes.html#string-formatting)

做同样事情的一个稍微更健壮的方法可能是这样的：

```
"test_{thing}@test.tm".format(thing=counter()) 
```

...或者...

```
"test_{0}@test.tm".format(counter()) 
```

[更多信息](http://docs.python.org/2/library/string.html#format-string-syntax)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:13:21.720

@ 没有什么特别之处。您似乎在进行字符串替换，但您提供了要替换的无效值。

试试这个：

```
return "test_%s@test.tm"% counter(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T19:13:45.100

你有一个'％'字符，`@`后面有你的符号。这不是有效的字符串转换类型。

请参阅： [http ://docs.python.org/2/library/stdtypes.html#string-formatting-operations](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)

也许你的意思是：`'test_%s@test.tm' % counter()`

（另外，您不需要用分号终止语句；）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T19:15:43.633

您在字符串中的百分号后忘记了格式化程序。

```
return "test_%s@test.tm"% counter() 
```

此外，您不必在 python 语句的末尾添加分号。事实上，python 不会抱怨它，因为它是有效的，但不推荐。

# android - 更改列表视图项 onclick 的布局

> ID：14265486
> 
> 赞同：1
> 
> 时间：2013-01-10T19:10:02.710
> 
> 标签：android, listview, listadapter

我有一个自定义适配器，我根据[此处](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters)`ListView`显示的示例进行了模制。

我想采用用户的选择并为该选择增加不同的布局。这样我就可以在选择项目时展开视图以显示更多信息。我可以使用类似的方法简单地在点击时膨胀一个新的布局吗？

```
protected void onListItemClick(ListView list, View v, int position, long id){
    super.onListItemClick(list, v, position, id);
        LayoutInflater inflate = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.new_layout, null); 
```

在这部分代码之后，我将填充个人`TextView`和`ImageView`对象，就像我在初始列表中所做的那样，只是这次我将包含更多字段。这是正确的还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:46:40.073

这是行不通的，因为你没有对你得到的视图做任何事情。您只替换了它的引用（并且没有对新膨胀的视图做任何事情），并没有真正修改“视图树”中的任何内容。

您可以做的是从其内容中清空视图并向其中添加新内容。

不要忘记在 getView 中您必须做同样的事情并返回包含此内容的视图。

# ruby-on-rails - curl 在 Ruby on Rails 应用程序上上传文件

> ID：14265489
> 
> 赞同：1
> 
> 时间：2013-01-10T19:10:25.217
> 
> 标签：ruby-on-rails, ruby, curl

我正在尝试使用 curl 将文件上传到我的小型 Rub​​y on Rails 应用程序。

这是 insert.html.haml

```
= form_for :my_result, :url=>{:action=> 'save'}, :html => {:multipart=>true} do |f|
  = f.file_field :myfile
  = submit_tag 'submit' 
```

提交表单时将调用“保存”操作。但是查看表单的 RoR 动作是“插入”动作。

我可以使用浏览器查看“插入”表单，然后毫无问题地提交我的文件。

但我需要使用 curl 提交文件。
当我做 a`curl -F myfile=@localfile.txt -F commit="submit" URL/insert`时，我只取回 HTML 中的“插入”表单。它似乎没有调用实际的“保存”操作。

```
Started POST "/my_results/insert" for 10.15.120.173 at 2013-01-10 10:53:22 -0800
...
Rendered my_results/insert.html.haml within layouts/application (2.9ms) 
```

我是 RoR 和 curl 的新手。我会很感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:02:44.890

**要上传文件，您必须模仿提交**表单时发生的请求。
表单的动作定义为

```
:url=>{:action=> 'save'} 
```

这转化为

```
<form action="/save" method="POST"> 
```

所以你应该发布到`/save`

第二点，Rails 自动在字段名称前加上传递给的对象名称`form_for`。如果您查看 的 HTML 源代码`/insert`，文件输入看起来像

```
<input name="my_result[myfile]" type="file" /> 
```

这解释了`params`哈希的结构：

```
{
  "my_result" => {
    "my_file" => [the file]
  }
} 
```

它允许访问下面的表单字段值`params[:my_result]`

总之： POST`/save`并命名该字段`my_result[my_file]`：

```
curl -F my_result[my_file]=@localfile.txt URL/save 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:21:53.557

我只是在这里猜测，但您`POST`可能无法通过，因为 Rails 需要`csrf`真实性令牌，而您的 curl 请求并未发送该真实性令牌。

在您看到结果的控制台中，`POST`可能有一条线说明了一些类似的内容`WARNING: Cannot verify authenticity token.`

当您使用 Rails 助手创建表单时，Rails 会自动创建一个隐藏字段，并为其值`form_for`生成一个标记。`csrf`这样，当表单提交时，如果表单中的令牌与 Rails 期望的令牌不匹配，则请求将失败。

[您可以在此处](http://robots.thoughtbot.com/post/3035393350/curling-with-rails-authenticity-token)阅读有关如何在 Rails 中使用 curl 的信息。

[这是指向跨站点请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)的 Wikipedia 文章的链接。

另外，请让我知道这是否与您的问题有关。我只是假设这是原因，因为我之前尝试过使用 curl 发布并遇到同样的问题

# emacs - 具有精确定位的 Emacs 滚动条

> ID：14265490
> 
> 赞同：0
> 
> 时间：2013-01-10T19:10:28.650
> 
> 标签：emacs, scrollbars, fringe

如何获得具有精确定位的滚动条？

为了说明我的意思：

1.  `C-h C-f`（阅读 GNU Emacs 常见问题解答）

2.  现在尝试定位缓冲区内容，使以开头的段落`This is the version ...`位于顶部。使用默认滚动条，您需要多次重绘才能做到这一点。或者你左键单击光标定位然后`C-l``C-l`

3.  现在回到你以前去过的地方。这对于常规滚动条是不可能的。

我想要的是只需单击高度的滚动条，`This is the version ...`将这条线放置在第 2 步的顶部。然后返回我来自的位置，我右键单击（实际上没有移动鼠标）。

过去，我一直在安装 Emacs 时使用类似 Athena~~小部件~~的选项来获取此类滚动条，请参阅[它们的描述](http://www.complang.tuwien.ac.at/anton/athena-scrollbars.html)。但我想知道现在是否有更好或更现代的方法来做到这一点。毕竟，我更喜欢使用标准发行版。

也许，甚至根本不需要更改滚动条，而是使用左边缘。毕竟，鼠标点击边缘被识别为`<left-fringe>`

`M-x emacs-version`
GNU Emacs 23.3.1 (x86_64-pc-linux-gnu, GTK+ Version 2.24.10) 2012-09-21 在 batsu 上，由 Debian 修改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T02:25:50.263

对于这个任务，我按`C-l`一次，两次，三次。它们将在中上下之间切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T22:12:58.893

也许改变使用习惯会有所帮助？一些 Emacs 用户[建议完全禁用滚动条](https://sites.google.com/site/steveyegge2/effective-emacs#TOC-Scrollbar%3a-optional)并专门使用键盘导航 Emacs。（这个习惯也有利于在 shell 中使用 Emacs。）

Emacs 提供了大量的[导航快捷方式](http://www.gnu.org/software/emacs/manual/html_node/emacs/Moving-Point.html#Moving-Point)。例如，为了在大量缓冲区空间上下跳跃，您有：

`C-v` `scroll-up`

`M-v` `scroll-down`

`M-}` `forward-paragraph`

`M-{` `backward-paragaph`

`C-x ]` `forward-page`

`C-x [` `backward-page`

但是，我认为到目前为止最有用的导航命令是：

`C-s` `isearch-forward`

`C-r` `isearch-backward`

在 Emacs 中，搜索非常便宜，它是工作流程中不可或缺的一部分，通过使用参考词作为快速搜索的锚点，到达缓冲区中的不同点通常要快得多，而不是离开到达鼠标的主行。击中`C-s`或`C-r`重复将点移动到连续匹配。（您甚至可以通过在搜索时点击来切换到正则表达式搜索，`M-r`以使搜索更加强大。）

您已经提到`C-l C-l`在缓冲区顶部查看当前行。

现在，如果你想回到以前的位置，你可以使用

`C-u C-x`

跳回标记。上述所有导航命令都将它们的起始位置推到一个“标记环”上，这意味着您不仅可以跳回一个位置，重复点击`C-u C-x`还会带您回到*许多*以前的位置。

# c# - 如何在 .NET 中获取 Properties.Resources.Image 的路径

> ID：14265492
> 
> 赞同：10
> 
> 时间：2013-01-10T19:10:39.203
> 
> 标签：c#, .net, pdfsharp

我在这篇文章之后包含了一张图片作为资源： [如何在 .NET 中创建和使用资源](https://stackoverflow.com/questions/90697/how-to-create-and-use-resources-in-net)

我正在使用 PDFSharp 库创建 PDF。绘制图像的方法，需要图像的路径。我如何获得的路径`Properties.Resources.Image`？

还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T19:13:45.383

`Properties.Resources.Image`是内存中的资源。

您可以将图像保存到临时文件并获取路径。

```
var path = Path.GetTempPath();
Properties.Resources.logo.Save(path); 
```

上面使用[Bitmap.Save](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.save.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:43:05.193

您实际上可以使用以下方法创建图像，而无需保存它`XImage.FromGdiPlusImage()`：

```
var image = XImage.FromGdiPlusImage(Properties.Resources.logo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-26T22:14:10.603

从 PDFsharp/MigraDoc 1.50 beta 2 和更新版本开始，您在使用 MigraDoc 时不再需要路径。已经提到 PDFsharp 不需要文件名，因为可以从例如流中读取图像。

MigraDoc 仍然需要一个字符串。您将图像数据编码为字符串（BASE64 格式）并将该字符串作为文件名传递。

另见： http:
[//pdfsharp.net/wiki/MigraDoc_FilelessImages.ashx](http://pdfsharp.net/wiki/MigraDoc_FilelessImages.ashx)

# sql - 用于计数组合并包括不存在的条目的 SQL 查询

> ID：14265496
> 
> 赞同：1
> 
> 时间：2013-01-10T19:10:59.033
> 
> 标签：sql, oracle, count

这是我正在处理的表格的简化版本，即订单

```
+-------------------+------------------+---------------+
| Order_Base_Number | Order_Lot_Number | Other Cols... |
+-------------------+------------------+---------------+
|                 1 |                3 |               |
|                 1 |                3 |               |
|                 1 |                4 |               |
|                 1 |                4 |               |
|                 1 |                4 |               |
|                 1 |                5 |               |
|                 2 |                3 |               |
|                 2 |                5 |               |
|                 2 |                9 |               |
|                 2 |               10 |               |
+-------------------+------------------+---------------+ 
```

我想要做的是根据基数和批号计算唯一条目的数量。我有两组数字，一组是基数，另一组是一组批号。例如，假设这两组是 Base In (1,2,3)，Lot 在 (3,4,20)。

我正在寻找一个 SQL 查询，它可以从两个集合中返回 (Base,Lot) 的所有可能组合，其计数显示在表中找到该组合的次数。我的问题是我想包括所有可能的组合，如果组合不在 Orders 表中，我希望计数显示为零。所以，我正在寻找的输出是这样的。

```
+------+-----+-----------+
| Base | Lot | Frequency |
+------+-----+-----------+
|    1 |   3 |    2      |
|    1 |   4 |    3      |
|    1 |  20 |    0      |
|    2 |   3 |    1      |
|    2 |   4 |    0      |
|    2 |  20 |    0      |
|    3 |   3 |    0      |
|    3 |   4 |    0      |
|    3 |  20 |    0      |
+------+-----+-----------+ 
```

我尝试了很多查询，但从未接近过这个，甚至不确定是否可以完成。现在我正在弄清楚客户端的组合，因此我执行了太多查询来获取频率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:24:11.987

也许最清晰的方法是从 CTE 列表开始：

```
with bases as (
    select 1 as base from dual union all
    select 2 as base from dual union all
    select 3 as base from dual
   ),
     lots as (
    select 3 as lot from dual union all
    select 4 as lot from dual union all
    select 20 as lot from dual
   )
select b.base, l.lot, count(Order_Base_Number) as Frequency
from bases b cross join lots l left outer join
     Orders o
     on o.base = b.base and o.lot = l.lot
group by b.base, l.lot 
```

请注意，这使得`cross join`明确的，故意不使用`,`笛卡尔积。

该查询的第一部分也可以写成如下所示（假设每个基数和批次在表中至少有一条记录）：

```
with bases as (
     select distinct base
     from Orders  -- or some other table, perhaps Orders ?
     where base in (1, 2, 3)
    ),
     select distinct lot
     from Orders  -- or some other table, perhaps Lots ?
     where lot in (3, 4, 20)
    )
. . . 
```

这更简洁，但可能导致查询效率降低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:19:31.200

您在最里面的子查询中需要的是调用`CROSS JOIN`，它获取记录的笛卡尔积（所有可能的组合）。这就是你没有`JOIN..ON condition`也没有的时候得到的`WHERE`：

```
SELECT Base.Id as baseid, Lot.Id as lotid FROM Bases, Lots 
```

现在将其放入子查询和`LEFT JOIN`其他内容中：

```
SELECT ... FROM 
   (SELECT Base.Id as baseid, Lot.Id as lotid 
           FROM Bases, Lots) baseslots
   LEFT JOIN Orders ON Order_Base_Number = baseid, 
             Order_Lot_Number = lotid .... 
```

有了这个`LEFT JOIN`，你会得到 NULL 不存在的组合。使用`COALESCE`（或类似的东西）将它们变成 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:22:22.807

我没有 Oracle 来测试它，但这是我要做的：

```
CREATE TABLE pairs AS
(
SELECT DISTINCT Base.Order_Base_Number, Lot.Order_Lot_Number 
FROM ORDERS Base
CROSS JOIN ORDERS Lot
);

CREATE TABLE counts AS
(
SELECT Order_Base_Number, Order_Lot_Number, Count(*) AS C
FROM ORDERS 
GROUP BY Order_Base_Number, Order_Lot_Number
);

SELECT P.Order_Base_Number, P.Order_Lot_Number, COALESCE(C.C,0) AS [Count]
FROM Pairs P
LEFT JOIN counts C ON P.Order_Base_Number = C.Order_Base_Number 
             AND P.Order_Lot_Number = C.Order_Lot_Number 
```

# ios - 以“键值”格式（YAML、JSON）存储一个会话信息 - 一个核心数据表或单独的会话文件？

> ID：14265502
> 
> 赞同：0
> 
> 时间：2013-01-10T19:11:29.587
> 
> 标签：ios, objective-c, core-data, key-value-store

我有一个 Session 类，我想保存和存储应用程序的当前会话信息（如 lastLocation、remoteSessionToken、...）

我有一堆表的默认核心数据设置，我看到的最明显的解决方案是再创建一个表“会话”，其中包含两个字符串字段：“字段”和“值”，并以像我一样的方式将会话信息存储到该表中将任何信息存储到其他表

```
 'field'             'value'
lastLocation        46.68,34.18
removeSessionToken  au987asdv7tta487tv9b
... 
```

另外，我知道我可以使用一个特殊的单独文件来完成此操作，用于 YAML 或 JSON 格式的设置 fx，但这会导致 Core Data 数据库和文件的逻辑不一致。

是否有任何推荐的方法来保存和持久化会话信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T23:36:54.377

除非适用以下内容，否则将其放在用户默认值或文档目录中的特殊用途文件中：

*   您有许多会话，需要根据某种谓词搜索或过滤它们
*   您有多个会话，并且会话与数据存储中的特定对象有某种关系。

使用 Core Data 和单独的文件并不是“逻辑不一致”。做有意义的事。将此信息保存在您的数据存储中可能没有意义，因此除非您有令人信服的理由，否则不要这样做。

如果信息可能被认为是敏感信息，请将其放入钥匙串中。

此外，在 Core Data 中创建通用容器实体*非常难看。*使用`field`和`value`您描述的字段不是一个好的设计决策。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:55:24.720

只要不是敏感信息，我就会保持一致并使用 Core Data。一个更晦涩的地方是把它放在 NSUserDefaults 中。

# html - 使用 Perl 和 HTML::Mason 的表单提交者的 IP 地址（远程 IP 地址）

> ID：14265504
> 
> 赞同：-1
> 
> 时间：2013-01-10T19:11:43.917
> 
> 标签：html, perl, mason

我正在使用[`HTML::Mason`](https://metacpan.org/module/HTML%3a%3aMason)提供包含表单的网页。填写并提交表单后，我想知道远程客户端的 IP 地址。

我尝试打印`$r->headers_in`，但我得到了

```
Apache2::Request=SCALAR(0x1961ba0)->headers_in 
```

我使用了错误的论点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:22:47.190

对于 CGI 应用程序，远程 IP 地址位于`$ENV{REMOTE_ADDR}`.

如果您使用的是 mod_perl，则等效值位于您的对象`$r->connection->remote_ip`所在的位置。`$r``Apache2::Request`

如果您有双引号中的方法调用，则将生成您显示的输出，例如

```
print "$r->headers_in\n" 
```

如果您删除引号，它将正常工作

```
print $r->headers_in, "\n" 
```

该`$r->headers_in`方法返回一个[`APR::Table`](https://metacpan.org/module/APR%3a%3aTable)对象。`do`您可以使用该方法和合适的子例程（必须返回`1`以通过表进行迭代才能继续）转储此内容，如下所示：

```
my $table = $r->headers_in;
$table->do(sub {
  printf "%s: %s\n", @_;
  1;
}); 
```

# .net - 是否可以使用 linq to sql 从数据库中复制同一记录的两个副本？

> ID：14265510
> 
> 赞同：1
> 
> 时间：2013-01-10T19:12:13.890
> 
> 标签：.net, vb.net, linq

我想要两个相同的 linq to sql 对象/数据库记录副本。这可能吗？我试图通过从 DB 中创建两条记录（通过下面的代码）来做到这一点，但这似乎只是为相同的底层 db 记录创建别名。是否可以制作同一记录的两个不同副本？我试图让两个引用指向两个不同的对象。（如果这是不可能的，我想我可以克隆对象）

```
 Dim one As Rec= (From l In myDB.table Where l.pk = 222 Select l).First
    Debug.Print(one.ssn) //prints 666666666  
    Dim two As Rec = (From l In myDB.table Where l.pk = 222 Select l).First
    two.ssn= "555555555"  //this also changes one.ssn to "555555555", but I don't want this to happen 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:28:50.727

最直接的方法是克隆对象。这将最清楚地表达你的意图。唯一的其他方法（因为 Linq to SQL 没有分离方法）是创建一个全新的 DataContext 并使用您的对象调用 InsertOnSubmit()。假设您的主键已生成，这应该可以工作，否则您必须自己设置一个新的主键。但这似乎有点像黑客 - 我更喜欢第一个解决方案。

# java - Java nio - 无法删除已清空的目录

> ID：14265511
> 
> 赞同：5
> 
> 时间：2013-01-10T19:12:21.113
> 
> 标签：java, io, nio

我正在尝试遍历文件树并删除所有文件/目录。代码如下：

```
 Files.walkFileTree(metricPath, new SimpleFileVisitor<Path>() {

            @Override
            public FileVisitResult visitFile(Path file,
                                             BasicFileAttributes attrs) throws IOException {
                Files.delete(file);
                return FileVisitResult.CONTINUE;
            }

            @Override
            public FileVisitResult postVisitDirectory(Path dir,
                                                      IOException exc) throws IOException {
                if (exc == null) {
                    Files.delete(dir);
                    return FileVisitResult.CONTINUE;
                } else {
                    throw exc;
                }
            }
        });
    } 
```

此代码在单元测试之间运行，每个单元测试都生成一个单独的文件，格式为`folder1/folder2/file`. 当我尝试走那棵树时，`DirectoryNotEmptyException`当 folder1 尝试被删除时抛出 The ，尽管它显然是空的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:16:55.533

您是否检查过该目录中的隐藏文件？在 Windows 上，可能是某个进程打开了这个目录并且打开的文件 HANDLE 仍然存在于系统 HANDLE 表中。在这种情况下，目录被锁定，java 可能会抛出该异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T04:33:59.483

正如我在您的代码中看到的那样，应该没有问题，除非一个文件/文件夹处于只读模式。您可能想在删除之前先探索更改文件权限。

您还可以尝试将 Files.delete() 方法放在以下覆盖上吗

```
public FileVisitResult visitFileFailed（路径文件，IOException exc）
```

参考： [JAVA NIO目录删除](http://javatutorialhq.com/java/example-source-code/io/nio/delete-directory/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-04T10:23:13.267

使用 Apache Commons FileUtils.deleteDirectory() 或 FileUtils.deleteQuietly()

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-10T19:36:30.630

或者，您可以导入[Apache Commons IO](http://commons.apache.org/io/)并使用其[FileUtils.deleteDirectory(File directory)](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#deleteDirectory%28java.io.File%29)方法。一行就足够了，因为它会递归地删除所有文件和子目录：

```
FileUtils.deleteDirectory(dirToBeDeleted); 
```

# java - YouTubeQuery(..) 显示上传视频的时间过长

> ID：14265512
> 
> 赞同：0
> 
> 时间：2013-01-10T19:12:25.263
> 
> 标签：java, youtube-api, gdata-api

[YouTubeQuery(..)](http://gdata.youtube.com/feeds/api/videos)显示已发布视频的时间过长。上传视频后大约 24 小时。无论如何要加快速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:49:06.650

从视频上传到 YouTube 到它出现在 YouTube 搜索索引中的时间量可能会有所不同。我们无法对此做出任何保证。

通常，一种可能导致索引延迟的常见做法是您可以避免将视频上传为不公开/私有，然后在您希望“发布”视频时将其翻转为公开。我不确定您是否这样做，但如果是，请尝试最初将其上传为公开。

# matplotlib - matplotlib 实时线性线

> ID：14265513
> 
> 赞同：1
> 
> 时间：2013-01-10T19:12:30.283
> 
> 标签：matplotlib, real-time

我有一段时间在这个问题上遇到了重大挫折......

```
import numpy as np
import matplotlib.pyplot as plt

plt.ion()
fig = plt.figure(1)
ax = fig.add_subplot(111)
ax.set_title("linear realtime")
line, = ax.plot([],[])

i = 0 
while ( i < 1000 ):
        #EDIT:
        # this is just sample data, but I would eventually like to set data 
        # where it can be floating numbers...
        line.set_data(i,i)             
        fig.canvas.draw()
        i += 1 
```

我正在尝试实时绘制一条直线，但我无法得出结果。提前致谢。到目前为止，我有一个人物出现，但没有在画布上绘制任何内容。

编辑：

有趣....我现在可以在线上绘制点，但是现在，我无法显示它们之间的连接性...我还注意到，如果您在绘制时删除了 ko-... 什么都没有出现了，有人知道为什么吗？

```
import numpy as n
import pylab as p
import time

x=0
y=0 
p.ion()
fig=p.figure(1)
ax=fig.add_subplot(111)
ax.set_xlim(0,10)
ax.set_ylim(0,10)
line,=ax.plot(x,y,'ko-')
for i in range(10):
    x = i
    y = i
    line.set_data(x,y)
    p.draw() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:22:33.867

`p.pause(.001)`在你的循环中添加一个。您需要留出时间让 gui 事件循环触发和更新显示。

这与[问题 #1646](https://github.com/matplotlib/matplotlib/issues/1646)有关。

您遇到的另一个问题是，当您这样做时，`set_data`它会替换用 绘制`x`并`y`传入的数据，而不是附加到已经存在的数据。（要清楚地看到这一点，请使用`p.pause(1)`）当您删除`'ko-'`时，默认情况下没有带有连接点的线的标记，您正在绘制一个点，因此没有任何显示。

我想你打算写这个：

```
x=0
y=0 

fig=plt.figure(1)
ax=fig.add_subplot(111)
ax.set_xlim(0,10)
ax.set_ylim(0,10)
line,=ax.plot(x,y,'ko-')
for i in range(10):
    x = np.concatenate((line.get_xdata(),[i]))
    y = np.concatenate((line.get_ydata(),[i]))
    line.set_data(x,y)
    plt.pause(1) 
```

# javascript - JS代码的诡异渲染

> ID：14265515
> 
> 赞同：0
> 
> 时间：2013-01-10T19:12:33.267
> 
> 标签：javascript, css

我有这个代码

```
cuthtml += '<div style="background-image:url("'+response.images[ii].attachment_image_src+'"); background-position:center center; background-size:cover" class="cut-image6" data-id="'+data_id+'" image-id="'+image_id+'" post-author="'+post_author+'">'; 
```

但是当它被渲染时，它会像这样出现：

```
<div class="cut-image6" post-author="33073" image-id="162015" data-id="4" background-size:cover"="" center;="" background-position:center="" me_1352171624-200x200.jpg");="" bangstyle="" uploads="" wp-content="" www.bangstyle.com="" http:="" style="background-image:url("> 
```

不知道为什么我得到反对票...

正确的代码不应该被破坏。我想知道为什么它会这样爆发。我需要逃避什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T19:17:37.640

看起来你的问题在这里：

```
style="background-image:url("'+response.images[ii].attachment_image_src+'"); 
```

渲染后，您的元素将如下所示：

```
<div style="background-image:url("/some/url");"></div> 
```

如您所见，嵌套的双引号会导致一些问题。相反，使用转义的单引号：

```
style="background-image:url(\''+response.images[ii].attachment_image_src+'\'); ... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T19:17:58.420

尝试使用：
                                                                                                   v

```
cuthtml += '<div style="background-image:url(\''+response.images[ii].attachment_image_src+'\'); background-position:center center; background-size:cover" class="cut-image6" data-id="'+data_id+'" image-id="'+image_id+'" post-author="'+post_author+'">'; 
```

用`\'`而不是`"`箭头指向的地方。

# java - 在 JScrollPane 中更新 JPanel 不起作用

> ID：14265516
> 
> 赞同：0
> 
> 时间：2013-01-10T19:12:35.320
> 
> 标签：java, swing, jpanel, jscrollpane

我创建了一个`JScrollPane`并希望在其中显示一个不同`JPanel`的内容，`JScrollPane`具体取决于我从用户那里得到的输入。出于某种原因，我`JScrollPane`仍然是空白的，并且从不绘制`Panel`.

```
private JScrollPane panelView;

// Creating my ScrollPane with a blank JPanel
panelView = new JScrollPane(new JPanel());
// Scenario1 is my top level JPanel, also contains a JTree
scenario1.add(panelView, BorderLayout.CENTER); 
```

当我获得更新显示的 JPanel 的操作时，我的代码。我已经通过调试器确认我正确地点击了这段代码。

```
// Remove previous displayed JPanel within JScrollPane
panelView.removeAll();
if(node.equals(nodes.loginDefaultUser))
    {
        loginDefaultUserPanel = new LoginDefaultUserPanel();    
        panelView.add(loginDefaultUserPanel);
    }
    else if(node.equals(nodes.addUsers))
    {
        addUsersPanel = new AddUsersPanel();
        panelView.add(addUsersPanel);
    }
    else if(node.equals(nodes.getVersions))
    {
        getVersionsPanel = new GetVersionsPanel();
        panelView.add(getVersionsPanel);
    }
    panelView.revalidate();
    panelView.repaint(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:19:08.217

使用[`JScrollPane#setViewportView`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#setViewportView%28java.awt.Component%29)代替`add`

您可能会发现查看[如何使用滚动窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)的使用

# html - 如何找到此 HTML 源的 ID

> ID：14265523
> 
> 赞同：1
> 
> 时间：2013-01-10T19:13:09.933
> 
> 标签：html, vb.net

我想找出[一个元素的 ID](http://i.epvpimg.com/2yZbf.png)。我想找出文本框的 ID，因为我需要将 ID 输入到我的 VB 应用程序中（从那里我将使用 GetElementbyID 来查找元素）。我为 ID 尝试了“futPhishingTextBoxTyped”，但它不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:16:48.200

具有“futPhishingTextboxTyped”类的文本框没有分配的 ID。您需要从 FORM 父级引用它：

```
document.*formname*.futPhishingTextboxTyped (whatever your form name is) 
```

输入也应该是自动关闭的：

```
<input class="futPhishingTextboxTyped" type="text" maxlength="15" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:26:33.160

它没有身份证。您可以尝试获取 div 然后找到它的子元素

```
GetElementById("futPhishingAdditional").GetElementsByTagName("input") 
```

根据您的评论，整行可能如下所示：

```
WebBrowser1.Document.GetElementById("futPhishingAdditional").GetElementsByTagName("input").Item(0).SetAttribute("va‌​lue", TextBox1.Text) 
```

# css - 如何解决由于 css 冲突而导致的布局设计错误？

> ID：14265524
> 
> 赞同：0
> 
> 时间：2013-01-10T19:13:11.130
> 
> 标签：css

页面的设计应如下所示：

[http://www.ski.kommune.no/Skoler/Finstad/](http://www.ski.kommune.no/Skoler/Finstad/)

在这个页面中加载了另一个 css 文件，带来了 css-tags 的一些不需要的属性，这使得设计不受欢迎，例如蓝色字段中的文本被移动。 [http://www.ski.kommune.no/Skoler/Finstad/Praktisk-informasjon/Test-av-bildegalleri/](http://www.ski.kommune.no/Skoler/Finstad/Praktisk-informasjon/Test-av-bildegalleri/)

在上面的示例中，哪些 css-tags 造成了设计问题？我用 Firebug 找过，但我找不到。恢复设计的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:52:05.153

问题来自主水平菜单中的第 5 项。
那里的列表项有一个`class="calendar"`.
根据浏览器开发工具，该类是：

```
.skole .calendar, .skole .news-list {
overflow: hidden;
margin-bottom: 20px;
} 
```

问题是保证金底部。解决问题：
最好的方法是将 2 个类分开并从日历类中删除 margin-bottom。
忠告：
尝试学习如何使用不同的浏览器开发者工具。
在我看来，最好的是 chrome 和 firebug。
玩得开心！

# c - 使用 gcc 编译 C 文件以获得 x86 汇编代码

> ID：14265527
> 
> 赞同：0
> 
> 时间：2013-01-10T19:13:14.857
> 
> 标签：c, linux, gcc, x86

我有一个 C 文件 heapsort.c 我试图在 64 位 linux 机器上编译以输出相应的汇编代码。我使用以下命令：

```
 gcc -02 -S heapsort.c 
```

当我键入此内容时，我收到此错误消息

```
 gcc:error: unrecognized option '-02' 
```

我试着用谷歌搜索这个错误，但没有任何帮助。有关如何导航此错误并获得 x86 输出的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T19:14:25.757

标志是`-O2`，不是`-02`。那是`O`“优化”的字母，而不是数字`0`。您可能想考虑使用使差异更加明显的字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:14:36.467

它应该是 -O2 与 'O' 不是“零”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:14:48.487

尝试`-O2`代替`-02`. 它是一个字母“O”，是“优化级别 2”的简写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T19:50:25.350

我什至建议（因为每个指出的是字母`O`而不是数字`0`）

```
 gcc -O2 -fverbose-asm -S heapsort.c 
```

^(这`-fverbose-asm`将在程序集文件中为您提供更多生成的注释`heapsort.s`)

顺便说一句，传递`-Wall`给 GCC 始终是一个好习惯。

如果您真的很好奇并想了解更多 GCC 内部的表示，请尝试

```
 gcc -fdump-tree-all -O2 -S heapsort.c 
```

但要准备好获取**大量**文件。
^(你会得到数百个，匹配`heapsort.c.*`！)

如果您想要一些粗略的 GUI 界面来查询任意源代码位置的 Gimple 内部表示，请考虑使用[MELT](http://gcc-melt.org/)。MELT 主要是一种高级领域特定语言（具有类似 Lisp 的语法、强大的模式匹配、面向对象、函数式、动态类型等）来扩展 GCC，但您也可以使用它的（粗略的）[探针](http://gcc-melt.org/index.html#probe_id)来扩展 GCC交互式查询一些 GCC 内部表示。

# python - pandas (pandas.pydata.org) 什么时候在 df.sortlevel(k) 上抛出内存错误？

> ID：14265539
> 
> 赞同：2
> 
> 时间：2013-01-10T19:13:55.763
> 
> 标签：python, pandas

我有一个相当大的数据集 (2678271, 52) 和一个消耗机器内存 6.5% 的 5 维索引。当我打电话

```
df.sortlevel(k) 
```

我收到以下错误：

```
 MemoryError                               Traceback (most recent call last)
 in ()
----> 1 df = df.sortlevel(4)

/usr/local/lib/python2.7/dist-packages/pandas-0.9.1-py2.7-linux-x86_64.egg/pandas/core/frame.pyc in sortlevel(self, level, axis, ascending)
   2978             raise Exception('can only sort by level with a hierarchical index')
   2979 
-> 2980         new_axis, indexer = the_axis.sortlevel(level, ascending=ascending)
   2981 
   2982         if self._data.is_mixed_dtype():

/usr/local/lib/python2.7/dist-packages/pandas-0.9.1-py2.7-linux-x86_64.egg/pandas/core/index.pyc in sortlevel(self, level, ascending)
   1856         indexer = _indexer_from_factorized((primary,) + tuple(labels),
   1857                                            (primshp,) + tuple(shape),
-> 1858                                            compress=False)
   1859         if not ascending:
   1860             indexer = indexer[::-1]

/usr/local/lib/python2.7/dist-packages/pandas-0.9.1-py2.7-linux-x86_64.egg/pandas/core/groupby.pyc in _indexer_from_factorized(labels, shape, compress)
   2124         max_group = np.prod(shape)
   2125 
-> 2126     indexer, _ = lib.groupsort_indexer(comp_ids.astype(np.int64), max_group)
   2127 
   2128     return indexer

/usr/local/lib/python2.7/dist-packages/pandas-0.9.1-py2.7-linux-x86_64.egg/pandas/lib.so in pandas.lib.groupsort_indexer (pandas/src/tseries.c:55052)()

MemoryError: 
```

是否存在引发此错误的硬编码条件？或者是否有可能即使数据只使用了 6.5% 的内存（根据 htop），操作也会吃掉剩余的内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:27:27.007

你能把它移到 GitHub 上吗？我需要查看代码，但有许多边缘情况我没有测试真正深入的“分级”分层索引。所以这可能是一个合法的错误。

编辑：这已在 v0.10.1 中修复

# windows-8 - Windows 平板电脑屏幕键盘覆盖了大部分共享目标窗口

> ID：14265541
> 
> 赞同：0
> 
> 时间：2013-01-10T19:14:18.083
> 
> 标签：windows-8, share, on-screen-keyboard

我正在编写一个 Windows 应用商店应用程序。它是一个共享目标，允许用户更新在主应用程序中使用的产品照片。当用户从另一个应用分享照片，并选择我的应用作为目标时，它允许用户选择他们想要更新的产品，显示旧照片和分享的新照片，然后给用户替换照片的选项。查找要更新的产品的过程涉及用户在 TextBox 中输入文本。

有几个问题。首先，当用作共享目标时，我使用的页面似乎只是一个弹出窗口，而不是全屏。所以，马上，我只有不到一半的屏幕可以使用（左半部分）。

另一个问题是平板电脑的屏幕键盘立即出现并覆盖了屏幕的下半部分，因为 TextBox 具有焦点。所以现在，只有屏幕的左上角是可见的，这给了我很少的空间来工作。

这只是我必须处理的正常事情吗？每个人都只是将他们的共享目标窗口设计为只使用那一点点空间吗？或者有人有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:48:07.323

没有什么能阻止您处理软键盘的演示。

```
Windows.UI.ViewManagement.InputPane
    .GetForCurrentView().Showing += (s, e) => { /* do something */ }; 
```

此外，没有什么可以阻止您调整 UI 以适应软键盘的高度，从而使您的 UI 保持完全可用。

```
var _KeyboardHeight = (int)e.OccludedRect.Height; 
```

我知道您希望这由操作系统处理。它不是。我对此感到抱歉。就是这样。至少我们可以解释它。

祝你好运！

# ember.js - 正确设置从模板内渲染的 Ember 部分的上下文

> ID：14265552
> 
> 赞同：1
> 
> 时间：2013-01-10T19:15:00.297
> 
> 标签：ember.js

我有以下父模板

```
{{render 'form' this}} 
```

和以下部分模板

```
<form>
   ...
</form>
<a href='#' {{action 'cancel'}}>{{buttonTitle}}</a> 
```

来自`buttonTitle`父控制器，但`cancel`在同一控制器中定义的操作没有绑定。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T06:53:12.203

我认为您想要的是`template`帮助器，它在当前上下文中呈现模板。

`render`助手渲染一个带有其关联控制器的模板。例如，如果你这样做了：

```
{{render "sidebar"}} 
```

这将`sidebar`使用`App.SidebarController`.

如果你这样做了：

```
{{render "post" post}} 
```

这将`post`使用 , 渲染模板`App.PostController`，当前`post`作为控制器的模型。

这些子控制器不会冒泡事件是一个错误，但我认为您一开始并不想要这种行为。（**更新**此错误现在已[在 master 上](https://github.com/emberjs/ember.js/commit/ee86cdd68f801444efb11bbe3e06c0ed0e917c2f)修复）

我们计划在未来几周内使命名和用法更加清晰。

# java - Java/Android 编程/EditText -> getText().toString()

> ID：14265553
> 
> 赞同：3
> 
> 时间：2013-01-10T19:15:05.320
> 
> 标签：java, android, android-edittext

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)
> [当我们有 == 运算符时，为什么要使用 equals() 方法？](https://stackoverflow.com/questions/2772763/why-equals-method-when-we-have-operator)

我在这里要做的就是将在文本字段小部件中输入的文本与给定的字符串（“abc”）进行比较，然后将按钮文本设置为“错误通过”或“通过正常”。但是，即使我输入了正确的“密码”，按钮文本也始终设置为“错误密码”。我究竟做错了什么？

```
public class FullscreenActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_start);

    final Button button = (Button) findViewById(R.id.button);
    final EditText textedit = (EditText) findViewById(R.id.textedit);

    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            if (textedit.getText().toString() == "abc") 
                button.setText("pass ok"); // doesn't work
            else 
                button.setText("wrong pass");

        }
    });
}

... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T19:16:07.337

一个问题是：

```
if (textedit.getText().toString() == "abc") 
```

应该

```
if (textedit.getText().toString().equals("abc") ) 
```

更好：

```
 if ("abc".equals(textedit.getText().toString())) 
```

`equals()`在比较字符串/对象而不是使用时总是更好地使用`==`

`==`检查引用相等性。`equals()`检查内容是否相等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T19:16:39.840

您不能将 Java/Android 中的 String 与 进行比较`==`，您必须使用`equals()`：

```
if (textedit.getText().toString().equals("abc")) 
```

您可以在以下位置找到一个很好的解释*：*如何[比较 Java 中的字符串？](https://stackoverflow.com/q/513832/1267661)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-10T19:18:18.667

试试这个，使用“等于”。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final Button button = (Button) findViewById(R.id.btnLogin);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
        EditText getpass = (EditText)findViewById(R.id.textedit);

            String pass = getpass.getText().toString();

            if(pass.equals("abc")){
                Toast toast = Toast.makeText(getApplicationContext(), "pass ok", Toast.LENGTH_SHORT);
                toast.show();

            }else{
                Toast toast = Toast.makeText(getApplicationContext(), "wrong pass", Toast.LENGTH_SHORT);
                toast.show();
            }
        }
    });

} 
```

# android - 使用 Android SharedPreferences 存储和读取 KeyPair

> ID：14265554
> 
> 赞同：0
> 
> 时间：2013-01-10T19:15:08.910
> 
> 标签：android, serialization, preferences

[我正在为java.security.KeyPair](http://docs.oracle.com/javase/1.4.2/docs/api/java/security/KeyPair.html)寻找一种序列化来存储和读取共享首选项。存储 .toString() 现在是非常有罪的，因为 KeyPair 没有构造函数。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:47:47.760

恐怕没有办法在 SharedPreferences 中存储 Serializable 对象。我建议考虑将其保存为私有文件，请参阅[Android Storage Options](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)、[FileOutputStream](http://developer.android.com/reference/java/io/FileOutputStream.html)和[ObjectOutputStream](http://developer.android.com/reference/java/io/ObjectOutputStream.html)了解更多信息。

```
public static void write(Context context, Object obj, String filename) {
    ObjectOutputStream oos = null;

    try {
        FileOutputStream file = context.openFileOutput(filename, Activity.MODE_PRIVATE);
        oos = new ObjectOutputStream(file);
        oos.writeObject(obj);
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (oos != null) {
            try {
                oos.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}

public static Object read(Context context, String filename) {
    ObjectInputStream ois = null;
    Object obj = null;

    try {
        FileInputStream file = context.getApplicationContext().openFileInput(filename);
        ois = new ObjectInputStream(file);
        obj = ois.readObject();
    } catch (FileNotFoundException e) {
       // Just let it return null.
       e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } finally {
        if (ois != null) {
            try {
                ois.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    return obj;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:07:10.713

我实际上是这样解决的：

我首先使用 Base64 创建一个字符串，我将其存储，然后从 Shared Proferences 重新创建：

```
 SharedPreferences prefs = this.getSharedPreferences(
                PATH, Context.MODE_PRIVATE);
    String key = prefs.getString(KEYPATH, "");

    if (key.equals("")) {
        // generate KeyPair
        KeyPair kp = Encrypter.generateKeyPair();
        ByteArrayOutputStream b = new ByteArrayOutputStream();
        ObjectOutputStream o;
        try {
            o = new ObjectOutputStream(b);
            o.writeObject(kp);
        } catch (IOException e) {
            e.printStackTrace();
        }

        byte[] res = b.toByteArray();
        String encodedKey = Base64.encodeToString(res, Base64.DEFAULT);

        prefs.edit().putString(KEYPATH, encodedKey).commit();

    } else {
        // read the KeyPair from internal storage
        byte[] res = Base64.decode(key, Base64.DEFAULT);
        ByteArrayInputStream bi = new ByteArrayInputStream(res);
        ObjectInputStream oi;
        try {
            oi = new ObjectInputStream(bi);
            Object obj = oi.readObject();
            Encrypter.setMyKeyPair((KeyPair) obj);
            Log.w(TAG, ((KeyPair) obj).toString());
        } catch (StreamCorruptedException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    } 
```

# jquery - 自动完成 jquery 仅显示来自对象的名称字符串

> ID：14265556
> 
> 赞同：0
> 
> 时间：2013-01-10T19:15:23.210
> 
> 标签：jquery, autocomplete

我正在开发一个自动完成 jquery 文本框，该文本框与返回对象列表的 API 对话，但我只需要从对象中建议名称列表

```
$(function() {

$( "#tags" ).autocomplete({
             source: "http://localhost:8181/jquery/api/country?term="
            });
}); 
```

如何在不更改 API 的情况下仅获取脚本中的名称，API 将对象作为 json 返回

* * *

我试过这样的事情：

```
 $(function() {  
   $("#tags").autocomplete(  
   {  
       source : function(request, response) {  
           $.ajax({  
               url : "http://localhost:8181/jquery/api/state/regex",  
               dataType : "json",  
               data : {  
                   term : request.term  
               },  
               success : function(data) {  
               var out = $.parseJSON(data);

                   response($.each(out, function(i, item) {    //ITEM HERE IS UNDEFINED!!!!!

                       return {  

                           label: item.stateName,  
                           value: item.stateName  
                       };  
                   }));  
               },  
               error: function(error) {  
                alert("hi");  
               }   
           });  

       },  
       minLength : 1  
   }); 
```

});

但它永远不会进入成功功能

# backbone.js - 如何在主干中进行自动获取

> ID：14265557
> 
> 赞同：2
> 
> 时间：2013-01-10T19:15:30.810
> 
> 标签：backbone.js

`REST API`我有一组模型，我每 10 秒取一次。（`collection.fetch()`每 10 秒有一个计时器）。

用户还可以在对话框中编辑模型，然后单击保存返回模型表。

如何防止用户在对话框中保存模型并且自动获取完全返回陈旧模型的情况，以便模型保留陈旧数据直到下一次自动获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T01:28:05.220

两个建议：

1.  使用`collection.fetch({ update: true })`- 这样模型只会被添加/删除/更改，而不是在每次获取时重新创建。

2.  当通过对话框编辑模型时，只有`save()`用户更改的特定属性，例如`model.save(changedData, { patch: true });`- 使用此补丁行为将确保您只发送刚刚更改的属性。然后您的服务器可以响应其他最近更改的属性，一切都应该没问题。

# node.js - node.js / v8 将大文件读入内存

> ID：14265558
> 
> 赞同：6
> 
> 时间：2013-01-10T19:15:31.947
> 
> 标签：node.js, v8

# 问题

如何在 node.js 下将 > 1.1 GB 的文件读入内存？

## 例子

我正在尝试使用 node.js 下的 topojson 将 > 1.1 GB GeoJSON 文件转换为 TopoJSON 格式。

```
$ topojson -o outfile.json larger_than_one_point_one_GB_input_file.json 
```

（以上适用于最大 517 MB 的文件）

导致以下错误

```
buffer.js:242
this.parent = new SlowBuffer(this.length);
                    ^
RangeError: length > kMaxLength
    at new Buffer (buffer.js:242:21)
    at Object.fs.readFileSync (fs.js:200:14)
    at /usr/local/share/npm/lib/node_modules/topojson/bin/topojson:61:26
    at Array.forEach (native)
    at Object.<anonymous> (/usr/local/share/npm/lib/node_modules/topojson/bin/topojson:60:8)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.runMain (module.js:492:10) 
```

## 到目前为止我尝试过的

*   广泛搜索
*   命令行内存设置
    *   `--max-stack-size=2147000000`
    *   `--max_executable_size=2000`
    *   `--max_new_space_size=2097152`
    *   `--max_old_space_size=2097152`
*   自定义编译最新的 v8 版本到自定义 node.js 安装
    *   他们[似乎已经取消](http://code.google.com/p/v8/source/detail?r=13298)了这个内存限制（如果我是对的，我可能不是）
    *   这不成功

## 版本

*   node.js：v0.8.15
*   v8：3.11.10.25

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:39:20.523

问题是因为 topojson 用于[`fs.readFileSync`](https://github.com/mbostock/topojson/blob/master/bin/topojson#L61)读取整个文件。这样做是打开一个大小（文件长度）的缓冲区，然后将其填满。但是节点缓冲区[具有最大](https://github.com/joyent/node/blob/master/src/node_buffer.h#L69)`0x3FFFFFFF`字节大小，或`1GB - 1 byte`. 所以你得到了那个例外。

解决方案？打开 topojson 源并将 readFileSync 替换为不会将整个文件作为一个块读取的流方法。或者，如果您感觉非常 hackish，也许可以使用更大的`kMaxLength`常量重新编译节点...

# json - 杰克逊深层嵌套对象

> ID：14265560
> 
> 赞同：1
> 
> 时间：2013-01-10T19:15:36.720
> 
> 标签：json, spring, rest, jackson

我有以下 java JPA 对象，它们在我的 spring rest 控制器方法中转换为 json，它们是

```
class User{
    @JsonManagedReference
    @OneToMany
    private Portfolio portfolio;
    .....
}

class Portfolio {
     @JsonBackReference
     @ManyToOne
 private User user;

    @JsonManagedReference
     private List<Order> orders;
     .....
}

class Order {
     @JsonBackReference
 private Portfolio portfolio;

     private User user;
} 
```

在我的应用程序中，我需要 2 项服务：

> 1.  登录：返回 User 对象，带有 Portfolio 和 List of Orders 对象，我不需要 Order.user 对象。
>     
>     
> 2.  GetOrders：返回一个订单列表，我需要 Order.user 对象。

Order.user 与父 User 对象不同。

我的问题是如何避免用户对象的无限递归问题？或者这只是一个糟糕的设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T13:56:02.567

`@JsonManagedReference`and的问题`@JsonBackReference`在于它们可以很好地处理一种非常特殊的（直接）循环引用，但并非旨在处理该狭窄窗口之外的任何内容（其中单个父对象与一个或多个子对象直接相关）。不幸的是，您的用例不在该窗口内。

所以你有两个选择：

*   手动解决方法 - 在您的服务类中，您需要`order.user`在序列化顶级`user`对象之前删除（设为 null）该属性。相反，您需要`user.portfolio.orders`在序列化`orders`.

*   框架解决方法 - 升级到 Jackson 2.0+ 并使用`@JsonIdentityInfo`. 它可以正确处理图形中的对象引用、多对多关系、深层对象树等。[一些文档和示例](http://wiki.fasterxml.com/JacksonFeatureObjectIdentity)。

如果您*可以*控制`ObjectMapper`. 如果你这样做了，那么你只需要根据你返回的对象指定一个自定义的序列化器，但是由于你在 Spring 框架中工作，我不相信你可以直接控制映射器。

我个人的建议是升级您的 Jackson 库并使用`@JsonIdentityInfo`.

# vba - 在 Office Outlook 中使用自定义表单发送名片

> ID：14265566
> 
> 赞同：0
> 
> 时间：2013-01-10T19:15:49.830
> 
> 标签：vba, outlook, outlook-2007, outlook-2010

我需要创建自定义名片和自定义表单，我想像普通名片一样将其作为附件发送，但接收者应该能够使用自定义表单打开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T15:50:41.113

您有一个 VBA 标签，但没有 VBA 解决方案。您不能将实时 VBA 发送给其他人。如果你知道怎么做，他们不会感谢你。

[http://office.microsoft.com/en-001/outlook-help/how-outlook-helps-protect-you-from-viruses-spam-and-phishing-HA010355583.aspx](http://office.microsoft.com/en-001/outlook-help/how-outlook-helps-protect-you-from-viruses-spam-and-phishing-HA010355583.aspx)

***防御宏病毒***

*宏的目的是自动化经常使用的任务。尽管某些宏只是记录您的击键或鼠标点击，但更强大的 VBA 宏是由使用可在您的计算机上运行许多命令的代码的开发人员编写的。出于这个原因，VBA 宏会带来潜在的安全风险，因为黑客可以通过文档引入恶意宏，如果打开该文档，宏就会运行并可能在您的计算机上传播病毒。在 Microsoft Office 2010 中，信任中心有助于提供针对潜在不安全宏的保护。此外，Outlook 会阻止许多可能有害的附件。*

无论如何，如果可以回答，这是一个超级用户问题。[https://superuser.com/](https://superuser.com/)

# javascript - 检测 iframe 中的特定元素何时加载

> ID：14265567
> 
> 赞同：1
> 
> 时间：2013-01-10T19:15:58.303
> 
> 标签：javascript, jquery, iframe

有没有办法让我检测到一个特定元素何时`iframe`被加载，而无需等待完整的 iframe 内容加载？

我遇到的问题是 iframe 充满了许多 SVG 按钮，这些按钮需要很长时间才能加载和处理，并且挂钩到 iframe 的加载事件会强制我要采取的操作来等待它们完全加载。我想从 iframe 中访问一个元素，并想知道是否可以检测到该元素已被加载，而无需等待 iframe 的全部内容加载。

JavaScript 或 jQuery 解决方案都是我的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:23:28.130

```
$('iframe').onload = function() {
     alert("loaded")
}) 
```

这将在加载 HTML 时触发，但在它被完全解析和呈现之前。

除此之外，您还必须轮询以查看您要查找的元素是否在页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:30:02.573

你可以使用它：

```
$("iframe").contents().find("your iframe elem").load(function(){
    alert('element loaded.');
}); 
```

# java - 从 Java 中的 URL 播放 wav 文件时出现“UnsupportedFileException”

> ID：14265572
> 
> 赞同：1
> 
> 时间：2013-01-10T19:16:14.220
> 
> 标签：java, audio, wav

我必须从 URL 播放 .wav 文件，但得到`UnsupportedFileException`.

下面是代码。

```
public class LoopSound {
    public static void main(String[] args) throws Exception {
        HostnameVerifier hv = new HostnameVerifier() {

            @Override
            public boolean verify(String urlHostName, SSLSession session) {
                System.out.println("Warning: URL Host: " + urlHostName
                        + " vs. " + session.getPeerHost());
                return true;
            }
        };
        // Now you are telling the JRE to trust any https server.
        // If you know the URL that you are connecting to then this should
        // not be a problem
        try {
            trustAllHttpsCertificates();
        } catch (Exception e) {
            System.out.println("Trustall" + e.getStackTrace());
        }
        HttpsURLConnection.setDefaultHostnameVerifier(hv);
        StringWriter sw = new StringWriter();
        PrintWriter pw = new PrintWriter(sw);
        URL url = new URL(
          "https://74.127.51.154/SiPbx/playback.php?access=subscriber&login=501%40mix&domain=mix.nms.mixnetworks.net&user=501&type=vmail&file=vm-20130109213353000125_netsapiens_com.wav&time=20130110170638&auth=de5dda39287604a88fc4b80c467e161d&submit=PLAY");
        Clip clip = AudioSystem.getClip();
        AudioInputStream ais = AudioSystem.
          getAudioInputStream( url );
        clip.open(ais);
        clip.loop(0);
        javax.swing.JOptionPane.
          showMessageDialog(null, "Close to exit!");
      }

     private static void trustAllHttpsCertificates() throws Exception {

            // Create a trust manager that does not validate certificate chains:

            javax.net.ssl.TrustManager[] trustAllCerts =

            new javax.net.ssl.TrustManager[1];

            javax.net.ssl.TrustManager tm = new TempTrustedManager();

            trustAllCerts[0] = tm;

            javax.net.ssl.SSLContext sc =

            javax.net.ssl.SSLContext.getInstance("SSL");

            sc.init(null, trustAllCerts, null);

            javax.net.ssl.HttpsURLConnection.setDefaultSSLSocketFactory(

            sc.getSocketFactory());

        }
     public static class TempTrustedManager implements
        javax.net.ssl.TrustManager, javax.net.ssl.X509TrustManager {
    public java.security.cert.X509Certificate[] getAcceptedIssuers() {
        return null;
    }

    public boolean isServerTrusted(
            java.security.cert.X509Certificate[] certs) {
        return true;
    }

    public boolean isClientTrusted(
            java.security.cert.X509Certificate[] certs) {
        return true;
    }

    public void checkServerTrusted(
            java.security.cert.X509Certificate[] certs, String authType)
            throws java.security.cert.CertificateException {
        return;
    }

    public void checkClientTrusted(
            java.security.cert.X509Certificate[] certs, String authType)
            throws java.security.cert.CertificateException {
        return;
    }
} 
```

以下是获得的异常：

```
Exception in thread "main" javax.sound.sampled.UnsupportedAudioFileException: could not get audio input stream from input URL
    at javax.sound.sampled.AudioSystem.getAudioInputStream(Unknown Source)
    at LoopSound.main(LoopSound.java:35) 
```

当我将上述 URL 放在浏览器的地址栏中时，我可以下载该文件，但我无法以编程方式播放。我该如何解决这个问题？

***编辑***

我将链接更改为

```
https://74.127.51.154/SiPbx/playback.php?access=subscriber&login=501%40mix&domain=mix.nms.mixnetworks.net&user=501&type=vmail&file=vm-20130109213353000125_netsapiens_com.wav&time=20130110170638&auth=de5dda39287604a88fc4b80c467e161d&submit=PLAY 
```

现在上面的链接放在浏览器上下载文件。

但是当我现在执行程序时得到新的异常。

```
Exception in thread "main" javax.sound.sampled.LineUnavailableException: line with format ULAW 8000.0 Hz, 8 bit, mono, 1 bytes/frame,  not supported.
    at com.sun.media.sound.DirectAudioDevice$DirectDL.implOpen(Unknown Source)
    at com.sun.media.sound.DirectAudioDevice$DirectClip.implOpen(Unknown Source)
    at com.sun.media.sound.AbstractDataLine.open(Unknown Source)
    at com.sun.media.sound.DirectAudioDevice$DirectClip.open(Unknown Source)
    at com.sun.media.sound.DirectAudioDevice$DirectClip.open(Unknown Source)
    at LoopSound.main(LoopSound.java:36) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:39:43.700

[WAV](http://en.wikipedia.org/wiki/WAV)是一种容器格式（就像 zip 文件是许多不同文件的容器），因此没有实际的 WAV 音频格式（LPCM 是最常见的）。在这种情况下，您的 WAV 包含一种名为“CCITT u-Law”的格式，该格式并未得到广泛支持（它用于 Cisco VoIP 电话）。我还没有看到可以读取它的 Java 库，但也许知道要查找的内容会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:50:30.907

下面的链接帮助了我，我现在可以播放 wav 文件了。

[如何播放格式为 CCITT u-Law 的 wav 文件](https://groups.google.com/forum/?fromgroups=#!topic/comp.lang.java.gui/ObHGnLs_YU0)

## 编辑

根据 Millimoose 的评论，我正在粘贴上面链接中的一些代码以帮助其他人。

我正在更改`CCITT U-Law to PCM_SIGNED`确切的 wav 格式的 wav 文件的格式。

```
URL url = new URL(
                          "https://sssss/xxxxx/playback.php?access=subscriber&login=501%40mix&domain=mix.nms.mixnetworks.net&user=501&type=vmail&file=vm-20130109213243000082_mixnetworks_net.wav&time=20130110170638&auth=c43ff32546e126be9b895bbf225b2e75&submit=PLAY");
                 AudioInputStream fis =
                  AudioSystem.getAudioInputStream(url);
                 System.out.println("File AudioFormat: " + fis.getFormat());
                 AudioInputStream ais = AudioSystem.getAudioInputStream(
                  AudioFormat.Encoding.PCM_SIGNED,fis);
                 AudioFormat af = ais.getFormat();
                 System.out.println("AudioFormat: " + af.toString());

                 int frameRate = (int)af.getFrameRate();
                 System.out.println("Frame Rate: " + frameRate);
                 int frameSize = af.getFrameSize();
                 System.out.println("Frame Size: " + frameSize);

                 SourceDataLine line = AudioSystem.getSourceDataLine(af);
                 line.addLineListener(new MyLineListener());

                 line.open(af);
                 int bufSize = line.getBufferSize();
                 System.out.println("Buffer Size: " + bufSize);

                 line.start();

                 byte[] data = new byte[bufSize];
                 int bytesRead;

                 while ((bytesRead = ais.read(data,0,data.length)) != -1)
                     line.write(data,0,bytesRead);

                 line.drain();
                 line.stop();
                 line.close(); 
```

# mysql - 如何查找不在表格中的项目

> ID：14265576
> 
> 赞同：1
> 
> 时间：2013-01-10T19:16:26.347
> 
> 标签：mysql

我的数据库有，

```
mysql> select * from peeps;
+-------+
| name  |
+-------+
| tom   |
| dick  |
| harry |
+-------+ 
```

我想编写一个 sql 语句来返回不在该表中的用户的结果集。

```
sql ????  where name in ( 'dave', 'tom') 
```

我想要一个返回“dave”的结果集。答案不能返回“哈利”。我不热衷于创建一个新的临时表，这可以不在一个语句中。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:27:46.727

像这样的东西对你有用吗？它`dave`按要求返回。

```
SELECT a.name
FROM
    (SELECT 'dave' AS name
    UNION ALL
    SELECT 'tom' AS name) a
LEFT JOIN peeps b ON b.name = a.name
WHERE b.name IS NULL 
```

**结果**

```
| 姓名 |
--------
| 戴夫 |
```

## [SQL小提琴](http://sqlfiddle.com/#!2/90186/1)

# json - 从 jQuery+Ajax 调用 .Net Web 服务

> ID：14265579
> 
> 赞同：0
> 
> 时间：2013-01-10T19:16:39.943
> 
> 标签：json, web-services, asmx

我正在尝试使用 jQuery+Ajax 调用自制的 vb.net Web 服务，但我正在努力解决细节问题。

这是一个作为 Web 方法公开的小函数：

```
<WebMethod()> <ScriptMethod(ResponseFormat:=ResponseFormat.Xml, UseHttpGet:=True)> _
Public Function GetAllVotes() As XmlDocument

    Dim theVotes = getVotes()
    Dim strResult As String = theVotes.XMLSerialize

    Dim doc As XmlDocument = New XmlDocument()
    doc.LoadXml(strResult)
    Return doc

End Function 
```

在查看网络后，我添加了 ScriptMethod 属性，因为我正在返回 XML，但如果是这种情况，请随时告诉我我不需要它们。

然后，在客户端，这是代码：

```
function getVotes() {
$.support.cors = true;

$.ajax({
  type: "GET",
  contentType: "application/json",
  url: "http://nhrd635:8008/votingmanager.asmx/GetAllVotes",
  data: {},
  dataType: "xml text jsonp",
  success: function(msg) {
      // Hide the fake progress indicator graphic.
      // Insert the returned HTML into the <div>.
      $('#myPlaceHolder').html(msg);
    },
   error: function(msg) {
      $('#myPlaceHolder').html(msg);
        // alert(msg);
   }

});
} 
```

我已经尝试了许多.. 这段代码的许多变体，使用 post 或 get，更改内容类型，使用或不使用 charset=utf-8。数据上有和没有双引号：{}。

我使用 firebug 来跟踪我的请求的输出。只有当我将 dataType 设置为 jsonp 时，我才会得到结果，但在所有情况下，代码都会以“错误”函数结束，即使状态给出 200 OK。但我知道将其设置为 jsonp 是错误的，因为这会使我的 xml 被视为实际的 javascript ...

我从一个关于 encosia 的人那里读到了非常有用的博客文章。（示例：[http](http://encosia.com/3-mistakes-to-avoid-when-using-jquery-with-aspnet-ajax/) ://encosia.com/3-mistakes-to-avoid-when-using-jquery-with-aspnet-ajax/ ）

但即使按照他的例子，我也无法获得适当的回报。

我做错了什么很明显吗？是我返回一个 xml 字符串而不是一个 json 序列化字符串的事实吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:37:45.540

随着对 Stack Overflow 的更多阅读以及来自 Encosia 的 Dave Ward 的帮助，我已经设法解决了我的问题。我想我应该在这里发布我的最终解决方案，以防将来对某人有所帮助。

首先，Web 服务是一种不好的方法，我使用了[HttpHandler 解决方案](http://encosia.com/use-asp-nets-httphandler-to-bridge-the-cross-domain-gap/)，正如 Dave Ward 在回答我最初的问题时所建议的那样。

返回 XML 也是一个糟糕的选择，我并没有真正意识到这一点。我在我的项目中添加了对 JSon.net 的引用，并使用它将我的对象转换为 Json 字符串。

[正如Dave 的博客文章](http://encosia.com/asp-net-web-services-mistake-manual-json-serialization/)中所建议的那样，我真的很想坚持使用“.net only”来转换为 json 字符串，但不知何故，我努力学习如何指导 .net 自动转换为 Json，就像 Dave 的示例一样，所以我拿了一个使用 Json.net 轻松“让它工作”

然后，在我的 HttpHandler 中，我让响应字符串按照 StackOverflow 的这篇文章中的说明进行操作：

[https://stackoverflow.com/a/3703221/1060133](https://stackoverflow.com/a/3703221/1060133)

就我而言，它是：

```
context.Response.Write(String.Format("{0}({1});", context.Request("callback"), jsonVotes)) 
```

jquery 调用也使用了上述帖子中的说明。

有趣的是，即使在无参数调用中，您也必须像这样发送空数据：

```
$.getJSON('http://url/httpHandler.ashx?callback=?', {}, 
          function(data) {
          alert(data);
          }
); 
```

祝你好运...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T07:16:08.360

我认为您在这里遇到的大部分问题可能源于跨域请求（甚至在同一台机器上的不同端口上发出请求）。这就是为什么当您切换到 JSONP 时能够看到它的工作原理。不幸的是，ASMX“ScriptServices”不支持 JSONP，因此您的 WebMethod 返回的数据不是 jQuery 注入的 JSONP 回调函数的有效参数。

如果可能的话，最好的解决方案是让服务在与调用它的页面相同的域上运行。跨域问题有多种解决方案，但没有一个像对发出请求的页面所在的同一域的简单 XHR 请求那样广泛兼容/可靠。

如果您不能这样做，请考虑为提供votingmanager.asmx 的站点启用CORS 支持。这在大多数版本的 IE 中不起作用，但允许在其他浏览器中进行跨域请求。有关如何在此处执行此操作的更多信息：http: [//encosia.com/using-cors-to-access-asp-net-services-across-domains/](http://encosia.com/using-cors-to-access-asp-net-services-across-domains/)

切线，如果可能的话，我会避免额外的 XML 序列化层。如果 getVotes() 返回类似 List 的内容，请将其用作返回类型并让 ASP.NET 自动将集合序列化为 JSON，然后 jQuery 会自动将其转换为成功处理程序中的 JavaScript 数组。更多关于这里的信息：http: [//encosia.com/asp-net-web-services-mistake-manual-json-serialization/](http://encosia.com/asp-net-web-services-mistake-manual-json-serialization/)

# c++ - 使用字符串分隔符（标准 C++）在 C++ 中解析（拆分）字符串

> ID：14265581
> 
> 赞同：538
> 
> 时间：2013-01-10T19:16:43.900
> 
> 标签：c++, parsing, split, token, tokenize

我正在使用以下内容在 C++ 中解析一个字符串：

```
using namespace std;

string parsed,input="text to be parsed";
stringstream input_stringstream(input);

if (getline(input_stringstream,parsed,' '))
{
     // do some processing.
} 
```

使用单个字符定界符进行解析很好。但是，如果我想使用字符串作为分隔符怎么办。

示例：我想拆分：

```
scott>=tiger 
```

用`>=`作为分隔符，这样我就可以得到斯科特和老虎。

* * *

## 回答 #1

> 赞同：829
> 
> 时间：2013-01-10T19:53:17.483

您可以使用该[`std::string::find()`](http://en.cppreference.com/w/cpp/string/basic_string/find)函数查找字符串分隔符的位置，然后用于[`std::string::substr()`](http://en.cppreference.com/w/cpp/string/basic_string/substr)获取令牌。

例子：

```
std::string s = "scott>=tiger";
std::string delimiter = ">=";
std::string token = s.substr(0, s.find(delimiter)); // token is "scott" 
```

*   该`find(const string& str, size_t pos = 0)`函数返回字符串中第一次出现的位置`str`，或者[`npos`](http://en.cppreference.com/w/cpp/string/basic_string/npos)如果未找到该字符串。

*   该`substr(size_t pos = 0, size_t n = npos)`函数返回对象的子字符串，从 position`pos`和 length开始`npos`。

* * *

如果您有多个分隔符，则在提取一个标记后，可以将其删除（包括分隔符）以继续进行后续提取（如果要保留原始字符串，只需使用`s = s.substr(pos + delimiter.length());`）：

```
s.erase(0, s.find(delimiter) + delimiter.length()); 
```

这样您就可以轻松地循环获取每个令牌。

## 完整示例

```
std::string s = "scott>=tiger>=mushroom";
std::string delimiter = ">=";

size_t pos = 0;
std::string token;
while ((pos = s.find(delimiter)) != std::string::npos) {
    token = s.substr(0, pos);
    std::cout << token << std::endl;
    s.erase(0, pos + delimiter.length());
}
std::cout << s << std::endl; 
```

输出：

```
scott
tiger
mushroom 
```

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2013-01-10T21:20:22.690

此方法`std::string::find`通过记住前一个子字符串标记的开头和结尾来使用而不改变原始字符串。

```
#include <iostream>
#include <string>

int main()
{
    std::string s = "scott>=tiger";
    std::string delim = ">=";

    auto start = 0U;
    auto end = s.find(delim);
    while (end != std::string::npos)
    {
        std::cout << s.substr(start, end - start) << std::endl;
        start = end + delim.length();
        end = s.find(delim, start);
    }

    std::cout << s.substr(start, end);
} 
```

* * *

## 回答 #3

> 赞同：91
> 
> 时间：2017-10-25T11:54:31.377

# **对于字符串分隔符**

根据*字符串分隔符*拆分字符串。如`"adsf-+qwret-+nvfkbdsj-+orthdfjgh-+dfjrleih"`根据字符串分隔符分割字符串`"-+"`，输出为`{"adsf", "qwret", "nvfkbdsj", "orthdfjgh", "dfjrleih"}`

```
#include <iostream>
#include <sstream>
#include <vector>

using namespace std;

// for string delimiter
vector<string> split (string s, string delimiter) {
    size_t pos_start = 0, pos_end, delim_len = delimiter.length();
    string token;
    vector<string> res;

    while ((pos_end = s.find (delimiter, pos_start)) != string::npos) {
        token = s.substr (pos_start, pos_end - pos_start);
        pos_start = pos_end + delim_len;
        res.push_back (token);
    }

    res.push_back (s.substr (pos_start));
    return res;
}

int main() {
    string str = "adsf-+qwret-+nvfkbdsj-+orthdfjgh-+dfjrleih";
    string delimiter = "-+";
    vector<string> v = split (str, delimiter);

    for (auto i : v) cout << i << endl;

    return 0;
} 
```

**输出**

```
广告
qwret
nvfkbdsj
正值
dfjrleih

```

# **对于单个字符分隔符**

根据字符分隔符拆分字符串。比如`"adsf+qwer+poui+fdgh"`用分隔符分割字符串`"+"`会输出`{"adsf", "qwer", "poui", "fdg"h}`

```
#include <iostream>
#include <sstream>
#include <vector>

using namespace std;

vector<string> split (const string &s, char delim) {
    vector<string> result;
    stringstream ss (s);
    string item;

    while (getline (ss, item, delim)) {
        result.push_back (item);
    }

    return result;
}

int main() {
    string str = "adsf+qwer+poui+fdgh";
    vector<string> v = split (str, '+');

    for (auto i : v) cout << i << endl;

    return 0;
} 
```

**输出**

```
广告
qwer
呸呸呸
fdgh

```

* * *

## 回答 #4

> 赞同：61
> 
> 时间：2016-05-26T07:25:41.013

您可以使用 next 函数来拆分字符串：

```
vector<string> split(const string& str, const string& delim)
{
    vector<string> tokens;
    size_t prev = 0, pos = 0;
    do
    {
        pos = str.find(delim, prev);
        if (pos == string::npos) pos = str.length();
        string token = str.substr(prev, pos-prev);
        if (!token.empty()) tokens.push_back(token);
        prev = pos + delim.length();
    }
    while (pos < str.length() && prev < str.length());
    return tokens;
} 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2020-11-18T03:46:15.923

您也可以为此使用正则表达式：

```
std::vector<std::string> split(const std::string str, const std::string regex_str)
{
    std::regex regexz(regex_str);
    std::vector<std::string> list(std::sregex_token_iterator(str.begin(), str.end(), regexz, -1),
                                  std::sregex_token_iterator());
    return list;
} 
```

这相当于：

```
std::vector<std::string> split(const std::string str, const std::string regex_str)
{
    std::sregex_token_iterator token_iter(str.begin(), str.end(), regexz, -1);
    std::sregex_token_iterator end;
    std::vector<std::string> list;
    while (token_iter != end)
    {
        list.emplace_back(*token_iter++);
    }
    return list;
} 
```

并像这样使用它：

```
#include <iostream>
#include <string>
#include <regex>

std::vector<std::string> split(const std::string str, const std::string regex_str)
{   // a yet more concise form!
    return { std::sregex_token_iterator(str.begin(), str.end(), std::regex(regex_str), -1), std::sregex_token_iterator() };
}

int main()
{
    std::string input_str = "lets split this";
    std::string regex_str = " "; 
    auto tokens = split(input_str, regex_str);
    for (auto& item: tokens)
    {
        std::cout<<item <<std::endl;
    }
} 
```

在线玩！[http://cpp.sh/9sumb](http://cpp.sh/9sumb)

您可以像平常一样简单地使用子字符串、字符等，或者使用实际的正则表达式来进行拆分。
它也简洁和 C++11！

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2021-06-24T19:24:08.650

使用 C++20 的一种方法：

```
#include <iostream>
#include <ranges>
#include <string_view>

int main()
{
    std::string hello = "text to be parsed";
    auto split = hello
        | std::ranges::views::split(' ')
        | std::ranges::views::transform([](auto&& str) { return std::string_view(&*str.begin(), std::ranges::distance(str)); });

    for (auto&& word : split)
    {
        std::cout << word << std::endl;
    }
} 
```

请参阅：
[https ://stackoverflow.com/a/48403210/10771848](https://stackoverflow.com/a/48403210/10771848)
[https://en.cppreference.com/w/cpp/ranges/split_view](https://en.cppreference.com/w/cpp/ranges/split_view)

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2017-06-12T08:54:29.097

此代码从文本中拆分行，并将每个人添加到向量中。

```
vector<string> split(char *phrase, string delimiter){
    vector<string> list;
    string s = string(phrase);
    size_t pos = 0;
    string token;
    while ((pos = s.find(delimiter)) != string::npos) {
        token = s.substr(0, pos);
        list.push_back(token);
        s.erase(0, pos + delimiter.length());
    }
    list.push_back(s);
    return list;
} 
```

调用者：

```
vector<string> listFilesMax = split(buffer, "\n"); 
```

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2013-01-10T19:18:35.223

[strtok](http://www.cplusplus.com/reference/cstring/strtok/)允许您传入多个字符作为分隔符。我敢打赌，如果您传入 ">=" 您的示例字符串将被正确拆分（即使 > 和 = 被视为单独的分隔符）。

编辑如果您不想使用`c_str()`从字符串转换为 char*，您可以使用[substr](http://www.cplusplus.com/reference/string/string/substr/)和[find_first_of](http://www.cplusplus.com/reference/string/string/find_first_of/)进行标记化。

```
string token, mystring("scott>=tiger");
while(token != mystring){
  token = mystring.substr(0,mystring.find_first_of(">="));
  mystring = mystring.substr(mystring.find_first_of(">=") + 1);
  printf("%s ",token.c_str());
} 
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2019-08-04T13:17:00.263

答案已经存在，但是选择答案使用擦除功能非常昂贵，想想一些非常大的字符串（以 MB 为单位）。因此我使用以下功能。

```
vector<string> split(const string& i_str, const string& i_delim)
{
    vector<string> result;

    size_t found = i_str.find(i_delim);
    size_t startIndex = 0;

    while(found != string::npos)
    {
        result.push_back(string(i_str.begin()+startIndex, i_str.begin()+found));
        startIndex = found + i_delim.size();
        found = i_str.find(i_delim, startIndex);
    }
    if(startIndex != i_str.size())
        result.push_back(string(i_str.begin()+startIndex, i_str.end()));
    return result;      
} 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-01-10T19:40:28.920

我会用`boost::tokenizer`. 这是解释如何制作适当的标记器功能的文档：http: [//www.boost.org/doc/libs/1_52_0/libs/tokenizer/tokenizerfunction.htm](http://www.boost.org/doc/libs/1_52_0/libs/tokenizer/tokenizerfunction.htm)

这是适合您的情况的一种。

```
struct my_tokenizer_func
{
    template<typename It>
    bool operator()(It& next, It end, std::string & tok)
    {
        if (next == end)
            return false;
        char const * del = ">=";
        auto pos = std::search(next, end, del, del + 2);
        tok.assign(next, pos);
        next = pos;
        if (next != end)
            std::advance(next, 2);
        return true;
    }

    void reset() {}
};

int main()
{
    std::string to_be_parsed = "1) one>=2) two>=3) three>=4) four";
    for (auto i : boost::tokenizer<my_tokenizer_func>(to_be_parsed))
        std::cout << i << '\n';
} 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2017-05-24T10:22:38.533

这是我对此的看法。它处理边缘情况并采用可选参数从结果中删除空条目。

```
bool endsWith(const std::string& s, const std::string& suffix)
{
    return s.size() >= suffix.size() &&
           s.substr(s.size() - suffix.size()) == suffix;
}

std::vector<std::string> split(const std::string& s, const std::string& delimiter, const bool& removeEmptyEntries = false)
{
    std::vector<std::string> tokens;

    for (size_t start = 0, end; start < s.length(); start = end + delimiter.length())
    {
         size_t position = s.find(delimiter, start);
         end = position != string::npos ? position : s.length();

         std::string token = s.substr(start, end - start);
         if (!removeEmptyEntries || !token.empty())
         {
             tokens.push_back(token);
         }
    }

    if (!removeEmptyEntries &&
        (s.empty() || endsWith(s, delimiter)))
    {
        tokens.push_back("");
    }

    return tokens;
} 
```

例子

```
split("a-b-c", "-"); // [3]("a","b","c")

split("a--c", "-"); // [3]("a","","c")

split("-b-", "-"); // [3]("","b","")

split("--c--", "-"); // [5]("","","c","","")

split("--c--", "-", true); // [1]("c")

split("a", "-"); // [1]("a")

split("", "-"); // [1]("")

split("", "-", true); // [0]() 
```

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2019-11-06T22:00:16.320

这对于字符串（或单个字符）分隔符应该非常有效。不要忘记包括`#include <sstream>`.

```
std::string input = "Alfa=,+Bravo=,+Charlie=,+Delta";
std::string delimiter = "=,+"; 
std::istringstream ss(input);
std::string token;
std::string::iterator it;

while(std::getline(ss, token, *(it = delimiter.begin()))) {
    std::cout << token << std::endl; // Token is extracted using '='
    it++;
    // Skip the rest of delimiter if exists ",+"
    while(it != delimiter.end() and ss.peek() == *(it)) { 
        it++; ss.get(); 
    }
} 
```

第一个 while 循环使用字符串分隔符的第一个字符提取标记。第二个 while 循环跳过分隔符的其余部分并在下一个标记的开头停止。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-07-11T14:48:59.320

这是一个完整的方法，可以在任何分隔符上拆分字符串并返回切碎的字符串的向量。

这是对 ryanbwork 答案的改编。`if(token != mystring)`但是，如果您的字符串中有重复元素，他的检查：会给出错误的结果。这是我对这个问题的解决方案。

```
vector<string> Split(string mystring, string delimiter)
{
    vector<string> subStringList;
    string token;
    while (true)
    {
        size_t findfirst = mystring.find_first_of(delimiter);
        if (findfirst == string::npos) //find_first_of returns npos if it couldn't find the delimiter anymore
        {
            subStringList.push_back(mystring); //push back the final piece of mystring
            return subStringList;
        }
        token = mystring.substr(0, mystring.find_first_of(delimiter));
        mystring = mystring.substr(mystring.find_first_of(delimiter) + 1);
        subStringList.push_back(token);
    }
    return subStringList;
} 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2020-09-07T09:00:58.753

一个非常简单/天真的方法：

```
vector<string> words_seperate(string s){
    vector<string> ans;
    string w="";
    for(auto i:s){
        if(i==' '){
           ans.push_back(w);
           w="";
        }
        else{
           w+=i;
        }
    }
    ans.push_back(w);
    return ans;
} 
```

或者您可以使用 boost 库拆分功能：

```
vector<string> result; 
boost::split(result, input, boost::is_any_of("\t")); 
```

或者你可以试试 TOKEN 或 strtok：

```
char str[] = "DELIMIT-ME-C++"; 
char *token = strtok(str, "-"); 
while (token) 
{ 
    cout<<token; 
    token = strtok(NULL, "-"); 
} 
```

或者你可以这样做：

```
char split_with=' ';
vector<string> words;
string token; 
stringstream ss(our_string);
while(getline(ss , token , split_with)) words.push_back(token); 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2020-10-10T03:34:12.893

由于这是最受好评的 Stack Overflow Google 搜索结果`C++ split string`或类似结果，因此我将发布一个完整的、复制/粘贴可运行示例，显示这两种方法。

`splitString`用途`stringstream`（在大多数情况下可能是更好、更容易的选择）

`splitString2`使用`find`和`substr`（更手动的方法）

```
// SplitString.cpp

#include <iostream>
#include <vector>
#include <string>
#include <sstream>

// function prototypes
std::vector<std::string> splitString(const std::string& str, char delim);
std::vector<std::string> splitString2(const std::string& str, char delim);
std::string getSubstring(const std::string& str, int leftIdx, int rightIdx);

int main(void)
{
  // Test cases - all will pass

  std::string str = "ab,cd,ef";
  //std::string str = "abcdef";
  //std::string str = "";
  //std::string str = ",cd,ef";
  //std::string str = "ab,cd,";   // behavior of splitString and splitString2 is different for this final case only, if this case matters to you choose which one you need as applicable

  std::vector<std::string> tokens = splitString(str, ',');

  std::cout << "tokens: " << "\n";

  if (tokens.empty())
  {
    std::cout << "(tokens is empty)" << "\n";
  }
  else
  {
    for (auto& token : tokens)
    {
      if (token == "") std::cout << "(empty string)" << "\n";
      else std::cout << token << "\n";
    }
  }

  return 0;
}

std::vector<std::string> splitString(const std::string& str, char delim)
{
  std::vector<std::string> tokens;

  if (str == "") return tokens;

  std::string currentToken;

  std::stringstream ss(str);

  while (std::getline(ss, currentToken, delim))
  {
    tokens.push_back(currentToken);
  }

  return tokens;
}

std::vector<std::string> splitString2(const std::string& str, char delim)
{
  std::vector<std::string> tokens;

  if (str == "") return tokens;

  int leftIdx = 0;

  int delimIdx = str.find(delim);

  int rightIdx;

  while (delimIdx != std::string::npos)
  {
    rightIdx = delimIdx - 1;

    std::string token = getSubstring(str, leftIdx, rightIdx);
    tokens.push_back(token);

    // prep for next time around
    leftIdx = delimIdx + 1;

    delimIdx = str.find(delim, delimIdx + 1);
  }

  rightIdx = str.size() - 1;

  std::string token = getSubstring(str, leftIdx, rightIdx);
  tokens.push_back(token);

  return tokens;
}

std::string getSubstring(const std::string& str, int leftIdx, int rightIdx)
{
  return str.substr(leftIdx, rightIdx - leftIdx + 1);
} 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2021-03-03T12:25:43.797

另一个答案：这里我使用的是`find_first_not_of`字符串函数，它**返回**与 delim 中指定的任何字符**都不**匹配的第一个字符的位置。

```
size_t find_first_not_of(const string& delim, size_t pos = 0) const noexcept; 
```

例子：

```
int main()
{
    size_t start = 0, end = 0;
    std::string str = "scott>=tiger>=cat";
    std::string delim = ">=";
    while ((start = str.find_first_not_of(delim, end)) != std::string::npos)
    {
        end = str.find(delim, start); // finds the 'first' occurance from the 'start'
        std::cout << str.substr(start, end - start)<<std::endl; // extract substring
    }
    return 0;
} 
```

输出：

```
 scott
    tiger
    cat 
```

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2021-03-08T18:52:42.717

我做这个解决方案。这很简单，所有打印/值都在循环中（循环后无需检查）。

```
#include <iostream>
#include <string>

using std::cout;
using std::string;

int main() {
    string s = "it-+is-+working!";
    string d = "-+";

    int firstFindI = 0;
    int secendFindI = s.find(d, 0); // find if have any at all
    while (secendFindI != string::npos)
    {
        secendFindI = s.find(d, firstFindI);
        cout << s.substr(firstFindI, secendFindI - firstFindI) << "\n"; // print sliced part
        firstFindI = secendFindI + d.size(); // add to the search index
    }

} 
```

此解决方案的唯一缺点是在开始时进行两次搜索。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2021-08-09T22:12:10.107

这与其他答案类似，但它使用的是`string_view`. 所以这些只是原始字符串的视图。类似于 c++20 示例。虽然这将是一个 c++17 示例。（编辑以跳过空匹配）

```
#include <algorithm>
#include <iostream>
#include <string_view>
#include <vector>
std::vector<std::string_view> split(std::string_view buffer,
                                    const std::string_view delimeter = " ") {
  std::vector<std::string_view> ret{};
  std::decay_t<decltype(std::string_view::npos)> pos{};
  while ((pos = buffer.find(delimeter)) != std::string_view::npos) {
    const auto match = buffer.substr(0, pos);
    if (!match.empty()) ret.push_back(match);
    buffer = buffer.substr(pos + delimeter.size());
  }
  if (!buffer.empty()) ret.push_back(buffer);
  return ret;
}
int main() {
  const auto split_values = split("1 2 3 4 5 6 7 8 9     10 ");
  std::for_each(split_values.begin(), split_values.end(),
                [](const auto& str) { std::cout << str << '\n'; });
  return split_values.size();
} 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2021-09-16T16:16:34.513

以防万一将来有人想要[Vincenzo Pii](https://stackoverflow.com/users/528313/vincenzo-pii)答案的开箱即用功能

```
#include <vector>
#include <string>

std::vector<std::string> SplitString(
    std::string str,
    std::string delimeter)
{
    std::vector<std::string> splittedStrings = {};
    size_t pos = 0;

    while ((pos = str.find(delimeter)) != std::string::npos)
    {
        std::string token = str.substr(0, pos);
        if (token.length() > 0)
            splittedStrings.push_back(token);
        str.erase(0, pos + delimeter.length());
    }

    if (str.length() > 0)
        splittedStrings.push_back(str);
    return splittedStrings;
} 
```

我还修复了一些错误，如果字符串的开头或结尾有分隔符，该函数不会返回空字符串

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-05-23T09:37:51.357

如果您不想修改字符串（如 Vincenzo Pii 的回答）**并且**还想输出最后一个标记，您可能需要使用这种方法：

```
inline std::vector<std::string> splitString( const std::string &s, const std::string &delimiter ){
    std::vector<std::string> ret;
    size_t start = 0;
    size_t end = 0;
    size_t len = 0;
    std::string token;
    do{ end = s.find(delimiter,start); 
        len = end - start;
        token = s.substr(start, len);
        ret.emplace_back( token );
        start += len + delimiter.length();
        std::cout << token << std::endl;
    }while ( end != std::string::npos );
    return ret;
} 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-05-27T17:34:43.557

```
std::vector<std::string> parse(std::string str,std::string delim){
    std::vector<std::string> tokens;
    char *str_c = strdup(str.c_str()); 
    char* token = NULL;

    token = strtok(str_c, delim.c_str()); 
    while (token != NULL) { 
        tokens.push_back(std::string(token));  
        token = strtok(NULL, delim.c_str()); 
    }

    delete[] str_c;

    return tokens;
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2021-06-08T04:38:14.423

这是一个简洁的拆分函数。我决定让背靠背分隔符作为空字符串返回，但您可以轻松检查子字符串是否为空，如果是则不将其添加到向量中。

```
#include <vector>
#include <string>
using namespace std;

vector<string> split(string to_split, string delimiter) {
    size_t pos = 0;
    vector<string> matches{};
    do {
        pos = to_split.find(delimiter);
        int change_end;
        if (pos == string::npos) {
            pos = to_split.length() - 1;
            change_end = 1;
        }
        else {
            change_end = 0;
        }
        matches.push_back(to_split.substr(0, pos+change_end));

        to_split.erase(0, pos+1);

    }
    while (!to_split.empty());
    return matches;

} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-01-29T08:15:15.383

```
#include<iostream>
#include<algorithm>
using namespace std;

int split_count(string str,char delimit){
return count(str.begin(),str.end(),delimit);
}

void split(string str,char delimit,string res[]){
int a=0,i=0;
while(a<str.size()){
res[i]=str.substr(a,str.find(delimit));
a+=res[i].size()+1;
i++;
}
}

int main(){

string a="abc.xyz.mno.def";
int x=split_count(a,'.')+1;
string res[x];
split(a,'.',res);

for(int i=0;i<x;i++)
cout<<res[i]<<endl;
  return 0;
} 
```

PS：仅当拆分后字符串的长度相等时才有效

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-03-13T17:19:02.967

功能：

```
std::vector<std::string> WSJCppCore::split(const std::string& sWhat, const std::string& sDelim) {
    std::vector<std::string> vRet;
    size_t nPos = 0;
    size_t nLen = sWhat.length();
    size_t nDelimLen = sDelim.length();
    while (nPos < nLen) {
        std::size_t nFoundPos = sWhat.find(sDelim, nPos);
        if (nFoundPos != std::string::npos) {
            std::string sToken = sWhat.substr(nPos, nFoundPos - nPos);
            vRet.push_back(sToken);
            nPos = nFoundPos + nDelimLen;
            if (nFoundPos + nDelimLen == nLen) { // last delimiter
                vRet.push_back("");
            }
        } else {
            std::string sToken = sWhat.substr(nPos, nLen - nPos);
            vRet.push_back(sToken);
            break;
        }
    }
    return vRet;
} 
```

单元测试：

```
bool UnitTestSplit::run() {
bool bTestSuccess = true;

    struct LTest {
        LTest(
            const std::string &sStr,
            const std::string &sDelim,
            const std::vector<std::string> &vExpectedVector
        ) {
            this->sStr = sStr;
            this->sDelim = sDelim;
            this->vExpectedVector = vExpectedVector;
        };
        std::string sStr;
        std::string sDelim;
        std::vector<std::string> vExpectedVector;
    };
    std::vector<LTest> tests;
    tests.push_back(LTest("1 2 3 4 5", " ", {"1", "2", "3", "4", "5"}));
    tests.push_back(LTest("|1f|2п|3%^|44354|5kdasjfdre|2", "|", {"", "1f", "2п", "3%^", "44354", "5kdasjfdre", "2"}));
    tests.push_back(LTest("|1f|2п|3%^|44354|5kdasjfdre|", "|", {"", "1f", "2п", "3%^", "44354", "5kdasjfdre", ""}));
    tests.push_back(LTest("some1 => some2 => some3", "=>", {"some1 ", " some2 ", " some3"}));
    tests.push_back(LTest("some1 => some2 => some3 =>", "=>", {"some1 ", " some2 ", " some3 ", ""}));

    for (int i = 0; i < tests.size(); i++) {
        LTest test = tests[i];
        std::string sPrefix = "test" + std::to_string(i) + "(\"" + test.sStr + "\")";
        std::vector<std::string> vSplitted = WSJCppCore::split(test.sStr, test.sDelim);
        compareN(bTestSuccess, sPrefix + ": size", vSplitted.size(), test.vExpectedVector.size());
        int nMin = std::min(vSplitted.size(), test.vExpectedVector.size());
        for (int n = 0; n < nMin; n++) {
            compareS(bTestSuccess, sPrefix + ", element: " + std::to_string(n), vSplitted[n], test.vExpectedVector[n]);
        }
    }

    return bTestSuccess;
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-11-12T15:38:14.970

作为奖励，这是一个易于使用的拆分函数和宏的代码示例，您可以在其中选择容器类型：

```
#include <iostream>
#include <vector>
#include <string>

#define split(str, delim, type) (split_fn<type<std::string>>(str, delim))

template <typename Container>
Container split_fn(const std::string& str, char delim = ' ') {
    Container cont{};
    std::size_t current, previous = 0;
    current = str.find(delim);
    while (current != std::string::npos) {
        cont.push_back(str.substr(previous, current - previous));
        previous = current + 1;
        current = str.find(delim, previous);
    }
    cont.push_back(str.substr(previous, current - previous));

    return cont;
}

int main() {

    auto test = std::string{"This is a great test"};
    auto res = split(test, ' ', std::vector);

    for(auto &i : res) {
        std::cout << i << ", "; // "this", "is", "a", "great", "test"
    }

    return 0;
} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-02-24T18:35:10.213

```
template<typename C, typename T>
auto insert_in_container(C& c, T&& t) -> decltype(c.push_back(std::forward<T>(t)), void()) {
    c.push_back(std::forward<T>(t));
}
template<typename C, typename T>
auto insert_in_container(C& c, T&& t) -> decltype(c.insert(std::forward<T>(t)), void()) {
    c.insert(std::forward<T>(t));
}
template<typename Container>
Container splitR(const std::string& input, const std::string& delims) {
    Container out;
    size_t delims_len = delims.size();
    auto begIdx = 0u;
    auto endIdx = input.find(delims, begIdx);
    if (endIdx == std::string::npos && input.size() != 0u) {
        insert_in_container(out, input);
    }
    else {
        size_t w = 0;
        while (endIdx != std::string::npos) {
            w = endIdx - begIdx;
            if (w != 0) insert_in_container(out, input.substr(begIdx, w));
            begIdx = endIdx + delims_len;
            endIdx = input.find(delims, begIdx);
        }
        w = input.length() - begIdx;
        if (w != 0) insert_in_container(out, input.substr(begIdx, w));
    }
    return out;
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-05-08T00:58:12.093

我使用指针算术。如果您使用 char delim 来满足字符串分隔符的 inner while ，则只需简单地删除 inner while 。我希望它是正确的。如果您发现任何错误或改进，请发表评论。

```
std::vector<std::string> split(std::string s, std::string delim)
{
    char *p = &s[0];
    char *d = &delim[0];
    std::vector<std::string> res = {""};

    do
    {
        bool is_delim = true;
        char *pp = p;
        char *dd = d;
        while (*dd && is_delim == true)
            if (*pp++ != *dd++)
                is_delim = false;

        if (is_delim)
        {
            p = pp - 1;
            res.push_back("");
        }
        else
            *(res.rbegin()) += *p;
    } while (*p++);

    return res;
} 
```

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2021-02-10T12:44:18.093

从 C++11 开始，它可以这样完成：

```
std::vector<std::string> splitString(const std::string& str,
                                     const std::regex& regex)
{
  return {std::sregex_token_iterator{str.begin(), str.end(), regex, -1}, 
          std::sregex_token_iterator() };
} 

// usually we have a predefined set of regular expressions: then
// let's build those only once and re-use them multiple times
static const std::regex regex1(R"some-reg-exp1", std::regex::optimize);
static const std::regex regex2(R"some-reg-exp2", std::regex::optimize);
static const std::regex regex3(R"some-reg-exp3", std::regex::optimize);

string str = "some string to split";
std::vector<std::string> tokens( splitString(str, regex1) ); 
```

笔记：

*   [这是对这个答案](https://stackoverflow.com/questions/14265581/parse-split-a-string-in-c-using-string-delimiter-standard-c/64886763#64886763)的一个小改进
*   另见[std::regex_constants::optimize 使用的优化技术](https://stackoverflow.com/q/11592665/1201614)

* * *

## 回答 #29

> 赞同：-4
> 
> 时间：2017-02-27T20:45:31.433

```
std::vector<std::string> split(const std::string& s, char c) {
  std::vector<std::string> v;
  unsigned int ii = 0;
  unsigned int j = s.find(c);
  while (j < s.length()) {
    v.push_back(s.substr(i, j - i));
    i = ++j;
    j = s.find(c, j);
    if (j >= s.length()) {
      v.push_back(s.substr(i, s,length()));
      break;
    }
  }
  return v;
} 
```

# c++ - 如何使用 std::string 的值作为 Flex 规则的模式？

> ID：14265582
> 
> 赞同：0
> 
> 时间：2013-01-10T19:16:45.097
> 
> 标签：c++, gnu, flex-lexer

是否可以使用 std::string 作为 Flex 中规则的模式？

例子：

```
%{
...
string foo
...
%}
...
%%
foo {}
%%
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:26:24.687

至少如果我明白你在问什么，答案是否定的。

为 Flex 扫描器指定的模式必须是常量——即，当 Flex 运行时，它会将它们转换为状态机。它生成的代码主要是状态机的一组表。为此，当 Flex 本身运行时，必须知道所涉及的所有字符串/模式。

顺便说一句，实际上没有 GNU Flex 这样的东西。Flex 不是 GNU 软件。

# tsql - 联合选择不同的语法？

> ID：14265584
> 
> 赞同：0
> 
> 时间：2013-01-10T19:16:54.343
> 
> 标签：tsql

我有一个巨大的表格，其中包含送货地址信息和帐单地址信息。我可以在两个单独的表格中获得唯一的送货地址和帐单地址，其中包含以下内容：

```
SELECT DISTINCT ShipToName, ShipToAddress1, ShipToAddress2, ShipToAddress3, ShipToCity, ShipToZipCode
FROM Orders
ORDER BY Orders.ShipToName

SELECT DISTINCT BillToName, BillToAddress1, BillToAddress2, BillToAddress3, BillToCity, BillToZipCode
FROM Orders
ORDER BY Orders.BillToName 
```

我怎样才能得到两者的不同交集？我不确定语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:33:46.730

像这样的东西？

```
SELECT DISTINCT
    toname, addr1,  addr2,  addr3,  city,   zip
FROM
    (SELECT DISTINCT 
        ShipToName AS toName, 
        ShipToAddress1 AS addr1, 
        ShipToAddress2 AS addr2, 
        ShipToAddress3 AS addr3, 
        ShipToCity AS city, 
        ShipToZipCode AS zip
    FROM 
        Orders

    UNION ALL

    SELECT DISTINCT 
    BillToName AS toName, 
    BillToAddress1 AS addr1, 
    BillToAddress2 AS addr2, 
    BillToAddress3 AS addr3, 
    BillToCity AS city, 
    BillToZipCode AS zip
    FROM 
        Orders) o
ORDER BY ToName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T20:00:58.043

你说“交集”，但你接受了联盟的答案，所以我猜你只想要`UNION DISTINCT`. 不需要派生表和三个`DISTINCT`. 您可以使用简单的：

```
SELECT 
    ShipToName     AS Name, 
    ShipToAddress1 AS Address1, 
    ShipToAddress2 AS Address2, 
    ShipToAddress3 AS Address3, 
    ShipToCity     AS City, 
    ShipToZipCode  AS ZipCode
FROM 
    Orders

UNION                               --- UNION means UNION DISTINCT

SELECT  
    BillToName 
    BillToAddress1, 
    BillToAddress2,
    BillToAddress3,
    BillToCity,
    BillToZipCode
FROM 
    Orders 

ORDER BY
    Name ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:20:47.717

~~您可以在所有字段上加入这两个集合，这将返回匹配的记录：~~

 ~~```
SELECT *
FROM Orders o1
INNER JOIN Orders o2
    ON o1.ShipToName = o2.BillToName
    AND o1.ShipToAddress1 = o2.BillToAddress1
    AND o1.ShipToAddress2 = o2.BillToAddress2
    AND o1.ShipToAddress3 = o2.BillToAddress3 
    AND o1.ShipToCity = o2.BillToCity
    AND o1.ShipToZipCode = o2.BillToZipCode 
```~~ 

或者您应该能够使用 INTERSECT：

```
SELECT ShipToName, ShipToAddress1, ShipToAddress2, ShipToAddress3, ShipToCity, ShipToZipCode
FROM Orders
INTERSECT
SELECT BillToName, BillToAddress1, BillToAddress2, BillToAddress3, BillToCity, BillToZipCode
FROM Orders 
```

 ~~甚至是`UNION`查询（`UNION`删除两组数据之间的重复项）：

```
SELECT ShipToName, ShipToAddress1, ShipToAddress2, ShipToAddress3, ShipToCity, ShipToZipCode
FROM Orders
UNION 
SELECT BillToName, BillToAddress1, BillToAddress2, BillToAddress3, BillToCity, BillToZipCode
FROM Orders 
```~~

# python - 为什么 [].append() 在 python 中不起作用？

> ID：14265589
> 
> 赞同：10
> 
> 时间：2013-01-10T19:17:21.353
> 
> 标签：python

为什么这行得通 -

```
a = []
a.append(4)
print a 
```

但这并不——

```
print [].append(4) 
```

第二种情况的输出是`None`. 你能解释一下输出吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T19:18:48.140

该`append`方法没有返回值。它会更改列表，并且由于您没有将其分配`[]`给任何变量，因此它只是“迷失在空间中”

```
class FluentList(list):
    def append(self, value):
        super(FluentList,self).append(value)
        return self

    def extend(self, iterable):
        super(FluentList,self).extend(iterable)
        return self

    def remove(self, value):
        super(FluentList,self).remove(value)
        return self

    def insert(self, index, value):
        super(FluentList,self).insert(index, value)
        return self 

    def reverse(self):
        super(FluentList,self).reverse()
        return self

    def sort(self, cmp=None, key=None, reverse=False):
        super(FluentList,self).sort(cmp, key, reverse)
        return self

li = FluentList()
li.extend([1,4,6]).remove(4).append(7).insert(1,10).reverse().sort(key=lambda x:x%2)
print li 
```

我没有重载所有有问题的方法，但概念应该很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:20:08.363

该方法`append`不返回任何值，或者换句话说，只有`None`

`a`是可变的并且它的值被改变了，那里没有任何东西可以返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:25:01.793

追加回报`None`。

从你的例子：

```
>>> print a.append(4)
None 
```

# powershell - Powershell 输出

> ID：14265590
> 
> 赞同：2
> 
> 时间：2013-01-10T19:17:22.350
> 
> 标签：powershell

无法从某些 powershell 命令中获取我想要的输出。我正在创建一个 powershell 脚本来帮助清理主目录。我需要获取目录的权限并确保目录的名称和具有访问权限的用户匹配。

我正在使用 Get-Acl 函数，它有很多额外的数据。理论上，这些目录上的文件权限应该以管理员为所有者，用户应该是访问权限下列出的唯一人。

```
PS C:\> Get-Acl "\\fs1\home\e55555"
Directory: \\fs1\home
Path                       Owner                      Access
----                       -----                      ------
e55555                    BUILTIN\Administrators     DOM\e55555 Allow ... 
```

我想过滤掉除正在访问的内容之外的所有内容。我试过管道 | 选择访问，但它没有给我相同的输出。

我知道除了 UserID 之外我还会有额外的信息，所以我想我可以写入一个文件并尝试“grep”我需要的东西。通过一些谷歌搜索和实验，我得到了一些我觉得很容易解析的输出，这里是命令和输出：

```
PS C:\> $test = Get-Acl \\fs1\home\\e55555 | Select-Object -ExpandProperty Access
 | select IdentityReference

IdentityReference
-----------------
DOM\e55555
NT AUTHORITY\SYSTEM
BUILTIN\Administrators
NT AUTHORITY\Authenticated Users 
```

尝试使用正则表达式找到我想要的行，我尝试过的所有东西都没有给我任何输出。我尝试了以下命令的不同变体，还尝试解析文件而不是变量：

```
echo $test | Select-String -pattern "^DOM"
[regex]::matches($test,"^DOM") 
```

那么如何减少我的 get-acl 命令的输出呢？以及如何在没有额外数据的情况下对以 DOM 开头的任何行“grep”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:27:31.770

这应该为您提供域中所有用户的访问对象

```
$path = "\\fs1\home\\e55555"
(Get-Acl $path).Access | where { $_.IdentityReference -like "DOM*"} 
```

如果你想检查用户是否在那里，你可以使用：

```
$path = "\\fs1\home\\e55555"
$username = $path | Split-Path -Leaf

(Get-Acl $path).Access | where { $_.IdentityReference -like "DOM\$username"} 
```

我没有提取该`Identityreference`属性，因为如果您想检查权限，您需要整个访问对象。如果将`Get-Acl`输出保存到变量（例如`$access = Get-Acl ......`），则可以使用以下命令检查用户是否具有访问规则`if($access) { do something }`

编辑：就像一个想法。如果您只想要与文件夹同名的用户没有访问规则的文件夹（不检查用户拥有什么样的权限），您可以尝试：

```
$acls = Get-ChildItem "\\fs1\home\" | Get-Acl 
foreach ($acl in $acls) {
    $users = $acl.Access | select -ExpandProperty IdentityReference
    $username = $acl.PSChildName
    if ($users -notcontains "DOM\$username") { $username }
} 
```

这应该输出一个文件夹名称数组（例如“e55555”），其中有问题（例如用户“e55555”没有对文件夹“e55555”的任何访问权限）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:27:50.843

我认为你一直在思考。尝试查看对象。并过滤 - 使用 where，而不是选择字符串。例如：

```
$HomeDrive = '\\fs1\home\'
$User = 'e55555'

(Get-Acl $HomeDrive$User).Access |
    where { $_.IdentityReference -match $user } 
```

这应该让你开始......？:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:28:49.643

也尝试将其添加`-Expand`到 IdentityReference。以您正在做的事情为基础：

```
Get-Acl "\\fs1\home\\e55555" | Select-Object -ExpandProperty Access | 
    select -expand IdentityReference | ?{ $_.StartsWith("DOM") } 
```

为了使它更简单：

```
(Get-Acl "\\fs1\home\\e55555").Access | Select -Expand IdentityReference | ?{ $_.StartsWith("DOM") } 
```

# c - 在C中将无符号整数乘以10时出现奇怪的错误

> ID：14265593
> 
> 赞同：0
> 
> 时间：2013-01-10T19:17:25.780
> 
> 标签：c, gcc, multiplication

我遇到了一个奇怪的错误，其中乘法给出了错误的结果。下面是一个简化版本，它在我的系统上给出了相同的结果。

```
#include <stdio.h>

int main() {
   printf("%u\n", 1111111111U*10U);
} 
```

我在 OpenSUSE 12.2（3.4.11-2.16-default x86_64）上使用 GCC 4.7.1 进行编译，这给了我以下输出：

```
2521176518 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:20:12.303

10 * 11 亿超出了系统上 unsigned int 的范围，因此您会看到溢出的结果。

在 32 位系统上，unsigned int 可以容纳的最大值是 4294967295（42.9 亿）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:21:05.213

让我猜猜……您的实现使用 32 位`unsigned`值，对吗？

`unsigned`如果是这样的话，算术是以 2^32 为模完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:23:35.380

整数通常表示为[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)。在 32 位机器上，最大有符号整数是`+2147483647/-2147483648`或 unsigned `+4294967295`。

当您乘以 时`1,111,111,111 * 10`，您会得到`11,111,111,110`，它大于最大可能的无符号整数。从而[溢出](http://en.wikipedia.org/wiki/Integer_overflow)。

使用二进制表示，这是

```
1000010001110100011010111000111 * 1010 = 1010010110010001100001100111000110 
```

最少的 32 位是`10010110010001100001100111000110`，即`2521176518`十进制。

# algorithm - 多少个点是中点？

> ID：14265594
> 
> 赞同：3
> 
> 时间：2013-01-10T19:17:24.517
> 
> 标签：algorithm, point

给定一个坐标列表，我想知道如何知道另外两个点中间有多少点。

```
A(1 ; 3)
B(2 ; 2)
C(3 ; 1)
D(3 ; 2)
E(3 ; 3) 
```

这是一个表示：

```
_______
|A| |E|  
_______
| |B|D|  
_______
| | |C|  
_______ 
```

这里 B 和 D 是中点，所以答案是“2”。

我发现了一个非常低效的`O(n³)`算法。

```
count := 0
For each point x1  
  For each point x2   
    For each point x3  
      If x3 is the midpoint of [x1;x2] 
        count := count + 1
Print count 
```

您对更有效的算法有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:19:32.707

使用**[kd 树](http://en.wikipedia.org/wiki/K-d_tree)**，您可以将其改进为`O(n^2 logn)`：

将每个点存储在树中，并且对于每一对（其中有`O(n^2)`），搜索它们中间是否存在一个点（易于计算中间在哪里）。每一次寻求都会`O(logn)`导致`O(n^2 * log(n))`解决方案。

如果您只谈论整数，您可能会通过将点放在**[哈希表中](http://en.wikipedia.org/wiki/Hash_table)****（成对）来增加平均复杂度`O(n^2)`**，并检查是否存在具有所需坐标的元素。

（注意，两种解决方案基本相同，唯一的变化是集合的实现，一种使用树，另一种使用哈希表）。

**伪代码：**

```
set <- new set
for each point p:
   set.add(p)
for each point p1:
   for each point p2 != p1:
       candidate <- findMiddle(p1,p2)
       if set.contains(candidate):
           yield (p1,candidate,p2) 
```

# mysql - 减去mysql查询结果

> ID：14265596
> 
> 赞同：0
> 
> 时间：2013-01-10T19:17:31.430
> 
> 标签：mysql

我试图从两列中减去查询结果。

桌子：

```
 id |   word1   | lang1 |   word2   | lang2 |
----+-----------+-------+-----------+-------+
  1 | car       |   1   | car       |  15   |
  2 | table     |   1   | table     |  15   |
  3 | Chair     |   1   | cahair    |  13   |
  4 | CDplayer  |  15   | CDplayer  |   1   |
  5 | car       |   1   | car       |  13   | 
```

我想得到语言 1 中 word1 中所有尚未翻译成语言 12 的单词。所以在这种情况下，它将是主席

表中有 300 万行，运行以下查询需要 1 分钟：

```
SELECT DISTINCT word1 
FROM `translations` 
WHERE lang1 = 1 
  AND lang2 != 15 
  AND NOT IN (SELECT word1 FROM `translations` WHERE lang2 == 15) 
LIMIT 10 
```

分别对两行进行选择非常快 0.006 秒，然后我可以`array_diff()`在 PHP 中使用将它们彼此相减，但可能有一种更简单的方法可以直接在 MySQL 中进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:23:34.753

```
SELECT 
    origin.word1
FROM 
    ( SELECT DISTINCT word1
      FROM tableX 
      WHERE lang1 = 1
    ) AS origin
WHERE 
    NOT EXISTS
      ( SELECT *
        FROM tableX AS trans
        WHERE trans.lang1 =  1
          AND trans.lang2 = 15
          AND trans.word1 = origin.word1
      ) ; 
```

**在运行这些查询之前**，我会添加一个索引`(lang1, word1)`和一个索引。`(lang1, lang2, word1)`

 **您也可以尝试这种变化（并检查两个解释计划）：

```
SELECT DISTINCT
      word1
FROM 
      tableX AS origin
WHERE 
      lang1 = 1
  AND 
      NOT EXISTS
      ( SELECT *
        FROM tableX AS trans
        WHERE trans.lang1 =  1
          AND trans.lang2 = 15
          AND trans.word1 = origin.word1
      ) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:23:50.917

我不确定我是否完全正确地理解了这个问题。聚合是否有效？

```
select word1
from translations t
group by word1
having max(lang1 = 1) = 1 and
       max(lang2 = 15) = 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:58:42.120

这应该很简单

```
SELECT
    m.id ,
    l.*
FROM mytable m
INNER JOIN (
            SELECT
                * 
            FROM mytable
            WHERE lang2 != 15
            GROUP BY id
) as l ON l.id = m.id
WHERE l.lang1 = 1
GROUP BY m.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T19:59:27.693

```
SELECT DISTINCT NonTranslated.word1
from
(SELECT DISTINCT word1 FROM `translations` WHERE lang1 = 1 AND lang2 != 15)NonTranslated
left join
(SELECT DISTINCT word1 FROM `translations` WHERE lang1 = 1 AND lang2 = 15)Translated
on NonTranslated.word1 = Translated.word1
where Translated.word1 is NULL; 
```

让我知道这是什么解释。我认为它可能比选择子查询更快。

PS：假设：即使这个词已经被翻译过一次，它也不会被包含在列表中。**

# android - 尝试在 Web 视图中显示 url

> ID：14265598
> 
> 赞同：2
> 
> 时间：2013-01-10T19:17:40.227
> 
> 标签：android, http, webview, loopj

我正在试验 loopj 包。我正在尝试向网站发出 HTTP 请求并在 webview 中显示该网站。

我成功地得到了结果，但是 web 视图没有按需要显示页面，而是打开了 chrome 并显示了页面。

我是否遗漏了什么，或者有没有办法可以覆盖这种不需要的行为？

下面是我提出请求的 oncreate 方法：

```
public class MainActivity extends Activity {

Button connectBtn;
TextView status;
WebView display;
String url = "http://www.google.com";
AsyncHttpClient client;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    status = (TextView)findViewById(R.id.statusbox);
    connectBtn = (Button)findViewById(R.id.connectBtn);
    display = (WebView)findViewById(R.id.webView1);

    connectBtn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            client = new AsyncHttpClient();
            client.get(url, new AsyncHttpResponseHandler(){

                @Override
                public void onSuccess(String response) {
                    Toast.makeText(getApplicationContext(), "Success!", Toast.LENGTH_SHORT).show();
                    display.loadUrl(url);

                }
            });
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:26:46.060

`setWebViewClient`到您的`WebView`并覆盖`shouldOverrideUrlLoading()`现在写入`view.loadUrl(url);`该方法。

只需添加此代码，

```
display.setWebViewClient(new WebViewClient() {
public boolean shouldOverrideUrlLoading(WebView view, String url) {
          view.loadUrl(url);
          return true;
}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T11:06:09.810

只需在您的 webviewclient 下使用此代码

```
public void onPageFinished(WebView view, String url) {  
    super.onPageFinished(view, url);
    final EditText editText = (EditText) findViewById(R.id.urlfield);           
    editText.setText(url);

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:24:40.910

您需要设置 a`WebViewClient`并覆盖该`shouldOverrideUrlLoading`方法。像这样的东西：

```
webView.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(final WebView view, final String url) {
        view.loadUrl(url);
    }
}); 
```

这确保了 WebView 中链接的点击由 WebView 本身处理。

* * *

编辑：实际上，我误读了这个问题。您没有处理 WebView 本身的点击，因此这无关紧要。对不起！

# python - 无法启动 Scrapy 项目

> ID：14265599
> 
> 赞同：0
> 
> 时间：2013-01-10T19:17:52.693
> 
> 标签：python, scrapy

很确定一切都正确安装。当我进入python解释器并导入scrapy时，没有出现错误。但是，当我`scrapy startproject tutorial`在 shell 中运行时，它会返回：

```
$ scrapy startproject tutorial
-bash: scrapy: command not found 
```

任何指针表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:07:38.893

重新安装 Scrapy 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T22:13:58.000

我也遇到了这个问题，即使我重新安装了 python 和 scrapy 仍然无法正常工作。之后，我从 zsh 切换到默认 shell（Mac OS X 10），现在可以正常工作了。

# jquery - 在 PhantomJS 中使用 jQuery DOM 选择器语法？

> ID：14265604
> 
> 赞同：7
> 
> 时间：2013-01-10T19:18:21.457
> 
> 标签：jquery, phantomjs

我正在学习 PhantomJS，想知道是否可以在 PhantomJS 运行的 JS 文件中使用 jQuery DOM 选择器？我在 github 上看到了一个简短的示例，似乎表明了这一点：

[带有 Qunit（和 jQuery？）的 PhantomJS 示例](https://gist.github.com/1305062/)

如果您查看顶部的 run-qunit.js 文件，似乎可以使用 jQuery DOM 选择器作为参数。但是当我这样做时，我遇到了错误——不确定这是我的语法还是因为 Phantom 不了解 jQuery，所以我想我会先询问 PhantomJS/jQuery 的关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-20T07:01:39.483

使用 page.injectJs('jquery-1.6.1.min.js'); 它会正常工作。

*[这是在 phantomjs http://snippets.aktagon.com/snippets/534-how-to-scrape-web-pages-with-phantomjs-and-jquery](http://web.archive.org/web/20150713103425/http://snippets.aktagon.com/snippets/534-how-to-scrape-web-pages-with-phantomjs-and-jquery "粘性物")*中使用 jquery 的漂亮链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T16:11:31.053

There is people telling that documentation samples loading JQuery are buggy and load JQuery on PhamtomJS is impossible here: [loading jquery on phanthomjs](https://stackoverflow.com/questions/15847123/on-phantomjs-cant-include-jquery-and-without-jquery-cant-post-form-data?lq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:22:31.513

..好吧，我一发布，我（自然）就找到了这个。看起来实际上可以包含 jQuery：

[https://github.com/ariya/phantomjs/wiki/Page-Automation](https://github.com/ariya/phantomjs/wiki/Page-Automation)

# python - 如何在 Ruby 中执行 timedelta 和日期比较？

> ID：14265609
> 
> 赞同：1
> 
> 时间：2013-01-10T19:18:49.080
> 
> 标签：python, ruby

在 Python 中，如果我想检查特定日期 + 24 小时是否已过，我会写：

```
from datetime import datetime, timedelta

some_date = datetime(2013, 1, 10, 11, 0)
day = timedelta(1)

# Checks if some_date + 1 day is before today's date
print some_date + day < datetime.now() 
```

如何构建 1 天的时差并检查特定日期 + 1 天是否早于 Ruby 中的今天日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:22:36.537

```
require 'time'

xmas = DateTime.new(2013, 12, 25)
puts x = xmas + 1 # 2013-12-26T00:00:00+00:00
d = DateTime.now
puts x > d        # true
puts x - d        # 30167183979194791/86400000000000 (a Rational)
puts d >> 12      # 2014-01-10T21:15:20+01:00 
```

# ruby-on-rails - 如何删除 Rspec 的 before(:all) 钩子留下的测试数据？

> ID：14265611
> 
> 赞同：1
> 
> 时间：2013-01-10T19:18:57.670
> 
> 标签：ruby-on-rails, rspec

我发现`before(:all)`在我的规范中使用会生成在规范运行后[不会回滚的测试数据。](https://www.relishapp.com/rspec/rspec-rails/docs/transactions)我不知道我需要使用`after(:all)`钩子来删除它们。现在我的测试数据库充满了这些记录，我想重置它。我怎样才能完成这项工作？似乎没有`db:test:reset`rake 任务。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:37:38.277

你可以跑

```
rake db:reset RAILS_ENV=test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T09:31:11.810

你也可以运行

```
rake db:test:prepare 
```

# mongodb - mongoDB DBRef 作为外键测试 - 查询

> ID：14265612
> 
> 赞同：0
> 
> 时间：2013-01-10T19:19:02.943
> 
> 标签：mongodb, dbref, nosql

由于 mongoDB 不支持外键，我读过您可以将其用于 DBReF。现在我想测试一下这种关系。

2个集合是

```
 `db.professor.insert({"_id": 1122, "Name":"Heinrich","Rang": "C3","Raum":"D123"})

db.assistent.insert({"_id": 2244,"Name":"Schmidt","Fachgebiet":"Neuronale Netze","Boss":{"$ref":"professor","$id":1122}})` 

第一个问题，但它不应该是错误的 id 可能假设的参考。如果我使用正确的 ID $ id 输入，我该如何测试参考？

背景是我检查了mongoDB的数据完整性特性！有没有人有关于 mongoDB 和数据完整性的资源

            回答 #1

赞同：1

时间：2013-01-10T21:23:43.817

MongoDB 的集合间数据完整性为零。这不是 MongoDB 工作方式中的错误，也不希望这种行为应该改变。

不具有集合间数据完整性是其作为 NoSQL ( [http://en.wikipedia.org/wiki/NoSQL](http://en.wikipedia.org/wiki/NoSQL) ) 产品的核心特性之一，这种行为通常与此相关联（据说它不必如此）。

当然，这与一般数据完整性无关，而是与服务器端关系的级联和引用有关。

DBRef ( [http://docs.mongodb.org/manual/applications/database-references/](http://docs.mongodb.org/manual/applications/database-references/)`ObjectId` ) 与将 a 保存到文档中没有什么不同。唯一真正的区别是它是一个对象的对象，它还存储一个属性来容纳集合名称。DBRef 没有什么特别之处，只是它预先捆绑了大多数（如果不是全部）语言的 MongoDB 驱动程序作为帮助程序，允许您查询应用程序中的另一行。

许多人确实混淆了 DBRef 的用途，但我向您保证，它并没有什么特别之处。

所以没有检查你是否输入错误`ObjectId`，关系上没有级联，MongoDB中没有“外键”行为。

任何和所有关系完整性都来自您的应用程序及其以防止数据中出现任何问题的方式工作的能力。这适用于伪关系的插入和级联。

考虑到有关 MongoDB 的这些简短事实，您的测试几乎没有用，如果您想测试关系模型的数据完整性，您应该使用关系数据库。

```

# php - 来自 Auth 设置的 Cakephp 错误

> ID：14265615
> 
> 赞同：0
> 
> 时间：2013-01-10T19:19:10.643
> 
> 标签：php, cakephp, authentication, installation

我正在关注 CakePHP 带来的 Auth 教程，但遇到了一个奇怪的问题。基本上，我试图在从 AppController 文件中的 components 变量调用它时设置身份验证，而不是按照教程建议的那样在 beforeFilter 操作中分配值。现在我的 components 变量看起来像这样：

```
public $components = array(
  'Acl',
  'Auth' => array(
    'authorize' => array(
      'Actions' => array('actionPath' => 'controllers')
    ),
    'loginRedirect' => array('controller' => 'posts', 'action' => 'index'),
    'logoutRedirect' => array('controller' => 'display', 'action' => 'home')
    //)
  ),
  'Session'
); 
```

当我尝试运行此代码时，我收到错误*Fatal error: Class 'AppController' not found in C:\wamp\www\cakephp\lib\Cake\Controller\CakeErrorController.php on line 31*。奇怪的是，如果我只是注释掉 logoutRedirect 行，一切正常。你对正在发生的事情有任何线索吗？

# twitter-bootstrap - 如何使用引导弹出框显示同级或子元素的内容？

> ID：14265616
> 
> 赞同：4
> 
> 时间：2013-01-10T19:19:11.930
> 
> 标签：twitter-bootstrap, popover

我试图让引导弹出窗口根据弹出窗口设置的元素显示上下文内容。

这是一些示例标记：

```
<div class="user">
    <img src="foo.jpg" />
</div>
<div class="userInfo">
    <p>He likes pie!</p>
</div>

<div class="user">
    <img src="bar.jpg" />
</div>
<div class="userInfo">
    <p>He likes cake!</p>
</div> 
```

设置弹出框的脚本：

```
$('.user').popover({
    trigger: 'hover',
    placement: 'top',
    html: true,
    content: //What goes here?  I want to display the contents of the userInfo class
}); 
```

当我将鼠标悬停在`user`类上时，预期的结果将是显示一个弹出框，显示包含在同级或子`userInfo`类中的内容。

我的标记可以灵活；我可以将`userInfo`班级移动为孩子、兄弟姐妹、父母等。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T22:01:26.707

是的，我会放在`.userInfo`里面`.user`，然后迭代`$('.user')`并分别设置每个内容`.user`（在您的示例中，您为所有弹出框设置相同的内容。

例子：

```
<div class="user">
  user 1
  <div class="userInfo">
    <p>He likes pie!</p>
  </div>
</div>

<div class="user">
  user 2
  <div class="userInfo">
    <p>He likes cake!</p>
  </div>
</div> 
```

Javascript：

```
$('.user').each(function() {
  var $this = $(this);
  $this.popover({
    trigger: 'hover',
    placement: 'right',
    html: true,
    content: $this.find('.userInfo').html()  
  });
}); 
```

这是一个工作 jsfiddle（添加了一些额外的 css）：http: [//jsfiddle.net/hajpoj/CTyyk/5/](http://jsfiddle.net/hajpoj/CTyyk/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-21T16:23:44.717

您可以保留他的原始标记并使用它：

```
$('.user').each(function() {
  var $this = $(this);
  $this.popover({
    trigger: 'hover',
    placement: 'right',
    html: true,
    content: $this.next().html()  
  });
}); 
```

# xcode - iOS 模拟器中的 .txt 文件信息，而不是构建时的 iOS 设备

> ID：14265618
> 
> 赞同：0
> 
> 时间：2013-01-10T19:19:18.200
> 
> 标签：xcode, xcode4.5

大家好，我无法弄清楚为什么我的 .txt 文件在我的模拟器上可以正常显示，但在我的 iphone 上却不行。

我发现了有关 .png 做同样事情的信息，但由于编译问题。

我的构建没有引发错误，并且节标题和正确的单元格数量出现但没有文本。

这是我用来从 .txt 文件中提取数据数组的代码。

那么有没有更好的方法将 .txt 文件中的数据提取到数组中？还是有像.png这样的编译问题？或者我是一个假人，我应该知道这不是从 .txt 文件创建数组的正确方法？

```
NSString *delimiter = @"\n";
    /*
     Pull contents of text file, convert to string format, separate by newline, finish by giving new local array a pointer
    */
    //COWEL DOOR CHECK
    NSData *cowelDoorCheckTF = [NSData dataWithContentsOfFile:@"/Users/Makey/Dropbox/iPreFlight/iPreFlight R22/Text Data Files/PreFlight/CowelDoorCheck.txt"];
    NSString *cowelDoorCheckString = [[NSString alloc]initWithBytes:[cowelDoorCheckTF bytes] length:[cowelDoorCheckTF length] encoding:NSUTF8StringEncoding];
    NSArray *cowelDoorCheck = [cowelDoorCheckString componentsSeparatedByString:delimiter]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:24:31.023

您的 txt 文件应该作为资源存在于您的应用程序中，而不是您计算机上某个其他目录中的文件。否则它不会作为您的应用程序的一部分存在。

请参阅[XCode（对于 IOS）的 Resources 文件夹中我的文件的物理路径作为](https://stackoverflow.com/questions/6172165/the-physical-path-for-my-files-inside-the-resources-folder-of-xcode-for-ios)起点。iOS的第一个答案[-如何将html资源文件的全部内容读入NSString *？](https://stackoverflow.com/q/8539693/836214)还提供了一个使用示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:33:34.957

检查文件名的大小写。文件名在模拟器中不区分大小写，但在设备上区分大小写。

因此，例如，如果资源的实际文件名是“FOO.txt”，但您的代码将其加载为“foo.txt”，那么它将在模拟器中工作，但在设备上不起作用。

# ios - 添加@property 似乎会给@interface 的@implementation 一个错误

> ID：14265620
> 
> 赞同：1
> 
> 时间：2013-01-10T19:19:22.050
> 
> 标签：ios, objective-c

我有一个@interface，我添加了一个属性。

```
@interface ITEM : CDVViewController
@property (strong, nonatomic) UIPopoverControler * popoverController;
@end 
```

当我添加上述属性时，当我清理和构建时，它给出了这个错误：

```
 Property 'popoverController' attempting to use Ivar '_popoverController' declared in super class 'UIViewController' 
```

在这条线上：

```
@implementation ITEM   //<---
{
...
} 
```

我不太确定发生了什么，但我知道当我移除该属性时它会正确构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:20:27.483

您正在尝试隐藏属性，问题是该属性已经存在于超类中，如果您仍想声明它，请更改名称。

**PS**：约定说常量应该使用大写字母，并且类名应该以大写字母开头，因此在您的情况下，您应该将类​​名更改为 Item，即使这不会对编译器造成任何问题。

# php - 是否可以检测到 PHP 文件请求

> ID：14265626
> 
> 赞同：1
> 
> 时间：2013-01-10T19:19:40.163
> 
> 标签：php

例如我们有这个 URL： [https ://www.domain.com/pdf.php?url=http://www.domain.com/report.php?id=341](https://www.domain.com/pdf.php?url=http://www.domain.com/report.php?id=341)

我想知道是否有可能以某种方式检测使用 PHP`report.php`试图`pdf.php`打开访问`report.php?id=341`。

如果可能的话，我稍后会限制 report.php 只能由 pdf.php、invoice.php 等调用。

基本上我想确保report.php 是由服务器而不是人请求的。

可能存在安全风险吗？

我希望我的问题有意义。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:30:42.440

你可以看到用户来自哪里使用

```
$_SERVER['HTTP_REFERER'] 
```

例如

```
if ( $_SERVER['HTTP_REFERER'] == "valid_url.php" ) ... 
```

然而，这并不安全，正如 php 手册所述：这是由用户代理设置的。不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:47:59.497

您可以尝试使用以下内容来显示 $_SERVER 数组的全部内容。它将向您显示您正在寻找的所需变量。

```
print_r($_SERVER); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:23:42.317

最好将你的逻辑添加到`pdf.php`，`invoice.php`等等。在那里你应该处理 GET/POST 参数。如果您使用的是普通 PHP，请创建一些函数并将其放在所有其他 Web 可访问 php 文件的开头。例如

```
if(!check_get_from($_GET)) die; 
```

但最佳做法是只有一个入口点 (index.php)。

# cloud-foundry - cloudfoundry-jquery-rails 代替 jquery-rails

> ID：14265628
> 
> 赞同：0
> 
> 时间：2013-01-10T19:19:45.843
> 
> 标签：cloud-foundry

部署到 cloud-foundry 时，[建议](http://docs.cloudfoundry.com/frameworks/ruby/rails-3-1.html)从`'jquery-rails'`gem 更改为`'cloudfoundry-jquery-rails'`

```
 # For Ruby 1.9 Cloud Foundry requires a tweak to the jquery-rails gem.
 # gem 'jquery-rails'
   gem 'cloudfoundry-jquery-rails' 
```

[以便 jquery 可以与 cloudfoundry 无缝协作](https://github.com/estahn/cloudfoundry-jquery-rails#readme)。

[在此](https://github.com/estahn/cloudfoundry-jquery-rails#readme)提到的哪些修复是使其在云铸造上工作所必需的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:41:43.090

这方面的文档有点过时，正在更新中。对于 Rails 3.1，这很可能是这种情况，但对于 3.2 肯定不是，它应该可以正常工作。

# javascript - 如何同时使用 Require.js 和 Buster.js？

> ID：14265629
> 
> 赞同：3
> 
> 时间：2013-01-10T19:19:58.880
> 
> 标签：javascript, requirejs, buster.js

我正在尝试开始使用 Buster.js，并且我同时安装了 buster 和 buster-amd，但即便如此，我对 Require.js 的使用还是会导致问题。我的 buster.js 文件如下所示：

```
var config = module.exports;
config["My tests"] = {
    autoRun: false,
    environment: "browser", // as opposed to "node"
    extensions: [require("buster-amd")],
    rootPath: "../",
    sources: ['ext/require/require.js'],
    tests: ["buster-test/*-test.js"]
}; 
```

我的测试是这样的：

```
define(['buster-test/buster'
], function(buster) {
    buster.spec.expose(); // Make some functions global
    describe("A Fake Test", function () {
        it("can be instantiated", function () {
            console.log('test')
        });
    });
    buster.run()
}); 
```

但是当我尝试运行上述内容时，我得到：

```
Uncaught exception: ./buster/load-all.js:1 Uncaught ReferenceError: require is not defined
TypeError: uncaughtException listener threw error: Cannot read property 'id' of undefined
    at Object.module.exports.uncaughtException (/usr/lib/node_modules/buster/node_modules/buster-test-cli/lib/runners/browser/progress-reporter.js:42:50)
    at notifyListener (/usr/lib/node_modules/buster/node_modules/buster-test-cli/node_modules/bane/lib/bane.js:49:35)
    at Object.object.emit (/usr/lib/node_modules/buster/node_modules/buster-test-cli/node_modules/bane/lib/bane.js:127:17)
    at Object.module.exports.bane.createEventEmitter.emitCustom (/usr/lib/node_modules/buster/node_modules/buster-test-cli/lib/runners/browser/remote-runner.js:289:14)
    at /usr/lib/node_modules/buster/node_modules/buster-test-cli/lib/runners/browser/remote-runner.js:92:16
    at PubSubClient.on._handler (/usr/lib/node_modules/buster/node_modules/buster-test-cli/node_modules/ramp/lib/pubsub-client.js:73:43)
    at Object.Faye.Publisher.trigger (/usr/lib/node_modules/buster/node_modules/buster-test-cli/node_modules/ramp/node_modules/faye/node/faye-node.js:385:19)
    at Object.Faye.extend.Set.Faye.Class.distributeMessage (/usr/lib/node_modules/buster/node_modules/buster-test-cli/node_modules/ramp/node_modules/faye/node/faye-node.js:668:30)
    at Object.Faye.Client.Faye.Class._deliverMessage (/usr/lib/node_modules/buster/node_modules/buster-test-cli/node_modules/ramp/node_modules/faye/node/faye-node.js:1070:20)
    at Object.Faye.Client.Faye.Class.receiveMessage (/usr/lib/node_modules/buster/node_modules/buster-test-cli/node_modules/ramp/node_modules/faye/node/faye-node.js:1007:12) 
```

以前有没有人见过这样的事情，如果是这样，你对我做错了什么有什么建议吗？

PS如果我删除该`extensions:`行，我会收到类似的错误，除了它抱怨`define`而不是`require`. 所以看起来插件内部发生了找不到 require 的事情......但我不知道如何向插件提供 Require 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T17:44:34.967

您是否尝试过将 require.js 添加到`libs`而不是`sources`在您的 buster 配置中？所以配置看起来像这样：

```
var config = module.exports;
config["My tests"] = {
    autoRun: false,
    environment: "browser", // as opposed to "node"
    libs: [ 'ext/require/require.js' ],
    extensions: [require("buster-amd")],
    rootPath: "../",
    tests: ["buster-test/*-test.js"]
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T11:33:05.317

我采取不同的方法。我没有禁用自动运行，而是使用 Buster 的异步测试用例格式，您将测试用例定义为传递`run`回调的函数。使用（没有很好记录的）`resources:`配置设置来允许加载你的源代码。

```
config["Browser tests"] = {
    environment: "browser",
    libs: [ 'test/require_config.js','require.js' ],
    rootPath: "../",
    resources: ["your_source_code/**/*.js"],
    tests: ["buster-test/*-test.js"]
}; 
```

然后`require()`在您的测试中使用，当您加载代码时，`run`使用测试调用回调：

```
buster.testCase("AppCode",function(run) {
  require(["appCode"],function(appCode) {
    run({
      "it works": function() { assert(true) }
    })
  });
}); 
```

我创建了一个示例项目，显示了这个方法[require.js 和 buster.js](https://github.com/timruffles/busterjs-with-amd)。它有一个小的辅助函数可以同时执行`testCase`和`require`调用。

# python - python运算符重载的更简单方法？

> ID：14265630
> 
> 赞同：0
> 
> 时间：2013-01-10T19:20:01.127
> 
> 标签：python, operator-overloading

我正在使用 Python 开发一个图形库，并且我正在以这种方式定义我的 vetex：

```
class Vertex:
def __init__(self,key,value):
    self._key = key
    self._value = value

@property
def key(self):
    return self._key

@key.setter
def key(self,newKey):
    self._key = newKey

@property
def value(self):
    return self._value

@value.setter
def value(self,newValue):
    self.value = newValue

def _testConsistency(self,other):
    if type(self) != type(other):
        raise Exception("Need two vertexes here!")

def __lt__(self,other):
    _testConsistency(other)
    if self.index <= other.index:
        return True
    return False
...... 
```

我真的必须自己定义 __lt__,__eq__,__ne__.... 吗？它是如此冗长。有没有更简单的方法可以解决这个问题？干杯。请不要使用 __cmp__ 因为它将在 python 3 中消失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:22:49.187

[functools.total_ordering](http://docs.python.org/2/library/functools.html#functools.total_ordering)可以在这里为您提供帮助。它应该是一个类装饰器。您定义、、 或**AND**`__lt__()`之一，它会填充其余部分。`__le__()``__gt__()``__ge__()` **`__eq__`**

 **作为旁注：

而不是写这个

```
if self.index <= other.index:
    return True
return False 
```

写这个：

```
return self.index <= other.index 
```

这样更干净。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:24:00.267

使用[`functools.total_ordering`](http://docs.python.org/3/library/functools.html#functools.total_ordering)，您只需要定义一个相等运算符和一个排序运算符。在 Python < 3.2 中，您很不走运，*必须*将这些运算符定义为单独的方法。尽管您可以通过编写一个更简单的版本来节省一些代码`total_ordering`，但如果您在多个地方需要它。**

# php - 如何在 WP 上创建此幻灯片的新实例？

> ID：14265631
> 
> 赞同：2
> 
> 时间：2013-01-10T19:20:03.823
> 
> 标签：php, wordpress, themes, slideshow

我试图复制并粘贴此代码段并更改 ID，但由于某种原因它破坏了我的主题。如果有人能提出一些有用的建议，我将不胜感激！谢谢！

/ ***幻灯片放映*** /

```
$prefix = 'sgt_';

$meta_box = array(
    'id' => 'slide',
    'title' => 'Slideshow Options',
    'page' => 'post',
    'context' => 'side',
    'priority' => 'low',
    'fields' => array(
        array(
            'name' => 'Show in slideshow',
            'id' => $prefix . 'slide',
            'type' => 'checkbox'
        )
    )
);
add_action('admin_menu', 'sight_add_box');

// Add meta box
function sight_add_box() {
    global $meta_box;

    add_meta_box($meta_box['id'], $meta_box['title'], 'sight_show_box', $meta_box['page'], $meta_box['context'], $meta_box['priority']);
}

// Callback function to show fields in meta box
function sight_show_box() {
    global $meta_box, $post;

    // Use nonce for verification
    echo '<input type="hidden" name="sight_meta_box_nonce" value="', wp_create_nonce(basename(__FILE__)), '" />';

    echo '<table class="form-table">';

    foreach ($meta_box['fields'] as $field) {
        // get current post meta data
        $meta = get_post_meta($post->ID, $field['id'], true);

        echo '<tr>',
                '<th style="width:50%"><label for="', $field['id'], '">', $field['name'], '</label></th>',
                '<td>';
                echo '<input type="checkbox" name="', $field['id'], '" id="', $field['id'], '"', $meta ? ' checked="checked"' : '', ' />';
        echo     '<td>',
            '</tr>';
    }

    echo '</table>';
}

add_action('save_post', 'sight_save_data');

// Save data from meta box
function sight_save_data($post_id) {
    global $meta_box;

    // verify nonce
    if (!wp_verify_nonce($_POST['sight_meta_box_nonce'], basename(__FILE__))) {
        return $post_id;
    }

    // check autosave
    if (defined('DOING_AUTOSAVE') && DOING_AUTOSAVE) {
        return $post_id;
    }

    // check permissions
    if ('page' == $_POST['post_type']) {
        if (!current_user_can('edit_page', $post_id)) {
            return $post_id;
        }
    } elseif (!current_user_can('edit_post', $post_id)) {
        return $post_id;
    }

    foreach ($meta_box['fields'] as $field) {
        $old = get_post_meta($post_id, $field['id'], true);
        $new = $_POST[$field['id']];

        if ($new && $new != $old) {
            update_post_meta($post_id, $field['id'], $new);
        } elseif ('' == $new && $old) {
            delete_post_meta($post_id, $field['id'], $old);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T07:13:24.213

使用此代码创建新的幻灯片帖子类型..

```
 function slider(){
    $labels = array( 'name' => 'Slider', 'singular_name' => 'Slider', 'add_new' => 'Add New', 'add_new_item' => 'Add New Slider', 'edit_item' => 'Edit Slider', 'new_item' => 'New Slider', 'all_items' => 'All Sliders', 'view_item' => 'View Slider', 'search_items' => 'Search Sliders', 'not_found' =>  'No Sliders found', 'not_found_in_trash' => 'No Sliders found in Trash', 'parent_item_colon' => '', 'menu_name' => 'Sliders' );

    $args = array( 'labels' => $labels, 'public' => true, 'publicly_queryable' => true, 'show_ui' => true,  'show_in_menu' => true, 'query_var' => true, 'rewrite' => array( 'slug' => 'slider' ), 'capability_type' => 'post', 'has_archive' => true, 'hierarchical' => false,'menu_position' => null,'supports' => array( 'title', 'thumbnail', 'excerpt' ) ); 
    register_post_type( 'slider', $args );

    $labels = array( 'name' => 'News', 'singular_name' => 'News', 'add_new' => 'Add New', 'add_new_item' => 'Add New News', 'edit_item' => 'Edit News', 'new_item' => 'New News', 'all_items' => 'All Newss', 'view_item' => 'View News', 'search_items' => 'Search Newss', 'not_found' =>  'No Newss found', 'not_found_in_trash' => 'No Newss found in Trash', 'parent_item_colon' => '', 'menu_name' => 'Newss' );

    $args = array( 'labels' => $labels, 'public' => true, 'publicly_queryable' => true, 'show_ui' => true,  'show_in_menu' => true, 'query_var' => true, 'rewrite' => array( 'slug' => 'news' ), 'capability_type' => 'post', 'has_archive' => true, 'hierarchical' => false,'menu_position' => null ); 
    register_post_type( 'news', $args );
    }
add_action('init','slider'); 
```

# websocket - Faye - 检索给定密钥的最后一条消息

> ID：14265635
> 
> 赞同：4
> 
> 时间：2013-01-10T19:20:28.127
> 
> 标签：websocket, faye

有没有办法检索给定密钥的最后一条消息 faye 广播？我知道redis适配器，但不知道这是否可能......

# wpf - 在运行时通过 GUI 在 XamDataGrid 中共享列标题

> ID：14265636
> 
> 赞同：0
> 
> 时间：2013-01-10T19:20:41.223
> 
> 标签：wpf, infragistics, xamdatagrid

用户如何更改 XamDataGrid 中的列以设置 ColumnSpan 和/或 RowSpan 属性？我知道如何以编程方式做到这一点，但我似乎无法弄清楚如何在运行时通过键盘和鼠标来做到这一点。为了使它起作用，我需要在网格上设置任何选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:56:44.720

默认情况下，这在 XamDataGrid 中不受支持。以编程方式执行此操作是实现此目的的唯一方法，因此如果您有一些机制可以在运行时以编程方式更改这些，那么您可以执行此操作，但您需要自己编写。

不过，这听起来确实是一个非常有用的功能，因此您应该前往 Infragistics 网站并为此提交功能请求。 [https://www.infragistics.com/my-account/feature-request/](https://www.infragistics.com/my-account/feature-request/)

# ios - 向选定客户分发 iOS 应用程序

> ID：14265646
> 
> 赞同：1
> 
> 时间：2013-01-10T19:21:27.300
> 
> 标签：ios, distribution

我开发了一个 iOS 应用程序并准备开始分发，但我的商业模式有点奇特。

应用程序本身具有未定义的值，因为它是一组应用程序的一部分。在我的商业模式中，用户购买这套应用程序，其中包括一个 PC 软件（更有价值的那个）、iOS 应用程序、Android 应用程序和 WinRT 应用程序。

我不想在应用商店公开这个应用。

一种完全符合我需求的替代方案是 Apple 为企业提供的兑换代码（VPP 或批量购买计划）。但是阅读它的条款和条件，Apple 声明我不能转售兑换代码

我敢肯定我不是唯一一个有这种需求的人，人们是如何解决这个问题的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:25:22.273

您可以使用企业对企业计划，但这意味着苹果会从您的销售额中分一杯羹。

另一种选择是制作一个公共应用商店应用程序，并为您的用户提供用户名和密码，或者甚至更好的兑换码（激活应用程序），就像你想做的那样，通过你自己的方式出售你的兑换码然后拥有用户在应用程序中输入它，以便他们可以使用它..

# mysql - 我应该在 node.js 中使用哪个数据库？

> ID：14265649
> 
> 赞同：7
> 
> 时间：2013-01-10T19:21:30.797
> 
> 标签：mysql, node.js, mongodb, phpmyadmin, database

我应该在 node.js 中使用哪个数据库？我正在考虑 MySQL 和 MONGO DB。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T20:49:45.210

正确答案是：视情况而定。

像许多其他编程语言一样，节点具有各种数据库适配器。当然，有些比其他的更好，但它们都在变化和发展得如此之快，以至于这里的任何陈述很快就会过时。即使您选择一个数据库，您也会发现至少有两个或三个质量不同的适配器。

最后，什么适合 Node 并不重要，重要的是什么适合您的项目。试图将关系问题压缩到 NoSQL 存储中对你没有好处。

节点社区为您提供了很多可能性。查看[Node Toolbox](http://nodetoolbox.com/)，为 CouchDB、MongoDB、Redis、数据库抽象层、MySQL 等找到一些解决方案……一如既往，您需要一些常识来选择正确的模块。查看提交历史、维护者数量、活动、上次提交时间戳、问题队列等。您一定会找到适合您的数据库的解决方案。

当我必须同时学习一种以上的技术时，我个人觉得这相当困难。因此，如果您是 node 新手，我宁愿在您的第一个项目中坚持使用您知道的数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:35:44.873

每个人对完成都有不同的要求，因此这实际上取决于您要做什么。就像约瑟夫说的那样`MongoDB`，并且`Node.js`可以很好地协同工作，但对于某些用例，`MySQL`可能是一个更好的选择。此外，您可能需要考虑您最熟悉的数据库。个人而言，我会推荐`MongoDB`，但我认为这是一个偏好问题。

# css - 子项的 Z-Index 高于容器 DIV

> ID：14265657
> 
> 赞同：1
> 
> 时间：2013-01-10T19:21:59.433
> 
> 标签：css, z-index

我有两个块元素，一个标题和一个导航。标头`div`内部有一个溢出导航上方的内容。我曾经`z-index`以这种方式定义这些项目，但现在我在导航中有*项目*`a`，我想成为页面上最突出/最高的元素，因此出现在标题上方并且它是溢出的元素。这可能吗？

 *请参阅示例 - [http://jsfiddle.net/zAehr/](http://jsfiddle.net/zAehr/) - 我希望导航`a`项目高于蓝色`logo`类。

我的 CSS：

```
#header {
 position:relative;
 display:block;
 height:100px;
 width:100%;
 overflow:visible;
 background:#eee;
 z-index:10;
}

.logo {
 position:relative;
 display:block;
 height:250px;
 width:250px;
 background:#336699;
 z-index:10;
}

#navbar {
 position:relative;
 width:100%;
 height:100px;
 background:#bbb;
 z-index:9;
}

#navbar a { 
 display:block;
 position:relative;
 padding:10px;
 z-index:100;
 float:left;
} 
```

非常感谢所以

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:35:52.127

脱掉`z-index: 9`_`#navbar`

[http://jsfiddle.net/pxfunc/zAehr/1/](http://jsfiddle.net/pxfunc/zAehr/1/)*

# jquery - Jquery 点击事件不起作用

> ID：14265658
> 
> 赞同：0
> 
> 时间：2013-01-10T19:21:59.247
> 
> 标签：jquery, css

在我的网页中，我使用单击事件作为下拉选项卡。但代码对我不起作用。但是如果我使用悬停而不是点击事件，它会很好地工作。但我需要在我的网页代码中使用点击是：

```
 $(document).ready(function(){
                var dropDownSpeed = 200;
                var dropUpSpeed   = 200;
                var menuHeight = '240px';
                var tabs = $("#tabs");
                var tabPanesContainer = $("ul#tabPanes");
                var tabPanesAll = tabPanesContainer.find("li").css("position", "absolute");

                $(".slide").click(function () {

                    var thisMenuItem = $(this);

                    /*get the offset of this item in respect to the page*/
                    var thisMargin   = thisMenuItem.offset().center;

                    /*get the offset of the navigation bar in respect to the page*/
                    var tabsOffset   = tabs.offset().center;
                    var thisIndex = thisMenuItem.index();

                    thisMargin = Math.floor(thisMargin - tabsOffset);

                    var thisOffset = thisMargin - 52;

                    /* handle IE margin difference*/
                    if($.browser.msie)
                    {
                      thisOffset = thisMargin - 15;
                    }

                    tabPanesContainer.css('margin-left', thisOffset);

                    tabPanesContainer.stop().animate({
                        height: menuHeight
                    }, dropDownSpeed);

                    tabMenuLinks.removeClass('activeTab');
                    thisMenuItem.addClass('activeTab');

                    var thisHash = thisMenuItem.find("a").attr('href');
                    var tabClicked = tabPanesAll.filter(thisHash);

                    tabClicked.appendTo(tabPanesContainer).show();

                    return false;

                }, function() {

                   $(this).stop();

                });
                });
            }); 
```

请帮我解决问题 谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:24:43.313

你有`wrong syntax for the click event`..

它只接受一个函数处理程序，而不是你写的两个

```
 $(".slide").click(function () {

     // Click event code
 }, function() {
              $(this).stop();

}); 
```

它**适用于悬停事件**，因为它可以采用两个处理函数..

要使单击事件起作用，您的签名必须是

```
$(".slide").click(function () {

         // Click event code
});

// Remove the other function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:56:39.343

从技术上讲，您不应该传递辅助回调，正在发生的事情是您的：

```
$(this).stop(); 
```

在所有其他代码之前触发。javascript 忽略了您指定的第一个回调函数，因为 .click 只应该接受回调方法。我很好奇你的 .stop() 甚至被用来做什么？我不完全确定，但我真的认为你根本不需要。

另一条建议是使用 .on() 方法而不是单击。.click() 方法已被弃用，因此您可以使用以下方法代替：

```
$(".slide").on('click', function () {
    // Click event code
}); 
```

你用 .click() 做的只是调用这个 .on() 加上使用 .on() 是更可扩展的意思，现在你可以绑定多个事件来监听，例如你可以这样做：

```
$(".slide").on('click, mouseover, mouseenter', function () {
    // Click event code
}); 
```

# sql - 没有加入的 SQL 'where 语句'

> ID：14265659
> 
> 赞同：-1
> 
> 时间：2013-01-10T19:22:04.440
> 
> 标签：sql, join, where

是否可以在不将`WHERE`其加入其他表的情况下执行语句？例如：

```
Table1(t1_id,name)

Table2(t2_id, fk_t1_id, something)

Table3(t3_id, fk_t2_id, blah) 
```

我想做这个：

```
SELECT name, something 
FROM table1 
JOIN table2 ON t1_id = fk_t1_id 
WHERE blah = 'somestring' 
```

还是我也必须加入 table3 才能使`WHERE`语句生效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:24:19.087

在您的示例中，您需要`Table3`才能到达该`blah`列。另外两个表不知道是什么`blah`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:25:07.663

您必须加入 table3。除非您在查询中包含该表，否则查询解析器无法知道您需要该表中的某些内容或进行比较。

```
SELECT name, something
FROM table1 t1
JOIN table2 t2 ON t1.t1_id = t2.fk_t1_id
JOIN table3 t3 ON t2.t2_id = t3.fk_t2_id
WHERE t3.blah = 'somestring' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:24:25.690

是的，您需要加入 Table3。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T19:24:46.077

您可以在 where 条件下执行子字符串

```
SELECT name, something 
FROM table1 JOIN table2 ON t1_id = fk_t1_id 
WHERE blah IN (Select blah from table3) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T20:35:10.637

与 table3 上的内部联接相反，半联接将起作用：

```
SELECT t1.name, t2.something
FROM table1 t1
JOIN table2 t2 ON t1.t1_id = t2.fk_t1_id
WHERE t2.t2_id IN (SELECT fk_t2_id FROM table3 WHERE blah = 'something') 
```

# python - Python重复删除

> ID：14265660
> 
> 赞同：5
> 
> 时间：2013-01-10T19:22:10.587
> 
> 标签：python, csv

我有一个关于在 Python 中删除重复项的问题。我已经阅读了很多帖子，但还没有能够解决它。我有以下 csv 文件：

**编辑**

**输入：**

```
ID, Source, 1.A, 1.B, 1.C, 1.D
1, ESPN, 5,7,,,M
1, NY Times,,10,12,W
1, ESPN, 10,,Q,,M 
```

**输出应该是：**

```
ID, Source, 1.A, 1.B, 1.C, 1.D, duplicate_flag
1, ESPN, 5,7,,,M, duplicate
1, NY Times,,10,12,W, duplicate
1, ESPN, 10,,Q,,M, duplicate 
1, NY Times, 5 (or 10 doesn't matter which one),7, 10, 12, W, not_duplicate 
```

换句话说，如果 ID 相同，则从源“NY Times”的行中获取值，如果“NY Times”的行具有空白值并且来自“ESPN”源的重复行具有该单元格的值，从具有“ESPN”源的行中获取值。对于输出，将原来的两行标记为重复并创建第三行。

为了进一步澄清，由于我需要在具有不同列标题的许多不同 csv 文件上运行此脚本，因此我不能执行以下操作：

```
 def main():
        with open(input_csv, "rb") as infile:
            input_fields = ("ID", "Source", "1.A", "1.B", "1.C", "1.D")
            reader = csv.DictReader(infile, fieldnames = input_fields)
            with open(output_csv, "wb") as outfile:
                output_fields = ("ID", "Source", "1.A", "1.B", "1.C", "1.D", "d_flag")
                writer = csv.DictWriter(outfile, fieldnames = output_fields)
                writer.writerow(dict((h,h) for h in output_fields))
                next(reader)
                first_row = next(reader)
                for next_row in reader:
                    #stuff 
```

因为我希望程序独立于表中的任何其他列在前两列上运行。换句话说，“ID”和“Source”将在每个输入文件中，但其余列将根据文件而变化。

非常感谢您提供的任何帮助！仅供参考，“来源”只能是：纽约时报、ESPN 或华尔街日报，重复的优先顺序是：如果有，请选择纽约时报，否则选择 ESPN，否则选择华尔街日报。这适用于每个输入文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:17:57.313

下面的代码将所有记录读入一个大字典，其键是它们的标识符，其值是将源名称映射到整个数据行的字典。然后它遍历字典并为您提供您要求的输出。

```
import csv

header = None
idfld = None
sourcefld = None

record_table = {}

with open('input.csv', 'rb') as csvfile:
    reader = csv.reader(csvfile)
    for row in reader:
        row = [x.strip() for x in row]

        if header is None:
            header = row
            for i, fld in enumerate(header):
                if fld == 'ID':
                    idfld = i
                elif fld == 'Source':
                    sourcefld = i
            continue

        key = row[idfld]
        sourcename = row[sourcefld]

        if key not in record_table:
            record_table[key] = {sourcename: row, "all_rows": [row]}
        else:
            if sourcename in record_table[key]:
                cur_row = record_table[key][sourcename]
                for i, fld in enumerate(row):
                    if cur_row[i] == '':
                        record_table[key][sourcename][i] = fld
            else:
                record_table[key][sourcename] = row
            record_table[key]["all_rows"].append(row)

print ', '.join(header) + ', duplicate_flag'

for recordid in record_table:
    rowdict = record_table[recordid]

    final_row = [''] * len(header)

    rowcount = len(rowdict)

    for sourcetype in ['NY Times', 'ESPN', 'Wall Street Journal']:
        if sourcetype in rowdict:
            row = rowdict[sourcetype]
            for i, fld in enumerate(row):
                if final_row[i] != '':
                    continue
                if fld != '':
                    final_row[i] = fld

    if rowcount > 1:
        for row in rowdict["all_rows"]:
            print ', '.join(row) + ', duplicate'

    print ', '.join(final_row) + ', not_duplicate' 
```

# jquery - jquery 3级菜单

> ID：14265661
> 
> 赞同：1
> 
> 时间：2013-01-10T19:22:14.613
> 
> 标签：jquery

我正在尝试制作 3 级垂直菜单

我有2级，但很难达到3级....

这是我的 2 级垂直菜单...

[http://fiddle.jshell.net/3Xvrc/1/](http://fiddle.jshell.net/3Xvrc/1/)

请问有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:37:46.960

## [jsBin 演示](http://jsbin.com/inuxob/3/edit)

```
(function($){ 

  $('.menu a').click(function( e ){
      e.preventDefault();
      $(this).parent('li').find('ul:first').slideToggle();    
  });

})(jQuery); 
```

HTML：

```
<ul class="menu">

    <li>
      <a href="#">1 level</a>   
      <ul class="depth2">
        <li><a href="#">2 level</a></li>
        <li><a href="#">2 level</a></li>
      </ul> 
    </li>

    <li><a href="#">1 level (no 2 level)</a></li> 

    <li>
      <a  href="#">1 level</a>
        <ul>
            <li><a href="#">2 level</a></li>
            <li>
                <a href="#">2 level (with 3 level)</a>
                <ul>
                    <li><a href="#">3 level</a></li>
                    <li><a href="#">3 level</a></li> 
                </ul>
            </li> 
        </ul>
    </li> 

</ul> 
```

CSS：

```
 .menu {
  width:200px;
  padding:0;
}
 .menu li { 
  background:#CCC;
  margin:0;
} 
 .menu li {
  display:block;
  color:#000;
  overflow:hidden;
}
 .menu li a {
  display:block;
  padding:5px 0;
  color:#06C;
  border-bottom:1px solid #666; 
} 
 .menu li > ul {
  display:none;
  overflow:hidden;
  padding:10;
} 
.menu p ul.depth2 li a{ 
  color:#fff;
  display:block; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:43:59.170

你可以用这个

```
$('a').on('click', function(evt){
  $(this).next().slideToggle();
}); 
```

[这里](http://fiddle.jshell.net/3Xvrc/3/)的例子

问候。

# android - Android 应用程序未启动，可能是 android 清单

> ID：14265662
> 
> 赞同：-1
> 
> 时间：2013-01-10T19:22:16.597
> 
> 标签：android, android-manifest

我想制作自己的应用程序，我只想启动它。但由于某种原因，我无法让它在我的模拟器上运行。我没有错误消息，所以我不知道出了什么问题：S 对不起，我是编程新手，我找不到任何可以帮助我的东西。谢谢 ！

这是我的代码：

```
xml file:
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/BBG"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Big Bang Theory" />

<Button
    android:id="@+id/HIMYM"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="How I Met Your Mother" />

</LinearLayout> 
```

安卓清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.watchserie"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name=".Menu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

菜单java文件：

```
package watchserie.niels;

import com.example.watchserie.R;

import android.app.Activity;
import android.os.Bundle;

public class Menu extends Activity {

protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T19:25:17.700

您的包裹名称不匹配。您的 Java 文件在`watchserie.niels`包中，而您的清单使用`com.example.watchserie`. 当您在 Activity 名称前使用一个点时，它指示将包名称自动添加到其中。因此，您告诉 Android 您的 Activity 是: `com.example.watchserie.Menu`，而实际上它是`watchserie.niels.Menu`

要修复它，请更改：

```
package="com.example.watchserie" 
```

到

```
package="watchserie.niels" 
```

并从您的 Java 文件中删除以下行：

```
import com.example.watchserie.R; 
```

**编辑**您也可以反过来更改它，但 Google Play（我猜还有其他应用商店）不允许您使用`com.example.*`命名空间上传任何应用。正因为如此，我建议你选择没有`com.example`它的包。

# html - 如何使宽度最大为 100%？当我同时使用 PC 和 iPhone 时？

> ID：14265666
> 
> 赞同：1
> 
> 时间：2013-01-10T19:22:28.347
> 
> 标签：html, css

我的布局中有一张桌子。我也在使用引导程序的响应式设计。
我想知道如何根据我正在使用的设备扩展其宽度。

例如，在我的电脑上，我的网站通常以大约 1200 像素的宽度显示。
在我的 iPhone 上，我的网站通常以大约 640 像素的分辨率显示。

我想尽可能地扩大气泡的宽度（我的意思是 100% 宽度） 气泡的宽度应该是灵活的。缩小窗口的宽度应使其自动调整大小。

我怎样才能？

**演示** [http://jsfiddle.net/8ASj4/](http://jsfiddle.net/8ASj4/)

**HTML**

```
<div class="chat">

<table>
  <tbody>
     <tr>
               <th>Body</th>
     </tr>

    <tr id="comment_617">
            <td><div class="bubble me"><span class="text-error">01-10 03:29</span>：Person A<br>
            bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
            <form action="/shop/walmart/posts/617" class="button_to" data-remote="true" method="post"><div><input name="_method" value="delete" type="hidden"><input data-confirm="Are you sure?" data-disable-with="deleting..." value="destroy" type="submit"><input name="authenticity_token" value="aoLKQnl4M2SWVlOrXGR+qIMLSeY5m1tKiC/PSnYQjmw=" type="hidden"></div></form>
            </div></td>
    </tr>

    <tr id="comment_615">
            <td><div class="bubble me"><span class="text-error">01-10 03:25</span>：Person A<br>
            bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
            <form action="/shop/walmart/posts/615" class="button_to" data-remote="true" method="post"><div><input name="_method" value="delete" type="hidden"><input data-confirm="Are you sure?" data-disable-with="deleting..." value="destroy" type="submit"><input name="authenticity_token" value="aoLKQnl4M2SWVlOrXGR+qIMLSeY5m1tKiC/PSnYQjmw=" type="hidden"></div></form>
            </div></td>
    </tr>
</tbody>

 <div> 
```

**CSS**

```
.chat {
    width: 100%;
    min-width: 300px;
}

.bubble{
    background-color: #FFFFFF;
    border-radius: 5px;
    box-shadow: 0 0 6px #B2B2B2;
    display: inline-block;
    padding: 10px 18px;
    position: relative;
    vertical-align: top;
    word-break: break-all;
}

.bubble::before {
    background-color: #FFFFFF;
    content: "\00a0";
    display: block;
    height: 16px;
    position: absolute;
    top: 11px;
    transform:             rotate( 29deg ) skew( -35deg );
        -moz-transform:    rotate( 29deg ) skew( -35deg );
        -ms-transform:     rotate( 29deg ) skew( -35deg );
        -o-transform:      rotate( 29deg ) skew( -35deg );
        -webkit-transform: rotate( 29deg ) skew( -35deg );
    width:  20px;
}

.me {
    float: left;   
    margin: 5px 45px 5px 5px;
    min-width: 250px; 
    width: 100%;      
}

.me::before {
    box-shadow: -2px 2px 2px 0 rgba( 178, 178, 178, .4 );
    left: -9px;           
}

.you {
    float: left;    
    margin: 5px 10px 5px 5px;
    min-width: 250px;
    width: 100%;          
}

.you::before {
    box-shadow: 2px -2px 2px 0 rgba( 178, 178, 178, .4 );
    right: -9px;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:38:32.810

只需删除所有与表格相关的标签（table/td/tr/etc.）

```
<div class="chat">

<div class="bubble me"><span class="text-error">01-10 03:29</span>：Person A<br>
            bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
            <form action="/shop/walmart/posts/617" class="button_to" data-remote="true" method="post"><div><input name="_method" value="delete" type="hidden"><input data-confirm="Are you sure?" data-disable-with="deleting..." value="destroy" type="submit"><input name="authenticity_token" value="aoLKQnl4M2SWVlOrXGR+qIMLSeY5m1tKiC/PSnYQjmw=" type="hidden"></div></form>
            </div>

              <div class="bubble me"><span class="text-error">01-10 03:25</span>：Person A<br>
            bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
            <form action="/shop/walmart/posts/615" class="button_to" data-remote="true" method="post"><div><input name="_method" value="delete" type="hidden"><input data-confirm="Are you sure?" data-disable-with="deleting..." value="destroy" type="submit"><input name="authenticity_token" value="aoLKQnl4M2SWVlOrXGR+qIMLSeY5m1tKiC/PSnYQjmw=" type="hidden"></div></form>
            </div>

 <div> 
```

[http://jsfiddle.net/8ASj4/2/](http://jsfiddle.net/8ASj4/2/)

# knockout.js - 淘汰赛验证、映射和动态表单

> ID：14265670
> 
> 赞同：1
> 
> 时间：2013-01-10T19:22:48.550
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-validation

我花了两天时间寻找可能的答案，并尝试了几乎所有的东西，看看什么可能有效。所以，如果我忽略了什么，请原谅我。这是场景。

假设我导航到某个 url，`/#/register/:session`并且这条路由触发了我希望用户填写的字段的 JSON 请求，以便注册此会话。像这样的东西：

```
fieldsMapping = { "include": ["fields"] }

ko.mapping.fromJS(data, fieldsMapping, self.attendee.registration.registrationFields); 
```

响应只是一个 JSON 对象，我将其映射到名为 registrationFields() 的视图模型。JSON 看起来像这样：

```
"fields": [
    { "field": "firstName", "required": true, "maxSize": 128 },
    { "field": "lastName", "required": true, "maxSize": 128 },
    { "field": "email", "required": true, "maxSize": 128 }
] 
```

下一步是为响应中的任何字段生成 HTML。

```
<div class="registration-fields" data-bind="foreach: webapp.attendee.registration.registrationFields.fields(), registrationFieldsLayout: true">
    <label data-bind="text: message('registration.registrant.field.' + field()), attr: { for: '#' + field() }"></label>
    <!-- ko if: field() === "firstName" || field() === "lastName" -->
     <input type="text" data-bind="attr: { id: '#' + field(), value: $parent.firstName, 'data-validate': (required()) ? true : false }">
    <!-- /ko -->
    <!-- ko if: field() === "email" -->
    <input type="email" data-bind="attr: { id: '#' + field(), value: $parent.email, 'data-validate': (required()) ? true : false }">
    <!-- /ko -->
</div> 
```

对于`$parent`变量，我附加了另一个视图模型来保存名为 RegistrationForm() 的表单数据。我在表单标签中这样做：

```
<form method="post" data-bind="with: webapp.attendee.registration.registrationForm"> 
```

registrationForm() 视图模型如下所示：

```
function (ko, validationRules) {

    return function RegistrationForm () {

        var self = this;

        validationRules();

        self.firstName = ko.observable().extend({ required: true });
        self.lastName = ko.observable().extend({ required: true });
        self.email = ko.observable().extend({ required: true, email: true });

        self.submit = function () {
            if (self.errors().length === 0) {
                console.log("hurrah");
            } else {
                console.log("errors should be shown");
                self.errors.showAllMessages();
            }
        }

        self.errors = ko.validation.group(self);

    }

} 
```

现在，我所有的视图模型都加载了 requirejs，这很棒。但是发生的情况是，我的字段在呈现后没有附加到 RegistrationForm() 视图模型，因此验证不起作用。

如果我输入一个静态字段，验证就可以了。

我尝试了很多不同的东西，但似乎没有任何效果。希望有人可以帮助阐明一些光。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:16:47.403

行。没关系。问题出在这里：

```
<input type="text" data-bind="attr: { id: '#' + field(), value: $parent.firstName, 'data-validate': (required()) ? true : false }"> 
```

应该：

```
<input type="text" data-bind="attr: { id: '#' + field(), 'data-validate': (required()) ? true : false }, value: $parent.firstName"> 
```

不敢相信我错过了。

# python - 如何让我的对象停止？

> ID：14265672
> 
> 赞同：0
> 
> 时间：2013-01-10T19:22:47.257
> 
> 标签：python, pygame

我可以让我的对象停止。一旦我按下 w、a、s 或 d，它就会移动但不会停止。当我按下其中一个方向时，它会移动但不会停止。当我释放钥匙时，我需要它停止。我们将不胜感激所有类型的帮助。这是我的代码：

```
while (running == 1):
    screen.fill(white)
    for event in pygame.event.get():
        if (event.type == pygame.QUIT):
            running = 0
        elif (event.type == pygame.KEYDOWN):
            if (event.key == pygame.K_d):
                dir = "R"
            elif (event.key == pygame.K_a):
                dir = "L"
            elif (event.key == pygame.K_s):
                dir = "D"
            elif (event.key == pygame.K_w):
                dir = "U"
            elif (event.key == pygame.K_ESCAPE): 
                sys.exit(0)
            elif (event.key == pygame.K_SPACE):
                shot=True
                xbul=xgun
                ybul=ygun
            #if key[K_SPACE]:
                #shot = True

    #OBJECT'S MOVEMENTS
    if (dir == "R" and xgun<595):
        xgun = xgun + 3
        pygame.event.wait
    elif (dir == "L" and xgun>0):
        xgun = xgun - 3
        pygame.event.wait
    elif (dir == "D" and ygun<460):
        ygun = ygun + 3
        pygame.event.wait
    elif (dir == "U" and ygun>0):
        ygun = ygun - 3

    screen.blit(gun, (xgun,ygun))
    #PROJECTILE MOTION
    #key = pygame.key.get_pressed()

    if shot == True:
        xbul = xbul + 3
        screen.blit(bullet, (xbul, ybul))

    if xbul>600:
        shot=False

    pygame.display.flip()
    time.sleep(0.01) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T19:25:45.667

你应该抓住`pygame.KEYUP`并停止当前的运动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:23:35.443

利用`pygame.key.get_pressed()`

那是

```
key = pygame.key.get_pressed()
if key[pygame.K_d]:
    dir = "R"
elif key[pygame.K_a]:
    dir = "L"
elif key[pygame.K_s]:
    dir = "D"
elif key[pygame.K_w]:
    dir = "U"
elif key[pygame.K_ESCAPE]: 
    sys.exit(0)
elif key[pygame.K_SPACE]:
    shot = True
    xbul = xgun
    ybul = ygun
else:         # If none of the keys is pressed, Stop.
    dir = 'S' 
```

# c++ - 将 boost::asio 线程池用于通用任务

> ID：14265676
> 
> 赞同：10
> 
> 时间：2013-01-10T19:23:03.420
> 
> 标签：c++, multithreading, c++11, threadpool, boost-asio

在[这篇博客](http://mostlycoding.blogspot.de/2009/05/asio-library-has-been-immensely-helpful.html)中，我发现了一个关于如何使用 boost::asio 创建简单线程池的非常简洁的示例。我基本上想这样使用它：

```
#include <thread>
#include <functional>
#include <boost/asio.hpp>

int main ( int argc, char* argv[] ) {
    asio::io_service io_service;
    asio::io_service::work work(io_service);

    std::vector<std::thread> threadPool;

    for(size_t t = 0; t < std::thread::hardware_concurrency(); t++){
        threadPool.push_back(thread(std::bind(&asio::io_service::run, &io_service)));
    }

    io_service.post(std::bind(an_expensive_calculation, 42));
    io_service.post(std::bind(a_long_running_task, 123));

    //Do some things with the main thread

    io_service.stop();
    for(std::thread& t : threadPool) {
        t.join();
    }
} 
```

据我所知，Boost::asio 主要用于网络 IO。但是，我主要想将它用于通用功能。并发问题将使用`asio::io_service::strand`.

所以我的问题是：即使我的程序不使用网络 IO，创建这样的线程池是个好主意吗？与其他线程池实现相比，是否存在明显的性能损失？如果是这样，是否有更好的实现也同样整洁？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T21:15:42.420

Boost.Asio 不仅仅用于网络编程，请参阅[参考文档](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference.html)。它对诸如此类的事情有广泛的支持

*   基于时间的操作 ( `deadline_timer`)
*   信号处理
*   特定于平台的操作，例如 posix 流和 Windows 句柄

我还在几个应用程序中将它用于其他目的。一个示例是一个线程池，用于为可能长时间运行的阻塞数据库操作提供服务，同时为应用程序提供异步接口。Boost.Asio 确实是一个非常强大的库。将它用于您建议的通用线程池可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-22T15:09:28.633

我用 boost asio 写了一个 ThreadPool 类。它可以工作，并且足够干净清晰，易于理解。[带有 boost asio 的 ThreadPool](https://gist.github.com/autosquid/c5e5b3964524130d1c4d)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T19:30:29.780

我看不出有任何理由不这样做。作为一个好处，您可以使用构建在 boost::asio 之上的截止时间计时器之类的东西。

# asp.net - 将 navigateURL 绑定到数据网格

> ID：14265679
> 
> 赞同：0
> 
> 时间：2013-01-10T19:23:18.383
> 
> 标签：asp.net, data-binding, datagrid, hyperlink, webforms

我已经创建了一个`datagrid`并将其链接到我的数据库中的一个表，然后我想添加一个`hyperlink`应该绑定到`column`来自`table`

```
 <asp:DataGrid ID="DataGrid1" runat="server" DataSourceID="SqlDataSource1">
        </asp:DataGrid>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:holidaysConnectionString %>" 
            SelectCommand="SELECT [Name], [External_Link] FROM [Person]">
        </asp:SqlDataSource>
        <asp:HyperLink ID="hyperlink" runat="server" NavigateUrl='http://www.google.com/<%# Bind("External_Link")%>' Target="_blank">Visit Google</asp:HyperLink> 
```

这不起作用有人可以告诉我我做错了什么吗？

我的 , 中有2*列*，*并且*，每一行*（**列内）*都包含对 a 的扩展名，这取决于单击了哪一行我会得到*，或者*`table`*`Name``External_Hyperlink`**`external_hyerplink`*`url`*`www.google.com/extension1``www.google.com/extension2 etc.`*

但不要认为我的方向是正确的。请给我一些想法来解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:35:54.207

请尝试以下示例：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">           
            <Columns>
                <asp:BoundField DataField="ProblemID" />
                <asp:HyperLinkField DataNavigateUrlFields="ProblemID" DataNavigateUrlFormatString="SmallWindow.aspx?id={0}"
                    DataTextField="Click here" NavigateUrl="SmallWindow.aspx" />
                <asp:BoundField DataField="Solution" />
            </Columns>
        </asp:GridView> 
```

**或者**

```
//This event should fire on Row Data Bound

protected void yourGrid_RowDataBound(object sender, GridViewRowEventArgs e)
{
        HyperLink hlControl = new HyperLink();
        hlControl.Text = e.Row.Cells[2].Text; //Take back the text (let say you want it in cell of index 2)
        hlControl.NavigateUrl = "http://www.stackoverflow.com";
        e.Row.Cells[2].Controls.Add(hlControl);//index 2 for the example 
```

**编辑**

尝试这样的事情：

```
<asp:HyperLink ID="HyperLink2" runat=server NavigateUrl='<%#Eval("Company_ID", "CompanyProfile.aspx?ID={0}")%>'><%#Eval("Name")%></asp:HyperLink> 
```

# java - 将 ArrayList 中的数字加起来显示

> ID：14265680
> 
> 赞同：0
> 
> 时间：2013-01-10T19:23:23.567
> 
> 标签：java

我想在文本文件中输出一些数字的总数，并使用 an`ArrayList`来寻找它们等，我不确定我会怎么做？这是我的代码：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.Scanner;

public class ArrayListOfNumbers {

    public static void main(String[] args) throws FileNotFoundException {
        ArrayList<String> numbers = new ArrayList<String>();
        Scanner Scan = new Scanner (new File("numbers.txt"));

        while (Scan.hasNext()){
            numbers.add(Scan.nextLine());
        }
        for(int i = 0; i < numbers.size(); i++){ 
            System.out.println(numbers.get(i));
        }

        System.out.println("")

        Scan.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:27:46.833

```
public static void main(String[] args) throws FileNotFoundException {
        Scanner Scan = new Scanner (new File("numbers.txt"));
        double sum = 0;
        while (Scan.hasNext()){
            sum += Double.parseDouble(Scan.nextLine());
        }

        System.out.println(sum);

        Scan.close();
    } 
```

# macros - Clojure，扩展以执行带有代码的列表的宏

> ID：14265682
> 
> 赞同：1
> 
> 时间：2013-01-10T19:23:32.457
> 
> 标签：macros, clojure

好的，所以我有这个宏，它应该接受不同数量的参数，然后用 try 和 catch 执行它们。我假设如果参数列表`arg-list`大于 2，那么列表中的第一个元素是绑定，例如这样`[a 0]`。所以`arg-list`可能看起来像这样：`([s (FileReader. (File. "text.txt"))] (. s read))`.

这就是我想出的：

```
(defmacro safe [& arg-list] (list 'if (list '< (list 'count arg-list) '2)
    (list 'try (list 'eval arg-list) (list 'catch 'Exception 'e 'e))
    (list 'do (list 'eval arg-list) (list 'try (list 'eval (list 'rest arg-list)) (list 'catch 'Exception 'e 'e))))) 
```

我一直在努力让它连续两天工作，但它从来没有奏效。当我尝试这个宏时，例如：

```
(safe (+ 2 3)) 
```

我收到此错误：

```
ClassCastException java.lang.Long cannot be cast to clojure.lang.IFn  user/eval91 (NO_SOURCE_FILE:100) 
```

我只用 Clojure 工作了四天，如果我的代码不好，请原谅我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T19:42:46.453

好吧...首先，我建议您阅读 clojure 的宏语法。我将在这里提供一些入门知识，但我不会深入探讨。

首先，这是你的宏。

```
(defmacro safe [bindings? & forms]                                              
  (let [bindings (if (and (even? (count bindings?)) (vector? bindings?))        
                   bindings? nil)                                               
        forms    (if bindings forms (cons bindings? forms))                     
        except  `(catch Exception e# e#)]                                       
    (if bindings                                                                
    `(let ~bindings (try ~@forms ~except))                                      
    `(try ~@forms ~except)))) 
```

现在来看看。

Clojure 的 (let) 宏需要一个具有偶数个参数的向量，并支持一些非常有趣的行为，称为[解构](http://clojure.org/special_forms#Special%20Forms--Binding%20Forms%20%28Destructuring%29)。出于这个宏的目的，我假设任何有效的绑定参数首先是一个向量，其次是偶数长度。(let) 的求值将执行相同的检查，但此宏必须执行此操作，因为第一个表单可能不是绑定而是要评估的表单，并且在这种情况下应该表现出不同的行为。

至于宏本身，我使用 (let) 来处理参数，该符号`bindings`具有双重目的，即指示绑定的存在以及获取绑定向量（如果存在）。`forms`从参数中的初始绑定（clojure 允许您这样做）重新定义为一个值，该值受`bindings`您希望在包含错误的环境中执行的整个表单序列的影响。`except`确实不需要该符号，它只是为了避免在每个扩展案例中重述该（捕获）形式的代码重复。

我使用的符号 `（称为反引号或反引号）在这里等同于普通引号 (')，除了 clojure 允许我在反引号形式而不是引用形式中使用宏扩展语法。宏语法包含 ~ (unquote) 运算符和 ~@ (insert (unquote)) 上运算符。使用这三位符号，我定义了两种所需的情况，带有绑定表单的 let 我插入绑定表单和要尝试的表单，以及简单的仅尝试情况。

可以消除条件以产生

```
(defmacro safe [bindings? & forms]                                              
  (let [bindings (if (and (even? (count bindings?)) (vector? bindings?))        
                   bindings? [])                                               
        forms    (if-not (empty? bindings) 
                   forms (cons bindings? forms))                     
        except  `(catch Exception e# e#)]                                      
    `(let ~bindings (try ~@forms ~except)))) 
```

但是当没有绑定形式时，你有一个多余的（let）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:30:33.773

你不需要`eval`这个 - 宏扩展的结果已经被评估了。使用宏中的语法引用最容易实现您想要的：

```
(defmacro safe [& args]
  (if (< (count args) 2)
    `(try ~@args (catch Exception e# e#))
    `(let ~(first args)
       (try ~@(rest args) (catch Exception e# e#)))))

(safe (+ 2 3)) => 5
(safe [x 3] (+ 2 x)) => 5
(safe (Integer/parseInt "a")) => #<NumberFormatException java.lang.NumberFormatException: For input string: "a"> 
```

您看到的异常的原因是，`arg-list`在您的示例中将是一个表单列表，在您的情况下，它有一个项目是 list `'(+ 2 5)`。当您评估第一项是列表的列表时，首先评估内部形式，然后评估外部形式：

```
(eval '(+ 2 3)) => 5
(eval '((+ 2 3))) => (eval '(5)) => exception, because 5 is not a function. 
```

您的宏可能会通过更改`(list 'eval arg-list)`为`(list 'eval (first arg-list))`.

# javascript - javascript 看不到函数

> ID：14265692
> 
> 赞同：1
> 
> 时间：2013-01-10T19:24:21.040
> 
> 标签：javascript

我在文件中有一个函数。
`<script type="text/javascript" src="domain.com/js/script.js"></script>`

这只是头部的脚本：

```
$(function($){
   function testFunc(obj) {
      obj.hide();
   }
}); 
```

在 index.php 中：
`<li onclick="testFunc(this)">text</li>`

没有任何改变，浏览器（Chrome）说： `Uncaught ReferenceError: testFuncis not defined`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:25:25.657

您有范围问题，只需从`document.ready`块中删除该功能：

```
//$(function($){
    function testFunc(obj) {
       obj.hide();
    }
//}); 
```

当您在另一个函数内部定义一个函数时，它只会在该函数内部可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T19:31:24.900

使用 jQuery 执行此操作的更好方法是：

```
$(function($){
    $('li').click(function(){
        $(this).hide();
    });
}); 
```

并删除您当前拥有的内联点击处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:41:43.097

语法错误。将您的javascript（上面提到的）替换为

```
 function testFunc(obj) {
        $(obj).hide();
    } 
```

# c# - 带孩子的 MVC PRG 模式

> ID：14265695
> 
> 赞同：5
> 
> 时间：2013-01-10T19:24:28.833
> 
> 标签：c#, asp.net-mvc, post-redirect-get

我正在尝试通过使用`[ImportModelStateFromTempData]`and`[ExportModelStateToTempData]`操作过滤器来实现 PRG 模式。这种模式适用于平面模型，但当我有一个子集合时，我无法让它工作。我的模型如下所示：

```
public class QuestionModel
{
    public string QuestionText { get; set; }

    public ICollection<ChoiceModel> Choices { get; set; }
}

public class ChoiceModel
{
    public string ChoiceText { get; set; }
} 
```

我的控制器如下：

```
[HttpGet, ImportModelStateFromTempData]
public ActionResult Create()
{
    return View();
}

[HttpPost, ExportModelStateToTempData]
public ActionResult Create(QuestionModel model)
{
     if(ModelState.IsValid)
     {
        // not getting here
     }

     return RedirectToAction("Create");
} 
```

我的视图允许用户向选项添加新项目，并且我验证选项必须是唯一的。当我的 ModelState 无效时，它会将 ModelState 打包成 TempData 并重定向到 HttpGet 操作。

此时我的所有子模型值都在 ModelState 中，但是在将模型传递给视图时它不会重建它们，因此我的视图显示添加了 0 个子模型。

有没有办法以某种方式将 ModelState 与 Model 合并，或者我不能将此模式与子对象一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T16:57:02.467

我怀疑`[ImportModelStateFromTempData]`会从中重建模型`ModelState`，我想象它只是获取***用户尝试的值***和***验证错误***，因此模型集合此时未初始化（GET）并且您没有从 POST 传递集合，它只会呈现模型初始状态，这就是为什么它适用于平面模型但不适用于这种情况下的集合。

因此，您必须找到一种方法将该集合或孔模型从 POST 传递到 GET 操作，并且选项是 TempData。

```
//POST - if validation fails
TempData["model"] = model;

//GET - must check if TempData["model"] is null first
QuestionModel model = (QuestionModel)TempData["model"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:41:34.933

检查此链接 [http://weblogs.asp.net/rashid/archive/2009/04/01/asp-net-mvc-best-practices-part-1.aspx#prg](http://weblogs.asp.net/rashid/archive/2009/04/01/asp-net-mvc-best-practices-part-1.aspx#prg)，您需要在其中使用 ModelStateTempDataTransfer 模板 onActionExecution

# binding - 绑定动态加载的fxml的宽高

> ID：14265697
> 
> 赞同：1
> 
> 时间：2013-01-10T19:24:30.840
> 
> 标签：binding, javafx-2, fxml

目前，我在运行时遇到动态加载的 FXML 文件的问题。将它们添加到窗格后，它们不会调整大小以使用该窗格的完整宽度和高度。

我使用此方法在我的窗格中加载 FXML：

```
public void showContentPane(String sURL){
    //1\. sURL can be something like "/GUI/home/master/MasterHome.fxml"
    //2\. getContentPane() returns following object: Pane pContent
    try {
        URL url = getClass().getResource(sURL);

        getContentPane().getChildren().clear();
        Node n = (Node) FXMLLoader.load(url, ResourceBundle.getBundle("src.bundles.bundle", getLocale()));

        getContentPane().getChildren().add(n);
    } catch (Exception ex) {
        System.out.println(ex.getMessage());
    }
} 
```

FXML 被加载并按原样工作，但是我注意到 FXML（在这种情况下作为节点添加）没有调整大小以使用内容窗格的完整高度和宽度（如果我在预览模式下使用 Scene 打开 FXML Builder，它可以完美地调整大小）。这是一种错误的方法还是有一种我显然没有找到的简单方法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:33:12.337

我根据安迪给我的线索调整了代码。我将 pContent 对象更改为 AnchorPane 而不是 Pane。方法如下：

```
public void showContentPane(String sURL){
    //1\. sURL can be something like "/GUI/home/master/MasterHome.fxml"
    //2\. getContentPane() returns following object: AnchorPane pContent
    try {
        URL url = getClass().getResource(sURL);

        getContentPane().getChildren().clear();

        //create new AnchorPane based on FXML file
        AnchorPane n = (AnchorPane) FXMLLoader.load(url, ResourceBundle.getBundle("src.bundles.bundle", getLocale()));

        //anchor the pane
        AnchorPane.setTopAnchor(n, 0.0);
        AnchorPane.setBottomAnchor(n, 0.0);
        AnchorPane.setLeftAnchor(n, 0.0);
        AnchorPane.setRightAnchor(n, 0.0);

        getContentPane().getChildren().add(n);
    } catch (Exception ex) {
        System.out.println(ex.getMessage());
    }
} 
```

提示：确保在加载的 FXML 文件中不使用固定宽度或高度变量。

# html - 带下划线模板示例的主干

> ID：14265699
> 
> 赞同：1
> 
> 时间：2013-01-10T19:24:37.723
> 
> 标签：html, backbone.js, underscore.js

我是新来的backscorejs 和underscorejs。我发现了一些可以观看的[视频](http://www.youtube.com/watch?v=_6pBvMK1Qgo)资料，但在尝试修改示例时遇到了问题。

这是我的代码：

```
<html>
<head >
    <meta charset="UTF-8">  
    <script type="text/javascript" src="javascript/jQuery.js"></script>
    <script type="text/javascript" src="javascript/underscore.js"></script>
    <script type="text/javascript" src="javascript/backbone.js"></script>

    <script type="text/template" id="list-template">
      <li><a href="<%= href %>"><%= text %></a></li>
    </script>

    <script type="text/javascript">

        model = new Backbone.Model({
            data: [
                {text: "Google", href: "google.com"},
                {text: "Facebook", href: "facebook.com"},
                {text: "Yahoo", href: "yahoo.com"}
            ]
        });

        var View = Backbone.View.extend({
            el: "#container",
            events: {
                "click button": "render"
            },
            render: function(){
                var data = this.model.get('data');
                for(var i = 0; i<data.length; i++){
                    var variables = { href: data[i].href, text: data[i].text };
                    var li = _.template( $("#list-template").html(), variables );
                    this.$el.find('ul').append(li);
                }
            }
        });

        var view = new View({ model: model });

    </script>
</head>

<body>
    <div id="container">
        <button>Load</button>
        <ul id="list">
    </ul>
    </div>
</body> 
```

它当然不起作用，我找不到原因。如果您看到请回答或指导如何在自定义事件上绑定模板而不是初始化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:45:50.810

问题是 JavaScript 是在页面上呈现元素之前执行的。将您的代码包装在`$(document).ready()`：

```
$(document).ready(function() {
    var model = new Backbone.Model({
    ....
    var view = new View({ model: model });
}); 
```

# java - 操作数组和向量

> ID：14265706
> 
> 赞同：1
> 
> 时间：2013-01-10T19:24:54.203
> 
> 标签：java

我这里有代码，可以通过一系列 for 循环尝试确定它是否是质数`int`。`vecArray`但是，当我运行程序时，我无法成功地将给定数组的每个素数找到/添加到提供的向量中。我错过了什么？

```
Vector<Integer> primeVec = new Vector<Integer>();
Vector<Integer> storage = new Vector<Integer>();
for ( int num : vecArray)  {
    //create array size of num
    resultArray = new int[num];
    for(int j = 1; j <= sqrt(num); j++)  {
        int result = num % j;
        if (result == 0)  {
             storage.add(j);
        }
    }
    //if resultArray has only two integers, then it must be prime
    int size = storage.size();
    if (size == 2)  {
       //add each 
       primeVec.add(num);
        System.out.println("You added " + num + " to the Vector for primes!");

    } 
    //print out all primes in vec
    for (int e = 0; e < primeVec.size(); e++)  {
     System.out.println("The prime in element number " + e + " is: " + primeVec.get(e));
    }
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:27:19.210

您的代码将尝试除以`1`两倍，因此`resultArray.length`至少为三。

您应该在`j = 1`而不是开始循环`j = 0`，并`resultArray`用`vector<int>`.

请注意，分解并不是确定数字是否为素数的最快方法。您不需要*存储*主要因素来计算它们。此外，一旦确定一个数字是合数，就可以结束循环。最后，您不需要尝试所有除数`num`：如果您尝试除数`sqrt(num)`并且没有一个除数`num`，那么您肯定知道`num`是素数。

# c++ - Windows XP 不会从 MinGW/bin 加载 libstdc++6.dll，而是从 exe 目录加载

> ID：14265707
> 
> 赞同：1
> 
> 时间：2013-01-10T19:24:59.793
> 
> 标签：c++, mingw

用 scons 编译 jsoncpp-src-0.5.0 后收到以下错误。生成的可执行文件可能无法从 MinGW/bin 目录加载 libstdc++6.dll，尽管它位于 PATH 上。

```
the procedure entry point _gxx_personality_v0 could not be located in the dynamic link library libstdc++6.dll 
```

将 dll 放入可执行文件的文件夹可以缓解此错误。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:32:20.867

有关Windows 如何为您的应用程序搜索 DLL 的（大量）详细信息，请参阅[动态链接库搜索顺序。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)似乎总是首先搜索应用程序的可执行目录。

# javascript - 字符串输入转义

> ID：14265711
> 
> 赞同：0
> 
> 时间：2013-01-10T19:25:07.390
> 
> 标签：javascript, yui

我在从文本框中获取输入并将其添加到字符串时遇到问题，它涉及 '\' 字符。由于普通字符串会将其视为转义，因此会弄乱一个字符串，然后将其传递给另一个函数。我是 javascript 和 yui 的新手，所以我只是想知道是否有一种内置方法可以转义我从文本框中获得的字符串值，所以它需要一个 '\' 并使其成为一个 "\" 等等.

我的代码看起来有点像这样

```
var requestStr = "\" Request\"";
requestStr = requestStr + "\"" + document.getElementById("textbox").value + "\","; 
```

编辑：修复代码以正确显示我的示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:49:29.107

尝试这个

```
var s=document.getElementById("textbox").value
if(var x=s.IndexOf('\\')){
s[x]='\\';
requestStr =requestStr +s ;
}
else
{
   requestStr =requestStr+ s;
} 
```

输出将是：“请求”“值”或“请求”“值”

# ios - 从 NSDictionaryResultType 获取关系

> ID：14265716
> 
> 赞同：0
> 
> 时间：2013-01-10T19:25:22.833
> 
> 标签：ios, core-data, nsmanagedobject

我有一个包含从核心数据获取结果的结果数组。它是一个字典数组（根据 NSDictionaryResultType）。

我获取的对象是汽车，汽车有名称、品牌、型号、颜色（我可以在数组中看到所有内容）。然而 car 也有 toCarParts 关系。此 NSSet 包含 carPart 对象（车轮、轮胎等）

我如何访问它（它在字典中有错误吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:51:41.000

[- (void)setPropertiesToFetch:(NSArray *)values](http://developer.apple.com/library/Mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html#//apple_ref/doc/uid/TP30001170-SW25)的文档指出：

> 属性描述可以表示属性、一对一关系或表达式。

因此，不可能与`NSSet`建立一对多关系`NSDictionaryResultType`。

# c - 文件计算

> ID：14265718
> 
> 赞同：0
> 
> 时间：2013-01-10T19:25:24.077
> 
> 标签：c, matlab

```
Day              price1          price2

2/2/2000         10                15

3/2/2000         12                18

4/2/2000         14                19 
```

对于每个值（价格 1 和价格 2），我想为每一列计算不同的 = 现在 - 过去（line2-line1）。

为了做到这一点，使用表格是正确的，有什么例子吗？

我有的

```
file = xlsread('example.xls');

y = length(price);

for i=1:y;
  difprice1 = line(i+1)-line(i)
  difprice2 = line(i+1)-line(i)

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:30:14.767

就像是：

```
for i = 1:length(price1)-1
    Diff(i,1) = price1(i+1)-price1(i);
    Diff(i,2) = price2(i+1)-price2(i);
end

or more efficiently:

Diff(:,1) = price1(2:end)-price1(1:end-1);
Diff(:,2) = price2(2:end)-price2(1:end-1);
....
Diff(:,N) = priceN(2:end)-priceN(1:end-1); 
```

当然，价格向量都必须具有相同的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:31:01.117

如果您的价格存储在具有连续天数和不同产品/价格的`m`x`n`矩阵 A 中，您可以通过 简单地获得每日变化。`m``n``A(2:end, :) - A(1:end-1, :)`

该计算采用所有“第二天”价格的矩阵，并逐个元素地减去所有“今天”价格的矩阵，从而得出整个时间窗口内的所有价格变化。

```
A = xlsread('example.xls');
dA = A(2:end, :) - A(1:end-1, :) 
```

现在`dA(:, 2:end)`包含您要求的所有数字。

# r - 可以将存储在向量中的值依次传递（给函数）

> ID：14265720
> 
> 赞同：4
> 
> 时间：2013-01-10T19:25:25.840
> 
> 标签：r, lapply

我需要 lapply 依次传递（给函数）存储在向量中的值。

```
values <- c(10,11,13,10)
lapply(foo,function(x) peakabif(x,npeaks=values)) 
```

所以得到：

```
peakabif(x1,npeaks=10)
peakabif(x2,npeaks=11)
peakabif(x3,npeaks=13)
peakabif(x4,npeaks=10) 
```

这是可能的还是我需要重新考虑使用 lapply ？函数内部的 for 循环会起作用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T19:30:23.507

您想为此使用`mapply`：`mapply(peakabif, x=foo, npeaks=values)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T19:30:56.203

有几种方法可以处理这个问题。您可以尝试直接索引向量方法。

```
lapply(1:length(foo), function(i) peakabif(foo[i], npeaks=values[i])) 
```

（而且有人已经把我打败到了 mapply 版本......）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T20:01:08.830

有时您可以转换现有函数，使其接受向量（或列表）`Vectorize`

```
vrep <- Vectorize(rep.int)
> vrep(list(1:4, 1:5), list(2,3) )
[[1]]
[1] 1 2 3 4 1 2 3 4

[[2]]
 [1] 1 2 3 4 5 1 2 3 4 5 1 2 3 4 5 
```

（在引擎盖下，它实际上是一个方便的包装器，`mapply`就像它`read.table`是一个包装器一样`scan`。）

# .htaccess - Htaccess 文件没有响应 - 内部服务器错误 500

> ID：14265724
> 
> 赞同：0
> 
> 时间：2013-01-10T19:25:47.947
> 
> 标签：.htaccess, mod-rewrite, friendly-url, internal-server-error

我在使用 .htaccess 文件时遇到了问题，本质上我只是想重写 url 以使其对用户更加友好。所以我目前的网址是这样的：

[http://divoseevolution.com/index.php?url=about](http://diverseevolution.com/index.php?url=about)

我想要的是这样的：

[http://divoseevolution.com/about/](http://diverseevolution.com/about/)

最后，我编写了自己的 .htaccess 文件，如下所示：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

现在我已经在我的服务器的其他目录中测试了它，它工作正常，但是在一个实际的域下，而不仅仅是一个子目录，它给了我一个`Internal Server Error 500`

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:41:12.787

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  ([^/]+)/?   [NC]
RewriteRule .*  index.php?url=%1     [L,QSA] 
```

它将静默映射：

`http://diverseevolution.com/anything/`

到：

`http://diverseevolution.com/index.php?url=anything`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:39:55.777

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^((about)([^?]*)) index.php?url=about [L,NC] 
```

# javascript - 检查表单字段中的值是否超过某个数字

> ID：14265736
> 
> 赞同：2
> 
> 时间：2013-01-10T19:26:35.340
> 
> 标签：javascript, webforms

我正在尝试编写一个简单的检查，以查看字段是否填写了超过 5 的值。我已经设置了一个表单并在其中放入了一些文本字段，其中一个字段将需要美元金额。我正在尝试检查这个美元金额是否超过 5 美元，如果不是只是弹出一个警报让用户知道它没有超过 5 美元。我到目前为止的代码是：

```
 <script>
    function validateForm()
    {
        var x=document.forms["amnt"]["Amount"].value;
        if (x<5)
        {
            alert("value is under 5 dollars!");
            return false;
        }

    }
</script> 
```

该脚本适用于检查字段是否为空等事情，但是当我尝试更改它以检查字段的值时，它只会让用户继续，即使值低于 5。

任何人都可以提供有关如何获取此信息以检查该字段的实际数值并查看它是否高于 5 美元金额的任何反馈吗？

编辑：感谢所有答案，他们都很好，我是个白痴，忘记包含表单的 onsubmit 选项，所以它没有执行我的任何脚本。现在已经解决了你们提出的每一个好的建议都很好。感谢大家的帮助，很抱歉混淆了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:27:40.087

尝试这个：

```
var x=parseInt(document.forms["amnt"]["Amount"].value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:44:31.353

```
<script>
function validateForm()
{
    var x = parseInt(document.forms["amnt"]["Amount"].value);
    if (x && Number(x)<5)
    {
        alert("value is under 5 dollars!");
        return false;
    }

}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:36:01.490

我将使用 parseInt 并将其第二个参数设置为 10，因此它使用基数 10 解析输入。

```
var x=parseInt(document.forms["amnt"]["Amount"].value, 10); 
```

如果您省略参数，在某些（较旧的）浏览器中可能会发生这样的事情。

parseInt('09') == 0 （它被解析为八进制，因为前导 0）

parseInt('09', 10) == 9 （强制小数）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T19:29:39.550

当你调用时你会得到一个字符串`.value`。你应该比较整数，所以使用`parseInt()`.

```
<script>
    function validateForm()
    {
        var x = parseInt(document.forms["amnt"]["Amount"].value);
        if (x<5)
        {
            alert("value is under 5 dollars!");
            return false;
        }

    }
</script> 
```

# java - PageFactory.initElements 填充了哪些 WebElements？

> ID：14265737
> 
> 赞同：3
> 
> 时间：2013-01-10T19:26:44.343
> 
> 标签：java, selenium, integration-testing, selenium-webdriver, pageobjects

我正在尝试将`PageObject`设计模式与我的 Selenium 测试一起使用，并且我有以下一组 Page 类：

*   一个`PageObject`基类，用于跟踪 WebDriver 和站点的基本 URL。它还具有`WebElement`显示在站点的每个页面上的私有资源，例如菜单栏和侧栏链接。有一些公共方法可以访问这些资源，例如登录和注销。
*   `UserRolePage`扩展的类`PageObject`。根据登录用户的角色，这些类还有其他私有`WebElements`的，一旦用户登录，它们就会在每个页面上持续存在。还有一些公共方法可以访问这些资源。
*   `UserLandingPage`扩展类的特定页面（例如） `UserRolePage`。这些都有自己的特定页面`WebElements`和操作。

当我`UserLandingPage`使用该方法创建一个新的：

```
 UserLandingPage userLanding = PageFactory.initElements(driver, UserLandingPage.class); 
```

哪个`WebElements`被填充？只是对`UserLandingPage`类可见的那些，还是`PageFactory`以某种方式查看所有基类并填充这些 WebElement？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:37:56.840

您已注释的所有可见字段都将初始化为关联的 Web 元素。

# excel - 根据下拉菜单中的输入显示一系列单元格

> ID：14265740
> 
> 赞同：0
> 
> 时间：2013-01-10T19:26:51.460
> 
> 标签：excel, vba

我试图在工作表上节省空间，该工作表在 A 列中包含课程列表，在从 AB 开始的连续列中包含日期。在课程下，我有一个冻结帧中的人员列表，填充单元格以指示他们是否可用我目前正在通过填充日期列下的单元格来注释课程的举办日期。我想做的是有一个带有课程名称的下拉菜单，它将在右侧显示相应的填充单元格。看起来这应该是可能的，但我一直无法找到真正符合我要求的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:35:32.890

好吧，在我看来，您想隐藏所有行，可能应该锁定它们以确保更改数据，然后插入下拉列表、列表框、组合框或您喜欢的任何内容。然后你可以通过做类似的事情来填充列表......

```
 For Each cell in Worksheet("").Range("Your Range Here")
         ComboBox1.Add(cell)
   Next 
```

或者...

```
 ComboBox1.AddRange("Your Range Here") 
```

然后，您应该使用 ComboBox_SelectedIndexChanged（或类似）事件来确定当前选择的课程，例如...

```
 If e.SelectedIndex = "Some Course" Then
       ' Unhide Proper Rows/Columns
   End If 
```

不要忘记检查“-1”（未选择任何内容）

```
 If e.SelectedIndex = -1 Then Exit Sub 
```

如果您需要更具体的答案，请告诉我，我很难跟踪数据在工作表中的位置，您说“连续列”，我暗示的意思是，在 A 列连续有一门课程，然后同一行中的几个日期，直到 AB 列。希望有帮助。

# facebook-graph-api - 使用 Facebook iOS SDK 3.1.1 签入的图形 API

> ID：14265741
> 
> 赞同：6
> 
> 时间：2013-01-10T19:27:15.900
> 
> 标签：facebook-graph-api, ios6, checkin, facebook-checkins

我正在使用 Facebook SDK 3.1.1 登录以及使用 Facebook 签到。使用 Facebook 登录它工作正常，但使用图形 API 签入会出错。

这是我为签入@“friends_status”，@“user_checkins”，@“friends_checkins”，@“user_status”而给予的所有权限。

这是请求：

```
[FBRequestConnection startForPostStatusUpdate:message 
                                        place:placeId 
                                         tags:nil 
                            completionHandler:
      ^(FBRequestConnection *connection, id result, NSError *error) {
           NSLog(@"Response....... \n\n %@  %@ %@",connection,result,error);
      }
]; 
```

回复：

> )> (null) Error Domain=com.facebook.sdk Code=5 "操作无法完成。(com.facebook.sdk error 5.)" UserInfo=0x808a5a0 {com.facebook.sdk:ParsedJSONResponseKey={type = 可变字典，count = 2，条目 => 1：{contents = "code"} = {value = +403，type = kCFNumberSInt32Type} 2：{contents = "body"} = {type = 可变字典，count = 1 , 条目 => 11 : {contents = "error"} = {type = mutable dict, count = 3, entries => 2 : {contents = "type"} = {contents = "OAuthException"} 3 : {contents = " message"} = {contents = "(#200) 用户尚未授权应用程序执行此操作"} 6 : {contents = "code"} = 200 }
> 
> }
> 
> } , com.facebook.sdk:HTTPStatusCode=403}

任何人都可以帮我解决代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T13:40:55.287

[Post](https://developers.facebook.com/docs/reference/api/post/)的`location`参数需要权限。`read_stream`

# openlayers - Openlayers map.removeControl() 错误

> ID：14265744
> 
> 赞同：0
> 
> 时间：2013-01-10T19:27:22.933
> 
> 标签：openlayers

我无法从地图中删除editingToolBar。我不明白为什么这段代码不起作用：

```
var editingToolBar = new OpenLayers.Control.Panel({
    displayClass: 'customEditingToolbar',
    allowDepress: true
}); 

var draw = new OpenLayers.Control.DrawFeature(
    newShape, OpenLayers.Handler.Polygon,
    {
       title: "Draw Feature",
       displayClass: "olControlDrawFeaturePolygon",
       multi: true
    }
);

var edit = new OpenLayers.Control.ModifyFeature(newShape, {
    title: "Modify Feature",
    displayClass: "olControlModifyFeature"
});

editingToolBar.addControls([edit, draw]);
map.addControl(editingToolBar);

function stopEditing(){
    map.removeControl(editingToolBar);
} 
```

感谢调试！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:02:07.593

最后，错误是editingToolBar变量未定义为全局变量，而是在函数内部，因此无法在stopEditing()函数中访问。

在全局中定义 var：

```
var editingToolBar; 
```

# node.js - 如果您正在运行 Express.js，您如何使用 Connect.js 方法？

> ID：14265757
> 
> 赞同：0
> 
> 时间：2013-01-10T19:28:03.110
> 
> 标签：node.js, express, connect.js

我正在使用带有 Express 的 Node。Express 将 Connect 埋在其中。但是，您如何称呼 Connect 的各种方法？当我需要 Express 时，执行 express.middleware.someconnectmiddleware 失败...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T04:37:01.090

它们都以相同的名称在 express 上提供。

```
express.bodyParser == connect.bodyParser 
```

# conditional-statements - html5 样板条件 css 语句 - 显示问题？

> ID：14265768
> 
> 赞同：0
> 
> 时间：2013-01-10T19:28:55.607
> 
> 标签：conditional-statements, html5boilerplate

在我的网站上使用 Google 字体和下面的代码。顶部添加了一个 ie8 类，因此我可以删除我的 css 中字体的任何引用。底部仅在 ie9 或非 ie 时才添加字体 css。

“问题”是当我将它上传到服务器并对其进行测试时。在 ff、moz、opera 和 ie9 中运行良好。当我在 ie9 (f12) 中使用开发人员工具将浏览器模式切换到 ie8 或 ie7 时，页面是空白的。可以查看源代码，但没有任何显示。

现在，在本地做同样的事情（使用 xampp）它可以按预期工作。我不明白为什么这在“生活”时不起作用。

```
<!DOCTYPE html>
<!--[if lte IE 8 ]> <html class="ie8" lang="en-US"> <![endif]-->
<!--[if (gt IE 8)|!(IE)]><!--> <html lang="en-US"> <!--<![endif]-->

<head>
<meta charset="utf-8">
<title>test</title>
<meta name="description" content="test">
<link rel="stylesheet" href="/css/base.css" type="text/css">
<link rel="stylesheet" href="/css/styles.css" type="text/css">
<!--[if (gt IE 8)|!(IE)]><!-->
<link href="http://fonts.googleapis.com/css?family=Kite+One|Open+Sans:400italic,400,700" rel="stylesheet" type="text/css">
<!--<![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:21:47.467

呃...通过优化设置发布时，评论被删除。确保评论留下来就行了。

# android - 从 Android 应用授权和访问 Google Tasks API？

> ID：14265770
> 
> 赞同：1
> 
> 时间：2013-01-10T19:29:07.167
> 
> 标签：android, oauth, google-tasks-api

我正在尝试向我的应用程序添加对 Google Tasks 的支持——具体来说，该应用程序应该能够添加新任务。

这周的大部分时间我都在试图完成这个任务，但没有成功。具体来说，我没有设法让我的应用程序完全授权访问 API。我找到了 3-5 个不同的教程或文档集来说明如何做到这一点：

*   [https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android)
*   [https://google-api-client-libraries.appspot.com/documentation/tasks/v1/java/latest/index.html](https://google-api-client-libraries.appspot.com/documentation/tasks/v1/java/latest/index.html)
*   [https://developers.google.com/google-apps/tasks/instantiate](https://developers.google.com/google-apps/tasks/instantiate)
*   [http://developer.android.com/google/play-services/auth.html](http://developer.android.com/google/play-services/auth.html)
*   [http://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html](http://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html)
*   [http://code.google.com/p/google-api-java-client/wiki/OAuth2](http://code.google.com/p/google-api-java-client/wiki/OAuth2)

上面的许多内容似乎相互矛盾，或者至少使用了不同的 API，它们的重叠对我来说并不是很明显。我最接近的是通过上面第一个链接（http://bit.ly/UHTKNW）中引用的示例代码。正如预期的那样，我可以让它编译和运行，甚至请求用户访问任务的权限。但它随后失败，出现 403 Forbidden “access not configured”异常。我假设我需要提供 API 密钥和/或客户端密码，但示例中使用的 API 似乎没有提供明显的方法来做到这一点。我也不清楚是否需要设置签名证书指纹才能完成这项工作，如果需要，如何去做。

所以我被卡住了，困惑，超级沮丧。任何帮助将不胜感激。

谢谢。——戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T21:25:19.947

这些 API 发生了很大变化，我可以理解您的沮丧。

查看[最新的示例应用程序](http://samples.google-api-java-client.googlecode.com/hg/tasks-android-sample/instructions.html)。它包含有关设置 API 访问和入门的说明。

基本上，您只需在 API 控制台中注册您的应用程序，您的代码就不必处理任何 API 密钥：

```
GoogleAccountCredential credential = GoogleAccountCredential.usingOAuth2(context, TasksScopes.TASKS);
credential.setSelectedAccountName(accountName);

mService = new com.google.api.services.tasks.Tasks.Builder(new NetHttpTransport(), new GsonFactory(), credential)
        .setApplicationName("YourApplicationName").build(); 
```

任务 API 可能会抛出不同的异常，例如当用户必须确认您的应用程序的访问权限时。在示例中，[`CommonAsyncTask`](http://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/src/main/java/com/google/api/services/samples/tasks/android/CommonAsyncTask.java?repo=samples)与他们打交道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:36:15.457

检查我的其他答案[使用 accountmanager 访问 youtube 帐户](https://stackoverflow.com/questions/12841352/access-youtube-account-with-accountmanager/12841485#12841485)

它适用于 YouTube，但区别只是将正确的“链接”传递给代码。希望能帮助到你。

# c# - Xml 反序列化和默认值

> ID：14265771
> 
> 赞同：2
> 
> 时间：2013-01-10T19:29:10.347
> 
> 标签：c#, xml, deserialization

我有一个包含模板（默认值）和指定字段的非标准 XML。作为一个例子总是受欢迎的：

```
<MyClass>
   <ArrayOfSubClass>
      <SubClass>
         <Par1>1</Par1>
         <Par2>2</Par2>
         <Par3>3</Par3>
         <ArrayOfSpecific>
            <Specific>
               <Par1>11</Par1>
            </Specific>
         </ArrayOfSpecific>
      </SubClass>
   </ArrayOfSubClass>
</MyClass> 
```

我想将此类反序列`MyClass`化为一个对象。如您所见，`MyClass`是一个类的集合，`SubClass`它具有三个参数和一个类的集合`Specific`。类`SubClass`和`Specific`派生自同一个母类。

什么 ISpecific 我想找到默认值（即在 中找到的值`SubClass`），除非给出了一个字段。到目前为止，我所做的是实现一个方法，该方法通过反射检查类的属性是否具有属性类型的默认值，如果是这种情况，则将其`Specific`替换为属性。`SubClass`它工作得很好，但我没有涵盖所有情况。例如，假设我有一个 double 属性的值`Par1`，`SubClass`比如`Par1 = 1.234`，但我希望它是 now `0`。问题是这`0`是 double 类型的默认值，因此使用我的方法，我将检索`SubClass`.

最好的办法是首先反序列化`MyClass`对象，然后将`Specific`具有相同属性值的类的所有属性放入 中`SubClass`，然后再次反序列化到这个现有对象中，这将只更改 XML 文件中给出的属性。

这很棘手，我可以想象我的问题不容易理解......

[编辑：]为了更容易理解，这是我想要反序列化后的结果

```
<MyClass>
   <ArrayOfSubClass>
      <SubClass>
         <Par1>1</Par1>
         <Par2>2</Par2>
         <Par3>3</Par3>
         <ArrayOfSpecific>
            <Specific>
               <Par1>11</Par1>
               <Par2>2</Par2>
               <Par3>3</Par3>
            </Specific>
         </ArrayOfSpecific>
      </SubClass>
   </ArrayOfSubClass>
</MyClass> 
```

反序列化后通过反射完成，如果 的属性`Specific`有默认值，则取类的值`SubClass`。棘手的情况如下

```
<MyClass>
   <ArrayOfSubClass>
      <SubClass>
         <Par1>1</Par1>
         <Par2>2</Par2>
         <Par3>3</Par3>
         <ArrayOfSpecific>
            <Specific>
               <Par1>0</Par1> <----- 0 is the default value of a double
            </Specific>
         </ArrayOfSpecific>
      </SubClass>
   </ArrayOfSubClass>
</MyClass> 
```

目前结果将是

```
<MyClass>
   <ArrayOfSubClass>
      <SubClass>
         <Par1>1</Par1>
         <Par2>2</Par2>
         <Par3>3</Par3>
         <ArrayOfSpecific>
            <Specific>
               <Par1>1</Par1>   <---- as 0 is the default value of a double, this property is set to the value of the SubClass
               <Par2>2</Par2>
               <Par3>3</Par3>
            </Specific>
         </ArrayOfSpecific>
      </SubClass>
   </ArrayOfSubClass>
</MyClass> 
```

但我想要

```
<MyClass>
   <ArrayOfSubClass>
      <SubClass>
         <Par1>1</Par1>
         <Par2>2</Par2>
         <Par3>3</Par3>
         <ArrayOfSpecific>
            <Specific>
               <Par1>0</Par1>
               <Par2>2</Par2>
               <Par3>3</Par3>
            </Specific>
         </ArrayOfSpecific>
      </SubClass>
   </ArrayOfSubClass>
</MyClass> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:55:43.397

以下是用于序列化的 CodeProject 链接的集合，可能会有所帮助：

*   [二进制](http://www.codeproject.com/Articles/254617/Serialization-101-Part-I-Binary-Serialization)
*   [肥皂](http://www.codeproject.com/Articles/255559/Serialization-101-Part-II-SOAP-Serialization)
*   [XML](http://www.codeproject.com/Articles/292726/Serialization-101-Part-III-XML-Serialization)

虽然我不确定我是否理解您的问题，但您能否不让您的类可序列化，并且在 MyClass 示例中，为适当的值编写序列化代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:13:35.707

好的，我找到了解决我的问题的解决方法。我分两步（实际上是三步）来做这件事。首先，我将 XML 反序列化到我的类中。其次，我将`Specific`类的所有属性设置为我在反射中找到的默认值`SubClass`，期望一个字段（`Specific`类的 If）。第三，我将 XML 重新加载到`DataSet`. 在那里，我查看`DataTable`named `Specific`，对于我的类的所有属性，我查看是否有任何同名的列，如果单元格包含一个值，我将它放在我的类中。

咳咳！！！！不是真正的美丽，但它确实有效。

```
 DataSet xmlDS = new DataSet();
     xmlDS.ReadXml(filename);
     GetSpecifiedValuesInDataSet(xmlDS);

     DataTable table = xmlDS.Tables["Specific"];

     foreach(ArrayOfSubClass array in this.Items)
     {
        foreach(SubClass sub in array)
        {
           foreach(Specific specific in sub)
           {
              Type specificType = specific.GetType();

              DataRow modelRow = null;
              foreach(DataRow row in table.Rows)
              {
                 if(row["Par1"].ToString().Equals(specific.Par1.ToString()))
                 {
                    modelRow = row;
                    break;
                 }
              }

              if(modelRow != null)
              {
                 foreach(PropertyInfo propSpecific in specificType.GetProperties())
                 {
                    string propertyName = propSpecific .Name;
                    foreach(DataColumn col in table.Columns)
                    {
                       if(col.ColumnName.Equals(propertyName))
                       {
                          if(!string.IsNullOrEmpty(modelRow[propertyName].ToString()))
                          {
                             object value = Convert.ChangeType(modelRow[propertyName], propSpecific.PropertyType);
                             propSpecific.SetValue(modelProd, value, null);
                          }
                       }
                    }
                 }
              }
           }
        }
     } 
```

和瞧

# google-app-engine - Google 应用程序引擎 + Tiles = 错误 500 null

> ID：14265772
> 
> 赞同：1
> 
> 时间：2013-01-10T19:29:19.980
> 
> 标签：google-app-engine, struts2, tiles

我正在使用 Google Application Engine 和 Struts2 + Tiles 构建和应用程序。这是我的配置。

网页.xml：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<filter>
  <filter-name>struts2</filter-name>
  <filter-class>
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
  </filter-class>
</filter>

<filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
  <listener-class>org.apache.struts2.tiles.StrutsTilesListener</listener-class>
</listener>

<welcome-file-list>
  <welcome-file>index.html</welcome-file>
</welcome-file-list>

<servlet>
  <servlet-name>SystemServiceServlet</servlet-name>
  <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
  <init-param>
    <param-name>services</param-name>
    <param-value/>
  </init-param>
</servlet>
<servlet-mapping>
  <servlet-name>SystemServiceServlet</servlet-name>
  <url-pattern>/_ah/spi/*</url-pattern>
</servlet-mapping>
</web-app> 
```

struts.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

  <package name="user" extends="struts-default">
    <result-types>
      <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" />
    </result-types>

    <action name="Login">
      <result type="tiles">login.page</result>
    </action>
    <action name="Welcome" class="net.nahoot.web.culturewatch.action.WelcomeUserAction">
      <result type="tiles" name="SUCCESS">wellcome.page</result>
     </action>
   </package>
</struts> 
```

瓷砖.xml：

```
<!DOCTYPE tiles-definitions PUBLIC
"-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
"http://struts.apache.org/dtds/tiles-config_2_0.dtd">

<tiles-definitions>

  <!-- common layout components -->
  <definition name="baselayout.page" template="/baseLayout.jsp">
    <put-attribute name="header" value="/header.jsp" />
  </definition>

  <definition name="login.page" extends="baselayout.page" >
    <put-attribute name="body" value="/User/pages/login.jsp" />
  </definition>

  <definition name="wellcome.page" extends="baselayout.page" >
    <put-attribute name="body" value="/User/pages/wellcome_user.jsp" />
  </definition>

</tiles-definitions> 
```

结果，当我调用时`http://localhost:8888/culturewatchweb/Login`，是：Error 500 null

在日志上我看到：

```
10/Jan/2013 19:09:09 org.apache.tiles.impl.BasicTilesContainer render
WARNING: Unable to find the definition 'null'
10/Jan/2013 19:09:09 com.opensymphony.xwork2.util.logging.commons.CommonsLogger error
SEVERE: Exception occurred during processing request: null
org.apache.tiles.definition.NoSuchDefinitionException
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:578)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:246)
    at org.apache.struts2.views.tiles.TilesResult.doExecute(TilesResult.java:105)
    at     org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)
    at     com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:367)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:271)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:191)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:73)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:91)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:252)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:193)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:544)
at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

但我不明白那个 null 是从哪里来的。我没看到什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:39:43.913

尝试将其添加到您的`web.xml`：

```
 <context-param>
        <param-name>org.apache.tiles.definition.DefinitionsFactory.DEFINITIONS_CONFIG</param-name>
        <param-value>/WEB-INF/tiles.xml</param-value>
    </context-param> 
```

**更新**
似乎这是你的问题，你应该``tiles-default`在你的包中扩展

```
<package name="user" extends="struts-default, tiles-default"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:49:47.917

您应该关闭 OGNL 安全管理器 - 它正在执行安全检查，这在 GAE 中不受支持。创建监听器并在 web.xml 中打开它：

my.listener.GAESecurityFixListener.java

```
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.http.HttpSessionAttributeListener;
import javax.servlet.http.HttpSessionBindingEvent;
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSessionListener;

import ognl.OgnlRuntime;

public class Struts2ListenerOnGAE implements ServletContextListener,
        HttpSessionListener, HttpSessionAttributeListener {

    public void contextInitialized(ServletContextEvent sce) {
        OgnlRuntime.setSecurityManager(null);
    }

    @Override
    public void contextDestroyed(ServletContextEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void sessionCreated(HttpSessionEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void sessionDestroyed(HttpSessionEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void attributeAdded(HttpSessionBindingEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void attributeRemoved(HttpSessionBindingEvent arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public void attributeReplaced(HttpSessionBindingEvent arg0) {
        // TODO Auto-generated method stub

    }

} 
```

网页.xml：

```
<web-app>
....
    <listener>
        <listener-class>my.listener.GAESecurityFixListener</listener-class>
    </listener>

</web-app> 
```

# android - 移动浏览器插件实现

> ID：14265774
> 
> 赞同：1
> 
> 时间：2013-01-10T19:29:31.753
> 
> 标签：android, ios, internet-explorer, google-chrome, mozilla

我需要在 android/iOS 浏览器中实现我自己的插件。你知道有机会做到这一点吗？（如 Mozilla、IE、Chrome 等）。请指教。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:34:04.620

如果我们谈论的是股票（OOB）浏览器：

**Windows 电话：**否

**Android：**不是真的（参考[这里](https://stackoverflow.com/questions/3960050/how-to-develop-plugins-for-the-native-android-browser)）

**iOS：**没有

但是，您可以开发注册特定类型或文件关联的应用程序，这些应用程序可以在浏览器遇到操作系统未处理的特定文件时启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T07:26:21.227

您可以[在 Firefox for Android 上开发移动扩展](https://addons.mozilla.org/en-US/android/)。我不认为其他移动浏览器支持扩展。

# ios - iOS - UIPickerView 禁用组件

> ID：14265776
> 
> 赞同：3
> 
> 时间：2013-01-10T19:29:43.167
> 
> 标签：ios, components, uipickerview

我有一个`UIPickerView`像这样工作的动态：

*   仅从 1 个组件开始
*   选择一行时，添加一个新组件

为了精确起见，我所说的组件是指列。

我只想激活我最后添加的组件。其他人应该完全禁用，甚至不能滚动或选择行。

我已经知道如何动态添加一个组件，但我不知道要禁用一个。

有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:35:00.640

我不知道在不完全自己实现的情况下禁用组件的方法，但是您可以做的是一次仅显示一个组件并添加带有“后退”按钮的附件视图，例如，如果您是选择一个位置，您将显示一个带有状态的组件，当用户选择一个州时，您将用该州的城市名称替换该组件，并添加一个“后退”按钮让他们在必要时回溯。对于您想要做的事情，这是我所知道的最干净的解决方案。

如果您绝对必须“禁用”一个组件，您将别无选择，只能继承 UIPickerView 并覆盖 touchesBegan:withEvent 和类似方法以基本上忽略对其他组件的触摸。要“禁用”，您可以在禁用的组件上放置一个 alpha < 1.0 的灰色层。我必须警告你，如果没有正确实施，这可能会变得丑陋并产生不可预见和不良后果。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-14T15:29:29.120

我创建了两个 UIView，一个用于保存选择器，另一个用于启用用户输入以捕获触摸的子视图。将它放在组件上，您可以根据需要切换 userInputEnabled。

# jquery - 为什么这段代码似乎没有运行？

> ID：14265778
> 
> 赞同：0
> 
> 时间：2013-01-10T19:29:52.350
> 
> 标签：jquery

每当为子输入元素触发 keydown 事件时，我正在编写一个 jquery 脚本来更改父 div 的颜色，但代码似乎没有运行。

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script>
            $(document).ready(function(){
                        $("input").keydown(function(){
                        $("#div").css("background-color","teal");
                    });
                });
        </script>
    </head>
    <body>
    <div id="div">
        <input type="text">
    </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:33:34.910

您在 jquery 链接中忘记了“http”（假设您正在使用`file://`访问文件），更改

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

至

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

编辑：

当准备好去服务器时，把它改回说`//ajax.googleapis.com/...`以避免@Femaref提到的http/https问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:34:56.107

如果这是您的所有代码，那么 div 周围没有任何空间来显示背景。

请看这个小提琴。[http://jsfiddle.net/RcyQW/](http://jsfiddle.net/RcyQW/)

如果添加`padding:5px;`div 则显示背景颜色。

另请注意，只有当用户在输入中输入内容时才会触发它，而不是当它具有焦点时。

# c++ - 为什么将两个大的双精度数相乘会得到错误的结果？

> ID：14265785
> 
> 赞同：-1
> 
> 时间：2013-01-10T19:30:13.920
> 
> 标签：c++, double

这个双倍乘法 (double)1000000007 * (double)11111111 的输出应该以 7 结尾（或者精确地等于 11111111077777777）。但是我写的这段代码输出的结果以 6 结尾（或者准确地说等于 11111111077777776）。我无法弄清楚我可能做错了什么。任何帮助都会很棒。

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
    cout << setprecision(40) << (double)1000000007 * (double)11111111;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T19:35:35.770

当您与`double`值相乘时，结果并不精确。有一个固有的精度`double`，虽然相当准确，但不够精确，无法准确代表您的价值。

我推荐阅读[每个计算机科学家应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:35:23.807

浮点数学并不精确，它只是非常准确。我鼓励你在这里阅读：[http ://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)

基本上没有足够的位来准确表示该数字，因此您会遇到精度错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:35:54.157

你没有做错什么。它与双打的实现有关。如果您需要超出双精度实现所提供的精度，那么肯定有可用于“大数字”操作的库。

# javascript - 如何动态获取 JavaScript 对象的属性值？

> ID：14265786
> 
> 赞同：0
> 
> 时间：2013-01-10T19:30:15.890
> 
> 标签：javascript, jquery

我可能不知道该怎么称呼它，但本质上我想动态传递属性的名称，然后在我的对象数据属性中获取该属性的值。像这样的东西：

```
function myFunc(e, myProperty) {

    alert( e.data[myProperty] );
}

var myValue = myFunc(myObject, "someField"); 
```

我得到值*undefined*。

我认为 ColdFusion 中的等价物是 [myPropertyName] ，我想知道 JavaScript 中是否有类似的东西。

更新：显然获取值有效，但不是我试图将动态属性作为名称/值对传递给 AJAX 请求。

```
var myValue = e.data[myProperty];

var myData = { myProperty: myValue } 
```

在上面的代码中，*myProperty*被作为*“myProperty”传递*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:41:30.777

请试试：

```
var myValue = e.data[myProperty];

var myData = { };
myData[myProperty] = myValue; 
```

这应该允许您动态创建一个具有名为的属性的对象`myProperty`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:35:48.953

为我工作：

```
function myFunc(e, myProperty) {
    alert( e.data[myProperty] );
}

myObject = { data: {} };
myObject.data['someField'] = 123;
var myValue = myFunc(myObject, "someField"); 
```

# php - PHP memcached 扩展未在 OSX 上加载或被识别

> ID：14265794
> 
> 赞同：-1
> 
> 时间：2013-01-10T19:30:38.733
> 
> 标签：php, memcached, osx-mountain-lion

我在我的机器上加载 Memcached 时遇到问题（运行 MEMPstack（mac nginx mongo php）的 OSX 10.8.2）。我安装了 libmemcached，我 pecl 安装了 memcached，它创建了 memcached.so：

![扩展目录内容列表](../Images/49b4394787bf7c27d373df12067fa5e6.png)

然后我在 php.ini 中包含了 memcached.so 扩展：

![显示扩展包含](../Images/587a3b56987d2c631b135c10271a37b5.png)

看了一会儿，看起来扩展目录在 phpinfo() 上是错误的，所以我将 memcached.so 移动到“正确的”，现在它在 phpinfo() 中正确显示：

![在此处输入图像描述](../Images/3c1f1f0f93e0feee3c937684d79aa621.png) ![在此处输入图像描述](../Images/b1cc199020ad8c0401d1ee4ebdf0720d.png)

我重新启动了 php，重新启动，重新启动了 memcached 守护进程。我仍然得到：

***致命错误：在第****2**行的**/Users/noah/development/egood/api/lib/memcached.php**中找不到类“Memcached”*

 **有任何想法吗？据我所知，我正在“正确”加载所有内容，但 memcached 仍然没有出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T22:40:05.133

您构建的扩展是为 PHP 5.4（第三方构建）而构建的，并且您正在尝试将其安装到 Apple 提供的 PHP 5.3 的扩展目录中。PHP 版本之间的扩展不兼容。

您需要确定哪个版本的 PHP 实际处于活动状态，在适当的情况下为该版本重建扩展，并将扩展安装到正确的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T05:41:30.360

问题在于我需要创建一个 memcached.ini 文件，并在那里插入我的 memcached.so 扩展名。**

# python - 将 connection_factory 指定到 SQLAlchemy 的 create_engine()

> ID：14265796
> 
> 赞同：1
> 
> 时间：2013-01-10T19:30:46.177
> 
> 标签：python, postgresql, sqlalchemy, psycopg2

我有一个`psycopg2.extensions.connection`我希望 SQLAlchemy 使用的自定义连接工厂类（继承自 ）。从`create_engine()`文档中，

> **kwargs 采用多种选项，这些选项被路由到相应的组件。参数可能特定于引擎、底层方言以及池。特定方言也接受该方言独有的关键字参数。

当我尝试指定 connection_factory 参数时，如下所示：

`engine = create_engine(dsn.engine_info(), connection_factory=ConnectionEx)`

我得到这个回溯：

```
Traceback (most recent call last):   File "foo.py", line 8, in <module>
    from user import test_user   File "/vagrant/workspace/panel/panel/user.py", line 18, in <module>
    from panel.helpers import intval   File "/vagrant/workspace/panel/panel/__init__.py", line 51, in <module>
    import panel.views   File "/vagrant/workspace/panel/panel/views.py", line 13, in <module>
    from panel.api import api_functions   File "/vagrant/workspace/panel/panel/api/api_functions.py", line 27, in <module>
    from panel.targeting import SavedTargetSet   File "/vagrant/workspace/panel/panel/targeting.py", line 19, in <module>
    from panel.database import panelists_tbl, us_cities_tbl, income_buckets_tbl   File "/vagrant/workspace/panel/panel/database.py", line 39, in <module>
    engine = create_engine(dsn.engine_info(), connection_factory=ConnectionEx)   File "/home/vagrant/.virtualenvs/project/lib/python2.6/site-packages/sqlalchemy/engine/__init__.py", line 331, in create_engine
    return strategy.create(*args, **kwargs)   File "/home/vagrant/.virtualenvs/project/lib/python2.6/site-packages/sqlalchemy/engine/strategies.py", line 141, in create
    engineclass.__name__)) TypeError: Invalid argument(s) 'connection_factory' sent to create_engine(), using configuration PGDialect_psycopg2/QueuePool/Engine.  Please check that the keyword arguments are appropriate for this combination of components. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T11:13:27.050

当文档谈论“适当的组件”时，它指的是 SQLAlchemy API 的组件，而不是各种驱动程序。由于`connection_factory`是需要发送到的参数，因此您应该在调用时`connect()`使用关键字（[此处](http://docs.sqlalchemy.org/en/latest/core/engines.html#custom-dbapi-connect-arguments)也提到了[文档](http://docs.sqlalchemy.org/en/latest/core/engines.html#sqlalchemy.create_engine)）。因此：`connect_args``create_engine`

```
engine = create_engine(
    dsn.engine_info(), connect_args={'connection_factory': ConnectionEx}) 
```

# php - 使用 Tinybrick 的 Lightspeed 进行高级打孔

> ID：14265798
> 
> 赞同：2
> 
> 时间：2013-01-10T19:30:51.323
> 
> 标签：php, magento, caching, magento-1.5, hole-punching

我有一种被 Tinybrick 称为“高级打孔”的情况，但我似乎无法让它发挥作用。我们最近安装了 Aheadworks 的订阅和定期付款扩展。此扩展允许客户定期订阅他们购买的产品，并扩展了 PayPal 的定期配置文件的功能。为此，产品视图页面上的*addtocart*块需要是动态的。根据客户是否登录以及相关产品的具体细节决定*addtocart*块中显示的内容。

使用 Lightspeed 打孔，我已经能够填充页面上的各种动态块（顶部链接、标题购物车、相关产品等）。这个块的问题在于它取决于`Mage::registry('current_product')`值。当 Lightspeed 返回一个缓存页面时，它不会运行完整的 Magento 代码，`current_product`也没有设置注册表值。我找不到使这项工作的方法。

我向 Tinybrick 发送了一封电子邮件，并收到了以下回复：

> 对于像这样的高级打孔，您必须通过控制器中的 API / SOAP 进行调用。基本上，您会调用所需的任何信息，然后使用该信息来显示您的动态内容。我个人从来没有这样做过，但我们的首席开发人员告诉我这是可以做到的。

我回复要求提供示例或更多信息，但尚未收到回复。我想我会在这里抛出一些东西，看看是否有人有这方面的经验并可以提供一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T05:11:11.690

当`lightspeed.php`在目录中看到相应的缓存文件时`var/lightspeed`，它会加载并解析。现在它看到，有些内容需要是动态的。因此，通过之前更改`lightspeed.php`的方式向 Magento 发出虚假的 GET 请求。看看下面的代码：`Mage::run()``$_REQUEST['URI']`

光速.php：

```
self::report("attempting to retrieve hole punched content from {$data[2]}");
$_SERVER['originalRequestUri'] = $_SERVER['REQUEST_URI'];
$_SERVER['REQUEST_URI'] = self::$request_path . "/" . $data[2]; 
```

你可以在这里看到我如何复制`$_SERVER['REQUEST_URI']`到`$_SERVER['originalRequestUri']`. 下面我们一起来看看

孔控制器.php：

```
 $originalRequest = new Mage_Core_Controller_Request_Http('http://example' . $_SERVER['originalRequestUri']);
    $originalRequest->setPathInfo()->setDispatched(false);
    Mage::getModel('core/url_rewrite')->rewrite($originalRequest);

    $params = explode('/', $originalRequest->getPathInfo());
    /* IF YOU HAVE SOME ADDITONAL PARAMS PASSED AS /color/1/size/2, 
       THIS PARAMS SHOULD BE ALSO PARSED AND SET TO REQUEST OBJECT
    for ($i = 3, $l = sizeof($params); $i < $l; $i+=2) {
        $originalRequest->setParam($params[$i], isset($params[$i + 1]) ? $params[$i + 1] : '');
    }
    */

    if ($params[1] == 'product') { // if parsed URL is product view page URL
        $productId = $originalRequest->getParam('id');
        $product = Mage::getModel('catalog/product')->load($productId);
        Mage::register('current_product', $product);
    } 
```

耶！现在我们`current_product`在注册表中。您可以创建所需的块。

# .net - 解决方案中的 msbuild 和多个 Web 项目

> ID：14265799
> 
> 赞同：3
> 
> 时间：2013-01-10T19:30:54.163
> 
> 标签：.net, visual-studio, msbuild, visual-studio-2012, nant

我们正在升级到 vs2k12 和 .net 4.5，所以我正在完成我们的构建过程，并让我们的 CI 服务器上的所有内容再次运行，但我遇到了一些困难。

以下是事情的运作方式：

我们有一个包含两个 Web 项目的解决方案文件，在开发人员机器上，它们是“就地”编译的（输出未重定向），IIS 指向相应的项目文件夹进行开发和测试，这部分很好。

在我们的构建机器上，我们需要将每个 Web 应用程序 (2) 的输出重定向到单独的文件夹中，以便由我们的安装程序打包，这就是我遇到困难的地方。正在发生的事情是其中一个 Web 项目内容最终位于另一个 Web 项目文件夹中，覆盖 Global.aspx 和 web.config 等文件，因为每个项目都有自己的。

我们曾经使用 web 部署项目来实现这一点，但它们现在已被弃用，所以我正在尝试使用 msbuild 的 web 发布机制/配置文件，但我基本上迷路了。

我试过这里提到的东西：

*   [http://vishaljoshi.blogspot.ca/2010/11/team-build-web-deployment-web-deploy-vs.html](http://vishaljoshi.blogspot.ca/2010/11/team-build-web-deployment-web-deploy-vs.html)
    *   [MSBuild - 确定解决方案的 _PublishedWebsites](https://stackoverflow.com/questions/4752293/msbuild-determine-a-solutions-publishedwebsites)
    *   [如何从 powershell 执行与在 Visual Studio 中发布完全相同的功能](https://stackoverflow.com/questions/8003125/how-to-do-the-exact-same-functionality-as-the-publish-inside-visual-studio-from)
    *   [http://msdn.microsoft.com/en-us/library/dd410108.aspx](http://msdn.microsoft.com/en-us/library/dd410108.aspx)

我一定遗漏了一些简单的东西，因为我想做的只是一个文件系统副本，没有花哨的 schmancy 发布到某些网络服务器的魔法。

目前，我正在从我的 nant 构建脚本中调用 sln 文件上的 msbuild，如下所示：

```
<msbuild project="${root.dir}\WebPortal\WebPortal ExtJS\WebPortal ExtJS.sln" verbosity="${tools.dotnet.msbuild.verbosity}">
    <property name="Configuration" value="${msbuild.configuration}" />
    <property name="OutputPath" value="${project.builddir}" />
    <property name="DeployOnBuild" value="true" />
    <property name="DeployTarget" value="PipelinePreDeployCopyAllFilesToOneFolder " />
    <property name="WebPublishMethod" value="FileSystem" />
    <property name="publishUrl" value="${project.builddir}" />
    <property name="DeleteExistingFiles" value="true" />
    <property name="DebugSymbols" value="${msbuild.debugSymbols}" />
    <property name="DebugType" value="${msbuild.debugType}" />
</msbuild> 
```

当从同一个解决方案文件构建时，我需要对我的每个 Web 项目执行什么操作才能使输出正确重定向？我曾考虑专门在每个 csproj 中设置输出文件夹，但这也会改变在开发人员机器上编译时输出的位置，我想尽可能避免这种情况，以保持路径更简单/更少混乱/更干净.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T23:25:32.667

所以我让一切正常，这就是我现在调用 MSBuild 的方式：

```
<msbuild project="${root.dir}\WebPortal\WebPortal ExtJS\WebPortal ExtJS.sln"
                 verbosity="${tools.dotnet.msbuild.verbosity}">
            <property name="Configuration" value="${msbuild.configuration}" />
            <property name="DeployDir" value="..\..\${output.dir}" />
            <property name="DeployOnBuild" value="true" />
            <property name="PublishProfile" value="BuildMachineDeployment" />
            <property name="DebugSymbols" value="${msbuild.debugSymbols}" />
            <property name="DebugType" value="${msbuild.debugType}" />
            <arg value="/m" />
        </msbuild> 
```

然后在我的部署配置文件的 .pubxml 文件中，我将此属性设置为使用我创建的 $(DeployDir) 变量：

```
<publishUrl>$(DeployDir)\EmerGeo Portal</publishUrl> 
```

现在，我的解决方案中的所有 Web 项目都会自动构建并部署到正确的文件夹中。

# php - PHP错误信息比正常小

> ID：14265803
> 
> 赞同：-1
> 
> 时间：2013-01-10T19:31:14.133
> 
> 标签：php, xdebug

最近我在测试我的 PHP 脚本时遇到了一个错误，但是 Xdebug 消息太小了，就像我在浏览器中的 50% 一样。除非我放大到 150-200%，否则我几乎无法阅读任何内容。

所以我问是否有一些选项可以增加错误消息的大小？

我尝试对此进行研究，但似乎从未发布过任何东西。

编辑：它`<font size="1">`在错误之前添加，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:37:37.187

这很可能是由于您的样式表或浏览器造成的。

# c# - 如何在运行时暂时禁用捆绑和缩小？

> ID：14265806
> 
> 赞同：19
> 
> 时间：2013-01-10T19:31:43.940
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-optimization, bundling-and-minification

为了调试 JavaScript 和 CSS 问题，我需要能够暂时禁用单个请求的捆绑和缩小。我想在运行时通过像这样向 QueryString 添加一个参数来执行此操作..

```
http://domain.com/page?DisableOptimizations=true 
```

这是我正在考虑的方法。

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
  // Enable for every request
  BundleTable.EnableOptimizations = true;

  // Disable for requests that explicitly request it
  bool disable;
  bool.TryParse(Context.Request.QueryString["DisableOptimizations"], out disable);
  if (disable)
  {
    BundleTable.EnableOptimizations = false;
  }
} 
```

*   我在每个 Web 请求上设置此静态属性这一事实是否存在任何潜在问题？（网络应用程序将在网络场上运行）
*   有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T21:52:11.953

扩展我在评论中提到的内容：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public class OptimizationsDebuggingAttribute : ActionFilterAttribute
{
    private const String PARAM_NAME = "DisableOptimizations";
    private const String COOKIE_NAME = "MySite.DisableOptimizations";

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        Boolean parsedPref;
        Boolean optimizationsDisabled = false;

        if (filterContext.HttpContext.Request.QueryString[PARAM_NAME] != null)
        { // incoming change request
            var pref = filterContext.HttpContext.Request.QueryString[PARAM_NAME].ToString();
            if (Boolean.TryParse(pref, out parsedPref))
            {
                optimizationsDisabled = parsedPref;
            }
        }
        else
        { // use existing settings
            var cookie = filterContext.HttpContext.Request.Cookies[COOKIE_NAME];
            if (cookie != null && Boolean.TryParse(cookie.Value, out parsedPref))
            {
                optimizationsDisabled = parsedPref;
            }
        }

        // make the change
        System.Web.Optimization.BundleTable.EnableOptimizations = !optimizationsDisabled;

        // save for future requests
        HttpCookie savedPref = new HttpCookie(COOKIE_NAME, optimizationsDisabled.ToString())
        {
            Expires = DateTime.Now.AddDays(1)
        };
        filterContext.HttpContext.Response.SetCookie(savedPref);

        base.OnActionExecuting(filterContext);
    }
} 
```

然后当然实现它看起来像：

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new OptimizationsDebuggingAttribute());
} 
```

或者，如果您更喜欢动手实践的方法：

```
[OptimizationsDebugging]
public ActionResult TroublesomeAction()
{
    return View();
} 
```

# vagrant - 如果已经配置了 Vagrant VM，请避免重新配置它

> ID：14265807
> 
> 赞同：17
> 
> 时间：2013-01-10T19:31:46.517
> 
> 标签：vagrant

如果之前已经这样做过，我正在尝试获取一个 shell 配置程序以避免重新配置 VM 实例。

考虑以下 Vagrantfile：

```
Vagrant::Config.run do |config|
  config.vm.define :minimal do |config|
    # Base image
    config.vm.box = "lucid32"
    config.vm.box_url = "http://files.vagrantup.com/lucid32.box"

    config.vm.provision :shell, :inline => "mkdir /tmp/foobar"
  end
end 
```

如果您运行`vagrant up minimal`，它将创建该框并最初对其进行配置。如果您随后运行`vagrant provision minimal`，它将尝试重新配置该框，但会失败（因为 /tmp/foobar 目录已经存在）。

有没有办法让 Vagrant 记住它过去是否配置过机器并避免以后重新配置它？

*更多上下文：如果我运行`vagrant up minimal`，重新启动我的主机，然后`vagrant up minimal`再次运行，它将尝试重新配置该框并失败。这种情况经常发生，因为 VirtualBox 经常在我的主机上导致内核崩溃。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-23T01:02:54.520

这可能不是您想要的答案，但是如果您将其更改`mkdir`为 a `mkdir -p`，它将起作用；）

不过，说真的，我认为 Vagrant 期望供应商是幂等的（也就是说，如果第二次运行，它将不采取任何行动）。

实现真正的幂等性可能很棘手，具体取决于您在配置脚本中实际执行的操作，但这`mkdir -p`是一个好的开始。您还可以在系统上创建一个标志文件，并首先检查该标志文件的存在；如果存在，就`exit 0`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-12T22:45:19.517

如果您使用的是 bash 配置脚本，那么它很可能不是幂等的。

这是一个关于如何避免配置两次的低俗示例：

```
PROVISIONED="/some-app-dir/PROVISIONED";

if [[ -f $PROVISIONED ]]; then
  echo "Skipping provisioning";
  exit;
else
  echo "Provisioning";
fi

#...do provisioning things

touch $PROVISIONED; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-28T06:52:25.473

你调查过这个吗？

`vagrant up --no-provision`

```
$ vagrant up --help
Usage: vagrant up [vm-name] [options] [-h]

    --[no-]provision             Enable or disable provisioning
    --provision-with x,y,z       Enable only certain provisioners, by type.
    --[no-]parallel              Enable or disable parallelism if provider supports it.
    --provider provider          Back the machine with a specific provider.
-h, --help                       Print this help 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-19T18:39:28.187

Vagrant 通常只在第*一次运行配置代码，* `vagrant up` *并且*当你明确告诉它这样做时，例如 with `vagrant provision`or `vagrant reload --provision`。真的没有必要竭尽全力避免再次运行配置脚本。（[但是，当您发布问题时，情况可能并非如此](https://github.com/mitchellh/vagrant/issues/1776)。）

如果您使用 Chef 或 Puppet 进行配置，它们已经被设计为使一切都具有[幂等](http://docs.opscode.com/chef_why.html#idempotence)性，我认为 Salt 和 Ansible 也是如此。

如果您正在使用 shell 脚本并且想让它们具有幂等性，则可以在`if`语句中检查某些条件（例如文件的存在）：

```
if [[! -f "$HOME/bin/something.sh" ]]; then
  # install something.sh into ~/bin
fi 
```

我给出了一个非常笼统的答案，因为我假设这`mkdir /tmp/foobar`并不是您*真正*想要实现的目标，但如果是，那么添加`-p`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-09-06T20:57:08.440

我无法重现该错误。一旦一个盒子启动，它就不应该提供，除非你使用设施来明确地实现它。

更重要的是，配置应始终`idempotent`如许多其他人所指出的那样。

> **幂等性**一个配方可以在同一个系统上运行多次，并且结果总是相同的。资源在配方中定义，然后定义要在系统上执行的操作。chef-client 确保在资源没有更改的情况下不执行操作，并且每次执行的任何操作都以相同的方式完成。如果重新运行食谱并且没有任何改变，那么厨师客户将不会做任何事情。

参考：[https ://docs.getchef.com/chef_why.html#idempotence](https://docs.getchef.com/chef_why.html#idempotence)

# php - 寻找一种方法来从字符串中去除尾随逗号，只有在有 php 的情况下

> ID：14265809
> 
> 赞同：0
> 
> 时间：2013-01-10T19:31:48.150
> 
> 标签：php

> **可能重复：**
> [PHP - 如果是句号，则删除最后一个字符？](http://facebook.stackoverflow.com/questions/2053830/php-remove-last-character-if-its-a-period)

我正在尝试从字符串中删除尾随逗号。我这样做：

```
$_POST['city_id_list'] //looks like 1,4,213,
$trimmed = substr(trim($_POST['city_id_list']),0,-1); 
```

但是如果最后一个字符不是逗号怎么办？

java有类似的东西：

```
str.replaceAll(" ,$", "") 
```

我认为有一种方法可以用 PHP 做到这一点。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T19:33:53.283

看一下[`rtrim`](http://php.net/manual/en/function.rtrim.php)函数：

```
$trimmed = rtrim($_POST['city_id_list'], ','); 
```

# javascript - 如何从 selectOneMenu 项中填充 inputText？

> ID：14265811
> 
> 赞同：1
> 
> 时间：2013-01-10T19:32:00.167
> 
> 标签：javascript, jsf-2

到目前为止，我还没有找到正确的方法来做到这一点。我有一个 inputText 绑定到对象中的变量。我有一个 selectOneMenu 项目下拉菜单，非常棒。思想是在选择时，我只需将所选文本从下拉列表推入输入框（模拟键入它）。显然这是不行的。我可以很容易地在 javascript onselect 处理程序中获取所选元素的文本，但 inputText 拒绝接受它（可能选择重新显示存储的空字符串而不是接受它作为输入并将其推送到对象）。我也尝试过直接在 Java 中设置字符串，但结果完全相同（没有发生任何事情）。显然我的整个方法是有缺陷的。这样做的正确方法是什么？一些示例 xhtml 代码

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
      <script type="text/javascript">
        function dropdownSelect() {            
            var element=document.getElementById("form:dropdown");
            var text=element.options[element.selectedIndex].value;
            document.getElementById("form:part").textContent=text; // TODO doesn't work.  Neither does forcing the part number to change inside the object via Java code
        }
    </script>    
    <h:body>
        <h:form id="form">
            <h:inputText id="part" value="#{part.partNumber}"/>
            <h:selectOneMenu id="dropdown" onselect="dropdownSelect()">                
                <f:selectItems value="#{part.list}"/>
            </h:selectOneMenu>
        </h:form>
    </h:body>    
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:38:28.870

有两个错误：

1.  该`select`事件是挂钩 HTML`<select>`元素更改的错误事件。你需要`change`。

    ```
    <h:selectOneMenu id="dropdown" onchange="dropdownSelect()"> 
    ```

2.  该属性在 HTML元素的`textContent`HTML DOM 对象表示中不存在， . 你需要。`<input>`[`HtmlInputElement`](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)`value`

    ```
    document.getElementById("form:part").value = text; 
    ```

这些问题都与 JSF 无关。它只是基本的 HTML/JS。对于由 PHP、ASP 甚至纯 HTML 生成的相同 HTML 内容，您会遇到完全相同的问题。

对于您感兴趣的情况，“JSF-ish”方式如下所示：

```
<h:form>
    <h:inputText id="part" value="#{part.partNumber}"/>
    <h:selectOneMenu value="#{part.selectedNumber}">
        <f:selectItems value="#{part.list}"/>
        <f:ajax listener="#{part.changeNumber}" render="part" />
    </h:selectOneMenu>
</h:form> 
```

和

```
public void changeNumber(AjaxBehaviorEvent event) {
    partNumber = selectedNumber;
} 
```

# web-deployment - 将 Ektron 网站移动到没有 eSync 的新服务器

> ID：14265813
> 
> 赞同：2
> 
> 时间：2013-01-10T19:32:06.777
> 
> 标签：web-deployment, ektron

我正在使用高度修补的版本 8.0.1 SP1。

我有很多网站要从一个托管服务器和数据库移动到另一个。我曾尝试使用 eSync，但我们的版本有很多补丁，我花了几天时间尝试制定一个基本的 eSync。不想头疼，我打算尝试手动移动。[我在http://documentation.ektron.com/cms400/v802/webhelp/Installation/Installing%20Ektron%20CMS400.Net/Moving_a_Site_to_Another.htm](http://documentation.ektron.com/cms400/v802/webhelp/Installation/Installing%20Ektron%20CMS400.Net/Moving_a_Site_to_Another.htm)开始了这些步骤的测试运行，但这不会将所有挂钩设置为Ektron Windows 服务和通知服务等。我猜对了吗？

这行得通吗？

1.  在新服务器上安装新的 minsite 并创建新的数据库。（这应该创建 Ektron 服务所需的所有位和部分）
2.  从旧服务器复制网站并粘贴到新服务器之上
3.  备份旧数据库并恢复到新数据库
4.  从旧站点复制资产文件夹并粘贴到新站点

这会给我所有我需要的部分还是我错过了什么？一旦我们开始这个过程，它就是一条单行道，我们有 100 多个站点要移动。我必须培训几个人，他们将在这个过程中生活一个月左右，所以我必须把它做好。

谢谢，扎克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:48:23.800

（全面披露：我在 Ektron 工作）

在无法使用 eSync 的情况下，您的步骤是正确的，而且您真的很接近。只有我看到你错过的事情是：

*   根\上传的图像
*   根\上传的文件
*   root\widgets（如果有自定义）
*   您提到了资产，不确定是否也包括 root\privateassets

重要的事情：站点路径（在 web.config 中）保持不变，例如：www.mysite.com 移动到类似 sub.mysite.com 或 mysite.com/sub 可能会破坏内容或快速链接/别名中的任何硬链接取决于它的设置方式..所以只要确保架构尽可能接近（服务器上的文件夹结构相同也是最安全的，例如所有站点都安装到 .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:46:54.350

您概述的过程或多或少与文档中的过程相同，除了您首先设置一个最小站点 - 这也是我通常的做法。这应该可以正常工作。有几点需要注意：

*   您复制到的版本必须与您从复制到的版本完全相同，包括服务包。
*   您应该手动将更改迁移到 .config 文件，尤其是 web.config；不要用旧站点的 web.config 覆盖新站点的 web.config。
*   确保您更新了一些特定于 Ektron 的值，例如 WSPath。
*   除了 Assets，还要复制 PrivateAssets、UploadedFiles 和 UploadedImages。
*   尽量不要将 Min 站点中包含的 Ektron 文件从旧站点复制到新站点。如果您只能复制您自己的文件或您修改过的文件，这是最好的，也是最快的。
*   复制站点后，请确保尽可能彻底地对其进行审查，以确保复制成功并且移动不会导致错误。

通常最好只将您自己的文件从一个站点/服务器复制到下一个站点/服务器。这是源代码控制（我使用 SVN）效果最好的地方。例如，如果您将所有自己的代码文件或已修改的代码文件放入 SVN（或类似文件）中，您可以在目标服务器上设置一个 Min 站点，备份和恢复您的数据库，然后“签出”或将您的文件从 SVN 导出到站点的根目录，然后手动更新配置文件。

更新：全面披露：我在 Ektron 工作；安德鲁的帖子提醒我补充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T03:07:52.583

另一种选择是站点包实用程序，尽管我不知道它包含和排除的范围。

从[我的博客](http://ektroneering.blogspot.com.au/2011/02/deploying-ektron-site-via-packagesite.html)-

**基本方法——**

1.  在您的 UAT 服务器上，运行 `C:\Program Files\Ektron\CMS400v80\Utilities\PackageSite\PackageSite.exe`并按照说明进行操作

    *   当被要求提供一个文件夹来存储包时，创建一个新的空文件夹。包没有压缩，它是文件夹的集合

    *   该软件包包含 3 个文件夹——assetlibrary、content、setup

2.  压缩你的包并上传到你的生产服务器

3.  运行 Ektron 设置，但不要设置站点。只需安装 Ektron 程序文件。将压缩包解压到`C:\Program Files\Ektron\CMS400v80\StarterSites`
4.  运行站点设置，您应该能够从起始站点下拉列表中选择您的站点。

**一些警告-**

*   内容文件夹包括所有 .svn Subversion 文件夹和 eSync 证书。所以从好的方面来说，它没有错过任何东西。
*   您添加到 web.config 的任何内容都将丢失。考虑将其放入 Application.config，或自己添加。

# c# - 动态加载程序集导致版本控制错误

> ID：14265817
> 
> 赞同：1
> 
> 时间：2013-01-10T19:32:21.237
> 
> 标签：c#, plugins, dynamic-loading

我有一个可以动态运行多个插件的应用程序。安装应用程序后，用户只需将相应的插件放入安装目录，程序将根据界面动态加载它们。

我遇到的问题是插件引用了主应用程序中的一个库来访问正确的界面并共享全局设置。我希望能够随时添加插件，而无需用户重新安装。但是，由于插件引用了一个库，所以当我尝试加载它们时，我收到了错误：

```
Could not load file or assembly 'program', Version=0.1.0.24838, Culture=neutral, PublicKeyToken=623917...' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) 
```

我知道如果我将所有插件添加到安装程序中，我可以避免这个错误，但如果我稍后添加新插件，用​​户将不得不卸载并重新安装。动态加载插件的原因是用户只需放入一个新插件，它就可以工作。

有没有办法让插件引用主应用程序中的对象而不用担心应用程序的版本？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:39:35.697

如果更改仅在插件程序集版本中，您可以对已更改的程序集使用[运行时绑定重定向。](http://msdn.microsoft.com/en-us/library/eftw1fys.aspx)

```
<configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         <dependentAssembly>
            <assemblyIdentity name="myAssembly"
                              publicKeyToken="32ab4ba45e0a69a1"
                              culture="neutral" />
            <bindingRedirect oldVersion="1.0.0.0"
                             newVersion="2.0.0.0"/>
         </dependentAssembly>
      </assemblyBinding>
   </runtime>
</configuration> 
```

您可以通过单独的补丁（zip 文件）提供更新。（无需安装/卸载）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:41:48.297

常见的方法是制作具有显式版本的特殊“公共接口”程序集（仅在接口更改时更改）并将插件和主应用程序链接到该程序集。您仍然需要为此类程序集提供向后兼容性并使用绑定重定向（即如 Tilak 的 +1 答案所示配置）。

# ios - 在 viewWillAppear 中调用 performFetch 不起作用

> ID：14265822
> 
> 赞同：0
> 
> 时间：2013-01-10T19:33:08.353
> 
> 标签：ios, core-data

里面的第一个电话`viewWillAppear`不起作用。块回调中的第二次调用有效。什么都不疼，但我想知道为什么？

在我的理解中，调用`performFetch`应该是一次性的，前提是之后没有对 NSFRC 进行任何更改。由于我懒加载`frc`，它不可能以任何方式被修改。调用`performFetch`and后`reloadData`，NSFRC 将开始监控上下文。上下文中的任何更改都将自动填充到表格视图中。

然而在我的代码中，如果我`reloadData`在第二个之后删除`performFetch`，表格视图不会发生任何事情。基于此，我认为第一个`performFetch`完全没有生效。

我错过了一些明显的东西吗？

```
-(NSFetchedResultsController *)frc
{
    if (!_frc) {
        [_frc setDelegate:self];
        NSFetchRequest *freq = [[NSFetchRequest alloc] initWithEntityName:@"Item"];
        NSSortDescriptor *sd = [[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES];
        [freq setSortDescriptors:@[sd]];

        _frc = [[NSFetchedResultsController alloc] initWithFetchRequest:freq managedObjectContext:[[BNRStore sharedStore]context] sectionNameKeyPath:nil cacheName:nil];
    }
    return _frc;
}

-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    // first time
    NSError *storeError = nil;
    if (![self.frc performFetch:&storeError]) {
        NSLog(@"%@",[storeError localizedDescription]);}
    [self.tableView reloadData];

    if ( [[self.frc fetchedObjects] count] == 0) {
        [[BNRStore sharedStore] fetch:^(NSError *error){
            if (error) {
                UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"Error" message:[error localizedDescription] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [av show];
            } else {

                // second time
                NSError *storeError = nil;
                if (![self.frc performFetch:&storeError]) {
                    NSLog(@"%@",[storeError localizedDescription]);}
                [self.tableView reloadData];
            }
        }];
    }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:38:55.447

`NSFetchedResultsController`在初始化之前，您将自己设置为's 代表。您可以将消息发送到`nil`（此时仍然存在），因此您不会收到任何错误。但是，您的委托从未在其他任何地方设置，因此您的表格视图也不会更新。`setDelegate`在初始化之后将调用移至，它应该可以工作：

```
-(NSFetchedResultsController *)frc
{
    if (!_frc) {
        NSFetchRequest *freq = [[NSFetchRequest alloc] initWithEntityName:@"Item"];
        NSSortDescriptor *sd = [[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES];
        [freq setSortDescriptors:@[sd]];

        _frc = [[NSFetchedResultsController alloc] initWithFetchRequest:freq managedObjectContext:[[BNRStore sharedStore]context] sectionNameKeyPath:nil cacheName:nil];
        [_frc setDelegate:self];
    }
    return _frc;
} 
```

# jquery - 使用 jquery ajax 传递 json 对象

> ID：14265826
> 
> 赞同：3
> 
> 时间：2013-01-10T19:33:25.027
> 
> 标签：jquery

在这里尝试回到基础并通过 ajax 将 JSON 对象发送到我的 php.ini 文件。当我收到 JSON 错误时，我什至无法进入那部分。这是jquery代码：

```
jQuery(".deletebutton").on("click", function() {

        var employees = [
        { "firstName":"John" , "lastName":"Doe" },
        { "firstName":"Anna" , "lastName":"Smith" },
        { "firstName":"Peter" , "lastName": "Jones" }
        ];

        var dataString = JSON.stringify(employees);

        // Lets put our stringified json into a variable for posting
        var postArray = {json:dataString};

        jQuery.ajax({
            type: 'POST',
            url: 'index.php?option=com_recordings&task=deletevideos&format=raw',
            data: postArray,
            dataType: 'json',
            success: function(data){
                if (data == "blah")
                    alert(data);

            }
        });
}); 
```

我收到此错误（当我检查时`errorThrown`）： SyntaxError: JSON.parse: unexpected character。我与 jsonlint.com 确认它是有效的 JSON。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:42:31.513

`dataType`指的是*请求*头，而不是响应。如果你没有发回有效的 JSON，jQuery 不会喜欢它。您想要发送 JSON，但您可能想要取回其他内容。只需删除`dataType`它，它应该可以正常工作，除非服务器脚本出现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T11:34:47.350

更改为数据：dataString

不会出现任何问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:39:57.037

您发布的内容是 js 对象而不是 json。您必须发布字符串化的 json。

```
data: dataString 
```

# javascript - 使用 jquery 还是不使用 jquery 更快？

> ID：14265829
> 
> 赞同：2
> 
> 时间：2013-01-10T19:33:43.980
> 
> 标签：javascript, jquery, performance

在我编写的桌面 html5 应用程序中，我总是使用 jquery，尽管我正在编写移动 html5 应用程序，我想知道是否应该使用 jquery。

首先，我对选择器很好奇。我在 jsfiddle 上做过实验，测试了 $('#item') 和 document.getElementById('item') 之间的速度差异。从统计上我得出的结论是 $('#item') 比 document.getElementById 慢。出于这个原因，我想完全切换到不使用 jQuery 编写代码，但是我在这里阅读了这个问题：

[`on` 和 `live` 或 `bind` 有什么区别？](https://stackoverflow.com/questions/8065305/whats-the-difference-between-on-and-live-or-bind)

在绑定方面，使用 jQuery 的 .on() 方法非常有效。jQuery 的 .on() 方法是否比 addEventListener() 更快？如果我不断添加和删除这个 div 的倍数呢：

```
<div class="item"></div> 
```

到 DOM。在普通的 javascript 中，每次我添加一个带有类项的新 div 时，我都必须为该新 div 重新绑定，但使用 .on() 它会自动为我完成。这一切都更有效率吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:50:25.793

> jQuery 的 .on() 方法是否比 addEventListener() 更快？

[`.on()`](https://github.com/jquery/jquery/blob/master/src/event.js#L684)是根据 定义的[`.event.add()`](https://github.com/jquery/jquery/blob/master/src/event.js#L12)，它使用`addEventListener`。一方面，`addEventListener`由于参数检查和管理的开销，这些函数比直接调用要慢。另一方面，`.event.add()`确保`addEventListener`尽可能避免调用。

在您的具体示例中（添加项目、绑定事件处理程序、删除项目），我希望 jQuery 执行速度较慢，因为其成本`.event.add()`超过其收益。然而，**衡量往往比假设好**。

还要记住，jQuery 的目标是非常便携。例如，它包含[Firefox 事件调度错误的解决方法](https://github.com/jquery/jquery/blob/master/src/event.js#L340)。自己测试和规避这些浏览器错误可能不值得您花时间开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:40:55.317

已经有许多测试显示了使用 jQuery 和本机以及其他库之间的差异。基本概念是包装器几乎总是比本机函数慢，因为它们会产生额外的开销。这里有些例子：

[http://jsperf.com/node-create-native-jquery-yui/3](http://jsperf.com/node-create-native-jquery-yui/3)

# ruby - Ruby - 有没有办法获取特征类的实例？

> ID：14265835
> 
> 赞同：2
> 
> 时间：2013-01-10T19:33:59.773
> 
> 标签：ruby, instance, eigenclass

我正在寻找一种获取特征类实例的方法，因为每个特征类只有一个实例。

我可以通过 ObjectSpace 来测试每个特征类，但我想它很昂贵。

奇怪的是，我必须得到每个对象的特征类来测试匹配，因为`is_a?`这还不够：

```
class A; end
class B < A; end

AA = class << A; self; end

p A.is_a? AA #=> true
p B.is_a? AA #=> true!!!! 
```

我希望有一个`Class#instance`或`Class#instances`方法来获取一个类（或特征类）的实例。

最直接的方法是从 eigenclass' 中提取实例`inspect`，但我想知道我是否可以依赖它：

```
p AA         #=> #<Class:A>
instance = Object.const_get(AA.inspect.match(/^#<Class:(\w+)>$/)[1])
p instance   #=> A

# (this works for class' eigenclass) 
```

我的用例是我必须获取一个类方法的类，但它`Method#owner`给了我特征类，并`Method#receiver`给了我当前的接收者：

```
# Continuing previous example
def A.f; end
mtd = B.method(:f)
p mtd.owner     #=> #<Class:A>
p mtd.receiver  #=> B
# I want to obtain A 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T19:38:56.283

如果要查找任何给定类的实例，可以使用[`ObjectSpace`](http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html)：

```
class A; end
class B < A; end

ObjectSpace.each_object(A.singleton_class).to_a
# => [B, A] 
```

# css - 使 div 看起来像输入：跨浏览器兼容性，而不是在 chrome 中呈现

> ID：14265836
> 
> 赞同：-1
> 
> 时间：2013-01-10T19:34:01.033
> 
> 标签：css, cross-browser

**主题：**
我正在制作几个 div 来接受一些拖放值并将它们设置为看起来像输入。
一切都在 Firefox 中呈现精美。
但是，在 Chrome 中，边框和框阴影无法正确呈现。（我在 Chm v.24，顺便说一句）

**目标：**
最重要的是，我只想让它工作。
但是......我很高兴得到*任何*关于如何*做得更好*的建议:)

**注意：**
这适用于办公室内的应用程序。FireFox 和 Chrome 是这里官方支持的仅有的两个浏览器，因此，虽然*所有*浏览器的兼容性肯定很好，但我只需要对这两个进行编码。

**代码：** [***在 jsFiddle 上***](http://jsfiddle.net/mOrloff/6qbwY/)[也可以看到](http://jsfiddle.net/mOrloff/6qbwY/)

 **```
/** html **/
<section id="dragged-drop-zone" >
    <div class="look-like-input textfield" contenteditable></div>
    <br />
    <div class="look-like-input textarea" contenteditable></div>
</section> 
```

.

```
/** css **/
.look-like-input{
    background-color: white;
    border: 1px solid #CCC;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
    padding: 0.25em 0.5em;
    min-height: 1.5em;
}
.look-like-input.textfield{
    appearance: field;
    -moz-appearance: textfield;
    -webkit-appearance: textfield;
}
.look-like-input.textarea{
    appearance: field;
    -moz-appearance: textfield-multiline;
    -webkit-appearance: textarea;
    overflow: auto;
    resize: both;
    min-height: 3.5em;
}
.look-like-input:focus{
    border: 1px solid #69F;
    -moz-box-shadow: 0 0 5px 2px rgba(0, 100, 255, 0.15);
    -webkit-box-shadow: 0 0 5px 2px rgba(0, 100, 255, 0.15);
    box-shadow: 0 0 5px 2px rgba(0, 100, 255, 0.15);
}

#dragged-drop-zone{
    border: 1px solid #666;
    -webkit-border-radius: 1em;
    -moz-border-radius: 1em;
    border-radius: 1em;
    padding: 1em;
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T20:15:26.457

是你的：

```
-webkit-appearance: 
```

其目的是让它看起来像一个文本框输入或文本区域

只需添加这个，看看我的意思：

```
.look-like-input {
background-color: white;
border: 1px solid #CCC;
-webkit-border-radius: 4px;
-moz-border-radius: 4px;
border-radius: 4px;
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
padding: 0.25em 0.5em;
min-height: 1.5em;
-webkit-appearance: none !important;
} 
```

这里提到：

[从 Chrome/Webkit 中的 <select> 元素中删除圆角](https://stackoverflow.com/questions/5780109/removing-rounded-corners-from-a-select-element-in-chrome-webkit)

如果外观很重要，请检查**Kevin Brydon**方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:41:01.950

到目前为止，这就是我所拥有的

```
<html>
<head>
    <style>
        #dragged-drop-zone {
            border: 1px solid #666;
            -webkit-border-radius: 1em;
            -moz-border-radius: 1em;
            border-radius: 1em;
            padding: 1em;
        }

        .myinput {
            background-color: white;
            border: 1px solid #CCC;
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
            padding: 0.25em 0.5em;
            min-height: 1.5em;
        }

        .myinput:focus {
            border: 1px solid #69F;
            -moz-box-shadow: 0 0 5px 2px rgba(0, 100, 255, 0.15);
            -webkit-box-shadow: 0 0 5px 2px rgba(0, 100, 255, 0.15);
            box-shadow: 0 0 5px 2px rgba(0, 100, 255, 0.15);
        }

        .mytextfield {
            appearance: field;
            -moz-appearance: textfield;
            -webkit-appearance: field;
        }

        .mytextarea {
            appearance: field;
            -moz-appearance: textfield-multiline;
            -webkit-appearance: area;
            overflow: auto;
            resize: both;
            min-height: 3.5em;
        }
    </style>
</head>
<body>
    <section id="dragged-drop-zone" >
        <div class="myinput mytextfield" contenteditable></div>
        <br />
        <div class="myinput mytextarea" contenteditable></div>
    </section>
</body>
</html> 
```**

# tomcat - 访问 Tomcat 服务的 servlet 需要 Windows 安全认证

> ID：14265837
> 
> 赞同：0
> 
> 时间：2013-01-10T19:34:02.207
> 
> 标签：tomcat, tomcat7, windows-security

我正在使用 sysdeo 插件从 Eclipse 运行 Tomcat。它正确部署了所有应用程序，我可以使用在 tomcat-uses 配置中指定的用户名访问管理器。一个特定的应用程序/servlet 对发送给它的所有请求都返回 401 错误。

当我直接访问它的 url 时，它会提示一个 Windows 安全对话框，要求输入用户名和密码。它说“{{Servlet Name}} 的服务器 localhost 需要用户名和密码。警告：此服务器要求以不安全的方式发送您的用户名和密码（没有安全连接的基本身份验证。”。

我曾尝试提供 tomcat 以及系统用户名和密码，但它失败并再次显示相同的屏幕。

```
The logs record the following:
0:0:0:0:0:0:0:1 - - [10/Jan/2013:14:15:51 -0500] "GET /ServletURI HTTP/1.1" 401 951
0:0:0:0:0:0:0:1 - - [10/Jan/2013:14:21:41 -0500] "GET /ServletURI HTTP/1.1" 401 951 
```

我知道这与身份验证设置有关，但我不知道具体在哪里查看。有什么建议么？谢谢你。

# .net - 输出缓存不适用于 JsonResult (asp.net-mvc-3)

> ID：14265839
> 
> 赞同：1
> 
> 时间：2013-01-10T19:34:23.573
> 
> 标签：.net, json, asp.net-mvc-3, caching, outputcache

返回 Json 的操作的 OutputCache 属性不起作用 - 当我在浏览器中多次点击操作 URL 时，每次我在 VS2012 中激活断点（看起来 OutputCache 属性被忽略）。这是我的代码：

```
public class ApiController : GenericControllerBase
{

    [OutputCache(Duration = 300, VaryByParam = "type;showEmpty;sort;platform")]
    public JsonResult GetCategories(string type, bool? showEmpty, string sort, string platform)
    {
        ///... creating categoryResults object
        return Json(new ApiResult() { Result = categoryResults }, JsonRequestBehavior.AllowGet);
    }

} 
```

GenericControllerBase 继承自 Controller。在从 GenericControllerBase OutputCache 继承的其他控制器中，它们按预期工作，但它们返回 View() 而不是 Json。作为一个实验，我添加了 VaryByCustom 参数并检查了 global.asax 文件中的 GetVaryByCustomString 方法也没有被命中，所以缓存功能被完全忽略了。我使用 MVC3 和 autofac 进行服务注入（但其他使用 autofac 注入的控制器可以与 OutputCache 一起正常工作）。

可能是什么问题呢？什么会阻止 OutputCache 功能？是否可能与缓存整个响应有关？在我的项目中使用 OutputCache 的所有其他操作都是在视图中嵌入 @Html.Action(...) 的部分操作。

在 MVC3 中对 GET 操作缓存整个 Json 响应的最佳方法是什么？

**更新**

经过一些测试后发现，对于返回完整页面（不仅是 json）的操作，OutputCache 会被忽略。缓存仅适用于我项目中的子操作。可能是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T11:34:10.150

最终，我使用了 MVC3 忽略 OutputCache 属性的解决方法。我使用自定义动作过滤器进行缓存：

```
public class ManualActionCacheAttribute : ActionFilterAttribute
{
    public ManualActionCacheAttribute()
    {
    }

    public int Duration { get; set; }

    private string cachedKey = null;

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        string key = filterContext.HttpContext.Request.Url.PathAndQuery;
        this.cachedKey = "CustomResultCache-" + key;
        if (filterContext.HttpContext.Cache[this.cachedKey] != null)
        {
            filterContext.Result = (ActionResult)filterContext.HttpContext.Cache[this.cachedKey];
        }
        else
        {
            base.OnActionExecuting(filterContext);
        }
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        filterContext.HttpContext.Cache.Add(this.cachedKey, filterContext.Result, null, DateTime.Now.AddSeconds(Duration), System.Web.Caching.Cache.NoSlidingExpiration, System.Web.Caching.CacheItemPriority.Default, null);
        base.OnActionExecuted(filterContext);
    }
} 
```

以上属性根据给定时间的确切 URL 路径和查询缓存请求，并按预期工作。

# android - 定制的 Android 微调器

> ID：14265841
> 
> 赞同：0
> 
> 时间：2013-01-10T19:34:40.593
> 
> 标签：android, spinner

首先，我很抱歉，我对 Android 很陌生。我正在尝试围绕 Android 微调器小部件“包裹皮肤”。我想完全控制外观。微调器将始终包含简单的单行文本项。具体来说，这里是我想要做的改变：

1.  标题具有特定的背景、特定的字体和右侧的自定义箭头图像。

2.  当下拉列表打开时，箭头需要垂直翻转（指向上方）。列表关闭时指向下方。

3.  下拉列表的背景需要自定义。有圆角，某些颜色等。

4.  列表中的每个项目都具有相同的外观，但我想控制外观（至少字体和字体颜色，但还需要控制分隔线长度和颜色）

5.  列表在打开和关闭时需要发出咔哒声。这个很难。其他小部件似乎这样做，但微调器似乎没有。

您可以在微调器中更改的东西很少。任何指向正确方向的人都将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T10:29:20.037

请查看[Android 示例中的这个演示](http://androidexample.com/Custom_Spinner_With_Image_And_Text_-_Android_Example/index.php?view=article_discription&aid=84&aaid=107)，您可以根据您的确切要求进行自定义，或者通常从中提取想法。

# c# - 无法加载 SqlServerSpatial.dll

> ID：14265845
> 
> 赞同：33
> 
> 时间：2013-01-10T19:34:55.920
> 
> 标签：c#, .net, sql-server, clr, geospatial

我正在尝试在 C# .Net 项目中使用 SqlServer Spatial CLR 类型。我想使用 SqlGeometry 从我的数据库中查询空间记录。

在 Visual Studio 2010 中运行的单元测试中，我在我的本地机器上运行了这个，它击中了远程 SqlServer 机器。都好。

然后，我将 WCF Rest 服务发布到我的本地 IIS 实例，该实例具有与单元测试相同的类库以执行一些空间查询的服务，但它失败了。

我收到一条错误消息

> 无法加载 DLL SqlServerSpatial.dll：找不到指定的模块。

我已经用谷歌搜索了这个并找到了很多很多答案 - 没有一个对我有用。我有：

*   向 GAC 注册了 CLR 类型
*   安装 64 位，以及后来的 32 位版本的 VC++
*   尝试了许多使用不同 Microsoft.SqlServer.Types dll 版本的变体

我唯一没有做过并且坦率地说拒绝做的事情就是在实际的 SqlServer 盒子上安装任何东西。这对我来说似乎没有必要。

在这一点上，我能想到的唯一原因是权限问题，因为它在 IIS 应用程序池中运行，而不是在它在单元测试中工作的 Studio 内部。

请注意，在我的项目中，我从不引用错误消息中提到的 dll。该 dll 存在于 sql 框中，但我无法将其添加到工作室，因为当我尝试添加时它会给出一些消息。我没有东西可以在这里尝试了。又是 90 年代的 dll 地狱。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-10T11:01:40.940

我在 Windows Server 2012 机器上遇到了同样的问题。它在 \Windows\System32 中有一个 SqlServerSpatial110.dll 文件，但没有 SqlServerSpatial.dll。解决方案是在机器上安装 Microsoft System CLR Types for SQL Server 2008 R2。

1.  [http://www.microsoft.com/en-us/download/details.aspx?id=26728](http://www.microsoft.com/en-us/download/details.aspx?id=26728)
2.  点击**下载**
3.  **根据您的处理器架构**检查其中一项：****

     ***   1033\ **x64** \SQLSysClrTypes.msi
    *   1033\ **x86** \SQLSysClrTypes.msi
    *   1033\ **IA64** \SQLSysClrTypes.msi** 
***   单击**下一步**** 

 *** * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-01-19T11:55:21.583

我的问题与您的问题相似：我在远程 Azure 虚拟机上安装了 ASP.NET MVC 项目，但遇到了这个异常：

```
"Unable to load DLL 'SqlServerSpatial110.dll': The specified module could not be found. (Exception from HRESULT: 0x8007007E)" 
```

为了解决这个问题，我按照以下步骤操作：

1.  我在我的项目中添加了对丢失包的引用：

    ```
    PM> Install-Package Microsoft.SqlServer.Types 
    ```

2.  然后我将“复制到输出目录”选项强制为“始终复制” `SqlServerSpatial110.dll`（**可能这一步不是严格要求的......**）

3.  对于 ASP.NET 项目，您需要在 中的`Application_Start`方法中添加以下代码行`Global.asax.cs`：

    ```
    SqlServerTypes.Utilities.LoadNativeAssemblies(Server.MapPath("~/bin")); 
    ```

    最后**一步**对我来说很重要，因为没有这行代码，Web 应用程序就不会加载 DLL。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-30T05:09:26.250

多年来，我一直`Microsoft.SqlServer.Types.dll`在 WPF 和 ASP.NET 应用程序中使用`SqlGeometry`类型和空间查询（自 v.10 起），这里是我发现成功*`SqlServerSpatialXXX.dll`*加载`Microsoft.SqlServer.Types.dll`.

*   `SqlGeometry`和`SqlGeography`类型可以通过引用`Microsoft.SqlServer.Types.dll`.
*   `Microsoft.SqlServer.Types.dll`是一个托管库，有一些非托管库作为先决条件，它们就像*SqlServerSpatialXXX.dll*和*msvcrXXX.dll*
*   自 Sql Server 2008 以来，可以使用不同的版本`Microsoft.SqlServer.Types.dll`，但是，从 2012 年开始，我看不到任何功能变化。

**考虑 64bit/32bit 问题**

*   对于 64 位机器，如果您安装 CLR Types for Sql Server，您可以在**Windows/System32**中找到这些必备文件的 64 位版本，也可以在**Windows/SysWOW64**文件夹中找到 32 位版本的必备文件
*   如果机器上没有安装 CLR 类型，您应该根据您的项目（32 位或 64 位）手动加载这些先决条件的正确版本（32 位/64 位），否则您会出现类似错误

> 加载 SqlServerSpatialXXX.dll 时出错

您可以在 C# 中使用运行时检查 32 位/64 位问题`Environment.Is64BitProcess`。这是一个示例代码：

```
[DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
private static extern IntPtr LoadLibrary(string libname);

private static void LoadNativeAssembly(string nativeBinaryPath, string assemblyName)
{
    var path = Path.Combine(nativeBinaryPath, assemblyName);

    if (!File.Exists(path))
    {
        throw new FileNotFoundException($"{path} not found");
    }

    var ptr = LoadLibrary(path);
    if (ptr == IntPtr.Zero)
    {
        throw new Exception(string.Format(
            "Error loading {0} (ErrorCode: {1})",
            assemblyName,
            Marshal.GetLastWin32Error()));
    }          
}

public static void LoadNativeAssembliesv13(string rootApplicationPath)
{
    var nativeBinaryPath = Environment.Is64BitProcess
    ? Path.Combine(rootApplicationPath, @"SqlServerTypes\x64\")
    : Path.Combine(rootApplicationPath, @"SqlServerTypes\x86\");

    LoadNativeAssembly(nativeBinaryPath, "msvcr120.dll");
    LoadNativeAssembly(nativeBinaryPath, "SqlServerSpatial130.dll");
} 
```

**考虑不同项目类型中的二进制路径**建议在你的项目的执行路径中 有一个名为*SqlServerTypes的文件夹，像这样*

SqlServerTypes>x64

SqlServerTypes>x32

并像这样加载非托管程序集

```
Utilities.LoadNativeAssembliesv13(Environment.CurrentDirectory); //WPF
Utilities.LoadNativeAssembliesv13(HttpRuntime.BinDirectory); //ASP.NET 
```

**使用 ADO.NET 从 Sql Server 读取 SqlGeometry 时的问题** 尽管您使用的是哪个版本，`Microsoft.SqlServer.Types.dll`但如果您尝试[使用 ADO.NET 从 Sql Server 读取它们，](https://connect.microsoft.com/SQLServer/feedback/details/685654/invalidcastexception-retrieving-sqlgeography-column-in-ado-net-data-reader)您可能会遇到强制转换异常，因为 SQL 客户端默认加载版本 10.0.0.0的`Microsoft.SqlServer.Types.dll`。在这种情况下，几年前我尝试使用 WKB（方法 1 和 2）和 WKT 作为在`SqlGeometry`不同版本的类型之间进行转换的媒介`Microsoft.SqlServer.Types.dll`，发现 WKB 快了大约 10 倍，但一个月前我发现使用程序集重定向我们可以强制程序加载我们正在使用的版本并使用简单的演员我们可以获得`SqlGeometry`（方法3）

```
private List<SqlGeometry> SelectGeometries(string connectionString)
{
    SqlConnection connection = new SqlConnection(connectionString);
    var command = new SqlCommand(select shapeCol from MyTable, connection);
    connection.Open();
    List<SqlGeometry> geometries = new List<SqlGeometry>();
    SqlDataReader reader = command.ExecuteReader();
    if (!reader.HasRows)
    {
        return new List<SqlGeometry>();
    }
    while (reader.Read())
    {
        //approach 1: using WKB. 4100-4200 ms for hundred thousands of records
        //geometries.Add(SqlGeometry.STGeomFromWKB(new System.Data.SqlTypes.SqlBytes((byte[])reader[0]), srid).MakeValid());
        //approach 2: using WKB. 3220 ms for hundred thousands of records
        //geometries.Add(SqlGeometry.Deserialize(reader.GetSqlBytes(0))); 
        //approach 3: exception occur if you forget proper assembly redirection. 2565 ms for hundred thousands of records
        geometries.Add((SqlGeometry)reader[0]);
    }
    connection.Close();
    return geometries;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-28T17:57:35.083

我在 Windows Server 2008 R2 机器 (Azure VM) 上遇到问题，但上述步骤都无法解决问题。我安装了 CLR 类型。我将文件放在我的 Web 应用程序的 BIN 文件夹中。依然没有。我终于在微软的人那里看到了这个博客，它奏效了。我把网址留在这里，以防它可以帮助其他人。

[http://blogs.msdn.com/b/adonet/archive/2013/12/09/microsoft-sqlserver-types-nuget-package-spatial-on-azure.aspx](https://web.archive.org/web/20131212004628/http://blogs.msdn.com/b/adonet/archive/2013/12/09/microsoft-sqlserver-types-nuget-package-spatial-on-azure.aspx)

我在下面放了说明：

1.  打开 Visual Studio 并打开 NuGet 包管理器
2.  搜索“Microsoft.SqlServer.Types”
3.  安装...

该软件包会将必要的 .DLL 安装到您的解决方案/项目中。它还会将一些额外的库直接复制到您的 /bin 目录中。您必须在 global.asax.cs/vb 文件中连接对这些附加库的引用。NuGet 包中包含有关如何执行此操作的说明。下面是 NuGet 包的直接链接（希望 MSFT 也不会忘记它）。

[https://www.nuget.org/packages/Microsoft.SqlServer.Types/](https://www.nuget.org/packages/Microsoft.SqlServer.Types/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-03-11T06:10:37.000

尽管安装了 SQL Server 14.x，VS 仍然坚持找不到SqlServerSpatial **110 .dll。**

为 SQL Server 2008 R2安装*Microsoft System CLR 类型*并没有修复它。我也尝试安装 10.5 版本`Microsoft.SqlServer.Types`，但收到有关方法签名不匹配的 PInvoke 错误。

因此，我安装了`Microsoft.SqlServer.Types`14.x，然后在 /x86 和 /x64 文件夹中将 SqlServerSpatial **140** .dll 文件重命名为 SqlServerSpatial **110** .dll 并在`Loader.cs`. 无论出于何种原因，这似乎起到了作用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-12-16T17:55:15.693

我在使用 windows server 2012 r2 的 godaddy VPS 中遇到了同样的问题

> ```
> I Resolved it by Updating my EF5 to EF6 
> ```

在包管理器控制台中运行到 EF5 到 EF 最新

```
Install-Package EntityFramework 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-17T03:17:50.957

从 References 中删除 Microsoft.SqlServer.Types.dll 并使用 Nuget 进行安装。安装前检查您的版本。x86 和 x64 的程序集将安装在项目中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-19T14:26:10.867

我在 ASP.NET MVC 5 项目中遇到了类似的问题。不久前，我不得不添加一行来指定程序集名称，如下所示：

```
SqlServerTypes.Utilities.LoadNativeAssemblies(Server.MapPath("~/bin"));
SqlProviderServices.SqlServerTypesAssemblyName = Assembly.GetAssembly(typeof(Microsoft.SqlServer.Types.SqlGeography)).FullName; 
```

我最近部署到一个新的测试服务器并再次收到此错误。出于某种原因，它试图加载版本 12。我现在指定了我想要的确切版本，它按预期工作。

```
SqlServerTypes.Utilities.LoadNativeAssemblies(Server.MapPath("~/bin"));
SqlProviderServices.SqlServerTypesAssemblyName = "Microsoft.SqlServer.Types, Version=14.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91"; 
```

希望这可以帮助某人。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-09T16:07:35.857

这是对我造成此问题的原因：-

我的项目中有一个名为的文件夹`SQLServerTypes`，当我查看该文件夹时，我发现 .dll 实际上丢失了。因此，下载 .dll 并将其粘贴到`SQLServerTypes`文件夹中为我解决了这个问题。

当我尝试构建我的应用程序时，这个问题就发生在我身上。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-21T18:44:38.640

我有一个旧的（2009 年）asp.net webform vb.net 项目，它在另一台服务器上给了我这个错误。我必须将此运行时添加到 web.config ：

```
<configuration>
  <runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.SqlServer.Types" publicKeyToken="89845dcd8080cc91" />
        <bindingRedirect oldVersion="1.0.0.0-11.0.0.0" newVersion="10.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

[http://biandintegration.blogspot.com/2017/12/solved-unable-to-load-dll.html](http://biandintegration.blogspot.com/2017/12/solved-unable-to-load-dll.html)**

# java - javaGeom - 尝试获取两个多边形的差异时出现 NullPointerException

> ID：14265847
> 
> 赞同：0
> 
> 时间：2013-01-10T19:35:02.393
> 
> 标签：java, google-app-engine, geometry, gpc

我在我的班级（在 Google App Engine 下）有这个方法，它只是获取一个 math.geom2d.polygon.Polygon2D 对象来计算它与另一个本地 Polygon2D 的差异。这是它的外观：

```
public void substractPolygon(Polygon2D polygon){
    Polygon2D subbedPolygon = Polygons2D.difference(thePolygon, polygon);
    placeList = polygonToList(subbedPolygon);
} 
```

我从库中得到了这个 NullPointerException，但我不知道如何处理它：

```
 WARNING: /runningappserver
java.lang.NullPointerException
at math.geom2d.polygon.Polygons2D.convertToGpcjPolygon(Polygons2D.java:429)
at math.geom2d.polygon.Polygons2D.difference(Polygons2D.java:417)
at com.panstudio.RunningAppServer.Run.substractPolygon(Run.java:266)
at com.panstudio.RunningAppServer.RunningAppServerServlet.doPost(RunningAppServerServlet.java:24)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:18:15.130

要么`thePolygon`要么`polygon`是`null`。检查哪个的最简单方法是在 IDE 中调试并放置断点，或者放置一些日志记录/输出并在每个上运行一个方法。

# facebook - 在 Hybridauth 中为 Yii 框架配置 Facebook

> ID：14265848
> 
> 赞同：3
> 
> 时间：2013-01-10T19:35:08.553
> 
> 标签：facebook, twitter, yii, hybridauth

我正在使用 Yii 框架和 HybridAuth 进行社交登录操作，我有 google 和 yahoo 工作正常，但我无法让 facebook 和 twitter 工作。

我需要一个 Https:// 域吗？还是只是要添加一些配置？

当我尝试使用 facebook 或 twitter 登录时，我收到了这个 PHP 警告：

> include(DefaultController.php) [function.include]：打开流失败：没有这样的文件或目录

错误显示在vendors\yii_1.1.10\YiiBase.php(418)：

```
{
407                     foreach(self::$_includePaths as $path)
408                     {
409                         $classFile=$path.DIRECTORY_SEPARATOR.$className.'.php';
410                         if(is_file($classFile))
411                         {
412                             include($classFile);
413                             break;
414                         }
415                     }
416                 }
417                 else
418                     include($className.'.php');
419             }
420             else  // class name with namespace in PHP 5.3
421             {
422                 $namespace=str_replace('\\','.',ltrim($className,'\\'));
423                 if(($path=self::getPathOfAlias($namespace))!==false)
424                     include($path.'.php');
425                 else
426                     return false;
427             }
428             return class_exists($className,false) || interface_exists($className,false);
429         }
430         return true; 
```

这是我的主要配置文件

```
'modules'=>array('admin',
        'hybridauth' => array(
            'baseUrl' => 'http://'. $_SERVER['SERVER_NAME'] . '/hybridauth', 
            'withYiiUser' => false, // Set to true if using yii-user
            "providers" => array ( 

                "yahoo" => array ( 
                    "enabled" => true 
                ),

                "google" => array ( 
                    "enabled" => true,
                    "keys"    => array ( "id" => "[private]", "secret" => "[private]" ),
                    "scope"   => ""
                ),

                "facebook" => array ( 
                    "enabled" => true,
                    "keys"    => array ( "id" => "[private]", "secret" => "[private]" ),
                    "scope"   => "email,publish_stream", 
                    "display" => "" 
                ),

                "twitter" => array ( 
                    "enabled" => true,
                    "keys"    => array ( "key" => "[private]", "secret" => "[private]" ) 
                )
            )
        )
    ), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:15:42.843

我在安装 HybridAuth 时遇到了同样的错误。通过更改某些文件的大小写来解决它。

我的 Linux 服务器区分大小写，因此找不到文件 'facebook.php'，而 'Facebook.php' 工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T21:59:13.287

尝试导入 hybridauth 文件：

**配置/main.php**

```
'import'=>array(
    ...
    // for hybridauth
    'application.modules.hybridauth.controllers.*',
    ...
), 
```

# mysql - Rails 计算列与 ID 匹配的行数

> ID：14265850
> 
> 赞同：0
> 
> 时间：2013-01-10T19:35:17.290
> 
> 标签：mysql, ruby-on-rails, ruby, count

所以我有一个帖子模型和投票模型，其中投票通过 post_id 与帖子相关联。

# 帖子模型

```
class Post < ActiveRecord::Base
  attr_accessible :comment_count, :downvote, :id, :text, :title, :upvote, :url, :user_id, :users_voted_up_by, :users_voted_down_by

  serialize :users_voted_up_by
  serialize :users_voted_down_by

  belongs_to :user

  has_many :votes
end 
```

# 投票模型

```
class Vote < ActiveRecord::Base
  attr_accessible :direction, :post_id, :type, :voter_id

  belongs_to :user

  belongs_to :post

  belongs_to :comment
end 
```

我需要在数据库中查询`Votes`表中`post_id`在我的循环中包含当前帖子的所有行：

```
<% @posts.each do |post| %>
    <%= Vote.count(:post_id, params[:post_id]) %>
<% end %> 
```

**但这只是计算每一行，我能写什么让它们相关联？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:38:26.557

推荐的方法是在查询中使用分组：

```
<% vote_counts = Vote.group(:post_id).
        where(:post_id => @posts.map(&:id)).count %>
<% @posts.each do |post| %>
  <%= post.id %>: <%= vote_counts[post.id] || 0 %>
<% end %> 
```

分组查询的优点是它只访问数据库一次。如果您出于某种深不可测的原因希望对每个帖子进行一次计数，您可以简单地使用：

```
<% @posts.each do |post| %>
  <%= post.id: %> <%= post.votes.count %>
<% end %> 
```

但是，不要让第二种方法的简单性欺骗了您。它在自找麻烦，因为它涉及 N+1 模式。

# c++ - 在我的头文件中添加“extern C”有什么好处？

> ID：14265851
> 
> 赞同：2
> 
> 时间：2013-01-10T19:35:17.447
> 
> 标签：c++, c

我正在阅读 C++ FAQ Lite 的[第 32 节：如何混合 C 和 C++](http://www.parashift.com/c++-faq/mixing-c-and-cpp.html)。[它说我应该**强烈考虑**在我的头文件中添加`extern "C" {...}`（当然，添加适当的预处理器指令](http://www.parashift.com/c++-faq/include-c-hdrs-personal.html)。这样，我可以在 C++ 源文件中包含“没有任何外部“C”废话“的头文件：

> ```
> // Get declaration for f(int i, char c, float x)
> #include "my-C-code.h" 
> ```

“废话”，不是那么容易的选择似乎是这样的：

> ```
> extern "C" {
>   // Get declaration for f(int i, char c, float x)
>   #include "my-C-code.h"
> } 
> ```

为什么首选第一个选项？这只是风格问题（以及当有人包含它们时要键入的字符数）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:39:23.840

您可以将语句放在头文件中一次，或者使用它的每个人都可以将语句放在包含头文件的任何位置。前者在我看来当然是更好的风格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T19:36:47.087

是的，这只是一种风格。但它确实让人们在使用你的图书馆时生活更轻松，所以它可能值得坚持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T19:46:37.713

这样做的目的是允许您将 C 头文件与您的 C++ 代码一起使用，因为`"__cplusplus"`将定义宏。但是您仍然可以将它与未定义宏的遗留 C 代码一起使用，因此它不会看到唯一的 C++ 构造。

```
#ifdef __cplusplus
extern "C" {
#endif

// all of your legacy C code here

#ifdef __cplusplus
}
#endif 
```

另一种方法是将其与`#include`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T19:39:42.943

如果您不包含它，那么尝试使用您的库的人会很痛苦。如果在 C++ 应用程序中使用 C 头文件而不使用该头文件，则用户将收到编译器或链接器错误，这对于不熟悉该问题的人来说尤其令人困惑。

# java - Java如何确定进入UDP服务器的数据类型？XML 二进制文件

> ID：14265858
> 
> 赞同：0
> 
> 时间：2013-01-10T19:35:32.477
> 
> 标签：java, udp

我有一个 UDP 服务器正在监听。客户端可以发送二进制数据或 XML 数据（二进制表示为 xml，以便快速攻击）。确定传入数据类型的适当方法是什么？

![在此处输入图像描述](../Images/d7f4a1848e02c85dc2b5f88b20f3dc81.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:40:52.117

下载 JDOM 并将其添加到客户端的类路径中。在传入数据上实例化 a`SAXBuilder`并尝试从中构建 XML 文档。如果失败，则它是您拥有的二进制数据。

```
...
SAXBuilder builder = new SAXBuilder();
try {
   builder.build(/*data*/);
   // You have XML data
} catch (Exception e) {
   // You have binary data
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:38:21.803

您需要一段元数据（*标志*、*标头*）来区分两者。一点就够了。更高级别的协议使用更详细的标头来区分不同的类型，例如在 HTTP 中：

```
Content-Type: application/xml 
```

当然，在您的情况下，因为 UDP 包又小又轻，所以假设第一个字节是类型鉴别器。`0`- XML，`1`- 二进制。

不要试图通过检查来猜测内容类型。从统计的角度来看，XML 文档和二进制文档有很大的不同，只是比较麻烦而且容易出错。此外，我不建议*尝试*将传入数据解析为 XML，如果失败则将其视为二进制文件。

# java - 使用 Java Pattern 类的某些字符和数字的正则表达式

> ID：14265862
> 
> 赞同：0
> 
> 时间：2013-01-10T19:35:49.023
> 
> 标签：java, xml, pattern-matching

我在字符串中有一些 XML，并且想用“”替换所有 id 属性值，其中 id 属性值以“widget”开头。

这是我的输入xml：

```
<panel height="24" id="sd1" layout="vertical" left_padding="12" spacing="12" stereotype="directions" width="790" x="0" y="79">
<text_widget halign="left" id="widget5019721000" width="761"/>
<text_widget halign="left" id="widget5019501000" width="761"/>
<text_widget halign="left" id="widget5019711000" width="761"/>
<text_widget halign="left" id="widget5019752000" width="761"/>
</panel> 
```

输出 xml 应如下所示：

```
<panel height="24" id="sd1" layout="vertical" left_padding="12" spacing="12" stereotype="directions" width="790" x="0" y="79">
<text_widget halign="left" id="" width="761"/>
<text_widget halign="left" id="" width="761"/>
<text_widget halign="left" id="" width="761"/>
<text_widget halign="left" id="" width="761"/>
</panel> 
```

我正在尝试使用下面的代码：

```
String xmlStr = this.getXmlString();
Pattern pattern = Pattern.compile(xmlStr);
Matcher matcher = pattern.matcher(\"id="widget[0-9]\"); 
```

如何在 Java 中使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:11:21.490

`String result = xml.replaceAll("id=\\\"widget[0-9]*", "id=\"");`

相反，您也可以使用 XML 处理。从下载 JDOM`www.jdom.org`并将包含的 jdom-2.0.4.jar 添加到您的类路径中。然后使用以下代码：

```
import java.io.StringReader;
import java.util.List;

import org.jdom2.Document;
import org.jdom2.Element;
import org.jdom2.input.SAXBuilder;
import org.jdom2.output.Format;
import org.jdom2.output.XMLOutputter;

public class Test {
public static void main(String[] args) throws Exception {
    String xml = "<panel height=\"24\" id=\"sd1\" layout=\"vertical\" left_padding=\"12\" spacing=\"12\" stereotype=\"directions\" width=\"790\" x=\"0\" y=\"79\">"
                +"<text_widget halign=\"left\" id=\"widget5019721000\" width=\"761\"/>"
                +"<text_widget halign=\"left\" id=\"widget5019501000\" width=\"761\"/>"
                +"<text_widget halign=\"left\" id=\"widget5019711000\" width=\"761\"/>"
                +"<text_widget halign=\"left\" id=\"widget5019752000\" width=\"761\"/>"
                +"</panel>";

    SAXBuilder builder = new SAXBuilder();
    Document doc = builder.build(new StringReader(xml));

    List<Element> textWidgetElements = doc.getRootElement().getChildren("text_widget");
    for (Element e : textWidgetElements) {
        if (e.getAttributeValue("id").startsWith("widget")) {
            e.setAttribute("id", "");
        }
    }

    XMLOutputter out = new XMLOutputter();
    out.setFormat(Format.getPrettyFormat());
    String result = out.outputString(doc);

    System.out.println(result);
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:46:32.437

但是，您的代码中存在错误，`Pattern.compile`接收的字符串参数是正则表达式模式，而不是源字符串。这是正确的代码。

```
Pattern pattern = Pattern.compile("id=\\\"widget\d*")
Matcher match = pattern.matcher(xmlStr)
String result = match.replaceAll("id=\\\"") 
```

# c# - 为什么 BroadcastReceiver 需要一个默认构造函数？

> ID：14265864
> 
> 赞同：0
> 
> 时间：2013-01-10T19:35:52.720
> 
> 标签：c#, android, xamarin.android, xamarin

我创建了一个由 Service 构造的 BroadcastReceiver。BroadcastReceiver需要和Service交互，所以我传递`this`给构造函数。添加 [BroadcastReceiver]-Attribute 并尝试编译（使用 MonoDevelop）后，我得到

```
D:\Programme\MSBuild\Novell\Novell.MonoDroid.Common.targets(3,3): Error MSB4018: Unerwarteter Fehler bei der GenerateJavaStubs-Aufgabe.

System.InvalidOperationException: The type 'keepass2android.TimeoutService/MyBroadcastReceiver' needs to have a public default constructor.
   at Xamarin.Android.Tasks.ManifestDocument.Merge(List`1 subclasses, List`1 selectedWhitelistAssemblies, Boolean embed)
   at Xamarin.Android.Tasks.GenerateJavaStubs.Execute()
   at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()
   at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask, Boolean& taskResult) (MSB4018) (keepass2android) 
```

为什么 Mono for Android 需要这个默认构造函数？它会使用默认构造函数创建我的 BroadcastReceiver（在这种情况下，BroadcastReceiver 将无法正常工作）吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T20:00:18.810

仅当您`BroadcastReceiver`使用`AndroidManifest`. Android 使用反射来实例化接收器，它需要一个默认构造函数（否则，它不知道应该传递哪些参数）。

看起来您正在使用`Context.registerReceiver`. 在这种情况下，您不需要`receiver`在`AndroidManifest`

# ruby - 从 selenium-webdriver 收到不需要的消息，如何隐藏它？

> ID：14265868
> 
> 赞同：1
> 
> 时间：2013-01-10T19:35:56.420
> 
> 标签：ruby, selenium-webdriver, ruby-1.9.3

我正在使用`selenium-webdriver`自动执行与 Web 浏览器相关的任务。但是当我执行以下操作时，得到了如下的一部分`messgaes`。为什么会这样，你能告诉我吗？以及如何压制它的任何想法？

```
irb(main):001:0> require "selenium-webdriver"
=> true
irb(main):002:0> driver=Selenium::WebDriver.for :firefox
*** LOG addons.manager: Application has been upgraded
*** LOG addons.xpi: startup
*** WARN addons.xpi: Ignoring missing add-on in C:\Program Files\SearchPredict\P
RFireFox
*** WARN addons.xpi: Ignoring missing add-on in C:\Program Files\SpeedBit Video
Downloader\SPFireFox
*** WARN addons.xpi: Ignoring missing add-on in C:\Program Files\Web Assistant\F
irefox
*** WARN addons.xpi: Ignoring missing add-on in C:\Program Files\Iminent\webboos
ter@iminent.com
*** LOG addons.xpi: Skipping unavailable install location app-system-local
*** LOG addons.xpi: Skipping unavailable install location app-system-share
*** LOG addons.xpi: checkForChanges
*** LOG addons.xpi-utils: Opening database
*** LOG addons.xpi-utils: Creating database schema
*** LOG addons.xpi: New add-on fxdriver@googlecode.com installed in app-profile
*** Blocklist::_loadBlocklistFromFile: blocklist is disabled
*** LOG addons.xpi: New add-on {F17C1572-C9EC-4e5c-A542-D05CBB5C5A08} installed
in winreg-app-user
*** LOG addons.xpi: New add-on ffxtlbr@babylon.com installed in app-global
*** WARN addons.xpi: Add-on is invalid: Error: Directory C:\Program Files\Mozill
a Firefox\extensions\ffxtlbr@babylon.com does not contain a valid install manife
st
*** WARN addons.xpi: Could not uninstall invalid item from locked install locati
on
*** LOG addons.xpi: New add-on {1FD91A9C-410C-4090-BBCC-55D3450EF433} installed
in app-global
*** LOG addons.xpi: New add-on {972ce4c6-7e08-4474-a285-3208198ce6fd} installed
in app-global
*** LOG addons.xpi: New add-on m3ffxtbr@mywebsearch.com installed in winreg-app-
global
*** LOG addons.xpi: New add-on avg@toolbar installed in winreg-app-global
*** LOG addons.xpi: New add-on daplinkchecker@speedbit.com installed in winreg-a
pp-global
*** LOG addons.xpi: New add-on wrc@avast.com installed in winreg-app-global
*** LOG addons.xpi: Updating database with changes to installed add-ons
*** LOG addons.xpi-utils: Updating add-on states
*** LOG addons.xpi-utils: Writing add-ons list
*** LOG addons.manager: shutdown
*** LOG addons.xpi: shutdown
*** LOG addons.xpi-utils: shutdown
*** LOG addons.xpi-utils: Database closed
*** LOG addons.xpi: startup
*** WARN addons.xpi: Ignoring missing add-on in C:\Program Files\SearchPredict\P
RFireFox
*** WARN addons.xpi: Ignoring missing add-on in C:\Program Files\SpeedBit Video
Downloader\SPFireFox
*** WARN addons.xpi: Ignoring missing add-on in C:\Program Files\Web Assistant\F
irefox
*** WARN addons.xpi: Ignoring missing add-on in C:\Program Files\Iminent\webboos
ter@iminent.com
*** LOG addons.xpi: Skipping unavailable install location app-system-local
*** LOG addons.xpi: Skipping unavailable install location app-system-share
*** LOG addons.xpi: checkForChanges
*** LOG addons.xpi: No changes found
=> #<Selenium::WebDriver::Driver:0x..fbe37f7d8 browser=:firefox>
irb(main):003:0> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:21:11.963

您的 Firefox 配置文件正在启动时检查附加组件。当我在 Windows 中开发基于 Ruby 的 Selenium 测试时，我经常收到此消息。切换到 Mac OS X 然后再切换到 Ubuntu 实际上似乎为我解决了这个问题，但由于这有点极端，你可以做一个解决方法。

首先，您需要在 Firefox 中设置一个在启动时不检查附加组件的新配置文件。这是您需要在该配置文件上设置的选项的一个主题：[链接](https://stackoverflow.com/questions/1105766/how-to-disable-firefox-add-ons-update-check-on-start)。以下是 Mozilla 关于如何使用 Firefox 配置文件管理器的参考，以备不时之需： [link](http://support.mozilla.org/en-US/kb/profile-manager-create-and-remove-firefox-profiles)

然后在你的 Ruby 代码中，你有这样的东西：

```
driver = Selenium::WebDriver.for :firefox 
```

您需要添加一个选项来告诉 Webdriver 要使用哪个配置文件。它最终看起来像这样，而不是：

```
driver = Selenium::WebDriver.for :firefox, :profile => "selenium_testing" 
```

（只需将“selenium_testing”替换为您为新配置文件命名的任何内容。）

然后，您应该能够在没有所有这些恼人警告的情况下启动 Firefox。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:59:36.860

我通过将 Firefox 升级到旧版本（与 Selenium-WebDriver 配合良好）解决了这个问题。就我而言，我不得不降级回`Firefox 18`这个版本，并且可以使用`Selenium 2.27`

查看[旧版本的 Firefox](https://ftp.mozilla.org/pub/mozilla.org/firefox/releases/)

# html - 在 IE 上的 Microsoft Outlook 中以不同方式呈现表间距

> ID：14265872
> 
> 赞同：0
> 
> 时间：2013-01-10T19:36:16.717
> 
> 标签：html, internet-explorer, email, outlook

我目前正在尝试使用 HTML 电子邮件的图像和表格创建一个圆角框。它在所有客户端和浏览器上看起来都很棒，除了 IE 上的 Microsoft Outlook（测试 8 和 9）。这是代码片段：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=4" />
<title></title>
</head>
<body style="margin:0px; padding:0px;">
<style type="text/css">
.ReadMsgBody {width: 100%;}
.ExternalClass {width: 100%;}
</style>

<table width="174" border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td width="174" align="left" valign="top" style="line-height:0px;">
        <img src="lmir_tmpl_box_top.png" width="174" height="13" align="left" border="0" style="display:block;" alt="" />
        </td>
    </tr>
    <tr>
        <td width="174" align="left" valign="top">

            <table width="174" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td width="8" height="100%" align="left" valign="top" bgcolor="#dcddde"></td>
                    <td width="158" align="left" valign="top" bgcolor="#dcddde">

                        <table width="158" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                                <td width="158" align="left" valign="top" style="line-height:15px; font-family:Verdana, Arial, Helvetica, sans-serif; color:#414042; font-size:11px; font-weight:bold;">
        Now you can access on your mobile device!
                                </td>
                            </tr>
                            <tr>
                                <td width="158" height="8" align="left" valign="top"></td>
                            </tr>
                            <tr>
                                <td width="158" height="1" align="left" valign="top" bgcolor="#CCCCCC"></td>
                            </tr>
                            <tr>
                                <td width="158" height="8" align="left" valign="top"></td>
                            </tr>
                            <tr>
                                <td width="158" align="left" valign="top" style="line-height:15px; font-family:Verdana, Arial, Helvetica, sans-serif; color:#414042; font-size:11px; font-weight:bold;">
                                <img src="arrow.png" width="10" height="12" align="left" alt="" border="0" style="display:block;" alt="" />
                                &nbsp;&nbsp;Visit <a href="#" style="color:#00aef0;" target="_blank"><span>Link</span></a>
                                </td>
                            </tr>
                        </table>

                    </td>
                    <td width="8" height="100%" align="left" valign="top" bgcolor="#dcddde"></td>
                </tr>
            </table>

        </td>
    </tr>
    <tr>
        <td width="174" align="left" valign="top" style="line-height:0px;">
        <img src="lmir_tmpl_box_bot.png" width="174" height="13" align="left" border="0" style="display:block;" alt="" />
        </td>
    </tr>
</table>

</body>
</html> 
```

这是该框在 Outlook 中的屏幕截图：

![在此处输入图像描述](../Images/ff87829821549da90d1acff4d64c0c2f.png)

有谁知道为什么中间一排被推到左边？谢谢，如果您有任何问题或意见，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:21:28.227

我已经想通了。显然我必须从弯曲的角落顶部和底部图像中删除 align="left" 。谢谢你。

# python - 迭代列表字典时的奇怪输出

> ID：14265874
> 
> 赞同：0
> 
> 时间：2013-01-10T19:36:29.913
> 
> 标签：python

在 Week 类中，我使用 .fromkey() 方法创建了一个字典，其中包含周一至周六的字符串键，并将它们全部初始化为一个空列表：

```
self.weekDict = dict.fromkeys(dayNameList, []) 
```

我有一个函数，然后迭代一个员工列表，并且在每次迭代中，迭代他们的工作日并将员工附加到每天的相应 weekDict 列表中：

```
def setWeekDict(employees):
            for employee in employees:
                for day in employees[employee].workDays:
                    self.weekDict[day].append(employee)
                    print "employee: " + employee
                    print "weekday/list: " + str(day) + str(self.weekDict[day]) 
```

我希望 weekDict 列表能够反映计划在特定日期工作的每个人。相反，似乎每天的列表都会累积我每天为员工迭代的总次数。我的打印语句输出如下：

```
employee: Addison
weekday/list: Saturday['Addison']
employee: Addison
weekday/list: Monday['Addison', 'Addison']
employee: Addison
weekday/list: Tuesday['Addison', 'Addison', 'Addison']
employee: Addison
weekday/list: Wednesday['Addison', 'Addison', 'Addison', 'Addison']
employee: Addison
weekday/list: Thursday['Addison', 'Addison', 'Addison', 'Addison', 'Addison'] 
```

显然，我只希望“Addison”或任何其他员工每天出现一次，而且我无法理解我的 for 循环中的内容会为每个列表添加员工姓名 + 员工姓名被添加到的次数之前的其他列表。我只能认为 dict.fromkeys() 创建的键实际上都指向同一个列表，但我不认为 fromkeys() 函数是这样工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:47:09.943

`fromkeys()`如果与可变对象一起使用可能会导致这种行为，因为它将相同的对象（相同`id()`）分配给字典的每个键。

```
In [16]: dic=dict.fromkeys("spam",[])

In [17]: [id(x) for x in dic.values()]    #all of them are same objects
Out[17]: [141885196, 141885196, 141885196, 141885196]

In [18]: dic['s'].append(1)   #changing one changes others as well

In [19]: dic
Out[19]: {'a': [1], 'm': [1], 'p': [1], 's': [1]} 
```

因此，`dict-comprehensions`必须与可变对象一起使用：

```
In [20]: dic={x:[] for x in "spam"}

In [21]: [id(x) for x in dic.values()]               #unique objects
Out[21]: [141884972, 141848300, 142262988, 141895980]

In [22]: dic['s'].append(1)

In [23]: dic
Out[23]: {'a': [], 'm': [], 'p': [], 's': [1]} 
```

# java - 如何在组件表示存储扩展中获取组件对象

> ID：14265877
> 
> 赞同：2
> 
> 时间：2013-01-10T19:36:32.400
> 
> 标签：java, tridion, tridion-2011, tridion-content-delivery, tridion-storage-extension

我正在尝试在 Tridion 2011 中编写存储扩展，我将在其中扩展`JPAComponentPresentationDAO`和实现`ComponentPresentationDAO`.

```
public void create(ComponentPresentation itemToCreate, ComponentPresentationTypeEnum componentPresentationType) throws StorageException 
{
    super.create(itemToCreate,componentPresentationType);   
    String tcmURI = Integer.toString(itemToCreate.getComponentId());
    Component compObject // I want Component object to get the schema ID 
    PublishActionDAO publishActionDAO = (PublishActionDAO) StorageManagerFactory.getDefaultDAO("PublishAction");
    PublishAction publishAction = new PublishAction();
    publishAction.setAction("ADD"); 
    publishAction.setTcmUri(tcmURI);
    publishActionDAO.store(publishAction);
} 
```

在上面的示例代码中，我想使用`itemToCreate.getComponentId()`获取组件 ID 的位置创建 Component 对象，这样我就可以将一些有用的细节传递给我的实体类，该实体类会将这些数据存储在我的数据库表中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T20:28:57.983

您将能够获取`ComponentMeta`从 ItemMeta 继承的 Schema Id。首先你需要`ItemDAO`从中获取`StorageManagerFactory`，然后`findByPrimaryKey`将给 ComponentMeta。这仅在您`super.create`应该将组件持久保存到代理数据库之后才有效。试试这个。

**示例片段：**

```
ItemDAO item = (ItemDAO) StorageManagerFactory.getDAO(pubid,StorageTypeMapping.COMPONENT_META);
ComponentMeta meta = (ComponentMeta) item.findByPrimaryKey(pubid,compid);
int schemaID = meta.getSchemaId() ; 
```

注意：您需要从您的 itemToCreate tcmURI 传递 pubid、compid

# sql-server - 使用循环更改 SQL Server 数据库中表的架构

> ID：14265879
> 
> 赞同：0
> 
> 时间：2013-01-10T19:36:40.310
> 
> 标签：sql-server, tsql

我有一个关于使用循环更改 SQL Server 数据库中表的架构的问题。

此代码由于错误而失败，我无法弄清楚它有什么问题。

错误是：

> *错误：“|”附近的语法不正确。*

这里是 T-SQL 代码是：

```
SELECT DISTINCT TABLE_NAME
Into   #Temp 
FROM  INFORMATION_SCHEMA.TABLES

Declare @Name varchar2
Declare @mQuery varchar2

While (Select Count(*) From #Temp) > 0
Begin

    Select Top 1 @Name = Name From #Temp;

    SET @mQuery = 'ALTER SCHEMA schema1 TRANSFER schema99.'  || @Name  ||  ';' ;

    dbms_output.put_line( @mQuery );

    --sp_executesql @mQuery;

    Delete #Temp Where Name = @Name;

End 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:45:01.480

使用`PRINT`代替`dbms_output.put_line`，而`+`不是`||`：

```
SET @mQuery = 'ALTER SCHEMA schema1 TRANSFER schema99.'  + @Name  +  ';' ;

PRINT @mQuery; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:38:20.183

tsql 中的字符串连接是`+`，不是`||`。

# google-chrome-extension - 将 devtools.js 的内容脚本添加到我的新面板

> ID：14265880
> 
> 赞同：5
> 
> 时间：2013-01-10T19:36:46.423
> 
> 标签：google-chrome-extension

我有一段时间试图在我的内容脚本中获取代码来与我的面板对话。（此扩展为开发工具添加了一个新面板。）从我的内容脚本中，我可以这样做：

```
chrome.extension.sendMessage({greeting: "hello"}, function(response) {
  console.log(response.farewell);
}); 
```

我可以在后台脚本中提取它没问题。

```
chrome.extension.onMessage.addListener(
 function(request, sender, sendResponse) {
 if (request.greeting == "hello") sendResponse({farewell: JSON.stringify(sender)});
}); 
```

但是我需要在我的 devtools JS 中接收我的消息。这样我就可以与我添加到开发工具的面板交谈。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T20:34:19.607

[为了在Devtools 页面](https://developer.chrome.com/extensions/devtools.html)和多个[内容脚本](https://developer.chrome.com/extensions/content_scripts.html)页面之间建立连接，[后台页面](https://developer.chrome.com/extensions/background_pages.html)用作中介。所以，想法是有一个通道 from `devtools`to`background`和 from `background`to `content scripts`。这是处理内容脚本的可变性质所需**的通用方法**`execution time`。

您可以使用以下脚本作为 to 之间通信的`devtools.js`参考`content scripts`。

**清单.json**

注册`background`，`devtools`并`content scripts`到清单文件

```
{
    "name": "Inspected Windows Demo",
    "description": "This demonstrates Inspected window API",
    "devtools_page": "devtools.html",
    "manifest_version": 2,
    "version": "2",
    "permissions": [
        "experimental",
        "tabs"
    ],
    "background": {
        "scripts": [
            "background.js"
        ]
    },
    "content_scripts": [
        {
            "matches": [
                "<all_urls>"
            ],
            "js": [
                "myscript.js"
            ]
        }
    ]
} 
```

**开发工具.html**

注册`devtools.js`符合 CSP

```
<html>

    <head>
        <script src="devtools.js"></script>
    </head>

    <body></body>

</html> 
```

**开发工具.js**

```
//Created a port with background page for continous message communication
var port = chrome.extension.connect({
    name: "Sample Communication" //Given a Name
});
//Posting message to background page
port.postMessage("Request Tab Data");
//Hanlde response when recieved from background page
port.onMessage.addListener(function (msg) {
    console.log("Tab Data recieved is  " + msg);
}); 
```

**myscript.js**

```
//Handler request from background page
chrome.extension.onMessage.addListener(function (message, sender) {
    console.log("In content Script Message Recieved is " + message);
    //Send needed information to background page
    chrome.extension.sendMessage("My URL is" + window.location.origin);
}); 
```

**背景.js**

```
//Handle request from devtools   
chrome.extension.onConnect.addListener(function (port) {
    port.onMessage.addListener(function (message) {
        //Request a tab for sending needed information
        chrome.tabs.query({
            "status": "complete",
            "currentWindow": true,
            "url": "http://www.google.co.in/"
        }, function (tabs) {

            for (tab in tabs) {
                //Sending Message to content scripts
                chrome.tabs.sendMessage(tabs[tab].id, message);
            }
        });

    });
    //Posting back to Devtools
    chrome.extension.onMessage.addListener(function (message, sender) {
        port.postMessage(message);
    });
}); 
```

# 输出

您可以在页面中看到`http://www.google.co.in/`正在接收`devtools`

# 参考

您可以参考以下文档以获取更多信息。

*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)
*   [背景页面](https://developer.chrome.com/extensions/background_pages.html)
*   [CSP](https://developer.chrome.com/extensions/contentSecurityPolicy.html)
*   [开发工具](https://developer.chrome.com/extensions/devtools.html)
*   [讯息沟通](https://developer.chrome.com/extensions/messaging.html)
*   [扩展 API](https://developer.chrome.com/extensions/extension.html)
*   [选项卡 API](https://developer.chrome.com/extensions/tabs.html)

# shell - 创建一个最小的符号链接

> ID：14265882
> 
> 赞同：0
> 
> 时间：2013-01-10T19:36:48.707
> 
> 标签：shell

我正在寻找一种（最好是可移植的）方法来创建“短”相对符号链接。那是两个绝对文件名`target`，`name`我想找到一个等效且短的相对文件名`reltarget`，这样之后

```
ln -s $target $name 
```

`name`指向与之后相同的位置

```
ln -s $reltarget $name 
```

.

一些例子：

```
target="/usr/bin/program-1.2"; name="/usr/bin/program";
=> reltarget="program-1.2"

target="/usr/lib/program-1.2/bin/program"; name="/usr/bin/program-1.2";
=> reltarget="../lib/program-1.2/bin/program" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:03:34.673

如果您的系统上有 Python 2.6 或更新版本，则可以这样做；如果从 bash 以外的其他 shell 启动，您可能需要修改引用。

```
ln -s "`python -c "import os.path; print os.path.relpath('$target','$name')"`" "$name" 
```

受此[启发](https://stackoverflow.com/a/7305217/477878)。

# python - web.py 不删除请求之间的停止

> ID：14265884
> 
> 赞同：1
> 
> 时间：2013-01-10T19:36:52.653
> 
> 标签：python, web.py, pythonanywhere

我花了很长时间才弄清楚问题是什么，现在我不知道如何解决它。

我正在使用 pythonanywhere 运行我的 web.py 服务器

所以这就是问题所在。web.py 实例不会在服务器请求之间停止运行。让我展示一下因为这个原因发生了什么。

我有一个使用**list.append(number)**在循环中填充的列表， 因此在对服务器的第一个请求期间，脚本运行良好。 **列表 = (1, 2, 3)**

但是，由于 web.py 实例没有停止，因此在对服务器**列表**的第二次请求中最终是**(1, 2, 3, 1, 2, 3)**并且我的脚本不起作用。

我怎么知道 web.py 不会在请求之间停止运行？当我在脚本生命周期结束时删除每个命名空间时，对服务器的第二个请求返回一个错误，指出“未定义**web ”**

> 类 web_serve：

```
def GET(self):

    data_obj = volumePit_google()
    plotter = volumePit_plot()

    data_obj.download('SPY', 2)
    data_obj.organize()

    price, volume = zip(*data_obj.data_final)
    plot_edges = data_obj.plotter_edges
    e_test = data_obj.data_ticks

    plotter.maxmin(price)
    data_obj.plotter_ticks()

    for i, tick in enumerate(data_obj.data_ticks[1:]):
        edges = [data_obj.data_ticks[i], tick]
        volume_edges = [plot_edges[i], plot_edges[i+1]]

        day_data = data_obj.data_final[edges[0]:edges[1]]
        price, volume = zip(*day_data)

        plotter.dividers(volume_edges)

        price_position = data_obj.price_action(price, [volume_edges[0], volume_edges[1]])
        plotter.subplot.plot(price_position, price, color='g', ls='-', lw='1')

        histogram = data_obj.histogram(day_data, 0)
        plotter.volume_profile(histogram, volume_edges)

    plotter.ticks([data_obj.plotter_edges, data_obj.dates, data_obj.plotter_tick_pos])

    data_stream = cStringIO.StringIO()
    plt.savefig(data_stream, bbox_inches='tight')
    data_stream.seek(0)
    return_png = base64.b64encode(data_stream.read())
    data_stream.close()

    return return_png 
```

需要清除的变量在**data_obj里面**

我不知道是否值得一提，但以下两个类都定义在同一个文件中 data_obj = volumePit_google() plotter = volumePit_plot()

```
class volumePit_google:
data = []
data_final = []

day_volume = []
data_ticks = [] #list contains indexes of the data_final separating days
dates = []

plotter_tick_pos = []
plotter_edges = [0]

def download(self, ticker, period): 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:40:02.320

我无法想象您为什么希望服务器在请求之间停止。那将是非常低效的。

您应该简单地避免保留全局/模块级对象。

**已编辑**现在您终于将代码发布到`volumePit_google`班级，我们可以看到问题所在。*在 Python 中在类*级别定义的任何内容都是类变量，在类的所有成员之间共享。相反，您需要的是*实例*变量，它们在每次实例化类时定义：

```
class volumePit_google(object):
    def __init__(self):
        self.data = []
        self.data_final = []

        self.day_volume = []
        self.data_ticks = [] #list contains indexes of the data_final separating days
        self.dates = []

        self.plotter_tick_pos = []
        self.plotter_edges = [0] 
```

# asp.net - SCRIPT5022：Sys.WebForms.PageRequestManagerServerErrorException：输入字符串的格式不正确

> ID：14265886
> 
> 赞同：6
> 
> 时间：2013-01-10T19:37:15.440
> 
> 标签：asp.net, login, client-side, internet-explorer-10

在 IE10 上，当我单击登录按钮时，我在控制台中看到以下错误： SCRIPT5022: Sys.WebForms.PageRequestManagerServerErrorException: 输入字符串的格式不正确。ScriptResource.axd，第 939 行字符 13

我添加了一些服务器端日志记录，但该页面从未发送过，因此这似乎是客户端问题。

这种行为在 IE8、Firefox 或 chrome 中不会发生，它可以正常工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-11T02:38:10.830

这是因为您的提交按钮是一个`input`with `type="image"`。因此，坐标与表单一起提交。以前版本的 Internet Explorer 以整数形式提交这些坐标，但 Internet Explorer 10 以小数形式提交它们。

有多种方法可以修复它。有关一些解决方案，请参阅[此问题](https://stackoverflow.com/q/13299685/937084)和[此错误报告](https://connect.microsoft.com/VisualStudio/feedback/details/755419/asp-net-4-0-and-ie10-click-on-imagebutton-in-updatepanel-produces-error-click-on-normal-button-does-not)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T03:12:08.300

我遇到了同样的问题，我的配置设置如下，

在框架 3.5 上运行的应用程序，

IIS应用程序池框架v2.0版，

互联网浏览器 10..

请在兼容性视图中设置 IE，然后所有错误都消失了。如果仍然有人在搜索相同的问题，请您可以通过将 IE 设置为该网站的兼容模式来尝试一下....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:09:32.623

这是ie 10 的问题。只需将net framework 升级到4.5。这将解决您的问题.. :)

# java - 如何覆盖 compareTo()。如果它是可能的

> ID：14265887
> 
> 赞同：0
> 
> 时间：2013-01-10T19:37:16.290
> 
> 标签：java

```
public int compareTo(Object obj){
   Books bk = (Books) bk;
   return this.id - obj.id;
} 
```

我的代码在什么时候工作正常，什么时候`id`是`Integer`一个正值。有可能`id`是负值吗？如何更改代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:39:06.467

以下可能是实现它的最简单方法：

```
public int compareTo(Object obj) {
   Books bk = (Books)obj;
   return Integer.compare(this.id, bk.id);
} 
```

您当前的版本几乎是正确的，只是它容易受到整数溢出的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:40:42.793

当您覆盖时，`compareTo`您可以定义这些问题的答案。`id`是否可能为负值完全取决于您的程序。您必须问自己的问题是“一本书比另一本书‘更大’（或更小）意味着什么？”。如果答案是更大的 id 就是更大的 Book，那么你的实现很好，除了一个小错误：

```
public int compareTo(Object obj){
   Books bk = (Books) obj;
   return this.id - bk.id;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:44:09.130

我让它工作了：D

`return (this.id > bk.id ) ? -1: (this.id < bk.id) ? 1:0 ;`

这符合我的要求，但感谢您的回复

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T19:40:57.187

您**必须**能够返回负值。从`Comparable`规范中，如果

```
a.compareTo(b) > 0 
```

然后

```
b.compareTo(a) < 0 
```

否则你不能`compareTo()`用来建立**订单**

# java - Java中的每个循环的原始数组如何与new一起使用？

> ID：14265888
> 
> 赞同：22
> 
> 时间：2013-01-10T19:37:18.140
> 
> 标签：java, arrays, foreach

我知道 new for each loop 适用于 Iterable 和数组，但我不知道使用数组时幕后发生了什么。

谁能帮我理解这一点？提前致谢。

```
int[] number = new int[10];

for(int i: number) {

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T19:39:47.423

循环等效于：

```
for(int j = 0; j < number.length; j++) {
  int i = number[j];
  ...
} 
```

其中 j 是内部生成的引用，与普通用户标识符不冲突。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-01-25T22:06:51.677

有点晚了，但就在这里。

编译器知道您是对集合还是数组使用 for-each 循环语句。

如果用于收集，编译器会将 for-each 循环转换为使用`Iterator`.

如果用于数组，编译器将使用索引变量将 for-each 循环转换为等效的 for 循环。

[这是 oracle.com 上的描述](https://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T19:39:05.820

在您的代码中，您在内存中分配了一个由 10 个整数组成的数组并获得对它的引用。在 for 循环中，您只需遍历数组中的每个项目，所有项目的初始值为 0。当您迭代数组元素时，每个项目的值都将存储在`i`for 循环中声明的变量中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T19:40:28.483

这相当于：

```
for(int x = 0; x < number.length; x++) {
  int i = number[x];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T19:55:24.347

这相当于：

```
final int len = number.length;
for(int j = 0; j < len; j++) {
  int i = number[j];
} 
```

请注意， forEach 不会评估每个循环中的 .length 。这也可能被 JVM 消除，但尤其是在集合的情况下，有些人会使用

```
for(int j = 0; j < collection.size(); j++) { 
```

它对更快的速度产生了（小）差异

```
int len = collection.size()
for(int j = 0; j < len; j++) { 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T19:39:56.273

for each over 数组本质上是对这个结构的“糖”：

```
for(int i = 0;i<number.length;i++)
{  
} 
```

我想这是作为语言的构造提供的，以便人们可以在以旧方式迭代的结构上使用增强的 for 循环。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-23T13:02:49.010

`IntStream.range(1,4)`可以使用，如果使用 java 8。

# javascript - 无法在 javascript 中显示以前隐藏的图像

> ID：14265891
> 
> 赞同：0
> 
> 时间：2013-01-10T19:37:32.880
> 
> 标签：javascript, html, css, ajax, prototype

`id = "mobile_right_folder_image"`预计在启动时隐藏 HTML 中的图像。在事件中，图像应该是可见的。

使用内联隐藏`display:none`图像并尝试使用图像的 id 在 Javascript 函数中显示图像。在应用程序中使用原型 - AJAX。

我已经尝试过显示，javascript 中的可见性属性似乎没有任何帮助。我在不同的位置有一个类似的图像，效果很好。

我怀疑父母的某些财产不允许显示图像子项。请帮忙。

```
HTML Code structure below :

<div id="mc_div_main">
<div id="mc_div_folders_container" style="width: 144px; display: none;">
    <div id="mc_div_content" style="left: 0px;" name="mc_div_content">
        <div id="mc_div_report" class="content" style="display: none" name="content_div"> </div>
        <div id="mc_div_compose" class="content" style="display: none" name="content_div"> </div>
        <div id="mc_div_message_list" class="content" name="content_div">
            <div id="rs_container" class="tile_container" style="overflow: hidden">
                <div class="tile_title_bar">
                        <img id="mobile_right_folder_image" border="0" onclick="javascript:f_folderVSMsgDisplay('1');" style="vertical-align: middle; height: 16px; padding-left: 2px; display:none" src="images/col_chooser_right.gif">
                    <span class="shadow">
                    <span class="tile_header_widgets" style="text-align: right; margin-right: 8px;">
                </div>
            <div id="rs_document" style="height: 150px;">
            <p> </p>
        <div id="rs_separator" class="separator" style="top: 172px;"> </div>
        <div id="rs_calendar" style="bottom: 0px; overflow: auto; top: 178px;">     
        </div>
        </div>
        </div>
        </div>
    </div>

Java script :

         document.getElementById('mobile_right_folder_image').style.display=''; 
```

我也尝试过`inline`&`bloc`属性来显示。

* * *

更好的 html 树结构如下：（mc_div_folders_container ， mc_div_content 是同一级别的兄弟姐妹）

CHILD -> 父路径图像：mobile_right_folder_image -> ->

我怀疑：样式=“溢出：隐藏”

```
<div id="mc_div_main">
    <div id="mc_div_folders_container" style="width: 144px;">
        <div id="mc_div_folders" style="bottom: 0px;">
        <div id="mc_folders_separator" class="separator" style="height: 6px; width: 100%; postion: absolute; z-index: 1; height: 407; display: none;"> </div>
        <div id="mc_div_content_selector" style="display: none; overflow: hidden;">
    </div>
    <div id="mc_div_content" style="left: 150px;" name="mc_div_content">
        <div id="mc_div_report" class="content" style="display: none" name="content_div"> </div>
        <div id="mc_div_compose" class="content" style="display: none" name="content_div"> </div>
        <div id="mc_div_message_list" class="content" name="content_div">
        <div id="rs_container" class="tile_container" style="overflow: hidden">
            <div class="tile_title_bar">
                <img id="mobile_right_folder_image" border="0" onclick="javascript:f_folderVSMsgDisplay('1');" style="vertical-align: middle; height: 16px; padding-left: 2px; display:none" src="images/col_chooser_right.gif">
                <span class="shadow">
                <span class="tile_header_widgets" style="text-align: right; margin-right: 8px;">
            </div>
            <div id="rs_document" style="height: 150px;">
            <p> </p>
            <div id="rs_separator" class="separator" style="top: 172px;"> </div>
            <div id="rs_calendar" style="bottom: 0px; overflow: auto; top: 178px;">
        </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:48:08.347

使用原型时，使用`$('mobile_right_folder_image').show()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:50:03.870

`mc_div_folders_container`被隐藏，因此无论其样式如何，它的所有后代（图像是后代）都将不可见。

```
document.getElementById('mc_div_folders_container').style.display='inline-block';
document.getElementById('mobile_right_folder_image').style.display='block'; 
```

# matomo - 重建一天的统计数据？

> ID：14265894
> 
> 赞同：2
> 
> 时间：2013-01-10T19:37:37.900
> 
> 标签：matomo

我有一个特殊的问题。Piwik 通常主要在我的 DreamHost 安装上工作（我稍后会移动它，但在那之前..），但最近几天我们受到了很大的打击。

具体来说，发生这种情况已经够糟糕了：

![特定日期 0 次点击](../Images/df7cdef2a1da5a930a2299253fecf640.png)

（具体来说，0的那一天是错误的，至少30000才变成0。第二天只是最初峰值的剩余，是正常的。）

有什么方法可以重建特定日期的统计数据，还是重建所有数据的唯一方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T08:10:26.787

根据常见问题解答[如何强制从日志中重新处理报告？](http://piwik.org/faq/how-to/#faq_59)有几种方法。

您可以删除表格`piwik_archive_blob_YYYY_MM`并`piwik_archive_numeric_YYYY_MM`包含要重新归档的日期。这是我用过的方法。

或者，您可以临时添加：

```
[Debug]
always_archive_data_day = 1 
```

对您`config/config.ini.php`强制归档每日报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T21:21:29.893

在这种情况下，删除存档表以及更改配置是多余的（您将重新处理比您需要的更多的数据）。

最简单的解决方案是使这一天无效。这里有常见问题条目： http: [//piwik.org/faq/how-to/faq_155/](http://piwik.org/faq/how-to/faq_155/)

# kinect - 处理 - 获取草图以识别 xtion kinect 设备

> ID：14265896
> 
> 赞同：0
> 
> 时间：2013-01-10T19:37:38.917
> 
> 标签：kinect, processing, openni, openkinect

我有一个处理草图，它与微软 Kinect 一起工作，我现在正试图与华硕 Xtion RGB+D 相机一起工作。我收到附加的错误。这是我的代码：

```
// Daniel Shiffman
// Kinect Point Cloud example
// http://www.shiffman.net
// https://github.com/shiffman/libfreenect/tree/master/wrappers/java/processing

import org.openkinect.*;
import org.openkinect.processing.*;
import muehlseife.*; //<- import library
import java.io.*;
import processing.opengl.*;

octaneRenderer oct; //<- setup variable
boolean exportObj = false;

// Kinect Library object
Kinect kinect;

float a = 0;

// Size of kinect image
int w = 640;
int h = 480;

// writing state indicator
boolean write = false;

// threshold filter initial value
int fltValue = 950;

// "recording" object. each vector element holds a coordinate map vector
Vector <Object> recording = new Vector<Object>(); 

// We'll use a lookup table so that we don't have to repeat the math over and over
float[] depthLookUp = new float[2048];

void setup() {
  //size(800,600,P3D);
  size(800,600,OPENGL);
  kinect = new Kinect(this);
  kinect.start();
  kinect.enableDepth(true);
  // We don't need the grayscale image in this example
  // so this makes it more efficient
  kinect.processDepthImage(false);

... 
```

知道如何让 xtion 工作吗？![在此处输入图像描述](../Images/46f9202d6ea17a85157947205f22c4a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:07:05.523

AFAIK Daniel Shiffman 的 Kinect 包装器适用于 OpenKinect/libfreenect，它有一个仅适用于 Xbox Kinect 的驱动程序（不适用于 Windows/Asus Xtion/Primesense 传感器的 Kinect）

您可能需要使用 OpenNI 和 PrimeSense 驱动程序。由于您使用的是处理，我建议使用[SimpleOpenNI](http://code.google.com/p/simple-openni/)包装器。唯一的问题是 OpenNI 2 最近发布了，但 SimpleOpenNI 没有为此更新，因此它只能与较旧的 (1.5.x) SDK 一起使用。幸运的是，[SimpleOpenNI 下载](http://code.google.com/p/simple-openni/downloads/list)还包括您需要的安装程序。

先试试这个：

1.  使用硬件/中间件/等。SimpleOpenNI 提供的安装程序
2.  安装处理库
3.  运行一个简单的示例，看看它是否有效）

希望一切都好。

如果没有，您可能需要按此顺序一个一个地手动安装 OpenNI/NITE/Sensor（不是 SensorKinect）。您应该能够从[OpenNI 官方站点](http://www.openni.org/openni-sdk/openni-sdk-history-2/)下载各个安装程序。在开始处理之前，您应该运行一个 OpenNI 示例（如 SimpleNiViewer）以检查在此阶段之前一切是否正常。

我已经看到[Everyware](http://everyware.kr/home/onedotzero-x-everyware/)更新的 Pink Cloud 应用程序在 Processing 中运行，他们使用的是华硕 Xtion 传感器，所以希望你很快就会使用带有 Processing 的 Xtion 传感器。 ![Everyware Pink Cloud 安装](../Images/bc13ee46ad77f8b3ea896f5ef1aaaec6.png)

# svg - FF 和 IE9 上的 SVG 字体 -- css 字体在 svg 中工作，但 svg 字体不能？

> ID：14265904
> 
> 赞同：0
> 
> 时间：2013-01-10T19:38:18.443
> 
> 标签：svg, svg-font

我正在尝试创建在不同浏览器中看起来尽可能相似的 SVG 文本。

我理论上知道 Firefox 和 IE 9 都不支持 SVG 字体。但是，我很困惑为什么他们似乎都能够获取我从 Typekit 下载的字体。

如果您查看此示例[http://www.concord.org/~sfentress/test-svg2.html](http://www.concord.org/~sfentress/test-svg2.html)，您会看到两个尝试使用“Museo”字体的示例。

第一个只是指定“font-family="'museo-slab'"，这是从 Typekit 下载的字体。第二个直接链接到服务器上的 svg 字体文件 museo-sans-500。

在 Chrome 上，两种字体都正确呈现，但在 Firefox 和 IE 上，只有第一个字体可以。这对我来说似乎很奇怪——我本来希望两者都工作或都不工作。

Firefox 和 IE 如何正确呈现第一种字体而不是第二种字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:42:42.680

Firefox 和 Internet Explorer 都不支持 SVG 字体（如您所说）。您的第一个字体不是由 SVG 字形组成的字体，因此它可以正确呈现。我看到这些浏览器中对 SVG 字体的支持可能很快就会投入使用，但在那之前，它们不会呈现由 SVG 字形定义的字体。

# qt - qstring拆分自动检测？

> ID：14265907
> 
> 赞同：0
> 
> 时间：2013-01-10T19:38:22.657
> 
> 标签：qt

如何用逗号`,`或空格分割 QString `？`

 ````
QString line = in.readLine();
QStringList fields = line.split(","); 
```

文件将是：

```
1.0 2.0
1.1 4.3 
```

或者

```
1.0,2.0
1.1,4.3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:43:39.850

使用`QRegExp`基于 的重载`split`：

```
QStringList fields = line.split(QRegExp(",| ")); 
````

# asp.net - 以编程方式删除子菜单项

> ID：14265912
> 
> 赞同：0
> 
> 时间：2013-01-10T19:38:34.020
> 
> 标签：asp.net, vb.net, menu, menuitem

我需要隐藏我的一些菜单项，但我不知道如何。

我从 web.siteMap xml 文件中获取数据，因为它是站点地图，所以我已将所有页面都包含在我的网站中。问题是，其中一些页面需要一个查询字符串才能正常运行；而且我不想告诉用户他在错误的页面上，因为他从菜单中单击了一个他不应该拥有的项目。所以我决定应该隐藏这些页面。

编辑：我想删除：

```
<siteMapNode url="~/Categories/review_tab.aspx" title="TABLET REVIEWS" description="TABLET REVIEWS"/>
<siteMapNode url="~/Categories/review_lap.aspx" title="LAPTOP REVIEWS" description="LAPTOP REVIEWS"/>
<siteMapNode url="~/Categories/review_tab.aspx" title="TABLET REVIEWS" description="TABLET REVIEWS"/>
<siteMapNode url="~/Categories/review_cam.aspx" title="CAMERA REVIEWS" description="CAMERA REVIEWS"/> 
```

站点地图的结构如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
    <siteMapNode url="~/" title="Menu"  description="Menu">
        <siteMapNode url="~/Default.aspx" title="HOME"  description="HOME"></siteMapNode>
        <siteMapNode url="~/ContactUs.aspx" title="CONTACT US" description="CONTACT US" />
        <siteMapNode url="~/About.aspx" title="ABOUT US" description="ABOUT US" />
        <siteMapNode url="~/Members/Default.aspx" title="MEMBERS" description="MEMBERS">
            <siteMapNode url="~/Members/ChangePassword.aspx" title="CHANGE PASSWORD" description="CHANGE PASSWORD" />
        </siteMapNode>
        <siteMapNode url="~/login.aspx" title="REVIEWS"  description="REVIEWS">
            <siteMapNode url="~/Categories/Laptops.aspx" title="LAPTOP" description="LAPTOP"/>
            <siteMapNode url="~/Categories/review_lap.aspx" title="LAPTOP REVIEWS" description="LAPTOP REVIEWS"/>
            <siteMapNode url="~/Categories/Smartphones.aspx" title="SMARTPHONE" description="SMARTPHONE"/>
            <siteMapNode url="~/Categories/review_smart.aspx" title="SMARTPHONE REVIEWS" description="SMARTPHONE REVIEWS"/>
            <siteMapNode url="~/Categories/Tablets.aspx" title="TABLETS" description="TABLETS"/>
            <siteMapNode url="~/Categories/review_tab.aspx" title="TABLET REVIEWS" description="TABLET REVIEWS"/>
            <siteMapNode url="~/Categories/Cameras.aspx" title="CAMERAS" description="CAMERAS"/>
            <siteMapNode url="~/Categories/review_cam.aspx" title="CAMERA REVIEWS" description="CAMERA REVIEWS"/>
        </siteMapNode>
        <siteMapNode url="~/Account/Default.aspx" title="ACCOUNT" description="ACCOUNT">
          <siteMapNode url="~/Account/Register.aspx" title="REGISTER" description="REGISTER"/>
          <siteMapNode url="~/Account/ForgotPassword.aspx" title="FORGOT PASS" description="FORGOT PASS" />
        </siteMapNode>
        <siteMapNode url="~/Administrator/Default.aspx" title="ADMIN"  description="ADMIN ">
          <siteMapNode url="~/Administrator/Laptops.aspx" title="LAPTOP" description="LAPTOP"/>
          <siteMapNode url="~/Administrator/Smartphones.aspx" title="SMARTPHONE" description="SMARTPHONE"/>
          <siteMapNode url="~/Administrator/Tablets.aspx" title="TABLETS" description="TABLETS"/>
          <siteMapNode url="~/Administrator/Cameras.aspx" title="CAMERAS" description="CAMERAS"/>
        </siteMapNode>
    </siteMapNode>
</siteMap> 
```

菜单：

```
.
.
.
<div id="menu_div" align="left" dir="ltr">
    <asp:Menu ID="Menu1" runat="server" BackColor="#C0BFBD" 
        DataSourceID="SiteMapDataSource1" DynamicHorizontalOffset="2" 
        Font-Names="Calibri" Font-Size="Medium" ForeColor="#2C2F36" 
        StaticSubMenuIndent="10px" RenderingMode="Table" 
        StaticEnableDefaultPopOutImage="False" style="margin-right: 0px" 
        Font-Bold="True" DisappearAfter="200">
        <DynamicHoverStyle BackColor="#282B32" ForeColor="White" />
        <DynamicMenuItemStyle HorizontalPadding="5px" VerticalPadding="3px" />
        <DynamicMenuStyle BackColor="#B5C7DE" />
        <DynamicSelectedStyle BackColor="Gray" />
        <DynamicItemTemplate>
            <%# Eval("Text") %>
        </DynamicItemTemplate>
        <StaticHoverStyle BackColor="#284E98" ForeColor="White" />
        <StaticMenuItemStyle HorizontalPadding="5px" VerticalPadding="5px" />
        <StaticSelectedStyle BackColor="#70788B" />
    </asp:Menu>
    <asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" 
        ShowStartingNode="False" />
</div> 
```

# c# - 将类属性多重绑定到列标题和数据中

> ID：14265914
> 
> 赞同：-1
> 
> 时间：2013-01-10T19:38:43.037
> 
> 标签：c#, wpf, gridview, binding

场景：
我正在尝试绑定由 3 个属性组成的自定义类的 IEnumerable 列表：日期、产品和数量。
我的 listview/gridview 已经设置了所有列，这些列将随着制造的产品动态变化。

问题：
由于我需要按也是列的产品绑定数据，因此如果按产品绑定，我会遇到问题，我不会看到金额，如果按金额绑定，我会在排。

是否有任何选项可以将识别产品的列进行多重绑定，然后将金额放入单元格中？

这是我正在使用的课程：

```
 public class MonthlyProducts
{
    public string DateID { get; set; }
    public string ProductID { get; set; }
    public int Amount { get; set; }
} 
```

我无法发布 gridview 代码，因为它会动态更改，但这是我需要放置多重绑定的地方，我为每个产品运行此代码：

```
 GridViewColumn TempColumn = new GridViewColumn();
    TempColumn.DisplayMemberBinding = ???;
    TempColumn.Header = item.ProductID;
    TempColumn.Width = 100;
    MonthlyGridView.Columns.Add(TempColumn); 
```

我必须通过代码来完成，因为每次客户需要报告时我都在构建列表视图。
我也不需要它来更新，因为我看到人们想要更新单元格，我不需要它。这是客户端在查看报告后将运行并关闭窗口的报告。

请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:44:12.293

理想情况下，您应该添加两个`GridViewTextColumns.`

否则，对于您提出的问题，您可以`MultiBinding`在[Code behind / ViewModel](https://stackoverflow.com/a/5559900/649524)中进行设置。

# opengl - OpenGL显示白色纹理（不是正常的东西）

> ID：14265915
> 
> 赞同：1
> 
> 时间：2013-01-10T19:38:43.770
> 
> 标签：opengl, textures, sdl, render

我觉得很愚蠢...发布后几乎立即解决了...不知何故，我设法将内存地址作为纹理的值。我决定停止将它作为参考而不是静态值发送（对此有何评论？）。

我将它作为参考寄回的唯一地方是在我将它从 SDL 转换为纹理之后，也许这里也不需要它。对此有任何想法都会很棒！

如果其他人遇到和我一样的问题，我会把我原来的帖子留在这个下面。

* * *

***解决了***

所以这是一个虽然可以破解的问题，因为它在我绑定纹理之前一直有效。我会解决的。

起初我用 SDL 加载图像并将其转换为纹理，转换代码与此处完全相同：[http](http://content.gpwiki.org/index.php/SDL:Tutorials:Using_SDL_with_OpenGL) ://content.gpwiki.org/index.php/SDL:Tutorials:Using_SDL_with_OpenGL （链接所以我不打字不多）。初始化代码也是一样的。

加载纹理时，它会保存到这样的地图中：

功能：

```
GLuint& Loader::loadTex(const string name) 
```

代码：

```
//Check if the text is already loaded, if it is return it
map<string, GLuint&>::const_iterator it = m_loadedTextures.find(name);
if(it != m_loadedTextures.end())
{
    return it->second;
}

SDL_Surface* surface = NULL;

//Load the file
string loadPath =  m_prePath + name;
surface = lEntity.loadImage(loadPath.c_str(), true);

if(surface == NULL)
{
    //load default texture?
}

//convert the SDL_Surface to a texture
GLuint newTexture = lEntity.glEntity.GetTextureFromSurface(surface);
GLenum h = glGetError();

//free the surface
SDL_FreeSurface(surface);

//add to map
m_loadedTextures.insert(pair<string, GLuint&>(name, newTexture));

return newTexture; 
```

所以在我收到纹理后，我尝试像这样绘制它：

功能：

```
bool OpenGlEntity::renderOpenGl(int x, int y, int w, int h, GLuint& image, SDL_Rect& clip) 
```

代码：

```
GLuint texture = image;

// Bind the texture to which subsequent calls refer to
glBindTexture( GL_TEXTURE_2D, texture );

glBegin( GL_QUADS );
    //Bottom-left vertex (corner)
    glTexCoord2i( 0, 0 );
    glVertex3f( 100.f, 100.f, 0.0f );

    //Bottom-right vertex (corner)
    glTexCoord2i( 1, 0 );
    glVertex3f( 228.f, 100.f, 0.f );

    //Top-right vertex (corner)
    glTexCoord2i( 1, 1 );
    glVertex3f( 228.f, 228.f, 0.f );

    //Top-left vertex (corner)
    glTexCoord2i( 0, 1 );
    glVertex3f( 100.f, 228.f, 0.f );
glEnd(); 
```

这里的问题是，如果我在绘制纹理时不绑定纹理，它将显示最后绑定的纹理（绑定在我链接的转换代码中）。但是，如果我绑定纹理，我将改为显示白色 BG。

我意识到绑定的纹理可能以某种方式损坏，但是如何！？我似乎无法追踪到这一点，从昨天开始我就一直在使用它。

我非常感谢帮助。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:48:07.063

我觉得很愚蠢...发布后几乎立即解决了...不知何故，我设法将内存地址作为纹理的值。我决定停止将它作为参考而不是静态值发送（对此有何评论？）。

我将它作为参考寄回的唯一地方是在我将它从 SDL 转换为纹理之后，也许这里也不需要它。对此有任何想法都会很棒！

如果其他人遇到和我一样的问题，我会留下我原来的帖子。

# vba - 更快的查找方法和过滤器位置比较？

> ID：14265919
> 
> 赞同：2
> 
> 时间：2013-01-10T19:38:58.780
> 
> 标签：vba, excel, find

问题：我不得不在一张大表中搜索特定的保单编号。当有近 75,000 行时，查找功能需要相当长的时间。关于如何比较这两张 75,000 行的表格有什么建议吗？我认为可能可行的解决方案是对每张纸进行排序，然后获取需要找到的保单编号并将其与中间行进行比较。有没有办法比较该策略编号并查看在简单排序函数中它是否大于或小于？在找到那个比较之后，我会重置上限和下限并再次找到中间。......这会更快吗？还有其他建议吗？

谢谢

当前代码：

```
Sub policyComment()

Dim x As Integer
Dim endRow As Variant
Dim polSer As String
Dim foundVal As String
Dim commentVar As Variant        

Windows("SuspenseNoteMacro.xlsm").Activate
Sheets("Main").Select

Range("A2").Select
endRow = ActiveCell.End(xlDown)

x = 2

Do
    polSer = Range("A" + CStr(x)).Value

    Windows("010713 Suspense ALL.xlsm").Activate
    Sheets("Sheet1").Select

    Set foundRange = Sheets("Sheet1").Cells.Find(what:=polSer, LookIn:=xlFormulas, lookat:=xlWhole)

   'foundRange = ActiveCell.Value     
    If foundRange Is Nothing Then
        Windows("SuspenseNoteMacro.xlsm").Activate
        Sheets("Main").Select
        Range("J" + CStr(x)).Value = "Not Found"
    ElseIf foundRange <> "" Then
        Sheets("Sheet1").Cells.Find(what:=polSer, LookIn:=xlFormulas, lookat:=xlWhole).Activate
        commentVar = Range("J" + CStr(ActiveCell.Row)).Value
        Windows("SuspenseNoteMacro.xlsm").Activate
        Sheets("Main").Select
        Range("J" + CStr(x)).Value = commentVar
    End If

    x = x + 1
    Range("A" + CStr(x)).Select
    foundRange = ""
Loop Until (x = endRow)

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T22:53:38.227

Scott 已经提供了答案，但仅供参考，这里是一些示例代码，说明了使用 Find() 和使用 Dictionary 查找包含相同 10k 值的未排序范围内的 10k 个单独值之间的区别。

我的电脑上的输出：

```
50.48828 sec using Find()
0.078125 sec to load dictionary (10000 keys)
0.015625 sec using Dictionary 
```

代码（需要参考“Microsoft Scripting Runtime”库）：

```
Sub TestFind()

    Dim arrToFind
    Dim numRows As Long, r As Long
    Dim f As Range, rngSrc As Range
    Dim t
    Dim d As Scripting.Dictionary

    Set rngSrc = Worksheets("Source").Range("A2:A10001")

    arrToFind = Worksheets("Dest").Range("A2:A10001").Value
    numRows = UBound(arrToFind, 1)

    t = Timer
    Debug.Print "Starting test using Find()"
    For r = 1 To numRows
        If r Mod 1000 = 0 Then Debug.Print "Row " & r
        Set f = rngSrc.Find(arrToFind(r, 1), , xlValues, xlWhole)
        If Not f Is Nothing Then
        'do something based on f
        End If
    Next r
    Debug.Print Timer - t & " sec using Find()"

    t = Timer
    Set d = UniquesFromRange(rngSrc)
    Debug.Print Timer - t & " sec to load dictionary (" & d.Count & " keys)"

    t = Timer
    Debug.Print "Starting test using Dictionary"
    For r = 1 To numRows
        If r Mod 1000 = 0 Then Debug.Print "Row " & r
        If d.Exists(arrToFind(r, 1)) Then
        'use value from dictionary
        End If
    Next r
    Debug.Print Timer - t & " sec using Dictionary"

End Sub

Function UniquesFromRange(rng As Range) As Scripting.Dictionary

    Dim d As New Scripting.Dictionary
    Dim c As Range, tmp

    For Each c In rng.Cells
       tmp = Trim(c.Value)
       If Len(tmp) > 0 Then
            If Not d.Exists(tmp) Then d.Add tmp, c.Offset(0, 1).Value
       End If
    Next c

    Set UniquesFromRange = d
 End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T20:16:30.793

您的代码很慢有几个原因，但主要是因为您如何分别循环遍历每个单元格（实际`Find`功能并不是减慢速度的原因）。

下面，我将您的搜索列放入一个数组并循环遍历它，这将快得多。我还删除了你所有的`select`and`activate`语句，因为它们在 VBA 中 99% 的时间都是无关紧要的，而且还会稍微减慢你的代码速度。最后，我关闭了`ScreenUpdating`这也有帮助。

如果我在重构中遗漏了什么，请告诉我。

```
Option Explicit

Sub policyComment()

Dim x As Long, endRow As Long, polSer As String, foundRange As range, commentVar As String
Dim varArr() As Variant
Dim wksMain As Worksheet, wks1 As Worksheet

Set wksMain = Sheets("Main")
Set wks1 = Sheets("Sheet1")

Application.ScreenUpdating = False

With wksMain

    endRow = .range("A" & .Rows.Count).End(xlUp).Row
    varArr = .range("A2:A" & endRow)

    For x = LBound(varArr) To UBound(varArr)

        polSer = varArr(x, 1)

        With wks1

            Set foundRange = .Cells.Find(polSer, LookIn:=xlFormulas, lookat:=xlWhole)

            If foundRange Is Nothing Then

                wksMain.range("J" & x + 1).Value = "Not Found" 'need to add 1 to x because arrays are zero based

            Else

                commentVar = .range("J" & foundRange.Row)
                wksMain.range("J" & x + 1).Value = commentVar ''need to add 1 to x because arrays are zero based

            End If

        End With

    Next

End With

Application.ScreenUpdating = True

End Sub 
```

# android - 如何在 Android 的一次查询中获取流派和每种流派的歌曲数量？

> ID：14265925
> 
> 赞同：2
> 
> 时间：2013-01-10T19:39:11.123
> 
> 标签：android, audio, cursor, mediastore

我得到了流派：

```
public static CursorLoader getGenres(Context context) {
    Uri uri = MediaStore.Audio.Genres.EXTERNAL_CONTENT_URI;
    String[] columns = { MediaStore.Audio.Genres._ID,
            MediaStore.Audio.Genres.NAME };
    String orderBy = MediaStore.Audio.Genres.NAME;

    return new CursorLoader(context, uri, columns, null, null, orderBy);
} 
```

但我需要每种类型的歌曲数量。我可以为每种类型执行此操作：

```
private int getNumberSongsOfGenre(long genreID) {
    Uri uri = MediaStore.Audio.Genres.Members.getContentUri(VOLUMENAME,
            genreID);
    Cursor c = resolver.query(uri, null, null, null, null);

    if (c == null || c.getCount() == 0)
        return -1;

    int num = c.getCount();
    c.close();

    return num;
} 
```

...但我需要在同一个查询中执行此操作并返回一个 CursorLoader。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-26T06:34:21.330

我也在寻找同样的东西，但仍然没有得到任何合适的解决方案。但是，如果您只关心要显示的歌曲数量，那么您可以在下面做类似我的回答。

```
@Override
    public void bindView(View v, Context context, Cursor c) {
        int index;
        long genreId;
        Uri uri;
        ViewHolder holder  =   (ViewHolder)    v.getTag();

         holder.titleName.setText(c.getString(c.getColumnIndex(MediaStore.Audio.Genres.NAME)));
         //===========================

         index = c.getColumnIndexOrThrow(MediaStore.Audio.Genres.NAME);            
         //Log.i("Tag-Genre name", c.getString(index));

         index = c.getColumnIndexOrThrow(MediaStore.Audio.Genres._ID);             
         //genreId=Long.parseLong(c.getString(index));
         genreId  = c.getLong(c.getColumnIndexOrThrow(MediaStore.Audio.Genres._ID));
         uri = MediaStore.Audio.Genres.Members.getContentUri("external", genreId);
         String[] proj2={MediaStore.Audio.Media.DISPLAY_NAME};
         Cursor tempcursor = context.getContentResolver().query(uri, proj2, null,null,null);
         //tempcursor.moveToFirst();
         //Log.i("Tag-Number of songs for this genre", tempcursor.getCount()+"");
         holder.artistName.setText(""+tempcursor.getCount()+" Songs");

    } 
```

如果您只关心其中显示的歌曲数量，希望您能得到答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-09T21:16:40.857

尝试这个

```
ArrayList<GenreInfo> infos = new ArrayList<>();
    Cursor c = getAllGenre(search);
    if (c!=null) {
        c.moveToFirst();
        while (!c.isAfterLast()) {
            GenreInfo genreInfo = new GenreInfo();
            genreInfo.setID(c.getString(c.getColumnIndex(MediaStore.Audio.Genres._ID)));
            genreInfo.setName(c.getString(c.getColumnIndex(MediaStore.Audio.Genres.NAME)));
            Cursor count = ourContext.getContentResolver().query(MediaStore.Audio.Genres.Members.
                    getContentUri("external", Long.parseLong(genreInfo.getID())), null, null, null, null);
            genreInfo.setNumOfSongs(count.getCount());
            infos.add(genreInfo);
            count.close();
            c.moveToNext();
        }
    }
    if (c!=null) c.close();
    return infos; 
```

# javascript - 无法解决错误“Uncaught SyntaxError: Unexpected token o”

> ID：14265929
> 
> 赞同：2
> 
> 时间：2013-01-10T19:39:35.757
> 
> 标签：javascript, json, dojo

我目前正在练习使用 Javascript/Dojo。但是，我有一个无法解决的错误：

> Uncaught SyntaxError: Unexpected token o

我对我的问题做了一个快速的片段：

```
var data = {
    "list": {
        "1": {
            "Relevance": "Low",
            "id": 1,
            "Name": "Inorganic"
        },
        "2": {
            "Relevance": "Low",
            "id": 2,
            "Name": "Mobile"
        }
    }
}

var jsonData = JSON.parse(data);
alert(jsonData.list[1].Name); 
```

它专门针对以下行：

```
var jsonData = JSON.parse(data); 
```

我想知道为什么这是一个错误以及我将如何解决它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T19:42:42.463

您正在尝试解析 JavaScript 对象。`JSON.parse`用于解析*表示*类 JavaScript 对象的 JSON 字符串。

完全跳过解析：

```
alert(data.list[1].Name); 
```

* * *

在相关说明中：您可能有兴趣阅读**[There's no such things as a "JSON Object"](http://benalman.com/news/2010/03/theres-no-such-thing-as-a-json/)**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T09:54:26.467

错误一旦被声明为数据类型 json，它就会为您解析。

所以：它会是这样的

```
<span style="text-decoration:line-through;">var obj = JSON.parser(data)</span>

 success: function(data){

  var obj = JSON.parser(data)

  alert(obj.data)

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T19:43:05.310

尝试 ：

```
 alert(data.list[1].Name); 
```

代替：

```
 var jsonData = JSON.parse(data);
 alert(jsonData.list[1].Name); 
```

data 已经是 javascript 对象而不是字符串

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T19:43:44.263

这是因为您正在解析一个普通对象，而不是一个字符串，正如预期的那样。在这种情况下，您只需：

```
alert(jsonData.list[1].Name); 
```

在这种情况下，要使用`JSON.parse`您应该一直使用此字符串的方法：

```
var stringifiedJson = var data = "{"+
    "\"list\": {"+
        "\"1\": {"+
            "\"Relevance\": \"Low\","+
            "\"id\": 1,"+
            "\"Name\": \"Inorganic\""+
        "},"+
        "\"2\": {"+
            "\"Relevance\": \"Low\","+
            "\"id\": 2,"+
            "\"Name\": \"Mobile\""+
        "}"+
    "}"+
"}";

var jsonData = JSON.parse(stringifiedJson);
alert(jsonData.list[1].Name); 
```

我建议你看看[这篇关于原生 JSON 的 MDN 文章](https://developer.mozilla.org/en-US/docs/Using_native_JSON)

# c - c程序的strcat使用指针

> ID：14265940
> 
> 赞同：1
> 
> 时间：2013-01-10T19:40:03.900
> 
> 标签：c

请使用 gcc 在您的机器上运行它，并判断它是否也给您一个分段错误输出。我认为程序没有任何问题。我是C的初学者。所以帮助！

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

char *scat(char *,char *);

void main()
{
    char *s="james";
    char *t="bond";

    char *w=scat(s,t);
    printf("the con: %s\n", w);
    free(w);
}

char *scat(char *s,char *t)
{ 
    char *p=malloc(strlen(s)+strlen(t)+1); 
    int temp=0 , ptr=0;

    while(s[temp]!='\0'){
        p[ptr++]=s[temp++];
    } 
    temp=0;
    while(t[temp]='\0'){
        p[ptr++]=t[temp++];
    }
    return p;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:41:23.967

您不会 0 终止`scat`. 您可以添加：

```
p[ptr] = 0; 
```

就在回来之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:42:42.773

第二个循环没有效果：

```
while(t[temp]='\0') { // <<== Assignment!!!
    p[ptr++]=t[temp++];
} 
```

这应该是`!=`not `=`，或者更好的是，您可以完全删除零：

```
while(t[temp]) { // Zero-checking is implicit in C
    p[ptr++] = t[temp++];
} 
```

由于您不是写信给`s`or `t`，因此声明它们可能是个好主意`const`。这将在`while`上面的循环中捕获分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:46:22.050

1.  *请使用 gcc 在您的机器上运行它，并判断它是否**也**给您一个分段错误输出。*
2.  *我认为程序没有任何问题。*

我不遵循你的推理。如果程序在您的系统上出现段错误，那么**很**可能是程序有问题。

[仅供参考，这是 GCC(*) 输出的内容。](http://stacked-crooked.com/view?id=b7a9b84f6a0ec030d7aa9d569dde3611)它甚至不编译。

注意：它实际上是 g++，但它不应该有太大的不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T19:52:37.160

无需模拟 string.h 中存在的函数：

```
#include <string.h>

char *scat(char *s,char *t)
{ 
    char *p;
    size_t len1, len2;
    len1 = strlen(s);
    len2 = strlen(t);

    p=malloc(len1+len2+1);
    if (!p) barf();
    memcpy(p,s, len1);
    memcpy(p+len1, t, len2+1);

    return p;
} 
```

# php - 使用用户信息将文件附加到 HTML 电子邮件表单

> ID：14265943
> 
> 赞同：0
> 
> 时间：2013-01-10T19:40:12.867
> 
> 标签：php, forms, email, attachment

我创建了一个简单的联系表单，需要添加用户通过电子邮件提交向我发送一些图像的功能。这是表格：

```
<form name="submission_form" method="post" action="./contact.php">
    <h3>Submission</h3>
    <span><input class="data" type="email" name="email" placeholder="Email"></span>
    <span><input class="data" type="text" name="first_name" placeholder="First Name"></span>
    <span><input class="data" type="text" name="last_name" placeholder="Last Name"></span>
    <span><input class="data" type="text" name="address" placeholder="Address"></span>
    <span><input class="data" type="text" name="city" placeholder="City"></span>
    <span><input class="data" type="text" name="state" placeholder="State"></span>
    <span><input class="data" type="text" name="zip_code" placeholder="Zip Code"></span>
    <span><input class="submit" type="submit" value="Submit"></span>
</form> 
```

这是到目前为止的contact.php文件：

```
<?php
    if(isset($_POST['email'])) {

    $email_to = "person@email.com";

    $email_subject = "Mom's Submission";

    function died($error) {
    // error code
    echo "We are very sorry, but there were error(s) found with the form you submitted. ";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    die();
}

// validation expected data exists
if(!isset($_POST['email']) ||
    !isset($_POST['first_name']) ||
    !isset($_POST['last_name']) ||
    !isset($_POST['address']) ||
    !isset($_POST['city']) ||
    !isset($_POST['state']) ||
    !isset($_POST['zip_code'])) {
    died('We are sorry, but there appears to be a problem with the form you submitted.');      
}

$email = $_POST['email'];
$first_name = $_POST['first_name'];
$last_name = $_POST['last_name'];
$address = $_POST['address'];
$city = $_POST['city'];
$state = $_POST['state'];
$zip_code = $_POST['zip_code'];

$error_message = "";

if(strlen($error_message) > 0) {
    died($error_message);
}
$email_message = "You've received a submission yo!!\n\n";

function clean_string($string) {
    $bad = array("content-type","bcc:","to:","cc:","href");
    return str_replace($bad,"",$string);
}

$email_message .= "Email: ".clean_string($email)."\n";
$email_message .= "First Name: ".clean_string($first_name)."\n";
$email_message .= "Last Name: ".clean_string($last_name)."\n";
$email_message .= "Address: ".clean_string($address)."\n";
$email_message .= "City: ".clean_string($city)."\n";
$email_message .= "State: ".clean_string($state)."\n";
$email_message .= "Zip Code: ".clean_string($zip_code)."\n";

// email headers
$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers); 
?> 
```

我试过简单地添加：

```
<input name="image" type="file"> 
```

到 HTML 并添加：

```
!isset($_POST['image']) 
```

和

```
$image = $_POST['image']; 
```

到 config.php 文件，但我不确定在那之后该怎么做以确保附件与电子邮件一起传递。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:56:02.607

首先，您需要使用从 $_FILES 加载到服务器上的文件。

然后您必须知道如何将文件附加到电子邮件，如下所示：

```
//define the receiver of the email
$to = 'youraddress@example.com';
//define the subject of the email 
$subject = 'Test email with attachment';
//create a boundary string. It must be unique
//so we use the MD5 algorithm to generate a random hash 
$random_hash = md5(date('r', time())); 
//define the headers we want passed. Note that they are separated with \r\n  
$headers = "From: webmaster@example.com\r\nReply-To: webmaster@example.com"; 
//add boundary string and mime type specification 
$headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""; 
//read the atachment file contents into a string,
//encode it with MIME base64,
//and split it into smaller chunks
$attachment = chunk_split(base64_encode(file_get_contents('attachment.zip')));
//define the body of the message. 
ob_start(); //Turn on output buffering 
?> 

-PHP-mixed- 
Content-Type: multipart/alternative; boundary="PHP-alt-"

--PHP-alt- 
Content-Type: text/plain; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

Hello World!!! 
This is simple text email message.

--PHP-alt- 
Content-Type: text/html; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

<h2>Hello World!</h2> 
<p>This is something with <b>HTML</b> formatting.</p>

--PHP-alt---

--PHP-mixed- 
Content-Type: application/zip; name="attachment.zip" 
Content-Transfer-Encoding: base64 
Content-Disposition: attachment

--PHP-mixed---

//copy current buffer contents into $message variable and delete current output buffer 
$message = ob_get_clean(); 
//send the email 
$mail_sent = @mail( $to, $subject, $message, $headers ); 
//if the message is sent successfully print "Mail sent". Otherwise print "Mail failed" 
echo $mail_sent ? "Mail sent" : "Mail failed"; 
?> 
```

还有很多关于在互联网上附加文件的相关信息。

# asp.net - 想要将 gridview 上的日期字段设为链接按钮？

> ID：14265944
> 
> 赞同：0
> 
> 时间：2013-01-10T19:40:19.960
> 
> 标签：asp.net, vb.net, gridview, datatable, linkbutton

我正在显示一个带有多个数据条目的网格视图，其中一个数据字段是日期，我希望用户能够单击网格视图上的任何日期，并使用它在同一页面上启动一个进程，其中包括隐藏 gridview 并显示有关该特定日期的一般信息，没有插入、更新或任何与数据库相关的内容，只有对进程的调用。现在通过从日历中选择并单击常规按钮来手动完成相同的事情。

我怎样才能使这个字段只有一个链接按钮？

我已经尝试过以这种方式在 ASP 上手动添加该字段：

```
<asp:GridView ID="myGrid" runat="server" CssClass="Gridview">
 <Columns>
  <asp:HyperLinkField Text="test"  />
 </Columns>
</asp:GridView> 
```

但它只会创建一个我不需要的新领域。它也必须在代码隐藏上完成，因为这是我创建数据表的地方，该数据表稍后会发送到 gridview，如下所示：

```
Dim myTable As DataTable = New DataTable
Dim column As DataColumn
Dim row As DataRow

column = New DataColumn()
column.ColumnName = "ID"
myTable.Columns.Add(column)

column = New DataColumn()
column.ColumnName = "Date"
myTable.Columns.Add(column)

For myRow As Integer = 0 To days
 row = myTable.NewRow()
 row("ID") = "Some ID"
 row("Date") = datevalue.AddDays(myRow).ToString("dd/MM/yyyy")
 myTable.Rows.Add(row)
Next

myGrid.DataSource = myTable
myGrid.DataBind() 
```

一切正常，但我不知何故需要将该日期字段设置为链接按钮，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:11:48.070

您应该为此使用 TemplateField。

```
<Columns>
  <asp:TemplateField>
     <ItemTemplate>
        <asp:LinkButton id="LinkButton1" Text="Click Me"            OnClick="LinkButton_Click" runat="server"/>
      </ItemTemplate>
     </asp:TemplateField>
</Columns> 
```

代码隐藏：

```
void LinkButton_Click(Object sender, EventArgs e) 
{
   // Insert your code
} 
```

您可能希望根据单击按钮的行获得特定信息。您可以使用 Button 并将 CommandArgument 设置为标识符：

```
<asp:Button ID="Button1" runat="server" Text="Click me"  CommandArgument='<%#Eval("YourColumn") %>'/> 
```

# php - 申请文件结构

> ID：14265948
> 
> 赞同：0
> 
> 时间：2013-01-10T19:40:36.323
> 
> 标签：php, codeigniter

我目前正在开发一个应用程序作为 CMS。我将使用它在我的主页上显示内容。我正在使用 Codeigniter 开发此应用程序，并想知道我的应用程序的理想文件结构是什么。我研究并发现了许多不同的方法，但它们都有自己的目的、优点和缺陷，并且想知道什么是真正被接受的最好的方法。

截至目前，我的想法是执行以下文件结构。

```
/application
            /frontend
            /backend
/models
       /frontend
       /backend
/views
      /frontend
      /backend 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:46:35.733

你提议的结构对我来说看起来不错。每个人对什么是“好的”文件组织方案都有自己的想法。没有真正的“最佳接受”方式来做到这一点。只要你保持逻辑和简单，并尽你最大的努力确保你的文件夹结构不会在开发过程中以你自己的方式出现，你就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:46:18.087

实际上没有一种构建文件的最佳方法，它确实是最适合您的方法。我使用真正的 MVC 文件结构开发了一个框架，但随着时间的推移与我的前端开发人员合作，该结构发生了巨大变化，以适应他和我的需求/偏好。从你现在拥有的开始，然后随着你越来越多地使用它，你会看到你做什么和不喜欢什么。然后，从头开始重新制作。我花了很多次重建才最终得到我想要的结构，但现在我有了它，我的效率提高了 10 倍。每个开发人员都是不同的，对别人有用的东西可能对你没用。

# c# - open any file type from byte[]

> ID：14265958
> 
> 赞同：0
> 
> 时间：2013-01-10T19:41:12.183
> 
> 标签：c#, asp.net, file-upload

I have an application that allows a user to upload a certificate and attach it to a person within the system. Currently it is written to only accept .PDF files, but now the client wants the flexibility to upload any type of document into the system. I have set up the database to hold the byte[] file and the file extension, but I don't know how to make the system smart enough to be this flexible and open any file type I throw at it without hard coding all of the instances. Any ideas?

EDIT: Currently I am doing the following.

```
private void createPDF(byte[] file, string Name)
{
    int fileSize = file.Length;

    Response.AppendHeader("content-length", fileSize.ToString());
    Response.ContentType = "application/pdf";
    if (!Name.Contains("."))
        Name = Name + ".pdf";
    Response.AddHeader("Content-Disposition", "attachment; filename=" + Name);
    Response.BinaryWrite(file);
    //Response.Clear();
    Response.Flush();
    Response.End();
} 
```

However, I need to now be able to send in the extension and have it open. The document needs to be able to be downloaded by the end user. I will limit the uploading to not allow any malicious file extensions, figured that was a given. Thanks guys, this flu bug is kicking my butt and I can't think straight...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:00:25.513

The `octet-stream` mime-type should work.

```
private void createFILE(byte[] file, string Name)
{
    int fileSize = file.Length;

    Response.AppendHeader("content-length", fileSize.ToString());
    Response.ContentType = "octet-stream";
    if (!Name.Contains("."))
        Name = Name + ".(your_extension)";
    Response.AddHeader("Content-Disposition", "attachment; filename=" + Name);
    Response.BinaryWrite(file);
    Response.Flush();
    Response.End();
} 
```

# android - 如何在 API 级别 10 中使用 Google Maps API v2？

> ID：14265959
> 
> 赞同：3
> 
> 时间：2013-01-10T19:41:21.233
> 
> 标签：android, google-maps

根据[1](https://i.stack.imgur.com/alk9D.png)发布的代码可用于 Android API 12 或更高版本。我在具有 API 级别 10（Google API 平台 2.3.3）的模拟器上尝试了代码，我得到了以下著名的错误：

`E/AndroidRuntime( 429): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example..../com.example....MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment`

我在下面复制粘贴我的 .xml 文件。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

所以我假设不支持片段元素......（？）。我在具有 API 级别 17 的模拟器中尝试了相同的代码，并收到了该消息（正如我正在阅读的那样，当前是模拟器的问题）：

```
This app won't run unless you update Google Play Services. 
```

我没有真正的 17 级设备来测试它，但我认为它可能会工作。

我在上面的代码中是否有任何错误，专门针对 10 级？为了在 API 级别 10 的 Android 设备中开发地图，Google 当前支持的代码是什么？

[1](https://i.stack.imgur.com/alk9D.png) [https://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

更新：更改为后`FragmentActivity`，`SupportMapFragment`我得到以下信息：

`W/dalvikvm( 6718): Unable to resolve superclass of Lmaps/a/du; (406)`
`W/dalvikvm( 6718): Link of class 'Lmaps/a/du;' failed`
`W/dalvikvm( 6718): Unable to resolve superclass of Lmaps/a/ej; (2358)`
`W/dalvikvm( 6718): Link of class 'Lmaps/a/ej;' failed`
`W/dalvikvm( 6718): Unable to resolve superclass of Lmaps/j/k; (2374)`
`W/dalvikvm( 6718): Link of class 'Lmaps/j/k;' failed`
`E/dalvikvm( 6718): Could not find class 'maps.j.k', referenced from method maps. y.ae.a`
`W/dalvikvm( 6718): VFY: unable to resolve new-instance 3566 (Lmaps/j/k;) in Lmap s/y/ae;`
`D/dalvikvm( 6718): VFY: replacing opcode 0x22 at 0x007d`
`D/dalvikvm( 6718): VFY: dead code 0x007f-008f in Lmaps/y/ae;.a(Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;Z)Lmaps/y/ae;`

2秒后：
`Google Maps Android API Authorization failure`

更新 2：我将项目更改为为 android 10 构建目标（我为 android 4.2 设置了它）。所以现在我没有看到授权失败）。我还粘贴了来自 google 的 api 访问![api访问](../Images/0a5a25ef759f768df48fa4dc19094d8e.png)。

我没有在项目的 .properties 中启用 proguard，即：
`# To enable ProGuard to shrink and obfuscate your code, uncomment this (available properties: sdk.dir, user.home):` `#proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt`

`# Project target.`
`target=android-10`
`android.library.reference.1=../../adt-bundle-windows-x86/sdk/extras/google/google_play_services/libproject/google-play-services_lib`

问题依然存在：

`01-12 09:57:36.306: D/dalvikvm(9072): DexOpt: couldn't find field Landroid/content/res/Configuration;.smallestScreenWidthDp`
`01-12 09:57:36.306: W/dalvikvm(9072): VFY: unable to resolve instance field 24`
`01-12 09:57:36.306: D/dalvikvm(9072): VFY: replacing opcode 0x52 at 0x0012`
`01-12 09:57:36.306: D/dalvikvm(9072): VFY: dead code 0x0014-0018 in Lcom/google/android/gms/common/GooglePlayServicesUtil;.b (Landroid/content/res/Resources;)Z`
`01-12 09:57:36.326: W/dalvikvm(1914): disableGcForExternalAlloc: false`
`01-12 09:57:36.446: D/dalvikvm(9072): GC_CONCURRENT freed 186K, 45% free 3135K/5639K, external 0K/0K, paused 3ms+2ms`
`01-12 09:57:36.476: W/dalvikvm(9072): Unable to resolve superclass of Lmaps/a/du; (406)`
`01-12 09:57:36.476: W/ResourceType(7905): getEntry failing because entryIndex 303 is beyond type entryCount 133`
`01-12 09:57:36.476: W/ResourceType(7905): Failure getting entry for 0x7f02012f (t=1 e=303) in package 0 (error -2147483647)`
`01-12 09:57:36.476: W/ResourceType(7905): getEntry failing because entryIndex 827 is beyond type entryCount 133`
`01-12 09:57:36.476: W/dalvikvm(9072): Link of class 'Lmaps/a/du;' failed`
`01-12 09:57:36.476: W/dalvikvm(9072): Unable to resolve superclass of Lmaps/a/ej; (2358)`
`01-12 09:57:36.476: W/dalvikvm(9072): Link of class 'Lmaps/a/ej;' failed`
`01-12 09:57:36.476: W/dalvikvm(9072): Unable to resolve superclass of Lmaps/j/k; (2374)`
`01-12 09:57:36.476: W/dalvikvm(9072): Link of class 'Lmaps/j/k;' failed`
`01-12 09:57:36.486: E/dalvikvm(9072): Could not find class 'maps.j.k', referenced from method maps.y.ae.a`
`01-12 09:57:36.486: W/dalvikvm(9072): VFY: unable to resolve new-instance 3566 (Lmaps/j/k;) in Lmaps/y/ae;`
`01-12 09:57:36.486: D/dalvikvm(9072): VFY: replacing opcode 0x22 at 0x007d`
`01-12 09:57:36.496: D/dalvikvm(9072): VFY: dead code 0x007f-008f in Lmaps/y/ae;.a (Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;Z)Lmaps/y/ae;`
`01-12 09:57:36.546: I/keystore(1270): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4`
`01-12 09:57:36.556: I/keystore(1270): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4`
`<01-12 09:57:36.576: W/ResourceType(7905): Failure getting entry for 0x7f02033b (t=1 e=827) in package 0 (error -2147483647)`
`01-12 09:57:36.576: V/WindowManager(1369): Finished animation in AppWindowToken{410a0930 token=HistoryRecord{4099f2f0 com.example..../.MainActivity}} @ 20019326`
`01-12 09:57:36.596: W/ResourceType(7905): getEntry failing because entryIndex 303 is beyond type entryCount 133`
`01-12 09:57:36.616: W/ResourceType(7905): Failure getting entry for 0x7f02012f (t=1 e=303) in package 0 (error -2147483647)`
`01-12 09:57:36.616: W/ResourceType(7905): getEntry failing because entryIndex 827 is beyond type entryCount 133`
`01-12 09:57:36.616: W/ResourceType(7905): Failure getting entry for 0x7f02033b (t=1 e=827) in package 0 (error -2147483647)`
`01-12 09:57:36.686: D/dalvikvm(9072): GC_CONCURRENT freed 276K, 45% free 3257K/5895K, external 0K/0K, paused 4ms+9ms`
`01-12 09:57:36.876: I/keystore(1270): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4`
`01-12 09:57:37.026: D/ATRecorder(9072): com.htc.autotest.dlib.RecordEngine in loader dalvik.system.DexClassLoader@405d2328`
`01-12 09:57:37.046: D/WindowManagerImpl(9072): addView, new view, mViews[0]: com.android.internal.policy.impl.PhoneWindow$DecorView@405220f0`
`01-12 09:57:37.056: I/keystore(1270): uid: 1000 action: e -> 7 state: 3 -> 3 retry: 4`
`01-12 09:57:37.117: D/PhoneApp(1491): EVENT_QUERY_MO_PACKAGES`
`01-12 09:57:37.137: D/libEGL(9072): loaded /system/lib/egl/libGLES_android.so`
`01-12 09:57:37.147: D/WindowManagerImpl(1369): finishRemoveViewLocked, mViews[1]: com.android.internal.policy.impl.PhoneWindow$DecorView@40957078`
`01-12 09:57:37.147: I/ActivityManager(1369): Displayed com.example..../.MainActivity: +931ms`
. `01-12 09:57:37.147: W/SchedPolicy(9072): add_tid_to_cgroup failed to write '' (Invalid argument); background=0`
`01-12 09:57:37.157: D/libEGL(9072): loaded /system/lib/egl/libEGL_adreno200.so`
`01-12 09:57:37.157: W/InputManagerService(1369): [unbindCurrentClientLocked] Disable input method client.`
`01-12 09:57:37.157: W/InputManagerService(1369): [startInputLocked] Enable input method client.`
`01-12 09:57:37.187: D/libEGL(9072): loaded /system/lib/egl/libGLESv1_CM_adreno200.so`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-10T19:45:21.140

而不是使用`com.google.android.gms.maps.MapFragment`use`com.google.android.gms.maps.SupportMapFragment`和 for ，`Activity`它必须切换到`FragmentActivity`下面的评论中提到的

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-31T12:11:42.143

我使用下面的代码希望对你有用：-

**打包和扩展**

```
import android.support.v4.app.FragmentActivity;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;

public class UserLocation extends FragmentActivity 
```

**代码**

```
 android.support.v4.app.FragmentManager fragmentManager = getSupportFragmentManager();
    SupportMapFragment mapFragment = (SupportMapFragment) fragmentManager
            .findFragmentById(R.id.map);
    googleMap = mapFragment.getMap(); 
```

为我工作。

**支持MapFragment**

[http://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html](http://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:46:30.340

对于早期的 API，您需要使用`SupportmapFragment`. 请参阅[SupportMapFragment 文档](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/SupportMapFragment)，基本上使用`class="com.google.android.gms.maps.SupportMapFragment"`而不是`class="com.google.android.gms.maps.MapFragment"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-28T14:09:24.160

{将此用作代码的参考.. [http://www.androidhive.info/2013/08/android-working-with-google-maps-v2/](http://www.androidhive.info/2013/08/android-working-with-google-maps-v2/)

同样在上面的示例中，必须在清单的元数据标记中使用他自己的 Api Key 来生成 Api 密钥。}

现在如果你想在 android 2.3 中实现这个代码

* * *

1）首先更改清单

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" /> 
```

然后右键单击>属性>Android>Android 2.3

* * *

2）有两个google play服务库

```
 a)..\sdk\extras\google\google_play_services_froyo\libproject\google-play-services_lib

   b)..\sdk\extras\google\google_play_services\libproject\google-play-services_lib 
```

如果您正在使用 android 2.3 **，请尝试将第一个 a 作为库项目** （您首先需要将其作为库项目导入文件>导入>...... )

* * *

3）然后按照[此处的说明进行操作](https://stackoverflow.com/questions/17992551/map-version-2-in-android-2-3)

* * *

4) 确保您的 Google Play 服务应用在您的设备上是最新的

# php - 如果用户取消确认，页面仍会加载

> ID：14265962
> 
> 赞同：1
> 
> 时间：2013-01-10T19:41:35.253
> 
> 标签：php, jquery, html

我有一个包含按钮的表格行：

```
<form id='studentAddForm'>
<table id='removetbl'>
<tr>
<td><button id='submitstudents'>Submit Students</button></td>
</table>
</form> 
```

单击按钮时，它会显示一个确认框，但是当我单击`Cancel`确认框中的按钮时，它仍然要加载页面吗？我的页面没有错误

下面是显示点击事件、确认和提交表单的 jquery 代码：

```
function submitform() {    
    $.ajax({
        type: "POST",
        url: "updatestudentsession.php",
        data: { 
            sessionid:  $('#currentid').val(),
            students:   $('#addtextarea').val()
        },
        dataType:'json',  //get response as json
        success: function(result) {
            if(result.errorflag) {
                //do your stuff on getting error message
                var newHtml="<span style='color: red'>"+result.msg+"</span>"; 
                $("#targetdiv").html(newHtml);  //i am displaying the error msg here
            } else {
                //you got success message
                var newHtml="<span style='color: green'>"+result.msg+"</span>"; 
                $("#targetdiv").html(newHtml);
                $('#targetdiv').show();
            }
        }
    });        
}

function showConfirm() {
    var examInput = document.getElementById('newAssessment').value;
    if (editvalidation()) {
        var confirmMsg=confirm("Are you sure you want to add your selected Students to this Assessment:" + "\n" + "Exam: " + examInput);
         if (confirmMsg==true) {
             submitform();
         }
     }
 } 

 $('body').on('click', '#submitstudents', showConfirm); 
```

**更新：**

我不知道下面的信息是否会进一步帮助您，但下面显示了页面中的所有表格：

**表格 1：**

```
$assessmentform = "<div id='lt-container'>
<form action='".htmlentities($_SERVER['PHP_SELF'])."' method='post' id='assessmentForm'>
<p id='warnings'>{$pHTML}</p>
{$outputmodule}
<p><strong>Assessments:</strong> {$sessionHTML} </p>   
</form>";

echo $assessmentform; 
```

**表格 2：**

```
$editsession = "
<form id='updateForm'>

    <p><strong>Assessment Chosen:</strong></p>
    <table>
    <tr>
    <th></th>
    <td><input type='hidden' id='currentId' name='Idcurrent' readonly='readonly' value='' /> </td>
    </tr>
<tr>
<th>Assessment:</th>
<td><input type='text' id='currentAssessment' name='Assessmentcurrent' readonly='readonly' value='' /> </td>
</tr>
    </table>
    <div id='currentAlert'></div>
";

echo $editsession; 
```

**表格 3：**

```
 $studentexist="
    <form id='studentExistForm'>
    <p><strong>Current Students in Chosen Assessment:</strong></p>
    <p>{$studentSELECT}</p>
    </form> 
    </div>";

echo $studentexist; 
```

**表格 4：**

```
 $studentremain="<div id='rt-container'>
    <form id='studentRemainForm'>
    <p>{$remainSELECT}</p>
    <table id='addtbl'>
    <tr>
    <td><button type='button' id='addbtn'>Add</button></td>
    <td><button type='button' id='addall'>Select All</button></td>
    <td><button type='button' id='adddeselect'>Deselect All</button></td>
    </table>
    </form>";

echo $studentremain; 
```

**表格 5：**

```
$studentadd="
<form id='studentAddForm'>
<p>{$addSELECT}</p>
<table id='removetbl'>
<tr>
<td><button id='submitstudents'>Submit Students</button></td>
</table>
</form>
</div>";

echo $studentadd; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:51:11.060

与 Jai 的回答类似，由于您通过 ajax 发布表单，您需要从单击处理程序返回 false 以防止表单提交，这就是导致页面重新加载的原因；

```
function showConfirm(){

    var examInput = document.getElementById('newAssessment').value;

    if (editvalidation()) {

        var confirmMsg=confirm("Are you sure you want to add your selected Students to this Assessment:" + "\n" + "Exam: " + examInput);

         if (confirmMsg==true)
         {
             submitform();   
         }
    }
    // prevent form submission, defer to ajax post
    return false:
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:44:54.367

尝试使用这个：

```
if (confirmMsg){
     submitform();   
 }else{
     return false;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:45:07.967

试试这个。

```
<script type="text/javascript" src="jquery-1.7.min.js"></script>
<script type="text/javascript">
function confirm() {
  //Code to execute before page close
  return 'Any unsaved work will be lost.';
}
window.onbeforeunload=confirm;
</script> 
```

这可能是我发现在您离开页面时确认的最简单的方法（例如通过提交表单）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T19:45:37.333

这条线似乎让你感到悲伤：

```
var confirmMsg=confirm("Are you sure you want to add your selected Students to this Assessment:" + "\n" + "Exam: " + examInput); 
```

该`confirm`函数始终返回 true，检查此函数将帮助您解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T19:56:56.990

除非用户确认，否则始终返回 false，因此只需在表单中添加 onsubmit。

```
<form onsubmit="return false;"></form> 
```

# sql - 如何使用来自不同表行的数据更新表中的所有行？

> ID：14265964
> 
> 赞同：0
> 
> 时间：2013-01-10T19:41:38.993
> 
> 标签：sql, sql-server, sql-update, row

我正在尝试从在另一个表上具有相同值的表中更新所有行（我只需要更新 3 列）...

这是我的桌子...

```
CREATE TABLE [dbo].[prods](
    [IdProducto] [int] IDENTITY(1,1) NOT NULL,
    [IdGrupo] [int] NULL,
    [IdCategoria] [int] NULL,
    [IdAlmacen] [varchar](50) NULL,
    [Codigo] [varchar](50) NULL,
    [Nombre] [varchar](50) NULL,
    [Descripcion] [varchar](max) NULL,
    [Cantidad] [int] NULL,
    [Imagen] [varchar](max) NULL,
    [StockMin] [int] NULL,
    [StockMax] [int] NULL,
    [Ancho] [varchar](50) NULL,
    [Alto] [varchar](50) NULL,
    [Largo] [varchar](50) NULL,
    [Peso] [varchar](50) NULL,
    [Volumen] [varchar](50) NULL,
    [Color] [varchar](50) NULL,
    [Material] [varchar](50) NULL,
    [Presentacion] [varchar](50) NULL,
    [bitPrecioVentaUnico] [int] NULL,
    [PrecioCompra] [money] NULL,
    [DescuentoCompra] [float] NULL,
    [PrecioVenta] [money] NULL,
    [DescuentoVenta] [float] NULL,
    [Estado] [varchar](20) NULL
)

CREATE TABLE [dbo].[prodnuevos](
    [Codigo] [int] NULL,
    [itemid] [int] NULL,
    [Item] [varchar](255) NULL,
    [Categoria] [varchar](255) NULL,
    [Cantidad] [int] NULL,
    [Minima] [nvarchar](255) NULL,
    [Costo] [money] NULL,
    [Valor] [money] NULL,
    [peso] [float] NULL,
    [unidades] [float] NULL
) 
```

我想做的是以下..

```
Update prods 
Set prods.PrecioCompra = prodnuevos.Costo, 
prods.PrecioVenta = prodnuevos.Costo, 
prods.Cantidad = prodnuevos.Cantidad 
WHERE prods.Nombre = prodnuevos.Item; 
```

（使用 prodnuevos 的 Costo 和 Cantidad 更新 Prods 中的 PrecioCompra、PrecioVenta 和 Cantidad，其中 Nombre 和 Item 相同）

显然上面的查询不起作用，但我只是想解释我的问题。我已经尝试了各种成功的查询组合。（尽管必须更新 3 列，但我不介意是否必须使用 3 个不同的查询）

我尝试过类似的东西

```
 UPDATE       prods c
    SET          c.PrecioCompra =
      (SELECT        a.Costo
      FROM            prodnuevos AS a INNER JOIN
         prods AS z ON z.Nombre = a.Item 
WHERE        (a.Item = c.Nombre)) 
```

但没有结果...

难道我做错了什么？？或者这是一个完全不同的查询？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:50:37.037

```
Update prods Set 
prods.PrecioCompra = prodnuevos.Costo,
prods.PrecioVenta = prodnuevos.Costo, 
prods.Cantidad = prodnuevos.Cantidad
from prods inner join prodnuevos
on prods.Nombre = prodnuevos.Item 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:49:19.577

你非常接近。尝试这样的事情：

```
UPDATE p SET p.PrecioCompra = pn.Costo, 
    p.PrecioVenta = pn.Costo, 
    p.Cantidad = pn.Cantidad
FROM prods p
INNER JOIN prodnuevos pn
ON p.Nombre = pn.Item 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T19:49:56.193

```
update p
set
      p.PrecioCompra = pN.Costo
    , p.PrecioVenta = pN.Costo
    , p.Cantidad = pn.Cantidad 
from
    prods p
        inner join prodsnuevos pN on p.Nombre = pN.item 
```

另外，您能否在 Nombre 和 item 上进行选择以验证它们是否相同？可能是这两列中的值不同

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T19:57:34.990

```
Update 
    prods 
Set 
  PrecioCompra = prodnuevos.Costo, 
  PrecioVenta = prodnuevos.Costo, 
  Cantidad = prodnuevos.Cantidad 
FROM 
  prodnuevos
WHERE 
  prods.Nombre = prodnuevos.Item 
```

# php - 哈希值在相同的输入上总是不同的

> ID：14265967
> 
> 赞同：5
> 
> 时间：2013-01-10T19:41:47.950
> 
> 标签：php, hash, passwords

我正在尝试使用[这个散列函数](https://github.com/ircmaxell/password_compat)，但每次我重新加载页面时，它都会给我一个不同的字符串，除了前 7 个字符。

```
<?php  
require("lib/password.php")  
$pass = $_POST['input_password'];
echo 'Received: '.$pass.'<br />';
$passwordHash = 'default';   
$passwordHash = password_hash(trim($pass), PASSWORD_DEFAULT, ["cost" => 11]);   
echo 'Password hash is '.$passwordHash; 
```

例如，我通过 aaa 并获取哈希

```
$2y$11$1Ll4twbmFNWhVxBOCeDWhOtZ4WchW.GYXK3LSH9BnW6AhXf45soWq
$2y$11$H0dmOkkq3rSgggDbGueRPusODmkZrrFqG7I/R1B0tFTQEYGHB0iZi
$2y$11$z0pFOoFsD5Bk0sx2TiT3kOd2awAwDBQAsQaxlDq11kNH.ldaS1qw2 
```

我在 Windows 7 64 位和 Firefox 17 上使用 WAMP Server 2.2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T19:44:50.097

该哈希算法每次都使用随机盐。它的设计每次都不同，即使输入相同。

要检查密码，请使用该`password_verify`库中包含的函数。

注意：`$2y$11$`开头的 指定用于生成哈希的算法和成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:44:57.867

这是对的。该值包括一个随机[盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)以阻止[彩虹表攻击](http://en.wikipedia.org/wiki/Rainbow_table)。

# css - 如何在 Wordpress 插件上的 css 中形成两列表

> ID：14265968
> 
> 赞同：0
> 
> 时间：2013-01-10T19:41:53.067
> 
> 标签：css, wordpress, css-tables

我正在尝试在 WordPress 插件使用的表单上形成一个包含两列的表。到目前为止，我已经尝试使用基本缩进来缩进右侧列，但最终结果是右侧的列不完全垂直内联（我假设是因为文本标签的大小不同）。我曾尝试使用`<td>`类型表，但一切都变得疯狂。

我想使用如下代码，但似乎无法弄清楚该放在哪里：

```
<style type="text/css">
#wrap {
   width:600px;
   margin:0 auto;
}
#left_col {
   float:left;
   width:300px;

}
#right_col {
   float:right;
   width:300px;
}
</style>

<div id="wrap">
    <div id="left_col">
        ...
    </div>
    <div id="right_col">
        ...
    </div>
</div> 
```

我用于表单的代码如下：

```
<?php
/*
If you would like to edit this file, copy it to your current theme's directory and edit it there.
Theme My Login will always look in your theme's directory first, before using this default template.
*/
?>
<div class="login" id="theme-my-login<?php $template->the_instance(); ?>">
    <?php $template->the_action_template_message( 'register' ); ?>
    <?php $template->the_errors(); ?>
    <form name="registerform" id="registerform<?php $template->the_instance(); ?>" action="<?php $template->the_action_url( 'register' ); ?>" method="post">

                <p style="float:left; padding-right:10px;"><label for="user_firstname<?php $template->the_instance(); ?>"><?php _e( 'First Name:', 'theme-my-login' ) ?></label></p>
                <p></p><input type="text" name="user_firstname" id="user_firstname<?php $template->the_instance(); ?>" class="input" value="<?php $template->the_posted_value( 'user_firstname' ); ?>" size="20" /></p>

                <p style="float:left; padding-right:10px;"><label for="user_lastname<?php $template->the_instance(); ?>"><?php _e( 'Last Name:', 'theme-my-login' ) ?></label></p>
                <p></p><input type="text" name="user_lastname" id="user_lastname<?php $template->the_instance(); ?>" class="input" value="<?php $template->the_posted_value( 'user_lastname' ); ?>" size="20" /></p>

                <p style="float:left; padding-right:40px;"><label for="user_email<?php $template->the_instance(); ?>"><?php _e( 'E-mail:', 'theme-my-login' ) ?></label></p>
                <p></p><input type="text" name="user_email" id="user_email<?php $template->the_instance(); ?>" class="input" value="<?php $template->the_posted_value( 'user_email' ); ?>" size="20" /></p>

                <p style="float:left; padding-right:10px;"><label for="user_tel<?php $template->the_instance(); ?>"><?php _e( 'Telephone:', 'theme-my-login' ) ?></label></p>
                <p></p><input type="text" name="user_tel" id="user_tel<?php $template->the_instance(); ?>" class="input" value="<?php $template->the_posted_value( 'user_tel' ); ?>" size="20" /></p>

                <p style="float:left; padding-right:35px;"><label for="user_mobile<?php $template->the_instance(); ?>"><?php _e( 'Mobile:', 'theme-my-login' ) ?></label></p>
                <p></p><input type="text" name="user_mobile" id="user_mobile<?php $template->the_instance(); ?>" class="input" value="<?php $template->the_posted_value( 'user_mobile' ); ?>" size="20" /></p>

                <p style="float:left; padding-right:30px;"><label for="user_country<?php $template->the_instance(); ?>"><?php _e( 'Country:', 'theme-my-login' ) ?></label></p>
                <p></p><input type="text" name="user_country" id="user_country<?php $template->the_instance(); ?>" class="input" value="<?php $template->the_posted_value( 'user_country' ); ?>" size="20" /></p>

                <p style="float:left; padding-right:15px;"><label for="user_login<?php $template->the_instance(); ?>"><?php _e( 'Username:', 'theme-my-login' ) ?></label></p>
                <p></p><input type="text" name="user_login" id="user_login<?php $template->the_instance(); ?>" class="input" value="<?php $template->the_posted_value( 'username' ); ?>" size="20" /></p>

<?php
do_action( 'register_form' ); // Wordpress hook
do_action_ref_array( 'tml_register_form', array( &$template ) ); //TML hook
?>
        <p id="reg_passmail<?php $template->the_instance(); ?>"><?php echo apply_filters( 'tml_register_passmail_template_message', __( 'A password will be e-mailed to you.', 'theme-my-login' ) ); ?></p>
        <p class="submit">
            <input type="submit" name="wp-submit" id="wp-submit<?php $template->the_instance(); ?>" value="<?php _e( 'Register', 'theme-my-login' ); ?>" />
            <input type="hidden" name="redirect_to" value="<?php $template->the_redirect_url( 'register' ); ?>" />
            <input type="hidden" name="instance" value="<?php $template->the_instance(); ?>" />
        </p>

    </form>
    <?php $template->the_action_links( array( 'register' => false ) ); ?>
</div> 
```

我可以看到这确实是一个基本问题，但我已经尝试了几个小时并不断提出各种方式或疯狂。

谁能指出我正确的方向？请...？

我已更新到以下代码，但仍然无法正常工作：

```
<?php
/*
If you would like to edit this file, copy it to your current theme's directory and edit it there.
Theme My Login will always look in your theme's directory first, before using this default template.
*/
?>
<div class="login" id="theme-my-login<?php $template->the_instance(); ?>">
    <?php $template->the_action_template_message( 'register' ); ?>
    <?php $template->the_errors(); ?>
    <form name="registerform" id="registerform<?php $template->the_instance(); ?>" action="<?php $template->the_action_url( 'register' ); ?>" method="post">

<div id="regwrap">
    <div id="regleft_col">
        <p><label for="user_firstname<?php $template->the_instance(); ?>"><?php _e( 'First Name:', 'theme-my-login' ) ?></label></p>

    </div>
    <div id="regright_col">
        <p></p><input type="text" name="user_firstname" id="user_firstname<?php $template->the_instance(); ?>" class="input" value="<?php $template->the_posted_value( 'user_firstname' ); ?>" size="20" /></p>
    </div>
</div>

<?php
do_action( 'register_form' ); // Wordpress hook
do_action_ref_array( 'tml_register_form', array( &$template ) ); //TML hook
?>
        <p id="reg_passmail<?php $template->the_instance(); ?>"><?php echo apply_filters( 'tml_register_passmail_template_message', __( 'A password will be e-mailed to you.', 'theme-my-login' ) ); ?></p>
        <p class="submit">
            <input type="submit" name="wp-submit" id="wp-submit<?php $template->the_instance(); ?>" value="<?php _e( 'Register', 'theme-my-login' ); ?>" />
            <input type="hidden" name="redirect_to" value="<?php $template->the_redirect_url( 'register' ); ?>" />
            <input type="hidden" name="instance" value="<?php $template->the_instance(); ?>" />
        </p>

    </form>
    <?php $template->the_action_links( array( 'register' => false ) ); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:51:41.963

您发布的 CSS 代码看起来不错，您只需在页面的 <head> 或*style.css*文件中插入 <style> 标签，然后在表单中插入 #wrap 即可。然后只需将 <p> 标记放在您希望它们成为的列上。

顺便说一句，我假设你得到的是*无*表的东西。

# c++ - glBufferData 上的段错误

> ID：14265969
> 
> 赞同：0
> 
> 时间：2013-01-10T19:42:07.783
> 
> 标签：c++, opengl, glsl

我正在尝试移植我的固定功能管道 openGL 代码以使用 GLSL，但我遇到了`glBufferData`. 这一切都与固定功能的东西一起工作得很好（即我可以渲染加载的网格没有问题）。

这是加载顶点的代码（来自 AssImp 导入器库）：

在 Mesh.h 文件中定义：

```
...
glm::detail::uint32 vaoId_[];
    glm::detail::uint32 vboIds_[];

    std::vector< glm::vec3 > vertices_;
    std::vector< glm::vec3 > normals_;
    std::vector< glm::vec2 > textureCoordinates_;
    std::vector< glm::vec4 > colors_;
... 
```

在 Mesh.cpp 中实现：

```
...
Mesh::Mesh(const aiMesh* mesh) {
    vaoId_[1];
    vboIds_[4];

    BOOST_LOG_TRIVIAL(debug) << "loading mesh...";

    glm::detail::uint32 currentIndex = 0;

    for (glm::detail::uint32 t = 0; t < mesh->mNumFaces; ++t) {
        const aiFace* face = &mesh->mFaces[t];
        GLenum face_mode;

        switch(face->mNumIndices) {
            case 1: face_mode = GL_POINTS; break;
            case 2: face_mode = GL_LINES; break;
            case 3: face_mode = GL_TRIANGLES; break;
            default: face_mode = GL_POLYGON; break;
        }

        glm::detail::uint32 numIndices = face->mNumIndices;

        vertices_.resize( currentIndex + numIndices );
        normals_.resize( currentIndex + numIndices );
        textureCoordinates_.resize( currentIndex + numIndices );
        colors_.resize( currentIndex + numIndices );

        //BOOST_LOG_TRIVIAL(debug) << "loading face: " << face->mNumIndices;
        // go through all vertices in face
        for(glm::detail::uint32 i = 0; i < numIndices; i++) {
            // get group index for current index i
            int vertexIndex = face->mIndices[i];

            if (mesh->mNormals != 0) {
                vertices_[currentIndex + i]     = glm::vec3( mesh->mVertices[vertexIndex].x, mesh->mVertices[vertexIndex].y, mesh->mVertices[vertexIndex].z );
                normals_[currentIndex + i]      = glm::vec3( mesh->mNormals[vertexIndex].x, mesh->mNormals[vertexIndex].y, mesh->mNormals[vertexIndex].z );
            }

            if (mesh->HasTextureCoords(0)) {
                textureCoordinates_[currentIndex + i] = glm::vec2( mesh->mTextureCoords[0][vertexIndex].x, mesh->mTextureCoords[0][vertexIndex].y );
            }

            //utilities::AssImpUtilities::color4_to_vec4(&mesh->mColors[0][vertexIndex], colors_[colors_.size() + i]);
            if (mesh->mColors[0] != 0) {
                colors_[currentIndex + i]           = glm::vec4(
                                                        (float)mesh->mColors[0][vertexIndex].a,
                                                        (float)mesh->mColors[0][vertexIndex].b,
                                                        (float)mesh->mColors[0][vertexIndex].g,
                                                        (float)mesh->mColors[0][vertexIndex].r
                                                    );
            }           
        }

        currentIndex += 3;
    }

    BOOST_LOG_TRIVIAL(debug) << "loading mesh into video memory...";

    BOOST_LOG_TRIVIAL(debug) << "blah: " << vertices_.size();
    BOOST_LOG_TRIVIAL(debug) << "blah: " << ( sizeof(glm::vec3) );
    BOOST_LOG_TRIVIAL(debug) << "blah: " << ( &vertices_[0] );

    // create our vao
    glGenVertexArrays(1, &vaoId_[0]);
    glBindVertexArray(vaoId_[0]);

    // create our vbos
    //glGenBuffers(4, &vboIds_[0]);
    glGenBuffers(1, &vboIds_[0]); // Using only '1' for now (otherwise causes seg fault)
    glBindBuffer(GL_ARRAY_BUFFER, vboIds_[0]);
    glBufferData(GL_ARRAY_BUFFER, vertices_.size() * sizeof(glm::vec3), &vertices_[0], GL_STATIC_DRAW);

    glEnableVertexAttribArray(0);
    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);

    // Disable our Vertex Buffer Object
    glBindVertexArray(0);

    BOOST_LOG_TRIVIAL(debug) << "done loading mesh...";
}
... 
```

我似乎无法弄清楚为什么当我调用 opengl 时会出现段错误`glBufferData(GL_ARRAY_BUFFER, vertices_.size() * sizeof(glm::vec3), &vertices_[0], GL_STATIC_DRAW);`。

完整错误是（在 linux 中使用 gdb）：

> 程序收到信号 SIGSEGV，分段错误。0x00007ffeffb1ae70 在?? () 来自 /usr/lib/x86_64-linux-gnu/libnvidia-glcore.so.304.64

有人有想法么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T19:46:54.117

你需要先`glBindBuffer`打电话`glBufferData`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T21:22:46.373

构造函数顶部的这是什么？

```
vaoId_[1];
vboIds_[4]; 
```

看起来您的类包含大小为零的数组（除非作为最后一个数据成员，否则甚至不应该允许，我不知道编译器如何允许您拥有其中两个）并且您正在编写超出这些范围数组，它会覆盖下一个成员（`vertices_`向量的元数据）。这是丢弃大小或数据指针部分，`vertices_`然后将丢弃的数据传递给`glBufferData`可预见的不良后果。

线索是`glGenBuffers(4, &vboIds_[0]);`你的程序也崩溃了。这是因为您没有任何`vboIds`为 OpenGL 命名的空间来存储结果。

改变

```
glm::detail::uint32 vaoId_[];
glm::detail::uint32 vboIds_[]; 
```

实际上有正确的尺寸。没有维度的数组需要格外小心，只能在对象的末尾完成，并防止子类化。尽可能避免这种情况。如果大小是可变的，请指定尺寸或使用矢量。

# javascript - 谷歌应用程序指定创建文档的路径

> ID：14265970
> 
> 赞同：1
> 
> 时间：2013-01-10T19:42:19.637
> 
> 标签：javascript, path, google-apps-script, document

我正在尝试根据 Google 应用程序中的一些用户信息生成文档。

我有类似以下代码（简化）：

```
var titleAndPath = "./some/other/path/bar.doc"
var info = "foo";
var currentDoc = DocumentApp.create(titleAndPath);
var title = currentDoc.appendParagraph(info); 
```

但是，除了“根”Google Drive 目录之外，我实际上似乎无法保存任何内容。换句话说，我想将文档保存在某个子文件夹中。google API 有这个功能吗？我检查了文档 API 无济于事（[https://developers.google.com/apps-script/class_document#saveAndClose](https://developers.google.com/apps-script/class_document#saveAndClose)）。

希望这个不是我担心的那么明显！

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-09T10:56:06.453

当您调用 DocumentApp.create 时，路径的概念不存在，即斜线和点被解释为文件名中的另一个字符。您需要做的是将[DriveApp](https://developers.google.com/apps-script/reference/drive/drive-app)类与 DocumentApp 类一起使用。这看起来像以下（未经测试）：

```
var title = "bar.doc";
var doc = DocumentApp.create ( title );
var docId = doc.getId ();                     // retrieve the document unique id
var docFile = DriveApp.getFileById ( docId ); // then get the corresponding file
// Use the DriveApp folder creation and navigation mechanisms either:
// - to get to your existing folder, or
// - to create the folder path you need.
var folder = …
folder.addFile ( docFile ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-14T22:12:53.167

进一步充实上面的答案。您需要使用 DriveApp 类来获取文件夹迭代器，然后在迭代器中获取实际的文件夹（应该是唯一的项目）。看[这里](https://stackoverflow.com/questions/29769467/driveapp-getfoldersbyname-always-returning-true)

```
var title = "bar.doc";
  var folderTitle = "GoogleApplicationScriptTesting" ;
  var doc = DocumentApp.create ( title );
  var docId = doc.getId ();                     // retrieve the document unique id
  var docFile = DriveApp.getFileById ( docId ); // then get the corresponding file

  // Use the DriveApp folder creation and navigation mechanisms either:
  // getFoldersByName returns a folderIterator so you need to do additional checking

 var folderIter = DriveApp.getFoldersByName(folderTitle);

  if(folderIter.hasNext()) {
    Logger.log('Folder already exists');
    var folder = folders.next();
  } 

  else{
    var folder = DriveApp.createFolder(folderTitle);
    Logger.log('New folder created!');
  }
  folder.addFile ( docFile );

} 
```

# java - Java 表单看起来不同

> ID：14265971
> 
> 赞同：-1
> 
> 时间：2013-01-10T19:42:21.403
> 
> 标签：java, swing, look-and-feel

我正在使用 NetBeans 编写一个 Java 项目。当我告诉 NetBeans 将表单作为主类打开时，它会像这样打开它：

[http://dl.dropbox.com/u/12868212/Good.jpg](http://dl.dropbox.com/u/12868212/Good.jpg)

但我想使用我编写的特定主类，它调用上述表单的构造函数，我得到：

[http://dl.dropbox.com/u/12868212/Bad.jpg](http://dl.dropbox.com/u/12868212/Bad.jpg)

构造函数代码：

```
public class Main {

 /**
  * @param args the command line arguments
 */
 public static void main(String[] args) {

     //Updating Global Variables Class:
     GlobalVariables.Update_Global_Variables_From_Configuration_XML(); 

     Form_StudentPresentation form_StudentPresentation = 
                                    new Form_StudentPresentation();

     form_StudentPresentation.setVisible(true);
 } 
```

有人可以告诉我有什么问题吗？我如何在 main 中调用构造函数以使表单看起来像 Good.jpg？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:49:28.363

我认为使用 Netbeans 创建的表单/框架默认具有外观代码。

检查 lookAndFeel 设置器是否在您的类中或在您的表单中的 main 中被调用。

您还可以检查是否有任何外观规范作为项目设置中的运行参数。

# ios - 如何从 NSDates 数组中查找缺失的日期？

> ID：14265975
> 
> 赞同：1
> 
> 时间：2013-01-10T19:42:30.813
> 
> 标签：ios, objective-c, nsmutablearray, nsdate

我有一个有序 NSDates 的 NSMutableArray。我正在寻找一种方法，它返回数组中最早日期和现在之间原始数组中缺失的所有天数（以 NSDate 形式）。在检查相等性时，我只关心 NSDate 的年、月和日部分。例如：

```
NSMutableArray *missingDates;
for (NSDate *date in allDatesBetweenOldestDateAndNow){
    if (date isNotIn: myDates)
        [missingDates addObject:date];
return missingDates; 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:49:31.483

我建议使用`NSDateComponents`，Apple 有使用它们的[指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendars.html#//apple_ref/doc/uid/TP40003470-SW1)。

[Apple 的本指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html#//apple_ref/doc/uid/TP40007836-SW1)解释了如何执行日期计算`NSDateComponents`以执行与您类似的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:56:51.730

您可能需要子类`NSDate`化并添加一个比较日期而不考虑时间的方法：

```
- (BOOL) isEqual:(id)object
{
    NSDateComponents* c1= [[NSCalendar currentCalendar]  components: NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate: self ];
    NSDateComponents* c2= [[NSCalendar currentCalendar]  components: NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate: object ];
    return [c1 isEqual: c2];
} 
```

其余的很自然：要查看您的数组是否有日期，您可以使用此方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T20:41:32.227

未编译——可能有一些 tupos。

```
NSDateFormatter* dayFmt = [[NSDateFormatter alloc] init];
[dayFmt setTimeZone:<whatever time zone you want>];
[dayFmt setDateFormat:@"g"];
NSInteger lastDay = [[dayFmt stringFromDate:startDate] integerValue];
// Note:  We assume that myDates is sorted, as stated.
for (NSDate* myDate in myDates) {
    NSInteger myDay = [[dayFmt stringFromDate:myDate] integerValue];
    while (myDay > lastDay+1) {
        lastDay++;
        NSDate* newDate = [dayFmt dateFromString:[NSString stringWithFormat:@"%d", lastDay]];
        [missingDates addObject:newDate];
    }
} 
```

（我将把它作为一个练习，让用户弄清楚如何填写最后一个数组条目和一些任意结束日期之间的任何缺失日期。）

（还应该注意，代码假设数组中没有重复的日期。很容易处理，但对用户来说是另一个练习。）

# ruby-on-rails - 将 capybara 从 1.0.1 升级到 1.1.4 使 database_cleaner 打破了我的规范

> ID：14265983
> 
> 赞同：8
> 
> 时间：2013-01-10T19:43:20.293
> 
> 标签：ruby-on-rails, selenium, rspec, capybara, database-cleaner

我有一个升级到版本 3.2.11 的旧 Rails 应用程序，其中有很多使用 capybara 版本 1.0.1 编写并使用 selenium 驱动程序运行的请求规范。每次测试后，使用截断策略使用 database_cleaner 清理数据库。

我想使用 poltergeist 而不是 selenium，并将 capybara 从 1.0.1 升级到 1.1.4 以便能够使用最新版本的 poltergeist。仅更改 capybara gem（及其依赖项）会引入运行我的规范的问题。

在每个规范之后，我总是在清理处理程序中从我的 Postgresql 数据库中得到死锁错误。我的 spec_helper 非常基本，看起来像这样：

```
RSpec.configure do |config|
  config.mock_with :rspec

  config.use_transactional_fixtures = false

  config.before(:suite) do
    DatabaseCleaner.strategy = :truncation
    DatabaseCleaner.clean_with(:truncation)
  end

  config.before(:each) do
    DatabaseCleaner.start
  end

  config.after(:each) do
    DatabaseCleaner.clean
  end
end 
```

我得到的错误是这样的：

```
An error occurred in an after hook
  ActiveRecord::StatementInvalid: PG::Error: ERROR:  deadlock detected
DETAIL:  Process 41747 waits for AccessExclusiveLock on relation 17612 of database 16396; blocked by process 41752.
Process 41752 waits for RowExclusiveLock on relation 17529 of database 16396; blocked by process 41747.
HINT:  See server log for query details.
: ALTER TABLE "aaa" ENABLE TRIGGER ALL;ALTER TABLE "bbbb" ENABLE TRIGGER ALL;ALTER TABLE "ccc" ENABLE TRIGGER ALL;
  occurred at /xxx/.bundle/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb:652:in `async_exec' 
```

我使用 FactoryGirl 创建测试数据，但没有什么特别的 IMO。

我无法弄清楚由 database_cleaner 创建的死锁的另一端是什么。任何解决这个问题的想法都是最受欢迎的。

有人知道 capybara 1.0.1 和 1.1.4 之间的任何变化，这些变化已经发生了变化并且可能已经开始导致这些问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-05T22:10:45.083

修复不是使用`sleep`而是仅使用 Capybara API 方法，因为它们等待预期的结果。

下面，第 2 行失败（`current_path`非等待，但第 3 行有效（`has_selector?`等待）。下面 Jonas Nicklas 文章的链接很好地解释了这一点。

```
click_on 'signup_button'  # Which does an AJAX redirect to /dashboard
assert_equal dashboard_path, current_path  # This causes the deadlock error as Capybara doesn't wait.
assert page.has_selector?("#dashboard")  # This works as it causes Capybara to wait for the new page. 
```

[http://www.elabs.se/blog/53-why-wait_until-was-removed-from-capybara](http://www.elabs.se/blog/53-why-wait_until-was-removed-from-capybara)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-25T16:28:54.967

我通过放置在黄瓜中解决了这个问题

```
sleep 0.2 
```

在执行一些 AJAX 内容的步骤（或在您的情况下为“规范”）的末尾。我想会发生什么是 cucumber/rspec 在 JS 驱动程序仍在等待 ajax 响应时调用数据库清理器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-28T21:20:16.520

我们使用的解决方案是在页面中找到应该更改以响应成功的 ajax 调用的内容。所以像：

```
click_on('Save')
expect(page).to have_content('Saved') 
```

# windows - Windows 批处理文件仅保留最后 30 个文件

> ID：14265984
> 
> 赞同：7
> 
> 时间：2013-01-10T19:43:23.417
> 
> 标签：windows, batch-file

我编写了一个批处理文件，它执行以下操作：

```
REM @ECHO OFF
rem %1 = coid
rem %2 = rpg location with ending /

rem get the path of this cmd script
SET SUBDIR=%~dp0

SET BKUPDIR=%SUBDIR%BACKUPS\
SET LOGFILE=%BKUPDIR%backup.log

ECHO ************************************************* >>%LOGFILE%
ECHO STARTING BACKUP FOR %1 AT %2 >>%LOGFILE%

FOR /f "skip=1" %%x in ('wmic os get localdatetime') DO IF NOT defined mydate SET mydate=%%x
SET filedate=%mydate:~0,14%
SET fullname=%BKUPDIR%%1_%FILEDATE%.ZIP

ECHO BKUPDIR: %BKUPDIR% >>%LOGFILE%
ECHO mydate: %mydate% >>%LOGFILE%
ECHO filedate: %filedate% >>%LOGFILE%
ECHO fullname: %fullname% >>%LOGFILE%
ECHO SUBDIR: %SUBDIR% >>%LOGFILE%

rem lets make sure the backup directory exists before starting
IF NOT EXIST %BKUPDIR% MD %BKUPDIR% >>%LOGFILE%

%SUBDIR%7z a -tzip %fullname%  %2%1*.d
IF ERRORLEVEL 255 ECHO user_stopped_the_process >>%LOGFILE%
IF ERRORLEVEL 8 ECHO not_enough_memory >>%LOGFILE%
IF ERRORLEVEL 7 ECHO command_line_error >>%LOGFILE%
IF ERRORLEVEL 2 ECHO fatal_error >>%LOGFILE%
IF ERRORLEVEL 1 ECHO ok_warnings >>%LOGFILE%

IF ERRORLEVEL 0 GOTO END
IF EXIST %fullname% DEL %fullname%

:END
ECHO FINISHING BACKUP FOR %1 >>%LOGFILE%
ECHO ************************************************* >>%LOGFILE%
set mydate= 
```

我将文件保存为文件的`%1`创建日期/时间：

```
SSS_20130110133304.ZIP 
SSS_20130110133336.ZIP 
```

我在任务调度程序中运行它以每天晚上运行。

我想避免目录中有太多 zip 文件，所以我想保留最后 30 个存在的 zip 文件。

我被困在这一点上。如何保留最近的 30 个 zip 文件，这样我就不会收到一堆垃圾的 zip 文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T20:56:47.093

这将列出从最新到最旧的 .zip 文件（按创建日期），跳过前 30 个文件。

```
for /f "skip=30 delims=" %%A in ('dir /a:-d /b /o:-d /t:c *.zip ^2^>nul') do if exist "%%~fA" echo "%%~fA" 
```

只需在您想要实际删除文件时更改`echo`为。`del`**`:)`**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T21:03:40.360

只关注这个问题——如何保留 30 个最新文件，并删除其余文件：

您可以`dir > clean.lst`使用正确的排序来执行 a，以便最新的文件位于`clean.lst`. 然后您可以使用该`for`命令跳过文件中的前 30 行，并删除第 30 个文件之后列出的文件。

考虑这个测试用例：

```
C:>md xyz
C:>cd xyz
c:\xyz>copy con genfiles.bat
@echo off
set _i=1
:loop
if %_i%==100 goto :EOF
echo.>%_i%.txt
set /a _i+=1
goto loop
^Z
        1 file(s) copied.

c:\xyz>genfiles
c:\xyz>del genfiles.bat 
```

现在您在 XYZ 文件夹中有 99 个文本文件。

您可以像这样删除除 30 个最新的以外的所有内容：

```
C:\xyz>dir /b /o-d *.txt > clean.lst
C:\xyz>for /f "skip=30 delims=" %i in (clean.lst) do del "%i"
C:\xyz>del clean.lst 
```

A`dir`只显示文本文件 70.txt - 99.txt 保留，其余已被删除。

对于您的批处理文件，我认为它看起来像这样：

```
cd /d %BKUPDIR%
dir /b /o-d *.zip > clean.lst
for /f "skip=30 delims=" %%i in (clean.lst) do del "%%i"
del clean.lst 
```

# c++ - Visual c++ - 自动更正

> ID：14265985
> 
> 赞同：1
> 
> 时间：2013-01-10T19:43:34.583
> 
> 标签：c++, visual-studio

```
#include <iostream>

int main()
{
    cout << "Can't find cout, did you mean std::cout?";
    return 0;
} 
```

如果这是 java 代码 eclipse/intellij 会告诉我它找不到`cout`，它会给我一个可能解决这个错误的列表，例如`std::cout`

我从来没有在 c++ 中看到过类似的东西，我不知何故错过了这个功能。这对于在 java 中导入库非常有用，因为您只需键入类似`cout`的内容，IDE 会建议您这样做，`#include <iostream>`而无需跳转到文件的顶部。

Visual c++ 中是否存在类似的东西？（或其他 IDE）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:45:52.247

我不了解 IDE，但`clang`会这样做：

```
$ clang++ test.C 
test.C:5:5: error: use of undeclared identifier 'cout'; did you mean 'std::cout'?
    cout << "Can't find cout, did you mean std::cout?";
    ^~~~
    std::cout
/usr/include/c++/4.2.1/iostream:63:18: note: 'std::cout' declared here
  extern ostream cout;          ///< Linked to standard output
                 ^
1 error generated. 
```

最近的 GCC 版本也会这样做：

```
$ g++ test.C 
test.C: In function ‘int main()’:
test.C:5:5: error: ‘cout’ was not declared in this scope
test.C:5:5: note: suggested alternative:
In file included from test.C:1:0:
/usr/include/c++/4.7.1/iostream:62:18: note:   ‘std::cout’ 
```

# php - 合并和调整图像大小

> ID：14265989
> 
> 赞同：0
> 
> 时间：2013-01-10T19:43:47.867
> 
> 标签：php, image, image-processing, gd

我正在尝试将我的功能从简单地调整图像大小扩展到添加水印。问题是没有添加水印。我已经确认路径是正确的。为什么它不起作用？

```
$image = imagecreatefromjpeg($this->getFile());

    $size = getimagesize($this->getFile());  

    $watermark = imagecreatefrompng('../watermark.png');
    $watermark_width = imagesx($watermark);  
    $watermark_height = imagesy($watermark);

    $dest_x = $size[0] - $watermark_width - 10;  

    $dest_y = $size[1] - $watermark_height - 5; 

    //die($watermark_width);

    $thumb_image = imagecreatetruecolor($this->getThumbWidth(), $this->getThumbHeight());

    imagecopymerge($image, $watermark, $dest_x, $dest_y, 0, 0, $watermark_width, $watermark_height, 100);  

    imagecopyresampled( $thumb_image, $image, 0, 0, 0, 0, $this->getThumbResizeWidth(), $this->getThumbResizeHeight(), $this->getWidth(), $this->getHeight() );
    imagejpeg( $thumb_image, $this->getThumbDestination(), $this->getThumbQuality() );

    imagedestroy($thumb_image);
    imagedestroy($image); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:41:20.823

发布代码后，我发现了几个错误，与我的看法相反，主要错误是 watermark.png 的文件路径不正确。已更新并且对我有用。但是，Alpha 透明度仍然存在问题。

# javascript - 寻找 toDataUrl 指导

> ID：14265991
> 
> 赞同：1
> 
> 时间：2013-01-10T19:43:52.220
> 
> 标签：javascript, image, data-url

切入正题...我想获取一个本地图像文件，使用 javascript 从该图像创建一个 dataurl 值。我不完全确定如何去做。我查看了一堆代码示例，但我不确定他们到底在用画布做些什么。我什至可以希望为此访问本地文件吗？我敢打赌，这将是一个安全风险，并且 javascript 将无法通过它的沙箱进行访问。

本质上，使用 REAL 解释 JS，这就是我想要做的......

```
var imgTest = "/tmp/prev/localimage.jpeg";
var imgTest = imgTest.toDataUrl;
document.write(imgTest); 
```

最终结果希望是打印到网页的 dataurl 字符串，“data:image/jpeg;base64,/9j/4AAQSkZJRgABAQE...”

这有意义吗？我只想要一个变量中的 dataurl 信息。

非常感谢您对 StackOverflow 的好建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T08:09:15.943

您可以创建一个图像对象，将其绘制到画布上，然后在画布上调用 toDataURL()。像这样：

```
function draw() {
  var dataURL;
  var that = this;
  var canvas = document.getElementById('canvas');
  var context = canvas.getContext('2d');
  var img = new Image();
  img.onload = function() {
    context.drawImage(img,0,0);
    dataURL = canvas.toDataURL();
    // can call some other function once the image is loaded and you have the dataURL, e.g.
    that.onDataURL(dataURL);
  };
  img.src = '/files/4531/backdrop.png';
}

function onDataURL(dataURL) {
  console.log(dataURL);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T15:25:28.463

“该`toDataURL()`方法要求在画布上绘制的任何图像都托管在与执行它的代码具有相同域的 Web 服务器上。如果不满足此条件，则会引发 SECURITY_ERR 异常。” [资源](http://www.html5canvastutorials.com/advanced/html5-canvas-get-image-data-url/)

对我来说，这听起来不适用于本地文件，并且用于从 HTML5 画布上绘制的内容生成编码图像数据。

查看[Mozilla 文档](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement)确认这`toDataURL()`是一个专门针对画布对象的函数，而不是图像对象。

如果我理解正确，您可以在相同尺寸的画布上绘制图像，然后使用 toDataURL() 方法生成编码数据。当然，这是假设图像文件与 JavaScript 代码位于同一位置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T15:43:36.130

MDN 有一个[非常简洁和简单的示例](https://developer.mozilla.org/en-US/docs/DOM/FileReader#Example)，可以准确地展示您想要的内容：

```
<!doctype html>
<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
<title>Image preview example</title>
<script type="text/javascript">
oFReader = new FileReader(), rFilter = /^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i;

oFReader.onload = function (oFREvent) {
  document.getElementById("uploadPreview").src = oFREvent.target.result;
};

function loadImageFile() {
  if (document.getElementById("uploadImage").files.length === 0) { return; }
  var oFile = document.getElementById("uploadImage").files[0];
  if (!rFilter.test(oFile.type)) { alert("You must select a valid image file!"); return; }
  oFReader.readAsDataURL(oFile);
}
</script>
</head>

<body onload="loadImageFile();">
  <form name="uploadForm">
    <table>
      <tbody>
        <tr>
          <td><img id="uploadPreview" style="width: 100px; height: 100px;" src="data:image/svg+xml,%3C%3Fxml%20version%3D%221.0%22%3F%3E%0A%3Csvg%20width%3D%22153%22%20height%3D%22153%22%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%3E%0A%20%3Cg%3E%0A%20%20%3Ctitle%3ENo%20image%3C/title%3E%0A%20%20%3Crect%20id%3D%22externRect%22%20height%3D%22150%22%20width%3D%22150%22%20y%3D%221.5%22%20x%3D%221.500024%22%20stroke-width%3D%223%22%20stroke%3D%22%23666666%22%20fill%3D%22%23e1e1e1%22/%3E%0A%20%20%3Ctext%20transform%3D%22matrix%286.66667%2C%200%2C%200%2C%206.66667%2C%20-960.5%2C%20-1099.33%29%22%20xml%3Aspace%3D%22preserve%22%20text-anchor%3D%22middle%22%20font-family%3D%22Fantasy%22%20font-size%3D%2214%22%20id%3D%22questionMark%22%20y%3D%22181.249569%22%20x%3D%22155.549819%22%20stroke-width%3D%220%22%20stroke%3D%22%23666666%22%20fill%3D%22%23000000%22%3E%3F%3C/text%3E%0A%20%3C/g%3E%0A%3C/svg%3E" alt="Image preview" /></td>
          <td><input id="uploadImage" type="file" name="myPhoto" onchange="loadImageFile();" /></td>
        </tr>
      </tbody>
    </table>

    <p><input type="submit" value="Send" /></p>
  </form>
</body>
</html> 
```

[试试看。](https://developer.mozilla.org/files/3698/image_upload_preview.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T15:30:46.213

您可以向用户提供输入[type=file]，他可以在其中选择要使用的图像。

之后，您可以通过 FileReader 访问图像数据。

这是一个很好的教程：[http ://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

FileReader API 还提供了一个 readAsDataURL 方法，该方法应该为您提供 Base64 字符串。

# ruby - 我将如何为以下控制器编写测试

> ID：14265993
> 
> 赞同：0
> 
> 时间：2013-01-10T19:44:04.430
> 
> 标签：ruby, rspec, tdd, bdd, rspec2

我是 rspec 的新手，想知道如何为以下控制器的两个动作编写功能测试

```
class FeedbackFormsController < ApplicationController

  before_filter :authenticate_user!

 def new
  @feedback_form = FeedbackForm.new
  session[:return_to] = request.referer
 end

 def create
  feedback_form = FeedbackForm.new(params[:feedback_form])
  FeedbackMailer.new(feedback_form).deliver
  flash[:notice] = "Your feedback was submitted successfully."
  redirect_to session[:return_to]
 end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:24:06.623

我认为你自己做可能是一种更好的学习体验，但我会让你开始使用一些伪代码。我会故意松懈我的语法。

```
require spec-helper

describe FeedbackFormsController

  before each 
    controller should receive :authenticate_user! and return true

  describe new
    it should assign a new feedback form
      get new
      assigns feedback_form should be a new Feedbackform

    it should call for the referer
      request should receive referer
      get new

    it should set session value
      request stub referer and return nonsense
      expect
        get new
      to change session return_to to nonsense

  describe create
    it should create a new Feebackform
      Feebackform should receive new with nonsense
      post create nonsense

    it should create a new Feebackmailer
      mock = mock_model Feedbackform
      Feedbackform stub new and return mock
      Feedbackmailer should receive new with mock
      post create nonsense

    it should deliver a message
      mock = mock_model FeedbackMailer
      Feedbackform stub new
      FeedbackMailer stub new and return mock
      mock should receive deliver
      post create nonsense

    it should redirect
      Feedbackform stub new
      Feedbackmailer stub new
      post create nonsense
      response should redirect to session[return to] 
```

希望这能让你开始。

# php - 生成控制器和模型

> ID：14265996
> 
> 赞同：38
> 
> 时间：2013-01-10T19:44:19.373
> 
> 标签：php, laravel

我是 Laravel 的新手，我玩过 laravel 4（Beta 版）。我想知道如何通过命令行使用生成控制器和模型`php artisan`。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-10T19:59:47.497

观看此视频：http: //youtu.be/AjQ5e9TOZVk?t= [1m45s](http://youtu.be/AjQ5e9TOZVk?t=1m45s) 您可以`php artisan list`查看所有命令，生成 REST-ful 控制器的命令是`controller:make` 您可以查看使用情况：`php artisan help make:controller`

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-03-13T18:28:48.527

**拉拉维尔 5**

其他答案对 Laravel 4 来说很棒，但[Laravel 5](http://laravel.com/docs/5.0)就在这里！我们现在可以默认生成各种东西。运行`php artisan help`以查看所有工匠命令。以下是所有`make`命令：

```
make
  make:command         Create a new command class
  make:console         Create a new Artisan command
  make:controller      Create a new resource controller class
  make:event           Create a new event class
  make:middleware      Create a new middleware class
  make:migration       Create a new migration file
  make:model           Create a new Eloquent model class
  make:provider        Create a new service provider class
  make:request         Create a new form request class 
```

**注意：**我们不再使用*item* :make。相反，我们现在有了 make: *item*。

跑`php artisan help make:item`看看你能通过什么。例如`php artisan help make:migration`显示我们需要将迁移名称传递给它，但我们也可以传递它`--create=""`或`--table=""`指定要分别创建或修改的表名。运行`php artisan make:migration create_articles_table --create="articles"`以生成文章表。此外，生成模型负责为该模型生成迁移。遵循命名约定，它将被复数以进行迁移。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-01-10T20:06:58.937

谢谢@user1909426，我可以找到解决方案，`php artisan list`它将列出在 L4 上使用的所有命令。它只能创建控制器，不能创建模型。我按照这个命令生成控制器。

```
php artisan controller:make [Name]Controller 
```

在 Laravel 5 上，命令发生了变化：

```
php artisan make:controller [Name]Controller 
```

**注：** [Name] 控制器名称

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-05-07T16:46:19.607

使用**Model**制作**资源控制器**。

 **`php artisan make:controller PostController --model=Post`

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-07-06T16:10:45.953

对于生成模型，具有资源和迁移的控制器的最佳命令是：

```
php artisan make:model ModelName -m -cr 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-09-06T11:03:24.067

laravel artisan 不支持默认模型和视图生成。检查此提供程序[https://github.com/JeffreyWay/Laravel-4-Generators](https://github.com/JeffreyWay/Laravel-4-Generators)以生成模型、视图、播种器等。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-07-29T04:17:07.143

您可以制作一个普通的控制器文件，例如

```
php artisan make:controller --plain <controller name> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-08-06T11:10:38.917

**制作模型，控制器由**

```
php artisan make:model Customer -mc 
```

**使用资源制作模型，控制器**

```
php artisan make:model Customer -mcr 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-05-03T13:52:49.990

楷模：

```
php artisan krlove:generate:model Videos --table-name=videos 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-12T11:13:02.193

使用资源方法创建

```
php artisan make:controller --resource ControllerName  --model=ModelName 
```

与路径一起使用

```
php artisan make:controller --resource path/ControllerName  --model=ModelName 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-09-18T08:15:11.807

查看所有可用控制器：您可以执行 PHP 工匠列表以查看所有命令

寻求帮助：PHP工匠帮助制作：控制器

```
php artisan make:controller MyControllerName 
```

[![在此处输入图像描述](../Images/eefc364762cc384d6dee2c5dbbf81202.png)](https://i.stack.imgur.com/76Ey4.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-05T08:31:14.720

```
php artisan make:controller --resource Backend/API/DemoController --model=Demo 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-07-18T10:24:39.273

利用：

```
make:model {{SingularName}} 
```

例如

```
make:model Video 
```**

# string - Perl CGI：获取请求不起作用，除非 URL 是硬编码的

> ID：14265997
> 
> 赞同：0
> 
> 时间：2013-01-10T19:44:28.530
> 
> 标签：string, perl, url, cgi, get-request

我试图在 URL 获取请求期间识别两个字符串之间的差异（使用 LWP::Simple）。
我有一个 URL，比如[http://www.example.com?param1=x¶m2=y¶m3=z](http://www.example.com?param1=x&param2=y&param3=z)
我确保所有空白输入也得到处理，但此时这无关紧要，因为我要确保所有参数完全一样。
此外，硬编码的 URL 是从生成的 URL 复制和粘贴的。
当我执行以下操作时，此 URL 有效：

```
my $url = "http://www.example.com?param1=x&param2=y&param3=z";
my $content = get($url); 
```

然而，当我从用户提供的参数构建 URL 时，get 请求不起作用（错误：来自站点的 500）。
我通过打印出来比较了这两个 URL，发现差异为零。我已经尝试删除所有潜在的隐形字符。

生成的代码和静态字符串的输出，假设用户输入与静态字符串相同（这是我要确保做的）：

```
http://www.example.com?param1=x&param2=y&param3=z
http://www.example.com?param1=x&param2=y&param3=z 
```

我假设打印输出会删除我看不到的字符。我还遵循了[http://www.perlmonks.org/?node_id=882590](http://www.perlmonks.org/?node_id=882590)上的解决方案，它指出了差异，但我不知道为什么，考虑到我根本看不到。
有没有人遇到过这个问题？如果我需要澄清任何事情或需要提供其他信息，请告诉我。

**编辑：问题和解决方案**
因此，在使用 mob 的建议来识别差异之后，我发现生成的 URL 中有一个空字符，它没有在输出中打印出来。即：
`http://www.example.com?param1=x&param2=y&param3=z`实际上是
`http://www.example.com?param1=x&param2=y&param3=\000z`。
我使用了一个简单的正则表达式：`$url =~ s/\000//g;`删除该（和任何其他）空值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:53:24.163

显然，您构建的字符串与硬编码的字符串不同。如果你写这样的代码

```
my $ss = 'http://www.example.com?param1=x&param2=y&param3=z';
print join(' ', map " $_", $ss =~ /./g), "\n";
print join(' ', map sprintf('%02X', ord), $ss =~ /./g), "\n"; 
```

那么你就可以看到字符串中每个字符的十六进制值，并且可以更准确地比较它们两个。例如，上面的代码输出

```
 h  t  t  p  :  /  /  w  w  w  .  e  x  a  m  p  l  e  .  c  o  m  ?  p  a  r  a  m  1  =  x  &  p  a  r  a  m  2  =  y  &  p  a  r  a  m  3  =  z
68 74 74 70 3A 2F 2F 77 77 77 2E 65 78 61 6D 70 6C 65 2E 63 6F 6D 3F 70 61 72 61 6D 31 3D 78 26 70 61 72 61 6D 32 3D 79 26 70 61 72 61 6D 33 3D 7A 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T19:55:38.687

使用数据序列化函数来检查字符串中的隐藏字符。

```
$url1 = "http://www.example.com?param1=x&param2=y";
$url2 = "http://www.example.com?param1=x&param2=y\0";
$url3 = "http://www.example.com?param1=x&param2=y\n";

use JSON;
print JSON->new->pretty(1)->encode( [$url1,$url2,$url3] );
# Result:
# [
#   "http://www.example.com?param1=x&param2=y",
#   "http://www.example.com?param1=x&param2=y\u0000",
#   "http://www.example.com?param1=x&param2=y\n"
# ]

use Data::Dumper;
$Data::Dumper::Useqq = 1;
print Dumper($url1,$url2,$url3);
# Result:
# $VAR1 = "http://www.example.com?param1=x&param2=y";
# $VAR2 = "http://www.example.com?param1=x&param2=y\0";
# $VAR3 = "http://www.example.com?param1=x&param2=y\n"; 
```

# c# - 没有 RIA 服务的 Silverlight 身份验证？

> ID：14265998
> 
> 赞同：0
> 
> 时间：2013-01-10T19:44:30.577
> 
> 标签：c#, forms-authentication, silverlight-5.0

我想知道是否可以在 Silverlight 5 中使用身份验证而不必使用 RIA 服务。我正在使用实体框架连接到我的数据库。我也在使用业务应用程序模板。我创建了一个自定义成员资格提供程序，通过它我可以验证用户凭据并添加新用户。但是，如果我想根据哪个用户登录来限制应用程序上的内容，我没有办法。我相信，如果我创建一个 RIA 服务域上下文，我可以通过 WebContext.Current.User 检查用户信息。有没有办法在没有 RIA 的情况下获取此类信息？也许某种 WCF 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:22:36.253

有一次我写了一篇关于如何在你的 web 应用程序和 silverlight 应用程序之间共享表单身份验证的教程。这在没有 ria 的情况下工作，使用受保护的 wcf。您甚至可以微调对各个角色的访问。

[http://netpl.blogspot.com/2010/04/aspnet-forms-authentication-sharing-for.html](http://netpl.blogspot.com/2010/04/aspnet-forms-authentication-sharing-for.html)