# StackOverflow 问答 12920000-12920999

# c# - 应用程序文件夹的权限

> ID：12920000
> 
> 赞同：1
> 
> 时间：2012-10-16T17:10:34.663
> 
> 标签：c#, permissions, visual-studio-2005, windows-installer

我有一个使用 Visual Studio 2005 创建的默认应用程序设置。安装我的应用程序后，它只能以管理员身份运行，因为某些文件被写入应用程序文件夹中。

我发现在 Visual Studio 2010 上，有一个属性可以更改应用程序文件夹内某些文件夹的此权限。

如何允许我的应用程序在应用程序文件夹中创建和编辑特定文件而不以管理员身份运行它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T17:51:03.047

以下是您的选项，假设您无法更改应用程序本身尝试读取/写入文件的位置：

*   更改应用程序安装程序的默认安装目录，不要进入 C:\ProgramFiles，而是进入 C:\ 驱动器旁边的一个文件夹，该文件夹具有更宽松的访问权限。这是 Windows 3.1 甚至 Windows 95 中的标准做法，但如今，除非安装到正确的 Program Files 目录中，否则您无法获得 Microsoft“认证”为与任何受支持的 Windows 版本兼容的程序。这些现代操作系统也将 C:\ 驱动器的根目录锁定得非常严密，因此您需要管理权限才能安装应用程序（但不需要运行它）。
*   为安装程序创建自定义操作，在安装期间增加程序子文件夹的访问权限。同样，如果您这样做，Microsoft 不太可能认证该应用程序，并且这还需要管理员权限才能安装该应用程序，这意味着您网络上的普通用户不能只是将其拉下来并运行它。
*   将必须更改的文件安装在“适当”的位置（用户特定文件的应用程序数据，与整个软件相关的文件的程序数据），然后在主应用程序文件夹中创建指向文件的快捷方式他们可访问的位置。旧版应用程序不应该知道其中的区别。

**编辑：**这是我编写的应用程序安装程序的自定义操作的一种方法，该应用程序具有类似的“旧版”应用程序，该应用程序必须从应用程序“主”目录的子文件夹中的配置文件中读取/写入数据。传入的 IDictionary 是您从各种自定义操作方法（OnBeforeInstall、OnAfterInstall、OnCommit 等）中获得的，因此您只需将其放入 Installer 类中，从您选择的安装事件的处理程序中调用它（必须在安装程序更改文件系统之后），然后调用它：

```
private void SetEditablePermissionOnConfigFilesFolder(IDictionary savedState)
    {
        if (!Context.Parameters.ContainsKey("installpath")) return;

        //Get the "home" directory of the application
        var path = Path.GetFullPath(Context.Parameters["installpath"]);

        //in my case the necessary files are under a ConfigFiles folder;
        //you can do something similar with individual files
        path = Path.Combine(path, "ConfigFiles");
        var dirInfo = new DirectoryInfo(path);

        var accessControl = dirInfo.GetAccessControl();

        //Give every user of the local machine rights to modify all files
        //and subfolders in the directory
        var userGroup = new NTAccount("BUILTIN\\Users");
        var userIdentityReference = userGroup.Translate(typeof(SecurityIdentifier));

        accessControl.SetAccessRule(
            new FileSystemAccessRule(userIdentityReference,
                                     FileSystemRights.Modify,
                                     InheritanceFlags.ObjectInherit 
                                        | InheritanceFlags.ContainerInherit,
                                     PropagationFlags.None,
                                     AccessControlType.Allow));
        //Commit the changes.
        dirInfo.SetAccessControl(accessControl);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:13:48.697

不要向应用程序文件夹（在程序文件下）写入任何内容。而是使用用户的主文件夹，或者，如果您想编写与机器上所有用户相关的内容 - ProgramData。

编辑：

如果您无法更改应用程序代码，您仍应尽可能避免将程序数据文件放在 ProgramFiles 下。你还可以做一件事。您可以在 c:\ProgramData 下创建一个文件夹，然后从 C:\Program Files... 创建一个指向它的符号链接。这样，您的旧应用程序仍然可以在预期的位置找到数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:14:38.710

您可以使用 Windows 资源管理器将 NTFS 文件夹权限手动更改为应用程序文件夹。但是，最佳做法是读取/写入不同的文件夹。

# methods - 递归 - 一个语句中的两个调用

> ID：12920001
> 
> 赞同：4
> 
> 时间：2012-10-16T17:10:36.800
> 
> 标签：methods, recursion, call

我试图理解下面代码片段中的递归调用。

```
static long fib(int n) {
    return n <= 1 ? n : fib(n-1) + fib(n-2);
} 
```

哪个函数调用首先被调用？通话后等式如何运作？

这两个都被调用一次然后应用方程还是第一个调用然后第二个？

也许是一个非常简单的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:16:06.130

## Java 和 C♯

子表达式按从左到右的顺序计算。`fib(n-1)`之前评估过`fib(n-2)`。请参阅[Java 中评估顺序的规则是什么？](https://stackoverflow.com/questions/6800590/what-are-the-rules-for-evaluation-order-in-java)

重要的是要注意评估的顺序在这里并不重要，因为`fib()`没有任何副作用。

## C 和 C++

这两个函数以不确定的顺序被调用，一旦它们都被调用，它们的返回值就会被加在一起并返回。可以先调用左边的函数，也可以先调用右边的函数，你不知道。

这可能看起来有问题，但事实并非如此，因为调用它们的顺序无关紧要。调用`fib(i)`没有任何副作用（例如修改其他变量、打印消息等），因此两个函数调用是完全独立的。

一个编译器可能决定先评估左侧，再评估右侧：

```
 1\. f(3)
 2\.   f(2)
 3\.     f(1)
 4\.       return 1
 5\.     f(0)
 6\.       return 0
 7\.     return 1 + 0
 8\.   f(1)
 9\.     return 1
10\.  return 1 + 1 
```

另一个人可能决定先评估右侧，再评估左侧：

```
 1\. f(3)
 2\.   f(1)
 3\.     return 1
 4\.   f(2)
 5\.     f(0)
 6\.       return 0
 7\.     f(1)
 8\.       return 1
 9\.     return 1 + 0
10\.  return 1 + 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T17:20:26.213

运算符的评估顺序`+`可能没有定义（它取决于实现），意思是：要么 先执行，`fib(n-1)`要么`fib(n-2)`可以先执行。无论哪种方式，结果都是相同的，在这种特殊情况下，这并不重要：两个递归调用将在返回之前计算并相加，从调用位置您只会看到总和的最终结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T17:20:04.167

首先调用哪个函数并不重要。此函数返回斐波那契数列中的**第 n**个数，始终可以通过将前两个数相加来找到该数（序列中的前两个数是 0 和 1 的特殊情况）。

所以这个函数计算 fib(n) 的作用是求 fib(n-1) 和 fib*(n-2) 并将它们加在一起得到 fib(n)。当然，fib(n-1) 通过请求 fib(n-2) 和 fib(n-3) 来工作，而 fib(n-2) 通过请求 fib(n-3) 和 fib(n-4) 来工作) 依此类推，直到到达序列的最开始（0 和 1）。由于这些可以在没有任何进一步递归的情况下返回，因此递归结束并且每个打开的函数都返回到调用它的函数，一直沿链返回。

有一种更有效的方法可以做到这一点，它不需要两个单独的递归，但它看起来并不那么优雅。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T17:19:54.183

Gcc -S fib.c：

```
 subl    $1, %eax
    movl    %eax, (%esp)
    call    _fib
    movl    %eax, %ebx
    movl    8(%ebp), %eax
    subl    $2, %eax
    movl    %eax, (%esp)
    call    _fib 
```

因此，首先调用左边的。然后怎样呢？好吧，它也为 (n-2) 调用 fib，但不知道正确的分支也在计算相同的东西。

这个众所周知的例子的复杂度为 O(n^2)，这意味着如果 n=10，它会用不同的参数调用它自身 ~100 次，即使 10 次就足够了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-17T16:49:53.703

为了理解这一点，我使用了下面的代码，输出清除了所有疑问：（C#）

```
 static void Main(string[] args)
    {
        var data = series(5);
        Console.WriteLine(data);
    }

    public static int series(int n)
    {
        Console.WriteLine(n);
        if (n ==2)
        {
            return 1;
        }
        if (n == 50)
        {
            return 3;
        }
        else
        {
            return series(2) + series(50);
        }
    } 
```

输出：5 2 50 4

**简而言之，它将完成左表达式的递归然后向右移动。**

# business-objects - 如何提高使用 Bex 查询作为后端的 SAP BO Webi 4.0 的性能？

> ID：12920002
> 
> 赞同：0
> 
> 时间：2012-10-16T17:10:44.603
> 
> 标签：business-objects

我正在使用 Bex 查询作为源（BICS 连接）生成 Webi 报告。在报告中看到性能问题，因为我正在使用 Webi 中的变量进行所有计算。

如果我们将计算移至 BEX 查询，我想知道任何性能提升？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:48:19.310

以下是要记住的关键点， 1\. 使用 CKF/RKF 在 BEX 端委托所有相关/复杂的计算 2\. 将所有过滤器保留在 BEX 查询中，而不是保留在 WEBi 中 3\. 使用索引对所有 Webi 进行过滤。

# php - 将 api.server.com 重定向到特定的 CakePHP 控制器

> ID：12920007
> 
> 赞同：0
> 
> 时间：2012-10-16T17:11:05.773
> 
> 标签：php, apache, cakephp

我的 Apache 2 Web 服务器上安装了 CakePHP 2。我想为我的网络应用程序创建一个 API，而不是通过“https://www.server.com/api/...”访问它，而是通过“https://api.server.com/”访问它。 ……”。我真的不知道如何使它工作。我试图启用一个新的 apache 站点，但我只能重定向到服务器上的真实位置，而我想重定向到服务器上实际上没有位置的“api”控制器。

我不知道我是否真的清楚，所以如果您需要更多详细信息，请询问我。

提前致谢！塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:19:41.577

您可以在 dns 区域中添加一条新记录（CNAME）：api.server.com 到 www.server.com 进行此更改后，当您在 api.server.com 上输入时将加载 www.server.com。

在您的控制器中，您可以检测到主机名。

# sql-server-2008 - T-SQL：拆分和聚合逗号分隔值

> ID：12920013
> 
> 赞同：1
> 
> 时间：2012-10-16T17:11:20.327
> 
> 标签：sql-server-2008, tsql, csv, aggregation

我有下表，每一行都有逗号分隔的值：

```
ID
-----------------------------------------------------------------------------
10031,10042
10064,10023,10060,10065,10003,10011,10009,10012,10027,10004,10037,10039
10009
20011,10027,10032,10063,10023,10033,20060,10012,10020,10031,10011,20036,10041 
```

我需要为每个`ID`（分组）计数。

我只是想避免游标的实现，并为如何在没有游标的情况下做到这一点感到困惑。

任何帮助，将不胜感激 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T17:21:51.043

您将需要使用拆分功能：

```
create FUNCTION [dbo].[Split](@String varchar(MAX), @Delimiter char(1))       
returns @temptable TABLE (items varchar(MAX))       
as       
begin      
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return 
end; 
```

然后您可以通过以下方式查询数据：

```
select items, count(items)
from table1 t1
cross apply dbo.split(t1.id, ',')
group by items 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/111ce/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:19:43.390

在重申上面关于不要将多个值放入单个列的评论之后（使用单独的子表，每行一个值！），

不过，一种可能的方法是：使用 UDF 将分隔字符串转换为表格。将所有值转换为表格后，将所有表格合并到一个表格中，然后对该表格进行分组。

```
Create Function dbo.ParseTextString (@S Text, @delim VarChar(5))
Returns @tOut Table 
(ValNum Integer Identity Primary Key, 
 sVal VarChar(8000))
As
Begin 
Declare @dlLen TinyInt      -- Length of delimiter
Declare @wind VarChar(8000) -- Will Contain Window into text string
Declare @winLen  Integer    -- Length of Window
Declare @isLastWin TinyInt  -- Boolean to indicate processing Last Window
Declare @wPos  Integer      -- Start Position of Window within Text String
Declare @roVal VarChar(8000)-- String Data to insert into output Table
Declare @BtchSiz Integer    -- Maximum Size of Window
Set @BtchSiz = 7900     -- (Reset to smaller values to test routine)
Declare @dlPos Integer      -- Position within Window of next Delimiter
Declare @Strt Integer       -- Start Position of each data value within Window
-- -------------------------------------------------------------------------

-- ---------------------------
If @delim is Null Set @delim = '|'
If DataLength(@S) = 0 Or
    Substring(@S, 1, @BtchSiz) = @delim Return
-- --------------------------------------------
Select @dlLen = DataLength(@delim),
        @Strt = 1, @wPos = 1,
        @wind = Substring(@S, 1, @BtchSiz)
Select @winLen = DataLength(@wind),
    @isLastWin = Case When DataLength(@wind) = @BtchSiz
                      Then 0 Else 1 End,
        @dlPos = CharIndex(@delim, @wind, @Strt)
-- --------------------------------------------
While @Strt <= @winLen
    Begin
        If @dlPos = 0 Begin    -- No More delimiters in window
            If @isLastWin = 1 Set @dlPos = @winLen + 1 
            Else Begin
                Set @wPos = @wPos + @Strt - 1
                Set @wind = Substring(@S, @wPos, @BtchSiz)
                -- ----------------------------------------
                Select @winLen = DataLength(@wind), @Strt = 1,
                       @isLastWin = Case When DataLength(@wind) = @BtchSiz
                                Then 0 Else 1 End,
                       @dlPos = CharIndex(@delim, @wind, 1)
                If @dlPos = 0 Set @dlPos = @winLen + 1 
            End
        End
        -- -------------------------------
        Insert @tOut (sVal) 
        Select LTrim(Substring(@wind, 
                @Strt, @dlPos - @Strt))
        -- -------------------------------
        -- Move @Strt to char after last delimiter
        Set @Strt = @dlPos + @dlLen 
        Set @dlPos = CharIndex(@delim, @wind, @Strt)
    End
Return
End 
```

然后写，（使用你的表模式），

```
 Declare @AllVals VarChar(8000)
 Select @AllVals = Coalesce(@allVals + ',', '') + ID 
 From Table Where ID Is Not null
 -- -----------------------------------------
 Select sVal, Count(*)
 From dbo.ParseTextString(@AllVals, ',')
 Group By sval 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:26:53.947

好吧，我一直使用的解决方案，可能还有更好的方法，就是使用一个可以拆分所有内容的函数。没有使用游标，只是一个while循环。

```
if OBJECT_ID('splitValueByDelimiter') is not null
begin
  drop function splitValueByDelimiter
end
go
create function splitValueByDelimiter (
  @inputValue varchar(max)
, @delimiter varchar(1)
)       
returns @results table (value varchar(max))       
as       
begin       

declare @delimeterIndex int       
      , @tempValue varchar(max)

set @delimeterIndex = 1
while @delimeterIndex > 0  and len(isnull(@inputValue, '')) > 0    
begin       
  set @delimeterIndex = charindex(@delimiter, @inputValue)       
  if @delimeterIndex > 0       
    set @tempValue = left(@inputValue, @delimeterIndex - 1)       
  else       
      set @tempValue = @inputValue       

  if(len(@tempValue)>0)  
  begin
    insert 
    into    @results 
    select  @tempValue
  end

  set @inputValue = right(@inputValue, len(@inputValue) - @delimeterIndex)       

end   

return       
end 
```

之后，您可以像这样调用输出：

```
if object_id('test') is not null
begin
  drop table test
end
go
create table test (
  Id varchar(max)
)

insert 
into test
          select '10031,10042'
union all select     '10064,10023,10060,10065,10003,10011,10009,10012,10027,10004,10037,10039'
union all select '10009'
union all select     '20011,10027,10032,10063,10023,10033,20060,10012,10020,10031,10011,20036,10041'

select  value
from    test
        cross apply splitValueByDelimiter(Id, ',') 
```

希望它有所帮助，尽管我仍在遍历所有内容

# jsf - 如果我使用 inputText 的 requiredMessage 属性，如何将参数发送到属性文件

> ID：12920018
> 
> 赞同：1
> 
> 时间：2012-10-16T17:11:39.423
> 
> 标签：jsf, primefaces

根据我阅读的内容，在 jsf 中，我可以使用替换资源包字符串中的参数

```
<h:outputFormat value="#{msg['message.param2']}"> 
   <f:param value="param0" /> 
   <f:param value="param1" /> 
</h:outputFormat> 
```

我的问题是我正在使用 primefaces 标签，我需要使用 的属性`requiredMessage`，`inputText`类似于：

```
<p:inputText value="#{cteYDetalleMb.cteEnCaptura.nombreComercial}" style="width: 50em" required="true" 
             requiredMessage="#{msg['validacion.datosRequeridos']}" /> 
```

我的消息`validacion.datosRequeridos`是需要一个参数，而上面的示例是不同的。我该如何解决这个问题，我尝试使用`<f:param>`但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T11:29:59.203

您最好的选择是创建一个[自定义 EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function/)，以便您最终可以如下所示：

```
<p:inputText ... requiredMessage="#{my:format(msg['validacion.datosRequeridos'], 'param0', 'param1')}" /> 
```

您还可以创建一个自定义 UI 组件，该组件扩展`<h:outputFormat>`和捕获输出并将其存储在 EL 范围内的变量中：

```
<my:outputFormat value="#{msg['message.param2']}" var="requiredMessage"> 
   <f:param value="param0" /> 
   <f:param value="param1" /> 
</my:outputFormat> 
<p:inputText ... requiredMessage="#{requiredMessage}" /> 
```

这两种方法都可以在 JSF 实用程序库[OmniFaces](http://omnifaces.org)中分别以[`of:format2()`](http://showcase.omnifaces.org/functions/Strings)和的形式[`<o:outputFormat>`](http://showcase.omnifaces.org/components/outputFormat)提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T09:43:30.107

不是最好的解决方案，但您可以使用以下行覆盖所有默认的必需消息：javax.faces.component.UIInput.REQUIRED = new required message。label:{0} 参数为 inputText 的 label 属性。

或者您可以创建一个 backingbean 方法。它从包中读取消息。

```
 <p:inputText value="#{cteYDetalleMb.cteEnCaptura.nombreComercial}" style="width: 50em" required="true" requiredMessage="#{controller.getRequiredMessage(param)}"/> 
```

您可以使用这些辅助方法从控制器读取消息。

```
public static String getMessage(String key) {
        FacesContext fc = FacesContext.getCurrentInstance();
        String mb = fc.getApplication().getMessageBundle();
        ResourceBundle resourceBundle = ResourceBundle.getBundle(mb, fc.getViewRoot().getLocale());
        return resourceBundle.getString(key);
    }

    public static String getMessage(String key, String params[]) {
        MessageFormat messageFormat = new MessageFormat(getMessage(key), FacesContext.getCurrentInstance().getViewRoot().getLocale());
        return messageFormat.format(params);
    } 
```

# android - AppWidget 中的 AnimationDrawable

> ID：12920026
> 
> 赞同：0
> 
> 时间：2012-10-16T17:12:28.273
> 
> 标签：android, android-animation, android-appwidget

我一直在尝试在我的一个应用小部件中添加 AnimationDrawable。我创建了一个看起来像这样的 xml 资源文件。它显示 LED 的图像，灯打开和关闭（因此动画是闪烁的 LED）。

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false" >
    <item
        android:drawable="@drawable/time_circuits_led_on"
        android:duration="500"/>
    <item
        android:drawable="@drawable/time_circuits_led_off"
        android:duration="500"/>

</animation-list> 
```

当我在手机上安装 AppWidget 时，我没有看到动画，并且经过一些研究发现您无法在应用小部件中为 drawable 设置动画。

几分钟后我解锁了手机，LED 闪烁，表示动画正在运行。在我的 AppWidgetProvider 中，我没有调用 AnimationDrawable#start() 方法，因此它不应该闪烁，但它确实如此。

我多次锁定和解锁它，有时LED闪烁，有时它不闪烁。如果它（有时）闪烁，也许我可以做一些事情来确保它总是闪烁。

我在运行 Android 4.1.1 的 Galaxy Nexus 上运行它。我还在 Android 2.3.3 的手机上对此进行了测试，并且 LED 从不闪烁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:10:38.517

我认为完成你想要做的事情的方法是使用 ViewFlipper，它在 RemoteViews 中受支持。不过，就电池使用而言，这看起来不太对劲。

# objective-c - @[object1,object2] 是什么意思？

> ID：12920031
> 
> 赞同：0
> 
> 时间：2012-10-16T17:12:56.573
> 
> 标签：objective-c, cocoa, nsarray, objective-c-literals

> **可能重复：**
> [@[obj1, obj2] 创建什么样的对象？](https://stackoverflow.com/questions/11759708/what-kind-of-object-does-obj1-obj2-create)

查看 Xcode 中的 Master-Detail 模板，在 App Delegate 中`SplitViewController`的视图控制器设置如下：

```
self.splitViewController.viewControllers = @[masterNavigationController, detailNavigationController]; 
```

我不知道方括号前@符号的用途是什么。这就是`NSArray`不使用时的制作方式`[NSArray arrayWithObjects:]`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:13:50.750

这是一个新的语法功能。`NSArray`它是使用给定对象创建数组 ( ) 的语法糖。

# android - 从另一个类访问我的 WebView 对象

> ID：12920032
> 
> 赞同：0
> 
> 时间：2012-10-16T17:12:57.797
> 
> 标签：android, eclipse, android-2.2-froyo

我正在创建我的网络浏览器的 Android 版本。我希望能够使用 MainActivity 类中的 WebView 对象从另一个类加载网站。基本上，我想从 MainActivity 类的 WebView 对象中的 QuickSites 类中引用的按钮加载网站。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:16:04.530

如果您在单独的活动中选择您想要的站点，您可以使用`setResult(reqCode, data)`where data is an Intent 传回一个字符串。创建一个 Intent，将 url 添加到它`putExtra("url", url)`并调用 finish()。然后，在您的主要活动中，覆盖 onActivityResult 以从 Intent 中获取 url 并将其传递给 WebView。

# java - 导出的 JAR 中的编码

> ID：12920039
> 
> 赞同：1
> 
> 时间：2012-10-16T17:13:34.907
> 
> 标签：java, eclipse, encoding, utf-8, jar

我在 Java 中编码有问题。我在 Eclipse UTF-8 中设置了编码。当我从 Eclipse 运行我的应用程序时，一切正常，但是当我导出到 jar 并通过双击运行它时，我有？？？？人物。当我从命令行运行时： java -jar app.jar 一切正常。问题在于从其他站点下载的数据（该站点是 utf8 编码的）。有什么解决办法？

**编辑：** 在所有平台上，当我从命令行运行时，defaultEncoding() 是 UTF-8。但是当我双击运行时：Mac：US-ASCII Windows：windows-1250

我已经编写了编码方法，但它仍然无法正常工作：

```
public String getPageContent(String url) throws MalformedURLException, IOException
{
    URL urlReader;
    InputStream response = null;
    BufferedReader reader;
    String pageContent = "";
    urlReader = new URL(url);
    response = urlReader.openStream();
    reader = new BufferedReader(new InputStreamReader(response));

    for (String line; (line = reader.readLine()) != null;) {
        pageContent += this.encode(line, "UTF-8");

    }   
    reader.close();
    return pageContent;        
}
public String encode(String s, String charset)
{
        try {
            byte[] b = s.getBytes(charset);
            s = new String(b, charset);
            return s;
        } catch (UnsupportedEncodingException e1) {

    // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    return s; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:55:43.397

构建 InputStreamReader 时需要指定 UTF-8 字符集。

```
reader = new BufferedReader(new InputStreamReader(response, "UTF-8")); 
```

您根本不应该在收到字符串后尝试重新编码它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:16:36.760

[设置默认的 Java 字符编码？](https://stackoverflow.com/questions/361975/setting-the-default-java-character-encoding) 这里已经是一个讨论过的线程，其中包含更多详细信息。希望这有帮助

# vb.net - 这个简单的 VB.NET 代码有效吗？

> ID：12920043
> 
> 赞同：2
> 
> 时间：2012-10-16T17:13:50.547
> 
> 标签：vb.net

所以我做了[这个](http://myscrambledmind.com/helloworlds.php)，有人提交了一个新的 VB.NET hello world 示例：

```
Module m1
Sub Main()
 Console.out.writeline("Hello World")
End Sub
End Module 
```

这是有效的 VB.NET 吗？我不懂语言，所以想检查一下。

目前在网站上的示例是：

```
Console.WriteLine ("Hello, World!") 
```

我主要质疑的是`Console.out.writeline`——这对吗？

提前致谢。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T17:16:09.337

是的，这是正确的。`Console.WriteLine`并且`Console.Out.WriteLine`是等价的。

文档[`Console.WriteLine`](http://msdn.microsoft.com/en-us/library/xf2k8ftb.aspx)说：“*将指定的字符串值，后跟当前行终止符，写入标准输出流。* ”

文档[`Console.Out`](http://msdn.microsoft.com/en-us/library/system.console.out.aspx)说：“*获取标准输出流。* ”

`Console.Out`是一个[TextWriter](http://msdn.microsoft.com/en-us/library/system.io.textwriter.aspx)，用于将文本输出到流中。文档[`TextWriter.WriteLine`](http://msdn.microsoft.com/en-us/library/7ack4zyt.aspx)说：“*将字符串后跟行终止符写入文本字符串或流。* ”

`Console.WriteLine`基本上只是`Console.Out.WriteLine`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:19:59.820

它们是等价的。尽管该`Console.Out`属性可以设置为标准输出以外的流。

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.console.out.aspx)：

> 此属性默认设置为标准输出流。可以使用该方法将此属性设置为另一个流`SetOut`。
> 
> 请注意，对`Console.Out.WriteLine`方法的调用等同于对相应`WriteLine`方法的调用。

# java - 可能的线程问题？

> ID：12920045
> 
> 赞同：1
> 
> 时间：2012-10-16T17:13:55.753
> 
> 标签：java, swt, refresh, tableviewer

我有 2 个类，一个是数据模型类，另一个是 gui 类。

类数据模型…………

获取用户选择的数据并创建一个数组列表

类gui…………

有一个使用数据模型类中的数组的 tableviewer

我的问题是当用户向数组添加更多数据时，我需要刷新 tableviewer。

我在 gui 类中创建了一个 updateTableViewer 方法。

```
public void updateTableViewer() {
  if(getViewer() != null) {
     viewer.refresh();
 { 
```

然后我在datamodel类中引用了gui类。

```
AplotBaseDialog abd = new AplotBaseDialog(null, null); 
```

然后我将方法调用添加到向数组添加更多数据的方法中

```
public void add(TCComponentItemRevision tcRevision, TCComponentDataset selectedDataset) {
  AplotDatasetData pp = new AplotDatasetData(tcRevision, selectedDataset);
  if (!dataArrayList.contains(pp)) {
     dataArrayList.add(pp);
  }
  abd.updateTableViewer();

}// end add() 
```

这不起作用。即使创建并打开了 gui 类，getViewer() 调用也始终返回 null。

所以我创建了一个布尔值；

```
Boolean hasViewerBeenCreated = false; 
```

创建 tableviewer 后，我将值设置为 true。

```
viewer = new AplotDataTableViewer(parent, SWT.BORDER|SWT.V_SCROLL|SWT.FULL_SELECTION);
  viewer.setInput(AplotDataModel.getInstance().getArrayData());
  hasViewerBeenCreated = true; 
```

然后我创建了一个返回布尔值的方法。

我从 dailog 上的按钮调用该方法。我还替换了数据模型类中的 updateTableViewer 方法调用

```
if (!dataArrayList.contains(pp)) {
     dataArrayList.add(pp);
  }
  abd.getBooleanValue();
} 
```

这是结果。

我在数据模型类中执行 add 方法 - 它返回 false - 这是有道理的，因为此时尚未创建 dailog

我执行并创建 gui 类我单击按钮并返回 true - 这是有道理的，因为查看器已创建

这是我感到困惑的地方。在 gui 仍然打开的情况下，我可以再次执行 add 方法，它仍然返回一个 false 值。然后我可以单击按钮并查看它的真实值。

我认为当创建 gui 并将布尔值设置为 true 时。我将能够在其他类中获得布尔值的当前值。

我不确定我是否没有正确引用 gui 类，或者在创建 gui 时我没有访问当前线程或 tableviewer？

我不知道这是否是线程问题，或者我只是没有从 gui 正确获取当前值。

这是我现在申请的一个大问题。每当将新数据添加到数组中时，我都必须能够刷新 tableviewer。我不能让用户每次选择新数据时都必须手动刷新表

# php - 如何在带有“IN”运算符的 Mysql 查询中使用数组值？

> ID：12920047
> 
> 赞同：1
> 
> 时间：2012-10-16T17:14:05.313
> 
> 标签：php, mysql

`$_POST['domain']`是具有 3 个或更多域值（C、C++、Java 等）的某种形式的 CHECKBOX 的结果，其值现在保存在一个数组`'$Domain'`中。现在，我需要从表中选择与用户在 CHECKBOX 中选择的域相同的元组。

我尝试使用 FOR 循环，但它给了我一个 T_FOR 无异常错误或其他东西。现在我正在尝试使用 implode 函数，它没有给出任何查询错误，但也没有显示任何查询结果！问题位于查询的 IN 运算符中。我该如何解决？

```
if(isset($_POST['domain']))
    {
        $Domain = $_POST['domain'];
        $search=$_POST['search'];

        $N = count($Domain);

        echo("<p>You selected $N domain(s):<br/><br/> ");
        for($i=0; $i < $N; $i++)
        {
            echo($Domain[$i] . "<br/> ");
        }
        echo("</p>");

        $dom_str="'".implode("', '",$Domain)."'";

    $query ="SELECT * FROM learner_object WHERE(lo_tag1='$search' || lo_tag2='$search' || lo_tag3='$search') AND 
            lo_domain IN ( ".$dom_str." ) ";

    $result =mysql_query($query)
    or die('query failed.'.mysql_error());

      while($row = mysql_fetch_array($result))
        {   
            echo  "<a href=\" ".$row['lo_url']." \" target=\"_blank\" \">"  .   $row['lo_name']  .   "</a> <br/> ";     
            echo $row['lo_desc']."<br/><br/>";      
        }
     }
     else
     echo "<p>You didn't select any Domain.</p><br/>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:18:15.770

试试这个，

```
 $dom_str=!empty($Domain)?implode(",",$Domain):'default value';

$query ="SELECT * FROM learner_object WHERE(lo_tag1='$search' || lo_tag2='$search' || lo_tag3='$search') AND 
        lo_domain IN ($dom_str)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:21:09.570

```
$dom = implode (',',$Domain);  
$query ="SELECT * FROM learner_object WHERE(lo_tag1='$search' || lo_tag2='$search' || lo_tag3='$search') AND 
        lo_domain IN ( ".$dom." ) "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:41:12.097

感谢你们帮助我。在您的帮助下，我找到了正确的代码。询问：-

```
$query ="SELECT * FROM learner_object WHERE(lo_tag1='$search' || lo_tag2='$search' || lo_tag3='$search') AND lo_domain IN ( '" . implode("','", array_map('trim', $Domain)) ."' ); "; 
```

# php - JQuery 与 PHP，使用 $.ajax

> ID：12920048
> 
> 赞同：1
> 
> 时间：2012-10-16T17:14:07.587
> 
> 标签：php, jquery, ajax, json

我一整天都在苦苦挣扎，我似乎无法正确使用 $.ajax 函数将 JSON 对象发送到 PHP 文件。我最终正确地发送了它，但现在它拒绝解码。

//JQuery 文件

```
 var user = 
        {
            "email" : document.getElementById('email1').value,
            "password" : document.getElementById('pwd1').value,
            "fname" : document.getElementById('firstname').value,
            "lname" : document.getElementById('lastname').value,
            "gender" : Validator.getGender(),
            "dob" : document.getElementById('dob').value
        }; 
       JSON.stringify(user);

            user = {json:user};

            $.ajax({
                    type: "POST",
                    url: "register.php",
                    dataType: 'json',
                    data: user,
                    success: function(result)
                    {       

                        alert("It worked :D");
                        alert(result);
                    },
                    failure: function()
                    {

                        alert('whoops');
                    }
                }); 
```

//PHP文件

```
<?php
    $json = $_REQUEST['json'];
    $json = stripslashes($json);

    $jsonobj = json_decode($json);

    $fname = $jsonobj->fname;
    $lname = $jsonobj->lname;
    $password = $jsonobj->password;
    $email = $jsonobj->email;
    $gender = $jsonobj->gender;
    $dob = $jsonobj->dob;
    echo $gender; 
```

?>

我在做一些完全愚蠢的事情吗？我现在只是呼应了性别变量，但实际上我打算使用它来将其输入数据库。

提前致谢 ：）

编辑：

如果我的 php 文件如下所示，它将如何工作：

```
 session_start();
$db = mysql_connect("localhost", "root");
if(!$db)
{
    die("DB connection failed: " . mysql_error());
}

$db_select = mysql_select_db("tinyspace", $db);
if(!$db_select)
{
    die("DB connection failed: " . mysql_error());
}

$json_string = $_REQUEST["json"];
$jsonobj = json_decode($_REQUEST["json"]);
$fname = $jsonobj -> fname;
$lname = $jsonobj -> lname;
$pwd = $jsonobj -> password;
$email = $jsonobj -> email;
$gender = $jsonobj -> gender;
$dob = $jsonobj -> dob;

$sql("INSERT INTO tinyspace.users (email, password, firstname, lastname, gender, dob) VALUES ('$email','$password','$fname', '$lname','$gender','$dob')");

if (!mysql_query($sql,$db))
{
    die('Error: ' . mysql_error());
}

mysql_close($db); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:20:25.893

问题是你正在使用`datatype =json`并试图回显结果。所以它不会工作它只会接受 json 数据

你需要删除这个

```
dataType: 'json', 
```

或像这样回声

```
$gender=array();
$gender['gender']=$jsonobj->gender
echo json_encode($gender); 
```

您也没有创建 json

用这个

```
var user = 
        {
            "email" : document.getElementById('email1').value,
            "password" : document.getElementById('pwd1').value,
            "fname" : document.getElementById('firstname').value,
            "lname" : document.getElementById('lastname').value,
            "gender" : Validator.getGender(),
            "dob" : document.getElementById('dob').value
        }; 
      var userjson= JSON.stringify(user);

            user = {json:userjson}; 
```

或者

```
data:{'json' :userjson} 
```

# web-services - 如何使用 Azure 移动服务访问数据库视图？

> ID：12920049
> 
> 赞同：0
> 
> 时间：2012-10-16T17:14:16.250
> 
> 标签：web-services, mobile, service, azure

我有一个运行连接到具有 3 个表的数据库的 Azure 移动服务，在数据库的管理门户上我可以基于它们创建视图...问题是...如何通过移动服务访问视图？Azure 移动服务可以做到这一点吗？还是我应该使用常规的网络服务？

我正在寻找的是一种访问它的方法，就像我对表格所做的那样......对于表格，我只需转到 URL 并得到一个 JSON，这就是我想要实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:32:41.027

您应该使用常规的网络服务。Windows Azure 移动服务旨在在简单的情况下非常简单，而不是一个通用工具。

不过，您可以覆盖对表的读取操作以返回其他结果。您可能希望使用[http://msdn.microsoft.com/en-us/library/jj631631.aspx](http://msdn.microsoft.com/en-us/library/jj631631.aspx)和[http://msdn.microsoft.com/en-us/library/jj613353.aspx](http://msdn.microsoft.com/en-us/library/jj613353.aspx)作为起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T21:16:51.543

如果您转到门户网站并添加您创建的视图的名称，它似乎可以工作。

例如。我的移动网络服务服务称为“PTView”

创建视图 PTView.vwMcPeople as select * from Person where surname like 'Mc%'

在 Web 服务的数据选项卡上，创建一个与视图同名的表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T13:27:54.560

使用/下载适用于 Azure 移动服务的 SDK，然后您可以使用提供的 API 访问您的数据。

不能直接从 URL 访问 Azure 移动服务。

# javascript - 如何将 javascript 应用于使用 append() 创建的元素？

> ID：12920050
> 
> 赞同：3
> 
> 时间：2012-10-16T17:14:23.883
> 
> 标签：javascript, jquery, dom, append, element

我有一个由 append() 出现的表单。表单包含需要用 js 调整的输入（自动完成功能）。就这个：

```
function addForm() {    
<!-- function code here-->
...
html += '  <table class="form">';
html += '    <tr>';
html += '      <td>Entry product</td>';
html += '      <td><input type="text" name="product" value="" /></td>';
html += '    </tr>';
html += '    <tr>';
html += '    <td>&nbsp;</td>';
html += '    <td><div id="featured-product" class="scrollbox">';
html += '    </div>';
html += '    <input type="hidden" name="featured_product" value="" /></td>';
html += '    </tr>';
html += '  </table>';

$('#form').append(html);

}

$('input[name=\'product\']').autocomplete({
<!-- function code here-->
} 
```

但是自动完成功能不能以这种方式工作。据我了解，这是因为 append(html) 不会将 html 存储到 DOM。它适用于通常的 html 表单，但我不能这样。我需要按照描述创建表单。所以问题是：

如何将 js 应用于不在 DOM 中的元素？
或者我如何使用 js 将这个元素执行到 DOM？
也许我需要使用另一个像 append() 的东西？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:19:35.263

把这段代码：

```
$('input[name=\'product\']').autocomplete({
 <!-- function code here-->
}); 
```

在附加 html 的代码之后。问题是当这个绑定被尝试时，DOM 不包含这些元素

您还可以使用该`.on`功能来应用此功能：

```
$('input[name=\'product\']').on("autocomplete",function(){
 <!-- function code here-->
}); 
```

# java - 如何检查Web服务是否可用，然后一次性连接到它？

> ID：12920054
> 
> 赞同：3
> 
> 时间：2012-10-16T17:14:29.143
> 
> 标签：java, android, web-services, soap

我想在连接到 Web 服务之前检查它是否可用，这样如果它不可用，我可以显示一个这样的对话框。我的第一次尝试是这样的：

```
public void isAvailable(){

    // first check if there is a WiFi/data connection available... then:

    URL url = new URL("URL HERE");
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setRequestProperty("Connection", "close");
    connection.setConnectTimeout(10000); // Timeout 10 seconds
    connection.connect();

    // If the web service is available
    if (connection.getResponseCode() == 200) {
        return true;
    }
    else return false;
} 
```

然后在一个单独的班级我做

```
if(...isAvailable()){
    HttpPost httpPost = new HttpPost("SAME URL HERE");
    StringEntity postEntity = new StringEntity(SOAPRequest, HTTP.UTF_8);
    postEntity.setContentType("text/xml");
    httpPost.setHeader("Content-Type", "application/soap+xml;charset=UTF-8");
    httpPost.setEntity(postEntity);

    // Get the response
    HttpClient httpclient = new DefaultHttpClient();
    BasicHttpResponse httpResponse = (BasicHttpResponse) httpclient.execute(httpPost);

    // Convert HttpResponse to InputStream for parsing
    HttpEntity responseEntity = httpResponse.getEntity();
    InputStream soapResponse = responseEntity.getContent();

    // Parse the result and do stuff with the data...
} 
```

但是，我两次连接到同一个 URL，这效率低下，可能会减慢我的代码速度。

首先，是吗？

其次，有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:15:27.073

如果超时，我会尝试连接，处理异常并显示错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:31:12.763

可能您应该考虑查看 HttpConnectionParams 类方法。

> 公共静态无效 setConnectionTimeout（HttpParams 参数，int 超时）
> 
> 设置超时，直到建立连接。零值表示不使用超时。默认值为零。
> 
> 公共静态无效 setSoTimeout（HttpParams 参数，int 超时）
> 
> 以毫秒为单位设置默认套接字超时 (SO_TIMEOUT)，即等待数据的超时。超时值为零被解释为无限超时。当方法参数中没有设置套接字超时时使用此值。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:32:24.733

如上所述，这是检查超时的方法：

```
HttpParams httpParameters = new BasicHttpParams();

// Set the timeout in milliseconds until a connection is established.
// The default value is zero, that means the timeout is not used. 
int timeoutConnection = 3000;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
// Set the default socket timeout (SO_TIMEOUT) 
// in milliseconds which is the timeout for waiting for data.
int timeoutSocket = 5000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket); 
```

然后将 HttpParameters 传递给 httpClient 的构造函数：

```
DefaultHttpClient httpClient = new DefaultHttpClient(httpParameters); 
```

# jquery - Jquery上滑问题

> ID：12920058
> 
> 赞同：0
> 
> 时间：2012-10-16T17:14:42.700
> 
> 标签：jquery, hide, slideup

所以我的脚本有效，但我遇到的问题是，当我使用 close-but 函数时，它会隐藏 div，但几秒钟后 div 会向下滑动。我是否缺少类似 if 语句的内容？谢谢你。

```
$(document).ready(function() {
    $(".cart").hover(function() {
        $(".dropcart").slideDown('slow');
     });
    $('.dropcart').mouseleave(function() {
        $('.dropcart').css({
            'opacity': '.5'
        }, setTimeout(function() {
            $('.dropcart').slideUp('slow');
        }, 3000));
         });
    $('.dropcart').mouseenter(function() {
        $('.dropcart').css({
            'opacity': '1'
        });
    });
        $('.close-but').click( function() {
    $('.dropcart').hide();
    });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:41:09.710

`hover`是`mouseenter/mouseleave`处理程序的简写（参见：[http](http://api.jquery.com/hover/) ://api.jquery.com/hover/ ）。

我倾向于不将悬停用于更复杂的交互，因为正如您所发现的，事件处理程序的工作方式存在一些怪癖。我发现将事件处理程序绑定到`hover`触发处理程序两次。相反，您应该做的是：

```
$('.cart').mouseenter( function(){
    // Your state behaviour code here..
} ).mouseleave( function(){
    // Your state behaviour code here...
} ); 
```

您可能需要考虑使用 jquery 的 livequery 插件，它改进了 DOM 元素的事件绑定/处理。因此，您的示例可以重构为如下所示：

**编辑：** 更改路径以查找包含两者的父元素`.cart`和`.dropcart`

```
$('.cart').livequery( function(){
    var obj      = $( this ).closest('.float-left'); // The cart container element
    var dropcart = obj.find('.dropcart'); // Child of .float-left
    var close    = dropcart.find('.close-but');  // Child of dropcart

    // Handle cart mouseenter event
    obj.mouseenter( function(){
        dropcart.slideDown(300);
    } );

    // Handle cart moseenter/mouseleave events
    dropcart.mouseenter( function(){
        // your behaviour here...
    } ).mouseleave( function(){
        // your behaviour here...
        // Read up on jQuery's delay() method: http://api.jquery.com/delay/
        dropcart.delay(800).slideUp(256);
    } );

    // Handle the close button
    close.click( function(){
        dropcart.hide(); // or dropcart.mouseleave(); // triggers the mouseleave event handler
    } );

} ); 
```

## 更新

我在最初的评论中没有看到小提琴，现在我理解了结构，我已经修改了上面的例子来反映（见上面的修改）。我还建议您做几件事：

1.  将 ID 或公共类添加到包含元素，例如 `class="cart-container float-left"`或`id="cart-container"`
2.  考虑到其中出现的内容，考虑将标记重构为更具语义性。（我知道有些人会争辩说，使用 JS 增强功能这样做没有什么价值，但我仍然认为这是一个好习惯）。

html 重构的一个例子是：

```
<div class="item-container right">
    <img src="http://news.worldwild.org/wp-content/uploads/2008/09/red_panda.jpg">

    <div class="cart-items">
        <h3>Cart Items: <span class="cart-items-count">10</span></h3>
        <div class="dropcart">
            <dl class="cart-items-list">
                <dt>Items:</dt>
                <dd>10</dd>
                <dt>Price:</dt>
                <dd>$5.00</dd>
            </dl>
            <a href="#" class="close" title="close">x</a>
        </div>
    </div>
</div>​ 
```

**支持CSS：**

```
.right {
    float: right;
}

.item-container > img {
    display: block;
    margin: 0 0 10px 0; padding :0; 
    border: 0;

    width: 100px; height: auto;
}

.item-container .cart-items {
    display: block;
    background: #222;
    color: #fff;
}

.cart-items {
    display: block;
    margin: 0; padding :0; 
}

.cart-items > h3 {
    cursor: pointer;
}

.cart-items-list dt {
    display: inline;
    float: left;
    clear: right;
}

.cart-items-list dd {
        text-align: right;
}

.dropcart .close {
    display: block;
    padding: 0 10px;

    font-weight: bold;
    text-align: right;

    color: #fff;
}​ 
```

您的 jQuery 脚本将类似于：

```
jQuery( function(){

    $('.item-container').livequery( function(){
        var obj      = $( this ).find('.cart-items'); // The cart container element
        var dropcart = obj.find('.dropcart'); // Child of .float-left
        var close    = dropcart.find('.close');  // Child of dropcart

        dropcart.hide();

        // Handle cart mouseenter event
        obj.mouseenter( function(){
            dropcart.slideDown(300);
        } );

        // Handle cart moseenter/mouseleave events
        dropcart.mouseenter( function(){
            // your behaviour here...
        } ).mouseleave( function(){
            // your behaviour here...
            // Read up on jQuery's delay() method: http://api.jquery.com/delay/
            dropcart.slideUp(256);
        } );

        // Handle the close button
        close.click( function(){
            dropcart.mouseleave( function(e){ return false; }); // triggers the mouseleave event handler
            dropcart.hide();
        } );

    } );

} );
​ 
```

你可以在这里看到它的实际效果：http: [//jsfiddle.net/kwbbh/2/](http://jsfiddle.net/kwbbh/2/)（forked the OPs fiddle）​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:59:51.360

我不太明白你描述的行为，但让我印象深刻的一件事是在你的鼠标离开时你正在设置一个 setTimeout。除非您清除它，否则此 setTimeout 将在 3 秒内触发。所以我确实看到发生的是，您可以将鼠标移入`.dropcart`，然后将不透明度设置为 0.5 并设置计时器。然后，如果您将鼠标移回`.dropcart`，不透明度会回到 1，但`.dropcart`在计时器触发时仍会向上滑动。如果您不断地在鼠标中进出鼠标，`.dropcart`您最终可能会设置一堆计时器，这些计时器会以看似随机的间隔触发，并且真的会扰乱您的用户体验。

您需要做的是，当您执行此操作时，`setTimeout`它会返回一个 timeoutID。您需要将其存储在一个变量中，以便`clearTimeout`在您决定取消超时时将其传递给。例如：

```
var timerID = 0;

$('.dropcart').mouseleave(function() {
    $('.dropcart').css({
        'opacity': '.5'
    });
    if (timerID)
        clearTimeout(timerID);        // stop multiple timers running at once!
    timerID = setTimeout(function() {
        $('.dropcart').slideUp('slow');
        }, 3000));
    });
$('.dropcart').mouseenter(function() {
    if (timerID)
        clearTimeout(timerID);
    $('.dropcart').css({
        'opacity': '1'
    });
}); 
```

看到这个[小提琴](http://jsfiddle.net/NyduX/4/)

# objective-c - iphone-有条件地为 IOS 6 调用 UIRefreshControl

> ID：12920059
> 
> 赞同：1
> 
> 时间：2012-10-16T17:14:45.640
> 
> 标签：objective-c, ios4, ios6

我正在尝试为 IOS 6 添加 UIRefreshControl。

```
#define SYSTEM_VERSION_LESS_THAN_OR_EQUAL_TO(v)     ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedDescending)

if(SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {
    UIRefreshControl *refresh = [[UIRefreshControl alloc] init];
    refresh.attributedTitle = [[NSAttributedString alloc] initWithString:@"Pull to Refresh"];
    [refresh addTarget:self action:@selector(refreshView:)
      forControlEvents:UIControlEventValueChanged];
    self.refreshControl = refresh;
} 
```

和

```
if (NSClassFromString(@"UIRefreshControl") != Nil) {
    UIRefreshControl *refresh = [[UIRefreshControl alloc] init];
    refresh.attributedTitle = [[NSAttributedString alloc] initWithString:@"Pull to Refresh"];
    [refresh addTarget:self action:@selector(refreshView:)
      forControlEvents:UIControlEventValueChanged];
    self.refreshControl = refresh;
} 
```

但得到错误

```
dyld: Symbol not found: _OBJC_CLASS_$_UIRefreshControl
Referenced from: /Users/office/Library/Application Support/iPhone    Simulator/4.3.2/Applications/DD532E42-77F9-471C-AA48-7F9EAE9268C6/Verizon.app/Verizon
Expected in:   /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/i PhoneSimulator4.3.sdk/System/Library/Frameworks/UIKit.framework/UIKit 
```

我正在使用 IOS 6 SDK 并在 iPhone 4.3 模拟器上运行。

当我删除代码时

```
 UIRefreshControl *refresh = [[UIRefreshControl alloc] init];
    refresh.attributedTitle = [[NSAttributedString alloc] initWithString:@"Pull to Refresh"];
    [refresh addTarget:self action:@selector(refreshView:)
      forControlEvents:UIControlEventValueChanged];
    self.refreshControl = refresh; 
```

一切都适用于 iPhone 4.3 模拟器。有趣的代码里面

```
if(SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {  } 
```

在 iPhone 4.3 模拟器上永远不会被调用，不知道为什么会出错。请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:22:04.663

没关系，代码不会被调用——当应用程序加载时，动态链接器需要解析应用程序二进制文件链接到的动态库中的所有符号。在 iOS 4.3 中，`UIRefreshControl`该类未实现，因此在运行此操作系统（以及任何早于 iOS 6 的操作系统）的设备上，操作系统本身（好吧，而不是其 UIKit 框架）不包含该类和与其对应的符号，因此应用程序甚至无法启动，即使它不使用仅适用于 iOS6 的代码。

您还需要知道预处理器宏是在*编译时评估的，*如果您的目标是 iOS 6，则有条件编译的代码会被编译，无论您*运行*的是哪个版本的 iOS，系统都会尝试执行该程序上。

解决方案：不使用条件编译，而是使用反射和自省来找出类在运行时是否可用：

```
Class UIRefreshControl_Class;
if ((UIRefreshControl_Class = objc_getClass("UIRefreshControl")) != Nil) {
    // class available
    id control = [[UIRefreshControl_class alloc] init];
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:24:31.270

绝对选择第二种风格，即：

```
if (NSClassFromString(@"UIRefreshControl") != nil) {
    ...
} 
```

至于您遇到的错误，您应该可以通过在项目的“构建阶段”设置的“将二进制文件与库链接”部分中将 UIKit 设置为“可选”来停止该错误。

它应该将它标记为对您来说是可选的，因为它注意到您正在使用一个仅在 iOS 6 中可用的类，但由于某种原因看起来它不适用于您的情况。

# mysql - 一列中是否有多个值？

> ID：12920061
> 
> 赞同：1
> 
> 时间：2012-10-16T17:15:01.373
> 
> 标签：mysql

> **可能重复：**
> [何时在数据库列中使用逗号分隔值？](https://stackoverflow.com/questions/7518566/when-to-use-comma-separated-values-in-a-db-column)

我想创建类似的文章脚本。我的想法是文章将通过 ID 相似。例如，如果文章的 ID = 1，则相似文章的相似 ID = 1

表格示例：

```
ID     Similar_ID   
1          0
2          0
3          1
4          1 
```

ID 为 1 的文章将有 2 篇 ID 为 3 和 4 的额外文章。

如果有多个相似的 ID，如何建模表？

例子：

```
ID     Similar_ID   
1          0
2          0
3          1,2
4          1,2,3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:24:26.993

您应该使用两张表，上面的原始一张，以及一个单独的一张，每条类似文章有一行。

所以你的原始表格是：文章

```
 ID     Content   
    1          bla 
    2          blah 
    3          etc.
    4          whatever 
```

你的另一张桌子和上面一样：ArticlesSimilar

```
 ID     Similar_ID   
    3          1
    3          2
    4          1
    4          2
    4          3 
```

您将确保 ID-Similar_ID 组合是唯一的。

# jquery - 试图“固定”一个可排序的 jQuery , 意外行为

> ID：12920064
> 
> 赞同：3
> 
> 时间：2012-10-16T17:15:25.373
> 
> 标签：jquery, jquery-ui, web

## 故事

所以我试图创建一个可排序的列表，其中每个项目都可以在按钮按下或其他事件上“固定”，导致固定的项目变得不可拖动并保持其在列表中的位置。到目前为止，我已经到了为可排序元素添加一个类的地步：

```
$(".test").click(function(){
  //alert($(event.target).parent("li").text());        
  $(event.target).parent("li").toggleClass("static");
}); 
```

通过将此单击功能绑定到每个 li.free 中的 a.test 元素来工作

```
<ul id="sortable">
<li class="free">oranges<a href="#" class="test">click</a></li>
<li class="free">apples<a href="#" class="test">click</a></li>
<li class="free">bananas<a href="#" class="test">click</a></li>
<li class="free">pineapples<a href="#" class="test">click</a></li>
<li class="free">grapes<a href="#" class="test">click</a></li>
<li class="free">pears<a href="#" class="test">click</a></li>
<li class="free">mango<a href="#" class="test">click</a></li>
</ul>​ 
```

这将切换 li 中的“.static”类，它应该允许可排序函数忽略标记为此类的项目。我使用函数中的更改处理程序来解释更改：

```
$("#sortable").sortable({
  items: ':not(.static)',
  start: function(){
    $('.static', this).each(function(){
        var $this = $(this);
        $this.data('pos', $this.index());
    });
  },
  change: function(){
    $sortable = $(this);
    $statics = $('.static', this).detach();
    $helper = $('<li></li>').prependTo(this);
    $statics.each(function(){
        var $this = $(this);
        var target = $this.data('pos');

        $this.insertAfter($('li', $sortable).eq(target));
    });
    $helper.remove();
  }
}).disableSelection(); 
```

## 问题

所以我遇到的问题是，虽然它最初确实按预期运行，但可以通过将活动的可排序元素移动到它们上方来移动固定元素，从而将固定元素向下推到列表中。任何想法都会受到欢迎。

## jsFiddle

单击[此处](http://jsfiddle.net/miguet/PQrqS/136/)查看 jsFiddle 示例。

## 编辑！！！

所以在进一步的测试中我发现了另一个问题......这个脚本似乎根本无法在 Firefox 中运行。我还有其他工作要做，所以我会在几个小时后回来查看，感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T23:28:14.990

只需在 click 事件上传递 event 参数，如下所示：

```
$(".test").click(function(event){
        //alert($(event.target).parent("li").text());        
        $(event.target).parent("li").toggleClass("static");
    }); 
```

我觉得这就是

# visual-c++ - 显示按下的键并使用“q”退出程序的无响应程序

> ID：12920066
> 
> 赞同：1
> 
> 时间：2012-10-16T17:15:26.863
> 
> 标签：visual-c++

我正在关注如何使用 C++ 制作一个非常简单的游戏的教程视频。我在教程的早期阶段，直到现在我还没有遇到任何问题。根据我运行程序时的视频，它应该显示我按下的任何键“这是你按下的：（按下的键在这里）”。此外，当我按 Q 键时它应该退出程序。在视频上它工作正常，但遗憾的是在我的屏幕上它只是一个空白的 DOS 提示符，没有任何响应。任何人都可以看看我到目前为止得到了什么，看看是否有办法解决这个问题。同样，我是新来的，所以任何帮助都将不胜感激。也许缺少标题或其他什么...

**游戏.cpp**

```
#include <iostream>    //Include this and namespace in all files.
using namespace std;

#include "game.h"
#include <conio.h>

bool Game::run(void)
{
char key = ' ';

while (key != 'q')
{
    while (!getInput(&key))
    {
    }

    cout << "Here's what you pressed: " << key << endl;
}

cout << "End of the game" << endl;
return true;
}

bool Game::getInput(char *c)
{
if (kbhit())
{
    *c = getch();
}

return false;
} 
```

**游戏.h**

```
#ifndef GAME_H //Make sure this accompanies #endif.
#define GAME_H

class Game
{
public:
bool run (void);

protected:
bool getInput (char *c);
void timerUpdate (void);
};

#endif //Make sure this accompanies #ifndef. 
```

**主文件**

```
#include "game.h"

int main ()
{
Game gameHeart;

gameHeart.run();

return 0;
//system("pause");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:22:10.277

我怀疑 kbhit 方法返回 false 并且永远不会提示您输入键。您可以通过注释掉该行来轻松测试这一点，以便保证调用 getch()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:36:01.280

`Game.getInput`总是返回，`false`所以`Game.run`会无休止地要求键盘输入。这是修复。

```
bool Game::getInput(char *c)
{
    if (kbhit())
    {
        *c = getch();
        return true;
    }
    return false;
} 
```

# javascript - 需要帮助来添加/修改我的脚本以包含一些使用 jquery 和 css 的旋转

> ID：12920071
> 
> 赞同：14
> 
> 时间：2012-10-16T17:15:53.407
> 
> 标签：javascript, jquery, html, css

> 这是小提琴：
> 
> [http://jsfiddle.net/7txt3/29/](http://jsfiddle.net/7txt3/29/)

当用户单击播放按钮时，我想让记录上的记录针像您在下图中看到的那样旋转到记录上（见小提琴）

针的位置不一定是最终的，我可能希望它位于右上角。（我已经包含了所需的图像和底部的 css）

![记录](../Images/5a1d2bb5d577bb06fc03467f09f9affe.png)

现在，如果您单击播放（请参阅小提琴，将鼠标悬停在其中一个唱片封面上，单击播放），唱片针从左侧进入，然后如果您单击同一唱片上的停止，它会回到左侧。如果您在停止播放之前单击另一条记录的播放，它只会停留在同一位置。

我希望它像下面的图像一样，它始终显示但不在记录中，除非您单击播放按钮然后它会旋转。然后，如果您在另一张唱片正在播放时单击另一张唱片上的播放，它只会像它的变化一样移动/移动。然后，当然，如果您单击停止，它就会消失。

![我想要的唱片针图案](../Images/07cdacf4e4b990574615936d93e2038d.png)

这是我当前的脚本：

```
$(function(){
var station = $('.player-station'),
    record = $('.record2:first'),
    playBtns = $('.play'),
    info = $('.nprecinfo');
var isPlaying = false;

playBtns.click(function()
{
    var btn = $(this);
    if(btn.text() == 'STOP')
    {
        btn.text('PLAY');
        record.css({'-webkit-animation-play-state': 'paused',
                    '-moz-animation-play-state': 'paused'});

        $('#needle').show().animate({"left": "-=120px"}, "slow");
        isPlaying = false;     

        return;
    };

    playBtns.text('PLAY');
    var album = btn.closest('.album');
    station.text(album.find('h3').text());
    info.text(album.find('.recordinfo').text());
    record.css({'-webkit-animation-play-state': 'running',
                '-moz-animation-play-state': 'running'});
    if (isPlaying == false)
    {
    $('#needle').show().animate({"left": "+=120px"}, "slow");
    isPlaying = true;
    }

     $('#lrvinyl').css("background-image","url("+btn.attr('rel')+")");
     $('#lrvinyl').hide().fadeIn();

    btn.text('STOP');
});
}); 
```

这是记录针的当前css：

```
#needle {
background-image:url(http://benlevywebdesign.com/somafm/images/recordneedle2.png);
background-repeat: no-repeat;
width:220px;
height:220px;
position:absolute;
left:-115px;
top:185px;
z-index:10;
overflow:hidden;
} 
```

> 如果你想把针放在右上角，这里是在小提琴中使用的图像和 css。您可能需要`(.record2)`稍微移动记录，因此只需将 css 更改为`left:-4px;`

```
#needle {
background-image:url(http://benlevywebdesign.com/somafm/images/recordneedle4.png);
background-repeat: no-repeat;
width:220px;
height:220px;
position:absolute;
left:205px;
top:10px;
z-index:10;
overflow:hidden;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T17:37:33.370

+1详细问题！:)

您已经依赖 css3 来制作旋转圆盘，并且由于 css 转换非常可行，因此您需要对 javascript 做的就是添加/删除一个类。

演示：http: [//jsfiddle.net/7txt3/31/](http://jsfiddle.net/7txt3/31/)

这基本上是我添加的（加上一些供应商前缀）

*css*

```
#needle
    transition: all .2s ease;
}
#needle.playing {
    transform: rotate(-10deg);
} 
```

*jQuery*

由`.animate(...)`to`.removeClass()`和`.addClass()`调用。

我还稍微更改了#needle css，以便从针手的左侧旋转，但您可以查看[https://developer.mozilla.org/en-US/docs/CSS/transform-origin](https://developer.mozilla.org/en-US/docs/CSS/transform-origin)。

**编辑**

抱歉，我错过了关于在记录更改之间设置动画的部分。您可以做的一件事是删除该类，然后在延迟后将其添加回来，如下所示：http: [//jsfiddle.net/7txt3/53/](http://jsfiddle.net/7txt3/53/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T17:40:35.177

我认为这应该会产生预期的效果。

要让指针正确旋转，您需要设置变换原点。

[http://jsfiddle.net/7txt3/35/](http://jsfiddle.net/7txt3/35/)

您当然会想要修改速度/百分比。

```
 #needle {
    background-image:url(http://benlevywebdesign.com/somafm/images/recordneedle2.png);
    background-repeat: no-repeat;
    width:220px;
    height:220px;
    position:absolute;
    top:185px;
    z-index:10;
    overflow:hidden;
}

#needle.playing {
    -webkit-animation-name: needle_move;
    -webkit-animation-duration:8s;
    -webkit-animation-timing-function:linear;
    -webkit-animation-iteration-count:infinite;
    -webkit-animation-direction:normal;
    -webkit-transform-origin: 0px 10px;
    -webkit-transform: rotate(0deg);
    -webkit-transition: all .2s;
       -moz-transition: all .2s;
            transition: all .2s;
}

@-webkit-keyframes needle_move {
    0% {
       -webkit-transform: rotate(0deg);
    }
    50% {
       -webkit-transform: rotate(-15deg);
    }
    70% {
       -webkit-transform: rotate(-15deg);
    }
    0% {
       -webkit-transform: rotate(0deg);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T18:30:55.740

这是一个使用 CANVAS 获得问题中想要的针动画的演示。

[http://jsfiddle.net/7txt3/46/](http://jsfiddle.net/7txt3/46/)

由于供应商前缀垃圾邮件 CSS3 和缺乏对旋转点的浏览器支持。我认为使用 CANVAS 会更干净一些。

# c# - 如何确定从客户端到服务器（Socket）的文件传输（数据）结束

> ID：12920074
> 
> 赞同：1
> 
> 时间：2012-10-16T17:16:01.480
> 
> 标签：c#, sockets, client-server

简单情况：

Socket 上的客户端将格式的文件（数据）的片段（例如，256 字节）发送`byte []`到服务器。服务器异步接收数据。如何确定文件（数据）何时传输完毕？（服务器端）

这是服务器端负责接收数据的代码

```
public static void ReadCallback(IAsyncResult ar)
{
        String content = String.Empty;

        // Retrieve the state object and the handler socket
        // from the asynchronous state object.
        StateObject state = (StateObject)ar.AsyncState;
        Socket handler = state.workSocket;

        // Read data from the client socket. 
        int bytesRead = handler.EndReceive(ar);

        if (bytesRead > 0)
        {

            BinaryWriter writer = new BinaryWriter(File.Open(@"D:\test.png", FileMode.Append));

            writer.Write(state.buffer, 0, bytesRead);
            writer.Close();

            // All the data has been read from the 
            // client. Display it on the console.
            Console.WriteLine("Read {0} bytes from socket!",
                bytesRead);

            handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
                new AsyncCallback(ReadCallback), state);
        }
} 
```

有没有一种方法可以进行以下操作？

```
if (bytesRead > 0)
{

     ....
     if(state.buffer!=end of receive)
     {
     handler.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
         new AsyncCallback(ReadCallback), state);
     }

} 
```

或者，我可能会尝试向这个`byte[]`对象添加一些信息（例如，一些带有标签的字符串`<EOF>`），但我必须在每个步骤中分析这些信息。我可以更简单地做这个检查吗？如何做？或者使用其他方式...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:41:08.473

唯一的方法是在每条消息前发送一个标头（特定大小）。因此，每条消息都应该由标题和正文组成。数据流应如下所示：

[HEADER][BODY][HEADER][SOME BIGGER BODY][HEADER][SOME EXTRA BIG BODY]

正如我所说，标头应该具有特定的大小，并且应该包含一些自定义服务字段，包括消息正文的大小（以字节为单位）。在您的情况下，标头只能包含正文大小，即 int 值（4 个字节）。接收过程应如下所示：

1.  接收 4 个字节（头）；
2.  从标题中检索正文大小（只需将标题转换为 int）；
3.  接收header中指定的字节数（即接收消息体）；
4.  处理消息体；
5.  转到 1。

我知道，这对您来说可能看起来很复杂，但这是常见的方法。但是您可以使用[Rx library](http://msdn.microsoft.com/en-us/data/gg577609.aspx)来简化代码。在为 socket 实现了一些扩展方法之后（WhenReadExact，实现可以很容易地在 Internet 上找到，例如[这里](http://social.msdn.microsoft.com/Forums/en/rx/thread/5c62e690-2c8d-4f32-8ec4-5e9b5ea6d2a0)），代码将如下所示：

```
var whenFileReceived = from header in socket.WhenReadExact(4)
                       let bodySize = BitConverter.ToInt32(header)
                       from body in socket.WhenReadExact(bodySize)
                       select body;

whenFileReceived.Subscribe(
    file =>
    {
        // Handle file here
    }); 
```

# php - PHP Lambda 函数

> ID：12920077
> 
> 赞同：0
> 
> 时间：2012-10-16T17:16:05.753
> 
> 标签：php, lambda, anonymous-function

嘿伙计们，我以某种方式搞砸了我的 Lambda，似乎我的匿名函数没有从上面获取变量，

进入的一些变量是

```
print_r($cacheTypes); 
print_r($servers); 

Array
(
    [concreter] => on
    [config] => on
)
Array
(
    [0] => dev-www.domain.com
) 
```

功能是

```
$urls = array_walk($servers, 
    create_function('&$n', 
        '$n = "http://{$server}/".($vcpParam 
            ? "flush-file-cache" 
            : "flushFileCache.php"
        )."?tags=".implode("-", array_keys($cacheTypes));'
    )
); 
```

错误是

```
Warning: array_keys() expects parameter 1 to be array, null given
Warning: implode() [<a href='function.implode'>function.implode</a>]: Invalid arguments passed 
```

非常感谢帮助。我很肯定它没有识别我输入的变量，但我不知道为什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T17:19:38.767

您可以使用

```
$urls = array_map(function ($var) use($cacheTypes, $vcpParam) {
    return "http://{$var}/" . ($vcpParam ? "flush-file-cache" : "flushFileCache.php") . "?tags=" . implode("-", array_keys($cacheTypes));
}, $servers); 
```

# python - Python - 在打印前按级别对日志消息进行排序

> ID：12920083
> 
> 赞同：1
> 
> 时间：2012-10-16T17:16:30.107
> 
> 标签：python, logging

假设我的 Python 脚本中有这样的日志记录设置：

```
import logging

logging.basicConfig(level=logging.DEBUG, stream=sys.stdout,
                    format='%(asctime)s %(levelname)s %(message)s',
                    datefmt='%a, %d %b %Y %H:%M:%S')
logging.info('info')
logging.error('error...')
logging.debug('debug...') 
```

有没有办法让它等待打印到标准输出，直到脚本完成运行并在打印前按级别对日志消息进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:29:46.637

从表面上看，传递给的对象`stream`只需要一个`write`方法。这意味着您可以创建一个类似列表的对象，该对象在`write`被调用时附加数据——然后您可以在打印之前对类似列表的对象进行简单的排序。

```
import logging

class LogList(list):
   def write(self,data):
       self.append(data)

LL = LogList()
logging.basicConfig(stream = LL,level=logging.DEBUG)
logging.debug('This message should go to the log file')
logging.info('So should this')
logging.error('Wow, this is bad')
logging.warning('And this, too')
logging.debug('foobar')
logging.warning('baz')

for line in sorted(LL):
   print line[:-1] 
```

当然，您可能需要使您的排序键更多一点以选择不同的级别。就像是：

```
levels = {'DEBUG':0,'INFO':1,'WARNING':2,'ERROR':3}
LL.sort(key = lambda x: levels[x.split(':')[0]]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T17:18:44.853

这很 hack-y，但是您可以登录到一个`StringIO`对象，拆分行，对它们进行排序，然后将结果写入文件。

```
import logging
import cStringIO as StringIO

logStrObj = StringIO.StringIO()

logging.basicConfig(level=logging.DEBUG, stream=logStrObj,
                    format='%(asctime)s %(levelname)s %(message)s',
                    datefmt='%a, %d %b %Y %H:%M:%S')

logging.info('info')
logging.error('error...')
logging.info('info 2')
logging.debug('debug...')

# sort the contents of logStrObj
logList = logStrObj.getvalue().split('\n')
infoLogList = []
debugLogList = []
warningLogList = []
errorLogList = []
criticalLogList = []
for log in logList:
    if 'INFO' in log:
        infoLogList.append(log)
    elif 'DEBUG' in log:
        debugLogList.append(log)
    elif 'WARNING' in log:
        warningLogList.append(log)
    elif 'ERROR' in log:
        errorLogList.append(log)
    elif 'CRITICAL' in log:
        criticalLogList.append(log)
logList = infoLogList + debugLogList + warningLogList + errorLogList + criticalLogList

# write to a file (or print or whatever you want)
for line in logList:
    print line 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T19:21:19.710

这是一种不涉及事后排序的方法（因此效率更高）。它使用[此问题](https://stackoverflow.com/questions/1383254/logging-streamhandler-and-standard-streams)中的单级过滤器，并为每种类型的错误使用单独的处理程序。这样，日志肯定是按类型组织的，仅仅检查字符串确定日志类型不会有任何问题。

```
import logging
import cStringIO as StringIO

class SingleLevelFilter(logging.Filter):
    '''This single level logging filter is from https://stackoverflow.com/a/1383365/1460235'''
    def __init__(self, passlevel, reject):
        self.passlevel = passlevel
        self.reject = reject

    def filter(self, record):
        if self.reject:
            return (record.levelno != self.passlevel)
        else:
            return (record.levelno == self.passlevel)

# Use this formatter and logLevel in place of setting the global ones
formatter = logging.Formatter(fmt='%(asctime)s %(levelname)s %(message)s',
                    datefmt='%a, %d %b %Y %H:%M:%S')
globalLogLevel = logging.INFO

# build handlers/ StringIO logs for each type
rootLogger = logging.getLogger()
rootLogger.setLevel(globalLogLevel)
logStrObjList = []
handlers = []
i = 0
for logLevel in [logging.INFO, logging.DEBUG, logging.WARNING, logging.ERROR, logging.CRITICAL]:
    logStrObjList.append(StringIO.StringIO())
    handlers.append(logging.StreamHandler(logStrObjList[i]))
    handlers[i].addFilter(SingleLevelFilter(logLevel, False))
    handlers[i].setFormatter(formatter)
    handlers[i].setLevel(globalLogLevel)
    rootLogger.addHandler(handlers[i])
    i += 1

logging.critical('bad news bears')
logging.info('info')
logging.error('error...')
logging.info('info 2')
logging.debug('debug...')
logging.error('another errooo') 
```

# javascript - 使用 jQuery 为表格行的背景颜色设置动画

> ID：12920087
> 
> 赞同：1
> 
> 时间：2012-10-16T17:16:42.283
> 
> 标签：javascript, jquery, jquery-ui, html-table, jquery-animate

这是我的[代码](http://jsfiddle.net/Mils/yR6jc/144/)。

Javascript：

```
var table = document.getElementById("Table-1");
var rowCount = table.rows.length;

for(var i=0;i<6;i++) {

row = table.insertRow(rowCount);
cell1 = row.insertCell(0);
cell1.name = "animate";
cell1.id = i ;
var content = document.createElement("output");                
content.innerHTML = i ;
cell1.appendChild(content);
rowCount++;

  // if (i%2 == 0) {
       setInterval(function() {
           $(input[name="animate"]).animate( { backgroundColor: '#f08080' }, 'slow')
           .animate( { backgroundColor: 'red' }, 'slow'); 
                 }, 1000);
   // }

}​ 
```

HTML：

```
<table id="Table-1" border="1">

                    <tr>
                        <th><center>List</center></th>
                    </tr>
</table> 
```

​</p>

我用javascript构建了我的表，我想每秒为几行设置动画，但它不适用于所有行。但是，当我为特定行设置动画时它可以工作。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:24:23.257

您的脚本中有几个问题：

*   您创建`output`元素而不是`input`
*   您命名`td`，但稍后您`input`在选择器中引用
*   您在选择器中缺少撇号
*   您无缘无故地在循环中启动多个动画
*   您将香草 javascript 与 jquery 混合（这只是化妆品）

将选择器更改为：

```
setInterval(function() {
    $('table td input').animate({
        backgroundColor: '#f08080'
    }, 'slow').animate({
        backgroundColor: 'red'
    }, 'slow');
}, 1000); 
```

请参阅更新[的 FIDDLE](http://jsfiddle.net/yR6jc/149/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:29:33.270

相同的 HTML，格式更好：

```
<table id="Table-1" border="1">                   
    <tr>
        <th><center>List</center></th>
    </tr>
</table> ​ 
```

工作 JavaScript：

```
var table = document.getElementById("Table-1");

for(var i=0;i<6;i++) {   
    var row = document.createElement('tr');
    var cell = document.createElement('td');
    cell.className = 'animate';
    cell.id = i;
    cell.innerHTML = i;
    row.appendChild(cell);
    table.appendChild(row);     

    setInterval(function() {
       $('td.animate').animate( { backgroundColor: '#f08080' }, 'slow')
       .animate( { backgroundColor: 'red' }, 'slow');
    }, 1000);
}​ 
```

在行动：http: [//jsfiddle.net/yR6jc/151/](http://jsfiddle.net/yR6jc/151/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:23:43.777

您应该考虑使用 CSS3 动画，不需要 jQuery。

很简单，定义动画：

```
@keyframes back-animation
{
from {background: white;}
to {background: red;}
} 
```

并将其应用于元素，在您的情况下只是您想要的列中的或类

```
#Table-1{
   width:200px;
   text-align:center;
   background:red;
   animation:back-animation 2s linear 1s infinite alternate;
} 
```

这是带有所需前缀的 JS Fiddle。

[http://jsfiddle.net/yR6jc/156/](http://jsfiddle.net/yR6jc/156/)

ps：这在 Internet Explorer 上不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T17:45:21.843

我认为最好的解决方案（我的代码）在这个[小提琴中](http://jsfiddle.net/Mils/yR6jc/152/)

# jquery - 使用带有列跨度的 jQuery Tablesorter

> ID：12920088
> 
> 赞同：3
> 
> 时间：2012-10-16T17:16:42.673
> 
> 标签：jquery, html-table, tablesorter

我正在使用 jQuery tablesorter 插件对包含 14 列的表进行排序。但是，每隔一段时间我需要插入一个跨越所有 14 列的行。但这似乎破坏了排序功能（只有第一列排序，所有其他列都被破坏了）。

JavaScript 错误表明 jquery.tablesorter.js 在此返回语句上失败：

```
function getCachedSortType(parsers,i) {
    return parsers[i].type;
}; 
```

有谁知道如何让排序忽略一行？

这是我当前的代码（我不是为了简化而对前两列进行排序）：

```
$("#myTableId").tablesorter({
    textExtraction: function(node){
        var cellValue = $(node).html();
        return (cellValue == null ? "" : cellValue);
    },
    headers: {
        0: {sorter:'text'},
        1: {sorter:'text'},
        2: {sorter: false},
        3: {sorter: false},
        4: {sorter: false},
        5: {sorter: false},
        6: {sorter: false},
        7: {sorter: false},
        8: {sorter: false},
        9: {sorter: false},
        10: {sorter: false},
        11: {sorter: false},
        12: {sorter: false},
        13: {sorter: false}
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:52:34.453

该插件有一个插件：

[https://github.com/ascii-soup/Tablesorter-Static-Row-Plugin](https://github.com/ascii-soup/Tablesorter-Static-Row-Plugin)

另一种方法是使用 tablesorter 插件中的`sortStart`and`sortEnd`绑定，您有一个函数可以在排序之前删除跨行的列，以及一个在排序之后将它们添加回的函数。上面的插件不适用于跨越所有列的行，因此需要将两者结合起来。

这是一种方法 - 暂时删除 colspan 并在排序之前添加列并在排序之后撤消更改（假设跨越所有列的行具有 class `fullSpan`）：

```
$("#myTableId").bind("sortStart",function() { 
        var colCount = getColCount();
        $('tbody .fullSpan').each(function() {
            $(this).removeAttr('colspan');
            for (var i= 0; i < colCount; i++) {
                 $(this).append('<td class="temptd"></td>');
            }
        }); 
}).bind("sortEnd",function() { 
        var colCount = getColCount();
        $('.temptd').remove();
        $('tbody .fullSpan').each(function() {
                 $(this).attr('colspan', colCount);
        });
}); 
```

如果需要，您可以将其与静态行插件结合使用（添加小部件和`static`类）。

看看这个 jsfiddle：http: [//jsfiddle.net/DrZgM/20/](http://jsfiddle.net/DrZgM/20/)

PS 静态行插件与最新的 JQuery 有一个错误 - 已嵌入到上面的 JSfiddle 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T09:40:26.073

此问题已在 2.3 或更高版本中修复。看看[这个描述](http://mottie.github.io/tablesorter/docs/example-header-column-span.html)

# c# - GridViewRow FindControl 查询 C#

> ID：12920096
> 
> 赞同：1
> 
> 时间：2012-10-16T17:17:21.197
> 
> 标签：c#, .net, gridview, gridviewrow

我正在构建一个简单的 C# Web 应用程序，它将充当资源的在线数据库。

在我的表中，我有一个类别和作者列。

当我单击表格中的类别值时，表格将刷新，仅显示选定的类别。

为此，我使用了以下代码：

```
GridViewRow clickedRow = ((LinkButton)sender).NamingContainer as GridViewRow;

Label category = (Label)clickedRow.FindControl("lbl_category");

String selectedCategory = category.Text.ToString();

string query = 
("SELECT * FROM main WHERE category='" + selectedCategory + "' ORDER BY ID ASC"); 
```

这适用于我第一次单击类别/作者。但是在表格刷新后，选择另一个类别或作者，表格就会显示错误的记录。

我该如何解决这个问题？

[您可以在此处](http://rd.enfieldsdachurch.com/db/sample/)查看该页面：尝试单击类别`'Health'`，然后单击`'Puvent, Kevin'`。结果与预期的不同。我认为

一旦你看到页面，这个问题可能会更有意义:)

编辑 - 这是 gridview 绑定代码：

```
<asp:TemplateField HeaderText="Category" ItemStyle-Width="15%">
<ItemTemplate>
<asp:Label ID="lbl_category" Text='<%# Bind("category")%>' runat="server" style="display:none;"></asp:Label>
<asp:LinkButton ID="lbl_linkCategory" Text='<%# Bind("category")%>' runat="server" OnClick="linkCategory" CommandArgument='<%# Bind("category")%>' />
</ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:47:19.067

当您单击一个类别时，这会更改下面的控件。控制编号发生变化。您引用了该数字，但它是错误的，它必须是常量并且是“主”表的 ID。您将必须找到一种方法将相应的编号正确分配给 selectedCategory。您可以通过向类别标签添加属性来做到这一点，或者检查已单击的内容。像 Finance => selectedCategory = 2，Health = 3，Family = 4 等。希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T20:26:38.517

使用`if (!IsPostBack)`in`Page_Load`似乎解决了问题:)

# mirth - 设置 Mirth 目的地以将转换数据作为自定义 ACK 发送回

> ID：12920099
> 
> 赞同：3
> 
> 时间：2012-10-16T17:17:40.193
> 
> 标签：mirth, mirth-connect

我有一个设置为 Web 服务侦听器的 Mirth 通道，它接收一个 ID，构建一个 HL7 查询消息并发送此查询并最终返回一个 HL7 响应。

*   频道名称：查询频道
*   源连接器类型：Web 服务侦听器
*   目标连接器名称：QueryToVista
*   目标连接器类型：LLP 发件人。

这是我从查询中收到的典型 HL7 响应如下：

```
MSH|~|\&|VAFC RECV|FACILITY|VAFC TRIGGER||20121011141136-0800||ADR~A19|58269|D|2.4|||NE|NE|USA
MSA|AA|1234|
QRD|20121011051137|R|I|500000001|||1^ICN|***500000001***|ICN|NI|
EVN|A1|20121004064809-0800||A1|0^^^^^^^^USVHA\\0363^L^^^NI^TEST FACILITY ID\050\L|20121004064809-0800|050
PID|1|500000001V075322|500000001V075322^^^USVHA\\0363^NI^VA FACILITY ID\050\L~123123123^^^USSSA\\0363^SS^TEST FACILITY ID\050\L~9^^^USVHA\\0363^PI^VA FACILITY ID\050\L||JOHN^DOE^^^^^L|""|19800502|M||""|""^""^""^""^""^^P^""^""~^^""^""^^^N|""|""|""||S|""||123123123|||""|""||||||""||
PD1|||SOFTWARE SERVICE^D^050
ZPD|1||||||||||||||||"" 
```

如果我将 Source 的 Response From 参数设置为**QueryToVista ，我可以获得以上所有内容**

但是，我只想从上述消息中返回值***500000001 。***我试图在 QueryChanel 目的地中使用转换器但没有成功。

***更新：***

我尝试在同一通道中的 QueryToVista 连接器之后添加一个 javascriptwriter 连接器，如下所示：

```
 var destination = responseMap.get('QueryToVista');
   var responseMessage = destination.getMessage();

   //Fails with following error: TypeError: Cannot read property "QRD.4" from undefined
   var customack = ResponseFactory.getSuccessResponse(responseMessage['QRD']['QRD.4']  ['QRD.4.1'].toString())**

   //work but send the whole HL7 message
   var customack = ResponseFactory.getSuccessResponse(responseMessage.toString())**

   responseMap.put('Barcode', customack); 
```

我似乎根本无法使用正常的转换来检索元素。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:28:21.030

您走在正确的轨道上，但您的更新说明了几个问题。但是，您使用两个目的地的基本方法是有效的，只要在“摘要”选项卡上选中“同步通道”即可。

## 第一期

在您的示例中，您要解析的 HL7 响应采用管道分隔的 HL7 形式。为了使用 E4X 表示法访问元素（例如 responseMessage['QRD']['QRD.4']['QRD.4.1']），您必须首先将其转换为 E4X XML 对象。这可以分两步完成。

*   将管道分隔的 HL7 字符串转换为 XML 字符串。
*   将 XML 字符串转换为 E4X XML 对象

在 JavaScript Writer 的 Javascript 转换器中（不是 Javascript Writer 脚本本身）

```
var response = responseMap.get("QueryToVista");
var responseStatus = response.getStatus();

// Get's the pipe delimited HL7 string
var responseMessageString = response.getMessage();

if (responseStatus == "SUCCESS")
{
    // converts the pipe delimited HL7 string into an XML string
    // note: the SerializeFactory object is available for use in transformer
    //       scripts, but not in the Javascript destination script itself
    var responseMessageXMLString = SerializerFactory.getHL7Serializer(false,false,true).toXML(responseMessageString);

    // convert the XML string into an E4X XML object
    var responseMessageXMLE4X = new XML(responseMessageXMLString);

    // grab the value you want
    var ack_msg = responseMessageXMLE4X['QRD']['QRD.4']['QRD.4.1'].toString();

    channelMap.put('ack_msg', ack_msg)
}
else
{
    // responseStatus probably == "FAILURE" but I'm not sure of the full range of possibilities
    // take whatever failure action you feel is appropriate
} 
```

## 编辑* ***

我不相信存在问题 2。在查看了您自己的方法之后，我进一步进行了一些操作，并且相信我已经确认您的方法对于生成 SOAP 响应确实是正确的。我正在编辑此部分以反映仍然有效的更简单的代码。

在 Javascript 编写器脚本中

```
var barcode = channelMap.get('ack_msg');
var mirthResponse = ResponseFactory.getSuccessResponse(barcode);
responseMap.put('Barcode', mirthResponse); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:43:46.177

非常感谢csj，

我玩弄了我的工作并查看了您的解决方案，您指出了我的瓶颈问题以及 XML 部分，我没有意识到您必须按照新的 XML 将其转换为 XML，而您已经调用 toXML 函数:)

这是我的脚本，虽然很基本，但我认为我会将其发布给任何发现它在路上有用的人。

```
var destination = responseMap.get('QueryToVista');
var responseMessage = destination.getMessage();
var Xmsg = new XML(SerializerFactory.getHL7Serializer().toXML(responseMessage));

var xml_msg = '<?xml version="1.0" encoding="utf-8" ?>'+
              '<XML><Patient Name="'+Xmsg['PID']['PID.5']['PID.5.1']+
              '" Barcode="'+Xmsg['QRD']['QRD.8']['QRD.8.1']+'" /></XML>';

var sResp = ResponseFactory.getSuccessResponse(xml_msg)

responseMap.put('Response', sResp); 
```

# android - 库项目 Dx UNEXPECTED TOP-LEVEL EXCEPTION 或 ActivityNotFoundException

> ID：12920106
> 
> 赞同：0
> 
> 时间：2012-10-16T17:18:19.383
> 
> 标签：android, eclipse, android-sdk-tools, dx

我有使用它的库项目和常规 android 项目。

**图书馆项目：**

**src 文件***夹包*com.myproject

 *```
MainActivity
ChildActivity 
```

AndroidManifest.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.project.library">
        <uses-sdk android:minSdkVersion="8" />
        <application>
            <activity android:name="com.myproject.MainActivity">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <activity android:name="com.myproject.ChildActivity">
            </activity>
        </application>
 </manifest> 
```

**独立项目**（是一个Android项目，使用库项目）：

**src 文件***夹包*com.myproject

 *```
ChildActivity 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.project">
        <uses-sdk android:minSdkVersion="8" />
        <application>
            <activity android:name="com.myproject.MainActivity">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
            <activity android:name="com.myproject.ChildActivity">
            </activity>
        </application>
</manifest> 
```

**我想要达到的目标：**

Android 项目中的 ChildActivity 应覆盖库项目中的 ChildActivity。

编译失败：

```
[2012-10-16 20:02:02 - Standalone] Dx 
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Lcom/myproject/ChildActivity;
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.command.dexer.Main.processClass(Main.java:486)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.command.dexer.Main.processFileBytes(Main.java:455)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.command.dexer.Main.access$400(Main.java:67)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:394)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:135)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:191)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:123)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:191)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:123)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:191)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:123)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.cf.direct.ClassPathOpener.processDirectory(ClassPathOpener.java:191)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:123)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.command.dexer.Main.processOne(Main.java:418)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.command.dexer.Main.processAllFiles(Main.java:329)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.dx.command.dexer.Main.run(Main.java:206)
[2012-10-16 20:02:02 - Standalone] Dx   at sun.reflect.GeneratedMethodAccessor64.invoke(Unknown Source)
[2012-10-16 20:02:02 - Standalone] Dx   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
[2012-10-16 20:02:02 - Standalone] Dx   at java.lang.reflect.Method.invoke(Method.java:597)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:703)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:577)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.core.internal.resources.Project.build(Project.java:124)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
[2012-10-16 20:02:02 - Standalone] Dx   at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
[2012-10-16 20:02:02 - Standalone] Dx   at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
[2012-10-16 20:02:02 - Standalone] Dx 1 error; aborting
[2012-10-16 20:02:02 - Standalone] Conversion to Dalvik format failed with error 1 
```

如果我将独立项目中的 src 文件夹更改为 com.myproject.standalone 并将清单条目更改为

```
<activity android:name="com.myproject.standalone.ChildActivity"> 
```

我有例外：

```
android.content.ActivityNotFoundException: Unable to find explicit activity class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:38:22.470

您无需在两个清单中声明活动。选择一个并使用它。我更喜欢将应用清单用于所有活动声明。

更新：此外，图书馆项目永远不应该包含对任何引用它的项目的引用。这称为循环依赖。

更新：所以你的代码有点混乱，但看起来你在库和独立项目中声明了具有相同完全限定名称的类。这行不通。它们需要具有不同的限定名称。限定名是完整的包名和类名。您的库的 AndroidManifest 将包声明为“com.myproject.library”，但随后使用包“com.myproject”声明了 2 个活动。如果它们在库项目中，请将限定名称更改为“com.myproject.library.ActivityName”或使用“.ActivityName”简写。如果它们在同一个包中，则它们需要在不同的包中。**

# mysql - 小复杂Mysql更新

> ID：12920107
> 
> 赞同：1
> 
> 时间：2012-10-16T17:18:20.087
> 
> 标签：mysql

我正在尝试使用下面显示的 if 进行更新，您会知道我想要做什么

```
UPDATE messages SET IF(u1= :username,u1_delete=1,u2_delete=1) 
WHERE thread_id= :thread_id 
```

我想在 u1 是用户名时更新 u1_delete 否则它将更新 u2_delete 字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:21:21.707

您可以使用 case 语句，如下所示：

```
UPDATE messages 
SET 
    u1_delete = CASE WHEN u1= :username THEN 1 ELSE u1_delete END,
    u2_delete = CASE WHEN u1= :username THEN u2_delete ELSE 1 END,
WHERE 
    thread_id= :thread_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:20:53.530

`CASE`在更新中使用 a 。诀窍是更新`u1_delete`when`:username = u1`并将其设置为当前值，使其不会变为`NULL`，并对`u2_delete`if执行相同操作`:username <> u1`，这涵盖了`IF()`.

```
UPDATE 
  message
SET
  u1_delete = CASE WHEN u1 = :username THEN 1 ELSE u1_delete END,
  u2_delete = CASE WHEN u1 <> :username THEN 1 ELSE u2_delete END,
WHERE thread_id = :thread_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:31:12.587

我认为这就是你想要的：

```
UPDATE messages   
SET  
u1_delete = IF(u1 = :username, 1, u1_delete),  
u2_delete = IF(u1 <> :username, 1, u2_delete)  
WHERE thread_id= :thread_id; 
```

所以基本上，如果 u1 = username，您设置为 u1_deleted = 1，否则 u1_deleted 设置为自身并且不会更改。如果 u1 不等于用户名，则 u2_delete = 1，否则 u2_delete 设置为自身并且不会更改。

这是你想要的吗？

# c - 为什么输入和输出波特率总是一样的？

> ID：12920108
> 
> 赞同：5
> 
> 时间：2012-10-16T17:18:21.617
> 
> 标签：c, linux, serial-port, baud-rate

我有一个简单的程序设置串行（RS232）端口的波特率。我正在使用`cfsetospeed()`and`cfsetispeed()`函数独立设置输入和输出速率。根据[手册页](http://linux.die.net/man/3/cfsetospeed)，如果我使用这些函数和适当的常量，这应该是可能的：

`cfsetispeed() sets the input baud rate stored in the termios structure to speed, which must be specified as one of the Bnnn constants listed above for cfsetospeed(). If the input baud rate is set to zero, the input baud rate will be equal to the output baud rate.`

`cfsetospeed() sets the output baud rate stored in the termios structure pointed to by termios_p to speed, which must be one of these constants: ... B600 ... B19200`

我的问题是，我设置的第二个（输入或输出）似乎是**两者**的最终值。我正在尝试设置两个独立的速度。

**代码：**

```
int main() {
    int fd, ret;
    char buf[100] = {0};
    char buf2[100] = {0};
    struct termios options;

    // Open the serial-USB device driver
    fd = open("/dev/ttyUSB0", O_RDWR | O_NOCTTY | O_NDELAY);
    if(fd < 0){
      perror("open_port: Unable to open port - ");
      return 1;
    }

    tcgetattr(fd, &options);  //Get the current settings

    cfsetospeed(&options, B9600);   //Set input speed as 9600 Baud Rate
    cfsetispeed(&options, B19200);  //Set output speed as 19200 Baud Rate

    ret= tcsetattr(fd, TCSANOW, &options); //Get the return to make sure it worked

    sleep(3); // Just for kicks, let it "settle"

    tcgetattr(fd, &options);    //Read back the values

    getBRate(buf, cfgetispeed(&options));
    getBRate(buf2, cfgetospeed(&options));

    printf("return code was: %d, ispeed %s, ospeed %s\n", ret, buf, buf2);

    //Clean up 
    memset(buf, '0', 100);
    memset(buf2, '0', 100);
    close(fd);

    return 0;
} 
```

我的`getBRate()`函数只是一个简单的（丑陋的）开关来返回波特率的字符串版本：

```
void getBRate(char rate[], speed_t brate)
{

    switch(brate) {
        case B0: strcpy(rate,"none"); break;
        case B50: strcpy(rate,"50 Baud");break;
        case B110: strcpy(rate,"110 Baud");break;
        case B134: strcpy(rate,"134 Baud");break;
        case B150: strcpy(rate,"150 Baud");break;
        case B200: strcpy(rate,"200 Baud");break;
        case B300: strcpy(rate,"300 Baud");break;
        case B600: strcpy(rate,"600 Baud");break;
        case B1200: strcpy(rate,"1200 Baud");break;
        case B1800: strcpy(rate,"1800 Baud");break;
        case B2400: strcpy(rate,"2400 Baud");break;
        case B4800: strcpy(rate,"4800 Baud");break;
        case B9600: strcpy(rate,"9600 Baud");break;
        case B19200: strcpy(rate,"19200 Baud");break;
        default: strcpy(rate, "No valid baud found\n");break;
    }
    return;
} 
```

这里的输出将是：

```
return code was: 0, ispeed 19200 Baud, ospeed 19200 Baud 
```

如果我像这样反转两个“设置”行：

```
cfsetispeed(&options, B19200);  //Set output speed as 19200 Baud Rate
cfsetospeed(&options, B9600);   //Set input speed as 9600 Baud Rate 
```

我的输出将更改为：

```
return code was: 0, ispeed 9600 Baud, ospeed 9600 Baud 
```

有任何想法吗？

**编辑：**
由于问题出现，此代码将在使用 Coldfire 528X（5280 或 5282）的板上运行。无论如何，根据 UART 的参考手册，RX 和 TX 应该能够具有不同的速率：

`23.3.4 UART Clock Select Registers (UCSRn)`
`The UCSRs select an external clock on the DTIN input (divided by 1 or 16) or a prescaled internal bus clock as the clocking source for the transmitter and receiver. See Section 23.4.1, “Transmitter/Receiver Clock Source.” The transmitter and receiver can use different clock sources.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:33:54.597

现在我会接受@TJD的回答作为事实`In all the chips I have dealt with, the serial port hardware actually only has a single baud rate generator, and therefore has no possible way to handle different Tx and Rx baud rates.`

至于我没有看到任何错误这一事实，这是因为至少有一个请求的操作`tcsetattr()`确实成功了，正[如此页面](https://www.mkssoftware.com/docs/man3/tcsetattr.3.asp)所述：

`The tcsetattr() function returns successfully if it was able to perform any of the requested actions, even if some of the requested actions could not be performed.`

所以现在，我猜硬件没有能力支持这个，但我从 set 函数成功返回，因为它设置了我要求的两件事之一。

# tfs - 加载 TFS 程序集错误

> ID：12920110
> 
> 赞同：1
> 
> 时间：2012-10-16T17:18:34.247
> 
> 标签：tfs

我正在尝试使用 powershell 脚本执行 tfs 命令并遇到以下问题

找不到类型 [Microsoft.TeamFoundation.Client.TeamFoundationServerFactory]：确保已加载包含此类型的程序集。

需要做什么？

谢谢杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:40:45.723

在我的盒子上，持有该类型的组件在这里：

> C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ReferenceAssemblies\v2.0\Microsoft.TeamFoundation.Client.dll。

可能 powershell 没有在该目录中进行探测。

尝试将程序集复制到 popwershell 脚本所在的文件夹。

# jquery - SharePoint 讨论列表 TreeView 可视化 web 部件

> ID：12920114
> 
> 赞同：0
> 
> 时间：2012-10-16T17:18:57.673
> 
> 标签：jquery, list, sharepoint, treeview

尝试创建可视化 Web 部件以将 SharePoint 2010 讨论板呈现为树状视图。我可以将所有主题作为父节点取回，并将每个主题的所有回复作为子节点取回，但不能使用层次结构。所以所有回复（甚至是对早期回复的回复）都在同一节点级别。有一个名为 ThreadIndex 的属性可用于跟踪层次结构上的回复处于什么级别（是第一个回复还是对第一个回复的回复或{对第一个回复的回复的回复}等。两行是threadingindex值。你可以看到第一个回复有一定的threading index值，回复它有它的threading index值，并附加了一些随机字符串。

这就是它的样子： [我的样子 http://www.resizr.com/resized/d2eb.jpg](http://www.resizr.com/resized/d2eb.jpg)

这就是我希望它看起来的样子： [Desired http://www.resizr.com/resized/8249.jpg](http://www.resizr.com/resized/8249.jpg)

有人可以给我一些提示吗？

```
public partial class HDRDiscussionTreeUserControl : UserControl
{

    protected void Page_Load(object sender, EventArgs e)
    {
        List<string> allTopics = new List<string>();
        List<string> allreplies = new List<string>();
        List<int> allpids = new List<int>();
        HDRDiscussionTV.Nodes.Clear();          
        TreeNode node;
        SPSite currentSite = SPContext.Current.Site;
        SPWeb web = currentSite.RootWeb;
        //Get the Discussion list
        SPList lst = web.Lists["SP2017Discussion"];

        SPQuery query0 = new SPQuery();
        //get all topics
        query0.Query = "<Where><IsNotNull><FieldRef Name=\"Title\" /></IsNotNull></Where>";
        SPListItemCollection col = lst.GetItems(query0);

        foreach (SPListItem item in col)
        { 
            //listItem.Fields["Parent Folder Id"].GetFieldValueAsText(listItem["Parent Folder Id"]).ToString() 
            //string pfid = item.Fields["Parent Folder Id"].GetFieldValueAsText(item["Parent Folder Id"]).ToString();
            int id = item.ID;
            SPQuery query = new SPQuery();
            SPListItem topic = item;
            //allTopics.Add(item.Title);

            node = new TreeNode(item.Title);
            HDRDiscussionTV.Nodes.Add(node);

             SPQuery query1 = new SPQuery();
            query1.Folder = item.Folder;
             //get all replies
            SPListItemCollection relatedDiscussions = lst.GetItems(query1);
            try
            {
                if (relatedDiscussions.Count != 0)
                {
                    int n = 1;
                    TreeNode parentNode1 = node;
                    for (int i = 0; i <= relatedDiscussions.Count; i++)
                    {
                        //int parentListID = Convert.ToInt32(relatedDiscussions[i].Fields["Parent Folder Id"].GetFieldValueAsText(relatedDiscussions[i]["Parent Folder Id"]));
                        string threading = relatedDiscussions[i]["ThreadIndex"].ToString();
                        string checkthreading = relatedDiscussions[n]["ThreadIndex"].ToString();
                        node = new TreeNode(relatedDiscussions[i]["ows_TrimmedBody"].ToString()+"|" + threading + "|");
                        parentNode1.ChildNodes.Add(node);
                         n = i + 1;
                    }
                }
            }
            catch
            {
            }
        }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:40:41.160

为什么不使用树视图控件？ [http://hamidseta.blogspot.com/2012/01/check-uncheck-all-checkbox-in-treeview.html](http://hamidseta.blogspot.com/2012/01/check-uncheck-all-checkbox-in-treeview.html)

# sql-server-2008-r2 - 在删除语句 SQL Server 2008 r2 中使用 CTE

> ID：12920118
> 
> 赞同：1
> 
> 时间：2012-10-16T17:19:21.467
> 
> 标签：sql-server-2008-r2, common-table-expression

我有一个 CTE，它根据他们的 ID 号减少一组人。我目前没有很好的方法来测试这个。我之前没有将 CTE 与 delete 语句结合使用，我认为这是正确的，但我想在确定之后继续。

我确实对此进行了测试，但出现以下错误：

> *（0 行受影响）
> 消息 208，级别 16，状态 1，第 35 行
> 无效的对象名称“x”。*

我在这里做错了什么？

```
--this CTE pares down the number of people that I need for my final result set
;with x as (select distinct patid from
(
select distinct patid
    from clm_extract
    where (diag1 like '952%' or diag1 like '806%') and drg =444

union
select distinct patid
    from clm_extract
    where (diag2  like '952%' or diag2 like '806%') and drg =444

union
select distinct patid
    from clm_extract
    where (diag3  like '952%' or diag3  like '806%') and drg =444
union
select distinct patid
    from clm_extract
    where (diag4  like '952%' or diag4  like '806%') and drg =444
union
select distinct patid
    from clm_extract
    where (diag5  like '952%' or diag5  like '806%') and drg =444
) x

)
--this is a query to show me the list of people that I need to delete from this table because they do not match the criteria
select distinct x.patid
    from x
    inner join clm_extract as c on c.patid = x.patid
    where x.patid !=1755614657 (1 person did match)

--this is my attempt at using a CTE with said query to remove the IDs that I don't need from my table

delete from clm_extract
where patid in(select distinct x.patid
    from x
    inner join clm_extract as c on c.patid = x.patid
    where x.patid !=1755614657) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:28:29.373

我认为你的 CTE 是错误的 - 你有一个 CTE 被调用`x`，并且在那个 CTE 里面你有一个子选择也被别名为`x`- 这会引起混乱......

为什么不只是有：

```
;with x as 
(
    select distinct patid
    from clm_extract
    where (diag1 like '952%' or diag1 like '806%') and drg =444

    union

    select distinct patid
    from clm_extract
    where (diag2  like '952%' or diag2 like '806%') and drg =444

    ......     
)
select 
    distinct x.patid
from x
inner join clm_extract as c on c.patid = x.patid
where x.patid !=1755614657 (1 person did match) 
```

我认为在 CTE 中包含额外的子查询没有任何必要或任何好处，真的....

# facebook - fbAsyncInit 在 Firefox 中触发，但在 Chrome 中不触发

> ID：12920119
> 
> 赞同：2
> 
> 时间：2012-10-16T17:19:23.177
> 
> 标签：facebook, google-chrome, facebook-javascript-sdk

我在让 fbAsyncInit 在 Chrome 中触发时遇到了一些问题，尽管我可以看到它在 Firefox 中触发（通过警报）。

我已经阅读了一些 stackoverflow 问题/答案，发现许多人将其追溯到 channelUrl。对于 channelUrl，我尝试将其完全删除（因为它应该是可选的）并且我尝试使用 .php 文件以及包含文档中提到的正确内容的 .html 文件（[https://developers. facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)在频道文件下）。

这是代码片段：

```
var appID = '353110578113914';
    var redirectURI = 'http://localhost/fb/logged-in.html';
    var php = true;
    var channel = 'http://localhost/fb/channel.php';

  window.fbAsyncInit = function() {
    alert('fbAsyncInit was called');

    FB.init({
      appId      : appID, // App ID
      channelUrl : channel, // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });
}; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:45:18.620

原来我正在使用一个名为 Facebook Disconnect 的 Chrome 扩展程序。我禁用的那一刻，一切正常。：/

# sed - sed 程序，它有什么作用？

> ID：12920121
> 
> 赞同：0
> 
> 时间：2012-10-16T17:19:25.417
> 
> 标签：sed

```
 "sed \'s/\t/ /g\' " 
```

谢谢！它是这样的代码的一部分

```
string cmd = "sed \'s/\t/ /g\' " + string(filename) + " > sample.clean";
            system(cmd.c_str());
            ifstream infile("sample.clean");
            if (!infile){
                cerr << "error loading file after clean-up!\n";
                return 0;
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T17:28:20.880

它用空格替换制表符，但效果很差。在 sed 本身内，`'y/\t/ /'`更好，但 sed 是错误的工具，它甚至写得更好`tr '\t' ' '`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:24:10.257

`\t`它用空格替换制表符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T17:24:40.613

似乎它用空格替换了表格（\ t）。g 表示替换不应在一行的第一个匹配项处停止。

# nservicebus - 每个消息类型的工作线程数

> ID：12920132
> 
> 赞同：2
> 
> 时间：2012-10-16T17:19:40.973
> 
> 标签：nservicebus

NService 配置中有一个设置来设置处理消息的线程数。我相信这是针对每个工作节点的。

例如，如果我有工作节点正在处理一种以上的消息类型。NService 总线中是否有一个功能可以让我们设置每种消息类型的线程数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:28:33.967

不，我不知道。NServiceBus 的理念是您应该拥有一种或有限数量的消息类型，由单个端点处理。如果您的消息类型在处理优先级方面有不同的要求，这可能表明您需要不同的节点。

# c# - 无法解决 Enyim.Caching 的依赖关系

> ID：12920135
> 
> 赞同：1
> 
> 时间：2012-10-16T17:19:49.207
> 
> 标签：c#, couchbase, enyim, enyim.caching

在使用 Couchbase 客户端时，我无法解决对 Enyim.Caching.dll 的依赖问题。我已经通过 NuGet 下载了 dll 并在项目中引用了它们。该解决方案与下载的程序集 Enyim.Caching, Version=2.12.0.0, Culture=neutral, PublicKeyToken= **05e9c6b5a9ec94c2**一起编译得很好。但是在运行时 Couchbase 会抛出异常，因为它正在寻找 Enyim.Caching, Version=2.12.0.0, Culture=neutral, PublicKeyToken= **cec98615db04012e**。

我无法理解为什么它需要另一个相同版本的 dll，但使用另一个 PublicKey。

我还尝试了[Cant get the couchbase .net memcache client to run 中描述的解决方案，抱怨强名称验证无法](https://stackoverflow.com/questions/8977053/cant-get-the-couchbase-net-memcache-client-to-run-complains-its-strong-name-v)通过使用 ns.exe 删除强名称要求。但它没有锻炼。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:35:32.357

最后，我设法使用 couchbase-net-client 项目的文件 Readme.mdown 中的描述解决了这个问题。他们说有两种方法可以解决这个问题：要么通过 sn.exe 删除强名称检查，要么完全删除程序集签名。

我选择了第二种方式，因为我不需要组装签名。我从头开始重建源代码，删除了 NuGet 为我创建的每个条目，并手动添加了对所有程序集的引用。它就像一个魅力:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T06:12:37.747

您可以在文件“build/CommonProperties.targets”中使用“public_key.snk”删除节点

```
<!-- delay sign the assembly if the PrivateKeyPath property is not specified -->
<!--<PropertyGroup Condition=" '$(PrivateKeyPath)' == '' And '$(PrivateKeyName)' == ''">
    <AssemblyOriginatorKeyFile>..\public_key.snk</AssemblyOriginatorKeyFile>
    <DelaySign>true</DelaySign>
</PropertyGroup> --> 
```

# android - 跨平台的openGLES？

> ID：12920136
> 
> 赞同：1
> 
> 时间：2012-10-16T17:19:49.007
> 
> 标签：android, ios, opengl-es, cross-platform

是否有最好的/好的方法来同时为 Android 和 iOS（和 Mac OS X）进行跨平台应用程序开发，比如游戏？

只是简单地开发一个只使用 OpenGL 和 C/C++ 的应用程序应该非常简单，不是吗？只要我一开始没有进入声音甚至互动？

我查看了 NDK，但所有这些警告都表明人们不应该使用它。我想尽可能地自己做所有事情，所以我没有研究过 Cocos2D 之类的东西......有没有任何教程就像一个跨平台的 openGL“Hello World”？

谢谢鲍勃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:38:08.137

Unity3d（游戏引擎）是开发跨平台游戏的最佳和最简单的方法。由于事实就是支持许多平台。

unity3d 支持的平台有 Android、Iphone、Mac & Window、web、Flash、Ps3、Wii，甚至 Linux。使用它的主要好处是您不必重写代码（只需进行一些小的更改）即可将其移植到其他平台。

它支持 C#、Javascript 以及用于脚本的 boo。关于它的最好的事情。它有强大的支持和强大的社区来解决您的问题。

您可以在几分钟内在 Unity3d 中为 mac、windows、android、iphone、web 等各种平台创建一个跨平台的 Hello World。

我知道它并不接近（unity3d），因为您想要纯编码环境，但如果您的目标是跨平台游戏，那么 unity3d 是最好的方式（也是最快的）。

看看[http://unity3d.com/](http://unity3d.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:23:01.297

我目前正在使用一个名为 PlayN [http://code.google.com/p/playn/](http://code.google.com/p/playn/) 的谷歌框架开发一个多平台游戏（iOS、Android、Java-openGL、Flash 和 HTML5）。当我遇到问题时，作者的良好反馈

# javascript - 下拉菜单的阴影颜色并在焦点/模糊上选择

> ID：12920140
> 
> 赞同：0
> 
> 时间：2012-10-16T17:19:57.513
> 
> 标签：javascript, html, drop-down-menu, onfocus, dropdownbox

如何修改下面的代码，以便将`onblur`and`onfocus`应用于文本框和选择框？现在它只适用于文本框，我似乎无法让它应用于选择框。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">

window.onload = 

function fnOnLoad() {
        var t = document.getElementsByTagName('INPUT');

        var i;
        for(i=0;i<t.length;i++)
        {
            //alert(t[i].type)

            if(t[i].type == "text")
            {
                t[i].attachEvent('onfocus', new Function("fnTXTFocus('"+t[i].id+ "')"));
                t[i].attachEvent('onblur', new Function("fnTXTLostFocus('"+t[i].id+ "')"));
            }
        }
    }

function fnTXTFocus(varname) {

        var objTXT = document.getElementById(varname)
        objTXT.style.backgroundColor = "#FFFF80";

    }

    function fnTXTLostFocus(varname)
    {
        var objTXT = document.getElementById(varname)
        objTXT.style.backgroundColor = "#FFFFFF";
    }

</script>

</head>
<body>

<input id="t1" type="text" >
<input id="t2" type="text" >
<input id="t3" type="text" >
<br><br>
<select size="d1" ></select>
<select size="d2" ></select>
<select size="d3" ></select>
<p>When the input field gets focus, 
   a function is triggered which changes the background-color.</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:24:09.380

尝试这个：

```
function fnOnLoad() {
    var inputs = document.getElementsByTagName('INPUT');
    for(var i = 0; i < inputs.length; i++)
    {
        inputs[i].attachEvent('onfocus', function(){ 
             this.style.backgroundColor = "#FFFF80";
        });
        inputs[i].attachEvent('onblur', function(){ 
             this.style.backgroundColor = "#FFFFFF";
        });
    }

    var selects = document.getElementsByTagName('SELECT');
    for(var i = 0; i < selects.length; i++)
    {
        selects[i].attachEvent('onfocus', function(){ 
             this.style.backgroundColor = "#FFFF80";
        });
        selects[i].attachEvent('onblur', function(){ 
             this.style.backgroundColor = "#FFFFFF";
        });
    }
}

window.onload = fnOnLoad; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:24:09.770

因此，您还需要获取所有选择并将事件处理程序附加到它们：

```
var s = document.getElementsByTagName('SELECT'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-16T18:50:49.223

```
<script type="text/javascript">

function fnOnLoad() {

    var t = document.getElementsByTagName('INPUT');
    for (var i = 0; i < t.length; i++) {
            t[i].onfocus = function() { this.style.backgroundColor = '#FFFFC4';};
            t[i].onblur = function() { this.style.backgroundColor = '#FFFFFF'; };
    }

    var d = document.getElementsByTagName('SELECT');
    for (var i = 0; i < d.length; i++) {
            d[i].onfocus = function() { this.style.backgroundColor = '#FFFFC4'; };
            d[i].onblur = function() { this.style.backgroundColor = '#FFFFFF'; };
    }

}
</script> 
```

# java - Java：找不到适合 jdbc:h2 的驱动程序

> ID：12920151
> 
> 赞同：13
> 
> 时间：2012-10-16T17:20:32.270
> 
> 标签：java, jdbc, classloader, h2

我的一些代码有问题，我已经搜索并尝试了我所知道的一切，但没有任何运气。

* * *

**设想：**

*   应用程序检查 JDBC 驱动程序是否存在，在本例中为 H2 驱动程序 (org.h2.Driver)。
*   如果它不存在，应用程序会下载 JDBC 驱动程序并将其添加到 ClassLoader，如下所示：（**注意**：storageDataManager 是我用于 SQL 方法的类）

    ```
     File h2Driver = new File(directory.toString() + File.separator + "lib" + File.separator + "h2.jar");
       if (h2Driver.exists()) {
           URL[] url = new URL[0];
           try {
               url = new URL[]{h2Driver.toURI().toURL()};
               storageDataManager.setClassLoader(new URLClassLoader(url));
           } catch (MalformedURLException ignore) {}
        } 
    ```

* * *

当 storageDataManager 运行第一个查询时，它会尝试与指定的驱动程序连接，如果它确实有 ClassLoader，它会使用 ClassLoader 代替：

```
if (getClassLoader() != null) {
    getLogging().debug("Loading custom class loader for H2 driver: " + getClassLoader().toString());
    Driver driver = (Driver) Class.forName("org.h2.Driver", true, getClassLoader()).newInstance();
    getLogging().debug("Loaded H2 driver: " + driver.toString() + " - " + driver.getMinorVersion() + " - " + driver.getMajorVersion());
    DriverManager.registerDriver(driver);
} else {
    getLogging().debug("Loading H2 driver.");
    Class.forName("org.h2.Driver");
}
outputDrivers();
this.con = DriverManager.getConnection(this.url, this.username, this.password);
break; 
```

当我运行应用程序时，我收到此错误：

"*没有找到适合 jdbc:h2:plugins\Odin\data\OdinStorage 的驱动程序；AUTO_RECONNECT=TRUE*"

这是完整的日志：

```
[Debug] Loading custom class loader for H2 driver: java.net.URLClassLoader@3bf3d5f4
[Debug] Loaded H2 driver: org.h2.Driver@67257ce8 - 3 - 1
[Debug] Checking DriverManager drivers.
[Debug] Found driver #1: sun.jdbc.odbc.JdbcOdbcDriver
[Debug] Found driver #2: com.mysql.jdbc.Driver
[Debug] Found 2 drivers in DriverManager.
--------------------------- STACKTRACE ERROR ---------------------------
Class name: java.sql.DriverManager
Error message: No suitable driver found for jdbc:h2:plugins\Odin\data\OdinStorage;AUTO_RECONNECT=TRUE
Error cause: null
File name: null
Function name: getConnection
Error line: -1
--------------------------- STACKTRACE START ---------------------------
java.sql.DriverManager.getConnection(Unknown Source)
java.sql.DriverManager.getConnection(Unknown Source)
com.craftfire.commons.managers.DataManager.connect(DataManager.java:756)
com.craftfire.commons.managers.DataManager.executeQuery(DataManager.java:526)
com.craftfire.odin.managers.StorageManager.checkInventoryDatabase(StorageManager.java:65)
com.craftfire.odin.managers.StorageManager.checkDatabases(StorageManager.java:56)
com.craftfire.odin.managers.StorageManager.<init>(StorageManager.java:34)
com.craftfire.odin.managers.OdinManager.loadDatabases(OdinManager.java:206)
com.craftfire.odin.managers.OdinManager.init(OdinManager.java:75)
com.craftfire.odin.layer.bukkit.Odin.onEnable(Odin.java:63)
org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:217)
org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:374)
org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:381)
org.bukkit.craftbukkit.CraftServer.loadPlugin(CraftServer.java:266)
org.bukkit.craftbukkit.CraftServer.enablePlugins(CraftServer.java:248)
org.bukkit.craftbukkit.CraftServer.<init>(CraftServer.java:200)
net.minecraft.server.ServerConfigurationManagerAbstract.<init>(ServerConfigurationManagerAbstract.java:50)
net.minecraft.server.ServerConfigurationManager.<init>(SourceFile:11)
net.minecraft.server.DedicatedServer.init(DedicatedServer.java:105)
net.minecraft.server.MinecraftServer.run(MinecraftServer.java:377)
net.minecraft.server.ThreadServerApplication.run(SourceFile:539)
---------------------------- STACKTRACE END ---------------------------- 
```

那么我的问题是，为什么驱动程序没有出现在 DriverManager.getDrivers() 中？

**注意：**我不希望将库添加到 CLASSPATH，这就是为什么我需要找到解决上述问题的方法。

我该如何解决这个问题？我只需要从 jar 中加载 H2 JDB 驱动程序。

我也试过这个：

*   不使用 DriverManager.registerDriver(Driver)，而是使用 Class.forName("org.h2.Driver", true, getClassLoader()) 代替，我也尝试过使用 .newInstance()，但都没有奏效。

任何人都可以为我提供解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:45:51.460

根据 Oracle 文档：[http ://docs.oracle.com/cd/E19501-01/819-3659/beadf/index.html](http://docs.oracle.com/cd/E19501-01/819-3659/beadf/index.html)

类加载器将类加载委托给子类加载器，在类路径上搜索类。但是，您用于加载库的 URLClassloader 对系统或引导层次结构不可见，因此它无法找到该类（尽管它已被加载，尽管在另一个 castl...classloader 中）。

最简单的解决方案是用 URLClassloader 替换您的系统类加载器并使用 addUrl(...path...) 加载您的库，正如这个答案所暗示的那样：[我应该如何在运行时动态加载 Jars？](https://stackoverflow.com/questions/60764/how-should-i-load-jars-dynamically-at-runtime)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-05T15:06:55.247

我有同样的问题。h2 驱动程序在 pom.xml 中配置为

```
<dependency>
    <groupId>com.h2database</groupId>
    <artifactId>h2</artifactId>
    <version>1.4.193</version>
</dependency> 
```

因为我在我的项目中使用 Java 6（不要问为什么 ;-)）但是 Maven 存储库中的 h2-1.4.193.jar 依赖于 Java 7，所以无法使用此驱动程序版本。

将 pom.xml 更改为使用 h2-1.4.190.jar 为我解决了这个问题。

另请参阅h2database git 项目中的[issue #300](https://github.com/h2database/h2database/issues/300)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-17T09:33:08.913

Hibernate 属性设置 url 值为：jdbc:h2:mem:test;DB_CLOSE_DELAY=-1

驱动程序类名：

```
<property name="driverClassName">
<value>org.hibernate.dialect.H2Dialect</value> 
```

在 pom 中添加 H2 驱动程序：

```
 <dependency>
        <groupId>com.h2database</groupId>
        <artifactId>h2</artifactId>
        <version>1.3.166</version>
    </dependency> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T18:46:32.503

您必须将**确切的** `org.h2.Driver`*.jar 文件名添加到应用程序的类路径中。

**示例**：`/home/applications/games/minecraft/drivers/jdbcH2driver.jar`

因此，请确定驱动程序将始终在您的应用程序中的位置，并在安装使用它的应用程序时找到应用程序主文件夹路径以完全构建它。

此外，它可能无法运行，因为在从网络下载期间可能需要一些时间，之后必须将其复制到“应用程序类路径的正确文件夹”中才能使用它并使用正确的 .jar 名称（如上一段）。要成功下载“查询和应用程序操作应该放在一个线程中”以防止溢出到下一行指令。

明智地，在应用程序启动时，您将检查 .jar 是否存在并下载它，如果它不存在并安装，同时向用户发出警告以在 .jar 不存在时下载它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-26T12:56:27.133

在我的情况下，错误在 Maven 范围内

```
 <dependency>
        <groupId>com.h2database</groupId>
        <artifactId>h2</artifactId>
        <version>1.4.200</version>
        <scope>test</scope>
    </dependency> 
```

一旦您将其删除或将其更改为可见范围，它就可以工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T17:23:14.640

将 H2 JAR 添加到您的 CLASSPATH。

没有合适的驱动程序通常意味着 URL 语法不正确。检查以确保您的符合。

[http://www.h2database.com/html/faq.html](http://www.h2database.com/html/faq.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-20T04:52:00.603

对我来说，我在使用`groovy`和`grapes`进行依赖解析时遇到了这个错误。

### 解决方案：

你需要告诉葡萄使用systemClassLoader。例如

```
@GrabConfig(systemClassLoader=true) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-05T13:31:16.283

我在我的 Kotlin 项目中遇到了同样的问题。我在 bild.gradle.kts 中添加了

```
dependencies {
    implementation("com.h2database:h2:1.4.199")
..
} 
```

然后在 IntelliJ File-> Invalidate Cache 中。

# coldfusion - 是否可以在 ColdFusion 中动态生成查询名称？

> ID：12920155
> 
> 赞同：2
> 
> 时间：2012-10-16T17:20:57.733
> 
> 标签：coldfusion, coldfusion-9, cfquery

我想做的是

```
<cfloop array="#LOCAL.someArray" index="LOCAL.aString">

    <cfset LOCAL.queryName = "uniqueQueryName_" & LOCAL.aString />

    <cfquery name="#LOCAL.queryName#" datasource="db" cachedwithin="#CreateTimeSpan(1,0,0,0)#">
        SELECT count(*) AS c FROM someTable
    </cfquery>

    <cfdump var="#LOCAL.queryName#" />
</cfloop> 
```

这是可能的，还是有更好的方法来做到这一点？

**编辑**

这适用于`<cfloop query="LOCAL.queryName">`但不是当我尝试做`<cfset ArrayAppend(LOCAL.returnArray, LOCAL.queryName.c) />`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T18:53:42.490

没有必`evaluate()`要这样做，也不应该这样做（所以我对这个答案投了反对票，抱歉）。

您需要做的就是使用关联数组表示法：

```
<cfdump var="#local[qname]#"> 
```

如果要访问该查询的一列，它是：

```
#local[qname][columnName]# 
```

对于特定的单元格：

```
#local[qname][columnName][rowNumber]# 
```

很少有情况`evaluate()`是对任何事情的正确答案。一个人不能依赖 Adob​​e 文档，因为 - 不幸的是 - 其中很多不是由非常有经验的 ColdFusion 开发人员编写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:43:33.763

您可以转储查询，我想也可以通过执行以下操作来访问它：

```
<cfloop list="q1,q2,q3" index="qname">

    <cfquery name="#qname#" datasource="dsn">
        SELECT * from some_table;
    </cfquery>

    <cfdump var="#Evaluate('#qname#')#" />
</cfloop> 
```

[Evaluate](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7f4e.html)功能允许你做你想做的事。

# ios - ios6 cachedResponseForRequest 块 sendSynchronousRequest

> ID：12920165
> 
> 赞同：3
> 
> 时间：2012-10-16T17:21:54.857
> 
> 标签：ios, blocking, nsurlrequest

这在 Xcode 4.4 中不会发生，但在 4.5 中，使用 ios6 模拟器或真实设备，如果从 cachedResponseForRequest 中调用，对 sendSynchronousRequest 的调用直到超时才会返回。

同样，使用 sendAsynchronousRequest 并旋转的循环（每 0.05 秒检查 10 秒是否完成），完成循环（经过 10 秒），但永远不会完成请求（如果从 cachedResponseForRequest 中调用）。

在 Xcode 4.4（模拟 ios5）中，这不会发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T08:36:36.593

只需使用“sendAsynchronousRequest”方法。这是我的解决方案，它就像一个魅力。

```
[NSURLConnection sendAsynchronousRequest:newRequest queue:[[NSOperationQueue alloc] init] completionHandler:^(NSURLResponse *response, NSData *data,NSError *error){
        NSLog(@"--- caching ---");
        if (error) {
            NSLog(@"%@", error);
            NSLog(@"not cached: %@", absoluteString);
        }
        NSString *filename = [self sha1:absoluteString];
        NSString *path = [cacheDirectory stringByAppendingPathComponent:filename];
        NSFileManager *fileManager = [[NSFileManager alloc] init];
        [fileManager createFileAtPath:path contents:data attributes:nil];
        [fileManager release];

        NSURLResponse *newResponse = [[NSURLResponse alloc] initWithURL:response.URL MIMEType:response.MIMEType expectedContentLength:data.length textEncodingName:nil];

        NSDictionary *responseInfo = [NSDictionary dictionaryWithObjectsAndKeys:filename, @"filename", newResponse.MIMEType, @"MIMEType", nil];
        [responsesInfo setObject:responseInfo forKey:absoluteString];
        cachedResponse = [[NSCachedURLResponse alloc] initWithResponse:newResponse data:data];
        [newResponse release];
        [cachedResponses setObject:cachedResponse forKey:absoluteString];
        [cachedResponse release];
    }]; 
```

因为它只适用于iOS5.0及更高版本。您可能需要先检查 ios 版本。

# string - 字符串缓冲区如何帮助不浪费资源

> ID：12920166
> 
> 赞同：0
> 
> 时间：2012-10-16T17:21:58.167
> 
> 标签：string, function, dart

所以基本上一般添加和处理字符串的方法正在被其他方式取代，因为它会导致混乱和资源浪费。我同意，但我想知道究竟是什么导致了这种资源浪费……正如这里所说。

> '..并且您正在运行的实现没有用于处理字符串的复杂代码，您最终可能会做很多浪费的分配......' [链接](http://www.dartlang.org/articles/m1-language-changes/#no-explicit-interfaces) 字符串缓冲区方法如何避免这种浪费......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:49:56.540

我对此的解释来自 Java / .NET 背景，但是同样的逻辑也适用。

**1.必须学习可变对象和不可变对象的概念...**

Int32 / Integer 等对象是可变对象，这意味着它们可以在实例化后在其当前内存位置进行更改。这是因为无论对象的值如何，它在内存中的大小都不需要改变。

字符串是不可变的对象，这意味着一旦分配了它们，就不能在当前内存位置更改它们。这是因为字符串本质上可以是任意长度，因此，每次字符串更改长度时，系统/运行时都必须在内存中找到一个新位置来存储字符串。

**2\. 连接与 StringBuilder / StringBuffer**

由于字符串是不可变的，因此每个连接都会强制重新分配内存。让我们假设以下示例使用 ASCII 编码（每个字符 1 个字节）

```
var message = "Hello World"; 
```

此时，系统已经分配了 11 个字节的内存来存储你的字符串。

```
message += "Hello Universe"; 
```

此时，系统必须为您的原始字符串再分配 14 个字节。您现有的 11 字节内存无法再存储您的新字符串！

为什么“*处理字符串的复杂代码*”（`StringBuffer`/ `StringBuilder`）可以帮助您！

每次将字符串附加到缓冲区/构建器时，它都会分配一次内存，并将指向该字符串的指针保存在内存中。下次分配字符串时，它会在新位置分配，而不会影响最后一个。一旦你完成了你的字符串的构建，缓冲区/构建器会将所有内容连接到一个字符串中，因此你的字符串分配会大大减少，因为你不是每次都在你的缓冲区/构建器中添加一些东西！

例子：

```
StringBuilder builder = new StringBuilder();

builder.Append("Hello World"); 
```

此时构建器已分配 11 个字节，并保持原样！

```
builder.Append("Hello Universe"); 
```

此时，构建器又分配了 14 个字节，保留最后一个字符串。

```
builder.ToString(); 
```

此时，构建器将内存中的所有字符串连接成一个字符串！

**概括：**

串联是一种资源浪费，因为：

1.  系统/运行时必须清除旧的、取消引用的内存位置，这需要一些 CPU 时间。在 Java/.NET 中，它被称为垃圾收集。

2.  每次重新分配内存都是一种浪费，直到垃圾收集器可以将其清理干净！

因此，串联会降低 CPU 和内存使用的性能！

# java - 漂亮的 GUI 布局

> ID：12920168
> 
> 赞同：1
> 
> 时间：2012-10-16T17:22:01.103
> 
> 标签：java, jmonkeyengine, nifty-gui

我是 JME3 游戏引擎的新手，但我知道 Android XML GUI 布局非常好。我这里有一个简单的布局，我不知道出了什么问题。这是我的 XML 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<nifty xmlns="http://nifty-gui.sourceforge.net/nifty-1.3.xsd"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://nifty-gui.sourceforge.net/nifty-1.3.xsd
                       http://nifty-gui.sourceforge.net/nifty-1.3.xsd">

<useControls filename="nifty-default-controls.xml" />
<useStyles filename="nifty-default-styles.xml" />

<screen id="start" controller="com.jasoncrosby.game.farkle.gui.MenuScreenGui">
    <layer id="layer" backgroundColor="#66CD00" childLayout="center">
        <panel id="panel" align="center" valign="center" childLayout="center" visibleToMouse="true">
            <image filename="Textures/wood_floor.png" height="95%" width="95%"/>

            <panel id="panel" align="center" valign="center" childLayout="center" visibleToMouse="true">
                <text text="test" font="Interface/Fonts/Eraser.fnt"></text>
            </panel>
        </panel>
    </layer>
</screen> 
```

一切正常，直到我开始显示文本。我尝试了不同的对齐方式并尝试将文本移动到不同的面板中，但无论我做什么，文本都不会位于屏幕的中心。到目前为止，它始终位于左上角，我只能看到文字的右下角。我确信它必须是一些简单的东西，但由于我是新手，所以我没有注意到任何东西。我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T21:59:39.267

您可能正在使用旧的 Nifty 版本。您的第一个 id="panel" 面板使用 childLayout="center" 并且它有两个子元素（一个图像和另一个面板）。这在 1.3.1 之前的 Nifty 版本中不受支持。

[这是Nifty Manual PDF](http://sourceforge.net/projects/nifty-gui/files/nifty-gui/1.3.2/nifty-gui-the-manual-1.3.2.pdf/download)中的引述：

> Nifty 1.3.1 中改进的另一件事是 childLayout="center" 现在支持多个子元素！在 1.3.1 之前的版本中，childLayout="center" 只支持单个子元素，其他元素会发生奇怪的事情。这现在也得到了改进，并且 childLayout="center" 支持多个子元素。

我已经用 Nifty 1.3.2 尝试了你的 XML，文本位于屏幕中央。

PS：与您的问题无关：对多个元素使用相同的 id 不是一个好主意（您有两个 id="panel" 的面板）。不会发生任何不好的事情（除了日志中的警告），但是当您尝试执行 findElementByName() 时，您可能会遇到一些意想不到的元素。

# extjs - 解析面积图的 XML 数据时出错

> ID：12920170
> 
> 赞同：0
> 
> 时间：2012-10-16T17:22:06.673
> 
> 标签：extjs, extjs4.1

我收到以下解析错误。我知道 javascript 代码有效，因为我已经用静态 JsonStore 替换了 xml 集成。你能发现我做错了什么吗？

提前感谢您的任何建议。

```
Error: Problem parsing d="L790,518.887301636L120,518.887301636Z" results-graph3.htm:1111
Error: Problem parsing d="Z" 
```

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<fundGrowthData>
    <growthData>
        <Year>1991</Year>
        <asOfDate>December 31, 1991</asOfDate>
        <Dividends>10000</Dividends>
        <Distribution>10000</Distribution>
    </growthData>
    <growthData>
        <Year>1992</Year>
        <asOfDate>December 31, 1992</asOfDate>
        <Dividends>10655</Dividends>
        <Distribution>10740</Distribution>
    </growthData>
    <growthData>
        <Year>1993</Year>
        <asOfDate>December 31, 1993</asOfDate>
        <Dividends>12146</Dividends>
        <Distribution>12297</Distribution>
    </growthData>
</fundGrowthData> 
```

Javascript：

```
var store = Ext.create('Ext.data.Store',{
    autoLoad: true,
    fields: ['Year','Dividends','Distribution'],
    proxy: {
        type: 'ajax',
        url: 'pathtoXML',
        reader: {
            type: 'xml',
            record: 'growthData'
        }
    }
});

Ext.onReady(function () {

    Ext.create('Ext.chart.Chart', {
        renderTo: Ext.get("js-chart"),
        width: 800,
        height: 600,
        store: store,
        axes: [
            {
                type: 'Numeric',
                grid: true,
                position: 'left',
                fields: ['Dividends', 'Distribution'],
                title: 'Sample Values',
                grid: {
                    odd: {
                        opacity: 1,
                        fill: '#ddd',
                        stroke: '#bbb',
                        'stroke-width': 1
                    }
                },
                minimum: 0,
                adjustMinimumByMajorUnit: 0
            },
            {
                type: 'Category',
                position: 'bottom',
                fields: ['Year'],
                title: 'Sample Metrics',
                grid: true,
                label: {
                    rotate: {
                        degrees: 315
                    }
                }
            }
        ],
        series: [{
            type: 'area',
            highlight: true,
            axis: 'left',
            xField: 'Year',
            yField: ['Dividends', 'Distribution'],
            style: {
                opacity: 0.93
            }
        }]
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:06:35.920

由于默认情况下 xml 是一个字符串，我必须将类型属性添加到 Ext.data.Store

```
var store = Ext.create('Ext.data.Store',{
    autoLoad: true,
    fields: [
        {name : "Year", type: "int"},
        {name : "Dividends", type: "int"},
        {name : "Distribution", type: "int"}
        ],
    proxy: {
        type: 'ajax',
        url: 'pathToXml',
        reader: {
            type: 'xml',
            record: 'growthData'
        }
    }
}); 
```

# javascript - OnClick 函数的 Javascript 格式

> ID：12920173
> 
> 赞同：1
> 
> 时间：2012-10-16T17:22:16.213
> 
> 标签：javascript, formatting

**编辑：这是表中的全部内容**

希望这会有所帮助，现在以前用于警报的代码不再有效。这与它在桌子上有关吗？

示例：http: [//jsfiddle.net/fT8aL/13/](http://jsfiddle.net/fT8aL/13/)

* * *

我有一个我正在尝试修改的网络应用程序。无论如何，当我点击一个链接时，我希望它调用一个发送电子邮件的函数。第一项是页面上的文本，第二项是调用用户名的变量。

在 .jsp 文件中，我正在修改以下行：

```
<a href="${videoUrl}" target="main" onclick="sendMail(this.parentNode.getElementsByTagName('span')[2].attributes['title'].value, '${model.user.username}')"> 
```

上面的代码在使用警报而不是 sendMail 函数进行测试时有效。你可以在这里查看：http: [//jsfiddle.net/rr6Wk/72/](http://jsfiddle.net/rr6Wk/72/)

我的问题是它没有发送电子邮件，我猜我在上面的代码中有一些不正确的格式或某些东西。

有任何想法吗？

功能：

```
<script>
function sendMail(video, user) {
var xmlhttp;
if (window.XMLHttpRequest) {
xmlhttp = new XMLHttpRequest();
     } else {// IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
     }
xmlhttp.open("GET", "http://www.yourdomain.com/somedirectory/sendemail.php?video="+video+"&user="+user+'&ip=<%= request.getHeader("X-Real-IP") %>', false);
xmlhttp.send();
}
</script> 
```

这可行但不可用，因为所有项目都有 nicename ID：

```
<a href="${videoUrl}" target="main" onclick="sendMail(document.getElementById('nicename').title, '${model.user.username}')"> 
```

在另一个名为 main.jsp 的文件是名称的来源，我添加了 id="nicename" 但这不起作用，因为如果我单击第三项，它总是显示第一项中的 nicename：

```
<td ${class} style="padding-right:1.25em;white-space:nowrap">
<span id="nicename" title="${child.title}"><str:truncateNicely upper="${cutoff}">${fn:escapeXml(child.title)}</str:truncateNicely></span>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:12:38.860

`getElementById`如果有多个具有相同 ID 的元素，将始终返回第一个元素。因此，它不适用于该目的。为每个*nicename*使用不同的 ID ，或者使用`name`（而不是 ID）属性与`getElementsByName`.

例如`getElementsByName`：

```
<script>
    function doSendMail(videoIndex, userName) {
        //get the list of nicename elements
        var eles = document.getElementsByName('nicename');
        //send the mail. note: error handling is absent
        sendMail(eles[videoIndex].title, userName);
    }
</script>
<!--send mail for the 3rd video-->
<a href="${videoUrl}" target="main" onclick="doSendMail(2, '${model.user.username}')"> 
```

第三种选择是使用基于单击元素的相对元素引用，使用`this`并*遍历*HTML 节点以获取所需元素（标题）。在提供的 jsfiddle 中，该表有 7 列。要点击的元素在第 2 列（播放链接），所需元素在第 6 列（`SPAN`元素）。此方法既不需要`name`也不`id`需要属性。

```
<script>
function doSendMail(playLinkEle, user) {
  var row = playLinkEle.parentNode.parentNode; //get cell, then row
  var cell = row.cells[5]; //get 6th cell (same row)
  var ele = cell.firstElementChild; //get first child element
  sendMail(ele.title, user);
}
</script>
<table>
  <tr>
    <td>
      star image
    </td>
    <td>
      <a onclick="doSendMail(this, '${model.user.username}')" target="main" href="${videoUrl}">play link</a>
    </td>
    <td>
      empty column
    </td>
    <td>
      download link
    </td>
    <td>
      song id
    </td>
    <td>
      unknown detail
    </td>
    <td>
      <span title="The Title">The Title</span>
    </td>
    <td>
      duration detail
    </td>
  </tr>
</table>

      duration detail 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:25:26.840

尝试这个

```
<a href="${videoUrl}" target="main" onclick="sendMail(this.parentNode.getElementsByTagName('span')[2].attributes['title'].value, '${model.user.username}');"> 
```

您需要确保至少选择了 3 个跨度`getElementsByTagName`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T18:20:02.257

感谢您的帮助，终于通过使用 2 个 parentElements 让它工作了！

```
<a href="${videoUrl}" target="main" onclick="sendMail(parentElement.parentElement.getElementsByTagName('span')[2].attributes['title'].value, '${model.user.username}');"> 
```

# ruby-on-rails-3 - 设置乘客：一直显示 apache 默认页面

> ID：12920175
> 
> 赞同：2
> 
> 时间：2012-10-16T17:22:35.420
> 
> 标签：ruby-on-rails-3, apache, centos, passenger

我试图让乘客工作，但我一直看到 apache 默认页面。我在 Inmotion VPS 上使用 centos 6.3。这是我到目前为止所做的：

1.  宝石安装乘客。
2.  rvmsudo 乘客安装 apache2 模块
3.  将以下代码粘贴到 /usr/local/apache/conf/includes/post_virtualhost_global.conf （这被加载到 httpd.conf 中）

    `LoadModule passenger_module /home/username/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/ext/apache2/mod_passenger.so PassengerRoot /home/username/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17 PassengerRuby /home/username/.rvm/wrappers/ruby-1.9.3-p194/ruby`

    `<VirtualHost 123.123.123.123:80> ServerName http://XXXXXX.inmotionhosting.com # !!! Be sure to point DocumentRoot to 'public'! DocumentRoot /home/username/rails/current/public <Directory /home/username/rails/current/public> # This relaxes Apache security settings. AllowOverride all # MultiViews must be turned off. Options -MultiViews </Directory> </VirtualHost>`

    编辑：不知道为什么这不是正确的格式。它在文本编辑器中的衬里和标签很好。

4.  在 etc/hosts 中有一行：

    `123.123.123.123 XXXXXX.inmotionhosting.com XXXXXX`

5.  我通过 /etc/init.d 中的 sudo service httpd restart 重新启动了 apache

6.  仍然显示 apache 默认页面

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-28T06:51:43.703

我偶然发现了这篇 1 年前的帖子，有类似的问题，但没有一条评论对我有用。所以我只是为那些正在寻求帮助的人添加我的 2 美分。

如果您看到 Apache 默认页面，这意味着 phusion 乘客可能没有运行。当您启动/停止/重新启动 apache 服务器时，您可能会看到一条警告消息，提示 phusion 乘客模块已加载，正在跳过。

因此，Apache 跳过了您在 conf 文件中添加的最新 LoadModule 行。

然后检查在 apache 配置文件中为错误日志设置的目录中的 error.log。（centos 的 httpd.conf）

就我而言，它抱怨在PassengerRuby 中设置的目录中找不到看门狗。这确认加载的乘客模块不是我刚刚添加的。这可能是因为我现在使用的是 RVM，但不久前还以 root 身份安装了旧版本的 Passenger。于是我查看了Apache根目录下的config.d目录，有一个文件“passenger.conf”正在加载旧版本的Passenger。

我删除了文件，保持新的 LoadModule 原样 - 从安装 apache2-module 时 Phusion Passenger 给我的指令复制，重新启动 apache 服务器，没有警告消息，乘客工作。

# objective-c - 从弹出窗口中选择项目时在主视图中调用函数

> ID：12920178
> 
> 赞同：0
> 
> 时间：2012-10-16T17:23:03.600
> 
> 标签：objective-c, ios, ipad, popover

在我的应用程序中，我有一个包含工具栏按钮的主视图。当这个按钮被点击时，一个弹出窗口用于显示另一个视图供用户选择一个项目。在我使用的其他弹出窗口中，当用户选择一个项目时，我不需要做任何涉及主视图的事情。现在我需要能够在主视图中调用一个函数，该函数将根据选择更改其显示。在弹出窗口中的视图的 TouchesEnd 结束时是否有一种快速的方法来执行此操作？感谢您的帮助，我是目标 c 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:59:26.393

能够使用 NSNotificationCenter 完成此操作。

# google-app-engine - GAE 的“连接”与“断开”数据模型：在这种情况下我应该如何进行？

> ID：12920179
> 
> 赞同：1
> 
> 时间：2012-10-16T17:23:05.433
> 
> 标签：google-app-engine, datanucleus

最好先举个例子来说明这种情况。假设我们有一个`User`类，它应该有一个`Post`.

第一个想法是在`User`类中创建这个列表，但是分析用例我们发现大多数时候我们想要检索没有帖子的用户并检索没有用户的帖子。但是，我们需要用户 ID 来检索帖子。因此，创建数据模型的另一种方法是没有关联，而是按ID创建`Post`索引。`User`

在成本方面，这两种实现方式的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:10:52.450

我之前的回答是假设您实际上是在 User 实体中存储 Post 对象列表。听起来您在询问 User 和 Post 是否都是实体，并且 User 存储了 Posts 的键列表。

第一种情况（具有 Post 实体的键列表的用户）的主要好处是它使您能够以一致的方式获取 Posts。获取 User 对象后，您可以读取 POSTS 列表并单独获取它们。数据存储区按密钥获取操作是一致的。根据您发出 get 操作的方式，这可能比查询慢。（即，如果您只使用 for 循环）。

可能还有一个非常小的其他好处，只要您不在用户中索引您的帖子列表，您就可以通过这种方式相对便宜地更新您的用户。举个极端的例子，如果你的用户一次添加了 5 个帖子，你可以将它们全部添加到列表中，然后通过一次写入操作写入用户一次。这并不是真的那么好，因为无论如何您可能都必须编写您的 Post 实体，但它是每个实体少一个索引写入操作。

用户实体的大小仍然有限制，因此您的列表将有最大限制。每个实体的索引条目数也有最大值，所以如果你索引列表，这可能是一个限制（但这也会使用户实体的编写成本更高）。

从阅读的角度来看，第一种情况不是最佳的。

从读取的角度来看，第二种情况效果更好，如果您有 User id，则更容易获取 Posts，但在编写 Post 时您有索引写入操作。如果你不经常写帖子，这会更好。请注意，查询实际上是一致的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:38:22.110

请参阅计费页面，特别是有关数据存储操作的部分：

[https://developers.google.com/appengine/docs/billing](https://developers.google.com/appengine/docs/billing)

每个实体的数据存储读取成本都会增加。每个索引属性的数据存储写入成本都会增加。

第一种方法会便宜得多，因为它只在一个用户实体上运行，并且不需要索引。

但是，成本可能不是您唯一的决定因素。每个实体限制为 1MB，因此如果您将帖子存储在您的用户实体中，您可能会碰壁。读取/写入实体的时间也取决于大小，因此大型实体将需要更长的时间来读取/写入。

# python - 在reportlab画布上获取表格的高度

> ID：12920185
> 
> 赞同：6
> 
> 时间：2012-10-16T17:23:30.123
> 
> 标签：python, pdf-generation, reportlab

我正在reportlab 画布上绘制表格。在绘图时，我们需要将表格的左下角坐标传递给 drawOn 方法。我的桌子的高度是动态的，因此它与桌子上方的元素重叠。我找不到任何返回要绘制的表格高度的方法。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-25T19:10:53.483

这是一个简单的事情，被动地展示了，但在 reportlab 文档中没有明确解决：

```
t = Table(tableData, style=tStyle)
t.canv = myCanvas
w, h = t.wrap(0, 0) 
```

然后变量 w 和 h 将分别存储表格的宽度和高度。

# java - 如何使用列表生成选项卡

> ID：12920186
> 
> 赞同：0
> 
> 时间：2012-10-16T17:23:33.437
> 
> 标签：java, jsf, jsf-2, primefaces

我想`p:tabView`用 Java 列表生成。到目前为止，这是我测试过的代码：

JSF 页面：

```
<p:tabView value="#{bean.tabs}" var="listItem">

    <p:tab title="#{listItem.tabid}">

`   <ui:include src="#{listItem.tabfilename}" />

    </p:tab>
</p:tabView> 
```

托管豆：

```
List<TabObject> tabs = new ArrayList<>();

    @PostConstruct
    public void init() {
        tabs.add(new TabObject("tab1.xhtml", "General"));
        tabs.add(new TabObject("tab2.xhtml", "History"));

    }

    public class TabObject {

        String tabfilename;
        String tabid;

        public TabObject(String tabfilename, String tabid) {
            super();
            this.tabfilename = tabfilename;
            this.tabid = tabid;
        }

        public String getTabfilename() {
            return tabfilename;
        }

        public void setTabfilename(String tabfilename) {
            this.tabfilename = tabfilename;
        }

        public String getTabid() {
            return tabid;
        }

        public void setTabid(String tabid) {
            this.tabid = tabid;
        }        
    }

    public List<TabObject> getTabs() {
        return tabs;
    } 
```

但由于某种原因，它不起作用。我可以看到生成的选项卡标题，但选项卡的正文是空的。你能帮我修复我的代码吗？

更新：

简单的选项卡运行良好：

```
<p:tabView dynamic="true" cache="false">
    <p:tab id="tab1" title="General" >
        <ui:include src="tab1.xhtml" />
    </p:tab>
    <p:tab id="tab2" title="Group Accounts" >
        <ui:include src="tab2.xhtml" />
    </p:tab>   
    <p:tab id="tab3" title="History" >
        <ui:include src="tab3.xhtml" />
    </p:tab>
</p:tabView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:51:29.797

我认为这是你的吸气剂/二传手。它采用 get(Capitol letter) 的约定。将它们更改为支持 bean 上的 getTabfilename、setTabfilename 等。

# core-data - 如何从 Core Data (Xcode) 中的 managedObjectContext 读取对象

> ID：12920192
> 
> 赞同：0
> 
> 时间：2012-10-16T17:24:03.657
> 
> 标签：core-data, nsarraycontroller, nspersistentdocument, managedobjectcontext

我有一个程序可以在 tableView 中获取一些数字。我有一个基于核心数据的程序，它有一个带有一些属性的实体，并且可以将 tableview 的列绑定到这些属性。现在我想要每列的总和，但找不到如何读取行中的每个数据来添加它们。我用了

> NSString* S= [self.managedObjectContext valueAtIndex:1 inPropertyWithKey:@"aColumnName" ];

但我收到此错误：

> 此类与键名的键值编码不兼容。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:37:01.100

对不起，我找到了。我应该使用 @"selection.aColumnName"

# xml - cfscript 标记输出中的 xml 注释

> ID：12920198
> 
> 赞同：3
> 
> 时间：2012-10-16T17:24:16.447
> 
> 标签：xml, json, coldfusion, coldfusion-9

我正在尝试将查询对象输出为 JSON。我发现了一些建议使用 ColdFusion`cfscript`标记和`serializeJSON`函数的代码：

```
<cfscript>
  theJSON = SerializeJSON(queryObj);
  writeOutput(theJSON);
</cfscript> 
```

这可以从查询对象创建 JSON。然而，在输出 json 的末尾总是附加一个 xml 注释，如下所示：

```
{"COLUMNS":["ID","VALUE"],"DATA":[["12345","abcd"]]} <!-- 113760 --> 
```

xml 注释中的数字总是随机生成的。因为这是 xml，所以它不是有效的 json。我想摆脱它，但我不确定如何。有什么想法为什么会出现这个 xml，或者我该如何摆脱它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:59:47.247

很可能您还有其他输出该评论的东西。使用查询和您发布的代码创建一个单独的文件。运行代码，看看你是否还有同样的问题。如果您的上下文中有这些文件，请确保查看`Application.cfm`或文件。`Application.cfc`您也可以尝试插入`abort`代码以查看问题是否仍然存在：

```
<cfscript>
  theJSON = SerializeJSON(queryObj);
  writeOutput(theJSON);
  abort;
</cfscript> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T21:44:09.483

113760 可能是一个幻数或正在生成的字节数。搜索`<!-- #`or`<cfoutput><!--`或`<!-- <cfouput`可能有助于找到生成 html 注释的代码

# parsing - (Show ([(String, Int)] -> Int)) 没有实例

> ID：12920205
> 
> 赞同：0
> 
> 时间：2012-10-16T17:24:35.597
> 
> 标签：parsing, haskell, lambda, happy

如果我使用 lambda 表达式，那么在快乐的生产规则中动态计算表达式的值是行不通的。

例如这段代码

```
Exp   : let var '=' Exp in Exp  { \p -> $6 (($2,$4 p):p) }
      | Exp1                    { $1 }

Exp1  : Exp1 '+' Term           { \p -> $1 p + $3 p }
      | Exp1 '-' Term           { \p -> $1 p - $3 p }
      | Term                    { $1 }

Term  : Term '*' Factor         { \p -> $1 p * $3 p }
      | Term '/' Factor         { \p -> $1 p `div` $3 p }
      | Factor                  { $1 }

Factor            
      : int                     { \p -> $1 }
      | var                     { \p -> case lookup $1 p of
                                    Nothing -> error "no var"
                                     Just i  -> i }
      | '(' Exp ')'             { $2 } 
```

来自[http://www.haskell.org/happy/doc/html/sec-using.html](http://www.haskell.org/happy/doc/html/sec-using.html)不起作用。

或者更准确地说，我收到了一条错误消息

```
No instance for (Show ([(String, Int)] -> Int))
      arising from a use of `print'
    Possible fix:
      add an instance declaration for (Show ([(String, Int)] -> Int))
    In a stmt of an interactive GHCi command: print it 
```

如果你能解释一下我必须改变什么，那就太好了。

它必须与 lambda 表达式和环境变量 p 有关。

当我使用数据类型时，一切都很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T17:55:02.603

这里要注意的是，这个解析器的结果是一个*函数*，它采用变量绑定的环境。报错信息基本上是GHCi告诉你不能打印函数，大概是因为你忘了传环境

```
> eval "1 + 1" 
```

当您应该通过一个空环境时

```
> eval "1 + 1" [] 
```

或带有一些预定义变量的

```
> eval "x + x" [("x", 1)] 
```

# c# - 向图像（位图）添加框架并保存 - 边框错误

> ID：12920207
> 
> 赞同：0
> 
> 时间：2012-10-16T17:24:57.757
> 
> 标签：c#

我正在尝试打开图像，为其添加边框并将图像保存在 C# 中。

我得到了一个代码，我猜这是堆栈溢出的答案。这里是：

```
 public Bitmap AddBorder(Bitmap image, Color color, int size)
    {
        Bitmap result = new Bitmap(image.Width + size * 2, image.Height + size * 2);
        Graphics g = Graphics.FromImage(result);
        g.Clear(color);
        int x = (result.Width - image.Width) / 2;
        int y = (result.Height - image.Height) / 2;
        g.DrawImage(image, new Point(x, y));
        g.Dispose();
        return result;
    } 
```

我使用以下方法保存图像：`resultimage.save(fileName);`

我用大小为 5MP 的图像对其进行了测试。并将图像保存到磁盘。但是有一个错误。

结果的左侧和顶部有一个边框。图像似乎被放大了。例如，保存的图像会丢失部分内容（从正确的尺寸和底部）。

我做错什么了吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:44:31.000

当输入位图的分辨率与视频适配器的分辨率不匹配时，这将出错。您可以使用调试器看到的东西。`image.HorizontalResolution`为和添加手表`result.HorizontalResolution`。你只会偶然得到一场比赛。DrawImage(Image, Point) 将重新缩放图像以使分辨率匹配，以使图像的外观尺寸与设计位图的机器上的尺寸相同。

您可以通过使用 Graphics.DrawImage(Image, Rectangle) 重载来解决它，这样您就可以直接控制图像的最终大小。使固定：

```
 g.DrawImage(image, new Rectangle(x, y, image.Width, image.Height)); 
```

# javascript - 保存对 .innerHTML 的引用

> ID：12920208
> 
> 赞同：1
> 
> 时间：2012-10-16T17:25:18.363
> 
> 标签：javascript

这有效：

```
var button = $A("#aba_but_del")[0];
button.innerHTML = Su.Ani.flipPane.p1; 
```

但这不起作用

```
var button_text = $A("#aba_but_del")[0].innerHTML;
button_text = Su.Ani.flipPane.p1; 
```

为什么？

根据[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)，`.`优先级最高。这是否意味着`.innerHTML`正在应用`[0]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:28:06.440

javascript 中的所有原语都是不可变的。这意味着以下代码只是更改了字符串的不同实例：

```
button_text = Su.Ani.flipPane.p1; 
```

在第一种情况下，按钮是一个引用 DOM 元素的对象。因此，当更改 innerHTML 属性值时，您正在更改 DOM 元素本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T17:28:30.933

`button_text = ...`用值替换变量。

`button.innerHTML = ...`替换对象的属性，这反过来又会影响显示的 HTML，因为 setter 函数对该属性的工作方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T17:44:11.360

您不能引用属性。

当你这样做时：

```
var button = $A("#aba_but_del")[0]; 
```

您将获得对该元素的引用，因此稍后您可以使用该引用来访问该元素的成员。

当你这样做时：

```
var button = $A("#aba_but_del")[0].innerHTML; 
```

你得到了属性的值，而不是对属性的引用。该值是您分配给`button`变量的字符串，并且为变量分配不同的字符串不会更改第一个字符串，也不会更改从其中复制该字符串的对象。

> “. 具有最高优先级。这是否意味着 .innerHTML 被应用于 [0]？”

不，`[]`运算符与运算符具有相同的优先级`.`，因为它们实际上是相同的运算符，因此它们是从左到右计算的。using`obj['name']`与 相同`obj.name`，但`.`运算符不能与不遵循标识符规则的属性名称一起使用，例如数字索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T17:26:40.943

1) button_text 是一个字符串，不再绑定到按钮 DOM 对象。所以改变它不会影响按钮元素。

2) *这是否意味着 .innerHTML 被应用于 [0]？*是的。“。” 和“[]”从左到右具有相同的优先级。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-16T17:29:07.183

JavaScript 没有指针之类的东西。如果你给一个变量赋值，你会覆盖之前的值。您要分配给DOM*对象的*`innerHTML` *属性*，从而更改页面呈现。

# python - Python `for` 语法：块代码与单行生成器表达式

> ID：12920214
> 
> 赞同：37
> 
> 时间：2012-10-16T17:25:29.270
> 
> 标签：python, for-loop

我熟悉`for`块代码上下文中的循环。例如：

```
for c in "word":
    print c 
```

我刚刚遇到了一些使用`for`不同的例子。他们不是从`for`语句开始，而是在表达式的末尾标记它（并且不涉及缩进的代码块）。例如：

```
sum(x*x for x in range(10)) 
```

谁能给我指出一些概述这种用法的文档`for`？我已经能够找到示例，但找不到解释。`for`我能找到的所有文档都描述了以前的使用（块代码示例）。我什至不知道该怎么称呼这种用途，所以如果我的问题标题不清楚，我深表歉意。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-16T17:27:41.083

你所指的是`Generator`Python。看一眼： -

*   [http://wiki.python.org/moin/Generators](http://wiki.python.org/moin/Generators)
*   [http://www.python.org/dev/peps/pep-0255/](http://www.python.org/dev/peps/pep-0255/)
*   [http://docs.python.org/whatsnew/2.5.html#pep-342-new-generator-features](http://docs.python.org/whatsnew/2.5.html#pep-342-new-generator-features)

请参阅文档： -[`Generator Expression`](http://docs.python.org/tutorial/classes.html#generator-expressions)其中包含您发布的完全相同的示例

从文档中： -

> 生成器是用于创建迭代器的简单而强大的工具。它们像常规函数一样编写，但只要它们想要返回数据就使用 yield 语句。每次调用 next() 时，生成器都会从它停止的地方恢复（它会记住所有数据值以及最后执行的语句）

生成器类似于`List Comprehension`您使用 with`square brackets`而不是`brackets`，但它们的内存效率更高。它们不会同时返回完整`list`的结果，而是返回生成器对象。每当您`next()`在`generator`对象上调用时，生成器都会使用它`yield`来返回下一个值。

`List Comprehension`对于上面的代码看起来像： -

```
[x * x for x in range(10)] 
```

您还可以在 for 末尾添加条件以过滤掉结果。

```
[x * x for x in range(10) if x % 2 != 0] 
```

如果数字不能被 2 整除，这将返回`numbers`1 到 5 范围内的乘以 2 的列表。

`Generators`描述使用的示例`yield`可以是：-

```
def city_generator():
    yield("Konstanz")
    yield("Zurich")
    yield("Schaffhausen")
    yield("Stuttgart")

>>> x = city_generator()
>>> x.next()
Konstanz
>>> x.next()
Zurich
>>> x.next()
Schaffhausen
>>> x.next()
Stuttgart
>>> x.next()
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
StopIteration 
```

所以，你看，每次调用都会`next()`执行下一个`yield()`in `generator`。最后它抛出`StopIteration`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-16T17:35:44.607

这些是[生成器表达式](http://docs.python.org/tutorial/classes.html#generator-expressions)，它们与[列表推导有关](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

列表推导允许轻松创建列表。例如，如果你想创建一个完美正方形列表，你可以这样做：

```
>>> squares = []
>>> for x in range(10):
...     squares.append(x**2)
...
>>> squares
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

但是，您可以使用列表推导：

```
squares = [x**2 for x in range(10)] 
```

生成器表达式类似于列表推导，除了它们返回生成器对象而不是列表。您可以以与列表推导类似的方式迭代此生成器对象，但您不必一次将整个列表存储在内存中，就像您在列表推导中创建列表一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:30:44.300

您的具体示例称为[生成器表达式](http://docs.python.org/tutorial/classes.html#generator-expressions)。[列表推导](https://www.python.org/dev/peps/pep-0202/)、[字典推导](http://www.python.org/dev/peps/pep-0274/)和[集合推导](http://docs.python.org/py3k/tutorial/datastructures.html#sets)在含义上相似（不同的结果类型，并且生成器表达式是惰性的）并且具有相同的语法，模数位于其他类型的括号内，并且在 dict 推导的情况下，使用`expr1: expr2`而不是单个表达式（在您的示例中为 x*x）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-01T06:24:11.497

生成器表达式的文档在这里[https://www.python.org/dev/peps/pep-0289/](https://www.python.org/dev/peps/pep-0289/) 以下是使用生成器表达式的代码。

```
list(x**2 for x in range(0,10)) 
```

# list - 如何匹配在其 rdfs:label 属性中有特定条目的记录？

> ID：12920215
> 
> 赞同：1
> 
> 时间：2012-10-16T17:25:37.837
> 
> 标签：list, contains, sparql

我正在尝试按名称查询 dbpedia 以获取诸如 D 之类的编程语言：

[http://dbpedia.org/page/D_(programming_language)](http://dbpedia.org/page/D_%28programming_language%29)

我`rdfs:label`认为这是一个很好的方法。但是我在想出通过包含“D（编程语言）”的标签进行搜索的语法时遇到了麻烦。在 dpbedia`rdfs:labels`中，不仅仅是字符串，它们更像是列表。如何过滤具有特定条目的记录`rdfs:label`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:32:51.423

在[dbpedia](http://dbpedia.org/sparql)中工作！根据 AndyS 的回答：

```
SELECT DISTINCT ?lang {
    ?lang rdf:type <http://dbpedia.org/ontology/ProgrammingLanguage> .
    ?lang rdfs:label "D (programming language)"@en
}
Limit 1 
```

# css - 没有绝对位置的动态父级的浮动div 100％高度？

> ID：12920216
> 
> 赞同：7
> 
> 时间：2012-10-16T17:25:46.823
> 
> 标签：css, html, xhtml, height

我在这里做了很多阅读，但找不到我的答案的解决方案。

根据下面的 html，我有一个容器 div，有多个浮动的左 div。

```
<div class="catbg0" id="b1">

    <div class="catb1">#</div>
    <div class="catb2">Board Name</div>
    <div class="catb3">Topics</div>
    <div class="catb4">Posts</div>
    <div class="catb5">Last Post</div>
    <div class="clearboth"></div>

</div> 
```

我的问题是 .catbg0 没有特定的高度，.catb2 的内容将其推低到它的高度，并且由于内容可以变化，我无法设置特定的高度。我希望其余的 .catb 类达到 .catbg0 类的 100% 高度，但设置 height: 100%; 不起作用。

下面是与上述相关的 CSS。

```
.catb1 {float: left; width: 9%; height: 100%; min-height: 100%;}
.catb2 {float: left; width: 52%; height: 100%; min-height: 100%;}
.catb3 {float: left; width: 8%; height: 100%; min-height: 100%;}
.catb4 {float: left; width: 8%; height: 100%; min-height: 100%;}
.catb5 {float: left; width: 23%; height: 100%; min-height: 100%;}
.clearboth {clear: both; height:0; width: 0; margin: 0; padding: 0;} 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:01:49.223

据我所知，只有带有 position:absolute 的块可能是 100% 高度及其子级。

如果您确定 .catb2 具有 .catb* 的最大高度，请尝试添加包装器：

```
<div class="catbg0" id="b1">

    <div class="catb2">Board Name</div>

    <div class="wrapper">
        <div class="catb1">#</div>
        <!-- margin == catb2 width -->
        <div class="catb3">Topics</div>
        <div class="catb4">Posts</div>
        <div class="catb5">Last Post</div>
    </div>

    <div class="clearboth"></div>

</div> 
```

CSS

```
.catbg0 { position: relative; }
.wrapper { position: absolute; width: 100%; height: 100%; }
.catb2 { margin-left: /* catb1 width here */  } 
```

PS 也许对你有用 -[一个新的 micro clearfix hack](http://nicolasgallagher.com/micro-clearfix-hack/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:41:38.630

我不太确定。但是给容器（catbg0）一个溢出：隐藏；可能工作。通常这样做是拉伸它应用到的 div（当未设置特定高度时）。

注意：它仍然是溢出、长词等，并且 div 将继续运行，因为溢出掩盖了 div。

# javascript - 双击时div（contenteditable）中的文本选择

> ID：12920225
> 
> 赞同：9
> 
> 时间：2012-10-16T17:26:08.460
> 
> 标签：javascript, jquery, contenteditable, textselection

我有一些文本和 contenteditable="true" 的 div。当我单击此 div 时 - 运行我的一些脚本，它不是很重要。当我双击这个 div 时 - 需要在 div 中编辑文本。编辑文本只需要在双击之后，而不是在单击之后。并且非常重要，当我双击 div 时 - 插入符号需要停留在鼠标光标下。无需选择文本。我找到了一些单/双的脚本。但是有问题。当我双击 div - 文本是选择。选择不需要。在我点击的地方需要编辑插入符号。我不明白怎么做。 [http://jsfiddle.net/X6auM/](http://jsfiddle.net/X6auM/)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-16T22:33:14.337

当前的每个主流浏览器都提供了一个 API 来从鼠标事件创建范围，尽管需要四个不同的代码分支。

这里有一些背景：

*   [https://stackoverflow.com/a/10659990/96100](https://stackoverflow.com/a/10659990/96100)
*   [https://stackoverflow.com/a/12705894/96100](https://stackoverflow.com/a/12705894/96100)
*   [从 FF/Webkit 中的像素位置创建折叠范围](https://stackoverflow.com/q/3189812/96100)

这是一个演示：http: [//jsfiddle.net/timdown/krtTD/10/](http://jsfiddle.net/timdown/krtTD/10/)

这是一些代码：

```
function getMouseEventCaretRange(evt) {
    var range, x = evt.clientX, y = evt.clientY;

    // Try the simple IE way first
    if (document.body.createTextRange) {
        range = document.body.createTextRange();
        range.moveToPoint(x, y);
    }

    else if (typeof document.createRange != "undefined") {
        // Try Mozilla's rangeOffset and rangeParent properties,
        // which are exactly what we want
        if (typeof evt.rangeParent != "undefined") {
            range = document.createRange();
            range.setStart(evt.rangeParent, evt.rangeOffset);
            range.collapse(true);
        }

        // Try the standards-based way next
        else if (document.caretPositionFromPoint) {
            var pos = document.caretPositionFromPoint(x, y);
            range = document.createRange();
            range.setStart(pos.offsetNode, pos.offset);
            range.collapse(true);
        }

        // Next, the WebKit way
        else if (document.caretRangeFromPoint) {
            range = document.caretRangeFromPoint(x, y);
        }
    }

    return range;
}

function selectRange(range) {
    if (range) {
        if (typeof range.select != "undefined") {
            range.select();
        } else if (typeof window.getSelection != "undefined") {
            var sel = window.getSelection();
            sel.removeAllRanges();
            sel.addRange(range);
        }
    }
}

document.getElementById("editor").ondblclick = function(evt) {
    evt = evt || window.event;
    this.contentEditable = true;
    this.focus();
    var caretRange = getMouseEventCaretRange(evt);

    // Set a timer to allow the selection to happen and the dust settle first
    window.setTimeout(function() {
        selectRange(caretRange);
    }, 10);
    return false;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-01T11:16:18.010

```
$('p').dblclick(function(event) {
  $this = $(this);
  $this.attr('contenteditable', "true");
  $this.blur();
  $this.focus();
}); 
```

[http://jsfiddle.net/krtTD/90/](http://jsfiddle.net/krtTD/90/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-23T09:23:01.157

```
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- <link rel="stylesheet" href="../tailwind.css" /> -->
</head>

<body>
    <div id="editor" style="user-select:none;" contenteditable="false">Some editableasa text. Double click to eadsit</div>
    <script>
        function getMouseEventCaretRange(evt) {
            var range, x = evt.clientX, y = evt.clientY;

            // Try the simple IE way first
            if (document.body.createTextRange) {
                range = document.body.createTextRange();
                range.moveToPoint(x, y);
            }

            else if (typeof document.createRange != "undefined") {
                // Try Mozilla's rangeOffset and rangeParent properties, which are exactly what we want

                if (typeof evt.rangeParent != "undefined") {
                    range = document.createRange();
                    range.setStart(evt.rangeParent, evt.rangeOffset);
                    range.collapse(true);
                }

                // Try the standards-based way next
                else if (document.caretPositionFromPoint) {
                    var pos = document.caretPositionFromPoint(x, y);
                    range = document.createRange();
                    range.setStart(pos.offsetNode, pos.offset);
                    range.collapse(true);
                }

                // Next, the WebKit way
                else if (document.caretRangeFromPoint) {
                    range = document.caretRangeFromPoint(x, y);
                }
            }

            return range;
        }

        function selectRange(range) {
            if (range) {
                if (typeof range.select != "undefined") {
                    range.select();
                } else if (typeof window.getSelection != "undefined") {
                    var sel = window.getSelection();
                    sel.removeAllRanges();
                    sel.addRange(range);
                }
            }
        }

        document.getElementById("editor").ondblclick = function (evt) {
            evt = evt || window.event;
            this.contentEditable = true;

            this.focus();
            var caretRange = getMouseEventCaretRange(evt);
            selectRange(caretRange);
            this.style = ""
        };

    </script>
</body>

</html>
```

已接受答案的改进，它不会创建临时闪存，它使用 css 用户选择属性来获得优势

# android - 由于以编程方式插入数据，ScrollView 不可滚动？

> ID：12920227
> 
> 赞同：2
> 
> 时间：2012-10-16T17:26:21.583
> 
> 标签：android, scrollview, scrollable

我在 stackoverflow.com 上看过几次不可滚动的 ScrollView，但没有一个建议的解决方案对我有用。我希望有人能帮帮忙。

我有一个包含 TableLayout 的 ScrollView。TableLayout 是空的，但我以编程方式插入行和列。我猜我需要告诉 ScrollView TableLayout 已更改/更新，并且 ScrollView 需要重新计算是否需要启用滚动。

我试图使 ScrollView 和 TableLayout 都无效，我尝试了 requestLayout()，但似乎什么也没做。我错过了什么？

这是我的布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroller"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true"
    android:scrollbars="horizontal|vertical" >

            <TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:stretchColumns="*"
            android:id="@+id/maintable" >
        </TableLayout>
</ScrollView> 
```

这是我的 Java 代码。基本上，此代码为每个玩家添加一行，并在每个玩家旁边添加 25 个按钮。按钮在那里，但它们超出了屏幕边界。

```
 // Get the TableLayout
    TableLayout tl = (TableLayout) findViewById(R.id.maintable);

    // Go through each item in the array
    for (int player = 0; player < players.length; player++)
    {

        // Create a TableRow and give it an ID
        TableRow tr = new TableRow(this);

        tr.setId(100+player);
        tr.setLayoutParams(new LayoutParams(
                LayoutParams.MATCH_PARENT,
                LayoutParams.WRAP_CONTENT));   

        // Create a TextView to add the player name
        TextView labelTV = new TextView(this);
        labelTV.setId(200+player);
        labelTV.setText(players[player]);
        //labelTV.setTextColor(Color.BLACK);
        labelTV.setLayoutParams(new LayoutParams(
                LayoutParams.MATCH_PARENT,
                LayoutParams.WRAP_CONTENT));
        tr.addView(labelTV);

        // numShots = 25
        for (int shot = 0; shot < numShots; shot++)
        {
            Button shotButton = new Button(this);
            shotButton.setId((player * 100) + shot);
            shotButton.setText(Integer.toString(shot));
            tr.addView(shotButton);

        }

        tl.addView(tr, new TableLayout.LayoutParams(
                LayoutParams.MATCH_PARENT,
                LayoutParams.WRAP_CONTENT));

        //  Add the TableRow to the TableLayout
            //};
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:44:52.403

我想你需要一个水平滚动？ScrollView 只做垂直滚动，你需要看看 Horizo [​​ntalScrollView](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)。

# c# - Gridview RowUpdating 事件出错。

> ID：12920228
> 
> 赞同：-1
> 
> 时间：2012-10-16T17:26:22.973
> 
> 标签：c#, asp.net

我有一个手动编程的网格视图。我拥有所有事件的所有方法，一切似乎都在工作，但 RowUpdating 事件。我收到此错误：“对象引用未设置为对象的实例。” 我无法弄清楚这里发生了什么。所有控件都输入了值。这是我的代码。我究竟做错了什么？？

```
 protected void Gridview1_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {

            SqlCommand cmd = new SqlCommand();

            cmd.CommandText =    "update t_sizer_calibration " +
                                 "set " +
                                 "date = @date " +
                                 " time = @time, " +
                                 "name = @name, " +
                                 "lane = @lane, " +
                                 "carriers = @carrier, " +
                                 "rev = @REV, " +
                                 "new_tare = @n_tare, " +
                                 "current_tare = @ctare, " +
                                 "min = @min, " +
                                 "max = @max," +
                                 "sd = @sd, " +
                                 "wai = @wai, " +
                                 "bad_carriers = @badcar, " +
                                 "comments = @comments " + 
                                 "where calibration_id = @calibration_id"; 

            // define parameters
            cmd.Parameters.Add("@calibration_id", SqlDbType.VarChar).Value = glblID.Text;
            cmd.Parameters.Add("@date", SqlDbType.VarChar).Value = gtxtDate.Text; 
            cmd.Parameters.Add("@time", SqlDbType.VarChar).Value = gtxtTime.Text;
            cmd.Parameters.Add("@name", SqlDbType.Int).Value = glblName.Text;
            cmd.Parameters.Add("@lane", SqlDbType.Int).Value = Convert.ToInt32(gtxtLane.Text);
            cmd.Parameters.Add("@carrier", SqlDbType.Decimal).Value = Convert.ToDecimal(gtxtCarriers.Text);
            cmd.Parameters.Add("@REV", SqlDbType.Decimal).Value = Convert.ToDecimal(gtxtREV.Text);
            cmd.Parameters.Add("@n_tare", SqlDbType.Decimal).Value = Convert.ToDecimal(gtxtN_Tare.Text);
            cmd.Parameters.Add("@ctare", SqlDbType.Decimal).Value = Convert.ToDecimal(gtxtC_Tare.Text);
            cmd.Parameters.Add("@min", SqlDbType.Decimal).Value = Convert.ToDecimal(gtxtMin.Text);
            cmd.Parameters.Add("@max", SqlDbType.Decimal).Value = Convert.ToDecimal(gtxtMax.Text);
            cmd.Parameters.Add("@sd", SqlDbType.Decimal).Value = Convert.ToDecimal(gtxtSD.Text);
            cmd.Parameters.Add("@wai", SqlDbType.Decimal).Value = Convert.ToDecimal(gtxtWAI.Text);
            cmd.Parameters.Add("@badcar", SqlDbType.Int).Value = Convert.ToInt32(gtxtBadCarriers.Text);
            cmd.Parameters.Add("@comments", SqlDbType.VarChar).Value = gtxtComments.Text; 

            cmd.CommandType = CommandType.Text;
            cmd.Connection = this.sqlConnection1;
            this.sqlConnection1.Open();
            //execute insert statement
            cmd.ExecuteNonQuery();
            this.sqlConnection1.Close();          
            //re-populate grid 
            fill_grid();
            GridView1.EditIndex = -1;
            GridView1.DataBind();

        } 
```

这也是我的 rowupdated 方法：

```
 protected void GridView1_RowUpdated(object sender, GridViewUpdatedEventArgs e)
    {
        fill_grid();
        //Reset the edit index.
        GridView1.EditIndex = -1;
        //Bind data to the GridView control.
        GridView1.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:13:41.930

我想到了。您必须使用 FindControl 来获取更新语句的新值。

如下所示：

```
 GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];
            int id = Int32.Parse(GridView1.DataKeys[e.RowIndex].Value.ToString());
            TextBox comm = (TextBox)row.FindControl("gtxtComments");
            TextBox date = (TextBox)row.FindControl("gtxtDate"); ....... and so on. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:35:52.890

根据[此页面](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewupdateeventargs_properties%28v=vs.100%29.aspx)，您绑定的行中的值将在事件参数的 、 和 属性中`Keys`返回`OldValues`给您。`NewValues`所以你根本不需要访问控制值。

我会尝试类似的东西：

```
cmd.Parameters.Add("@calibration_id", SqlDbType.VarChar).Value = e.NewValues["ID"];
cmd.Parameters.Add("@date", SqlDbType.VarChar).Value = e.NewValues["date"]; 
```

...看看这是否能让你有所收获。

# ios - 1024x1024 应用程序图标在哪里使用？

> ID：12920229
> 
> 赞同：26
> 
> 时间：2012-10-16T17:26:23.360
> 
> 标签：ios, cocoa-touch, app-store, icons

Apple 现在要求为 App Store 提交 1024x1024 图标。我在哪里可以看到使用此图标的示例？我可以在 iTunes 商店中找到的最大图标约为 180x180 - 即使在视网膜屏幕上，360x360 也足够了。

我正在花一些时间来设计我的图标的大版本，但如果它要缩小，我需要为此设计，不是吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-16T17:29:42.863

大版本的图标用于生成较小的版本，以便在应用商店和其他需要与您提交的尺寸不同的图标的地方显示。这样，如果他们需要 162 px 正方形或 204 px 正方形或其他图标的版本，他们在较大的版本中有足够的像素以确保在较小的尺寸下进行合理的呈现。

苹果曾经为此需要一个 512 x 512 像素的图标——听起来他们已经将分辨率翻倍以支持视网膜显示器。

请记住，我们在这里谈论的是*百万像素*图像，而不是 32 x 32 像素的小图标。当您处理小图标时，您必须手动调整每个像素以获得您尝试表示的图像的最佳近似值。当您谈论从 1024 像素正方形缩放到 360 像素正方形时，除非您在大尺寸上添加了一些非常精细的细节，否则应该没有问题。**不要那样做。**

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-04T08:16:10.877

您可以在应用预览页面的源代码中找到所有 1024x1024 png 文件。

这是诀窍：

1.  转到应用程序页面：[https ://itunes.apple.com/us/app/facebook-messenger/id454638411?mt=8](https://itunes.apple.com/us/app/facebook-messenger/id454638411?mt=8)
2.  查看页面源代码 (CTRL + U)
3.  找到 "property="og:image" 部分。(CTRL + F) `<meta content="http://a4.mzstatic.com/us/r30/Purple/v4/c0/92/69/c09269c0-85ca-fd85-5f0f-f235dff13ff8/mzl.lyucgsnh.png" property="og:image" /`

4.  复制 png 的 url，并粘贴到浏览器： http: [//a4.mzstatic.com/us/r30/Purple/v4/c0/92/69/c09269c0-85ca-fd85-5f0f-f235dff13ff8/mzl.lyucgsnh。 PNG](http://a4.mzstatic.com/us/r30/Purple/v4/c0/92/69/c09269c0-85ca-fd85-5f0f-f235dff13ff8/mzl.lyucgsnh.png)

瞧！:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T17:31:08.600

来自苹果：

> 从 7 月开始，新提交的 iOS 应用程序需要高分辨率图标和封面。大图标和报亭封面艺术的最低分辨率必须为 1024 x 1024 像素。要更改您的应用程序图标或封面，请转到 iTunes Connect 上的“管理您的应用程序”模块。有关更多信息，请参阅 iOS 开发人员库中的自定义图标和图像创建指南。

由于目前最大的将是 iPad 3 Retina，因此该图标将用于 AppStore 大图标，它曾经是 512 x 512，因此对于 Retina 来说是两倍。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T17:28:41.650

根据[iOS 人机界面指南，1024x1024 图标适用于应用商店。](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/MobileHIG/IconMatrix.html). 该表表明它是：

> 应用商店的应用图标

我想这是为了视网膜和促销目的。因此，Apple 可以制作商店中的大横幅和较小的图标。

# java - 通过 web start 启动 Java 应用程序

> ID：12920231
> 
> 赞同：1
> 
> 时间：2012-10-16T17:26:33.753
> 
> 标签：java, netbeans, jnlp, java-web-start

我已经用 Netbeans 生成了一个 jnlp 文件。通过双击它，我得到以下错误对话框：

![在此处输入图像描述](../Images/08aa00ed3109fdac871c0fbc002fdd2d.png)

双击 jar 可以工作，所以没有问题，但是当双击 jnlp 文件时，会出现前面的错误。

该`launch.jnlp`文件如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<jnlp href="launch.jnlp" spec="1.0+">
    <information>
        <title>...</title>
        <vendor>....</vendor>
        <homepage href=""/>
        <description>...</description>
        <description kind="short">....</description>
        <icon href="icon.png" kind="default"/>
        <offline-allowed/>
    </information>
    <update check="background"/>
    <resources>
        <j2se version="1.6+"/>
        <jar href="File.jar" main="true"/>
        <jar href="lib/itextpdf-5.3.3.jar"/>
    </resources>
    <application-desc main-class="right.path.to.my.main.class.here">
    </application-desc>
</jnlp> 
```

我将它放在`File.jar`与 jnlp 文件相同的目录中（所有其他文件也都在那里）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:53:09.700

我向元素添加了`codebase`属性，添加了`jnlp`

```
<security>
    <all-permissions />
</security> 
```

并对应用程序进行签名（右键单击 Netbeans 中的项目，选择`Properties`并`Application -> Web start`在那里签名），现在它可以工作了。

# javascript - 未捕获的类型错误：无法调用 null 的方法“css”（匿名函数）-Joomla 1.5

> ID：12920234
> 
> 赞同：0
> 
> 时间：2012-10-16T17:26:51.770
> 
> 标签：javascript, jquery, joomla, joomla1.5

我的问题是 Cookie Law 栏不会隐藏... [http://www.kasedesign.co.uk/scc/](http://www.kasedesign.co.uk/scc/)

相同的代码在我做过的其他网站上隐藏得很好，例如[http://www.kasedesign.co.uk/spa/](http://www.kasedesign.co.uk/spa/) 虽然我之前没有在 Joomla 网站上使用过这个代码。

我在这里读到，在 Window OnLoad 中包含脚本可能会有所帮助，它消除了我的错误，但 cookie 栏并没有隐藏。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:37:52.827

在您的 spa 网站上，`js/cookielaw.js`没有调用该文件，实际上它是通过相对 url 调用并`/spa/js/cookielaw.js`返回 404 错误，因此没有加载任何代码。

在您的其他网站（关于汽车）上，url 是绝对`/scc/js/cookielaw.js`的：因此脚本已加载。

问题是当您调用该脚本时 DOM 尚未准备好，因此 jQuery 返回错误。

尝试将脚本的开头更改为：

```
// Cookie Law
// -----------------------------------------------------------------------------

$('html').css('padding-top','35px');
$('.cookiedisclaimer').show();

(function($) {
    //... 
```

至

```
// Cookie Law
// -----------------------------------------------------------------------------

(function($) {

    $('html').css('padding-top','35px');
    $('.cookiedisclaimer').show();
    //... 
```

这是更简单、更快捷的修复方法。

一种更简洁的方法是像这样启动您的脚本：

```
// Cookie Law
// -----------------------------------------------------------------------------

$(document).ready(function() {
    $('html').css('padding-top','35px');
    $('.cookiedisclaimer').show();
}) ;

(function($) {
    //... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:06:15.673

感谢您的帮助...我意识到有一个被调用的 cookie 脚本在 spa 浴室站点中不存在。我会解决这个问题。

我尝试了您的解决方案，但它们没有帮助。

之前有人提到 jQuery 冲突可能导致我的问题，但后来删除了他们的评论。

因此，我添加了以下内容... jQuery.noConflict();

然后我将 $ 替换为 jQuery，一切正常。

感谢任何花时间研究这个问题的人！

# c++ - 对 push_front 属性有点困惑。intList.push_front(2 * intList.back()) 究竟会做什么？

> ID：12920239
> 
> 赞同：0
> 
> 时间：2012-10-16T17:27:14.937
> 
> 标签：c++, iterator, linked-list

我有一个包含特定数字的链表，称为 intList。什么会

```
intList.push_front(2 * intList.back()); 
```

对我的清单做些什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T17:28:28.383

它将在列表前面添加两倍的列表最后一个元素的值，将列表的长度增加一倍。这假定您的列表包含可以使用整数乘以整数的类型的元素`operator*`。

请注意，列表不能为空。调用`back()`空列表是未定义的行为。

[请参阅此处](http://en.cppreference.com/w/cpp/container/list/push_front)和[此处](http://en.cppreference.com/w/cpp/container/list/back)的相关参考资料。

出于说明目的，考虑一个包含

> 1、2、3、4

该操作将修改列表，使其包含

> 8、1、2、3、4

列表的前面在左侧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:36:48.820

它从列表中取出最后一个元素，并将其值的两倍添加到列表前面。

# http - HTTP查询和URI编码疑惑

> ID：12920242
> 
> 赞同：2
> 
> 时间：2012-10-16T17:27:28.813
> 
> 标签：http, url, uri, query-string, urlencode

最近我正在研究 HTTP 查询字符串，同时想知道 Web 服务访问接口*API*的可能性。而且它似乎非常不明确。

事实上[，RFC 3986（统一资源标识符（URI）：通用语法）](https://www.rfc-editor.org/rfc/rfc3986)没有说明查询字符串片段的格式，并以定义允许的字符以及如何编码其他字符结束。（我稍后会回到这个。）

我发现的唯一内容是关于如何将表单转换为查询字符串的 HTML 规范（[HTML 4.01；17.13.4 表单内容类型，application/x-www-form-urlencoded](http://www.w3.org/TR/html4/interact/forms.html#h-17.13.4.1)）。HTML 5 算法似乎足够接近（[4.10.22.5 URL-encoded form data](http://www.w3.org/TR/html5/form-submission.html#url-encoded-form-data)）。

这似乎没问题。毕竟为什么有人要为其他人设置查询字符串格式。做什么的？但是还有其他（除了 HTML）完善的标准吗？其他人使用不同的格式吗？

* * *

这里的一个附带问题是处理表单字段名称中的 []。PHP 使用它来确保一个字段的多次出现都存在于`$_GET`超全局变量中。（否则只有最后一次出现。）

但从[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)看来，查询字符串中既不允许`[`也`]`不允许。然而，我对各种浏览器的实验表明，没有浏览器对这些字符进行编码，它们就在 URI 中......

这是现实生活中的练习吗？还是我测试不正确？我在 IIS 7 上使用 PHP 5.3.17 进行了测试。使用 Internet Explorer、Firefox 和 Chrome。然后我比较了`$_SERVER['QUERY_STRING']`和中的内容`$_GET`。

* * *

另一个问题是分号分隔的现实生活支持。

HTML 4.01 规范（[B.2.2 URI 属性值中的与号](http://www.w3.org/TR/html4/appendix/notes.html#h-B.2.2)）建议 HTTP 服务器接受分号 ( `;`) 作为参数分隔符（与 & 号相反`&`）。

有服务器支持吗？有人用这个吗？是否值得为此烦恼（在考虑允许的 Web 服务查询字符串格式时）？

* * *

那么非ASCII字符支持怎么样？

HTML 4.01 规范（[B.2.1 URI 属性值中的非 ASCII 字符](http://www.w3.org/TR/html4/appendix/notes.html#h-B.2.1)）清楚地重申了首先描述 RFC 的 URI：URI 中不允许使用非 ASCII 字符。然而，规范考虑了现有实践（使用非法 URI）并建议将此类字符更改为 UTF-8 编码，然后使用 URI 标准十六进制编码处理每个字节。

从我的测试看来，例如 Chrome 和 Firefox 就是这样做的。但 Internet Explorer 并没有，而是照原样发送这些字符。PHP 部分解决了这个问题。`$_SERVER['QUERY_STRING']`并`$_GET`包含那些字符。但取而代之的是`$_SERVER['REQUEST_URI']`包含。`?`

是否有任何标准或做法来处理此类案件？

* * *

另一个相关的问题是作者应该如何发布（通过 URI）名称包含非 ASCII（例如国家）字符的资源？考虑到所有各方（HTML 代码、浏览器发送请求、浏览器保存文件磁盘、服务器接收和处理请求以及服务器存储文件），它似乎几乎不可能始终如一地工作。或者至少我从来没有成功过。

当涉及到网页时，我已经习惯了，并且总是用相应的拉丁语基本字符替换国家字符。但是，当涉及到外部文件（PDF、图像……）时，“降级”名称会“感觉不对”。特别是如果希望用户将这些文件保存在磁盘上..如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:45:05.663

你检查过 HTTP 规范（RFC2616）吗？

看看这些部分：

*   [http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5.1.2](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5.1.2)
*   [http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.2](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.2)

* * *

实用的建议是使用[Base64](http://pl.wikipedia.org/wiki/Base64)对您希望包含风险字符的字段进行编码，然后在后端对其进行解码。

顺便提一句。你的问题真的很长。它减少了有人深入研究它的机会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:46:33.883

> 事实上，RFC 3986（统一资源标识符（URI）：通用语法）没有说明查询字符串片段的格式

是的，确实如此，在第 3.4 节中：

```
query       = *( pchar / "/" / "?" ) 
```

`pchar`在第 3.3 节中定义：

```
pchar         = unreserved / pct-encoded / sub-delims / ":" / "@" 
```

> 最后定义允许哪些字符以及如何编码其他字符。

确切地。那就是定义查询字符串片段的格式。

> 但是从 RFC 3986 看来，查询字符串中既不允许 [ 也 ] 也不允许。

官方来说，是的。但并非所有浏览器都这样做，这对它们来说是错误的行为。我见过的所有官方规范（并且 3986 并不是唯一的一个）都说这些字符必须是百分比编码的。

> 那么非ASCII字符支持怎么样？

URI 中不允许使用非 ASCII 字符。它们必须是字符集编码和百分比编码。实际使用的字符集是特定于服务器的，没有规范允许 URI 指定使用的字符集。各种规范都推荐UTF-8，但并不要求UTF-8，而且国外有些服务器确实不使用UTF-8。

IRI 规范 ( [RFC 3987](https://www.rfc-editor.org/rfc/rfc3987) ) 取代了 URL/URI 规范，支持完整的 Unicode 字符集，但 IRI 仍然相对较新，许多服务器还不支持它们。但是，RFC 确实定义了将 IRI 转换为 URI 的算法，反之亦然。

如有疑问，请对您不确定的所有内容进行百分比编码。服务器需要在存在时支持对它们进行解码，然后根据需要处理解码的数据。

# linux - 如果在边缘触发模式下调用 epoll_ctl 之前文件是可读的，那么后续的 epoll_wait 会立即返回吗？

> ID：12920243
> 
> 赞同：8
> 
> 时间：2012-10-16T17:27:31.213
> 
> 标签：linux, epoll

epoll 是否保证在使用 epoll_ctl 为 EPOLLIN 注册文件后对 epoll_wait 的第一次（或正在进行的）调用，如果在 epoll_ctl 调用之前文件已经可读，则 EPOLLET 立即返回？从我对测试程序的实验来看，答案似乎是肯定的。这里有几个例子来澄清我的问题：

假设我们已经初始化了一个 epoll 文件`efd`和一个文件`fd` 以及如下事件定义：

```
event.data.fd = fd;
event.events  = EPOLLIN | EPOLLET; 
```

现在考虑这种情况：

1.  thread1：写入数据`fd`
2.  线程2：`epoll_ctl (efd, EPOLL_CTL_ADD, fd, &event);`
3.  线程2：`epoll_wait (efd, events, MAXEVENTS, -1);`

现在第 3 步中的调用会立即返回吗？根据我的经验，确实如此。这是有保证的吗？

现在考虑第二种情况，扩展第一种情况：

1.  thread1：写入数据`fd`
2.  线程2：`epoll_ctl (efd, EPOLL_CTL_ADD, fd, &event);`
3.  线程2：`epoll_wait (efd, events, MAXEVENTS, -1);`
4.  线程2：`epoll_ctl (efd, EPOLL_CTL_MOD, fd, &event);`
5.  线程2：`epoll_wait (efd, events, MAXEVENTS, -1);`

步骤 5 中的调用是否立即返回？根据我的经验，确实如此。有保障吗？

epoll 手册页在这个问题上并不完全清楚。特别是，手册页建议您应该始终从文件中读取，直到使用边缘触发模式时返回 EAGAIN。但似乎这些评论是假设您在等待文件时没有重新注册文件。

[epoll的边缘触发选项的目的是什么？](https://stackoverflow.com/questions/9162712/what-is-the-purpose-of-epolls-edge-triggered-option)是一个相关的讨论。第一个答案的前两条评论似乎证实了我看到的行为是预期的。

[https://gist.github.com/3900742](https://gist.github.com/3900742)是一个 C 测试程序，它说明了带有管道的 epoll 的行为似乎与我描述的一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T14:27:20.353

由于`epoll`特定于 Linux 没有真正的规范，因此它几乎取决于实际实现的内容（手册页尝试以更用户友好的方式描述它，但不提供边缘情况的所有细节）。

查看[ep_insert](http://lxr.linux.no/linux+%2a/fs/eventpoll.c#L1145)和[ep_modify](http://lxr.linux.no/linux+%2a/fs/eventpoll.c#L1275)都检查当前事件位（与 无关`EPOLLET`）：

```
/*
 * Get current event bits. We can safely use the file* here because
 * its usage count has been increased by the caller of this function.
 */
revents = epi->ffd.file->f_op->poll(epi->ffd.file, &pt); 
```

所以这解释了你所看到的行为，它似乎是故意的。但是由于没有规范，因此无法保证将来行为不会改变。

# css - 灵活的 div 水平和垂直定位，没有间隙

> ID：12920244
> 
> 赞同：0
> 
> 时间：2012-10-16T17:27:31.253
> 
> 标签：css, html, stack

我想根据容器的宽度以相同的宽度和不同的高度水平和垂直地动态定位 div。

[在这里演示](http://jsfiddle.net/Te7Z6/38/)

我想像这样堆叠它们

> | 1 | 2 |
> 
> | 3 | 4 |
> 
> | 5 |

问题是 div 之间存在空白。即使我在左边添加明确的第 1 和第 5

[在这里演示](http://jsfiddle.net/Te7Z6/40/)

我仍然有差距。

有可能用 css 实现吗？

```
EDIT: 
```

容器宽度可能会改变（即，如果用户拖动其边框）。然后内部的 div 应该正确对齐以占据内部的整个空间。可能的结果如下：

> | 1 |
> 
> | 2 |
> 
> | 3 |
> 
> | 4 |
> 
> | 5 |

或者

> | 1 | 2 | 3 |
> 
> | 4 | 5 |

或者

> | 1 | 2 | 3 | 4 |
> 
> | 5 |

或者

> | 1 | 2 | 3 | 4 | 5 |

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:41:12.110

如果您只想使用 CSS，我认为最适合您的是设置两列。在第一列中，您将输入 1、3 和 5，在第二列中输入 2 和 4。这样就不会出现任何空格。

**编辑：** 如果你想堆叠那些没有空格的 div 并且仍然有一个灵活的布局，你不能只在 CSS 中做到这一点，但你可以尝试使用[Isotope](http://isotope.metafizzy.co/)一个非常易于使用的 jQuery 插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:47:01.043

试试这个：我做了一个类列，并在其中包含内容的列。可能不是你需要的，但它会工作......

[http://jsfiddle.net/Te7Z6/41/](http://jsfiddle.net/Te7Z6/41/)

# php - 通过网站上的表单登录 Gmail？

> ID：12920246
> 
> 赞同：2
> 
> 时间：2012-10-16T17:27:32.317
> 
> 标签：php, login, gmail

这个问题已经被问过很多次了，大多数答案都涉及使用 IMAP 或 Gmail 登录网站等来获取电子邮件。但我不想要这些。

我想要的是，如果用户在我网站的登录表单中输入他的 Gmail 用户名和密码并提交，他应该登录到 Gmail。这意味着他的 Gmail 会话应该开始，所以如果他在新标签页中打开 Gmail，他应该已经登录并且应该直接被带到收件箱。我读到 cURL 可能是要走的路。但我需要一个适当的解决方案！

我是一个相当有经验的开发人员，因此我很确定谷歌不会允许这样的事情。但这是客户的要求，因此我正在寻找一个黑客来做到这一点。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:29:55.293

您可能需要 OpenId 才能完成这项工作。看看这个资源：[联合登录](https://developers.google.com/accounts/docs/OpenID)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:30:02.843

尝试打开一个 iframe，它将通过 Javascript 提交 Gmail 登录表单。目标是从客户端的浏览器获取请求，以便客户端接收登录的 cookie，因此 Curl 不会帮助您。

# sql-server-2008 - “合并”多个表中的列

> ID：12920248
> 
> 赞同：0
> 
> 时间：2012-10-16T17:27:42.783
> 
> 标签：sql-server-2008

使用 SQL Server 2008，假设我有几个表，其中包含 3 个公共列（不相关）：

表格1

```
col1 colSomeOther col2 colAnotherOne 
```

表2

```
col1 colSomeOther col2 colAnotherOne 
```

表3

```
col1 colSomeOther col2 colAnotherOne 
```

我想为上面的 3 个表创建一个合并 col1 和 2 的视图。就像是：

看法

```
col1   col2 
```

其中 col1 包含表 1、2 和 3 中的所有**元素**，col2 包含表 1、2、3 中 col2 中的所有元素。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:30:59.147

是的。这是一个“工会”；相同“签名”（数据列的数量和类型）的多个结果集，一个接一个地连接。执行此操作的查询很简单：

```
SELECT col1, col2 FROM TABLE1
UNION ALL
SELECT col1, col2 FROM TABLE2
UNION ALL
SELECT col1, col2 FROM TABLE3 
```

如果您希望查询“去重复”结果，只返回唯一的行，请从联合中省略“ALL”关键字。使用 ALL 关键字，它只是将每个 SELECT 的结果附加到组合结果集，包括 Table2 中可能与 Table1 具有完全相同数据的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:31:54.227

我认为您要求的是`UNION`：

```
select col1, col2 from table1
UNION ALL
select col1, col2 from table2
UNION ALL
select col1, col2 from table3 
```

应该只要在所有三个表中都可以工作`col1`并且具有兼容的数据类型。`col2`

如果要消除重复行，请使用`UNION`而不是`UNION ALL`.

# spring - Neo4J - 简单的密码查询

> ID：12920258
> 
> 赞同：2
> 
> 时间：2012-10-16T17:28:27.480
> 
> 标签：spring, neo4j, spring-data-neo4j

假设有两个节点实体：

```
public class Account extends BaseEntity
{
...
@Fetch
@RelatedTo(type = "HAS_ROLE")
private Set<Role> roles = Sets.newHashSet();
...
}

public class Role extends BaseEntity
{
...
} 
```

在我的存储库中，我有一个查询应该按给定角色获取所有帐户：

```
public interface AccountRepository extends GraphRepository<Account>
{
    @Query("START account=node:Account(0) MATCH account-[:HAS_ROLE]->({0}) return account")
    Iterable<Account> findByRole(Role role);
} 
```

但是此查询不起作用，当我在测试用例中使用此方法时，出现以下错误：

> org.springframework.dao.InvalidDataAccessResourceUsageException: 执行语句出错 START account=node:Account(0) MATCH account-[:HAS_ROLE]->({0}) return account; 嵌套异常是 org.springframework.dao.InvalidDataAccessResourceUsageException: Error execution statement START account=node:Account(0) MATCH account-[:HAS_ROLE]->({0}) return account; 嵌套异常是预期的字符串

看来，我的查询有问题，但我不知道是什么，也无法弄清楚......有人可以提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T01:50:08.090

像这样重写您的查询。您已经知道角色，因此将其用作起点。

```
@Query("START role=node({0}) MATCH account-[:HAS_ROLE]->role return account")
Iterable<Account> findByRole(Role role); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T15:04:58.793

马库斯，

您应该迁移到 Neo4j 1.8 GA 和 SDN 2.1.0 RELEASE。

另外，您的 BaseEntity 和 Role 类是什么样的？

问候，

拉斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T01:34:23.033

使用这个查询怎么样？

```
START account=node(*) MATCH (account)-[r:HAS_ROLE]->() return account 
```

它将返回所有具有“HAS_ROLE”的帐户

# mysql - com.mysql.jdbc.Driver 在构建路径中找不到 mysql 连接器

> ID：12920265
> 
> 赞同：1
> 
> 时间：2012-10-16T17:28:49.277
> 
> 标签：mysql, jdbc, mysql-connector

我使用 Eclipse 朱诺。我的构建路径中有 mysql-connector-java-5.1.22-bin.jar，我尝试建立与我的 mysql 数据库的数据库连接。这是我的代码

```
public Connection getConnectionToDB() {
    try {
        Class.forName(driver);
        Connection con = DriverManager.getConnection(url + dbName,
                userName, password);
        return con;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

当我调试它时，我发现问题出在：

```
Class.forName(driver); 
```

我也尝试将其替换为：

```
Class.forName(driver).newInstance(); 
```

在这一行，它爆发到异常并抛出此异常：

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1676)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:169)
at main.jdbc.BaseJdbc.getConnectionToDB(BaseJdbc.java:18)
at main.jdbc.UserDriverJdbc.queryUserById(UserDriverJdbc.java:15)
at main.drivers.UserDriver.findUserById(UserDriver.java:50)
at main.drivers.UserDriver.isLoginValid(UserDriver.java:56)
at main.controllers.LoginController.doPost(LoginController.java:33)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.__invoke(StandardContextValve.java:164)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
at org.apache.catalina.core.StandardHostValve.__invoke(StandardHostValve.java:164)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:12:03.017

答案对我来说很难找到，但我想通了。这当然是类路径问题。

如果您遇到过这样的问题并尝试在 eclipse 中解决它，请转到

> eclipse -> 窗口 -> 首选项 -> java -> buildpath -> 类路径

并添加

> “mysql-connector-java-5.1.22-bin.jar”

作为新变量。随便取个名字就行。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:33:21.980

您需要确保在项目中加载了正确的库和 jar 文件。在使用 postgresql 时，我经常处理这个问题。我认为您只是缺少 jar 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T14:42:57.913

这是我的问题，在这里得到了回答： [SO Link](https://stackoverflow.com/questions/10037499/class-not-found-exception-class-fornamecom-mysql-jdbc-driver-in-webservice/10038956#10038956)

“如果此代码在您的 J2SE 中有效，则意味着您需要在某处包含 com.mysql.jdbc.Driver 类（所谓的 JDBC 驱动程序）的 JAR 文件。此 JAR 需要在 Tomcat 中可见。所以，我建议放置mysql-jdbc.jar 在物理位置到您项目的 /WEB-INF/lib 目录。” 从

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-06T20:17:32.690

我一直在到处寻找解决方案。也许这不是您的解决方案，但是使用 Eclipse 我正在导出为 JAR 文件并得到相同的异常，但随后导出为“可运行的 JAR”并且它起作用了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-16T08:16:05.633

如果您使用netbeans，请执行以下操作：转到您的应用程序>>>库>>添加jar（通过右键单击）>>“mysql-connector-java-5.1.22-bin.jar”

# grails-2.1 - grails 2.1.1 不会重新加载静态资源

> ID：12920267
> 
> 赞同：11
> 
> 时间：2012-10-16T17:28:51.190
> 
> 标签：grails-2.1

我有一个全新的 grails 2.1.1 安装，Windows 7。

**问题**：静态资源 (CSS) 不会在开发模式下重新加载。

根据[http://grails.1312388.n4.nabble.com/Re-Grails-2-0-CSS-Changes-not-Picked-Up-td3680479.html](http://grails.1312388.n4.nabble.com/Re-Grails-2-0-CSS-Changes-not-Picked-Up-td3680479.html)我在 Config.groovy 中尝试过：

```
environments {
    development {
        grails.resources.processing.enabled = false;
    }
} 
```

结果：根本没有加载任何 CSS。Chrome 加载一个页面需要 30 秒，并且不加载任何 CSS。

我恢复了那个变化。

然后，根据[http://grails.1312388.n4.nabble.com/disabling-static-resource-stuff-td3827384.html](http://grails.1312388.n4.nabble.com/disabling-static-resource-stuff-td3827384.html) 我试图取消注释插件运行时“：资源：1.1.6”

现在我回到最初的样子，提供 CSS 文件但没有重新加载。

暂时起作用的是这里提到的黑客：http: [//grails.1312388.n4.nabble.com/The-resources-plugin-is-not-reloading-my-CSS-and-JS-of-a-bundle-td3857137 .html](http://grails.1312388.n4.nabble.com/The-resources-plugin-is-not-reloading-my-CSS-and-JS-of-a-bundle-td3857137.html)

顶部附加到 url：?_debugResources=y

如何在开发模式下重新加载静态资源？这不应该是默认值吗？在我看来，重新加载 gsp（它确实如此）但不是静态资源没有任何意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T09:34:59.957

**我在调试时在Config.groovy**中设置了 grails.resources.debug 标志，以获取要像这样附加的 URL

```
 css/main.css?_debugResources=y&amp;n=1386063248351

environments {
    development {
        grails.resources.debug = true
    }
    production {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-01T08:02:40.400

应用程序中的任何 URL 都可以添加查询参数 _debugResources=y，并且请求不会执行任何处理。例如，如果您正在浏览[http://localhost:8080/myapp/admin](http://localhost:8080/myapp/admin)并需要绕过资源，只需将浏览器中的 URL 更改为[http://localhost:8080/myapp/admin?_debugResources=y](http://localhost:8080/myapp/admin?_debugResources=y)

**参考链接：** [https ://grails-plugins.github.io/grails-resources/guide/8.%20Debugging.html](https://grails-plugins.github.io/grails-resources/guide/8.%20Debugging.html)

# winforms - 如何设置托管组合框的数据源

> ID：12920273
> 
> 赞同：1
> 
> 时间：2012-10-16T17:29:11.783
> 
> 标签：winforms, combobox

我正在使用 a`ToolStripControlHost`来弹出各种其他控件，例如 datagridviews、listviews 等。如何将数据源分配给以这种方式托管的组合框。使用数据视图、数据表等设置数据源不起作用。有谁知道这个秘密还是这是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:34:54.327

不支持数据绑定，[`ToolStripComboBox`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripcombobox.aspx)因此您需要手动添加项目。幸运的是，组合框在表单上有一个名称，因此您可以这样做：

```
toolStripComboBox.Items.AddRange(
    new object[]
    {
        "Value 1",
        "Value 2",
        etc.
    } 
```

我不知道你给组合框起什么名字，只是把那个名字代替`toolStripComboBox`.

## `ComboBox`属性更新

如果您想通过`ComboBox`属性绑定，那么您应该能够执行以下操作：

```
var cb = toolStripComboBox.ComboBox;
cb.ValueMember = "some field or property";
cb.DisplayMember = "some field or property";
cb.DataSource = {some IEnumerable<T> or DataView or some other sort of bindable list} 
```

# android - ERP 实施网站到 Android 应用程序

> ID：12920274
> 
> 赞同：1
> 
> 时间：2012-10-16T17:29:18.103
> 
> 标签：android, erp

我需要为一个 ERP 实施的网站创建一个应用程序。例如， [http](http://evarsity.srmuniv.ac.in/srmswi/usermanager/youLogin.jsp) ://evarsity.srmuniv.ac.in/srmswi/usermanager/youLogin.jsp 是一个 ERP 实施的网站，它显示学生的出勤和结果。我不需要 webview 或任何其他类似类型。我需要我自己的自定义 UI 嵌入这个 .. 你能帮我吗？

# html - iPad物理方向没有任何影响

> ID：12920275
> 
> 赞同：0
> 
> 时间：2012-10-16T17:29:20.027
> 
> 标签：html, ipad, orientation

我知道“纵向”iPad 方向对应于 1024 像素宽的窗口，“横向”对应于 768 像素。

但是，当我访问我的网页时，无论我的 iPad 方向如何，我的宽度总是相同的。

左下角红色数字代表`jQuery('body').width()`连接到`resize()`JS事件的值。为什么纵向和横向模式下的值保持不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:34:05.560

您需要添加`initial-scale=1`到您的元`viewport`标记。请参阅此相关问题：[iOS 设备的视口元标记](https://stackoverflow.com/questions/7892809/viewport-meta-tag-for-ios-devices)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:51:23.050

您应该考虑使用 Sass 媒体查询，而不是使用 jQuery 来更改页面的样式。

[http://thesassway.com/intermediate/responsive-web-design-in-sass-using-media-queries-in-sass-32](http://thesassway.com/intermediate/responsive-web-design-in-sass-using-media-queries-in-sass-32)

[http://thesassway.com/intermediate/responsive-web-design-part-2](http://thesassway.com/intermediate/responsive-web-design-part-2)

它更简单，不依赖 js 事件和代码操作。

希望它有帮助，干杯。

# extjs - 如何让 ExtJS 树形面板中的所有项目始终可见

> ID：12920277
> 
> 赞同：1
> 
> 时间：2012-10-16T17:29:31.503
> 
> 标签：extjs

我有一个树形面板，列出了复杂的节点层次结构。

如果节点列表变得太大，则面板会滚动，这是所需的。

不希望用户单击箭头（或 dblclick 项目）以展开/折叠父节点的能力。

确保树形面板始终呈现完全展开并删除展开/折叠功能的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:42:01.917

我曾经需要这样做，这个解决方案（在[这里](http://www.sencha.com/forum/showthread.php?136633-Make-a-node-in-a-Ext.tree.TreePanel-permanently-expanded-and-non-collapsible)找到）对我有用：

对于每个不可折叠节点：

```
{text: 'Node', nodeType: 'node', expanded: true, cls: 'uncollapsible', collapsible: false} 
```

在您的 CSS 中：

```
.uncollapsible .x-tree-elbow-minus {
    background-image: url(resources/images/default/tree/elbow.gif);
}

.uncollapsible .x-tree-elbow-end-minus {
    background-image: url(resources/images/default/tree/elbow-end.gif)
} 
```

在您的树形面板中：

```
listeners: {
    beforecollapsenode: function(node) {
        return node.attributes.collapsible;
    }
} 
```

# android - PhoneGap navigator.camera.getPicture 不触发回调

> ID：12920289
> 
> 赞同：1
> 
> 时间：2012-10-16T17:30:19.460
> 
> 标签：android, ios, cordova, camera

我的 PhoneGap 应用程序中有一个简单的链接，它触发以下方法：

```
 navigator.camera.getPicture(function(imageData) {
            console.log('Success');
            $('#image').attr('src', "data:image/jpeg;base64," + imageData);
        }, function(errorMsg) {
            console.log('Error');
        }, {
            quality: 30,
            destinationType: Camera.DestinationType.DATA_URL,
            correctOrientation: true
        }); 
```

在 iPhone 和 iPad 上，它的工作时间为 70-80%：如果用户点击，相机打开，我拍照，相机正在关闭，成功方法中的 console.log() 将被触发，我可以捕捉图像源。另一次什么都没有发生。将调用成功或错误回调。相机打开，我拍照，相机将关闭，我看到我的应用程序，但没有任何反应。我无法找出问题所在。

为了防止存储问题，我在每次链接点击时触发 navigator.camera.cleanup()-Method。但问题仍然存在。在 iPhone、iPad 和我的 Android 模拟器上。首先，我认为我的应用程序在拍照后会重新启动，但这并没有发生（如果发生了 deviceready-Event，我会创建一个 console.log）。

我认为这不是 Android 或 iOS 的问题……但我不知道。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-16T21:50:52.270

确保在 onDeviceReady 中调用它

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady()
{
    your code here!
} 
```

# ios - 显式设置 NSUndoManager 的重做调用

> ID：12920290
> 
> 赞同：1
> 
> 时间：2012-10-16T17:30:30.623
> 
> 标签：ios, nsundomanager

我有一个应用程序，它允许用户上下移动 UIViews，让外观一个视图可以位于另一个视图之上。*通过使用exchangeSubviewAtIndex*方法更改超级视图中 UIView 的索引，更改 UIView 的“级别”（父子视图中的索引）非常简单。

```
 /---------/
IDX 1   /    A    /
       /---------/
         /---------/
IDX 0   /    B    /
       /---------/

Move 'A' Down

         /---------/
IDX 1   /    B    /
       /---------/
         /---------/
IDX 0   /    A    /
       /---------/ 
```

现在，我使用 NSUndoManager 来记录更改，以便用户可以撤消下移操作。这工作正常。尝试在 NSUndoManager 上执行重做消息时会出现问题。由于正在移动的 UIView 上没有“ZIndex”状态（因为它是其父视图中的一个位置），因此重做不会做任何事情......

有没有办法明确传递重做的重做调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:58:06.620

好的，我的问题是对撤消管理器的重做部分的误解。原来撤消管理器的重做是另一个撤消，它只知道它在撤消过程中并将调用添加到重做堆栈中。

这篇文章是我的关键： [NSUndoManager: redo not working](https://stackoverflow.com/questions/11286637/nsundomanager-redo-not-working)

# c++ - c++，如何将字符串、整数和浮点值存储到数组中并取回存储的值

> ID：12920294
> 
> 赞同：3
> 
> 时间：2012-10-16T17:30:44.543
> 
> 标签：c++, arrays, types

一个数组可以同时存储`int`吗？我一直在看到一些数组语法，但都以or开头，有没有一种方法可以让数组存储所有类型的原始值和字符串值？`string``float``int array[]``string array[]`

我对 C++ 不是很熟悉，但在 java 中有一个迭代器可以帮助您将这些存储的值推出并允许您显示其中存储的内容。C++ 也有这个功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:36:29.700

对于基本类型，这很容易：它们可以混合到[http://www.cplusplus.com/doc/tutorial/other_data_types/](http://www.cplusplus.com/doc/tutorial/other_data_types/)`union` ( ->Unions) 中。

对于复杂的类型，比如`string`，它变得有点困难。

您可能想查看[http://www.boost.org/doc/libs/1_36_0/doc/html/variant.html](http://www.boost.org/doc/libs/1_36_0/doc/html/variant.html)`boost::variant`或[http://www.boost.org/doc/libs/1_51_0/doc/html /any.html](http://www.boost.org/doc/libs/1_51_0/doc/html/any.html)`boost::any`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T17:38:27.150

如果这些值是相关的，则创建一个结构并存储它而不是单个值。前任：

```
struct person {
    string name;
    int age;
};
person pArray[]; 
```

# business-objects - WEBI (BO 4.0) 中过去 5 周的计算？

> ID：12920296
> 
> 赞同：1
> 
> 时间：2012-10-16T17:31:04.377
> 
> 标签：business-objects

我在**根据当前日期**（不包括当前周）计算过去 5 周数据时遇到问题 例如：假设我们在今年的第 40 周，我需要获取前 5 周的所有交易的总和（39， 38、37、36 和 35）。

目前基于日历日进行计算，但由于日历日给出了数据的粒度级别，为了提高***我需要使用日历周***的性能（示例数据，如（2012/40）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:59:59.177

我会使用 datediff （在 SQL Server 术语中）构造一个标志字段（在后端或 Universe 中）。

如果做不到这一点，您可以使用**Week**函数在 Web Intelligence 中构造一个变量。

伪代码，但类似于：

```
=IF(Transaction_Date < Week(CurrentDate()) AND Transaction_Date >= (Week(CurrentDate())-5); "TRUE"; "FALSE") 
```

# android - Galaxy S3 上的 Talk 应用程序在 240 DPI 时崩溃

> ID：12920297
> 
> 赞同：0
> 
> 时间：2012-10-16T17:31:04.703
> 
> 标签：android

这个错误只是在过去一个月里杀死了我。

我正在使用galaxy s3 running stock jelly bean rom，默认情况下具有320 DPI。我总是将我的 DPI 更改为 240，因为 320 DPI 看起来太大了。过去我在使用 240 DPI 时从来没有遇到过任何问题。（即使所有 aosp rom 的谈话应用程序在 240 DPI 时都运行良好）。但是对于 stock roms，只要收到警报，talk 应用程序就会崩溃，并且错误消息是：

```
10-16 21:56:59.865: E/AndroidRuntime(14559): FATAL EXCEPTION: Packet Processor
10-16 21:56:59.865: E/AndroidRuntime(14559): java.lang.RuntimeException: Canvas: trying to use a recycled bitmap android.graphics.Bitmap@429611d0
10-16 21:56:59.865: E/AndroidRuntime(14559):    at android.graphics.Canvas.throwIfRecycled(Canvas.java:1026)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at android.graphics.Canvas.drawBitmap(Canvas.java:1096)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at android.graphics.Bitmap.createBitmap(Bitmap.java:604)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:466)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at com.google.android.gsf.gtalkservice.service.StatusBarNotifier.getAvatarForContact(StatusBarNotifier.java:726)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at com.google.android.gsf.gtalkservice.service.StatusBarNotifier$NotificationInfo$Item.<init>(StatusBarNotifier.java:105)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at com.google.android.gsf.gtalkservice.service.StatusBarNotifier$NotificationInfo.add(StatusBarNotifier.java:160)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at com.google.android.gsf.gtalkservice.service.StatusBarNotifier.notify(StatusBarNotifier.java:415)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at com.google.android.gsf.gtalkservice.service.StatusBarNotifier.notifyChat(StatusBarNotifier.java:314)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at com.google.android.gsf.gtalkservice.gtalk.ChatSession.notifyChat(ChatSession.java:2237)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at com.google.android.gsf.gtalkservice.gtalk.ChatSession.onReceiveMessage(ChatSession.java:905)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at com.google.android.gsf.gtalkservice.gtalk.ChatMgr.processIncomingMessage(ChatMgr.java:869)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at com.google.android.gsf.gtalkservice.gtalk.ChatMgr.processPacket(ChatMgr.java:642)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at org.jivesoftware.smack.PacketProcessor.process(PacketProcessor.java:122)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at org.jivesoftware.smack.PacketProcessor.access$000(PacketProcessor.java:13)
10-16 21:56:59.865: E/AndroidRuntime(14559):    at org.jivesoftware.smack.PacketProcessor$1.run(PacketProcessor.java:45)
10-16 21:56:59.875: E/android.os.Debug(2733): !@Dumpstate > dumpstate -k -t -z -d -o /data/log/dumpstate_app_error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:22:36.527

这是针对 API Bitmap.createScaledBitmap(Bitmap sourceBitmap, int scaledWidth, int scaledHeight, boolean filter) 的优化。

考虑这种情况：

1.  scaledWidth 等于 sourceBitmap 的宽度
2.  scaledHeight 等于 sourceBitmap 的高度

此 API 将返回与 JellyBean 下的 sourceBitmap 相同的位图对象实例，但在 ICS 及以下（姜饼......）下返回不同的位图对象实例。我已经在 J​​ellyBean 和 ICS 下测试了这个问题。

因此，如果您的代码在给定情况下回收返回的位图，则 sourceBitmap 也将被回收。其实也许你是用sourceBitmap在画布上画的，但是sourceBitmap被回收了，所以你的应用在JellyBean下崩溃了。

要解决此问题，您应该在使用 API Bitmap.createScaledBitmap(.....) 之前使用 sourceBitmap 检查 scaledWidth 和 scaledHeight 参数，请参阅以下代码：

```
 public Bitmap getScaledBitmap(Bitmap sourceBitmap,  int scaledWidth, int scaledHeight, boolean filter){
    Bitmap scaledBitmap = null;

    if (null != sourceBitmap){
        if(sourceBitmap.getWidth() == scaledWidth && sourceBitmap.getHeight() == scaledHeight){
            scaledBitmap = Bitmap.createBitmap(sourceBitmap);
        }else{
            scaledBitmap = Bitmap.createScaledBitmap(sourceBitmap, scaledWidth, scaledHeight, filter);
        }
    }

    return scaledBitmap;
} 
```

# windows - 使用 Media Foudation 的 WMV 编码：指定“B 帧数”

> ID：12920302
> 
> 赞同：0
> 
> 时间：2012-10-16T17:31:19.810
> 
> 标签：windows, wmv, ms-media-foundation

我正在使用 Media Foundation SDK 将视频编码为 WMV。我看到可以使用属性设置 B 帧的数量，但我不知道如何/在哪里设置它。

该属性称为 MFPKEY_NUMBFRAMES 并在此处进行了描述：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ff819354%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff819354%28v=vs.85%29.aspx)

我们的代码大致做了以下事情：

*   调用 MFStartup
*   调用一次 MFCreateAttributes，这样我们就可以设置 muxer、video 和 audio 属性
*   配置上一步创建的 IMFAttributes，例如通过设置视频比特率： pVideoOverrides->SetUINT32(MF_MT_AVG_BITRATE, m_iVideoBitrateBPS);
*   通过调用 IMFReadWriteClassFactory::CreateInstanceFromURL 创建接收器编写器
*   对于每一帧，在接收器写入器上调用 WriteSample
*   呼叫 MFShutdown

我是否应该在我还设置视频比特率的 IMFAttribute 上设置 b-frames 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:19:08.603

该属性适用于[Windows Media Video 9 编码器](http://msdn.microsoft.com/en-us/library/windows/desktop/ff819505%28v=vs.85%29.aspx)。也就是说，您需要在拓扑中定位它并在那里调整属性。其他拓扑元素（例如多路复用器）可能会接受其他属性，但这一属性在那里没有影响。

[MSDN 在配置 WMV 编码器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd742787%28v=vs.85%29.aspx)中为您提供 st4ep 说明，并在其中说明

> 要指定目标比特率，请设置`MF_MT_AVG_BITRATE`媒体类型的属性。

您还可以更改其他编码器属性。还有一步一步的详细[教程：1-Pass Windows Media Encoding](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663624%28v=vs.85%29.aspx)，它显示了整个过程的步骤。

# html - : 如何在 HTML/CSS 中滚动时显示 我有一张大桌子，大约有 300 行和 12 列。在通过页面翻页滚动表格时，默认情况下不显示内容。我想在滚动 "within" 时看到它。也就是说，如果屏幕顶部以一行开头，我希望首先显示标题。否则它应该表现得像一个普通的表。 到目前为止，我看到的常见解决方案是创建一个可以自行滚动的表格（因此独立于页面滚动）。也就 问问题 问问题 2012-10-16T17:31:31.550 15024 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我有一张大桌子，大约有 300 行和 12 列。在通过页面翻页滚动表格时，默认情况下不显示内容。我想在滚动 "within" 时看到它。也就是说，如果屏幕顶部以一行开头，我希望首先显示标题。否则它应该表现得像一个普通的表。 到目前为止，我看到的常见解决方案是创建一个可以自行滚动的表格（因此独立于页面滚动）。也就是说，这个问题的答案表明了什么。 但是，如果屏幕上有很多列，这不是很实用，特别是因为现在有两个独立的滚动条。在移动设备上，第二个滚动条占用了大量宝贵的空间。而且使用起来也很烦人。你不能简单地“离开”，但你必须集中精力点击那个微小的滚动条。在其他浏览器上，您可以滚动触摸其中的数据，但是一旦您移到外面，就会发生另一个令人讨厌的动作…… 有没有一种干净的 CSS 方法来做到这一点？ 如果你： 根据需要创建尽可能长和宽的表格，无需标题。用您的表头创建了另一个表。将您的标题表放在一个单独的 DIV 中并将其浮动在您的数据表上（z-index + position:absolute）。使用 JQuery，在窗口加载、调整大小、滚动或任何相关事件时，您可以重置每个 TH 宽度以匹配其对应的 TD。您还可以在滚动时重新定位表头 DIV。这应该有效。如果你需要一个例子，请告诉我。这样，您应该只在需要时才能看到浏览器滚动条。 祝你好运。 htmlcss 4 4 回答 4 This answer is useful 11 希望position:sticky有朝一日会成为这个问题的最终答案（请参阅此处的公告），就像上面评论中提到的那样，我仍然着迷于制作一个没有双滚动条的简单 HTML/CSS 概念验证。 我的简单解决方案——并不意味着是一个完美的解决方案，更像是一个练习——没有脚本： 复制thead，一个随页面滚动，一个保持固定 使用 z-indexes 来显示适当的标题 http://jsfiddle.net/willemvb/hEyZh/ 于 2012-10-16T21:00:04.357 回答 This answer is useful 2 这可能会帮助您： Source from JS Fiddle HTML

| Name | Color | Description |
| --- | --- | --- |
| Apple | Red | These are red. |
| Pear | Green | These are green. |
| Grape | Purple / Green | These are purple and green. |
| Orange | Orange | These are orange. |
| Banana | Yellow | These are yellow. |
| Kiwi | Green | These are green. |
| Plum | Purple | These are Purple |
| Watermelon | Red | These are red. |
| Tomato | Red | These are red. |
| Cherry | Red | These are red. |
| Cantelope | Orange | These are orange inside. |
| Honeydew | Green | These are green inside. |
| Papaya | Green | These are green. |
| Raspberry | Red | These are red. |
| Blueberry | Blue | These are blue. |
| Mango | Orange | These are orange. |
| Passion Fruit | Green | These are green. |

CSS .fixed_headers { width: 750px; table-layout: fixed; border-collapse: collapse; } .fixed_headers th { text-decoration: underline; } .fixed_headers th,.fixed_headers td { padding: 5px; text-align: left; } .fixed_headers td:nth-child(1),.fixed_headers th:nth-child(1) { min-width: 200px; } .fixed_headers td:nth-child(2),.fixed_headers th:nth-child(2) { min-width: 200px; } .fixed_headers td:nth-child(3),.fixed_headers th:nth-child(3) { width: 350px; } .fixed_headers thead { background-color: #333333; color: #fdfdfd; } .fixed_headers thead tr { display: block; position: relative; } .fixed_headers tbody { display: block; overflow: auto; width: 100%; height: 300px; } .fixed_headers tbody tr:nth-child(even) { background-color: #dddddd; } .old_ie_wrapper { height: 300px; width: 750px; overflow-x: hidden; overflow-y: auto; } .old_ie_wrapper tbody { height: auto; } Source from JS Fiddle 于 2014-01-21T06:10:41.773 回答 This answer is useful 2 如果你： 根据需要创建尽可能长和宽的表格，无需标题。用您的表头创建了另一个表。将您的标题表放在一个单独的 DIV 中并将其浮动在您的数据表上（z-index + position:absolute）。使用 JQuery，在窗口加载、调整大小、滚动或任何相关事件时，您可以重置每个 TH 宽度以匹配其对应的 TD。您还可以在滚动时重新定位表头 DIV。这应该有效。如果你需要一个例子，请告诉我。这样，您应该只在需要时才能看到浏览器滚动条。 祝你好运。 于 2012-10-16T17:46:52.093 回答 This answer is useful 0 您可以使用该插件，它工作正常： http ://web-gladiator.com/stickythead/ 于 2013-09-14T11:48:29.223 回答 Related 1 sql - 在 SQL Server 2005 中计算超过 24 小时 3 c# - 插入和更新代码在 ASP.NET 中不起作用 2 delphi - Delphi 7：没有渲染框架上的对象（错误？） 1 c# - 如何在 C# 中生成 JavaScript 对象文字？ 3 java - DecimalFormat 类不恰当地给出四舍五入的数字 2 python - 为什么 Python 不能正确显示此文本？（UTF-8 解码问题） 6 c# - 从 C# 访问 ListBox 的 ScrollViewer 4 javascript - Javascript clearInterval 和 setInterval() 行为不符合预期 2 chef-infra - 为不同的服务器组织厨师食谱 1 canvas - 在不断增长的画布上绘制音频的幅度轨迹——可能吗？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12920304
> 
> 赞同：2
> 
> 时间：
> 
> 标签：html, css

我有一张大桌子，大约有 300 行和 12 列。在通过页面翻页滚动表格时`<thead>`，默认情况下不显示内容。我想在滚动 "within" 时看到它`<tbody>`。也就是说，如果屏幕顶部以一行开头，我希望首先显示标题。否则它应该表现得像一个普通的表。

到目前为止，我看到的常见解决方案是创建一个可以自行滚动的表格（因此独立于页面滚动）。也就是说，[这个问题的答案](https://stackoverflow.com/questions/130564/i-need-my-html-tables-body-to-scroll-and-its-head-to-stay-put)表明了什么。

但是，如果屏幕上有很多列，这不是很实用，特别是因为现在有两个独立的滚动条。在移动设备上，第二个滚动条占用了大量宝贵的空间。而且使用起来也很烦人。你不能简单地“离开”，但你必须集中精力点击那个微小的滚动条。在其他浏览器上，您可以滚动触摸其中的数据，但是一旦您移到外面，就会发生另一个令人讨厌的动作……

有没有一种干净的 CSS 方法来做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T21:00:04.357

希望*position:sticky*有朝一日会成为这个问题的最终答案（请参阅[此处的公告](http://updates.html5rocks.com/2012/08/Stick-your-landings-position-sticky-lands-in-WebKit)），就像上面评论中提到的那样，我仍然着迷于制作一个没有双滚动条的简单 HTML/CSS 概念验证。

我的简单解决方案——*并不意味着是一个完美的解决方案，更像是一个练习*——没有脚本：

*   复制thead，一个随页面滚动，一个保持固定
*   使用 z-indexes 来显示适当的标题

[http://jsfiddle.net/willemvb/hEyZh/](http://jsfiddle.net/willemvb/hEyZh/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-21T06:10:41.773

这可能会帮助您：

`[Source from](http://tjvantoll.com/2012/11/10/creating-cross-browser-scrollable-tbody/)`

`[JS Fiddle](http://jsfiddle.net/cqx3W/)`

**HTML**

```
 <!-- IE < 10 does not like giving a tbody a height.  The workaround here applies the scrolling to a wrapped        <div>. -->
 <!--[if lte IE 9]>
<div class="old_ie_wrapper">
 <!--<![endif]-->

 <table class="fixed_headers">
     <thead>
 <tr>
  <th>Name</th>
  <th>Color</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Apple</td>
  <td>Red</td>
  <td>These are red.</td>
</tr>
<tr>
  <td>Pear</td>
  <td>Green</td>
  <td>These are green.</td>
</tr>
<tr>
  <td>Grape</td>
  <td>Purple / Green</td>
  <td>These are purple and green.</td>
</tr>
<tr>
  <td>Orange</td>
  <td>Orange</td>
  <td>These are orange.</td>
</tr>
<tr>
  <td>Banana</td>
  <td>Yellow</td>
  <td>These are yellow.</td>
</tr>
<tr>
  <td>Kiwi</td>
  <td>Green</td>
  <td>These are green.</td>
</tr>
<tr>
  <td>Plum</td>
  <td>Purple</td>
  <td>These are Purple</td>
</tr>
<tr>
  <td>Watermelon</td>
  <td>Red</td>
  <td>These are red.</td>
</tr>
<tr>
  <td>Tomato</td>
  <td>Red</td>
  <td>These are red.</td>
</tr>
<tr>
  <td>Cherry</td>
  <td>Red</td>
  <td>These are red.</td>
</tr>
<tr>
  <td>Cantelope</td>
  <td>Orange</td>
  <td>These are orange inside.</td>
</tr>
<tr>
  <td>Honeydew</td>
  <td>Green</td>
  <td>These are green inside.</td>
</tr>
<tr>
  <td>Papaya</td>
  <td>Green</td>
  <td>These are green.</td>
</tr>
<tr>
  <td>Raspberry</td>
  <td>Red</td>
  <td>These are red.</td>
</tr>
<tr>
  <td>Blueberry</td>
  <td>Blue</td>
  <td>These are blue.</td>
</tr>
<tr>
  <td>Mango</td>
  <td>Orange</td>
  <td>These are orange.</td>
</tr>
<tr>
  <td>Passion Fruit</td>
  <td>Green</td>
  <td>These are green.</td>
</tr>
</tbody>
 </table>

   <!--[if lte IE 9]>
   </div>
<!--<![endif]--> 
```

**CSS**

```
 .fixed_headers {
     width: 750px;
     table-layout: fixed;
     border-collapse: collapse;
  }
 .fixed_headers th {
    text-decoration: underline;
  }
 .fixed_headers th,.fixed_headers td {
         padding: 5px;
         text-align: left;
   }
  .fixed_headers td:nth-child(1),.fixed_headers th:nth-child(1) {
         min-width: 200px;
   }
  .fixed_headers td:nth-child(2),.fixed_headers th:nth-child(2) {
         min-width: 200px;
    }
    .fixed_headers td:nth-child(3),.fixed_headers th:nth-child(3) {
        width: 350px;
    }
   .fixed_headers thead {
              background-color: #333333;
              color: #fdfdfd;
    }
    .fixed_headers thead tr {
             display: block;
             position: relative;
    }
    .fixed_headers tbody {
             display: block;
             overflow: auto;
             width: 100%;
             height: 300px;
    }
    .fixed_headers tbody tr:nth-child(even) {
             background-color: #dddddd;
    }
    .old_ie_wrapper {
            height: 300px;
            width: 750px;
            overflow-x: hidden;
            overflow-y: auto;
     }
    .old_ie_wrapper tbody {
            height: auto;
      } 
```

`[Source from](http://tjvantoll.com/2012/11/10/creating-cross-browser-scrollable-tbody/)`

`[JS Fiddle](http://jsfiddle.net/cqx3W/)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T17:46:52.093

如果你：

根据需要创建尽可能长和宽的表格，无需标题。用您的表头创建了另一个表。将您的标题表放在一个单独的 DIV 中并将其浮动在您的数据表上（z-index + position:absolute）。使用 JQuery，在窗口加载、调整大小、滚动或任何相关事件时，您可以重置每个 TH 宽度以匹配其对应的 TD。您还可以在滚动时重新定位表头 DIV。这应该有效。如果你需要一个例子，请告诉我。这样，您应该只在需要时才能看到浏览器滚动条。

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-14T11:48:29.223

您可以使用该插件，它工作正常： [http ://web-gladiator.com/stickythead/](http://web-gladiator.com/stickythead/)

# ruby-on-rails - 为 gem 构建本机扩展时出错 (extconf.rb)

> ID：12920307
> 
> 赞同：1
> 
> 时间：2012-10-16T17:31:52.657
> 
> 标签：ruby-on-rails, ruby, rubygems

所以，我在 Windows 上开发 Rails 应用程序已经有一段时间了，每当我尝试安装某些 gem 时，都会出现一个问题：

```
$ gem install capybara-webkit-0.12.1.gem
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing capybara-webkit-0.12.1.gem:
        ERROR: Failed to build gem native extension.

        c:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb

Gem files will remain installed in c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.12.1 for inspection.
Results logged to c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.12.1/./gem_make.out 
```

每当我尝试安装需要本机扩展的 gem 时，经常会出现此错误。RubyInstaller wiki 在他们的[故障排除页面](https://github.com/oneclick/rubyinstaller/wiki/Troubleshooting#wiki-gems_fails_comspec_autorun)上记录了一个非常相似的问题，但我在那里提出的解决方案对我不起作用。您能给我的任何帮助将不胜感激。=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:34:43.780

`"Failed to build gem native extension."`安装 gem 时的错误消息特定于每个 gem，不一定在 gem 中通用。因此，当其他 gem 出现相同的错误时，修复 RubyInstaller 错误的建议可能不会有帮助。

最好的解决方法是在谷歌上搜索此错误消息以及 gem 名称。

在 Google 上搜索[“Failed to build gem native extension capybara webkit”](http://www.google.com/search?client=safari&rls=en&q=Failed+to+build+gem+native+extension+capybara+webkit&ie=UTF-8&oe=UTF-8)，gem repo 上的以下链接似乎有关于如何修复此错误的答案：[https ://github.com/thoughtbot/capybara-webkit/issues /77](https://github.com/thoughtbot/capybara-webkit/issues/77)

# mysql - MySQL - 获取注册最多的年份

> ID：12920309
> 
> 赞同：1
> 
> 时间：2012-10-16T17:31:53.593
> 
> 标签：mysql, select, numbers, max

我在 MySQL 中有这张表（名为 EMP）：

```
EMPNO ENAME   JOB       MGR  HIREDATE     SAL      COMM DEPTNO
----- -----  -------   ----  -------- --------  ------- ------
7369 SMITH  CLERK     7902 13-JUN-83   800.00              20
7499 ALLEN  SALESMAN  7698 15-AUG-83 1,600.00   300.00     30
7521 WARD   SALESMAN  7698 26-MAR-84 1,250.00   500.00     30
7566 JONES  MANAGER   7839 31-OCT-83 2,975.00              20
7654 MARTIN SALESMAN  7698 05-DEC-83 1,250.00 1,400.00     30
7698 BLAKE  MANAGER   7839 11-JUL-84 2,850.00              30
7782 CLARK  MANAGER   7839 14-MAY-84 2,450.00              10
7788 SCOTT  ANALYST   7566 05-MAR-84 3,000.00              20
7839 KING   PRESIDENT      09-JUL-84 5,000.00              10
7844 TURNER SALESMAN  7698 04-JUN-84 1,500.00  .00         30
7876 ADAMS  CLERK     7788 04-JUN-84 1,100.00              20
7900 JAMES  CLERK     7698 23-JUL-84   950.00              30
7902 FORD   ANALYST   7566 05-DEC-83 3,000.00              20
7934 MILLER CLERK     7782 21-NOV-83 1,300.00              10 
```

当注册的员工（行）数量最多时，如何编写返回年份（HIREDATE 列）的 Select 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:37:54.043

关于什么

```
SELECT YEAR(hiredate) FROM emp 
  GROUP BY YEAR(hiredate) 
  ORDER BY COUNT(*) DESC
  LIMIT 1 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:34:52.440

关于什么：

```
SELECT COUNT(1), YEAR(HIREDATE) FROM EMP GROUP BY YEAR(HIREDATE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:35:05.723

尝试这个：

```
select year(hiredate), count(*) from emp 
group by year(hiredate) order by 2 desc limit 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T17:35:06.200

尝试

```
SELECT count(*) as total FROM emp GROUP BY hiredate ORDER BY total DESC LIMIT 1; 
```

# iphone - UIView 翻转转换只发生一次

> ID：12920311
> 
> 赞同：0
> 
> 时间：2012-10-16T17:32:01.200
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个包含其他两个 UIView 的 UIView。我试图让它们在按下按钮时翻转。这是我在按钮操作中翻转它们的代码：

```
- (IBAction)btMapView:(id)sender
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1];
    [UIView transitionFromView:mView1 toView:m_MapView duration:3 options:UIViewAnimationOptionTransitionFlipFromLeft completion:NULL];
    [UIView commitAnimations];
}

- (IBAction)btListView:(id)sender
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1];
    [UIView transitionFromView:m_MapView toView:mView1 duration:3 options:UIViewAnimationOptionTransitionFlipFromRight completion:NULL];
    [UIView commitAnimations];
} 
```

我在 viewDidLoad 中初始化 m_MapView，如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [m_MapView setMapType:MKMapTypeHybrid];
    [m_MapView setZoomEnabled:YES];
    [m_MapView setScrollEnabled:YES];
    MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
    region.center.latitude = 42.761738 ;
    region.center.longitude = -71.463180;
    region.span.longitudeDelta = 0.01f;
    region.span.latitudeDelta = 0.01f;
    [m_MapView setRegion:region animated:YES];
    m_MapView.showsUserLocation = YES;
    [m_MapView setDelegate:self];

    CLLocationCoordinate2D zoomLocation;
    zoomLocation.latitude = 42.761738;
    zoomLocation.longitude = -71.463180;

    MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, .25*METERS_PER_MILE, .25*METERS_PER_MILE);
    MKCoordinateRegion adjustedRegion = [m_MapView regionThatFits:viewRegion];

    m_MapView.autoresizingMask =
    (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight);

    [m_MapView setRegion:adjustedRegion animated:YES];

    DisplayMap * myLoc = [[DisplayMap alloc] init];
    myLoc.title = @"myLoc";
    myLoc.subtitle = @"Main Office";
    myLoc.coordinate = region.center;
    [m_MapView addAnnotation:myLoc];
} 
```

而我的第二个观点只是有一个标签。

当我触摸 btMapView 按钮时，翻转发生在另一个视图上，但是当我按下 btListView 按钮时它不会翻转回来。

谁能阐明我可能做错了什么？

谢谢您的帮助。

编辑：

通过将我的代码从 viewDidLoad 移动到 viewWillAppear 并将两个按钮方法更改为此：

```
- (IBAction)btMapView:(id)sender
{
    [UIView transitionFromView:mView1
                        toView:m_MapView
                      duration:1
                       options:UIViewAnimationOptionTransitionFlipFromLeft | UIViewAnimationOptionShowHideTransitionViews 
                    completion:nil];
}

- (IBAction)btListView:(id)sender
{
    [UIView transitionFromView:m_MapView
                        toView:mView1
                      duration:1
                       options:UIViewAnimationOptionTransitionFlipFromRight | UIViewAnimationOptionShowHideTransitionViews 
                    completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:06:51.950

在 UIButton 操作中使用以下代码，它正常工作：

```
 SecondView *second=[[SecondView alloc] init];
    [UIView transitionFromView:self.view toView:second.view duration:2.0 options:UIViewAnimationOptionTransitionFlipFromRight completion:nil]; 
```

这里的 SecondView 是 SecondView 的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:38:17.273

尝试以下操作：

```
- (IBAction)btMapView:(id)sender
{
    [mView1.superview addSubview: m_MapView];
    [UIView transitionFromView:mView1 toView:m_MapView duration:3 options:UIViewAnimationOptionTransitionFlipFromLeft | UIViewAnimationOptionShowHideTransitionViews completion: ^(BOOL finished) { [mView1 removeFromSuperview]; }];
}

- (IBAction)btListView:(id)sender
{
    [m_MapView.superview addSubview: mView1];
    [UIView transitionFromView:m_MapView toView:mView1 duration:3 options:UIViewAnimationOptionTransitionFlipFromRight | UIViewAnimationOptionShowHideTransitionViews completion:^(BOOL finished) { [m_MapView removeFromSuperview]; }];
} 
```

# jdbc - 松鼠和设置驱动程序

> ID：12920312
> 
> 赞同：2
> 
> 时间：2012-10-16T17:32:08.993
> 
> 标签：jdbc, driver, squirrel-sql

我喜欢 SQuirreL，但我在设置驱动程序时遇到了麻烦！我正在尝试连接到 Intersystems 缓存数据库。我已经下载了 CacheBD.jar 文件，但 SQuirreL 不断给我错误：

在 Java 类路径和 Intersystems Cache 驱动程序定义的 Extra 类路径中都找不到类 CacheBD：java.lang.ClassNotFoundException: CacheBD

我已经将 jar 文件放在几个地方，添加了一个 CLASSPATH 变量，但我无法让它工作......令人讨厌。

有人可以提供一步一步的傻瓜指南来安装和添加驱动程序到 SQuirreL 吗？

感谢您的任何指导。

莱斯利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:23:43.667

我需要选择 5.2_CacheDB jar 来代替..一旦我这样做了，在驱动程序设置中填充了正确的类名，它变成了绿色。

# shell - 在“grep”结果中包含标题

> ID：12920317
> 
> 赞同：24
> 
> 时间：2012-10-16T17:32:47.617
> 
> 标签：shell, grep

有没有办法将'head -1'和'grep'命令组合成一个目录中的所有文件并将输出重定向到输出文件。我可以使用“sed”来做到这一点，但它似乎不如 grep 快。

```
sed -n '1p;/6330162/p' infile*.txt > outfile.txt 
```

使用 grep 我可以一次执行以下一个文件：

```
head -1 infile1.txt;  grep -i '6330162' infile1.txt > outfile.txt 
```

但是，我需要对目录中的所有文件执行此操作。插入通配符没有帮助，因为它首先打印标题，然后是 grep 输出。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-10-14T09:07:17.907

下面的意思是你只需要输入一次命令（而不是使用 && 并输入两次），它也很容易理解。

```
some-command | { head -1; grep some-stuff; } 
```

例如

```
ps -ef | { head -1; grep python; } 
```

更新：这似乎只适用于`ps`，抱歉，但我想这通常是人们想要的。

如果您希望它适用于任意命令，似乎您必须编写一个迷你脚本，例如：

```
#!/bin/bash

first_line=true

while read -r line; do
    if [ "${first_line}" = "true" ]; then
        echo "$line"
        first_line=false
    fi
    echo "$line" | grep $*
done 
```

我命名为`hgrep.sh`. 然后你可以像这样使用：

```
ps -ef | ./hgrep.sh -i chrome 
```

这种方法的好处是我们正在使用`grep`所有标志的工作方式完全相同。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-05-06T21:45:30.190

这将通过使用单个接收命令来工作：

```
some-command | sed -n '1p;/PATTERN/p' 
```

使用多行标题也很容易：

```
$ sudo netstat --tcp --udp --listening --numeric --program | sed --quiet '1,2p;/ssh/p'
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1258/sshd           
tcp6       0      0 :::22                   :::*                    LISTEN      1258/sshd 
```

[重申](https://stackoverflow.com/questions/12920317/include-header-in-the-grep-result/50204811#comment87426554_19356846)一下，@ samthebest的解决方案仅适用于非常特定的情况；这将适用于任何写入标准输出的命令。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T17:36:37.977

```
for file in *
do
  [ "$file" = outfile.txt ] && continue
  head -n 1 "$file"
  grep -i '...' "$file"
done > outfile.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-02T19:07:17.843

我会这样做的：

```
ps -fe | awk '{ if ( tolower($0) ~ /network/ || NR == 1 ) print $0}' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T10:14:02.037

嗨，好奇，您可以将 xargs 与您的 cmd 一起使用。

```
find /mahesh  -type f |xargs -I {} -t /bin/sh -c "head -1 {}>>/tmp/out.x|grep -i 6330162 {} >>/tmp/out.x" 
```

/mahesh 是您的文件所在的目录，输出放在 /tmp/out.x 中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-27T07:57:17.867

我写了一个脚本`hgrep`来替换命令`grep`：

```
#!/bin/bash

content=`cat`
echo "$content" | head -1
echo "$content" | tail -n+2 | grep "$@" 
```

然后`df -h | hgrep tmpfs`将输出标题和行包括`tmpfs`

报价至关重要。

# linux - 期望在 Linux 中向进程发送 KEY_DOWN 和 KEY_UP 事件

> ID：12920320
> 
> 赞同：1
> 
> 时间：2012-10-16T17:32:58.213
> 
> 标签：linux, embedded-linux, expect, simulate, pexpect

我想模拟嵌入式 linux 按键事件到我的 Qt GUI 应用程序。我主要想模拟 KEY_UP、KEY_DOWN、KEY_LEFT、KEY_RIGHT 和 KEY_F{1-2-3} 按键。我没有可用的 X。

这里有一个ASCII字符表：

```
http://foldoc.org/ASCII+character+table\ 
```

而且我知道如何发送东西，比如 CNTRL-T，通过生成它并在我的期望脚本中发送以下内容来使用该表到我的应用程序：

```
send "\x14" 
```

我似乎找不到有关如何发送 KEY_ 的文档或示例？使用 Expect 的按键。我怎样才能使用 Expect 做到这一点？

如果不可能，是否有其他方法可以将按键发送到我的进程？我似乎无法将转义序列回显到 /dev/input/keypad ...

更新：

感谢您的评论。

我可以通过执行以下操作看到我的箭头键生成的输出：

```
$ od -c
^[[D^[[C^[[D^[[B^[[A^[[A^[[B^[[B^C 
```

我还可以看到**infocmp xterm**的输出为：

```
am, bce, km, mc5i, mir, msgr, npc, xenl,
    colors#8, cols#80, it#8, lines#24, pairs#64,
    acsc=``aaffggiijjkkllmmnnooppqqrrssttuuvvwwxxyyzz{{||}}~~,
    bel=^G, blink=\E[5m, bold=\E[1m, cbt=\E[Z, civis=\E[?25l,
    clear=\E[H\E[2J, cnorm=\E[?12l\E[?25h, cr=^M,
    csr=\E[%i%p1%d;%p2%dr, cub=\E[%p1%dD, cub1=^H,
    cud=\E[%p1%dB, cud1=^J, cuf=\E[%p1%dC, cuf1=\E[C,
    cup=\E[%i%p1%d;%p2%dH, cuu=\E[%p1%dA, cuu1=\E[A,
    cvvis=\E[?12;25h, dch=\E[%p1%dP, dch1=\E[P, dl=\E[%p1%dM,
    dl1=\E[M, ech=\E[%p1%dX, ed=\E[J, el=\E[K, el1=\E[1K,
    flash=\E[?5h$<100/>\E[?5l, home=\E[H, hpa=\E[%i%p1%dG,
    ht=^I, hts=\EH, ich=\E[%p1%d@, il=\E[%p1%dL, il1=\E[L,
    ind=^J, indn=\E[%p1%dS, invis=\E[8m,
    is2=\E[!p\E[?3;4l\E[4l\E>, kDC=\E[3;2~, kEND=\E[1;2F,
    kHOM=\E[1;2H, kIC=\E[2;2~, kLFT=\E[1;2D, kNXT=\E[6;2~,
    kPRV=\E[5;2~, kRIT=\E[1;2C, kb2=\EOE, kbs=\177, kcbt=\E[Z,
    kcub1=\EOD, kcud1=\EOB, kcuf1=\EOC, kcuu1=\EOA,
    kdch1=\E[3~, kend=\EOF, kent=\EOM, kf1=\EOP, kf10=\E[21~,
    kf11=\E[23~, kf12=\E[24~, kf13=\EO2P, kf14=\EO2Q,
    kf15=\EO2R, kf16=\EO2S, kf17=\E[15;2~, kf18=\E[17;2~,
    kf19=\E[18;2~, kf2=\EOQ, kf20=\E[19;2~, kf21=\E[20;2~,
    kf22=\E[21;2~, kf23=\E[23;2~, kf24=\E[24;2~, kf25=\EO5P,
    kf26=\EO5Q, kf27=\EO5R, kf28=\EO5S, kf29=\E[15;5~,
    kf3=\EOR, kf30=\E[17;5~, kf31=\E[18;5~, kf32=\E[19;5~,
    kf33=\E[20;5~, kf34=\E[21;5~, kf35=\E[23;5~,
    kf36=\E[24;5~, kf37=\EO6P, kf38=\EO6Q, kf39=\EO6R,
    kf4=\EOS, kf40=\EO6S, kf41=\E[15;6~, kf42=\E[17;6~,
    kf43=\E[18;6~, kf44=\E[19;6~, kf45=\E[20;6~,
    kf46=\E[21;6~, kf47=\E[23;6~, kf48=\E[24;6~, kf49=\EO3P,
    kf5=\E[15~, kf50=\EO3Q, kf51=\EO3R, kf52=\EO3S,
    kf53=\E[15;3~, kf54=\E[17;3~, kf55=\E[18;3~,
    kf56=\E[19;3~, kf57=\E[20;3~, kf58=\E[21;3~,
    kf59=\E[23;3~, kf6=\E[17~, kf60=\E[24;3~, kf61=\EO4P,
    kf62=\EO4Q, kf63=\EO4R, kf7=\E[18~, kf8=\E[19~, kf9=\E[20~,
    khome=\EOH, kich1=\E[2~, kmous=\E[M, knp=\E[6~, kpp=\E[5~,
    mc0=\E[i, mc4=\E[4i, mc5=\E[5i, meml=\El, memu=\Em,
    op=\E[39;49m, rc=\E8, rev=\E[7m, ri=\EM, rin=\E[%p1%dT,
    rmacs=\E(B, rmam=\E[?7l, rmcup=\E[?1049l, rmir=\E[4l,
    rmkx=\E[?1l\E>, rmso=\E[27m, rmul=\E[24m, rs1=\Ec,
    rs2=\E[!p\E[?3;4l\E[4l\E>, sc=\E7, setab=\E[4%p1%dm,
    setaf=\E[3%p1%dm,
    setb=\E[4%?%p1%{1}%=%t4%e%p1%{3}%=%t6%e%p1%{4}%=%t1%e%p1%{6}%=%t3%e%p1%d%;m,
    setf=\E[3%?%p1%{1}%=%t4%e%p1%{3}%=%t6%e%p1%{4}%=%t1%e%p1%{6}%=%t3%e%p1%d%;m,
    sgr=\E[0%?%p6%t;1%;%?%p2%t;4%;%?%p1%p3%|%t;7%;%?%p4%t;5%;%?%p7%t;8%;m%?%p9%t\E(0%e\E(B%;,
    sgr0=\E[m\E(B, smacs=\E(0, smam=\E[?7h, smcup=\E[?1049h,
    smir=\E[4h, smkx=\E[?1h\E=, smso=\E[7m, smul=\E[4m,
    tbc=\E[3g, u6=\E[%i%d;%dR, u7=\E[6n, u8=\E[?1;2c, u9=\E[c,
    vpa=\E[%i%p1%dd, 
```

我已经在 Buildroot 的“menuconfig”（很像 Linux）程序上尝试了几个简单的转义序列，如下所示：

```
#!/usr/bin/expect --

# Span menuconfig
spawn make menuconfig

expect *
send {"\e[D"}
#send {"\e[%p1%dB"}

interact 
```

我想打开 menuconfig 并将光标向下移动一个位置。但是，即使我在其中有一个“交互”声明，它也会立即启动并退出。关于为什么的任何想法？谢谢 -

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T10:46:54.203

您是否尝试过使用 autoexpect ？尝试这个 ：

```
$ autoexpect 
```

并做你想做的事，如果你希望它向下滚动两行 - 发送两个向下箭头事件 - 通过按两次向下箭头来执行此操作。然后使用 Ctrl+C 退出 autoexpect

Autoexpect 将生成一个包含所有操作的脚本，如果您希望重复相同的操作，您可以运行该脚本。更重要的是它还将捕获您要发送的关键事件并生成正确的期望脚本行来发送这些事件。就我而言（向下箭头），这是

```
send -- "^[OB" 
```

只需按下要自动发送的所有键，然后检查生成的脚本（通常命名为 script.exp）。希望这可以帮助

# .net - 实体框架 5 列名无效

> ID：12920322
> 
> 赞同：1
> 
> 时间：2012-10-16T17:33:05.747
> 
> 标签：.net, entity-framework

使用 EF5 Code First fluent API 我收到此错误：加载对象时出现“无效的列名 Doctor_ID”。

```
public class User
{
    public int ID { get; set; }
    ...
}

public class Doctor : User
{

    public int? TitleID { get; set; }
    public virtual Title Title { get; set; }
}

public class UserMap : EntityTypeConfiguration<User>
{
    public UserMap()
    {
        this.ToTable("User", "Users");

        // Primary Key
        this.HasKey(t => t.ID);

        ...

    }
}

public class DoctorMap : EntityTypeConfiguration<Doctor>
{
    public DoctorMap()
    {
        // Table & Column Mappings            
        this.ToTable("Doctor", "Doctors");

        //this.Property(t => t.ID).HasColumnName("ID");
        this.Property(t => t.TitleID).HasColumnName("TitleID");            

        // Relationships
        this.HasOptional(t => t.Title)
            .WithMany(t => t.Doctors)
            .HasForeignKey(d => d.TitleID);

    }
} 
```

代码成功执行以下操作：

```
return (from item in this.DataProvider.Users
                    where
                        item.Username == username && item.Password == password
                    select new UserBasicInfo() { ID = item.ID, FirstName = item.FirstName, LastName = item.FirstName, Username = item.Username }).FirstOrDefault(); 
```

在此代码执行以下导致“Invalid column name Doctor_ID”异常之后：

```
User user = this.DataProvider.Users.SingleOrDefault(item => item.ID == id); 
```

第一行代码仅从 users 表中获取数据，这就是它成功执行的原因，但为什么在第二个 EF5 中，当它访问 Doctor 表时无法使用 ID 作为键？

注意：我使用每个类型 TPT 的类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:29:49.183

我认为问题不在于您上面的代码。我无法复制您的错误，并且 CodeFirst 从未在任何表上生成 Doctor_ID 列。是否还有其他未在此处显示的关系被映射？

这是整个控制台应用程序：

```
public class User
{
    public int ID { get; set; }
}

public class Doctor : User
{
    public int? TitleID { get; set; }
    public virtual Title Title { get; set; }
}
public class Title
{
    public int TitleId { get; set; }
    public ICollection<Doctor> Doctors { get; set; }
}

public class UserMap : EntityTypeConfiguration<User>
{
    public UserMap()
    {
        this.ToTable("User", "Users");

        // Primary Key
        this.HasKey(t => t.ID);
    }
}

public class DoctorMap : EntityTypeConfiguration<Doctor>
{
    public DoctorMap()
    {
        // Table & Column Mappings            
        this.ToTable("Doctor", "Doctors");

        //this.Property(t => t.ID).HasColumnName("ID");
        this.Property(t => t.TitleID).HasColumnName("TitleID");

        // Relationships
        this.HasOptional(t => t.Title)
            .WithMany(t => t.Doctors)
            .HasForeignKey(d => d.TitleID);

    }
}
public class Model : DbContext
{
    public DbSet<User> Users { get; set; }
    public DbSet<Doctor> Doctors { get; set; }
    public DbSet<Title> Titles { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new DoctorMap());
        modelBuilder.Configurations.Add(new UserMap());
    }
}

class Program
{
    public static void Main()
    {
        Model m = new Model();
        //var doctor = new Doctor();
        //m.Doctors.Add(doctor);
        //m.SaveChanges();
        var user = m.Users.SingleOrDefault(item => item.ID == 1);

        Console.WriteLine(user.ID);
        Console.ReadLine();
    }

} 
```

哪个创建了这个数据库：

![在此处输入图像描述](../Images/e222ca5373b2a56aa617e2a3127cc6d4.png)

# camera-calibration - 相机单应性

> ID：12920324
> 
> 赞同：6
> 
> 时间：2012-10-16T17:33:23.790
> 
> 标签：camera-calibration, homography

我正在学习相机矩阵的东西。我已经知道我可以通过在对象空间的平面上使用四个点来获得相机的单应性（3*3 矩阵）。我想知道我们是否可以得到四个点不在平面上的单应性？如果是，我怎样才能得到矩阵？我应该看哪些公式？

我还将单应性与另一个概念混淆了：如果我想将点从一个坐标转换到另一个坐标系，我只需要知道三个点。那么为什么我们在计算单应性时需要四个点呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-21T06:56:47.020

Homography 将点 1\. 平面上的点映射到另一个平面上的点 2\. 在纯相机旋转或缩放期间点的 3D 投影（不必位于同一平面上）。

如果您在传感器平面旋转时查看连接点的光线，则可以轻松验证后者：绿色是两个传感器位置，黑色是 3d 对象![相机光线保持物体和相机传感器之间的映射](../Images/a4d7bae8ca255e4270b0b46bebbe37da.png)

由于 Homography 位于投影之间，而不是 3D 中的对象之间，因此您不必关心这些投影代表什么。但这可能会令人困惑，我同意。例如，您可以将相机对准 3D 场景（这不是平面的！），然后旋转您的相机，场景的两张结果图片将通过单应性关联。顺便说一下，这是图像全景的基础。

您提到的三点对应关系可能与称为仿射的转换（在大缩放期间透视效果消失时发生）或在 3D 空间中找到刚性旋转和平移有关。两者都需要 3 点对应，但前者只需要 2D 点，而后者需要 3D 点。后一种情况有 6DOF（3 个用于旋转，3 个用于平移），而每个对应提供 2DOF，因此 6/2=3 个对应。Homography 有 8 个 DOF，所以应该有 8/2=4 个对应；

下面是一个小图，解释了原始正方形向前倾斜时仿射变换和单应变换之间的区别。在仿射情况下，远侧与近侧具有相同长度的透视效果可以忽略不计。在 Homography 的情况下，远端较短。![在此处输入图像描述](../Images/8e7bdd42393893c4b9c6d3bfe011c087.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T13:43:49.293

如果你**只有**4 个点——而且它们不在同一个平面上——那么计算单应性将不起作用。

如果您有很多点，其中 4 个确实位于平面上，但有些没有，则可以使用过滤器来尝试删除不在平面上的点。OpenCV 实现的过滤器称为[RANSAC](http://en.wikipedia.org/wiki/RANSAC)和[LMeDs](http://research.microsoft.com/en-us/um/people/zhang/inria/publis/tutorial-estim/node25.html)。

正如 Hammer 在您的问题下的评论中所说的那样 - 第四点是为了弄清楚观点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-04T02:36:19.990

Homography 是一个 3X3 矩阵，由 8 个独立的未知数组成，这意味着它需要 4 个方程来求解这些未知数。因此，为了计算单应性，我们至少需要 4 个点。

在单应性中，我们假设世界场景中的 Z=0，因此投影的图像假设为 2D。在非常有名的期刊ORB-SLAM中，作者提出了一种根据场景中的运动视差进行场景选择的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-29T14:32:00.940

单应性是两个平面之间的关系，单应性变换的自由度为7；因此，您至少需要 4 个对应点。
4 分会给你 4 对 (x,y) 因此你可以计算 7 个变量。单应性是homogenes transfrom，因此单应性矩阵中的（3,3）值始终为1。
所以你的第一个问题是你可以计算平面上的3个点而不是平面上的第4个点：这是不可能的。您需要将该点投影在平面上，然后您可以计算单应性。
关于如何计算单应矩阵的第二个问题，您可以在 opencv中看到[findHomography()的实现。](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=findhomography#findhomography)

# asp.net - 重建亚音速2.2

> ID：12920328
> 
> 赞同：1
> 
> 时间：2012-10-16T17:33:42.387
> 
> 标签：asp.net, subsonic

我已经有 2 年没有编程了，所以请在你的回答中保持温和。我要回到几年前使用亚音速编写的旧 asp.net 2.0 项目。我无法弄清楚我是如何在这个 asp.net 项目中获得 subsonic 工作的，因为它是一个旧版本 (2.1)，并且 2.x 的文档并没有对我过去构建代码的方式产生任何影响。无论如何，我已经下载了 subsonic 2.2 并设法让它工作，所以我将在网站上使用它。但是我看到各种网页说亚音速 2.2 需要一个非常特定版本的 mysql 数据连接器（我认为是 5.2.3），我应该使用更新版本的连接器重建亚音速 2.2。

问题：这有必要吗？如果是，为什么？我不能只在我的网站中使用版本 5.2.3 的连接器，还是 asp.net 用它自己的版本覆盖它（顺便说一下，我在单独的类项目中生成我的 DAL 而不是网站本身）？我可以防止这种情况发生吗？如果这是必要的，我该怎么做，因为我真的不记得了。我会创建一个新项目，添加亚音速源文件和适当的连接器 dll 并重建亚音速 dll，还是比这更复杂？亚音速 2.2 是否仍受支持，还是我在鞭打试图使用它的死马？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:14:37.050

当您在单独的类项目中生成 DAL 时，您应该能够在 Web 项目中使用您喜欢的任何版本的 MySQL 适配器 .dll。

另一种选择是使用 SubCommander 程序来生成类。

我强烈建议从[https://github.com/subsonic/SubSonic-2.0](https://github.com/subsonic/SubSonic-2.0)获取最新版本 2.x并自己编译。如果项目不是太大，那么可能会考虑迁移出去？SubSonic 在当时是一个很棒的工具，但现在有更好的选择。

# ios - 如何换出 UISplitviewcontroller 中的主视图？

> ID：12920329
> 
> 赞同：0
> 
> 时间：2012-10-16T17:33:51.723
> 
> 标签：ios, uisplitviewcontroller, master-detail

基本上，我有两个用于 splitViewController 的 MasterViewController，但我一次只能使用其中一个来运行应用程序。两个 MasterViewController 都使用相同的 DetailViewController。当用户按下 tabbarbutton 时，第二个 masterViewController 被按下。

splitViewController 在 AppDelegate 中像这样直接声明

```
MasterViewControllerOne *mvc1 = [[MasterViewControllerOne alloc] initWithNibName:@"MasterViewControllerOne_iPad" bundle:nil];
UINavigationController *masterOneNavigationController = [[UINavigationController alloc] initWithRootViewController:mvc1];

DetailViewController *dvc = [[DetailViewController alloc] initWithNibName:@"DetailViewController_iPad" bundle:nil];
UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:dvc];

self.splitViewController = [[UISplitViewController alloc] init];
self.splitViewController.delegate = detailViewController;
self.splitViewController.viewControllers = @[masterOneNavigationController, detailNavigationController];
self.window.rootViewController = self.splitViewController; 
```

在运行时，我希望 MasterViewControllerTwo 与 MasterViewControllerOne 交换

推送新视图控制器的操作：

```
MasterViewControllerTwo*mvc2=[[MasterViewControllerTwo alloc]initWithNibName:@"MasterViewControllerTwo_iPad" bundle:nil];
[self.navigationController pushViewController:mvc2 animated:YES]; 
```

这会在 mvc1 之上交换 mvc2。但是，在 mvc2 中点击 tableview 的行不会激活 DetailViewController。

要激活 DetailView（与 mvc1 和 mvc2 相同），我执行以下操作

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    Item *theItem =[[self.items objectAtIndex:[indexPath section]]objectAtIndex:[indexPath row]];
    [self.detailViewController setLabelsForItems:theItem];
} 
```

只要在 appdelegate 中将 MasterViewController 定义为 splitviewcontrollers 数组的成员，就可以很好地工作。那么为什么 mvc2 在栈顶时不激活 DetailViewController 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:48:58.623

> 在 mvc2 中点击 tableview 的行不会激活 DetailViewController

好吧，这不会自行神奇地发生。选择第二个表视图的一排时，由您响应。您没有显示任何代码来执行此操作，因此假设您没有任何代码。

换句话说，拆分视图控制器除了包含主视图和细节之外，它本身什么也不做。主人和细节之间的沟通取决于你。该模板向您展示了您需要做的事情。

# ruby-on-rails - 通过另一个表关联“未知键：通过”（Rails）

> ID：12920332
> 
> 赞同：3
> 
> 时间：2012-10-16T17:33:57.277
> 
> 标签：ruby-on-rails, associations, has-many-through

我正在我的 Rails 应用程序中创建旅行，我想为这些旅行添加类别。类别存储在我的数据库中的类别表中，用户可以选择适合旅行的类别。因此可以使用多个类别的行程。

虽然我是一个菜鸟，但我在有关该主题的 RoR 指南的帮助下想出了一些事情。现在，我有一个第三个表tripcategories，它必须保存trip_id 和category_id。正确的？有了这个，我有以下模型：

行程.rb：

```
class Trip < ActiveRecord::Base
  attr_accessible :description, :title, :user_id, :triplocations_attributes, :photo
  has_many :triplocations, :dependent => :destroy

  has_many :tripcategories
  has_many :categories, :through => :tripcategories

  accepts_nested_attributes_for :triplocations, allow_destroy: true
end 
```

类别.rb：

```
class Category < ActiveRecord::Base
  attr_accessible :name
  has_many :tripcategories
  belongs_to :trip, :through => :tripcategories
end 
```

tripcategory.rb:

```
class Tripcategory < ActiveRecord::Base
  attr_accessible :category_id, :trip_id
  belongs_to :trip
  belongs_to :category
end 
```

当我以这种方式尝试并尝试在我的旅行索引中调用 trip.categories 时，它会显示`"Unknown key: through"`。我是在做严重错误的事情还是我错过了更大的图景？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T17:40:52.390

```
class Category < ActiveRecord::Base
  attr_accessible :name
  has_many :tripcategories
  has_many :trips, :through => :tripcategories
end 
```

# oop - OOP中粒度的含义

> ID：12920335
> 
> 赞同：6
> 
> 时间：2012-10-16T17:34:23.250
> 
> 标签：oop, design-patterns, granularity

我正在阅读[此](http://sourcemaking.com/design_patterns/flyweight)页面上`flyweight design pattern`的内容。 在编程语言或设计模式的上下文中，我无法理解“粒度”的含义。

谁能解释一下，一个例子会很棒。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-16T18:03:21.727

粒度是一个细节级别。粒度对象是那些在您的程序中处于低级别细节的对象。考虑：

*   游戏景观中的树木
*   文档中的字符
*   电影院的座位
*   cad应用中的电源点

通常，您在应用程序中有许多粒度对象。如果您将为每个树/角色/座位/电源点创建单独的对象，则可能会非常消耗内存。这就是享元模式解决的问题。

# c++ - 我试图弄清楚如何在一个简单的 Qt gui 应用程序中使用线程

> ID：12920336
> 
> 赞同：0
> 
> 时间：2012-10-16T17:34:26.240
> 
> 标签：c++, multithreading, qt, user-interface

在我的简单示例代码中，有一个开始和停止按钮以及一个计数器。当您按下开始时，会创建一个线程并递增计数器，直到您按下停止。点击事件都在工作，但是从 dialog.cpp 调用线程本身并没有启动，并且计数器永远不会增加。任何想法为什么？

代码来自这个人的教程，与他在这里所做的完全一样，他的工作是：[http ://www.voidrealms.com/viewtutorial.aspx?id=79](http://www.voidrealms.com/viewtutorial.aspx?id=79)

对话框.h

```
#ifndef DIALOG_H
#define DIALOG_H

#include "mythread.h"
#include <QDialog>

namespace Ui {
class Dialog;
}

class Dialog : public QDialog
{
    Q_OBJECT

public:
    explicit Dialog(QWidget *parent = 0);
    ~Dialog();
    MyThread *mThread;

private:
    Ui::Dialog *ui;

public slots:
    void onNumberChanged(int);

private slots:
    void on_pushButton_clicked();
    void on_pushButton_2_clicked();
};

#endif // DIALOG_H 
```

对话框.cpp

```
#include "dialog.h"
#include "ui_dialog.h"

Dialog::Dialog(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::Dialog)
{
    ui->setupUi(this);

    mThread = new MyThread(this);
    connect(mThread,SIGNAL(NumberChanged(int)), this, SLOT(onNumberChanged(int)));
}

Dialog::~Dialog()
{
    delete ui;
}

void Dialog::onNumberChanged(int Number){
    ui->label->setText(QString::number(Number));
}

void Dialog::on_pushButton_clicked()
{
    mThread->start();
}

void Dialog::on_pushButton_2_clicked()
{
    mThread->Stop = true;
} 
```

我的线程.h

```
#ifndef MYTHREAD_H
#define MYTHREAD_H

#include <QThread>

class MyThread : public QThread
{
    Q_OBJECT
public:
    explicit MyThread(QObject *parent = 0);
    void run();
    bool Stop;

signals:
    void NumberChanged(int);

public slots:

};

#endif // MYTHREAD_H 
```

我的线程.cpp

```
#include "mythread.h"
#include <QtCore>

MyThread::MyThread(QObject *parent) :
    QThread(parent)
{
}

void MyThread::run() {

    for (int i = 0; i < 100000; i++) {
        QMutex mutex;
        mutex.lock();
        if (this->Stop) break;
        mutex.unlock();

        emit NumberChanged(i);
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:43:57.430

查看您链接的网站上的示例代码后，我发现至少有两个问题：

1）`Stop`成员变量未初始化使用，将构造函数更改为如下所示应该可以解决您的主要问题：

```
MyThread::MyThread(QObject *parent) :
    QThread(parent),
    Stop(false)
{
} 
```

2）`Stop`变量永远不会被重置，所以按下开始/停止按钮只能工作一次。如果 break 语句也重置标志，它会更好地工作：

```
if (this->Stop)
{
    Stop = false;
    break;
} 
```

# wpf - Windows 7 和 Windows 8 桌面 WPF 触摸和鼠标 LeftButtonDown 事件处理差异

> ID：12920337
> 
> 赞同：2
> 
> 时间：2012-10-16T17:34:27.213
> 
> 标签：wpf, windows-7, event-handling, windows-8, touch

我在 WPF 用户控件上创建了一个边框，并注册了 Touch Down 和 Mouse Left Button Down 事件。

```
 <Border 
            TouchDown="Border_TouchDown_1" 
            MouseLeftButtonDown="Border_MouseLeftButtonDown_1">

        <Label FontSize="28">Label</Label>
    </Border> 
```

在文件后面的代码中，我有以下事件处理程序：

```
 private void Border_TouchDown_1(object sender, TouchEventArgs e)
    {
        e.Handled = true;
        Result.Append("Border_TouchDown_1" + "\n");
        LogText = Result.ToString();
        RaisePropertyChange();
    }
    private void Border_MouseLeftButtonDown_1(object sender, MouseButtonEventArgs e)
    {
        Result.Append("Border_MouseLeftButtonDown_1" + "\n");
        LogText = Result.ToString();
        RaisePropertyChange();
    } 
```

在 Windows 8 中的触摸手势上，我看到两个事件处理程序都被触发，即使事件是在 Border_TouchDown_1 方法中处理的。在 Windows 7 中，我只看到调用了 Border_TouchDown_1 方法，这似乎是正确的，因为事件已被处理。

我猜微软简洁地决定触发这两个事件以使所有应用程序触摸感知这对于仅鼠标应用程序是可以的，但我的应用程序是触摸感知的，我想关闭此行为。

有没有内线的人？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T21:26:13.453

你知道什么会让你大吃一惊吗？如果您不设置`e.Handled = true`，您将不会获得鼠标事件（至少对于 PreviewTouchDown / PreviewMouseDown）。这几乎就像有人为 Windows 8 打错了字，而且它正在倒退。

# css - 使用文本作为 DIV 的背景

> ID：12920339
> 
> 赞同：3
> 
> 时间：2012-10-16T17:34:34.790
> 
> 标签：css, html

我试图在 DIV 的背景中获取一段文本，并在其上显示控件。我已经准备好效果，但是菜单在文本上方，文本导致菜单中的链接不再起作用。我创建了一个 jsfiddle 来说明我的意思：

[http://jsfiddle.net/aBqw8/1/](http://jsfiddle.net/aBqw8/1/)

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T17:36:18.610

怎么加...

```
z-index: -1; 
```

到`span.title`规则集？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:41:08.190

在样式表中将标题的 Z-index 设置为 -999

# mercurial - 大公司如何处理 Mercurial？

> ID：12920341
> 
> 赞同：2
> 
> 时间：2012-10-16T17:34:46.137
> 
> 标签：mercurial

我正在研究如何将我们的源代码控制从 SVN 迁移到 Mercurial。我不确定如何处理的一件事是提交中的用户名。从我所见，没有办法强制 HG 用户使用特定的用户名，即使在 Mercurial.ini 中指定，用户也可以在提交中使用**hg commit中的****-u**标志覆盖它。

 **企业如何应对这种情况？没有什么可以阻止开发人员 A 作为开发人员 B 在他的存储库中提交某些内容，然后将其推送给其他人。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:51:40.043

I wouldn't say our company is large (4 developers), but it's never been an issue for us so far. I haven't seen any way to prevent that behavior either in my searching. I guess it comes down to an issue of trust amongst your developers.

Unrelated, we did successfully migrate from SVN to Mercurial about two years ago so I may be able to answer other questions you have.

* * *

EDIT: An idea:

I'm not sure how you were planning on setting up your topology, but we have a server that functions as the central repository for all our repos. It is possible to push changes between developers (bypassing the central server), but we never do that. We always commit locally and then push/pull from/to the central server. Additionally, we use https and windows authentication to authenticate with this central server.

If you're planning on having something like this, you could create a hook on the server (see [repository events](http://hgbook.red-bean.com/read/handling-repository-events-with-hooks.html)) (maybe the `precommit` event) that would verify that the user name in each commit being pushed is the same as the authenticated user from the web server.

Not sure if this would work, but it sounds plausable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:51:09.627

# 另一次尝试

## 伪 CVCS 工作流中基于路径的 ACL

如果您将使用“受控无政府状态”工作流程（p2p 通信不受控制、受限制且受信任且单一权威来源是常见的推送目标），您可以使用“每个开发人员的分支”范式。即 - 在中央存储库上使用[ACL 扩展](http://mercurial.selenic.com/wiki/AclExtension)，适用以下限制：

*   没有人可以推送到默认分支
*   **每个开发人员只能在他的个人分支**中推送（以任何名称，名称没有任何意义，用于跟踪的 auth-data 是分支名称）
*   只有受信任的合并才能与 repo-Central 一起使用（将 dev-branch 合并为默认值，没有 rebase|NO 在 dev-branch 中重写历史记录）
*   默认分支中的每个合并集都包含身份验证部分 - 源分支

## 签约分行

如果您在提交中不能信任（并且您**不能信任）用户名，那么您可以信任强加密。**Mercurial 至少有两个扩展，允许对提交进行数字签名，从而提供关于作者身份的准确（一般，见下面的注释）信息，在这两种情况下都有各自的优缺点

*   [Windows mini-HowTo 上的Commitsigs Extension Wiki](http://mercurial.selenic.com/wiki/CommitsigsExtension)和[Signing Mercurial Changesets](http://dhickey.ie/post/2011/05/02/Siging-Mercurial-Changesets-on-Windows.aspx)足够完整，足以理解和演示开始的所有方面。优点：没有额外的签名提交，你不能（按设计）签署旧的历史提交。相反：所需命令的输出不太好（请参阅 Damian 帖子中的屏幕截图以获取日志和验证信息），因为它是 GnuPG（无 PKI），理论上可以为任何名称电子邮件创建和使用密钥对，并且只有“额外" 比较会为一个用户显示两个不同的键
*   [来自 wiki 的GPG 扩展](http://mercurial.selenic.com/wiki/GpgExtension)和[批准报告](http://mercurial.selenic.com/wiki/Workflows#Approval_Reports)作为快速入门。优点：~~可以使用 pgp-keys 或 openssl-certs (TBT!!!)（其中 openssl 表示已颁发证书的一个公司来源）~~，sigcheck 命令的更具可读性和信息量的输出。反对：

> 提交对工作副本根目录中的 .hgsigs 文件的更改，因此需要进行额外的更改集。这使得签署所有变更集变得不可行。合并分支时，.hgsigs 文件也必须像任何其他文件一样合并。

最后文件可以被恶意用户手动修改，就像 WC 中的任何其他文件一样

**编辑和错误修复** Openssl 可以在 Commitsigs 中使用，而不是 GPG 扩展**

# pid - Fedora Commons 启动问题

> ID：12920342
> 
> 赞同：1
> 
> 时间：2012-10-16T17:34:49.203
> 
> 标签：pid, fedora-commons

我一直在 Fedora 17 系统上安装 Fedora Commons。一切都像魅力一样消失了，我遵循了本指南：

[http://asingh.com.np/blog/fedora-commons-installation-and-configuration-guide/](http://asingh.com.np/blog/fedora-commons-installation-and-configuration-guide/)

但是，无论我做什么，“Fedora Commons”服务都不会启动。/var/log/messages 中没有显示任何内容

运行“service fedora start”以 OK 结束，但是当我之后运行“service fedora status”时，它显示“Fedora Commons 服务已停止”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:10:52.397

Fedora Commons 对正确设置环境可能有些挑剔。一般来说，我更喜欢安装一个新的 Tomcat servlet 容器，然后选择“existingTomcat”自定义安装，而不是让 Fedora Commons 安装程序为您创建一个 servlet 容器。通过这样做，您可以更轻松地将 servlet 容器安装/配置问题（网上有很多关于此的文档）与 Fedora Commons 安装/配置问题（关于此的信息不多）分开。

此外，在进行新的 Fedora 安装时，我发现下载一个名为“psi-probe”的 servlet 并将其部署到 Tomcat 容器中会有所帮助。它有助于调试环境问题，并为您提供一种从通用 Web 界面查看所有 servlet 的日志文件的简单方法。

[http://code.google.com/p/psi-probe/](http://code.google.com/p/psi-probe/)

进一步更新：我忘了提到一件事也会阻止 Fedora Commons 运行，那就是 Fedora Commons 似乎不能很好地与许多操作系统发行版上默认安装的 OpenJDK 配合使用。即使安装成功且配置正确，这也可能导致 Fedora Commons 悄无声息地失败，并且没有日志信息。将环境变量切换为指向另一个版本的 JDK（OpenJDK 除外）将解决此问题。

# ios - 使用货币将字符串转换为双精度

> ID：12920345
> 
> 赞同：0
> 
> 时间：2012-10-16T17:34:54.017
> 
> 标签：ios, currency, nsnumberformatter

```
 NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
    [numberFormatter   setNumberStyle: NSNumberFormatterCurrencyStyle];
    double value = [[numberFormatter  numberFromString: ProviderTripRate.text] doubleValue];
    [User setDouble:value forKey:@"Trip_Rate"];
NSLog(@"     %@                  %f     " , ProviderTripRate.text  ,   value  ); 
```

如果 ProviderTripRate.text 中的数据为 2.75，则值为 0 错误 如果 ProviderTripRate.text 中的数据为 $2.75，则值为 2.75 正确

您如何可靠地将字符串从字符串转换为双精度值注意文本字符串可能有也可能没有本地货币符号（如上所示的 $），但它应该始终转换

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:49:05.387

尝试这个：

```
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle: NSNumberFormatterCurrencyStyle];
NSNumber* number = [numberFormatter  numberFromString:ProviderTripRate.text]
if (!number) {
    [numberFormatter setNumberStyle: NSNumberFormatterDecimalStyle];
    number = [numberFormatter  numberFromString:ProviderTripRate.text];
}
double value = [number doubleValue]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:37:08.263

尝试这个：

```
if ([providerTripRate.text hasPrefix:@"$"]) {
    // use NSNumberFormatter to obtain the value
} else {
    float theValue = [providerTripRate.text doubleValue];
} 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-12T12:31:58.973

```
extension String {
/// Creates a Double from the string
///
/// Tries various ways of extracting a number, currently handling the following formats
/// - 1000
/// - 1000.00
/// - 1,000.00
/// - $1,000.00
///
/// - Returns: Double value, or 0.0 if a non numerical String is passed
  func asDouble() -> Double {

    if let double = Double(self) {
        return double
    }

    let formatter = NumberFormatter()
    if let number = formatter.number(from: self) {
        return number.doubleValue
    }

    formatter.numberStyle = .currency
    if let number = formatter.number(from: self) {
        return number.doubleValue
    }

    formatter.currencySymbol = ""
    formatter.internationalCurrencySymbol = ""

    if let number = formatter.number(from: self) {
        return number.doubleValue
    }

    return 0
  }
} 
```

# java - 线程和休眠会话的随机错误

> ID：12920349
> 
> 赞同：3
> 
> 时间：2012-10-16T17:35:15.717
> 
> 标签：java, spring, hibernate

我使用hibernate3和spring。

Java代码：

类 CommunicationServiceImpl，方法 sendAllMessages：

```
Collection<MessageToSend> messagesToSend = this.repositoriesLocator.getMessageToSendRepository().getMessagesToSend();

        Iterator<MessageToSend> iteratorMesToSe = messagesToSend.iterator();
        while (iteratorMesToSe.hasNext()) {
            MessageToSend mts = iteratorMesToSe.next();

            MessageSender sender = new SmsSender(mts, this.repositoriesLocator);
            sender.start(); //run thread                
        } 
```

短信发件人：

```
public class SmsSender extends MessageSender {

public SmsSender(MessageToSend messageToSend, RepositoriesLocator repositoriesLocator) {
    super(messageToSend, repositoriesLocator);      
}

public void sendMessages() {            
    try {
        MessageToSendSms messageToSendSms = (MessageToSendSms) this.messageToSend;                                                      
        Iterator<CustomerByMessage> itCbmsgs = messageToSendSms.getCustomerByMessage().iterator();          
        while (itCbmsgs.hasNext()) {                
            CustomerByMessage cbm = (CustomerByMessage) itCbmsgs.next();        

            //sms sending                           
            String sResult = this.sendSMS(cb.getBody(), cbm.getCellPhone());
            cbm.setStatus(CustomerByMessageStatus.SENT_OK);
            cbm.setSendingDate(Calendar.getInstance().getTime());                               
        }

        messageToSendSms.setStatus(messageToSendStats.PROCESSED)
        this.log.info("saving messageToSend..."); 
        //this line dont work!
        this.repositoriesLocator.getMessageToSendRepository().update(messageToSendSms);         
        this.log.info("messageToSend saved!");                      
    } catch (Exception e) {         
        this.log.error("Error sms sender " + e.getMessage());
    }       
} 
```

这是我的 appContext.xml 的一部分：

```
<bean id="serviceCommunication"
    class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
    <property name="transactionManager">
        <ref local="transactionManager" />
    </property>
    <property name="target">
        <ref local="communicationServiceImpl" />
    </property>             
    <property name="transactionAttributes">
        <props>
            <prop key="*">PROPAGATION_REQUIRED</prop>
        </props>
    </property>
</bean>

<bean id="communicationServiceImpl"
    class="com.ninatec.fnet3.services.communication.impl.CommunicationServiceImpl"
    parent="serviceParent">
</bean> 
```

HibernateRepository
repositoriesLocator.getMessageToSendRepository().update 代码：

```
public void update(MessageToSend messageToSend) {
    try {
        this.getSession().update(messageToSend);
    } catch (HibernateException e) {
        this.log.error(e.getMessage(), e);
        throw e;
    }
} 
```

实体 MessageToSend 从未更新过。

当我调用 CommunicationServiceImpl.sendAllMessages() 时，我在一个集合中拥有所有 messagesToSend。对于每个 MessageToSend，我都会创建一个线程来发送消息。线程 smsSender 工作得很好，但不是数据库中的持久性。对象 MessageToSend 的更改尚未在我的数据库中更新。

随机误差是：

会议结束，

无法初始化代理 - 没有会话，

无法初始化代理 - 拥有的 Session 已关闭，

非法尝试将集合与 hibernate 和

未能延迟初始化角色集合：没有会话或会话已关闭

* * *

*   *   关于线程。我想为 x 短信使用一个线程。每个smsSender，发送一组短信。

我不明白如何在我的架构中明确地将对象从会话中分离出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:04:40.830

您正在使用线程和 Hibernate 会话做非常糟糕的事情。首先`CommunicationServiceImpl.sendAllMessages()`是事务性的。这意味着`MessageToSend`实体在您迭代`messagesToSend`集合时连接到 Hibernate 会话。没关系。

但是，对于每个实体，您都会启动处理该实体的新线程^(* 。)在该线程中，您对 执行大量计算`MessageToSend`，包括一些子查询和更新。这是危险的竞争条件表现出来的地方：

如果在我们仍在主`while (iteratorMesToSe.hasNext())`循环内（我们仍在`sendAllMessages()`方法内）`MessageToSend`时启动的线程仍附加到在父线程中启动的原始会话。但是，如果父线程完成了迭代（我们 exited `sendAllMessages()`）但子线程`MessageSender`仍在运行，您将收到上述暂时错误。“ `session closed`”基本上意味着父线程在子线程完成处理之前关闭了会话。

简单来说，你不应该让绑定到 Hibernate 会话的对象从当前线程中逃逸。而是显式地将它们从会话中分离（例如，通过清除会话或将事务进一步向上移动，以便在迭代它们时您的对象不会附加到会话）并为每个已处理的行启动新事务。

^* - 似乎您正在为要发送的每条短信创建一个新线程。这不是很可扩展，一旦要发送的消息总数达到数千，您的系统就会崩溃。而是使用线程池 ( [`ExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html))。

# xml - 输入/输出元素的名称必须是唯一的（WSDL 规范）

> ID：12920350
> 
> 赞同：3
> 
> 时间：2012-10-16T17:35:21.970
> 
> 标签：xml, web-services, xsd, wsdl, unique

我在[这里](http://www.coderanch.com/t/595284/Web-Services/java/Name-input-output-element-must)发布了这个问题。但没有得到任何答案。所以我也把它贴在这里。

* * *

我有一个关于 WSDL 的问题。

我有一个具有以下两种方法的 WSDL：

```
<portType name="TestService">
    <operation name="add">
        <input
            wsam:Action="http://service.psvm.com/testservice/TestService/addRequest"
            message="tns:add"
            name="InputNums" />
        <output
            wsam:Action="http://service.psvm.com/testservice/TestService/addResponse"
            message="tns:addResponse"
            name="Result" />
    </operation>
    <operation name="subtract">
        <input
            wsam:Action="http://service.psvm.com/testservice/TestService/subtractRequest"
            message="tns:subtract"
            name="InputNums" />
        <output
            wsam:Action="http://service.psvm.com/testservice/TestService/subtractResponse"
            message="tns:subtractResponse"
            name="Result" />
    </operation>
</portType> 
```

如您所见，加法和减法操作都具有分别具有相同名称“InputNums”和“Result”的输入和输出消息。

当我尝试验证此 WSDL 时，我收到以下错误：

> 为此输入元素指定的名称“InputNums”不是唯一的。输入元素的名称必须与“TestService”端口类型中定义的所有其他输入和输出元素的名称不同。

我在这里阅读了 WSDL 规范，但没有清楚地说明原因（至少对我而言）。它说：

> 输入和输出元素的名称属性在封闭端口类型内的所有输入和输出元素中提供唯一名称。为了避免必须命名操作中的每个输入和输出元素，WSDL 提供了一些基于操作名称的默认值。

为了避免命名每个输入/输出元素，WSDL 提供了默认值。但为什么这是一个规则？不应该是警告吗？如果开发商愿意，他/她不能自己提供姓名吗？

此外，我不明白为什么这是一个问题，因为当客户端调用 Web 服务时，它们会使用称为“添加”或“减法”的特定操作名称进行调用。我的问题最后是 - 只要操作名称不同，为什么参数名称很重要？如果有的话，有人可以解释一下拥有这样的 WSDL 的后果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:56:26.853

我认为如果您描述的话，可能会有更好的答案`why not?`。如果您坚持使用默认设置，它会对您有什么影响？如果你想命名它们，为什么不遵守规则呢？

这并不是说你有些不对。事实上，WSDL 2.0 完全删除了这个属性。因此，我想从事规范工作的人在基于 1.1 注释的实现中没有发现任何证据表明该规则有任何实际用途；因此，本着这种精神，他们连同属性一起放弃了它。我很确定即使使用 RPC 样式绑定，这些名称也没有任何用处。

我可以理解为什么在早期有人会提出这个规则：它与名称的其余规则是一致的；我猜有人认为，随后的绑定规范可能会发现这些名称是唯一的。

如果有人会问为什么它没有在 WSDL 1.1 的 XSD 中强制执行，就像其他名称规则一样，我会回答 XSD 不能表达这个约束（因为它跨越两个可以匹配的不同选择器）时间）。

我真的认为重要的是你为什么要关心。我测试过的所有工具（.NET 和 JAX-WS）并不介意：它们能够进行合同到代码的绑定。WS-I BP 1.x 和 2.x 似乎甚至没有解决它。所有这一切，以及看到 WSDL 2.0 将它们全部丢弃，告诉你你是对的，它是/没用的。

我也知道不会验证 WSDL 的工具，例如您的工具；另一方面，.NET 甚至不会吱吱作响。

尽管如此，如果您关心的验证结果超出了实用性，那么您只需要坚持规则......或者忽略它。

# entity-framework - DBContext DBSet 查询和无跟踪选项

> ID：12920353
> 
> 赞同：6
> 
> 时间：2012-10-16T17:35:33.947
> 
> 标签：entity-framework

[根据实体框架和 DbContext - 对象跟踪](https://stackoverflow.com/questions/7099134/entity-framework-and-dbcontext-object-tracking)等其他帖子， 简化的 DBContext 接口似乎没有公开设置对基本查询的无跟踪。一个小博客展示了如何使用对象上下文 [http://blogs.microsoft.co.il/blogs/gilf/archive/2009/02/20/disabling-change-tracking-in-entity-framework.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2009/02/20/disabling-change-tracking-in-entity-framework.aspx)

通过未跟踪的 DbContext 加载结果的好方法是什么？如果使用 Dbcontext ，性能意识如何？即有基本的 GetList 方法，出于性能原因，我想改进。

```
public DbSet<T> EntityDbSet { get { return _context.Set<T>(); } }
public virtual IQueryable<T> GetList(Expression<Func<T, bool>> predicate)
    {
         return EntityDbSet.Where(predicate);
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T18:18:56.297

The [AsNoTracking](http://msdn.microsoft.com/en-us/library/system.data.entity.dbextensions.asnotracking%28v=vs.103%29.aspx) is an extension on IQueryable.

You can update your function above with:

```
public virtual IQueryable<T> GetList(Expression<Func<T, bool>> predicate)
    {
         return EntityDbSet.Where(predicate).AsNoTracking();
    } 
```

# c++ - 在有些复杂的 Visual Studio 解决方案中未解析的外部符号

> ID：12920356
> 
> 赞同：2
> 
> 时间：2012-10-16T17:35:53.967
> 
> 标签：c++, visual-studio-2010, visual-c++, unresolved-external

一段时间以来，我一直在为这个烦人的未解决的外部符号而苦苦挣扎。我只是似乎没有找到错误在哪里，我的库似乎是链接的，但不知何故编译器看不到它。

```
2>win_main.obj : error LNK2019: unresolved external symbol "void * __cdecl nedalloc::nedmalloc(unsigned int)" (?nedmalloc@nedalloc@@YAPAXI@Z) referenced in function "private: static void * __cdecl Seventh::AllocatedObject::allocateBytes(unsigned int)" (?allocateBytes@AllocatedObject@Seventh@@CAPAXI@Z)
2>win_main.obj : error LNK2019: unresolved external symbol "void __cdecl nedalloc::nedfree(void *)" (?nedfree@nedalloc@@YAXPAX@Z) referenced in function "private: static void __cdecl Seventh::AllocatedObject::deallocateBytes(void *)" (?deallocateBytes@AllocatedObject@Seventh@@CAXPAX@Z)
2>C:\Users\X\X\X\SeventhEngine\Debug\SeventhEngineExamples.exe : fatal error LNK1120: 2 unresolved externals 
```

我正在尝试链接*nedmalloc* dll 导出的库，我已经使用*框架依赖*项链接了它，并将其包含在 Additional Libraries 中。`NEDMALLOC_DLL_EXPORTS`我还使用确保`__declspec(dllexport)`标志编译了库。

如果您想查看，可以查看完整的源代码（包括 VS2010 解决方案和项目）：

[https://github.com/albertofem/SeventhEngine](https://github.com/albertofem/SeventhEngine)

我几乎可以肯定这是一个设置问题。此外，请随时发布有关此设置的任何建议和意见。

提前致谢。

**更新**

```
Dump of file nedmalloc.dll

File Type: DLL

  Section contains the following exports for nedmalloc.dll

    00000000 characteristics
    507C8192 time date stamp Mon Oct 15 23:35:14 2012
        0.00 version
           1 ordinal base
          43 number of functions
          43 number of names

    ordinal hint RVA      name

          1    0 000110FA nedblksize = @ILT+245(_nedblksize)
          2    1 0001129E nedcalloc = @ILT+665(_nedcalloc)
          3    2 00011069 nedcreatepool = @ILT+100(_nedcreatepool)
          4    3 00011041 neddestroypool = @ILT+60(_neddestroypool)
          5    4 000110FF neddestroysyspool = @ILT+250(_neddestroysyspool)
          6    5 00011050 neddisablethreadcache = @ILT+75(_neddisablethreadcache)
          7    6 0001121C nedflushlogs = @ILT+535(_nedflushlogs)
          8    7 00011203 nedfree = @ILT+510(_nedfree)
          9    8 0001138E nedfree2 = @ILT+905(_nedfree2)
         10    9 00011159 nedgetvalue = @ILT+340(_nedgetvalue)
         11    A 00011343 nedindependent_calloc = @ILT+830(_nedindependent_calloc)
         12    B 00011325 nedindependent_comalloc = @ILT+800(_nedindependent_comalloc)
         13    C 000112C1 nedmallinfo = @ILT+700(_nedmallinfo)
         14    D 0001126C nedmalloc = @ILT+615(_nedmalloc)
         15    E 00011055 nedmalloc2 = @ILT+80(_nedmalloc2)
         16    F 0001105F nedmalloc_footprint = @ILT+90(_nedmalloc_footprint)
         17   10 00011299 nedmalloc_internals = @ILT+660(_nedmalloc_internals)
         18   11 00011023 nedmalloc_stats = @ILT+30(_nedmalloc_stats)
         19   12 0001128F nedmalloc_trim = @ILT+650(_nedmalloc_trim)
         20   13 000110C3 nedmallopt = @ILT+190(_nedmallopt)
         21   14 000112BC nedmemalign = @ILT+695(_nedmemalign)
         22   15 000110AF nedmemsize = @ILT+170(_nedmemsize)
         23   16 00011073 nedpcalloc = @ILT+110(_nedpcalloc)
         24   17 000113CF nedpfree = @ILT+970(_nedpfree)
         25   18 00011253 nedpfree2 = @ILT+590(_nedpfree2)
         26   19 000112E9 nedpindependent_calloc = @ILT+740(_nedpindependent_calloc)
         27   1A 00011136 nedpindependent_comalloc = @ILT+305(_nedpindependent_comalloc)
         28   1B 000111F4 nedpmallinfo = @ILT+495(_nedpmallinfo)
         29   1C 000110AA nedpmalloc = @ILT+165(_nedpmalloc)
         30   1D 000112AD nedpmalloc2 = @ILT+680(_nedpmalloc2)
         31   1E 00011208 nedpmalloc_footprint = @ILT+515(_nedpmalloc_footprint)

         32   1F 000113A2 nedpmalloc_stats = @ILT+925(_nedpmalloc_stats)
         33   20 0001125D nedpmalloc_trim = @ILT+600(_nedpmalloc_trim)
         34   21 000112DF nedpmallopt = @ILT+730(_nedpmallopt)
         35   22 00011113 nedpmemalign = @ILT+270(_nedpmemalign)
         36   23 000112F8 nedpoollist = @ILT+755(_nedpoollist)
         37   24 0001119A nedprealloc = @ILT+405(_nedprealloc)
         38   25 000110F5 nedprealloc2 = @ILT+240(_nedprealloc2)
         39   26 000111B8 nedpsetvalue = @ILT+435(_nedpsetvalue)
         40   27 00011078 nedrealloc = @ILT+115(_nedrealloc)
         41   28 00011267 nedrealloc2 = @ILT+610(_nedrealloc2)
         42   29 00011311 nedsetvalue = @ILT+780(_nedsetvalue)
         43   2A 0001105A nedtrimthreadcache = @ILT+85(_nedtrimthreadcache)

  Summary

        1000 .data
        1000 .idata
        3000 .rdata
        1000 .reloc
        1000 .rsrc
       12000 .text
       10000 .textbss 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:20:24.237

为了标记`extern "C"`您还需要定义的功能，似乎有一个“错误”（或设计） `NO_NED_NAMESPACE`：

```
#if defined(__cplusplus)
 #if !defined(NO_NED_NAMESPACE)
namespace nedalloc {
 #else
extern "C" {
 #endif
.
.
. 
```

如您所见`extern "C"`，仅在`NO_NED_NAMESPACE`定义时添加。

# operating-system - 为什么计算器和 excel 在 32 位系统中显示的值大于 2^31 -1？

> ID：12920359
> 
> 赞同：0
> 
> 时间：2012-10-16T17:36:02.330
> 
> 标签：operating-system, cpu

我参加了一些 c/c++ 课程，并且我了解 int 类型大小受 CPU 架构的限制。

对于 32 位，int 的最大值是`2^32`( `4,294,967,295`)，但是当我使用计算器或 excel 时，我得到的数字很大，而且比`2^32`.

我真的不明白这个程序如何打印出比 2^23 value 更大的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:38:16.620

您仍然可以在 32 位系统中使用大于 32 位的值。事实上，有 BIGINT 库（如[GMP](http://gmplib.org/)）允许您使用*任意大*的整数。这些庞大的数字只需要通过**软件**而不是**硬件**来处理。

[x86-specific example] 在简单的 32 位加法使用`add`指令的情况下，该指令将两个 32 位寄存器相加，64 位或 BIGINT 加法需要*一次将数字相加 32 位，*从一个手动传播进位除了下。

也可以看看：

*   [如何在 C++ 中实现大 int](https://stackoverflow.com/questions/269268/how-to-implement-big-int-in-c)
*   [在 C++ 或 C 中存储大数字](https://stackoverflow.com/questions/6865903/storing-big-numbers-in-c-or-c?lq=1)

# wcf - 发布服务时，什么可能导致“由于具有通配符操作而在导出期间跳过操作”错误？

> ID：12920365
> 
> 赞同：1
> 
> 时间：2012-10-16T17:36:25.527
> 
> 标签：wcf, web-services, iis-7, biztalk, wcf-wshttpbinding

我使用工具 WCF BizTalk 在 BizTalk 中创建了一个编排，并将其作为服务发布。这导致了在 IIS 7 中托管的服务。当我更改 web.config 文件以启用调试时，我发现了以下错误：

```
Message
An operation was skipped during export because it has a wildcard action. 
This is not supported in WSDL.

Contract Name:ITwoWayAsync
Contract Namespace:http://BTKPruebas.pruebaWCF
Operation Name:TwoWayMethod 
```

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-21T16:32:44.300

一些谷歌搜索让我得到了[这个答案](https://social.msdn.microsoft.com/Forums/vstudio/en-US/dca8a16b-1ed7-46a6-94fd-67a89d8c98b8/error-while-exporting-the-policy-from-a-wcf-application?forum=wcf&prof=required)：

您可以通过从 ReplyAction 中删除任何 * 字符来解决它。

> [System.ServiceModel.OperationContractAttribute(Action="http://www.yyyyy.com/somthing/Registration/RegistrationService/version/2.1/getCoCRecordByMemberShipID", **ReplyAction="*"** )]

# sql - sql server 更新，其中第二个表值与第三个表中的最大值相关

> ID：12920373
> 
> 赞同：0
> 
> 时间：2012-10-16T17:36:55.283
> 
> 标签：sql, sql-server

我有三个表，其中重要字段标有连字符。如何使用具有 MAX invoiceDate 的发票中的 Customergiftcardpurchase.Amount 更新所有 Customer.MostRecentGiftCardPurchaseAmount？

```
Customer
-pk customerID
-Money MostRecentGiftCardPurchaseAmount
Customergiftcardpurchase
-fk customerID
-fk invoiceID
-Money amount
Invoice
-pk invoiceID
-Date invoiceDate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:48:35.940

尝试：

```
update Customer set
    MostRecentGiftCardPurchaseAmount = mrp.amount
from
    Customer c
    inner join (
        select lp.customerID, lp.amount
        from
            Customergiftcardpurchase lp
            inner join Invoice li
                on lp.customerID = li.customerID
            inner join (
                select p.customerID, max(i.invoiceDate) as MaxInvoiceDate
                from
                    Customergiftcardpurchase p
                    inner join Invoice i
                        on p.InvoiceId = i.InvoiceId
                group by p.customerID
            ) as md
                on lp.customerID = md.customerID
                and li.invoiceDate = md.MaxInvoiceDate
    ) as mrp
        on c.customerID = mrp.customerID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:48:25.447

使用子查询：

```
 Update c Set 
   MostRecentGiftCardPurchaseAmount =
     (Select Amount 
      From Customergiftcardpurchase p
          Join Invoice I 
             On I.invoiceId = p.invoiceId
                And i.invoiceDate = 
                   (Select Max(invoiceDate)
                    From Customergiftcardpurchase c2 
                       Join Invoice I2 On I2.invoiceId = c2.invoiceId
                    Where customerID = c.customerID)
      Where customerID = c.customerID)
 From Customer c 
```

# dojo - 扩展库中的不可关闭对话框

> ID：12920381
> 
> 赞同：2
> 
> 时间：2012-10-16T17:37:41.187
> 
> 标签：dojo, xpages, xpages-extlib

我正在从 ExtLib 创建一个对话框，我想阻止用户按 Escape 或单击 X 图标。

我已经检查了几篇关于相同实现的帖子，但没有一个使用 ExtLib 中的对话框。

我能够用 CSS 隐藏图标，我正在尝试使用 dojo.connect 来防止使用 Escape 键：

```
 XSP.addOnLoad(function(){
    dojo.connect(dojo.byId("#{id:dlgMsg}"), "onkeypress", function (evt) {  
        if(evt.keyCode == dojo.keys.ESCAPE) {           
            dojo.stopEvent(evt);
        }
    });
}); 
```

注意只有当我手动创建对话框而不是从 ExtLib 中创建我的对话框时，我才能让它工作；然后我可以使用例如：

```
dojo.connect(dojo.byId("divDlgLock"), "onkeypress", function (evt) {
        if(evt.keyCode == dojo.keys.ESCAPE) {           
            dojo.stopEvent(evt);
        }
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:15:37.510

通过添加输出脚本块，您可以扩展现有声明：

```
<xp:scriptBlock id="scriptBlockNonCloseableDialog">
   <xp:this.value>
      <![CDATA[
         dojo.provide("extlib.dijit.OneUIDialogNonCloseableDialog");
         dojo.require("extlib.dijit.Dialog");
         dojo.declare(
            "extlib.dijit.OneUIDialogNonCloseableDialog",
            extlib.dijit.Dialog,
            {
               baseClass: "",
               templateString: dojo.cache("extlib.dijit", "templates/OneUIDialog.html"),
               disableCloseButton: true,
               _onKey: function(evt){
               if(this.disableCloseButton &&
                  evt.charOrCode == dojo.keys.ESCAPE) return;
                  this.inherited(arguments);
               },
               _updateCloseButtonState: function(){
                  dojo.style(this.closeButtonNode,
                  "display",this.disableCloseButton ? "none" : "block");
               },
               postCreate: function(){
                  this.inherited(arguments);
                  this._updateCloseButtonState();
                  dojo.query('form', dojo.body())[0].appendChild(this.domNode);
               },
               _setup: function() {
                  this.inherited(arguments);
                  if (this.domNode.parentNode.nodeName.toLowerCase() == 'body')
                     dojo.query('form', dojo.body())[0].appendChild(this.domNode);               
               }        
            }
         );

         // This is used by the picker dialog to grab the correct UI
         XSP._dialog_type="extlib.dijit.OneUIDialogNonCloseableDialog";
      ]]>
   </xp:this.value>
</xp:scriptBlock> 
```

# c# - 使用 DotNetZip 库压缩列表文件的内容

> ID：12920382
> 
> 赞同：0
> 
> 时间：2012-10-16T17:37:42.133
> 
> 标签：c#

我有一个 .lst 文件，其中包含必须压缩的各种数据的路径。该路径可以是可执行文件的直接路径或日志文件的路径，也可以包含通配符，例如 - c:\abc*.exe。如何将它们全部压缩成一个 zip 文件？谢谢

DotNetZip 库是@:http://dotnetzip.codeplex.com/wikipage?title=CS-examples&referringTitle=Examples

.lst 文件的内容：

c:\log\abc.log

c:\log\def.log

c:\ping*.bat

c:\ping*.exe

这是我尝试过的：

```
using (ZipFile zip = new ZipFile())     
{                      
   StreamReader file = File.OpenText("C:\\pingman\\pingzipA.lst");
   string read = String.Empty;

   while ((read = file.ReadLine()) != null)                  
   {                                      
      zip.AddSelectedFiles(read, true);    
      zip.Save("c:\\update.zip");       
   }

   file.Close();   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:55:56.983

这是一个链接，其中包含大量示例，请查看使用示例来完成您尝试做的事情。甚至还有一个使用通配符的示例

[带有示例的 DontNetZip 库站点](http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:16:01.987

尝试类似：

```
 while ((read = file.ReadLine()) != null)                  
 {              
   if (read.Contains("*"))                        
   {
       zip.AddSelectedFiles(read, true);    
   }
   else
   {
       zip.AddFile(read);
   }
 }
 zip.Save("c:\\update.zip"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T14:57:33.973

让它工作。

```
if (read.Contains("*"))
                    {
                        int i = read.IndexOf("*");
                        string path = read.Substring(0, i--);
                        string doc = read.Substring(i+1);
                        zip.AddSelectedFiles(doc, @path, true);
                    }
                    else
                    {
                        zip.AddFile(read);
                    } 
```

# iphone - 将 UITextFields 输入合并到一个 UITtextField

> ID：12920386
> 
> 赞同：0
> 
> 时间：2012-10-16T17:38:14.363
> 
> 标签：iphone, ios, uitextfield, uitextview, xcode4.3

我是 xcode 和目标 c 的新手。这个问题我已经问了三遍了，仍然找不到好的方法或答案。我有几个 uitextfields 接受用户输入并按照 IBAction 使用的顺序将其添加到组合文本字段中。即用户在一个字段中输入大，在下一个字段中输入错误，在第三个字段中输入男孩，结果是组合文本字段中的大坏男孩。

```
-(IBAction)addtextField1: (id)sender
{
 combinedtextField.text = [NSMutableString stringWithFormat:@"%@ %@",
 combinedtextField.text,textField1.text];
}

-(IBAction)addtextField2: (id)sender
{
 combinedtextField.text = [NSMutableString stringWithFormat:@"%@ %@",
             combinedtextField.text,  textField2.text];
}
-(IBAction)addtextField3:(id)sender
{
combinedtextField.text = [NSMutableString stringWithFormat:@"%@ %@",
                   combinedtextField.text,textField3.text];
} 
```

现在这很有趣。我需要能够从组合文本字段中删除选定的文本。

```
-(IBAction)removetextField1:(id)sender
{
  //////////????????????////////////////
}

-(IBAction)removetextField2: (id)sender
{
  //////////????????????////////////////
}
-(IBAction)removetextField3: (id)sender
{
//////////????????????////////////////
} 
```

如果我点击 removetextField2 按钮，它将从组合文本字段中删除相应的文本（坏），然后它会读取（大男孩）我查看了 nsarrays、nsdictionarys 和其他方法，但没有找到。需要一些可能标记输入并以这种方式删除它的方法。示例代码会很棒，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:34:01.637

你遗漏了一些关于你的应用程序的重要细节，所以我正在猜测它应该如何工作。

也许您应该做的是保留已添加到组合字符串中的所有片段的可变数组：

```
@implementation MyViewController {
    NSMutableArray *fragments_;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    fragments_ = [[NSMutableArray alloc] init];
} 
```

当点击其中一个添加按钮时，将相应字段的文本附加到数组并重新计算组合字符串：

```
- (IBAction)addTextField1:(id)sender {
    [fragments_ addObject:textField1.text];
    [self updateCombinedTextField];
}

- (void)updateCombinedTextField {
    combinedTextField.text = [fragments componentsJoinedByString:@" "];
} 
```

当点击删除按钮之一时，您尝试从片段数组中删除相应字段的文本并重新计算组合字符串：

```
- (IBAction)removeTextField1:(id)sender {
    [fragments_ removeObject:textField1.text];
    [self updateCombinedTextField];
} 
```

这将从片段数组中删除所有出现的字段 1 的文本。如果您只想删除一个实例，则需要使用`indexOfObject:`（或其变体之一）后跟`removeObjectAtIndex:`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:26:09.367

您不能以非常琐碎的方式做到这一点（无需添加任何内容，只需 1stroke 魔术功能）。但是，有一种简单的方法，我可能会选择。

如果你不需要做很多次，和/或文本很小（不像一本 500 页的书），那么：

创建一个名为 的布尔数组`mark`，并`mark[i]`应将“第一个文本字段”标记`i`为“已添加”。然后，创建一个名为 的函数，该函数将根据数组`reloadCombinedTextField`再次创建它。`mark`（如果`mark[i] == true`，那么我们添加一个文本字段的文本，否则不）
然后，只需在每个函数中标记或取消标记所需的文本字段，并在每次调用结束时调用 reload 函数。

尽管如此，还有另一种方法，但在您的文本字段具有相同文本的情况下它可能是错误的。问题是，您只需在组合文本字段中搜索所选文本字段中的文本（例如，使用`[NSString rangeOfString]`方法）并将其删除。

如果您要经常这样做并且文本非常大，那么它会变得更加复杂。但我很确定，你不会在 iOS 上这样做。

# asp.net - IE 9 显示为空

> ID：12920392
> 
> 赞同：0
> 
> 时间：2012-10-16T17:38:24.310
> 
> 标签：asp.net, asp.net-mvc

在我的模型中，我定义了 NullDisplayFormat

```
[StringLength(100)]
[DisplayName("First Contact")]
[DisplayFormat(NullDisplayText = "")]
[Column("Contact1",TypeName =  "varchar")]
public virtual string Contact1 { get; set; } 
```

在 Google Chrome 和 FireFox 中，我在视图中的网格和输入控件中什么都看不到。但是，在 IE 9 中，我看到 NULL。它是 IE 9 中的错误吗？修复它的最简单方法是什么？

我还尝试在 jQuery 中以这种方式将 null 更改为空：

```
var Contact1 = $('.trSelected td:eq(3)').text();
$('#Contact1').val(Contact1||'Nothing'); 
```

但是，它不起作用，因为 Contact1 已经是一个字符串属性 = null。你知道我该如何解决吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:36:00.233

问题在于使用 JSON 在网格中显示。所以，我修改了我返回的代码，例如

```
 var flexgrid = new
            {
                page = page,
                total = Total,
                rows = clients
                .Select(x => new
                {
                    id = x.Id,

                    cell = new { Id = x.Id, Number = x.Number, Name = x.Name, Contact1 = x.Contact1.Contact ?? String.Empty }
                }
                )
            };

            return Json(flexgrid, JsonRequestBehavior.AllowGet); 
```

也许 DisplayFormat 仅适用于在单个控件中查看/编辑它，而不是当我们将它作为一个集合返回时。有趣的是，Google Chrome 和 FireFox 将 NULL 显示为空字符串。

# c# - 将 ItemsControl 背景设置为 SystemColor

> ID：12920396
> 
> 赞同：0
> 
> 时间：2012-10-16T17:38:36.790
> 
> 标签：c#, wpf

我有一个[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)，我想根据当前系统主题将其背景设置为空客户端的颜色，尽管我可以这样做：

```
<ItemsControl Background="{DynamicResource {x:Static SystemColors.WindowColor}}" /> 
```

但是当我尝试这个时，没有显示[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)，因为它的背景呈现为透明的，只有将它设置为本地画笔才能完成这项工作。
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:19:33.107

`Background` property is of `Brush` type. Moreover, you're using DynamicResource extension. So you have to define resource key, not resource itself in you declaration:

```
<ItemsControl Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}" /> 
```

# android - 如何让 ProgressBar 停止旋转？

> ID：12920397
> 
> 赞同：32
> 
> 时间：2012-10-16T17:38:41.563
> 
> 标签：android, android-progressbar

当我添加水平 ProgressBar 时，它的行为符合预期——我设置了进度值并显示它。

但是，当我添加 ProgressBar（圆形）时，它会旋转。就是这样。在这种形式中，任何进度条都更像是“请稍候”指示器，因为未显示进度值。

所以我的问题是（假设名称中的进步意味着进步） - 如何停止旋转并显示进度值？例如，如果我将 max 设置为 100，将 value 设置为 50，我希望看到半圆弧。

换句话说，如何使圆形 ProgressBar 表现得像水平 ProgressBar，只有形状除外？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-05-18T18:25:36.117

我知道这是一篇旧帖子，但我遇到了同样的问题，我让它工作了。

它实际上比您想象的要容易，您必须在可绘制文件夹内的 xml 文件中设置自定义进度，并处理 <rotate> 标签中的“fromDegrees”和“toDegrees”属性：

这是 custom_progress.xml 的代码（您可以根据需要自定义，但不能修改“fromDegrees”和“toDegrees”）

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@android:id/background">
        <shape
            android:innerRadiusRatio="2.3"
            android:shape="ring"
            android:useLevel="false"
            android:type="sweep"
            android:thicknessRatio="15.0">
            <solid android:color="#0099ff"/>
        </shape>
    </item>
    <item android:id="@android:id/progress">
        <rotate
            android:pivotX="50%"
            android:pivotY="50%"
            android:fromDegrees="-90"
            android:toDegrees="-90">
            <shape
                android:innerRadiusRatio="2.3"
                android:shape="ring"
                android:angle="0"
                android:type="sweep"
                android:thicknessRatio="15.0">
                <solid android:color="#e0e0e0"/>
            </shape>
        </rotate>
    </item>
</layer-list> 
```

对于您的进度条，您必须设置以下属性：

```
<ProgressBar
    android:id="@+id/progressbar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:indeterminate="false"
    android:max="100"
    android:progress="20"
    android:progressDrawable="@drawable/custom_progress" /> 
```

这里发生的情况是进度将从 -90 度开始，这对我来说是进度条视图的顶部并且向右，它将继续朝着相同的度数，这将使视图进度开始和结束相同的程度。

**注意：** 如果您将“fromDegrees”和“toDegrees”都设置为 0，则进度将从圆圈的右侧开始。

希望它可以帮助有相同要求的人。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-03T11:57:15.143

既然`Api 21`您可以这样做：假设您`ProgressBar`以这种方式定义：

```
 <ProgressBar xmlns:android="http://schemas.android.com/apk/res/android"
    style="?android:attr/progressBarStyleLarge"
    android:id="@+id/progress_bar"
    android:layout_width="@dimen/item_width"
    android:layout_height="@dimen/item_height"
    android:clickable="false"
    android:indeterminate="true"
    android:indeterminateDrawable="@drawable/progress"/> 
```

这是`progress.xml`：

```
<shape
    android:innerRadiusRatio="3"
    android:shape="ring"
    android:thicknessRatio="8"
    android:useLevel="false" >

    <size
        android:height="76dip"
        android:width="76dip" />

    <gradient
        android:angle="0"
        android:endColor="@color/colorGrayText"
        android:startColor="@android:color/transparent"
        android:type="sweep"
        android:useLevel="false" />

</shape> 
```

现在你可以在你的`ProgressBar`：

```
 ProgressBar progressBar = (ProgressBar) findViewById(R.id.progress_bar);
        if (progressBar != null) {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
                RotateDrawable rotateDrawable = (RotateDrawable) progressBar.getIndeterminateDrawable();
                rotateDrawable.setToDegrees(0);
            }
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T17:44:18.677

就像 toadzky 评论的那样，没有烘焙方法。你可以试试这个[ProgressWheel](https://github.com/Todd-Davies/ProgressWheel)。如果不出意外，它应该让您了解如何实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-30T15:13:08.493

您可以访问进度条的可见性属性，并在需要像这样不可见时将其设置为不可见

```
ProgressBar progressBar = view.findViewById<ProgressBar>(R.id.progressbar)

progressBar.visibility = ProgressBar.INVISIBLE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-17T14:30:34.680

对于确定的进度条意味着进度条不会继续旋转，用户可以设置一个固定的百分比。

```
<ProgressBar
                android:id="@+id/pb_sharpness"
                style="@style/Widget.AppCompat.ProgressBar.Horizontal"
                android:layout_width="@dimen/dp_50"
                android:layout_height="@dimen/dp_50"
                android:layout_marginTop="@dimen/dp_16"
                android:indeterminate="false"
                android:max="100"
                android:progressDrawable="@drawable/custom_progress_bar"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent" /> 
```

用于将drawable添加到上面的进度条

```
 <?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@android:id/background">
    <shape
        android:innerRadiusRatio="2.3"
        android:shape="ring"
        android:useLevel="false"
        android:type="sweep"
        android:thicknessRatio="15.0">
        <solid android:color="@color/white_color"/>
    </shape>
</item>
<item android:id="@android:id/progress">
    <rotate
        android:pivotX="50%"
        android:pivotY="50%"
        android:fromDegrees="180"
        android:toDegrees="0"
        >
        <shape
            android:innerRadiusRatio="2.3"
            android:shape="ring"
            android:angle="0"
            android:type="sweep"
            android:thicknessRatio="15.0">
            <gradient
                android:startColor="@color/color_5646F3"
                android:endColor="@color/color_ED88FE" />
        </shape>
    </rotate>
</item> 
```

# objective-c - 无法从 iPhone 应用程序中的 URL 播放视频？

> ID：12920399
> 
> 赞同：1
> 
> 时间：2012-10-16T17:38:54.560
> 
> 标签：objective-c, ios, video

我在播放基于 URL 的视频时遇到问题。这是我的代码：

```
-(void)clickplay
{ 
   NSURL *fileURL = [NSURL URLWithString:@"http://km.support.apple.com/library/APPLE/APPLECARE_ALLGEOS/HT1211/sample_iTunes.mov"];
   MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc]initWithContentURL:fileURL]; 
   [moviePlayerController.view setFrame:CGRectMake(0, 70, 320, 270)];
   [self.view addSubview:moviePlayerController.view];
   moviePlayerController.fullscreen = YES;
   [moviePlayerController play];
} 
```

它编译成功，播放器确实弹出了，但它只是一直在加载……我尝试多次更改 URL，但没有效果。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:53:03.527

```
videoURL=[NSURL URLWithString:URL]];

    videoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:videoURL];

    videoPlayer.view.frame = CGRectMake(0,0, 320, 480);

     [videoPlayer prepareToPlay];

    [self.view addSubview:videoPlayer.view];

    [videoPlayer play];

    videoPlayer.movieControlMode = MPMovieControlModeHidden;

    // Register to receive a notification when the movie has finished playing.
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackComplete:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:videoPlayer];

/* configuring notification*/
- (void)moviePlayBackComplete:(NSNotification *)notification
{
    [videoPlayer stop];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:32:42.023

这是我关于用 iPhone 播放**.3gp**文件的答案.....**我已经** 使用***MpMoviePlayerController***成功地用 iphone sdk 播放了 .3gp 文件，我的答案链接是：

链接：[https ://stackoverflow.com/a/13088808/1092219](https://stackoverflow.com/a/13088808/1092219)

希望你能从我的回答中得到帮助…………！！:))))))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T17:55:32.047

您需要保留对 moviePlayerController 的引用。它正在被释放并阻止调用任何委托消息。可能最容易放置它的地方是包含`- (void)clickplay`实现的类中。也就是说，添加一个名为的新实例变量并将`moviePlayerController`其分配给.`MPMoviePlayerController``clickplay`

# delphi - 如何在 Delphi 中处理项目特定组件？

> ID：12920400
> 
> 赞同：10
> 
> 时间：2012-10-16T17:38:55.693
> 
> 标签：delphi, components, delphi-xe

假设我们有一个从事许多不同项目的团队。每个团队成员在其开发周期中使用不同的视觉/非视觉控件/组件集。由于 Delphi 要求在 IDE 中全局编译和安装每个组件，在使用其他团队成员启动的项目时如何管理这种情况？

如果我可以从版本控制中签出项目的源代码并能够立即编译它，那就太好了。我不在乎或者有时不知道这个项目需要哪些视觉或非视觉组件，我想它们都应该包含在项目源代码中。

也许有一些工具可以读取主项目文件或目录并在项目加载时编译/安装所有需要的组件（并在项目关闭时卸载它们）？

你如何在 Delphi 中处理这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T17:27:13.557

在我们公司，我们也有同样的问题。我们通过强制每个人将所有必要的库路径添加到他们的 delphi ide 来解决这个问题。

我们正在使用一个额外的 sdk/framwork 存储库，其中包含每个人的所有组件/sdks/frameworks。我们保留一个文本文件，列出所有库及其版本、安装信息等。每个人都检查他们想要的库，所以我们没有双重库或不同版本。

由于我们都在 Windows 下工作，并且因为 Delphi 在注册表中保留了它的路径和（afaik）已安装组件信息，我们提取了这些信息。我们在 sdk 存储库主干中为每个使用的 delphi 版本存储一个 .reg 文件。

因此，如果有人更改了框架，他会更新 .reg 文件中每个人的信息并提交。

现在，如果有人想设置他们的开发机器，他们会签出 sdk，将例如 xe2.reg 信息添加到他们的注册表中，然后签出项目并... tada。编译。

我们没有尝试提取“已安装的组件”包。这就是我们的待办事项清单。另一种方法是保留一个批处理文件，用于一次构建和安装所有 sdk 包。但我不知道在delphi中是否可以通过命令行安装组件。

像 JEDI 安装程序这样的东西会很好。安装程序会检测已安装的 Delphi 版本并很好地构建和安装所有内容。一个可自由配置的版本会很好，所以添加所有 sdks -> 在每个版本上安装.. 完美。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T18:58:39.517

任何想要编译给定项目的人都必须首先安装该项目正在使用的任何组件。除非项目直接包含组件源代码并在代码中实例化组件而不是使用 DFM，否则无法解决这个问题。AFAIK，没有 IDE 工具可以为您在每个项目的基础上自动安装（卸载）组件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T20:09:10.670

限制团队将使用哪些组件和库是非常明智的。如果每个成员都决定他们将使用哪个组件，那么您的最终可执行文件或包将会增长很多，并且您可能会在库之间出现一些不兼容性。

此外，您可能需要额外的成本购买和更新非常相似的库。请记住，每次 Delphi 更新时，您都应该从大多数库中购买新的许可证。

所以最好的方法是：

*   询问每个开发人员正在使用哪些库，并与他们讨论每个人的真正需求；

*   对所需的库进行编目并将它们安装在您将编译最终代码的机器上；

# eclipse - 使用 Eclipse/Java 陷入循环

> ID：12920401
> 
> 赞同：0
> 
> 时间：2012-10-16T17:38:57.430
> 
> 标签：eclipse, loops

我试图弄清楚 while 循环，在测试和运行程序的过程中，输入窗口卡在问我同样的问题。我可以重新启动程序，但必须有另一种方法。我已经搜索了该网站，并且有一些类似的链接，但不准确。请简单地为我提供某种转义命令，以便在我不重新启动 Eclipse 的情况下关闭此窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:47:13.437

当您通过 Eclipse 运行应用程序时，Console 选项卡中应该有一个 Terminate 按钮。

![终止](../Images/a86b22f73b36253e3e44451b850093cf.png)

单击它将终止正在运行的进程而不退出 Eclipse。

# sql-server - MVC 3 中的 EF 4.1 - 表单提交覆盖数据库中默认的日期

> ID：12920402
> 
> 赞同：0
> 
> 时间：2012-10-16T17:39:04.060
> 
> 标签：sql-server, asp.net-mvc-3, entity-framework

所以我有一个小表，其中一列是日期，默认 GETDATE() 约束用作时间戳。

模型和 ViewModel 都没有这个日期的属性，但我有一个 edmx 文件，所以很明显它有。我不会在应用程序的任何时候捕获日期。

问题是当更改提交到数据库时，模型包含日期“0001-01-01”，这会覆盖数据库中的默认值。

有什么方法可以忽略客户端的日期吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:44:45.543

您需要将[StoreGeneratedPattern](http://msdn.microsoft.com/en-us/library/system.data.metadata.edm.storegeneratedpattern.aspx)设置为`Computed`EDMX 中的该属性。在此处查看[相关问题](https://stackoverflow.com/questions/5042327/entity-framework-storegeneratedpattern-computed-property-problem)。

# jquery - jQuery 向 spring mvc 服务器发送 json 请求后出现 400 错误

> ID：12920403
> 
> 赞同：0
> 
> 时间：2012-10-16T17:39:05.047
> 
> 标签：jquery, json, spring-mvc

我的 spring3.1 mvc 服务器可以通过 add 响应正确的 json 结果`@ResponseBody`，在 spring 设置文件上应该没有问题。包含的 servlet.xml

```
<mvc:annotation-driven/> 
```

我把杰克逊罐子放在类路径中。

而且我的 html 文件还在 .ajaxSetup() 方法中将 contentType 设置为“application/json”。我可以看到帖子标题在 Firebug 中是正确的。

我还尝试包含 json2.js 来调用 JSON.stringify 方法。

json格式示例：

```
{"link":"http:xxxxx","ticker":"xxxxx"} 
```

responseBody 类是 Document：

```
public class Document implements Serializable{
   public String getLink(){...}
   public String setLink(String link){...}
   public String getTicker(){...}
   public String setTicker(String ticker){...}
} 
```

控制器代码：

```
public class LoadFile  {                                                                                                                                                                                                                                                                                                                                                                         

    @RequestMapping(value="/loadFile",method=RequestMethod.POST)                                                                                                                                                  
    public @ResponseBody Document loadFile(@RequestBody Document document){ 
        ...
    }
} 
```

html代码：

```
$(function() {                                                                                                                                                                                                   
    $.ajaxSetup({                                                                                                                                                                                               
        contentType:"application/json;charset=utf-8" 
    });                                                                                                                                                       
    $.post( url, { link: link, ticker:ticker },                                                                                                                                            
        function( data ) {  
           ....
        },"json"
    );
} 
```

Document 类在添加时可以作为 json 对象返回`@ResponseBody`，但作为 a 时`@RequestBody`，服务器返回 400 错误。不知道会发生什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:01:25.693

替换`@RequestBody`为`@ModelAttribute`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:45:19.017

我最近遇到了类似的问题。对我来说，它是在变量名周围添加“”，这给了我 400 错误。试试这样：

```
{link:"http:xxxxx",ticker:"xxxxx"} 
```

还要确保你的变量对应于你的数据库，这取决于 Spring3.1 如何处理数据。（例如以正确的顺序）

我希望这对你有帮助。

# c# - WinForms Webbrowser 中的任何内容，例如 Android Javascript 接口？

> ID：12920404
> 
> 赞同：2
> 
> 时间：2012-10-16T17:39:16.307
> 
> 标签：c#, javascript, winforms, interface, browser

对不起，愚蠢的问题，我只想从我的 VB/C# 代码将一个 JOSN 字符串传递给 webbrowser 中的网页，网页中的 javascript 可以通过某些接口调用 VB/C# 方法吗？就像android javascript界面​​一样，非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:10:54.380

如果我理解正确，

```
webBrowser2.ObjectForScripting = new ScriptClass();
webBrowser2.DocumentText = "<html><script>window.external.Test('hello')</script></html>";

[System.Runtime.InteropServices.ComVisibleAttribute(true)]
public class ScriptClass
{
    public void Test(string msg)
    {
        MessageBox.Show(msg);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T17:53:52.717

因此，您正在使用 WebBrowser 控件并且需要在它显示的页面中调用 JavaScript 方法？是的，你可以这样做。它不在 WebBrowser 本身上，但`HtmlDocument`由 WebBrowser 的`Document`属性公开的对象有一个`InvokeScript()`方法组，它允许您以编程方式调用页面 DOM 中的任何 ECMAScript 兼容方法，可选择将一系列参数作为对象传递大批。

反过来，这可用于触发从 JavaScript 到 JSON Web 服务的调用（您在主 CLR 程序中公开该服务，并通过将信息传递给页面来告知页面`InvokeScript()`）。这是基本的 JSON/AJAX 客户端-服务器脚本，所有内容都封装在一个程序中，与自己对话。这不是完成工作的最有效方式，但如果您已经拥有完成工作的这些层，并且只想发布一个独立的应用程序，那么它就可以工作。

# php - MySQL查询 - 如何获取相关标签的数量

> ID：12920406
> 
> 赞同：2
> 
> 时间：2012-10-16T17:39:24.187
> 
> 标签：php, mysql

我正在努力寻找一种查询所需数据的好方法。我正在使用 mySQL 和 php。目前，我正在进行多个查询并为每个循环使用一堆，但是，我仍然无法获得必要的输出。

这可能是一个棘手的问题，所以我感谢任何努力解决这个问题的人！

* * *

我目前的表格如下：

```
topics_keywords (t_k_id, topic_id, keyword_id)
keywords (keyword_id, keyword)
topics (topic_id, subject, etc) 
```

表`topics_keyword`将有多个与同一个 topic_id 关联的关键字。

表`keywords`只会为每个keyword_id 定义一个关键字。

如果有人查询特定关键字（即体育），我想返回与 topic_id 相关的所有相关关键字的列表。

在下面的 SQL 中，您将看到主题 3 与关键字 ID 的 3（体育）和 4（棒球）相关联。但是，请注意它也与keyword_id 2(hello) 相关联。

我只需要计算“运动”与棒球相关的次数。我说的很简单，但我想不出一个简单的方法来做到这一点。

基于以下数据的最终输出需要如下所示：

搜索词：“棒球”最终输出：

```
count  | keyword
----------------
sports | 2
hello  | 1 
```

下面是一些 mySQL 来帮助浏览数据：

```
CREATE TABLE IF NOT EXISTS `keywords` (
  `keyword_id` int(11) NOT NULL AUTO_INCREMENT,
  `keyword` varchar(64) NOT NULL,
  PRIMARY KEY (`keyword_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=9 ;

--
-- Dumping data for table `keywords`
--

INSERT INTO `keywords` (`keyword_id`, `keyword`) VALUES
(1, 'thebump'),
(2, 'hello'),
(3, 'baseball'),
(4, 'sports'),
(5, 'manga'),
(6, 'naruto'),
(7, 'one piece');

-- --------------------------------------------------------

--
-- Table structure for table `topics_keywords`
--

CREATE TABLE IF NOT EXISTS `topics_keywords` (
  `t_k_id` int(11) NOT NULL AUTO_INCREMENT,
  `topics_id` int(11) NOT NULL,
  `keyword_id` int(11) NOT NULL,
  PRIMARY KEY (`t_k_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=11 ;

--
-- Dumping data for table `topics_keywords`
--

INSERT INTO `topics_keywords` (`t_k_id`, `topics_id`, `keyword_id`) VALUES
(1, 1, 1),
(2, 2, 2),
(3, 3, 3),
(4, 3, 4),
(5, 4, 3),
(6, 5, 3),
(7, 5, 4),
(8, 6, 3),
(9, 6, 4),
(10, 3, 2); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:55:47.127

尝试这个：

```
SELECT keyword, 
       Count(*) 
FROM   topics_keywords 
       INNER JOIN keywords 
               ON topics_keywords.keyword_id = keywords.keyword_id 
       INNER JOIN (SELECT k1.keyword_id AS keyword_id, 
                          topics_keywords.topics_id 
                   FROM   keywords k1 
                          INNER JOIN topics_keywords 
                                  ON topics_keywords.keyword_id = k1.keyword_id 
                   WHERE  keyword = 'baseball') AS temp 
               ON temp.keyword_id != keywords.keyword_id 
                  AND temp.topics_id = topics_keywords.topics_id 
GROUP  BY keyword 
```

**[SQLFiddle 演示](http://sqlfiddle.com/#!2/640f4/15/0)**

编辑：你也可以试试这个：

```
SELECT keywords.keyword, 
       Count(*) 
FROM   topics_keywords 
       INNER JOIN keywords 
               ON topics_keywords.keyword_id = keywords.keyword_id 
       INNER JOIN keywords k1 
               ON k1.keyword_id != keywords.keyword_id 
       INNER JOIN topics_keywords t1 
               ON t1.keyword_id = k1.keyword_id 
                  AND t1.topics_id = topics_keywords.topics_id 
WHERE  k1.keyword = 'baseball' 
GROUP  BY keyword 
```

**[SQLFiddle 演示](http://sqlfiddle.com/#!2/640f4/19/0)**

我个人觉得第一个应该更快，但如果你可以对其进行基准测试，发布结果会很好。

# python - python列表平均超过bin大小

> ID：12920413
> 
> 赞同：3
> 
> 时间：2012-10-16T17:40:26.090
> 
> 标签：python, list, math, average

我有 N 个不同长度的大型列表，其中列表中的每个值代表长度为 25 的固定窗口上的信号。即，我每 25 秒/基数/等取信号的平均值，并将该值存储在一个列表。

我为运行不同时间长度（所有 25 btw 的倍数）的不同实验/设备执行此操作。

即，list 1 是 1000 次运行，list1 中有 1000/25=40 个值，list 2 是 1025 分钟运行，list2 中有 1025/25 = 41 个值，list3 是 2525 次运行，2525/25 = 101 list3 中的值等...

现在，为了比较，我想将每个列表重新缩放到相同数量的箱，让我们说 40 个箱。

事实上，list1resized 的长度将是 40，并且它的值不会改变，因为 1000/40 = 25 正好。list2resized 将从 41 个值的长度变为 40 个值的长度，而 list3 将从 101 个值的长度变为 40 个值的长度（也就是所有列表现在都具有相同的大小）。

问题来了。如何通过在适当的 bin 上取加权平均值来将每个列表的大小调整为 40 的固定长度？

一个例子将澄清这个问题。

```
list1 = [4.8, 6.9, ...]  #40 values for the 1000 run
list2 = [5.6, 7.8, 8.9, 13.4, ...] #41 values for the 1025 run
list3 = [4.1, 5.6, 10.3, 9.8, 40, 30, 21.4, 3, 2,...] #101 values for the 2525 run 
```

现在，调整大小的列表应如下所示：

```
list1resized = [4.8*25/25, 6.9*25/25,...] #40 values for the 1000 run
list2resized = [(5.6*25+7.8*0.625)/25.625, (7.8*24.375+8.9*1.275)/25.625, (23.725*8.9+1.9*13.4)/25.625,...] # 40 values, averaged accordingly, for the 1025 run
list3resized = [(4.1*25+5.6*25+10.3*13.125)/(63.125), (10.3*11.875+9.8*25+40*25+30*1.25)/(63.125),...] # 40 values, averaged accordingly, for the 2525 run 
```

为了获得调整后列表中每个元素的平均值，我们对新调整大小的 bin 进行加权平均（即，对于 list1，平均超过 1000/40=25，对于 list2，平均超过 1025/40=25.625，平均超过2525/40=63.125 for list3 等）。即，相同但使用我用于加权平均值的公式：

```
list1resized = [4.8*25/25, 6.9*25/25,...] #40 values for the 1000 run
list2resized = [(5.6*25+7.8*0.625)/25.625, (7.8*24.375+8.9*(25.65-24.375))/(25.625), (23.725*8.9+(25.625-23.725)*13.4)/(25.625),...] # 40 values, averaged accordingly, for the 1025 run
list3resized = [(4.1*25+5.6*25+10.3*13.125)/(63.125), (10.3*(25-13.125)+9.8*25+40*25+30*(63.125-25*3+13.125)))/(63.125),...] # 40 values, averaged accordingly, for the 2525 run 
```

如您所见，它可能会变得混乱且难以处理，但我正在寻找一种 Python 风格、优雅且快速的解决方案。

我必须多次对许多列表执行此操作，因此考虑运行时间会很好。

不确定您是否有任何想法，但我们将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T20:18:13.800

这个时髦的 [也许] 解决方案怎么样？

首先是测量列表...

```
l = [5.6, 7.8, 8.9, 13.4] 
```

复制每个测量值 25 次（每秒一次……）

```
l1 = [item for sublist in [list(itertools.repeat(k,25)) for k in l] for item in sublist] 
```

每秒标准化：

```
l2 = map(lambda x: x / 25., l1) 
```

请参阅此 SO 帖子以获取将列表分成 n 个几乎相等的分区的函数（复制如下）：

[Python：将列表切成 n 个几乎等长的分区](https://stackoverflow.com/questions/2659900/python-slicing-a-list-into-n-nearly-equal-length-partitions)

```
def partition(lst, n):
    division = len(lst) / float(n)
    return [ lst[int(round(division * i)): int(round(division * (i + 1)))] for i in xrange(n) ] 
```

定义列表的新长度

```
new_len = 2 
```

将您的每秒列表分成您想要的部分数量：

```
l3 = partition(l2, new_len) 
```

对每个分区中每秒的值求和

```
l4 = map(sum, l3) 
```

标准化列表大小的差异

```
l5 = map(lambda x: x * new_len / float(len(l)), l4) 
```

欣赏结果：

```
print l5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T21:23:51.147

这是一个相当困难的问题，但我认为你让它变得比实际更复杂。我将从一些观察开始。

观察 1\. 您可以将很多事情分解到之后，以减少所涉及的编码。与其除以 25（这会很快变得非常复杂），不如将该操作保存到最后。

```
list2resized = [i/25.625 for i in [(5.6*25+7.8*0.625), 
                                   (7.8*24.375+8.9*(25.65-24.375)), 
                                   (23.725*8.9+(25.625-23.725)*13.4),...]]

# consider using ratios, rather than division
list2resized = [i * 1.025 for i in [(5.6 * 1 + 7.8 * .025), 
                                    (7.8 * .975 + 8.9 * .050), 
                                    (8.9 * .95 + 13.4 * .075),...]] 
```

观察 2。因此，每个进行项的系数是 25 的递增步长。将除法除以 1000 直到后面——如果您选择将整个方程乘以 1000 并使用模运算符...

```
 list2resized = [i * 1025/1000 for i in [(5.6 * 1000 + 7.8 * 25), # 1025 steps in
                                          (7.8 * 975 + 8.9 * 50), # 2050 steps in
                                          (8.9 * 950 + 13.4 * 75) # 3075 steps in 
```

观察 3。

最终调整大小中的每个“bin”需要为 1.025 长（给定 41 个起始 bin，但最终取决于要调整的列表的长度）。 `1.0 * list[0] + .025 * list[1]` 考虑到观察 2，您可以将整个方程重写为一个系列——

```
# the sum of the coefficients is always equal to the resize ratio
(1 * n1) + (.025 * n2)
(.975 * n2) + (.050 * n3) 
(.950 * n3) + (.075 * n4)
... 
```

等等

现在，你可以生成这些系数——

```
a = [i/40.0 for i in range(0, 40)][1:]
b = [1 - i/40.0 for i in range(0, 40)] 
```

但这些都很容易，因为“旋转”永远不会赶上它自己。您所要做的就是为方程的每个相应部分迭代每个 bin 中的系数，然后将它们压缩在一起，并对它们求和。这只会将列表最大压缩到其原始大小的一半。在这种情况下，你应该使用上面的算法，它比你可以扔给它的任何其他算法都要快得多，因为它只是创建一个数字列表，然后在列表理解上进行乘法运算。

但是，复杂的情况是您有 101 个数字的示例，其中出现了多个术语（有时是第四个！）...

```
101/40.0 = 2.525 
# your bins need to be 2.525 units long.  

data = [4.1, 5.6, 10.3, 9.8, 40, 30, 21.4, 3, 2,...]

# calculated by hand
(1 * n1) + (1 * n2) + (.525 * n3) 
(.475 * n3) + (1 * n4) + (1 * n5) + (.05 * n6)
(.95 * n6) + (1 * n7) + (.575 * n8)
(.425 * n8) + (1 * n9) + (1 * n10) + (.100 * n11) 
```

因此，我们需要一种更好的方法来生成系数。如前所述（3），最后一项中的系数之和是旧项目与新项目的比率。

```
101:40 = 2.525:1
41:40 = 1.025:1 
```

接下来是生成系数。我们将使用 list-in-list 数据结构，它遍历子列表直到什么都没有。

```
[(1, 1, .525), (.475, 1, 1, .05) ...] 
```

第一个子列表映射到新列表中的项目 1。第二个子列表，到第 2 项，依此类推，一直到最后。所有子列表中所有项目的总和应等于原始列表中的项目 n（在本例中为 101）。

我现在要继续发布这个，因为我必须实际工作。我会尝试稍后再回来处理。

/编辑

这是一个生成系数的函数。

```
n = 1000
d = 2525
items = 101
def coefficients(n, d, items):
    start = [n for i in xrange(items)]
    result = []
    p = []
    while True:
        while sum(p) < d:
            try:
                p.append(start.pop())
            except IndexError:
                return result
        extra = sum(p) % d
        p[-1] = n - extra
        result.append(p)
        p = [extra] 
```

遍历系数以返回 40 的最终列表。如果您需要更多帮助，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T19:41:36.590

我对 Python 还很陌生，所以你需要其他人来评价它的 Python 性、优雅性和速度。

```
class StretchableList(list):
    def stretch(self, newlen):
        old = [ (i * (newlen-1), self[i]) for i in range(len(self)) ]
        new = [ i * (len(self)-1) for i in range(newlen) ]
        self[:] = []
        for n in new:
            while len(old) > 1 and n >= old[1][0]:
                old.pop(0)
            if old[0][0] == n:
                self.append(old[0][1])
            else:
                self.append( old[0][1] + \
                             float((n-old[0][0]))/(old[1][0]-old[0][0]) * \
                             (old[1][1]-old[0][1]) )
        return self 
```

基本上，这定义了一个子类，`list`它只是添加了一个名为`stretch`. 使用所需的新长度调用它，它将拉伸或压缩到新长度。我执行的加权平均值与您所做的略有不同……它可能等效也可能不等效，但我假设您可以根据需要修改数学部分。

# sql-server-express - ASP.Net - 无法打开登录请求的数据库“数据库名称”

> ID：12920414
> 
> 赞同：1
> 
> 时间：2012-10-16T17:40:30.193
> 
> 标签：sql-server-express

我正在使用 Windows 7 Home Premium(x64) 笔记本电脑上的 SQL Server 2008 R2 Express edition(x64) 在 Visual Studio 2010 Ultimate 中的网站上工作。调试后我收到一个错误-

```
Cannot open database "Edufun.mdf" requested by the login. The login failed.
Login failed for user 'NT AUTHORITY\NETWORK SERVICE'. 
```

Edufun 是我的数据库名称。我尝试了各种解决方案，例如通过 SQL Server 管理工作室设置登录，使 NT AUTHORITY\NETWORK SERVICE db_owner 成为我的数据库。通过各种方法多次更改我的连接字符串。还授予对数据库的网络服务的读写权限。我的连接字符串在 IIS 和 WEB.Config 中是相同的。

我见过各种解决方案，但没有任何效果我的连接字符串是 =

```
name="connection" "Server=RUSTY\SQLEXPRESS;Database=Edufun.mdf;
Integrated Security=true"  providerName="System.Data.SqlClient" 
```

Rusty 是我的 PC 名称，在 SQL Server 安装期间，我创建了名为 SQLExpress 的默认实例。如果有人需要堆栈跟踪，请帮我解决这个问题，告诉我我会发布它。先感谢您

# sql - 将 .sql 文件导入 SQLite

> ID：12920426
> 
> 赞同：7
> 
> 时间：2012-10-16T17:41:18.947
> 
> 标签：sql, sqlite

我正在尝试将大型 .sql 文件导入 SQLite .db 文件，但出现以下错误：

```
sqlite> .read ./smsCorpus_en_2012.04.30.sql 
Error: near line 23: near "COMMENT": syntax error
Error: near line 50: near "LOCK": syntax error
Error: near line 52: near "some1": syntax error
Error: near line 58: near "s": syntax error
Error: near line 60: near "s": syntax error
Error: near line 66: near "UNLOCK": syntax error 
```

该文件位于[http://wing.comp.nus.edu.sg:8080/SMSCorpus/data/corpus/smsCorpus_en_sql_2012.04.30.zip](http://wing.comp.nus.edu.sg:8080/SMSCorpus/data/corpus/smsCorpus_en_sql_2012.04.30.zip)（直接文件链接）链接在此页面[http://wing.comp.nus .edu.sg:8080/SMSCorpus/history.jsp](http://wing.comp.nus.edu.sg:8080/SMSCorpus/history.jsp)

编辑：只是一个警告，文件很大......不确定这是否是问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T18:14:07.633

该文件是 MySQL 转储。为了让 SQLite 理解它，你必须：

*   删除`COMMENT`表字段上的 s；
*   从（无论如何`AUTO_INCREMENT`，字段在 SQLite 中都是自动递增的）；`id``INTEGER PRIMARY KEY`
*   删除`ENGINE`和`DEFAULT CHARSET`;
*   删除`LOCK`/`UNLOCK`命令；
*   使`INSERT`命令的记录更少；
*   将`\'`引用替换为`''`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:51:56.817

That is a MySQL Dump and not SQLite.

There are slight variations on the syntax.

# api - Shopify API 字段未更新

> ID：12920427
> 
> 赞同：1
> 
> 时间：2012-10-16T17:41:22.827
> 
> 标签：api, shopify

我正在使用私有应用程序来更新我的产品的某些字段。

调用进行得很好（并返回 200 OK），但是，传递的所有字段实际上都没有被更新，并且我正在返回旧的产品字段值。

```
PUT https://MYKEY:MYPASS@MYSHOP.myshopify.com/admin/products/NNNNNNNN.json
{"product":{"id": NNNNNNNN,"title":"Product Name"}} 
```

回报：

```
HTTP/1.1 200 OK
{"product": {title: 'OLD TITLE'}, .... } 
```

PS：我正在使用 CURL，我可以阅读产品。只是无法更新它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:20:40.310

Solved. You have to set `'content-type': 'application/json'` in your request, which is not really documented in the API Docs.

# android - 任何人都有 MediaPlayer 使用 ParcelFileDescriptor 和 createPipe()？

> ID：12920429
> 
> 赞同：20
> 
> 时间：2012-10-16T17:41:32.377
> 
> 标签：android, android-mediaplayer

与[我最近关于`MediaRecorder`and的问题有关，以及在`createPipe()`](https://stackoverflow.com/questions/12894976/anyone-have-mediarecorder-working-with-parcelfiledescriptor-and-createpipe)[另一个 SO question](https://stackoverflow.com/questions/12863731/open-a-file-from-archive-without-temporary-extraction/12863890)中对`createPipe()`技术的讨论，我现在正在尝试使用通过and提供的内容。`MediaPlayer``ContentProvider``ParcelFileDescriptor``createPipe()`

[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Media/AudioPlayStream)有我迄今为止的工作。它基于[播放存储为原始资源的 OGG 剪辑的早期示例](https://github.com/commonsguy/cw-omnibus/tree/master/Media/Audio)。因此，我知道我的剪辑很好。

我已将`MediaPlayer`设置更改为：

```
 private void loadClip() {
    try {
      mp=new MediaPlayer();
      mp.setDataSource(this,
                       PipeProvider.CONTENT_URI.buildUpon()
                                               .appendPath("clip.ogg")
                                               .build());
      mp.setOnCompletionListener(this);
      mp.prepare();
    }
    catch (Exception e) {
      goBlooey(e);
    }
  } 
```

通过登录`PipeProvider`，我看到我`Uri`的构造正确。

`PipeProvider`[与此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Pipe)中的相同，它适用于将 PDF 提供给 Adob​​e Reader，这限制了我的代码可能会搞砸的程度。:-)

具体来说，`openFile()`创建一个管道`ParcelFileDescriptor`：

```
 @Override
  public ParcelFileDescriptor openFile(Uri uri, String mode) throws FileNotFoundException {
    ParcelFileDescriptor[] pipe=null;

    try {
      pipe=ParcelFileDescriptor.createPipe();
      AssetManager assets=getContext().getResources().getAssets();

      new TransferTask(assets.open(uri.getLastPathSegment()),
                       new AutoCloseOutputStream(pipe[1])).start();
    }
    catch (IOException e) {
      Log.e(getClass().getSimpleName(), "Exception opening pipe", e);
      throw new FileNotFoundException("Could not open pipe for: "
          + uri.toString());
    }

    return(pipe[0]);
  } 
```

后台线程执行典型的流到流复制：

```
 static class TransferTask extends Thread {
    InputStream in;
    OutputStream out;

    TransferTask(InputStream in, OutputStream out) {
      this.in=in;
      this.out=out;
    }

    @Override
    public void run() {
      byte[] buf=new byte[1024];
      int len;

      try {
        while ((len=in.read(buf)) > 0) {
          out.write(buf, 0, len);
        }

        in.close();
        out.close();
      }
      catch (IOException e) {
        Log.e(getClass().getSimpleName(),
              "Exception transferring file", e);
      }
    }
  } 
```

然而，`MediaPlayer`窒息：

```
10-16 13:33:13.203: E/MediaPlayer(3060): Unable to to create media player
10-16 13:33:13.203: D/MediaPlayer(3060): Couldn't open file on client side, trying server side
10-16 13:33:13.207: E/TransferTask(3060): Exception transferring file
10-16 13:33:13.207: E/TransferTask(3060): java.io.IOException: write failed: EPIPE (Broken pipe)
10-16 13:33:13.207: E/TransferTask(3060):   at libcore.io.IoBridge.write(IoBridge.java:462)
10-16 13:33:13.207: E/TransferTask(3060):   at java.io.FileOutputStream.write(FileOutputStream.java:187)
10-16 13:33:13.207: E/TransferTask(3060):   at com.commonsware.android.audiolstream.PipeProvider$TransferTask.run(PipeProvider.java:120)
10-16 13:33:13.207: E/TransferTask(3060): Caused by: libcore.io.ErrnoException: write failed: EPIPE (Broken pipe)
10-16 13:33:13.207: E/TransferTask(3060):   at libcore.io.Posix.writeBytes(Native Method)
10-16 13:33:13.207: E/TransferTask(3060):   at libcore.io.Posix.write(Posix.java:178)
10-16 13:33:13.207: E/TransferTask(3060):   at libcore.io.BlockGuardOs.write(BlockGuardOs.java:191)
10-16 13:33:13.207: E/TransferTask(3060):   at libcore.io.IoBridge.write(IoBridge.java:457)
10-16 13:33:13.207: E/TransferTask(3060):   ... 2 more
10-16 13:33:13.211: E/MediaPlayer(3060): Unable to to create media player
10-16 13:33:13.218: E/TransferTask(3060): Exception transferring file
10-16 13:33:13.218: E/TransferTask(3060): java.io.IOException: write failed: EPIPE (Broken pipe)
10-16 13:33:13.218: E/TransferTask(3060):   at libcore.io.IoBridge.write(IoBridge.java:462)
10-16 13:33:13.218: E/TransferTask(3060):   at java.io.FileOutputStream.write(FileOutputStream.java:187)
10-16 13:33:13.218: E/TransferTask(3060):   at com.commonsware.android.audiolstream.PipeProvider$TransferTask.run(PipeProvider.java:120)
10-16 13:33:13.218: E/TransferTask(3060): Caused by: libcore.io.ErrnoException: write failed: EPIPE (Broken pipe)
10-16 13:33:13.218: E/TransferTask(3060):   at libcore.io.Posix.writeBytes(Native Method)
10-16 13:33:13.218: E/TransferTask(3060):   at libcore.io.Posix.write(Posix.java:178)
10-16 13:33:13.218: E/TransferTask(3060):   at libcore.io.BlockGuardOs.write(BlockGuardOs.java:191)
10-16 13:33:13.218: E/TransferTask(3060):   at libcore.io.IoBridge.write(IoBridge.java:457)
10-16 13:33:13.218: E/TransferTask(3060):   ... 2 more 
```

有没有人看过用于`createPipe()`为媒体提供服务的工作代码`MediaPlayer`？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T14:47:01.093

我不确定这是否可行。当我运行此代码时，我看到此跟踪：

```
I/AudioSystem(30916): getting audio flinger
I/AudioSystem(30916): returning new audio session id
D/IAudioFlinger(30916): newAudioSessionId In
D/AudioFlinger(28138): nextUniqueId, current 178
D/IAudioFlinger(30916): newAudioSessionId Out, id = 178
D/MediaPlayer(30916): setDataSource(Context context, content://com.commonsware.android.audiolstream/clip.ogg, Map<String, String> headers) in
D/MediaPlayer(30916): setDataSource(FileDescriptor fd) in
E/MediaPlayerService(28138): offset error 
```

该“偏移错误”来自 AOSP 中 MediaPlayerService.cpp 中的以下行，它在管道的读取端执行 fstat()：

```
status_t MediaPlayerService::Client::setDataSource(int fd, int64_t offset, int64_t length)
{
    struct stat sb;
    int ret = fstat(fd, &sb);

    ....

    if (offset >= sb.st_size) {
        LOGE("offset error");
        ::close(fd);
        return UNKNOWN_ERROR;
    } 
```

并且 sb.st_size 报告为 -1（通过 Java 级别的 ParcelFileDescriptor 上的 getStatSize() ）。错误处理程序关闭描述符，因此不久之后出现了损坏的管道错误。

以我的经验，MediaPlayer 有很多这样的碎片。除了直接在本地文件上以及（非常错误地）用于 HTTP 流媒体之外，我从未见过它适用于任何东西。我最终移植了 FFmpeg 来解决它的众多缺陷。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-17T13:29:32.067

我尝试通过使用 PipeDataWriter 的 ContentProvider 将管道与 MediaPlayer 一起使用（基本上使用管道和线程）。

问题是 MediaPlayer 期望的文件描述符，至少对于视频内容，必须是可搜索的，并且您不能在管道上执行 fseek。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T18:22:39.773

在论文中，`openAssetFile()`你`ContentProvider`可以被覆盖。可以`AssetFileDescriptor`返回声明的大小和偏移量。

```
@Override
public AssetFileDescriptor openAssetFile(Uri uri, String mode)
        throws FileNotFoundException {

    ParcelFileDescriptor fd = openFile(uri, mode);
    return fd != null ? new AssetFileDescriptor(fd, offset, size) : null;

} 
```

此值将传递给本机`setDataSource()`（`MediaPlayer`查看 MediaPlayer.java 以了解更多信息）。

如果 MediaPlayerService.cpp 中的错误检查为 (offset >= sb.st_size)，则 -1（假定的内容大小）或正声明大小不会触发错误。

这应该是一个干净的黑客的良好起点，但我的测试运气不好。愚蠢的 MediaPlayer 似乎在播放前读取了整个“文件”，导致前面的管道破裂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-09T11:49:33.073

```
From Api level 23 onwards, you can use MediaDataSource class.

import java.io.*;
import android.media.MediaDataSource;

public class MyAudioSource extends MediaDataSource {
    private final byte[] buf;
    private final ByteArrayInputStream is;

    public MyAudioSource(byte[] buf){
        super();
        this.buf=buf;
        is=new ByteArrayInputStream(buf);
    }

    public long getSize() {
        return buf.length;
    }

    public int readAt(long position, byte[] buffer, int offset, int size){
        is.reset();
        is.skip(position);
        return is.read(buffer,offset,size);
    }
}

Now use above class for MediaPlayer like:

    // some how get your audio buffer in buf
    MyAudioSource mas = new MyAudioSource(buf);
    mediaPlayer.setDataSource(mas); 
```

# php - php某些字符返回奇怪的html

> ID：12920430
> 
> 赞同：1
> 
> 时间：2012-10-16T17:41:32.423
> 
> 标签：php, special-characters, quotes, output

> **可能重复：**
> [浏览器显示�而不是´](https://stackoverflow.com/questions/4095058/browser-displays-instead-of)

在我的网站上，当我从其他人的文本文档中复制使用不同字符的文本块时，例如较长的破折号和除 '' "" 之外的其他类型的引号，它会返回 html 垃圾。如：

```
9 am – 4 pm 
```

好像：

```
9 am â�� 4 pm 
```

和

```
as ‘secrets’, ‘remembering/keeping,’, narratives, and ‘surprises.’ 
```

好像：

```
as â��secretsâ��, â��remembering/keeping,â��, narratives, and â��surprises.â�� 
```

我用于插入数据的 php 就是：

```
strip_tags($_POST['details']); 
```

我的 php 在页面上输出为 html 是：

```
stripslashes(linkify(nl2br(htmlentities($row['body'])))); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:00:40.313

尝试在 PHP 中使用此标头，然后输出数据：

```
if(!headers_sent()) header('Content-type: text/html; charset=utf-8'); 
```

和：

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8" /> 
```

在 HTML 文档中。另外，检查 MySQL 以查看日期是如何注册的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:12:27.953

您的 html 中有 utf 字符，您可以做很多事情，最好是调整 php 页面顶部的标题 .... 就像上面提到的 coursesweb。

如果您不了解标头，则必须在将任何内容发送回浏览器*之前*发送它们，因此如果不是第一行，它应该确实位于顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T23:22:11.823

如果字符集的东西没有帮助你，我有一个骇人听闻的解决方案。如果它只是您担心的静态文本（即数据库中没有任何内容），这可能会起作用。选择您的文本，将其复制并粘贴到纯文本编辑器中，如果您在 Windows 上，记事本（不是写字板）可能会解决问题。复制您刚刚粘贴的内容，然后将其粘贴到您的 php/html 文件中。试一试，可能会用更标准的字符替换“坏”字符。

# android - 对 Google Drive SDK 进行身份验证

> ID：12920436
> 
> 赞同：2
> 
> 时间：2012-10-16T17:41:57.953
> 
> 标签：android, google-drive-api

使用 Google Play 服务进行身份验证时一切正常：

```
String token = GoogleAuthUtil.getToken(mActivity, mEmail, "oauth2:" + DriveScopes.Drive); 
```

使用令牌，我现在可以创建我的 Drive 实例并访问 Google Drive。但我意识到这仅支持 android 2.2 及更高版本。我需要支持android 2.1。

我尝试使用此代码来获取令牌：

```
AccountManager am = AccountManager.get(this);
Bundle options = new Bundle();
am.getAuthToken (
        account,
        "oauth2:" + DriveScopes.Drive,
        options,
        this,
        new OnTokenAcquired(this),
        null); 
```

使用此代码时，我会得到一个令牌，但在使用它创建我的 Drive 实例时，我将无法访问 Google Drive。例如，当执行此代码时：

```
drive.files().list().setQ(trashed=false and title="'someTitle'").execute(); 
```

我会收到这个错误：

```
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 Unauthorized
{
    "code" : 401,
    "errors" : [ {
        "domain" : "global",
        "location" : "Authorization",
        "locationType" : "header",
        "message" : "Invalid Credentials",
        "reason" : "authError"
    } ],
    "message" : "Invalid Credentials"
} 
```

这是创建我的 Drive 实例的方法：

```
 HttpTransport httpTransport = new NetHttpTransport();
    JacksonFactory jsonFactory = new JacksonFactory();
    Drive.Builder b = new Drive.Builder(httpTransport, jsonFactory, null);
    b.setJsonHttpRequestInitializer(new JsonHttpRequestInitializer() {
        public void initialize(JsonHttpRequest request) throws IOException {
            DriveRequest driveRequest = (DriveRequest) request;
            driveRequest.setPrettyPrint(true);
            driveRequest.setKey(CLIENT_ID);
            driveRequest.setOauthToken(token);
            driveRequest.setEnableGZipContent(true);
        }
    });

    drive = b.build(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:31:14.253

这似乎是正确的，但 AccountManager OAuth2 支持的问题取决于平台版本（Google 服务库等）。它可能适用于某些设备，但可能不适用于具有稍微不同的库的其他设备。确保它在 2.1 上始终如一地工作的唯一方法是使用 WebView 来获取令牌。如果某些设备上的 AccountManager 损坏或出现故障，您将无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:54:58.073

好的，我已经解决了。问题实际上是我使用了错误的客户端 ID。使用 Google Play 服务时，我将客户端 ID 用于在 Google API 控制台中找到的已安装应用程序。使用 AccountManager 时，此 ID 不起作用，我不得不使用 API 密钥进行简单 API 访问。

**编辑**

发现这并不完全正确。对于不同的设备，使用的客户端 ID 似乎不同。

# python - 我的列表理解不起作用

> ID：12920437
> 
> 赞同：-2
> 
> 时间：2012-10-16T17:41:58.880
> 
> 标签：python

为什么我的列表理解不起作用？我尝试在矩阵中缩放随机数。它用作 lambda 函数，但不能用作列表推导。我究竟做错了什么？

```
import numpy as np
import pylab as pl
def RandomSource(N,x0,x1,y0,y1,c0,c1):
    randSources = np.random.random((N,3))
    # print to double-check agruments of the function
    print 'This are scaling values %s %s %s %s %s %s %s' % (N,x0,x1,y0,y1,c0,c1)
    # below should scale a whole matrix
    [x0 + x*(x1-x0) for x in randSources[:,0]]   
    [y0 + y*(y1-y0) for y in randSources[:,1]]
    [c0 + c*(c1-c0) for c in randSources[:,2]]
    return randSources

xS = 10
yS = -100
cS = 5
N = 1000
newPoints = RandomSource(N,xS-5,xS+5,yS-3,yS+2,cS-1,cS+2)

print type(newPoints)
print 'newPoints x = %s' % newPoints[0,0]
print '\nnewPoints = %s\nnewX = %s \nnewY = %s' % (newPoints[0:10], newPoints[0:10,0],                  newPoints[0:10,1])

pl.scatter(newPoints[:,0], newPoints[:,1], s=20, c=newPoints[:,2], marker = 'x' )
pl.show() 
```

输出：

```
newPoints = [[ 0.34890398  0.65918009  0.8198278 ]
             [ 0.47497993  0.98015398  0.23980164]
             [ 0.86359112  0.10184741  0.24804018]] 
```

但预期类似：

```
newPoints = [[  6.4124458  -99.77854982   5.60905745]
             [  9.04459454 -99.63120435   4.08184828]
             [ 14.94181747 -98.50800397   4.95530916]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:44:34.320

列表推导不会改变列表；它创建了一个全新的列表。您必须分配理解的结果来存储结果：

```
def RandomSource(N,x0,x1,y0,y1,c0,c1):
    randSources = np.random.random((N,3))
    # print to double-check agruments of the function
    print 'This are scaling values %s %s %s %s %s %s %s' % (N,x0,x1,y0,y1,c0,c1)
    # below should scale a whole matrix
    #[x0 + x*(x1-x0) for x in randSources[:,0]]
    randSources[:,0] = map(lambda x: x0 + x*(x1-x0), randSources[:,0])

    randSources[:,1] = [y0 + y*(y1-y0) for y in randSources[:,1]]
    randSources[:,2] = [c0 + c*(c1-c0) for c in randSources[:,2]]
    return randSources 
```

注意：我不确定该分配是否有效（`randSources[:,1] = ...`），但这是一般的想法。一个更简单的例子：

```
>>> l = [1, 2, 3, 4, 5]
>>> [i*2 for i in l]
[2, 4, 6, 8, 10]
>>> l
[1, 2, 3, 4, 5]
>>> l = [i*2 for i in l]
>>> l
[2, 4, 6, 8, 10] 
```

# sql - 根据日期或计数自动删除重复的 SQL 记录

> ID：12920441
> 
> 赞同：2
> 
> 时间：2012-10-16T17:42:04.320
> 
> 标签：sql, visual-studio-lightswitch

将 Excel 数据从 LightSwitch 应用程序导入 SQL Server 中的保存表后，我最终得到了重复记录。我需要一种方法来删除可以从 LightSwitch 执行的重复项，或者在插入之后/期间自动在 SQL 中运行的东西。我想过一个触发器，但我不确定它是否是最好的解决方案。重复项将是这样的

```
DocName|DocUser|DocType|DocDate|
test    user1   word    10/12/2012
test    user1   word    10/12/2012
test2   user2   word    10/11/2012
test2   user2   word    10/12/2012 
```

在第一组重复的情况下，可以删除任何一条记录，所以我有一条记录。但是，在第二种情况下，需要删除日期为 10/11/2012 的记录。如果可以从 LightSwitch 执行存储过程，我不会反对它。我知道可以通过一系列查询来完成，但我不确定如何从 LightSwitch 执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:46:25.073

我没有使用 Lightswitch 的经验，如果其中任何一个不相关，我深表歉意，但是从 SQL 方面来说，您可以用来删除重复项的存储过程是：

```
CREATE PROCEDURE dbo.DeleteDuplicatesFromT
AS
BEGIN
    WITH CTE AS 
    (   SELECT  DocName, 
                DocUser, 
                DocType, 
                DocDate, 
                [RowNumber] = ROW_NUMBER() OVER(PARTITION BY DocName, DocUser, DocType ORDER BY DocDate DESC)
        FROM    T
    )
    DELETE  CTE
    WHERE   RowNumber > 1;
END 
```

[SQLFiddle 上的示例](http://www.sqlfiddle.com/#!3/f0d62/2)

**然而**

我建议在插入阶段之前/期间进行管理，您可以在应用程序代码中执行此操作，并确保仅将唯一记录传递给表，或者再次使用过程来执行插入。要执行后者，您首先需要创建一个`TYPE`来处理您的新记录：

```
CREATE TYPE dbo.TableTypeParameter AS TABLE
(   DocName VARCHAR(5), 
    DocUser VARCHAR(5), 
    DocType VARCHAR(4), 
    DocDate DATETIME
); 
```

您可以将其填写在您的客户端代码中（使用 System.Data.DataTable）并将其作为参数传递给您的存储过程：

```
CREATE PROCEDURE dbo.BulkInsert @NewRecords dbo.TableTypeParameter READONLY
AS
BEGIN
    WITH NewRecords AS
    (   SELECT  DocName, DocType, DocUser, DocDate = MAX(DocDate)
        FROM    @NewRecords
        GROUP BY DocName, DocType, DocUser
    )
    MERGE INTO T 
    USING NewRecords nr 
        ON T.DocName = nr.DocName
        AND T.DocType = nr.DocType
        AND T.DocUser = nr.DocUser
    WHEN MATCHED AND nr.DocDate > T.DocDate THEN UPDATE
        SET DocDate = nr.DocDate
    WHEN NOT MATCHED THEN INSERT (DocName, DocUser, DocType, DocDate)
        VALUES (nr.DocName, nr.DocUser, nr.DocType, nr.DocDate);

END; 
```

**编辑**

如果需要，插入过程可以很容易地转换为触发器：

```
CREATE TRIGGER dbo.T_InsteadOfInsert 
    ON T
    INSTEAD OF INSERT
AS
BEGIN
    WITH NewRecords AS
    (   SELECT  DocName, DocType, DocUser, DocDate = MAX(DocDate)
        FROM    inserted
        GROUP BY DocName, DocType, DocUser
    )
    MERGE INTO T 
    USING NewRecords nr 
        ON T.DocName = nr.DocName
        AND T.DocType = nr.DocType
        AND T.DocUser = nr.DocUser
    WHEN MATCHED AND nr.DocDate > T.DocDate THEN UPDATE
        SET DocDate = nr.DocDate
    WHEN NOT MATCHED THEN INSERT (DocName, DocUser, DocType, DocDate)
        VALUES (nr.DocName, nr.DocUser, nr.DocType, nr.DocDate);

END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T11:50:44.283

MSDN 论坛上的一位用户在使用 Excel 导入器时遇到了类似的问题。他编写了一些函数来检查和验证他的表，以防止输入和删除现有的重复项。看一看：[自动验证错误处理](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/24381663-fd59-47cc-b13f-c4ab8d358e84)。

# delphi - Delphi：是否有可以删除特定条件符号的条件指令的工具？

> ID：12920442
> 
> 赞同：9
> 
> 时间：2012-10-16T17:42:06.493
> 
> 标签：delphi

我有许多包含许多条件指令块的单元，例如：

```
{$IFDEF DELPHI6ANDLOWER}
  *Do something 1*
{$ELSE}
  *Do something 2*
{$ENDIF} 
```

现在，我决定放弃对 Delphi 6 (VER140) 和更低版本的支持。

有没有可以施展魔法的工具？希望上面的代码变成：

```
 *Do something 2* 
```

我已经测试过 ModelMaker、CnPack、GExperts，但没有一个能做到这一点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T18:48:25.890

Delphi Inspiration 的免费软件程序 DIPP 可以删除条件。

[http://www.yunqa.de/delphi/doku.php/products/dipp/index](http://www.yunqa.de/delphi/doku.php/products/dipp/index)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T18:36:47.930

首先，我确认**@ctomita提到的**[DIPP](http://www.yunqa.de/delphi/doku.php/products/dipp/index)工具非常适合我的情况。

 **其次，我认为与人们分享我如何使用该工具来解决我的案例可能很有用。

### 测试1.通过

```
//--------------------------------------
{$IFDEF ONE}
  ShowMessage('If ONE was defined');
  WriteLn('If ONE was defined');
  {$IFDEF ONE_ONE}
    ShowMessage('If ONE_ONE was defined');
    WriteLn('If ONE_ONE was defined');
  {$ENDIF}
{$ELSE}
  ShowMessage('If ONE was not defined');
  WriteLn('If ONE was not defined');
{$ENDIF}
//--------------------------------------
{$IFNDEF ONE}
  ShowMessage('If ONE was not defined');
  WriteLn('If ONE was not defined');
{$ELSE}
  ShowMessage('If ONE was defined');
  WriteLn('If ONE was defined');
{$ENDIF}
//-------------------------------------- 
```

**`ONE`**要从Test1.pas中删除所有条件块，并*假设**好像*有一个名为**`ZERO`**当前定义的条件符号，请使用命令提示符中的以下命令：

```
dipp -o -c -dZERO -h-ONE "Test1.pas" "Test1_output.pas" 
```

### Test1_output.pas

```
//--------------------------------------

  ShowMessage('If ONE was not defined');
  WriteLn('If ONE was not defined');

//--------------------------------------

  ShowMessage('If ONE was not defined');
  WriteLn('If ONE was not defined');

//-------------------------------------- 
```

请注意，当**`-c`**指定选项时，DIPP 会跳过由未定义条件包围的代码，根据定义的条件插入包含文件。换句话说，DIPP 像编译器一样处理源代码。**

# java - 在 main 中创建数组并用来自单独线程的数据填充它

> ID：12920444
> 
> 赞同：0
> 
> 时间：2012-10-16T17:42:27.960
> 
> 标签：java, arrays, multithreading

好的，所以我遇到了麻烦，也许我只是想得太久或者很愚蠢，但这是我所拥有的以及我正在尝试做的事情：

**更新代码全部修复，不再出现运行问题。**

```
public class myClass program {
   int [] w = null;
   int [] x = null;
   Thread T = null;
   public static void main(String [] args){
    x = new int[5];
    w = new int[5];

 // here i am trying to invoke a new thread passing the index
 // of my array, then incrementing the index each time i create a new thread
 // the purpose is to fill each index each time the new thread runs.

    for(int i = 0; i < w.length; i ++){
      // T = new Thread(new myThreadClass(w[i])); // only passes 0 take this out and 
      T = new Thread( new myThreadClass(i));      // pass i so the position changes
      T.start();
      try{
        Thread.sleep(100);
        }catch(Exception e){}

   }
} 
```

在我的单独类 myThreadClass.java 中，我有以下内容：

```
public class myThreadClass extends Thread{
 int [] w = null;
 int position = 0;
 int value = 1;

  public myThreadClass(int p){
    this.position = p
    w = myClass.w;
  }

  @Override
  public void run(){
   // synchronize the thread so there is no memory cache problems
   //
   synchronized(w){
      w[position] = value;
   }
  }

} 
```

当我从 myClass 打印出 w 的输出时：

我明白了`w = 1 0 0 0 0`

但我想要`w = 1 1 1 1 1`

**已编辑-我现在得到正确的输出-检查代码是否有更改**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:44:21.857

在这一部分`myThreadClass(w[i])`中，您没有传递索引，而是传递了一个值，该值为零，因为`w`它是一个由 5 个元素组成的数组，所有元素都使用默认值 0 进行了初始化。

你应该这样做`myThreadClass(i)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:50:04.370

This line from myClass:

```
w = new int[5]; 
```

initializes all the elements of w to 0.

so, when you call

```
T = new Thread( new myThreadClass(w[i])); 
```

your are effectively doing this:

```
T = new Thread( new myThreadClass(0)); 
```

so the only element of w[] that will ever change is the first one.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T17:49:31.423

`w[]`最初都是`ZERO`。您正在将这些值之一传递给线程构造函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:22:29.050

这是针对您的问题的过度设计的解决方案。不用封装你也可以做得很好，但我决定使用它，因为它使示例更具可读性。

```
public class Test {
    public static void main(String[] args) {
        // Create the resultset containing the result
        ResultSet resultSet = new ResultSet(5);
        Thread[] threads = new Thread[resultSet.getSize()];

        // Create threads
        for (int i = 0; i < resultSet.getSize(); i++) {
            threads[i] = new Thread(new TestTask(
                    resultSet.createResultSetter(i)));
        }

        // Start threads
        for (int i = 0; i < resultSet.getSize(); i++) {
            threads[i].start();
        }

        // Wait until threads complete
        for (int i = 0; i < resultSet.getSize(); i++) {
            try {
                threads[i].join();
            } catch (InterruptedException exception) {
                // ??!
            }
        }

        // Print the result
        for (int i = 0; i < resultSet.getSize(); i++) {
            System.out.println(resultSet.getResult(i));
        }
    }

    /**
     * Interface used to set the result
     */
    public static interface ResultSetter {
        public void setResult(int result);
    }

    /**
     * Container class for results
     */
    public static class ResultSet {
        private final int[] results;

        public ResultSet(int size) {
            results = new int[size];
        }

        public int getSize() {
            return results.length;
        }

        public ResultSetter createResultSetter(final int position) {
            return new ResultSetter() {
                public void setResult(int result) {
                    ResultSet.this.setResult(position, result);
                }
            };
        }

        public synchronized int getResult(int position) {
            return results[position];
        }

        public synchronized void setResult(int position, int result) {
            results[position] = result;
        }
    }

    /**
     * A task executed by a thread
     */
    public static class TestTask implements Runnable {
        private ResultSetter resultSetter;

        public TestTask(ResultSetter resultSetter) {
            this.resultSetter = resultSetter;
        }

        @Override
        public void run() {
            resultSetter.setResult(1);
        }
    }
} 
```

# c# - MVP，应该在 Main() 中创建 Presenter 还是 View

> ID：12920445
> 
> 赞同：2
> 
> 时间：2012-10-16T17:42:49.283
> 
> 标签：c#, inversion-of-control, mef, mvp

我一直在与 MVP 斗争，特别是如何让程序启动的时间比我承认的要长。目前我在 program.cs 中创建所有类的实例。然后我只需调用 application.Run(userInterface); 以下是我现有设置的一部分。

```
static void Main()
{
    //...

    Status _status = new Status();
    Logger _logger = new Logger(entity, readerWriter, true);
    VerifyRow _verifyRow = new VerifyRow(entity, _logger);
    VerificationOfDataTypes _verification = new VerificationOfDataTypes(entity, _logger, _verifyRow, _status, readerWriter);

    var verify = new CsvFileVerification(entityVerification, _verification, _logger);

    CancellationTokenSource cts = new CancellationTokenSource();
    var source = new CancellationTokenSourceWrapper();

    var presenter = new MainPresenter(userInterface, browser, helper, entity, verify, source);
    Application.Run(userInterface);
} 
```

我有 MVP 设置 atm 的方式，MainView 实现 IMainView。演示者然后将 IMainView 与其他类的负载一起注入到其构造函数中。

```
 public MainPresenter(IMainForm view, IFileDialog dialog, IMainPresenterHelper helper, IUserInputEntity entity, ICsvFileVerification verify, ICancellationTokenSource source)
    {
        _view = view;
        _dialog = dialog;
        _helper = helper;
        _entity = entity;
        _verify = verify;
        _source = source;

        view.ComposeCollectionOfControls += ComposeCollectionOfControls;
        view.SelectCsvFilePath += SelectCsvFilePath;
        view.SelectErrorLogFilePath += SelectErrorLogFilePath;
        view.DataVerification += DataVerification;
    } 
```

有人告诉我 MEF 或 IOC 容器会帮助整理它，但我仍然不确定我应该如何构建它。我有一种直觉，应该首先创建演示者，但是我会在我的 Main() 方法中声明一个随机变量，然后不会使用它。还有如何创建视图？

我之前有一个使用 MEF 的控制台应用程序，但我不知道如何使用 mvp 跳转到 winforms/winforms。

对此的任何指示将不胜感激。

**编辑**，我尝试了以下但无法使以下工作。它实际上试图创建 2 个视图。我如何引用由创建的原始视图

```
"Application.Run(new Form1());" 
```

在 Program.cs 中

以下是我将 Form1 类更改为的内容。

```
namespace Mini_MVP_MEF
{
    [Export(typeof(IView))]
    public partial class Form1 : Form, IView
    {
        private IPresenter _presenter;

        public Form1()
        {
            InitializeComponent();
            _presenter = Program._myContainer.GetExport<IPresenter>().Value;
        }

        //....

    }
} 
```

也只是尝试在 InitializeComponents(); 之后调用以下方法；在表格 1

```
 private static void PopulateContainer()
    {
        var presenter = new AssemblyCatalog(typeof(Presenter.MVPPresenter).Assembly);
        var model = new AssemblyCatalog(typeof(Model.MVPModel).Assembly);
        var view = new AssemblyCatalog(System.Reflection.Assembly.GetCallingAssembly());
        var aggregateCatalog = new AggregateCatalog(model, presenter, view);
        _myContainer = new CompositionContainer(aggregateCatalog);
    } 
```

但它也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:50:31.063

A presenter without a view does not make sense. It should be created inside the view where the view will pass itself to the presenter.

eg:

```
public class MainView : IMainView
{
    IMainPresenter _presenter;
    public MainView()
    {
       _presenter = new MainPresenter(this);
    }
} 
```

BTW, also make sure your view has injectable presenter, eg. another constructor where you can inject the presenter for unit tests

# reporting-services - Reporting Services 2008 报表在 Report Viewer 9.0 中始终显示为 1 页，但打印为 2 页

> ID：12920447
> 
> 赞同：0
> 
> 时间：2012-10-16T17:42:50.333
> 
> 标签：reporting-services, ssrs-2008, reportviewer2008

我的 ASP.NET 站点使用 Report Viewer 9.0 从 Reporting Services 2008 R2 服务器运行报告。对于大多数报表，报表查看器准确地显示报表将打印的页数（即在页眉的分页字段中）。但是，有一份报告始终显示为仅使用 1 页，而它始终打印为 2 页。

（这可能是一个微不足道的问题，因为对实际打印没有影响，但它是“客户感到困惑”的事情之一，因此必须进行调查:)）。

一些细节：

*   所有显示准确页数的报告都是相当简单的“记录列表”样式报告 - 基于一个/多个 tablix，标题为 texbox
*   有问题的一份报告是 2 页的“客户发票”，其结构如下：
*   数据集是包含订单详细信息（客户名称、订单日期等）的单个记录
*   报告由 2 个垂直排列的矩形组成，宽度和高度都适合 1 个 A4 页面（19 厘米 x 27.7 厘米，允许在报告上留出 1 厘米的边距）
*   没有在任何控件上设置“自动分页符”属性（例如，矩形#1 之后的分页符）。这不是必需的，因为矩形的大小使报告可​​以完美地打印在 2 页上。
*   （这可能无关紧要）每个矩形的可见性都可以通过布尔报告参数切换 - “打印页面 #1”和“打印页面 #2”。这也适用于控制打印哪些页面。

我不想在任一矩形上设置“自动分页符”，因为如果报表参数导致一个或其他矩形被隐藏，这将导致打印空白页。

我还能做些什么来让 Report Viewer 意识到有 2 个页面？

编辑：仅报告查看器不是问题 - SSRS 报告管理器将报告显示为 1 页，预览报告时 Visual Studio 报告设计器也是如此。但是，在进行打印预览时，两者都显示 2 页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:59:10.030

在某些情况下，这可能是由于[PageCountMode](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.reportviewer.pagecountmode%28v=vs.100%29.aspx)默认为[Estimate](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.pagecountmode%28v=vs.100%29.aspx)造成的。

据我所知，在连接到 2008 报表服务器的 ReportViewer 9.0 中，您对此无能为力。我知道的唯一解决方案是升级到 10.0。但是，在[这个 social.msdn 线程](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/5a7e302d-e518-497e-a2d0-aae095afdb05)中，他们建议将`TotalPages`全局添加到标题中（大概是为了强制进行实际计数？）。我自己没有尝试过，但它可能会帮助您解决问题。

# jstree - jstree卡在加载？

> ID：12920448
> 
> 赞同：0
> 
> 时间：2012-10-16T17:42:51.970
> 
> 标签：jstree

使用以下代码，jstree 在加载时卡住了。

```
 <meta charset="UTF-8">
    <title>No title</title>
<link rel="stylesheet" type="text/css" href="theme2/jquery-ui-1.8.17.custom/css/ui-lightness/jquery-ui-1.8.17.custom.css" media="screen" />
<link rel="stylesheet" type="text/css" href="layout-default-latest.css" />
    <script type="text/javascript" src="jquery-1.6.1.min.js"></script>
    <script type="text/javascript" src="jquery.jstree.js"></script>
    <script type="text/javascript" src="jquery-ui-1.8.17.custom/js/jquery-ui-1.8.17.custom.min.js"></script>
<script type="text/javascript" src="jquery.layout-latest.js"></script>  

$("#treeFile").jstree({ "themes" :  { 
                        "theme" : "default", 
                        "dots" : false, 
                        "icons" : false 
                    },
            "plugins" : ["themes", "treeFile"]
}); 
```

有趣的是，如果将 false 的值更改为 fales，它可以工作，但无法为点和图标名称提供真正的 false 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T16:30:35.110

我认为您缺少数据源。

```
 "json_data" : {
             {
                 "data" : "Node 1",
                 "children" :[],
                 "state" : "open"
             },
             {
                 "data" : "Node 2",
                 "children" :[],
                 "state" : "open"
             },
             {
                 "data" : "Node 3",
                 "children" :[],
                 "state" : "open"
             }
        },
        "themes" : {"theme" : "classic"},
        "plugins" : ["themes", "json_data"]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:48:03.667

尝试这个：

```
$("#treeFile").jstree({ "themes" :  { 
                    "theme" : "default", 
                    "dots" : "false", 
                    "icons" : "false" 
                },
        "plugins" : ["themes", "treeFile"]
}); 
```

# android - 每次我要求位置更新时，我应该使用 android LocationManager.getBestProvider 吗？

> ID：12920451
> 
> 赞同：10
> 
> 时间：2012-10-16T17:42:59.567
> 
> 标签：android, android-mapview, locationmanager

我正在使用 Google API 和 MapActivity、MapView 等。
当我需要获取当前位置时，我会第一次使用此代码：

```
myLocationManager =(LocationManager)getSystemService(Context.LOCATION_SERVICE);
// Sets the criteria for a fine and low power provider
Criteria crit = new Criteria();
crit.setAccuracy(Criteria.ACCURACY_FINE);
crit.setPowerRequirement(Criteria.POWER_LOW);    
// Gets the best matched provider, and only if it's on
String provider = myLocationManager.getBestProvider(crit, true);
// If there are no location providers available
if (provider == null){
    OnClickListener listener = new OnClickListener() {

        public void onClick(DialogInterface dialog, int which) {
            // Closes the activity
            finish();
        }
    };
    Utils.getInstance().showAlertDialog(this, R.string.warning_dialog_title,
                               R.string.no_location_providers_error_message,
                            android.R.drawable.ic_dialog_alert, false, listener);
}
// Location services is enabled
else{
    myLocationListener = new MyLocationListener();
    myLocationManager.requestLocationUpdates(
            provider,
            0,
            0,
            myLocationListener);        
    // TODO - put a marker in my location       
    GeoPoint currentGeoPoint = MapUtils.getInstance().
            getCurrentLocation(myLocationManager, provider);        
    // Center to the current location
    centerLocation(currentGeoPoint, MAX_ZOOM);
} 
```

我还有一个“返回当前位置按钮” - 当用户四处移动地图并想要快速返回其当前位置时。

我的问题是，*每次*我想获取位置信息时都应该使用该`getBestProvider()`方法吗？

 *我可以保存最后选择的提供者，但条件可能每秒都在变化：

1.  用户关闭 GPS
2.  没有 GPS 信号
3.  NETWORK_PROVIDER 在当前情况下更好
4.  ETC..

什么是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:23:50.440

就像评论中所说的那样，这就是答案：http: [//developer.android.com/guide/topics/location/strategies.html#BestEstimate](http://developer.android.com/guide/topics/location/strategies.html#BestEstimate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:46:34.603

你总是可以使用这个，但一定要检查**Location.getTime()** -> 这会告诉你它被修复的时间，所以你可以很容易地区分新的和陈旧的位置修复。*

# sql - 在指定时间点选择不同的测量组

> ID：12920454
> 
> 赞同：2
> 
> 时间：2012-10-16T17:43:04.777
> 
> 标签：sql, sql-server, performance, analytics

我有一个具有以下结构的 SQL 表：

```
CREATE TABLE dataLog (
tstamp datetime NOT NULL, 
identifier smallint NOT NULL, 
payload binary(46) NOT NULL, 
PRIMARY KEY (tstamp, identifier)); 
```

在此表中，日志基础设施记录了许多设备的数据。设备标识符的范围从例如。1 到 125。这意味着“标识符”列的值介于 1-125 之间。有效负载列保存来自每个设备的二进制数据（日志信息、温度等）。 tstamp 列保存当前时间信息。

如何构建查询以获取给定时间点内每个设备的“快照”信息。例如，我想知道每个标识符（125）的有效负载列值是多少。2012-06-12 12:00:00。表中的数据是在设备发送时写入的，这就是为什么数据不是上面给出的确切时间戳，而是例如。2个设备在2012-06-12 11:59:59发送数据，10个设备在2012-06-12 11:15:30等。数据应该及时向后检测。

预期结果：125 行，每个标识符、每个测量的时间戳和每个标识符的有效负载值。

需要数据来绘制例如。在给定时间戳下从 1 到 125 的所有设备的温度图，然后遍历例如中的数据。5分钟步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:50:32.197

通过“快照”，我假设您是指该时间之前每个标识符的最新记录。这是一种使用排名函数的方法：

```
select dl.*
from (select dl.*,
             row_number() over (partition by identifier order by tstamp desc) as seqnum
      from DataLog dl
      where tstamp <= @YOURTIMESTAMPHERE
     ) dl
where seqnum = 1 
```

# jquery - 如何在没有多个实例的情况下使用嵌套的手风琴菜单？

> ID：12920458
> 
> 赞同：2
> 
> 时间：2012-10-16T17:43:15.620
> 
> 标签：jquery, html, accordion

这是我的基础：

[http://jsfiddle.net/UnV4Z/](http://jsfiddle.net/UnV4Z/)

我希望它是三个级别，而不仅仅是两个级别。我已经在这里工作了：

[http://jsfiddle.net/RnwYQ/13/](http://jsfiddle.net/RnwYQ/13/)

但这意味着我必须每个类别有一个实例。有更清洁的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:21:17.557

尝试给手风琴一个类并稍微修改代码以使其根据单击的元素隐藏同级。

[http://jsfiddle.net/RnwYQ/19/](http://jsfiddle.net/RnwYQ/19/)

```
$(".accordion > li > div").click(function() {

    if (!$(this).next().is(':visible')) {
        $(this).parent().siblings().children("ul").slideUp(300);
    }
    $(this).next().slideToggle(300);
}).parent().filter(":first-child").children("div").click();​ 
```

# php - ajax 不能在不同的系统上工作

> ID：12920459
> 
> 赞同：0
> 
> 时间：2012-10-16T17:43:21.047
> 
> 标签：php, javascript, ajax

我的 ajax 代码在我的系统上运行，但在不同的系统上运行。我在鼠标悬停上使用 ajax。

```
<div class="production"> <a href="production.html" onclick="autoProd();" onmouseover="autoProd();" onmouseout="homepage();">production</a> </div> 
```

脚本是..

```
<script>
function getXML(){
    if(window.XMLHttpRequest){
        var ajax=new XMLHttpRequest();
        return ajax;
    }
    else{
        var ajax=new ActiveXObject("Microsoft.XMLHTTP");
        return ajax;
    }

}
function autoProd(){

        var ajax=getXML();

    /*var name=document.getElementById('sugg').value;*/
    var url="../ajax/production.html";

        ajax.onreadystatechange=function(){
            if(ajax.readyState==4 && ajax.status==200)
                document.getElementById('layer1').innerHTML=ajax.responseText;

        }
        ajax.open("get",url,true);
        ajax.send();
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:00:19.160

您可以尝试以下操作：

```
function getXML(){
    try {
        var ajax = new XMLHttpRequest();
        return ajax;

    } catch (error1) {
        try { 
            var ajax = new ActiveXObject("Msxml2.XMLHTTP");
            return ajax;

        } catch (error2) {
            try {
                var ajax = new ActiveXObject("Microsoft.XMLHTTP");
                return ajax;

            } catch (error3) {
                return null;

            }

        }

    }

} 
```

# jquery - 在 ActionResult 返回之前 Jquery Ajax 抛出错误

> ID：12920461
> 
> 赞同：0
> 
> 时间：2012-10-16T17:43:23.293
> 
> 标签：jquery, ajax, asp.net-mvc, telerik, asp.net-mvc-4

我正在解决一个奇怪的问题，这可能是由于我对 ajax 缺乏经验。出于某种原因，我的 Ajax 函数甚至在我的 ActionResult 返回 PartialView 之前就触发了我的错误警报对话框。

任何人都可以发现为什么我的 ajax 函数会抛出错误，甚至是我做错了什么？

**我的jQuery**

```
function GetSalesLinesByArea(e) {
var areaId = treeView().getItemValue(e.item);
$('#HiddenAreaId').val(areaId);
var url = '/SalesLine/IndexPartial/';
$.ajax({
    type: "GET",
    dataType: "html",
    url: url,
    data: { areaNodeId: areaId },
    success: function (data) {
        $('#HuntingGrid').html(data);
        alert("success!");
    },
    error: function () {
        alert("error!");
    }
  });
} 
```

**我的观点 Index.cshtml**

```
@using Telerik.Web.Mvc.UI
@using Veidivefur.Model.Entity
@model Veidivefur.ViewModels.SalesLineViewModel
@{
    ViewBag.Title = "Hlunnindi";
}

<div id="HuntingGrid">
    @{ Html.RenderPartial("IndexPartial"); }
</div> 
```

**我的局部视图 IndexPartial.cshtml**

```
@using Telerik.Web.Mvc.UI
@model Veidivefur.ViewModels.SalesLineViewModel

<div>
    @(Html.Telerik().Grid(Model.SalesLines)
        .Name("Grid")
        //More Telerik stuff
</div> 
```

**我在控制器中的索引 ActionResult **

```
 public ActionResult Index()
    {
        List<CombinedSalesLine> combinedSalesLines =
            GenerateSalesLines(_salesLineModel.FindAllSalesLinesLargerThanToday(0));

        return View(new SalesLineViewModel(combinedSalesLines));
    } 
```

**我在控制器中的 IndexPartial ActionResult **

```
 public ActionResult IndexPartial(string areaNodeId)
    {
        int areaNodeInt = Convert.ToInt32(areaNodeId);

        List<SalesLine> saleslines = areaNodeInt == 0 ? _salesLineModel.FindAllSalesLinesLargerThanToday(0)
            : _salesLineModel.FindAllSalesLinesLargerThanToday(areaNodeInt);

        List<CombinedSalesLine> combinedSalesLines = GenerateSalesLines(saleslines);

        return PartialView("IndexPartial", new SalesLineViewModel(combinedSalesLines));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:46:33.483

我解决了这个问题！我发布的问题代码似乎是正确的。问题在于我调用 ajax 函数的方式，我使用的 url 也调用了另一个函数，因此 ajax 函数引发了错误。我觉得很傻，但很高兴它得到了解决。

# vb.net - 什么会导致表单在执行代码时冻结

> ID：12920466
> 
> 赞同：1
> 
> 时间：2012-10-16T17:43:58.660
> 
> 标签：vb.net, visual-studio-2010, process, waitforexit

我试图弄清楚为什么我的表单在执行某些代码时会冻结。我也无法最小化或移动表单。是因为`WaitForExit`在过程中被使用了吗？

下面的代码与按钮单击相关联。

```
If Checkbox1.checked = True Then
   Call Test()
End If

If Checkbox2.checked = True Then
   Goto NextStep
Else
   Goto StopProcessing
End If 
```

这是我正在调用的测试潜艇。使用可选参数调用 exe。

```
 Using psinfo As New Process
            psinfo.StartInfo.FileName = "C:\Temp\Test.exe "
            psinfo.StartInfo.Arguments = Arg1
            psinfo.StartInfo.WindowStyle = ProcessWindowStyle.Hidden
            psinfo.Start()
            psinfo.WaitForExit()
        End Using 
```

`WaitForExit`添加了（所以我认为）在处理完成之前不处理下一个语句（下一个语句是 Checkbox2 的 If 语句）。不是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:48:24.163

> 添加了 WaitForExit （所以我认为）在处理完成之前不处理下一条语句（下一条语句是 Checkbox2 的 If 语句）。

当您调用`WaitForExit`时，它将阻塞，直到进程 ( `Test.exe`) 完成。

由于您在用户界面线程上运行它，它会导致您的表单“冻结”，直到该过程完全完成。

如果您不希望发生这种情况，则需要在后台线程上等待。您可能会将此代码移动到 a`BackgroundWorker`并使用它与您的主窗口同步 - 但您将需要处理“等待”以使进程以不同的方式完成（即：预先禁用您的 UI，运行该进程，完成后重新启用）。

请注意，对于 Process 类，另一种选择是添加`EnableRaisingEvents`进程，然后将处理程序添加到[Process.Exited](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)。这将让您不会`WaitForExit()`，而是在流程完成时通过事件获得通知。

# macos - 告诉 PDF Viewer/Adobe Reader 转到 OS X 上的页面

> ID：12920469
> 
> 赞同：1
> 
> 时间：2012-10-16T17:44:06.743
> 
> 标签：macos, applescript

我正在尝试为我的学生进行综合演示。

系统：OS X Lion 10.7

为此，我需要显示一个运行 3D 演示文稿的前景窗口，该演示文稿由另一个屏幕上的命令行远程控制。

除此之外，我想在它后面展示一小组 PDF 幻灯片。

我需要某种“远程控制”**后台**PDF 查看器（Adobe Reader 或 PDFView）的方式来接受简单的命令，例如

*   转到页面`x`（理想情况下）
*   转到第一页 ( `home button`)
*   转到下一页 ( `arrow down`, `arrow right`,`page down`或`scroll down`都可以)

我更喜欢在 Adob​​e Reader 全屏模式下运行 PDF（允许我将其设置为背景并在顶部覆盖另一个窗口，但 PDFView 也可以。

我尝试了各种 Applescripts（使用 运行`osascript`），但没有成功：

```
tell application "System Events"
    tell process "Adobe Reader"
        tell window "starkdemo.pdf" to key code 125
    end tell
end tell 
```

将密钥发送到我的终端

```
tell application "/Applications/Adobe Reader.app"
    tell active pane of active window
        large scroll down 1
    end tell
end tell 
```

给我一个错误`63:69: script error: Expected end of line but found class name. (-2741)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:16:14.313

我发现免费的 Viewer [Skim](http://sourceforge.net/projects/skim-app/)具有广泛的 AppleScript 脚本[http://sourceforge.net/apps/mediawiki/skim-app/index.php?title=AppleScript](http://sourceforge.net/apps/mediawiki/skim-app/index.php?title=AppleScript)

它也有我喜欢的全屏视图。所以我以后会用这个。applescript 命令也只有一行：

```
tell document "starkdemo.pdf" of application "Skim" to go to page 7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T19:10:08.923

尝试：

```
activate application "Adobe Reader"
tell application "System Events"
    tell process "Adobe Reader"
        click menu item "Full Screen Mode" of menu 1 of menu bar item "View" of menu bar 1
        delay 2
        key code 125
        delay 2
        keystroke space
        delay 2
    end tell
end tell 
```

或者用 Acrobat Pro 试试这个

```
tell application "Adobe Acrobat Pro"
    tell PDF Window 1
        read page down
    end tell
end tell 
```

或者

```
tell application "Adobe Acrobat Pro"
    tell PDF Window 1
        goto page 3
    end tell
end tell 
```

# cocos2d-iphone - 在 init 中声明 NSMutable 数组和动画后出现 CCAnimate 错误

> ID：12920478
> 
> 赞同：1
> 
> 时间：2012-10-16T17:44:31.917
> 
> 标签：cocos2d-iphone

我遇到了一个我不知道如何解决的错误，我在我的 init 中声明了一个 NSMutablearray，用两个精灵填充它来制作动画，并声明 CCAnimation；

```
 animParpadeoNina =  [[NSMutableArray alloc]init];
    [animParpadeoNina addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"ninaCamina002b.png"]];
    [animParpadeoNina addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"ninaCamina002.png"]];
    for (id obj in animParpadeoNina) {
        NSLog(@"%@",obj);
    }

    paralanina = [CCAnimation animationWithSpriteFrames:animParpadeoNina delay:.2]; 
```

现在，如果我在全部声明后调用该动作，动画就可以工作，但如果我尝试在任何其他函数中运行 CCAnimation，我会得到“ EXC_BAD_ACCESS (code = 1, address = 0xb0ab1de8)

如果我填充数组并在函数内声明 CCAnimation，那么它就可以工作。问题是我想多次运行这个动作，感觉一次又一次填充和声明相同代码的正确方法......

我究竟做错了什么？有什么建议可以解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:37:09.143

```
animParpadeoNina =  [NSMutableArray alloc]; 
```

这应该是：

```
animParpadeoNina =  [[NSMutableArray alloc] init]; 
```

# javascript - 使用 JavaScript / jQuery 搜索关键字

> ID：12920481
> 
> 赞同：6
> 
> 时间：2012-10-16T17:44:34.783
> 
> 标签：javascript, jquery, search

我有一个静态网站，我想知道是否可以在网站上有一个搜索表单，然后使用 jQuery 的 JavaScript 在页面上搜索某些关键字，然后使用 jQuery 添加一个类或其他东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:50:34.497

使用 JQuery“包含”选择器

*   [http://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)
*   [http://www.w3schools.com/jquery/sel_contains.asp](http://www.w3schools.com/jquery/sel_contains.asp)

然后使用 addClass() 方法来分配你的类

*   [http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

    ```
    <html>
    <head>
      <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>

    <div>John Resig</div>

    <div>George Martin</div>
    <div>Malcom John Sinclair</div>
    <div>J. Ohn</div>

    <script>
    $("div:contains('John')").css("text-decoration", "underline");
        </script>

    </body>
    </html> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:57:16.763

应该是可能的：

```
var text = $('body').html();
var split = text.split(/whatever/);
$('body').html(split[0] + '<span class="match">' + 'whatever' + '</span> + split[1]); 
```

# python - 如何验证来自 ajax 的发布请求？我有无效的 ajax 数据正在写入 GAE 数据存储，

> ID：12920483
> 
> 赞同：0
> 
> 时间：2012-10-16T17:44:37.920
> 
> 标签：python, google-app-engine, jquery

在我的 webapp 中，我从 js 函数中获取数据并通过 ajax post 将其发布到特殊的处理程序。获得数据后，我将其写入我的数据库。

我的问题是每个 ajax 帖子都有双重数据（ajax 触发了两次，我需要找出原因，但这是另一个问题）。

我正在尝试捕捉这些双重触发，截至目前我知道第一组是空值，我从 self.request.get(someVar) 获取的每条数据在第一次 ajax 触发后都是空的。

我试着做

```
if not someVar:
    #data is valid, write to db... 
```

但是尽管这些值为空，但它们仍然超出了我的 if 函数，并且我的数据库正在写入空值...我正在考虑将它们设为字符串并确保它们的长度可能大于 0...

我在这里先向您的帮助表示感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:31:48.887

我发现了我的错误。看来“如果不是”语法没有任何问题，但是在我的代码的其他地方我把事情搞砸了，我错误地将其缩小到这个:(

# java - 从 DB 表中的 URL 路径将图像加载到 imageView

> ID：12920488
> 
> 赞同：1
> 
> 时间：2012-10-16T17:45:03.177
> 
> 标签：java, android, oop

我正在尝试按照本[教程](http://www.androidhive.info/2012/07/android-loading-image-from-url-http/)将图像从 URL 添加到 imageView 中。

```
public class AndroidLoadImageFromURLActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);            

        ImageView image = (ImageView) findViewById(R.id.image);

        String image_url = "http://api.androidhive.info/images/sample.jpg";

        ImageLoader imgLoader = new ImageLoader(getApplicationContext());

        imgLoader.DisplayImage(image_url, image);
    }
} 
```

但是，我将图像 url 存储在我的数据库表中，并希望在 java 中动态抓取和显示。请告诉我如何在java中做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:50:04.710

试试[这个链接](http://codinglookseasy.blogspot.in/2012/10/save-image-in-sdcard.html)

这里有一个名为 showImage() 的函数，它接受一个 url 作为参数并返回位图，您可以使用它来设置图像视图。

并且在处理要从 url 显示的图像时不要忘记授予 Internet 权限

# objective-c - 资产加载失败 (Cocoa for OS X)

> ID：12920490
> 
> 赞同：0
> 
> 时间：2012-10-16T17:45:18.007
> 
> 标签：objective-c, macos, cocoa

我对 mac 开发非常陌生，我很难理解所有这些 Cocoa 的东西是如何工作的。

现在我正在从视频文件中获取静止图像，为此，我需要加载我的视频文件（资产）。

```
NSURL *url = [[NSURL alloc]initWithString:@"/Users/EVG/Desktop/myfile.mp4"];

AVURLAsset *myAsset = [[AVURLAsset alloc] initWithURL:url options:nil];

NSArray *keys = @[@"tracks"];

[myAsset loadValuesAsynchronouslyForKeys:keys completionHandler:^()
 {
     NSError *error = nil;
     AVKeyValueStatus tracksStatus = [myAsset statusOfValueForKey:@"tracks" error:&error];

     if ( tracksStatus == AVKeyValueStatusFailed ||
         tracksStatus == AVKeyValueStatusCancelled )
     {
         NSLog(@"Failed with error: %@", [error localizedDescription]);
     }
 }]; 
```

执行此代码后，我收到以下消息：

NSView 控制器 [644:4413] 失败并出现错误：操作无法完成

有谁知道如何解决我遇到的这个问题？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:50:02.540

Your URL is wrong. First of all, absolute file paths should begin with a `/`, as in `/Users/EVG/Desktop/myfile.mp4`. However, that's not a URL. A file URL should be `file:///Users/EVG/Desktop/myfile.mp4`.

# android - Android自定义布局抛出android.view.InflateException

> ID：12920492
> 
> 赞同：2
> 
> 时间：2012-10-16T17:45:21.233
> 
> 标签：android, android-layout, android-widget

我正在尝试为小部件创建方形布局。

我有以下布局类：

```
package com.trollhammaren;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.LinearLayout;

public class SquareLayout extends LinearLayout {

    // constructors
    public SquareLayout(Context context) {
        super(context);
    }

    public SquareLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    // methods
    @Override
    protected void onMeasure(int width, int height) {
        Log.v("widget", "resized");
        super.onMeasure(width, height);
    }
} 
```

以及以下xml：

```
<?xml version="1.0" encoding="utf-8"?>
<com.trollhammaren.SquareLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="8dip"
    android:background="@drawable/myshape" >
</com.trollhammaren.SquareLayout> 
```

我看到的不是正方形，而是一个带有文本“问题加载小部件”的矩形小部件。当我放置小部件时，我在 logcat 中看到以下消息：

错误膨胀 AppWidget AppWidgetProviderInfo(provider=ComponentInfo{com.trollhammaren.wakeonlandroid/com.trollhammaren.wakeonlandroid.WidgetProvider}): android.view.InflateException: Binary XML file line #2: Error inflating class com.trollhammaren.SquareLayout

如果我将布局更改为 LinearLayout，我会看到一个正常的 LinearLayout，但它不是方形的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:12:18.570

在 Widget 内部，您只能拥有标记为[RemoteViews](http://developer.android.com/reference/android/widget/RemoteViews.html)的视图和布局。所以我认为您不能将自己的自定义类发送到 AppWidget 上下文。必须仅使用以这种方式标记的操作系统版本中的视图来完成。

为了明确这些工作的方式，承载 Widget 的上下文不是您的进程。因此，AppWidget 的上下文基本上通过类似 RPC 的机制将所有内容从您的应用程序发送到另一个上下文的视图。如果它支持自定义小部件，那基本上可以让您向其他应用程序进程发送任意代码，并承担比我敢打赌他们真正希望您拥有的更多的权限。另外，这对 IPC 来说是很讨厌的，因为您需要将整个类层次结构打包并将其加载到单独的类加载器中，而所有这些东西只是为了保证依赖关系得到维护。

# android - 如何解决实际android设备中的数据库问题？

> ID：12920496
> 
> 赞同：-4
> 
> 时间：2012-10-16T17:45:28.660
> 
> 标签：android, sqlite, android-emulator

我已经在我的应用程序中创建了数据库并将数据存储在该数据库中，当我在模拟器中运行我的应用程序时，它会显示所有数据，但是当我在我的 android 设备中运行相同的应用程序时，它会显示错误？这是我的代码。

```
private static String DB_NAME = "pa1.db";
private static String DB_PATH = "/data/data/in.bitcode.sn/databases/";

private void copyDataBase() throws IOException {

    InputStream myInput = context.getAssets().open(DB_NAME);

    String outFileName = DB_PATH + DB_NAME;

    OutputStream myOutput = new FileOutputStream(outFileName);

    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    myOutput.flush();
    myOutput.close();
    myInput.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:48:43.607

您不应该将数据库路径设置为固定，而是使用

```
context.getDatabasePath(DB_NAME) 
```

# java - 将多个 xml 对象传递给 jax-rs 服务

> ID：12920497
> 
> 赞同：2
> 
> 时间：2012-10-16T17:45:29.227
> 
> 标签：java, android, jaxb, jersey, jax-rs

我在我的服务器代码上使用 JAX-RS Jersey 和 JAXB 来实现我从 Android 应用程序使用的服务。我已经有服务以 xml 格式返回我的自定义对象，我可以在客户端很好地解组它们。现在我想以 xml 格式将我的自定义对象从客户端发送到服务器，我编写了一个简单的测试，但它失败并出现错误 400。这是服务：

```
@POST
@Path("/test")
@Produces(MediaType.TEXT_PLAIN)
@Consumes(MediaType.APPLICATION_XML)
public String test(List<Client> clientList, Client client) {
    //do something with clientList and client
    return response;
} 
```

这是我在请求正文中发送的 xml：

```
<clientList>
    <client name="" phone="" address="" />        
    <client name="" phone="" address="" />        
</clientList>
<client name="" phone="" address="" /> 
```

这是客户端代码：

```
HttpPost httpPost = new HttpPost(url);                
httpPost.addHeader("Accept", "text/plain");
httpPost.setHeader("Content-Type", "application/xml");
httpPost.setEntity(new StringEntity(xmlFromAbove, HTTP.UTF_8));
HttpResponse response = androidHttpClient.execute(httpPost); 
```

如果我只在服务中放置一个参数，它可以正常工作，但如果有多个参数，JAXB 似乎不知道如何解组它们。我是否必须将所需的所有参数包装在一个自定义对象中，还是有更简单的方法来做到这一点？

我还尝试将 xml 字符串作为 FormParams 传递并使用以下代码对其进行解组

```
JAXBContext jc = JAXBContext.newInstance(Client.class);
Unmarshaller unmarshaller = jc.createUnmarshaller();            
List<Client> clients = 
    (List<Client>)unmarshaller.unmarshal(new StringReader(clientListXml)); 
```

但它也没有工作，它抛出

```
javax.xml.bind.UnmarshalException: unexpected element (uri:"", local:"clients").  
    Expected elements are <{}client> 
```

当我从服务返回列表时，jaxb 会正确编组它，而不必将列表包装在自定义对象中。为了进行解组，我是否必须将其包装起来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:21:02.427

> 我是否必须将我需要的所有参数包装在一个自定义对象中，

是的，那将是一种选择。

> 或者有更简单的方法吗？

不是更简单，但您也可以使用多部分媒体类型发送由多个部分组成的请求实体 - 查看 jersey-multipart 模块的 javadoc 以获取更多信息（http://jersey.java.net/nonav/apidocs/latest /jersey/contribs/jersey-multipart/index.html)

> 当我从服务返回列表时，jaxb 会正确编组它，而不必将列表包装在自定义对象中。

那是因为泽西岛为你包装了它。如果您手动解组列表，则必须自己包装它。

# actionscript-3 - if ( object != null ) 而不是 AS3 中的 if ( object )

> ID：12920503
> 
> 赞同：3
> 
> 时间：2012-10-16T17:46:19.383
> 
> 标签：actionscript-3

是否有任何理由使用`if ( object != null )`条件而不是更简洁的`if ( object )`. 我经常看到前者，但似乎两者是等价的，而后者更短。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:29:11.850

不同的对象被区别对待。有些值永远不能为空，并且在您不希望它时可能会错误地触发 false。

布尔值永远不能为空。如果定义了布尔值但未给出值，则将其视为假；

```
var bool:Boolean;
trace(bool); // false
bool = true;
trace(bool); // true 
```

int 也不能​​为空。如果定义了 int 但未给定值，则将其视为 0；

```
var i:int;
trace(i); // 0
trace(Boolean(i)); // false
i = -1;
trace(Boolean(i)); // true
i = 0;
trace(Boolean(i)); // false
i = 1;
trace(Boolean(i)); // true 
```

Number 的行为类似于 int。如果一个 Number 已定义但未给定值，则将其视为 NaN

```
var num:Number;
trace(num); // NaN
trace(Boolean(num)); // false
num = -1.1;
trace(Boolean(num)); // true
num = 0;
trace(Boolean(num)); // false
num = 1.1;
trace(Boolean(num)); // true 
```

字符串是最糟糕的。如果一个 String 被定义但没有被赋予一个值，它被视为 null！

```
var str:String;
trace(str); // null
trace(Boolean(str)); // false
str = ""
trace(Boolean(str)); // false
str = "hello";
trace(Boolean(str)); // true 
```

在我的代码中，我只执行“if (obj)”是非常罕见的，因为大多数时候有一些更具体的东西是我真正关心的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:20:47.670

以下代码将有一个对象评估为`false`，即使该对象不为空：

```
class SomeWrapper
{
     var value: Object;

     SomeWrapper(Object value)
     {
         this.value = value;
     }

     /// Overriden method from Object, see ActionScript 3 reference
     function valueOf()
     {
         return value;
     }
}

var myWrapper = new SomeWrapper(false);

if(myWrapper)
{
    trace("myWrapper evaluates to true.");
}
else
{
    trace("myWrapper evaluates to false.");
} 
```

该`else`块将在上面的示例中执行，因为即使不是空引用，它的`myWrapper`计算结果也是`false`（它的`valueOf`方法返回包装器包含的任何值，在这种情况下）。问题是上面**不仅**测试了引用的可空性，它还隐式地调用了方法，由 Flash Player 虚拟机提供。当然，这种行为**可能是也可能不是你想要**的——你想测试它是否是空值还是它是否带有空值？（或者两者都可能）。`false``myWrapper`**`valueOf`**`myWrapper`****

 ****在这种情况下，冗长是您的朋友，否则您将获得代码可读性以换取潜在的运行时错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T18:07:06.153

`if (expression)``expression`通过获取其布尔值来测试其真实性。由于`null`和`undefined`都是虚假的，因此`if (object)`“有效”确保`object`不为空。

`0`但是，问题是 、`false`和`''`也是假的*。*当您使用`if (object)`时，当它为 null 时，您试图阻止运行的代码也将在`object`为零、空字符串或实际 boolean时被忽略`false`。通常，这不是你想要的。

如果您不能保证它`object`是 null 或字符串、数字或布尔值（或它们各自的对象类型）以外的类型，则*不太*`if (object != null)`可能意味着意外。****

# sql - 将聚合 SQL 查询与案例和何时转换为 MS Access

> ID：12920504
> 
> 赞同：1
> 
> 时间：2012-10-16T17:46:20.613
> 
> 标签：sql, ms-access, aggregate-functions

我已经毫无问题地执行了 SQL 中的查询，但它在 Access 中不起作用 Case 在 Access 权限中不可用，所以必须使用 IIf...

```
select
    sum(case when date between '2012-05-01' AND '2012-06-01' then value else 0 end) as sum1,
    sum(case when date between '2012-05-01' AND '2012-10-01' then value else 0 end) as sum2,
    sum(case when situation like 'Urgent' then 1 else 0 end) as urgent,
    sum(case when situation like 'Anual' then 1 else 0 end) as anual,
    sum(1) as total
from mytable 
```

有没有更好的方法来做到这一点？这个查询会起作用吗？

```
 select
        sum(IIf date between '2012-05-01' AND '2012-06-01',value,0) as sum1,
        sum(IIf date between '2012-05-01' AND '2012-10-01',value,0) as sum2,
        sum(IIf situation like 'Urgent',1,0 ) as urgent,
        sum(IIf situation like 'Anual' ,1,0 ) as anual,
        sum(1) as total
    from mytable 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:59:10.610

你需要`IIf()`括号`IIf(expression, truepart, falsepart)`

将`date`和`value`括在方括号中，因为两者都是保留字。

您的`Like`比较不包括任何模式匹配，所以我`=`代替了。

我假设日期是日期/时间数据类型，因此用`#`分隔符将值括起来。

```
SELECT
    Sum(IIf([date] BETWEEN #2012-05-01# AND #2012-06-01#,[value],0)) AS Sum1,
    Sum(IIf([date] BETWEEN #2012-05-01# AND #2012-10-01#,[value],0)) AS Sum2,
    Sum(IIf(situation = 'Urgent',1,0 )) AS urgent,
    Sum(IIf(situation = 'Anual' ,1,0 )) AS anual,
    Sum(1) AS total
FROM mytable; 
```

# python - Python 中的快速选择硬件

> ID：12920508
> 
> 赞同：1
> 
> 时间：2012-10-16T17:46:33.727
> 
> 标签：python

我得到了以下 quickSelect 算法的伪代码。我对一些事情有点困惑，当我调用 quickSelect 方法时，我要为“k”发送什么。另外，因为我需要在方法的开头声明 count = 0，所以它总是会在 quickSelect 的递归调用中设置回 0 这不是我需要发生的谢谢你的帮助，我已经包含了 Pseudo -code 以及我下面的代码；

```
Function quickSelect(aList, k):
If aList is not empty:
    pivot <- Choose the element at position (len(alist)//2)
    smallerList <- All elements of aList smaller than pivot
    largerList <- All elements of aList larger than pivot
    count <- the number of occurences of pivot value in aList
    m <- the size of smallerList
    if k >= m and k < m + count then:
        return pivot
    if m > k:
        return quickSelect(smallerList,k)
    else:
        return quickSelect(largerlist, k-m-count) 
```

这就是我想出的：

```
def quickSelect(aList, k):
   pivot = aList[len(aList)//2]
   smallerList = aList[:pivot]
   largerList = aList[pivot:]
   m = len(smallerList)
   count = 0

   for i in aList:
      if i == pivot:
        count = count + 1

   if k >= m and k < m + count:
      return pivot
   if m > k:
      return quickSelect(smallerList, k)
   else:
      return quickSelect(largerList, k-m-count) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T15:33:09.290

首先，您拥有`smallerList`并`largerList`根据它们的索引而不是它们的值从枢轴两侧获取内容。Pivot 应该将数字除以索引的内容，而不是索引的位置（例如，如果 index 为 5，则所有小于数字 5 的条目都需要分配给`smallerList`，并且所有更大的数字都需要分配`largerList`给大于 5。

这可以通过一个简单的 for 循环来完成：

```
if len(aList)!=0:
pivot=aList[(len(aList)//2)]
smallerList = []
for i in aList:
    if i<pivot:
        smallerList.append(i)
largerList=[]
for i in aList:
    if i>pivot:
        largerList.append(i)
m=len(smallerList)
count=len(aList)-len(smallerList)-len(largerList) 
```

`smallerList`并且`largerList`将/不/包括枢轴，因此计数（枢轴发生的次数）将是主列表的长度减去较小和较大列表的组合长度。

现在如果 k（第 k 个最小的数）大于等于 m，较小列表的长度，并且 k 小于较小列表的长度 + 枢轴的计数，则需要返回枢轴，因为它是您正在寻找的第 k 个最小的数字。

```
if k >= m and k<m + count:
    return pivot 
```

或者，如果较小列表的长度大于 k，则仅使用`smallerList`而不是完整列表再次运行快速选择。

```
elif m > k:
    return quickSelect(smallerList,k) 
```

否则，使用较大列表而不是完整列表再次运行快速选择，并查找 k - 较小列表的长度 - 枢轴计数

```
else:
    return quickSelect(largerList, k - m - count) 
```

这个函数会一遍又一遍地运行（比线性排序快得多），一旦满足就会给你返回枢轴。在这种情况下，枢轴将是中位数。

希望这可以帮助！

# java - JasperReports 字体 + RMI 应用程序与轻客户端应用程序来消耗 jaspers

> ID：12920514
> 
> 赞同：2
> 
> 时间：2012-10-16T17:46:59.873
> 
> 标签：java, jasper-reports, rmi

我正在使用由服务器和客户端两部分组成的学术应用程序......

在客户端，用户使用表单进行交互 (CRUD) 并将报告请求调用到服务器（如日销售报告）。

客户端应用程序向服务器应用程序发送一个 RMI 请求，服务器通过 RMI 请求（响应）返回一个 JasperPrint 对象给这个客户端。

有一次在客户端应用程序中，此 JasperPrint 将附加在 JFrame 上并显示给用户。

...好的...

今天我需要创建一个新报告，该报告使用特定字体（如证书字体）并且我已经在 J​​VM 服务器机器上安装了这个字体（/usr/lib/jvm/jdk-1.7.0/jre/lib/fonts /) 仅...在客户端不是。

当客户端用户调用此报告时，客户端应用程序抛出未找到碧玉字体异常...引用此字体。

我相信在 JFrame 上附加 JasperPrint 时尝试使用客户端可用的字体..只是这个字体。

问题是：我如何才能让客户不需要安装此字体来查看此报告，并且，我不会在我的所有应用程序中将 JasperPrint 视图转换为 PDF 视图？

FacadeRMI 调用的示例代码：

```
ReportsManager rm = FacadeFactoryLocal.newInstance(ReportsManager.class);
JasperPrint jasperPrint = rm.geraRelatorio(reportFile, parameters);

// ...
JFrame viewer = new JFrame("Report content");
viewer.setPreferredSize(new Dimension(800, 600));
viewer.setLocationRelativeTo(null);

JasperViewer jrViewer = new JasperViewer(print, true);
viewer.getContentPane().add(jrViewer.getContentPane());
new FrameConfig(viewer); // show the frame with validations. 
```

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:36:05.403

我找到了解决这个问题的方法。昨天我使用 Jasper 字体扩展 XML 将提到的字体打包在一个 jar 文件中，描述字体属性。此 jar 已添加到客户端应用程序类路径中，JasperPrint 通常会在客户端中呈现相应的报告，而无需在它们的机器上安装所需的字体。

与这里的主要架构师交谈，这个解决方案可以使用，因为最终的 jar 尺寸很小，并且不会影响视觉或任何应用程序的逻辑。

基于 Jasper 规范，我在 Eclipse 上创建了一个简单的 Java 项目，结构如下：

```
project-fonts/
src/
diploma.ttf
Arial Narrow.ttf
irfonts.xml
jasperreports_extension.properties 
```

irfonts.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<fontFamilies>
    <fontFamily name="Diploma">
        <normal><![CDATA[diploma.ttf]]></normal>
        <bold><![CDATA[diploma.ttf]]></bold>
        <pdfEmbedded><![CDATA[true]]></pdfEmbedded>
    </fontFamily>

    <fontFamily name="Arial Narrow">
        <normal><![CDATA[Arial Narrow.ttf]]></normal>
        <bold><![CDATA[Arial Narrow.ttf]]></bold>
        <boldItalic><![CDATA[Arial Narrow.ttf]]></boldItalic>
        <pdfEmbedded><![CDATA[true]]></pdfEmbedded>
    </fontFamily>
</fontFamilies> 
```

jasperreports_extension.properties：

net.sf.jasperreports.extension.registry.factory.fonts=net.sf.jasperreports.engine.fonts.SimpleFontExtensionsRegistryFactory net.sf.jasperreports.extension.simple.font.families.ireport=irfonts.xml

为了将此项目打包到 jar 文件中，我使用了 Eclipse，将此 jar 添加到客户端应用程序构建路径后。

参考资料（由 Alex 提供）

[http://jasperreports.sourceforge.net/sample.reference/fonts/index.html#fontextensions](http://jasperreports.sourceforge.net/sample.reference/fonts/index.html#fontextensions)

感谢支持，祝您有美好的一天。

# php - 正则表达式在电子邮件的称呼中查找名称

> ID：12920523
> 
> 赞同：-1
> 
> 时间：2012-10-16T17:47:31.170
> 
> 标签：php, regex, parsing, email

我需要解析遵循以下格式的电子邮件：

> 嗨，John Doe，
> 这里有更多文字。
> 甚至更多，更多，更多的文字。
> 您的用户 ID 是：1234
> 您的激活 ID 是：5678910
> 这里还有更多文字。

我正在寻找的正则表达式必须返回：

1.  称呼中的名字（这里：“John Doe”）
2.  用户 ID（此处：1234）
3.  激活 ID（此处：5678910）

我尝试了以下正则表达式，但它返回了整个电子邮件；我相信我犯的错误是电子邮件正文的其余部分中还有其他逗号，因此冒号与所有逗号匹配。如果用户输入了一个奇怪的包含逗号的用户名，那么即使是称呼中的名字也可以包含逗号。

```
preg_match_all("/Hi (.*),/", $out, $match); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:02:08.473

使用正则表达式模式

```
/Hi (.*?),\n.*?user ID is: (\d+).*?activation ID is: (\d+)/s
      ↑                      ↑                         ↑
  "John Doe"              "1234"                   "5678910" 
```

### PHP代码：

```
$pattern = '/Hi (.*?),\n.*?user ID is: (\d+).*?activation ID is: (\d+)/s';
preg_match($pattern, $email, $m);
print("$m[1]\n$m[2]\n$m[3]"); 
```

### 输出：

```
John Doe
1234
5678910 
```

检查[**这个演示**](http://ideone.com/86SGK)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:01:53.153

我会为每个字段使用一个正则表达式：

```
$match = array();
$regexs = array(
    '~Hi\s+(.+?),~', // notice ? -> "greedy killer"
    '~Your user ID is: (\d+)~',
    '~Your activation ID is: (\d+)~')

if( !preg_match( $regexs[0], $text, $match)){
    throw new Exception('Invalid mail format, cannot find user name');
}

// .. and so on for each field 
```

[但是，您可以将它们全部放入一个正则表达式中（如果您使用命名的子模式](http://www.php.net/manual/en/regexp.reference.recursive.php)，它将更好地阅读：

```
$regexp = '~Hi\s+(?P<name>.+?)|Your user ID is: (?P<id>\d+)|Your activation ID is: (?P<activation_id>\d+)~';
$matches = array();
preg_match_all( $regexp, $text, $matches, PREG_SET_ORDER);
foreach( $matches as $match){
    print_r( $match);
    if( !empty( $match['name'])){
       // Having a name
    }
} 
```

# asp.net - 中继器控件返回 null

> ID：12920527
> 
> 赞同：1
> 
> 时间：2012-10-16T17:47:58.693
> 
> 标签：asp.net, vb.net, data-binding, repeater

我目前有一个数据读取器作为绑定到转发器的数据源。如此处所示：

```
Try
            myConnection.Open()
            sqlCommand = New SqlCommand(sqlText, myConnection)
            dr = sqlCommand.ExecuteReader(CommandBehavior.CloseConnection)
            cropPlanRepeater.DataSource = dr
            cropPlanRepeater.DataBind()
 Catch ex As Exception

 End Try 
```

这将启动数据绑定事件，如下所示：

```
Public Sub CropPlanRepeater_ItemDataBound(ByVal source As Object, ByVal e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles cropPlanRepeater.ItemDataBound

    Dim rptI As RepeaterItem = e.Item
    Dim AmttoSell = TryCast(rptI.FindControl("amtToSell"), Label)
    AmttoSell.Text = AmttoSell
End Sub 
```

出于某种原因，这个 findcontrol 方法不断返回“null”或“nothing”我试图查看我的控件层次结构中是否存在缺陷等等，但我找不到任何东西。

下面是 HTML，看看它是如何工作的：

```
<asp:Repeater ID="cropPlanRepeater" runat="server" Visible="false">
            <HeaderTemplate>
                <tr align="center" class="top-rpt-head">
                    <th scope="col">
                        Crop
                    </th>
                    <th scope="col">
                        Production
                    </th>
                    <th scope="col">
                        Amount to Sell
                    </th>
                    <th scope="col">
                        Breakeven
                    </th>
                    <th scope="col">
                        Target Price
                    </th>
                    <th scope="col">
                        Target Revenue
                    </th>
                    <th scope="col">
                        Feed Value
                    </th>
                    <th scope="col">
                        Other Income
                    </th>
                    <th scope="col">
                        Expenses
                    </th>
                    <th scope="col">
                        Profit
                    </th>
                </tr>
            </HeaderTemplate>
            <ItemTemplate>
                <tr align="center">
                    <td>
                    <!--- this needs to be fixed- incorrect methodology(should be done in the codebehind)----->
                        <%# (DataBinder.Eval(Container.DataItem, "Crop_Name"))%>
                    </td>
                    <td>
                    <!--- this needs to be fixed- incorrect methodology(should be done in the codebehind)----->
                        <%# (DataBinder.Eval(Container.DataItem, "Acres_D") * DataBinder.Eval(Container.DataItem, "Yield_D") + DataBinder.Eval(Container.DataItem, "Acres_I") * DataBinder.Eval(Container.DataItem, "Yield_I"))%>
                    </td>
                    <td>

                    </td>
                 </tr>
                    <asp:label runat="server" ID="AmtToSell"></asp:Label>

                    <asp:Literal runat="server" ID="Yield_I" Text='<%#Eval("Yield_I") %>' Visible="false" />
                    <asp:Literal runat="server" ID="Yield_D" Text='<%#Eval("Yield_D") %>' Visible="false" />
                    <asp:Literal runat="server" ID="Acres_I" Text='<%#Eval("Acres_I") %>' Visible="false" />
                    <asp:Literal runat="server" ID="Acres_D" Text='<%#Eval("Acres_D") %>' Visible="false" />
                    <asp:Literal runat="server" ID="Storage" Text='<%#Eval("Storage") %>' Visible="false" />
                    <asp:Literal runat="server" ID="Fed" Text='<%#Eval("Fed") %>' Visible="false" />
                    <asp:Literal runat="server" ID="Bartered" Text='<%#Eval("Bartered") %>' Visible="false" />
                    <asp:Literal runat="server" ID="Profit_I" Text='<%#Eval("ProfAcre_I") %>' Visible="false" />
                    <asp:literal runat="server" ID="Profit_D" Text='<%#Eval("ProfAcre_D") %>' Visible="false" />         
            </ItemTemplate>
        </asp:Repeater> 
```

我试过把标签放在桌子内外，但无济于事。我不确定我的 HTML 或代码隐藏是否有问题。我需要通过代码隐藏中的计算来操作该标签“amttosell”。（我会做一些类似 amttosell.text =*从数据库获取的数据/发布在上面的隐藏标签上的一些计算*

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:50:49.910

CropPlanRepeater_ItemDataBound 方法处理页眉、页脚和项目。对于您拥有的代码，您需要将其包装在一个`if`块中，检查项目类型是 Item 还是 AlternateItem。

```
Public Sub CropPlanRepeater_ItemDataBound(ByVal source As Object, ByVal e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles cropPlanRepeater.ItemDataBound

Dim rptI As RepeaterItem = e.Item

if rptI.ItemType = ListItemType.Item OR rptI.ItemType = ListItemType.AlternatingItem then
    Dim AmttoSell = TryCast(rptI.FindControl("amtToSell"), Label)
    AmttoSell.Text = AmttoSell

end if
End Sub 
```

请参阅[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx#Y200](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx#Y200)

# c# - ie9 signalR 一段时间后停止工作

> ID：12920532
> 
> 赞同：1
> 
> 时间：2012-10-16T17:48:20.580
> 
> 标签：c#, asp.net, signalr

奇怪的问题，似乎在我的应用程序 ie9 浏览器中一段时间​​后停止接收 signalR 消息，但它们没有从集线器断开连接，因为我的断开连接任务没有运行。我的代码似乎无法调用任何 ie9 客户端的 js 函数。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:50:45.740

StackOverflow 上已经有几个关于此的报告。[您可以在此处](https://stackoverflow.com/questions/12268246/signalr-forever-frame-in-ie-stops-working-after-a-few-minutes-of-being-idle)查看我对有关此问题的另一个问题的回答。

如果您需要更多帮助，我建议您[在 GitHub 上打开 SignalR 项目](https://github.com/SignalR/SignalR/issues?state=open)的问题。

# iphone - 关闭应用程序时保存 NSI nteger intScore

> ID：12920539
> 
> 赞同：1
> 
> 时间：2012-10-16T17:48:42.807
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我用 xcode 4 制作了一个应用程序，所有代码都在主代码文件中，所以我没有更多的类。我有 3 个视图，但目前只使用一个。现在在游戏中我保存一个整数作为分数，在游戏结束时它显示你的分数是多少，但我想知道如何让该整数显示在我的其他 2 个视图之一的标签中，并且重新启动应用程序时如何将其保留在那里。我很抱歉我的英语不好，但我是这个目标 C 和 iphone 应用程序的新手。谢谢你！

**以及如何将某些内容放入其他视图控制器中，无法处理代码文件**

这是代码：

```
//
//  ViewController.m
//  Mundo Grafia
//
//  Created by Axel Lambregts on 2/10/12.
//  Copyright (c) 2012 AxelNiels. All rights reserved.
//

#import "ViewController.h"

@interface ViewController ()

@end
@implementation ViewController

// variabelen aanmaken
NSInteger intScore;
NSInteger intRandomMonument;
NSInteger intRandomAnswerPosition;
NSInteger intRandomAnswerA;
NSInteger intRandomAnswerB;
NSInteger intRandomAnswerC;
NSInteger intRandomAnswerD;
NSInteger intArrayEuropeLenght;
NSInteger intAmountOfQuestionsAsked;
NSString *scoreSpatie;
NSString *arrEurope[][2] =

    {

        {@"Eifel.jpg",@"Paris"},
        {@"NotreDame.jpg",@"Paris"},
        {@"ArcDeTriompheParis.jpg",@"Paris"},

        {@"AtomuimBrussels.jpg",@"Brussels"},
        {@"MannekePis.jpg",@"Brussels"},

        {@"Colosseum.jpg",@"Rome"},
        {@"TreviFountainRome.jpg",@"Rome"},

        {@"SagradaFamilia.jpg",@"Barcelona"},
        {@"SpanishSchoolMadrid.jpg",@"Madrid"},

        {@"KremlinMoskou.jpg",@"Moskou"},

        {@"MermaidKopenhagen.jpg",@"Copenhagen"},

        {@"MonteCarloMonaco.jpg",@"Monaco"},

        {@"AcropolisAthens.jpg",@"Athens"},

        {@"ParlementBudapest.jpg",@"Budapest"},

        {@"BuildingReykjavik.jpg",@"Reykjavik"},

        {@"StatueKiev.jpg",@"Kiev"},

        {@"PortOfEuropeLissabon.jpg",@"Lisbon"},

        {@"ViewSanMarino.jpg",@"San Marino"},

        {@"BridgesPrague.jpg",@"Prague"},

        {@"MoskeeAnkara.jpg",@"Ankara"},

        {@"TowerBridgeLondon.jpg",@"London"},
        {@"BigBenLondon.jpg",@"London"},
        {@"LondonEyeLondon.jpg",@"London"},

        {@"BrandenburgerTor.jpg",@"Berlin"},
        {@"ReichstagBerlin.jpg",@"Berlin"},

        {nil,nil}

    };

/*
NSArray *arrEurope = @[
@[@"Eifel.jpg",@"Paris"],
@[@"NotreDame.jpg",@"Paris"],
@[@"ArcDeTriompheParis.jpg",@"Paris"],
@[@"Eifel.jpg",@"Paris"],
@[@"NotreDame.jpg",@"Paris"],
@[@"ArcDeTriompheParis.jpg",@"Paris"],

@[@"AtomuimBrussels.jpg",@"Brussels"],
@[@"MannekePis.jpg",@"Brussels"],

@[@"Colosseum.jpg",@"Rome"],
@[@"TreviFountainRome.jpg",@"Rome"],

@[@"SagradaFamilia.jpg",@"Barcelona"],
@[@"SpanishSchoolMadrid.jpg",@"Madrid"],

@[@"KremlinMoskou.jpg",@"Moskou"],

@[@"MermaidKopenhagen.jpg",@"Copenhagen"],

@[@"MonteCarloMonaco.jpg",@"Monaco"],

@[@"AcropolisAthens.jpg",@"Athens"],

@[@"ParlementBudapest.jpg",@"Budapest"],

@[@"BuildingReykjavik.jpg",@"Reykjavik"],

@[@"StatueKiev.jpg",@"Kiev"],

@[@"PortOfEuropeLissabon.jpg",@"Lisbon"],

@[@"ViewSanMarino.jpg",@"San Marino"],

@[@"BridgesPrague.jpg",@"Prague"],

@[@"MoskeeAnkara.jpg",@"Ankara"],

@[@"TowerBridgeLondon.jpg",@"London"],
@[@"BigBenLondon.jpg",@"London"],
@[@"LondonEyeLondon.jpg",@"London"],

@[@"BrandenburgerTor.jpg",@"Berlin"],
@[@"ReichstagBerlin.jpg",@"Berlin"]

];

*/

//methode'start' wanneer er op de start-knop wordt gedrukt
-(IBAction)start{

    [self NewQuestionEurope];
    intAmountOfQuestionsAsked = 0;
    //reset and show score
    intScore = 0;
    score.text = [NSString stringWithFormat:@"%d", intScore];

    //make buttons and labels visible
    Start.hidden = YES;
    question.hidden = NO;
    score.hidden = NO;
    scoretext.hidden = NO;
    imageContainer.hidden = NO;

    answerA.hidden = NO;
    answerB.hidden = NO;
    answerC.hidden = NO;
    answerD.hidden = NO;

    answerA.textColor = [UIColor greenColor];
    answerB.textColor = [UIColor greenColor];
    answerC.textColor = [UIColor greenColor];
    answerD.textColor = [UIColor greenColor];

    clickButtonA.hidden = NO;
    clickButtonB.hidden = NO;
    clickButtonC.hidden = NO;
    clickButtonD.hidden = NO;

    GoodFalse.hidden = NO;
    GoodFalse.text=@"Press a button to answer";
    GoodFalse.textColor = [UIColor greenColor];
   question.text = @"Where is this picture taken?";

}//einde start

-(IBAction)Reset{

score.text= @"gelukt";

}

-(IBAction)NewQuestionEurope{

  if(intAmountOfQuestionsAsked == 19){

      question.text = [@"Uw score is: "stringByAppendingString: [NSString stringWithFormat:@"%d", intScore]];

      Start.hidden = NO;
      question.hidden = NO;
      score.hidden = YES;
      scoretext.hidden = YES;
      imageContainer.hidden = YES;

      answerA.hidden = YES;
      answerB.hidden = YES;
      answerC.hidden = YES;
      answerD.hidden = YES;

      clickButtonA.hidden = YES;
      clickButtonB.hidden = YES;
      clickButtonC.hidden = YES;
      clickButtonD.hidden = YES;
      GoodFalse.hidden = YES;

      Start.titleLabel.text = @"END";

  }

    else{

    intAmountOfQuestionsAsked ++;

    //Deze lus geeft aan intArrayEuropeLenght de waarde van hoeveel rijen de array bevat//
    intArrayEuropeLenght = 0;

    while (arrEurope[intArrayEuropeLenght][0] != NULL)
    {
        intArrayEuropeLenght++;
    }

   //score.text = [NSString stringWithFormat:@"%d", intScore];

    scoreSpatie = [
                             [NSString stringWithFormat:@"%d", intScore]
                             stringByAppendingString:@"/"];
    score.text = [
                  scoreSpatie
                  stringByAppendingString:[NSString stringWithFormat:@"%d", intAmountOfQuestionsAsked]
                  ];

  // Randoms genereren voor: 4 random antwoorden; 1 random afbeelding; een random positie om het juiste antwoord in te plaatsen
    intRandomMonument = arc4random()%intArrayEuropeLenght;            
    intRandomAnswerA = arc4random()%intArrayEuropeLenght;
    intRandomAnswerB = arc4random()%intArrayEuropeLenght;
    intRandomAnswerC = arc4random()%intArrayEuropeLenght;
    intRandomAnswerD = arc4random()%intArrayEuropeLenght;
    intRandomAnswerPosition = arc4random()%4;

    while(arrEurope[intRandomMonument][0] == @"removed"){

        intRandomMonument = arc4random()%intArrayEuropeLenght; 

    }

  //Random antwoorden maken
    answerA.text = @"";
    answerB.text = @"";
    answerC.text = @"";
    answerD.text = @"";

    if(answerA.text = @""){
        answerA.text = arrEurope[intRandomAnswerA][1];
    }

    if(answerB.text = @""){
        answerB.text = arrEurope[intRandomAnswerB][1];
    }

    if(answerC.text = @""){
        answerC.text = arrEurope[intRandomAnswerC][1];
    }

    if(answerD.text = @""){
        answerD.text = arrEurope[intRandomAnswerD][1];
    }

    switch(intRandomAnswerPosition)
    {
        case 0: answerA.text = arrEurope[intRandomMonument][1];
            break;
        case 1: answerB.text = arrEurope[intRandomMonument][1];
            break;
        case 2: answerC.text = arrEurope[intRandomMonument][1];
            break;
        case 3: answerD.text = arrEurope[intRandomMonument][1];
    };

    //als er antwoorden hetzelfde zijn, voor de gelijke een random blijven maken tot ze niet hetzelfde zijn
    if(
       [answerA.text isEqualToString: answerB.text]||
       [answerA.text isEqualToString: answerC.text]||
       [answerA.text isEqualToString: answerD.text]
       ){

        answerA.text = arrEurope[arc4random()%intArrayEuropeLenght][1];

    };

    if(
       [answerB.text isEqualToString: answerA.text]||
       [answerB.text isEqualToString: answerC.text]||
       [answerB.text isEqualToString: answerD.text]
       ){

        answerB.text = arrEurope[arc4random()%intArrayEuropeLenght][1];

    };

    if(
       [answerC.text isEqualToString: answerA.text]||
       [answerC.text isEqualToString: answerB.text]||
       [answerC.text isEqualToString: answerD.text]
       ){

        answerC.text = arrEurope[arc4random()%intArrayEuropeLenght][1];

    };

    if(
       [answerD.text isEqualToString: answerA.text]||
       [answerD.text isEqualToString: answerB.text]||
       [answerD.text isEqualToString: answerC.text]
       ){

        answerD.text = arrEurope[arc4random()%intArrayEuropeLenght][1];

    };

    //Laat de afbeelding zien van het gekozen monument (via random gekozen)
    imageContainer.image = [UIImage imageNamed: arrEurope[intRandomMonument][0]];

  }  

}

//hier onder zit ergens een fout want hij geeft precies random juist en fout :)
//kan zijn dat het opgelost is vanaf we niet 2x dezelfde vragen hebben maar ik denk het niet.

//press buttonA
-(IBAction)AnswerA {

    if([answerA.text isEqualToString: arrEurope[intRandomMonument][1]]){

        GoodFalse.text = @"Correct!";
        GoodFalse.textColor = [UIColor greenColor];
        intScore ++;

    }else {

        GoodFalse.text=@"Wrong!";
        GoodFalse.textColor = [UIColor redColor];

        }

    arrEurope[intRandomMonument][0] = @"removed";

    [self NewQuestionEurope];

}

//press buttonB
-(IBAction)AnswerB {

    if([answerB.text isEqualToString: arrEurope[intRandomMonument][1]]){

        GoodFalse.text = @"Correct!";
        GoodFalse.textColor = [UIColor greenColor];
        intScore ++;

    }else {

        GoodFalse.text=@"Wrong!";
        GoodFalse.textColor = [UIColor redColor];
    }

    arrEurope[intRandomMonument][0] = @"removed";
[self NewQuestionEurope];
}

//press buttonC (works)
-(IBAction)AnswerC {

    if([answerC.text isEqualToString: arrEurope[intRandomMonument][1]]){

        GoodFalse.text = @"Correct!";
        GoodFalse.textColor = [UIColor greenColor];
        intScore ++;

    }else {

        GoodFalse.text=@"Wrong!";
        GoodFalse.textColor = [UIColor redColor];
    }

arrEurope[intRandomMonument][0] = @"removed";
    [self NewQuestionEurope];
}

//press buttonD
-(IBAction)AnswerD {

    if([answerD.text isEqualToString: arrEurope[intRandomMonument][1]]){

        GoodFalse.text = @"Correct";
        GoodFalse.textColor = [UIColor greenColor];
        intScore ++;

    }else {

        GoodFalse.text=@"Wrong!";
        GoodFalse.textColor = [UIColor redColor];
    }
   arrEurope[intRandomMonument][0] = @"removed";
    [self NewQuestionEurope];
}

//hier onder niets wijzigen

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:59:04.533

```
NSUserDefaults *scores = [NSUserDefaults standardUserDefaults];
if (_points>[scores integerForKey :@"highscore"]) {
    [_highScoresLabel setString:[NSString stringWithFormat:@"%d",_points]];
    [scores setInteger:_points forKey:@"highscore"]; 
```

我正在使用该代码在我的一个游戏中显示持续的高分。

要在另一个 UIViewController 中显示，只需添加以下代码，其中 _higScoreLabel 是 ypu 想要显示分数的标签：

```
NSUserDefaults *scores = [NSUserDefaults standardUserDefaults];
NSString *_points = [scores integerForKey :@"highscore"];
[_highScoresLabel setString:[NSString stringWithFormat:@"%d",_points]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:39:26.200

```
Try using NSUserDefaults ,it will keep the value in memory until you forcefully remove it or you delete the app.

     int Score = HighScore;

    [[NSUserDefaults standardUserDefaults] setObject:Score forKey:@"anyKey"];

    currentScoreLabel.text = [NSString stringWithFormat:@"%d",Score];
    highScoreLabel.text=[NSString stringWithFormat:@"%d",[[NSUserDefaults standardUserDefaults] objectForKey:@"anyKey"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:03:38.317

一旦你知道用户的最终分数是多少，就将整数写入 NSUserDefaults，如下所示：

```
[[NSUserDefaults standardUserDefaults] setInteger:intScore forKey:@"score"]; 
```

然后，为了在另一个视图控制器中显示分数整数，您只需在另一个视图控制器的 viewDidLoad 中从磁盘读取值，然后将其设置在标签中！由于该值已经存储在磁盘上，因此您甚至不需要将其作为参数传递或将其设置为另一个视图控制器上的属性，只需从 viewDidLoad 中的 NSUserDefaults 读取它（或您需要设置的任何/任何方法） ）。

所以在第二个视图控制器中，做：

```
- (void) viewDidLoad {
    self.anotherLabel.text = [NSString stringWithFormat:@"%d", [defaults integerForKey:@"score"]];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:13:02.873

// 保存在首选项中

```
int highScore  = yourGameScore;
[[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:highScore]     forKey:@"HighScore"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

// 从 pref 中获取保存的值

```
int highScore = [[[NSUserDefaults standardUserDefaults] objectForKey:@"HighScore"] intValue ]; 
```

[这是堆栈中的类似问题..](https://stackoverflow.com/questions/11365352/save-and-load-highscore/11365543#11365543)

# javascript - Ember.Instrumentation API 示例

> ID：12920543
> 
> 赞同：6
> 
> 时间：2012-10-16T17:49:04.730
> 
> 标签：javascript, ember.js

我一直在阅读[这篇](http://bradleypriest.com/2012/10/15/whats-new-in-emberjs-16/)关于 EmberJS 中新增功能的文章。其中之一是[Ember.Instrumentation](https://github.com/emberjs/ember.js/commit/134fc61b764ef5b464ab3ebef968716b7df5c50c)，谁能解释我们在哪里使用它，如果可能的话，举个例子......谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T20:39:32.273

## 为什么

一般来说，检测是一种通过订阅命名空间侦听器来测量应用程序性能和其他指标的方法。它也可用于调试。

## 例子

我不能把这个小提琴归功于我，我昨晚才在纽约 ember.js 聚会上看到它，但这应该提供一些背景信息：

[http://jsfiddle.net/2Pn3f/6/](http://jsfiddle.net/2Pn3f/6/)

为了弄清楚是谁提出的，我只能找到他的聚会资料：[http ://www.meetup.com/EmberJS-NYC/members/6706336/](http://www.meetup.com/EmberJS-NYC/members/6706336/)

要看到奇迹发生，请打开您的控制台并开始将学生标记为“这里”。

查看靠近顶部的 StudentView 和底部的 Em.Subscribe。

```
// In a view
Em.instrument("student.here", this.get('content'), function() {
    //mark student as in attendance
    this.set('inAttendance', !this.get('inAttendance'));
  }, this);
}, 
```

...

```
Em.subscribe('*', {
  ts: null,
  before: function(name, timestamp, payload) {
    ts = timestamp;
    //console.log('    before: ', name, JSON.stringify(payload));
    //return 'HelloFromThePast';
  },
  after: function(name, timestamp, payload, beforeRet) {
    //log metrics
    //record analytics
    //profile app
    console.log('instrument: ', name, JSON.stringify(payload), beforeRet, timestamp - ts);
  }
}); 
```

## 边注

更酷的是，您可以使用通配符订阅 ember 对 Instrumentation 的使用。

[http://jsfiddle.net/dmazza/sUvdg/](http://jsfiddle.net/dmazza/sUvdg/)

## 文档

有关详细信息，请参阅文档： http: [//emberjs.com/api/classes/Ember.Instrumentation.html](http://emberjs.com/api/classes/Ember.Instrumentation.html)

# java - Android DialogFragment 检索选定的选项

> ID：12920548
> 
> 赞同：2
> 
> 时间：2012-10-16T17:49:12.433
> 
> 标签：java, android

我基本上有一个显示一系列选项的对话框片段。

我想做的是，

传回调用活动，选择哪个选项。然后，这将在原始活动中调用一个方法。

我正在使用的自动取款机，

((Activity) method(); ，从对话框中调用调用活动方法，但这似乎非常有效，因为这样做时android响应时间会减慢。

**换句话说，我怎样才能简单、快速地从我刚刚创建的片段中获取信息？**

在活动中，

```
button.setOnClickListener( new OnClickListener() {

        public void onClick(View arg0)  {

            FragmentManager fm = getFragmentManager();
            FragClass frag = new FragClass();
            frag.show(fm, "fragment_sub_connections");

        } 
```

然后在 FragClass 中，

```
 public FragClass()
{

}

@Override
public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{

    View view = inflater.inflate(R.layout.fragment_sub_connections, container);
            //some code here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T21:29:26.210

创建一个侦听器接口并允许您的活动实现它，这可以用作回调。

```
// In your fragment

public interface OnMyFragDismissListener(){
     void onMyFragDismissed(MyObject obj);
}    

// onCreate...

// someCode...

// However you have the user select the option
@Override
public void onDismiss(DialogInterface d){
     if(getActivity() instanceof OnMyFragDismissListener)}
        ((OnMyFragDismissListener)getActivity()).onMyFragDismissed(result); // result being the user choice
     }
} 
```

然后像这样使用它：

```
public class YourActivity extends Activity implements OnMyFragDismissListener {

   // code...
    FragmentManager fragman = getFragmentManager();
    FragClass frag = new FragClass();
    frag.show(fm, "fragment_sub_connections");

  // code...

   @Override
   public void onMyFragDismissed(MyObject obj){
        // Fragment dismissed and object received!
   }

 } 
```

# php - 按时间顺序排列 - PHP

> ID：12920552
> 
> 赞同：0
> 
> 时间：2012-10-16T17:49:39.847
> 
> 标签：php, math, loops, numbers

我需要找到按时间顺序排列的下一个数字。例如，我有一个数组：

```
$numbers = array(1,2,4); 
```

我想要函数给我缺少的按时间顺序排列的数字：`3`

更多示例：

```
$numbers = array(6,7,8,11); 
```

需要给我：`9`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:51:33.960

The only way I see doing this is to use `sort` on your array, then looping through the entire array.

To insert the number at the specified position in the array, [look at this](https://stackoverflow.com/questions/1763959/insert-into-array-at-a-specified-place).

Use nickb's answer though - much better!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T17:56:39.557

一旦您假设数组按以下方式排序，解决方案就很简单：

```
sort( $numbers); 
```

然后，您可以获得完整的数字范围，对完整集和输入数组进行差异，并获取第一个元素（这将是第一个不同的元素）：

由于数组已排序，我们可以像这样获取最小和最大元素（我们也可以调用[`min()`](http://php.net/min)and [`max()`](http://php.net/max)）：

```
$min = current( $numbers);
$max = end( $numbers); 
```

现在，我们使用[`range()`](http://php.net/range)获取完整的数字集，然后调用[`array_diff()`](http://php.net/array_diff)查找差异：

```
$complete = range( $min, $max);
$diff = array_diff( $complete, $numbers); 
```

第一个连续缺失的数字在差的第一个元素中：

```
$first_missing = array_shift( $diff); 
```

这里的好处是`$diff`它将包含和范围之间的**所有**缺失数字。`$min``$max`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T17:59:09.130

这应该可以解决问题：

```
<?php
function chrono_trigger($array) {
    sort($array, SORT_NUMERIC);
    $prev = False;
    foreach($array as $num) {
        if($prev === False) {
            $prev = $num;
            continue;
        }
        if($prev != ($num-1)) {
            return $prev+1;
        }
        $prev = $num;
    }
    return False;
}

$numbers1 = array(1,2,4); // Should return 3
$numbers2 = array(6,7,8,11); // Should return 9
$numbers3 = array(1,2,3,4); // Shouldn't return anything

// Returns 3
$missing1 = chrono_trigger($numbers1);
var_export($missing1);

// Returns 9
$missing2 = chrono_trigger($numbers2);
var_export($missing2);

// Returns False
$missing3 = chrono_trigger($numbers3);
var_export($missing3); 
```

# ios - ASP.Net LinkBut ton 和 iOS UIWebView

> ID：12920553
> 
> 赞同：0
> 
> 时间：2012-10-16T17:49:40.627
> 
> 标签：ios, uiwebview, xamarin.ios, linkbutton

我发现`UIWebView`如果按钮是 asp.net ，嵌入式 's 不会导致回发`LinkButton`，但它们与`Button`'s 一起工作正常。`LinkButton`Safari 会导致's正常回发。

有什么解决方法吗？

代码片段：

```
vwWebView.LoadRequest (new NSUrlRequest (new NSUrl (url))); 
```

（我们使用的是单点触控，但这似乎是一个 iOS 问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:25:13.360

事实证明，UIWebView 的默认用户代理使 IIS 不将 javascript 发送到内容项。解决方案是手动将 webview 的用户代理设置为移动 safari 的用户代理。

这是实现它的代码：

```
static public void SetUserAgent(UIWebView webview) {
    var agent = "Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A403 Safari/8536.25";
    var webDocumentView = new NSObject(Messaging.IntPtr_objc_msgSend(webview.Handle,
                                                                     (new Selector("_documentView").Handle)));
    var webView = webDocumentView.GetNativeField("_webView");
    Messaging.void_objc_msgSend_IntPtr(webView.Handle, 
                                       (new Selector("setCustomUserAgent:")).Handle,                        
                                       (new NSString(agent)).Handle);
} 
```

这篇文章提供了解决方案： http: [//blog.reinforce-lab.com/2010/06/monotouchuiwebviewhowtochangeuseragent.html](http://blog.reinforce-lab.com/2010/06/monotouchuiwebviewhowtochangeuseragent.html)

以下帖子不起作用。[它只对第一个请求进行裁剪，而不是对后续浏览进行裁剪： http](http://monotouch.2284126.n4.nabble.com/seting-UIWebview-user-agent-objectiveC-question-td3807602.html) ://monotouch.2284126.n4.nabble.com/seting-UIWebview-user-agent-objectiveC-question-td3807602.html

# c# - ADO.net - Complex Data binding

> ID：12920557
> 
> 赞同：0
> 
> 时间：2012-10-16T17:49:48.147
> 
> 标签：c#, .net, database, vb.net, ado.net

I am dealing with a problem i cannot solve by myself. I also tried to find out a solution on the net, without success.

Here the details ...

Its about a complex data binding (in this case , 3 database tables).

Here the tables i have (abstraction), trying to modelate a Users/Groups association

```
Table 1 - tblUsers
------------------------------
field1: Id
field2: Username
field3: Password

Table 2 - tblGroups
------------------------------
field1: Id
field2: GroupName
field3: Description

Table 3 - tblUsers_Groups
------------------------------
field1: Id
field2: Id_tblUsers
field3: Id_tblGroups 
```

This way a single user can belong to multiples groups (and vice)

I have been trying to create a WinForm, like the Master - Detail kind, where the Master Grid should show the Users in tblUsers, and ... according to what I select there, show in the Details Grid, the groups the users selected belongs to ... but using the info in tblGroups

Could someone please give me a hand on this problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:02:22.307

第一个表3应该没有和ID
使用Id_tblUsers、Id_tblGroups的复合键

在.NET中我这样做的方式是

```
 public class UserGroup : Object
    {   // NO editing just add remove
        public User User { get; private set; }
        public Group Group { get; private set; }
        public override bool Equals(Object obj)
        {
            //Check for null and compare run-time types.
            if (obj == null || !(obj is UserGroup)) return false;
            UserGroup item = (UserGroup)obj;
            return (User.ID == item.User.ID && Group.ID == item.Group.ID);
        }
        public override int GetHashCode() { return (User.ID & 0xffff) + (Group.ID << 16); }
        public UserGroup(User user, Group group)
        { User = user; Group = group; }
    } 
```

创建 UsersGroups 的 HashSet 并将其传递给 ctor 中的 Group 和 User。
它只是对对象的引用，因此每个人都在引用相同的数据。
覆盖 GetHash 以提高效率和 Equals，因此 HashSet 中不能有重复的 UserGroup。

这是返回用户所在组的代码

```
public List<Group> Groups
{   get { return usersGroups.Where(x => x.User == this)
                            .Select(x => x.Group)
                            .OrderBy(y => y.Name)
                            .ToList(); } } 
```

然后群里的妹子来回用户。

它可能看起来很复杂，但很酷的是一个单一的主人。因此，当您修改 UserGroup 的 HashSet 时，它会同时反映在 User 和 Group 中

# ruby-on-rails-3 - Twitter-bootstrap-rails 似乎没有加载一些默认的引导 css

> ID：12920559
> 
> 赞同：0
> 
> 时间：2012-10-16T17:49:49.597
> 
> 标签：ruby-on-rails-3, heroku, twitter-bootstrap

我正在`gem 'twitter-bootstrap-rails, '2.1.4'`用于一个项目。导轨 3.2.6

我在部署到 heroku 时首先注意到了一个问题，但我的本地机器上也有这个问题。似乎一些 twitter 默认值没有被加载。例如，导航栏是白色的，而不是默认的深灰色/黑色。字体大于引导程序的默认值。

这是导航栏的样子，尽管我从未更改过引导程序的默认导航栏颜色。 ![在此处输入图像描述](../Images/849957ad20e962c7c249d8c4d17615ee.png)

我的资产是这样设置的：

![在此处输入图像描述](../Images/9f46a6d418668958c06aed4cc6a69f37.png)

一种`application controller`方法确定要使用哪个布局，然后加载`application.css`或者`blog_admin.css`因为管理布局与常规站点布局不同。

```
application.css
 /*
 *= require_self
 *= require_tree ./application
 */

blog_admin.css
 /*
 *= require_self
 *= require_tree ./blog_admin
 */ 
```

每个目录，`application`并`blog_admin`有一个`bootstrap_and_overrides.css.less`.

更奇怪的是在我的笔记本电脑上，样式在开发环境中是正确的。在我的 iMac 上，它没有并且缺少样式。当部署到 Heroku 时，它总是缺少样式，即使是从我的笔记本电脑部署的，它在开发环境中具有正确的样式。

知道可能出了什么问题吗？如果只是没有找到引导程序的默认变量，我如何确保它们正在加载？

这也是一个很难调试的问题，所以任何建议也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:11:59.847

这两种默认样式都在[Bootstrap 2.1.0](http://blog.getbootstrap.com/2012/08/20/bootstrap-2-1-0-released/)中进行了更改。

> **导航栏组件现在默认为白色，并带有一个可选的类来使其变暗。**

黑暗导航栏的新类是`navbar-inverse`.

> **新的基本字体大小和行高。**13px/18px 出来了，14px/20px 进去了。

您可以通过修改 LESS 变量或使用[定制](http://twitter.github.com/bootstrap/customize.html)器轻松地将这些更改回来。

我猜您只是在笔记本电脑上链接到旧版或修改版的 Bootstrap。

# python - Python列表删除附加

> ID：12920561
> 
> 赞同：0
> 
> 时间：2012-10-16T17:49:52.967
> 
> 标签：python, python-2.7

我有一个要放入列表的文件，我想从中取出一些东西，并附加到另一个列表（我对此没有问题），我遇到的问题是从第一个列表中删除东西. 以下是我尝试过的，但它只会从原始列表中删除其他所有内容。

```
list:
bob     g1  3110
bob     g2  244
bob     g3  -433
greg    fun112  10595
greg    fun113  -1203
greg    fun114  -3049.999
greg    fun115  3808
greg    fun116  320
greg    got112  -600
greg    got113  5958
greg    got114  1249

file1 = open('test','rb').read().splitlines()
file1=sorted(file1)
test_group = ['fun','got']
test= []

for product in file1:
    spt = product.split(",")
    for line in spt:
        if line[:3] in test_group:
            x = test.append(product)
            y = file1.remove(product) 
```

测试 [ ] 列表很好，我想要的所有项目都没有问题，但是当我查看 file1 时，它只会删除“有趣”和“得到”行中的所有其他行

为什么这只会取出其他所有的，我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T17:53:39.810

不要尝试修改您正在迭代的列表！那是行不通的！

如果您制作列表的副本，那么它应该可以工作：

```
for product in file1[:]:
    spt = product.split(",")
    for line in spt:
        if line[:3] in test_group:
            x = test.append(product)
            y = file1.remove(product) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T18:00:22.400

您不想操作当前正在迭代的对象（例如，如果您使用字典尝试此操作，您实际上会遇到异常）。

此外，由于`list.append`adn`list.remove`是就地的，它总是返回`None`- 所以没有必要将结果分配给任何东西。

我会这样做：

```
with open('test') as fin:
    test = []
    other = []
    rows = (line.split() for line in fin)
    for name, group, value in rows:
        if group[:3] in ('fun', 'got'):
             add = test.append
        else: 
             add = other.append
        add([name, group, value]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:53:06.860

可能是因为负整数，它可能会将那些读为要跳过的整数？你测试过吗？

# php - 在带有中继器字段的分隔 div 上显示多个图像

> ID：12920569
> 
> 赞同：1
> 
> 时间：2012-10-16T17:50:31.330
> 
> 标签：php, jquery, ajax, wordpress, plugins

我正在尝试使用 ACF 的中继器字段显示带有图像的 div 列表。

这是我正在使用的代码：

```
<?php $query = new WP_Query( 'post_type=artworks_post&posts_per_page=-1&order=DESC' ); ?>
<?php while ( $query->have_posts() ) : $query->the_post(); ?>

<?php 
$slides = get_field('project_thumbnails');  // Grabs the array

    // Check if there is any data in the array before looping
    if($slides) {
    echo '<div id="project_slider" class="item">';
    foreach($slides as $s) {
        echo '<a href="#">';
        echo '<img src="'.$s['project_thumb'].'" alt="" />';
        echo '</a>';
    }
       echo '<div class="art_title">';
       echo '<p>SWEET LIFE2</p>';
       echo '</div>';
       echo '<div class="mask">';
       echo '</div>';
    }

?>

<?php endwhile; // end of the loop. ?> 
```

这样做的问题是它在同一个 div 中显示所有图像，而不是在新 div 中显示转发器字段的每个图像。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:20:13.647

我不是 php 专家，但我认为这只是缺少第一个 div 的结束标签的问题，我也要把另一个 div 放在循环中，它看起来像这样：

```
 <?php  $slides = get_field('project_thumbnails');  
            // Grabs the array      
           // Check if there is any data in the array before looping
             if($slides) {     
                //we need to close this div
               echo '<div id="project_slider" class="item">';     
               foreach($slides as $s) {  
                      echo '<div class="aimagediv" >'; //adding the start tag of the div
                      echo '<a href="#">';          
                      echo '<img src="'.$s['project_thumb'].'" alt="" />';
                      echo '</a>';
                      echo '</div>'; //CLOSING THE DIV JUST ADDED     
                     }        
                      echo '<div class="art_title">';        
                      echo '<p>SWEET LIFE2</p>';        
                      echo '</div>';        
                      echo '<div class="mask">';        
                      echo '</div>';  

                      echo '</div>'; //closing the first div,not sure if you want this, its optional
                 }  

    ?>  <?php endwhile; // end of the loop. ?> 
```

另一种选择是这样（只是弄清楚您期望的结果布局是什么）：

```
<?php  $slides = get_field('project_thumbnails');  
                // Grabs the array      
               // Check if there is any data in the array before looping
                 if($slides) {     
                    //we need to close this div

                   foreach($slides as $s) {  
                          echo '<div id="project_slider" class="item">';  
                          echo '<a href="#">';          
                          echo '<img src="'.$s['project_thumb'].'" alt="" />';
                          echo '</a>';
                          echo '</div>'; //CLOSING THE DIV JUST ADDED     
                         }        
                          echo '<div class="art_title">';        
                          echo '<p>SWEET LIFE2</p>';        
                          echo '</div>';        
                          echo '<div class="mask">';        
                          echo '</div>';  
                     }  

        ?>  <?php endwhile; // end of the loop. ?> 
```

希望这已经足够了。

# asp.net - ASP.Net MVC simple package for whitelisting html elements?

> ID：12920577
> 
> 赞同：1
> 
> 时间：2012-10-16T17:51:02.903
> 
> 标签：asp.net, shared-libraries, xss

In the perennial question - I have a comment form in which I want to allow some html elements. To prevent xss I need some sort of white-listing ability. I've been trying to find a nuget package, or anything that has an html-scrubber I can use but can't seem to find anything (there is the [Microsoft Web Protection Library](http://wpl.codeplex.com/) but according to the comments the current version is all but useless)

Surely there's a good nuget package out there to do this?

# html - 100% 不换新线

> ID：12920578
> 
> 赞同：0
> 
> 时间：2012-10-16T17:51:15.703
> 
> 标签：html, width

我需要输入 width: 100%; 一行文字（更准确地说是一个字符）：

```
+<input style="width: 100%;" type="tel /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:08:28.863

好吧，如果输入是 100% 宽，那条线上就没有其他东西了

这有点你想要的吗？

[http://jsfiddle.net/NVzfs/3/](http://jsfiddle.net/NVzfs/3/)

# gwt - Dynamic treegrid context menus

> ID：12920581
> 
> 赞同：1
> 
> 时间：2012-10-16T17:51:23.820
> 
> 标签：gwt, gxt

Is there a way using the treegrid in gwt-ext to have different context menus for different rows?

For example I would like my leaf rows to have different menu options then my non-leaf rows, or at least be able to disable menu options when they aren't revelent to the row that was right clicked.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T19:29:04.843

我为这个问题创建了一个解决方案：

创建叶子时，应将属性“type”设置为“leaf”，其他属性设置为“non-leaf”。

*BaseTreeModel base = new BaseTreeModel(); base.set("类型", "叶子");*

因此，在您的树的 selectionChanged 事件中，您放置了验证，并仅为您的叶子创建菜单。

```
 *treePanel.getSelectionModel().addListener(Events.SelectionChange, new      SelectionChangedListener<ModelData>() {
        @Override
        public void selectionChanged(SelectionChangedEvent<ModelData> data) {
            BaseTreeModel selected = (BaseTreeModel) data.getSelectedItem();
            if ("leaf".equals(selected .get("type").toString())) {
            // create the Menu and set it to contextMenu of your tree
            } else {
                treePanel.setContextMenu(null);
            }* 
```

安德烈。

# c++ - Google protobuf 库中的 MergeFrom* 与 ParseFrom*

> ID：12920583
> 
> 赞同：3
> 
> 时间：2012-10-16T17:51:36.003
> 
> 标签：c++, protocol-buffers

我似乎无法在 protobuf中找到[MessageLite](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.message_lite#MessageLite)`MergeFrom*`类的方法和`ParseFrom*`方法之间的明显区别。

我试图最小化我必须做的数据复制量，所以我在下面编写了以下代码来解码长度前缀消息：

```
bool StreamMessageDelimiter::receiveWithLengthPrefix(Message& message)
{
    google::protobuf::uint32 messageSize;
    auto_ptr<google::protobuf::uint8> prefixBuf(new google::protobuf::uint8[sizeof(messageSize)]);
    int receivedBytes = receiveNBytes(prefixBuf.get(), sizeof(messageSize));
    if(receivedBytes != sizeof(messageSize))
    {
        return false;
    }

    CodedInputStream prefixInput(prefixBuf.get(), sizeof(messageSize));
    prefixInput.ReadLittleEndian32(&messageSize);

    google::protobuf::uint8* payloadBuf = new google::protobuf::uint8[messageSize];
    receivedBytes = receiveNBytes(payloadBuf, messageSize);
    if(receivedBytes != messageSize)
    {
        return false;
    }

    ArrayInputStream rawInput(payloadBuf, messageSize);
    CodedInputStream codedInput(&rawInput);

    if(!message.MergeFromCodedStream(&codedInput))
    {
        return false;
    }

    return true;
} 
```

我的问题是使用[MergeFromCodedStream](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.message_lite#MessageLite.MergeFromCodedStream.details)会导致`message`获得所有权`payloadBuf`，还是`message`复制基础数据？如果`message`确实制作了副本，那么我显然应该使用`auto_ptr`for`payloadBuf`就像我为`prefixBuf`.

感谢您的输入！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T22:27:21.717

首先`MergeFrom*`不要像`ParseFrom*`方法一样工作。第一个像`MergeFrom`Message 类一样工作：

> 单个字段将被覆盖，除了将被合并的嵌入消息。重复的字段将被连接。

`ParseFrom`是一个包装器，只需在调用`Clear`之前调用`MergeFrom`：

> Clear() 避免释放内存，假设将再次需要分配用于保存部分消息的任何内存来保存下一条消息。如果您确实想释放 Message 使用的内存，则必须将其删除。

因此，在您的消息被清除之前，所有重复的字段都会汇总新数据。

存储在序列化流中的数据是[Varint 编码](https://developers.google.com/protocol-buffers/docs/encoding)的，因此解析是通过解释流中的数据并复制到 Message 对象字段来完成的。

解析完成后，消息本身将不需要缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T22:19:13.283

检查[ArrayInputStream](https://developers.google.com/protocol-buffers/docs/reference/cpp/google.protobuf.io.zero_copy_stream_impl_lite#ArrayInputStream.ArrayInputStream.details)的文档：

> “数据”仍然是调用者的属性，但在流被销毁之前必须保持有效。

所以不，它不占用所有权，您应该确保在正确的时间释放内存。

我认为您可能会对`Merge`函数名称中使用该词感到困惑。它并不是说“数据是从传递的缓冲区中合并的”（我认为这会导致您考虑所有权），而是说“数据已合并到消息中”。因此，在填充消息之前`Parse`调用`Clear()`，而`Merge`使用您直接传递的消息。

# c++ - BlackBerry 10 Cascades call ASP.NET web service

> ID：12920588
> 
> 赞同：1
> 
> 时间：2012-10-16T17:51:48.437
> 
> 标签：c++, qnx, blackberry-10

I am developing a BlackBerry 10 apps with Cascades (C++ programming language) right now. Can anyone tell me how do i make a call to an ASP.NET web service in BlackBerry 10: Cascades? I'm just a beginner, so i don't really know anything. Thanks for your answer :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:54:23.337

大多数 HTTP 通信是使用 Qt 中的 QNetworkRequest、QNetworkAccessManager 和 QNetworkReply 类完成的。要从 Web 服务获取响应，请遵循以下显示的代码段：

```
QNetworkAccessManager* netManager = new QNetworkAccessManager();
if (netManager) {

QUrl url(webServiceUrl);
QNetworkRequest req(url);

QNetworkReply* reply = netManager->get(req);
connect(reply, SIGNAL(finished()), this, SLOT(onReply()));
} 
```

在 onReply 插槽中，您可以检查回复是否包含任何错误并解析响应。请注意，响应将采用 QByteArray 的形式，您可能需要转换为 QString 或您想要的形式。

有关更多信息，请遵循本[教程](https://developer.blackberry.com/cascades/documentation/device_comm/networking/tutorial_http_comm.html)

# html - 如何获取当前视图 HTML 源并将其作为字符串传递 JSF ManagedBean

> ID：12920594
> 
> 赞同：2
> 
> 时间：2012-10-16T17:52:04.253
> 
> 标签：html, jsf-2, parameters

我想获取当前视图 HTML 源并将其作为参数传递给 JSF 托管 bean。无论如何，在 JSF 中我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:42:51.840

您不能在 JSF 中执行此操作，因为它根本不在网络浏览器中运行。

最好的选择是使用 JavaScript。以下示例在单击提交按钮时使用 HTML 源代码设置隐藏的输入值：

```
<h:form id="form">
    <h:inputHidden id="source" value="#{bean.source}" />
    <h:commandButton value="submit" action="#{bean.submit}" 
        onclick="document.getElementById('form:source').value=document.getElementsByTagName('html')[0].outerHTML"
    />
</h:form> 
```

在 action 方法中，它在特定示例中然后仅可通过`source`属性获得。

# c++ - Import .CPP files from a working iOS project and rename to .mm issue

> ID：12920598
> 
> 赞同：0
> 
> 时间：2012-10-16T17:52:16.863
> 
> 标签：c++, ios, objective-c, objective-c++

I have copied a .CPP and its .h file from a working project to a new one.

I renamed the ending from .CPP to .mm but it still gives me errors.

In the .h file, near the class definition `class MeterTable`, it says it expect the `;`

In the .mm file, there are all kinds of errors.

I thought by changing the ending of the implementation file .mm it would clean all those errors. And yes, the original .CPP file compiled under the old project.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:23:29.693

看起来您正在将该`.h`文件包含到其他`.m`文件中。您不能只将 C++ 标头包含到 C 或 Objective-C 源文件中。您需要确保您的 C++ 接口与 C 兼容（没有类，只有没有重载的自由函数）。`.m`或者您必须将项目中的所有文件更改为`.mm`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T17:38:23.560

Objective-C 和 C++ 可以很好地结合使用，但有一些注意事项。首先，任何`.m`引用 C++ 代码（即通过头文件）的文件都必须定义为 Objective-C++ 源代码，*而不是*Objective-C。这可以通过转到文件检查器的`.m`文件并将文件类型从更改`Objective-C Source`为`Objective-C++`源来逐个完成。其次，使用相同的方法将`.h`and `.cpp`（或者`.mm`，实际扩展并不重要，它是定义的类型）分别定义为`C++ Header`and source。`Objective-C++`

只要您使用这种文件类型的划分，您就应该能够自由地混合使用 Objective-C 和 C++——我通常使用这种范例在我的 iOS 代码中使用 C++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-14T17:20:13.257

唯一的解决方案是拥有一个内联头文件。

**将.h**文件更改为**.hpp**并将**.cpp**文件与**.h**文件合并。

例如；你的**.h**文件：

```
// class.h

class {
public:
    void someclass(int a);
}; 
```

还有你的**.cpp**文件：

```
// class.cpp

#include "class.h"

void someclass(int a) {
    return;
} 
```

像这样合并到**.hpp 中**：

```
// class.hpp

class {
public:
    void someclass(int a) {
        return;
    }
}; 
```

# cakephp - 使用 SecurityComponent::requireSecure() 将其列入白名单而不是列入黑名单

> ID：12920600
> 
> 赞同：0
> 
> 时间：2012-10-16T17:52:21.750
> 
> 标签：cakephp

我想使用 CakePHP[`SecurityComponent`](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html)来强制应用程序请求通过 SSL 使用`requireSecure()`.

我的问题是，默认情况下这是一种黑名单方法——默认情况下允许不安全的访问，除非该控制器明确禁止。我想切换到白名单方法 - 默认情况下拒绝不安全的访问，除非我在该控制器中明确允许它。

这个功能是否内置在 SecurityComponent 中？如果没有，我该如何手动设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:11:59.333

默认情况下，这似乎不是内置的。您可以通过创建控制器的属性来模拟这一点，`$requireSecure`然后有条件地调用`requireSecure()`. `AppController::beforeFilter()`以下是您将如何实现它：

应用控制器.php：

```
public $requireSecure = true;

public function beforeFilter() {
    if ($this->requireSecure) {
        $blacklist = is_array($this->requireSecure) ? $this->requireSecure : array('*');
        $this->Security->requireSecure($blacklist);
    }
} 
```

白名单控制器：

```
public $requireSecure = false; 
```

控制器，因方法而异（注意这`$requireSecure`是一个黑名单）：

```
public $requireSecure = array('login'); 
```

这实现了默认要求 SSL 的目标，但如果需要，可以在控制器中显式覆盖此要求。

# cobertura - 如果 test=true，我想从检测代码中排除 cobertura

> ID：12920602
> 
> 赞同：1
> 
> 时间：2012-10-16T17:52:42.573
> 
> 标签：cobertura, buildr

如果 test=true，我想从检测代码中排除 cobertura。

现在，我在顶部有所有必需的陈述：

```
require 'buildr/java/cobertura'
require 'buildr/scala' 
```

然后每次构建运行我都会得到这个：

> 使用 cobertura 数据文件 C:/usr/git_workspaces/reports/cobertura.ser 检测类

这意味着我的生产代码中有 cobertura 仪器。

这是我构建的下一部分

```
compile.with  CORE, SLF4J, LOG4J, WS_CLIENTS, JODA_TIME,
            [omitted for brevity]

compile.options.other = %w(-encoding UTF-8)

cobertura.exclude '[omitted for brevity]'

resources.filter.using *RESOURCES_FILTER

test.using :junit
# need this because of forking.  It does not appear to use the environmental variables defined above.
test.using :java_args => ["-XX:MaxPermSize=128M"]
test.with JUNIT, SCALATEST, MOCKITO, POWERMOCK, HAMCREST, SPRING.test

# Pakcage is below here but the code has already been instrumented... 
```

compile.with 是实际发生编译的地方吗？所以我可以做一个 if 测试然后添加 cobertura ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:54:52.010

如果您不需要“buildr/java/cobertura”，那么将没有检测。

我们像这样“解决”了（至少命令行参数必须包含“cobertura”，否则不会检测类）

```
ARGV.each do |a| 
  if (a.include?("cobertura")) 
    require "buildr/java/cobertura"
    break
  end
end 
```

你可以这样做

```
require_cb = ture
ARGV.each do |a|   
    if (a.include?("test=yes"))
    require_cb = false      
    break
  end
end
require "buildr/java/cobertura" if require_cb 
```

hth

# java - 何时在 Spring 中使用自动装配

> ID：12920606
> 
> 赞同：30
> 
> 时间：2012-10-16T17:53:06.517
> 
> 标签：java, spring

我正在读这本书[Pro Spring 3](https://rads.stackoverflow.com/amzn/click/com/1430241071)。它有一段让我很困惑。这一段是关于春天的自动装配。这是一段摘录：

> 在大多数情况下，是否应该使用自动装配这个问题的答案肯定是“不！” 自动装配可以在小型应用程序中节省您的时间，但在许多情况下，它会导致不良做法并且在大型应用程序中不灵活。使用 byName 似乎是一个好主意，但它可能会导致您为类提供人工属性名称，以便您可以利用自动装配功能。Spring 背后的整个想法是，您可以按照自己喜欢的方式创建类并让 Spring 为您工作，而不是相反......
> 
> ...对于任何重要的应用程序，不惜一切代价避开自动装配。

我一直在我创建的应用程序中使用@Autowired 标签。有人可以解释它有什么问题以及我应该改用什么吗？

我现在如何处理大多数事情的一个小例子是：

```
@Service("snippetService")
public class SnippetService {

    @Autowired
    private TestService testService;

    public Snippet getSnippet() {
        return testService.getSnippet();
    }
} 
```

像这样“错误”地使用自动装配还是我错过了什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-16T18:06:51.563

我相信这里有两件事混淆了。本章中“自动装配”的意思是标记 bean 以便自动检测和注入依赖项。这可以通过设置“autowire”bean 属性来实现。

这实际上与使用`@Autowired`明确指示字段或设置器进行依赖注入的位置相反。

看看这里：[http](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-autowire) ://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-autowire 。

为了解释它，假设你有

```
public class SnippetService {

    private TestService testService;

    public Snippet getSnippet() {
        return testService.getSnippet();
    }

    public void setTestService(TestService testService) {
      this.testService = testService;
    }
} 
```

如果你定义了一个bean：

```
<bean class="mypackage.SnippetService" autowire="byType"/> 
```

spring 将尝试注入匹配类型的 bean，`TestService`在这种情况下，通过调用 setTestService setter。即使你没有使用`@Autowired`. 这确实很危险，因为某些 setter 可能不应该被 spring 调用。

`@Autowired`如果您设置 autowire="no"，除非用, `@Resource`,标记，否则不会注入任何内容`@Inject`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T18:00:54.403

你所拥有的没有任何问题，特别是如果你开始使用一种实现方式`TestService`。正如 Johan 所提到的，最好使用`@javax.annotation.Resource`which 也可以让您在需要时更具体（例如使用`name`or`type`属性）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T18:04:14.510

我在这里看到的唯一问题是你有点失去控制。例如，假设您`TestService`的应用配置中有两个或更多实例，并且您想使用其中一个。拥有`Autowire`make 比使用配置 XML 为您注入更棘手。这就是您的书试图指出的，即在此类需求更频繁的大型应用程序中变得困难/棘手。

如果你没有这种情况，我认为没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T19:20:57.360

如果您执行基于构造函数的自动装配，特别是如果您将协作者设为私有 final，则通过 XML 进行自动装配是完全安全且有用的。

几年前，当我在一个非常大的 spring 2.5 项目中执行上述操作时，作者说我很震惊。（当时注释支持在 JBoss 中不起作用）

# c - c 中的简单字符串列表正在泄漏内存（malloc 和 realloc）

> ID：12920607
> 
> 赞同：0
> 
> 时间：2012-10-16T17:53:23.460
> 
> 标签：c, xcode, malloc

问题是我无法释放它，控制台输出指针在 free 函数内部是相同的，当 realloc 调用时，xcode 在函数 StringList_add 的行中检测到。

```
typedef struct stringlist_s {
        int max_str;
        char **str;
}stringlist_t;

//functions
stringlist_t *StringList_new()
{
    stringlist_t *lst = (stringlist_t *)malloc(sizeof(stringlist_t));

    return lst;
}

void StringList_add(stringlist_t *str_list,char *str)
{
    if(!str)
        return;
    if(!str_list)
        return;

    str_list->str = (char **)realloc(str_list->str, sizeof(char *)  * (str_list->max_str+1));

    str_list->str[str_list->max_str] = (char *)malloc(strlen(str) + 1);

    memcpy(str_list->str[str_list->max_str], str, strlen(str) + 1);

    str_list->max_str++;
}

void StringList_release(stringlist_t *strList)
{
    if(!strList) {
        printf("Releasing empty pointer\n");
         return;
    }

    for(int i = 0 ; i < strList->max_str; ++i )
    {
        free(strList->str[i]);
        printf("pointer inside is %p\n",strList->str[i]);
    }

    printf("list before is  %p\n",strList);
    free(strList);
    printf("list  now is %p\n",strList);  //value is the same as previous printf

} 
```

我只是用它来测试上面的代码：

```
stringList_t *a = StringList_new();
StringList_add(a,"abc");
StringList_add(a,"edf");
StringList_release(a); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:58:13.857

一个问题是`StringList_new()`分配一个新的`stringList_t`但从不初始化它的成员。致电`realloc()`：

```
str_list->str = (char **)realloc(str_list->str, sizeof(char *)  * 
    (str_list->max_str+1)); 
```

既没有`str_list->str`也`str_list->max_str`没有被初始化。从参考页面[`realloc()`](http://en.cppreference.com/w/c/memory/realloc)：

> 它必须事先由 malloc()、calloc() 或 realloc() 分配，并且尚未用 free() 释放，否则，结果是未定义的。

与未初始化的指针一起使用时会出现这种情况。

改成：

```
stringlist_t *StringList_new()
{
    stringlist_t *lst = malloc(sizeof(*lst));
    lst->max_str = 0;
    lst->str     = NULL;

    return lst;
} 
```

不要强制转换`malloc()`or的返回值`realloc()`。传递一个`NULL`指针`realloc()`很好，它的行为就像`malloc()`在这种情况下一样。当使用`realloc()`将返回值存储在临时指针变量中以避免`realloc()`失败时的内存泄漏时：

```
char** tmp = realloc(str_list->str, sizeof(*tmp)  * (str_list->max_str+1));
if (tmp)
{
    str_list->str = tmp;
} 
```

注意我没有按照 C 标准使用`calloc()`所有`StringList_new()`位零不需要表示空指针。

# c# - How to asynchronously redirect ONLY standard error stream and not standard output stream of a process in C#, .net

> ID：12920608
> 
> 赞同：8
> 
> 时间：2012-10-16T17:53:30.240
> 
> 标签：c#, .net, process, io, io-redirection

I am writing an application in C# that at some point starts an application as a child process using the Process class with **Asynchronous IO redirection** as shown below:

```
private void AppLaunch_Click(object sender, RoutedEventArgs e)
{

  Process appProcess = new Process();
  appProcess.StartInfo.FileName = currAppPath;
  appProcess.StartInfo.Arguments = "";

  //Setup Redirection
  appProcess.StartInfo.UseShellExecute = false;
  appProcess.StartInfo.ErrorDialog = false;
  appProcess.StartInfo.RedirectStandardError = true;
  appProcess.EnableRaisingEvents = true;
  // Attach Output Handler
  appProcess.ErrorDataReceived += appProc_DataReceived;
  appProcess.Exited += appProc_Exited;
  buildLogConsoleOutputTxtbox.AppendText(currAppPath + "\n");

  appProcess.Start();
  appProcess.BeginErrorReadLine();

}
private void appProc_DataReceived(object sender, DataReceivedEventArgs e)
{
  if (!String.IsNullOrEmpty(e.Data))
  {
    this.appendLogText(e.Data);
  }
}

private void appProc_Exited(object sender, System.EventArgs e)
{
  Process proc = (Process)sender;
  // Wait a short while to allow all console output to be processed and appended
  Thread.Sleep(40);
  this.appendLogText("\n>>");
  proc.Close();
}

private void appendLogText(string logText)
{
  // Use a delegate if called from a different thread,
  // else just append the text directly
  if (buildLogConsoleOutputTxtbox.Dispatcher.CheckAccess())
  {
    // Thread owns the TextBox
    buildLogConsoleOutputTxtbox.AppendText(logText + Environment.NewLine);
  }
  else
  {
    //Invocation Required
    appendLogCallBack appendLog = new appendLogCallBack(buildLogConsoleOutputTxtbox.AppendText);
    buildlogScrollEnd buildlogscrl = new buildlogScrollEnd(buildLogConsoleOutputTxtbox.ScrollToEnd);
    buildLogConsoleOutputTxtbox.Dispatcher.BeginInvoke(appendLog, new object[] { logText + Environment.NewLine });
    buildLogConsoleOutputTxtbox.Dispatcher.BeginInvoke(buildlogscrl);
  } 
```

The Problem with this piece of code is that while I do get the **stderr** redirected properly to my textbox, This redirection seems to ***hide*** the process' **stdout** output, which I don't want redirected!

If I redirect stdout, I can see it redirected properly, but is it impossible to just redirect stderr and not stdout? I have looked around and googled regarding this topic but all discussions seem to be regarding redirecting stdout ... such as this : [How to asynchronously read the standard output stream and standard error stream at once](https://stackoverflow.com/questions/12566166/how-to-asynchronously-read-the-standard-output-stream-and-standard-error-stream)

I would be grateful for any help regarding this!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:49:07.430

这是不可能的 - 输出和错误句柄同时重定向。MSDN 文章[STARTUPINFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686331%28v=vs.85%29.aspx)描述了`STARTF_USESTDHANDLES`标志。

但有一个好消息。保留子进程输出仍然是可能的。你只需要：

*   重定向子进程输出
*   附加到子进程控制台
*   将子进程输出写回其控制台

所以在进程开始调用之后

```
[DllImport("Kernel32.dll", SetLastError = true) ]
static extern uint AttachConsole(int pid); 
```

然后在您的`DataReceived`处理程序中使用简单的 Console.WriteLine。

# c++ - using std::shared_ptr with a protected constructor\destructor

> ID：12920609
> 
> 赞同：5
> 
> 时间：2012-10-16T17:53:33.213
> 
> 标签：c++, c++11, shared-ptr

> **Possible Duplicate:**
> [How do I call ::std::make_shared on a class with only protected or private constructors?](https://stackoverflow.com/questions/8147027/how-do-i-call-stdmake-shared-on-a-class-with-only-protected-or-private-const)

I want to create a shared pointer to a class, and have a factory method that returns it while keeping the constructor\destructor protected. since the shared pointer can't access the the constructor or the destructor, I get compiler errors.

I am using llvm 4.1, but I am looking for a solution that can be compiler independent (besides making the constructor\destructor public).

this is a code sample:

```
class Foo
{
public:
    static std::shared_ptr<Foo> getSharedPointer()
    {
        return std::make_shared<Foo>();
    }

protected:
    Foo(int x){}
    ~Foo(){}

}; 
```

any Ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:01:06.470

只需自己分配指针，而不是调用 make_shared：

```
static std::shared_ptr<Foo> getSharedPointer()
{
    return std::shared_ptr<Foo>(new Foo);
} 
```

但是请注意，这需要公开析构函数。

# mysql - MYSQL 检索多个用户的共同好友

> ID：12920611
> 
> 赞同：0
> 
> 时间：2012-10-16T17:53:46.567
> 
> 标签：mysql

我正在创建一个小型社交网络，当用户在其中发布任何内容时。我会得到他推荐帖子的朋友的 id。现在的问题是，被推荐的用户可以介于`1 or 10`. 所以现在假设一个用户发布了一个状态并推荐了 6 个朋友。

现在我需要在发布状态的用户和被推荐的人之间找到共同的朋友。意思是假设发布状态的用户有id `1`，被推荐的人有`2,3,4,5,6,7`。

所以查询会做什么，它将在`1 and 2`那时找到共同的朋友`1 and 3`，`1 and 4`直到 7 点。所以最后我会得到一个结果，其中包含发布的用户和被推荐的人之间的共同朋友（或标记我们可以说）。

我有两张桌子`User`和`Friends`

```
 User Table:                                Friends Table:
--------------------------                 -----------------------------------
 UserID    Name                            friendsid     friendname     userid
--------------------------                 -----------------------------------
 1097517748         User1                       3          friend1     536772587                     
 100003052455644    User2                       8          friend2     100003052455644
 536772587          User3                       8          friend3     1097517748
 4                  User4                       3          friend4     100003052455644 
```

现在，friends 表可以包含用户表中存在或不存在的不同人。在此示例中，用户 2 和 3 有共同的 id 为 8 的朋友。我有我的人，但那个人 id 即`8`必须出现在用户表也是。这仅在用户 ID 2 和 3 之间。我将获得几个用户 ID，并且我找到了与发布状态的人推荐的所有朋友的共同朋友。

我希望我已经清除了它。如果我了解查询的想法，我可以使用 php 为不同数量的推荐朋友动态生成它。

到目前为止，我已经编写了这个查询。

```
SELECT count(f1.friendsid) FROM friends AS f1
INNER JOIN friends AS f2 ON f1.friendsid = f2.friendsid
WHERE f1.userid = 100003052455644
AND f2.userid = 1097517748 
```

但这只是给我带来了两个用户之间的共同朋友。当我添加第三个人时，让我们说`f3`并将其与`f1`它进行比较不会带来任何结果，并且此查询的另一个问题是它没有验证共同朋友 id 是否存在于用户表与否。添加第三个人后。

```
SELECT count(f1.friendsid) FROM friends AS f1
INNER JOIN friends AS f2 ON f1.friendsid = f2.friendsid
INNER JOIN friends AS f3 ON f1.friendsid = f3.friendsid
WHERE f1.userid = 100003052455644
AND f2.userid = 1097517748
AND f3.userid = 536772587 
```

这个查询不会带来任何结果。所以我想创建一个查询来完成这一切。

**编辑：**

实际上我正在使用 facebook connect 并且当用户登录时我将所有用户的朋友保存在我的数据库中，用户表将只包含那些在我的网站上注册的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:04:13.150

我终于弄明白了。查询是

```
SELECT DISTINCT(friendsid) FROM (
SELECT DISTINCT(f1.friendsid) FROM friends AS f1 
INNER JOIN friends AS f2 ON f1.friendsid=f2.friendsid 
and f1.userid = 100003052455644 and f2.userid =1097517748 
INNER JOIN user ON  f2.friendsid = user.userid and f1.friendsid = user.userid 
UNION ALL
SELECT  (f1.friendsid) FROM friends AS f1 
INNER JOIN friends AS f2 ON f1.friendsid=f2.friendsid 
and f1.userid = 100003052455644  and f2.userid =536772587
INNER JOIN user ON  f1.friendsid = user.userid and f2.friendsid = user.userid 
UNION ALL
SELECT DISTINCT(f1.friendsid) FROM friends AS f1 
INNER JOIN friends AS f2 ON f1.friendsid=f2.friendsid 
and f1.userid = 100003052455644  and f2.userid =694250830
INNER JOIN user ON  f1.friendsid = user.userid and f2.friendsid = user.userid 
) a 
```

此查询将查找发布状态的用户和他推荐的用户之间所有共同朋友的 id。

具有id的用户`100003052455644`是发布状态的人，所有其他人都是他推荐的朋友。`DISTINCT`这将确保id的唯一性和不重复。这是他推荐的3个人。我们可以`UNION ALL`动态添加部分设置id，这将帮助我们创建一个动态查询来检索不同数量的推荐人的共同朋友。

# javascript - 谷歌地图地理编码器返回相同的结果

> ID：12920613
> 
> 赞同：1
> 
> 时间：2012-10-16T17:53:54.203
> 
> 标签：javascript, google-maps, google-maps-api-3, geocoding, google-geocoder

我正在使用 Google Maps API Geocoder 对地址进行地理编码。

**问题：**当服务器进行地理编码时，我经常（并非总是）得到具有**完全相同**lat/lng 的结果，这是市中心的 lat/lng。

但是，当我在浏览器上调用完全相同的 URL 时，我总是得到正确的 lat/lng 返回！

知道为什么当从服务器和我的浏览器调用相同的 URL 时它返回错误和不同的结果吗？

**查询网址**

```
http://maps.googleapis.com/maps/api/geocode/json?address=6954 N Greenview, Chicago, IL&sensor=false&region=us 
```

**服务器上的结果** *（使用 curl）*

```
"lat": 41.8781136
"lng": -87.6297982 
```

**浏览器上的结果**

```
"lat" : 42.0082060,
"lng" : -87.66836499999999 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:27:38.407

我也相信这是地区偏见，但是您是否尝试过比较结果的名称和地址？这发生在我身上，有时我得到地址而不是名称 lat lng 对。我建议你也试试这个来自谷歌的[网址 http://maps.google.com/maps/geo?q=](http://maps.google.com/maps/geo?q=)查看我的答案：[Google Maps API: Geocode return different co-ordinates then Google maps](https://stackoverflow.com/questions/12788664/google-maps-api-geocode-returns-different-co-ordinates-then-google-maps/12790012#12790012)。

# vb.net - VB.NET 中正确的表单声明是什么？

> ID：12920614
> 
> 赞同：4
> 
> 时间：2012-10-16T17:53:54.247
> 
> 标签：vb.net

我只是在 Microsoft 升级向导的帮助下将一个项目从 VB6 移植到 VB.NET。

一种形式自动升级到

```
Friend Partial Class frmAudFeedSentenceEdit
    Inherits System.Windows.Forms.Form 
```

但是当我在 VB.NET 的新项目中添加一个新表单时，它被声明为

```
 Public Class frmAudFeedSentenceEdit 
```

（没有继承 System.Windows.Forms.Form）。

请问哪一个是正确的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:58:27.937

当您使用 Visual Studio 制作表单时，它会将表单信息放入 2 个单独的文件中。

你看到的部分：

```
Public Class frmAudFeedSentenceEdit 
```

只是主文件中的声明，您通常会在其中工作。

但是，创建的第二个文件 ( `frmAudFeedSentenceEdit.Designer.vb`) 将具有：

```
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Partial Class frmAudFeedSentenceEdit
    Inherits System.Windows.Forms.Form 
```

如您所见，它仍然是一个`Partial Class`，但该`Inherits`语句被放置在设计器为您生成的文件中。

如果您在`Class View`窗口中查看，浏览到您的表单，然后双击，您可以看到这一点`InitializeComponent()`（因为这个 Sub 在设计器文件中定义）。

# javascript - IntelliJ 可以在 Internet Explorer 中运行客户端 javascript 代码吗？

> ID：12920619
> 
> 赞同：2
> 
> 时间：2012-10-16T17:54:14.527
> 
> 标签：javascript, internet-explorer, debugging, intellij-idea

当代码在 Chrome 或 Firefox 上运行时，IntelliJ 支持开箱即用的客户端 javascript 调试。

不幸的是，Douglas Crockford 在 49:34 在[http://www.youtube.com/watch?v=UTEqr0IlFKY&feature=youtube_gdata_player](http://www.youtube.com/watch?v=UTEqr0IlFKY&feature=youtube_gdata_player)中表达的愿望可能仍未得到答复，而 IE9 将继续存在。

那么，可以将 IntelliJ 配置为在 IE9 上运行客户端 JS 代码并能够对其进行调试吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:05:11.087

不，我看不出这是可能的。Intellij IDEA 内的配置对话框中没有 IE 选项，我无法从 JetBrains 找到任何说明现在或将来可能的文档。但事情可能会改变。

# android - 尝试为 Android 构建 Xerces-C++

> ID：12920620
> 
> 赞同：0
> 
> 时间：2012-10-16T17:54:24.723
> 
> 标签：android, c++, build, xml-parsing, xerces

我正在寻找一种为 Android 构建 Xerces-C++ 库的方法，我需要它作为 Delta3D 游戏引擎的依赖项，但找不到任何相关信息。我非常感谢专业的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-13T14:56:40.107

[您可以从此处](https://github.com/pelya/commandergenius/tree/sdl_android/project/jni/xerces)复制带有 Android 构建脚本的 xercesc 库。
只需将其复制到您的*jni*文件夹并运行*ndk-build 即可*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:13:46.647

大多数 Android 开发都是用 Java 完成的。Delta3D 游戏引擎使用 C++ 编写，这意味着您需要从 Android Native Development Kit (NDK) 开始。常见问题解答声称该库使用跨平台依赖项，因此，理论上您应该能够在 Android 上使用它。但是，它是为 OpenGL 编写的，而不是 OpenGL ES，后者是 Android 中使用的子集。这可能会导致问题。另一个问题是内存占用。可能需要做大量工作才能使其在 Android 下编译。您可能会考虑使用已经移植到 Android（或为其编写）的库，而不是移植所需的所有工作，更不用说编写游戏了。除非，你已经有一个用这个游戏引擎编写的游戏，

# matlab - Matlab 对角线加一

> ID：12920631
> 
> 赞同：1
> 
> 时间：2012-10-16T17:55:23.087
> 
> 标签：matlab

假设我有一个矩阵 A，我想得到矩阵`[A 0; 0 1]`。是否有内置功能可以做到这一点？

所以如果我的矩阵是`[2 3; 1 4]`，我会回来`[2 3 0; 1 4 0; 0 0 1]`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T17:56:57.833

最简单的方法是：

```
newA = A;

newA(end+1,end+1) = 1; 
```

这是有效的，因为您可以在数组外部进行索引以进行赋值，因为`end`指示最后一个元素（此处为行和列），并且因为当您增加数组时，Matlab 用零填充。如果你只是想成长`A`，你甚至可以跳过创造`newA`，当然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:06:19.483

我总是使用矩阵连接来解决这样的问题

所以对于你的例子：

```
A = [2 3; 1 4]
A = [A A(:,1)*0; A(1,:)*0 1] 
```

生产

```
A =

     2     3     0
     1     4     0
     0     0     1 
```

这个技巧的好处是它非常灵活，你可以很容易地进行各种转换。例如

```
A = [2 3; 1 4]
A = [1 A(1,:)*0; A(:,1)*0 A] 
```

生产

```
A =

     1     0     0
     0     2     3
     0     1     4 
```

# twisted - 我应该如何命名 twisted.internet.defer.Deferred 的实例？

> ID：12920632
> 
> 赞同：3
> 
> 时间：2012-10-16T17:55:25.393
> 
> 标签：twisted, deferred

我正在使用 Twisted 编写代码，并且无法为我的 Twisted Internet Deferred 提供一个合理的变量名。这是我的候选人：

*   `d`: 太通用，太短，违反了 Pylint 规则 C0103。
*   `def`: 与内置函数定义冲突。
*   `defer`: 与模块 twisted.internet.defer 冲突
*   `deferred`: 好的，但是很长
*   `cb`: 还是太短了，违反了pylint C0103，和很多回调方法名冲突。
*   `cback`: 太奇怪了？
*   `callback`: 与方法 Deferred.callback() 冲突

我正在寻找其他建议。似乎大多数 Twisted 示例代码都使用“d”，这对于简单的调用来说很好，但是当您将 Deferred 传递给方法并将它们存储为成员变量时，它的描述性实在是太强了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:58:14.637

有意义地命名是很好的`Deferred`——当然你会命名任何变量。

以它的触发信号来命名它是一件好事。

一些例子：

```
pageGotten = getPage('http://...')
whenAuthenticated = client.authenticate(...)
taskDone = doTask(...) 
```

# svg - 变换 SVG 组以创建透视图（“梯形变换”）

> ID：12920636
> 
> 赞同：5
> 
> 时间：2012-10-16T17:55:49.207
> 
> 标签：svg, transformation

有没有办法创建一个 SVG 变换，将一个正方形变成一个等腰梯形，从而产生透视错觉？

我有一个项目（[在此处可见](http://sparks.staging.concord.org/sparks-content/activities.html#zzrrdmmoscope)），其中我想要倾斜的 svg（面包板）中有一个元素组，以便底部看起来更接近用户。

我可以使用“-webkit-transform: perspective(1000px) rotateX(40deg);”之类的 CSS 转换（在支持的浏览器中）转换顶级 SVG DOM 元素，但这在嵌套的 group 元素中不起作用.

任何建议表示赞赏，谢谢！

# sublimetext2 - Sublime Text 2 - 插件没有“安装”选项

> ID：12920640
> 
> 赞同：2
> 
> 时间：2012-10-16T17:55:53.933
> 
> 标签：sublimetext2

按 Shift + Command + P 调出文本输入后，当我键入“安装”时，选项列表中实际上没有返回任何内容。

我相信当我键入“安装”时，这应该会出现类似于“包控制：安装包”选项的内容

由于这个原因，我无法安装插件，并希望得到一些帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:10:52.837

Package Control 必须先单独安装。说明在这里：

[http://wbond.net/sublime_packages/package_control/installation](http://wbond.net/sublime_packages/package_control/installation)

# git - git update-index --assume-unchanged 返回“致命的无法标记文件”

> ID：12920652
> 
> 赞同：159
> 
> 时间：2012-10-16T17:56:25.807
> 
> 标签：git

我在[这篇](https://stackoverflow.com/q/8598937)文章中遇到了与 OP 相同的问题，但我不明白标记为正确的答案（我没有看到它解释了如何解决这种情况）

我这样做并得到这个错误：

```
$ git update-index --assume-unchanged web.config
fatal: Unable to mark file web.config 
```

1.  该文件已添加到存储库

2.  它不在`.git/info/exclude`

3.  它`.gitignore`不在（它是，但我把它拿出来，然后强制使用 web.config 添加`git add -f web.config`，提交，并将这些更改推送到 repo）

4.  当我做 Git ls-files -o 它不存在

那么我能做些什么来修复呢？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-11-10T04:30:31.917

我遇到了和你一样的问题，并且按照你上面指出的四个步骤，得到了相同的结果。这包括我的文件在执行时被列出的事实`git ls-files -o`。但是在我的情况下，我也尝试对执行`git update-index --assume-unchanged`时未列出的文件执行`ls-files -o`，但我仍然收到相同的错误“ `fatal: Unable to mark file`”。

我认为可能是一个错误，并下载了最新版本的 git，但这并没有帮助。

我终于意识到**这个命令是区分大小写的！这包括完整路径和文件名。** 更新目录的路径以便使用正确的大小写指定完整路径后，命令正确执行。

请注意，这是针对 Windows 的 Git，因此您的结果可能因其他平台而异。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2014-09-18T10:47:57.113

我在 Mac 上遇到了同样的问题。区分大小写对我来说不是问题 - 问题是我需要先重置我的 git：

问题：

```
 git update-index --assume-unchanged index.php
 fatal: Unable to mark file index.php 
```

解决方案：

```
git reset HEAD
Unstaged changes after reset:
M   index.php
git update-index --assume-unchanged index.php 
```

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2016-09-11T09:12:46.027

在我的情况下，我标记的树是一个目录，而不是像你这样的文件，我在它的名字后面缺少了正斜杠。

**不正确 -**

```
git update-index --assume-unchanged directory-name 
```

**正确的 -**

```
git update-index --assume-unchanged directory-name/ 
```

***注意****最后的正斜杠（/）。*

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-12-02T13:46:54.140

致命：无法标记文件 Localization/el-GR.js

你可以做的是：

1.  移动到文件在本地（在 GITBASH 中）中存在的正确路径
2.  更新索引`$git update-index --assume-unchanged <file name>`

这对我有帮助！:)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-07-13T06:35:18.483

确保将文件添加到 git repo，如果没有将文件添加到 git repo，然后尝试它会起作用。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-08-25T22:34:37.463

如果您的路径有空格，即使您的大小写正确，您也可能会收到此错误。

这会导致“致命”错误：

```
git update-index --assume-unchanged code/Solution Files/WebEssentials-Settings-json 
```

要修复它，只需在路径周围添加引号。

```
git update-index --assume-unchanged "code/Solution Files/WebEssentials-Settings-json" 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-12-10T14:49:04.690

我的问题是，我尝试了带有 * 通配符的命令，假设它是递归的，但事实并非如此。

所以我所做的是

```
$ git reset HEAD
Unstaged changes after reset: 
M   .gradle/1.9/taskArtifacts/cache.properties.lock
M   .gradle/1.9/taskArtifacts/fileHashes.bin
M   .gradle/1.9/taskArtifacts/fileSnapshots.bin
M   .gradle/1.9/taskArtifacts/outputFileStates.bin
M   .gradle/1.9/taskArtifacts/taskArtifacts.bin 
```

执行

```
$ git update-index --assume-unchanged .gradle/1.9/taskArtifacts/* 
```

当时为我工作，并没有导致 OP 和我的问题。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-07-13T11:02:42.190

就我而言，我尝试使用上述任何方法，但没有运气。

经过多次尝试，我只是想将我的文件添加到索引中。

```
git add myfile.php 
```

Git拒绝了这个动作，但他建议我强行做。

```
git add myfile.php -f 
```

这对我有用。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-12-11T15:58:21.727

`--assume-unchanged`是关于慢速文件系统的，用户承诺 Git 不需要检查这个文件，因为 Git 可以假设它没有改变。但是一些命令仍然会检查并产生“惊喜”！

不要在更改的文件上使用。

很抱歉成为那个消息的带来者（我正在处理一个补丁来更改那个文档）。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-03-30T23:48:34.673

确保您已签入“web.config”。

如果不是，您将收到此错误消息。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-03-09T18:15:31.520

使用此命令的一个常见错误是试图假设 git 已经没有跟踪文件或忽略文件。

首先确保通过运行跟踪文件

```
git ls-files | grep relative_path/to/file 
```

如果它没有显示您的文件，那么您需要先添加它：

```
git add relative_path/to/file 
```

如果这显示了您的文件，或者您已经将该文件添加到 git，那么您应该能够正常运行 git 假设命令：

```
git update-index --skip-worktree relative_path/to/file 
```

或文件夹

```
git update-index --skip-worktree relative_path/to/folder/ 
```

您可以通过运行检查您的文件是否被假定为被忽略

```
git ls-files -v | grep ^S 
```

S 字符代表跳过的文件。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-03-23T11:56:28.310

所以当我使用这个时我遇到了同样的错误：

```
git update-index --assume-unchanged appsettings.Development.json 
```

所以我把它改成了

```
git update-index --assume-unchanged appsettings.development.json 
```

我实际上一开始尝试了很多方法，但我最终使用了这个。所以我猜它区分大小写

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-11-19T22:42:49.887

我在尝试取消跟踪 *.orig 文件时遇到了这个问题。

这就是我为取消跟踪他们所做的：

```
$git reset -- *.orig 
```

如果这不起作用：

```
$git clean -fd 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-06-01T16:20:35.987

也许对某人有用。我遇到了同样的问题，没有语法问题，没有带空格的名称，没有路径问题，并且 git reset 命令不起作用。我是从 apache www 中的文件夹提交的，并且 apache 服务已停止。再次启动apache服务，错误消失了

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-10-19T14:55:25.133

对于所有未来的访客。以上都没有解决我的问题。我意识到`.gitignore`文件必须放在正确的目录中。就我而言，一旦我移动`.gitignore`到应用程序的根目录，问题就解决了。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-11-12T03:44:27.720

检查要标记的文件是否存在和拼写是否正确，尤其是文件路径和文件分隔符。windows系统和linux系统的文件分隔符方向不同。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-08-18T11:50:07.983

我发现有时这不起作用，因为您已经将文件提交到您的 .gitignore 并进行了推送或拉取。您只需要进行推送，即使您在本地修改文件，后续提交也应忽略您的文件。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-11-27T17:43:26.323

有同样的问题，没有其他工作（我的文件被跟踪，而不是在 gitignore 中）。我意识到我从上面几行的终端输出中复制了文件名，这使得它在文件名之后复制了空格。即使看起来没有空间，最后我还是有很多空间。因此，仅复制文件路径并将其保存在双引号中，这会有所帮助。我也做了`git reset HEAD`第一个。

```
git update-index --assume-unchanged "app/src/main/java/com/username/projectName/Utils.kt" 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2019-10-12T09:12:10.483

我在 Windows 中遇到了与 cygwin 相同的问题。给出完整的文件路径

# algorithm - HSV 颜色到 RGB 颜色算法 - 线性插值颜色

> ID：12920653
> 
> 赞同：2
> 
> 时间：2012-10-16T17:56:28.687
> 
> 标签：algorithm, math, graphics, rgb, hsv

开发一种将 HSV 颜色值转换为 RGB 颜色的算法，并解释其正确工作的方式和原因。然后考虑两种 HSV 颜色 h1 = (156, 0.625, 0.8) 和 h2 = (300, 0.6, 0.5) 并将它们转换为 RGB（给出 r1 和 r2）、CMY (c1, c2) 和 CMYK (k1, k2 ）。最后，计算线性插值颜色 h3 = 0.3h1 + 0.7h2 和 r3 = 0.3r1 + 0.7r2 并在将 r3 转换为 HSV 后进行比较。

我从[Wikipedia](http://en.wikipedia.org/wiki/HSL_and_HSV#From_HSV)中找到了公式，但我不知道我必须做什么才能得到正确的结果。我对 CMY 和 CMYK 以及我也必须计算的线性插值颜色感到困惑。因此，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:10:10.360

在进行颜色转换时，这个网站在数学方面帮助了我很多： [http ://easyrgb.com/index.php?X=MATH](http://easyrgb.com/index.php?X=MATH)

请记住，您需要配置文件才能对 CMYK 和 RGB 值具有任何意义。

# scala - 在 Scala 和 SBT 中调试较长的编译时间

> ID：12920661
> 
> 赞同：14
> 
> 时间：2012-10-16T17:56:59.137
> 
> 标签：scala, sbt

在我的 Scala/SBT 项目中，我有一个文件最多需要 5（！）分钟来编译。所有其他的可以在几秒钟内编译。这使得开发非常痛苦。

我确定我在滥用一些 Scala 结构，但我不知道如何调试它。如何在 Scala 中调试长编译时间？

我正在使用 Scala 2.9.2 和 SBT 0.11.2

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-17T12:20:41.067

您可以尝试以下 Scala 编译器选项：

*   `-Ystatistics` 打印编译器统计信息

找到一个花费最多时间的阶段。然后，试试这些：

*   `-Xprint:<phase>` 打印出程序后或“全部”
*   `-Yshow-trees` 与 -print:phase 结合使用时显示详细的树
*   `-Ydebug` 输出调试信息
*   `-Ypmat-debug` 跟踪所有模式匹配器活动。

要直接从 sbt 控制台启用这些设置，您可以使用`set scalacOptions in ThisBuild += "-Ystatistics"`, 或多个，`set scalacOptions in ThisBuild ++= Seq("-Yshow-trees", "-Ydebug")`

# android - Flex 设备型号和品牌信息

> ID：12920662
> 
> 赞同：0
> 
> 时间：2012-10-16T17:57:07.537
> 
> 标签：android, ios, apache-flex, flex4.5, flex4.6

是否可以检测设备型号并从 flex 4.5 sdk 应用程序（如三星 Galaxy Tab 2.0 或 Apple iPad 4 等）中获取信息，

谢谢

法亚兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:47:26.613

[flash.system.Capabilities](http://help.adobe.com/en_US/air/reference/html/flash/system/Capabilities.html)是获取有关设备功能的某些信息的唯一方法：即 os - 操作系统。但是，我认为它不符合您的要求。

另一种可能性是使用[ANE](http://help.adobe.com/en_US/air/build/WS597e5dadb9cc1e0253f7d2fc1311b491071-8000.html) s。它们允许您使用本机代码（Android、iOS、Win、OSX 等）扩展您的应用程序。您必须在本机代码中实现您的解决方案并将其打包为 ANE（或者很幸运并在网络上搜索已经存在的可以满足您需求的 ANE）。

更多信息： http: [//www.adobe.com/devnet/air/native-extensions-for-air.html](http://www.adobe.com/devnet/air/native-extensions-for-air.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T10:40:46.433

你可以试试：

[Android 原生设备信息。](https://github.com/funky-monkey/Android-Native-Device-Info)

> Android 原生设备信息：获取原生设备信息，如操作系统、型号、品牌、SDK 版本和 CPU。这些 AS3 类使用 Adob​​e AIR for Android 来获取名为 /system/build.prop 的 Android 系统文件，对其进行解析并将其值存储在一个不错的值对象中供您使用。此解析信息主要用于分析。

# web-services - 为所有资源启用 CORS 是否有任何负面影响？

> ID：12920664
> 
> 赞同：4
> 
> 时间：2012-10-16T17:57:22.663
> 
> 标签：web-services, cors

CORS 是个好东西。

尤其是当我们有从不包含我们域名的基于云的 CRM 调用的 Web 服务时。

但是，它是一种纯粹的商品吗？我感到压力让我们的 ReST-ish 网络服务中的所有资源都提供 CORS 标头。

我很担心 CORS 可能会在我们的设计中暴露一个“漏洞”……而我的直觉是，信息隐藏是使编程不会演变成意大利面条式代码的原因。

是否有任何关于 CORS 化您的资源何时走得太远的文献？（我还没有找到，但我可能没有在正确的地方寻找）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-10T16:30:48.657

根据 WhatWG，`Access-Control-Allow-Origin: *` [只要您的应用不在防火墙后面，使用就是安全的](https://fetch.spec.whatwg.org/#basic-safe-cors-protocol-setup)：

> 即使资源暴露了基于 cookie 或 HTTP 身份验证的附加信息，使用上述标头也不会泄露它。它将与 XMLHttpRequest 等 API 共享资源，就像它已经与 curl 和 wget 共享一样。
> 
> 因此，换句话说，如果无法从使用 curl 和 wget 连接到网络的随机设备访问资源，则不包含上述标头。但是，如果可以访问它，那么这样做是完全可以的。

我的理解是除非设置了`withCredentials`标志的请求，否则不会发送 auth/cookies，如果设置了`withCredentials`标志，则不允许对资源进行通配符。

换句话说，如果`Access-Control-Allow-Origin`没有将发送域列入白名单，则永远不会提供身份验证凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:46:35.773

与软件工程（和生活中）的大多数事情一样，答案取决于上下文。特别是**API**服务内容和访问 API的**人员的上下文。**

API 服务的数据类型是什么？它是否特定于特定用户？它是用户敏感的还是时间敏感的？它需要身份验证吗？

谁在访问 API？是对所有人开放，还是只有一个人/组织？用户将使用哪些客户端库来访问 API？从 Web 浏览器和 JavaScript 访问重要吗？

最后一个问题是最重要的：如果您的用户不需要从 Web 浏览器访问数据，那么 CORS 可能不适合您的 API。

想象一个图表，x 轴为“用户”，y 轴为“数据”，每个轴的范围从“受限”到“开放”：

```
 ^ Open
               |
               |
               |
               |
               |
USERS <------------------->
  Restricted   |        Open
               |
               |
               |
               |
               v Restricted
              DATA 
```

您的数据和用户需求越开放（右上象限），CORS 就越适合您的 API。但是，这只是一般规则，您需要根据上述问题评估您自己的 API。

# c - 在C中获取鼠标点击的坐标

> ID：12920667
> 
> 赞同：1
> 
> 时间：2012-10-16T17:57:32.170
> 
> 标签：c, mouse, dos, turbo-c

我在谷歌上找到了这个头文件来在 C 程序中执行鼠标相关事件，但我不知道 C 中`int86` `union REGS i,o;`还有哪些其他`int86`类型的函数？我正在使用 Windows 操作系统和 Turbo C。

```
#include<conio.h>
#include<stdio.h>
#include<dos.h>

initmouse();
void showmouseptr();
void restrictmousept(int,int,int,int);
void getmousepos(int *,int *,int *);
void hidemouseptr();

union REGS i,o;
initmouse()
{
     i.x.ax=0;
     int86(0x33,&i,&o);
     return(o.x.ax);
}
void showmouseptr()
{
   i.x.ax=1;
   int86(0x33,&i,&o);
}
void restrictmouseptr(int x1,int y1,int x2,int y2)
{
   i.x.ax=7;
   i.x.cx=x1;
   i.x.dx=x2;
   int86(0x33,&i,&o);
   i.x.ax=8;
   i.x.cx=y1;
   i.x.dx=y2;
   int86(0x33,&i,&o);
}
void getmousepos(int *button,int *x,int *y)
{
  i.x.ax=3;
  int86(0x33,&i,&o);
  *button=o.x.bx;
  *x=o.x.cx;
  *y=o.x.dx;
}

void hidemouseptr()
{
   i.x.ax=2;
   int86(0x33,&i,&o);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:05:03.590

这看起来像是 MS-DOS 使用 x86 中断调用系统函数来获取鼠标坐标的旧代码。如果这段代码在任何现代计算机的命令提示符下仍然有效，我会感到惊讶。事实上，包括 dos.h 在内的顶部头文件会泄露这一点。

in86() 是在 DOS 模式下“中断”CPU 的方式。这是现代操作系统中调用函数的一种方式。更多信息： [http ://wiki.answers.com/Q/What_is_the_INT86_function_in_C_programming](http://wiki.answers.com/Q/What_is_the_INT86_function_in_C_programming)

联合是 C 语言中定义可以以不同方式访问的数据的方法。更多信息： [http](http://www.go4expert.com/forums/showthread.php?t=15) ://www.go4expert.com/forums/showthread.php?t=15 。

目前尚不清楚您要做什么，更不用说您在什么操作系统下运行了。您可能想先选择一种语言（C# 可能是一个好的开始，假设您使用的是 Windows），然后查看 WinForms 的基类库以了解如何响应鼠标事件。WinForms 上有很好的教程会教你如何响应鼠标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:25:48.700

丢弃该代码：它是旧的 16 位 DOS，可能不是您想要的。

看来您对 C 语言比较陌生。在这种情况下，更好的建议是*好好学习该语言*；检查站点以获取良好的学习参考。Dennis Ritchie 和 Brian Kernighan 所著的“The C Programming Language”是一个很好的起点。

`int86`话虽如此， “C”中没有函数。这些是 Borland Turbo C 扩展。这就是在 DOS 中操纵鼠标的方式，但现在情况不同了。

请注意，从根本上说，C 语言只是一种编程语言。它旨在表达算法。但是，C 语言标准也为您提供了一个*标准库*：一组您可以使用的预定义类型、函数和宏，以节省时间和可移植性。这个库解决了一些基本功能，鼠标输入处理不是其中之一。

换句话说，在你学习了 C 之后，你将准备好处理特定操作系统的 API。这是必需的，因为 C 标准库没有提供任何方式来操作任何类型的输入设备。您还将学习有关如何在现代操作系统中处理输入的一些基础知识。例如，要处理鼠标输入，您很可能需要创建一个*窗口*（或*小部件*）以接收鼠标事件——这意味着您必须阅读一些有关底层窗口 API 的信息。

有一些库可以为您访问系统的 API 并找出差异，为您提供编程替代方案。不过，这与直接学习和使用系统的 API 应该没有什么不同，除了可能是为了增强可移植性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T18:04:51.403

int86 函数调用 DOS 鼠标中断 33h。dos 中断是特定于 msdos 操作系统的，因此您的代码只能在 msdos 下使用。'union REGS' 是用作 DOS 中断参数的输入和输出寄存器。DOS 中断类似于其他操作系统中的系统调用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-20T09:58:24.393

`dosbox`如果你想`turbo C`在 Windows/Linux 等下运行程序， 你可以使用

例如，在 Windows 上，只需创建一个运行批处理脚本的桌面链接来运行您的程序`dosbox`，这就是我认为 Steam 版本的 Doom 的工作方式

# android - android自定义组件布局

> ID：12920673
> 
> 赞同：0
> 
> 时间：2012-10-16T17:58:11.950
> 
> 标签：android, layout, custom-component

我想将我的自定义添加`ImageView`到 xml 布局中。

**主.xml：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.android.gag.TouchImageView
        android:id="@+id/Image1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:adjustViewBounds="true"
        android:clickable="true"
        android:scaleType="center" />

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

`TouchImageView`，顾名思义，`extends`就是`ImageView`类。

`Main.java`

`touchImageView = (TouchImageView)findViewById(R.id.Image1);`

**我的应用程序崩溃。日志输出：**

```
10-16 20:38:20.275: E/AndroidRuntime(11354): FATAL EXCEPTION: main
10-16 20:38:20.275: E/AndroidRuntime(11354): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.gag/com.android.gag.Main}: android.view.InflateException: Binary XML file line #6: Error inflating class com.android.gag.TouchImageView
10-16 20:38:20.275: E/AndroidRuntime(11354):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
idRuntime(11354): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class com.android.gag.TouchImageView
10-16 20:38:20.275: E/AndroidRuntime(11354):    at android.view.LayoutInflater.createView(LayoutInflater.java:589)
10-16 20:38:20.275: E/AndroidRuntime(11354):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680) 
```

请问，谁能帮帮我？我是初学者，所以像''[用“Android 库项目”替换“类库”](https://stackoverflow.com/questions/3868345/android-defining-custom-component-layouts-in-xml) ''这样的答案是没有意义的，因为它们太模糊了，我不知道从哪里开始，去哪里。

**编辑：**链接到我的[TouchImageView 类](https://dl.dropbox.com/u/43107774/TouchImageView.java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:30:42.807

您的自定义 View 类的代码缺少两个构造函数。来自[View 类的 Android 文档](http://developer.android.com/reference/android/view/View.html)：

```
View(Context context, AttributeSet attrs) 
```

从 XML 扩充视图时调用的构造函数。

```
View(Context context, AttributeSet attrs, int defStyle) 
```

从 XML 执行膨胀并应用特定于类的基本样式。

它崩溃了，因为它找不到它需要的构造函数，所以它不能膨胀视图。

为您的 TouchImageView 类实现这两个构造函数，看看问题是否消失。

# android - 如何使用 java 代码将 completionThreshold 设置为 AutoCompleteTextView？

> ID：12920677
> 
> 赞同：3
> 
> 时间：2012-10-16T17:58:19.043
> 
> 标签：android, android-layout, android-view, autocompletetextview, layoutparams

我有这个 AutoCompleteTextView：

```
AutoCompleteTextView a = new AutoCompleteTextView(this); 
```

我需要将 completionThreshold 标志值设置为 1，并且我想学习用 java 代码来做这件事。我在谷歌和stackoverflow上搜索，我没有找到路。

我只需要这样做： `android:completionThreshold="1"`使用 java 代码。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T18:00:47.040

使用 setThreshold(int) 方法

更多信息[setThreshold](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html#setThreshold%28int%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-14T18:21:09.593

您还可以在相应的 XML 文件中添加以下行：

```
android:completionThreshold="1" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-26T04:56:49.897

上面的代码将以编程方式将完成阈值设置为 1。

```
 survey.setThreshold(1); 
```

# c# - 表单身份验证和 ASP.NET 成员身份会话超时

> ID：12920680
> 
> 赞同：0
> 
> 时间：2012-10-16T17:58:29.593
> 
> 标签：c#, asp.net, asp.net-membership, forms-authentication, session-timeout

我有一个网站，其中使用了**表单身份验证**和**ASP.NET 成员资格**。在某些页面上也使用**事务**（System.Transactions）。
将其部署到服务器后，会话超时问题正在造成混乱，并且很少有电子邮件中继和数据库操作无法执行。
我想知道如何解决这个问题。如果需要更多信息，我可以提供。

我查看了太多博客和论坛，但找不到解决方案或正确/单一的解决方案。
有时会显示以下错误：- **超时。在从池中获取连接之前超时时间已过。**

该应用程序部署在带有**IIS 7.5的****Windows 2008 R2 Server**上。 期待快速响应。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:00:33.953

听起来您没有正确关闭数据库连接。

确保在您打开 SQL 连接的任何地方都将其关闭。理想情况下，将它们包裹在 using 块中。

发布一些您的典型数据库代码，我会对其进行审查。**

# jquery - jquery .on() 没有绑定到来自 jquerymobile changePage 的新元素

> ID：12920681
> 
> 赞同：0
> 
> 时间：2012-10-16T17:58:37.133
> 
> 标签：jquery, jquery-mobile

我有 2 个页面使用相同的模板。唯一不同的`data-role="content"`就是不同。我正在使用`$.mobile.changePage('page2.php');`，但`all.js`我脑海中的文件没有绑定到`page2`.

'all.js' 的脚本标签位于两个页面的头部，从我读过的内容来看，只有`data-role="page"`从第二页加载。这很好，因为`.on()`绑定应该绑定到新元素，但事实并非如此。如果我专门刷新，`page2.php`则该`all.js`文件可以工作，但是如果我使用`changePage`它则不会。

为什么没有从`changePage`绑定到`all.js` `.on()`选择器中拉入新元素？

两个页面的 HTML

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">

    <title>Title</title>

    <link rel="stylesheet" href="css/themes/default/jquery.mobile.theme-1.2.0.min.css">
    <link rel="stylesheet" href="css/themes/default/jquery.mobile.structure-1.2.0.min.css">

    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" src="js/jquery.validate.min.js"></script>
    <script type="text/javascript" src="js/pages/all.js"></script>
</head>

<body>
<div data-role="page" data-theme="d">
    <div data-id="head" data-role="header" data-position="fixed" data-theme="b">
        <h1>Name</h1>
        <a href="#" id="headingsActionButton" class="ui-btn-right headingsActionButton hidden" data-role="button" data-inline="true" data-icon="check">Save</a>

    </div>

    <div id="mainContent" data-role="content">
        {PageContent}
    </div>
    <div align="center" data-id="foot" data-role="footer" data-position="fixed" data-inset="false" data-theme="c">
        Powered by 
    </div>
</div>
</body>
</html> 
```

all.js

```
$(function() {
    /**
     * Prevent the header and footer from hiding on a non element tap.
     */
    $("[data-role=header], [data-role=footer]").fixedtoolbar({ tapToggle: false });

    /**
     * Scroll to the top of the collapsible heading
     */
    $('.ui-collapsible-heading').on('click', function(e) {
        window.scrollTo(0, $(this).offset().top - $('[data-role=header]').height());
        $('.headingsActionButton').addClass('hidden');
        var attr = $(this).parent().attr('data-action-id');
        if (typeof attr !== 'undefined' && attr !== false) {
            if (!$(this).parent().hasClass('ui-collapsible-collapsed')) {
                console.log('expanded');
                $('.headingsActionButton').attr('data-action-id', $(this).parent().attr('data-action-id'));
                $('.headingsActionButton .ui-btn-text').text($(this).parent().attr('data-action-text'));
                $('.headingsActionButton').toggleClass('hidden');
            } else {
                console.log('collapsed');
            }
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T18:00:30.607

`.on`不是简单的替换`.live`，你需要使用正确的语法。

```
$(context).on(events,targetelements,eventhandler) 
```

例如，

```
$('#someparentelement').on('click','.ui-collapsible-heading',function(){...}); 
```

要直接匹配`.live`正在做的事情，请使用`document`代替`'#someparentelement'`

**更新**

问题的根源是 .ui-collapsible-heading 上的 click 事件被 JQM 停止，这意味着它不能冒泡到文档。剩下的处理事件的唯一方法是将其直接绑定到该元素上而无需委托。

考虑到这一点，您需要它在每个页面上运行，因此您需要删除它，`$(function(){})`因为它只在第一页上运行，而是使用`$(document).on("pageinit",function(){})`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:08:18.163

尝试：

```
$('.ui-collapsible-heading').live('click', function(e) { ... }); 
```

'Live' 的工作方式类似于 'on'，但将事件设置为新元素。

# c# - 如何打开 SQL 分析器？

> ID：12920682
> 
> 赞同：-1
> 
> 时间：2012-10-16T17:58:45.363
> 
> 标签：c#, sql-server

我的 PC 上安装了 Microsoft SQL Server 2008。它与 Microsoft Visual Studio 2010 一起安装。

有了这个配置，有什么办法可以打开 SQL Profiler 吗？

有关信息，还安装了 SQL Server 配置管理器和 SQL Server 安装中心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:43:35.803

与 Visual Studio 一起安装的程序组只是安装的 SQL Express 版本的这两个工具。您通常需要安装 Developer、Standard 或 Enterprise 版客户端工具才能包含 Profiler 实用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:05:37.530

有一个免费的：[https ://sites.google.com/site/sqlprofiler/](https://sites.google.com/site/sqlprofiler/)

# node.js - NodeJS皮肤

> ID：12920684
> 
> 赞同：-5
> 
> 时间：2012-10-16T17:59:04.367
> 
> 标签：node.js, skinning

是否有模块或类似的东西支持 NodeJS 中的皮肤？我想建立一个 NodeJS 网站，并且希望能够像在 Wordpress 中那样，不费吹灰之力地重新设计网站。

NodeJS 支持换肤吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T04:51:46.820

如果您有兴趣在 Node.js 中构建网站并且不需要 wordpress 样式的 cms，那么很少有项目可以帮助您。

你看过[Bootstrap](http://twitter.github.com/bootstrap/)吗？它是用 less 构建的，您可以轻松地将其插入 Express 设置（请参阅此处的指南，使用命令行可执行文件设置新项目，您可以像这样指定 less：`express --css less myapp`它会为您完成所有工作）

在 bootstrap less 文件中有几个变量可以用来更改颜色、字体、大小等，它还有很多用于网格布局和响应式设计的助手。

它甚至还包括一些有用的 javascript 插件，这些插件使用户界面更漂亮，工作量更少。

还有很多带有主题和[主题生成器的](http://www.boottheme.com)[站点](http://bootswatch.com)，然后在引导程序之上工作，并且可以实现您想要的。

插入这种解决方案（无论是引导程序还是其他）几乎是您为节点蒙皮的最接近的方法；正如另外建议的那样，如果您也在寻找开箱即用的 CMS，可能最好寻找另一个平台，如 Wordpress。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T18:07:20.230

Node.js 不是一个内容管理系统。它是一个平台，您可以在其上构建带有内容管理系统的 Web 服务器。要回答您的问题，您需要寻找*支持主题的基于 node.js 的内容管理系统*。

我知道的唯一 node.js CMS 是[Calipso](http://calip.so/)。它仍然处于相当的 alpha 阶段。它可能有一些主题支持，但远不如 Wordpress 完善。

还有你想要使用 node.js 的原因吗？我的意思是使用 Wordpress 创建主题网站没有任何问题——这真是太棒了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-14T00:42:36.863

如果你只是想要另一个 OnlineShop，或者博客，我认为 nodejs 可能不是 Jed Watson 所说的正确选择。

如果您的要求更复杂，并且您希望快速轻松地实现一个漂亮的 Web 界面，并且您具有 html、javascript 和 css 知识……我强烈建议您尝试使用[MEAN.js](http://meanjs.org/)

它将 MongoDB Expressjs、AngularJs 和 NodeJs 组合在一起。

使用它，例如与[yeoman 全栈构造函数](http://yeoman.io/learning/index.html)一起使用，您将在几分钟内拥有一个强大的 web 应用程序、用户身份验证等等。

在那之后，使用jade、less、scss 和类似的语言在前面建模，以及你也可以在后面建模集合的简单方法，对我来说是你今天创建网站的最佳组合。

希望它会帮助你国王的问候

# php - 标头未按预期设置内容类型

> ID：12920688
> 
> 赞同：0
> 
> 时间：2012-10-16T17:59:13.927
> 
> 标签：php, json, http-headers

我有一个 joomla php/script 返回 json 但作为 text/html 因为如果我将它作为 application/json 返回它会下载文件而不是解释它。

为此，我使用：

```
header("Content-Type: text/html; charset=utf-8",true);

flush();

echo json_encode(($imgChanging>0)?$thmbName:0); 
```

它在 2 个不同的服务器（**php 5.3.3-7 + 挤压 14**和**php 5.4.4-2**）上工作正常，但它不适用于另一个带有**php 5.3.14**的服务器，而不是返回 text/html 它返回 application/ json。其他一切正常，我还没有找到这个 php 版本的这个错误。我该如何解决这个问题？

# visual-c++ - 从文本框到双倍的字符串

> ID：12920690
> 
> 赞同：0
> 
> 时间：2012-10-16T17:59:24.970
> 
> 标签：visual-c++

我需要找到一种方法将我从文本框中得到的字符串转换成双倍。我曾使用“System::Convert::toDouble”，但我想为此创建一个函数。

```
double strtodbl(double dbl, string str)
{
    dbl=System::Convert::ToDouble(str);
    if(!str)
        dbl=0;

    return dbl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:02:20.590

您不需要创建自己的方法来将 String 转换为 Double。只需使用已经提供的方法。

```
Convert.ToDouble(String) 
```

如果输入字符串为空，此方法将返回 0，如果输入字符串不是有效格式的数字，则此方法将抛出异常。有关详细信息，请参阅[有关该方法的 MSDN 文档](http://msdn.microsoft.com/en-us/library/zh1hkw6k.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:04:07.900

```
double strtodbl(string str)
{
    double num ;
    if( Double::TryParse(str,num))
    {
      return dbl;
    } 
    return 0.0d;
} 
```

`if(!str)`没有意义。`str`不是布尔值。`Double::TryParse`为您处理。

# php - Zend 调试器扩展未正确加载

> ID：12920691
> 
> 赞同：0
> 
> 时间：2012-10-16T17:59:49.407
> 
> 标签：php, php-extension, zend-debugger

我在带有 PHP 5.4.4 TS 的 Windows 7 上。我正在尝试加载 zend 调试器扩展，它是我的 PHP.ini 文件的最后一行：

```
[Zend]
zend_extension_ts = C:\php\ext\ZendDebugger.dll
zend_debugger.allow_hosts = 127.0.0.1/32,192.168.0.1/32,10.0.0.0/8
zend_debugger.expose_remotely = always 
```

当我调用 phpinfo() 部分时，扩展不显示。但是错误日志中没有任何内容。我使用的扩展是针对 PHP 5.3 的，所以这可能是它无法正确加载的原因。有谁知道是否有 PHP 5.3+ 的 TS 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:22:39.550

我对 PHP 5.4.11 也有同样的问题。看起来 ZendDebugger.dll 的线程安全版本不再可用。对 5.3.x（我能找到的最大版本）使用 Zend_extension（而不是 zend_extension_ts）和 ZendDebugger.dll 对我也不起作用。

最后，我通过从 xdebug.org 切换到 xdebug 解决了这个问题。[从http://xdebug.org/download.php](http://xdebug.org/download.php)下载 php_xdebug-2.2.1-5.4-vc9.dll并将 php.ini 调整为：

```
zend_extension="C:\php_5_4_11\ext\php_xdebug-2.2.1-5.4-vc9.dll"
zend_debugger.expose_remotely=always

xdebug.remote_enable=on
xebug.remote_handler=dbgp
xdebug.remote_host=localhost
xdebug.remote_port=9000 
```

# c - scanf 中用于 C 中 bool 数据类型的格式说明符

> ID：12920694
> 
> 赞同：23
> 
> 时间：2012-10-16T18:00:12.717
> 
> 标签：c, scanf, format-specifiers

我在 C std99 中使用 bool 数据类型，其定义在`<stdbool.h>`. 现在我希望用户给我输入。我必须在 scanf 中使用什么格式说明符来输入来自用户的 1 个字节的布尔值，然后在我的程序中对其进行操作。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-16T18:02:28.293

空无一人。

使用临时对象，因为其大小`_Bool`取决于实现。

```
#include <stdbool.h>
#include <stdio.h>

bool b;
int temp;

scanf("%d", &temp);
b = temp; 
```

# css - CSS 布局帮助 - 垂直和绝对流畅

> ID：12920698
> 
> 赞同：0
> 
> 时间：2012-10-16T18:00:20.217
> 
> 标签：css, css-position, fluid-layout

我有一个评论系统，我想浮动到页面的右侧，绝对定位：

我希望该框有最大数量的评论，因为我限制了字符，所以不要太在意高度

但我希望评论字段根据那里的文本垂直扩展：

所以，外壳是 200px 宽 - 然后每一行是 200px 宽， 50px 浮动左 div 用于用户图片， 150px 浮动右 div 用于评论（评论 div 必须垂直扩展 - 不能真正有最小高度，因为一个词的答案将是最大 16 像素）

这可能吗？目前，我正在尝试使用 overflow:auto 在评论 div 上设置最小高度，但这只会导致滚动条，如果我能提供帮助，我绝对不想要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:30:16.670

问题很可能（没有提供代码，我无法确认）您的绝对定位的 div 什么都没有。这导致 div 试图占用最小的空间，因此滚动条。

这通常发生在您将某些东西以绝对位置放置在已经定位在绝对位置的元素中时。绝对项从父上下文中取出，因此父容器不会占用内部内容的空间。因此，绝对元素中只有一个元素也在绝对元素中，将表现得好像它是空的。

[我做了这个小演示](http://jsfiddle.net/h9Dzv/2/)

看看当你改变这一行时会发生什么：

```
.comment {position:relative;border:1px solid yellow;padding:3px; margin;3px;} 
```

对此：

```
.comment {position:absolute;border:1px solid yellow;padding:3px; margin;3px;} 
```

Bam，滚动条。

# c++ - 浮点转换和性能

> ID：12920700
> 
> 赞同：5
> 
> 时间：2012-10-16T18:00:26.620
> 
> 标签：c++, c, performance, floating-point

我知道在浮点数和整数之间进行转换时可能会出现错误，但是性能如何（请忽略准确性问题）？

一般来说，如果我对不同算术类型的操作数（即不同的浮点类型（例如`float`and `double`）和浮点/整数类型组合（例如`float`and `int`））进行 n 元运算，性能会受到影响吗？是否存在经验法则，例如保持所有操作数的类型相同？

PS：我问是因为我正在编写一个表达式模板库，并且想知道是否允许对包含不同算术类型值的向量进行二进制运算。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:44:32.730

我怀疑这个问题的答案会因目标架构而异，因为转换可以（但可能不会）发生在硬件中。例如，考虑以下代码，它会导致 int 和 float 之间的一些相互转换：

```
int main (int argc, char** argv)
{
    int precoarced = 35;
    // precoarced gets forced to float
    float result = 0.5 + precoarced;

    // and now we force it back to int
    return (int)result;

    // I wonder what the disassembly looks like in different environments?
} 
```

当我尝试使用 g++ （我在 Ubuntu，x86 上）使用默认设置编译它并使用 gdb 反汇编时：

```
 0x00000000004004b4 <+0>: push   %rbp
   0x00000000004004b5 <+1>: mov    %rsp,%rbp
   0x00000000004004b8 <+4>: mov    %edi,-0x14(%rbp)
   0x00000000004004bb <+7>: mov    %rsi,-0x20(%rbp)
   0x00000000004004bf <+11>:    movl   $0x23,-0x8(%rbp)
   0x00000000004004c6 <+18>:    cvtsi2sdl -0x8(%rbp),%xmm0
   0x00000000004004cb <+23>:    movsd  0x10d(%rip),%xmm1        # 0x4005e0
   0x00000000004004d3 <+31>:    addsd  %xmm1,%xmm0
   0x00000000004004d7 <+35>:    unpcklpd %xmm0,%xmm0
   0x00000000004004db <+39>:    cvtpd2ps %xmm0,%xmm0
   0x00000000004004df <+43>:    movss  %xmm0,-0x4(%rbp)
   0x00000000004004e4 <+48>:    movss  -0x4(%rbp),%xmm0
   0x00000000004004e9 <+53>:    cvttss2si %xmm0,%eax
   0x00000000004004ed <+57>:    pop    %rbp
   0x00000000004004ee <+58>:    retq 
```

请注意带有 cvt 前缀的助记符的说明。这些是转换说明。因此，在这种情况下，转换是在硬件中通过少量指令进行的。因此，根据这些指令花费多少周期，它可能相当快。但同样，不同的架构（或不同的编译器）可能会改变故事。

编辑：有趣的是，由于我不小心指定了 0.5 而不是 0.5f，所以这里有一个额外的转换。这就是 cvtpd2ps 操作在那里的原因。

编辑：x86 长期以来一直支持 FP（自 80 年代以来），因此针对 x86 的 C++ 编译器通常会使用硬件（除非编译器严重落后于时代）。感谢 Hot Licks 指出这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:36:09.573

在大多数机器上，浮点和整数格式之间的转换相当快，这得益于浮点硬件的特性。

但是，如果仅出于文档目的，当然应该努力以“正确”格式表达文字。并且在文档中使用显式强制转换也没有什么坏处。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T18:38:27.123

通常会有一些性能损失，尽管与其他事物相比可以忽略不计。这是由于整数和浮点寄存器之间的数据迁移以及其他可能的 ABI 问题。

这些问题的答案总是相同的。怀疑？*对其进行基准测试。*性能在理论上很难预测。

# javascript - JavaScript 推特按钮

> ID：12920701
> 
> 赞同：0
> 
> 时间：2012-10-16T18:00:27.740
> 
> 标签：javascript, jquery, twitter, dom

我在尝试使用 JavaScript 创建动态 Twitter 按钮时遇到问题。我试图让 twitter 按钮来推特我正在编程的计算器的输出。问题是按钮不会显示。我究竟做错了什么？请帮忙。

```
var twit_link = document.createElement('a');
  twit_link.setAttribute('href', 'https://www.twitter.com/share');
  twit_link.setAttribute('class', 'twitter-share-button');
  twit_link.setAttribute('url', 'http://www.twitter.com/obamamakes';
  twit_link.setAttribute('data-count', 'none');
  twit_link.setAttribute('data-via', 'ObamaMakes');
  twit_link.setAttribute('data-text', 'In the time it takes me to ' + activity + ', Barack Obama makes $' + i.toFixed(1);
  twit_link.innerHTML = "Tweet";

  $("#CalcOutput").html("In the time it takes me to <span class=\"num\">" + activity + "</span>,<br />Barack Obama makes $<span class=\"num\">" + i.toFixed(1) + "</span>");

  $("#CalcOutput").append(twit_link); 
```

我做了大家建议的更改，但是计算器应该产生的整个输出仍然没有与 twitter 按钮一起显示。我也应该提供计算器代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:15:56.220

使用 jQuery的[jsFiddle](http://jsfiddle.net/JTwZ2/1/)（仅限）：

```
$(document).ready(function(){
//TEst Data - Starts
    var activity = 'Test';
    var i = 12;
//Test Data Ends
var twit_link = $('<a />');
twit_link.attr('href', 'https://www.twitter.com/share');
twit_link.addClass('twitter-share-button');
twit_link.attr('url', 'http://www.twitter.com/obamamakes');
twit_link.attr('data-count', 'none');
twit_link.attr('data-via', 'ObamaMakes');
twit_link.attr('data-text', 'In the time it takes me to ' + activity + ', Barack Obama makes $' + i.toFixed(1));
    twit_link.html('Tweet');

$("#CalcOutput").html("In the time it takes me to <span class=\"num\">" + activity + "</span>,<br />Barack Obama makes $<span class=\"num\">" + i.toFixed(1) + "</span>");
$("#CalcOutput").append(twit_link);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:14:31.440

你的语法不正确。您缺少一些结束括号：

```
var twit_link = document.createElement('a');
  twit_link.setAttribute('href', 'https://www.twitter.com/share');
  twit_link.setAttribute('class', 'twitter-share-button');
  twit_link.setAttribute('url', 'http://www.twitter.com/obamamakes'); // missing ) here
  twit_link.setAttribute('data-count', 'none');
  twit_link.setAttribute('data-via', 'ObamaMakes');
  twit_link.setAttribute('data-text', 'In the time it takes me to ' + activity + ', Barack Obama makes $' + i.toFixed(1)); // missing ) here
  twit_link.innerHTML = "Tweet";

  $("#CalcOutput").html("In the time it takes me to <span class=\"num\">" + activity + "</span>,<br />Barack Obama makes $<span class=\"num\">" + i.toFixed(1) + "</span>");

  $("#CalcOutput").append(twit_link); 
```

您可以通过浏览器的开发人员工具进行检查。它将在控制台中显示错误。

正如 Abdullah 提到的，无论如何你都可以使用 jQuery 来完成所有这些工作：

```
var twit_link = $('<a/>', {
    href: 'https://www.twitter.com/share',
    'class': 'twitter-share-button',
    url: 'http://www.twitter.com/obamamakes',
    'data-count': 'none',
    'data-via': 'ObamaMakes',
    'data-text': ... // whatever you want here
    }).text('Tweet');
$("#CalcOutput").html("In the time it takes me to <span class=\"num\">" + activity + "</span>,<br />Barack Obama makes $<span class=\"num\">" + i.toFixed(1) + "</span>");
$("#CalcOutput").append(twit_link); 
```

**[jsFiddle 示例](http://jsfiddle.net/XuY2s/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:10:24.737

你有几个语法错误。如果你仍然使用 jQuery，你可以清理它：

```
var twit_link = $('<a>Tweet</a>');
twit_link.attr('href', 'https://www.twitter.com/share');
twit_link.attr('class', 'twitter-share-button');
twit_link.attr('url', 'http://www.twitter.com/obamamakes');
twit_link.data('count', 'none');
twit_link.data('via', 'ObamaMakes');
twit_link.data('text', 'In the time it takes me to ' + activity + ', Barack Obama makes $' + i.toFixed(1));

$("#CalcOutput").html("In the time it takes me to <span class=\"num\">" + activity + "</span>,<br />Barack Obama makes $<span class=\"num\">" + i.toFixed(1) + "</span>");
$("#CalcOutput").append(twit_link); 
```

# python - Python查询中的减1

> ID：12920702
> 
> 赞同：-2
> 
> 时间：2012-10-16T18:00:29.473
> 
> 标签：python, list, find

当您的代码包含

```
find list[7].find('~') == -1
    process 
```

在这种情况下，-1 代表什么？

我试图将数字更改为不同的数字，但不断出错。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T18:02:47.920

`-1``find()`当在字符串中找不到特定子字符串时返回，否则返回该子字符串的索引。在你的情况下`lis[7]`是一个字符串，你正在调用`find()`它。

```
In [23]: 'abc'.find('d')
Out[23]: -1

In [24]: 'abc'.find('b')
Out[24]: 1 
```

**从[Python 文档](http://docs.python.org/library/stdtypes.html#str.find)**：

```
str.find(sub [,start [,end]]) -> int

    Return the lowest index in S where substring sub is found,
    such that sub is contained within s[start:end].  Optional
    arguments start and end are interpreted as in slice notation.

    Return -1 on failure. 
```

PS：不要`list`用作变量名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:05:28.020

阅读文档：[http ://docs.python.org/release/3.1.5/library/stdtypes.html#str.find](http://docs.python.org/release/3.1.5/library/stdtypes.html#str.find)

来自文档：

> str.find(sub[, start[, end]])¶
> 
> 返回找到子字符串 sub 的字符串中的最低索引，使得 sub 包含在切片 s[start:end] 中。可选参数 start 和 end 被解释为切片表示法。**如果未找到 sub，则返回 -1。**

# ios - 在 iOS 6 中更改为想要软件调光？

> ID：12920715
> 
> 赞同：2
> 
> 时间：2012-10-16T18:01:03.450
> 
> 标签：ios, ios6

这是关于问题的：[关闭 iPhone OS (iOS) 中的显示](https://stackoverflow.com/questions/3950194/turn-off-display-in-iphone-os-ios)

作为关闭显示器的替代方法，我正在寻找一种尽可能使屏幕变暗的方法。

我发现了以下问题：

[如何在 iOS 5 应用程序中更改亮度？](https://stackoverflow.com/questions/8207305/how-to-change-brightness-in-ios-5-app)

[使 iPhone 屏幕变暗](https://stackoverflow.com/questions/8234981/make-the-iphone-screen-dim)

这个文档：

[http://developer.apple.com/library/IOs/#documentation/UIKit/Reference/UIScreen_Class/Reference/UIScreen.html](http://developer.apple.com/library/IOs/#documentation/UIKit/Reference/UIScreen_Class/Reference/UIScreen.html)

根据这个问题/文档，我应该能够这样做以使屏幕变暗以减少背光。

```
 [[UIScreen mainScreen] setWantsSoftwareDimming:YES]; 
```

我在我的 iPad 2 (iOS 6.0) 上尝试了这个代码。但是，我没有注意到显示亮度有任何变化。

a) 我做错了吗？

b) iOS 在这方面有什么变化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:25:02.167

`setWantsSoftwareDimming:`不会对屏幕做任何事情。相反，它会改变`brightness`属性`UIScreen`使用的比例。你应该在打电话*之前*打电话给它`setBrightness:`。也许如果您发布设置亮度/通话的方法，`setWantsSoftwareDimming`您可能会得到一些更有用的反馈？

# javascript - 为 Highcharts 解析 JSON 数据

> ID：12920718
> 
> 赞同：2
> 
> 时间：2012-10-16T18:01:09.927
> 
> 标签：javascript, json, highcharts, pie-chart

我已经为此转了几个小时，并用尽了所有类似的 stackoverflow 线程和 highcharts 文档，所以希望有人能提供帮助。

我正在尝试绘制一个具有性别划分的饼图。我以前使用过折线图，所以我的数据格式为 x 和 y 轴，如下所示：

```
[{"y":"Mr","x":"145"},{"y":"Miss","x":"43"},{"y":"Mrs","x":"18"},{"y":"Ms","x":"2"}] 
```

这让我到了某个地方，我可以利用 json 并提取整数，但我一生都无法获得与数字相关的标题......

```
function genderData() {
 $.getJSON('/statsboard/gender', function(data_g) {
    $.each(data_g, function(key_g, val_g) {
        obj_g = val_g;
         genderChart.series[0].addPoint(parseInt(obj_g.x));

        //genderChart.xAxis[0].categories.push(obj_g.y);
    });
 });
} 
```

然后我只是调用了函数genderData，如下所示：

```
genderChart = new Highcharts.Chart({
        chart: {
            renderTo: 'gender',
            events: {
                load: genderData
            }
        }
        title: {
            text: 'Gender Split'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: false
                },
                showInLegend: true
            },
        },
        series: [{
            type: 'pie',
            name: 'Gender Split',
            data: []
        }]
    }); 
```

所以我最终得到了一个准确的图表，但没有标签，它们只会默认为“切片”......

如此接近但没有雪茄;-)

Soooo 我根据文档更改了我的服务器端代码以返回以下格式:-)，现在返回以下内容：

```
[{"Mr":"145"},{"Miss":"43"},{"Mrs":"18"},{"Ms":"2"}] 
```

这对我来说很明显，但是，唉，当我尝试在 js 代码上适应这一点时，一切都崩溃了。

我一直在看这个： [Write JSON parser to format data for pie chart (HighCharts)](https://stackoverflow.com/questions/11252424/write-json-parser-to-format-data-for-pie-chart-highcharts)

但无法在这里应用适合我的情况的做法。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:33:41.487

表格：

```
[{"name": "Mr", "y": 145}, ...] 
```

或者

```
[["Mr", 145], ...] 
```

将工作。请注意，第二种形式是数组*数组*而不是*对象*数组（您很接近）。

请参阅[basic-pie 演示](http://www.highcharts.com/demo/pie-basic)（单击查看选项并向下滚动到数据）、[series.data 文档](http://api.highcharts.com/highcharts#series.data)和[series.addPoint 文档](http://api.highcharts.com/highcharts#object-Series)以获取更多信息。

如果您让服务器端以上述两种形式之一返回数据，您可以这样做：

```
function genderData() {
  $.getJSON('/statsboard/gender', function(data_g) {
    genderChart.series[0].setData(data_g, true);
  });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T19:20:07.307

您可以按如下方式设置积分：

```
 genderChart.series[0].addPoint({

        name: key_g,
        y: val_g

    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T12:35:56.170

通过重新排列我的 Json 以将“name”和“y”作为键，我能够取得进展，即：

```
[{"name":"Mr","y":"145"},{"name":"Miss","y":"43"},{"name":"Mrs","y":"18"},{"name":"Ms","y":"2"}] 
```

然后通过循环遍历json数据并使用JS中的函数parseInt（）将“y”值解析为int，我能够得到我想要的结果......

```
function genderData() {
$.getJSON('/statsboard/gender', function(data_g) {
$.each(data_g, function(key_g, val_g) {
    obj_g = val_g;
     genderChart.series[0].addPoint({
        name: obj_g.name,
        y: parseInt(obj_g.y)
});
console.log(obj_g.y)
});
});
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T00:24:11.120

我知道这个问题已经解决了。但是在这些情况下，数组的 map 函数可能是一个不错的选择，我喜欢函数式语言的 map！

```
data = [{"y":"Mr","x":"145"},{"y":"Miss","x":"43"},
        {"y":"Mrs","x":"18"},{"y":"Ms","x":"2"}];

var series = data.map(function(e){ return parseInt(e.x); }); 
```

.... 高度图 ....

# php - PHP Parse 错误：语法错误，意外的 T_DEFAULT

> ID：12920719
> 
> 赞同：0
> 
> 时间：2012-10-16T18:01:14.323
> 
> 标签：php, parsing, syntax-error, default, break

我收到此错误**Parse error: syntax error, unexpected T_DEFAULT in ../../functions.php on line 22**

这是第 22 行周围的 functions.php 部分（“默认”特别是第 22 行）：

```
<?php
        break;
    default :
?> 
```

它是来自 Wordpress 的 TwentyEleven functions.php 的默认代码，不幸的是，我仍在大量学习 PHP，所以我完全不确定为什么会发生错误。有任何想法吗？

ETA 这里是完整的functions.php

```
if ( ! function_exists( 'twentyeleven_comment' ) ) :
/**
 * Template for comments and pingbacks.
 *
 * To override this walker in a child theme without modifying the comments template
 * simply create your own twentyeleven_comment(), and that function will be used instead.
 *
 * Used as a callback by wp_list_comments() for displaying the comments.
 *
 * @since Twenty Eleven 1.0
 */
function twentyeleven_comment( $comment, $args, $depth ) {
    $GLOBALS['comment'] = $comment;
    switch ( $comment->comment_type ) :
        case 'pingback' :
        case 'trackback' :
    ?>
    <li class="post pingback">
        <p><?php _e( 'Pingback:', 'twentyeleven' ); ?> <?php comment_author_link(); ?><?php edit_comment_link( __( 'Edit', 'twentyeleven' ), '<span class="edit-link">', '</span>' ); ?></p>
    <?php
            break;
        default :
    ?>
    <li <?php comment_class(); ?> id="li-comment-<?php comment_ID(); ?>">
        <article id="comment-<?php comment_ID(); ?>" class="comment">
            <footer class="comment-meta">
                <div class="comment-author vcard">
                    <?php
                        $avatar_size = 68;
                        if ( '0' != $comment->comment_parent )
                            $avatar_size = 39;

                        echo get_avatar( $comment, $avatar_size );

                        /* translators: 1: comment author, 2: date and time */
                        printf( __( '%1$s on %2$s <span class="says">said:</span>', 'twentyeleven' ),
                            sprintf( '<span class="fn">%s</span>', get_comment_author_link() ),
                            sprintf( '<a href="%1$s"><time pubdate datetime="%2$s">%3$s</time></a>',
                                esc_url( get_comment_link( $comment->comment_ID ) ),
                                get_comment_time( 'c' ),
                                /* translators: 1: date, 2: time */
                                sprintf( __( '%1$s at %2$s', 'twentyeleven' ), get_comment_date(), get_comment_time() )
                            )
                        );
                    ?>

                    <?php edit_comment_link( __( 'Edit', 'twentyeleven' ), '<span class="edit-link">', '</span>' ); ?>
                </div><!-- .comment-author .vcard -->

                <?php if ( $comment->comment_approved == '0' ) : ?>
                    <em class="comment-awaiting-moderation"><?php _e( 'Your comment is awaiting moderation.', 'twentyeleven' ); ?></em>
                    <br />
                <?php endif; ?>

            </footer>

            <div class="comment-content"><?php comment_text(); ?></div>

            <div class="reply">
                <?php comment_reply_link( array_merge( $args, array( 'reply_text' => __( 'Reply <span>&darr;</span>', 'twentyeleven' ), 'depth' => $depth, 'max_depth' => $args['max_depth'] ) ) ); ?>
            </div><!-- .reply -->
        </article><!-- #comment-## -->

    <?php
            break;
    endswitch;
}
endif; // ends check for twentyeleven_comment() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-03T02:33:47.473

我用下面的代码遇到了这个问题。注意：使用“case default”，**这是不正确的**。

```
switch($vars) {
  case "0":
    print '1 comment';
    break;
  case default:
    print "$vars comments";  
} 
```

代码应如下**（仅默认）**：

```
switch($vars) {
  case "0":
    print '1 comment';
    break;
  default:
    print "$vars comments";

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:03:11.390

尝试删除`default:`. 并确保这行代码里面

```
switch(){

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:06:12.547

这似乎是 switch 语句的一部分，通常采用以下结构：

```
switch($aaa) {
    case 1:
        //do something
        break;
    case 2:
        //do something else
        break;
    case 3:
        ...
        ...
        ...
    default:
        /do something else again
        break;
 } 
```

您可以在此处获取所需的所有信息[http://php.net/manual/en/control-structures.switch.php](http://php.net/manual/en/control-structures.switch.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:10:04.983

我在复制/粘贴代码时疏忽了；忘记打开`<?php`和关闭`?>`。

# vb6 - 如何通过 VB6 使用 DAO.Relation？

> ID：12920720
> 
> 赞同：2
> 
> 时间：2012-10-16T18:01:15.410
> 
> 标签：vb6, dao, invoices

我继承了一个使用 DAO 编写的 VB6 项目，主要用于访问数据。

代码很差，应用程序经常使用大量数据生成 Windows 崩溃（程序“遇到问题，需要关闭”）。我怀疑大部分需要重写。

我想首先使用 DAO 来关联发票标题的记录集（每张发票有一条记录）和另一条发票行（每张发票有几条记录）。两个字段链接这些记录集：日期和参考。

虽然我已经看到了创建 DAO.Relation 的示例，但我不知道如何使用它，并欢迎一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:48:58.933

如果您正在寻找像[.Net 分层数据集](http://support.microsoft.com/kb/316260)这样的功能，那么 DAO 或 ADO 中没有这样的功能。

# heroku - herokuapp.com 上的 heroku 子域通配符

> ID：12920724
> 
> 赞同：6
> 
> 时间：2012-10-16T18:01:46.890
> 
> 标签：heroku, subdomain, wildcard

我在 Heroku 上运行一个 PHP 应用程序，我想知道我是否可以在 herokuapp.com 托管子域之上拥有通配符子域。例如，我的应用程序通过 Heroku 在 mysubdomain.herokuapp.com 上运行，但是我可以让它 *.mysubdomain.herokuapp.com 仍然指向我的服务器吗？

我只是使用'git push heroku master'将我的PHP应用程序上传到heroku实例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-25T12:34:21.143

不幸的是，你想要达到的目标是不可行的

# objective-c - 编译器会为类别中声明的属性自动合成 ivar 吗？

> ID：12920731
> 
> 赞同：4
> 
> 时间：2012-10-16T18:02:09.317
> 
> 标签：objective-c, objective-c-category, declared-property

在所谓的“现代Objective-C”之前，在类别中创建新属性时，我们需要实现setter 和getter 方法。现在，我们不必这样做`@synthesize`；编译器将自动创建方法和实例变量。

但是通常情况下，我们不能将实例变量添加到类别中，那么如果我们在现代 Objective-C 的类别中添加新属性会发生什么？编译器会为我们创建一个 ivar 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T18:17:25.670

您可以在类别中声明一个属性，这相当于声明 getter 和（如果是读写）setter 选择器。

编译器*不会*在您的类别实现中自动合成 getter 和 setter 方法。如果您没有在类别实现中明确定义它们，编译器将发出警告。您可以`@dynamic`在类别实现中使用来抑制警告。您不能`@synthesize`在类别实现中使用；如果您尝试，编译器将发出错误。

编译器不会为类别中声明的属性添加实例变量。您不能在类别中显式添加实例变量，也不能诱使编译器使用属性来执行此操作。

我使用针对 iOS 6.0 的 Xcode 4.5.1 测试了我的声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:19:05.743

Actually I don't know when we were able to add `property` in categories.

From Apple Docs:

> A **category** allows you to add methods to an existing class—even to one for which you do not have the source.

and

> Class **extensions** are like anonymous categories, except that the methods they declare must be implemented in the main @implementation block for the corresponding class. Using the Clang/LLVM 2.0 compiler, you can also *declare properties* and *instance variables* in a class extension.

and this method is used to add *storage* to an object **without modifying** the class declaration (in case you couldn't modify or don't have access to source codes of class)

> **Associative references**, available starting in OS X v10.6, simulate the addition of object instance variables to an existing class. Using **associative references**, you can add storage to an object without modifying the class declaration. *This may be useful if you do not have access to the source code for the class, or if for binary-compatibility reasons you cannot alter the layout of the object.*

So your question for me seems to be incorrect.

Source: [Apple Docs - The Objective-C Programming Language](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocCategories.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:53:55.330

正如其他人所说，这样做的方法是使用***关联引用***。它们的实现*很像* `CALayer`'s value / key-pair 范例.. 基本上.. 你可以“关联”任何东西，与任何“属性”或“事物”......</p>

因此，在您的类别标题中……如果您只想读取一个值……

@property (只读) NSString *uniqueID;

然后写你的吸气剂……</p>

```
- (NSString*) uniqueID { return @"You're not special"; } 
```

但是说..你不能只从你的getter中得出值..你需要存储外部setter……或者类自己的实现来使用……你必须写一个像……这样的setter

```
- (void) setUniqueID:(NSString*)uId 
```

它不一定是公开的……但这就是“魔法”发生的地方。

```
 …
[self setAssociatedValue:uId forKey:@"yourInternalStorageName"
                  policy:OBJC_ASSOCIATION_RETAIN_NONATOMIC]; 
```

看了这个之后我意识到，我正在使用一些“个人类别”来帮助简化这些值的设置和获取等。所以[我把它们发布到这个 gist](https://gist.github.com/mralexgray/5357310)上，因为它们非常有用..并且包括像……这样的小宝石</p>

```
- (id) associatedValueForKey:(NSString*)key 
                     orSetTo:(id)anObject 
                      policy:(objc_AssociationPolicy) policy; 
```

“得到它”的秘诀是“政策”部分。这些价值观......</p>

```
OBJC_ASSOCIATION_ASSIGN = 0,
OBJC_ASSOCIATION_RETAIN_NONATOMIC = 1,
OBJC_ASSOCIATION_COPY_NONATOMIC = 3,
OBJC_ASSOCIATION_RETAIN = 01401,
OBJC_ASSOCIATION_COPY = 01403 
```

捕获与在“正常”声明中描述您的属性时所表达的相同的“个性”特征。您必须告诉编译器如何使用相同的规则“存储”您的值，然后您就可以开始了。

# ruby-on-rails - 如何在 MAC OS 终端中运行 Ruby 程序

> ID：12920733
> 
> 赞同：12
> 
> 时间：2012-10-16T18:02:17.517
> 
> 标签：ruby-on-rails, ruby, irb

> **可能重复：**
> [如何运行 ruby​​ 文件？](https://stackoverflow.com/questions/7626807/how-to-run-ruby-files)

我开始学习 Ruby，并且很难在终端中运行 Ruby 类。

我在 Sublime Text 编辑器中创建了一个类，只是“hello world”。我可以使用 编译`ruby hello.rb`，但我该如何执行呢？

我去了根目录中的终端并输入`rails c`了一个控制台。有人可以告诉我如何创建一个实例吗？我使用哪个控制台？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-16T18:08:05.190

Ruby 是解释型的，因此您无需担心单独的编译步骤。`ruby hello.rb` *是*执行命令。

标准交互式 shell (REPL) 是`irb`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:29:20.090

我认为，这是非常简单的任务。粘贴到终端`ruby <your script name>.rb`

这就是全部。Ruby 是解释语言。编译器根本不存在。只有翻译。我只使用过几次 Ruby，但我认为，你必须运行你的方法 hello。您的代码只创建类，没有别的。你应该先学习 Ruby，然后再学习 RoR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T21:47:12.710

正如其他人指出的那样，运行`ruby hello.rb` *确实会*运行脚本。不涉及编译（除了在 Ruby 虚拟机的幕后，但你不需要关心这个）。

根据您在评论中给出的文件代码（我已放入换行符和缩进）：

```
class Hello
  def say
    puts "hello World"
  end
end 
```

...您的脚本似乎没有做任何事情的原因是它只定义了一个类和一个方法，但没有实例化该类或调用该方法。你有正确的想法（在另一条评论中）打电话`h = Hello.new()`；之后你可以放`h.say`，它会说“你好世界”。

（括号通常不是必需的，包括在这两个方法调用中；但有时它们很重要。有不同的约定，但大多数 Ruby 主义者在调用不带任何参数的方法时会跳过它们，例如`new`和`say`此处。）

EDIT: `rails c`用于 Ruby on Rails，它是一个独立于 Ruby 语言的实体（尽管它是用 Ruby 编写的）。

# java - Java 等效于 C++ 加密

> ID：12920740
> 
> 赞同：0
> 
> 时间：2012-10-16T18:02:40.557
> 
> 标签：java, c++, encryption, openssl

我有以下用于加密的 c++ 代码片段：

```
EVP_CIPHER_CTX ctx;
const EVP_CIPHER * cipher = EVP_des_ede3_cbc();
unsigned char iv[EVP_MAX_IV_LENGTH];
unsigned char key[EVP_MAX_KEY_LENGTH];
String seed;

_config->get_value("crypto_seed", &seed); // uses the seed value from pimp config.

if (seed.is_empty())
{
    return false;
}

EVP_BytesToKey(cipher, EVP_sha1(),
        (unsigned char *) 0, // no salt
        reinterpret_cast<unsigned char *>(const_cast<char *>(seed.chars())), seed.length(),
        1, // hash passphrase just once.
        key, iv);

EVP_CIPHER_CTX_init(&ctx);
EVP_CipherInit_ex(&ctx, cipher, (ENGINE *) 0, key,
        iv,
        1); // encrypt 
```

java中c++加密的等价物是什么？

我看到有`des`算法，然后我看到了`sha1`。

这与 openssl 加密有关。但不确定什么是等价的。本质上，我想要与 c++ 代码生成的输出相同。

我问`EVP_CIPHER_CTX`这里使用的加密的等价物或名称是什么，所以我可以从那里拿走它。

**编辑：不要求任何人将代码转换为java，只要求相应的包或类会做同样的事情。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:38:34.077

其中最棘手的部分是之前重新创建的 EVP_BytesToKey 部分。

[如何使用 AES 解密用 openssl 命令加密的 Java 文件？](https://stackoverflow.com/questions/11783062/how-to-decrypt-an-encrypted-file-in-java-with-openssl-with-aes)

如果你真的不习惯使用类似 C 的代码，我也有一个面向对象的版本。对于 SHA-1，使用 SHA-1 而不是 MD5...

至于加密，只需`"DESede/CBC/PKCS5Padding"`用作您的方法的算法名称，就`Cipher.getInstance()`可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:07:35.840

正在使用的加密是带有[密码块链接的](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)[三重 DES](http://en.wikipedia.org/wiki/Triple_DES)

RSA 页面：[来源](http://www.rsa.com/products/bsafe/documentation/mesuite21html/dev_guide/group__R__CR__IDS__CIPHER.html#aR_CR_ID_DES_EDE3_CBC)

> 表示 3DES EDE CBC 对称密码的密码标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:08:28.310

看起来`EVP_CIPHER_CTX`是包含加密的“上下文”结构（类似于对象），但实际使用的密码是-与朋友一起`EVP_des_ede3_cbc`使用“des-ede3-cbc”`OpenSSL.encrypt(…)`

编辑：要回答这个问题（“相应的包”），通常你应该使用`javax.crypto`或（对于大多数目的可能是“更好”）`bouncycastle`（http://www.bouncycastle.org/）。但是 OpenSSL 绑定也确实存在——只是使用和部署很尴尬。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:22:25.103

您要转换的代码使用 openssl 库。它使用初始向量执行三重 DES 加密。您需要了解的第一件事就是它在做什么（最好是为什么）。

不幸的是，openssl 文档并不是非常彻底（请参见[此处](http://www.openssl.org/docs/crypto/evp.html)）……尽管 O'Reilley 的书*Network Security with OpenSSL*要好得多（不过有点过时了）。

一旦您知道需要做什么，使用标准 javax.crypto 包在 Java 中对其进行编码应该不会有太大困难。

# gcc - 内联 intel 语法到内联 gcc

> ID：12920743
> 
> 赞同：0
> 
> 时间：2012-10-16T18:02:47.100
> 
> 标签：gcc, inline-assembly, intel-syntax

我正在尝试将我的一个片段转换为使用类似于 gcc 的内联 asm 语法的编译器。我阅读了文档，一切都很好，直到遇到这一行：

```
mov eax, dword ptr fs:[0x20] 
```

我将其转换为：

```
movl 0x20(%fs:), %eax 
```

编译的翻转，告诉我 fs 不是 32 位寄存器，这个操作是无效的。我应该如何在 at&t 语法中访问 fs？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:07:01.950

找到了答案，看来gcc或者at&t很不一致。

```
movl %fs:0x20, %eax 
```

# ios - 如何在 iOS 中使用 MS CRM 2011 Web 服务？

> ID：12920749
> 
> 赞同：4
> 
> 时间：2012-10-16T18:03:10.273
> 
> 标签：ios, dynamics-crm, dynamics-crm-2011, crm

我想为 MS Dynamics CRM 2011 创建一个 iPad 应用程序。我们有一个 CRM 系统，您可以使用 AD 用户名和密码在世界任何地方登录。

我知道 CRM 带有发现服务、组织服务和 OData 服务。但我不知道我将如何使用这些服务？我想知道我应该如何验证用户？

这是我找到但不起作用的示例代码。:(

```
NSString *username = @"domain/username";
NSString *password = @"password";
NSString *loginURL = @"http://server/OrgName/XRMServices/2011/OrganizationData.svc/";

NSURL *url = [NSURL URLWithString:loginURL];

NSString *JSONString = [NSString stringWithFormat:@"{\"user id\":\"%@\",\"password\":\"%@\"}", username, password];

NSData *JSONBody = [JSONString dataUsingEncoding:NSUTF8StringEncoding];

NSMutableURLRequest *loginRequest = [[NSMutableURLRequest alloc] initWithURL:url];
loginRequest.HTTPMethod = @"POST";
loginRequest.HTTPBody = JSONBody;

NSOperationQueue *queue = [NSOperationQueue new];

[NSURLConnection sendAsynchronousRequest:loginRequest
                 queue:queue
                 completionHandler:^(NSURLResponse *response, NSData *data, 
                                     NSError *error){

                                   // Manage the response here.
                                    [self fetchedData:data];
                                   NSLog(@"error:%@", error);
                                   NSLog(@"response:%@", response);}];
    } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T22:50:49.457

如果您尝试从 iOS 本地对 Dynamics CRM 进行身份验证，您将需要很多时间......当我说很多时，很多。

有不同的 CRM 配置 On-Premise / On-line，使用 IFD 和 https 会更加棘手（您实际上需要针对 ADFS 进行身份验证，验证证书链......等等）。

您可以开始的最简单的事情是公开一个在 .NET 中实现的代理 Web 服务，它为您处理针对 CRM 的身份验证，然后从您的 iOS 应用程序验证该 Web 服务（使用普通的 https 请求和更简单的认证机制）

但是，即使这样做，仍然需要很多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T18:33:48.063

我见过的大多数实现和产品都使用中介服务器或服务来代理对 CRM 的调用。可用的 REST 服务可用于一般 CRUD 操作，但缺少其他 SDK 提供的功能。

优点：

*   实施一个更好地支持您想要支持的客户端的 SDK
*   您可以获得任何 CRM SDK 中可用的全部功能

缺点：

*   这可能是很多工作。

如果必须直接从客户端连接到 CRM 安装。考虑通过浏览器访问 OData 源，同时使用本地代理或浏览器的 DEV 工具捕获流量。编写创建相同 Web 请求的代码。从理论上讲，这与使用浏览器访问 CRM 一样安全。使用适当的方法来加密、屏蔽和隐藏您的流量。

还有其他我没有亲身经历过的选择。我可以提供它们进行研究，但不能自信地谈论它们。

[MSDN：CRM 2011 REST 服务文档](http://msdn.microsoft.com/en-us/library/gg334279.aspx)

[MSDN：CRM 2011 SDK 概述](http://msdn.microsoft.com/en-us/library/hh547453.aspx)

# asp.net - 将 ASP.NET MVC 3 项目升级到 ASP.NET MVC 4

> ID：12920753
> 
> 赞同：5
> 
> 时间：2012-10-16T18:03:28.763
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-4

我有一个 asp.net MVC3 项目我按照本教程升级到了 asp.net mvc4： [http ://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)

执行项目时出现以下错误

> [A]System.Web.WebPages.Razor.Configuration.HostSection 无法转换为 [B]System.Web.WebPages.Razor.Configuration.HostSection。类型 A 源自位置 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System .Web.WebPages.Razor\v4.0_1.0.0.0__31bf3856ad364e35\System.Web.WebPages.Razor.dll'。类型 B 源自 'System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 在位置 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System .Web.WebPages.Razor\v4.0_2.0.0.0__31bf3856ad364e35\System.Web.WebPages.Razor.dll'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:15:28.737

可以在此处找到分步说明： [http ://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253806)

具体来说，您对在 web.config 中绑定重定向感兴趣。

```
 <dependentAssembly>
    <assemblyIdentity name="System.Web.WebPages" 
         publicKeyToken="31bf3856ad364e35" />
    <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0"/>
  </dependentAssembly> 
```

并且不要忘记将以下内容添加到您的`<appSettings>`

```
 <add key="webpages:Version" value="2.0.0.0" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T17:27:04.367

如果您从 mvc3 升级到 mvc4，请将 Views 文件夹中的 webconfig 更改为以下代码

```
<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>

  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor>
<pages
        validateRequest="false"
        pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <controls>
        <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
    </pages>
  </system.web> 
```

# javascript - 访问从 Web 服务返回的 json 数据

> ID：12920758
> 
> 赞同：0
> 
> 时间：2012-10-16T18:03:44.827
> 
> 标签：javascript, ajax, json, jquery

我有一个返回这个 json 数据的 web 方法：

```
{
   "TotalItems":25,
   "Assets":
       [
           {"Id":"49c1fc23-edab-4087-bf3b-884b16399e4b"},
           {"Id":"5f8f5aaa-dcfa-4a3f-ae21-b7a9683551e5"},
           {"Id":"f589f567-c4d0-49e8-acf4-d3dcd1813b4d"},
           {"Id":"b5678b13-1d07-4be5-9c70-02f8475de771"}
       ]
} 
```

这是我的 ajax 调用和数据返回时调用的方法。

```
$.ajax({
    type: "POST",
    url: "/Services.asmx/GetAssets",
    data: "{}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function(results) {

        alert(results["d"]);   // alerts json above
        alert(results.d);      // alerts json above

        // all of these alert "undefined"
        alert(results["d"]["TotalItems"]);
        alert(results["d"].TotalItems);
        alert(results.d["TotalItems"]);
        alert(results.d.TotalItems);
    }
}); 
```

如何访问 json 结果中的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:10:09.117

您可能希望使用 JSON.parse 将返回的 JSON 转换为实际的 javascript 对象。

```
var parsed = JSON.parse(results.d);
parsed.TotalItems //Allow access of total items variable from JSON 
```

[您可以在http://www.json.org/js.html](http://www.json.org/js.html)阅读更多相关信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:06:59.480

我认为这`results.d`是一个字符串，您应该`JSON.parse(results.d)`在访问任何属性之前使用。

# wordpress - 如何在 htaccess 和 wordpress 中打破重定向循环

> ID：12920762
> 
> 赞同：0
> 
> 时间：2012-10-16T18:03:59.893
> 
> 标签：wordpress, .htaccess

我有一个 wordpress 网站，我想在其中添加一个音乐播放器，以不中断音乐的方式，访问者可以浏览网站，同时连续收听音乐

我添加了两个 iframe：第一个加载他的网站，而另一个加载音乐播放器。然后我将两者都放在一个名为 home.php 的包装器中，并将以下规则添加到 .htaccess 文件中：

`DirectoryIndex home.php`

所以包装器将加载而不是从 Wordpress 加载 index.php。home.php 的代码如下：

```
 <iframe class="miMarco" src="index.php"></iframe>
 <iframe src="audio/index.php" frameborder="0" width="230" height="70"></iframe> 
```

这就是我改变的全部。

完整的 .htaccess 如下所示：

```
# Use PHP5 Single php.ini as default 
AddHandler application/x-httpd-php5s .php
DirectoryIndex home.php
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

当我访问网站时出现问题，home.php 作为索引加载，然后它进入重定向循环，因为不断加载音乐播放器，从不加载 wordpress 站点。

任何想法为什么会发生这种情况？这是 .htaccess 问题还是 wordpress 问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T20:48:59.850

您可以尝试使其既不`home.php`也不`audio`被 wordpress 处理。您可以排除然后就像`index.php`被排除在外：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^home\.php$ - [L]
RewriteRule ^audio - [L]
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

# asp.net-mvc - Html.LabelFor labelText 与 HTML

> ID：12920763
> 
> 赞同：3
> 
> 时间：2012-10-16T18:04:06.997
> 
> 标签：asp.net-mvc, asp.net-mvc-3

目前它以字符串形式返回 HTML。有没有一种简单的方法可以让它正确输出 HTML？

```
@Html.LabelFor(m => m.DisplayName, 
                 Html.Raw(Html.Partial("_Tooltip", new Tooltip { 
                                     Title = Model.DisplayName, 
                                     Description = "This is my test description"}
                                     ).ToString())
                   .ToString()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:15:26.937

使用常规 HTML 怎么样？

```
<label for="DisplayName">
    @Html.Partial("_Tooltip", new Tooltip { Title = Model.DisplayName, Description = "This is my test description" }
</label> 
```

您遇到的问题是`LabelFor`帮助程序自动对标签进行 HTML 转义，假设您传递的只是一个不应包含 HTML 的常规字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:26:13.397

按照这个例子，我可以通过为它创建一个扩展方法来解决这个问题：[http ://weblogs.asp.net/imranbaloch/archive/2010/07/03/asp-net-mvc-labelfor-helper-with- html属性.aspx](http://weblogs.asp.net/imranbaloch/archive/2010/07/03/asp-net-mvc-labelfor-helper-with-htmlattributes.aspx)

除了我更新了这个：

```
tagBuilder.SetInnerText(innerText); 
```

对此：

```
tagBuilder.InnerHtml = innerText; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:23:22.393

如果您不想要原始 html，请`Html.Raw()`按如下方式删除该函数：

```
@Html.LabelFor(m => m.DisplayName, Html.Partial("_Tooltip", new Tooltip { Title = Model.DisplayName, Description = "This is my test description" }).ToString().ToString()) 
```

# php - mysql中的条件插入

> ID：12920765
> 
> 赞同：0
> 
> 时间：2012-10-16T18:04:10.360
> 
> 标签：php, mysql

我真的是mysql的初学者。在 oracle 中，我们可以使用**触发器**，它可以**检测**插入元素并允许在出现问题时完全中断插入命令。我发现mysql也支持触发器，但是我们如何使用它们来检测插入参数并在它们不满足规则时停止插入它们。

```
e.g. INSERT INTO accounts (userId, balance) VALUES ('12','450'); // Valid
     INSERT INTO accounts (userId, balance) VALUES ('12','-574'); // Invalid

if(balance<0){
  Do not insert;
}
else{
   Insert;
} 
```

**注意**：我正在处理**并发事务**，所以**严格需要触发器**，即最低级别的错误检测，这样没有人可以破解。任何帮助将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:15:36.780

或使用 BEFORE INSERT 触发器

```
DELIMITER $$

CREATE TRIGGER au_a_each BEFORE INSERT ON accounts FOR EACH ROW
BEGIN
IF new.balance > 0 THEN
  BEGIN
    INSERT INTO b (id,balance) VALUES (new.id, new.balance);
  END 
END $$
DELIMITER ; 
```

mysql 文档中的更多信息：http: [//dev.mysql.com/doc/refman/5.0/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html)

PS：编程课第 1 课（大写“o”） - 与任何编程/脚本语言的文档成为朋友

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:08:34.373

您可以使用 INSERT IGNORE 并在 mysql 中设置 ALTER TABLE 字段约束

# .net - 在 devArt dotConnect DbDataTable（可能是 DataTable）中获取当前选定的行

> ID：12920766
> 
> 赞同：0
> 
> 时间：2012-10-16T18:04:10.843
> 
> 标签：.net, ado.net, datatable, devart, dotconnect

我正在编写一个控件，它将简化 dotConnect DbDataTable 组件中的一些编辑过程。

编辑过程的一部分是能够在当前行上调用 BeginEdit() 和 EndEdit()。许多文章清楚地表明当前行不在 DataTable 中管理，但是我想知道这是否不完全准确，或者 DbDataDable（来自 dotConnect）是否添加了这一层。

我可以在表单上创建一个 DbDataTable（以 OracleDataTable 的形式），并附加 1）一个 DataGridView 和 2）一组数据绑定控件，例如 TextBoxes 和 CheckBoxes（使用两者上的 DataSource 属性）。

这意味着当网格中的当前行发生变化时，数据绑定控件中的值也会发生变化。数据绑定控件不知道 DataGridView 中的选择，但它们的值会相应更改。

我查看了所有属性并检查了有关桌子的所有内容，但我找不到任何远程有用的东西。我唯一的线索是 DefaultView 属性，它表明它可以包含光标位置，但没有更多关于此的公开。

dotConnect 的文档在使用示例方面非常缺乏，所以我也无法在那里找到很多东西（谷歌也没有）。

有没有人知道是否可以从 DbDataTable 组件中提取此数据，或者如果不关联 DataGridView（这使得它不那么灵活），我的组件是否将无法工作。另一种选择是创建一个 BindingSource，但是我必须更改所有控件上的绑定以使用该绑定源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:38:08.557

我最终使用的解决方法是使用 BindingSource。这也不是最好的解决方案，因为在 BindingSource 和 DbDataTable/OracleDataTable 之间的耦合中肯定存在一些错误行为。但是经过一些试验后，我也能够找出解决方法。

# wix - WiX、UAC、托管自定义操作和模拟

> ID：12920767
> 
> 赞同：9
> 
> 时间：2012-10-16T18:04:11.723
> 
> 标签：wix, uac, wix3.6

我使用嵌入自定义托管 (C#) 操作的 WiX 3.6 构建了一个 Windows 安装程序包。

在这个阶段，安装需要

1.  安装程序使用特定的本地管理员帐户运行（在这种情况下，SharePoint 安装程序帐户是本地管理员）
2.  用户帐户控制被禁用

我确实无法绕过要求 #1，因为托管操作只有在 SharePoint 安装程序帐户的上下文中运行时才能执行某些步骤。

我想删除要求 #2 并让安装程序正常运行，即使启用了 UAC 也是如此。

我已经非常广泛地研究了这个问题，但仍然无法让它发挥作用。我在我的包中设置了**InstallScope="perMachine"**，这似乎正确提示了 UAC 提升，但安装程序仍然失败并出现臭名昭著的 2869 错误。

主要问题是我的自定义操作配置为**Impersonate="yes"**因为它必须在当前用户的上下文中运行，而不是本地管理员帐户。当我在线搜索时，几乎所有“修复”都指向自定义操作中的**Impersonate="no"**，但这不是我的选择。

因此，我的问题是：有没有办法以当前用户的身份运行自定义托管操作，而无需完全禁用 UAC？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T11:18:23.760

当您使用自定义操作时，使用当前登录用户的凭据在`Impersonate="yes"`没有*管理权限的情况下运行。*

当`Impersonate="no"`您的自定义操作在*系统上下文*中运行时。在系统上下文中运行时，自定义操作对系统具有完全访问权限。

* * *

来自[WiX`CustomAction`元素](http://wixtoolset.org/documentation/manual/v3/xsd/wix/customaction.html)文档，**`Impersonate`属性**：

> 此属性指定作为 LocalSystem 执行的 Windows 安装程序在执行此自定义操作时是否应模拟安装用户的用户上下文。通常，该值应为“是”，*除非自定义操作需要提升权限才能将更改应用到机器*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-13T08:41:14.767

您在哪里引用自定义操作？

以提升的`.msi`权限运行可能还不够。为确保您的自定义操作与提升的权限一起使用，您还必须使用延迟的自定义操作并在`InstallExecuteSequence`. 这可能无法解决您的问题，但底部链接的文章详细解释了 msi 安装期间的 UAC 逻辑。

**基本上，并非安装程序所做的所有事情都带有权限，当**安装程序使用提升的权限时，您必须确保运行自定义操作。

来源：http: [//blogs.msdn.com/b/rflaming/archive/2006/09/30/uac-in-msi-notes-when-general-custom-action-mitigation-fails.aspx](http://blogs.msdn.com/b/rflaming/archive/2006/09/30/uac-in-msi-notes-when-general-custom-action-mitigation-fails.aspx)

我希望这些信息对您有用，如果您分享您的自定义操作代码，我可能会提供更多帮助。

# java - 在 Lucene 4 中查找搜索命中的位置

> ID：12920769
> 
> 赞同：4
> 
> 时间：2012-10-16T18:04:18.340
> 
> 标签：java, search, lucene

从 Lucene 搜索结果中提取术语位置的最佳方法是什么？

我正在使用带有自定义分析器的 Lucene 4.0，并尝试在每个文档中定位给定术语的每次出现。

一种选择是使用来自 Lucene 的高亮模块的代码。我还发现了问题：[从 Lucene 查找搜索命中的位置，](https://stackoverflow.com/questions/1311199/finding-the-position-of-search-hits-from-lucene)但解决方案仅适用于以前版本的 Lucene。

Lucene 4 中是否有与荧光笔不同的其他可能性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T07:32:37.900

[Lucene 迁移指南](https://lucene.apache.org/core/4_0_0/MIGRATE.html)非常适合帮助您将任何代码从旧版本的 Lucene 更改为新版本。

# java - 如何在用户点击的位置绘制三角形

> ID：12920771
> 
> 赞同：1
> 
> 时间：2012-10-16T18:04:25.297
> 
> 标签：java, swing, graphics, drawing

我正在尝试在用户单击的位置绘制一个三角形。

这是我到目前为止所做的：

```
int[] xPoints = {(xPosition / 2), xPosition, (xPosition + (xPosition / 2))};
int[] yPoints = {(yPosition + yPosition), yPosition, (yPosition + yPosition)};
g.drawPolygon(xPoints, yPoints, 3); 
```

问题是三角形的大小取决于 xPosition 和 yPosition（这些取自鼠标坐标）。

有什么想法可以在指定的 X 和 Y 坐标处放置一个固定大小的三角形吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:12:12.580

对于第一点和第三点，不要使用`xPosition / 2`and ，而是使用类似`yPosition`的固定偏移量`xPosition`：

```
//use whatever size you want
//this will make a triangle with the top at the clicked point
int halfWidth = 50, height = 100; 
int[] xPoints = { xPosition - halfWidth, xPosition, xPosition + halfWidth };
int[] yPoints = { yPosition + height, yPosition, yPosition + height }; 
```

您可以随意调整大小，但如果您希望它是等边的，那么`height`应该是`Math.sqrt(3) * halfWidth`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:08:32.280

选择一个尺寸并将其命名为 SIZE：

```
int[] xPoints = {xPosition, xPosition, xPosition + SIZE))};
int[] yPoints = {yPosition, yPosition + SIZE, yPosition))}; 
```

这将绘制一个不会在不同点改变大小的三角形。但是，如果您想要某种指向某个方向的三角形，您将需要使用一些几何学，也许还需要使用三角学来进行计算。

# multithreading - Windows Azure Worker Role，主线程怎么办？

> ID：12920782
> 
> 赞同：2
> 
> 时间：2012-10-16T18:05:45.140
> 
> 标签：multithreading, azure, background-process

因此，我们正在使用 Windows azure 设置一个工作角色，它以非常高的 CPU 利用率运行。我认为这与本节有关，但我不确定该怎么做。每个启动的单独线程都有自己的睡眠，但主线程只是在一个 while 循环中运行。不应该在那里睡觉吗？

```
public class WorkerRole : RoleEntryPoint
    {
        private List<ProcessBase> backgroundProcesses = new List<ProcessBase>();

        public override void Run()
        {
            // This is a sample worker implementation. Replace with your logic.
            Trace.WriteLine("BackgroundProcesses entry point called", "Information");

            foreach (ProcessBase process in backgroundProcesses)
            {
                if (process.Active)
                {
                    Task.Factory.StartNew(process.Run, TaskCreationOptions.LongRunning);
                }
            }

            while (true) { }
        } 
```

这样的事情怎么样，这样合适吗？

```
 public override void Run()
        {
            // This is a sample worker implementation. Replace with your logic.
            Trace.WriteLine("BackgroundProcesses entry point called", "Information");

            List<Task> TaskList = new List<Task>();

            foreach (ProcessBase process in backgroundProcesses)
            {
                if (process.Active)
                {
                    TaskList.Add(Task.Factory.StartNew(process.Run, TaskCreationOptions.LongRunning));
                }
            }

            Task.WaitAll(TaskList.ToArray());
            //while (true) {  }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:42:11.647

你的改变在我看来不错。有时我使用`Thread.Sleep(Timeout.Infinite)`.

你测试过吗？它会降低CPU使用率吗？可能是任务本身实际上消耗了大量 CPU。我们还不确定while循环是罪魁祸首。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:42:31.753

该`while`循环可能导致您的 CPU 过高。这基本上是一个无限的忙等待。只要您等待的任务永远不会退出，您的第二个代码示例应该可以正常工作。在我个人看来，最好的解决方案是[我在此处的回答](https://stackoverflow.com/questions/9561746/using-thread-sleep-or-timer-in-azure-worker-role-in-net/9589330#9589330)中概述的解决方案。如果你不喜欢这样，一个更简单的解决方案是在循环中添加一个 Sleep() 。例如：

```
while(true){
    Thread.Sleep(10000);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T07:31:42.047

`while`带有空主体的循环将完全加载线程被调度到的 CPU 内核。这是个坏主意——你浪费了 CPU 时间。

一个更好的解决方案是插入一个`Thread.Sleep()`周期从 100 毫秒到无穷大的周期 - 这并不重要。

```
while( true ) {
    Thread.Sleep( /*anything > 100 */ );
} 
```

一旦你摆脱了空循环体，你就不可能做得比这更好 - 无论你在循环中做什么，当实例停止时，线程无论如何都会终止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T17:07:36.760

昨晚在登台测试后，今天早上刚刚将其部署到生产环境中。似乎工作得很好。后台进程的 CPU 使用率从 99.5% 下降到平均 0.03% ...

```
 public override void Run()
        {
            // This is a sample worker implementation. Replace with your logic.
            Trace.WriteLine("BackgroundProcesses entry point called", "Information");

            List<Task> TaskList = new List<Task>();

            foreach (ProcessBase process in backgroundProcesses)
            {
                if (process.Active)
                {
                    TaskList.Add(Task.Factory.StartNew(process.Run, TaskCreationOptions.LongRunning));
                }
            }

            Task.WaitAll(TaskList.ToArray());
            //while (true) {  }
        } 
```

# jquery - jsfiddle 上的 bootstrap / jquery 弹出框

> ID：12920783
> 
> 赞同：0
> 
> 时间：2012-10-16T18:05:55.120
> 
> 标签：jquery, css, twitter-bootstrap

我无法让引导程序的弹出框在 jsfiddle 上正常工作。

这是链接：http: [//jsfiddle.net/fX7hn/17/](http://jsfiddle.net/fX7hn/17/)

我已经从引导 CDN 中包含了托管的 bootstrap.css 和 boostrap.js，但我仍然收到错误提示某些内容未正确加载：

`Uncaught TypeError: Object [object Object] has no method 'popover'`

有什么明显的吗？

更新：修复了 js lib 的错误路径，错误消失了，但弹出框仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:11:23.540

由于某种原因，它没有正确包含它..

这是在 HTML 中：

```
<script type='text/javascript' src="http://fiddle.jshell.net/_display/"//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/js/bootstrap.min.js"></script> 
```

通过将以下内容添加到 HTML 来手动包含它

```
<script type='text/javascript' src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.1.1/js/bootstrap.min.js"></script> 
```

* * *

在将任何可以接受它的元素放在页面上之前绑定 click 事件。移动

```
$("a.info").popover().click(function(e) {
    e.preventDefault()
}); 
```

至底部。

# jquery - UI Muliselect小部件问题

> ID：12920784
> 
> 赞同：1
> 
> 时间：2012-10-16T18:05:56.083
> 
> 标签：jquery, user-interface, filter, multi-select

我在使用 UI 多选小部件来过滤一系列产品照片时遇到问题。It works fine when only one box in the widget is selected, however, when multiple boxes are selected it displays results for the entire catalog as opposed to just the selected categories. 我想也许我错误地加入了复选框数组。我编写了一系列具有不同产品属性的多选小部件。在用户从他们提交的每个选项中进行选择后，单击一个单独的按钮，然后过滤结果。这是我的代码示例。谢谢您的帮助。

```
$('button.submitFilters').click(function() {
    //FILTER VALUES:
    var genreVal = $('#filterGenre').multiselect("getChecked").map(function()  {
        return this.value;
        }).get().join(); 
```

然后，过滤结果：

```
$('.main article[class*=' + genreVal + '][class*=' + sizeVal + '][class*=' + orientVal + '][class*=' + subjVal + '][class*=' + artistVal + ']').show(); 
```

# javascript - 如何调整桌子内桌子的高度

> ID：12920786
> 
> 赞同：1
> 
> 时间：2012-10-16T18:06:01.873
> 
> 标签：javascript, jquery, html, toggle

我有一个网页，其布局是使用表格构建的

```
<table id="page-head">
 <tr style="vertical-align: top">
  <td class="s-part">
     <table class="s-table" style="height: 131px; ">
        <tr class="s-head"><td></td></tr>
        <tr class="s-body"><td></td></tr>
     </table>
  </td>
  <td class="main-part">
     <div><!-- The Main Part --></div>
  </td>
 </tr>
</table>

<!-- Menu -->

<table id="page-foot"> . . . </table> 
```

主要部分包含页面的内容

-> 在页眉中，它包含徽标和站点链接

-> 在 Page-Foot 中，它包含页面的实际内容。

画面如下：

[页面截图](https://lh3.googleusercontent.com/-F78OxWID7Ro/UH2eSXlAdYI/AAAAAAAAAOs/bBRyuVDdeUw/s646/ss12.png)

我遇到了一个问题：s 部分是一张桌子，我必须调整它的大小以匹配主要部分的高度。所以我使用了这个 jQuery 脚本

```
var adjustSideBar = function () {
 var e = $("#page-head");
 if ($(".s-table", e).outerHeight() < $(".main-part", e).outerHeight()) {
     $(".s-table", e).css({ "height": $(".main-part", e).outerHeight() - 5 });
 }
 var e = $("#page-foot");
 if ($(".s-table", e).outerHeight() < $(".main-part", e).outerHeight()) {
     $(".s-table", e).css({ "height": $(".main-part", e).outerHeight() - 5 });
 }
} 
```

所以它从上面的屏幕截图中自动调整为（1）和（3）所示

现在的问题是，当我使用 jQuery PlugIn 等动态内容并在 page-foot -> main-part 中切换 div 元素时，s-part 不会调整大小。每当我切换页面中的内容时，我再次调用了 adjustSideBar() 函数。但结果如下：

1.  切换前，2\. 切换后 & 3\. 再次切换“秒 1”：

[切换屏幕截图](https://lh5.googleusercontent.com/-y38z-25Ji-o/UH2hOAljKiI/AAAAAAAAAPU/_23OqEQfOSo/s512/ss13.png)

注意：灰色条是使用 jQuery 插件构建的扩展器。

函数调用从这里完成：

```
$("div[id^='sec']").click(function (e) {
    $(".e-content", this).slideToggle(); 
            // this to toggle the content of the Sec #
    adjustSideBar();
}); 
```

* * *

伙计们，我现在可以知道该怎么做，调整内表 s 部分的大小，使 s 部分和主要部分的高度相同吗？

如果您愿意，我还可以提供涉及的其他代码。但我认为他们并不关心这里。[此外，我使用 PHP 进行服务器端编程，如果我也可以用它做点什么]

先感谢您。

PS：我现在不允许发布图片。所以我只是超链接它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:39:59.680

首先，我不应该使用表格进行布局。

对于答案，您应该使用 slideToggle 的回调在动画之后调用侧边栏调整，而不是像这样在 slideToggle 函数之后立即调用它：

```
$("div[id^='sec']").click(function (e) {
    $(".e-content", this).slideToggle(500, adjustSideBar);
} 
```

即使这样，它也只会在切换完成后首先设置动画并调整背景。我不确定这会完全解决您的问题，但您可以解决一些问题。

我建议使用 http://jsfiddle.net/ 或类似的东西来做一个测试用例，这样你的问题就可以更容易地测试。

# java - 将数组的内容写入字符串

> ID：12920789
> 
> 赞同：-3
> 
> 时间：2012-10-16T18:06:16.170
> 
> 标签：java, arrays, string

我有一个二维字符数组`board[row][col]`，旨在模拟 Xs 和 Os 游戏的游戏板。（作为参考，数组中的每个元素都是 X、O 或 ' '，表示在该方格中没有移动的空格。）

我正在尝试逐行获取数组中所有字符的字符串。也就是说，第一行将打印到字符串，然后第二行将附加到该字符串，直到遍历所有行。最后，结果应该看起来像这个游戏板的一串符号，例如“XXO X OOX”：

```
X X O
  X  
O O X 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:10:11.370

尝试：

```
StringBuilder str = new StringBuilder();
for (int i = 0; i < 3; i++)
 for (int j = 0; j < 3; j++)
   str.append(board[i][j]); 
```

你可以找到更多关于`StringBuilder` [这里](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:13:11.543

我认为更好的解决方案是这样的

```
 char [][] board = new char[][]{{'x','x','o',},{'x',},{'o','o','x',}};

        StringBuilder builder = new StringBuilder();

        for (char[] aBoard : board) 
            builder.append(String.valueOf(aBoard)).append(" ");

       System.out.println(builder.toString()); 
```

出去

```
xxo x oox 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T18:11:23.903

您可以尝试以下方法：

```
char[][] board = {{'X', 'O', 'X'}, {0, 'O', 0}, {'X', 'O', 'X'}};

String s = "";
for (char[] row : board) {
    for (char c : row)
        s += c == 0 ? " " : c;
    s += "\n";
}

System.out.println(s); 
```

输出：

```
XOX  
 O   
XOX 
```

* * *

**编辑：**如果您希望输出间隔，您可以使用

```
for (char[] row : board) {
    for (char c : row)
        s += c == 0 ? "  " : c + " ";
    s += "\n";
} 
```

输出：

```
X O X 
  O   
X O X 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:09:37.217

有这样的嵌套循环：

```
for (int i = 0; i < board.length; i++)
{
    for (int j = 0; j < board[0].length; j++)
    {
        System.out.print(board[i][j] + " ");
    }
    System.out.println();
} 
```

第一个打印语句将把一行中的所有字符加在一起，然后在第二个循环之外的下一个打印语句将附加一个换行符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T18:10:33.450

```
 for(int i=0; i< board.length; i++){
     for(int j=0; i< board[i].length; j++){
        System.out.print(""+board[i][j]);  //<- use print() here
      }
      System.out.println(); //<- use println() here
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T18:12:08.940

```
 String[][] board = {{"X", "X","O"},{" ", "X", " "},{"O", "O", "X"}};
  for(int i = 0; i < board.length; i++) {
        for(int j = 0; j < board[0].length; j++) {
            System.out.print(board[i][j] + " ");
        }
        System.out.println();
    } 
```

# ruby-on-rails - sass-rails 图像路径和资产路径在提供资产主机时显示错误的图像路径

> ID：12920790
> 
> 赞同：0
> 
> 时间：2012-10-16T18:06:17.870
> 
> 标签：ruby-on-rails, compass-sass, sass

在 sass-rails 中使用 image-path 辅助方法时

像这样的 scss 语句：

```
 image-url('logo.png'); 
```

生成一个奇怪的 url，如下所示：

```
"//www3.myassets.com/assets/logo.png 
```

www3.myassets.com 来自环境中设置的资产主机属性。

为什么会这样？我期望以下输出：

```
 "/logo.png" 
```

它可能不相关，但我们在项目上也有指南针，尽管我的调查让我相信指南针方法不是正在使用的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T00:42:47.573

1.  网址并不奇怪。Skippng 协议允许浏览器使用页面所在的相同协议，因此使用 http 加载的页面将使用 http 加载资产，而使用 https 加载的页面将使用 https 加载资产。

2.  就像在rails中一样，`image_url`确切`image_path`的意思是，前者是一个完整的URL，而后者只是一个相对路径（相对于URL，它通常是Web服务器内的绝对路径）

# c# - C# 和 sqlite 日期，格式问题

> ID：12920792
> 
> 赞同：0
> 
> 时间：2012-10-16T18:06:23.267
> 
> 标签：c#, wpf, sqlite

我有一个使用 sqlite 作为本地数据库的应用程序，但是日期格式有问题。

我使用 System.Data.Sqlite 作为数据库提供程序，并创建了我的 edmx，它是从 sqlite 数据库创建的。

当我对数据库进行查询时，在具有某些日期字段的实体类中，我可以看到 dateTime 属性具有正确的格式，在我的情况下，dd mm yyyy 和 18:00（小时是 24 小时，例如，不是中午 12 点）。

但是，当我将（我使用 WPF 和 MVVM）绑定到 dataGrid 时，在日期列中，日期的格式是 mm dd yyyy 12pm（小时不是 24）。

为什么？，如果我收到格式正确的数据，因为实体对象有正确格式的日期，我在 dataGrid 中看到其他格式的信息？当我使用 SQL Server 作为数据库时，我没有这个问题，在 dataGrid 中格式是正确的。

我的 Windows 配置为 ES（西班牙）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:17:16.523

使用可以使用这个xaml

```
 Binding="{Binding MyColumn, StringFormat=MM/dd/yyyy}" 
```

在标签中使用此代码`DataGridTextColumn`。

这是一个示例代码。

```
<sdk:DataGrid.Columns>
        <sdk:DataGridTextColumn 
            Header="MyHeader" 
            Width="Size"
            Binding="{Binding MyDateColumn, StringFormat=MM/dd/yyyy}" />
</sdk:DataGrid.Columns> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:21:02.193

我猜想问题出在 DateTime.Kind 属性上。日期可以是本地、UTC 或未知的。检查日期是否以相同的种类从数据库中恢复，如果没有，请调整 Sqlite 连接参数以使用您希望使用的种类。

在我看来，处理这个问题的正确方法是始终将日期/时间作为 UTC 存储在数据库中，并始终使用等效的 UTC 表示形式查询数据库。您可以在 Sqlite 连接设置中将 DateTime 类型设置为 UTC。如果您希望对象始终以这种方式表示时间，则可以确保您的对象在属性设置器中具有本地时间，如下所示：

```
public DateTime YourDateTimeProperty
{
    get { return _dateTime; }
    set { _dateTime = value.ToLocalTime(); }
} 
```

这应该确保从数据库加载后时间保持在本地。

# android - Android 编程：如何在矩形中绘制多行文本？

> ID：12920794
> 
> 赞同：9
> 
> 时间：2012-10-16T18:06:35.443
> 
> 标签：android, android-layout, android-canvas

我看过很多处理类似问题的帖子，但没有一个对我有用。在`Canvas`中，我有一个大小为 200 像素 x 200 像素的矩形，我想在这个矩形中写入文本。文本不需要填满整个矩形，但重要的是当它到达矩形的末尾时应该自动换行。我怎样才能在 Android 中做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-16T18:21:00.967

您可以使用[静态布局](http://developer.android.com/reference/android/text/StaticLayout.html)。

```
RectF rect = new RectF(....)

StaticLayout sl = new StaticLayout("This is my text that must fit to a rectangle", textPaint, (int)rect.width(), Layout.Alignment.ALIGN_CENTER, 1, 1, false);

canvas.save();
canvas.translate(rect.left, rect.top);
sl.draw(canvas);
canvas.restore(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T18:11:25.943

您需要测量文本，然后在代码中自行分解。 [Paint.measureText](http://developer.android.com/reference/android/graphics/Paint.html#measureText%28java.lang.String%29)是您所需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-17T16:40:32.777

```
public class MutilineText {
private String mText;
private int fontSize = 50;

public MutilineText(String text) {

    this.mText = text;
}

public String getText() {
    return mText;
}

public void setText(String text) {
    mText = text;
}

public void draw(Canvas canvas, Rect drawSpace) {

    Paint paintText = new Paint(Paint.ANTI_ALIAS_FLAG);

    paintText.setAntiAlias(true);
    paintText.setDither(true);
    paintText.setColor(Color.BLACK);
    paintText.setStyle(Paint.Style.FILL);
    paintText.setStrokeWidth(3);
    paintText.setTextSize(fontSize);
    drawMultilineText(mText, drawSpace.left, drawSpace.top + 15, paintText, canvas, fontSize, drawSpace);
}

private void drawMultilineText(String str, int x, int y, Paint paint, Canvas canvas, int fontSize, Rect drawSpace) {
    int lineHeight = 0;
    int yoffset = 0;
    String[] lines = str.split("\n");

    lineHeight = (int) (calculateHeightFromFontSize(str, fontSize) * 1.4);
    String line = "";
    for (int i = 0; i < lines.length; ++i) {
        if (calculateWidthFromFontSize(line, fontSize) <= drawSpace.width()) {
            canvas.drawText(line, x + 30, y + yoffset, paint);
            yoffset = yoffset + lineHeight;
            line = lines[i];
        } else {
            canvas.drawText(divideString(line, drawSpace.width()), x + 30, y + yoffset, paint);
        }
    }

}

private String divideString(String inputString, int bound) {
    String ret = inputString;

    while (calculateWidthFromFontSize(ret, fontSize) >= bound) {
        ret = ret.substring(0, (ret.length() - 1));
    }
    ret = ret.substring(0, ret.length() - 3) + "...";

    return ret;
}

private int calculateWidthFromFontSize(String testString, int currentSize) {
    Rect bounds = new Rect();
    Paint paint = new Paint();
    paint.setTextSize(currentSize);
    paint.getTextBounds(testString, 0, testString.length(), bounds);

    return (int) Math.ceil(bounds.width());
}

private int calculateHeightFromFontSize(String testString, int currentSize) {
    Rect bounds = new Rect();
    Paint paint = new Paint();
    paint.setTextSize(currentSize);
    paint.getTextBounds(testString, 0, testString.length(), bounds);

    return (int) Math.ceil(bounds.height());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:18:03.990

您是否可以在画布顶部使用文本字段并为该文本字段启用多行 - 然后您将在文本字段中完成换行符是免费的;-)

# php - 响应更改请求 URI 的 PUT 请求的“正确”方式

> ID：12920795
> 
> 赞同：0
> 
> 时间：2012-10-16T18:06:47.143
> 
> 标签：php, ajax, http

在我的一个 Web 项目中，我正在尝试以（至少几乎）RESTful 方式实现我的服务器后端。为此，我也非常热衷于在不同情况下使用“正确”的 HTTP 响应状态代码。

我面临的问题如下：我的浏览器/javascript/ajax 客户端允许更改我的数据库中持久对象的属性。由于这个 PUT 请求，名称/标识符以及访问该对象的 URI（特别是“资源”部分）会发生变化。

目前，我使用 301 代码并将新的 URI 放在位置字段中，因为这是我从[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html理解的](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

这是它的意图吗？或者什么是“正确”的回应？特别是因为，如果它是正确的方式，我必须以某种方式禁用 301 的默认浏览器处理（firefox 询问我是否要再次发送表单数据 - 到新的 URI）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:21:51.313

不，301 表示未处理 PUT 请求，因为资源已移动（这就是 UA 想要重做请求的原因）。

# python - 在 matplotlib 中标记乳胶中的刻度

> ID：12920800
> 
> 赞同：13
> 
> 时间：2012-10-16T18:07:03.770
> 
> 标签：python, latex, matplotlib

在 matplotlib 的绘图中，我特别想在乳胶中将 x 轴上的点标记为 pi/2、pi、3pi/2 等。我该怎么做？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-16T18:33:36.223

该`plt.xticks`命令可用于放置 LaTeX 刻度线。有关更多详细信息，请参阅此[文档页面](http://matplotlib.sourceforge.net/users/usetex.html)。

```
import matplotlib as mpl
import matplotlib.pyplot as plt
import numpy as np

cos = np.cos
pi = np.pi

# This is not necessary if `text.usetex : True` is already set in `matplotlibrc`.    
mpl.rc('text', usetex = True)
fig = plt.figure()
ax = fig.add_subplot(1, 1, 1)
t = np.linspace(0.0, 2*pi, 100)
s = cos(t)
plt.plot(t, s)

plt.xticks([0, pi/2, pi, 3*pi/2, 2*pi],
           ['$0$', r'$\frac{\pi}{2}$', r'$\pi$', r'$\frac{3\pi}{2}$', r'$2\pi$'])
plt.show() 
```

![在此处输入图像描述](../Images/c47c9ad9b7989a52c90fe4e184895958.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-30T14:49:53.453

另一种可能性是更新`pyplot rcParams`.

```
import matplotlib.pyplot as plt
import numpy as np

cos = np.cos
pi  = np.pi

params = {'mathtext.default': 'regular' }  # Allows tex-style title & labels
plt.rcParams.update(params)

fig = plt.figure()
ax  = fig.add_subplot(1, 1, 1)
t   = np.linspace(0.0, 2*pi, 100)
s   = cos(t)
plt.plot(t, s)

ax.set_xticks([0, pi/2, pi, 3*pi/2, 2*pi])
ax.set_xticklabels(['$0$', r'$\frac{\pi}{2}$', r'$\pi$', r'$\frac{3\pi}{2}$', r'$2\pi$'])
plt.show() 
```

[输出](https://i.stack.imgur.com/qDxff.png)

# r - 键列数不同时合并data.table

> ID：12920803
> 
> 赞同：9
> 
> 时间：2012-10-16T18:07:14.513
> 
> 标签：r, merge, data.table

我试图`data.table`从文档中理解逻辑并且有点不清楚。我知道我可以试试这个看看会发生什么，但我想确保没有病态的情况，因此想知道逻辑是如何实际编码的。当两个`data.table`对象具有不同数量的键列时，例如`a`有 2 和`b`3，并且您运行`c <- a[b]`, 将简单`a`地`b`合并在前两个键列上，或者将 a 中的第三列自动合并到中的第三个键列`b`? 一个例子：

```
require(data.table)
a <- data.table(id=1:10, t=1:20, v=1:40, key=c("id", "t"))
b <- data.table(id=1:10, v2=1:20, key="id")
c <- a[b] 
```

这应该选择与中的键列`a`匹配的行。例如，对于in ，有 2 行 in和 4 行应该在 中生成 8 行。这确实是似乎发生的事情：`id``b``id==1``b``b``a``c`

```
> head(c,10)
    id  t  v v2
 1:  1  1  1  1
 2:  1  1 21  1
 3:  1 11 11  1
 4:  1 11 31  1
 5:  1  1  1 11
 6:  1  1 21 11
 7:  1 11 11 11
 8:  1 11 31 11
 9:  2  2  2  2
10:  2  2 22  2 
```

尝试它的另一种方法是：

```
d <-b[a] 
```

这应该做同样的事情：对于其中的每一行都`a`应该选择匹配的行`b`：因为`a`有一个额外的键列，`t`所以该列不应该用于匹配，并且应该只基于第一个键列`id`进行连接。情况似乎是这样的：

```
> head(d,10)
    id v2  t  v
 1:  1  1  1  1
 2:  1 11  1  1
 3:  1  1  1 21
 4:  1 11  1 21
 5:  1  1 11 11
 6:  1 11 11 11
 7:  1  1 11 31
 8:  1 11 11 31
 9:  2  2  2  2
10:  2 12  2  2 
```

有人可以确认吗？需要明确的是：是`a`曾经在任何合并中使用过的第三个键列，还是`data.table`仅使用`min(length(key(DT)))`两个表中的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T19:41:35.963

好问题。首先正确的术语是（来自`?data.table`）：

> [A data.table] 可能有一个或多个*列的**一个键*。此键可用于行索引而不是行名。

 *所以“key”（单数）不是“keys”（复数）。目前，我们可以摆脱“钥匙”。*但是当将来添加辅助键时*，可能会有多个键。每个*键*（单数）可以有多个*列*（复数）。

否则你是绝对正确的。根据其他人的反馈，以下段落在 v1.8.2 中进行了改进。来自`?data.table`：

> 当 i 是 data.table 时，x 必须有一个键。i 使用 x 的键连接到 x，并返回 x 中匹配的行。在 i 中的每一列与 x 的键中的每一列之间执行 equi-join；即，i 的第 1 列与 x 的键的第 1 列匹配，第 2 列与第 2 列匹配，依此类推。匹配是在 O(log n) 时间内编译的 C 中的二进制搜索。如果 i 的列少于 x 的键，则 x 的许多行通常会匹配 i 的每一行，因为并非 x 的所有键列都将连接到（常见用例）。如果 i 的列多于 x 的键，则 i 中未参与连接的列将包含在结果中。如果 i 也有一个键，则 i 的键列用于匹配 x 的键列（i 的键的第 1 列连接到 x 的键的第 1 列，第 2 列到第 2 列，依此类推）并执行两个表的二进制合并。在所有连接中，列的名称是不相关的。x 的键的列按顺序连接，当 i 未键入时从 i 的第 1 列开始，或者从 i 的键的第 1 列开始。

* * *

根据评论，在 v1.8.3（在 R-Forge 上）中，现在显示为（更改为粗体）：

> 当 i 是 data.table 时，x 必须有一个键。i 使用 x 的键连接到 x，并返回 x 中匹配的行。在 i 中的每一列与 x 的键中的每一列之间执行 equi-join；即，i 的第 1 列与 x 的键的第 1 列匹配，第 2 列与第 2 列匹配，依此类推。匹配是在 O(log n) 时间内编译的 C 中的二进制搜索。如果 i 的列少于 x 的键，则并非所有 x 的键列都将连接到（常见用例），并且 x 的许多行将（通常）与 i 的每一行匹配。如果 i 的列多于 x 的键，则 i 中未参与连接的列将包含在结果中。如果 i 也有一个键，则 i 的键列用于匹配 x 的键列（i 的键的第 1 列连接到 x 的键的第 1 列，**i 的 key 的第 2 列到 x 的 key 的第 2 列，以此类推，只要较短的 key** ) 并执行两个表的二进制合并。在所有连接中，列的名称是不相关的；x 的键的列按顺序连接，当 i 未键入时从 i 的第 1 列开始，或者从 i 的键的第 1 列开始。**在代码中，连接列的数量由 min(length(key(x)),if (haskey(i)) length(key(i)) else ncol(i)) 决定。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:32:55.437

引用 data.table[常见问题](http://cran.r-project.org/web/packages/data.table/vignettes/datatable-faq.pdf)：

> X[Y] 是一个连接，使用 Y（或 Y 的键，如果有的话）作为索引来查找 X 的行。Y[X] 是一个连接，使用 X（或 X 的键，如果有的话）作为索引来查找 Y 的行。merge(X,Y) 同时做这两种方式。X[Y] 和 Y[X] 的行数通常不同；而 merge(X,Y) 和 merge(Y,X) 返回的行数是相同的。*

# c++ - 获取模板类对象地址导致模板参数全实例化

> ID：12920808
> 
> 赞同：9
> 
> 时间：2012-10-16T18:07:37.150
> 
> 标签：c++, templates, gcc, instantiation

使用 g++ 4.6 和 4.8 编译此代码时出现错误。g++ 4.2 和 4.4 都可以。这是一个错误还是一些新的语言功能？

```
template <typename T>
struct A { typedef typename T::value_type type; };

template <typename U>
struct B
{
  void bar () { }
  void foo ()
  {
    // OK
    this->bar ();

    // OK
    (*this).bar ();

    // Error in g++ 4.6-4.8 
    // leads to full instantiating of template arg "U"
    (&*this)->bar ();
  }
};

int main ()
{
  B< A<void> > b;
  b.foo ();
  return 0;
} 
```

g++ inst.cc

```
inst.cc: In instantiation of ‘struct A<void>’:
inst.cc:20:5:   required from ‘void B<U>::foo() [with U = A<void>]’
inst.cc:27:10:   required from here
inst.cc:3:34: error: ‘void’ is not a class, struct, or union type
   typedef typename T::value_type type;
                                  ^ 
```

**更新 1**：我知道 A 不能被实例化。

问题是：为什么编译器试图在“(&*this)->bar ()”行而不是在“this->bar ()”或“(*this).bar ()”行实例化它？

**更新 2**：

建议的解决方法`addressof (object)`对我不起作用，因为实际上我在尝试使用`std::bind (&B::bar, this)`. 真正的代码当然要复杂得多，并且`bind`没有单独使用，但问题是追溯到简单的`std::bind`表达式。

我不想重写或重新发明`std::bind`，所以我不得不使用*CRTP*让它工作：

```
#include <tr1/functional>
template <typename T>
struct A { typedef typename T::value_type type; };

template <typename Derived, typename U>
struct B
{
  Derived* derived (void) { return static_cast<Derived*>(this); }

  void bar () { }
  void foo ()
  {
    // error with recent compiler.
    // std::tr1::bind (&B::bar, this) ();

    // now ok
    std::tr1::bind (&Derived::bar, derived ()) ();
  }
};

struct C: B<C, A<void> >
{
};

int main ()
{
  C c;
  c.foo ();
  return 0;
} 
```

我发现这样的错误和解决方法是完全不合逻辑的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T19:01:52.463

## 分析/说明：

您看到的是*浅*实例化，而不是完整的实例化（参见下面的证明）。

ADL 是这里的罪魁祸首。

> **假设 II**我在这里怀疑与 ADL 相关的事情（类可以具有内联声明的静态自由函数（朋友）。也许编译器需要实例化整个类模板以确保它已经看到其中声明的运算符重载（为了做重载决议）。

标准在这里支持我：§3.4.2（n3337 中的 p46）：

> **²** *[snip]*命名空间和类的集合完全由**函数参数的类型**（以及任何模板模板参数的命名空间）决定。*[snip]*命名空间和类的集合通过以下方式确定：
> 
> *   *[剪辑]*
>     
>     
> *   如果 T 是类类型（包括联合），则其关联的类是：类本身；它所属的类别(如有的话)；及其直接和间接基类。其*关联名称空间*是其关联类是其成员的名称空间。此外，如果 T 是类模板特化，则其关联的命名空间和类还包括：*与为模板类型参数*（不包括模板模板参数）提供的模板实参类型相关联*的命名空间**和类；***任何模板模板参数都是其成员的命名空间；以及用作模板模板参数的任何成员模板是其成员的类。

粗体短语包括`class A<void>`作为 ADL 的查找名称空间。

## 解决方法：

在您的情况下`std::addressof(b)`可以使用，而不是`&b`它会工作。

## 示范：

见[http://liveworkspace.org/code/4f85a06598eebe1d8060112be36f4a29](http://liveworkspace.org/code/4f85a06598eebe1d8060112be36f4a29)

注意：*`(unqualified-id)`*技巧在标准的§3.4.2中定义）

```
#include <vector>
#include <iostream>

struct Base {};

template <typename U> struct B : Base { };

template <typename T> struct A {
    typedef typename T::value_type type;
    friend void freefunction(B<A>&) { std::cout << "ADL was here!\n"; }
};

void freefunction(Base& /*acceptAll*/) {}

int main ()
{
    B< A<std::vector<int> > >  a;
    B< A<void> >               b;

    // surrounding with parens prevents ADL:
    (freefunction)(a);
    (freefunction)(b); // selects ::freefunction(Base&)

    freefunction(a);   // ADL selects friend inline freefunction(B< A<std::vector<int> > >&)
  //freefunction(b);   // ADL fails: template arg cannot be (shallow) instantiated
} 
```

印刷

```
ADL was here! 
```

此外，您可以验证模板参数 ( `A<void>`) 是否仅被*浅实例化*。**将格式错误的 typedef 移动到成员函数**中可以解决问题：

```
template <typename T> struct A {
    void uninstantiated() {
        typedef typename T::value_type type;
    }
    friend void freefunction(B<A>&) { std::cout << "ADL was here!\n"; }
}; 
```

输出（**[http://liveworkspace.org/code/a15c933293281d0926e8b1ff39180079](http://liveworkspace.org/code/a15c933293281d0926e8b1ff39180079)**）

```
ADL was here!
ADL was here! 
```

* * *

历史：

1.  我注意到`operator&`是问题所在，但`std::addressof()`没关系！
2.  我注意到使用*任何（重载）运算符*似乎都会触发这种行为

这将我引向我的“假设 II”（见上文）

# c++ - 带有Opencv c ++的自适应中值滤波器

> ID：12920809
> 
> 赞同：-3
> 
> 时间：2012-10-16T18:07:53.950
> 
> 标签：c++, image, image-processing, opencv, codeblocks

我在编写自适应中位数的代码时遇到了问题。

计算最小强度像素最大 n 中值的最佳方法是什么？

直到现在我读取了图像像素的每个值

```
for (int y = 0; y < h; y++)
{
   uchar *ptr = (uchar*)(img->imageData + y * step);
   for (int x = 0; x < w; x++){
    printf("%u, ", ptr[x]);
   } 
   printf("\n");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:26:08.913

对于最小/最大像素，您需要记录第一个像素的值，然后将其他像素与其进行比较，如果它分别较低/较高，则存储新值。OpenCV 提供了[cv::minmaxLoc](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html#minmaxloc)来简化此操作。

对于中位数，您需要对所有像素进行排序并选择中间的像素（当然，一旦排序，找到最小值/最大值是微不足道的，因为它们将位于列表的任一端）。这更棘手，你走了多远，什么不起作用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:46:18.033

对于矩形窗口中的最大值和最小值，我会参考[van Herk 的膨胀算法](http://www.google.hu/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CC4QFjAB&url=http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.4.1969&rep=rep1&type=pdf&ei=LON9UODGCO7R4QSbtIHQBw&usg=AFQjCNHC92TOv9IS9hmcSA11BRMa2mX_rw&sig2=QLoEiEZHnsqdNzP3o_oVsw)，因为灰度膨胀对应于最大值算子，而灰度腐蚀到最小值算子和矩形结构元素可以分解为垂直线和水平线.

对于中值滤波，我会考虑[移动直方图技术](http://www.uio.no/studier/emner/matnat/ifi/INF2310/v12/undervisningsmateriale/artikler/Huang-etal-median.pdf)。

# javascript - 模态掩码不掩盖整个窗口

> ID：12920811
> 
> 赞同：0
> 
> 时间：2012-10-16T18:07:59.193
> 
> 标签：javascript, modal-dialog

我正在尝试在我的页面上实现模式窗口。想法是显示一个带有项目屏幕截图和代码示例的弹出窗口。现在我已经实现了带有屏幕截图的弹出窗口。似乎工作正常，除了有 2 个问题。

1) mask 没有覆盖整个窗口。2）一旦弹出窗口关闭，如果我再次单击屏幕截图而不刷新，则不会显示蒙版。

[网页](http://haripriyaa.zymichost.com/projects.html)

```
<div class="screenshot">
            <div class="case">
                <div class="thumb"> <a id="hooversMobile" href="#dialog" name="modal" title="Hoover's Mobile Site"><img src="images/proj_over_2.png" alt="Project thumbnail" style="top: 0px; "></a>
                </div><!-- end thumb-->
            </div><!-- end case-->
        </div> 
```

[.js](http://haripriyaa.zymichost.com/js/projects.js)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:52:58.027

以下 DIV 具有相对位置集。这意味着任何位置：它下面的绝对元素将相对于它的位置。

```
<div class="project" id="mobile"></div> 
```

这就是导致覆盖仅从该位置延伸的原因。

第二次点击问题是由于#mask 淡出但没有像在内容 div 上那样再次运行 fadeIn。

此外，为了获得更好的响应，您应该选择部分代码并复制到 JSfiddle。然后，您可以就叠加定位提出非常具体的问题。

# c# - Why does this unit test pass on my machine but fail on the build server?

> ID：12920824
> 
> 赞同：0
> 
> 时间：2012-10-16T18:08:41.607
> 
> 标签：c#, wpf, unit-testing, mvvm, mstest

I am using VS2010, writing unit tests with MSTest. My project uses WPF, MVVM and the PRISM framework. I am also using Moq to mock interfaces.

I am testing the interaction between a command and a selected item in a list. The interaction is encapsulated in a ViewModel according to the MVVM pattern. Basically, when the SelectedDatabase is set, I want the Command to raise CanExecute. I have written this test for the behaviour:

```
public void Test()
{
    var databaseService = new Mock<IDatabaseService>();
    var databaseFunctionsController = new Mock<IDatabaseFunctionsController>();

    // Create the view model
    OpenDatabaseViewModel viewModel
         = new OpenDatabaseViewModel(databaseService.Object, databaseFunctionsController.Object);

    // Mock up the database and its view model
    var database = TestHelpers.HelpGetMockIDatabase();
    var databaseViewModel = new DatabaseViewModel(database.Object);

    // Hook up the can execute changed event
    var resetEvent = new AutoResetEvent(false);
    bool canExecuteChanged = false;
    viewModel.OpenDatabaseCommand.CanExecuteChanged += (s, e) =>
        {
             resetEvent.Set();
             canExecuteChanged = true;
        };

    // Set the selected database
    viewModel.SelectedDatabase = databaseViewModel;

    // Allow the event to happen
    resetEvent.WaitOne(250);

    // Check that it worked
    Assert.IsTrue(canExecuteChanged,
        "OpenDatabaseCommand.CanExecuteChanged should be raised when SelectedDatabase is set");
} 
```

On the `OpenDatabaseViewModel`, the `SelectDatabase` property is as follows:

```
 public DatabaseViewModel SelectedDatabase
    {
        get { return _selectedDatabase; }
        set
        {
            _selectedDatabase = value;
            RaisePropertyChanged("SelectedDatabase");
            // Update the can execute flag based on the save
            ((DelegateCommand)OpenDatabaseCommand).RaiseCanExecuteChanged();
        }
    } 
```

And also on the viewmodel:

```
 bool OpenDatabaseCanExecute()
    {
        return _selectedDatabase != null;
    } 
```

`TestHelpers.HelpGetMockIDatabase()` just gets a mock `IDatabase` with some properties set.

This test passes when I run the test from VS2010, but fails when executed as part of an automated build on the server. I put in the `AutoResetEvent` to try to fix the problem, but it's had no effect.

I discovered that the automated tests were using the `noisolation` flag in the MSTest command line, so I removed that. However, that produced a 'pass' once, but a 'fail' the next.

I think I am missing something important in all of this, but I can't figure out what it is. Can anyone help by telling me what I'm doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:14:47.873

## Updated

The only other remaining places where your code could fail is in these two lines in your snippet for the `SelectedDatabase` property.

```
 RaisePropertyChanged("SelectedDatabase");
        // Update the can execute flag based on the save
        ((DelegateCommand)OpenDatabaseCommand).RaiseCanExecuteChanged(); 
```

There are others who have had some problems with `RaisePropertyChanged()` and it's use of magic strings; but this is probably not your immediate problem. Nonetheless, you can look at these links if you want to go down the path of removing the magic string dependency.

[WPF, MVVM, and RaisePropertyChanged @ WilberBeast](http://wilberbeast.com/2010/07/21/wpf-mvvm-and-raisepropertychanged/)
[MVVM - RaisePropertyChanged turning code into a mess](https://stackoverflow.com/questions/2552936/mvvm-raisepropertychanged-turning-code-into-a-mess)

The `RaiseCanExecuteChanged()` method is the other suspect, and looking up documentation in PRISM reveals that this method expects to dispatch events on the UI thread. From mstest, there are no guarantees that a UI thread is being used to dispatch tests.

[DelegateCommandBase.RaiseCanExecuteChanged @ MSDN](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.commands.delegatecommandbase.raisecanexecutechanged%28v=pandp.40%29.aspx)

I recommend you add a try/catch block around it and see if any exceptions are thrown when `RaiseCanExecuteChanged()` is called. Note the exceptions thrown so that you can decide how to proceed next. If you absolutely need to test this event dispatch, you may consider writing a tiny WPF-aware app (or perhaps a [STAThread](http://msdn.microsoft.com/en-us/library/system.stathreadattribute.aspx) console app) that runs the actual test and exits, and having your test launch that app to observe the result. This will isolate your test from any [threading concerns that could be caused by mstest](https://stackoverflow.com/questions/5037447/forcing-mstest-to-use-a-single-thread) or your build server.

## Original

This snippet of code seems suspect. If your event fires from another thread, the original thread may exit the wait first before your assignment, causing your flag to be read with a stale value.

```
viewModel.OpenDatabaseCommand.CanExecuteChanged += (s, e) =>
    {
         resetEvent.Set();
         canExecuteChanged = true;
    }; 
```

Consider reordering the lines in the block to this:

```
viewModel.OpenDatabaseCommand.CanExecuteChanged += (s, e) =>
    {
         canExecuteChanged = true;
         resetEvent.Set();
    }; 
```

Another issue is that you don't check if your wait was satisfied. If 250ms did elapse without a signal, your flag will be false.

See [WaitHandle.WaitOne](http://msdn.microsoft.com/en-us/library/cc189907.aspx) to check what return values you'll receive and update this section of code to handle the case of an unsignaled exit.

```
// Allow the event to happen
resetEvent.WaitOne(250);

// Check that it worked
Assert.IsTrue(canExecuteChanged,
    "OpenDatabaseCommand.CanExecuteChanged should be raised when SelectedDatabase is set"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T20:12:17.873

I have found an answer to explain what was going on with this unit test. There were other complicating factors that I didn't realise were significant at the time. I didn't include these details in my original question because I did not think they were relevant.

The view model described in the question of code is part of a project that is using integration with WinForms. I am hosting a PRISM shell as a child of an [ElementHost](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost(v=vs.100).aspx). Following the answer to the question on stackoverflow [How to use Prism within an ElementHost](https://stackoverflow.com/questions/1363369/how-to-use-prisim-within-an-elementhost), this is added to create an appropriate `Application.Current`:

```
public class MyApp : System.Windows.Application
{
}

if (System.Windows.Application.Current == null)
{
    // create the Application object
    new MyApp();
} 
```

The above code is not exercised by the unit test in question. However, *it was being exercised in other unit tests that were being run beforehand*, and all were run together using the `/noisolation` flag with MSTest.exe.

Why should this matter? Well, buried in the PRISM code that is called as a consequence of

```
((DelegateCommand)OpenDatabaseCommand).RaiseCanExecuteChanged(); 
```

in the internal class `Microsoft.Practices.Prism.Commands.WeakEventHandler` is this method:

```
public static DispatcherProxy CreateDispatcher()
{
    DispatcherProxy proxy = null;
#if SILVERLIGHT
    if (Deployment.Current == null)
        return null;

    proxy = new DispatcherProxy(Deployment.Current.Dispatcher);
#else
    if (Application.Current == null)
        return null;

    proxy = new DispatcherProxy(Application.Current.Dispatcher);
#endif
    return proxy;

} 
```

It then uses the dispatcher to call the event handler in question:

```
private static void CallHandler(object sender, EventHandler eventHandler)
{
    DispatcherProxy dispatcher = DispatcherProxy.CreateDispatcher();

    if (eventHandler != null)
    {
        if (dispatcher != null && !dispatcher.CheckAccess())
        {
            dispatcher.BeginInvoke((Action<object, EventHandler>)CallHandler, sender, eventHandler);
        }
        else
        {
            eventHandler(sender, EventArgs.Empty);
        }
    }
} 
```

So it attempts to dispatch the event on the UI thread on the current application if there is one. Otherwise it just calls the eventHandler. For the unit test in question, this led to the event being lost.

After trying many different things, the solution I settled on was just to split up the unit tests into different batches, so the unit test above is run with `Application.Current == null`.

# ios5.1 - 自定义 UINavigationItem 在 pushViewController 上消失

> ID：12920826
> 
> 赞同：2
> 
> 时间：2012-10-16T18:08:48.037
> 
> 标签：ios5.1

`UINavigationItem`当我推送视图控制器时，我遇到了一个奇怪的问题，自定义消失了。这是我的设置：

```
RootViewController is UITabController

UITabController
   Tab1->CustomNavController->ViewController1
   Tab2->CustomNavController->ViewController2
   Tab3->CustomNavController->ViewController3 
```

我有一个自定义`UINavigationItem`（带有 rightBarButtonItems），我将其推送到`CustomNavController`所有选项卡上。选项卡上的第一级视图控制器一切正常。

当我将一个新的`ViewController`（比如 VC4）推送到`ViewController`（比如`ViewController3`）时，就会出现问题——通过 segue 推送或`pushViewController`使用自定义笔尖。

自定义导航项消失了，我似乎找回它的唯一方法是`self.navigationItem`在 VC4 中自定义 - 我不想这样做。

非常感谢任何想法和帮助。

# javascript - 使用 jquery 和 casperJs 测试

> ID：12920828
> 
> 赞同：4
> 
> 时间：2012-10-16T18:09:03.013
> 
> 标签：javascript, unit-testing, phantomjs, casperjs

我有一个不依赖 jquery 的 Web 应用程序。

感谢（伟大的:)）casperjs，我正在做功能测试。

现在我想在我的测试中使用 jquery。因此，我尝试按照此处[http://casperjs.org/faq.html#faq-jquery](http://casperjs.org/faq.html#faq-jquery)的指示注入它。好吧，它不工作。

如果你能帮助我，这是我的代码 - 有什么问题吗？：

```
casper.start('http://localhost:8080/xxxxxx/xxxxxDialogTests.html');

casper.echo("page = " + casper.page); // -> it works, the page is there 
casper.page.injectJs("../tools/jquery-1.7.2.js");

casper.waitFor(function check()
{
   return this.visible('#button_create');
},
function then()
{
   this.click('#button_create');
   casper.waitFor(function check()
   {
        return this.visible('#dialog_document_name');
   },
   function then()
   {
           console.log("element : ", this.evaluate(function ()
           {
               var el = $("input#dialog_document_name");

               return el;
           }));  
   });
}); 
```

我删除了测试，因为这不是重点......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T06:28:38.850

尝试`casper.options.clientScripts = ["../tools/jquery-1.7.2.js"]`在测试脚本的顶部添加。

还尝试将绝对传递设置为 jQuery 脚本，例如。`/Users/foo/Work/project/tools/jquery-1.7.2.js`.

# ios - 向表格视图控制器添加隐藏元素

> ID：12920832
> 
> 赞同：0
> 
> 时间：2012-10-16T18:09:14.327
> 
> 标签：ios, xcode, cocoa-touch

我是 iOS 开发的新手，我已经能够解决我遇到的大部分问题，但现在我有一些要求，我不确定如何在界面构建器中配置它以获得我需要的结果。

要求：

1.  导航栏（继承）
2.  搜索栏（向下滑动时可见）
3.  标签消息和按钮（向下滑动时可见）
4.  表视图
5.  标签栏（继承）

我首先将一个表格视图控制器添加到我的情节提要中，并且我能够填充表格视图。所以我有：

表视图控制器

1.  导航栏（继承）
2.  表视图
3.  标签栏（继承）

但是现在我不知道如何修改表格视图控制器以添加隐藏的搜索栏和隐藏的标签和按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:58:34.473

我发现 UITableView 包含一个 Header 部分，您可以在其中放置元素。它解决了我的第一个问题。现在我试图隐藏标题部分。

# spring-mvc - 如何将 Spring WebFlow、Dojo (dijit) 文本字段制作成所需的 TextArea

> ID：12920833
> 
> 赞同：0
> 
> 时间：2012-10-16T18:09:18.113
> 
> 标签：spring-mvc, dojo, spring-webflow

如何更改以下代码以使文本字段成为必需的文本区域并具有 dijit 文本字段的外观？

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

<style type="text/css" media="screen">
 @import url("<c:url value="/resources/dojo/resources/dojo.css"/>");
 @import url("<c:url value="/resources/dijit/themes/claro/claro.css"/>");
</style>     

<script djconfig="parseOnLoad: true"
 src="<c:url value="/resources/dojo/dojo.js"/>" type="text/javascript"></script>
<script type="text/javascript"
 src="<c:url value="/resources/spring/Spring.js" />"> </script>
<script type="text/javascript"
 src="<c:url value="/resources/spring/Spring-Dojo.js" />"></script>
<script type="text/javascript">dojo.require("dojo.parser");</script>

<html>
<head>
<title>Spring 3.0 MVC - Web Flow Example</title>
</head>
<body class="claro">
    <h2>TextArea Test</h2>

    <form:form commandName="customer" id="customer">
        <input type="hidden" name="_flowExecutionKey"
            value="${flowExecutionKey}" />
        <div id="container">
            <table>
                <tr>
                    <td valign="top"><b>Bio:</b></td>
                    <td valign="top"><form:input path="bio" class="value" /> <script
                            type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "name",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Please enter your name from 2 to 10 characters",
                                invalidMessage : "A 2 to 10 characters value is required.",
                                required : true,
                                regExp : "^[a-zA-Z]{2,10}$"
                            }
                        }));
                    </script> <br />
                        <p></td>
                </tr>
            </table>
        </div>
        <p>

        <input type="submit" name="_eventId_submit" id="submit" value="Submit" />
        <script type="text/javascript">
                                            Spring.addDecoration(new Spring.ElementDecoration(
                                                {
                                                    elementId : 'submit',
                                                    widgetType : "dijit.form.Button",
                                                    widgetModule : "dijit.form.Button",
                                                    widgetAttrs : {
                                                        label: "Submit Page",
                                                        promptMessage : "Click here to submit page"
                                                    }

                                                }));
                            </script> 

        <script type="text/javascript">
            Spring.addDecoration(new Spring.ValidateAllDecoration({
                elementId : 'submit',
                event : 'onclick'
            }));

        </script>
    </form:form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:25:06.600

我找到了一种方法......它添加一些这样的代码：

```
<form:textarea path="name" cssStyle="width:250px;height:15em" />
<script type="text/javascript">
Spring.addDecoration(new Spring.ElementDecoration({elementId : "name", widgetType: "dijit.form.Textarea", widgetAttrs: {value: ""}})); 
</script>

<script type="text/javascript">Spring.addDecoration(new Spring.ElementDecoration({elementId : "name", widgetType : "dijit.form.ValidationTextBox", widgetAttrs : {promptMessage: "Enter Description", required : true}})); </script> 
```

# html - CSS 定位可能具有多个类之一的元素

> ID：12920839
> 
> 赞同：4
> 
> 时间：2012-10-16T18:09:58.133
> 
> 标签：html, css, css-selectors

我正在尝试定位一个可能具有多个类之一的元素。难道没有更简单的方法来编写以下示例吗？我一直无法找到参考，但似乎应该有一个更有效的选择。

```
.myTable1 a, .myTable2 a, .myTable3 a, .myTable4 a
{
    text-decoration: underline;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:12:33.407

尝试 -

```
table[class^=myTable] a {
    text-decoration: underline;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T18:14:45.133

如果您在谈论计算效率（即浏览器性能），那么我建议您坚持使用您已经拥有的东西。除此以外...

如果您知道`class`属性始终以 substring 开头，则`myTable`可以使用属性选择器：

```
[class^="myTable"] a
{
    text-decoration: underline;
} 
```

如果你不能保证你需要一些更复杂的东西：

```
[class^="myTable"] a, [class*=" myTable"] a
{
    text-decoration: underline;
} 
```

[这里](https://stackoverflow.com/questions/3338680/css-selector-by-class-prefix/8588532#8588532)提供了一个解释。如果您发现这种语法晦涩难懂，那么我会再次建议您使用您已有的语法，因为它是最简单的。

或者，修改您的 HTML 以包含一个您可以选择的通用类。这将使您能够从已有的基础上进一步简化 CSS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T18:12:41.937

不，在纯 CSS 中没有更简单的方法。

但是，如果您的许多类都相似，则可以像这样进行模糊匹配`*[class^="myTable"] { ... }`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T18:20:54.707

您可以在需要下划线链接的表中使用多个类。

**HTML**：

```
<table class="myTable1 ul_table">...</table>
<table class="myTable2 ul_table">...</table>
<table class="myTable3 ul_table">...</table>
<table class="myTable4 ul_table">...</table> 
```

**CSS**：

```
.ul_table a {
    text-decoration: underline;
} 
```

# ruby-on-rails - 这个数组 ruby 和 mongoid 最有效的解决方案

> ID：12920840
> 
> 赞同：1
> 
> 时间：2012-10-16T18:10:02.247
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, mongoid

我的问题是：

**在 ruby​​ on rails 和 mongoid odm 中有一些最有效的解决方案吗？**

```
messages_without_responses = Message.all.select{|message| message.sender == current_user || message.receiver == current_user}
messages = Array.new
messages_without_responses.each do |m|
  if m.message_responses.count > 0 
   messages << m
  else
   messages << m if m.receiver_id == current_user.id && m.place_receiver == "inbox"
  end
end 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:24:40.567

我不知道您的数据库中有多少记录，但如果数量可能会变大，您最好在数据库级别而不是在 Ruby 中过滤掉您想要的记录。因此，SQL 条件为 on `Message.all`（您必须根据需要进行翻译才能使其与 Mongoid 一起使用；我以前从未使用过它）。

```
ms = Message.all(:conditions => ["sender_id = ? OR receiver_id = ?", current_user.id, current_user.id]) 
```

其余的还不错，但是您可以使其更简洁：

```
ms.select { |m| m.message_responses.count > 0 || (m.receiver == current_user &&  m.place_receiver == "inbox")} 
```

# ios - NSInputStream 的 NSStreamEventHasBytesAvailable 永远不会被调用

> ID：12920845
> 
> 赞同：4
> 
> 时间：2012-10-16T18:10:12.090
> 
> 标签：ios, networking, xcode4.5, nsinputstream, nsoutputstream

我正在创建一个类似于 WiTap 的应用程序（但要连接许多设备），这是我的问题：应用程序似乎连接了设备（它们显示在表视图控制器中。代表`NSInput/OutputStream`说两个流都已打开，但是当我发送数据包时比`NSOutputStream`对面设备上的函数没有`NSInputStream`被调用`(NSStreamEventHasBytesAvailible`。`- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode)`

这是进行连接以及发送和接收的代码......

```
//Service was resolved
- (void)netServiceDidResolveAddress:(NSNetService *)netService
{
 //Get the streams from NSNetService
 NSInputStream *inStream = nil;
 NSOutputStream *outStream = nil;
 [netService getInputStream:&inStream outputStream:&outStream];
 [inStream setDelegate:self];
 [inStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
 [inStream open];
 [outStream setDelegate:self];
 [outStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
 [outStream open];
 [self.inStreams addObject:inStream];
 [self.outStreams addObject:outStream];

 //Add NSNetService between connected devices
 [self.resolvedServices addObject:netService];
 [self updateUI];
}

//event handling
- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
 switch (eventCode) {
    case NSStreamEventHasBytesAvailable:
        {
            NSMutableData *inBuffer = [[NSMutableData alloc] init];
            NSInputStream *inStream = (NSInputStream *)aStream;
            uint8_t buffer[3];
            NSInteger len = 0;
            NSInteger packetNumber = 0;
            len = [inStream read:buffer maxLength:3];
            if(len > 0) {
                [inBuffer appendBytes:buffer length:len];
                [inBuffer getBytes:&packetNumber length:len];
                [self.delegate stream:inStream didReceivePacketNumber:[NSNumber numberWithInteger:packetNumber]];
            }
        } 
        break;
    case NSStreamEventHasSpaceAvailable:
        if ([aStream isKindOfClass:[NSOutputStream class]])
            NSLog(@"NSStream \"%@\" has space availible",aStream);
        break;
    case NSStreamEventOpenCompleted:
        if ([aStream isKindOfClass:[NSInputStream class]])
            NSLog(@"NSInputStream opened");
        else if ([aStream isKindOfClass:[NSOutputStream class]])
            NSLog(@"NSOutputStream opened");
        break;
    case NSStreamEventErrorOccurred:
        NSLog(@"NSStream \"%@\" occurred an error: %@",aStream,[aStream streamError]);
        break;
    case NSStreamEventEndEncountered:
        NSLog(@"Stream \"%@\" has been closed",aStream);
        [aStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
        [aStream close];
        NSUInteger index = 0;
        if ([aStream isKindOfClass:[NSOutputStream class]]) {
            index = [self.outStreams indexOfObject:aStream];
            [self.outStreams removeObject:aStream];
            [self.inStreams removeObjectAtIndex:index];
        } else if ([aStream isKindOfClass:[NSInputStream class]]) {
            index = [self.inStreams indexOfObject:aStream];
            [self.inStreams removeObject:aStream];
            [self.outStreams removeObjectAtIndex:index];
        }
        [self.availibleServices removeObjectAtIndex:index];
        [self.resolvedServices removeObjectAtIndex:index];
        break;
    default:
        break;
 }
}

//sending
//Data pushing into NSStreams
- (void)sendData:(NSData *)data toStream:(NSOutputStream *)aStream
{
 if ([aStream hasSpaceAvailable]) {
    NSLog(@"%i",[aStream write:[data bytes] maxLength:[data length]]);
 }
} 
```

我尝试使用 Instruments（网络事物）调试项目。它说数据包已发送和接收，但该事件从未发生。谢谢您的帮助。如果有人想要，我可以毫无问题地发送整个项目......

# ruby-on-rails-3 - 在 Rails 中查询多个关联的正确方法是什么？

> ID：12920848
> 
> 赞同：1
> 
> 时间：2012-10-16T18:10:35.600
> 
> 标签：ruby-on-rails-3, activerecord, associations

我的应用程序模拟了一个写作比赛，使用`Users`、`Stories`和.`Competitions``Submissions`

用户可以通过提交或作为所有者参与比赛。我想要一个返回用户拥有或参与的所有比赛的查询或方法。我有一个方法将它们作为数组返回`competitions | owned_competitions`，但我真的很想保留它们 ActiveRecord 实体，以便我可以链接、应用范围等。

有没有办法做到这一点，或者有更好的方法来建立这些关系？

我的模型如下所示：

用户.rb：

```
has_many :stories
has_many :submissions
has_many :competitions, :through => :submissions
has_many :owned_competitions, :class_name => "Competition" 
```

故事.rb：

```
belongs_to :user
has_many :submissions
has_many :competitions, :through => :submissions 
```

比赛.rb：

```
belongs_to :owner, :class_name => "User", :foreign_key => 'user_id'
has_many :submissions
has_many :competitors, :through => :submissions, :source => :user
has_many :stories, :through => :submissions

scope :expiring_today, lambda { where("deadline = ?", Date.today) } 
```

提交.rb：

```
belongs_to :user
belongs_to :story
belongs_to :competition 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:47:23.773

你想要的绝对有可能。实际上，甚至不编写任何 SQL 也可能是可能的，但我不知道具体如何。

这是我想出的：

```
Competition.joins('left join submissions on submissions.competition_id = competitions.id').where('competitions.user_id = :uid OR submissions.user_id = :uid', :uid => user) 
```

我们使用左连接（而不是默认的内连接），以便我们仍然可以返回用户拥有但尚未提交的比赛。

# ruby-on-rails - Rails 3.2 在创建时修改 params[] 值

> ID：12920854
> 
> 赞同：1
> 
> 时间：2012-10-16T18:11:01.190
> 
> 标签：ruby-on-rails, ruby, datetime, ruby-on-rails-3.2

我有以下场景，我有一个想要重新解析的日期时间。我可以在 irb 中使用以下内容，但是在使用 post 参数时，我似乎遇到了 nil 值的问题。例如。

这适用于irb：

```
DateTime.strptime("10/25/2012 04:27 pm", "%m/%d/%Y %I:%M %P").strftime("%Y-%m-%d %H:%M:00")
=> "2012-10-25 16:27:00" 
```

但是，当我尝试访问 params 值时，我似乎无法访问该值本身。例如。

```
def create
  @shipment = params[:shipment]
  @shipment.ship_date = format_date(@shipment.ship_date)
  .
  .
  .
 end     

def format_date(date)
  DateTime.strptime(date, "%m/%d/%Y %I:%M %P").strftime("%Y-%m-%d %H:%M:00")
end 
```

当我使用字符串手动设置变量时，它可以工作。当我尝试处理参数时，它似乎为零。即使当我执行 @shipment.ship_date.to_s 时，它也会将其转换为 "" 我知道该参数不是空的，因为它在浏览器的 Web 检查器中显示。我一定不知道如何使用参数值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:34:28.907

```
format_date(params["shipment"]["ship_date"]) 
```

应该管用

# python - 计算文件中的行数

> ID：12920856
> 
> 赞同：-5
> 
> 时间：2012-10-16T18:11:18.860
> 
> 标签：python, perl

我有一个包含数百万个这样的向量的文本文件：-

```
V1
V1
V1
V3
V4
V1
V1 
```

注意：- 订单很重要。在上面的输出文件中，我数了第一个向量 3 次。在第 5 行之后重复相同的模式两次。计数应该不同。

我想计算每条向量行重复多少次并将其添加到输出文本文件中，如下所示：-

在上述 7 个向量中，前 3 行相同，其余 2 行不同，最后一行相同。所以输出应该是这样的：-

```
V1 count 3
V3
V4
V1 count 2 
```

虽然，第一个和最后一个模式相同，但它们的计数不同，因为它们的顺序不同。

我可以使用`python`or `perl`。我知道行（向量）的最大长度，但是如何将每一行（向量）与其他行（向量）进行比较。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:22:22.307

```
perl -nle'
   if ($c && $_ ne $last) {
      print $c > 1 ? "$last repeat$c;" : "$last;";
      $c = 0;
   }

   $last = $_;
   ++$c;

   END {
      if ($c) {
         print $c > 1 ? "$last repeat$c;" : "$last;";
      }
   }
' file 
```

（您可以将所有内容放在一行中，也可以保持原样。）

输出：

```
V1 repeat3
V3
V4
V1 repeat2 
```

这个解决方案是平均 O(N) CPU 和 O(1) 内存。它和inspectorG4dget 是七个现有答案中仅有的两个，它们以您要求的格式和顺序提供输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:16:03.357

只需在命令提示符下运行它

```
sort text.txt | uniq -c > output.txt 
```

如果要保留排序，请删除排序（仅计算连续的唯一行）

```
uniq -c text.txt > output.txt 
```

或者这将提供所需的精确输出（ikegami 建议的解决方案）

```
uniq -c text.txt \
| perl -ple's/^\s*(\d+) //; $_ .= " repeat$1" if $1 > 1; \
> output.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T18:21:51.500

# 如果顺序无关紧要

如果您真的想在 python 中执行此操作（与`sort filepath | uniq -c`Jean 建议的相反），那么我会这样做：

```
import collections
with open('path/to/file') as f:
    counts = collections.Counter(f)
    outfile = open('path/to/outfile', 'w')
    for line,occ in counts.iteritems():
        outfile.write("%s repeat %d\n" %(line.strip(), occ))
    outfile.close() 
```

# 如果订单很重要

如果顺序很重要（如果条目`i`出现在`j`输入文件中的条目之前，那么条目`i`必须出现在`j`输出文件中的条目之前），那么您需要的是修改后的行程编码器。但是请注意，如果您有以下输入文件：

```
v1
v1
v1
v2
v2
v3
v1 
```

然后，您的输出文件将如下所示：

```
v1 repeat 3
v2 repeat 2
v3
v1

with open('infilepath') as infile:
    outfile = open('outfilepath', 'w')
    curr = infile.readline().strip()
    count = 1
    for line in infile:
        if line.strip() == curr:
            count += 1
        else:
            outfile.write(curr)
            if count-1:
                outfile.write(" repeat %d\n" %count)
            else:
                outfile.write("\n")
            curr = line.strip()
            count = 1
    outfile.write(curr)
    if count-1:
        outfile.write(" repeat %d\n" %count)
    outfile.close() 
```

当然，`uniq -c infilepath > outfilepath`也会这样做

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:22:37.757

如果这一切都适合记忆，那么你可以这样做：

```
from collections import Counter

with open('vectors') as fin:
    counts = Counter(fin) 
```

或者，如果很大，那么您可以使用 sqlite3：

```
import sqlite3

db = sqlite3.conncet('/some/path/some/file.db')
db.execute('create table vector (vector)')
with open('vectors.txt') as fin:
    db.executemany('insert into vector values(?)', fin)
    db.commit()

for row in db.execute('select vector, count(*) as freq from vector group by vector'):
    print row # do something suitable here 
```

如果向量总是连续的：

```
from itertools import groupby
with open('vector') as fin:
    for vector, vals in groupby(fin):
        print '{} {}repeat'.format(vector, sum(1 for _ in vals)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T18:22:49.110

假设 python 2.7，一个内存密集度较低的解决方案

```
from collections import Counter
with open("some_file.txt") as f:
    cnt = Counter(f)
    print cnt 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T18:23:33.190

```
vectors = {}
for vector in open("vect.txt").readlines():
    vectors[vector] = vectors.setdefault(vector, 0) + 1
print vectors 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-16T18:15:54.097

我不认为你可以在少于 O(n^2) 的时间内做到这一点......（我可能是错的）

一种方法是（在python中）

```
with open("some_file_with_vectors") as f:
          data = f.read()

counts  = dict([(line,data.count(line)) for line in data.splitlines()])
print counts
#if you want to save to a file
with open("output.txt") as f:
   for key in counts:
       print >> f, key ,"=",counts[key] 
```

# ios - 我的背景图片来自哪里？

> ID：12920862
> 
> 赞同：2
> 
> 时间：2012-10-16T18:11:31.737
> 
> 标签：ios, xcode, default.png

请注意，我是 IOS 和 Xcode 的新手，所以这可能是一个愚蠢的问题。我正在开发一个大型现有应用程序，添加 Retina Display 支持。(xcode 4.5.1)

应用程序启动，它是登录屏幕，然后显示“Default.png”作为应用程序的背景。请注意，我确实有一个“Default-586h@2x.png”文件——据我所知，它不会在任何时候显示。

我已经修改了我们的代码以检测屏幕大小和相应的位置窗口。这样可行。在 iPhone 6 模拟器，4" Retina 显示器中，背景图像是信箱的。我一直无法弄清楚如何使它使用正确的背景图像。系统中只有 1 个对 Default.png 的引用，并且那是在 RootScreenController.xib 中，它是从 MainWindow.xib 引用的。用 XCode 打开那些，我找不到任何直接引用 Default.png 的设置。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:29:40.040

您只需要将 Default.png、Default@2x.png 和 Default-568h@2x.png 复制到您的应用程序包中。因此，如果他们都是您的目标的成员，那么您就可以了。它们不需要在任何地方引用。

编辑：您还必须以正确的方式创建窗口，以使应用程序具有适当的大小。你如何创建你的主窗口？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:21:59.433

除非你打错字，否则它应该是“Default-568h@2x.png”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:48:33.277

我建议更改您的应用程序中看起来像该背景的图像。

（用黑色或蓝色或其他纯色的图像替换它们就足够了）

**注意**首先将它们保存在某个地方，以便您可以将它们放回去。

然后当你确定有问题的图像时。按 Command+Shift+F 并搜索该文件名。如果那没有帮助。它们可能被设置在 xib 文件中的某处。通过“版本编辑器”快速切换到代码比较模式将让您搜索 xib 文件的文本。

在那里搜索有问题的文件名。

如果它是您的应用程序的背景。它肯定被设置在某个地方。

# c++ - 通过模板滥用的函数式 C++

> ID：12920863
> 
> 赞同：5
> 
> 时间：2012-10-16T18:11:34.620
> 
> 标签：c++, templates, collections, functional-programming, template-templates

我决定尝试使用模板在 C++ 中编写功能映射实现，这就是我想出的：

```
template <
    class U, 
    class V, 
    template <class> class T 
>

class T<V> WugMap(
    class T<U>::const_iterator first, 
    class T<U>::const_iterator second, 
    V (U::*method)() const)

{
    class T<V> collection;
    while (first != second)
    {
        collection.insert(collection.end(), ((*(first++)).*method)());
    }
    return collection;
} 
```

现在这一切都很好，花花公子，甚至可以编译。问题是，我不知道如何实际调用它。

尝试天真的方式会产生以下错误：

```
prog.cpp:42: error: no matching function for call to 
‘WugMap(__gnu_cxx::__normal_iterator<Container*, std::vector<Container, 
std::allocator<Container> > >, __gnu_cxx::__normal_iterator<Container*, 
std::vector<Container, std::allocator<Container> > >, int (Container::*)()const)’ 
```

据我所知，所有论点都是正确的。gcc 根本没有提出任何替代方案，这让我相信我对 WugMap 的定义是可疑的，但它编译得很好，所以我很迷茫。谁能指导我度过这个愚蠢的过程？

如果有人可以建议一种更好的方法来编写这样的函数，该函数将支持使用包含任何类型对象的任何类型的集合，我会考虑更改它。

[到目前为止，这是我的想法。](http://ideone.com/EJSYS)

我目前正在使用 Ideone，它使用 C++03、gcc 4.3.4。

# 附录 1

这在 C++11 中可行吗？有人暗示它是。我知道 C++11 中的模板支持不同数量的参数，所以我也会修改我的要求以适应它。我会花一些精力来写一些东西，但与此同时，这里是我正在寻找的要求：

*   应该有一个类似下面的签名：

    ```
    C2<V, ...> map(const C1<U, ...>&, V (U::*)(...), ...) 
    ```

    这需要一些集合 C1，包含 U 类型的元素，通过引用构造一些默认参数，并且还获取 U 的一些成员函数（返回 V 并获取一些未知类型的参数），然后在顺序，要传递给成员函数的参数。该函数最终将返回一个 C2 类型的集合，该集合包含类型 V 的元素并使用未知数量的默认参数进行初始化。

*   应该是可链接的：

    ```
    vector<int> herp = map(
                       map(
                            set<Class1, myComparator>(),
                       &Class1::getClass2, 2, 3),
                       &Class2::getFoo); 
    ```

*   如果我在使用它时不必有模板参数或任何其他额外的冗长，则可以加分。

`std::transform`很棒，但不可链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:17:35.420

模板参数永远不能从嵌套类型中推导出来。即使`U`和`V`可以从成员函数指针中推断出来，您也无法推断出模板类型`T`。

[在指向ideone](http://ideone.com/EJSYS)的链接中显式指定模板参数（在编写上面的语句之前我没有链接）也不起作用，主要是因为模板参数`std::vector`不仅仅是一个类型`T`！`std::vector`接受一个值类型和一个分配器类型。解决问题变得相当丑陋：

```
#include <vector>
#include <iostream>

using namespace std;

class Container
{
public:
    Container() {}
    Container(int _i) : i(_i) {}

    int get_i() const {return i;}

    int i;
};

    template <
        class U, 
        class V, 
        template <typename...> class T 
    >

    T<V> WugMap(
        typename T<U>::const_iterator first, 
        typename T<U>::const_iterator second, 
        V (U::*method)() const)
    {
        T<V> collection;
        while (first != second)
        {
            collection.insert(collection.end(), ((*(first++)).*method)());
        }
        return collection;
    }

int main()
{
    vector<Container> containers;
    for (int i = 0; i < 10; ++i) containers.push_back((Container(i)));

    WugMap<Container, int, std::vector>(
        containers.begin(), containers.end(), &Container::get_i);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:53:23.213

不太确定这是否应该是一个答案，但见鬼：

```
std::vector<std::string> src = f();
std::vector<std::string::size_type> sizes; 
sizes.reserve(src.size());
// Actual transformation:
std::transform( src.begin(), src.end(), std::back_inserter(sizes), 
                [](std::string const& s) { return s.size(); } ); 
```

类似的事情可以手动完成，但是重新发明重新发明的轮子真的没有意义。

至于这种`std::transform`情况的不同之处，它并没有尝试如此紧密地绑定类型，它需要`Iter1`前两个参数，`Iter2`第三个参数和第三个参数`Functor`。没有对接口进行检查以保证`Iter1`和`Iter2`是相同类型容器的迭代器，或者`Functor`将从第一个容器中的值类型转换为第二个容器中的值类型。

# eclipse - eclipse 有时在我进行编辑时不会更新搜索结果

> ID：12920870
> 
> 赞同：0
> 
> 时间：2012-10-16T18:12:10.417
> 
> 标签：eclipse, search

所以我使用 Ctrl+H 来搜索一个变量。出于重构目的，我对一个术语（比如说“用户”）执行 ctrl+h，然后进行一些重构。我希望搜索结果中的结果在我进行重构时自动更新（假设我用“blah”替换用户，因此相关行应该自动消失）。它有时确实有效，但在其他很多时候无效。我使用 Ruby 或 Web 透视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:38:08.487

在变量上使用***Alt+Shift+R***，它将替换所有使用的文件变量。

# java - 允许 JRE 7 与 firefox 一起工作

> ID：12920873
> 
> 赞同：0
> 
> 时间：2012-10-16T18:12:17.367
> 
> 标签：java, firefox

当我尝试在 Firefox 上加载 Java 小程序时，我不断收到未找到类的错误

我已经尝试了多种方法来修复。

清除 Java 临时文件

删除所有 Java 安装并重新安装最新的。

然而，即使是 java 测试页面也无法加载:(

继承人的错误：

![在此处输入图像描述](../Images/e7b9f44f23bd58d88510e4e733c9aeb6.png)

继承人来自测试页面的转储

```
 Done.Dump thread list ...
Group main,ac=19,agc=3,pri=10
    main,5,alive
    traceMsgQueueThread,5,alive,daemon
    Timer-0,5,alive
    Java Plug-In Pipe Worker Thread (Client-Side),5,alive,daemon
    AWT-Shutdown,5,alive
    AWT-Windows,6,alive,daemon
    AWT-EventQueue-0,6,alive
    SysExecutionTheadCreator,5,alive,daemon
    CacheMemoryCleanUpThread,5,alive,daemon
    Browser Side Object Cleanup Thread,5,alive
    JVM[id=2]-Heartbeat,5,alive,daemon
Group Plugin Thread Group,ac=3,agc=0,pri=10
    AWT-EventQueue-1,6,alive
    TimerQueue,5,alive,daemon
Group http://www.java.com/applet/TestJava/-threadGroup,ac=4,agc=0,pri=4
    Applet 2 LiveConnect Worker Thread,4,alive
    AWT-EventQueue-2,4,alive
    TimerQueue,4,alive,daemon
    ConsoleTraceListener,4,alive,daemon
Group http://www.java.com/jsp_utils/-threadGroup,ac=2,agc=0,pri=4
    Applet 3 LiveConnect Worker Thread,4,alive
    AWT-EventQueue-3,4,alive 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:00:44.513

事实证明，这个错误是由防火墙禁用 ZoneAlarm 引起的，解决了这个问题。

# php - 如何使用命名空间删除属性，例如使用 DOMElement 的 xmlns:xsi

> ID：12920877
> 
> 赞同：2
> 
> 时间：2012-10-16T18:12:40.057
> 
> 标签：php, dom

我刚刚花了很多时间试图从 DOMNode 中删除一个带有命名空间的属性，但它根本不起作用。

xml 是从数据库生成的，如下所示：

```
<dictionary>

<row xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <table>answers</table>
  <entity>Answer</entity>
</row>

<row xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

  <table>file_trans</table>
  <entity>FileTrans</entity>
</row>

...
</dictionary> 
```

我要删除的属性名称显然是“xmlns:xsi”。postgres db 自动添加它，我无法在那里删除它，所以我正在尝试使用 php 完成这项工作。

我将 xml 加载为 DOMDocument，然后对所有行元素执行一个 foreach 循环：

```
$xml = new DOMDocument();
$xml->loadXML($tablesInXml['xmlelement'], LIBXML_NOBLANKS);

foreach($xml->documentElement->childNodes as $row) {
  $row->removeAttribute('xsi');  // not working
  $row->removeAttribute('xmlns:xsi'); // not working
... 
```

我什至试图侦察 DOMNode 属性，它根本不包含任何属性，并且显示长度为 0。

这是 php 5.3 中的错误吗？有人知道我还能做什么吗？

感谢您的任何回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:48:55.727

你不能用`DOMDocument`. 这些并不是真正的“属性”（它们在 DOM 中作为属性不可见，也不属于 XML 信息集）。它们是命名空间声明，在 xml 序列化之外不存在。最重要的是，它们不会以任何方式在 DOM 中表示。

libxml2（DOMDocument 的底层 xml 库）在内部跟踪这些“命名空间节点”，但不向它们公开公共接口。因此，如果您克隆或导入节点，即使您看不到它，xml 命名空间声明也会随之而来。

旧版本的 PHP 中似乎存在一个错误，您可以使用 删除这些节点`removeAttributeNS`，但这已得到修复。[有关此方法，](http://www.php.net/manual/en/domelement.removeattributens.php)请参阅PHP 文档的注释。

我的意见：你不应该试图摆脱这些节点。这不值得你花时间，离开他们也没有什么坏处。

但是，如果您真的想摆脱它们，则必须使用另一种方法。一种方法是手动将整个 DOM 树深度复制到新的 DOM 文档中。如果您在复制时使用`createElementNS`and （而不是使用or ），则不会在您的副本中创建隐藏的命名空间节点。我不会为您编写代码来执行此操作，因为它会很乏味。`setAttributeNS``importNode``cloneNode`

[这个 stackoverflow 答案](https://stackoverflow.com/a/3816396/1002469)提出了一个 xslt 解决方案。我不确定它是否会起作用，因为 XSLT 1.0 也没有公开这些命名空间声明“节点”。

## 更新

如果*除了*删除多余的 XML 节点之外，您还可以对 XML 执行其他操作，您可以尝试[XML canonicalization](http://en.wikipedia.org/wiki/Canonical_XML)。规范 XML 的目的是确保相同的 XML 信息集始终生成相同的 XML 输出字符串。（这对于比较 XML 文件或创建校验和哈希等事情很有用。）但它也可以做一些事情，比如从不使用自闭合标签。

试试看：

```
$d = new DOMDocument();
$d->loadXML($xml, LIBXML_NOBLANKS);
echo $d->C14N(true, false); 
```

文档：

*   [`DOMNode::C14N()`](http://www.php.net/manual/en/domnode.c14n.php)
*   [`DOMNode::C14NFile()`](http://www.php.net/manual/en/domnode.c14nfile.php)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-16T18:30:31.963

您应该使用 removeAttributeNS 方法：

```
$row->removeAttributeNS('xmlns:xsi'); 
```

更多信息可以在手册中找到：[http ://www.php.net/manual/en/domelement.removeattributes.php](http://www.php.net/manual/en/domelement.removeattributens.php)

# python - 命令行可选参数

> ID：12920882
> 
> 赞同：0
> 
> 时间：2012-10-16T18:12:55.167
> 
> 标签：python, command-line-arguments, biopython, sys

所以我仍在编码，甚至不确定这是否一切正常，但是当我什至无法运行时很难测试它。这是我第一次尝试使用多个可选输入，每次运行时都会出现错误：

“命令行参数错误：参数“查询”。文件不可访问：`sequence_filename'”

命令行输入是文件名 (require)，然后是函数将运行的可选输出文件，然后是 prot（如果是蛋白质，则默认）或 na（如果是核酸）的可选变量

```
if __name__ == '__main__':
    sequence_filename = sys.argv[1]
    output_filename = ''
    if sys.argv > 3:
        output_filename = sys.argv[2]
        if sys.argv[3] == 'na':
            input = 'na'
        else:
            input = 'prot'
    elif sys.argv > 2:
        output_filename = sys.argv[2]

    main( sequence_filename, output_filename, input ) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:15:33.030

如果你在做复杂的命令行界面，你应该使用[`argparse`](http://docs.python.org/library/argparse.html)，它会根据你指定的参数自动解析并生成界面。

如果您运行的是 python 2.6 或更早版本，则可以使用.[`optparse`](http://docs.python.org/library/optparse.html)替换为`argparse`.

# unique-constraint - 有没有办法对 dynamodb 中的主键以外的属性（字段）强制执行唯一约束

> ID：12920884
> 
> 赞同：54
> 
> 时间：2012-10-16T18:12:57.977
> 
> 标签：unique-constraint, amazon-dynamodb

在 dynamodb 中，如果您想在除主键之外的字段中强制执行唯一性（例如，您是否有一个 users 表并且想要用户的唯一电子邮件地址，而主键是一个用户 ID，它是一个数字）除了扫描之外还有其他方法吗表格查看电子邮件是否已在使用中？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-10-16T18:50:46.473

简短的回答：没有。

DynamoDB 是一个键值存储。它非常擅长快速检索/保存项目，因为它做了一些妥协。这是您必须自己处理的约束。

尽管如此，根据您的实际模型，您最好使用此字段`hash_key`或考虑使用`range_key`

如果这是不可能的，我建议你去规范化你的数据。你目前有类似的东西：

**`UserTable`**

*   `hash_key`：`user_id`
*   `e-mail`
*   ...

为确保唯一性，请使用此架构添加一个新表：

**`EmailUser`**

*   `hash_key`： 电子邮件
*   `user_id`

为确保电子邮件是唯一的，只需在之前发出一个`GetItem`至**`EmailUser`**。

这种反规范化在 No-SQL 数据库中很常见。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-01-10T11:26:42.847

没有这样的方法可以强制其他属性的唯一性，但是使用 python 的 boto3 库，您可以使用客户端来处理项目并使用一些复合键并尝试复制您的条目并使用 transact_write_items() 一次性插入所有条目。aws 有非常好的文档： [https ://aws.amazon.com/fr/blogs/database/simulating-amazon-dynamodb-unique-constraints-using-transactions/](https://aws.amazon.com/fr/blogs/database/simulating-amazon-dynamodb-unique-constraints-using-transactions/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-17T09:36:23.920

我不认为是否讨论了下面提到的方法，因此发布相关链接以确保唯一的电子邮件（或任何其他属性）。这不需要创建另一个表，而是在主键列的用户表中添加其他项目。

[确保 DynamoDB 中唯一属性的替代方法](https://aws.amazon.com/blogs/database/simulating-amazon-dynamodb-unique-constraints-using-transactions/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-07T16:49:24.773

DynamoDB 本身不支持唯一性约束，但您可以通过使用`atomic counter`此计数器值并将其合并到您的数据中以某种方式确保唯一性。

就我而言，我必须确保两者`username`都`userId`没有重复。是我的分区键，所以使用防止覆盖`username`不会有任何问题；`attribute_not_exists(username)`

因为`userId`我将首先从原子计数器中检索一个新值，然后将其作为我的 userId 值。它可能不是完全顺序的，但在这个意义上它可以保证唯一性。

# sql-server-2008 - 发生与网络相关或特定于实例的错误

> ID：12920886
> 
> 赞同：3
> 
> 时间：2012-10-16T18:13:02.473
> 
> 标签：sql-server-2008, windows-7

我已经成功安装了 SQL Server 2008 R2 Developer edition。我有2个问题

1.  `Its showing 2 (local) servers in server name`
2.  `A network-related or instance-specific error occured while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Name Pipes Provider, error: 40 - Could not open a connection to SQL Server) (Microsoft SQL Server, Error: 2)`

![在此处输入图像描述](../Images/8261aba9ae49f91b609b4c3bb59f8f42.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T09:52:02.533

运行服务.msc

启动 SQL 服务器的所有服务，包括 SQLEXPRESS 它将工作

谢谢，

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T18:20:00.977

如果您安装为默认实例，则本地将起作用，否则您必须通过 servername 和 instance name 连接命名实例。您也可以在连接到弹出窗口中浏览实例名称。检查您的 sql 配置向导天气 sql 服务是否正在运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-03T04:40:47.003

转到开始 >> 选择所有程序 >> Microsoft SQL Server 2008 R2 >> 配置工具 >> SQL Server 配置管理器

然后打开 SQL Server 配置管理器 >> 选择 SQL Server 服务 >> 选择 SQL Server (MSSQLSERVER) 并检查 SQL Server (MSSQLSERVER) 的状态是否正在运行

如果 SQL Server (MSSQLSERVER) 状态为 Running 则正常，否则右键单击 SQL Server (MSSQLSERVER) 并单击 Start

现在重新启动您的 SQL Server Management Studio 并检查它，我希望它对您有用。

# java - Eclipse Indigo 速度问题

> ID：12920887
> 
> 赞同：0
> 
> 时间：2012-10-16T18:13:10.230
> 
> 标签：java, eclipse, performance

在使用 Eclipse Indigo 大约一年后，在 Eclipse 中运行的应用程序的速度突然急剧下降。例如，我的 Java 游戏达到 64 FPS，然后突然变为 1 FPS。

创建一个新的工作区并添加旧项目中的所有文件似乎可以解决它，但是如果不创建新的工作区，我将如何解决这个问题？（我已经尝试删除 Workspace 的 .metadata，没有任何区别。）

我还尝试使用 -clean 参数运行 Eclipse，但没有任何帮助。请注意，性能问题仅发生在从 Eclipse 运行 Java 应用程序时，而不是在 Eclipse 本身内。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:50:41.817

我的猜测是 eclipse 卡在后台工作，导致您的 PC 耗尽资源，从而导致分页。您最近还安装了任何新插件吗？一些插件可能会相互冲突，这可能是一个问题。检查任务管理器以查看游戏运行时您的资源在哪里，然后从那里开始。

我看到的另一个问题是 1 个工作区中有太多单独的项目。您的游戏是慢速 Eclipse 工作区中唯一的项目吗？如果没有，将工作空间专用于各个项目组会有所帮助。

# c++ - Apple LLVM 4.1 的 STD 链接器错误

> ID：12920891
> 
> 赞同：23
> 
> 时间：2012-10-16T18:13:27.687
> 
> 标签：c++, xcode, macos, linker-errors, std

我有一个 C++ 中的大型静态库，其中包含一些最初为 iOS (armv7) 构建的 Objective-C。

我构建了它的 OS X（64 位 Intel x86_64）版本，但是当我尝试在 OS X 应用程序项目（针对 Lion 10.7）中使用它时，出现了数十个链接器错误，其中大部分与标准库有关符号。

我知道如何解决“我的”链接器问题，但下面复制的 STD 问题困扰着我。

```
"std::basic_filebuf<char, std::char_traits<char> >::is_open() const"
"std::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::str() const"
"std::basic_ios<char, std::char_traits<char> >::widen(char) const"
"std::istream& std::istream::_M_extract<double>(double&)"
"std::ostream::put(char)"
"std::ostream::flush()"
"std::ostream& std::ostream::_M_insert<void const*>(void const*)"
"std::ostream& std::ostream::_M_insert<bool>(bool)"
"std::ostream& std::ostream::_M_insert<double>(double)"
"std::ostream& std::ostream::_M_insert<unsigned long>(unsigned long)"
"std::ostream::operator<<(int)"
"std::ostream::operator<<(short)"
"std::string::_Rep::_M_destroy(std::allocator<char> const&)"
"std::string::_Rep::_S_terminal"
"std::string::_Rep::_S_empty_rep_storage"
"std::string::_Rep::_S_create(unsigned long, unsigned long, std::allocator<char> const&)"
"std::string::append(char const*, unsigned long)"
"std::string::append(std::string const&)"
"std::string::assign(std::string const&)"
"std::string::reserve(unsigned long)"
"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&)"
"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(std::string const&)"
"std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()"
"std::basic_ofstream<char, std::char_traits<char> >::open(char const*, std::_Ios_Openmode)"
"std::basic_ofstream<char, std::char_traits<char> >::close()"
"std::basic_ofstream<char, std::char_traits<char> >::basic_ofstream()"
"std::basic_ofstream<char, std::char_traits<char> >::~basic_ofstream()"
"std::_List_node_base::hook(std::_List_node_base*)"
"std::_List_node_base::unhook()"
"std::basic_stringstream<char, std::char_traits<char>, std::allocator<char> >::basic_stringstream(std::string const&, std::_Ios_Openmode)"
"std::basic_stringstream<char, std::char_traits<char>, std::allocator<char> >::basic_stringstream(std::_Ios_Openmode)"
"std::basic_stringstream<char, std::char_traits<char>, std::allocator<char> >::~basic_stringstream()"
"std::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> >::basic_ostringstream(std::_Ios_Openmode)"
"std::basic_ostringstream<char, std::char_traits<char>, std::allocator<char> >::~basic_ostringstream()"
"std::ios_base::Init::Init()"
"std::ios_base::Init::~Init()"
"std::basic_ios<char, std::char_traits<char> >::clear(std::_Ios_Iostate)"
"std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long)"
"std::_Rb_tree_decrement(std::_Rb_tree_node_base*)"
"std::_Rb_tree_increment(std::_Rb_tree_node_base const*)"
"std::_Rb_tree_increment(std::_Rb_tree_node_base*)"
"std::__throw_logic_error(char const*)"
"std::__throw_length_error(char const*)"
"std::__throw_out_of_range(char const*)"
"std::_Rb_tree_rebalance_for_erase(std::_Rb_tree_node_base*, std::_Rb_tree_node_base&)"
"std::_Rb_tree_insert_and_rebalance(bool, std::_Rb_tree_node_base*, std::_Rb_tree_node_base*, std::_Rb_tree_node_base&)"
"std::cerr"
"std::cout" 
```

我检查了我的构建设置，我的项目链接到标准库 ( `-stdlib=libc++`)，我可以在 main.cpp 中毫无问题地使用 std::cout。

我将构建设置中的编译器从 Apple LLVM 4.1 更改为 LLVM GCC 4.2，问题就消失了。我想继续使用 Apple LLVM 4.1。我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-10-28T18:38:46.730

在 iOS 7 中，我使用图表库并遇到同样的问题。在这种情况下，lib stdc++ 不能解决问题。

我将 stdc++.6.dylib 添加到我的构建阶段并找到了符号。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-10-16T18:17:26.403

更改链接到使用的标准库，`libstdc++`而不是`libc++`- 问题是另一个库是使用`g++`使用该库的模式编译的`libstdc++`。

考虑以下示例代码：

```
dhcp-191:~/Development/testy/fred% cat fred.cpp
#include <iostream>
#include <string>
#include "fred.h"

using namespace std;

bool dofred(string &x)
{
    cout << x << endl;
    return true;
}
dhcp-191:~/Development/testy/fred% cat fred.h

#include <iostream>
#include <string>

bool dofred(std::string &x);

dhcp-191:~/Development/testy/fred% clang++ -stdlib=libc++ -shared -o fred.dylib fred.cpp
dhcp-191:~/Development/testy/fred% nm fred.dylib | c++filt | grep dofred
0000000000000fa0 T dofred(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >&)
dhcp-191:~/Development/testy/fred% clang++ -stdlib=libstdc++ -shared -o fred.dylib fred.cpp
dhcp-191:~/Development/testy/fred% nm fred.dylib | c++filt | grep dofred                     
0000000000000e30 T dofred(std::string&) 
```

您会得到两个完全不同的导出符号。尝试使用该符号时，使用相同`-stdlib`标志的应用程序将能够链接，而不使用该标志的应用程序将显示链接错误。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-13T22:20:35.313

将所有 C++ 文件放入单独的库后，我遇到了这个问题。我确实将所有项目的设置都设置为使用 libc++，但链接器没有与 libc++ 链接。如果我将 C++ 文件添加到主项目，问题就会消失。要解决此问题，您可以在主项目的“其他链接器标志”部分添加“-lc++”。这将强制 XCode 链接到 libc++。

编辑：正如另一张海报所说，XCode 可能表现正确。我原以为它会知道添加 C++ 链接，因为 C++ lib 源代码在同一个工作区上。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-22T18:31:19.867

我刚刚遇到了类似的问题，我不得不去“构建设置”，然后“Apple LLVM 5.1 - 语言 - C++”，然后将“C++ 标准库”更改为 libstdc++。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-02T20:03:40.767

您也可以尝试将一个空的 .cpp 文件添加到您的项目中。这将欺骗 xcode 加载 C++ 标准库

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T18:36:17.163

回应 jlukanta：我有同样的问题。我一直小心选择正确的 STD，但我仍然遇到这些错误。但这不是一个错误，它实际上是有道理的：如果您的项目中没有任何 C++ 代码，为什么 Xcode 应该与 c++ stdlib 链接？

当然，当您的项目中没有 C++ 代码但仍有 C++ 库时，这是一个问题。

# javascript - 在AngularJS中格式化日期时间

> ID：12920892
> 
> 赞同：125
> 
> 时间：2012-10-16T18:13:28.017
> 
> 标签：javascript, angularjs, date, datefilter

如何在 AngularJS 中正确显示日期和时间？

下面的输出显示了输入和输出，有和没有 AngularJS 日期过滤器：

```
In: {{v.Dt}}  
AngularJS: {{v.Dt | date:'yyyy-MM-dd HH:mm:ss Z'}} 
```

这打印：

```
In: 2012-10-16T17:57:28.556094Z 
AngularJS: 2012-10-16T17:57:28.556094Z 
```

所需的显示格式是 `2010-10-28 23:40:23 0400`或`2010-10-28 23:40:23 EST`

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-10-16T18:20:14.393

Your code should work as you have it see [this fiddle](http://jsfiddle.net/CkBWL/).

You'll have to make sure your `v.Dt` is a proper [Date](http://www.w3schools.com/jsref/jsref_obj_date.asp) object for it to work though.

```
{{dt | date:'yyyy-MM-dd HH:mm:ss Z'}} 
```

or if dateFormat is defined in scope as dateFormat = 'yyyy-MM-dd HH:mm:ss Z':

```
{{dt | date:dateFormat }} 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-10-16T18:27:02.640

v.Dt 可能不是 Date() 对象。

见[http://jsfiddle.net/southerd/xG2t8/](http://jsfiddle.net/southerd/xG2t8/)

但在你的控制器中：

```
scope.v.Dt = Date.parse(scope.v.Dt); 
```

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2014-05-05T18:32:18.960

我知道这是一件旧物品，但我想我会考虑另一种选择。

由于原始字符串不包含“T”标记，Angular 中的默认实现不会将其识别为日期。您可以使用 new Date 强制它，但这对数组来说有点麻烦。由于您可以将过滤器连接在一起，因此您可以使用过滤器将输入转换为日期，然后应用日期：过滤转换后的日期。创建一个新的自定义过滤器，如下所示：

```
app
.filter("asDate", function () {
    return function (input) {
        return new Date(input);
    }
}); 
```

然后在您的标记中，您可以将过滤器连接在一起：

```
{{item.myDateTimeString | asDate | date:'shortDate'}} 
```

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2014-04-11T16:44:32.743

您可以像这样获得“日期”过滤器：

```
var today = $filter('date')(new Date(),'yyyy-MM-dd HH:mm:ss Z'); 
```

这将以您想要的格式为您提供今天的日期。

* * *

## 回答 #5

> 赞同：49
> 
> 时间：2014-11-11T05:16:03.323

这是一个[过滤器](https://gist.github.com/cmmartin/341b017194bac09ffa1a)，它将采用日期字符串或 javascript Date() 对象。它使用[Moment.js](http://momentjs.com/)并且可以应用任何[Moment.js](http://momentjs.com/)转换函数，例如流行的“fromNow”

```
angular.module('myModule').filter('moment', function () {
  return function (input, momentFn /*, param1, param2, ...param n */) {
    var args = Array.prototype.slice.call(arguments, 2),
        momentObj = moment(input);
    return momentObj[momentFn].apply(momentObj, args);
  };
}); 
```

所以...

```
{{ anyDateObjectOrString | moment: 'format': 'MMM DD, YYYY' }} 
```

将显示**2014 年 11 月 11 日**

```
{{ anyDateObjectOrString | moment: 'fromNow' }} 
```

将显示**10 分钟前**

如果您需要调用多个矩函数，您可以将它们链接起来。这将转换为 UTC，然后格式化...

```
{{ someDate | moment: 'utc' | moment: 'format': 'MMM DD, YYYY' }} 
```

[https://gist.github.com/cmmartin/341b017194bac09ffa1a](https://gist.github.com/cmmartin/341b017194bac09ffa1a)

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2015-04-29T12:26:08.527

以下是一些流行的例子：

`<div>{{myDate | date:'M/d/yyyy'}}</div>` **2014 年 7 月 4 日**

`<div>{{myDate | date:'yyyy-MM-dd'}}</div>` **2014-07-04**

`<div>{{myDate | date:'M/d/yyyy HH:mm:ss'}}</div>` **2014 年 7 月 4 日 12:01:59**

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2012-10-16T18:19:26.260

Have you seen the **Writing directives (short version)** section of the [documentation](http://docs.angularjs.org/guide/directive)?

**HTML**

```
<div ng-controller="Ctrl2">
      Date format: <input ng-model="format"> <hr/>
      Current time is: <span my-current-time="format"></span>
</div> 
```

**JS**

```
function Ctrl2($scope) {
  $scope.format = 'M/d/yy h:mm:ss a';
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-06-05T03:25:24.763

在控制器内部，可以通过注入 $filter 来过滤格式。

```
var date = $filter('date')(new Date(),'MMM dd, yyyy'); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-04-17T07:20:11.450

我们可以用角度格式化视图侧的日期非常容易....请查看以下示例：

{{dt | 日期：“dd-MM-yyyy”}}

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-01-30T11:05:20.760

简单地说，如果你想像“2017 年 1 月 30 日 4:31:20 PM”这样输出，那么按照简单的步骤

step1- 在 js 控制器中声明以下变量

```
$scope.current_time = new Date(); 
```

step2-在html页面中显示

{{当前时间 | 日期：'中'}}

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-07-28T05:21:03.237

您可以使用`momentjs`在 angularjs 中实现日期时间过滤器。例如：

```
angular.module('myApp')
 .filter('formatDateTime', function ($filter) {
    return function (date, format) {
        if (date) {
            return moment(Number(date)).format(format || "DD/MM/YYYY h:mm A");
        }
        else
            return "";
    };
}); 
```

其中日期为时间戳格式。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-11-22T09:44:05.487

在控制器中添加`$filter`依赖项。

```
var formatted_datetime = $filter('date')(variable_Containing_time,'yyyy-MM-dd HH:mm:ss Z') 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-01-11T03:51:40.940

我建议你使用 moment.js，它对根据语言环境的日期格式有很好的支持。

创建一个内部使用 moment.js 方法格式化日期的过滤器。

# c++ - 如何使用 flashlite 作为前端创建桌面应用程序？

> ID：12920893
> 
> 赞同：0
> 
> 时间：2012-10-16T18:13:39.363
> 
> 标签：c++, windows, visual-c++, desktop-application, flashlite

我正在寻找有关如何创建一个桌面应用程序的信息，该应用程序为前端 UI 运行 flashlite，但后端有很多 c++ 代码。

非常感谢任何指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T22:31:32.413

以下是一些允许 Flash 前端和 C++ 后端的项目：

*   [烧瓶](https://www.adobe.com/devnet/games/articles/compiling-opengl-games.html)
*   [hxcpp](https://github.com/HaxeFoundation/hxcpp)

# lex - 当我们运行这段代码时如何获得输出？这段代码只接受输入，当我们输入时不显示 o/p？

> ID：12920899
> 
> 赞同：0
> 
> 时间：2012-10-16T18:14:29.007
> 
> 标签：lex, flex-lexer

```
//program for displaying words and lines
%{
    int w=0,ch=0;
%}
%%
[^ \t\n.:;,]+ {w++;ch+=yyleng;}
[ \t\n.:;,]+  {ch++;}
%%
main()
{
    printf("Enter the data \n");
    yylex();
    printf("No of words: %d \nNo of characters: %d\n",w,ch);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:53:01.163

(f)lex 生成的 yylex 函数在遇到包含 return 语句的规则或调用 yyterminate() 之前不会返回。（默认的 EOF 规则调用 yyterminate。）

您的程序完全符合预期：它使用输入直到文件结束，然后 yylex() 返回并打印最终摘要。

顺便说一句，您没有正确计算单词分隔符。`+`从第二个模式中删除重复运算符，或将其操作更改为`ch += yyleng;`

如果您确实想在行尾发布报告，请`\n`从第二个模式中删除并添加一个`\n`规则，其操作是`{ return; }`

# android - Android：将游戏数据从服务器发送到 Android 客户端

> ID：12920902
> 
> 赞同：2
> 
> 时间：2012-10-16T18:14:33.967
> 
> 标签：android, client-server

我正在为 Android 编写多人扑克游戏。游戏本身在服务器上运行（我想是PHP），客户端相应地向服务器提交他们的回合信息。

现在每次客户端提交他们的回合信息时，我需要服务器将该数据发送给游戏中的所有其他客户端......

到目前为止，我还没有弄清楚如何最好地做到这一点 - 我可以让每个客户端每隔几秒钟轮询一次服务器，以查看服务器是否有新的轮次数据可用，但我担心这不会很有可扩展性并且服务器很快就会不堪重负（同时进行多个游戏）...

同样，我发现用于将通知从服务器推送到客户端的 Android 服务（如 GCM、带有 C2DM 的 App Engine）对于游戏来说似乎效率不高，因为每条消息可能需要长达 15 分钟的时间......

仅使用套接字连接有什么问题，并让 Android 客户端使用 AsyncTask 来监听连接吗？或者有人知道我可能使用的一些库吗？我采用的任何方法都需要具有可扩展性、可靠和快速（目标是每个玩家转身时间不超过 30 秒，并且希望更快……）

我真诚地感谢您提供的任何建议，因为我是编码这种类型的新手，而且我自己一个人。提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:52:26.553

我和其他人一起在一个类似的系统上工作，通信也是通过套接字（和自定义协议）完成的。

# asp.net - 拿一台新的 Windows7 电脑，把它变成一个互联网服务器

> ID：12920905
> 
> 赞同：-4
> 
> 时间：2012-10-16T18:14:48.450
> 
> 标签：asp.net, windows-7, iis-7, installation

请对我放轻松。

我刚刚接到任务，将一台新的 Windows7 计算机转换为 ASP.Net SQL Server 2012 数据库系统的 Internet 服务器。

我们将使用 IIS7 作为 Internet 服务器。

我可以安装 IIS7 和 SQL Server，但我们不知道从那时起如何进行。

您能否指出正确的方向，我可以在哪里获得有关使这台机器准备成为互联网服务器的分步说明？我们还将寻找有关如何发布已完成的 ASP.Net 应用程序的说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:29:57.887

在 iis 上部署站点后

1.  首先检查它可以在具有相同共享网络连接的其他计算机上的本地网络上访问，例如 192.168.1.2（您的本地 IP）。

2.  然后转到路由器设置并添加 ip 转发（在高级设置下），如 192.168.1.2 http

3.  解锁任何防火墙
4.  通过您的路由器 ip ( [http://www.whatsmyip.org/](http://www.whatsmyip.org/) )检查您的网站

如果您的服务提供商不支持静态 ip，您可以使用[http://dyn.com/dns/webhop/](http://dyn.com/dns/webhop/)进行域到 ip 转发（这将在您的系统 ip 更改时更改域附加 ip）。

# r - 当 x2 等于 R 中的特定值时，绘制 x 到 y

> ID：12920906
> 
> 赞同：-1
> 
> 时间：2012-10-16T18:14:49.393
> 
> 标签：r, plot

我该怎么做以上？我想为此绘制点，但我只知道如何将一个变量绘制到另一个变量，而不考虑任何其他变量。首先，我绘制`x`到`y`然后我想要我的线（或者点也可以）`x2`等于一个特定的值。

例子：

> x1: 1,1,1,1,1,2,2,2,2,2
> x2: 1,2,3,4,5,1,2,3,4,5
> y: 3,8,11, 14,19,5,10,12,16,19

我想将 x1 绘制到 y（x 轴上的 x1，y 轴上的 y）。那是

> 情节（x1，y）

现在我可以像这样绘制我想要的点：

> 点(1,3)
> 点(2,19)

因为这些是 x2==1 的。但由于我有更多的数据，我不能这样做。另外，我希望那是一条线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:19:59.243

You could use the following commands to generate the plot:

```
plot(x1, y)
points(x2, y) 
```

Or, alternatively:

```
plot(x1, y, xlim = range(c(x1, x2)))
points(x2, y, col = "red", pch = 2) 
```

![enter image description here](../Images/d6e996e6dd1fee9dd0f441d15f8cca0f.png)

By the way, `k++` does not work in R, use `k <- k + 1` instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T20:24:15.640

我认为您想绘制 y 与 x1 的图，但仅适用于 x2 等于 1 的 y 和 x1 的值。最简单的方法是将向量组合成一个数据框并使用“子集”：

```
df <- data.frame(x1=x1, x2=x2, y=y)
dfSubs <- subset(df, x2==1) 
```

然后按照你喜欢的方式绘制它，例如：

```
plot(dfSubs$x1, dfSubs$y, type="l") 
```

![在此处输入图像描述](../Images/ebfb4f43f3f52d04bb5dd893ae2f3b92.png)

# perl - 在 Hadoop 上的 Perl 中，如何获取映射器正在处理的文件的文件？

> ID：12920907
> 
> 赞同：0
> 
> 时间：2012-10-16T18:14:48.817
> 
> 标签：perl, hadoop

在 Hadoop 中，我传递了一个包含各种文件的目录/*。文件的名称对于数据处理很重要。我在 Perl 中需要这个解决方案。

我相信 Java 等价物是 job.get("map.input.file")。我找了大约 45 分钟，但找不到 Perl 解决方案。

谢谢你，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:45:54.577

所有作业配置变量都被序列化到流程环境，使用`StreamUtils.safeEnvVarName`方法中的一些代码将属性名称设为“安全”。

基本上，此方法会将属性名称中的任何非 [0-9A-Za-z] 字符替换为下划线，因此`map.input.file`应该可用作名为的环境变量`map_input_file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T09:01:34.280

用代码总结 Chris 很好地解释的内容，您需要以下两行来获取输入文件名并将其打印到 stderr：

```
my $filename = $ENV{"map_input_file"};
print STDERR "Input filename is: $filename\n"; 
```

# javascript - 将 twitter 集成到移动 Web 应用程序中，无需进入应用程序窗口

> ID：12920909
> 
> 赞同：2
> 
> 时间：2012-10-16T18:14:51.367
> 
> 标签：javascript, twitter, mobile-website

我正在尝试仅使用 javascript、html5 和 css 将 twitter 集成到我的移动网络应用程序中。我的应用只有一个 url，我们使用 wink 来处理页面导航。问题是每当我们出去并返回（甚至在同一窗口中打开一个新的 url 并返回）到我们的移动网络应用程序时，应用程序都会重新加载，我们不希望在发布推文时发生这种情况。

因此，对于 facebook，我们包含了自己的 JavaScript SDK，并使用 FB.ui 来处理分享。

```
FB.ui({
        method: 'feed',
        name: 'name',
        caption: 'caption',
        description: 'desc',
        link: 'link',
        picture: 'pic'
    },
    function (response) {
        console.log('response: ', response);
    }); 
```

当我们调用该函数时，屏幕上会出现一个带有关闭按钮的弹出窗口。当我们关闭 fb 弹出窗口时，我们的主应用程序什么也没有发生。它还处理 iPhone 和 iPad 之间的不同行为。

所以我想用 twitter 做同样的事情，能够发推文、转发推文、关注和收藏推文。首先，我使用的是 twitter 按钮，它总是会转到我们的主 url 并在单击按钮时创建一个新窗口。然后，我尝试在 iframe 中打开共享 url，后来我发现它被 twitter 禁止。然后，我想使用它的 API，但是像发布推文这样的写查询需要一个后端，而我不想拥有它。

到目前为止，我已经尝试过：

```
<a id="twitterURL" class="twitter_share" href="https://twitter.com/share?url=http%3A%2F%2Fwww.myapp.com&text=shareing">Share</a>
<a id="twitterURL" class="twitter_share" href="http://mobile.twitter.com/home?status=sharing">Share</a>
<a id="twitterURL" class="twitter_share" href="https://twitter.com/intent/tweet">Share</a> 
```

我从stackoverflow得到的最接近的问题是[Twitter connect from website without popup](https://stackoverflow.com/questions/5895111/twitter-connect-from-website-without-popup) 但没有得到完全回答，他和我的区别是如果用户接受他很好，但我的不是，因为应用程序会刷新。

我是新来的，所以如果有人知道如何缩小我的话范围以提出一个简单但有效的问题，请告诉我，谢谢！

# ios - iOS 6 自动暂停不起作用

> ID：12920911
> 
> 赞同：2
> 
> 时间：2012-10-16T18:14:59.940
> 
> 标签：ios, geolocation, location, ios6

**我已经按照“ Session 303 - 从定位服务保持正轨**” WWDC 2012中的 AutoPause 示例

在示例中，您可以看到 AutoPause 是如何启用的，并且有两个方法被调用：

```
-(void) locationManagerDidPauseLocationUpdates:(CLLocationManager *)manager
-(void) locationManagerDidResumeLocationUpdates:(CLLocationManager *)manager 
```

我做了同样的例子，但这些方法从来没有被调用过。谁试过同样的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T13:03:02.057

我现在正在对此进行试验，以下是我的观察结果：

**在 iPhone 4**上，这根本不起作用。即使您将 pausesLocationUpdatesAutomatically 设置为 YES，它也会将 pausesLocationUpdatesAutomatically 设置为 NO(0)。没有警告，这是什么 API 设计反模式！

**iPhone 5** pausesLocationUpdatesAutomatically 默认为 YES (1)。并调用 locationManagerDidPauseLocationUpdates。我在调用 locationManagerDidResumeLocationUpdates 时运气不好。我也很困惑，如果 GPS 关闭，这将如何调用？一旦用户到达下一个网络单元，它会被调用吗？即使那不是我的经验，也从来没有被称为。

到目前为止，在我看来，这是 iOS6 中一致性最差的变化之一。对于所有场景，我可能只使用 pausesLocationUpdatesAutomatically = NO，并希望在 iOS6 的所有型号上都能正常工作。

[更新 - 2013 年 3 月 4 日]。我查看了 Apple 关于 iOS6 中位置更改的演示文稿，他们建议在收到区域更改事件后使用区域更改监控来“取消暂停”。虽然这不适合我的场景，因为用户可能会去/跑步/开车一两公里，直到发生这样的事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T15:28:28.113

我遇到了同样的问题，发现您必须将属性设置`pausesLocationUpdatesAutomatically`为`YES`

# file - joomla中的文件上传问题，路径和权限正确

> ID：12920913
> 
> 赞同：0
> 
> 时间：2012-10-16T18:15:00.097
> 
> 标签：file, joomla, permissions, uploading

大家好，我在 joomla 文件中放了一些代码，我遇到了一个问题，即目标路径和文件夹权限是正确的，尽管文件没有上传

这是代码

```
$avatar_file = JRequest::getVar('image', null, 'files','array');
            $upfilename= str_replace($replace,'_',$avatar_file['name']);
            //echo JPATH_ROOT.DS.'images'.DS.'easyblog_avatar'.DS;
            //exit;
            print_r($_FILES);
            $arr = '{"google_profile_url":"","show_google_profile_url":""}';
            echo is_uploaded_file($_FILES['image']['tmp_name']).'<br>'.
            //$destFilePath = dirname(dirname(dirname(dirname(__FILE__)))).DS.'images'.DS.'easyblog_avatar'.DS.$user_id.'_'.$upfilename;
            $destFilePath = JPATH_ROOT.DS.'images'.DS.'easyblog_avatar'.DS.$user_id.'_'.$upfilename;
            //if(JFile::upload($avatar_file['tmp_name'], JPATH_ROOT.DS.'images'.DS.$user_id.'_'.$upfilename)){
            if(@move_uploaded_file($_FILES['image']['tmp_name'], $destFilePath)){
                $avatar = $user_id.'_'.$upfilename;
            } 
```

我使用 joomla 函数和核心函数来上传文件，但它没有上传。

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:25:17.253

```
 //import joomlas filesystem functions, we will do all the filewriting with joomlas functions
    jimport('joomla.filesystem.file');
    jimport('joomla.filesystem.folder');

  //this is the name of the field in the html form, filedata is the default name for swfupload
$fieldName = 'Filedata';

    //the name of the file in PHP's temp directory that we are going to move to our folder
    $fileTemp = $_FILES[$fieldName]['tmp_name'];

    //always use constants when making file paths, to avoid the possibilty of remote file inclusion
    $uploadPath = JPATH_SITE.DS.'path'.DS.'path'.DS.$fileName;

    if(!JFile::upload($fileTemp, $uploadPath)) 
    {
            echo JText::_( 'ERROR MOVING FILE' );
            return;
    } 
```

# mysql - 如何在mysql中设计用于用户角色分配和区域分配的数据库结构？

> ID：12920917
> 
> 赞同：0
> 
> 时间：2012-10-16T18:15:22.117
> 
> 标签：mysql

最近我的公司给我分配了一个项目来管理我公司的营销团队。我遇到麻烦或无法决定数据库结构。

在此项目中，具有以下访问角色：

1）CMO（首席营销官）

2) ------------总经理

3) ------------------区域经理

4) ------------区域经理/州负责人

5) ------------------助理经理

6) ------------------------------------区域经理

7) ------------------------------用户

访问级别将根据上述角色层次结构。
例如 CMO 具有完全访问权限，区域经理具有除 CMO 之外的所有访问权限等。

现在第二个主要的事情是区域（区域将在合并多个区域/州后制作）区域/州（将在合并多个城市后制作）区域/城市

现在所有用户将默认添加到任何区域然后管理员分配一个角色和一个区域或州或区域最后用户可以根据他们的角色和他们分配的区域/州/城市/区域在系统中访问

如果任何用户访问角色是区域经理并分配像 Region1 这样的区域现在用户将能够访问 region1 中的所有州/地区及其城市

请帮我设计管理这些所有事情的数据库结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:24:59.333

在您的数据库中创建一个名为“用户”的表。在这里，您可以创建多个表或一个。基本上，您想在表/表中创建角色字段和区域字段。当用户登录时，将根据他们的角色（即 1 是 gm，7 是用户）/区域授予他们访问权限。

对于您想要做的事情，有很多多种语言的预构建解决方案。我会建议搜索一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:45:05.803

为了表示层次结构，您可以创建您的角色表，其中包含一个`parent_role_id`表示其他角色可以“位于”父级的列。

例如：

```
CREATE TABLE `roles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `role` varchar(45) NOT NULL,
  `parent_role_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `parent_role_id` (`parent_role_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

如果我想添加一个 CMO，他们会将这个字段保持为空，因为没有人在他们之上。然而，区域经理的父 ID 为`5`（假设 CMO 为 1），因为他们在协助经理之下。这使您可以仅使用一个表来构建类似文件夹的结构。

其他用户的位置关系可以通过多种方式完成。我认为最简单的方法是通过许多多对多的关系，例如：

```
CREATE TABLE `users` (
  `id` int(11) NOT NULL,
  `username` varchar(50) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `user_roles`(
  `user_id` int(11) NOT NULL,
  `role_id` int(11) NOT NULL,
  PRIMARY KEY (`user_id`,`role_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `user_region` (
  `user_id` int(11) NOT NULL,
  `region_id` int(11) NOT NULL,
  PRIMARY KEY (`user_id`,`region_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

如果您正在寻找将这些用于管理授权（也称为权限），那么根据您使用的语言，一个更具测试性和灵活性的解决方案可能是访问控制列表 (ACL)。

[http://en.wikipedia.org/wiki/Access_control_list](http://en.wikipedia.org/wiki/Access_control_list)

# sql - Oracle - 存储特定长度数字的数据类型

> ID：12920922
> 
> 赞同：2
> 
> 时间：2012-10-16T18:15:34.620
> 
> 标签：sql, oracle, types, sqldatatypes

我试图弄清楚我应该在我的数据库中使用什么数据类型来存储一个固定的 8 位数字。

`char(8)`即使它接受其他字符并在应用程序端进行验证，我也应该使用它还是有类似的东西`number(x)`可以做到？

我在电话号码列中遇到了同样的困境。我应该使用`char(x)`还是更合适的东西？

编辑 - 回答您的问题：

1.  第一个固定的 8 位列最有可能用作主键。它代表我国的社会安全号码。不会对该列进行任何算术运算。我需要保留所有数字（甚至可能是前导零）。虽然，它可能会排序（因为它将是主键）
2.  对于电话号码，我打算将其存储为这样的字符串：`12345678901`。问题更多是关于“我如何确保这`char[]`不会接受字母或其他字符。是否应该在客户端进行此验证？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T18:34:27.317

这取决于。

是数字吗？你会对这个数字进行数学运算吗？你会按数字排序吗？如果是，则将其存储为数字。您还应该创建一个约束以确保该数字始终具有 8 位数字：

```
number_field number(8) check (number_field between 11111111 and 99999999) 
```

如果它更像是一个代码（如信用卡号、社会保险号或帐号），我想我会使用 char(8) 和一个检查约束以确保它只包含数字（正则表达式是一个非常好的用于此）。通过使用 char 数据类型而不是 varchar，您不需要确保该字段包含 8 个字符，只需确保这些字符都是数字。

```
code_field char(8) check (regexp_like(code_field, '[:digit:]{8}')) 
```

实际上，您想要的是*域*，但 Oracle 没有它们。

至于验证客户端还是服务器端，在我的世界里，我总是依靠数据库约束来确保存储在数据库中的数据尽可能干净。在我的应用程序中，我测试约束违规以向用户返回适当的错误。当然，您也可以在客户端进行验证，但为什么要重复自己呢？唯一的情况是当您想避免往返服务器时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:23:54.533

如果您打算将它们用于数学运算，则应始终使用数字数据类型来存储数字。所以使用`NUMBER`并确保您可以使用 NUMBER(8) 指定它的长度，但请确保您永远不会使用更长的数字。

有关[Oracle 数据类型](http://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#i16209)的更多信息。

至于电话号码，最好将其存储为`CHAR(11)`. 我建议您在存储之前删除任何无用的字符，同时确保数据的一致性。

因此，“1 (888) 673-1234”将在您的表中存储为“18886731234”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:29:38.800

如果您不进行任何数字操作或用作主键，则使用 char(8) 可以使用 number(8) ：如果使用 number(8) 数据类型并存储 1234，它将仅存储 4 位需要格式化为显示为 8 位。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T18:22:33.710

使用数值类型，例如 int。

# cloud-foundry - 为什么我会收到错误 402：应用程序打包失败：vmc 推送时同步资源池失败？

> ID：12920925
> 
> 赞同：0
> 
> 时间：2012-10-16T18:15:44.463
> 
> 标签：cloud-foundry

当我搜索它时，这是链接[错误 402：应用程序打包失败：](https://stackoverflow.com/questions/10826721/error-402-app-packaging-failed-failed-synchronizing-resource-pool)显示“同步资源池失败”，它说它已经解决了。

使用 vmc 0.3.21、rails 3.2 应用程序。

```
vmc push funsole
Would you like to deploy from the current directory? [Yn]: y
Pushing application 'funsole'...
Creating Application: OK
Creating Service [mysql-funsole]: OK
Binding Service [mysql-funsole]: OK
Creating Service [redis-funsole]: OK
Binding Service [redis-funsole]: OK
Uploading Application:
  Checking for available resources: OK
  Processing resources: OK
  Packing application: OK
  Uploading (27K): OK   
Error 402: App packaging failed: 'Failed synchronizing resource pool' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:49:19.247

在应用上传到云控制器之前，vmc会检查云控制器资源池中是否已经存在这些文件，如果是，则将那些已经存在的本地文件rm，并同步到CC；如果没有，vmc 会将所有本地文件打包上传。

结果，在某些情况下捕获了此异常：

1.  Cloud Controller中资源目录的权限不对；
2.  在资源目录不共享的情况下使用云控制器集群；

你云有这些检查；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T12:09:35.367

您是否尝试过将其部署到 Micro Cloud Foundry 实例？

我假设您还删除了尝试重新部署它的应用程序。如果应用程序源在某处可用，我将非常乐意尝试自己部署它，看看我是否能找出问题所在。

# mysql - Mysql SELECT 查询计算两个日期的剩余小时数

> ID：12920929
> 
> 赞同：0
> 
> 时间：2012-10-16T18:16:02.357
> 
> 标签：mysql

我有一个选择查询。我今天通过了`date(now())`，到目前为止，我希望我的查询返回当天没有小时数。

```
SELECT DATEDIFF(CURDATE(), to) as timeleft 
```

例如：now() 将是今天的日期 16/10/2012 和日期将是 18/10/2012，我希望我的查询返回 24 小时。

是否可以从日期开始计算确切的小时数，因为在 2012 年 10 月 16 日已经过去了将近半天，我们能否将输出设为 36 小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:25:31.590

当我想计算 2 个日期之间的差异时，我使用`UNIX_TIMESTAMP()`给我 unix 时间，然后计算 2 个日期之间的秒数差异。

```
SELECT ((UNIX_TIMESTAMP(todate) - UNIX_TIMESTAMP(fromdate))/3600) AS hoursdiff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:46:40.650

您可以使用 ：

```
SELECT TIMESTAMPDIFF(Hour,now(),'2012-10-18'); 
```

# css - Heroku 应用程序样式表没有指纹

> ID：12920934
> 
> 赞同：0
> 
> 时间：2012-10-16T18:16:18.817
> 
> 标签：css, ruby-on-rails, heroku, assets, pipeline

当部署到 heroku 时，我遇到了我的 CSS 文件没有指纹的问题，并且在访问时会导致 404 错误。我尝试了以下解决方案（[Rails 3.1 资产在生产中没有指纹](https://stackoverflow.com/questions/7648349/rails-3-1-assets-has-no-fingerprint-in-production)），但它没有帮助（原始帖子似乎说问题也会出现在本地生产中）。在本地生产中运行时，不会发生错误，但是，一旦推送到 Heroku，链接会从`application-[MD5_FINGERPRINT].css`到`application.css`. 我在链接的帖子中尝试了解决方案，但没有帮助。给出的错误是`ActionController::RoutingError (No route matches [GET] "/assets/application.css"):`（我尝试了 Rails 3.1 指南，即使我在 3.2.8 上）

# php - SimpleImage PHP 脚本因大图像而失败

> ID：12920935
> 
> 赞同：0
> 
> 时间：2012-10-16T18:16:22.153
> 
> 标签：php, image-resizing

我正在使用非常方便的 SimpleImage PHP 类来调整图像大小，并且遇到了以下问题：

在测试上传各种图片时，某些图片正在上传但未调整大小。经调查，图像的实际尺寸似乎是问题的原因（而不是文件大小）。5M 的图像会上传和调整大小，而 190 万的图像不会。区别在于后者是 4000 X 3000 - 比另一个更大的尺寸。我调整了成功图像的大小以确保，并且发生了同样的失败。

这是一个静默失败，不会生成任何错误消息。

我正在使用确切的 SimpleImage 类，如此[处所示](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

我将它与 Uploadify 结合使用，如下所示。目前，我只是想将平面转换为 200 像素高的图像。解决这个问题的任何帮助将不胜感激 - 我是否需要逐步调整大小，或者最好的方法是什么？

```
<?php
session_id($_REQUEST['sID']);
session_start();
require_once '../config.php';

$target_dir = $_SERVER['DOCUMENT_ROOT'].GAL_DIR.$_POST['target_dir'];

if (!empty($_FILES)) {

    require_once 'SimpleImage.php';
    $file_parts = pathinfo($_FILES['Filedata']['name']);    

    $name = preg_replace("/[^A-ZÀ-ÿ0-9._-]/i", " ",$file_parts['filename']);

            /* Just some record keeping...
    $text = "txtrec.txt";
    $att = $target_dir."txtrec.txt";
    $record= "TIME: ".date('Y-m-d H:i:s')."\n";
    $record.= "IP: ".$_SERVER['REMOTE_ADDR']."\n";
    $record.= "DATA ARRAY: ". implode(",",$_FILES['Filedata'])."\n";
    $record.= "NAME: ".$_FILES["Filedata"]["name"]."\n"; //file-name.ext
    $record.= "TYPE: ".$_FILES["Filedata"]["type"]."\n"; //application/octet
    $record.= "SIZE: ".$_FILES["Filedata"]["size"]."\n"; //bit size
    $record.= "TMP_NAME: ".$_FILES["Filedata"]["tmp_name"]."\n"; //tmp storage name
    $record.= "BASENAME: ".$file_parts['basename'] ."\n"; //file-name.ext
    $record.= "EXTENSION: ".$file_parts['extension'] ."\n"; //ext (no dot)
    $record.= "FILENAME: ".$file_parts['filename'] ."\n"; //file-name (no dot/ext)
    $record.= "DOCUMENT_ROOT: ".$_SERVER['DOCUMENT_ROOT']."\n";
    $record.= "TARGET_DIR: ".$target_dir ."\n"; //path to gallery dir (with closing slash)
    $record.= "TMP_DIR: ".$target_dir.'tmp/'."\r\r\n";
    $fh = fopen($text, 'a') or die("can't open file");
        fwrite($fh, $record);
    fclose($fh);
    $fh = fopen($att, 'a') or die("can't open att file");
        fwrite($fh, $record);
    fclose($fh);
            */

    // Validate the file type
    $ok = FALSE;
    $ok_types = array('jpg','jpeg','gif','png');
    $file_ext = strtolower($file_parts['extension']);
    if (in_array($file_ext,$ok_types)) {
        $ok = TRUE;
    }

    if($ok) {
        $fileName = $name.'.'.$file_parts['extension'];
        array_push($_SESSION['files'],$fileName);
        $tmp_file=$target_dir.'tmp/'.$name.'.'.$file_parts['extension'];
        $target_file=$target_dir.$name.'.'.$file_parts['extension'];
        move_uploaded_file($_FILES["Filedata"]["tmp_name"],$tmp_file);

        list($width, $height, $type, $attr) = getimagesize($tmp_file);
        $dimensions = $width.' '.$height.' '.$type.' '.$attr;
        $fh = fopen($text, 'a') or die("can't open file");
            fwrite($fh, $dimensions);
        fclose($fh);

        $image = new SimpleImage();
        $image->load($tmp_file);
        $image->resizeToHeight(200);
        $image->save($target_file);

        unlink($tmp_file);

            echo '1';
    } 
    else {
        echo 'Invalid file type.';
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:58:46.050

如果它在非常大的图像上失败，则您的 PHP 脚本可能内存不足或运行时间不足。尝试将其放在脚本的顶部：

```
ini_set('memory_limit','32M'); // Or However Big the Image is in MB
ini_set('max_execution_time', '60'); // Extend execution time to a minute 
```

# c++ - NSImage 和 NSBitmapImageRep 内存泄漏

> ID：12920937
> 
> 赞同：0
> 
> 时间：2012-10-16T18:16:33.443
> 
> 标签：c++, objective-c, appkit, nsimage

我在 c++ 应用程序中使用目标 C 在 OSX 上加载图像。它是一个 OpenGL 应用程序。这是我用来将图像加载到 opengl 中的代码：

```
bool OSXSpecifics::loadPNGOSX(const char *fileName, int &outWidth, int &outHeight, GLuint *outTexture) {
NSImage *image = [[NSImage alloc] initWithContentsOfFile:[NSString stringWithUTF8String: fileName]];
NSBitmapImageRep *bitmap = [[NSBitmapImageRep alloc] initWithData:[image TIFFRepresentation]];

NSArray* imageReps = [image representations];

bool hasAlpha;

for (NSImageRep *imageRep in imageReps) {
    if ([imageRep pixelsHigh] > outHeight) {
        outHeight = [imageRep pixelsHigh];
    }
    if ([imageRep pixelsWide] > outWidth) {
        outWidth = [imageRep pixelsWide];
    }
}
if ([bitmap hasAlpha] == YES) {
    hasAlpha = true;
} else {
    hasAlpha = false;
}

glGenTextures(1, outTexture);
glBindTexture(GL_TEXTURE_2D, *outTexture);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);

glTexImage2D(GL_TEXTURE_2D, 0, hasAlpha ? 4 : 3, outWidth, outHeight, 0,
             hasAlpha ? GL_RGBA : GL_RGB, GL_UNSIGNED_BYTE, [bitmap bitmapData]);
[bitmap release];
[image release];
return true;
} 
```

感谢 Instruments，每次调用此函数时我都检测到内存泄漏。Instruments 表示`[NSImage TIFFRepresentation]`并`[NSBitmapImageRep bitmapData]`正在使用大量内存。

它不会失控，但每次调用此函数时，内存使用量都会攀升数百千字节。

我在 Objective-c 方面的经验是有限的，所以我不知道如何解决这个问题，因为我认为它`release`可以正常工作。

只是为了让您知道 OpenGL 纹理稍后会被释放，并且我已经确认它不是内存泄漏的来源。

编辑：经过进一步测试，我发现这在理论上不是内存泄漏，因为 Instruments 没有报告“内存泄漏”。但是，每当调用此函数时，应用程序的内存使用量就会上升并且永远不会下降。当加载游戏中的场景时调用此函数，因此每当加载场景时，内存使用量就会增加几兆字节。这怎么可能发生。我确信正是这个功能耗尽了所有内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:20:20.900

首先：代码看起来没有泄漏。我的猜测是 NSImage 在内部进行了一些无害的缓存，以确保如果您再次加载此图像文件，它可以重新使用相同的 NSImage，这可能就是您所看到的。或者可能是文件系统缓存。如果内存变得紧张，这些缓存可能会被刷新，并且释放的内存可供您的应用程序使用。

也就是说，您的代码似乎过于复杂。您创建一个 NSImage（由 NSImageReps 组成，其中一个很可能是 NSBitmapImageRep）然后获取它的 TIFFRepresentation（即将所有数据重新编码为 TIFF，可能再次压缩它），然后从中创建一个 NSBitmapImageRep（解压缩和解码TIFF 再次），然后获取它的 bitmapData。

At the least, you should probably create an NSData from the file and create your NSBitmapImageRep from that. That will skip the entire NSImage creation and TIFF steps.

Even better would probably be if you just went and used the lower-level ImageIO library. Create a CGImageRef from your file, then hand the image's raw, decompressed data off to OpenGL. I vaguely remember there might even be a better way to create an OpenGL texture if you go through CIImage or CoreVideo, but I may be mixing that up with the reverse (texture to CIImage).

# php - PHP echo 工作，但 preg_match 不起作用

> ID：12920938
> 
> 赞同：0
> 
> 时间：2012-10-16T18:16:32.963
> 
> 标签：php, curl

// 我做了一些更改，但 preg_match 函数不起作用并回显工作。我不明白出了什么问题。我要疯了

```
public function crawl()
{
    $html = $this->getPageHTMLContent($this->getDomain().$this->entryPagePath);
    $categoryPageDom = $this->getHtmlDom($html); 

    echo $categoryPageDom->find('div#pagination a.gh', 1)->attr['href'];

    preg_match("/\?p=(.*)&q/", $categoryPageDom->find('div#pagination a.gh', 1)->attr['href'], $machtes);
    var_dump($machtes);
}

public function getPageHTMLContent($url){
    $ch = curl_init();
     curl_setopt($ch, CURLOPT_URL, $url);
     curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
     $contents = curl_exec ($ch);
     curl_close ($ch);

     return $contents;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:36:01.677

尝试从 curl_download 返回一个值，没有`return` 语句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:35:41.830

问题与 URL 有关 当我制作 echo $categoryPageDom->find('div#pagination a.gh', 1)->attr['href']; 我在浏览器上得到类似[http://www.xxxx.de/xxxxxxxxxxxxxxx=iw&artikel=101&detail=mak的东西。](http://www.xxxx.de/xxxxxxxxxxxxxxx=iw&artikel=101&detail=mak)但是当我看到源代码时，它看起来像这样[http://www.xxxx.de/xxxxxxxxxxxxxxx=iw&](http://www.xxxx.de/xxxxxxxxxxxxxxx=iw&) *amp;*artikel=101&*amp;*detail=mak 问题是**amp;** 我已经使用**str_replace**将其删除。卷曲效果很好

# ios - iOS 上的堆栈跟踪解释

> ID：12920940
> 
> 赞同：0
> 
> 时间：2012-10-16T18:16:49.073
> 
> 标签：ios, stack-trace

有人可以帮我理解以下 iOS 堆栈跟踪吗？我很想知道问题出自哪个 UIViewController，这样我就可以查明问题所在：

```
0 libobjc.A.dylib 0x31576f78 objc_msgSend + 15
1 CoreFoundation 0x3168b3fd -[NSObject performSelector:withObject:withObject:] + 52
2 UIKit 0x31a9c6a1 -[UIApplication sendAction:fromSender:toTarget:forEvent:] + 64
3 UIKit 0x31a9c65b -[UIControl(Deprecated) sendAction:toTarget:forEvent:] + 46
4 UIKit 0x31a466a9 -[UIControl(Internal) _sendActionsForEventMask:withEvent:] + 488
5 UIKit 0x31a4516d -[UIFieldEditor becomeFieldEditorForView:] + 168
6 UIKit 0x31a44a9d -[UITextField _becomeFirstResponder] + 96
7 UIKit 0x3196291d -[UIResponder becomeFirstResponder] + 336
8 UIKit 0x31a614a7 -[UITextInteractionAssistant setFirstResponderIfNecessary] + 174
9 UIKit 0x31a60d71 -[UITextInteractionAssistant oneFingerTap:] + 1608
10 UIKit 0x31a60637 _UIGestureRecognizerSendActions + 106
11 UIKit 0x319f0d65 -[UIGestureRecognizer _updateGestureWithEvent:] + 304
12 UIKit 0x31c21479 ___UIGestureRecognizerUpdate_block_invoke_0541 + 48
13 UIKit 0x3196cf55 _UIGestureRecognizerApplyBlocksToArray + 176
14 UIKit 0x3196baa3 _UIGestureRecognizerUpdate + 898
15 UIKit 0x319787e9 _UIGestureRecognizerUpdateGesturesFromSendEvent + 28
16 UIKit 0x31978627 -[UIWindow _sendGesturesForEvent:] + 774
17 UIKit 0x319781f5 -[UIWindow sendEvent:] + 88
18 UIKit 0x3195e695 -[UIApplication sendEvent:] + 356
19 UIKit 0x3195df3b _UIApplicationHandleEvent + 5826
20 GraphicsServices 0x32b6122b PurpleEventCallback + 882
21 CoreFoundation 0x31705523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
22 CoreFoundation 0x317054c5 __CFRunLoopDoSource1 + 140
23 CoreFoundation 0x31704313 __CFRunLoopRun + 1370
24 CoreFoundation 0x316874a5 CFRunLoopRunSpecific + 300
25 CoreFoundation 0x3168736d CFRunLoopRunInMode + 104
26 GraphicsServices 0x32b60439 GSEventRunModal + 136
27 UIKit 0x3198ccd5 UIApplicationMain + 1080
28 MyApp 0x000aa96b _mh_execute_header + 14699 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:25:05.973

从该堆栈跟踪我们可以推断出用户在文本字段上点击了他的手指。如果您的应用程序中只有一个文本字段，那么您现在知道涉及哪个 UI 元素，也许您可​​以从中推断出涉及哪个视图控制器。

我们还可以看到文本字段正在发送其成为第一响应者的操作。如果您的应用程序中只有一个文本字段具有“Editing Did Begin” ( `UIControlEventEditingDidBegin`) 事件的目标和操作，那么您现在知道涉及哪个 UI 元素，也许您可​​以从中推断出涉及哪个视图控制器。

否则，您无法从该堆栈跟踪中分辨出涉及哪个视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:25:31.013

“我很想知道问题源自哪个 UIViewController”<- 仅从堆栈跟踪中无法得知。在启用调试符号的情况下崩溃和/或构建的函数上设置断点。

# python - 3D 直方图上的错误跟踪器值

> ID：12920941
> 
> 赞同：6
> 
> 时间：2012-10-16T18:17:15.933
> 
> 标签：python, matplotlib

这是一些显示 3D 直方图的代码。但是，右下角的跟踪器无法正确显示鼠标的位置。

跟踪器说`x = e`，当鼠标明显结束时`c`。跟踪器说`z = 01-02`。那是怎么回事？（z 跟踪器值似乎由 y 轴格式化程序控制。）

如何修复代码？

```
import matplotlib.pyplot as plt
import numpy as np
import mpl_toolkits.mplot3d.axes3d as axes3d
import matplotlib.dates as mdates
import matplotlib.ticker as ticker
import datetime as dt
import random

np.random.seed(0)
fig = plt.figure()
ax = fig.add_subplot(1, 1, 1, projection = '3d')

cmap = plt.get_cmap('RdBu')
event_labels = 'abcdefghij'
events = range(len(event_labels))
label_map = dict(zip(events,event_labels))

dates = mdates.drange(dt.datetime(2012, 10, 1),
                      dt.datetime(2012, 10, 10),
                      dt.timedelta(days = 1))
events_list = [(random.choice(dates), random.choice(events))
               for i in range(50)]

event_array, date_array = zip(*events_list)

# Much of the code below comes from 
# http://matplotlib.org/examples/mplot3d/hist3d_demo.html
hist, xedges, yedges = np.histogram2d(date_array, event_array)

elements = (len(xedges)-1) * (len(yedges)-1)
xpos, ypos = np.meshgrid(xedges[:-1]+0.25, yedges[:-1]+0.25)

xpos = xpos.flatten()
ypos = ypos.flatten()
zpos = np.zeros(elements)
dx = 0.5 * np.ones_like(zpos)
dy = dx.copy()
dz = hist.flatten()

ax.bar3d(xpos, ypos, zpos, dx, dy, dz, color='b')

xfmt = ticker.FuncFormatter(lambda x, pos: label_map[int(x)])
yfmt = mdates.DateFormatter('%m-%d')
zfmt = ticker.FuncFormatter(lambda z, pos: str(z))
ax.w_xaxis.set_major_formatter(xfmt)
ax.w_yaxis.set_major_formatter(yfmt)
ax.w_zaxis.set_major_formatter(zfmt)

ax.fmt_xdata = xfmt
ax.fmt_ydata = yfmt
ax.fmt_zdata = zfmt
plt.show() 
```

![在此处输入图像描述](../Images/369d56fecb9c2a4b6257c3ebd684dbe7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:40:17.203

首先，您可能会更改您的 xaxis 格式化程序，目前当鼠标移动到图表边缘时，它会向解释器抛出很多异常：

你可能会改变这个：

```
 xfmt = ticker.FuncFormatter(lambda x, pos: label_map[int(x)]) 
```

对于这样的事情：

```
def xformatter(x,pos):
   try:
       val = label_map[int(x)]
   except:
       val = "None"
   return val
...
xfmt = ticker.FuncFormatter(xformatter) 
```

接下来发现实际有错误`mpl_toolkits.mplot3d`

如果你看一下第 320 行`\Lib\site-packages\mpl_toolkits\mplot3d\axis3d.py`

你会发现这个错字：

```
class YAxis(Axis):
    def get_data_interval(self):
        'return the Interval instance for this axis data limits'
        return self.axes.xy_dataLim.intervaly

class ZAxis(Axis):
    def get_data_interval(self):
        'return the Interval instance for this axis data limits'
        return self.axes.zz_dataLim.intervalx 
```

注意`self.axes.zz_dataLim.intervalx`应该如何：`self.axes.zz_dataLim.intervalz`

可能，您需要将这些问题报告给开发人员。

# linux - 如果目标文件夹不存在，scp 会创建它吗

> ID：12920947
> 
> 赞同：40
> 
> 时间：2012-10-16T18:17:30.870
> 
> 标签：linux, bash, scp

我想知道如果远程服务器上不存在 scp 是否会创建目标文件夹。例如，这行得通吗？

```
scp -r /data/install/somefolder user@ftpserver.com:/data/install/somefolder 
```

这里的文件夹`/data/install/somefolder`在 ftp 服务器上不存在，那么这个命令会创建它吗？

注意我已经阅读了 rsync 但我还不确定它是如何工作的或如何使用它。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2014-08-06T10:12:16.227

要使用 ssh 和 scp（而不是 rsync）来完成任务：

## 解决方案

让我们分成两个步骤：

### 1.如果丢失创建目录：

```
ssh user@ftpserver.com "mkdir -p /data/install/somefolder" 
```

### 2.复制到它：

```
scp -r /data/install/somefolder user@ftpserver.com:/data/install/somefolder 
```

* * *

## 把它们放在一起

```
server="user@ftpserver.com"
destiny="/data/install/somefolder"
src="/data/install/somefolder"
ssh "$server" "mkdir -p $destiny" && scp -r "$src" "$server:$destiny" 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-16T18:23:39.120

简短的回答：没有。

...但是 rsync 确实如此，这就是我在我的盒子上使用别名`scp`的原因。`rsync -Pravdtze ssh`是的，有很多开关，它们结合起来产生了我喜欢的 rsync 行为。由于 rsync 确实提供了一组非常广泛的开关和选项，我建议您对其进行一些研究，看看什么最适合您的需求。手册页是一个很好的起点，但有很多信息很容易获得。这是一个[不错的示例列表](http://www.thegeekstuff.com/2010/09/rsync-command-examples/)。

**编辑：**实际上，在您发布的特定情况下，将创建该文件夹，因为那是您要复制的文件夹。但是，如果您尝试将其复制到`user@remotehost:somenonexistentfolder/somefolder`，那么它将失败。

# partial - 可以说柯里化是部分应用的使能吗？

> ID：12920948
> 
> 赞同：2
> 
> 时间：2012-10-16T18:17:33.073
> 
> 标签：partial, currying

抱歉，如果这超出了旧领域。我意识到这已经[之前讨论过][柯里化和部分应用之间有什么区别？](https://stackoverflow.com/questions/218025/what-is-the-difference-between-currying-and-partial-application). 我仍然希望对术语进行一些澄清。

是否可以公平地说柯里化*启用*了部分应用，而部分应用在没有被柯里化的函数上是不可能的？是否公平地说，在像 Haskell 这样自动支持部分应用程序的语言中，所有函数都是隐式柯里化的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:44:01.090

柯里化和部分应用都意味着一种语言支持高阶函数 - 即，将函数作为数据传递 - 因为否则它们将无用，并且使用高阶函数，柯里化和部分应用都可以手动实现.

除了上述之外，它们是不同的想法。

你会说有一个`while`循环“启用”`for`或`foreach`循环吗？从某种意义上说，这是对的，但它告诉你没有关于循环的任何有用信息。

*部分应用*的意思正是它所说的；你将一个函数应用到它的一些参数上，生成一个只需要剩余参数的专用版本。这可以在有或没有对函数进行柯里化的情况下完成，也许使用包装函数来处理 like 的参数`apply_foo_to_baz(baz) = ((bar, quux) => foo(bar, baz, quux));`，如果你能原谅伪代码的话。

*柯里*化意味着将接受多个参数的函数转换`foo1(bar, baz, quux);`为一次应用于单个参数的函数，例如`foo2(bar)(baz)(quux);`. 应用`foo2`更少的参数在技术上*不是*部分应用，因为该函数只接受一个参数。知道这`foo2`是 的柯里化版本`foo1`，我们可以将其`foo2(bar)`视为 的部分应用形式`foo1`，但一般来说，柯里化函数没有任何东西可以在给定任何特定数量的参数的情况下使它们“部分应用”。

就 Haskell 而言，以通常方式定义的函数实际上是默认*柯里化的（这是合适的，因为两者都以*[同一个人](http://en.wikipedia.org/wiki/Haskell_Curry)命名）。事实上，在不依赖实现细节的情况下有效地定义 Haskell 中“部分应用程序”的含义实际上有点棘手。

# c# - 线程仅第一次运行

> ID：12920953
> 
> 赞同：0
> 
> 时间：2012-10-16T18:17:38.347
> 
> 标签：c#, c#-4.0

> **可能重复：**
> [新线程中的 WebBrowser 控件](https://stackoverflow.com/questions/4269800/webbrowser-control-in-a-new-thread)

我正在尝试自动单击网页上的某些元素，然后在每次单击时生成一个新的 IE 窗口。

下面的代码读取一个 DataTable，其中一列包含我需要单击的元素 ID。然后循环表格并单击 Webbrowser 中所需的元素`webNav.webBrowser1`。

该代码第一次运行时运行良好，但此后不再有点击事件。如果我逐步使用断点，那么我可以看到代码运行良好，没有问题。看起来好像它正在安排永远不会触发的操作。

这是我第一次尝试使用线程，所以我可能会做一些根本错误的事情。

目前我有点难过问题是什么？

```
[STAThread]
private void ClickOptions()
{
    DataTable _dataTableTestClone = new DataTable();
    _dataTableTestClone = _dataTableTest;

    if (_dataTableTest != null)
    {
        var thread = new Thread(() =>
        {
            foreach (DataRow row in _dataTableTestClone.Rows)
            {
                string getclickID = row["ID"].ToString();

                webNav.webBrowser1.Invoke(new Action(() =>
                {
                    HtmlElement lit = webNav.webBrowser1.Document.GetElementById(getclickID);
                    if (lit != null)
                    {
                        lit.InvokeMember("click");
                    }
                }));

                Thread.Sleep(2000);
            }
        });
        thread.SetApartmentState(ApartmentState.STA);
        thread.IsBackground = true;
        thread.Start();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:53:31.390

为什么将线程单元状态设置为 STA？我不认为它有任何目的。只有用于创建控件或与某些 COM 对象交互的线程需要是 STA（这不是您从那里开始的线程，因为 webBrowser1 上的 Invoke() 调用会将您的操作编组到 UI 线程）。

您可以尝试使用 try/catch 将代码包装在 Invoke 内部，并在 catch 块内部添加断点以查看是否弹出任何异常，因为多线程场景中的异常有时会根据具体情况表现得有些滑稽您的应用程序的其余部分已设置。我敢打赌你会得到一个被某个地方吞下的异常。

编辑：如果您的线程的唯一目的是在调用的操作之间有 2 秒的延迟，我会使用 System.Windows.Forms.Timer 代替：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)

# c++ - 什么决定了我的可执行文件的大小？

> ID：12920955
> 
> 赞同：1
> 
> 时间：2012-10-16T18:17:41.740
> 
> 标签：c++, memory-management

什么决定了我的可执行 C++ 程序文件的大小？显然，它不仅仅取决于变量的大小/数量。如何在保持变量数量不变的情况下减小大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:22:27.660

有很多因素。

*   编译器优化
*   静态/动态链接
*   静态分配内存
*   调试信息
*   剥离/非剥离二进制文件

`gcc`您可以使用它来`-Os`优化结果的大小，但这可能会对性能产生影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:23:03.993

1.  动态链接到 C++ 运行时。
2.  在没有调试信息的情况下编译可执行文件。
3.  使用“优化大小”标志进行编译。
4.  如果可以，请删除 #iostream 和 fstream，并改用低级别
5.  此外，使用大量模板也会导致大小增加
6.  使用大量内联函数会导致大小增加。
7.  如果你有很多静态和全局变量，那么尽可能减少它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T18:24:33.933

除了其他答案之外，要记住的另一件事是内联。过多的函数内联会显着增加可执行文件的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T18:26:04.807

通常，可执行文件的大小并不会很大程度上取决于您拥有多少变量常量。根据您所谈论的不同操作系统，这些是可能影响您的可执行文件大小的一些方面：

1.  静态链接到可执行文件的资源和库。
2.  您选择生成二进制文件的编译器选项。
3.  可能尚未从可执行文件中删除的符号文件和其他调试工具。

这个答案似乎很相关:) [减小可执行文件大小的过程](https://stackoverflow.com/questions/200292/process-for-reducing-the-size-of-a-executable)

# ruby - Ruby error (Socket)

> ID：12920956
> 
> 赞同：0
> 
> 时间：2012-10-16T18:17:54.640
> 
> 标签：ruby, ruby-on-rails-3, rubygems, shopify

I am trying to install a ruby gem called shopify_theme which lets you locally push edits to the main folder of a shopify server using their api key.

Whilst trying to download the theme to my hardrive via command line I got this error:

```
/Users/mdunbavan/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: nodename nor servname provided, or not known (SocketError)
from /Users/mdunbavan/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:762:in `open'
from /Users/mdunbavan/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:762:in `block in connect'
from /Users/mdunbavan/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
from /Users/mdunbavan/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
from /Users/mdunbavan/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:762:in `connect'
from /Users/mdunbavan/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
from /Users/mdunbavan/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:744:in `start'
from /Users/mdunbavan/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/net/http.rb:1284:in `request'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/gems/httparty-0.9.0/lib/httparty/request.rb:81:in `perform'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/gems/httparty-0.9.0/lib/httparty.rb:438:in `perform_request'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/gems/httparty-0.9.0/lib/httparty.rb:385:in `get'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/gems/shopify_theme-0.0.7/lib/shopify_theme.rb:10:in `asset_list'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/gems/shopify_theme-0.0.7/lib/shopify_theme/cli.rb:30:in `download'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/task.rb:27:in `run'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor.rb:275:in `dispatch'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/gems/thor-0.16.0/lib/thor/base.rb:425:in `start'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/gems/shopify_theme-0.0.7/bin/theme:24:in `<top (required)>'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/bin/theme:19:in `load'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/bin/theme:19:in `<main>'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/bin/ruby_noexec_wrapper:14:in `eval'
from /Users/mdunbavan/.rvm/gems/ruby-1.9.3-p286/bin/ruby_noexec_wrapper:14:in `<main>' 
```

Are there any ruby experts out there that would happen to know what this error is and how I could go about it in a different manner?

Cheers, Mark

# java - Android: Check a method from another class multiple times during runtime

> ID：12920961
> 
> 赞同：2
> 
> 时间：2012-10-16T18:18:13.683
> 
> 标签：java, android, android-activity, libgdx

Basically what I am trying to achieve is this; I have an android Activity that executes a game class (built on the libgdx framework) and I need to run a check to see if the game is over by calling a method from within the game class.

Is it possible to run this check multiple times (until the game is over) so that the android Activity can then move on to a different activity when the game is over?

I hope I made myself clear enough, Thanks for the help :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:31:28.830

使用 BroadcastReceiver 和 LocalBroadcastManager。创建并注册一个 BroadcastReceiver 来捕捉和处理游戏结束。然后，当游戏结束时

```
LocalBroadcastManager.getInstance(context).sendBroadcast(gameOverIntentFilter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:36:10.733

为什么不将委托模式与接口一起使用。

```
class Game {   
     private OnGameOverListener mListener;
     public void setOnGameOverListener(OnGameOverListener listener) {
          mListener = listener;
     }

    public interface OnGameOverListener{
         public void onGameOver()
    }

    someFunction(..) { 
        listener.onGameOver();// call when game is over
    }

} 
```

然后在 Activity 中实现 OnGameOverListener 并在覆盖的 onGameOver 方法中调用 finish()

# php - 如何将数据库列值加一？

> ID：12920962
> 
> 赞同：1
> 
> 时间：2012-10-16T18:18:15.287
> 
> 标签：php, codeigniter

所以基本上我有一个数据库，每次更新时我都需要将它的 countValue 增加 1。

我将如何使用 codeIgniter 来做到这一点？

这是一些代码 -

```
 $data = array(
                "up" => date('Y-m-d H:i:s'),
                "viewCount" => viewCount+1
            );              
            $this->db->where('url', $url);
            $this->db->update('table', $data); 
```

我该怎么做？我知道我必须将 viewCount+1 更改为其他内容才能正常工作。希望我能很好地解释这个问题。使用默认 SQL 查询，我可以只使用`SET count = count + 1`，但在这里它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:21:49.103

根据[此线程](http://codeigniter.com/forums/viewthread/62630/)，您可以执行以下操作：

```
$this->db->set('ViewCount','ViewCount + 1',false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T18:24:46.330

尝试如下使用 set 功能

```
 $this->db->where('url', $url);
   $this->db->set('viewCount', 'viewCount+1', FALSE);
   $this->db->set('up', date('Y-m-d H:i:s'));
   $this->db->update('table'); 
```

# windows - 简单的 bat 文件记录到文本但错误

> ID：12920965
> 
> 赞同：1
> 
> 时间：2012-10-16T18:18:38.730
> 
> 标签：windows, command-line, batch-file

我创建了 2 个简单的 bat 文件，但我不断收到相同的错误。我想将 bat 文件中的内容记录到文本文档中。错误是：`The process cannot access the file because it is being used by another process.` 是因为我被称为本身的bat文件吗？

**代码 1**

```
@echo off

:BEGIN
net stop redmineMongrel1
TIMEOUT /T 15
net start redmineMongrel1
goto SUCCESS

:SUCCESS
"C:\Documents and Settings\Administrator\My Documents\MongrelRestartScript.bat" > "C:\Documents and Settings\Administrator\My Documents\MongrelRestart.log"
ECHO Mongrel Restart Successful  %DATE%>> "C:\Documents and Settings\Administrator\My Documents\MongrelRestart.log"
goto END

:FAIL
ECHO.>"C:\Documents and Settings\Administrator\My Documents\MongrelRestart.log"
ECHO Mongrel Restart FAILED %DATE%>> "C:\Documents and Settings\Administrator\My Documents\MongrelRestart.log"

:END
echo END OF BAT FILE 
```

**代码 2**

```
@echo off

:BEGIN
DEL "D:\BACKUPS\RedmineFolder" /s /q 
RD "D:\BACKUPS\RedmineFolder" /s /q

xcopy C:\BitNami\apps\redmine "D:\BACKUPS\RedmineFolder" /e /h /r /y /I
goto SUCCESS

:SUCCESS
ECHO.>"C:\Documents and Settings\Administrator\My Documents\RedmineBackupLog.log"
ECHO Redmine Backup Successful  %DATE%>> "C:\Documents and Settings\Administrator\My Documents\RedmineBackupLog.log"
"C:\Documents and Settings\Administrator\My Documents\RedmineBackUpScript.bat" >> "C:\Documents and Settings\Administrator\My Documents\RedmineBackupLog.log"
goto END

:FAIL
ECHO.>"C:\Documents and Settings\Administrator\My Documents\RedmineBackupLog.log"
ECHO Redmine Backup  FAILED %DATE%>> "C:\Documents and Settings\Administrator\My Documents\RedmineBackupLog.log"

:END
echo END OF BAT FILE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:27:08.050

这个问题不是因为你从内部调用 bat 文件。在 dos 中这样做是完全可以接受的。

如果您尝试转储 bat 文件的内容，请使用 'type' ：

```
type filename > logfile 
```

您的 .log 文件很可能已被另一个进程打开。您可以使用 windows 的 filemon 来查看哪些进程可能正在访问该文件：[filemon](http://technet.microsoft.com/en-us/sysinternals/bb896642.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:19:17.813

我相信是这样的。我添加了另一个 bat 文件来调用这个文件，如下所示：

**MAIN.bat**

`"C:\Documents and Settings\Administrator\My Documents\DoThis.bat" > "C:\Documents and Settings\Administrator\My Documents\LogEverything.log" 2>&1`

2>&1 正在记录每个文本（来自 bat 文件和命令行），这非常有用。

# wpf - RichTextBox foregound colors and Runs

> ID：12920967
> 
> 赞同：1
> 
> 时间：2012-10-16T18:18:45.580
> 
> 标签：wpf, data-binding, richtextbox

I have a TextBox control:

```
<TextBox Text={Binding MyText},.../> 
```

where

```
MyText = "leftWord/rightWord"; 
```

I understand that to get multiple foreground colors I cannot use a TextBox but rather a TextBlock or RichTextBox. Since I need to edit the text, I will use a RichTextBox.

My goal is to highlight (change the foreground color) either "leftWord" or "rightWord" in the displayed text depending on the value of another property, such as

```
MyChoice = Left|Right 
```

I am not sure how I can set the Run content to the right characters based on the MyChoice property. Is there a way I can pass the entire text to a converter, along with the value of MyChoice and somehow have that set the correct foreground colors? If so, I am not sure what the xaml would look like.

Would this be possible with a RichTextBox? I notice it has no Text property so I am not even sure how to bind (two-way binding) MyText to it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:56:15.237

您可以使用 .substring(#,#); 创建 2 个变量；然后根据条件影响这些变量的前景色

# jquery - Isotope elements only refresh on page refresh

> ID：12920972
> 
> 赞同：2
> 
> 时间：2012-10-16T18:19:06.900
> 
> 标签：jquery, responsive-design, jquery-isotope

I am trying out the isotope jquery to rearrange a portfolio.

I want the website to be responsive so I have set the elements in the container to be 22% wide.

However all looks fine when I load the page for the first time. Or refresh it. But if I resize the page, the elements width changes fine but they have a large gap between them.

The same thing happens when testing it on the ipad roasting between portrait and landscape.

Why don't they automatically move into their new position until the page is refreshed? Here is an example. The section I am talking about is the 'featured' boxes.

[Http://www.comeinside.co.uk](http://www.comeinside.co.uk)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:42:22.707

从来没有使用过这个插件，但是在谷歌搜索之后，看起来他的演示做了你想要的：http: [//isotope.metafizzy.co/demos/fluid-responsive.html](http://isotope.metafizzy.co/demos/fluid-responsive.html)

```
// update columnWidth on window resize
$(window).smartresize(function(){
  $container.isotope({
    // update columnWidth to a percentage of container width
    masonry: { columnWidth: $container.width() / 5 }
  });
}); 
```

# django - 混合 django-celery 和独立 celery

> ID：12920974
> 
> 赞同：2
> 
> 时间：2012-10-16T18:19:11.577
> 
> 标签：django, celery

我们正在运行一个用 Django 和 Piston 构建的网站，我想实现 celery 将任务卸载到外部服务器。我真的不想在辅助服务器上运行 Django，而只想运行一个纯 Python celery worker。我是否可以在 Django 服务器上编写简单的函数存根并在辅助服务器上编写实际的函数逻辑？

IE

姜戈侧

```
from celery import task

@task
send_message(fromUser=None, toUser=None, msgType=None, msg=None):
    pass 
```

服务器端

```
from celery import Celery
celery =  Celery('hello', broker='amqp://guest@localhost//')
@celery.task
send_message(fromUser=None, toUser=None, msgType=None, msg=None):
    # Do send_message logic here 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T11:22:46.813

这很容易实现。

如果你有一个纯 python Celery worker，你可以通过名称发送任务，只要你使用相同的代理 URL：

```
from celery import Celery
celery = Celery(broker='amqp://guest@localhost//') 
```

然后在某些方面：

```
 celery.send_task('send_message', kwargs={
     'fromUser': ...,
 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-22T20:23:27.013

您还可以使用 CELERYBEAT_SCHEDULE 在配置中安排任务：

```
CELERYBEAT_SCHEDULE = {
        'scheduled_task':{
            'task':'name in your task decorator',
            'schedule': timedelta(...),
            'args': (..., ),
        }
    } 
```

但是您的工作人员必须使用 celery beat ( `-B`) 运行：

```
celery -A app.tasks worker -B -l info 
```

# c - linux中的ls命令使用哪个linux系统调用来显示文件夹/文件名？

> ID：12920976
> 
> 赞同：23
> 
> 时间：2012-10-16T18:19:28.800
> 
> 标签：c, linux, kernel, system-calls, ls

我想知道 ls 命令在 linux 中使用哪个系统调用来显示文件夹（或文件名）？特别是以“。”开头的文件/文件夹。（点）

我执行了`strace ls -a`命令来查看系统`fstat`调用。对于所有其他属性（inode to permisisons）发生了很多调用。哪一个真正给出了它的名字？

```
execve("/bin/ls", ["ls", "-a"], [/* 37 vars */]) = 0
brk(0)                                  = 0x1762000
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14025000
access("/etc/ld.so.preload", R_OK)      = -1 ENOENT (No such file or directory)
open("/etc/ld.so.cache", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=109464, ...}) = 0
mmap(NULL, 109464, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f1c1400a000
close(3)                                = 0
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/x86_64-linux-gnu/libselinux.so.1", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\20T\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=121936, ...}) = 0
mmap(NULL, 2221680, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c13be6000
mprotect(0x7f1c13c03000, 2093056, PROT_NONE) = 0
mmap(0x7f1c13e02000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1c000) = 0x7f1c13e02000
mmap(0x7f1c13e04000, 1648, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f1c13e04000
close(3)                                = 0
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/x86_64-linux-gnu/librt.so.1", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\340!\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=31752, ...}) = 0
mmap(NULL, 2128984, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c139de000
mprotect(0x7f1c139e5000, 2093056, PROT_NONE) = 0
mmap(0x7f1c13be4000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x6000) = 0x7f1c13be4000
close(3)                                = 0
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/x86_64-linux-gnu/libacl.so.1", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0P\33\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=31096, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14009000
mmap(NULL, 2126312, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c137d6000
mprotect(0x7f1c137dd000, 2093056, PROT_NONE) = 0
mmap(0x7f1c139dc000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x6000) = 0x7f1c139dc000
close(3)                                = 0
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/x86_64-linux-gnu/libc.so.6", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\200\30\2\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=1811128, ...}) = 0
mmap(NULL, 3925208, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c13417000
mprotect(0x7f1c135cc000, 2093056, PROT_NONE) = 0
mmap(0x7f1c137cb000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1b4000) = 0x7f1c137cb000
mmap(0x7f1c137d1000, 17624, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f1c137d1000
close(3)                                = 0
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/x86_64-linux-gnu/libdl.so.2", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\340\r\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=14768, ...}) = 0
mmap(NULL, 2109704, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c13213000
mprotect(0x7f1c13215000, 2097152, PROT_NONE) = 0
mmap(0x7f1c13415000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x2000) = 0x7f1c13415000
close(3)                                = 0
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/x86_64-linux-gnu/libpthread.so.0", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\200l\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0755, st_size=135366, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14008000
mmap(NULL, 2212904, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c12ff6000
mprotect(0x7f1c1300e000, 2093056, PROT_NONE) = 0
mmap(0x7f1c1320d000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x17000) = 0x7f1c1320d000
mmap(0x7f1c1320f000, 13352, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f1c1320f000
close(3)                                = 0
access("/etc/ld.so.nohwcap", F_OK)      = -1 ENOENT (No such file or directory)
open("/lib/x86_64-linux-gnu/libattr.so.1", O_RDONLY|O_CLOEXEC) = 3
read(3, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\340\17\0\0\0\0\0\0"..., 832) = 832
fstat(3, {st_mode=S_IFREG|0644, st_size=18552, ...}) = 0
mmap(NULL, 2113736, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f1c12df1000
mprotect(0x7f1c12df5000, 2093056, PROT_NONE) = 0
mmap(0x7f1c12ff4000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x3000) = 0x7f1c12ff4000
close(3)                                = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14007000
mmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14005000
arch_prctl(ARCH_SET_FS, 0x7f1c140057c0) = 0
mprotect(0x7f1c137cb000, 16384, PROT_READ) = 0
mprotect(0x7f1c12ff4000, 4096, PROT_READ) = 0
mprotect(0x7f1c1320d000, 4096, PROT_READ) = 0
mprotect(0x7f1c13415000, 4096, PROT_READ) = 0
mprotect(0x7f1c139dc000, 4096, PROT_READ) = 0
mprotect(0x7f1c13be4000, 4096, PROT_READ) = 0
mprotect(0x7f1c13e02000, 4096, PROT_READ) = 0
mprotect(0x618000, 4096, PROT_READ)     = 0
mprotect(0x7f1c14027000, 4096, PROT_READ) = 0
munmap(0x7f1c1400a000, 109464)          = 0
set_tid_address(0x7f1c14005a90)         = 4490
set_robust_list(0x7f1c14005aa0, 0x18)   = 0
futex(0x7fff2e09d99c, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 1, NULL, 7f1c140057c0) = -1 EAGAIN (Resource temporarily unavailable)
rt_sigaction(SIGRTMIN, {0x7f1c12ffc750, [], SA_RESTORER|SA_SIGINFO, 0x7f1c13005cb0}, NULL, 8) = 0
rt_sigaction(SIGRT_1, {0x7f1c12ffc7e0, [], SA_RESTORER|SA_RESTART|SA_SIGINFO, 0x7f1c13005cb0}, NULL, 8) = 0
rt_sigprocmask(SIG_UNBLOCK, [RTMIN RT_1], NULL, 8) = 0
getrlimit(RLIMIT_STACK, {rlim_cur=8192*1024, rlim_max=RLIM_INFINITY}) = 0
statfs("/selinux", {f_type="EXT2_SUPER_MAGIC", f_bsize=4096, f_blocks=238304997, f_bfree=232078639, f_bavail=219973436, f_files=60530688, f_ffree=60120220, f_fsid={-1173666966, -474985328}, f_namelen=255, f_frsize=4096}) = 0
brk(0)                                  = 0x1762000
brk(0x1783000)                          = 0x1783000
open("/proc/filesystems", O_RDONLY)     = 3
fstat(3, {st_mode=S_IFREG|0444, st_size=0, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14024000
read(3, "nodev\tsysfs\nnodev\trootfs\nnodev\tb"..., 1024) = 328
read(3, "", 1024)                       = 0
close(3)                                = 0
munmap(0x7f1c14024000, 4096)            = 0
open("/usr/lib/locale/locale-archive", O_RDONLY|O_CLOEXEC) = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=7220736, ...}) = 0
mmap(NULL, 7220736, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f1c1270e000
close(3)                                = 0
ioctl(1, SNDCTL_TMR_TIMEBASE or TCGETS, {B38400 opost isig icanon echo ...}) = 0
ioctl(1, TIOCGWINSZ, {ws_row=41, ws_col=144, ws_xpixel=0, ws_ypixel=0}) = 0
openat(AT_FDCWD, ".", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 3
getdents(3, /* 2 entries */, 32768)     = 48
getdents(3, /* 0 entries */, 32768)     = 0
close(3)                                = 0
fstat(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 0), ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f1c14024000
write(1, ".  ..\n", 6\.  ..
)                  = 6
close(1)                                = 0
munmap(0x7f1c14024000, 4096)            = 0
close(2)                                = 0
exit_group(0)                           = ? 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-16T18:29:14.520

大多数系统调用在启动时加载共享库都会产生噪音。有趣的事情发生在这里：

```
openat(AT_FDCWD, ".", O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 3
getdents(3, /* 2 entries */, 32768)     = 48
getdents(3, /* 0 entries */, 32768)     = 0
close(3) 
```

系统[`openat(2)`](http://linux.die.net/man/2/openat)调用用于打开`"."`相对于当前工作目录（`AT_FDCWD`标志）的当前目录（）。该`O_DIRECTORY`标志表示它想要打开目录并读取目录的内容。

使用[`getdents(2)`](http://linux.die.net/man/2/getdents)系统调用读取实际的目录数据。在这种情况下，它调用了它两次，因为在它返回 0 之前，它不确定是否还有更多数据。最后，文件描述符在完成后关闭。

但是，如果您要编写自己的程序，则不会直接调用它们——而是使用[`opendir(3)`](http://linux.die.net/man/3/opendir)、[`readdir(3)`](http://linux.die.net/man/3/readdir)和[`closedir(3)`](http://linux.die.net/man/3/closedir)来读取目录。它们是可移植的（符合 POSIX 标准），它们使您与底层系统调用的细节隔离开来。IMO，它们也更易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:23:15.620

[stat(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/stat.2.html)系统调用查询某个文件（可能是目录）的状态；如果您有文件描述符（在`open(2)`系统调用之后），您可以使用[fstat(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fstat.2.html)

要读取目录，最好使用`readdir(3)`调用[getdents(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/gettdents.2.html)系统调用的函数。

# ios - ios应用程序在解析xml时崩溃

> ID：12920982
> 
> 赞同：0
> 
> 时间：2012-10-16T18:19:50.777
> 
> 标签：ios, iphone, xml

嗨，我有一点问题。我做了一个从 xml 读取并显示图像的应用程序。该应用程序在模拟器上运行良好，但有时该应用程序确实在 iphone 4 上崩溃。它可能是什么？我的治疗有问题还是其他地方有问题？代码如下。谢谢你

```
-(void)waiting{
    // replace right bar button 'refresh' with spinner

    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    spinner.center = CGPointMake(self.view.bounds.size.width/2, (self.view.bounds.size.height/2)-50);
    spinner.hidesWhenStopped = YES;
    self.view.backgroundColor = [UIColor whiteColor];
    [self.view addSubview:spinner];
    [spinner startAnimating];
    // how we stop refresh from freezing the main UI thread
    dispatch_queue_t downloadQueue = dispatch_queue_create("downloader", NULL);
    dispatch_async(downloadQueue, ^{

        // do our long running process here
        [NSThread sleepForTimeInterval:0.2];

        // do any UI stuff on the main UI thread
        dispatch_async(dispatch_get_main_queue(), ^{
            [self start];

            [self picture];
            [NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(animate) userInfo:nil repeats:YES];

            [spinner stopAnimating];

        });

    });

    dispatch_release(downloadQueue);

}

-(void)start{
    xmlElementObjects = [[NSMutableArray alloc] init];

    parser = [[NSXMLParser alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://www.i-store.si/Storage/Images/app/galerija.xml"]];
    [parser setDelegate:self];
    [parser parse];

}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if(![elementName compare:@"PictureInfo"])
    {
        array = [[NSMutableArray alloc] init];

    }

    else if(![elementName compare:@"imageURL"])
    {
        currentAttribute = [NSMutableString string];
    }

    else if(![elementName compare:@"imageTitle"])
    {
        currentAttribute = [NSMutableString string];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

    if(![elementName compare:@"PictureInfo"])
    {
    }

    else if(![elementName compare:@"imageURL"])
    {

        [array addObject:currentAttribute];
        pictures=pictures+1;
        currentAttribute = nil;

    }

    else if(![elementName compare:@"imageTitle"])
    {

    }

    else if(![elementName compare:@"Pictures"])
    {

    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if(self.currentAttribute)
    {
        [self.currentAttribute appendString:string];
    }
} 
```

更新：我尝试了 Bugsense，这就是我得到的：

```
CLASS:
SIGNAL

FILE:
_mh_execute_header +

0libobjc.A.dylib 0x31946fbc objc_msgSend + 15
1Foundation 0x31da161d __NSFireTimer + 144
2CoreFoundation 0x37e3aa63 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 14
3CoreFoundation 0x37e3a6c9 __CFRunLoopDoTimer + 364
4CoreFoundation 0x37e3929f __CFRunLoopRun + 1206
5CoreFoundation 0x37dbc4dd CFRunLoopRunSpecific + 300
6CoreFoundation 0x37dbc3a5 CFRunLoopRunInMode + 104
7GraphicsServices 0x3793afcd GSEventRunModal + 156
8UIKit 0x3524c743 UIApplicationMain + 1090
9My_app 0x0000273b _mh_execute_header + 5947 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:49:27.233

您不能使用 GCD 在主线程上安排 NSTimer。

采用：

```
[NSTimer timerWithTimeInterval:target:selector:userInfo:repeats:] 
```

..创建计时器并：

```
[[NSRunLoop mainRunLoop] addTimer:forMode:] 
```

..将它添加到主runLoop。

对于替代方案，请查看以下问题的答案：[Run repeating NSTimer with GCD?](https://stackoverflow.com/questions/10522928)

# python - ImportError: No module named cvtypes

> ID：12920983
> 
> 赞同：1
> 
> 时间：2012-10-16T18:19:56.833
> 
> 标签：python, python-2.7

can someone help me to say that I get this error?

```
Traceback (most recent call last):
  File "/home/xpfotografia/Documentos/deteccion4.py", line 3, in <module>
    from cvtypes import cv
ImportError: No module named cvtypes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:24:28.693

[http://www.cs.unc.edu/~gb/blog/2007/02/04/python-opencv-wrapper-using-ctypes/](http://www.cs.unc.edu/~gb/blog/2007/02/04/python-opencv-wrapper-using-ctypes/)上的文档有：

```
from CVtypes import cv
win = 'Show Cam'
cv.NamedWindow(win)
# rest snipped.... 
```

作为一个例子......所以我想你需要改变你的导入以包括一个大写的**简历**，如上所述

# single-sign-on - ADFS 2.0、SSO 和 SAML 2.0

> ID：12920990
> 
> 赞同：3
> 
> 时间：2012-10-16T18:20:18.433
> 
> 标签：single-sign-on, adfs2.0, saml-2.0

这是太多信息=太多混乱的经典例子。我有一个 ASP.NET Web 应用程序，它使用通常的 POST 表单身份验证并希望实现 SSO。由于我们是 Microsoft 商店，我们将使用 ADFS 2.0。为了实施 SSO，我知道我还需要 WIF 来处理 SAML 请求？是否将 WIF 安装在与 ADFS 相同的服务器下？

我仍然想重定向失败的 SSO 请求或非 SSO 请求以使用表单，我该如何处理？

有人可以描述一下流程吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-08T14:34:38.730

ADFS 支持两种协议进行身份验证。1) WS-Federation 协议 2) Web SSO SAML 协议

****在 Ws-Federation 场景中**** 用于您的应用程序和 ADFS 之间的 SSO（建立信任关系）。

```
1)  Install ADFS & WIF on one server , Create some users in AD. 

2) Generate Federation Metadata.xml file in ADFS, save it one place for
future need. 

3)  Use Windows Azure Access Control Service(ACS) for
simplicity. (It will do all heavy lifting of your  authentication
process of token coming from ADFS) 

4)  Generate Federation
Metadata.xml file in ACS and Import in your ADFS server as relying
party. (give some claims as well) 
```

[http://blogs.msdn.com/b/card/archive/2010/06/25/using-federation-metadata-to-establish-a-relying-party-trust-in-ad-fs-2-0 .aspx?重定向=真][1]

```
5)  Import federation metadata.xml
file from ADFS server to ACS and Add it as Identity provider. (add
claim processing rule) 

6)  Now in your web Application use WIF
FedUtil Tool and import ACS federation metadata.xml file. 
```

就是这样..你很高兴去..

对于 Web SSO SAML 协议，您必须手动进行编码工作。

用例：

1.  用户将点击您的应用程序。

2.  用户未通过身份验证，因此他将转到 ACS，ACS 会将其重定向到 ADFS 登录页面。

3.  用户输入凭据。ADFS 向 ACS 发出令牌并带有一些声明。ACS 将转换传入的 ADFS 声明并将其提供给您的应用程序。

4.  您的应用程序现在已通过身份验证，因此您可以使用声明并进行授权。

**您可以使用 URL 方案来检查此请求应转到您的表单身份验证或 ADFS 身份验证的位置。** 例如。：[http](http://somedomain.com/forms) ://somedomain.com/forms或[http://somedomain.com/ADFS](http://somedomain.com/ADFS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:46:28.043

所以你正在使用 SAML 到一些第 3 方 STS？

WIF（开箱即用）不支持 SAML。

有一个 WIF SAML 扩展，但这只是 CTP（社区技术预览）。

WIF 与您的 ASP.NET 应用程序集成。对于 .NET 4 及更低版本，有单独的下载。对于 .NET 4.5，它是集成的。

WIF 只是应用程序中的一组 .NET 类。

您可以使用名为 FedUtil 的工具将 WIF 与您的 ASP.NET 应用程序集成，该工具是 WIF SDK 下载的一部分。（由 VS 中的“添加 STS”调用）。

ADFS 安装会在服务器上安装 WIF，但这与您的应用程序是分开的。

流程是：

.NET 应用程序 --> (WIF) --> (WS-Federation) --> ADFS --> (SAML) --> STS

# api - Unable to test Open Graph

> ID：12920991
> 
> 赞同：1
> 
> 时间：2012-10-16T18:20:26.017
> 
> 标签：api, facebook-opengraph

I'm trying to create my own actions/objects. When checking with the debugger everything is fine, but when testing with my dev account I get this in my callback:

```
{"data":[]} 
```

Is it good or not because I see anything in my timeline, news feed or ticker.

When testing with a test user I get this error:

```
{
"error": {
    "message": "Call to a member function on a non-object",
    "type":"BadMethodCallException"
    }
} 
```

What's wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:04:52.377

您应该向`POST`facebook api 发出如下请求，并确保您已初始化 FB：

```
var opts = {
                animal : OBJECT_URL,
                access_token: token
            };

            FB.api('/me/[MY_APP_NAMESPACE]:hunt', 'post', opts, function(response)
            {

            }); 
```

# python - Introductory Python task from the edX MIT class

> ID：12920992
> 
> 赞同：1
> 
> 时间：2012-10-16T18:20:33.000
> 
> 标签：python

I have recently started learning Python in the MIT class on edX.

However, I have been having some trouble with certain exercises. Here is one of them:

"Write a procedure called oddTuples, which takes a tuple as input, and returns a new tuple as output, where every other element of the input tuple is copied, starting with the first one. So if test is the tuple ('I', 'am', 'a', 'test', 'tuple'), then evaluating oddTuples on this input would return the tuple ('I', 'a', 'tuple'). "

The correct code, according to the lecture, is the following:

```
def oddTuples(aTup):
   '''
   aTup: a tuple

   returns: tuple, every other element of aTup.
   '''
    # a placeholder to gather our response
    rTup = ()
    index = 0

    # Idea: Iterate over the elements in aTup, counting by 2
    #  (every other element) and adding that element to
    #  the result
    while index < len(aTup):
        rTup += (aTup[index],)
        index += 2

    return rTup 
```

However, I have tried to solve it myself in a different way with the following code:

```
def oddTuples(aTup):
    '''
   aTup: a tuple

   returns: tuple, every other element of aTup.
   '''
    # Your Code Here
    bTup=()
    i=0
    for i in (0,len(aTup)-1):
        if i%2==0:
            bTup=bTup+(aTup[i],)
            print(bTup)
        print(i)
        i+=1
    return bTup 
```

However, my solution does not work and I am unable to understand why (I think it should do essentially the same thing as the code the tutors provide).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:27:24.317

我只想补充一点，这个问题的 pythonic 解决方案使用具有步宽的切片，并且是：

```
newTuple = oldTuple[::2] 
```

`oldTuple[::2]`含义：从 start（省略值）到 end（省略）获取 oldtuple 的副本，spepwidth 为 2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:24:07.217

我想我在这里得到了问题。

在您的 for 循环中，您为 指定两个固定值`i`：

```
0
len(aTup)-1 
```

您真正想要的是从`0`到的值范围`len(aTup)-1`：

```
0
1
2
...
len(aTup)-1 
```

为了将开始值和结束值转换为范围内的所有值，您需要使用 Python 的`range`方法：

```
for i in range(0,len(aTup)-1): 
```

（实际上，如果您查看[range 的文档](http://docs.python.org/library/functions.html#range)，您会发现有第三个参数称为`skip`。如果您使用它，您的函数就会变得无关紧要:)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T18:24:03.063

您的代码应为：

```
for i in range(0,len(aTup)):
# i=0, 1, 2 ..., len(aTup)-1. 
```

而不是

```
for i in (0,len(aTup)-1):
# i=0 or i=len(aTup)-1. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T18:25:30.110

线条`for i in (0,len(aTup)-1):`并`i+=1`没有完全按照您的意愿行事。与其他答案一样，您可能想要`for i in range(0,len(aTup)-1):`(insert `range`)，但您也想要 remove `i+=1`，因为`for`-`in`构造`i`依次为迭代中的每个项目设置值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-20T08:03:23.123

好的，运行代码时，输​​出如下：

```
('I', 'tuple') 
```

这是因为您编写的代码中的问题是您实现 for 循环的方式。而不是使用：

```
for i in (0,len(aTup)-1): 
```

您应该将其更改为以下内容，您的代码将起作用：

```
for i in range(len(aTup)): 
```

range 函数基本上创建了一个整数列表，范围从 0 到元组的长度 - 1。

因此，您的代码在编辑后应如下所示：

```
def oddTuples(aTup):
    bTup=()
    for i in range(len(aTup)):
        if i%2==0:
            bTup=bTup+(aTup[i],)
    return bTup 
```

# singleton - 如何用单例创建一个通用的 GKSession？

> ID：12920996
> 
> 赞同：0
> 
> 时间：2012-10-16T18:20:53.350
> 
> 标签：singleton, gksession

这里有点困惑......我有一个具有多个视图的应用程序，每个视图都需要共享一个通用的 GKSession。我想用单例模式来实现它。

我的困惑：单例类应该是 GKSession 的子类，还是应该是单例类是一个 GKSessionDelegate 的 NSObject？我倾向于相信正确的模式是将类作为委托来实现。

谢谢...

# matlab - Pi，Matlab 符号数学工具箱有bug？

> ID：12920998
> 
> 赞同：4
> 
> 时间：2012-10-16T18:20:58.220
> 
> 标签：matlab, symbolic-math

你好我有一个问题。当我在 matlab 中计算除法时：x/(pi.^2)

```
syms x
x/(pi.^2)
ans =
(281474976710656*v)/2778046668940015 
```

正确答案是 x/9.8696，那么为什么 matlab 会给我这个结果呢？

它是一个错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T19:40:33.647

您必须使用 vpa() 命令“可变精度算术”。检查此代码：

```
syms x real;       % define x as a real symbolic variable (not a complex variable)
vpa( x/(pi.^2), 5) % second argument define number of significant digits 
```

对于涉及 pi 的三角表达式，有时最好定义 sym('pi')：

```
syms x real;
pi_s = sym('pi');
expr = x/pi_s^2 
```

我尝试在使用符号工具箱时始终使用“真实”标签。如果你不使用它，你会看到很多复杂的共轭和其他对你的问题不重要的东西，因为 x 可能是实变量。

希望这可以帮助，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T18:31:42.057

不，这不是错误：

```
2778046668940015/281474976710656 = 9.8696 
```