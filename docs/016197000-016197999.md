# StackOverflow 问答 16197000-16197999

# internet-explorer - iframeElm.contentWindow.document.selection 不适用于 in IE if set focus on other input after making selection in the iframe

> ID：16197000
> 
> 赞同：1
> 
> 时间：2013-04-24T16:10:03.393
> 
> 标签：internet-explorer, iframe, selection

This is similar but different question about how to set html in the selection of the iframe's editable content.

One sample found is: [http://jsfiddle.net/HMRMv/1/](http://jsfiddle.net/HMRMv/1/), but it can also be used to show the problem.

On IE, in the sample if you select the text in iframe and then do the click, it will work. But after select the text in the iframe's editable content and than clicking on other pane, you will see the highlight disappear and the 'click' on the button will do nothing. Look like the:

```
var range = document.getElementById("iframe").contentWindow.document.selection.createRange(); 
```

Cannot get the previous selected range.

I tried cache the range in blur and reuse it at the 'click', but it does not work. Is it to do with iframe, any suggestion on this case?

```
var selectedType, selectedRange;

function onBlur(e) {
    var selection = iframeElm.contentWindow.document.selection;
    var range = selection.createRange();

    selectedType= selection.type;
    selectedRange = range;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:54:36.953

该`blur`事件来不及缓存选择范围，因为到那时选择已经被销毁。改为在 iframe 元素上使用 IE-only[`beforedeactivate`](http://msdn.microsoft.com/en-gb/library/ie/ms536903%28v=vs.85%29.aspx)事件。

演示：http: [//jsfiddle.net/HMRMv/34/](http://jsfiddle.net/HMRMv/34/)

# xml - Drupal 7 Feeds 模块在从 XML 中删除后不删除节点

> ID：16197001
> 
> 赞同：0
> 
> 时间：2013-04-24T16:10:09.887
> 
> 标签：xml, drupal-7, drupal-feeds

嗨，我有内容正在从 XML 提要导入并从该提要进行更新。这一切都很好，但是如何设置它以删除提要中不再存在的内容？

谢谢 C

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T03:16:43.140

只需将节点设置为在定期导入后一天左右过期。这样旧的节点就会消失，而不断更新的节点将继续蓬勃发展。

这些更改可以分别在 Feed 的“节点导入”设置和“基本设置”中进行。

旁注：

如果您一次只进行一项导入，请转到导入页面，选择“删除”，这将从该特定提要中删除所有导入的项目，然后重新导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T01:45:57.860

另请参阅建议的补丁“取消发布/删除未包含在提要中的节点” [https://drupal.org/node/1470530](https://drupal.org/node/1470530)

# magento - Magento Get url after the main url

> ID：16197003
> 
> 赞同：10
> 
> 时间：2013-04-24T16:10:11.647
> 
> 标签：magento, php

I have looked all over the internet, but can not find the following answer:

We want to get the part in Magento in .phtml after the main url so if:

domain.com/shoes.html we want to get only shoes.html

This is important because we have a multishop in .nl and .be and we want to use the hreflang. We need to give in both shops the url of both shops so as well from the .be and the .nl and then with the subcategory or product url.

In .phtml you can get the current url with: helper('core/url')->getCurrentUrl();?>

With that code you will get the total url so domain.com/shoes.html and we only want the part shoes.html

Would be great if someone knows the answer

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-25T10:44:19.357

你可以这样做：

```
$urlString = Mage::helper('core/url')->getCurrentUrl();
$url = Mage::getSingleton('core/url')->parseUrl($urlString);
$path = $url->getPath(); 
```

$path 将包含不包括域名的 URL。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-24T16:24:28.927

您可以使用 PHP 的 basename 方法获取该文件名

```
$url = Mage::helper('core/url')->getCurrentUrl(); //http://domain.com/shoes.html
echo basename($url); //outputs shoes.html 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-16T11:07:25.557

我对这里的一些建议有两个问题，首先 getBaseUrl() 包含端口号，其次我的基本 URL 包含一个商店目录，例如 www.example.com/store （包含在 getBaseUrl() 和 RightThing 中） . 答案是查看 getCurrentUrl() 的代码并创建我自己的当前 URL，该 URL 没有隐藏端口。

以下代码对我有用：

```
<?php
$request = Mage::app()->getRequest();
$port = ':' . $request->getServer('SERVER_PORT');

$currentUrl = $request->getScheme() . '://' . $request->getHttpHost() . $port . $request->getServer('REQUEST_URI');

$relUrl = str_replace(Mage::getBaseUrl(), '', $currentUrl);
    echo '<p>Base: ' .  Mage::getBaseUrl() . '</p>';
    echo '<p>This: ' . $currentUrl . '</p>';
    echo '<p>Repl: ' . $relUrl . '</p>';
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T16:28:41.123

有很多方法可以得到你想要的，这完全取决于你想要什么。您可以在执行操作时获取当前 url，并`Mage::getBaseUrl()`使用`str_replace`.

或者，您可以使用`$_SERVER['REQUEST_URI']`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-13T08:27:24.447

```
$currentUrl = Mage::helper('core/url')->getCurrentUrl() 
```

或者

```
$currentUrl = Mage::getUrl('*/*/*', array('_current' => true)); 
```

上面的代码可能并不总是按预期工作。查找当前 url 的更好方法是使用以下代码：

```
if (!in_array(Mage::app()->getFrontController()->getAction()->getFullActionName(), array('cms_index_noRoute', 'cms_index_defaultNoRoute'))) {
    $currentUrl = Mage::helper('core/url')->getCurrentUrl();
} 
```

# java - 创建嵌套 for 循环以扫描棋盘

> ID：16197009
> 
> 赞同：1
> 
> 时间：2013-04-24T16:10:27.730
> 
> 标签：java, for-loop

这里显示的是 ChessBoard 类，它创建了 Multi-D 数组块 - 表示棋盘 (8x8)。当一块移动时，我试图扫描棋盘以查看该块是否会移动穿过任何被占用的空间（如果是，则抛出非法移动异常）。下面附上我如何为每个 chessPiece 启动嵌套 for 循环。如何创建嵌套 for 循环来扫描点 [] [] 是否有空间空缺

```
public class ChessBoard {

private Piece spots[][];

public ChessBoard() {
    spots = new Piece[8][8];    
}

public void placePieceAt(Piece piece, ChessPosition position) 
{
    spot[position.getX()][position.getY()] = piece;
    piece.setPosition(position);
}
public abstract class Piece {

private ChessPlayer owner;
private ChessGame game;
protected ChessPosition position;

protected CPiece(ChessPlayer owner, ChessGame game, ChessPosition init_position) {
    this.owner = owner;
    this.game = game;
    this.position = null;

    game.getBoard().placePieceAt(this, init_position);
}

******here is where I was trying 
public void checkIfPositionOccupied(ChessPosition destination){
    ChessBoard[][] occupiedSpaces = new ChessBoard[8][8];
    for (int i = 0; i <8 ; i++){
        for(int j = 0; j<8; i++){

        }
    }

}
public void moveTo(ChessPosition destination) 

        throws IllegalMove
{
    // Replace with your code as necessary
    throw new IllegalMove(this, position, destination);
}

public char getMark() {
    return mark;
} 
```

}

```
class Rook extends Piece {
public Rook(ChessPlayer owner, ChessGame game, ChessPosition init_position) {
    super(owner, game, init_position);
    if (owner == game.getPlayer1()) {
        mark = 'r';
    } else {
        mark = 'R';
    }
}   

public void moveTo(ChessPosition destination) throws IllegalMove
{
    if((position.getX() == destination.getX() && position.getY() != destination.getY()) || (position.getX() != destination.getX() && position.getY() == destination.getY())){
        setPosition(destination);
    } else {
        throw new IllegalMove(this, position, destination);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:17:25.283

不知道你是不是在问这个，但好吧：

```
 ChessBoard[][] occupiedSpaces = new ChessBoard[8][8];
     for (int i = 0; i <8 ; i++){
     for(int j = 0; j<8; i++){
     if (spot[i][j]!=null)   
          //okay, occupied. 
         {
           // Make whatever you want here.
         }
     }
   } 
```

创建一个 hasPiece() 方法，如果该位置被占用，则返回一个布尔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:31:17.660

完全错了。。

如果`Piece`是类似的东西`Rook`看你的关系`Rook is Piece`。那你`ChessBoard`呢`64 (8*8)` `Piece`？你应该有单独的类`Spots`而不是用来`Piece`定义`ChessSPots`

另外根据你的问题`can the board to see if the piece will move through any spaces`

您不仅需要扫描`DestinationPosition`，还需要扫描当前位置的可能方式`Piece`。因此该`Move`方法应该特定于`ConCrete Piece like Rook`

您的`checkIfPositionOccupied`方法不需要循环。

```
public void checkIfPositionOccupied(ChessPosition destination){
    if(spot[destination.getX()][destination.getY()] !=null){
      /*Destination is Occupied*/
    }else{
      /*Destination is Not Occupied*/
    }

} 
```

# asp.net - .Net Membership Provider-- Reset (or Change) Password When Old Password and Q/A are Unknown

> ID：16197011
> 
> 赞同：2
> 
> 时间：2013-04-24T16:10:34.870
> 
> 标签：asp.net, xml, asp.net-membership

Trying to figure out if the following is possible. My settings (which I don't have an option of changing) are:

```
<add [...]
  enablePasswordRetrieval="false"
  enablePasswordReset="true"
  requiresQuestionAndAnswer="true"
  applicationName="/"
  requiresUniqueEmail="false"
  passwordFormat="Hashed"
  maxInvalidPasswordAttempts="5"
  minRequiredPasswordLength="7"
  minRequiredNonalphanumericCharacters="0"
  passwordAttemptWindow="10"
  passwordStrengthRegularExpression="" /> 
```

I can't call ChangePassword() without having the old password, but I also can't set a temporary password via user.ResetPassword(), as I get an error stating that the passwordAnswer needs to be supplied.

What are my options for changing a user's password?

**Edit**: found this:

[Change Password Issue in AspNet MembershipProvider](https://stackoverflow.com/questions/9732980/change-password-issue-in-aspnet-membershipprovider)

Hacky but it works. Would still like to see if there are other options. Seems like a flaw in the provider if there isn't a built-in way to do this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:37:25.350

## 使用 ResetPassword 更新密码

您通常可以使用这个简单的技巧重置密码。通过重置用户密码获取临时密码。然后通过将临时密码作为旧密码传递来更改所需的密码。

```
var user = Membership.GetUser(Username, false);
var tempPassword = user.ResetPassword();
user.ChangePassword(tempPassword, NewPassword); 
```

## 另一种方法：手动更新密码

正如你所说`ChangePassword()`的不起作用，这里是会员提供者用来生成盐和散列密码的方法。您可以使用它，并手动将盐和密码保存在数据库中。

```
private static string GenerateSalt()
{
    byte[] numArray = new byte[16];
    (new RNGCryptoServiceProvider()).GetBytes(numArray);
    string base64String = Convert.ToBase64String(numArray);
    return base64String;
}

private string EncodePassword(string pass, int passwordFormat, string salt)
{
    byte[] numArray;
    byte[] numArray1;
    string base64String;
    bool length = passwordFormat != 0;
    if (length)
    {
        byte[] bytes = Encoding.Unicode.GetBytes(pass);
        byte[] numArray2 = Convert.FromBase64String(salt);
        byte[] numArray3 = null;

        HashAlgorithm hashAlgorithm = HashAlgorithm.Create(Membership.HashAlgorithmType);

        if (hashAlgorithm as KeyedHashAlgorithm == null)
        {
            numArray1 = new byte[(int) numArray2.Length + (int) bytes.Length];
            Buffer.BlockCopy(numArray2, 0, numArray1, 0, (int) numArray2.Length);
            Buffer.BlockCopy(bytes, 0, numArray1, (int) numArray2.Length, (int) bytes.Length);
            numArray3 = hashAlgorithm.ComputeHash(numArray1);
        }
        else
        {
            KeyedHashAlgorithm keyedHashAlgorithm = (KeyedHashAlgorithm) hashAlgorithm;
            if (keyedHashAlgorithm.Key.Length != numArray2.Length)
            {

                if (keyedHashAlgorithm.Key.Length >= (int) numArray2.Length)
                {
                    numArray = new byte[(int) keyedHashAlgorithm.Key.Length];
                    int num = 0;
                    while (true)
                    {
                        length = num < (int) numArray.Length;
                        if (!length)
                        {
                            break;
                        }
                        int num1 = Math.Min((int) numArray2.Length, (int) numArray.Length - num);
                        Buffer.BlockCopy(numArray2, 0, numArray, num, num1);
                        num = num + num1;
                    }
                    keyedHashAlgorithm.Key = numArray;
                }
                else
                {
                    numArray = new byte[(int) keyedHashAlgorithm.Key.Length];
                    Buffer.BlockCopy(numArray2, 0, numArray, 0, (int) numArray.Length);
                    keyedHashAlgorithm.Key = numArray;
                }
            }
            else
            {
                keyedHashAlgorithm.Key = numArray2;
            }
            numArray3 = keyedHashAlgorithm.ComputeHash(bytes);
        }

        base64String = Convert.ToBase64String(numArray3);
    }
    else
    {
        base64String = pass;
    }
    return base64String;
} 
```

# wordpress - Show excerpt on the same page post in Wordpress

> ID：16197016
> 
> 赞同：1
> 
> 时间：2013-04-24T16:10:56.387
> 
> 标签：wordpress

How do I show the excerpt in the same post is page?

Example:

```
<?php
if ( the_excerpt() != '' ) {
echo $my_excerpt; 
}
?> 
```

But this does not work!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:28:00.007

[the_excerpt()](http://codex.wordpress.org/Template_Tags/the_excerpt)将回显摘录，而[get_the_excerpt()](http://codex.wordpress.org/Function_Reference/get_the_excerpt)将返回它。所以尝试这样的事情：

```
<?php
  $my_excerpt = get_the_excerpt();
  if ( $my_excerpt != '' ) {
    echo $my_excerpt; 
  }
?> 
```

# ruby-on-rails - 使用额外的详细信息在 Rails 应用程序中保持用户状态

> ID：16197018
> 
> 赞同：2
> 
> 时间：2013-04-24T16:10:58.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authlogic, remember-me

我是 rails 新手，之前我曾与 Yii（PHP，MVC 框架）进行过广泛的合作。Yii，允许web用户方法设置状态变量，例如

```
Yii::app()->user->userid 
Yii::app()->user->name 
```

我的 rails 应用程序需要存储有关用户的类似数据，以便随意访问。用户姓名、角色和头像名称等数据。我正在使用 authlogic 并使用以下函数将用户的状态存储在会话变量中：

```
 def login

  @user_session = UserSession.new(:email => params['email'] , :password => params['password'],:remember_me => params['remember_me'] )
  @user = User.where(:email => params['email']).first

      if @user_session.save && @user.access_status = 'active'

             session[:user_name] = @user.name
             session[:user_pic]  = @user.profile_pic_file_name
             session[:user_level] = @user.user_level
             redirect_to :action => 'index'
      else
          ...
      end 
 end 
```

这工作正常，但我决定添加“记住我”功能。在我关闭浏览器并重新打开它后，我的会话变量分配（名称、角色和图片名称）不再存在，并且我得到所有 nil 值。用户 ID 仍然存在，并且用户仍然登录。

实现这一点的最佳方法是什么？我可以在 authlogic 本身中设置值（因为即使在浏览器关闭后 authlogic 确实保留了用户 ID）还是应该求助于存储在浏览器上的 cookie？我的应用程序没有非常高的安全问题或敏感数据。

我正在寻找一个优雅的解决方案，因为我打算存储的数据会经常在多个地方使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:16:51.507

如果您希望添加持久登录，则需要通过 cookie 进行。您可以为用户生成会话密钥并将会话数据存储在数据库中。您将此会话密钥写入他们的 cookie，这样您就可以知道当用户返回时要从数据库中提取哪个会话。如果您在此密钥中包含任何用户数据，强烈建议您通过密钥对其进行散列，以防止人们只是“制作”他们自己的会话密钥并访问您的站点。

还要注意，像这样的持久会话会使您的用户群面临会话劫持问题，并引入一些额外的安全问题。在这种情况下，我做的一件常见的事情是要求用户密码来对用户的偏好进行任何更改，并且只依赖于会话密钥进行访问控制。

## 例子

* * *

拥有一个包含您认为需要的任何会话数据的会话模型，该会话应该属于用户。创建一个`sessions_helpers`具有一些功能的文件，例如：

```
def remember(user)
  # ideally give an expiration
  cookies.permanent[:remember_token] = user.remember_token
end

def sign_out
  cookies.delete :remember_token
end

def current_user
  @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end 
```

然后在您的`ApplicationController`正义内部，您`include SessionHelper`可以在所有控制器/视图中访问这些。允许您`current_user.user_id`在控制器操作中获取登录的用户 ID。

从上面的代码中，您还需要在模型上定义一个`remember_token`方法。`User`在此示例中，没有`Session`模型或数据库表，它只是使用`User`（可能适合您的需要或可能不适合），但添加`Session`模型只会稍微修改它。

# powershell - 如何从 Invoke-Command 编写详细信息？

> ID：16197021
> 
> 赞同：18
> 
> 时间：2013-04-24T16:11:04.717
> 
> 标签：powershell, powershell-remoting

在PowerShell中

`Write-Verbose`当命令以详细模式运行时，该`-Verbose`标志用于提供详细信息。我正在远程运行一些脚本，并希望捕获详细的输出输出。但是，`Invoke-Command`似乎没有捕获详细的通道。

```
PS:> Invoke-Command -ComputerName MY-COMPUTERNAME -Verbose { Write-Verbose "blah" }
PS:> 
```

运行远程脚本时如何捕获详细输出？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-07T15:46:05.073

我认为您可以做的最好的事情是创建一个具有 [CmdletBinding()] 的函数，因此它支持 -verbose 开关。然后，您将能够使用本地 $VerbosePreference 捕获本地函数的详细状态，并将其传递给调用命令。这仅适用于 Powershell 3.0 及更高版本，因为您需要使用 $Using 范围修饰符。

```
Function write-blah{
[CmdletBinding()]
Param()
Invoke-Command -ComputerName MY-COMPUTERNAME  {$VerbosePreference=$Using:VerbosePreference; Write-Verbose "blah" }
} 
```

然后你会这样调用你的函数。

```
Write-Blah -verbose 
```

在测试中，这对我有用。我相信您的函数必须支持参数，因此是空的 Param() 块。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-24T16:31:04.443

试试这种方式：

```
Invoke-Command -ComputerName MY-COMPUTERNAME  {$VerbosePreference='Continue'; Write-Verbose "blah" } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-27T08:17:30.397

```
Invoke-Command -ComputerName MY-COMPUTERNAME { Write-Verbose "blah" -Verbose } 
```

# c++ - 如何使用 Qt 从磁盘读取 XML 文件？

> ID：16197025
> 
> 赞同：3
> 
> 时间：2013-04-24T16:11:43.087
> 
> 标签：c++, qt, qfile, qxmlstreamreader

我想读取一个xml文件如下：

```
QFile myFile("xmlfile"); 
```

然后继续从以下位置解析 xml：

```
QXmlStreamReader xmlData(myFile); 
```

..我得到的错误是：

```
no matching function for call to 'QXmlStreamReader::QXmlStreamReader(QFile&)' 
```

那么问题是什么以及如何解决呢？

* * *

问题更新：根据下面选择的答案，代码现在可以正常工作，没有语法错误。

但是，我无法读取我的 xml。解析 xml 时，我使用以下内容读取 xml 元素：

```
QXmlStreamReader::TokenType token = xmlElements.readNext(); 
```

然后是用于检查 startElements 的代码：

```
 while(!xmlElements.atEnd() && !xmlElements.hasError()){ // the breakpoint is here
 do ...
 } 
```

所以，在这个断点处，我在调试器中注意到令牌值是`QXmlStreamReader::Invalid(1)`

那么，发生了什么..是我的 QStreamReader 没有将文件读取为 xml，还是读取它但 xml 本身有错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:15:25.100

错误消息告诉您，没有`QXmlStreamReader`带有您尝试调用的签名的类的构造函数，即`QFile`单独接受参数（通过值或通过引用）的构造函数。阅读[文档](http://qt-project.org/doc/qt-4.8/qxmlstreamreader.html)很有帮助。相关摘录：

```
QXmlStreamReader ()
QXmlStreamReader ( QIODevice * device )
QXmlStreamReader ( const QByteArray & data )
QXmlStreamReader ( const QString & data )
QXmlStreamReader ( const char * data ) 
```

现在，如果您知道`QFile`实际继承`QIODevice`（您也可以在[文档](http://qt-project.org/doc/qt-4.8/qfile.html)中找到），那么您可以立即理解调用应该更改如下：

```
QXmlStreamReader xmlData(&myFile); 
```

此外，您似乎根本不知道如何使用`QXmlStreamReader`，因此您正在寻找的是教程。我不想在这里重写很棒的 Qt 教程。因此，为了拦截您所有进一步的问题，我建议您参考[官方教程](http://www.developer.nokia.com/Community/Wiki/QXmlStreamReader_to_parse_XML_in_Qt)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T11:00:01.433

**我发现了问题，现在一切正常**

**这是错误：**以前使用以下代码：

```
QFile myFile("xmlfile");
QXmlStreamReader xmlData(&myFile); 
```

该文件首先在第一行创建，第二行代码只是传递文件，因为它不是它的 xml 内容（因为它还没有被打开），因此*QXmlStreamReader::errorString*返回*文档的 Premature end* ..

**解决方案非常简单**：使用以下代码在将“myFile”文件传递给 QXmlStreamReader 之前打开它：

```
xmlData.open(QIODevice::ReadOnly); 
```

该设备现在已打开以供 QXmlStreamReader 读取。最终**代码是**：

```
QFile myFile("xmlfile");
myFile.open(QIODevice::ReadOnly);
QXmlStreamReader xmlData(&myFile); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T20:36:05.043

我在 QT 中读取 XML 文件的方式略有不同，我读取它们并将它们存储在一个单独的对象中，因为我读取并解析了很多 XML。

我会为您发布一个示例，此示例运行 XML 属性，如果您正在寻找 XML 标记，它将无法正常工作。

```
 QDomDocument XMLfile;

    QFile XMLfile(XMLpath);
    if (!XMLfile.open(QIODevice::ReadOnly | QIODevice::Text))
    {
        // Error
    }
    if (!XMLfile.setContent(&XMLfile))
    {
        // Error
    }
    XMLfile.close();

    QDomElement root = XMLfile.firstChildElement();
    QDomElement item = root.firstChildElement();

    XMLstorage* currentXMLstorage = new XMLstorage();

    currentXMLstorage->Attribute1(item.attribute("Attribute1"));
    currentXMLstorage->Attribute2(item.attribute("Attribute2"));
    currentXMLstorage->Attribute3(item.attribute("Attribute3"));
    currentXMLstorage->Attribute4(item.attribute("Attribute4"));
    currentXMLstorage->Attribute5(item.attribute("Attribute5"));
    currentXMLstorage->Attribute6(item.attribute("Attribute6"));

    return *currentXMLstorage; 
```

# c# - 使用 HTTPHandler 时禁用会话状态访问

> ID：16197030
> 
> 赞同：3
> 
> 时间：2013-04-24T16:12:13.313
> 
> 标签：c#, asp.net, session

我有一个使用 IHTTPHandler 并且没有实现**IRequiresSessionState**或**IReadOnlySessionState**的类。我仍然看到它访问我们的会话提供程序导致过度使用。

**堆栈跟踪：** HttpRuntime.ProcessRequestInternal => HttpApplication.System.Web.IHttpAsyncHandler.BeginProcessRequest => ApplicationStepManager.ResumeSteps => HttpApplication.ExecuteStep => AsyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute => SessionStateModule.BeginAcquireState => SessionStateProvider.ResetItemTimeout => SessionStateItem.Save

有没有办法告诉 HttpHandler 不使用 Session？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T17:57:53.410

很难找到有关此问题的任何正式文档，但看起来答案是否定的。即使您不实现`IRequiresSessionState`or `IReadOnlySessionState`，如果您使用的是 SQL Server 会话提供程序，您仍然会看到对该`TempResetTimeout`过程的调用。至少这是我从测试中发现的。

如果您真的想在不使用完全禁用 Session 的单独 Web 应用程序的情况下避免会话，您可以创建一个`HttpModule`，而不是使用`HttpHandler`. 这不是一个理想的方法，但在我的测试中它确实有效。

基本上，您使用`BeginRequest`事件处理程序执行所需的操作并完成请求`BeginRequest`（即，通过调用`context.ApplicationInstance.CompleteRequest()`）。如果您使用 SQL Profiler 监视数据库，您将看到没有进行任何 Session 数据库调用。

我希望我有一个更好的答案，但这似乎是它的工作方式（无论如何在 ASP.NET 4.0 中）。

# css - Css3 背景图像动画动画太快了

> ID：16197034
> 
> 赞同：1
> 
> 时间：2013-04-24T16:12:27.023
> 
> 标签：css, animation, background-image, css-animations

我正在尝试对**多个元素**进行 css3 动画。
所有这些元素都有**不同的背景图像**，并且必须在动画中间替换它们。
问题是，我想**对所有元素使用相同的动画**。
也就是说，我不能在动画中写出原始的背景图像。
但是，缺少原始背景图像会使背景图像与其余部分一起动画。

我想我需要类似的东西：

```
background-image: default; 
```

但我不认为它存在。
有人有想法吗？

**示例： http:**
[//jsfiddle.net/4SRrR/](http://jsfiddle.net/4SRrR/)
*（看看背景图像是如何在 div 离开屏幕之前开始褪色为红色的。）*

**html:**

```
<div class="anim"></div> 
```

**CSS：**

```
.anim {
    position: absolute;
    top: 0;
    left: 0;
    width: 400px;
    height: 400px;
    background-image: url("http://www.webdesign.org/img_articles/15485/Step1.png");
    -webkit-animation: anim .75s forwards ease-in;
}

@-webkit-keyframes anim {
    0% {-webkit-transform: translateX(0px);}
    50% {-webkit-transform: translateX(-400px);}
    51% {-webkit-transform: translateX(-400px); background-image: url("http://www.vt2k.com/processing/images/redball.jpg");}
    100% {-webkit-transform: translateX(0px); background-image: url("http://www.vt2k.com/processing/images/redball.jpg");}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T21:11:08.170

一种可能性是有 2 个背景，然后在动画中只引用第一个和第二个的大小：

[小提琴](http://jsfiddle.net/vals/4SRrR/1/)

CSS 将是：

```
.anim {
    position: absolute;
    top: 0;
    left: 0;
    width: 400px;
    height: 400px;
    background-image: url("http://www.webdesign.org/img_articles/15485/Step1.png"), url("http://www.vt2k.com/processing/images/redball.jpg");
    background-size: 100% 100%, 0% 100%;
    background-repeat: no-repeat;
    -webkit-animation: anim 7.5s forwards ease-in;

}

@-webkit-keyframes anim {
    0% {-webkit-transform: translateX(0px); background-size: 100% 100%, 0% 0%;}
    50% {-webkit-transform: translateX(-400px);background-size: 100% 100%, 0% 0%;}
    51% {-webkit-transform: translateX(-400px); background-size: 0% 0%, 100% 100%; }
    100% {-webkit-transform: translateX(0px);  background-size: 0% 0%, 100% 100%;}
} 
```

我增加了过渡的持续时间，使其更加明显。并且还过度定义了背景大小；不必在每一帧中重复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:55:33.920

我对问题是什么感到困惑，但我会尝试一下。如果你关闭 51% 的动画，那么它似乎会稍微好一点。它会缩小直到它消失，然后当它回来时背景图像淡入。

CSS3 动画的难点之一是没有简单的方法来判断动画何时完成 50%。你可以做的是 2 个关键帧动画。使用 JS 可以监听第一个动画的结尾。您可以添加背景图像，然后添加将触发动画第二部分的类。它不漂亮，但可以工作。

# .net - 用轮廓绘制 WPF PathFigure

> ID：16197037
> 
> 赞同：1
> 
> 时间：2013-04-24T16:12:43.173
> 
> 标签：.net, wpf, drawing, effects

我正在尝试显示`Path`具有以下要求的 WPF -Object：

1.  我想让`Path`它本身以特定的颜色和特定的厚度显示。
2.  我想`Path`用另一种颜色和粗细给轮廓上色

**示例**（在现实生活中，该图更复杂，带有曲线等）：

![例子](https://i.stack.imgur.com/nFvsv.png)

有没有办法在WPF中实现这种效果？

我试图覆盖两个单独的路径（蓝色路径顶部的红色路径），但结果看起来不是很平滑，尤其是当你有圆角时。

我也尝试使用 a `DropShadowEffect`，但无法像示例中那样获得清晰的轮廓。

任何的想法？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T16:55:09.117

![在此处输入图像描述](https://i.stack.imgur.com/tMAGH.png)

由...制作

```
<Canvas>
    <Canvas.Resources>
        <Geometry x:Key="pathData">M100,100 L200,100 200,150 A1,1 0 0 1 100,150 Z</Geometry>
    </Canvas.Resources>
    <Path Stroke="Blue" StrokeThickness="15" StrokeLineJoin="Round"
          Data="{StaticResource pathData}"/>
    <Path Stroke="Red" StrokeThickness="6" StrokeLineJoin="Round"
          Data="{StaticResource pathData}"/>
</Canvas> 
```

# android - 1小时后重启服务

> ID：16197038
> 
> 赞同：2
> 
> 时间：2013-04-24T16:12:44.627
> 
> 标签：android, android-service, android-wake-lock

我的应用程序中有一个后台服务，用于检测 wifi 热点。他运行良好，但是当设备进入睡眠模式时，该服务会重新启动。我已经配置了唤醒锁和 Wifi 锁。

我的代码：（创建服务）

```
public void onCreate(){
    super.onCreate();
    Settings.System.putInt(getContentResolver(),
    Settings.System.WIFI_SLEEP_POLICY, 
    Settings.System.WIFI_SLEEP_POLICY_NEVER);

    wm = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
    wifiLock = wm.createWifiLock(WifiManager.WIFI_MODE_FULL, "SD1xWifi");
    wifiLock.acquire();

    mgr = (PowerManager)getSystemService(Context.POWER_SERVICE);
    wakeLock = mgr.newWakeLock(PowerManager.FULL_WAKE_LOCK, "SD1x");
    wakeLock.acquire();
} 
```

我的代码：（启动服务）

```
public void onStart(Intent i, int x){
    super.onStart(i, x);
    Log.i("TesteWifi", "Find spots wifi started");
    try{
        wm.startScan();
        timer.scheduleAtFixedRate(new mainTask(), 0, 1000);
    }catch(Exception e){
        e.printStackTrace();
        Log.i("TesteWifi", "Error on start service find wifi");
    }
} 
```

我的代码：（TimerTask）

```
 private class mainTask extends TimerTask {

        @Override
        public void run() {
             // ...timertask processes...
        } 
```

我的代码：（服务在 MainActivity 中启动）

```
try {
    startService(obj.getServiceAutoCheckin());
} catch (Exception e) {
    Log.i("Services", "ERRO: " + e.getMessage());
} 
```

为什么我的服务重新启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:31:01.473

使用广播接收器从服务中获取服务意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T10:06:28.157

我解决了更改服务启动事件的问题。我通过 onStartCommand 更改了事件。服务响应为 START_STICKY。

[文档](http://developer.android.com/reference/android/app/Service.html)

# python - 使用 Python Mechanize 无法自动化表单登录

> ID：16197039
> 
> 赞同：0
> 
> 时间：2013-04-24T16:12:46.823
> 
> 标签：python, mechanize

我一直在尝试自动化需要 cookie 的站点登录。我在这个网站上找到了答案，并回复了它，但我在登录时遇到了问题，因为我忘记了我已经在这里有一个帐户。我为重复发帖道歉，但我担心我的回复不会被看到。

[无法使用 python mechanize 自动登录（必须“激活”特定浏览器）](https://stackoverflow.com/questions/16004322/cant-automate-login-using-python-mechanize-must-activate-specific-browser)

一个问题。当试图复制这个时，我遇到了一个错误。

```
File "test5.py", line 6, in <module>
self.br = mechanize.Browser( factory=mechanize.RobustFactory() )
NameError: name 'self' is not defined 
```

我通常在 Perl 中编写脚本，但一直在阅读这个 python 模块对于我想要完成的任务会容易得多。

这是我的代码：

```
#!/usr/bin/python
import sys
import mechanize
from mechanize import ParseResponse, urlopen, urljoin

self.br = mechanize.Browser( factory=mechanize.RobustFactory() )
self.br.add_handler(PrettifyHandler())
cj = cookielib.LWPCookieJar()
cj.save('cookies.txt', ignore_discard=False, ignore_expires=False)
self.br.set_cookiejar(cj)

self.br.addheaders = [('Accept', 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'),
                 ('User-agent', 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0)      Gecko/20100101 Firefox/16.0'),
                 ('Referer', 'https://--------------/admin/login.jsp'),
                 ('Accept-Encoding', 'gzip,deflate,sdch'),
                 ('Accept-Language', 'en-US,en;q=0.5'),
                 ]
self.br.open('https://--------------/admin/login.jsp')

# Select the first (index zero) form
self.br.select_form(nr=0)
# User credentials
self.br.form['email'] = 'emailaddress'
self.br.form['password'] = 'password'
# Login
self.br.submit()
# Inventory
body = self.br.response().read().split('\n') 
```

对我来说，声明变量 self 似乎是一个问题，但我对 Python 不太熟悉，不知道是否是这种情况。任何我收到此错误的想法将不胜感激。

更新:: 我能够通过删除所有 self 实例来克服最初的错误。现在，当我运行以下代码时，出现此错误：

```
 raise FormNotFoundError("no form matching "+description)
    mechanize._mechanize.FormNotFoundError: no form matching name 'Loginform' 
```

下面是代码：

```
!/usr/bin/python
import sys
import mechanize
import cookielib
from mechanize import ParseResponse, urlopen, urljoin, Browser
from time import sleep

class PrettifyHandler(mechanize.BaseHandler):
def http_response(self, request, response):
    if not hasattr(response, "seek"):
        response = mechanize.response_seek_wrapper(response)
    # only use BeautifulSoup if response is html
    if response.info().dict.has_key('content-type') and ('html' in     response.info().dict['content-type']):
        soup = MinimalSoup (response.get_data())
        response.set_data(soup.prettify())
    return response

br = mechanize.Browser( factory=mechanize.RobustFactory() )
br.add_handler(PrettifyHandler())
br.set_handle_robots(False)
cj = cookielib.LWPCookieJar()
cj.save('cookies.txt', ignore_discard=False, ignore_expires=False)
br.set_cookiejar(cj)
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)
br.addheaders = [('Accept', 'text/html,application/xhtml+xml,application/xml;q=0.9,*  /*;q=0.8'),
                 ('User-agent', 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0'),
                 ('Referer', 'https://****/admin/login.jsp'),
                 ('Accept-Encoding', 'gzip,deflate,sdch'),
                 ('Accept-Language', 'en-US,en;q=0.5'),
                 ]
br.open('https://****/admin/login.jsp')

print br.response

 # Select the first (index zero) form
br.select_form(name='Loginform') 
#br.select_form(nr=0)
 # User credentials
br.form['email'] = 'luskbo@gmail.com'
br.form['password'] = 'password!!!'
 # Login
br.submit()
# Inventory
 body = br.response().read().split('\n') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:17:20.647

只需删除 every `self.`，它应该可以工作（如果没有任何其他错误）。

`self`通常仅用于从类的方法中引用当前对象，而不是在模块级别。

# html - 跨浏览器输入字段宽度设置不正确

> ID：16197049
> 
> 赞同：0
> 
> 时间：2013-04-24T16:13:11.430
> 
> 标签：html, css, google-chrome, firefox, cross-browser

在 chrome 和 firefox 等浏览器中通常不设置输入字段宽度。请参阅下面的代码

```
 <table border="1" align="left" cellpadding="0" cellspacing="0" width="25%" style="margin-top: -90px;">
  <tr>
    <td colspan="3"><input id="ir-box" type="checkbox"/>Only show LIVE reports</td><td></td>
  </tr>
  <tr>
    <td colspan="3"><input type="text" value="Keyword Search"/></td><td>{% include "buttons/go.html" %}</td>
  </tr>
  <tr>
    <td colspan="4"><input id="incident-types"class="incident-type" type="text" value="All Incident types" /></td>
  </tr>
  <tr>
    <td colspan="4"><input id="location-types"class="incident-type" type="text" value="All Location types"/></td>
  </tr>
  <tr>
    <td colspan="2">From</td><td colspan="2">To</td>
  </tr>
  <tr>
    <td colspan="2" width="30"><input class="datefield" id="fromdate" type="text" value="dd/mm/yyyy"/></td><td colspan="2"  width="150"><input class="datefield" id="todate" type="text" value="dd/mm/yyyy"/></td>
  </tr>
  <tr>
    <td></td><td></td><td></td><td>{% include "buttons/go.html" %}</td>
  </tr>
</table> 
```

css。

```
.datefield {
  padding:0; 
  margin:0; 
  width:80px;
  height:20px;
  }

  .incident-type {
  padding:0; 
  margin:0; 
  width:250px;
  height:20px; 
  } 
```

我可以知道如何解决这种兼容性问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:54:57.777

您的问题不在输入字段中，而是在表格范围内，请在演示中试用我的代码

**HTML**

```
<div class="wrapper"> 
<table border="1" align="left" cellpadding="0" cellspacing="0" width="25%">
  <tr>
    <td colspan="3"><input id="ir-box" type="checkbox"/>Only show LIVE reports</td><td></td>
  </tr>
  <tr>
    <td colspan="3"><input type="text" value="Keyword Search"/></td><td>{% include "buttons/go.html" %}</td>
  </tr>
  <tr>
    <td colspan="4"><input id="incident-types"class="incident-type" type="text" value="All Incident types" /></td>
  </tr>
  <tr>
    <td colspan="4"><input id="location-types"class="incident-type" type="text" value="All Location types"/></td>
  </tr>
  <tr>
    <td colspan="2">From</td><td colspan="2">To</td>
  </tr>
  <tr>
    <td colspan="2" width="30"><input class="datefield" id="fromdate" type="text" value="dd/mm/yyyy"/></td><td colspan="2"  width="150"><input class="datefield" id="todate" type="text" value="dd/mm/yyyy"/></td>
  </tr>
  <tr>
    <td></td><td></td><td></td><td>{% include "buttons/go.html" %}</td>
  </tr>
</table>
</div> 
```

**CSS**

```
.wrapper {
    width: 400px;
}
.wrapper table {
    width: 100%;
}
.datefield {
  padding:0; 
  margin:0; 
  width:80px;
  height:20px;
  }

  .incident-type {
  padding:0; 
  margin:0; 
  width:250px;
  height:20px; 
  } 
```

**演示**

```
http://jsfiddle.net/sqJyw/3/ 
```

**解释**

我添加了包裹你的桌子和桌子的 div 被 100%

# java - Java 是否具有与 C# 元组等效的变量类型？

> ID：16197050
> 
> 赞同：11
> 
> 时间：2013-04-24T16:13:12.940
> 
> 标签：java, c#, .net, tuples

我正在将一个程序从 C# 翻译成 Java。在 C# 代码中，开发人员使用元组。我需要将此 C# 代码翻译成 Java 代码。因此，Java 是否具有与 C# 的元组等效的变量类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:39:46.957

由于类型擦除，Java 中无法*准确*地镜像 .NET 中的各种`Tuple`类。但是，这是一个 BSD 许可的 Java 实现`Tuple2`和`Tuple3`，它反映了.NET 的`Tuple<T1, T2>`和`Tuple<T1, T2, T3>`类型。

*   [Tuple.java](https://github.com/sharwell/antlr4/blob/optimized/runtime/Java/src/org/antlr/v4/runtime/misc/Tuple.java)（使用类型推断构造元组的静态方法）
*   [元组2.java](https://github.com/sharwell/antlr4/blob/optimized/runtime/Java/src/org/antlr/v4/runtime/misc/Tuple2.java)
*   [元组3.java](https://github.com/sharwell/antlr4/blob/optimized/runtime/Java/src/org/antlr/v4/runtime/misc/Tuple3.java)

您可以在 Java 中而不是 C# 中做的一件很酷的事情是：

```
class Bar extends Foo { }

...

Tuple2<? extends Foo, ? extends Foo> tuple = Tuple.create(new Bar(), new Bar()); 
```

在 C# 中，您将不得不使用强制转换：

```
Tuple<Foo, Foo> tuple = Tuple.Create((Foo)new Bar(), (Foo)new Bar()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:49:27.680

可能有点跑题了，但是您是否考虑过在 JVM 环境中使用 Scala？它具有元组支持 + 一些您可能会从 C# 中错过的其他不错的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-11T23:52:18.140

[在https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/tuple/package-summary.html](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/tuple/package-summary.html)似乎有一个相当不错的元组库。三个元素是最大的，但如果你需要一个大于三个的元组，你可能应该放弃并定义一个类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-26T00:27:30.570

这是一个相当老的话题，但我会留下我最近在 Java 项目中转换 C# tuples(Tuple) 期间使用的内容 - 你可以简单地使用 org.javatuples lib - [https://www.javatuples.org/](https://www.javatuples.org/)，它会给出相同的存储数据的行为。

下面的简单示例供稍后将查找此内容的人使用：

C＃

```
var tupleCs = new Tuple<string, string, string>("value1","value2","value3");
Console.Writeline(tupleCs.Item1); => value1
Console.Writeline(tupleCs.Item2); => value2
Console.Writeline(tupleCs.Item3); => value3 
```

在 Java 中也一样

```
Triplet tupleJava = new Triplet("value1","value2","value3");
System.out.println(tupleJava.getValue0()); => value1 
System.out.println(tupleJava.getValue1()); => value2
System.out.println(tupleJava.getValue2()); => value3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-14T13:32:14.907

我在我的 android 项目中也需要 Tuple 等价物，但在 Java 中没有找到任何本机解决方案。但令人惊讶的是`Pair.class`，在 android 的 util 中，这正是我正在寻找的。

因此，遇到这个问题的**Android 开发人员**`Pair.class`在package.json 中使用`android.util`。

PS*我很难过接受 Java 在很多方面已经远远落后于其他语言。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T16:14:47.930

据我所知，可能有实现，但不在 JDK 库中。有关您自己的元组的示例，请参见此处：[Using Pairs or 2-tuples in Java](https://stackoverflow.com/questions/2670982/using-tuples-in-java)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-08T20:45:42.570

当您将 Spring Boot 与 WebFlux 一起使用时，它带有 Project Reactor 并提供`Tuples`类。Project Reactor 实现的优点是它们有一种使用`.of`运算符生成元组的干净方式

例如

```
Tuples.of("A", 1, myObject); 
```

我通常将它用于此示例中所示的日期范围，以查找给定处理日期的范围的开始日期。

```
return schedules.stream()
   .map(s -> Tuples.of(s.getStartDate(), s.getStopDate().orElse(LocalDate.MAX)))
   .filter(range -> (!processingDate.isBefore(range.getT1())) && 
                      processingDate.isBefore(range.getT2()))
   .findAny()
   .map(Tuple2::getT1); 
```

无需记住 Pair、Triple、Decade 等类型。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-12T06:48:21.177

这是一个相当古老的问题，但这是我最终开发的能够在后 Java 8 世界中使用元组的所有功能工具和更好的流利语言：[https ://github.com/mmnaseri/tuples4j /](https://github.com/mmnaseri/tuples4j/)

它也已经在 Maven Central 中可用，因此很容易掌握。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-12T07:09:44.840

从一开始，Java 中至少存在一个 2-tupel `java.util.Map.Entry<K,V>`：！好吧，它只是一个界面……</p>

但是从 Java 9 开始，有一个静态方法`java.util.Map.entry()`允许动态创建该接口的实例（实际上，实现该接口的隐藏类的实例，但谁在乎这个小细节呢？）。

我不想在不处理集合的公共 API 的定义中使用它，而是在内部实用程序类中使用它……为什么不呢？该类已经存在于 JRE 中，没有额外的外部依赖，而且我可以接受这样一个事实，即元素被命名为“key”和“value”而不是“item1”、“item2”……</p>

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-04-24T16:58:34.723

我不是 C# 开发人员，但鉴于我刚刚查看的有关 C# 中 Tuple 的文档，我无法想象你会/可以/应该使用这样的东西。

```
var population = new Tuple<string, int, int, int, int, int, int>(
                           "New York", 7891957, 7781984, 
                           7894862, 7071639, 7322564, 8008278); 
```

看着这段代码，我不知道这些值代表什么，也无法想象你为什么不使用一个类。

在我看来，这只是表示封装不佳。

但是，如果你想要一个 Java 元组，我知道的唯一一个是

```
Map.Entry<K,V> 
```

而且它真的只适合在地图中使用

# azure - 虚拟服务器与 Azure 或将基础架构迁移到 Microsoft

> ID：16197051
> 
> 赞同：0
> 
> 时间：2013-04-24T16:13:13.910
> 
> 标签：azure

我对微软的新提案很感兴趣。在我做某事之前，我会问一些重要的问题。
因为我还没有找到与 Microsoft 支持的直接联系，所以我在这里。

**我们现在拥有的**

这是4个虚拟机：

1.  带有 SQL Server 的 Windows Server；
2.  带有 4 个我们服务的 Windows Server (.net 3.5)；
3.  带有我们服务的 Windows 服务器（Bitrix（Windows 上的 Apache，具有一些功能））；
4.  Linux 作为 vpn 服务器。

**问题**

主要问题是将我们的基础架构迁移到 Microsoft 的最佳方式是什么。

这是一些考虑的方面

*   表现
*   易于设置
*   可靠性
*   成本（现在没关系）

细节

1.  留在虚拟机上还是尝试在 Azure 中迁移为应用服务会更好吗？
2.  从.Net 3.5上的windows服务应用迁移到云应用会不会很困难？
3.  据我所知，Microsoft 有自己的数据存储产品，我不需要为此购买虚拟机，对吗？
4.  只能从我的服务或虚拟机（只是偏执狂）对 SQL DB 进行私有访问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:16:38.893

好吧……我们走吧……

问：`Will it be better to stay on virtual machines or try to migrate in azure as app services?`
答：取决于您的应用程序。如果您的应用程序已准备好云，那么 azure 服务就是您的答案，如果没有，请选择传统托管...

问：`Will it be difficult to migrate from windows service app on .Net 3.5 to cloud app?`
答：不检查你的源代码是不可能的。拇指规则？不，不会有问题的...

问：`As I know Microsoft has its own offer for data storage and I don't need to get virtual machine for it do I?`
答：视情况而定。如果你所说的数据存储是指blob，那么不，你不要，但要小心，因为机器上的存储是不可扩展的！您应该考虑重构代码以使用 blob 存储。**但是**，如果数据存储是指 SQL Azure 存储，则由于 150GB 的限制，您必须格外小心……在这种情况下，请考虑对数据库“分片”进行重大重构……

问：`Can it be private access to SQL DB only from my services or virtual machines (just paranoid)?` 答：视情况而定。如果 SQL DB 你的意思是 SQL Azure 那么是的，这是一个原生的东西**但是**如果你的 SQL DB 你的意思是你要在你的 VM 上托管的那个，你也可以，但它不是一个原生的解决方案。您将不得不弄脏虚拟网络...

**EDIT1：**我个人的建议是：将您的应用程序迁移到云原生应用程序，特别是如果您有多租户场景，或者您想更好地处理使用高峰或节省硬件/基础设施投资。请记住“您的业务是构建和运行软件，而不是硬件”！（我不知道这是不是你的情况......但它是我的......）

# c# - .Net Remoting: Invoke Method on client from Server

> ID：16197052
> 
> 赞同：0
> 
> 时间：2013-04-24T16:13:17.477
> 
> 标签：c#, .net, remoting

i'm trying to write a small chat server using .Net Remoting in C#. The connection to the Server from the client works nicely, but as soon as i try to "broadcast" a sent message to all other clients (or even the same client), the server throws an exception.

"Der Remoteproxy hat keine Channelsenke, d. h., der Server besitzt keine registrierten Serverchannel oder die Anwendung hat keinen passenden Clientchannel, um mit dem Server zu kommunizieren."

what translates to

"This remoting proxy has no channel sink which means either the server has no registered server channels that are listening, or this application has no suitable client channel to talk to the server."

How would i change this?

Here ( [https://www.dropbox.com/s/y40cdv3lopsf6d7/Chatprojekt.zip](https://www.dropbox.com/s/y40cdv3lopsf6d7/Chatprojekt.zip) ) you can find a copy of the full project, but to help others who have the same problem, i'll explain what i did.

On the server i opened a TcpChannel on a specific port, made an interface for both,the server and the client. I connect to the server and with a method,i pass the client instance to the server. Both implementations of the interfaces implement MarshalByRefObj to use Proxies for method invokation.

Thanks already a lot for helping me

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:24:28.293

I gave up on doing real .NET remoting in favor of WCF a long time ago. Recently I've been using [RemotingLite](http://remotinglite.codeplex.com/) and my own variant of it which also supports named pipes called [DuoVia.Net](https://github.com/duovia/duovia-net). You simply write your interface contract and DTO's, share those in an assembly on client and server and write your implementation on the server side.

No client to produce. These libraries produce their own through reflection and dynamic assembly generation by emitting IL. Cool stuff. Have a look at how easy the client side is:

```
class Program
{
    static void Main(string[] args)
    {
        var sw = Stopwatch.StartNew();
        var ipEndpoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), 8098);

        var from = 0;
        var to = 500;
        Parallel.For(from, to, index =>
        {
            using (var client = new NetTcpTesterProxy(ipEndpoint))
            {
                var id = client.GetId("test1", 3.314, 42);
                var response = client.Get(id, "mirror", 4.123, 42);
                var list = client.GetItems(id);
            }
        });
        sw.Stop();
        var msperop = sw.ElapsedMilliseconds / 1500.0;
        Console.WriteLine("tcp: {0}, {1}", sw.ElapsedMilliseconds, msperop);

        Thread.Sleep(5000);

        var pipeName = "DuoViaTestHost";
        sw = Stopwatch.StartNew();
        Parallel.For(from, to, index =>
        {
            using (var client = new NetNpTesterProxy(new NpEndPoint(pipeName)))
            {
                var id = client.GetId("test1", 3.314, 42);
                var response = client.Get(id, "mirror", 4.123, 42);
                var list = client.GetItems(id);
            }
        });
        sw.Stop();
        msperop = sw.ElapsedMilliseconds / 1500.0;
        Console.WriteLine("pip: {0}, {1}", sw.ElapsedMilliseconds, msperop);

        Console.ReadLine();
    }
} 
```

Have fun!

# node.js - 使用 connect-mongo 和 express 的空存储对象

> ID：16197057
> 
> 赞同：0
> 
> 时间：2013-04-24T16:13:30.843
> 
> 标签：node.js, mongodb, express, socket.io

我正在使用 Express 和 Connect-Mongo 来管理我的 Node.js/Socket.io 应用程序的会话。
我查看了 connect-mongo 文档，并且正在尝试初始化数据库连接，但是每当我尝试在其中存储任何内容时，存储对象始终为空并崩溃。
这是我正在使用的代码片段：

```
var mongoserver = new mongodb.Server('localhost', mongodb.Connection.DEFAULT_PORT, {safe:true}) ;
var store ;
app.use(express.session({
secret: 'secret', 
store: new MongoStore({ db: 'test'}, function(){
    db = new mongodb.Db('test', mongoserver, { w: 1 }) ;
    db.open(function(err, db){ 
        if(err){console.log('DB error', err) ;}

        db.collection('test', function(err, collection) {
          console.log('Collection...') ;
        });

        db.on("close", function(error){
            console.log("Connection to the database was closed!");
        });
    });
})
}));
io.sockets.on('connection', function (socket) {
store.set('test-sid', {foo:'bar'}, function(err, session) {}) ;
)}; 
```

所有其他变量（快递、服务器等）都已正确初始化，应用程序出现，我在控制台中看到与 mongo 的连接已被接受。有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:40:01.360

您没有将商店存储在变量“商店”中。它被传递到会话配置中并设置为快速应用程序设置。

要解决此问题，您可以创建存储并将其分配给变量，然后将其添加为设置，然后将其传递到会话配置中：

```
// Create the store
var store = new MongoStore(...);

// Pass into session creation
app.set(expression.session({
    store: store
});

// You can now access the store from the variable as you expected
store.set('test-sid', {foo: 'bar'}, function(err, session) {}); 
```

# windows - 尝试在 Windows 上编译时出错

> ID：16197064
> 
> 赞同：2
> 
> 时间：2013-04-24T16:14:00.697
> 
> 标签：windows, compiler-construction, runtime-error, rust

我刚刚下载了 Rust 0.6 并尝试编译 hello world 程序。但是，尝试这样做时出现以下错误：

> 在 rustrt.dll 中找不到过程入口点“_gxx_personality_v0”。

我的 GCC 版本是 4.5.2。根据我在入门页面上阅读的内容，Rust 应该可以在 Windows 上与 GCC 4.5.* 一起使用。我的操作系统是 Win8 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-31T17:30:01.207

[这里](https://github.com/rust-lang/rust/issues/7953)有关于这个错误的更多信息。当 Rust在 2013 年 8 月[添加对 mingw-w64](https://github.com/rust-lang/rust/pull/8488)的支持时，此问题已得到修复。Rust 1.0 及更高版本不受影响。

# yeoman - 构建应用程序时 Yeoman 供应商图像路径不正确

> ID：16197069
> 
> 赞同：7
> 
> 时间：2013-04-24T16:14:15.777
> 
> 标签：yeoman, gruntjs, bower

我正在使用 Yeoman 开发 AngularJS 应用程序。

该应用程序依赖于与 Bower 一起安装的 jQuery UI。这就是我包含 jQuery UI 主题的方式：

```
<!-- build:css styles/plugins.css -->
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.core.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.accordion.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.autocomplete.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.button.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.datepicker.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.dialog.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.menu.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.progressbar.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.resizable.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.selectable.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.slider.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.spinner.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.tabs.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.tooltip.css" />
<link rel="stylesheet" href="components/jquery.ui/themes/base/jquery.ui.theme.css" />
<!-- endbuild --> 
```

构建应用程序时，一切顺利，没有错误。

但是，在浏览器控制台（使用 Chrome）中，我可以看到无法找到 jQuery UI Datepicker 所需的图像，因为它看起来在里面`styles/images/`，它们实际上在里面`components/...`。

**截屏**

![源图片网址](https://i.stack.imgur.com/sHwAz.png)

我的第一个想法是在 CSS 中覆盖 jQuery UI 图像路径，但这似乎不是最好的解决方案。例子：

**原创造型**

```
.ui-state-error .ui-icon,
.ui-state-error-text .ui-icon {
    background-image: url(images/ui-icons_cd0a0a_256x240.png)/*{iconsError}*/;
} 
```

**我的覆盖**

```
.ui-widget-header .ui-state-error {
    background-image: url(../components/jquery.ui/themes/base/images/ui-bg_glass_95_fef1ec_1x400.png);
} 
```

有什么推荐的解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-06T22:08:29.803

我有同样的问题。但我没有更改 jQuery CSS（这可能对未来的更新有害......），而是调整了 grunt 脚本 (Gruntfile.js) 中的“imagemin”任务，以便将图像复制到预期的位置。这对于任何第三方库都是如此，只要 grunt 负责修改缩小 css 中的图像路径。

这是我所做的更改​​（请注意我的jQuery UI主题文件夹位于该`app\styles`文件夹下）

前 ：

```
imagemin : {
    dist : {
        files : [{
                expand : true,
                cwd : '<%= yeoman.app %>/images',
                src : '{,*/}*.{png,jpg,jpeg}',
                dest : '<%= yeoman.dist %>/images'
            }
        ]
    }
} 
```

后 ：

```
imagemin : {
    dist : {
        files : [{
                expand : true,
                cwd : '<%= yeoman.app %>/images',
                src : '{,*/}*.{png,jpg,jpeg}',
                dest : '<%= yeoman.dist %>/images'
            }, {
                expand : true,
                flatten : true,
                cwd : '<%= yeoman.app %>/styles',
                src : '**/*.{png,jpg,jpeg,gif}',
                dest : '<%= yeoman.dist %>/styles/images'
            }
        ]
    }
} 
```

希望这可以帮助 ！

# iphone - ALAssets 获取视频数据

> ID：16197076
> 
> 赞同：3
> 
> 时间：2013-04-24T16:14:35.817
> 
> 标签：iphone, ios, crash, alassetslibrary

我正在尝试使用以下代码从 ALAssets 库访问视频数据

```
 ALAssetRepresentation *rep = [asset defaultRepresentation];
        Byte *buffer = (Byte*)malloc(rep.size);
        NSError *error = nil;
        NSUInteger buffered = [rep getBytes:buffer fromOffset:0.0 length:rep.size error:&error];
        NSData *data = [NSData dataWithBytesNoCopy:buffer length:buffered freeWhenDone:YES]; 
```

它适用于小视频和图片，但如果我试图获取大视频，代码会崩溃说

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[NSConcreteData initWithBytes:length:copy:freeWhenDone:bytesAreVM:]：荒谬的长度：4294967295，最大大小：2147483648 字节”

我不知道发生了什么。有人有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T18:56:38.053

[chilitechno](https://stackoverflow.com/users/406194/chilitechno-com)[在这里](https://stackoverflow.com/questions/5876564/ios-alassetslibrary-and-nsfilehandle-reading-file-contents/5876685#5876685)对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T11:48:39.440

我找到了解决方案。我想崩溃可能是由于我们上传大文件时出现巨大的内存峰值，因为我正在缓冲数据。现在我将文件数据读取为 5 MB 块，这修复了崩溃。我在下面粘贴我的代码。

```
- (NSData *)getDataPartAtOffset:(NSInteger)offset  {
__block NSData *chunkData = nil;
if (fileAsset_){
    static const NSUInteger BufferSize = PART_SIZE; // 5 MB chunk
    ALAssetRepresentation *rep = [fileAsset_ defaultRepresentation];
    uint8_t *buffer = calloc(BufferSize, sizeof(*buffer));
    NSUInteger bytesRead = 0;
    NSError *error = nil;

    @try
    {
        bytesRead = [rep getBytes:buffer fromOffset:offset length:BufferSize error:&error];
        chunkData = [NSData dataWithData:[NSData dataWithBytesNoCopy:buffer length:bytesRead freeWhenDone:NO]];
    }
    @catch (NSException *exception)
    {
        free(buffer);
        chunkData = nil;
        // Handle the exception here...
    }

    free(buffer);
} else {
    NSLog(@"failed to retrive Asset");
}
return chunkData; 
```

}

我将此函数称为

```
 int offset = 0; // offset that keep tracks of chunk data

  do {
        @autoreleasepool {
            NSData *chunkData = [self getDataPartAtOffset:offset];;

            if (!chunkData || ![chunkData length]) { // finished reading data
                break;
            }

            // do your stuff here

            offset +=[chunkData length];
        }
    } while (1); 
```

# delphi - 我使用Delphi调用DLL但仍然有错误

> ID：16197077
> 
> 赞同：2
> 
> 时间：2013-04-24T16:14:40.103
> 
> 标签：delphi, pinvoke, delphi-2010

这是调用代码

```
unit CY;

interface
uses windows;
type

 TMember_Rd = Record
    iID: integer;
    sCode: Array[0..255] of char;
    sName: Array[0..255] of char;
  end;

  PTMember_Rd = ^TMember_Rd;

function GetMember(sStore, sMachine: PChar; const sTrack, sCode, sVerify: PChar; 
  Member: PTMember_Rd; sError: PChar): Integer; stdcall; external 'Interface.dll';

implementation

end. 
```

我需要调用 GetMember 函数并将数据填充到 Member 中，如果有任何错误，我可以从 sError 获取消息。

我如何调用这个函数？

我不熟悉德尔福；我认为我的错误在于指针。

以下是我的 c# 代码工作

```
using System;
using System.Collections.Generic;
using System.Runtime.InteropServices;
using System.Text;

namespace JFTest
{
    public class JFService
    {
        [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
        public struct PTMember_Rd
        {
            public Int32 id;

            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]
            public string sCode;

            [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]
            public string sName;
        }

        [DllImport("Interface.dll", CharSet = CharSet.Ansi, CallingConvention = CallingConvention.StdCall)]
        public static extern int GetMember(StringBuilder sStore, StringBuilder sMachine, StringBuilder sTrack, StringBuilder sCode, StringBuilder sVerify, ref PTMember_Rd Member, [MarshalAs(UnmanagedType.LPStr)] string sError);

    }
} 
```

而且我没有其他代码，dll是客户发送给我的，他们没有源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:11:56.757

我认为您的 p/invoke 代码是错误的。你说`Member`和`sError`是输出参数，其他参数是输入。在这种情况下，p/invoke 应该是：

```
[DllImport("Interface.dll", CharSet=CharSet.Ansi)]
public static extern int GetMember(
    string sStore, 
    string sMachine, 
    string sTrack, 
    string sCode, 
    string sVerify, 
    ref PTMember_Rd Member, 
    StringBuilder sError
); 
```

假设这是正确的，Delphi 应该如下所示：

```
type
  TMember_Rd = Record
    iID: integer;
    sCode: Array[0..255] of AnsiChar;
    sName: Array[0..255] of AnsiChar;
  end;

function GetMember(
  sStore: PAnsiChar;
  sMachine: PAnsiChar;
  sTrack: PAnsiChar;
  sCode: PAnsiChar;
  sVerify: PAnsiChar;
  out Member: TMember_Rd;
  sError: PAnsiChar
): Integer; stdcall; external 'Interface.dll'; 
```

其中`sStore`等`sMachine`是指定输入参数的字符串变量。

我们需要使用一个字节`AnsiChar`和`PAnsiChar`. 您在问题中的代码使用两个字节的 UTF-16`Char`和`PChar`.

你可以这样称呼它：

```
var
  sError: AnsiString;
  Member: TMember_Rd;
  retval: Integer;
....
SetLength(sError, 256);
retval := GetMember(
  PAnsiChar(AnsiString(sStore)),
  PAnsiChar(AnsiString(sMachine)),
  PAnsiChar(AnsiString(sTrack)),
  PAnsiChar(AnsiString(sCode)),
  PAnsiChar(AnsiString(sVerify)),
  Member,
  PAnsiChar(AnsiString(sError))
); 
```

`sError`我不知道需要制作多大的字符串。如果您没有任何文档，则无法找到。最好让它变大并希望最好。如果你没有使它足够大，并且函数尝试写入该缓冲区，那么你有缓冲区溢出。

我假设该`Member`参数具有纯语义，因为这就是您所说的。如果您需要在使用部分或全部字段时传递数据，请将其更改为`var`并相应地初始化记录。

# ruby - 如何将方法或 lambda 转换为非 lambda proc

> ID：16197082
> 
> 赞同：8
> 
> 时间：2013-04-24T16:15:00.593
> 
> 标签：ruby, lambda, proc

如下面的 ruby​​ 示例所示，我不能使用从 a 创建的`lambda`错误数量的参数调用 a，因为它对参数的数量非常严格：`Proc``Method`

```
# method with no args
def a; end

instance_eval(&method(:a))
# ArgumentError: wrong number of arguments (1 for 0)

method(:a).to_proc.call(1, 2, 3)
# ArgumentError: wrong number of arguments (3 for 0)

method(:a).to_proc.lambda?
# => true 
```

如何从 a that is 或从 a获得`Proc`不是 lambda 的a ？`Proc``Method`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:31:58.633

没有办法做到这一点。

除了参数传递之外，我想知道您`return`对方法中的 a 有什么期望。它只能以`lambda`某种方式表现...

如果您真的必须这样做，您将需要构建自己的块，例如

```
Proc.new{ a } 
```

对于更通用的方式，您必须检查`arity`该方法并仅传递所需的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T05:40:02.883

尝试将其包装在非 lambda`Proc`中，如下所示：

```
l = lambda {|a,b| puts "a: #{a}, b: #{b}" }
p = proc {|a,b| l.call(a,b) }

l.lambda?
#=> true
l.arity
#=> 2
l.call("hai")
#=> ArgumentError: wrong number of arguments (1 for 2)
l.call("hai", "bai", "weee", "womp", "woo")
#=> ArgumentError: wrong number of arguments (5 for 2)

p.lambda?
#=> false
p.arity
#=> 2
p.call("hai")
#=> a: hai, b: 
p.call("hai", "bai", "weee", "womp", "woo")
#=> a: hai, b: bai 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T07:03:16.687

# 转换`Lambda`为`Proc`

这是一种将 a`lambda`或 a`method`调用包装在 a 中`Proc`并使用 splat 处理任意数量的参数的解决方法：

```
def lambda_to_proc(lambda)
  Proc.new do |*args|
    diff = lambda.arity - args.size
    diff = 0 if diff.negative?
    args = args.concat(Array.new(diff, nil)).take(lambda.arity)

    lambda.call(*args)
  end
end 
```

无论传递多少参数，这总是有效的；额外的参数将被删除并`nil`替换缺少的参数。

* * *

**例子：**

```
# lambda with two args
some_lambda = -> (a,b) { [a, b] }

# method with no args
def some_method; "hello!"; end

lambda_to_proc(some_lambda).call(5)
# => [5, nil]

lambda_to_proc(method(:some_method)).call(1,2,3)
# => "hello!" 
```

* * *

^(***注意：****没有直接的方法可以将 lambda 或方法调用转换为 proc。这只是一种解决方法，显然比真正的交易慢（因为将一个电话包装在另一个电话中）。*)

# java - 在 Android 中解析 HTML

> ID：16197087
> 
> 赞同：1
> 
> 时间：2013-04-24T16:15:10.767
> 
> 标签：java, android, html, parsing, html-parsing

我有看起来像的 html 代码

```
<td align="right"><select name="Hour">
<option >00</option>
<option >01</option>
<option >02</option>
<option >03</option>
<option >04</option>
<option >05</option>
<option >06</option>
<option selected>07</option>
<option >08</option>
<option >09</option>
<option >10</option>
</select>&nbsp;&nbsp;:
</td> 
```

我解析的 HTML 包含几个这样的代码块，只有`<select name="Hour">`标签不同。所以作为输入，我只有标签的名称。作为输出，我需要获取**所选**选项的值。有人可以给我一个提示或帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:55:05.980

你至少有几个选择。最好看[Android HTML Parser Example](https://stackoverflow.com/questions/5867746/android-html-parser-example)

如果不是这些库中的任何一个，也许尝试将其解析为 XML？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T12:34:34.383

```
private String getDateComponentFromHTML(String componentName, String html) {
    String dateComponent = null;
    Pattern p = Pattern.compile("<select name=\"" + componentName + "\".*?<.*?selected.*?\\(d{2})");
    Matcher m = p.matcher(html);
    if (m.find()) {
        dateComponent = m.toMatchResult().group(1);
    }
    return dateComponent;
} 
```

# android - 为什么自定义控件会抛出 NullPointerException？

> ID：16197090
> 
> 赞同：0
> 
> 时间：2013-04-24T16:15:17.553
> 
> 标签：android, nullpointerexception

这是 activity_main.xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layoutRoot"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/L1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical" >

        <Button
            android:id="@+id/addButton"
            android:layout_width="74dp"
            android:layout_height="wrap_content"
            android:text="Add" />

        <EditText
            android:id="@+id/newEditText"
            android:layout_width="174dp"
            android:layout_height="wrap_content"
            android:layout_weight="3.24"
            android:ems="10"
            android:inputType="text" />
    </LinearLayout>

    <ListView
        android:id="@+id/List"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >
    </ListView>    
</LinearLayout> 
```

这是名为 second.xml 的自定义复合控件的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/jokeView"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/expandButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="0.44" 
                android:text = "One Click"/>

            <TextView
                android:id="@+id/txtView"
                android:layout_width="253dp"
                android:layout_height="wrap_content"
                android:layout_weight="0.56"
                android:ems="10" 
                android:text = "LOL This is a sample code"/>    
        </LinearLayout>

        <RadioGroup
            android:id="@+id/ratingRadioGroup"
            android:layout_width="321dp"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <RadioButton
                android:id="@+id/likeButton"
                android:layout_width="145dp"
                android:layout_height="wrap_content"
                android:checked="true"
                android:text="Like" />

            <RadioButton
                android:id="@+id/dislikeButton"
                android:layout_width="147dp"
                android:layout_height="wrap_content"
                android:text="Dislike" />
        </RadioGroup>
</LinearLayout> 
```

这是扩展 second.xml 的 java 文件：

```
public class Second extends View
{
    private Button mExpandButton;
    private RadioButton mLikeButton;
    private RadioButton mDislikeButton;
    private TextView mText;
    private RadioGroup mLikeGroup;
    private ViewGroup vGroup;

    OnClickListener myClickListener = new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            String s= mExpandButton.getText().toString();

            if (s.equals("One Click"))
                mExpandButton.setText("Other Click");
            else
                mExpandButton.setText("One Click");
        }
    };

    OnCheckedChangeListener myCkeckListener = new OnCheckedChangeListener()
    {
        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId)
        {
            if (mLikeButton.isChecked())
                mText.setText("I Like it");

            if (mDislikeButton.isChecked())
                mText.setText("I Don't Like it");
        }
    };

    public Second(Context context) 
    {
        super(context);
        mExpandButton = (Button) this.findViewById(R.id.expandButton);
         mText = (TextView)this.findViewById(R.id.txtView);
        mLikeGroup = (RadioGroup)this.findViewById(R.id.ratingRadioGroup);
        mExpandButton.setOnClickListener(myClickListener);
        mLikeGroup.setOnCheckedChangeListener(myCkeckListener);
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.second, null);
     }
  } 
```

最后，这是 activity_main.xml 的 java 代码：

```
public class MainActivity extends Activity 
{
    protected ListView mLayout;
    protected EditText mEditText;   
    protected Button mButton;   

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);        

        mLayout = (ListView)findViewById(R.id.List);
        mEditText = (EditText)findViewById(R.id.newEditText);
        mButton = (Button)findViewById(R.id.addButton); 

        for (int i =0; i< 4; i++)
        {
            Second sec = new Second(this);
            mLayout.addView(sec);
                setContentView(sec);
        }   
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

这是生成的 logcat（更新。我的包的名称是 nullextry）：

```
04-24 16:33:30.072: E/AndroidRuntime(1759): FATAL EXCEPTION: main
04-24 16:33:30.072: E/AndroidRuntime(1759): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.nullextry/com.example.nullextry.MainActivity}: java.lang.NullPointerException
04-24 16:33:30.072: E/AndroidRuntime(1759):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at android.os.Looper.loop(Looper.java:137)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at java.lang.reflect.Method.invoke(Method.java:511)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at dalvik.system.NativeStart.main(Native Method)
04-24 16:33:30.072: E/AndroidRuntime(1759): Caused by: java.lang.NullPointerException
04-24 16:33:30.072: E/AndroidRuntime(1759):     at com.example.nullextry.Second.<init>(Second.java:58)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at com.example.nullextry.MainActivity.onCreate(MainActivity.java:31)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at android.app.Activity.performCreate(Activity.java:5104)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-24 16:33:30.072: E/AndroidRuntime(1759):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-24 16:33:30.072: E/AndroidRuntime(1759):     ... 11 more
04-24 16:33:30.192: D/dalvikvm(1759): GC_CONCURRENT freed 110K, 9% free 2858K/3112K, paused 79ms+5ms, total 232ms
04-24 16:33:32.793: I/Process(1759): Sending signal. PID: 1759 SIG: 9 
```

在调试的时候，我发现在 second.java 构造函数中对 second.xml 进行了膨胀之后抛出了这个异常，这里的监听器被分配给了各自的控件。我错过了什么吗？我不是宣布了什么吗？

愚蠢的错误：我没有声明 mExpandButton 和 mLikeGroup。我修复了 second.java 代码，（感谢 ZouZou！）。但是我遇到了同样的异常（logcat 已经更新）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:18:39.090

您忘记在构造函数中初始化 `mExpandButton`和 `mLikeGroup`。

所以当你在做的时候：

```
mExpandButton.setOnClickListener(myClickListener);  

mLikeGroup.setOnCheckedChangeListener(myCkeckListener); 
```

它抛出一个`NPE`.

也不要忘记初始化

```
mLikeButton;
mDislikeButton;
mText; 
```

别的

```
 if (mLikeButton.isChecked())
                mText.setText("I Like it");

            if (mDislikeButton.isChecked())
                mText.setText("I Don't Like it"); 
```

也会扔`NullPointerExceptions`。

**编辑 ：**

您正在尝试在扩展布局之前分配按钮。改为尝试：

```
public Second(Context context) 
    {
        super(context);
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = inflater.inflate(R.layout.second, null);
        mExpandButton = (Button) v.findViewById(R.id.expandButton);
         mText = (TextView)v.findViewById(R.id.txtView);
        mLikeGroup = (RadioGroup)v.findViewById(R.id.ratingRadioGroup);
        mExpandButton.setOnClickListener(myClickListener);
        mLikeGroup.setOnCheckedChangeListener(myCkeckListener);
     } 
```

# mysql - 如何用 JOIN 重写这条语句，使其更快？

> ID：16197091
> 
> 赞同：0
> 
> 时间：2013-04-24T16:15:19.740
> 
> 标签：mysql, sql, performance

我有一个 mySQL 查询，它正在工作，但是当涉及到 160 万次执行时，它不能满足我需要的性能，因为不断地重新执行`NOT EXIST(new query)`

```
INSERT INTO `votes` (`representatives_rID`, `events_eID`, `voteResult`) 
SELECT `representatives`.`rID`,`events`.`eID`,? 
FROM `representatives`, `events` 
WHERE `events`.`eventDateTime` = ? 
AND `representatives`.`rID` = ? 
AND NOT EXISTS (SELECT * FROM `votes` 
                WHERE `votes`.`representatives_rID` = `representatives`.`rID` 
                AND `votes`.`events_eID` = `events`.`eID`); 
```

在示意图中：

```
if (input one is in `representatives` AND input two is in `events` AND there is no row in `votes` that contains ( `votes`.`representatives_rID` = `representatives`.`rid` and `votes`.`events_eID` = `events`.`eID)) {
    insert a row into votes containing `eid` from `events` and `rid` from `representatives` and input three;
} 
```

有没有办法让这个更快，可能加入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:25:29.483

```
INSERT IGNORE INTO votes 
(representatives_rID
,events_eID
,voteResult
) 
SELECT r.rID
     , e.eID
     , ?
  FROM representatives r 
 CROSS
  JOIN events e
    ON e.eventDateTime = ? 
   AND r.rID = ?; 
```

?

# scala - 如何从 Scala Iterable 中获取不同的项目，保持惰性

> ID：16197092
> 
> 赞同：10
> 
> 时间：2013-04-24T16:15:21.547
> 
> 标签：scala, collections, lazy-evaluation

我有一个`java.lang.Iterable`懒惰地计算它的值。我正在从 Scala 访问它。是否有只返回不同值的核心 API 方式？例如，成像有一个过滤器方法，它还提供了迄今为止返回的所有结果：

```
val myLazyDistinctIterable = iterable.filter((previousReturnedItems, newItem) => previousReturnedItems.contains(newItem)) 
```

我想这不是一个非常普遍的情况，因为它涉及存储以前返回的项目，这可能就是它不在核心 API 中的原因。

我知道`List.distinct`and `Set`s 但我想要一些在被问到之前不会计算其元素的东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T16:31:04.753

您可以使用上的`distinct`方法[`Stream`](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Stream)。例如，如果你有这个`Iterable`：

```
val it = new java.lang.Iterable[Int] {
  def iterator = new java.util.Iterator[Int] {
    var i = 0
    var first = true

    def hasNext = true
    def next =
      if (first) { first = false; i } else { first = true; i += 1; i - 1 }
    def remove() { throw new UnsupportedOperationException("Can't remove.") }
  }
} 
```

你可以写：

```
scala> import scala.collection.JavaConverters._
import scala.collection.JavaConverters._

scala> val s = it.asScala.toStream
s: scala.collection.immutable.Stream[Int] = Stream(0, ?)

scala> s.take(10).toList
res0: List[Int] = List(0, 0, 1, 1, 2, 2, 3, 3, 4, 4)

scala> val s = it.asScala.toStream.distinct
s: scala.collection.immutable.Stream[Int] = Stream(0, ?)

scala> s.take(10).toList
res1: List[Int] = List(0, 1, 2, 3, 4, 5, 6, 7, 8, 9) 
```

我们可以说一切都是适当的惰性，因为流是无限的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-24T16:28:38.997

**更新**仔细阅读问题是好的。这个解决方案没有懒惰。对不起。

`toSet`会做你想做的事：

1.  将迭代的元素存储在集合中（不是您想要的，但需要）
2.  删除/替换重复项

例子

```
val it = Seq(1,2,3,4,2,4): Iterable[Int]
it.toSet
// Set(1,2,3,4) 
```

如果您觉得花哨，可以将其转换回可迭代的：

```
it.toSet.toIterable 
```

或者，拉皮条`Iterable`：

```
implicit class UniquableIterable[T](t: Iterable[T]) {
  def unique = t.toSet.toIterable
} 
```

然后打电话

```
it.unique 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-06T19:49:36.643

这是将`.disctinct`方法添加到`Iterator`.

```
implicit class IteratorWrapper[T](it: Iterator[T]) {
    def distinct = new Iterator[T] {
        var seen = Set.empty[T]
        var ahead = Option.empty[T]

        def searchAhead {
            while (ahead.isEmpty && it.hasNext) {
                val v = it.next
                if (!seen(v)) {
                    seen += v
                    ahead = Some(v)
                }
            }
        }

        def hasNext = {
            searchAhead
            ahead.nonEmpty
        }

        def next = {
            searchAhead
            val result = ahead.get
            ahead = None
            result
        }
    }
} 
```

请注意，与迭代器通常一样，原始迭代器在调用后无效`.distinct`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T20:37:29.103

扩展我上面的评论，但我现在无法测试它：

```
def unique[A](it: Iterator[A]): Iterator[A] = {
  val seen = mutable.Set[A]()
  it.filter { a =>
    if (seen(a))
      false
    else {
      seen += a
      true
    }
  }
} 
```

至少你明白了。然后，您会将其应用于从可迭代对象中获得的迭代器，而不是获得不必要的`Stream`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T16:43:24.963

这应该可以完成工作（但我讨厌）：

```
class UniqueIterable[T](i: Iterable[T]) extends Iterable[T] {
  import scala.collection.mutable.Set
  def iterator = new Iterator[T] {
    val it = i.iterator
    var nextE: Option[T] = None
    val seen: Set[T] = Set.empty
    def hasNext = {
      popNext()
      nextE.isDefined
    }
    def next = {
      popNext()
      val res = nextE.get
      nextE = None
      res
    }

    @tailrec
    private def popNext() {
      if (nextE.isEmpty && it.hasNext) {
        val n = it.next
        if (seen contains n) popNext()
        else {
          seen += n
          nextE = Some(n)
        }
      }
    }
  }
} 
```

# couchdb - 如何自动更新字段

> ID：16197093
> 
> 赞同：1
> 
> 时间：2013-04-24T16:15:23.627
> 
> 标签：couchdb

在我的 CouchDB 数据库中，我希望所有文档在更改时都添加一个“updated_at”时间戳（并强制执行）。

*   我无法使用`validation`函数修改文档
*   `updates`除非专门调用函数，否则它们不会运行（因此可以更新文档而不调用特定的更新函数）

我应该如何实施呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:50:48.450

如果不触发`_update`处理程序，现在就无法做到这一点。这是跟踪文档更改时间的好主意，但它面临复制问题。

复制工作在公共 API 之上，这意味着：

1.  如果强制执行此类触发器，您将破坏复制，因为在没有文档修改的情况下将无法同步数据。由于文档被修改，他会收到新的修订，如果您以连续模式将数据从数据库 A 复制到 B 和 B 到 A，则很容易导致死循环。
2.  在其他情况下，当复制被修复时，总会有办法解决您的触发器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T17:13:15.983

我可以建议一种解决方法 - 您可以创建一个将当前日期作为键（或其一部分）发出的视图：

```
function( doc ){
  emit( new Date, null );
} 
```

这将在视图生成被触发后立即将当前日期分配给所有文档（这发生在第一次请求它之后），并将在每次更新特定文档时重新分配新日期。

*尽管以上内容应该可以解决您的问题，但由于Kxepal*已经解释过的原因，我建议您不要使用它：如果您在复制网络上，每个节点都会分配自己的日期。因此，考虑到这一点，我能推荐的最好方法是在客户端解决问题，然后发布已嵌入日期的文档。

# ruby - 在类定义上调用 object_id 有什么作用？

> ID：16197096
> 
> 赞同：1
> 
> 时间：2013-04-24T16:15:26.143
> 
> 标签：ruby

我正在玩一些 ruby​​ 代码并执行以下操作：

```
1.9.3-p392 :012 > class Mx; self; end.object_id
 => 70263149976460 
1.9.3-p392 :013 > class Mx; end.object_id
 => 4 
```

我认为第一个示例在执行代码时返回了对该类的真实引用，但是第二个示例中发生了什么？什么是4？有趣的是，如果它返回 NilClass

```
1.9.3-p392 :017 > class Mx; end.class
 => NilClass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:22:52.393

类定义是一个表达式。所有表达式都计算为一个值。为了：

`class Foo; end`该值为`nil`。

在类定义（和其他块）中，ruby 返回块中最后一个表达式的值。如果块为空，则返回值为 nil。

`class Foo; "BLAH"; end # => "BLAH"`

这里`self`是对引入的类的引用`class Foo`。

`class Foo; self; end # => Foo`

`nil`是一个单例“对象”，它有一个`.class`=> `NilClass`。

“4”是`.object_id`的`nil`。在您的解释器中，您可以执行`nil.object_id`. 顺便说一句，对象 ID 是特定于实现的，您不能依赖`nil.object_id == 4`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:19:27.967

`class Mx; end`返回`nil`，所以这就是你观察到的。

相反`class Mx; self; end`返回类`Mx`本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:55:36.140

类定义表达式计算为类定义中最后一个表达式的值。在第二种情况下，类定义中*没有任何内容*，因此类定义评估为 Ruby 的虚无表示，即`nil`.

在第一种情况下，类定义中的最后一个（也是唯一的）表达式是`self`，它是对应于当前对象的特殊伪变量，并且在类定义中是类对象本身。（请记住，类是对象，就像任何其他对象一样。）

# git - 如何将修改后的提交消息推送到远程

> ID：16197102
> 
> 赞同：0
> 
> 时间：2013-04-24T16:15:36.933
> 
> 标签：git, message, commit, git-push

[我关注了这个关于如何修改提交消息的](https://stackoverflow.com/questions/179123/how-do-i-edit-an-incorrect-commit-message-in-git)线程。

进展顺利。但是在之前的提交中，我也将更新推送到了远程。现在，一旦我更改了提交消息，它就会拒绝远程推送。它说`filed to push refs`。

我尝试了上述线程中评论之一的命令。

```
git push -f origin branchname 
```

它似乎也不起作用。还有其他想法吗？如果它不起作用，我想将修改后的提交消息回滚为原始消息。

# c# - 如何让 EF 生成更好的多对多键名

> ID：16197107
> 
> 赞同：1
> 
> 时间：2013-04-24T16:16:02.713
> 
> 标签：c#, entity-framework, t4

我有以下数据库架构： ![在此处输入图像描述](https://i.stack.imgur.com/6q8DC.png)

简而言之，它是一个交叉引用。“A”部分可以交叉引用许多目标部分。

EF 像这样生成 PartCrossReference

```
public partial class PartCrossReference
{
    public int SourcePartId { get; set; }
    public int TargetPartId { get; set; }
    public string CrossType { get; set; }
    public string Source { get; set; }
    public virtual Part Part { get ; set; }
    public virtual Part Part1 { get ; set; }
} 
```

我认为“Part”和“Part1”不是交叉引用`Part`对象的合适名称。它们应该是“SourcePart”和“TargetPart”，就像键一样。我该怎么做，如果它是 T4 模板，希望你能具体一点，因为这似乎是更深的水。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:18:19.090

这在过去对我有用：

```
public partial class PartCrossReference
{
    public int SourcePartId { get; set; }
    public int TargetPartId { get; set; }
    public string CrossType { get; set; }
    public string Source { get; set; }
    public virtual Part Part { get ; set; }
    public virtual Part Part1 { get ; set; }
}

ClassExtend:("^/partial/*").Generate(); 
```

# c - 为共享库文件 (*.so) 生成头文件 (*.h)

> ID：16197109
> 
> 赞同：7
> 
> 时间：2013-04-24T16:16:23.620
> 
> 标签：c, linux, gcc

我有共享库文件 ( `libmylib.so`)，但没有头文件 ( `mylib.h`)。

你知道一些从共享库文件生成这个头文件的方法/工具吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-27T10:05:50.480

这通常是不可能的，因为 .so 文件不包含有关参数列表的足够信息 - 特别是在使用非标准类型（例如结构）时，因为类型信息不是 .so 文件的一部分。

即使只使用标准类型，参数列表也不是 ELF 符号表的一部分（参见[http://refspecs.linuxbase.org/elf/elf.pdf](http://refspecs.linuxbase.org/elf/elf.pdf) 1-15ff。）。

但是，如果库没有被剥离（= 它包含调试信息），则 DWARF 部分确实包含有关参数列表的信息，请参阅[如何从 elf 文件中提取函数原型？](https://stackoverflow.com/questions/22500296/how-to-extract-function-prototypes-from-an-elf-file)详情。

# php - 如何在特定时间运行 PHP FILE 并自动更新数据库字段

> ID：16197111
> 
> 赞同：0
> 
> 时间：2013-04-24T16:16:26.133
> 
> 标签：php, mysql

我是 php/mysql 的新手。在到处搜索之后我在这里问：我的客户为我提供了一个 txt 文件，现在我需要一个脚本来频繁运行，以便 txt 新数据文件将运行并同时更新数据库。

我读过的一个选项是 Cron，但我的客户拒绝了这个解决方案，所以我只能使用基于 PHP（或者，如果可能的话，ajax 或 jquery）的解决方案。

到目前为止我的代码：

```
<?php
$string = file_get_contents("mytest.php/test1.txt", "r");
$myFile = "E:/path/test.txt";
$fh = fopen($myFile, 'w') or die("could not open: .mysql_error());
fwrite($fh,$string);
fclose($fh);

// Here is the connection file
$sql=mysql_connect("localhost","root","");
if(!$sql) {
  die("couldnotconnect:", . mysql_error());
}
mysql_select_db("timer"); // databse name
$result=mysql_query("LOADDATAINFILE'$myFile'" ."INTOTABLEchangedtFieldsTERMINATEDBY''");
if (!$result) {
  die("couldnotload . " . mysql_error());
}
?> 
```

但是这段代码不能正常工作。基本上只是另一个文本文件，我只想更新我的数据库，例如：

```
Database Field:

Name (varchar 250)
LastModification timestamp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:31:39.153

您的客户需要了解 cron 是解决此问题的正确方法。如果您的脚本需要定期运行，cron 是完成它的方法。

如果你无法说服他，还有另外两个不太理想的选择。第一个是让你的脚本一直[运行](https://stackoverflow.com/questions/2036654/run-php-script-as-daemon-process)而不退出。它将休眠一段时间，然后醒来，检查当前时间是否与预定的运行时间匹配，并采取相应的行动。

第二种是利用在线调度服务在指定时间通过 HTTP 请求执行您的脚本。在线调度服务将在后台使用 cron，但您的客户不需要知道这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:30:53.563

您不一定需要在网络服务器上运行计划任务/CRON。您可以在您的网络服务器上拥有 PHP 文件，并在另一台调用 PHP 脚本（通过 HTTP GET 或 SSH 终端）的机器上拥有计划任务或 cron 脚本，这将解决您的问题。

您还可以在 2 个不同的客户端上安排此调用以实现冗余，并将标志（当天）设置为 true，以保证 PHP 脚本每天只运行一次。

当我的意思是标志时，我的意思是数据库行、文件中的值或任何其他方式来检查该脚本是否已在当天运行。

# c# - 使用 Linq 从查询中返回项目数及其结果集

> ID：16197115
> 
> 赞同：3
> 
> 时间：2013-04-24T16:16:43.203
> 
> 标签：c#, asp.net-mvc, linq

我将 C# MVC4 与 Linq 一起使用。

我为我的项目使用了依赖注入，这导致我拥有一个单独的模型项目以及一个单独的存储库项目（以及一个用于测试等）。这一切都没有问题。

我将查询从控制器（旧样式）移到存储库（新 DI 样式）中，然后注入它们。它工作正常。

我有一个标准的 linq 查询（选择任何示例，它们都足够基本），它照常从数据库中返回一组项目。这里也没有问题。

我的问题是，我想实现分页，而且我教它很简单。这是我的步骤：

从存储库中获取 linq 查询的结果（注入到控制器中）将其存储在 var 中。它看起来像：

```
var results = _someInjectedCode.GetListById(SomeId); 
```

之前，我可以做一些简单的事情，比如：

```
results.Count()
results.Skip(SomeNum).Take(SomeOtherNum) 
```

但是现在我想要分页，我需要做我的 Skip Take 像这样的事情：

```
var results = from xyz in _someInjectedCode.GetListById(SomeId).SomeId).Skip(SomeNum).Take(SomeOtherNum)
select new[] {a,id, a.fName, a.lName .....} 
```

这样做的问题是，在列表缩短到 Pre Skip...Take 状态之前，我不再有权访问项目的总数，除非我执行两个查询，这意味着两次访问数据库。

解决此问题的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:23:25.577

从 SQL 的角度考虑，我想不出在单个普通查询中同时检索总计数和数据子集的方法，所以我认为您无法做到LINQ 也可以。

为了避免创建两个单独的命令，我唯一能想到的是一个存储过程，它返回两个表（一个只有计数，另一个带有结果子集）。它仍然会执行两个查询，但在一个连接中。你会失去你的LINQ。因此，如果您想保留您的 LINQ 查询，您可能会被困在进行两个单独的调用。

另一种方法是将整个未分页的结果集检索到内存中，然后对数组运行`Take`和运行`Skip`，但这非常浪费，可能比两次调用更糟糕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:42:13.097

我只是这样做：

```
var result = (from n in mycollection 
              where n.someprop == "some value" 
              select n).ToList();
var count = result.Count; 
```

可能还有其他方法，但这是我所知道的最简单的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:35:07.027

您可以向存储库接口/类添加其他参数，这些参数将提供分页参数并在结果旁边返回计数，或者修改接口以返回 IQueryable，然后应用计数，然后在编译查询并发送执行之前跳过/获取。

# java - eclipse更新后Android崩溃了

> ID：16197118
> 
> 赞同：0
> 
> 时间：2013-04-24T16:16:52.523
> 
> 标签：java, android, eclipse, windows-7

我更新了eclipse，然后android开始给出错误`Please ensure that adb is correctly located at 'C:\Users\Christian\AppData\Local\Android\android-sdk\platform-tools\adb.exe' and can be executed.`adb.exe实际上是在那个位置并且可以执行。我尝试在该位置重新安装 android sdk，并重新安装 android eclipse 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:31:52.433

由于我还不能发表评论，我将与您分享一些来自其他线程的回复：

*   终止位于任务管理器中的**adb.exe进程，然后重新启动 Eclipse。**

如果它不起作用，请尝试在设备中重置 adb。清理项目可能也会有所帮助。

# objective-c - 为什么给任何图层添加阴影太重？使用 QuartzCore

> ID：16197121
> 
> 赞同：0
> 
> 时间：2013-04-24T16:16:57.033
> 
> 标签：objective-c, uiview, shadow, quartz-core

为什么给任何图层添加阴影太重？

我试图给我的 UIView 添加一个阴影，它只在这个屏幕上很重。

为什么这么重？我找到的唯一解决方案是在 PNG 中添加阴影图像进行模拟，比使用 QuartzCore 创建阴影更轻。

有什么解决方案更轻吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:14:32.990

使用以下函数为任何控件（如按钮、标签、文本字段或视图）提供阴影，只需将该控件传递给此函数

```
 - (void)setShadowOnView:(UIView)aView
    {
        CALayer *layer = aView.layer;
        layer.masksToBounds = NO;
        layer.shadowColor = [[UIColor blackColor] CGColor];//change is to set color of shadow
        layer.shadowOpacity = 1.f;//change is to set alpha of shadow
        layer.shadowOffset = CGSizeMake(-2.5f, 0.f);//change is to set size of shadow
        layer.shadowRadius = 5.f;//change is to set radios of shadow
        layer.shadowPath = [[UIBezierPath bezierPathWithRect:aView.bounds] CGPath];
    } 
```

尝试根据您的喜好和要求设置属性..

享受编码......

# .net - DBlink(s) 哪个更安全：公共链接还是私有链接？

> ID：16197123
> 
> 赞同：0
> 
> 时间：2013-04-24T16:17:01.040
> 
> 标签：.net, sql, oracle, dblink

我正在尝试考虑使用私有/公共 dblink 的安全问题。

你可以在下面的图片中看到我在说什么

![图片](https://i.stack.imgur.com/WwA3z.png)

那么，如图所示（右边是公开的，左边是私人的）你认为哪一个是安全的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:33:25.363

我建议使用私有数据库链接并为您需要通过数据库链接访问的表创建视图。

因此，如果您有一个数据库 db1，其中用户 user1db1、user2db1 和 user3db1 需要访问另一个数据库 db2 中的 table1，请执行以下操作：

1.  创建用户 linksdb1。
2.  让该用户拥有到 db2 的私有 db 链接。
3.  为 table1@db2 创建一个视图 linksdb1.table1
4.  授予 user1db1、user2db1 和 user3db1 对视图的权限。

有两个原因：

*   安全。通过这样做，您可以完全控制允许哪些用户通过数据库链接访问表，因为他们需要访问视图。
*   可维护性。您不需要在 SQL 中包含 dblink，从 user1db1 的角度来看，他正在访问一个名为 linksdb1.table1 的表，而不是 table1@db2。这样，如果您将表移动到另一个数据库 db3，您只需要更改视图，而不是所有 SQL。

# php - 如何找出此 IPN 请求发送到的文件？

> ID：16197131
> 
> 赞同：0
> 
> 时间：2013-04-24T16:17:26.500
> 
> 标签：php, joomla, paypal-ipn, paypal-subscriptions

我正在从一个插件 IPN 包（Joomla 的 Valanx）转移到一个用 PHP 定制的包。

问题是现有订阅者无法更改IPN地址！我不确定为什么 PayPal 将这个参数永久固定，但这让我们有些头疼。所以现在我们必须在现有的 IPN 接收器中放入一些代码，以将其转发给我们的新接收器 - 以便旧订阅者更新到新系统中。

我找不到我必须修改的文件。它迷失在 Joomla 文件和插件的迷宫中。当前插件使用查询字符串作为接收方地址 `http://mywebsite.com/index.php?option=com_acctexp&task=paypal_subscriptionnotification&Itemid=99999999'`

我的问题是：如何找出要修改哪个文件以将现有 IPN 转发到我们的新系统？

或者也许有人对如何处理这个而不是转发 IPN 有另一个建议（这对我来说似乎相当笨拙）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T02:12:06.090

在正常的 Joomla 下！约定（即，如果扩展是在 MVC 之后编写的），URL 将按如下方式分解。

`option=com_acctexp`- 在前端映射到目录`/components/com_acctexp/`

`task=paypal_subscriptionnotification`是控制器文件之一中方法的名称。然而，根据记忆，Valanx 的 AEC 产品并没有遵循这个惯例。

在现代扩展中，您会看到指示特定文件和在其中调用的`task=controller.method`语法。`controller``method`

您可能会在主目录中的它们`processors`（或称为目录）中找到它。我建议在该目录中查找or文件。`paymentgateways``com_acctexp``paypal.php``paypal_subscriptions.php`

抱歉，我不能说得更具体，因为~~倾销~~取代了该产品已经有几年了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:26:36.020

您应该能够登录您的 PayPal 帐户，并在您的帐户中进入您的 IPN 历史记录。如果您单击过去发送的 IPN 之一，它将为您提供您发送到的 URL。这将告诉您需要修改的文件所在的位置。请记住，IPN 历史只能追溯到 28 天，因此它必须是在过去 28 天内完成的 IPN。

# asp.net-mvc - 是什么导致 asp.net 无法创建/卷影复制错误？

> ID：16197132
> 
> 赞同：26
> 
> 时间：2013-04-24T16:17:38.270
> 
> 标签：asp.net-mvc, visual-studio

在运行我的 asp.net mvc4 项目时，我每天多次收到此错误。我不是在问这意味着什么，或者如何解决它，而是我在做什么来导致它？它真的开始困扰我，如果我可以通过改变我的工作流程来让它消失，我会的。

> 当该文件已存在时，无法创建/卷影复制“<程序集>”。

正如我上面提到的，该项目是一个 MVC4 应用程序。我的工作流程通常是。

*   进行更改（代码或 html）
*   如果是代码，重建项目（使用键盘快捷键 CTRL+SHIFT+B）
*   刷新页面
*   看到恼人的错误
    *   清洁溶液
    *   重建解决方案
    *   刷新页面
*   验证更改
*   转到 10

（无论是否附加调试器，我都会收到错误。）我将永远感谢任何可以告诉我如何避免此错误的人，并会及时发布您的赞美

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-24T16:52:15.120

我也觉得这很烦人。*当您在构建完全*完成之前尝试在浏览器中刷新页面时，似乎会发生这种情况。构建完成后尝试数到三千，然后在浏览器中刷新。创建/卷影副本应该在那时完成。

我也不认为你应该需要“清理解决方案”。我相信重建是一个干净的 + 构建，所以你可能会清理两次。

~~经过一番研究，我还发现[了这个似乎很受欢迎的预构建事件](https://stackoverflow.com/a/15372874/304832)。~~（这个变通方法似乎不起作用，也许它在以前版本的 VS / .NET 框架中起作用）

**更新：替代解决方案**

另一种解决方法是，当您看到 YSOD 时，只需在浏览器中输入不同的 URL 并加载它。然后单击后退按钮并刷新以进入您首先尝试重新加载的页面。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-18T10:02:37.960

导致此错误的原因似乎是在进行卷影复制（说明显而易见的......），即在一个文件夹中生成一个文件，然后读取它以将其复制到其他地方。我认为导致问题的原因是生成或不生成第一个文件，以及何时/如何复制它，无论您的操作是什么。第一个文件（将被影子复制）是否需要重新生成，因此需要重新影子复制？

[这篇文章](http://www.c-sharpcorner.com/blogs/3786/cannot-createshadow-copy-xxx-when-that-file-already-exist.aspx)说：

> 默认情况下，在 ASP.NET 创建的每个 appdomain 上启用卷影复制。加载的程序集将被复制到卷影副本缓存目录，并将从那里使用。使原始文件不被锁定，可以被修改。

他们的解决方法是防止卷影复制。但我个人并不完全理解影子副本在 asp.net 上下文中的作用，也许有人可以澄清禁用它是否有任何不良副作用：

```
<configuration>
    <system.web>
        <hostingEnvironment shadowCopyBinAssemblies="false" />
    </system.web>
</configuration> 
```

[这篇文章](https://stackoverflow.com/questions/7759784/asp-net-cannot-create-shadow-copy-in-production)讨论了禁用索引和/或防病毒，这表明构建项目会生成新文件，而防病毒（或索引服务）会在卷影副本尝试复制完全相同的文件时访问并锁定它们。

我经常收到他的错误，但从未发现我所做的具体操作会导致错误。我进行了代码更改，按 F5（运行/播放按钮），在 Web 浏览器中出现错误，关闭 Web 浏览器，再次按 F5。现在可以了。我不清理，我不重建。但是，在第二次 F5/Run 中，我相信 VS 检测到没有代码更改，因此，可能没有重做卷影副本？或者这次卷影副本的时间略有不同并且它可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-11T15:33:55.867

将新图像添加到我的 Web 项目后，我收到此错误。

在 VS 中，每个图像都有一个名为“复制到输出目录”的属性。我选择了“始终复制”，然后我收到了消息。

我把它改成了“不要复制”——现在它很高兴。

希望对某人有所帮助。

# java - 如何在不是线程的对象上调用 wait() 和 notify() 方法？

> ID：16197135
> 
> 赞同：50
> 
> 时间：2013-04-24T16:17:43.270
> 
> 标签：java, multithreading, wait, notify

如何在不是线程的对象上调用`wait()`和方法？`notify()`这真的没有意义，不是吗？

当然，这一定是有意义的，因为这两种方法可用于所有 Java 对象。有人可以提供解释吗？我无法理解如何使用`wait()`和进行线程之间的通信`notify()`。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-24T16:33:01.390

锁定是关于保护共享数据。

锁在被保护的数据结构上。线程是访问数据结构的事物。锁在数据结构对象上，以防止线程以不安全的方式访问数据结构。

任何对象都可以用作内在锁（与 结合使用的意思`synchronized`）。这样，您可以通过将同步修饰符添加到访问共享数据的方法来保护对任何对象的访问。

`wait`和`notify`方法在被用作锁的对象上调用。锁是一个共享的通信点：

*   当一个拥有锁的线程调用`notifyAll`它时，等待同一个锁的其他线程会得到通知。当一个有锁的线程调用`notify`它时，等待同一个锁的线程之一会得到通知。

*   当一个有锁的线程调用`wait`它时，该线程释放锁并进入休眠状态，直到a）它收到通知，或者b）它只是任意唤醒（“虚假唤醒”）；由于这两个原因之一，等待线程一直停留在调用中等待直到它唤醒，然后线程必须重新获取锁才能退出等待方法。

请参阅有关受[保护块的 Oracle 教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html)， Drop 类是共享数据结构，使用 Producer 和 Consumer 可运行对象的线程正在访问它。锁定 Drop 对象控制线程如何访问 Drop 对象的数据。

线程在 JVM 实现中被用作锁，建议应用程序开发人员避免将线程用作锁。例如，[Thread.join 的文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28long%29)说：

> 此实现使用以 this.isAlive 为条件的 this.wait 调用循环。当线程终止时，将调用 this.notifyAll 方法。建议应用程序不要在 Thread 实例上使用 wait、notify 或 notifyAll。

Java 5 引入了显式锁实现`java.util.concurrent.locks.Lock`。这些比隐式锁更灵活；有类似于等待和通知的方法（等待和信号），但它们是在条件上，而不是在锁上。拥有多个条件可以仅针对等待特定类型通知的那些线程。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-24T16:25:19.883

您可以使用`wait()`和`notify()`来同步您的逻辑。举个例子

```
synchronized (lock) {
    lock.wait(); // Will block until lock.notify() is called on another thread.
}

// Somewhere else...
...
synchronized (lock) {
    lock.notify(); // Will wake up lock.wait()
} 
```

作为班级`lock`成员`Object lock = new Object();`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-01-10T08:45:52.027

想想用一个现实生活中的例子，**洗手间**。当您想在办公室使用洗手间时，您有两种选择来确保在您使用洗手间后没有其他人会来。

1.  锁上洗手间门，这样其他人在尝试打开门时都会知道它是被其他人使用的
2.  去找办公室里的每个人，把他们锁在椅子上（或桌子，或其他任何东西），去洗手间。

你会选择哪个选项？

是的，Javaland 也一样！

所以在上面的故事中，

*   洗手间=您要锁定的对象（只有您需要使用）
*   您的员工同事=您想要阻止的其他线程

所以就像在现实生活中一样，当你有一些私人业务时，你锁定了那个对象。当您完成该对象时，您松开锁！

（是的，是的！，这是对发生的事情的一个非常简单的描述。当然，真正的概念与此略有不同，但这是一个起点）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-24T16:49:17.537

您可以根据需要使用静态`Thread`类方法停止线程一段时间`sleep()`。

```
public class Main {
    //some code here

    //Thre thread will sleep for 5sec.
    Thread.sleep(5000);   
} 
```

如果要停止某些对象，则需要在`syncronized`块内调用此方法。

```
public class Main {

//some code

public void waitObject(Object object) throws InterruptedException {
    synchronized(object) {
        object.wait();
    }
}

public void notifyObject(Object object) throws InterruptedException {
    synchronized(object) {
        object.notify();
    }
} 
```

}

PS如果我理解错了你的问题，我很抱歉（英语不是我的母语）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-24T17:22:57.050

当您将一些代码放在同步块中时：

```
 sychronized(lock){...} 
```

想要执行此块内的任何内容的线程首先获取对象上的锁，并且一次只有一个线程可以执行锁定在同一对象上的代码。任何对象都可以用作锁，但您应该小心选择与范围相关的对象。例如，当您有多个线程向帐户添加某些内容时，它们都有一些代码在块内负责该操作，例如：

```
sychronized(this){...} 
```

然后不会发生同步，因为它们都锁定在不同的对象上。相反，您应该使用帐户对象作为锁。现在考虑这些线程也有从帐户中提取的方法。在这种情况下，可能会出现想取款的线程遇到空帐户的情况。它应该等到有钱后再将锁释放给其他线程以避免死锁。这就是等待和通知方法的用途。在此示例中，遇到空帐户的线程会释放锁定并等待来自进行存款的某个线程的信号：

```
while(balance < amountToWithdraw){
    lock.wait();
} 
```

当其他线程存入一些钱时，它会向其他线程发出信号，等待同一个锁。（当然，负责存款和取款的代码必须在同一个锁上同步才能正常工作并防止数据损坏）。

```
balance += amountToDeposit;
lock.signallAll; 
```

如您所见，方法等待和通知仅在同步块或方法中才有意义。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-24T16:26:56.987

在 Java 中，所有的 Object 都实现了这两种方法，显然如果没有监视器，这两种方法是无用的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-09-18T10:28:53.457

实际上，`wait`成员`notify`函数不应该属于线程，它应该属于命名为来自[posix线程的](https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables)**条件变量**的东西。你可以看看 cpp 是如何包装它的，它将它包装到一个专用的类[std::condition_variable](https://en.cppreference.com/w/cpp/thread/condition_variable)中。

Java没有做这种封装，而是以更高级的方式包装条件变量：[monitor](https://en.wikipedia.org/wiki/Monitor_(synchronization))（直接将功能放入Object类）。

如果您不知道监视器或条件变量，那么，这确实会让人一开始就感到困惑。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-12-18T23:17:38.497

1.  Wait 和 notify 不仅仅是普通的方法或同步工具，更重要的是它们是 Java 中两个线程之间的通信机制。如果此机制不能通过任何 java 关键字（如同步）使用，则 Object 类是使它们可用于每个对象的正确位置。请记住同步和等待通知是两个不同的区域，不要混淆它们是相同的还是相关的。同步是提供互斥并确保Java类的线程安全，如竞争条件，而等待和通知是两个线程之间的通信机制。
2.  锁是基于每个对象提供的，这是在对象类而不是线程类中声明等待和通知的另一个原因。
3.  在Java中，为了进入代码的关键部分，线程需要锁并且它们等待锁，它们不知道哪些线程持有锁，而是只知道锁被某个线程持有，他们应该等待锁而不是知道哪个线程线程在同步块内并要求他们释放锁。这个类比适合等待和通知在对象类上而不是 Java 中的线程上。

**类比：** Java 线程是用户，厕所是线程希望执行的代码块。Java 提供了一种方法来锁定当前正在执行的线程的代码，该线程使用同步化的 keywokd，并让希望使用它的其他线程等到第一个线程完成。这些其他线程处于等待状态。Java 不像服务站那样公平，因为没有等待线程的队列。任何一个等待的线程都可以下一个得到监视器，而不管它们请求的顺序如何。唯一的保证是所有线程迟早都会使用受监控的代码。

[来源](http://javarevisited.blogspot.in/2012/02/why-wait-notify-and-notifyall-is.html)

**如果您查看以下生产者和消费者代码：**
`sharedQueue`对象充当线程之间的`producer and consumer`线程间通信。

```
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;

public class ProducerConsumerSolution {

    public static void main(String args[]) {
        Vector<Integer> sharedQueue = new Vector<Integer>();
        int size = 4;
        Thread prodThread = new Thread(new Producer(sharedQueue, size), "Producer");
        Thread consThread = new Thread(new Consumer(sharedQueue, size), "Consumer");
        prodThread.start();
        consThread.start();
    }
}

class Producer implements Runnable {

    private final Vector<Integer> sharedQueue;
    private final int SIZE;

    public Producer(Vector<Integer> sharedQueue, int size) {
        this.sharedQueue = sharedQueue;
        this.SIZE = size;
    }

    @Override
    public void run() {
        for (int i = 0; i < 7; i++) {
            System.out.println("Produced: " + i);
            try {
                produce(i);
            } catch (InterruptedException ex) {
                Logger.getLogger(Producer.class.getName()).log(Level.SEVERE, null, ex);
            }

        }
    }

    private void produce(int i) throws InterruptedException {

        // wait if queue is full
        while (sharedQueue.size() == SIZE) {
            synchronized (sharedQueue) {
                System.out.println("Queue is full " + Thread.currentThread().getName() + " is waiting , size: "
                        + sharedQueue.size());

                sharedQueue.wait();
            }
        }

        // producing element and notify consumers
        synchronized (sharedQueue) {
            sharedQueue.add(i);
            sharedQueue.notifyAll();
        }
    }
}

class Consumer implements Runnable {

    private final Vector<Integer> sharedQueue;
    private final int SIZE;

    public Consumer(Vector<Integer> sharedQueue, int size) {
        this.sharedQueue = sharedQueue;
        this.SIZE = size;
    }

    @Override
    public void run() {
        while (true) {
            try {
                System.out.println("Consumed: " + consume());
                Thread.sleep(50);
            } catch (InterruptedException ex) {
                Logger.getLogger(Consumer.class.getName()).log(Level.SEVERE, null, ex);
            }

        }
    }

    private int consume() throws InterruptedException {
        //wait if queue is empty
        while (sharedQueue.isEmpty()) {
            synchronized (sharedQueue) {
                System.out.println("Queue is empty " + Thread.currentThread().getName()
                                    + " is waiting , size: " + sharedQueue.size());

                sharedQueue.wait();
            }
        }

        //Otherwise consume element and notify waiting producer
        synchronized (sharedQueue) {
            sharedQueue.notifyAll();
            return (Integer) sharedQueue.remove(0);
        }
    }
} 
```

[来源](http://java67.blogspot.in/2012/12/producer-consumer-problem-with-wait-and-notify-example.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-24T16:29:34.703

“这个方法只能被这个对象的监视器的所有者线程调用。” 所以我认为你必须确保有一个线程是对象的监视器。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-09T08:10:14.067

对象类是为每个对象提供锁的正确位置。假设有一个联合银行账户，因此多个用户可以使用同一个账户通过多个渠道进行交易。目前，该账户的余额为 1500/-，账户中剩余的最低余额为 1000/-。现在，第一个用户试图通过 ATM 提取 500 美元，而另一个用户试图通过刷卡机购买任何价值 500 美元的商品。这里无论哪个通道首先访问帐户执行事务，首先获取帐户上的锁，另一个通道将等待直到事务完成并释放帐户上的锁，因为无法知道哪个通道已经获得锁以及哪个通道正在等待获取锁。因此锁定总是应用于帐户本身而不是通道。在这里，我们可以将帐户视为对象，将通道视为线程。

# android - Scala/Android 项目中的“多个 Scala 库”

> ID：16197137
> 
> 赞同：0
> 
> 时间：2013-04-24T16:17:45.067
> 
> 标签：android, eclipse, scala, libgdx, proguard

我在 Eclipse 中有一个 libgdx android 项目，我添加了 scala 和 AndroidProguardScala 特性。~~这工作得很好，但突然 eclipse 开始给我警告“在构建路径上发现了多个 Scala 库”。~~我仍然可以在设备上构建和安装该项目，但它会立即退出`NoClassDefFoundError: scala.Tuple2$mcZZ$sp`，~~因此看起来根本不包含 Scala 库。~~

~~我的项目似乎在“Scala Library [2.10.1]”（作为“scala-library.jar”）和“Android Dependencies”（作为“scala_library.min.jar”）下都有Scala库，所以我猜Proguard 输出与原始库冲突，但我不知道为什么会发生这种情况或如何修复它。~~

在这一点上，我可以创建一个新项目并将源文件复制过来，但如果有人能对此有所了解，那就太好了。

**编辑：**经过一些实验，事实证明这个代码（来自一个特征的方法）似乎是导致问题的原因。

```
acckeys match {
  case (true, false) => acceleration.set(0, accel).rotate(rotation)
  case (false, true) => acceleration.set(0, -accel).rotate(rotation)
  case _ => acceleration.set(0, 0)
} 
```

（其中 acckeys 是一个返回 a 的函数`tuple`并且`acceleration`是一个向量）

多个库警告仍然存在，所以我想这与问题无关。幸运的是，我实际上不需要从项目的 android 版本中引用此代码，但了解此代码为何编译但无法运行仍然很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:26:39.690

我确切地知道你遇到了什么问题。这与 AndroidProgaurdScala 无法识别您在主项目中的类文件有关。结果是，包含在 android 项目中定义的任何类，但是任何“新”类，例如您的元组，都将丢失，因此您会得到美妙的 NoClassDefFoundError。我没有遇到“在构建路径上找到多个 Scala 库”的警告，但这可能意味着您在项目中添加了 scala 特性，并且还在其顶部添加了 library.jar。尝试撤消您的配置并按照我在下面的内容进行操作；否则，请按照以下步骤设置一个新项目并复制您的源代码。

我发现 Scala Nature 和 Android Proguard Scala 在运行混乱后有点难以修复。我不能 100% 确定您是否能够挽救现有项目，但我们可以尝试看看会发生什么。首先，从您的项目中删除所有与 scala 相关的性质，并将它们恢复到它们的初始状态，它们将处于一个普通的旧 Java 项目中。

让我们通过 Scala 来设置 libGDX，看看哪里出了问题：

1.  [确保您的环境设置正确。](https://stackoverflow.com/questions/9924015/eclipse-android-scala-made-easy-but-still-does-not-work)（注意：您需要获取最新版本）
2.  [正常设置 libGDX 项目。](https://code.google.com/p/libgdx/wiki/ProjectSetup)（或在您的情况下使用现有项目）
3.  右键单击android项目，“添加Scala性质”然后“添加AndroidProgaurdScala性质”
4.  右键单击主项目，“添加Scala性质”
5.  右击桌面项目，“添加Scala性质”

现在，这可能是您已经到达的地方，但仍然存在 AndroidProgaurdScala 不知道您的主项目中有哪些类的问题。它似乎忽略了包含的项目，并且没有将它们添加到 scala_library.min.jar。为了解决这个问题，我找到了一种效果很好的解决方案：

1.  右键单击 Android 项目 > 属性 > Java 构建路径
2.  转到项目选项卡，删除主项目。我知道这是违反直觉的，但请相信我。
3.  转到源选项卡 > 链接源...
4.  导航并从主项目中选择“src”文件夹
5.  按确定
6.  清理并重建项目。

我已经测试并广泛使用了这个设置，没有任何问题。Android 和桌面版本都非常满意，并且可以毫无怨言地使用 Scala 或混合代码。android 项目现在完全了解您在主项目中使用的所有 Scala 类，因为现在将源代码复制到 android 项目的构建中。（即 NoClassDefFoundError 应该与 Scala 相关的任何内容出现）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:33:16.667

当我的 Proguard 配置文件出现问题时，我收到了类似的消息。你可能会检查：

*   Proguard 是否正在运行
*   您的配置文件有： -keep public class **.YourPackage.** 或类似的东西
*   您的配置文件已针对 Scala 库进行了修改，例如。

    ```
    ## 标量设置

    -dontwarn **$$anonfun$*
    -dontwarn scala.android.**
    -dontwarn scala.beans.ScalaBeanInfo
    -dontwarn scala.collection.generic.GenTraversableFactory
    -dontwarn scala.collection.immutable.RedBlack$Empty
    -dontwarn scala.concurrent.forkjoin.**
    -dontwarn scala.reflect.**
    -dontwarn scala.sys.process.**
    -dontwarn scala.tools.**,plugintemplate.**

    #(org.xml.sax.EntityResolver)Class.forName(变量).newInstance()
    -dontnote org.xml.sax.EntityResolver

      #(org.apache.james.mime4j.storage.StorageProvider)Class.forName(变量).newInstance()
    -dontnote org.apache.james.mime4j.storage.DefaultStorageProvider

    -dontnote scala.android.app.Activity

    -保留类 scala.android.package**
    -keep 类 * 扩展 scala.android.app.Activity

    ## 修复 ==> 警告：...找不到引用的类 sun.misc.Unsafe
    -libraryjars D:\Program Files\Apache\m2\repository\com\google\code\findbugs\jsr305\2.0.1\jsr305-2.0.1.jar
    -不要警告 sun.misc.Unsafe

    -keep 类 * 扩展 scala.runtime.MethodCache {
        上市 ;
    }

    -keepclassmembers 类 * {
        ** 模块$；
    }

    -keepclassmembernames 类 scala.concurrent.forkjoin.ForkJoinPool {
        长事件计数；
        诠释工人计数；
        诠释运行控制；
        scala.concurrent.forkjoin.ForkJoinPool$WaitQueueNode syncStack;
        scala.concurrent.forkjoin.ForkJoinPool$WaitQueueNode 备用堆栈；
    }

    -keepclassmembernames 类 scala.concurrent.forkjoin.ForkJoinWorkerThread {
        整数基数；
        诠释 sp;
        诠释运行状态；
    }

    -keepclassmembernames 类 scala.concurrent.forkjoin.ForkJoinTask {
        整数状态；
    }

    -keepclassmembernames 类 scala.concurrent.forkjoin.LinkedTransferQueue {
        scala.concurrent.forkjoin.LinkedTransferQueue$PaddedAtomicReference 头；
        scala.concurrent.forkjoin.LinkedTransferQueue$PaddedAtomicReference 尾；
        scala.concurrent.forkjoin.LinkedTransferQueue$PaddedAtomicReference cleanMe;
    }

    ```

# c++ - 如何从 C++ 返回对动态类型的引用并将其保存在 Python 中？

> ID：16197138
> 
> 赞同：1
> 
> 时间：2013-04-24T16:17:52.463
> 
> 标签：c++, python, boost-python

我正在编写一些代码，它根据列索引从行中返回列值。该行在 C++ 中不时更新，我希望 python 代码保留对列值的引用。以下代码反映了我当前的解决方案，其中我必须重复获取列值。

```
struct Foo
{
   PyObject * get(int pos)
   {
       // Position 0 is an integer value.  Position 1 is a float value
       if (pos == 0)
           return Py_BuildValue ("i", m_int);
       else
           return Py_BuildValue ("f", m_float);
   }
   void set_int(int i)
   {
       m_int = i;
   }
   void set_float(float f)
   {
       m_float = f;
   }
   int m_int;
   float m_float;
}; 
```

我的绑定很简单：

```
class_<Foo> ("Foo")
        .def("get", &Foo::get)
        .def("set_int", &Foo::set_int)
        .def("set_float", &Foo::set_float)
        ; 
```

这在 python 级别上工作，如下所示：

```
In [16]: foo = Foo()
In [17]: foo.set_int(1)
In [18]: foo.set_float(2.5)
In [19]: i = foo.get(0)
In [20]: f = foo.get(1)
In [21]: i
Out[21]: 1

In [22]: type(i)
Out[22]: int

In [23]: f
Out[23]: 2.5

In [24]: type(f)
Out[24]: float 
```

到目前为止，一切都很好。但是，当我修改 foo 时，我希望 i 和 f 反映新值。目前，它们反映了旧值。

```
In [25]: foo.set_int(42)
In [26]: i
Out[26]: 1 
```

如何设置 C++ 和绑定代码，以便“get”返回对 Foo 成员变量的引用而不是副本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:50:09.757

您需要将整数值包装在对象类中。原语在 Python 中是不可变的，因此当您返回一个 int 值时，它永远不会引用原始 int，而只是一个 const 副本。您可以返回以下形式的新结构：

```
struct IntWrap {
     int *value;
     int get() { return *value; }
     void set_int(int nval) { *value = nval; }
     ...
};

class_<IntWrap > ("IntWrap")
     .def("get", &IntWrap::get)
     .set("set_int", &IntWrap::set_int)
     ... 
```

并制作包装函数绑定，将结构视为 Python 中的可变整数。然而，这确实违反了 Python 中原语的 constness 习惯用法。

这是一篇关于从or有效继承的[帖子](https://stackoverflow.com/questions/2673651/inheritance-from-str-or-int)，您可以在其中更改整数样式对象以使用 IntWrap 代替（以防您想要一些更像开箱即用的东西）。`str``int``int`

# ios - 将我的应用更新为仅支持 iOS 4.3+，运行 iOS < 4.3 的用户会发生什么情况？

> ID：16197139
> 
> 赞同：2
> 
> 时间：2013-04-24T16:17:53.270
> 
> 标签：ios

这似乎是一个在谷歌上应该有很多答案的问题，但我找不到答案......

我正在更新我的应用程序以仅支持 iOS 4.3 或更高版本。当前安装了我的应用并使用 iOS < 4.3 的用户会发生什么情况。该应用程序是否仍然安装在他们的设备上，并且他们只是没有资格获得更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:21:09.423

他们将无法更新应用程序，我相信 AppStore 图标上会出现一个永久的“1”。如果用户在他们的桌面 iTunes 中下载更新，它将覆盖旧版本，他们将永远无法在他们的设备上安装该版本。

只要他们不恢复他们的 iOS（擦除手机），该应用程序就会保留。

编辑：

现在没有理由支持“4.3+”。任何可以运行 4.3+ 的设备都可以运行 5.0+，任何可以运行 5.0+ 的设备都可以运行 6.0+。

iPhone 3G 保持在 4.3 以下是好的，但如果您现在支持 4.3+，那么除了疏远 iPhone 3G 用户而没有任何好处之外，您真的一无所获。

换句话说，仍然使用 4.3 的用户可能不是那种无论如何都从 App Store 更新应用程序的用户。

# asp.net - Visual Studio 2010 自动格式化 ASPX 弊端

> ID：16197140
> 
> 赞同：3
> 
> 时间：2013-04-24T16:17:53.410
> 
> 标签：asp.net, html, visual-studio-2010, code-formatting

好吧。我已经做了很多搜索，发现了很多*解决*这个问题的帖子，但实际上并没有任何解决方案。

Visual Studio 2010 非常喜欢自动格式化我的代码。当它真的按照我说的做时，这一切都很棒而且很棒。
在编辑 .aspx 文件时，格式化对我来说效果不佳。所以我尝试在所有结束标记和`Format Document`(ctrl+k,Ctrl+d 或 Ctrl+e,d) 之前和之后放置空格，它会根据我痴迷设置、检查和加倍的`Tag Specific Options...`in对其进行格式化`Text Editor->HTML->Formatting`-检查。
显然，格式化的前导和尾随空格的要求[是一个设计决策](https://stackoverflow.com/questions/4639606/html-formatting-in-visual-studio-2010)，尽管我不知道为什么，因为在解析普通 html 文档时，大多数空格都被忽略了。无论如何，我可以处理，我只需要放置大量额外的空间，然后它会做对，对吧？简而言之：没有。

**要点是：**在我努力确保它按照我设置的方式格式化所有内容之后，通过在我的标记和`Format Document`ing 中放置大量额外的空格，如下所示：

```
 </asp:TableCell>
                    </asp:TableRow>
                </asp:Table>
            </div>
            <div id="Week2Summary" align="right">
                Week 2 - Summary
            </div>
            <br />
            <div id="PayPeriod" align="right">
                Pay Period- Summary
            </div>
        </div>
        <br />
        <asp:Panel ID="pnlTimeModify" runat="server" Visible="False" borderColor="#009900"
            Width="100%"> 
```

每当我切换到设计器视图时，保存，或者有时只是看错了，它会去掉所有的空间，重新格式化，然后把它搞砸：

```
 </asp:TableCell></asp:TableRow></asp:Table></div><div id="Week2Summary" align="right">
            Week 2 - Summary </div><br /><div id="PayPeriod" align="right">
            Pay Period- Summary </div></div><br /><asp:Panel ID="pnlTimeModify" runat="server" Visible="False" BorderColor="#009900"
                Width="100%"> 
```

因此，我安装了 PowerCommands 和 Productivity Power Tools，其中一个添加了默认为关闭的“保存时格式化”设置。伟大的！重新启动，它似乎工作得很好。重新启动几次，它会再次这样做。现在我要炸毁电脑，走出办公室。我会把咆哮留到其他地方。

**简而言之：**我需要知道如何制作 VS：

*   随时自动停止格式化
*   停止取出我的空间，这些空间会强制格式化正常工作
*   或首先停止要求额外的空间

这样我就可以再次安心工作了。（我敢肯定大厅里的女孩们已经厌倦了我周期性的尖叫。）

**我试过的：**

*   在 Text Editor->HTML->Formatting->Tag Specific Options 中设置格式设置...
*   安装 PowerCommands 和 Productivity Power Tools 并编辑设置以“防止”保存时格式化
*   使用额外的空格来强制格式化正常工作（当我保存或切换视图时，VS 会自动取出）
*   更改文件扩展名选项，以便将 .aspx 作为 XML 和 HTML 文档打开，这根本没有帮助。

但是，它继续使我的血压升高。感谢你给与我的帮助。我要去吃午饭，试着冷静下来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T17:55:05.333

遇到了同样的问题，我在 Scott Gu 的博客上找到了答案。

解决方案是在 Visual Studio 中设置格式规则（右键单击任何标记，单击格式和验证，单击标记特定选项）

当按下 ctrl-k 时，ctrl-d 文档将根据您的设置进行格式化。如果结束标签没有移动到新行，那是因为结束标签和它前面的内容之间没有空格。发生这种情况是因为 Visual Studio 小心翼翼地不更改页面的呈现方式。

有关完整的博客文章，请查看 Scott Gu 的博客文章。

[http://weblogs.asp.net/scottgu/archive/2006/07/07/Tip_2F00_Trick_3A00_-Custom-formatting-HTML-in-Visual-Web-Developer-and-Visual-Studio-2005.aspx](http://weblogs.asp.net/scottgu/archive/2006/07/07/Tip_2F00_Trick_3A00_-Custom-formatting-HTML-in-Visual-Web-Developer-and-Visual-Studio-2005.aspx)

# vim - 为一个目录下的文件覆盖 ftplugin

> ID：16197142
> 
> 赞同：2
> 
> 时间：2013-04-24T16:17:58.560
> 
> 标签：vim

为一个项目（即特定目录下的文件）覆盖我的 ftplugin 设置的最佳方法是什么？

例如，我在 ~/.vim/ftplugin/javascript.vim 中有 setlocal tabstop=4 因为我公司的所有项目都有这个空白政策。

但在一个个人项目中，我想在我的 .js 文件中使用 tabstop=2 。

我知道我可以在该项目的目录中放置一个自定义 .vimrc 并启用 vim 的 exrc 选项以使其读取该 .vimrc 文件。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:30:44.473

`set exrc`将读取当前目录中的 .vimrc 文件，但也会读取 .vim 目录下的结构。所以你可以添加

`myproject/.vim/after/ftplugin/javascript.vim`

到您的项目；当您从 dir 打开文件时，它会像此文件在您的主目录上一样工作`myproject`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T06:12:59.570

我使用localrc.vim - 为此启用每个目录插件的[配置文件。](http://www.vim.org/scripts/script.php?script_id=3393)它不仅允许获取“本地 .vimrc”文件，还提供特定子目录的文件类型特定设置（默认情况下，文件名为`.local.{filetype}.vimrc`）。

# objective-c - Objective-C 将 obj-c 指针隐式转换为自动释放 id 错误

> ID：16197143
> 
> 赞同：4
> 
> 时间：2013-04-24T16:17:58.813
> 
> 标签：objective-c, compiler-errors, automatic-ref-counting, implicit-conversion

我遇到了一个非常具体的问题，我正在使用具有各种状态的 DAO（数据访问对象），这些状态被传递给 init 方法，然后被使用。

现在我遇到的问题是我似乎无法将具体状态传递给`init`方法，我总是得到一个

> ARC不允许将objective-c指针隐式转换为__autoreleasing id

编码：

```
-(DAOObject *)makeSpecificDataAccessObject{
    SQLiteState* localstate = [[SQLiteState alloc] initWithTableName:@"TableName"];
    DAOObject* specificDAO = [[DAOObject alloc] initWithLocalState:localstate]; //where error happens
    return specificDAO;
}

@interface DAOObject : NSObject <SettingsListenerProtocol>
    -(id)initWithLocalState:(id<StateProtocol> *)LocalState;
@end

@interface SQLiteState : NSObject <StateProtocol>
-(id)initWithTableName:(NSString *)tableName;

@end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-24T16:21:05.187

`*`去掉里面的星星

```
-(id)initWithLocalState:(id<StateProtocol> *)LocalState; 
```

`id`已经定义为*指向*类实例的指针。

# r - 使用 curlPerform 或 getURL 的 JSON 字符大小限制

> ID：16197145
> 
> 赞同：1
> 
> 时间：2013-04-24T16:18:02.543
> 
> 标签：r, rcurl

尝试从`curlPerform()`或检索数据时，我遇到了 JSON 字符串中的字符大小限制`getURL()`。这是不可重现的代码 [1]，但它应该可以解决这个问题。

```
# Note that .base.url is the basic url for the API, q is a query, user 
#  is specified, etc. 
session = getCurlHandle()
curl.opts <- list(userpwd = paste(user, ":", key, sep = ""), 
                  httpheader = "Content-Type: application/json")
request <- paste(.base.url, q, sep = "")
txt <- getURL(url = request, curl = session, .opts = curl.opts, 
              write = basicTextGatherer()) 
```

或者

```
r = dynCurlReader()
curlPerform(url = request, writefunction = r$update, curl = session, 
            .opts = curl.opts) 
```

我的猜测是or文本处理程序对象中的`update`or`value`函数在处理大字符串时遇到了问题。在此示例中，将返回大约 2 MB 的截断字符串。上面给出的代码适用于 < 2 MB 的查询。`basicTextGather``dynCurlReader``r$value()`

请注意，我可以轻松地从命令行（或`system()`在 R 中使用）执行以下操作，但如果我在 R 中进行后续分析，则写入磁盘似乎是一种浪费。

```
curl -v --header "Content-Type: application/json" --user username:register:passwd https://base.url.for.api/getdata/select+*+from+sometable > stream.json 
```

其中`stream.json`是大约 14MB 的 json 字符串。我可以使用任一方法将字符串读入 R

```
con <- file(paste(.project.path, "data/stream.json", sep = ""), "r")
string <- readLines(con) 
```

或直接列为

```
tmp <- fromJSON(file = paste(.project.path, "data/stream.json", sep = "")) 
```

任何想法都非常感谢。

瑞安

[1] - 很抱歉没有提供可重现的代码，但我正在处理政府防火墙。

# javascript - 如何在 iPhone 上显示原生 jwplayer 播放按钮

> ID：16197150
> 
> 赞同：2
> 
> 时间：2013-04-24T16:18:14.947
> 
> 标签：javascript, html5-video, jwplayer

我正在尝试让 jwplayer 在 iPhone 上显示原生 iPhone 播放按钮（见下文），并在其他地方显示自定义皮肤。我试过使用 chromeless: true，但没有帮助（我仍然得到皮肤播放按钮）。现在我被困在 jwplayer 代码中，无法通过。你能帮我吗？

![在此处输入图像描述](https://i.stack.imgur.com/7WLxW.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:45:46.833

恐怕我们会回到默认的 iOS 标签，因此无法显示我们的原生播放图标。但是，在未来的版本中，我们计划添加自己的移动 UX/UI，所以这将成为可能！

# wordpress - 注册 Wordpress 后自动登录用户

> ID：16197157
> 
> 赞同：4
> 
> 时间：2013-04-24T16:18:46.650
> 
> 标签：wordpress, authentication, passwords, autologin

我正在尝试在注册后自动登录用户。

我在`functions.php`文件中尝试这个：

```
 add_action( 'user_register', 'auto_login_user' );
    function auto_login_user($user_id) {
      $user = new WP_User($user_id);
      $user_login_var = $user->user_login;
      $user_email_var = stripslashes($user->user_email);
      $user_pass_var    = $user->user_pass;
      $creds = array();
      $creds['user_login'] = $user_login_var;
      $creds['user_password'] = $user_pass_var;
      $creds['remember'] = true;
      $user = wp_signon( $creds, false );
      if ( is_wp_error($user) )
        echo $user->get_error_message();

} 
```

**我收到错误**：

> 您为用户名“TheNewUserCreated”输入的密码不正确。忘记密码？

如何从 User 对象中获取密码？

另外因为这是模板registration.php中的自定义注册过程，所以我尝试使用$_POST 并在该文件中运行该函数，但我也没有成功...

**编辑：** 好的，我得到了加密密码，那么这里的解决方案是什么，我怎样才能自动登录用户？也许我可以在registration.php页面中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-09T06:18:16.690

将以下函数添加到`functions.php`文件

```
 function auto_login_new_user( $user_id ) {
        wp_set_current_user($user_id);
        wp_set_auth_cookie($user_id);
            // You can change home_url() to the specific URL,such as 
        //wp_redirect( 'http://www.wpcoke.com' );
        wp_redirect( home_url() );
        exit;
    }
 add_action( 'user_register', 'auto_login_new_user' ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-04T19:13:53.180

如果您使用`wp_insert_user();`注册用户然后自动登录他们很简单。如果成功，此函数返回用户 ID，因此使用它来登录该用户。

```
$id = wp_insert_user($data);
//so if the return is not an wp error object then continue with login
if(!is_wp_error($id)){
    wp_set_current_user($id); // set the current wp user
    wp_set_auth_cookie($id); // start the cookie for the current registered user
} 
```

但要遵循你已经拥有的东西，它可能是这样的：

```
add_action( 'user_register', 'auto_login_user' );
function auto_login_user($user_id) {
    wp_set_current_user($user_id); // set the current wp user
    wp_set_auth_cookie($user_id); // start the cookie for the current registered user
}
//this code is a bit tricky, if you are admin and you want to create a user then your admin session will be replaced with the new user you created :) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-21T11:42:29.050

```
function auto_login() {
            $getuserdata=get_user_by('login',$_GET['login']);
            $tuserid=$getuserdata->ID;
            $user_id = $tuserid;
            $user = get_user_by( 'id', $user_id );
            if( $user ) {
                wp_set_current_user( $user_id, $user->user_login );
                wp_set_auth_cookie( $user_id );
                do_action( 'wp_login', $user->user_login );

            }
        }
        add_action('init', 'auto_login'); 
```

我和你有同样的问题，找到了这个最好的解决方案。在你的functions.php文件中试试这个。还有一件事是使用functions.php文件中的函数提交您的重置表单

# excel - MS Excel 中的嵌套 If / Then VB 语句

> ID：16197158
> 
> 赞同：0
> 
> 时间：2013-04-24T16:18:46.897
> 
> 标签：excel, vba

整整一周，我与几个具有 VB 经验的人一起工作，但我们无法让所有这些 If / Then 语句正常工作。除引用“otype”+ SCE+ CNE 和“otype”= 专线或仅 Internet 的语句外，所有语句均有效。逻辑似乎是正确的，但我们没有得到预期的结果。帮助！下面是我们有疑问的VB代码。谢谢你。

```
Private Sub Worksheet_Activate()

End Sub

Private Sub Worksheet_Change(ByVal Target As Range)

    Rem CNE Customer
    If Range("otype") = "SCE+ CNE" Then
        Worksheets("VNC Form").Visible = True
        Worksheets("ISC Portal").Visible = True
        Worksheets("ISC Request Only").Visible = False
        Worksheets("VPN Details").Visible = False

    Else
        Worksheets("VNC Form").Visible = False
        Worksheets("ISC Portal").Visible = False
    End If

    Rem ISM ABC Customer
    If Range("otype") = "SC4ABC" Then
        Worksheets("ISM-ABC Customers").Visible = True
        Worksheets("ISM Portal").Visible = True

    Else
        Worksheets("ISM-ABC Customers").Visible = False
    End If

    Rem VPN Details tab
    If Range("ctype") = "VPN" Then
        Worksheets("VPN Details").Visible = True
        Worksheets("ISC Portal").Visible = True
        Worksheets("VNC Form").Visible = False

    Else
        Worksheets("VPN Details").Visible = False
        Worksheets("ISC Portal").Visible = False
        Worksheets("VNC Form").Visible = False
    End If

    Rem Connections tabs
    If Range("ctype") = "Dedicated Line" Or Range("ctype") = "Internet Only" Then
        Worksheets("ISC Portal").Visible = True
        Worksheets("VPN Details").Visible = False

    Else
        Worksheets("ISC Portal").Visible = False
        Worksheets("VPN Details").Visible = False
    End If

    Rem AT&T and Connection tabs
    If Range("otype") = "SCE+ Reseller" And Range("ctype") = "CNE" Or Range("otype") = "SCE+ Internal" And Range("ctype") = "CNE" Then
        Worksheets("ISC Request Only").Visible = True
        Worksheets("VNC Form").Visible = True
        Worksheets("ISC Portal").Visible = False
        Worksheets("VPN Details").Visible = False

    Else
        Worksheets("ISC Request Only").Visible = False
        Worksheets("VNC Form").Visible = False
        Worksheets("ISC Portal").Visible = True
        Worksheets("VPN Details").Visible = True
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:45:12.347

虽然我下面的代码可能会有所帮助，但我建议使用 QAT 上的下拉菜单或功能区上的按钮来允许用户决定要取消隐藏/隐藏哪些工作表。**每次**修改工作表中的任何单元格时，您的代码都会运行。

正如 Sid 所建议的那样，可能值得将您的代码包含在 CASE 语句中，以便仅在 Target= otype 或 ctype 时运行...

也许尝试强制案例，并强制空格为零，如下所示：

```
Rem CNE Customer  

If Trim(UCase(replace(Range("otype").TEXT," ",""))) = "SCE+CNE" Then  
    Worksheets("VNC Form").Visible = True
    Worksheets("ISC Portal").Visible = True
    Worksheets("ISC Request Only").Visible = False
    Worksheets("VPN Details").Visible = False

Else
    Worksheets("VNC Form").Visible = False
    Worksheets("ISC Portal").Visible = False
End If

Rem Connections tabs
If (TRIM(UCase(replace(Range("ctype")," ",""))) = "DEDICATEDLINE") Or (TRIM(UCASE(REPLACE(Range("ctype")," ",""))) = "INTERNETONLY") Then
    Worksheets("ISC Portal").Visible = True
    Worksheets("VPN Details").Visible = False

Else
    Worksheets("ISC Portal").Visible = False
    Worksheets("VPN Details").Visible = False
End If

Rem AT&T and Connection tabs
If (TRIM(UCase(replace(Range("otype")," ",""))) = "SCE+RESELLER" And TRIM(UCase(replace(Range("ctype")," ",""))) = "CNE") Or (TRIM(UCase(replace(Range("otype")," ",""))) = "SCE+INTERNAL" And TRIM(UCase(replace(Range("ctype")," ",""))) = "CNE") Then
    Worksheets("ISC Request Only").Visible = True
    Worksheets("VNC Form").Visible = True
    Worksheets("ISC Portal").Visible = False
    Worksheets("VPN Details").Visible = False

Else
    Worksheets("ISC Request Only").Visible = False
    Worksheets("VNC Form").Visible = False
    Worksheets("ISC Portal").Visible = True
    Worksheets("VPN Details").Visible = True
End If 
```

# java - 删除数组元素时出错

> ID：16197166
> 
> 赞同：0
> 
> 时间：2013-04-24T16:19:17.903
> 
> 标签：java, arraylist

我有新的数组列表，1 个数组列表，其中已经插入了 10 个客户。我正在运行一个循环，它从数组列表中选择一个随机客户并将其添加到第二个数组列表中。但是，当我将客户插入第二个数组列表时，我得到了重复。因此，当循环在将客户添加到第二个数组列表后运行时，它会将其从第一个数组列表中删除。

但是，当它运行时出现错误：`Intervals error: java.lang.IndexOutOfBoundsException: Index: 7, Size: 7`

```
ArrayList<String> customer = new ArrayList<String>(Arrays.asList(list));

int customerlist = customer.size();

while (line.isEmpty())
        {
            for (int x = 0; x < customerlist; x++ )
            {
                try
                {
                    Thread.sleep(intervals * 1000);   //Sleep method to hold the arrival time by 1-2 seconds. 
                    int cus = (int) (Math.random() * customerlist);   //Random customer is picked here. 
                    String new_cus = customer.get(cus);   //New customer object is created ere.
                    line.add(new_cus);   //Customer objects are added to the empty LinkedList queue.
                    customer.remove(cus);

                    //For loop statement to outputting the queue.
                    for (String s : line)
                    {
                        System.out.print("[" + s.toString() + " " + "]"); //Outputting each customer and using the ".name" method so customers are readable.
                    }
                    //Outputting the whole queue and stating who has joined the queue.
                    System.out.println("\n" + "The queue has " + line.size() + " customers so far" + "\n" + 
                    new_cus.toString() + " Has Joined the Queue " + " <=== WAITING" + "\n");
                }
                catch(Exception e)   //ERROR handler for sleep method.
                {
                    System.out.println("Intervals error: " + e);   //Outputting the ERROR message.
                    System.exit(0);   //If ERROR found exit system.
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:23:54.347

添加

```
customerlist--; 
```

后

```
customer.remove(cus); 
```

另外，你可以改变

```
for (int x = 0; x < customerlist; x++) 
```

经过

```
for (int x = 0; x < customer.size(); x++) 
```

但我认为`.size`在每个循环中调用函数比局部变量使用更多的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:22:36.317

您正在从有效迭代的数组中删除，但没有相应地更新条件。

改变：

```
for (int x = 0; x < customerlist; x++) 
```

至

```
for (int x = 0; x < customer.size(); x++) 
```

（或者更好的是，在底层使用迭代器，`ArrayList`以便您可以使用该`Iterator.remove()`函数安全地删除。）

还要换行：

```
int cus = (int) (Math.random() * customerlist); 
```

至

```
int cus = (int) (Math.random() * customer.size()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:22:57.940

这就是问题：

```
int cus = (int) (Math.random() * customerlist); 
```

第一次迭代很好（虽然不如调用干净[`Random.nextInt`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt%28int%29)） - 但之后，`customer.size()`已经改变（因为元素已被删除）但`customerlist`仍然是一样的。因此，在下一次迭代中，您选择了错误范围内的元素。

老实说，您最好只使用[`Collections.shuffle()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#shuffle%28java.util.List,%20java.util.Random%29)shuffle 原始列表 - 这就是您最终想要的结果，对吧？

# python - 停止 pyplot.contour 沿不连续点绘制轮廓

> ID：16197171
> 
> 赞同：13
> 
> 时间：2013-04-24T16:19:39.720
> 
> 标签：python, numpy, matplotlib, contour

我有一个坐标变换的二维地图。每个点的数据是原始坐标系中的轴角，从 0 到 360。我正在尝试使用 pyplot.contour 绘制恒定角度的线，例如 45 度。轮廓沿两个极点之间的 45 度线出现，但轮廓中有一个附加部分沿 0/360 不连续点连接两个极点。这会形成一条非常参差不齐的难看线，因为它基本上只是跟踪一侧数字接近 0 和另一侧接近 360 的像素。

示例：这是使用全彩色地图的图像： ![不连续的彩色地图](https://i.stack.imgur.com/2tmcz.png)

您可以在左侧看到沿蓝色/红色曲线的不连续性。一侧是 360 度，另一侧是 0 度。绘制轮廓时，我得到：

![不连续的等高线图](https://i.stack.imgur.com/Mc8Dw.png)

请注意，所有轮廓都连接两个极点，但即使我没有绘制 0 度轮廓，所有其他轮廓都沿着 0 度不连续性（因为 pyplot 认为如果一侧为 0，另一侧为 360，则必须有之间的所有其他角度）。

生成此数据的代码：

```
import numpy as np
import matplotlib.pyplot as plt

jgal = np.array(
    [
        [-0.054875539726, -0.873437108010, -0.483834985808],
        [0.494109453312, -0.444829589425, 0.746982251810],
        [-0.867666135858, -0.198076386122, 0.455983795705],
    ]
)

def s2v3(rra, rdec, r):
    pos0 = r * np.cos(rra) * np.cos(rdec)
    pos1 = r * np.sin(rra) * np.cos(rdec)
    pos2 = r * np.sin(rdec)
    return np.array([pos0, pos1, pos2])

def v2s3(pos):
    x = pos[0]
    y = pos[1]
    z = pos[2]
    if np.isscalar(x):
        x, y, z = np.array([x]), np.array([y]), np.array([z])
    rra = np.arctan2(y, x)
    low = np.where(rra < 0.0)
    high = np.where(rra > 2.0 * np.pi)
    if len(low[0]):
        rra[low] = rra[low] + (2.0 * np.pi)
    if len(high[0]):
        rra[high] = rra[high] - (2.0 * np.pi)
    rxy = np.sqrt(x ** 2 + y ** 2)
    rdec = np.arctan2(z, rxy)
    r = np.sqrt(x ** 2 + y ** 2 + z ** 2)
    if x.size == 1:
        rra = rra[0]
        rdec = rdec[0]
        r = r[0]
    return rra, rdec, r

def gal2fk5(gl, gb):
    rgl = np.deg2rad(gl)
    rgb = np.deg2rad(gb)
    r = 1.0
    pos = s2v3(rgl, rgb, r)

    pos1 = np.dot(pos.transpose(), jgal).transpose()

    rra, rdec, r = v2s3(pos1)

    dra = np.rad2deg(rra)
    ddec = np.rad2deg(rdec)

    return dra, ddec

def make_coords(resolution=50):
    width = 9
    height = 6
    px = width * resolution
    py = height * resolution
    coords = np.zeros((px, py, 4))
    for ix in range(0, px):
        for iy in range(0, py):
            l = 360.0 / px * ix - 180.0
            b = 180.0 / py * iy - 90.0
            dra, ddec = gal2fk5(l, b)
            coords[ix, iy, 0] = dra
            coords[ix, iy, 1] = ddec
            coords[ix, iy, 2] = l
            coords[ix, iy, 3] = b
    return coords

coords = make_coords()

# now do one of these
# plt.imshow(coords[:,:,0],origin='lower') # color plot
plt.contour(
    coords[:, :, 0], levels=[45, 90, 135, 180, 225, 270, 315]
)  # contour plot with jagged ugliness

plt.show() 
```

我怎么能：

1.  停止 pyplot.contour 沿不连续点绘制轮廓

2.  让 pyplot.contour 认识到 0/360 角度的不连续性根本不是真正的不连续性。

我可以增加基础数据的分辨率，但在我得到一条漂亮的平滑线之前，它开始需要很长时间和大量的内存来绘制。

我还想沿着 0 度绘制轮廓，但如果我能弄清楚如何隐藏不连续性，我可以将它移到不在轮廓附近的其他地方。或者，如果我可以让#2 发生，那将不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T08:48:45.017

这绝对仍然是一个 hack，但是您可以通过两种方法获得漂亮的平滑轮廓：

1.  绘制相位绝对值的等高线（从 -180° 到 180°），这样就没有不连续性。
2.  在有限区域中绘制两组轮廓，以便靠近极值顶部和底部的数值缺陷不会蔓延。

这是附加到您的示例的完整代码：

```
Z = np.exp(1j*np.pi*coords[:,:,0]/180.0)
Z *= np.exp(0.25j*np.pi/2.0)   # Shift to get same contours as in your example
X = np.arange(300)
Y = np.arange(450)

N = 2
levels = 90*(0.5 + (np.arange(N) + 0.5)/N)
c1 = plt.contour(X, Y, abs(np.angle(Z)*180/np.pi), levels=levels)
c2 = plt.contour(X, Y, abs(np.angle(Z*np.exp(0.5j*np.pi))*180/np.pi), levels=levels) 
```

![相位角的平滑等高线图](https://i.stack.imgur.com/W7ILs.png)

可以推广此代码以获得任何“周期性”函数的平滑轮廓。剩下要做的是生成一组*具有正确值*的新轮廓，以便正确应用颜色图，正确应用标签等。但是，使用 matplotlib 似乎没有一种简单的方法：相关`QuadContourSet`类做所有事情，我看不到从轮廓构造适当轮廓对象的简单方法`c1`和`c2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-01T12:12:57.957

我对完全相同的问题感兴趣。一种解决方案是`NaN`沿分支切割的轮廓；看[这里](https://github.com/matplotlib/matplotlib/issues/20548)；另一个是使用[matplotx 的 contour()](https://github.com/nschloe/mplx#contour-plots-for-functions-with-discontinuities)`max_jump`中的参数。

我将解决方案塑造成一个 Python 包[cplot](https://github.com/nschloe/cplot)。

```
import cplot
import numpy as np

def f(z):
    return np.exp(1 / z)

cplot.show(f, (-1.0, +1.0, 400), (-1.0, +1.0, 400)) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/48aJt.png)](https://i.stack.imgur.com/48aJt.png)

# css - CSS定位元素相对于祖父母？

> ID：16197175
> 
> 赞同：3
> 
> 时间：2013-04-24T16:19:53.330
> 
> 标签：css

我正在尝试相对于它之前的元素 2 个元素（图片）定位一个元素（一个按钮）。图片和按钮之间有不同数量的文本。看看我的网站：

[http://gorilla-gym.com/product-category/fitness-attachments/](http://gorilla-gym.com/product-category/fitness-attachments/)

我想要实现的是让每个产品列表的“立即购买”按钮水平对齐，无论图片下方有多少文字。

在我看来，以这种方式将按钮相对于图片定位是最合乎逻辑的方法，但我不知道如何做到这一点。让我知道你们是否知道如何做到这一点，或者是否有更好的方法来实现我想做的事情。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:54:38.167

检查这个我想你想要这样的东西

[http://jsfiddle.net/FWzzR/1/](http://jsfiddle.net/FWzzR/1/)

**css**

```
ul.products { 
    display:table; 
    width:100%; 
    table-layout:fixed; 
    border-collapse:separate; 
    border-spacing:10px; 
}

.products > li { 
    background-color: #4F81BD; 
    border:2px solid #385D8A; 
    position: relative; 
    width: 22.05%; 
    display: table-cell; 
    padding:10px; 
    padding-bottom:50px; 
    text-align:center; 
    vertical-align:top; 
}

.products > li >a { 
    display:block; 
}

.products a.button { 
    position:absolute; 
    bottom:10px; 
    left:50%; 
    margin-left:-40px; 
    font-size: 100%; 
    line-height: 1em; 
    cursor: pointer; 
    text-decoration: none; 
    padding: 6px 10px; 
    font-family: inherit; 
    font-weight: bold; 
    color: #FFF; 
    text-shadow: 0 1px 0 #FF6311; 
    text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.8); 
    border: 1px solid #973100; 
    -webkit-border-radius: 2px; 
    -moz-border-radius: 2px; 
    border-radius: 2px; 
    background: #FD5200; 
    background: -webkit-gradient(linear, left top, left bottom, from(#FD5200), to(#CA4100)); 
    background: -webkit-linear-gradient(#FD5200, #CA4100); 
    background: -moz-linear-gradient(center top, #FD5200 0%, #CA4100 100%); 
    background: -moz-gradient(center top, #FD5200 0%, #CA4100 100%); 
    -webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.075), inset 0 1px 0 rgba(255, 255, 255, 0.3), 0 1px 2px rgba(0, 0, 0, 0.1); 
    -moz-box-shadow: inset 0 -1px 0 rgba(0,0,0,0.075), inset 0 1px 0 rgba(255,255,255,0.3), 0 1px 2px rgba(0,0,0,0.1); 
    box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.075), inset 0 1px 0 rgba(255, 255, 255, 0.3), 0 1px 2px rgba(0, 0, 0, 0.1); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:11:51.563

如果图片下方有不同数量的文本，则元素的高度都将不同，您无法将“立即购买”按钮水平对齐图片下方。完成此操作的唯一方法是确保所有 div 的高度相同，然后您只需将 shop now 按钮定位如下：

```
<div class="shop-now-div">
 <img src="yourimage.jpg">
 Lorem ipsum....
 <a class="button" href="#">Shop Now</a>
</div>

.button { position: absolute; bottom: 5px; right: 5px; }
.shop-now-div { position: relative; } 
```

有两种方法可以使您的 div 高度相同 1) JavaScript（不推荐，这很痛苦） 2) 表格（在 CSS 中执行，这样您就不会弄乱语义）

不幸的是，一些现代浏览器（Firefox，我相信）将不支持 position: relative 在表格单元格（您将需要）上，因此您不得不使用 JS 来使您的 div 具有相同的高度......

最简单的解决方案：将您的立即购买按钮贴在图像顶部 - 这样您就可以轻松地将它们水平对齐。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:57:27.983

如果您只想将底部的“立即购买”按钮居中对齐，那么

```
.shopnow_button{
  display: block;
  margin: 0 auto; //something was overriding so I had to do !important here
  width: 57px; // can be any value < the width of the parent container(Ofcourse !)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-26T16:52:10.697

这个问题在这里得到更好的回答[How to set relative position with Grandfather！元素？](https://stackoverflow.com/questions/16774983/how-to-set-relative-position-with-grandfather-element)只需在祖元素上设置位置：相对，在主题元素上设置位置：绝对。

该解决方案确实依赖于中间元素上没有定位设置。

# bash - If Statement Bash 参数太多

> ID：16197179
> 
> 赞同：0
> 
> 时间：2013-04-24T16:20:10.183
> 
> 标签：bash, if-statement, grep, arguments

我正在尝试使用 if 语句`grep`来检查某些文件中是否存在字符串。现在，该`grep`语句本身可以工作，但是当我将它作为`if`语句的一部分运行时，输出是：

```
line 6: [: too many arguments 
```

我的代码：

```
#!/bin/bash

if [ $(grep -c "OutOfMemory" /my/path/to/domains/*/*/subdomains/*/logs/*.*) -ne 0 ];    
then
     echo "String found" 

else
     echo "String not found"

fi 
```

如果尝试使用较短的路径，但它没有帮助。

任何建议都会有所帮助。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:38:43.893

问题是您`grep -c`没有产生正确的输出。

例如，您可以获得多个文件：

```
$ grep -c "OutOfMemory" /my/path/to/domains/*/*/subdomains/*/logs/*.*
/my/path/to/domains/a/b/subdomains/c/logs/my.log:1
/my/path/to/domains/a/b/subdomains/c/logs/another.log:2 
```

您的`if`语句无法处理 . 返回的多行`grep`，因此它以 . 失败`too many arguments`。

如果您想查看是否有任何文件包含字符串“OutOfMemory”，请改为执行以下操作：

```
if grep -q "OutOfMemory" /my/path/to/domains/*/*/subdomains/*/logs/*.*
then
... 
```

# static-analysis - HP Fortify 审计工作台

> ID：16197180
> 
> 赞同：2
> 
> 时间：2013-04-24T16:20:19.343
> 
> 标签：static-analysis, fortify

我正在尝试使用 HP Fortify 静态代码分析器来分析大型 C 应用程序中的安全问题，并且我在软件本身中遇到了各种错误，我似乎无法在 Internet 上的任何地方找到任何答案。我正在使用该软件的 3.4 版并在 Linux x64 系统上运行它。

我遇到的使该产品很难使用的主要错误是，在其 Audit Workbench GUI 的各个不同位置，该程序将无缘无故关闭。一个例子是，每当弹出窗口显示向您提问并且您对问题的回答只是通过单击关闭按钮或取消按钮关闭弹出窗口时，整个程序结束而不是返回您到您最初获得弹出窗口时所在的位置。另一个例子是，当我尝试打开规则编辑器时，无论是针对新规则包还是现有规则包，程序都会打开一个进度窗口，其中有一个移动的进度条，它坐在那里并移动了一段时间，但完成后，整个程序没有打开规则编辑器，而是突然结束。

有没有人见过这样的行为？如果是这样，请让我知道我能做些什么。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T17:56:39.143

我强烈建议升级到最新版本（本文发布时为 4.10）。帮助诊断问题的一件事是查看日志文件。它们位于（默认情况下）`[user.home]/fortify/AWB-3.40/log`。

此外，由于您使用的是 64 位 Linux，因此您需要确保 AWB 在任何时候都不会尝试访问 32 位 JRE。这可以通过删除`[fortify install root]/jre`并重命名`[fortify install root]/jre64`为`[fortify install root]/jre`. 某些工具默认为`/jre`，因此您可能会在 Linux 64 位上遇到问题。

# android - 在初始化时设置最终的 Rect 尺寸

> ID：16197184
> 
> 赞同：0
> 
> 时间：2013-04-24T16:20:25.350
> 
> 标签：android

我想将 a 设置`Rect`为 final 并将其设置为`.top` `.left`等，并且仅从中读取。是否可以在初始化时设置尺寸？

```
public static final Rect myRect = new Rect(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:33:43.530

根据评论，它是通过使用备用构造函数完成的：

```
public static final Rect myRect = new Rect(int left, int top, int right, int bottom); 
```

[查看文档](http://developer.android.com/reference/android/graphics/Rect.html)

# android - android sdk自定义键盘不移动应用程序

> ID：16197185
> 
> 赞同：0
> 
> 时间：2013-04-24T16:20:32.227
> 
> 标签：android, sdk, keyboard, move

我认为这个问题之前已经发布过。我有一个自定义键盘，我需要让应用程序在它上面移动，就像带有调整的软键盘一样。是否有可能做到这一点？WindowManager 能以任何方式提供帮助吗？如果不可能，是否可以将自定义软键盘分配给应用程序中的编辑框而不提示用户选择自定义软键盘的对话框？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:15:41.720

> WindowManager 能以任何方式提供帮助吗？

WindowManager 在这里无济于事，但是如果您将整个键盘布局添加到 Activity 布局树的末尾，它应该会将所有其他元素向上推。使用 WindowManager 将允许您将键盘“浮动”在视图的其余部分之上。

> 没有提示用户选择自定义软键盘的对话框？

出于安全原因，这是不允许的。您可以覆盖`onTouch()`该 EditText 并显示您自己的自定义键盘，但这就是您所能做的。

# php - 调用 php foreach 的 Javascript 函数。可能吗？

> ID：16197188
> 
> 赞同：0
> 
> 时间：2013-04-24T16:20:55.893
> 
> 标签：php, javascript, database

我在我的项目中使用了背景图库插件（[http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)），但是当我将它附加到我的 wordpress 网站时，我发现了一个我无法解决的问题处理。画廊通过 javascript 调用图像。函数是这样的：

```
<script type="text/javascript">
    jQuery(function($){
        $.supersized({
            slides  : [
                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/kazvan-1.jpg'},
                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/kazvan-2.jpg'},  
                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/kazvan-3.jpg'}
                ]
        });
    });
</script> 
```

问题是我需要显示的图像是从 wordpress 数据库中获取的。在 javascript 中，我不知道它是如何工作的。有没有办法进行php调用？我在没有画廊插件的情况下使用的 php foreach 请求来调用图像是这样的：

```
<?php foreach ( $images as $image ) : ?>
    <img src="<?php echo $image->thumbnailURL ?>" />

    <?php if ( $image->hidden ) continue; ?>
    <?php if ( $gallery->columns > 0 && ++$i % $gallery->columns == 0 ) { ?>

    <?php } ?>
<?php endforeach; ?> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:31:15.023

你可以把这个 php 代码用来回显这个 javascript

```
<script type="text/javascript">
  jQuery(function($){
     $.supersized({
        slides  : [

                <?php $out=array();
                    foreach ( $images as $image ){ 
                       if ( $image->hidden ) continue; 
                       $out[]="{image :'".$image->thumbnailURL."'}";

                   } 
                   echo implode(",",$out);?> 
            ]
    });
  });
  </script> 
```

或者您可以为此使用 json，因为幻灯片输入是 json，请参阅此页面了解[如何对 url 进行 JSON 调用？](https://stackoverflow.com/questions/2499567/how-to-make-a-json-call-to-a-url)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:58:29.550

您的网页所做的只是准备一个最终答案，以发送到客户端的浏览器进行阅读。要准备此答案，您可以同时使用服务器端和客户端代码，无论它们如何混合在一起。如果您在脚本定义中需要数据库元素，您可以这样做：

```
<script type="text/javascript">
// client-side
<?php
// server-side
?>
// client-side
</script> 
```

# javascript - 如何在 safari 中关注特定的非表单元素？

> ID：16197189
> 
> 赞同：0
> 
> 时间：2013-04-24T16:20:57.910
> 
> 标签：javascript, safari

如果焦点位于页面上的单个表单元素并且使用按下，是否可以使用 javascript 将焦点放在 URL 之外的任何位置`Tab`？有一个设置“按标签突出显示网页上的每个项目”，默认情况下确实允许这样做，但是有没有办法在没有该设置的情况下强制执行这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:48:13.160

您只需要`tabindex`在任何元素上设置属性即可使其具有焦点。

[https://developer.mozilla.org/en-US/docs/DOM/element.tabIndex](https://developer.mozilla.org/en-US/docs/DOM/element.tabIndex)

[http://snook.ca/archives/accessibility_and_usability/elements_focusable_with_tabindex](http://snook.ca/archives/accessibility_and_usability/elements_focusable_with_tabindex)

# php - 如何访问从控制器内的视图提交的数据？

> ID：16197197
> 
> 赞同：0
> 
> 时间：2013-04-24T16:21:11.510
> 
> 标签：php, codeigniter, scope, variable-assignment

我有一个非常小的应用程序，它需要一个 id，然后根据该 id 更新一个数据库表。id 是视图的输入。

基本上我的数据库（模型）有`getAllProjects()`和`approveProject($id)`.

**控制器：**

```
<?php if (!defined('BASEPATH')) exit ('No direct script access allowed');

class ApproveProject extends CI_Controller {

    public function index () {
        $this->loadView();
    }

    public function getData () {
        $this->load->model("db_Projects");
        $this->db_Projects->getAllProjects();

    }

    public function updateDB () {
        // how can I get this variable?
        $this->db_Projects->approveProject($toApprove); 
    }

    public function loadView() {
        $this->load->view("ViewProjectApproval");
    }
}

?> 
```

**看法：**

```
<html language="en">
<head>
    <title>Aprobare Proiect</title>
</head>
    <h1> Aprobare Proiect </h1>
<body>
<div id="container">

    <?php
        if (isset($_POST['projectSubmit']) && ($_POST['projectSubmit'] == "Submit")) 
        { 
            $toApprove= $_POST['projectId'];
        }
    ?>

    <form action ="updateDB" method="post">
        <input type="text" name="projectId">
        <input type="submit" name="projectSubmit" value="Submit">
    </form>

</div>

</body> 
```

我不知道我的观点是否良好，或者是否应该如此......我怎样才能将 ID 发送到我的控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:32:45.590

您正在使用方法提交表单，因此您可以从控制器的方法内部`POST`检索变量，例如`POST`

```
$toApprove = $this->input->post('projectId'); 
```

所以你的方法/功能看起来像这样

```
public function updateDB () {
    if($this->input->post('projectId'))
    {
        $toApprove = $this->input->post('projectId');
        // load the model and call the method, like
        $this->load->model('model_name');
        $model_name->method_name($toApprove);
    }
} 
```

**更新：** 您的表单`action`看起来不正确，试试这个（controller_name/method_name）

```
<form action ="<?php echo site_url('ApproveProject/updateDB') ?>" method="post"> 
```

# java - 如何拆分此字符串

> ID：16197202
> 
> 赞同：0
> 
> 时间：2013-04-24T16:21:21.030
> 
> 标签：java, string, split

我有以下需要拆分的字符串，`"_Folder43\"`以便仅在数组的第二个元素中获得图像名称。

```
E:\generated\_Folder43\image4565.jpg 
```

到目前为止，我有以下代码

```
 String[] tokens = imageLoc.split("_Folder43\"); //backslash escapes the double quotes!
  imageLoc = tokens[1];
  System.out.println(imageLoc); 
```

上面代码中的第一行是问题所在，因为那里的反斜杠转义了双引号，因此不允许结束字符串。

所需的输出**image4565.jpg**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:37:13.043

不要使用字符串操作来处理文件路径。

如果您使用的是 Java 6 或更早版本，请改用[File](http://docs.oracle.com/javase/6/docs/api/java/io/File.html) API：

```
package com.example.file;

import java.io.File;

public class FileExample2 {

    /**
     * @param args
     */
    public static void main(String[] args) {
        String path = "E:\\generated\\_Folder43\\image4565.jpg";
        File f = new File(path);
        System.out.println(f.getName());
    }
} 
```

如果您使用的是 Java 7 或更高版本，请使用[Path](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html) API。不幸的是，我没有方便的 Java 7 来测试它，但我认为它会是这样的（如果有错误，请随时纠正我）：

```
public class PathExample {

    /**
     * @param args
     */
    public static void main(String[] args) {
        String path = "E:\\generated\\_Folder43\\image4565.jpg";
        Path p = Paths.get(path);
        System.out.println(p.getFileName().toString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:46:25.133

您需要使用另一个反斜杠来转义反斜杠：`"_Folder43\\"`. 但是，由于`String.split()`需要一个正则表达式，您还必须转义正则表达式中产生的反斜杠：`String[] tokens = imageLoc.split("_Folder43\\\\");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:07:43.727

而不是 split 使用下面的子字符串。

```
 String imageLoc ="E:\\generated\\_Folder43\\image4565.jpg";

     imageLoc = imageLoc.substring(imageLoc.lastIndexOf("\\")+1,imageLoc.length());

     System.out.println(imageLoc);

     or 

     String imageLoc ="E:/generated/_Folder43/image4565.jpg";

     imageLoc = imageLoc.substring(imageLoc.lastIndexOf("/")+1,imageLoc.length()); 
```

# c# - 在 wcf 方法上应用用户 MaxAllowedCall

> ID：16197207
> 
> 赞同：1
> 
> 时间：2013-04-24T16:21:43.993
> 
> 标签：c#, wcf, behavior

我想对我的服务方法实施调用限制。当达到每个客户端的最大调用量时，这些限制应该返回一个 FaultException。

我发现的第一个解决方案是对服务中的逻辑进行编码：

```
 public class MyService: IService
 {

    public IList<Entity> FindAll()
    {
        if(VerifyQuota(Context, "FindAll", this.GetType().Name))
        {
           //retrieves entities
            return entities;
        }
        else
        {
           //throws a FaultException
        }
        return null;
    }

    private bool VerifyQuota(ContextEntity context,string Method,String Service)
    {
      // counts the occurences of calls made by the user
      // returns true if user can access method , false otherwise
    }
 } 
```

它有效，但是：

*   比较丑
*   它污染了我的方法的逻辑
*   代码冗余太高，可维护性真的很差。

我正在寻找更优雅的解决方案并考虑使用 IOperationBehavior，但我不知道在哪里可以找到用户身份。

OperationContext.Current 未设置，Thread.CurrentPrincipal 也未设置。

所以这是我的问题： - 行为是实现这种功能的最佳方式吗？- 如果是，我在哪里可以找到用户的身份（或登录） - 如果不是，我可以在哪里放置此代码以使其适合 WCF 架构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:02:37.567

我一直在玩 Behaviors，发现我可以在 IparameterInspector 中访问 operationContext.Current。

IparameterInspector 实现：

```
class QuotaInspector : IParameterInspector
{
    #region IParameterInspector Members

    public void AfterCall(string operationName, object[] outputs, object returnValue, object correlationState)
    {

    }

    public object BeforeCall(string operationName, object[] inputs)
    {
        if(ServiceSecurityContext.Current != null)
        {
            if(ServiceSecurityContext.Current.PrimaryIdentity != null
                && ServiceSecurityContext.Current.PrimaryIdentity.AuthenticationType == "MembershipProviderValidator")
            {
                String Account = String.Empty;
                String serviceComponent = String.Empty;
                if(!String.IsNullOrEmpty(ServiceSecurityContext.Current.PrimaryIdentity.Name))
                    Account = ServiceSecurityContext.Current.PrimaryIdentity.Name;
                if(OperationContext.Current != null &&
                    OperationContext.Current.EndpointDispatcher != null
                    && OperationContext.Current.EndpointDispatcher.DispatchRuntime != null
                    && OperationContext.Current.EndpointDispatcher.DispatchRuntime.Type != null &&
                    !String.IsNullOrEmpty(OperationContext.Current.EndpointDispatcher.DispatchRuntime.Type.Name))
                    serviceComponent = ServiceSecurityContext.Current.PrimaryIdentity.Name;
                if(!String.IsNullOrEmpty(Account) && !String.IsNullOrEmpty(serviceComponent) && !string.IsNullOrEmpty(operationName))
                {
                    //Apply Quota verification here
                                            //throw FaultException if quota is reached
                }
            }

        }
        return null;
    }

    #endregion
} 
```

IOperationBehavior 实现：

```
class QuotaOperationBehavior : Attribute,IOperationBehavior
{
    #region IOperationBehavior Members

    public void AddBindingParameters(OperationDescription operationDescription, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
    {
    }

    public void ApplyClientBehavior(OperationDescription operationDescription, System.ServiceModel.Dispatcher.ClientOperation clientOperation)
    {

    }

    public void ApplyDispatchBehavior(OperationDescription operationDescription, System.ServiceModel.Dispatcher.DispatchOperation dispatchOperation)
    {
        dispatchOperation.ParameterInspectors.Add(new QuotaInspector());
    }

    public void Validate(OperationDescription operationDescription)
    {
    }

    #endregion

} 
```

要将配额应用于方法，您只需声明一个属性：

```
public class MyService: IService
 {

    [QuotaOperationBehavior]
    public IList<Entity> FindAll()
    {
       //retrieves entities
        return entities;
    }
 } 
```

# php - 单个用户的多个电子邮件地址和密码

> ID：16197209
> 
> 赞同：0
> 
> 时间：2013-04-24T16:21:49.360
> 
> 标签：php, mysql

我正在建立一个学校项目，我的想法是建立一个网站，您可以在其中注册一个帐户，向该帐户添加几个用户，然后计算他们每月的分摊费用债务，例如用户 A 支付 500 杂货和用户 B 只支付 250。这使用户 B 当月欠用户 A 125 的债务。

我的问题是我想将帐户与用户分开。现在我设置了一个名为 Accounts 的表，其中包含电子邮件和密码，然后我有一个包含特定用户信息的 users 表。我希望几个人能够使用不同的凭据登录到同一个帐户。

用户表

```
ID, Name, Account_id etc. 
```

帐户表

```
ID, Email, Password, date_added, date_updated etc. 
```

这样做的最佳方法是什么？是有一个名为 UsersForAccounts 的交叉表，还是我在用户表中指定了几个 account_id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:29:35.437

您不会将其视为一个帐户上的多个用户。您可以将其视为共享公共组设置的多个用户帐户。

因此，正如您所期望的那样，您有一个用户表——显然，每个表都有自己的值。

然后，您有一个相关的表来共享该组的详细信息。让我们以兄弟会或其他东西为例。所以你有 Pi Phi 作为组名。其中包括用户 A、B 和 C。一个非常非常基本的表结构可能如下所示：

```
Users: id, email, password, name, group_id

Group: id, name 
```

因此，通过这种设置，用户将只与一个组有关系。您可以将其设为关系表，以便用户可以根据需要拥有许多组。

这里的一般想法是，您将组用作用户的单独连接点，而不一定是使用同一帐户访问的多个用户。

如果不清楚，请随时询问，我可能会更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:32:52.077

您可以使用诸如**用户**表中的结构：

```
ID, Name, etc. 
```

在**Accounts**表中使用最简单的：

```
ID, Email, Password, date_added, date_updated, User_ID, etc 
```

这称为多对一关系，非常适合您的情况。

我可以传递给您的一个小提示是使用 LOWERCASE 到您的所有字段，或者特别是字段名称的第一个字符，并带有“ID”的摘录（这只是*标识*的首字母缩写词（或类似） ）

在一个基本示例中，**Users**表具有以下字段：

```
ID, name, etc. 
```

和**Accounts**表上面的结构：

```
ID, email, password, date_added, date_updated, user_id 
```

这在短时间内不会有太大帮助，但它可以帮助您，并且非常有助于您使用 PHP 使用数据库。

# sql - SQL - 按自定义 24 小时时段对结果进行分组

> ID：16197211
> 
> 赞同：3
> 
> 时间：2013-04-24T16:21:57.797
> 
> 标签：sql, database, oracle, rdbms

我需要创建一个 Oracle 11g SQL 报告来显示每日生产力：在 24 小时内运送了多少单位。每个时段从早上 6 点开始，到第二天早上 5:59 结束。

如何以显示这 24 小时期间的方式对结果进行分组？我试过按天分组，但是一天是 00:00 - 23:59，所以结果不准确。

结果将涵盖过去 2 个月。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:29:30.873

天数是 oracle 中的整数，所以早上 6 点是一天的 0.25，所以：

```
select 
trunc(date + 0.25) as period, count(*) as number
from table
group by trunc(date + 0.25 ) 
```

我目前还没有甲骨文可以尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:25:47.340

```
group by trunc(your_date - 1/4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:25:03.883

好吧，您可以按计算日期分组。因此，将日期添加 6 小时并按该日期分组，然后在技术上正确分组您的日期并产生正确的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T22:03:35.593

假设您的桌子上有一个`units`列或类似的列，可能是这样的：

[SQL小提琴](http://sqlfiddle.com/#!4/62a36/1)

```
SELECT 
  TRUNC(us.shipping_datetime - 0.25) + 0.25 period_start
, TRUNC(us.shipping_datetime - 0.25) + 1 + (1/24 * 5) + (1/24/60 * 59) period_end
, SUM(us.units) units
FROM units_shipped us
GROUP BY TRUNC(us.shipping_datetime - 0.25)
ORDER BY 1 
```

这只是从每个日期中减去 6 小时（一天 0.25 小时）。如果时间早于早上 6 点，则减法将使其落在午夜之前，并且当结果值被截断时（删除时间元素，返回午夜的日期），它属于前一天的分组。

**[结果](http://sqlfiddle.com/#!4/62a36/1/0)**：

```
|                 PERIOD_START |                   PERIOD_END | UNITS |
-----------------------------------------------------------------------
| April, 22 2013 06:00:00+0000 | April, 23 2013 05:59:00+0000 |     1 |
| April, 23 2013 06:00:00+0000 | April, 24 2013 05:59:00+0000 |     3 |
| April, 24 2013 06:00:00+0000 | April, 25 2013 05:59:00+0000 |     1 | 
```

SELECT 中的一些动态数学只是为了帮助结果的可读性。如果您没有`units`要向上的列`SUM()`，即每行代表一个单元，则`COUNT(*)`改为替换。

# javascript - 即时更改javascript函数？

> ID：16197212
> 
> 赞同：1
> 
> 时间：2013-04-24T16:22:01.867
> 
> 标签：javascript, html

我有一个 html 文档，它有 2 个 div（左和右）并且文档加载了一些 js 函数，一个名为 editme 的函数通常会加载到左 div 中，但是当用户展开右导航时，我希望这个 editme 函数启动/打开一个新窗口并做一些事情，这意味着如果可能，以下选项之一将起作用：1）销毁现有函数并重新创建一个具有相同名称的新函数 2）动态更改 js 函数

哪个是可能的以及如何？

谢谢。

根据建议添加以下内容：

```
edit=function(){} // works, however less value

edit=function(id) { 'window.open("editMe.cfm?taid="+id,"edit","left=260,top=20,height=410,width=590,resizable=1,scrollbars=1")' } // fails

SyntaxError: unterminated string literal

attempted to scape the double quotes like the following to no avail, 'window.open(\"editMe.cfm?taid=\"+id,\"edit\",\"left=260,top=20,height=410,width=590,resizable=1,scrollbars=1\")' 
```

难道我做错了什么？

仅供参考，此代码是 onclick 事件的其他代码的一部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:28:18.120

函数是 JavaScript 中的一等对象。只需将新函数重新分配给您已经（隐式）创建的变量......

```
function foo() {
    //do stuff
}

//now, reassign the var to do something else
foo = function() {
    //do other stuff
} 
```

并不是说这是一种好习惯……但是要回答您的问题，是的，这是*可能*的。

# css - CSS中的水平居中菜单？

> ID：16197216
> 
> 赞同：1
> 
> 时间：2013-04-24T16:22:22.810
> 
> 标签：css

我想做一个水平居中的菜单。我曾尝试使用诸如文本对齐中心和边距自动之类的东西，但无法让它们工作。我不想使用桌子。

这是我的代码：

```
<footer class="container">
    <div class="row">
        <div class="span12">
            <ul>
                <li>footer info 1</li>
                <li>footer info 2</li>
                <li>footer info 3</li>
            </ul>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T16:25:29.920

使用提供的 HTML：

```
ul { text-align: center; }
li { display: inline-block; } /* Don't float them */ 
```

[http://jsfiddle.net/NpLR3/](http://jsfiddle.net/NpLR3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:29:25.817

以下将在**不使用`text-align`**的情况下工作：

```
footer {
    width: 100%;
}
.row {
    position: absolute;
    left: 50%;
}
.span12 {
    position: relative;
    left: -50%;
}
ul {
    padding: 0;
}
li {
    display: inline;
    list-style: none;
    margin-left: 1em;
}
li:first-child {
    margin-left: 0;
} 
```

重要的位是：

(1) 菜单的外部容器有 100% 的宽度，

(2) 内部容器绝对位于左侧 50%（菜单左侧位于页面中心），并且

(3) 然后将菜单相对定位在左侧 -50% 处（将其移回左侧一半宽度，以便菜单的中心现在位于页面的中心）。

其他的只是化妆品。

[请参阅工作示例](http://jsfiddle.net/QkzzC/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:26:03.253

[演示](http://jsfiddle.net/yzh76/)

```
.container{
    background:#ddd;
    width: 100%;
    text-align:center;
}
li{
    display: inline-block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T16:29:11.837

见[http://jsfiddle.net/aCSgz/](http://jsfiddle.net/aCSgz/)

基本上你需要设置 ul 和 li 来显示：块。

```
ul { display: block; text-align:center; }
ul li { display: block; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T16:31:44.327

您需要将`display`LI 上的属性`inline-block`设置为`text-align`并将 UL 上的属性设置为`center`。

HTML：

```
<footer class="container">
    <div class="row">
        <div class="span12">
            <ul>
                <li>footer info 1</li>
                <li>footer info 2</li>
                <li>footer info 3</li>
            </ul>
        </div>
    </div>
</footer> 
```

CSS：

```
footer {
    background:#fdd;
}
div.row {
    background: #dfd;
}
ul {
    background: #ddf;
    list-style: none;
    margin: 0;
    padding: 0;
    text-align: center;
}

li {
    display: inline-block;
    background: #fff;
    margin: 0.5em;
    padding: 0.5em;
} 
```

[http://jsfiddle.net/ghodmode/h2gT3/1/](http://jsfiddle.net/ghodmode/h2gT3/1/)

# wxwidgets - wxDialog Destroy 函数是如何工作的

> ID：16197218
> 
> 赞同：1
> 
> 时间：2013-04-24T16:22:23.853
> 
> 标签：wxwidgets

全部：

我有一个关于 wxDialog Destry() 的问题：

假设我创建了一个继承自 wxDialog 的对话框，例如：

```
 wxMyDialog dlg = new wxMyDialog(.....the pararmeter.....) 
```

在 wxMyDialog 内部，有一些 wxwidgets 指针，例如 wxbutton*、wxBoxSizer* ....

我读了一些教程，其中大多数都没有提到指针内部发生了什么，所以我想知道，当我调用时`dlg->Destroy()`，所有这些指针都可以自动释放吗？有人能告诉我 Destroy() 背后发生了什么吗？

或者

如果没有，我怎样才能手动释放它们？

最好的，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:25:07.547

当您在对话框中创建小部件指针时，您将指针传递给父对话框。父级保留这些指针，并且当父级对话框被破坏时，会在这些指针上调用 delete。所以，你看，每个窗口都会清理自己的孩子。

底线：孩子是由他们的父母“拥有”的，您永远不必担心在他们之后收拾东西 - 父母会这样做。

几个特殊情况：

1.  如果您将 NULL 作为父窗口传递给小部件创建者，这意味着小部件属于桌面窗口，而不是应用程序。您不应该对除顶级窗口之外的任何东西执行此操作！

2.  您不会将父窗口指针传递给 sizer 的构造函数。相反，您将 sizer 指针传递给父窗口的 SetSizer 方法 - 这具有相同的效果，父窗口拥有 sizer 并在窗口被销毁时将其删除。

# .htaccess - .htaccess 中需要 mod_rewrite 重写帮助

> ID：16197219
> 
> 赞同：1
> 
> 时间：2013-04-24T16:22:26.947
> 
> 标签：.htaccess, mod-rewrite

我已经在网上寻找解决方案，但我正在努力寻找正确的答案。希望有人可以提供帮助。

我在这样的网页上有以下翻译链接，`<a href="/de/about/">Translate</a>`但我的服务器上的实际路径是`/_translations/de/about/`.

目前，链接会出现 404 错误，如果我将 url 附加到实际路径，当然可以工作。

重写规则是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:27:51.593

尝试将这些规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z]{2})/(.*)$ /_translations/$1/$2 [L] 
```

# c#-4.0 - 从 DbSqlQuery 检索属性

> ID：16197221
> 
> 赞同：1
> 
> 时间：2013-04-24T16:22:31.177
> 
> 标签：c#-4.0, entity-framework-5, dbcontext

背景：Project 是一个数据导入实用程序，用于通过 DbContext 将数据从 tsv 文件导入 EF5 DB。

问题：我需要在导入时查找 ForeignKeys。我有办法做到这一点，但如果 ID 不起作用，则进行检索。

所以我有一个 TSV 文件示例将是

```
Code    Name    MyFKTableId
codevalue   namevalue   select * from MyFKTable where Code = 'SE' 
```

因此，当我处理文件并查找“...Id”列时，我知道我需要查找 FK '...' 始终是实体类型，所以这非常简单。我遇到的问题是我无权访问 foundEntity 结果的属性

```
string childEntity = column.Substring(0, column.Length - 2);
DbEntityEntry recordType = myContext.Entry(childEntity.GetEntityOfReflectedType());

DbSqlQuery foundEntity = myContext.Set(recordType.Entity.GetType()).SqlQuery(dr[column]) 
```

任何建议将不胜感激。我需要保持这个通用性，这样我们就不能使用已知的类型转换。可从 IBaseEntity 访问的 Id 属性，因此我可以强制转换它，但所有其他实体类型不得固定

注意：MyFKTableId 值中的 SQL 不是必需的。如果有更好的选择允许摆脱 SqlQuery() 我会接受建议。

**已解决：** 好的，我所做的是创建一个名为 IdClass 的类，它只有一个用于 Id 的 Guid 属性。将我的 sql 修改为只返回 Id。然后在数据库上实现 SqlQuery(sql) 调用，而不是像这样的 Set([Type]).SqlQuery(sql) 。

```
IdClass x = ImportFactory.AuthoringContext.Database.SqlQuery<IdClass>(sql).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:22:37.707

**已解决：** 好的，我所做的是创建一个名为 IdClass 的类，它只有一个用于 Id 的 Guid 属性。将我的 sql 修改为只返回 Id。然后在数据库上实现 SqlQuery(sql) 调用，而不是像这样的 Set([Type]).SqlQuery(sql) 。

```
IdClass x = ImportFactory.AuthoringContext.Database.SqlQuery<IdClass>(sql).FirstOrDefault(); 
```

# c# - 如何在 ASP MVC 应用程序中启用代码优先迁移？

> ID：16197226
> 
> 赞同：1
> 
> 时间：2013-04-24T16:22:45.423
> 
> 标签：c#, asp.net-mvc, entity-framework, ef-code-first

我有带有实体框架代码优先方法的 ASP.NET MVC4 应用程序。我最近将我的 DbContext 继承者移到了单独的模型项目中（我已将连接字符串从 web.config 复制到 app.config）。

现在，当我尝试运行我的应用程序时，我遇到了一个错误，即我的数据库应该直接通过 Code First 或 Migrations 创建。第一种方式不适合我，因为我有远程数据库服务器（我是通过主机的控制面板创建的）。

但是当我尝试启用迁移时，我遇到了错误`No context type was found in the assembly 'MyProject'`。这显然是因为我的 DbContext 继承者没有放在启动项目中。

那么如何指示在单独的项目中查看上下文类？

* * *

顺便说一句，我有`DropCreateDatabaseIfModelChanges<>`我的 DbContext 继承者的初始化程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:38:54.760

在 Package Manager Console 中，如果您运行`Get-Help Enable-Migrations`，它将显示所有高级选项。其中包括：

*   -ProjectName（运行此命令的项目，即查找上下文类型）
*   -StartupProjectName（具有上下文运行的app.config/web.config 的项目，即连接字符串所在的位置）。 **除非您的模型项目在其自己的 .config 文件中具有正确的连接字符串，否则这一点很重要。**
*   -ConnectionString（如果要覆盖该值，则在构建迁移时使用的连接字符串）

当您使用`Add-Migration`它时，它应该支持相同的选项。

您还可以更改包管理器控制台的默认项目下拉菜单以默认针对您的模型项目运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:34:01.380

如果您使用包管理器控制台，您可以选择一个默认项目，实体框架将在其中搜索您的`DbContext`. ![在此处输入图像描述](https://i.stack.imgur.com/N0f8U.png)

# java - 监听器来判断一个表中是否有一个元素

> ID：16197229
> 
> 赞同：2
> 
> 时间：2013-04-24T16:22:50.563
> 
> 标签：java, swt, jface, tableviewer

我正在使用 SWT/JFace 开发一个 Java 项目。我有一个`Table`正在使用`TableViewer`. 该表将永远只有 0 或 1 个项目（取决于它正在查看的数据......）。有没有办法听这张桌子，看看里面是否有项目。`ISelectionChangedListener`到目前为止，我一直在查看器上使用它，但它不能完美地工作，因为用户必须单击该项目来注册更改。理想情况下，每次将项目放入表中或从表中删除时都会触发侦听器。我环顾四周，但找不到我需要的东西。

外面有人知道我在找什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:14:22.987

严格基于此，“表中只会有 0 或 1 个项目”，一个简单的解决方法是使用 a `PaintListener`，即使窗口隐藏在其他窗口后面也可以。**主要**缺点是当内容在 UI 上不可见时（例如通过滚动访问时）`TableItem`，**它将**不起作用。该解决方案适用于 Win7 和 eclipse 3.7.2。

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.events.PaintListener;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;
import org.eclipse.swt.widgets.TableItem;

public class TableTest {
    static int counter = 0;
    public static void main(String[] args) {
        final Display display = new Display();
        Shell shell = new Shell(display);
        shell.setLayout(new GridLayout(1, false));
        shell.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));

        final Table table = new Table(shell, SWT.BORDER);
        table.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
        table.setHeaderVisible(true);
        table.setLinesVisible(true);
        table.addPaintListener(new PaintListener() {
            public void paintControl(PaintEvent e) {
                System.out.println(((Table)e.widget).getItemCount() > 0);
            }
        });

        TableColumn column = new TableColumn(table, SWT.LEFT);
        column.setWidth(180);
        column.setText("Test Column");

        Button button = new Button(shell, SWT.PUSH);
        button.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, false));
        button.setText("Add item");
        button.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                TableItem item = new TableItem(table, SWT.NONE);
                item.setText("" + counter++);
                if(counter > 10) {
                    table.clearAll();
                    counter = 0;
                } 
            }
        });

        display.timerExec(1000, new Runnable() {
            public void run() {
                if(table.isDisposed()) return;
                TableItem item = new TableItem(table, SWT.NONE);
                item.setText("" + counter++);
                if(counter > 10) {
                    table.clearAll();
                    counter = 0;
                }

                display.timerExec(1000, this);
            }
        });

        shell.setSize(220, 300);
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }
} 
```

**注意：** SWT小部件不支持[LVN_INSERTITEM](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774841%28v=vs.85%29.aspx)`Table`。检查小部件`windowProc`中的方法`Table`。

# python-2.7 - 使用 paramiko 模块 SSH 进入交换机

> ID：16197232
> 
> 赞同：0
> 
> 时间：2013-04-24T16:23:01.923
> 
> 标签：python-2.7

我可以使用 paramiko 打开一个 ssh 会话进入 switch。能够输入命令并获得相应的输出。我的问题是我想同时在交换机中输入许多命令。但是在输入新命令之前，想知道之前的命令是否成功输入到交换机中。例如

switch>enable switch# switch#config t switch(config) 输入第二个命令，直到我看到#符号和第三个命令，直到我看到配置。以下是我正在使用的代码

```
import paramiko
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect('ip-address',username='username', password='password')
list =['enable','config t']
command = '\n'.join(list)
#for i in range(len(list)):
print command
stdin,stdout,stderr = ssh.exec_command(command)
print(stdout.read()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:32:38.280

use interactive invoke shell

```
##invoke interactive shell chan = ssh.invoke_shell(); chan.send(command + '\n') ;
while not chan.recv_ready(): print 'waiting for challenge' time.sleep(1) ;       
resp = chan.recv(1024)  ;  print resp 
```

# sencha-touch-2 - Sencha Touch：如何从 2.1 升级到 2.2？

> ID：16197234
> 
> 赞同：5
> 
> 时间：2013-04-24T16:23:04.283
> 
> 标签：sencha-touch-2

我想我遗漏了一些非常非常明显和容易的东西，但是 - 我如何将我的 2.1-app 迁移到 2.2？我必须复制什么或必须运行哪个脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:14:21.830

请注意，主题在 2.1 和 2.2 之间发生了变化。特别是用于按钮的 Picto 图标现在已被字体取代。不幸的是，新的 Picto 字体似乎不包含上一组中所有图标的条目，我还没有找到继续使用旧图标的方法。因此，您的新 2.2 版应用程序可能看起来与您的 2.1 版应用程序不同。

# postgresql - 更改列类型并设置不为空

> ID：16197236
> 
> 赞同：124
> 
> 时间：2013-04-24T16:23:13.393
> 
> 标签：postgresql

您如何更改列类型并将该列设置为`not null`一起？

我在尝试：

```
ALTER TABLE mytable ALTER COLUMN col TYPE character varying(15) SET NOT NULL 
```

这将返回一个错误。

什么是正确的语法？

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2013-04-24T16:42:43.317

这应该是正确的：

```
ALTER TABLE mytable
    ALTER COLUMN col TYPE character varying(15),
    ALTER COLUMN col SET NOT NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-29T07:09:03.823

另外，如果你想在 postgresql中**删除NOT NULL 约束：**

```
ALTER TABLE mytable 
    ALTER COLUMN email DROP NOT NULL; 
```

# .net-4.5 - .NET 4.5 SessionAuthenticationModule - “validFrom”问题

> ID：16197239
> 
> 赞同：1
> 
> 时间：2013-04-24T16:23:26.007
> 
> 标签：.net-4.5, wif, acs

我在 Windows Azure ACS 中使用 SWT，并且在依赖方应用程序中使用自定义 SwtHandler 来处理传入的 SWT 令牌。虽然它在依赖方重新创建 SWT 令牌，但在创建与 validFrom 属性值相关的 SessionSecurityToken 时出现错误。

我已经尝试了以下 ValidFrom 值，但没有解决问题。

1.  DateTime SwtBaseTime = new DateTime(1970, 1, 1, 0, 0, 0, 0);
2.  日期时间.UtcNow
3.  DateTime.MinValue 指定的参数超出了有效值的范围。参数名称：validFrom

[ArgumentOutOfRangeException：指定的参数超出了有效值的范围。参数名称：validFrom]

System.IdentityModel.Tokens.SessionSecurityToken..ctor（ClaimsPrincipal claimPrincipal，UniqueId contextId，String id，String context，Byte [] key，String endpointId，Nullable `1 validFrom, Nullable`1 validTo，UniqueId keyGeneration，Nullable `1 keyEffectiveTime, Nullable`1 keyExpirationTime，SctAuthorizationPolicy sctAuthorizationPolicy，Uri securityContextSecurityTokenWrapperSecureConversationVersion）+1009610 System.IdentityModel.Tokens.SessionSecurityToken..ctor（ClaimsPrincipal claimPrincipal，UniqueId contextId，字符串上下文，字符串 endpointId，Nullable`1 validFrom, Nullable`1 validTo, SymmetricSecurityKey key) +317 System.IdentityModel.Tokens.SessionSecurityTokenHandler.CreateSessionSecurityToken(ClaimsPrincipal principal, String context, String endpointId, DateTime validFrom, DateTime validTo) +306 System.IdentityModel.Services.SessionAuthenticationModule.CreateSessionSecurityToken(ClaimsPrincipal principal, String context , DateTime validFrom, DateTime validTo, Boolean isPersistent) +313 System.IdentityModel.Services.WSFederationAuthenticationModule.SignInWithResponseMessage(HttpRequestBase request) +1079 System.IdentityModel.Services.WSFederationAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs args) +123924 System.Web.SyncEventExecutionStep .System.Web.HttpApplication.IExecutionStep.Execute() +80 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean&同步完成）+165

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-17T18:01:28.787

在尝试为 SessionAuthenticationModule 实现滑动到期时，我遇到了重新创建会话安全令牌的类似问题。

```
protected void SessionAuthenticationModule_SessionSecurityTokenReceived(object sender, SessionSecurityTokenReceivedEventArgs e)
{
    DateTime now = DateTime.UtcNow;
    DateTime validFrom = e.SessionToken.ValidFrom;
    DateTime validTo = e.SessionToken.ValidTo;
    TimeSpan sessionLifetime = validTo.Subtract(e.SessionToken.ValidFrom);

    bool sessionTimeHasExpired = now > validTo;
    bool sessionTimeIsHalfExpired = now > validFrom.AddMinutes(sessionLifetime.TotalMinutes / 2);

    // http://www.michael-mckenna.com/Blog/2013/2/the-problem-with-absolute-token-expiration-in-windows-identity-foundation-wif
    if (!sessionTimeHasExpired && sessionTimeIsHalfExpired)
    {
        // If the session has not expired but the session lifetime is already half spent, reissue the cookie. 
        e.SessionToken = (sender as SessionAuthenticationModule).CreateSessionSecurityToken(e.SessionToken.ClaimsPrincipal, e.SessionToken.Context,
        now, now.AddMinutes(sessionLifetime.TotalMinutes), e.SessionToken.IsPersistent);
        e.ReissueCookie = true;
    }
} 
```

CreateSessionSecurityToken 方法采用validFrom 和validTo 的值。如果这两个值相等，则会引发 ArgumentOutOfRange 异常。

我遇到了这个问题，因为最初我使用的是 sessionLifetime.Minutes（0）而不是 sessionLifetime.TotalMinutes（100）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T12:42:31.123

尝试使用相同的`KeyEffectiveTime`

```
e.SessionToken = sam.CreateSessionSecurityToken(
                     e.SessionToken.ClaimsPrincipal,
                     e.SessionToken.Context,
                     e.SessionToken.KeyEffectiveTime, 
                     e.SessionToken.KeyExpirationTime.AddHours(8), 
                     e.SessionToken.IsPersistent); 
```

# asp.net-mvc-3 - 将错误消息从控制器发送到 ASP.net MVC3 中的视图

> ID：16197242
> 
> 赞同：3
> 
> 时间：2013-04-24T16:23:34.643
> 
> 标签：asp.net-mvc-3, model-view-controller

我很好奇如何做到这一点，我想为论坛**和**从控制器到视图的常规视图发送自定义错误消息（因此寻找两者的示例）。我已经看到 `ModelState.AddError()`我希望如何控制能够将其包装在前端 div 中的错误消息的外观。

有任何想法吗？

我对 ASP.net 很陌生，那里的教程对我来说似乎很混乱。所以我真的没有任何代码可以显示，因为我不确定我应该做什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T17:17:10.637

我相信您正在寻找自定义视图上的错误消息。您可以通过`ModelState.AddModelError("", "error message")`三种方式自定义错误消息，包括您添加的错误消息。

## 选项1

通过类使用`Html.ValidationSummary()`和自定义其外观`validation-summary-errors`。VS 中默认的 mvc 项目模板将默认包含该类。它的默认颜色为红色（我认为）。但是您实际上可以通过更改该类来控制错误摘要的各个方面。

```
.validation-summary-errors {
    border: 5px solid red; // thick red border
    color: #3904D9; // dark blue
    font-size: 1.5em; // quite big fonts
    font-weight: bold;
} 
```

## 选项 2

以`ValidationSummary`无序列表 ( `li`) 输出消息。如果您的项目要求以不同的方式显示错误消息，您可以通过检查`ViewDataDictionary`. 以下代码会将错误消息写入带有细红色边框的单独 div 中。样式是内联编写的，以使示例简单。

```
@foreach (var item in ViewData.ModelState) {
    if (item.Value.Errors.Any()) {
        foreach (ModelError e in item.Value.Errors) {
            <div style="border: 1px solid red;margin-bottom:5px;">
                @e.ErrorMessage</div>
        }
    }
} 
```

## 选项 3

如果您不想在视图中添加逻辑，则可以扩展 htmlhelper（或创建自定义帮助器）。您基本上将在自定义 htmlhelper 中使用选项 2 中显示的相同逻辑。

```
public static class HtmlExtensions {
    public static MvcHtmlString CustomValidationSummary(this HtmlHelper helper)
    {
        var html = string.Empty;
        foreach (var item in helper.ViewData.ModelState)
        {
            if (item.Value.Errors.Any()) {
                foreach (ModelError e in item.Value.Errors) {
                    html 
                      += "<div style='border: 1px solid red;margin-bottom:5px;'>" 
                      + e.ErrorMessage 
                      + "</div>";
                }
            }
        }

        return MvcHtmlString.Create(html);
    }
} 
```

然后以与使用相同的方式使用它`ValidationSummary`：

```
@Html.CustomValidationSummary() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:28:47.357

您可能想要查看该`ViewBag`对象。如果您`ViewBag.ErrorMessage`在控制器中设置，它将在您的视图中作为字符串提供。而且，实际上，您可以随意命名它，而不仅仅是 ErrorMessage。

添加这个并在您的视图中包含逻辑以仅显示如果`!string.IsNullOrEmpty(ViewBag.ErrorMessage)`并且您应该是好的。

这只是多种方法中的一种。`ViewBag`只是 的一个包装器`ViewData`，所以如果你被卡住了，你可能还想查看那个对象。

虽然这个答案并不全面，但希望它能给你一个起点。

祝你好运！！

# java - struts 多维地图支持的动作形式

> ID：16197244
> 
> 赞同：1
> 
> 时间：2013-04-24T16:23:44.423
> 
> 标签：java, html, struts

我正在尝试在 struts 1 动作表单中使用二维地图。我已经在这里[http://struts.apache.org/release/1.2.x/userGuide/building_controller.html](http://struts.apache.org/release/1.2.x/userGuide/building_controller.html)查看了地图支持的操作表单的 struts 文档。但是，这是针对一维地图的。我已经让它工作了，但我不喜欢我的解决方案。本质上，我必须将组合键传递给我的 setter 和 getter，并将组合键拆分为正确的键。有没有其他方法可以做到这一点。

```
public FooForm extends ActionForm {

    private final Map<String, Map<String,String>> values = new HashMap<String, Map<String,String>>();

    public void setValue(String key, Object value) {
        String[] keys = key.split("_");
        if (keys.length == 2) {
            Map<String, String> innerValues = costValues.get(keys[0]);
            if (innerValues == null) {
                innerValues = new HashMap<String, String>();
            }
            innerValues.put(keys[1], value);
            values.put(keys[0], innerValues);
        }
    }

    public String getValue(String key) {
        String[] keys = key.split("_");
        if (keys.length == 2) {
            Map<String, String> innerValues = values.get(keys[0]);
            if (innerValues != null) {
                return innerValues.get(keys[1]);
            }
        }
        return null;
    }
}

<html:text property="value(foo_bar)"/> 
```

# java - 从证书中检索完整的扩展值

> ID：16197253
> 
> 赞同：3
> 
> 时间：2013-04-24T16:23:57.347
> 
> 标签：java, certificate, ssl-certificate, x509certificate, bouncycastle

我正在使用：**java.security.cert.X509Certificate**包。和**java.security.cert.X509CRL；**

当我得到扩展值时，例如当 OID=2.5.29.14 (它是 SubjectKeyIdentifier) **cert.getExtensionValue("2.5.29.14");** 我得到这个字节 [] 范围：

[4,22,4,20, **5,125,-118,106,-44,108,39,-74,-108,-20,-27,-32,-113,64,-69,125,-8,102,-52,-24** ]

当我在证书中看到时， SubjectKeyIdentifier**从 5 开始**。

**问题1：这个范围的开始是什么？它是 4 个字节。**

当我在 X509CRL 中看到 AuthorityKeyIdentifier 时（如果 CRL 由该证书签名，则 CRL 的 AuthorityKeyIdentifier == SubjectKeyIdentifier Of certificate）有相同的：

[4,24,48,22,-128,20, **5,125,-118,106,-44,108,39,-74,-108,-20,-27,-32,-113,64,-69,125,-8,102, -52,-24** ] 但开头还有 6 个字节。

**问题2：这个范围的开始是什么？它是 6 个字节。**

还有一个问题：

**问题 3：如何解析 ExtensionValue 以便仅获取 Identifier 值。这个 4 和 6 字节是固定的吗？解析的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-25T10:12:44.110

**问题 1 的答案**：这些字节是**ASN 1**数据结构的二进制表示。ASN 1（Abstract Syntaxt Notation One）是由**ITU**定义的标准，通常用于 RFC/消息协议中以定义更高级别的数据结构（例如 X.509 证书）。

ASN 1 具有由三元组（标签类型、长度、值）组成的基本语法。一些 ASN 1 标签允许嵌套元素。在你的情况下，你有一个

```
ASN 1 OCTET STRING（标签类型 4），长度为 22，其中包含
  ASN 1 OCTET STRING（字节数组中的第二个 4），长度为 20。
    密钥标识符

```

**对问题 2 的回答**：AuthorityKeyIdentifier 的定义与 SubjectKeyIdentifier 不同（详情请查看 RFC 5280）。在你的情况下，它是一个

```
ASN 1 个字节长度为 24 的字符串，其中包含一个
  ASN 1 CONSTRUCTED SEQUENCE（标签类型 16 用于 ASN 1 SEQUENCE，标签类型 32 用于 ASN 1 CONSTRUCTED 逻辑上或'red -> 16 + 32 = 48），长度为 22，其中包含
    长度为 20 的 ASN 1 上下文特定数据（标签类型 128，将 -128 转换为字节）
      密钥标识符

```

数据结构与 SubjectKeyIdentifier 扩展不同，因为 AuthorityKeyIdentifier 扩展也可以由证书的颁发者和序列号组成，用于验证当前证书。

在您的情况下，两个键标识符（字节数组的最后 20 个字节）是相等的。因此，您可以使用第一个问题中提到的证书来验证第二个问题中提到的 CRL 的签名（验证防止 CRL 被操纵）。

**对问题 3 的回答**：我强烈建议不要自己实施 ASN 1。使用诸如 Bouncycastle 之类的库。要正确解析数据结构，您必须使用适当的类，尤其是对于 Bouncycastle，没有便利类可以通过尽力而为的方法确定 ASN 1 结构的类型。然而，这种方法几乎不可能实施。

例如，假设我们有字节数组 [4,4,67,68,45,53] 此数据（ASN 1 OCTET STRING）是否表示：

*   LDAP 消息或
*   JPEG 或
*   人类可读的字符串或
*   ...？

由于在 ASN 1 上定义的协议数量众多，因此无法说数据应该代表哪个对象。此外假设所有列出的解释都是可能的（它们不是）应该由通用库选择哪一个？再次假设该数据将是有效的 JPEG 图像和有效的 LDAP 消息。JPEG 将具有透明度、rgb 颜色等内容。LDAP 消息有一个协议操作的 id（BIND 请求、BIND 响应、SEARCH 请求……）和其他一些东西。您想进行一些棘手的位操作以从一种转换为另一种吗？

此外，数据可能应该代表与我们奇妙的库所猜测的完全不同的东西。不幸的是，由于 TCP 包损坏，数据已损坏，... 现在我们的图书馆不能给我们类似的消息

```
"Bad LDAP message, syntax violated by ..." 
```

因为它不小心将数据解析为完全合法的 JPEG。

要解析显示的数据，例如使用 Bouncycastle（假设版本 1.51）：

```
//retrieve the certificate from somewhere
X509Certificate c = ...;
String oid = Extension.authorityKeyIdentifier.getId();
byte[] extensionValue = c.getExtensionValue(oid);
ASN1OctetString akiOc = ASN1OctetString.getInstance(extensionValue);
AuthorityKeyIdentifier aki = AuthorityKeyIdentifier.getInstance(akiOc.getOctets()); 
```

然后你可以调用

```
aki.getKeyIdentifier();
aki.getAuthorityCertIssuer();
aki.getAuthorityCertSerialNumber(); 
```

用于进一步处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T07:01:46.307

cert.getExtensionValue("2.5.29.14") 的返回是 OCTET STRING 的编码。

在 Bouncy Castle 中，您可以获得实际的**编码值**：

```
byte[] octets = ASN1OctetString.getInstance(cert.getExtensionValue("2.5.29.14")).getOctets(); 
```

对于 SubjectKeyIdentifier，此值将是另一个编码的 OCTET STRING，因此您可以重复该过程（如使用 ASN1OctetString）或使用 SubjectKeyIdentifier.getInstance(octets)。可以对 AuthorityKeyIdentifier 遵循相同的过程。

如果您正在做很多此类事情，您可能还想查看 bcpkix 发行版中 org.bouncycastle.cert 中的类。持有者类的设计目的是使这种分析和处理更容易进行。

# matlab - Matlab while循环故障排除

> ID：16197257
> 
> 赞同：0
> 
> 时间：2013-04-24T16:24:17.557
> 
> 标签：matlab

我是使用 Matlab 的新手，需要一些帮助来修复这个 while 循环。我无法让while循环工作。我希望循环继续，直到变量 Velocity2 >= -20 但代码不会停止运行。

**职能**

```
function [a] = acceleration(F,m,g) a=(F-m*g)/m;

function [v] = velocity(a,t,v0,t0) v=v0+a*(t-t0);

function [h] = height(a,t,h0,v0,t0) h=h0+v0*(t-t0)+(1/2)*a*(t-t0).^2; 
```

**代码**

```
t0=0.15; % Initial time

dt=0.001; % Timesteps/Precision

v0=46.5285; % Initial velocity

h0=3.4896% Initial height

m=0.05; %Mass

g=9.81; % The gravitational constant

Velocity2=v0;

while Velocity2>=-20

 t=t0+dt;
 Velocity2=velocity(acceleration(0,m,g),t,v0,t0);
 Height2=height(acceleration(0,m,g),t,h0,v0,t0);

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:35:06.000

这是因为时间没有改变：`t=t0+dt;`将始终转动相同的值，`t`这也将阻止 Velocity2 变低，因此始终保持在 -20 以上，这将导致无限循环。更改`t=t0+dt;`为`t=t+dt;`应该修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:42:33.383

你需要这个：

```
t = t0

while Velocity2>=-20
    Velocity2=velocity(acceleration(0,m,g),t,v0,t0);
    Height2=height(acceleration(0,m,g),t,h0,v0,t0);

    t = t + dt;
end 
```

# css - css 或 Javascript 重复图像而不裁剪它

> ID：16197262
> 
> 赞同：0
> 
> 时间：2013-04-24T16:24:42.983
> 
> 标签：css, image

是否可以在 css 中在 div 标签（或其他标签）的背景上重复（repeat-y）您的图像但不裁剪它。因此，当图像不完全适合标签时，标签的高度会增加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:32:30.153

不完全是。
您可以`min-height`将该元素指定为等于背景图像的高度，但这并不能保证图像第一次重复时该重复也是 100% 可见的。

如果您希望所有重复都以 100% 可见，则必须使用一些 javascript。

编辑（因为问题已更新）：如果您对 jQuery 没问题：

[http://jsfiddle.net/ytXd6/](http://jsfiddle.net/ytXd6/)

基本上，您设置`min-height`并且对于多次重复，您将高度除以图像的高度并添加余数，以便 div 的高度始终是图像高度的倍数。

# git - 直接从裸仓库查看 git 项目

> ID：16197270
> 
> 赞同：0
> 
> 时间：2013-04-24T16:25:17.200
> 
> 标签：git, web, wamp

我有一台安装了 WAMP 2.2 的本地服务器，我刚刚在其上安装了[Git Stack](http://gitstack.com/ "Git 堆栈")以与本地用户共享项目，现在，我当然无法查看服务器上的裸存储库，

所以我需要做一些像HEROKU这样的东西，在推送更改后我想直接访问服务器上的项目，就像HEROKU .....推送和查看

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T16:12:38.803

看起来 Git Stack 带有自己的 Apache 来服务其管理页面。默认情况下，它将使用端口 80，就像 WAMP 附带的 Apache 一样。

您将不得不更改 Git Stack 使用的端口，请参阅文档。

# database - 发挥框架安全模块性能

> ID：16197272
> 
> 赞同：0
> 
> 时间：2013-04-24T16:25:17.857
> 
> 标签：database, performance, security, playframework, playframework-1.x

我正在使用播放框架版本 1.2.5 我将安全模型添加到我的应用程序中。验证我的视图是否根据用户权限隐藏一些 html 菜单。我还将验证用户登录等（我当前关于视图的问题）我在 Security 类中使​​用了 check 方法，如下所示

```
static boolean check(String profile) {
    LicenseType license = LicenseType.valueOf(profile);
    User user = User.find("byEmail", connected()).first();
    return user.hadLicense(license);
} 
```

例如在我的模板中我这样做

```
<html><body>
        #{secure.check "ADMIN"}
             <a href="link-to-admin-page" >
        #{/secure.check}
        .... some html 
        #{secure.check "EDIT"}
              <div>some html here </div>
        #{/secure.check}
        .... some html 
        #{secure.check "ADD"}
              <div>some html here </div>
        #{/secure.check}

</body></html> 
```

我的问题是这样的。这种情况意味着，像这样的单个视图将访问数据库 4 次以通过电子邮件选择用户。只是为了检查安全？

谢谢你 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T06:05:11.353

是的，这确实意味着每次检查都会访问数据库（尽管 JPA 可能会给您一个缓存条目 - 不确定那里）。

为避免这种情况，您可以在每个请求的基础上缓存结果

请求参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T20:08:21.290

从您提供的代码示例中，用户似乎已经登录。所以我建议您将用户许可证变量存储在会话中，然后使用静态方法进行比较。您同样可以将许可证存储在缓存中（memcache）

例如

 `````
static boolean check(String profile){   
        LicenseType license = LicenseType.valueOf(profile);       
        return User.hadLicense(license, connectedLicense());  
   } 
````  `注意：connectedLicense() - 是登录时用户存储的许可证。``

# clojure - 期货和加载文件中的异常处理

> ID：16197274
> 
> 赞同：6
> 
> 时间：2013-04-24T16:25:21.123
> 
> 标签：clojure

我希望我的 clojure 程序有一个可以运行的脚本目录 - 这些脚本中的每一个都是我使用加载文件执行的 clojure 代码。这发生在未来，因此脚本在自己的线程中运行。

问题是我从未从脚本中看到任何错误消息。如果脚本失败，则无法知道出了什么问题。我认为这是因为未来的线程中没有异常处理。我可以将异常处理放入脚本中，如下所示，它可以工作：

```
;; script code    
(try

(println (/ 10 0))

(catch Exception e
  (println "Exception: " (.getMessage e)))) 
```

但是，我宁愿将异常处理放在加载文件周围，这样我就不必在脚本本身中进行异常处理：

```
(defn handleexes [f]
  (try
    (f)
    (catch Exception e
       (println "exception: " (.getMessage e)))))

(defn start-script-play [name]
  (println "starting script: " name)
  (let [f (future (handleexes (load-file (str "./scripts/" name))))]
    (swap! scripts (fn [s] (assoc s name f))))) 
```

所以我在handlexes中调用加载文件。这不起作用 - 大多数情况下。当我运行一个包含自己的异常处理程序的脚本时，它确实有效，如上所述！没有脚本中的异常处理程序，什么都没有。奇怪。

好吧好吧，所以我的问题是这里到底发生了什么？

*   期货确实没有处理异常吗？
*   为什么在加载文件中发生异常时没有捕获到异常？
*   在这种情况下如何捕获异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T17:59:30.150

您似乎从未取消引用（使用`deref`或`@`）您在示例中生成的期货。

如果在未来中抛出异常，尝试取消引用该未来将导致`java.util.concurrent.ExecutionException`被抛出。此异常将包装将来抛出的任何内容。

```
(try
  (future (/ 10 0))
  "done"
  (catch Exception e
    (str "caught " e)))

;=> "done"

(try
  @(future (/ 10 0))
  "done"
  (catch Exception e
    (str "caught " e)))

;=> "caught java.util.concurrent.ExecutionException: java.lang.ArithmeticException: Divide by zero" 
```

# php - 如何在 PHP 中正确注入依赖项

> ID：16197277
> 
> 赞同：4
> 
> 时间：2013-04-24T16:25:37.297
> 
> 标签：php, design-patterns, dependency-injection

我在依赖注入方面遇到了一些问题，我想澄清一下。首先要提到的是我实现的一个依赖注入容器（DIC），它能够通过使用*ReflectionClass*的构造函数注册和解析依赖项。

```
$container = new DiC;
$container->register('session', 'CSession');
$container->register('response', 'CResponse');
$container->register('model', 'CSomeModel');
$container->register('view', 'CSomeView');
$container->register('controller', 'CSomeController'); 
```

从属控制器：

```
class CSomeController extends CController
{
  public function __construct(CSomeModel $model, CSomeView $view)
  {
    // assign arguments here
  }
} 
```

现在可以通过 DIC 实例化控制器：

```
$controller = $container->resolve('controller'); 
```

我喜欢这种方法，因为它是自动化的和描述性的，但是类 CController 依赖于特定的类 CSomeModel、CSomeView，这很糟糕。**MVC 三元组应该独立​​实例化**——例如，我不能将 COtherView 传递给 CSomeController。

我的第二个猜测是注入 DIC：

```
class CSomeController extends CController
{
  public function __construct(DiC $dic)
  {
    // resolve dependencies through $dic
  }
} 
```

这使得 DiC 对象全局化，许多人认为这不是实现 DI 的方式。

**是否有第三种方法可以消除这两种方法的弱点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:01:32.850

我认为这两种方法都是相关的。如果您想在第一种方法中更加灵活，您可以更改构造函数以将父类作为依赖项。然后可以注入从该父类继承的每个对象。IE

```
class CSomeModel extends AbstractCModel {}
class CSomeOtherModel extends AbstractCModel {}

public function __construct(AbstractCModel $model, AbstractCView $view) {} 
```

如果您需要访问工厂，则第二种方法适用。即，如果您需要访问同一对象的多个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T01:20:24.693

如果您正在寻找“自动布线”，请切换到接口并实现您的具体模型/视图/等。针对该接口的类。这样你就可以使用反射来配对双方。

拥有一种在容器级别显式指定依赖关系的机制也是有意义的。

# css - 为什么我的导航栏在转到恢复选项卡时会轻微移动

> ID：16197280
> 
> 赞同：0
> 
> 时间：2013-04-24T16:25:50.280
> 
> 标签：css, nav

[http://www.michaelhoffmandesign.com](http://www.michaelhoffmandesign.com)

因此，我对编码非常陌生，并且一直在从头开始对这个网站进行编码以供专业使用。问题是，当用户单击 Resume 部分时，整个导航栏会移到左侧。我试图通过添加 left:x px 来纠正这个问题。但这似乎不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:29:42.063

滚动条会导致细微差别。您可以在所有页面上启用滚动条：

```
html {
    overflow: -moz-scrollbars-vertical; 
    overflow-y: scroll;
} 
```

这使滚动条始终可见，并且仅在需要时才处于活动状态。

或者另一种解决方案是：

```
html {height: 101%;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:34:23.693

使用 margin: 0 auto 让导航对齐中心

尝试这个：

```
nav {
position: relative;
width: 800px;
height: 17px;
margin: 0 auto;
text-decoration: none;
}

header nav ul {
width: 800px;
margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:34:50.283

在 resume.html 的 html 中，检查这一行：

> <导航**样式=“右：10px；”** >

删除该样式属性并尝试一下。

# java - 在特定时间检测屏幕按压

> ID：16197283
> 
> 赞同：-1
> 
> 时间：2013-04-24T16:25:56.627
> 
> 标签：java, android, arrays, time, detection

所以，我对 java 和 android 编程相当陌生，我在为我正在从事的项目编写代码时遇到了问题。基本上，有一个时间列表，我认为需要将其存储为数组。游戏开始后，它需要做以下两件事之一：

1.  如果用户在数组中的几毫秒时间内按下屏幕，它将注册为点击并增加计数。
2.  如果用户在“命中”时间之外按下屏幕，它将注册为未命中并将计数重置为 0。

现在，我已经准备好所有的元素来让一切正常工作（增加屏幕按压等）。我的问题是检测用户是否按时按下屏幕的代码。我已经尝试进行一些搜索，但我无法弄清楚。以下是“好”热门歌曲的一小部分时间：

*   0.25
*   0.84
*   1.03
*   1.60
*   2.3
*   2.6
*   2.9

这些时间可能会发生一些变化，如果无法正常工作，可以删除一些时间。我能想到的最大问题是确保它在游戏开始时启动计时器，以便时间匹配。当前计时器从 100 开始，每次倒计时 1 秒，当它到达零时，它会将用户带到游戏结束屏幕。如果有更好的方法或不同的方法使屏幕按压检测代码起作用，这当然可以改变。

知道如何进行这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:33:43.090

实际上，您需要做的就是在游戏开始时记录当前系统时间。然后，它只是：

```
long startTime = System.currentTimeMillis();
//...
System.currentTimeMillis() - startTime; 
```

然后，检查您是否在数组中任何点设置的范围内（我将假设它是一个双精度数组）：

```
public final static int THRESHOLD_MSEC = 100;
public boolean isHit(double time) {
    int time = System.currentTimeMillis - startTime;
    for(double d : array)
        if(Math.abs(d-time) < THRESHOLD_MSEC) return true;
    return false;
} 
```

然后，在应用程序的其他地方，您可以处理`isHit`返回 true 或 false 时发生的情况。我不会为你写那部分。需要注意的一点：与人类的反应相比，几毫秒是*微不足道的，**没有人*能够做到这一点。

# android - 带有列表视图的 SharedPreferences

> ID：16197284
> 
> 赞同：0
> 
> 时间：2013-04-24T16:25:59.237
> 
> 标签：android, json, sharedpreferences

我有一个真正的问题，我不知道如何解决它，我尝试在我的应用程序上使用 sharedpreferences 将一些项目保存在 listview 上。因为当我没有互联网时，我的应用程序有例外，所以我尝试保存信息以在我没有连接时拥有它，我使用了 sharedpreferences 但我不知道如何在主要或在我的适配器因为我有很多文本视图。这里是我的主要异步任务：

```
class FetchRecentPosts extends AsyncTask<Void, Void, Void> {

        private ProgressDialog progressDialog;
        @Override
        protected void onPreExecute() {         
            super.onPreExecute();
            progressDialog = ProgressDialog.show(MainActivity.this, "", getString(R.string.loading_message));
        }

        @Override
        protected Void doInBackground(Void... params) {
            articles = Services.getRecentPosts();

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            for (Article article : articles) {
                System.out.println(article.getTitle());
            }
            progressDialog.dismiss();

            ArticlesAdapter adapter = new ArticlesAdapter(MainActivity.this, R.layout.list_item, articles);
            articlesList.setAdapter(adapter);

        } 
```

这是我的适配器

```
public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = convertView;
        Article article = getItem(position);

        if (convertView == null) {

            view = inflater.inflate(R.layout.list_item, null);

            image = (ImageView) view.findViewById(R.imageviews.imgArticle);

            TextView txtArticleTitle = (TextView) view.findViewById(R.textviews.txtArticleTitle);
            TextView txtArticleExcerpt = (TextView) view.findViewById(R.textviews.txtArticleExcerpt);
            TextView txtArticleDate = (TextView) view.findViewById(R.id.textArticleDate);

            txtArticleTitle.setText(ArabicUtilities.reshape(article.getTitle()));
            txtArticleExcerpt.setText(ArabicUtilities.reshape(article.getExcerpt()));
            txtArticleDate.setText(article.getDate().toGMTString());

            Typeface tf = Typeface.createFromAsset(view.getContext().getAssets(), "fonts/Roboto-Regular.ttf");
            txtArticleTitle.setTypeface(tf);

            imageLoader.displayImage(article.getImg(), image, options);
        }
        return view;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:20:16.037

仅供参考，如果您的应用程序包含大量数据，建议使用 SQLITE 而不是 ShatedPreferences，如果您想离线使用您的应用程序，您也可以做一件事

这将帮助您检查活动的数据连接

```
 public boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager
            .getActiveNetworkInfo();
    return activeNetworkInfo != null && activeNetworkInfo.isConnected();
} 
```

案例 1）如果您有数据连接从 web 服务调用中获取记录并对其进行迭代并将每条记录插入数据库并编写一个通用适配器，请确保它可以处理在线和离线数据并将其显示在列表或您的任何内容中想

案例2）如果您没有活动数据连接，请从数据库中获取记录并准备适配器并将其显示在列表中或您想要的任何内容中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:01:55.087

据我了解，您希望将从 json 返回的下载数据保存到您的应用程序中。当您离线启动它时，您希望它们从 shaeredPreferences 中出现。

我会这样做：

首先，如果我没有连接，我也不想出现这种异常，所以我会检查应用程序是否有互联网连接：

```
public boolean isOnline() {
        ConnectivityManager cm =
            (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    } 
```

数据可能会保存到 sharedPreferences 数组中。您可以在[http://www.b2creativedesigns.com//sharedpreferences.php](http://www.b2creativedesigns.com//sharedpreferences.php)了解更多信息。您可能希望在每次在线启动应用程序时清除数组，然后您可以将所需的数据保存到这些数组中。那么很明显，您必须将 sharedPreferences 数组中的信息读取到列表视图中。

# string - 在 Haskell 中连接字符串和 IO 整数

> ID：16197285
> 
> 赞同：3
> 
> 时间：2013-04-24T16:25:59.847
> 
> 标签：string, haskell, io, integer, concatenation

我编写了一个函数，将当前屏幕宽度返回为 IO Integer（到目前为止工作）。

```
getScreenWidth:: IO Integer
getScreenWidth = do
                    (sx, sy, w, h) <- getScreenDim 0
                    return $ sx 
```

现在我想将屏幕宽度添加到字符串中：

```
> magic_function :: IO Integer -> String -> ... magic output type
> magic_function = ... ? this is where i am stack at ? ... 
```

我想将魔术函数传递给一个字符串，例如“屏幕宽度：”，并且我希望它添加当前屏幕宽度，以便获得“屏幕宽度：1680”。如何连接 IO 整数和通用字符串？它适用于`show`吗？

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:58:21.863

首先，忘记 IO：

```
labelInteger :: String -> Integer -> String
labelInteger label number = label ++ ": " ++ show number 
```

现在担心 IO：

```
import Control.Monad (liftM, liftM2)

labelIOInteger :: String -> IO Integer -> IO String
labelIOInteger label ioNumber = liftM (labelInteger label) ioNumber 
```

用作例如`labelIOInteger "Screen Width" getScreenWidth`...但要小心！如果你做这样的事情：

```
widthLabel <- labelIOInteger "Screen width" getScreenWidth
isPortrait <- liftM2 (<) getScreenWidth getScreenHeight 
```

...然后`getScreenWidth`将被执行两次...诚然，对于这个特定的动作来说这不太可能是一个问题，但如果它是一个从文件、数据库或网站读取整数的动作，你可以看到执行它两次可能是不可取的。

通常最好不要编写类似的函数`labelIOInteger`，而是这样做：

```
widthLabel <- liftM (labelInteger "Screen Width") getScreenWidth 
```

...因此，如果您发现自己需要将返回值用于两个不同的计算，您可以轻松地重构为：

```
screenWidth <- getScreenWidth
let widthLabel = labelInteger "Screen Width" screenWidth
isPortrait <- liftM (screenWidth <) getScreenHeight 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:55:48.063

```
magic_function :: IO Integer -> String -> IO String
magic_function num msg = do
                            n <- num
                            return (msg ++ (show n)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-24T16:58:47.613

建议的副本*实际上*确实给出了您需要的答案，但我想如果很明显您不会一开始就问这个问题。:]

通常，您不能直接对类型为 的值执行任何操作`IO something`。此类型表示的不是`something`包裹在 中的类型值`IO`，而是可能使用的过程，该过程在执行时`IO`会产生类型值。毕竟，如果您多次`something`使用该值，它可能是不同的“东西” 。`IO something`

所以在你的情况下，你不能简单地连接`String`on; 您必须定义一个新`IO`过程来执行另一个过程，然后连接它产生的值。一般形式如下所示：

```
someFunction :: a -> b -> c
someFunction a b = ...

someProcedure :: IO a -> b -> IO c
someProcedure a b = do aValue <- a -- this executes "a"
                       return $ someFunction aValue b 
```

有更短的方法来写它，但我认为它会帮助把它拼出来。当然，具体情况取决于您实际在做什么——对于您的程序，您可以使用`show`将整数转换为 a `String`，然后像往常一样连接字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T16:56:31.933

我想你想要这个：

```
magic :: IO Integer -> String -> IO String
magic ios s =
  do i <- ios
     return $ s ++ ": " ++ (show i) 
```

# visual-studio-2012 - 在 VS 2012 中部署 Microsoft Report Viewer 作为先决条件

> ID：16197287
> 
> 赞同：1
> 
> 时间：2013-04-24T16:26:05.000
> 
> 标签：visual-studio-2012, clickonce, reportviewer, bootstrapper, prerequisites

当我尝试在 VS2012 的 ClickOnce 部署中包含 Microsoft Report Viewer 2012 Runtime 作为先决条件时，我收到以下警告：

> 选择的“Microsoft Report Viewer 2012 Runtime”项目需要“Microsoft.SqlServer.SQLSysClrTypes.11.0”。在先决条件对话框中选择缺少的先决条件，或为缺少的先决条件创建引导程序包。

首先，SQLSysClrtypes 有两个必备选项 - 32 位版本和 64 位版本。我包括哪一个？

此外，无论我选择哪一个，我都会收到错误消息：

> 要在先决条件对话框中启用“从与我的应用程序相同的位置下载先决条件”，您必须将“Microsoft System CLR Types for SQL Server 2012 (x86)”项的文件“SqlClrTypes_x86\SQLSysClrTypes.msi”下载到本地计算机。

但是，我似乎无法为此找到可再分发的包文件。

我需要包含这些 SQL CLR 类型的哪个版本以及从哪里获得引导程序包？

**更新**

我找到了一篇 MSDN 文章 ( [http://msdn.microsoft.com/en-us/library/ms251723.aspx](http://msdn.microsoft.com/en-us/library/ms251723.aspx) )，在讨论 ClickOnce 发布的部分下，它明确指出：

> “确保选中从组件供应商网站下载先决条件选项。这是唯一受支持的选项。”

这似乎有点疯狂，因为并非每台计算机都可以访问 Internet——在我的组织中绝对不是。谁能证实这一点？

# linq - 检查对象列表中的重复项 C#

> ID：16197290
> 
> 赞同：33
> 
> 时间：2013-04-24T16:26:19.710
> 
> 标签：linq

我正在寻找一种非常快速的方法来检查对象列表中的重复项。

我正在考虑简单地遍历列表并以这种方式进行手动比较，但我认为 linq 可能会提供更优雅的解决方案......

假设我有一个对象...

```
public class dupeCheckee
{
     public string checkThis { get; set; }
     public string checkThat { get; set; }

     dupeCheckee(string val, string val2)
     {
         checkThis = val;
         checkThat = val2;
     }
} 
```

我有这些对象的列表

```
List<dupeCheckee> dupList = new List<dupeCheckee>();
dupList.Add(new dupeCheckee("test1", "value1"));
dupList.Add(new dupeCheckee("test2", "value1"));
dupList.Add(new dupeCheckee("test3", "value1"));
dupList.Add(new dupeCheckee("test1", "value1"));//dupe
dupList.Add(new dupeCheckee("test2", "value1"));//dupe... 
dupList.Add(new dupeCheckee("test4", "value1"));
dupList.Add(new dupeCheckee("test5", "value1"));
dupList.Add(new dupeCheckee("test1", "value2"));//not dupe 
```

我需要在该列表中找到受骗者。当我找到它时，我需要做一些额外的逻辑，不一定要删除它们。

当我使用 linq 时，我的 GroupBy 如何抛出异常......

```
'System.Collections.Generic.List<dupeCheckee>' does not contain a definition for 'GroupBy' and no extension method 'GroupBy' accepting a first argument of type 'System.Collections.Generic.List<dupeCheckee>' could be found (are you missing a using directive or an assembly reference?) 
```

这告诉我我错过了一个图书馆。我很难弄清楚是哪一个。

但是，一旦我弄清楚了，我将如何检查这两个条件... IE checkThis 和 checkThat 都发生了不止一次？

**更新：我想出了什么**

这是我在进行快速研究后提出的 linq 查询......

```
test.Count != test.Select(c => new { c.checkThat, c.checkThis }).Distinct().Count() 
```

我不确定这是否肯定比这个答案更好......

```
var duplicates = test.GroupBy(x => new {x.checkThis, x.checkThat})
                   .Where(x => x.Skip(1).Any()); 
```

我知道我可以将第一条语句放入 if else 子句中。我还进行了快速测试。当我期待 0 时，重复列表给了我 1，但它确实正确地说明了我在我使用的其中一个集合中有重复的事实......

另一种方法完全符合我的预期。这是我用来测试的数据集....

骗子：

```
List<DupeCheckee> test = new List<DupeCheckee>{ 
     new DupeCheckee("test0", "test1"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test1", "test2"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test2", "test3"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test3", "test3"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test0", "test5"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test1", "test6"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test2", "test7"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test3", "test8"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test0", "test5"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test1", "test1"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test2", "test2"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test3", "test3"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test4", "test4"),//{ checkThis = "test", checkThat = "test1"}

}; 
```

没有骗子...

```
 List<DupeCheckee> test2 = new List<DupeCheckee>{ 
     new DupeCheckee("test0", "test1"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test1", "test2"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test2", "test3"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test3", "test3"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test4", "test5"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test5", "test6"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test6", "test7"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test7", "test8"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test8", "test5"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test9", "test1"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test2", "test2"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test3", "test3"),//{ checkThis = "test", checkThat = "test1"}
     new DupeCheckee("test4", "test4"),//{ checkThis = "test", checkThat = "test1"}

}; 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-24T16:36:10.800

您需要参考 System.Linq （例如`using System.Linq`）

那么你可以做

```
var dupes = dupList.GroupBy(x => new {x.checkThis, x.checkThat})
                   .Where(x => x.Skip(1).Any()); 
```

这将为您提供包含所有重复项的组

重复的测试将是

```
var hasDupes = dupList.GroupBy(x => new {x.checkThis, x.checkThat})
                   .Where(x => x.Skip(1).Any()).Any(); 
```

甚至调用`ToList()`或`ToArray()`强制计算结果，然后您可以检查是否有欺骗性并检查它们。

例如..

```
var dupes = dupList.GroupBy(x => new {x.checkThis, x.checkThat})
                   .Where(x => x.Skip(1).Any()).ToArray();
if (dupes.Any()) {
  foreach (var dupeList in dupes) {
    Console.WriteLine(string.Format("checkThis={0},checkThat={1} has {2} duplicates",
                      duplist.Key.checkThis, 
                      duplist.Key.checkThat,
                      duplist.Count() - 1));
  }

} 
```

或者

```
var dupes = dupList.Select((x, i) => new { index = i, value = x})
                   .GroupBy(x => new {x.value.checkThis, x.value.checkThat})
                   .Where(x => x.Skip(1).Any()); 
```

它为您提供了组，每个组的每个项目将原始索引存储在属性`index`中，并将项目存储在属性中`value`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-05-02T17:48:23.520

有大量可行的解决方案，但我认为下一个解决方案将更加透明和易于理解，然后以上：

```
var hasDuplicatedEntries = ListWithPossibleDuplicates
                                   .GroupBy(YourGroupingExpression)
                                   .Any(e => e.Count() > 1);
if(hasDuplicatedEntries)
{
   // Do what ever you want in case when list contains duplicates 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-12T16:12:23.877

我喜欢用它来知道什么时候有任何重复。假设您有一个字符串并想知道是否有任何重复的字母。这就是我使用的。

```
string text = "this is some text";

var hasDupes = text.GroupBy(x => x).Any(grp => grp.Count() > 1); 
```

如果您想知道有多少重复项，无论重复项是什么，请使用它。

```
var totalDupeItems = text.GroupBy(x => x).Count(grp =>  grp.Count() > 1); 
```

例如，“这是一些文本”有这个......

字母 t 总数：3

字母 i 总数：2

字母 s 总数：3

字母 e 总数：2

所以变量 totalDupeItems 等于 4。有 4 种不同的重复项。

如果您想获得无论是什么骗子的骗子项目的总数，请使用它。

```
var totalDupes = letters.GroupBy(x => x).Where(grp => grp.Count() > 1).Sum(grp => grp.Count()); 
```

所以变量 totalDupes 将是 10。这是每个欺骗类型的总重复项加在一起。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T16:36:29.357

我想这就是你要找的：

```
List<dupeChecke> duplicates = dupeList.GroupBy(x => x)
                                   .SelectMany(g => g.Skip(1)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T18:35:17.867

对于内存对象，我总是使用`Distinct`LINQ 方法将比较器添加到解决方案中。

```
public class dupeCheckee
{
     public string checkThis { get; set; }
     public string checkThat { get; set; }

     dupeCheckee(string val, string val2)
     {
         checkThis = val;
         checkThat = val2;
     }

     public class Comparer : IEqualityComparer<dupeCheckee>
     {
         public bool Equals(dupeCheckee x, dupeCheckee y)
         {
             if (x == null || y == null)
                 return false;

             return x.CheckThis == y.CheckThis && x.CheckThat == y.CheckThat;
         }

         public int GetHashCode(dupeCheckee obj)
         {
             if (obj == null)
                 return 0;

             return (obj.CheckThis == null ? 0 : obj.CheckThis.GetHashCode()) ^
                 (obj.CheckThat == null ? 0 : obj.CheckThat.GetHashCode());
         }
     }
} 
```

现在我们可以调用

```
List<dupeCheckee> dupList = new List<dupeCheckee>();
dupList.Add(new dupeCheckee("test1", "value1"));
dupList.Add(new dupeCheckee("test2", "value1"));
dupList.Add(new dupeCheckee("test3", "value1"));
dupList.Add(new dupeCheckee("test1", "value1"));//dupe
dupList.Add(new dupeCheckee("test2", "value1"));//dupe... 
dupList.Add(new dupeCheckee("test4", "value1"));
dupList.Add(new dupeCheckee("test5", "value1"));
dupList.Add(new dupeCheckee("test1", "value2"));//not dupe

**var distinct = dupList.Distinct(dupeCheckee.Comparer);** 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T16:29:37.487

使用 linq 进行选择不同，例如[如何使用 LINQ 进行 SELECT UNIQUE？](https://stackoverflow.com/questions/3519165/how-can-i-do-select-unique-with-linq)

然后将不同结果的计数与非不同结果进行比较。如果列表有双打，这会给你一个布尔值。

此外，您可以尝试使用字典，这将保证密钥是唯一的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-16T12:23:10.450

如果发生任何重复将引发异常。字典自己检查键。这是最简单的方法。

```
try
{
  dupList.ToDictionary(a=>new {a.checkThis,a.checkThat});
}
catch{
 //message: list items is not uniqe
} 
```

# php - 使用 PHP/GD 创建混合颜色的调色板

> ID：16197292
> 
> 赞同：1
> 
> 时间：2013-04-24T16:26:22.280
> 
> 标签：php, image, gd

一个客户提出了一个有趣的问题。他们正在寻求创建一个应用程序，允许用户从选择的颜色中进行选择，并生成显示所选颜色混合的动态图像。所选颜色随机绘制在具有不同形状和位置的图像上。

最终产品可能看起来像这样

[http://matsinc.com/mixologyapp/swatchimage.php?red1=71&green1=160&blue1=109&size1=1&pct1=0.3&colname1=Ocean%20Green&red3=30&green3=28&blue3=27&size3=1&pct3=0.5&colname3=Black&red5=234&green5=221&blue5=200&size5= 1&pct5=0.2&colname5=蛋壳](http://matsinc.com/mixologyapp/swatchimage.php?red1=71&green1=160&blue1=109&size1=1&pct1=0.3&colname1=Ocean%20Green&red3=30&green3=28&blue3=27&size3=1&pct3=0.5&colname3=Black&red5=234&green5=221&blue5=200&size5=1&pct5=0.2&colname5=Eggshell)

上面的链接在图像中放入了 3 种颜色。

我们正在考虑有一个网格，其中每个块都有 % 的机会显示所提供的颜色。然后绘制与网格位置随机偏移的图像，具有随机的形状和大小......然后移动到网格中的下一个元素。

有没有人处理过这样的事情？你用什么策略来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:25:57.933

我不明白你的问题，但你客户的问题很有趣。

我在stackoverflow上借助其他一些问题构建了一个示例，请参阅：http: [//twitterbootstrapbuttons.w3masters.nl/randomimage.html](http://twitterbootstrapbuttons.w3masters.nl/randomimage.html)

randomimage.html 包含一个带有树颜色选择器的表单（[http://www.eyecon.ro/bootstrap-colorpicker/](http://www.eyecon.ro/bootstrap-colorpicker/)）：

```
<form action="" method="get" id="imageform">
    <div class="input-append color" data-color="#08c" data-color-format="hex">
    <input type="text" class="span2" value="#08c" name="color1" id="color1">
    <span class="add-on"><i style="background-color: #08c"></i></span>
    </div><br>
    <div class="input-append color" data-color="#08c" data-color-format="hex">
    <input type="text" class="span2" value="#08c" name="color2"  id="color2">
    <span class="add-on"><i style="background-color: #08c"></i></span>
    </div><br>
    <div class="input-append color" data-color="#08c" data-color-format="hex">
    <input type="text" class="span2" value="#08c" name="color3"  id="color3">
    <span class="add-on"><i style="background-color: #08c"></i></span>
    </div><br>

    <input type="submit" class="btn btn-primary" value="Generate your image"/>
</form> 
```

在提交时通过 jquery 调用 randomimage.php 并显示图像（从一个空图像开始[Clear an IMG with jQuery](https://stackoverflow.com/questions/10865689/clear-an-img-with-jquery)）：

```
<script>    

    /*empty images from: https://stackoverflow.com/questions/10865689/clear-an-img-with-jquery */

    $('#result1').attr('src', 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==');

    $('.color').colorpicker();
    $('#imageform').submit(function() { 

    $.get('randomimage.php',  { 'colors[]': [ $('#color1').val(), $('#color2').val(),  $('#color3').val() ]}, function(data) {
$('#result1').attr('src', 'data:image/png;base64,'+data);

}); 

        return false;
    });

</script> 
```

randomimage.php 构建图像基于[如何使用 PHP 制作嘈杂的背景图像？](https://stackoverflow.com/questions/2727450/how-can-i-make-a-noisy-background-image-using-php). 结果是 base64_encode img 字符串（[PHP HTML 图像输出](https://stackoverflow.com/questions/3695077/php-html-image-output)）：

```
<?
error_reporting(E_ALL);
ini_set('display_errors','on');
function ImageColorAllocateFromHex ($img, $hexstr) 
{ 
  $int = hexdec($hexstr); 

  return ImageColorAllocate ($img, 
         0xFF & ($int >> 0x10), 
         0xFF & ($int >> 0x8), 
         0xFF & $int); 
} 

//https://stackoverflow.com/questions/3695077/php-html-image-output
ob_start();
//random colored noise
https://stackoverflow.com/questions/2727450/how-can-i-make-a-noisy-background-image-using-php
$x = 150;
$y = 150;
$im = imagecreatetruecolor($x,$y);
$colors = array();
foreach($_GET['colors'] as $color)
{
    $colors[]= ImageColorAllocateFromHex ($im, $color);
}   
$number = count($colors)-1;

for($i = 0; $i < $x; $i++) {
    for($j = 0; $j < $y; $j++) {

        imagesetpixel($im, $i, $j, $colors[rand(0,$number)]);
    }
} 
imagepng($im);

$output = ob_get_contents();
ob_end_clean();

echo base64_encode($output);
exit; 
```

玩得开心

# concurrency - Powercenter - 并发目标实例

> ID：16197293
> 
> 赞同：0
> 
> 时间：2013-04-24T16:26:25.190
> 
> 标签：concurrency, target, informatica, informatica-powercenter

我们有一种情况，我们从单个源限定符加载相同目标的实例的不同执行顺序。当我们在提升有问题后在 TEST 中执行时，当我们提升从 DEV 到 TEST 的映射时，我们遇到了问题。

例如，我们有一个路由器，其中包含 3 个用于插入、更新和删除的组，然后是相应的更新策略来设置相应的行类型，然后是三个目标实例。

```
RTR ----> UPD_Insert -----> TGT_Insert
      \
       \__>   UPD_Update -------> TGT_Update
        \
         \__>  UPD_Delete --------->  TGT_Delete 
```

当我们使用数据执行插入、更新、删除所有基于相同主键的测试时，与我们的 DEV 环境中的相同数据相比，我们在 TEST 中得到不同的执行顺序。

任何人都有任何想法 - 我会发布一张图片，但我还没有足够的信誉。

干杯，

吉尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-22T12:02:27.590

您可以在更新策略之前使用排序器转换......根据更新策略条件，您可以对传入的行进行排序......所以第一个日期将通过插入，而不是最后通过删除策略更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T20:51:48.970

只要您有单一来源，您就无法控制加载顺序。我可以将负载分开以使用单独的源，可以使用映射中的目标加载顺序设置，或者您甚至可以为它们创建单独的映射。就像现在一样，您应该使用单个目标并利用更新策略转换来确定通过的每条记录所需的操作。然后可以使用排序来定义对物理表进行不同操作的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-16T14:13:40.733

简单的解决方案是尝试按字母顺序重命名目标定义......比如`INSERT_A`，，然后`UPDATE_B`开始`DELETE_C`加载

这将按 A、B、C 顺序加载。试着让我知道

# java - 将图像显示为缩略图，然后下载 Struts2

> ID：16197294
> 
> 赞同：0
> 
> 时间：2013-04-24T16:26:50.317
> 
> 标签：java, file-io, struts2, download

我正在尝试查看不在应用程序中但在其他驱动器中的图像。但我没有得到输出，我的动作没有被调用。请指出错误。

**jsp**

```
<img src="<s:url var="profilePic" action="download">
                    <s:param name="fid" value="test"/>
                  </s:url>" alt="logo" /> 
```

**行动**

```
 public class DownloadAction extends ActionSupport implements ServletRequestAware{
        private HttpServletRequest req;

     @Action(value="download", results = { @Result(location="/index.jsp", type="stream", 
             params={"contentType","application/octet-stream","inputName","fileInputStream","bufferSize","1024"}
             ), @Result(name="input", location="/index.jsp")
        })
    public String download() throws Exception {
            //File theFile = new File("c:\\shareapp\\admin",getReq().getParameter("fid"));
         try{
             System.out.println("inside");
                FileInputStream inputStream=FileUtils.openInputStream(new File("c:\\shareapp\\admin",getReq().getParameter("fid")));
         }catch(Exception ce)
         {
             System.out.println(ce);
         }
            return SUCCESS;
        }
//getters & setters 
```

实际上我希望文件作为缩略图加载。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T07:17:47.167

如果您想使用`<s:url>`这样的标签，请删除`var`属性。如果`<s:param>` `value`属性是字符串，则用于`'`表明它是字符串。

```
<img src="<s:url action="download">
            <s:param name="fid" value="'test'"/>
          </s:url>" alt="logo" /> 
```

# codeigniter - 将我的 Azure Linux VM 连接到 clearDB MySQL 数据库的步骤是什么？

> ID：16197295
> 
> 赞同：1
> 
> 时间：2013-04-24T16:26:51.157
> 
> 标签：codeigniter, azure, centos, firewall

我们的组织目前正在向 Windows Azure 中的 Linux VM 过渡，该 VM 为我们的客户提供各种网站服务。正如 Azure 文档中所建议的那样，我们在 ClearDB 上设置了一个 mysql 数据库，我们希望它能够保存上述网站的数据。

麻烦的是，我根本无法让我们的站点代码与 clearDB 进行通信。

* * *

**编辑**

从虚拟机上的 MYSQL 命令行连接确实有效，我们能够使用站点使用的相同凭据浏览数据库，但 php 仍然无法访问数据。

* * *

我们正在运行 php / codeigniter 作为该站点的后端，并且在我的站点本地副本中一切正常，但在部署到 azure 时总是无法连接数据库。

我已经在 azure VM 上安装了 tcptraceroute，并且能够成功 ping 端口 3306 上的 clearDB 机器，因此它对 VM 绝对可见，但由于某种原因对站点不可见。

下面是我的 codeigniter 数据库配置，它在我的本地机器上的 apache 下运行良好。

```
$active_group = "live";
$active_record = TRUE;

$db['live']['hostname'] = "eu-cdbr-azure-north-a.cloudapp.net"; 
$db['live']['username'] = "<<USER>>"; 
$db['live']['password'] = "<<PASSWORD>>"; 

$db['live']['database'] = "<<DB NAME>>";
$db['live']['dbdriver'] = "mysql";
$db['live']['dbprefix'] = "";
$db['live']['pconnect'] = TRUE;
$db['live']['db_debug'] = TRUE;
$db['live']['cache_on'] = FALSE;
$db['live']['cachedir'] = "";
$db['live']['char_set'] = "utf8";
$db['live']['dbcollat'] = "utf8_general_ci";
$db['live']['swap_pre'] = '';
$db['live']['autoinit'] = TRUE;
$db['live']['stricton'] = FALSE; 
```

有谁知道，首先是否可以将 clearDB 用于 Azure VM 的数据服务（注意不是 Azure 网站——我知道这是可能的），其次，你到底是如何设置它的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:54:12.990

已解决 - 我们的 apache 配置不正确，设置：

```
/usr/sbin/setsebool httpd_can_network_connect 1 
```

解决了这个问题

# php - 检查mysql数据库PHP中的N/A值

> ID：16197296
> 
> 赞同：1
> 
> 时间：2013-04-24T16:26:52.080
> 
> 标签：php, mysql, null, phpmyadmin, conditional

我的数据库记录包含为空的 N/A 值的列。

但是当我从 mysql 数据库中检索它们时。它向我显示了我不想看到的 N/A 值。我做了检查，但没有运气，检查条件是失败

我用了

```
empty()
is_null()
$my_variable == null
$my_variable == " " 
```

但检查仍然失败。知道如何使用 PHP 来检查从数据库中检索到的值吗？

更新的问题：名称类型归类属性 Null 默认额外操作

```
 4  description text    latin1_swedish_ci       No  None 
```

默认为无

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T11:12:44.943

我将其更改为默认 NULL，并且该字段可以为 NULL，然后我现在可以检查 null 值。

# jsf - 从数据库生成 Primefaces MenuModel

> ID：16197301
> 
> 赞同：1
> 
> 时间：2013-04-24T16:27:01.300
> 
> 标签：jsf, jsf-2, recursion, primefaces

我想问如何使用递归函数从数据库生成菜单模型。我已经上了这门课，但它不起作用。请帮助我，我已经找到并尝试了一周。谢谢

```
public class MenuDAOImpl extends ManagerBase<MenuMaster> implements MenuDAO {

    private List<MenuMaster> list;
    private List<MenuData> datas;

    @Override
    public MenuModel getMenu() {
        MenuModel model = new DefaultMenuModel();
        String[] orders = new String[]{"id"};
        try {
            list = getBySQLQuery("PARENT_MENU_ID=0", orders, 1000);
            for (MenuMaster menuMaster : list) {
                menuChild(menuMaster);
            }
        } catch (Exception e) {
        }
        return model;
        // throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    private List<MenuData> menuChild(MenuMaster master) {
        List<MenuData> listChild = new ArrayList<MenuData>();
        String[] orders = new String[]{"id"};
        try {
            MenuData data = new MenuData();
            data.mm = master;
            data.mms = getBySQLQuery("PARENT_MENU_ID=" + master.getParentMenuId(), orders, 1000);
            listChild.add(data);
        } catch (Exception e) {
        }
        return listChild;
    }

    public class MenuData {

        private MenuMaster mm;
        private List<MenuMaster> mms;

        public MenuData() {
        }

        public MenuMaster getMm() {
            return mm;
        }

        public void setMm(MenuMaster mm) {
            this.mm = mm;
        }

        public List<MenuMaster> getMms() {
            return mms;
        }

        public void setMms(List<MenuMaster> mms) {
            this.mms = mms;
        }
    }
} 
```

这是我的数据库表（抱歉我不能上传图片）

身份证 | 菜单名称 | DISPLAY_NAME | 网址 |PARENT_MENU_ID |
1 | 员工 | 员工 | /employee.xhtml | 0 |
2 | 员工菜单| 员工 | /employee.xhtml | 1 |
3 | 实用程序 | 实用程序 | | 0 |
7 | 阿斯达夫 | 阿斯达夫 | | 6 |
6 | 实用菜单 | 测试 | | 3 |
5 | 实用数据 | 管理员配置 | 阿斯达夫 | 3 |
4 | 菜单 | 菜单编辑器 | /utility/menu.xhtml | 3 |

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:09:42.950

这是我周围的一些代码，我通过将子菜单和菜单项附加到他的 getChildren() 属性来创建菜单模型

```
private MenuModel model;

public MenuModel getModel() {

    if(model != null) return model;

    model = new DefaultMenuModel();
    addDynamicMenus();

    return model;
}

private void addDynamicMenus(){

    if(modules == null){
        modules = service.getModulesByUserLogin(loginBean.getUsername());
    }

    Submenu currfather = null;

    for(SpFeModuleForUser s : modules){

        if(currfather == null || (!currfather.getId().equals("menu_" + s.getModuleID()))){
            currfather = new Submenu();
              currfather.setLabel(Modules.getSingleton().getString(s.getModuleName()));
            currfather.setId("menu_"+s.getModuleID());
            model.addSubmenu(currfather);
        }

        MenuItem mi = new MenuItem();

        mi.setValue(Modules.getSingleton().getString(s.getNAME()));
        mi.setId("_" + s.getKey());
        mi.setTarget("_self");
        mi.setTitle(Modules.getSingleton().getString(s.getNAME() + "_Description"));
        mi.setAjax(false);
        mi.setUrl(url);
        // Add parameters
        UIParameter param = new UIParameter();
        param.setName("moduleid");
        param.setValue(s.getKey());
        mi.getChildren().add(param);

        mi.setProcess("@all");
        currfather.getChildren().add(mi);
    }
} 
```

# javascript - 如何使用JS根据鼠标位置移动图像？

> ID：16197302
> 
> 赞同：2
> 
> 时间：2013-04-24T16:27:06.177
> 
> 标签：javascript, html, animation

如果鼠标在屏幕左侧，我希望图像向左移动，如果鼠标在屏幕右侧，则图像向右移动，使用javascript，这是我到目前为止的代码：

```
 var dirx = 0;  
    var spdx = 35; 
    var imgLeftInt; 
    var imgTopInt; 
    var imgHeight; 
    var imgWidth; 
    var divWidth; 
    var divHeight; 
    var t;
    var tempX;
    var tempY; 
```

所以我很确定我没有遗漏任何变量......

```
 function animBall(on) {               
        imgLeftInt = parseInt(document.images['logo'].style.left); 
        imgTopInt = parseInt(document.images['logo'].style.top); 
        imgHeight =  parseInt(document.images['logo'].height); 
        imgWidth =  parseInt(document.images['logo'].width); 
        divWidth = parseInt(document.images['container'].width);        
        if (tempX > 779){
            dirx = 1;
        } 
        else if(tempX < 767){
            dirx = 2;
        }
        else {
            spdx = 0;
        } 
```

因此，如果 tempX（应该是鼠标位置的 x 坐标）大于 779（即 div 标签的中点），则图像应该向右。如果小于这个值，它应该向左走，否则，速度应该为零，因为它应该保持静止。

```
 if(dirx == 1){                            
            goRight(); 
        } else if(dirx == 2) {                                      
            goLeft(); 
        }        
    }
    function getMouseXY(e) {
        tempX = e.clientX;
        tempY = e.clientY;
        } 
```

我找到了数百种不同的方法来获取鼠标位置，但这不是 W3C 的，所以我认为它有效。

```
 function goRight() { 
        document.images['logo'].style.left = imgLeftInt+spdx +"px"; 
        if (imgLeftInt >  (divWidth-imgWidth)){ 
            dirx = 2; 
            spdx= 20; 
        } 
    } 

    function goLeft() { 
        document.images['logo'].style.left = (imgLeftInt-spdx) +"px"; 
        if (imgLeftInt <  5){ 
            dirx = 1; 
            spdx= 20; 
        } 
    } 

    </script> 
```

这就是我的整个剧本。

```
 <div id="container" onmousemove="getMouseXY(event);" width="1546" height="423">
        <a href="javascript:var t=setInterval('animBall()', 80)">Start Animation</a> <a href="javascript:clearInterval(t);">Stop Animation</a> <br /> 
        <img src="http://qabila.tv/images/logo_old.png" style="position:absolute;left:10px;top:20px;" id="logo" /> 
    </div> 
```

我把对鼠标位置的依赖留在了最后，所以动画脚本可以正常工作（或者至少可以工作，除非我破坏了一些东西试图让它读取鼠标位置）。

任何想法我做错了什么？

如果有任何帮助，我已经在[这里托管了代码。](http://qabila.tv/teamlab/test3.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:28:00.297

为什么不使用 html5 画布和[gee.js](http://georgealways.github.io/gee/)

这是 js fiddle 结果（加载可能需要一段时间，但这是 jsfiddle 的错，脚本在您的网站上加载会更快）：http: [//jsfiddle.net/wLCeE/7/embedded/result/](http://jsfiddle.net/wLCeE/7/embedded/result/)

这是使它工作的更简单的代码：

```
var g = new GEE({
    width: 500,
    height: 423,
    container: document.getElementById('canvas')
});

var img = new Image(); // Create new img element
img.onload = function () {
    demo(g)
};
img.src = 'http://qabila.tv/images/logo_old.png'; // Set source path

function demo(g) {

    var style = "left"

    g.draw = function () {

        if (g.mouseX > g.width / 2 && style == "left") styleRight()
        else if (g.mouseX < g.width / 2 && style == "right") styleLeft()

    }

    function styleLeft() {
        style = "left"
        g.ctx.clearRect(0, 0, g.width, g.height)
        g.ctx.drawImage(img, 0, 0)

    }

    function styleRight() {
        style = "right"
        g.ctx.clearRect(0, 0, g.width, g.height)
        g.ctx.drawImage(img, g.width - img.width, 0)

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:03:32.540

我去了您的链接并尝试调试您的代码。我在第 21 行收到一个错误，因为您的文档没有“容器”图像（“容器”是一个 div）。

在你的问题开始时，你说你想知道鼠标相对于“屏幕”中心的位置。为此，您可能希望使用 window.innerWidth 而不是您在 div 上设置的 width 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:51:54.467

好吧，这需要大量的工作，无论如何，我已经为你做了一些工作，你现在可以看到部分工作，但你需要在[jsfiddle](http://jsfiddle.net/Xotic750/GdmjW/)上使用它。也许您现在可以提出一些有关使其发挥作用的具体问题。

```
<div id="container" width="1546" height="423"> <a id="start" href="#">Start Animation</a>  <a id="stop" href="#">Stop Animation</a> 
    <br />
    <img src="http://qabila.tv/images/logo_old.png" style="position:absolute;left:10px;top:20px;" id="logo" />
</div>

/*jslint sub: true, maxerr: 50, indent: 4, browser: true */
/*global */

(function () {
    "use strict";

    var start = document.getElementById("start"),
        stop = document.getElementById("stop"),
        container = document.getElementById("container"),
        logo = document.getElementById("logo"),
        dirx = 0,
        spdx = 35,
        imgLeftInt,
        imgTopInt,
        imgHeight,
        imgWidth,
        divWidth,
        divHeight,
        t,
        tempX,
        tempY;

    function getMouseXY(e) {
        tempX = e.clientX;
        tempY = e.clientY;
    }

    function goRight() {
        logo.style.left = imgLeftInt + spdx + "px";
        if (imgLeftInt > (divWidth - imgWidth)) {
            dirx = 2;
            spdx = 20;
        }
    }

    function goLeft() {
        logo.style.left = (imgLeftInt - spdx) + "px";
        if (imgLeftInt < 5) {
            dirx = 1;
            spdx = 20;
        }
    }

    // attribute on unused
    function animBall(on) {
        imgLeftInt = parseInt(logo.style.left, 10);
        imgTopInt = parseInt(logo.style.top, 10);
        imgHeight = parseInt(logo.height, 10);
        imgWidth = parseInt(logo.width, 10);
        divWidth = parseInt(container.width, 10);

        if (tempX > 779) {
            dirx = 1;
        } else if (tempX < 767) {
            dirx = 2;
        } else {
            spdx = 0;
        }

        if (dirx === 1) {
            goRight();
        } else if (dirx === 2) {
            goLeft();
        }
    }

    function startAnim() {
        t = setInterval(animBall, 80);
    }

    start.addEventListener("click", startAnim, false);

    function stopAnim() {
        clearInterval(t);
    }

    stop.addEventListener("click", stopAnim, false);

    container.addEventListener("mousemove", getMouseXY, false);
}()); 
```

# jquery - jQuery nextAll 读取所有输入字段

> ID：16197303
> 
> 赞同：0
> 
> 时间：2013-04-24T16:27:07.413
> 
> 标签：jquery, next

我有以下html：

```
<input type="text" id="entry1" value="1" />
<input type="text" id="entry2" value="2" />
<input type="text" id="entry3" value="3" />
<input type="text" id="entry4" value="4" />
<input type="text" id="entry5" value="5" />
<input type="text" id="entry6" value="6" />
<input type="text" id="entry7" value="7" />

<input type="button" id="test" value="Test 1" />

..
$('#test').click(function () {
  var entrys = $(':text[id != "entry5"]').nextAll(':text');
}); 
```

我希望它只返回entry6，entry7。但我得到的基本上是所有的文本输入字段。我究竟做错了什么？还是我使用`nextAll()`不当？我以 entry5 为例，但我想做的是仅在某个输入文本 id 之后获取字段。因此，如果我将其设置为 entry6，则只返回 entry7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:31:12.977

您可以使用`id`选择器，因为您有输入字段的 id。你的问题是你使用`!=`而不是`=`.

在这种情况下，您不必使用属性选择器，因为您使用`id`的是属性，您有一个内置的`id`选择器。

```
$('#test').click(function () {
    var entrys = $('#entry5').nextAll(':text');
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/FYZeY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:29:31.777

您打算使用`=`而不是`!=`：

```
var entrys = $('input:text[id="entry5"]').nextAll('input:text'); 
```

但是，在这种情况下， [Arun 的解决方案](https://stackoverflow.com/a/16197393/901048)更简单、更合适。

# f# - 在 Mono 下运行 F# 3 生成的可执行文件

> ID：16197307
> 
> 赞同：2
> 
> 时间：2013-04-24T16:27:25.803
> 
> 标签：f#, f#-3.0

我想使用 F# 3.0 命令行编译器编译一个可执行文件，然后在 Mono 下运行它。

代码开始执行，但 Mono 几乎立即死亡，抱怨它无法加载 System.Core。谷歌搜索这表明我应该针对 .net 3.5，而不是版本 4。进一步谷歌搜索表明 F# 编译器曾经采用选项 --cli-version，但它似乎不再接受这一点。

我确信有一种方法，就像我要使用 MSVC 一样，我可以在某个地方单击以设置所需的 CLR 版本。

请问我该怎么办？非常感谢。

编辑：

我曾尝试在 MSVC GUI 中开发的一个更简单的项目上定位 .net 3.5。然后可执行文件要求 FSharp.Core 2.0.0，并且比以前更进一步。F# 3 编译器似乎带有一个 .net 2.0 核心库，所以我希望它能够生成与框架的过时版本兼容的代码。这留下的问题是“如果 GUI 可以做到，我如何从命令行做同样的事情”，好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:02:51.673

如果您使用 F# 3.0，则没有理由不默认使用 .NET 4.0（当然，除非您需要与现有的 .NET 2.0 或 3.5 程序集进行互操作）。

你在哪个版本的 Mono 上运行？F# 3.0 需要 Mono 2.10 或更新版本，但我强烈建议您使用 Mono 3.0 或更新版本。

# php - 用用户特定的 mysql 保存数据填写 PHP/HTML 表单的最佳方法？

> ID：16197312
> 
> 赞同：0
> 
> 时间：2013-04-24T16:27:52.167
> 
> 标签：php, html, mysql, database, forms

问题：我如何获得一个 PHP/HTML 表单来填写以前提交的在 mysql 数据库中找到的用户数据？

好的，我已经浏览了几个星期的互联网，现在试图找到一个教程或一些可以帮助我解决这个问题的线程。

我正在为桌面 RPG 游戏创建一个 Web 表单。这是一个简单的表单，主要包含字段和下拉菜单，其中包含“角色名称”、“年龄”、“性别”等内容。

*   我已经把它保存到mysql数据库的位置。

*   我也有它，以便它们是将数据链接到登录用户的外键。

*   现在，我有一个：$_REQUEST['Character']（Character 是表单的名称），它允许所有输入的数据在提交后出现在相应的框中，以防出现错误等（除了下拉菜单停留在所选项目上，我现在正在阅读）。

但现在我想要这样，如果用户已经创建了一个角色，当他们重新登录时，所有这些信息都将被拉回并填写到相应字段的表单中。

这样做的最佳方法是什么？或者任何人都可以为我指出另一个回答线程的正确方向，视频，你有什么，可以更好地向我解释这一点？

*我认为大家不需要任何代码来查看，但如果需要我可以发布一些代码，其中有很多*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:09:10.963

让我们举一个简单的例子。假设我们有一个 table ，`Characters`带有 fields`id`和。`name``age`

为该表提供编辑表单的一种更简洁的方法（IMO）是让表单假设有一个`$char`包含这些字段的数组（我们称之为它）。主代码将从任何地方获取此数组，无论是从表单字段还是从数据库。

（注意，很多东西都被省略了。我不知道也不关心您使用的是什么数据库，也不关心您如何进行验证；重要的部分是表单处理，无论数据库如何，它都有效。）

```
<form method="post">
 <input type="hidden" name="Character[id]" value="<?= intval($char['id']) ?>">
 <input name="Character[name]" value="<?= htmlentities($char['name']) ?>">
 <input name="Character[age]" value="<?= htmlentities($char['age']) ?>">
 <input type="submit">
</form> 
```

提交表单时，`$_POST['Character']`将是一个数组，并包含表单提交的有关角色的所有信息。

让我们有一个`saveCharacter`可以获取该信息并将其保存为一行...
（伪代码行以`...`; 片段看起来`...like this...`）

```
function saveCharacter($char) {
    if (empty($char['id'])):
        ... do insert
        ... $char['id'] = last insert ID
    else:
        ... do update
    endif;

    // return the saved char; inserting would have added an ID
    return $char;
} 
```

...并`loadCharacter`选择该行，并返回其内容与您在表单中的名称相同。（保持表单和数据库字段名称一致在这里很有帮助。如果两者使用相同的名称，您可以直接返回该行。）

```
function loadCharacter($id) {
    ... $result = result from: SELECT id, name, age FROM Characters WHERE id = ?
    ... return first (should be only) row of $result
} 
```

（如果名称不同，您需要进行转换。您通常可以让 DBMS 为您执行此操作；谷歌搜索“SQL 列别名”以获取更多信息。）

以及启动这一切的代码......

```
if (isset($_POST['Character'])) {
    $char = saveCharacter($_POST['Character']);
}
elseif ( ...the user already has a character id... ) {
    $char = loadCharacter(...character id...);
}
else {
    // first time on the page, and there's no saved character
    // give $char the right field names, to prevent notices
    $char = array('id' => null, 'name' => null, 'age' => null);
} 
```

当您从上面包含表单时，它会将`$char`' 值放入适当的元素中。

# jquery - 在 jquery mobile 中创建动态列表视图不起作用？

> ID：16197313
> 
> 赞同：1
> 
> 时间：2013-04-24T16:27:53.573
> 
> 标签：jquery, json, jquery-mobile

当试图动态创建动态列表视图时，我得到了这个

![我得到了什么](https://i.stack.imgur.com/tT9hZ.png)

这是我的 json

```
{"eventid":["61","23"],"name":["Clare Birthday","Mums Birthday"],"enddate":["Sat 27th April 2013","Wed 19th June 2013"]} 
```

这是我的代码。

```
<script type="text/javascript">
                                $(function(){
                                    var items="";
                                        $.getJSON("ajaxResponder.php?method=check-events",function(data){
                                            $("#contacts").html(
                                            '<li data-role="list-divider" role="heading">Live Events</li>'+
                                                $.each(data,function(index,item){
                                                    '<li><a href="check-events-details?eventid='+item.eventid+'" data-transition="slide">'+item.name+ 
                                                    '<p>End Date: '+item.enddate+'</p></li>'
                                                }));
                                            $("#contacts").listview("refresh");
                                        });
                                });

                        </script>

            <div data-role="fieldcontain">
            <ul id="contacts" data-role="listview" data-divider-theme="b" data-inset="true">
            </ul>
            </div> 
```

谁能看到我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:34:50.423

问题是，您没有正确读取数组。以下解决方案基于您要创建两个带有链接的列表项的假设`id`。读取数组的方法有很多种，这取决于您希望如何输出数据。

```
var object = {
 "eventid": ["61", "23"],
 "name": ["Clare Birthday", "Mums Birthday"],
 "enddate": ["Sat 27th April 2013", "Wed 19th June 2013"]
}; 
```

首先，您需要将 JSON 对象转换为数组。

```
var array = [object]; 
```

然后在里面循环。我`for`在这里使用语句循环两次。

```
for (var i = 0; i < 2; i++) {
 $.each(array, function (index, values) {
  var events = values.eventid;
  var names = values.name;
  var enddates = values.enddate;
  $('[data-role="listview"]').append('<li><a href=link"' + events[i] + '"> ' + names[i] + ' - ' + enddates[i] + '</a></li>');
  $('[data-role="listview"]').listview('refresh');
 });
} 
```

> **[演示](http://jsfiddle.net/Palestinian/jyb8J/)**

***注意：**元素`id`应该以字母而不是数字开头。*

# iphone - 为什么我杀死应用程序时我的数据库会丢失更改？

> ID：16197317
> 
> 赞同：0
> 
> 时间：2013-04-24T16:28:05.567
> 
> 标签：iphone, ios, core-data, magicalrecord

我正在实施一个持久的纸牌游戏来学习 Core Data 和 MagicalRecord，当我更改牌组中纸牌的顺序时遇到了一个奇怪的问题。这些卡片被实现为一个 NSOrderedSet，这样我就可以保持卡片在卡片组中的顺序。当我更改任何两张卡片的顺序时，当我将它们显示在屏幕上时，它们似乎会持续存在。但是，如果我终止应用程序并显示卡片，则对卡片顺序的更改将丢失。这是我交换两张卡并保存更改的简单代码...

```
MyDeck *deck = [MyDeck MR_findFirstInContext:managedObjectContext]; 
[deck.CardsSet exchangeObjectAtIndex:fromIndex withObjectAtIndex:toIndex];
[managedObjectContext MR_saveToPersistentStoreAndWait]; 
```

您是否看到在应用程序被终止后这些更改会丢失的任何原因？

提前感谢您的智慧！

# android - 我们可以将文件从一个 Android 应用程序传输到另一个应用程序吗

> ID：16197319
> 
> 赞同：1
> 
> 时间：2013-04-24T16:28:20.963
> 
> 标签：android, nfc

我需要开发一个应用程序来使用 NFC 将文件从一个 android（支持 NFC 的设备）设备传输到其他设备。我的应用程序创建了我想从一台设备传输到另一台设备的小数据文件。而不是将手机连接到PC并传输文件；有没有一种方法可以使用 NFC 并在水龙头上进行操作。

在阅读有关[NFC](http://developer.android.com/guide/topics/connectivity/nfc/index.html)时，它说

> NFC 允许您在 NFC 标签和 Android 设备之间或两个 Android 设备之间共享少量数据负载。

这是否意味着我们只能在两个设备之间共享小数据而不能共享文件。我知道我们可以共享 url、照片、视频、联系人等。有没有办法在两个 Android 设备之间传输文件？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:34:51.797

NFC 有效负载通常非常小，您很少能够将整个文件放入其中。

利用 NFC 的文件传输应用程序，包括内置的 Android Beam，使用 NFC 在两个设备之间建立蓝牙连接，然后使用蓝牙传输文件。这通常比尝试通过 NFC 逐个传输文件更快、更可靠，后者也需要多次点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T02:19:55.483

您可以通过[`setBeamPushUris`](http://developer.android.com/reference/android/nfc/NfcAdapter.html#setBeamPushUris%28android.net.Uri%5B%5D,%20android.app.Activity%29). 系统会自动切换到其他传输媒体传输文件

查看IO 2012 上的[此](http://r3---bru02t11.c.bigcache.googleapis.com/io2012/presentations/live%20to%20website/125.pdf?st=ts&ir=1)演示文稿以获取解释和示例

# jquery - 切换广播节目/仅隐藏最近

> ID：16197320
> 
> 赞同：1
> 
> 时间：2013-04-24T16:28:22.013
> 
> 标签：jquery

我在这里有一个工作示例：http: [//jsfiddle.net/infatti/esLMh/](http://jsfiddle.net/infatti/esLMh/)

为什么“不”不能隐藏？

```
$('.hide-show input').change(function() {
  $(this).closest('.hide-show').next('.hide-show-yes').toggle(this.value == 'yes');
  $(this).closest('.hide-show').next('.hide-show-no').toggle(this.value == 'no');
});
$('.hide-show input:checked').change(); //trigger correct state onload 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:35:53.247

`next`仅选择所选元素的下一个直接兄弟（*如果它与指定的选择器匹配*），根据您的标记，您应该调用两种`next`方法来选择第二个目标元素。

```
$('.hide-show input').change(function () {
    $(this).closest('.hide-show')
           .next('.hide-show-yes').toggle(this.value == 'yes')
           .next('.hide-show-no').toggle(this.value == 'no');
}); 
```

[http://jsfiddle.net/A8ycG/](http://jsfiddle.net/A8ycG/)

您也可以使用`nextAll`方法，但在这种情况下，这种方法过于矫枉过正。

# google-chrome - Google Chrome 中的 NPAPI 插件刷新问题

> ID：16197321
> 
> 赞同：0
> 
> 时间：2013-04-24T16:28:23.603
> 
> 标签：google-chrome, npapi, firebreath

或者......“何时调用 pluginWindowMac::InvalidateWindow()”？

道歉。在这里很难简短，这是一个相当具体的测试用例。

我正在 Firefox、Safari、Chrome 和 IE 下测试一个 NPAPI 插件（现已适应 Firebreath）。我正在 Windows 和 OS X 下测试插件。

它是一个使用 OpenGL 进行所有渲染的视频播放器。因此，在 OS X 上，我使用 CAOpenGLLayer 派生类，并支持在 Firefox 和 Chrome 下都使用的无效核心动画模型。

该插件在所有情况下和两个平台上都运行良好，除了 OS X 上的 Chrome (v26.0.1410.65)，我在 OS X 10.6 和 10.7 下都看到了一个奇怪的“刷新”问题。

就好像 Chrome 在某处对复合层进行双重缓冲。它总是在通过 OpenGL 绘制的那一帧之后一帧。我已经通过对每个绘图调用进行编号并将该编号绘制到 OpenGL 渲染中以及通过 NSLog 记录它来证明这一点。屏幕上的内容总是落后于记录的绘制回调（此时我没有渲染视频 - 它已暂停）。

通过使用特定的键盘事件来触发对 pluginWindowMac::InvalidateWindow() 的额外调用，我可以强制执行外部无效，这将使屏幕上的内容与上次渲染的内容同步，但在下一次绘制调用时它将再次失去同步（由层 setNeedsDisplay 触发）。

我目前在每个绘制回调结束时调用 pluginWindowMac::InvalidateWindow() 。换句话说，在图层“drawInCGLContext()”调用结束时。这似乎是唯一合乎逻辑的地方。但我开始怀疑在 Chrome 下这不起作用？显然，调用有效 - 正如键盘触发的 InvalidateWindow 所证明的那样，但它可能在 drawInCGLContext 内部不起作用？

该插件在 Firefox（另一个使用无效核心动画的浏览器）下运行良好。但也许这根本不依赖于工作的pluginWindowMac::InvalidateWindow()？

有没有其他人在 Chrome 上遇到过这个问题？发现任何解决方法？我现在能想到的只是某种计时器驱动的事件来触发额外的无效。

# python - 如何在呈现 pdf 时为 html2pdf 指定页眉/页脚？

> ID：16197322
> 
> 赞同：4
> 
> 时间：2013-04-24T16:28:24.713
> 
> 标签：python, html2pdf

我正在使用 html2pdf python 库，并且想定义一个页眉和一个页脚以应用于每个页面（包括有趣的东西，比如页脚的页数）。我可以使用 html2pdf 指定页眉/页脚的最方便的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-10T12:18:33.010

看看这是不是需要朋友。页眉和页脚是固定的并通知页数。

```
<?php
/**
 * HTML2PDF Librairy - example
 *
 * HTML => PDF convertor
 * distributed under the LGPL License
 *
 * @author      Laurent MINGUET <webmaster@html2pdf.fr>
 *
 * isset($_GET['vuehtml']) is not mandatory
 * it allow to display the result in the HTML format
 */

ob_start();

// HTML template begin (no output)

?>
<style type="text/css">
<!--
    table.page_header {width: 100%; border: none; background-color: #DDDDFF; border-bottom: solid 1mm #AAAADD; padding: 2mm }
    table.page_footer {width: 100%; border: none; background-color: #DDDDFF; border-top: solid 1mm #AAAADD; padding: 2mm}

    div.niveau
    {
        padding-left: 5mm;
    }
-->
</style>
<page backtop="14mm" backbottom="14mm" backleft="10mm" backright="10mm" style="font-size: 12pt">
    <page_header>
        <table class="page_header">
            <tr>
                <td style="width: 100%; text-align: left;">
                    Exemple d'utilisation des bookmarks
                </td>
            </tr>
        </table>
    </page_header>
    <page_footer>
        <table class="page_footer">
            <tr>
                <td style="width: 100%; text-align: right">
                    page [[page_cu]]/[[page_nb]]
                </td>
            </tr>
        </table>
    </page_footer>
</page>
<?php

    // HTML end 
    // Getting the html which was not displayed into $content var
    $content = ob_get_clean();

    require_once(dirname(__FILE__).'/../html2pdf.class.php');
    try
    {
        $html2pdf = new HTML2PDF('P', 'A4', 'fr', true, 'UTF-8', 0);
        $html2pdf->writeHTML($content, isset($_GET['vuehtml']));
        $html2pdf->createIndex('Sommaire', 25, 12, false, true, 1);
        $html2pdf->Output('bookmark.pdf');
    }
    catch(HTML2PDF_exception $e) {
        echo $e;
        exit;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-07T06:20:40.303

简单的蓝莓！您可以使用页面和框架来定义页眉和页脚，方法是将它们放在 HTML 文档的样式标签中。

```
<html>
    <head>
    <style>
    /* Page margins are defined using CSS */
    @page {
      margin: 1cm;
      margin-top:2.5cm;
      margin-bottom: 2.5cm;

    /* Header frame starts within margin-top of @page */
      @frame header {
      -pdf-frame-content: headerContent; /* headerContent is the #id of the element */
      top: 1cm;
      margin-left: 1cm;
      margin-right:1cm;
      height:1cm;
      }

    /* Footer frame starts outside margin-bottom of @page */
      @frame footer {
        -pdf-frame-content: footerContent;
        bottom: 2cm;
        margin-left: 1cm;
        margin-right: 1cm;
        height: 1cm;
      }
    }
    </style>
    </head>
    <body>
           <div id="headerContent">I'm a header!</div>
           <p>I could be some content</p>
           <div id="footerContent">I'm a footer! <pdf:pagenumber></div>
    </body>
</html> 
```

**pdf:pagenumber**是用于显示页数的标签。包括更多标签。只需参考官方文档！

**来源**：[HTML2PDF Github 文档](https://github.com/chrisglass/xhtml2pdf/blob/master/doc/usage.rst)

# jquery - Jquery查找具有特定数据的所有表单元素-然后找到匹配的标签并更改其内容

> ID：16197330
> 
> 赞同：0
> 
> 时间：2013-04-24T16:28:51.373
> 
> 标签：jquery, loops

我特别懒惰，我试图让 jQuery 将小星号添加到所有必需表单字段的标签中。

MVC 将“data-val-required”属性添加到所有必需的表单字段。我知道我可以使用 $("form").find("[data-val-required]") 找到所有匹配的元素，但是我不清楚如何遍历该集合并将 * 附加到具有匹配名称的标签.

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:36:22.613

jQuery：

```
$("[data-val-required]").each(function() { $("label[for=" + this.id + "]").addClass("required") }); 
```

CSS：

```
 label.required::after{ content: " *" } 
```

小提琴：http: [//jsfiddle.net/rxw8k/3/](http://jsfiddle.net/rxw8k/3/)

# ruby - 我应该使用 RSpec 测试私有方法吗？

> ID：16197332
> 
> 赞同：26
> 
> 时间：2013-04-24T16:29:03.920
> 
> 标签：ruby, rspec, private-methods

为私有方法编写测试是一种好习惯吗？

考虑以下简单示例：

```
class Group
  has_many :members

  private

  def release_members
    members.each { |member| member.update_attributes group_id: nil }
  end
end 
```

在 RSpec 中为 release_members 方法编写测试是一种好习惯吗？我相信你必须编写测试调用发送即方法的方法。`group.send(:release_members)`这有时是不受欢迎的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-24T16:36:13.637

您不应该测试私有方法，因为它们属于类的内部机制。单元测试的目的是检查您的类在通过其接口（即其公共方法）进行交互时的行为是否符合预期。

如果在某个时候你对长的私有方法不满意，那可能是因为你有机会将这个逻辑拉到类之外并构建另一个模块或类。然后，您可以对它进行单元测试，同样只测试它的接口，即它的公共方法。

在极少数情况下，有必要测试私有方法，因为整个内部逻辑非常复杂，您想拆分问题。但在 99.9% 的情况下，测试私有方法是个坏主意。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-24T16:52:05.673

您可以在 Sandi Metz 演讲的这些幻灯片中找到对该主题的深入讨论。

[https://speakerdeck.com/skmetz/magic-tricks-of-testing-railsconf](https://speakerdeck.com/skmetz/magic-tricks-of-testing-railsconf)

她说如果你愿意，你可以试驾你的私有方法，但你应该担心的唯一测试是那些测试公共接口的测试。否则，您可能与实现的耦合过于紧密。

如果您对未经测试的复杂私有方法感到紧张，我认为逐点拆分服务和价值对象并将它们置于测试之下也是一个好方法。

# c# - C# FTP Size 命令不适用于所有 FTP 服务器

> ID：16197338
> 
> 赞同：2
> 
> 时间：2013-04-24T16:29:23.603
> 
> 标签：c#, ftp, filesize

我在使用一段非常简单的代码时遇到了一些问题：

```
 private long getFTPLogLength()
    {
        long size;
        FtpWebRequest ftpRequest = (FtpWebRequest)FtpWebRequest.Create(new Uri(ftpURL));
        ftpRequest.Credentials = new NetworkCredential(ftpUsername, ftpPassword);
        try
        {
            ftpRequest.ReadWriteTimeout = 6000;
            ftpRequest.Method = WebRequestMethods.Ftp.GetFileSize;
            FtpWebResponse respSize = (FtpWebResponse)ftpRequest.GetResponse();
            size = respSize.ContentLength;
            respSize.Close();
        }
        catch (Exception ex)
        {
            logLog.writeEntry(4, "Error getting logsize from FTP: " + ex.Message);
            size = 0;
        }
        return size;
    } 
```

这种方法的重点显然是抓取特定文件的长度。这里的问题是，在某些服务器（即 gameservers.com 服务器）上，此代码不起作用。它适用于我可以测试的所有其他服务器类型。

我在寻求帮助时确实发现了这一点：[C# FTP 550 错误](https://stackoverflow.com/questions/4464271/c-sharp-ftp-550-error)，我尝试了一个斜杠和两个，但仍然得到相同的结果。为了更进一步，我只在执行 GetFileSize (SIZE) 时收到 550 错误。如果我执行 GetDateTime (MDTM)，它不会抛出此错误。这会让您相信 SIZE 命令已被禁用，或者我无权使用它，但是如果我使用 FileZilla（或任何客户端）连接到服务器，并运行 SIZE games_mp.log 它工作得很好。

这是异常后调试器的屏幕截图（注意，我购买此游戏服务器的目的就是为了修复此错误，因此故意保留凭据以供您进行测试）。

![在此处输入图像描述](https://i.stack.imgur.com/RPMHG.jpg)

任何可以帮助我弄清楚我需要做什么才能使其与他们的服务器一起工作的信息都会有所帮助。希望我错过了一些简单的东西。:)

经过更多测试后，如果我让 FileZilla 超时，我手动运行命令，我收到一个错误，关于 SIZE 在 ASCII 模式下不受支持，但如果我开始与服务器建立新连接，它就可以正常工作。

与服务器的新连接： ![在此处输入图像描述](https://i.stack.imgur.com/j24et.jpg)

超时后的命令： ![在此处输入图像描述](https://i.stack.imgur.com/GoEcN.jpg)

希望这对某人意味着什么....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T21:06:37.210

（注意：我在这里编写了 FTP 服务器软件，并且可以访问所发生事件的原始服务器日志）

这里的问题很简单，当您在 Filezilla 中尝试 SIZE 命令时，您处于二进制传输模式。当您尝试通过您的客户端（或 Filezilla 重新连接后）运行此命令时，您处于 ASCII 传输模式。

查看实际访问日志，似乎在初始连接上，Filezilla 执行“TYPE I”，然后执行“MLSD”。当它之后重新连接时，它不会再次尝试 MLSD 命令，因此它不会费心执行 'TYPE I'。

在 ASCII 模式下计算实际文件大小是相当耗费资源的（特别是考虑到您的代码本质上会非常频繁地尝试此命令）。它要求我们解析整个文件并替换所有行结束字符。这不是我们一直想要在繁忙的 FTP 服务器上做的事情。

这种行为实际上是由 RFC 解释的：

> 对 SIZE 命令的 550 错误响应的存在不能被客户端视为不能以当前模式和类型传输文件的指示。服务器可能会因其他原因生成此错误——例如，如果处理开销被认为太大。

在 ASCII 模式下：

```
ncftp / > quote size games_mp.log
> quote size games_mp.log

Cmd: size games_mp.log
550: SIZE not allowed in ASCII mode.
SIZE not allowed in ASCII mode. 
```

在二进制模式下：

```
ncftp / > quote size games_mp.log
> quote size games_mp.log

Cmd: size games_mp.log
213: 134901
134901 
```

因此，您在这里的实际解决方法是在尝试获取文件大小之前切换到二进制模式。

我们也非常希望您更改帐户的密码。过去，我们已经看到开放 FTP 帐户的严重滥用行为（有些人认为需要用各种类型的盗版内容填充他们发现的任何 FTP 帐户）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:37:12.703

Ftp SIZE 命令在基本的 FTP RFC 中不存在，仅在 RFC 3659 中添加。而且，FTP 的错误 550 是“操作不可用”，即服务器告诉它不支持这样的命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-26T00:58:23.943

如果服务器支持 FEAT 命令，则将其发送到服务器并查看结果列表中是否包含“SIZE”。这应该明确告诉您服务器是否支持 SIZE 命令。这当然假设服务器支持 FEAT 命令本身。

# spring-mvc - spring 自动为每个请求填充用户详细信息

> ID：16197341
> 
> 赞同：0
> 
> 时间：2013-04-24T16:29:27.233
> 
> 标签：spring-mvc

我有一个基于 Spring MVC 的 Web 应用程序。目前在我的网页中，我在用户登录后显示用户的名字和姓氏。我这样做的方式是，对于进入 @Controller@RequestMapping 的每个 HttpServletRequest，我获取 Principal 对象并从中获取用户详细信息它，然后用 firstname 和 lastname 属性填充 ModelMap。例如这里是示例代码

```
@Autowired
private SecurityDetails securityDetails;

@RequestMapping(method = RequestMethod.GET)
public String showWelcomePage(HttpServletRequest request,
        HttpServletResponse response, ModelMap model, Principal principal)
{
    securityDetails.populateUserName(model, principal);
            ... lot of code here;
    return "home";
}

public boolean populateUserName(ModelMap model, Principal principal) {
    if (principal != null) {
        Object ob = ((Authentication)principal).getPrincipal();
        if(ob instanceof MyUserDetails)
        {
            MyUserDetails ud = (MyUserDetails)ob;
            model.addAttribute("username", ud.getFirstName() + " " + ud.getLastName());
        }
        return true;
    }
    else
    {
        logger.debug("principal is null");
        return false;
    }
} 
```

我的问题是我必须为每个 RequestMapping 调用 populateUserName 方法。有没有一种优雅的方法，比如在 Interceptor 方法中填充它，这将导致这个方法在整个应用程序的一个地方被调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:46:27.990

您想防止代码重复，这很好。这是你如何做到的。

1.  创建自定义`HandlerInterceptor` [http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/HandlerInterceptor.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/HandlerInterceptor.html)

2.  后处理是我们唯一感兴趣的方法，因为其他方法返回默认值。

3.  在 post 处理方法中，您可以访问从控制器返回的模型和视图，继续添加您想要的任何内容。

4.  `Principal`此处无法直接使用，您必须使用一些代码来查找它，例如`SecurityContextHolder.getContext().getAuthentication().getPrincipal()`

5.  连接处理程序拦截器以拦截所有或部分控制器。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:16:53.277

您可以使用`Servlet Filters`或`Spring Interceptors`。

顺便说一句，您从哪里填充校长？

无论如何，这就是你应该做这些填充的东西的地方。

# javascript - 为什么我的 html 没有用 jQuery html() 显示？

> ID：16197342
> 
> 赞同：1
> 
> 时间：2013-04-24T16:29:27.793
> 
> 标签：javascript, jquery, html

我对 jQuery 还很陌生，所以请放纵一下。

我在 javascript 中有一个包含一些 html 的变量：

做的时候`console.log(tableData);`

我得到：

```
<tr class="table_row event_6163><td>Tue 16th Feb 2016</td><td>DEMO Venue</td><td>V_Town</td><td>United Kingdom</td><td class=green>Tickets available</td></tr> 
```

然后我做`$('#event_stats tbody').append(tableData);`

但我没有任何显示。为什么 ？它适用于其他一些 html 内容。我的控制台没有错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:35:30.023

这里好像少了一个引号：

```
<tr class="table_row event_6163> 
```

应该是：

```
<tr class="table_row event_6163"> 
```

类绿色上的引号也不见了。

我不知道这是否导致了不需要的行为。不幸的是，由于缺少框架，我无法测试您的代码。

# c# - File.Exists 在已发布网站的文件中失败

> ID：16197344
> 
> 赞同：0
> 
> 时间：2013-04-24T16:29:31.000
> 
> 标签：c#, model-view-controller, permissions, msdeploy

设置：MVC Web Api 应用程序、Visual Studio 2012

文件夹布局：D:\WebSites\MySite\bin\MyDLLBin\Some.dll

我的应用程序需要将非托管 DLL 上的 LoadLibrary 作为 MVC Web API 应用程序的一部分。在做 LoadLibrary 之前，我做了一个：

```
File.Exists(@"D:\WebSites\MySite\bin\MyDLLBin\Some.dll") 
```

这将返回 false，这意味着我不应该执行 LoadLibrary。

我尝试在此处复制 DLL：C:\MyDLLs\Some.Dll

和

```
File.Exists(@"C:\MyDLLs\Some.DLL") 
```

返回真。所以我从那里做了一个 LoadLibrary，一切都很好。

我通过登录服务器并创建它来创建“C:\MyDLLs”文件夹。“D:\WebSites\MySite\bin\MyDLLBin”文件夹是通过 Visual Studio 发布创建的。

我想可能是某种权限问题，但我已经登录服务器并在路径“D:\WebSites\MySite\bin\MyDLLBin”和 File.Exists 中的每个文件夹上将“所有人”设置为“完全访问”失败。

对我来说，将 Some.dll 作为发布的一部分部署到 bin 文件夹会更好，而不必在服务器上创建一个特殊的文件夹来保存 dll。

有人可以建议修复或其他一些尝试吗？

更新#1：有趣的是：

```
System.IO.FileInfo(@"D:\WebSites\MySite\bin\MyDLLBin\Some.dll").Length 
```

不抛出异常并返回 7132045。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:35:23.967

假设`filePathInApp`该字符串包含从应用程序运行的根目录（而不是文件系统的根目录） 到您的`Server.MapPath(filePathInApp)`文件的路径，那么无论应用程序在哪里运行，都会将您的目录路径更改为“根目录”。所以你可能想尝试`Server.MapPath("some.dll")`或`Server.MapPath("\MyDLLBin\some.dll")`

# r - 用 R 将子图移得更近

> ID：16197355
> 
> 赞同：5
> 
> 时间：2013-04-24T16:29:43.533
> 
> 标签：r

我正在尝试将子图与 R 拉得更近。

我在做什么基本上不重要，只是为了快速复制，这里是代码：

```
library(igraph)
library(plyr)

g<-graph.ring(10)
setEPS()
postscript( 'out.eps', horizontal=F, onefile=F, paper="special", fonts=c("serif", "Palatino"))

par( mfrow = c( 1, 5 ) )
for (i in 1:5){
  plot(g)
  title(main='title', cex.main=1.2)
}

dev.off() 
```

作为输出，我得到：![在此处输入图像描述](https://i.stack.imgur.com/l9lWd.jpg)

我知道我可以将它组织成 2x3 布局，而不是 1x5，但这并不重要。问题是，每个子图之间有很多可用空间，我想将它们放置得尽可能紧凑。

有没有办法实现它？

PS[这个问题](https://stackoverflow.com/questions/9239043/r-graphing-making-two-plots-closer-together-on-the-graph)听起来很相关，但实际上并非如此。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:53:54.673

您只需要添加：

```
par(mar = c(5,0,4,0)) 
```

调整每个图的边距。还有另一种通过设置调整边距的方法`mai`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T17:42:23.310

我通常做的是在 par 中使用 omi ('c(bottom, left, top, right)') 和 plt ('c(x1, x2, y1, y2)') 参数。omi 以英寸为单位调整外边距， plt 将绘图区域的坐标作为图形区域的一部分。使用 ?par 获得更详细的解释和更多参数。

```
par(mfrow = c(2,3), omi=c(0.5,0.3,0,0), plt=c(0.1,0.9,0,0.7)) 
```

# c# - Windows 8 组合框隐藏在 WebView 后面

> ID：16197357
> 
> 赞同：0
> 
> 时间：2013-04-24T16:29:49.567
> 
> 标签：c#, winrt-xaml

我有一个包含多个项目的网格视图。

每个项目都是一个 Webview。现在我的问题是我在 GridView 上方有一个 ComboBox。当我选择组合框时，下拉菜单隐藏在 GridView 项（即 Webview）后面。现在我不能使用 WebViewBrush，因为我在网格视图中有多个 WebView 项目。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:48:07.027

XAML UI 始终位于 WebView 窗口的后面 - 这是一个典型的空域问题。您必须将 WebViewBrush 用于可能掩盖您的 XAML 控件的任何 WebView。一些替代方案包括修改您的 UI 布局 - 例如，转到单独的页面以显示您的选择器控件或移动 ui 元素以使其不会发生冲突或在 HTML 中实现所有这些。

# jsf-2 - p:tree setSelectedNodes 来自另一种形式

> ID：16197358
> 
> 赞同：0
> 
> 时间：2013-04-24T16:29:52.080
> 
> 标签：jsf-2, primefaces

我正在使用 PF 3.4 和 JSF2。（我更改了展示示例以展示我正在尝试做的事情。）

xhtml 文件（带有第二种形式的额外命令按钮）：

```
<h:form id="form">
    <p:growl id="messages" showDetail="true" escape="false"/>
    <p:tree value="#{treeBean.root}" var="node"
        selectionMode="checkbox" selection="#{treeBean.selectedNodes}"  id="treeMultiple">
        <p:treeNode>
            <h:outputText value="#{node}" />
        </p:treeNode>
    </p:tree>

    <p:commandButton value="Display Selected" update="messages"
        actionListener="#{treeBean.displaySelectedMultiple}" id="btnDisplay" />
</h:form>

<h:form id="form2">
    <p:commandButton value="Display Selected" 
        process=":form:treeMultiple"
        actionListener="#{treeBean.displaySelectedMultiple}" id="btnDisplay2" />
</h:form> 
```

支持豆：

```
public class TreeBean implements Serializable {
private TreeNode root;
private TreeNode[] selectedNodes;

public TreeBean() {
    root = new DefaultTreeNode("Root", null);
    TreeNode node0 = new DefaultTreeNode("Node 0", root);
    TreeNode node1 = new DefaultTreeNode("Node 1", root);
    TreeNode node2 = new DefaultTreeNode("Node 2", root);

    TreeNode node00 = new DefaultTreeNode("Node 0.0", node0);
    TreeNode node01 = new DefaultTreeNode("Node 0.1", node0);

    TreeNode node10 = new DefaultTreeNode("Node 1.0", node1);
    TreeNode node11 = new DefaultTreeNode("Node 1.1", node1);

    TreeNode node000 = new DefaultTreeNode("Node 0.0.0", node00);
    TreeNode node001 = new DefaultTreeNode("Node 0.0.1", node00);
    TreeNode node010 = new DefaultTreeNode("Node 0.1.0", node01);

    TreeNode node100 = new DefaultTreeNode("Node 1.0.0", node10);
}

public TreeNode getRoot() {
    return root;
}

public TreeNode[] getSelectedNodes() {
    return selectedNodes;
}

public void setSelectedNodes(TreeNode[] selectedNodes) {
    this.selectedNodes = selectedNodes;
}

public void displaySelectedMultiple(ActionEvent event) {
    if(selectedNodes != null && selectedNodes.length > 0) {
        StringBuilder builder = new StringBuilder();

        for(TreeNode node : selectedNodes) {
            builder.append(node.getData().toString());
            builder.append("<br />");
        }

        FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, "Selected", builder.toString());

        FacesContext.getCurrentInstance().addMessage(null, message);
    }
} 
```

}

我遇到的问题是支持 bean 中的 setSelectedNodes 方法。

commandButton :form2:btnDisplay2 将调用该方法，但是，它传递一个 TreeNode[0] 值（空数组）。它没有正确传递选定的节点。

第一个按钮 :form:btnDisplay 可以正常工作。

**附加信息：** 在我的应用程序中，我在左侧导航区域 (form1) 中有“过滤器”：日期范围和各种缩小搜索范围的标准 - 这些都是可选的。其中一些标准在 ap:tree 组件中。我目前有一个该表单中的“应用过滤器”按钮，该按钮有效：p:tree 选择正确地传递给支持 bean。

在主要内容区域 (form2) 中，我有所需的选择标准 (account#) 和“搜索”按钮。问题是用户忘记单击form1 中的“应用过滤器”按钮。他们在 p:tree 中设置日期范围和复选框（在 form1 中），然后单击 form2 上的“搜索”按钮。

所以，从form2，我试图从form1处理p：tree。

# php - PHP“无法访问受保护的属性”

> ID：16197362
> 
> 赞同：4
> 
> 时间：2013-04-24T16:29:57.860
> 
> 标签：php, oop

这是我的第一个 OOP 程序，所以请不要生我的气 :) 问题是我遇到了以下错误：

> 无法访问第 47 行 D:\xampp\htdocs\php\OOP\coder_class.php 中的受保护属性 Code::$text

该程序只是对字符串进行编码并对其进行解码。我不确定这是否是学习 OOP 的好例子。

```
<?php
class Code
{
    // eingabestring
    protected $text;

            public function setText($string)
            {
                $this->text = $string;
            }

            public function getText()
            {
                echo $this->text;
            }
}

class Coder extends Code
{
    //Map for the coder
    private $map = array(
        '/a/' => '1',
        '/e/' => '2',
        '/i/' => '3',
        '/o/' => '4',
        '/u/' => '5');

            // codes the uncoded string
    public function coder() 
    {
        return preg_replace(array_keys($this->map), $this->map, parent::text);      
    }
}

class Decoder extends Code
{
    //Map for the decoder
    private $map = array(
    '/1/' => 'a',
    '/2/' => 'e',
    '/3/' => 'i',
    '/4/' => 'o',
    '/5/' => 'u');

            // decodes the coded string
            public function decoder()
    {
        return preg_replace(array_keys($this->map), $this->map, parent::text);      
    }
}

$text = new code();
    $text -> setText("ImaText");
    $text -> coder();
    $text -> getText(); 
```

?>

有人可以帮我解决这个问题。我是 PHP 新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:35:09.847

和：

```
protected $text; 
```

和：

```
echo $text->text; 
```

这就是你得到错误的原因。`protected`意味着只有`Code`类的后代才能访问该属性，即。`Coder`和`Decoder`。如果你想通过它访问`$text->text`它必须是`public`. 或者，只需编写一个`getText()`方法；您已经编写了 setter。

旁注：`public`、`private`和`protected`关键字几乎与安全性*无关。*它们通常旨在强制执行数据/代码/对象的完整性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:33:54.430

相关代码：

```
class Code
{
    protected $text;
}
$text = new code();
echo $text->text; 
```

该属性不是公开的，因此是错误的。它像宣传的那样工作。

# php - 雅虎！信使 API 和 PHP

> ID：16197365
> 
> 赞同：0
> 
> 时间：2013-04-24T16:30:00.770
> 
> 标签：php, yahoo, yahoo-api

所以我有 API 文档，只要登录我就可以使用它。当我尝试发送错误时，该类只是返回 true，因此没有多大帮助。IM 没有被发送，所以我更改了类以返回它没有被发送的原因。

```
> Fetching request token > Fetching access token > Signon as: {MY_ACCOUNT}@yahoo.com >  {"error":{"code":-1005,"detail":"Invalid Argument Error","description":"Invalid Argument Error"},"code":-1005} 
```

尝试发送 IM 使用

```
$sendIm = $engine->send_message($toAddress, 'TEST'); 
```

print_r($sendIm);

我努力了

```
$toAddress = 'theirAddress'; 
```

和

```
$toAddress = 'TheirAddress@yahoo.com'; 
```

查看[http://developer.yahoo.com/messenger/guide/ch02.html](http://developer.yahoo.com/messenger/guide/ch02.html)显示 -1005 是一个“错误参数”，但是只有 2 个传递给 IM 函数，to & msg，两者都是正确的. 其他人有这个问题吗？有任何想法的人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:24:21.977

好的，现在在类的“send_message”函数中为遇到此问题的其他人解决了

```
$postdata = '{"message" : '. $message. '}'; 
```

是错误的，需要

```
$postdata = '{"message" : "'. $message. '"}'; 
```

注意 $message 周围的引号。这就是全部！API 中的简单错字。

# android - SupportMapFragment 是不可见的

> ID：16197368
> 
> 赞同：3
> 
> 时间：2013-04-24T16:30:10.503
> 
> 标签：android, android-fragments, google-maps-android-api-2

我正在尝试以编程方式创建一个 SupportMapFragment 以将其放置在选项卡中。它似乎创建得很好（onCreateView(...) 被调用 getMap() 返回一个非空值，等等...）但它实际上并没有在屏幕上呈现任何东西（因为我只能看到背景参与活动的图像）。

我已经尝试通过执行以下操作来遵循 Google 关于嵌套片段的示例：

```
SupportMapFragment mapFragment = new SupportMapFragment();
FragmentTransaction transaction = getChildFragmentManager().beginTransaction();
transaction.add(R.id.fragment_container, mapFragment).commit(); 
```

而且我已经厌倦了对 SupportMapFragment 进行子类化，但除非我将它放在 xml 布局文件中（即使用 <fragment ... />），否则它不会在屏幕上显示任何内容。有谁知道我可能做错了什么？

我正在为 2.3 构建，以 4.2 为目标，并使用 v12 支持库，如果重要的话。这一切都在 4.0.3 设备上进行测试。

# drupal-7 - Drupal node_save 不保存字段

> ID：16197369
> 
> 赞同：1
> 
> 时间：2013-04-24T16:30:16.830
> 
> 标签：drupal-7

我刚刚偶然发现了非常奇怪的行为。在我的代码中，我正在使用一些字段保存新节点。我必须说这曾经很好地工作。但是现在它刚刚停止工作。我使用开发模块打印出对象和变量的内容，这是我的代码：

```
dsm($node);
node_save($node);
dsm($node); 
```

第一个 dsm() 函数显示了我创建的节点对象以及它应该是的样子。第二个 dsm() 函数显示完全正确的节点对象，其中填充了 nid、字段内容等......但是，尽管 {node} 表中有新记录，但没有任何字段保存在数据库中。此外， node_save 不会产生任何类型的错误。

知道这里发生了什么吗？

这是存储节点的函数：

```
function manhattan_incident_save($data) {
if ($data['nid']) {
  $node = node_load($data['nid']);
  manhattan_compare_changes($node, $data);
}
else {
  $node = new stdClass();
  $node->type = 'incident';
  node_object_prepare($node);

  $node->title = manhattan_create_incident_id();
  $node->language = LANGUAGE_NONE;      
}

$node->field_incident_popis[$node->language][0]['value'] = $data['field_incident_popis'];
$node->field_incident_popis[$node->language][0]['safe_value'] = check_plain($data['field_incident_popis']);

$node->field_incident_agent[$node->language][0]['uid'] = isset($data['field_incident_agent'])?intval($data['field_incident_agent']):NULL;

$node->field_incident_zdroj[$node->language][0]['tid'] = intval($data['field_incident_zdroj']);
$node->og_group_ref[$node->language][0]['target_id'] = $data['field_incident_oblast']?intval($data['field_incident_oblast']):variable_get('manhattan_public_form_default_area_nid', NULL);
$node->field_incident_riesitel[$node->language][0]['uid'] = isset($data['field_incident_riesitel'])?intval($data['field_incident_riesitel']):NULL;
$node->field_incident_typ[$node->language][0]['tid'] = intval($data['field_incident_typ']);
$node->field_incident_doplnenie[$node->language][0]['nid'] = intval($data['field_incident_doplnenie']);
$node->field_incident_sposob_kontaktu[$node->language][0]['value'] = $data['field_incident_sposob_kontaktu'];
$node->field_incident_dovod_vzniku[$node->language][0]['tid'] = intval($data['field_incident_dovod_vzniku']);

if ($data['field_incident_suvisiaci_zaznam']) {
  foreach ($data['field_incident_suvisiaci_zaznam'] as $file) {
    $result = manhattan_save_files($file);
    if ($result) {
      $node->field_incident_suvisiaci_zaznam[$node->language][] = array('nid' => $result); 
    }
  }
}

// now create/save the customer
if (function_exists('customer_customer_save')) {
  $customer = $data;
  $customer['nid'] = $data['field_incident_customer'];
  $result = customer_customer_save($customer); 
  if ($result) {
    watchdog('upvs', $result['message'], array(), WATCHDOG_NOTICE);
  }
  else {
    watchdog('upvs', t('There was a problem with saving customer %nid'), array('%nid' => $data['nid']), WATCHDOG_ERROR);
  }
}
// now we store nid of saved customer to the node object
$node->field_incident_customer[$node->language][0]['nid'] = $result['nid'];

dsm($node);
node_save($node); 
dsm($node);

if ($data['nid']) {
  watchdog('upvs', t('Incident number %title has been succesfully saved.'), array('%title' => $node->title), WATCHDOG_NOTICE);
}
else {
  watchdog('upvs', t('Incident number %title has been succesfully created.'), array('%title' => $node->title), WATCHDOG_NOTICE);
}

return $node;
} 
```

# dependency-injection - DI创造模式

> ID：16197371
> 
> 赞同：0
> 
> 时间：2013-04-24T16:30:21.833
> 
> 标签：dependency-injection, inversion-of-control, castle-windsor

已经为此苦苦挣扎了一段时间，所以我开始认为我已经创建了一个反模式。不过，这里有；

```
//Register self
container.Register(Component.For<IWindsorContainer>().Instance(container));
//Register all
container.Register(Component.For<IService1>().ImplementedBy<Service1>());
container.Register(Component.For<IService2>().ImplementedBy<Service2>());
//etc

IService1
{
  //blabla
}
IService2 {IService1 Service1{get;}} 
```

所以 IService1 和 IService2 可以在没有任何特殊的情况下创建。从 IService3 开始，涉及一个 IProject。

```
IProject{}
//Resolve a service that, amongst other things, relies on an IProject
IProjectGet
{
    T Get<T>(IProject proj) 
        where T : class;
}
//Impl
ProjectGet : IProjectGet
{
    IWindsorContainer _cont;
    public ProjectGet(IWindsorContainer cont){_cont=cont}

    public T Get<T>(IProject proj)
    {
        //Resolve using the main (and only) container and pass the IProject
        return _cont.Resolve<T>(new {p = proj});
    }
} 
```

这不起作用，仅使用“p = proj”解析主服务以及主服务具有的任何其他依赖项，这些依赖项也依赖于项目，导致异常说找不到项目服务。

```
IService3 
{
    IService2 Service2{get;}
    IProjectGet ProjectGet{get;}
    IProjectLevelStuff SetActiveProject(IProject proj);
}
Service3 : IService3 
{
    IService2 Service2{get;private set;}
    IProjectGet ProjectGet{get;private set;}

    public Service3(IService2 s2, IProjectGet p)
    {
        ProjectGet = p;
        Service2 = s2;
    }

    public IProjectLevelStuff SetActiveProject(IProject proj)
    {
        return ProjectGet.Get<IProjectLevelStuff>(proj);
    }
}
ProjectLevelStuff : IProjectLevelStuff
{
    IProject Project{get;private set;}
    IService4 Service4 {get;private set;}

    public ProjectLevelStuff(IProject p, IService4)//etc.
}
IService4
{
    IService2 Service2{get;}
    IService5 Service5{get;}
    IService6 Service6{get;}
    IProject Project{get;}
}
IService5{IProject Project{get;}}
IService6{IProject Project{get;}} 
```

这失败了，因为只有 ProjectLevelStuff 将 IProject 传递给它，并且由于 IService4 及其依赖项也需要它，因此引发了异常。即使这确实有效，我也不喜欢它，因为每个依赖于 IProject 的服务都被迫调用我想避免的参数“p”。

我只想继续使用我已经拥有的服务，但是这次添加了作为可解析依赖项传递给我们的通用 Get 方法的 IProject 实例。我发现无法复制容器并创建一个新容器，然后将主容器添加为子容器不会改变任何东西（依赖关系仍然缺失）。这是怎么做到的？

Castle Windsor 确实内置了一个 TypeFactory，但它本质上与我已经在做的事情相同，并且没有解决任何问题。我发现的唯一“解决方案”是创建一个新容器并重新注册类型，但这次通过主容器解决它们（当然 IProject 除外）.. 这是工作中的维护噩梦。

更新：我在下面的答案中添加了一些单元测试，希望能解决一些问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T07:58:29.507

请检查您是否可以使用以下方法使用范围：

```
[SetUp]
public void Setup()
{
    int counter = 0;

    _container = new WindsorContainer();
    _container.AddFacility<TypedFactoryFacility>();
    _container.Register(
        Component.For<IService1>().ImplementedBy<Service1>().LifestyleScoped(),
        Component.For<IService2>().ImplementedBy<Service2>().LifestyleScoped(),
        Component.For<IService3>().ImplementedBy<Service3>().LifestyleScoped(),
        Component.For<Class1>().LifestyleTransient(),
        Component.For<Class2>().LifestyleTransient(),
        Component.For<IProject>().ImplementedBy<Project>().LifestyleScoped().DynamicParameters((k, d) => d["name"] = "MyProjectName"+counter++)
        );
}

[Test]
public void TestClass1()
{
    using (_container.BeginScope())
    {
        Class1 object1 = _container.Resolve<Class1>();;
        var object2 = _container.Resolve<Class1>();
        Assert.AreNotSame(object1, object2);

        Assert.AreSame(object1.Service1, object2.Service1);
    }
}

[Test]
public void TestClass2()
{
    Class2 object1;
    using (_container.BeginScope())
    {
        object1 = _container.Resolve<Class2>();
        var object2 = _container.Resolve<Class2>();
        Assert.AreNotSame(object1, object2);

        Assert.AreSame(object1.Project, object2.Project);
        Assert.AreSame(object1.Service2.Project, object2.Service2.Project);
    }

    Class2 object3;
    using (_container.BeginScope())
    {
        object3 = _container.Resolve<Class2>();
    }

    Assert.AreNotSame(object1.Project, object3.Project);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:52:45.187

For some strange (but probably valid) reason Windsor child-containers can access their Parent containers but not the other way around. This means that in order to use services registered in the main container from the new container, we have to set the Parent of the main container rather than that of the new container.

This is painfully inconvenient because a container can only have one Parent.

```
internal class ProjServices : IProjServices
{
    private readonly IKwProject _proj;
    private readonly IWindsorContainer _mainCont;

    public ProjServices(IKwProject proj, IWindsorContainer mainCont)
    {
        _mainCont = mainCont;
        _proj = proj;
    }

    public T Resolve<T>()
    {
        T rett;

        //Create new container
        var projCont = new WindsorContainer();
        //Register new service
        projCont.Register(Component.For<IKwProject>().Instance(_proj));

        //Set hierarchy
        lock (_mainCont)
        {
            projCont.AddChildContainer(UiContainer); //ui needs project, set parent to projCont
            UiContainer.AddChildContainer(_mainCont); //main needs ui, set parent to uiCont

            //Resolve using main, which now has access to UI and Project services
            try
            {
                rett = _mainCont.Resolve<T>();
            }
            finally
            {
                projCont.RemoveChildContainer(UiContainer);
                UiContainer.RemoveChildContainer(_mainCont);
            }
        }

        return rett;
    }

    private static readonly object UIContainerLock = new object();
    private static volatile IWindsorContainer _uiContainer;
    private static IWindsorContainer UiContainer
    {
        get
        {
            if(_uiContainer==null)
                lock(UIContainerLock)
                    if (_uiContainer == null)
                    {
                        //Register the UI services
                    }
            return _uiContainer;
        }
    }
} 
```

And now if I wanted to use these new containers in even newer containers in the future I think I'd get stuck again due to the one-parent-only thing.... how do I properly do this, please?

UPDATE:

Unit Tests for VS 2010 and 2012:

ServiceTest.zip (798 KB) [https://mega.co.nz/#!z4JxUDoI!UEnt3TCoMFVg-vXKEAaJrhzjxfhcvirsW2hv1XBnZCc](https://mega.co.nz/#!z4JxUDoI!UEnt3TCoMFVg-vXKEAaJrhzjxfhcvirsW2hv1XBnZCc)

Or to copy&paste:

```
using System;
using Castle.MicroKernel.Registration;
using Castle.Windsor;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace ServiceTest
{
    /// <summary>
    /// A service that doesn't rely on anything else
    /// </summary>
    public interface IService1
    {
    }
    class Service1 : IService1
    {
    }

    /// <summary>
    /// The Project
    /// </summary>
    public interface IProject
    {
        string Name { get; }
    }
    public class Project : IProject
    {
        public Project(string name)
        {
            Name = name;
        }

        public string Name { get; private set; }
    }

    /// <summary>
    /// A Service that relies on a Project
    /// </summary>
    public interface IService2
    {
        IProject Project { get; }
        string GetProjectName();
    }
    /// <summary>
    /// The implementation shows it also relies on IService3
    /// </summary>
    public class Service2 : IService2
    {
        public Service2(IProject project, IService3 service3)
        {
            Project = project;
            Service3 = service3;
        }

        public IProject Project { get; private set; }
        public IService3 Service3 { get; private set; }

        public string GetProjectName()
        {
            return Project.Name;
        }
    }
    /// <summary>
    /// IService3 is a Service that also relies on the Project
    /// </summary>
    public interface IService3
    {
        IProject Project { get; }
    }
    public class Service3 : IService3
    {
        public Service3(IProject project)
        {
            Project = project;
        }

        public IProject Project { get; private set; }
    }

    /// <summary>
    /// Class1 uses the service without any dependencies so it will be easy to resolve
    /// </summary>
    public class Class1
    {
        public Class1(IService1 service1)
        {
            Service1 = service1;
        }

        public IService1 Service1 { get; private set; }
    }

    /// <summary>
    /// Class2 also uses that service, but it also relies on a Project ánd IService2
    ///  which as you know also relies on the Project and IService3 which also relies on 
    ///  the Project
    /// </summary>
    public class Class2
    {
        public Class2(IService1 service1, IProject project, IService2 service2)
        {
            Service1 = service1;
            Project = project;
            Service2 = service2;
        }

        public IProject Project { get; private set; }
        public IService1 Service1 { get; private set; }
        public IService2 Service2 { get; private set; }
    }

    /// <summary>
    /// Set up the base services
    /// </summary>
    [TestClass]
    public class UnitTestBase
    {
        protected WindsorContainer Cont;

        [TestInitialize]
        public void BaseSetup()
        {
            Cont = new WindsorContainer();
            Cont.Register(Component.For<IService1>().ImplementedBy<Service1>().LifestyleTransient());
            Cont.Register(Component.For<IService2>().ImplementedBy<Service2>().LifestyleTransient());
            Cont.Register(Component.For<IService3>().ImplementedBy<Service3>().LifestyleTransient());

            Cont.Register(Component.For<Class1>().LifestyleTransient());
            Cont.Register(Component.For<Class2>().LifestyleTransient());
        }

        [TestMethod]
        public void Class1_Resolves()
        {
            Cont.Resolve<Class1>();
        }
    }

    /// <summary>
    /// Set up the base unit tests
    /// </summary>
    [TestClass]
    public class UnitTestClass2Base : UnitTestBase
    {
        protected void RunTest3Times(Func<string, IWindsorContainer> getContainer)
        {
            const string projNameBase = "MyProjectName";
            Func<int, string> getProjectName = i => projNameBase + i;

            for (var i = 0; i < 3; i++)
            {
                var pName = getProjectName(i);
                GetClass2ForProject(getContainer(pName), pName);
            }
        }

        protected void GetClass2ForProject(IWindsorContainer cont, string projName)
        {
            var c2 = cont.Resolve<Class2>();

            Assert.IsTrue(c2.Project.Name == projName);
            Assert.IsTrue(c2.Service2.Project.Name == projName);
            Assert.IsTrue(c2.Service2.GetProjectName() == projName);
        }
    }

    /// <summary>
    /// This will fail on the second request because we cannot 
    ///  overwrite the earlier registration. And iirc containers can't
    ///  be altered after the first resolve.
    /// </summary>
    [TestClass]
    public class Attempt_1 : UnitTestClass2Base
    {
        [TestMethod]
        public void Class2_Resolves_Project_Scoped_Requests()
        {
            RunTest3Times(s =>
                {
                    Cont.Register(Component.For<IProject>().Instance(new Project(s)));
                    return Cont;
                });
        }
    }

    /// <summary>
    /// It looks like we have to create a new container for every Project
    /// So now the question remains; how do we get to keep using the base IService implementations
    ///  in the container that is scoped for the IProject?
    /// </summary>
    [TestClass]
    public class Attempt_2 : UnitTestClass2Base
    {
        static IWindsorContainer CreateContainer(IProject p)
        {
            var ret = new WindsorContainer();
            ret.Register(Component.For<IProject>().Instance(p));
            return ret;
        }

        /// <summary>
        /// This will fail because the services in the main 
        ///  container can't access the IProject in the new container
        /// </summary>
        [TestMethod]
        public void Class2_Resolves_Project_Scoped_Requests_1()
        {
            RunTest3Times(s =>
            {
                //Add the project container as a Child to the Main container
                var projCont = CreateContainer(new Project(s));
                Cont.AddChildContainer(projCont);
                return Cont;
            });
        }

        /// <summary>
        /// Doing the previous approach the other way around works.
        /// But now we can only resolve one thing at a time
        /// </summary>
        [TestMethod]
        public void Class2_Resolves_Project_Scoped_Requests_2()
        {
            IWindsorContainer projCont = null;

            //Add the Main container as a Child to the project container
            // (in other words set the Parent of Main to Project)
            // and then resolve using the main container.
            //A container can only have one parent at a time so we can only
            // resolve one scoped thing at a time.
            RunTest3Times(s =>
                {
                    if (projCont != null)
                        projCont.RemoveChildContainer(Cont);

                    projCont = CreateContainer(new Project(s));
                    projCont.AddChildContainer(Cont);
                    return Cont;
                });
        }

        /// <summary>
        /// The only way around that issue seems to be to register all project-dependent 
        ///  services in the new container. Then re-register all original services
        ///  in the new container and pass the resolving on to the main container; 
        ///  a maintenance nightmare and especially painful for named registrions.
        /// </summary>
        [TestMethod]
        public void Class2_Resolves_Project_Scoped_Requests_3()
        {
            Func<IProject, IWindsorContainer> createContainer2 = p =>
                {
                    var contNew = new WindsorContainer();

                    //Pass resolving of the non-dependent services on to the main container.
                    // this way it will respect it's lifestyle rules and not create new 
                    // instances of services we wanted to use as a singleton etc.
                    contNew.Register(Component.For<IService1>().UsingFactoryMethod(() => Cont.Resolve<IService1>()).LifestyleTransient());
                    contNew.Register(Component.For<Class1>().UsingFactoryMethod(() => Cont.Resolve<Class1>()).LifestyleTransient());

                    //Register the dependent services directly in the new container so they can access the project
                    contNew.Register(Component.For<IService2>().ImplementedBy<Service2>().LifestyleTransient());
                    contNew.Register(Component.For<IService3>().ImplementedBy<Service3>().LifestyleTransient());
                    contNew.Register(Component.For<Class2>().LifestyleTransient());

                    contNew.Register(Component.For<IProject>().Instance(p));

                    return contNew;
                };

            RunTest3Times(s =>
            {
                var projCont = createContainer2(new Project(s));
                return projCont;
            });
        }
    }
} 
```

# symfony - Symfony2，学说多对一关系错误

> ID：16197372
> 
> 赞同：-2
> 
> 时间：2013-04-24T16:30:22.453
> 
> 标签：symfony, doctrine-orm

我正在尝试使用 Symfony2 和 Doctrine 构建在某些站点上执行的某些操作的日志。我有 2 个表站点和日志。Logs 表将包含一个 siteid，它是 sites 表的 id 列的外键。日志表可以有同一个站点的多个日志。

当我尝试在日志表中插入一个条目时，我得到 siteid is null 错误。

这是我的代码：

网站实体：

```
<?php

namespace A\SHB\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Sites
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="A\SHB\Entity\SitesRepository")
 */
class Sites
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var ArrayCollection $siteLog
     *
     * @ORM\OneToMany(targetEntity="Logs", mappedBy="log", cascade={"persist"})
     * @ORM\OrderBy({"siteid" = "ASC"})
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="log_id", referencedColumnName="siteid")
     * })
     */
    private $siteLog;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Constructor
     */
    public function __construct()
    {
        $this->siteLog = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Add siteLog
     *
     * @param \A\SHB\Entity\SiteLog $siteLog
     * @return Sites
     */
    public function addSiteLog(\A\SHB\Entity\SiteLog $siteLog)
    {
        $this->siteLog[] = $siteLog;

        return $this;
    }

    /**
     * Remove siteLog
     *
     * @param \A\SHB\Entity\SiteLog $siteLog
     */
    public function removeSiteLog(\A\SHB\Entity\SiteLog $siteLog)
    {
        $this->siteLog->removeElement($siteLog);
    }

    /**
     * Get siteLog
     *
     * @return \Doctrine\Common\Collections\Collection 
     */
    public function getSiteLog()
    {
        return $this->siteLog;
    }
} 
```

记录实体：

```
<?php

namespace A\SHB\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Logs
 *
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="A\SHB\Entity\LogsRepository")
 */
class Logs
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var integer
     *
     * @ORM\Column(name="siteid", type="integer")
     */
    private $siteid;

    /**
     * @var integer
     *
     * @ORM\Column(name="dateline", type="integer")
     */
    private $dateline;

    /**
     * @var Log
     *
     * @ORM\ManyToOne(targetEntity="Sites")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="site_id", referencedColumnName="id")
     * })
     */
    private $log;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set siteid
     *
     * @param integer $siteid
     * @return Logs
     */
    public function setSiteid($siteid)
    {
        $this->siteid = $siteid;

        return $this;
    }

    /**
     * Get siteid
     *
     * @return integer 
     */
    public function getSiteid()
    {
        return $this->siteid;
    }

    /**
     * Set dateline
     *
     * @param integer $dateline
     * @return Logs
     */
    public function setDateline($dateline)
    {
        $this->dateline = $dateline;

        return $this;
    }

    /**
     * Get dateline
     *
     * @return integer 
     */
    public function getDateline()
    {
        return $this->dateline;
    }

    /**
     * Set log
     *
     * @param \A\SHB\Entity\Log $log
     * @return Logs
     */
    public function setLog(\A\SHB\Entity\Log $log = null)
    {
        $this->log = $log;

        return $this;
    }

    /**
     * Get log
     *
     * @return \A\SHB\Entity\Log 
     */
    public function getLog()
    {
        return $this->log;
    }
} 
```

控制器 ：

```
public function indexAction()
{
    $sites = $this->getDoctrine()->getRepository('ASHB:Sites')->findAll();

    foreach ($sites as $site)
    {
        $host = $site->getForum();
        // Do something ....

        $log = new Logs();
        $log->setSiteid($site->getId());
        $log->setDateline($temp['dateline']);

        $em = $this->getDoctrine()->getManager();
        $em->persist($log);
        $em->flush();
    }
    return $this->render('ASHB:Default:index.html.twig', array('sites' => $output, 'counters' => $counters));
} 
```

现在，当我运行此代码时，出现以下错误：

```
SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'siteid' cannot be null" 
```

如果我 var_dump `$log`, before `$em->persist($log);`, siteid 就在那里。我不确定出了什么问题以及为什么将 siteid 设置为 null。

**更新 1：** 我尝试进行以下更改，但仍然出现相同的错误：

```
/**
 * @var Log
 *
 * @ORM\ManyToOne(targetEntity="Sites", inversedBy="siteLog")
 */
private $log; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:53:07.967

OneToMany 不需要 JoinColumn。所以它应该看起来像，根据[文档](http://symfony.com/doc/current/book/doctrine.html#entity-relationships-associations)。

```
class Sites
{
    /**
     * @ORM\OneToMany(targetEntity="Logs", mappedBy="log")
     */
    private $site_log;
}

class Logs
{
    /**
     * @ORM\ManyToOne(targetEntity="Sites", inversedBy="site_log")
     * @ORM\JoinColumn(name="site_id", referencedColumnName="id")
     */
    private $log;
} 
```

为了简单起见，orderBy 和 cascade 被忽略了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T22:01:32.197

你的结构有问题，

从日志实体中删除它

```
 /**
 * @var integer
 *
 * @ORM\Column(name="siteid", type="integer")
 */
private $siteid; 
```

然后更换这部分

```
 /**
 * @var Log
 *
 * @ORM\ManyToOne(targetEntity="Sites")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="site_id", referencedColumnName="id")
 * })
 */
private $log; 
```

和

```
 /**
 * @var Log
 *
 * @ORM\ManyToOne(targetEntity="Sites" inversedBy="logs")
 */
private $site; 
```

并在您的网站实体中将其替换为

```
 /**
 * @var ArrayCollection $siteLog
 *
 * @ORM\OneToMany(targetEntity="Logs", mappedBy="logs", cascade={"persist"})
 * @ORM\OrderBy({"siteid" = "ASC"})
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="log_id", referencedColumnName="siteid")
 * })
 */
private $logs; 
```

和

```
 /**
 * @var ArrayCollection $siteLog
 *
 * @ORM\OneToMany(targetEntity="Logs", mappedBy="site", cascade={"persist"})
 * @ORM\OrderBy({"siteid" = "ASC"})
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="log_id", referencedColumnName="id")
 * })
 */
private $logs; 
```

然后为这些新字段使用适当的 setter 和 getter 意味着将对象传递给 setter 函数，对于它们被映射的类（如果你不知道这部分写在评论中，我也会这样做）

# jquery - 如何使用 jQuery 制作流体宽度、流体高度、固定标题表？

> ID：16197374
> 
> 赞同：5
> 
> 时间：2013-04-24T16:30:31.257
> 
> 标签：jquery, html, css

我一直在为 HTML/CSS 流体宽度、流体高度、固定标题表工作，但没有成功。我希望你能指点我一个 JavaScript 或 jQuery 解决方案。

标准：

1.  表格必须填满浏览器窗口的整个宽度（至少是容器）
2.  表格必须填满浏览器窗口中可用容器的整个高度
3.  如果所有行都没有足够的空间，tbody 必须滚动 y
4.  thead th 和 tbody td 列必须对齐

纯 HTML/CSS 是失败的。jQuery 或 JavaScript 怎么样？

这是一个小提琴：http: [//jsfiddle.net/JXWfC/6/](http://jsfiddle.net/JXWfC/6/)

最终它将需要在 IE7+ 以及现代版本的 Chrome 和 FireFox 上运行。

这是我的基本页面的一些标记：

```
<div class="container">
    <div class="sidebar">
        nav here
    </div>
    <div class="content">
        <table>
            <thead>
                <tr><th>column 1</th><th>2</th><th>three</th><th>this is column four</th></tr>
            </thead>
            <tbody>
                <tr><td>data</td><td>can</td><td>have</td><td>different widths: not all the same</td></tr>
                <tr><td>table</td><td>-</td><td>should</td><td>fill 100% width and 100% height</td></tr>
                <tr><td>and</td><td>-</td><td>should</td><td>not require all td's to be same width</td></tr>
                <tr><td>but</td><td>-</td><td>percentage</td><td>% widths are just fine</td></tr>
                <tr><td>and</td><td>if</td><td>there's</td><td>too many rows, it should scroll y (overflow-y: scroll)</td></tr>
                <tr><td>sample</td><td>1</td><td>row</td><td>Lorem ipsum dolor sit amit.</td></tr>
                <tr><td>sample</td><td>1</td><td>row</td><td>Lorem ipsum dolor sit amit.</td></tr>
                <tr><td>sample</td><td>1</td><td>row</td><td>Lorem ipsum dolor sit amit.</td></tr>
                <tr><td>sample</td><td>1</td><td>row</td><td>Lorem ipsum dolor sit amit.</td></tr>
            </tbody>
        </table>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T21:05:09.497

这并不完整，除了 Chrome 之外还没有检查过任何东西，但希望它能让你走上正确的轨道。

基本上方法是使容器`position:relative;`和`th`标签全部`position:absolute;`。这需要相当多的额外代码才能正确定位，但这是使标题始终保持不变并且表格单元格滚动的一种不错的方法。

或者，您可以将标题设置为与表格分开的 div，但您仍然需要设置宽度以便列对齐。一匹马，真的。

[http://jsfiddle.net/daCrosby/JXWfC/9/](http://jsfiddle.net/daCrosby/JXWfC/9/)

```
<div id="hold">
    <div class="header">
        <h4>title goes here</h4>
    </div>
    <div class="container">
        <div class="sidebar">sidebar<br />nav<br />goes<br />here</div>
        <div class="content" >
            <table>
                <thead>
                    <tr>
                        <th class="col1">column 1</th>
                        <th class="col2">2</th>
                        <th class="col3">three</th>
                        <th class="col4">this is column four</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="col1">data</td>
                        <td class="col2">can</td>
                        <td class="col3">have</td>
                        <td class="col4">different widths: not all the same</td>
                    </tr>
                [ ... ] 
```

CSS

```
body{
    background:#000;
}
div {
    display:inline-block;
    vertical-align:top;
    -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box;
}
#hold{
    display:block;
    padding:40px 10px;
    width:95%;
    margin:auto;
}
.content table,
.header,
.container{
    width:100%;
    max-height:100%;
}
.header {
    background:darkgray;
    color:white;
    text-align:center;
}
.container {
    background:lightgray;
}
.sidebar {
    width:20%;
    background:green;
    color:white;
    float:left;
}
.content {
    width:80%;
    position:relative;
}
h4 {
    margin:0;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
    background:red;
    overflow-y:scroll;
    height:300px;
    display:block;
}
thead {
    position:absolute;
    top:1px;
    left:0px;
    right:0px;
}
tbody{
    padding:1.3em 0px 0px;
    margin:0px;
    display:block;
}
tr{
    width:100%;
    display:block;
    margin-top:-2px;
}
th {
    background:#666;
    color:#fff;
    position:absolute;
}
td {
    display:inline-block;
    margin:0px;
    padding:0px;
    background:#ddd;
}
td.col2,
td.col3,
td.col4{
    margin-left:-4px;
}
.col1 { width:20%; }
.col2 { width:10%; }
.col3 { width:20%; }
.col4 { width:50%; }
th.col1 { left:0px; right:80%; }
th.col2 { left:20%; right:70%; }
th.col3 { left:30%; right:50%; }
th.col4 { left:50%; right:0x; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:37:54.303

这是你想要的吗？ [工作示例](http://jsfiddle.net/JXWfC/1/)

```
<div class="container" style="overflow:scroll;">
    <div class="sidebar">nav here</div>
    <div class="content">
        <table>
            <thead>
                <tr>
                    <th width=25%>column 1</th>
                    <th width=25%>2</th>
                    <th width=25%>three</th>
                    <th width=25%>this is column four</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>data</td>
                    <td>can</td>
                    <td>have</td>
                    <td>different widths: not all the same</td>
                </tr>
                <tr>
                    <td>table</td>
                    <td>-</td>
                    <td>should</td>
                    <td>fill 100% width and 100% height</td>
                </tr>
                <tr>
                    <td>and</td>
                    <td>-</td>
                    <td>should</td>
                    <td>not require all td's to be same width</td>
                </tr>
                <tr>
                    <td>but</td>
                    <td>-</td>
                    <td>percentage</td>
                    <td>% widths are just fine</td>
                </tr>
                <tr>
                    <td>and</td>
                    <td>if</td>
                    <td>there's</td>
                    <td>too many rows, it should scroll y (overflow-y: scroll)</td>
                </tr>
                <tr>
                    <td>sample</td>
                    <td>1</td>
                    <td>row</td>
                    <td>Lorem ipsum dolor sit amit.</td>
                </tr>
                <tr>
                    <td>sample</td>
                    <td>1</td>
                    <td>row</td>
                    <td>Lorem ipsum dolor sit amit.</td>
                </tr>
                <tr>
                    <td>sample</td>
                    <td>1</td>
                    <td>row</td>
                    <td>Lorem ipsum dolor sit amit.</td>
                </tr>
                <tr>
                    <td>sample</td>
                    <td>1</td>
                    <td>row</td>
                    <td>Lorem ipsum dolor sit amit.</td>
                </tr>
            </tbody>
        </table>
    </div>
</div> 
```

# hdfs - HDFS 如何在 CopyFromLocal 中分发新的块或文件

> ID：16197378
> 
> 赞同：0
> 
> 时间：2013-04-24T16:30:38.070
> 
> 标签：hdfs

我已经使用 CopyFromLocal 将一个大文件上传到 HDFS，该文件被分成较小的块，分布在我的数据节点上。我对 HDFS 究竟如何选择放置这些块的位置感兴趣——它是否为每个块完全随机选择一个数据节点（不管数据节点已经持有多少块或其备用容量？）还是选择背后有一些方法? 这与上传许多（小）文件时的规则相同吗？

我知道有放置副本的规则，但目前我不是在查看复制文件放置的细节，而是原始文件本身的放置。

欢呼艾莉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T10:27:58.773

Rack Awareness 是一个概念，NameNode 知道哪个数据节点驻留在哪个 Rack 中，以及应该选择哪个数据节点。

# unix - 在 Unix 开发工具链中查找声明

> ID：16197382
> 
> 赞同：0
> 
> 时间：2013-04-24T16:30:48.973
> 
> 标签：unix, toolchain

我最近阅读了很多关于是否应该使用 IDE 或 unix 工具链来开发 c++ 程序的意见。我问自己的一件事是，您是否可以以某种方式在 gvim 或您喜欢的任何编辑器中遵循符号。这是我在 Visual Studio 或 Eclipse 中经常使用的一项功能。

或者换一种说法。假设您浏览了一些外国代码并且发现了一个未知的函数名称。您如何在不手动搜索所有包含的情况下找出它来自哪个库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:50:17.570

这里有两个流行的符号查找工具。

*   [ctags](http://ctags.sourceforge.net/)
*   [示波器](http://cscope.sourceforge.net/)

我相信 emacs 和 vim 都支持这两个工具。

# c# - 如何使超组框的文本居中？

> ID：16197383
> 
> 赞同：0
> 
> 时间：2013-04-24T16:30:50.287
> 
> 标签：c#, winforms, infragistics

我有一个包含[UltraGroupBox](http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.1/CLR2.0/html/Infragistics2.Win.Misc.v12.1~Infragistics.Win.Misc.UltraGroupBox.html)的 Windows 窗体。

如何使 UltraGroupBox 上的文本居中？

现在它看起来像这样：

![标题左对齐的表单图片](https://i.stack.imgur.com/0aTBF.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:41:54.487

' 将标题置于正在绘制的标题区域的中心。' 如果你想完全移动标题的位置，' 使用 CaptionAlignment 属性。Me.UltraGroupBox1.HeaderAppearance.TextHAlign = HAlign.Center

**编辑**

看来您可以使用该`CaptionAlignment`物业

[文档可以在这里找到](http://help.infragistics.com/Help/NetAdvantage/WinForms/2012.1/CLR2.0/html/Infragistics2.Win.Misc.v12.1~Infragistics.Win.Misc.UltraGroupBox~CaptionAlignment.html)

`this.ultraGroupBox1.CaptionAlignment = GroupBoxCaptionAlignment.Center;`

# c# - 修改[appname].exe.config

> ID：16197387
> 
> 赞同：0
> 
> 时间：2013-04-24T16:30:54.360
> 
> 标签：c#, configurationmanager

在广泛研究 ConfigurationManager 类之后，我决定为我的应用程序需要的单个（永远不会有多个选项 - 任务非常具体）用户定义参数创建/读取/写入我自己的文件。作为一名新的 C#/.NET 开发人员（来自 PHP），在寻求“做正确的事”时，我想正确使用 ConfigurationManager。它不会像我想象的那么难 - 当我说我花了几个小时试图通过 ConfigurationManager 处理设置时，我尽可能诚实，而这花了我编写附件代码大约需要 5 分钟。在我看来，这项任务是许多应用程序执行的任务，但我还没有找到一个简洁的例子。并不是说我没有找到**任何**示例（[在 MSDN 上](http://msdn.microsoft.com/en-us/library/ms134265.aspx)以及一些对 SO 上类似任务的引用），但在 MSDN 上，它确实似乎有很多代码可以满足我的要求。好歹.....

我的应用程序要求用户指定存储应用程序生成的文件的路径。我的实现想法只是让用户从工具条中选择“选项”设置，选择将存储文件的文件夹，然后将该路径保存到文件中（如果我使用的是 ConfigurationManager，则为 [appname.exe.config] ）。我选择了这种老派的方法：

```
 private void preferencesToolStripMenuItem_Click(object sender, EventArgs e)
    {
        DialogResult result = saveFileLocation.ShowDialog(); 

        string selectedPath = saveFileLocation.SelectedPath;  

        System.IO.StreamWriter file = new System.IO.StreamWriter("config.ini");
        file.WriteLine(selectedPath);
        file.Close();

     } 
```

尽管我将为异常添加 try/catch 逻辑，但是否有任何令人信服的理由不以这种方式处理我的需求？当用户处理他们转换大量文件的请求时，我需要读取这个文件。

我知道 MSDN 示例旨在展示课程的灵活性，但是哇，这对我来说确实有点矫枉过正。我不想被认为是需要复制/粘贴示例才能完成任务的人，但这似乎是一项常见的任务，再次，我会找到更简单的示例来说明如何通过 ConfigurationManager 实现我的需求.

提前感谢您的意见。

# c++ - realloc() 问题，未分配

> ID：16197394
> 
> 赞同：1
> 
> 时间：2013-04-24T16:31:13.320
> 
> 标签：c++, c, linux, unix

我正在尝试读取一个字符串

```
char *string=malloc(sizeof(char));
char *start_string=string; //pointer to string start
while ((readch=read(file, buffer, 4000))!=0){ // read
    filelen=filelen+readch; //string length
    for (d=0;d<readch;d++)
        *start_string++=buffer[d]; //append buffer to str
    realloc(string, filelen); //realloc with new length 
```

有时这会崩溃并出现以下错误：

```
 malloc: *** error for object 0x1001000e0: pointer being realloc'd was not allocated 
```

但有时不是，我不知道如何解决它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T16:32:56.387

[`realloc()`](http://en.cppreference.com/w/c/memory/realloc)不更新传递给它的指针。如果`realloc()`成功则传入的指针为`free()`d，并返回分配的内存地址。在发布的代码`realloc()`中会尝试`free(string)`多次，这是未定义的行为。

存储结果`realloc()`：

```
char* t = realloc(string, filelen);
if (t)
{
    string = t;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:34:08.280

调用时字符串的地址可能会改变`realloc()`。

```
char *string=malloc(sizeof(char));
char *start_string=string; //pointer to string start
while ((readch=read(file, buffer, 4000))!=0){ // read
    filelen=filelen+readch; //string length
    for (d=0;d<readch;d++)
        *start_string++=buffer[d]; //append buffer to str
    char* tempPtr = realloc(string, filelen); //realloc with new length

    if( tempPtr ) string = tempPtr;
    else printf( "out of memory" );
} 
```

# grep - grep 正则表达式，替换文本文件中的特定查找

> ID：16197406
> 
> 赞同：2
> 
> 时间：2013-04-24T16:31:35.337
> 
> 标签：grep

我正在尝试自动替换文件中的一些版权字符串。字符串是以下格式

```
"Copyright (C) 2004-2008 by" 
```

但年份可能不同。我尝试在所有文件中找到这一行，并将去年替换为 current.

```
grep -r ' * Copyright (C) [0-9]\{4\}-[0-9]\{4\} by.' * 
```

现在如何用 2013 替换找到的最后一个组？（想从管道中使用）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T16:38:03.987

`grep`不做替换。你可以试试`sed`，例如：

```
sed 's/Copyright (C) \([0-9]\{4\}\)-[0-9]\{4\} by/Copyright (C) \1-2013 by/' 
```

或如肯特所说：

```
sed 's/\(Copyright (C) [0-9]\{4\}\)-[0-9]\{4\} by/\1-2013 by/' 
```

或`ssed`：

```
ssed -R 's/(?<=Copyright \(C\) )([0-9]{4})-[0-9]{4}(?= by)/\1-2013/' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T17:25:13.423

这就是我想出来回答你的问题：

```
sed -i 's/Copyright (C) \([0-9]\{4\}\)-[0-9]\{4\} by/Copyright (C) \1-2013 by/' `find -type f` 
```

我正在使用@Lev 提出的 sed 查询，但直接对文件进行操作。我包括了 -i 以保存对文件的更改。我还在命令行末尾添加了一个“查找”，以便 sed 递归查找文件。

请注意所使用的不同类型的报价。前两个是单引号，但后两个是反引号，用于使 shell 运行“find”命令并将其结果作为“sed”的参数。

# vim - 如何在 VIM 中重新映射数字键和数字键特殊字符

> ID：16197414
> 
> 赞同：0
> 
> 时间：2013-04-24T16:31:53.340
> 
> 标签：vim, remap

我正在尝试重新映射 VIM 中的 * 运算符。我已经尝试过`nnoremap <*>`，`nnoremap <S-8>`但无济于事。我无法找到有关如何正确执行此操作的任何说明。如何重新映射我的 * 或任何数字键/数字键特殊字符？

因为你们中的许多人无疑会想知道为什么有人会想要这样做，所以我可以让我的 * 运算符表现得像平常一样，除了不会自动前进到光标下的单词的下一个出现处（参见在[不移动的情况下突出匹配](http://vim.wikia.com/wiki/Highlight_all_search_pattern_matches)部分） .

编辑：

我正在使用的完整命令是：

`nnoremap <*> :let @/='\<<C-R>=expand("<cword>")<CR>\>'<CR>:set hls<CR>`

在哪里`*`重新映射`*`或的功能`<shift + 8>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:24:30.587

摆脱`<`和`>`为我工作。

```
nnoremap * :let @/='\<<C-R>=expand("<cword>")<CR>\>'<CR>:set hls<CR> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T16:43:18.343

试试`nnoremap <F7> <*>`。它将用 F7 重新映射 *

# asp.net - ajax:CascadingDropDown 将 selectedIndex 设置为 0

> ID：16197417
> 
> 赞同：0
> 
> 时间：2013-04-24T16:32:09.483
> 
> 标签：asp.net, ajax

我有两个**ajax：CascadingDropDown**，一个是***州***，一个是***县***。就像用户更改***状态***一样，***该县***将重新填充新数据。但是，问题是，一旦***县***有新数据，选择的指标还是一样的。***当用户更改状态***时，如何将选定的索引设置为 0 ？谢谢！

```
<asp:DropDownList ID="Location_State" runat="server">
</asp:DropDownList>

<ajax:CascadingDropDown ID="StateCascading" runat="server" Category="State" 
                        TargetControlID="Location_State" 
                        ServiceMethod="BindStateDropdown" 
                        ServicePath="CountyService.asmx">
</ajax:CascadingDropDown>

<asp:DropDownList ID="Location_County" runat="server">
</asp:DropDownList>

<ajax:CascadingDropDown ID="CountyCascading" runat="server" Category="County" 
                        TargetControlID="Location_County"
                        ParentControlID="Location_State"
                        ServiceMethod="BindCountyDropdown" 
                        ServicePath="CountyService.asmx">
</ajax:CascadingDropDown> 
```

这是填充县列表的功能

```
[WebMethod]
public CascadingDropDownNameValue[] BindCountyDropdown(string knownCategoryValues, string category)
{
    StringDictionary statedetails = CascadingDropDown.ParseKnownCategoryValuesString(knownCategoryValues);
    List<CascadingDropDownNameValue> countydetails = new List<CascadingDropDownNameValue>();
    string tableName = "county";
    string sqlSQL = "";
    string sqlConnStr = ConfigurationManager.ConnectionStrings["ConnectionString"].ToString();
    SqlConnection sqlConn = new SqlConnection(sqlConnStr);
    sqlConn.Open();
    sqlSQL = "SELECT [NAME], [CNTY_FIPS] FROM " + tableName + " [county] WHERE (\[STATE_FIPS] = @STATE_FIPS order by name";
    SqlCommand cmdSql = new SqlCommand(sqlSQL, sqlConn);
    ((SqlParameter)cmdSql.Parameters.Add("@STATE_FIPS", SqlDbType.VarChar)).Value = statedetails["State"];
    SqlDataReader rdr = cmdSql.ExecuteReader();
    while (rdr.Read())
    {
        countydetails.Add(new CascadingDropDownNameValue(rdr["NAME"].ToString(), rdr["CNTY_FIPS"].ToString()));
    }
    rdr.Close();
    sqlConn.Close();
    return countydetails.ToArray();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:19:21.940

我自己找到了解决方案。一个简单但有效的解决方案。只需0.1秒后将ddl的index改为0即可，只要ajax请求快于0.1秒即可！

```
$(function () {
        $("#MainContent_Location_State").change(function () {
            setTimeout(function () { document.getElementById('MainContent_Location_County').selectedIndex = 0; }, 100);
        });
}); 
```

# sql - SQL剥离字体格式（颜色或其他）

> ID：16197420
> 
> 赞同：0
> 
> 时间：2013-04-24T16:32:20.683
> 
> 标签：sql, sql-server, tsql

我在删除笔记表中的格式时遇到问题
这是一个示例：

```
";\red31\green73\blue125;
\viewkind4\uc1\ltrpar\f0\fs20 USEFUL TEXT BODY \cf1\f3 
\ltrpar\f0\fs17 
" 
```

如何摆脱那些东西？我要谨慎行事，不要在'\'之后替换任何东西

非常感谢，瑞克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:43:13.787

不替换 '\' 会让你自己变得很困难。如果您查看[http://other9.tripod.com/Refs/easy-rtf.html](http://other9.tripod.com/Refs/easy-rtf.html)，您会看到有不同的 RTF 代码，并且代码没有默认大小。

此外，它不像 HTML 那样必须有一个必要的“关闭”标签，这使得它更加困难。

我唯一能想到的就是记录所有可能的 RTF 代码（或使用 RTF 解析器库），因此能够识别 \ 是否是 RTF 代码。

# c# - 使用 T4/EnvDTE 获取所有使用特定属性修饰的方法

> ID：16197422
> 
> 赞同：11
> 
> 时间：2013-04-24T16:32:27.320
> 
> 标签：c#, t4, envdte

我想获取我的项目中`MyAttribute`使用 T4/EnvDTE 装饰的所有公共方法的列表。

我知道这可以通过反射来完成，但我不想加载程序集并在 T4 模板中对其进行反射，而是想使用现有的代码文件作为源代码。

以下是我在互联网上找到的样板代码，它引用了当前项目

```
<#@ template debug="true" hostspecific="true" language="C#" #>
<#@ assembly name="EnvDTE" #>
<#@ assembly name="System.Core.dll" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="System.IO" #>
<#@ output extension=".cs" #>

<#
    IServiceProvider _ServiceProvider = (IServiceProvider)Host;
    if (_ServiceProvider == null)
        throw new Exception("Host property returned unexpected value (null)");

    EnvDTE.DTE dte = (EnvDTE.DTE)_ServiceProvider.GetService(typeof(EnvDTE.DTE));
    if (dte == null)
        throw new Exception("Unable to retrieve EnvDTE.DTE");

    Array activeSolutionProjects = (Array)dte.ActiveSolutionProjects;
    if (activeSolutionProjects == null)
        throw new Exception("DTE.ActiveSolutionProjects returned null");

    EnvDTE.Project dteProject = (EnvDTE.Project)activeSolutionProjects.GetValue(0);
    if (dteProject == null)
        throw new Exception("DTE.ActiveSolutionProjects[0] returned null");

#> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T07:35:17.983

我想确认您计划使用 EnvDTE 来获取有关您项目的类和方法的设计时信息。在我看来，这比冒险反映同一项目的过时装配更可靠。

由于您已经获得了解决方案的当前项目，您现在应该使用[Visual Studio CodeModel](http://msdn.microsoft.com/en-US/library/envdte.project.codemodel%28v=vs.110%29.aspx)来迭代您的类及其方法等。我知道这可能很烦人，但我找到了一个免费的可重用 .ttinclude 模板，它为您提供了方法缓动对 CodeModel 的访问。您可能想查看[有形的 T4 编辑器](http://t4-editor.tangible-engineering.com/T4-Editor-Visual-T4-Editing.html)。它是免费的，并附带一个免费的模板库，其中包含一个名为“有形的 Visual Studio 自动化助手”的模板库。使用此模板，您生成的代码可能如下所示：

```
<#
// get a reference to the project of this t4 template
var project = VisualStudioHelper.CurrentProject;

// get all class items from the code model
var allClasses = VisualStudioHelper.GetAllCodeElementsOfType(project.CodeModel.CodeElements, EnvDTE.vsCMElement.vsCMElementClass, false);

// iterate all classes
foreach(EnvDTE.CodeClass codeClass in allClasses)
{
    // get all methods implemented by this class
    var allFunctions = VisualStudioHelper.GetAllCodeElementsOfType(codeClass.Members, EnvDTE.vsCMElement.vsCMElementFunction, false);
    foreach(EnvDTE.CodeFunction function in allFunctions)
    {
        // get all attributes this method is decorated with
        var allAttributes = VisualStudioHelper.GetAllCodeElementsOfType(function.Attributes, vsCMElement.vsCMElementAttribute, false);
        // check if the System.ObsoleteAttribute is present
        if (allAttributes.OfType<EnvDTE.CodeAttribute>()
                         .Any(att => att.FullName == "System.ObsoleteAttribute"))
        {
        #><#= function.FullName #>
<#          
        }
    }
}
#> 
```

# c# - 使用 C# 获取 XML 子节点

> ID：16197434
> 
> 赞同：3
> 
> 时间：2013-04-24T16:33:02.260
> 
> 标签：c#, xml, xmldocument

这是我第一次尝试使用 C# 解析 XML，感觉就像我现在在兜圈子。我正在调用 WCF Web 服务，该服务根据用户输入通过数据库对公司名称进行搜索。它以 XML 文档的形式返回结果，每个条目的格式如下所示。

鉴于这种 XML 结构，我将如何使用 获取 `d:AccountId`和`d:Name`节点的值`C#`？

```
<entry>
    <id></id>
    <title type=\"text\"></title>
    <updated></updated>
    <author><name /></author>
    <link rel=\"edit\" title=\"Account\" href=\"AccountSet\" />
    <category term=\"Microsoft.Crm.Sdk.Data.Services.Account\" scheme=\"http://schemas.microsoft.com/ado/2007/08/dataservices/scheme\" />
    <content type=\"application/xml\">
    <m:properties>
        <d:neu_UniqueId></d:neu_UniqueId>
        <d:AccountId m:type=\"Edm.Guid\"></d:AccountId>
        <d:Name></d:Name>
    </m:properties></content>
</entry> 
```

这是我的第一次尝试。`node3`程序在变量处引发了异常。

```
 try
        {
            WebRequest myWebRequest = WebRequest.Create(URL);
            myWebRequest.PreAuthenticate = true;
            myWebRequest.Credentials = System.Net.CredentialCache.DefaultCredentials;

            //myWebRequest.Headers.Add("Access-Control-Allow-Origin", url);

            WebResponse myWebResponse = myWebRequest.GetResponse();
            Stream myFileStreamResult = myWebResponse.GetResponseStream();
            Encoding encoder = System.Text.Encoding.GetEncoding("utf-8");
            StreamReader readStream = new StreamReader(myFileStreamResult, encoder);

            results = readStream.ReadToEnd();

            XmlDocument xmlDoc = new XmlDocument();
            xmlDoc.LoadXml(results);
            XmlNodeList parentNode = xmlDoc.GetElementsByTagName("entry");

            foreach (XmlNode childNode in parentNode)
            {

                string node = childNode.ToString();
                string node2 = childNode.Value;
                string node3 = childNode.Attributes["title"].Value;
                string node7 = childNode.Attributes["m:properties"].Value;
                string node8 = childNode.Attributes["m:properties\\d:AccountId"].Value;
                string node9 = childNode.Attributes["m:properties\\d:Name"].Value;
                string node10 = childNode.Attributes["m:properties\\d:AccountId"].Value;
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:46:38.317

假设 API 可靠地返回 XML 结构，您可以简单地指定节点的路径，`"/entry/m:properties"`然后调用 get children。之后，您需要遍历这些节点，检查您想要的节点。

当前，您的 foreach 循环正在尝试在`<id></id>`节点上执行所有导致异常的操作，因为没有“title”属性。

所以给出一些示例代码，你正在寻找这样的东西；

```
XmlNode props = root.SelectSingleNode("/entry/m:properties");
for (int i = 0; i < props.ChildNodes.Count; i++)
{
    if (propes.ChildNodes[i].Name = "node I want")
    {
         //do something
    }
} 
```

或者，如果您只需要这两个值，则只需使用`SelectSingleNode`该节点的完整路径。从您的问题来看，听起来没有理由使用迭代。所以你可以简单地做；

```
 string accountName = root.SelectSingleNode("/entry/m:properties/d:Name").InnerXml; 
```

获取帐户名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T17:00:44.420

使用 Linq2Xml 可能会更容易一些。

```
var xml = "<entry xmlns:m=\"ns1\" xmlns:n=\"ns2\" xmlns:d=\"ns3\">" +
 "<id></id>" +
 "<title type=\"text\"></title>" +
 "<updated></updated>" +
 "<author><name /></author>" +
 "<link rel=\"edit\" title=\"Account\" href=\"AccountSet\" />" +
 "<category term=\"Microsoft.Crm.Sdk.Data.Services.Account\" scheme=\"http://schemas.microsoft.com/ado/2007/08/dataservices/scheme\" />" +
 "<content type=\"application/xml\">" +
 "<m:properties>" +
     "<d:neu_UniqueId></d:neu_UniqueId>" +
     "<d:AccountId m:type=\"Edm.Guid\">Account ID</d:AccountId>" +
     "<d:Name>Account Name</d:Name>" +
 "</m:properties></content>" +
"</entry>";

        const string namespaceM = "ns1";
        const string namespaceD = "ns3";

        using (var stream = new MemoryStream(Encoding.UTF8.GetBytes(xml)))
        {
            using (var reader = XmlReader.Create(stream))
            {
                var document = XDocument.Load(reader, LoadOptions.None);
                var contentNode = document.Elements().First().Elements().First(e => e.Name.LocalName == "content");
                var propertiesNode = contentNode.Elements().First(d => d.Name.LocalName == "properties" && d.Name.Namespace == namespaceM);
                var accountIdNode = propertiesNode.Elements().First(d => d.Name.LocalName == "AccountId" && d.Name.Namespace == namespaceD);
                var nameNode = propertiesNode.Elements().First(d => d.Name.LocalName == "Name" && d.Name.Namespace == namespaceD);
                var accountIdText = accountIdNode.Value;
                var nameText = nameNode.Value;
            }
        } 
```

# azure - 如何向用户报告 Azure 启动失败

> ID：16197435
> 
> 赞同：0
> 
> 时间：2013-04-24T16:33:02.480
> 
> 标签：azure, visual-studio-2012

我的公司生产了一个工具，用户在发布他们的项目之前安装在服务器上。对于 Azure 部署，我们有一个启动脚本（一个简单的 .cmd 文件）来安装我们的工具。它具有重复运行的推荐检查，并记录所有内容。问题是如果没有 RDPing 到角色实例并检查日志，用户无法判断是否存在安装问题。

我的问题是：如果安装我们的工具失败，有没有办法将它报告回 Visual Studio？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:45:25.493

我不相信有。如果我没记错的话，启动任务是作为角色启动过程的一部分触发的（取决于启动任务类型 - 简单、后台等）。该脚本与其他东西一起运行，例如配置远程桌面的插件（我相信该插件是一种特殊打包的启动脚本类型）。我认为无论如何都不会报告（向任何启动部署操作的人）哪些启动任务失败了。

# php - Php Js Ajax 我需要一些帮助

> ID：16197440
> 
> 赞同：0
> 
> 时间：2013-04-24T16:33:20.810
> 
> 标签：php, javascript, jquery, ajax

我正在尝试创建一个社交约会网站，但我在“添加为好友”按钮中遇到了问题。当您单击它时，我的站点应该将发送者的 uid (from_uid) 和接收者的 uid (to_uid) 发送到数据库。它成功发送了 from_uid，但 to_uid 始终发送 0。

PHP

```
<div class="member" data-user="<?php echo $member['xmpp_user']; ?>" data-uid="<?php echo $member['uid']; ?>">
  <input type="hidden" id="hiddenuid" value="<?php echo $member['uid']; ?>">
  <img src="https://s3.amazonaws.com/wheewhew/user/<?php echo $member['uid']; ?>/photos/<?php echo $member['profile_pic']; ?>" />
  <div class="member_name"><?php echo $member['firstname']." ".$member['lastname']; ?></div>
  <div id="addbutton"><button type="submit" class="add"> Add as Buddy </button></div>
</div> 
```

Javascript

```
<script type="text/javascript">
   var BOSH_SERVICE = 'http://wheewhew.com:5280/http-bind';
   var connection   = null;
   var xmpp_user    = "<?php echo $xmpp_user; ?>@wheewhew.com/default";
   var xmpp_pass    = "<?php echo $xmpp_password; ?>";
   var uid          = "<?php echo $uid; ?>";

   $(document).ready(function () {              
     $('#btn-logout').click(logout);
     $('.add').click(addBuddy);
     connectXMPP();
     //updateLastSeen();
   });

</script> 
```

jabber.js

```
function addBuddy(){
  var xmpp_user = $(this).parent().attr('data-user')+'@wheewhew.com/default';
  var to_uid = $(this).parent().attr('data-uid');

  $.ajax({
    type: "POST",
    url: "./ajax/addBuddy",
    data: "from_uid="+uid+"&to_uid="+to_uid,

    success: function(data) {
      var ret = eval('('+data+')');
      if(ret.status == 'success'){
        connection.send($pres({to:xmpp_user,type:'subscribe'}).tree());
      }
    }

  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:24:46.273

您的`addBuddy`功能没有参考`$(this)`。试试这个：

```
$('.add').click(function(){
     addBuddy($(this));
}); 
```

然后在你的函数中：

```
function addBuddy($btn){
    var xmpp_user = $btn.parent().attr('data-user')+'@wheewhew.com/default';
    var to_uid = $btn.parent().attr('data-uid');

    // ajaxy stuff
} 
```

那应该有帮助。至少，我们可以在这里继续讨论，而不是在 OP 的评论中。

# java - Android 使用无线电组更改动态视图

> ID：16197441
> 
> 赞同：1
> 
> 时间：2013-04-24T16:33:26.340
> 
> 标签：java, android, listeners

如何根据选择的单选按钮动态更新布局？目前我在 oncreate 中有我的所有代码，它似乎只检查一次以查看选择了哪个单选按钮，但我怎样才能让它在每次更改时更新？

这是我的代码

```
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  LinearLayout mainLinear = new LinearLayout(this);
  mainLinear.setOrientation(LinearLayout.VERTICAL);
  LinearLayout ButtonLayout = new LinearLayout(this);
  ButtonLayout.setOrientation(LinearLayout.HORIZONTAL);
  ButtonLayout.setPadding(120, 15, 0, 0);
  mainLinear.addView(ButtonLayout);
  Button deleteSelectedButton = new Button(this);
  deleteSelectedButton.setText("Delete Selected");
  Button backButton = new Button(this);
  backButton.setText("Back");
  ButtonLayout.addView(deleteSelectedButton);
  ButtonLayout.addView(backButton);
  LinearLayout deleteAppointmentLayout = new LinearLayout(this);
  deleteAppointmentLayout.setOrientation(LinearLayout.VERTICAL);
  mainLinear.addView(deleteAppointmentLayout);
  TextView dayLabel = new TextView(this);
  dayLabel.setText("Days");
  dayLabel.setPadding(220, 10, 0, 0);
  dayLabel.setTypeface(Typeface.DEFAULT_BOLD);
  dayLabel.setTextSize(15);
  deleteAppointmentLayout.addView(dayLabel);
  RadioGroup radioGroup = new RadioGroup(this);
  radioGroup.setOrientation(LinearLayout.HORIZONTAL);
  radioGroup.setPadding(10, 0, 0, 0);
  deleteAppointmentLayout.addView(radioGroup);
  RadioButton mondayRadioButton = new RadioButton(this);
  RadioButton tuesdayRadioButton = new RadioButton(this);
  RadioButton wednesdayRadioButton = new RadioButton(this);
  RadioButton thursdayRadioButton = new RadioButton(this);
  RadioButton fridayRadioButton = new RadioButton(this);
  mondayRadioButton.setText("Mon");
  tuesdayRadioButton.setText("Tue");
  wednesdayRadioButton.setText("Wed");
  thursdayRadioButton.setText("Thu");
  fridayRadioButton.setText("Fri");
  mondayRadioButton.setTextSize(12);
  tuesdayRadioButton.setTextSize(12);
  wednesdayRadioButton.setTextSize(12);
  thursdayRadioButton.setTextSize(12);
  fridayRadioButton.setTextSize(12);
  mondayRadioButton.setChecked(true);
  mondayRadioButton.setId(1);
  tuesdayRadioButton.setId(2);
  wednesdayRadioButton.setId(3);
  thursdayRadioButton.setId(4);
  fridayRadioButton.setId(5);
  //OnClickListener radlistener;
  //radioGroup.setOnClickListener(radlistener);
  radioGroup.addView(mondayRadioButton);
  radioGroup.addView(tuesdayRadioButton);
  radioGroup.addView(wednesdayRadioButton);
  radioGroup.addView(thursdayRadioButton);
  radioGroup.addView(fridayRadioButton);
  CheckBox checkBox = new CheckBox(this);
  ScrollView scrollView = new ScrollView(this);
  mainLinear.addView(scrollView);
  LinearLayout deleteAppointmentsLayout = new LinearLayout(this);
  deleteAppointmentsLayout.setOrientation(LinearLayout.VERTICAL);
  scrollView.addView(deleteAppointmentsLayout);
  APData = new AppointmentDataSource(this);
  APData.open();
  //printf("Go to here");
  List < Appointment > appointments = APData.retrieveAllAppointments();
  APData.close();
  String time, duration, description, boxText;
  long id;
  int loop = 0;
  if (mondayRadioButton.isChecked()) {
    deleteAppointmentsLayout.removeAllViews();
    for (Iterator < Appointment > i = appointments.iterator(); i.hasNext();) {
      Appointment item = i.next();
      if (item.getDay() == 1) {
        System.out.println("fucken did work");
        id = item.getId();
        time = item.getTime();
        duration = item.getDuration();
        description = item.getDescription();
        boxText = time + ", " + duration + ", " + description;
        checkBox.setText(boxText);
        checkBox.setId((int) id);
        deleteAppointmentsLayout.addView(checkBox);
      } else {
        System.out.println("fucken didnt work");
      }
    }
  }
  if (tuesdayRadioButton.isChecked()) {
    deleteAppointmentsLayout.removeAllViews();
    for (Iterator < Appointment > i = appointments.iterator(); i.hasNext();) {
      Appointment item = i.next();
      if (item.getDay() == 2) {
        id = item.getId();
        time = item.getTime();
        duration = item.getDuration();
        description = item.getDescription();
        boxText = time + ", " + duration + ", " + description;
        checkBox.setText(boxText);
        checkBox.setId((int) id);
        deleteAppointmentsLayout.addView(checkBox);
      } else {}
    }
  }
  if (wednesdayRadioButton.isChecked()) {
    deleteAppointmentsLayout.removeAllViews();
    for (Iterator < Appointment > i = appointments.iterator(); i.hasNext();) {
      Appointment item = i.next();
      if (item.getDay() == 3) {
        id = item.getId();
        time = item.getTime();
        duration = item.getDuration();
        description = item.getDescription();
        boxText = time + ", " + duration + ", " + description;
        checkBox.setText(boxText);
        checkBox.setId((int) id);
        deleteAppointmentsLayout.addView(checkBox);
      } else {}
    }
  }
  if (thursdayRadioButton.isChecked()) {
    deleteAppointmentsLayout.removeAllViews();
    for (Iterator < Appointment > i = appointments.iterator(); i.hasNext();) {
      Appointment item = i.next();
      if (item.getDay() == 4) {
        id = item.getId();
        time = item.getTime();
        duration = item.getDuration();
        description = item.getDescription();
        boxText = time + ", " + duration + ", " + description;
        checkBox.setText(boxText);
        checkBox.setId((int) id);
        deleteAppointmentsLayout.addView(checkBox);
      } else {}
    }
  }
  if (fridayRadioButton.isChecked()) {
    deleteAppointmentsLayout.removeAllViews();
    for (Iterator < Appointment > i = appointments.iterator(); i.hasNext();) {
      Appointment item = i.next();
      if (item.getDay() == 5) {
        id = item.getId();
        time = item.getTime();
        duration = item.getDuration();
        description = item.getDescription();
        boxText = time + ", " + duration + ", " + description;
        checkBox.setText(boxText);
        checkBox.setId((int) id);
        deleteAppointmentsLayout.addView(checkBox);
      } else {}
    }
  }
  this.setContentView(mainLinear);
  deleteSelectedButton.setOnClickListener(new View.OnClickListener() {@
    Override
    public void onClick(View view) {}
  });
  backButton.setOnClickListener(new View.OnClickListener() {@
    Override
    public void onClick(View view) {
      finish();
    }
  });
} 
```

更新的代码（希望我将所有变量更改为 FINAL 并导致持续时间描述和 boxtext 错误，“无法分配最终的局部变量描述，因为它是在封闭类型中定义的”< - 只有当我制作复选框时才会这样做决赛）

```
mondayRadioButton.setOnClickListener(new View.OnClickListener() {

          @Override
          public void onClick(View view) {

              if(mondayRadioButton.isChecked()){
                deleteAppointmentsLayout.removeAllViews();
            for(Iterator<Appointment> i = appointments.iterator(); i.hasNext();){ 
                 Appointment item = i.next();
                    if(item.getDay() == 1){
                        System.out.println("fucken did work");
                        id = item.getId();
                        time = item.getTime();
                        duration = item.getDuration();
                        description = item.getDescription();
                        boxText = time + ", " + duration + ", " + description;
                        checkBox.setText(boxText);
                        checkBox.setId((int) id);
                        deleteAppointmentsLayout.addView(checkBox);

                    }
                    else {
                        System.out.println("fucken didnt work");
                    }
            }
            }
          }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:41:48.707

上面的代码你已经在Oncreate里写好了，第一次进入屏幕会起作用，以后就不行了，所以你需要在事件触发的时候执行上面的代码所以

对于单个单选按钮集`onClickLister`

```
 radiobutton.setOnClickListener(new View.OnClickListener() {

          @Override
          public void onClick(View view) {

                   //your code here
          }

        }); 
```

`setOnCheckedChangeListener`对于这样的群体

```
grp.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(RadioGroup arg0, int arg1) {
                  //your code here

            }
        }); 
```

在上述侦听器中发布代码

您还可以在单​​选按钮上使用 onCheckChangeListener

```
radiobtn.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                // your code here

            }
        }); 
```

**编辑：**

```
public class MainActivity extends Activity {

    EditText message, password, username;  // these are called fields
    Context context;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

//instantiate like this
        username = new EditText(this);
        password = (EditText) findViewById(R.id.editText2);
        message = (EditText) findViewById(R.id.editText3);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:41:51.267

您可以尝试在 RadioGroup 上实现“onCheckedChanged()”，然后更新布局中的信息，甚至根据选中的无线电扩展不同的布局。

# iphone - iPhone图像href链接不起作用

> ID：16197442
> 
> 赞同：0
> 
> 时间：2013-04-24T16:33:35.407
> 
> 标签：iphone, hyperlink, safari, href

我的网站上的链接不能仅在 iPhone 上运行时遇到问题。它们可以在其他任何地方工作，包括 iPad。

我被困住了。该页面在 W3c 上验证，看起来很简单的 html。有谁能够帮我。该页面的链接如下。

[网站链接](http://www.crosssection-online.com/2013/review.html)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:21:10.093

感谢您的帮助普拉蒂克。我找到了解决方案。虽然不是一个简单的

我正在使用基础移动框架，所以我改变了一个值

.columns:after { clear: both; }

至

.columns:after { 明确：对；}

在foundation.css 样式表中，我还为div 类问题设置了一个较小的宽度并且它起作用了。

# ruby-on-rails - Rails：命名空间以意想不到的方式应用于关联

> ID：16197443
> 
> 赞同：0
> 
> 时间：2013-04-24T16:33:39.733
> 
> 标签：ruby-on-rails, activerecord, namespaces, associations

我有一个与另一个命名空间模型`Collection::Publication`有`has_many`关系的命名空间模型`Library::Publication`。关联声明如下所示：

```
has_many :library_publications, :dependent => :destroy, :class_name => "Library::Publication" 
```

然而，当我尝试这样的事情时：

```
@collection_publication.library_publications 
```

我收到此错误：

```
NameError at /
uninitialized constant Collection::Publication::Library::Publication 
```

似乎 Rails 正在命名关联模型，即使我明确定义了`class_name`. 我是否正确理解这一点？如果是这样，我能做些什么来纠正这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:55:46.277

这是由于`Library::Publication`声明中的拼写错误：

```
class Libary::Publication
  ...
end 
```

尽管错误消息声明它没有找到`Collection::Publication::Library::Publication`，但这一定是它最后看到的地方。一旦`Library::Publication`正确定义，Rails 发现它没有问题。

# javascript - 如果 ajax 完成，转到下一次迭代 $.each？

> ID：16197449
> 
> 赞同：-3
> 
> 时间：2013-04-24T16:33:56.493
> 
> 标签：javascript, ajax, jquery, each

看下面的代码，它似乎执行了很多`$.post`而不等待`data == "1"`

如果等于 ，它应该进行下一次迭代 ( `$.each`) 。`data``1`

怎么做到呢？

```
$.each(data, function(index) {
  $.post("tracking.php",  { action: "send", id: getId }, function(data) {
    if (data == "1") {
      //
    }
  },'json');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:41:56.017

由于`$.post`是异步的，你不能用它来控制循环。您可以使用如下结构：

```
var data = [1, 2, 3];

function iterator(arr) {
    function iterate(i) {
        // Use `arr[i]`
        $.post("tracking.php",  { action: "send", id: getId }, function(data) {
            if (data == "1") {
                iterate(++i);
            }
        }, "json");
    }
    iterate(0);
}

iterator(data); 
```

**演示：http:** [//jsfiddle.net/Ezwj4/](http://jsfiddle.net/Ezwj4/)

当然，在演示中，我不得不修改代码/参数以使其与 jsFiddle 一起使用。注意它在没有响应后是如何停止的`"1"`（这只是数组中的值，因为我只需要回显该值以显示它是如何工作的）。您可以查看浏览器的控制台以了解发生了什么。

**更新：**

为确保不超出数组的边界，您需要检查其长度。这是一个更新：

```
function iterator(arr) {
    // You can use `arr` anywhere inside of `iterator`
    function iterate(i) {
        // You can use `i` anywhere inside of `iterate`
        if (i < arr.length) {
            $.post("tracking.php",  { action: "send", id: getId }, function(data) {
                if (data == "1") {
                    iterate(++i);
                }
            }, "json");
        }
    }
    iterate(0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:41:10.250

`post`您可以使用数组的第一个索引调用第一个请求，`data`然后等待`response(data)`返回，然后`post`在下一个索引上触发另一个请求，依此类推：

```
function posts(index) {
  $.post("tracking.php",  { action: "send", id: getId }, function(response) {
    if (response == "1") {
       index++;
       if (index < data.length) post(index); //call the function "post" again only if index is lower than the array "data" length.
       }
    }
  },'json');
});
posts(0); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T16:42:11.053

使用 $.each 和异步请求，您无法控制循环的执行，但是，使用 for 循环可以做到：

```
for(var index in data){
    data = 0;
    $.ajax({
        url:"tracking.php",  
        data: { action: "send", id: getId }, 
        type: 'POST',
        async: false,
        success: function(tmpData){
          data = tmpData
        }
    });
    if(data != '1'){
        break;
    }
} 
```

在此示例中，我们使用 for 循环和 jQuery 同步 ajax 请求从服务器获取结果并验证该值是否符合预期。如果返回与“1”不同的东西，我们只需中断（停止）循环。

# java - 将 JiBX 绑定到具有包含多种类型对象的列表的 JAXB POJO？

> ID：16197450
> 
> 赞同：2
> 
> 时间：2013-04-24T16:33:56.763
> 
> 标签：java, binding, jaxb, xml-serialization, jibx

**问题**：如何将 JiBX 绑定到具有包含多种类型对象的 List 的 JAXB POJO？

**背景**：我们正在尝试从 JAXB 迁移到 JiBX 以进行 XML 序列化以提高性能。但是，我们无法更改从 JAXB 生成的 POJO，因为它们是由我们的客户提供的。我在如何调整我`binding.xml`以使用`List`从 JAXB 生成的类型时遇到问题（没有用于 JAXB 生成列表的设置器）。

这是 XSD 片段

```
<xs:element name="contact_plan">
    <xs:complexType>
        <xs:sequence>
            <xs:element ref="header" maxOccurs="1"/>
            <xs:choice maxOccurs="unbounded">
                <xs:element ref="ctp:asc_node" maxOccurs="unbounded"/>
                <xs:element ref="ctp:desc_node" maxOccurs="unbounded"/>
                <xs:element ref="ctp:exit_umbra" maxOccurs="unbounded"/>
                <xs:element ref="ctp:enter_umbra" maxOccurs="unbounded"/>
                <xs:element ref="ctp:contact" maxOccurs="unbounded"/>
            </xs:choice>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

JAXB 生成的代码

```
/**
 * Gets the value of the a property.
 * 
 * <p>
 * This accessor method returns a reference to the live list,
 * not a snapshot. Therefore any modification you make to the
 * returned list will be present inside the JAXB object.
 * This is why there is not a <CODE>set</CODE> method for the a property.
 * 
 * <p>
 * For example, to add a new item, do as follows:
 * <pre>
 *    getAs().add(newItem);
 * </pre>
 * 
 * 
 * <p>
 * Objects of the following type(s) are allowed in the list
 * {@link D }
 * {@link Ex }
 * {@link A }
 * {@link En }
 * {@link C }
 * 
 * 
 */
public List<Object> getAs() {
    if (as == null) {
        as = new ArrayList<Object>();
    }
    return this.as;
} 
```

JiBX 希望在绑定中执行此操作：

```
<mapping class="c" name="c">
  <structure type="c" get-method="getHeader" set-method="setHeader"/>
  <collection get-method="getAs" set-method="setAs"
              create-type="java.util.ArrayList">
  </collection>
</mapping> 
```

`setAs`生成的 JAXB POJO 上不存在该方法。因此`Error: Nonstatic set-method setAs with argument of appropriate type not found in class.`抛出异常，我无法创建绑定。JiBX 生成的 POJO 还为每种类型提供单独的列表，而不是为所有类型提供一个列表。

**我试过的**：

1.  我探索了为计划 xsd 元素类型创建自己的 Marshaller 和 Unmarshaller 的选项。但是，然后（据我所知）我还必须为列表中包含的每种类型编写自定义编组器/解组器（<--**这个假设是否正确？**）。如果可能的话，我宁愿避免这种情况。
2.  我已经探索过尝试调整`binding.xml`以尝试将编组器用于列表中包含的类型，但是我认为没有办法仅使用 binding.xml 来做到这一点。

如果您有任何有用的经验或建议可以帮助解决我的问题，请提出建议。感谢您抽出宝贵时间，如果我能进一步澄清，请告诉我。

# html - 防止 HTML 表格调整大小溢出

> ID：16197451
> 
> 赞同：1
> 
> 时间：2013-04-24T16:33:57.737
> 
> 标签：html, css, html-table

我已经搜索了很长时间，但没有运气。

当元素（其他表）在其中时，如何防止 html 表重新调整大小我希望元素在必要时从表中溢出。

```
 table-layout:fixed; 
```

以上不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:51:09.443

我从[这里](https://stackoverflow.com/questions/9789723/css-text-overflow-in-a-table-cell)得到这个。

您可以使用：

```
td {
    max-width:30px;
    overflow:hidden;
    text-overflow:ellipsis;
    white-space: nowrap;
} 
```

编辑：省略号是可选的，具体取决于您要对文本执行的操作。

[http://jsfiddle.net/7K9jE/1/](http://jsfiddle.net/7K9jE/1/)

# python - 在 Linux 中使用 system() 调用从 C 调用 Python

> ID：16197453
> 
> 赞同：2
> 
> 时间：2013-04-24T16:34:03.473
> 
> 标签：python, c

我正在使用`system()`Linux 机器内的调用从 C 代码调用 Python 程序。假设第一次调用 Python 程序通过打开文本文件并读取第 1-10 行来读取某个文本文件的前 10 行。现在在第二次调用 Python 程序期间，我想读取接下来的 10 行 11-在最后一次调用 Python 期间打开的相同文本文件的 20 个，无需重新打开文件并从文件的第一行开始。在第三次调用 Python 程序期间，我希望能够读取同一文本文件的下 10 行第 21 - 30 行，而无需重新打开文件并从文件开头开始。这继续...

这是示例代码

```
//This is C code
...
...
int initial_line_number, final_line_number
initial_line_number = 1;
final_line_number = 10;
for(i = 1; i <= 10; i++)
{
    system("python test.py initial_line_number, final_line_number"); //test.py reads a text     file from initial_line number to final_line_number
    initial_line_number += 10;
    final_line_number +=10;
} 
```

这可以做到吗？最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:41:21.860

不，您不能在不重新打开文件的情况下继续第二次通话。

每个`system()`调用都将运行作为参数给出的程序，并等待该进程终止。因此，你每次都会得到一个新孩子——没有（简单的）方法让第二个孩子从第一个孩子离开的地方继续。

（可能有复杂的方法，您的第一个进程在后台启动一个 Python 进程，该进程读取一些行并挂起；您直接启动的进程将终止。第二个调用可能会识别出 Python 进程仍在挂起并告诉它继续。但这是一个棘手的编程 - 不值得付出努力。而且每个`system()`调用都会运行一个单独的进程并等待该进程终止，这仍然是事实。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:37:58.287

首先，你的调用`system()`是错误的，你必须传递一个字符串。

其次，通话`system()`不好，而且不便携。如果你真的想使用 Python，你可以使用 Python C API：[http ://docs.python.org/2/c-api/](http://docs.python.org/2/c-api/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:50:46.270

在理论上，您可能想探索将 DBus 与 python 和 c 一起使用。有一个 python 守护程序读取您的文件，然后从 c 进行 dbus 调用，返回 x 行数（您可以在 dbus 标头中指定）。

这样，您可以根据需要保持 python 文件打开，并且不需要 system() 调用，这意味着您的程序会更安全。

（Dbus 可以从用户和系统权限运行，因此只要您有权限，您的程序就不必从管理员级别运行。）

# scala - sbt 直接 git 源依赖项 - 不获取传递库依赖项？

> ID：16197456
> 
> 赞同：2
> 
> 时间：2013-04-24T16:34:09.300
> 
> 标签：scala, sbt

我正在`dependsOn`使用托管在 Github 的 git 存储库（“项目 A”）来尝试 sbt 的直接功能。我正在使用稳定的标记引用，并且在我的测试项目（“项目 B”）中，sbt*确实*从源代码克隆项目 A 并开始编译。然而，编译失败，项目 A 自己的依赖项似乎缺失（即，它似乎没有拾取项目 A 中定义的任何内容`build.sbt`）。

这与 maven/ivy 托管依赖项不同吗？我是否需要在我的子项目 B 中包含所有传递依赖项？对我来说听起来有点奇怪。这会扼杀整个工作，因为我有十几个项目 A 所依赖的库。

* * *

为了显示：

**项目 A**（在 Github 上在线作为源）：

```
// build.sbt:
version := "1.2.3"

libraryDependencies += "org.foo" %% "bar" % "1.0" 
```

**项目 B**（本地）：

```
// project/Build.scala
import sbt._
import Keys._

object Build extends sbt.Build {
  lazy val projA = RootProject(uri("git://github.com/me/projA.git#v1.2.3"))

  lazy val projB = Project(id = "project-B", base = file(".").dependsOn(projA)
} 
```

这是这样的：

```
[info] Compiling 678 Scala sources to /Users/me/.sbt/staging/
  5666eafa865fdf605be3/target/scala-2.10/classes...
[error] /Users/me/.sbt/staging/5666eafa865fdf605be3/src/main/scala/com/me/
  BarKeeper.scala:3: not found: object bar
[error] import org.foo.bar
[error]        ^ 
```

那么我是否必须重新声明库依赖项`"org.foo" %% "bar" % "1.0"`？我希望不是！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T10:58:12.987

这纯粹是我自己的错，不是 sbt 的。我在项目 A 中监督了一个**非托管库**（文件夹`lib`）。在将其交换为 Maven 托管版本（文件夹`lib_managed`）之后，项目 A 现在可以从项目 B 的暂存中的源代码正确编译。

# matlab - 在MATLAB中将大型邻接矩阵转换为边列表的有效方法？

> ID：16197457
> 
> 赞同：5
> 
> 时间：2013-04-24T16:34:12.567
> 
> 标签：matlab, optimization, matrix, graph-theory, adjacency-matrix

我有大约**1M 个节点的****大型稀疏邻接矩阵**，我正在使用**MATLAB**处理这些矩阵。我想尽可能高效地将这些矩阵转换为**网络边缘列表。**作为一个示例邻接矩阵来说明这一点：

 ******```
调整 =
     1 0 1 0
     0 0 1 1
     0 0 1 0
     0 1 0 0

```

我在这里称为*网络边缘列表*的输出是：

```
>> adj2edgeList_Alex(adj)
答案=
     0 0
     0 2
     1 2
     1 3
     2 2
     3 1

```

我必须做的这段代码会拖延时间。

```
函数 edge_list = adj2edgeList_Alex(graph)

edge_num = 长度（逻辑（图 > 0））；
edge_list = zeros(edge_num,2);
row_ind = 1;
对于 ii=1:size(graph,2)
    ind_temp = find(graph(ii,:)==1);
    if(isempty(ind_temp) == 0)
        ind_temp = ind_temp - 1；
        edge_iter = 长度（ind_temp）；   
        node_num = ii - 1;
        edge_list(row_ind:row_ind+edges_iter-1,:) = ...
            [(node_num)*ones(1,edges_iter);ind_temp]';
            row_ind = row_ind + edge_iter;
    结尾
结尾

```

有没有修改来加快这个速度？另一个性能更好的功能或工具箱？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T16:46:01.977

您可以使用`find()`：

```
[r,c] = find(adj)
edges = [r,c]; 
```

请注意，MATLAB 索引从 1 而不是 0，但您可以简单地通过`edges-1`.******

# c# - 使用基本字符串操作的字符串模式匹配

> ID：16197459
> 
> 赞同：2
> 
> 时间：2013-04-24T16:34:24.263
> 
> 标签：c#, .net, string, pattern-matching, match

我有一个方法，允许用户指定一个远程目录和一个 searchPattern with with 来搜索远程目录中的文件。由于我在从远程位置检索文件名时使用第三方库，因此我无法利用 System.IO 的 Directory.GetFiles() 例程，它允许我在获取文件时指定 searchPattern。

Basic String.Compare 未将文件名与提供的模式正确匹配。请问有人知道更有效的匹配方法吗？

```
public IList<String> GetMatchingRemoteFiles(String SearchPattern, bool ignoreCase)
{
    IList<String> matchingFileNames = new List<String>();

   var RemoteFiles = thirdPartyTool.ftpClient.GetCurrentDirectoryContents();

    foreach( String filename in RemoteFiles)
     if( String.Compare(filename, SearchPattern, ignoreCase) == 0)
            matchingFileNames.Add(filename);

    return matchingFileNames;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T16:40:05.400

使用通配符 ( `*`, `?`) 匹配的文件称为“glob”匹配或“globbing”。您可以尝试将用户输入的全局搜索转换为正则表达式，然后使用它。[这里](https://stackoverflow.com/a/190297/298754)有一个例子：

```
Regex.Escape( wildcardExpression ).Replace( @"\*", ".*" ).Replace( @"\?", "." ); 
```

然后，这将`RegEx.Match()`作为模式传递给您当前拥有的模式`String.Compare()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:39:41.540

如果您可以指定此方法将接受哪些类型的搜索字符串，则可以使用正则表达式。为了简洁起见，这是一个使用 Linq 的示例：

```
public IList<String> GetMatchingRemoteFiles(String SearchPattern, bool ignoreCase)
{
    var options = ignoreCase ? RegexOptions.IgnoreCase : RegexOptions.None;
    return thirdPartyTool.ftpClient.GetCurrentDirectoryContents()
                         .Where(fn => Regex.Matches(fn, SearchPattern, options))
                         .ToList();
} 
```

即使您无法控制此方法接受哪些类型的搜索字符串，将搜索字符串转换为正则表达式仍然可能比编写您自己的算法来匹配模式更容易。有关如何执行此操作的详细信息，请参阅*Bobson的答案。*

# ruby-on-rails - rails 链接到另一个控制器

> ID：16197464
> 
> 赞同：2
> 
> 时间：2013-04-24T16:34:44.123
> 
> 标签：ruby-on-rails, ruby, hyperlink, controller

```
<td>
  <%=link_to image_tag(phone.image, :class => 'list_image'), :controller => 'phones_feature_controller', :action => 'index', :id => phone.id %>
</td> 
```

我想要一个指向另一个控制器的图像链接。这个链接在我的索引页中，它的控制器是`phone`. 我有另一个控制器`phones_feature`。我想要一个指向`phones_feature`的索引页的链接

我的手机功能控制器：

```
 def index
  @phones=Phone.find(params[:id])
   respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @phones }
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:38:12.990

您正在将控制器添加到控制器名称中。

```
<%=link_to image_tag(phone.image, :class => 'list_image'),:controller => 'phones_feature', :action => 'index', :id=>phone.id %> 
```

检查[url_for 文档](http://apidock.com/rails/ActionView/Helpers/UrlHelper/url_for)

# intuit-partner-platform - 您可以通过 OAuth 检索 Intuit 用户 ID

> ID：16197470
> 
> 赞同：3
> 
> 时间：2013-04-24T16:34:53.900
> 
> 标签：intuit-partner-platform, quickbooks-online

我正在使用“连接到 QuickBooks”按钮创建到 QuickBooks Online 的连接，如下页所述：

[http://docs.developer.intuit.com/0025_Intuit_Anywhere/0010_Getting_Started/0020_Connect/0010_From_Within_Your_App/Implement_OAuth_in_Your_App](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0010_Getting_Started/0020_Connect/0010_From_Within_Your_App/Implement_OAuth_in_Your_App)

使用此方法可以检索用户输入的 Intuit 用户 ID（在 Intuit 登录对话框中提示时），以便我可以将该用户 ID 与返回的访问令牌、访问令牌密码和 realmId 相关联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:43:11.340

Intuit 有一个“当前用户”API，可以满足您的要求。您可以在从 Intuit 获得 OAuth 令牌后立即发出此 API 请求，然后在您的应用程序中记录关联。

这是它的文档：

*   [https://developer.intuit.com/docs/0100_quickbooks_online/0100_essentials/0085_develop_quickbooks_apps/0004_authentication_and_authorization/platform_api](https://developer.intuit.com/docs/0100_quickbooks_online/0100_essentials/0085_develop_quickbooks_apps/0004_authentication_and_authorization/platform_api)

您基本上对此 URL 执行 OAuth GET 请求：

*   [https://appcenter.intuit.com/api/v1/user/current](https://appcenter.intuit.com/api/v1/user/current)

Intuit 会返回一个这样的响应，它将为您提供此人的姓名和电子邮件地址：

```
<?xml version="1.0"?>
<UserResponse xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns="http://platform.intuit.com/api/v1">
  <ErrorCode>0</ErrorCode>
  <ServerTime>2012-04-13T18:47:34.5422493Z</ServerTime>
  <User>
    <FirstName>John</FirstName>
    <LastName>Doe</LastName>
    <EmailAddress>JohnDoe@g88.net</EmailAddress>
    <IsVerified>true</IsVerified>
  </User>
</UserResponse> 
```

# php - 未找到 PHP 类 Libmemcached

> ID：16197471
> 
> 赞同：0
> 
> 时间：2013-04-24T16:35:01.320
> 
> 标签：php, apache, memcached, libmemcached

我正在将一个 PHP 应用程序 9running on apache) 从 Centos 转移到 Ubuntu。当我在 Ubuntu 上部署代码时，出现错误“找不到类 Libmemcached”。

当我比较 phpinfo 页面时，我可以看到 Centos 有“libmemcached”部分，而 Ubuntu 有“memcached”部分。

在这两个系统上，phpinfo 都有“memcache”（最后没有“d”）部分。

看起来我的 Centos PHP 有“libmemcached”扩展，而我的 Ubuntu PHP 没有。如何下载该扩展程序？或者我可以以某种方式从我的 Centos 系统转移扩展程序吗？

我在 github ( [https://github.com/kajidai/php-libmemcached](https://github.com/kajidai/php-libmemcached) ) 上找到了 php-libmemcached 存储库，这可能是我正在寻找的，但我不知道如何在 Ubuntu 上安装它。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:58:16.963

您使用的`libmemcached`扩展程序不是官方扩展程序。我不知道 Centos 是从那里得到它的。

所以我建议使用/安装来自[PECL](http://pecl.php.net/package/memcached)`memcached`的官方扩展 并更新您的应用程序。

否则，您必须`libmemcached`通过以下步骤从头开始安装扩展：

*   从[github下载](https://github.com/kajidai/php-libmemcached)
*   解压文件
*   进入新文件夹
*   `phpize`
*   `./configure`
*   `make install`
*   在你体内启用它`php.ini`
*   重启你的网络服务器

# google-bigquery - 通过 API 来自 CSV 的 TIMESTAMP

> ID：16197475
> 
> 赞同：0
> 
> 时间：2013-04-24T16:35:09.977
> 
> 标签：google-bigquery

当有 TIMESTAMP 字段时，API 是否支持将 CSV 导入新表？

如果我手动（使用 BigQuery Web 界面）上传包含时间戳数据的 CSV 文件，并通过架构指定字段为 TIMESTAMP，它就可以正常工作。数据已加载。时间戳数据被解释为时间戳数据并导入到时间戳字段中就好了。

但是，当我使用 API 对同一个文件执行相同的操作时，我收到此错误：

“非法 CSV 模式类型：TIMESTAMP”

更具体地说，我正在使用 Google Apps 脚本连接到 BigQuery API，但响应似乎来自 BigQuery API 本身，这表明这不是 API 的功能。

我知道我可以导入为 STRING，然后在我的查询中转换为 TIMESTAMP，但我希望最终得到一个带有时间戳字段的表模式......从 CSV 文件填充......使用 API......最好为简单起见，通过 Apps 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T22:15:43.960

看起来“内联”模式解析器中缺少 TIMESTAMP。修复应该在下周的构建中同时，如果您通过“schema”字段而不是 schemaInline 字段传递架构，它应该适合您。

# visual-studio-2010 - 如何在 Windows 7 上的 VS2010 C++ 中使用 GotoBlas 库？

> ID：16197480
> 
> 赞同：0
> 
> 时间：2013-04-24T16:35:22.263
> 
> 标签：visual-studio-2010, eigenvector, eigenvalue

[我在http://www.tacc.utexas.edu/tacc-projects/gotoblas2/](http://www.tacc.utexas.edu/tacc-projects/gotoblas2/)下载了 GotoBLAS 库，我想使用`syev()`函数来计算矩阵的特征向量和特征值。但是我是一个开源库的新手，我不知道如何使用它？谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T20:48:09.303

首先，顾名思义，GotoBLAS 的意思是只提供 BLAS，但它的 2.0 版本还分发和编译 LAPACK，其中包含您感兴趣`ssyev`的单精度浮点和`dsyev`双精度功能。换句话说，相当于说你想在 Visual Studio 2010 中使用 C++ 中的 LAPACK。

我想问题不在于如何在 VS2010 中使用库，而是如何在 C++ 中使用 LAPACK 包。这里有一个小提示：LAPACK 是用 Fortran 编写的。由于历史原因，C语言可以直接访问Fortran编写的库。在C++中，具体需要声明函数，例如dot-product for double `ddot`by

```
extern "C"{ 
    double ddot_(
        const int*    n,   // dimension 
        const double* dx,  // []vector x
        const int*    incx,// index increment of each access of x
        const double* dy,  // []vector y
        const int*    incy // index increment of each access of y
    );
} 
```

在 Fortran 中，每个函数参数都通过引用传递，因此在 C/C++ 中，我们需要通过指针传递参数，即使对于标量也是如此。

一旦你声明了函数原型，你就可以在任何地方使用它。在这种情况下，我们可以调用它，例如，

```
double x[] = {1,2,3};
double y[] = {1,1,1};
int    inc = 1;
int    n   = 3;
std::cout << ddot_(&n, x, &inc, y, &inc) << std::endl; 
```

打印的结果应该是`6`. 特别注意放在哪里`&`和不放在哪里。很容易犯错。

确保将`lapack`（或 GotoBLAS 库的名称）放入项目库设置中。例如，在使用 g++ 的命令行中，

```
g++ -llapack your_file_name.cpp -o output_file_name 
```

希望这可以帮助！

# symfony - 从 oneToMany 关系中删除项目

> ID：16197483
> 
> 赞同：28
> 
> 时间：2013-04-24T16:35:41.113
> 
> 标签：symfony, doctrine-orm

我有以下画廊实体

```
class Gallery
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var ArrayCollection
     * @ORM\OneToMany(targetEntity="Tessa\GalleryBundle\Entity\Photo", mappedBy="gallery", cascade={"persist", "remove"})
     */
    private $photos;

    /* ... */
} 
```

这`gallery`与与实体的`manyToOne`关系相关联。`PointOfInterest`这是声明

```
class PointOfInterest
{
 /* ... */
 /**
 * @ORM\ManyToOne(targetEntity="Tessa\GalleryBundle\Entity\Gallery", cascade={"persist", "remove"})
 * @ORM\JoinColumn(nullable=false)
 */
private $gallery;
 /* ... */ 
```

我还使用表单来更新`PointOfInterest`实体。这是表单声明

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
            ->add('name',           'text')
            ->add('gallery',        new GalleryType())
       ;
} 
```

和`GalleryType`宣言。

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('photos', 'collection', array('type'          => new PhotoType(),
                                            'required'      => false,
                                            'allow_add'     => true,
                                            'allow_delete'  => true,
                                            'by_reference'  => false
                                            ))
    ;
} 
```

当我编辑时，`PoI`我可以毫无问题地将照片添加到画廊，但我不能删除任何东西。

我试图挂上 gallery `PreUpdate`，但它从未被调用。`removePhotos`我以实体的方式打印输出，`Gallery`照片从图库中删除。然后我怀疑画廊永远不会被坚持下去。

这是我坚持`PoI`编辑后的代码。

```
private function handleForm($elem, $is_new)
{
    $form = $this->createForm(new CircuitType, $elem);

    $request = $this->get('request');
    if ($request->getMethod() == 'POST') {
        $form->bind($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $em->persist($elem);
            $em->flush();

            return $this->redirect($this->generateUrl('tessa_circuit_index'));
        }
    }

    return $this->render('TessaUserBundle:Circuits:add.'.'html'.'.twig',
        array(
            'form' => $form->createView(),
            'is_new' => $is_new,
        ));
} 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-24T19:23:06.517

[Symfony2 食谱中](http://symfony.com/doc/2.1/cookbook/form/form_collections.html#allowing-tags-to-be-removed)有一篇关于处理这种情况的文章。由于您具有 OneToMany 关系，因此您必须在控制器中手动删除相关对象。

**编辑**：或者您可以使用[Doctrine 的孤儿删除](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#orphan-removal)功能。

```
class Gallery
{
    //...    

    /**
     * @ORM\OneToMany(targetEntity="Photo", mappedBy="gallery", cascade={"persist", "remove"}, orphanRemoval=true)
     */
    private $photos;

    //...

    public function removePhotos($photo)
    {
        $this->photos->remove($photo);
        $photo->setGallery(null);
    }
} 
```

# c++ - C 共享对象，带有 C++ 存档、静态 Ctors/Dtors 和 dlopen

> ID：16197485
> 
> 赞同：1
> 
> 时间：2013-04-24T16:35:48.867
> 
> 标签：c++, shared-libraries, dlopen

我有一个正在加载的 C 共享对象`dlopen`。C 共享对象包括另一个库作为静态存档（完全指定的路径`/usr/local/.../libsomelib.a`）。`libsomelib.a`是一个 C++ 库，它具有全局和静态局部变量。

`RTLD_GLOBAL`在 Ubuntu 上，使用和打开共享库时，静态初始化程序似乎没有运行`RTLD_GLOBAL | RTLD_LAZY`。我看到的症状是程序崩溃。

我看到的行为似乎类似于链接`-nostartfiles`或`-nostdlib`（但我没有使用它们）。*[我在C++ Static Constructors and dlopen'd Shared Libraries](http://mail-index.netbsd.org/tech-toolchain/2000/03/07/0001.html)*找到了一个类似的线程，但它是针对 NetBSD 系统的。

如果 EXE 显式包含`libsomelib.a`并从中调用函数，则 C++ 库将初始化并且程序在通过函数指针调用时不再崩溃。

编辑：这是共享对象的构建方式（这是我经历过的最简单的情况，没有混合/匹配 C 和 C++）。`cryptopp-so-test.exe`调用`dlopen`：

```
CXXFLAGS = -g -ggdb -fPIC -DDEBUG -O1 -Wall -Wextra -Wno-unused -DUSE_PRECOMPILED_HEADERS=1 -I. -I/usr/local/include/cryptopp
...
precompile:
    $(CXX) $(CXXFLAGS) pch.h -o pch.h.gch

cryptopp-so-test.exe: precompile $(EXEOBJECTS)
    $(CXX) $(CXXFLAGS) -o $@ $(EXESOURCES) -ldl -lpthread

dsotest: precompile $(DLLOBJECTS)
    $(CXX) $(CXXFLAGS) $(DLLSOURCES) -o dsotest-1.so -shared /usr/local/lib/libcryptopp.a 
```

虽然上面的代码构建了一个 EXE (cryptopp-so-test.exe) 和一个 SO (dsotest-1.so)，但我实际上构建并加载了 4 个共享对象（它们的构建方式相同）。

我应该使用哪些标志（或其他方法）来确保在具有 C++ 组件的 C 共享对象是`dlopen`'d 时运行静态初始化程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T06:07:26.603

> 在 Ubuntu 上，使用 RTLD_GLOBAL 和 RTLD_GLOBAL 打开共享库时，静态初始化程序似乎没有运行 | RTLD_LAZY。

当您`dlopen`使用共享库时，将调用全局构造*函数*。你很可能会得出错误的结论。

> 我看到的症状是程序崩溃。

这种症状可能是由*任何*原因引起的。您需要查看调试器中的崩溃，并了解导致它的原因，而不是盲目猜测“静态初始化程序”。

链接到主可执行文件和将其链接到共享库之间的一个区别`libsomelib.a`是，根据哪些代码调用哪些函数，您最终可能会在每个函数中包含截然不同的部分`libsomelib.a`（链接器只会拉入`libsomelib.a`它可以看是必要的）。

您可以尝试将*整个* `libsomelib.a`链接到共享库中，如下所示：

```
g++ $(OBJS) -o dsotest-1.so -shared \
  -Wl,--whole-archive -lsomelib -Wl,--no-whole-archive 
```

# kinect - Kinect SDK 1.7 交互框架

> ID：16197486
> 
> 赞同：0
> 
> 时间：2013-04-24T16:35:53.213
> 
> 标签：kinect, kinect-sdk, xbox

我想知道基于kinect for windows SDK 1.7，在InteractionFrame下有抓取功能。

是否可以只用一只手，例如：只用右手抓？

我试图让它只检测一只手（右手），但是当我移动左手时似乎有某种幽灵鼠标。

这就是我尝试过的： playerInfo.HandPointers[1].HandEventType == InteractionHandEventType.Grip

但是还有另一个指针只是可见的。

非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T14:34:14.887

Tlga，我在我的程序中设置交互事件时遇到了重大问题。无论如何你可以帮助我，因为看起来你已经有了这些。

我正要拔头发

本

gmail dot com 的 Chefbennyj

# excel - Excel 2010：从 hh:mm:ss 格式化单元格中提取小时和分钟

> ID：16197493
> 
> 赞同：10
> 
> 时间：2013-04-24T16:36:11.963
> 
> 标签：excel, time

例如：

我有一个具有以下值的单元格：

“1900 年 1 月 11 日凌晨 4:00:20”

这将在单元格内显示为：“268:00:20” - 表示 268 小时 00 分钟和 20 秒（请参见下面的第一张图片）。

编辑：这是它的外观和单元格格式的屏幕![有数据的单元格](https://i.imgur.com/tTxUqCf.png)

问题来了：

**什么是 Excel 2010 公式（如果可能，没有 VBA！）从这个单元格*中提取小时*和*提取分钟***，例如“268”应该在不同的单元格中显示小时，“00”（在这种情况下）在分钟另一个细胞？

澄清一下：“268:00:20”是 268 小时 00 分 20 秒的持续时间。

我想得到什么？在不同的单元格中，存储小时 (268) 和分钟 (0)

单元格被格式化为时间（见下图）： ![Excel 2010 - 时间格式单元格](https://i.imgur.com/D7fav72.jpg "Excel 2010 - 时间格式单元格")

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T19:12:44.550

值 1/11/1900 4:00:20 AM 实际上只是 Excel 中代表天数的格式化数字，即在这种情况下约为 11.167 - 我认为 Daniel 的解决方案并不遥远 - 使用 DAY 和 HOUR 将适用于值最多 31 天.......但对于更通用的解决方案，只需使用几个小时：

`=INT(A1*24)`

几分钟

`=MINUTE(A1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:52:23.337

我会使用类似于我[在这里](https://stackoverflow.com/q/15953224/1578604)使用的东西。对于解决方案来说，这并不是很漂亮，但它确实有效。

因此，在您的情况下，您要做的是：

1.  在您想要的时间格式化值，然后将值（或列）复制/粘贴到记事本中。剪贴板复制并粘贴可见的内容，而不是 Excel 中的日期/时间值。
2.  在您的工作表中，插入一个新列并将其格式化为文本。这将导致 excel 按原样接受这些值，而不是将它们转换为日期时间。
3.  从记事本复制所有内容并粘贴到您刚刚格式化为文本的新列中。您将像在 excel 中一样获得时间值。

从那里，您可以使用`Text to column`带冒号分隔的时间来拆分时间以获得 3 列：小时、分钟和秒（以及附加提示，在拆分到列窗口中，您会被询问拆分列的格式，格式化所有作为文本）。

![在此处输入图像描述](https://i.stack.imgur.com/IPZFE.png)

编辑：因为它似乎不太明显......

![在此处输入图像描述](https://i.stack.imgur.com/pZzp7.png)

*   B 列是原始日期/时间。
*   C 列是相同的日期/时间，仅以小时、分钟和秒为格式。在记事本中复制并粘贴 C 列。
*   将 D 列格式化为文本，然后将记事本中的值复制到该列。这为您提供了存储为文本的时间。
*   E 到 G 列是 D 列的拆分，以冒号分隔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:54:02.127

您将不得不使用`Day`和`Hour`公式。小时将仅返回时间部分。您必须将其与 相加`24*Day`。也许你也需要使用`Year`，这取决于你想要什么。

对于分钟，使用`Minute`公式。

如果有开始日期和所需日期，您可以使用`24 * Days(DesiredDate, StartDate)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-28T08:00:18.267

只需使用菜单栏中数据下的文本到列功能。对于超过 24 小时的时间，效果非常好。我遇到了一个问题，分钟和秒有时以 2 位数字显示，有时以 1 位数字显示，例如。268:1:13 或 541:12:3 或 671:45:30。在这种情况下，只需将分隔符选择为“：”（相对于固定宽度选项），它将能够在单独的列中显示小时分钟和秒。问题解决了！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T17:00:11.530

您根本不需要任何公式。只需使用此格式格式化单元格`[h]:mm:ss;@`

下面的例子：

假设您的日期在单元格 A1 中，如图所示：

![在此处输入图像描述](https://i.stack.imgur.com/tUS3W.jpg)

转到格式选项：

![在此处输入图像描述](https://i.stack.imgur.com/G3Pwl.jpg)

然后在`Number`选项卡下选择自定义。然后在框中输入上面的自定义时间格式：

![在此处输入图像描述](https://i.stack.imgur.com/YVGgG.jpg)

你的单元格最终会变成：

![在此处输入图像描述](https://i.stack.imgur.com/tsmRe.jpg)

或者通过公式，您可以使用`DateDif()`公式来完成`=DATEDIF(0,A1,"D")*24+HOUR(A1)&":"&MINUTE(A1)&":"&SECOND(A1)`

如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/6UqsM.png)

# html - 展开子菜单项以适合标题（先右后左）

> ID：16197496
> 
> 赞同：3
> 
> 时间：2013-04-24T16:36:18.683
> 
> 标签：html, css

我有以下结构：

```
<div class="wrap">
    <div class="menu">
        <div class="item">
            Menu
            <div class="submenu">
                <div class="submenuitem">Submenu</div>
            </div>
        </div>
    </div>
</div> 
```

到目前为止，以下CSS：

```
div.wrap {
    background: #eee;
    height: 80px;
}

div.menu {
    margin-left: 50px;
    background: #36e;
}

div.item {
    background: #d00;
    color: #fff;
    line-height: 40px;
    padding: 0px 20px;
    font-size: 16px;
    display: inline-block;
    margin-left: 50px;
}

div.item:hover {
    background: #b00;
}

div.submenu {
    display: none;
    background: #0b0;
    height: 40px;
    position: absolute;
    right: 0%;
    top: 50%;
    min-width: 300px;
}

div.item:hover div.submenu {
    display: inline-block;
}

div.submenuitem {
    line-height: 40px;
    padding: 0px 20px;
    background: #b00;
    color: #fff;
    display: inline-block;
} 
```

[JSFiddle](http://jsfiddle.net/zmcEC/8/)

我所追求的行为是`submenuitem`扩展的宽度以适合其文本内容，但它最多可以使用`wrap`扩展的宽度。它也应该直接位于下方`item`，除非 的宽度`submenuitem`大于从其原始位置到 的右端的距离`wrap`。此后它应该向左扩展，直到它遇到 的左边缘`wrap`。

正如你所看到的，当我可以通过设置知道从`submenuitem`的原始位置到右端的距离时，这完全成功，但我想以一种不需要知道该距离的方式来做到这一点。`wrap``right: 0%; min-width: 300px;``submenuitem`

在过去的几天里，我一直在尝试制作或找到解决方案，但没有设法接近。甚至可以从纯 CSS 开始吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:03:59.470

这是你想要的吗？检查这个并让我知道。

[http://jsfiddle.net/zmcEC/9/](http://jsfiddle.net/zmcEC/9/)

```
div.wrap {
    width: 400px;
    background: #eee;
    position: relative;
    height: 80px;
}

div.submenu {
    display: none;
    background: #0b0;
    height: 40px;
    position: absolute;
    right: 0;
    top: 40px;
    left:0;
} 
```

# c# - 我在 C# 中的 MessageBox.Show 代码不起作用。没有错误，但有问题

> ID：16197499
> 
> 赞同：1
> 
> 时间：2013-04-24T16:36:22.763
> 
> 标签：c#, messagebox

所以我最近一直在尝试学习 C#，所以我想我会尝试我的简单项目，例如井字游戏。我目前正在尝试添加点击功能，以确保它正常工作，我放入 MessageBox.Show 以确保它是我点击的新区域。但是，当我运行它时，没有出现错误，但是当我单击一个框时，什么也没发生。有谁知道我的代码有什么问题？是 MessageBox.Show 代码还是其他问题？这是我的代码：

在 Board.cs 文件中，我有：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    class Board
    {
        private Rectangle[,] slots = new Rectangle[3, 3];
        private Holder[,] holders = new Holder[3, 3];

        public const int X = 0;
        public const int O = 1;
        public const int B = 2;

        public void initBoard()
        {
            for (int x = 0; x < 3; x++)
            {
                for (int y = 0; y < 3; y++)
                {
                    slots[x, y] = new Rectangle(x * 167, y * 167, 167, 167);
                    holders[x, y] = new Holder();
                    holders[x, y].setValue(B);
                    holders[x, y].setLocation(new Point(x, y));
                }
            }
        }

        public void detectHit(Point loc)
        {
            int x = 0;
            int y = 0;

            if (loc.X < 167)
            {
                x = 0;
            }
            else if (loc.X > 167 && loc.X < 334)
            {
                x = 1;
            }
            else if (loc.X > 334)
            {
                x = 2;
            }
            if (loc.Y < 167)
            {
                y = 0;
            }
            else if (loc.Y > 167 && loc.Y < 334)
            {
                y = 1;
            }
            else if (loc.Y > 334 && loc.Y < 500)
            {
                y = 2;
            }

            MessageBox.Show(x.ToString() + ", " + y.ToString() + "/n/n" + loc.ToString());
        }
    }
    class Holder
    {
        private Point location;
        private int value = Board.B;
        public void setLocation(Point p)
        {
            location = p;
        }
            public Point getLocation()
            {
                return location;
            }
        public void setValue(int i)
        {
            value = i;
        }
        public int getValue()
        {
            return value;
        }
    }
} 
```

然后在我的 Form1.cs 文件中，我有：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        GFX engine;
        Board theBoard;

        public Form1()
        {
            InitializeComponent();
        }

        private void panel1_Paint(object sender, PaintEventArgs e)
        {
            Graphics toPass = panel1.CreateGraphics();
            engine = new GFX(toPass);

            theBoard = new Board();
            theBoard.initBoard();
        }

        private void Form1_Click(object sender, EventArgs e)
        {
            Point mouse = Cursor.Position;
            mouse = panel1.PointToClient(mouse);
            theBoard.detectHit(mouse);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:50:48.490

根据您的事件处理程序的名称（Form1_Click），我怀疑您已经将 click 事件处理程序连接到您的**form**的 click 事件而不是**panel1**的 click 事件。请注意，如果用户单击表单内的面板，则**只会**触发面板的单击事件，而不是表单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:47:08.857

您可能没有注册该事件。尝试在构造函数中注册它：

```
 public Form1()
    {
        InitializeComponent();

        //Register click event with handler
        this.Click += new EventHandler(Form1_Click);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:50:21.313

唯一有意义的解释`Form1_Click`是没有运行。如果它被执行，那么`detectHit`肯定会运行。并且`MessageBox.Show`肯定会被调用。没有避免`MessageBox.Show`显示的执行分支。`MessageBox.Show`在执行事件中不被调用的唯一可能方法`Form1_Click`是引发异常。在这种情况下，您会注意到这一点。

要么事件处理程序根本没有连接。或者它与表单的`Click`事件相关联，但您单击的是面板而不是表单。

# c# - C# winform，带有 BetterListView 的进度条

> ID：16197500
> 
> 赞同：1
> 
> 时间：2013-04-24T16:36:25.777
> 
> 标签：c#, winforms, better-listview

我正在使用来自 Component Owl 的 BetterListView。在 listView 中有 3 列，名称、时间和进度。如果列表中存在，用户可以选择其中的任何项目。

现在的问题是，我想在列表视图项中添加一个进度条。问题：如何使用 Component Owl 的 BetterListView 来做到这一点？！我在描述中没有发现任何事情要做。

# android - 使用 webserviceX 的 Android 货币转换器返回 null

> ID：16197503
> 
> 赞同：0
> 
> 时间：2013-04-24T16:36:29.613
> 
> 标签：android, web-services, converter, currency

我们正在尝试使用[http://www.webserviceX.NET/CurrencyConvertor.asmx](http://www.webserviceX.NET/CurrencyConvertor.asmx)上的 Web 服务制作货币转换器 我们已经到处搜索我们的问题的答案，但即使是其他用户的相同问题的解决方案也不起作用对我们来说，我们不知道该怎么做。问题是我们的结果一直为空......这是我们的代码：

```
package com.example.ws;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {

    TextView tvResult;
    Button btnConvert;

    final String NAME_SPACE = "http://www.webserviceX.NET/";
    String URL = "http://www.webserviceX.NET/CurrencyConvertor.asmx";
    final String METHOD_NAME = "ConversionRate";
    final String SOAP_ACTION = "http://www.webserviceX.NET/ConversionRate";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tvResult = (TextView) findViewById(R.id.tvPretvoreniIznos);

        btnConvert = (Button) findViewById(R.id.btnPretvori);

        btnConvert.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                SoapObject request = new SoapObject(NAME_SPACE, METHOD_NAME);

                PropertyInfo propInfo = new PropertyInfo(); 
                propInfo.name = "FromCurrency"; 
                propInfo.type = PropertyInfo.STRING_CLASS;
                propInfo.setValue("USD");

                PropertyInfo propInfo2 = new PropertyInfo();
                propInfo2.name = "ToCurrency";
                propInfo2.type = PropertyInfo.STRING_CLASS;
                propInfo2.setValue("EUR");

                request.addProperty(propInfo);
                request.addProperty(propInfo2);

                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

                envelope.setOutputSoapObject(request);
                envelope.dotNet = true;

                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                try {
                    androidHttpTransport.call(SOAP_ACTION, envelope);

                    SoapPrimitive resultsRequestSOAP = (SoapPrimitive) envelope.getResponse();

                    tvResult.setText(resultsRequestSOAP.toString());

                } 
                catch (Exception e) {
                    tvResult.setText(e.getMessage());

                }

            }
        }); 
    }
} 
```

我们发现其他人以前也遇到过这个问题，并且简单的解决方案对他们有用，我们尝试了所有方法，但没有成功。

我在 AsyncTask 中进行了网络活动，但没有成功。这是代码：

```
package com.example.ws;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {

    TextView tvResult;
    Button btnConvert;

    final String NAME_SPACE = "http://www.webserviceX.NET/";
    String URL = "http://www.webserviceX.NET/CurrencyConvertor.asmx";
    final String METHOD_NAME = "ConversionRate";
    final String SOAP_ACTION = "http://www.webserviceX.NET/ConversionRate";
    String res;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tvResult = (TextView) findViewById(R.id.tvPretvoreniIznos);
        btnConvert = (Button) findViewById(R.id.btnPretvori);
        btnConvert.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                new convert().execute();

            }
        });
    }

    public class convert extends AsyncTask<String, Void, String> {

        SoapObject result = null;

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub

            SoapObject request = new SoapObject(NAME_SPACE, METHOD_NAME);
            PropertyInfo propInfo = new PropertyInfo();
            propInfo.name = "FromCurrency";
            propInfo.type = PropertyInfo.STRING_CLASS;
            propInfo.setValue("USD");

            PropertyInfo propInfo2 = new PropertyInfo();
            propInfo2.name = "ToCurrency";
            propInfo2.type = PropertyInfo.STRING_CLASS;
            propInfo2.setValue("EUR");

            request.addProperty(propInfo);
            request.addProperty(propInfo2);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);

            envelope.setOutputSoapObject(request);
            envelope.dotNet = true;

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

            try {
                 androidHttpTransport.call(SOAP_ACTION, envelope);

                 SoapPrimitive resultsRequestSOAP = (SoapPrimitive) envelope.getResponse();

                 res = resultsRequestSOAP.toString();

            } catch (Exception e) {
                tvResult.setText(e.getMessage());
            }

    return null;
        }

        protected void onPostExecute(String r) {
            String res = r;
            tvResult.setText(res);

        }
    }
} 
```

你能检查一下我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-28T19:38:41.997

这篇文章有2年了，但我找到了解决问题的方法。您有两个错误，一个是您没有覆盖 onPostExecute 方法；另一个是，您必须使用全局“String res”变量。所以代码必须是：

```
@Override
protected void onPostExecute(String r) {
    tvResult.setText(res);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:45:14.920

您正在尝试访问主网络（UI 线程）。这不再被允许，从上面开始 Honeycomb。您可以选择在`AsyncTask`. 请参阅此[SO question](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception/6343299#6343299)中接受的答案。

# android - DragSortListView 项目消失 Android

> ID：16197504
> 
> 赞同：0
> 
> 时间：2013-04-24T16:36:31.247
> 
> 标签：android, drag-and-drop, android-listview

我正在使用这个[库](https://github.com/bauerca/drag-sort-listview)。这个 ListView 的 Item 包含 ImageView 和另一个自定义 View，其中包含很多 TextView。浮动任何项目时 - 自定义视图消失，项目背景变为黑色，但 ImageView 仍然可见，没有任何更改。这是一个问题：我如何直接访问该自定义视图，例如，在浮动时使文本变为红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T05:30:55.073

[在他们在此处](https://github.com/bauerca/drag-sort-listview#xml-attributes)提供的文档中，您可以找到该属性：

> float_background_color

使用“ *DragSortListView* ”的此配置，您可以在内容浮动时更改颜色，例如：

```
<?xml version="1.0" encoding="utf-8"?>
<com.mobeta.android.dslv.DragSortListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:dslv="http://schemas.android.com/apk/res-auto"
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingTop="0dp"
    android:paddingBottom="0dp"
    android:paddingLeft="10dp"
    android:layout_margin="10dp"
    android:dividerHeight="3dp"
    android:divider="@color/blue_light"
    android:fastScrollEnabled="true"
    dslv:drag_enabled="true"
    dslv:collapsed_height="2dp"
    dslv:drag_scroll_start="0.33"
    dslv:max_drag_scroll_speed="0.5"
    dslv:float_alpha="0.2"
    dslv:slide_shuffle_speed="0.3"
    dslv:track_drag_sort="false"
    dslv:use_default_controller="true"
    dslv:drag_handle_id="@id/drag_handle"
    dslv:sort_enabled="true"
    dslv:remove_enabled="true"
    dslv:drag_start_mode="onDown"
    dslv:remove_mode="flingRemove"
    dslv:float_background_color="@color/blue_light" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T17:38:07.233

使用此代码（取自[https://github.com/bauerca/drag-sort-listview/issues/86](https://github.com/bauerca/drag-sort-listview/issues/86)）：

```
SimpleFloatViewManager simpleFloatViewManager = new SimpleFloatViewManager(mDragSortListView);
simpleFloatViewManager.setBackgroundColor(Color.TRANSPARENT);
mDragSortListView.setFloatViewManager(simpleFloatViewManager); 
```

# unix - SSH 是标准 unix 包的一部分吗？

> ID：16197507
> 
> 赞同：-2
> 
> 时间：2013-04-24T16:36:48.850
> 
> 标签：unix, ssh

SSH - 安全外壳在所有类 Unix 操作系统上运行，但最初它是标准 Unix 包的一部分吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:38:07.677

不，它直到很久以后（1995 年）才出现，unix 是从 1969 年开始的。

[http://en.wikipedia.org/wiki/Secure_Shell#Version_1.x](http://en.wikipedia.org/wiki/Secure_Shell#Version_1.x)

它最初是作为免费软件发布的：

> SSH 的目标是取代早期的 rlogin、TELNET 和 rsh 协议，这些协议既不提供强身份验证，也不保证机密性。Ylönen 于 1995 年 7 月将他的实现作为免费软件发布，该工具迅速流行起来。

# php - 正则表达式匹配特定的数字组合模式

> ID：16197513
> 
> 赞同：2
> 
> 时间：2013-04-24T16:37:09.970
> 
> 标签：php, regex

我正在寻找在 php 中创建一个从以下格式获取数据的正则表达式：

```
"1,2,3;7,1,3;1" returns an $matches array with "(1,2,3,7,1,3,1)"

"1" returns an $matches with "(1)"

"1;1;3;5;7;10;999" returns an $matches array with "(1,1,3,5,7,10,999)"

"1,1,1;2,5;3,4" doesn't pass since numbers are repeating within semicolon boundaries

"2,3,4;5,;" doesn't pass since it doesn't satisfy the format. 
```

（示例中的引号是为了使它们更易于阅读；它们不应出现在实际结果中。）

格式是用逗号或分号分隔的数字，在分号内它们不会相互重复。***它不应该接受任何其他格式。***

我试过`/(^(\d{1,3})$)|(([0-9]+)([,|;]{1}[0-9]+)+)/`了，但没有用。我也试过`/[0-9]+([,|;]{1}[0-9]+)+/`，但也没有用。当我得到 $matches 数组时，它没有我需要的值，如上所述。

我在**PHP 5.2**中这样做。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:59:46.177

这个特殊的问题有太多的逻辑，正则表达式不实用；这就是您可以使用常规代码解决它的方法：

```
// reduction function - keeps merging comma separated arguments
// until there's a duplicate or invalid item
function join_unique(&$result, $item)
{
    if ($result === false) {
        return false;
    }

    $items = explode(',', $item);
    $numbers = array_filter($items, 'is_numeric');

    if (count($items) != count($numbers)) {
        return false;
    }

    $unique = array_unique($numbers);

    if (count($unique) != count($numbers)) {
        return false;
    }

    return array_merge($result, $numbers);
}

// main function - parse a string of comma / semi-colon separated values
function parse_nrs($str)
{
    return array_reduce(explode(';', $str), 'join_unique', array());
}

var_dump(parse_nrs('1,2,3;7,1,3;1'));
var_dump(parse_nrs('1'));
var_dump(parse_nrs('1;1;3;5;7;10;999'));
var_dump(parse_nrs('1,1,1;2,5;3,4'));
var_dump(parse_nrs('2,3,4;5,;')); 
```

输出：

```
array(7) {
  [0]=>
  string(1) "1"
  [1]=>
  string(1) "2"
  [2]=>
  string(1) "3"
  [3]=>
  string(1) "7"
  [4]=>
  string(1) "1"
  [5]=>
  string(1) "3"
  [6]=>
  string(1) "1"
}
array(1) {
  [0]=>
  string(1) "1"
}
array(7) {
  [0]=>
  string(1) "1"
  [1]=>
  string(1) "1"
  [2]=>
  string(1) "3"
  [3]=>
  string(1) "5"
  [4]=>
  string(1) "7"
  [5]=>
  string(2) "10"
  [6]=>
  string(3) "999"
}
bool(false)
bool(false) 
```

也可以看看：[`array_reduce()`](http://php.net/array_reduce) [`array_unique()`](http://php.net/array_unique)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:56:51.153

一步完成是不可能的。首先，您需要检查在分号边界内重复数字的要求，然后如果通过检查，则拆分字符串。

例如：

```
if (!preg_match('/\b(\d+),[^;]*\b\1\b/', $string)) {
    $matches = preg_split('/[,;]/', $string);
} else {
    $matches = NULL;
} 
```

ideone：http: [//ideone.com/Y8xf1N](http://ideone.com/Y8xf1N)

# ruby - 如何将方法传递给 instance_eval？

> ID：16197514
> 
> 赞同：1
> 
> 时间：2013-04-24T16:37:11.890
> 
> 标签：ruby, metaprogramming, instance-eval

我想`instance_eval`上这堂课：

```
class A
  attr_reader :att
end 
```

传递这个方法`b`：

```
class B
  def b(*args)
    att
  end
end 
```

但这正在发生：

```
a = A.new
bb = B.new
a.instance_eval(&bb.method(:b)) # NameError: undefined local variable or method `att' for #<B:0x007fb39ad0d568> 
```

什么时候`b`是一个块它起作用，但`b`作为一种方法不起作用。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:00:49.177

目前尚不清楚您的目标是什么。您可以通过在模块中定义方法并将模块包含在每个类中轻松地在类之间共享方法

```
module ABCommon
  def a
    'a'
  end
end

class A
  include ABCommon
end

Anything = Hash
class B < Anything
  include ABCommon

  def b(*args)
    a
  end

  def run
    puts b
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T11:55:09.963

这个答案没有按照要求使用真正的方法，但我不需要返回 a`Proc`或 change `A`。这是一个 DSL，`def_b`应该有一个对域有意义的名称，例如`configure`，并且它更有可能在模块或基类中定义。

```
class B
  class << self
    def def_b(&block)
      (@b_blocks ||= []) << block
    end

    def run
      return if @b_blocks.nil?
      a = A.new
      @b_blocks.each { |block| a.instance_eval(&block) }
    end
  end

  def_b do
    a
  end
end 
```

它接受多个定义。它可以只接受一个像这样的定义：

```
class B
  class << self
    def def_b(&block)
      raise "b defined twice!" unless @b_block.nil?
      @b_block = block
    end

    def run
      A.new.instance_eval(&@b_block) unless @b_block.nil?
    end
  end

  def_b do
    a
  end
end 
```

# onclick - Google Apps 脚本 onclick 事件在 mac 上的 firefox 20 中不起作用。不能将给定对象用作弱映射键

> ID：16197515
> 
> 赞同：0
> 
> 时间：2013-04-24T16:37:11.820
> 
> 标签：onclick, google-apps-script, google-drive-api, onclicklistener

我的 Google Apps Script 网络应用程序停止工作。

每当我单击任何具有 onclick 属性的元素时，都会收到以下错误消息： **[11:27:44.243] cannot use the given object as a weak map key**

有什么解决方法吗？如何在没有 onclick 事件的情况下获得用户的响应？

**我的代码：** 请注意，我正在尝试使用两种方式添加 onclick 事件，在 JavaScript 中以编程方式和使用 HTML。

var by = document.getElementById("yes"); by.addEventListener('click', submitResponse,false);

这个问题作为谷歌应用脚​​本问题提交： [http ://code.google.com/p/google-apps-script-issues/issues/detail?id=2625](http://code.google.com/p/google-apps-script-issues/issues/detail?id=2625)

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T20:53:28.800

由于这是 Apps Script 的公认问题，因此 Stack Overflow 中无法提供太多内容。

这是更多上下文，这已被[破坏](https://code.google.com/p/google-caja/issues/detail?id=1688)，现在已在 Caja 中修复。此修复应在几天后反映在 Apps 脚本中。

# java - 在 WSO2 GREG 中使用 SchemaFilter 的异常

> ID：16197519
> 
> 赞同：-1
> 
> 时间：2013-04-24T16:37:20.280
> 
> 标签：java, xsd, wso2, wso2greg

我得到了这个例外

```
 at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisO
peration.java:413) ~[axis2_1.6.1-wso2v7.jar:na]
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(Out
InAxisOperation.java:224) ~[axis2_1.6.1-wso2v7.jar:na]
Caused by: org.apache.axiom.om.OMException: Stream Errorjava.io.IOException: Bad
 chunk size:
    at org.apache.axiom.attachments.Attachments.<init>(Attachments.java:242)
 ~[axiom_1.2.11-wso2v3.jar:na]
    at org.apache.axis2.builder.BuilderUtil.createAttachments(BuilderUtil.ja
va:594) ~[axis2_1.6.1-wso2v7.jar:na]
    at org.apache.axis2.builder.BuilderUtil.createAttachmentsMap(BuilderUtil
.java:545) ~[axis2_1.6.1-wso2v7.jar:na]
    at org.apache.axis2.builder.MIMEBuilder.processDocument(MIMEBuilder.java
:39) ~[axis2_1.6.1-wso2v7.jar:na]
    at org.apache.axis2.transport.TransportUtils.createDocumentElement(Trans
portUtils.java:179) ~[axis2_1.6.1-wso2v7.jar:na]
    at org.apache.axis2.transport.TransportUtils.createSOAPMessage(Transport
Utils.java:145) ~[axis2_1.6.1-wso2v7.jar:na]
Caused by: java.io.IOException: Bad chunk size:
    at org.apache.commons.httpclient.ChunkedInputStream.getChunkSizeFromInpu
tStream(ChunkedInputStream.java:306) ~[commons-httpclient_3.1.0-wso2v2.jar:na]
    at org.apache.commons.httpclient.ChunkedInputStream.nextChunk(ChunkedInp
utStream.java:221) ~[commons-httpclient_3.1.0-wso2v2.jar:na]
    at org.apache.commons.httpclient.ChunkedInputStream.read(ChunkedInputStr
eam.java:146) ~[commons-httpclient_3.1.0-wso2v2.jar:na]
    at java.io.FilterInputStream.read(FilterInputStream.java:83) ~[na:1.7.0_
04]
    at org.apache.commons.httpclient.AutoCloseInputStream.read(AutoCloseInpu
tStream.java:88) ~[commons-httpclient_3.1.0-wso2v2.jar:na]
    at java.io.FilterInputStream.read(FilterInputStream.java:83) ~[na:1.7.0_
04]
org.wso2.carbon.governance.api.exception.GovernanceException: Error in retrievin
g governance artifact by path. path: /trunk/schemas/com/mycorp/xmlns/common/faul
t/v1/common_fault_v1.2.xsd.
    at org.wso2.carbon.governance.api.util.GovernanceUtils.retrieveGovernanc
eArtifactByPath(GovernanceUtils.java:805)
    at org.wso2.carbon.governance.api.schema.SchemaManager.getAllSchemas(Sch
emaManager.java:385)
    at org.wso2.carbon.governance.api.schema.SchemaManager.findSchemas(Schem
aManager.java:351)
    at wso2client.SchemaDAO.getReusableSchemas(SchemaDAO.java:62) 
```

当我在我的类 wso2client.SchemaDAO 中运行以下代码时：

```
public static List<models.domain.Schema> getReusableSchemas() {
    List<models.domain.Schema> domainSchemas = null;
    try {
        registry = Util.initialize();
        governanceRegistry = Util.getGovernanceRegistry(registry);

        // starting with the schema manager created with governanceRegistry
        schemaManager = new SchemaManager(governanceRegistry);

        // get schemas with attribute "creator" == "yyy"
        List<Schema> schemas = Arrays.asList(
            schemaManager.findSchemas(new ReusableSchemaFilter())
        );

        System.out.println("Number of matches:" + schemas.size());
        domainSchemas = DTOMapper.Wso2Schemas2DomainSchemas(schemas);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    return domainSchemas;
}

private static class ReusableSchemaFilter implements SchemaFilter {

    @Override
    public boolean matches(Schema wso2Schema) throws GovernanceException {
        boolean schemaIsReusable = false;
        // in order to read the properties (not attributes!) of the schema I need to retrieve the resource.
        try {
            Resource resource = governanceRegistry.get(wso2Schema.getPath());

            boolean isDeprecated = "Deprecated".equals(wso2Schema.getLifecycleState());
            boolean isCanonical = "canonicalInformation1".equals(resource.getProperty("informationModelRelation"));
            schemaIsReusable = (isCanonical && !isDeprecated);
        } catch (RegistryException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return schemaIsReusable;
    }

} 
```

你知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:11:05.003

我改变了过滤器如下：

```
private static class ReusableSchemaFilter implements SchemaFilter {

    @Override
    public boolean matches(Schema wso2Schema) throws GovernanceException {
        boolean schemaIsReusable = false;
        // in order to read the properties (not attributes!) of the schema I need to retrieve the resource.
        try {
            //Resource resource = governanceRegistry.get(wso2Schema.getPath());

            boolean isDeprecated = "Deprecated".equals(wso2Schema.getLifecycleState());
            boolean isCanonical = "canonicalInformation1".equals(wso2Schema.getAttribute("informationModelRelation"));
            schemaIsReusable = (isCanonical && !isDeprecated);
        } catch (RegistryException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return schemaIsReusable;
    }

} 
```

换句话说，我在 WSO2 Schema 类上使用了 getAttribute 而不是使用 Resource 类的 getProperty，我没有得到任何异常。

我仍然对为什么可以使用 getAttribute 方法检索 Schema 的属性值感到困惑。不能使用 setAttribute 方法来设置相同的属性。为此，您需要使用 setProperty。

# .net - 如何使 VB .NET 的 AND 充当 &&

> ID：16197526
> 
> 赞同：0
> 
> 时间：2013-04-24T16:37:36.157
> 
> 标签：.net, vb.net, bitwise-operators

我今天与一位同事讨论了 VB .NET 和 C# 之间的一些差异。他指出 && 充当按位运算符，而 VB .NET 的 AND 并不总是这样做。为了演示我们输入了一些代码，使用 VB 这应该可以工作，但不能。

```
Dim a As Draw.Bitmap
Dim b As Draw.Bitmap
If (Not a Is Nothing) And (Not b Is Nothing) Then MsgBox("bang")
' in the above example both NOTs cause the "true" statement to become false, it should       
'trigger the Msgbox 
```

我试图想出一种方法来使上述陈述“起作用”。ANDALSO 对我不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T13:22:02.083

这样做的唯一方法是修改逻辑以测试这两个实例，如果您需要检查两者是否都是某物或两者都不是。

试试这个例子：

```
 Dim oStart As New Object
 Dim oStop As New Object

 If (oStart IsNot Nothing) And (oStop IsNot Nothing) Then
     MessageBox.Show("Result1")
 ElseIf (oStart Is Nothing) And (oStop Is Nothing) Then
     MessageBox.Show("Result2")
 End If 
```

当您运行它时，您应该会看到一个显示`Result1`. 现在，如果您要将声明更改为：

```
Dim oStart As Object
Dim oStop As New Object 
```

反之亦然，那么您将看不到任何一个消息框，因为这两个条件都不成立。

如果您随后将声明更改为：

```
Dim oStart As Object
Dim oStop As Object 
```

然后您应该会看到一个显示`Result2`.

`AND`发生这种情况是因为只有当等式两边都为真时，逻辑才会返回真。为了完成您在上面尝试做的事情，测试双方是否有或没有，然后您需要两次检查以确保`AND`结果的双方都是真实的。

# jquery - 将父母的悬停应用于jquery ui自动完成子项

> ID：16197534
> 
> 赞同：2
> 
> 时间：2013-04-24T16:38:10.763
> 
> 标签：jquery, hover, mouseevent, parent-child, jquery-autocomplete

我处于类似情况，我的另一个问题[阻止 datepicker 触发父 mouseleave](https://stackoverflow.com/questions/16195454/prevent-datepicker-from-triggering-parent-mouseleave/16196098?noredirect=1#16196098)，但该解决方案似乎不适用于 jQuery UI 自动完成。

悬停如何也适用于自动完成子项？换句话说，如果有人`mouseenter`在自动完成建议上，`#hoverMe`应该保持打开状态。此外，关于如何处理`select`外部选择`#hoverMe`同时保持`#hoverMe`显示直到`mouseenter`重新进入的建议/代码会很棒！

[http://jsfiddle.net/Kzp87/](http://jsfiddle.net/Kzp87/)

**html**

```
<div id="hoverAnchor">hover me</div>
<div id="hoverMe" style="display:none">arbitrary text
    <input type="text" id="autocompletor"></div>
</div> 
```

**js**

```
$(document).ready(function () {
    var availableTags = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL",
      "ColdFusion",
      "Erlang",
      "Fortran",
      "Groovy",
      "Haskell",
      "Java",
      "JavaScript",
      "Lisp",
      "Perl",
      "PHP",
      "Python",
      "Ruby",
      "Scala",
      "Scheme"
    ];

    $("#autocompletor").autocomplete({
        source: availableTags
    });
    var _enter = false;
    $("#hoverAnchor").add($("#hoverMe")).mouseenter(function () {
        if (!_enter) {
            $("#hoverMe").stop(true, false).animate({
                height: 'toggle',
                opacity: 'toggle'
            }, 200);
        }
        _enter = true;
    }).mouseleave(function () {
        _enter = false;
        $("#hoverMe").stop(true, false).animate({
            height: 'toggle',
            opacity: 'toggle'
        }, 200);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:08:29.350

做这样的事情怎么样：

```
$(document).ready(function () {
    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"];

    var _enter = false;
    $("#autocompletor").autocomplete({
        source: availableTags,
        open: function (event, ui) {
            //in the event someone types into the input as #hoverMe is closing, this will prevent the list from showing
            if (!_enter) $('.ui-autocomplete').hide();
        }
    });

    $("#hoverAnchor").add($("#hoverMe")).mouseenter(function () {
        if (!_enter) {
            $("#hoverMe").stop(true, false).animate({
                height: 'toggle',
                opacity: 'toggle'
            }, 200);
        }
        _enter = true;
    }).mouseleave(function () {
        if (!$('.ui-autocomplete').is(':visible') && _enter) { //check if autocomplete is open
            $("#hoverMe").stop(true, false).animate({
                height: 'toggle',
                opacity: 'toggle'
            }, 200);
            _enter = false;
        }
    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/Kzp87/3/](http://jsfiddle.net/dirtyd77/Kzp87/3/)

基本上，列表会显示`#hoverAnchor`并将一直显示，直到鼠标进入并离开`input`额外的时间（但是，我们总是可以更改它）。我使用[`open-event`](http://api.jqueryui.com/autocomplete/#event-open)来防止列表显示是否`#hideMe`不可见。希望这会有所帮助，如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:06:01.290

如果您希望当您将鼠标悬停在选项上时自动完成不会消失，您可以使用它：

```
$("ul.ui-autocomplete").appendTo($("div#hoverMe")) 
```

这会将带有选项的列表附加到可悬停的 div 中。不幸的是，默认情况下 ul 的父元素是文档，因此不应用悬停。

一旦选择了一个选项，这将导致自动完成消失。

# javascript - 如何创建使用 4 个图像而不是文本进行导航的 JQuery 内容滑块？

> ID：16197537
> 
> 赞同：3
> 
> 时间：2013-04-24T16:38:16.500
> 
> 标签：javascript, jquery, slider, slideshow

我有带有数字的图像。这些数字是1-4。我想以数字方式放置它们，当用户点击 1 时，我希望他们转到幻灯片 1，如果他们点击 2，则点击幻灯片 2。这也需要有滑动效果。

我在下面使用这个特定的 javascript 代码作为左右选项，但我不确定我是否可以将其重新用于我的目的：

HTML 将类似于：

```
<img src="#" class="image_one">
<img src="#" class="image_two">
<img src="#" class="image_three">
<img src="#" class="image_four">

<div class="content_for_image_One" id="slide1">
You see this when you click on image 1
</div>

<div class="content_for_image_two" id="slide2">
You see this when you click on image 2
</div>

<div class="content_for_image_three" id="slide3">
You see this when you click on image 3
</div>

<div class="content_for_image_four" id="slide4">
You see this when you click on image 4
</div>

<script type="text/javascript">
            $(document).ready(function () {

                var $sliderMask = $('#slider_mask');
                var $slideContainer = $('#slide_container');

                var $slides = $slideContainer.find('.slide');

                var slideCount = $slides.length;
                var slideWidth = $sliderMask.width();

                $slideContainer.width(slideCount * slideWidth);
                $slides.width(slideWidth);

                var currentSlide = 0;

                function animate() {
                    $slideContainer.stop().animate({ marginLeft: -(currentSlide * slideWidth) + 'px' }, 'slow');
                }

                $('#left_button').on('click', function () {
                    currentSlide = (currentSlide - 1 + slideCount) % slideCount;
                    animate();
                });

                $('#right_button').on('click', function () {
                    currentSlide = (currentSlide + 1) % slideCount;
                    animate();
                });

                $('#click_left').on('click', function () {
                    currentSlide = (currentSlide - 1 + slideCount) % slideCount;
                    animate();
                });

                $('#click_right').on('click', function () {
                    currentSlide = (currentSlide + 1) % slideCount;
                    animate();
                });

            });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T15:41:11.087

您提供的 html 不适合您的代码，但假设您有以下 html：

```
<div id="slidesWrapper">

    <div id="slidesContainer">

        <div class="slide"><!-- your html --></div>
        <div class="slide"><!-- your html --></div>
        <div class="slide"><!-- your html --></div>
        <div class="slide"><!-- your html --></div>

    </div>

</div>

<div id="thumbnails">
    <img src="#" class="thumb" />
    <img src="#" class="thumb" />
    <img src="#" class="thumb" />
    <img src="#" class="thumb" />
</div> 
```

使用以下CSS：

```
#slidesWrapper {
    width: 1000px;
    height: 400px;
    overflow: hidden;
    position: relative;
}

#slidesContainer {
    width: auto;
    position: aboslute;
}

.slide {
    float: left;
    height: 400px;
} 
```

你可以使用类似的东西：

```
(function($){
    $(function() {
        var wrapper = $('#slidesWrapper'),
            container = $('#slidesContainer'),
            slides = container.children(),
            thumbs = $('#thumbnails').children();

        container.css('left', '0');

        thumbs.click(function() {
            var index = $('thumbnails').children().index(this);

            container.stop().animate({
                left: '-' + slides.eq(index).position().left + 'px'
            }, 1000);
        });
    });
})(jQuery); 
```

虽然它没有经过测试，但我不太明白你想要什么。如果您有一个带有幻灯片的包装器，并且只有一个可见，固定宽度和高度，则此示例适合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-16T16:07:22.977

```
function next()
{
var mar=$("#img_ul").css("margin-left");
var nm=mar.replace("px","");
if(nm==0)
{
  $("ul").animate({"marginLeft":"-500px"},"slow");
}
else if(nm>0 || nm!=-2000)
{
  nm=nm-500;
  $("ul").animate({"marginLeft":nm+"px"},"slow");
}
else if(nm==-2000)
{
  $("ul").animate({"marginLeft":"0px"},"slow");
}
}

function previous()
{
var mar=$("#img_ul").css("margin-left");
var nm=mar.replace("px","");
if(nm==0)
{
  $("ul").animate({"marginLeft":"-2000px"},"slow");
}
else
{
  nm=+nm + +500;
  $("ul").animate({"marginLeft":nm+"px"},"slow");
}
}
</script>
</head>

<body>

 <div id="slide_wrapper">
 <ul id="img_ul">

 <li>
  <q>
    Learn everything you can, anytime you can, from anyone you can there will always come a time when you will be grateful 
    you did.
  </q>
 </li>

 <li>
  <q>
    Make it simple. Make it memorable. Make it inviting to look at. Make it fun to read.
  </q>
 </li>

 <li>
  <q>
    If plan A fails, remember there are 25 more letters.
  </q>
 </li>

 <li>
  <q>
    Do not go where the path may lead, go instead where there is no path and leave a trail.
  </q>
 </li>

 <li>
  <q>
    A journey of a thousand miles must begin with a single step.
  </q>
 </li>

 </ul>
 </div>

 <input type="button" id="previous" value="Previous" onclick="previous();">
 <input type="button" id="next" value="Next" onclick="next();"> 
```

来自TalkersCode的代码完整教程在这里[http://talkerscode.com/webtricks/content-slider-using-jquery-and-css.php](http://talkerscode.com/webtricks/content-slider-using-jquery-and-css.php)

# c# - 显示远程图像

> ID：16197538
> 
> 赞同：0
> 
> 时间：2013-04-24T16:38:19.907
> 
> 标签：c#, image

我的网络服务器上有一个包含图像的目录，我正在尝试锻炼如何在 Windows 窗体上显示它们。

我正在运行查询以获取所需记录的图像名称，以便完成该部分。然后我如何显示该图像。这是到目前为止的代码：

```
string FltLogoVal = myReader.GetString("Logo");
FltLogo.Text = FltLogoVal;

PictureBox imageControl = new PictureBox();
imageControl.Width = 150;
imageControl.Height = 50;

Bitmap image = new Bitmap("http://www.maydomain.com/airline_logos/").FltLogo.Text;
imageControl.Dock = DockStyle.Fill;
imageControl.Image = (Image)image;

Controls.Add(imageControl); 
```

我在该行所在的位置收到错误消息：

```
Bitmap image = new Bitmap("http://www.mydomain.com/airline_logos/").FltLogo.Text; 
```

错误是：“System.Drawing.Bitmap”不包含“FltLogo”的定义，并且找不到接受“System.Drawing.Bitmap”类型的第一个参数的扩展方法“FltLogo”（您是否缺少 using 指令还是汇编参考？）

我有两个问题：

1.  我是否以正确的方式解决这个问题？
2.  如果是这样，任何人都可以看到我哪里出错了。

如您所见，我对 C# 很陌生，所以请善待任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:42:28.040

您需要将图像名称附加到 URL：

```
Bitmap image = new Bitmap("http://www.maydomain.com/airline_logos/" + FltLogo.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:44:32.047

该错误表明您正在尝试在 Bitmap 构造函数上调用 FltLogo.Text 方法。如果我从您的代码中得到正确的想法，那么您的意思更像是

`Bitmap image = new Bitmap("http://www.maydomain.com/airline_logos/" + FltLogoVal)`

# php - PHP中文件名的正则表达式

> ID：16197539
> 
> 赞同：-6
> 
> 时间：2013-04-24T16:38:29.357
> 
> 标签：php, regex

我需要从定义的模式中提取一些数据，如下：

```
OCC_10020811_R08_2012_13_SYH 
```

我必须从中提取“R08”。我需要 PHP 正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:39:59.993

你真的不需要一个正则表达式。尝试：

```
 $pieces = explode('_', $string);
 echo $pieces[2]; 
```

# css - 这就是 CSS LESS 和 SimpleLESS 的工作方式吗？

> ID：16197540
> 
> 赞同：-1
> 
> 时间：2013-04-24T16:38:31.193
> 
> 标签：css, less

我做了很多前端工作，并且正在考虑学习 CSS LESS，但在学习它的中途，意识到它可能不像我认为的那样工作，并且可能无法帮助我。所以我认为下面是 CSS LESS 的工作原理，请用过它的人确认一下吗？

> CSS LESS 使用 SimpLESS 编译器工作，并通过实现编程元素使初始 css 编码过程更加容易。但是，在上传css代码之前，必须先将动态的.less格式转换成普通的.css格式，上传到服务器后，只能作为静态的.css文件。

以上是正确的吗？我问是因为我使用了很多已经创建了大部分样式表的 wordpress 网站和主题，如果我必须将 .less 格式编译为 .css 格式并每次重新上传而不是能够将其用作像 jQuery 这样的动态预加载库，那么我可能无法像以前认为的那样从 CSS LESS 中获得尽可能多的收益。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:46:45.853

LESS 和 SASS 都是旨在帮助创建 CSS 文件的开发和维护阶段的技术。它们的工作方式类似于 Coffee Script 设计用于 javascript 的方式。然而，最后，LESS 和 SASS 最终成为 CSS 文件，就像 Coffee Script 产生普通的旧 js 文件一样。

在任何情况下，都有一些工作流可以自动处理 CSS 文件的编译/保存/上传，以防止该步骤花费额外的时间和您的工作，但不是 - 浏览器默认情况下不理解它们。但是，您可以使用注释中提到的 javascript 实现。

LESS/SASS 有其优势，但对现有主题和样式进行细微调整或自定义可能不一定是其中之一。这并不是说您实际上可能无法从这些技术中获得很多东西，但这超出了您当前问题的范围，甚至不是我目前有资格回答的问题。

# php - 表单POST后PHP失去会话？jQuery 文件上传

> ID：16197544
> 
> 赞同：0
> 
> 时间：2013-04-24T16:38:53.907
> 
> 标签：php, forms, session, jquery-file-upload

我有一个调用页面的表单`upload.php`：

```
<form action="http//path/to/upload.php" method="POST" enctype="multipart/form-data"> 
```

此页面使用 blueimp 的[JQuery File Upload](http://blueimp.github.io/jQuery-File-Upload/)插件，该插件返回一个 JSON 响应，其中包含正在上传的文件的数据。

问题是，对于我网站的内部工作，我绝对需要文件上传器在会话中存储一些信息。但是，如果我`upload.php`直接调用页面，则`session_start()`工作......当被表单调用时，会话丢失并且正在创建一个新会话，从而无法在页面之间共享所需的信息。有什么建议或提示吗？

编辑：显然，带有表单的页面有自己的工作会话。问题是 id 不同并且会话`upload.php`为空。但如果我*直接*调用 upload.php 则不会，在这种情况下会检索到正确的会话！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:41:13.063

在调用表单的页面中`upload.php`，添加`session_start()`为第一行。`.php`如果还没有，将其重命名为。

# autohotkey - 打开右键菜单并选择菜单项的脚本

> ID：16197547
> 
> 赞同：0
> 
> 时间：2013-04-24T16:38:55.983
> 
> 标签：autohotkey

在特定程序中，我想为右键单击光标的当前位置，然后移动光标以选择该菜单上的一个项目，然后再次移动光标以选择子菜单上的一个项目的动作分配一个热键。我已经了解了前两个命令。当我到达mousemove时，无论我输入什么坐标，光标都会射到屏幕的左上角，当我想要它做的是先向右移动100像素然后向上移动60像素，然后再移动100右侧的像素，y 轴上的零像素。显然我误解了一些东西。请指教。

谢谢，艾伦

```
 s::

MouseGetPos

Click right

sleep, 100

MouseMove, 60, -60, 5, R

Sleep, 100

MouseMove, 200, 0, 5, R

MouseClick, L

return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:15:08.893

艾伦，首先，如果可能的话，试试你是否可以使用键盘快捷键。
请检查：控制面板\轻松访问中心\使键盘更易于使用\在键盘快捷键和访问键下划线。这将显示您可以使用的快捷方式。这样，您甚至可以找到菜单的键盘快捷键，而不是使用鼠标位置。

```
^+b:: ; Record the location of the menu at the beginnin with [Shift]+[Ctrl]+b
SoundBeep, 500, 500
ToolTip, Click on the "XYZ" Link
KeyWait, LButton, D
MouseGetPos, xPos, yPos
Send, {Esc}
ToolTip
Return

^b::
MouseClick, Right, xPos, yPos
;Mousemove, 100, 60 R
Send, e : OR WHATEVER Shortcut letter OR.....
Send, {Down 3}{Enter} ; IF you want to use down arrow 3 times to get to the item.
Return 
```

已修改，您必须将鼠标定位在不断变化的菜单位置上。

```
^b::
    MouseClick, Right ; presses where the mouse is located
    ;Mousemove, 100, 60 R
    Send, e : OR WHATEVER Shortcut letter OR.....
    Send, {Down 3}{Enter} ; IF you want to use down arrow 3 times to get to the item.
    Return 
```

如果您可以识别菜单 ID（使用 AHK Windows Spy，请将鼠标放在菜单上并查看“鼠标下方”），您可以使用 controlsend。这将与位置无关，因为 controlsend 将使用菜单 ID 发送信号。如果您告诉我您尝试控制哪个应用程序，我可以查看是否可以使用 controlSend....

哦，顺便说一句，我不知道您使用的是 XP，启用快捷方式说明适用于 Windows 7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:10:14.067

不`Mousemove`应该`MouseMove`取而代之吗？就像[文档](http://www.autoitscript.com/autoit3/docs/functions/MouseMove.htm)中的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-01T04:11:55.380

*   这个 AutoHotkey 脚本，包括用户创建的 AutoHotkey 函数，应该可以满足您的要求。它会自动右键单击程序，然后在后续菜单上选择 3 个项目。

*   该脚本已编写为在 Media Player Classic 上运行，但只需要编辑某些行以使其适用于您的程序 TypeTool 3。您指定一个以逗号分隔的列表，其中包含一个或多个项目，即项目的名称在第一个菜单中选择，在第二个菜单项中选择等等。

*   绝大多数程序使用标准上下文菜单，因此它应该适用于您的程序；这与菜单栏和其他类型的控件/资源形成对比，这些控件/资源在程序之间变化更大。

-

```
;note: requires Acc.ahk library in AutoHotkey\Lib folder
;https://github.com/Drugoy/Autohotkey-scripts-.ahk/blob/master/Libraries/Acc.ahk
;on right of screen right-click Raw, Save target as...

;the currently assigned hotkey is ctrl+q
;e.g. Media Player Classic, open right-click menu, click items
#IfWinActive, ahk_class MediaPlayerClassicW
^q::
WinGet, hWnd, ID, A
WinGetClass, vWinClass, ahk_id %hWnd%
if vWinClass not in MediaPlayerClassicW
Return
CoordMode, Mouse, Screen
MouseGetPos, vPosX2, vPosY2

WinGetPos, vPosX, vPosY, vPosW, vPosH, ahk_id %hWnd%
vPosX := Round(vPosX + vPosW/2)
vPosY := Round(vPosY + vPosH/2)
MouseMove, %vPosX%, %vPosY%

vList = View,On Top,Default
MenuRCSelectItem(vList)
MouseMove, %vPosX2%, %vPosY2%
Return
#IfWinActive

;===============

MenuRCSelectItem(vList, vDelim=",", vPosX="", vPosY="", vDelay=0)
{
DetectHiddenWindows, Off
CoordMode, Mouse, Screen
MouseGetPos, vPosX2, vPosY2
(vPosX = "") ? (vPosX := vPosX2)
(vPosY = "") ? (vPosY := vPosY2)

if !(vPosX = vPosX2) OR !(vPosY = vPosY2)
MouseMove, %vPosX%, %vPosY%
Click right

Loop, Parse, vList, %vDelim%
{
vTemp := A_LoopField
WinGet, hWnd, ID, ahk_class #32768
    if !hWnd
    {
    MsgBox error
    Return
    }

oAcc := Acc_Get("Object", "1", 0, "ahk_id " hWnd)
Loop, % oAcc.accChildCount
if (Acc_Role(oAcc, A_Index) = "menu item")
if (oAcc.accName(A_Index) = vTemp)
if (1, oRect := Acc_Location(oAcc, A_Index), vIndex := A_Index)
break

vPosX := Round(oRect.x + oRect.w/2)
vPosY := Round(oRect.y + oRect.h/2)
MouseMove, %vPosX%, %vPosY%
Sleep %vDelay% ;optional delay
oAcc.accDoDefaultAction(vIndex)
WinWaitNotActive, ahk_id %hWnd%, , 6
    if ErrorLevel
    {
    MsgBox error
    Return
    }
}

MouseMove, %vPosX2%, %vPosY2%
Return
}

;================================================== 
```

# django - Django：循环中的包含标签是否会导致我的渲染缓慢？

> ID：16197549
> 
> 赞同：3
> 
> 时间：2013-04-24T16:39:03.320
> 
> 标签：django

对 Django 来说还是很陌生，担心我走错了路。

我的网站使用“trails”：链接到内容位的小部件组件。我有一个呈现这些轨迹的模板，并且该模板有很多选项（是否显示图像，显示多少单词等）。我使用以下包含标签实现了这一点：

```
@register.inclusion_tag('reviews/review_trail.html')
def review_trail(
    review, 
    coverPosition='left', 
    showLargeHeadings=False, 
    wordsToShow=30, 
    ):
        return {
            'r' : review, 
            'coverPosition': coverPosition, 
            'scoreMode': scoreMode, 
            'showLargeHeadings': showLargeHeadings, 
            'wordsToShow': wordsToShow, 
        } 
```

我在视图中多次使用此函数，通常在这样的循环中：

```
{% for r in reviews %}
    {% review_trail review=r coverPosition="right" %}
{% endfor %} 
```

我发现最近的表现越来越差。我花了一段时间调整静态文件（缓存、组合等）和 SQL 调用（索引、分析等）。查看[分析结果](http://pastebin.com/raw.php?i=y3iP0cLn)，大部分缓慢似乎来自模板渲染。

这种编码对我的应用程序的性能有害吗？我以为我遵循 DRY 原则很聪明，但也许我是在自取其辱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:05:00.620

这将是您的`reviews/review_trail.html`文件：

```
{% macro review_trail(review, coverPosition='right') %}
    {{ review }} ... other stuff to render here, like the cover position
    Our cover position is: {{ coverPosition }}
{% endmacro %} 
```

现在，在您的其他模板中，您只需执行以下操作：

```
{% from 'reviews/review_trail.html' import review_trail %}

{% for r in reviews %}
    {{ review_trail(review=r) }}
{% endfor %} 
```

# php - php变量中的单引号和双引号

> ID：16197550
> 
> 赞同：3
> 
> 时间：2013-04-24T16:39:04.063
> 
> 标签：php, javascript, string, quotes, string-concatenation

如何将此代码与所有单引号和双引号结合起来。我已经尝试了几种组合，但我无法使其工作。这是我最后一次尝试所以请帮忙。

处理长字符串时有什么好的方法？

```
$html .='<a href="" onClick="$.ajax({type: "POST",url: "delete_pic.php",data:{id:"'.$row['id'].'",var:"V"},cache: false});" style="background:url("images/icons/delete.png" 50% -19px no-repeat;width:16px;height:16px;float:left;margin-left:10px;margin-top: 6px;"></a>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:41:15.890

我会将您的样式移动到外部样式表以使其更短，然后在字符串中转义引号，例如 "\"" for "。

```
$html .="<a href=\"\" onClick=\"$.ajax({type: \"POST\",url: \"delete_pic.php\",data:{id:\".$row["\id\"].",var:\"V\"},cache: false});\" class=\"mystyle\"></a>"; 
```

这没有经过测试，因为我没有你的代码:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:47:37.670

最好的解决方案是使用[HEREDOC](http://php.net/heredoc)，它完全消除了在 PHP 级别转义任何引用的需要：

```
$html .= <<<EOL
<a href="onclick('\$.ajax({ etc.....

EOL; 
```

请注意，您仍然会受到您在 heredoc 中嵌入的任何语言的引用需求的约束。但至少您不必担心由于引号不平衡/未转义而导致 PHP 语法错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:44:40.487

我遵循的规则是：php字符串用单引号封装，所以html的属性用双引号。
属性中的任何引号都必须是转义的单引号`\'`

所以：

```
$html .='<a href="" onClick="$.ajax({type: \'POST\',url: \'delete_pic.php\',data:{id:\''.$row['id'].'\',var:\'V\'},cache: false});" style="background:url(\'images/icons/delete.png\' 50% -19px no-repeat;width:16px;height:16px;float:left;margin-left:10px;margin-top: 6px;"></a>'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T16:44:49.497

您可能应该只转义其他双引号内的双引号（如果有意义的话）。:)

```
$html .='<a href="" onClick="$.ajax({type: \"POST\",url: \"delete_pic.php\",data:{id:\"'.$row['id'].'\",var:\"V\"},cache: false});" style="background:url(\"images/icons/delete.png\" 50% -19px no-repeat;width:16px;height:16px;float:left;margin-left:10px;margin-top: 6px;"></a>'; 
```

那（或类似的东西）应该可以工作。

# python - 计算 2 个字典中的所有差异并全部显示

> ID：16197554
> 
> 赞同：4
> 
> 时间：2013-04-24T16:39:12.590
> 
> 标签：python, dictionary, difference, counting

假设我有 2 个字典：

```
A = {'banana':10, 'apple':2, 'pear':5, 'orange':3}  
B = {'banana':7, 'orange':5, 'strawberry':4, 'blueberry':1, 'kiwi':10} 
```

现在，我需要打印这些字典的所有差异并将它们全部显示（即使其中有一个键`A`不在`B`或其他位置），当然还有绝对值，所以结果应该是：

```
c = {'banana':3, 'apple':2, 'pear':5, 'orange':2, 'strawberry':4, 'blueberry':1, 'kiwi':10} 
```

有任何想法吗？我以前看过一些帖子，但只是对这种需求的部分回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T16:45:24.847

使用[`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter)：

```
from collections import Counter

A = {'banana':10, 'apple':2, 'pear':5, 'orange':3}
B = {'banana':7, 'orange':5, 'strawberry':4, 'blueberry':1, 'kiwi':10}

A_Counter, B_Counter = Counter(A), Counter(B)

print((A_Counter - B_Counter) | (B_Counter - A_Counter)) 
```

输出：

```
Counter({'kiwi': 10, 'pear': 5, 'strawberry': 4, 'banana': 3, 'apple': 2, 'orange': 2, 'blueberry': 1}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T16:46:01.100

在 py2x`A.viewkeys() | B.viewkeys()`中，将从`A`&返回键的联合`B`，然后您可以使用 dict 理解来获得所需的结果。

```
In [14]: A = {'banana':10, 'apple':2, 'pear':5, 'orange':3}

In [15]: B = {'banana':7, 'orange':5, 'strawberry':4, 'blueberry':1, 'kiwi':10}

In [16]: {x : abs( A.get(x,0) - B.get(x,0) )  for x in A.viewkeys() | B.viewkeys()}
Out[16]: 
{'apple': 2,
 'banana': 3,
 'blueberry': 1,
 'kiwi': 10,
 'orange': 2,
 'pear': 5,
 'strawberry': 4} 
```

对于 py3x 使用：`A.keys() | B.keys()`

对于 py2x 和 py3x：`set(A).union(B)`

# c++ - 使用对象作为键时保持 std::map 平衡

> ID：16197555
> 
> 赞同：0
> 
> 时间：2013-04-24T16:39:15.133
> 
> 标签：c++, binary-tree, std, stdmap

我正在编写一些代码，其中存储了许多我想根据设定标准取回的对象。所以对我来说，使用带有对象作为键的地图是有意义的。对象将包含“设置标准”的位置。

这是我正在处理的对象类型的简化示例：

```
 class key
    {
         int x,y,w,h;
    }
    class object
    {
       ...
    }
    std::map<key, object, KeyCompare> m_mapOfObjects; 
```

很简单，首先想到的是创建一个这样的比较函数：

```
 struct KeyCompare
    {
       bool operator()(const key &a, const key &b)
       {
            return a.x < b.x || a.y < b.y || a.w < b.w || a.h < b.h;
       } 
    } 
```

但后来我认为这回归真实的机会非常高。所以我认为这会导致树非常不平衡，因此搜索速度很慢。

我主要担心的是，据我了解，std::map 以这种方式使用该函数： if(keyCompare(a,b)) { //left side } else if (keyCompare(b,a)) { // right side } else { //equal } 所以我不能只使用 ax < bx，因为这样任何具有相同 x 的东西都会被认为是相等的，这不是我想要的。我不介意以这种方式订购它，但它的“相等”位我似乎无法在不使其不平衡的情况下解决。

我认为将它们全部相乘是不可以的，原因很明显。

所以我能想出的唯一解决方案是根据信息创建一个“UID”：

```
 typedef long unsigned int UIDType; 
    class key
    {           
        private:
        UIDType combine(const UIDType  a, const UIDType b) 
        {
            UIDType times = 1;
            while (times <= b)
            times *= 10;
            return (a*times) + b;
        } 

        void AddToUID(UIDType number)
        {
            if(number < m_UID)
            {
                m_UID = combine(number, m_UID);
            }
            else
            {
                m_UID = combine(m_UID, number);
            }
        }
        UIDType UID;
        public:
        int x,y,w,h;
        key()
        {
            AddToUID(x);
            AddToUID(y);
            AddToUID(w);
            AddToUID(h);
        }
    }
    struct KeyCompare
    {
       bool operator()(const key &a, const key &b)
       {
            return a.UID < b.UID;
       } 
    } 
```

但这不仅让人觉得有点 hacky，“long unsigned int”还不足以容纳潜在的数字。我*可以*把它放在一个字符串中，但是速度在这里是一个问题，我认为 std::string < 很昂贵。总的来说，虽然我越小可以使这个对象越好。

我想知道是否有人对如何更好地做到这一点有任何建议。也许我需要使用 std::map 以外的东西，或者可能还有另一个重载。或者也许我在这里遗漏了一些明显的东西。我真的觉得我过于复杂了，也许我真的用地图在错误的树上吠叫。

当我写这篇文章时，我突然想到除法是获得“唯一”数字的另一种方式，但也可能等于非常大的数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:44:55.847

您只需要实现一个[*严格的弱排序*](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)，您可以轻松地使用它来实现`std::tie`，它有一个小于比较`operator<`的执行[字典](http://en.wikipedia.org/wiki/Lexicographical_order)比较：

```
#include <tuple>

struct KeyCompare
{
   bool operator()(const key& a, const key& b) const
   {
        return std::tie(a.x, a.y, a.w, a.h) < std::tie(b.x, b.y, b.w, b.h);
   } 
} 
```

如果您没有所需的 C++11 支持，则可以使用`std::tr1::tie`来自`<tr1/tuple>`boost 库的或等效版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:09:36.477

我觉得 juanchopanza 有一个非常好的解决方案，对于那些没有 C++11 支持或 boost 库的人来说

我找到了一个非常简单的解决方案： [为类元素定义字典比较的最简单方法是什么？](https://stackoverflow.com/questions/2500664/whats-the-simplest-way-of-defining-lexicographic-comparison-for-elements-of-a-c?lq=1)

这个解决方案对我的特定问题的工作比元组好一点（因为我也有一个我想考虑的值数组）。但我强烈建议将来考虑元组，我也会。

```
 struct keyCompare
    {
          bool operator()(const key &a, const key&b)
          {   
            if(a.x != b.x) return a.x < b.x;
            if(a.y != b.y) return a.y < b.y;
            if(a.w != b.w) return a.w < b.w;
            if(a.h != b.h) return a.h < b.h;

            return false; //they must be equal 
          }   
    } 
```

感谢 juanchopanza 的回答以及其他任何看过的人

# sqlalchemy - 按列表属性过滤时出现 SQLAlchemy 属性错误

> ID：16197556
> 
> 赞同：2
> 
> 时间：2013-04-24T16:39:24.870
> 
> 标签：sqlalchemy

在搜索和尝试不同的事情之后，我似乎无法弄清楚我在这里做错了什么。我打算用一个服务对象填充 orderServicesFull，该对象填充了由 orderServices 的 serviceID 过滤的数据库数据。

我遇到的问题是我似乎找不到从 orderServices （第二行代码）中提取每个 serviceID 实例的正确语法。

```
orderServices = DBSession.query(ServicesByOrder).filter(ServicesByOrder.orderID == request.GET['orderID']).all()

orderServicesFull = DBSession.query(Services).filter(Services.serviceID == orderServices.serviceID).all() 
```

错误：

```
AttributeError: 'list' object has no attribute 'serviceID' 
```

我试过的：

在我试图解决这个问题时，我首先做了一些打印以了解正在传递的内容。我还查看了一些文档以尝试了解什么是合适的。我什至试过这个......哈哈

```
print("<---DEBUG--->")
    serviceIDs = []
    for i in range(0, len(orderServices)):
        serviceIDs.append(orderServices[i].serviceID)
        print(serviceIDs[i]) 
```

这背后的想法是它是一个简单的列表，我可以更轻松地使用它。我试图使用它而不是 orderServices 列表。你可以猜到这也不起作用。

任何想法或建议将不胜感激。

谢谢你的时间

**！解决了！**

好吧，经过一番折腾和更多的研究，我想出了一个解决方案。它可能没有其他人想出的那么有效，但它确实有效。

我的问题来自于我不知道列表中充满了对象。

```
orderServiceList = DBSession.execute(\
"SELECT s.serviceID, s.serviceName, s.serviceCost "+\
"FROM tblServicesByOrder AS so "+\
"INNER JOIN tblServices AS s "+\
"ON so.serviceID = s.serviceID "+\
"WHERE so.orderID = 1").fetchall()

orderServicesFull = [row for row in orderServiceList] 
```

这样做允许我创建一个包含我需要的数据的字典列表，然后从那里填写我的 orderServicesFull。

我希望这可以帮助其他有同样问题或类似问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:26:46.433

从您的第一个代码片段中，该`orderServices`变量实际上是一个列表。因此，您不能 `orderServices.ID`在第二个查询中使用（您得到的错误解释了这一点）。
您应该能够使用以下`ORM`查询获取所有服务`join`：

```
orderServicesFull = (DBSession.query(Services)
    .join(ServicesByOrder, Services.serviceID == ServicesByOrder.serviceID)
    .filter(ServicesByOrder.orderID == request.GET['orderID'])
    ).all() 
```

*`Services`如果您在and之间定义了（仅一个）关系`ServicesByOrder`，则连接不需要`clause`参数并变为`.join(ServicesByOrder)`*

# opencv - 当尝试使用 Visual Studio 2012 for windows desktop 在 windows 8 64 位上从源代码构建 sikuli 时，cmake 引发以下问题

> ID：16197565
> 
> 赞同：2
> 
> 时间：2013-04-24T16:40:14.437
> 
> 标签：opencv, visual-studio-2012, cmake, tesseract, sikuli

我正在尝试从源代码构建 sikuli，以便将来可以编辑 sikuli 源代码并生成我自己的可执行文件。我安装了必要的软件并按照以下链接中的说明进行操作：

[https://github.com/sikuli/sikuli/blob/develop/build-win32.txt](https://github.com/sikuli/sikuli/blob/develop/build-win32.txt)

我最终遇到以下错误：

```
Tesseract-OCR Data Path: c:/tesseract-2.04/tessdata
Tesseract-OCR Data Path: c:/tesseract-2.04/tessdata
-- Could NOT find PkgConfig (missing:  PKG_CONFIG_EXECUTABLE)
CMake Warning (dev) at c:/OpenCV2.1/OpenCVConfig.cmake:39 (LINK_DIRECTORIES):
  This command specifies the relative path

  as a link directory.

  Policy CMP0015 is not set: link_directories() treats paths relative to the
  source dir.  Run "cmake --help-policy CMP0015" for policy details.  Use the
  cmake_policy command to set the policy and suppress this warning.
Call Stack (most recent call first):
  E:/tsn/sikuli/cmake_modules/FindOpenCV.cmake:77 (include)
  src/main/native/CMakeLists.txt:26 (FIND_PACKAGE)
This warning is for project developers.  Use -Wno-dev to suppress it.

found OpenCVConfig c:/OpenCV2.1/include;c:/OpenCV2.1/include/opencv
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindPack
ageHandleStandardArgs.cmake:97 (message):
  Could NOT find SWIG (missing: SWIG_EXECUTABLE SWIG_DIR)
Call Stack (most recent call first):
  C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindPackageHandleStan
dardArgs.cmake:291 (_FPHSA_FAILURE_MESSAGE)
  C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindSWIG.cmake:67 (FI
ND_PACKAGE_HANDLE_STANDARD_ARGS)
  src/main/native/CMakeLists.txt:28 (FIND_PACKAGE)

-- Configuring incomplete, errors occurred! 
```

PS：我使用的是 Windows 8（64 位），Windows 桌面版 Visual Studio 2012（安装在 C:\Program Files (x86)\Microsoft Visual Studio 11.0 中）及其命令提示符，opencv 2.4，tesseract 2.04 + 英文数据， SWIG、jdk 6 和 cmake 2.8 来构建可执行文件。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T20:03:21.490

将 jdk 1.6 和 swig 的路径添加到系统环境变量中，一切正常

```
jdk path: C:\Program Files (x86)\Java\jdk1.6.0_43\bin;

swig path: C:\swigwin-2.0.9; 
```

# jquery - MVC4 Ajax.ActionLink 中断

> ID：16197569
> 
> 赞同：0
> 
> 时间：2013-04-24T16:40:22.447
> 
> 标签：jquery, ajax, asp.net-mvc-4, partial-views, actionresult

***回复了！！***

~~好的，我对它非常陌生，`MVC4`并且仍处于学习阶段，`Ajax`所以我真的可以在这个方面使用一些帮助....我工作得越多，它就越混乱。：（ 开始了！~~

我有一个用作练习的小应用程序。我的主要关注点是“员工”页面，其中包含一个表格，其中显示了我制作的员工列表。您可以单击新员工查看他们的*关于*部分，显示他们的工作职位和开始日期，然后显示两列（一列用于*编辑*，一列用于*删除*）。关于和*编辑链接工作**得*很好。现在我要做的是获取*删除*链接以拉出一个模块（我构建的）。该模块显示一个. 里面是一个包含所选员工信息的小表格和一个带有两个按钮（*删除*和*`Ajax` *`PartialView``PartialView``Ajax`**取消*）。删除按钮从列表中删除选定的员工，关闭和模块，并用新的员工列表替换旧的员工列表。取消按钮只是关闭模块。几乎一切正常，除了当我点击链接删除另一名员工（不刷新页面）时，我必须点击链接两次（或者在某些情况下，什么都没有发生）。我在这该死的事情上已经有一段时间了。这是一团糟，我认为我没有以最好的方式做到这一点。我已经粘贴了我认为相关的代码（这仍然相当多）。如果您需要更多提供可能的答案，请告诉我〜谢谢。***

 **~~*注意：我已经尝试过使用其他方法`.click()`，但没有一种方法能按照我想要的方式工作。因此，除非您知道执行这些方法的更好方法，否则不要担心尝试建议这些方法。只是为了节省你所有的时间。*~~

**员工控制器：删除**

```
 [HttpGet]
    public ActionResult Delete(int id = 0)
    {
        var model = db.Employees.ToList().Where(m => m.ID == id);
        if (model == null)
        {
            return HttpNotFound();
        }
        return PartialView("_Delete", model);
    }

    [HttpPost, ActionName("Delete")]
    public PartialViewResult DeleteConfirmed(int id = 0)
    {
        Employee update = db.Employees.Find(id);            
        db.Employees.Remove(update);
        db.SaveChanges();
        return PartialView("_Employees", db.Employees.ToList());            
    } 
```

**脚本文件：模块**

```
$(function () {
var openModule = function () {
    $("div[id = 'moduleBG']").attr("style", "display: inline");
    var width = $("div[id = 'body']").width();
    $("div[id = 'delete']").attr("style", "width: " + width + "px");
};

var closeModule = function () {
    $("div[id = 'moduleBG']").attr("style", "display: none");
    return false;
};

var ajaxSubmit = function () {
    $("div[id = 'moduleBG']").attr("style", "display: none");
};

$("a[name = 'module']").on("click", openModule);
$("input[id = 'cancelBtn']").click(closeModule);
$("input[id = 'deleteBtn']").click(ajaxSubmit); 
```

});

**部分视图：_Delete**

```
@model IEnumerable<SiPrac.Models.Employee>

<div id="delete">
<div class="alertHeader">Are you sure you want to delete this?</div>

<table class="emp" style="display: inline-block">
    <tr>
        <th>@Html.DisplayNameFor(model => model.EmployeeName)</th>
        <th>@Html.DisplayNameFor(model => model.Title)</th>
        <th>@Html.DisplayNameFor(model => model.DateStarted)</th>
    </tr>
    @foreach (var item in Model)
    {
        string[] name = item.EmployeeName.Split(' ');
        string first = name[0];
        string last = name[1].Substring(0, 1);
        string full = first + " " + last + ".";

        <tr>
            <td>@full</td>
            <td>@Html.DisplayFor(modelItem => item.Title)</td>
            <td>@String.Format("{0: MM/dd/yyyy}", item.DateStarted)</td>
        </tr>
    }
</table>

@foreach (var item in Model)
{
    using (Ajax.BeginForm("Delete", "Delete", new { id = item.ID },
        new AjaxOptions()
        {
            HttpMethod="post",
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "empData",
            Url = Url.Action("Delete")
        }, new { @id = "submitForm", @method = "post" }))
    {
    <p>
        <input id="deleteBtn" class="btn" type="submit" value="Delete" />
        <input id="cancelBtn" class="btn" type="button" value="Cancel" />
    </p>

    }
}
</div>

@Scripts.Render("~/bundles/Module") 
```

**部分视图：_Employees（这`ActionLink`是在 a 内`foreach`）**

```
@model IEnumerable<SiPrac.Models.Employee>

<div id="empList">
<table class="emp">
    <tr>
        <th>@Html.DisplayNameFor(model => model.EmployeeName)</th>
        <th>@Html.DisplayNameFor(model => model.Title)</th>
        <th>@Html.DisplayNameFor(model => model.DateStarted)</th>
    </tr>
    @foreach (var item in Model)
    {
        // Code to shorten name to just First Name and Last Initial
        // Cleans up the table to display nicely
        string[] name = item.EmployeeName.Split(' ');
        string first = name[0];
        string last = name[1].Substring(0, 1);
        string full = first + " " + last + ".";
        <tr>
            <td>@Html.ActionLink(full, "About", new { item.ID }, new { id = "empName" + item.ID, @class = "normLink" })</td>
            <td>@item.Title</td>
            <td>@String.Format("{0: MM/dd/yyyy}", item.DateStarted)</td>
            <td>@Html.ActionLink("Edit", "Edit", new { id = item.ID }, new { @class = "normLink", @style = "width: inherit" })</td>
            <td>@Ajax.ActionLink("Delete", "Delete", new { id = item.ID },
            new AjaxOptions()
            {
                InsertionMode = InsertionMode.Replace,
                UpdateTargetId = "moduleBG"
            }, new { @class = "normLink", @style = "width: inherit", @name = "module", @method = "get" })
            </td>
        </tr>
    }
</table>

<div id="create">
    <div class="createLink">
        @Html.ActionLink("Add New Employee", "Create", null, new { @style = "width: inherit" })
    </div>
    <div class="clear"></div>
</div>
</div>

@Scripts.Render("~/bundles/Module") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T17:25:18.457

好的，所以我为此工作了似乎很长时间，只是发现答案很简单。我只需要将脚本加载到 _Employees 部分视图中！我想这必须在视图刷新后完成。为了您的观看乐趣，我更新了我的代码。**

# java - 如何从函数将数据检索到我的 jsp 文件中的下拉列表框

> ID：16197572
> 
> 赞同：0
> 
> 时间：2013-04-24T16:40:32.190
> 
> 标签：java, sql, jsp

如何从 SQL 数据库（特别是从列）中检索数据到我的 JSP 文件中的下拉列表框？但我想从 .java 文件中的函数和 JSP 列表框中检索此数据，因此顺序为：

我的 java 文件中的一个函数，它从 sql DB（特别是从列）检索数据并将其显示在我的 jps 列表框中？

这将是java文件中的函数

这是我的代码：

```
public String getc&#95;Condicion(){
    String query = "";

    String c&#95;condicion = new String();
        query = "select C&#95;Condicion&#95;Beca from Bca&#95;Condicion&#95;Beca";
        try{
            st = con.createStatement();
            rs = st.executeQuery(query);

            while (rs.next()){
                c&#95;condicion = rs.getString("C&#95;Condicion&#95;Beca");
               }
        }
        catch(SQLException e){
        System.out.println("Error al obtener los datos: "+e.getMessage());

        }

    return c&#95;condicion;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:32:30.730

你在找这个吗？不过，这可能不是最好的设计。

```
public String[] getcDataCondicion(){
    String query = "";

    String[] cDataCondicion= new String[100];
        query = "select C&#95;Condicion&#95;Beca from Bca&#95;Condicion&#95;Beca";
        try{
            st = con.createStatement();
            rs = st.executeQuery(query);
            int i=0;
            while (rs.next()){
                cDataCondicion[i] = rs.getString("C&#95;Condicion&#95;Beca");
                 i++;
               }
        }
        catch(SQLException e){
        System.out.println("Error al obtener los datos: "+e.getMessage());

        }

    return cDataCondicion;
}

<%  

  YourClass c= new YourClass();
String[] result=c.getcDataCondicion();
%>

<Select>
<%
  for(int i=0;i<result.length;i++){
%>
 <Option>result[i]</ Option>
<% } %>
</select> 
```

# linux-device-driver - 调度中断处理程序

> ID：16197574
> 
> 赞同：1
> 
> 时间：2013-04-24T16:40:54.077
> 
> 标签：linux-device-driver, interrupt-handling

我有一个 Linux 设备驱动程序，它使用中断处理程序来完成它的工作。

如何安排每**X**毫秒调用一次中断处理程序（中断线断开）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:14:42.987

假设您只是为了调试目的而这样做，直到您修复中断线，您可以尝试在该代码重新启用中断之前在内部调用您的 ISR（减去其上下文保存代码`timer_interrupt`）`arch/*/kernel/time.c`。如果您需要比滴答声源更慢的速率，则必须添加一些代码以使其仅触发 Y 个滴答声中的一个。

如果在中断上下文中运行 ISR 不是您的目标，并且您只想让下半部分驱动程序代码定期运行，您可以使用计时器 API 而不是黑客攻击`timer_interrupt`。在这种情况下，您的 ISR 代码不会在中断上下文中执行。

如果您需要比滴答声源更快的速率，您可能需要使用高分辨率计时器。同样，您实际上不会在中断上下文中执行。

[这里](https://export.writer.zoho.com/public/rreginelli/Chapter-5---High-Resolution-Timers-Final1/fullpage)有一个很好的介绍 highres timers 和 timer API 。[`timer_create( )`手册页](http://man7.org/linux/man-pages/man2/timer_create.2.html)中有一个示例用户空间计时器。对于内核空间计时器，您需要`hrtimer_init()`, 和`hrtimer_start()`. [这里](http://www.ibm.com/developerworks/linux/library/l-timers-list/)有一个示例 hrtimer 。为了让它定期工作，我想您只需在每次触发时重置计时器或使用`hrtimer_forward( )`此[SE 帖子](https://stackoverflow.com/questions/13214197/hrtimer-repeating-task-in-the-linux-kernel)中的解决方案。

# hibernate - session.clear() 会在 transaction.commit() 之前的所有持久对象吗？

> ID：16197578
> 
> 赞同：0
> 
> 时间：2013-04-24T16:41:02.203
> 
> 标签：hibernate, orm

这是我的情况：

```
session.beginTransaction();
Note note=new Note();
note.setName("hello");
session.save(note);
session.flush();
session.clear();----will it clear the note object from the session?
transaction.commit(); 
```

对象会保存在数据库中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:27:03.163

我认为应该。不过不确定。

如果您运行代码以查看结果，则更好。

`session.save(note);`射击插件。 `session.flush();session.clear();`正在触发缓冲区中的所有查询（如果有）。 `commit`将`commit`事务发送到数据库。

# java - 如何使用 AES_DECRYPT 更新 jtable

> ID：16197579
> 
> 赞同：0
> 
> 时间：2013-04-24T16:41:02.547
> 
> 标签：java, swing, jtable, aes, defaulttablemodel

我想更新`JTable`没有`AES_ENCRYPT`可以更新和查看数据的数据，但是由于每次我尝试调用此方法时数据都是加密的，因此数据仍然是加密的。我该如何解决这个问题？

```
private void Update_Table(){

     try{
         String sql  = "SELECT ID, AES_DECRYPT(FirstName,  'uk112') "
           + "AS FirstName, AES_DECRYPT( MiddleName,  'uk112') "
           + "AS MiddleName, AES_DECRYPT(LastName,  'uk112') "
           + "AS LastName, DOB, AES_DECRYPT(Gander,  'uk112')"
           + "AS Gander, AES_DECRYPT(Address,  'uk112')"
           + "AS Address, AES_DECRYPT(City,  'uk112' ) "
           + "AS City, AES_DECRYPT(PostCode,  'uk112')"
           + "AS PostCode FROM Customer";
   pst = conn.prepareStatement(sql);
   rs =pst.executeQuery(sql);
   CTable.setModel(DbUtils.resultSetToTableModel(rs));
   pst.close();
   rs.close();
  }
  catch(Exception e){
 JOptionPane.showMessageDialog(null, e);
  }   
  } 
```

每当我尝试调用 Update_Table 方法以更新时，`JTable`就会发生这种情况

![在此处输入图像描述](https://i.stack.imgur.com/bEKw9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T20:05:47.107

它可能*还没有*加密。这是[默认渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)的预期输出。如此处所示[，](https://stackoverflow.com/a/2558031/230513)结果是通过使用数组`toString()`调用产生的。`byte`在您的[自定义渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)中，您可以使用合适的构造函数将数组转换为 a `String`，但您需要指定数据库使用的相同编码。

# asp.net-mvc - 如何在 MVC Asp.net 中使用 JQuery

> ID：16197583
> 
> 赞同：-6
> 
> 时间：2013-04-24T16:41:08.453
> 
> 标签：asp.net-mvc, jquery

目前我在 MVC ASP.NET 中工作。我在 HTTP GET 和 POST 方法中查询 JQUERY 的目的是什么。我在这样的地方找到了一个代码。

```
function checkPromRepNo() {

if (document.getElementById("PromRep1").value.trim() == "")
    document.getElementById('divPromRepDoesNotExist').style.display = 'none';
else {
    var promRepNo = $("#PromRep1").serialize();

    $.ajax({
        type: "POST",
        url: VirualURL + "/Register/ValidatePromRep",
        data: promRepNo,
        cache: false,
        dataType: "json",
        success: function (data) {
            if (data.Message == "false")
                document.getElementById('divPromRepDoesNotExist').style.display = 'block';
            else
                document.getElementById('divPromRepDoesNotExist').style.display = 'none';
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            alert("ERROR");
        }
    });
}
return false;
} 
```

谁能告诉我 JQUERY Ajax 在 MVC 中的主要用途是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:57:32.130

该代码的主要用途是创建一个不会导致页面加载或刷新的 Ajax 请求。此外，它将被异步管理。

换句话说，您可以向服务器发送请求并处理响应，而无需重新加载。

```
url: VirualURL + "/Register/ValidatePromRep" 
```

该 URL 将被路由到控制器，该控制器将接收变量 promRepNo 作为输入并返回 JSON 格式的响应。如果响应成功，则此函数将处理其数据：

```
function (data) {
    if (data.Message == "false")
        document.getElementById('divPromRepDoesNotExist').style.display = 'block';
    else
        document.getElementById('divPromRepDoesNotExist').style.display = 'none';
} 
```

请记住，控制器可以使用 [HttpPost] 标记按类型 (POST) 过滤请求，并使用 HttpContext.Request.IsAjaxRequest() 识别它是 Ajax 请求

# codeigniter - 如何在codeigniter的数组中获取两个日期之间的所有日期

> ID：16197586
> 
> 赞同：2
> 
> 时间：2013-04-24T16:41:12.607
> 
> 标签：codeigniter, date

我有两个日期，我需要使用 Codeigniter 将这两个日期之间的所有日期放在一个数组中。在此先感谢您的帮助，我的意思是这样

```
 $fromDate =$this->input->post('fromDate');
  $toDate = $this->input->post('toDate');
  $allDate = array('all the dates between these two date'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T06:30:05.397

你可以这样做......

```
 $start_date = date('Y-m-d', strtotime($start_date));
        $end_date =  date('Y-m-d', strtotime($end_date));
        $day = 86400; // Day in seconds  
        $format = 'Y-m-d'; // Output format (see PHP date funciton)  
        $sTime = strtotime($start_date); // Start as time  
        $eTime = strtotime($end_date); // End as time  
        $numDays = round(($eTime - $sTime) / $day) + 1;  
        $days = array();  
        for ($d = 0; $d < $numDays; $d++) {  
            $days[] = date($format, ($sTime + ($d * $day)));  
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T08:52:54.283

Venkat 解决方案不适用于包括 DST 从夏季时间更改为冬季时间（-1 小时）的时间段。例如。对于从 2013 年 10 月 1 日到 2013 年 10 月 31 日的给定时间段，添加了两次日期 2013 年 10 月 27 日。一种解决方案是增加一小时或 3600 秒。所以 for 循环中的语句是：

$days[] = date($format, ($sTime + ($d * $day)+ 3600));

# javascript - 将 iCheck（jQuery 插件）应用于动态创建的 CheckBoxes

> ID：16197594
> 
> 赞同：8
> 
> 时间：2013-04-24T16:41:38.440
> 
> 标签：javascript, jquery, jquery-plugins, icheck

我使用出色的[iCheck](http://damirfoy.com/iCheck/)插件在我的表单中设置复选框的样式。

使用该插件，我只需调用`$('input').iCheck()`即可应用所需的外观和功能。

但是，我坚持在`.iCheck()`动态创建的复选框上调用该函数。

在 ajax 调用中，我在成功函数中构建我的复选框，如下所示；这是在一个`$.each`块中，但为了简单起见，我只在语句中包含了代码。

```
var chk = $('<div><input id="' + n.ID + '" type="checkbox" name="lblChk"><label for="' + n.ID + '">' + n.Title + '</label></div>');
el.append(chk); 
```

DOM 树中已经存在`el`id 的 div在哪里，我的对象是否以 JSON 形式返回`container``n`

在构建复选框之后，我`$('#container input').iCheck();`显然打电话给我，除了标准复选框之外我没有什么特别的。我认为这是因为复选框是在`.iCheck()`调用之后动态创建的。但即使在我创建复选框并调用`.iCheck()`结果之后也是一样的。

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-02T14:22:45.510

尝试这个

```
$('#container').iCheck({checkboxClass: 'icheckbox_flat-green',radioClass: 'iradio_flat-green'}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-17T08:44:28.377

还有另一种情况......当iCheck有回调时

此代码不适用于加载 ajax 的输入，因为它是 bind() 的替代品：

```
$('#mycheckbox').on('ifChecked', function(event) {
    alert();
}); 
```

应改为使用委托事件：

```
$(document).on('ifChecked', '#mycheckbox', function(event) {
 alert('done'); 
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-24T17:17:14.600

尝试这个...

```
$('#container').find('input').iCheck(); 
```

你试过检查长度`$('#container input')`吗？我不确定，但 input 不是`container`selector 的直接子代，因此可能无法找到`$('#container input')`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-03T21:51:22.160

好吧，我前段时间遇到了类似的问题，并像这样解决了它：

假设该`el`变量是一个 jQuery 元素，我会将插件 iCheck 的初始化绑定到`el`完全加载，因此：

**此代码应放在 AJAX 附加数据之后**

```
el.ready(function() {
  $('#container input').iCheck({
    checkboxClass: 'icheckbox_flat-green',
    radioClass: 'iradio_flat-green' // If you are not using radio don't need this one.
  });
}); 
```

请记住使代码适应您的 HTML 结构的特殊性。在将元素附加到页面后运行上面的代码，您正在初始化这些新添加元素的 iCheck，但是如果您使用 iCheck 回调，则该插件只有在您正确声明这些回调时才能工作，将事件委托给正如[弗洛林](https://stackoverflow.com/users/1830139/florin)警告的那样，适当的标签。

**这段代码应该放在iCheck第一次初始化**

```
$(document).on('ifChecked', '#mycheckbox', function() {
  $(this).addClass('selected');
});

$(document).on('ifUnchecked', '#mycheckbox', function() {
  $(this).removeClass('selected');
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-17T23:18:42.170

尝试这个：

```
$('input').iCheck({
     checkboxClass: 'icheckbox_flat-blue',
     radioClass: 'iradio_flat-blue'
}); 
```

如果你想从特定的 div 设置试试这个：

```
$('#MyDivId input').iCheck({
      checkboxClass: 'icheckbox_flat-blue',
      radioClass: 'iradio_flat-blue'
}); 
```

检查[http://icheck.fronteed.com/上的文档](http://icheck.fronteed.com/)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-07-05T03:12:19.477

我刚遇到同样的问题，解决方法很简单：调用iCheck方法。

```
var id = some_id;
var one_row = "<tr><td>...<td><td><input type=\"radio\" class=\"minimal\" id=\"" + id + "\" name=\"" + id + "\">radio1</td></tr>";
// add this row to HTML
// call the initialize method
$('#'+id).iCheck({radioClass: 'iradio_minimal-blue'}); 
```

# java - 捕获被调用的方法属于哪个类

> ID：16197595
> 
> 赞同：0
> 
> 时间：2013-04-24T16:41:41.983
> 
> 标签：java, overriding

我的查询是假设我们有多个类假设三个类是这样的：

**请参阅我更新的查询。这就是他们要求的情况。**

```
class MethodContainerA {
    public void display() {
        System.out.println("Display from MethodContainerA");
    }
}

class MethodContainerB extends MethodContainerA {
    public void display() {
        System.out.println("Display from MethodContainerB");
    }
}

class MethodContainerC extends MethodContainerB {

}

public class MethodCallRecognization {
    public static void main(String[] args) {
        MethodContainerC methodContainerC = new MethodContainerC();
        methodContainerC.display();

            // I want to know here
    }
} 
```

我的问题是，调用后我能得到信息`display()`方法是从哪个类调用的。请注意，这个问题不是用于调试目的 - 它是理论上的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:55:18.417

好吧，实际上可能有一种方法可以做到这一点（没有尝试过）：

获取使用的实例的类。执行 getDeclaredMethod 以获取方法。在方法上执行 getDeclaringClass。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:54:37.820

试试这个。

```
public class MethodCallRecognization {
  public static void main(String[] args) {
    MethodContainerC methodContainerC = new MethodContainerC();
    methodContainerC.display();
    // I want to know here
    String className=getClassName(methodContainerC.getClass(), "display") ;
    System.out.println(className);
  }
  public static String getClassName(Class c,String methodName){
       Method m[]=c.getDeclaredMethods();
       for(Method m1:m){
        if(m1.getName().equals(methodName)){
            return c.getName();
        }
       }
       return getClassName(c.getSuperclass(),methodName);

  }
} 
```

如果方法被重载，您还需要检查参数类型而不是名称。但这应该给你的想法。

根据评论这里是更好的版本`getClassName`

```
public static String getClassname(Class c, String methodName){
 try{
  Method m= c.getDeclaredMethod( methodName);
  return c.getName();
}catch(NoSuchMethodException  nse){
   return getClassName(c.getSuperclass(),methodName);
}
} 
```

如果 dsiplay 方法采用参数，则

```
 public class MethodCallRecognization {
      public static void main(String[] args) {
        MethodContainerC methodContainerC = new MethodContainerC();
        methodContainerC.display("" , "");//Suppose it takes String id and String name parameter 
        // I want to know here
         Class[] parametertype={String.class,String.class};
        String className=getClassName(methodContainerC.getClass(), "display", parametertype) ;
        System.out.println(className);
      }
      public static String getClassname(Class c, String methodName, Class[] parametertype){
        try{
           Method m= c.getDeclaredMethod( methodName, parametertype);
           return c.getName();
        }catch(NoSuchMethodException  nse){
          return getClassName(c.getSuperclass(),methodName, parametertype);
       }
      }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T16:43:41.663

您将从 调用`display()`，`MethodContainerC`因此将打印出来`Display from MethodContainerC`。

这就是覆盖的工作方式：如果你想调用超类的方法，你需要`super`从被覆盖的方法中显式调用。否则，您将调用被覆盖的方法。

但是，如果您在 中没有方法`display()`，`MethodContainerC`您将改为调用`MethodContainerB`的显示方法。这是因为继承遵循最近的路径：

*   `MethodContianerA`有方法`display()`...
*   它被`MethodContainerB`...覆盖
*   （被`MethodContianerC`. 覆盖）

如果您删除了最后一步，`MethodContainerB`仍然会覆盖`display()`所有`MethodContainerC`. 该方法的最接近的实现将始终运行。

# java - 地理数据库 - 查找点

> ID：16197611
> 
> 赞同：-2
> 
> 时间：2013-04-24T16:42:35.847
> 
> 标签：java

如果您有一个指定地图上点的地理数据库，您将如何找到落在四个给定点内的点？你将如何实现一种算法，将彼此相邻的球杆点组成半径为 1 英里的圆圈？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:07:21.280

有时候，把它画出来真的很有帮助。

```
| a
|     b
|   x     
|d     c
|--------- 
```

所以每个点都有两个坐标（x，y）。检查一个点是否在 4 个点内的一种简单方法是检查它们的坐标。

为简单起见，假设您知道 a 和 d 的 x 坐标小于 b 和 c 的 x 坐标，并且 a 和 b 的 y 坐标大于 d 的 y 坐标并且C。然后您可以假设如果 x 在这四个点内，则：

```
The x coordinate of x (using x(x) to make it shorter) can be described by
x(x)>=a(x) 
and x(x)>=d(x) 
and x(x)<=b(x) 
and x(x)<=c(x) 
```

类似的逻辑应该适用于 y 坐标。但请注意，有更有效的方法可以做到这一点，我只是试图说明这个问题，希望能更清楚地说明问题。

[此链接](https://stackoverflow.com/questions/6977322/geo-location-api-and-finding-user-within-a-radius)也可能有所帮助，并提供了一种更有效的方式来查看问题。

# javascript - Angularjs 使用 $resource 获取响应的价值

> ID：16197612
> 
> 赞同：3
> 
> 时间：2013-04-24T16:42:36.067
> 
> 标签：javascript, angularjs

我正在尝试使用 获取请求的响应`$resource`，例如我有：

```
angular.module('app').factory('AuthResource', ['$resource', function($resource) {
    return {
        isAuthenticated : function() {
            return $resource('/api/v1/auth/authenticated').query();
        }
    }
}]); 
```

然后在我的控制器中，我正在调用此服务并执行以下操作：

```
console.log(AuthResource.isAuthenticated()); 
```

这不会返回实际结果，它只是一个对象`{'success' : 'true'}`。

相反，它返回：

```
Resource {$resolved: false, $then: function, $get: function, $save: function, $query: function…}
$resolved: true
$then: function (callback, errback) {
success: false
__proto__: Resource 
```

如何获取实际返回的对象？我没有将它应用于任何模型，只是使用数据来确定一些路由。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T03:06:53.200

我设置了这样的测试：

```
var status = {};
$httpBackend.expectGET("/api/Accounts/AuthenticationStatus").respond(status); 
```

然后我有一个期望：

```
expect(actual).toBe(status); 
```

我收到以下错误：

```
Expected { $resolved : true, $then : Function } to be { }. 
```

在摸索了很长时间之后，我终于意识到 get() 函数返回的对象永远不会与我设置 $httpBackend 服务来响应的对象完全相同，但它会返回基础对象{ $resolved : ..., $then : ... } 并在解决后将包含在我的响应对象中的附加字段添加到该对象。

希望这比以前的海报更有意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T17:42:55.093

只需修改您的代码如下

```
angular.module('app').factory('AuthResource', ['$resource', function($resource) {
    return {
        isAuthenticated : function() {
            return $resource('/api/v1/auth/authenticated')
        }
    }
}]);

--controller 
AuthResource.isAuthenticated().query(function(data){
console.log(data);
}); 
```

当数据从服务器返回时，对象是资源类型的一个实例，所有非 GET 方法都可以使用 $ 前缀

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T23:33:38.037

您能否根据此处的答案[https://stackoverflow.com/a/11856710/1371408](https://stackoverflow.com/a/11856710/1371408)提供解决方案。就像是：

```
AuthResource.isAuthenticated(
    {}, // params (ie. none)
    function (data) { // success callback
        // do what you want with values returned from successful request, contained in 'data'
    },
    function (error) {
        console.log(error); // Error details
    }
); 
```

# vaadin - Vaadin 中的通信错误和警告框

> ID：16197614
> 
> 赞同：0
> 
> 时间：2013-04-24T16:42:41.677
> 
> 标签：vaadin, vaadin6

我的 Web 应用程序使用带有 vaadin-xs 插件的 Vaadin 6.8.8 版本，它部署在 glassfish 服务器上。

我的应用程序随机（嗯，我认为它是随机的）*出现通信问题*和/或*会话过期*消息。日志中没有显示任何内容。有时我可以看到*从 localhost*错误日志收到的无效安全密钥，但我不确定它是否与同一问题有关。

我在 Firefox 和 Chrome 中看到了这些问题（我没有在 IE 或 Opera 中尝试过）。在 Chrome 浏览器中不常出现，但在 Firefox 中经常出现。

我重写了*getSystemMessages*方法：

```
public static SystemMessages getSystemMessages() {
    CustomizedSystemMessages m = new CustomizedSystemMessages();

    m.setCommunicationErrorCaption(null);
    m.setCommunicationErrorMessage(null);
    m.setCommunicationErrorURL(null);
    m.setSessionExpiredCaption(null);
    m.setSessionExpiredMessage(null);
    m.setSessionExpiredURL(null);

    return m;
} 
```

现在，我没有看到任何*通信问题*或*会话过期*消息，而是收到一个带有*服务器错误*消息的 JavaScript 标准警报框，然后重新加载页面。此警告框仅在 Firefox 浏览器中出现，在 Chrome 浏览器中不出现警告框。

有人可以给我任何线索吗？一些不显示警报框的解决方法。

**编辑：**

有时我在日志文件中发现了这个堆栈跟踪：

```
Terminal error:
java.lang.ArrayIndexOutOfBoundsException: 1
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariableBurst(AbstractCommunicationManager.java:1376)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariables(AbstractCommunicationManager.java:1329)
at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.doHandleUidlRequest(AbstractCommunicationManager.java:761)
at com.vaadin.addons.xs.server.JsonpCommunicationManager.doHandleUidlRequest(JsonpCommunicationManager.java:142)
at com.vaadin.terminal.gwt.server.CommunicationManager.handleUidlRequest(CommunicationManager.java:325)
at com.vaadin.terminal.gwt.server.AbstractApplicationServlet.service(AbstractApplicationServlet.java:501)
at com.vaadin.addons.xs.server.XSApplicationServlet.service(XSApplicationServlet.java:97)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T13:49:24.760

我想你必须看看这个：

[https://vaadin.com/de/forum#!/thread/231272](https://vaadin.com/de/forum#!/thread/231272)

其中的重要部分是：

**其他后台线程注意事项：请记住在从另一个线程更新 UI 时在应用程序实例上进行同步。**

在代码中你这样做：

```
synchronized (getApplication()) 
{ 
  // update the UI as required in this synchronized block
  label.setValue("Operation completed");
} 
```

# delphi - DBGrid 并强制 DBMemo 在 MouseWheel 上设置焦点

> ID：16197624
> 
> 赞同：0
> 
> 时间：2013-04-24T16:43:33.823
> 
> 标签：delphi, mousewheel, delphi-5

我在一个表单上有两个控件，一个 TDBGrid 和一个 TDBMemo 都链接到同一个数据源。

当用户滚动带有焦点的 DBGrid th Row 时，会在备忘录中显示一个字母的内容。都好。我收到有关烦恼的投诉，这实际上是用户失败的问题，但我想围绕它进行编程。

用户单击网格然后将鼠标向下移动到备忘录但不单击它，然后滚动鼠标滚轮以向下滚动备忘录。而不是发生这种情况，网格仍然具有焦点，因此它会向下滚动字母列表。如果用户第一次单击备忘录，它将获得焦点，并且滚轮将按预期工作。

我尝试添加

```
if memoLetter.Enabled then memoLetter.SetFocus; 
```

在 OnCellClick 中，用于网格，但它使网格刷新并且闪烁时看起来很糟糕。

那么，如何捕获鼠标滚轮事件并查看鼠标光标是否在备忘录上方？如果是，则将焦点放在备忘录上，而普通的滚轮滚动将接管备忘录。

我在网上找到了一些 if MouseOver 的东西，但都不是很好。

谢谢

# javascript - 为什么 Facebook 在从画布应用程序调用 FB.login 时突然从使用弹出式身份验证而不是灯箱身份验证切换？

> ID：16197625
> 
> 赞同：1
> 
> 时间：2013-04-24T16:43:36.897
> 
> 标签：javascript, facebook-javascript-sdk, facebook-login, facebook-authentication, facebook-canvas

突然，在 2013 年 4 月 23 日和 2013 年 4 月 24 日之间，Facebook 突然在没有通知的情况下停止使用 iframe 灯箱版的 Canvas 应用程序的身份验证对话框，并用弹出版替换它们。这真的把我们搞砸了，因为我们不得不争先恐后地重新编码整个 javascript 部分。

一段时间以来，我知道身份验证对话的 iframe 版本除了在画布应用程序上之外，在任何地方都不可用。

有人可以向我指出画布应用程序的此更改的文档吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T01:27:48.423

我今天一直在处理同样的问题。我们唯一能找到的是[https://developers.facebook.com/docs/concepts/login/permissions-login-dialog/](https://developers.facebook.com/docs/concepts/login/permissions-login-dialog/)，但显然，这种弹出窗口方法已经可用于*游戏*数周了。

对于那些在加载应用程序时无法弹出身份验证对话框的人，新方法始终使用弹出窗口，即使在将应用程序作为 Facebook 页面上的选项卡运行时也是如此。我发现的唯一解决方案是`FB.login`在点击事件上运行该函数。

而且我打算明天请假……</p>

# javascript - javascript 如果 url 有查询字符串，设置 cookie

> ID：16197629
> 
> 赞同：0
> 
> 时间：2013-04-24T16:43:51.493
> 
> 标签：javascript, cookies, query-string

如果 url 有查询字符串'？no_redirect = 1'，我如何设置 cookie？

我没有设置任何 cookie。目前我有

```
function cookieQuery() {
    var referrer = "//domain.local";
    if (document.referrer) {
        var no_redir = 'no_redirect';
        var url = window.location.href;
        if(url.indexOf('?' + no_redir) != 1)
            return true;
        else if(url.indexOf('&' + no_referral) = 1)
           $.cookie('no_referral', 'true');
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:46:30.483

您在此行使用的是赋值运算符而不是比较运算符： `else if(url.indexOf('&' + no_referral) = 1)`

将其更改为`else if(url.indexOf('&' + no_referral) == 1)`并假设您的其余代码是正确的，它应该可以工作。

# powershell - 递归目录遍历中的非法字符

> ID：16197630
> 
> 赞同：0
> 
> 时间：2013-04-24T16:43:59.150
> 
> 标签：powershell, webdav, directory, subdirectory, powershell-3.0

我试图在已安装的 WebDav 驱动器上*递归地计算文件夹中的文件数量。*
如果路径或文件名中没有非法字符并且像我本地磁盘上的 Charm，则以下脚本有效。
但是我在那个挂载的驱动器上有很多**非法字符**（Linux）

我试图添加`$ErrorActionPreference = "SilentlyContinue"`到脚本的开头，这样即使有错误它也会继续。

所以我添加`Where-Object {Test-Path $_.FullName -isValid}`了捕捉非法路径的。

它仍然打破了非法的Char's..

下一个想法是从我的系统中获取非法字符并过滤包含它们的路径。

```
$illChars = [RegEx]::Escape([String][System.IO.Path]::GetInvalidFileNameChars()) 
```

对我来说看起来很甜蜜，所以我可以轻松地放在`-match $illChars`某个地方。但是，仍然没有希望。

我认为在我什至可以检查路径之前，错误被抛出并破坏了管道`Get-ChildItem $path`（我对 PowerShell 脚本真的很陌生，所以不知道我是对还是错）

**我的大问题是：我怎样才能捕捉到那个错误？**

**更新：**

如果存在非法文件名，则会引发错误`$Files = @(Get-ChildItem -File $_.FullName)`

确切的错误信息是

```
Get-ChildItem : Illegales Zeichen im Pfad.
In ***** count-files.ps1:12 Zeichen:15
+             $Files = @(Get-ChildItem -File $_)
+                        ~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (L:\flash\fs\trailer:String) [Get-ChildItem], ArgumentException
    + FullyQualifiedErrorId : DirArgumentError,Microsoft.PowerShell.Commands.GetChildItemCommand

Get-ChildItem : Illegales Zeichen im Pfad.
In ***** \count-files.ps1:6 Zeichen:1
+ Get-ChildItem $path -recurse -exclude ".DAV" -Directory |
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (L:\flash\fs\trailer:String) [Get-ChildItem], ArgumentException
    + FullyQualifiedErrorId : DirArgumentError,Microsoft.PowerShell.Commands.GetChildItemCommand 
```

**更新 2**

仍然是同样**的错误，但现在脚本继续。耶。**
是否可以完全消除错误？

**更新 3**

新**错误“路径格式”**
和脚本再次停止
考虑使用 diruse.exe...

```
Get-ChildItem : Das angegebene Pfadformat wird nicht unterstützt.
In D:\workspace\videoRename\count-files.ps1:13 Zeichen:15
+             $Files = @(Get-ChildItem -File $_.FullName | where { $_.Name -notmatch $patte ...
+                        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [Get-ChildItem], NotSupportedException
    + FullyQualifiedErrorId : System.NotSupportedException,Microsoft.PowerShell.Commands.GetChildItemCommand

Get-ChildItem : Das angegebene Pfadformat wird nicht unterstützt.
In D:\workspace\videoRename\count-files.ps1:7 Zeichen:1
+ Get-ChildItem $path -recurse -exclude ".DAV" -Directory | where { $_.Name -notma ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [Get-ChildItem], NotSupportedException
    + FullyQualifiedErrorId : System.NotSupportedException,Microsoft.PowerShell.Commands.GetChildItemCommand 
```

好的，有类似的东西`GetInvalidPathChars`
让我们检查路径......

**更新 4.1** 仍然抛出错误*非法路径和文件*并在路径处停止。Else（非法路径）不会被调用，即使是路径错误。

```
#$ErrorActionPreference = "SilentlyContinue"
$path="L:\"
$illName = "[{0}]" -f ([Regex]::Escape([String][System.IO.Path]::GetInvalidFileNameChars()))
$illPath = "[{0}]" -f ([Regex]::Escape([String][System.IO.Path]::GetInvalidPathChars()))

Get-ChildItem $path -recurse -exclude ".DAV" -Directory | where { $_.Name -notmatch $illName } | where { $_.FullName -notmatch $illPath } |
    foreach-object {
        write-host $_
        if((Test-Path $_ -isValid) -and (Test-Path $_.FullName -isValid) -and ($_.FullName -notmatch $illPath) ){
            write-host $_
            $FolderDepth = ($_.FullName.Split("\\") | measure-object).Count - 1
            $Files = @(Get-ChildItem -File $_.FullName | where {Test-Path $_ -isValid} | where { $_.Name -notmatch $illName } )
            $Size = 0
            $Files | % {$Size = $Size + $_.Length}
            New-Object PsObject -Property @{
                'Directory' = $_.FullName
                'Files' = $Files.Count
                'Depth' = $FolderDepth
                'Size' = $Size
            }
        }else {
            write-host "Error in Folder:" $_.FullName
            New-Object PsObject -Property @{
                'Directory' = $_.FullName
                'Files' = -1
                'Depth' = -1
                'Size' = -1
            }
        }
    } |
export-csv -notypeinformation -Delimiter ";" -encoding default -path test.csv 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:20:04.373

我无法从这里轻松测试，但类似以下内容？

```
Get-ChildItem $path -recurse -Directory |
    foreach-object {
    if((Test-Path $_ -isValid) -and ($_ -notMatch ".DAV")) { 
```

更新后，试一试...在脚本插入的顶部：

```
$pattern = "[{0}]" -f ([Regex]::Escape([String][System.IO.Path]::GetInvalidFileNameChars())) 
```

然后将您填充 $files 的位置修改为：

```
$Files = @(Get-ChildItem -File $_.FullName  -ErrorAction SilentlyContinue | 
    ? { $_.Name -notmatch $pattern }) 
```

# android - CCMoveTo 在 Cocos2d android 中没有唤醒

> ID：16197634
> 
> 赞同：0
> 
> 时间：2013-04-24T16:44:20.327
> 
> 标签：android, cocos2d-android

我正在开发俄罗斯方块类型的游戏。在正常情况下它运作良好。但是当我回击和租客时。砖不倒。这意味着 CCMoveTo 似乎不像工作。这是我的代码部分

```
CCMoveTo actionMove1 = CCMoveTo.action(actualDuration/divisor, CGPoint.ccp(randwidth , targetHeight));
            CCCallFuncN actionMoveDone1 = CCCallFuncN.action(this, "spriteMoveFinished");

            CCSequence actions1 = CCSequence.actions(actionMove1, actionMoveDone1);

            target.runAction(actions1); 
```

和我的 spriteMoveFinished 方法

```
public void spriteMoveFinished(Object sender)
    {
        target=(CCSprite) sender;

        if(targetHeight<=(newtarget+target.getContentSize().height/2))
        {
            CCMoveTo actionMove = CCMoveTo.action(0 , CGPoint.ccp(randwidth ,(newtarget+target.getContentSize().height/2)));
            CCCallFuncN actionMoveDone = CCCallFuncN.action(this, "spriteMoveFinishedy");
            CCSequence actions = CCSequence.actions(actionMove, actionMoveDone);
            target.runAction(actions);

            arraycounter++;

            int n= Height/brick;
            targetHeight=n*brick;

            if(xpos!=position)
            {

                CCBlink u=CCBlink.action(3f, 3);
                CCCallFuncN actionMoveDone1 = CCCallFuncN.action(this, "spriteMoveFinishedx");
                CCSequence actions1 = CCSequence.actions(u, actionMoveDone1);

                target.runAction(actions1);

            }
            else
            {
                updateHeight(shape,position);
                gameLogic();
            }

        }
        else
        {
            // for continuation motion of CCSprite
            if(tag==0)
            {                               
                targetHeight=targetHeight-brick;

                newtarget=positioning(shape,position);

                if(targetHeight<newtarget+target.getContentSize().height/2)
                {
                    targetHeight=(int) ( newtarget+target.getContentSize().height/2);

                }

                CCMoveTo actionMove = CCMoveTo.action(actualDuration/divisor, CGPoint.ccp(randwidth ,targetHeight));
                CCCallFuncN actionMoveDone = CCCallFuncN.action(this, "spriteMoveFinished");
                CCSequence actions = CCSequence.actions(actionMove, actionMoveDone);
                target.runAction(actions);
                tag=1;

            }

            // to stuck the CCSprite movement 
            else
            {
                CCMoveTo actionMove = CCMoveTo.action(actualDuration/latedivisor , CGPoint.ccp(randwidth ,targetHeight));
                CCCallFuncN actionMoveDone = CCCallFuncN.action(this, "spriteMoveFinished");
                CCSequence actions = CCSequence.actions(actionMove, actionMoveDone);
                target.runAction(actions);
                tag=0;

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:07:19.067

也许你暂停游戏。

如果你有一个

> [[CCDirector sharedDirector] 暂停]

你不能做任何动作。

尝试使用：

> [[CCDirector sharedDirector]简历]

并在采取行动之后

# c# - 可以代表文件或目录的名称是什么？

> ID：16197641
> 
> 赞同：20
> 
> 时间：2013-04-24T16:44:55.530
> 
> 标签：c#, naming-conventions

我在我的代码中命名了一些变量，并且我试图避免命名诸如`nameOfFileOrFolder`or之类的东西`pathOfFileOrFolder`。什么是代表他们两个的好名字或方式？一个存在吗？

例如：
一个*女孩*或*男孩*都可以用**person**一词来表示。*猫*或
狗 都可以用单词*宠物*或**动物**或**哺乳动物****来**表示。 文件或*目录**都*可以用...这个词来表示。

 ********** * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-09-02T17:19:56.490

Software Engineering Stack Exchange 对此进行了很好的讨论：

[Word 文件和文件夹的超集](https://softwareengineering.stackexchange.com/questions/183856/word-for-the-superset-of-files-and-folders)

你可以称它为`FileSystemEntry`, `FileSystemObject`,`FileSystemNode`或`FSNode`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-06T23:28:26.140

我通常只是调用它`path`

*   `configPath`可能表示文件或文件夹，并且是通用的
*   `configFilePath`可以特定于文件
*   `configDirPath`可以特定于文件夹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-09T07:41:23.147

Dart`FileSystemEntity`用于这种情况。参考 [这里](https://api.dart.dev/stable/2.13.4/dart-io/FileSystemEntity-class.html)。*********

# ruby-on-rails - Rails：显示 5 个最近的帖子，不包括最近的帖子

> ID：16197647
> 
> 赞同：6
> 
> 时间：2013-04-24T16:45:18.093
> 
> 标签：ruby-on-rails, controller, views

我想在显示视图中显示最近的帖子，在侧边栏中显示接下来的五个最新帖子。

目前，我显示最新的帖子，但侧边栏包含同一个帖子以及接下来的 4 个最新帖子。

**控制器：**

```
def show
  @post = Post.find(params[:id])
  @posts = Post.includes(:comments).order("created_at DESC").limit(5)
end 
```

**看法：**

```
<div class="related-articles">
  <h2 class="headline">Related Articles</h2>
    <% @posts.each do |post| %>
      <div class="floatLeft"><%= link_to (image_tag post.image.url(:thumb)), post_path(post) %></div>
      <h2 class="headline smaller-font"><%= link_to post.title, post %></h2>
      <div class="image-remove"><%= raw truncate_html(post.body, length: 190) %>
      <%= link_to "read more", post %></p></div>
      <hr>

<% end %>

</div><!--related articles box--> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T16:57:01.043

偏移量是你想要的：

```
@posts = Post.includes(:comments).order("created_at desc").limit(4).offset(1) 
```

这将返回帖子 2-5，如果您想要 2-6，则使用 limit(5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:55:44.553

由于它们是按最新到最旧的顺序排列的，请尝试

```
@posts = Post.includes(:comments).order("created_at DESC").limit(6)
@posts.slice!(0) 
```

# ksh - 从命令输出（stdout）读取一行到数组

> ID：16197650
> 
> 赞同：2
> 
> 时间：2013-04-24T16:45:34.687
> 
> 标签：ksh

我写了这样一个脚本：

```
#!/usr/bin/ksh93

while read -A value; do
  print -- "I am here"
  print -- ${value[@]}
done < `<command>` 
```

我的意图是重定向 stdout 的输出`command`以填充数组。上述用法的灵感来自此链接：[http](http://www.unix.com/shell-programming-scripting/66884-array-ksh-elems-containing-spaces.html) ://www.unix.com/shell-programming-scripting/66884-array-ksh-elems- contains-spaces.html ，但在我的情况下不起作用。

谁能告诉我失败的原因？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:10:26.453

使用的示例命令是`ls -1`- 带有 shell /bin/ksh。这将命令的输出存储在数组中。

```
ls -1 | { \
   n=0;
   set -A array
   while read line; do
        array[$n]=$line
        let n=$n+1
   done;
}

 # output commands here
    for l in ${array[@]}
    do
        echo $l
    done 
```

# youtube-api - YouTube 分析：如何获得一组特定 YouTube 视频的总观看次数

> ID：16197652
> 
> 赞同：2
> 
> 时间：2013-04-24T16:45:39.053
> 
> 标签：youtube-api, analytics, google-api-python-client, youtube-analytics

我正在使用“youtubeAnalytics”服务的“v1”来获取 YouTube 视频的观看次数。我可以使用“过滤器”参数获取特定视频的观看数据，但我不确定如何在一次通话中获取多个视频的数据。以下是我目前为获得一个视频的观看次数所做的工作：

```
YOUTUBE_ANALYTICS_API_SERVICE_NAME = "youtubeAnalytics"
YOUTUBE_ANALYTICS_API_VERSION = "v1"

youtube_id = item.get_youtube_id()
youtube_analytics = get_yt_service(credential, YOUTUBE_ANALYTICS_API_SERVICE_NAME, YOUTUBE_ANALYTICS_API_VERSION)
result = youtube_analytics.reports().query(ids="channel=={0}".format(get_username(credential)),
                                           metrics="views",
                                           dimensions='day',
                                           filters='video=={0}'.format(youtube_id),
                                           start_date=start_date,
                                           end_date=end_date,
                                           sort='-views'
                                          ).execute() 
```

需要明确的是，我使用的是 Google API 客户端，而“get_yt_service”是构建函数的包装器：

```
from apiclient.discovery import build 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-05T22:29:15.853

作为对杰夫回答的反驳：

实际上，您**一次可以**查询多个视频。您的过滤器将如下所示：

```
video==id1,id2,id3,...,idn; 
```

话虽如此，返回的数据将被聚合！在某些情况下，就像视图一样，它将是一个总和（id1 的视图 + id2 的视图 + ... + idn 的视图）。它不会分别告诉您每个视频 ID 的观看次数。

但是，我不清楚（也许有人会过来澄清这一点）其他指标是如何汇总的。例如，我尝试获取两个视频的 averageViewDuration。我的结果如下：

```
id1: 1.8937 averageViewDuration
id2: 45.24135 averageViewDuration
both: 3.09112 averageViewDuration 
```

这显然不是总和，也不是两个值的简单平均值。也许它以某种方式加权，但从文档中不清楚如何为每个可能的指标聚合这些数据。事实上，文档中几乎没有关于在同一通话中过滤多个视频 ID 的内容。

我目前正在与 YouTube 代表进行沟通，因此我会在将来的回答中附加任何有关此问题的新信息。

**更新**

实际上，您**可以**在一次分析 API 调用中检索多个视频的每个视频数据。使用维度“视频”。例如，如果您希望视频 ID“a”和“b”在 2015 年 1 月 1 日到 2015 年 1 月 31 日的观看次数，您的 API 请求将如下所示

```
GET https://www.googleapis.com/youtube/analytics/v1/reports?ids=contentOwner%3D%3DOwnerName&start-date=2015-01-01&end-date=2015-01-31&metrics=views&dimensions=video&filters=video%3D%3Da%2b%3B&sort=-views&start-index=1&key={YOUR_API_KEY} 
```

**警告：**您每分钟可以查询多少个不同的视频 ID，这与您的 QPS（每秒查询数）不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:57:22.550

在一次通话中无法获取多个视频 ID 的数据。您可以在某些类型的报告中获取频道级数据，但不能仅获取视频 ID 子集的数据。

您需要进行多次 Analytics API 调用，每个视频 ID 调用一次。您可以在单独的线程中同时发出几个请求并获得相当好的吞吐量。我已经为给定频道中的所有视频整理了一些示例代码（在 Ruby 中，但这些概念也适用于 Python）：[https ://code.google.com/p/youtube-api-samples/源/浏览/#git%2Fanalytics-dump](https://code.google.com/p/youtube-api-samples/source/browse/#git%2Fanalytics-dump)

# sql - 到标题 oracle 的列值

> ID：16197655
> 
> 赞同：3
> 
> 时间：2013-04-24T16:45:46.443
> 
> 标签：sql, oracle, oracle11g, pivot

我有一个架构如下的表

```
Empid   Field Type  Field Value
123         Name          John
123         Age            33
124         Name          Tijo
124         Age            24 
```

输出应采用以下格式

```
Empid       Name             Age
123         John             33
124         Tijo             24 
```

我如何使用来自 oracle 数据库的查询来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T16:50:49.323

这种将行转换为列的类型称为 PIVOT。有几种方法可以做到这一点。

由于您使用的是 Oracle 11g，因此可以使用 PIVOT 函数：

```
select empid, Name, age
from
(
  select empid,
    fieldtype,
    fieldvalue
  from yt
) 
pivot
(
  max(fieldvalue)
  for fieldtype in ('Name' as Name, 'Age' as Age)
); 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!4/3c0db/3)。

在 Oracle 11g 之前，您可以使用带有`CASE`表达式的聚合函数：

```
select empid,
  max(case when fieldtype = 'Name' then fieldvalue end) name,
  max(case when fieldtype = 'Age' then fieldvalue end) age
from yt
group by empid; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!4/3c0db/4)。

您也可以通过多次加入表来获得结果：

```
select t1.empid,
  t1.fieldvalue name,
  t2.fieldvalue age
from yt t1
left join yt t2
  on t1.empid = t2.empid
  and t2.fieldtype = 'Age'
where t1.fieldtype = 'Name'; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!4/3c0db/5)。每个版本都会给出结果：

```
| EMPID | NAME | AGE |
----------------------
|   123 | John |  33 |
|   124 | Tijo |  24 | 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T16:49:07.970

听起来你正在尝试`PIVOT`你的桌子。一种选择是使用`MAX`with `CASE`：

```
select empid,
   max(case when fieldtype = 'Name' then fieldvalue end) Name,
   max(case when fieldtype = 'Age' then fieldvalue end) Age
from yourtable
group by empid 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!4/08b81/1)

# c# - 从子页面访问母版页面的 TR

> ID：16197658
> 
> 赞同：0
> 
> 时间：2013-04-24T16:45:54.693
> 
> 标签：c#, asp.net, master-pages, tablerow

我需要访问`tr`母版页中添加的控件，并使用子页使之可见。

以下是代码：

```
//MasterPage
<tr runat="server" id="tr_Head" visible="false">
   //other controls
</tr> 
```

在 pageload() 的子页面中：

```
//ChildPage
Control cnt = (Control)this.Master.Page.FindControl("tr_Head");
cnt.Visible = true; 
```

但在`cnt`我得到一个空引用异常。如何使`tr_Head`我的子页面可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:51:31.343

我自己解决了

它应该像

```
//ChildPage
Control cnt = (Control)Master.FindControl("tr_Head");
cnt.Visible = true; 
```

# java - 获取价值在行动课上

> ID：16197662
> 
> 赞同：0
> 
> 时间：2013-04-24T16:46:05.273
> 
> 标签：java, jsp, struts2, combobox, action

我想用 Struts 在 JSP 中创建组合框。我的 JSP 页面是：

```
<s:form id="form-sign-up" class="round styled" action="signUp" method="post" name="myForm" theme="xhtml" enctype="multipart/form-data">
    <label>Email:</label><input type="text" class="keyup-email text-input" name="7" value="" />
    <br />
    <br />
    <s:textfield name="fname" size="40" maxlength="40" required="true" key="your.FName-label"/>
    <s:textfield name="lname" size="40" maxlength="40" required="true" key="your.LName-label"/>
    <br />
    <s:set var="gender" value="{'male','female'}" />
    <s:select label="gender" name="gender"
              accesskey="" headerKey="-1" headerValue="I'm..." 
              cssClass="" list="gender"/>
    <br />          
    <s:password name="Pass" size="40" maxlength="40" required="true" key="your.Pass-label"/>
    <s:textarea name="job" label="Job" id="job" cols="32" rows="3" />
    <s:submit value="Submit" id="btn-submit" align="left"/>
</s:form> 
```

现在在我的行动中，我有：

```
public class SignUpAction  extends ActionSupport {

private String fname;
private String lname;
private String gender;
private String email;
private String pass;
private String job;
public static DataBase db ;

 @Override
public void validate(){
}

@Override
public String execute() throws Exception {

    DataBase db = new DataBase();
    try {
        User u1 = new User(fname,lname,gender,email,pass,job);
        db.Add_User(u1);

     } catch ( HibernateException e ) {
            e.printStackTrace();

    }

    return SUCCESS;
}
... Getters and setters ...     
} 
```

我想获取性别的值并将其值保存在我的数据库中，但我无法`<s:select...`从 JSP 中获取值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:27:12.737

您无法获得类型错误的列表的值。要选择选项值，您需要列表

```
List<String> gender; 
```

把你需要的财产价值

```
String yourGender; 
```

并用属性名称命名选择标签

```
<s:select name="yourGender" list="gender" 
```

确保 getter 和 setter 都已定义，如果您引用默认堆栈，则在提交`yourGender`后将设置为您的操作。该值取决于选择。因此，您可以自由选择持久性框架或原始 JDBC 将值保存到数据库。

# php - /var/www/html 是什么？

> ID：16197663
> 
> 赞同：56
> 
> 时间：2013-04-24T16:46:07.867
> 
> 标签：php, cakephp, var

我开始学习 PHP / MySQL，但是在我正在阅读的所有文档中，它都提到`/var/www/html`了您要安装诸如 CakePHP 之类的框架的文件夹，或者例如 /var/www/html 是您想要的文件夹安装您的网站，以便一切都在根目录下。

究竟是什么`/var/www/html`意思？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-24T16:50:20.397

`/var/www/html`只是 Web 服务器的默认根文件夹。您可以通过编辑文件（[通常](http://httpd.apache.org/docs/current/mod/core.html#documentroot)`apache.conf`位于)`/etc/apache/conf``DocumentRoot`

许多房东不允许您自己更改这些东西，因此您的里程可能会有所不同。有些允许您更改它们，但只能使用内置的管理工具（例如 cPanel）而不是通过命令行或编辑原始配置文件。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-24T16:51:06.420

在大多数共享主机中，您无法设置它。

在 VPS 或专用服务器上，您可以设置它，但一切都有其价格。

在共享主机上，通常您会收到一个 Linux 帐户，例如*/home/ **（您的用户名）** / ，而**/var/www/html*的等价物变成 /home/ **（您的用户名）** /public_html/ （或类似的东西, 例如 /home/ **(你的用户名)** /www)

如果您通过 FTP 访问您的帐户，您将自动访问您的 */home/ **（您的用户名）** / 文件夹，只需找到*www*或*public_html*并将您的站点放入其中。

如果您在代码中使用绝对路径，坏消息，您需要重构它以在代码中使用相对路径，至少在共享主机中。

# macos - 查找素数 - 在 MacOS 上找不到“因子”命令

> ID：16197665
> 
> 赞同：4
> 
> 时间：2013-04-24T16:46:25.377
> 
> 标签：macos, bash, scripting

我正在编写一个 bash 脚本来查找所有小于给定整数的素数。

这是代码：

```
#!/bin/bash

BADARGS=65
if [ -z $1 ]
then
   echo "Usage:`basename $0` cannot have a null parameter."
   exit $BADARGS
elif [ $1 -lt 2 ]
then
   echo "Usage:`basename $0` should have the value 2 or more as the parameter."
   exit $BADARGS
fi
TRUE=0
FALSE=
Primes(){
checkPrime=( $(factor $1) ) # this puts factors into array

if [ -z "${checkPrime[2]}" ] # third element is null
then
   return $TRUE
else
   return $FALSE
fi
}
printf "2 "
let "n = 3"
while [ $n -le $1 ]
do
   if Primes $n
   then
       printf "$n "
   fi
       let "n += 2"   
done
printf "\n"

# END 
```

我正在使用 MacOS，当我执行脚本时收到此错误消息：

```
Jessicas-MacBook-Pro:Documents jessicalott$ ./primes.sh 10
2 ./primes.sh: line 16: factor: command not found
3 ./primes.sh: line 16: factor: command not found
5 ./primes.sh: line 16: factor: command not found
7 ./primes.sh: line 16: factor: command not found
9 
```

我今天早上真的开始用 bash 写作，所以任何帮助都将不胜感激。我认为这可能与我没有使用 Linux 的事实有关，但我希望不是这样。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T06:37:43.193

正如评论中提到的，因素是 GNU coreutils 的一部分。[您可以使用Homebrew](http://mxcl.github.io/homebrew/)安装 coreutils ：

```
brew install coreutils 
```

之后可以在脚本`factor`中替换为。`/usr/local/bin/gfactor`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T16:49:12.873

`factor`不是标准的 Unix 命令。Linux 有它。OS X 没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-31T06:57:20.980

使用较短的 Homebrew 安装时出现错误，但这对我有用：

```
brew install coreutils findutils gnu-tar gnu-sed gawk gnutls gnu-indent gnu-getopt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-02T16:37:14.190

保存`Makefile`并运行`make`。它从 NetBSD CVS 存储库下载源代码`factor`并构建它们。`primes`如果没有`curl`，请尝试`make G=wget`。

```
W= http://cvsweb.netbsd.org/bsdweb.cgi/~checkout~/src/games
G= curl -L -R -O
CFLAGS= -Wall -Wextra -O2 -Dlint -D__dead= -DHAVE_OPENSSL

all:    get bin

bin:    factor primes

factor: factor.o pr_tbl.o
    $(CC) -o $@ factor.o pr_tbl.o -lcrypto

primes: primes.o pr_tbl.o pattern.o spsp.o
    $(CC) -o $@ primes.o pr_tbl.o pattern.o spsp.o -lm

clean:
    -rm -f factor primes factor.o pattern.o pr_tbl.o primes.o spsp.o

get:
    $G $W/factor/factor.6
    $G $W/factor/factor.c
    $G $W/primes/pattern.c
    $G $W/primes/primes.6
    $G $W/primes/primes.c
    $G $W/primes/primes.h
    $G $W/primes/pr_tbl.c
    $G $W/primes/spsp.c 
```

（Makefile 更新为包含`spsp.c`）

也可在[https://github.com/lhf/factor](https://github.com/lhf/factor)

# pdf - 在程序中更改 PDF 表单模板后，为什么 Adob e Reader 在以后查看文件时要保存文件？

> ID：16197669
> 
> 赞同：0
> 
> 时间：2013-04-24T16:46:30.537
> 
> 标签：pdf, abcpdf

在我正在使用的程序中，使用 PDF 表单作为模板来生成报告。使用 ABCPDF 完成所有信息的填写后，PDF 将被展平，然后附加到电子邮件中。当 PDF 的最终形式在 Adob​​e Reader 中打开时，一切看起来都很好。然后，当阅读器关闭时，它会询问您是否要保存所做的更改。

为什么在 Reader 中打开文件后没有进行任何更改时会发生这种情况？我的一个猜测是，它假设一个带有填写字段的表单发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:49:35.770

在我看来，您的文件在您的工作流程中的某个时刻变得损坏。当 Acrobat Reader 加载文件并在其中发现无效结构时，它会尝试通过读取可以从中读取的任何内容来“修复”文件，然后提示用户保存“修复”版本。

# box-api - Box API 用户管理 tracking_codes 属性

> ID：16197670
> 
> 赞同：0
> 
> 时间：2013-04-24T16:46:33.947
> 
> 标签：box-api

我正在为我们的 Enterprise Box 帐户开发一些配置/取消配置脚本，并注意到 2.0 API 文档指出有一个名为“tracking_codes”的属性。在检索我们的企业用户或检索特定用户时，我似乎看不到此属性。以下是我能够检索的属性：

```
{
"total_count":1,
"entries":[
    {"type":"user",
    "id":"123456",
    "name":"John Doe",
    "login":"johndoe@null.com",
    "created_at":"2013-03-04T12:09:08-08:00",
    "modified_at":"2013-04-24T08:22:30-07:00",
    "language":"en",
    "space_amount":26843545600,
    "space_used":0,
    "max_upload_size":5368709120,
    "status":"active",
    "job_title":"",
    "phone":"",
    "address":"",
    "avatar_url":"https:\/\/www.box.com\/api\/avatar\/large\/123456"}
],
"limit":100,
"offset":0} 
```

这是我用来获取此信息的内容：

```
curl https://api.box.com/2.0/users?filter_term=johndoe@null.com -H "Authorization: Bearer ACCESS_TOKEN" 
```

我需要使用不同的 API url 或 url 变量来检索“tracking_codes”属性吗？我想使用此属性来跟踪用户“类型”。我们计划为不同类型的用户提供更多空间，例如在我们的案例中，工作人员和教授将获得比学生更多的空间。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T14:32:00.870

你已经得到了答案。使用 ?fields 参数指定所需的字段。

基本上，我们有 2 种默认的 JSON 返回格式。你可以把它们想象成“迷你”和“大多数”。当子对象嵌入到父对象中时使用迷你格式。例如，用户 JSON 通常以 XXX_by 的形式嵌入到事物中，例如文件中的这个：

```
 "modified_by": {
    "type": "user",
    "id": "17738362",
    "name": "jack florey",
    "login": "jflorey@box.com" 
```

正如您在[用户文档](http://developers.box.com/docs/#users)中看到的：我们有很多绿色字段，因此不会自动以“大多数”JSON 格式出现。您必须使用 ?fields 查询参数明确要求它们。

顺便说一句，我不认为我们的文档中所有扩展字段都变成了绿色，所以如果你发现了一个，请评论这个讨论，我们会修复它，并感谢你创造了生活好几千。

# php - PHP Dropbox API - 使用 files_put 时找不到页面错误

> ID：16197672
> 
> 赞同：0
> 
> 时间：2013-04-24T16:46:42.817
> 
> 标签：php, dropbox-api

我在尝试使用 PHP 和 Dropbox API 上传文件时遇到问题。当 cURL 执行时，我得到一个找不到页面的错误。这表明存在 URL 问题，但我看不出它是错误的。

该文件存在并且所有 OAuth 都在工作。

错误截图： ![找不到页面错误](https://i.stack.imgur.com/0zrWk.png)

这是正在使用的代码 - 我在这里遗漏了什么吗？

```
$filePathName = "/path_to_file/my_image.png";
$url = "https://api-content.dropbox.com/1/files_put/sandbox/my_folder/my_image.png";

$headers = array("Content-Type: ".mime_content_type($filePathName)."\r\nContent-Length: ".filesize($filePathName)."\r\n".
    "Authorization: OAuth oauth_version=\"1.0\", oauth_signature_method=\"PLAINTEXT\", oauth_consumer_key=\"".DROPBOX_APP_KEY."\", oauth_token=\"".DROPBOX_OAUTH_ACCESS_TOKEN."\", oauth_signature=\"".DROPBOX_APP_SECRET."&".DROPBOX_OAUTH_ACCESS_SECRET."\""
);

$fh = fopen($filePathName, "rb");

$ch = curl_init();
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_PUT, 1);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, 1);
curl_setopt($ch, CURLOPT_INFILE, $fh);
curl_setopt($ch, CURLOPT_INFILESIZE, filesize($filePathName));
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$apiResponse = curl_exec($ch);

fclose($fh);

die("Response:<br />".$apiResponse); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:12:19.333

另请参阅[https://www.dropbox.com/developers/core/api](https://www.dropbox.com/developers/core/api)

上传文件的 url 结构是`https://api-content.dropbox.com/1/files_put/<root>/<path>?param=val`. 其中 root 是 root 相对于指定路径的根。有效值为沙盒和保管箱。因此，您的网址中缺少根。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T09:15:56.657

我已经设法修复它！

问题在于我构建标题的方式。应该是这样的：

```
$headers = array(
    "'Content-Type: ".mime_content_type($filePathName)."'",
    "'Content-Length: ".filesize($filePathName)."'",
    "Authorization: OAuth oauth_version=\"1.0\", oauth_signature_method=\"PLAINTEXT\", oauth_consumer_key=\"".DROPBOX_APP_KEY."\", oauth_token=\"".DROPBOX_OAUTH_ACCESS_TOKEN."\", oauth_signature=\"".DROPBOX_APP_SECRET."&".DROPBOX_OAUTH_ACCESS_SECRET."\""
); 
```

`Content-Type`and`Content-Length`不再以 and 结尾，`\r\n`现在被 and 包围，`'`是数组中的单独元素。

当我使用该`curl_getinfo`功能时，我得到了一个线索，并且`http_code`是 400，这意味着一个错误的请求。这让我远离了 Dropbox 返回的“找不到页面”错误，并让我进一步调查了标题。

# facebook - facebook redirect_uri 不重定向到正确的 url，而是重定向到 https://apps.facebook.com/_APP_ID

> ID：16197673
> 
> 赞同：1
> 
> 时间：2013-04-24T16:46:45.540
> 
> 标签：facebook, redirect, oauth, facebook-javascript-sdk

这里是流量，

*   1.用户打开一个页面选项卡，带有一个应用程序
*   1.1 应用检测用户是否授权应用访问他的个人数据
*   1.1.1 如果没有，做authurl并重定向用户获取权限
*   1.1.2 他被授权，ok继续执行

. .

我的步骤 1.1.1 有问题，如果用户没有授权应用程序，这是我调用的功能代码

```
function askForPermission(app_data) {
var oauth_url = 'https://www.facebook.com/dialog/oauth/';
oauth_url += '?client_id=' + app_id;
oauth_url += '&redirect_uri=' + encodeURIComponent(app_url + '&app_data=' + app_data);
oauth_url += '&scope=user_about_me';
window.top.location = oauth_url; 
```

}

这里一切正常，但是当用户在身份验证对话框中单击“确定”时，我被重定向到 APP_ID/# *=* ">https://apps.facebook.com/ **APP_ID** /# *=*，而不是我拥有的页面标签 url在redirect_uri中指定。我不明白为什么，我已经用谷歌搜索了几个小时没有结果。有没有人遇到过类似的问题？他是如何解决的？

# php - 将数据库中的文本字段转换为匹配规则

> ID：16197675
> 
> 赞同：0
> 
> 时间：2013-04-24T16:46:46.683
> 
> 标签：php, mysql

我遇到了以下问题：

一位客户向我们提供了一个庞大的假期优惠数据库。优惠也有定价。给出以下结构

桌子

```
offers 
```

场地

```
roomprice1 
```

不幸的是，roomprice1 字段被声明为“VARCHAR”，因此不适合与“ORDER BY roomprice1 ASC/DESC”进行比较/排序。

有没有办法（PHP/SQL）来转换字段，以便以正确的方式排序？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:01:15.483

如果您不想更改表格，可以使用 Cast 功能对其进行重新排序。

```
 ...ORDER BY CAST('roomprice1' AS DECIMAL(10,2)); 
```

而不仅仅是普通的“ORDER BY”

如果您想了解更多关于投射的信息，这里是一个附加链接：http: [//dev.mysql.com/doc/refman/4.1/en/cast-functions.html#function_cast](http://dev.mysql.com/doc/refman/4.1/en/cast-functions.html#function_cast)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:55:46.220

如果您可以自己查询和编辑数据库，请执行以下操作：

```
ALTER TABLE  `offers` CHANGE  `offers`  `roomprice1` INT( 255 ) 
```

* * *

否则，如果您想使用 PHP，请使用 PDO 或 mysqli 准备这样的查询：

```
SELECT `roomprice1` FROM `offers` 
```

并使用 php 遍历结果，使用[intval()](http://php.net/manual/en/function.intval.php)将字符串转换为整数。对于每次迭代，将新值放在另一个表中`INSERT`或将其保存在 PHP 数组中，然后您可以[sort()](http://php.net/manual/en/function.sort.php)

# memory-leaks - PipelineBuffer 不释放内存

> ID：16197679
> 
> 赞同：4
> 
> 时间：2013-04-24T16:47:06.683
> 
> 标签：memory-leaks, ssis, custom-pipeline-component

我正在关注[Rainer Stropek](http://www.software-architects.com/devblog/team/rainer-stropek)在 1\. 创建自定义 SSIS 数据流项和 2\. 从 Azure 表存储中提取数据的这篇出色的帖子。 [http://www.software-architects.com/devblog/2010/11/12/Custom-SSIS-Data-Source-For-Loading-Azure-Tables-Into-SQL-Server](http://www.software-architects.com/devblog/2010/11/12/Custom-SSIS-Data-Source-For-Loading-Azure-Tables-Into-SQL-Server)

我将粘贴任何试图回答我的问题的人都会感兴趣的代码：

```
GenericTableContext context = new GenericTableContext(cloudStorageAccount.TableEndpoint.AbsoluteUri, cloudStorageAccount.Credentials);

public override void PrimeOutput(int outputs, int[] outputIDs, PipelineBuffer[] buffers) {
  IDTSOutput100 output = ComponentMetaData.OutputCollection[0];
  PipelineBuffer buffer = buffers[0];
  foreach(var item in this.context.CreateQuery<GenericEntity>("SomeTable") {
    buffer.AddRow();
    for (int x = 0; x < columnInformation.Count; x++) {
      var ci = (ColumnInfo) columnInformation[x];
      var value = item[ci.ColumnName].Value;
      if (value != null) {
        buffer[ci.BufferColumnIndex] = value;
      } else {
        buffer.SetNull(ci.BufferColumnIndex);
      }
    }
  } 
```

现在的**问题：**

我的数据集非常大；假设有一百万条记录。我有一个最简单形式的 SSIS 包，即我的自定义数据源将数据写入平面文件目标。它没有任何转换。

当我运行我的包时，我可以看到记录以大约 10,000 条记录 (DefaultBufferMaxRows) 的形式写入 CSV 文件。

我的问题是，虽然这些记录是写出来的，但它似乎仍然留在记忆中。这最终导致我的包裹减速并停止。我服务器中的所有内存都用完了。

现在我不是 SSIS 专家，但我假设我写入 PipelineBuffer 的记录在使用后没有被释放。“缓冲区”这个词对我来说意味着它可以被“冲洗”。但我找不到任何 API 来做到这一点。

所以我想我的问题是，如何释放分配给已写入平面文件的记录的内存，以便我有足够的内存用于剩余记录？

谢谢你，南顿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-01T06:35:41.120

每个缓冲区都将刷新，更准确地说，一旦它完成了通过管道的旅程，就会被重用。因此，在这种情况下，SSIS 会为您管理内存，尽管您必须确保分配了正确的行和内存大小（您可以在日志记录中打开缓冲区调整事件以查看您的包是否发生这种情况）。通常，人们调整内存并没有意识到它是数据流中的每个组件，因此包会花费大量时间来尝试过度分配大量内存。

如果您的组件是目标，您也可能没有释放连接，您需要使用连接管理器或实现资源管理代码以在脚本组件中进行清理。

# c# - 如何制作具有两个手柄（针）的 SlideBar（TrackBar）

> ID：16197686
> 
> 赞同：1
> 
> 时间：2013-04-24T16:47:28.180
> 
> 标签：c#, windows, custom-controls

我的问题是我必须制作一个有两个手柄（针）的 SlideBar（TrackBar）

**1- 最小值（下限值） 2- 最大值（上限值）**

喜欢：

**开始 <------------------||--------------|| ------------>End** 实际上可能需要的范围是滑动条上的两个长约 2000 滴答声。到目前为止，我在互联网上进行了搜索，并在代码项目中找到了 Slidebar 的示例：

[http://www.codeproject.com/Articles/28717/A-custom-range-selector-control-in-C-with-a-little](http://www.codeproject.com/Articles/28717/A-custom-range-selector-control-in-C-with-a-little) 它有我们从 XML 文件添加范围值的选项，但是对于两个长值它的范围值重叠并且可以看到一条直线。因为我是 C# 的新手并且不知道开发自定义控件。

任何建议将不胜感激。

# python-2.7 - Python Requests 库返回错误的状态码

> ID：16197690
> 
> 赞同：4
> 
> 时间：2013-04-24T16:47:38.103
> 
> 标签：python-2.7, http-status-code-403, python-requests

下面的 Python 代码返回“403”：

```
import requests
url = 'http://bedstardirect.co.uk/star-collection-braemar-double-bedstead.html'
r = requests.get(url)
print r.status_code 
```

但是这个页面是有效的，脚本应该返回 '200'，就像下面的 perl 脚本一样：

```
use WWW::Mechanize;
my $mech = WWW::Mechanize->new();
my $url = 'http://bedstardirect.co.uk/star-collection-braemar-double-bedstead.html';
$mech->get($url);
print $mech->status,"\n"; 
```

我还检查了 Firefox 中的 Firebug，所有请求都有一个“200”状态码。

我使用 Python 请求 v1.2.0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T17:11:47.023

似乎您的特定服务器需要一个 User-Agent 标头。

尝试：
`r = requests.get('http://bedstardirect.co.uk/star-collection-braemar-double-bedstead.html', headers={'User-Agent': 'a user agent'})`

编辑：
对我的机器请求的默认用户代理如下：`python-requests/1.2.0 CPython/2.7.4 Darwin/12.3.0`

经过一些测试，我发现任何包含该单词的 User-Agent`python`在此服务器上都会失败。

# android - Android 中的 Windows phone 过渡动画

> ID：16197692
> 
> 赞同：1
> 
> 时间：2013-04-24T16:47:40.877
> 
> 标签：android, animation, android-animation, transitions

我想在我的 android 应用程序中实现 windows phone 中可用的过渡动画。

动画应如下面的视频所示

[新闻共和国安卓应用](https://www.youtube.com/watch?v=ZU4j6VL2Qvg)

我应该从哪里开始？

# c# - Linq to SQL - 输出类型？（不显示信息只显示类型）

> ID：16197693
> 
> 赞同：0
> 
> 时间：2013-04-24T16:47:44.257
> 
> 标签：c#, sql, linq

所以伙计们......我有这个问题：

> [允许用户按国家/地区降序查看销量前五的产品。](https://stackoverflow.com/questions/16120251/linq-to-sql-order-by-issue)

这是我的代码：

```
var q6 = (from t in northwind.Products
             join o in northwind.Suppliers on t.SupplierID equals o.SupplierID
             group t.UnitPrice by new {o.Country, t.UnitPrice} into grouped
             let county = grouped.Key.Country
             let price = grouped.Key.UnitPrice
             group new 
             {
                 Country = county,
                 Product = price
             }
             by county
             into countryGrouped
             select new
             {
                 Output = countryGrouped.Key,
                 Price = countryGrouped.OrderBy(c => c.Product)
             });                

        lbxTop5.ItemsSource = q6; 
```

它的工作原理是输出价格。

价格是这样出来的：

![输出类型的图像](https://i.stack.imgur.com/eDhyO.png)

谁能告诉我如何以正确的格式而不是数据类型输出价格？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:59:53.640

什么是“正确格式”？

你可以这样做：

```
...
select new
{
    Output = countryGrouped.Key,
    Price = string.Join(",", countryGrouped.OrderBy(c => c.Product))
}); 
```

这将使输出成为逗号分隔的字符串

# java - 将对象转换为列表时出现 ClassCastException

> ID：16197694
> 
> 赞同：-2
> 
> 时间：2013-04-24T16:47:44.733
> 
> 标签：java, android, classcastexception

我正在开发 Android 应用程序，并且我已经实现了一个类，用于使用共享首选项进行所有处理。这个类拥有一个获取首选项的通用方法，它是通用的，它根据参数返回不同类型的数据类型。我在共享首选项中存储和检索的数据类型是整数、字符串、布尔值和列表（使用 JSON 对字符串进行序列化/反序列化）。好吧，一切都很好，我可以通过这种方式成功地从共享首选项中获取 int、string 和 boolean，但不是 List，因为我得到了：

```
java.lang.ClassCastException: java.lang.String cannot be cast to java.util.List 
```

我忘了告诉该方法被声明为返回一个对象，并且当它被调用时，返回的值被类型转换为正确的类型。无论如何，我不明白为什么它说不能转换字符串，它甚至不返回字符串？这是一种正确的方法吗？我的意思是返回一个对象然后强制转换它是完全正确的。

获取以下共享首选项的完整方法。感谢您的任何建议！

```
public Object getPrefs(String sharedPreferences, String key, int type,
        Context context, Object defaultObject) {
    // A String indicating an error occurred while retrieving shared
    // preferences
    final String ERROR = "ERROR";

    // Set shared preferences from context
    sharedPref = context.getSharedPreferences(sharedPreferences,
            Context.MODE_PRIVATE);

    switch (type) {
    case (0): // <-- Integer
        // Check that defaultObject is of correct instance else collect
        // "hardcoded" default value of 0
        if (defaultObject instanceof Integer) {
            this.logger.logCatTxt(
                    this.logger.getINFO(),
                    this.LOG_TAG + ":getPrefs()",
                    "Integer with value"
                            + Integer.toString(sharedPref.getInt(key,
                                    (Integer) defaultObject))
                            + " retrieved from shared preferences: "
                            + sharedPreferences + ", with key: " + key
                            + ", type: " + Integer.toString(type)
                            + ", context: " + context.toString()
                            + " and default value: "
                            + Integer.toString((Integer) defaultObject));
            return sharedPref.getInt(key, (Integer) defaultObject);
        } else {
            this.logger
                    .logCatTxt(
                            this.logger.getERROR(),
                            this.LOG_TAG + ":getPrefs()",
                            "Default value couldn't be set because of instance mismatch, hardcoded default value of 0 is used. However Integer with value"
                                    + Integer.toString(sharedPref.getInt(
                                            key, 0))
                                    + " retrieved from shared preferences: "
                                    + sharedPreferences
                                    + ", with key: "
                                    + key
                                    + ", type: "
                                    + Integer.toString(type)
                                    + ", context: "
                                    + context.toString()
                                    + " and default value: "
                                    + Integer
                                            .toString((Integer) defaultObject));
            return sharedPref.getInt(key, 0);
        }
    case (1): // <-- String
        // Check that defaultObject is of correct instance else collect
        // "hardcoded" default value of ""
        if (defaultObject instanceof String) {
            this.logger.logCatTxt(
                    this.logger.getINFO(),
                    this.LOG_TAG + ":getPrefs()",
                    "String with value"
                            + sharedPref.getString(key,
                                    (String) defaultObject)
                            + " retrieved from shared preferences: "
                            + sharedPreferences + ", with key: " + key
                            + ", type: " + Integer.toString(type)
                            + " and context: " + context.toString()
                            + " and default value: "
                            + (String) defaultObject);
            return sharedPref.getString(key, (String) defaultObject);
        } else {
            this.logger
                    .logCatTxt(
                            this.logger.getERROR(),
                            this.LOG_TAG + ":getPrefs()",
                            "Default value couldn't be set because of instance mismatch, hardcoded default value of \"\" is used. However String with value"
                                    + sharedPref.getString(key, "")
                                    + " retrieved from shared preferences: "
                                    + sharedPreferences
                                    + ", with key: "
                                    + key
                                    + ", type: "
                                    + Integer.toString(type)
                                    + " and context: " + context.toString());
            return sharedPref.getString(key, "");
        }
    case (2): // <-- Boolean
        // Check that defaultObject is of correct instance else collect
        // "hardcoded" default value of false
        if (defaultObject instanceof Boolean) {
            this.logger.logCatTxt(
                    this.logger.getINFO(),
                    this.LOG_TAG + ":getPrefs()",
                    "Boolean with value"
                            + sharedPref.getBoolean(key,
                                    (Boolean) defaultObject)
                            + " retrieved from shared preferences: "
                            + sharedPreferences + ", with key: " + key
                            + ", type: " + Integer.toString(type)
                            + " and context: " + context.toString()
                            + " and default value: "
                            + (Boolean) defaultObject);
            return sharedPref.getBoolean(key, (Boolean) defaultObject);
        } else {
            this.logger
                    .logCatTxt(
                            this.logger.getERROR(),
                            this.LOG_TAG + ":getPrefs()",
                            "Default value couldn't be set because of instance mismatch, hardcoded default value of false is used. However Boolean with value"
                                    + sharedPref.getBoolean(key, false)
                                    + " retrieved from shared preferences: "
                                    + sharedPreferences
                                    + ", with key: "
                                    + key
                                    + ", type: "
                                    + Integer.toString(type)
                                    + " and context: " + context.toString());
            return sharedPref.getBoolean(key, false);
        }
    case (3): // <-- List
        // Retrieve secondaryListenNumbers to json string and clear
        // secondaryListenNumbers List just to be sure that it's empty
        String json = sharedPref.getString(key, "");
        // List of Strings containing
        List<String> list = new ArrayList<String>();

        // If json string is not empty
        if (json != "") {
            try {
                // Create a JSONArray from json string and retrieve strings
                // from it and and them to secondaryListenNumbers List
                JSONArray a = new JSONArray(json);
                for (int i = 0; i < a.length(); i++) {
                    String secondaryListenNumber = a.optString(i);
                    list.add(secondaryListenNumber);
                }
                this.logger.logCatTxt(this.logger.getINFO(), this.LOG_TAG
                        + ":getPrefs()", "List<String> with value(s)" + json
                        + "   retrieved from shared preferences: "
                        + sharedPreferences + ", with key: " + key
                        + ", type: " + Integer.toString(type)
                        + " and context: " + context.toString());
                // Return the list
                return list;
            } catch (JSONException e) {
                e.printStackTrace();
                this.logger.logCatTxt(this.logger.getERROR(), this.LOG_TAG
                        + ":getPrefs()",
                        "Failed to retrieve List<String> from shared preferences: "
                                + sharedPreferences + ", with key: " + key
                                + ", type: " + Integer.toString(type)
                                + " and context: " + context.toString(), e);
            }
        }
        break;
    default:
        this.logger.logCatTxt(this.logger.getWARN(), this.LOG_TAG
                + ":getPrefs()",
                "Unsupported data type was givien as parameter. Shared preferences: "
                        + sharedPreferences + ", with key: " + key
                        + ", type: " + Integer.toString(type)
                        + " and context: " + context.toString());
    }

    // We should never reach this far but if we do an error has occurred and
    // we return the ERROR string
    return ERROR;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:57:25.547

是的，您的方法可以返回`String`：

```
return ERROR; 
```

它被声明为`String`.

```
final String ERROR = "ERROR"; 
```

此外，这可能会返回一个`String`：

```
return sharedPref.getString(key, (String) defaultObject); 
```

可能相关：

```
if (json != "") { 
```

不要将字符串值与`==`or进行比较`!=`。使用`String#equals`，即

```
if (!json.equals("")) { 
```

甚至这个：

```
if (json.isEmpty()) { 
```

在 Java 中，`String`如果出现错误则返回错误并不是一个好的设计。

`Exception`如果有错误，最好抛出某种类型，并让调用方法捕获异常并处理错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:57:15.607

您正在比较一个不等于运算符的字符串：`if (json != "")`您应该使用`if (!"".equals(json))`.

如果 json 为空，则返回 ERROR 女巫是一个字符串。如果您尝试强制转换为列表，则会导致异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T17:00:27.653

```
java.lang.String cannot be cast to java.util.List 
```

错误字符串说：您正在尝试将字符串转换为列表。使用调试器找到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T17:01:23.457

如果返回类型为，则在转换为另一种类型时`Object`使用它是一个好主意。`instanseof`同样如前所述，不要返回错误字符串，最好抛出一个`Exception`

# java - Twitter4j and Esper : throwing error at main java.lang.NoClassDefFoundError

> ID：16197697
> 
> 赞同：0
> 
> 时间：2013-04-24T16:47:56.807
> 
> 标签：java, twitter, esper

I'm following a tutorial [http://www.javacodegeeks.com/2012/03/twitter4j-and-esper-tracking-user.html](http://www.javacodegeeks.com/2012/03/twitter4j-and-esper-tracking-user.html). But when I'm trying to compile the project it gives me follwoing error:

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/runtime/RecognizerSharedState
    at com.espertech.esper.epl.generated.EsperEPL2GrammarLexer.<init>(EsperEPL2GrammarLexer.java:326)
    at com.espertech.esper.epl.parse.ParseHelper.parse(ParseHelper.java:99)
    at com.espertech.esper.core.EPAdministratorImpl.compileEPL(EPAdministratorImpl.java:299)
    at com.espertech.esper.core.EPAdministratorImpl.createEPLStmt(EPAdministratorImpl.java:142)
    at com.espertech.esper.core.EPAdministratorImpl.createEPL(EPAdministratorImpl.java:94)
    at com.twitter.message.TwitterTest.main(TwitterTest.java:39)
Caused by: java.lang.ClassNotFoundException: org.antlr.runtime.RecognizerSharedState
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 6 more 
```

I have added the relevant jars esper-4.9.0.jar, antlr-3.0.1.jar, twitter4j-core-2.2.6.jar. Please help me in resolving errors as I have done lot of google but there is as such no solution found.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:58:09.777

antlr-runtime-3.2.jar is the right jar (remove antlr)

# python - 制作 X 和 Y 坐标列表

> ID：16197699
> 
> 赞同：1
> 
> 时间：2013-04-24T16:48:03.220
> 
> 标签：python, list

我有以下列表：

```
Filedata:
[1, 0, 0, 0]
[2, 0, 0, 100]
[3, 0, 0, 200]
[4, 100, 0, 0]
[5, 100, 0, 100]
[6, 100, 0, 200]
... 
```

其中第一列是 ID，第二列是 X 坐标，第三列是 Y 坐标，第四列是 Z 坐标。

我想在原始列表中制作两个不同 X 和 Y 坐标的列表：

```
X:
[0, 100, ...]
Y:
[0, 100, ...] 
```

为此，我想到了一个代码，但在此过程中，我意识到必须有一个更简单的原因，而不是执行多个 for 和 if 循环。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:51:15.080

```
IDs,Xs,Ys,Zs = zip(*filedata)
positions = zip(Xs,Ys,Zs) # list of tuples of (x,y,z) 

unique_Xs = []
[unique_Xs.append(val) for val in Xs if val not in unique_Xs]

unique_Ys = []
[unique_Ys.append(val) for val in Ys if val not in unique_Ys] 
```

我认为可行，假设 filedata 是一个二维列表，虽然 filedata 不是一个很好的变量名......

我添加了一种在每个列表中获取唯一点的方法......虽然不完全确定这就是你想要的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T16:58:44.350

```
filedata = [
    [1, 0, 0, 0],
    [2, 0, 0, 100],
    [3, 0, 0, 200],
    [4, 100, 0, 0],
    [5, 100, 0, 100],
    [6, 100, 0, 200],
]

IDs, Xs, Ys, Zs = zip(*filedata)
Xs, Ys, Zs = set(Xs), set(Ys), set(Zs)
print 'X:', Xs
print 'Y:', Ys
print 'Z:', Zs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:00:48.877

似乎 OP 只想要 X 和 Y 的列表。他可以做这样的事情：

```
xs=zip(*filedata)[1]
ys=zip(*filedata)[2] 
```

# grails - 在grails中使用spring security以编程方式登录用户并返回sessionId

> ID：16197701
> 
> 赞同：1
> 
> 时间：2013-04-24T16:48:07.243
> 
> 标签：grails, spring-security

我正在编写移动应用程序的 Web 服务。

应用程序必须验证实际上我的第一个方法是在 **j_spring_security_check**上使用 params 进行发布请求：

j_username=我的用户名

j_password=我的密码

阿贾克斯=真

并通过在登录控制器中进行这些更改来取回 sessionId

```
def ajaxSuccess = {     
    ....
    result.token  = springSecurityService.authentication.details.sessionId
    render( result as JSON)
} 
```

有没有其他方法可以通过编程方式进行身份验证并使用我自己的控制器返回 sessionId，所以我可以自定义身份验证方法（例如我想在登录时更新其他参数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:08:05.770

如果额外的参数依赖于用户输入，您几乎可以肯定必须提供自定义登录。如果这些参数将在用户之外进行管理，我不明白为什么您不能通过填充自定义用户详细信息对象在控制器类中执行此操作。同时，您可以通过`RequestContextHolder.currentRequestAttributes().getSessionId()`（无耻从[这里](https://stackoverflow.com/questions/3542026/retrieving-session-id-with-spring-security)窃取）获取会话ID。

# c++ - 我如何理解 llvm 何时将签名更改为功能

> ID：16197702
> 
> 赞同：0
> 
> 时间：2013-04-24T16:48:09.417
> 
> 标签：c++, c, llvm

我有这样的C代码：

```
typedef struct {
  int a1;
  double a2;
} str3;
...
extern void someVoidFunc(int a);
extern str3 someStrFunc(int b);
int main() {
  someVoidFunc(0);
  someStrFunc(0);
  return 0;
} 
```

在 llvm 表示中，这看起来像：

```
%struct.str3 = type { i32, double}
...
call void @someVoidFunc(i32 0)
call void @someStrFunc(%struct.str3* sret %tmp, i32 0)
... 
```

所以，我不明白，为什么 llvm 更改签名，以及我如何理解哪种类型真正返回函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T20:24:21.687

按值传递给函数并按值返回的结构很**棘手**。它们很棘手，因为它们需要关于编译器如何将它们转换为程序集（平台 ABI）的非常具体的规则。虽然 LLVM 试图保持平台独立，但 C 在这方面非常依赖于平台，因此 Clang 对按值传递的结构和按值返回的结构进行特定于 ABI 的降低，以便随后的 LLVM IR --> 本机代码降低*只是工作*。

**TL;DR：**你选择了一个非常讨厌的角落来探索。如果您真的关心此类函数签名，那么首先通过 AMD64 ABI（或 ARM ABI）查看通过寄存器传递结构的规则。如果您并不真正关心这些特定的用例，那么可以找一些更简单的例子来玩。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-25T08:39:16.513

那么，@Collin 怎么说这是 RVO。我们可以理解 llvm 何时通过属性[sret](http://llvm.org/releases/3.2/docs/LangRef.html#paramattrs)将签名更改为功能。在代码中，我们可以使用[hasStructRetAttr方法检测到这一点](http://llvm.org/docs/doxygen/html/classllvm_1_1Argument.html)

# java - 获取 javax.ejb.Timer 的回调

> ID：16197705
> 
> 赞同：0
> 
> 时间：2013-04-24T16:48:16.563
> 
> 标签：java, timer, ejb

在我正在处理的项目中，我需要显示与 bean 关联的计时器列表并显示有关它们的信息。需要的选项之一是触发与列表中特定 Timer 关联的事件。我还没有找到一种方法来获得计时器的回调，所以任何帮助都将不胜感激。

现在定时器是通过这样的注释创建的：

```
@Schedule(second = "0", minute = "0", hour = "*")
public void someMethod()
{
    //Some code here
} 
```

获取计时器所有信息的方法是这样的：

```
public ArrayList<SchedulerInfoModel> getTimers()
{
    ArrayList<SchedulerInfoModel> timerInfo = new ArrayList<SchedulerInfoModel>();

    Collection<Timer> timers = timerService.getTimers();
    for (Iterator<Timer> it = timers.iterator(); it.hasNext();)
    {
        Timer timer = it.next();
        timerInfo.add(new SchedulerInfoModel(timer.getInfo().toString(), timer.getNextTimeout().toString(), timer.getSchedule().toString()));
    }

    return timerInfo;
} 
```

其中 SchedulerInfoModel 是一个简单的 POJO：

```
public class SchedulerInfoModel
{
    private String info;
    private String timeout;
    private String schedule;

    //getter/setters omitted for brevity
} 
```

那么问题来了，有没有办法获得 Timer 的回调？或者如果这是不可能的，有什么方法可以“强制”触发 Timer 而不会影响未来的超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:48:11.953

您是否尝试获取与 Timer 关联的 Method 对象？不，没有标准的方法可以做到这一点。我的建议是在 info 对象中嵌入一些信息。

也没有办法强制计时器触发。最接近的就是让超时回调方法也成为业务方法，然后直接调用该方法。

# php - 如何在客户端 PC 上将 Javascript 变量保存为文件

> ID：16197706
> 
> 赞同：3
> 
> 时间：2013-04-24T16:48:19.763
> 
> 标签：php, javascript, ajax, file-io

我将在编辑中发布我的代码...我无法提交包含代码的问题。

我维护一个聊天程序，该程序在我被分配到它时已经构建。我的工作一开始只是为它设置主题以使其与我们网站的其他部分相匹配。现在管理层要求我提供额外的功能。一个这样的功能是客户可以选择将聊天日志的副本保存到他们的计算机上。

整个聊天对话存储在一个名为 chatHistoryHTML 的 javascript 变量中，并且一个循环通过向 chatHistoryHTML 变量添加新的文本行并将其显示在“历史”div 中，使页面上的聊天会话每 5 秒更新一次。看。

现在，我了解如何打开一个新窗口以**仅**显示聊天历史记录，而不显示徽标、背景或文本输入框。但是，我无法使用我的方法将 PHP 命令传递到该新页面。

理想情况下，我想要一个解决方案，允许用户单击一个按钮并显示一个保存对话框，该对话框只保存聊天对话，而不打开新窗口。我现在正在打开一个新窗口，因为我试图避免保存页面上的所有其他内容。

我愿意接受建议。我懂一点 Javascript 和 PHP，但对 AJAX 一无所知

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-24T17:08:34.863

所有在客户端，你可以尝试：

```
var content, MIME_TYPE, theBlob, a;

// What will actually be put into the file
content = "THE FILE CONTENT";

// The file type
MIME_TYPE = "text/plain";
// Basically, the file itself
theBlob = new Blob([content], {type: MIME_TYPE});

// The anchor element
a = document.createElement("a");
// Set the name of the file that will be downloaded
a.download = "Chat_History.txt";
// Set the contents to be downloaded
a.href = window.URL.createObjectURL(theBlob);
// Anchor's text
a.textContent = "Download";

// What's displayed as the URL of the anchor (when hovered, copied, etc.)
a.dataset.downloadurl = [MIME_TYPE, a.download, a.href].join(":");

// Add the anchor to the page
document.body.appendChild(a); 
```

**演示：http:** [//jsfiddle.net/oqskpydg/](http://jsfiddle.net/oqskpydg/)

这确实使用了并非在所有浏览器中都可用的功能，但它是一个可靠的选择。

* * *

**参考：**

*   `Blob`构造函数 - [https://developer.mozilla.org/en-US/docs/DOM/Blob](https://developer.mozilla.org/en-US/docs/DOM/Blob)
*   `Blob`浏览器兼容性 - [http://caniuse.com/blobbuilder](http://caniuse.com/blobbuilder)
*   `download`属性/属性 - [https://developer.mozilla.org/en-US/docs/HTML/Element/a#attr-download](https://developer.mozilla.org/en-US/docs/HTML/Element/a#attr-download)
*   `download`属性/属性浏览器兼容性 - [http://caniuse.com/download](http://caniuse.com/download)
*   `URL.createObjectURL`- [https://developer.mozilla.org/en-US/docs/DOM/window.URL.createObjectURL](https://developer.mozilla.org/en-US/docs/DOM/window.URL.createObjectURL)
*   `dataset`属性 - [https://developer.mozilla.org/en-US/docs/DOM/element.dataset](https://developer.mozilla.org/en-US/docs/DOM/element.dataset)
*   `dataset`属性浏览器兼容性 - [http://caniuse.com/dataset](http://caniuse.com/dataset)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:20:40.087

您可以使用比 Ian 的解决方案更广泛支持的[Data URI 方案](https://en.wikipedia.org/wiki/Data_URI_scheme)，并且它不依赖于服务器端：

```
<a href="data:application/octet-stream;base64,PHVsPjxsaT50aGlzPGxpPmlzPGxpPmE8bGk+Y2hhdCBsb2c8L3VsPgo=">Download chat log</a> 
```

您可以使用`window.btoa`and`window.atob`进行 base64 处理。

[演示](http://pastehtml.com/view/d03o7q8zr.html)。显示框架源以查看源而不是 PasteHTML 的包装。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T16:51:33.510

主要选项：

*   将聊天日志转储到新窗口并调用`print()`（隔离日志并使其可打印，否则用户也会抓取页面上的所有 UI 元素），或者
*   使用 AJAX 并将其发送到服务器，然后服务器将其中继到电子邮件回给用户。

JavaScript 无法将文件本地保存到客户端。但是，您有一个次要选择：

*   将其迁移到 Silverlight/Flash 以具有附加功能/特性。

# c# - 替换缓存的设计模式

> ID：16197708
> 
> 赞同：3
> 
> 时间：2013-04-24T16:48:25.677
> 
> 标签：c#, oop, design-patterns

在我们的程序中，我们将大量数据存储在缓存中。缓存是一个字典。由于大量数据在内存中，我们计划使用数据库而不是字典。因此，曾经在字典中的所有数据都将被移动到数据库中的表中。现在的问题是，项目中很多地方都用到了字典缓存。请建议我一种设计模式，以最少的代码更改有效地用数据库替换字典缓存。

缓存类似于 Dictionary(string, MyBusinessObject)。字典键将是“Id”。MyBusinessObject 将在其属性中包含数据。例如，myBusinessObject.CustomerName、myBusinessObject.CustomerAge。在我的整个项目中，各种模块都会在字典中搜索 Id（键）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T16:55:48.683

字典实现了`IDictionary<TKey, TValue>`你应该在数据库上创建一个外观，它也实现了`IDictionary<TKey, TValue>`然后确保你不再使用具体的字典。最后，您需要为新的抽象创建一个工厂，这将允许您将其替换为用于测试的模拟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T17:16:57.000

您是否考虑过[PersistentDictionary](http://managedesent.codeplex.com/wikipage?title=PersistentDictionaryDocumentation)？`Dictionary`它是建立在 ESENT 数据库引擎之上的开源软件。你可以使用`Dictionary`它可以存储多达 16TB。

# security - 如何不允许通过 URL 在浏览器中显示 Facelets 源

> ID：16197709
> 
> 赞同：1
> 
> 时间：2013-04-24T16:48:31.380
> 
> 标签：security, jsf, servlets, facelets

在我的`web.xml`我有：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping> 
```

我有一些页面，存储在我的`{project}/webapp/view/`文件夹中

喜欢：`localhost/mybodule/view/index.xhtml`

并且能够看到所有的 facelets 来源。如何让它`404`出错呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T18:57:13.660

因为我的问题与**JSF**和**404**错误抛出有关。

我想出了一个答案：

向 web.xml 添加设置：

```
<context-param>
<param-name>facelets.RESOURCE_RESOLVER</param-name>
<param-value>our.company.CustomResourceResolver</param-value>
</context-param> 
```

在哪里：`CustomResourceResolver extends javax.faces.view.facelets.ResourceResolver`

在那里我会有一个被覆盖的方法：

```
@Override
public URL resolveUrl(String path) {
 try {
   String fixedPath = "/WEB-INF/pages";

   return getResolvedPath(path, fixedPath);
} catch(IOException e) {
  throw new FacesException(e);
}

} 
```

这里我们假设我们所有的页面都位于`/WEB-INF/pages`文件夹中

因此，每次发生异常时，它都会被解释为**404**。

并且：我们应该删除- 如果我们想`<security-constraint>`向`web.xml`用户显示他无权访问特定资源，那么这个人很好，但在我们的例子中，我们不想显示这个。我们不想向他展示这个资源已经存在的事实。

# perl - 使用哈希构建排序数据表

> ID：16197710
> 
> 赞同：0
> 
> 时间：2013-04-24T16:48:33.673
> 
> 标签：perl, sorting, hash

我已经构建了几个脚本来组织测试设备的数据输出，但我遇到了这个心理障碍。

测试设备监控来自多个受试者（具有标识符 ID1、ID2 等）的四种类型的输入（Data1、Data2、Data3、Data4），并以日期和时间戳为间隔记录每一种输入。设备转储的 CSV 文件组织如下：

```
Start,Date,Time0
Subject,ID1,ID2,[...],ID#

Date,Time1
Data1,aa1,aa2,[...],aa#
Data2,ba1,ba2,[...],ba#
Data3,ca1,ca2,[...],ca#
Data4,da1,da2,[...],da#

Date,Time2
Data1,ab1,ab2,[...],ab#
Data2,bb1,bb2,[...],bb#
Data3,cb1,cb2,[...],cb#
Data4,db1,db2,[...],db# 
```

...等等。

“开始”将此行标识为数据的开头；“主题”将该行标识为包含主题 ID 的行；“Data1”-“Data4”将该行标识为包含该数据类型的数据的行，该数据类型在前面的日期和时间指示的特定时间间隔内。

因此，输出数据被分成多个块，这对于设备制造商来说确实是一个不幸的选择，尤其是在几天或几周内每隔几分钟收集一次数据时。要分析数据而不必手动选择每 6 行，我们需要将所有数据类型分组到块中，如下所示：

```
Data1,Subject,ID1,ID2,[...],ID#
Date,Time1,aa1,aa2,[...],aa#
Date,Time2,ab1,ab2,[...],ab#
...

Data2,Subject,ID1,ID2,[...],ID#
Date,Time1,ba1,ba2,[...],ba#
Date,Time2,bb1,bb2,[...],bb#
... 
```

目标是将四种数据类型中的每一种都放在单独的块中，以便任何给定主题（ID1 到 ID#）的时间课程数据将位于单个列中，日期和时间作为初始列。（上面的“DataX”和“Subject”只是简单地用作列标题。）

目前我通过将每一行放入一个单独的数组来做到这一点。这是一种快速而肮脏的完成工作的方式。该脚本获取时间和日期，并将 ID 行推入四个数组中的每一个（每种数据类型一个），然后根据数据类型依次添加每个数据行。输出只是逐行打印每个数组，添加一个空白行，然后打印下一个数组。这可行，但理想情况下，我想按主题 ID 对数据列进行排序，然后打印出数据，而不会丢失按日期和时间戳进行的垂直排序。（因为数据已经垂直排序，所以我目前在打印之前对数组没有排序功能。）

最简单的方法是什么？在精神上，我在尝试解析如何将 Y 行、X 列中的数据与 CSV 文件中 X 列中的主题 ID 相关联时遇到了麻烦。我使用的所有其他数据输出文件要么将主题 ID 作为每行中的第一项，要么每个主题有一个文件，这样更容易。

注意：因为时间/日期在他们自己的行上，我为每个使用一个变量；如果脚本检测到包含新时间和/或日期的行，它会更新变量值。

编辑——我采纳了 Borodin 的一些建议（让 FH 按行而不是按段落处理）。我将主题行中的数据拉入一个数组（@ids），并使用日期/时间和 ID 作为键将数据行推入散列：

```
my ($datatype, @fields) = @line;
push @keys, $datatype unless exists $data{$datatype};
my $datetime = "$date\,$time";
push @timestamps, $datetime unless exists $data{$datetime};
for my $i ( 0 .. $#fields) {
    push @{$data{$datetime}{$ids[$i]}}=>$fields[$i]
    }; 
```

我还将日期时间对放入第二个数组以维护顺序（@timestamps）。此时的问题是我在将值打印出来时遇到问题。目前正在尝试：

```
 foreach my $date (keys %data) {
    print OUT $date;
    foreach my $id (@ids) {
        foreach my $s (keys %{$data{$date}}) {
            if ( exists($data{$date}{$id}) ) {
                print OUT ",", $data{$date}{$id}
                }
            else {
                print OUT ",";
                }
            }
        }
    print OUT "\n"; # close printing on a given date
    } 
```

继续获取垃圾输出（打印哈希引用，而不是实际值！）。Dumper 输出如下所示：

```
$VAR1 = {
    'date,time' => [
                    'ID1' => [
                            '0.00'
                            ]
                    'ID2' => [
                            '0.12',
                            ]
                    'ID3' => [
                            '0.17',
                            ]
                    'ID4' => [
                            '0.22',
                            ]
                    ]
            }
    }; 
```

打印输出是这样的：

```
date,time,ARRAY(0x7f91c1030f60),ARRAY(0x7f91c1030f60),ARRAY(0x7f91c1030f60),ARRAY(0x7f91c1030f60) 
```

抱歉，到目前为止的示例一直在解释上造成问题。输入文件中有很多多余的数据和文本，我只包含了我试图提取和排序的部分的高度简化版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:46:44.217

该程序将所有数据读入散列并以您需要的转换状态再现它。这很好，除非数据非常庞大并且不容易放入您可用的内存中，在这种情况下您将需要不同的解决方案。

该程序需要输入文件的名称作为命令行参数，`data.csv`如果没有提供，则默认为。它设置`$/`为空字符串以启用 Perl 的“段落模式”输入，其中数据被读取到下一个空白行或文件末尾。这意味着一次读取给定时间间隔的所有数据，并且在处理之前必须进一步拆分为单独的行。

```
use strict;
use warnings;

my ($subject, @ids);
my @sort_order;
my (%data, @keys);

my ($file) = @ARGV;
$file //= 'data.csv';

open my $fh, '<', $file or die qq{Unable to open file "$file" for reading: $!};
local $/ = '';
while (<$fh>) {

  my @rows = split /\n/;

  unless ($subject) {
    ($subject, @ids) = split /,/, $rows[1];
    @sort_order = sort { $ids[$a] cmp $ids[$b] } 0 .. $#ids;
    next;
  }

  my ($date, $time) = split /,/, shift @rows;
  for (@rows) {
    my ($id, @fields) = split /,/;
    push @keys, $id unless exists $data{$id};
    push @{ $data{$id} }, [$date, $time, @fields[@sort_order]];
  }
}

for my $key (@keys) {
  print join(',', $key, $subject, @ids[@sort_order]), "\n";
  print join(',', @$_), "\n" for @{ $data{$key} };
  print "\n";
} 
```

**输出**

```
Data1,Subject,ID#,ID1,ID2,[...]
Date,Time1,aa#,aa1,aa2,[...]
Date,Time2,ab#,ab1,ab2,[...]

Data2,Subject,ID#,ID1,ID2,[...]
Date,Time1,ba#,ba1,ba2,[...]
Date,Time2,bb#,bb1,bb2,[...]

Data3,Subject,ID#,ID1,ID2,[...]
Date,Time1,ca#,ca1,ca2,[...]
Date,Time2,cb#,cb1,cb2,[...]

Data4,Subject,ID#,ID1,ID2,[...]
Date,Time1,da#,da1,da2,[...]
Date,Time2,db#,db1,db2,[...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:26:41.577

您是否考虑过将数据放入 SQL 数据库中？[例如“少服务器”SQLite]

这可能有点矫枉过正，但它应该为您提供更好的大数据集灵活性。

# c# - ItemsControl 的绑定可见性

> ID：16197712
> 
> 赞同：0
> 
> 时间：2013-04-24T16:48:43.213
> 
> 标签：c#

我使用以下代码片段来绑定 ItemsControl 的可见性。

```
<ItemsControl x:Name="PART_ItemsControl"
        Margin="{Binding ExcelLikeFilterAdvVisibility, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource marginConverterForOldExcelLikeFiltering}, ConverterParameter=ItemsControl}"
        ItemsSource="{TemplateBinding ItemsSource}"
        Visibility="{Binding Path=Items.Count, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource itemsSourceCountConverter}}"> 
```

由于此代码段，我在输出窗口中收到以下错误。

错误：

`System.Windows.Data Error: BindingExpression path error: 'Items' property not found on 'ToolTipsDemo.StocksViewModel' 'ToolTipsDemo.StocksViewModel' (HashCode=42842654). BindingExpression: Path='Items.Count' DataItem='ToolTipsDemo.StocksViewModel' (HashCode=42842654); target element is 'System.Windows.Controls.ItemsControl' (Name='PART_ItemsControl'); target property is 'Visibility' (type 'System.Windows.Visibility')..`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T16:51:58.653

```
Visibility="{Binding Path=Items.Count,
                     RelativeSource={RelativeSource Self},
                     UpdateSourceTrigger=PropertyChanged,
                     Converter={StaticResource itemsSourceCountConverter}}"> 
```

# c# - 当方法具有 IDictionary 和 IDictionary 重载时的不明确调用

> ID：16197715
> 
> 赞同：8
> 
> 时间：2013-04-24T16:48:49.780
> 
> 标签：c#, .net, compiler-errors, overloading, ambiguous

当一个方法有两个重载，一个接受`IDictionary`和另一个接受`IDictionary<TKey, TValue>`时，传递`new Dictionary<string, int>()`给它被认为是模棱两可的。但是，如果将两个重载更改为 accept`IEnumerable`和`IEnumerable<KeyValuePair<TKey, TValue>>`，则调用不再模棱两可。

As`Dictionary<TKey, TValue>`实现上述所有接口（准确地说，.NET 4.5 中的 ,`IDictionary<TKey, TValue>`​​ , `ICollection<KeyValuePair<TKey, TValue>>`, `IDictionary`, `ICollection`, `IReadOnlyDictionary<TKey, TValue>`, `IReadOnlyCollection<KeyValuePair<TKey, TValue>>`, `IEnumerable<KeyValuePair<TKey, TValue>>`, `IEnumerable`, ）；继承自和继承自，我不明白为什么会发生这种情况。`ISerializable``IDeserializationCallback``IDictionary``IEnumerable``IDictionary<TKey, TValue>``IEnumerable<KeyValuePair<TKey, TValue>>`

示例控制台应用程序：

```
using System;
using System.Collections;
using System.Collections.Generic;

namespace AmbigousCall
{
    internal class Program
    {
        static void Main (string[] args)
        {
            var dic = new Dictionary<string, int>();
            FooDic(dic); // Error: The call is ambiguous
            FooEnum(dic); // OK: The generic method is called
            Console.ReadKey();
        }

        static void FooDic (IDictionary dic) {}
        static void FooDic<TKey, TValue> (IDictionary<TKey, TValue> dic) {}
        static void FooEnum (IEnumerable dic) {}
        static void FooEnum<TKey, TValue> (IEnumerable<KeyValuePair<TKey, TValue>> dic) {}
    }
} 
```

我得到的错误是：*以下方法或属性之间的调用不明确：'AmbigousCall.Program.FooDic(System.Collections.IDictionary)'和'AmbigousCall.Program.FooDic(System.Collections.Generic.IDictionary)'*

问题1：为什么会这样？

问题 2：如果一个类同时实现了泛型和非泛型参数，那么如何同时接受泛型和非泛型参数而不引起歧义？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T16:53:59.080

C# 将调用最具体的可用重载。`IEnumerable<T>`识别比`IEnumerable`因为`IEnumerable<T>`extends更具体没有问题`IEnumerable`。但是，`IDictionary<T, U>`不扩展，因此即使实现了两者，编译器也*无法*识别哪个更具体。对于编译器来说，这些也可能是完全不相关的接口。`IDictionary``Dictionary<T, U>`

您必须使用显式强制转换给编译器一个提示：

```
FooDic((IDictionary)dic); // not ambiguous
FooDic((IDictionary<string, int>)dic); // not ambiguous 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T16:55:06.457

区别在于`IEnumerable<T>`继承`IEnumerable`，而`IDictionary<TKey, TValue>`没有继承`IDictionary`。

因此，在接受`IEnumerable<T>`and的重载之间解析`IEnumerable`是一个简单的问题，即确定参数是否匹配更具体或更通用的版本，而在`IDictionary`and之间解析`IDictionary<TKey, TValue>`是不可能的，因为这两个接口不相关。

如果您有接受`IDictionary`and的重载，`IDictionary<TKey, TValue>`则必须将参数转换为所需的类型：

```
FooDic((IDictionary)value); 
```

或者

```
FooDic((IDictionary<TKey, TValue>)value); 
```

# php - PHP 联系表单脚本不会运行/页面打开

> ID：16197720
> 
> 赞同：1
> 
> 时间：2013-04-24T16:49:13.160
> 
> 标签：php, contact-form

我被困住了，我希望有人能帮助我。我正在尝试使用 PHP action="" method="post" 向我的网站添加一个简单的联系表单。当我单击“提交”按钮时，不是运行脚本，而是打开“send_contact.php”页面，您会看到所有代码。我已经检查并测试了我的服务器（blue.host），它被设置为运行 php 脚本。我已经尝试了一切，我很茫然。这是HTML：

```
<div class="form">
<form id="myform" name="myform" action="send_contact.php" method="post">
<label>Name</label>

<input type="text" name="name" id="name" />                 
<label>E-mail</label>
<input type="text" name="email" id="email" />

<label>Phone</label>
<input type="text" name="phone" id="phone" />

<label>Message</label>
<textarea name="message" rows="5" cols="60"></textarea>

<button name="send" type="submit">send</button>
<button name="reset" type="reset">reset</button>
<div class="spacer"></div>
</form><!--end myform div-->
</div><!--end form div--> 
```

这是 PHP 脚本：

```
<?php

// From
$header="from: $name <$mail_from>";

// Mail of sender
$mail_from="$customer_mail";

// Contact phone
$phone ="$phone"; 

// Details
$message="$message";

// Enter your email address
$to ='jacine.arias@gmail.com';

$send_contact=mail($to,$header,$mail,$phone,$message);

// Check, if message sent to your email
// display message "Thank you! Your message has been recieved."
if($send_contact){
echo "Thank you! Your message has been recieved.";
}
else {
echo "ERROR";
}
?> 
```

这是CSS：

```
/*-----------FORM---------------*/

.form {
    border: 1px solid #262223;
    margin: 0 auto;
    padding: 14px;
    width: 375px;

}

.form label {
    display: block;
    text-align: right;
    width: 80px;
    float: left;
}

.form input {
    float: left;
    font-size: 12px;
    padding: 4px 2px;
    border: 1px solid #262223;
    width: 270px;
    margin: 2px 0 10px 10px;
}

textarea {
    float: left;
    font-size: 12px;
    padding: 4px 2px;
    border: 1px solid #262223;
    width: 270px;
    margin: 2px 0 20px 10px;
}

button[type="submit"] {
    clear: both;
    color: #fff;
    width: 100px;
    height: 31px;
    text-align: center;
    background: #F20F4B;
    margin-right: 5px;
    float: left;
}

button[type="reset"] {
    clear: both;
    color: #fff;
    width: 100px;
    height: 31px;
    text-align: center;
    background: #F20F4B;
    display: inline;
} 
```

这是我网站上的实际页面：http: [//jacineariasdesign.jacineariasweb.com/contact.html](http://jacineariasdesign.jacineariasweb.com/contact.html) 任何帮助完成这项工作将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:21:39.497

**来，试试这个。**经过测试，可以使用额外的安全功能进行修改，**但它适用**于您提供的表单。

还添加了一些错误检查。

**如果它对您不起作用，那么您的“您的”服务器上存在 PHP 问题。**

你原来的 PHP 脚本从来没有一个`Subject`条目开始。

```
<?php

$headersep = "\r\n";
$header = "From: $name <$email>" . $headersep . "Reply-To: $name <$email> . $headersep";
$email = $_POST['email'];
$subject="Your subject here";
$phone = $_POST['phone']; 
$message = "From: $name\n\nMessage: $message\n\nEmail: $email\n\nTelephone: $phone";
$to ='youremail@example.com';

if (!empty ($_POST['email']) && ($_POST['message'])) {
  mail($to, $subject, $message, $header);
echo "Thank you $name, your message has been received.";
exit;
}

if ( (empty ($_POST['email'])) && (empty ($_POST['message'])) ) {
echo "ERROR, you did not fill in the <b>Email</b> and the <b>message</b> body.";
exit;
}

elseif (empty ($_POST['email'])) {
echo "ERROR, you did not fill in your Email address.";
exit;
}

elseif (empty ($_POST['message'])) {
echo "ERROR, you did not fill in the message body.";
exit;
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:54:28.253

我查看了您的网站，发现您的文件确实以 .php 结尾。我认为您的服务器尚未设置为将 .php 文件作为 php 执行。

您必须与服务器的管理员合作，以确保 .php 文件正在通过 php 处理程序运行。

配置的细节将取决于您的服务器平台......有很多网站可以引导您完成这些步骤。我不想特别推荐一个，因为我不知道你的出发点是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-03T00:55:13.600

请在下面查看我的 php 脚本。我已经设置了 SSMTP 并`echo "hello " | mail -s "test" mail@gmail.com`从 Ubuntu 命令行发送邮件。

```
<?php
/*
 *  CONFIGURE EVERYTHING HERE
 */

// an email address that will be in the From field of the email.
$from = 'Contact form <www.sabinamortgages.ca>';

// an email address that will receive the email with the output of the form
$sendTo = 'Sabina <sabina.kandik@premieremortgage.ca>';

// subject of the email
$subject = 'New message from contact form';

// form field names and their translations.
// array variable name => Text to appear in the email
$fields = array('name' => 'Name', 'surname' => 'Surname', 'need' => 'Need', 'email' => 'Email', 'message' => 'Message'); 

// message that will be displayed when everything is OK :)
$okMessage = 'Contact form successfully submitted. Thank you, I will get back to you soon!';

// If something goes wrong, we will display this message.
$errorMessage = 'There was an error while submitting the form. Please try again later';

/*
 *  LET'S DO THE SENDING
 */

// if you are not debugging and don't need error reporting, turn this off by error_reporting(0);
error_reporting(E_ALL & ~E_NOTICE);

try
{

    if(count($_POST) == 0) throw new \Exception('Form is empty');

    $emailText = "You have a new message from your contact form\n=============================\n";

    foreach ($_POST as $key => $value) {
        // If the field exists in the $fields array, include it in the email 
        if (isset($fields[$key])) {
            $emailText .= "$fields[$key]: $value\n";
        }
    }

    // All the neccessary headers for the email.
    $headers = array('Content-Type: text/plain; charset="UTF-8";',
        'From: ' . $from,
        'Reply-To: ' . $from,
        'Return-Path: ' . $from,
    );

    // Send email
    mail($sendTo, $subject, $emailText, implode("\n", $headers));

    $responseArray = array('type' => 'success', 'message' => $okMessage);
}
catch (\Exception $e)
{
    $responseArray = array('type' => 'danger', 'message' => $errorMessage);
}

// if requested by AJAX request return JSON response
if (!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
    $encoded = json_encode($responseArray);

    header('Content-Type: application/json');

    echo $encoded;
}
// else just display the message
else {
    echo $responseArray['message'];
} 
```

# command-line - 如何使用 Windows (XP) 批处理脚本使用用户名和密码登录网站

> ID：16197721
> 
> 赞同：4
> 
> 时间：2013-04-24T16:49:13.317
> 
> 标签：command-line, batch-file, windows-xp

我可以使用批处理文件连接网站，但我不知道如何在其中插入用户名和密码，当然还有点击提交按钮。

我还想知道如何使用 Windows 批处理脚本单击网站上可用的按钮（例如，在 xls 选项中导出）。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-24T17:48:29.070

用批处理我想不出办法。使用 VBScript，这很容易。创建一个新的文本文件并将其命名为 AutomateIE.vbs 并添加以下代码。双击它来运行它。

```
Set IE = CreateObject("InternetExplorer.Application")
IE.navigate "http://TheWebsite"
IE.Visible = True

While IE.Busy
    WScript.Sleep 50
Wend

Set ipf = IE.document.all.username
ipf.Value = "Username" 
Set ipf = IE.document.all.password
ipf.Value = "Password" 
Set ipf = IE.document.all.Submit
ipf.Click 
IE.Quit 
```

确保用户名和密码是网站中定义的实际名称，否则将不起作用。将它们更改为应有的状态。如果您发布 URL，我可以验证它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:08:33.120

调查[wget](http://www.gnu.org/software/wget/)实用程序。它不是 Windows 原生的，但可用于 Windows，并允许从任意 URL 获取文件，即使具有安全性。

登录通常涉及创建会话 cookie。这两个实用程序都有在工具调用之间存储会话 cookie 并在完成时清除 cookie 的机制。

按钮单击通常只是为 HTML 表单提交提供的 UI。在这些情况下，您创建一个包含要提交的数据的文件，并在实用程序获取正确的 URL 时将其提供给实用程序。弄清楚该 URL 需要解析和理解页面的 HTML。

许多页面都具有交互功能，其中按钮仅用于触发脚本操作。从批处理文件驱动那种网站可能是不可能的，因为它固有地假设一个交互式用户。[在这种情况下，您要么按照马特的回答](https://stackoverflow.com/a/16198850/68204)所建议的通过自动化 API 驱动交互式浏览器，要么通过浏览器本身的自动化来驱动交互式浏览器，也许是通过将 GreaseMonkey 与 Firefox 一起使用。

您需要[从 GnuWin32 项目中获取 wget，该](http://gnuwin32.sourceforge.net/packages/wget.htm)项目提供了许多源自 Unix 的有趣工具和实用程序的 Windows 端口。

一个替代方法`wget`是[cURL](http://curl.haxx.se/)，它具有非常相似的一组功能，并且也可用于 Windows。

# ipad - Appcelerator 根据平台更改图像

> ID：16197722
> 
> 赞同：0
> 
> 时间：2013-04-24T16:49:13.727
> 
> 标签：ipad, appcelerator

我正在开发一个关于 Titanium 的应用程序。现在我正在尝试根据其平台、手机或平板电脑更改我的应用程序的图像。我究竟做错了什么？

```
"#header[platform=ios formFactor=handheld]" :{
    image:"/images/header.png"
}
"#header[platform=ios formFactor=tablet]" :{
    image:"/images/header-ipad.png"
} 
```

谢谢！

# sql-server - 存储过程可以用作参数吗

> ID：16197731
> 
> 赞同：-2
> 
> 时间：2013-04-24T16:49:48.953
> 
> 标签：sql-server, stored-procedures, parameters, insert

```
插入到 TEMP_TABLE (aNumber, aDate) 值 ((aSproc param1, param2) , myDate)
```

我需要传递一个带有参数的存储过程作为插入语句的参数。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:59:21.533

这将取决于存储过程返回的内容。存储过程返回由 SP 中发出的最后一次选择产生的表。因此，如果您的 SP 以结尾，`SELECT NULL`那么您的 SP 将返回 NULL，然后您的插入将返回 NULL。对于您必须工作的内容，您必须确保存储过程仅返回一个值，即一个包含一行和一列的表。

这样做的原因是因为您的 insert 期望单个值成为其 value 子句的一部分，并且您可能返回多行和多列。您可以通过结束您的 SP 来测试这一点，该 SP`SELECT 1`会将 int 返回到您的插入中，然后插入将具有它可以理解为其值子句的一部分的值类型。

还发布您的 SP 将帮助我们调试它。

# jakarta-ee - 向 Java EE 身份验证添加最大重试功能

> ID：16197733
> 
> 赞同：0
> 
> 时间：2013-04-24T16:50:00.383
> 
> 标签：jakarta-ee, authentication

对于我的应用程序，我使用数据源领域进行身份验证。

我想知道是否有一种简单的方法可以向 j_security_check 添加一些功能，例如最大重试次数或 2 次登录尝试之间的空闲时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:53:51.127

可以通过编写 JAAS 模块来实现。如果您以前没有做过，它涉及相当多的工作。

# sql-server-2008 - 将 datetime2 转换为 datetime 时出现“超出范围”错误

> ID：16197735
> 
> 赞同：3
> 
> 时间：2013-04-24T16:50:02.103
> 
> 标签：sql-server-2008

我有一个表 ( `table1`)，其中包含`StartDate, StartTime, EndTime`, all`datetime2`和一个`OverMidnight`布尔值，它指定是否`EndDate`将不同于 (+1) `StartDate`。

我需要将它们移动到另一个表（`table2`），其中的列`StartDate`和 an`EndDate`都需要是`datetime`类型，并使用`StartDate`with`StartTime`来获取新的`StartDate`and `StartDate`，`OverMidnight`并`EndTime`使用`EndDate`.

无论我尝试了什么，它都会给我一个错误：

> 将 datetime2 数据类型转换为 datetime 数据类型导致值超出范围。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T16:55:41.117

[DATETIME](http://msdn.microsoft.com/en-gb/library/ms187819.aspx)和[DATETIME2](http://msdn.microsoft.com/en-us/library/bb677335.aspx)具有不同的可接受日期范围。

约会时间：

> 1753 年 1 月 1 日至 9999 年 12 月 31 日

日期时间2：

> 0001-01-01 至 9999-12-31

我会检查您的原始数据中是否有任何日期超出`DATETIME`范围，或者您的转换代码是否`DATETIME`错误地创建了超出范围的日期。

# regex - Vim 高亮正则表达式

> ID：16197749
> 
> 赞同：4
> 
> 时间：2013-04-24T16:50:53.027
> 
> 标签：regex, vim, vim-syntax-highlighting

我有一个 cpp 语法高亮来突出 STL 算法，一行是

```
syn keywork cppSTL find 
```

我的问题是，在我正在工作的项目中，有许多具有名为的方法的类`find`被突出显示，我希望它只为 STL 调用突出显示。

所以我决定将上一行更改为：

```
syn match cppSTL /[^.>:]\<find\>/ms=s+1
syn match cppSTL /\<std::find\>/ contains=cppScope
syn match cppScope /::/
hi clear cppScope 
```

它在大多数情况下都有效。但是，如果在这一行中失败：

```
vector<string>::iterator i = find(find(x.begin(), x.end(), val), x.end(), term);
                                  ^^^^ 
```

第一个`find`正确突出显示，但第二个失败。我对 vim 正则表达式的有限知识说它应该匹配，但我不知道为什么它不匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:58:21.873

这可能是您正在寻找的。`find`它突出显示在其前面还包含 a 的行上的所有单词`::`。

```
syn match cppSTL /\(::.*\)\@<=\<find\>/ 
```

如果这不是您要的，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:43:49.603

我知道了！

问题是我的正则表达式在 find 后面需要一个字符，并且在括号内，左括号已经匹配，使我的正则表达式无效。

如果我将第一行替换为：

```
syn match cppSTL "[^.>:]\@<=\<find\>" 
```

# javascript - jquery/javascript，变量范围问题

> ID：16197752
> 
> 赞同：0
> 
> 时间：2013-04-24T16:50:59.727
> 
> 标签：javascript, jquery

我知道这可能是一个非常菜鸟的问题，但我看不出这里的问题是返回变量`pic_real_width.`

我认为这是一个范围的事情，但除了使其成为全球性（不能这样做）之外，我不确定如何设置和返回它。

提前致谢，

```
function get_real_width(img){
    var pic_real_width;
    $("<img/>") // Make in memory copy of image to avoid css issues
      .attr("src", $(img).attr("src"))
      .load(function() {
         pic_real_width = this.width;   
         console.log( pic_real_width ); // returns a number
       });
   console.log( pic_real_width ); //returns undefined
   return pic_real_width;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:53:29.163

您的函数将在 .load 调用完成之前退出，因此没有返回值。

'pic_real_width' 在加载回调函数期间设置，但与此同时，您的函数在等待 .load 完成时继续执行，因此在值设置之前退出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:56:33.397

简单来说，你传递给 load 的函数是异步的，异步函数有不同的模式函数上下文。

在示例中，无法遇到解决方案（我现在找不到解决方案），但是，您可以重构代码以异步获取图像的“真实宽度”，只需传递内部调用的其他回调传递给 load() 的函数。

例如：

```
function get_real_width(img, callback){
    var pic_real_width;
    $("<img/>") // Make in memory copy of image to avoid css issues
    .attr("src", $(img).attr("src"))
    .load(function() {
        pic_real_width = this.width;   
        callback( img, pic_real_width ); // Call the function with the number expected
    });
} 
```

因为它只是获取宽度并将其返回给函数。

但是，我知道，它不能在某些情况下使用。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:15:19.960

默认情况下，`ajax()`请求是异步的，因此调用`ajax()`通常会在请求完成之前返回。您可以改用回调函数。

```
function get_real_width(img, callback){
    var pic_real_width;
    $("<img/>") // Make in memory copy of image to avoid css issues
    .attr("src", $(img).attr("src"))
    .load(function() {
        pic_real_width = this.width;   
        callback(pic_real_width ); // Call the function with the number expected
    });
}

 get_real_width(img, function(returnedData){ //anonymous callback function        
    console.log(myVariable);
    return returnedData;
 }); 
```

如果你绝对必须，你可以[`async: false`在调用内部`ajax()`](http://api.jquery.com/jQuery.ajax/)使用.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T17:04:47.310

`.load`正在将`load`事件处理程序附加到图像并且该事件*可能*会被异步触发（如果浏览器缓存了图像，它可能是同步的），这意味着`.load`调用立即返回，并且当您到达`return pic_real_width;`.

但是，您可以使用[`$.Deferred`](http://api.jquery.com/jQuery.Deferred/)优雅的方式解决此问题。

```
function get_real_width(img){
    var def = $.Deferred();
    $("<img/>")
      .load(function() {
         def.resolve(this.width);
       })
      .attr("src", $(img).attr("src"));
    return def;
}

get_real_width().done(function (width) {
    console.log(width);
}); 
```

*请注意，我在设置源之前附加了处理程序，以防图像被缓存并且事件被同步触发*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T17:12:27.557

兑现承诺只是“一点点”更好......

```
function get_real_width(img, callback) {
    var dfd= $.Deferred(function (dfd) {

        $("<img/>")
            .attr("src", $(img).attr("src"))
            .load(function () {
                dfd.resolve(this.width);
            });
    });

    return dfd.promise();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T17:10:35.017

在英语中，这是`get_real_width`目前正在做的事情：

1.  创建一个名为`pic_real_width`.
2.  使用复制的 src 属性创建一个新`<img/>`元素，**一旦**`<img/>`加载该元素，**然后**运行内部函数。“once/then”部分是每个人都描述为异步的部分，因为相对于您的代码的其余部分，您不知道或无法控制何时会发生这种情况。
3.  立即登录并返回`pic_real_width`。

请注意，`pic_real_width`只有在调用内部函数并完成时才会设置，但在`get_real_width`退出时可能不会发生，因此`pic_real_width`在您记录并返回它时将是未定义的。

那么，你如何解决这个问题？

这取决于您如何使用`get_real_width`. 例如，如果您从 的结果创建警报`get_real_width`，如下所示：

```
alert(get_real_width(some_img)); 
```

然后，您可以改为修改您的函数，以便在附加到 .load 的函数内部发生警报：

```
function alert_real_width(img){
    $("<img/>")
      .attr("src", $(img).attr("src"))
      .load(function() {
         var pic_real_width = this.width;   
         alert( pic_real_width );
       });
} 
```

显然，我怀疑你正在做一个`alert`，但这应该让你知道如何解决这个问题。对于更通用的解决方案，您可以像其他用户建议的那样使用回调。

# asp.net - datagridview 中的性能问题

> ID：16197756
> 
> 赞同：0
> 
> 时间：2013-04-24T16:51:08.017
> 
> 标签：asp.net, performance, datagridview

我被问到一个问题：“在表包含数百万行的情况下，使用 datagridview 时如何优化性能”？请回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:10:05.877

网页中的性能问题可以分为 3 类，需要使用日志记录、跟踪等各种机制来分析是哪部分代码造成了瓶颈。

3类是

1.  客户端
2.  网络服务器
3.  D B

客户

1.  您可以使用分页以减少呈现的 html
2.  您应该在 gridview 中使用没有服务器事件的纯 html 控件
3.  您可以控制页面中使用的控件的命名，如果控件名称越长，则客户端呈现的字节数越多

服务器 1\. 缓存 2\. 使用自定义分页，然后可以设置 enabledviewstate= false 3\. 尽量最小化viewstate

DB 使用索引微调查询，分析查询成本并使用适当的补救措施。分区表

每个领域都需要一个特定的重点，并由绩效中面临的问题驱动。

# java - Jsoup - 如何处理未找到的元素

> ID：16197757
> 
> 赞同：1
> 
> 时间：2013-04-24T16:51:08.063
> 
> 标签：java, jsoup

当 Jsoup 无法找到元素时，我得到一个异常并且程序被终止。我想有一种方法可以在找不到元素时忽略它，以便程序继续运行。

我尝试了以下方法：

```
Element contactHtml = null;
String person = "";
Document doc = Jsoup.parse(html);
try {
    contactHtml = doc.select("p.initial-contact").get(0);
    person = contactHtml.text();
}  finally {} 
```

但是当元素不存在时，程序仍然会终止。有没有办法创建代码，只是忽略不存在的元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T16:59:49.103

尝试这个：

```
Element contactHtml = null;
String person = "";
Document doc = Jsoup.parse(html);

Elements elements = doc.select("p.initial-contact");
if(!elements.isEmpty()) {
   contactHtml = elements.get(0);
   person = contactHtml.text();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:57:49.973

当您尝试访问一个不存在的 listindex 时，就像您的示例中索引 0 处没有元素一样，您将收到 IndexOutOfBoundException。使用 try/catch 构造可以避免异常，但我不会使用“让它崩溃”的概念。相反，我会检查是否真的有一个带有名字的标签。

# excel - 为列中的每个单元格增加公式中的单元格引用

> ID：16197758
> 
> 赞同：0
> 
> 时间：2013-04-24T16:51:08.917
> 
> 标签：excel, reference, range, increment, cells

请原谅我的无知，但我需要以下代码的帮助

```
Sub D3()
Dim currentRow As String
Dim sTemp As String

sTemp = Range("D3").Formula 'cell in sheet that needs reference to be increased

Do While (IsNumeric(Right(sTemp, 1)))

    currentRow = Right(sTemp, 1) & currentRow
    sTemp = Mid(sTemp, 1, Len(sTemp) - 1)

Loop

currentRow = CLng(currentRow) + 1 'Number to increment cell reference by

Range("D3").Formula = sTemp & currentRow

End Sub 
```

由于我忘记了大部分编码，并且我认为这是一个简单的解决方案，因此我去谷歌并获得了上面的代码。它在单个单元格上运行良好，但我希望能够更新从 D3 到 D29 的一系列单元格中的公式，这就是我陷入困境的地方。

我试过了

```
sTemp = Range("D3:D29").Formula 
```

没有运气。

我目前可以获得我想要的唯一方法是创建 120ish 宏并在主宏中运行它们 - 我相信你会同意这不是很有效。

我希望能够轻松地将解决方案应用于工作表中的其他列。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:06:07.117

忽略你想要这样做的原因。我猜你缺少的是你只需要循环你的代码。

我猜你知道 D3:D29 的范围。修改您的代码如下

```
Sub D3()
Dim currentRow As String
Dim sTemp As String
Dim i as Integer

For i = 3 to 29

currentRow = ""

sTemp = Range("D" & i).Formula 'cell in sheet that needs reference to be increased

Do While (IsNumeric(Right(sTemp, 1)))

    currentRow = Right(sTemp, 1) & currentRow
    sTemp = Mid(sTemp, 1, Len(sTemp) - 1)

Loop

currentRow = CLng(currentRow) + 1 'Number to increment cell reference by

Range("D" & i).Formula = sTemp & currentRow

Next i
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T00:50:18.917

如果我正确理解了您的意图，下面的代码应该可以解决问题。它假定目标范围内的公式是单个单元格引用（例如，“=CC95”）。*

我已经消除了阻止代码编译的类型转换错误。此外，我重写了有些混乱的代码来增加行号。

要在其他列上运行该过程，只需更改 targetColumn、firstTargetRow 和 lastTargetRow 变量的值。

```
Sub IncrementFormulaRows()
   Dim formulaString As String
   Dim targetColumn As String
   Dim firstTargetRow As Long
   Dim lastTargetRow As Long
   Dim i As Long
   Dim j As Long

   targetColumn = "D"
   firstTargetRow = 3
   lastTargetRow = 29

   For i = firstTargetRow To lastTargetRow
      If Range(targetColumn & i).HasFormula Then          '// Skip cell if it does not 
         formulaString = Range(targetColumn & i).Formula  '// contain a formula
         j = Len(formulaString)
         While (j > 0) And IsNumeric(Mid(formulaString, j, 1))  '// Walk formula backwards 
            j = j - 1                                           '// to find last char of  
         Wend                                                   '// column reference
         Range(targetColumn & i).Formula = Left(formulaString, j) _
            & (Val(Mid(formulaString, j + 1, Len(formulaString) - j)) + 1)
      End If
   Next i
End Sub 
```

*当使用更复杂的公式时，该公式实际上会运行，只要它以单个单元格引用结尾。但是，我认为结果将是不可取的。

# adobe-analytics - Omniture s.tl() 函数会导致 0% 的跳出率吗

> ID：16197762
> 
> 赞同：5
> 
> 时间：2013-04-24T16:51:24.777
> 
> 标签：adobe-analytics

Omniture`s.tl()`功能是否会算作一次额外的“访问”，从而导致该访问者不被退回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T07:07:28.500

它不会算作额外的“访问”，但会算作额外的“命中”。

包含多次点击（在这种情况下，一次`s.t()`和`s.tl()`调用）的访问不计为一次*Bounce*。但是，它们仍然算作*Single Access*。

由于跳出率可以合法地使用单次访问或跳出来定义，因此了解两者之间的差异非常重要。根据您是否希望`s.tl()`呼叫包含/排除跳出访问将确定您要使用哪种跳出率方法。有关您想了解的有关它及其各种计算的所有信息，[请参阅本文。](http://microsite.omniture.com/t2/help/en_US/reference/index.html#Bounce_Rate)

# jsf-2 - 我该怎么做才能获得我的 bean 的用户名属性

> ID：16197772
> 
> 赞同：0
> 
> 时间：2013-04-24T16:51:54.743
> 
> 标签：jsf-2, spring-security

你好 Stackoverflow 社区 :)

我有一点时间在一个小的 jsf 应用程序上工作。现在我在我的jsf上集成了spring security ...我用spring security标签“j_username”更改了我的登录页面

```
<h:outputLabel for="j_username" value="User: * " />  
    <h:inputText id="j_username" required="true" label="username" ***value="#{loginBean.username}"***/>  
    <h:message for="j_username" display="text" style="color:red"/>

    <h:outputLabel for="j_password" value="Password: * " />  
    <h:inputSecret id="j_password" label="password" required="true" />  
    <h:message for="j_password" display="text" style="color:red"/>

    <p:commandButton type="submit" id="login" value="Login" ajax="false"
        action="#{loginBean.doLogin()}" /> 
```

我试图在 jsf 页面上使用值 # {} loginbean.username 恢复用户名 loginbean ..

因为我必须使用它在需要用户知识的页面中显示它

```
@ManagedBean(name="loginBean")
@SessionScoped
public class LoginBean {

    private String username;  

    private String password; 

public String getUsername() {  
        return username;  
    }  

    public void setUsername(String username) {  
        this.username = username;  
    }  

    public String getPassword() {  
        return password;  
    }  

    public void setPassword(String password) {  
        this.password = password;  
    }  
public String doLogin() throws ServletException, IOException {
        ExternalContext context = FacesContext.getCurrentInstance().getExternalContext();

        RequestDispatcher dispatcher = ((ServletRequest) context.getRequest())
                .getRequestDispatcher("/j_spring_security_check");

        dispatcher.forward((ServletRequest) context.getRequest(),
                (ServletResponse) context.getResponse());

        FacesContext.getCurrentInstance().responseComplete();

        return null;
    }

    public String dologout() {
        FacesContext.getCurrentInstance().getExternalContext().invalidateSession();
        return "/login.jsf";

    } 
```

> 我的问题是填充页面时没有满足username属性..当我没有使用带有这些j-usernme和j_password的spring认证接口时它已满

我必须做才能得到这个用户的名字！请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:44:15.300

```
<h:panelGrid columns="3">
    <h:outputLabel for="j_username" value="User: * " />  
    <h:inputText id="j_username" required="true" label="username" value="#{loginBean.username}"/>  
    <h:message for="j_username" display="text" style="color:red"/>

    <h:outputLabel for="j_password" value="Password: * " />  
    <h:inputSecret id="j_password" label="password" required="true"  value="#{loginBean.password}"/>  
    <h:message for="j_password" display="text" style="color:red"/>

    <h:outputLabel for="_spring_security_remember_me" value="Remember me: " />
    <h:selectBooleanCheckbox    id="_spring_security_remember_me" />        
    </h:panelGrid> 
```

# c# - 将列写入CSV文件c#

> ID：16197777
> 
> 赞同：1
> 
> 时间：2013-04-24T16:52:03.027
> 
> 标签：c#, wpf

有没有办法将数据导出到 CSV 文件中的特定列？我将数据导出到附加行，但需要指定要保存到哪些列。

我的保存代码是：

```
{
StreamWriter sw = File.AppendText("log.csv");                
            {

                    //need this in column 1
                    sw.WriteLine(TextBox21.Text + ",");
                    //need this in column 2
                    sw.WriteLine(TextBox41.Text + ",");

            }

            sw.Close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:59:58.717

是的，像这样：

```
var columns = new string[10];

columns[5] = "hello";

sw.WriteLine( string.Join( ",", columns )); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T17:46:46.237

创建 CSV 输出是一个已解决的问题，您不必创建自己的编写器。一旦您开始使用逗号、引号、换行符、其他编码等获取数据，诸如附加逗号之类的幼稚“解决方案”就会中断。

有许多工作的、调试的、记录的、高性能的 CSV 编写器可供您使用，例如[FastCSV](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)、[CSVHelper](http://csvhelper.com/)、 LINQ to CSV 等。我使用过 FastCSV，发现它使用简单、可靠且性能卓越。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T17:02:52.683

您的代码的问题是您调用`WriteLine`了两次，这导致每个值在表中显示为一行。将它们放在同一行中的最少代码更改是将第`WriteLine`一个更改为`Write`. 而且，没有必要包含尾随逗号。

```
StreamWriter sw = File.AppendText("log.csv");                
{
    sw.Write(TextBox21.Text + ",");  // Column 1
    sw.WriteLine(TextBox41.Text);    // Column 2
}
sw.Close(); 
```

如果您需要将某些列留空（以跳到后面的列），那么只需输出额外的不带值的逗号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T17:03:47.193

只需将您的第一个更改`.WriteLine()`为`.Write()`.

当您使用它时，您可能希望将这些文本字段括在引号中。如果有人在其中一个字段中添加逗号，它会在稍后关闭您的日志阅读器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-24T16:56:57.937

我将您的问题解释为“如何在现有的 csv 文件中更新/添加列”。

您可以将 oledb 驱动程序用于文本：

[http://www.codeproject.com/Articles/27802/Using-OleDb-to-Import-Text-Files-tab-CSV-custom](http://www.codeproject.com/Articles/27802/Using-OleDb-to-Import-Text-Files-tab-CSV-custom)

如果 oledb 驱动程序不支持更新，您可能必须将文件作为数据表读取，更新数据表的列，然后将其重新导出为 csv（可能，我有时会惊讶于文本驱动程序支持多少)

# ember.js - ember.js：带有路由的堆栈溢出

> ID：16197779
> 
> 赞同：0
> 
> 时间：2013-04-24T16:52:07.570
> 
> 标签：ember.js

我有这个路由器：

```
App.Router.map ->
  @route "index", path: "/"
  @resource "raw_materials", ->
    @route 'new'    
    @resource "raw_material", {path: ":raw_material_id"}, ->
      @route 'edit' 
```

我将自己放在 url:`raw_materials/20`上，然后单击我的编辑按钮（它链接到`raw_materials/20/edit`），ember 给了我一个堆栈溢出：

```
Maximum call stack size exceeded
guidFor
iterDeps
dependentKeysDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange
chainsDidChange
propertyDidChange
contentPropertyDidChange
sendEvent
Ember.notifyObservers
propertyDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.chainDidChange
ChainNodePrototype.didChange 
```

这是我的路线：

```
App.RawMaterialsRoute = Ember.Route.extend
  model: -> App.RawMaterial.find()controller.get('currentPage')})

App.RawMaterialRoute = Ember.Route.extend
  model: (params) ->
    App.RawMaterial.find(params.raw_material_id) 
```

这里是我的模板：

```
---------------------
application.hbl:
{{outlet}}
---------------------
raw_materials.hbl:
{{#each controller}}
  <tr>
    <td>
       {{#linkTo raw_material this}}
         {{name}}
       {{/linkTo}}
    </td>
    <td>
       {{quantity}}
    </td>
    <td>
      <button {{action destroy this target="controller"}} class='btn btn-danger btn-small'>
        <i class="icon-white icon-remove"></i>
      </button>
    </td>
  </tr>
{{/each}}
{{outlet}}
---------------------
raw_material.hbl
{{name}}
{{quantity}}

{{#linkTo raw_material.edit this class='btn btn-warning btn-small'}}
<i class="icon-white icon-edit"></i>
{{/linkTo}}
---------------------
raw_material/edit.hbl
edit form.... 
```

有什么想法吗？非常感谢您

# java - eclipse - 添加源.jar 被系统库覆盖？

> ID：16197780
> 
> 赞同：-1
> 
> 时间：2013-04-24T16:52:12.097
> 
> 标签：java, eclipse, ansi

我尝试将来自[http://jansi.fusesource.org/](http://jansi.fusesource.org/)的最新 jansi 库（1.9）添加到我的 eclipse 中，因为来自 jansi 的内置库不是最新的并且缺少“Ansi.ansi().fgBright （颜色颜色）”是一年多前添加的……所以我在引用的库中添加了新的jar……但是方法仍然没有……肯定是在新添加的jar中……也许java系统库覆盖了新的jansi库？

我如何更喜欢引用的库而不是系统库？有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T09:51:11.337

好的，似乎 systemlib 中的源代码比下载的源代码更新......我刚刚找到了解决我的编码问题的方法，但不是如何更喜欢用户库而不是系统库。nvm ...不再需要了。//关闭

# sql - t-sql 表列到字符串

> ID：16197783
> 
> 赞同：3
> 
> 时间：2013-04-24T16:52:18.220
> 
> 标签：sql, sql-server, tsql

是否可以递归地从 information_schema 动态地对表列标题进行字符串化

因此，如果我的数据库中有 2 个表（或者很多），每个表有 5 列

我可以获取查询以按模式查找这些表，然后将所有表列的听者串到另一个表中，结果类似于

```
table name ¦ string 
Table A    ¦ id,columnName1,columnName2 ,columnName3 ,columnName4 ,columnName5
Table b    ¦ id,columnName1,columnName2 ,columnName3 ,columnName4 ,columnName5 
```

（这是两行顺便说一句）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-21T09:09:39.047

它可以更简单，没有 XML：

```
declare @columns varchar(1000)
set @columns=''

select @columns = @columns + ',' + name
from sys.columns 
where object_id = object_id('MyTable') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T17:11:22.423

与and`FOR XML PATH('')`结合使用的东西可以工作：`sys.columns``sys.tables`

```
SELECT t.name [TableName], 
(
    SELECT name + ','
    FROM sys.columns c
    WHERE c.object_id = t.object_id
    FOR XML PATH('')
) [String]
FROM sys.tables t 
```

它基本上采用从查询返回的列，格式为 XML，其中元素标签在`PATH('')`. 但是，如果将其留空，它将省略标签并返回一个字符串。

[MSDN 上](http://msdn.microsoft.com/en-us/library/ms178107.aspx)的文档也有很多不同的示例以及该`FOR XML`子句的其他用途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:35:03.187

使用***sys.objects比******sys.tables***更有效。可能这对您有帮助-

```
SELECT 
      table_name = s.name + '.' + o.name
    , [columns] = STUFF((
        SELECT ', ' + c.name
        FROM sys.columns c WITH (NOWAIT)
        WHERE c.[object_id] = o.[object_id]
        FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'), 1, 2, '')
FROM (
    SELECT 
          o.[object_id]
        , o.name
        , o.[schema_id]
    FROM sys.objects o WITH (NOWAIT)
    WHERE o.[type] = 'U'
        AND o.is_ms_shipped = 0
) o
INNER JOIN sys.schemas s WITH (NOWAIT) ON o.[schema_id] = s.[schema_id] 
ORDER BY 
      s.name
    , o.name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T17:10:52.420

这将做到（尽管可能有另一种方式）：

```
;with cte as
(
    Select  TableName = t.TABLE_NAME
            ,ColumnList = Substring((Select ', ' + c2.COLUMN_NAME
                                    From    INFORMATION_SCHEMA.COLUMNS c2
                                    Where   c.TABLE_NAME = c2.TABLE_NAME
                                    For XML Path('')
                                    ), 3, 8000)
            ,ROW_NUMBER() OVER(Partition By t.TABLE_NAME Order By t.TABLE_NAME) RowNumber
    From    INFORMATION_SCHEMA.TABLES t
    join    INFORMATION_SCHEMA.COLUMNS c
        on  t.TABLE_NAME = c.TABLE_NAME
)
Select  TableName
        ,ColumnList
From    cte
Where   RowNumber = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T06:53:31.163

我认为您想使用它来制作**DB**`Query`中所有表的类文件。因此**答案**

 ****```
if object_id('tempdb..#t') is not null
    drop table #t

SELECT 
T.name Table_name
,ltrim(rtrim(C.name)) Column_name
,TYPE1.name AS [type_name]
,C.max_length length1
into #t
FROM sys.tables T WITH(NOLOCK)
INNER JOIN sys.columns C WITH(NOLOCK) ON T.OBJECT_ID=C.OBJECT_ID
INNER JOIN sys.types AS TYPE1 with(nolock) ON c.user_type_id=TYPE1.user_type_id
ORDER BY T.name

SELECT 
  #t.Table_name,
  STUFF((
    SELECT ', ' + t2.Column_name+' as ' +t2.type_name + '('+ cast(t2.length1 as varchar) + ')'
    FROM #t t2
    WHERE t2.Table_name = #t.Table_name
    FOR XML PATH (''))
,1,2,'') AS Names
FROM #t
GROUP BY #t.Table_name; 
```

具体回答你`Question`

```
if object_id('tempdb..#t') is not null
    drop table #t

SELECT 
T.name Table_name
,ltrim(rtrim(C.name)) Column_name
into #t
FROM sys.tables T WITH(NOLOCK)
INNER JOIN sys.columns C WITH(NOLOCK) ON T.OBJECT_ID=C.OBJECT_ID
where t.name in ('[Table A]','[Table B]')
ORDER BY T.name

SELECT 
  #t.Table_name,
  STUFF((
    SELECT ', ' + t2.Column_name
    FROM #t t2
    WHERE t2.Table_name = #t.Table_name
    FOR XML PATH (''))
,1,2,'') AS Names
FROM #t
GROUP BY #t.Table_name; 
```****

# wcf - SSL 握手 + WCF + 日志记录

> ID：16197788
> 
> 赞同：3
> 
> 时间：2013-04-24T16:52:36.403
> 
> 标签：wcf, ssl, handshake

我有一个使用 https 协议的 wcf 服务。我使用证书进行客户端身份验证以及传输级别的安全性。

我想知道是否有办法记录幕后发生的握手细节。我目前正在记录客户端发送的证书的详细信息（使用自定义证书验证器）。但它仅用于客户端身份验证。

我想记录幕后发生的事情。我在几个地方看到他们使用 netmon 查看与握手相关的数据。有没有办法以某种格式记录数据，在 WCF 服务的情况下，它只是讲述发生的握手。

我使用 Windows 服务托管了我的 WCF 服务。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-13T12:39:51.763

使用自定义跟踪器可能会为您提供很好的服务：

您的自定义跟踪器类：

```
using System.Diagnostics;

namespace MambaBase.Utils
{
    public class TraceLogger : TraceListener
    {
        private static readonly log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);
#if EXTENDED_DEBUG
        private string s(object payload)
        {
            try
            {
                return Newtonsoft.Json.JsonConvert.SerializeObject(payload, new Newtonsoft.Json.JsonSerializerSettings() { ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore });
            }
            catch (Exception)
            {
                return "°°°";
            }
        }
        public override void TraceData(TraceEventCache eventCache, string source, TraceEventType eventType, int id, object data)
        {
            if (log.IsDebugEnabled) log.Debug("eventCache:" + s(eventCache) + " / source:" + s(source) + " / eventType:" + s(eventType) + " / Id:" + id + " / data:" + s(data));
            base.TraceData(eventCache, source, eventType, id, data);
        }

        public override void TraceData(TraceEventCache eventCache, string source, TraceEventType eventType, int id, params object[] data)
        {
            if (log.IsDebugEnabled) log.Debug("eventCache:" + s(eventCache) + " / source:" + s(source) + " / eventType:" + s(eventType) + " / Id:" + id + " / data:" + s(data));
            base.TraceData(eventCache, source, eventType, id, data);
        }

        public override void TraceEvent(TraceEventCache eventCache, string source, TraceEventType eventType, int id)
        {
            if (log.IsDebugEnabled) log.Debug("eventCache:" + s(eventCache) + " / source:" + s(source) + " / eventType:" + s(eventType) + " / Id:" + id );
            base.TraceEvent(eventCache, source, eventType, id);
        }
        public override void TraceEvent(TraceEventCache eventCache, string source, TraceEventType eventType, int id, string format, params object[] args)
        {
            if (log.IsDebugEnabled) log.Debug("eventCache:" + s(eventCache) + " / source:" + s(source) + " / eventType:" + s(eventType) + " / Id:" + id + " / format:" + format + " / args:" + s(args));
            base.TraceEvent(eventCache, source, eventType, id, format, args);
        }

        public override void TraceEvent(TraceEventCache eventCache, string source, TraceEventType eventType, int id, string message)
        {
            if (log.IsDebugEnabled) log.Debug("eventCache:" + s(eventCache) + " / source:" + s(source) + " / eventType:" + s(eventType) + " / Id:" + id + " / message:" + message);
            base.TraceEvent(eventCache, source, eventType, id, message);
        }

        public override void TraceTransfer(TraceEventCache eventCache, string source, int id, string message, Guid relatedActivityId)
        {
            if (log.IsDebugEnabled) log.Debug("eventCache:" + s(eventCache) + " / source:" + s(source) + " / Id:" + id + " / message:" + message + " / relatedActivityId:" + relatedActivityId.ToString());
            base.TraceTransfer(eventCache, source, id, message, relatedActivityId);
        }
        public override void Fail(string message)
        {
            if (log.IsDebugEnabled) log.Debug("Fail - message:" + message);
            base.Fail(message);
        }

        public override void WriteLine(object o)
        {
            if (log.IsDebugEnabled) log.Debug("Trace:" + s(o));
            base.WriteLine(o);
        }
        public override void Write(object o, string category)
        {
            if (log.IsDebugEnabled) log.Debug("Trace:" + s(o) + " / category:" + category);
            base.Write(o, category);
        }
        public override void Write(string message, string category)
        {
            if (log.IsDebugEnabled) log.Debug("Trace:" + message + " / category:" + category);
            base.Write(message, category);
        }

        public override void WriteLine(object o, string category)
        {
            if (log.IsDebugEnabled) log.Debug("Trace:" + s(o) + " / category:" + category);
            base.WriteLine(o, category);
        }

        public override void Write(object o)
        {
            if (log.IsDebugEnabled) log.Debug("Trace:" + s(o) );
            base.Write(o);
        }

        public override void WriteLine(string message, string category)
        {
            if (log.IsDebugEnabled) log.Debug("Trace:" + message + " / category:" + category);
            base.WriteLine(message, category);
        }

#endif
        public override void Write(string message)
        {
#if EXTENDED_DEBUG
            if (log.IsDebugEnabled) log.Debug("Trace:" + message);
            Debug.Write(message);
#endif
        }
        public override void WriteLine(string message)
        {
            if (log.IsDebugEnabled) log.Debug("Trace ==> " + message);
            Debug.WriteLine(message);
        }
    }
} 
```

在应用程序的 web.config 或 app.config 中：

```
 <system.diagnostics>
    <sources>
      <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
        <listeners><add name="CustomTracer"/></listeners>
      </source>
      <source name="System.ServiceModel.MessageLogging">
        <listeners><add name="CustomTracer"/></listeners>
      </source>
      <source name="System.Net">
        <listeners><add name="CustomTracer"/></listeners>
      </source>
      <source name="System.Net.Sockets">
        <listeners><add name="CustomTracer"/></listeners>
      </source>
      <source name="System.Net.Cache">
        <listeners><add name="CustomTracer"/></listeners>
      </source>
      <source name="System.Net.Security">
        <listeners><add name="CustomTracer"/></listeners>
      </source>
      <source name="System.Security">
        <listeners><add name="CustomTracer"/></listeners>
      </source>
    </sources>
    <switches>
      <add name="System.ServiceModel" value="Verbose"/>
      <add name="System.ServiceModel.MessageLogging" value="Verbose"/>
      <add name="System.Net" value="Verbose"/>
      <add name="System.Net.Sockets" value="Verbose"/>
      <add name="System.Net.Cache" value="Verbose"/>
      <add name="System.Security" value="Verbose"/>
      <add name="System.Net.Security" value="Verbose"/>
    </switches>
    <sharedListeners>
      <add name="CustomTracer" type="MambaBase.Utils.TraceLogger, MambaBase" />
    </sharedListeners>
    <trace autoflush="true"/>
  </system.diagnostics>

  <system.serviceModel>
    <diagnostics performanceCounters="All" wmiProviderEnabled="true">
      <messageLogging logEntireMessage="true" logMalformedMessages="true" logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" maxMessagesToLog="100000" />
    </diagnostics>
  </system.serviceModel> 
```

不用说，这将产生大量的日志记录，如果您激活 EXTENDED_DEBUG 则更是如此。

并且日志将包含敏感数据，例如密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-17T15:56:00.077

最好的方法是使用图形工具：查看类似的路径：C:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.7.2 Tools

找到 SvcConfigEditor.exe。

使用它打开 web.config，您现在可以轻松添加诊断信息，包括您所要求的内容。

# jquery - 如何将 Jquery 或 javascript 文件包含到 primefaces 3.5

> ID：16197791
> 
> 赞同：2
> 
> 时间：2013-04-24T16:52:50.567
> 
> 标签：jquery, jsf, primefaces

我有一些 Jquery 插件要添加到我的 JSF 页面，但它们不起作用。我将它们与以下语法集成：

```
<h:outputScript name="/js/ui3.js"  /> 
```

是否有任何解决方案可以包含这些文件，尤其是我的插件文件 ui3.js，因为它是具有特征的简单 javascript。

ui3.js

```
$( init ); 
   function init() {
      (function($){
         var sortOpts = {
         connectWith: ["#sortablesA", "#sortablesB"]
      };
      $("#sortablesA, #sortablesB").sortable(sortOpts);
   })(jQuery);
} 
```

**更新 ：**

**问题已解决**

解决方案是：您只需添加`//<![CDATA[ //]]>`到您的 javascript 或 jquery 文件，并在您的 JSF 页面中的头部或头部之后正常调用它。

例子.js

```
//<![CDATA[ 
 $( init ); 
    function init() {
       (function($){
          var sortOpts = {
             connectWith: ["#sortablesA", "#sortablesB"]
          };
          $("#sortablesA, #sortablesB").sortable(sortOpts);
       })(jQuery);
    }
//]]> 
```

# c# - 永无止境的while循环

> ID：16197792
> 
> 赞同：1
> 
> 时间：2013-04-24T16:52:56.833
> 
> 标签：c#, timer, while-loop

这是一本 C# 书籍中的示例：

```
//  Timer02.cs - Displaying Date and Time
//      Using the Timer class. 
//      Press Ctrl+C or 'q' folllwed by Enter to end program. 
//------------------------------------------------------------
using System;
using System.Timers;

class myApp
{
    public static void Main()
    {
        Timer myTimer = new Timer();
        myTimer.Elapsed += new ElapsedEventHandler(DisplayTimeEvent);
        myTimer.Interval = 1000;
        myTimer.Start();

        while (Console.Read() != 'q')
        {
            ;    // do nothing...
        }
    }

    public static void DisplayTimeEvent(object source, ElapsedEventArgs e)
    {
        Console.Write("\r{0}", DateTime.Now);
    }
} 
```

我猜它应该循环运行直到 q 被按下，但是当 q 被按下时循环没有结束。

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:56:03.533

我怀疑您在 之后没有按回车键`q`。该[`Console.Read`](http://msdn.microsoft.com/en-GB/library/system.console.read.aspx)方法会阻塞，直到有整行要读取，即使它实际上只读取该行的单个字符。

从文档中：

> 当您键入输入字符时，Read 方法会阻止其返回；当您按下 Enter 键时，它会终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T16:55:33.133

编辑：我发布的方法在按下其他键之前从未打印过消息。

但是，这将起作用....

```
public static void Main()
    {
        Timer myTimer = new Timer();
        myTimer.Elapsed += new ElapsedEventHandler(DisplayTimeEvent);
        myTimer.Interval = 1000;
        myTimer.Start();

        while (true)
        {
            if (Console.KeyAvailable)
            {
                while (Console.ReadKey().KeyChar != 'q')
                {
                    // do nothing
                }
                break;
            }
        }
    } 
```

这里的关键是使用： Console.ReadKey().KeyChar != 'q'

# javascript - D3js 工具提示未正确生成

> ID：16197801
> 
> 赞同：1
> 
> 时间：2013-04-24T16:53:46.450
> 
> 标签：javascript, d3.js, tooltip

我的条形图组合得很好。但仍有一些调整。我在正确对齐条形标签时遇到问题，并且在添加额外数据时仍然保持响应等。

所以我决定我会摆脱那些标签，而是在鼠标悬停时做一个工具提示。但我发现它没有填充正确的数据。它只为绿色条（全局）填充它。当我将鼠标悬停在蓝色（本地）栏上时，我得到了相同的工具提示，其值来自全局。

似乎它正在为整个集合而不是单个条生成工具提示。

**问题 #1**我如何让它为单个条生成正确的数据，而不是整个集合？

**问题 #2**如何在工具提示中有多个值。你会从我的 Fiddle 中看到，它目前只指定 CPC，而不是为搜索量生成数据。工具提示只能拉出一条动态数据吗？这似乎不对。

**[JSFiddle 在这里](http://jsfiddle.net/enigmarm/weXNd/1/)**

```
sets.append("rect")
   .attr("class","local")
.attr("width", xScale.rangeBand()/2)
.attr("y", function(d) {
    return yScale(d.local);
 })
    .attr("x", xScale.rangeBand()/2)
    .attr("height", function(d){
    return h - yScale(d.local);
    })
.attr("fill", colors[0][1])
.on("mouseover", function(d,i) {
    //Get this bar's x/y values, then augment for the tooltip
    var xPosition = parseFloat(xScale(i) + xScale.rangeBand() );
    var yPosition = h / 2;
    //Update Tooltip Position & value
    d3.select("#tooltip")
        .style("left", xPosition + "px")
        .style("top", yPosition + "px")
        .select("#cpcVal")
        .text(d.cpc)
        .select("#volVal")
        .text(d.local);
    d3.select("#tooltip").classed("hidden", false);
})
.on("mouseout", function() {
    //Remove the tooltip
    d3.select("#tooltip").classed("hidden", true);
})
;

sets.append("rect")
    .attr("class","global")
.attr("width", xScale.rangeBand()/2)
.attr("y", function(d) {
    return yScale(d.global);
})
    .attr("height", function(d){
    return h - yScale(d.global);
    })
.attr("fill", colors[1][1])
.on("mouseover", function(d,i) {
    //Get this bar's x/y values, then augment for the tooltip
    var xPosition = parseFloat(xScale(i) + xScale.rangeBand() );
    var yPosition = h / 2;
    //Update Tooltip Position & value
    d3.select("#tooltip")
        .style("left", xPosition + "px")
        .style("top", yPosition + "px")
        .select("#cpcVal")
        .text(d.cpc)
        .select("#volVal")
        .text(d.global);
    d3.select("#tooltip").classed("hidden", false);
})
.on("mouseout", function() {
    //Remove the tooltip
    d3.select("#tooltip").classed("hidden", true);
})
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:12:48.420

这两个问题的根源在于您如何设置要显示的数据。您首先选择具有特定 ID 的元素，设置文本，然后选择另一个 ID。第二次选择失败，因为具有第二个 ID 的元素不是具有第一个 ID 的元素的子元素。`d3.select("#tooltip")`您可以通过再次调用而不是链接调用来轻松解决此问题。也就是说，更换

```
d3.select("#tooltip")
    .style("left", xPosition + "px")
    .style("top", yPosition + "px")
    .select("#cpcVal")
    .text(d.cpc)
    .select("#volVal")
    .text(d.local); 
```

和

```
d3.select("#tooltip")
    .style("left", xPosition + "px")
    .style("top", yPosition + "px")
    .select("#cpcVal")
    .text(d.cpc);
d3.select("#tooltip")
    .select("#volVal")
    .text(d.local); 
```

在它发生的两个地方，您应该会看到正确的值出现。

# visual-studio-2012 - SlowCheetah wap 转换从 Visual Studio 执行，但不是从 msbuild

> ID：16197807
> 
> 赞同：2
> 
> 时间：2013-04-24T16:54:05.890
> 
> 标签：visual-studio-2012, slowcheetah

我有一个安装了 SlowCheetah NuGet 包的 MVC4 Web 应用程序项目。在这个项目中，我有一个想要转换的 xml 文件（不是 Web.config）。在 csproj 文件中，项目的 TransformOnBuild 设置为 true。当我从 Visual Studio 构建项目时，文件会被转换。但是，如果我直接执行 msbuild，例如`msbuild.exe mysolution.sln`文件没有被转换。

查看 SlowCheetah.Transforms.targets，msbuild 的行为对我来说似乎很有意义。对于 Web 应用程序项目，TransformAllFiles 目标不包含在 BuildDepends on 属性中。相反，它依赖于发布管道的挂钩。

然而，我不明白的是，当我从 Visual Studio 构建时，转换是如何发生的。此外，尽管转换运行，但构建输出中没有任何证据，即使在详细级别也是如此。如果我将以下目标添加到我的 Web 项目中，它也会在从 Visual Studio（而不是从 msbuild）构建时运行，但不会产生任何输出。

```
<Target Name="DoStuff" AfterTargets="TransformAllFiles">
   <Copy SourceFiles="$(ProjectDir)_Web.config" DestinationFiles="$(ProjectDir)Web.configXXX" />   
   <Message Importance="high" Text="DoStuff completed"/>
</Target> 
```

当我从 Visual Studio 构建项目时，我可以看到复制操作的结果，但输出中没有消息，并且构建日志中没有提及 DoStuff 目标。显然目标正在运行，但在构建输出中没有证据。谁能解释这种行为？

# python - 基于范围的 Python 锻炼单位成本

> ID：16197808
> 
> 赞同：0
> 
> 时间：2013-04-24T16:54:06.877
> 
> 标签：python, django

我想根据通过的单位计算单位成本。所以例如

```
0-499 = unit cost of 0.049   
500-999 = unit cost of 0.050 
999+ = unit cost of 0.060 
```

这是我到目前为止所尝试的：

```
unitCost = 0.049
        if self.units <= 499: 
            unitCost = 0.049
        elif self.units >= 500:
            unitCost = 0.050
        elif self.units >= 999:
             unitCost = 0.060
        else:
             unitCost = 0.049 
```

首先，如果我有 1000 个单位，这将不起作用，它与错误的单位成本匹配。其次，我不确定这是不是好方法。Python 有 between 函数吗？

IE

```
if x between(0-499): 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T16:57:04.887

`elif``if`仅在前一个为 False时才评估；你的第三个条件永远无法达到。

反转它：

```
if self.units >= 999:
    unitCost = 0.060
elif self.units >= 500:
    unitCost = 0.050
else:
    unitCost = 0.049 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T16:59:58.120

问题是您的 if 语句。你需要做类似的事情`units >= 500 and units <= 999`，它基本上检查值是否在 500 和 999 之间。

```
unitCost = 0.049

if units <= 499:
    unitCost = 0.049
elif units >= 500 and units <= 999:
    unitCost = 0.050
elif units > 999:
     unitCost = 0.060

print unitCost 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T17:10:20.667

这可以通过将其类型转换`self.units`为一个`int`if 它有一个`float`值并执行以下代码片段来实现。

```
if int(self.units) in range(0, 500):
    unitCost = 0.049
elif int(self.units) in range(500, 1000):
    unitCost = 0.050
else:
    unitCost = 0.060 
```

# iphone - Wordpress 二十二子主题响应式布局问题

> ID：16197812
> 
> 赞同：1
> 
> 时间：2013-04-24T16:54:24.363
> 
> 标签：iphone, css, wordpress, safari, responsive-design

我正在使用 Wordpress。我在[http://ninemusepress.com为 212 开发了一个儿童主题](http://ninemusepress.com)

大多数页面在我的 iPhone 上运行良好（二十一十二是响应式的）——但我遇到了依赖于我制作的模板的页面的问题。看起来正在发生的事情是一些容器的大小仍然小于浏览器宽度（即使我尝试将所有包含元素设置为宽度：自动）......而其他元素延伸到 iPhone 浏览器的宽度。

我在 Safari 和 iPhone 上遇到了这个问题——尽管它在 Chrome 中似乎运行良好（即当我调整窗口大小时）。

我一直在试图追踪代码发生了什么，但我无法终生弄清楚哪些元素是问题所在。我正要把头发扯掉。

你可以在这里看到一个违规页面：http: [//ninemusepress.com/edgar-wilde-and-the-lost-grimoire/](http://ninemusepress.com/edgar-wilde-and-the-lost-grimoire/)

这是我 iphone 上的页面截图：http: [//ninemusepress.com/images/iphone.png](http://ninemusepress.com/images/iphone.png)

这是我的子主题的 CSS 媒体查询部分：

```
/* Landscape phone to portrait tablet */
@media (max-width: 767px) { 

#primary {
    width: auto;
} 

#book-description {
    width: auto;
}

.page-template-page-templatesbook-php .site-content {
    width: auto;
}

#secondary {
    width: auto;
}

.page-template-page-templatesbook-php .site-content {
    width: auto;
}

#book-cover {
    float: left;
    width: 200px;
}

#book-cover img {
    max-width: 190px;
}

.page-template-page-templatesbook-php article {
    float: left;
    width: auto;
    margin:0;
}

.page-template-page-templatesbook-php .entry-header {
    margin: 0;
}

#book-description {
    float: left;
    width: auto;
    margin: 0;
}

#book-purchase {
    float: left;
    width: auto;
    position: relative;
    top: 0;
}

#book-cover {
    width: auto;
    margin-bottom: 15px;
}

#book-cover img {
    width: 90%;
}

#book-description {
    width: auto;
    margin: 0;
}

.home #primary {
    margin-top: 0;
}

.sample-page {
    width: auto;
    padding: 0;
}

.sample {
    position: relative;
    top:  0;
    width: auto;
}

.book-info {
    width: auto;
    margin-bottom: 50px;
    -webkit-box-shadow: 0 0 0 0 #ccc;
    -moz-box-shadow: 0 0 0 0 #ccc;
    box-shadow: 0 0 0 0 #ccc;
}

  #goodreads-widget {
    width:  690px;
  }

  .bbPress .site-content {
    width: auto;
  }

  .bbPress .widget-area {
    width: auto;
  }

  .page-template-page-templatesbook-php article {
    width: auto;
  }

  .site {
    width: auto;
  }

}

/* Landscape phones and down */
@media (max-width: 480px) { 

    #primary {
        width: auto;
    } 

    .site {
        width: auto;
    }
    #secondary {
        width: auto;
    }

    .page-template-page-templatesbook-php .site-content {
        width: auto;
    }

    .page-template-page-templatesbook-php article {
        width: auto;
    }

    #goodreads-widget {
        display: auto;
    }

    #book-description {
        width: auto;
    }

    #main, .wrapper {
        width: auto;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T22:58:05.587

啊！这是我在底部插入的 Goodreads 小部件——它一定是插入了内联 CSS（而且我无法在我的 CSS 中调整它的大小）......所以它的宽度设置为 690 像素，整个布局都被关闭了。一旦我删除它，布局就会自行纠正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:21:02.023

在查看了有问题的页面以及您的屏幕截图后 - 很明显，有些东西超出了页面。如果您希望在桌面 Chrome 中看到这些问题，您必须在开发者工具区域更改您的用户代理字符串。但我离题了。

将页面缩小到约 320 像素宽后，我看到了两者`.article`并且`.book-description`都很`690px`宽。它们是（作为开始）两个有问题的页面元素。

将这两个选择器合并到 690px 标记附近的媒体查询中，您应该能够很容易地解决问题。希望这可以帮助！

# java - Android 蓝牙 Java 控制 LED 开 关

> ID：16197816
> 
> 赞同：0
> 
> 时间：2013-04-24T16:54:35.283
> 
> 标签：java

我是 Android 开发人员的新手。我尝试创建一个简单的应用程序来打开和关闭 LED。然后，我将它安装在我的 Android 手机上。但是当我点击开或关按钮时，它说：

致命错误 - 在 onResume() 和 write:socket close 期间发生异常。

希望有人帮助我更改我的代码。

这是我的代码：

```
package com.example.ledonoff;

import java.io.IOException;
import java.io.OutputStream;
import java.util.UUID;

import com.example.ledonoff.R;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Toast;

public class Main extends Activity {
 private static final String TAG = "Main";

  private static final int REQUEST_ENABLE_BT = 1;
  private BluetoothAdapter btAdapter = null;
  private BluetoothSocket btSocket = null;
  private OutputStream outStream = null;

  // Well known SPP UUID
  private static final UUID MY_UUID =
      UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

  // Insert your server's MAC address
  private static String address = "50:F5:20:42:7F:2B";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     Log.d(TAG, "In onCreate()");
    setContentView(R.layout.activity_main);

    btAdapter = BluetoothAdapter.getDefaultAdapter();
    checkBTState();
}
      public void buttonOn(View v) {
        sendData("1");
        Toast msg = Toast.makeText(getBaseContext(),"LED On", Toast.LENGTH_SHORT);
        msg.show();
      }
        public void buttonOff(View v) {
          sendData("0");
          Toast msg = Toast.makeText(getBaseContext(),"LED Off", Toast.LENGTH_SHORT);
          msg.show();
        }

 @Override
  public void onResume() {
    super.onResume();

    Log.d(TAG, "...In onResume - Attempting client connect...");

    // Set up a pointer to the remote node using it's address.
    BluetoothDevice device = btAdapter.getRemoteDevice(address);

    // Two things are needed to make a connection:
    //   A MAC address, which we got above.
    //   A Service ID or UUID.  In this case we are using the
    //     UUID for SPP.
    try {
      btSocket = device.createRfcommSocketToServiceRecord(MY_UUID);
    } catch (IOException e) {
      errorExit("Fatal Error", "In onResume() and socket create failed: " + e.getMessage() + ".");
    }

    // Discovery is resource intensive.  Make sure it isn't going on
    // when you attempt to connect and pass your message.
    btAdapter.cancelDiscovery();

    // Establish the connection.  This will block until it connects.
    Log.d(TAG, "...Connecting to Remote...");
    try {
      btSocket.connect();
      Log.d(TAG, "...Connection established and data link opened...");
    } catch (IOException e) {
      try {
        btSocket.close();
      } catch (IOException e2) {
        errorExit("Fatal Error", "In onResume() and unable to close socket during connection failure" + e2.getMessage() + ".");
      }
    }

    // Create a data stream so we can talk to server.
    Log.d(TAG, "...Creating Socket...");

    try {
      outStream = btSocket.getOutputStream();
    } catch (IOException e) {
      errorExit("Fatal Error", "In onResume() and output stream creation failed:" + e.getMessage() + ".");
    }
  }

  @Override
  public void onPause() {
    super.onPause();

    Log.d(TAG, "...In onPause()...");

    if (outStream != null) {
      try {
        outStream.flush();
      } catch (IOException e) {
        errorExit("Fatal Error", "In onPause() and failed to flush output stream: " + e.getMessage() + ".");
      }
    }

    try     {
      btSocket.close();
    } catch (IOException e2) {
      errorExit("Fatal Error", "In onPause() and failed to close socket." + e2.getMessage() + ".");
    }
  }

  private void checkBTState() {
    // Check for Bluetooth support and then check to make sure it is turned on

    // Emulator doesn't support Bluetooth and will return null
    if(btAdapter==null) {
      errorExit("Fatal Error", "Bluetooth Not supported. Aborting.");
    } else {
      if (btAdapter.isEnabled()) {
        Log.d(TAG, "...Bluetooth is enabled...");
      } else {
        //Prompt user to turn on Bluetooth
        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
      }
    }
  }

  private void errorExit(String title, String message){
    Toast msg = Toast.makeText(getBaseContext(),
        title + " - " + message, Toast.LENGTH_SHORT);
    msg.show();
    finish();
  }

  private void sendData(String message) {
    byte[] msgBuffer = message.getBytes();

    Log.d(TAG, "...Sending data: " + message + "...");

    try {
      outStream.write(msgBuffer);
    } catch (IOException e) {
      String msg = "In onResume() and an exception occurred during write: " + e.getMessage();
      if (address.equals("00:00:00:00:00:00"))
        msg = msg + ".\n\nUpdate your server address from 00:00:00:00:00:00 to the correct address on line 37 in the java code";
      msg = msg +  ".\n\nCheck that the SPP UUID: " + MY_UUID.toString() + " exists on server.\n\n";

      errorExit("Fatal Error", msg);      
    }
  }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-14T15:56:39.813

我想这是因为您在连接 btSocket 时遇到异常，然后在异常处理程序中您捕获 btSocket.close() 的另一个异常（如果 connect() 失败，则无法关闭它）

# php - 如何捕获从 PHP 内部启动的后台 PHP 脚本的结果？

> ID：16197821
> 
> 赞同：0
> 
> 时间：2013-04-24T16:54:37.870
> 
> 标签：php, file, shell, shell-exec, io-redirection

我有一些我想作为后台进程运行的 PHP 代码。该代码检查数据库以查看它是否应该执行任何操作，然后在再次检查之前执行或休眠一段时间。当它做某事时，它会将一些东西打印到标准输出，因此，当我从命令行运行代码时，我通常会以明显的方式将 PHP 进程的输出重定向到一个文件：`php code.php > code.log &`.

从 shell 运行代码本身可以正常工作；我现在正试图让它在从 Web 进程启动时运行——我有一个页面可以确定 PHP 进程是否正在运行，并让我启动或停止它，具体取决于。我可以通过以下方式开始该过程：

```
$the_command = "/bin/php code.php > /tmp/code.out &";
$the_result = exec($the_command, $output, $retval); 
```

但是（这就是问题所在！）输出文件`/tmp/code.out`————没有被创建。我已经尝试了、 和的所有变体`exec`，但它们都不会创建文件。（现在，我将文件放入以避免所有权/权限问题，顺便说一句。）我错过了什么吗？在这种情况下重定向会不起作用吗？ `shell_exec``system``/tmp`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:57:45.693

似乎是权限问题。解决此问题的一种方法是：

1.  将您的`echo($data)`语句重命名为类似的函数`fecho($data)`
2.  像这样创建一个函数 fecho()

.

```
function fecho($data)
{
  $fp = fopen('/tmp/code.out', 'a+');
  fwrite($fp, $data);
  fclose($fp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T01:09:38.347

布鲁格。经过一天的hack，这个问题终于解决了：

*   我最初提出的方案（执行带有重定向的语句）工作正常......
*   ...除了它拒绝在 /tmp 中工作。我在服务器的网络空间之外创建了另一个目录并将其打开到 apache，一切正常。

为什么会这样，我不知道。但是给未来的访客一些注意事项：

*   我正在运行一个非常普通的 Fedora 17、Apache 2.2.23 和 PHP 5.4.13。
*   据我所知，我的 /tmp 配置没有什么异常（翻译：我从未修改过基本操作系统安装的任何设置）。
*   我的 /tmp 有大量的目录形式`/tmp/systemd-private-Pf0qG9/`，其中后半部分是一组不同的随机字符。我在其中几个目录中发现了一些过时的日志文件版本。我认为这是某种我承认不理解的 Fedora 主义文件系统 juju，并且这些是我的一些进程黑客/杀戮留下的孤立文件。
*   `exec()`, `shell_exec()`, `system()`,`passthru()`一切似乎都奏效了，一旦我克服了困难。

底线：只要你在正确的地方做，应该有效的东西实际上是有效的。现在我会原谅自己照顾一大瓶印有我名字的酒，想想我的一天可能会如何度过......

# c++ - 在结构中使用数组

> ID：16197828
> 
> 赞同：1
> 
> 时间：2013-04-24T16:55:05.993
> 
> 标签：c++, arrays, structure

我目前正在一个月前买的一本书上学习 C++。所以现在我在这里，研究关于结构的新章节。书中提出了一个问题：编写一个程序，允许用户输入游戏的高分，并跟踪用户的姓名和分数。添加显示每个用户的最高分数、特定用户的所有分数、所有用户的所有分数以及用户列表的功能。

我的问题是......如何使用结构存储同一玩家的大量分数。我想是这样的：

```
struct my_string
{
    string name;
    int score[100];
    int lvp;
}; 
```

在结构中声明一个数组，这是可以做到的吗？我不完全确定。之后，在主函数中，我声明了一个 my_string 类型的数组。

像这样：

```
my_string name_score[100]; 
```

我正在考虑使用 2 个计数器，一个与名称有关，另一个与分数有关。像这样的东西：

```
name_score[0].score[2]; 
```

所以，这段代码应该给我第三个分数，名字（玩家）。我是在胡说八道，还是可以这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:59:02.350

在我看来，你是完全正确的！那应该可以完美地工作。

基本上，您的第一个右括号将为您提供播放器，而 .score[] 将为您提供他们的条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:59:44.170

所以这段代码是有效的代码：

```
#include <iostream>
#include <string>

struct my_string
{
    std::string name;
    int score[100];
    int lvp;
};

int main()
{
    my_string name_score[100];

    //Initializing of data in name_score assumed here

    std::cout << name_score[0].score[2] << std::endl ;
} 
```

由于这是 C++，您可能需要考虑使用`std::vector<int> score`而不是使用 C++11，`int score[100]`或者即使`std::array`您使用的是 C++11，它们都优于旧的 C 样式数组。`my_string`尽管您可能想选择一个更具描述性的名称，但也是如此。

# jquery - jQuery：未捕获的类型错误：无法读取未定义的属性“值”

> ID：16197832
> 
> 赞同：0
> 
> 时间：2013-04-24T16:55:17.620
> 
> 标签：jquery, runtime-error

在下面的脚本中，当我在控制台中运行它时，在其中一个 customFields 输入中键入时，它返回一个错误：

> 未捕获的类型错误：无法读取未定义的属性“值”

任何人都看到有什么问题吗？

```
jQuery(document).ready(function () {

        jQuery("#customfield_21070").attr('style', 'width:60px');

        var customfields = '#customfield_11070,#customfield_11071,#customfield_20071,#customfield_20072,#customfield_20073,#customfield_20074';

           jQuery(customfields).keyup(function () {
                calculateSum.call(this);
            });

        function calculateSum(param) {
            var sum = 0;

            if (!isNaN(param.value) && param.value.length != 0 && param.id !== "customfield_21070") {
                sum += parseFloat(param.value);
            }

            jQuery("#customfield_21070").val(sum.toFixed(2));
        }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:00:41.410

`calculateSum(this)`代替`calculateSum.call(this)`

* * *

解释

的第一个参数`.call()`实际上并没有将参数传递给您实际调用的函数。它定义了`this`函数**内部**的关键字。

参考：[https ://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Function/call](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Function/call)

# ruby-on-rails - 两个模型之间的 Rails 关系

> ID：16197834
> 
> 赞同：2
> 
> 时间：2013-04-24T16:55:19.057
> 
> 标签：ruby-on-rails, models, relationships

有没有办法动态确定 Rails 在两个模型之间创建的关系方法？

例如：

```
unknown_method_i_wish_existed(class_name_1, class_name_2)
  # awesome logic
  # returns the relationship method name going from class_name_1 to class_name_2
end 
```

查看了 Rails API，但没有什么对我尖叫它可以做到这一点。

本质上是这些方法的逆：http: [//api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html#method-i-reflect_on_association](http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html#method-i-reflect_on_association)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T08:36:57.830

你在寻找这样的东西吗？

```
def reflection_names_between(from, to)
  from.reflections.select { |name, refl| refl.klass == to }.values.map(&:macro)
end

# For a Car that has one :owner and many :passengers
reflection_names_between(Car, User) # => [:belongs_to, :has_many] 
```

# java - RestEasy @MultipartForm null byte[] 和 InputStream 收到

> ID：16197841
> 
> 赞同：0
> 
> 时间：2013-04-24T16:55:37.417
> 
> 标签：java, rest, resteasy, multipartform-data

我一直在尝试使用 @MultipartForm 测试发送 byte[] 和 InputStream 对象，但是我得到了这两种类型的空对象，有什么想法吗？我正在使用 RestEasy 2.3.5.Final

```
public class DocumentForm {
    private byte[] bytes;
    private InputStream stream;

    public byte[] getBytes() {
        return bytes;
    }

    @FormParam("bytes")
    @PartType(MediaType.APPLICATION_OCTET_STREAM)
    public void setBytes(byte[] bytes) {
        this.bytes = bytes;
    }

    public InputStream getStream() {
        return stream;
    }

    @FormParam("stream")
    @PartType(MediaType.APPLICATION_OCTET_STREAM)
    public void setStream(InputStream stream) {
        this.stream = stream;
    }

}

public interface DocumentService {
    @POST
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    public Response store(@MultipartForm DocumentForm documentForm);

}

@Path("/document")
public class DocumentServiceEndpoint implements DocumentService {

    public Response store(DocumentForm documentForm) {
        System.out.println(documentForm.getBytes());
        System.out.println(documentForm.getStream());
        return Response.status(200).entity("OK").build();
    }
}

public class DocumentServiceTest {
    public static void main(String[] args) {
        DocumentForm documentForm = new DocumentForm();
        byte[] data = "TEST".getBytes();
        documentForm.setBytes(data);
        documentForm.setStream(new ByteArrayInputStream(data));
        DocumentService documentService = ProxyFactory.create(DocumentService.class, "http://localhost:8080/document-rs/document");
        documentService.store(documentForm);
    }
} 
```

在客户端登录时，我得到：

```
DEBUG BasicClientConnectionManager - Get connection for route {}->http://localhost:8080
DEBUG DefaultClientConnectionOperator - Connecting to localhost:8080
DEBUG RequestAddCookies - CookieSpec selected: best-match
DEBUG RequestAuthCache - Auth cache not set in the context
DEBUG RequestTargetAuthentication - Target auth state: UNCHALLENGED
DEBUG RequestProxyAuthentication - Proxy auth state: UNCHALLENGED
DEBUG DefaultHttpClient - Attempt 1 to execute request
DEBUG DefaultClientConnection - Sending request: POST /document-rs/document HTTP/1.1
DEBUG wire - >> "POST /document-rs/document HTTP/1.1[\r][\n]"
DEBUG wire - >> "Accept-Encoding: gzip, deflate[\r][\n]"
DEBUG wire - >> "Content-Type: multipart/form-data; boundary=37e8b375-affb-47ec-94b0-f69f0eff1d36[\r][\n]"
DEBUG wire - >> "Content-Length: 40[\r][\n]"
DEBUG wire - >> "Host: localhost:8080[\r][\n]"
DEBUG wire - >> "Connection: Keep-Alive[\r][\n]"
DEBUG wire - >> "User-Agent: Apache-HttpClient/4.2.3 (java 1.5)[\r][\n]"
DEBUG wire - >> "[\r][\n]"
DEBUG headers - >> POST /document-rs/document HTTP/1.1
DEBUG headers - >> Accept-Encoding: gzip, deflate
DEBUG headers - >> Content-Type: multipart/form-data; boundary=37e8b375-affb-47ec-94b0-f69f0eff1d36
DEBUG headers - >> Content-Length: 40
DEBUG headers - >> Host: localhost:8080
DEBUG headers - >> Connection: Keep-Alive
DEBUG headers - >> User-Agent: Apache-HttpClient/4.2.3 (java 1.5)
DEBUG wire - >> "--37e8b375-affb-47ec-94b0-f69f0eff1d36--"
DEBUG wire - << "HTTP/1.1 200 OK[\r][\n]"
DEBUG wire - << "Server: Apache-Coyote/1.1[\r][\n]"
DEBUG wire - << "X-Powered-By: Servlet 2.5; JBoss-5.0/JBossWeb-2.1[\r][\n]"
DEBUG wire - << "Content-Type: */*[\r][\n]"
DEBUG wire - << "Content-Length: 2[\r][\n]"
DEBUG wire - << "Date: Wed, 24 Apr 2013 16:32:40 GMT[\r][\n]"
DEBUG wire - << "[\r][\n]"
DEBUG DefaultClientConnection - Receiving response: HTTP/1.1 200 OK
DEBUG headers - << HTTP/1.1 200 OK
DEBUG headers - << Server: Apache-Coyote/1.1
DEBUG headers - << X-Powered-By: Servlet 2.5; JBoss-5.0/JBossWeb-2.1
DEBUG headers - << Content-Type: */*
DEBUG headers - << Content-Length: 2
DEBUG headers - << Date: Wed, 24 Apr 2013 16:32:40 GMT
DEBUG DefaultHttpClient - Connection can be kept alive indefinitely 
```

在服务器端：

```
13:32:40,380 INFO  [STDOUT] null
13:32:40,381 INFO  [STDOUT] null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-19T22:14:20.447

我遇到了同样的问题并想出了解决办法。`@MultipartForm`当您的bean 将注释放在 getter 而不是属性本身上时，似乎存在一个简单的错误，这会导致 http 请求无法正确构建。我相信无论您使用的是`ApacheHttpClient4Executor`还是`URLConnectionClientExecutor`

在您的情况下，正确的 bean 如下所示：

```
public class DocumentForm {
    @FormParam("bytes")
    @PartType(MediaType.APPLICATION_OCTET_STREAM)
    private byte[] bytes;
    @FormParam("stream")
    @PartType(MediaType.APPLICATION_OCTET_STREAM)
    private InputStream stream;

    public byte[] getBytes() {
        return bytes;
    }

    public void setBytes(byte[] bytes) {
        this.bytes = bytes;
    }

    public InputStream getStream() {
        return stream;
    }

    public void setStream(InputStream stream) {
        this.stream = stream;
    }

} 
```

希望这可以帮助。

# enyo - 我需要在我的 enyo 项目中创建一个图表。哪些属性用于执行此操作？

> ID：16197852
> 
> 赞同：1
> 
> 时间：2013-04-24T16:55:54.820
> 
> 标签：enyo

我是 enyo 的新手，所以我还没有完全了解这个框架。

我一直在寻找能够制作条形图的 enyo 属性。但我在网上找到的唯一东西是关于使用“enyo.Control”，我认为这与此无关。任何人都可以提供一些提示吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:04:39.230

Enyo 在 Onyx 库中提供了某些小部件，但我认为没有任何图表/图表。我想你可以使用 ProgressBar 来作为条形图。

一些开发者已经成功使用了 Flot：http: [//www.flotcharts.org/](http://www.flotcharts.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T19:05:33.987

Enyo 化的 YUI 图表正在筹备中：[https](https://enyojs.atlassian.net/browse/ENYO/component/10802) ://enyojs.atlassian.net/browse/ENYO/component/10802 。因此，请关注此问题以获取更新。

# perl - 如何组合两个 Perl 哈希？

> ID：16197856
> 
> 赞同：3
> 
> 时间：2013-04-24T16:56:07.057
> 
> 标签：perl

在我以冗长/冗长/不正确的方式进行此操作之前，我会问这个问题。

我正在使用 Perl。我有两个哈希。一个包含默认值，一个可能是用户定义的值，在某些情况下会覆盖默认值。

将这些哈希连接在一起的最简单方法是什么，但是对于我们选择用户值的同一个键，有一个默认值和用户定义值。

```
$defaults = {
 type => paper,
 number => 3
};

 $user_defined = {
 number => 5
}; 
```

所需的最终联合输出/散列是

```
$result = {
    type => paper,
    number => 5,
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-24T17:00:40.917

我用

```
my $result = { %$defaults, %$user_defined }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T17:01:11.527

显而易见的解决方案是正确的：

```
$result = { %$defaults, %$user_defined }; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-24T17:20:22.133

如果您的散列具有简单的标量值（即只有单层深度），则提供的答案很好。如果您的散列可以包含任意深度的其他散列和数组，请查看[Hash::Merge](http://p3rl.org/Hash%3a%3aMerge)作为将信息合并到其中的选项。

# c# - 从 xml 数据在代码中创建绑定

> ID：16197857
> 
> 赞同：0
> 
> 时间：2013-04-24T16:56:11.327
> 
> 标签：c#, wpf, linq, xaml

我想将示例数据中的数据绑定到 c# 中的代码。尝试在线提供的不同型号时，我没有得到准确的输出。我想在数据表中的两个值之间进行算术运算。

我的 xml 数据如下所示：

```
<SampleData:data xmlns:SampleData="clr-namespace:Expression.Blend.SampleData.data"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
    <SampleData:data.factors>
        <SampleData:cfsItem col1="item1" item1="1" item2="2" />
        <SampleData:cfsItem col2="item2" item2="3" item2="4" />
    </SampleData:data.factors>
</SampleData:data> 
```

我想用 LINQ 查询选择值；即从数据中的表“因素”中选择col1，并将其与从列表框元素返回的值进行比较。

```
private void ListBox1_Tap(object sender, GestureEventArgs e)
{
    ListBoxItem selected = ListBox1.SelectedItem as ListBoxItem;
    string y = selected.Content as string;
    this.DataContext = from factors in data
                       where col1.factors == y
                       select item1;
} 
```

谁能帮我解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:18:59.623

看起来你的`data`对象是一个单一的项目，你真的在`factors`​​里面寻找`data`。
根据您显示的内容，您可能需要以下内容来选择`factors`基于`ListBox.SelectedItem`'s 内容与`col1`属性相比。

就像一个注释：我认为你的意思是`item2`第二个记录中的第一个真正的意思`item1`。如果是这样，以下将适用：

```
private void ListBox1_Tap(object sender, GestureEventArgs e)
{
    var selectedItem = (ListBoxItem)ListBox1.SelectedItem;
    if (selectedItem != null)
    {
        var y = (string)selectedItem.Content;
        var filteredFactors = (from factor in data.factors
                               where factor.col1 == y
                               select factor.Item1);
        //filteredFactors is IEnumerable
        this.DataContext = filteredFactors;
        // if you need the first only or nothing if there is none.
        this.DataContext = filteredFactors.FirstOrDefault();
        // if there can be nothing or only one
        this.DataContext = filteredFactors.SingleOrDefault();
    }
} 
```

在上面的示例中，我只选择`item1`了过滤后的`factors`.
如果您想返回整个记录，您将`.item1`在查询中删除。

```
var filteredFactors = (from factor in data.factors
                       where factor.col1 == y
                       select factor); 
```

您可能会注意到我多次使用该关键字`var`。如果它提高可读性，我喜欢使用它。如果您有兴趣，请参阅[隐式类型局部变量。](http://msdn.microsoft.com/en-us/library/bb384061.aspx)

# javascript - 为什么 grunt-contrib-connect 找不到连接任务？

> ID：16197858
> 
> 赞同：3
> 
> 时间：2013-04-24T16:56:14.707
> 
> 标签：javascript, build, gruntjs

我有一个非常简单的 grunt 设置。唯一活跃的插件是 grunt-contrib-connect。这是我的 package.json 文件：

```
{
  "name": "gruntApp",
  "version": "0.1.0",
  "description": "An application for testing Grunt.js",
  "devDependencies": {
    "grunt": "~0.4.1",
    "grunt-contrib-connect": "~0.3.0"
  }
} 
```

我的 gruntfile 看起来像这样：

```
module.exports = (grunt) ->
  grunt.initConfig
    pkg: grunt.file.readJSON 'package.json'
    log:
      start: 'Grunt is starting for application <%=pkg.name%> v<%=pkg.version%>'
      end: 'Grunt is finishing'
  grunt.registerMultiTask 'log', ->
    grunt.log.writeln this.data
  grunt.registerTask 'printConfig', ->
    grunt.log.writeln JSON.stringify grunt.config(), null, 2
  grunt.loadNpmTasks 'grunt-contrib-connect'
  grunt.registerTask 'default', [
    'log:start'
    'log:end'
  ] 
```

我的自定义任务有效，但`grunt connect`没有。这是控制台的输出：

```
$ grunt connect -v

Initializing
Command-line options: --verbose

Reading "Gruntfile.coffee" Gruntfile...OK

Registering Gruntfile tasks.
Reading package.json...OK
Parsing package.json...OK
Initializing config...OK

Registering "grunt-contrib-connect" local Npm module tasks.
Reading /Users/eric/Projects/gruntApp/node_modules/grunt-contrib-connect/package.json...OK
Parsing /Users/eric/Projects/gruntApp/node_modules/grunt-contrib-connect/package.json...OK
Loading "connect.js" tasks...OK
+ connect
Loading "Gruntfile.coffee" tasks...OK
+ default, log, printConfig

Running tasks: connect

Running "connect" task
>> No "connect" targets found.
Warning: Task "connect" failed. Use --force to continue.

Aborted due to warnings. 
```

那是怎么回事，哟？看起来它检测到了连接任务，但后来它找不到目标。我错过了什么？我按照这里的指示进行操作：[https ://github.com/gruntjs/grunt-contrib-connect#getting-started](https://github.com/gruntjs/grunt-contrib-connect#getting-started)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T18:09:22.573

配置任务 + 目标是使其从命令行可用的重要部分。要制作 grunt `connect work`，请将配置添加到`.initConfig`：

```
grunt.initConfig
  connect:
    server:
      options:
        base: 'app'
        keepalive: true 
```

# xaml - SL5 是 Win8 和 WP8 开发商店被迫开发 Win7 应用程序的最佳选择？

> ID：16197861
> 
> 赞同：1
> 
> 时间：2013-04-24T16:56:26.603
> 
> 标签：xaml, mvvm, windows-store-apps, mvvm-light, silverlight-5.0

我们是一家 Win8 和 WP8（新）开发商店，必须开发一个在 Win7 上运行的仅供内部使用的 LOB 应用程序（最好在浏览器之外）。由于我们的大部分客户端应用程序知识都与 XAML/MVVM 相关，因此我认为该应用程序的最佳选择是在 SL5 中进行。

那么，我们可以利用多少 XAML/MVVM 知识进行 SL5 开发？如果我们清楚地考虑到 MVVM 设计，我们真的可以在 SL5 和 Win8 之间共享一些代码吗？有哪些陷阱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:21:04.953

银光？没必要。

答案简单明了。将尽可能多的逻辑和类型移动到一个或多个可移植类库项目中。这些可用于 WP8、Windows Store 应用程序和桌面应用程序，因此在这些类型的应用程序中使用它们的工作量很小。

对于 Windows 7，为您的 UI 使用 WPF。您可能会发现 API 处理起来有些尴尬，因为它缺少您必须用于 WP8/WS 应用程序的异步模式，但是通过 xaml 开发 UI 是完全相同的。我认为您不会发现两者之间有太大区别。

# android - Android - 识别应用程序的重新安装

> ID：16197863
> 
> 赞同：1
> 
> 时间：2013-04-24T16:56:32.877
> 
> 标签：android

我正在设计一个 Android 移动应用程序。该应用程序使用信用系统。用户可以通过 Google in app 计费服务购买积分。此外，当用户安装应用程序时，它会获得一些免费积分。

用户积分存储在网络服务器中。当用户下载应用程序时，会创建一个 UUID 并将其存储在应用程序和服务器中。

我需要以某种方式检测用户何时卸载应用程序并重新安装它，以便接收起始免费积分（重新安装将创建一个新的 UUID，因此它就像一个新用户）。

我一直在寻找电话或用户标识符，但我读到这不是一个很好的主意（[http://android-developers.blogspot.com.es/2011/03/identifying-app-installations。 html](http://android-developers.blogspot.com.es/2011/03/identifying-app-installations.html) [是否有唯一的 Android 设备 ID？](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)或[如何找到 Android 设备的序列号？](https://stackoverflow.com/questions/2322234/how-to-find-serial-number-of-android-device)）。此外，这很容易被黑客入侵，以便使用非拥有的帐户。

有办法解决这个问题吗？也许使用应用内计费？我愿意接受任何解决方案。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:04:55.933

你是完全正确的（识别设备是无用的）我会使用谷歌用户帐户来实现人员识别：

[http://developer.android.com/training/id-auth/identify.html](http://developer.android.com/training/id-auth/identify.html)

AccountManager accountManager = AccountManager.get(getApplicationContext());

```
Account[] accounts = accountManager.getAccountsByType("com.google");

for (Account a: accounts) {
    if (a.name.contains("@gmail.com")) {
        return a.name;
    }
} 
```

这可能很棘手，但可以让您从下载该应用程序的同一个 Google Play 帐户中识别 reisntall。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:14:11.780

为什么不使用IMEI。很容易得到。很难改变，而且在许多国家这是非法的（以防止电话抢劫）。我们将它用于许多目的。你只需要一个额外的权限 READ_PHONE_STATE。（大多数用户不抱怨）

在极少数设备中，它可能会返回 NULL，在这种情况下，您应该准备好并测试另一个唯一标识符，例如序列号、Mac 地址。Android ID 或 UUID。正如您所说，最后一个标识符更容易被黑客入侵，但由于设备很少，您不太可能遇到黑客问题。

解决方案更多的是关于设计。例如，在视频游戏中，如果您重新安装游戏以获得免费虚拟现金，您还将删除您的存档，因此您将从零开始最终获得相同数量的现金。由于玩家之间没有现金转移，因此无法利用。

如果您提供网络服务。您还可以在每个请求中检查 IP。因此，请跟踪请求的金额和总积分。这与IMEI一起。最后，如果您认为真的很重要，您可以申请一张信用卡（免费），以防止同一用户拥有多个帐户。对于大多数服务来说是不必要的，因为您将拥有更少的用户并且最终可能会变得更糟。

# c# - 如何从字符串动态运行比较？

> ID：16197865
> 
> 赞同：4
> 
> 时间：2013-04-24T16:56:35.323
> 
> 标签：c#, .net, dynamic, evaluation

如果我有一个这样的字符串：

```
"if (24 == 24) AND ((true == false) OR (true == true)) AND ('HELLO' != 'WORLD')" 
```

如何使用 C#/.Net 在代码中动态评估它？

我们有一个动态的“规则引擎”，用户可以在其中定义规则。所以一个规则可能是

```
if (@Number == 24) AND ((@SomeVal1 == false) OR (@SomeVal2 == true)) 
  AND ('@CustomerFirstName' != '@CustomerLastName'). 
```

我们想对 @ 变量进行简单的搜索/替换，然后评估字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T16:59:22.883

你可以，但它需要大量的跳跃。但是，.net 框架具有[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)，可用于生成此类表达式并将它们编译为 lambda。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T17:00:33.330

将数据视为代码总是会带来一些重大风险，因此请仔细考虑这将对您的应用程序带来哪些安全隐患。

C# 通常不是这样的动态语言，但您可以破解此功能。 [下面](http://www.codeproject.com/Articles/11939/Evaluate-C-Code-Eval-Function)是一个 C# 版本的示例`eval`。

正如@Femaref 指出的那样，根据需要，表达式树也可能是一种选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T17:01:56.907

除了 Femaref 的回答之外，您还可以尝试自己解释字符串。

这种方式就是某种 DSL（领域特定语言）。您可以在此处阅读有关 DSL 的更多信息：

ANTLR（用于构建 DSL 的有用工具）[http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target](http://www.antlr.org/wiki/display/ANTLR3/Antlr+3+CSharp+Target)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T17:00:17.093

恐怕没有简单的方法可以做到。您可以手动解析字符串，然后使用反射来获取@foo 语法引用的变量或字段或属性，或者您可以使用反映您的规则的方法创建动态类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T17:11:04.030

我不确定你可能有多么复杂的表达方式。但这是一个不错的库，我认为它可以处理您的示例表达式。 [http://ncalc.codeplex.com/](http://ncalc.codeplex.com/)

# json - Spring Roo OneToMany 关系未在 JSON 中显示

> ID：16197866
> 
> 赞同：2
> 
> 时间：2013-04-24T16:56:45.613
> 
> 标签：json, hibernate, spring-mvc, jackson, spring-roo

我正在尝试使用 Hibernate、roo 和 JSON 获得 OneToMany 关系。

通过添加，我能够通过 jspx 页面查看父级的子级

```
 <field:display field="children" id="s_com_example_domain_Parent_children" object="${parent}" z="Etv5+hIcaVaq9A6jzjMOK0xoJMI="/> 
```

到 /src/main/webapp/WEB-INF/parents/show.jspx

但是，当我执行 GET (type=application/json) 时看不到它们这是我的代码：

父.java：

```
 @RooJavaBean
 @RooToString
 @RooJpaActiveRecord
 @RooJson
 public class Parent {

private String name;

@OneToMany(cascade = CascadeType.ALL, mappedBy = "parent")
private Set<Child> children = new HashSet<Child>();
 } 
```

子.java

```
 @RooJavaBean
 @RooToString
 @RooJpaActiveRecord
 @RooJson
 public class Child {

private String name;

@ManyToOne
private Parent parent;
 } 
```

罗贝壳：

```
jpa setup --provider HIBERNATE --database HYPERSONIC_IN_MEMORY
entity jpa --class ~.domain.Parent 
entity jpa --class ~.domain.Child
field set --fieldName children --type ~.domain.Child --class ~.domain.Parent --mappedBy     parent --cardinality ONE_TO_MANY --notNull false 
field reference --fieldName parent --type ~.domain.Parent --cardinality MANY_TO_ONE --class ~.domain.Child --notNull false
web mvc setup
web mvc all --package ~.web
web mvc json all 
```

我还添加了

```
 <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.12</version>
    </dependency> 
```

到我的 Maven 项目。

如果我通过 web (jspx) 界面，我可以添加一个父 p 和子 c。我可以看到孩子有一个父母 p，父母有孩子 c，但这是我对 JSON 的 GET 请求的输出

```
 Request Url: http://localhost:8080/HibernateTest/children/1
 Request Method: GET
 {
     "id": 1,
     "name": "c",
     "parent": {
         "id": 1,
         "name": "p",
         "version": 0
     },
     "version": 0
 }

 Request Url: http://localhost:8080/HibernateTest/parents/1
 Request Method: GET
 {
     "id": 1,
     "name": "p",
     "version": 0
 } 
```

如何让我的孩子在 JSON GET 请求中显示在父级下方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T19:34:07.030

为了返回级联关系，你覆盖你的实体的 toJson() 方法（从你的 .aj 中推入），在你的父母中做这样的事情：

```
public String toJson() {
  return new JSONSerializer().include("*.children").serialize(this);
} 
```

更多信息可以在[这里](http://static.springsource.org/spring-roo/reference/html/base-json.html)找到。我认为您还可以使用一个注释，例如@Json 或类似的东西，您可以在其中指示在序列化中包含/排除哪些成员，但我不记得它，也无法通过谷歌找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T05:03:55.780

在 RooJson 注释上使用 deepSerialize 可以更深入地了解 Flexjson，而不必弄乱方面：

```
@RooJavaBean
@RooJpaActiveRecord
@RooJson(deepSerialize = true)
public class Office {

    @NotNull
    private String name;

    @OneToMany(targetEntity = Person.class, cascade = CascadeType.ALL, mappedBy = "office")
    private Set<Person> people = new HashSet<Person>();

    @NotNull
    @ManyToOne(targetEntity = Company.class)
    private Company company;
} 
```

# python - 守护进程，使程序在 python/wx.python 中的后台运行

> ID：16197873
> 
> 赞同：1
> 
> 时间：2013-04-24T16:57:11.170
> 
> 标签：python, wxpython, daemon

我创建了一个完整的记录器类型程序，它记录来自互联网来源的某些数据。这是我编码的 GUI `wx.python`，现在我想将它守护（如果它是正确的术语）。该程序需要在后台运行，用户必须可以选择在他喜欢的时候调用/打开 GUI。如何使用 wx.python 实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:33:05.510

我不会真的“守护”它本身。相反，我会把它放在系统托盘中……至少，这就是我在 Windows 上所做的。我假设你可以在其他操作系统上做类似的事情。基本上，您想将框架绑定到 wx.EVT_ICONIZE 并在该方法中隐藏它。然后当用户双击任务栏图标时，您想要显示它并且可能也将其提升。

这里有一些格式错误的代码：http: [//bytes.com/topic/python/answers/699757-wxpython-how-minimize-taskbar](http://bytes.com/topic/python/answers/699757-wxpython-how-minimize-taskbar) （我自己使用了它的变体，所以我知道它有效）。

这里有一些关于任务栏图标的信息：http: [//www.blog.pythonlibrary.org/2011/12/13/wxpython-101-creating-taskbar-icons/](http://www.blog.pythonlibrary.org/2011/12/13/wxpython-101-creating-taskbar-icons/)

# javascript - 什么时候在 Rails 中使用 Angular（或类似的 JS MV* 框架）是个好主意？

> ID：16197877
> 
> 赞同：3
> 
> 时间：2013-04-24T16:57:21.703
> 
> 标签：javascript, ruby-on-rails, performance, angularjs, javascript-framework

我一直在开发一个 UI 相当简单的 Rails 应用程序。当用户登录时，它会列出用户创建的一堆项目。每个项目都有几个动作。还有一个创建新项目的表格。

我最初只使用标准的 Rails 模板系统和 Rails AJAX 调用操作（设置：remote => true，编写响应 JS 等），但我最近决定切换到 AngularJS，以便更容易实现 AJAX 操作直接更新 DOM。在服务器端，我取消了大部分 Rails 控制器，并将操作移到 Grape API 中。

开发过程变得（稍微）容易了，因为要编写的 JavaScript 更少了，但是页面的性能却受到了影响。现在，在页面加载后，必须进行额外的 API 调用才能使用数据填充页面。数据作为一个相当长的 JSON 字符串发送到客户端（即使我正在压缩它），客户端必须做很多工作来解析它并呈现它。结果，该页面的加载时间大约是以前的两倍。

如何克服这个问题，一般来说，什么时候在一个拥有大量数据且不一定是单页应用程序的 Web 应用程序中使用 Angular 之类的东西才有意义？似乎权衡是在让服务器做更多的工作和性能更好以换取客户端的意大利面条代码，或者让客户端做更多的工作和性能下降以换取更漂亮、结构良好的代码之间在客户端。

两者之间有什么快乐的媒介吗？很想听听你的想法......

# jsfiddle - 是否可以在 JsFiddle 上有 2 个 HTML 文件？

> ID：16197884
> 
> 赞同：3
> 
> 时间：2013-04-24T16:57:33.953
> 
> 标签：jsfiddle

我在这里学习一本书，有一个需要 2 个 HTML 文件的练习，我想知道我的 JsFidle 中是否有 HTML 文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:03:34.263

我不相信这是可能的。但是，您可以使用 Plunker。它非常相似，但允许您使用您的扩展名创建多个文件。前一周正在使用它来将 CSV 作为数据源。 **[Plunker 网站在这里](http://plnkr.co/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:04:33.997

这应该会有所帮助。

[http://doc.jsfiddle.net/use/gist_response.html](http://doc.jsfiddle.net/use/gist_response.html)

*[http://gist.github.com/raw/606699/fiddle.response.html](http://gist.github.com/raw/606699/fiddle.response.html)的内容将返回 text/html MIME 类型，如果此 url 将被加载[http://jsfiddle.net/gh/gist/response .html/606699/](http://jsfiddle.net/gh/gist/response.html/606699/)使用 Ajax 请求。*

```
. 
```

# game-maker - 使用 Game Maker GML 创建新对象

> ID：16197885
> 
> 赞同：0
> 
> 时间：2013-04-24T16:57:35.417
> 
> 标签：game-maker

我想知道是否有办法检查一个对象是否存在于一个点上，如果不存在，则在将新对象捕捉到网格时创建一个新对象？我知道您可以使用它`instance_create(x,y,obj_to_create);`，但无论如何它只会放置在一个点上并且不会捕捉到网格。另外，Game Maker 中是否有全局鼠标点击事件？
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:19:18.210

好吧，有一些（几乎相似的）功能可以让你做到这一点......但最直接的是使用`position_meeting(x,y, obj)`

所以可能会变成：

```
if (!position_meeting(x, y, obj_to_create)) {
    instance_create(x,y,obj_to_create);
} 
```

现在要捕捉到网格，您必须在捕捉位置创建它：

```
instance_create(x div GRIDW, y div GRIDH, obj_to_create); 
```

# dom - 在 Dart 中查询表格中的单元格

> ID：16197888
> 
> 赞同：0
> 
> 时间：2013-04-24T16:57:40.940
> 
> 标签：dom, dart, html-table, row, cell

我想查询表格的特定单元格以更改其文本或内部 HTML。

表格样本：

```
<table id="infotable">
  <thead></thead>
    <tbody id="tData">
      <tr>
        <td>SomeCompany1</td>
        <td>SomeProduct1</td>
        <td>PriceType1</td>
        <td id="164">Awaiting data...</td>
      </tr>
[...] 
```

上表第一行的第三个单元格是我用属性标识的目标`id="164"`。

在 Dart 脚本中，我尝试了两种查询此单元格的方法：

```
TableCellElement cell = document.query('#164'); 
```

和

```
var cell = query('#164'); 
```

两者都会在 Dart 编辑器中导致以下错误：

```
'Error: SyntaxError: DOM Exception 12' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:00:35.723

当我在另一篇 SO 帖子中看到答案时，我已经写了这个，但是在 jQuery 的上下文中。事实证明，问题在于 id 属性不允许以数字开头。

在属性值的开头添加一个字符解决了这个问题（例如`q`in `id="q164`".

# iphone - UITableView 单元格按钮混淆了

> ID：16197891
> 
> 赞同：1
> 
> 时间：2013-04-24T16:57:47.250
> 
> 标签：iphone, ios, objective-c, uitableview

我有一个问题，将按钮设置为`UITableviewCell`.
之后`viewDidLoad`，按钮在正确的位置。但是当我向下滚动时，按钮在其他任何地方。

这是我的代码，希望你能帮助我。
提前致谢。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

if (indexPath.section == 0 && indexPath.row == 0 && _isAddImageViewLoad == NO) {
    // Add Image Button
    UIButton *addImage = [UIButton buttonWithType:UIButtonTypeCustom];
    UIImage* image = [UIImage imageNamed:@"AddImage@2x"];
    addImage.frame = CGRectMake(110.0f, 10.0f, 110.0f, 110.0f);
    [addImage setImage:image forState:UIControlStateNormal];

    [cell.contentView addSubview:addImage];
    _isAddImageViewLoad = YES;
} else {
    NSDictionary *dictionary = [_items objectAtIndex:indexPath.section];
    NSArray *array = [dictionary objectForKey:@"data"];
    NSString *cellValue = [array objectAtIndex:indexPath.row];
    cell.textLabel.text = cellValue;
}

return cell; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:08:15.320

这是因为您正在重用单元格，并且当按钮在您的 else 部分中不应该是一个简单的解决方案时，它就会被放置。`addImage.hidden = YES;`在你的 if 语句中写下and`addImage.hidden = NO;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:07:24.750

看这行代码：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

这行代码意味着`UITableViewCells`不是每次都创建。当您上下滚动时，它们会被重复使用。使用上面的代码，`UIButton`将在正确的位置创建按钮，但是随着单元格的重复使用，它将在随机位置创建按钮。

解决问题的一种快速方法，将上面的代码行更改为简单

```
UITableViewCell *cell; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:12:39.310

只是几件事。如果您使用“AddImage”，它会自动使用“AddImage@2x”（如果它是 Retina 显示器）。我认为这不会解决您的问题，但可能会导致奇怪。

当一个表格视图单元格从视图中滚动出来时，它在某种意义上被“回收”了。看起来您正在使用 bool 来排除原始单元格再次使用按钮加载。如果您总是希望它位于“顶部”，则可能需要使用标题来按住按钮。您可能还想验证在重用单元格时是否删除了按钮。如果不是，它将显示在重用该单元格的下一行中。

附带说明... 按钮在表格视图单元格中通常不能很好地工作，因为它们以非常不同的方式处理触摸。让他们感觉自然需要相当多的修改，但那是另一回事。

希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T17:14:07.720

问题是因为细胞重用。如果按钮退出，您需要在 else 子句中添加一些代码来删除按钮。一种方法是给你的按钮一个标签，比如：

```
addImage.tag = 10; 
```

然后在你的 else 子句中：

```
}else{
    if (cell viewWithTag:10) [[cell viewWithTag: 10] removeFromSuperview];
    ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-24T17:14:12.263

问题是由于单元格的出队。表格视图第一次创建单元格时，所有单元格都通过

```
 cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier]; 
```

代码。但是当第 0 行第 0 行移出屏幕时，该单元格被推入单元格可重用队列。

现在，当您的 tableview 需要显示第 0 行第 0 行时，它将从重用队列中获取一个单元格。您将不会获得与第一次相同的单元格。所以现在你可能有 2 个带有按钮的单元格。

您应该做的是为第 0 行第 0 部分以及所有其他部分和行设置不同的 CellIdentifier。创建单元格时还要创建按钮。因此，在 tableView 第一次创建单元格之后，您将不会创建按钮的所有内容。

# annotations - 自定义注释与在 JEE6 中使用 @Named

> ID：16197895
> 
> 赞同：0
> 
> 时间：2013-04-24T16:57:55.973
> 
> 标签：annotations, java-ee-6

这两种选择有什么区别……它们可以互换使用吗？

(A) 创建自定义注解，以便可以在 DAO 中使用 @Inject 代替 @PersistenceContext，如 - [how-to-stack-custom-annotation-in-java-with-inject-annotation的答案所示](https://stackoverflow.com/questions/8770465/how-to-stack-custom-annotation-in-java-with-inject-annotation/8770527#8770527)

(B) 使用@Named("yourName") 来限定Producer，例如下面的代码示例。

```
public class Resources {
    /**
     * EntityManager's persistence context is defined here so the @Inject annotation may be used in referencing classes.
     */
    @Produces
    @Named("MyEm")
    @PersistenceContext(unitName = "jboss.managed")
    private EntityManager   em;
}

@Stateless
public class FiletracksentHome {
     ..
    @Inject
    @Named("MyEm")
    private EntityManager       entityManager;
    ..
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:36:43.067

它们是可互换的，但您应该使用 (A)。

`@Named`注释主要用于能够通过表达式语言 (EL) 访问对象，例如在 JSF 视图中。

问题是，解析是通过字符串完成的，因此既不是类型安全的，也通常不会被 IDE 中的重构自动覆盖。

[CDI 规范](http://docs.jboss.org/cdi/spec/1.0/html_single/#d0e2567)指出，如果不用于集成遗留代码，则不应将其用于限定注入点。

这是一篇关于这个主题的好[文章。](http://docs.jboss.org/cdi/spec/1.0/html_single/#d0e2567)

# ember.js - 使用 js-test-driver 在 ember.js 应用程序上执行集成测试的问题

> ID：16197896
> 
> 赞同：1
> 
> 时间：2013-04-24T16:58:04.843
> 
> 标签：ember.js, continuous-integration, automated-tests, integration-testing, js-test-driver

我正在尝试将一个小型 ember.js 应用程序集成到现有网站中。代码工作得很好，但我无法让我的集成测试工作。

消息传递.js

```
window.App = Ember.Application.create();

App.Store = DS.Store.extend({
    revision: 12,
    adapter: 'DS.FixtureAdapter'
});

App.Router.map(function () {
    this.resource('index', {path: '/'}, function () {
        this.resource('detail', {path: ':message_id'});
    });
});

App.IndexRoute = Ember.Route.extend({
    model: function () {
        return App.MessageSummary.find();
    },

    events: {
        select: function (summary) {
            this.transitionTo('detail', App.Message.find(summary.get('id')));
        }
    }
});

App.MessageSummary = DS.Model.extend({
    id: DS.attr('string'),
    date: DS.attr('string'),
    status: DS.attr('string'),
    by: DS.attr('string'),
    subject: DS.attr('string')
});

App.Message = DS.Model.extend({
    id: DS.attr('string'),
    subject: DS.attr('string')
});

App.MessageSummary.FIXTURES = [
    {id: '1', date: '04/19/2013 8:15 PM', status: 'read', by: 'your doctor', subject: 'Your heart attack'},
    {id: '2', date: '04/19/2013 8:15 PM', status: 'read', by: 'your doctor', subject: 'Your heart attack'},
    {id: '3', date: '04/19/2013 8:15 PM', status: 'read', by: 'your doctor', subject: 'Your heart attack'},
    {id: '4', date: '04/19/2013 8:15 PM', status: 'read', by: 'your doctor', subject: 'Your heart attack'},
    {id: '5', date: '04/19/2013 8:15 PM', status: 'read', by: 'your doctor', subject: 'Your heart attack'}
];

App.Message.FIXTURES = [
    {id: '1', subject: 'Your heart attack (Detail 1)'},
    {id: '2', subject: 'Your heart attack (Detail 2)'},
    {id: '3', subject: 'Your heart attack (Detail 3)'},
    {id: '4', subject: 'Your heart attack (Detail 4)'},
    {id: '5', subject: 'Your heart attack (Detail 5)'}
]; 
```

消息传递.html

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>

    <script type="text/javascript" src="js/lib/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="js/lib/handlebars-1.0.0-rc.3.js"></script>
    <script type="text/javascript" src="js/lib/ember-1.0.0-rc.3.js"></script>
    <script type="text/javascript" src="js/lib/ember-data-latest.min.js"></script>

    <script type="text/javascript" src="js/messaging.js"></script>

    <title>Messaging</title>

</head>
<body>

<script type="text/x-handlebars" id="index">
    <div>
        <table class="rounded-corner summary">
            <thead>
            <tr>
                <th scope="col">Date</th>
                <th scope="col">Status</th>
                <th scope="col">From</th>
                <th scope="col">Subject</th>
            </tr>
            </thead>
            <tbody>
            {{#each model}}
            <tr {{action select this}}>
                <td>{{date}}</td>
                <td>{{status}}</td>
                <td>{{by}}</td>
                <td>{{subject}}</td>
            </tr>
            {{/each}}
            </tbody>
        </table>
    </div>
    <div>
        {{outlet}}
    </div>
</script>

<script type="text/x-handlebars" id="detail">
    <div>
        {{id}}: {{subject}}
    </div>
</script>
</body>
</html> 
```

如您所见，这非常微不足道。像浏览器中的魅力一样工作。鉴于 Ember 是一个自以为是的、约定优于配置的框架，集成测试似乎是正确的方法。因此，在尝试使用我们现有的工具时，我的 jsTestDriver 单元测试如下所示：

jsTestDriver.conf：

```
server: http://localhost:9876

load:
- src/main/webapp/js/lib/jquery-1.8.3.min.js
- src/main/webapp/js/lib/handlebars-1.0.0-rc.3.js
- src/main/webapp/js/lib/ember-1.0.0-rc.3.js
- src/main/webapp/js/lib/ember-data-latest.min.js

- src/test/webapp/js/emberTesting.js

- src/main/webapp/js/messaging.js

- src/test/webapp/js/jshamcrest-0.6.7.min.js
- src/test/webapp/js/jsmockito-1.0.4-minified.js

test:
- src/test/webapp/js/messagingTests.js 
```

消息传递测试.js

```
JsHamcrest.Integration.JsTestDriver();
JsMockito.Integration.JsTestDriver();

App.Router.reopen({
    location: 'none'
});

jQuery.fx.off = true;

TestCase('secure messaging integration tests', {
    setUp: function () {

        /*:DOC +=

         <script type="text/x-handlebars" id="index">
         <div>
         <table class="rounded-corner summary">
         <thead>
         <tr>
         <th scope="col">Date</th>
         <th scope="col">Status</th>
         <th scope="col">From</th>
         <th scope="col">Subject</th>
         </tr>
         </thead>
         <tbody>
         {{#each model}}
         <tr {{action select this}}>
         <td>{{date}}</td>
         <td>{{status}}</td>
         <td>{{by}}</td>
         <td>{{subject}}</td>
         </tr>
         {{/each}}
         </tbody>
         </table>
         </div>
         <div>
         {{outlet}}
         </div>
         </script>

         <script type="text/x-handlebars" id="detail">
         <div>
         {{id}}: {{subject}}
         </div>
         </script>
         */
        Ember.run(function () {
            if (App.store) App.store.destroy();
            App.store = App.Store.create();
        });
        App.reset();
    },

    'test initial load loads table body': function () {
        console.log($('body').html());//debug 
        assertThat($('.summary tbody tr').length, equalTo(5));
    }
}); 
```

在测试执行期间，ember.js 抛出异常：

浏览器控制台输出：

```
DEBUG: -------------------------------
ember-1.0.0-rc.3.js:349DEBUG: Ember.VERSION : 1.0.0-rc.3
ember-1.0.0-rc.3.js:349DEBUG: Handlebars.VERSION : 1.0.0-rc.3
ember-1.0.0-rc.3.js:349DEBUG: jQuery.VERSION : 1.8.3
ember-1.0.0-rc.3.js:349DEBUG: -------------------------------
ember-1.0.0-rc.3.js:18334Error: Cannot perform operations on a Metamorph that is not in the DOM. 
```

抛出错误时的堆栈顶部是：

```
checkRemoved(18334)
html(18304)
empty(19077)
empty(16899)
arrayWillChange(17700)
sendEvent(2432)
arrayContentWillChange(8909)
arrangedContentArrayWillChange(11578)
sendEvent(2432)
arrayContentWillChange(8909)
replace(12007)
insertAt(9411)
pushObject(9464)
addObject(9619) 
```

呈现的 html 的正文是：

```
 <div id="ember407" class="ember-view">
     <div>
     <table class="rounded-corner summary">
     <thead>
     <tr>
     <th scope="col">Date</th>
     <th scope="col">Status</th>
     <th scope="col">From</th>
     <th scope="col">Subject</th>
     </tr>
     </thead>
     <tbody>
     <script id="metamorph-0-start" type="text/x-placeholder"></script><script id="metamorph-0-end" type="text/x-placeholder"></script>
     </tbody>
     </table>
     </div>
     <div>
     <script id="metamorph-1-start" type="text/x-placeholder"></script><script id="metamorph-1-end" type="text/x-placeholder"></script>
     </div>
     </div> 
```

我意识到考虑到 ember.js 绑定的工作方式，我可能需要使用 jsTestDriver 的 AsyncTestCase，但由于 ember 在渲染过程中抛出异常，我需要先解决这个问题。

想法？

# r - data.table 不再通过引用更新

> ID：16197898
> 
> 赞同：3
> 
> 时间：2013-04-24T16:58:13.867
> 
> 标签：r, data.table

这是一个功能

```
f <- function(orderData){
        colNames <- paste0("lim_",sort(unique(orderData[,XLM])))
        orderData[, (colNames):={lim_=factor(XLM);lapply(data.table(model.matrix(~ lim_:w_qalim + 0)), cumsum)}]
} 
```

和一些样本数据

```
dt = data.table(XLM=sample(1L:300L,5e4,T), w_qalim=sample(1L:5L,5e4,T))
dt1 = data.table(XLM=sample(1L:300L,1e2,T), w_qalim=sample(1L:5L,1e2,T)) 
```

执行`f(dt)`不会`dt`在我的盒子上通过引用更新，但`f(dt1)`会更新。是否预期/与`datatable.alloccol`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T19:15:23.953

在这两种情况下，数据表的长度都是 2，真实长度是 100：

```
> length(dt); truelength(dt)
[1] 2
[1] 100
> length(dt1); truelength(dt1)
[1] 2
[1] 100 
```

但是，在`dt` `colNames`is 300 的情况下，2+300 超过了真实长度，但在`dt1` `colNames`is 81 的情况下，2+81 不会。

您可以提前分配更大的真实长度，例如

```
alloc.col(dt, 1000) 
```

或者您可以设置默认值，以便所有数据表具有更大的默认值：

```
options(datatable.alloccol = 1000) 
```

见`?alloc.col`，

# sql-server-2012 - SQL Server 2012 空间索引最近邻查询

> ID：16197899
> 
> 赞同：2
> 
> 时间：2013-04-24T16:58:17.117
> 
> 标签：sql-server-2012, spatial-query

我创建了一个表格，其中包含美国邮政编码以及这些邮政编码的纬度和经度。从经纬度我创建了一个地理专栏。我在那个地理列上创建了一个空间索引。我想将最近的 100 个邮政编码返回到纬度和经度，所以我创建了以下存储过程

```
CREATE PROCEDURE [dbo].[Geo_Locate]
@Latitude DECIMAL,
@Longitude DECIMAL
AS
BEGIN
SET NOCOUNT ON;

DECLARE @GeogTemp NVARCHAR(200)
DECLARE @Geog GEOGRAPHY

-- Create a geography type variable from the passed in latitude and longitude. This will be used to find the closest point in the database
SET @GeogTemp = 'POINT(' + convert(NVARCHAR(100), @Longitude) + ' ' + convert(NVARCHAR(100), @Latitude) + ')'
SET @Geog = geography::STGeomFromText(@GeogTemp, 4326)

-- Run the main query
SELECT TOP 100
    [Id],
    [Country],
    [ZipPostalCode],
    [City],
    [County],
    [Latitude],
    [Longitude],
    [GeographyCol],
    GeographyCol.STDistance(@Geog) AS Distance
FROM 
    [dbo].[ZipCode] WITH(INDEX(ZipCode_SpatialIndex))
WHERE 
    GeographyCol.STDistance(@Geog) < 100000     -- 100 KM
ORDER BY
    GeographyCol.STDistance(@Geog) ASC
END 
```

但是，当我将纬度 = 35.48330 和经度 = -97.17340 传递给此存储过程时，我会在第 55 项返回以下内容

869531 美国 73045 哈拉俄克拉荷马 OK 35.48330 -97.17340 0xE6100000010C12143FC6DCBD4140174850FC184B58C0 55894.2236191955

最后一列是距离。基本上查询是说这个记录距离输入点近56KM，但纬度和经度是相同的。

我读过 MSDN，我的查询看起来是正确的。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T16:57:02.573

这是一个笨蛋，我不确定我明白了。我开始尝试以最纯粹的方式复制您所看到的内容：两个地理点之间的 STDistance() 不正确。

```
DECLARE @zipcode geography
DECLARE @searchpoint geography
SET @zipcode = geography::STPointFromText('POINT(-97.17340 35.48330)', 4326);
SET @searchpoint = geography::STPointFromText('POINT(-97.17340 35.48330)', 4326);

SELECT @zipcode.STDistance(@searchpoint) 
```

结果正确地是 0 米（SRID 4326 使用米作为距离单位），所以我一直摸不着头脑。我注意到我无法复制的唯一一件事是：您在地理和几何之间切换（您的代码来自问题）：

```
SET @Geog = geography::STGeomFromText(@GeogTemp, 4326) 
```

当我将它放入我的代码中时，距离仍然为 0。所以我唯一的问题，也许你可以发布 T-SQL，是关于你的空间索引。我认为 STDistance() 计算将使用索引。因此，在没有看到索引并且知道至少在这种情况下您在 Geography 和 Geometry 之间跳跃的情况下，我想知道是否存在奇怪的结果，因为我无法用上面的代码复制它。

# wordpress - 添加新的 Wordpress 页面时，选择将显示哪些类别的帖子？

> ID：16197902
> 
> 赞同：0
> 
> 时间：2013-04-24T16:58:22.000
> 
> 标签：wordpress

我知道我可以制作一个自定义页面模板并在那里选择在该特定页面上显示哪些类别的帖子。

我追求的是在创建新页面时选择类别的某种方式，并且所有这些页面都将使用相同的页面模板。

我试图搜索插件等，但没有找到。有没有好的插件/其他方式来做到这一点？

理想的情况是，例如，当用户创建新页面时，会有一个下拉菜单，他/她可以在其中选择在页面上显示哪些帖子。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:56:28.500

您是否想要页面中的帖子（相对于侧边栏）？它们会与用户在页面中输入的任何其他内容一起出现吗？

如果是这样，我认为会有一个插件允许用户放置一个短代码，指定他们想要的帖子类别，并且可能对数量有一些限制。

# iphone - 单一上下文但“非法尝试在不同上下文中的对象之间建立关系‘xyz’

> ID：16197908
> 
> 赞同：2
> 
> 时间：2013-04-24T16:58:41.487
> 
> 标签：iphone, exception, nsfetchrequest

我有一个上下文，我想在上下文中的现有对象*(Veranstaltung)*和新对象*(Ticket)*之间创建关系。

```
 NSManagedObjectContext *managedObjectContext = [self managedObjectContext]; //constructor get the Context from the appDelegate

Ticket *ticket = [NSEntityDescription insertNewObjectForEntityForName:@"Ticket" inManagedObjectContext:managedObjectContext];

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Veranstaltung" inManagedObjectContext:managedObjectContext];
[fetchRequest setEntity:entity];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"vID == %@", veranstaltung.vID];
[fetchRequest setPredicate:predicate];
NSError *error = nil;

NSArray *fetchedRequests = [managedObjectContext executeFetchRequest:fetchRequest error:&error];
NSLog(@"FetchedRequests count: %d", fetchedRequests.count);

if(fetchedRequests !=nil)
   [ticket setEvent:fetchedRequests[0]]; 
```

在设置事件时，应用程序崩溃了..有人知道吗？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T17:02:34.540

从错误消息来看，Core Data 似乎有这种感觉，`Ticket`并且`Veranstaltung`处于不同的上下文中。看看前几行代码......

```
[self managedObjectContext]; //constructor get the Context from the appDelegate

Ticket *ticket = [NSEntityDescription insertNewObjectForEntityForName:@"Ticket" inManagedObjectContext:managedObjectContext]; 
```

看起来您在其中一行遗漏了一些内容，结果是`managedObjectContext`第二行的内容与您的想法不同。您可能的意思是：

```
NSManagedObjectContext *managedObjectContext = [self managedObjectContext]; //constructor get the Context from the appDelegate 
```

要不然：

```
Ticket *ticket = [NSEntityDescription insertNewObjectForEntityForName:@"Ticket" inManagedObjectContext:[self managedObjectContext]]; 
```

事实上，第一行没有做任何有用的事情，因为结果被丢弃了。我建议将第二行放在第三行之后，并在任何地方使用`context`第三行中的局部变量。

# sql-server - 如何在 MS SQL 2005 中将水平数据转换为两个带有条件的单独垂直表

> ID：16197913
> 
> 赞同：0
> 
> 时间：2013-04-24T16:59:01.707
> 
> 标签：sql-server, sql-server-2005, unpivot

对于以下问题，我有一种蛮力的解决方案，但我相信这里有人会有一个优雅的解决方案。

我有以下水平方向的表格。

```
| Person  | Trait1 | Trait2 |
| Patrick | .3     | .4     |
| James   | .7     | .3     |
| Kristin | .9     | .2     | 
```

理想情况下，我希望根据特征将上述内容分成两个垂直表。将有两个垂直表，Bad 和 Terrible。

如果 .4 <= Trait1 < .6 -> 不好，Trait1 >= .7 -> 很糟糕

如果 .3 <= Trait2 < .5 -> 不好，Trait2 >= .9 -> 很糟糕

使用这些条件，我们将得到下表

```
BAD
|Person   | Trait  | Value |
| Patrick | Trait2 | .4    | 
| James   | Trait2 | .3    |

Terrible
|Person  | Trait  | Value |
|James   | Trait1 | .7    | 
|Kristin | Trait1 | .9    | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:13:17.747

由于您使用的是 SQL Server 2005，因此可以使用 UNPIVOT 函数来获取结果。

UNPIVOT 获取列并将其转换为行，这将更容易应用您的过滤器。

**坏数据：**

```
select person, trait, value
into bad
from yourtable
unpivot
(
  value
  for trait in (trait1, trait2)
) u
where 
(
  trait ='trait1'
  and value >= .4
  and value < .6
)
or
(
  trait ='trait2'
  and value >= .3
  and value < .5
); 
```

**可怕的数据：**

```
select person, trait, value
into terrible
from yourtable
unpivot
(
  value
  for trait in (trait1, trait2)
) u
where 
(
  trait ='trait1'
  and value >= .7
)
or
(
  trait ='trait2'
  and value >= .9
); 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/e04794/9)。

请注意，这也可以使用 UNION ALL 查询将列 UNPIVOT 到行中来完成：

```
select person, trait, value
from
(
  select person, 'trait1' trait, trait1 value
  from yourtable
  union all
  select person, 'trait2' trait, trait2 value
  from yourtable
) d
-- where apply the filter here. 
```

UNPIVOT 和 UNION ALL 将数据转换为以下格式垂直格式：

```
|  PERSON |  TRAIT | VALUE |
----------------------------
| Patrick | trait1 |   0.3 |
|   James | trait1 |   0.7 |
| Kristin | trait1 |   0.9 | 
```

# c# - 如何在winform中允许带有TextBox的ctrl + a？

> ID：16197915
> 
> 赞同：60
> 
> 时间：2013-04-24T16:59:06.323
> 
> 标签：c#, winforms, textbox, keyboard-shortcuts

我在这里问已经问过（甚至回答过）的问题： [Why are some textboxes not accepting Control + A shortcut to select all by default](https://stackoverflow.com/questions/5885739/why-are-some-textboxes-not-accepting-control-a-shortcut-to-select-all-by-defau)

但这个答案对我不起作用。我有这个代码：

```
public class LoginForm : Form
{
    private TextBox tbUsername;

    public LoginForm()
    {
        tbUsername = new TextBox();
        tbUsername.ShortcutsEnabled = true;
        tbUsername.Multiline = false;
        Controls.Add(tbUsername);
    }
} 
```

文本框出现，我可以在上面写字，我可以在上面剪切、复制和粘贴文本，没有任何问题。但是，当我尝试按`Ctrl`+时，`A`我只会听到类似于您尝试从空文本框中删除文本时听到的“bling”（使用浏览器的地址栏尝试）。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2015-04-30T01:09:05.760

就像其他答案表明的那样，`Application.EnableVisualStyles()`应该调用。也`TextBox.ShortcutsEnabled`应该设置为`true`. 但是**如果你`TextBox.Multiline`启用了，那么** `Ctrl`+`A` **将不起作用**（[请参阅 MSDN 文档](https://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.shortcutsenabled.aspx)）。使用`RichTextBox`代替将解决问题。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-01-01T07:41:16.277

只需为有问题的 TextBox 创建一个 keydown 事件并包含以下代码：

```
private void tbUsername_KeyDown(object sender, KeyEventArgs e)
{
    if (e.Control && e.KeyCode == Keys.A)
    {
        if (sender != null)
            ((TextBox)sender).SelectAll();
    }
} 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-04-25T12:30:07.877

您始终可以覆盖进程命令键以获得所需的结果

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    const int WM_KEYDOWN = 0x100;
    var keyCode = (Keys) (msg.WParam.ToInt32() &
                          Convert.ToInt32(Keys.KeyCode));
    if ((msg.Msg == WM_KEYDOWN && keyCode == Keys.A) 
        && (ModifierKeys == Keys.Control) 
        && tbUsername.Focused)
    {
        tbUsername.SelectAll();
        return true;
    }            
    return base.ProcessCmdKey(ref msg, keyData);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-08-18T21:50:09.247

快速回答是，如果您使用 multiline true ，则必须显式调用全选。

```
private void tbUsername_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.A && e.Control)
    {
        tbUsername.SelectAll();
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-25T18:35:51.537

这也发生在我身上一次，我假设你`Application.EnableVisualStyles();`从你的程序中删除了调用？将其添加回`Main()`函数中，一切都应该正常工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-08T20:40:18.133

文本框有一种方法`SelectAll()`，对我来说效果很好。(.net 4.5)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-18T03:38:51.020

无需处理 WM_KEYDOWN！我知道这里的大多数示例（以及 CodeProject 和许多其他地方）都说有，但它并不能解决每当出现未处理的 WM_CHAR 时产生的蜂鸣声。

相反，试试这个：

```
LRESULT CALLBACK Edit_Prc(HWND hwnd,UINT msg,WPARAM wParam,LPARAM lParam){
  if(msg==WM_CHAR&&wParam==1){SendMessage(hwnd,EM_SETSEL,0,-1); return 1;}
  else return CallWindowProc((void*)WPA,hwnd,msg,wParam,lParam);
} 
```

请记住使用 WPA=SetWindowLong(...) 将 EDIT 控件子类化到此 Edit_Prc() ，其中 WPA 是 CallWindowProc(...) 的窗口过程地址

我通过实验发现了这一点，在发现我在网上找到的所有答案都坚持使用 GetKeyState() 处理 WM_KEYDOWN 后，最终得到了更大的代码，无法阻止那恼人的哔哔声！

虽然这个答案不涉及 dotnet，但在这种情况下，通常最好切入正题并解决它，而不是为大型代码包装系统的哪个版本可能会或可能不会为你做这件事而苦恼，特别是如果你想要以避免与固有行为作斗争的风险。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-07T07:27:34.667

投入我的两分钱。在按键下调用它只是另一种选择。

```
private void TxtBox_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == '\x1')
    {
        TxtBox.SelectAll();
        e.Handled = true;
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-01T08:17:39.543

这是我的代码，它工作正常

```
private void mainSimPlus_KeyDown(object sender, KeyEventArgs e)
            {
                e.Handled = true;
                if (e.Control == true && e.KeyCode == Keys.A)
                {
                    if (SelectAllTextBox(txt1))
                        return;
                    if (SelectAllTextBox(txt2))
                        return;
                }
            }
            private bool SelectAllTextBox(TextBox txt)
            {
                if (txt.Focused)
                {
                    txt.SelectAll();
                    return true;
                }
                else
                    return false;
            } 
```

# sql-server - UPDATE 存储过程不更新

> ID：16197916
> 
> 赞同：1
> 
> 时间：2013-04-24T16:59:07.903
> 
> 标签：sql-server, stored-procedures, if-statement, while-loop, sql-update

我有一个 SQL Server 存储过程，它引用了我的数据库中的一个表，用户可以在其中手动更新`rent`字段的值 ( `'Rent1'`)。该过程将此租金值与不同表 ( `'Rent2'`) 中的租金字段进行比较。如果与 Is的值`Rent1`不同，则更新为... 的值，或者至少这是应该发生的。`Rent2``Rent2``Rent1`

当我执行这个存储过程时，它运行良好并且我收到这些输出消息：

```
(1 row(s) affected)

(1 row(s) affected) 
```

这是我所期望的结果，因为作为一种测试手段，我已经将两个值更改为在`Rent1`和之间不同`Rent2`。但是当我查询更新后的表时，值保持不变。

这是我的存储过程：

```
SET QUOTED_IDENTIFIER ON 
GO
SET ANSI_NULLS ON 
GO

ALTER PROCEDURE update_rent
AS
DECLARE @flag INT
SET @flag = (select COUNT(*) from unit_rent left outer join unittype on unittype = scode where rent <> srent)

WHILE (@flag > 0)

BEGIN

IF (select min(rent) from unit_rent 
    left outer join unittype on unittype = scode 
    left outer join property on property.scode = unit_rent.pscode
    where rent <> srent) <>
   (select min(srent) from unit_rent 
    left outer join unittype on unittype = scode 
    left outer join property on property.scode = unit_rent.pscode
    where rent <> srent
    and rent in (select min(rent) from unit_rent
    left outer join unittype on unittype = scode 
    left outer join property on property.scode = unit_rent.pscode
    where rent <> srent))

BEGIN

UPDATE unittype
SET srent = (select min(rent) from unit_rent 
    left outer join unittype on unittype = scode 
    left outer join property on property.scode = unit_rent.pscode
    where rent <> srent)
WHERE unittype.hmy = (select min(hmy) from unittype left outer join unit_rent on unittype = scode where rent <> srent
        and rent = (select min(rent) from unit_rent left outer join unittype on unittype = scode where rent <> srent))

SET @flag = @flag-1;

END 

END

GO
SET QUOTED_IDENTIFIER OFF 
GO
SET ANSI_NULLS ON 
GO 
```

谁能看到我可能出错的地方或告诉我为什么我的输出消息在骗我？或者也许我可以采取不同的方法？我将不胜感激任何形式的帮助，谢谢！

**更新：**刚刚尝试了一种不同的方法，结果相同，只有 3 条`(1 row(s) addected)`消息：

```
ALTER PROCEDURE update_rent
AS
DECLARE @tmprent TABLE (hmy INT, rent decimal(11,2));
DECLARE @flag INT
SET @flag = (select COUNT(*) from unit_rent left outer join unittype on unittype = scode where rent <> srent)

INSERT INTO @tmprent (hmy, rent) values (1, 0.00);

WHILE (@flag > 0)

BEGIN

IF (select min(rent) from unit_rent 
    left outer join unittype on unittype = scode 
    left outer join property on property.scode = unit_rent.pscode
    where rent <> srent) <>
   (select min(srent) from unit_rent 
    left outer join unittype on unittype = scode 
    left outer join property on property.scode = unit_rent.pscode
    where rent <> srent
    and rent in (select min(rent) from unit_rent
    left outer join unittype on unittype = scode 
    left outer join property on property.scode = unit_rent.pscode
    where rent <> srent))

BEGIN

UPDATE @tmprent
SET rent = (select min(rent) from unit_rent 
    left outer join unittype on unittype = scode 
    left outer join property on property.scode = unit_rent.pscode
    where rent <> srent)
WHERE hmy = 1

UPDATE unittype
SET srent = (select rent from @tmprent where hmy = 1)
WHERE unittype.hmy = (select min(hmy) from unittype left outer join unit_rent on unittype = scode where rent <> srent
        and rent = (select min(rent) from unit_rent left outer join unittype on unittype = scode where rent <> srent))

SET @flag = @flag-1;

END 

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T15:46:09.323

我不知道我的回答对任何人有多大帮助，但如果有机会，我会把它包括在这里..

因此`unit_rent`，在我的 SP 中引用的表是由我创建的，并填充了我的`unittype`表中的数据（也在 SP 中引用）。当我填充`unit_rent`表格时，我从`unittype`表格中抓取了所有行。这是我犯错误的地方。该`unittype`表包含与特定单元类型关联的多个单元，因此每当我使用存储过程更新一行时，与该单元类型关联的所有其他单元都将变为`!=`我更改的租金金额。所以我只用不同的单位类型重新填充了我的`unit_rent`表，我的问题就解决了。

非常愚蠢的错误，但我不想让它没有答案，因为它可能会帮助其他人。

@granadaCoder -**再次**感谢您的帮助。第二次你帮助我非常彻底。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:18:13.787

在解决问题的世界中：

在 Update 之前放置一个 select 语句，以查看是否有任何匹配项

```
/*
UPDATE unittype
SET srent = (select min(rent) from unit_rent 
    left outer join unittype on unittype = scode 
    left outer join property on property.scode = unit_rent.pscode
    where rent <> srent)
*/
select * from unittype
WHERE unittype.hmy = (select min(hmy) from unittype left outer join unit_rent on unittype = scode where rent <> srent
        and rent = (select min(rent) from unit_rent left outer join unittype on unittype = scode where rent <> srent)) 
```

或者

```
declare @myCountCheck
select @myCountCheck =
(select count(*)
from unittype
    WHERE unittype.hmy = (select min(hmy) from unittype left outer join unit_rent on unittype = scode where rent <> srent
            and rent = (select min(rent) from unit_rent left outer join unittype on unittype = scode where rent <> srent))
)

if (@myCountCheck < 1)
BEGIN
    print 'No Row Match !!!'
END 
```

编辑 - - - - - - - - - - - - - - - - - - - -

如果你真的想看看发生了什么，那么编写一些“输出”审计......这样你就可以在 INSERT/UPDATE 语句中捕获正在发生的事情

[http://granadacoder.wordpress.com/2008/12/10/sqlserver20052008-output-clause-in-insertupdatedelete-statements/](http://granadacoder.wordpress.com/2008/12/10/sqlserver20052008-output-clause-in-insertupdatedelete-statements/)

这是示例代码：

SqlServer2005/2008 // INSERT/UPDATE/DELETE 语句中的 OUTPUT 子句

这些类型的示例在网络上随处可见，但这是我的原始示例，我认为它更清晰。

原始示例位于：http: [//blogs.msdn.com/sqltips/archive/2005/06/13/OUTPUT-clause.aspx](http://blogs.msdn.com/sqltips/archive/2005/06/13/OUTPUT-clause.aspx)

```
create table PrimaryHolderTable ( i int identity (1001,2) not null primary key, j int not null unique )
create table #OutputResultsHolder ( i int not null, j int not null)

insert into PrimaryHolderTable (j)
output inserted.i, inserted.j into #OutputResultsHolder
select top 10 o.object_id from sys.objects as o order by o.object_id desc –&lt;< from sys.objects is there just to provide some rows

select * from #OutputResultsHolder
drop table #OutputResultsHolder, PrimaryHolderTable;

go

create table dbo.EmployeeTable ( EmpKey int identity(1001,2) ,  EmpAge int not null );
create table dbo.AuditTable ( EntityKey int not null default -1  ,  OldValue int null, NewValue int null , Tag varchar(64)  );

insert into dbo.EmployeeTable (EmpAge)
output inserted.EmpKey , null , inserted.EmpAge , ‘Employee Inserted’ into dbo.AuditTable ( EntityKey , OldValue , NewValue , Tag)
 values( 18 );

insert into dbo.EmployeeTable (EmpAge)
output inserted.EmpKey , null , inserted.EmpAge , ‘Employee Inserted’ into dbo.AuditTable ( EntityKey , OldValue , NewValue , Tag) 
 values( 20 );

insert into dbo.EmployeeTable (EmpAge)
output inserted.EmpKey , null , inserted.EmpAge , ‘Employee Inserted’ into dbo.AuditTable ( EntityKey , OldValue , NewValue , Tag) 
 values( 22 );

update dbo.EmployeeTable
   set EmpAge  = EmpAge + 1
output inserted.EmpKey , deleted.EmpAge, inserted.EmpAge , ‘Employee Updated’ into dbo.AuditTable ( EntityKey , OldValue , NewValue , Tag)
 where EmpAge <=20;

delete from dbo.EmployeeTable
output deleted.EmpKey , deleted.EmpAge, NULL , ‘Employee Deleted’  into dbo.AuditTable (EntityKey , OldValue , NewValue , Tag)
 where EmpAge > 0;–Test multi rows

select * from dbo.EmployeeTable;–&lt;<will be empty at this point
select * from dbo.AuditTable;

drop table dbo.EmployeeTable, dbo.AuditTable;
go 
```

# php - Is_writeable 失败，但我是所有者

> ID：16197919
> 
> 赞同：1
> 
> 时间：2013-04-24T16:59:22.257
> 
> 标签：php, linux, chmod, chown

我正在运行以下代码，并将在下面给出 CHMOD 和 CHOWN 值。但由于某种原因 is_writable 一直失败。

```
if (!is_writeable($this->path)) {
  echo 'Current script owner: ' . get_current_user();
  echo '<br />';
  echo $this->path;
  echo '<br />';
  print_r(posix_getpwuid(fileowner($this->path)));
} 
```

该目录的 CHMOD 值为 775，所有者为 User1。上面的输出是

```
Current script owner: User1 
path/to/directory  
Array ( [name] => User1 [passwd] => x [uid] => 111 [gid] => 111 [gecos] => [dir] =>
/path/to/user [shell] => /bin/false ) 
```

唯一不匹配的是文件的所有者/组是 111/1 所以组可能不同但所有者是相同的。为什么 is_writeable 会失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:03:29.070

您是所有者还是网络服务器？

您使用网络服务器执行的所有操作都应该以`www`,`_www`或`www-data`(取决于配置；不同操作系统的默认值) 运行。因此，网络服务器用户不在您的组中，这导致网络服务器无法写入该文件。

（ps：`get_current_user()`是脚本的拥有者（比如你chown设置的），不是脚本运行用户。当前脚本运行用户数据`var_dump(posix_getpwuid(posix_getuid()));`：）

# c - C中的“with”宏

> ID：16197922
> 
> 赞同：5
> 
> 时间：2013-04-24T16:59:25.387
> 
> 标签：c, c-preprocessor, with-statement

我正在寻找一个类似于 with-construct 的宏。用法应该是这样的：

```
with (lock(&x), unlock(&x)) {
    ...
} 
```

它可能对其他一些目的有用。

我想出了这个宏：

```
#define __with(_onenter, _onexit, v) \
    for (int __with_uniq##v=1; __with_uniq##v > 0; )\
        for (_onenter; __with_uniq##v > 0; _onexit) \
            while (__with_uniq##v-- > 0)

#define _with(x, y, z) __with(x, y, z)
#define with(_onenter, _onexit) _with(_onenter, _onexit, __COUNTER__) 
```

它有 3 个嵌套循环，因为它应该：

1.  初始化循环计数器（当然，仅限 C99）
2.  可能初始化变量_onenter（例如`with (int fd=open(..), close(fd))`）
3.  允许`break`在代码块内。（`continue`也是允许的。宏可以调整`assert()`出来）

我在 XV6 OS 的代码中使用了它，它看起来非常有用。

我的问题是 - 这种宏最严重的问题是什么？我的意思是，除了仅使用 C 宏（尤其是实现新控制流构造的宏）之外。

到目前为止已经发现了这些缺点/问题：

1.  不支持`return`or `goto`（但它可以`goto`在内核代码中节省一些 s）
2.  不支持错误（例如`fd < 0`）。我认为这个是可以修复的。
3.  仅限 gnu89 / c99 及更高版本（循环计数器。不需要唯一变量技巧）
4.  比简单的锁定解锁效率要低一些。我相信它是微不足道的。

还有其他问题吗？有没有更好的方法在 C 中实现类似的构造？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-28T11:35:00.370

那个宏吓到我了。我更喜欢使用[s的](http://blog.regehr.org/archives/894)[传统方法`goto`](http://blog.regehr.org/archives/894)。

这种方法是原始的，但大多数 C 程序员都熟悉这种模式，如果他们不熟悉，他们可以通过阅读本地代码来理解它。没有隐藏的行为。因此，它非常可靠。

你的宏很聪明，但它对大多数人来说都是新的，它带有隐藏的陷阱。必须考虑新贡献者的规则，例如“不要`return`或`goto`脱离 with 块”和“`break`将脱离 with 块，而不是脱离周围的循环”。我担心错误会很常见。

如果您可以向编译器添加有关滥用此构造的警告，那么平衡将会发生变化。[使用 clang](http://clang.llvm.org/docs/Tooling.html)，这似乎是一种选择。在这种情况下，将检测到误用，并且您的代码将保持可移植到其他编译器。

如果您愿意将自己限制为 GCC 和 Clang，则可以使用该[`cleanup`](https://gcc.gnu.org/onlinedocs/gcc/Common-Variable-Attributes.html#Common-Variable-Attributes)属性。这将使您的示例如下所示：

```
lock_t x = NULL __attribute__((cleanup(unlock)));
lock(&x); 
```

`unlock`当它超出范围时，将使用指向该变量的指针来调用它。这与其他语言功能集成，例如`return`and `goto`，甚至在混合 C/C++ 项目中也有例外。

# c# - WPF ComboBox 绑定到 ObservableCollection

> ID：16197928
> 
> 赞同：9
> 
> 时间：2013-04-24T16:59:35.803
> 
> 标签：c#, wpf, mvvm, combobox, observablecollection

我是 WPF 的新手，我有一个问题。我有组织模块：

```
class Organization : ObservableObject
{
    public string OrganizationName { get; set; }
} 
```

我有组织的 ViewModel：

```
class OrganizationViewModel : ObservableObject
{
    int _count = 0;

    public OrganizationViewModel()
    {
        Organization = new Organization {OrganizationName = "New Organization"};
    }

    public Organization Organization { get; set; }

    public string OrganizationName
    {
        get { return Organization.OrganizationName; }
        set
        {
            if(Organization.OrganizationName != value)
            {
                Organization.OrganizationName = value;
                RaisePropertyChanged("OrganizationName");
            }
        }
    } 
```

我有所有组织的 ViewModel：

```
class AllOrganizationsViewModel
    {
        private ObservableCollection<OrganizationViewModel> m_organizations = new ObservableCollection<OrganizationViewModel>();

    public ObservableCollection<OrganizationViewModel> Organizations
    {
        get { return m_organizations; }
        set { m_organizations = value; }
    }

    public AllOrganizationsViewModel()
    {
        for(int i = 0; i < 3; ++i)
        {
            m_organizations.Add(new OrganizationViewModel());
        }
    }

    void AddOrganizationNameExecute()
    {
        m_organizations.Add(new OrganizationViewModel());
    }

    bool CanAddOrganizationNameExecute()
    {
        return true;
    }

    public ICommand AddOrganization{get{return new RelayCommand(AddOrganizationNameExecute, CanAddOrganizationNameExecute);}}

} 
```

这是 MainWindow.xaml：

```
<Window x:Class="DataIntegrityChecker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:DataIntegrityChecker.ViewModels" Title="MainWindow" Height="350" Width="525">
    <Window.DataContext>
        <local:AllOrganizationsViewModel />
    </Window.DataContext>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="285*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="156" />
            <ColumnDefinition Width="347*" />
        </Grid.ColumnDefinitions>
        <Label Content="Organization: " Margin="0,0,44,0" />
        <Button Grid.Row="1" Name="UpdateOrganizations" Content="Update Organization Name" Command="{Binding AddOrganization}" Margin="0,0,0,262" HorizontalAlignment="Left" Width="156" />
        <ComboBox Grid.Column="1" Grid.Row="1" Height="23" HorizontalAlignment="Left" Name="comboBox1" VerticalAlignment="Top" Width="155"  ItemsSource="{Binding Organizations}" />
    </Grid>
</Window> 
```

现在，我在 ComboBox 项目中得到的是类 OrganizationViewModel 的名称，但我需要的是 OrganizationName 字符串。在我看来，我缺少一些与 OrganizationName 的绑定，但我不知道在哪里添加 if（如果这是问题的话）。我假设我可以用我需要的组织的名称制作一个字符串集合。但是将来我需要在组织类中使用更多属性，这就是我需要它的工作方式。

我将不胜感激

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-24T17:02:32.977

您需要添加`DisplayMemberPath`：

```
<ComboBox Grid.Column="1" Grid.Row="1" Height="23" HorizontalAlignment="Left" Name="comboBox1" VerticalAlignment="Top" Width="155"  ItemsSource="{Binding Organizations}"
          DisplayMemberPath="OrganizationName"/> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-24T17:12:45.723

另一种方法是定义 ItemTemplate。它提供了更多的显示灵活性

```
 <ComboBox Grid.Column="1" Grid.Row="1" Height="23" HorizontalAlignment="Left" Name="comboBox1" VerticalAlignment="Top" Width="155"  ItemsSource="{Binding Organizations}" >
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding OrganizationName}"/>
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox> 
```

# c# - 将 XML 元素序列化为其类名

> ID：16197929
> 
> 赞同：1
> 
> 时间：2013-04-24T16:59:36.910
> 
> 标签：c#, xml, xml-serialization, ixmlserializable

简而言之，我希望从一组对象创建 XML 模式，如下所示；

```
<?xml version="1.0" encoding="utf-16"?>
<QBXML xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <QBXMLMsgsRq>
    <InvoiceQueryRq>
      <TxnID>1</TxnID>
    </InvoiceQueryRq>
    <InvoiceAddRq>
      <TxnID>2</TxnID>
    </InvoiceAddRq>
  </QBXMLMsgsRq>
</QBXML> 
```

但我得到的是；

```
<?xml version="1.0" encoding="utf-16"?>
<QBXML xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <QBXMLMsgsRq>
    <Requests>
      <AbstractXmlSerializerOfQBBaseMessageRequest>
        <InvoiceQueryRq>
         <TxnID>1</TxnID>
        </InvoiceQueryRq>
        <InvoiceAddRq>
          <TxnID>2</TxnID>
       </InvoiceAddRq>
      </AbstractXmlSerializerOfQBBaseMessageRequest>
    </Requests>
  </QBXMLMsgsRq>
</QBXML> 
```

QBXMLMsgsRq 实际上是一个集合，`abstract class`因为在不同类型的集合中可能有许多请求（此处为 InvoiceQueryRq，但也可能有 InvoiceAddRq、InvoiceDeleteRq 等）。默认情况下，XML 序列化程序不允许这样做，但经过一番研究后，我发现了这个链接；[XML Serialize 可序列化对象的通用列表](https://stackoverflow.com/questions/1212742/xml-serialize-generic-list-of-serializable-objects)

我调整了`AbstractXmlSerializer`那里

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Xml.Serialization;

public class AbstractXmlSerializer<AbstractType> : IXmlSerializable
{
    public static implicit operator AbstractType(AbstractXmlSerializer<AbstractType> o)
    {
        return o.Data;
    }

    public static implicit operator AbstractXmlSerializer<AbstractType>(AbstractType o)
    {
        return o == null ? null : new AbstractXmlSerializer<AbstractType>(o);
    }

    private AbstractType _data;

    public AbstractType Data
    {
        get { return _data; }
        set { _data = value; }
    }

    /// <summary>
    /// **DO NOT USE** This is only added to enable XML Serialization.
    /// </summary>
    /// <remarks>DO NOT USE THIS CONSTRUCTOR</remarks>
    public AbstractXmlSerializer()
    {
        // Default Ctor (Required for Xml Serialization - DO NOT USE)
    }

    public AbstractXmlSerializer(AbstractType data)
    {
        _data = data;
    }

    #region IXmlSerializable Members
    public System.Xml.Schema.XmlSchema GetSchema()
    {
        return null; // this is fine as schema is unknown.
    }

    public void ReadXml(System.Xml.XmlReader reader)
    {
        // Cast the Data back from the Abstract Type.
        string typeAttrib = reader.LocalName; // reader.GetAttribute("type");

        // Ensure the Type was Specified
        if (typeAttrib == null)
            throw new ArgumentNullException("Unable to Read Xml Data for Abstract Type '" + typeof(AbstractType).Name +
                "' because no 'type' attribute was specified in the XML.");

        Type type = Type.GetType(typeAttrib);

        // Check the Type is Found.
        if (type == null)
            throw new InvalidCastException("Unable to Read Xml Data for Abstract Type '" + typeof(AbstractType).Name +
                "' because the type specified in the XML was not found.");

        // Check the Type is a Subclass of the AbstractType.
        if (!type.IsSubclassOf(typeof(AbstractType)))
            throw new InvalidCastException("Unable to Read Xml Data for Abstract Type '" + typeof(AbstractType).Name +
                "' because the Type specified in the XML differs ('" + type.Name + "').");

        // Read the Data, Deserializing based on the (now known) concrete type.
        reader.ReadStartElement();
        this.Data = (AbstractType)new
            XmlSerializer(type).Deserialize(reader);
        reader.ReadEndElement();
    }

    public void WriteXml(System.Xml.XmlWriter writer)
    {
        // Write the Type Name to the XML Element as an Attrib and Serialize
        Type type = _data.GetType();

        // BugFix: Assembly must be FQN since Types can/are external to current.
        new XmlSerializer(type).Serialize(writer, _data);
    }
    #endregion
} 
```

为了方便和测试任何帮助的人，我正在处理的对象是；

```
[Serializable]
public class QBXML
{
    [XmlElement("QBXMLMsgsRq")]
    public QBXMLMsgsRq MessageRequests { get; set; }
}

[Serializable]
public class QBXMLMsgsRq
{
    public QBXMLMsgsRq()
        : base() 
    {
        Requests = new List<QBBaseMessageRequest>();
    }

    [XmlArray(""), XmlArrayItem("", Type = typeof(AbstractXmlSerializer<QBBaseMessageRequest>))]
    public List<QBBaseMessageRequest> Requests { get; set; }
}

public abstract class QBBaseMessageRequest
{
    [DefaultValue(""), XmlAttribute("requestID")]
    public string RequestID { get; set; }
}

[Serializable]
public class InvoiceQueryRq : QBBaseMessageRequest
{
    [DefaultValue(0), XmlElement("TxnID")]
    public int TransactionID { get; set; }
}

[Serializable]
public class InvoiceAddRq : QBBaseMessageRequest
{
    [DefaultValue(0), XmlElement("TxnID")]
    public int TransactionID { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:31:31.130

我认为您可以只使用标准 XML 序列化属性来做任何您想做的事情，而无需自定义序列化程序。请参见下面的示例：

```
public class Container
{
    [XmlElement("ElementType1", typeof(ElementType1))]
    [XmlElement("ElementType2", typeof(ElementType2))]
    public ElementBase[] Elements { get; set; }
}

[XmlInclude(typeof(ElementType1)),XmlInclude(typeof(ElementType2))]
public abstract class ElementBase
{
    public string Name { get; set; }
}

public class ElementType1 : ElementBase
{
    public int ID1 { get; set; }
}

public class ElementType2 : ElementBase
{
    public int ID2 { get; set; }
} 
```

使用默认序列化程序序列化一些测试数据...

```
var container = new Container
{
    Elements = new ElementBase[] {
        new ElementType1 { Name = "first object", ID1 = 999 },
        new ElementType2 { Name = "second object", ID2 = 31337 }
    }
};
var serializer = new System.Xml.Serialization.XmlSerializer(typeof(Container));
serializer.Serialize(stream, container); 
```

...您会得到以下输出，看起来像您需要的格式：

```
<?xml version="1.0" encoding="utf-8"?>
<Container xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <ElementType1>
        <Name>first object</Name>
        <ID1>999</ID1>
    </ElementType1>
    <ElementType2>
        <Name>second object</Name>
        <ID2>31337</ID2>
    </ElementType2>
</Container> 
```

# c++ - boost async_read_until 调用句柄连续读取

> ID：16197930
> 
> 赞同：0
> 
> 时间：2013-04-24T16:59:38.880
> 
> 标签：c++, boost, boost-asio

我还没有找到解决这个问题的具体参考。我正在使用 boost asynch 示例 3 的修改版本编写服务器。我正在使用 async_read_until。当收到消息时，程序调用句柄读取并调用一个新线程，但streambuf仍然包含分隔符（我正在从不同的项目发送一个xml）并立即调用另一个线程直到我的threadmax。

```
class server{
    ....
    void server::run()
    {
        std::vector<boost::shared_ptr<boost::thread>> threads;
        for (std::size_t i = 0; i < thread_pool_size_; ++i)
        {
            boost::shared_ptr<boost::thread> thread(new boost::thread(
                boost::bind(&boost::asio::io_service::run, &io_service_)));
            threads.push_back(thread);
        }

        //wait for all threads in the pool to exit.
        for (std::size_t i = 0; i < threads.size(); ++i)
            threads[i]->join();
    }

    void server::start_accept()
    {
        new_connection_.reset(new connection(io_service_, request_handler_));
        acceptor_.async_accept(new_connection_->socket(),
            boost::bind(&server::handle_accept, this,
            boost::asio::placeholders::error));
    }

    void server::handle_accept(const boost::system::error_code& e)
    {
        if (!e)
        {
            new_connection_->start();
        }

        start_accept()
     }
}

class connection{
    ....
    void connection::start()
    {
        boost::asio::async_read_until(socket_, buffer_,
            "<\\User>",
            boost::bind(&connection::handle_read, shared_from_this(),
            boost::asio::placeholders::error,
            boost::asio::placeholders::bytes_transferred));
    }

    void connection::handle_read(const boost::system::error_code& e,
                                 std::size_t bytes_transferred)
    {
        if(!e)
        {
            std::ostringstream ss;
            std::cout << ss.str();
            buffer_.consume(buffer_.size());
        }
    } 
```

# java - 如何访问 java 外部库中的非公共内容

> ID：16197936
> 
> 赞同：0
> 
> 时间：2013-04-24T16:59:51.840
> 
> 标签：java

我正在尝试创建一个新的按钮创建类，该类将尺寸以及文本和图标作为参数。为此，我使用 JButton 类作为参考并添加我自己的东西。问题在于，在似乎需要添加按钮的 writeObject 方法中，.setWriteObjCounter 表示它只能从同一个包中访问。有谁知道如何访问它？（除了放在包里，因为我做不到）

```
import javax.accessibility.Accessible;
import javax.accessibility.AccessibleContext;
import javax.accessibility.AccessibleRole;
import javax.swing.*;
import javax.swing.plaf.ButtonUI;
import java.awt.*;
import java.io.IOException;
import java.io.ObjectOutputStream;
public class JMButton extends AbstractButton implements Accessible {
  private static final String uiClassID = "JMButtonUI";
  //constructors for different inputs 
  public JMButton() {
    this(null, null, 0, 0);
  }
  public JMButton(String text) {
    this(text, null, 0, 0);
  }
  public JMButton(Icon icon) {
    this(null, icon, 0, 0);
  }
  public JMButton(String text, Icon icon) {
    this(text, icon, 0, 0);
  }
  public JMButton(String text, int width, int height) {
    this(text, null, width, height);
  }
  public JMButton(Icon icon, int width, int height) {
    this(null, icon, width, height);
  }
  public JMButton(int width, int heigth) {
    this(null, null, width, heigth);
  }
  public JMButton(Action a) {
    this();
    setAction(a);
  }
  public JMButton(String text, Icon icon, int width, int height) {
    setModel(new DefaultButtonModel());
    init(text, icon);
    if (width == 0) {
      FontMetrics fontMetrics = getFontMetrics(getFont());
      int buttonWidth = fontMetrics.stringWidth(text);
      setSize(buttonWidth + 40, 40);
    } else {
      setSize(width, height);
    }
  }
  //pulled from other button classes for functionality
  public void updateUI() {
    setUI((ButtonUI) UIManager.getUI(this));
  }
  public String getUIClassID() {
    return uiClassID;
  }
  //PROBLEM!!
  private void writeObject(ObjectOutputStream s) throws IOException {
    s.defaultWriteObject();
    if (getUIClassID().equals(uiClassID)) {
      byte count = JComponent.getWriteObjCounter(this);
      JComponent.setWriteObjCounter(this, --count);
      if (count == 0 && ui != null) {
        ui.installUI(this);
      }
    }
  }
  public AccessibleContext getAccessibleContext() {
    if (accessibleContext == null) {
      accessibleContext = new AccessibleJButton();
    }
    return accessibleContext;
  }
  protected class AccessibleJButton extends AccessibleAbstractButton {
    public AccessibleRole getAccessibleRole() {
      return AccessibleRole.PUSH_BUTTON;
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:19:02.297

**解决方法：**

创建与您在项目中扩展的类相同的包结构并将您的类添加到其中。所以你的项目中会有一个包**javax.swing**

```
package javax.swing;

import java.io.IOException;
import java.io.ObjectOutputStream;

import javax.accessibility.Accessible;

public class JMButton extends AbstractButton implements Accessible {
    private static final String uiClassID = "JMButtonUI";

    private void writeObject(ObjectOutputStream s) throws IOException {
        s.defaultWriteObject();
        if (getUIClassID().equals(uiClassID)) {
            byte count = JComponent.getWriteObjCounter(this);
            JComponent.setWriteObjCounter(this, --count);
            if (count == 0 && ui != null) {
                ui.installUI(this);
            }
        }
    }

} 
```

# sql - SQL 对两个不同的列使用相同的代码表

> ID：16197939
> 
> 赞同：-1
> 
> 时间：2013-04-24T16:59:53.807
> 
> 标签：sql

我有一个表（Foo），它有两列存储代码表中的代码值：

```
id - code1 - code2
1  -  CC    -  DD 
```

代码表：

```
 Name         -   Code - Grouping
 Call Center   -    CC  -    22
 County        -    DD  -    54 
```

我需要一个 SQL 来根据第一个表提取“呼叫中心”和“县”。假设我知道 Foo.code1 必须使用 Codes.Grouping=22 而 Foo.code2 使用 Codes.Grouping=54。

我正在尝试编写一个返回两个值的 SQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:08:29.840

试试这个查询：

```
select name from codes c inner join foo f on c.code = f.code1 or c.code = f.code2 
```

这是[sqlfiddle](http://sqlfiddle.com/#!2/bc837/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:11:26.600

我不确定这是否是您问题的答案，因为我不确切知道您的意思。但是，我想您希望获取 Foo 表的 id 值的代码和分组。为此我会

```
SELECT Foo.id, 
       C1.Name AS code1_name, C1.Code AS code1_code, 
       C1.Grouping AS code1_grouping, 
       C2.Name AS code2_name, C2.Code AS code2_code, 
       C2.Grouping AS code2_grouping 
  FROM Foo 
       INNER JOIN Codes AS C1 ON C1.Code = Foo.code1 
       INNER JOIN Codes AS C2 ON C2.Code = Foo.code2
  WHERE Foo.id = 1; 
```

扩展 tuffkid sqlfiddle [sqlfiddle](http://sqlfiddle.com/#!2/bc837/2/0)

# java - 如何计算两个不同活动的时间？

> ID：16197942
> 
> 赞同：0
> 
> 时间：2013-04-24T17:00:01.773
> 
> 标签：java, android

我不知道这是否可能，但我有几个活动，目前有两个，我有 20 分钟的时间限制让玩家完成游戏。问题是，他从一项活动开始，然后进行另一项活动，依此类推。如何在另一个活动中保持计时器继续运行，并使其在 textView 中可见？

编辑 minhaz：

```
public void getTime(long value, String PREFERENCE_NAME){
        SharedPreferences myPrefs = mContext.getSharedPreferences(PREFERENCE_NAME, Context.MODE_PRIVATE);
        SharedPreferences.Editor prefsEditor = myPrefs.edit();
        prefsEditor.putLong("time", value);
        prefsEditor.commit();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:13:40.570

只需创建一个全局计时器类。

```
class Timer {
    private static long startTime = -1;

    public static void reset() {Timer.startTime = -1;}
    public static void initialize() {Timer.startTime = System.currentTimeMillis();}
    public static long getTimeMillis() {return System.currentTimeMillis() - startTime;}

    private Timer() {}
} 
```

然后，通过导入这个类（无论你把它放在哪里），你可以访问当前时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:14:36.930

从一个活动启动计时器，当用户切换到下一个活动时，传递 Intent 中的值

```
Intent intent=new Intent(Current.class, NextActivity.class);
intent.putExtra("time", timer_value); 
```

而在另一个活动上获得的价值为

```
time_value=intent.getLongExtra("time") 
```

通过这种方式，用户将获得一些缓冲时间，当他们在活动之间延迟时，因为启动活动调用是异步的。`finsh()`您可以根据当时的要求打电话或做其他事情。

如果您想限制启动应用程序的时间，扩展[应用程序](http://developer.android.com/reference/android/app/Application.html)类也是一个很好的解决方案。但这并不完全是总的游戏时间。

**更新：** 对于存储数据，您可以根据需要使用持久性存储。现在，[共享偏好](http://developer.android.com/reference/android/content/SharedPreferences.html)看起来是一个不错的选择。

存储数据

```
 SharedPreferences myPrefs = mContext.getSharedPreferences(PREFERENCE_NAME, Context.MODE_PRIVATE);
    SharedPreferences.Editor prefsEditor = myPrefs.edit();
    prefsEditor.putLong("time", value);
    prefsEditor.commit(); 
```

检索数据

```
SharedPreferences sharedPref = mContext.getSharedPreferences(PREFERENCE_NAME, Context.MODE_PRIVATE);
return sharedPref.getLong("time", 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:09:09.373

正如 Lukas 所说，扩展 Application 会很好。

您还可以使用存储计时器启动时间的首选项...

但我认为，使用计时器开始时间听起来是最好的方法。

# python - 删除一系列 csv 列

> ID：16197946
> 
> 赞同：1
> 
> 时间：2013-04-24T17:00:19.137
> 
> 标签：python, csv, python-2.7

我正在尝试创建一个可导入模块来删除一系列列（特别是我正在使用的文件中的第 73-177 列）。我正在尝试编辑此文件 i/o 代码，该代码是为删除基于字段名称。我想修改此代码以删除 csv 文件中的第 73-177 列。我需要做什么才能做到这一点？

```
def removeColumns(num1, num2, inputFILE, FileName):
    inPUTfile = 打开（输入文件，'r'）
    outPUTfile = 打开（文件名，'w'）
    line = inPUTfile.readline()
    而线：
            # 删除指定的列。第一列范围编号，第二列范围编号 (+1)
            lineList = line.split('\t')
            removeCOL = "日历年"
            我 = 0
            而 lineList[i] != removeCOL: #(linesout?):
                我 = 我 + 1
            lineList.pop(i) #从list.append中删除这些字段
            #写入修改的字段
            删除 = "\t".join(lineList)
            outPUTfile.write(line) #写入新的字段名 outfile
            for line inPUTfile: #remove field i from each剩余行并将其写入输出文件 &modify 输入行
                lineList = line.split() #转换为列表
                lineList.pop(i) #从列表中删除字段
                line = '\t'.join(lineList)
                line = line + '\n' #在行尾加回车
                outPUTfile.write(line)# 将修改后的行写入输出文件
            inPUTfile.close() #关闭输入文件
            outPUTfile.close() #关闭输出文件
    返回输出PUT文件
    打印出PUT文件

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:21:35.687

我知道您问过如何修改原始代码，但老实说，在这里我认为以不同的方式更容易理解。Python 有一个有用的[csv](http://docs.python.org/2/library/csv.html)模块，它可以为你处理很多工作。就像是：

```
import csv

remove_from = 2
remove_to = 5

with open("to_delete.csv", "rb") as fp_in, open("newfile.csv", "wb") as fp_out:
    reader = csv.reader(fp_in, delimiter="\t")
    writer = csv.writer(fp_out, delimiter="\t")
    for row in reader:
        del row[remove_from:remove_to]
        writer.writerow(row) 
```

将转向

```
$ cat to_delete.csv 
a   b   c   d   e   f   g
1   2   3   4   5   6   7
8   9   10  11  12  13  14
15  16  17  18  19  20  21 
```

进入

```
$ cat newfile.csv 
a   b   f   g
1   2   6   7
8   9   13  14
15  16  20  21 
```

# javascript - CKEditor：子菜单（下拉列表）未出现

> ID：16197948
> 
> 赞同：4
> 
> 时间：2013-04-24T17:00:25.687
> 
> 标签：javascript, drop-down-menu, ckeditor, submenu

我需要插件下拉菜单列表中的下拉子菜单列表。但问题是，该菜单显示它具有下拉子菜单列表，但未加载列表的内容。显示空子菜单。

快照：

![在此处输入图像描述](https://i.stack.imgur.com/KceuC.png)

代码 ：

```
CKEDITOR.plugins.add( 'microdata',
{
   requires : [ 'styles', 'button' ],
   init : function( editor )
    {
        var  markup= editor.config.languages,
                items = {};
        for ( var i = 0 ; i < markup.length ; i++ )
        {
            var parts = markup[i].split( '=' );
            var name= parts[1].split('org/');
            items[ parts[ 0 ] ] =
                {
                    label : parts[ 0 ],
                    group : 'microdata',
                    icon: this.path + 'icon1.png' ,
                    order : i,
                    getItems: function()
                        {
                            var selection = editor.getSelection();
                            return {
                                name: CKEDITOR.TRISTATE_OFF,
                                friend: CKEDITOR.TRISTATE_OFF
                            };
                        }

        };
             var  name=
                {
                  label: 'name',
                  group: 'microdata',
                  //command: 'nameCmd',
                  order: 5
                }
        editor.addMenuGroup( 'microdata' );
        editor.addMenuItems( items,name);/*,
                friend:
                {
                  label: 'friend',
                  group: 'microdata',
                  //command: 'friendCmd',
                  order: 10
                }
                );*/
        editor.ui.add( 'Microdata', CKEDITOR.UI_MENUBUTTON,
        {
            label: 'Microdata',
            command: 'Microdata',
            modes : { wysiwyg:1 },
            className : 'cke_button_microdata',
            icon: this.path + 'icon1.png' ,
                    onMenu : function()
                {
                    var activeItems = {};

                    for ( var prop in items )
                    {
                        if ( items.hasOwnProperty( prop ) )
                            activeItems[ prop ] = CKEDITOR.TRISTATE_ON;
                    }

                    return  activeItems;
                }
        } );
      }
} );
CKEDITOR.config.languages = [ 'Place=http://schema.org/Place']; 
```

尚未添加命令。

任何帮助是极大的赞赏。

# c++ - C++ Sys/Stat.h 有错误？

> ID：16197959
> 
> 赞同：0
> 
> 时间：2013-04-24T17:00:45.047
> 
> 标签：c++, c, linux, standard-library

我正在尝试创建一个跨平台程序。我刚刚创建了一个类并创建了一个获取当前用户路径的函数。我想稍后使用那条路径。但不知何故，我得到了这些错误：

“/usr/include/x86_64-linux-gnu/sys/stat.h:-1: 在成员函数'void FileManager::p_getfilepath()'中：”

“/usr/include/x86_64-linux-gnu/sys/stat.h:105: 错误: 字符串常量之前的预期 unqualified-id”

“/home/david/VocabularyTrainer/filemanager.cpp:31：错误：输入结束时应为'}'”

顺便说一句，第 31 行是这段代码的最后一行：

```
void FileManager::p_getfilepath()
{
#ifdef Q_OS_WIN32
#include <windows.h>
#endif

#ifdef Q_OS_LINUX
#include <sys/stat.h>

struct passwd *p;
uid_t  uid;

if ((p = getpwuid(uid = geteuid())) == NULL)
{
    QMessageBox* mb;
    mb->setText("");
    mb->exec();
    delete mb;
}
else
{
    filepath = p->pw_dir;
}
#endif
} 
```

有谁知道出了什么问题？我在 linux mint 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:03:47.927

通过**在**类函数中包含标题，您可以使标题中的所有内容成为函数的一部分。

```
#ifdef Q_OS_WIN32
#include <windows.h>
#endif

#ifdef Q_OS_LINUX
#include <sys/stat.h>
#endif

void FileManager::p_getfilepath()
{
#ifdef Q_OS_LINUX

    struct passwd *p;
    uid_t  uid;

    if ((p = getpwuid(uid = geteuid())) == NULL)
    {
        QMessageBox* mb;
        mb->setText("");
        mb->exec();
        delete mb;
    }
    else
    {
        filepath = p->pw_dir;
    }

#endif
} 
```

# gruntjs - 使用 grunt registerTask 目标

> ID：16197967
> 
> 赞同：4
> 
> 时间：2013-04-24T17:01:12.413
> 
> 标签：gruntjs

在我的`Gruntfile.js`我有：

```
grunt.initConfig({
    // ...
    uglify: {
        debug: {
            options: {
                mangle: false,
                compress: false,
                beautify: true
            }
        },
    },
});

grunt.registerTask('build', [
    //...
    'uglify',
    //...
]); 
```

我想拥有

```
grunt build 
```

使用 uglify 任务的默认值创建我的 js 代码的 ugilified 版本，并且

```
grunt build:debug 
```

创建相同代码的未修改版本，但 :debug 选项似乎没有影响——它使用默认选项运行 uglify 任务。关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T18:42:50.303

您的`build`任务没有`debug`目标。你的`uglify`任务是。如果您希望您的`build`任务运行`uglify:debug`，您将执行以下操作：

`grunt.registerTask('build', ['uglify:debug']);`

# c# - 使用反射获取所有属性并在方法中传递每个属性

> ID：16197969
> 
> 赞同：2
> 
> 时间：2013-04-24T17:01:23.067
> 
> 标签：c#, wpf, inotifydataerrorinfo

我正在使用 simplemvvmtoolkit 进行验证（INotifyDataErrorInfo）。我不想为视图模型中的每个属性一遍又一遍地重复我自己，我喜欢使用反射来获取所有属性并验证它们，但我似乎无法弄清楚在 validateProperty 方法中传递什么。

```
 private void ValidateInput()
    {
        var unitProperties = this.GetType().GetProperties()
                                   .Where(x => x.CanRead);

        foreach (var prop in unitProperties)
            ValidateProperty(prop, prop.GetValue(this, null)); //????
                   //? ^ get errors here 

    } 
```

ValidateProperty 接受：

```
 protected virtual void ValidateProperty<TResult>(Expression<Func<TViewModel, TResult>> property, object value); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:04:39.870

问题是与（返回的类型）`Expression<Func<TViewModel, TResult>>`完全没有关系。您还会遇到问题，因为结果的类型在编译时是未知的。`PropertyInfo``GetProperties`

最简单的解决方案是更改`ValidateProperty`为接受 a `PropertyInfo`：

```
protected virtual void ValidateProperty(PropertyInfo property, object value); 
```

您也可以将 转换`PropertyInfo`为`Expression`，但这有点困难：

```
var method = this.GetType().GetMethod("ValidateProperty");
foreach (var prop in unitProperties)
{
    var parameter = Expression.Parameter(this.GetType(), "_");
    var property = Expression.Property(parameter, prop);
    var lambda = Expression.Lambda(property, parameter);
    var genericMethod = method.MakeGenericMethod(prop.PropertyType);
    genericMethod.Invoke(this, new object[] { lambda, prop.GetValue(this, null) });
} 
```

# java - 从图中检测循环

> ID：16197972
> 
> 赞同：-3
> 
> 时间：2013-04-24T17:01:25.733
> 
> 标签：java, matrix, graph, cycle, depth-first-search

如何从显示深度优先搜索的这部分代码中检测图是否具有循环，并且该图是在邻接矩阵中实现的

```
 // ------------------------------------------------------------
    public void dfs() // depth-first search
    { // begin at vertex 0
        int k = 0;
        vertexList[0].wasVisited = true; // mark it
        displayVertex(0); // display it
        theStack.push(0); // push it
        while (!theStack.isEmpty()) // until stack empty,
        {
            // get an unvisited vertex adjacent to stack top
            int v = getAdjUnvisitedVertex(theStack.peek());
            int x = nAdjVisitedVertex(v);

            if (v == -1) // if no such vertex,
                theStack.pop();
            else // if it exists,
            {
                vertexList[v].wasVisited = true; // mark it
                displayVertex(v); // display it
                if (x == 2)
                    k++;

                theStack.push(v); // push it

            }
        } // end while
            // stack is empty, so we’re done
        for (int j = 0; j < nVerts; j++)
            // reset flags
            vertexList[j].wasVisited = false;

        if(k != 0)
            System.out.println("not a cycle");
        else
            System.out.println("cycle");

    } // end dfs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:07:16.747

在遍历图时，您需要继续寻找已经访问过的节点。如果你遇到一个已经被访问过的节点，你就发现了一个循环。如果遍历完成而没有得到任何访问节点，则图中没有循环。关于实施，请先尝试，如果您遇到任何问题，请返回问题。

# python - 在多个目录中按名称搜索文件？

> ID：16197973
> 
> 赞同：1
> 
> 时间：2013-04-24T17:01:26.700
> 
> 标签：python, search, windows-7, python-3.x, directory

好的，这是我的问题。我在工作时使用两个目录和目录中的所有子文件夹。我想编写一个程序，提示我输入文件名，在给出文件名后，它将搜索这两个目录以及这些目录中的所有子文件夹以查找具有匹配名称的任何文件。是否有捷径可寻。任何和所有的帮助将不胜感激。我想在 python 3 中做到这一点（注意：这是我的第一个真正的项目，老实说我不知道​​从哪里开始。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T17:27:29.520

这是一个带有递归辅助函数的函数，它返回文件夹中的所有文件（以字典形式：`{file_name: file_path, ...}`.

```
import os, os.path

def getFiles(path):
    '''Gets all of the files in a directory'''
    sub = os.listdir(path)
    paths = {}
    for p in sub:
        print p # just to see where the function has reached; it's optional
        pDir = os.path.join(path, p)
        if os.path.isdir(pDir): 
            paths.update(getAllFiles(pDir, paths))
        else:
            paths[p] = pDir
    return paths

def getAllFiles(mainPath, paths = {}):
    '''Helper function for getFiles(path)'''
    subPaths = os.listdir(mainPath)
    for path in subPaths:
        pathDir = pDir = os.path.join(mainPath, path)
        if os.path.isdir(pathDir):
            paths.update(getAllFiles(pathDir, paths))
        else:
            paths[path] = pathDir
    return paths 
```

例如，如果您正在查找`myfile.txt`，则字典键：值对之一将类似于`{'myfile.txt': 'C:\Users\Example\Path\myfile.txt', ...}`。

根据文件夹有多少文件，它可能会很慢。搜索我的`sys.path`（大约有 10 个文件夹，其中一个`Python\Lib`是 巨大的），大约需要 9 秒。

# oracle - 语法错误：将 SQL 导入 Discoverer 11g 时，标记加入位置 760

> ID：16197975
> 
> 赞同：1
> 
> 时间：2013-04-24T17:01:36.890
> 
> 标签：oracle, plsql, token

我在 PL/SQL Developer 中为客户编写了查询（如下），并希望将其导入 Oracle Discoverer Desktop 11g，以便报告是自助式的。该查询在 PL/SQL 中完美运行，但是当我将其导入 Discoverer 时，我收到以下错误：“错误：语法错误：位置 760 处的令牌加入。错误：由于致命错误而停止解析。”

谁能告诉我这些错误是什么意思以及如何解决这个问题？

谢谢！

询问：

```
Select eid.person_code, eid.last_name plnownr_lname, eid.first_name plnownr_fname, eid.birth_date plnownr_DOB, des.status_code, dun.unit_code, ect.last_name BenRecip_LNAME, ect.first_name BenRecip_fname, ect.birth_date BenRecip_DOB,decode(ect.relation,'00','Unknown','01','Spouse','02','Common-Law Spouse','03','Partner', '05','Daughter','06','Son','07','Step-Daughter','08','Step-Son','09', 'Granddaughter','11', 'Father','12','Mother', '20','Sister','21','Brother','24','Aunt','28','Nephew','29','Ex-spouse','31','Friend','43','Trust','50','User Defined','52','User Defined', '53','User Defined','54','User Defined',ect.relation) relation, bpn.description, bpn.plan_code, bend.premium_start_date, bend.premium_end_date

From p2k_hr_identities eid
Join p2k_hr_contacts ect on ect.eid_id = eid.id
Join p2k_be_benefit_recipients bbr on bbr.ect_id = ect.id
Join p2k_be_enrollments ben on ben.id = bbr.ben_id
Join p2k_be_plan_definitions bpn on bpn.id = ben.bpn_id
Join p2k_hr_employments eem on eem.eid_id = eid.id
     and eem.termination_date is null
Join p2k_hr_assignments eas on eas.eem_id = eem.id
Join p2k_hr_assignment_details easd on easd.eas_id = eas.id 
     and easd.expiry = to_date('3999-12-31', 'yyyy-mm-dd')
Join p2k_cm_units dun on dun.id = easd.dun_id
Join p2k_be_enrollment_details bend on bend.ben_id = ben.id 
     and bend.premium_end_date = to_date('3999-12-31','yyyy-mm-dd') 
     and bend.premium_start_date != to_date('0001-01-01','yyyy-mm-dd')
Join p2k_cm_employment_statuses des on des.id = easd.des_id
     and des.status_code not in ('TERMINATED', 'RETIRED')

Union

Select eid.person_code, eid.last_name plnownr_lname, eid.first_name eplnownr_fname, eid.birth_date plnownr_dob, des.status_code, dun.unit_code, eid.last_name BenRecip_lname, eid.first_name BenRecip_fname, eid.birth_date BenRecip_dob, 'Employee-NoRelation', bpn.description, bpn.plan_code, bend.premium_start_date, bend.premium_end_date

From p2k_hr_identities eid
Join p2k_hr_employments eem on eem.eid_id = eid.id
     and eem.termination_date is null
Join p2k_be_enrollments ben on ben.eem_id = eem.id
Join p2k_be_plan_definitions bpn on bpn.id = ben.bpn_id
Join p2k_hr_assignments eas on eas.eem_id = eem.id
Join p2k_hr_assignment_details easd on easd.eas_id = eas.id 
     and easd.expiry = to_date('3999-12-31', 'yyyy-mm-dd')
Join p2k_cm_units dun on dun.id = easd.dun_id
Join p2k_be_enrollment_details bend on bend.ben_id = ben.id 
     and bend.premium_end_date = to_date('3999-12-31','yyyy-mm-dd') 
     and bend.premium_start_date != to_date('0001-01-01','yyyy-mm-dd')
Join p2k_cm_employment_statuses des on des.id = easd.des_id
     and des.status_code not in ('TERMINATED', 'RETIRED')
Order by 2,3,5,6 
```

# java - 实例化静态嵌套类而不用封闭类限定

> ID：16197981
> 
> 赞同：1
> 
> 时间：2013-04-24T17:02:03.353
> 
> 标签：java, static, nested

```
class OuterClass {
  static class StaticNestedClass {}
} 
```

上面的 StaticNestedClass 是通过以下语法实例化的。

```
 OuterClass.StaticNestedClass nestedObject =
                      new OuterClass.StaticNestedClass(); 
```

这很容易理解，但我的问题是相同的嵌套类是通过以下代码实例化的，而不使用外部类

```
 StaticNestedClass nestedObject =
                      new StaticNestedClass(); 
```

请解释为什么它不需要 OuterClass 的资格并且仍然编译谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:05:13.870

这一切都取决于代码在哪里以及（如果适用）`import`语句是什么。中的任何代码都会`OuterClass`自动知道 的成员`OuterClass`，包括任何嵌套类（静态或非静态）。

`StaticNestedClass`如果类被导入，其他类中的代码也可以使用非限定标识符：

```
import OuterClass.StaticNestedClass;

public class Elsewhere {
    StaticNestedClass nested = new StaticNestedClass();
    . . .
} 
```

如果没有`import`, 类中的代码`Elsewhere`将需要使用限定的类名`OuterClass.StaticNestedClass`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:05:04.747

嵌套类分为两类：静态和非静态。声明为静态的嵌套类简称为静态嵌套类。非静态嵌套类称为内部类。

使用封闭类名访问静态嵌套类：

# c# - 仅当用户第一次点击登录屏幕时才会在生产中出错

> ID：16197987
> 
> 赞同：1
> 
> 时间：2013-04-24T17:02:43.437
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-routing

仅在生产中，当用户点击我们的登录屏幕时，我们会收到以下 elmah 错误

```
System.NullReferenceException: Object reference not set to an instance of an object.
Generated: Wed, 24 Apr 2013 16:50:35 GMT

System.NullReferenceException: Object reference not set to an instance of an object.
   at System.Web.Routing.RouteCollection.GetRouteData(HttpContextBase httpContext)
   at System.Web.Routing.UrlRoutingModule.PostResolveRequestCache(HttpContextBase context)
   at System.Web.Routing.UrlRoutingModule.OnApplicationPostResolveRequestCache(Object sender, EventArgs e)
   at System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

不幸的是，那里并没有给我任何提示！

我的*猜测*是，这是某种负载下的赛车条件，当它们试图使用时，路线还没有完成。但这只是一个猜测。

有没有人见过这个错误？

我们正在 GlobalAsax Begine Request 方法中加载路线。

```
protected void Application_BeginRequest()
        {
           if(RouteTable.Routes.Count == 0) {
                XmlConfigurator.Configure();
                ILog log = LogManager.GetLogger("MainLog");
                log.Info("Logger started");

                //AreaRegistration.RegisterAllAreas();
                //log.Info("RegisterAllAreas done");

                RegisterRoutes(RouteTable.Routes);
                log.Info("RegisterRoutes done");

                try
                {
                    BootstrapStuctureMap.Bootstrap();
                    log.Info("Done Bootstrapping");

                    BootStrapAutoMapper.Configure();
                    log.Info("Done Automapping");
                }
                catch (Exception ex)
                {
                    log.Error("Error in Application_Start: ex = " + ex);
                    throw;
                }

                ControllerBuilder.Current.SetControllerFactory(new StructureMapControllerFactory());
                log.Info("Done Building StructureMapControllerFactory");

                ModelBinders.Binders.DefaultBinder = new CustomModelBinder();
                ModelMetadataProviders.Current = new AnnotationsAndConventionsBasedModelMetaDataProvider();
            }
        }

 public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
            routes.IgnoreRoute("elmah.axd");

            // you have to add this IgnoreRoute so that the PDFX pages get handled like a regular *.aspx page, not a MVC page. - EWB
            routes.IgnoreRoute("{resource}.pdfx");
            routes.IgnoreRoute("{*favicon}", new {favicon = @"(.*/)?favicon.ico(/.*)?"});

            routes.MapRoute("StudentLookup_Return",
                            "StudentLookup/StudentLookup/{nextAction}/{nextController}",
                            new
                                {
                                    controller = "StudentLookup",
                                    action = "StudentLookup"
                                }
                );
            routes.MapRoute("StudentLookup_Id",
                            "StudentLookup/StudentLookup/{Id}",
                            new
                                {
                                    controller = "StudentLookup",
                                    action = "StudentLookup",
                                    Id = UrlParameter.Optional
                                }
                );
            routes.MapRoute("Default", // Route name
                            "{controller}/{action}/{id}", // URL with parameters
                            new
                                {
                                    controller = "Home",
                                    action = "Index",
                                    id = UrlParameter.Optional
                                } // Parameter defaults
                );
        } 
```

我们认为它是在一些新服务器在线购买后出现的，因此它可能与这些服务器的配置方式有关。

我有点像在这里扔一个冰雹玛丽，有人以前见过这个并且想通了！

任何帮助是极大的赞赏。

# objective-c - coreplot: reloadDataInIndexRange -- 如何使用它？

> ID：16197993
> 
> 赞同：0
> 
> 时间：2013-04-24T17:03:01.130
> 
> 标签：objective-c, core-plot

目前，我正在使用 CPTXYGraph 在我的 iphone 应用程序上绘制我的 x、y 图表。但是，当我需要实时动态绘制数据时，我觉得 reloadData 函数的成本特别高。我想使用 reloadDataInIndexRange 函数......但我似乎无法访问它。

关于如何访问此功能的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T23:59:03.033

像使用任何其他方法一样在绘图上调用它：

```
[plot reloadDataInIndexRange:NSMakeRange(location, length)]; 
```

# javascript - 带有“德国时间”选项的闹钟 - 在 JavaScript 中

> ID：16197996
> 
> 赞同：1
> 
> 时间：2013-04-24T17:03:07.823
> 
> 标签：javascript, youtube, clock, alarm

保罗在这里。我是 JavaScript 新手，正在尝试构建一个类似于此问题中描述的闹钟：

[为什么我的闹钟脚本停止工作？](https://stackoverflow.com/questions/2486428/javascript-alarmclock-script)

来自 Whakkee 的工作演示：[http ://www.obviousmatter.com/testso/hours2.html](http://www.obviousmatter.com/testso/hours2.html)

但是我想使用下拉选择而不是文本输入。

（我对“下拉选择”的意思的演示，这不是一个工作示例） [http://paulodonovan.net/Experiments/JavaScript/rise-and-shine/rise-and-shine_0.2.html](http://paulodonovan.net/Experiments/JavaScript/rise-and-shine/rise-and-shine_0.2.html)

对于一个实验，我尝试用“带有选项的选择”替换“文本输入”，但我不知道如何整合选择：

```
 <html>

<body>
    <div>
        <form name="frm">

<select name="hour">
<option value="00">00</option>
<option value="01">01</option>
<option value="02">02</option>
<option value="03">03</option>
<option value="04">04</option>
<option value="05">05</option>
<option value="06">06</option>
<option value="07">07</option>
<option value="08">08</option>
<option value="09">09</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14">14</option>
<option value="15">15</option>
<option value="16">16</option>
<option value="17">17</option>
<option value="18">18</option>
<option value="19">19</option>
<option value="20">20</option>
<option value="21">21</option>
<option value="22">22</option>
<option value="23">23</option>
<option value="24">24</option>  
</select>   
<select name="mins">
<option value="00">00</option>
<option value="01">01</option>
<option value="02">02</option>
<option value="03">03</option>
<option value="04">04</option>
<option value="05">05</option>
<option value="06">06</option>
<option value="07">07</option>
<option value="08">08</option>
<option value="09">09</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14">14</option>
<option value="15">15</option>
<option value="16">16</option>
<option value="17">17</option>
<option value="18">18</option>
<option value="19">19</option>
<option value="20">20</option>
<option value="21">21</option>
<option value="22">22</option>
<option value="23">23</option>
<option value="24">24</option>
<option value="25">25</option>
<option value="26">26</option>
<option value="27">27</option>
<option value="28">28</option>
<option value="29">29</option>
<option value="30">30</option>
<option value="31">31</option>
<option value="32">32</option>
<option value="33">33</option>
<option value="34">34</option>
<option value="35">35</option>
<option value="36">36</option>
<option value="37">37</option>
<option value="38">38</option>
<option value="39">39</option>
<option value="40">40</option>
<option value="41">41</option>
<option value="42">42</option>
<option value="43">43</option>
<option value="44">44</option>
<option value="45">45</option>
<option value="46">46</option>
<option value="47">47</option>
<option value="48">48</option>
<option value="49">49</option>
<option value="50">50</option>
<option value="51">51</option>
<option value="52">52</option>
<option value="53">53</option>
<option value="54">54</option>
<option value="55">55</option>
<option value="56">56</option>
<option value="57">57</option>
<option value="58">58</option>
<option value="59">59</option>
</select>

            <input type="button" value="Set Alarm" onclick="justonce=1;">
        </form>
        <font color=#660000 size=20 face=Tahoma><span id="hours"></span></font>
    </div>

</body>
</html>

<script type="text/javascript">
obj_hours=document.getElementById("hours");
justonce=0;

function wr_hours()
{
    time=new Date();

    time_min=time.getMinutes();
    time_hours=time.getHours();

    time_wr=((time_hours<10)?"0":"")+time_hours;
    time_wr+=":";
    time_wr+=((time_min<10)?"0":"")+time_min;

    obj_hours.innerHTML=time_wr;

    if (justonce==1 && frm.mins.value==time_min && frm.hour.value==time_hours) {
            alert('Hello. Rise and Shine. :-)');
            justonce=0;
    }
}

setInterval("wr_hours();",1000);
</script> 
```

这不起作用，任何想法为什么？也许我需要使用索引？

我希望对这个项目进行一些个性化，并添加一些其他功能，例如

*   从包含 10 首歌曲的列表中选择一个 Youtube 视频作为提醒播放，并粘贴一个 url。我在功能方面找到了一个类似的示例，但是代码对我来说非常复杂..： http: [//onlineclock.net/video/](http://onlineclock.net/video/)

*   '德国时间模式'复选框：'（一切都提前 10 分钟，所以你永远不会迟到。）'

如果时间允许： - 选中“Vintage Style”复选框，打开备用 CSS 样式表。这可能包括一个我可以用 CSS 构建的模拟闹钟。

当然，我宁愿理解并从头开始编写，我不希望有人为我构建它，但任何指向相关教程或技术等的指针将不胜感激。

谢谢，保罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T17:11:48.647

这个问题在我看来是

**第1部分**

> 如何从 a 中获取所选值`<select>`？

最简单的方法是给`<select>`一个*id*属性，例如

```
<select id="foobar">
    <option value="00">00</option>
    <option value="01">01</option>
</select> 
```

现在，在您的*JavaScript*中，您可以使用以下代码访问所选值

```
document.getElementById('foobar').value; 
```

请记住，整个页面的*id*必须是**唯一的。**

**第2部分**

> 如何从时间中减去 10 分钟？

您正在使用的当前代码不使用[*Date*](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Date)对象进行用户选择，也不使用*Number* s，它使用*String* s（作为`<option>`值）。这意味着要减去 10 分钟，您将不得不使用一个（或做一些过于复杂的事情）。由于您没有在此使用*Date*，因此我将在回答中避免使用它（尽管您可能仍想考虑学习它）。

要执行您想要的操作，您需要添加更多步骤。下面，`form_min`和`form_hours`是用户选择的时间。

步骤 1\. 将分钟和小时转换为*数字*。

```
form_min   = parseInt(form_min,   10);
form_hours = parseInt(form_hours, 10); 
```

步骤 2\. 减去 10 分钟

```
form_min = form_min - 10; 
```

第 3 步。如果分钟数为负数，则减去 1 小时并增加 60 分钟。

```
if (form_min < 0) {
    form_hours = form_hours - 1;
    form_min = form_min + 60;
} 
```

步骤 4\. 转换回*String*。

```
form_min   = (form_min   < 10 ? "0" : "") + form_min;
form_hours = (form_hours < 10 ? "0" : "") + form_hours; 
```

如果您使用（从 0 开始的 60 个选项，以此类推），您可以跳过第 1 步，因为在此上下文中，选项值与选项的索引匹配，因此`.selectedIndex`您将获得数值作为*数字。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:13:01.323

将`id`属性添加到： `<select id="hours" name="hours">`

这是您需要从小时下拉列表中获取值的方式：

```
var hourField = document.getElementById("hours");
var obj_hours = hourField.options[hourField.selectedIndex].value; 
```

您可能也需要在`mins`下拉框中执行相同的操作。

# joomla - addStyleSheet 在 J3.0 上失败

> ID：16197997
> 
> 赞同：0
> 
> 时间：2013-04-24T17:03:12.480
> 
> 标签：joomla, joomla3.0

我正在将我的一些模块从 J2.5 迁移到 J3.0，但突然间我无法在 J.30 中将样式表添加到文档中。我尝试了以下代码但没有成功：

```
JHTML::stylesheet('style.css', 'modules/mod_instagallery/assets/css/');

$document = JFactory::getDocument();
$document->addStyleSheet('/modules/mod_instagallery/assets/css/style.css');
$document->addStyleSheet(JUri::base().'/modules/mod_instagallery/assets/css/style.css');

JHtml::stylesheet('modules/mod_instagallery/assets/css/style.css'); 
```

CSS 位于**MYROOT/modules/mod_instagallery/assets/css/style.css**并且文件在文件系统中。根据页面来源，没有添加任何CSS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:47:09.207

请参阅[http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1)

> JHtml::stylesheet() 不再支持将字符串作为第二个参数。这曾经是 Joomla 1.5 中文件的路径，现在已被删除。

因此，第一个将因此而失败。其他的还在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T09:15:13.983

问题解决了。由于 Web 服务器上的输出缓冲，CSS 文件似乎没有加载。

通过编辑 php.ini 文件解决了这个问题

```
output_buffering = 4096 
```

至

```
output_buffering = Off 
```

# jquery - 获取以上元素id

> ID：16197999
> 
> 赞同：1
> 
> 时间：2013-04-24T17:03:22.653
> 
> 标签：jquery

```
<textarea name="message" id="message" class="box_1"></textarea>
<div class="buttons">
  <img src="smileys/smile.gif" title=":)" />
</div> 
```

单击图像时如何获取文本区域的ID？页面上有多个按钮和笑脸（以及多个文本区域）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T17:04:57.700

```
$('div.buttons img').click(function(){
   var id = $(this.parentNode).prev('textarea').prop('id');       
   // var id = this.parentNode.previousElementSibling.id;       
}); 
```

[http://jsfiddle.net/z4DWU/1/](http://jsfiddle.net/z4DWU/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:04:52.697

您可以通过导航 dom 树来获得它：

```
function imgClicked(){
    var theElementId = $(this).parent().prev().prop("id");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T17:16:03.593

如果您使用的是[jQuery 1.7+](http://api.jquery.com/on/)，您可能希望使用以下`.on()`方法执行此操作：

```
$('div.buttons').on('click', 'img', function () {
    var id = $(this).parent().prev('textarea').prop('id');
    // doSomething with the id
}); 
```

`img`但是，如果您没有动态加载内容，那么直接绑定'没什么大不了的`click()`。