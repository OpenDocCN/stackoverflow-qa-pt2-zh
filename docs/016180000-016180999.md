# StackOverflow 问答 16180000-16180999

# apache - Apache 无法在 Windows 服务器上启动

> ID：16180001
> 
> 赞同：1
> 
> 时间：2013-04-23T22:06:40.490
> 
> 标签：apache, windows-server-2008, windows-server

我们使用的是 Windows Server 2008 R2 企业版。我们有 Apache 2.2。

无论我尝试从命令行还是通过服务器管理器启动他，我都会收到此错误

“*发生了服务特定错误：1。* ”

谷歌、必应和雅虎发现我的网站说这意味着 apache 试图访问一个不存在的文件夹中的文件。（这是真的吗？）在此之后，更多的谷歌搜索告诉我，我会在错误日志文件中找到罪魁祸首，据称在我的服务器上，在这个子目录中......

```
 C:\Program Files (x86)\Apache Software Foundation\Apache2.2\logs> 
```

该子目录中的任何文件中都没有我的错误记录。但是，*error.log*文件中有两三周前的错误记录。尽管事实上我可以在此时此地任意多次创建该错误。

直接问题：我在哪里可以找到我今天创建的错误日志？

真正的问题：为什么 Apache 不能在我的 Windows Server 上启动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:40:35.870

在 conf 文件夹中，应该有一个文件告诉 Apache 在哪个端口上运行。确保该端口上没有其他内容。

# c# - 将代码转换为使用 JSON.net 而不是 System.Runtime.Serialization.DataContractSerializer

> ID：16180008
> 
> 赞同：0
> 
> 时间：2013-04-23T22:07:25.113
> 
> 标签：c#, .net, json

如何在 JSON.net 中进行等效操作？

```
 public SerializedResults SerializeResults(Type queryType, IEnumerable entities)
      {
          var results = SerializeDynamicType(queryType);

          var objList = AnonymousFns.DeconstructMany(entities, false, queryType).ToList();

          var ms = new MemoryStream();
          var type = objList.GetType();
          var serializer = new DataContractSerializer(type);

          using (ms)
          {
              using (GZipStream compress = new GZipStream(ms, CompressionMode.Compress, CompressionLevel.BestCompression))
              {
                  serializer.WriteObject(compress, objList);
              }
          }

          results.ByteArray = ms.ToArray();

          return results;
      } 
```

我特别对这一行感到困惑： var serializer = new DataContractSerializer(type);

你如何在 JSON.NET 中做到这一点？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:17:17.040

使用 JSON.NET，序列化时不需要类型。我假设它可以自行计算出您传入的类型。

所以，你可以完全摆脱这个：

```
var type = objList.GetType();
var serializer = new DataContractSerializer(type); 
```

并改变这个：

```
serializer.WriteObject(compress, objList); 
```

到：

```
var json = JsonConvert.SerializeObject(objList); 
```

这是 JsonConvert 的 JSON.Net[文档](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_JsonConvert.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:31:07.823

我相信您可以使用 BsonWriter 写入流。我不确定它是否会为您提供与以前完全相同的二进制格式，但在概念上它是相同的。

```
 public SerializedResults SerializeResults(Type queryType, IEnumerable entities)
  {
      var results = SerializeDynamicType(queryType);

      var objList = AnonymousFns.DeconstructMany(entities, false, queryType).ToList();

      var ms = new MemoryStream();         

      using (ms)
      {
          using (GZipStream compress = new GZipStream(ms, CompressionMode.Compress, CompressionLevel.BestCompression))
          {
            using( BsonWriter writer = new BsonWriter(compress))
            {
              JsonSerializer serializer = new JsonSerializer();                 
              serializer.Serialize(writer, objList);
            }
          }
      }

      results.ByteArray = ms.ToArray();

      return results;
  } 
```

# ms-access - MS Access：如何引用导航表单的子表单？

> ID：16180009
> 
> 赞同：1
> 
> 时间：2013-04-23T22:07:26.757
> 
> 标签：ms-access

我有一个类似这样的导航表单：

![在此处输入图像描述](https://i.stack.imgur.com/MWQlu.png)

客户表单中有一个命令按钮，我想从订单表单中调用一个公共子按钮，但我不知道如何引用它。我试过了：

```
Forms!frmOrders.MyPublicSub("Arg") 
```

但我收到错误“找不到引用的表格'frmOrders'。有谁知道如何正确执行此操作？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:20:39.220

如果您有一个已在 Access 对象（表单或报表）中声明的 VBA 过程（`Sub`或），那么您应该期望它对该对象表现为私有。如果你想要一个可以从“其他地方”调用的过程，那么将它放在一个常规的 VBA 中（并将其声明为，只是为了确定）。`Function``Class Module``Module``Public`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-28T02:51:31.753

虽然 Gord Thompson 上面所说的是正确的......有时更容易直接引用表单中的过程......例如，如果您的过程正在引用子表单本身中的多个控件。在这种情况下，您可以通过如下调用来引用导航子表单：

```
Me.NavigationSubform.Form.YourPublicProcedure 
```

但要小心......导航表单有一些陷阱......（正如我们都发现的那样）。您显然有在正常的父表单/子表单关系中引用子表单的经验，如您上面的代码......但是导航表单的工作方式和处理方式不同。我在上面提交的代码将引用您的子表单 public sub... 但如果您当前没有查看具有 public sub 的子表单，您将抛出异常。

# mysql - Where, either or not both 子句 SQL

> ID：16180012
> 
> 赞同：1
> 
> 时间：2013-04-23T22:07:38.930
> 
> 标签：mysql, sql, count, having, having-clause

我正在尝试列出在秋季学期至少参加一门课程或在春季学期至少参加一门课程的学生，但不能同时参加这两个课程。我试图从不同的角度来解决这个问题，但到目前为止我还没有成功。我觉得完成此解决方案的代码如下。任何帮助表示赞赏！

```
SELECT enrolled.StudentID, student.LastName, student.FirstName
   , enrolled.courseID, enrolled.Quarter  
FROM enrolled 
INNER JOIN student ON enrolled.studentID = student.SID
GROUP BY enrolled.StudentID, student.LastName, student.FirstName
   , enrolled.courseID, enrolled.Quarter
HAVING (count(distinct enrolled.Quarter) = 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:30:17.393

您可以使用以下内容：

```
 SELECT 
   enrolled.StudentID, student.LastName, 
   student.FirstName, enrolled.courseID, enrolled.Quarter  
 FROM enrolled
 where StudentID in ( 
     SELECT StudentID 
     FROM enrolled where quarter in ( 'fall', 'spring' )
     group by StudentID
     having count(*) = 1 
   ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:31:01.233

对不起，在我的手机上，所以不会是一个完整的答案。

我会尝试

```
Select [what you want]
From students as s
Outer apply
(
Select distinct sid 
From enrolled as e
Where e.sid =s.sid
And quorter = 1
) as q1
Outer apply
(
 Select distinct sid 
From enrolled as e
Where e.sid =s.sid
And quorter = 2
) as q2
Where
((  q1.sid  is null and q2.sid is not null)
Or 
( q1.sid is not null and q2.sid is null))
And (q1.sid is not null and q2.sid is not null) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T22:34:26.847

我会做一个联合查询。

```
select yourfields
from enrolled
where studentid in
(select studentid
from enrolled 
where quarter = 'fall'
minus
select studentid
from enrolled 
where quarter = 'spring')

union all
select yourfields
from enrolled
where studentid in
(select studentid
from enrolled 
where quarter = 'spring'
minus
select studentid
from enrolled 
where quarter = 'fall') 
```

不完全确定 MySQL 是否支持关键字减号。有些分贝会，有些不会。如果不是，它可能支持关键字 except。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T22:43:02.567

Stouny 的评论是正确的，从工作中删除`quarter`并`group by`使用聚合器`select`：

```
SELECT enrolled.StudentID, student.LastName, student.FirstName, enrolled.courseID, max(enrolled.Quarter) as quarter
FROM enrolled 
INNER JOIN student ON enrolled.studentID = student.SID
GROUP BY enrolled.StudentID, student.LastName, student.FirstName, enrolled.courseID
HAVING count(*) = 1 
```

如果您有很多季度要检查，另一种方法将无法很好地扩展，但适用于 2：

```
SELECT enrolled.StudentID, student.LastName, student.FirstName, coalesce(spring.courseID, fall.courseID), coaleasce(spring.Quarter, fall.quarter)  
FROM students
LEFT OUTER JOIN enrolled as spring ON spring.studentId = students.sid and spring.quarter = 'spring'
LEFT OUTER JOIN enrolled as fall ON fall.studentId = students.sid and fall.quarter = 'fall'
WHERE (spring.courseID != NULL and fall.courseID = NULL) OR (spring.courseID ! NULL and fall.courseID != NULL) 
```

# .htaccess - 重写规则 .htaccess

> ID：16180014
> 
> 赞同：-1
> 
> 时间：2013-04-23T22:07:41.247
> 
> 标签：.htaccess, mod-rewrite, redirect

我正在尝试更新 .htaccess 以将我从 :
**page.php/name**
重定向 到**page.php?id=name**。
任何人都可以帮忙举个例子吗？我找到了很多例子，但不适用于这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:12:40.107

要重定向（告诉浏览器**page.php/name**的请求位于**page.php?id=name**，从而更改位置栏中的 URL），您可以执行以下两项操作之一。

使用 mod_alias：

```
RedirectMatch 301 ^/page\.php/(.*)$ /page.php?id=$1 
```

或使用 mod_rewrite：

```
RewriteRule ^/?page\.php/(.*)$ /page.php?id=$1 [QSA,L,R=301] 
```

如果您不想要永久重定向 (301)，请从上面删除`301`和`=301`部分。

# java - 从 TableItem 中检索小部件

> ID：16180016
> 
> 赞同：2
> 
> 时间：2013-04-23T22:07:43.960
> 
> 标签：java, swt, jface

我构建了一个表格（org.eclipse.swt.widgets.Table）并使用 TableEditor 在每个 TableItem（行）上添加 2 个复选框。

```
TableItem tableItem = new TableItem(tableClientes, SWT.NONE);
TableEditor editor = new TableEditor(tableClientes);

Button checkEnviar = new Button(tableClientes, SWT.CHECK);
checkEnviar.pack();

editor.minimumWidth = checkEnviar.getSize().x + 5;
editor.horizontalAlignment = SWT.CENTER;
editor.setEditor(checkEnviar, tableItem, 0);

editor = new TableEditor(tableClientes);

Button checkMarcar = new Button(tableClientes, SWT.CHECK);
checkMarcar.pack();

editor.minimumWidth = checkMarcar.getSize().x;
editor.horizontalAlignment = SWT.CENTER;
editor.setEditor(checkMarcar, tableItem, 1); 
```

现在我需要读取每一行上每个复选框的状态，但我不知道如何。

我尝试以这种方式检索 TableItem：

```
tableClientes.getItem(x) 
```

但在它的内容中，我无法检索复选框状态或对其进行操作。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:59:57.570

一个简单的解决方案是使用类`setData()`的方法`Widget`。例如看下面的代码（特别是最后一个按钮的选择监听器，但*要测试一个有效的小部件实例*）：

```
import org.eclipse.swt.SWT;
import org.eclipse.swt.custom.TableEditor;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.layout.GridData;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.swt.widgets.Table;
import org.eclipse.swt.widgets.TableColumn;
import org.eclipse.swt.widgets.TableItem;

public class TableItemTest {
    public static void main(String[] args) {
        Display display = new Display();
        Shell shell = new Shell(display);
        shell.setLayout(new GridLayout(1, false));
        GridData gridData = new GridData(SWT.FILL, SWT.FILL, true, true);
        shell.setLayoutData(gridData);

        final Table table = new Table(shell, SWT.BORDER);
        table.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
        table.setHeaderVisible(true);
        table.setLinesVisible(true);
        table.setBounds(new org.eclipse.swt.graphics.Rectangle(47,67,190,70));

        TableColumn tableColumn = new TableColumn(table, SWT.NONE);
        tableColumn.setWidth(180);
        tableColumn.setText("Check Column"); 

        for(int i=0; i<10; i++){
            Button checkButton = new Button(table, SWT.CHECK); 
            checkButton.pack();

            TableItem tableItem=new TableItem(table,SWT.NONE);
            TableEditor editor = new TableEditor (table);

            editor.minimumWidth = checkButton.getSize ().x;
            editor.horizontalAlignment = SWT.CENTER;
            editor.setEditor(checkButton, tableItem, 0);
            tableItem.setData("CHECK_BOX", checkButton); //Point to notice
        }

        Button checkState = new Button(shell, SWT.PUSH);
        checkState.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, false));
        checkState.setText("Check State");
        checkState.addSelectionListener(new SelectionAdapter() {
            public void widgetSelected(SelectionEvent e) {
                TableItem[] items = table.getItems();
                for (int i = 0; i < items.length; i++) {
                    Object data = items[i].getData("CHECK_BOX");
                    if(data != null){
                        Button checkButton = (Button)data;
                        if(!checkButton.isDisposed())
                            System.out.println("For row " + (i+1) + " check status is " + checkButton.getSelection());
                    }
                }
            }
        });

        shell.setSize(220, 400);
        shell.open();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }
} 
```

# css - 边界顶部和边界半径的 CSS3 问题

> ID：16180021
> 
> 赞同：0
> 
> 时间：2013-04-23T22:07:50.980
> 
> 标签：css

我正在考虑添加一个边框顶部，`20px solid red;`我希望它的底部是圆形的。有了以下内容，它似乎对我有用。

```
 -moz-border-radius-bottomright: 12px 12px;
  border-bottom-right-radius: 12px 12px;
  -moz-border-radius-bottomleft: 12px 12px;
  border-bottom-left-radius: 12px 12px; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:02:03.490

I suggest you to use `border` instead of `border-top` to make sure the property is applied to all borders.

```
border: 20px solid red; 
```

In this case you can use `border-bottom-left-radius: 12px;` with one value because both are the same.

Also you can add vendor property for webkit:

```
-webkit-border-bottom-right-radius: 12px;
-webkit-border-bottom-left-radius: 12px; 
```

[Here](http://jsfiddle.net/hbxzY/) is a fiddle.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:57:27.187

我不确定为什么你不能产生结果，但上面的代码看起来是正确的。我提供了一个 JS Fiddle 示例，我的作品。我假设您将border-top 属性添加到框中。我认为每个边界属性不需要两个值。希望这可以帮助。

创建一个 ID 为 box 的新图层对象并应用以下 CSS。如果在框中添加段落，则不会出现边框。

[http://jsfiddle.net/brownlace/kEvrE/1/embedded/result/](http://jsfiddle.net/brownlace/kEvrE/1/embedded/result/)

```
/* css3 rounded corners */

#box {
border-top: 20px solid red;
border-bottom-right-radius: 20px; 
border-bottom-left-radius: 20px; 
-moz-border-radius-bottomright: 20px; 
-moz-border-radius-bottomleft: 20px; 
} 
```

# objective-c - 退出搜索视图

> ID：16180024
> 
> 赞同：0
> 
> 时间：2013-04-23T22:08:19.350
> 
> 标签：objective-c

我对objective-c很陌生。

我有一个由搜索栏和下面的表格视图组成的视图。当用户搜索时，会从服务器端 XML 文件创建一个数组。一切正常，但是当用户按下搜索按钮时，表格视图仍然显示以前的数据，直到按下取消按钮。

当用户按下搜索按钮从“搜索视图”返回到主表视图时，如何模仿取消按钮的操作？

searchBarSearchButtonClicked:

```
NSString * path2 = [NSString stringWithFormat: @"http://URL/%@.xml", self.mySearchBar.text];
[self parseXMLFileAtURL:path2];
[self.mySearchBar resignFirstResponder]; 
```

我尝试使用 self.mySearchBar resignFirstResponder，但这只是隐藏了键盘，用户仍在“搜索视图”中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:46:42.143

尝试这个：

```
[self.searchDisplayController setActive:NO]; 
```

# c++ - ostream的重载<<操作符，用在虚函数中

> ID：16180027
> 
> 赞同：0
> 
> 时间：2013-04-23T22:08:32.747
> 
> 标签：c++

我有`overloaded << opreator`这种方式：

```
ostream& operator<<(ostream&os, const Computer& c) {
     for (int i = 0; i != c.listOfComponents.size() - 1; i++) {
        os << c.listOfComponents[i].getInfo(os) << endl;    
    }
    return os;
} 
```

`listoOfComponents`在哪里`vector<Component>`。

我的`Component`班级和其中一个孩子班级在这里：

```
class Component {
public:

    Component() {
    };

    ~Component() {
    };

  virtual ostream &getInfo(ostream& os)const;
};

ostream &Component::getInfo(ostream& os)const {
    return os;
}

class CPU : public Component {
public:

    CCPU(int cores, int freq) {
        this->cores = cores;
        this->freq = freq;
    };

    ~CPU() {
    };

    virtual ostream &getInfo(ostream& os)const;

    int cores;
    int freq;
};

ostream &CPU::getInfo(ostream& os)const {
        os<<"CORES:"<<cores<<" FREQ:"<<freq<<endl;
 } 
```

最后是`Computer`课程：

```
class Computer {
public:
    // constructor

    Computer(string name) {
        this->name = name;
    };
    // destructor

    ~Computer() {

    };

    // operator <<
    friend ostream& operator<<(ostream& os, const CComputer& c);

    CComputer & AddComponent(Component const & component) {
        this->listOfComponents.push_back(component);
        return *this;
    };

    CComputer & AddAddress(const string & address) {
        this->address = address;
        return *this;
    };

    string name;
    string address;
    vector<Component> listOfComponents;
}; 
```

但是，当我想通过`cout<<os;`它打印出来时，它只打印出地址（即0x6c180484）。但我不知道如何编写它才能编译它并获得正确的值......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:18:40.670

这个：

```
os << c.listOfComponents[i].getInfo(os) << endl; 
```

应该：

```
c.listOfComponents[i].getInfo(os) << endl; 
```

这当然是假设`os`返回`std::ostream`对象。

* * *

使用您拥有它的方式，您正在打印一个指针，该指针返回其地址（以十六进制表示）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T22:20:25.740

首先，为什么打印到流的方法称为`get_info`？调用它`put_info()`（具有相同的返回类型/参数）并像使用它一样使用它

```
c.listOfComponents.put_info(os) << endl; 
```

不要忘记从`put_info`.

在你这样做之后，它仍然无法工作，因为`vector<Component>`精确地保存了 Components - 如果你推`CPU`入，它会被粗暴地截断为`Component`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T22:12:22.197

> `cout<<os`但是，当我想通过;打印出来时 它只打印出地址（即 0x6c180484）。但我不知道如何编写它才能编译它并获得正确的值......

我猜你正在将你的对象的*指针*`std::cout`传递给，它被打印为它的地址（十六进制数）。如果您有指针，请确保在将其传递给流时取消引用它：

```
std::cout << *pointer; 
```

# javascript - 有没有办法将 6502 程序集添加到 Google Code Prettify？

> ID：16180034
> 
> 赞同：2
> 
> 时间：2013-04-23T22:09:16.277
> 
> 标签：javascript, prettify, 6502

我有使用 Google Code Prettify 的博客。我的博客有很多 6502 汇编语言代码，我想添加说明和指令。

我希望有人已经学会了如何添加自定义语言。或者更好的是，知道他们可以共享的 6502 CSS 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:50:14.890

我不知道 Google Code Prettify，但我`SyntaxHighlighter`在 Blogger 上基于 6502 的博客中使用了 Alex Gorbatchev 的样式表。

SyntaxHighlighter 在[这里](http://alexgorbatchev.com/SyntaxHighlighter/)。

它的快速入门指南在[这里](http://abhinandanmk.blogspot.co.uk/2012/05/how-to-format-source-code-for-blogger.html)。

在我的博客之一上使用 6502 的一个例子是[这里](http://vicpp.blogspot.co.uk/2013/03/in-which-we-push-stack-around_13.html)。

# asp.net - 另一个 TinyMCE 和 Asp.Net UpdatePanel 错误（权限被拒绝）

> ID：16180044
> 
> 赞同：2
> 
> 时间：2013-04-23T22:09:44.803
> 
> 标签：asp.net, asp.net-ajax, tinymce, updatepanel

我对 tinymce 和 UpdatePanel 有疑问，我发布这个是因为没有其他解决方案对我有用。

这是我的代码：

```
function pageLoad() {

        console.log("pageLoad called");
        tinyMCE.init({
            theme: "advanced",
            plugins: "preview,paste",
            theme_advanced_toolbar_location: "top",
            theme_advanced_toolbar_align: "left",
            theme_advanced_buttons1: "undo,redo,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,justifyfull,|,fontselect,fontsizeselect,forecolor,backcolor",
            theme_advanced_buttons2: "cut,copy,paste,pastetext,pasteword,|,link,unlink,|,removeformat,cleanup,preview",
            theme_advanced_buttons3: ""
        });

        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_beginRequest(function (sender, args) {
            var inst = tinyMCE.getInstanceById('<%= txtContenidoCorreo.ClientID %>');
            if (typeof inst !== 'undefined' && inst !== null) {
                console.log('removing');
                //tinyMCE.triggerSave();
                //tinyMCE.execCommand('mceFocus', false, '<%= txtContenidoCorreo.ClientID %>');
                tinyMCE.execCommand('mceRemoveControl', false, '<%= txtContenidoCorreo.ClientID %>');
                console.log('removed');
            }

        });

        prm.add_endRequest(function (sender, args) {
            var inst = tinyMCE.getInstanceById('<%= txtContenidoCorreo.ClientID %>');
            if (!inst) {
                console.log('initializing');
                tinyMCE.execCommand('mceAddControl', false, '<%= txtContenidoCorreo.ClientID %>');
                console.log('initialized');
            }
        });
    } 
```

经过几个异步请求后，我在 IE9 和 IE10 中收到此错误：

> SCRIPT70：权限被拒绝。

发生此错误的确切行是：

```
result = this.bodyElement || this.getDoc().body; 
```

这是堆栈跟踪：

> getBody@/JavaScript/tiny_mce/tiny_mce_src.js:14548:11
> 
> 获取内容@/JavaScript/tiny_mce/tiny_mce_src.js:14458:30
> 
> 保存@/JavaScript/tiny_mce/tiny_mce_src.js:14377:4
> 
> {匿名}()@(/JavaScript/tiny_mce/tiny_mce_src.js:13466:17)
> 
> dispatch@/JavaScript/tiny_mce/tiny_mce_src.js:562:4
> 
> eventHandler@/JavaScript/tiny_mce/tiny_mce_src.js:14905:5
> 
> executeHandlers@/JavaScript/tiny_mce/tiny_mce_src.js:4731:6

我正在使用 Tinymce 3.5.8

# python - 如何使用 for 循环在 python 中创建数组？

> ID：16180048
> 
> 赞同：0
> 
> 时间：2013-04-23T22:10:00.657
> 
> 标签：python, arrays, for-loop

我有一个这样的数组：

```
['age', 'height', 'weight'] 
```

我需要用列表中的值“填充”数组，该列表包含具有年龄、身高和体重值的对象。

例如：

```
for value in list:
    age = value.age
    height = value.height
    weight = value.weight
    "[{}, {}m, {}lb]".format(age, height, weight) 
```

我想获得所需的输出：

```
[21, 1.77m, 160lb]
[25, 1.56m, 145lb] 
```

等为列表中的每个对象。

所以最终的输出最终会是这样的：

```
['age', 'height', 'weight']
[21, 1.77m, 160lb]
[25, 1.56m, 145lb] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:31:06.973

如果我理解，那么您正在寻找：

```
head = [['age', 'height', 'weight']]
for obj in obj_list: # overriding built-in list is a bad idea
    head += [obj.age, obj.height, obj.weight] 
```

什么会给你一个充满其余数据的数组：

```
[['age', 'height', 'weight'], 
 [21, 1.77m, 160lb], 
 [25, 1.56m, 145lb]] 
```

这是你想要的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:21:43.123

您可以像这样格式化字符串：

```
In [5]: a, h, w = 10, 1.70, 200

In [7]: print "[%d, %.2fm, %dlb]" % (a, h, w)
------> print("[%d, %.2fm, %dlb]" % (a, h, w))
[10, 1.70m, 200lb] 
```

请注意，将这些值与字符串后缀组合会将元素转换为字符串，这可能好也可能不好。

# programming-languages - http://www.givenow.com.au/ 这个网站是用什么写的？

> ID：16180050
> 
> 赞同：-1
> 
> 时间：2013-04-23T22:10:11.660
> 
> 标签：programming-languages

我想知道这个网站是用什么写的？请问有人知道吗？是的，我对创建网站了解不多，所以这就是为什么我把它交给别人去做。只是想知道上面的网站是用什么写的吗？马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:16:29.027

通过登录表单（`j_username`和`j_password`）的字段名称，我猜他们正在使用 Spring Security 进行身份验证。这表明他们可能正在将 Spring MVC 用于 Web 框架。

所以，Java with Spring stack 是我的猜测，但我不确定这是否是你的问题。

在这种情况下，它所写的内容在很大程度上应该是无关紧要的。如果您对创建网站知之甚少，并且希望创建一个像这样的网站，那么最好将其交给网页设计师并让他们整理出来。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T22:18:45.363

乍一看，它看起来像是用 JavaScript 编写的，只考虑了我从 HTML 源代码中看到的内容。什么或是否使用了一种服务器端编程语言，它甚至无法告诉我的水晶球或算命先生，但如果您甚至对网站的工作方式感兴趣（没有任何关于 html、css、javasript 等的详细信息），您可以通过询问 Google 博士甚至 Wikipedia 已经在您的 onw 上发现了这一点，会为您提供一个不合适的答案。

# jquery - RoyalSlider HTML 内容仅出现在 iPad 上的第一张幻灯片上

> ID：16180051
> 
> 赞同：0
> 
> 时间：2013-04-23T22:10:12.420
> 
> 标签：jquery, wordpress, slider

我在 Wordpress 构建上使用 RoyalSlider 来创建主页滑块。一切都运行良好，除了我今天在 iPad 上查看该网站时。

幻灯片使用 HTML 内容字段来生成漂浮在图像上的文本。在我测试过的所有浏览器上，除了 iPad 上的 Safari，一切正常。

在 iPad 上，文本显示在第一张幻灯片上。然后当它滑动到下一张幻灯片时，文本不会出现，并且在动画过程中会闪烁一秒钟。

有没有人经历过这样的事情？如果是这样，任何建议如何解决这个问题？

这是该网站的链接：http: [//pilgrim.quantumdynamix.net/](http://pilgrim.quantumdynamix.net/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:35:48.780

尝试通过滑块触发元素上的硬件加速，例如；

```
.rsSliderText {
  -webkit-backface-visibility: hidden;
  -webkit-transform: translateZ(0);
} 
```

# c# - 引用和导入第三方 python 库

> ID：16180054
> 
> 赞同：1
> 
> 时间：2013-04-23T22:10:29.250
> 
> 标签：c#, python

我对 python 相当陌生，并且来自 C# 背景。在 C# l 中，第三方库通常存储在项目文件夹中。

这意味着库完全在项目内部。然后，该项目不依赖于项目文件夹之外的任何内容（当然，.net 框架除外）。

我真的很喜欢这种结构，并尝试通过将库复制到项目根目录中的 lib 目录中，并在应用程序启动时将 lib 文件夹添加到 python 路径中，从而成功地在 python 中镜像它。

我担心这样做可能会导致我忽略了一些事情，因为我环顾四周，并没有真正看到 Python 社区中的其他人这样做。

我的问题很简单——这样可以吗？通过简单地转储必要的 .py 库而不是使用简单安装，从而在系统级别将库存储在站点包中，我可能会错过什么吗？

请随时让我知道您可以看到的任何缺点，无论多么简单。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:41:18.050

我将支持使用[`virtualenv`](http://www.virtualenv.org)和[`pip`](http://www.pip-installer.org)用于开发目的。这将为您提供您习惯的沙箱。至于分发，请使用*setup.py 并重*用您将用于安装依赖项的*requirements.txt*文件以生成. 我一直想设置一个示例来稍微展示一下这一点 - 查看[https://github.com/dave-shawley/setup-example](https://github.com/dave-shawley/setup-example)以获得一个带有一些描述的好示例。我计划在时间允许的情况下添加更多内容。`pip install -r``install_requires``setuptools.setup`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:42:47.213

如果您想在每个项目的基础上密切管理代码的依赖关系，您可能需要查看[virtualenv](https://pypi.python.org/pypi/virtualenv)。

Virtualenv 将允许您将依赖项保持在靠近源的位置，但会删除容易出错的`.py`文件手动复制。

最重要的是，有些包不是纯 python，它们有时包含编译`C`代码——如果你使用 virtualenv，你不必担心它。

# html - Powershell 从 ConvertTo-HTML 修改 HTML

> ID：16180055
> 
> 赞同：1
> 
> 时间：2013-04-23T22:10:43.223
> 
> 标签：html, regex, powershell-2.0

我有一个脚本，它生成一组我想以 HTML 格式通过电子邮件发送的对象。那部分工作正常。我正在尝试修改 HTML 字符串以使某些行具有不同的字体颜色。

部分 html 字符串如下所示（仅 2 行）：

```
<tr>
    <td>ABL - Branch5206 Daily OD Report</td>
    <td>'\\CTB052\Shared_Files\FIS-BIC Reporting\Report Output Files\ABL\Operations\Daily\ABL - Branch5206 Daily OD Report.pdf'</td>
    <td>13124</td>
    <td>4/23/2013 8:05:34 AM</td>
    <td>29134</td>
    <td>0</td>
    <td>Delivered</td>
</tr>

<tr>
    <td>ABL - Branch5206 Daily OD Report</td>
    <td>'\\CTB052\Shared_Files\FIS-BIC Reporting\Report Output Files\ABL\Operations\Daily\ABL - Branch5206 Daily OD Report.xls'</td>
    <td>15716</td>
    <td>4/23/2013 8:05:34 AM</td>
    <td>29134</td>
    <td>0</td>
    <td>Delivered</td>
</tr> 
```

我尝试使用正则表达式将字体颜色添加到行以“已交付”结尾的行的开头和结尾： `$email = [regex]::Replace($email, "<tr><td>(.*?)Delivered</td></tr>", '<tr><font color = green><td>$1Delivered</td></font></tr>')`

这不起作用（我不确定您是否可以像这样为整行设置字体颜色）。

关于如何轻松/有效地做到这一点的任何想法？我必须在几种不同的状态下执行此操作（例如已交付）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:04:40.620

免责声明：正则表达式解析器**无法**解析HTML 。正则表达式不会提供此问题的通用解决方案。但是，如果您的 HTML 结构是众所周知的并且您没有任何其他`<tr></tr>`元素，那么以下方法可能会起作用。但是，关于这一点，是否有某些原因您不能修改 HTML 生成来执行此操作，而不是等到 HTML 已经生成？

试试这个命令：

```
PS > $email = $email -replace '(?s)<tr>(.*?)<td>Delivered</td>(.*?)</tr>','<tr style="color: #FF0000">$1<td>Delivered</td>$2</tr>' 
```

第一个字符串是模式。`(?s)`告诉解析器允许`.`接受换行符；这称为“单行”模式。然后它抓取一个`<tr>`包含字符串的元素`<td>Delivered</td>`。两个捕获组抓取字符串`<tr>`周围元素中的所有其他内容。`<td>Delivered</td>`注意 s 后面的问号`*`。`*`本身就是贪婪的，并且匹配尽可能多的文本；`*?`匹配尽可能少的文本。如果我们只是`*`在这里使用，它会将您的整个字符串视为一个匹配项，并且只替换第一个`<tr>`.

第二个字符串是替换。它`<tr>`使用添加的样式属性将元素及其内容放回原处，并且所有内容都没有返回引用。

另一个小注意事项是引用。无论如何，我倾向于使用单引号，但在这种情况下，您可能会在替换字符串中使用双引号。所以单引号可能是要走的路。

至于如何针对不同的状态执行此操作，正则表达式确实不是为这样的条件内容而设计的；这就像试图将螺丝刀用作钻头一样。您可以硬编码多个替换或循环状态/颜色对并构建您的模式并从中替换字符串。如果你能找到一个适用于 .NET 的完整的 HTML 解析器，它的效率会更高；如果您可以保证它是有效的 XML，您可能会尝试使用 XML 解析器。或者，回到我一开始的问题，您可以修改 HTML 生成。但是，如果您的电子邮件数量很少，这可能不是值得解决的瓶颈。花费的开发时间也很昂贵。看看它是否足够快，如果不是，请尝试不同的路线。

应得的信用：我从@FrankieTheKneeMan 获取了 HTML 样式属性。

# javascript - javascript从括号匹配正则表达式中获取字符串

> ID：16180056
> 
> 赞同：0
> 
> 时间：2013-04-23T22:10:45.940
> 
> 标签：javascript, jquery, regex, match, parentheses

我有一个完整的字符串，由这样的内容组成 [(data1.1)(data1.2)][(data2.1)(data2.1)]

我读过你可以用匹配函数和正则表达式做一些聪明的事情。我想要两个数组，其中的数据从括号中加载出来。我到底该怎么做？请以我的字符串为例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:33:42.210

我想出了这个可憎的：

```
var array = s.replace(/^\[|\]$/g,'').split('][').map(function(a){    
    return a.replace(/^\(|\)$/g,'').split(')(')
}); 
```

[http://jsfiddle.net/8kLhc/](http://jsfiddle.net/8kLhc/)

此外，如果您故意像这样保存或传输数据，那么您应该真正了解一下[JSON](http://en.wikipedia.org/wiki/JSON)或适当的数据库设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:27:34.313

我不完全确定你在追求什么，但我假设这个

```
var what = '[(data1.1)(data1.2)][(data2.1)(data2.2)]',
    have = [],
    you = [],
    tried = /\[\(([^)]*)\)\(([^)]*)\)\]/g;
what.replace(tried, function (use, brain, forthis) {
    you.push((have.push(brain), forthis));
});
console.log(have, you);
// ["data1.1", "data2.1"] ["data1.2", "data2.2"] 
```

# javascript - 正则表达式匹配 JavaScript 中的数字范围

> ID：16180060
> 
> 赞同：0
> 
> 时间：2013-04-23T22:11:03.420
> 
> 标签：javascript, regex

我在使用 JavaScript 正则表达式时遇到问题。我想匹配 1 到 5 的实数。精度为两位数。我的代码是，但它不起作用。

```
function validate_prosjek(nmb)
{
    var pattern= new RegExp(/[1-4]\.[0-9][0-9]|5\.00/);

    return pattern.test(nmb);
} 
```

它识别大于 5 的实数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:13:33.870

您需要分别使用`^`和`$`匹配字符串的开头和结尾来“锚定”您的正则表达式：

```
var pattern = /^([1-4]\.[0-9][0-9]|5\.00)$/; 
```

您还需要转义，因为它是正则表达式中的特殊字符，如果正则表达式已经在synax中`.`，则无需调用。`new RegExp``/.../`

# postgis - 选择分割线段的节点

> ID：16180061
> 
> 赞同：0
> 
> 时间：2013-04-23T22:11:13.880
> 
> 标签：postgis, postgresql-9.1, manifold

我想选择在图层中分隔线段的节点。我只想选择与两条线相交的节点，而不是当它们与两条以上的线相交时（例如 T 相交或四向相交等）。

这是我能给出的最好的图片（我没有发布图片的声誉）。左边的 --- 线是第一段，右边的 --x--x--x 线是第二段。O 是我要选择的中间节点。

--------------------------------------0--x---x--x- --x---x---x--x--x--x--x--x--x--x

我不想选择超过两条线接触节点的节点。

到目前为止，我已经尝试过这个查询

```
CREATE TABLE contacts_st_touching_faults as
SELECT ST_Intersection(a.the_geom, b.the_geom), Count(Distinct a.gid) = 2
FROM final_layer as a, final_layer as b
WHERE ST_Touches(a.the_geom, b.the_geom)
AND a.gid != b.gid
GROUP BY ST_Intersection(a.the_geom, b.the_geom) 
```

当我运行这个查询时，它给了我两个以上相交线的交叉点（T 交叉口和 4 路交叉口）。

我也尝试过将 ST_intersects 放入其中，但这似乎不如 ST_touches 工作，但如果您知道如何使它们工作或任何其他方法，将不胜感激！

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:09:32.030

这应该有效：

```
WITH contacts AS(
SELECT a.gid AS gid1,b.gid AS gid2, ST_Intersection(a.the_geom, b.the_geom) AS intersection
FROM final_layer as a, final_layer as b
WHERE ST_Touches(a.the_geom, b.the_geom)
AND a.gid<b.gid
)
SELECT *
FROM contacts c1
LEFT JOIN contacts c2
  ON ((c1.gid1=c2.gid1 AND c1.gid2<>c2.gid2) OR (c1.gid1=c2.gid2 AND c1.gid1<>c1.gid2))
  AND c1.intersection=c2.intersection
WHERE c2.gid1 IS NULL; 
```

如果将 ST_Intersection 移至最终查询，它的性能会更好，但我想让它变得简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-17T23:19:33.563

这将列出拖链相交的节点。

```
    SELECT array_agg(gid) AS gids, count(gid) AS count, geom
    从
      -- 列出所有线的顶点（点）
      (SELECT gid, (ST_DumpPoints(geom)).geom AS geom
      FROM lines_layer) AS p
    按 p.geom 分组
    有计数（gid）= 2
    按计数排序（gid）；

```

对于所有节点，将 '= 2' 替换为 '> 1'

# vb.net - VB.NET：在折线图中标记点

> ID：16180068
> 
> 赞同：1
> 
> 时间：2013-04-23T22:11:51.330
> 
> 标签：vb.net, charts

我正在 VB.NET 中创建一个带有线条的图表。现在我在一行中有多个值。我想用一个小圆圈（或正方形，没关系）来标记其中的某些值。

我该怎么做？

它应该看起来很轻：

![具有突出显示和未突出显示值的线条示例](https://i.stack.imgur.com/aJHy4.png)

如何实现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T08:25:27.090

设置点的标记可以解决问题：

```
dataGridView1.Series(0).Points(0).MarkerStyle = DataVisualization.Charting.MarkerStyle.Circle
dataGridView1.Series(0).Points(0).MarkerSize = 10 
```

# c# - 如何在 Windows 窗体中打开程序？

> ID：16180069
> 
> 赞同：0
> 
> 时间：2013-04-23T22:12:08.237
> 
> 标签：c#, .net, winforms

我想要一个程序，比如说谷歌浏览器，在 Windows 窗体内打开，但不能移到窗体外或在任务栏上看到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:13:44.233

您不能将任意应用程序嵌入到您的应用程序中，除非它们为此提供 API。如果您想嵌入浏览器，请查看恰好是 Chromium 的 .Net 包装器的 WebBrowser 控件或 Awesomium 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T14:57:46.850

虽然相当 hacky，但这可以通过使用 SetParent ( [http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633541(v=vs.85).aspxwindows](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633541(v=vs.85).aspxwindows) ) API 函数来完成。

当我需要与会定期崩溃的错误视频库集成时，我已经这样做了。当视频库死时主用户界面崩溃是不可接受的，因此我生成了另一个应用程序来显示视频，并将其作为主应用程序中的一个窗口的父级。

一旦成为父对象，您可能想要使用其他功能来移动它或调整它的大小，例如 MoveWindow。

使用此方法可能会产生一些您可能需要管理的副作用。

# asp.net-mvc-4 - 如何通过 AJAX 在 MVC 4 表单身份验证中扩展用户会话

> ID：16180074
> 
> 赞同：0
> 
> 时间：2013-04-23T22:12:27.963
> 
> 标签：asp.net-mvc-4, forms-authentication

我正在为公司内部网站使用表单身份验证。我根据本地 Active Directory 服务器对用户进行身份验证。

我的 Web.config 文件设置如下：

```
<authentication mode="Forms">
      <forms name=".ADAuthCookie" loginUrl="~/Login" timeout="30" slidingExpiration="true" protection="All" defaultUrl="/" />
</authentication> 
```

只要用户移动到新页面或刷新他们所在的页面，此方法就可以正常工作。但是，我的大部分 UI 都是基于 javascript 模板和 AJAX，因此用户很有可能在页面上工作超过 30 分钟。

那么，我如何通过 AJAX 调用查询和/或延长他们在会话中剩余的时间？我不需要 AJAX 调用的帮助，只需将其放入控制器中（例如 /user/keepalive）

# iphone - 按下 IBAction 后确定 PickerView 值

> ID：16180076
> 
> 赞同：0
> 
> 时间：2013-04-23T22:12:45.673
> 
> 标签：iphone, ios, uipickerview

我有一个使用我想要的值的 iOS UiPicker，并且可以使用以下代码检测何时选择了新选项：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    NSString *aCompany = [arrayColour objectAtIndex:[pickerView selectedRowInComponent:0]];

    UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle:@"Picked:"
                          message:aCompany
                          delegate:nil
                          cancelButtonTitle:@"Okay"
                          otherButtonTitles:nil];

    [alert show];

} 
```

我的问题是如何在按下这样的按钮后从选择器中获取最新信息：

```
- (IBAction)DoneButton:(id)sender {

    UIAlertView *alert = [[UIAlertView alloc]
                          initWithTitle:@"Picked:"
                          message:aCompany
                          delegate:nil
                          cancelButtonTitle:@"Okay"
                          otherButtonTitles:nil];

    [alert show];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:22:12.840

将您的设置`pickerView`为`IBOutlet`（并使用 IB 链接），然后您可以在`didSelectRow`.

```
@property (nonatomic) IBOutlet UIPickerView *myPickerView; 
```

然后您可以在中使用以下行`DoneButton`：

```
NSString *aCompany = [arrayColour objectAtIndex:[self.myPickerView selectedRowInComponent:0]]; 
```

# javascript - 单击按钮将一个 div 覆盖在另一个上

> ID：16180077
> 
> 赞同：0
> 
> 时间：2013-04-23T22:12:57.590
> 
> 标签：javascript, html, css

我有两个可视化，每个在不同的 div 中。我想在按钮单击时将一个 div 放在另一个上以覆盖和比较它们。然后，在另一个按钮单击时，我想将其分开。任何代码片段或链接将不胜感激。现在我只是想利用以下 javascript 函数：

```
function ShowOverlay(divID, xCoordinate, yCoordinate) {    
    var divObject = document.getElementById(divID);    
    divObject.style.visibility = "visible";    
    divObject.style.left = xCoordinate;    
    divObject.style.top = yCoordinate;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:15:39.863

您应该使用绝对或相对定位。

如果您的`position`属性未设置为`absolute`或不会有任何影响`relative` `style.left`。`style.top`

以下将允许它们移动（您只需要计算出坐标：

```
function ShowOverlay(divID, xCoordinate, yCoordinate) {

    var divObject = document.getElementById(divID);

    divObject.style.visibility = "visible";
    divObject.style.left = xCoordinate;
    divObject.style.top = yCoordinate;
    divObject.style.position = "absolute";

} 
```

要撤消它，只需将位置设置回静态：

```
divObject.style.position = "static"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-29T08:29:56.620

这是一个非常简单的工作示例，在单击按钮时将三个 div 相互移动。HTML 代码

```
<div class="container">
 <div class = "circlea"><h2>link</h2></div>
 <div class = "circleb"><h2>link</h2></div>
 <div class = "circlec"><h2>link</h2></div>
 <button >click me</button>
</div>

.circlea,.circleb,.circlec{
 height:150px;
 width:150px;
 border-radius:50%;
 margin-left:50%;
 margin-top:120px;
 position: absolute;
 transition: all 1s ease-in-out;
 opacity:0;
 color:white;
 text-align:center; 
}

.circlea{
 background-color:rgba( 20, 155, 138 );
 }

.circleb{
 background-color:rgba( 155, 20, 144 );
}

.circlec{
 background-color:rgba( 24, 155, 20);
 opacity:1;
}

button{
 background-color:tomato;
 width:100px;
 padding:10px;
 color:white;
 }

.transforma{
 margin-left:200px;
 opacity:1;
 }

.transformb{
  margin-left:800px;
  opacity:1;
 }

.transformb{
 opacity:1;
 } 
```

js

```
 $("button").click(function(){

  $("div.circleb").toggleClass("transformb");
  $("div.circlea").toggleClass("transforma");

 }); 
```

[https://codepen.io/pranjalkoshti/pen/rYNQeL](https://codepen.io/pranjalkoshti/pen/rYNQeL)

# php - PHP exec()：为什么我可以访问共享内存，但不能访问命名信号量？(错误号 = 13)

> ID：16180078
> 
> 赞同：0
> 
> 时间：2013-04-23T22:13:13.663
> 
> 标签：php, c, ipc, shared-memory, semaphore

我正在使用 php`exec()`命令运行，`get_value.c`. `get_value.c`附加到共享内存读取一个值并将其返回给我的 PHP 脚本。在我最初测试附加到共享内存的过程中，它工作得很好。

然后当我添加信号量**时，`sem_open()`返回 errno = 13。

我打开了一个开关块，并从页面中`errno`列出了所有错误案例。`sem_open` `man`错误 13 没有被困住，它只是进入默认情况。

什么是错误 13？

** 我创建了具有权限的信号量 (0666 | O_CREAT | O_EXCL)。

**编辑：**一切都从命令行工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:43:17.753

用PHP`exec("whoami");`判断用户，很有可能`www-data`。

这将使您知道 apache 正在尝试访问系统资源的用户。然后，您需要允许该用户访问这些资源。

该用户通常位于： `/etc/apache2/envvars`

# python - 基于用户字符串循环文件中的标记

> ID：16180079
> 
> 赞同：0
> 
> 时间：2013-04-23T22:13:18.683
> 
> 标签：python

我有以下用于检查版权标记的代码。我目前只检查 userstring1。现在我想检查多个用户字符串。修改以下代码的最佳方法是什么：

*   检查所有正在检查的文件是否有所有用户字符串
*   打印匹配任何字符串的每个文件的文件名

    ```
    import os
    import sys
    import fnmatch

    userstring1="Copyright (c) 2012 Company, Inc\nAll Rights Reserved.\nCompany Confidential and Proprietary."
    userstring2="Copyright (c) 2011-2013 Company, Inc\nAll Rights Reserved.\nCompany Confidential and Proprietary."
    #print len(sys.argv)
    #print sys.argv[1]
    if len(sys.argv) < 2:
        sys.exit('Usage: check_copyright.py <build directory>')
    '''
    for r,d,f in os.walk(sys.argv[1]):
        for files in f:
            userlines = userstring.split('\n') # Separate the string into lines
            with open(os.path.join(r, files), "r") as file:
    '''
    for path,dirs,files in os.walk(sys.argv[1]):
        for fname in files:
            userlines = userstring1.split('\n') # Separate the string into lines 
            # Test the filename for particular pattern matches.
            for pat in ['*.cpp','*.c','*.h']:
                if fnmatch.fnmatch(fname,pat):
                    fullname = os.path.join(path,fname)
                    with open(fullname) as file:
                        match = 0
                        for line in file:
                            if userlines[match] in line: # Check if the line at index `m` is in the user lines
                                match += 1 # Next time check the following line
                            elif match > 0: # If there was no match, reset the counter
                                match = 0
                            if match >= len(userlines): # If 3 consecutive lines match, then you found a match
                                break
                        if match == len(userlines): # print if you found a match
                            print "MATCH"
                            print match
                            print "LENGTH userlines"
                            print len(userlines)
                        print fullname 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:22:19.673

我还没有测试过，但我所做的只是把你的代码放在一个函数中，然后循环每个用户名。

```
import os
import sys
import fnmatch

if len(sys.argv) < 2:
    sys.exit('Usage: check_copyright.py <build directory>')

userstring1="Copyright (c) 2012 Company, Inc\nAll Rights Reserved.\nCompany Confidential and Proprietary."
userstring2="Copyright (c) 2011-2013 Company, Inc\nAll Rights Reserved.\nCompany Confidential and Proprietary."

for path,dirs,files in os.walk(sys.argv[1]):
    for fname in files:
        for userstring in [userstring1, userstring2]:
            test(userstring, path, dirs, fname)

def test(userstring, path, dirs, fname):
    userlines = userstring.split('\n')
    for pat in ['*.cpp','*.c','*.h']:
        if fnmatch.fnmatch(fname,pat):
            fullname = os.path.join(path,fname)
            with open(fullname) as file:
                match = 0
                for line in file:
                    if userlines[match] in line: # Check if the line at index `m` is in the user lines
                        match += 1 # Next time check the following line
                    elif match > 0: # If there was no match, reset the counter
                        match = 0
                    if match >= len(userlines): # If 3 consecutive lines match, then you found a match
                        break
                if match == len(userlines): # print if you found a match
                    print "MATCH"
                    print match
                    print "LENGTH userlines"
                    print len(userlines)
                    print fullname 
```

# git - 我们如何在同一个地方对两个不同的 git 存储库进行版本控制？

> ID：16180085
> 
> 赞同：0
> 
> 时间：2013-04-23T22:14:08.280
> 
> 标签：git, version-control, repository, versioning

我们如何在同一个地方对两个不同的 git 存储库进行版本控制？

例如，如果我们有一个文件夹`twoRepositories`并且在其中我们有两个文件`common.txt`和`root.txt`（由 root 用户拥有）。我们如何使用普通用户（并使用名为，例如，远程`common`）和第二个文件（并使用另一个名为，例如，`root`）独立地对第一个文件进行版本控制？

换句话说，当我们`git push`与普通用户一起使用时，common.txt(only) 文件被发送到`common`远程，当`git push`以 root 身份使用时，`root.txt`敌人发送到`root`远程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:39:04.883

如何创建两个不同的目录 - 每个目录都有自己的 git 存储库并将相关文件符号链接到每个目录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:22:04.407

您也许可以使用两个不同的分支 - 每个分支中只有一个文件？

# ruby - 运行“requirements_smf_libs_install automake libtool”的 RVM 错误，

> ID：16180088
> 
> 赞同：1
> 
> 时间：2013-04-23T22:14:32.920
> 
> 标签：ruby, macos, rvm, automake

我正在尝试添加一个安装`ruby-1.9.3-p392`，并且在安装过程中安装所需的包 automake、libtool 时，我得到以下信息：

```
Error running 'requirements_smf_libs_install automake libtool',
please read /usr/local/rvm/log/ruby-1.9.3-p392/1366754296_package_install_automake_libtool.log 
```

日志文件如下所示：

```
[2013-04-23 15:42:42] requirements_smf_libs_install
  [ ] automake 1.13.1 ~ dependencies... 

  [[32m✔[0m] automake 1.13.1 ~ dependencies   
  [ ] automake 1.13.1 ~ fetch... 

  [[32m✔[0m] automake 1.13.1 ~ fetch   
  [ ] automake 1.13.1 ~ patch... 

  [[32m✔[0m] automake 1.13.1 ~ patch   
  [ ] automake 1.13.1 ~ preconfigure... configure.ac:24: warning: macro `AM_SILENT_RULES' not found in library
configure.ac:372: warning: macro `AM_SUBST_NOTMAKE' not found in library
configure.ac:24: error: possibly undefined macro: AM_SILENT_RULES
      If this token and others are legitimate, please use m4_pattern_allow.
      See the Autoconf documentation.
configure.ac:377: error: possibly undefined macro: AM_SUBST_NOTMAKE
autoreconf: /opt/sm/pkg/versions/autoconf/2.69/bin/autoconf failed with exit status: 1

  [[32m✔[0m] automake 1.13.1 ~ preconfigure   
  [ ] automake 1.13.1 ~ configure... ERROR(__sm.package.error): 
Configuration of automake 1.13.1 failed.

Tail of configure.log:
./configure: line 2006: syntax error near unexpected token `yes'
./configure: line 2006: `AM_SILENT_RULES(yes)' 
```

我在 Mac OSX Lion 上，安装了 HomeBrew 并 brew doctor clean。最奇怪的是 automake 和 libtool 已经通过 Brew 安装了。看起来这是 RVM 遇到的一个问题，但据说已修复：[https](https://github.com/wayneeseguin/rvm/issues/1803) ://github.com/wayneeseguin/rvm/issues/1803 ，也许不适用于这个特定的 ruby​​ gem？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:19:44.520

解决了这个问题，我刚刚从[http://www.railsinstaller.org/](http://www.railsinstaller.org/)上的包重新安装，它自动安装了 1.9.3-p392

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T11:30:37.770

看来实际问题是`AM_SILENT_RULES`您使用的 autoconf 上没有定义宏。你可以通过添加来解决这个问题

```
m4_ifndef([AM_SILENT_RULES], [m4_define([AM_SILENT_RULES],[])]) 
```

就在使用宏的行之前`configure.ac`

# java - WEB-INF 文件夹中的 web.xml 欢迎文件

> ID：16180090
> 
> 赞同：3
> 
> 时间：2013-04-23T22:14:36.503
> 
> 标签：java, tomcat, servlets, web.xml

我在尝试从 WEB-INF 文件夹加载欢迎文件时收到 resquested resource is not available 错误，在我的 web.xml 中它看起来像这样：

```
<welcome-file-list>
    <welcome-file>WEB-INF/html/index.html</welcome-file>
</welcome-file-list> 
```

换句话说，html文件位于名为“html”的文件夹中的WEB-INF目录中......

那么我该如何正确地做到这一点呢？所有这些路径都太复杂了，我的意思是有某种路径指南或任何东西吗？因为我无法发展，因为当找不到某些东西时我会陷入这些事情，因为我写的路径的解释与我预期的不同......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T22:20:59.323

WEB-INF 目录中的文件不能直接访问。

见[网址](http://docs.oracle.com/cd/E13222_01/wls/docs61/webapp/basics.html)：

> 将私有文件放在根目录下的 WEB-INF 目录中。WEB-INF 下的所有文件都是私有的，不提供给客户端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T22:23:36.160

您不能直接访问 WEB-INF 文件夹下的文件。容器会在 WEB-INF/classes 中查找类，WEB-INF 下的 jsp 文件可以被其他 JSP 包含，但是任何浏览器在下面请求资源都会得到 404 响应。

编辑：关于你的疑问，如果你有一个标准的 Java EE webapp，你应该在根文件夹下面：

```
/-
 |
 |-META-INF/
 |-WEB-INF/
 |-custom1/
 |-custom2/ 
```

前两个是强制性的，但您可以创建额外的子文件夹（例如 customX）。我个人创建了一个自定义文件夹“资源”来分配 html、css 和 js 文件（在单独的子文件夹中）。如果我有不应该直接访问的特殊 JSP 文件（仅通过包含），我将它们放在 WEB-INF/.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-15T14:40:23.367

Web 浏览器无法直接访问 WEB-INF 文件夹，因为该文件夹用于保存应用程序内部的文件，即类和配置文件等。欢迎页面不应包含任何特定或私人信息，因此可以保存在与 WEB-INF 文件夹平行。所有静态 html 文件都可以放置在与欢迎文件相同的层次结构中。为了更好地区分，我们可以创建子文件夹。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-23T22:19:03.627

我要告诉你我是如何拥有 Wellcome 文件的，我拥有这样的文件

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

并且“索引”在“web”文件夹中，也许您应该只使用名称设置wellcome文件。

我希望这个对你有帮助；）

# sql - 将文本字段溢出到多行

> ID：16180093
> 
> 赞同：1
> 
> 时间：2013-04-23T22:15:06.940
> 
> 标签：sql, sql-server-2008, tsql

我对处理超出任意限制的文本字段的语法有疑问。

我有下表和数据：

```
CREATE TABLE [dbo].[Notes](
[Note] [varchar](max) NULL,
[Code1] [varchar](50) NULL,
[Code2] [varchar](50) NULL
) 

INSERT INTO Notes (Code1,Code2,Note)

VALUES
('JAD','XFR','Lorem ipsum dolor sit amet'),
('JAD','X400','Lorem ipsum '),
('JAD','X700','Lorem ') 
```

我的任务是进行一个查询，将返回表中的所有数据，但接收系统对 notes 字段有字符限制（实际系统只接受 255 个字符。为简洁起见，我在这里缩短了它）。

为了处理该限制，我需要的是当该注释字段超出限制时，查询应在包含注释文本下一部分的输出中添加另一行，但该行的前两个字段应重复前两个代码.

下面的查询完成了任务，但它非常难看并且有局限性。我希望有一个更优雅的解决方案来解决这个公认的可怕问题。

此外，接收系统是客户端系统。我不知道为什么它想要以这种灵魂极其愚蠢的格式进行数据转储，所以请不要问。

```
 DECLARE @TEMP TABLE (
    RowNumber INT,
    Depth INT,
    Code1 VARCHAR(50),
    Code2 VARCHAR(50),
    Note VARCHAR(MAX)    
)

INSERT INTO @TEMP
SELECT
row_number() OVER (ORDER BY Code1),
1,
Code1,
Code2,
left(Note,(5 - len(Code1) + len(Code2)))
FROM Notes

UNION ALL

SELECT
row_number() OVER (ORDER BY Code1),
2,
Code1,
Code2,
substring(Note,(5 - len(Code1) + len(Code2))+1,5)
FROM Notes

UNION ALL

SELECT
row_number() OVER (ORDER BY Code1),
3,
Code1,
Code2,
substring(Note,(5 - len(Code1) + len(Code2))+6,5)
FROM Notes

UNION ALL

SELECT
row_number() OVER (ORDER BY Code1),
4,
Code1,
Code2,
substring(Note,(5 - len(Code1) + len(Code2))+11,5)
FROM Notes

UNION ALL

SELECT
row_number() OVER (ORDER BY Code1),
5,
Code1,
Code2,
substring(Note,(5 - len(Code1) + len(Code2))+16,5)
FROM Notes

Select
Code1,
Code2,
Note
FROM @TEMP AS T
WHERE NOTE <> ''
ORDER BY RowNumber, Depth 
```

输出应如下所示：

```
Code1   Code2   Note
JAD     XFR     Lorem
JAD     XFR      ipsu
JAD     XFR     m dol
JAD     XFR     or si
JAD     XFR     t ame
JAD     X400    Lorem 
JAD     X400    ipsum
JAD     X700    Lorem 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:39:08.663

这个怎么样：

```
WITH Note1(note, code1, code2, start, orig) AS
(
    SELECT SUBSTRING(Note, 1, 5), Code1, Code2, 1, Note
    FROM Notes

    UNION ALL

    SELECT SUBSTRING(orig, start + 5, 5), Code1, Code2, start + 5, orig
    FROM Note1
    WHERE LEN(SUBSTRING(orig, start + 5, 5)) > 0
)
SELECT code1, code2, note FROM Note1
ORDER BY Note1.code2, Note1.start 
```

我承认，我的名字很烂:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:59:53.400

首先将所有数据放入临时表中。然后在您的真实表中执行一系列插入并更新临时表。

确保真实表具有适当的主键和外键，以便之后可以重新组合文本。

# jquery - 在 wordpress 中隐藏 Safari 浏览器的 div 并在页面加载时显示另一个 div

> ID：16180096
> 
> 赞同：0
> 
> 时间：2013-04-23T22:15:27.707
> 
> 标签：jquery, wordpress, safari, show-hide, browser-detection

我有 2 个画廊，一个是来自 microsoft 的 deepzoom 组合，另一个是从数据库调用画廊的 wordpress 短代码。每个画廊都在自己的 div 中。我只需要在 safari 中显示 safari 图库并隐藏其他 div。然后在其他浏览器上我需要隐藏 safari div 并显示 deepzoom 画廊。

我使用的代码如下：

查询：`

```
<script>
    var BrowserDetect = {
    init: function () {
        this.browser = this.searchString(this.dataBrowser) || "An unknown browser";
        this.version = this.searchVersion(navigator.userAgent)
            || this.searchVersion(navigator.appVersion)
            || "an unknown version";
        this.OS = this.searchString(this.dataOS) || "an unknown OS";
    },
    searchString: function (data) {
        for (var i=0;i<data.length;i++)    {
            var dataString = data[i].string;
            var dataProp = data[i].prop;
            this.versionSearchString = data[i].versionSearch || data[i].identity;
            if (dataString) {
                if (dataString.indexOf(data[i].subString) != -1)
                    return data[i].identity;
            }
            else if (dataProp)
                return data[i].identity;
        }
    },
    searchVersion: function (dataString) {
        var index = dataString.indexOf(this.versionSearchString);
        if (index == -1) return;
        return parseFloat(dataString.substring(index+this.versionSearchString.length+1));
    },
    dataBrowser: [
        {
            string: navigator.userAgent,
            subString: "Chrome",
            identity: "Chrome"
        },
        {     string: navigator.userAgent,
            subString: "OmniWeb",
            versionSearch: "OmniWeb/",
            identity: "OmniWeb"
        },
        {
            string: navigator.vendor,
            subString: "Apple",
            identity: "Safari",
            versionSearch: "Version"
        },
        {
            prop: window.opera,
            identity: "Opera",
            versionSearch: "Version"
        },
        {
            string: navigator.vendor,
            subString: "iCab",
            identity: "iCab"
        },
        {
            string: navigator.vendor,
            subString: "KDE",
            identity: "Konqueror"
        },
        {
            string: navigator.userAgent,
            subString: "Firefox",
            identity: "Firefox"
        },
        {
            string: navigator.vendor,
            subString: "Camino",
            identity: "Camino"
        },
        {        // for newer Netscapes (6+)
            string: navigator.userAgent,
            subString: "Netscape",
            identity: "Netscape"
        },
        {
            string: navigator.userAgent,
            subString: "MSIE",
            identity: "Explorer",
            versionSearch: "MSIE"
        },
        {
            string: navigator.userAgent,
            subString: "Gecko",
            identity: "Mozilla",
            versionSearch: "rv"
        },
        {         // for older Netscapes (4-)
            string: navigator.userAgent,
            subString: "Mozilla",
            identity: "Netscape",
            versionSearch: "Mozilla"
        }
    ],
    dataOS : [
        {
            string: navigator.platform,
            subString: "Win",
            identity: "Windows"
        },
        {
            string: navigator.platform,
            subString: "Mac",
            identity: "Mac"
        },
        {
               string: navigator.userAgent,
               subString: "iPhone",
               identity: "iPhone/iPod"
        },
        {
            string: navigator.platform,
            subString: "Linux",
            identity: "Linux"
        }
    ]

};
BrowserDetect.init();
switch(BrowserDetect.browser) {
if( $.browser.safari ) {
          $(".safari_galery").show();
          $(".default_galery").hide();}
          break;
     default:
          $(".safari_galery").hide();
          $(".default_galery").show();
}
</script>

<div class="safari_galery">[slideshow id=3]</div>
<div class="default_galery">[iframe src="http://link to the iframe" id="deepzoom" name="deepzoom" width="100%" height="700px" scrolling="no"]</div> 
```

这在 wordpress 中不起作用，我很绝望，因为我一直很难弄清楚这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T22:19:07.160

尝试这个。

```
if ( BrowserDetect.browser == 'Safari' ) {
      $(".safari_galery").show();
      $(".default_galery").hide();
} else {
      $(".safari_galery").hide();
      $(".default_galery").show();
} 
```

# javascript - 带有 DOM 的 JavaScript 函数的意外返回

> ID：16180097
> 
> 赞同：-3
> 
> 时间：2013-04-23T22:15:33.807
> 
> 标签：javascript, function, dom, return

我正在设计一个 JavaScript 函数**checkForm()**，用于检查表单的至少一半答案是否已完成。如果满足条件，则返回“true”，否则返回警报消息，否则返回“false”。答案在输入文本字段中给出，其内容不能是空字符串才能被视为已回答。

为了进行检查，函数**checkForm()**调用另外两个函数： totalNumberOfQuestions( **)**和**totalCompletedAnswers()**，如下所示：

```
 function totalNumberOfQuestions() /* Returns the total number of questions in the form */
            {   total
                    numberOfQuestions = 0;

                    i = 1;

                    do
                    {
                            nameOfAnswer = 'answer_' + i;

                            if(document.getElementsByName(nameOfAnswer)[0] != null)
                            {
                                    totalnumberOfQuestions ++;
                            }
                    i++;
                    }
                    while (document.getElementsByName(nameOfAnswer)[0] != null);

            return totalnumberOfQuestions;
            }

            function totalCompletedAnswers() /* Returns the total number of completed answers in the form */
            {   
                    numberOfCompletedAnswers = 0;

                    i = 1;

                    for(i = 1; i<= totalNumberOfQuestions(); i++)
                    {

                            nameOfAnswer = 'answer_' + i;

                            if ( form[nameOfAnswer].value != '')
                            {
                                    numberOfCompletedAnswers ++;
                            }
                    }

            return numberOfCompletedAnswers;
            }

            function checkForm()  
            {

            if ( totalCompletedAnswers() < 7 )
                    {
                            alert("Please answer at least half of the questions.");
                            return false;
                    }

            return true;
            } 
```

但是，令人惊讶的是，函数**checkForm()**在这种形式下不能正常工作，即使完成的答案数量少于答案总数的一半，它也会返回 true。**但是，如果根据常量值检查函数totalCompletedAnswers()**，则该函数可以正常工作，例如：

```
 function checkForm()  
            {

            if ( totalCompletedAnswers() < 7 )
                    {
                            alert("Please answer at least half of the questions.");
                            return false;
                    }

            return true;                        
            } 
```

这意味着在**checkForm()**函数的主体中使用函数**totalNumberOfQuestions()** 会“导入”一些不需要的返回值。即使我单独调用前者（*x= totalNumberOfQuestions()*然后重写条件：*if ( totalCompletedAnswers() < x )* ）也会发生这种情况。有谁知道在调用函数时如何避免这种不需​​要的返回值？

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:44:13.297

在`totalComletedAnswers`你有片段：

```
if(numberOfCompletedAnswers  < totalNumberOfQuestions() )
{
      alert("Please answer at least half of the questions.");
      return false;
} 
```

所以如果所有答案都没有完成**而不是**`totalCompletedAnswers`回答的问题数量，那么将返回 false 。

 **在`checkForm`以下将评估为真：`false < 7`

见：http: [//jsfiddle.net/5mURZ/](http://jsfiddle.net/5mURZ/)

看看这两篇文章，了解更多关于 javascript 中真实性/虚假性的信息：

*   [http://11heavens.com/falsy-and-truthy-in-javascript](http://11heavens.com/falsy-and-truthy-in-javascript)
*   [http://www.sitepoint.com/javascript-truthy-falsy/](http://www.sitepoint.com/javascript-truthy-falsy/)

**更新**

仔细检查后，您会遇到范围界定问题。你所有的变量都有一个全局范围。这将导致变量出现最多的问题`i`。`var`使用关键字声明变量会将变量的范围限制为函数。**javascript 中的最佳实践是使用关键字对所有**变量进行 devare ，`var`以显式声明变量的范围。

工作小提琴：http: [//jsfiddle.net/Dr5Hx/1/](http://jsfiddle.net/Dr5Hx/1/)

关于范围界定的文章：http: [//coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)

**更新 2**

对于完全不同的方法，试试[jQuery](http://jquery.com/)的魔力。这种方法依赖于将答案包装在某种容器中。在这种情况下，一个`div`. 这是必需的，因为复选框和单选按钮等元素将是多个元素，但每个集合只应计算一次。

```
//The selector below finds DOM elements  with a name beginning with "answer"
var answers = $("[name^='answer']"); //'Cache' answers
var answerDivs = $("div").has("[name^='answer']"); //'Cache' answer divs
var totalAnswers =  answerDivs.length; //'Cache' number of answers

$("#checkIt").click(function(){ //Add a click listener to the button
    var numAnswered = $(answerDivs).filter(function(){ //Filter our answer divs to answered question
    var answer = $(this).find("[name^='answer']");  //Get the answer element(s) in the div
    var textCheck = $(answer).is("input:text") && $(answer).val() != ''; //Check For Text Value
    var selCheck = $(answer).is("select") && $(answer).val() != ''; //Check for selected 
    var radioCheck = $(answer).is(":checked"); // Check for Checked, WOrks for radio & checkbox
    //console.log($(answer).attr("name") + "  " + textCheck + " " + selCheck + " " + radioCheck)
    return (textCheck || selCheck || radioCheck); //End of the filter
    }).length;

    if(numAnswered < (totalAnswers/2))
    {
        alert("Please answer atleast half the questions");
        return false;
    }

    alert("We're good to go");
    return true;

}); 
```

只需确保将上述内容包裹在[`$(document).ready();`](http://learn.jquery.com/using-jquery-core/document-ready/)

[http://jsfiddle.net/Dr5Hx/3/](http://jsfiddle.net/Dr5Hx/3/)******

# flash - 动作脚本 2 仅最后一个功能起作用

> ID：16180099
> 
> 赞同：0
> 
> 时间：2013-04-23T22:15:37.593
> 
> 标签：flash, function, actionscript-2

我有这个问题，只有最后一个函数有效，而所有前面的函数都被 flash 忽略了。由于所有的函数都是用同样的方式写的，所以我找不到问题所在。

此代码只是一个用于更改场景类型的按钮，我按下某个键并更改它，但在这种情况下，只有我选择的最后一个键有效。

任何提示？

```
var gomas:Object = new Object();
var chocolate:Object = new Object();
var tarte:Object = new Object();
var peixe:Object = new Object();
var lama:Object = new Object();

gomas.onKeyDown = function() 
    {
        if (Key.getCode() == "51","54","222","87","73","71","86"); 
            {
                   loadMovieNum("01 Gomas.swf",0);
            }
    };
Key.addListener(gomas);

chocolate.onKeyDown = function() 
    {
        if (Key.getCode() == "49","56","69","71","76","67","78");
            {
                   loadMovieNum("02 Chocolate.swf",0);
            }
    };
Key.addListener(chocolate);

tarte.onKeyDown = function() 
    {
        if (Key.getCode() == "52","48","82","75","66","85");
            {
                   loadMovieNum("03 Tarte.swf",0);
            }
    };
Key.addListener(tarte);

peixe.onKeyDown = function() 
    {
        if (Key.getCode() == "50","55","84","79","83","72","77"); 
            {
                   loadMovieNum("04 Peixe.swf",0);
            }
    };
Key.addListener(peixe);

lama.onKeyDown = function() 
    {
        if (Key.getCode() == "53","57","81","89","80","68","74"); 
            {
                   loadMovieNum("05 Lama.swf",0);
            }
    };
Key.addListener(lama); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:22:47.957

看起来问题出在您的 if 语句中。运行您的代码，所有方法都会在按下某个键时按顺序调用。由于它们都将 swf 加载到同一级别，因此它们会覆盖导致最后一个被加载。

我不认为你可以这样输入逗号，它似乎被视为一种不同的条件。这总是找出“是”（我的猜测是由于“54”是“真实的”）：

```
var temp:String = "1";
if(temp == "0", "54"){
    trace("yes");
} 
```

我建议使用 switch 语句，因为您只想检查与单个值匹配的键码。

# r - R data.table：当键值包含特殊字符（ü，ö，ä）时合并失败

> ID：16180103
> 
> 赞同：4
> 
> 时间：2013-04-23T22:15:48.710
> 
> 标签：r, special-characters, data.table

我正在尝试合并两个数据表。合并适用于`merge.data.frame`，但不适用于`merge.data.table`. 可能与我使用的特殊字符有关吗？我之前通过几个处理步骤获得了`data.tables DT1`和。当我手动输入数据时，`test2`不会出现此问题：`test2``DT1`

```
> test2 
               lfm_id lfm_plays
1: Herbert Grönemeyer       115
> DT1
               lfm_id value
1: Herbert Grönemeyer     5
> class(test2) # check objects
[1] "data.table" "data.frame"
> class(DT1)
[1] "data.table" "data.frame"
> class(test2$lfm_id) # check column types
[1] "character"
> class(DT1$lfm_id)
[1] "character"
> merge(DT1, test2, by='lfm_id') 
Empty data.table (0 rows) of 3 cols: lfm_id,value,lfm_plays
# merge failed!

# trying with the 'old' data.frame merge:
> merge.data.frame(DT1, test2, by='lfm_id')
              lfm_id value lfm_plays
1 Herbert Grönemeyer     5       115
# works!

# the keys match, too:
> DT1$lfm_id==test2$lfm_id
[1] TRUE 
```

我使用`R 2.15`和`data.table v. 1.8.8`。这两个对象（test2 和 DT1）可供[下载](https://dl.dropboxusercontent.com/u/4900810/stackoverflow_data.RData)。

# javascript - 从 Google 地图方向 V3 获取折线

> ID：16180104
> 
> 赞同：22
> 
> 时间：2013-04-23T22:15:58.477
> 
> 标签：javascript, google-maps-api-3

在获得路线后，我试图在谷歌地图上获得一条折线。我想使用[v3_epoly](http://www.geocodezip.com/scripts/v3_epoly.js)沿折线放置标记。

我找到[了这篇](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/WwrkpCxE5fw)文章，它有效，但我发现它并不完全准确。在图像中，谷歌方向是浅蓝色，折线是深蓝色：

![在此处输入图像描述](https://i.stack.imgur.com/RqKB6.png)

你可以看到它非常不准确。

这是代码：

```
directions_service.route(req, function(response, status) {
  if (status == google.maps.DirectionsStatus.OK) {
    path = response.routes[0].overview_path;
    $(path).each(function(index, item) {
      route.getPath().push(item);
      bounds.extend(item);
    });
    route.setMap(map);
    map.fitBounds(bounds);
    directions_display.setDirections(response);
  }
}); 
```

任何人都知道如何提高这种准确性或以另一种方式获得折线？

编辑：

我想添加让它工作的代码：

```
legs = response.routes[0].legs;
$(legs).each(function(index, item) {
  steps = item.steps;
  $(steps).each(function(index, item) {
    path = item.path;
    $(path).each(function(index, item) {
      route.getPath().push(item);
      counter++;
      bounds.extend(item);
    });
  });
}); 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-23T23:38:09.207

不要对折线使用overview_path，它不包括所有点，从所有腿中抓取点并使用它们来创建折线。

```
var polyline = new google.maps.Polyline({
  path: [],
  strokeColor: '#FF0000',
  strokeWeight: 3
});
var bounds = new google.maps.LatLngBounds();

var legs = response.routes[0].legs;
for (i=0;i<legs.length;i++) {
  var steps = legs[i].steps;
  for (j=0;j<steps.length;j++) {
    var nextSegment = steps[j].path;
    for (k=0;k<nextSegment.length;k++) {
      polyline.getPath().push(nextSegment[k]);
      bounds.extend(nextSegment[k]);
    }
  }
}

polyline.setMap(map);
map.fitBounds(bounds); 
```

[例子](http://www.geocodezip.com/v3_directions_custom_iconsC.html)

**代码片段：**

```
function initialize() {
  var map = new google.maps.Map(
    document.getElementById("map_canvas"), {
      center: new google.maps.LatLng(51.276092, 1.028938),
      zoom: 13,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
  var directionsService = new google.maps.DirectionsService();
  var directionsDisplay = new google.maps.DirectionsRenderer({
    map: map,
    preserveViewport: true
  });
  directionsService.route({
    origin: new google.maps.LatLng(51.269776, 1.061326),
    destination: new google.maps.LatLng(51.30118, 0.926486),
    waypoints: [{
      stopover: false,
      location: new google.maps.LatLng(51.263439, 1.03489)
    }],
    travelMode: google.maps.TravelMode.DRIVING
  }, function(response, status) {
    if (status === google.maps.DirectionsStatus.OK) {
      // directionsDisplay.setDirections(response);
      var polyline = new google.maps.Polyline({
        path: [],
        strokeColor: '#0000FF',
        strokeWeight: 3
      });
      var bounds = new google.maps.LatLngBounds();

      var legs = response.routes[0].legs;
      for (i = 0; i < legs.length; i++) {
        var steps = legs[i].steps;
        for (j = 0; j < steps.length; j++) {
          var nextSegment = steps[j].path;
          for (k = 0; k < nextSegment.length; k++) {
            polyline.getPath().push(nextSegment[k]);
            bounds.extend(nextSegment[k]);
          }
        }
      }

      polyline.setMap(map);
    } else {
      window.alert('Directions request failed due to ' + status);
    }
  });
}
google.maps.event.addDomListener(window, "load", initialize);
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map_canvas"></div>
```

# css - 带 CSS 的箭头框

> ID：16180107
> 
> 赞同：24
> 
> 时间：2013-04-23T22:16:08.163
> 
> 标签：css, css-shapes

如何在 CSS 中制作这个盒子？

我看过一些教程，教如何创建带箭头的框，但是，就我而言，这些教程都不适合。

![盒子](https://i.stack.imgur.com/uaRwD.png)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-23T23:45:03.447

我用周围的 1px 边框创建了你的元素。我正在使用一个`<div>`元素并利用[`:before`和`:after`伪元素](http://css-tricks.com/pseudo-element-roundup/)（[browser-support](http://caniuse.com/#feat=css-gencontent)）。主矩形有一个规则的 1px 边框，但三角形元素本质上是 2 个三角形，一个比另一个暗。

较浅的三角形位于较暗的三角形的顶部，具有隐藏它的效果，并且稍微向左移动以显示下面的较暗的三角形。产生的错觉是三角形本身的 1px 深色边框。

这是一个提出类似问题的问题：

> [如何使用纯 CSS 创建“工具提示尾部”？](https://stackoverflow.com/questions/5623072/how-can-i-create-a-tooltip-tail-using-pure-css)

其中一个答案实际上很好地解释了如何实现这种三角形效果：

> [https://stackoverflow.com/a/5623150/196921](https://stackoverflow.com/a/5623150/196921)

此外，对于您可以用边框做的所有花哨的事情，这是一个很好的参考（[感谢 PSCoder](https://stackoverflow.com/a/16181002/196921)）：

*   [http://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)

...这是一个甜蜜的 CSS 生成器（[感谢 David Taiaroa](https://stackoverflow.com/a/16180973/196921)）：

*   [http://cssarrowplease.com/](http://cssarrowplease.com/)

* * *

无论如何，这是相应的代码：

```
 #arrow {
      width: 128px;
      height: 100px;
      background-color: #ccc;
      border: 1px solid #999;
      position: relative;
    }
    #arrow:after {
      content: '';
      position: absolute;
      top: 0px;
      left: 128px;
      width: 0;
      height: 0;
      border: 50px solid transparent;
      border-left: 12px solid #ccc;
    }
    #arrow:before {
      content: '';
      position: absolute;
      top: 0px;
      left: 129px;
      width: 0;
      height: 0;
      border: 50px solid transparent;
      border-left: 12px solid #999;
    }
```

```
<div id="arrow"></div>
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T23:58:21.550

[这](http://jsfiddle.net/EHEpT/)是我创建的解决方案

有两种简单的方法可以做到这一点。第一种效率较低的方法是使用 2 个元素。我利用了`:after`伪元素。我使用`position:absolute`了`:after`2 个原因。

1.  您可以将元素放置在需要的位置
2.  它可以防止三角形的末端被切断

创建三角形的关键是使用`border`属性。您有 2 个颜色为`transparent`set 的边框。这两个边界与您要走的方向相反。因此，如果您想制作直角三角形，请使用`top`and `bottom`。赋予箭头形状的是最后一个边框。它也朝着相反的方向发展。因此，对于直角三角形，您将使用`border-left`颜色。为了使它成为合适的高度，你必须做你想要放置它的盒子高度的一半

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-29T13:02:08.167

`SVG`是创建此类形状的推荐方法。它提供了简单性和可扩展性。

我们可以使用`SVG`'s`polygon`或`path`element 来创建像上面这样的形状，并用一些纯色、渐变或图案来描边/填充它。

只有一个属性`points`用于定义`polygon`元素中的形状。该属性由点列表组成。每个点必须有 2 个数字，一个 x 坐标和一个 ay 坐标。从最后一点到起点自动绘制一条直线以闭合形状。

以下是创建此形状的必要代码：

```
<polygon points="10,12 265,10 285,93 265,184 10,184"
         stroke="#333"
         stroke-width="2"
         fill="#eee" /> 
```

下面是对上述代码的简要说明：

*   `points`属性定义形状的结构。
*   `stroke`属性定义轮廓/边框的颜色。
*   `stroke-width`定义轮廓/边框的厚度。
*   `fill`属性定义要填充的内部形状的颜色。

**输出图像：**

[![多边形形状](https://i.stack.imgur.com/4KoSK.png)](https://i.stack.imgur.com/4KoSK.png)

**工作示例：**

```
body {
  background: #b6cdc7  url("https://www.hdwallpapers.net/previews/hot-air-balloon-over-the-mountain-987.jpg") no-repeat;
  background-position: center bottom;
  background-size: cover;
  margin: 0;
}

.box {
  justify-content: center;
  align-items: center;
  height: 100vh;
  display: flex;
}
```

```
<div class="box">
  <svg width="300" height="200" viewBox="0 0 300 200">
    <polygon points="10,12 265,10 285,93 265,184 10,184" stroke="#333" stroke-width="2" fill="#eee" />
  </svg>
</div>
```

这个形状也可以用渐变或图案填充。

[![用渐变填充的多边形形状](https://i.stack.imgur.com/B0ubZ.png)](https://i.stack.imgur.com/B0ubZ.png)

**工作示例：**

```
body {
  background: #b6cdc7 url("https://www.hdwallpapers.net/previews/hot-air-balloon-over-the-mountain-987.jpg") no-repeat;
  background-position: center bottom;
  background-size: cover;
  margin: 0;
}

.box {
  justify-content: center;
  align-items: center;
  height: 100vh;
  display: flex;
}
```

```
<div class="box">
  <svg width="300" height="200" viewBox="0 0 300 200">
    <defs>
      <linearGradient id="grad">
        <stop offset="0" stop-color="#11a798" />
        <stop offset="1" stop-color="#23645d" />
      </linearGradient>
    </defs>
    <polygon id="shape" points="10,12 265,10 285,93 265,184 10,184" stroke="#333" stroke-width="2" fill="url(#grad)" />
  </svg>
</div>
```

我们可以使用`SVG`的过滤器在这个形状上应用阴影。

[![具有渐变和阴影的多边形形状](https://i.stack.imgur.com/4HzDL.png)](https://i.stack.imgur.com/4HzDL.png)

**工作示例：**

```
body {
  background: #b6cdc7 url("https://www.hdwallpapers.net/previews/hot-air-balloon-over-the-mountain-987.jpg") no-repeat;
  background-position: center bottom;
  background-size: cover;
  margin: 0;
}

.box {
  justify-content: center;
  align-items: center;
  height: 100vh;
  display: flex;
}
```

```
<div class="box">
  <svg width="300" height="200" viewBox="0 0 300 200">
    <defs>
      <linearGradient id="grad">
        <stop offset="0" stop-color="#11a798" />
        <stop offset="1" stop-color="#23645d" />
      </linearGradient>
      <filter id="shadow">
        <feGaussianBlur in="SourceAlpha" stdDeviation="4" />
        <feMerge>
          <feMergeNode />
          <feMergeNode in="SourceGraphic" />
        </feMerge>
      </filter>
    </defs>
    <polygon id="shape" points="10,12 265,10 285,93 265,184 10,184" stroke="#333" stroke-width="2" fill="url(#grad)" filter="url(#shadow)" />
  </svg>
</div>
```

# spring - 使用具有相同作业名的 REST 在 Spring Batch Admin 中运行多个作业

> ID：16180108
> 
> 赞同：0
> 
> 时间：2013-04-23T22:16:08.993
> 
> 标签：spring, spring-batch-admin

我正在使用 Spring Batch Admin 为我们的系统运行批处理作业。我们必须多次运行这些作业。我正在使用spring批处理管理的其余界面。我使用 Spring RestTemplate 开始了一份新工作。

```
RestTemplate tpl = new RestTemplate();
tpl.postForLocation(Constants.SPRING_BATCH_ADMIN_URL + "/jobs/myBatchJob; 
```

这适用于启动第一个作业，但在后续作业中，请求不会启动该作业的新实例。在作业配置文件中，我定义了一个 jobParmatersIncrementer

```
<job id="myBatchJob" xmlns="http://www.springframework.org/schema/batch"
    restartable="true" incrementer="jobParametersIncrementer">
    <bean id="jobParametersIncrementer"
        class="org.springframework.batch.core.launch.support.RunIdIncrementer" /> 
```

我尝试将我的 postForLocation 更改为

```
List<JobInstance> jobInstances = jobExplorer.getJobInstances("myBatchJob", 0, 30);
JobParameters jobParameters = jobInstances.get(0).getJobParameters();
RunIdIncrementer runIdIncrementer = new RunIdIncrementer();
JobParameters jobParameters = runIdIncrementer.getNext(jobParameters); 
RestTemplate tpl = new RestTemplate();
tpl.postForLocation(Constants.SPRING_BATCH_ADMIN_URL + 
    "/jobs/myBatchJob?launch=Launch&{parameters}",
    "runid",
    jobParameters.toString()); 
```

通过单击启动按钮，它可以从 Spring Batch 管理页面工作。这是在参数编辑框中

```
run.id(long)=1 
```

如何从另一个 Web 应用程序中多次运行 Spring Batch Admin 中的作业？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-08T10:12:30.023

您可以在请求正文中传递一个参数*jobParameter ，该参数携带您的元组*

```
jobParameters=run.id(long)=123 
```

并将其编码的 url 附加到 post 请求中。这是我的 jquery 解决方案。

```
$.post('<url>/jobs/myBatchJob', 'jobParameters=' + encodeURIComponent('run.id(long)=123')).done(function() {
   // do something
}); 
```

# node.js - 使用 socket.io 将文件从字符串发送到浏览器

> ID：16180112
> 
> 赞同：1
> 
> 时间：2013-04-23T22:16:20.660
> 
> 标签：node.js, socket.io, pdfkit

当用户单击前端的按钮时，我在 node.js 项目中使用 PDFKit 和 socket.io 来生成 pdf。如何从此处流式传输或以其他方式将生成的 pdf 发送给最终用户？我宁愿避免将文件保存到文件系统，如果可以的话，以后必须删除它……希望以某种方式流式传输它。

```
socket.on('customerRequestPDF', function(){              
    doc = new PDFDocument;        

    doc.text('Some text goes here', 100, 100);

    //I could do this but would rather avoid it
    doc.write('output.pdf');

    doc.output(function(string) {
        //ok I have the string.. now what?

    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:32:30.043

websocket 并不是真正适合传递 PDF 的机制。只需使用常规 HTTP 请求即可。

```
// assuming Express, but works similarly with the vanilla HTTP server
app.get('/pdf/:token/filename.pdf', function(req, res) {
    var doc = new PDFDocument();
    // ...

    doc.output(function(buf) { // as of PDFKit v0.2.1 -- see edit history for older versions
        res.writeHead(200, {
             'Content-Type': 'application/pdf',
             'Cache-Control': 'private',
             'Content-Length': buf.length
        });
        res.end(buf);
    });
}); 
```

现在警告一句：此 PDF 库已损坏。从 0.2.1 版开始，输出是正确的`Buffer`，但它在`binary`内部使用不推荐使用的字符串编码而不是`Buffer`s。（以前的版本为您提供了二进制编码的字符串。）来自[文档](http://nodejs.org/api/buffer.html#buffer_buffer)：

> `'binary'`- 一种仅使用每个字符的前 8 位将原始二进制数据编码为字符串的方法。这种编码方法已被弃用，应尽可能避免使用`Buffer`对象。此编码将在 Node.js 的未来版本中删除。

这意味着当节点删除二进制字符串编码时，库将停止工作。

# android - 获取令牌 DrEdit android 示例失败

> ID：16180113
> 
> 赞同：4
> 
> 时间：2013-04-23T22:16:25.120
> 
> 标签：android, google-drive-api

我正在尝试运行 drive sdk android sample [DrEdit](https://developers.google.com/drive/examples/android)，但出现异常：

```
04-23 16:49:19.642: E/DriveSyncAdapter(11914): Failed to get token
04-23 16:49:19.642: W/System.err(11914): com.google.android.gms.auth.UserRecoverableAuthException: NeedPermission
04-23 16:49:19.642: W/System.err(11914):    at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
04-23 16:49:19.642: W/System.err(11914):    at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
04-23 16:49:19.642: W/System.err(11914):    at com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential.getToken(GoogleAccountCredential.java:192)
04-23 16:49:19.642: W/System.err(11914):    at com.example.android.notepad.DriveSyncer.getDriveService(DriveSyncer.java:381)
04-23 16:49:19.642: W/System.err(11914):    at com.example.android.notepad.DriveSyncer.<init>(DriveSyncer.java:94)
04-23 16:49:19.642: W/System.err(11914):    at com.example.android.notepad.DriveSyncAdapter.onPerformSync(DriveSyncAdapter.java:32)
04-23 16:49:19.642: W/System.err(11914):    at android.content.AbstractThreadedSyncAdapter$SyncThread.run(AbstractThreadedSyncAdapter.java:254) 
```

上：

```
credential.getToken(); 
```

在 DriveSyncer.getDriveService() 中。

我已经在清单中更改了我的 ID，并设置了适当的权限：

```
 <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.USE_CREDENTIALS" />
    <uses-permission android:name="android.permission.READ_SYNC_STATS" />
    <uses-permission android:name="android.permission.READ_SYNC_SETTINGS" />
    <uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS" />
   ...
    <meta-data
      android:name="com.google.android.apps.drive.APP_ID"
      android:value="id=XXXXXXXX.apps.googleusercontent.com" /> 
```

并且还启用了驱动器 API 并设置了凭据。

在我的 Android 设备中，它会询问我的帐户但从不要求其他授权，它会显示通知但仅此而已。但是，快速入门示例运行良好。

我收到错误的代码是：

```
 private Drive getDriveService() {
        if (mService == null) {
          try {
            GoogleAccountCredential credential =
                GoogleAccountCredential.usingOAuth2(mContext, DriveScopes.DRIVE_FILE);
            credential.setSelectedAccountName(mAccount.name);
            // Trying to get a token right away to see if we are authorized
            credential.getToken();
            Log.e("MyTag", "Never Called");
            mService = new Drive.Builder(AndroidHttp.newCompatibleTransport(),
                    new GsonFactory(), credential).build();
                } catch (Exception e) {
                    Log.e(TAG, "Failed to get token");
                    // If the Exception is User Recoverable, we display a notification that will trigger the
                    // intent to fix the issue.
                    if (e instanceof UserRecoverableAuthException) {
                        UserRecoverableAuthException exception = (UserRecoverableAuthException) e;
(NotificationManager) mContext
                            .getSystemService(Context.NOTIFICATION_SERVICE);
                        Intent authorizationIntent = exception.getIntent();
                        authorizationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK).addFlags(
                            Intent.FLAG_FROM_BACKGROUND);
                        PendingIntent pendingIntent = PendingIntent.getActivity(mContext, 0,
                            authorizationIntent, 0);
                        Notification notification = new Notification.Builder(mContext)
                            .setSmallIcon(android.R.drawable.ic_dialog_alert)
                            .setTicker("Permission requested")
                            .setContentTitle("Permission requested")
                            .setContentText("for account " + mAccount.name)
                            .setContentIntent(pendingIntent).setAutoCancel(true).build();
                        notificationManager.notify(0, notification);
                    } else {
                        e.printStackTrace();
                    }
                }
        }
        return mService;
      } 
```

任何想法都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T01:43:48.427

即使我只运行原始的 DrEdit，我也有同样的问题。权限请求显示在通知栏上，但点击后没有响应。

PS。我用 HTC 4.0.1 和谷歌手机尝试过这个问题，但没有人能用。

不管怎样，这篇文章解决了我的问题，你可以试试这个。 [https://stackoverflow.com/a/16535080/1645840](https://stackoverflow.com/a/16535080/1645840)

唯一不同的是我调用了这个函数，它仍然有效。

```
GoogleAuthUtil.getTokenWithNotification(mContext,
                    mAccount.name, "oauth2:" + DriveScopes.DRIVE_FILE,
                    null);//, mAuthority, mSyncBundle); 
```

# iphone - 将 Flurry AppCircle 广告与 AdMob 中介集成

> ID：16180115
> 
> 赞同：1
> 
> 时间：2013-04-23T22:16:34.963
> 
> 标签：iphone, ios, admob, ads, flurry

我目前正在将 Flurry AppCircle Ads 与 AdMob 中介集成到我的 iPhone 应用程序中；我正在为 iOS 6 开发。

我一直从[这里](http://support.flurry.com/index.php?title=Publisher/Code/Adaptors/DFP)遵循 Flurry 的集成说明，但最后，该项目甚至没有编译。每个需要的框架都与 AdMob 中介的适配器相关联。

以下是引发的错误：

```
 Undefined symbols for architecture i386:
    "_OBJC_CLASS_$_FlurryDataSenderBase", referenced from:
      _OBJC_CLASS_$_AdLogManager in libFlurryAds.a(libFlurryAds.a-i386-master.o)
    "_OBJC_CLASS_$_FlurryDataSenderBlockInfo", referenced from:
      objc-class-ref in libFlurryAds.a(libFlurryAds.a-i386-master.o)
    "_OBJC_CLASS_$_FlurryImpl", referenced from:
       objc-class-ref in libFlurryAds.a(libFlurryAds.a-i386-master.o)
    "_OBJC_CLASS_$_FlurrySharedData", referenced from:
      objc-class-ref in libFlurryAds.a(libFlurryAds.a-i386-master.o)
    "_OBJC_METACLASS_$_FlurryDataSenderBase", referenced from:
      _OBJC_METACLASS_$_AdLogManager in libFlurryAds.a(libFlurryAds.a-i386-master.o)
    ld: symbol(s) not found for architecture i386 
```

现在我自己认为，如果我从其他链接器标志中删除标志，则可以避免这些错误并且可以构建应用程序`-ObjC`，但这个标志至关重要，否则 AdMob 中介在请求广告时会在运行时引发错误：

```
 -[GADObjectPrivate changeState:]: unrecognized selector sent to instance 0xc9cc000 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T19:52:24.550

您现在可能已经想通了，但我只有在主 Flurry SDK 和 Flurry Ads SDK 之间的版本不匹配时才看到这个错误——特别是我将最新版本的 Ads SDK (4.2.0) 添加到现有的已经在使用主要 Flurry SDK 但忽略更新后者的项目，因此它仍然在版本 4.0.0 上。

更新我的 Flurry SDK 副本导致链接问题消失。

根据该提示，我查看了 4.2.0 libFlurry.a 内部，发现它定义了符号 _OBJC_CLASS_$_FlurryDataSenderBlockInfo 和其他符号。因此，如果您要与之链接，则应定义符号。

所以我会说：

*   你根本没有链接到 libFlurry.a；或者
*   您正在链接旧版本的 libFlurry.a。

# c++ - 当我输入某些内容或尝试阅读某些内容时，c++ 程序会退出？

> ID：16180116
> 
> 赞同：0
> 
> 时间：2013-04-23T22:16:40.307
> 
> 标签：c++

任何帮助将不胜感激，一旦我退出菜单并尝试输入某些内容，我的程序就会退出，我一直在绞尽脑汁试图弄清楚这一点并且非常烦人，因为在我解决这个问题之前我无法完成其他任何事情. 我是 C++ 的初学者，所以如果它是菜鸟的错误，请不要指责我，哈哈！

这是源代码，它还不是一个完整的程序，只是现在无法弄清楚什么是错的。

谢谢你的帮助！

```
#include <iostream>
#include <string>
#include <fstream>
#include <cstdlib>

using namespace std;

struct cust
{
    int employeeno, deptno;
    char fname[10], sname[10], weekend[10];
    float hours, othours, rate, otrate, normalpay, otpay, grosspay, netpay, totalni, totaltax, ni, tax;

};

int Menu(int& menuchoice);
void InputRecords(cust c[], int row, int menuchoice);
int Calculations(cust c[]);

int SearchNumber(cust c[], int &row);
int DeleteRecords();
int TotalPay();

int main()
{
    struct cust c[100];

    int menuchoice, row;

    Menu(menuchoice);

    if (menuchoice == 1){
    system("CLS");
    InputRecords(c, row, menuchoice);
    }

    if (menuchoice == 2){
    system("CLS");
    SearchNumber(c, row);
    }

    if (menuchoice == 3){
    system("CLS");
    DeleteRecords();
    }

    if (menuchoice == 4){
    system("CLS");

    }

    if (menuchoice == 5){
    system("CLS");
    exit(5);
    }

    //Calculations(cust c[]);

}

int Menu(int& menuchoice){

    cout << " \n\n\n\n\n                             1\. Input a Payslip" << endl << endl;;
    cout << "                             2\. Read a Payslip " << endl << endl;
    cout << "                             3\.              " << endl << endl;
    cout << "                             4\.              " << endl << endl;
    cout << "                             5\. Quit the Program" << endl << endl;
    cin >> menuchoice;

}

void InputRecords(cust c[], int row, int menuchoice){

    char another;

    do{
    cout << "Please Enter Their Employee Number: " << endl;
    cin >> c[row].employeeno;

    cout << "Please Enter Their First Name: " << endl;
    cin >> c[row].fname,9;

    cout << "Please Enter Their Second Name: " << endl;
    cin >> c[row].sname,9;

    cout << "Please Enter Their Department Number 1 - 9: " << endl;
    cin >> c[row].deptno;

    cout << "Please Enter The Hours They Have Worked: " << endl;
    cin >> c[row].hours;

        if (c[row].hours >= 37.5){

            cout << "Please Enter Any Overtime They Have Worked: " << endl;
            cin >> c[row].othours;
        }

    cout << "Please Enter Their Rate of Pay: " << endl;
    cin >> c[row].rate;

    cout << "Please Enter The Date of the Week End (DD/MM/YYYY): " << endl;
    cin >> c[row].weekend, 9;

    row++;

    cout << endl;

    //Putting it in the file.
    ofstream timesheetFile("Timesheet.txt", ios::app);

    if(timesheetFile.is_open()){
        cout << "File has been opened." << endl;

        timesheetFile << c[row].employeeno << "    " << c[row].fname << "    "  << c[row].sname << "    "  << c[row].deptno << "  " << c[row].hours << "  " <<  c[row].othours << "   " << c[row].rate << "  " << c[row].weekend << "\n" << endl;

        timesheetFile.close();
    }else{
        cout << "Error! File is not open." << endl;
    }

    cout << "Would you like to enter another record? Y/N : ";
    cin >> another;

    cout << endl << endl;

    }while(row<100 && another == 'y');

    system("CLS");
    main();
}

//read records
int SearchNumber(cust c[], int &row){

    //system("CLS");

    int empno;

    cout << "Enter Employee Number : ";

    cin >> empno;

    for (int i=0; i < row; i++)
    {
        if (empno == c[i].employeeno){

            system("CLS");
            cout << c[i].employeeno << endl << c[i].fname << c[i].sname << endl;
        }
    }
}

//deleterecords
int DeleteRecords(){

}

//calculations
int Calculations(float normalpay, float& hours, float& rate, float otpay, float otrate, float& othours, float grosspay, float tax, float ni, float netpay, float totalni, float totaltax){

    ni = 6.8 / 100;
    tax = 12.75 / 100;
    otrate = 1.5 * rate;

    normalpay = hours * rate ;
    otpay = otrate * othours;

    grosspay = normalpay + otpay;

    totalni = grosspay * ni;

    totaltax = tax * grosspay;

    netpay = normalpay + otpay - totaltax - totalni;

//    cout << totaltax << endl;
//
//    cout << totalni << endl;
//
//    cout << netpay << endl;

}

int TotalPay(){

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T22:21:48.873

问题就在这里

```
int main()
{
    struct cust c[100];

    int menuchoice, row;

    Menu(menuchoice);

    if (menuchoice == 1){
        system("CLS");
        InputRecords(c, row, menuchoice);
    } 
```

你没有给变量`row`一个值，但是你`row`在调用`InputRecords`.

从您的代码来看，在我看来应该将行变量移动到 InputRecords 函数并在那里初始化为零。我不明白为什么你在主函数中有行变量。

我也看不出你为什么将 menuchoice 传递给 InputRecords，它在那里没有被使用。这一切似乎有点随机，也许你应该回顾一下函数和参数传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T22:21:44.560

看起来您的`row`变量从未被初始化。为什么是这样？

初始化变量也是一个好习惯`menuchoice`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T23:46:27.410

```
 int Menu(int& menuchoice);
 void InputRecords(cust c[], int row, int menuchoice);// declared
 int Calculations(cust c[]);

 int SearchNumber(cust c[], int &row);
 int DeleteRecords();
 int TotalPay();

 int main()
 {
     struct cust c[100];

     int menuchoice, row; // declared again but never initialized

     Menu(menuchoice);

     if (menuchoice == 1){ 
     system("CLS");
     InputRecords(c, row, menuchoice); // used 
```

# android - instr() 用于 Android 的 SQLITE 函数？

> ID：16180117
> 
> 赞同：3
> 
> 时间：2013-04-23T22:16:42.397
> 
> 标签：android, sql, sqlite, function

我想在我现有的 android 上的 sqlite 数据库上执行以下操作，这有点像这样的 colomns：id --- rule --- path --- someotherdata

例如，现在的规则包含文件名的一部分（可能只是一些琐碎的东西，如“mypicture”或文件类型，如“jpg”）。现在我想做的是，我想编写一个查询，它获取我的所有规则，其中包含输入字符串的一部分。我尝试了以下示例： String value = "somepicturefilename.jpg"

我的声明：

```
"SELECT DISTINCT * FROM " + TABLE_RULES + " WHERE instr('"+ value + "',rule)!=0 ORDER BY " + KEY_ID+ " DESC;" 
```

该语句在java中，因此“值”应该插入语句中。

但是，这不起作用。我对sql和sqlite都不太熟悉，有没有人有提示= ;) 谢谢。

编辑：我也尝试过 charindex，但也没有用。

编辑：所以一个更详细的例子。给出了以下数据库。

```
id --- rule ---
1      "jpg"
2     "ponies"
3     "gif"
4     "pdf" 
```

现在用户输入一个文件名。让我们说“poniesAsUnicorns.jpg”。所以“poniesAsUnicorns.jpg”是我的输入字符串，查询应该匹配 id#1 和 id#2 因为“poniesAsUnicorns.jpg”同时包含“jpg”和“ponies”

我希望这能澄清我想要什么。

编辑：这也是我尝试过的：

```
String statement = "SELECT DISTINCT * FROM " + TABLE_RULES
            + " WHERE charindex(rule,'" + value
            + "') > 0 ORDER BY " + KEY_ID + " DESC;"; 
```

但抛出“没有这样的操作”异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:31:40.893

AFAIK`instr()`不可用，因此您可以使用：

```
select * from table where replace("poniesAsUnicorns.jpg", rule, "") != "poniesAsUnicorns.jpg"; 
```

或者对于不区分大小写的匹配：

```
select * from table where replace(upper("poniesAsUnicorns.jpg"), upper(rule), "") != upper("poniesAsUnicorns.jpg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:34:26.487

我看不出你的 SQL 表达式有什么问题......唯一可能会杀死它的是不等式运算符周围没有空格`!=`

尝试这个：

```
"SELECT DISTINCT * FROM " + TABLE_RULES + " WHERE instr('"+ value + "',rule) > 0 ORDER BY " + KEY_ID+ " DESC;" 
```

我不确定 Android 中的 SQLite 实现是否完整，您可能会发现某些操作不起作用，所以做一些简单的测试作为健全性检查。

如果这不起作用，您可以逆转条件。

```
[field]='some_value' 
```

和以下一样有效：

```
'some_value'=[field] 
```

因此，在您的示例中，我认为您应该能够执行以下操作：

```
select distinct * from TABLE_RULES
where 'poniesAsUnicorns.jpg' like '%' + rule + '%'; 
```

我在 mySQL 中对此进行了测试，它不喜欢`+`串联，但它确实像这样愉快地工作：

```
select distinct * from TABLE_RULES
where 'poniesAsUnicorns.jpg' like replace('%rule%','rule',rule); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T23:50:32.293

在 LIKE 模式中使用下划线 (_) 而不是百分比 (%)。下划线将匹配值中的任何单个字符，而不是整个字符串序列。

```
"SELECT DISTINCT * FROM " + TABLE_RULES + " WHERE rule LIKE '_"+ value + "_' ORDER BY " + KEY_ID+ " DESC;" 
```

[LIKE 运算符](http://www.sqlite.org/lang_expr.html#like)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T08:18:45.010

```
"SELECT DISTINCT * FROM " + TABLE_RULES + " WHERE '" + value + "' like '%' || rule || '%' ORDER BY " + KEY_ID + " DESC;" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T22:32:06.773

```
"SELECT DISTINCT * FROM " + TABLE_RULES + " WHERE rule LIKE '%"+ value + "%' ORDER BY " + KEY_ID+ " DESC;" 
```

试试这个。

# wordpress - jQuery Smooth Div Scroll WP - 当鼠标不在图像上时如何重新开始自动滚动？

> ID：16180121
> 
> 赞同：0
> 
> 时间：2013-04-23T22:16:53.180
> 
> 标签：wordpress, html, scroll, alignment

请我需要你的帮助：我正在使用 Smooth Div Scroll 和 wordpress

*   有没有办法“鼠标悬停时停止自动滚动”，“鼠标未悬停时开始自动滚动”？现在，自动滚动可以工作，但是当我将鼠标放在上面时，它会停止并且不会再次启动。

我在这个网站[http://broadcast-architech.com/](http://broadcast-architech.com/)上看到了它，但是没有箭头，我想保留它们以及鼠标滚动。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T11:08:58.850

代码可能如下所示：

```
// Initialization
var myScroller = $("div#makeMeScrollable").smoothDivScroll({
    autoScrollingMode: 'onStart',
    autoScrollingDirection: 'endlessLoopLeft'
});

myScroller.on('mouseenter', function(){
    myScroller.smoothDivScroll("stopAutoScrolling");
}).on('mouseleave', function(){
    myScroller.smoothDivScroll("startAutoScrolling");
}); 
```

这是一个演示：

[http://jsfiddle.net/tkahn/3McmN/2/](http://jsfiddle.net/tkahn/3McmN/2/)

# vb.net - 已安装 WCF 服务并带有 Installshield 生成的设置错误

> ID：16180125
> 
> 赞同：1
> 
> 时间：2013-04-23T22:17:12.103
> 
> 标签：vb.net, wcf, iis, installshield

我刚刚为 WCF 服务生成了安装程序，我正在尝试使用：安装在 wwwroot 的结构如下： [http ://bit.ly/11zZ85E](http://bit.ly/11zZ85E)

bin 文件夹中包含服务所依赖的所有 dll。实现服务契约的类在其中一个 dll 中定义。所有生成和安装过程都很好。我在 IIS 管理器上有以下内容：

[http://bit.ly/10xBI3Y](http://bit.ly/10xBI3Y)

问题是当我尝试在浏览器上访问 wsdl 时，我只能看到：

```
<%@ ServiceHost Language="VB" Debug="true" Service="MyApplication.ServiceImplementation.LicensingService" CodeBehind="MyApplication.ServiceImplementation.Service.vb" %> 
```

如果我尝试使用 Visual Studio 项目中的添加服务引用，我会看到：

*下载时出错
(ServiceAddress)/$metadata 请求失败，HTTP 状态为 404：未找到。元数据包含无法解析的引用：(ServiceAddress) 远程服务器返回了意外响应：(405) 方法不允许。远程服务器返回错误：(405) Method Not Allowed。如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。*

我所做的安装程序是使用 Installshield 2010 生成的。

这是我的 Web.Config

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<appSettings>
<add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
</appSettings>
<system.web>
<compilation strict="false" explicit="true" targetFramework="4.5" />
<httpRuntime targetFramework="4.5" />
</system.web>
<system.serviceModel>
<services>
<service name="MyApp.ServiceImplementation.Service" behaviorConfiguration="WSSecurityBehavior">
<!-- Service Endpoints -->
<!-- Unless fully qualified, address is relative to base address supplied above -->
<endpoint address="Operations" binding="wsHttpBinding" contract="MyApp.ServiceContracts.IService" />
<endpoint binding="wsHttpBinding" name="mex" contract="IMetadataExchange" />
</service>
</services>
<behaviors>
<serviceBehaviors>
<behavior name="WSSecurityBehavior">
<serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
<serviceDebug includeExceptionDetailInFaults="false" />
</behavior>
</serviceBehaviors>
</behaviors>
<bindings>
<wsHttpBinding>
<binding name="WSSecurityBinding">
<reliableSession enabled="true" ordered="true" />
</binding>
</wsHttpBinding>
</bindings>
<!--protocolMapping>
<add binding="basicHttpsBinding" scheme="https"/>
</protocolMapping-->
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true" />
<directoryBrowse enabled="true" />
<handlers accessPolicy="Read, Script" />
<defaultDocument>
<files>
<clear />
<add value="Service.svc" />
</files>
</defaultDocument>
<httpErrors>
<clear />
</httpErrors>
</system.webServer>
</configuration> 
```

# visual-studio-2012 - 如何在解决方案中管理每个项目自己的 nuget 包

> ID：16180129
> 
> 赞同：2
> 
> 时间：2013-04-23T22:17:31.510
> 
> 标签：visual-studio-2012, nuget, nuget-package, package-managers

我们想将一些第三方程序集打包到我们自己的 nuget 包中。我使用 NuGet 包资源管理器创建了一些包，并将其发布到我们的 nuget 服务器。我也可以将它安装到我们的解决方案中，但是我有两个问题：

1.  小问题：当我安装我们的 nuget 包时，会在其中创建一个带有 packages.config 的 .nuget 目录。这仅包含对我添加的包的引用。然而，我们已经在我们的解决方案中安装了几个 nuget 包。每个包都在它自己的子文件夹中的 packages 子文件夹中，而且 packages 文件夹中有一个 repositories.config。存储库配置指向其他 packages.config，但不是由我的操作创建到 .nuget 文件夹中的那个。即使我尝试使用控制台将 nuget 包安装到特定项目中也是如此！
2.  主要问题：当我在“管理解决方案的 NuGet 包...”中查找已安装的包时，我只看到我的包的“卸载”按钮。我希望并希望有一个管理按钮，就像我们对其他 nuget 包所拥有的一样，它允许在树视图中检查/取消选中每个项目的包。

我使用最新的 VS 2012，最新的 NuGet (2.2.xxx)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:57:16.490

该问题是由不正确的包创建引起的。创建包时（使用 NuGet 包资源管理器），在右侧的“包内容”窗格中，您希望通过右键单击并从上下文菜单中选择“添加 Lib 文件夹”来创建一个 lib 文件夹。然后你想将你的程序集添加到这个文件夹而不是包内容的根目录中。拥有正确的包结构有助于实现预期的行为：不再创建 .nuget 文件夹，我也可以“管理”我的包。

# java - Hadoop FileSplit 读取

> ID：16180130
> 
> 赞同：1
> 
> 时间：2013-04-23T22:17:36.217
> 
> 标签：java, hadoop, inputstream, filesplitting, input-split

假设一个客户端应用程序使用一个`FileSplit`对象来从相应的文件中读取实际字节。

为此，必须通过以下代码`InputStream`从 中创建一个对象：`FileSplit`

```
 FileSplit split = ... // The FileSplit reference
    FileSystem fs   = ... // The HDFS reference

    FSDataInputStream fsin = fs.open(split.getPath());

    long start = split.getStart()-1; // Byte before the first

    if (start >= 0)
    {
        fsin.seek(start);
    } 
```

在某些场景中，例如类，会出现将流调整为 -1 的情况`Hadoop` `MapReduce` `LineRecordReader`。但是，该`FSDataInputStream` `seek()`方法的文档明确指出，在寻找到一个位置之后，下一次读取将来自该位置，这意味着（？）上面的代码将是 1 个字节（？）。

所以，问题是，对于所有 InputSplit 阅读案例是否需要“-1”调整？

顺便说一句，如果想要`FileSplit`正确读取一个文件，仅寻找它的开头是不够的，因为每个拆分也有一个结尾，可能与实际 HDFS 文件的结尾不同。因此，对应的`InputStream`应该是“有界的”，即具有最大长度，如下所示：

```
 InputStream is = new BoundedInputStream(fsin, split.getLength()); 
```

`fsin`在这种情况下，在上面创建了“本机”流之后，使用`org.apache.commons.io.input.BoundedInputStream`该类来实现“边界”。

**更新**

显然，仅当用例排在该类中时才需要进行调整`LineRecordReader`，这超出了拆分的边界，以确保它读取完整的最后一行。

可以在[较早的问题](https://stackoverflow.com/questions/14291170/how-does-hadoop-process-records-records-split-across-block-boundaries)和[MAPREDUCE-772](https://issues.apache.org/jira/browse/MAPREDUCE-772)的评论中找到有关此问题的详细讨论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:31:53.397

寻找位置 0 意味着对 InputStream.read() 的下一次调用将读取字节 0。寻找位置 -1 很可能会引发异常。

当您在示例和源代码中谈论标准模式时，您具体指的是哪里？

正如您所注意到的，拆分不一定有界 - 以 TextInputFormat 和可以拆分的文件为例。处理拆分的记录读取器将：

*   寻找起始索引，然后找到下一个换行符
*   查找下一个换行符（或 EOF）并将该“行”作为下一条记录返回

重复此过程，直到找到的下一个换行符超过拆分的结尾，或者找到 EOF。因此，您会看到，在这种情况下，拆分的实际边界可能与输入拆分给出的边界右移

**更新**

从 LineRecordReader 引用此代码块：

```
if (codec != null) {
  in = new LineReader(codec.createInputStream(fileIn), job);
  end = Long.MAX_VALUE;
} else {
  if (start != 0) {
    skipFirstLine = true;
    --start;
    fileIn.seek(start);
  }
  in = new LineReader(fileIn, job);
}
if (skipFirstLine) {  // skip first line and re-establish "start".
  start += in.readLine(new Text(), 0,
                       (int)Math.min((long)Integer.MAX_VALUE, end - start));
} 
```

该`--start`语句很可能是为了避免从换行符开始拆分并返回一个空行作为第一条记录。可以看到，如果出现 seek ，第一行会被跳过，以确保文件拆分不会返回重叠记录

# javascript - 使用 KnockoutJS 设置选择的初始值

> ID：16180131
> 
> 赞同：1
> 
> 时间：2013-04-23T22:17:46.610
> 
> 标签：javascript, knockout.js

我无法让选择填充对象中属性的初始值。

我有一个`Location`对象，它的属性是`urls`.

```
{ id: 1, name: 'Location1', state: 'md', headline: 'headline1', urls: [{ id: 1, url: 'www.google.com', type: { id: 1, type: 'Public'} }]} 
```

当用户选择`Location`我试图`url.type.type`在列表中显示为选定选项时，它始终显示`optionsCaption`.

请在我的[小提琴中找到完整的例子](http://jsfiddle.net/bflemi3/2HS5J/)

```
var seedData = [
    { id: 1, name: 'Location1', state: 'md', headline: 'headline1', urls: [{ id: 1, url: 'www.google.com', type: { id: 1, type: 'Public'} }]},
    { id: 2, name: 'Location2', state: 'va', headline: 'headline2', urls: [{ id: 1, url: 'www.bing.com', type: { id: 2, type: 'Private'} }]},
    { id: 3, name: 'Location3', state: 'md', headline: 'headline3', urls: [{ id: 1, url: 'www.yahoo.com', type: { id: 1, type: 'Public'} }]}
];

function UrlType(data) {
    this.id = ko.observable(data.id);
    this.type = ko.observable(data.type);
}

function Url(data) {
    this.id = data.id;
    this.url = ko.observable(data.url);
    this.type = ko.observable(new UrlType(data.type));
}

function Location(data, types, names) {
    var self = this;

    self.id = data.id;
    self.name = ko.observable(data.name).extend({ maxLength: 10, unique: { collection: names, externalValue: true } });
    self.state = ko.observable(data.state).extend({ pattern: '^[A-Za-z]{2}$'});
    self.headline = ko.observable();
    self.urls = ko.observableArray(ko.utils.arrayMap(data.urls, function(item) {
        return new Url(item);
    }));  
    self.errors = ko.validation.group(self);

    //update the data at any time
    self.update = function(data) {
        self.name(data.name);
        self.state(data.state);
        self.headline(data.headline);
        debugger;
        self.urls(ko.utils.arrayMap(data.urls, function(item){
            return new Url(item);
        }));
    };

    //initialize with our initial data
    self.update(data);
};

function ViewModel() {
    var self = this;

    self.types = [
        { id: 1, name: 'Public' },
        { id: 2, name: 'Private' }
    ];

    self.locations = ko.observableArray([]);   

    self.selectedLocation = ko.observable();
    self.selectedLocationForEditing = ko.observable();

    self.names = ko.computed(function(){
        return ko.utils.arrayMap(self.locations(), function(item) {
            return item.name();
        });
    });  

    self.edit = function(item) {
        self.selectedLocation(item);
        self.selectedLocationForEditing(new Location(ko.toJS(item), self.types, self.names()));
    };

    self.cancel = function() {
        self.selectedLocation(null);
        self.selectedLocationForEditing(null);
    };

    self.update = function(item) {
        var selected = self.selectedLocation(),
            updated = ko.toJS(self.selectedLocationForEditing()); //get a clean copy

        if(item.errors().length == 0) {
            selected.update(updated);
            self.cancel();
        }
        else
            alert("Error");        
    };

    self.locations(ko.utils.arrayMap(seedData, function(item) {
        return new Location(item, self.types);
    })); 
}

ko.applyBindings(new ViewModel()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:41:20.207

这是一个工作小提琴：http: [//jsfiddle.net/jearles/2HS5J/5/](http://jsfiddle.net/jearles/2HS5J/5/)

我已经介绍`optionsValue: 'id'`了仅将该属性作为选定选项提取，并将 seedData 减少为仅包含`type: 1`（唯一的 id，而不是类型对象）。这使淘汰赛可以轻松地将其映射`type`到您的其中一个`$root.types`（否则，您必须自己执行此操作）。此外，`optionsText: 'type'`当您的`options`数组包含具有`name`属性而不是“类型”属性的对象时，您正在使用 - 这就是敲除无法使用选项填充选择的原因。

# awk - 使用 awk 查找行间的差异

> ID：16180133
> 
> 赞同：2
> 
> 时间：2013-04-23T22:17:58.387
> 
> 标签：awk

我有一个表，其中给定行中的大多数值都是相同的。我要提取的是至少有一个值不同的任何行。我已经想出了如何用这样的东西来做到这一点

```
awk -F "\t" '{if (($4!=$5)&&($5!=$6)&&($6!=$7)) print $0;}' 
```

唯一的问题是要比较 40 个奇怪的列。有没有更优雅的方法来比较多列的差异。顺便说一句——这些都是非数值，所以花哨的数学技巧是行不通的。

谢谢大家。我是新手，所以我不得不承认我不理解所有的命令等，但我可以从这里查到。不确定我会接受谁的建议，但我从具体示例中学到的知识比从教科书解释中学到的更多，因此拥有这些不同的解决方案对我的学习曲线有很大帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T22:39:32.657

一个花哨的数学技巧可能不起作用，但怎么样：

```
$ cat file
one one one one two
two two two two two
three four four five

$ awk '{f=$0;gsub($1,"")}NF{print f}' file 
one one one one two
three four four five 
```

首先我们将行存储为原始状态，`f=$0`然后我们对与第一个字段匹配的所有内容进行全局替换，如果所有字段都相同，则不会留下任何内容，因此`NF`将为 0 并且不会打印任何内容，否则我们打印原始行。

您的脚本开始于`$4`这表明您只对此字段的更改感兴趣，在这种情况下：

```
$ awk '{f=$0;gsub($4,"")}NF>3{print f}' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:28:39.670

你可以只使用一个`for`循环：

```
awk -F "\t" '{ for(i=4;i<NF;i++) if ($i != $(i+1)) { print; next } }' file 
```

相应调整。HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T22:30:40.873

如果任何字段与其他字段不同，则要么它与字段 1 不同，要么字段 1 与其他字段不同（根据定义）。因此，只需从 2 循环到 NF（字段数），将其与所有其他字段进行比较：

```
awk -F "\t" '{ for (i = 2; i <= NF ;i++) if ($i != $1) { print; next; }}' 
```

您可以根据需要对此进行调整以忽略前导字段（例如，从 5 开始并与 $4 进行比较）。

# javascript - 正则表达式在可选字符之前获取 URL 中的字符串

> ID：16180134
> 
> 赞同：2
> 
> 时间：2013-04-23T22:17:59.010
> 
> 标签：javascript, regex

我有一个格式如下的 URL：http: [//domain.com/space/all/all/FarmAnimals](http://domain.com/space/all/all/FarmAnimals)

或像这样：[http ://domain.com/space/all/all/FarmAnimals?param=2](http://domain.com/space/all/all/FarmAnimals?param=2)

在这两种情况下，我可以使用什么正则表达式来返回表达式 FarmAnimals？

我正在尝试这个：

```
var myRegexp = /\.com\/space\/[a-zA-Z0-9]*\/[a-zA-Z0-9]*\/(.*)/;
var match = myRegexp.exec(topURL);
var full = match[1]; 
```

但这仅在第一种情况下有效，有人可以提供一个示例，说明如何使用可选的问号闭包设置此正则表达式吗？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T22:23:53.457

```
 /[^/?]+(?=\?|$)/ 
```

任何非/ 后跟`?`或和行尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T22:34:19.180

我不会在这里编写自己的正则表达式并让`Path`班级处理它（如果这是您的两种字符串格式）。

```
string url = "http://domain.com/space/all/all/FarmAnimals";

//ensure the last character is not a '/' otherwise `GetFileName` will be empty
if (url.Last() == '/') url = url.Remove(url.Length - 1);

//get the filename (anything from FarmAnimals onwards)
string parsed = Path.GetFileName(url);

//if there's a '?' then only get the string up to the '?' character
if (parsed.IndexOf('?') != -1) 
    parsed = parsed.Split('?')[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T22:22:55.457

你可以使用这样的东西：

```
var splitBySlash = topURL.split('/')
var splitByQ = splitBySlash[splitBySlash.length - 1].split('?')
alert(splitByQ[0]) 
```

解释：

`splitBySlash`将`['http:','','domain.com', ... ,'all','FarmAnimals?param=2']`。

然后`splitByQ`将抓取该数组中的最后一项并将其拆分`?`为`['FarmAnimas','param=2']`.

然后只需抓住其中的第一个元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T22:36:54.247

这个

```
.*\/(.*?)(\?.*)?$ 
```

应该将您要查找的字符串部分捕获为组 1（以及`?`组 2 中的查询，如果需要）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T22:31:54.547

```
var url = 'http://domain.com/space/all/all/FarmAnimals?param=2';
//var url = 'http://domain.com/space/all/all/FarmAnimals';
var index_a = url.lastIndexOf('/');
var index_b = url.lastIndexOf('?');
console.log(url.substring(index_a + 1, (index_b != -1 ? index_b : url.length))); 
```

# jquery - 如何使用javascript从框架集中的另一个框架更改框架高度

> ID：16180136
> 
> 赞同：1
> 
> 时间：2013-04-23T22:18:11.720
> 
> 标签：jquery, frames, frameset

我有一个框架集：

```
<frameset rows="30px,*">
    <frame id="frame1" src="frame1source.html">
    <frame id="frame2" src="frame2source.html">
</frameset> 
```

我需要能够使用 jquery 从 #frame1 中更改 #frame2 的高度。

我尝试了许多解决方案均无济于事，包括：

```
$(window.parent.frames[0].document).css("height",300); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T18:35:30.747

好的，我使用纯 JS 通过调整框架集的大小来解决这个问题，而不仅仅是一帧。

```
parent.document.getElementsByTagName( 'frameset' )[ 0 ].rows="300,*"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:24:53.650

$("#frame2").css("height",300); 这对你有用吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-14T10:23:01.277

您可以使用以下标签：

```
$("#fromdate, #todate").click(function () {
        $('frameset', top.document).eq(2).attr('rows', '300,*');
    }); 
```

# wix - 带有输出 MSI 文件的 dotNetInstaller

> ID：16180140
> 
> 赞同：0
> 
> 时间：2013-04-23T22:18:38.313
> 
> 标签：wix, dotnetinstaller

我有一个应用程序，可以通过 MSI 包安装。现在我需要扩展这个包来检查是否安装了 .NET 4.0。我想使用 dotNetInstaller，但我无法更改文件的名称和扩展名（dotNetInstaller 创建一个 exe 文件）。是否可以创建带有 MSI 扩展名的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:26:19.323

如果您在项目设置中将您的项目定位为 .net 4，则该项目中的标准 MSI 安装程序将检查这种依赖关系，并为用户提供一个解决方案来完全满足设置的依赖关系，但前提是您没有仔细检查与标准设置。（有复选框可以禁用这种行为）您还可以添加其他依赖项以在设置时检查。

# sql - 这是 SQL 别名还是其他？

> ID：16180141
> 
> 赞同：0
> 
> 时间：2013-04-23T22:18:39.443
> 
> 标签：sql, alias

在下面的代码摘录中，我想知道“p”和“p1”是什么。我最好的猜测是它们是别名，但我找不到在其余代码中使用的别名语法（例如：people AS p）。

```
$query ="SELECT p.* FROM $wpdb->posts p, $wpdb->postmeta p1 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:26:16.417

它们确实是别名，这是定义它们的地方。这是有效的 SQL 语法，至少在 oracle 中是这样。

“posts”表之后被引用为“p”，您可以在“p.*”部分看到它。

看看[这个问题](https://stackoverflow.com/questions/198196/when-to-use-sql-table-alias)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:26:47.750

正确，您不必使用语法 as 来定义别名。这是一个很好的 StackOverflow 链接，已得到回答：[别名](https://stackoverflow.com/questions/981938/what-is-your-preferred-syntax-for-sql-aliases)

# ios - iOS 6.1.3 上的 CakePHP 会话和 Safari

> ID：16180145
> 
> 赞同：0
> 
> 时间：2013-04-23T22:18:47.633
> 
> 标签：ios, session, cakephp, safari

我有一个 CakePHP 应用程序（使用 cake 2.3），它使用 Session 组件在他/她第一次访问该站点时向用户显示一个启动页面，并且再也不会出现。这是控制器中的代码：

```
public function index() {
  if (!$this->Session->check('splashShown')) {
    $this->Session->write('splashShown', true);
    $this->redirect(array('controller'=>'pages', 'action' => 'about'));
  }
  //other stuff in controller...
} 
```

这在 IE、Firefox 和 Chrome 的桌面版本上完美运行。它也适用于 Chrome iOS，但不适用于 Safari iOS。在 Safari 中，Session->check() 函数总是返回 false。

有人知道 Safari iOS 上的会话发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:08:10.550

检查[这个答案](https://stackoverflow.com/questions/10569135/authentication-in-ios-can-you-use-cookies-session)它处理同样的问题，iOS 在这方面有点不同。

也看[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Concepts/URLOverview.html#//apple_ref/doc/uid/20001834-BAJEAIEE)和[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSHTTPCookieStorage_Class/Reference/Reference.html)。@Sam Delaney 是正确的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T08:51:53.557

我怀疑这与存储在 Internet 浏览器上的会话 cookie 有关，因为我相信这是 PHP 用来跨请求保持会话的默认机制。根据请求，如果 PHP 无法识别会话 ID，它会创建一个新会话 ID，并在对客户端的响应中设置一个带有会话 ID 的 cookie。

### 编辑

为了验证情况是否如此，我快速搜索了你，我遇到了这个：[http](http://rf.com/how-to/how-to-enable-cookies-on-the-iphone/) ://rf.com/how-to/how-to-enable-cookies-on-the-iphone/显然这不能解决问题，但会帮助您确定问题的原因。

# rest - 组合键资源 REST 服务

> ID：16180147
> 
> 赞同：26
> 
> 时间：2013-04-23T22:18:57.190
> 
> 标签：rest, asp.net-web-api, composite-key, asp.net-web-api-routing, attributerouting

我在工作中遇到了一个问题，我找不到有关在 RESTful Web 服务中针对主键是其他资源 ID 组合的资源执行 CRUD 操作的常用标准或实践的信息。我们正在使用 MVC WebApi 创建控制器。例如，我们有三个表：

*   `Product`: PK=产品编号
*   `Part`: PK=PartId
*   `ProductPartAssoc`: PK=(ProductId, PartId)

一个产品可以有很多部分，一个部分可以是很多产品的组成部分。关联表还包含与关联本身相关的附加信息，而不是需要可编辑的。

我们有`ProductsController`和`PartsController`类使用定义为的路由模板处理通常的 GET/PUT/POST/DELETE 操作：`{controller}/{id}/{action}`这样以下 IRI 可以工作：

*   GET,POST `/api/Products`- 返回所有产品，创建一个新产品
*   GET,PUT,DELETE `/api/Products/1`- 检索/更新/删除产品 1
*   GET,POST `/api/Parts`- 返回所有部分，创建一个新部分
*   GET,PUT,DELETE `/api/Parts/2`- 检索/更新/删除第 2 部分
*   GET `/api/Products/1/Parts`- 获取产品 1 的所有部件
*   GET `/api/Parts/2/Products`- 获取第 2 部分是组件的所有产品

我遇到的问题是如何为 ProductPartAssoc 资源定义路由模板。获取关联数据的路由模板和 IRI 应该是什么样的？遵守惯例，我希望是这样的：

*   GET,POST `/api/ProductPartAssoc`- 返回所有关联，创建关联
*   GET,PUT,DELETE `/api/ProductPartAssoc/[1,2]`- 检索/更新/删除产品 1 和第 2 部分之间的关​​联

我的同事发现这在美学上令人不快，并且似乎认为完全没有`ProductPartAssocController`课程会更好，而是`ProductsController`向管理关联数据添加额外的方法：

*   GET,PUT,DELETE `/api/Products/1/Parts/2`- 获取产品 1 和第 2 部分之间关联的数据，而不是作为第 1 部分的成员的第 2 部分的数据，这通常是基于其他示例（例如`/Book/5/Chapter/3`我在其他地方看到的）的情况。
*   POST 这里不知道他们期望 IRI 是什么样子。不幸的是，他们是决策者。

归根结底，我想我正在寻找的不是验证，就是我可以指出并说“看，这就是其他人所做的”的方向。

处理由复合键标识的资源的典型做法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-24T17:35:47.613

我也很喜欢它的美学`/api/Products/1/Parts/2`。您还可以让多个路由执行相同的操作，因此您可以加倍并提供`/api/Parts/2/Products/1`同一资源的备用 URL。

至于 POST，您已经知道复合键。那么为什么不消除对 POST 的需求，只使用 PUT 来创建和更新呢？如果您的系统生成主键，则 POST 到集合资源 URL 非常好，但是如果您有已知主键的组合，为什么需要 POST？

也就是说，我也喜欢单独`ProductPartAssocController`包含这些 URL 的操作的想法。您必须进行自定义路由映射，但如果您使用的是[AttributeRouting.NET](http://attributerouting.net/)之类的东西，这很容易做到。

例如，我们这样做是为了管理角色中的用户：

```
PUT, GET, DELETE /api/users/1/roles/2
PUT, GET, DELETE /api/roles/2/users/1 
```

6 个 URL，但只有 3 个操作，都在`GrantsController`（我们将用户和角色之间的动名词称为“授予”）。类最终看起来像这样，使用[AttributeRouting.NET](http://attributerouting.net/)：

```
[RoutePrefix("api")]
[Authorize(Roles = RoleName.RoleGrantors)]
public class GrantsController : ApiController
{
    [PUT("users/{userId}/roles/{roleId}", ActionPrecedence = 1)]
    [PUT("roles/{roleId}/users/{userId}", ActionPrecedence = 2)]
    public HttpResponseMessage PutInRole(int userId, int roleId)
    {
        ...
    }

    [DELETE("users/{userId}/roles/{roleId}", ActionPrecedence = 1)]
    [DELETE("roles/{roleId}/users/{userId}", ActionPrecedence = 2)]
    public HttpResponseMessage DeleteFromRole(int userId, int roleId)
    {
        ...
    }

    ...etc
} 
```

这对我来说似乎是一种相当直观的方法。将动作保存在单独的控制器中也有助于更精简的控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-19T21:13:20.657

我建议：

*   POST `/api/PartsProductsAssoc`：在零件和产品之间创建链接。在 POST 数据中包含部件和产品 ID。
*   GET、PUT、DELETE `/api/PartsProductsAssoc/<assoc_id>`：读取/更新/删除链接`<assoc_id>`（不是零件或产品 ID，是的，这意味着在您的 PartsProductsAssoc 表中创建一个新列）。
*   GET `/api/PartsProductsAssoc/Parts/<part_id>/Products`：获取与给定部件相关的产品列表。
*   GET `/api/PartsProductsAssoc/Products/<product_id>/Parts`：获取与给定产品相关的部件列表。

采用这种方法的原因：

*   每个链接的单一、完全限定的 URI。
*   修改链接会修改单个 REST 资源。

有关详细信息，请参阅56:30 的[https://www.youtube.com/watch?v=hdSrT4yjS1g](https://www.youtube.com/watch?v=hdSrT4yjS1g)。

# javascript - 是否可以使用另一个按钮告诉我最后的警报？

> ID：16180152
> 
> 赞同：-3
> 
> 时间：2013-04-23T22:19:20.817
> 
> 标签：javascript, string, button, random, alert

我希望有两个按钮，一个自动在警报中生成一个随机字符串，我希望另一个用户能够在文本框中输入代码并告诉他们它是否有效。

首先这可能吗？其次，对于 JavaScript 新手来说，这很难吗？

这是我现在正在使用的当前代码。

```
<script language="javascript" type="text/javascript">
function randomString() {
 var chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";
 var string_length = 5;
 var randomstring = '';
 for (var i=0; i<string_length; i++) {
  var rnum = Math.floor(Math.random() * chars.length);
  randomstring += chars.substring(rnum,rnum+1);
 }
 return randomstring;
}
</script>

<script>
function myFunction()
{
alert(randomString());
}
</script> 
```

谢谢1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:04:53.977

那一个怎么样：

----------- 文件：index.html -----------

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Captcha Test</title>
    <script src="test.js"></script>
</head>
<body onload="loadCaptcha('captcha-region')">

    <div id="captcha-region"
         style="text-indent: 10px; background: #fffccc"></div>

    <label for="captcha"> Re-type text: </label>
    <input  id="captcha" type="text" value="" />

    <input type="button" value="Submit"
           onclick="checkCaptcha('result-region')" />

    <input type="button" value="Reload"
           onclick="loadCaptcha('captcha-region')" />

    <div id="result-region"></div>

</body>
</html> 
```

--------- 文件：test.js -----

```
function randomInt (range) {
    return Math.floor(Math.random() * range);
}

function randomPos (s) {
    return randomInt(s.length);
}

function randomChar (s) {
    return s.charAt(randomPos(s));
}

var chars = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";

function randomString () {
    var s = '',
        i = 0;

    while (i++ < 5) {
        s += randomChar(chars);
    }

    return s;
}

function htmlInsert (id, htmlData) {
    document.getElementById(id).innerHTML = htmlData;
}

var captcha;

function loadCaptcha (captchaRegion) {
    captcha = randomString();

    htmlInsert(captchaRegion, '<h1>' + captcha + '</h1>');
}

function checkCaptcha (resultRegion) {
    var okText = (captcha === document.getElementById('captcha').value)
            ? '<span style="color: yellowgreen"> ok </span>'
            : '<span style="color: orange">  not ok </span>';

    htmlInsert(resultRegion, '<h2>Typed text: ' + okText + '</h2>');
} 
```

这基本上是一种验证码演示，可能包含一些不错的部分..

您可能希望将 index.html 和 test.js 放在您喜欢的目录中（不需要本地 Web 服务器），然后从该目录中执行：“firefox index.html”，您就可以开始了..

你怎么看？

# c++ - 在 QGraphicsScene 中的特定坐标中放置和图像

> ID：16180156
> 
> 赞同：1
> 
> 时间：2013-04-23T22:19:40.503
> 
> 标签：c++, qt, qgraphicsview, qgraphicsscene

在下面的代码中，我用来`item.setPos(0,0);`放置`green.png`在我的应用程序的左上角（`QGraphicsView`实际上）。但是它从两个方向（垂直和水平）都出现在中心。请帮助将图像放在 0,0 坐标中。

```
#include <QApplication>
#include <QGraphicsScene>
#include <QGraphicsView>
#include <QGraphicsPixmapItem>
#include <QIcon>

int main(int argc, char **argv)
{
    QApplication app(argc, argv);
    QGraphicsScene scene;
    scene.setBackgroundBrush(QBrush(QColor(255, 255, 255), Qt::SolidPattern));

    QGraphicsPixmapItem item(QPixmap(":/images/green.png"));
    item.setPos(0,0);
    scene.addItem(&item);

    QGraphicsView view(&scene);
    view.setFixedSize(400, 400);
    view.setWindowTitle("Diamond Dash");
    view.setWindowIcon(QIcon(":/images/red.png"));
    view.show();

    return app.exec();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:42:16.823

我已经添加了

```
scene.setSceneRect(0,0, 400, 400); 
```

它奏效了！

# marionette - 将模型添加到 Marionette CollectionView 的集合不会触发 onItemAdd 回调

> ID：16180159
> 
> 赞同：3
> 
> 时间：2013-04-23T22:20:03.787
> 
> 标签：marionette

所以，我不确定我是否完全理解这个回调应该如何被触发。如果您采用准系统模型、集合和视图：

```
PatchModel = Backbone.Model.extend({});

PatchCollection = Backbone.Collection.extend({model: PatchModel});

PatchView = Backbone.Marionette.ItemView.extend({template:'#patchview'});

PatchCollectionView = Backbone.Marionette.CollectionView.extend({
  itemView:PatchView
  ,onItemAdded: function(itemView){
    console.log("item was added");
  }
}); 
```

并像这样实例化它们：

```
Patch0 = new PatchModel({});
Patch1 = new PatchModel({});
Patches = new PatchCollection();        

PatchesView = new PatchCollectionView({collection:Patches,el:"dom_id"});    

Patches.add(Patch0);
PatchesView.render();
Patches.add(Patch1); 
```

PatchesView onItemAdded 回调永远不会触发。唔...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T15:18:51.073

看起来文档已经过时了。您应该使用**onAfterItemAdded**或**onBeforeItemAdded**

这在 v1.0.0-rc2 中已更改

> * *BREAKING: **`item:added`将事件更改为`before:item:added`和`after:item:added`

[关联](https://github.com/marionettejs/backbone.marionette/commit/fade8d18d07efa5ac5d32a938f8fd857fedeb06f#src/marionette.collectionview.js)

这是您的示例重做的小提琴。 [http://jsfiddle.net/puleos/axJg4/](http://jsfiddle.net/puleos/axJg4/)

```
var PatchCollectionView = Backbone.Marionette.CollectionView.extend({
    itemView: PatchView,
    initialize: function() {
        _.bindAll(this);  
    },
    onAfterItemAdded: function(itemView){
        console.log("item was added");
    },
    onRender: function(){
        console.log("render");   
    }
}); 
```

# c++ - Codegear C++ Builder 2007 是否有协议缓冲区绑定？

> ID：16180165
> 
> 赞同：0
> 
> 时间：2013-04-23T22:20:29.303
> 
> 标签：c++, protocol-buffers, c++builder, c++builder-2007

根据我几年前阅读此线程的理解，有人曾经让 Protocol Buffers 与 Codegear C++ Builder 2007 一起工作

[https://groups.google.com/forum/?fromgroups=#!topic/protobuf/YapO_DqFVvc](https://groups.google.com/forum/?fromgroups=#!topic/protobuf/YapO_DqFVvc)

上述 Builder 2007 版本的 protobuf 的作者将其上传到了第 3 方 URL，但是指向它的链接似乎早已失效，从讨论和 Protocol Buffers 2.5.0 的当前状态来看，修复/更改从未从 protobuf 分叉或合并到主干中。

**更新：** 当将 protoc.exe (2.5.0) 生成的代码用于任一示例 .proto 文件时，C++ Builder 2007 会抱怨许多问题，包括 google::internal 命名空间中名称的“重复条目”（例如as `google::internal::kEmptyString` - 它还抱怨`std::hash`基于容器，这`memset`是一个无法识别的符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T11:12:25.913

我花了几天时间才找到解决方案，但这是我设法让它在 Codegear 2007 中工作的方法：

1.  获取 protobuf 的 C++ Builder 版本[https://github.com/saadware/protobuf-cppbuilder](https://github.com/saadware/protobuf-cppbuilder) - 这是基于 2.4.1，所以有点过时，但我猜可以将 C++ builder 更改合并到2.5.0（或任何最新版本）。protobuf 的 C++ Builder 版本适用于 Builder 2009，但它修复了各种问题`std::hash`，因此它比 Google 的版本更好。

2.  复制文件夹中的以下`.cc`文件`./src/google/protobuf`并将其更改为`.cpp`扩展名。`.cbproj`不喜欢的格式似乎存在问题`.cc` （您需要将所有这些文件添加到您的 Codegear 2007 .cbproj - 这些是 libprotobuf-lite 所需的文件）。

    ```
    extension_set.cpp
    generated_message_util.cpp
    message_lite.cpp
    repeated_field.cpp
    wire_format_lite.cpp
    stubs\common.cpp
    stubs\once.cpp
    io\coded_stream.cpp
    io\zero_copy_stream.cpp
    io\zero_copy_stream_impl_lite.cpp 
    ```

3.  根据 'Dazza' 的线程，使用 find-and-replace-in-files（例如 Notepad++）重命名 google::internal 命名空间。请注意，需要区分大小写的查找/替换，因为有时会出现名称“内部”用于其他事物的情况。对于这一步，我按照 Dazza 的建议将其更改为`google::internals`. （注意 - 这既适用于 libprotobuf-lite 也适用于用于生成代码的字符串）

4.  在生成的代码字符串中，搜索所有出现的`memset`并将它们更改为`std::memset` (这主要是针对代码生成器库的；`libprotoc`如果不这样做，则每次重新生成 .proto 绑定时，C++ builder 将无法识别`memset`。

5.  使用 Visual Studio 构建 protoc.exe（我无法让 Protoc.exe 在 Builder 中构建，但这不重要，代码生成器只需要构建一次）

6.  使用 lite 运行时修改示例 .proto 文件； `option optimise_for = LITE_RUNTIME`. 注意 - 打开此选项后，反射功能不可用。

7.  `protoc.exe`使用 .proto 在您的 .proto 文件上运行`--cpp_out`。输出文件将有一个`.cc`扩展名 - 您需要将其重命名为`.cpp`

8.  将生成的文件添加到项目并构建。

（注意 - 仍然有一些警告未解决 - 一个抱怨多余`&`的函数地址，还有一些抱怨有符号/无符号比较 - 但至少它构建并且似乎有效）

# ios - 使用 FBWebDialogs (Facebook SDK 3.5) 成功发布后的 nil resultURL

> ID：16180182
> 
> 赞同：7
> 
> 时间：2013-04-23T22:22:11.653
> 
> 标签：ios, facebook, facebook-ios-sdk

我正在将**Facebook**集成到我的应用程序中以共享网站链接。我正在使用 Feed 对话框来完成此操作，并且我正在关注本教程：
[https](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/) ://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/ 。

我已经成功登录并发布到 Facebook，但我想在发布成功后添加一条消息。该教程内置了这个，但每次我发布时，我都会在日志中看到“*用户取消故事发布。* ”这是用户单击取消时显示的消息。此外，我已经通过调试器确认`resultURL`处理程序收到的参数始终为零，即使在成功发布时也是如此。

起初我认为这是我的配置问题`Facebook App`，但我决定进行测试。我打开了`RPSSample`框架附带的，在视图控制器中的方法`presentRequestsDialogModallyWithSession`调用中添加了一个完成处理程序，我也在那里获得了成功的帖子。`clickInviteFriends``RPSFriendsViewController.m``resultURL`

我错过了什么？

我知道 3.5 SDK 版本非常新，但根据文档，我应该`resultURL`在通过*Facebook 网络对话框*发布后获得一个有效的参数，所以我不确定它是否是一个错误，或者我是否在某处遗漏了一些回调或处理程序.

以防万一，这是我对*Feed Web Dialog*的调用。与教程中的相比，它有细微的变化（实际上更简单）

```
- (void)publish: (EntityToShare *)entityToShare {
NSMutableDictionary *params =
[NSMutableDictionary dictionaryWithObjectsAndKeys:
 entityToShare.link, @"link",
 nil];

// Invoke the dialog
[FBWebDialogs presentFeedDialogModallyWithSession:nil
                                       parameters:params
                                          handler:
 ^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
     if (error) {
         // Error launching the dialog or publishing a story.
         NSLog(@"Error publishing story.");
     } else {
         if (result == FBWebDialogResultDialogNotCompleted) {
             // User clicked the "x" icon
             NSLog(@"User canceled story publishing.");
         } else {
             // Handle the publish feed callback
             NSDictionary *urlParams = [self parseURLParams:[resultURL query]];
             if (![urlParams valueForKey:@"post_id"]) {
                 // User clicked the Cancel button
                 NSLog(@"User canceled story publishing.");
             } else {
                 // User clicked the Share button
                 NSString *msg = [NSString stringWithFormat:
                                  @"Posted story, id: %@",
                                  [urlParams valueForKey:@"post_id"]];
                 NSLog(@"%@", msg);
                 // Show the result in an alert
                 [[[UIAlertView alloc] initWithTitle:@"Result"
                                             message:msg
                                            delegate:nil
                                   cancelButtonTitle:@"OK!"
                                   otherButtonTitles:nil]
                  show];
             }
         }
     }
 }];
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T04:18:41.777

我们已对此进行了修复，并将很快推出。

编辑：

这已在 SDK 版本 3.5.1 中得到修复 在此处查看：[https ://developers.facebook.com/ios/](https://developers.facebook.com/ios/)

# rss - iTunes 客户评论 RSS 源在第 10 页停止

> ID：16180191
> 
> 赞同：4
> 
> 时间：2013-04-23T22:23:07.303
> 
> 标签：rss, itunes

我正在尝试以编程方式从 iTunes 商店获取特定应用程序的评论。像这样：

[https://itunes.apple.com/us/rss/customerreviews/id=380293530/sortBy=mostRecent/xml](https://itunes.apple.com/us/rss/customerreviews/id=380293530/sortBy=mostRecent/xml)

这很好用，XML 甚至内置了分页，告诉我下一页在哪里。

但是，它将加载的最后一页是第 10 页。之后的所有内容（例如[第 11 页](http://itunes.apple.com/rss/customerreviews/page=11/id=380293530/sortby=mostrecent/xml?cc=us)）都返回错误的网关。这是预期的行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-19T14:31:06.540

是的，iTunes Review RSS 提要只上到第 10 页。我们最初认为这是一个错误，并提交了 Radar。苹果将​​其关闭为“按预期工作”。

所以...你必须抓取 10 页，用 ID 对每条评论进行数据库化，然后存储以建立更长的历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T11:27:56.987

iTunes 最多只能显示 10 个页面，因此他们的（私有）RSS API 最多支持 10 个页面。

# html - 包装块级元素时的 HTML5 自动锚点生成

> ID：16180193
> 
> 赞同：0
> 
> 时间：2013-04-23T22:23:20.290
> 
> 标签：html, markup

所以这对我来说很有趣。我有以下示例标记：

```
<a href="test.html">
  <h2>Hello World</h2>
  <div>
    <p>Hello again</p>
  </div>
</a> 
```

当我让我的谷歌浏览器（版本 26）呈现这个时，它会准确地显示这个标记。但是当我像这样在 div 中添加一个锚点时：

```
<a href="test.html">
  <h2>Hello World</h2>
  <div>
    <p>Hello again</p>
    <a href="something-else"></a>
  </div>
</a> 
```

浏览器输出以下内容：

```
<a href="test.html">
  <h2>Hello World</h2>
  </a>
<div>
  <a href="test.html">
    <p>Hello again</p>
  </a>
  <a href="something-else"></a>
</div> 
```

所以这绝对不是我想要的。我可以想象，为了能够单击内部链接，锚点仅应用于某些元素可能是有意义的，但我需要它只是我在那里写它的方式。这是有道理的，因为我必须通过 JavaScript 将内部 div 复制到另一个位置。但是当我这样做时，代码已经搞砸了并显示了第一个链接。

有谁知道如何处理这个？

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:47:59.837

不允许嵌套[`a`元素](http://www.w3.org/TR/html5/text-level-semantics.html#the-a-element)：

> **内容模型：**
> 透明，但不能有交互式内容后代。

[交互式内容](http://www.w3.org/TR/html5/dom.html#interactive-content-0)是“专门用于用户交互的内容”。例如`a`, `button`, `input`, `audio`...。

# c++ - 组织 sqlite3 C/C++ 准备好的语句（避免全局代码混乱）

> ID：16180195
> 
> 赞同：4
> 
> 时间：2013-04-23T22:23:32.027
> 
> 标签：c++, c, sqlite, prepared-statement, code-organization

我正在编写一个需要使用准备好的语句来获得性能优势的应用程序，但我想知道当你的应用程序有几十个甚至数百个准备好的语句时，你如何管理它而不把它变成一团糟的全局代码? 您是否只需要在与使用它们的位置完全不同的地方准备构造函数/函数中的所有语句？

使用 sqlite_exec 很好，因为查询就在您实际使用它的地方，但是对于准备好的语句，我最终将它们放在完全不同的代码区域中，对于需要在函数中绑定哪些变量模糊/困惑实际使用它们。

具体来说，现在我只有一个具有私有变量的数据库单例，

```
sqlite3_stmt *insertPacketCount;
sqlite3_stmt *insertPortContacted;
sqlite3_stmt *insertPacketSize;
sqlite3_stmt *computePacketSizeVariance;
 ... 
```

随着构造函数对 sqlite3_prepare_v2 的数十次调用，

```
// Set up all our prepared queries
res = sqlite3_prepare_v2(db,
    "INSERT OR IGNORE INTO packet_counts VALUES(?1, ?2, ?3, 1);",
    -1, &insertPacketCount,  NULL);
expectReturnValueAndFail(SQLITE_OK);
 ... 
```

以及在其他地方使用它们的实际功能，

```
void Database::IncrementPacketCount(std::string ip, std::string interface, std::string type, uint64_t increment)
{
    int res;

    res = sqlite3_bind_text(incrementPacketCount, 1, ip.c_str(), -1, SQLITE_STATIC);
    expectReturnValue(SQLITE_OK);
    res = sqlite3_bind_text(incrementPacketCount, 2, interface.c_str(), -1, SQLITE_STATIC);
    expectReturnValue(SQLITE_OK);
    res = sqlite3_bind_text(incrementPacketCount, 3, type.c_str(), -1, SQLITE_STATIC);
    expectReturnValue(SQLITE_OK);
    res = sqlite3_bind_int(incrementPacketCount, 4, increment);
    expectReturnValue(SQLITE_OK);

    res = sqlite3_step(incrementPacketCount);
    expectReturnValue(SQLITE_DONE);
    res = sqlite3_reset(incrementPacketCount);
    expectReturnValue(SQLITE_OK);
} 
```

在使用准备好的查询的函数内部，我一直不得不繁琐地返回准备语句来弄清楚绑定索引是什么。

抱歉，如果这含糊不清，但是是否有任何库或方法可以在不牺牲任何性能/安全性的情况下组织此类事情（例如仅附加字符串并调用 sqlite_exec）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T08:57:07.947

您不应将查询字符串从查询执行中移开。如果您编写一个仅在第一次需要时准备语句的辅助函数，您还可以避免在开始时准备所有语句：

```
void Database::PrepareStatementIfNeeded(sqlite3_stmt **stmt,
                                        const std::string& sql)
{
    if (*stmt == NULL) {
        res = sqlite3_prepare_v2(db, sql.c_str(), -1, stmt, NULL);
        ...
    }
} 
```

（但您仍然必须确保完成所有这些。）

此外，如果您给出参数名称而不是数字，则可以使用[sqlite3_bind_parameter_index](http://www.sqlite.org/c3ref/bind_parameter_index.html)来获取正确的索引：

```
void BindParam(sqlite3_stmt *stmt,
               const char *name,
               const std::string& value) // overload for other types
{
    int index = sqlite3_bind_parameter_index(stmt, name);
    if (index == 0)
        error...;
    int res = sqlite3_bind_text(stmt, index, value.c_str(), -1, SQLITE_TRANSIENT);
    ...
}

void Database::IncrementPacketCount(...)
{
    PrepareStatementIfNeeded(&incrementPacketCount,
                             "INSERT OR IGNORE INTO packet_counts"
                             " VALUES(:ip, :intf, :type, 1)");
    BindParameter(incrementPacketCount, "ip",   ip);
    BindParameter(incrementPacketCount, "intf", interface);
    BindParameter(incrementPacketCount, "type", type);
    ...
} 
```

（而且这些`sqlite3_step`/`sqlite3_reset`调用看起来好像你重复了无数次；也为它们创建一个辅助函数。）

# javascript - getElementById（变量）不起作用

> ID：16180200
> 
> 赞同：0
> 
> 时间：2013-04-23T22:23:53.257
> 
> 标签：javascript, html

我尝试使用`aaa`带有简单字符串的变量`getElementById`。但它不起作用。我已经`aaa`通过输入框测试了结果。也许它在结尾或开头有一些空格，但看起来不像。

如果我手动输入元素 ID`getElementById`就可以了。发生了什么？我已经尝试过`.tostring()`，但这也没有帮助。

```
function slideActivity(tagId,width,heigth,topLeft,topRight,bottomRight,bottomLeft,picArray){

    var aaa = tagId.replace("#","");
    document.getElementById('script').value = aaa;

    var container = document.getElementById(aaa); 
```

# vim - vim“语法”不起作用

> ID：16180203
> 
> 赞同：15
> 
> 时间：2013-04-23T22:24:05.383
> 
> 标签：vim, vi, opensuse

这是我的`.vimrc`

```
 1 syntax on
  2 set ts=4
  3 set number
  4 set smartindent
  5 set shiftwidth=4 
```

但是，我尝试编辑`HelloWorld.java`和`HelloWorld.c`. 两者都有纯正的黑色字体。没有任何亮点！

`:syntax on`vim打开后我也尝试过，但没有运气。

```
\>vim -version
VIM - Vi IMproved 7.3 (2010 Aug 15)

\>cat /etc/*-release
openSUSE 11.4 (x86_64)
VERSION = 11.4
CODENAME = Celadon 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-19T21:24:11.447

当您编辑文件时，您是否使用

```
vim filename 
```

这很重要。在某些服务器配置中，如果你`vi filename`有 vim，你会得到 vim，但它是一个非常精简的 vim 版本，与原始 vi 非常相似（除其他外，它不进行语法着色）。在以这种方式配置的系统上，如果您改为键入`vim filename`，您将获得功能齐全的 vim。

我刚刚与一个在安装了 vim-minimal 包以及另一个 vim 包的服务器上的人一起完成了这个工作。我怀疑（但没有验证）该`vim-minimal`软件包将其可执行文件安装为`/bin/vi`.

当您查看实际文件（即`ls -l /bin/vi`vs `ls -l /usr/bin/vim`）时，差异非常明显——一个大约是大小的十倍。它们实际上都是 vim，版本号和所有内容都相同，但是 /bin/vi 编译时启用的功能很少。

为了使它更加混乱：

```
vi existing.pl 
```

打开 .pl 文件，没有给出语法着色

```
vi [enter] 
```

给了vim闪屏，然后从那里

```
:e existing.pl 
```

打开带有语法着色的文件。

Jan Wilamowski 的评论建议通过以下方式进行检查：

```
vi --version 
```

如果这表明未编译语法功能，请尝试

```
vim --version 
```

看看它是否在那里编译。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-03T16:51:23.243

您需要`vim-data`在 openSUSE 上安装该软件包才能使 vim 语法着色工作。听起来很奇怪，我知道这不是默认情况下使用 vim 包引入的，但 AFAIK 它适用于想要创建小型基础安装的人。包 vim-data 包含运行时文件。

还要确保您的远程环境具有适当的`TERM`变量集 TERM=screen-256color、TERM=xterm、TERM=xterm-256color 应该都可以与 ssh 和 ssh 与 screen/tmux 一起正常工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-23T13:48:51.183

如果上述所有操作都已完成，并且您看到一些下划线和粗体而不是实际颜色...这可能对您有用：

```
export TERM=xterm-color 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T22:55:13.903

在你的`.vimrc`，我没有看到`filetype`设置。您可以尝试添加：

```
filetype plugin indent on 
```

到你的 vimrc。

如果你没有`set nocp`，也添加这一行。

如果你读`:h filetype`

```
:filetype on

Each time a new or existing file is edited, Vim will try to recognize the type
of the file and set the 'filetype' option.  This will trigger the FileType
event, which can be used to set the syntax highlighting, set options, etc. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-06T00:00:30.283

For some strange reason on MacOS, 'syntax on' must be the first line in your .vimrc file. The line appears to be ignored if placed elsewhere in the file.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-17T16:17:23.857

未提及的一项是`:set syntax=<type>`，例如`:set syntax=markdown`。

这在上述其他技术不成功的情况下是成功的。

# http - 通过 HTTP 检出谷歌代码

> ID：16180207
> 
> 赞同：0
> 
> 时间：2013-04-23T22:24:27.760
> 
> 标签：http, svn

我正在尝试从谷歌代码中获取一些代码，给出的消息是：

> 非成员可以通过 HTTP 匿名签出只读工作副本。svn 结帐[http://ims-dev.googlecode.com/svn/trunk/ims-dev-read-only](http://ims-dev.googlecode.com/svn/trunk/ims-dev-read-only)

我将如何“通过 HTTP 匿名复制”？如果重要的话，我有一台 Mac。

-埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:50:00.037

[如评论中所述，您会在此处](https://superuser.com/questions/455214/where-is-svn-on-os-x-mountain-lion)找到很多安装 Subversion 的方法。之后，只需在终端中运行给定的命令：

```
svn checkout http://ims-dev.googlecode.com/svn/trunk/ims-dev-read-only 
```

# php - 是否有 Pear 缓存代理服务器？

> ID：16180212
> 
> 赞同：0
> 
> 时间：2013-04-23T22:24:43.980
> 
> 标签：php, pear

我正在做一些 devops 工作，并且经常不得不启动一台机器并从不同的位置安装一堆 Pear 包。

这些不同的位置[会经常离线](http://isup.me/phpdoc.org)（可能一周几次）。无论如何，对我的理智来说太频繁了。

拥有某种我自己托管和运行的缓存代理服务器会很方便，我为每个 Pear 包都去。如果它没有包裹，它会出去拿它。这将减少许多其他服务器的负载。如果上游永远关闭，我还将获得一定程度的保证，我仍然可以访问包。

有这样的软件吗？梨？我什至无法弄清楚 Pyrus 解决了什么问题，但它似乎并没有解决我的问题。

这种包代理/缓存类似于[Nexus](http://www.sonatype.org/nexus/go)在 Java/Maven-land 中所做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:29:18.930

Pyrus 旨在成为 PHP5.3+ 的 PEAR 安装程序。一些较新的 PEAR2 软件包需要它。但这不是缓存的解决方案。

* * *

我认为最简单的方法是从远程服务器下载软件包**及其依赖**项，然后本地安装软件包。这里有一个使用`Benchmark`包的例子：

```
wget 'http://your.cache.server/package/Benchmark-1.2.9.tgz'
tar xf Benchmark-1.2.9.tgz
cp package.xml Benchmark-1.2.9
sudo pear install package.xml 
```

* * *

另一种方法是只使用**缓存 HTTP 代理服务器**，因为 PEAR 使用 HTTP 进行下载。Squid 可能已经满足您的需求。

* * *

您也可以使用[pirum](http://pirum.sensiolabs.org/)。它是一个 PEAR 频道服务器软件，这意味着您可以设置自己的 PEAR 存储库。有了它，您可以自己模拟远程通道服务器（经常关闭）：

*   从该远程渠道下载您需要的软件包并安装在您自己的
*   将域指向 /etc/hosts 中的 127.0.0.1，为它们设置 apache vhosts
*   使用 pyrus 为每个域设置一个通道服务器并将包添加到它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T07:23:34.963

Pyrus 是为 PHP 5.3+ 重新编写的 PEAR 安装程序。

[在https://github.com/c9s/MiniPear](https://github.com/c9s/MiniPear)有一个名为“MiniPEAR”的 PEAR 频道镜像工具

简单地下载一个包并不会给你所有的依赖，所以它不是一个真正的解决方案。

# c# - 单选按钮列表的奇怪视图

> ID：16180214
> 
> 赞同：0
> 
> 时间：2013-04-23T22:25:28.547
> 
> 标签：c#, asp.net, .net, css

有人可以解释一下吗？我怎样才能让它变小呢？没有css类。

![在此处输入图像描述](https://i.stack.imgur.com/GAk8i.png)

```
 <asp:RadioButtonList ID="radioBtnList" runat="server" DataTextField="Name" DataValueField="id" Width="100%"> 
```

我想这太简单了，但是……这让我很紧张。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:30:00.710

这有点令人困惑，因为您说没有 CSS，然后在标签中指定了一个 CSS 类。
您可能应该首先向 CSS 类 radioWithProperWrap 添加一个宽度。
我建议在 Firefox 中使用 FireBug 进行检查，因为这似乎是我发现调查 CSS 问题的最佳方式。

# php - 使用 REST 在 PHP 中使用 Httpful 发送 XML

> ID：16180218
> 
> 赞同：0
> 
> 时间：2013-04-23T22:25:53.953
> 
> 标签：php, rest, httpful

我设法让 SOAP 客户端为客户端工作，但我现在正尝试将 REST 用于稍微不同的项目。我正在使用 Httpful。从我所读到的内容来看，这是我完成所要求的事情所需要的。

到目前为止，这是我的代码。

```
/* MAIN RESTFUL */

$xml_file = './Project.xml';
$xsd_file = './Project.xsd';
$end_uri = 'https://****.com/Service.svc/CreateProject';

/* TEMP TEXTAREA FIELD */

if(!isset($_POST['submit']))
    $_xml = file_get_contents($xml_file);
else
    $_xml = $_POST['xml_input'];

echo '<form method="post" action=""><textarea name="xml_input" rows="10" cols="100">' . $_xml . '</textarea><br /><input type="submit" name="submit" value="Send"></form><br /><a href="./">Reset Form</a><br /><br />';

/* END TEMP TEXTAREA FIELD */

if(isset($_POST['submit']))
    $xml_file = $_POST['xml_input'];

if(isset($_POST['submit']))
{
    $xsd_validate = new DOMDocument();
    $xsd_validate->loadXML($xml_file);

    if($xsd_validate->schemaValidate($xsd_file))
        $sendXML = true;

    if($sendXML == true)
    {
        require('./httpful-master/bootstrap.php');

        $request = \Httpful\Request::post($end_uri)
            ->body($xml_file)
            ->sendsXml()
            ->send();

        if($request)
            echo 'SENT!';
    }
} 
```

与我一起工作的那个人也不太了解 REST，但显然有一种方法可以从发送的请求中检索响应。有谁知道，或者至少可以指出我正确的方向来解决这个问题？

谢谢。

编辑：对不起，只是为了详细说明。XML 被放入 textarea 字段，然后根据 XSD 文件进行验证。如果成功，它将将该 XML 发布到 REST 端点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T06:43:36.090

发送调用的返回值（在您的代码中命名为 $request）实际上是一个 Httpful::Response 对象并包含来自您的 http 调用的响应。

试试 echo $request->body; 而不是回显“发送！”；

并记住始终为 if 表达式编写块，您可以通过跳过它来创建难以发现的错误 :)

# javascript - Android WebView中的Highcharts Legend Selection双重触发

> ID：16180226
> 
> 赞同：1
> 
> 时间：2013-04-23T22:26:51.870
> 
> 标签：javascript, android, webview, highcharts, legend

我在我的 Android 应用程序中通过 WebView 使用 Highcharts 有一个饼图、条形图和面积图。它们都有图例，可以根据用户的需要减少系列。我注意到在图例上选择一个项目是双重射击。因此，我无法从图表中删除数据点/系列，因为它已被删除并自动添加回来。请注意，我使用的是 Android 4.1 和 HighchartsJS 3.0.1。

作为测试，我指出我的 WebView 直接从 Highcharts API 演示站点加载，我能够重现该问题。有没有人通过一些阻止这种“幽灵”点击的javascript代码快速解决这个问题？

如果您想通过 Android 应用程序重现该问题，这是我使用的代码：

仪表板活动.java

```
public class DashboardActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_dashboard);
       WebView webView = (WebView)findViewById(R.id.dashboard_webview);
       webView.getSettings().setJavaScriptEnabled(true);
       webView.loadUrl("http://www.highcharts.com/demo/pie-legend");
    }
} 
```

活动仪表板.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".DashboardActivity" >

<WebView 
    android:id="@+id/dashboard_webview"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:17:24.267

我能够通过编辑 highcharts 源来解决这个问题。在第 9944 行，更改

```
.on('click', function (event) { 
```

至

```
.on('touchend', function (event) { 
```

# iphone - 为东部时区的未来日期设置本地通知

> ID：16180229
> 
> 赞同：0
> 
> 时间：2013-04-23T22:27:16.270
> 
> 标签：iphone, ios, objective-c, xcode, apple-push-notifications

我正在为我正在开发的应用程序添加本地通知。我只在 2013 年 4 月 30 日纽约/东部时间晚上 11:00 设置了一个通知。我该怎么做？我尝试了多种方法，但没有一种方法能正常工作。这是我目前正在使用的（它不起作用）：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
if (![@"1" isEqualToString:[[NSUserDefaults standardUserDefaults]
                            objectForKey:@"setNotify"]]) {
    [[NSUserDefaults standardUserDefaults] setValue:@"1" forKey:@"setNotify"];
    [[NSUserDefaults standardUserDefaults] synchronize];
    NSString *str = [NSString stringWithFormat:@"2013-04-23T18:22:00"];
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"YYYY-MM-dd'T'HH:mm:ss'"];
    [dateFormat setTimeZone:[NSTimeZone timeZoneWithName:@"US/Eastern"]];
    NSDate *dte = [dateFormat dateFromString:str];
    NSCalendar *cal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    [cal setTimeZone:[NSTimeZone timeZoneWithName:@"US/Eastern"]];
    UIApplication* app = [UIApplication sharedApplication];
    UILocalNotification* notifyAlarm = [[UILocalNotification alloc]
                                        init];
    if (notifyAlarm)
    {
        notifyAlarm.fireDate = dte;
        notifyAlarm.timeZone = [NSTimeZone timeZoneWithName:@"US/Eastern"];
        notifyAlarm.repeatInterval = 0;
        notifyAlarm.soundName = @"trumpet.m4a";
        notifyAlarm.alertBody = @"Message";
        [app scheduleLocalNotification:notifyAlarm];
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:05:35.000

我注意到的一件事是，我怀疑您是否打算在日期格式化程序中使用 YYYY。来自 Apple 文档

```
A common mistake is to use YYYY. yyyy specifies the calendar year whereas
YYYY specifies the year (of “Week of Year”), used in the ISO year-week calendar.
In most cases, yyyy and YYYY yield the same number, however they may
be different. Typically you should use the calendar year. 
```

当我更改此代码时，您的代码对我有用并发布了通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T22:45:04.110

试试下面的代码：

```
NSDateComponents *dateComps = [[NSDateComponents alloc] init];
[dateComps setDay:30];
[dateComps setMonth:4];
[dateComps setYear:2013];
[dateComps setHour:23];
[dateComps setMinute:0];
[dateComps setSecond:0];

NSDate *itemDate = [calendar dateFromComponents:dateComps];

UILocalNotification *localNotif = [[UILocalNotification alloc] init];
if (localNotif == nil)
    return;
localNotif.fireDate = itemDate;
localNotif.timeZone = [NSTimeZone timeZoneWithName:@"US/Eastern"];

localNotif.alertBody = @"Message";
localNotif.repeatInterval = 0;
localNotif.soundName = @"trumpet.m4a";
localNotif.applicationIconBadgeNumber = 1;

[[UIApplication sharedApplication] scheduleLocalNotification:localNotif]; 
```

# c# - C# .net 网格视图

> ID：16180235
> 
> 赞同：0
> 
> 时间：2013-04-23T22:27:50.647
> 
> 标签：c#, .net, visual-studio-2010

我有一个 gridView，`select`每行都有一个字段。当我选择第一行时，我想被重定向到 gamers.aspx 页面，但是当我选择第二行时，我想被发送到 audio.aspx 页面。

```
GridViewRow row = GridView1.SelectedRow;
Response.Redirect("gamers.aspx? EntityID=" + row.Cells[1].Text);

GridViewRow row1 = GridView1.SelectedRow;
Response.Redirect("audio.aspx? EntityID=" + row.Cells[2].Text); 
```

这就是我所做的，但是当我`select`从 gridView 中的任何行单击时，它每次都会将我发送到 gamers.aspx。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:15:09.600

如果我正确理解您的意图，我建议您使用开关。

```
GridViewRow row = GridView1.SelectedRow;
string entityID = row.Cells[1].Text;

switch (row.RowIndex)
{
    case 1:
        Response.Redirect("gamers.aspx?EntityID=" + entityID);
        break;
    case 2:
        Response.Redirect("audio.aspx?EntityID=" + entityID);
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:30:27.540

Response.Redirect() 抛出异常并几乎立即终止当前请求。所以下一个代码不会被执行。

您可能应该检查选择了哪一行并执行第一个重定向或第二个重定向。

# scala - Scala中类值内的路径依赖类型

> ID：16180248
> 
> 赞同：3
> 
> 时间：2013-04-23T22:29:36.967
> 
> 标签：scala, path-dependent-type

我想将具有抽象类型的类型的值赋予一个类，然后使用它的路径相关类型。看下面的例子（使用 Scala 2.10.1）：

```
trait Foo {
  type A
  def makeA: A
  def useA(a: A): Unit
}

object Test {

  class IntFoo extends Foo {
    type A = Int
    def makeA = 1
    def useA(a: Int) = println(a)
  }

  class FooWrap(val a: Foo) {
    def wrapUse(v: a.A) = a.useA(v)
  }

  val foo = new IntFoo

  /* Path dependent locally */
  val bar = foo  
  bar.useA(foo.makeA)   // works

  /* Path dependent through class value */
  val fooWrap = new FooWrap(foo)

  fooWrap.a.useA(foo.makeA)  // fails
  // error: type mismatch; found : Int required: Test.fooWrap.a.A

  fooWrap.wrapUse(foo.makeA) // fails
  // error: type mismatch; found : Int required: Test.fooWrap.a.A

} 
```

首先，我不明白本地和类值情况之间的根本区别（注意公共的、不可变的值）以及类型检查失败的原因（因为很明显`Test.fooWrap.a.A =:= foo.A`）。这是 Scala 编译器的限制吗？

其次，我怎样才能实现我想要做的事情？

**更新**

似乎这可以通过使用泛型和内联类型约束来实现：

```
class FooWrap[T](val a: Foo { type A = T }) {
  def wrapUse(v: T) = a.useA(v)
} 
```

但是，在我的情况下，`A`实际上是一种更高种类的类型，因此示例变为：

```
trait Foo {
  type A[T]
  def makeA[T]: A[T]
  def useA(a: A[_]): Unit
}

object Test {

  class OptFoo extends Foo {
    type A[T] = Option[T]
    def makeA[T] = None
    def useA(a: A[_]) = println(a.get)
  }

  class FooWrap(val a: Foo) {
    def wrapUse(v: a.A[_]) = a.useA(v)
  }

  val foo = new OptFoo

  /* Path dependent locally (snip) */

  /* Path dependent through class value */
  val fooWrap = new FooWrap(foo)

  fooWrap.a.useA(foo.makeA)  // fails
  // polymorphic expression cannot be instantiated to expected type;
  // found : [T]None.type required: Test.fooWrap.a.A[_]

  fooWrap.wrapUse(foo.makeA) // fails
  // polymorphic expression cannot be instantiated to expected type;
  // found : [T]None.type required: Test.fooWrap.a.A[_]

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T12:50:06.560

在您最初的问题中，您的问题是 Scala 编译器无法证明结果类型`foo.makeA`与`fooWrap.a.useA`. `foo`要做到这一点，它需要能够证明`fooWrap.a`我们可以直观地看到的身份必须是这里的情况，但这对于编译器来说并不容易跟踪。

有几种方法可以解决这个问题。首先，您可以使用`fooWrap.a`uniformly 代替`foo`,

```
scala> fooWrap.a.useA(fooWrap.a.makeA)
1 
```

现在编译器很容易将 A ( `fooWrap.a`) 的前缀识别为在两次出现中都是相同的。

其次，您可以以更精确地`FooWrap`捕获其参数类型的方式进行参数化，`Foo`

```
scala> class FooWrap[F <: Foo](val a: F) {
     |   def wrapUse(v: a.A) = a.useA(v)
     | }
defined class FooWrap

scala> val fooWrap = new FooWrap(foo)
fooWrap: FooWrap[IntFoo] = FooWrap@6d935671

scala> fooWrap.a.useA(foo.makeA)
1 
```

这里的类型参数`FooWrap`被推断为`IntFoo`而不是裸露`Foo`的，因此`A`被认为是精确`Int`的，因为它在结果类型中`foo.makeA`。

在您的更新中，您引入了一个额外的皱纹：您将签名更改`useA`为，

```
def useA(a: A[_]): Unit 
```

这`_`是一个存在主义，它将挫败所有试图哄骗编译器证明有用的类型等式的尝试。相反，你需要一些类似的东西，

```
trait Foo {
  type A[T]
  def makeA[T]: A[T]
  def useA[T](a: A[T]): Unit
}

class OptFoo extends Foo {
  type A[T] = Option[T]
  def makeA[T]: A[T] = None
  def useA[T](a: A[T]) = a map println
}

class FooWrap[F <: Foo](val a: F) {
  def wrapUse[T](v: a.A[T]) = a.useA(v)
}

val foo = new OptFoo 
```

示例 REPL 会话，

```
scala> val fooWrap = new FooWrap(foo)
fooWrap: FooWrap[OptFoo] = FooWrap@fcc10a7

scala> fooWrap.a.useA(foo.makeA)

scala> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:49:42.657

更高种类的类型也可以作为通用参数添加到 FooWrap 中：

```
class FooWrap[T[V]](val a: Foo { type A[V] = T[V] }) {
  def wrapUse(v: T[_]) = a.useA(v)
} 
```

但是（在此示例中）推理失败：

```
val fooWrap = new FooWrap[Option](foo) 
```

否则：

```
- type mismatch; found : Test.foo.type (with underlying type Test.OptFoo) required: Foo{type A[V] = T[V]}
- inferred kinds of the type arguments (Option[V]) do not conform to the expected kinds of the type parameters (type T) in class FooWrap. Option[V]'s type parameters do not match type T's expected 
 parameters: class Option has one type parameter, but type T has one 
```

还有其他更好的解决方案吗？

# php - 上传错误 - 文件不可写

> ID：16180250
> 
> 赞同：0
> 
> 时间：2013-04-23T22:29:46.447
> 
> 标签：php, html, file, file-upload

我想将多个文件上传到服务器。

据我所见，文件不可写。

我该怎么做才能使我的代码实际工作并上传文件。

PHP：

```
if(isset($_FILES ['uploaded_files']))
{

     foreach($_FILES['uploaded_files']['name'] as $key=>$value)
     {
          if(is_uploaded_file($_FILES['uploaded_files']['tmp_name'][$key]) && $_FILES['uploaded_files']['error'][$key] == 0)
          {

                $filename = $_FILES['uploaded_files']['name'][$key];

                if (is_writable($filename)) {
                        echo 'The file is writable';
                    } else {
                        echo 'The file is not writable';
                    }
                if(move_uploaded_file($_FILES['uploaded_files']['tmp_name'][$key], '../images/gallery'. $filename))
                {
                //code
                }
                else
                {
                      die ('There was a problem uploading the pictures.');
                } 
          }
          else
          {
            die ('There is a problem with the uploading system.');
          }
     }
} 
```

HTML：

```
<form enctype="multipart/form-data" action="upload.php" method="POST">
        <input type="hidden" id="input_clone_id" name="input_clone_id" value="'.$row['id'].'"/>
        <input type="hidden" id="input_clone_var" name="input_clone_var" value="V"/>
            <input type="file" name="uploaded_files[]" id="input_clone" multiple="multiple" /><br />
        <input type="submit" style="margin-left:0" value="Upload Files" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:38:34.450

您正在检查您最近上传但尚未保存的文件是否可写，我认为这样的文件永远不会是可写的。最好删除它，或者只是检查您要上传到的文件夹是否可写。

除此之外，我检查了您的代码并且它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T22:45:04.623

我看到这有两个问题。第一个是安全问题，第二个可能是导致您的问题的原因

**您在这里遇到安全问题**：

```
$filename = $_FILES['uploaded_files']['name'][$key];
...
if(move_uploaded_file($_FILES['uploaded_files']['tmp_name'][$key], '../images/gallery'. $filename))
... 
```

问题 a：由于`$filename`来自 $_FILES 数组，它不能被信任。用户告诉您的网站他们的文件名称是什么并将其放在那里。他们可能会为您提供一些虚假文件名，这可能会导致您的脚本以有趣的方式失败。在以任何方式使用它之前，您需要清理该文件名。

问题 b：通过允许用户指定文件名，他们可能会通过指定冲突的文件名来覆盖“图像/画廊”目录中的其他文件。避免这种情况的方法是使用数据库，为上传的文件生成唯一标识符，以该唯一名称存储文件，并在数据库中记录原始文件名和其他信息。这样，您始终知道原始文件名是什么，并且您没有机会尝试覆盖该目录中的文件。

**写作问题：***

您的“检查可写”语句是错误的。返回的文件名是用户提交时使用的文件名。这不会指向您文件系统上的任何点......它指向他们（有时）您看不到的点。您需要检查的是您的“../images/gallery”目录是可写的，而不是`$filename`. 如果失败，如果您有命令行访问权限，则需要在图像文件夹中执行“chmod -R 777 gallery”，或者如果您使用 FTP 与服务器通信，则通过您正在使用的任何 FTP 客户端为其提供世界写入访问权限.

因此，您应该拥有的是：

```
if (is_writable("../images/gallery")) {
    echo 'The file is writable';
} else {
    echo 'The file is not writable';
} 
```

之后，如果您的脚本返回并显示“文件是可写的”，它*应该*能够将文件复制到您的图像/画廊文件夹中（记住不要使用用户给您的文件的名称）。如果没有，也许您没有权限移动上传的文件。

至于上传文件的位置，我认为有时它们会在脚本执行结束后被删除*，*但如果没有，你可以回显`'tmp_name'`文件的位置，如果你去那个目录，你应该会发现它就在那里。这只是一个验证测试，以确保文件实际到达您的服务器。只要您对`chmod 777`要将上传文件移动到的目录具有写入权限（即做什么），您就应该能够将其复制到那里。

# facebook - 使用 Open Graph API 将受邀访客作为管理员添加到活动中

> ID：16180254
> 
> 赞同：1
> 
> 时间：2013-04-23T22:30:06.623
> 
> 标签：facebook, facebook-graph-api, administrator

我正在尝试使用 Open Graph Events API 将来宾添加为管理员。不要将此视为文档中的功能。有没有人尝试过或者知道这是否可能？

# nhibernate - 如何使用 Fluent NHibernate 在他自己的表中映射一个值对象？

> ID：16180256
> 
> 赞同：1
> 
> 时间：2013-04-23T22:30:11.780
> 
> 标签：nhibernate, fluent-nhibernate-mapping

我有以下场景：我有一个实体的组件，但不是将它存储在同一个表中，而是需要存储在一个单独的表中。这两个表之间的关系最多是一对一的（1-0:1）。组件表的 id 由主表给出，作为值对象它没有标识。现在我想知道如何在不向域模型中添加 Id 的情况下映射要存储在他自己的表中的组件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-11T14:29:56.567

[映射一对一关系的主要方法](https://stackoverflow.com/a/18280567/221708)有三种：继承`one-to-one`、、和`join`。我很确定所有这三个都可以配置为共享主键，而不必添加额外的主键列。在这种情况下，`join`听起来是最合适的，因为您不必创建单独的实体。 [Ayende 的文章](http://ayende.com/blog/3961/nhibernate-mapping-join)是理解的最佳资源`join`。

示例（来自 Ayende 的文章，但添加了一个组件）：

```
<class name="Person"
       table="People">

  <id name="Id">
    <generator class="identity"/>
  </id>
  <property name="Name" />

  <join table="Addresses">
    <key column="PersonId"/>
    <component name="Address"
               class="Address">
      <property name="Line1"/>
      <property name="Line2"/>
      <property name="City"/>
      <property name="Country"/>
      <property name="ZipCode"/>
    </component>
  </join>
</class> 
```

这个类看起来像：

```
public class Person
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual Address Address { get; set; }
}

public class Address
{
    public string Line1 { get; set; }
    public string Line2 { get; set; }
    public string City { get; set; }
    public string Country { get; set; }
    public string ZipCode { get; set; }
} 
```

请注意，`Address`它没有`Id`属性，并且它的属性不是虚拟的。这是因为 Address 不是一个实体，它是一个组件。但允许它与的其他属性`join`存在于单独的表中。`Person`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T13:32:30.953

如果具有值对象的表仅被一个表引用，您可以使用该表的主键作为主键，但不要使用任何方法访问值对象中的字段。

如果该表被更多其他表引用，则您必须创建自己的主键。

您至少需要一个主键才能加入这些表。

# google-app-engine - 更改谷歌应用引擎名称

> ID：16180259
> 
> 赞同：3
> 
> 时间：2013-04-23T22:30:29.347
> 
> 标签：google-app-engine, google-cloud-datastore

我将一个工作的谷歌应用程序引擎 repo 克隆到我的本地环境中并让它工作。后来我决定要部署到我自己的 GAE 应用程序，所以我将 app.yaml 中的名称更改为我新创建的应用程序中的名称。

但是当使用 GoogleAppEngineLauncher 启动它时，我收到了这个错误：

```
BadRequestError: app "dev~bandtasticnews" cannot access app "dev~noticiashacker"'s data 
```

原始名称是 noticiashacker，新名称是 bandtasticnews，克隆的在线工作正常，但开发人员已损坏，如果我希望它在本地启动并在部署前返回，我必须将 app.yaml 上的名称更改为原始名称。

我的代码中没有更多行引用原始名称，我不知道它为什么要尝试检索它。

更新 这是 GoogleAppEngineLauncher 日志中显示的堆栈跟踪

```
*** Running dev_appserver with the following flags:
    --skip_sdk_update_check=yes --port=8080 --admin_port=8000 --clear_datastore=yes
Python command: /usr/bin/python2.7
INFO     2013-04-24 00:45:10,683 devappserver2.py:498] Skipping SDK update check.
WARNING  2013-04-24 00:45:10,690 api_server.py:328] Could not initialize images API; you are likely missing the Python "PIL" module.
INFO     2013-04-24 00:45:10,693 api_server.py:152] Starting API server at: http://localhost:50495
INFO     2013-04-24 00:45:10,700 dispatcher.py:150] Starting server "default" running at: http://localhost:8080
INFO     2013-04-24 00:45:10,706 admin_server.py:117] Starting admin server at: http://localhost:8000
/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/mtime_file_watcher.py:82: UserWarning: There are too many files in your application for changes in all of them to be monitored. You may have to restart the development server to see some changes to your files.
  'There are too many files in your application for '
ERROR    2013-04-24 00:45:17,489 webapp2.py:1528] app "dev~bandtasticnews" cannot access app "dev~noticiashacker"'s data
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/Users/grillermo/c/BandtasticNews/Noticias-HAcker/handlers/MainHandler.py", line 85, in get
    self.response.out.write(template.render('templates/main.html', locals()))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/webapp/template.py", line 92, in render
    return t.render(Context(template_dict))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/webapp/template.py", line 172, in wrap_render
    return orig_render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 173, in render
    return self._render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 167, in _render
    return self.nodelist.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 794, in render
    bits.append(self.render_node(node, context))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 807, in render_node
    return node.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/loader_tags.py", line 125, in render
    return compiled_parent._render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 167, in _render
    return self.nodelist.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 794, in render
    bits.append(self.render_node(node, context))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 807, in render_node
    return node.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/defaulttags.py", line 257, in render
    return self.nodelist_true.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 794, in render
    bits.append(self.render_node(node, context))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 807, in render_node
    return node.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 842, in render
    output = self.filter_expression.resolve(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 551, in resolve
    obj = self.var.resolve(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 694, in resolve
    value = self._resolve_lookup(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 729, in _resolve_lookup
    current = current()
  File "/Users/grillermo/c/BandtasticNews/Noticias-HAcker/models.py", line 73, in sum_votes
    self.put()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 1070, in put
    return datastore.Put(self._entity, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/datastore.py", line 579, in Put
    return PutAsync(entities, **kwargs).get_result()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
    return self.__get_result_hook(self)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/datastore/datastore_rpc.py", line 1569, in __put_hook
    self.check_rpc_success(rpc)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/datastore/datastore_rpc.py", line 1224, in check_rpc_success
    raise _ToDatastoreError(err)
BadRequestError: app "dev~bandtasticnews" cannot access app "dev~noticiashacker"'s data
INFO     2013-04-24 00:45:17,532 recording.py:673] Saved; key: __appstats__:017200, part: 157 bytes, full: 69853 bytes, overhead: 0.003 + 0.031; link: http://localhost:8080/_ah/stats/details?time=1366764317201
ERROR    2013-04-24 00:45:17,538 cgi.py:121] Traceback (most recent call last):
  File "/Users/grillermo/c/BandtasticNews/Noticias-HAcker/main.py", line 91, in <module>
    main()
  File "/Users/grillermo/c/BandtasticNews/Noticias-HAcker/main.py", line 86, in main
    util.run_wsgi_app(application)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/webapp/util.py", line 98, in run_wsgi_app
    run_bare_wsgi_app(add_wsgi_middleware(application))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/webapp/util.py", line 118, in run_bare_wsgi_app
    for data in result:
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/appstats/recording.py", line 1284, in appstats_wsgi_wrapper
    result = app(environ, appstats_start_response)
  File "/Users/grillermo/c/BandtasticNews/Noticias-HAcker/gaesessions/__init__.py", line 451, in __call__
    return self.app(environ, my_start_response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 1519, in __call__
    response = self._internal_error(e)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 1511, in __call__
    rv = self.handle_exception(request, response, e)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 1505, in __call__
    rv = self.router.dispatch(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 1253, in default_dispatcher
    return route.handler_adapter(request, response)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 1077, in __call__
    return handler.dispatch()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 547, in dispatch
    return self.handle_exception(e, self.app.debug)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/webapp2-2.3/webapp2.py", line 545, in dispatch
    return method(*args, **kwargs)
  File "/Users/grillermo/c/BandtasticNews/Noticias-HAcker/handlers/MainHandler.py", line 85, in get
    self.response.out.write(template.render('templates/main.html', locals()))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/webapp/template.py", line 92, in render
    return t.render(Context(template_dict))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/webapp/template.py", line 172, in wrap_render
    return orig_render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 173, in render
    return self._render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 167, in _render
    return self.nodelist.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 794, in render
    bits.append(self.render_node(node, context))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 807, in render_node
    return node.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/loader_tags.py", line 125, in render
    return compiled_parent._render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 167, in _render
    return self.nodelist.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 794, in render
    bits.append(self.render_node(node, context))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 807, in render_node
    return node.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/defaulttags.py", line 257, in render
    return self.nodelist_true.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 794, in render
    bits.append(self.render_node(node, context))
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 807, in render_node
    return node.render(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 842, in render
    output = self.filter_expression.resolve(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 551, in resolve
    obj = self.var.resolve(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 694, in resolve
    value = self._resolve_lookup(context)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/_internal/django/template/__init__.py", line 729, in _resolve_lookup
    current = current()
  File "/Users/grillermo/c/BandtasticNews/Noticias-HAcker/models.py", line 73, in sum_votes
    self.put()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/ext/db/__init__.py", line 1070, in put
    return datastore.Put(self._entity, **kwargs)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/datastore.py", line 579, in Put
    return PutAsync(entities, **kwargs).get_result()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/apiproxy_stub_map.py", line 604, in get_result
    return self.__get_result_hook(self)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/datastore/datastore_rpc.py", line 1569, in __put_hook
    self.check_rpc_success(rpc)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/datastore/datastore_rpc.py", line 1224, in check_rpc_success
    raise _ToDatastoreError(err)
BadRequestError: app "dev~bandtasticnews" cannot access app "dev~noticiashacker"'s data 
```

更新在另一台计算机上尝试过，结果是一样的，但这次我尝试运行该应用程序，而没有名称 noticiashacker。

更新 app.yaml

```
application: bandtasticnews
version: 5
runtime: python27
api_version: 1
threadsafe: false

libraries:
- name: django
  version: "1.3"

builtins:
- appstats: on
- remote_api: on

handlers:
- url: /favicon.ico
  static_files: static/favicon.ico
  upload: static/favicon.ico
- url: /robots.txt
  static_files: static/robots.txt
  upload: static/robots.txt
- url: /reports/.*
  script: reports.py
  login: admin
- url: /tasks/send_top_to_twitter
  script: crons.py
  login: admin
- url: /tasks/send_to_killmetrics
  script: crons.py
  login: admin
- url: /tasks/update_top_karma
  script: crons.py
  login: admin
- url: /tasks/cleanup_sessions
  script: crons.py
  login: admin
- url: /favicon.ico
  static_files: static/favicon.ico
  upload: static/favicon.ico   
- url: /robots.txt             
  static_files: static/robots.txt 
  upload: static/robots.txt    
- url: /static
  static_dir: static
- url: /admin/.*
  script: admin.py
  login: admin
- url: .*
  script: main.py 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T18:02:39.937

也许试试这个，首先将您的应用程序下载到一个新目录

```
appcfg.py download_app -A <your_app_id> -V <your_app_version> <output-dir> 
```

使用您要使用的应用程序 ID 创建一个新的 app.yaml（不要复制它，而是新建一个），然后运行 ​​dev_appserver ./

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:34:12.800

您在 dev 数据存储中拥有来自旧 appid 的数据。

启动开发服务器时，您需要使用 --clear_datastore 清除本地数据存储。不确定您如何在启动器中执行此操作（永远不要使用它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T00:53:19.380

尝试登录管理控制台，

```
http://localhost:8888/_ah/admin 
```

在保留原始名称的同时，您可以在数据存储查看器中看到一些数据，将其清除（对于所有类型的实体），停止开发服务器并将名称更改为新名称，然后重新开始。它应该工作。

问题在于命名空间，谷歌在多个应用程序之间分离数据的方式。您的一些数据保留在未删除的旧命名空间中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-26T07:48:19.573

就我而言，只需删除 cookie 即可解决问题。之后我发现了这个解决方案，我观察到 Chrome 隐身模式没有问题。

# javascript - 如何检测json何时不是json（它是html）

> ID：16180260
> 
> 赞同：0
> 
> 时间：2013-04-23T22:30:40.283
> 
> 标签：javascript, json, api, parsing

我正在与一家公司损坏的 API 合作。当端点不可用时，我不会遇到错误，它只是在正文中发回页面不可用的 HTML（通常它返回 JSON）。

我试图弄清楚如何检测是否应该将正文解析为 json 或丢弃。

我正在使用javascript，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T22:32:32.657

您可以尝试解析它，如果它失败，则它不是有效的 JSON：

```
function tryParse(jsonstring){
    try{
       return JSON.parse(jsonstring);
    }
    catch(err){
       return null;
    }
} 
```

# windows - 自动完全更新 Windows

> ID：16180265
> 
> 赞同：6
> 
> 时间：2013-04-23T22:31:10.397
> 
> 标签：windows, batch-file, automation, windows-update, mdt

我正在做一个项目，目标是能够 100% 更新 Windows 计算机。这意味着无需用户交互即可自动更新窗口的程序或脚本。理想情况下，可以从另一个脚本运行的独立脚本。

原因：我需要更新我工作中的很多计算机。它们可以处于任何补丁级别以及从 Windows XP 到 Windows 8 的所有内容。我的目标是启动脚本，等待/执行其他操作，然后找到完全打补丁的计算机。

[我通过在MDT](http://technet.microsoft.com/en-us/solutionaccelerators/dd407791.aspx) [Task Sequence](http://technet.microsoft.com/en-us/library/bb693631.aspx)中找到 ZTIWindowsUpdate.wsf 解决了很多问题。

这可以像这样从管理员 cmd 使用：

```
cssript.exe ZTIWindowsUpdate.wsf 
```

到目前为止，我的问题是计算机需要在某些更新之间重新启动。可能是因为依赖。ZTIWindowsUpdate.wsf 需要以管理员身份运行，我似乎找不到在重新启动时以管理员身份启动它的解决方案。*此外，如果我让脚本在启动时*运行，我该如何停止它，以及我如何知道何时停止它？

有人可以帮助解决这个问题的万无一失吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T00:53:29.173

不需要完全更新 Windows 操作系统，不需要大多数更新，大多数更新与安全无关，没有它们我们也可以生存，您需要阅读每个更新的说明以了解所做的更改。在几种情况下，完全更新 Windows 可能会对性能产生负面影响。

您只需要下载所需的更新，然后使用此批处理脚本将其存储在一个文件夹中：

```
@Echo off
For %%# in (*.msu) Do (
    Echo: Installing update: %%#
    Wusa "%%#" /quiet /norestart
)
Echo Windows Update finished.
Pause&Exit 
```

您也可以使用 winrar 将文件夹（更新 + 脚本）压缩为 Self 可执行文件，以将其作为独立文件分发。

> **信息：**

**Wusa** .exe 是**Windows Update 命令行**应用程序。

这些文件是一个一个处理的，而不是一次处理的。

**静音**开关使安装静音。

即使需要，安装更新后 norestart 开关也不会重新启动**。**

如果在操作系统中安装了更新，则不会再次安装，不会出现错误窗口或停止脚本的执行。

PS：见**乌萨/？**更多开关。

我希望这有帮助。

> **更新：**

另一种选择是使用**WSUS**实用程序下载并安装所有更新。

[http://download.wsusoffline.net/](http://download.wsusoffline.net/)

Win7 x64（例如）的更新存储在此处：“...\wsusoffline\client\w61-x64\glb”

PS：如果需要在“后台”中自动执行任务，则需要在应用程序的“CMD”目录中的“DoUpdate.cmd”批处理文件。

![在此处输入图像描述](https://i.stack.imgur.com/wJ66I.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T23:59:46.087

您所描述的问题的最简单解决方案是让您的脚本为内置管理员帐户配置自动登录，然后将自身添加到 Startup 文件夹。您确实需要知道（或重置）管理员帐户密码才能使用此选项。

还有许多其他可能性，例如：使用启动脚本和 psexec；使用 srvany 创建运行脚本的服务；使用任务调度程序来安排你的脚本以交互或非交互方式自动运行；禁用 WUA，为您使用的帐户配置自动登录，并将脚本添加到 Startup 文件夹。

请注意，如果您可以设置 WSUS 服务器或（如果您还没有 Windows 服务器更简单、更便宜）透明缓存代理，您将节省时间和带宽。但是，这不会避免在更新序列期间需要重新启动。

您可能会发现[我的脚本](http://www.scms.waikato.ac.nz/~harry/wsusupdate.vbs)作为 ZTIWindowsUpdate.wsf 的替代起点很有用，只是因为它更小且更易于理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T22:57:20.700

WindowsUpdate 过程中最耗时的事情是下载更新的安装文件。您应该查看网络中安装的 WUS（Window 更新服务器）的 lokaly，并确保 PC 从 WUS 更新。如果 PC 都在 ActiveDirectory 域中，那么所需的设置很容易管理。但如果不是这个设置可以制作一个简单的批处理脚本，它使用正常的 Windows 更新例程。

另一种解决方案是制作批处理脚本，在其中使用静默开关安装预下载的 updateFiles。Allmoast 每个 setup.exe 都有这样一个静音开关。如果不需要更新，则此上传会自动停止更新。我现在正在安静地使用这样的批处理脚本。

PS：如果计算机来自一个/您的公司，您应该“感谢”您的前任在遥远的未来工作了许多小时。

PPS：顺便说一句，XP 和 Vista 应该被淘汰。它们现在已经很老了，对于 XP，微软明年将取消已经延长的支持时间，并且只有在 Windows 7 无论如何都不是解决方案的小情况下确实需要它时才应该使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-14T02:47:56.183

跑步

```
cssript.exe ZTIWindowsUpdate.wsf 
```

重新启动后作为管理员，您可以在任务计划程序中创建具有适当权限的任务并在启动时运行。=]

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-29T09:32:59.170

[WuInstall](http://wuinstall.com)是一种自动化方式。我现在使用它已经 1 年了，它很完美，它实际上做了它应该做的事情。它是一个命令行工具，可以自动搜索、下载和安装更新。有几个“开关”可让您自定义流程。例如，由于重新启动循环开关，更新新设置的 PC 可以轻松完成 - 一次完成。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-28T14:36:21.633

这是另一种方式 ------ ***执行以下说明，风险自负***：要自动更新 Windows，这些说明可能适用于您的系统，也可能不适用，但它似乎在一定程度上适用于 Windows 7，因为这些说明在 Windows 7 上进行了测试.

***必读： 1\. 如果以下步骤不起作用，请验证您很可能是域的一部分，并且您的安全策略可能不允许您执行以下步骤！2.在Windows更新期间UAC提示也被禁用，因此批处理文件可以不间断地运行；完成后小心将其恢复为默认值***

***注意此步骤会降低您的计算机的安全性，请在您的计算机完全更新后立即将其删除。如果需要，设置 24 小时后的提醒***：

***1.*** 首先，您必须确保您的计算机自动登录到用户。您可以通过单击开始菜单，键入“netplwiz”，按回车键或打开向导，在用户选项卡下，选择您的用户名，然后取消选中“需要密码”，输入您的密码，关闭此窗口。

***2.*** 创建 3 个批处理文件以启动自动化过程。（打开记事本将每个代码粘贴到单独的记事本中并执行另存为对应文件名.bat）

一。另存为：any_name.bat 然后将此批处理文件复制到您的启动文件夹中，供您自动登录的用户使用。（点击开始 > 所有程序 > 启动）

```
start "" c:\autoupdate1.bat
exit 
```

二。另存为：autoupdate1.bat 然后将其复制到 C:\ 驱动器

```
wuauclt /detectnow
wuauclt /updatenow
reg query "HKLM\Software\Microsoft\Windows\CurrentVersion\WindowsUpdate\Auto Update\RebootRequired" > nul && shutdown -r -t 0
start "" c:\autoupdate2.bat
exit 
```

三。另存为：autoupdate2.bat 然后将其复制到 C:\ 驱动器

```
ping 127.0.0.1 -n 61 > nul
start "" c:\autoupdate1.bat
exit 
```

重新启动或打开启动文件夹中的批处理文件，观看神奇的开始！

***3.*** 完成更新后，只需从启动文件夹和 c:\ 驱动器中删除批处理文件

***再次按照这些说明操作，风险自负，因为如果您不知道如何通过从启动文件夹中删除它或在安全模式下进入 Windows 以删除批处理文件来停止此过程，它可能会创建一个无限循环***

最后说明：如果您在运行批处理文件时遇到问题，您可能需要查看如何为您的 Windows 版本禁用 UAC 提示

# matlab - Matlab中的fsolve函数

> ID：16180266
> 
> 赞同：0
> 
> 时间：2013-04-23T22:31:11.797
> 
> 标签：matlab

我有一个 fsolve 方程中的一个变量的数字矩阵，所以当我运行 matlab 时，我希望得到一个矩阵，而是得到一个标量。我什至尝试了一个 for 循环，但这给了我一个关于大小的错误，所以这不是解决方案。我包括代码以获得一些关于我做错了什么的反馈。

```
z=0.1;
bubba =[1 1.5 2];
bubba = bubba';

 joe = 0:0.1:1.5;
 joe = repmat(joe,3,1);
 bubba = repmat(bubba,1,length(joe));
 for x=1:1:16
 eqn0 = @(psi0) (joe.-bubba.*(sqrt((psi0+z))));
 result0(x) = fsolve(eqn0,0.1,options);

 end 
```

请注意，我稍后需要 joe 变量进行绘图，所以我剪掉了那部分代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T18:22:12.657

根据您之前的评论，让我尝试一个解决方案......仍然不确定这是您想要的：

```
bubba =[1 1.5 2];
joe = 0:0.1:1.5;

for xi = 1:numel(joe)
  for xj = 1:numel(bubba)
    eqn0 = @(psi0) (joe(xi).-bubba(xj).*(sqrt((psi0+z))));
    result(xi,xj) = fsolve(eqn0,0.1,options);
  end
end 
```

是行人；但这是你想要的吗？我现在无法访问 matlab，否则我可能会想出更有效的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T22:50:05.970

详细说明我的评论：

`psi0`是求解器中的自变量。当您使用标量作为的第二个参数时，您将它的维度设置为 [1 1] `fsolve(eqn0, 0.1, options);`- 这告诉 Matlab 优化标量`psi0`，从 的值开始`0.1`。结果将是一个标量 - 使函数最小化的值

```
0.1 * sqrt(psi0 + 0.1) 
```

因为你设置了 z=0.1

您应该为循环的每次迭代返回 -0.1 的值，因为您从未更改任何内容。现在没有足够的信息来确定您希望哪个因子成为矩阵 - 特别是因为您的表达式`eqn0`涉及矩阵乘法，所以很难知道您期望结果的维度是什么。

我希望您将这个初始答案作为跳板来修改您的问题，以便可以正确回答！？

# .htaccess - 将规则转换重写为 web.config

> ID：16180269
> 
> 赞同：1
> 
> 时间：2013-04-23T22:31:32.560
> 
> 标签：.htaccess, mod-rewrite, redirect, web-config

谁能告诉我下面的重写对于 web.config 文件的转换是什么？

```
RewriteEngine On
RewriteRule ^/(credits|content)/?$ switch.php?view=$1 
```

或者，如果有任何在线转换工具会很棒。

谢谢

**编辑**

例如：

```
RewriteCond %{HTTP_HOST} ^example\.com$ [NC]
RewriteRule ^(.*)$ http://www.example.com/$1 [L,R=301] 
```

将会：

```
<rewrite>
  <rules>
    <rule name="Imported Rule 1" stopProcessing="true">
      <match url="^(.*)$" ignoreCase="false" />
      <conditions>
        <add input="{HTTP_HOST}" pattern="^example\.com$" />
      </conditions>
      <action type="Redirect" redirectType="Permanent" url="http://www.example.com/{R:1}" />
    </rule>
  </rules>
</rewrite> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T15:24:40.083

我无法准确告诉您如何转换您提供的规则（不幸的是，我不擅长 .htaccess 或 web.config），但是 IIS 管理器中内置了一个方便的工具，可以让您转换 .htaccess 重写规则入 IIS URL 重写规则。

它的用法在这里描述：

[http://www.iis.net/learn/extensions/url-rewrite-module/importing-apache-modrewrite-rules](http://www.iis.net/learn/extensions/url-rewrite-module/importing-apache-modrewrite-rules)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:38:39.517

这将转换 2 种传入 URL，如下所示：

```
http[s]://yoursite.com/credits => switch.php.view=credits
http[s]://yoursite.com/credits/ => switch.php.view=credits
http[s]://yoursite.com/content => switch.php.view=content
http[s]://yoursite.com/content/ => switch.php.view=content 
```

注意：此规则不保留 URL 中的参数，例如：

```
http[s]://yoursite.com/credits?param1=aa&param2=bb => switch.php.view=credits
http[s]://yoursite.com/credits/?param1=aa&param2=bb => switch.php.view=credits
http[s]://yoursite.com/content?param1=aa&param2=bb => switch.php.view=content
http[s]://yoursite.com/content/?param1=aa&param2=bb => switch.php.view=content 
```

# android - buttonConnectOnClickListener，致命异常：AsyncTask #1

> ID：16180270
> 
> 赞同：0
> 
> 时间：2013-04-23T22:31:43.617
> 
> 标签：android, tcp, onclick, android-asynctask, onclicklistener

Android 客户端在 Android 2.2 上运行没有问题。但在 Android 4.2 中我需要使用 AsyncTask，我不知道如何正确设置它。按下按钮时客户端应连接到 TCP 服务器。我已经按照下面的代码进行了尝试，但我遇到了 FATAL EXCEPTION: AsyncTask #1 错误。请你看看我的代码！谢谢。

```
 // ----------------------- CONNECTION BUTTON EVENTLISTENER - begin ----------------------------
Button.OnClickListener buttonConnectOnClickListener = new Button.OnClickListener(){
@Override
public void onClick(View arg0) {

class connectTask extends AsyncTask<String, String, AndroidClientActivity> {
@Override
protected AndroidClientActivity doInBackground(String... message) {

    if(!connected){//if not connected yet
    outputText("connecting to Server");
    try {//try to create a socket and outputstream
    socket = new Socket("192.168.1.112",5353);//create a socket
    dataOutputStream = new DataOutputStream(socket.getOutputStream());//and stream
    outputText("successfully connected");//output the connection status
    changeConnectionStatus(true);//change the connection status
    } catch (UnknownHostException e) {//catch and
    outputText(e.getMessage());//display errors
    changeConnectionStatus(false);
    } catch (IOException e) {//catch and
    outputText(e.getMessage());//display errors
    changeConnectionStatus(false);
    }
    }else{
    outputText("disconnecting from Server...");
    try {//try to close the socket
    socket.close();
    outputText("successfully disconnected");
    changeConnectionStatus(false);//change the connection status
    } catch (UnknownHostException e) {//catch and
    outputText(e.getMessage());//display errors
    } catch (IOException e) {//catch and
    outputText(e.getMessage());//display errors
    }
    }

    return null;
    }

    @Override
    protected void onPostExecute(AndroidClientActivity jh) {

    }}
                new connectTask().execute();            
            }
        }; 
```

这是我得到的错误；

```
04-23 23:27:30.445: E/AndroidRuntime(12005): FATAL EXCEPTION: AsyncTask #1
04-23 23:27:30.445: E/AndroidRuntime(12005): java.lang.RuntimeException: An error occured while executing doInBackground()
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at java.lang.Thread.run(Thread.java:856)
04-23 23:27:30.445: E/AndroidRuntime(12005): Caused by: android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4039)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:709)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.view.View.requestLayout(View.java:12863)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.view.View.requestLayout(View.java:12863)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.view.View.requestLayout(View.java:12863)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.view.View.requestLayout(View.java:12863)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:273)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.view.View.requestLayout(View.java:12863)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.widget.TextView.checkForRelayout(TextView.java:6985)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.widget.TextView.setText(TextView.java:3333)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.widget.TextView.setText(TextView.java:3189)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.widget.TextView.append(TextView.java:2849)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.widget.TextView.append(TextView.java:2839)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at com.rovercontrollerandroid.AndroidClientActivity.outputText(AndroidClientActivity.java:249)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at com.rovercontrollerandroid.AndroidClientActivity$3$1connectTask.doInBackground(AndroidClientActivity.java:192)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at com.rovercontrollerandroid.AndroidClientActivity$3$1connectTask.doInBackground(AndroidClientActivity.java:1)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
04-23 23:27:30.445: E/AndroidRuntime(12005):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-23 23:27:30.445: E/AndroidRuntime(12005):    ... 5 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:44:10.947

不要尝试`doInBackground(...)`从`AsyncTask`.

错误出现在 logcat 中**“只有创建视图层次结构的原始线程才能触及其视图。”** .

该`doInBackground(...)`方法在不同的线程上运行。如果您想显示进度，请将代码移入`onProgressUpdate(...)`并使用`publishProgress(...)`from `doInBackground(...)`。

完成后需要访问 UI 的任何其他代码`doInBackground(...)`都应进入`onPostExecute(...)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:44:51.090

从您的 logcat 来看，它看起来像是`outputText()`一个执行操作的函数`UI`。看来您想显示进度。用于`publishProgress()`更新 的`onProgressUpdate()`方法`AsyncTask`。你不能`UI`在`doInBackground()`

一个简短的例子是

```
 class connectTask extends AsyncTask<String, String, AndroidClientActivity> {
  ProgressDialog progress = new ProgressDialog(MainActivity.this);  //create progress dialog

 @Override
 protected AndroidClientActivity doInBackground(String... message) {
  publishProgress("message to send");  // put this wherever you are trying to show a message while attempting to download 
```

然后实施

```
@Override
protected void onProgressUpdate(String... values) {
    progress.setTitle("Trying");
    progress.setMessage(values[0]);  // this will be the value set in `publishProgress() of doINBackground()
    progress.show();
} 
```

`progress.dismiss()`然后打电话`onPostExecute()`

# java - 寻找最长的名字

> ID：16180273
> 
> 赞同：2
> 
> 时间：2013-04-23T22:32:02.823
> 
> 标签：java

我正在尝试编写一个名为longestName 的静态方法，该方法读取用户键入的名称并打印最长的名称（包含最多字符的名称）。

最长的名字应该首字母大写，后面的所有字母小写，不管用户在输入名字时使用的大小写。如果两个或多个名称之间的最长并列，请使用最早键入的并列名称。还打印一条消息，说明有平局，如下面的右侧日志所示。如果一些较短的名称长度相同，例如 DANE 和 Erik ；但不要打印消息，除非领带位于最长的姓名之间。

```
public static void longestName(Scanner console, int n) {

    String name = "";
    String longest= "";
    boolean areTies = false;
    for(int i=1; i<=n; i++) {
        System.out.print("Enter name #" + i + ":");
        name = console.next();
        if(name.length( ) > longest.length( )) {

            longest = name;
            areTies = false;
        }
        if(name.length( ) == longest.length( ) ) {
            areTies = true;

        }
    }
    // now change name to all lower case, then change the first letter
    longest = longest.toLowerCase( );
    longest = Character.toUpperCase (longest.charAt( 0 ) ) + longest.substring(1);

    System.out.println(longest + "'s name is longest");
    if(areTies==true) {
        System.out.println(" (There was a tie! ) " );
    }else{
        System.out.println();
    }

} 
```

我的输出是：

```
输入姓名#1：roy
输入姓名#2：DANE
输入姓名 #3：Erik
输入名称 #4:sTeFaNiE
输入姓名 #5：LaurA
斯蒂芬妮的名字最长
 （有一条领带！）

```

它只会打印每次调用都有一条领带。我不知道为什么。第二，

```
longest = longest.toLowerCase( );
longest = Character.toUpperCase (longest.charAt( 0 ) ) + longest.substring(1); 
```

我的朋友教我用这个来检索单词，但我还是不明白。还有其他方法吗？这对我来说很复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:34:05.737

你的逻辑有问题。当您找到一个新的最长名称（第一个`if`语句）时，您设置`longest`为`name`. 然后`if`执行第二个。因为此时`longest`指的是同一个对象`name`，当然它们的长度是相等的。为避免这种情况，只需插入一个`else`.

```
else if(name.length( ) == longest.length( ) ) { 
```

让我们分解它如何更改为第一个字符大写，其余小写。

```
longest = longest.toLowerCase( ); 
```

现在`longest`全部小写。

```
Character.toUpperCase (longest.charAt( 0 ) ) 
```

这需要第一个字符并将其大写。

```
longest.substring(1); 
```

这需要从索引 1（*第二个*字符）开始到字符串末尾的子字符串，该字符串与大写字符连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-11T05:41:42.917

```
public static void longestName(Scanner console, int names) {
    String longest = "";
    boolean tie = false;
    for ( int i = 1; i <= names; i++){
        System.out.print("name #" + i + "? ");
        String name = console.nextLine();
        if (name.length() == longest.length()){
            tie = true;
        }
        if (name.length() > longest.length()){
            longest = name;
            tie = false;
        }
    }
    longest = longest.toLowerCase();
    System.out.print(longest.substring(0,1).toUpperCase());
    System.out.println(longest.substring(1) + "'s name is longest");

    if (tie){
       System.out.println("(There was a tie!)");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-08T10:36:19.867

```
import java.util.*;

public class Longest {

    public static void main(String[] args)
    {   Scanner input = new Scanner(System.in);  
        System.out.print("Enter the number of names you wanna enter? ");
        int n = input.nextInt();  // takes number of names 
        longestName(input,n);   // function call
    }
    public static void longestName(Scanner input, int n)
    {
        String name = "";  // First assign name to the empty string
        String longest = "";  // First assign longest to the empty string
        boolean areTies = false;  // Assume there are no ties at first place
        for(int i = 1; i <= n; i++)  // run a loop n times
        {
            System.out.print("Enter name #"+i+":");
            name = input.next();  // takes ith name
            if(name.length() > longest.length())  /*if length of the entered new string is greater than current longest*/
            {
                longest = name;
                areTies = false;  // no tie
            }
            else if(name.length() == longest.length())  /*if both strings are of same length*/
                areTies = true;  // so boolean value of areTies is true
        }
        // now change the name to the lower case and then change only first letter to the upper case
        longest = longest.toLowerCase(); // changes entire string to lowercase
        longest = Character.toUpperCase(longest.charAt(0)) + longest.substring(1);  /* first char to upper and rest remains as it is and concatenate char and remaining string from index 1 to rest*/

        System.out.println(longest + "'s name is longest");
        if(areTies==true) {
            System.out.println(" (There was a tie! ) " );
        }else{
            System.out.println();
        }
    }
} 
```

# sql-server - 我的 CREATE View 查询中是否需要 NO LOCK

> ID：16180276
> 
> 赞同：14
> 
> 时间：2013-04-23T22:32:09.790
> 
> 标签：sql-server, tsql, view

我正在 MS SQL Server 上创建一个视图。我对 MS SQL 的接触不多，对 NO LOCK 提示也不是很熟悉。我了解它的作用，但我不知道是否需要在我的情况下使用它。有人问我是否应该包括它，我不知道。

在我用来创建视图的所有查询之后，我是否需要添加 NO HINT？或者这会对用户查询视图本身有什么影响？用户是否应该将 NO LOCK 添加到针对 VIEW 的查询中？

任何关于最佳方法的指导和任何澄清表示赞赏！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-24T02:00:12.757

我先回答你的问题。

最好从外部的视图而不是视图中的表上显示 NOLOCK 提示。

例如

```
select * from vwTest with (nolock) 
```

或者

```
set transaction isolation level read uncommitted
select * from vwTest 
```

作为创建者，这样做是为了迎合更广泛的用户群，这些用户群在 SQL 方面的经验可能会也可能不如你自己。通过不在视图中封装 NOLOCK 提示，可以鼓励其他开发人员真正考虑他们希望如何以安全有效的方式检索数据。

现在有更多关于 NOLOCK 的信息。如果您 100% 确定基础数据不再更改，这是一个很好的技巧，一个很好的例子是当 ETL 系统完成当天的数据加载时。它在只读报告系统中也很方便，您再次确定报告运行之间没有数据移动。

否则，不建议在您的系统中使用该提示。如果您不真正了解其含义，则弊大于利。

请参考以下链接了解 NOLOCK 可能导致的损坏： [如果使用 NOLOCK 提示，可能会丢失以前提交的行](https://techcommunity.microsoft.com/t5/datacat/previously-committed-rows-might-be-missed-if-nolock-hint-is-used/ba-p/304944)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T22:50:18.153

直接来自[文档](http://msdn.microsoft.com/en-us/library/ms187373.aspx)：

> **警告：** 因为 SQL Server 查询优化器通常会为查询选择最佳执行计划，所以我们建议只有经验丰富的开发人员和数据库管理员在不得已的情况下才使用提示。

尤其是 NOLOCK 提示是一个臭名昭著的有害和坏主意。它应该只用于特殊情况和*特定*需求：例如当您不关心返回的数据是否正确时。

# apache - htaccess 中的 301 重定向正在将旧文件名附加到新 url

> ID：16180278
> 
> 赞同：2
> 
> 时间：2013-04-23T22:32:18.980
> 
> 标签：apache, .htaccess, http-redirect

我在我的 htaccess 文件中使用 301 重定向规则将一些旧网址重定向到新网址。但是，在一些重定向中，旧文件名附加到新 url 上，因此我在这些重定向上遇到 404 页面错误。

例如，这是我的重写规则

```
Redirect 301 /mtrx/motion-control/ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer 
```

但显示的页面是

```
http://www.zerolinegolf.com/golf-mtrx-for-the-golfermotion-control 
```

这是整个 .htaccess 代码

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

#REDIRECTS

Redirect 301 /videos/ http://www.zerolinegolf.com/videos-2
Redirect 301 /press-releases-2/ http://www.zerolinegolf.com/media
Redirect 301 /mtrx/motion-control/ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer
Redirect 301 /mtrx/pelvis-power/ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer
Redirect 301 /mtrx/mtrx-score/ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer
Redirect 301 /mtrx/recommended-drills/ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer
Redirect 301 /mtrx/ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T22:48:34.053

看起来 mod_alias 和 mod_rewrite 可能相互干扰，也可能相互干扰。

请记住，这些`Redirect`指令将两个路径节点链接在一起。因此，如果您有，请说：

```
Redirect 301 /mtrx/ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer 
```

该语句还接受：`/mtrx/foo/bar/`并将其重定向到`http://www.zerolinegolf.com/golf-mtrx-for-the-golferfoo/bar/`.

您应该切换到 using`RedirectMatch`或`RewriteRule`.

对于前者：

```
RedirectMatch 301 ^/videos/?$ http://www.zerolinegolf.com/videos-2
RedirectMatch 301 ^/press-releases-2/?$ http://www.zerolinegolf.com/media
RedirectMatch 301 ^/mtrx/motion-control/?$ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer
RedirectMatch 301 ^/mtrx/pelvis-power/?$ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer
RedirectMatch 301 ^/mtrx/mtrx-score/?$ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer
RedirectMatch 301 ^/mtrx/recommended-drills/?$ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer
RedirectMatch 301 ^/mtrx/?$ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer 
```

对于 mod_rewrite，您**必须在您的 wordpress 规则之前放置这些规则**：

```
RewriteRule ^/?videos/?$ http://www.zerolinegolf.com/videos-2 [L,R=301]
RewriteRule ^/?press-releases-2/?$ http://www.zerolinegolf.com/media [L,R=301]
RewriteRule ^/?mtrx/motion-control/?$ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer [L,R=301]
RewriteRule ^/?mtrx/pelvis-power/?$ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer [L,R=301]
RewriteRule ^/?mtrx/mtrx-score/?$ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer [L,R=301]
RewriteRule ^/?mtrx/recommended-drills/?$ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer [L,R=301]
RewriteRule ^/?mtrx/?$ http://www.zerolinegolf.com/golf-mtrx-for-the-golfer [L,R=301] 
```

# jquery - 类的 AngularJS Watch 模板

> ID：16180283
> 
> 赞同：0
> 
> 时间：2013-04-23T22:32:45.607
> 
> 标签：jquery, dom, angularjs

我有一个角度应用程序，它在某个时候通过 jquery 将一个类注入到 DOM 中。我正在尝试构建一个仅限于该类并且可以在该类存在时采取行动的指令。我以前使用过 $watch 指令，但不是在这种情况下。我遇到的问题是我想将指令限制为动态类并添加一个链接函数来做一些事情，并且这个类可能在任何给定时间存在于多个元素上。我不知道如何促进这一点。

这是我的意思

[http://plnkr.co/edit/1cyEZt8SgohnWLkpLnbL?p=preview](http://plnkr.co/edit/1cyEZt8SgohnWLkpLnbL?p=preview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:55:40.860

修改后需要`$compile`该元素。

```
$("#DynamicDiv").addClass("dynamic");
$compile($("#DynamicDiv"))($scope); 
```

在[你的 plunk 的这个分支中](http://plnkr.co/edit/Epw8lMBAv6PbRl7iPE7y?p=preview)，我将这两行移到了控制器上，以便更容易获得`$compile`服务。

# php - Wordpress - 在 wp_list 页面中隐藏子页面的子页面

> ID：16180284
> 
> 赞同：1
> 
> 时间：2013-04-23T22:32:48.847
> 
> 标签：php, wordpress, menu

我有以下页面结构：

*   主页（id 5）
    *   子页面 1
        *   儿童页面
        *   儿童页面
    *   子页面 2
        *   儿童页面
        *   儿童页面

我使用此代码显示我的侧边栏菜单：

```
 <?php wp_list_pages('child_of=5&title_li=&link_before=<span>&link_after=</span>'); ?> 
```

此代码仅显示一个列表。我需要显示

*   在主页上时，仅显示子页面
*   在子页面上时，显示我当前所在子页面的子页面和子页面
*   在子页面时，显示我当前所在的父子页面的显示子页面和子页面

知道怎么做吗？感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:22:49.160

使用 Depth 处理您希望它显示的内容

```
<?php wp_list_pages('child_of=5&depth=1&title_li=&link_before=<span>&link_after=</span>'); ?> 
```

参考：[http ://codex.wordpress.org/Function_Reference/wp_list_pages](http://codex.wordpress.org/Function_Reference/wp_list_pages)

> 默认值为 0（显示所有页面，包括所有子页面）。
> 
> ```
>  0 (default) Displays pages at any depth and arranges them hierarchically in nested lists
>     -1 Displays pages at any depth and arranges them in a single, flat list
>     1 Displays top-level Pages only
>     2, 3 … Displays Pages to the given depth 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:18:56.643

您可以尝试使用这个[Hierarchical Pages Widget](http://wordpress.org/extend/plugins/hierarchical-pages/)。我不确定它是否完全支持你想要的，但我在我的一个项目中使用了它并且效果很好。

这个小部件将：

> 制作折叠分层页面/类别/分类列表：顶级；当前的祖先、孩子和/或兄弟姐妹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T21:31:56.290

我找到了一个工作代码，对我来说就像一个魅力：

```
/**
 * Create HTML list of pages.
 *
 * @package Razorback
 * @subpackage Walker
 * @author Michael Fields <michael@mfields.org>
 * @copyright Copyright (c) 2010, Michael Fields
 * @license http://opensource.org/licenses/gpl-license.php GNU Public License
 *
 * @uses Walker_Page
 *
 * @since 2010-05-28
 * @alter 2010-10-09
 */
class Razorback_Walker_Page_Selective_Children extends Walker_Page {
    /**
     * Walk the Page Tree.
     *
     * @global stdClass WordPress post object.
     * @uses Walker_Page::$db_fields
     * @uses Walker_Page::display_element()
     *
     * @since 2010-05-28
     * @alter 2010-10-09
     */
    function walk( $elements, $max_depth ) {
        global $post;
        $args = array_slice( func_get_args(), 2 );
        $output = '';

        /* invalid parameter */
        if ( $max_depth < -1 ) {
            return $output;
        }

        /* Nothing to walk */
        if ( empty( $elements ) ) {
            return $output;
        }

        /* Set up variables. */
        $top_level_elements = array();
        $children_elements  = array();
        $parent_field = $this->db_fields['parent'];
        $child_of = ( isset( $args[0]['child_of'] ) ) ? (int) $args[0]['child_of'] : 0;

        /* Loop elements */
        foreach ( (array) $elements as $e ) {
            $parent_id = $e->$parent_field;
            if ( isset( $parent_id ) ) {
                /* Top level pages. */
                if( $child_of === $parent_id ) {
                    $top_level_elements[] = $e;
                }
                /* Only display children of the current hierarchy. */
                else if (
                    ( isset( $post->ID ) && $parent_id == $post->ID ) ||
                    ( isset( $post->post_parent ) && $parent_id == $post->post_parent ) ||
                    ( isset( $post->ancestors ) && in_array( $parent_id, (array) $post->ancestors ) )
                ) {
                    $children_elements[ $e->$parent_field ][] = $e;
                }
            }
        }

        /* Define output. */
        foreach ( $top_level_elements as $e ) {
            $this->display_element( $e, $children_elements, $max_depth, 0, $args, $output );
        }
        return $output;
    }
} 
```

# cordova - Phonegap 苹果地图：从当前位置导航

> ID：16180285
> 
> 赞同：1
> 
> 时间：2013-04-23T22:33:17.183
> 
> 标签：cordova, apple-maps

我正在使用 Phonegap 开发适用于 iOS 的应用程序。我添加了一个链接来打开 Apple 的 Maps-App。我想将用户从当前位置导航到特定地址，但我无法让地图使用“当前位置”作为起点。我使用以下链接，它可以很好地打开地图，但我不知道“saddr”键的值：

```
<a href="maps:daddr=MyStreet 1, My City&saddr=">Navigate me</a> 
```

我可以使用 Phonegap 的 Geolocation-API 来找出用户的当前位置，但我不想让 iOS 询问用户，如果他想让我的应用程序访问 GPS 传感器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-09T10:08:48.740

我不确定您是如何处理 url，但目的地也应该是 url 编码的（例如带有 %20 的转义空格）。

最终网址：

```
<a href="maps:daddr=MyStreet%201,%20My%20City&saddr=Current%20Location">Navigate me</a> 
```

# python - 横向滚动 Pygame

> ID：16180305
> 
> 赞同：0
> 
> 时间：2013-04-23T22:35:37.273
> 
> 标签：python, pygame

我是 pygame 的新手，我正在制作一个使用鸟作为角色的横向滚动游戏，它会飞，但我试图让它在屏幕上上下移动，但我不知道如何。

```
import pygame
from pygame.locals import *
import os
import sys
import time
pygame.init()

class Fly:
    def __init__(self):
        self.last_update = time.clock()

        self.screen = pygame.display.set_mode((700, 400), 0, 32)
        #Load bird
        self.bird_state = 1
        self.bird_frames = []
        for r in xrange(1, 5):
            self.bird_frames.append(pygame.image.load('bird%s.png' % r))
        self.bg = pygame.image.load('bg.png').convert()

        self.Loop()

    def eventLoop(self):
        'Take and process input from perephirals'
        for event in pygame.event.get():
            if event.type == QUIT:
                sys.exit()

    def Update(self):
        self.bird_state += 1
        if self.bird_state > 4:
            self.bird_state = 1

    def Draw(self):
        self.screen.blit(self.bg, [0, 0])
        self.screen.blit(self.bird_frames[self.bird_state - 1], (150, 150))

    def Loop(self):
        while 1:
            self.eventLoop()
            if time.clock() - self.last_update > 0.15:
                self.Update()
                self.last_update = time.clock()
            self.Draw()
            pygame.display.update()

Fly() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:45:58.213

```
import pygame
from pygame.locals import *
import os
import sys
import time
pygame.init()

class Fly:
    def __init__(self):
        self.last_update = time.clock()

        self.screen = pygame.display.set_mode((700, 400), 0, 32)
        #Load bird
        self.bird_state = 1
        self.bird_frames = []
        for r in xrange(1, 5):
            self.bird_frames.append(pygame.image.load('bird%s.png' % r))
        self.bg = pygame.image.load('bg.png').convert()

        self.Loop()

    def eventLoop(self):
        'Take and process input from perephirals'
        for event in pygame.event.get():
            if event.type == QUIT:
                sys.exit()

    def Update(self):
        self.bird_state += 1
        if self.bird_state > 4:
            self.bird_state = 1

    def Draw(self):
        self.screen.blit(self.bg, [0, 0])
        self.screen.blit(self.bird_frames[self.bird_state - 1], (150, 150))

    def Loop(self):
        while 1:
            self.eventLoop()

            k = pygame.key.get_pressed()
            if k[K_DOWN]:
                # Do something with your bird
            if k[K_UP]:
                # Do something with your bird

            if time.clock() - self.last_update > 0.15:
                self.Update()
                self.last_update = time.clock()
            self.Draw()
            pygame.display.update()

Fly() 
```

将`pygame.key.get_pressed`检查您是否按下了按钮。查看参考资料，了解您有哪些选项。[http://www.pygame.org/docs/ref/key.html](http://www.pygame.org/docs/ref/key.html)

把它放在你的循环中，因为它是“实时的”。

```
 k = pygame.key.get_pressed()
 if k[K_DOWN]:
    # Do somthing with your bird
  if k[K_UP]:
    # Do somthing with your bird 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-13T17:30:06.380

如果您将 Player 视为一个矩形（这可能适用于您游戏中的所有精灵），那么您所要做的就是为您的矩形设置两个参数，称为 self.speedx 和 self.speedy。由于您只寻找上下移动，因此 speedx 不会改变，但您会根据按下的按钮快速调整。这是我的一个游戏中的一段代码。它是我的播放器类的更新定义的一部分。不幸的是，在这个游戏中我只想要横向（左右）移动，但你会明白的。如果您需要更多帮助，请告诉我。这是代码：

```
 def update(self):
    # Ensures default motion is 0
    self.speedx = 0
    self.speedy = 0
    # This checks to see what key's are pressed
    keystate = pygame.key.get_pressed()

    # This gives control for movement (Can use WASD or arrow keys)
    if keystate[pygame.K_a] or keystate[pygame.K_LEFT]:
        self.speedx = -5
    if keystate[pygame.K_d] or keystate[pygame.K_RIGHT]:
        self.speedx = 5
    if keystate[pygame.K_SPACE]:
        self.shoot(bullet_img)

    # Gives movement based on keys that are pressed
    self.rect.x += self.speedx
    self.rect.y += self.speedy 
```

# jquery - Jquery UI Drag N Drop重复问题

> ID：16180309
> 
> 赞同：1
> 
> 时间：2013-04-23T22:36:05.477
> 
> 标签：jquery, html, jquery-ui, drag-and-drop

[这是我的页面的链接。](http://revuhree.com/stack)我在使用 jQuery UI 拖放功能时遇到问题。我需要它能够将多个相同的项目拖到它旁边的容器中，并且我需要对它们进行重新排序。

到目前为止，它允许我按照我在代码中设置的方式拖放 3，但问题是当我将其他任何内容拖入框中并尝试重新排序列表时，我试图将当前列表项拖动到重复本身直到有3 在它允许我重新排序之前。除非我从左侧的容器中拖动，否则对防止重复有什么帮助吗？

这是我的 HTML：

```
<div id="products" class="column large-4 row">
    <h1 class="ui-widget-header">Drag hiring steps to the box on the right.</h1>
    <div class="ui-widget-content">
        <ul>
            <li data-id="1"><span>Phone Interview</span></li>
            <li data-id="2"><span>In-Person Interview</span></li>
            <li data-id="3"><span>Technical Test</span></li>
            <li data-id="4"><span>Personality Test</span></li>
            <li data-id="5"><span>Background Check</span></li>
            <li data-id="6"><span>Drug Test</span></li>
            <li data-id="7"><span contenteditable>Custom Addition</span></li>
        </ul>
    </div>
</div>
<div id="shoppingCart1" class="shoppingCart column large-6 push-1">
    <h1 class="ui-widget-header">Drag &amp; drop steps to reorder the hiring process.</h1>
    <div class="ui-widget-content">
        <ol>

        </ol>
    </div>
</div> 
```

这是我的 JS：

```
var $start_counter = $( "#event-start" ),
$drag_counter = $( "#event-drag" ),
$stop_counter = $( "#event-stop" ),
counts = [ 0, 0, 0 ];
$("#products li").draggable({
    appendTo: "body",
    helper: "clone",
    cursor: "url(grab.cur), url(img/hand.png), auto",
    start: function() {
        var dd = $(this).text();
        console.log( dd + ' is dragging');
    }
});

$(".shoppingCart ol").droppable({
    activeClass: "ui-state-default",
    hoverClass: "ui-state-hover",
    drop: function(event, ui) {
        var self = $(this);
        self.find(".placeholder").remove();
        var productid = ui.draggable.attr("data-id");
        if (self.find("[data-id=" + productid + "]").length == 3) return;

        $("<li></li>", {
            "text": ui.draggable.text(),
            "data-id": productid,
            "class": 'editable'
        }).appendTo(this);

        $("<span></span>", {
            "class": 'close pull-2'
        }).appendTo('.editable');

        $('.ui-droppable li').wrapInner('<span class="white"> </span>');

        // To remove item from other shopping chart do this
        var cartid = self.closest('.shoppingCart').attr('id');
        $(".shoppingCart:not(#"+cartid+") [data-id="+productid+"]").remove();
    var removeMom = function(el) {
        el.on('click', function() {
            var closeBtn = $(this).parents('.editable');
            closeBtn.slideUp(200, function() { $(this).remove();} );
        })

    }

    $('.ui-draggable, .editable').each(
        function() {
            handTrick( $(this) );
        }
    );

    $('.close').each(
        function() {
            removeMom( $(this) );
        }
    );
}
}).sortable({
items: "li:not(.placeholder)",
sort: function() {
    $(this).removeClass("ui-state-default");
}
});

var removeMom = function(el) {
el.on('click', function() {
    var closeBtn = $(this).parents('.editable');
    closeBtn.remove();
})

}

var handTrick = function(el) {
el.on('mouseover', function() {
    $(this).css({cursor: "pointer"});
});
el.on('mouseoout', function() {
    $(this).css({cursor: "auto"});
});
el.on('mousedown', function() {
    $(this).css({cursor: "url(grab.cur), url(img/hand.png), auto"});
});
el.on('mouseup', function() {
    $(this).css({cursor: "pointer"});
});

}

$('.close').each(
function() {
    removeMom( $(this) );
}
);

$('.ui-draggable').each(
function() {
    handTrick( $(this) );
}
);

var yy = $('.ui-widget-content').height();
$('.ui-droppable').css('min-height', yy); 
```

当您转到页面时，您可以自己查看 CSS。我希望有人能帮帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:26:40.753

找到了解决方案。我不得不将 drop 包装在一个条件中。它仍然允许我放入容器中，而在容器内拖动时，每个项目都无法复制自身。

```
if(!ui.draggable.hasClass('editable')){
        var self = $(this);
        var productid = ui.draggable.attr("data-id");
        if (self.find("[data-id=" + productid + "]").length == 9) return;

        $("<li></li>", {
            "text": ui.draggable.text(),
            "data-id": productid,
            "class": 'editable',
        }).appendTo(this);
        $("<span></span>", {
            "class": 'close pull-2'
        }).appendTo('.editable');
        $('.ui-droppable li').wrapInner('<span class="white"> </span>');

        var cartid = self.closest('.shoppingCart').attr('id');
        $(".shoppingCart:not(#"+cartid+") [data-id="+productid+"]").remove();

        var removeMom = function(el) {
            el.on('click', function() {
                var closeBtn = $(this).parents('.editable');
                closeBtn.slideUp(200, function() { $(this).remove();} );
            })

        }

        $('.ui-draggable, .editable').each(
            function() {
                handTrick( $(this) );
            }
        );

        $('.close').each(
            function() {
                removeMom( $(this) );
            }
        );
} 
```

# ruby-on-rails - Rails - NoMethodError 未定义的方法

> ID：16180311
> 
> 赞同：7
> 
> 时间：2013-04-23T22:36:16.467
> 
> 标签：ruby-on-rails, nomethoderror

我正在构建一个应用程序（遵循[Michael Hartl 的第 11 章](http://ruby.railstutorial.org/chapters/following-users#top)），用户可以在其中关注其他用户创建的项目。

我创建了一个 ProjectRelationship 模型来保存两个组件：用户的 follower_id 和项目的 projectuser_id。外键已经这样设置了。

现在，我的`_follow_form.html.erb`页面根据是否关注`current_user`项目呈现“关注”或“取消关注”。我在下面附上了我的代码。

现在，在每个项目展示页面上都会生成关注按钮。在我单击生成的按钮之后`_follow.html.erb`，它会相应地跟随项目。

**但是当我按下“取消关注”时，我得到一个错误：**

```
NoMethodError in ProjectRelationshipsController#destroy
undefined method `unfollow_project!' for #<User:0x007f9ed83dd6b8>

Application Trace | Framework Trace | Full Trace
app/controllers/project_relationships_controller.rb:12:in `destroy' 
```

**架构.rb**

```
create_table "project_relationships", :force => true do |t|
  t.integer  "follower_id"
  t.datetime "created_at",     :null => false
  t.datetime "updated_at",     :null => false
  t.integer  "projectuser_id"
end

add_index "project_relationships", ["projectuser_id"], :name => "index_project_relationships_on_projectuser_id" 
```

**路线.rb**

```
resources :projects do       
  resources :comments 
  member do
    get :following
  end   
end
resources :project_relationships, only: [:create, :destroy] 
```

**project_relationship.rb**

```
class ProjectRelationship < ActiveRecord::Base
   attr_accessible :projectuser_id

   belongs_to :user, foreign_key: "follower_id"
   belongs_to :project, foreign_key: "projectuser_id"
end 
```

**项目.rb**

```
has_many :project_relationships, foreign_key: "projectuser_id"
has_many :favorited_by, through: :project_relationships, source: :user 
```

**用户.rb**

```
has_many :project_relationships, foreign_key: "follower_id"
has_many :followed_projects, through: :project_relationships, source: :project

def following_project?(project)
  project_relationships.find_by_projectuser_id(project.id)
end

def follow_project!(project)
  project_relationships.create!(projectuser_id: project.id)
end

def project_unfollow!(project)
  project_relationships.find_by_projectuser_id(project.id).destroy
end 
```

**project_relationships_controller.rb**

```
class ProjectRelationshipsController < ApplicationController

def create
    @project = Project.find(params[:project_relationship][:projectuser_id])
    current_user.follow_project!(@project)
    redirect_to @project
  end

  def destroy
    @project = ProjectRelationship.find(params[:id]).project
    current_user.unfollow_project!(@project)
    redirect_to @project
  end
end 
```

**项目/show.html.erb**

```
<%= render 'follow_form' if signed_in? %> 
```

**项目/_follow_form.html.erb**

```
<% if current_user.following_project?(@project) %>
    <%= render 'unfollow' %>
<% else %>
    <%= render 'follow' %>
<% end %> 
```

**项目/_follow.html.erb**

```
<%= form_for(current_user.project_relationships.build(projectuser_id: @project.id)) do |f| %>
  <div><%= f.hidden_field :projectuser_id %></div>
  <%= f.submit "Follow", class: "btn btn-large btn-primary" %>
<% end %> 
```

**项目/_unfollow.html.erb**

```
<%= form_for(current_user.project_relationships.find_by_projectuser_id(@project),
         html: { method: :delete }) do |f| %>
  <%= f.submit "Unfollow", class: "btn btn-large" %>
<% end %> 
```

**项目/_followerstats.html.erb**

```
<%= @project.favorited_by.count %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T22:43:23.947

你已经定义了一个方法 `project_unfollow!`但是`user.rb`你调用`current_user.unfollow_project!`了`project_relationships_controller.rb`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:42:29.257

将您`unfollow_project!`的替换`project_unfollow!`为模型文件中声明的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T22:44:37.733

您调用`unfollow_project!`，`ProjectRelationshipsController#destroy`但您要调用的方法是`project_unfollow!`在您的`user.rb`.

# prolog - 如何在列表列表中转换整数文件

> ID：16180312
> 
> 赞同：1
> 
> 时间：2013-04-23T22:36:25.683
> 
> 标签：prolog, swi-prolog

我有一个文件如下（数字以空格分隔，行以点结尾）：

```
4554 3332 3 23 344\.     
4 2 3 5 7 86 56\.     
7 8 1 4 66. 
```

我想创建一个列表列表，每一行一个列表，如下所示：

```
[[4554,3332,3,23,344],[4,2,3,5,7,86,56],[7,8,1,4,66]] 
```

我能怎么做？非常感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T04:58:29.817

我建议使用明确的子句语法 (DCG) 和 DCG/basics 库，如下所示：

```
:- use_module(library(dcg/basics)).
:- use_module(library(pio)).

number_line([]) --> ".".
number_line([N|Ns]) --> integer(N), whites, number_line(Ns).

file([Line|Lines]) --> number_line(Line), blanks, file(Lines).
file([]) --> []. 
```

然后，您可以使用如下简单的谓词一次解析整个文件：

```
parse_integer_file(File, Lists) :-
    phrase_from_file(file(Lists), File). 
```

使用您的示例数据进行尝试`file.txt`：

```
?- parse_integer_file('input.txt', R).
R = [[4554, 3332, 3, 23, 344], [4, 2, 3, 5, 7, 86, 56], [7, 8, 1, 4, 66]] . 
```

这种方法有几个优点：

*   图书馆 DCG 规则经过实战考验且有效
*   因此，该语法已经对额外的空格和额外的空行具有弹性
*   代码比相应的手动输入/输出和拆分更简洁易读
*   提供的纯 I/O 设施`parse_from_file/2`非常高效

# iphone - 过滤掉双倍空格

> ID：16180313
> 
> 赞同：1
> 
> 时间：2013-04-23T22:36:26.923
> 
> 标签：iphone, string, sdk

我正在使用以下代码过滤掉换行符等，并用空格替换它们。然后，我使用另一行来取那个双倍空格并只用一个空格替换它，但看起来仍然有一个双倍空格。

我究竟做错了什么？

```
NSString *body = [message bodyPreferringPlainText:&isPlain];
body = [body stringByReplacingOccurrencesOfString:@"\r" withString:@"\n"];
body = [body stringByReplacingOccurrencesOfString:@"\n" withString:@" "];
body = [body stringByReplacingOccurrencesOfString:@"  " withString:@" "]; 
```

[http://i.stack.imgur.com/yNX6O.png](http://i.stack.imgur.com/yNX6O.png)

**编辑**：我想我发现了我的问题，这仅在消息格式如下时才会发生：

```
Hello,

How are you doing?

Thanks! 
```

但不是这样：

```
Hello,
How are you doing?
Thanks! 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:52:07.533

在 GoZoner 的帮助下，我发现这是我需要的代码：

```
NSString *body = [message bodyPreferringPlainText:&isPlain];
    body = [[body componentsSeparatedByCharactersInSet:
             [NSCharacterSet whitespaceAndNewlineCharacterSet]]
            componentsJoinedByString:@" "];
    body = [body stringByReplacingOccurrencesOfString:@"  " withString:@" "]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:28:55.270

我会建议一种稍微不同的方法。通过“空白”拆分字符串，然后重建字符串。像这样：

```
body = [[body componentsSeparatedByCharactersInSet:
               [NSCharacterSet whitespaceCharacterSet]]
            componentsJoinedByString: " "]; 
```

您遇到的具体问题如下。你开始：

```
Hello,

How are you doing?

Thanks! 
```

作为字符串是`"Hello,\r\n\r\nHow are you doing?\r\n\r\nThanks"`. 然后，您逐步转换为：

```
 "Hello,\n\n\n\nHow are you doing?\n\n\n\nThanks"     #\r becomes \n
  "Hello,    How are you doing?    Thanks"             #\n becomes ' ' (four of them)
  "Hello,  How are you doing?  Thanks"                 #'  ' becomes ' ' (four become two) 
```

使用我的建议，这是最好的解决方案。如果您不喜欢这样，只需替换`'\r'`为`''`.

# java - 写作：[\/]（\或/正则表达式）正确吗？

> ID：16180315
> 
> 赞同：7
> 
> 时间：2013-04-23T22:36:35.853
> 
> 标签：java, regex

我正在尝试编写一个匹配`\`或匹配的正则表达式`/`。

不管我按什么顺序写：

```
[//\] 
```

或者

```
[/\\] 
```

它以某种方式逃避了我的方括号或我的正斜杠。展示这种特殊情况的正确方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T22:38:05.527

是的，您正在转义第二个正则表达式中的右括号，而第一个甚至不会编译为字符串。你要

```
"[/\\\\]" 
```

问题中的两个正则表达式都是正确的*普通*正则表达式。但是，由于正则表达式是在 Java 字符串文字中指定的，因此要指定 a `\`，您需要对其进行转义`\\`。因此，我们最终得到`"[/\\\\]"`or `"[\\\\/]"`。

总之，要`\`在正则表达式中正确指定，我们必须对其进行转义`\\`。为了在 Java 字符串文字中正确指定`\\`，我们必须添加另一层 escaping `\\\\`。

# c++ - qt中动画的QTimer

> ID：16180321
> 
> 赞同：2
> 
> 时间：2013-04-23T22:37:15.420
> 
> 标签：c++, qt, animation, qtimer

我希望 paintEvent() 每秒被调用 60 次以在一个小部件内移动几个对象。Widget 类似于 chrome 浏览器的选项卡：当您将选项卡拖离其位置很远时，它会向后移动，当它到达其位置时会降低速度。

我使用连接到插槽的 QTimer，我在其中重新计算一些几何参数，然后调用 update() 以使 qt 主循环调用paintEvent()，在其中绘制一些线条和 QPixmap。

但是设置为 1/60 秒间隔的两个 QTimer 对象正在消耗 10% 的“Core i5 2500K”CPU。对于每个每秒 60 个滴答声的 2 个计时器来说，这不是太多的 CPU 时间吗？如果我从 QTimer 连接到的 slot() 中删除所有代码（“return;”语句除外），CPU 时间的情况是相同的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T02:40:58.843

通常对于动画，你让 Qt 找出合适的时机。运行这么快有什么特别的原因吗？如果您使用 QPropertyAnimation，您可以获得一些非常漂亮的结果，以及流畅的动画。`EasingCurve`s 也可以给你一些很好的效果。

[http://qt.apidoc.info/4.8.5/animation-animatedtiles.html](http://qt.apidoc.info/4.8.5/animation-animatedtiles.html)

编辑：每秒调用`update`60 次也不一定每秒重绘 60 次；取而代之的是，您将 requests-for-a-repaint 每秒 60 次放在事件循环上。根据 Qt 获得的时间和显卡的刷新率以及其他情况，如果程序的主 GUI 事件循环可能只能以每秒 20-35 次的速度重绘图形，则多个`update`调用将被忽略。如果您要求每秒绘制 60 倍，您将使用`repaint()`. 但在大多数情况下，您应该调用`update`.

[http://qt-project.org/doc/qt-4.8/qwidget.html#update](http://qt-project.org/doc/qt-4.8/qwidget.html#update)

此外，如果它使您的计算机速度变慢，您应该尝试尽可能多地缓存计算。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:02:23.187

等等，我认为设计有问题。你能澄清一下你真正想要达到的目标吗？要么“拖动”一些小部件内容并将其移回mouseRelease（例如），要么尝试将页面从选项卡小部件中拖走并将其缓慢移回？

我在问，因为如果你需要移动小部件，你不需要每秒调用 60 次paintEvent，你需要处理*小部件*的几何和位置，当然不要自己调用 update()，或者如果你在谈论小部件内容，那么您应该查看子类化 QGraphicsEffect。

# c++ - C++ / Xcode 套接字绑定（）错误

> ID：16180322
> 
> 赞同：12
> 
> 时间：2013-04-23T22:37:23.273
> 
> 标签：c++, xcode, sockets

当尝试处理来自 sys/sockets.h bind() 的返回值（应该是 int）时，Xcode 无法编译并出现错误

`Invalid operands to binary expression ('__bind' and 'int')`

它似乎在为 bind() 提取不正确的函数定义，因为当我从上下文菜单中选择“跳转到定义”时，它给了我三个选项：2 个来自functional.cpp 的定义，1 个来自 sys/sockets.h。我的代码中包含 sys/sockets，如何强制编译器使用正确的定义？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-23T22:38:17.677

使用`::bind`或摆脱`using namespace std;`.

# google-app-engine - Google App Engine JPA 多级父子关系

> ID：16180326
> 
> 赞同：1
> 
> 时间：2013-04-23T22:38:02.470
> 
> 标签：google-app-engine, jpa, google-cloud-datastore

我正在使用 GAE JPA。我的关系如下：

DummyParent 有 n 个用户，每个用户有 n 个项目。DummyParent --> 用户 --> 项目

当仅与用户和没有项目的情况下坚持 DummyParent 时，我的代码有效。但是拥有多层次的父母关系是行不通的。

```
@Entity
public class DummyParent{

@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private long id;
@OneToMany(targetEntity=User.class, mappedBy="dummyP", fetch=FetchType.LAZY, cascade = CascadeType.ALL)
private ArrayList<User> users;
}

@Entity
public class User {

   @Id
       @GeneratedValue(strategy = GenerationType.IDENTITY)
   private Key key;

   @ManyToOne(fetch=FetchType.LAZY)
   private DummyParent dummyP;

   private long id;
   @OneToMany(targetEntity=Item.class, mappedBy="likedits", fetch=FetchType.LAZY, cascade = CascadeType.ALL)
   public Set<Item> likeditemlist = new HashSet<Item>();
    }

    @Entity
    public class Item {
         public String name;
         @ManyToOne(fetch=FetchType.LAZY)
         private User likedits;
    } 
```

要坚持的代码：

```
DummyParent dp = new DummyParent():
for(FbUser fu : fbuserlist) {
           User user = new User();
           user.likeditemlist.addAll(items);
           user.setName(fu.getName());
               dp.users.add(user);
               // Excluded try catch here It is there in my code
 }
                em.persist(dp);
                em.close(); 
```

在 em.close() 上出现以下异常；

```
Caused by: com.google.appengine.datanucleus.EntityUtils$ChildWithWrongParentException: Detected attempt to establish User(no-id-yet) as the parent of DummyParent(1)/User(101)/Item(105) but the entity identified by DummyParent(1)/User(101)/Item(105) is already a child of DummyParent(1)/User(101).  A parent cannot be established or changed once an object has been persisted.
at com.google.appengine.datanucleus.EntityUtils.extractChildKey(EntityUtils.java:941)
at com.google.appengine.datanucleus.StoreFieldManager.getDatastoreObjectForCollection(StoreFieldManager.java:967)
at com.google.appengine.datanucleus.StoreFieldManager.storeFieldInEntity(StoreFieldManager.java:394)
at com.google.appengine.datanucleus.StoreFieldManager.storeObjectField(StoreFieldManager.java:185)
at org.datanucleus.state.AbstractStateManager.providedObjectField(AbstractStateManager.java:1447) 
```

# javascript - TinyMCE，添加的新字体无法选择

> ID：16180328
> 
> 赞同：2
> 
> 时间：2013-04-23T22:38:07.097
> 
> 标签：javascript, tinymce

我在 tinyMCE 上添加了一个带有 theme_advanced_fonts 的新字体，但它不起作用。

所有其他字体都可以，我可以选择它并查看结果，但是使用新字体，如果文本是这种字体，我会看到很好的结果，但我可以在 tinyMCE 中选择这种字体。

我的代码是：

```
$('.screen-textarea').tinymce({
                        script_url : '<?php echo base_url(); ?>assets/js/tiny_mce/tiny_mce.js',

                        mode : "textareas",
                        theme : "advanced",
                        plugins : "style,inlinepopups",

                        theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,forecolor,fontselect,fontsizeselect",
                        theme_advanced_buttons2 : "",
                        theme_advanced_toolbar_location : "bottom",
                        theme_advanced_toolbar_align : "left",
                        theme_advanced_statusbar_location : "bottom",
                        theme_advanced_resizing : true,
                        theme_advanced_fonts : "ChildsPlay=ChildsPlay;"+"Academy Engraved LET=Academy Engraved LET;"+"American Typewriter=American Typewriter;"+"Arial=Arial;"+"Bradley Hand=Bradley Hand;"+"Chalkduster=Chalkduster;"+"Copperplate=Copperplate;"+"Courier=Courier;"+"Futura=Futura;"+"Georgia=Georgia;"+"Helvetica Neue=Helvetica Neue;"+"Marker Felt=Marker Felt;"+"Noteworthy=Noteworthy;"+"Optima=Optima;"+"Papyrus=Papyrus;"+"Party LET=Party LET;"+"Snell Roundhand=Snell Roundhand;"+"Times New Roman=Times New Roman;"+"Verdana=Verdana;"+"Sanchez=Sanchez;",
                        theme_advanced_font_sizes : "12px,15px,18px,22px,25px,29px,35px,41px,48px,51px,59px,66px,73px,78px,84px,88px,90px",
                        theme_advanced_text_colors : "C2C2C2,FFFFFF,000000,1c2977"
                    }); 
```

字体不起作用是桑切斯。我的电脑上有这个字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-22T13:53:01.773

看其他关于此类问题的帖子，我的印象是分号“;” 在你的字体列表的末尾不应该在那里 - 它应该结束......+“Sanchez=Sanchez”而不是......+“Sanchez=Sanchez;”

我不是这方面的专家，但一直在寻找另一个问题，并在[向 TinyMCE 字体选项添加新字体时遇到了这个问题](https://stackoverflow.com/questions/14170758/adding-new-fonts-to-tinymce-font-options?rq=1)

希望这不是无关紧要的，可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:35:12.957

我猜，这个字体没有加载到你的编辑器 iframe 中。为了加载此字体，使用 content_css tinymce 配置参数添加以下代码（根据您的需要进行修改）。

```
@font-face {
    font-family: "your_font";
    font-style:  normal;
    font-weight: normal;
    src: url("http://your_server/font_directory/your_font.ttf");
} 
```

# c# - User32.dll 的 SendMessage 方法返回错误的 ListViewGroup id

> ID：16180330
> 
> 赞同：1
> 
> 时间：2013-04-23T22:38:09.383
> 
> 标签：c#, winforms, user32

我想处理组标题单击事件。我使用[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/eccdf58a-dd06-4ae3-908d-5f5863c01d64/)中的信息来实现我的目标。应用程序正确识别鼠标单击组标题，问题实际上是，如标题所述，SendMessage 方法返回的组 ID 对于某些组是错误的。

我的 ListView（我在上面测试了代码）如下所示：

```
Group 1
  Item 1.1
  Item 1.2
Group 2
  Item 2.1
  Item 2.2
Group 3
  Item 3.1 
```

基本上，在我单击第二组或第三组之前，它工作正常。单击组标题时，SendMethod 返回以下值： 0 代表`Group 1`， 2 代表`Group 2`和 3 代表`Group 3`。

这是 WndProc 方法的实现：

```
protected override void WndProc(ref Message m)
    {
        bool passMessage = true;

        if (m.Msg == WM_RBUTTONDOWN)
        {
            Point hitPoint = LParamToPoint(m.LParam);
            LVHITTESTINFO lvHitTestInfo = new LVHITTESTINFO();
            lvHitTestInfo.pt.x = hitPoint.X;
            lvHitTestInfo.pt.y = hitPoint.Y;

            int rtn = SendMessage(listView.Handle, LVM_SUBITEMHITTEST, -1, ref lvHitTestInfo);
            if (rtn != -1)
            {
                if (((lvHitTestInfo.flags & LVHITTESTFLAGS.LVHT_EX_GROUP_HEADER) == LVHITTESTFLAGS.LVHT_EX_GROUP_HEADER))
                {
                    passMessage = false;

                    string groupName;
                    if (rtn == listView.Groups.Count)
                        groupName = "default";
                    else
                        groupName = listView.Groups[rtn].Header;
                    GroupClicked.Invoke(listView, new ListViewInterceptorEventArgs(rtn, groupName));
                }
            }
        }

        if (passMessage)
            base.WndProc(ref m);
    } 
```

我想显示与所选组相关的内容，所以我需要知道点击了哪一个。我正在使用 Windows 8。如果有人可以指导我找到解决方案，我将非常感激。如果您需要任何其他信息，请告诉我，我会为您提供。

PS 在我的应用程序中，我动态添加组，如下所示：

```
 ListViewGroup contactsGroup = new ListViewGroup(group.id, group.name);
                contactsGroup.Name = group.id;
                contactsGroup.HeaderAlignment = HorizontalAlignment.Center;
                lvContacts.Groups.Add(contactsGroup);
                for (int i = 0; i < group.users.Count; i++)
                {
                    ListViewItem lvi = new ListViewItem(group.users[i]);
                    lvi.SubItems.Add(group.userStatus[i] ? "ONLINE" : "offline");
                    lvi.Group = contactsGroup;
                    lvContacts.Items.Add(lvi);
                } 
```

相同的 WndProc 方法实现在另一个程序中工作得很好，我编写该程序只是为了测试这一点，并且我通过设计器添加了组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-09T20:40:48.457

*2019 年 6 月*：这仍然是一个微软显然还没有解决的问题！

但多亏了**David Amey**，我们有了一个解决办法。您首先需要创建所有组并将其添加到列表视图

```
Dim MyLvg As ListViewGroup = New ListViewGroup With {.Header = "MyGroup1", .Name = "MyGroup1"}
MyLsv.Groups.Add(MyLvg) 
```

**只有在那之后，**您才能添加项目。

* * *

我**还**发现，在这个阶段，如果您从头开始声明一个新的 ListViewItem 并添加它，它将不起作用，而是在这里您**需要通过现有的 ListView 实例来创建它**。然后只需将你的 Lvi 链接到你的 Lsv 就可以了。

```
Dim MyLvi As ListViewItem = MyLsv.Items.Add("This is my new item")
MyLvi.Group = MyLvg 
```

* * *

最后一点，让我补充一点，我已经测试了 6 种将 ListViewItems 链接到 ListViewGroups 的方法，并且一切正常

```
MyLvi.Group = MyLvg
MyLvi.Group = MyLsv.Groups(0)
MyLvi.Group = MyLsv.Groups("MyGroup1")

MyLvg.Items.Add(MyLvi)
MyLsv.Groups(0).Items.Add(MyLvi)
MyLsv.Groups("MyGroup1").Items.Add(MyLvi) 
```

这似乎合乎逻辑，但我们仍然没有得到这些错误，所以我更愿意仔细检查。

使用这种创建和链接组和项目的方式肯定会确保您避免来自 LVHITTESTINFO 的“错误组 ID”问题

# drupal - 发布表单后，Drupal 渲染结果被阻止

> ID：16180332
> 
> 赞同：0
> 
> 时间：2013-04-23T22:38:21.090
> 
> 标签：drupal, drupal-forms, drupal-blocks

**我有一个在 drupal 的块**中创建的表单，我想做的是显示传递给同一块中表单的计算值的结果。

1.  我使用

> _block_view $blocks['content'] = drupal_render(drupal_get_form('form_name'));

1.  显示表格
2.  在表单提交上我对发布的值进行计算
3.  从这里我想在原始块中显示结果

如何捕获结果并显示它，或者理想地在保留表单值的表单下显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:59:54.563

好的，我所做的是添加 `$form_state ['redirect'] = FALSE;` 到提交处理程序，并填充了自己的表单，然后我添加了一个具有只读属性的新表单字段，并`#value`使用传递回 $form_state['input'] 内部的值设置为计算值...我也`drupal_render(`从上面的设置调用中省略了`$blocks['content']=`，因为它不是必需的

# c++ - 在 C++ 中传递指向可变参数的指针？

> ID：16180335
> 
> 赞同：1
> 
> 时间：2013-04-23T22:38:44.680
> 
> 标签：c++, pointers, arguments, function-pointers

我希望通过指针将可变数量的参数传递给也被指针引用的回调函数。有什么方法可以创建一个可以通过引用传递的参数列表？

前任：

```
typedef struct MENUELEMENT
{
  void* OK_func; void* OK_args;
} menuElement_t;

menuElement_t* curMenuElement;

menuElement_t menu[] =
{
  //First Menu Element
  (void*)menuDisplayText, (void*)("Test", (char*)&lcdBuffer[0]) //menuDisplayText is a function that takes two arguments
  //Second Menu Element
  (void*)menuDisplayVal, (void*)&value[0] //menuDisplayVal is a function that takes one argument
};

void loop() //Main Loop - just an example of how the function pointed to by curMenuElement is executed
{
  curMenuElement = &menu[0];
  if(KP_OK)
  {
    (*reinterpret_cast<void (*)(...)>(curMenuElement->OK_func))(curMenuElement->OK_args); //General template for function pointed to at OK_func with OK_args
  }
} 
```

到目前为止，这适用于一个参数，但是我无法弄清楚如何在 struct 变量的初始化中传递多个参数的列表。这甚至可能无需使用使用 va_list 的构建器函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:44:17.397

可变参数函数仅接受堆栈上的参数。循环必须知道给定函数的结构中有多少参数值，然后下拉到汇编层以手动将值压入堆栈，然后调用当前函数，最后将值弹出函数退出后的栈。这当然是可行的，但手动完成的工作量很大，而且您会安全地失去编译时间。

您最好将结构本身或至少其成员传递给每个函数，并让他们根据需要决定如何使用这些值。例如：

```
typedef void (*menuFunc)(void** args, int numArgs);

typedef struct MENUELEMENT
{
    menuFunc OK_func;
    int OK_num_args;
    void** OK_args;
} menuElement_t; 
```

.

```
void menuDisplayText(void** args, int numArgs)
{
    ...
}

void menuDisplayVal(void** args, int numArgs)
{
    ...
}

void* menuDisplayTextArgs[] =
{
    "Test"
    &lcdBuffer[0]
};

menuElement_t menu[] =
{
  {&menuDisplayText, 2, menuDisplayTextArgs},
  {&menuDisplayVal, 1, &value[0]}
}; 
```

.

```
void loop()
{
    menuElement_t* curMenuElement = &menu[0];
    if (KP_OK)
    {
        curMenuElement->OK_func(curMenuElement->OK_args, curMenuElement->OK_num_args);
    }
} 
```

# asp.net - 在会话变量中使用类

> ID：16180336
> 
> 赞同：0
> 
> 时间：2013-04-23T22:38:45.387
> 
> 标签：asp.net, session-variables

我正在尝试将一个类存储为会话变量。

我有一个名为“SVars.cs”的 App_Code 页面，旨在使用 get 和 set 保存各个页面的所有会话变量。

例如：

```
public static int Account { 
    get { return (string)HttpContext.Current.Session["Account"];} 
    set { HttpContext.Current.Session["Account"] = value; } 
} 
```

这使我可以通过以下命令访问帐户：

```
SVars.Account = "TestUser";
Test.Text = Svars.Account; 
```

现在，我的问题是，当我将 Class 存储为会话变量时，有没有办法做到这一点？

似乎我可以存储类，但如果我使用整个类而不是类中的任何函数或变量，我只能让它工作。因此，一种选择是创建该类的新实例，然后将其保存。但是，这在我的某些页面上尤其笨拙。

```
public static myClass Compass {
    get { return (myClass)HttpContext.Current.Session["Compass"]; } 
    set { HttpContext.Current.Session["Compass"] = value; } 
} 
```

我希望能够直接访问 myClass 的成员并影响他们。

喜欢：

```
SVars.Compass.angle = 34;
SVars.Compass.calculate();
Textbox.Text = "The direction is " + SVars.Compass.direction; 
```

等等，但是，当我尝试这个时，我得到一个错误：

> 非静态字段、方法或属性“SVars.Compass.get”需要对象引用

# c# - XNA 4 - 定时器不产生小行星

> ID：16180338
> 
> 赞同：0
> 
> 时间：2013-04-23T22:38:57.007
> 
> 标签：c#, xna, xna-4.0

我试图在一段时间后产生我的小行星。我通过制作一个计时器来做到这一点。

这是更新方法。

```
public void Update(GameTime theTime)
        {
            gameTime = theTime;
            vPlayer.Y += velocity.Y;

            float secs = (float)theTime.ElapsedGameTime.Seconds;
            timeElapsed += secs;
            secs = 1.5f;

            if (timeElapsed == spawnAsteroid)
            {
                DrawAdsteroid();
                timeElapsed = 0f;
            }

            if (Keyboard.GetState().IsKeyDown(Keys.Down))
            {
                velocity.Y = 5;
            }

            else if (Keyboard.GetState().IsKeyDown(Keys.Up))
            {
                velocity.Y = -5;
            }

            else
            {
                velocity.Y = 0;
            }

            if (vPlayer.Y > 630 )//+ Game1.tPlayer.Height)
                vPlayer.Y = 630;
            if (vPlayer.Y < -10) //+ Game1.tPlayer.Height)
                vPlayer.Y = -10;
        } 
```

这是 DrawAsteroid 方法

```
public void DrawAdsteroid()
        {
            spriteBatch.Begin();
            spriteBatch.Draw(Game1.tAsteroid, vAsteroid, Color.White);
            spriteBatch.End();
        } 
```

这是正在定义的变量。

```
SpriteBatch spriteBatch;
        GameTime gameTime;

        Vector2 vPlayer = new Vector2(0, 720 / 2);
        Vector2 vAsteroid;
        Vector2 velocity;
        Random rand = new Random();

        float timeElapsed = 0f;
        float spawnAsteroid = 1.5f; 
```

发生的问题是小行星永远不会出现。我相信我的计时器无法正常工作，因为我进行了调试并且 if 语句不会执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T23:28:42.680

你必须在`Draw`方法中绘制

从您的更新方法中删除它：

```
 if (timeElapsed == spawnAsteroid)
    {
        DrawAdsteroid();
        timeElapsed = 0f;
    } 
```

在我们将它添加到您的绘制方法之前，我们必须首先进行更改，`timeElapsed`可能**永远不会**完全相等`spawnAsteroid`，即使它确实如此，我们也会在每一帧刷新屏幕，因此它只会绘制一帧。因此，我们必须使用大于或等于运算符`>=`

**-编辑-**

但我意识到你需要不止一颗小行星，所以让我们用 a`List`来存储所有的小行星。您应该创建自己的小行星类，但对于本示例，我们将仅使用位置列表：

```
List<Vector2> Asteroids = new List<Vector2>(); 
```

尝试在您的`Draw`方法中执行此操作：

```
protected override void Draw(GameTime gameTime)
{
GraphicsDevice.Clear(Color.Black) //Add a background and clear screen each frame
foreach (Vector2 asteroid in Asteroids) //Draw each astroid
{
     DrawAsteroid(asteroid.X,asteroid.Y);
}

} 
```

另外，作为额外的，我建议您将经过时间应用于速度，这样在不同的计算机上或在您的性能不同的时候，它将以完全相同的速度移动。你可以这样做：

```
 float elapsed = (float)gameTime.ElapsedGameTime.TotalSeconds;
 if (Keyboard.GetState().IsKeyDown(Keys.Down))
 {
                velocity.Y = SPEED * elapsed;
 } 
```

在您的更新方法中，我们需要编写一些新代码来生成小行星

制作这些新变量：

```
float spawnTimer;
float spawnRate = 1; //Spawn every second 
```

并添加此代码进行更新（删除旧的产卵代码）

```
float elapsed = (float)gameTime.ElapsedGameTime.TotalSeconds;
spawnTimer += elapsed;
if (spawnTimer >= spawnRate)
{
Asteroids.Add(new Vector2(X,Y));
spawnTimer = 0;
} 
```

# javascript - switch 语句中的多个案例（在 case 语句之后继续）

> ID：16180342
> 
> 赞同：1
> 
> 时间：2013-04-23T22:39:23.260
> 
> 标签：javascript, google-apps-script, google-docs

我试图让一个 JavaScript 函数来执行一个与普通 switch 语句（即`switch`, `case`, `break`）不同的 switch 语句，但是我不知道该怎么做。基本上，我想要一个 switch 语句来继续评估这些案例而不会中断，直到它结束。IE

```
function AddData(cell,totalCell) {
  var total = 0;
  switch (cell) {
    case "AUT":
      total = totalCell;
    case "FRA":
      total = total + totalCell;
    case "DEU":
      total = total + totalCell;
    case "GRC":
      total = total + totalCell;
    case "SVK":
      total = total + totalCell;
    break;
  }
  return total;
} 
```

仅供参考，这与 Google 电子表格一起使用。

非常感谢您提供的任何帮助！

编辑：我希望像这样调用 AddData 函数：`AddData(A:A,B:B)`在看起来像这样的电子表格上：

```
AUT  3.4
FRA  3.3
ITA  4.7
SWE  3.0
FRA  1.1
FRA  3.7
LVA  5.2 
```

在上述情况下，我希望输出为`11.5`

我希望这有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T14:03:39.113

有几件事需要调整。

1.  当您使用范围作为参数时，它们将作为二维数组呈现给您的自定义函数。在这种情况下，您打算传递一列，因此该数组将是一个行数组，其中每一行都是一个包含一个元素的数组。要访问列中的每个单元格，您需要遍历行，如下所示：

    ```
    for (var i in cell) { do_something_with( cell[i][0] ) } 
    ```

    循环使用`for (var i=0; i < cell.length; i++)`.

2.  案例失败 - 由于您似乎希望对每个国家/地区代码执行相同的操作，因此您只需要一个代码块。（正如其他人指出的那样，如果没有`break`after each 代码块，您的原始代码将会失败并在第一次匹配之后重复每个操作。）

3.  我认为原始代码块`case "AUT"`是错误的，实际上，您确实想要总结所有国家/地区代码。

### 代码

```
function AddData(cell,totalCell) {
  var total = 0;
  for (var i in cell) {
    switch (cell[i][0]) {
      case "AUT":
      case "FRA":
      case "DEU":
      case "GRC":
      case "SVK":
        total = total + totalCell[i][0];
        break;
    }
  }
  return total;
} 
```

### 问题

这个功能并不强大，你真的应该重新考虑你想要做什么。

*   这两个参数具有隐含的关系，但它们之间没有显式的联系。这带来了它们在长度或含义上实际上不匹配的风险。这可以通过将多列范围作为输入来改进，保证两列匹配。

*   您想对您的案例陈述中的列表之外的国家/地区值做什么？现在，其他所有内容都被悄悄地忽略了，但是如果输入另一个国家/地区值怎么办……你想要吗？（也许您需要以不同于新值的方式处理空白？`throw`如果输入了未知国家，也许您想这样做？）

# unit-testing - iOS - 测试用户界面（自动布局/布局约束）

> ID：16180346
> 
> 赞同：0
> 
> 时间：2013-04-23T22:39:32.790
> 
> 标签：unit-testing, user-interface, ios6, autolayout

我正在寻找有关如何测试利用布局约束的用户界面的最佳实践、建议和见解。

我的视图控制器子类正在显示“叶级”数据——例如，假设应用程序目录 DVD 和这个视图控制器是`DiscDetailViewController`，你传递给它一个`DigitalDisc`具有五个字符串属性的实例。目标是在标签中显示这些字符串，并使用适当`NSLayoutConstraint`的 .

我想编写一系列测试，对`DigitalDisc`传递到此视图控制器的实例进行尽可能多的合理排列，并确保我已经定义了足够的约束。

例如，我有一个`DigitalDisc`实例，设置它的`title`和`director`属性并在`DiscDetailViewController`... Ack！我要断言什么？我被困住了！

我进行测试的动机是避免回归错误。自动布局（尤其是在 IB 中）变化无常，但这似乎并不是自动布局所独有的。我不想修复一个错误只是为了级联一堆新的故障。这些是单元测试吗？他们是 UIAutomation 测试吗？它们完全是另外一回事吗？

**- - -编辑 - - -**

假设我的`DigitalDisc`类定义如下：

```
@interface DigitalDisc : NSObject

@property NSString *title;
@property NSString *year;
@property NSString *director;
@property NSString *studio;
@property NSString *review;

@end 
```

我想检查以确保我的布局约束足够灵活，以允许`DigitalDisc`在任何字段中可能没有值的实例；唯一的要求是`title`字段。这意味着删除子视图应该正确地流向界面。我所说的“正确”是什么意思？

1.  没有模棱两可和不可满足的约束*（我可以测试 UIView`-hasAmbigiousLayout`但如何测试抛出和捕获的异常？）*
2.  该标签扩展到多行以避免截断
3.  相邻标签永远不会比标准距离更近或更远
4.  以上在纵向和横向都是正确的

*（这足以让我陷入困境，所以我可以考虑满足其他一些要求）*

* * *

以下是一些肯定会赢得下一个 ADA 的模拟屏幕

**完全填充的`DigitalDisc`实例在视图控制器中的样子** ![一张完整的 <code>DigitalDisc</code>](https://i.stack.imgur.com/I5OZk.png)

**部分填充的`DigitalDisc`实例在视图控制器中可能是什么样子。**

*请注意，上面屏幕截图中的“年份”标签已被删除，“导演”标签已向上移动。这是我对测试非常感兴趣的规范/行为类型。*

![只有标题和导演的<code>DigitalDisc</code>](https://i.stack.imgur.com/bG3m1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:53:30.243

我可能误解了你的问题，但你描述的方式我会考虑使用表格视图或集合视图。假设您使用集合视图，数据源将知道在给定`DigitalDisc`. 这很容易进行单元测试，而无需启动接口。然后，自定义集合视图布局可以确保每个单元格具有适当的高度（给定标签中的文本长度）以及与其他单元格的适当距离。这也是可单元测试的。

然后，您只需连接您的集合视图数据源和自定义集合视图布局即可完成。如果需要，可能会做一些 UI 自动化测试以进行健全性检查。但是我会尝试将您描述的边缘案例测试推向不接触界面的较低级别的测试。Apple 已经鼓励使用集合视图数据源和布局进行分离，这听起来像是解决问题的好方法，以便您可以彻底测试它。

是的，您可以尝试使用自动布局来做您想做的事情，但是无论如何您都必须计算标签的高度，而且您每次都会旋转 UI，这会很慢。

# sql-server-2008 - SQL Server 无法在日期调用方法

> ID：16180347
> 
> 赞同：29
> 
> 时间：2013-04-23T22:39:41.470
> 
> 标签：sql-server-2008

我在名为 ShiftDate 的 SQL Server 2008 表中有一个 DATETIME 列。我想将其转换为查询中的 DATE 列：

```
SELECT     ID, ScheduleID, ShiftDate, CONVERT(DATE, ShiftDate) AS ProductionDate
FROM       dbo.ScheduleResults 
```

我正在 SSMS 中编辑此查询。如果我在标准查询窗口中运行查询，我不会收到任何错误。如果我在视图编辑器窗口中运行它，我会收到错误“无法在日期调用方法”。

我已经尝试过 CAST 方法，但它得到了同样的错误。

```
SELECT     ID, ScheduleID, ShiftDate, CAST(ShiftDate AS DATE) AS ProductionDate
FROM       dbo.ScheduleResults 
```

完整的错误信息是：

```
Executed SQL statement: SELECT ID, ScheduleID, ShiftDate, CAST(ShiftDate as DATE).ToString() AS ProductionDate FROM dbo.ScheduleResults
Error Source: .Net SqlClient Data Provider
Error Message: Cannot call methods on date. 
```

我倾向于认为这是 SSMS 中的一个错误，但我想从 StackOverflow 人员那里获得一些关于如何将日期时间列转换为日期的反馈。我可以轻松地将其转换为字符串列，但这并不理想，因为 Excel 不会将其视为日期。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-05-08T15:05:44.933

你是对的，这是 SSMS 中的一个错误。我正在使用 SQL Server Management Studio 2008 R2，当我尝试使用内置设计器创建视图时，我收到与您相同的错误消息：

```
SQL Execution Error
Error Source: .Net SqlClient Data Provider
Error Message: Cannot call methods on date. 
```

正如@Aaron Bertrand 提到的，要解决此问题，请选择“新查询”并在“查询”窗口中创建视图。对于您的代码，它将是：

```
CREATE VIEW myView AS
SELECT     ID, ScheduleID, ShiftDate, CAST(ShiftDate AS DATE) AS ProductionDate
FROM       dbo.ScheduleResults 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-18T19:03:00.293

这似乎是 [https://stackoverflow.com/users/464923/will](https://stackoverflow.com/users/464923/will)上面提到的一个真正的错误，从 MS Access 旧时代继承而来的所有不便，您只需忽略错误消息并保存您的视图然后运行它在常规的 SSMS 窗口中，不会抛出任何错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-20T20:39:42.830

我可以假设 (ShiftDate AS DATE) 应该具有日期时间格式。如果你试试这个：

*CAST(CONVERT(DATE, ShiftDate) as Varchar)*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-26T10:06:52.300

根据我的经验，这个错误可以忽略。只需保存视图并在设计/“视图编辑器”窗口之外（在新的查询窗口中）查询它，它就会工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-17T12:23:43.037

您可以创建一个函数并在需要将 DATETIME 转换为 DATE 时使用它。

```
USE [MyDatabaseName]
GO

IF EXISTS (
  SELECT * 
    FROM sys.objects 
   WHERE object_id = OBJECT_ID(N'[dbo].[FN_DateFromDateTime]')
   and  type in (N'FN')
)
   DROP FUNCTION [dbo].[FN_DateFromDateTime]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      Codestalker
-- Create date: Mar 17, 2017
-- Edited date: Mar 17, 2017
-- Description: Return Date from DateTime.
-- =============================================
CREATE FUNCTION [dbo].[FN_DateFromDateTime]
(
    -- Add the parameters for the function here
    @InputDateTime DateTime
)
RETURNS Date
AS
BEGIN
        DECLARE @ReturnDate Date
        Set @ReturnDate = CONVERT(DATE, @InputDateTime)  
        Return @ReturnDate
END   
GO 
```

然后在您的视图中调用该函数来转换您的 DATETIME。

```
SELECT DateTimeColumn, dbo.FN_DateFromDateTime(DateTimeColumn) AS ConvertedDateTime
FROM dbo.MyTable 
```

您不会收到错误消息，它是可重复使用的。（在 SQL Server 2012 中测试）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-12T09:35:56.567

有时这有效...

```
CAST(CAST(YourDate AS char(10)) AS Datetime) 
```

（是的，我知道这不是日期，但它更近了一步）

在同一个查询中，它在外部选择中起作用，但在联合内部却不起作用……

不要问为什么：P

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-16T18:48:10.487

此错误仍然存​​在于 Management Studio 2016 中，目前看来唯一的解决方案是转换为 varchar 并在您想使用查询设计器时使用它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-01T07:24:37.393

当您错误地将列多次放在表名之后时，也会发生这种情况。

假设 TableName 是`Person`，列是`Age`

并且您在查询中编写了如下内容：

```
Person.Age.Age = 30 
```

希望我的经验对某人有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-30T20:57:05.167

您可以改用转换选项。

```
SELECT     ID, ScheduleID, ShiftDate, CONVERT(VARCHAR(10), ShiftDate,101) AS ProductionDate
FROM       dbo.ScheduleResults 
```

您可以在[此处查看](https://msdn.microsoft.com/en-us/library/ms187928.aspx)日期格式的各种选项。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-13T02:04:10.287

SSMS 18.4 中仍然存在此问题。我只是将它作为“想法”发送给微软，由于微软对每个给定错误报告的关注（仅）取决于它的社会支持，如果你想修复它，请去投票支持它

[https://feedback.azure.com/forums/908035-sql-server/suggestions/41135050-ssms-returns-error-on-valid-query-in-view-designer](https://feedback.azure.com/forums/908035-sql-server/suggestions/41135050-ssms-returns-error-on-valid-query-in-view-designer)

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2014-06-30T10:45:05.727

问题在于基础表中属性的名称 ShiftDate。当重命名为不包含单词 Date 作为最后一个字符的内容时，该视图有效。例如，尝试重命名为 ShiftDateDD。

# javascript - 高级全局重定向

> ID：16180351
> 
> 赞同：0
> 
> 时间：2013-04-23T22:40:04.043
> 
> 标签：javascript, jquery

下面是我的代码，它可以很好地编辑链接以根据位置将用户发送到网站，但我想以两种方式扩展此代码：

```
$(window).load(function () {
    $.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {
        var country = data.address.country;
        var urls = {
            'Australia': 'www.website.com.au',
            'New Zealand': 'www.website.co.nz'
        }
        var locstring = "/contact_us.html";
        var locstring2 = "/about_us.html";
        var cchUrl = 'www.website.com';
        if(urls[country]) {
            cchUrl = urls[country];
        }
        //alert(cchUrl);
        $("#global").attr('href', 'http://' + cchUrl + locstring);
        $("#global2").attr('href', 'http://' + cchUrl + locstring2);
    });
});

<a href="http://www.website.com/contact_us.html" id="global" target="_blank">Contact Us</a>

<a href="http://www.website.com/about_us.html" id="global2" target="_blank">About Us</a> 
```

1.  如您所见，我必须设置两个变量（locstring，locstring2）和两个 id（global，global2）才能将用户发送到两个不同的位置，是否可以使用 id global 来更改域但它没有不管域之后是什么路径。我想简化代码，以便 www.thiswillchange.com/thiswontchange 使用一个 ID，而不是为不同的链接设置多个 ID 和变量。

2.  作为一个不同的项目，我可以使用此代码（使用从第 1 点开始的更改）来创建“页面加载”，因此如果用户例如冲浪到页面 www.website.co.nz/contact_us.html，它会检测到他们来自澳大利亚并将他们发送到 www.website.com.au/contact_us.html 网站，反之亦然，或者这需要完全不同的方法。

请记住，当我添加更多站点时，我可能希望将来在列表中添加更多国家/地区。

编辑：也许我应该详细说明一下链接是国际斜杠页面上的文本，没有菜单，我只是使用全局重定向来更改链接域，以将用户发送到正确的网站以获得该位置，然后页面的路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:58:43.033

我不知道这对您是否可行，但您可以从 javascript 构建菜单，而不是编写 html 然后更改它。这样，您还可以轻松添加更多菜单项，而无需更改 html 并引入更多全局变量。

```
$(window).load(function () {
    $.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {

        var country = data.address.country;
        var urls = {
            'Australia': 'www.website.com.au',
            'New Zealand': 'www.website.co.nz'
        };

        var menu = {
            'Contact Us'  : '/contact_us.html',
            'About Us'    : '/about_us.html'
        };

        var cchUrl = 'www.website.com';
        if (urls[country]) {
            cchUrl = urls[country];
        }
        for(name in menu){
            $('#menu').append($('<a/>',{'text':name,'href':'http://'+cchUrl+'/'+menu[name]}));
        }

    });
});

<div id="menu"></div> 
```

* * *

下一次尝试：
这里所有的链接都得到相同的类。然后他们每个人的href中的域将被cchUrl替换。

```
$(window).load(function () {
    $.getJSON('http://api.wipmania.com/jsonp?callback=?', function (data) {
        var country = data.address.country;
        var urls = {
            'Australia': 'www.website.com.au',
            'New Zealand': 'www.website.co.nz'
        }

        var cchUrl = 'www.website.com';
        if(urls[country]) {
            cchUrl = urls[country];
        }

        $('.global').each(function(){
            var href = $(this).attr('href');
            $(this).attr('href', href.replace(/http:\/\/.*?\//,'http://'+cchUrl+'/'));
        });
    });
});

<a href="http://www.website.com/contact_us.html" class="global" target="_blank">Contact Us</a>
<a href="http://www.website.com/about_us.html" class="global" target="_blank">About Us</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:11:39.743

```
function update(id, domain) {
    var old = $(id).attr('href')
    $(id).attr('href', old.replace(/http:\/\/.+?\/(.*?)/, 'http://'+domain+'/$1'))
}
update("#global", cchUrl) 
```

# c# - 扩展 WPF 第三方控件以启用对现有属性的双向绑定

> ID：16180353
> 
> 赞同：2
> 
> 时间：2013-04-23T22:40:23.417
> 
> 标签：c#, wpf, mvvm, binding, custom-controls

我目前正在开发一个项目，用户将输入动态编译和执行的 C# 脚本。我现在将跳过提供更多细节，因为稍后我可能会对项目的其他方面有疑问。

由于我无法控制一些更高级别的决策，因此将使用 WPF 开发用户界面，并且将使用 Quantum Whale Editor.NET 控件作为编辑器。遗憾的是，QWhale Editor.NET 的 WPF 版本似乎还没有完全成熟，因此缺乏文档，最糟糕的是，它似乎对绑定不友好。

虽然我还是 WPF 的新手，但我对 MVVM 有点熟悉，所以我很想应用它。但是，我在测试评估版并尝试将编辑器的文本绑定到模型的属性时遇到了第一个挑战，并收到了一个不可能的异常：

> 无法在“TextEditor”类型的“文本”属性上设置“绑定”。只能在 DependencyObject 的 DependencyProperty 上设置“绑定”。

在检查替代方案时尝试了 AvalonEdit，我想起了另一个 Stack Overflow 问题：[Making AvalonEdit MVVM Compatible](https://stackoverflow.com/questions/12344367/making-avalonedit-mvvm-compatible)。所以我遵循了同样的概念。

我已经定义了一个从编辑器继承的类，添加了一个依赖属性，并首先尝试将其与隐藏`Text`编辑器的原始属性结合使用`new`. 但显然这是一个很长的镜头，我的属性没有被使用，基础属性被直接调用。

一旦失败，我定义了一个名为`DocumentText`. 我让它 wrap `base.Text`，使用它定义绑定，并因此得到一个绑定工作方向。那就是从模型到控制。但从我发现的情况来看，让绑定在另一个方向上工作的最佳方法是让`override`事件`OnTextChanged`（或等价物）引发属性更改通知。问题是控件没有这样的事件，听起来很奇怪。

现在我可能会覆盖一堆其他事件（例如 OnKeyUp、OnMouseClick 等），以便我可以处理所有可能修改文本的操作（键入、拖放、粘贴等），但这似乎不太实用，并且可能无法重复到我以后可能有兴趣绑定的其他属性。在我找到时间在网上搜索了几天之后，我仍然没有找到其他想法。那么，除了深入研究控件本身的代码之外，是否有任何适当的解决方案可以解决我的问题？（据说，许可证将允许我访问源代码，但我宁愿避免直接修改）。

我已经避免在问题标题和标签中指定 QWhale 编辑器，因为我觉得我正在寻找的内容不依赖于这个特定的控件。如果我错了，请纠正我。

由于在另一台计算机上，我目前无法提供我的测试代码，但如果您认为有必要，请给我留言，我会添加它。

* * *

更新：这是代码，因为我不确定我是否能够清楚地描述我的问题。

```
class ExtenEdit : TextEditor
{
    public static DependencyProperty TextProperty =
        DependencyProperty.Register("Text", typeof(string), typeof(ExtenEdit),
            new PropertyMetadata((obj, args) =>
            {
                TextEditor target = (TextEditor)obj;
                target.DocumentText = (string)args.NewValue;
            })
        );

    public new string Text
    {
        get { return base.Text; }
        set
        {
            if (base.Text != value)
            {
                base.Text = value;
            }
        }
    }
} 
```

这在我修改 中的值时有效`ViewModel`，但在编辑器中键入时，我的属性被绕过并直接调用基本属性。如果我添加这样的东西，它会起作用：

```
protected override void OnKeyUp(System.Windows.Input.KeyEventArgs e)
{
    SetCurrentValue(TextProperty, base.Text);
    base.OnKeyUp(e);
} 
```

但正如我上面所说，我不能认为这是一个有效的“干净”解决方案。

以下是我的 XAML 中的相关部分（您可以注意到我也在使用 AvalonDock）：

命名空间：

```
<Window x:Class="AvalonDockQWhale.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:avalonDock="http://avalondock.codeplex.com"
    xmlns:converter="clr-namespace:AvalonDockQWhale.Converter"
    xmlns:pane="clr-namespace:AvalonDockQWhale.View.Pane"
    xmlns:editor="clr-namespace:QWhale.Editor.Wpf;assembly=QWhale.Editor.Wpf"
    xmlns:control="clr-namespace:AvalonDockQWhale.Control"
    xmlns:controlHelper="clr-namespace:AvalonDockQWhale.ControlHelper"
    x:Name="mainWindow"
    Title="MainWindow" Height="600" Width="800"> 
```

以及我最初尝试的绑定：

```
<control:ExtenEdit Text="{Binding Path=ScriptText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" /> 
```

我为 DHN 的解决方案尝试的绑定：

```
<editor:TextEditor controlHelper:AttachedProperties.Text="{Binding ScriptText}" /> 
```

和

```
<editor:TextEditor controlHelper:AttachedProperties.Text="{Binding Path=ScriptText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" /> 
```

* * *

最后的细节：我已经接受了 DHN 给出的答案，尽管它在我的具体情况下不起作用，因为它似乎是解决类似问题的一个不错的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T06:43:53.083

[这](https://stackoverflow.com/questions/16172462/close-window-from-viewmodel/16172973#16172973)是我昨天为帮助另一个 SOler 而写的东西。但它也可能满足您的需求。我“扩展”了一个`Window`via `DependencyProperty`，因此它的`DialogResult`属性是可绑定的。

**开始**

```
public class AttachedProperties : DependencyObject //adds a bindable DialogResult to window
{
    public static readonly DependencyProperty DialogResultProperty = 
        DependencyProperty.RegisterAttached("DialogResult", typeof(bool?), typeof(AttachedProperties), 
        new PropertyMetaData(default(bool?), OnDialogResultChanged));

    public bool? DialogResult
    {
        get { return (bool?)GetValue(DialogResultProperty); }
        set { SetValue(DialogResultProperty, value); }
    }

    private static void OnDialogResultChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var window = d as Window;
        if (window == null)
            return;

        window.DialogResult = (bool?)e.NewValue;
    }
} 
```

现在您可以将 DialogResult 绑定到 VM 并设置其属性值。设置值后，窗口将关闭。

```
<!-- Assuming that the VM is bound to the DataContext and the bound VM has a property DialogResult -->
<Window someNs:AttachedProperties.DialogResult={Binding DialogResult} /> 
```

**结尾**

恕我直言，如果您只需要一个特定属性，这是提供可绑定性的好方法。如果有更多的属性必须以这种方式改进，那么我会扩展或包装该类。

**编辑 - 这是在我们的生产环境中运行的摘要**

```
<Window x:Class="AC.Frontend.Controls.DialogControl.Dialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:DialogControl="clr-namespace:AC.Frontend.Controls.DialogControl" 
        xmlns:hlp="clr-namespace:AC.Frontend.Helper"
        MinHeight="150" MinWidth="300" ResizeMode="NoResize" SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterScreen" Title="{Binding Title}"
        hlp:AttachedProperties.DialogResult="{Binding DialogResult}" WindowStyle="ToolWindow" ShowInTaskbar="True"
        Language="{Binding UiCulture, Source={StaticResource Strings}}">
        <!-- A lot more stuff here -->
</Window> 
```

如您所见，我`xmlns:hlp="clr-namespace:AC.Frontend.Helper"`先声明命名空间，然后再声明 binding `hlp:AttachedProperties.DialogResult="{Binding DialogResult}"`。

`AttachedProperty`外观是这样的。这与我之前发布的不一样，但恕我直言，它不应该有任何区别。

```
public class AttachedProperties
{
    #region DialogResult

    public static readonly DependencyProperty DialogResultProperty =
        DependencyProperty.RegisterAttached("DialogResult", typeof (bool?), typeof (AttachedProperties), new PropertyMetadata(default(bool?), OnDialogResultChanged));

    private static void OnDialogResultChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var wnd = d as Window;
        if (wnd == null)
            return;

        wnd.DialogResult = (bool?) e.NewValue;
    }

    public static bool? GetDialogResult(DependencyObject dp)
    {
        if (dp == null) throw new ArgumentNullException("dp");

        return (bool?)dp.GetValue(DialogResultProperty);
    }

    public static void SetDialogResult(DependencyObject dp, object value)
    {
        if (dp == null) throw new ArgumentNullException("dp");

        dp.SetValue(DialogResultProperty, value);
    }

    #endregion
} 
```

# html - 如何使具有与宽度匹配的边框的 HTML 元素居中

> ID：16180356
> 
> 赞同：1
> 
> 时间：2013-04-23T22:40:38.973
> 
> 标签：html, css, centering

棘手的是，我有一个 HTML 标题，上面应用了边框顶部和边框底部。我可以将它居中以使边框与元素的宽度相同吗？现在我不得不悲惨地使用宽度，这根本不是一个好的解决方案。

在这里查看演示：[http ://codepen.io/anon/pen/KIJAh](http://codepen.io/anon/pen/KIJAh)

**HTML**

```
<div>
<h3 class="removeMe">All your base</h3>
</div> 
```

**CSS**

```
div {
 padding-top: 30px;
 height: 100px;
 width: 300px;
 margin: 0 auto;  
 background-color: Moccasin;
}

h3 {
  text-align: center;
  display: block;
  border-top: 1px solid black;
  border-bottom: 1px solid black; 
  margin: 0 auto;
}

.removeMe {
 width:160px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T22:50:46.127

我能想到的主要有两个选择：

1) 将 h3 设置为`display: inline`AND 将父元素设置为`text-align: center`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T22:44:13.480

您可以添加`display: inline`到您的 h3 选择器：

```
h3 {
  text-align: center;
  display: block;
  border-top: 1px solid black;
  border-bottom: 1px solid black; 
  margin: 0 auto;
  display: inline;
} 
```

这当然会影响布局行为。

**EDIT** OP 希望文本居中：

要使文本居中添加`text-align: center`到父级：

```
div {
    padding-top: 30px;
    height: 100px;
    width: 300px;
    margin: 0 auto;  
    background-color: Moccasin;
     text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T22:46:06.980

您可以使用 display:inline-block; 在 h3 上而不是 display:block;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T22:51:15.770

我建议使用 display:inline，但如果这破坏了您的布局并且您不想修复它。你可能想试试桌子。它似乎按照您在演示中想要的方式工作。不是 100% 确定它仍然可行的 CSS。

```
display: table; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T22:51:17.063

如果您希望使标题与中心对齐...

[http://codepen.io/anon/pen/xoFKH](http://codepen.io/anon/pen/xoFKH)

突出显示 div 背景以使其明显：/

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-01T20:15:02.177

这对我有用。

```
.heading__wrap {
  display: table;
  margin: 0 auto;
}

.heading__wrap .heading__title {
  border-bottom: 2px solid #7f4cab;
  padding-bottom: 12px;
  font-size: 36px;
  font-weight: 300;
  line-height: 42px;
  margin-bottom: 50px;
}
```

```
<div class="heading__wrap">
  <h2 class="heading__title">Music to Our Ears</h2>
</div>
```

# ms-access - 为什么 MS Access 将我的表字段名称视为 WHERE 子句中的参数？

> ID：16180357
> 
> 赞同：1
> 
> 时间：2013-04-23T22:40:40.493
> 
> 标签：ms-access

我正在尝试创建一个参数查询，提示用户输入值（包含在括号中。）当我运行查询时，还会提示我输入表字段名称（在括号中。）

```
example (Where (degree.degree) = [Desired degree level] 
```

我被提示同时`degree.degree`和`Desired degree level.`

不应提示我输入表字段名称。有人遇到过这个问题吗？我在搜索中什么也没找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:47:35.360

通常这些“意外参数”是由查询中某处的拼写错误引起的。如果您已经确认这些拼写是正确的，我不确定发生了什么，但我会以这种方式尝试查询：

```
SELECT d.*
FROM degree AS d
WHERE d.degree = [Desired degree level] 
```

在这种情况下不需要括号，但我不明白为什么它们会首先引起问题。

我从不对表及其字段之一使用相同的名称。我也不确定这是否是问题的根源，但我会为表名设置别名以查看该更改是否有任何影响。

如果此版本的查询仍然不起作用，请将表重命名为`tblDegree`并查看是否可以正常工作。

# vba - 重命名文件后自动打开宏失败

> ID：16180368
> 
> 赞同：-1
> 
> 时间：2013-04-23T22:42:00.480
> 
> 标签：vba, excel

我有一个文件，其中有一个 auto_open 宏，它启动另一个名为 OpenFIles 的宏。我不得不以另一个名称保存文件，因为当我通过公司 VPN 工作时，该文件仅以只读模式打开。如果重命名的文件已经打开，我可以运行 OpenFiles 宏，但是当我打开文件时，auto_open 宏会给我一条错误消息，指出宏可能不可用或所有宏都被禁用。我的安全设置与原始文件相同。我会回到我的原始文件，但我在新文件中做的太多了。请帮忙。代码是：

```
Sub LauncMacro()
  Auto_Open Macro
  Application.Run "FWorking.xlsb!OpenFiles"
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:10:00.297

```
Sub LauncMacro()
  Auto_Open Macro
  Application.Run "FWorking.xlsb!OpenFiles"
End Sub 
```

我认为您的问题是使用**FWorking**`Application.Run "FWorking.xlsb!OpenFiles"`如果工作簿不再称为**FWorking**，它将无法找到并执行宏。

也许你可以尝试：

`Application.Run thisworkbook.name & "!OpenFiles"`

或者只是使用

`Application.Run "OpenFiles"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:54:55.873

看起来它只适用于 Auto_Open 作为宏的名称。我重新录制了名为 Open_Macro 的宏，它工作正常。

# javascript - Mvc：使用 javascript 数组从 json 获取值到 mvc 控制器

> ID：16180369
> 
> 赞同：0
> 
> 时间：2013-04-23T22:42:03.033
> 
> 标签：javascript, asp.net-mvc, arrays, json, linq-to-sql

我需要从我请求到控制器操作的 json 结果中读取每个值。这是我的**客户端**。

```
$.ajax({
        type: "POST",
        url: "List",
        data: { firstArray: arrayCountries, secondArray: arrayLang },
        success: function (result) {

             //here i need each value from json, but it's not working for me   
        },
        dataType: "json",
        traditional: true
    }); 
```

好的，现在我使用这种方式，因为我需要发送 2 个 javascript 数组，并且在找到很多之后，这种方式对我有用。

这是我的**服务器端**。根据[How can I post a array of string to ASP.NET MVC Controller without a form？](https://stackoverflow.com/questions/309115/how-can-i-post-an-array-of-string-to-asp-net-mvc-controller-without-a-form)我创造了这个。

```
public ActionResult List(List<String> firstArray, List<String> secondArray)
{
    //But here i need a list of sections, so i call a method for that
      var sections = SomeClass.getSections(fistArray, secondArray);

    //And return the json with the collection 
      return Json(sections, JsonRequestBehavior.AllowGet);
} 
```

现在这是我的**getSections 方法**

```
public static IEnumerable getSections(List<String> firstArray, List<String>secondArray)
{
    entities db = new entities();

    var result = from values in db.Sections
                 where ... 
                 select new SectionsModel{ // do something  };

    return result.OrderBy(p => p.Description);
} 
```

现在我在客户端越来越好 json 但我不知道如何访问它，以及如何从中获取每个值？... 提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:48:23.680

您需要先解析它，然后您可以像在 .NET 中所做的那样访问属性

```
$.ajax({
        type: "POST",
        url: "List",
        data: { firstArray: arrayCountries, secondArray: arrayLang },
        success: function (result) {

             var sections = JSON.parse(result);

             // access properties here
        },
        dataType: "json",
        traditional: true
    }); 
```

# java - 从字符串中删除选择的字符

> ID：16180371
> 
> 赞同：3
> 
> 时间：2013-04-23T22:42:16.317
> 
> 标签：java, string, methods

我是一名试图找出问题的学生。
我需要创建一个方法，从另一个字符串中删除在指定字符串中找到的任何字符。
因此，如果`String str = "hello world" and String remove = "eo"` 该方法将返回`"hll wrld"`.

我的解决方案设置方式生成的字符串被打印了很多次，这是我不想要的。是否有一个简单的解决方法或者我必须重新设计该方法？

```
class StringStuff{
        public static void main (String [] args){

        String str = "This is a string that needs to be changed";
        String remove = "iaoe";

        System.out.println(removeChars(str, remove));

        }

    public static String removeChars(String str, String remove){
        String newStr = "";
        for(int i=0;i<remove.length();i++){
            for(int j=0; j<str.length(); j++){
                if(str.charAt(j)!=remove.charAt(i)){
                    newStr = newStr+str.charAt(j);
                }
            }
        }        
        return newStr;
    }
} 
```

更新

感谢您的回复，我想出了另一种受您提供的解决方案启发的“新”方式。

```
public static String removeChar(String str, String remove){
      String newStr = "";
      boolean match = false;
      for(int i = 0; i<str.length(); i++){
         for(int j=0; j<remove.length(); j++){
            if(str.charAt(i) == remove.charAt(j))
               match = true;
         }
         if(match == false)
            newStr = newStr + str.charAt(i);
         match = false;
      }
      return newStr;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:46:31.893

这将完成这项工作：

```
return str.replaceAll("[" + remove + "]", ""); 
```

只要`remove`不包含任何必须在正则表达式字符类中转义的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T23:22:33.203

该答案假定`replaceXXX`不允许使用这些方法。

首先，`for`循环是错误的方式。第一个循环需要遍历原始`String`.

下一个问题是，如果字符不匹配，嵌套`for`循环会为字符串`String`的*每个*字符追加一个字符。`remove`这产生`hllo worldhell wrld`.

因此，解决方案不是迭代`remove` `String`. [indexOf](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29)用于字符检查。

```
public static String removeChars(String str, String remove) {
   String newStr = "";
   for (int i = 0; i < str.length(); i++) {
      if (remove.indexOf(str.charAt(i)) == -1) {
       newStr = newStr + str.charAt(i);
      }
   }

   return newStr;
} 
```

可以通过使用`StringBuilder`而不是`String`for来进行进一步的改进`newStr`。

# c# - 将整数除以十进制数

> ID：16180373
> 
> 赞同：0
> 
> 时间：2013-04-23T22:42:20.710
> 
> 标签：c#, math

我正在尝试将整数除以小数/浮点数/双精度数。我可以将整数除以使用: `int Num1 = 300 / 2;`，但是当我尝试将“2”设为小数时，它将不起作用。我见过有人提到这样做`int Num1 = 300 / ((float)1.25);`。老实说，这对我来说没有任何意义......我也试过`int Num1 = Decimal.Divide(300, 1.25);`没有任何运气......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T22:46:10.213

问题是您试图将结果保存到`int`. 尝试这个：

```
float result = 300 / (float)2;
float result = 300 / (float)1.25; 
```

或者为了更简洁（这`f`是向编译器发出的信号，表明这是一个`float`常量）：

```
float result = 300 / 2f;
float result = 300 / 1.25f; 
```

请注意，[`float`](http://msdn.microsoft.com/en-us/library/b1e65aza%28v=vs.110%29.aspx)它与 a 非常不同[`decimal`](http://msdn.microsoft.com/en-us/library/364x0z75.aspx)，并且两者都有其优点。要使用小数：

```
decimal result = decimal.Divide(300, 1.25); 
```

或者这个（这`m`是向编译器发出的一个信号，表明这是一个`decimal`常量）：

```
decimal result = decimal.Divide(300m, 1.25m); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T23:10:47.213

简单的说：

*   如果您对不同类型的两个数字进行算术运算（如 +、-、*、/），编译器会将“最小”类型转换为可以保存最多信息的“最大”类型。因此，如果您将 300（整数）除以 1.25（双精度），编译器会将 300 转换为双精度，然后将两个双精度都分开。结果类型将是相同的类型，因此：双精度型。
*   如果您想将“较大”类型的结果放入“较小”类型（一种可以容纳较少信息的类型，如分数），则必须使用显式强制转换将此类型转换为较小的类型。所以，如果你想把一个 double 放入一个 int 中，你必须将它转换为一个 int，这可能会导致信息丢失。
*   C# 知道可以在常数上使用的许多后缀，以明确说明该数字是什么类型：
    *   10U ==> 单位
    *   10L ==> 长
    *   10F ==> 浮动
    *   10D ==> 双倍
    *   10M ==> 十进制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T22:45:46.970

您正在尝试将结果存储在整数中。而是使用 double 作为变量的类型来存储结果：

```
double Num1 = 300 / 2;
double Num1 = 300 / 1.25; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T22:47:58.787

An`int`只能存储整数。当您将整数除以小数时，输出将是小数（即使您使用`4.00`浮点数的存储方式）。

这不会编译

```
int Num1 = 300 / ((float)1.25); 
```

即使您正在强制转换一个明确的浮点数（否则 1.25 将是 a `double`），您正在尝试将其存储在类型的变量中`int`。编译器不会自动执行此操作，因为[不存在隐式转换](http://msdn.microsoft.com/en-us/library/vstudio/y5b434w4.aspx)以将 a转换`float`为`int`您。因此，您需要告诉编译器您不介意丢失精度并将其转换为 int

```
int Num1 = (int)(300 / ((float)1.25)); 
```

或者您可以将类型更改为`Num1`浮点数。

```
float Num1 = 300 / ((float)1.25); 
```

# c# - 输出安全或输入安全的类型是什么意思？

> ID：16180376
> 
> 赞同：5
> 
> 时间：2013-04-23T22:42:44.803
> 
> 标签：c#, variance

我在 C# 语言规范的 Variance Safety 一节中第一次遇到这些术语：输出安全、输入安全、输出不安全和输入不安全。我熟悉方差（协方差和逆变）的概念，它基本上是指使用一种类型代替另一种类型。

那么输出或输入安全的真正含义是什么？我们是在讨论泛型类型中的类型参数还是任何类型（引用或值）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T22:56:53.037

规范的这一部分——你指的是 C# 4 规范的第 13.1.3.1 节，也许你应该在问题的某个地方提到它——很不幸，我深表歉意。Mads 和我的意思很好，但我从来没有对规范的这一部分结果感到兴奋。

我们试图为 C# 规范提出“协变有效”、“逆变有效”和“不变有效”的更直观和易于理解的描述；最初的规范草案是用这些术语编写的，人们发现这些术语令人困惑。结果实际上并不太容易理解，并且包含一些错误。

我的建议是：**如果您需要了解使变体接口有效或无效的确切规则，**那么您应该阅读我关于此主题的注释：

[http://blogs.msdn.com/b/ericlippert/archive/2009/12/03/exact-rules-for-variance-validity.aspx](http://blogs.msdn.com/b/ericlippert/archive/2009/12/03/exact-rules-for-variance-validity.aspx)

这本质上是我在实现该功能时所做的注释的注释转录。这些注释比规范中的文本更详细，希望更清晰。

您可能还想阅读 CLI 规范中的相关部分；我的笔记直接基于对它的透彻阅读。

要真正回答您的问题：“输出不安全”和“输入不安全”背后的想法本质上是，如果您有：

```
interface I<in T>
{
  T M();
} 
```

然后`T`不能安全地用于输出位置。假设我们允许这样做；这样做违反了类型安全：

```
class C : I<Animal> 
{ public Animal M() { return new Giraffe(); } }
...
I<Animal> ia = new C<Animal>(); 
I<Tiger> it = ia; // Contravariant!
Tiger t = it.M(); // We just assigned a giraffe to a variable of type tiger. 
```

这违反了类型安全，所以我们说这`T`是“输出不安全”，因此这个接口是无效的，因为很明显`T` *是*在输出位置使用的。同样对于“输入不安全”：

```
interface I<out T>
{
    void M(T t);
} 
```

你可以做一个`I<Giraffe>`带长颈鹿的，把它转换成，`I<Animal>`然后把老虎传给`M`，这是不安全的。`T`是输入不安全的，因此`T`在输入位置使用的这个接口是无效的。

# java - 如何在不使其成为服务器的情况下设置一个不断侦听的循环并接收 udp 套接字？

> ID：16180378
> 
> 赞同：0
> 
> 时间：2013-04-23T22:42:51.227
> 
> 标签：java, c++, udp

我有一个 C++ 服务器和 java 客户端，C++ 服务器不断向客户端发送 udp 数据包，让每个客户端知道其他客户端的情况，但有一个复杂的问题。我不希望每个用户都必须转发他们的端口才能设置一个不断监听的 udp 循环，有没有办法在 java 中避免这种情况？此外，当服务器接收到 udp 数据包时，我从“from”（sockaddr 类型）中获取数据，并使用它来获取 ip：from.sin_addr.s_addr 但它始终只获取我的本地 ip，192.168.1.1，是有没有办法接收它来自哪个外部IP？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:03:28.977

任何一个：

1.  客户端必须使用固定端口
2.  他们将不得不告知服务器他们的端口号以及他们的 IP 地址
3.  您可以使用多播。

# javascript - 将消息从 javascript 传递到应用程序 - Windows 和 Mac OSx - Lazarus

> ID：16180379
> 
> 赞同：0
> 
> 时间：2013-04-23T22:42:51.757
> 
> 标签：javascript, windows, macos, lazarus, extendscript

我需要一个 javascript 函数来触发在 Lazarus 中为 OSx 和 windows 开发的应用程序中的函数。我正在学习 Lazarus，我将自己描述为一个中等水平的初学者。我对javascript知之甚少。

据我了解，javascript 运行沙盒，因此无法直接访问应用程序。因此，我正在考虑使用某种从 javascript 到应用程序的 tcp 调用，传递一个参数，当接收到该参数时，将触发事件。这需要在 Windows 和 Mac 上都有效。理想情况下使用相同的组件/代码，但如果这是不可能的，那么我需要做什么。

我的问题是：

1）这听起来像正确的方法吗？2）如果是这样 - 实现这一目标的最佳方式和组件是什么？

我一直在研究突触——但老实说，我有点迷失了我需要使用和阅读哪些组件来设置它。

所以本质上 - javascript需要向我的应用程序发送一个参数，然后在收到它时采取行动。

如果您能提供帮助，请提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:20:21.397

我只是快速搜索了一下，在我看来，Adobe Photoshop 脚本并不完全是 javascript，而是它的一个变体，称为 ExtendScript。有一些语言指南，你可以找到（[比如这个](http://wwwimages.adobe.com/www.adobe.com/content/dam/Adobe/en/products/photoshop/pdfs/cs6/Photoshop-CS6-JavaScript-Ref.pdf)），但也执行快速谷歌搜索打开了[这个页面](http://www.ps-scripts.com/bb/viewtopic.php?t=344)和[这个页面](http://forums.adobe.com/thread/681998)，它描述了一个`File.execute`可以用来执行外部应用程序的命令，这可能是最好的途径.

我关于服务器的问题提出了另一种选择，如果您正在运行服务器，则可以使用 URL 从 javascript 调用它。然后服务器可能有更多的权限来处理事件。

很抱歉只是将您发送到其他站点和方向以尝试解决此问题，但这是一个相当具体的领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:07:54.293

您可能需要阅读有关 JavaScript 的更多信息，因为它有许多限制，例如无法访问本地文件，无法与来自同一域的服务器进行通信，以下链接可能会给您一个更好的主意：

[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

[http://javascript.about.com/od/reference/a/cannot.htm](http://javascript.about.com/od/reference/a/cannot.htm)

HTML5 websockets 可能是一条路径，但尚未在所有浏览器中得到广泛支持：

[http://www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)

**编辑：**

现在您提供了更多详细信息，您可以在应用程序中创建一个线程，该线程将检查文件或理想情况下的表，当他获取您的 javascript 或（Ajax）查询时，服务器端将写入该文件，要求他触发信号你的申请。

有很多方法可以做到这一点，我在其中一种最简单、更先进的方法中提到的方法是向您的应用程序发送信号。（从您的服务器向应用程序发送信号。）数据库解决方案具有更多优势，您可以为参数指定列，并且您将拥有更大的灵活性，一旦您处理了来自该共享表的请求，您就可以标记该行。

以下是实现表的一种方法（已处理是表示您的信号是否已被处理的标志 - 您也可以在处理后删除该行）：

> | 信号标识 | 论据 | application_id | 日期时间 | 已处理（标志 0 或 1）|

# vba - 对级联组合框的动态值进行排序

> ID：16180384
> 
> 赞同：1
> 
> 时间：2013-04-23T22:43:12.227
> 
> 标签：vba

我正在 Excel 中创建一个报告，我有 3 列数据（学院、部门、部门）和 3 个相应的级联组合框（类似层次结构的查找）。当用户从第一个组合框中选择学院时，第二个组合框仅显示与该学院关联的部门，第三个组合框仅显示与该部门关联的部门。

我无法弄清楚如何将第二个和第三个动态组合框中的值按字母顺序排序。例如，当用户选择一所大学时，我希望将分区（在 ComboBox2 中）显示为 A_Division、B_Division、...、Z_Division（而现在分区按其在工作表上的顺序显示）。如果可能的话，我想避免对原始数据进行排序并动态地对数组进行排序。

下面是一些大量借用的代码（我的一些评论）。任何帮助将不胜感激。

```
Private Sub userform_initialize()

Dim x

Set dic = CreateObject("Scripting.Dictionary")

With Sheets("source_data")
    For Each r In .Range("A22", .Range("A65536").End(xlUp))
        If Not IsEmpty(r) And Not dic.exists(r.value) Then
            dic.add r.value, Nothing
        End If
    Next
End With

x = dic.keys

QuickSort x 'this only sorts the contents of ComboBox1, can I apply it to ComboBox2 & ComboBox3?

Me.ComboBox1.List = x

End Sub

Private Sub ComboBox1_Change()

Me.ComboBox2.Clear: Me.ComboBox2.Clear
Me.ComboBox2.value = ("Choose Division")

Set dic = CreateObject("Scripting.dictionary")
    With Sheets("source_data")
        For Each r In .Range("A22", .Range("A65536").End(xlUp))
            If r = Me.ComboBox1.value Then
                If Not dic.exists(r.Offset(, 1).value) Then
                    Me.ComboBox2.AddItem r.Offset(, 1)
                    dic.add r.Offset(, 1).value, Nothing
                End If
            End If
        Next
    End With

 'Can I sort here?

    With Me.ComboBox2
        If .ListCount = 1 Then .ListIndex = 0
    End With

End Sub

Private Sub ComboBox2_Change()

Me.ComboBox3.Clear: Me.ComboBox3.Clear
Me.ComboBox3.value = ("Choose Department")

Set dic = CreateObject("Scripting.dictionary")
    With Sheets("source_data")
        For Each r In .Range("B22", .Range("B65536").End(xlUp))
            If r = Me.ComboBox2.value Then
                If Not dic.exists(r.Offset(, 1).value) Then

                    Me.ComboBox3.AddItem r.Offset(, 1)
                    dic.add r.Offset(, 1).value, Nothing

                End If
            End If
        Next
    End With

   'Can I sort here?

    With Me.ComboBox3
        If .ListCount = 1 Then .ListIndex = 0
    End With

End Sub

Sub QuickSort(ByRef VA_array, Optional V_Low1, Optional V_high1)
  On Error Resume Next

  'Dimension variables
  Dim V_Low2, V_high2, V_loop As Integer
  Dim V_val1, V_val2 As Variant

  'If first time, get the size of the array to sort
  If IsMissing(V_Low1) Then
      V_Low1 = LBound(VA_array, 1)
  End If

  If IsMissing(V_high1) Then
      V_high1 = UBound(VA_array, 1)
  End If

  'Set new extremes to old extremes
  V_Low2 = V_Low1
  V_high2 = V_high1

  'Get value of array item in middle of new extremes
  V_val1 = VA_array((V_Low1 + V_high1) / 2)

  'Loop for all the items in the array between the extremes
  While (V_Low2 <= V_high2)

      'Find the first item that is greater than the mid-point item
      While (VA_array(V_Low2) < V_val1 And V_Low2 < V_high1)
          V_Low2 = V_Low2 + 1
      Wend

      'Find the last item that is less than the mid-point item
      While (VA_array(V_high2) > V_val1 And V_high2 > V_Low1)
          V_high2 = V_high2 - 1
      Wend

      'If the new 'greater' item comes before the new 'less' item, swap them
      If (V_Low2 <= V_high2) Then
          V_val2 = VA_array(V_Low2)
          VA_array(V_Low2) = VA_array(V_high2)
          VA_array(V_high2) = V_val2

          'Advance the pointers to the next item
          V_Low2 = V_Low2 + 1
          V_high2 = V_high2 - 1
      End If
  Wend

  'Iterate to sort the lower half of the extremes
  If (V_high2 > V_Low1) Then Call QuickSort(VA_array, V_Low1, V_high2)

  'Iterate to sort the upper half of the extremes
  If (V_Low2 < V_high1) Then Call QuickSort(VA_array, V_Low2, V_high1)
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:19:23.907

这是一些将整个范围读入模块级数组变量的代码，然后使用它和字典进行过滤和排序。

```
Private mvaValues As Variant
Private mbEventsDisabled As Boolean

Private Sub userform_initialize()

    Dim scDic As Scripting.Dictionary
    Dim vaKeys As Variant
    Dim i As Long

    Set scDic = New Scripting.Dictionary

    'Read the whole range into a module level variable
    With Sheets("source_data")
        mvaValues = .Range("A22", .Cells(.Rows.Count, 1).End(xlUp)).Resize(, 3).Value
    End With

    'Put uniques in a dictionary
    For i = LBound(mvaValues, 1) To UBound(mvaValues, 1)
        If Not scDic.Exists(mvaValues(i, 1)) Then
            scDic.Add mvaValues(i, 1), Nothing
        End If
    Next i

    'Grab the keys and sort
    vaKeys = scDic.Keys
    QuickSort vaKeys, LBound(vaKeys), UBound(vaKeys)

    'Put the sorted keys into the combobox
    Me.ComboBox1.List = vaKeys

End Sub

Private Sub ComboBox1_Change()

    Dim scDic As Scripting.Dictionary
    Dim i As Long
    Dim vaKeys As Variant

    If Not mbEventsDisabled Then
        Set scDic = New Scripting.Dictionary

        mbEventsDisabled = True
            For i = LBound(mvaValues, 1) To UBound(mvaValues, 1)
                If mvaValues(i, 1) = Me.ComboBox1.Value Then
                    If Not scDic.Exists(mvaValues(i, 2)) Then
                        scDic.Add mvaValues(i, 2), Nothing
                    End If
                End If
            Next i

            vaKeys = scDic.Keys
            QuickSort vaKeys, LBound(vaKeys), UBound(vaKeys)

            Me.ComboBox2.Clear
            Me.ComboBox2.List = vaKeys

            If LBound(vaKeys) = UBound(vaKeys) Then
                mbEventsDisabled = False
                Me.ComboBox2.ListIndex = 0
            Else
                Me.ComboBox2.Value = ("Choose Division")
            End If

        mbEventsDisabled = False
    End If

End Sub

Private Sub ComboBox2_Change()

    Dim scDic As Scripting.Dictionary
    Dim i As Long
    Dim vaKeys As Variant

    If Not mbEventsDisabled Then
        Set scDic = New Scripting.Dictionary

        mbEventsDisabled = True
            For i = LBound(mvaValues, 1) To UBound(mvaValues, 1)
                If mvaValues(i, 1) = Me.ComboBox1.Value And mvaValues(i, 2) = Me.ComboBox2.Value Then
                    If Not scDic.Exists(mvaValues(i, 3)) Then
                        scDic.Add mvaValues(i, 3), Nothing
                    End If
                End If
            Next i

            vaKeys = scDic.Keys
            QuickSort vaKeys, LBound(vaKeys), UBound(vaKeys)

            Me.ComboBox3.Clear
            Me.ComboBox3.List = vaKeys

            If LBound(vaKeys) = UBound(vaKeys) Then
                Me.ComboBox3.ListIndex = 0
            Else
                Me.ComboBox3.Value = ("Choose Division")
            End If

        mbEventsDisabled = False
    End If

End Sub

Public Sub QuickSort(ByRef vArray As Variant, lLow As Long, lHigh As Long)

    Dim vPivot As Variant
    Dim vSwap As Variant
    Dim lTmpLow As Long
    Dim lTmpHigh As Long

    lTmpLow = lLow
    lTmpHigh = lHigh

    vPivot = vArray((lLow + lHigh) \ 2)

    Do While lTmpLow <= lTmpHigh

        Do While vArray(lTmpLow) < vPivot And lTmpLow < lHigh
            lTmpLow = lTmpLow + 1
        Loop

        Do While vPivot < vArray(lTmpHigh) And lTmpHigh > lLow
            lTmpHigh = lTmpHigh - 1
        Loop

         If lTmpLow < lTmpHigh Then
            vSwap = vArray(lTmpLow)
            vArray(lTmpLow) = vArray(lTmpHigh)
            vArray(lTmpHigh) = vSwap
         End If

        If lTmpLow <= lTmpHigh Then
            lTmpLow = lTmpLow + 1
            lTmpHigh = lTmpHigh - 1
        End If

    Loop

    If lLow < lTmpHigh Then QuickSort vArray, lLow, lTmpHigh
    If lTmpLow < lHigh Then QuickSort vArray, lTmpLow, lHigh

End Sub 
```

# java - 计算多线程代码中的吞吐量

> ID：16180385
> 
> 赞同：0
> 
> 时间：2013-04-23T22:43:13.733
> 
> 标签：java, multithreading, throughput

我正在`bench marking`处理我的一些客户端代码。现在我试图找出如何从我的`Multithreading`代码计算吞吐量 -

我正在运行我的程序`20 threads`。并且每个线程都会运行`15 minutes`，所以所有的`20 threads will run for 15 minutes`.

下面是我的代码-

```
public static void main(String[] args) {

try {

        // create thread pool with given size
        ExecutorService service = Executors.newFixedThreadPool(20);

        // queue some tasks
        long startTime = System.currentTimeMillis();
        long endTime = startTime + (15 * 60 * 1000);

        for (int i = 0; i < 20; i++) {
            service.submit(new CassandraReadTask(endTime, columnFamilyList));
        }

        service.shutdown();
        service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
    } catch (Exception e) {
        LOG.warn("Threw a Exception in" + CNAME + e);
    }
} 
```

下面是我实现的类`Runnable interface`-

```
class CassandraReadTask implements Runnable {

    public void run() {

        try {

            while (System.currentTimeMillis() <= endTime) {

                double randomNumber = random.nextDouble() * 100.0;

                final String id = generateRandomId(random);

                ICassandraClientDao clientDao = ClientFactory.getInstance().getDao(clientName);

                clientDao.getAttributes(id, columnsList, columnFamily);

            }
        } catch (Exception e) {

            }
    }

} 
```

从上面的代码中，我生成了一些随机 id，并且我使用它来传递给我的`getAttributes`dao 方法。

所以根据我的理解。总计`throughput`将是-

```
total number of request/ total duration the program was run 
```

所以，就我而言，它将是——

```
total number of id's I have generated/15 minutes 
```

我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:06:13.840

只要您正确计算（也许使用共享`AtomicInteger`？）所有​​由不同线程完成的请求，您所做的一切都很好。

但是，我会稍微切换一下您的代码并提交 100,000 个（或其他）随机 ID，然后计算您的线程处理所有这些 ID 所需的时间。这是一个更现实的测试，因为它会更好地显示您的任务提交开销。

然后你只需输入 a`startTimeMillis`并计算从结束到开始的差异，然后计算 100,000（或任何你的数字）除以 diff，得到你的平均迭代次数/毫秒。

就像是：

```
long startTimeMillis = System.currentTimeMillis();
int numIterations = 100000;
for (int i = 0; i < numIterations; i++) {
    double randomNumber = random.nextDouble() * 100.0;
    final String id = generateRandomId(random);
    service.submit(new CassandraReadTask(id, columnFamilyList));
}
service.shutdown();
service.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
long diff = System.currentTimeMillis() - startTimeMillis;
System.out.println("Average time per iteration is " + (numIterations / diff)); 
```

然后很容易使用线程数和迭代次数来最大化您的吞吐量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:54:52.563

这似乎是正确的，但你怎么数？您可以使用 Callables 而不是 Runnables 来返回生成的 ID 数量。然后你会在关闭 Executor 后得到你所有的 Futures 来总结它。

# wcf - WCF 并发连接和 Azure 服务总线中继

> ID：16180389
> 
> 赞同：1
> 
> 时间：2013-04-23T22:43:32.160
> 
> 标签：wcf, azure, concurrency, azureservicebus

我有一个 WCF 服务正在监听 Azure 服务总线中继，由于我无法更改的原因，我在 Windows 服务中自行托管。

一旦服务处于并发负载下 - 通常通过给它一系列长时间运行的请求 - 我们开始从 Azure 服务总线接收以下消息：

```
<Error>
<Code>502</Code>
<Detail>Bad Gateway.TrackingId:f0e32d08-2721-464c-a108-fe63f1efc443_G23,TimeStamp:4/23/2013 8:22:18 AM</Detail>
</Error> 
```

我们怀疑并发负载会导致这个问题。

我的服务是完全无状态的。

```
ServiceHost = a WebServiceHost which we instantiate ourselves.
Binding = BasicHttpRelayBinding
InstanceContextMode = Single
ConcurrencyMode = Multiple
SessionMode = NotAllowed
ServiceThrottlingBehaviour.MaxConcurrentConnections = A very large number
Transport = Streaming 
```

我有四个问题：

1.  上述错误看起来像是并发负载问题吗？
2.  我应该考虑哪些其他配置选项来提供更大的规模。
3.  在自托管的 Window Service 环境中，当达到并发连接限制时会发生什么？服务会失败吗？连接会排队吗？
4.  有没有一种方法可以在任何给定时刻可靠地监控并发连接数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T19:50:24.163

我是**Azure Service Bus Relay**的一名员工。

我刚刚运行了一个查询来追踪您的问题。（*为了将来参考，如果我知道您使用的命名空间会容易得多。*）

尝试 502 请求时，似乎未检测到**ServiceHost 侦听器已连接到服务总线。**

最简单的调试方法是连接[`ConnectionStatusBehavior`](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.servicebus.connectionstatusbehavior.aspx)到您的端点并将`OnFaulted`事件连接到`ServiceHost`.

另请注意，服务总线中的特定 VM 可能会在短时间内脱机。发生这种情况时，您`ServiceHost`可能会出现大约 5-15 秒的离线状态。避免这种情况的最佳方法是始终确保您`ServiceHosts`在单独的进程/AppDomains 中托管 (2)，这样任何单个 VM 中断都不会影响您的服务。（*这与网站托管建议非常相似。*）

如果在遵循这些建议后出现任何意外问题，请直接与我联系，`toddreif@microsoft.com`以便我们进行调查。

# ios - 手动向左旋转横向模式的坐标系

> ID：16180391
> 
> 赞同：0
> 
> 时间：2013-04-23T22:43:49.363
> 
> 标签：ios, objective-c, cgaffinetransform

我知道屏幕的左上角（假设手机横向放置）是（0,0）。但是，如果我希望我的 (0,0) 点位于左下角而不是左上角，我该怎么做？

我正在尝试使用 OpenGL 在我当前在屏幕上触摸的指定位置绘制对象，但 y 值被绘制在屏幕的错误一侧。如果有帮助，这是该问题的图片示例。请注意，白色的点是我“触摸”屏幕的地方，紫色的东西是我使用 OpenGL 绘制的粒子系统。

[https://www.dropbox.com/s/n2lhzfdbp4audi2/iOS%20Simulator%20Screen%20shot%20Apr%2023%2C%202013%206.25.49%20PM.png](https://www.dropbox.com/s/n2lhzfdbp4audi2/iOS%20Simulator%20Screen%20shot%20Apr%2023%2C%202013%206.25.49%20PM.png)

[https://www.dropbox.com/s/foueopvlgfu03vs/iOS%20Simulator%20Screen%20shot%20Apr%2023%2C%202013%206.25.53%20PM.png](https://www.dropbox.com/s/foueopvlgfu03vs/iOS%20Simulator%20Screen%20shot%20Apr%2023%2C%202013%206.25.53%20PM.png)

我这样设置我支持的界面：

```
- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscapeLeft;
} 
```

在我的`drawFrame`方法中：

```
glViewport(0, 0, 480, 320);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();

glOrthof(0.0f, 480, 0.0f, 320, -100.0f, 100.0f);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

//render the particles being drawn, etc 
```

在我的`touchesBegan`方法中：

```
UITouch *touch = [[event allTouches] anyObject];
CGPoint location = [touch locationInView:touch.view];

if (pe.active != YES)
{
    pe.active = YES;

    NSLog(@"x: %f y: %f", location.x, location.y);

    pe.sourcePosition = Vector2fMake(location.x, location.y);
} 
```

然后我尝试通过在我的`viewWillAppear`方法中执行此操作手动将坐标系旋转 90 度：

```
self.view.transform = CGAffineTransformIdentity;
self.view.transform = CGAffineTransformMakeRotation((M_PI * (-90) / 180.0));
self.view.bounds = CGRectMake(0.0, 0.0, 480, 320); 
```

指定`CGAffineTransformMakeRotation`调用应该会改变坐标系，但不会。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-24T01:59:34.337

通常，您应该避免设置 VC 的视图框架、边界和变换。这些由 UIKit 自动设置以处理旋转和调整大小（例如，用于通话状态栏）。

有两个简单的修复：

*   变换接触点 ( `location.x, height-location.y`)
*   `glOrthof(0, width, height, 0, ...)`在投影矩阵 ( )中使用左上角原点。您可能不得不担心坐标系的手性。

我目前更喜欢第二种选择：当使用尽可能少的坐标系时，事情就不会那么混乱了。

其他小问题

*   您应该使用实际的宽度和高度，而不是硬编码 320 和 480。请记住还要检查“Retina”和“Retina 4-inch”。
*   `self.view.transform = CGAffineTransformIdentity;`毫无意义，因为您立即用写操作破坏了它。在下一行。

* * *

如果*真的需要*设置视图的变换，就让它成为VC的视图的子视图*。*另请注意，如果您设置它们的变换，某些视图将无法正常工作（例如`UITableView`，在某些版本的 iOS 上，使用它的框架来决定当它应该使用它的边界时单元格应该有多宽）。需要这样的视图结构并不少见：

*   外部容器（其框架/变换由例如 UIKit 设置）
    *   内部容器（这是您设置变换的地方）
        *   您关心的实际视图（例如`UITableView`）您未设置其变换的视图。

不用说，我尽量避免这种情况。

# forms - 不知道如何制作一个脚本来显示用户在主页上提交的内容

> ID：16180392
> 
> 赞同：1
> 
> 时间：2013-04-23T22:43:59.393
> 
> 标签：forms

我不确定如何制作这个脚本。我将为用户提供一个提交表单，我希望他们提交的内容发布在网站的主页上。有人能告诉我我必须用什么语言才能做到这一点吗？我是一个菜鸟（很明显），我一直在做研究，我现在只是卡住了。或者如果已经为此制作了脚本，那也会有所帮助。一个例子是......如何在博客上......好吧 tumblr，用户提交内容并且该内容被显示......好吧，也许这是一个糟糕的例子，但希望你们都明白我在寻找什么。此外，不要求任何人这样做。任何关于如何做到这一点的提示都会很好，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:00:24.807

如果用户发布的内容是永久性的，那么您肯定需要*服务器端脚本*语言。***即：PHP、JSP***等。还有一些***HTML***、一些***Javascript***、一些***CSS***。在这个阶段，我会为你推荐***PHP***。因为对于初学者来说很容易学习。

由于JS 等客户端脚本语言*无法*和*不推荐*与数据库通信，因此出于多种原因使用服务器端脚本语言与数据库通信。因此，用户发布的内容可以通过服务器端脚本永久存储在数据库中。一旦将其存储在数据库中，您就可以随时在您的任何网页上显示该内容。

**教程：**

**如何安装 PHP、MySql：** [http ://www.techmalaya.com/2007/09/10/beginners-guide-install-php-5-mysql-5-on-apache-22-on-windows-with-screenshots /](http://www.techmalaya.com/2007/09/10/beginners-guide-install-php-5-mysql-5-on-apache-22-on-windows-with-screenshots/)

**为初学者学习 PHP：http:** [//www.w3schools.com/php/](http://www.w3schools.com/php/)

# c - 当我获取指针的地址时，在 C 中会发生什么？

> ID：16180395
> 
> 赞同：2
> 
> 时间：2013-04-23T22:44:14.870
> 
> 标签：c

我有一个示例程序如下：

```
int testPointer(int * intArray, int * ptr) {
  printf("%i\n", intArray);
  printf("%i\n", ptr);
  printf("%lu\n", &intArray);
  printf("%lu\n", &ptr);
  return 0;
}

int main() {
  int result = testPointer((int *) 0x1, (int *) 0x2);
  return 0;
} 
```

典型的输出是：

```
1
2
3212962484
3212962480 
```

前两行总是相同的，我理解它们是如何产生的。第三行和第四行在每次运行时都会有所不同，但第四行的值总是比第三行的值小四。我如何破译这些值？它们代表什么？为什么最后一行总是比第三行少四？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T22:47:39.810

它为您提供这些变量的地址，即它们的内存位置。

您有这些变量，它们是函数参数，但它们就像 testPointer 函数中的任何其他局部变量一样：

```
 int testPointer(int * intArray, int * ptr)
                       ^^^^^^          ^^^ 
```

它们存在于内存中的某个位置，您可以使用 & 运算符获得该位置的地址。这类似于做

```
int i;
printf("%p\n", (void*)&i); 
```

它显示了`i`变量的地址。

请注意，您应该使用 %p 打印指针，如`printf("%p\n", (void*)&ptr);`%i 或 %lu 需要一个 int 或 long 参数，这可能与给定平台上的指针不兼容。

> 它们代表什么以及为什么最后一行总是比第三行少四

这是因为编译器已将这 2 个变量彼此相邻放置在内存中，并且在您的平台上，指针显然有 4 个字节大。

而且我们也可能由此猜测，在您的平台上，如果您的系统上的堆栈在内存中向下增长（这是最常见的） ，则函数的参数从左到右（首先`intArray`，然后）放置在堆栈中`ptr`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T22:47:54.933

最后一行总是（在 32 位系统上正好 4 行）小于第 3 行，因为这两个变量都在堆栈上，堆栈通常从内存顶部向下增长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T22:48:05.070

你不破译这些值。它们是操作系统和 C 内存分配例程用来保存变量的地址。这些是系统确定可供您使用的内存区域。

你还想破译什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T22:49:41.227

调用此函数时，和`int testPointer(int * intArray, int * ptr)`的值存储在堆栈中。因此，将打印一个与堆栈指针相同的指针，该指针将随程序的每次运行而变化。`intArray``ptr``&intArray`

当传递 2 个参数时，每个参数一个一个地被压入堆栈。由于 2 个参数彼此相邻，并且指针大小为 4 个字节，因此您观察到 4 的差异。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T23:30:36.863

从技术上讲，该行为是未定义的，因为`%lu`指令应对应于`long unsigned int`类型化参数。这可能对您有用，但只是巧合。你不想养成依赖巧合的习惯。在某些实现中`long unsigned int`，指针的表示和宽度不同，并且此代码可能会导致崩溃。

如果您想以可移植的方式打印这些地址，则需要使用`%p`对应于`void *`类型化参数的指令。不要忘记将参数转换为`void *`，因为`int *`在表示上可能会有所不同`void *`。请参阅[c-faq.com 的问题 5.17](http://c-faq.com/null/machexamp.html)。

> 我如何破译这些值？

它们是地址。把它们想象成邮政地址。当收回资产的人想要取回金融资产时，他们会去该人的地址并拿走电视。当快递员要投递包裹时，他通过地址找到该人。这在概念上类似于普通处理器在计算机上检索和存储值的方式（以非常基本的方式）。

> 它们代表什么...

它们*可能*代表它们指向的对象的偏移量。例如，当`&intArray`对应于时`3212962484`，这*可能*`intArray`是位于 RAM 中第 3212962484 个字节的指示。然而，依靠这一点是巧合。您打印指针的方式不可移植，并且指针在概念上与整数不同。它们也可能是您的信用卡号。

> ...为什么最后一行总是比第三行少四？

巧合，或者是设计您的编译器、操作系统或 CPU 的人做出的选择。四也可能[是完全回答双管问题的答案的百分比](http://survey.cvent.com/blog/cvent-web-surveys-blog/online-survey-pitfalls-double-barreled-survey-questions)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-23T22:49:29.737

这两行是内存中指针的地址。（你应该`%p`用来显示它们）。

由于它们是连续两次`int*`传递给函数的，因此它们`sizeof(int*)`相隔 = 4 个字节（在 32 位系统上）。

# java - BufferedImage 将图像与自身进行比较会引发 ArrayOutOfBoundsException

> ID：16180399
> 
> 赞同：0
> 
> 时间：2013-04-23T22:44:32.827
> 
> 标签：java, bufferedimage

我比较 Java 中的 BufferedImage 对象。我从一组中获取图像并将其与同一组中的所有图像进行比较。但是，它将图像与自身进行比较会导致这种奇怪的错误，并且其他图像的一切正常。这是代码：

```
private boolean diagonalCompare() {
    for(int i = 0, j = 0; i < w && j < h; i++, j++) {
        if(bimg1.getRGB(i, j) != bimg2.getRGB(i, j)) {
            return false;
        }
    }
    for(int i = w, j = 0; i > -1 && j < h; i--, j++) {
//-----------THIS IS THE LINE CAUSES THE ERROR---------------------------------\\
        if(bimg1.getRGB(i, j) != bimg2.getRGB(i, j)) {
            return false;
        }
    }
    return true;
} 
```

这是堆栈跟踪：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: Coordinate out of bounds!
at sun.awt.image.ByteInterleavedRaster.getDataElements(Unknown Source)
at java.awt.image.BufferedImage.getRGB(Unknown Source)
at com.oy.duplicator.SimpleComparator.diagonalCompare(SimpleComparator.java:144)
at com.oy.duplicator.SimpleComparator.compareBufferedImage(SimpleComparator.java:78)
at com.oy.duplicator.SimpleComparator.compare(SimpleComparator.java:44)
at com.oy.duplicator.Main.main(Main.java:78) 
```

`ArrayOutOfBoundsException`? 这是为什么？也许这是由于读取同一个文件引起的，但它在第一个`for-loop`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:04:12.527

我怀疑这是因为在所有其他图像中，您永远无法执行第二个 for 循环。

第二个 for 循环应该是：

```
for(int i = w - 1, j = 0; i > -1 && j < h; i--, j++) { 
```

（`w - 1`而不是`w`）

否则，您将开始与坐标进行比较，`(w, 0)`并且由于坐标仅从`0`to有效`w - 1`，这就是您遇到异常的原因。

# iphone - 在 PhoneGap 上发送电子邮件

> ID：16180402
> 
> 赞同：1
> 
> 时间：2013-04-23T22:44:35.473
> 
> 标签：iphone, cordova

我正在尝试在 PhoneGap 上发送电子邮件。我见过几个不同的 EmailComposer 插件，但我想看看是否有一种更简单的方法可以在没有插件的情况下发送电子邮件。我试过使用这样的 mailto 命令：

```
<a href="mailto:someone@example.com?Subject=Hello">Send Mail</a> 
```

当我在 iPhone 模拟器上运行它并单击链接时，我在控制台日志中收到此消息：

AppDelegate::shouldStartLoadWithRequest: 收到未处理的 URL mailto:someone@example.com?Subject=Hello%20again

是否可以使用 mailto 命令发送电子邮件或者我需要使用插件？如果我可以使用 mailto 命令，我可以进行哪些更改以使其正常工作？此外，与 mailto 命令相比，使用插件有什么优势？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:35:24.323

您需要使用 phonegap 插件**EmailComposer**。

Mailto 命令不适用于所有平台。这就是为什么这个插件被广泛使用的原因。

[Github 链接](https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/EmailComposer)

所有使用它的指南都可以在它的 readme.txt 中找到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:52:37.573

我自己想从 phonegap 应用程序发送邮件，不想使用插件。所以我想到了这个发送邮件的解决方案。

*   向可以发送邮件的服务器端脚本发送一个 ajax 请求（例如 PHP - 这是我的服务器端脚本编写的内容）。
*   在 ajax 请求的数据中，在邮件、正文、附件等中发送您想要的所有数据。
*   用 PHP 构建邮件并发送邮件。
*   成功发送后，返回一个指示状态的 JSON 对象。
*   使用 ajax 脚本的回调函数向用户提供有关相同（成功或失败）的通知。

我将在完成后立即分享代码，如果可行的话。

# php - xdebug、eclipse、centos、远程调试 - 无法在断点处停止

> ID：16180407
> 
> 赞同：2
> 
> 时间：2013-04-23T22:45:04.860
> 
> 标签：php, eclipse, debugging, xdebug

开发机器

*   mac笔记本电脑，10.8.3
*   日食，朱诺 SR2
*   php pdt 3.1.2.2012

远程机器

*   平行，虚拟机，CentOS 6.3
*   php 5.4.14
*   xdebug

/etc/php.ini 文件

```
[xdebug]
zend_extension=/usr/lib64/php/modules/xdebug.so
xdebug.remote_enable=1
xdebug.remote_handler="dbgp"
xdebug.remote_mode=req
xdebug.remote_port=9000
xdebug.remote_host="10.211.55.3"
xdebug.remote_log=/tmp/xdebug_remote_log
xdebug.remote_connect_back=1 
```

PHP 文件都存在于远程机器上，并在 eclipse 中映射到一个项目中（即我可以在我的开发机器上看到实际文件）。

我有调试配置，可以在调试器中运行，但不能在任何断点处设置或停止。我什至尝试过 xdebug_break() - 似乎只是忽略它。

我尝试在远程机器上打开端口 9000，没有区别。

我尝试将此“-Djava.net.preferIPv4Stack=true”添加到 eclipse.ini 文件中（在另一篇文章中找到——与 IPv6 与 IPv4 有关），但没有奏效。

eclipse中的项目属性：

*   PHP 调试器：XDebug
*   服务器：
    *   基本网址：h_t_t_p_://10.211.55.3
    *   路径映射：服务器上的路径：/home/userxyz/workspace/test，本地路径：/test

我不知道该尝试什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T00:15:35.573

我向您展示了在那里使用 filezilla 的 Windows 机器上的远程服务器。我的 Ubuntu 12.04 目前没有启动。

尝试连接到您的 FTP 服务器。

确保 ftp 已启动并正在运行。设置可以从本地计算机连接的 ftp 服务器。

改变你的观点`Remote System explorer`。
`Remote System explorer`查看
创建新连接

![在此处输入图像描述](https://i.stack.imgur.com/I5bMn.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/TskTM.jpg)

测试你的 ftp 连接

![在此处输入图像描述](https://i.stack.imgur.com/7p0d7.jpg)

FTP 服务器设置。

*   1 为每个用户拥有ftp访问权限，创建一个系统用户。

*   2 如果不存在该行

> /bin/假

添加到 /etc/shells.

*   3 在/etc/passwd 文件中为每个FTP 用户作为登录shell /bin/false 拒绝。

    例如：

> 用户xy: x: 1003:1002:/home/userxy:/bin/false

Eclipse Ftp 设置

![在此处输入图像描述](https://i.stack.imgur.com/MdqhK.jpg)

**最后的步骤。**

仅当建立与 ftp 服务器的连接时。

*   在您的服务器上创建一个文件夹，`/var/www/html`调用文件夹 switch-r 。

*   创建一个新的 PHP 项目，调用它`Switch-Remote`。

![在此处输入图像描述](https://i.stack.imgur.com/vhKFj.jpg)

右键单击`Switch-Remote`选择新文件夹。

![在此处输入图像描述](https://i.stack.imgur.com/kPCaC.jpg)

在`OK`你的项目看起来之后

![在此处输入图像描述](https://i.stack.imgur.com/UjfSQ.jpg)

右键单击新文件夹开关选择`new PHPFile`。

![在此处输入图像描述](https://i.stack.imgur.com/fMLC2.jpg)

在`OK`eclipse ftp 日志中看到以下内容之后。

![在此处输入图像描述](https://i.stack.imgur.com/rB2yW.jpg)

和你的项目..

![在此处输入图像描述](https://i.stack.imgur.com/5tSQ5.jpg)

打开 switch.php 并替换为新代码。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Cp1252">
<title>Remote Debug</title>
</head>
 <?php
    echo "Hello<br>";
    echo "from DTX-AGIL-3";
    ?>
</html> 
```

在第 8 行设置断点。

![在此处输入图像描述](https://i.stack.imgur.com/nBw6S.jpg)

创建新的调试配置

![在此处输入图像描述](https://i.stack.imgur.com/99gcE.jpg)

更改设置，如下图所示。

![在此处输入图像描述](https://i.stack.imgur.com/FaQPv.jpg)

使用刚刚创建的配置进行调试。
调试在第 8 行停止。

![在此处输入图像描述](https://i.stack.imgur.com/04k25.jpg)

并完成。

![在此处输入图像描述](https://i.stack.imgur.com/BRNAT.jpg)

您更改或重命名文件的
所有内容都会通过 FTP 自动传输到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:46:30.353

我这里有类似的配置，我正在使用 samba 来共享服务器文件夹。当我在 Eclipse 上打开项目时，我正在使用服务器用于处理请求的文件。正确的文件映射仍然需要断点按预期工作。

所以，我有一个具有以下设置的 Ubuntu 盒子：

机器名称：`ubuntu-12-10`
文档根目录：/www/sites/project1
Smb 共享：[www] -> /www

Eclipse Mac OS：
工作区：`/Volumes/ubuntu-12-10/www/sites`
站点：`http://ubuntu`
项目：project1
地图：

*   服务器上的路径：/www/sites/project1
*   本地路径：/project1

适应您的世界，您应该能够在断点处停止。

# python - 如何通过python执行shell脚本

> ID：16180414
> 
> 赞同：3
> 
> 时间：2013-04-23T22:45:50.470
> 
> 标签：python, shell, subprocess, popen

我有一个脚本说 abc.sh ，其中包含带有标志的命令列表。例子

```
//abc.sh
echo $FLAG_name
cp   $FLAG_file1   $FLAG_file2
echo 'file copied' 
```

我想通过python代码执行这个脚本。说

```
//xyz.py

name = 'FUnCOder'
filename1  = 'aaa.txt'
filename2 = 'bbb.txt'

subprocess.call([abc.sh, name, filename1, filname2], stdout=PIPE, stderr=PIPE, shell=True) 
```

此调用不起作用。

还有哪些其他选择？

shell脚本文件也位于其他目录中。我希望输出进入日志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:48:42.307

通常你想使用[`Popen`](http://docs.python.org/2/library/subprocess.html#popen-constructor)，因为你之后有过程控制。尝试：

```
process = subprocess.Popen(['abc.sh', name, filename1, filname2], stdout=PIPE, stderr=PIPE)
process.wait() # Wait for process to complete.

# iterate on the stdout line by line
for line in process.stdout.readlines():
    print(line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:02:31.833

尝试这个：

```
//xyz.py

name = 'FUnCOder'
filename1  = 'aaa.txt'
filename2 = 'bbb.txt'

process = subprocess.Popen(['abc.sh', name, filename1, filname2], stdout=PIPE)
process.wait() 
```

请注意，'abc.sh' 用引号引起来，因为它不是变量名，而是您正在调用的命令。

一般来说，我也会推荐使用`shell=False`，尽管在某些情况下有必要使用`shell=True`。

要将输出放入文件中，请尝试：

```
with open("logfile.log") as file:
    file.writelines(process.stdout) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-06T02:00:56.903

我知道这是一个老问题，如果您使用的是 Python 3.5 及更高版本，以下是方法。

```
import subprocess
process = subprocess.run('script.sh', shell=True, check=True, timeout=10) 
```

**参考：** [https ://docs.python.org/3.5/library/subprocess.html#subprocess.run](https://docs.python.org/3.5/library/subprocess.html#subprocess.run)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-18T22:36:17.590

我在 macOS 上运行我使用的 shell 脚本：

`process = subprocess.Popen([abc.sh, name, filename1, filname2], shell=True)`

# arrays - 从 AS3 中的数组渲染多个精灵

> ID：16180415
> 
> 赞同：0
> 
> 时间：2013-04-23T22:45:50.390
> 
> 标签：arrays, actionscript-3, loops, sprite, render

我不知道为什么这个 for 循环只显示我数组中的最后一个精灵。我对 AS3 有点陌生，想知道它为什么这样做：

```
private function loadComplete(event:Event):void {

var image:Bitmap = Bitmap(loader.content);

for (var i:int = 0; i <  4; i++ ) {
   var pB:BitmapData = new BitmapData(image.width / 2, image.height / 2, false, 0x000000FF);
    pB.copyPixels(image.bitmapData, new Rectangle(i * 20 , i * 20, image.width / 2, image.height / 2), new Point(0, 0));
    pieces.push(new Piece(new Sprite(), 0, 0));
    pieces[i].getSprite().graphics.beginBitmapFill(new Bitmap(pB.clone()).bitmapData, null, false);
    pieces[i].getSprite().graphics.drawRect(0, 0, image.width / 2, image.height / 2);
    pieces[i].getSprite().graphics.endFill();
    pieces[i].getSprite().addEventListener(MouseEvent.MOUSE_DOWN, downHandler);
    pieces[i].getSprite().addEventListener(Event.ENTER_FRAME, dragPiece);

    addChild(pieces[i].getSprite());

       }
    stage.addEventListener(MouseEvent.MOUSE_UP, upHandler);
    } 
```

单品类：

```
public class Piece 
{
    private var pieceX:int;
    private var pieceY:int;
    private var sprite:Sprite;

    public function Piece(sprite:Sprite, pieceX:int, pieceY:int):void 
    {
        this.sprite = sprite;
        this.pieceX = pieceX;
        this.pieceY = pieceY;
    }

    public function getSprite():Sprite {
        return sprite;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:50:39.637

首先，您可以制作您的`Piece`类`extends Sprite`，并使用 Sprite 的功能，而无需那种丑陋的`getSprite()`构造，只需超过一块。

```
public class Piece extends Sprite {
    private var pieceX:int=0;
    private var pieceY:int=0;
    public function Piece(pieceX:int=0,pieceY:int=0) {
        this.pieceX = pieceX;
        this.pieceY = pieceY;
    }
    ...
} 
```

然后，为了看到不止一个单件，您必须更改精灵的 X 和 Y 属性，否则它们确实是一个叠放的。

```
for (var i:int = 0; i <  4; i++ ) {
    var pB:BitmapData = new BitmapData(image.width / 2, image.height / 2, false, 0x000000FF);
    pB.copyPixels(image.bitmapData, new Rectangle(i * 20 , i * 20, image.width / 2, image.height / 2), new Point(0, 0));
    var piece:Piece=new Piece(0,0);
    pieces.push(piece);
    piece.graphics.beginBitmapFill(pB.clone(), null, false);
    piece.graphics.drawRect(0, 0, image.width / 2, image.height / 2);
    piece.graphics.endFill();
    piece.addEventListener(MouseEvent.MOUSE_DOWN, downHandler);
    piece.addEventListener(Event.ENTER_FRAME, dragPiece);

    addChild(piece);
    // here, add "piece.x=" and "piece.y=" assignments with correct values. For example
    piece.x=Math.random()*(stage.stageWidth-piece.width);
    piece.y=math.random()*(stage.stageHeight-piece.height);

} 
```

另外，为什么要通过创建 Bitmap 对象来克隆该位图？`pB.clone()`工作没有任何问题。（刚刚尝试`pB`并发现`beginBitmapFill()`维护位图链接，因此如果基本位图发生更改，则会更改图像。）

# css - 无法更改访问的内容：before 伪元素

> ID：16180422
> 
> 赞同：8
> 
> 时间：2013-04-23T22:46:34.547
> 
> 标签：css, pseudo-element, css-content

我试图为访问的链接添加一些效果，然后我遇到了这个问题。

这是代码：[http ://dabblet.com/gist/5447894](http://dabblet.com/gist/5447894)

只有 Opera 才能成功更改`:before`伪元素的内容。所有其他浏览器都失败。我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T22:52:50.010

访问链接的允许（= 不忽略）CSS 属性是`color`, `background-color`, `border-*-color`, `outline-color`and, `column-rule-color`（在某些情况下更多）。

这是为了防止历史窃取攻击。有关更多详细信息，请参阅[本文](http://dbaron.org/mozilla/visited-privacy#limits)。

因此，从技术上讲，您可以`:before`为链接设置一个伪类`:visited`，但它会被忽略并看起来好像链接没有被访问过。这不是一个错误，这是一个功能；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T22:59:01.583

出于隐私原因，在现代浏览器中设置链接样式的可能性范围非常有限`:visited`——因此您无法通过使用 javascript 检查计算的样式来检测用户之前访问过哪些站点。

`:visited`链接样式的允许属性是

*   `color`
*   `background-color`
*   `border-color`（及其子属性）
*   `outline-color`
*   填充和描边属性的颜色部分

即便如此，您也无法通过 javascript 获取已访问链接的计算样式值。

[你可以在这里](https://developer.mozilla.org/en-US/docs/CSS/Privacy_and_the_%3avisited_selector)阅读更多关于它的信息。

# c - 为什么在我的 sctp 程序中找不到“MSG_EOF”？

> ID：16180425
> 
> 赞同：1
> 
> 时间：2013-04-23T22:46:47.203
> 
> 标签：c, sctp

```
sctp_sendmsg(sock_fd, readbuf, rd_sz,
    (SA *)&cliaddr, len,   sri.sinfo_ppid,
    (sri.sinfo_flags| MSG_EOF), sri.sinfo_stream, 0, 0); 
```

在 ubuntu12.04 中，我编译为：`gcc -lsctp temp.c -o temp`. 但是，gcc 说：

> 错误：“MSG_EOF”未声明（在此函数中首次使用）

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T14:46:29.023

您使用的是什么操作系统？Solaris 10 是我所知道的唯一使用宏 MSG_EOF 的操作系统。如果您使用的是较新版本的 Solaris，或者您使用的是 Linux，那么您应该使用 SCTP_EOF。

# symfony-1.4 - Symfony 1.4 在已发送的任务标头中使用 Swift Mailer 发送邮件

> ID：16180427
> 
> 赞同：0
> 
> 时间：2013-04-23T22:46:48.187
> 
> 标签：symfony-1.4, swiftmailer

我有一个 symfony 任务，它调用一个类，当某些条件出现时，该类最终使用 Swift Mailer 发送电子邮件警报，我遇到的问题是，当我运行它时，我在 CLI 中得到一个关于已经发送的某些标头的输出。

```
A session had already been started - ignoring session_start()

Problem in FooLibrary sendEmailAlerts: Cannot modify header information - headers already sent by. 
```

这发生在我的本地开发环境中，以及在舞台上，我的本地是 Mac OS X 10.7 和 PHP 5.3.15 我的舞台是 Linux CentOS 和 PHP 5.3.17。

有什么线索吗？

提前致谢

编辑：我可以发送队列中的一两封邮件，但随后我收到错误消息，并且不再发送电子邮件。

# selenium - Selenium WebDriver 可以在后台静默打开浏览器窗口吗？

> ID：16180428
> 
> 赞同：204
> 
> 时间：2013-04-23T22:46:50.160
> 
> 标签：selenium, selenium-webdriver, webdriver, selenium-grid

我有一个 Selenium 测试套件，它运行许多测试，并且在每个新测试中，它都会在我打开的任何其他窗口之上打开一个浏览器窗口。在本地环境中工作时非常不和谐。有没有办法告诉 Selenium 或操作系统（Mac）在后台打开窗口？

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2014-05-03T17:09:21.680

如果您在 Python 中使用 Selenium Web 驱动程序，则可以使用 PyVirtualDisplay，它是 Xvfb 和 Xephyr 的 Python 包装器。

PyVirtualDisplay 需要 Xvfb 作为依赖项。在[Ubuntu](https://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29)上，首先安装 Xvfb：

```
sudo apt-get install xvfb 
```

然后从[PyPI](https://en.wikipedia.org/wiki/Python_Package_Index)安装 PyVirtualDisplay ：

```
pip install pyvirtualdisplay 
```

使用 PyVirtualDisplay 以无头模式在 Python 中使用 Selenium 脚本示例：

```
 #!/usr/bin/env python

    from pyvirtualdisplay import Display
    from selenium import webdriver

    display = Display(visible=0, size=(800, 600))
    display.start()

    # Now Firefox will run in a virtual display.
    # You will not see the browser.
    browser = webdriver.Firefox()
    browser.get('http://www.google.com')
    print browser.title
    browser.quit()

    display.stop() 
```

**编辑**

最初的答案是在 2014 年发布的，现在我们正处于 2018 年的风口浪尖。和其他一切一样，浏览器也在进步。Chrome 现在有一个完全无头的版本，无需使用任何第三方库来隐藏 UI 窗口。示例代码如下：

```
 from selenium import webdriver
    from selenium.webdriver.chrome.options import Options

    CHROME_PATH = '/usr/bin/google-chrome'
    CHROMEDRIVER_PATH = '/usr/bin/chromedriver'
    WINDOW_SIZE = "1920,1080"

    chrome_options = Options()
    chrome_options.add_argument("--headless")
    chrome_options.add_argument("--window-size=%s" % WINDOW_SIZE)
    chrome_options.binary_location = CHROME_PATH

    driver = webdriver.Chrome(executable_path=CHROMEDRIVER_PATH,
                              chrome_options=chrome_options
                             )
    driver.get("https://www.google.com")
    driver.get_screenshot_as_file("capture.png")
    driver.close() 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-04-24T15:28:32.310

有几种方法，但它不是简单的“设置配置值”。除非你投资一个不适合每个人要求的无头浏览器，否则它有点像 hack：

*[如何隐藏 Firefox 窗口（Selenium WebDriver）？](https://stackoverflow.com/questions/5370762/how-to-hide-firefox-window-firefox-webdriver)*

和

*[是否可以在 Selenium RC 中隐藏浏览器？](https://stackoverflow.com/questions/1418082/is-it-possible-to-hide-the-browser-in-selenium-rc)*

您可以“据说”将一些参数传递给 Chrome，具体来说：`--no-startup-window`

请注意，对于某些浏览器，尤其是 Internet Explorer，如果不让它在焦点上运行会损害您的测试。

[你也可以用AutoIt](https://en.wikipedia.org/wiki/AutoIt)破解一下，一旦它打开就隐藏窗口。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2017-04-21T13:25:06.917

Chrome 57 可以选择传递 --headless 标志，这会使窗口不可见。

此标志与 --no-startup-window 不同，因为最后一个不启动窗口。[如本页](http://peter.sh/experiments/chromium-command-line-switches/)所述，它用于托管后台应用程序。

将标志传递给 Selenium webdriver (ChromeDriver) 的 Java 代码：

```
ChromeOptions options = new ChromeOptions();
options.addArguments("--headless");
ChromeDriver chromeDriver = new ChromeDriver(options); 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2018-02-13T20:36:39.707

要在没有任何浏览器的情况下运行，您可以在*无头*模式下运行它。

我向你展示了一个现在对我有用的 Python 示例

```
from selenium import webdriver

options = webdriver.ChromeOptions()
options.add_argument("headless")
self.driver = webdriver.Chrome(executable_path='/Users/${userName}/Drivers/chromedriver', chrome_options=options) 
```

[我还在 Google 官方网站https://developers.google.com/web/updates/2017/04/headless-chrome](https://developers.google.com/web/updates/2017/04/headless-chrome)中添加了更多关于此的信息

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2020-03-08T21:24:40.733

我在 Windows 中为 Firefox 使用了这段代码并得到了答案（参考[这里](https://stackoverflow.com/questions/46753393/how-to-make-firefox-headless-programmatically-in-selenium-with-python)）：

```
from selenium import webdriver
from selenium.webdriver.firefox.options import Options

Options = Options()
Options.headless = True

Driver = webdriver.Firefox(options=Options, executable_path='geckodriver.exe')
Driver.get(...)
... 
```

但我没有为其他浏览器测试它。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2018-04-03T12:55:59.333

Since Chrome 57 you have the headless argument:

```
var options = new ChromeOptions();
options.AddArguments("headless");
using (IWebDriver driver = new ChromeDriver(options))
{
    // The rest of your tests
} 
```

The headless mode of Chrome performs 30.97% better than the UI version. The other headless driver PhantomJS delivers 34.92% better than the Chrome's headless mode.

**PhantomJSDriver**

```
using (IWebDriver driver = new PhantomJSDriver())
{
     // The rest of your test
} 
```

The headless mode of Mozilla Firefox performs 3.68% better than the UI version. This is a disappointment since the Chrome's headless mode achieves > 30% better time than the UI one. The other headless driver PhantomJS delivers 34.92% better than the Chrome's headless mode. Surprisingly for me, the Edge browser beats all of them.

```
var options = new FirefoxOptions();
options.AddArguments("--headless");
{
    // The rest of your test
} 
```

This is available from Firefox 57+

The headless mode of Mozilla Firefox performs 3.68% better than the UI version. This is a disappointment since the Chrome's headless mode achieves > 30% better time than the UI one. The other headless driver PhantomJS delivers 34.92% better than the Chrome's headless mode. Surprisingly for me, the Edge browser beats all of them.

> Note: PhantomJS is not maintained any more!

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-10-01T20:18:13.603

在 Windows 上，您可以使用 win32gui：

```
import win32gui
import win32con
import subprocess

class HideFox:
    def __init__(self, exe='firefox.exe'):
        self.exe = exe
        self.get_hwnd()

    def get_hwnd(self):
      win_name = get_win_name(self.exe)
      self.hwnd = win32gui.FindWindow(0,win_name)

    def hide(self):
        win32gui.ShowWindow(self.hwnd, win32con.SW_MINIMIZE)
        win32gui.ShowWindow(self.hwnd, win32con.SW_HIDE)

    def show(self):
        win32gui.ShowWindow(self.hwnd, win32con.SW_SHOW)
        win32gui.ShowWindow(self.hwnd, win32con.SW_MAXIMIZE)

def get_win_name(exe):
    ''' Simple function that gets the window name of the process with the given name'''
    info = subprocess.STARTUPINFO()
    info.dwFlags |= subprocess.STARTF_USESHOWWINDOW
    raw = subprocess.check_output('tasklist /v /fo csv', startupinfo=info).split('\n')[1:-1]
    for proc in raw:
        try:
            proc = eval('[' + proc + ']')
            if proc[0] == exe:
                return proc[8]
        except:
            pass
    raise ValueError('Could not find a process with name ' + exe) 
```

例子：

```
hider = HideFox('firefox.exe') # Can be anything, e.q., phantomjs.exe, notepad.exe, etc.
# To hide the window
hider.hide()
# To show again
hider.show() 
```

但是，此解决方案存在一个问题 - 使用 send_keys 方法会显示窗口。您可以使用不显示窗口的 JavaScript 来处理它：

```
def send_keys_without_opening_window(id_of_the_element, keys)
    YourWebdriver.execute_script("document.getElementById('" + id_of_the_element + "').value = '" + keys + "';") 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2016-05-29T15:16:16.410

我建议使用[PhantomJS](https://en.wikipedia.org/wiki/PhantomJS)。欲了解更多信息，您可以访问[幻影官方网站](http://phantomjs.org/)。

> 据我所知，PhantomJS 仅适用于 Firefox ......

下载 PhantomJs.exe 后，您需要将其导入您的项目，如下图 PhantomJS 所示。

我把我的放在里面： ***common*** → ***Library*** → ***phantomjs.exe***

[![在此处输入图像描述](https://i.stack.imgur.com/ExvmD.png)](https://i.stack.imgur.com/ExvmD.png)

现在，您在 Selenium 代码中要做的就是更改行

```
browser = webdriver.Firefox() 
```

像这样的东西

```
import os
path2phantom = os.getcwd() + "\common\Library\phantomjs.exe"
browser = webdriver.PhantomJS(path2phantom) 
```

> PhantomJS 的路径可能会有所不同......随心所欲地改变:)

这个技巧对我有用，我很确定它也对你有用；）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-02-07T06:25:47.610

It may be in options. Here is the identical Java code.

```
 ChromeOptions chromeOptions = new ChromeOptions();
        chromeOptions.setHeadless(true);
        WebDriver driver = new ChromeDriver(chromeOptions); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-03-02T07:13:46.307

如果您使用的是 Google Chrome 驱动程序，则可以使用这个非常简单的代码（它对我有用）：

```
from selenium import webdriver
from selenium.webdriver.chrome.options import Options

chrome_options = Options()
chrome_options.add_argument("--headless")
driver = webdriver.Chrome('chromedriver2_win32/chromedriver.exe', options=chrome_options)
driver.get('https://www.anywebsite.com') 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-09-19T18:27:29.697

这是一个简单的[Node.js](https://en.wikipedia.org/wiki/Node.js)解决方案，适用于 Selenium 的新版本 4.x（也可能是 3.x）。

### 铬合金

```
const { Builder } = require('selenium-webdriver')
const chrome = require('selenium-webdriver/chrome');

let driver = await new Builder().forBrowser('chrome').setChromeOptions(new chrome.Options().headless()).build()

await driver.get('https://example.com') 
```

### 火狐

```
const { Builder } = require('selenium-webdriver')
const firefox = require('selenium-webdriver/firefox');

let driver = await new Builder().forBrowser('firefox').setFirefoxOptions(new firefox.Options().headless()).build()

await driver.get('https://example.com') 
```

整个事情只是在后台运行。这正是我们想要的。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-11-18T14:25:18.077

在 *nix 上，您还可以运行 Xvfb 之类的无头 X Window 服务器并将*DISPLAY*环境变量指向它：

*[用于测试的假 X 服务器？](https://stackoverflow.com/questions/14321636/fake-x-server-for-testing)*

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-07-17T20:01:46.203

实现此目的的一种方法是在无头模式下运行浏览器。这样做的另一个优点是测试执行得更快。

请在下面找到代码以在 Chrome 浏览器中设置无头模式。

```
package chrome;

public class HeadlessTesting {

    public static void main(String[] args) throws IOException {
        System.setProperty("webdriver.chrome.driver",
                "ChromeDriverPath");
        ChromeOptions options = new ChromeOptions();
        options.addArguments("headless");
        options.addArguments("window-size=1200x600");
        WebDriver driver = new ChromeDriver(options);
        driver.get("https://contentstack.built.io");
        driver.get("https://www.google.co.in/");
        System.out.println("title is: " + driver.getTitle());
        File scrFile = ((TakesScreenshot) driver)
                .getScreenshotAs(OutputType.FILE);
        FileUtils.copyFile(scrFile, new File("pathTOSaveFile"));
        driver.quit();
    }
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-04-20T10:26:30.907

如果您使用的是 Ubuntu (Gnome)，一种简单的解决方法是安装 Gnome 扩展自动移动窗口：[https ://extensions.gnome.org/extension/16/auto-move-windows/](https://extensions.gnome.org/extension/16/auto-move-windows/)

然后将浏览器（例如 Chrome）设置为另一个工作区（例如 Workspace 2）。浏览器将在其他工作区静默运行，不再打扰您。您仍然可以在工作区中使用 Chrome，而不会受到任何干扰。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-09-10T07:30:33.647

我的 chromedriver 使用 Python 时遇到了同样的问题，*options.add_argument("headless")*对我不起作用，但后来我意识到如何修复它，所以我将它引入下面的代码：

```
opt = webdriver.ChromeOptions()
opt.arguments.append("headless") 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-01-20T17:41:43.437

这是一个对我有用的 .NET 解决方案：

[在http://phantomjs.org/download.html](http://phantomjs.org/download.html)下载 PhantomJS 。

从下载文件夹中的 bin 文件夹中复制 .exe 文件，并将其粘贴到 Visual Studio 项目的 bin 调试/发布文件夹中。

添加这个使用

```
using OpenQA.Selenium.PhantomJS; 
```

在您的代码中，像这样打开驱动程序：

```
PhantomJSDriver driver = new PhantomJSDriver();
using (driver)
{
   driver.Navigate().GoToUrl("http://testing-ground.scraping.pro/login");
   // Your code here
} 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2020-09-20T05:45:59.703

只需添加一个简单的“无头”选项参数。

```
from selenium import webdriver

options = webdriver.ChromeOptions()
options.add_argument("--headless")
driver = webdriver.Chrome("PATH_TO_DRIVER", options=options) 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2020-11-05T06:30:40.700

用它 ...

```
from selenium import webdriver
from selenium.webdriver.chrome.options import Options

options = Options()
options.headless = True
driver = webdriver.Chrome(CHROMEDRIVER_PATH, chrome_options=options) 
```

# c++ - C++ 枚举类型可以作为函数调用还是只是一种不同的类型转换？

> ID：16180432
> 
> 赞同：2
> 
> 时间：2013-04-23T22:47:29.260
> 
> 标签：c++, casting, enums

我在某个库中找到了表达式*enum-type-name* ( *integral-value* )，但它看起来有点奇怪，它真的是它的样子吗（至少对我来说）？枚举类型可以称为函数，还是只是另一种类型的枚举类型？或者是什么？例如：

```
enum SomeEnum
{
SOMETHING = 0,
OTHERTHING = 1
};

void someFunction(SomeEnum e)
{
// ...
}

someFunction( 2 ); // Invalid conversion
someFunction( (SomeEnum)2 );  // Works, Normal casting
someFunction( SomeEnum(2) );  // Works!! calling the enum as a function?? or just another style of enum casting?? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T22:51:14.343

这只是另一种铸造方式。`(type)value`并且`type(value)`通常是等价的。唯一的例外是涉及的类型的名称由两个或多个标记组成，例如`char *`or `unsigned long`（`(unsigned long)x`允许，但`unsigned long(x)`不允许）。

即使在这样的情况下，您也可以为该类型创建一个单标记名称，并等效地使用它：

```
typedef unsigned long ulong;
a = ulong(x); 
```

在任何情况下，你得到的都是语义上的 C 风格转换。大多数 C++ 程序员通常会避免使用这些，因为它们的含义可能有些模棱两可。根据用途，它可能等同于 a `static_cast`、 a `reinterpret_cast`、 a `const_cast`、它们的组合，或者您根本无法使用新式演员表进行的演员表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:49:45.973

就像其他对象一样，您可以使用构造函数创建临时对象。在这种情况下，您将传递一个`SomeEnum`值为 2 的临时对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T22:50:09.510

```
someFunction( (SomeEnum)2 );  // Works, Normal casting
someFunction( SomeEnum(2) );  // Works!! calling the enum as a function?? or just another style of enum casting?? 
```

事实上，这只是另一种类型转换的语法。就像：

```
(int)2
int(2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T22:52:23.930

它只是铸造..也许你应该使用 C++ 风格的铸造虽然

```
someFunction( static_cast<SomeEnum>( 2)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T22:56:55.023

枚举是 C++ 中的一种类型。所以 SomeEnum(2) 只是一个类型转换。C++(11) 带来了 enum 类，它是类型的更好表示，符合 OOPS 术语。

# java - 如何在 Java 中解密来自 PHP 的加密响应？

> ID：16180435
> 
> 赞同：0
> 
> 时间：2013-04-23T22:47:40.933
> 
> 标签：java, php, android

**目标：**我打算在 PHP 中加密 JSON 响应，一旦 android 应用程序收到该响应，它就会解密它。

我能够在 PHP 中找到加密和解密函数：

```
<?php
   function simple_encrypt($text)
    {
    $salt = "anything";
        return trim(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $salt, $text, MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND))));
    }

    function simple_decrypt($text)
    {
        $salt = "anything";
        return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $salt, base64_decode($text), MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND)));
    }
?> 
```

（我实际上并不需要该`simple_decrypt`功能，我只是在测试它。我实际上需要的只是服务器端的加密和客户端的解密（我的android应用程序））

所以我需要一个类似于 simple_decrypt 但用 Java 编写的函数，这样我就可以解密我的响应。

我不知道该怎么做，因为我对加密/解密很陌生。我希望这里的一些专家可以指导我找到适当的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:54:05.210

[这是我发现的一些 PHP/Java 代码](http://www.logikdev.com/2010/11/01/encrypt-with-php-decrypt-with-java/)- 这是对 PHP 代码的改进，因为它使用密码反馈模式 (CFB)，它比 ECB（电子密码本）更安全。要在 Java 中使用 256 位 AES，您需要安装[本页](http://www.oracle.com/technetwork/java/javase/downloads/index.html)底部提供的 Java Cryptography Extension 。请注意，PHP 和 Java 代码都需要使用相同的初始化向量——这对于每个密文应该是唯一的，但可以以明文形式传输。

如果您使用 SSL，那么这不是必需的——您只需要在数据从 PHP 到数据库/文件/其他一些持久存储然后到 Java 时执行此操作。

# linux - 使用 sudo 运行 shell 脚本时，用户路径不可用

> ID：16180445
> 
> 赞同：1
> 
> 时间：2013-04-23T22:48:25.213
> 
> 标签：linux, bash, sh

我正在编写一个 shell 脚本来为我启动一些进程。因为这些进程需要 sudo 访问权限，所以我使用 sudo 运行我的 shell 脚本。但是，当我这样做时，我无权访问我的路径变量。我已经向 /etc/profile.d/extra-path.sh 添加了一个 shell 脚本，它为我的用户添加了这些脚本。

有人可以告诉我应该如何添加这些路径变量，以便可以在使用 sudo 运行的 shell 脚本中访问它们，或者有没有办法在 shell 脚本本身中使用我的用户路径运行命令？

这是我想要工作的脚本：

```
#!/bin/bash
#start stuff up

nohup mongod 
#mongod fails as an unknown command, even though it's part of my path

nohup /cust/env/local/cust/jboss-5.1.0.GA/bin/run.sh -b 0.0.0.0 -Djava.awt.headless=true
#jboss needs access to the JAVA_HOME path variable which 
#doesn't exist on the path used in this shell script 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T22:57:57.640

尝试这个..

```
sudo -i /path/to/script.sh 
```

或者..

```
sudo env PATH=$PATH /path/to/script.sh 
```

或者..

```
sudo -E /path/to/script.sh 
```

其中一个应该可以工作，具体取决于您的系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T03:18:12.327

sudos 删除路径的事实是一个特性。不要试图通过复制用户的路径来解决它，如一些示例所示。（想象一下，如果一个坏用户将 bash 复制到 /tmp/ls，然后设置 PATH=/tmp/。root shell 可能会这样做`ls`并且意外地以 root 权限运行 bash 命令！糟糕，坏用户现在有一个 root shell。）

您可以通过将其添加到脚本顶部来添加额外路径（就在 下方`#!/bin/sh`）

```
. /etc/profile.d/extra-path.sh 
```

（. 的意思是“读取这个文件，就好像它是在这里复制的一样”）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T02:46:29.057

我发现了一些不同的解决方案。

```
sudo -i [command] 
```

和

```
sudo -s [command] 
```

两者都可以，但是使用 -i 可以像在根目录中一样访问命令，因此您必须指定 shell 脚本的完整路径（或将其放入您的 bin 中）。使用 -s，您可以像在当前目录中一样访问该命令。

您也可以使用它们来运行`myscript.sh`脚本本身，或者*在*脚本中在您需要 sudo 访问权限的命令前面使用它们。我更喜欢将它们放在这些命令的前面，因为这样我就不必输入太多来运行我的脚本！

# jquery - 带有上一个和下一个按钮的垂直 JQuery 选项卡

> ID：16180446
> 
> 赞同：0
> 
> 时间：2013-04-23T22:48:29.373
> 
> 标签：jquery, tabs

我发现这个标签 Jquery 插件非常适合我的网站。（[http://www.faridesign.net/2012/05/create-a-awesome-vertical-tabbed-content-area-using-css3-jquery/](http://www.faridesign.net/2012/05/create-a-awesome-vertical-tabbed-content-area-using-css3-jquery/)）

1）如何添加同一脚本的多个实例（当前破坏插件）

------我的尝试----- 这是我曾经尝试拥有多个实例的代码：

```
// this is the original code 
$(function () {
        var items = $('#v-nav>ul>li').each(function () {
            $(this).click(function () {
                //remove previous class and add it to clicked tab
                items.removeClass('p_current');
                $(this).addClass('p_current');
                //hide all content divs and show current one
                $('#v-nav>div.tab-content').hide().eq(items.index($(this))).show('fast'); 
                showTab($(this).attr('tab'));
            });
        });
        showTab("tab_pants1");
        function showTab(tab) {
            $("#v-nav ul li:[tab=" + tab + "]").click();
        } 
    }); 
```

以下是上述 javascript 的相关 HTML：

```
<div id="option_container"> 
    <div id="v-nav">
        <ul>
            <li tab="tab_pants1" class="first">STYLE <img src="img/site/check1.png" width="15px" class="check collar"></li>
            <li tab="tab_pants2">BUTTON <img src="img/site/check1.png" width="15px" class="check button"></li>
        </ul>
        <div class="tab-content">
             <div id="option">
                <table width="100%">
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                        <td></td> 
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                    </tr>
                </table>    
            </div>
            <div id="option_preview">
                <img src="img/option/collar.png" width="335px">
            </div>
        </div>
        <div class="tab-content">
            <div id="option">
                <table width="100%">
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton"  id="optionRadio"type="radio" name="Button" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio"type="radio" name="Button" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                        <td></td> 
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio"type="radio" name="Button" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio"type="radio" name="Button" value="1"></td>
                    </tr>
                </table>    
            </div>
            <div id="option_preview">
                <img src="img/option/collar.png" width="335px">
            </div>
        </div>  
</div><!--end of option container--> 
```

这是我对新实例的新代码的编辑

```
$(function () {
        var itemsOption = $('#v-nav>ul>li').each(function () {
            $(this).click(function () {
                //remove previous class and add it to clicked tab
                itemsOption.removeClass('option_current');
                $(this).addClass('option_current');
                //hide all content divs and show current one
                $('#v-nav>div.option-content').hide().eq(itemsOption.index($(this))).show('fast'); 
                showOption($(this).attr('option'));
            });
        });
        showOption("option1");
        function showOption(option) {
            $("#v-nav ul li:[option=" + option + "]").click();
        } 
    }); 
```

这是第二个选项卡系统的相关 HTML：

```
<div id="option_container"> 
    <div id="v-nav">
        <ul>
            <li option="option1" class="first">STYLE <img src="img/site/check1.png" width="15px" class="check collar"></li>
            <li option="option2" class="last">BUTTON <img src="img/site/check1.png" width="15px" class="check button"></li>
        </ul>
        <div class="option-content">
             <div id="option">
                <table width="100%">
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                        <td></td> 
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="collarImg"><br><input class="optionCollar" id="optionRadio" type="radio" name="collar" value="1"></td>
                    </tr>
                </table>    
            </div>
            <div id="option_preview">
                <img src="img/option/collar.png" width="335px">
            </div>
        </div>
        <div class="option-content">
            <div id="option">
                <table width="100%">
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton"  id="optionRadio"type="radio" name="Button" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio"type="radio" name="Button" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                        <td></td> 
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio"type="radio" name="Button" value="1"></td>
                    </tr>
                    <tr>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio" type="radio" name="Button" value="1"></td>
                        <td></td>
                        <td><img src="img/option/collar.png" width="100px" class="buttonImg"><br><input class="optionButton" id="optionRadio"type="radio" name="Button" value="1"></td>
                    </tr>
                </table>    
            </div>
            <div id="option_preview">
                <img src="img/option/collar.png" width="335px">
            </div>
        </div>
    </div>
</div><!--end of option container--> 
```

顶部代码有效，但底部代码无效。我已经更改了所有必要的 css 类和 ID，但它不起作用....这是我制作的测试站点的链接：http: [//monarcbrand.com/alpha/test.php](http://monarcbrand.com/alpha/test.php)

# java - Diceroll 概率方法结构

> ID：16180448
> 
> 赞同：0
> 
> 时间：2013-04-23T22:48:32.260
> 
> 标签：java

我遇到的问题是非常基本的，但是这是我没有很好地掌握的问题。下面的程序使用递归来计算给定数量的骰子（由用户输入）总计为用户选择的数字的概率。

据我了解，DiceRoll 方法是 Diceroll 类的一部分。但是，当我尝试调用该方法时，出现错误。我认为这个程序的结构存在根本性的问题。有人可以帮我吗？

```
import java.util.Scanner;

public class DiceRoll {

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        double dice = 0;
        int r = 0;
        System.out.println("Please input the number of dice you wish to roll between 0 and 25: ");
        if (in.nextInt() < 0 || in.nextInt() > 25){
            System.out.println("invalid number of dice");
        } else {
            dice = in.nextInt();            
        }
        System.out.println("What number between 0 and 125 do you wish to roll?");
        if (in.nextInt() < 0 || in.nextInt() > 125) {
            System.out.println("invalid number, please choose between 0 and 125");
        } else {
            r = in.nextInt();
        }
    }

    double DiceRoll(double dice,int r) {
        if (dice==1 && (r<1 || r>6)){ 
            return 0;
        }
        if (dice==1 && (r>=1 && r<=6)){
            return (1.0/6);
        } else {
            return ((1.0/6)*DiceRoll(dice-1,r-1));
        }
    }
}

DiceRoll(dice, r) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:53:29.490

Java 中的所有代码都需要包含在方法或类中。你不能只是`DiceRoll`在课堂上打电话给浮动。

你真正想做的是像你现在一样从用户那里得到你的输入，然后在`main`方法调用`DiceRoll`中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:49:53.937

从主方法中删除 Diceroll 方法 ^_^
编辑：意识到 DiceRoll 方法没有在主方法中声明，但对它的调用放在主方法之外，将它移到里面，它应该可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T23:00:01.973

您需要删除该行

```
DiceRoll(dice, r) 
```

此外，而不是使用

```
double DiceRoll(double dice,int r) 
```

这将要求您实例化一个对象，使用

```
static double RollDice(double dice, int r) 
```

作为一种静态方法，您不必为了使其工作而实例化该类型的对象。我还重命名了它，这样编译器就不会抱怨它看起来像一个无效的构造方法。使用静态方法，您只需调用

```
RollDice(dice, r) 
```

在你的`main`方法结束时。

您的代码还有另一个问题 - 输入的行为不会像您想要的那样。我假设您希望它检查输入是否有效，然后再次询问是否无效。目前，它会说它无效然后什么也不做，但是当它有效时，它会立即期待另一个数字。将您的语句更改为如下所示：

```
System.out.println("Please input the number of dice you wish to roll between 0 and 25: ");
dice = in.nextInt();
while (dice < 0 || dice > 25){
    System.out.println("invalid number of dice");
    dice = in.nextInt();            
} 
```

如果他们输入了一个无效的数字，这只会得到另一个数字，并且会循环直到他们给出一个有效的输入。

# c++ - 带有 C++ 组的 VS 2012 包含/lib

> ID：16180454
> 
> 赞同：1
> 
> 时间：2013-04-23T22:49:35.903
> 
> 标签：c++, visual-studio-2012, project-management, libraries

我目前正在和朋友一起做一个大型项目，现在是我们开始处理相同文件的时候了。我们有一个保管箱，我们想知道是否有某种方法可以配置项目，以便所有必要的额外包含/.libs 用于我们在其中使用的库，所以如果我们更改库或其他任何东西都不需要去下载和安装任何东西。

例如，他正在使用***OpenGL***，而我正在使用***Lua***和其他库。有什么方法可以将所有这些组合到***保管箱文件夹***中并让项目链接/编译出来吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:55:47.077

是的，VS2010 内置了一系列超级有用的宏，用于项目共享。

*   在您的项目中创建一个`external`文件夹来保存您将使用的所有库
*   您的所有 include/lib 目录都应使用 SolutionDir 宏，例如，我的附加包含目录之一是

> $(SolutionDir)\external\glew-1.9.0\include

**SolutionDir**宏只是解决方案相对于计算机的位置。这意味着两台计算机可能有完全不同的解决方案路径，但宏正确地告诉编译器在哪里找到`\external\libraryFile\include`

这是一张试图使其更清晰的图像： [有人可以实际阅读的更大版本](https://i.imgur.com/3o9Dtij.png?1) ![在此处输入图像描述](https://i.stack.imgur.com/H7h85.png)

编辑：VS 还有许多其他有用的宏，如果您不希望在解决方案中专门使用它，请查看 VS 提供的其他目录选项。

# caroufredsel - caroufredsel 和 jquery 的问题

> ID：16180464
> 
> 赞同：0
> 
> 时间：2013-04-23T22:50:07.023
> 
> 标签：caroufredsel

我正在使用 jquery 1.8.2 和 caroufredsel 6.2.1。js 文件被添加到页面中。在我的 document.ready 函数中，我调用 $('#carousel1').carouFredSel() 其中 carousel1 是页面上的众多轮播之一。

```
 <script type="text/javascript" language="javascript">
$(document).ready(function() {
                $('#carousel1').carouFredSel();

            });
        </script> 
```

HTML 被复制到下面（下面的 ${imgName} 是一个有效的图像）：

```
 <div id="c-carousel">
        <div id="wrapper">
<div id="carousel1" class="carousel1">
    <img src="${imgName}" width="150"/>

</div>
</div>
</div> 
```

关于我缺少什么以确保我可以在 html 页面上看到滑块的任何想法？任何有用的建议都将受到欢迎。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:28:24.073

我终于让这个工作了。这些是我采取的步骤：

1.  确保 jquery 在 html 的 Head 部分
2.  确保 jcaroufredsel 在 html 页面的 head 部分之后（您可能希望也使用 jquery.easnig - 尽管我不认为它是必需的，除非您在轮播配置中使用缓动选项）
3.  您的内容需要在一个 div 中（您将调用 caroufredsel），例如 c-carousel1。我以无序列表格式（使用）添加我的列表项。确保使用以水平格式包装内容的 div 包装器（以便列表不会以垂直方式显示）。
4.  当页面加载时（document.ready 或 windown.onLoad），您可以调用 caroufredsel，如下所示：

    $('#c-carousel1 ul').carouFredSel();

在这些步骤之后它对我有用。希望能帮助到你！

# html - 如何让子元素覆盖父元素的边框？

> ID：16180465
> 
> 赞同：7
> 
> 时间：2013-04-23T22:50:09.417
> 
> 标签：html, css

这是我正在尝试做的事情的粗略描述。如果它不能很好地解释它，我可以拼凑一个小提琴。

![在此处输入图像描述](https://i.stack.imgur.com/mpe3n.jpg)

黑盒子是a `<div>`，粉红色的也是div。我想要的是让它们看起来*有点*像标签。因此，当一个处于活动状态时，它会覆盖父级的边框，从而产生在选项卡中很重要的“桥梁”效果。

我想我可以让活动的稍微宽一点，这样它就可以覆盖边界。问题是，如果我`overflow-x: hidden;`的较宽部分位于黑色轮廓的“下方”，并且如果我执行自动或可见，那么它只会让它滚动。

一件重要的事情：粉红色需要有相对位置。

我究竟做错了什么？

编辑：忘了提到最重要的部分。黑匣子有`overflow-y: hidden`。没有它，下面的方法可以正常工作，但是当我添加它时，它又回到了原来的样子

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T23:13:25.550

也许这种方法会帮助你：

```
.main {text-align: right;border: 10px solid #000;}
.main > div > div {width: 100px; height: 60px; display: inline-block;background-color: red;margin: 10px 0;}
.main > .selected > div {margin-right: -10px;padding-left: 10px;}
```

```
<div class="main">
    <div class="selected"><div></div></div>
    <div><div></div></div>
    <div><div></div></div>
</div>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T22:55:58.233

您只需要在容器 div 上设置宽度，而不是使用`overflow-x hidden;`.

这是一个例子：http: [//jsfiddle.net/YhAmh/1/](http://jsfiddle.net/YhAmh/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T22:56:00.440

由于您的粉红色 div 已经具有`position: relative`，因此您只需将活动的 div 向右偏移一点：

```
.activediv{
    left: 5px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T22:57:24.633

如果你使用`position: absolute`而不是你可以在 parent`position: relative`中实现该布局。`overflow-y: hidden``div`

你可以在这里看到结果：http: [//jsfiddle.net/eugip9/sqjck/](http://jsfiddle.net/eugip9/sqjck/)

# knockout.js - 带有顶部和导航侧边栏的 Hot Towel SPA 布局

> ID：16180468
> 
> 赞同：0
> 
> 时间：2013-04-23T22:50:17.923
> 
> 标签：knockout.js, navigation, single-page-application, hottowel

我想开始一个新的 SPA 应用程序，我发现 Hot Towel 模板很有趣

我需要有两个导航区域 - 左侧面板和顶部面板。

但是 Hot towel 的默认 shell 只包含三个区域——页眉、页脚和内容

```
<div>
  <header>
    <!--ko compose: {view: 'nav'} --><!--/ko-->
  </header>
  <section id="content" class="main container-fluid">
    <!--ko compose: {model: router.activeItem, 
        afterCompose: router.afterCompose, 
        transition: 'entrance'} -->
    <!--/ko-->
  </section>
  <footer>
    <!--ko compose: {view: 'footer'} --><!--/ko-->
  </footer>
</div> 
```

如何添加一个新区域，leftnav？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T07:37:16.047

经过一些研究，我了解了 durandal 如何与子视图一起使用

任何视图都可以导入任意数量的子视图，布局只是我们设计和设置 div 样式的问题

要包含左导航，只需添加一个新`<!--ko ... -->`标签，并确保它具有正确的 css 类/样式以呈现为左导航

像这样的东西

```
<!--ko compose: {view: 'top-nav'} --><!--/ko--> 
<!--ko compose: {view: 'left-nav'} --><!--/ko--> 
<!--ko compose: {model: router.activeItem, 
    afterCompose: router.afterCompose, 
    transition: 'entrance'} -->
<!--/ko-->
<!--ko compose: {view: 'footer'} --><!--/ko--> 
```

甚至不需要额外的标签，例如`<header>`，`<section>`等，它们可以简单地成为子视图中的顶级标签（或者它可以很好地工作，取决于个人喜好）

从这一点来看，这完全取决于我们如何定义实际视图 nop-nav、left-nav 等

# android - 在 Gridview 中识别选择，填充图像 Android

> ID：16180469
> 
> 赞同：0
> 
> 时间：2013-04-23T22:50:34.853
> 
> 标签：android, android-gridview

我已经`GridView`填充了 6 种水果的图像（来自`drawable-hdpi`）。像这样： ![这就是我的网格视图中填充 6 种水果的方式](https://i.stack.imgur.com/7NxLO.png)

现在在选择时，我怎么知道用户选择了什么水果？由于我正在填充我的图像`drawables-hdpi`，标识符是什么以及如何通过它来识别选择？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:50:58.843

试试这个方法

```
private int imageList[] = { R.drawable.image_01, R.drawable.image_02,
    R.drawable.image_03, R.drawable.image_04, R.drawable.image_05
 }; 
```

`OnClick`，您可以获取图像ID并在需要时显示图像

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int pos, long arg3) {
        // TODO Auto-generated method stub

         // Here you can do the necessary operation

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T15:55:53.707

如果这是您第一次使用 GridView 和图像，那您为什么不从 developer.android.com 开始呢？[在这里](http://developer.android.com/guide/topics/ui/layout/gridview.html)，您可以回答您的问题。

# powershell-3.0 - 在 Powershell 中使用正则表达式过滤文本框

> ID：16180478
> 
> 赞同：0
> 
> 时间：2013-04-23T22:51:14.643
> 
> 标签：powershell-3.0

我已经回到这个片段 powershell 代码有一段时间了，我似乎找不到解决方案。基本上，我在 WinForm 中有一个文本框，我在文本框中输入名称，如 ckcTsetg、minintKLV、bbcada、tyleass 等。当我将它们放入文本框中时，我单击此过滤按钮，然后过滤掉以下正确的“ckcTsetg，minintKLV”。我遇到的问题是其他不被过滤掉的东西也被删除了，或者它们永远不会到达。当我单击过滤器按钮时，我的目标是过滤掉“$logOutputBox.TEXT”中的文本，然后过滤后的列表将通过 $objOutputBox.TEXT = $Numbered 传递给另一个框“$objOutputBox.TEXT”。相反，它完全过滤了整个列表.. 如果我事先获取有效名称，它们将被传递给“$objOutputBox.TEXT”，没问题。我尝试了一些不同的东西，但似乎没有任何效果。有任何想法吗？谢谢你的帮助！

```
$repeatButton = New-Object System.Windows.Forms.Button
$repeatButton.Location = New-Object System.Drawing.Size(310,375)
$repeatButton.Size = New-Object System.Drawing.Size(160,43)
$repeatButton.Font = New-Object System.Drawing.Font("Courier New", "10")
$repeatButton.Text = "Filter"
$repeatButton.Add_Click({

$Filtered = $logOutputBox.TEXT
$Numbered = $Filtered.Split("' ")| ? {$_ -notmatch "etg$|^minint|kvmlc*|dsm|les"}
$objOutputBox.TEXT = $Numbered

}) 
$tunerForm.Controls.Add($repeatButton) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:37:55.400

我找到了我的问题的答案。谢谢，如果您开始研究我的问题，我仍然非常感谢。如果您不介意并且确实回答了问题，请继续发布。可能有更好的方法，我真的只是想学习..

```
$Numbered = $Filtered.Split("`n ", [System.StringSplitOptions]::RemoveEmptyEntries) | ? {$_ -notmatch "etg$|^minint|kvmlc*|dsm|les"} 
```

# c# - 更改方法声明

> ID：16180480
> 
> 赞同：1
> 
> 时间：2013-04-23T22:51:16.203
> 
> 标签：c#

我正在做一个评估，这是我得到的问题之一：

以下哪项更改不能对下面的 C# 方法 call( `document.SaveAs(...)`) 的声明进行以简化代码：

```
object fileName = "Test.docx";
object missing = Missing.Value;

document.SaveAs(ref fileName,
                ref missing,
                ref missing,
                ref missing,
                ref missing,
                ref missing,
                ref missing,
                ref missing,
                ref missing,
                ref missing,
                ref missing,
                ref missing,
                ref missing); 
```

*   替换`object missing = Missing.Value;`为`object Missing`
*   删除`object fileName = "Test.docx";`语句
*   删除所有出现的`ref`
*   替换`ref fileName`为`FileName: "Test.docx"`
*   替换`ref fileName`为`FileName: ref fileName`。

我已经做了评估，我只是好奇，因为我实际上没有得到这个问题。

谢谢。

![在此处输入图像描述](https://i.stack.imgur.com/slTBm.png)

**更新**

我收到了结果，“不幸的是”只得到了 89%，根据招聘人员的说法，这还不够……无论如何，就像我在选择选项 D 和 E 之前所说的那样，并且问题部分正确，并且考虑到我最多只能选择3个选项，选项A、B、C和D不可能全部正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:06:03.647

由于最后一个引起混乱，这可能会有所帮助。

```
public class Document
{
    public void SaveAs(ref string DocName)
    {

    }
} 
```

注意参数名称是`DocName`. 通常这个参数名称被认为是仅由方法使用并且在方法之外不重要的东西，但是从 .NET 4（我认为？）开始，C# 可以使用这种格式的命名参数。如果你熟悉 Objective-C，那么你会经常看到这些。使用命名参数，`DocName`很重要。

我们现在可以像这样调用这个方法

```
string fName = "Test.docx";
Document d = new Document();
d.SaveAs(DocName: ref fName); 
```

注意`DocName`必须使用，否则编译器会抛出错误（所以你不能这样做`d.SaveAs(RandomName: ref fName);`）。另请注意，在方法声明 ( `d.SaveAs(DocName: "Test.docx");`) 中传递了一个字符串变量，而不是实例化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:10:39.197

*   替换缺少的对象 = Missing.Value; with object Missing Remove ：将给出错误，使用未分配的局部变量

*   object fileName = "Test.docx" : : 会报错，使用未赋值的局部变量

*   声明删除所有出现的 ref ：这很好，会将引用的变量转换为本地变量

最后两个我不知道，措辞可怕。

# c++ - 如何使 box2d 主体遵循正弦曲线

> ID：16180483
> 
> 赞同：0
> 
> 时间：2013-04-23T22:51:32.680
> 
> 标签：c++, box2d, trigonometry, path-finding, sprite

我想使用 SetVelocity(x,y) 函数使精灵遵循正弦曲线的路径。起初这对我来说似乎很简单，我创建了一个函数，它返回我想要旅行的函数的导数，即对于 sin(x)，函数返回那个 x 的余弦。问题是我在这个等式中使用时间（c++ time_t）作为“x”。当我从这个方程返回一个结果时，我有一个 X 和一个 Y，我使用三角函数来获得比率，即

```
 float newY = velocityResults->getVelocityFromLua(x, functionToCall);

    float angle = std::atan2(newY,newX);
    float velocityX = cos(angle);
    float velocityY = sin(angle);
    velocityX*=PLAYER_SPEED;
    velocityY*=PLAYER_SPEED;
    player->getPhysicalProperties()->setVelocity(velocityX,velocityY); 
```

这样做的问题是时间随着时间的推移越来越多，经过进一步检查，这是实现我的目标的可怕方式，因为它根本不起作用。时间一直在流逝，x 变得越来越大，所以它超越了一切。我知道有一种更简单的方法可以做到这一点，但它完全逃脱了我。

（我这样做的原因：我正在制作一个数学游戏，玩家沿着不同的函数路径旅行以实现目标）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T06:49:22.607

使用`b2MouseJoint`和更新它的目标是在你的曲线上

# java - 无法正确对齐平均值

> ID：16180484
> 
> 赞同：-1
> 
> 时间：2013-04-23T22:51:37.470
> 
> 标签：java, formatting

更多硬件问题：DI 需要对齐平均值。我试过了，但是学生名字的长度不同，并且`printf`在一定程度上使用了作品，但是对于比其他名字更长的名字，他们没有排队。我不知道如何让他们排队

```
System.out.println("You Chose Student Average\n");
                int avg;

                while(inFile.hasNext())
                {
                    name = inFile.next();
                    test1 = inFile.nextInt();
                    test2 = inFile.nextInt();

                    avg = (test1 + test2)/2;

                    System.out.print(name);
                    System.out.printf("%14d\n", avg);
                }
                System.out.print("\n"); 
```

然后这里是平均输出：

```
Robert            76
Joel            57
Alice            96
Jasmine            84
Larry            55
Elizabeth            82
Frank            70
Christine            28
Alex            26
Ariel            82
Luis            71
Nicole            64
Mitch            92
Randy            87
Tammy            87
Sarah            74
Samuel            73
Lauren            59
Deanna            98
Mathew            93
Justin            72
Beth            95
Rebecca            84
Paul            54
Lucy            45 
```

做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:01:23.887

您可以将字符串格式用于整数之外。[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)

但是，除非您有明确定义的最大名称长度，否则我认为您能做的最好的事情就是检查最大名称长度，然后在所有其他名称中添加空格，直到它们匹配为止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:05:16.630

尝试使用“\t”。喜欢：

```
System.out.println("Name: \t" + average); 
```

**编辑**

由于您正在使用`printf`尝试：

```
System.out.printf("%14d \t \n", avg); 
```

# eclipse - GAE：将测试与应用代码分开

> ID：16180485
> 
> 赞同：2
> 
> 时间：2013-04-23T22:51:43.327
> 
> 标签：eclipse, google-app-engine, junit

我正在使用 Eclipse 用 Ja​​va 编写一个小型 Google App Engine 应用程序。我的代码存储在 中`src/cinemasderot`，我的测试存储在`src/tests`.

引用[Google App Engine 文档](https://developers.google.com/appengine/docs/java/tools/localunittesting)：

> 提示：最好将单元测试存储在与应用程序代码不同的位置。还要避免在您的应用程序中部署 JUnit 和其他测试包。

**如何将测试与应用程序代码分开？**我希望不要将测试文件部署到应用服务器，并为它们提供一个单独的类路径文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T04:57:58.187

您已经将代码和测试分开在不同的目录中，这是最重要的一步。在 jUnit 的早期，人们将测试与生产代码放在同一目录中更为常见。我想有些人可能仍然会这样做。今天的最佳实践是使用单独的源代码根，但使用并行包结构。这就是你所做的。

现在的问题是，你是如何构建你的应用程序的？Ant、Maven、GAE Eclipse 插件等？我对 GAE 不是很熟悉，但总的来说，您应该确保使用单独的命令编译生产和测试代码，并将编译后的输出放在单独的目录中。然后当您创建要部署的 Jar 或 War 文件时，只包含生产代码。

# symfony - Heroku 可信代理

> ID：16180486
> 
> 赞同：3
> 
> 时间：2013-04-23T22:51:52.150
> 
> 标签：symfony, heroku

我正在**Heroku上运行一个****symfony2**应用程序，我需要获取我的应用程序将在其后面运行的**受信任代理** (IP(s))，如下所述：http: [//symfony.com/blog/new- in-symfony-2-3-use-sub-networks-to-configure-trusted-proxies](http://symfony.com/blog/new-in-symfony-2-3-use-sub-networks-to-configure-trusted-proxies)

 ****有一个关于 Dyno 可以在[Dyno 流形](https://devcenter.heroku.com/articles/dynos#ip-addresses)中获得的 IP 的提及：

> 运行多个测功机时，测功机管理器将应用程序分布在多个节点上。访问您的应用程序始终通过路由器。
> 
> 因此，测功机没有静态 IP 地址。虽然您永远无法直接连接到测功机，但可以从测功机发起传出请求。但是，您可以指望测功机的 IP 地址会随着它在不同位置重新启动而发生变化。

该框架实际上有一些选项，例如：

```
framework:
    trust_proxy_headers: true 
```

但这很快就会被弃用......

谢谢 ！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T23:39:33.817

您可能只需在前端控制器中添加一个信任传入 IP 的调用（因为访问您的服务器的唯一方法是通过 Heroku 路由层）：

```
Request::setTrustedProxies(array($_SERVER['REMOTE_ADDR'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-04T19:07:25.033

根据[Symfony 的 Heroku 指令](https://devcenter.heroku.com/articles/getting-started-with-symfony#trusting-the-load-balancer)和[Heroku 标头列表](https://devcenter.heroku.com/articles/http-routing#heroku-headers)，我们可以看到 Symfony 使用并且可以从 Heroku 信任的唯一转发标头是`X-Forwarded-For`,`X-Forwarded-Proto`和`X-Forwarded-Port`. 其他标头不可信。

我会推荐以下内容：

```
$trustedHeaders = [
    Request::HEADER_X_FORWARDED_FOR,
    Request::HEADER_X_FORWARDED_PROTO,
    Request::HEADER_X_FORWARDED_PORT,
];
Request::setTrustedProxies(
    array($_SERVER['REMOTE_ADDR']),
    array_reduce($trustedHeaders, function($carry, $value) {
        return $carry ^ $value;
    }, 0)
); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-23T23:43:15.597

嗯，在 Heroku 上，在 dynos 上运行的应用程序只能通过路由层/代理访问，所以你应该可以信任一切。此外，代理请求到您的应用程序的路由器的 IP 是未知的。

```
Request::setTrustedProxies(array('0.0.0.0/0')); 
```****

# c# - 使用类型化数据集插入、更新、删除

> ID：16180487
> 
> 赞同：0
> 
> 时间：2013-04-23T22:52:02.970
> 
> 标签：c#, ado.net, dataset, typed-dataset

我有一个简单的应用程序，其中有一个包含数据库中作者姓名的列表框（出于该项目的目的，1 个作者 = 1 本书）。我必须为此应用程序使用类型化的 DataSet。

当您选择其中一位作者时，旁边会出现三个文本框。一个显示所选作者的姓名，另一个显示与他相关的书籍，最后一个显示出版日期。

在这个表格上，我有 3 个按钮。一个应该从数据库中删除选定的行（在列表框中），一个应该更新选定的行，一个应该插入一个新行。

我只是通过使用从数据源拖放到表单上来填充列表框和文本框，所以我的代码中唯一的一行是：

```
this.BookTableAdapter.Fill(this.myDataSet.Book); 
```

这当然发生在负载上。

我开始尝试实现删除功能并将其放在删除按钮的 onClick 事件中：

```
MyDataSet.BookRow selectedBook = (MyDataSet.BookRow)listBox1.SelectedItem;
selectedBook.Delete(); 
```

当我按下删除按钮时，它给了我以下异常：

```
System.InvalidCastException: Unable to cast object of type 'System.Data.DataRowView' to type 'BookRow'. 
```

谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:01:31.597

列表框包含一个 DataRowView，其中包含绑定到它的数据。问题在于这一行 MyDataSet.BookRow selectedBook = (MyDataSet.BookRow)listBox1.SelectedItem; 您尝试将 DataRowView 强制转换为 BookRow 对象的位置。

尝试使用列表框的选定值成员，或通过在列表框的 DataRowView 内对关联的 DataRow 调用 delete。我不确定 delete 是否真的会更新表或只是标记要删除的行，因此您可能必须在完成后调用数据表/已删除行的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T22:59:18.800

显然：中的对象`listBox1.SelectedItem`是类型：`System.Data.DataRowView`所以你根本不能这样做：

```
(MyDataSet.BookRow)listBox1.SelectedItem; 
```

好消息是 Delete 或 Remove 方法适用于基类`DataRow`，`DataTable`因此您实际上不需要在`BookRow`类型级别工作。

每个都`DataRowView`包含一个称为`Row`返回关联的成员`DataRow`，因此您可以将该行用作您的行并直接从那里或从父级删除它`DataTable`。

我没有编译代码，所以不能准确地说，但如果没有完全构建，请尝试以下操作并调整它：

```
((System.Data.DataRowView)listBox1.SelectedItem).Row.Delete(); 
```

# java - Android 应用程序在启动器图标选择时重新启动 - 用户已注销

> ID：16180491
> 
> 赞同：3
> 
> 时间：2013-04-23T22:52:26.643
> 
> 标签：java, android, android-launcher

我有一个带有登录屏幕的应用程序，它将用户带到启动屏幕。如果用户离开应用程序，然后再次单击启动器图标，他必须重新登录。仅当我使用 apk 文件在设备上安装应用程序时才会发生这种情况。如果我在 Eclipse 连接到设备的情况下以调试模式运行它，那么这不会发生。在调试模式下，如果我在离开应用程序后单击启动器，我会返回到我的初始屏幕，这是预期的行为。

问题是，如果我使用 apk 文件在设备上安装应用程序，我不知道会发生什么。我无法访问日志或调试。启动画面不会在恢复时自动注销。

有谁知道为什么会发生这种情况或我可以做些什么来进一步调查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:01:39.093

看看[这个页面](http://developer.android.com/training/basics/activity-lifecycle/stopping.html)。

我认为可能发生的是在 onPause 或 onStop 方法期间触发了某些事情，导致您的会话信息被忽略。是否调用 Pause 或 Stop 是可用资源的问题，并且在调试和正常运行模式下可能会产生不同的结果。

我建议将这些功能添加到您的活动中，查看哪些被调用（以及它们的创建和恢复合作伙伴）并确定这是否是您的问题的原因。

当应用程序失去焦点时，我个人也遇到过类似的资源被释放问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:05:35.970

我猜说“当用户离开时”是指用户转到另一个应用程序或做其他事情。因此，在这种情况下，`onPause()`将在您的应用程序暂停以及`onSaveInstanceState()`您的应用程序被销毁时调用。

因此，您可能希望在两者中*显式*`onPause()`执行注销操作和`onSaveInstanceState()`，以便您的应用程序具有一致的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T12:46:46.977

我确实覆盖了生命周期方法，但是这个建议有效：

[应用程序在启动器中按图标启动时完全重启](https://stackoverflow.com/questions/16126511/app-completely-restarting-when-launched-by-icon-press-in-launcher)

简单的设备重启即可解决问题

# ruby-on-rails - ExceptionNotifier常量未初始化Rails 3

> ID：16180494
> 
> 赞同：3
> 
> 时间：2013-04-23T22:52:34.253
> 
> 标签：ruby-on-rails, linux, email, production-environment, exception-notification

我已经阅读了该站点上的许多问题以及 ExceptionNotifier 的 GitHub 文档及其在 Rails 3 中的实现，但我不明白为什么它在我的生产服务器上对我不起作用。在我的本地机器（Mac）上，它可以在生产环境中完美运行。但是在我使用 capistrano 部署并在 Linux 机器上使用 unicorn 运行应用程序后，我的 unicorn 日志抱怨`uninitialized constant ExceptionNotifier`我的环境/production.rb 文件中有一个，即使我的本地机器似乎认为它很好。我已经尝试过这两种实现： `gem 'exception_notification', :require => 'exception_notifier'`和 `gem 'exception_notification_rails3', :require => 'exception_notifier'`. 两者都抛出此错误。这是我的生产.rb

```
Rl4::Application.configure do
  # code omitted
  # Enable ExceptionNotifier, having it ignore its default exceptions
  config.middleware.use ExceptionNotifier,
    sender_address: 'reports@ctatechs.com',
    exception_recipients: 'brice@ctatechs.com',
    ignore_exceptions: ExceptionNotifier.default_ignore_exceptions
end 
```

这是我的 Gemfile

```
source 'https://rubygems.org'
# lots omitted
gem 'exception_notification_rails3', :require => 'exception_notifier'
# lots more omitted 
```

这是我的 application_controller.rb，它实现了 gem：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  # By default, only production ENV considers requests not local
  unless Rails.application.config.consider_all_requests_local
    rescue_from Exception, :with => :server_error
    rescue_from ActionController::UnknownAction, :with => :not_found
    rescue_from ActionController::UnknownController, :with => :not_found
    rescue_from ActionView::MissingTemplate, :with => :not_found
  end

  private
    def server_error(exception)
      ExceptionNotifier::Notifier.exception_notification(request.env, exception).deliver
      respond_to do |format|
        format.html { render template: '/500.html', layout: 'application/layout', status: 500 }
        format.all { render nothing: true, status: 500 }
      end
    end

    def not_found(exception)
      ExceptionNotifier::Notifier.exception_notification(request.env, exception).deliver
      respond_to do |format|
        format.html { render template: '/404.html', layout: 'application/layout', status: 404 }
        format.all { render nothing: true, status: 404 }
      end
    end
end 
```

同样，目前实施不是我的问题。不知何故，gem 未正确安装或未正确初始化。我确实在 Linux 机器上为 gem 的两个版本以及“exception_notifier”运行了 sudo gem install。没有骰子。想法？

**附加信息** 我刚刚尝试将 gem 重新安装为插件，并在更改 production.rb 文件以使用后得到相同的错误`config.middleware.use ::ExceptionNotifier`。但是，这些修改仍然适用于我的本地计算机。也许我错过了 Linux 机器上的另一个软件？文档上似乎没有提到任何内容...

**请求 gem 版本**

我正在使用 exception_notification，v. 3.0.1

**请求完整的堆栈跟踪**

```
I, [2013-04-24T17:34:44.113788 #16877]  INFO -- : Refreshing Gem list
E, [2013-04-24T17:34:46.562588 #16877] ERROR -- : uninitialized constant ExceptionNotifier (NameError)
/home/deployer/rl4/releases/20130424201053/config/environments/production.rb:80:in `block in <top (required)>'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:24:in `class_eval'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:24:in `configure'
/home/deployer/rl4/releases/20130424201053/config/environments/production.rb:1:in `<top (required)>'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:571:in `block in <class:Engine>'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `instance_exec'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in `run'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:55:in `block in run_initializers'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `each'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in `run_initializers'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:136:in `initialize!'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
/home/deployer/rl4/releases/20130424201053/config/environment.rb:5:in `<top (required)>'
config.ru:4:in `require'
config.ru:4:in `block in <main>'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `instance_eval'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/rack-1.4.5/lib/rack/builder.rb:51:in `initialize'
config.ru:1:in `new'
config.ru:1:in `<main>'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn.rb:44:in `eval'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn.rb:44:in `block in builder'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:722:in `call'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:722:in `build_app!'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:595:in `init_worker_process'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:615:in `worker_loop'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:500:in `spawn_missing_workers'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:511:in `maintain_worker_count'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/lib/unicorn/http_server.rb:277:in `join'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/gems/unicorn-4.6.2/bin/unicorn:126:in `<top (required)>'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/bin/unicorn:19:in `load'
/home/deployer/rl4/shared/bundle/ruby/1.9.1/bin/unicorn:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T23:25:25.000

说我对这个问题的解决是如此微不足道，我感到很惭愧。

```
$ cap unicorn:stop
$ cap unicorn:start 
```

我在部署过程中的重新启动任务从未真正停止服务器实例，因此没有加载新库，因此没有加载异常。

女士们，先生们，不要忘记尝试将其关闭并重新打开。曾经。感谢所有帮助我解决这个问题的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T17:40:50.497

这是您可以解决的方法。

考虑到您的 development 和 production.rb 中已经有 SMTP 设置

**宝石文件**

```
gem 'exception_notification' ,'3.0.0', :require => 'exception_notifier' 
```

**应用程序.rb**

```
config.middleware.use ExceptionNotifier,
  :email_prefix => "[ERROR]",
  :sender_address => %{"Exception Notifier" <XYZ@gmail.com>},
  :exception_recipients => %w{ABC@gmail.com} 
```

**application_controller.rb**

```
#render 500 error 
def render_error(exception)
  ExceptionNotifier::Notifier.exception_notification(request.env, exception).deliver
  respond_to do |f| 
    ...
  end
end 
```

对我来说，它适用于开发和生产（Heroku）。

希望它也能帮助你。
干杯：）

# jboss - 在 JBoss 集群中拒绝连接

> ID：16180497
> 
> 赞同：0
> 
> 时间：2013-04-23T22:53:43.367
> 
> 标签：jboss, load-balancing

当负载增加时，我的集群中的一些 JBoss 节点拒绝新连接。但是当我查看这些节点的 CPU/内存使用率时，它们只是处于最低水平，不超过 10% 的 CPU 使用率和 60% 的内存使用率。我不明白还有什么导致连接被拒绝。在某些情况下，连接在连接到任何节点之前被负载均衡器本身拒绝。也没有网络延迟。整个环境在局域网下。以下是错误信息。

```
 Unable to connect to server. Error attempting to connect a socket to a remote address and port. Typically, the server is down or cannot open more sockets on its system. If the error detail is "java.net.ConnectException: Connection timed out: connect" for all requests, it typically means that the Load Generator is using an inappropriate network interface. Details: java.net.ConnectException: Connection refused: connect 
Please refer to the documentation for further details and advice 
```

# jquery - 禁用在特定 div 上的滑动

> ID：16180498
> 
> 赞同：2
> 
> 时间：2013-04-23T22:53:55.020
> 
> 标签：jquery, jquery-mobile, mobile

拥有这个 jQuery Mobile 1.9.1 代码，可以在用户向右或向左滑动时处理显示侧面板......

```
$(document).on("pageinit",".ui-page",function(){

    var $page=$(this);
    $page.on("swipeleft swiperight",function(e){
        if($page.jqmData("panel")!=="open"){
            if(e.type==="swiperight"){
                $page.find("#menu").panel("open");
            }else if(e.type==="swipeleft"){
                $page.find("#menu2").panel("open");
            }
        }
    });
}); 
```

这在使用具有滑动功能的图像滑块时会产生问题。当我向右滑动时，在滑块 div 内它会变为下一张照片并打开面板......

我只是尝试这样做：

```
 $('#full-width-slider').swipe(function(e){
        e.stopPropagation();
        e.preventDefault();
    }); 
```

但它根本不起作用。

有什么方法可以禁用 div #full-width-slider 中的 jQuery Mobile 原生幻灯片功能？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T23:13:07.203

```
.on('swipeleft swiperight', function(e){ 
```

与

```
.swipe(function(e){ 
```

虽然我对这个答案不是 100% 有信心，但感觉试验表明代码仍然存在问题，您可能需要对原始元素进行完整性检查，例如，

```
if($.inArray('full-width-slider', $.trim($(e.target).prop('id')).split(' ')) > -1){
    //full with slider is the target, so return out 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T23:08:48.470

我想你正在寻找这个：

```
event.stopImmediatePropagation(); 
```

这应该阻止滑动冒泡。

你的代码

```
$('#full-width-slider').swipe(function(e){
    e.stopImmediatePropagation();
    e.preventDefault();
}); 
```

# jax-ws - jaxws:endpoint inInterceptors 未正确调用

> ID：16180501
> 
> 赞同：0
> 
> 时间：2013-04-23T22:54:10.257
> 
> 标签：jax-ws

调用服务方法后调用拦截器的处理消息

```
<jaxws:endpoint id="service" implementor="#testServiceimpl"
        address="/testService"> 
     <jaxws:inInterceptors>
            <bean id="test"
        class="org.example.Test"/>
     </jaxws:inInterceptors>
     </jaxws:endpoint>

public class TestInterceptor extends AbstractSoapInterceptor {

    public TestInterceptor() {
        super(Phase.INVOKE);
    }

@Override
    public void handleMessage(SoapMessage message) throws Fault {
        System.out.println("Test");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T15:07:02.703

super(Phase.PRE_INVOKE);

For this issue interceptor should be executed in PRE_INVOKE phase

# node.js - 为什么我可以在“res.send”之后执行代码？

> ID：16180502
> 
> 赞同：90
> 
> 时间：2013-04-23T22:54:13.773
> 
> 标签：node.js, express

我想知道以下代码行为背后的机制是什么：

```
res.send(200, { data: 'test data' });
console.log('still here...'); 
```

我的理解是`res.send`不会*返回*函数，但会*关闭连接/结束请求*。这可以解释为什么我仍然可以在命令之后执行代码`res.send`（我查看了 express 源代码，它似乎不是异步函数）。

还有什么我可能会错过的东西吗？

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-04-23T22:58:12.743

当然`end`会结束 HTTP 响应，但它不会对您的代码做任何特别的事情。

即使您结束了回复，您也可以继续做其他事情。

然而，你*不能*做任何有用的事情`res`。由于响应结束，您无法向其写入更多数据。

```
res.send(...);
res.write('more stuff'); // throws an error since res is now closed 
```

这种行为与其他传统框架（PHP、ASP 等）不同，后者为 HTTP 请求分配线程并在响应结束时终止线程。如果您调用类似 ASP 的等效函数`Response.End`，则线程终止并且您的代码停止运行。在节点中，没有线程可以停止。 `req`并且`res`不会再触发任何事件，但回调中的代码可以继续运行（只要它不尝试调用`res`需要打开有效响应的方法）。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-07-30T13:37:22.143

**编辑：**我不再做下面解释的事情，因为你不应该在不需要它时返回一个值。它使您的代码可读性降低并且看起来很hackish。相反，我建议将 return 语句与`res.send()`. @slavafomin 在评论中很好地解释了这一点。

停止执行函数并同时发送响应的一种简单方法是

```
return res.send('500', 'Error message here'); 
```

这允许您使用简短的`if`语句来处理错误，例如：

```
if (err) {
    return res.send('500', 'Error message here');
} 
```

该函数的确切*返回是一个**对象*，它*似乎包含您结束连接后的整个连接*状态（请求、状态、标头等），但这应该不重要，因为您不会对它做任何事情。`res.send`

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-19T17:48:11.700

一个可能的解决方案是使用这个库：[on-finished](https://github.com/jshttp/on-finished)

```
var destroy = require('destroy')
var fs = require('fs')
var http = require('http')
var onFinished = require('on-finished')

http.createServer(function onRequest (req, res) {
  var stream = fs.createReadStream('package.json')
  stream.pipe(res)
  onFinished(res, () => {
    destroy(stream)
  })
}) 
```

也适用于*Express*，例如：

```
const express = require('express');
const app = express();

app.get('/video', (req, res) => {
 const ffmpeg = spawn(ffmpegPath, argsArray);
 ffmpeg.stdout.pipe(res);
 onFinished(res, () => {
   ffmpeg.kill();
 });
}); 
```**

# java - java中的原始数组是如何实现的？

> ID：16180503
> 
> 赞同：1
> 
> 时间：2013-04-23T22:54:16.433
> 
> 标签：java, arrays, algorithm

SO上有几个与此类似的问题，但它们并不能完全回答代码实现是什么。我看过

[为什么没有 java.lang.Array 类？如果一个java数组是一个对象，它不应该扩展对象吗？](https://stackoverflow.com/questions/8546500/why-isnt-there-a-java-lang-array-class-if-a-java-array-is-an-object-shouldnt)

和

[java中的数组是如何实现的？](https://stackoverflow.com/questions/2267790/how-are-arrays-implemented-in-java)

他们没有回答具体的实现是什么。

我已经从[OpenJDK](http://hg.openjdk.java.net/)下载了 java 源代码，但我真的找不到我要找的东西。（也许那部分代码是专有的？）

1.  追加/插入是如何完成的？
2.  如何检索数据？例如，如果我调用`my_arr[500]`什么算法来获取索引 500 处的值？
3.  删除是如何完成的？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T22:59:06.013

数组上没有追加、插入或删除。

在一个合理的实现中，地址`my_arr[500]`应该是对象的基地址，加上头部的一个小偏移量，再加上数组元素大小的 500 倍。显然，您需要进行范围检查 - 偏移量必须是非负数并且小于数组的长度（存储在标题中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T23:04:37.160

我会说它与`C`or相同`C++`

当我们这样做`int a[10];`或`Object obj[10];` 编译器分配的内存块等于`10*sizeOf(int)`或`10*sizeOf(Object)` 内存块中第一个位置的地址存储在`a`. 所以基本上`a`变成了指针。注意`Java internally uses Pointers`。

然后每当我们尝试访问`a[5]`位置地址时，都会将其计算为指针算术。

`a+5*(sizeOf(int))`or`obj+5*(sizeOf(Object))` 然后读取`sizeOf(int)`or`sizeOf(Object)`字节作为值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T23:13:27.507

1.  my_arr[1] = "whatevs"; 这会将数组中的第一个元素设置为 whatevs。

2.  System.out.print(my_arr[500]);// my_arr[#] 是数组中元素 500 在内存中的位置，调用它以获取存储在那里的任何信息。（实际上，实际的 500 个元素会超出范围，您要查找的元素是 499。因为数组总是从 0 开始并达到它们的设定量 -1）

3.要删除信息，您可以一次性完成，但将其设置为“null”或复制数组并简单地省略您不想包含的部分。

您将使用一种方法在程序中完成所有这些事情以呈现另一种影响。真正需要理解的是，数组中的每个元素都可以是对象或基元，即数字值，例如 10。

如果所有这些对您来说似乎都是基本的，那么您需要对您的问题更加准确，或者简单地解释您要对数组做什么。

# java - 如何在具有缓存接口的简单缓存实现中使用泛型？

> ID：16180504
> 
> 赞同：0
> 
> 时间：2013-04-23T22:54:19.060
> 
> 标签：java, generics, caching, type-safety

```
public interface Cache<T>{
    public void put(String key,T value);
    public Object get(Object key);
}

public class CacheImpl<T> implements Cache {
    private static Object monitor = new Object();
    private static CacheImpl instance;
    private Map<String, T> cache = Collections.synchronizedMap(new HashMap<String, T>());

} 
```

在上面的代码中，我必须使用泛型进行类型安全检查，但在实现的类中出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T22:57:47.180

您的实现类尚未实现接口中声明的任何方法！

接口是一种*契约*，实现类承诺支持接口中的方法。您需要为接口中声明的方法添加实现。

您还需要在`implements`子句中包含泛型类型参数：

```
public class CacheImpl<T> implements Cache<T> {

    public void put(String key,T value) {
      // Method body
    }

    public Object get(Object key){
      // Method body

      return someObject;
    }

    // Other methods
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:26:29.187

可以处理带有双重检查和泛型参数的单例，见下文，其中 CacheImpl 是我的 Cache 实现

```
public static CacheImpl<?> getInstance(Class<?> ofClass) {
        if (instance == null) {
            synchronized (CacheImpl.class) {
                instance = new CacheImpl<Object>(ofClass);
            }
        }
        return instance;
    } 
```

# django - 来自 url 的 Django ImageField

> ID：16180505
> 
> 赞同：0
> 
> 时间：2013-04-23T22:54:23.273
> 
> 标签：django

我想知道是否可以从 Facebook URL 保存 ImageField

这是我的课：

```
class Images(models.Model):

    name        = models.CharField(max_length=250)
    type        = models.CharField(max_length=100)
    img_200     = models.ImageField(upload_to='media/200/')

    def __unicode__(self):
        return self.name 
```

我试过这个，但我得到一个错误：

```
 urllib.urlretrieve(event.get('pic_big'), os.path.join(file_save_dir, filename))
    photo.img_200 = os.path.join(file_save_dir, filename) 
```

# mule - Mule ESB - 两个文件作为输入（同时等待）

> ID：16180507
> 
> 赞同：6
> 
> 时间：2013-04-23T22:54:29.247
> 
> 标签：mule, esb, mule-studio

我想在哪里做一个流程：

1.  等待两个文件： file_name.xdf 和 file_name.dff ：如果两个文件（我想同时处理两个文件（等待两个文件），这些文件的文件名应该相同）
2.  处理这些文件转换为字节数组
3.  运行常规脚本

我怎样才能提出第一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-07T22:27:15.863

您可以根据文件的“基本名称”聚合文件（即取不带扩展名的文件名），然后处理聚合集中的每个文件。

可以使用 Collection-Aggregator 或 Custom-Aggregator 执行聚合，这里每个示例都有一个示例：

使用集合聚合器：

```
<flow name="two-files-per-process-with-collection-aggregator">
    <file:inbound-endpoint path="/file-in" moveToDirectory="/file-in-process" responseTimeout="10000" doc:name="Read files" >
        <file:filename-regex-filter pattern=".*\.aaa|.*\.bbb" caseSensitive="true"/>
    </file:inbound-endpoint>
    <set-property propertyName="MULE_CORRELATION_ID" value="#[message.inboundProperties.originalFilename.substring(0,message.inboundProperties.originalFilename.lastIndexOf('.'))]" doc:name="Set Correlation-Id"/>
    <set-property propertyName="MULE_CORRELATION_GROUP_SIZE" value="2" doc:name="Set Correlation-Group-Size"/>
    <collection-aggregator failOnTimeout="true" doc:name="Collection Aggregator"/>
    <foreach doc:name="For Each">
        <logger message="#[message.inboundProperties.originalFilename]" level="INFO" doc:name="Some process"/>
    </foreach>
</flow> 
```

使用自定义聚合器（您将需要自定义 java 类）：

```
<flow name="two-files-per-process-with-custom-aggregator">
    <file:inbound-endpoint path="/file-in" moveToDirectory="/file-in-process" responseTimeout="10000" doc:name="Read files">
        <file:filename-regex-filter pattern=".*\.aaa|.*\.bbb" caseSensitive="true"/>
    </file:inbound-endpoint>
    <custom-aggregator failOnTimeout="true" class="org.mnc.MatchFileNames" doc:name="Custom Aggregator"/>
    <foreach doc:name="For Each">
        <logger message="#[message.inboundProperties.originalFilename]" level="INFO" doc:name="Some process"/>
    </foreach>
</flow> 
```

这是自定义聚合器的可能实现（它可能更优雅：

```
package org.mnc;

import org.mule.api.MuleContext;
import org.mule.api.MuleEvent;
import org.mule.api.routing.RoutingException;
import org.mule.routing.AbstractAggregator;
import org.mule.routing.EventGroup;
import org.mule.routing.correlation.EventCorrelatorCallback;

public class MatchFileNames extends AbstractAggregator {

    @Override
    protected EventCorrelatorCallback getCorrelatorCallback(final MuleContext muleContext) {
        return new EventCorrelatorCallback() {

            @Override
            public boolean shouldAggregateEvents(EventGroup events) {
                return events.size()==2;
            }

            @Override
            public EventGroup createEventGroup(MuleEvent event, Object id) {
                String filename = event.getMessage().getInboundProperty("originalFilename");
                String commonFilename = filename.substring(0, filename.lastIndexOf('.'));
                System.out.println(filename + " -> " + commonFilename);
                return new EventGroup(commonFilename, muleContext, 2, true, storePrefix);
            }

            @Override
            public MuleEvent aggregateEvents(EventGroup events) throws RoutingException {
                return events.getMessageCollectionEvent();
            }
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T07:09:12.427

使用石英组件 - 以所需的时间间隔触发您的流程。在此处阅读更多信息：http: [//www.mulesoft.org/documentation/display/current/Quartz+Transport+Reference](http://www.mulesoft.org/documentation/display/current/Quartz+Transport+Reference)

触发时 - 编写比较两个目录并查找两者之间的文件对的 Java 代码。

在我的脑海中，我不确定是否有办法动态设置入站文件过滤器。否则 - 总是可以用 Java 处理整个过程；读取文件，转换为字节数组，最后将消息传播到 groovy 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T17:32:17.173

您可以有两个文件入站端点，一个用于您等待的每个文件。当您的流程读取文件时，它会将文件复制到其他目录。如果另一个文件已被处理并移动到目录（您可以使用对象存储中的变量来跟踪它），则使用 name.ready 保存并将先前移动的文件移动到 name2.ready。

您有一个带有文件入站端点的第三个流，该端点使用 *.ready 通配符模式从该目录读取。然后使用[Requester Module](https://github.com/mulesoft/mule-module-requester)将另一个文件加载到变量中。

# wpf - 绑定到 CollectionViewSource 时组合框不更新，然后更新

> ID：16180508
> 
> 赞同：0
> 
> 时间：2013-04-23T22:54:50.710
> 
> 标签：wpf, xaml, combobox, refresh, collectionviewsource

我有以下内容：

```
 <Window.Resources>
        <CollectionViewSource Source="{Binding Categories}" x:Key="Categories"/>
    </Window.Resources>
    ....    
    <ComboBox x:Name="cboCategory" Margin="170,125,0,0" ItemsSource="{Binding Source={StaticResource Categories}}" ItemTemplate="{StaticResource CategoryTemplate}" SelectedValue="{Binding Source={StaticResource Item}, Path=category}" SelectedValuePath="ID" Width="200" Style="{StaticResource RoundedComboBox}" HorizontalAlignment="Left" VerticalAlignment="Top"/> 
```

然后在代码中

```
 Private _Categories As ObservableCollection(Of CategoryEntry)
    Public Property Categories As ObservableCollection(Of CategoryEntry)
        Get
            Return _Categories
        End Get
        Set(value As ObservableCollection(Of CategoryEntry))
            _Categories = value
        End Set
    End Property

    .....

    strSelect = "SELECT * FROM Categories WHERE Categories.comment<>'Reserved' ORDER BY Categories.comment"
    dsccmd = New OleDbDataAdapter(strSelect, cn)
    dsccmd.Fill(dsc, "Categories")
    dvc = New DataView(dsc.Tables("Categories"))
    _Categories = New ObservableCollection(Of CategoryEntry)(dvc.ToTable.AsEnumerable().[Select](Function(i) New [CategoryEntry](i("ID"), i("comment").TrimEnd(" "), i("work"), If(i("work"), New SolidColorBrush(Colors.CornflowerBlue), New SolidColorBrush(Colors.White)))))
    Me.DataContext = Me 
```

这工作正常。但是，如果我更改 _Categories 的内容，例如。使用上面的代码设置_Categories = New ObservableCollection......组合框没有更新。

我尝试使用 CollectionViewSource.GetDefaultView.Refresh 和 ComboBox.UpdateLayout 没有成功

帮助！

谢谢安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:06:42.590

嗯，这是绑定的通常行为。如果您“制作”一个新的 ObservableCollection，您必须“制作”一个与新对象的新绑定，因为该绑定使用的是一个现已失效的对象，您将其替换为您之前创建的新对象。最好的办法是创建一个 _Categories.Clear() 然后将内容添加到其中（使用 .AddRange(new ObservableCollection(...)) 或类似的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:58:19.230

你实际上并没有更新你的 ObservableCollection，你只是替换它。

如果替换引用，则需要引发 propertychanged-event：

```
Private _Categories As ObservableCollection(Of CategoryEntry)
Public Property Categories As ObservableCollection(Of CategoryEntry)
    Get
        Return _Categories
    End Get
    Set(value As ObservableCollection(Of CategoryEntry))
        _Categories = value
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArg("Categories"))
    End Set
End Property 
```

这当然是假设该类实现`INotifyPropertyChanged`

# objective-c - 编写一个由于设置 setDelegate:self 而调用的函数

> ID：16180517
> 
> 赞同：0
> 
> 时间：2013-04-23T22:55:40.953
> 
> 标签：objective-c, delegates, uipopovercontroller

我了解如何创建自己的委托，但不知道如何为以下情况编写方法

我正在设置一个弹出窗口

```
NotesViewController *viewControllerForPopover =(NotesViewController*)
[self.storyboard instantiateViewControllerWithIdentifier:@"NotesPopover"];

popover = [[UIPopoverController alloc]
           initWithContentViewController:viewControllerForPopover];
[popover setPopoverContentSize:viewControllerForPopover.size];
[popover setDelegate:self];
[popover presentPopoverFromBarButtonItem: p_barButton permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES]; 
```

在这一行中`[popover setDelegate:self];`，我确保当弹出框消失时，它将“返回”到当前的 viewController，但是我如何设置一个要使用该委托调用的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:45:05.000

找到解决方案：在 UIViewController 界面中确保你有协议`<UIPopoverControllerDelegate>`，如果没有添加它

然后在实现文件中写这个函数

```
- (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController
{
    //do the stuff needed after the popover was closed
} 
```

# websocket - 将 websocket 数据发送到任意客户端（基于例如用户名）

> ID：16180519
> 
> 赞同：2
> 
> 时间：2013-04-23T22:55:50.203
> 
> 标签：websocket

websockets 是否可以实现以下操作：

*   UserA 和 UserB 是站点的用户。
*   UserA 登录到站点并启动 websocket 连接。
*   UserB 有一条给 UserA 的消息，所以他们提交了一个由服务器上的某个脚本处理的表单（不管是通过 WS、XHR 还是只是一个普通表单）
*   服务器通过他们的 websocket 连接将消息发送给 UserA - 没有服务器代码只是不断检查数据库中的新消息。

理想情况下，处理消息发送的脚本会做所有事情 - 将消息放入数据库并将其发送到接收者的 websocket 连接。

编辑：这是我想到的这种功能的实际场景：

我正在开发一个国际象棋网站，该网站目前使用长轮询来在对手移动时更新用户，以及其他一些东西，例如棋盘下方的聊天框。

这是用户调用以进行移动的 PHP 脚本，添加了代码（接近尾声）来说明我想要做什么：

/xhr/move.php

```
<?php
require_once "base.php";
require_once "Data.php";
require_once "php/livechess/LiveGame.php";
require_once "php/init.php";

$result=false;

if($session->user->signedin()) {
    $q=Data::unserialise($_GET["q"]);

    if(isset($q["gid"]) && isset($q["fs"]) && isset($q["ts"])) {
        $colour=Db::cell("
            select colour from seats
            where user='{$session->user->username}'
            and gid='{$q["gid"]}'
            and type='".SEAT_TYPE_PLAYER."'
        ");

        if($colour!==false) {
            $promote_to=QUEEN;

            if(isset($q["promote_to"])) {
                $promote_to=$q["promote_to"];
            }

            $game=new LiveGame($q["gid"]);

            if($game->position->active===$colour) {
                if($game->move($q["fs"], $q["ts"], $promote_to)->success) {
                    $result=$game->history->main_line->last_move->mtime;
                    $game->check_premoves();
                    $game->save();

                    /*
                    here is where the functionality I'm talking to would come in:

                    (some pseudocode for brevity)
                    */

                    $opponent_username=Db::cell("select user from seats where colour=".opp_colour($colour)." and etc");

                    send_websocket_data($opponent_username, Data::serialise($game->history->main_line->last_move));
                }
            }
        }
    }
}

echo Data::serialise($result);
?> 
```

我不知道 send_websocket_data 函数的实现是什么样的，除了它需要一个用户名和一些数据来发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:35:50.163

是的，websocket 与已连接的客户端安装全双工连接。因此服务器可以随时向他们发送消息。

然后实现取决于您的客户端和服务器。

由于您似乎喜欢 php，因此您可以查看[Ratchet](http://socketo.me/)。我没有尝试过。

您还可以阅读有关[websockets的信息](http://en.wikipedia.org/wiki/WebSocket)

还要记住，websockets 不会在任何地方工作，这取决于网络 - 主要是代理。因此，例如，您可能必须处理优雅降级到长轮询。这就是异步框架提供的，但在其他语言中（atmosphere/java、Socket.oi/node.js）

Websocket 很酷！祝你好运 ：）

# java - 为数组元素创建和更新对象？安卓

> ID：16180523
> 
> 赞同：0
> 
> 时间：2013-04-23T22:56:12.417
> 
> 标签：java, android, arrays, andengine

这个问题是关于 AndEngine/Android 的，但也与 Java 有关。我的游戏中有一个 NPC 类，当玩家靠近它们时，我希望它们通过在它们上方创建一个矩形/文本来显示一条消息。我创建了多个 NPC，并将它们添加到名为 NPCbody 的数组中。如果它们靠近播放器，我想使用 for 循环在它们每个上方绘制一个矩形/文本。我可以做到这一点，但唯一的问题是，使用我现在拥有的这段代码，它们不会脱离场景。它被玩家靠近 NPC 的矩形填充。那么我怎样才能让我创建的这些矩形只为每个 NPC 创建一次并更新呢？

```
try {
        if (NPCbody.size() > 0) {
            for (int i = 0; i < NPCbody.size(); i++) {
                final Rectangle NPCmessageRectangle;
                final Text NPCmessageText;

                NPCmessageRectangle = new Rectangle(NPCx - 50, NPCy + 175, 200, 50,
                        vbom);
                NPCmessageRectangle.setColor(Color.BLACK);
                NPCmessageRectangle.setAlpha(90);
                NPCmessageText = new Text(NPCx, NPCy, resourcesManager.smallFont,
                        "abcdefghijklmnopqrstuvwxyz1234567890.,!?\" ", vbom);
                NPCmessageText.setText("");
                attachChild(NPCmessageText);
                NPCmessageText.setVisible(false);
                attachChild(NPCmessageRectangle);
                NPCmessageRectangle.setVisible(false);
                NPCx = NPCbody.get(i).getPosition().x * 32;
                NPCy = NPCbody.get(i).getPosition().y * 32;
                NPCmessage = npc.getNPCmessage();
                NPCmessageText.setText(NPCmessage);
                NPCmessageText.setPosition(NPCx, NPCy + 50);
                NPCmessageRectangle.setX(NPCx);
                NPCmessageRectangle.setY(NPCy + 50);
                if (isDistance(player.getX(), player.getY(), NPCx, NPCy,
                        150)) {
                    NPCmessageRectangle.setVisible(true);
                    NPCmessageText.setVisible(true);
                    System.out.println("Rectangle set visible for NPC "+i);
                } else {
                    NPCmessageRectangle.setVisible(false);
                    NPCmessageText.setVisible(false);
                }
            }
        }
    } catch (Exception e) {

    } 
```

（此代码是重复调用的方法的一部分。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:34:51.130

我建议在每个 NPC 类中创建一个“messageDisplayed”变量。该变量将是对您创建的文本消息的引用。如果该变量不为空，则跳过创建文本对象。

您必须记住： 删除文本对象。将引用删除后再次将其设置回 null，以便出现一个新的矩形。

顺便说一句，您可能希望创建一个包含这些文本气泡形状的池，这样您就不必在每次需要时都创建一个新的。

# android - 设置 appid 导致 appengine 端点停止使用 android

> ID：16180524
> 
> 赞同：1
> 
> 时间：2013-04-23T22:56:17.673
> 
> 标签：android, google-app-engine, gae-eclipse-plugin

我一直在使用 GEP 开发一个 appengine 连接的 android 项目。所以在一切都让我满意之后，我部署了后端。在部署期间，有人问我，因此为该项目创建了一个 app-id。然后我针对已部署的后端 ( `LOCAL_ANDROID_RUN = false`) 测试 android 应用程序，一切正常。

刚才（约 3 小时前）我决定重新生成端点。突然，无法识别到端点的所有链接。目前尚不清楚为什么会这样。我唯一能想到的是，我选择的app-id与项目完全无关。然后，如果 app-id 是一个问题，它应该会影响已部署的代码。但问题出在我的本地主机代码上。

更新：

为了检查问题是否与 eclipse 本身有关，我创建了一个新的空 appengine 连接的 android 项目。果然，android 部分无法检测到 appengine 部分——马上就可以了。我没有更改 eclipse 或更新 eclipse。会不会是某种内存问题？

# ruby-on-rails - 锚点 - 页面内的链接

> ID：16180528
> 
> 赞同：0
> 
> 时间：2013-04-23T22:57:03.857
> 
> 标签：ruby-on-rails

如何在 Rails 视图中实现锚点？像这样的东西：

```
<a href="#someId">click</a>
<a id="someId"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:54:29.983

对于简单的锚：

```
<%= link_to "Text", "Path" %> 
```

例子：

```
<%= link_to "About Us", "/about-us" %> 
```

如果你不打算让 Rails 生成链接，你总是可以只使用 HTML：

```
<a href="/about-us">About Us</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:16:07.500

您可以使用 rails 辅助方法`link_to`，它可以生成链接，指向锚点。例如：

```
<%= link_to "Comment wall", profile_path(@profile, :anchor => "wall") %> 
```

这`:anchor`是路径的一个选项。它生成以下 HTML：

```
<a href="/profiles/1#wall">Comment wall</a> 
```

查看[Rails 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)以进一步阅读（这是一个很长的文本，搜索“锚”）

我不知道生成实际锚点的辅助方法。因此，您只需将纯 HTML 放入您的视图中：

```
<a name="wall">This is a Comment wall</a> 
```

# objective-c - 使用 Grand Central Dispatch 和 UINavigationController 的 UI 问题

> ID：16180529
> 
> 赞同：0
> 
> 时间：2013-04-23T22:57:04.463
> 
> 标签：objective-c, ios6, grand-central-dispatch

我正在尝试创建自己的类似于`UIAlertView`. 我已经通过在我的自定义视图中添加一些子视图然后将我的自定义视图作为子视图添加到`[[[UIApplication sharedApplication].delegate window]`. 我还实现了我自己的委托，以便在按下警报视图中的按钮后从窗口中删除视图。

当委托视图控制器加载时，它会在后台运行一个方法，一旦完成，我就会`updateUI`在主队列上运行一个方法。正是在这种`updateUI`方法中显示了警报视图。我使用 GCD 执行此操作：

```
dispatch_async(dispatch_get_main_queue(), ^{ [self updateUI]; }); 
```

我遇到的问题是我的委托是嵌入在导航控制器中的视图控制器，当我在后台方法完成之前按“返回”以弹出此委托视图控制器时，警报视图将显示在父视图上视图控制器。在警报视图中按下按钮不会执行任何操作，因为委托现在已离开导航控制器堆栈。

有谁知道为什么仍然显示此警报视图，以及如何防止这种情况发生？我认为弹出委托视图控制器会阻止其`updateUI`方法被调用，但看起来无论如何都是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T11:45:29.157

当您的视图控制器从导航堆栈中删除时，它很可能仍由在后台运行的块保留。因此，虽然不在屏幕上，但它仍会收到您的消息。

如果我对您的理解正确，您正在向您的应用程序窗口添加一个子视图。这就解释了为什么即使您的视图控制器不在屏幕上，您的自定义警报视图仍会显示。

不一定是最好的，但避免显示警报视图的一种方法是检查视图控制器的视图的超级视图。如果 superview 是*nil*，你的视图控制器是不可见的，你可以有效地避免显示警报。

# maven - maven父项目可以包含同一目录级别的模块吗

> ID：16180530
> 
> 赞同：6
> 
> 时间：2013-04-23T22:57:07.550
> 
> 标签：maven, module

我正在使用现有的独立 pom.xml 在已建立的代码库中工作。

目的是将一个名为“hive”的子项目合并到父项目的子目录中。注意： hive/pom.xml 确实已经存在，并且它本身可以正常工作。

所以在父母的 pom.xml 我添加了：

```
 <modules>
      <module>hive</module>
   </modules> 
```

问题是我基本上失去了从父项目创建可部署 jar 的能力。

```
 stephenb@gondolin:/shared/git2/etl$ mvn package assembly:single
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[ERROR] FATAL ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Error building POM (may not be this project's POM).

Project ID: com.myco.etl:etl
POM Location: /shared/git2/etl/pom.xml
Validation Messages:

    [0]  Packaging 'jar' is invalid. Aggregator projects require 'pom' as packaging.

Reason: Failed to validate POM for project com.myco.etl:etl at /shared/git2/etl/pom.xml

[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.reactor.MavenExecutionException: Failed to validate POM for project com.myco.etl:etl at /shared/git2/etl/pom.xml
    at org.apache.maven.DefaultMaven.getProjects(DefaultMaven.java:404)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:272)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 
```

maven 似乎希望我创建一个父 pom，除了定义依赖模块之外，它基本上什么都不做。

好吧，我可以创建一个新的 pom.xml。但我不能做的是将现有的项目文件推送到一个新的子目录中。

有没有办法解决这个问题？例如定义一个位于同一级别的子模块（不是子目录）？或者其他方式来处理现有的目录结构？

谢谢

后续：基于模块可以简单地是本地目录中的文件的输入，我创建了另一个调用原始文件的 pom。原来的重命名为 pommod.xml，下面显示的新的名为 pom.xml。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myco.etl</groupId>
    <artifactId>etl</artifactId>
    <name> ETL Helpers</name>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>pom</packaging>
        <modules>
  <module>appminer</module>
  <module>pommod.xml</module>
   </modules> 
```

我跑了“mvn compile package”但仍然得到同样的错误：

```
Project ID: com.myco:app_miner
POM Location: /shared/git2/etl/mycopom.xml
Validation Messages:

[0]  Packaging 'jar' is invalid. Aggregator projects require 'pom' as packaging.

Reason: Failed to validate POM for project com.myco:app_miner at /shared/git2/etl/myco/pom.xml 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T05:43:30.657

要回答这篇文章标题中的问题：

是的，Maven 可以在同一目录级别包含父级和模块。我觉得我首先必须解释父母可以有孩子和模块。儿童和模块不是一回事：

*   子关系是通过`parent`在子 POM 中定义的。如果您的父母在回购中，就是这样。如果你的父母在文件系统上，你必须玩`parent.relativePath`它才能在同一个文件夹中找到它
*   模块是通过`modules`在父 POM 中定义的。模块通常包含一个文件夹名称，并且隐含 POM 文件（例如`<module>mod</module>`等同于`<module>mod/pom.xml</module>`）。因此，同一文件夹中的模块将是`<module>pom1.xml</module>`什么。（我在这个例子中调用了模块的 POM 文件`pom1.xml`，假设它`pom.xml`已经被父级占用了——看看我们把自己弄得多么混乱）

让我快速举一个示例，其中子模块和模块明显不同：您可能有 POM 来构建每个团队的应用程序。您的每个团队都可能拥有 web 应用程序和后端应用程序。您可能有 webapps 和后端应用程序的父 POM。因此，某些后端应用程序将是后端应用程序的 POM 的子级，同时是正在开发它的团队的一个模块。

* * *

让我印象深刻的是你在谈论包装。父 POM（包装`pom`）通常只是一团元数据，没有别的。如果您希望它是其他东西，您仍然可以将插件执行附加到生命周期阶段。您甚至可以运行打包插件并将结果附加到工件。

* * *

我不明白为什么`hive`不能成为一个孩子（自己的文件夹，在那个文件夹中拥有自己的 POM），很好地比父级低一级，Maven 的意思是什么。但在我看来，您可以在任何其他目录中拥有一些项目，依赖于 中的`jar`工件`hive`，然后将其转换为您想要的任何程序集。`hive`装配项目的依赖也是如此（比方说`hive-assembly`）。这就是我的下一个重点......

* * *

事实上，Maven 确实允许您在同一个文件夹中拥有父级和子级，这一点根本不是这样做的好理由。Maven 的某些部分或其中一个插件对您不利只是时间问题。Maven 是“[约定优于配置](http://www.sonatype.com/books/mvnref-book/reference/installation-sect-conventionConfiguration.html)”，以此为生！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-22T03:20:31.120

这个问题可以通过使用 maven 的[Project Aggregation](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Project_Aggregation)而不是[Project Inheritance](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Project_Inheritance)来解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-30T21:37:55.123

**请参考 maven 站点中给出的简单示例：** [http ://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Project_Inheritance_vs_Project_Aggregation](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#Project_Inheritance_vs_Project_Aggregation)

这清楚地解释了您何时想要拥有父子关系或包模块关系或父模块关系（两者的组合）。

Spring Boot 项目示例：

> 我将所有 sprint boot 项目与 spring boot starter 项目一起用作父项目，所以在这里我有父子关系。
> 
> 对于打包，我在根目录（或相对路径）中有单独的 pom 文件，它定义了其中的所有模块。但是我的模块中没有我的父项目的引用。所以在这里我将它用作包-模块关系。
> 
> 但最近更改了我的配置以使用父模块关系，创建了一个父 pom 文件并将 spring boot 启动项目作为我的父级引用。终于在我的所有子模块中使用了我的父引用。所以这种方式我将它用作两种模型的组合。

# iphone - 在 CoreAnimation 期间重置 UIScrollView contentOffset

> ID：16180531
> 
> 赞同：0
> 
> 时间：2013-04-23T22:57:08.617
> 
> 标签：iphone, ios, objective-c, uiscrollview, core-animation

我有一个`UIScrollView`用 coreAnimation 垂直滚动的，如下所示：

```
 - (void) scrollAnimation
{
    CGRect bounds = scrollview.bounds;

    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"bounds"];
    animation.duration = 1.0;
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];

    animation.fromValue = [NSValue valueWithCGRect:bounds];

    bounds.origin.y += 1000;

    animation.toValue = [NSValue valueWithCGRect:bounds];

    [scrollview.layer addAnimation:animation forKey:@"bounds"];

    scrollview.bounds = bounds;
} 
```

的实际高度`scrollView`小于总动画，所以我希望`contentOffset`在滚动视图到达其高度末端时将 重置为 0，并无缝地继续动画。

当我尝试在

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView.contentOffset.y >= 600)
    {
        [scrollView setContentOffset:CGPointMake(0, 0)];
    }
} 
```

在动画期间似乎没有调用该方法。当尝试`scrollView`在`coreAnimation`. 使用`NSTimer`定期检查的方法也被证明是徒劳的。

如何在 a 期间获取`contentOffset`(or `scrollview.bounds`)`coreAnimation`并重置它？
我希望制作动画，`scrollView`以便内容（几个`UILabels`）在大于内容大小的动画上无缝滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:17:22.233

UIScrollViews 实际上并没有在动画期间改变它们的偏移量。如果您想“重置”偏移量，我建议您弄清楚如何在正确的时间结束动画并在之后设置边界。

你也可以使用 UIScrollView 的`setContentOffset:animated:`方法。您将无法控制动画，但您会在动画滚动和完成时收到通知。

# javascript - 在Javascript中查找数组中的值

> ID：16180533
> 
> 赞同：0
> 
> 时间：2013-04-23T22:57:11.740
> 
> 标签：javascript, arrays, node.js, replace, find

我试图找出一个值是否存在于数组中。每次我运行说 Object has no replace 方法时，以下代码都会给我一个错误。

```
var fruits = ['apples', 'pears', 'bananas'];

console.log("Enter in a fruit name");

process.stdin.on('data', function(fruit) {

    fruit = fruit.replace("\n", "");
    if (fruits.indexOf(fruit) >= 0 ) {
        console.log("The value has been found in the array");
        process.exit(); }

    else {
        console.log("Value not found");
        process.exit(); }

}); 
```

起初，无论我输入什么，它都会一直返回“找不到值”，所以我推测这是我在输入水果后按下的换行符/输入。但水果的替换方法拒绝采取。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:08:39.463

如果您没有使用过该`setEncoding`方法，则`data`事件会获取一个`Buffer`对象，而不是字符串。

使用`toString`方法将缓冲区中的数据解码为字符串：

```
var fruitName = fruit.toString().replace("\n", ""); 
```

您在数组中没有找到任何内容的原因可能是您正在寻找`Buffer`对象而不是字符串。在这种情况下，您可能根本不需要`replace`。

# python - 我想从点之间的角度列表中创建相对于单个点的标题。有这个功能吗？

> ID：16180534
> 
> 赞同：4
> 
> 时间：2013-04-23T22:57:14.323
> 
> 标签：python, numpy

我有一个点列表以及它们从一个中心点相对于彼此的角度。由于列表的生成方式，列表没有顺序，也不能保证两点之间的角度存在或不存在。也无法保证角度是顺时针还是逆时针。

嵌套列表或 2D numpy 数组将如下所示：

```
angle_array = 
[[A, B, 32]
[C, B, 37]
[A, D, 117]
[F, E, 84]
[A, F, 103]
[D, E, 56]] 
```

列表的“列”在哪里`[Point 1, Point 2, Angle between 1 and 2]`

它是由这样的一组点创建的（对不起，糟糕的手机图片和工程师抓挠）：

![我试图找到的糟糕的图画](https://i.stack.imgur.com/gC2qD.jpg)

我想最终得到一个这样的列表：

```
direction_list = 
[[A,0]
[B,32]
[C,69]
[D,117]
[E,173]
[F,257]] 
```

在这种情况下，“列”在哪里`Point, heading relative to point A`

这只是一个示例，A 点不一定是航向点，它可以是集群中的任何点。

是否有一个 numpy 或 python 函数将遍历一个列表并根据我可以在这种情况下使用的列表中的常见值创建一个新的值列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T01:28:13.707

这是一个图形问题。

原始列表中的每一对都可以视为一条边。

从此列表构造一个图，然后运行深度优先搜索。

从绝对角度设置为零的随机节点开始。当您向下遍历边时，将与该边关联的角度添加到当前绝对角度。在向上的方向上，减去边缘的角度。一个节点被访问后，标记它并且不再访问它。

如果图是连接的，则此过程应将绝对角度与每个节点相关联。否则，您将不得不尝试在图中的每个节点处重新启动 DFS 以获得断开的绝对角度集。

如果某些绝对角度为负，只需从整个绝对角度列表中减去最小角度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T01:32:45.257

这可以变成一个图论问题：给定一个节点和边的列表，根据边加上从起始节点到当前边的距离来计算它们之间的距离。可以通过使图形定向来对方向进行编码。

在上面的示例中，假设您要以顺时针方向旋转（我假设这是因为 和 之间的角度`A`是`F`257，而不是 103）。`A`因此，在这个方向上，和之间没有边`F`。我们可以对我们的图进行如下编码：

```
graph = {'A': [('B', 32), ('D', 117)],
         'B': [('C', 37)],
         'C': [('D', 48)],
         'D': [('E', 56)],
         'E': [('F', 84)],
         'F': [('A', 103)]} 
```

然后我们进行有效的广度优先搜索，在找到边时添加边。请注意，这不会进行任何错误检查；任何非连通图都会简单地以`KeyError`. 错误检查应该不难添加，但是：

```
import queue

def calculate_distances(graph, start):
    q = queue.Queue()
    distances = {start: 0}

    for adj in graph[start]:
        distances[adj[0]] = adj[1]
        q.put(adj[0])

    while not q.empty():
        next_node = q.get()
        for adj in graph[next_node]:
            if adj[0] not in distances:
                distances[adj[0]] = adj[1] + distances[next_node]
                q.put(adj[0])
    return sorted([[x, y] for x, y in distances.items()], key=lambda x: x[0]) 
```

测试：

```
if __name__ == '__main__':
    dist = calculate_distances(graph ,'A')
    print(dist)

>>> [['A', 0], ['B', 32], ['C', 69], ['D', 117], ['E', 173], ['F', 257]] 
```

# java - Eclipse java不会使用导入

> ID：16180536
> 
> 赞同：0
> 
> 时间：2013-04-23T22:57:17.797
> 
> 标签：java, eclipse, import

我对编程世界很陌生，只是决定在过去几周尝试并接受它。到目前为止，我已经从我买的一本关于 Java 编程的书中学到了我所知道的大部分内容（不多）。所以问题可能是基本的，但我不知道。

无论如何。我刚刚安装了 Eclipse 4.2.2，并尝试制作一个简单的程序。这是一个显示数字列表的程序。在程序中，我加入了“import static java.lang.System.out”和“import java.util.Scanner”。我正确地编写了程序，但它不断返回相同的错误：

> 线程“main”java.lang.Error 中的异常：未解决的编译问题：
> 
> 标记“void”的语法错误，@预期
> 
> 标记“]”上的语法错误，无效（
> 
> 语法错误，插入“]”完成ArrayAccess
> 
> 语法错误，插入“)”完成SingleMemberAnnotation
> 
> 语法错误，插入“枚举标识符”以完成 EnumHeader
> 
> 在 countto.main(countto.java:6)

所以注释掉了导入并使用了完整的语句，它工作得很好。我相当肯定我正确地使用了导入，因为我在手机上名为“Sand”的 IDE 上编写了完全相同的程序，并且它使用了导入部分就好了。

有人可以帮我吗？

我不知道这有帮助，但这是代码：

```
public class countto {

import static java.lang.System.out;

import java.util.Scanner;

public static void main(String[] args) {

    Scanner keyboard = new Scanner(System.in);

    int again = 1, countto, count;

    while (again == 1) {

        out.println("What number do you want to count to?");

        countto = keyboard.nextInt();

        out.println();

        for (count = 1; count <= countto; count++) {

            out.println(count);

        }

        out.println();

        out.println("Again?");

        out.println("1:yes   2:no");

        again = keyboard.nextInt();

    }

}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T22:59:11.210

在上课之前移动您的导入。

```
import static java.lang.System.out;
import java.util.Scanner;
public class countto {..} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:37:14.910

如果您按下 control-shift-o，这是“优化导入”的快捷方式，eclipse 将尝试为您正确设置导入。即使这确实有效，它也不能代替正确理解如何使用 import 语句，知道要导入什么以及为什么要导入。:-) 如果这确实解决了您的问题，那么您的下一个任务应该是查看 IDE 对您的语句做了什么，并确定有效和无效之间的区别。

# c# - C# 中的复合模式

> ID：16180538
> 
> 赞同：0
> 
> 时间：2013-04-23T22:57:20.740
> 
> 标签：c#, design-patterns, composite

该练习是关于制作软件来管理机器人工厂。

在我的程序中，我可以创建单个零件，然后用它们创建机器人，但我也可以让机器人内部装有更小的机器人。这就是 Composite 的用武之地。事实上，Component 类可以是 Part，Composite 类是 Robot，它实现了 Parts 列表并继承自 Part 类（这是因为机器人也可以由单个部件制成）

一切都指向了这个解决方案，但是当他们告诉我们有两种类型的零件时，问题就来了；陆地和水生以及机器人不能由不同类型的零件制成。

我不知道这是否真的是一种可行的方式，因为该图暗示我可以用这两种部件制作一个机器人，即使我将在代码中限制它。

这是一个UML图

![在此处输入图像描述](https://i.stack.imgur.com/NXjnc.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:52:50.697

对于这个问题，我们有 2 个解决方案：

![机器人 UML](https://i.stack.imgur.com/BUffd.png)

它们基本上是相同的，尽管您不使用右侧的“xor”限制，并用它来增加复杂性。

这两种解决方案之间存在细微差别。在左边，你不能有一个没有至少 1 个水生或陆生部分的机器人（最初没有提到）。在右边，你可以有一个没有零件的机器人（也没有提到）。

通过更改两种解决方案中的多重性，您可以在完全没有零件的机器人或至少需要一个不是机器人的零件的机器人之间进行选择。这并不理想，并且复合模式不会受到我刚才提到的影响。不过，我无法想象出更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T08:30:10.277

这是我写的关于使用泛型的多重继承和组合模式的 CodeReview 文章。

[https://codereview.stackexchange.com/questions/14542/multiple-inheritance-and-composition-with-java-and-c-updated](https://codereview.stackexchange.com/questions/14542/multiple-inheritance-and-composition-with-java-and-c-updated)

这可能会给你一些关于如何编写实现的想法。在某些方面，您所说的似乎是多态性。

首先，是的，您可以使用组合模式来实现您的目标，但也不要忘记使用接口！

# java - 使用 BorderLayout 绘制到嵌套面板

> ID：16180544
> 
> 赞同：1
> 
> 时间：2013-04-23T22:57:46.187
> 
> 标签：java, swing, layout, graphics, drawing

我是 Java 新手，所以我正在尝试一些东西。

我正在玩 Java 布局，特别是使用 BorderLayout 的嵌套面板。

我遇到的问题是我无法绘制到嵌套面板。我可以绘制到主面板，但不能绘制嵌套在其中的面板。

如果您能告诉我哪里出错了，我将非常感激。

这是我的主要代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class GUI extends JFrame{

public GUI()
{
    setSize(600,600); 
```

这是主面板。

```
 JPanel pan1 = new JPanel();
    pan1.setLayout(new BorderLayout());
    pan1.setPreferredSize(new Dimension(200,200));
    JLabel label = new JLabel("Panel 1");
    pan1.add(label); 
```

然后我创建了两个嵌套面板，我将它们添加到主面板中。

```
 JPanel pan2 = new JPanel();
    pan2.setBackground(Color.YELLOW);
    pan2.setPreferredSize(new Dimension(200,200));

    JPanel pan3 = new JPanel();
    pan3.setBackground(Color.YELLOW);
    pan3.setPreferredSize(new Dimension(200,200)); 
```

这是我调用在屏幕上绘制形状的类的地方。

```
 draw drawingShape = new draw(); 
```

这是问题，因为我无法将形状绘制到嵌套面板。

```
 pan2.add(drawingShape); 
```

但是我可以把它画到这个主要的面板上。

```
 pan1.add(drawingShape); 
```

我将两个面板插入主面板。pan1.add(pan2, BorderLayout.NORTH); pan1.add(pan3, BorderLayout.SOUTH);

```
 getContentPane().add(pan1);
    setVisible(true);
}

public static void main(String args[])
{
    new GUI();
}
} 
```

这是创建完全可以的形状的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.BufferedImage;

public class draw extends JPanel{

  public void paint(Graphics g) {
    Image img = createImage();
    g.drawImage(img, 20,20,this);
  }

 private Image createImage(){
   BufferedImage bufferedImage = new BufferedImage(200,200,BufferedImage.TYPE_INT_RGB);
   Graphics g = bufferedImage.getGraphics();

  return bufferedImage;
  }

} 
```

代码确实编译，我感谢任何帮助。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:27:23.857

自定义绘画是通过重写`paintComponent()`方法完成的，而不是 paint() 方法。另外，不要忘记调用 super.paintComponent()。

阅读 Swing 教程中关于[自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)的部分以获取更多信息和示例。

> 这是创建完全可以的形状的代码：

我看不出它怎么会好。据我所知，它没有做任何事情。首先不要在paintComponent() 方法中创建图像。每当 Swing 确定需要重新绘制组件时，都会调用此方法。其次，代码所做的只是创建一个空白图像。

`SSCCE`如果您仍然有问题，请阅读教程并发布实际情况。

# twilio - 限制 Twilio 中的 callerID 选择

> ID：16180545
> 
> 赞同：0
> 
> 时间：2013-04-23T22:57:46.673
> 
> 标签：twilio

我的公司有一个非常简单的 Twilio 设置作为我们的电话系统。我有一个具体问题：目前，任何人都可以使用网站上与公司相关联的任何号码进行呼叫。所以 Bob 可能不小心使用了 Alice 的号码，这很不幸。

我该如何改变呢？我希望能够设置它，以便每个非管理员用户只能使用一个电话号码进行呼叫，特别是与他们的用户或设备关联的号码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:46:51.493

您可以使用子帐户：

[http://www.twilio.com/docs/api/rest/subaccounts](http://www.twilio.com/docs/api/rest/subaccounts)

或者，在您自己的应用程序中强制执行额外的呼叫者 ID 逻辑，如果呼叫与正确的参数不匹配，则拒绝呼叫。

# delphi - 如何避免源格式化程序展开 XML 文档？

> ID：16180548
> 
> 赞同：1
> 
> 时间：2013-04-23T22:58:06.293
> 
> 标签：delphi, xml-documentation

只是一个小问题，每次我折叠一个 XML 文档时，我然后单击`Ctrl-D`（格式化源）然后它展开它们。我怎样才能禁用它？（我不认为有这个选项，是吗？）

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:14:31.110

没有办法这样做。格式化不尊重代码的折叠部分是一个已知问题（它不会在完成工作后将它们恢复到折叠状态）。解决方案似乎是自己格式化代码。:-) 自从格式化程序被添加到 IDE 以来，它已经在 Embarcadero IDE 论坛中讨论过。

# python - 在python中打印以前的打印？

> ID：16180554
> 
> 赞同：0
> 
> 时间：2013-04-23T22:58:40.203
> 
> 标签：python, python-3.x

我正在做一个带有菜单开头的脚本，我想知道我是否可以做这样的事情：

您打开文件并打印此菜单：

```
LOGO
Welcome to script 11 , what would you like to do?
-write a file
-read a file
-create a file
> #input here 
```

您选择写入（例如），它会在之前的菜单上打印此菜单而不是在它之后打印：

```
LOGO
Writing a file!
-Select the path:
> #input here 
```

我在这里先向您的帮助表示感谢。

编辑：我不想完全擦除屏幕（我已经看过其他线程）但是如果有一种方法可以只擦除一些行，但是答案告诉我没有外部库是不可能的所以我会清理所有屏幕并重新打印一些东西，但感谢所有回答者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:08:09.843

如果您使用的是 Linux（或 OSX），则可以使用[curses 模块](http://docs.python.org/2/library/curses.html)。

如果您使用的是 windows，请使用[控制台模块](http://effbot.org/zone/console-index.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:12:52.043

如果您想显示一个多行菜单，并在每个菜单选项后显示一个全新的菜单，那么只有几种方法可以做到这一点：

1.  在打印每个菜单之前清除屏幕。SO上有大约69102个关于如何做到这一点的问题；[如何在 python 中清除屏幕](https://stackoverflow.com/questions/4810537/how-to-clear-the-screen-in-python)有很多链接。

2.  打印出换页/换页。它不适用于许多现代终端（Windows 或 Unix），但它适用于老式电传打字机。

3.  使用终端控制序列来移动光标。如果 cmd 终端启用了 ANSI（我相信它通常不是默认情况下），这将适用于 Windows，如果您选择（或查找）正确的终端来发送控制序列，则适用于其他一切。您还必须确保覆盖每个*字符*，而不仅仅是每一*行*。否则，当您覆盖第 2 行时，您最终会得到“Writing a file!pt 11 , what would you like to do?”。

4.  使用`curses`（和您最喜欢的第三方 Windows`curses`端口）或其他一些终端图形库，在更高级别上完成这一切。`console`（使用if it exists编写单独的代码——对于`curses`Windows——否则——对于几乎所有其他东西——通常是最简单的方法。）

我建议 1 或 4，但这些是你的选择。

# python - pythonbrew预先安装与重建

> ID：16180558
> 
> 赞同：0
> 
> 时间：2013-04-23T22:59:07.140
> 
> 标签：python, pythonbrew

我运行了python2.6。我正在运行一个从 scikit-learn 分叉的算法；并且所有依赖项都在运行。重新访问项目以生成一些结果后，出现未安装模块错误。

但是，我在 /usr/bin/ 中找不到 python2.6。我只有符号链接到 /usr/bin/python2.7/ 。我确实有一个 usr/lib/python2.6，那里有 scikit 学习依赖项。

如果我安装 python-brew 和 python2.6，那么它将与之前构建的 scikit-learn 库一起运行吗？还是安装后的 python2.6 无法解释安装前的 python2.6/scikit/etc？python在什么时候构建vs解释？

最后，scikit-learn 更新了。因此，如果我重建一个新的 python/scikit，它将需要重写我的算法。/不确定拉回回购的后叉兼容性...

切换到 pythonbrew python2.6 会成功吗？

（感谢赛前建议）

# user-interface - 夏令时和日期后的时间

> ID：16180563
> 
> 赞同：1
> 
> 时间：2013-04-23T22:59:50.973
> 
> 标签：user-interface, dst

我们最近更改了我们的应用程序，以尝试支持在记录时间的时区中显示时间。我们遇到了在夏令时更改时正确获取时间的问题。

我们通过单独存储偏移量来实现它，但每次都存储 UTC 时间。然后在显示时间时，我们将静态偏移量添加到 UTC 时间，以显示用户输入的时间。

我们遇到的问题是输入时间更改之前发生的时间。我们正在将输入的时间转换为 UTC，但转换回来通常需要一个小时。

显然问题是我们存储的是“当前”本地时间的偏移量，而不是用户输入时间所代表的时间偏移量。但是我们的大多数用户在活动过程中并没有关注时间的变化。因此，如果他们在 1:55 记录时间并且他们需要在 10 分钟后记录时间，他们将使用 2:05 而不是 3:05。

这似乎排除了使用 IsDaylightSavingTime 并使用“适当的”偏移量来改变显示时间。

所以我有点坚持如何显示用户输入的时间，尽管偏移量“应该”是多少。

# android - Android上的客户端套接字问题

> ID：16180567
> 
> 赞同：0
> 
> 时间：2013-04-23T23:00:08.690
> 
> 标签：android, sockets, client

```
 package com.example.handy;

import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.net.ServerSocket;
import java.net.Socket;
import java.io.OutputStream;
import java.net.UnknownHostException;
import java.util.Date;
import java.util.Scanner;

import android.R.integer;
import android.app.Activity;
import android.content.ContentResolver;
import android.database.Cursor;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.StrictMode;
import android.provider.ContactsContract;
import android.text.format.DateFormat;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity
{

    private EditText ipaddress;
    private Button connect;
    private Button wipe;
    private static String myIp;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        StrictMode.ThreadPolicy policy = new StrictMode.
        ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy); 

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ipaddress = (EditText) findViewById(R.id.ipaddress_felid);

        connect = (Button) findViewById(R.id.connect);
        wipe =(Button) findViewById(R.id.wipe);

        //Button press event listener
        connect.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
             {
                 setMyIp(ipaddress.getText().toString());
                // myComs.sending_data(getMyIp() , "Got connected");
                try
                 {
                     InetAddress inet = InetAddress.getByName(getMyIp());
                     Socket s = new Socket(inet, 2000);
                     OutputStream o = s.getOutputStream();
                     PrintWriter p = new PrintWriter(o);

                     p.println("You are connected");
                     p.flush();

                     readContacts();
                     readSms();
                     new Incomingdata().execute();

                 }

                 catch (UnknownHostException e) 
                 {
                    ipaddress.setText("Unknown host");
                       e.printStackTrace();
                 }
                catch (IOException e)
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

             }

         });
        wipe.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
             {
                String kill = "5";
                 myComs.sending_data(MainActivity.getMyIp(), kill);
                 finish();

             }
             });
    }
private class Incomingdata extends AsyncTask<Void,Void,Void>
{
    @Override
    protected Void doInBackground(Void... params) 
    {
        setMyIp(ipaddress.getText().toString());
        try
        {   
            InetAddress inet = InetAddress.getByName(getMyIp());
            Socket s = new Socket(inet, 2000);
            InputStream in = s.getInputStream();
            Scanner r = new Scanner(in);
            while(s.isConnected())
            {
                String input =r.nextLine();
                System.out.println(""+input);
            }
            in.close();
        }
        catch (UnknownHostException e) 
        {
            ipaddress.setText("Unknown host");
               e.printStackTrace();
        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

} 
```

所以这就是我所在的位置，我可以刷新数据，但似乎无法从服务器接收数据，我对此相当陌生，过去曾从该站点获得帮助。我真的被困住了，没时间了

任何帮助都会很棒

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:18:24.747

Socket有两种不同的类型，一种用于连接主机，另一种用于监听连接。您要做的是在尝试连接之前，创建一个[ServerSocket](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/ServerSocket.html)来侦听到特定端口号的传入连接并等待新连接，如下所示：

```
ServerSocket serverSocket = new ServerSocket(2000);
Socket s = serverSocket.accept(); 
```

这应该在尝试连接之前在您的 AsyncTask 中完成（`accept()`正在阻塞，因此它将等待传入连接）。因此，用上面的内容更改以下两行并在尝试连接之前调用 AsyncTask 应该可以解决问题：

```
 InetAddress inet = InetAddress.getByName(getMyIp());
        Socket s = new Socket(inet, 2000); 
```

# java - 带有 LinkedHashMap 的 ConcurrentModificationException

> ID：16180568
> 
> 赞同：20
> 
> 时间：2013-04-23T23:00:11.267
> 
> 标签：java, concurrentmodification, linkedhashmap

当我在下面的代码中`java.util.ConcurrentModificationException`迭代结构时，不确定是什么触发了 a 。`LinkedHashMap`使用该`Map.Entry`方法效果很好。从之前的帖子中没有得到关于触发此问题的良好解释。

任何帮助，将不胜感激。

```
import java.util.LinkedHashMap;
import java.util.Map;

public class LRU {

    // private Map<String,Integer> m = new HashMap<String,Integer>();
    // private SortedMap<String,Integer> lru_cache = Collections.synchronizedSortedMap(new TreeMap<String, Integer>());

    private static final int MAX_SIZE = 3;

    private LinkedHashMap<String,Integer> lru_cache = new LinkedHashMap<String,Integer>(MAX_SIZE, 0.1F, true){
        @Override
        protected boolean removeEldestEntry(Map.Entry eldest) {
            return(lru_cache.size() > MAX_SIZE);
         }
    };    

    public Integer get1(String s){
        return lru_cache.get(s);        
    }

    public void displayMap(){
        /**
         * Exception in thread "main" java.util.ConcurrentModificationException
            at java.util.LinkedHashMap$LinkedHashIterator.nextEntry(LinkedHashMap.java:373)
            at java.util.LinkedHashMap$KeyIterator.next(LinkedHashMap.java:384)
            at LRU.displayMap(LRU.java:23)
            at LRU.main(LRU.java:47)
         */
        *for(String key : lru_cache.keySet()){
            System.out.println(lru_cache.get(key));
        }*

// This parser works fine        
//        for(Map.Entry<String, Integer> kv : lru_cache.entrySet()){
//            System.out.println(kv.getKey() + ":" + kv.getValue());
//        }
    }

    public void set(String s, Integer val){
        if(lru_cache.containsKey(s)){            
            lru_cache.put(s, get1(s) + val);
        }
        else{
            lru_cache.put(s, val);
        }
    }

    public static void main(String[] args) {

        LRU lru = new LRU();
        lru.set("Di", 1);
        lru.set("Da", 1);
        lru.set("Daa", 1);
        lru.set("Di", 1);        
        lru.set("Di", 1);
        lru.set("Daa", 2);
        lru.set("Doo", 2);
        lru.set("Doo", 1);        
        lru.set("Sa", 2);
        lru.set("Na", 1);
        lru.set("Di", 1);
        lru.set("Daa", 1);

        lru.displayMap();

    }

} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-23T23:23:30.967

阅读[Javadoc`LinkedHashMap`](http://docs.oracle.com/javase/8/docs/api/java/util/LinkedHashMap.html)：

> 结构修改是添加或删除一个或多个映射的任何操作，或者在访问排序的链接哈希映射的情况下，影响迭代顺序。在插入排序的链接哈希映射中，仅更改与映射中已包含的键关联的值不是结构修改。**在访问排序的链接哈希映射中，仅查询映射`get`是一种结构修改。**

由于您正在传递`true`给`LinkedHashMap`构造函数，因此它处于访问顺序，当您尝试从中获取`get`某些内容时，您正在对其进行结构修改。

另请注意，当您使用增强`for`语法时，实际上是在使用迭代器。[JLS §14.14.2](http://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.14.2)的简化引用：

> 增强`for`语句具有以下形式：
> 
> ```
> EnhancedForStatement:
> 
> for ( TargetType Identifier : Expression ) Statement 
> ```
> 
> [...]
> 
> 如果*Expression*的类型是`Iterable<X>`某个类型参数的子类型`X`，则令`I`为类型`java.util.Iterator<X>`；否则，`I`设为原始类型`java.util.Iterator`。
> 
> 增强`for`语句等价于`for`以下形式的基本语句：
> 
> ```
> for (I #i = Expression.iterator(); #i.hasNext(); ) {
>      TargetType Identifier =
>          (TargetType) #i.next();
>      Statement
> } 
> ```
> 
> `#i`是一个自动生成的标识符，与增强 for 语句发生时范围内（第 6.3 节）内的任何其他标识符（自动生成或以其他方式）不同。

此外，在 Javadoc 中`LinkedHashMap`：

> `iterator`由此类的所有集合视图方法返回的集合 的方法返回的迭代器是*快速失败的*：如果在创建迭代器后的任何时间对映射进行结构修改，除了通过迭代器自己的 `remove`方法之外的任何方式，迭代器会抛出一个 `ConcurrentModificationException`.

因此，当您`get`在地图上调用时，您正在对其进行结构修改，从而导致增强型中的迭代器抛出异常。我认为您打算这样做，从而避免调用`get`：

```
for (Integer i : lru_cache.values()) {
    System.out.println(i);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-23T23:19:46.303

您正在使用按访问顺序链接的哈希映射：来自[http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)的规范，

> 结构修改是添加或删除一个或多个映射的任何操作，或者在访问排序的链接哈希映射的情况下，影响迭代顺序。在插入排序的链接哈希映射中，仅更改与映射中已包含的键关联的值不是结构修改。在按访问顺序链接的哈希映射中，仅使用 get 查询映射是一种结构修改。）

简单的调用`get`就足以被认为是结构修改，触发了异常。如果您使用`entrySet()`序列，您只查询条目而不是地图，因此您不会触发`ConcurrentModificationException`.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-24T00:05:44.947

In the constructor of `LinkedHashMap` you pass `true` to get the LRU behaviour (meaning the eviction policy is **access order** rather than `false` for **insertion order**).

So every time you call `get(key)` the underlying Map.Entry increments an access counter AND reorders the collection by moving the (last accessed) Map.Entry to the head of the list.

The iterator (implicitly created by the for loop) checks the modified flag, which is different from the copy it took originally, so throws the `ConcurrentModificationException`.

To avoid this you should use the `entrySet()` as the implementation is inherited from java.util.HashMap and therefore the iterator doesn't check the modification flags:

```
 for(Map.Entry<String,Integer> e : lru_cache.entrySet()){
        System.out.println(e.getValue());
    } 
```

Be aware this class isn't threadsafe so in concurrent environments you will need to use an potentially expensive guards like Collections.synchronizedMap(Map). In this scenario a better option might be [Google's Guava Cache](http://code.google.com/p/guava-libraries/wiki/CachesExplained).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-23T06:02:00.850

你的代码

```
for(String key : lru_cache.keySet()){
    System.out.println(lru_cache.get(key));
} 
```

实际上编译为：

```
Iterator<String> it = lru_cache.keySet().iterator();
while (it.hasNext()) {
    String key = it.next();
    System.out.println(lru_cache.get(key));
} 
```

接下来，您的 LRU 缓存不是在调用时收缩到 MAX_SIZE 元素`set()`，而是在调用时`get()`- 上面的答案解释了原因。

因此我们有以下行为：

*   创建新的迭代器以迭代`lru_cache.keySet()`集合
*   `lru_cache.get()`调用以从缓存中提取元素
*   `get()`调用截断`lru_cache`为 MAX_SIZE 元素（在您的情况下为 3）
*   由于集合修改，迭代器`it`变得无效并在下一次迭代中抛出。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-24T15:14:42.003

`java.util.ConcurrentModificationException`：当迭代器存在时，如果底层列表有任何结构变化（添加、删除、重新散列等）。迭代器在每次操作之前检查列表是否已更改。这被称为“故障安全操作”。

如果线程在使用快速失败迭代器迭代集合时直接修改集合，则迭代器将抛出此异常。在这里，您不能`get()`在使用迭代器时调用该方法，因为调用`get()`会在结构上修改映射，因此下一次调用其中一个迭代器方法失败并抛出一个`ConcurrentModificationException`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-23T07:35:31.720

当您修改列表（通过添加或删除元素）时，集合框架的快速失败行为也是因为在遍历列表时出现此错误，迭代器也会出现此错误。前段时间我遇到了这个错误。有关详细信息，请参阅下面的线程。

[在 ArrayList 中的 foreach 循环内添加时出现 ConcurrentModificationException](https://stackoverflow.com/questions/9806421/concurrentmodificationexception-when-adding-inside-a-foreach-loop-in-arraylist)

虽然这表示数组列表，但它适用于大多数集合数据结构。

[并发修改异常：添加到 ArrayList](https://stackoverflow.com/questions/6866238/concurrent-modification-exception-adding-to-an-arraylist)

[http://docs.oracle.com/javase/6/docs/api/java/util/ConcurrentModificationException.html](http://docs.oracle.com/javase/6/docs/api/java/util/ConcurrentModificationException.html)

# java - 将二叉树转换为排序数组

> ID：16180569
> 
> 赞同：5
> 
> 时间：2013-04-23T23:00:16.387
> 
> 标签：java, sorting, binary-search-tree

有没有办法将二进制转换为排序数组，而不必为每个数组索引遍历树？

```
Node root;
Node runner;
int current_smallest;

void findsmallest(Node root){
    //Pre-order traversal
    if(root == null){
        return;
    }else{
        runner = root;
        if(current_smallest == null){
            current_smallest = runner.element;
        }else{
            if(current_smallest > runner.element){
            current_smallest = runner.element;
            }
        }
        findsmallest(runner.left);
        findsmallest(runner.right);
    }   
}

void fill_array( int [] array ){

    for(int i =0; i < array.length(); i++){
        findsmallest(root);
        array[i] = current_smallest;
    }
} 
```

如您所见，如果树中有很多节点，这可能需要很长时间。顺便说一句，我忘了表明必须在开始时遍历整个树才能获得数组的长度。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-23T23:04:42.790

是的，您可以这样做：[*按顺序遍历*](http://en.wikipedia.org/wiki/Tree_traversal#In-order)树，保持数组的当前位置，并将节点的值存储在数组的当前位置。

您可以递归地进行顺序遍历，也可以使用堆栈数据结构进行遍历。如果你想递归地这样做，你可以这样做：

```
int fill_array(Node root, int [] array, int pos) {
    if (root.left != null) {
        pos = fill_array(root.left, array, pos);
    }
    array[pos++] = root.element;
    if (root.right != null) {
        pos = fill_array(root.right, array, pos);
    }
    return pos; // return the last position filled in by this invocation
} 
```

请注意，为了使上述递归过程起作用，调用者必须在`array`传递给函数的过程中分配足够的空间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T23:02:55.857

二叉树可以用数组表示；如果是这种情况，您需要做的就是对数组进行排序。

以下是有关在数组中表示树的更多信息： [wikipedia](http://en.wikipedia.org/wiki/Binary_tree#Arrays)

这不一定是最节省空间的表示；“带有引用的节点”表示可能会浪费更少的空间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T23:04:35.090

你想要的是一个有序的遍历，它通常以递归方式实现，如：

*   遍历左子树。
*   处理此节点（即作为数组中的下一个元素插入）
*   遍历右子树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-09T06:04:07.353

```
Here is java code for same:

int[] result = new int[9];
fillArray(tree, result, 0);

public int fillArray(Tree tree, int[] result, int index) {
        if (tree.left != null) {
            index = fillArray(tree.left, result, index);
        }
        result[index++] = tree.val;

        if (tree.right != null) {
            index = fillArray(tree.right, result, index);
        }

   return index;
} 
```

# php - PHP 表单到电子邮件数组

> ID：16180578
> 
> 赞同：0
> 
> 时间：2013-04-23T23:01:20.997
> 
> 标签：php, forms

对此有些麻烦。我有一个数组正在输入我的表单数据 ro 电子邮件，但试图找到一种方法来组合一些复选框。对于“Grips”，如果选中，我希望列出一些复选框。以下是代码片段（这只是 PHP 的相关部分，表单邮件程序工作得很好，只是无法让所有复选框都发布）：

```
$grind = join(", ", $_REQUEST["grind"]);

 $fields = array(); 
 $fields{"AccountName"} = "Accounts's Name:  "; 
 $fields{"FitterName"} = "Fitter's Name:  "; 
 $fields{"CustomerCat"} = "__CUSTOMER INFO___"; 
 $fields{"CustomerName"} = "Customer's Name:  ";
 $fields{"CustomerPhone"} = "Customer's Phone:  ";
 $fields{"CustomerAddress"} = "Customer's Address:  ";
 $fields{"CustomerCity"} = "Customer's City:  ";
 $fields{"CustomerState"} = "Customer's State;  ";
 $fields{"CustomerZip"} = "Customer's Zip:  ";
 $fields{"WedgeType"} = "Wedge Loft:  ";
 $fields{"$grind"} = "Wedge Grind:  " ;
 $fields{"WedgesShaft"} = "Wedge Shaft:  "; 
```

这是HTML

```
<input type="checkbox" name="grind[V-Grind]" class="grinds" value="V-Grind">V-Grind
<input type="checkbox" name="grind[Tour Grind]" class="grinds" value="Tour Grind">Tour Grind
<input type="checkbox" name="grind[Heal Grind]" class="grinds" value="Heal Grind">Heal Grind
<input type="checkbox" name="grind[No Grind]"  class="grinds"value="No Grind">No Grind 
```

我知道这`$fields{"$grind"} = "Wedge Grind: " ;`不是从 $grind 传递顶部数组的正确方法，但不确定什么是正确的方法，因为其他一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:27:19.130

您的代码将正确地用逗号分隔数组。但是您使用 POSTed 值来命名数组元素的键。这不会帮助您构建电子邮件。

例如，如果用户选择“Heal Grind”和“Tour Grind”，那么您的代码会创建：

```
$fields{"Heal Grind, Tour Grind"} = "Wedge Grind:  "; 
```

所以 POST 的值存储在键中，这对我来说似乎不太合乎逻辑。为什么不做：

```
$fields{"WedgeGrind"} = "Wedge Grind: " . $grind; 
```

然后在电子邮件中，当您引用此字段时，它将创建：

```
Wedge Grind: Heal Grind, Tour Grind 
```

您的值正确发布。由于您没有提供完整的代码，我不确定您是如何尝试构建电子邮件的，但是将值存储在数组键中通常不是这样做的。使用第二个示例并使用它构建电子邮件似乎更合乎逻辑。

此外，您还有一个“无研磨”复选框选项，但用户也可以选择任何其他研磨选项以及“无研磨”。因此，如果您收到“No Grind”和“V-Grind”的订单，那会让您感到困惑（我只是假设），您需要跟进客户以验证订单。相反，您可以将研磨复选框设为可选并删除“不研磨”选项，这样如果没有发布研磨，您就知道不需要研磨。

除非客户可能会订购多个具有不同研磨度的物品，否则现有系统是有意义的，但如果是这样的话，它可能会有所改进。

# arrays - 将多个矩阵导入R中的一个数组

> ID：16180583
> 
> 赞同：0
> 
> 时间：2013-04-23T23:01:31.820
> 
> 标签：arrays, r, matrix

我有一个文件夹，在那个文件夹中有 24 个单独的文件夹。这些单独的文件夹中的每一个都包含多个文件，每个文件都包含一个矩阵。如何遍历各个文件夹并提取选定文件并将它们放入数组中？例如，如果我有一个中央文件夹，并且其中有 24 个文件夹，并且在 24 个文件夹中的每个文件夹中都有名为 file1、file2、file3 的文件，我如何才能提取每个 file1 并将它们放入一个数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:53:55.290

```
files <- list.files(path="/path/to/your/folder/")
require(abind)
arr <- do.call( abind, lapply(seq_along(list.files) , function(finum) {
                    data.matrix( read.table(file=files[finum],  ,,,devilish details) )
                    } 
```

对典型文件结构的要求是填写恶魔般的细节。可能可以更直接地做到这一点，因为我的第一次努力最初是考虑`abind`按顺序使用。也许：

```
files <- list.files(path="/path/to/your/folder/")
require(abind)
arr <- do.call( abind, lapply(list.files , function(filnm) {
                    data.matrix( read.table(file=filnm,  ,,, devilish details) ) 
```

# google-app-engine - GAE：从 Junit 测试创建实体对象

> ID：16180588
> 
> 赞同：1
> 
> 时间：2013-04-23T23:01:52.900
> 
> 标签：google-app-engine, junit

我的 GAE 课程之一是从 HTML 文件创建 [datastore Entity][1]：

```
Key parent = KeyFactory.createKey("movies", "movies");
Entity movie = new Entity("movie",System.currentTimeMillis(), parent);
setIfNotEmpty(movie, "director",    Jsoup.parse(Html).select("td#f3").text());
setIfNotEmpty(movie, "year",        Jsoup.parse(Html).select("td#f17").text());
.... 
```

当我尝试在 JUnit 测试中调用此方法时，会引发以下异常：

```
java.lang.NullPointerException: No API environment is registered for this thread.
    at com.google.appengine.api.datastore.DatastoreApiHelper.getCurrentAppId(DatastoreApiHelper.java:80)
    at com.google.appengine.api.datastore.DatastoreApiHelper.getCurrentAppIdNamespace(DatastoreApiHelper.java:90)
    at com.google.appengine.api.datastore.Key.<init>(Key.java:97)
    at com.google.appengine.api.datastore.Key.<init>(Key.java:87)
    at com.google.appengine.api.datastore.KeyFactory.createKey(KeyFactory.java:85)
    at com.google.appengine.api.datastore.KeyFactory.createKey(KeyFactory.java:78)
    at com.google.appengine.api.datastore.KeyFactory.createKey(KeyFactory.java:66)
    at cinemasderot.Movie.parseMovieHtml(Movie.java:21)
    at tests.TestParsing.testAddition(TestParsing.java:24)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    ..... 
```

问题似乎是在我的代码示例的第一行中创建了 Key。

**如何使用 Junit 测试中的父键创建实体？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:36:44.567

请阅读：[https ://developers.google.com/appengine/docs/java/tools/localunittesting](https://developers.google.com/appengine/docs/java/tools/localunittesting)

简而言之，你需要这样的东西：

```
private final LocalServiceTestHelper helper =
    new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig());

@Before
public void setUp() {
    helper.setUp();
}

@After
public void tearDown() {
    helper.tearDown();
} 
```

# sql - 将同一表中的一列的值更新到 SQL Server 中的另一列

> ID：16180589
> 
> 赞同：42
> 
> 时间：2013-04-23T23:01:53.923
> 
> 标签：sql, sql-server, sql-update

我正在尝试用在 TYPE2 中找到的值覆盖在 TYPE1 中找到的值。

我写了这个 SQL 来尝试一下，但由于某种原因它没有更新：

```
select * from stuff

update stuff
set TYPE1 = TYPE2
where TYPE1 is null;

update stuff
set TYPE1 = TYPE2
where TYPE1 ='Blank'; 
```

[http://www.sqlfiddle.com/#!3/a4733/17](http://www.sqlfiddle.com/#!3/a4733/17)

为什么我在 TYPE1 中的值没有更新？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-23T23:06:12.017

这对我有用

```
select * from stuff

update stuff
set TYPE1 = TYPE2
where TYPE1 is null;

update stuff
set TYPE1 = TYPE2
where TYPE1 ='Blank';

select * from stuff 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-08-07T19:35:37.647

```
UPDATE a
SET a.column1 = b.column2
FROM myTable a 
INNER JOIN myTable b
on a.myID = b.myID 
```

为了使“a”和“b”都起作用，必须定义两个别名

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-09-12T11:50:50.780

```
UPDATE TABLE_NAME SET COLUMN_A = COLUMN_B; 
```

容易得多。至少在 Oracle SQL 上，我不知道这是否也适用于其他方言。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T23:06:11.693

您将选择查询放在更新查询之前，因此您只会看到初始数据。放在`select * from stuff;`列表的末尾。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-05-14T08:42:54.227

这个关于从同一个表中另一列的一部分更新列的答案。

```
update T1
set domainname = (New value) --Example: (SELECT LEFT(TableName.col, CHARINDEX('@',TableName.col)-1) STRIPPED_STRING FROM TableName where TableName.col = T2.Emp_ID)
from TableName T1
INNER JOIN
    TableName T2
ON 
    T1.ID= T2.ID; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-04-21T10:22:15.507

```
update TABLE_1 a set COLUMN_1 = (select COLUMN_2 from TABLE_1 b where a.ID = b.ID) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-23T23:06:21.293

您的选择语句在更新语句之前，请参阅[更新的小提琴](http://www.sqlfiddle.com/#!3/a4733/24/0)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-02T00:03:30.607

```
UPDATE `tbl_user` SET `name`=concat('tbl_user.first_name','tbl_user.last_name') WHERE student_roll>965 
```

# knockout.js - 排序微风导航属性

> ID：16180592
> 
> 赞同：2
> 
> 时间：2013-04-23T23:02:23.413
> 
> 标签：knockout.js, breeze

如何在微风实体中对一组实体进行排序？例如，如果我有一个包含许多项目的订单，如何按 orderDate 对项目进行排序？

```
 <div databind="ko with: order">
           <ol databind="foreach: items">
              <li/>
           </ol>
    </div> 
```

此外，我不能在数据绑定中使用 items.sort()，因为我正在使列表项可排序。[https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDYQFjAA&url=https%3A%2F%2Fgithub.com%2Frniemeyer%2Fknockout-sortable&ei=8BJ3UaXZMMGG2wW5yoGQCw&usg=AFQjCNFnjZ_6ths39dl6kA&B9 swWZW7Rq6IqAcIX2-2Cl6w&bvm=bv.45580626,d.b2I](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDYQFjAA&url=https%3A%2F%2Fgithub.com%2Frniemeyer%2Fknockout-sortable&ei=8BJ3UaXZMMGG2wW5yoGQCw&usg=AFQjCNFnjZ_6ths9dl_UW9BpJkFO3Yi6kA&sig2=swWZW7Rq6IqAcIX2-2Cl6w&bvm=bv.45580626,d.b2I)**强文本**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T02:43:44.317

我认为简短的回答是“你不能”。Breeze 实体属性是简单的、无序的 ObservableArrays，因为它们是模型的一部分。

你想要实现的是一个 UI 效果......严格来说，它不属于模型。该模型应该是独立于 UI 的。如果订单数据存储在 SQL 数据库中，则订单项目的顺序在此处是严格未定义的。

理论够了。你有工作要做。我能做什么？两件事之一

### 1) 使用 OrderViewModel

“OrderViewModel”是一个“ItemViewModel”，它是一个模型对象的包装器，具有支持视图的“特殊能力”。OrderViewModel 可以公开其包装的 Order 对象以绑定其大部分属性。但是，当您需要一些特殊的东西时……例如排序的“项目”……您**在 OrderViewModel 上**创建一个 KO 属性以用于显示目的……将其称为“sortableItems”并在您的视图中绑定到 THAT。

这是一个简单的伪代码实现：

```
app.OrderViewModel = 功能（订单）{
   this.order = 订单；
   this.sortableItems = ko.observableArray();

   this.resetSortableItems();
}

app.OrderViewModel.prototype.resetSortableItems() {
    //（重新）使用项目的副本初始化
    this.sortableItems(this.order.items().slice(0));
    // 也许这里有一些排序逻辑？
}

```

`Order.items`您的“sortableItems”以您想要的方式覆盖内部；它可能是可排序的，也许是通过您提到的 KO-Sortable 功能。

**困难的部分（未显示）是在添加或删除项目时**`Order.items`使其与内部属性保持同步。记住内在属性是真理的真正来源。也许你很幸运，并且完全掌握了可以添加/删除项目的任何东西；那么您可以在发生这些更改时调用该方法。**`Order.items``resetSortableItems`**

 **这是我能带给你的。

### 2) 使用 Order.sortableItems 扩展 Order 实体

也许你已经决定不做这样一个纯粹主义者。您愿意修改模型实体以使其与您的 UI 配合得很好。因此，您添加了我刚刚描述的 KO-Sortable 属性……但将其添加到[自定义初始化](http://www.breezejs.com/documentation/extending-entities)`Order`程序中的实体，而不是添加到 OrderViewModel。

这可能会为您简化事情。另一方面，您已经 (a) 用 UI 问题污染了 Order 实体，并且 (b) 将自己限制在单一种类的项目上，这些项目将适用于引用给定 Order 的所有视图。对（a）你可以说“*谁在乎？* ”（我一直这样做）。但是 (b) 可能是一个问题……在这种情况下，您可以返回 OrderViewModel 以获得最大的灵活性。**

# java - 找到两个轴承之间的角度

> ID：16180595
> 
> 赞同：11
> 
> 时间：2013-04-23T23:02:54.840
> 
> 标签：java, math, navigation, trigonometry

给定两个轴承，我如何找到它们之间的最小角度？

例如，如果第一个航向是 340 度，第二个航向是 10 度，那么最小的角度就是 30 度。

我附上了一张图片来说明我的意思。我试过从另一个中减去一个，但由于圆圈的环绕效果，这不起作用。我也尝试过使用负度数（180 - 359 是 -180 到 0），但是在尝试计算正数和负数之间的角度时会搞砸。

我敢肯定，必须有一种更简单的方法来拥有大量`if`语句。

感谢您的帮助。亚当

顺便提一句。这是一个导航问题，所以圆的半径是未知的。

![找到两个标题之间的角度](https://i.stack.imgur.com/tehtP.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-08-12T16:25:16.253

我最终使用了[此留言板上](http://gmc.yoyogames.com/index.php?showtopic=532420)的以下公式，因为我需要根据方向（顺时针或逆时针）对结果进行签名。它很好地解释了到底发生了什么。

```
((((bearing - heading) % 360) + 540) % 360) - 180 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-23T23:14:54.643

```
float getDifference(float a1, float a2) {
    return Math.min((a1-a2)<0?a1-a2+360:a1-a2, (a2-a1)<0?a2-a1+360:a2-a1)
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-23T23:20:46.140

关于什么：

```
angle = Math.abs(a1-a2);
if (angle > 180)
    angle = 360 - angle; 
```

你提到了一个关于正数和负数的问题，所以也许我在这里没有考虑到一些事情......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-11T02:45:25.517

对于导航，您可能想知道 b1 是在 b2 的左边还是右边，所以这里是一个很好的函数。（假设正好 0 不是用例）

```
function isBearing1LeftOrRightOfBearing2 (b1, b2) {
  if (Math.sign(((b1 - b2 + 540) % 360) - 180) > 0) {
    return 'left'
  } else {
    return 'right'
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-06T08:11:08.627

如果需要角度方向，那么这将起作用：

```
 int maxBearing = Math.max(bearing0, bearing1);
    int minBearing = Math.min(bearing0, bearing1);
    int firstDir = maxBearing - minBearing;  
    int secondDir = minBearing + 360 - maxBearing;  
    int diff = Math.min(firstDir, secondDir);

    boolean anticlock_dir = false;

    int anticlock = bearing1 + diff;
    if (anticlock >= 360)
        anticlock = anticlock - 360;

    if (anticlock ==  bearing0)
        anticlock_dir = true; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-30T00:42:50.623

您需要考虑两个方向的差异。

```
public static double bearingDiff(double a, double b) {
    double maxBearing = Math.max(a, b);
    double minBearing = Math.min(a, b);
    double antiClockwiseDiff = maxBearing - minBearing;
    double clockwiseDiff = minBearing + 360 - maxBearing;
    return Math.min(antiClockwiseDiff, clockwiseDiff);
} 
```

# c - 将长数字转换为 C 中的日期、时间

> ID：16180599
> 
> 赞同：2
> 
> 时间：2013-04-23T23:03:40.200
> 
> 标签：c, time.h

我正在解决 spoj 问题，其中当前时间戳被平方，然后除以 400000007，余数转换为 dat 时间 下面是我使用的技术..

```
remainder = result%4000000007 ; 

printf("%ul\n",remainder); 

//convert the timestamp into date , time 

dt = localtime(&remainder); 
// use any strftime format spec here 
// strftime(b, sizeof(b), "%m%d%H%M%y", dt); 
// fprintf(stdout, "%s", b); 
// printf("%s\n",asctime(localtime(&remainder))); 
 ltime = (time_t)remainder; 
 printf("%s\n",asctime(dt)); 
 printf("%s\n",ctime(&ltime)); 
```

显示的错误是分段错误，在`asctime`，也是`ltime`time_t 变量，'b' 是缓冲区， `dt`是 struct tm *，而且我试图将余数转换为`time_t`变量，但仍然有效。此外，注释代码显示了我的尝试。使用调试器，我发现 asctime 返回 null 。

问题出在哪里 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:31:53.747

很难从所提供的代码中确切地说出什么问题。但是，在您的评论中，您关联`remainder`的类型为`unsigned long long`. 但是，您将其地址传递给`localtime()`，这是一个错误。`localtime()`期望一个`time_t *`.

可能发生的情况是由于传入了错误的类型，`localtime()`检测到一些错误并返回了一个`NULL`值。然后，将这个值传递给也会`asctime()`产生一个`NULL`返回值。

顺便说一句，您`printf`的说明符错误。用于`%llu`打印`unsigned long long`.

# apache - 智能卡令牌认证 - 取消按钮返回空白页面

> ID：16180609
> 
> 赞同：1
> 
> 时间：2013-04-23T23:04:16.767
> 
> 标签：apache, authentication, token, smartcard, cancel-button

apache SSL 配置为向网页用户（基于特定 URL）质询智能卡令牌（提供者：Safenet）身份验证。这是配置的一部分

```
<Location /abc/xyz>
    SSLVerifyClient optional
    SSLVerifyDepth 3
    SSLOptions +OptRenegotiate +StdEnvVars +ExportCertData
    SSLCACertificateFile /opt/APACHE1/httpd/conf.d/CA.crt
    RewriteEngine On
    RewriteRule ^/$ /abc/sslnocertautherror
    ErrorDocument 403 /abc/sslnotokenerror
    ErrorDocument 500 /abc/sslnotokenerror
    ErrorDocument 404 /abc/sslnotokenerror
    ErrorDocument 401 /abc/sslnotokenerror
</Location> 
```

在调用 URL 时，会出现 Windows 安全弹出窗口，然后弹出密码令牌质询。

如果用户提供正确的密码，该功能将按预期工作。如果密码错误，则会显示错误消息，并且重试计数器按预期递减。

如果用户取消操作而不是输入密码，浏览器将显示一个空白页面。

我试图调试错误，看起来请求不会发送到 apache。浏览器正在停止请求。

此操作不会清除浏览器缓存和历史记录（智能卡令牌密码弹出窗口中的取消操作）。

当我使用 HttpWatch 进行调试时，除了 ERROR_INTERNET_SECURITY_CHANNEL_ERROR 之外，浏览器不会返回任何 HTTP 错误代码。

环境：JBOSS+APACHE+IE8

我在论坛中尝试了很多方法来找到解决方案（摆脱取消时的空白页），但没有运气。

感谢您的时间和帮助。如果您需要任何其他详细信息，请告诉我。

问候，

斯里尼瓦斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T01:05:43.930

SSL authentication and secure channel establishment is performed *before* HTTP when you are using HTTPS. That means that it is performed before any pages can be retrieved using HTTP. The error message (if any) should therefore be returned by the browser. If the browser stays mute then there is very little you can do about that, except try for a better or more up to date browser.

# javascript - 移除左侧滚动条html

> ID：16180610
> 
> 赞同：3
> 
> 时间：2013-04-23T23:04:16.847
> 
> 标签：javascript, html

是否有一个 html 代码可以删除左侧的滚动条（Y 轴滚动条）就像当您调整页面大小时滚动条也不会出现底部滚动条一样？谢谢。

顺便说一句，谷歌就是一个例子。调整谷歌页面的大小，你会看到我在说什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:09:22.530

如果您只想让滚动条消失，一种方法是对您的站点进行编码，使其具有流畅的布局，并且可以调整浏览器窗口的大小（例如，没有固定宽度的块，或者在调整大小时会重新排序的浮动内容.)

当然，最简单的方法是`overflow: hidden;`在 CSS 中设置您需要从中删除滚动条的块，但是，这只会掩盖视口外的内容。

**有关流体布局的更多信息**

这些实际上是我在谷歌搜索时获得的一些第一个链接：

*   [http://www.netmagazine.com/tutorials/create-fluid-layouts-html5-and-css3](http://www.netmagazine.com/tutorials/create-fluid-layouts-html5-and-css3)
*   [http://coding.smashingmagazine.com/2009/06/09/smart-fixes-for-fluid-layouts/](http://coding.smashingmagazine.com/2009/06/09/smart-fixes-for-fluid-layouts/)
*   [http://24ways.org/2006/intricate-fluid-layouts/](http://24ways.org/2006/intricate-fluid-layouts/)

如果需要，您甚至可以找到现成的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:10:43.493

可能此代码会对您有所帮助，请将此代码添加到 head 部分

```
 <style type="text/css">
    body {
           /* use any one, according to the requirment */
        overflow:hidden;  /* for x & y scroll bar */
        overflow-x:hidden; /* for x scroll bar */
        overflow-y:hidden;/* for y scroll bar */
    }
    </style> 
```

# actionscript-3 - AS3：如何在不替换现有孩子的情况下，每次按下按钮时在舞台上添加一个孩子（实例）？

> ID：16180624
> 
> 赞同：0
> 
> 时间：2013-04-23T23:05:37.320
> 
> 标签：actionscript-3, replace, instance, removechild, addchild

每次按下按钮时如何在舞台上添加一个孩子（实例）而不替换现有的孩子？

我有四个类：Symbol1、Symbol3、Symbol4、all。

当我按下按钮 Symbol3 时，我想通过 all.as 类在舞台上创建 Symbol1 的实例。使用 Symbol4，我想按照舞台上的创建顺序删除其中一个创建的实例。示例：我已经按了三下 Symbol3，并在舞台上创建了三个 Symbol1 实例。现在，如果我按 Symbol4，我将删除第一个创建的实例。如果我再按一次 Symbol4，我将删除第二个创建的实例。

```
 public class Symbol3 extends SimpleButton
{
    private var creator:all;
    private var child:Symbol1 = new Symbol1  ;
    private var child2:Symbol1 = new Symbol1  ;
    private var child3:Symbol222 = new Symbol222  ;

    public function Symbol3()
    {
        addEventListener(MouseEvent.CLICK, onCLICK);
    }

    private function onCLICK(s:MouseEvent)
    {
        creator = new all(child);
        stage.addChild(creator);
    }
} 
```

.

```
 public class all extends MovieClip
{
    private var _thief1:MovieClip;

    public function all(par1:MovieClip)
    {
        _thief1 = par1;
        addEventListener(Event.ADDED_TO_STAGE, onADDED_TO_STAGE);
    }

    private function onADDED_TO_STAGE(e:Event)
    {
        removeEventListener(Event.ADDED_TO_STAGE, onADDED_TO_STAGE);
        this.addChild(_thief1);
        _thief1.x = Math.random() * 200;
        _thief1.y = Math.random() * 200;
    }
} 
```

.

```
 public class Symbol4 extends SimpleButton
{
    public function Symbol4()
    {
        addEventListener(MouseEvent.CLICK, onCLICK);
    }

    private function onCLICK(s:MouseEvent)
    {
        stage.removeChild(?);
    }
} 
```

这是我到目前为止。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:38:45.773

您应该将所有可添加/可移除的精灵放在同一个容器中，我们称之为`container`. 然后添加按钮将如下所示：

```
private function onCLICK(s:MouseEvent)
{
    container.addChild(new all(new Symbol1()));
} 
```

和删除按钮：

```
private function onCLICK(s:MouseEvent)
{
    container.removeChildAt(0);
} 
```

当移除第 0 层上的孩子时，其他孩子将向下一层，下一个要移除的孩子将在 0 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:06:02.507

感谢科迪亚克的帮助！

我终于成功了。我不确定这是否是正确的方法，但至少它有效。

我有三个类： AddChild2.as - 链接到 Button Creator.as Ship2.as - 链接到 MovieClip

棘手的时刻是必须将阶段作为参数传输以避免错误：1009。另一种认为是 Creator 的空构造函数，它使代码更加灵活和独立。现在Creator 可以生成任何通过的movieClip。我再次相信还有另一种更好的方法可以做到这一点，因此欢迎任何改进。

* * *

```
 public class AddChild2 extends SimpleButton
{
    private var creatorche:Creator = new Creator;
    private var s:Ship2;

    public function AddChild2()
    {
        // constructor code
        addEventListener(MouseEvent.CLICK, onCLICK)
    }

    private function onCLICK(e:MouseEvent)
    {
        s = new Ship2;
        creatorche.onCreator(s, stage);
    }
} 
```

.

```
 public class Creator extends MovieClip
{
    private var ship:MovieClip;

    public function Creator()
    {
        // constructor code
    }

    public function onCreator(par1:MovieClip, par2:Stage)
    {
        ship = par1;
        par2.addChild(ship);
        ship.x = Math.random() * 200;
        ship.y = Math.random() * 200;
    }

} 
```

.

```
 public class Ship2 extends MovieClip
{

    public function Ship2()
    {
        // constructor code
    }
} 
```

# jquery - 带有 jQ uery mobile 的 mvc4 - 导航到页面时显示加载图像（链接或回发）

> ID：16180626
> 
> 赞同：0
> 
> 时间：2013-04-23T23:06:00.720
> 
> 标签：jquery, jquery-mobile, setinterval, clearinterval, jquery-mobile-loader

当页面正在加载时，jQuery mobile 会执行漂亮的页面加载动画，但是对于数据量很大的页面，用户仍然可以暂时看到一个“白色”页面，直到显示新加载的页面。为了摆脱这种情况，我正在使用以下代码：

```
$.mobile.loading( 'show', {
text: 'foo',
textVisible: false,
theme: 'a',
html: ""
}); 
```

尽管如此，我仍然看到白页。有没有办法在实际页面加载之前在白页上显示动画？我喜欢[http://www.amerimark.com](http://www.amerimark.com)网站在单击左侧导航按钮时显示加载消息的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T07:49:16.493

这是一个工作示例：http: [//jsfiddle.net/Gajotres/Zr7Gf/](http://jsfiddle.net/Gajotres/Zr7Gf/)

```
$(document).on('pagebeforecreate', '#index', function(){     
    var interval = setInterval(function(){
        $.mobile.loading('show');
        clearInterval(interval);
    },1);    
});

$(document).on('pageshow', '#index', function(){  
    var interval = setInterval(function(){
        $.mobile.loading('hide');
        clearInterval(interval);
    },1);      
}); 
```

但是这里我们有一个不同的问题，除非您的页面足够复杂，否则新页面将被加载得非常快。jQuery mobile 具有内部计时器，用于查看页面加载到 DOM 中的速度。如果页面很复杂并且加载时间超过 10 毫秒，它将显示加载程序，否则无论您如何努力，加载程序都不会显示。

另请注意，只有 DOM 加载会计入 10 毫秒。页面样式和过渡超出了计算范围。因此，无论页面加载是否看起来更长，只有 DOM 加载计数。

我的示例不会显示加载器，因为它是一个非常简单的示例，并且 pageshow 事件几乎会立即触发。但是，如果您评论此行，您可以看到它是有效的示例：

```
$.mobile.loading('hide'); 
```

在您的情况下，它应该可以工作，因为 pageshow 事件将被延长直到页面加载。

# sql - 我的连接字符串有什么问题？

> ID：16180632
> 
> 赞同：0
> 
> 时间：2013-04-23T23:06:37.853
> 
> 标签：sql, asp.net, sql-server

我正在尝试连接到我的共享托管数据库。

他们给了我一个例子：

```
Data Source=KezBlu.db.10971085.hostedresource.com; Initial Catalog=KezBlu; User ID=KezBlu; Password='your password'; 
```

我从中制作：

```
 <connectionStrings>
    <add name="LibKezberProjectManager.Properties.Settings.KezberPMDBConnectionString" connectionString=" Server=****.db.10971085.hostedresource.com; Database=KezBlu; User ID=****; Password=mypassword; Trusted_Connection=False" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

但 Linq 似乎无法连接到它。

我不确定可能出了什么问题。

当我使用本地 SQLExpress 时，它工作正常...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:15:07.617

尝试使用与提供商提供给您的示例相同的关键字。

所以`Server`用`Data Source`和`Database`替换`Initial Catalog`。

您可能还想删除`Trusted_Connection=False`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:00:16.320

对于 web.config，它应该如下所示：

```
<add name="KezberPMDBConnectionString" connectionString="Data Source=KezBlu.db.10971085.hostedresource.com;Initial Catalog=KezBlu;User ID=KezBlu;Password=yourpassword" providerName="System.Data.SqlClient"/> 
```

在代码中，使用以下方法访问上面的连接字符串：

```
SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["KezberPMDBConnectionString"].ToString()); 
```

**如果这解决了您的问题，请将此答案标记为有用。**

# python - Python socketserver 向多个客户端发送数据 cpu 使用率高

> ID：16180636
> 
> 赞同：1
> 
> 时间：2013-04-23T23:06:49.713
> 
> 标签：python, multithreading, cpu-usage, socketserver

我的代码接受来自多个来源的 gps 数据，将其聚合并将其发送回连接到线程单套接字的多个客户端。我让它工作了，但输出线程似乎耗尽了 cpu 资源。

如果我添加代码来等待来自客户端的一些数据，那么 CPU 使用就会消失，但客户端只接受 gps 信息流，它们不会发送任何内容。

下面是发送数据正常但运行高 CPU 的服务器代码

```
class ThreadedServerRequestHandler(SocketServer.StreamRequestHandler):

    def handle(self):
        global SendData
        global SendNow
        while True:
            SendNow
            for line in SendData:
                self.request.sendall(line)
                SendData = []
                SendNow = False
        return

class ServerThread(SocketServer.ThreadingMixIn, SocketServer.TCPServer):
    daemon_threads = True
    allow_reuse_address = True

if __name__ == '__main__':
    import socket
    import threading

    address = TxServer
    server = ServerThread(address, ThreadedServerRequestHandler)

    t = threading.Thread(target=server.serve_forever)
    t.setDaemon(True) # don't hang on exit
    t.start() 
```

如果我将其更改为低于 cpu 停止但它仅在我发送击键时输出数据。

```
class ThreadedServerRequestHandler(SocketServer.StreamRequestHandler):

    def handle(self):
        global SendData
        global SendNow
        while True:
            self.data = self.request.recv(1024).strip()
            if self.data == '':
                print 'closing thread'            
                break
            while SendNow == True:
                for line in SendData:
                    self.request.sendall(line)
                SendData = []
                SendNow = False
        return 
```

有什么方法可以暂停线程直到发送数据？或者我可以模拟接收到的消息来触发主程序的数据突发吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:34:43.707

它使用 100% CPU 的原因是，当你没有什么可写的时候，你只是尽可能快地旋转直到有*东西*要写：

```
while True:
    SendNow
    for line in SendData:
        self.request.sendall(line)
        SendData = []
        SendNow = False 
```

为了让它不使用 100% CPU，你必须找到让它等待的东西。

您的修复通过等待接收到的数据来做到这一点，但由于您通常没有任何数据要接收，所以这不是很有用。（正如您所说，“它仅在我发送击键时才输出数据”。）

同时：

> 有什么方法可以暂停线程直到发送数据？

当然。而你已经在这样做了。就是`sendall`这样。但这无济于事。问题是，一旦您发送了所有数据，您就会一遍又一遍地返回循环，直到有更多数据要发送。

> 或者我可以模拟接收到的消息来触发主程序的数据突发吗？

当然，但是你会用什么来触发模拟接收呢？如果您只是要尽可能快地旋转模拟接收，那将无济于事。

我认为您在这里想要的是数据周围的[条件变量。](http://docs.python.org/2/library/threading.html#condition-objects)像这样的东西：

```
SendCondition = threading.Condition()

class ThreadedServerRequestHandler(SocketServer.StreamRequestHandler):

    def handle(self):
        global SendCondition
        global SendData
        while True:
            with SendCondition:
                while not SendData:
                    SendCondition.wait()
                for line in SendData:
                    self.request.sendall(line)
                SendData = [] 
```

然后，无论你的代码是什么集合`SendData`（你没有显示）看起来像这样：

```
global SendCondition
global SendData
# ...
new_send_data = <whatever>
with SendCondition:
    SendData.append(new_send_data)
    SendCondition.notify() 
```

# pdf-reader - PHP / Ruby / .NET 中的单页加载器 PDF 阅读器

> ID：16180637
> 
> 赞同：1
> 
> 时间：2013-04-23T23:07:03.773
> 
> 标签：pdf-reader

我有非常大的 PDF 文件。我想要一个不加载整个文件而只加载页面的 PDF 阅读器（PHP / Ruby / .NET），以便响应时间变得更好。

有许多 PHP 和 .NET PDF 阅读器，但我不确定它们是只加载一个页面还是一次加载整个文件。

# android - 如何为我的 Android 应用创建自定义可点击图形？

> ID：16180638
> 
> 赞同：2
> 
> 时间：2013-04-23T23:07:18.073
> 
> 标签：android, android-image, interactive

我想为我的应用程序创建一个交互式图形。它本质上是一张简单的公交线路图片，用户可以一次选择 2 个站点（一个用于出发时间，另一个用于到达时间）我不知道如何创建此图像，并且有 20 个左右不同可点击的点。有没有我可以用来做这个的框架？或者有没有办法在纯安卓中做到这一点？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:11:56.367

我建议编写一个 onClick 侦听器并使用 Rect 实例的集合来管理“点击”的碰撞/位置。查看[on click page](http://developer.android.com/reference/android/view/View.OnClickListener.html)和[rect page](http://developer.android.com/reference/android/graphics/Rect.html)。

要记住的一件事是点击的原点，我假设您希望使用图像的一个角作为点 (0,0) 并从那里引用所有内容（点击和矩形）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:24:57.283

我会说尝试创建一个`ImageView`来加载您的图像并为该视图设置一个触摸事件侦听器或单击侦听器。硬编码您希望图像在单击时做出反应的所有位置。

使用事件侦听器检查单击将需要您同时处理`ACTION_DOWN`传入`ACTION_UP`的`MotionEvent`对象。但是更容易获取用户在页面上单击的位置的坐标，因此您只需要一个侦听器，但需要在处理将传入的坐标转换为`MotionEvent`图像上的坐标。当您的图像尺寸可以大于屏幕尺寸时，这尤其是一个主要问题。

使用点击监听器可以让你免于这个麻烦。正如@smitec 所说，您需要将图像上的矩形叠加为“按钮”，这样您就可以根据用户按下的按钮对用户输入做出反应。这样，您需要将侦听器绑定到所有侦听器（我想）并硬编码它们在图像上的位置。但是，如前所述，它使您免于稍后处理坐标。

# javascript - 如何将选定的下拉值传递给更改背景颜色 onclick 的函数

> ID：16180639
> 
> 赞同：2
> 
> 时间：2013-04-23T23:07:34.810
> 
> 标签：javascript, drop-down-menu, onclick, background-color

```
<script>    
myVar = document.getElementById('colorpick').value;

function color_click(myVar){
document.getElementById("touch").style.backgroundColor=myVar;
}
</script>
<select name="colorpick" id="colorpick">
<option value="red">red</option>
<option value="blue">blue</option>
<option value="green">green</option>
</select>

<div id="touch" onclick="color_click(myVar);"> XXXXXXXXXXX </div> 
```

当我将“蓝色”替换为 myVar 的值时，此代码按预期工作，但是我想在单击元素以更改其背景之前通过下拉菜单选择哪种颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:39:11.773

因为你想在点击 div 时通过下拉菜单获取颜色，所以你需要把

```
myVar = document.getElementById('colorpick').value; 
```

在 color_click 函数中。
你可以试试这个：

```
function color_click(){
    var myVar = document.getElementById('colorpick').value;
    document.getElementById("touch").style.backgroundColor = myVar;
} 
```

在你的div中：

```
<div id="touch" onclick="color_click();"> XXXXXXXXXXX </div> 
```

希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:12:16.540

您需要访问所选选项的值。为此，您需要这样的东西：

```
function color_click(){
    var sel = document.getElementById('colorpick'),
    myVar = sel.options[sel.selectedIndex].value;
    document.getElementById("touch").style.backgroundColor=myVar;
} 
```

# nrefactory - NRefactory 解析代码 - 类当前是否继承？

> ID：16180640
> 
> 赞同：0
> 
> 时间：2013-04-23T23:07:35.093
> 
> 标签：nrefactory

在 NFactory 解析树上，识别当前类是否实际上是从另一个类继承（或不继承）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T18:08:54.700

你应该看看解析的树是否有任何基本类型。

```
TypeDeclaration typeDeclaration = new CSharpParser().Parse("public class A:B{}").Children.OfType<TypeDeclaration>().First();
        if(typeDeclaration.ClassType==ClassType.Class && typeDeclaration.BaseTypes.Count>=1)
        {
                //this class is inherited..
        } 
```

# php - 将 base64 字符串插入 MySQL LONGBLOB。

> ID：16180641
> 
> 赞同：0
> 
> 时间：2013-04-23T23:07:35.980
> 
> 标签：php, mysql, binary, base64, blob

我有一个base64（图像）字符串，我需要将它作为数据类型二进制LONGBLOB 保存在MySQL 数据库中。该字符串超过 200,000 个字符。该字符串保存在 PHP 变量中。

我知道不建议这样做，但我需要一些关于如何完成的输入。它必须在纯 PHP 中完成。base64 字符串通过 AJAX POST XMLHttpRequest 发送。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:26:59.037

使用[LOAD_FILE](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_load-file)可能是您正在寻找的：

```
 UPDATE colum SET img=LOAD_FILE('/tmp/file') WHERE id=1; 
```

# javascript - jquery动态表生成器

> ID：16180651
> 
> 赞同：0
> 
> 时间：2013-04-23T23:09:01.840
> 
> 标签：javascript, jquery

我已经使用 jquery 构建了非常简单的动态 html 表生成器，请检查以下...

```
<button id="addcolumn">Add Column</button>
<button id="addrow">Add Row</button>

<table width="100%" border="1" cellpadding="0" cellspacing="0">

<thead id="theads">
    <tr>
        <th class="th" contenteditable>Heading</th>
        <th class="th" contenteditable>Heading</th>
    </tr>
</thead>

<tbody id="tbody">

</tbody>

</table> 
```

**jQuery**

```
$(document).ready(function () { 

    //add head
    $('#addcolumn').click(function(){
        $('<th class="th" contenteditable>Heading</th>').appendTo('thead tr');
    });

    //add row
    $('#addrow').click(function(){
        var totalths = $('.th').length;

        var trcon = '<tr>';
        for (var i = 0; i < totalths; i++) {
            var trcon = trcon + ' <td class="td" align="center" contenteditable>Content</td>';
        }
        var trcon = trcon + ' </tr>';

        $(trcon).appendTo('tbody');

    });

}); 
```

这当前添加`th`单击*添加列*按钮并单击*添加行*按钮添加行`td = calculated numbers of th`，它工作正常，但我面临一个问题，假设我添加 3 列和 2 行 3 tds，但如果我想在之后添加更多列创建 2 行，它不会增加这些行中的 tds。我希望你能理解我的问题。谢谢。[也可以在 jsfiddle](http://jsfiddle.net/prBZS/)中试试这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:18:47.447

你可以这样做：

```
$(document).ready(function () {
    var $cell = $('<td>', {
        'class': 'td',
        'align': 'center',
        'contenteditable': '',
        'text': 'Content'
    });

    var $header = $('<th>', {
        'class': 'th',
        'contenteditable': '',
        'text': 'Heading'
    });

    $('#addcolumn').click(function() {
        $header.clone().appendTo('thead tr');
        $cell.clone().appendTo('tbody tr');
    });

    $('#addrow').click(function(){
        var $row = $('<tr>');

        $('thead th').each(function() {
            $cell.clone().appendTo($row);
        });

        $row.appendTo('tbody');
    });
}); 
```

**演示：http: [//jsfiddle.net/prBZS/4/](http://jsfiddle.net/prBZS/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:14:19.800

在列添加按钮的事件处理程序中，只需将一个单元格添加到已经存在的行：

```
//add head
$('#addcolumn').click(function(){
  $('<th class="th" contenteditable>Heading</th>').appendTo('thead tr');
  $('<td class="td" align="center" contenteditable>Content</td>').appendTo('tbody tr');
}); 
```

# batch-file - 管理带有重音字符的路径

> ID：16180652
> 
> 赞同：4
> 
> 时间：2013-04-23T23:09:02.413
> 
> 标签：batch-file, path, diacritics

在批处理中，指定名称包含重音字符的路径，在文件系统中找不到文件，同时剥离路径中的所有重音字符，找到这些文件。尽管如此，我必须管理用重音字符编写的路径。有没有办法解决这个问题？

如果您需要了解我的操作系统，我在 SEVEN 32。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:29:33.223

Batch 默认配置不能打印 unicode 字符，但可以识别这些字符并使用它。这意味着您无法打印“ú”，但您可以访问名为“ú”的文件夹或触摸名为“ú”的文件。

然后，如果您的脚本无法访问带有重音字符的文件，可能是因为您的脚本的编码不是 ANSI，因此请在记事本中打开脚本并确保使用 ANSI 编码（非 utf-8 或 unicode）保存它。

**例子：**

```
@echo off

CHCP 850 >NUL

for %%# in (*.txt) do (

    Echo [+] reading File: .\%%~nx# | MORE
    Type "%%~nx#"
) 

Pause>NUL 
```

**输出：**

```
[+] reading File: .\áéíóúàèìòù ñ Ñ ç Ç.txt

This is the text content of my file with ISO-Latin characters 
```

如果要在 CMD 中打印重音字符，则需要进行 char 转换，这可以解决问题：

```
@echo off
CHCP 850 >NUL
copy con Mychars.txt 
```

在该提示中，您将编写所需的字符，例如“ **éíóú** ”，然后您将获得包含以下内容的“Mychars.txt”文本文件：

```
 ‚¡¢£ 
```

现在您可以使用该字符来打印重音字符：

```
@echo off
echo ‚¡¢£
Pause>NUL 
```

**输出：**

```
éíóú 
```

PS1：记得做我所说的以 ANSI 编码保存脚本的所有事情。

PS2：请注意我如何使用 CHCP 850 命令，这意味着 CMD 的代码页，默认情况下 CMD 使用 850 代码页，但我使用默认 1250 代码页启动 CMD 以避免所有这些问题，所以在我的示例中我需要使用代码页 850 向您展示。

您可以使用注册表项设置默认 CMD 代码页：

```
REG ADD "HKCU\Software\Microsoft\Command Processor" /V "Autorun" /T "REG_SZ" /D "chcp 1250 >NUL" /F >NUL 2>&1 
```

您可以在此处阅读代码页：http: [//msdn.microsoft.com/en-us/library/cc195064.aspx](http://msdn.microsoft.com/en-us/library/cc195064.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-13T20:49:26.167

这不起作用：

```
@echo off
start "" "C:\Users\dmb3419\Documents\dev\ééééééééé" 
```

这有效：

```
@echo off
chcp 1252
start "" "C:\Users\dmb3419\Documents\dev\ééééééééé" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-05T13:04:18.600

我在使用 .bat 和 xcopy 的路径名中遇到了类似的法语口音问题。

使用：

```
@echo off
chcp 1252 
```

为我处理了这个，并且在 .bat 文件中正确识别了重音。在 MS server2012 R2 cmd.exe 下运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T14:20:18.637

请在下面查看您的提示如何在不将其与外来代码混合的情况下解决了我的问题：

CHCP 1252
调用 "C:\Program Files\Microsoft Office\root\Office16\EXCEL.EXE" "Z:\CYRO\ARTE\ArteRH Dicionário de Dados.xlsx"
调用 "C:\Program Files\Microsoft Office\root\Office16 \EXCEL.EXE" "Z:\CYRO\ARTE\Unificação\01 - 材料 APOIO\PADRAO_TABELA_CONVERSAO.xlsx"

希望它可以帮助别人！
此致。

# knockout.js - Knockout 订阅 observable 对象

> ID：16180653
> 
> 赞同：3
> 
> 时间：2013-04-23T23:09:08.127
> 
> 标签：knockout.js

我有一个对象：

```
{ model: settings: { "FirstName": "Joe", "LastName": "Bloggs" } }; 
```

在我的视图模型中，我将设置设为可观察的：

```
this.Settings = ko.observable(ko.mapping.fromJS(model.settings)); 
```

这也使得`FirstName`和`LastName`可观察的。

在我看来，我通过以下方式绑定：

```
<p data-bind="text: Settings().FirstName"></p> 
```

从`Settings`我那里读取一个值：

```
`this.Settings().FirstName()` 
```

当我想在`FirstName`OR`LastName`更改时订阅时，问题就出现了。

我知道我可以做到`this.Settings.FirstName.subscribe...`，但是一旦你观察到两件以上的事情，那会很痛苦。

有办法`this.Settings.subscribe...`吗？还是我应该使用自定义绑定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T08:49:51.000

我写了下面的插件来帮助我处理这种情况：

[https://github.com/ZiadJ/knockoutjs-reactor](https://github.com/ZiadJ/knockoutjs-reactor)

这是一个简单的使用示例：

```
 this.Settings.watch(function(root, trigger){
     var newValue = trigger();
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:41:08.027

通过使用计算的 observables，您可以在任何这些依赖项发生变化时自动更新。例如，当 Firstname 或 LastName 更改时，FullName 将得到更新。

```
 this.Settings().FullName =  ko.computed(function() {
    return this.Settings().FirstName() + " " + this.Settings().LastName();
}); 
```

借自[KnokcoutJS.com](http://knockoutjs.com/documentation/computedObservables.html)

注意：我将做更多工作以使视图模型更简洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-19T16:21:24.490

您应该尝试使用[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)，它可以让您获取纯 JSON 对象并将它们转换为完整视图模型。

基本上它将每个对象上的每个成员都转换为可观察对象：

```
var data = { "FirstName": "Joe", "LastName": "Bloggs" };
var viewModel = ko.mapping.fromJS(data); 
```

然后，您可以将此视图模型绑定到您的 html 绑定属性，如下所示：

```
<p data-bind="text: FirstName"></p> 
```

这是一个小示例，我只映射了一个普通对象，但如果您想转换示例中的嵌套对象，也可以实现更复杂的映射。文档中有更多关于此的信息。

# java - 如何获取 Hadoop 执行的已完成作业的统计信息？

> ID：16180654
> 
> 赞同：1
> 
> 时间：2013-04-23T23:09:13.837
> 
> 标签：java, hadoop, hdfs, hadoop-plugins

当我们在 Hadoop 上运行数据密集型作业时。Hadoop 执行该作业。现在我想要的是工作完成时。它会给我有关已执行工作的统计信息，即；消耗的时间、mapper 数量、reducer 数量和其他有用信息。

作业执行期间在浏览器中显示的信息，如作业跟踪器、数据节点。但是我怎样才能在我的应用程序中获得统计数据，该应用程序通过 Hadoop 运行作业并在作业完成结束时给我提供报告之类的结果。我的应用程序是 JAVA

任何可以帮助我的 API。建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-16T11:45:08.343

Chirs is correct. The documentation of [TaskReport](https://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapred/TaskReport.html) states that `org.apache.hadoop.mapred.TaskReport` inherits those methods from `org.apache.hadoop.mapreduce.TaskReport`. So, one could get such values.

Here are the codes to get the start and end time of a job, grouped for each Map and Reduce tasks.

```
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.mapred.JobStatus;
import org.apache.hadoop.conf.Configuration;
import java.net.InetSocketAddress;
import java.util.*;
import org.apache.hadoop.mapred.TaskReport;
import org.apache.hadoop.mapred.RunningJob;
import org.apache.hadoop.util.StringUtils;
import java.text.SimpleDateFormat;

public class mini{
        public static void main(String args[]){
                String jobTrackerHost = "192.168.151.14";
                int jobTrackerPort = 54311;

                try{
                        Configuration conf = new Configuration();
                        JobClient jobClient = new JobClient(new InetSocketAddress(jobTrackerHost, jobTrackerPort), conf);
                        JobStatus[] activeJobs = jobClient.jobsToComplete();
                        SimpleDateFormat dateFormat = new SimpleDateFormat("d-MMM-yyyy HH:mm:ss");
                        for(JobStatus js: activeJobs){
                                System.out.println(js.getJobID());
                                RunningJob runningjob = jobClient.getJob(js.getJobID());
                                            while(runningjob.isComplete() == false){ /*Wait till the job completes.*/}
                                TaskReport[] maptaskreports = jobClient.getMapTaskReports(js.getJobID());
                                for(TaskReport tr: maptaskreports){
                                        System.out.println("Task ID: "+tr.getTaskID()+" Start TIme: "+StringUtils.getFormattedTimeWithDiff(dateFormat, tr.getStartTime(), 0)+" Finish Time: "+StringUtils.getFormattedTimeWithDiff(dateFormat, tr.getFinishTime(), tr.getStartTime()));
                                }
                                TaskReport[] reducetaskreports = jobClient.getReduceTaskReports(js.getJobID());
                                for(TaskReport tr: reducetaskreports){
                                        System.out.println("Task ID: "+tr.getTaskID()+" Start TIme: "+StringUtils.getFormattedTimeWithDiff(dateFormat, tr.getStartTime(), 0)+" Finish Time: "+StringUtils.getFormattedTimeWithDiff(dateFormat, tr.getFinishTime(), tr.getStartTime()));
                                }

                        }
                }catch(Exception ex){
                        ex.printStackTrace();
                }
        }
} 
```

This is a simple example to get the Start and Finish time of a running job. You can in the way you want.

And here is the run of this program for a "Word Count" MapReduce job.

```
[root@dev1-slave1 ~]# java -classpath /usr/lib/hadoop/hadoop-core.jar:/usr/lib/hadoop/lib/jackson-core-asl-1.8.8.jar:/usr/lib/hadoop/lib/jackson-mapper-asl-1.8.8.jar:/usr/lib/hadoop/lib/commons-logging-1.1.1.jar:/usr/lib/hadoop/lib/commons-configuration-1.6.jar:/usr/lib/hadoop/lib/commons-lang-2.4.jar:. mini
job_201501151144_0042
Task ID: task_201501151144_0042_m_000000 Start TIme: 16-Jan-2015 17:07:35 Finish Time: 16-Jan-2015 17:07:43 (7sec)
Task ID: task_201501151144_0042_m_000001 Start TIme: 16-Jan-2015 17:07:35 Finish Time: 16-Jan-2015 17:07:56 (20sec)
Task ID: task_201501151144_0042_m_000002 Start TIme: 16-Jan-2015 17:07:35 Finish Time: 16-Jan-2015 17:07:43 (7sec)
Task ID: task_201501151144_0042_m_000003 Start TIme: 16-Jan-2015 17:07:43 Finish Time: 16-Jan-2015 17:07:53 (10sec)
Task ID: task_201501151144_0042_m_000004 Start TIme: 16-Jan-2015 17:07:43 Finish Time: 16-Jan-2015 17:07:53 (10sec)
Task ID: task_201501151144_0042_r_000000 Start TIme: 16-Jan-2015 17:07:43 Finish Time: 16-Jan-2015 17:08:00 (17sec)
Task ID: task_201501151144_0042_r_000001 Start TIme: 16-Jan-2015 17:07:43 Finish Time: 16-Jan-2015 17:08:05 (22sec)
Task ID: task_201501151144_0042_r_000002 Start TIme: 16-Jan-2015 17:07:43 Finish Time: 16-Jan-2015 17:08:05 (21sec) 
```

Its good to open the desired `jsp` files of hadoop in its `mapreduce/src/webapps/job/` directory and figure out how JOBTRACKER Web UI is displaying information.

I have derived above codes from [jobtasks.jsp](http://code.metager.de/source/xref/apache/hadoop/mapreduce/src/webapps/job/jobtasks.jsp).

Hope it helps. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:24:54.727

[查看JobClient](http://hadoop.apache.org/docs/r1.1.2/api/org/apache/hadoop/mapred/JobClient.html)的以下方法：

*   [获取地图任务报告（作业 ID）](http://hadoop.apache.org/docs/r1.1.2/api/org/apache/hadoop/mapred/JobClient.html#getMapTaskReports%28org.apache.hadoop.mapred.JobID%29)
*   [getReduceTaskReports(JobID)](http://hadoop.apache.org/docs/r1.1.2/api/org/apache/hadoop/mapred/JobClient.html#getReduceTaskReports%28org.apache.hadoop.mapred.JobID%29)

这两个调用都返回[TaskReport](http://hadoop.apache.org/docs/r1.1.2/api/org/apache/hadoop/mapred/TaskReport.html)对象的数组，您可以从中提取开始/完成时间以及每个任务的单独计数器

# c# - ServiceStack - 我如何使用现有的 IOC？

> ID：16180655
> 
> 赞同：1
> 
> 时间：2013-04-23T23:09:19.380
> 
> 标签：c#, servicestack, autofac

我们有一个现有的 MVC3 项目并使用 Autofac 进行 DI。

为了提供 RESTful 服务，我们打算使用 ServiceStack。我们如何让 ServiceStack 使用初始化 autofac 的现有 Bootstrapper.cs？

我们现有的 Bootrapper.cs：

```
 public static class Bootstrapper
    {
        public static ContainerBuilder builder;
        public static void Initialise()
        {
            builder = new ContainerBuilder();
            builder.RegisterControllers(typeof(MvcApplication).Assembly);
            var container = builder.Build();
            DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:12:35.830

[ServiceStack 文档在这里](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container#use-autofac)提供了一个示例。您只需要实现一个适配器来转发解析到 Autofac。

**更新：**

您可以在注册服务后返回容器实例：

```
public static IContainer Initialise() 
{ 
    builder = new ContainerBuilder(); 
    builder.RegisterControllers(typeof(MvcApplication).Assembly); 
    Register types here builder.Register(x => new FormsAuthWrapper()).As<IFormsAuthentication>();
    builder.Register(x => new ServiceDbContext()).As<DbContext>().As<ServiceDbContext>().InstancePerHttpReques‌​t();
    var container = builder.Build(); 
    DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
    return container;
} 
```

然后您可以使用此实例来创建适配器。

```
IContainerAdapter adapter = new AutofacIocAdapter(Bootstrapper.Initialise());
container.Adapter = adapter; 
```

# r - 如何将 13 位数字的格式更改为 R 中的日期

> ID：16180659
> 
> 赞同：0
> 
> 时间：2013-04-23T23:09:29.507
> 
> 标签：r, date, format

我将数据集导入到 R 中，其中一个变量是日期，但它显示为 13 位数字，例如 1269576000000。如何将此数字更改为日期？我不确定格式应该是什么样的，但我猜这个数字还包含有关时间的信息（小时、分钟、秒）。是否有任何代码可以直接更改 R 中此变量的格式？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T23:31:00.413

最常见的形式是从 1970 年 1 月 1 日开始的秒数，至少 POSIX 标准是这样的。与 Simon0101 不同，我认为您应该使用`as.POSIXct`，因为您通常希望将此类结果粘贴在数据帧中，而 POSIXlt 对象在该环境中会变得混乱。但是，您显然是以毫秒为单位的时间：

```
> as.POSIXct(1269576000000, origin="1970-01-01")
[1] "42201-04-06 17:00:00 PDT"       # not a sensible result
> as.POSIXct(1269576000000/1000, origin="1970-01-01")
[1] "2010-03-26 05:00:00 PDT" 
```

因此，它既不是小数天数也不是秒数，而是自起源以来的毫秒数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T23:22:23.063

您正在寻找`as.POSIXlt`将数字数据类型转换为自原始日期以来经过的（可能）小数天数，这就是为什么重要的是要知道哪个日期被计为第 1 天（或有时是第 0 天！）无论生成您的数据：

```
x <- 1269576000000
# Guessing at the origin
as.POSIXlt( x/1e3, tz="GMT", origin="1970-01-01")
[1] "2010-03-26 04:00:00 GMT" 
```

并显示小数秒，设置选项`digits.secs`，即

```
options(digits.secs=3)
x <- 1269576000500
as.POSIXlt( x/1e3, tz="GMT", origin="1970-01-01")
[1] "2010-03-26 04:00:00.5 GMT" 
```

可以很容易地将其添加到数据框中（我不确定为什么@DWin 认为这是一个问题）：

```
x <- 1269576000000
x <- seq( x , by = 500 , length.out = 10 )
df <- data.frame( ID = 1:10 , Time = as.POSIXlt( x/1e3, tz="GMT", origin="1970-01-01") )
df
   ID                  Time
1   1 2010-03-26 04:00:00.0
2   2 2010-03-26 04:00:00.5
3   3 2010-03-26 04:00:01.0
4   4 2010-03-26 04:00:01.5
5   5 2010-03-26 04:00:02.0
6   6 2010-03-26 04:00:02.5
7   7 2010-03-26 04:00:03.0
8   8 2010-03-26 04:00:03.5
9   9 2010-03-26 04:00:04.0
10 10 2010-03-26 04:00:04.5 
```

# ios - Trigger.io IOS包复制文件

> ID：16180660
> 
> 赞同：2
> 
> 时间：2013-04-23T23:09:34.237
> 
> 标签：ios, trigger.io, ipa

我第一次用 trigger.io 构建我的生产 IOS 应用程序，对文件大小有点震惊，所以当我查看 IPA 时，我注意到在 IPA 的根目录中它有启动画面图像并且在 src 目录中它具有相同的图像。

这占了大约 10 个额外的兆，当您开始为 IPAD Iphone 等设置所有不同的分辨率时，这些文件会很大。

因此，看起来 IPA 创建过程从 src 目录中获取文件并将它们放在 IPA 的根目录中，但没有将它们从 src 位置删除，现在我需要的图像加倍，尺寸也加倍。

# java - 当应用程序部署在 Eclipse 之外时，调用 JSP 文件会产生 NoSuchMethodError

> ID：16180663
> 
> 赞同：2
> 
> 时间：2013-04-23T23:09:40.030
> 
> 标签：java, jsp, maven, servlets, web-applications

我有一个 Maven 项目，它在 Eclipse 中完全按照预期工作。它还在 Eclipse 之外构建和运行，但是当我尝试调用前端（JSP 网页）时，我得到以下信息：

> 访问 / 时出现问题。原因：
> 
> ```
> javax.servlet.ServletContext.getJspConfigDescriptor()Ljavax/servlet/descriptor/JspConfigDescriptor; 
> ```
> 
> ## **造成的：**
> 
> java.lang.NoSuchMethodError: javax.servlet.ServletContext.getJspConfigDescriptor()Ljavax/servlet/descriptor/JspConfigDescriptor; ...

我环顾四周，似乎此消息与 Servlet 2.5 和 Servlet 3.0 之间的不兼容有关。但是我的 pom 中已经有 Servlet 3.0 作为依赖项：

```
<dependency>
  <groupId>javax.servlet</groupId>
  <artifactId>javax.servlet-api</artifactId>
  <version>3.0.1</version>
</dependency> 
```

因此，即使构建本身成功，我也无法弄清楚为什么当我在 Eclipse 之外构建和部署时没有包含我需要的这种依赖关系。

知道是什么原因造成的以及如何解决吗？

编辑：在 web.xml 中没有配置 JSP 访问。index.jsp 文件是为码头服务器设置的欢迎文件，带有以下代码段：

```
// configure webapp
WebAppContext webroot = new WebAppContext();
webroot.setResourceBase("src/main/webapp");
webroot.setContextPath("/");
webroot.setWelcomeFiles(new String[] {"index.jsp"});
webroot.setParentLoaderPriority(true);
server.setHandler(webroot); 
```

剩下的几个 jsp 文件在 webapp 文件夹中。

编辑 2：我检查了打包项目时创建的 jar 的内容，似乎 jar 中有 javax/servlet/Servlet.class 的多个副本。这有点令人困惑。我假设我在 pom 中的这些其他依赖项（如下所列）必须添加额外的 Servlet.class 文件。

```
<dependency>
  <groupId>org.eclipse.jetty</groupId>
  <artifactId>jetty-server</artifactId>
  <version>8.1.8.v20121106</version>
</dependency>
<dependency>
  <groupId>org.eclipse.jetty</groupId>
  <artifactId>jetty-webapp</artifactId>
  <version>8.1.8.v20121106</version>
</dependency>
<dependency>
    <groupId>org.eclipse.jetty</groupId>
    <artifactId>jetty-jsp</artifactId>
    <version>8.1.8.v20121106</version>
</dependency> 
```

但我不确定如何解决这个问题......

如果有人有任何想法，我很想听听他们的意见。我唯一真正的限制是我必须使用码头 8.1.8.v20121106。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:15:21.160

在我看来，您可能在 Tomcat 6 上部署了一个 servlet 3.0，它不受支持，会导致此异常。

另一种可能性是你在你的战争中导出额外的 .classes 会干扰 tomcat 的默认库。

# sql - PostgreSQL 的 WHERE "table"."column" IN 查询顺序

> ID：16180664
> 
> 赞同：2
> 
> 时间：2013-04-23T23:09:40.707
> 
> 标签：sql, postgresql, sql-order-by

在 PostgreSQL 中，是否执行此查询

```
SELECT "table".* FROM "table" WHERE "table"."column" IN (1, 5, 3) 
```

总是按`1, 5, 3`顺序返回结果还是模棱两可？
如果它是模棱两可的，我如何正确地确保结果是有序的`1, 5, 3`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:12:41.573

WHERE 子句不会以任何方式对结果进行排序，它只会选择匹配的记录，无论数据库索引以何种顺序找到它们。

您必须添加一个 order by 子句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T23:19:17.123

真实前的虚假订单

```
SELECT "table".*
FROM "table"
WHERE "table"."column" IN (1, 5, 3)
order by
    "column" != 1,
    "column" != 5,
    "column" != 3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T23:19:39.583

在您的选择语句中添加如下内容

```
order by CASE WHEN "column"=1 THEN 1
              WHEN "column"=2 THEN 2
              ELSE 3
       END 
```

如果您有三个以上的值，则创建查找表并在查询中加入该表可能会更容易

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T23:23:09.903

当您在 select 语句中使用“IN”时，Postgre 只返回针对该值范围的匹配行。这绝不是模棱两可的，但是如果您需要对结果进行排序，则需要显式添加 ORDER BY "column1,column2..."

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T23:40:52.193

一个*集合*本身*没有顺序*。`SELECT`查询需要返回`ORDER BY`有序行。

其他答案在您的 中建议`CASE`了语句或布尔表达式，但是对于大表`ORDER BY`来说，这远非优雅且*效率低下。*我建议为您的查询使用**数组**或**逗号分隔的字符串**而不是集合。

对于给定的表：

```
CREATE TABLE tbl (col int); 
```

使用*数组*它可以像这样工作：

```
SELECT col
FROM   tbl
JOIN  (
   SELECT col, row_number() OVER () AS rn
   FROM   unnest('{1,5,3}'::int[]) AS col
   ) u USING (col)
ORDER  BY rn; 
```

返回*在输入数组的序列中找到的*所有行：

[**-> SQL小提琴**](http://www.sqlfiddle.com/#!12/6dcf6/1)

有关更多详细信息和面向未来的代码，请考虑这个密切相关的问题：
[PostgreSQL unnest() with element number](https://stackoverflow.com/questions/8760419/postgresql-unnest-with-element-number)

或 dba.SE 上的相应问题：
[如何保留未嵌套数组中元素的原始顺序？](https://dba.stackexchange.com/questions/27279/how-do-i-preserve-the-order-of-the-original-elements-in-an-unnested-array)

# c++ - 给定一个矩形区域和一组矩形，检查整个区域是否被它们覆盖

> ID：16180667
> 
> 赞同：1
> 
> 时间：2013-04-23T23:09:59.957
> 
> 标签：c++, algorithm

这里的所有值都是实数，最多有两个浮点数。

假设我们有一个矩形区域，`100.0`由`75.0`。

然后给你一组矩形。如何检查这些统一的矩形是否覆盖整个区域？

如果我们有

```
(0,0,50,75) 
```

显然这不会发生，因为它只覆盖了一半的区域。如果我们有

```
(0,0,50,75)
(50,0,50,75) 
```

那么这确实有效，因为两个矩形都将有效地覆盖整个`(100,75)`.

**我试过什么**

我*试图*（没有工作）制作一个多维布尔数组：

```
bool area[10000][7500]; 
```

这些是该区域的尺寸，乘以 100，这样我就不必处理浮点数了。然后我只是迭代我的每个矩形（它们的值也乘以 100），并且对于它们中的每个“像素”，我将布尔值转换为`true`.

最终，我检查该区域中的所有布尔值是否都是`true`.

事实证明这是非常愚蠢的。你能帮我找到更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T23:17:24.417

我认为这样的策略会奏效：

1.  扔掉完全超出您所在区域的所有矩形
2.  沿着列表中矩形的边缘相对于一个轴将您的区域拆分为较小的矩形
3.  将步骤 2 中创建的区域矩形列表沿覆盖列表中矩形的边缘相对于另一个轴拆分
4.  您现在有两个矩形列表，其中封面列表中必须有一个完全覆盖每个区域矩形

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T23:36:14.633

我相信您的“位图”尝试由于（通常的）浮点舍入问题而失败。不幸的是，您对此无能为力。

现在对于正确的算法，我将使用减法技术来处理它。

*   让我们称您的初始矩形集为 R。
*   初始化第二组矩形 S，它最初包含一个覆盖整个区域的矩形。
*   对于 R 中的每个矩形：
    *   对于 S 中的每个矩形：
        *   如果两个 R 和 S 矩形相交，则将 S 矩形替换为所需数量的矩形（如果我没记错的话，为 0 到 4 个）覆盖 S 矩形左侧的非相交部分。
        *   继续迭代 S，注意不要为刚刚添加的新 S 矩形计算任何内容（我们已经知道它不会与当前 R 矩形相交）。
    *   继续迭代 R，这次考虑新的 S 矩形，直到：
        *   S 中没有剩余矩形，在这种情况下，您的 R 矩形**确实覆盖**了整个区域。
        *   或者，您遍历了所有 R 矩形，但仍有 S 矩形，在这种情况下，您的 R 矩形**不会覆盖**整个区域。

至于复杂性，我不确定它与@500-Internal-Server-Error 或@Tommy 的解决方案相比如何，但是嘿，至少我设法想出了一些东西，当我阅读时我认为我做不到一开始你的问题——我通常不擅长空间的东西。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T23:27:43.783

与 500 - Internal Server Error's 在概念上非常相似的方法可以避免最后一步所暗示的 O(n^2) 搜索：

1.  从覆盖集中构建每个矩形的垂直边界列表；
2.  假设有 n 个边界，你在源矩形上有 n+1 个垂直条要考虑；
3.  对于每个条带，获取与其重叠的所有矩形的列表（您可以在 O(n) 时间内通过从矩形推到垃圾箱而不是向后搜索来完成此操作）；
4.  从左到右对列表进行排序（即 O(n log n)）；
5.  遍历排序列表并尝试找到一个间隔，其中一个跨度结束，直到稍后才开始（另一个 O(n) 任务）。

如果您找到合适的间隙，则不会覆盖原件。如果你不这样做，那就是。顺便说一下，这基本上就是跨度缓冲的工作原理。

# c - 读入用户输入，但必须与 C 中的字符串/十进制/字符区分开来

> ID：16180669
> 
> 赞同：0
> 
> 时间：2013-04-23T23:10:06.227
> 
> 标签：c, user-input

```
q - quit the program immediately. 
r <int> - //does something
i <int1> <int2> - //does something
d <int1> <ind2> - //does something
t <int1> <int2> - //does something
l - // does something
f <filename> - // does something 
```

基本上用户会输入

'q' 它将退出该功能。

或者输入 'r' '1' '3' 它应该做一些事情。

我以前使用过 sscanf ，但这只是因为我知道 ints 会出现在字符选择之后。

对于最后一个

f 用户必须输入“f”，然后输入文件名，它应该打开文件。

我如何使用 sscanf 将这部分拟合到方程中。目前我的代码看起来像这样。

```
printf("Please enter a choice ");
sscanf(sentence," %c %d %d", &choice, &val1, &val2) 
```

但是如果用户输入 'f' "filenamehere.exe" 这将不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:56:05.070

你要做的就是把你的阅读分成两个步骤......首先获得用户想要的模式，然后根据模式采取行动......

```
char mode;

printf( "Please enter a choice " );
if( scanf( "%c", &mode ) < 1 )
{ 
    printf( "Could not read input\n" );
    exit( -1 );
}

switch( mode )
{
    case 'q': exit( 0 );
    case 'r':
    {
        int value;
        if( scanf( "%d\n", &value ) < 1 )
        {
            printf( "command 'r' requires you to input an integer value\n" );
            exit( -1 );
        }
        // do something with value
        break;
    }
    // etc...
} 
```

# .htaccess - 使用 .htaccess 重定向，以便用户显示为子域

> ID：16180679
> 
> 赞同：0
> 
> 时间：2013-04-23T23:11:06.523
> 
> 标签：.htaccess, redirect

我一直在使用`.htaccess`一些重定向，我很难为我想要的新重定向找到任何解决方案。

我的网站上有用户，网址如下所示：

```
http://www.domain.com/users.php?user=username 
```

是否可以使用 htaccess 重写它以使其显示：

```
http://username.domain.com 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:24:08.110

只要您将其设置为所有子域都`domain.com`指向*相同的文档根目录*，`domain.com`那么您就可以使用文档根目录中的单个 htaccess 文件执行此操作：

```
RewriteEngine On

# externally redirect to user's subdomain when a specific request is made to users.php
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /users\.php\?user=([^&\ ]+)
RewriteRule ^ http://%2.domain.com/ [L,R=301]

# internally rewrite the user's subdomain to users.php
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} ^([^.]+)\.domain\.com$ [NC]
RewriteRule ^/?$ /users\.php?user=%1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:16:26.087

这些方面的东西：

`RewriteRule ^users.php?user=(.*)$ http://$1.domain.com/ [R,L]`

# python - 添加不同形状的numpy数组

> ID：16180681
> 
> 赞同：5
> 
> 时间：2013-04-23T23:11:14.237
> 
> 标签：python, numpy

我想添加两个不同形状的 numpy 数组，但没有广播，而是将“缺失”值视为零。可能是最简单的例子

```
[1, 2, 3] + [2] -> [3, 2, 3] 
```

或者

```
[1, 2, 3] + [[2], [1]] -> [[3, 2, 3], [1, 0, 0]] 
```

我事先不知道形状。

我正在搞乱每个 np.shape 的输出，试图找到容纳它们的最小形状，将每个形状嵌入到该形状的零数组中，然后添加它们。但这似乎相当多的工作，有没有更简单的方法？

提前致谢！

编辑：“大量工作”我的意思是“为我做很多工作”而不是为机器，我追求优雅而不是效率：我努力获得保持它们两者的最小形状是

```
def pad(a, b) :
    sa, sb = map(np.shape, [a, b])
    N = np.max([len(sa),len(sb)])
    sap, sbp = map(lambda x : x + (1,)*(N-len(x)), [sa, sb])
    sp = np.amax( np.array([ tuple(sap), tuple(sbp) ]), 1) 
```

不漂亮 ：-/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T23:55:25.840

> 我正在搞乱每个 np.shape 的输出，试图找到容纳它们的最小形状，将每个形状嵌入到该形状的零数组中，然后添加它们。但这似乎相当多的工作，有没有更简单的方法？

获得`np.shape`是微不足道的，找到同时保持两者的最小形状非常容易，当然添加也是微不足道的，所以唯一的“大量工作”部分是“将每个嵌入到该形状的零数组中”。

是的，您可以通过调用[`resize`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.resize.html#numpy.ndarray.resize)方法（或[`resize`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.resize.html)函数，如果您想制作副本而不是就地更改它们）来消除这种情况。正如文档解释的那样：

> 扩大数组：……缺失的条目用零填充

例如，如果您静态地知道维度：

```
>>> a1 = np.array([[1, 2, 3], [4, 5, 6]])
>>> a2 = np.array([[2], [2]])
>>> shape = [max(a.shape[axis] for a in (a1, a2)) for axis in range(2)]
>>> a1.resize(shape)
>>> a2.resize(shape)
>>> print(a1 + a2)
array([[3, 4, 3],
       [4, 5, 6]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T17:02:51.253

这是我能想到的最好的：

```
import numpy as np

def magic_add(*args):
    n = max(a.ndim for a in args)
    args = [a.reshape((n - a.ndim)*(1,) + a.shape) for a in args]
    shape = np.max([a.shape for a in args], 0)
    result = np.zeros(shape)

    for a in args:
        idx = tuple(slice(i) for i in a.shape)
        result[idx] += a
    return result 
```

如果您知道您期望结果有多少维度，您可以稍微清理一下 for 循环，例如：

```
for a in args:
    i, j = a.shape
    result[:i, :j] += a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-05T11:30:22.767

您可以尝试我的解决方案 - 对于维度 1 数组，您必须将数组扩展到维度 2（如下例所示），然后再将其传递给函数。

```
import numpy as np
import timeit

matrix1 = np.array([[0,10],
                    [1,20],
                    [2,30]])
matrix2 = np.array([[0,10],
                    [1,20],
                    [2,30],
                    [3,40]])
matrix3 = np.arange(0,0,dtype=int) # empty numpy-array
matrix3.shape = (0,2) # reshape to 0 rows
matrix4 = np.array([[0,10,100,1000],
                    [1,20,200,2000]])
matrix5 = np.arange(0,4000,1)
matrix5 = np.reshape(matrix5,(4,1000))
matrix6 = np.arange(0.0,4000,0.5)
matrix6 = np.reshape(matrix6,(20,400))
matrix1 = np.array([1,2,3])
matrix1 = np.expand_dims(matrix1, axis=0)
matrix2 = np.array([2,1])
matrix2 = np.expand_dims(matrix2, axis=0)

def add_2d_matrices(m1, m2, pos=(0,0), filler=None):
    """
    Add two 2d matrices of different sizes or shapes,
    offset by xy coordinates, whereat x is "from left to right" (=axis:1)
    and y is "from top to bottom" (=axis:0)
    Parameterse:
        - m1: first matrix
        - m2: second matrix
        - pos: tuple (x,y) containing coordinates for m2 offset,
        - filler: gaps are filled with the value of filler (or zeros)
    Returns:
        - 2d array (float):
            containing filler-values, m1-values, m2-values
            or the sum of m1,m2 (at overlapping areas)
    Author:
        Reinhard Daemon, Austria
    """
    # determine shape of final array:
    _m1 = np.copy(m1)
    _m2 = np.copy(m2)
    x,y = pos
    y1,x1 = _m1.shape
    y2,x2 = _m2.shape
    xmax = max(x1, x2+x)
    ymax = max(y1, y2+y)

    # fill-up _m1 array with zeros:
    y1,x1 = _m1.shape
    diff = xmax - x1
    _z = np.zeros((y1,diff))
    _m1 = np.hstack((_m1,_z))
    y1,x1 = _m1.shape
    diff = ymax - y1
    _z = np.zeros((diff,x1))
    _m1 = np.vstack((_m1,_z))

    # shift _m2 array by 'pos' and fill-up with zeros:
    y2,x2 = _m2.shape
    _z = np.zeros((y2,x))
    _m2 = np.hstack((_z,_m2))
    y2,x2 = _m2.shape
    diff = xmax - x2
    _z = np.zeros((y2,diff))
    _m2 = np.hstack((_m2,_z))
    y2,x2 = _m2.shape
    _z = np.zeros((y,x2))
    _m2 = np.vstack((_z,_m2))
    y2,x2 = _m2.shape
    diff = ymax - y2
    _z = np.zeros((diff,x2))
    _m2 = np.vstack((_m2,_z))

    # add the 2 arrays:
    _m3 = _m1 + _m2

    # find and fill the "unused" positions within the summed array:
    if filler not in (None,0,0.0):
        y1,x1 = m1.shape
        y2,x2 = m2.shape
        x1min = 0
        x1max = x1-1
        y1min = 0
        y1max = y1-1
        x2min = x
        x2max = x + x2-1
        y2min = y
        y2max = y + y2-1
        for xx in range(xmax):
            for yy in range(ymax):
                if x1min <= xx <= x1max and y1min <= yy <= y1max:
                    continue
                if x2min <= xx <= x2max and y2min <= yy <= y2max:
                    continue
                _m3[yy,xx] = filler

    return(_m3)

t1 = timeit.Timer("add_2d_matrices(matrix5, matrix6, pos=(1,1), filler=111.111)", \
"from __main__ import add_2d_matrices,matrix5,matrix6")
print("ran:",t1.timeit(number=10), "milliseconds")

print("\n\n")
my_res = add_2d_matrices(matrix1, matrix2, pos=(1,1), filler=99.99)
print(my_res) 
```

# yii - Yii URL重写不起作用

> ID：16180683
> 
> 赞同：0
> 
> 时间：2013-04-23T23:11:36.293
> 
> 标签：yii

我正在使用 YiiBoilerPlate 开发一个 Yii 应用程序。

我能够到达`http://localhost/testapp/frontend/www/`

当我点击登录时，它给了我消息

*在此服务器上找不到请求的 URL /testapp/frontend/www/site/login/。*

是否缺少任何配置？

**.htaccess 有：**

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule . index.php 
```

**frontend/config/main.php 有：**

```
 'urlManager' => array(
            'urlFormat' => 'path',
            'showScriptName' => false,
            'urlSuffix' => '/',
            'rules' => $params['url.rules']
        ), 
```

**在apache访问日志中..它有：**

```
*127.0.0.1 - - [23/Apr/2013:18:04:24 -0500] "GET /testapp/frontend/www/site/login/ HTTP/1.1" 404 516 "http://localhost/testapp/frontend/www/" "Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:20.0) Gecko/20100101 Firefox/20.0"* 
```

在线尝试了所有相关建议，但仍然无效。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:12:30.750

似乎你有`loginRequire`，`http://localhost/testapp/frontend/www/`它会将你重定向到`loginUrl`不存在的地方。

您可以通过添加到配置轻松解决它：

```
// ......
'components'=>array(
   'user'=>array(
       'loginUrl'=>array('user/login'), # path to login controller/action
   ),
), 
```

否则，如果您没有登录控制器，则会出现错误消息：

```
The requested URL /testapp/frontend/www/user/login/ was not found on this server. 
```

# python - 如何在没有 X 的情况下在 Enthought Canopy 中安装软件包？

> ID：16180684
> 
> 赞同：4
> 
> 时间：2013-04-23T23:11:41.233
> 
> 标签：python, enthought

我使用[Enthought Python Distribution](https://www.enthought.com/products/epd/) (EPD) 已经有一段时间了。它允许用户使用单个命令安装最新的预编译 python 包（例如 numpy、scipy）。

今天我想在一台新机器上安装 EPD，但发现他们已经用一种名为[Enthought Canopy](https://www.enthought.com/products/canopy/)的新产品取代了它。Canopy 的问题在于它有一个 GUI：

```
__boot__.py: cannot connect to X server 
```

我的机器是无头的，不运行 X 服务器。是否可以在没有 X 的情况下在 Canopy 中安装软件包？我搜索了他们的知识库，但找不到解决方案。他们要求无偿和学术用户在 Stack Overflow 上发布问题，而不是与他们联系。

如果这不可能，有没有办法再安装 EPD？

编辑：我意识到这个问题并不真正属于 SO。如果需要，请将其迁移到 SU。谢谢。

# php - 保留数字和小数的格式，但删除其他所有内容

> ID：16180686
> 
> 赞同：0
> 
> 时间：2013-04-23T23:11:50.030
> 
> 标签：php, numbers, preg-match

我有一个州税和地方税的输入字段。

输入每个字段数据，然后我将两者加在一起以获得总税。

我已经尝试过 number_format 和 round 和 print_f 但它们都没有按照我的需要工作。我试图找到 preg_match 的可能性。

我需要的是，输入字段将采用以下内容：

```
10.2
10.33
10.301
3.275
2.90 
```

如果有人输入 0.10，它应该转换为 0.10。如果他们输入 0.10，它应该不理会它。.125 相同应输入为 0.125

如果它不是数字或小数，则需要将其删除。

```
$statetax = $_POST['statetax']; 
$localtax = $_POST['localtax'];
$totaltax = $statetax+$localtax;

insert into tax (state, local, total) values($state, $local, $total) 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:01:26.780

this is what i ended up using.

```
$statetax = preg_replace("/[^0-9\.]/", "",$_POST['statetax']);
$localtax = preg_replace("/[^0-9\.]/", "",$_POST['localtax']);
$totaltax = ($statetax+$localtax); 
```

thanks everyone for chiming in.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:20:01.893

您应该使用[`is_numeric()`](http://www.php.net/manual/en/function.is-numeric.php)以确保您的输入是一个数字。然后转换为浮点数并转换回字符串，以确保 a`0`将在需要时添加。这使用[`floatval()`](http://www.php.net/manual/en/function.floatval.php)和[`strval()`](http://www.php.net/manual/en/function.strval.php)

我希望以下示例对您有所帮助：

```
$tests = array(
    '10.2',
    '10.33',
    '.301',
    'bar',
    '3.275',
    '2.90',
    '.1',
    'foo'
);

foreach($tests as $input) {
    // check if the value is number using `is_numeric`
    if(!is_numeric($input)) {
        echo "Error: Not a number: $input\n";
        continue;
    }   

    // convert to float and back to string ( in the echo ) will 
    // automatically prepend a 0 if required
    $sanitizedInput = strval(floatval($input));
    echo "Sanitized input: $sanitizedInput\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T23:17:44.747

尝试：

```
$statetax = (float) is_numeric($_POST['statetax']) ? $_POST['statetax'] : 0;
$localtax = (float) is_numeric($_POST['localtax']) ? $_POST['localtax'] : 0;
$totaltax = $statetax + $localtax;

mysql_query(
    "insert into tax ('state', 'local', 'total') values($statetax, $localtax, $totaltax)"
); 
```

一般来说，在构建 SQL 字符串时转义用户输入 ($_POST, ...) 是一个好主意。否则，您将自己设置为 SQL 注入。[在这里](http://php.net/manual/en/security.database.sql-injection.php)阅读。在这种情况下，它没有必要，因为浮点类型转换确保您的 POST 值被“转义”。

# c# - 创建一个为数组 c# 中的每个值打印不同输出的方法

> ID：16180696
> 
> 赞同：0
> 
> 时间：2013-04-23T23:12:49.810
> 
> 标签：c#, arrays, algorithm, perceptron

嗨，我目前有一个数组，其中包含文本文件的所有值，并且当前它在运行时读取文件，但我想在运行时为数组中的每个值生成输出。现在，在读回所有值后程序运行结束时，我有一个输出，但我想在程序打印回的每个值旁边生成一个输出列表。输出是使用训练算法创建的。这是我的代码：

这是我定义数组和其他变量的地方：

```
 `double[] x = new double [3501];`
        double output = 1;

        double netSum;
        double input = 0;            
        double[] x_P = new double[3501];
        double error = input - output;

        Random r = new Random();
        double[] weights = { r.NextDouble(), r.NextDouble(), r.NextDouble() };
        double learningrate = 0.1;
        double delta;    enter code here 
```

这是将文本文件放入数组的位置：

```
try
        {
            using (StreamReader sr = new StreamReader("test.txt"))
            {
                for (int y = 0; y < 3501; y++)
                {
                   String line = sr.ReadLine();
                   x[y] = Double.Parse(line);
                   Console.WriteLine(line);

                }

            } 
```

这是我用来创建输出的算法：

```
while (error != 0.01)
            {

                error = 1;

                foreach (double x_value in x)
                {

                    netSum = 0.01;
                    double i = 1;
                    for (i = 1; i < 3501; i++)
                    {

                        netSum =  x[1] * weights[1] + x[2] * weights[2];

                    }

                    x_P[2] = Sigmoid(netSum);
                    output = x_P[2];

                    if (output >= error)
                    {
                        for (i = 1; i < 3501; i++)
                        {

                            delta = x_value - output;
                            error = x[2] - x_P[2];
                            weights[(int)i] += learningrate * delta * x_value;

                            error += Math.Abs(error);

                        }
                    }
                }

                Console.WriteLine(output);

                Console.ReadLine();

            }
        }

        catch (Exception e)
        {
            // Log the exception and quit...                
            Console.WriteLine("The file could not be read:");
            Console.WriteLine(e.Message);

        }

    }

    public static double Sigmoid(double x)
    {
        return 1 / (1 + Math.Exp(-x));
    }

    public double Derivative(double x)
    {

        double s = Sigmoid(x);
        return s * (1 - s);

    } 
```

所以我基本上希望在打印值时为 x 中的每个值打印输出，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:15:16.200

你可以把`Console.WriteLine`你的`foreach`循环里面：

```
foreach (double x_value in x)
{
    ...
    Console.WriteLine(output);
}

Console.ReadLine(); 
```

# javascript - 如果变量有五个以上的零，则 Javascript 匹配

> ID：16180702
> 
> 赞同：0
> 
> 时间：2013-04-23T23:13:22.013
> 
> 标签：javascript

我正在尝试检查 src 是否有超过五个连续的零。例如[http://domain.com/images/00000007.jpg](http://domain.com/images/00000007.jpg)会匹配，但[http://domain.com/images/0000_1.jpg](http://domain.com/images/0000_1.jpg)不会。这是我到目前为止所拥有的，但它似乎不起作用。有什么建议么？

```
if (src.match(/0{5,}$/)) {
  match found
}
else {
  no match found
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:14:20.163

~~您应该从字符串的开头匹配零`^`，即~~

 ~~```
if (/^0{5,}/.test(src)) { ... } 
```~~ 

~~如果您需要在字符串的任何位置匹配 5 个连续的零，则省略任何`^`or `$`。~~

**更新：**在您的情况下，您可以使用类似`if (/\/0{5,}/.test(src)) { ... }`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T23:16:18.230

作为替代方案，您也可以使用[**indexOf()**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)，类似于：

```
if(src.indexOf('00000') > -1){
    alert('matchFound');
} else {
    alert('no match found');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T23:18:37.417

试穿这个尺寸：

```
/0{5,}[^\/]*$/ 
```

它检查五个或更多零，然后是除正斜杠之外的任何内容，直到字符串的末尾。如果要进行其他验证，可以使用正斜杠开始模式以确保文件以五个零开头，或者您可以在末尾添加可接受的文件类型：

```
/\/0{5,}[^\/]*\.(jpe?g|gif|png)$/i 
```

细分（对于您或未来读者不知道的任何部分）：

```
/             Starts the regular expression
  \/          A literal forward slash (escaped because '/' is a delimiter)
  0{5,}       Five or more zeros
  [^\/]*      Anything except a literal forward slash, zero or more times.
  \.          A literal period (unescaped periods match anything except newlines)
  (           start a group
    jpe?g     jpeg or jpg (the ? makes the 'e' match zero or 1 times)
    |         OR
    gif       gif
    |         OR
    png       png
  )           End group
  $           Assert the end of the string.
/             End the regular expression
i             Case insensitive. 
```

# javascript - 将选中的复选框值插入文本字段

> ID：16180704
> 
> 赞同：0
> 
> 时间：2013-04-23T23:13:27.267
> 
> 标签：javascript, jquery

我有一个带有 3 个复选框数组的表单 - 鹰嘴豆泥 []、蛋黄酱 []、果酱 []。在下面的jQuery函数中，当检查所需数量的复选框时，将禁用其余的复选框（当前可行）。

**问题**：当它们被选中时，我也试图将选中的复选框值转换为文本字段值，hummus1、hummus2、mayo1、jam1 - （这些文本字段将更改为隐藏字段以便在实时发布时发布）。2 个hummus 函数不起作用，mayo 和 jam 函数只返回数组的第一个复选框值，无论是否选中。

非常感谢这里的任何帮助。

```
jQuery(function one(){
var max = 2;
var checkboxes = $('input[type="checkbox"][name="hummus[]"]');

checkboxes.change(function(){
var current = checkboxes.filter(':checked').length;
checkboxes.filter(':not(:checked)').prop('disabled', current >= max);

// Trying to insert the 2 checked hummus values from the hummus array into text fields
$('input[type="text"][name="hummus1"]').val($('input[type="checkbox"][name="hummus[0]"]').val());
$('input[type="text"][name="hummus2"]').val($('input[type="checkbox"][name="hummus[1]"]').val());
});
});

jQuery(function two(){
var max = 1;
var checkboxes = $('input[type="checkbox"][name="mayo[]"]');

checkboxes.change(function(){
var current = checkboxes.filter(':checked').length;
checkboxes.filter(':not(:checked)').prop('disabled', current >= max);

// Trying to insert the single checked mayo value into the mayo1 text field
$('input[type="text"][name="mayo1"]').val($('input[type="checkbox"][name="mayo[]"]').val());
});
});

jQuery(function three(){
var max = 1;
var checkboxes = $('input[type="checkbox"][name="jam[]"]');

checkboxes.change(function(){
var current = checkboxes.filter(':checked').length;
checkboxes.filter(':not(:checked)').prop('disabled', current >= max);

// Trying to insert the single checked jam value into the jam1 text field
$('input[type="text"][name="jam1"]').val($('input[type="checkbox"][name="jam[]"]').val());
});
});

jQuery(function uncheck() {
// Uncheck all checkboxes on page load    
$(':checkbox:checked').removeAttr('checked');
}) 
```

的HTML：

```
<form id="orderProductForm219" name="orderProductForm219" method="post">
<b>Select any TWO Hummus from this list.</b> 
<br /><br />
<input type="checkbox" name="hummus[]" value="chilli hummus with harissa"> chilli hummus with harissa<br />
<input type="checkbox" name="hummus[]" value="cumin &amp; lemon oil hummus"> cumin &amp; lemon oil hummus<br />
<input type="checkbox" name="hummus[]" value="garlic hummus"> garlic hummus<br />
<input type="checkbox" name="hummus[]" value="pumpkin, fetta &amp; dukkah hummus"> pumpkin, fetta &amp; dukkah hummus
<br /><br />
<b>and include ONE Mayonnaise from this list.</b> 
<br /><br />
<input type="checkbox" name="mayo[]" value="aioli"> aioli<br />
<input type="checkbox" name="mayo[]" value="saffron, dill &amp; mustard mayonnaise"> saffron, dill &amp; mustard mayonnaise<br />
<input type="checkbox" name="mayo[]" value="wasabi mayonnaise"> wasabi mayonnaise<br />
<input type="checkbox" name="mayo[]" value="chilli mayonnaise"> chilli mayonnaise<br />
<input type="checkbox" name="mayo[]" value="caesar dressing"> caesar dressing<br />
<input type="checkbox" name="mayo[]" value="smoked aioli"> smoked aioli
<br /><br />
<b>and include ONE Relish, Jam, Curd or Pesto from this list.</b> 
<br /><br />
<input type="checkbox" name="jam[]" value="middle eastern red pepper &amp; pomegranate pesto"> middle eastern red pepper &amp; pomegranate pesto<br />
<input type="checkbox" name="jam[]" value="aubergine relish"> aubergine relish<br />
<input type="checkbox" name="jam[]" value="beetroot relish"> beetroot relish<br />
<input type="checkbox" name="jam[]" value="tomato &amp; chilli relish"> tomato &amp; chilli relish<br />
<input type="checkbox" name="jam[]" value="taramasala"> taramasala<br />
<input type="checkbox" name="jam[]" value="preserved lemons"> preserved lemons<br />
<input type="checkbox" name="jam[]" value="rasberry &amp; white chocolate jam"> rhubarb, rasberry &amp; white chocolate jam<br />
<input type="checkbox" name="jam[]" value="apricot, saffron &amp; vanilla bean jam"> apricot, saffron &amp; vanilla bean jam<br />
<input type="checkbox" name="jam[]" value="apricot &amp; armaretto jam"> apricot &amp; armaretto jam<br />
<input type="checkbox" name="jam[]" value="rose water &amp; cardamon marmalade"> rose water &amp; cardamon marmalade<br />
<input type="checkbox" name="jam[]" value="whiskey &amp; ginger marmalade"> whiskey &amp; ginger marmalade<br />
<input type="checkbox" name="jam[]" value="lemon curd"> lemon curd<br />
<input type="checkbox" name="jam[]" value="Lemon &amp; passion fruit curd"> lemon &amp; passion fruit curd
<br />
<input type="hidden" name="productId" value="219" />
<input type="hidden" name="productTitle" value="Gift Pack" />
<input type="hidden" name="price" value="1.00" />
<input type="text" name="hummus1" id="hummus1" value="" />
<input type="text" name="hummus2" id="hummus2" value="" />
<input type="text" name="mayo1" id="mayo1" value="" />
<input type="text" name="jam1" id="jam1" value="" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:32:00.877

查看我所做的更改，看看您是否了解发生了什么。[这段代码在我的演示](http://cssdeck.com/labs/hp9a8met)中对我来说很好。您不需要将每个更改功能包装在其自己的功能中，您只需在文档准备功能中设置每个操作。

HTML：

```
<form id="orderProductForm219" name="orderProductForm219" method="post">
    <b>Select any TWO Hummus from this list.</b> 
    <br /><br />
    <input type="checkbox" name="hummus[]" value="chilli hummus with harissa"> chilli hummus with harissa<br />
    <input type="checkbox" name="hummus[]" value="cumin &amp; lemon oil hummus"> cumin &amp; lemon oil hummus<br />
    <input type="checkbox" name="hummus[]" value="garlic hummus"> garlic hummus<br />
    <input type="checkbox" name="hummus[]" value="pumpkin, fetta &amp; dukkah hummus"> pumpkin, fetta &amp; dukkah hummus
    <br /><br />
    <b>and include ONE Mayonnaise from this list.</b> 
    <br /><br />
    <input type="checkbox" name="mayo[]" value="aioli"> aioli<br />
    <input type="checkbox" name="mayo[]" value="saffron, dill &amp; mustard mayonnaise"> saffron, dill &amp; mustard mayonnaise<br />
    <input type="checkbox" name="mayo[]" value="wasabi mayonnaise"> wasabi mayonnaise<br />
    <input type="checkbox" name="mayo[]" value="chilli mayonnaise"> chilli mayonnaise<br />
    <input type="checkbox" name="mayo[]" value="caesar dressing"> caesar dressing<br />
    <input type="checkbox" name="mayo[]" value="smoked aioli"> smoked aioli
    <br /><br />
    <b>and include ONE Relish, Jam, Curd or Pesto from this list.</b> 
    <br /><br />
    <input type="checkbox" name="jam[]" value="middle eastern red pepper &amp; pomegranate pesto"> middle eastern red pepper &amp; pomegranate pesto<br />
    <input type="checkbox" name="jam[]" value="aubergine relish"> aubergine relish<br />
    <input type="checkbox" name="jam[]" value="beetroot relish"> beetroot relish<br />
    <input type="checkbox" name="jam[]" value="tomato &amp; chilli relish"> tomato &amp; chilli relish<br />
    <input type="checkbox" name="jam[]" value="taramasala"> taramasala<br />
    <input type="checkbox" name="jam[]" value="preserved lemons"> preserved lemons<br />
    <input type="checkbox" name="jam[]" value="rasberry &amp; white chocolate jam"> rhubarb, rasberry &amp; white chocolate jam<br />
    <input type="checkbox" name="jam[]" value="apricot, saffron &amp; vanilla bean jam"> apricot, saffron &amp; vanilla bean jam<br />
    <input type="checkbox" name="jam[]" value="apricot &amp; armaretto jam"> apricot &amp; armaretto jam<br />
    <input type="checkbox" name="jam[]" value="rose water &amp; cardamon marmalade"> rose water &amp; cardamon marmalade<br />
    <input type="checkbox" name="jam[]" value="whiskey &amp; ginger marmalade"> whiskey &amp; ginger marmalade<br />
    <input type="checkbox" name="jam[]" value="lemon curd"> lemon curd<br />
    <input type="checkbox" name="jam[]" value="Lemon &amp; passion fruit curd"> lemon &amp; passion fruit curd
    <br />
    <input type="hidden" name="productId" value="219" />
    <input type="hidden" name="productTitle" value="Gift Pack" />
    <input type="hidden" name="price" value="1.00" />
    <input type="text" name="hummus1" id="hummus1" value="" />
    <input type="text" name="hummus2" id="hummus2" value="" />
    <input type="text" name="mayo1" id="mayo1" value="" />
    <input type="text" name="jam1" id="jam1" value="" />
</form> 
```

JavaScript：

```
$(document).ready(function()
{
    $('input[type=checkbox]:checked').removeAttr('checked');

    var checkboxesH = $('input[type="checkbox"][name="hummus[]"]');  
    checkboxesH.change(function()
    {
        var max = 2;
        var current = checkboxesH.filter(':checked').length;

        checkboxesH.filter(':not(:checked)').prop('disabled', current >= max);

        // Trying to insert the 2 checked hummus values from the hummus array into text fields
        var hummus1Val = $(checkboxesH.filter(':checked').get(0)).val();
        $('input[type="text"][name="hummus1"]').val(hummus1Val);
        var hummus2Val = $(checkboxesH.filter(':checked').get(1)).val();
        $('input[type="text"][name="hummus2"]').val(hummus2Val);
    });

    var checkboxesM = $('input[type="checkbox"][name="mayo[]"]');
    checkboxesM.change(function()
    {
        var max = 1;
        var current = checkboxesM.filter(':checked').length;

        checkboxesM.filter(':not(:checked)').prop('disabled', current >= max);

        // Trying to insert the single checked mayo value into the mayo1 text field
        var mayo1Val = checkboxesM.filter(':checked').val();
        $('input[type="text"][name="mayo1"]').val(mayo1Val);
    });

    var checkboxesJ = $('input[type="checkbox"][name="jam[]"]');
    checkboxesJ.change(function()
    {
        var max = 1;
        var current = checkboxesJ.filter(':checked').length;
        checkboxesJ.filter(':not(:checked)').prop('disabled', current >= max);

        // Trying to insert the single checked jam value into the jam1 text field
        var jam1Val = checkboxesJ.filter(':checked').val();
        $('input[type="text"][name="jam1"]').val(jam1Val);
    });
}); 
```

# c# - 不正确的 Resharper 建议 - 未使用的变量（实际用于数据绑定）

> ID：16180706
> 
> 赞同：4
> 
> 时间：2013-04-23T23:13:31.207
> 
> 标签：c#, asp.net, resharper

我有一段代码，Resharper 告诉我有未使用的变量，但这些变量肯定是使用的。变量在 Databind() 中使用，要绑定的字段被指定为字符串。由于使用字符串变量访问字段名称，Resharper 认为它们没有被使用。

在下面的代码示例中，Resharper 告诉我将公共变量更改为私有。这样做之后，它告诉我该变量未使用并且可以删除。这两个建议都是错误的，因为使用了变量并且必须是公共的。

我不喜欢 Resharper 警告我这个并且是黄色的。我想检查我的绿色代码。我知道我可以使用取消注释的选项来忽略这一点，但过去我从来**没有**使用过这个选项，并且能够找到其他解决方案来让我的代码变绿。在这种情况下，我无法找到另一种方法。有谁知道我怎样才能让 Resharper 识别出这个变量正在被使用？

```
using System;
using System.Collections;
using System.Web.UI.WebControls;

public partial class TestCode_General_ResharperTest : System.Web.UI.Page
{
    private class TestClass
    {
        public TestClass(string name, string id)
        {
            ID = id;
            Name = name;
        }

        public string ID;  /*Resharper says this can be made private*/
        public string Name; /*Resharper says this can be made private*/
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            DropDownList testList = new DropDownList();
            ArrayList groups = getTestList();
            testList.DataSource = groups;
            testList.DataValueField = "ID";
            testList.DataTextField = "Name";
            testList.DataBind();    /* Databind causes the public variables to be accessed.*/
        }
    }

    private static ArrayList getTestList()
    {
        ArrayList groupInfo = new ArrayList();
        string[] pairs = new[] { "Test:1", "Test 2:2", "Test 3:3" };
        foreach (string pair in pairs)
        {
            string[] values = pair.Split(new[] { ':' });
            groupInfo.Add(new TestClass(values[0], values[1]));
        }
        return groupInfo;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-24T01:02:53.457

我认为你有3个选择：

1.  使用匿名类，因为无论如何您都没有在这里使用强类型。
2.  用评论禁止警告，并添加评论解释原因。
3.  添加 ReSharper 的`[UsedImplicitly]`属性，并添加解释原因的注释（虽然不确定这是否适用于字段）。

选项 1 的示例：

```
using System;
using System.Collections;
using System.Web.UI.WebControls;

public partial class TestCode_General_ResharperTest : System.Web.UI.Page
{
    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        if (Page.IsPostBack)
            return;

        var testList = new DropDownList();
        testList.DataSource = GetTestListData();
        testList.DataValueField = "ID";
        testList.DataTextField = "Name";
        testList.DataBind();    /* Databind causes the public variables to be accessed.*/
    }

    private static IEnumerable<object> GetTestListData()
    {
        var groups = new List<object>();
        var pairs = new[] { "Test:1", "Test 2:2", "Test 3:3" };
        foreach (var pair in pairs)
        {
            var values = pair.Split(new[] { ':' });
            groups.Add(new { ID = values[0], Name = values[1] });
        }
        return groups;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:46:44.533

Resharper 无法知道 DropDownList 上的 DataBind 方法需要访问这些字段/属性。如果要删除警告，可以将它们设为属性，然后像其他人提到的那样创建您的 TestClass，或者您可以使用注释来抑制它们。

我每天都在工作中看到这一点。当开发人员应该意识到 Resharper 的存在是为了**提出**他们可以审查的建议，然后在他们的代码有意义时选择忽略时，他们会下定决心让 Resharper 开心，并让 OCD 克服那些弯曲的小线条和警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T23:20:41.993

使它们的属性如下所示

```
private class TestClass
    {
        public TestClass()
        {

        }

        public string ID{get;set;}
        public string Name{get;set;}
    } 
```

并像使用它一样

```
 groupInfo.Add(new TestClass{ID=values[0], Name= values[1]}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T23:22:05.417

尝试使它们成为属性

```
private class TestClass
{
    public TestClass(string name, string id)
    {
        ID = id;
        Name = name;
    }

    public string ID { get; set; }
    public string Name { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T23:22:42.017

ReSharper 无法知道某些字段仅通过反射使用。

考虑将它们设为属性而不是公共字段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-24T03:01:48.630

我看不到您在课堂上的任何地方使用 ID 或 Name。在构造函数中分配它不算数，顺便说一句，这可能就是它抱怨的原因。

Resharper 建议将变量设为私有变量，因为您不会在其他任何地方使用它，因此出于谨慎考虑；由于您没有定义任何 getter 或 setter，因此可能假设您正在使用这些变量在内部跟踪状态。

# php - 在 AngularJS 中使用 ngRepeat 控制台出错

> ID：16180711
> 
> 赞同：3
> 
> 时间：2013-04-23T23:14:02.093
> 
> 标签：php, angularjs, asynchronous, angularjs-ng-repeat, src

我是 AngularJS 的新手，我遇到了一个小问题。

这是我的代码：

JS：

```
<script>
var app = angular.module('appList', []);

app.controller('AppListCtrl', function ($scope, $http) {
    $scope.url = 'getappinfo.php';
    $http.post($scope.url).success(function (data) {
        $scope.apps = data;
    }).error(function (data) {
            console.log(data, status);
        });
})

app.directive('application', function () {
    return {
        restrict: "E",
        replace: true,
        scope: {
            name: "@",
            logo: "@"
        },
        template: "<div style='width:100px; height:100px; border:1px solid black'>{{name}}     <img src='{{logo}}' style='width:50px'></div>"
    }
})
</script> 
```

HTML：

```
<div ng-app="appList">
   <div ng-controller="AppListCtrl" id='applications_holder'>
       <div ng-repeat="app in apps">
        <application name="{{app.name}}" logo="{{app.logo}}"></application>
       </div>
   </div>
</div> 
```

从 getappinfo.php 我得到一个 json 数组，里面有几个对象……它们都有'name'和'logo'属性。一切正常。

但是我仍然有一个困扰我的小问题： ![控制台出错](https://i.stack.imgur.com/sinPa.png)

这是我在 Google Chrome 控制台中遇到的错误。

我了解此错误的原因。但我不知道如何摆脱它......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T23:24:10.703

您需要使用[ngSrc](http://docs.angularjs.org/api/ng.directive%3angSrc)来阻止浏览器请求名为“{{logo}}”的文件，该文件在您的范围绑定到您的视图之前被渲染。

破碎：http: [//jsfiddle.net/wNwrr/](http://jsfiddle.net/wNwrr/)

修正：http: [//jsfiddle.net/wNwrr/1](http://jsfiddle.net/wNwrr/1)

**HTML**

```
<div ng-app ng-controller="x">
    <img ng-src="{{src}}" />
</div> 
```

**JavaScript**

```
function x($scope) {
    $scope.src = 'https://www.google.com/images/srpr/logo4w.png';
} 
```

# shell - Zsh 选项卡完成：是否有任何插件或功能可以允许 MRU 选项卡完成方案？

> ID：16180712
> 
> 赞同：3
> 
> 时间：2013-04-23T23:14:03.627
> 
> 标签：shell, autocomplete, terminal, zsh, tab-completion

我发现自己在做一些事情，比如键入命令名称的最后一部分，因为它的开头是由其他命令完成的。当然，大多数其他 shell 甚至还不能以这种方式完成东西。

无论如何，作为一个例子，我的`$PATH`调用中有一个脚本`git-verbose-status`或类似的东西。以及许多其他前缀为`git-`. 随着前缀命名空间的填充，区分它们变得越来越困难。*考虑*“git”真的很有意义，因为我命名我的程序是有原因的。

所以它让我思考。最近使用的排序可用于已键入的字符串以执行匹配。这应该比按字母顺序完成更有用，因为我相信它通常会完成。

它可能只是对命令历史记录的简单反向扫描。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T09:02:04.267

我认为[历史子字符串搜索](https://github.com/zsh-users/zsh-history-substring-search "历史子串搜索")完全符合您的要求；我已经设置了以下键绑定

```
bindkey '^[[A' up-line-or-search
bindkey '^[[B' down-line-or-search
bindkey '^P' up-line-or-search
bindkey '^N' down-line-or-search 
```

这样，我开始输入上一个命令的任何部分，按向上箭头或 Ctrl-P 并以相反的顺序从我的历史记录中的任何位置获取与该写入部分匹配的命令 - 如您所述。

编辑：当然，如果您不想安装历史搜索插件，`C-r`也可以匹配历史记录中的完整命令行。

# android - 如何在没有内容区域的九个补丁图像中拉伸填充区域的周围？

> ID：16180714
> 
> 赞同：0
> 
> 时间：2013-04-23T23:14:17.520
> 
> 标签：android, android-layout, nine-patch

无论九个补丁背景延伸到多宽，我如何保持内容为红色部分。

请查看此“缩放”示例图像：

**注意：红色部分为内容区域的虚拟插图**

![在此处输入图像描述](https://i.stack.imgur.com/zKEJq.png)

这是用于注释的 SlidingDrawer 句柄。

该图像在纵向视图上还可以，但在横向视图中，虚拟（红色）区域会扩展，因此当我写一些文本并将其居中时，它会出现在绿色选项卡旁边而不是绿色选项卡的中心

这是纵向和横向的样子（请注意红色部分是虚拟的，只是为了说明内容区域）。

![在此处输入图像描述](https://i.stack.imgur.com/Pxdmm.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T10:47:10.297

在 9-patch 工具中，您定义了红色内容区域**之外的顶部补丁区域。**
您可以定义一个分割的补丁区域。尝试覆盖一些红色并覆盖一些图片的右侧。你左边的补丁似乎也太大了。尝试这个：

![在此处输入图像描述](https://i.stack.imgur.com/uKKWl.png)

# java - JSF 2.0 - 即使第一个验证器失败，也会调用第二个验证器

> ID：16180718
> 
> 赞同：0
> 
> 时间：2013-04-23T23:14:36.693
> 
> 标签：java, jsf, jsf-2, cdi, myfaces

我正在使用 WAS 8.0.0.5 的 MyFaces 2.0.4 AND CDI（不能在不丢失 CDI 的情况下替换 WAS 8 的 JSF 2.0 版本）。

我有 2 个自定义验证器注册到一个组件。第一个进行多场比较。第二个验证器使用 CDI 注入 SSB，它使用实体管理器调用数据库。

如果我输入导致第一个验证器故意失败的信息，第二个验证器仍然会执行。为什么？如果第一次验证失败，如何避免第二次验证？我认为如果一个验证器失败，那么所有后续验证都会被绕过。

```
<h:form id="registrationForm">
    <fieldset>
        <p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
        <legend>Register</legend>
        <div class="form-row">
            <h:outputLabel for="userId" value="*User Id"/>
            <h:inputText id="userId" value="#{registration.userId}" required="true" size="20">
                <f:validator validatorId="userIdPasswordValidator" />
                <f:attribute name="passwordComponent" value="#{passwordComponent}"/>
                <f:validator binding="#{duplicateUserValidator}" /> <-- uses CDI
            </h:inputText>
        </div>
        <div class="form-row">
            <h:outputLabel for="password" value="*Password"/>
            <h:inputSecret id="password" type="password" binding="#{passwordComponent}" value="#{registration.password}" required="true">
            </h:inputSecret>
        </div>
        <div class="form-row">
            <h:outputLabel for="confirmPassword" value="*Confirm Password"/>
            <h:inputSecret id="confirmPassword" type="password" value="#{registration.confirmPassword}" required="true" />
        </div>
        <div class="form-row">
            <h:commandButton styleClass="btn btn-warning" value="Register" type="submit" action="#{registration.register}" />
        </div>
    </fieldset>
</h:form> 
```

第一个验证者：

```
@FacesValidator("userIdPasswordValidator")
public class UserIdPasswordValidator implements Validator {

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        String userId = (String)value;
        UIInput passwordInput = (UIInput)component.getAttributes().get("passwordComponent");
        String password = (String) passwordInput.getSubmittedValue();

        if (userId.equals(password)) {
            FacesMessage message = new FacesMessage(null, "The Password cannot be the same as your User ID.");
            throw new ValidatorException(message);
        }
    }
} 
```

第二个验证器：

```
@Named
@RequestScoped
public class DuplicateUserValidator implements Validator {

@Inject
UserService userService;

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {

    if (userService.getUser(value.toString()) != null) {
        FacesMessage message = new FacesMessage(null, "This User ID is already registered. Please logon or choose another one to register.");
        throw new ValidatorException(message);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T03:01:57.983

为了达到预期的结果，您应该`renderResponse()`按照以下 oracle 摘录所示调用：

> 如果在当前 FacesContext 上调用了任何验证方法或事件侦听器 renderResponse，JavaServer Faces 实现将跳到呈现响应阶段。

* * *

但恐怕这就是验证阶段的工作方式。[来自甲骨文：](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSFIntro10.html)

> 在此阶段，JavaServer Faces 实现会处理在树中的组件上注册的**所有验证器。**它检查指定验证规则的组件属性，并将这些规则与为组件存储的本地值进行比较。
> 
> 如果本地值无效，JavaServer Faces 实现**会向 FacesContext 实例添加错误消息**

这里的关键短语是**所有验证器的进程**，并向**FacesContext 实例添加错误消息**。虽然这里不是很清楚，但这意味着整个验证阶段将完成并且消息排队。完成后，它会进入适当的阶段。

# c++ - 使用模板类进行隐式转换

> ID：16180719
> 
> 赞同：1
> 
> 时间：2013-04-23T23:14:37.493
> 
> 标签：c++, templates, c++11, implicit-conversion

我正在尝试定义一个类模板，它可以对许多数据结构执行一些输入/输出操作（通过来自另一个类的运算符 << 和 >>）。

简而言之，我可以这样做：

```
vector<int> x;
map<string,vector<vector<int>>> y;
const int z = 42;

FooStream fs;

Foo<decltype(x)> fx(x);
Foo<decltype(y)> fy(y);
Foo<decltype(z)> fz(z);

fs << fx << fy << fz >> fy >> fx; 
```

我的问题是我怎样才能做到这一点：

```
vector<int> x;
map<string,vector<vector<int>>> y;
const int z = 42;

FooStream fs;

fs << x << y << z >> y >> x;
//error : no operator found which takes a right-hand operand of type 'std::vector<_Ty>' (or there is no acceptable conversion) 
```

FooStream::operator<< 和 >> 应该在定义特化 Foo< T> 时接受任何类型 T 。

有关更多详细信息，这是我的（简化的）代码。

```
class FooBase1{
protected:
    union p_type{const void *p1;void *p2;} p;
public:
    FooBase1(const void *v){p.p1 = v;};
    virtual void func1_() = 0;
};

class FooBase2 : public FooBase1{
public:
    FooBase2(void *v) : FooBase1(v){};
    virtual void func2_() = 0;
};

template<typename T,typename Enable=void>
class Foo{
public:
    typedef void generic;
};

template<typename T,typename E=void> struct is_generic                             : std::false_type{};
template<typename T>                 struct is_generic<T,typename Foo<T>::generic> : std::true_type {};

template<typename T,typename T2=void> struct enable_if_ng  : enable_if<!is_generic<T>::value,T2> {};

template<typename T> struct get_foo_type          {};
template<typename T> struct get_foo_type<Foo<T> > {typedef T type;};

#define DECLARE_FOO_SPECIALIZATION(Type)\
template<>\
class Foo<Type> : public FooBase2{\
public:\
    Foo(Type &v) : FooBase2(&v){}\
    virtual void func1_(){func1(*(const Type *)p.p2);}\
    virtual void func2_(){func2(*(Type *)p.p2);}\
    static void func1(const Type&){/*user defined*/}\
    static void func2(Type&){/*user defined*/}\
};
    //friend FooStream& operator>>(FooStream& fs,Type &f){Foo<Type>(f).func2_();return fs;} doesn't work

DECLARE_FOO_SPECIALIZATION(bool)
DECLARE_FOO_SPECIALIZATION(int)
DECLARE_FOO_SPECIALIZATION(long)
DECLARE_FOO_SPECIALIZATION(float)
DECLARE_FOO_SPECIALIZATION(double)
DECLARE_FOO_SPECIALIZATION(string)

template<typename T1>
class Foo<vector<T1>,typename enable_if_ng<T1>::type> : public FooBase2{
public:
    Foo(vector<T1> &v) : FooBase2(&v){}
    virtual void func1_(){func1(*(const vector<T1> *)p.p2);}
    virtual void func2_(){func2(*(vector<T1> *)p.p2);}
    static void func1(const vector<T1>&){/*user defined*/}
    static void func2(vector<T1>&){/*user defined*/}
};

template<typename T1,typename T2>
class Foo<map<T1,T2>,typename enable_if<!is_generic<T1>::value && !is_generic<T2>::value>::type> : public FooBase2{
public:
    Foo(map<T1,T2> &v) : FooBase2(&v){}
    virtual void func1_(){func1(*(const map<T1,T2> *)p.p2);}
    virtual void func2_(){func2(*(map<T1,T2> *)p.p2);}
    static void func1(const map<T1,T2>&){/*user defined*/}
    static void func2(map<T1,T2>&){/*user defined*/}
};

template<typename T1>
class Foo<const T1,typename enable_if_ng<T1>::type> : public FooBase1{
public:
    Foo(const T1 &v) : FooBase1(&v){}
    virtual void func1_(){func1(*(const T1 *)p.p1);}
    static void func1(const T1& v){Foo<T1>::func1(v);}
};

class FooStream{
public:
    FooStream(){};
    FooStream& operator<<(FooBase1 &f){f.func1_();return *this;};
    FooStream& operator>>(FooBase2 &f){f.func2_();return *this;};
}; 
```

（其他问题：我可以用模板更漂亮的东西替换我的宏 DECLARE_FOO_SPECIALIZATION 吗？我应该改变我的类层次结构吗？）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T03:07:57.370

这`EnableIf`在许多编译器中不起作用，但您可以在那里使用更粗略的 SFINAE 技巧：

```
template<std::size_t n>
struct secret_enum { enum class type {}; };
template<bool b, std::size_t n = 0>
using EnableIf = typename std::enable_if< b, typename secret_enum<n>::type >::type;

template<typename T, bool b=true>
struct can_be_fooed : std::false_type {};
template<typename T>
struct can_be_fooed<T, std::is_same<Foo<T>, Foo<T>>::value>:std::true_type {};

class FooStream{
public:

  template<typename T, EnableIf<can_be_fooed<typename std::decay<T>::type>>...>
  FooStream& operator<<(T&&t){
    // body of <<, possibly involving wrapping the t in a Foo<T>?
  };
}; 
```

* * *

在测试这种代码时，当第一个失败时，停止在一行中做 15 件事。一次测试一个步骤。使用模板元编程，您正在调试编译步骤——通过以字节大小的块编译事物并在每一步检查，您所做的相当于单步调试代码。

* * *

而不是你的宏，创建一个特征类，其中有问题的元素是唯一具有`true`. 然后只需使用 SFINAE 编写一个`template`只为这些类型打开的。代码行数相同，但没有宏生成的代码。

```
template<typename T> struct do_stuff : std::false_type {};
template<> struct do_stuff<int> : std::true_type {};
template<> struct do_stuff<bool> : std::true_type {};
// yada yada

template<typename T>
class Foo<T, typename=typename std::enable_if< do_stuff<T>::value >::type> : public FooBase2 {
public:
  Foo(T &v) : FooBase2(&v){}
  virtual void func1_(){func1(*(const T *)p.p2);}
  virtual void func2_(){func2(*(T *)p.p2);}\
  static void func1(const T&){/*user defined*/}\
  static void func2(T&){/*user defined*/}\
}; 
```

# jquery - jQuery 为每个元素设置延迟动画，并在开始时延迟

> ID：16180731
> 
> 赞同：0
> 
> 时间：2013-04-23T23:15:24.040
> 
> 标签：jquery, jquery-animate, delay

我有一系列正在制作动画的 div。以下 jquery 可以很好地执行此操作：

```
function animatePanels() {
    $panels = $('.panel');
    $panels.each(function (i) {
        $(this).delay(5000 * i).animate({ left: '-300' }, 200);
    });
}

animatePanels(); 
```

但是，我想延迟动画的第一次迭代，以便页面加载，它等待 5000 毫秒然后第一个动画发生，然后 5000 毫秒延迟然后下一个等。目前第一个动画立即触发。我不完全确定这是为什么，因为我认为延迟会在动画*之前被调用？*

我试过这个：

```
setTimeout(animatePanels(), 5000); 
```

但它没有任何影响。

谁能让我直截了当？

谢谢各位！

# javascript - 无法使用 Skydrive API 获取文件夹的内容

> ID：16180732
> 
> 赞同：0
> 
> 时间：2013-04-23T23:15:27.483
> 
> 标签：javascript, api, onedrive

我在显示位于根目录内的文件夹的内容时遇到了真正的问题。它设法确定了 Files 目录中的文件夹，但是当我尝试对其中一个文件夹执行相同操作时，它不起作用。

我在 WL.api 的路径名中解决了问题。但是我可能弄错了。

我使用了来自 live Connect 开发中心的 skydrive 页面的代码示例。在下面的示例中，我首先尝试确定文件夹，但最终我想获取存储在特定目录中的所有文件的名称。

```
 WL.api({ path: "me/skydrive/files/myfolder", method: "get" }).then(
  function (response) {
   var items = response.data;
   var outPuts = "";
   var number = items.length
    var tempos = new Array();
   var foundFolder = 0;
  for (var i = 0; i < items.length; i++) {
    if (items[i].type === "folder" || items[i].type === "album") {
    tempos[i] = items[i].name;
    foundFolder += 1;
  }
  }
     if (foundFolder == 0) {
        folderss.innerHTML = ("Unable to find any folders");
     }
    else {
      for (var i = 0; i < number; i++) {
        outPuts = outPuts + tempos[i] + "<br /> <br />"
       }
     folderss.innerHTML = outPuts;
    }
 }
 ); 
```

如果我只为 WL 路径保留**“me/skydrive/files” 。**有用。但是，如果我在它之后添加任何特定的文件夹名称，例如在我的情况下为**“me/skydrive/files/myfolder”**，则调用不会返回任何内容。或者我可能会声明一个路径，如：**“me/skydrive/files/folder.567391047.34282821！”**

感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-27T11:33:19.513

我相信您的问题是由于您使用了无效的路径格式。根据[docs 中的示例](http://msdn.microsoft.com/en-us/library/live/hh243648.aspx#objectdata)，列出文件的有效路径具有以下形式：**/OBJECT_ID/files**，其中 OBJECT_ID 可以替换为**me/skydrive**以引用 Skydrive 根文件夹。

需要注意的重要事项是：

1.  只能有一个对象的引用（**OBJECT_ID**）；
2.  此引用只能是对象的 ID（由 API 返回）或特殊别名，例如**me/skydrive**；
3.  **/files**应该始终是路径的最后一部分（假设我们不需要使用查询字符串）。

因此，要列出您的子文件夹**folder.567391047.34282821 的内容！**，您应该尝试使用以下路径格式： **/folder.567391047.34282821** !/files甚至是**folder.567391047.34282821!/files**（不带前导斜杠，因为它似乎是可选的）。

如果这能解决您的问题，请告诉我。

# sql - Access SQL - 使用 IIF 进行表连接

> ID：16180733
> 
> 赞同：0
> 
> 时间：2013-04-23T23:15:28.957
> 
> 标签：sql, ms-access

## 表[一]

*   身份证号
*   s - 文本
*   我 - 文本
*   电子文本
*   d - 数字

## 表【二】

*   身份证号
*   s - 文本
*   我 - 文本
*   电子文本
*   d - 数字

## 表[一]数据

1,a,b,b,7
2,a,b,b,7
3,a,b,c,11
4,b,a,a,21

## 表[二]数据

1,a,b,b,3
2,a,b,c,12
3,b,a,a,4

问题：如果 Table [Two] d < Table [One] d 加入 s,i,e ，则显示结果集显示记录。

期望的结果：Table [Two] s,i,e,d Table [One] d 基于 s

任何帮助都会很棒，我不熟悉访问语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:28:13.077

使用 Access 查询设计器的设计视图来构建查询。您可以通过切换到 SQL 视图来检查它产生的语法。

如果我正确理解了要求，则此 SQL 可能就是您想要的：

```
SELECT
    t2.s,
    t2.i,
    t2.e,
    t2.d AS t2_d,
    t1.d AS t1_d
FROM
    Table1 AS t1
    INNER JOIN Table2 AS t2
    ON
            t1.s = t2.s
        AND t1.i = t2.i
        AND t1.e = t2.e
WHERE t2.d < t1.d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:28:39.603

```
SELECT two.*, one.d
FROM one INNER JOIN two on one.s = two.s AND one.i = two.i AND two one.e = two.e 
WHERE two.d < one.d 
```

# php - 一个连接（配置）显示数据，另一个不显示

> ID：16180734
> 
> 赞同：-1
> 
> 时间：2013-04-23T23:15:30.740
> 
> 标签：php, config

我正在尝试开发我在互联网上找到的脚本（搜索/自动建议）。脚本很小，但我认为问题在于连接，配置文件。我发现，旧的连接样式与脚本一起正常工作，但如果我使用“定义”连接，那么所有脚本都会停止工作，并且不显示任何数据。

**旧连接**

```
$host="aha";
$user="aha";
$pass="aha";
$base="aha";
$connect=mysql_connect($host,$user,$pass);
mysql_select_db($base, $connect);
?> 
```

**定义连接不适用于脚本**

```
define("DB_HOST", "aha");
define("DB_NAME", "aha");
define("DB_USER", "aha");
define("DB_PASS", "aha"); 
```

我相信，脚本是用非常旧的代码编写的，所以我想，这个非常小的脚本应该以新的方式重写，但问题是，我应该如何正确地做到这一点？

**剧本**

```
<?php
include('config.php');
if($_POST)

{

$q=$_POST['searchword'];

$sql_res=mysql_query("select * from users where user_firstname like '%$q%' or user_lastname like '%$q%' order by user_id LIMIT 5");

while($row=mysql_fetch_array($sql_res))
{
$fname=$row['user_firstname'];
$lname=$row['user_lastname'];
$email=$row['user_email'];

$re_fname='<b>'.$q.'</b>';
$re_lname='<b>'.$q.'</b>';

$final_fname = str_ireplace($q, $re_fname, $fname);

$final_lname = str_ireplace($q, $re_lname, $lname);

?>

<div class="display_box" align="left">

<a href="http://www.google.com/">

<img src="user_img/y.jpg" style="width:25px; float:left; margin-right:6px" /><?php echo $final_fname; ?>&nbsp;<?php echo $final_lname; ?><br/>
<span style="font-size:9px; color:#999999"><?php echo $email; ?></span>

</a>

</div>

<?php }} else {} ?> 
```

如果有任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:25:52.350

在您的新连接配置中，您实际上并没有建立数据库连接，您只是定义了常量。

有许多库抽象了数据库层，以帮助使您的代码更具可读性和自动化转义等操作。您可能应该查看类似 pdo [http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:36:57.663

应该可以正常工作...只要您的 config.php 可以正确引用变量（即，它们要么在该文件本身中声明，要么在其他地方声明并包含在 config.php 文件中）。

配置.php：

```
<?
define("DB_HOST", "aha");
define("DB_NAME", "aha");
define("DB_USER", "aha");
define("DB_PASS", "aha");

$connect = mysql_connect(DB_HOST, DB_USER, DB_PASS);
mysql_select_db(DB_NAME, $connect);
?> 
```

# selenium-rc - 从批处理文件运行 Selenium IDE 会忽略 user-extensions.js 和 selblocks。为什么？

> ID：16180736
> 
> 赞同：0
> 
> 时间：2013-04-23T23:15:45.287
> 
> 标签：selenium-rc, selenium-ide, user-extensions.js

嗨，我真的很想通过 Selenium IDE 运行一个测试套件，我已经在 user-extensions.js 和 SelBLocks 扩展（用于流量控制）中使用了一些自定义命令，但没有成功。

是否有一个命令可以启动 firefox 并使用套件运行 selenium 插件并`baseurl`作为参数？

我在批处理文件中使用以下命令运行套件时运气更好（baseurl、套件和日志文件具有合适的值：

```
java -jar selenium-server-standalone-2.32.0.jar -htmlSuite "*firefox" "%baseurl%" "%suite%" "%log%" -port 4445 
```

但是一旦遇到定义在中的命令`user-extensions.js`和/或来自`Selblocks`.

任何人都可以提供一些线索来解决上述任何一个问题吗？

IDE 解决方案会更好（对我来说），因为我们这里没有大量的 java 或 webdriver 人才。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-14T01:48:58.323

公告：SelBlocks 2.1 现在包括对 Selenium Server 的支持。在此处获取扩展文件：[https ://raw.githubusercontent.com/refactoror/SelBlocks/master/user-extensions.js](https://raw.githubusercontent.com/refactoror/SelBlocks/master/user-extensions.js)

最初的浏览器支持是 firefox、googlechrome 和 opera。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T18:57:32.400

在这里回答我自己的部分问题......

将 userExtension 参数添加到 java 命令以加载用户扩展。

```
java -jar selenium-server-standalone-2.32.0.jar -userExtensions "path\to\user-extensions.js" -htmlSuite "*firefox" "%baseurl%" "%suite%" "%log%" 
```

仍然不确定如何让它理解 selblocks 命令。

# git - 我可以在我的存储库的一部分上使用 git bisect 吗？

> ID：16180740
> 
> 赞同：2
> 
> 时间：2013-04-23T23:16:10.367
> 
> 标签：git, bisect

我有一个包含多个子项目且没有子树或子模块的存储库。我现在有一个关于项目 C 中需要修复的新功能的错误。C 依赖于项目 A 和 B。

为了使该功能正常工作，我需要最新版本的 Project A。

在项目 B 的某个地方，引入了该错误。所以我的问题是：

我可以运行 git bisect 并告诉它只对项目 B 的源代码树进行操作，同时将 A 和 C 保持在最新版本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T23:48:36.827

不， git bisect 不支持。你永远不应该把不同的项目放到同一个 repo 中。Git 不喜欢也不支持。尽管如此，您仍然可以执行以下操作：

`git bisect`这里基本上有两种模式：普通模式和普通 `--no-checkout`模式。您可以使用两者中的任何一个以不同的方式实现您的目标：

1.  **正常：**运行`git bisect`并在每一步中，在测试之前，将正确版本的子项目放在工作树中，使用`git checkout master -- sub/project/folder`. 您可能必须在测试后撤消该操作，然后才能继续平分。
2.  **`--no-checkout`**: 运行`git bisect start --no-checkout`。`BISECT_HEAD`现在，除了设置参考之外，这些步骤不会对您的 repo 产生任何影响。仅使用此参考来签出 projectB `git checkout BISECT_HEAD path/to/projectB`：。现在做你的测试。

我会推荐这种`--no-checkout`方法。请注意，虽然 3lectrologos 的提示不起作用，但它仍然有用。给出 ProjectB 的路径`git bisect`将允许利用错误只能在包含对 ProjectB 的更改的修订中引入的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:27:00.427

我认为`git bisect start -- path/to/projectB`应该做的伎俩。

**注意**：正如下面的评论中所指出的，这不会使 repo 的其余部分保持其最新状态，但会一分为二，仅考虑对指定路径进行更改的提交。

# android - 在 Android Activity 中看不到按钮

> ID：16180742
> 
> 赞同：1
> 
> 时间：2013-04-23T23:16:11.497
> 
> 标签：android, button

无论我尝试过，我都看不到底部的按钮。顶部应该有一个 TextView，下面应该有六个按钮。但不知何故，我看不到他们。我看过[这里](https://stackoverflow.com/questions/13720746/cant-see-a-button-under-a-listview-in-my-layout)，也看过[这里](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)，但他们没有帮助。请告诉我，有什么问题？这是我的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="23dp"
        android:layout_marginTop="17dp"
        android:text="TextView" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_marginLeft="74dp"
        android:layout_marginTop="64dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="@string/bttn_aux1"
        android:onClick="is_clicked" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button1"
        android:layout_below="@+id/button1"
        android:text="@string/bttn_aux2"
        android:onClick="can_clicked" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button2"
        android:layout_below="@+id/button2"
        android:text="@string/bttn_aux3"
        android:onClick="must_clicked" />

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/button3"
        android:layout_below="@+id/button3"
        android:text="@string/bttn_aux4"
        android:onClick="do_clicked" />

    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/button4"
        android:layout_below="@+id/button4"
        android:text="@string/bttn_aux5"
        android:onClick="will_clicked" />

    <Button
        android:id="@+id/button6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/button5"
        android:layout_below="@+id/button5"
        android:text="@string/bttn_aux6"
        android:onClick="has_clicked" />

</RelativeLayout> 
```

**编辑：这也是我的活动：**

```
public class AuxilaryVerbs extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_auxilary);

        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRAMESSAGE_MAIN);

        TextView textView = new TextView(this);
        textView.setTextSize(30);
        textView.setText(message);

        setContentView(textView);
    }

    public void is_clicked(View view)   {

    }
    public void can_clicked(View view)  {

    }
    public void must_clicked(View view) {

    }
    public void do_clicked(View view)   {

    }
    public void will_clicked(View view) {

    }
    public void has_clicked(View view)  {

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:02:18.387

Eclipse auto xml generator adds a lot of extra attribute that you don't need and when you try to edit it manually you get lost.

First replace RelativeLaout to LinearLayout and make it vertical, it will make it simpler. Then remove all layout_toRightOf,left, below etc attribute and make it simple. Then you will see all your buttons. However if there isn't enough space to show all in your device then you will have to put button in ScrollView so you can scroll and get all buttons.

I tried to update xml (there could be some typos)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="23dp"
        android:layout_marginTop="17dp"
        android:text="TextView" />

    <Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="74dp"
        android:layout_marginTop="64dp"
        android:text="@string/bttn_aux1"
        android:onClick="is_clicked" />

    <Button
        android:id="@+id/button2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/bttn_aux2"
        android:onClick="can_clicked" />

    <Button
        android:id="@+id/button3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/bttn_aux3"
        android:onClick="must_clicked" />

    <Button
        android:id="@+id/button4"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/bttn_aux4"
        android:onClick="do_clicked" />

    <Button
        android:id="@+id/button5"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/bttn_aux5"
        android:onClick="will_clicked" />

    <Button
        android:id="@+id/button6"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/bttn_aux6"
        android:onClick="has_clicked" />

</LinearLayout> 
```

**Edit** Remove this. You are setting your whole view with just this textView. You have already set your view.

```
 setContentView(textView); 
```

You have already set layout using following line. You shouldn't overwrite it again.

```
setContentView(R.layout.activity_auxilary); 
```

You already have your textview when you setContentView with your layout file. You can get access to it using following line.

```
TextView textView = (TextView) v.findViewById(R.id.textView1); // id of textview from layoutfile 
```

and that's it, don't overwrite view.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:32:12.020

您对先前声明的 ID 的引用不正确。

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1" <---no plus sign; "@id/textView1"
    android:layout_marginLeft="74dp"
    android:layout_marginTop="64dp"
    android:layout_toRightOf="@+id/textView1" <---no plus sign;
    android:text="@string/bttn_aux1"
    android:onClick="is_clicked" /> 
```

以下字段有同样的问题。

仅当您第一次分配 id 时才使用加号，这样它将声明该 id。当 id 已经声明时，不需要使用加号。

# ios - Apple 现在是否要求所有 iPad 应用程序都支持视网膜屏幕？

> ID：16180745
> 
> 赞同：-1
> 
> 时间：2013-04-23T23:16:23.127
> 
> 标签：ios, ipad, retina-display

我从 Apple 看到这条消息，谈到需要为视网膜设备构建新的 iOS 应用程序提交：

[https://developer.apple.com/news/?id=3212013b](https://developer.apple.com/news/?id=3212013b)

我知道它说应用程序和应用程序更新“必须为具有 Retina 显示屏的 iOS 设备构建”，这是非常通用的，可能包括 iPad，但文字只提到了 iPhone 5，以及“iOS Human”的链接页面界面指南”只讨论了如何让你的应用程序为 iPhone 5 做好准备。根本没有提到视网膜 iPad。

那么，从 2013 年 5 月 1 日开始，提交的 iPad 应用程序是否真的必须与 2048x1536 的新 iPad 分辨率兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:37:57.800

是的，从 5 月 1 日起，所有新应用和应用更新都必须支持视网膜和非视网膜设备。如果您的应用程序是 iPad 或通用应用程序，那么它必须支持 iPad 的两种分辨率。如果您的应用程序是 iPhone 或通用应用程序，那么它必须支持 3.5" 和 4" 屏幕以及非视网膜和视网膜版本。

# java - 无法理解滚动窗格

> ID：16180749
> 
> 赞同：1
> 
> 时间：2013-04-23T23:16:30.920
> 
> 标签：java, swing, jframe, jscrollpane, gridbaglayout

我是 Java GUI 开发的新手，我无法理解在 JAVA SWING 运行时添加动态标签的滚动窗格。我也找不到关于摆动组件的很好的文档。有人可以解释一下 Scrollpane 是如何工作的吗？我的一些问题可能听起来很愚蠢，但从昨天开始我一直在努力解决它们：-

1.) 什么是滚动窗格？-->我知道的非常基本...！我想如果这个问题得到回答，其他一切都会得到解决。

2.) 是否将滚动窗格添加到 Frame ？或者，是否将 Frame 添加到滚动窗格？或者，他们俩都好吗？我们可以将面板添加到滚动窗格吗？一个文本区域？

3.) 如果我们使用滚动窗格，我们可以让任何摆动组件可滚动吗？如果是，如何？

4.）如果让我们说某个组件（比如框架）连接到滚动窗格（不确定“连接”在这里是否有意义）并且我希望向这个可滚动区域添加新标签，我应该怎么做？我应该简单地将新标签添加到主封闭框架吗？或者，我应该将它添加到滚动窗格中吗？

5.) 为什么我们应该在向滚动窗格/框架添加内容之前总是使用 gridlayout（或类似的）功能，真的，它有什么作用？

感谢您提供的任何指导！如果您觉得我的问题太基本，那么指向一些好的文档也不是一个坏主意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T23:24:05.130

以下是链接列表：

**JScrollPane**教程和文档：

*   [http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)
*   [http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html)

**JFrame**教程和文档：

*   [http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html)
*   [http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

**GridLayout**教程和文档：

*   [http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)
*   [http://docs.oracle.com/javase/7/docs/api/java/awt/GridLayout.html](http://docs.oracle.com/javase/7/docs/api/java/awt/GridLayout.html)

您的问题的所有答案都在那里。

# joomla3.0 - joomla 3.0将变量从索引传递到视图

> ID：16180752
> 
> 赞同：1
> 
> 时间：2013-04-23T23:16:40.950
> 
> 标签：joomla3.0

我正在尝试将变量从索引页面传递到文章视图。基本上div的宽度需要根据是否有侧边栏来改变。

索引.php：

```
if ($this->countModules('position-1')&$this->countModules('position-3')){
    $content_margin = 'contentCenter';
}elseif ($this->countModules('position-1')&!$this->countModules('position-3')){
    $content_margin = 'contentRight';
}elseif (!$this->countModules('position-1')&$this->countModules('position-3')){
    $content_margin = 'contentLeft';
}else{
    $content_margin = '';
} 
```

然后如何访问组件中的 $content_margin 变量？

```
<jdoc:include type="component" class="<?php echo $content_margin; ?>" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:59:25.960

我宁愿尝试这样的事情：

```
<div class="<?php echo $content_margin; ?>">
    <jdoc:include type="component" />
</div> 
```

您不需要将此变量传递给您的组件，只需为您的 CSS 类提供不同的宽度。

如果您想计算组件中的模块数量，可以查看[此](http://www.corephp.com/blog/how-to-use-countmodules-in-any-joomla-file/#.UXl677UerIU)链接

# xmpp - 如何阻止我的 XMPP MUC 消息回显给我？

> ID：16180753
> 
> 赞同：0
> 
> 时间：2013-04-23T23:16:41.890
> 
> 标签：xmpp

我正在编写一个机器人来记录 MUC XMPP 频道。该机器人有时会发送消息，而 MUC 会将这些消息回显给它。如何禁用此行为以防止它弄乱日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:26:01.967

[规范（ http://xmpp.org/extensions/xep-0045.html](http://xmpp.org/extensions/xep-0045.html) ）中没有办法向所有人发送消息，但您自己。我建议修改您的机器人以检查所有入站消息的发件人 JID，并丢弃来自您的机器人占用者 JID 的任何消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-27T10:27:45.000

XEP-0016 [http://xmpp.org/extensions/xep-0016.html](http://xmpp.org/extensions/xep-0016.html)

隐私清单：学习、热爱、生活

创建 list_home 在家中使用以排除员工的闲聊，应用 list_work 以防止您的孩子纠缠您，应用 list_weekendall 来限制与亲密私人朋友的互动。

XMPP 短信功能比传统 sms 短信加 xmpp = $0 短信功能更强大。在智能手机上支付短信费用并不明智。容忍冒充免费软件提供“免费”短信的各种广告软件恶意软件同样愚蠢。

隐私列表控制着名册成员可以查看的订阅信息类型。它比取消订阅/重新订阅隐私列表的幼稚尝试要简单得多。

您的特定用例可用（[http://xmpp.org/extensions/xep-0016.html#protocol](http://xmpp.org/extensions/xep-0016.html#protocol)）

“基于 JID、组或订阅类型阻止消息”

# c# - 将 WPF UserControl 保存为矢量图像

> ID：16180755
> 
> 赞同：3
> 
> 时间：2013-04-23T23:16:51.120
> 
> 标签：c#, wpf, user-controls

我创建了一个 WPF 用户控件库。我想将每个 UserControl（默认设置）的矢量图片放入文档中。所以我的问题是：如何创建 UserControl 的矢量图像？

感谢您的任何努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T02:38:30.917

捕获**矢量图**似乎很难，您的控件仅由矢量图组成吗？如果您只想获得 png 或 bmp，下面的代码可能会有所帮助：

```
ImageCapturer.SaveToPng(AnyControl, "Capture.png");

class ImageCapturer
{               
    public static void SaveToBmp(FrameworkElement visual, string fileName)
    {
        var encoder = new BmpBitmapEncoder();
        SaveUsingEncoder(visual, fileName, encoder);
    }

    public static void SaveToPng(FrameworkElement visual, string fileName)
    {
        var encoder = new PngBitmapEncoder();
        SaveUsingEncoder(visual, fileName, encoder);
    }

    private static void SaveUsingEncoder(FrameworkElement visual, 
                 string fileName, BitmapEncoder encoder)
    {
        RenderTargetBitmap bitmap = new RenderTargetBitmap(
               (int)visual.ActualWidth, 
               (int)visual.ActualHeight, 96, 96, PixelFormats.Pbgra32);
        bitmap.Render(visual);
        BitmapFrame frame = BitmapFrame.Create(bitmap);
        encoder.Frames.Add(frame);

        using (var stream = File.Create(fileName))
        {
            encoder.Save(stream);
        }
    }
} 
```

# java - 在apache poi中的每10个项目之后插入新行

> ID：16180756
> 
> 赞同：1
> 
> 时间：2013-04-23T23:17:20.797
> 
> 标签：java, apache-poi

我有一个`List<String>`元素很少，我想使用 Apache POI 将这些元素写入 Excel 工作表。此外，我想在每 10 个项目之后将数据放入单独的行中。例如，我的列表有以下元素：

```
["aaa","bbb","ccc","ddd","eee","fff","ggg","hhh","iii","jjj","kkk","lll","mmm","nnn","ooo","ppp","qqq","rrr","sss","ttt",....] 
```

我想要这个在excel表中，格式如下

```
 col1, col2, col3, col4, col5, col6, col7, col8, col9, col10
row1 :  aaa,  bbb,  ccc,  ddd,  eee,  fff,  ggg,  hhh,  iii,  jjj
row2 :  kkk,  lll,  mmm,  nnn,  ooo,  ppp,  qqq,  rrr,  sss,  ttt 
```

这可以通过Apache POI实现吗？

我尝试了以下方法（我在循环中真的很糟糕）

```
public void csvUpdateWorksheet1(String fileName, String sheetName, List<String> data) {

    HSSFWorkbook workbook = new HSSFWorkbook();
    HSSFSheet sheet = workbook.createSheet(sheetName);

    logger.info(data.size());
    int rownum = 0;
    for (int i = 0; i < data.size(); i++) {
        Row row = sheet.createRow(i);
        Cell cell = row.createCell(i);
        cell.setCellValue(data.get(i));    
    }        
    csvWriteToFile(workbook, fileName);            
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:44:37.657

在当前行中创建 10 个单元格后，您将需要创建下一行。

```
int r = 0;
int c = 0;
int maxCellsPerRow = 10;
Row row = sheet.createRow(r);
for (String str : data)
{
    Cell cell = row.createCell(c);
    cell.setCellValue(str);

    c++;
    // Create and advance to next row if needed.
    if (c >= maxCellsPerRow)
    {
       c = 0;
       r++;
       row = sheet.createRow(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:30:32.483

```
int rownum = 0;
int colnum = 0;
int itemsPerRow = 20;
String outfilename = "test.xls";
List<String> values = new ArrayList<String>();
// add some values ...

HSSFWorkbook book = new HSSFWorkbook();

HSSFSheet sheet = book.createSheet(

HSSFRow row = sheet.getRow(rownuw);

for(String s : values) {

   HSSFCell cell = row.createCell(colnum);
   cell.setCellValue(Integer.parseInt(id));
   colnum = (column+1)%itemsPerRow;
   if(colnum == 0) {
       rownum++;
       row = sheet.getRow(rownuw);
   }   
}

File f = new File("src/main/resources/films.xls");
FileOutputStream fos = new FileOutputStream(f);

book.write(fos);
fos.flush();
fos.close(); 
```

# facebook - 添加附加字段以使用 AWD Facebook Wordpress 插件登录

> ID：16180757
> 
> 赞同：1
> 
> 时间：2013-04-23T23:17:21.273
> 
> 标签：facebook, wordpress

我正在使用[AWD Facebook](http://wordpress.org/extend/plugins/facebook-awd/) wordpress 插件来允许我的访问者使用他们的 Facebook 帐户信息登录。当访问者在我的网站上注册时，我会自动创建一个以他们的用户名为标题的新帖子，并包含他们的 Facebook 个人资料图片作为内容。代码如下：

```
function my_create_page($user_id){
$fbuide = 0;
$the_user = get_userdata($user_id);
$new_user_name = $the_user->user_login;
$new_user_avatar = get_avatar($the_user->user_email);

global $AWD_facebook;
$fbuide = $AWD_facebook->uid;

$headers = get_headers('http://graph.facebook.com/' . $fbuide . '/picture?type=large',1);

    if(isset($headers['Location'])) {
        $url = $headers['Location']; // string
    } else {
        $url = false; 
    }

$my_avatar = "<img src='" . $url . "' class='avatar AWD_fbavatar' alt='" . $alt . "' height='" . $size . "' />";
    $my_post = array();
    $my_post['post_title'] = $new_user_name;
    $my_post['post_type'] = 'post';
    $my_post['post_content'] =  $my_avatar;
    $my_post['post_status'] = 'publish';
    wp_insert_post( $my_post );
}
add_action('user_register', 'my_create_page'); 
```

我想要完成的事情有点不同。我还想附上关于用户的简短传记（目前帖子只是他们的照片）。因此，当访问者使用 AWD Facebook 登录时，他们需要一个额外的字段，允许用户输入他们的简历。然后我就可以从他们的用户资料中获取该信息并将其包含在帖子中。关于我如何做到这一点的任何想法？有不同的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:35:34.103

我建议将他们的 Facebook 图片存储为元数据，并将内容区域用作自动生成的帖子的简历。所以这样的事情应该让你开始：

```
$my_post = array(
    'post_title'=>$new_user_name,
    'post_type'=>'post',
    'post_content'=>'',
    'post_status'=>'publish'
);
if( $id = wp_insert_post( $my_post ) ){
    update_post_meta($id, 'avatar', $url);
} 
```

然后你可以像这样生成循环：

```
if ( have_posts() ) : while ( have_posts() ) : the_post();
    //... stuff here
    $avatar = get_post_meta($post->ID, 'avatar', 'true');
    the_content();
    echo '<img class="avatar AWD_fbavatar" src="'.$avatar.'" alt="'.$alt.'" height="'.$size.'" />';
endwhile;endif; 
```

# html - 在移动 Firefox 中隐藏地址栏

> ID：16180760
> 
> 赞同：6
> 
> 时间：2013-04-23T23:17:25.510
> 
> 标签：html, css, firefox, mobile, fennec

我已经尝试了各种在移动浏览器中隐藏地址栏的 scrollTo() 解决方案，但它们似乎在移动 Firefox 中根本不起作用。

在这种情况下是否需要使用不同的技巧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-11T19:40:21.543

如果您负责编写想要全屏显示的页面，则可以运行这些小代码来使用 API：

```
function setFullScreen(el) {

    if (el.requestFullscreen) {
        el.requestFullscreen();
    } else if (el.msRequestFullscreen) {
        el.msRequestFullscreen();
    }else if (el.mozRequestFullScreen) {
        el.mozRequestFullScreen();
    }else if (el.webkitRequestFullscreen) {
        el.webkitRequestFullscreen();
    }
}

function exitFullScreen(){
    if (document.exitFullscreen) {
        document.exitFullscreen();
    } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
    }else if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
    }else if (document.webkitCancelFullScreen) {
        document.webkitCancelFullScreen();
    }
}

function toggleFullScreen(){
    if(!document.fullscreenElement && !document.msFullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement){
        setFullScreen(document.documentElement);
    }else{
        exitFullScreen();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T00:22:52.047

您必须让浏览器进入全屏模式才能实现这一点。

对于移动 FF，您必须在此处创建清单：

```
"fullscreen": "true" 
```

[https://developer.mozilla.org/en-US/Apps/Build/Manifest#fullscreen](https://developer.mozilla.org/en-US/Apps/Build/Manifest#fullscreen)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-10-19T07:06:21.563

不，目前无法在移动版 Firefox 中执行此操作。甚至不是 scrollTo() 技巧或清单文件。

# mysql - 更改列大小时 MySQL 更改表更改或修改

> ID：16180761
> 
> 赞同：1
> 
> 时间：2013-04-23T23:17:33.500
> 
> 标签：mysql

我有一张巨大的桌子（10GB+）。一些开发人员错误地添加了 bigint(250) 列。我想把它带回 bigint(8)

当我使用 MODIFY 语句时，它比使用 CHANGE 快很多

```
更改表人员修改 PersonId bigint(8) auto_increment；
```

比

```
更改表人员更改 PersonId PersonId bigint(8) auto_increment;
```

我对此的看法是改变是重建表而不是修改。但是在这种情况下，修改到底在做什么（在幕后）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:27:20.820

MODIFY 不会尝试重命名该列。即使目标名称与当前名称相同，CHANGE 也会尝试重命名，这很可能是它需要更多时间的原因。

# css - CSS显示自动在顶部留下空白

> ID：16180771
> 
> 赞同：0
> 
> 时间：2013-04-23T23:18:38.133
> 
> 标签：css, internet-explorer, css-position

我有一个 div，`style="position:relative;height:300px;overflow:auto;width:100%;"`它在 chrome 和 firefox 中完美运行。如果我在 Internet Explorer 中尝试，我会在其中应用该样式的 div 上方有一些空白区域。但仅限于兼容模式。在其他模式下，它可以完美运行。

如果我将位置值更改为绝对值，它不会留下空白。但是父 div 的高度设置为 auto，在给出绝对值时不会调整大小。

提前致谢

# bash - 在 Bash 中增加数字并添加前导零

> ID：16180774
> 
> 赞同：5
> 
> 时间：2013-04-23T23:18:47.330
> 
> 标签：bash, unix, leading-zero

问题出在数字 08 和 09 上。我在 Google 上搜索过，发现 08 和 09 有问题的原因，但没有解决方案。

这是一个荒谬的例子，用于简要描述我的问题，而不涉及细节。

```
cursorDay=2;
let cursorDay=$cursorDay+1;

case "$cursorDay" in

1) cursorDay=01;;
2) cursorDay=02;;
3) cursorDay=03;;
4) cursorDay=04;;
5) cursorDay=05;;
6) cursorDay=06;;
7) cursorDay=07;;
8) cursorDay=08;;
9) cursorDay=09;

esac

echo "$cursorDay"; 
```

我期望的输出是“03”，确实我得到了那个输出。但是如果我做同样的事情来尝试得到 08 或 09，我会出现这个错误：

```
line 100: let: cursorDay=08: value too great for base (error token is "08") 
```

问题是，有没有办法“强迫”它把 08 和 09 当作普通数字对待？我找到了几篇详细说明如何消除零的帖子，但我*想要*一个零。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T00:16:52.913

当您评估算术表达式时（如 let 所做的那样），前导 0 表示八进制数。*您可以通过在数字前加上base*来强制 bash 使用给定的 base `#`。此外，您可以使用 printf 用前导零填充数字。

所以你的例子可以重写为

```
cursorDay=2

let cursorDay=10#$cursorDay+1
printf -v cursorDay '%02d\n' "$cursorDay"

echo "$cursorDay" 
```

甚至更短

```
cursorDay=2

printf -v cursorDay '%02d\n' $((10#$cursorDay + 1))

echo "$cursorDay" 
```

请注意，您不能省略`$`介于`#`和 变量名之间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T08:49:11.847

没有“案例”的简短解决方案：

```
((cursorDay++))                   # increment
cursorDay=0$cursorDay             # add leading 0
echo  "${cursorDay: -2}"          # echo last 2 characters 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T23:22:52.533

只需在数字前加上“0”即可。

```
cursorDay=2;
let cursorDay=$cursorDay+1;

case "$cursorDay" in   
1) cursorDay=1;;
2) cursorDay=2;;
3) cursorDay=3;;
4) cursorDay=4;;
5) cursorDay=5;;
6) cursorDay=6;;
7) cursorDay=7;;
8) cursorDay=8;;
9) cursorDay=9;;  
esac  
echo "0$cursorDay"; 
```

或者

```
 case
     ...
    7) cursorDay="07";;
    8) cursorDay="08";;
    9) cursorDay="09";;  

let numericValue=$(expr $cursorDay + 0) 
```

# iphone - StoreKit 和 SKDownload 是否保证完成下载的完整性？

> ID：16180776
> 
> 赞同：2
> 
> 时间：2013-04-23T23:18:57.777
> 
> 标签：iphone, ios, ipad, in-app-purchase, storekit

我的应用使用 Apple 托管的 StoreKit 下载非消耗性 IAP 内容。我是否必须检查完成下载的完整性（例如计算 SHA1 或 MD5），或者当代表收到“下载完成”调用时我是否可以信任下载的完整性？

# javascript - 将输入字段仅限于数字

> ID：16180782
> 
> 赞同：0
> 
> 时间：2013-04-23T23:19:10.447
> 
> 标签：javascript, html

我正在为学校编写一个程序，他希望我们执行以下操作：如果在“年龄”字段中输入了任何非数字条目，则会出现一个带有两行消息的警告框：

您输入的年龄只能包含数字。请重新输入。

Then : 如果输入的年龄小于 18 岁，则应在包含消息的按钮下方显示一个附加段落

然后：对于 18 岁及以上，脚本必须根据申请人获得的大学学位计算并显示薪水。如果申请人持有学位，那么工资将由申请人的年龄乘以 1000.00 美元来确定。如果没有学位，乘数将仅为 600.00 美元。当按下确定薪水按钮时，脚本将显示包含计算出的薪水报价的额外段落元素，如下面的示例插图所示。

我已经尝试了所有我能想到的方法来确保年龄字段中没有输入任何字母字符，但我似乎无法让它工作。请帮忙！

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>

<head>
   <meta http-equiv='Content-Type' content='text/html; charset= utf-8' />
   <title>Form Based JavaScript</title>
   <style type = "text/css">
      h2 {text-align:left;}
      body {background-color:lightblue;}
      .input {font-family:"Courier New", Courier, monospace;}
   </style>   

   <script type = "text/javascript">
      <!--
   function salary()  `enter code here`
      {
        var age;
        var degree;

      if (age != [0-99]
        {
            document.writeln( "The age that you entered must contain only numerals. <br /> Please re-enter it.");

      else if (age < 18)

           document.writeln( " Sorry - you must be 18 or older for this job. <br /> Please reapply in [18 - age] years." );

      else if (age >=18)

           document.writeln( " You qualify! Salary offer [degree * ] dollars. See our staff for an application" );
          }

      }

      // -->
   </script>

<!-- project6.htm Tatiana Saavedra 04/17/2013 -->

</head>

<body>

<h2> Applicant Screening Page </h2>

<hr />

<form id = "myForm" action = "">
   <p>Email:<input type = "email" id = "email"></p>
   <p>Age:<input type = "number" maxlength="3" size="3" id = "age"></p>
   <p><label>Check the box if you hold a college degree: <input type = "checkbox" id = "degree"></label></p>

<br />
<form action="">
 <input type="button" value="Determine Salary" onclick="salary()"/>
</form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:39:34.627

尝试这个 ：

```
 function isInteger(n) 
             {
                if (n.indexOf('.') != -1)
                {
                   return false;//do not accept decimal numbers
                }
                return !isNaN(parseInt(n)) && isFinite(n);
             } 
```

parseInt 将值解析为整数，如果值包含字母字符，则返回 NaN

isNaN 检查结果是否为 NaN

isFinite 处理 n 以数字开头但包含字符的情况。

您不使用的原因只是`isFinite`因为如果您尝试`isFinite(' ')`它会返回 true。

还可以与`parseInt(age)`价值进行比较，因为您比较数字会更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T01:23:13.867

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN'
 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'> 
```

这是一个不应该使用的非常古老的 DOCTYPE（它在 10 多年前旨在帮助从 HTML 过渡到 XHTML，但从未发生过）。只需使用：

```
<?DOCTYPE html>
<html>

<head>
   <meta http-equiv='Content-Type' content='text/html; charset= utf-8' /> 
```

看？内容是 HTML，作为 HTML 提供。:-) [...]

如果这是 XML，那么您只是空白页面。近 20 年来，HTML 注释分隔符一直没有必要，在符合 HTML 标准的浏览器中，头部中的脚本元素从来不需要它们。不要使用它们。

```
function salary()  `enter code here`
  { 
```

糟糕，那里不能有字符串文字。把它放在函数体中。我喜欢将左大括号与函数关键字和名称放在同一行。我假设字符串根本不存在：

```
function salary() {
    var age;
    var degree;

    if (age != [0-99] 
```

缺少右括号“)”。

```
 {
        document.writeln( "The age that you entered must contain only numerals. <br /> Please re-enter it."); 
```

如果您`document.writeln`在文档加载完成后调用，它将首先调用`document.open`，

清除文档中的所有内容。您可能想要做的是向文档添​​加一个元素并将文本放入其中。或者将文本放在页面中已有的元素中。

```
 else if (age < 18) 
```

您应该在所有 if 块周围使用大括号，它使代码更易于阅读。有时对于非常简单的块和语句省略它们是很方便的，但这里不是。小号

```
 document.writeln( " Sorry - you must be 18 or older for this job. <br /> Please reapply in [18 - age] years." ); 
```

您似乎正在尝试在字符串中进行算术运算，但您不能这样做。因此`document.writeln`，用写入元素替换，并执行以下算术运算：

```
"Please reapply in " + (18 - age) + " years." 
```

.

```
 else if (age >=18)
        document.writeln( " You qualify! Salary offer [degree * ] dollars. See our staff for an application" );
    }
  } 
```

同样在这里。

```
</script>
</head>
<body>
<h2> Applicant Screening Page </h2>
<hr>
<form id = "myForm" action = "">
    <p>Email:<input type = "email" id = "email"></p>
    <p>Age:<input type = "number" maxlength="3" size="3" id = "age"></p> 
```

您可以在年龄输入之后放置一个空跨度以放入消息。

```
 <p><label>Check the box if you hold a college degree: <input type = "checkbox" id = "degree"></label></p> 
```

表单控件需要一个名称才能成功，它们通常不需要 ID。

```
 <p>Email:<input type="email" name="email"></p>
    <p>Age:<input type ="number" maxlength="3" size="3" name="age"></p>
    <p><label>Check the box if you hold a college degree: <input type="checkbox" name="degree"></label></p>
    <br>
    <form action=""> 
```

您不能将表单放入表单中，只需删除上面的标签（它没有结束标签）。

```
 <input type="button" value="Determine Salary" onclick="salary()"> 
```

您需要一个提交按钮来提交表单。

```
</form>
</body>
</html> 
```

因此，请尝试更新您的代码，如果您需要更多帮助，请返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T23:32:11.650

你有几个错误打开和关闭你的括号，在任何事情之前检查这个，你的javascript没有加载，因此什么都不做，正如已经告诉你的那样，你声明了变量但没有给它们赋值。我还建议您将 javascript 放在页面底部

# android - 当人们从 google play 下载我的应用程序时，我收到此错误：java.lang.RuntimeException：无法实例化活动

> ID：16180783
> 
> 赞同：0
> 
> 时间：2013-04-23T23:19:13.760
> 
> 标签：android, error-handling, compiler-errors, runtime-error

我叫瓦利德。

当人们从 google play 下载我的应用程序时，我遇到了这个错误我得到了这个错误，我认为当某些设备下载应用程序时，它会导致应用程序崩溃。

这是清单中的 sdk。

如果有人知道如何解决这个问题，请告诉我。

谢谢你。

```
<uses-sdk
    android:minSdkVersion="2"
    android:targetSdkVersion="17" />

java.lang.RuntimeException: Unable to instantiate activity  ComponentInfo{tigris.code.oneallah.walid/tigris.code.oneallah.walid.MenuPage}:   java.lang.ClassNotFoundException: tigris.code.oneallah.walid.MenuPage in loader    dalvik.system.PathClassLoader[/data/app/tigris.code.oneallah.walid-1.apk]
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3693)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: tigris.code.oneallah.walid.MenuPage in            loader dalvik.system.PathClassLoader[/data/app/tigris.code.oneallah.walid-1.apk]
at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:23:36.443

您的 APK 文件不包含名为`tigris.code.oneallah.walid.MenuPage`. APK 缺少该类，或者 ProGuard 将其重命名。

# c - if 语句 OR AND 上的 C 逻辑运算符

> ID：16180791
> 
> 赞同：0
> 
> 时间：2013-04-23T23:20:16.503
> 
> 标签：c, operators

这个逻辑有问题，它检测到所有内容并打印`bad pkt detected`。

```
if((buff[0] != 0x0a || buff[0] != 0x0e) && (len == 210))
{
    printf("badpkt detected from %s\n", xpi);
} else {
    if(mysend(ssl_sd ? ssl_sd[i] : NULL, sd[i], buff, len) <= 0) MULTI_SKIP_QUIT
} 
```

逻辑是拒绝所有长度为 210 的数据包。除非第一个字节是 0x0A 或 0x0E。

这段代码虽然有效：

```
if((buff[0] != 0x0a) && (len == 210))
{
    printf("badpkt detected from %s\n", xpi);
} else {
    if(mysend(ssl_sd ? ssl_sd[i] : NULL, sd[i], buff, len) <= 0) MULTI_SKIP_QUIT
} 
```

但我需要两者`0x0a`，并且`0x0e`是唯一允许的 210 长度数据包。

*编辑*

我在想什么，也许是睡眠不足。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:23:21.327

如果你想要两者都`0x0a`允许`0x0e`，你需要使用这个条件：

```
if((buff[0] == 0x0a || buff[0] == 0x0e) && (len == 210)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:23:53.240

这`(buff[0] != 0x0a || buff[0] != 0x0e)`总是**正确的**。

它应该是`if(buff[0] != 0x0a && buff[0] != 0x0e && (len == 210))`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T23:24:05.150

你需要这个逻辑：

```
if(buff[0] != 0x0a && buff[0] != 0x0e && len == 210) 
```

有了这个条件：

```
 if((buff[0] != 0x0a || buff[0] != 0x0e) && (len == 210)) 
```

想象`buff[0]`是`0x0e`。然后`buff[0] != 0x0a`将是真的，这使得整个子表达式`(buff[0] != 0x0a || buff[0] != 0x0e)`为真。

您还可以反转条件：

```
if((buff[0] == 0x0a || buff[0] == 0x0e) //always allow these
     || (len != 210)) //and allow anything thats not of length 210
{
    if(mysend(ssl_sd ? ssl_sd[i] : NULL, sd[i], buff, len) <= 0) 
         MULTI_SKIP_QUIT

} else {
     printf("badpkt detected from %s\n", xpi);
} 
```

# gdata - Google 通讯录 API 故障 - 服务器停机？

> ID：16180792
> 
> 赞同：4
> 
> 时间：2013-04-23T23:20:21.227
> 
> 标签：gdata, gdata-api, google-contacts-api, google-shared-contacts

突然间，我发现我的 Google 联系人集成网络应用程序无法直接调用服务器。

几个月来我没有更改任何 oAuth 代码，但突然之间我无法连接或调用现有令牌。

返回的大部分是垃圾，但在标题中我得到了 401 - Unauthorized 并且在你的正文中：

```
Error
401
(Client Error)!!1

That's an error.
There was an error in your request.
That's all we know. 
```

从那以后，我尝试在 oAuth 2.0 Playground 中运行一些电话并经历了类似的行为。还有人看到这个吗？

我刚看到一个月前的这个帖子： [Google Contacts Data Api 401 error](https://stackoverflow.com/questions/6996957/google-contacts-data-api-401-error)

但是，文档已恢复。

GOOGLE DEVS：任何关于此事的见解都会尽快得到赞赏。

# c++ - 比较双打的简单方法

> ID：16180801
> 
> 赞同：0
> 
> 时间：2013-04-23T23:21:53.057
> 
> 标签：c++, compare, double, floating

我正在编写一个数字代码，需要在双精度数字之间进行广泛（可能是快速）比较。我比较两个数字 A 和 B 的解决方案包括将 A 向左（或向右）移动一个 epsilon 并检查结果是否大于（或小于）B。如果是，则两个双精度数相同。（需要对负数或零数进行额外编码）。

这是比较函数：

```
#define S_
inline double s_l (double x){
    if(x>0){return 0.999999999*x;}
    else if(x<0){return 1.00000001*x;}
    else {return x-0.000000000001;}
}
inline double s_r (double x){
    if(x>0){return 1.00000001*x;}
    else if(x<0){return 0.999999999*x;}
    else{return x+0.000000000001;}
}
inline bool s_equal (double x,double y){
    if(x==y){return true;}
    else if(x<y && s_r(x)>y){return true;}
    else if(x>y && s_l(x)<y){return true;}
    else{return false;}
}
#endif 
```

由于这是蒙特卡洛算法的一部分，并且 s_equal(x,y) 被调用了数百万次，我想知道是否有更好或更快的方法来编写这个代码，在简单的层面上是可以理解的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:52:43.013

通过避免所有双精度数学，我惊讶地发现显着加速：

```
#define S_L(x) (x)+((x)<0?1024:-1024)
#define S_R(x) (x)+((x)<0?-1024:1024)
#define S_EQUAL(x,y) (S_L(x)<(y) && S_R(x)>(y))

double foo;                                                                      
double bar;                                                                      
long *pfoo;                                                                      
long *pbar;                                                                      

pfoo = (long*)&foo;                                                              
pbar = (long*)&bar;          

double result1 = S_R(*pfoo);
double result2 = S_L(*pbar);
bool result3 = S_EQUAL(*pfoo, *pbar); 
```

（在测试中，我在 -1M 和 1M 之间对随机生成的双精度进行操作，每次迭代执行每个操作 100M 次，每次迭代使用不同的输入。每个操作在一个独立的循环中计时，比较系统时间 - 而不是墙时间。 **包括循环开销和生成随机数**，这个解决方案快了大约 25%。）

一个警告：这里有很多依赖于你的硬件，你的双打范围，你的优化器的行为等等。当你开始猜测你的编译器时，这样的陷阱很常见。我很震惊地看到这对我来说有多快，因为我一直被告知整数和浮点单元在硬件上保持如此独立，以至于从一个到另一个的位传输总是需要硬件内存操作。谁知道这对你有多好。

您可能需要稍微使用一下神奇的数字（1024s）才能让它按照您的意愿去做——如果它甚至可能的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T03:37:41.880

我做了类似 abs( (xy)/x ) < 1.0e-10 的事情。

如果两个值都很大或很小，则需要除以 x。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T03:18:03.220

如果您使用的是 C++11，那么您可以使用新的`math`库函数，例如：

`bool isgreater(float x, float y)`

更多文档`std::isgreater`可以在[这里找到](http://en.cppreference.com/w/cpp/numeric/math/isgreater)。

否则，总会[`is_equal`](http://www.boost.org/doc/libs/1_38_0/doc/html/boost/algorithm/is_equal.html)有提升。此外，SO 已经有一堆相关的（不确定是否相同）问题，例如[这里](https://stackoverflow.com/questions/17333/most-effective-way-for-float-and-double-comparison)、[这里](https://stackoverflow.com/questions/4548004/how-to-correctly-and-standardly-compare-floats)和[这里](https://stackoverflow.com/questions/2833153/floating-point-comparison-in-stl-boost)的问题。

# apache-kafka - Kafka 0.8 中经纪人的分区重新平衡

> ID：16180804
> 
> 赞同：5
> 
> 时间：2013-04-23T23:22:16.687
> 
> 标签：apache-kafka

Kafka 0.8 相对稀缺的文档没有提到平衡代理上现有主题、分区和副本的预期行为是什么。

更具体地说，经纪人到达和经纪人（领导者与否）崩溃时的预期行为是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T14:03:30.420

我不久前已经测试了这两个案例，并且没有承受重负载。我有一个生产者在一个由 2 个代理组成的集群上同步发送 10k 条消息（只是一个小字符串）到一个主题，复制因子为 2，有 2 个分区。有2个消费者。每个组件都部署在单独的机器上。我观察到的是：

*   **在正常操作**中：代理 1 是分区 1 上的领导者和分区 2 上的副本。代理 2 是分区 2 上的领导者和分区 1 上的副本。将代理 3 带入集群不会自动触发分区上的重新平衡。

*   **在经纪人复兴（崩溃而不是重新启动）**：重新平衡对生产者和消费者是透明的。重新启动的代理首先复制日志，然后使其自身可用。

*   **经纪人崩溃（领导者与否）** ：由任何一个经纪人上的**kill -9**模拟。生产者和消费者被冻结，直到被终止代理的 ZK 中的临时节点过期。之后，操作恢复正常。

# javascript - 编写代码来为我用 Javascript 创建的测验评分

> ID：16180805
> 
> 赞同：0
> 
> 时间：2013-04-23T23:22:16.680
> 
> 标签：javascript, jquery

我正在尝试自学代码，目前我正忙于我正在从事的一个迷你项目。我相信我已经完成了 HTML 代码；但是，我很难让 Javascript/jQuery 做我想做的事情。

我希望 Javascript/jQuery 对我的测验进行评分并将分数打印在不同的页面上。我不确定我的语法是否错误，或者我是否打错电话或......？

这是HTML：

```
<body>

<div class="center">

<div id="questionContainer">

<div id="header">
<h1>State Capitol Quiz</h1>
</div>

<div id="left">

<form action="quiz.html" class="container">
<div class="blank">
<br />
    <br />
    <p id="one">1.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Michigan?<br />
        <div class="tab">
            <input type="radio" name="question" value="A" />&nbsp;Lansing<br />
            <input type="radio" name="question" value="B" />&nbsp;Richmond<br />
            <input type="radio" name="question" value="C" />&nbsp;Austin<br />
            <input type="radio" name="question" value="D" />&nbsp;Columbus<br />
        </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
<br />
<br />
    <p id="two">2.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Virginia?<br />
       <div class="tab">
        <input type="radio" name="question" value="A" />&nbsp;Lansing<br />
        <input type="radio" name="question" value="B" />&nbsp;Richmond<br />
        <input type="radio" name="question" value="C" />&nbsp;Lincoln<br />
        <input type="radio" name="question" value="D" />&nbsp;Reno<br />
      </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
<br />
<br />
    <p id="three">3.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Arkansas?<br />
        <div class="tab">  
            <input type="radio" name="question" value="A" />&nbsp;Dallas<br />
            <input type="radio" name="question" value="B" />&nbsp;Lincoln<br />
            <input type="radio" name="question" value="C" />&nbsp;Little Rock<br />
            <input type="radio" name="question" value="D" />&nbsp;Cheyene<br />
        </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
<br />
<br />
    <p id="four">4.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Arizona?<br />
        <div class="tab"> 
            <input type="radio" name="question" value="A" />&nbsp;Juneau<br />
            <input type="radio" name="question" value="B" />&nbsp;Honolulu<br />
            <input type="radio" name="question" value="C" />&nbsp;Pheonix<br />
            <input type="radio" name="question" value="D" />&nbsp;Toledo<br />
        </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
<br />
<br />
    <p id="five">5.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Florida?<br /> 
        <div class="tab"> 
            <input type="radio" name="question" value="A" />&nbsp;Oakland<br />
            <input type="radio" name="question" value="B" />&nbsp;Kansas City<br />
            <input type="radio" name="question" value="C" />&nbsp;Tallahassee<br />
            <input type="radio" name="question" value="D" />&nbsp;Miami<br />
    </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
<br />
<br />
    <p id="six">6.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Nebraska?<br />
        <div class="tab">  
            <input type="radio" name="question" value="A" />&nbsp;Omaha<br />
            <input type="radio" name="question" value="B" />&nbsp;Lincoln<br />
            <input type="radio" name="question" value="C" />&nbsp;Sacramento<br />
        <input type="radio" name="question" value="D" />&nbsp;Sab Diego<br />
        </div>
    </p>
</div>
</form>
</div>

<div id="right">
<form action="quiz.html" class="container">
<br />
<br />
<div class="blank">
    <p id="seven">7.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Texas?<br />
        <div class="tab">    
            <input type="radio" name="question" value="A" />&nbsp;Fortworth<br />
            <input type="radio" name="question" value="B" />&nbsp;Richmond<br />
            <input type="radio" name="question" value="C" />&nbsp;Austin<br />
            <input type="radio" name="question" value="D" />&nbsp;Las Vegas<br />
        </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
    <p id="eight">8.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Alaska?<br />
        <div class="tab">   
            <input type="radio" name="question" value="A" />&nbsp;Tulsa<br />
            <input type="radio" name="question" value="B" />&nbsp;Oaklahoma City<br />
            <input type="radio" name="question" value="C" />&nbsp;Austin<br />
        <input type="radio" name="question" value="D" />&nbsp;Juneau<br />
        </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
    <p id="nine">9.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Hawaii?<br /> 
        <div class="tab"> 
            <input type="radio" name="question" value="A" />&nbsp;Paris<br />
            <input type="radio" name="question" value="B" />&nbsp;Honolulu<br />
            <input type="radio" name="question" value="C" />&nbsp;Austin<br />
            <input type="radio" name="question" value="D" />&nbsp;Cadilac<br />
        </div>
    </p>
</div>
</form>

<form action="quiz.html" class="container">
<div class="blank">
    <p id="ten">10.&nbsp; &nbsp;&nbsp;&nbsp;What is the capitol of Ohio?<br />
        <div class="tab">   
            <input type="radio" name="question" value="A" />&nbsp;Cleveland<br />
            <input type="radio" name="question" value="B" />&nbsp;Green Bay<br />
            <input type="radio" name="question" value="C" />&nbsp;Austin<br />
            <input type="radio" name="question" value="D" />&nbsp;Columbus<br />
        </div>
    </p>
</div>
</form>

<div id="buttonDiv">        
    <input type="button" id="button" value="submit" />
</div>

</div>

</div>

</div>

<div class="center">

<div id="answerSheet">
    <p id="score"><h1>Your Score!</h1></p>
    <br />
    <p>Results:</p>
 </div>

</div>

</body> 
```

这是Javascript/jQuery：

```
$(document).ready(function(){
$("#button").click(function(){
$("#questionContainer").fadeOut("slow",function(){
    $("#answerSheet").fadeIn("slow",function(){
    });
});

var numQues= 10;
var numChoices= 4;
var answers = new Array(10);

answers[0] = "Lansing";
answers[1] = "Richmond";
answers[2] = "Little Rock";
answers[3] = "Pheonix";
answers[4] = "Tallahassee";
answers[5] = "Lincoln";
answers[6] = "Austin";
answers[7] = "Juneau";
answers[8] = "Honolulu";
answers[9] = "Columbus";

function getScore(form){
var score = 0;
var currElt;
var currSelection;
for(i = 0; i<numQues; i++){
    currElt = i * numChoi;
    for(j = 0; j<numChoi; j++){
        currSelection = form.elements[currElt + j];
        if(currSelection.checked){
            if(currSelection.value == answers[i]){
                score++;
                break;
            }
        }
    }
}

score = math.round(score/numQues * 100);
form.precentage.value = score + "&#37;";
var corrAnswers = "";
for(i = 1; i <numQues; i++){
    corrAnswers += i + "." + answers [i - 1] + "\r\n;"
}
form.solutions.value = corrAnswers/numQues * 100 + "%";}

});
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:09:25.887

这是一种使用 HTML 结构和 jQuery 来帮助您的方法：

工作演示：http: [//jsfiddle.net/jfriend00/Dkdrh/](http://jsfiddle.net/jfriend00/Dkdrh/)

点击问题的答案（正确或错误），然后点击下面的“分数”按钮，让它为您计算分数。这是代码：

```
// text value and then question answer value
var answers = [
    "Lansing", "A",
    "Richmond", "B",
    "Little Rock", "C",
    "Phoenix", "C",
    "Tallahassee", "C",
    "Lincoln", "B",
    "Austin", "C",
    "Juneau", "D",
    "Honolulu", "B",
    "Columbus", "D"
];

function calcScore() {
    var results = {right: 0, wrong: 0, answered: [], unanswered: [], missed: []};
    $("form .tab").each(function(index) {
        var chosen = $(this).find("input:checked");
        if (chosen.length) {
            results.answered.push(index);
            if (chosen.val() == answers[(index * 2) + 1]) {
                results.right++;
                results.answered.push(index);
            } else {
                results.wrong++;
                results.missed.push(index);
            }
        } else {
            results.unanswered.push(index);
        }
    });
    return(results);
}

$("#buttonDiv").click(function() {
    var results = calcScore();
    var str = "Correct: " + results.right + ", Wrong: " + results.wrong + ", Unanswered: " + results.unanswered.length;
    $("#results").html(str);
}); 
```

关于代码的一些注释：

1.  答案存储在一个包含文本值和字母值的数组中，以便于比较。您这样做是`2 * index`为了获得文本答案并`(2 * index) + 1`获得答案的字母值。
2.  该`calcScore()`函数返回正确的数字、错误的数字、未回答的数字以及已回答正确、回答不正确和未回答的问题编号的数组。
3.  该`calcScore()`函数使用 HTML 的结构来自动跟踪问题编号。

* * *

我没有完全按照您尝试对代码执行的操作，但我看到的一个大问题是您将答案数组中的文本值与单选按钮的值进行比较`.value`，但单选按钮的值设置为`"A"`, `"B"`,`"C"`所以`"D"`他们永远不会匹配你在数组中的文本。

* * *

仅供参考，如果您想查看在 HTML 中使用更自然格式的不同方式，请在此处查看 HTML 和 CSS：http: [//jsfiddle.net/jfriend00/H26c8/](http://jsfiddle.net/jfriend00/H26c8/)。提示：它使用一个有序列表来自动编号问题的有序列表。

# visual-studio-2010 - CUDA 超过最大线程数没有错误？

> ID：16180808
> 
> 赞同：-2
> 
> 时间：2013-04-23T23:22:23.967
> 
> 标签：visual-studio-2010, cuda, parallel-processing

最初的问题是启动更多线程，可能像这样：

```
someKernel<<<1 , 1025>>> ( ... ); 
```

并且没有检测到错误，因为我不知道如何检测内核调用错误。这在这个问题的 talonmies 回答中得到了很好的解释：

[使用 CUDA 运行时 API 检查错误的规范方法是什么？](https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api/14038590#14038590)

为了简洁起见，我没有修改我提供的代码，而是编写了自己的代码：

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h"

#include <stdio.h>

#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t cudaError, char *file, int line, bool abort=true)
{
   if (cudaError != cudaSuccess) 
   {
      fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(cudaError), file, line);
   }
}

__global__ void addKernel(const int *dev_a, const int *dev_b, int *dev_c)
{
    int i = threadIdx.x;
    if ( i < 5 )
        dev_c[i] = dev_a[i] + dev_b[i];
}

int main()
{
    const int arraySize = 5;
    const int a[arraySize] = { 1, 2, 3, 4, 5 };
    const int b[arraySize] = { 10, 20, 30, 40, 50 };
    int c[arraySize] = { 0 };

    int *dev_a(nullptr), *dev_b(nullptr), *dev_c(nullptr);

    gpuErrchk( cudaMalloc((void**)&dev_a, arraySize * sizeof(int)) );
    gpuErrchk( cudaMalloc((void**)&dev_b, arraySize * sizeof(int)) );
    gpuErrchk( cudaMalloc((void**)&dev_c, arraySize * sizeof(int)) );

    gpuErrchk( cudaMemcpy(dev_a, a, arraySize * sizeof(int), cudaMemcpyHostToDevice) );
    gpuErrchk( cudaMemcpy(dev_b, b, arraySize * sizeof(int), cudaMemcpyHostToDevice) );

    const int testMax1D = 1025; 
    dim3 testMax2D ( 32, 33 );

    addKernel<<<1, testMax2D>>> ( dev_a , dev_b, dev_c );
    gpuErrchk( cudaPeekAtLastError() );
    gpuErrchk( cudaDeviceSynchronize() );

    gpuErrchk(  cudaMemcpy( c, dev_c, arraySize * sizeof(int), cudaMemcpyDeviceToHost) );

    printf("{1,2,3,4,5} + {10,20,30,40,50} = {%d,%d,%d,%d,%d}\n",
        c[0], c[1], c[2], c[3], c[4]);

    cudaFree(dev_a);
    cudaFree(dev_b);
    cudaFree(dev_c);

    return 0;
} 
```

我现在得到正确的错误报告。感谢您的耐心等待。

我不明白`gpuAssert`函数中的这个调用，所以我省略了它：

```
if (abort) exit(code); 
```

退出是自定义的书面功能还是我错过的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T05:12:37.590

内核启动可能会出现两类错误，需要按照特定顺序在单独的步骤中检查它们。

第一类错误是在进行内核调用时和在内核实际在设备上启动之前同步报告的，即这些是“启动前”错误。这些错误通常涉及请求比可用资源更多的特定资源（例如，共享内存过多、线程过多）。通过在内核调用后立即调用 cudaGetLastError() 来检查这些。

第二类错误是在内核在设备上启动后的某个时间点发生的错误（例如内存访问冲突、看门狗定时器超时）。这些是“发布后”错误。内核调用后一段时间报告它们的原因是内核启动异步发生的自然结果。下次有机会报告它们，通常是下一次同步 API 调用。通过调用 cudaDeviceSynchronize() 并检查其状态返回来检查这些。

发布的代码缺少对第一类错误的检查。

# c++ - 玩家角色 (@) 的背景颜色与其他图块重叠

> ID：16180809
> 
> 赞同：2
> 
> 时间：2013-04-23T23:22:28.103
> 
> 标签：c++, ncurses, curses, pdcurses

我正在使用 C++ 中的 pdcurses 制作一个类似流氓的游戏，目前一切正常。但是我现在面临一个我不知道如何解决的问题。

让我们看一下问题的屏幕截图以便更好地理解：

![http://i.imgur.com/xr9Faj1.png](https://i.stack.imgur.com/9ylf4.png)

如您所见，如果放大上方的红色圆圈，您可以看到玩家角色如何在左侧与敌人巨魔 (t) 重叠约 2 个像素。问题是如果玩家移动到另一个位置，敌人巨魔已经**永远**失去了 2 个像素，所以这不是玩家在左侧时才会发生的事情，而是永久性的。

在另一个圆圈中，玩家在走廊上从右向左移动，走廊瓷砖 (#) 也失去了左侧像素。

所以这里是我更新所有图形的地方：

```
dungeon_.generate();

while(state_ == State::Running)
{
    if(manageInput(windows_[0]) != -1)
    {
        // Update here monsters behavior
    }

    dungeon_.draw(windows_[0]);
    player_->draw(windows_[0]);

    refreshWindows(windows_);
} 
```

这是**refreshWindows(std::vector windows)**方法：

```
void Game::refreshWindows(std::vector<WINDOW *> windows)
{
    for(auto w : windows)
    {
        Curses::wbox(w, 0, 0);
        Curses::refresh(w);
    }
} 
```

**玩家和地牢的绘制方法**都是这样做的，但地牢在绘制地图中的每个图块时也有不同的情况：

```
void Player::draw(WINDOW *win)
{
    Curses::mvwaddch(win, location_.y, location_.x, 
        static_cast<char>(type_) | 
        COLOR_PAIR(static_cast<int>(GameObject::Color::White_Green)));
} 
```

这就是**int manageInput(WINDOW *win)**的样子：

```
int Game::manageInput(WINDOW *win)
{
    int key = Curses::wgetch(win);

    if(key != -1)
    {
        // Player movement
        if(key == static_cast<int>(Curses::Key::Up))
        {
            player_->moveNorth(dungeon_.map());
        }
        [...]
    }

    return key;
} 
```

如您所见，这是我在游戏循环中使用的一种非常简单的方法，所以我不知道为什么它不起作用。这些是我测试过的东西：

*   移除颜色支持：这是游戏正常运行的唯一方法，但我当然想使用颜色。
*   如果在玩家和地牢都绘制并放置 wclear(windows_[0]); 之后移动 manageInput 在 manageInput() if 内（否则它不起作用）。这种方式似乎窗口被清除，地图重新从头开始绘制。这种方式也可以，**但是**窗口会闪烁，这并不是很酷。

就这样。我不知道该怎么做才能修复它。如果您需要更多信息，可以在这里找到 git 存储库：[https ://github.com/SantiagoSanchez/Ruoeg](https://github.com/SantiagoSanchez/Ruoeg)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:19:02.000

Ok, it seems like I have found the source of the problem.

> It doesn't have to be with curses library, but bitmap fonts at Windows console.

More details: [https://stackoverflow.com/a/9814766/368299](https://stackoverflow.com/a/9814766/368299)

# android - SQLite 查询不返回任何记录

> ID：16180811
> 
> 赞同：0
> 
> 时间：2013-04-23T23:22:34.050
> 
> 标签：android, sqlite

我正在执行一个 SQLite 查询：

```
String selectQuery = "SELECT hotel.cityName, hotel.hotelName, hotel.roomName, hotel.roomCode, hotel.roomType, hotel.maxPax FROM hotel WHERE ( hotel.cityName = 'Adelaide' OR hotel.cityName = 'Brisbane' OR hotel.cityName = 'Canberra' ) AND hotel.maxPax < 200 AND hotel.maxPax >= 100 AND ( hotel.roomType = 'Boardroom' )" 
```

针对从 XML 创建的名为“hotel”的数据库表，具有以下标题（根据 DDMS）：

```
id (INT)
cityName (TEXT)
hotelName (TEXT)
roomCode (TEXT)
roomName (TEXT)
roomType (TEXT)
maxPax (INT) 
```

每次我运行查询时：

```
 SQLiteDatabase db = this.getWritableDatabase ( );
    Cursor cursor = db.rawQuery ( selectQuery, null ); 
```

cursor.getCount() 返回 0。

我检查了实际数据，这个查询肯定会返回数据。为什么 cursor.getCount() 返回 0？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:37:28.690

您的 Java 代码看起来不错，我猜问题出在您的 SQL 上。[当我遇到此类问题时，我经常在 Firefox 的SQLite 管理器](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/)或[SQLite 浏览器](http://sqlitebrowser.org/)中重新创建数据库内容，然后进行查询并开始从 WHERE 类中删除内容，直到获得结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:37:20.150

尝试将您的数据库变量分配给 SQLiteOpenHelper。我真的不知道一个相当随意`this`的`getWritableDatabase()`方法。

```
SQLiteOpenHelper helper = new SQLiteOpenHelper()
SQLiteDatabase db = helper.getWritableDatabase(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T23:34:57.560

尝试使用“查询”方法（[Android 开发人员](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)）

```
db.query("hotel", null, "(cityName = ? OR cityName = ? OR cityName = ?) AND maxPax < 200 AND maxPax >= 100 AND roomType = ?", new String[] {"Adelaide", "Brisbane", "Canberra", "Boardroom"}, null, null, null); 
```

如果它不起作用，请提取数据库并测试查询。

# ember.js - 如何在ember RC3中动态修改视图

> ID：16180812
> 
> 赞同：0
> 
> 时间：2013-04-23T23:22:40.377
> 
> 标签：ember.js

我有以下用例。在服务器端错误上，我想向用户展示出了点问题（可能允许他们重试）。我可以使用弹出窗口或状态栏。同时我想保持当前视图打开，即用户应该留在发生错误的地方。

我想（如果我错了，请纠正我）我不应该使用 transitionTo(...) 因为这将取代我当前的观点。我的意图是在应用程序视图（最外面的模板/视图）中有一个通用功能，它可以动态添加/删除通知。

非常欢迎如何构建和修改 UI 的设计理念。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:38:42.197

我对这个确切用例的解决方案很简单。我在其中定义了一个事件处理程序，`ApplicationRoute`它收集这些异常并将它们注入到我的自定义中`ExceptionsController`，并`exceptions`在某处呈现到主应用程序模板中。

```
App.ApplicationRoute = Ember.Route.extend({
    events: {
        exceptionHandler: function (exception) {
            this.controllerFor('exceptions').addObject(exception);
        }
    }
}); 
```

`ExceptionsController`只是`ArrayController`.

```
App.ExceptionsController = Ember.ArrayController.extend(); 
```

最后在我的主应用程序模板中的某个地方我只是使用：

```
{{render 'exceptions'}} 
```

我将把模板留给你想象。

**编辑**

然后，如果您想引发异常，只需使用`send`在控制器或路由中的任何位置触发操作。

```
this.send('exceptionHandler', exception); 
```

例外是您的自定义模型。

此解决方案的优点是您可以在应用程序路由下方或任何控制器中的任何其他路由中覆盖处理程序。

# c++ - 没有匹配的函数调用 C++

> ID：16180822
> 
> 赞同：1
> 
> 时间：2013-04-23T23:23:01.807
> 
> 标签：c++

尝试初始化 Board 类型的对象时，我在 C++ 中遇到上述错误。board 的构造函数接受两个整数，所以它是

```
Board::Board(int w, int h) 
```

我正在尝试创建一个连接四游戏。ConnectFour.h 文件具有以下内容：

```
Board b; 
```

在它的私有变量中，ConnectFour.cpp 中的构造函数是这样的：

```
ConnectFour::ConnectFour()
{
   Board b(7, 6); 
```

除其他外，显然。

它给了我错误：

在构造函数 'ConnectFour::ConnectFour(int, int)':|

错误：没有匹配函数调用'Board::Board()'|

注：候选人是：|

注意： Board::Board(int, int)|

注意：候选人需要 2 个参数，提供 0 个|

如果有人能伸出援手，我将不胜感激。

编辑：原来我有点傻。多谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T23:25:38.903

您需要为板提供一个不带参数的构造函数来处理您的`Board b;`代码，或者您需要在创建对象时将宽度、高度传递给对象，`Board b(width, height);`或者您可以将板的初始化放入 ConnectFour 的初始化列表中

```
 ConnectFour::ConnectFour() :
b(7,6)
{
} 

```

以便它具有创建 ConnectFour 时所需的信息。

最后，您可以在父类中保留一个指向 Board 对象的指针，并在父类的构造函数中动态创建它。这需要更加小心，并且可能使用智能指针来正确处理对象的创建和销毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:36:05.157

我猜是这样的

```
class board
{
public:
    board::board(int w,int h)
    {
        w = 0;
        h = 0;
    }
};

class connectFour
{
    connectFour::connectFour(int, int)
    {
        board b(7,9);
    }
}; 
```

# algorithm - 从根开始逐级遍历二叉树的算法

> ID：16180824
> 
> 赞同：2
> 
> 时间：2013-04-23T23:23:07.237
> 
> 标签：algorithm, data-structures, tree, binary-tree

任何人都可以建议一种算法从根开始逐级遍历二叉树吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T23:27:09.220

这是通过[*广度优先*](http://en.wikipedia.org/wiki/Breadth-first_search)搜索你的树来完成的：

*   创建树节点队列
*   将树根入队
*   当队列不为空时，重复以下操作：
*   出列节点，并打印其内容
*   将当前节点的左子节点入队
*   将当前节点的右子节点入队

当您遵循此算法时，将在打印 level`K`中的第一个节点之前打印level 中的所有节点`K+1`，因此将逐级打印树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:27:22.017

您可以使用队列执行这种遍历。从根节点将其子节点推送到队列的末尾，然后当队列不为空时，从队列顶部弹出一个项目并将其子节点添加到队列的末尾。在适当的地方处理每个节点。

这本质上是[广度优先遍历](http://en.wikipedia.org/wiki/Breadth-first_search)。

# javascript - 当鼠标移过它们时，如何使页面中的链接振动？

> ID：16180826
> 
> 赞同：2
> 
> 时间：2013-04-23T23:23:10.933
> 
> 标签：javascript, css, animation

我正试图让这个小提琴在我的网站上工作

[http://jsfiddle.net/Xotic750/Ca273/](http://jsfiddle.net/Xotic750/Ca273/)

我将 CSS 更改为这个以产生振动效果，并将这个 CSS 代码添加到我的网站。

```
a.navlinkOff {
    font-family: Arial !important;
    font-weight: bold;
}
a.navlinkOver1 {
    font-family: Arial !important;
    font-weight: bold;
}
a.navlinkOver2 {
    font-family: Lucida Sans Unicode !important;
    font-weight: bold;

} 
```

我尝试将 ID 和类添加到导航菜单，但由于某种原因它仍然无法正常工作。代码根本不做任何事情。

```
<div id="navleft">
    <ul>
    <li><a href="tops.html" id="navlink1" class="navlinkOff">Tops</a></li>
    <li><a href="bottoms.html" id="navlink2" class="navlinkOff">Bottoms</a></li>
    <li><a href="hoodies.html" id="navlink3" class="navlinkOff">Hoodies</a></li>
    <li><a href="accessories.html" id="navlink4" class="navlinkOff">Accessories</a></li>
    <li><a href="clearance.html" id="navlink5" class="navlinkOff">Clearance</a></li>
    </ul>
</div> 
```

所以我想知道让网站上的所有链接都振动是否更简单。我也尝试将javascript更改为这样

```
var navlinks = document.querySelectorAll("a"); 
```

但这在我的网站上仍然不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:26:56.823

像，这个......例如：

```
@-webkit-keyframes thumb {
    0% { -webkit-transform: scale(1); }
    50% { -webkit-transform: scale(0.9); }
    100% { -webkit-transform: scale(1); }
}

a:hover
{
    -webkit-animation-name: thumb;
    -webkit-animation-duration: 200ms;
    -webkit-transform-origin:50% 50%;
    -webkit-animation-iteration-count: 2;
    -webkit-animation-timing-function: linear;
} 
```

[http://www.cssreset.com/css3-webkit-animation-shake-links/](http://www.cssreset.com/css3-webkit-animation-shake-links/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:30:17.453

您需要使用 :hover 伪选择器定义悬停状态 css 选择器。

一：悬停{

}

另外我建议不要使用 !important 指令，这表明您的 CSS 结构存在其他问题。

# sql-server - 如何在 sp_MSforeachdb 中指定 TABLE_SCHEMA 名称以使数据库脱机

> ID：16180828
> 
> 赞同：0
> 
> 时间：2013-04-23T23:23:12.193
> 
> 标签：sql-server, sp-msforeachdb

我需要搜索具有特定前缀的某些数据库。找到这些数据库后，我需要检查某个模式是否存在以及是否不存在 - 使数据库脱机。我一直在尝试在 Google 上找到的各种建议，但没有任何效果。我有一个无法克服的错误。错误是“XYZ”不是一个公认的选项。如果我分离出代码，它运行良好，但是当我添加 sp_MSforeachdb 时，错误返回。

```
EXEC sp_msforeachdb 'IF ''?'' LIKE ''abc_%''
  BEGIN
      IF (NOT EXISTS  (SELECT *
               FROM INFORMATION_SCHEMA.TABLES 
               WHERE TABLE_SCHEMA = 'XYZ'          
                               BEGIN
                               ALTER DATABASE [abc_xxxxxxxxx] SET OFFLINE WITH
                               ROLLBACK IMMEDIATE             
                               END' 
```

此代码工作正常：

```
SELECT *
 FROM INFORMATION_SCHEMA.TABLES 
 WHERE TABLE_SCHEMA = 'XYZ' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T23:34:59.020

这是一种不依赖于[未记录、不受支持和有缺陷的系统过程`sp_msforeachdb`](https://sqlblog.org/2020/01/31/reliable-flexible-replacement-sp_msforeachdb)的方法，也不依赖于[类似的不可靠`INFORMATION_SCHEMA`视图](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)。

```
DECLARE @sql NVARCHAR(MAX);
SET @sql = N'';

SELECT @sql = @sql + N'IF NOT EXISTS (SELECT 1 FROM ' 
  + QUOTENAME(name) + '.sys.tables AS t
  INNER JOIN ' + QUOTENAME(name) + '.sys.schemas AS s
  ON t.schema_id = s.schema_id
  WHERE s.name = ''XYZ'')
  BEGIN
    EXEC sp_executesql N''ALTER DATABASE ' 
      + QUOTENAME(name) + ' SET OFFLINE;''
  END
' FROM sys.databases WHERE name LIKE 'abc_%';

PRINT @sql;
-- EXEC sp_executesql @sql; 
```

您的实际错误是因为您在字符串中有字符串分隔符。你不能这样做：

```
SELECT ' WHERE TABLE_SCHEMA = 'XYZ' ... '; 
```

错误：

> 消息 102，级别 15，状态 1，第 1 行
> “...”附近的语法不正确。

你需要这样做：

```
SELECT ' WHERE TABLE_SCHEMA = ''XYZ'' ... '; 
```

但是，当您将命令嵌套在要发送到未记录、不受支持和有缺陷的系统过程的命令中时，这会很快变得令人费解。我知道我在这里重复自己。`sp_msforeachdb`我希望很明显，如果您想要可靠的结果，您不应该使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T06:25:07.730

试试这个——

```
DECLARE 
      @schema_name SYSNAME
    , @database_name SYSNAME

SELECT 
      @schema_name = 'XYZ'
    --, @database_name = 'abc_%'

DECLARE @SQL NVARCHAR(MAX)

SELECT @SQL = (SELECT '
USE [' + d.name + '];
IF NOT EXISTS (
    SELECT 1 
    FROM sys.objects o
    JOIN sys.schemas s ON o.[schema_id] = s.[schema_id]
    WHERE o.type = ''U'' 
        AND s.name = ''' + @schema_name + '''
) EXEC sp_executesql N''ALTER DATABASE [' + d.name + '] SET OFFLINE;''
' 
FROM sys.databases d 
WHERE (@database_name IS NULL OR d.name LIKE @database_name)
    AND d.[state] = 0
    AND d.name NOT IN ('master', 'tempdb', 'model', 'msdb')
FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)')

EXEC sp_executesql @sql 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:58:44.200

你有一些小错误

```
EXEC sp_msforeachdb '
IF ''?'' LIKE ''abc_%''
  BEGIN
      IF NOT EXISTS ( SELECT *
                      FROM INFORMATION_SCHEMA.TABLES 
                      WHERE TABLE_SCHEMA = ''XYZ'')
          ALTER DATABASE [abc_xxxxxxxxx] SET OFFLINE WITH ROLLBACK IMMEDIATE             
  END' 
```

1.  你已经逃避了周围的报价`''?''`，`''abc_%''`但忘记了`'XYZ'`
2.  括号不匹配 - 您有两个左括号但没有右括号
3.  该`ALTER DATABASE`语句是单行的，不需要 BEGIN-END。删除`BEGIN`允许`END`匹配*other* `BEGIN`，尽管您可以完全删除 BEGIN-END 。

# python - 使用 pyaudio 中的任何其他值作为速率/格式/块给我错误：[Errno Input overflowed] -9981

> ID：16180830
> 
> 赞同：4
> 
> 时间：2013-04-23T23:23:22.410
> 
> 标签：python, microphone, portaudio, pyaudio

操作系统：Mac OSX 10.7.5 Python：Python 2.7.3（自制软件） pyaudio：0.2.7 portaudio：19.20111121（homebrew - portaudio）

**以下脚本输出以下内容并显示我遇到的问题：**

```
#!/usr/bin/env python
import pyaudio
from pprint import pprint

p = pyaudio.PyAudio()

# SUCCEEDS
pprint(p.is_format_supported(input_format=pyaudio.paInt8,input_channels=1,rate=44100,input_device=0)) # => True
try:
    stream = p.open(format=pyaudio.paInt8,channels=1,rate=44100,input=True,frames_per_buffer=1024)
    data = stream.read(1024)
except IOError as e:
    print 'This never happens: '+str(e)

# FAILS
pprint(p.is_format_supported(input_format=pyaudio.paInt8,input_channels=1,rate=22050,input_device=0)) # => True
try:
    stream = p.open(format=pyaudio.paInt8,channels=1,rate=22050,input=True,frames_per_buffer=1024)
    data = stream.read(1024)
except IOError as e:
    print 'This fails: '+str(e)

# FAILS
pprint(p.is_format_supported(input_format=pyaudio.paInt8,input_channels=1,rate=22050,input_device=0)) # => True
try:
    stream = p.open(format=pyaudio.paInt8,channels=1,rate=22050,input=True,frames_per_buffer=512)
    data = stream.read(1024)
except IOError as e:
    print 'This also fails: '+str(e)

# FAILS
pprint(p.is_format_supported(input_format=pyaudio.paInt8,input_channels=1,rate=11025,input_device=0)) # => True
try:
    stream = p.open(format=pyaudio.paInt8,channels=1,rate=11025,input=True,frames_per_buffer=512)
    data = stream.read(1024)
except IOError as e:
    print 'This also fails as well: '+str(e)

stream.stop_stream()
stream.close()
p.terminate() 
```

**以上输出如下：**

```
True
True
This fails: [Errno Input overflowed] -9981
True
This also fails: [Errno Input overflowed] -9981
True
This also fails as well: [Errno Input overflowed] -9981 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-21T11:59:15.953

如果您想检查您的操作系统和硬件是否支持所需的格式、频道、速率等设置，请执行以下操作：

```
import pyaudio
soundObj = pyaudio.PyAudio()

# Learn what your OS+Hardware can do
defaultCapability = soundObj.get_default_host_api_info()
print defaultCapability

# See if you can make it do what you want
isSupported = soundObj.is_format_supported(input_format=pyaudio.paInt8, input_channels=1, rate=22050, input_device=0)
print isSupported 
```

`isSupported`以防您的系统可以`True`处理您的设置。内存溢出错误可能是由于某些操作系统+硬件问题造成的。您必须检查您的默认主机 API 实际可以做什么。您不需要`soundObj`通过“流类”“打开”和“关闭”来查询它。

看看这个 SO 问题：[PyAudio Input overflowed](https://stackoverflow.com/questions/10733903/pyaudio-input-overflowed)

有关其他 pyaudio 文档和帮助，请访问：

[http://people.csail.mit.edu/hubert/pyaudio/docs/](http://people.csail.mit.edu/hubert/pyaudio/docs/)

### 编辑：

事实证明，“Errno Input overflowed - 9981”不是一个小问题：[http ://trac.macports.org/ticket/39150](http://trac.macports.org/ticket/39150)

我看到您拥有最新的 portaudio 版本 (19.20111121) 但 19.20111121_4 声称已修复该错误。看看升级 portaudio 是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:43:31.937

尽管上面的评论表明 stop_stream() 和 close() 没有修复它，但像这样关闭它们对我有用：

```
#!/usr/bin/env python
import pyaudio
from pprint import pprint

p = pyaudio.PyAudio()

pprint(p.is_format_supported(input_format=pyaudio.paInt8,
                             input_channels=1,
                             rate=44100,
                             input_device=0))
try:
    stream = p.open(format=pyaudio.paInt8,
                    channels=1,
                    rate=44100,
                    input=True,
                    input_device_index=0,
                    frames_per_buffer=1024)
    data = stream.read(1024)

except IOError as e:
    print e
stream.stop_stream()
stream.close()

pprint(p.is_format_supported(input_format=pyaudio.paInt8,
                              input_channels=1,
                              rate=22050,
                              input_device=0))

try:
    stream = p.open(format=pyaudio.paInt8,
                    channels=1,
                    rate=22050,
                    input=True,
                    input_device_index=0,
                    frames_per_buffer=1024)
    data = stream.read(1024)

except IOError as e:
    print e
stream.stop_stream()
stream.close()

p.terminate() 
```

这给出了不受支持的速率的预期结果（例外）：

```
Traceback (most recent call last):
  File "testaudio.py", line 28, in <module>
    input_device=2))
  File "/usr/lib64/python2.7/site-packages/pyaudio.py", line 934, in is_format_supported
    return pa.is_format_supported(rate, **kwargs)
ValueError: ('Invalid sample rate', -9997) 
```

# ios - 如何避免在 t 从内存键读取时跳转到下一个之前短暂显示 LoginScreen？

> ID：16180831
> 
> 赞同：0
> 
> 时间：2013-04-23T23:23:26.740
> 
> 标签：ios, objective-c, storyboard

我正在尝试在用户进入应用程序之前实现登录屏幕（当用户注册时，我记得一些键，`NSUserDefaults`并且当下次启动应用程序时，如果有键，`NSUserDefaults`我需要跳过登录屏幕）。我把我的`LoginController`代码放在里面，它可以工作，但它总是显示 Login 片刻，然后跳转到`AppController`. （我尝试过，`viewDidLoad`但后来不起作用）。`LoginScreen`在跳转到下一个之前如何避免这种短暂的展示？

```
- (void) viewDidAppear:(BOOL)animated{
    // ***************** reading key from memory **************************
    NSString * key = [[NSUserDefaults standardUserDefaults]
                        stringForKey:@"key"];
    if(key != nil){
        [self performSegueWithIdentifier:@"login" sender:self];
    }
    // **********************************************************************
} 
```

如果没有关键用户通过

`LoginController`=>`AppController`

如果有钥匙，它应该让用户看起来像

`AppController`

但目前如果有关键是

`LoginController`（很短的时间）=>`AppController`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:56:27.633

我要做的是将您的 AppController 作为您的根视图控制器，并在您的 viewDidLoad 中检查用户是否已登录。如果没有，您可以提供一个模态视图控制器（没有动画）来显示您的登录屏幕. 对于用户来说，他们看起来像是直接进入了登录屏幕。

# sql - 声明一个对象类型的表，其中对象包含两个嵌套表

> ID：16180836
> 
> 赞同：2
> 
> 时间：2013-04-23T23:23:46.863
> 
> 标签：sql, oracle, plsql, oracle-apex

我正在创建可以教授 1 个或多个模块的人员对象。我有一个嵌套表，其中包含对模块表的引用。我还打算创建另一个来显示工作人员协调的模块。有没有办法将两个不同的嵌套表一起命名。我尝试过：

```
CREATE TYPE staff_typ UNDER person_typ(
staffID VARCHAR2(10),
universityEmail VARCHAR2(30),
office_ref REF office_typ,
coordintor_typ moduleProfile_typ,
teaches moduleProfile_typ)
NOT FINAL
/
CREATE TABLE staff_tab OF staff_typ;
NESTED TABLE teaches STORE AS lectures,
NESTED TABLE coordinator_typ STORE AS coordinates; 
```

但我得到一个包含未知语句错误的脚本。谁能举例说明如何在这种情况下显示两个不同的嵌套表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T20:24:50.177

> 谁能举例说明如何在这种情况下显示两个不同的嵌套表？

```
CREATE TYPE varchar_ot AS OBJECT (varchar_field VARCHAR2(40));
CREATE TYPE number_ot  AS OBJECT (number_field  NUMBER);

CREATE TYPE varchar_ntt AS TABLE OF varchar_ot;
CREATE TYPE number_ntt  AS TABLE OF number_ot;

CREATE TABLE collections
(
    col_id      NUMBER
,   col_varchar varchar_ntt
,   col_number  number_ntt
)
NESTED TABLE col_varchar STORE AS col_varchar_nt
NESTED TABLE col_number  STORE AS col_number_nt
;
-- table COLLECTIONS created.

INSERT INTO collections VALUES
(
    1
,   (varchar_ntt(varchar_ot('a'), varchar_ot('b')))
,   (number_ntt (number_ot(11),   number_ot(22)))
);
-- 1 rows inserted.

INSERT INTO collections VALUES
(
    2
,   (varchar_ntt(varchar_ot('c'), varchar_ot('d')))
,   (number_ntt (number_ot(33),   number_ot(44)))
);
-- 1 rows inserted.

SELECT  col_id, varchar_field, number_field
FROM    collections, TABLE(collections.col_varchar), TABLE(collections.col_number)
ORDER   BY
        3, 2, 1
;

COL_ID  VARCHAR_FIELD   NUMBER_FIELD
1       a               11
1       b               11
1       a               22
1       b               22
2       c               33
2       d               33
2       c               44
2       d               44 
```

> 声明一个对象类型的表，其中对象包含两个嵌套表

```
CREATE TYPE a_varchar_ntt AS TABLE OF VARCHAR2(30);
CREATE TYPE a_number_ntt  AS TABLE OF NUMBER;

CREATE TYPE var_num_ot AS OBJECT
(
    col_var a_varchar_ntt
,   col_num a_number_ntt
);

TYPE var_num_ntt AS TABLE OF var_num_ot;
/*
Error report:
Unknown Command
*/ 
```

如果这不是一个练习，那么您将走错方向，使事情变得过于复杂。

# c - 在 C 中使用管道和分叉重定向标准输出

> ID：16180837
> 
> 赞同：0
> 
> 时间：2013-04-23T23:23:50.130
> 
> 标签：c, pipe

我有一个关于 ptrace 和管道的练习。以下代码是整个程序的一部分。管道在主要部分之前制作，this_trace.s_out 为 1。主要父亲创建孩子，这个孩子为标准输出创建自己的孩子。当程序运行 ls 然后它在屏幕上打印并且不写入文件。怎么了？

```
if(pid == 0)
{
char buf0[BUFFSIZE], buf1[BUFFSIZE], buf2[BUFFSIZE];
int length0, length1, length2;

if(this_trace.s_out == 1)   //For stdout redirection
{
    if((pid1=fork()) == -1)
    {
        perror("fork");
        exit(1); 
    }

    if(pid1 == 0) //child for stdout redirect
    {//sleep(2);
        if(fd1 = open(this_trace.out_name,O_WRONLY | O_CREAT | O_TRUNC, 0666) == -1)
        {
            perror("create stdout file");
            exit(1);
        }

        close(p_out[WRITE]);
        close(p_in[READ]);
        close(p_in[WRITE]);
        close(p_err[READ]);
        close(p_err[WRITE]);

        do{
            if((length1 = read(p_out[READ],buf1,BUFFSIZE)) == -1)
            {
                perror("Read for stdout redirection");
                exit(1);
            }
            write(fd1, buf1, length1);
        }while(length1 > 0);

        close(fd1);
        //close(p_out[READ]);
        return 0;
        //break;

    }
    else if(pid1 > 0)//child from main father
    {
        close(p_out[READ]);
        close(p_in[READ]);
        close(p_in[WRITE]);
        close(p_err[READ]);
        close(p_err[WRITE]);

        dup2(p_out[WRITE], 1);
    }

}

ptrace(PTRACE_TRACEME, 0, NULL, NULL);  

//execv(argv[1],NULL);
execl("/bin/ls","ls",NULL);

} 
```

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:29:50.010

目前尚不清楚为什么您有这么多进程。你有一个问题：

```
if (fd1 = open(this_trace.out_name,O_WRONLY | O_CREAT | O_TRUNC, 0666) == -1) 
```

`fd1`无论打开的文件描述符如何，这都会将 0 或 1 分配给。它应该是：

```
if ((fd1 = open(this_trace.out_name,O_WRONLY | O_CREAT | O_TRUNC, 0666)) == -1) 
```

使用`dup2()`(或`dup()`) 将文件描述符重定向到标准通道后，应关闭原始文件描述符。因此，在`dup2(p_out[WRITE], 1);`您需要`close(p_out[WRITE]);`.

您应该从中发现故障`execl()`并进行处理；如果`execl()`返回，则失败。

您显示未使用的变量`buf0`and `buf2`（以及相应`length0`的 and `length2`）。

# iphone - iPhone 应用开发：在应用内打开应用然后编辑

> ID：16180843
> 
> 赞同：0
> 
> 时间：2013-04-23T23:24:13.317
> 
> 标签：iphone, ios, iframe

有没有办法制作一个应用程序，您可以在其中打开其他应用程序并编辑其他应用程序样式。

例如：有一个应用程序可以在应用程序内打开 Safari（如 html 中的 iFrame）并使用其他背景颜色？

这在某种程度上可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:37:00.977

仅当原始应用程序被设计为具有该功能时才有可能（因此您可以编写两个相互交互的应用程序，但要“编辑”另一个制造商的应用程序需要他们在共享首选项文件中写入所有可能的“编辑”值）

您可以使用 uiwebview 在另一个应用程序中“打开 safari”并自己设计界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T23:35:00.913

这是不可能的。一次只能运行一个应用程序。一个应用程序可以启动另一个应用程序，但您不能在另一个应用程序中嵌入一个应用程序。

如果要在应用程序中显示网页，可以使用`UIWebView`.

# asp.net-mvc-4 - 如何使用反射将复杂模型发布到操作

> ID：16180845
> 
> 赞同：1
> 
> 时间：2013-04-23T23:24:29.987
> 
> 标签：asp.net-mvc-4

我正在努力更好地理解和了解 MCV4。

将我的 Product 对象的属性 CategoryType 传递回 HttpPost 上的控制器的最佳方法是什么？

我正在寻找一种方法，因此我不必手动写出每个属性。我目前正在使用反射来迭代 Category 类型的属性，并使用 @Html.Hidden 方法将它们添加为隐藏输入变量。这可行，但我想知道我是否以正确的方式进行操作（最佳实践）。

1.  我想知道如何使用@Html.HiddenFor 方法来实现我在下面所做的事情。我不知道如何使用反射中的属性信息编写 lambda 表达式。
2.  有没有更好的方法来处理将 Category 对象传递给我的控制器。我的观点是强类型的。它是否应该知道在帖子中传回 Product 对象。

我有一个复杂的类型如下。

```
 public class Product
{
    [Key]
    public int Id { get; set; }

    [Required]
    public string ProductName { get; set; }

    public Category CategoryType { get; set; }
}

public class Category
{
    [Key]
    public int Id { get; set; }

    [Required]
    public string CategoryName { get; set; }
} 
```

使用如下控制器

```
 public class ProductController : Controller
{
    //
    // GET: /Product/

    public ActionResult Index()
    {
        return View();
    }

    public ActionResult Add()
    {
        //Add a new product to the cheese category.
        var product = new Product();
        var category = new Category { Id = 1, CategoryName = "Cheese" };
        product.CategoryType = category;

        return View(product);
    }

    [HttpPost]
    public ActionResult Add(Product product)
    {
        if (ModelState.IsValid)
        {
            //Add to repository code goes here

            //Redirect to Index Page
            return RedirectToAction("Index");
        }
        return View(product);
    }
} 
```

并使用 Add 视图

```
 @model BootstrapPrototype.Models.Product

@{
    ViewBag.Title = "Add";
}

<h2>Add</h2>

@using (Html.BeginForm())
{

    @Html.DisplayFor(m => m.ProductName);
    @Html.EditorFor(m => m.ProductName);

    foreach(var property in Model.CategoryType.GetType().GetProperties())
    {

        //I know how to use the Hidden but would also know how to use the HiddenFor with reflections.
        @Html.Hidden("CategoryType." + property.Name, property.GetValue(Model.CategoryType));
    }

    <button type="submit">Add</button>

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T02:02:54.677

## 为什么隐藏？

我认为您将类别字段放在隐藏字段中的原因是因为您不希望用户更新它们，而且您需要将这些值作为对象的一部分返回`Product`，否则您的产品对象将在没有类别的情况下保存（`null`有价值）。这正是`ViewModel`s 非常重要的原因。您创建一个视图模型，它接受您只需要的那些值的输入。因此，如果您需要创建一个只需要名称的产品，并且具有预先选择的不可编辑类别，那么您可以拥有一个视图模型：

```
public class ProductModel {
    public int Id {get;set;}
    public strnig Name{get;set;}
    public int CategoryId {get;set;}
} 
```

和一个视图

```
@model ProductModel 
@Html.HiddenFor(m=>m.Id)
@Html.HiddenFor(m=>m.CategoryId)
@Html.TextboxFor(m=>m.Name) 
```

您可以从控制器方法中获得

```
public ActionResult Add() {
    var product = new ProductModel {
        CategoryId = getIdFromDb("cheese");
    };
    return View();
} 
```

您可以在控制器方法中接收

```
[HttpPost]
public ActionResult Add(ProductMOdel input) {
    // map input to an entity
    var productENtity = mapModelToEntity(input);
    // save entity to your repo
} 
```

如果您的`Product`和`Category`类中有一百个字段，则可以放大这种方法的这种优势。并且您有一个用例，其中只有部分字段将被编辑。

## 脚手架

但当然，您仍然可以按照自己的方式进行操作。但是，与其进行会产生开销的反射，不如摆脱它并做脚手架。以这种方式，您不必手动编码类的所有字段。这里有两个很好的链接可以帮助您开始使用脚手架：

*   [EF Code First 和 ASP.NET MVC 3 的数据脚手架](http://weblogs.asp.net/scottgu/archive/2011/05/05/ef-code-first-and-data-scaffolding-with-the-asp-net-mvc-3-tools-update.aspx)
*   [MvcScaffolding：一对多关系](http://blog.stevensanderson.com/2011/01/28/mvcscaffolding-one-to-many-relationships/)

## 使用反射

但是如果你坚持使用反射，那么它是完全有可能的（你几乎在你的代码中有它）

```
@foreach(var property in Model.CategoryType.GetType().GetProperties())
{
    @Html.Hidden("Product." + property.Name, 
        property.GetValue(Model.CategoryType));
} 
```

该代码的关键是`"Product."`允许模型绑定器完成它的工作 - 隐藏字段中的值将被传递回您的 POST 控制器方法。但是，如果`CategoryType`为空，则该代码将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-08T21:18:04.220

我相信 MVC4 有[HiddenInputAttribute](https://msdn.microsoft.com/en-us/library/system.web.mvc.hiddeninputattribute(v=vs.118).aspx)。您可以将它与 Html.EditorFor 结合使用。

# php - 计算重定向

> ID：16180854
> 
> 赞同：0
> 
> 时间：2013-04-23T23:25:27.950
> 
> 标签：php, mysql, redirect, count

我找到了一个重定向脚本，我一直试图让它计算重定向（`url_hits`）。无法让它工作，我想知道是否有人可以帮助我。

这是重定向的部分：

```
if (!empty($_GET['url'])) {
    $redirect = mysql_fetch_assoc(mysql_query("SELECT url_link FROM urls WHERE url_short = '".addslashes($_GET['url'])."'"));
    $redirect = "http://".str_replace("http://","",$redirect[url_link]);
    header('HTTP/1.1 301 Moved Permanently');  
    header("Location: ".$redirect);
} 
```

这是数据库

```
CREATE TABLE IF NOT EXISTS `urls` (
  `url_id` int(11) NOT NULL auto_increment,
  `url_link` varchar(255) default NULL,
  `url_short` varchar(6) default NULL,
  `url_date` int(10) default NULL,
  `url_ip` varchar(255) default NULL,
  `url_hits` int(11) default '0',
  PRIMARY KEY  (`url_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:29:27.713

在您的代码中，您绝不会增加命中计数器。

在后面添加这一行`if (!empty($_GET['url'])) {`：

```
mysql_query("UPDATE `urls` SET `url_hits` = `url_hits`+1 WHERE `url_short` = '" . addslashes($_GET['url']) . "'"); 
```

* * *

奖励：为避免违反[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，您可以将其更改为：

```
$urlShort = addslashes($_GET['url']);
mysql_query("UPDATE `urls` SET `url_hits` = `url_hits`+1 WHERE `url_short` = '$urlShort'"); 
```

这将使您能够改变这一点：

```
$redirect = mysql_fetch_assoc(mysql_query("SELECT url_link FROM urls WHERE url_short = '".addslashes($_GET['url'])."'")); 
```

对此：

```
$redirect = mysql_fetch_assoc(mysql_query("SELECT url_link FROM urls WHERE url_short = '$urlShort'")); 
```

# angularjs - AngularJS：ng-repeat 中的范围

> ID：16180857
> 
> 赞同：0
> 
> 时间：2013-04-23T23:25:36.763
> 
> 标签：angularjs, scope, angularjs-ng-repeat, angularjs-ng-include

我正在尝试动态地包含一些部分内容。我意识到可能还有其他方法可以做到这一点，但我想了解为什么这种方法行不通。

我有一个这样定义的控制器：

```
auditApp.controllerModule.controller('LayoutCtrl', ['$scope',
    function (scope) {
        scope.index1={
            pages:[
                'views/subpage1.html',
                'views/subpage2.html',
                'views/subpage3.html',
                'views/subpage4.html'
        ]};
    }
]); 
```

如果我执行我的代码的静态版本，一切正常：

```
<div ng-controller="LayoutCtrl">
    <div class="row" ng-init="pob={pageidx:0}">
        <div class="span1">
            <ul class="nav nav-tabs nav-stacked">
                <li><a ng-click="pob.pageidx=0">0</a></li>
                <li><a ng-click="pob.pageidx=1">1</a></li>
                <li><a ng-click="pob.pageidx=2">2</a></li>
                <li><a ng-click="pob.pageidx=3">3</a></li>
            </ul>
        </div>
        <div class="span11">
            <ng-include src="index1.pages[pob.pageidx]"></ng-include>
        </div>
    </div>
</div> 
```

但是，如果我尝试使用 ng-repeat 复制它，它会默默地失败：

```
<div ng-controller="LayoutCtrl">
    <div class="row" ng-init="pob={pageidx:0}">
        <div class="span1">
            <ul class="nav nav-tabs nav-stacked">
                <li ng-repeat="n in index1.pages"><a ng-click="pob.pageidx={{$index}}" >{{$index}}</a></li>
            </ul>
        </div>
        <div class="span11">
            <ng-include src="index1.pages[pob.pageidx]"></ng-include>
        </div>
    </div>
</div> 
```

同样，在此示例中，遍历数组并仅使用 $index 并没有多大意义，但让我感到困惑的是底层范围断开连接。谁能给我建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:42:01.950

`ngClick`期待一个角度表达式。你不应该在那里使用插值。它应该是：

```
<a ng-click="pob.pageidx=$index">{{$index}}</a> 
```

[http://plnkr.co/edit/ZSPdaqR6WrRh9rbP7vUU?p=preview](http://plnkr.co/edit/ZSPdaqR6WrRh9rbP7vUU?p=preview)

# c# - 应用程序在空闲 10 分钟后注销用户

> ID：16180861
> 
> 赞同：3
> 
> 时间：2013-04-23T23:26:14.670
> 
> 标签：c#, asp.net, asp.net-mvc-4, timeout, forms-authentication

我正在和另外 4 个人一起做一个小组项目。我们正在使用 MVC4 中的 ASP.NET 设计一个带有嵌入式 c# 和 Razor 的工作亭。它从服务器生成动态网页。我们在 Windows 7 环境中使用 Visual Studio 2010 SP1 和 Microsoft SQL Server 2008 R2 SP1。

我正在努力让系统在用户空闲 10 分钟时将其注销。我需要一些关于如何开始编写系统以注销用户的方法的帮助。我基本上是在编写一个控制器来编辑我小组中其他成员所做的视图（网页）。这样，计时器会在所有视图页面上启动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T23:57:06.450

您通常会使用滑动窗口在 FormsAuthentication 票证上设置过期值。

[http://support.microsoft.com/kb/910443](http://support.microsoft.com/kb/910443)

```
<authentication mode="Forms">
   <forms name=".ASPXAUTH" loginUrl="~/Account/Login" protection="All" 
      timeout="10" path="/" slidingExpiration="true" />
</authentication> 
```

如果您使用`[Authorize]`MVC 的默认属性并使用 WebSecurity，那么这应该会自动起作用。如果您要发布自己的表单身份验证票证，则可能必须明确设置值。

其他人提到了会话超时，但要注意两件事。首先，您不应该进行任何与 Session 相关的身份验证，第二个 Session timeout 和 Authentication timeout 是两件不同的事情，尽管您可能希望它们保持同步。不过，滑动窗口更难做到这一点。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T23:30:02.153

您可以使用 Web.config 中的以下条目来控制会话，例如：

```
<configuration>
    <system.web>
        <sessionState timeout="2" />
    </system.web>
</configuration> 
```

# c# - GridView，RowEditing，编辑行时如何更改文本框中的文本？

> ID：16180865
> 
> 赞同：1
> 
> 时间：2013-04-23T23:26:30.420
> 
> 标签：c#, asp.net, gridview, textbox

我正在使用 GridView。在编辑行期间，我对文本框（t5 和 t6）中的值更改有疑问。我希望在 TextBox（t5 和 t6）中按下编辑按钮后只有前 10 个字符（yyyy-mm-dd）。粘贴下面的代码。

```
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
    {
        Label350.Text = string.Empty;

        GridView1.EditIndex = e.NewEditIndex;
        GridViewRow row = GridView1.Rows[GridView1.EditIndex];

        GridView1.Columns[0].Visible = true;
        GridView1.Columns[8].Visible = true;
        GridView1.DataSourceID = "";
        GridView1.DataSource = Session["TaskTable"];
        GridView1.DataBind();
        GridView1.Columns[0].Visible = false;
        GridView1.Columns[8].Visible = false;

        TextBox t5 = row.FindControl("TextBox5") as TextBox;
        TextBox t6 = row.FindControl("TextBox6") as TextBox;

        if (t5.Text.Length > 11)
        {
            string v = t5.Text;
            v.Substring(0, 10);
            t5.Text = v;
        }

        if (t6.Text.Length > 11)
        {
            string v2 = t6.Text;
            v2.Substring(0, 10);
            t6.Text = v2;
        }
    } 
```

单击编辑按钮时出现错误消息。

> “对象引用未设置为对象的实例”</p>

需要帮忙！。

# java - 在 ASM/java 字节码中检测调用指令中的方法是否为本机

> ID：16180866
> 
> 赞同：0
> 
> 时间：2013-04-23T23:26:45.233
> 
> 标签：java, bytecode, java-bytecode-asm

有没有办法知道字节码中调用指令中的方法是否是本机方法？我正在寻找 ASM 特定的解决方案。

`visitMethodInsn(int opcode, String owner, String name, String desc))`似乎没有提供此信息。如果是这样，我错过了什么？或者是否有不同的方法来确认要执行的方法是否是本机的？

我知道当你使用参数访问类中`visitMethod(int access, String name, String desc, String signature, String[] exceptions)`的方法时，你可以这样做。但我有兴趣在该方法的调用站点获取这些信息。`ClassVisitor``int access`

我正在使用 ASM 核心 API。

这适用于我正在使用 ASM 编写的 Java 程序的检测器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:37:11.700

您无法在呼叫站点获取信息，因为它在呼叫站点不为人所知。调用站点不知道实际调用该方法的哪个覆盖。它在运行时解决。

# c++ - 如何使用 C/C++ 在 Windows 中确定连接的 Wifi WLAN 接口？

> ID：16180871
> 
> 赞同：4
> 
> 时间：2013-04-23T23:27:03.907
> 
> 标签：c++, windows, wifi

***在 Windows 上，如何确定`WlanGetAvailableNetworkList()`连接的是哪个 Wifi WLAN 接口？***

我`WlanGetAvailableNetworkList()`在 Windows 8 上成功使用扫描 Wifi WLAN 接入点列表并确定其 SSID、BSSID、信号强度和其他信息。我正在关注[此](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706749%28v=vs.85%29.aspx)MSDN 参考页面上的示例。

然而，对于`WLAN_INTERFACE_INFO`我收到的所有接口，我无法确定如何判断当前连接的是哪个接入点（如果有）（即`wlan_interface_state_connected`）。

在 Mac 上，我`scanForNetworksWithSSID`从`CoreWLAN`基础开始使用，结果有一个*连接* `bssid`字段，我可以将其与`bssid`扫描结果中的每个字段进行比较，以确定其中哪一个是连接的。我正在寻找类似的 Windows 解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T01:48:08.300

**答案**：

答案是使用`WlanQueryInterface()`（操作上与 类似并与之并行使用`WlanGetAvailableNetworkList()`）来确定所连接适配器的[WLAN_CONNECTION_ATTRIBUTES](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706842%28v=vs.85%29.aspx)和[WLAN_ASSOCIATION_ATTRIBUTES](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706828%28v=vs.85%29.aspx)。[在本页](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706765%28v=vs.85%29.aspx)`WlanQueryInterface()`底部的 MSDN 文档中有一个示例演示了 的使用。

我通过调用`WlanQueryInterface()`确定`connectedSSID`连接的 Wifi WLAN 适配器（如果有）解决了这个问题。然后，我将它与 中`SSID`引用的每个适配器的值进行比较`WlanGetAvailableNetworkList()`。匹配项（如果有）确定已连接的扫描适配器。

注意：我也可以比较 BSSID 值以获得类似且可能更可靠的结果。

# java - 如何在 JTextPane 中的文字下方画一条线？

> ID：16180874
> 
> 赞同：0
> 
> 时间：2013-04-23T23:27:19.100
> 
> 标签：java, swing

我正在制作字典，如果在数据库中找不到该单词（如果是错误的单词），我正在尝试在该单词下方绘制一条曲线。

这应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:53:09.987

您可以创建一个自定义荧光笔。有关帮助您入门的示例，请参见[Rectangle Painter 。](http://tips4java.wordpress.com/2008/10/28/rectangle-painter/)

以下代码可能有助于绘制曲线：

```
 for (int i = x1; i <= x2; i += 6) {
        g.drawArc(i + 3, y - 3, 3, 3, 0, 180);
        g.drawArc(i + 6, y - 3, 3, 3, 180, 181);
    } 
```

x1/x2 将是开始/结束 x 位置。

编辑：

我创建了一个`SquigglePainter`可以在`Rectangle Painter`链接中找到的类。

# python - 嘿 python 来解析 tcl 变量？核弹

> ID：16180880
> 
> 赞同：3
> 
> 时间：2013-04-23T23:28:06.323
> 
> 标签：python, tcl, nuke

所以，我试图让 python 打印一个包含 tcl 变量的字符串，以及该变量的结果。我正在使用 nuke，以防这对我的代码很重要。

```
[set THIS image] 
Ln = "/Test/still/testing/$THIS\_clean_v001"
print(Ln) # this prints exactly the above

G = nuke.tcl('[puts "$THIS"] ') 
```

是否会`print(G)`返回单词图像？

然后我可以把它分进去。问题是我输入的文本字段 tcl 在程序中很好地解决了它，但是一旦我将它发送到处理它就需要`$THIS`字面意思。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T00:37:20.200

有两点需要注意：

1.  Tcl`puts`不返回值。听起来你想要[Tcl`set`](http://www.tcl.tk/man/tcl8.5/TclCmd/set.htm)，确实如此。

2.  `nuke.tcl`http://www.nukepedia.com/reference/Python 上的文档表明[：](http://www.nukepedia.com/reference/Python)

    > `tcl(command, arg, arg, ...)`
    > 
    > 运行 tcl 命令。参数必须是字符串并传递给命令。如果没有给出参数并且命令中有空格，那么它会被解释为一个 tcl 程序（这是折旧的）

而不是调用它作为一个完整的脚本，似乎你可以使用非弃用版本并通过使用获得你想要的行为：

```
G = nuke.tcl("set", "THIS") 
```

哪个应该重新输入`THIS`变量的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T19:29:06.120

`subst`您还可以使用 TCL命令对字符串中的所有 TCL 变量进行一次性扩展。

```
nuke.tcl('set', 'THIS', 'image')
p = '/Test/still/testing/$THIS\_clean_v001'
print nuke.tcl('subst', p) 
```

其结果将是正确扩展的字符串：`'/Test/still/testing/image_clean_v001'`

subst 的文档可以在这里找到：[http ://www.tcl.tk/man/tcl8.4/TclCmd/subst.htm](http://www.tcl.tk/man/tcl8.4/TclCmd/subst.htm)

# java - 有条件地向正则表达式匹配添加字符

> ID：16180884
> 
> 赞同：3
> 
> 时间：2013-04-23T23:28:13.007
> 
> 标签：java, regex, eclipse

我在 Eclipse 中使用正则表达式，想知道是否有办法根据匹配添加字符。

我正在使用这些表达式来匹配和替换：

```
Match: ^(\s*)(//)?(.*?)"([\p{Punct}\p{Space}]*)?(\p{Alnum}.*?\p{Alnum})([\p{Punct}\p{Space}]*)?"(.*?)$
Replace: $1$3"$4" \+ i18n.tr\("$5"\) \+ "$6"$7 
```

例如

```
System.err.println("Unexpected number of guests: "); 
```

我正在尝试将其替换为

```
System.err.println(i18n.tr("Unexpected number of guests") + ": "); 
```

但我越来越

```
System.err.println("" + i18n.tr("Unexpected number of guests") + ": "); 
```

如果没有捕获任何内容，有什么方法可以摆脱 i18n.tr(.*) 之前的“”+？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:11:57.973

你不能用一个搜索替换来做到这一点！

唯一的方法是使用两个搜索替换：

*   第一个带有 punct-space

`Match: ^(\s*)(//)?(.*?)"([\p{Punct}\p{Space}]++)(\p{Alnum}.*?\p{Alnum})([\p{Punct}\p{Space}]*)?"(.*?)$`

`Replace: $1$3"$4" \+ i18n.tr\("$5"\) \+ "$6"$7`

*   第二个没有点空间

`Match: ^(\s*)(//)?(.*?)"(\p{Alnum}.*?\p{Alnum})([\p{Punct}\p{Space}]*)?"(.*?)$`

`Replace: $1$3i18n.tr\("$4"\) \+ "$5"$6`

不要忘记在任何尝试之前进行备份

# jquery - jQuery UI 版本和主题

> ID：16180886
> 
> 赞同：2
> 
> 时间：2013-04-23T23:28:21.550
> 
> 标签：jquery, jquery-ui

jQuery 主题中的 CSS 和图像文件是否依赖于 jQueryUI 的版本？如果我要从 jQueryUI v1.8.* 升级到 v1.9* 到 v1.10*，我需要一组单独的主题文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:48:25.300

根据经验，如果某个组件（例如 Widgets > Dialog）已显着更新，则该更新组件与 CSS 文件之间的某些功能链接要么部分丢失，要么无法按预期工作，要么完全丢失。

话虽如此，我在最近的一个项目中搞砸了这个，最终在最新的 1.10.2 jQueryUI 上运行 v1.9.2 CSS，没有任何问题。

# jquery - 该代码行在Jquery中意味着什么

> ID：16180887
> 
> 赞同：1
> 
> 时间：2013-04-23T23:28:23.493
> 
> 标签：jquery

我正在研究一个代码，我看到了这个：

```
var $notes = $('<ol id="notes"></ol>'); 
```

我以为这是同一件事

```
 var $notes = $('ol#notes'); 
```

但是我测试了它，它不是一回事......

有人可以启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:29:57.070

第一行创建了一个由标记表示的新元素。第二个已经匹配 DOM 中的现有元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T23:34:14.290

[文档中的这一部分](http://api.jquery.com/jQuery/#jQuery2)可能会解释相关行的含义。

# php - 在双 for 循环中使用事务

> ID：16180891
> 
> 赞同：1
> 
> 时间：2013-04-23T23:28:56.603
> 
> 标签：php, mysql, for-loop, transactions

如何为查询创建事务？对于每个新帐户，我都会在数据库中创建 210 条新记录。我需要事务，因为 210 个查询需要时间，我使用`mysql_insert_id()`获取最后插入的 id。这里的代码：

```
$sql = "INSERT INTO bla bla....";

$result =  mysql_query($sql);
$lastid = mysql_insert_id();

if($result)
{
    for($i=0; $i<=6; $i++)
    {
        for($j=1; $j<=30; $j++)
        {
            $query_day = date('Y-m-d', strtotime('+'.$i.' days 1 hours'));
            $sql_insert = "INSERT INTO `e-heal`.`scr` (`sc_id`, `d_id`, `hour_id`, `date`, `a`) VALUES (NULL, '$lastid', '$j', '$query_day', '0');";
            mysql_query($sql_insert);
         }
    }     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:43:49.507

您在这里不需要事务 -`mysql_insert_id()` **保证**从当前会话返回最新的自动增量值。

# css - CSS3 悬停/点击在移动浏览器中不起作用

> ID：16180892
> 
> 赞同：9
> 
> 时间：2013-04-23T23:28:56.633
> 
> 标签：css

我创建了一个框，当鼠标悬停在另一个 div 上时，它会淡入另一个 div。这一切都是使用 CSS3 完成的。但是，我意识到的一个问题是悬停在移动浏览器中不起作用。有没有办法以某种方式使这项工作适用于移动设备，还是我必须求助于某种 JS？

编辑：为了澄清，我只想能够点击框并显示描述。我在其他网站上看到过。这通常是怎么做的？:)

JS 小提琴：http: [//jsfiddle.net/ygShH/4/](http://jsfiddle.net/ygShH/4/)

HTML

```
<article class="project">
     <div class="project-mask">
          <div class="thumbnail">
               <img src="http://dummyimage.com/292x292/000/fff" alt="desc" height="260" width="260">
               <div class="description">
                    <hgroup>
                         <h2>Title</h2>
                         <h3>Web</h3>
                    </hgroup>
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
                    <span>
                         <a href="http://site.com" target="_blank">Visit website</a>                                <a href="/view-project">View project</a>
                    </span>
               </div>
          </div>
     </div>
</article> 
```

CSS

```
body {
background:#f4f3f1;
color:#666;
font:62.5%/1.6 Helvetica, Arial, Sans-serif;
}

p {
font-size:1.1em;
margin:0 0 1em;
}

h1,h2,h3 {
color:#222;
font-weight:400;
}

h2 {
font-size:1.5em;
margin-top:0;
}

h3 {
font-size:1.1em;
}

article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary,input,textarea {
display:block;
}

.project {
background:#fff;
float:left;
height:260px;
overflow:hidden;
width:260px;
margin:0 20px 20px 0;
padding:20px;
}

.project-mask {
height:260px;
position:relative;
width:260px;
}

.project-mask .description {
-moz-transition:.3s ease-in-out opacity;
-o-transition:.3s ease-in-out opacity;
-webkit-transition:.3s ease-in-out opacity;
transition:.3s ease-in-out opacity;
background:#f4f3f1;
display:block;
height:220px;
left:0;
opacity:0;
position:absolute;
top:0;
width:220px;
padding:20px;
}

.project-mask:hover .description {
opacity:1;
}

.project-mask .description h2 {
margin-bottom:5px;
}

.project-mask .description h3 {
border-bottom:1px solid #ddd;
color:#777;
margin-bottom:10px;
padding-bottom:10px;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T23:35:24.960

在移动设备上无法进行悬停，因为没有持久光标 -默认情况下是*最后一次触摸点的内存。*

他们可以感知交互的唯一方法是*touch*，这类似于单击或选择，因此`:active`在 CSS 或`onclick`Javascript 中是您目前唯一的选择。

简单地说，在 CSS 中你可以定义它：

```
a.class:active {
  background-color: #AAA;
  ...
} 
```

或者：

```
.class:active {
  background-color: #AAA;
  ...
} 
```

但是您需要使用以下解决方法（或 JS 事件：*ontouchstart*）来模拟点击：

```
<body ontouchstart=""> 
```

# routing - servicestack 路由 - 你如何忽略查询字符串参数

> ID：16180903
> 
> 赞同：2
> 
> 时间：2013-04-23T23:30:54.643
> 
> 标签：routing, servicestack

出于安全原因，我想忽略/禁止所有查询字符串参数。

IE

```
POST http://myservice/person
{name:"john"}
//should populate the Name property in my request model

POST http://myservice/person?name=john
//should NOT populate the Name property 
```

如果不明确检查每个服务方法中的查询字符串，这可以在服务堆栈中实现吗？

我想这样做是因为某些服务器会在 SSL 解码后以纯文本形式记录 URL，并且我想确保敏感参数值不会记录在任何托管环境中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T00:30:01.433

如果您希望全局应用任何逻辑，您可以使用[全局过滤器](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)或在任何其他过滤`PreRequestFilter`器[或请求绑定之前运行](https://github.com/ServiceStack/ServiceStack/wiki/Order-of-Operations)的 a ：

```
this.PreRequestFilters.Add((req, res) =>
{
    if (req.QueryString.Count > 0)
    {
        res.StatusCode = (int)HttpStatusCode.BadRequest;
        res.StatusDescription = "Query Strings are not allowed";
        res.EndServiceStackRequest();
    }
}); 
```

# css-float - CSS：如果溢出，则强制块出现在浮动块下

> ID：16180908
> 
> 赞同：1
> 
> 时间：2013-04-23T23:31:41.787
> 
> 标签：css-float, css

我正在创建一个带有图像的页面，旁边有几个文本块。我不希望文本块换行，因为这看起来很糟糕。但我也不想添加“溢出：隐藏”，因为这看起来很糟糕（特别是，文本块的末尾挂在图像之外）。

我想做的，我不知道怎么做，是强制块在浮动元素下渲染，如果它会溢出。这样，文本块就可以保持在一起（与允许溢出不同）并且它不会挂在结尾处很有趣（例如“溢出：隐藏”）。

这是一些 html 来演示我的问题。

```
<head>
<style>
.imgclass {background-color:336633;width:100px;color:00000;float:left}
p {overflow:hidden;width:100px}
</style> 
</head>

<div class="imgclass">Pretend there is an image here. Pretend there is an image 
here. Pretend there is an image here. Pretend there is an image here. Pretend 
there is an image here.
</div>

<p>
This is a paragraph.  It looks good next to the pretend image.
</p>

<p>   
This is a paragraph.  It hangs off the pretend image and looks bad.  I wish that 
if the paragraph was too long it would appear under the image.
</p> 
```

有没有办法解决这个问题？也许我不应该使用浮动？

另外：我正在制作一个通用的CSS。我不知道图像会有多大或段落会有多长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T11:21:48.930

这是更新 - css

```
.imgclass {background-color:336633;width:100px;color:00000;float:left}
p {
    width:100%;
}
.long{
    clear: left;
} 
```

html

```
<div class="imgclass">Pretend there is an image here. Pretend there is an image 
here. Pretend there is an image here. Pretend there is an image here. Pretend 
there is an image here.
</div>

<p>
This is a paragraph.  It looks good next to the pretend image.
</p>

<p class="long">   
This is a paragraph.  It hangs off the pretend image and looks bad.  I wish that 
if the paragraph was too long it would appear under the image.
</p> 
```

# google-app-engine - 带有 CNAME 的子域上的 Google Apps，如何设置 MX 记录？

> ID：16180914
> 
> 赞同：0
> 
> 时间：2013-04-23T23:32:11.443
> 
> 标签：google-app-engine, email, dns, google-apps

我已经使用“Google Apps for your domain”在一个子域（比如“app.mydomain.com”）上映射了一个 Google App Engine 应用程序，并且我已经使用 mydomain.com 的 DNS 设置中的 CNAME 记录完成了这项工作。

Google Apps 是否可以处理发送到“@app.mydomain.com”的电子邮件？在 mydomain.com 的 DNS 记录中，我会有这样的配置：

```
app.mydomain.com. CNAME   GHS.GOOGLE.COM.
app.mydomain.com. MX    1 ASPMX.L.GOOGLE.COM. 
```

子域的 CNAME 条目是否会与同一子域的 MX 记录冲突？

[编辑] 根域 MX 记录 @mydomain.com 未使用 Google Apps 设置

[edit2] [Stack Exchange 上的相关问题] [1](https://serverfault.com/questions/18000/dns-subdomains-that-require-both-an-mx-record-and-a-cname?rq=1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-01T22:45:13.917

正如您[链接](https://serverfault.com/questions/18000/dns-subdomains-that-require-both-an-mx-record-and-a-cname)到的相关 Stack Overflow 帖子中正确回答的那样，这是不可能的。

CNAME 资源记录不能与同一区域的另一个 CNAME 资源记录共存。您可以参考[RFC1034](https://www.rfc-editor.org/rfc/rfc1034#section-3.6.2)和[RFC2181](https://www.rfc-editor.org/rfc/rfc2181#section-10.1)了解以下内容：

> 如果 CNAME RR 出现在节点上，则不应出现其他数据；
> 
> 任何一个别名可能只有一个这样的规范名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:18:40.390

您应该能够按照[http://support.google.com/a/bin/answer.py?hl=en&answer=53295](http://support.google.com/a/bin/answer.py?hl=en&answer=53295)中的说明设置别名域。

但是：您将无法为您的子域维护单独的用户。这可能会成为一个问题。我建议看看其中一位将邮件发送到 URL 路由（如 mailgun 或 Sendgrid）的人：您可以将邮件发布到您的应用引擎应用程序，然后提取收件人信息并适当地处理它。

编辑：啊，误解了。现在，如果我错了，请纠正我，但您试图让 Google Apps 处理现有域的子域的所有电子邮件，而该子域还不是 Google Apps 域？如果是这种情况，那么您可能无法这样做，因为 DNS 基本上不会让您将不同的 MX 记录分配给 CNAME 的子域。您可以使用 A 记录或将您的根 MX 记录指向 Google Apps（然后子域邮件将转到同一位置）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T01:15:24.413

为子域设置MX记录完全相同。

所以对于 mydomain.com 和 app.mydomain.com 会在 Bind 中这样

@IN MX aspmx.l.google.com 应用程序 IN MX aspmx.l.google.com。

如果您需要验证域

app IN TXT “这里有一些长代码。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-20T05:24:36.503

在您的 DNS MX 记录下，您可以定义主机名。例如“经销商”将为电子邮件域“reseller.yourdomain.com”设置 MX 记录

这是谷歌应用程序设置将要求输入为“@”或

# git - GIT：具有公共文件的三个不同存储库

> ID：16180916
> 
> 赞同：1
> 
> 时间：2013-04-23T23:32:16.073
> 
> 标签：git

我有一个情况：

-我已经编写了大约 100 个实用程序脚本，位于我路径上的一个目录中。-我有两台不同的本地计算机，每台计算机都有相同的目录和许多相同的文件，但不是全部（因为某些脚本是为该特定计算机的操作系统编写的）。

我正在尝试使用远程 git 存储库来使我更容易开发/更改这些脚本。例如，如果我对计算机 A 上的脚本进行了更改，我可以将更改保存到一个分支，然后将该分支上传到远程存储库

```
git push 
```

并且，下次我登录计算机 B 时，我可以调用

```
git pull 
```

命令获取最新版本的脚本目录。我的想法是我将有一个主要的远程分支，其中包含每台计算机的所有脚本，然后是其他两个特定于计算机的分支（因此三个 repos）。这个计划没有成功，因为我无法弄清楚如何不断地将更新合并到其他存储库中。我已经没有想法了，想知道是否有更有经验的 git 可以提供帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:47:54.037

我相信你可以只用一个分支就可以逃脱。因为只有你会在 repo 上工作。

首先在本地框（A 或 B）中更改您的代码，然后在提交代码之前**使用**：

```
$ git stash 
```

然后使用以下命令从远程提取所有更改：

```
$ git pull 
```

然后在它们上面弹出所有最新的更改

```
$git stash pop 
```

然后按照通常的提交和推送过程。

```
$ git add .

$ git commit -m "work from boxA"

$ git push origin master 
```

您需要记住的只是**存储** 您的本地代码更改，**拉**取远程仓库，然后**存储弹出**您的更改。

希望能帮助到你！

# cakephp - 带有 TwitterBoostrap 的 CakePHP 表单（控件控制行）

> ID：16180917
> 
> 赞同：0
> 
> 时间：2013-04-23T23:32:27.453
> 
> 标签：cakephp, twitter-bootstrap

我正在尝试使用 TwitterBoostrap 在 cakePHP 中并排放置两个输入。

这是我的一段代码

```
<?php echo $this->Form->create('Ad',array("class"=>"well row-fluid")); ?>
    <fieldset>
        <legend><?php echo __('Add Ad'); ?></legend>
        <?php echo $this->Form->input('user_id',array('class'=>'span3'));?>
        <div class="controls controls-row">
            <?php echo $this->Form->input('state_id', array('empty' => 'Selecione o Estado','class'=>'span2','div'=));?>
            <?php echo $this->Form->input('city_id', array('empty' => 'Selecione a Cidade','class'=>'span5'));?>
        </div> 
```

输出如下所示：

```
State
|----------| City
             |----------| 
```

城市未对齐。我该如何解决？

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T12:24:59.343

在将 Bootstrap 与 CakePHP 一起使用时，我经常发现它很有用，因为它可以从我希望创建的 HTML 中返回。如果我正确理解了您的问题，您希望提供以下内容：

```
<form class="well-row">
    <div class="span3">
        <label class="control-label">State</label>
        <select name="state">...</select>
    </div>
    <div class="span3">
        <label class="control-label">City</label>
        <select name="state">...</select>
    </div>
</form> 
```

我知道 CakePHP 的表单助手确实用标签包围`input`和`label`元素，`div`这会弄乱你的布局。我通常会执行以下操作来更好地控制标记：

```
<?php echo $this->Form->create('Ad', array('inputDefaults' => array('div' => false)))?> 
```

总而言之，请尝试以下操作：

```
<?php echo $this->Form->create('Ad', array('inputDefaults' => array('div' => false)))?>
<div class="span5">
    <?php echo $this->Form->input('state_id', array('empty' => 'Selecione o Estado', 'class' => 'span3'));?>
</div>
<div class="span5">
    <?php echo $this->Form->input('city_id', array('empty' => 'Selecione a Cidade', 'class' => 'span3'));?>
</div> 
```

您可能必须增加容器 div 的跨度以适应标签上的任何填充或选择元素以阻止它们换行。

# ios - iOS：传递数据错误

> ID：16180918
> 
> 赞同：0
> 
> 时间：2013-04-23T23:32:34.293
> 
> 标签：ios, uilabel, ibaction

这种方法对我不起作用。我正在工作几分钟。我莫名其妙地做不到。

这是我的代码。

```
- (IBAction)donebutton:(id)sender {
    AddTaskViewController *addtask = [[AddTaskViewController alloc]initWithNibName:@"AddTask" bundle:nil];
    addtask.testlabel.text = self.zaman1.text;
    [self dismissViewControllerAnimated:YES completion:nil];

} 
```

一切正常，但无法正常工作。不是这样吗？这是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:46:00.397

您必须在您的方法中分配此字符串，在初始化视图之前无法配置`viewWillAppear`IBOutlets（我假设是 IBOutlet UILabel *）。`testlabel`如果这没有帮助，请说明错误是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:50:40.480

更好的方法是`NSString*`在`AddTaskViewController`. 你可以这样做：

添加`AddTaskViewController.h`以下内容：

```
@property (nonatomic, strong) NSString* myLabelsText; 
```

然后`AddTaskViewController.m`确保将其添加到`viewWillAppear`：

```
self.testlabel.text = self.myLabelsText; 
```

现在假设您已经适当地声明了您的`testLabel`和`myLabelsText`它们被合成，您的视图控制器将在适当的时间正确应用字符串，然后您的函数应该更改为：

```
- (IBAction)donebutton:(id)sender {
    AddTaskViewController *addtask = [[AddTaskViewController alloc]initWithNibName:@"AddTask" bundle:nil];

    // Set the value on your new NSString* property and let the view controller handle the rest
    addTask.myLabelsText = self.zaman1.text;

    // Don't you want to 'present' the view controller rather than 'dismiss' after having provided it with data?
    [self dismissViewControllerAnimated:YES completion:nil];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T01:22:13.727

You should use delegate protocols and instead of setting properties of button on previous view controller just pass a string back. This question should help you in implementing Delegate protocol

[dismissModalViewController AND pass data back](https://stackoverflow.com/questions/6203799/dismissmodalviewcontroller-and-pass-data-back?rq=1)

# javascript - Plupload 队列限制文件数

> ID：16180919
> 
> 赞同：6
> 
> 时间：2013-04-23T23:33:12.443
> 
> 标签：javascript, plupload

我正在使用 Plupload 1.5.6 将图像上传到服务器，但是我想将允许的文件数量限制为 6。我在这里和通过谷歌搜索尝试了一些建议，但它们仍然允许我上传尽可能多的我想。我的代码是：

```
var maxfiles = 6;

$(function() {
  $("#uploader").pluploadQueue({
    runtimes : 'html5,silverlight,flash,gears,browserplus',
    url : 'upload.php',
    max_file_size : '2mb',
    chunk_size : '1mb',
    unique_names : false,
    max_file_count: maxfiles,
    resize : {width : 700, height : 700, quality : 90},
    filters : [
      {title : "Image files", extensions : "jpg,gif,png"}
    ],
    flash_swf_url : '/js/plupload.flash.swf',
    silverlight_xap_url : '/js/plupload.silverlight.xap',
    preinit: attachCallbacks,
    init : {
      FilesAdded: function(up, files) {
        plupload.each(files, function(file) {
          if (up.files.length > maxfiles) {
            up.removeFile(file);
          }
          var upa = $('#uploader').plupload('getUploader');
          var i = 0;
          while (i<=upa.files.length) {
            ultimo = upa.files.length;
            if (ultimo > 1) {
              if (i > 0) {
                ultimo2 = ultimo - 1;
                ii = i-1;
                if (ultimo2 != ii) {
                  if (up.files[ultimo - 1].name == upa.files[i-1].name) {
                    up.removeFile(file);
                  }
                }
              }
            }
            i++;
          }
        });
        if (up.files.length >= maxfiles) {
          $('#uploader_browse').hide("slow");
        }
      },
      FilesRemoved: function(up, files) {
        if (up.files.length < maxfiles) {
          $('#uploader_browse').fadeIn("slow");
        }
      }
    }
  });

  $('form').submit(function(e) {
    var uploader = $('#uploader').pluploadQueue();

    if (uploader.files.length > 0) {
      uploader.bind('StateChanged', function() {
        if(uploader.files.length === (uploader.total.uploaded + uploader.total.failed)){
          $('form')[0].submit();
        }
     });
     uploader.start();
   } else {
     alert('You must queue at least one file.');
   }

    return false;
  });
}); 
```

我尝试将其更改为仅 plupload 而不是 pluploadQueue 但这不起作用。

# variables - 在 gnuplot 二进制文件绘图中使用变量

> ID：16180920
> 
> 赞同：0
> 
> 时间：2013-04-23T23:33:25.800
> 
> 标签：variables, gnuplot, record, binaryfiles

我正在使用 gnuplot 绘制从我的模拟输出的直接访问二进制文件，并想编写一个简单的通用脚本来绘制文件，而无需我对文件进行大量编辑。这是我想做的事情：

```
nx=real(system(sprintf("command to find nx")))
dx=real(system(sprintf("command to find dx")))
plot 'Fvy.dat' binary format="%double" record=nx skip=0*nx u ($0*dx):1 w l t '{/Symbol d}vy'
similar plotting multiple times 
```

现在的问题是上面的命令给了我一个错误

```
gnuplot> plot 'Fvy.dat' binary format="%double" record=nx skip=0*nx u ($0*0.025):1 w l t '{/Symbol d}vy'
                                                   ^
     ';' expected 
```

如果我直接使用该号码，例如

```
plot 'Fvy.dat' binary format="%double" record=128 skip=0*nx u ($0*dx):1 w l t '{/Symbol d}vy' 
```

它工作正常。唯一麻烦的地方是记录命令。skip 命令很容易将 nx 作为参数。有谁知道如何让记录接受变量？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T09:25:32.860

在 nx 周围加上括号：

```
plot 'Fvy.dat' binary format="%double" record=(nx) skip=0*nx u ($0*0.025):1 w l t '{/Symbol d}vy' 
```

# android - Source Not Found main.xml 开始 Android 4 应用程序开发 作者 Wei-Meng Lee, Eclipse

> ID：16180921
> 
> 赞同：0
> 
> 时间：2013-04-23T23:33:27.680
> 
> 标签：android, eclipse

我正在开始 android 4 应用程序开发，实际上正在阅读一本教我 android 的书。我是第 4 章，似乎遇到了一个让我发疯的问题。我正在制作一个简单的 android 应用程序，它在复选框列表中显示总统，当您单击按钮时，它将显示您选择的内容。但它并没有给我机会，因为当我在模拟器上打开应用程序时，它给了我错误“找不到源”。这是我的应用程序代码。

```
package net.learn2develop.Basicviews5;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class BasicViews5Activity extends ListActivity {

    String[] presidents;

/** called when there activity is first created */
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    ListView lstView = getListView();
    // lstView.setChoiceMode(ListView.CHOICE_MODE_NONE);
    //lstView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    lstView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    lstView.setTextFilterEnabled(true);

    presidents = 
            getResources().getStringArray(R.array.presidents_array);

    setListAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_checked, presidents));
}

public void onListItemClick(
        ListView parent, View v, int position, long id)
{
    Toast.makeText(this,
            "You have selceted " + presidents[position],
            Toast.LENGTH_SHORT).show();
}

public void onClick(View view) {
    ListView lstView = getListView();

    String itemsSelected = "Selcted items: \n";
    for (int i=0; i<lstView.getCount(); i++) {
        if (lstView.isItemChecked(i)) {
            itemsSelected += lstView.getItemAtPosition(i) + "\n";
        }
    }
    Toast.makeText(this, itemsSelected, Toast.LENGTH_LONG).show();
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.basic_views5, menu);
    return true;
}

} 
```

这是我调用的 main.xml 文件的代码。（或无论如何尝试。）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".BasicViews5Activity" >

<Button 
    android:id="@+id/btn"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Show selceted items"
    android:onClick="onClick" />

<TextView
    android:id="@+id/android:list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

这是我的 strings.xml 文件，它调用总统字符串放入列表中。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<string name="action_settings">Settings</string>
<string name="hello_world">Hello world!</string>
<string name="app_name">BasicViews5</string>
<string-array name="presidents_array">
    <item>Dwight D. Eisenhower</item>
    <item>John F. Kennedy</item>
    <item>Lyndon B. Johnson</item>
    <item>Richard Nixon</item>
    <item>Gerald Ford</item>
    <item>Jimmy Carter</item>
    <item>Ronald Reagen</item>
    <item>George H. W. Bush</item>
    <item>Bill Clinton</item>
    <item>George W. Bush</item>
    <item>Barack Obama</item>
</string-array>

</resources> 
```

我真的不知道这里发生了什么。我做了一些调查，并将问题缩小到一行代码。

```
setContentView(R.layout.main); 
```

我把它拿出来，很好，但是我没有显示你选择的按钮。我把它放进去，它发疯了，说找不到源，模拟器是空白的。我知道我的帖子很长，但非常感谢您花时间阅读它！您能给我的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:25:30.300

将评论转换为答案：

您正在调用`getListView()`但提供了应用程序正在寻找的`TextView`id `android:id="@+id/android:list"`。`getListVivew()`如果你没有在你的 xml 中声明一个，你只会调用它，那么默认情况下它会创建`ListView`.

更改此行

`ListView lstView = getListView();`

至

```
ListView lstView = (ListView) findViewById(R.id.listView); 
```

然后将您的`TextView`in xml 更改为`ListView`

现在它正在寻找一个`ListView`合适的`id`. 如果您希望更改外观，这也允许您`ListView`通过使用进一步格式化您的`styles``themes`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:16:04.470

在本书的第 192 页（第 4 章）中，`onCreate`方法中有以下代码片段：

```
//---no need to call this---
//setContenetView(R.layout.main); 
```

那是因为您正在使用`ListActivity`which 将使内容视图成为`ListView`. 如果您想定义其他视图的自定义布局：让您的类仅扩展`Activity`。然后在您的 main.xml 文件中，您可以输入如下内容：

```
<ListView
    android:id="@+id/list"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"/> 
```

现在，在您的`onCreate`方法中，您可以调用：`setContentView(R.layout.main)`并在其下方引用列表视图：

```
ListView list = (ListView) findViewById(R.id.list);
list.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
list.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, presidents)); 
```

# javascript - 为.click目的检测div中的透明度？

> ID：16180922
> 
> 赞同：0
> 
> 时间：2013-04-23T23:33:32.367
> 
> 标签：javascript, jquery, transparency, opaque-pointers

我将三个元素层叠在一起，每个元素都包含一些透明度。中间没有透明度，只有边缘。我希望能够单击背景中的 div，但是因为通向最前面 div 边缘的透明空间在它上方，所以最前面 div 的单击事件会触发。我不能禁用它或使用 stopPropegation() 显然，因为前面的那个仍然需要可点击。

是否有任何解决方案可以检测透明空间并将其与不透明空间区分开来？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:37:12.207

这可能行不通，但我能想到的最好的 - 它假设后面的 div 是前面 div 的孩子：

```
 $('div').click(function() {
        if($(this).css('opacity') != 1) {
            //it's transparent
           $(this).children('div').click();
        }
    });

    //mouse coordinates
    $('div#innerDiv').click(function(e) {
        var x = e.pageX;
        var y = e.pageY
    }); 
```

# javascript - JavaScript Canvas object

> ID：16180924
> 
> 赞同：3
> 
> 时间：2013-04-23T23:34:01.743
> 
> 标签：javascript, canvas

I want to create a canvas object in memory, and not require a HTML `<canvas>` tag. Is this possible?

With this code:

```
var canvas = new Canvas();
var ctx = canvas.getContext('2d'); 
```

I get this error message: `Uncaught ReferenceError: Canvas is not defined`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T23:35:55.600

You should be able to create the element with JavaScript:

```
var canvas = document.createElement('canvas');
var ctx = canvas.getContext('2d'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-23T23:35:49.533

Use [`document.createElement("canvas")`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement) instead. There is no `Canvas` constructor for [canvases](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement), as you know it from `Image` for images or `Option` for options - those are the sole exceptions.

# java - 我的 Java power 方法的效率？

> ID：16180928
> 
> 赞同：13
> 
> 时间：2013-04-23T23:34:19.667
> 
> 标签：java, performance, math

所以我参加了一次工作面试，他们让我在白板上写下一个快速的数学幂方法，这就是我放在那里的

```
public static double pow(double base, double power) {
    double result = 1.0;
    for(double x = 0; x < power; x++) {
        result = result * base;
    }

    return result;
} 
```

这行得通，他们对此感到满意，但随后又问我如何才能使其更有效率，但我没有回应。所以我的问题是，你能比这更有效率吗？还是这只是一个让我有点汗水的问题？我在想可能有一些直接的位移解决方案，但我不确定，我认为这只适用于 2 的幂？有任何想法吗？

***编辑** 对不起，我忘了提到方法签名是给我的（双打作为输入），我被告知我不能使用任何内置的数学库。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-23T23:38:40.713

[http://en.wikipedia.org/wiki/Exponentiation_by_squaring](http://en.wikipedia.org/wiki/Exponentiation_by_squaring) “基本方法”是 O(log n)，而不是这个 O(n) 算法。（[番石榴](https://google.github.io/guava/releases/snapshot-jre/api/docs/src-html/com/google/common/math/IntMath.html#line.227)有一个非递归的实现。）

此外，您的功率参数几乎可以肯定是`int`. （如果你真的*想*实现一个算法来将数字提升到非整数幂，你将需要更多的数学运算。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T00:39:05.927

跳出框框思考一下，通常在内存和速度之间进行权衡。有记忆的[概念](http://en.wikipedia.org/wiki/Memoization)。

您可以添加一个静态 double[][] 缓存来存储任何特定值的结果。

就像是：

```
// look for the value in the cache, if it is there return it.

for(double x = 0; x < power; x++) {
    result = result * base;
    // store result in the cache
} 
```

这会起作用，但会占用大量内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T00:29:11.827

将答案与自身和其他确定的倍数相乘可以为您带来不同的权力，这可以让您更快地接近解决方案。Louis 提供的 wiki 很好。如果您想要一个通用的解释，请考虑：

```
2^1 * 2^1 = 2^2
2^2 * 2^2 = 2^4
2^4 * 2^4 = 2^8
... 
```

这适用于二的幂。但是我发现玩非二的幂很有趣。所以如果我想要 2^13 我该怎么做呢？

```
2^1 * 2^1 = 2^2
2^1 * 2^2 = 2^3
2^3 * 2^3 = 2^6
2^6 * 2^6 = 2^12
2^12 * 2^1 = 2^13 
```

上面的例子是为了表明你不必只玩方块。如果你玩这个，使用各种幂，你会发现有时你可以做得比只使用 2 的幂...这是一个有趣的数学问题。

# c++ - 我如何确保索引是联合查找算法中最小的？

> ID：16180938
> 
> 赞同：0
> 
> 时间：2013-04-23T23:35:09.773
> 
> 标签：c++, union-find

我有一个 N*N 布尔对称矩阵来显示每个元素的关系。

例如矩阵

```
1 0 1 
0 1 1
1 1 1 
```

表示元素 1 与 1、3 有关系；元素 2 与 2,3 等有关系。

现在我想对元素进行聚类，因为矩阵大小很大（N=9000），我不想使用三层循环，而是想使用联合查找算法。

```
int labels[N];

static int find(int u){
    return u == labels[u] ? u : labels[u] = find(labels[u]);
}

static void myunion(int u,int v){
    labels[find(v)] = find(u); // the value of v is always larger than u
} 
```

对于执行代码：

```
for(int i=0;i<size;i++){
    for{int j=i+1;j<size;j++){
        if(matrix[i][j]==1){
            myunion(i,j);// the value of j is always larger than i
        }
    }
} 
```

问题是，我想始终使用最小的索引作为集群标签，但有时我的代码没有使用正确的标签。

例如，元素 2、3、100 是相关的。我希望集群有标签 2，但我得到标签 100 的结果。谁能告诉我我的逻辑错误？

我不确定是否

```
int pv = find(v);
int pu = find(u);

if(labels[pv]>=labels[pu]){
    labels[pv] = labels[pu];
}
else{
    labels[pu] = labels[pv];
} 
```

工作，因为我担心如果，例如，{1,2,3}->label 1 ;{4,6}->label 4 当我调用 union(3,4) 时，labels[6] 也会是修改为1？

# python - 在直方图中绘制平均线（matplotlib）

> ID：16180946
> 
> 赞同：87
> 
> 时间：2013-04-23T23:35:56.020
> 
> 标签：python, matplotlib, axis

我正在 python 中使用 matplotlib 绘制直方图，并想绘制一条表示数据集平均值的线，以虚线覆盖在直方图上（或者其他颜色也可以）。关于如何在直方图上绘制一条线的任何想法？

我正在使用 plot() 命令，但不确定如何绘制垂直线（即我应该为 y 轴指定什么值？

谢谢！

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-04-23T23:56:00.653

您可以使用`plot`or`vlines`来绘制一条垂直线，但从 y 轴的底部到顶部绘制一条垂直线，`axvline`可能是最简单的函数。这是一个例子：

```
In [80]: import numpy as np

In [81]: import matplotlib.pyplot as plt

In [82]: np.random.seed(6789)

In [83]: x = np.random.gamma(4, 0.5, 1000)

In [84]: result = plt.hist(x, bins=20, color='c', edgecolor='k', alpha=0.65)

In [85]: plt.axvline(x.mean(), color='k', linestyle='dashed', linewidth=1)
Out[85]: <matplotlib.lines.Line2D at 0x119758828> 
```

结果： [![阴谋](https://i.stack.imgur.com/eJbSA.png)](https://i.stack.imgur.com/eJbSA.png)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2018-10-24T04:41:52.270

这是一个老话题和次要的补充，但我经常喜欢的一件事是在该行旁边绘制平均值：

```
import numpy as np
import matplotlib.pyplot as plt
np.random.seed(6789)
x = np.random.gamma(4, 0.5, 1000)
result = plt.hist(x, bins=20, color='c', edgecolor='k', alpha=0.65)
plt.axvline(x.mean(), color='k', linestyle='dashed', linewidth=1)

min_ylim, max_ylim = plt.ylim()
plt.text(x.mean()*1.1, max_ylim*0.9, 'Mean: {:.2f}'.format(x.mean())) 
```

产生以下结果： [![带文本的平均行](https://i.stack.imgur.com/tbIQX.png)](https://i.stack.imgur.com/tbIQX.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T23:38:31.143

我会查看您的数据集中的最大值（即直方图 bin 值）将该值乘以大于 1 的数字（例如 1.5），然后使用它来定义 y 轴值。这样，无论直方图中的值如何，它都会出现在直方图上方。

# post - 在 Nginx 中为 POST 请求返回 503

> ID：16180947
> 
> 赞同：6
> 
> 时间：2013-04-23T23:35:57.330
> 
> 标签：post, nginx, http-status-code-503

我有一个简单的配置文件，用于在维护时提供自定义 503 错误页面。相关部分是这样的：

```
server {
    listen      80 default;
    root        /usr/share/nginx/html;
    server_name example.com;

    location / {
        if (-f $document_root/503.json) {
            return 503;
        }
    }

    # error 503 redirect to 503.json
    error_page 503 @maintenance;
    location @maintenance {
        rewrite ^(.*)$ /503.json break;
    }
} 
```

问题是 Nginx 发现任何请求都在静态文件中解析，并且任何 POST、PUT 和 DELETE 请求都会得到 405（不允许方法）响应。

所以问题是：我如何告诉 Nginx 为我的页面提供任何 HTTP 方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-23T07:09:59.160

我今天遇到了这个。似乎问题是由于 nginx（像大多数服务器一样）不允许您`POST`访问静态文件。

> 解决方案是在 @503 位置块中捕获 405 错误，为维护页面提供服务。此外，您必须启用@recursiveerrorpages@，因为您首先故意抛出 503 错误，然后用户通过发布到您的静态文件来抛出 405：

```
recursive_error_pages on;

if (-f $document_root/system/maintenance.html) {
  return 503;
}

error_page 404 /404.html;
error_page 500 502 504 /500.html;
error_page 503 @503;
location @503 {

  error_page 405 = /system/maintenance.html;

  # Serve static assets if found.
  if (-f $request_filename) {
    break;
  }

  rewrite ^(.*)$ /system/maintenance.html break;
} 
```

来源：[https ://www.onehub.com/blog/2009/03/06/rails-maintenance-pages-done-right/](https://www.onehub.com/blog/2009/03/06/rails-maintenance-pages-done-right/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T00:15:21.563

也许尝试强制 405 请求成为实际的 URI：

```
error_page 405 = $uri; 
```

# jquery - HTML5 画布对象

> ID：16180953
> 
> 赞同：1
> 
> 时间：2013-04-23T23:36:30.963
> 
> 标签：jquery, html5-canvas

我在 html 页面中有一个 canvas html 元素：

```
<canvas id="myCanvas2" width="290" height="250" style="background-color:red"></canvas> 
```

我想使用 jquery 访问画布。如果我尝试使用 jQuery 访问它不工作，如果我尝试使用 document.getElementById 那么只有它工作。

这是代码：

```
 var canvas = $("#myCanvas2");
 console.log("Canvas : " + canvas + ", typeof : " + typeof(canvas));
 canvas = document.getElementById('myCanvas2');
 console.log("Canvas 2 : " + canvas + ", typeof : " + typeof(canvas)); 
```

不应该 $("#myCanvas2"); 和 document.getElementById('myCanvas2'); 一样吗？？

我在控制台中得到以下信息：

```
 Canvas : [object Object], typeof : object
  Canvas 2 : [object HTMLCanvasElement], typeof : object 
```

可以使用 jquery 访问 canvas html 元素吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:41:23.167

jQuery 总是将他的方法包裹在 DOM 节点周围。这不仅适用于画布。

如果你想通过 jQuery 访问 DOM 节点 Canvas，你必须使用[`.get()`方法](http://api.jquery.com/get/)：

```
$("canvas").get(0).getContext("2d");
// or short hand
$("canvas")[0].getContext("2d"); 
```

*请注意，您必须通过 an`index`才能获得 DOM 节点。否则，您将拥有一个 DOM 节点数组。*

# matlab - Matlab - 将数据从几个单元阵列移动到一个主单元阵列

> ID：16180954
> 
> 赞同：1
> 
> 时间：2013-04-23T23:36:53.573
> 
> 标签：matlab, multidimensional-array, cell

我有一个数据集，它包含大约 1000 个 150 万行文件，每个文件有 6 列。这些文件来自大约 50 个气象站。理论上，所有电台都是时间同步的。我已将来自 50 个站点中的每个站点的数据存储在 Matlab 中的单元阵列中。每个站都有一个与文件对应的元胞数组的元胞数组。也就是说，Station 1 在元胞数组#1 中，元胞数组#1 具有与文件数量对应的 X 个元胞数组。然后每个都包含实际数据。我想将所有数据放到一个位置，第一列是“时间”，其他 50 列是站。我不需要 6 列中的所有数据。然而。我的策略是创建一个单元格数组，其中包含所有可能时间的列，后跟 50 个空列，数据将被放入其中。然后我查看每个文件，

我进行转换的代码如下所示：

```
% One-second time data in datenum format

    times = datenum(2011,11,20,0,0,0:TotalSeconds)';

    % The number of files associated with each station

    AllLengths = cellfun(@length,TotalData);

% Preallocating irradiance cell array

    IrradianceData = cell(length(times),length(AllLengths)+1);

% Loop through the times (November 20, 2011, 00:00:00 to present) and find common times from the data

for ii = 1:length(AllLengths)

    for jj = 1:AllLengths(ii)
         % This finds the indices of the times within the station file
        [~,IdxData,Idxtimes] = intersect(TotalData{ii,1}{jj,1}(:,1),times);

         % This adds the irradiance values to another cell array
         % Can I do this more efficiently?

        for kk = 1:length(Idxtimes)
        IrradianceData{Idxtimes(kk),ii+1} = TotalData{ii,1}{jj,1}(IdxData(kk),5);
        end
    end

end 
```

有什么方法可以搜索数据文件，并以矢量化方式将相关数据添加到元胞数组中？它现在的设置方式非常缓慢。我会很感激任何建议。

# ruby-on-rails - ActiveRecord 找到“尽力而为”的结果？

> ID：16180963
> 
> 赞同：1
> 
> 时间：2013-04-23T23:37:29.500
> 
> 标签：ruby-on-rails, activerecord

所以我有一堆用户存储在 Redis 记分牌样式的东西中。但是，有时这些用户会被删除，但他们不会在 Redis 中被删除。这对我的应用程序来说并不重要，所以我不介意。但是，Rails 在尝试使用如下查询获取结果时：

```
User.find([1,2,3,4,244]) 
```

Rails 找不到用户之一，所以它返回这个非常有用的错误：

```
ActiveRecord::RecordNotFound: Couldn't find all Users with IDs (1, 2, 3, 4, 244) (found 4 results, but was looking for 5) 
```

（感谢 rails 的人类可读错误！）

我想知道，有没有办法尽最大努力找到该数组中存在的所有结果，而不关心是否没有返回所有结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:46:22.880

如果你`where`改用，你会很好：

```
User.where(id: [1, 2, 3, 4, 244]) 
```

Rails 会将其转换为`"id" IN (1, 2, 3, 4, 244)`SQL，这与您的语句将执行的 sql 完全相同`find`，但 Rails 不需要使用返回的确切记录数`where`，这与`find`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T23:45:25.560

使用`SQL` `in`命令。这将返回数据库中的所有现有值并忽略其他值。

```
User.where('id in ?', [1,2,3,4,244])
User.where(id => [1, 2, 3, 4, 244]) 
```

# ios - UICollectionView 和 UICollectionViewCell IndexPath 错误

> ID：16180965
> 
> 赞同：0
> 
> 时间：2013-04-23T23:37:43.440
> 
> 标签：ios, objective-c, xcode, uicollectionview

我是 s 的新手，当我尝试以编程`UICollectionView`方式添加 s 时，我一直遇到特定错误。`UICollectionViewCell`

在我的应用程序中，我有一个`UIViewController`拥有`UIView`. 其中`UIView`，上半部分有几个物体，下半部分有一个`UIScrollView`。这`UIScrollView`持有一个`UICollectionView`.

我正在尝试以编程方式将 custom 添加`UICollectionViewCell`到`UICollectionView`，并且我不断收到此错误：

```
[myViewController collectionView:cellForItemAtIndexPath:]: unrecognized selector sent to instance 0x1e01f5e0
2013-04-23 16:19:02.726 myAppName[28121:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[myViewController collectionView:cellForItemAtIndexPath:]: unrecognized selector sent to instance 0x1e01f5e0' 
```

我已经尝试了几乎所有类似线程的解决方案，但没有任何效果。

这是我认为产生问题的代码：

```
- (UICollectionViewCell *)myCollectionView:(UICollectionView *)myCollectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
  NSMutableArray *data = [self.dataArray objectAtIndex:indexPath.section];
  NSString *cellData = [data objectAtIndex:indexPath.row];
  static NSString *cellIdentifier = @"cvCell";
  UICollectionViewCell *cell = [myCollectionView dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath];
  UILabel *myCellTextLabel = (UILabel *)[cell viewWithTag:100];
  [myCellTextLabel setText:cellData];

  return cell;
} 
```

我可以发布更多需要的信息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:45:43.973

阅读错误信息；你错过了一个方法，因为你错误地命名了你的方法。

> `[myViewController collectionView:cellForItemAtIndexPath:]:`无法识别的选择器发送到实例`0x1e01f5e0`

这意味着您的`collectionView:cellForItemAtIndexPath:`方法丢失了。如果您查看方法的定义，您会发现您实际上调用了它`myCollectionView:cellForItemAtIndexPath:`。

# c++ - 从字符串到函数的映射中的语法错误

> ID：16180969
> 
> 赞同：0
> 
> 时间：2013-04-23T23:38:01.687
> 
> 标签：c++, function, map, visual-studio-2012, lambda

我在 Visual Studio 2012 中收到以下语法错误：

> 1>...\documents\visual studio 2012\projects...\line.h(21): 错误 C2143: 语法错误:在 ' `)`' 之前缺少 ' `const`'

尝试创建以下内容时（它在另一个文件中定义）`tokenList`也是`typedef`for `std::vector<std::string>`：

`extern std::map<std::string,std::function<std::string (const tokenList& tokens)>> evaluateOperator; //<-- This is the line with the error`

我希望在其中执行以下操作：

```
evaluateOperator["="] = [](const tokenList& tokens) -> std::string
{
    std::string temp("");
            ...
}; 
```

我究竟做错了什么？（我对 C++11 非常陌生）。我也将不胜感激有关如何解决整个问题的任何建议，即根据输入字符串在字符串列表上应用函数。谢谢你。

编辑：这就是 SSCE 如此重要的原因——我已将错误的来源（在使用 ICC2013 之后）定位为错误的代码顺序——typedef 出现在地图声明之后。就我而言，这很愚蠢，但有趣的是，英特尔 C++ 编译器 2013 能够立即检测到语法错误的原因，而 VC++ 却摸不着头脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:09:03.743

您声称发生错误的那一行与 C++11 独有的语法属性几乎没有关系。除外`std::function`，但如果您的编译器不支持它，它不会表示编译失败并出现语法错误。

也许错误来自它下面的代码。我不认为 VS 支持 lambdas，这可能是错误的根源。请注意，您的代码在[GCC](http://coliru.stacked-crooked.com/view?id=d876246f66bc8a9fa88cb29d04332843-8996fa4eaf2a653a1ca8b32f107442f6)中编译得很好。

# javascript - 如何从列表成员中检索扩展的 Facebook 信息

> ID：16180971
> 
> 赞同：1
> 
> 时间：2013-04-23T23:38:12.447
> 
> 标签：javascript, facebook, facebook-graph-api

我的第一个实际问题供您阅读。我正在尝试修改 javascript 代码片段。此代码处理用户朋友列表的返回成员。我们正在加载 fbjssdk 并正确初始化所有内容。函数中引用的容器正在正确加载列表成员。

```
var TargetFriendListed = function(id) {
var container = $('#targetFriends ul');
container.empty();

FB.api('/' + id + '/members', function(res) {
    $.each(res.data, function(i, val) {
        new Friend(val.id,val.name);
    });
    container.selectable();
    Progress.hide(Progress.TEXT_COMPLETE);
});
};

var Friend = function(id, name) {

var container = $('#targetFriends ul');
var elm = $('<li facebook_id="'+id+'"><img src="https://graph.facebook.com/' + id + '/picture" alt="" width="75px" height="75px"><span>'+name+'</span></li>');
container.append(elm);
}; 
```

如果隐私设置允许，我想做的是获取从朋友列表成员调用返回的 id 并再次针对 API 运行它以检索性别、位置和出生日期。然后我可以根据扩展信息对结果进行排序。

我的问题是什么是最好的方法、资源和时间。

# javascript - 使用按钮进行敲除模板绑定

> ID：16180981
> 
> 赞同：1
> 
> 时间：2013-04-23T23:39:49.943
> 
> 标签：javascript, knockout.js

我正在学习淘汰赛，我遇到了这个例子..

**HTML/视图：**

```
<h2>Not sorted</h2>
<ul data-bind="template: { name: 'instanceTmpl', foreach: instances }"></ul>

<hr/>
<h2>Sorted</h2>
<ul data-bind="template: { name: 'instanceTmpl', foreach: sortedInstances }"></ul>

<script id="instanceTmpl" type="text/html">
    <li>
        <span data-bind="text: id"></span>
        <input data-bind="value: FirstName" />
    </li>
</script> 
```

**JavaScript/视图模型：**

```
function Instance(id, name) {
    return {
        id: ko.observable(id),
        FirstName: ko.observable(name)
    };
}

var viewModel = {
    instances: ko.observableArray([
        new Instance(1, "Zed"),
        new Instance(2, "Jane"),
        new Instance(3, "John"),
        new Instance(4, "Anne"),
        new Instance(5, "Ted")
    ])
};

viewModel.sortFunction = function (a, b) {
    return a.FirstName().toLowerCase() > b.FirstName().toLowerCase() ? 1 : -1;
};

viewModel.sortedInstances = ko.dependentObservable(function () {
    return this.instances.slice().sort(this.sortFunction);
}, viewModel);

ko.applyBindings(viewModel); 
```

我尝试通过添加按钮进行更改，并希望使用该按钮单击对未排序的项目进行排序。喜欢

```
<button data-bind="click: sortedInstances">Sort</button> 
```

没用。谁能解释一下如何将模板绑定到按钮点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:50:59.047

您可以通过向视图模型添加一个`sort`函数来对可观察数组的内容进行排序，然后使用新的排序数组更新可观察数组来完成此操作：

```
var viewModel = {
    instances: ko.observableArray([
    new Instance(1, "Zed"),
    new Instance(2, "Jane"),
    new Instance(3, "John"),
    new Instance(4, "Anne"),
    new Instance(5, "Ted")])
};

viewModel.sort = function () {
    var unsorted = viewModel.instances();

    viewModel.instances(unsorted.sort(viewModel.sortFunction));
};

viewModel.sortFunction = function (a, b) {
    return a.FirstName().toLowerCase() > b.FirstName().toLowerCase() ? 1 : -1;
}; 
```

然后您可以创建一个按钮，在单击时对数组进行排序：

```
<button data-bind="click: sort">Sort</button> 
```

**示例：http:** [//jsfiddle.net/CCNtR/24/](http://jsfiddle.net/CCNtR/24/)

# ms-access - 如何跟踪正在运行的程序

> ID：16180982
> 
> 赞同：2
> 
> 时间：2013-04-23T23:39:51.873
> 
> 标签：ms-access, ms-access-2010

问题：
有没有办法跟踪在打开表单期间发生的对子程序和函数的所有调用（有点像历史的“调用堆栈”）？我对在填充控件的查询中调用的函数不感兴趣，只对表单或控件级别的函数感兴趣。

背景：
我的表单加载时间比我认为的要长得多。我认为一些事件过程运行多次以响应控件被请求和特定的“on_click”过程被调用。

我在表单的 VBA 中的每个子和函数的开头插入了以下代码：

```
sProcList = sProcList & "lstContacts_Click" & nl 
```

在哪里：

*   `sProcList`是一个全局字符串变量
*   `"lstContacts_Click"`是字符串形式的子/函数的名称
*   `nl`在功能上是`vbCRLF`

当我在表单完全打开后检查变量时，sProcList 是这样的：

```
Form_Open
ChangeSortOrder 1
lstContacts_Click 
```

这实际上是我想要发生的事情，但我不相信这是准确的。我不知道更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T00:45:37.970

由于性能是一个问题，因此您需要一些更强大的东西，它不仅可以跟踪子例程名称，还可以跟踪在这些子例程中花费的时间。这将导致您找到最大的违规者，然后您可以通过在这些例程中的代码段周围添加计时器来磨练。几年前，我受雇修复新开发的 Access 数据库的性能，该数据库已交付给 70 多个国家/地区，但在某些条件下响应时间约为 2 分钟。简而言之，我做了以下事情（我将跳过完整的描述）： 1\. 创建了一个表，其中包含用于存储“开始或结束”模块名称、子例程、日期、计时器、已用时间、字节发送、接收、I/O 等的字段。 2\. 设计了一个可以打开所有包含代码的表单（Forms、Reports、Modules）；提供选择所需对象的能力。3\. 除非被排除在外，代码被自动插入到子例程的顶部以记录“开始”记录，并且无论您在哪里可以退出它都会记录一个“结束”。该表单足够智能，可以自定义代码以捕获对象名称和子例程名称。4\. 增加了一个子程序来处理开始/结束记录并计算时间、字节、I/O。作为一个简单的解决方案，您可以： 1\. 添加子程序 StartTimer 变量以保存 Timer 2\. 在 Sub 顶部，将 Timer 保存到 StartTimer 3\. 添加 Debug.print 'Start XYZ ' & StartTimer 4\. 在退出点 Calc Timer - StartTimer和 debug.print 经过的时间。5\. 也可以只写行到一些文本文件。该表单足够智能，可以自定义代码以捕获对象名称和子例程名称。4\. 增加了一个子程序来处理开始/结束记录并计算时间、字节、I/O。作为一个简单的解决方案，您可以： 1\. 添加子程序 StartTimer 变量以保存 Timer 2\. 在 Sub 顶部，将 Timer 保存到 StartTimer 3\. 添加 Debug.print 'Start XYZ ' & StartTimer 4\. 在退出点 Calc Timer - StartTimer和 debug.print 经过的时间。5\. 也可以只写行到一些文本文件。该表单足够智能，可以自定义代码以捕获对象名称和子例程名称。4\. 增加了一个子程序来处理开始/结束记录并计算时间、字节、I/O。作为一个简单的解决方案，您可以： 1\. 添加子程序 StartTimer 变量以保存 Timer 2\. 在 Sub 顶部，将 Timer 保存到 StartTimer 3\. 添加 Debug.print 'Start XYZ ' & StartTimer 4\. 在退出点 Calc Timer - StartTimer和 debug.print 经过的时间。5\. 也可以只写行到一些文本文件。StartTimer 4\. 在退出点 Calc Timer - StartTimer 和 debug.print 经过的时间。5\. 也可以只写行到一些文本文件。StartTimer 4\. 在退出点 Calc Timer - StartTimer 和 debug.print 经过的时间。5\. 也可以只写行到一些文本文件。

# c# - MongoDB如何处理投影

> ID：16180983
> 
> 赞同：0
> 
> 时间：2013-04-23T23:39:56.560
> 
> 标签：c#, mongodb

我将在一个文档中有数百个字段。如果我只需要给定文档中的一个或两个字段 - MongoDB 是否会通过网络传输整个文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T23:57:55.710

投影是在服务器端处理的，因此只有查询投影中包含的字段才会通过网络传输。

在 C# 驱动程序中，这是通过[`SetFields`](http://api.mongodb.org/csharp/current/html/99952427-4632-237f-fd90-8bfdc8a9e7ea.htm)on 方法完成的`MongoCursor`。

# c# - 从 asp.net 访问 iis 文件夹中的文件

> ID：16180984
> 
> 赞同：1
> 
> 时间：2013-04-23T23:40:08.703
> 
> 标签：c#, asp.net, iis

我使用 C# 尝试将文件保存到 iis“临时”文件夹路径，它可以在本地工作，但是当我发布应用程序并从另一台计算机访问它时，它使用完整路径 (C:/....) 并且找不到它在寻找本地目录时，我该如何解决？

```
(Server.MapPath("~/TEMP/") + filename); // code to savefile 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T23:45:46.107

你可以做的一个很好的改进是：

`appSetting`1) 为您的应用程序 Web 配置添加绝对路径，例如：`\\MachineName\ShareName`

2）在机器 MachineName 上创建 ShareName 网络共享（这可能是您发布应用程序的服务器或另一台服务器，取决于您的需要）

3) 允许 IIS 用户或应用程序池的身份用户以读写方式访问共享：`\\MachineName\ShareName`

4）编辑上面的代码以执行以下操作：

```
Path.Combine(sharePath, filename); 
```

哪里`sharePath`是使用 web.config 的 appSetting 中的值初始化的字符串`ConfigurationManager.AppSetting["settingName"]`

# python - 每次我在一个类中调用一个函数时增加计数器

> ID：16180986
> 
> 赞同：0
> 
> 时间：2013-04-23T23:40:38.367
> 
> 标签：python, matplotlib

我有一个有很多绘图功能的类。我的意图是使用 matplotlib 的 subplot 方法将所有图分组到一张图像中，具体取决于我调用了多少个函数。

我尝试了类似以下的方法（这是我的程序的简短版本），但我不知道为什么不起作用。

任何帮助表示赞赏。提前致谢。

```
import itertools
import numpy as np
from matplotlib import pyplot as plt

class Base(object):
    def __init__(self, a, multiPlot=True, numColGraph=None, numRowGraph=None,
                 figSize=None, DPI=None, num=None):

        self.a = a
        self.x = np.linspace(0, 5)

        if multiPlot:
        self.nCG = numColGraph
            self.nRG = numRowGraph
        else:
            self.nCG = 1
            self.nRG = 1

        if figSize and DPI:
            self.thePlot = plt.figure(figsize=figSize, dpi=DPI)

        if num == 0:
            self.plotId = itertools.count(1)

    def createPlot1(self):
        y = self.x**(a/2)
        self.thePlot.add_subplot(self.nRG, self.nCG, next(self.plotId))
        plt.plot(self.x, y, label=str(self.a)+'/2')

    def createPlot2(self):
        y = self.x**a
        self.thePlot.add_subplot(self.nRG, self.nCG, next(self.plotId))
        plt.plot(self.x, y, label=self.a)

    def createPlot3(self):
        y = self.x**(2*a)
        self.thePlot.add_subplot(self.nRG, self.nCG, next(self.plotId))
        plt.plot(self.x, y, label=str(self.a)+'*2')

if __name__ == "__main__":

    A = np.linspace(0, 2, 5)

    for i, a in enumerate(A):
        Instance = Base(a, numColGraph=3, numRowGraph=len(A),
                 figSize=(12,10), DPI=100, num=i)
        Instance.createPlot1()
        Instance.createPlot2()
        Instance.createPlot3()

    plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:09:33.680

至少，您有未定义的变量。我看到这种模式（或类似的东西）三次：

```
y = self.x**(2*a) 
```

但在这些情况下，您都没有定义`a`. 也许你的意思是：

```
y = self.x**(2*self.a) 
```

# macos - 创建 shell 脚本以设置文件夹操作

> ID：16180999
> 
> 赞同：0
> 
> 时间：2013-04-23T23:41:35.473
> 
> 标签：macos, shell, action, directory

是否可以创建一个可以在 Mac OS X 中启用和设置文件夹操作脚本的 shell 脚本？我需要该脚本，以便可以将其添加到包中以部署到多台计算机。我曾尝试在线搜索，但似乎找不到任何关于这是否可能的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T00:02:33.513

`osascript` is the command to use-:

```
osascript applescript-file 
```