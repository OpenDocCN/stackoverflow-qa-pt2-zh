# StackOverflow 问答 13275000-13275999

# git - 你如何使用 git-cache-meta？

> ID：13275000
> 
> 赞同：9
> 
> 时间：2012-11-07T17:30:51.227
> 
> 标签：git, metadata, file-permissions

我想将目录的权限保留在 git 存储库中。似乎一种简单的方法是使用`git-cache-meta`. 什么是其使用的示例和最小解释？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T06:26:57.920

如果您指的是 的[这个](https://gist.github.com/andris9/1978266)实现`git-cache-meta`，那么您需要做的就是确保脚本在您的 $PATH 中（放入`/usr/local/bin/`或类似的）并转到您想要的 repo，然后运行：

```
$ git-cache-meta --store 
```

这会将元数据存储在`.git_cache_meta`以 rep 命名的文件中。然后在 repo 的另一个实例上，运行：

```
$ git-cache-meta --apply 
```

# php - 无法访问 PHP 中的 JSON 元素

> ID：13275004
> 
> 赞同：-1
> 
> 时间：2012-11-07T17:31:00.367
> 
> 标签：php, json, sqlite

在 sqlite 查询后访问 JSON 元素时遇到问题。

我有以下代码：

```
$queryIdClient = "SELECT seq FROM sqlite_sequence WHERE name = 'clientes';";
$id;

if($result = $db->query($queryIdClient)) {
    $row = $result->fetch(PDO::FETCH_ASSOC);
    $row = json_encode($row);
    echo $row;
}
else {
    die($error);
} 
```

这`echo $row`给了我{“seq”：“10”}。

我想将值 10 传递给 $id 变量。我已经尝试了很多方法，但我无法让它工作。

它不应该与它一起工作`$id = $row->seq;`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:38:13.047

那里不需要 json_encode() ：

```
$queryIdClient = "SELECT seq FROM sqlite_sequence WHERE name = 'clientes';";
$id;

if($result = $db->query($queryIdClient)) {
    $row = $result->fetch(PDO::FETCH_ASSOC);
    // $row = json_encode($row);
    $id = $row['seq'];
    echo $id;
}
else {
    die($error);
} 
```

# android - ContentResolver - 如何从 Uri 获取文件名

> ID：13275007
> 
> 赞同：19
> 
> 时间：2012-11-07T17:31:08.400
> 
> 标签：android, android-contentresolver

我用[Intent](http://developer.android.com/reference/android/content/Intent.html) [ACTION_GET_CONTENT](http://developer.android.com/reference/android/content/Intent.html#ACTION_GET_CONTENT)调用[startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)。[一些应用程序使用此Uri](http://developer.android.com/reference/android/net/Uri.html)返回数据：

*内容：//媒体/外部/图像/媒体/18122*

我不知道它是图像还是视频或一些自定义内容。如何使用[ContentResolver](http://developer.android.com/reference/android/content/ContentResolver.html)从此 Uri 获取实际的文件名或内容标题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-04-24T13:35:53.413

@Durairaj 的答案特定于获取文件的**路径**。如果您要搜索的是文件的实际名称（因为您应该使用内容解析，此时您可能会得到很多 content:// URI），您需要执行以下操作：

（代码从 Durairaj 的答案复制并修改）

```
 String[] projection = {MediaStore.MediaColumns.DISPLAY_NAME};
        Cursor metaCursor = cr.query(uri, projection, null, null, null);
        if (metaCursor != null) {
            try {
                if (metaCursor.moveToFirst()) {
                    fileName = metaCursor.getString(0);
                }
            } finally {
                metaCursor.close();
            }
        } 
```

这里要注意的主要部分是我们正在使用`MediaStore.MediaColumns.DISPLAY_NAME`，它返回内容的实际名称。您也可以尝试`MediaStore.MediaColumns.TITLE`，因为我不确定有什么区别。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-07T17:48:26.183

您可以通过修改投影从此代码或任何其他字段中获取文件名

```
String[] projection = {MediaStore.MediaColumns.DATA};

ContentResolver cr = getApplicationContext().getContentResolver();
Cursor metaCursor = cr.query(uri, projection, null, null, null);
if (metaCursor != null) {
    try {
        if (metaCursor.moveToFirst()) {
            path = metaCursor.getString(0);
        }
    } finally {
        metaCursor.close();
    }
}
return path; 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-09-12T07:36:04.653

要获取文件名，您可以使用新的[DocumentFile](https://developer.android.com/reference/android/support/v4/provider/DocumentFile)格式。

```
DocumentFile documentFile = DocumentFile.fromSingleUri(this, data.getdata());
String fileName = documentFile.getName(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-13T16:49:28.587

对于任何使用 Kotlin 且有同样问题的人，您可以定义一个扩展方法来一举获取文件名和大小（以字节为单位）。如果无法检索字段，则返回 null。

```
fun Uri.contentSchemeNameAndSize(): Pair<String, Int>? {
    return contentResolver.query(this, null, null, null, null)?.use { cursor ->
        if (!cursor.moveToFirst()) return@use null

        val name = cursor.getColumnIndex(OpenableColumns.DISPLAY_NAME)
        val size = cursor.getColumnIndex(OpenableColumns.SIZE)

        cursor.getString(name) to cursor.getInt(size)
    }
} 
```

如此使用它

```
val nameAndSize = yourUri.contentNameAndSize()
// once you've confirmed that is not null, you can then do
val (name, size) = nameAndSize 
```

它*可能会*引发异常，但对我来说从来没有这样做过（只要 URI 是有效的`content://`URI）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-19T09:31:14.023

```
private static String getRealPathFromURI(Context context, Uri contentUri)
{
    String[] proj = { MediaStore.Images.Media.DATA };
    CursorLoader loader = new CursorLoader(context, contentUri, proj, null, null, null);
    Cursor cursor = loader.loadInBackground();
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    String result = cursor.getString(column_index);
    cursor.close();
    return result;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-13T19:01:24.643

## 接受的答案不完整。还有更多的支票被遗漏了。

这是我在阅读了这里提供的所有答案以及一些 Airgram 在他们的 SDK 中所做的事情后得出的结论——我在 Github 上开源的一个实用程序：

[https://github.com/mankum93/UriUtilsAndroid/tree/master/app/src/main/java/com/androiduriutils](https://github.com/mankum93/UriUtilsAndroid/tree/master/app/src/main/java/com/androiduriutils)

## 用法

像调用一样简单，`UriUtils.getDisplayNameSize()`. 它提供内容的名称和大小。

**注意：**仅适用于 content:// Uri

下面是代码的一瞥：

```
/**
 * References:
 * - https://www.programcreek.com/java-api-examples/?code=MLNO/airgram/airgram-master/TMessagesProj/src/main/java/ir/hamzad/telegram/MediaController.java
 * - https://stackoverflow.com/questions/5568874/how-to-extract-the-file-name-from-uri-returned-from-intent-action-get-content
 *
 * @author Manish@bit.ly/2HjxA0C
 * Created on: 03-07-2020
 */
public final class UriUtils {

    public static final int CONTENT_SIZE_INVALID = -1;

    /**
     * @param context context
     * @param contentUri content Uri, i.e, of the scheme <code>content://</code>
     * @return The Display name and size for content. In case of non-determination, display name
     * would be null and content size would be {@link #CONTENT_SIZE_INVALID}
     */
    @NonNull
    public static DisplayNameAndSize getDisplayNameSize(@NonNull Context context, @NonNull Uri contentUri){

        final String scheme = contentUri.getScheme();
        if(scheme == null || !scheme.equals(ContentResolver.SCHEME_CONTENT)){
            throw new RuntimeException("Only scheme content:// is accepted");
        }

        final DisplayNameAndSize displayNameAndSize = new DisplayNameAndSize();
        displayNameAndSize.size = CONTENT_SIZE_INVALID;

        String[] projection = new String[]{MediaStore.Images.Media.DATA, OpenableColumns.DISPLAY_NAME, OpenableColumns.SIZE};
        Cursor cursor = context.getContentResolver().query(contentUri, projection, null, null, null);
        try {
            if (cursor != null && cursor.moveToFirst()) {

                // Try extracting content size

                int sizeIndex = cursor.getColumnIndex(OpenableColumns.SIZE);
                if (sizeIndex != -1) {
                    displayNameAndSize.size = cursor.getLong(sizeIndex);
                }

                // Try extracting display name
                String name = null;

                // Strategy: The column name is NOT guaranteed to be indexed by DISPLAY_NAME
                // so, we try two methods
                int nameIndex = cursor.getColumnIndex(OpenableColumns.DISPLAY_NAME);
                if (nameIndex != -1) {
                    name = cursor.getString(nameIndex);
                }

                if (nameIndex == -1 || name == null) {
                    nameIndex = cursor.getColumnIndex(MediaStore.Images.Media.DATA);
                    if (nameIndex != -1) {
                        name = cursor.getString(nameIndex);
                    }
                }
                displayNameAndSize.displayName = name;
            }
        }
        finally {
            if(cursor != null){
                cursor.close();
            }
        }

        // We tried querying the ContentResolver...didn't work out
        // Try extracting the last path segment
        if(displayNameAndSize.displayName == null){
            displayNameAndSize.displayName = contentUri.getLastPathSegment();
        }

        return displayNameAndSize;
    }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-12-13T02:07:39.737

您可以使用 Durairaj 提出的解决方案，并将以下内容作为投影数组：

```
String[] projection = { "_data" }; 
```

# bash - 使用 Bash 将当前目录保存在变量中？

> ID：13275013
> 
> 赞同：147
> 
> 时间：2012-11-07T17:31:53.953
> 
> 标签：bash, variables, directory

我要做的是找到当前工作目录并将其保存到一个变量中，这样我就可以运行`export PATH=$PATH:currentdir+somethingelse`. 我不完全确定他们是否有一个默认包含 cwd 的变量。

如何使用 Bash 将当前目录保存在变量中？

* * *

## 回答 #1

> 赞同：238
> 
> 时间：2012-11-07T17:34:37.147

这会将当前工作目录的绝对路径保存到变量中`cwd`：

```
cwd=$(pwd) 
```

在你的情况下，你可以这样做：

```
export PATH=$PATH:$(pwd)+somethingelse 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-10-15T14:12:22.723

我的 .bash_profile 中有以下内容：

```
function mark {
    export $1=`pwd`;
} 
```

所以任何时候我想记住一个目录，我都可以输入，例如*标记那里*。

然后当我想回到那个位置时，我只需输入*cd $there*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-10-29T14:33:10.567

当前工作目录变量，即完整路径 /home/dev/other

```
dir=$PWD 
```

打印完整路径

```
echo $dir 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-07T17:37:24.273

对于一个**相对**的答案，使用`.`

测试：

```
$ myDir=.
$ ls $myDir
$ cd /
$ ls $myDir 
```

第一个`ls`将显示当前目录中的所有内容，第二个将显示根目录 ( `/`) 中的所有内容。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-07T20:54:16.927

你的作业有一个额外的`$`：

```
export PATH=$PATH:${PWD}:/foo/bar 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-10-08T08:41:16.463

在 BASH shell 上，您可以**非常简单地**运行：

```
export PATH=$PATH:`pwd`/somethingelse 
```

无需将当前工作目录保存到变量中...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-08T08:34:11.013

另一种变体：

```
export PATH=$PATH:\`pwd`:/foo/bar 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-17T07:47:29.257

您可以使用 shell in-build variable `PWD`，如下所示：

```
export PATH=$PATH:$PWD+somethingelse 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-05T14:04:24.807

类似于`mark`通过一些变量检查的解决方案。此外，我更喜欢不使用`$variable`，而是使用我保存在下面的相同字符串

使用 save dir 保存您的文件夹/目录`sdir myproject`，然后使用 goto dir 返回该文件夹`gdir myproject`

另外检查本机的工作，`pushd and popd`他们将保存当前文件夹，这对于来回移动很方便。在这种情况下，您也可以使用`popd`after`gdir myproject`并再次返回

```
# Save the current folder using sdir yourhandle to a variable you can later access the same folder fast using gdir yourhandle

function sdir {
    [[ ! -z "$1" ]] && export __d__$1="`pwd`";
}
function gdir {
    [[ ! -z "$1" ]] && cd "${!1}";
} 
```

另一个方便的技巧是将两个 pushd/popd 和 sdir 和 gdir 组合起来，以便在 pushd 的 goto dir 函数中替换 cd。这使您在跳转到保存的文件夹时也可以飞回上一个文件夹。

```
# Save the current folder using sdir yourhandle to a variable you can later access the same folder fast using gdir yourhandle

function sdir {
    [[ ! -z "$1" ]] && export __d__$1="`pwd`";
}
function gdir {
    [[ ! -z "$1" ]] && pushd "${!1}";
} 
```

# c - C 预处理器文字构造

> ID：13275015
> 
> 赞同：14
> 
> 时间：2012-11-07T17:32:00.880
> 
> 标签：c, c-preprocessor

我的问题如下：

我有一个像这样宏编辑的字符串文字

```
#define TITLE "Title" 
```

但是在某些情况下，我需要传入该字符串的宽字符变体。我希望能够传递`L"Title"`给这些函数。所以很自然地，我开始尝试`W_TITLE`用`TITLE`.

但我没有运气，我所有的方法（如下所列）都失败了。请告诉我这样的魔法是如何实现的。

我试过

```
#define W_TITLE L##TITLE
#define W_TITLE #L TITLE
#define W_TITLE ##L TITLE 
```

但他们都失败了……

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T17:33:50.503

试试这个：

```
#define WIDEN_(exp)   L##exp
#define WIDEN(exp)    WIDEN_(exp)
#define TITLE         "Title"
#define W_TITLE       WIDEN(TITLE) 
```

您需要通过中间宏强制扩展以获得所需的内容。

```
#include <stdio.h>

#define WIDEN_(exp)   L##exp
#define WIDEN(exp)    WIDEN_(exp)
#define TITLE         "Title"
#define W_TITLE       WIDEN(TITLE)

int main(int argc, char *argv[])
{
    printf("%s\n", TITLE);
    wprintf(L"%ls\n", W_TITLE);
    return 0;
} 
```

结果：

```
Title
Title 
```

# ms-access - 访问版本维护

> ID：13275018
> 
> 赞同：1
> 
> 时间：2012-11-07T17:32:05.793
> 
> 标签：ms-access

我有一个访问数据库（访问 2010），其中一些人每天通过表单输入数据。我也在努力开发新的表格和新的查询。问题是我正在开发一个表单，当我将它放在当前版本的数据库中时，正在输入更多数据，因此失去了一致性。有没有办法可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:38:30.777

Access 数据库应始终拆分为用于数据的后端和用于表单的前端等。然后将后端表链接到前端。（[如何拆分数据库](http://office.microsoft.com/en-ie/access-help/split-an-access-database-HA010342026.aspx)，拆分数据库的[原因](http://www.techrepublic.com/blog/10things/10-reasons-to-split-an-access-database/1119)）

每个用户都会获得一份前端的副本，而后端驻留在所有人都可以访问的计算机上。

在前端的副本上进行开发，完成后，重新链接表并将新版本分发给每个用户（[前端维护](http://autofeupdater.com/)）。

# javascript - Javascript不断重复输出

> ID：13275022
> 
> 赞同：0
> 
> 时间：2012-11-07T17:32:12.080
> 
> 标签：javascript, jquery, jquery-mobile

我的代码有一个小而奇怪的问题。基本上我有一个页面，当它被调用时它运行一个函数并显示一个列表。

```
function showlist (arg) {

var len = arg;
if (len == 0) {
    $('#adminlist').empty();
    $('#adminlist').append('<li>No records found!</li>')
    $('#adminlist').append('<li><a id="newadmin">Add New..</a></li>')
            $('#adminlist').listview("refresh");
} else {
    // some other list

}; 
```

};

该列表有一个 if 子句，如果“长度为 0”则显示一个列表，如果它的其他内容显示另一个列表。

我有一个 Jquery Mobile Popup，它是通过单击列表中的一项来触发的。

```
$("#newadmin").on('click', function(event) {

    $("#adminname").val("");
    $("#popupNewAdmin").popup({overlayTheme: "a"});
    $("#popupNewAdmin").popup("open")

    $( "#save_new_admin_btn" ).on('click', function(){
        var newadminname = $("#adminname").val();
        var newadminnametrim = $.trim(newadminname);

        console.log('New Admin Name: ' + newadminnametrim);
    }) 
```

});

触发时，弹出窗口会清除输入文本框，当我单击“save_new_admin_btn”按钮时，它会在控制台上输出文本框中的文本。

问题是，如果我在单击按钮几次后关闭关闭并重新打开弹出窗口，下次单击该按钮时它会输出大量条目。

我希望我让自己足够清楚。

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:36:47.900

问题是您每次单击#newadmin 时都会添加一个事件处理程序

如果在单击#newadmin 之前不显示保存按钮，则将第二个事件置于范围之外并为其提供更高的选择器。

```
$("#newadmin").on('click', function(event) {

    $("#adminname").val("");
    $("#popupNewAdmin").popup({overlayTheme: "a"});
    $("#popupNewAdmin").popup("open")

});

$( document ).on('click', "#save_new_admin_btn",  function(){
        var newadminname = $("#adminname").val();
        var newadminnametrim = $.trim(newadminname);

        console.log('New Admin Name: ' + newadminnametrim);
    }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:38:09.297

您正在嵌套您的事件..将内部点击事件移到外部..而且您似乎动态添加元素..因此通过将事件附加到静态父容器来**委托此类事件。**

```
$("body").on('click',"#newadmin", function(event) {

    $("#adminname").val("");
    $("#popupNewAdmin").popup({overlayTheme: "a"});
    $("#popupNewAdmin").popup("open")
});

$( "body" ).on('click',"#save_new_admin_btn", function(){
        var newadminname = $("#adminname").val();
        var newadminnametrim = $.trim(newadminname);

        console.log('New Admin Name: ' + newadminnametrim);
    }) 
```

# java - 如何在运行时设置 textview 位置常量？

> ID：13275023
> 
> 赞同：0
> 
> 时间：2012-11-07T17:32:12.820
> 
> 标签：java, android

我正在尝试显示一些在运行时可见的文本视图。这是我的代码：

```
for (int i=0; i<arrBool.length; i++) {
    arrBool[i] = r.nextBoolean();
        if(arrBool[i]==true) {                  
            textView[i].setVisibility(View.VISIBLE);
 }
} 
```

当我运行应用程序时，文本视图应该随机可见。它正在工作，但我的问题是我已经设置了这些文本视图的布局。当我运行 Android 应用程序时，可见的文本视图会转到左上角并丢失布局位置。

如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:39:56.173

将视图的开始可见性参数更改为`View.INVISIBLE` 它将在布局上保留自己的位置，并防止其他视图占据该位置，这是正常情况下的行为`View.GONE`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:48:34.390

为 teoREtik 解决方案添加更多内容。

在您的布局中不要指定 android:visible 属性。

```
for (int i=0; i<arrBool.length; i++) {
    arrBool[i] = r.nextBoolean();
    if(arrBool[i]==true) {                  
        textView[i].setVisibility(View.VISIBLE);
    else 
        textView[i].setVisibility(View.INVISIBLE);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T04:33:13.043

我认为使用 FOR 循环不会帮助您在每次打开时随机显示可见文本视图。为什么不直接使用整数（0 表示假，1 表示真）和这样的*随机*数：

```
Random rnd = new Random(1);  // --> This will randomize numbers up to one;
int enable =  rnd.nextInt(); // --> Get the random value from 0 to 1

if(enable == 1) // --> If visibility of the text field is enabled everytime you opened the app...
{
      textView.setVisibility(View.VISIBLE);
} else {
      textView[i].setVisibility(View.INVISIBLE);
} 
```

[您可以通过访问此示例在“如何在 Android 中生成特定范围内的随机数？](https://stackoverflow.com/questions/6029495/how-can-i-generate-random-number-in-specific-range-in-android) ”主题中进行更多修改并试验整数值的随机化器。检查所有可能的答案。不要介意绿色复选标记，并通过调查其评论来关注这些已回答的代码。我确信所有这些关于“随机”主题的答案，我给你的链接，都保证有效。

关于布局，我建议不要使用相对布局，而是使用线性布局，因为使用线性布局会按比例保持在原始位置，因为相对布局是屏幕分辨率取决于坐标。还可以尝试练习操纵 res 文件夹下的字符串值尺寸，以在不同的屏幕分辨率（从 HVGA 到 WVGA）中保持文本的大小成比例。有关文本大小比例的更多详细信息，请查看“[不同屏幕尺寸的不同字体大小”。](https://stackoverflow.com/questions/4713812/different-font-sizes-for-different-screen-sizes)

# c# - 调试 COM 对象和 RCW 的问题

> ID：13275024
> 
> 赞同：0
> 
> 时间：2012-11-07T17:32:16.907
> 
> 标签：c#, debugging

在我的 C# WinForms 应用程序中，我有一个子应用程序，它使用旧的 VB 6.0 或 VC 6.0 ActiveX 控件作为文本编辑器（如果您使用过 TXTextControl 的旧 ActiveX 版本）。在 VS IDE 中，当我关闭具有此 activeX 控件的子应用程序然后关闭主应用程序时，我收到此错误：

![在此处输入图像描述](../Images/aabb5691317b30a61426b68aed69230e.png)

您建议使用哪些技术和想法来深入研究并发现正在发生的事情？如果我在 VS IDE 之外运行我的应用程序，则不会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:36:23.690

关于如何将 COM 对象与 RCW 分离有多种可能性，但我不确定为什么这只会发生在 VS 调试器中。

1.  您必须保留对 ActiveX\RCW 类的引用。（此外，如果您将引用保留为静态变量，我会看到问题，因此我建议不要将其保留在静态变量中）。例如：确保`TXTextControl txControl = new TXTextControlClass();`在`txContol`应用程序期间拥有引用并且在范围内
2.  在应用程序关闭或托管 AX 控件的表单被释放之前，您可能希望添加手动清理代码，并可能在持有 RCW 引用的类上实现 IDisposable。
3.  如果您已将任何事件处理程序附加到 AX 控件，请确保它们在关闭 RCW 引用和应用程序之前退出。您可能还想手动分离处理程序。

# foreign-keys - Cakephp 显示与外键关联的其他模型

> ID：13275031
> 
> 赞同：1
> 
> 时间：2012-11-07T17:32:42.530
> 
> 标签：foreign-keys, cakephp-2.0

我有具有 HABTM 关系的模型 Item 和 Actor ***（工作正常）***。

现在，我添加了**Role 模型**，其中包含 actorid、itemid（作为外键）和演员的角色。

在我的项目视图中，我想显示演员及其角色。我设置了递归= 2。

当我调试 $items 时，我会收到属于该参与者的所有角色。 **相反，我只想显示包含查看的 itemid 和 actorid 的角色。**

我相信我可能需要调整我的模型，但不知道如何.. 有什么建议吗？

**项目型号**

```
public $hasAndBelongsToMany  = array( 
            'Actor' => array(
            'className' => 'Actor',
            'joinTable' => 'item2actor',
            'foreignKey' => 'item_id',
            'associationForeignKey' => 'actor_id',
            'unique' => 'true'
));
public $hasMany = array(
            'Role' => array(
            'className' => 'Role',
            'foreignKey' => 'actorid',  
)); 
```

**演员模型**

```
public $hasAndBelongsToMany  = array(
        'Item' => array(
            'className' => 'Item',
            'joinTable' => 'item2actor',
            'foreignKey' => 'actor_id',
            'associationForeignKey' => 'item_id',
            'unique' => 'true'));
public $hasMany = array(
         'Role' => array(
            'className' => 'Role',
            'foreignKey' => 'actorid',  
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T14:24:28.690

我建议不要使用 -very large- 查询和递归，而是使用 Containable 行为，这样更容易维护要从 DB 接收的数据。

[http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html) @蛋糕书。

# javascript - 正则表达式：仅限字母、数字、空格、连字符、句点和下划线，并且必须以字母开头

> ID：13275034
> 
> 赞同：1
> 
> 时间：2012-11-07T17:32:55.013
> 
> 标签：javascript, regex, keyfilter

经过几个教程后，我以为我有这个，但不——

我试图只匹配一串字母、数字、空格、连字符、句点和下划线，并且必须以 jquery 函数中的字母开头

这是我在教程之后想出的，但它只接受字母：

```
/^[a-z][a-z0-9_ .-]*?/i 
```

请帮忙！

++编辑++

这是我尝试使用的代码：

```
$('input[name=albumName]').keyfilter(/^[a-z][a-z0-9_ .-]*?/i); 
```

用户输入的名称也将在 URL 中使用，因此我想限制他们的输入。我希望允许这样做（Texas AandM - 2012），但不允许这样做（2012 - Texas A&M）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:43:56.093

你的正则表达式对我来说看起来不错。也许周围的代码而不是正则表达式有问题？这是一个 Python 示例：

```
s_re = re.compile('^[a-z][a-z0-9_.-]*',re.I) # case insensitive match

In [12]: if s_re.match('A'): print 'match'
match

In [14]: if s_re.match('A.-'): print 'match'
match

In [15]: if s_re.match('1.-'): print 'match'

In [16]: if s_re.match('1_.-'): print 'match'

In [17]: if s_re.match('A_.-'): print 'match'
match 
```

如果您想确保在第一个字母之后至少需要一个字符，您可以将 替换为`*`a `+`，或者`{2,}`至少再多 2 个字符，或者`{2,5}`2 到 5 个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:46:22.133

`^[a-z][a-z0-9_ .-]*`作品。

由于问号，正则表达式只匹配字母，因为匹配是最小的匹配。

[参考/正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp#Special_characters_in_regular_expressions)

# android - 如何在可扩展列表视图中对子项进行持久更改？

> ID：13275036
> 
> 赞同：0
> 
> 时间：2012-11-07T17:32:57.103
> 
> 标签：android, expandablelistview, expandablelistadapter

所以我一直在尝试使用可扩展列表视图作为我的应用程序的优雅界面，但我一直无法从中提取所需的行为。当我单击一个孩子时，我可以将其背景更改为不同的颜色，或者将文本更改为不同的颜色，甚至更改文本本身。但是，当我滚动（这样孩子离开可视区域）或折叠/展开组时，我经常做的任何更改都会消失。

那么，我该如何对孩子做出这些改变并让他们坚持下去呢？谢谢。

更新：重写 ExpandableListAdapter 的 getChildView() 方法以对子视图进行适当的更改结果工作得很好（即使没有适配器的 notifyDataSetChanged() 方法）。我的问题是一个愚蠢的状态切换（我把它们放在 onChildClick 中，但在 getChildView 中倒退）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:53:59.500

您需要将全局变量中的更改保留在：

```
 public void onGroupCollapsed(int groupPosition) {
 { 
```

然后从变量中读取它们并将它们分配给您的视图

```
 public void onGroupExpend (int groupPosition) {
 } 
```

或者当孩子被创建时：

```
public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
// assign new values / changes to your views before you return this view

return v;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:57:40.230

android 上的列表视图利用了一种非常重要的技术`convertview`，当视图在滚动过程中离开屏幕时，它会被放在屏幕上的其他位置，数据部分会发生变化。它使我们无法进行 1000 次观看，而是一次在屏幕上观看 7 或 8 次。但是这些视图不能方便地返回到您想要的位置，这意味着您需要指定每个位置的内容，而不是让这种情况隐式发生。

那么，如何兑现呢？制作一个数组列表或任何类型的列表，以保存您的颜色状态、文本状态，并使用任意方法标记它们（在整数数组列表中红色等于 3 或在字符串数组列表中为红色 =“红色”）。然后很简单，在`getView()`你指定如果arraylist中的相应位置说什么，做某事。但是您还需要调用`notifydatasetchanged()`以刷新列表视图。我建议你把它放在一些 onclicklistener 或其他东西中，因为如果它在 getView() 中没有边界，它会被*不必要*地调用。

下一次，你给我看代码，我给你看代码，否则没人愿意帮你。这被不必要地 问了*很多。*

# python - python分段错误通过ctypes使用pcap

> ID：13275038
> 
> 赞同：1
> 
> 时间：2012-11-07T17:33:09.697
> 
> 标签：python, macos, segmentation-fault, ctypes, pcap

我正在通过 ctypes 使用 libpcap 将我的嗅探器从 C 移植到 Python。这是python代码：

```
import ctypes, sys
from ctypes.util import find_library

if sys.platform == "darwin":
    _pcap = ctypes.cdll.LoadLibrary(find_library("libpcap"))
elif sys.platform == "linux2":
    _pcap = ctypes.cdll.LoadLibrary("libpcap.so")

errbuf = ctypes.create_string_buffer(256)

pcap_lookupdev = _pcap.pcap_lookupdev
pcap_lookupdev.restype = ctypes.c_char_p
dev = pcap_lookupdev(errbuf)
print dev

# create handler
pcap_create = _pcap.pcap_create
handle = pcap_create(dev, errbuf)
print handle
if not handle:
    print "failed creating handler:",errbuf
    exit()

# monitor mode
pcap_can_set_rfmon = _pcap.pcap_can_set_rfmon
print "can rfmon:",pcap_can_set_rfmon(handle) 
```

在 Linux 上它工作得很好，但在 Mac OS X 上，当我使用句柄时它会遇到分段错误。handle even 的值有时为负，有时为正。我已经尝试将 pcap_create 的返回类型更改为 unsigned int，但这并没有帮助，但我认为它在 OS X 下返回了错误的类型......

我`printf("size of pcap_t: %zu\n", sizeof(pcap_t *));`在 C 中的两个系统上都做了一个以获得 pcap_t 处理程序类型的大小。在 Linux 上它说 4，在 OS X 8 上。但我不知道如何从这一点继续......

还是我走错了路？有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T19:34:20.847

数据类型很重要。

你需要告诉 ctypes 的返回值`pcap_create()`是一个指针，你需要告诉它 to 的参数`pcap_can_set_rfmon()`是一个指针。

你这样做

```
# create handler
pcap_create = _pcap.pcap_create
pcap_create.restype = ctypes.c_void_p
handle = pcap_create(dev, errbuf)
print handle
if not handle:
    print "failed creating handler:",errbuf
    exit()

# monitor mode
pcap_can_set_rfmon = _pcap.pcap_can_set_rfmon
pcap_can_set_rfmon.argtypes = [ctypes.c_void_p]
print "can rfmon:",pcap_can_set_rfmon(handle) 
```

这

```
pcap_create.restype = ctypes.c_void_p 
```

和

```
pcap_can_set_rfmon.argtypes = [ctypes.c_void_p] 
```

此处需要行。此代码适用于 32 位和 64 位指针，因此您可以在 32 位和 64 位 Linux 以及 32 位和 64 位 OS X（以及 32 位和 64 位 Solaris以及 32 位和 64 位 FreeBSD 和...，以及加载库所需的任何代码更改 - 在大多数 Un*xes 共享库上的名称以“.so”结尾，所以如果你不想要要`find_library`在其他 Un*xes 上使用，Linux 代码可能就足够了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T13:54:12.037

我真的很想来这里发帖，因为我在 OS X 上也遇到了这个问题。我在您的代码中发现的问题是：

`handle = pcap_create(dev, errbuf)`

您需要设置 restype，这是我的示例，因为这可能会帮助你们中的一些人：[https ://github.com/killswitch-GUI/NIX-Sniffer-Examples](https://github.com/killswitch-GUI/NIX-Sniffer-Examples)

```
 import ctypes
    import threading
    import sys
    import os
    import errno

    OSX_PCAP_DYLIB = '/usr/lib/libpcap.A.dylib'
    OSX_LIBC_DYLIB = '/usr/lib/libSystem.B.dylib'
    PCAP_ERRBUF_SIZE = 256
    packet_count_limit = ctypes.c_int(1)
    timeout_limit = ctypes.c_int(1000) # In milliseconds 
    err_buf = ctypes.create_string_buffer(PCAP_ERRBUF_SIZE)

    class bpf_program(ctypes.Structure):
        _fields_ = [("bf_len", ctypes.c_int),("bf_insns", ctypes.c_void_p)]

    class pcap_pkthdr(ctypes.Structure):
        _fields_ = [("tv_sec", ctypes.c_long), ("tv_usec", ctypes.c_long), ("caplen", ctypes.c_uint), ("len", ctypes.c_uint)]

    class pcap_stat(ctypes.Structure):
        _fields_ = [("ps_recv",ctypes.c_uint), ("ps_drop",ctypes.c_uint), ("ps_ifdrop", ctypes.c_int)]

    def pkthandler(pkthdr,packet):
        print("In callback:")
        print("pkthdr[0:7]:",pkthdr.contents.len)
        print(pkthdr.contents.tv_sec,pkthdr.contents.caplen,pkthdr.contents.len)
        print(packet.contents[:10])
        print()

    print "-------------------------------------------"
    libc = ctypes.CDLL(OSX_LIBC_DYLIB, use_errno=True)
    if not libc:
        print "Error loading C libary: %s" % errno.errorcode[ctypes.get_errno()]
    print "* C runtime libary loaded: %s" % OSX_LIBC_DYLIB
    pcap = ctypes.CDLL(OSX_PCAP_DYLIB, use_errno=True)
    if not pcap:
        print "Error loading C libary: %s" % errno.errorcode[ctypes.get_errno()]
    print "* C runtime libary loaded: %s" % OSX_PCAP_DYLIB
    print "* C runtime handle at: %s" % pcap

    print "-------------------------------------------"
    pcap_lookupdev = pcap.pcap_lookupdev
    pcap_lookupdev.restype = ctypes.c_char_p
    dev = pcap.pcap_lookupdev()
    print "* Device handle at: %s" % dev

    net = ctypes.c_uint()
    mask = ctypes.c_uint()
    pcap.pcap_lookupnet(dev,ctypes.byref(net),ctypes.byref(mask),err_buf)
    print "* Device IP to bind: %s" % net
    print "* Device net mask: %s" % mask

    #pcap_t *pcap_open_live(const char *device, int snaplen,int promisc, int to_ms, char *errbuf)
    pcap_open_live = pcap.pcap_open_live
    pcap_open_live.restype = ctypes.POINTER(ctypes.c_void_p)
    pcap_create = pcap.pcap_create
    pcap_create.restype = ctypes.c_void_p
    #pcap_handle = pcap.pcap_create(dev, err_buf)
    pcap_handle = pcap.pcap_open_live(dev, 1024, packet_count_limit, timeout_limit, err_buf)
    print "* Live capture device handle at: %s" % pcap_handle 

    pcap_can_set_rfmon = pcap.pcap_can_set_rfmon
    pcap_can_set_rfmon.argtypes = [ctypes.c_void_p]
    if (pcap_can_set_rfmon(pcap_handle) == 1):
        print "* Can set interface in monitor mode"

    pcap_pkthdr_p = ctypes.POINTER(pcap_pkthdr)()
    packetdata = ctypes.POINTER(ctypes.c_ubyte*65536)()
    #print pcap.pcap_next(pcap_handle,ctypes.byref(pcap_pkthdr_p))

    if (pcap.pcap_next_ex(pcap_handle, ctypes.byref(pcap_pkthdr_p), ctypes.byref(packetdata)) == 1):
        print "* Packet captured!"
        pkthandler(pcap_pkthdr_p,packetdata) 
```

# regex - 正则表达式和运算符 .+

> ID：13275040
> 
> 赞同：2
> 
> 时间：2012-11-07T17:33:13.920
> 
> 标签：regex, mysql-5.0

我正在尝试使用 MySql REGEXP 查找列中出现的位置`green` **和行** `2012`

我`.+`在正则表达式中使用。

这有效：

```
select  'green 2012-01' REGEXP 'green.+2012' 
```

返回`1`

但如果我先放置“2012”，它会返回 0

```
select  'green 2012-01' REGEXP '2012.+green'; 
```

返回`0`

我正在使用 MYSQL 软件版本：5.1.43 - MySQL Community Server (GPL)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:55:10.423

正则表达式有点依赖于顺序。你需要做的是把 | （或）您的两个项目之间的运算符，以使其查找其中一个。

```
select 'green 2012-01' REGEXP '(green.*2012)|(2012.*green)' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:38:37.227

作为 的替代方案`REGEX`，虽然效率可能较低，但您可以简单地使用[`LOCATE`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate)两次。

```
SELECT * FROM table WHERE LOCATE('2012', column) AND LOCATE('green', column); 
```

# c# - 将 cookie 添加到 WebClient

> ID：13275042
> 
> 赞同：6
> 
> 时间：2012-11-07T17:33:32.543
> 
> 标签：c#

我想下载 pdf`WebClient`但我需要发送带有请求的 cookie

如何添加cookie`WebClient`然后下载pdf

```
 WebClient webClient = new WebClient();

 webClient.DownloadFile("http://........", "C://2.pdf"); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-07T17:36:14.750

您可以将 cookie 添加到您的 webClient。

```
webClient.Headers.Add(HttpRequestHeader.Cookie, "cookies");
webClient.DownloadFile("http://........", "C://2.pdf"); 
```

# java - GA内的散列

> ID：13275043
> 
> 赞同：1
> 
> 时间：2012-11-07T17:33:32.723
> 
> 标签：java, hash, genetic-algorithm

我正在做一个最后一年的项目，在大学课程时间表中使用遗传算法的想法。

该算法的一部分是测试预期的时间表违反了哪些违规行为。其中之一是房间冲突 - 一个房间被双重预订。

使用java，我已经覆盖了我的roomTimeSlot的默认getHashcode（房间的组合和一个给每个时间段的ID，即星期一9-10，星期一10-11等）到我自己的代码我想用这个哈希码来为每个讲座映射每个分配的 roomTimeslot。

我的问题是如何执行此操作以及如何检测碰撞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T20:09:05.030

首先我会放弃哈希的想法......

然后，您可能会创建一个包含开始和结束的间隔对象，并将其放入您的集合中。

您可以轻松地在此类上实现一个可以检测碰撞的方法：

```
public boolean hasCollision(Interval inter){....} 
```

现在在插入之前迭代你的集合并调用 hasCollision() 方法......

我想优化结果，也可以让 Interval 对象实现 Comparable 并使用 Sorted 集合。

您还可以为此查看[区间树数据结构](http://en.wikipedia.org/wiki/Interval_tree)，并仅在区间中没有碰撞/交叉点时添加元素。

# http - HTTP/HTML：URI 中双点 (..) 的解析（请求、位置标头等）

> ID：13275046
> 
> 赞同：6
> 
> 时间：2012-11-07T17:33:43.963
> 
> 标签：http, uri

是否允许 HTTP 请求 URI 包含“..”段？

根据 RFC 2616 第 5.1.2 节，它们可以引用绝对 URI 或绝对路径（该部分中的其他选项与此问题无关）。

绝对 URI 和绝对路径的含义在 RFC 3986 中进行了描述，它还描述了一种规范化路径的算法（包括删除单点和双点元素）。

但是，我找不到符合 RFC 的请求 URI 是否可以包含“..”段的确切规范 - 它们是否允许在绝对路径/URI 中，并且服务器是否必须规范化此类 URI？还是这取决于客户？

“位置：”响应标头有什么区别吗？根据规范，它们只能包含绝对 URI，但这是否包括“..”部分？在请求引用的资源之前，客户端是否也必须对它们进行规范化？

澄清一下，我知道`../foo`在这些情况下类似的 URI 是非法的，但是呢`http://example.com/../foo`？这是一个有效的绝对 URI 吗？

我目前正在将客户端重定向到此类 URI，并想知道这是否符合规范。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T01:08:27.823

如果你想*“知道它是否符合规范”，*为什么不简单地参考相关规范呢？

[**RFC 3986 第 5.2 节**](https://www.rfc-editor.org/rfc/rfc3986#section-5.2)非常清楚应该如何解析 URI 点段：

> 本节描述了一种算法，用于将可能与给定基本 URI 相关的 URI 引用转换为引用目标的已解析组件。然后可以重组组件，如第 5.3 节所述，以形成目标 URI。该算法提供了确定的结果，可用于测试其他实现的输出。应用程序可以通过使用其他算法来实现相对参考分辨率，前提是结果与该算法给出的结果相匹配。

例如，如果您关注`Location:`标头，则规范化和解析无效的相对路径通常是谨慎的（`Location:`标头应该是绝对 URI）。在这些情况下，您绝对应该遵循 RFC 3986 的说明来根据您的基本 URI 解析这些路径。

你应该在你的 URI 中到处传递点段吗？如果您可以提供帮助，可能不会，因为您依赖其他人正确实施规范。但是传递带有点段的 URI 是否违反了 URI 规范？**没有**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T20:18:48.010

从语法上讲，`http://example.com/../foo`是一个有效的 URI。

服务器如何解释该 URI 是另一回事。出于明显的安全原因，服务器必须非常小心如何将 URI 转换为文件路径。通常，服务器要么删除`..`段，要么进行某种后处理以确保文件路径位于文档根目录内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-31T17:30:34.677

*（感谢您在一个充满绝望的公众困惑的话题中提出了一个伟大而清晰的问题，由神秘的规格和令人惊讶的微妙之处助长！）*

> ... [http://example.com/../foo](http://example.com/../foo)呢？这是一个有效的绝对 URI 吗？

1.  不，这是一个*无效*的绝对 URI，因为它试图引用命名机构命名空间（根）之外的地方。

*（因此，当我尝试向服务器提供类似的东西时，我得到了服务器应有的“400 Bad request”响应。）*

2.  但是，假设您真的要询问*有效*但同样*非规范化的绝对*​​路径，例如`/root/../foo`：@rdlowrey 的答案是正确的：如果可以的话，最好自己规范化它们。

*（再次，作为一个例子，当浏览器发送到同一服务器时，我的代理在运行良好的页面上失败了，这会更加努力地规范化点部分，而不是依赖服务器做同样的事情。）*

> 但是，我找不到符合 RFC 的请求 URI 是否可以包含“..”段的确切规范 - 它们是否允许在绝对路径/URI 中，并且服务器是否必须规范化此类 URI？还是这取决于客户？

3.  不幸的是，您没有找到它，因为它没有指定，即使在[HTTP 2](https://www.rfc-editor.org/rfc/rfc7540)中，AFAICT :-/

# tfs - NuGet 包还原不会在构建时还原包

> ID：13275050
> 
> 赞同：11
> 
> 时间：2012-11-07T17:33:58.080
> 
> 标签：tfs, msbuild, nuget, package-managers

我正在将我们的源代码从 Vault 移动到 TFS，而不是为迁移或任何事情而烦恼，只是在 Vault 中获取最新版本并将其添加到 TFS。

该解决方案有多个项目，每个项目至少有一个 NuGet 包。我正在尝试让包还原再次工作。它在 Vault 中工作（但不是它应该的方式）。我的最后期限有点过了，一开始它不起作用，所以我添加了一个 Pre-Build 事件来针对每个项目的 packages.config 运行 nuget.exe。

TFS 构建服务对此抱怨，所以我试图让它“正常”工作。

1.  我已经在 Visual Studio 工具菜单中设置了该选项。
2.  我已安装 NuGetEnablePackageRestore 并运行修复程序。
3.  我已经验证包目录是源代码管理，但是是空的。
4.  我已经验证每个项目文件都包含以下内容：

> ```
> <RestorePackages>true</RestorePackages>
> <Import Project="$(SolutionDir)\.nuget\nuget.targets" /> 
> ```

使用诊断级别详细程度构建表明每个项目都会评估这些属性，但 nuget.targets 中的 RestoreCommand 从未执行。

有什么想法吗？

我试图从这些链接中实施解决方案：

1.  [nuget - 包还原不起作用](https://stackoverflow.com/questions/12856964/nuget-package-restore-not-working)
2.  [NuGet 包还原不起作用](https://stackoverflow.com/questions/9011889/nuget-package-restore-not-working) - 我确实在那里发布了一个问题/评论，要求澄清......
3.  [http://nuget.codeplex.com/workitem/1879](http://nuget.codeplex.com/workitem/1879)

# 编辑

此外，我发现在构建期间正在评估 RestoreCommand 属性。诊断详细程度显示：

```
RestoreCommand = (set EnableNuGetPackageRestore=true) && "C:\Source\Kiersted Direct And Related\Direct\Kiersted\.nuget\nuget.exe" install "packages.config" -source "@(PackageSource)" -o "C:\Source\Kiersted Direct And Related\Direct\Kiersted\packages" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T20:06:38.197

我想通了，我在这里找到了答案：[MSBuild not running BuildDependsOn tasks from an import project](https://stackoverflow.com/questions/5951841/msbuild-not-running-builddependson-tasks-from-an-imported-project)

问题（在查看了诊断详细度构建输出之后）是 BuildDependsOn 设置未设置。我的项目文件每个都有导入语句

```
<Import Project="$(SolutionDir)\.nuget\nuget.targets" /> 
```

但该语句位于 XML 树的开头。显然，Microsoft.CSharp.targets 的导入可能会干扰该导入，从而干扰 BuildDependsOn。

我的解决方案是将 nuget.targets 导入移动到 Microsoft.CSharp.targets 导入下方。现在一切都构建得很漂亮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-19T12:41:22.400

这个答案需要与其他人一起考虑。就我而言，Visual Studio 决定不将 packages.config 自动添加到源代码管理中。因此，在 Nuget 还原期间，该文件没有进入构建服务器以供考虑。

# objective-c - 如何在基于文档的应用程序中编写/保存纯文本文件？

> ID：13275051
> 
> 赞同：2
> 
> 时间：2012-11-07T17:33:59.593
> 
> 标签：objective-c, cocoa, document

在基于文档的应用程序中，我可以保存/读取文件，但是当我必须从纯文本文件中读取时，问题就来了。
我只有一个要读/写的字符串，这就是代码：

```
- (NSData *)dataOfType:(NSString *)typeName error:(NSError **)outError
{
    code=[codeView string];
    return [NSKeyedArchiver archivedDataWithRootObject: code];
}

- (BOOL)readFromData:(NSData *)data ofType:(NSString *)typeName error:(NSError **)outError
{
    code=[NSKeyedUnarchiver unarchiveObjectWithData: data];
    return YES;
} 
```

问题是保存一个 NSData 可能会产生一个像这样的文件：

```
bplist00‘X$versionX$objectsY$archiverT$top�Ü†£
U$null“ 
V$classYNS.stringÄP“Z$classnameX$classes_NSMutableString£XNSStringXNSObject_NSKeyedArchiver—TrootÄ#-27;AFMWYZ_jsÖâíõ≠∞µ����������������������������∑ 
```

对于人类来说不可读，对于文本编辑等其他应用程序不可读。我需要能够读取和保存纯文本文件，在我的 plist 文件中，我已经尝试通过将文档类型名称更改为 public.text 来实现这一点。
如何保存/读取以 UTF-8 编码的纯字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:47:23.983

那个 gobbledygook 是 NSKeyedArchiver 的输出。您不希望这里有存档器。相反，只需向字符串询问它的`dataUsingEncoding:`，传递您想用于文本的任何编码（这些天通常是 UTF-8）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:53:29.263

@RamyAlZuhouri：从“TextEdit”项目（Apple 代码示例）中查看文件“Info-TextEdit.plist”中的“文档类型”。

可能在这里：~/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.AppleOSX10_8.CoreReference.docset/Contents/Resources/Documents/samplecode/TextEdit

# php - 全局标签停止工作：定义全局变量的错误方法？

> ID：13275053
> 
> 赞同：0
> 
> 时间：2012-11-07T17:34:04.670
> 
> 标签：php, database, global-variables

我正在尝试从服务器中提取数据而不必重复`$parentQ`,`$parentResult`和`$link`. 我认为在每个函数中添加全局可以修复它，它确实......但无论出于何种原因，它都停止了工作。

如果我将它们放回函数中，它就可以工作。我很困惑。为什么它起作用了，现在却不起作用。我没有改变我所知道的任何事情。这是代码：

```
//URL in Reference
  $URL = 'path/file.php';

//Initialize Query for Table Data
$parentQ = "select * from cdi_content where URL=\"$URL\"";
$parentResult = mysql_query($parentQ); // Run the Query
$link = mysql_fetch_assoc($parentResult); // Query Result

// Write Main Content
function writeContent($URL){
global $parentQ, $parentQuery, $link;
echo $link['Content']; // Pull Data From Server 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:58:52.150

定义`$parentQ`,`$parentResult`和`$link`作为函数外的全局变量。

# sql-server - EF5：无法将文件“{0}”附加为数据库“{1}”

> ID：13275054
> 
> 赞同：141
> 
> 时间：2012-11-07T17:34:12.517
> 
> 标签：sql-server, asp.net-mvc, visual-studio-2012, entity-framework-5, localdb

我遇到了[这里](http://odetocode.com/Blogs/scott/archive/2012/08/14/a-troubleshooting-guide-for-entity-framework-connections-amp-migrations.aspx)描述的确切问题（阅读“无法附加到已删除的 MDF 文件”部分），但那里没有告诉问题的解决方案......

简而言之，问题是删除`.mdf`文件后，当我尝试使用 EF 5.0 访问数据库时会引发以下异常。

> DataException->EntityException->SqlException:
> **无法将文件“{0}”附加为数据库“{1}”**

我确实删除了 DB 文件，现在在运行应用程序时收到令人讨厌的错误消息，期望它使用它的初始化程序。有任何解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2013-05-02T13:22:58.633

如果您删除 DB 文件，它仍会在 SqlLocalDB 中保持注册状态。有时它会修复它以删除数据库。您可以从命令行执行此操作。

1.  在开始/程序菜单下打开“VisualStudio 的开发人员命令提示符”。
2.  运行以下命令：

    `sqllocaldb.exe stop v11.0`

    `sqllocaldb.exe delete v11.0`

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2013-04-05T11:00:43.503

对于那些仍在寻找解决方案的人...

转到查看/SQL Server 对象资源管理器并从 (localdb)\v11.0 子节点中删除数据库！
![在此处输入图像描述](../Images/d9e9144f9e40a01cba739c157e35ca35.png)

基本上有一个本地数据库保留了文件的位置，如果要删除数据库文件，请确保从该资源管理器实用程序中删除它们，而不是手动删除。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-06-25T20:42:15.100

我确实先尝试了 JSobell 的解决方案，但没有看到我的数据库在那里列出。我从 VS 开发人员命令提示符运行 CodingWithSpike 的命令，但这也不起作用。最后，我从包管理器控制台运行了 CodingWithSpike 的相同命令，并且成功了。

```
 PM> sqllocaldb.exe stop v11.0
    LocalDB instance "v11.0" stopped.

    PM> 
    PM> sqllocaldb.exe delete v11.0
    LocalDB instance "v11.0" deleted.

    PM> sqllocaldb.exe start v11.0
    LocalDB instance "v11.0" started. 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-11-09T08:17:24.563

好的。

我的解决方案很简单，我改为使用本地服务器：

我将`DataSource`连接字符串中的属性更改为：

```
Data Source=(LocalDb)\v11.0;blah 
```

到：

```
Data Source=.\SQLEXPRESS;blah 
```

另一种解决方案是通过 SQL Management Studio 登录 LocalDb，然后尝试删除该数据库：

![在此处输入图像描述](../Images/e3971d842701cef23ff977b45b2f5a1e.png)

但是它对我不起作用，当我尝试删除它时，它显示“TITLE：Microsoft SQL Server Management Studio

> 服务器上不存在数据库“{0}”。(SqlManagerUI)

当我尝试分离它时，数据库没有出现在分离选择列表中，“脱机”也将我带到上面的错误。

这使我认为这是 LocalDB 中的一个可靠错误。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-09-30T17:53:56.720

最简单的解决方法是简单地更改连接字符串中的数据库名称。有关替代解决方案，请参阅 Rowan Millers 博客[如何从 Visual Studio 2012 中删除数据库。](http://romiller.com/2013/05/17/how-to-drop-a-database-from-visual-studio-2012/)我们希望在未来的版本中解决这个问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-17T12:53:06.393

最好和最简单的答案我现在刚刚解决了，只需使用您的 sql 服务器名称作为数据源，初始目录是您的数据库名称，然后您就可以删除 mdf 行

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-27T05:46:22.317

在我的情况下，我使用迁移并且在配置中我只是更改了 dataContext 和 dataContext 类本身的名称（只是重命名），然后再试一次，这有帮助

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-03-22T14:52:15.877

对于 SQL 2014，请遵循 CodingWithSpike 选择的答案和此评论

> 作为旁注，v11.0 特定于 SQL LocalDB 2012。如果您使用的是 LocalDB 2014，MS 将其重命名为**MSSqlLocalDb**。– CodingWithSpike 2014 年 8 月 29 日 19:20

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-11T16:32:09.033

我有同样的问题。我在包管理器控制台中运行了以下命令，它解决了问题

```
sqllocaldb.exe stop MSSqlLocalDb

sqllocaldb.exe delete MSSqlLocalDb 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-05-22T16:25:47.590

我有同样的问题，我通过手动将“DataDirectory”文件夹设置到我的应用程序二进制文件中的另一个文件夹来解决它。

我将这一行放在 Global.asax Application_Start 方法中：

```
AppDomain.CurrentDomain.SetData("DataDirectory", Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "App_Data")); 
```

我的连接字符串当前设置为：

```
<connectionStrings>
    <add name="DataContext" connectionString="Data Source=(LocalDb)\v11.0; Initial Catalog=DataContext; Integrated Security=True; MultipleActiveResultSets=True; AttachDbFilename=|DataDirectory|DataContext.mdf"
  providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-03-27T19:19:40.200

我可以通过在我的连接字符串中重命名数据库名称来修复它，从默认的 aspnet-{numbers} 到一个简单的名称，它可以工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-06-28T19:03:54.613

使用 Sql server management studio 连接到 (LocalDb)\v11.0，删除数据库，然后在包管理器控制台中执行更新数据库。

# c++ - 错误 LNK2019：未解析的外部符号“公共：无效 __thiscall

> ID：13275057
> 
> 赞同：2
> 
> 时间：2012-11-07T17:34:20.067
> 
> 标签：c++, visual-studio-2010, lnk2019

我的任务是编写代码来使用递归跟踪排序的链表。我们得到了类和文件的组成，但需要填写功能。我遇到了四个错误，我认为这些错误是由在公共函数中调用私有函数引起的。我的错误是：

```
1>SortedList.obj : error LNK2019: unresolved external symbol "public: void __thiscall SortedList::recursiveMakeEmpty(class NodeType * &)" (?recursiveMakeEmpty@SortedList@@QAEXAAPAVNodeType@@@Z) referenced in function "public: void __thiscall SortedList::makeEmpty(void)" (?makeEmpty@SortedList@@QAEXXZ)
1>SortedList.obj : error LNK2019: unresolved external symbol "public: bool __thiscall SortedList::recursiveInsert(class NodeType * &,int)" (?recursiveInsert@SortedList@@QAE_NAAPAVNodeType@@H@Z) referenced in function "public: bool __thiscall SortedList::insert(int)" (?insert@SortedList@@QAE_NH@Z)
1>SortedList.obj : error LNK2019: unresolved external symbol "public: bool __thiscall SortedList::recursiveDelete(class NodeType * &,int)" (?recursiveDelete@SortedList@@QAE_NAAPAVNodeType@@H@Z) referenced in function "public: bool __thiscall SortedList::deleteItem(int)" (?deleteItem@SortedList@@QAE_NH@Z)
1>SortedList.obj : error LNK2019: unresolved external symbol "public: void __thiscall SortedList::recursivePrint(class NodeType * &)" (?recursivePrint@SortedList@@QAEXAAPAVNodeType@@@Z) referenced in function "public: void __thiscall SortedList::printList(void)" (?printList@SortedList@@QAEXXZ)
1>C:\Users\Ross\documents\visual studio 2010\Projects\Recursive Sorted List\Debug\Recursive Sorted List.exe : fatal error LNK1120: 4 unresolved externals 
```

我的代码：

节点.h

```
typedef int ItemType;

class NodeType
    {
    public:
        ItemType info;
        NodeType *next;
    }; 
```

排序列表.h

```
#include "MyClass.h"

string MyClass::foo = "bar"          #pragma once

      #include <iostream>
      #include "Node.h"

      using namespace std;

      class SortedList 
      {
      public:
        SortedList();
        // Constructor used before any operations are done on the list.  Initializes the list to empty.
        // Preconditions: None.
        // Postconditions: List is an empty list.

        ~SortedList();
        // Destructor used when a List is no longer in scope.
        // Precondition: None.
        // Postcondition: No dynamic variables exist.

        void makeEmpty();
        // Makes the list empty if it is not empty already.
        // Preconditions: The list may be empty or have items in it.
        // Postconditions: List is now an empty list.  Any dynamically allocated memory which is no longer used is returned to the system. 
  The current position is 1.
        // Note: This function body is different from the constructor.

        bool isEmpty();
        // Returns True if List is an empty list; return False otherwise.
        // Postconditions: List remains unchanged.

        bool isFull();
        // Returns True if List is full; returns False other wise.
        // Postcondition: List remains unchanged.
        // Note: For linked list implementation, you can simply return false.

        bool insert( ItemType newItem );
        // Inserts the given newItem in the list maintaining sorted order.
        // Preconditions: The list may be empty.
        // Postconditions: If the list already contained a matching item, the function returned false and the list is unchanged.
        // Otherwise the newItem is inserted in the linked list so that the list maintains sorted order, and true is returned.

        bool deleteItem( ItemType deleteItem );
        // Deletes the item from the linked list if it is found.
        // Preconditions: List may be empty.  At most one matching item is in the list.
        // Postconditions: If the itemwas in the list, it is deleted and true is returned.  If the item was not in the list, the list is
  unchanged and false is returned.

        void printList();
        // Prints items in the list
        // Preconditions: Assumes that the operator << has been defined for ItemType.
        // Postcondition: Items on the list have been printed to the standard output.  List is unchanged.

      private:
        NodeType *head;
        // Points to head of linked list.

        void recursiveMakeEmpty( NodeType *& node);
        // Makes the list empty if it is not empty already.
        // Preconditions: The list may be empty or have items in it.
        // Postconditions: List is now an empty list.  Any dynamically allocated memory which is no longer used is returned to the system. 
  The current position is 1.

        bool recursiveInsert( NodeType *& node, ItemType newItem );
        // Inserts the given newItem in the list maintaining sorted order.
        // Preconditions: The list may be empty.
        // Postconditions: If the list already contained a matching item, the function returned false and the list is unchanged.
        // Otherwise the newItem is inserted in the linked list so that the list maintains sorted order, and true is returned.

        bool recursiveDelete( NodeType *& node, ItemType deleteItem );
        // Deletes the item from the linked list if it is found.
        // Preconditions: List may be empty.  At most one matching item is in the list.
        // Postconditions: If the itemwas in the list, it is deleted and true is returned.  If the item was not in the list, the list is
  unchanged and false is returned.

        void recursivePrint( NodeType *& node );
        // Prints items in the list
        // Preconditions: Assumes that the operator << has been defined for ItemType.
        // Postcondition: Items on the list have been printed to the standard output.  List is unchanged.
      }; 
```

排序列表.cpp

```
#include "SortedList.h"

SortedList::SortedList()
// Constructor used before any operations are done on the list.  Initializes the list to empty.
// Preconditions: None.
// Postconditions: List is an empty list.
{
    head = NULL;
}

SortedList::~SortedList()
// Destructor used when a List is no longer in scope.
// Precondition: None.
// Postcondition: No dynamic variables exist.
{
    makeEmpty();
}

void SortedList::makeEmpty()
// Makes the list empty if it is not empty already.
// Preconditions: The list may be empty or have items in it.
// Postconditions: List is now an empty list.  Any dynamically allocated memory which is no longer used is returned to the system.  The current position is 1.
// Note: This function body is different from the constructor.
{
    recursiveMakeEmpty(head);
}

bool SortedList::isEmpty()
// Returns True if List is an empty list; return False otherwise.
// Postconditions: List remains unchanged.
{
    return ( head == NULL );
}
//
bool SortedList::isFull()
// Returns True if List is full; returns False other wise.
// Postcondition: List remains unchanged.
// Note: For linked list implementation, you can simply return false.
{
    return false;
}

bool SortedList::insert( ItemType newItem )
// Inserts the given newItem in the list maintaining sorted order.
// Preconditions: The list may be empty.
// Postconditions: If the list already contained a matching item, the function returned false and the list is unchanged.
// Otherwise the newItem is inserted in the linked list so that the list maintains sorted order, and true is returned.
{
    return recursiveInsert( head, newItem );
}

bool SortedList::deleteItem( ItemType deleteItem )
// Deletes the item from the linked list if it is found.
// Preconditions: List may be empty.  At most one matching item is in the list.
// Postconditions: If the itemwas in the list, it is deleted and true is returned.  If the item was not in the list, the list is unchanged and false is returned.
{
    return recursiveDelete( head, deleteItem );
}

void SortedList::printList()
// Prints items in the list
// Preconditions: Assumes that the operator << has been defined for ItemType.
// Postcondition: Items on the list have been printed to the standard output.  List is unchanged.
{
    recursivePrint( head );
}

bool recursiveInsert( NodeType *& node, ItemType newItem )
// Inserts the given newItem in the list maintaining sorted order.
// Preconditions: The list may be empty.
// Postconditions: If the list already contained a matching item, the function returned false and the list is unchanged.
// Otherwise the newItem is inserted in the linked list so that the list maintains sorted order, and true is returned.
{
    if( node == NULL )
    {
        node = new NodeType;
        node->info = newItem;
        node->next = NULL;
        return true;
    }
    else if( node->info == newItem )
    {
        return false;
    }
    else if( newItem < node->next->info )
    {
        NodeType* ptr = new NodeType;
        ptr->info = newItem;
        ptr->next = node->next;
        node->next = ptr;
        return true;
    }
    else
    {
        recursiveInsert( node->next, newItem );
    }
}

bool recursiveDelete( NodeType *& node, ItemType deleteItem )
    // Deletes the item from the linked list if it is found.
    // Preconditions: List may be empty.  At most one matching item is in the list.
    // Postconditions: If the itemwas in the list, it is deleted and true is returned.  If the item was not in the list, the list is unchanged and false is returned.
{
    if( node == NULL )
    {
        return false;
    }
    else if( node->next->info == deleteItem )
    {
        NodeType* ptr = node->next->next;
        delete node->next;
        node->next = ptr;
        return true;
    }
    else
    {
        recursiveDelete( node->next, deleteItem );
    }
}

void recursiveMakeEmpty( NodeType *& node)
// Makes the list empty if it is not empty already.
// Preconditions: The list may be empty or have items in it.
// Postconditions: List is now an empty list.  Any dynamically allocated memory which is no longer used is returned to the system.  The current position is 1.
{
    if( node == NULL )
    {
        return;
    }
    else
    {
        recursiveDelete( node, node->info );
    }
}

void recursivePrint( NodeType *& node )
// Prints items in the list
// Preconditions: Assumes that the operator << has been defined for ItemType.
// Postcondition: Items on the list have been printed to the standard output.  List is unchanged.
{
    if( node == NULL )
    {
        return;
    }
    else if( node->next == NULL )
    {
        cout << node->info << "\n\n";
    }
    else
    {
        cout << node->info << ", ";
        recursivePrint(node->next);
    }
} 
```

主文件

```
#include "SortedList.h"

void menuSelection(char &selection);

int main()
{
    char selection = 'S';
    SortedList List;
    ItemType item;

    do
    {
        menuSelection(selection);

        switch( selection )
        {
        case 'A':
            cout << "What item would you like to add?   ";
            cin >> item;
            if (List.insert(item))
            {
                cout << "\n Item has been added! \n\n";
            }
            else
            {
                cout << "\n Item already in list! \n\n";
            }
            break;
        case 'D':
            cout << "What item would you like to delete?    ";
            cin >> item;
            if (List.deleteItem(item))
            {
                cout << "\n Item has been deleted! \n\n";
            }
            else
            {
                cout << "\n Item was not found! \n\n";
            }
            break;
        case 'M':
            List.makeEmpty();
            cout << "\n List is now empty! \n\n";
            break;
        case 'P':
            cout << "\n The list is:  ";
            List.printList();
            cout << "\n\n";
            break;
        }
    } while( selection != 'Q' );

    return 0;
}

void menuSelection(char &selection)
{
    cout << "What would you like to do? \n\n";
    cout << "A - add item. \n";
    cout << "D - delete item. \n";
    cout << "M - make empty. \n";
    cout << "P - print list. \n";
    cout << "Q - quit. \n\n";
    do
    {
        cin >> selection;
        if( selection != 'A' && selection != 'D' && selection != 'M' && selection != 'P' && selection != 'Q' )
        {
            cout << "Must enter A, D, M, P, or Q.";
        }
    } while( selection != 'A' && selection != 'D' && selection != 'M' && selection != 'P' && selection != 'Q' );
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T17:40:02.960

您必须`SortedList::`在所有方法定义甚至`private`方法之前添加。

# internet-explorer-8 - ie8顶部导航隐藏

> ID：13275065
> 
> 赞同：1
> 
> 时间：2012-11-07T17:34:52.483
> 
> 标签：internet-explorer-8

我在我的网站上添加了一个用于一些链接/图标的顶部栏，它在除 IE 8 之外的所有浏览器中都能正常工作。我为此添加了条件格式，但没有任何效果。尝试删除黑条背景，但它们仍然不会显示。您可以将鼠标悬停在它们应该在的空间上并单击链接，但显然它们不会显示。

[网站](http://www.birdbathgroup.com/template.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:13:24.320

我只在 IE<9 中遇到过 CSS sprites 的问题。

错误代码：

```
#nav_garments{background:url(objectsConst.png)-678px 0px no-repeat;} 
```

好代码：

```
#nav_garments{background:url(objectsConst.png) -678px 0px no-repeat;} 
```

注意括号后面的空格。

希望有帮助。

# android - 将 NFC 标签仅限于应用程序 (Android)

> ID：13275066
> 
> 赞同：2
> 
> 时间：2012-11-07T17:34:57.587
> 
> 标签：android, nfc

我在 Android 编程方面相当陌生，并计划使用 NFC 开发优惠券系统。我已经阅读了有关通过 Android 编程读取和写入 NFC 标签的内容，并了解了意图过滤器。

我的问题是，是否可以只对标签进行编程，以便它只运行我的应用程序，而不是其他任何应用程序。话虽如此，是否有可能使它无法被任何其他应用程序读取？我对标签的类型很模糊，希望有人能澄清这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:44:28.257

您可以使用特定的 mime 类型甚至标签类型来标记标签，并以您的应用程序可以获取这些标签的方式编写意图过滤器。但其他应用程序也可以复制您的意图过滤器并获得标签通知。

您可以尝试加密标签上的数据，以便只有您的应用程序可以读取它，但即使这样也远非完美无缺。有人可以轻松地从您的 APK 中解码密钥。您也可以[加密您的 APK](http://nelenkov.blogspot.com/2012/07/using-app-encryption-in-jelly-bean.html)，但似乎仅在 Jelly Bean 及更高版本上受支持。

这完全取决于您愿意投入多少时间和精力来隐藏标签的内容，而不是您的目标受众愿意投入多少时间和精力来破解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:16:25.523

当您将 NDEF 消息放在标签上时（请参阅[Ndef](http://developer.android.com/reference/android/nfc/tech/Ndef.html)），您可以在[NdefMessage](http://developer.android.com/reference/android/nfc/NdefMessage.html)的末尾添加一个[Android 应用程序记录](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#aar)。这将确保只启动您的应用程序。如果设备上未安装应用程序，用户将被重定向到 Play 商店应用程序进行安装（如果该应用程序在那里可用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:53:12.320

我建议你使用

1.  Android[应用程序记录](http://code.google.com/p/ndef-tools-for-android/source/browse/ndeftools/src/org/ndeftools/externaltype/AndroidApplicationRecord.java)（如果您想支持旧手机，则+ [Mime 记录）](http://code.google.com/p/ndef-tools-for-android/source/browse/ndeftools/src/org/ndeftools/MimeRecord.java)
2.  只有您了解的[未知记录](http://code.google.com/p/ndef-tools-for-android/source/browse/ndeftools/src/org/ndeftools/UnknownRecord.java)，使用私钥-公钥加密。

您可能也有兴趣看到[签名记录](http://code.google.com/p/ndef-tools-for-android/source/browse/ndeftools/src/org/ndeftools/wellknown/SignatureRecord.java)之类的东西。

# c# - 'u0022' 为字符串 C# 引入引号

> ID：13275069
> 
> 赞同：0
> 
> 时间：2012-11-07T17:35:11.953
> 
> 标签：c#, string, c#-4.0

我有一个返回目录的字符串属性，其中包含“程序文件//”，因此要在命令提示符下使用它，我必须在字符串周围使用引号。但是，如果我执行以下操作

```
string myDic = someDic;

string myCmdPrptDic = '\u0022' + someDic + "\u0022' 
```

myCmdPrptDic 最终会像 \"C://Program Files//myApp\" 并且在 cmd 提示符下不起作用。有没有办法只创建“C://Program Files//myApp”？或者也许我应该只使用 stringBuilder....

我只需要生成一个字符串，如：

```
copy //data/file// "C://program files//myapp" 
```

但我不能这样做

```
string = "copy //data//file" +" "+ '\u0022' + someDic + "\u0022'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:39:54.610

您确定这实际上是您的字符串，而不仅仅是您查看它的方式吗？在 VS 调试器的监视窗口中，它已经将字符串放在双引号中，这意味着它需要转义其中的任何引号。就目前而言，上述代码不会将其`\`放入您的字符串中。如果它确实在那里（而不仅仅是对调试信息的误读），那么还有一些其他代码在其中添加了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:00:10.517

您的引号 " 和 ' 不匹配。

# c++ - 多类型分配器设计

> ID：13275070
> 
> 赞同：2
> 
> 时间：2012-11-07T17:35:16.470
> 
> 标签：c++, c++11

我正在研究动态语言的运行时库，更具体地说是它的内存分配。

我将使用垃圾收集，但我认为如果需要允许用户使用自己的内存分配器会很好。但是，在查看了[标准的 c++ 分配器](http://en.cppreference.com/w/cpp/memory/allocator)接口之后，我没有看到任何拥有通用分配器的方法（除了在 char 上进行模板化，但它看起来很笨拙）。

*   使用标准分配器接口是个好主意吗？
*   如果是，分配多种类型的可能设计是什么？

注意：我的库使用 C++11，所以我说的是“新”分配器接口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:36:47.507

正如@Cubbi 所说，看看`allocator::rebind`. 分配器的实际类型参数几乎无关紧要。标准容器用于`allocator::rebind`更改为它们实际需要的类型。特别是，关联容器需要分配节点来保存自己的数据以及容器名义上保存的数据对象。So`allocator::rebind`用于`allocator<Node<T>>`从`allocator<T>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:33:29.493

取决于您是否需要编译时或运行时多态性。标准分配器适用于前一种情况。对于后者，您可以执行以下操作：

```
class Allocator {
public:
    virtual void* allocate(std::size_t size) = 0;
    virtual void deallocate(void* p) = 0;
} 
```

用户将能够通过虚拟功能自定义分配器。

# javascript - 画布动画性能优化。是否有开销调用'this'？

> ID：13275075
> 
> 赞同：0
> 
> 时间：2012-11-07T17:35:43.433
> 
> 标签：javascript, canvas

我正在优化 HTML5 画布动画。

结构如下所示：

```
Animation = {
     //Cache constant variables
    cache : {
            var1 : 1,
            var2 : 2,
            var3 : 3
    },
    render : function(){
      //render to canvas

   }

} 
```

在我正在调用的渲染函数`this.cache.var1`中，`this.cache.var2`等等......在整个过程中多次并对它们执行各种计算。

我想知道的是，`this`在单个循环中重复调用是否会带来很大的开销，如果是这样，如何最好地优化它？

`self=this;`我是否应该简单地将本地副本存储在渲染循环`self`（

欢迎任何意见。

注意：我知道这可能被认为是微优化，但是在处理繁重的动画处理时，我真的很想挤压我能得到的每一滴。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:49:40.280

> *欢迎任何意见。*

你不想要意见，你想要硬数据！:) 惠特：

## [http://jsperf.com/this-versus-closure](http://jsperf.com/this-versus-closure)

```
Anim1 = {
   cache:  { var1:1, var2:2, var3:3 },
   render: function(){
     return this.cache.var1 + this.cache.var2 + this.cache.var3;
   }
};

AnimMaker = function(){
  var cache = { var1:1, var2:2, var3:3 };
  this.render = function(){
    return cache.var1 + cache.var2 + cache.var3;
  }
};
Anim2 = new AnimMaker;

Anim3 = {
   cache:  { var1:1, var2:2, var3:3 },
   render: function(){
     var cache = this.cache;
     return cache.var1 + cache.var2 + cache.var3;
   }
};
// Now compare Anim1.render() vs Anim2.render() vs Anim3.render() 
```

在 Chrome 上使用闭包稍微快一点，在 Firefox 上慢两倍，在 IE9 上差不多。在某些浏览器上缓存对`this.cache`as的引用会`var cache=this.cache`略微提高速度。但是，**速度差异不足以对**您编写的任何代码产生显着影响。如结果所示，我的测试以每秒数亿次查找运行（5000 万次操作/秒 * 每次操作 3 次查找），其中大部分可能与函数调用的开销相形见绌。

专注于您的画布绘图和任何循环算法，而不是单独的代码行。

# vba - 打开几个新选项卡时，IWebBrowser2::Navigate2 偶尔会冻结

> ID：13275079
> 
> 赞同：0
> 
> 时间：2012-11-07T17:36:02.963
> 
> 标签：vba, excel, internet-explorer-8, excel-2007

我正在编写一个 Excel 脚本以在 Internet Explorer 选项卡中打开 PDF 列表。它大部分时间都可以正常工作，但偶尔*当我尝试关闭浏览器窗口时，一些选项卡会关闭，然后它会停止并且所有 IE 实例都会冻结*，所以我必须在任务管理器中将它们全部杀死。*请注意，我可以通过单独关闭每个选项卡来避免该问题*。

为了记录，我正在运行 IE8 和 Excel 2007。这是我的代码：

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)
    ShowBrowserWarning
    Dim TheHTML As String, PDFs, PDF, First, SerialValue, Test, k
    If Target.Column = 1 And Target.Count = 1 Then
        ' Get the serial number from the adjacent column
        SerialValue = Cells(Target.Row, Target.Column + 1)
        TheHTML = ShowHTML("http://ucmwww.dnr.state.la.us/ucmsearch/findAllDocuments.aspx?brief=False&query=xwellserialnumber+LIKE+'" & SerialValue & "'+AND+xdocumenttype+LIKE+'WELL ENGINEERING/MECHANICAL'&format=HTML&sortfield=xdate")
        Set PDFs = ExtractPDFs(TheHTML)
        If PDFs Is Nothing Then
            MsgBox "No associated well engineering/mechanical PDFs."
        Else
            First = True
            Dim ie As Object
            Set ie = CreateObject("InternetExplorer.Application")
            ie.Visible = True
            For Each PDF In PDFs
                'While ie.Busy
                '    Dim testvar
                '    testvar = 1 + 1
                'Wend
                If First Then
                    ' Open new IE window
                    ie.Navigate2 PDF.Value
                    First = False
                Else
                    ' Open tab in existing IE window
                    ie.Navigate2 PDF.Value, 2048
                End If
            Next
        End If
    End If
End Sub 
```

是什么赋予了？为什么会冻成这样？它与[这个问题](http://blogs.msdn.com/b/ieinternals/archive/2011/08/03/internet-explorer-automation-protected-mode-lcie-default-integrity-level-medium.aspx)有什么关系吗？（请尽量不要嘲笑我的无知！）非常感谢任何帮助。

编辑：见上面的斜体文本。我没有完全准确地描述问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:29:02.320

那么浏览器繁忙检查呢？它可以帮助避免这个问题吗？

```
 For Each PDF In PDFs

        While ie.Busy
            DoEvents
        Wend

        If First Then
            ' Open new IE window
            ie.Navigate2 PDF.Value
            First = False
        Else
            ' Open tab in existing IE window
            ie.Navigate2 PDF.Value, 2048
        End If
    Next 
```

或者只是在浏览器之间等待。导航调用一段时间，让浏览器有足够的时间加载一个文档，然后再开始加载下一个文档。尝试不同的时间段并观察是否可以通过这种方式避免冻结问题。

```
For Each PDF In PDFs

  DoEventsForTimePeriod timePeriodInSeconds:=15 ' try different time periods here

  If First Then
  ' Open new IE window
  ie.Navigate2 PDF.Value
  First = False
  Else
  ' Open tab in existing IE window
  ie.Navigate2 PDF.Value, 2048
  End If
Next

Private Sub DoEventsForTimePeriod(ByVal timePeriodInSeconds As Single)
    ' VBA.Timer: Returns a Single representing the number of seconds elapsed since midnight.
    Dim pause As Single: pause = VBA.Timer + timePeriodInSeconds
    Do While VBA.Timer < pause
        DoEvents ' Yield to other processes.
    Loop
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T18:56:16.873

好吧，我也是新人，但据我所知，我会在子末尾设置 ie = Nothing 以放松 VBA 和 InternetExplorer 应用程序之间的任何关系

# c# - 输入一个整数并得到它的素数和重复项

> ID：13275080
> 
> 赞同：-1
> 
> 时间：2012-11-07T17:36:06.210
> 
> 标签：c#, primes

> **可能的重复：**
> [C# 中的素数因子](https://stackoverflow.com/questions/5872962/prime-factors-in-c-sharp)

我试图让这个编码给我输入的整数的所有主要因素，包括它的重复项。我有这个当前的代码，它似乎正在工作，但它并没有显示它的所有主要因素和重复项。任何帮助，将不胜感激。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace _1_Numeric_Problem
{
    class Program
    {
        static void Main(string[] args)
        {
            string myInput;
            int myInt;
            int p;

            Console.WriteLine(("Please input an integer"));

            myInput = Console.ReadLine();
            myInt = Int32.Parse(myInput);

            {
                for (int i = 2; i > 1; i++)
                {
                    if (i == 100000)

                        break;

                    if (myInt % i == 0)
                    {

                        if (i <= 3)
                        {

                            Console.Write("{0} ", i);
                            Console.ReadLine();
                            continue;
                        }

                        else
                        {
                            for (p = 2; p < i; p++)
                                if (i % p != 0)
                                {
                                    Console.Write("{0} ", i);
                                    Console.ReadLine();
                                    return;
                                    Console.ReadLine();
                                }
                                else
                                {
                                    p++;
                                    continue;
                                }

                        }
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:06:56.943

尝试替换以下代码：

```
for (p = 2; p < i; p++) {
    if (i % p != 0) {
        Console.Write("{0} ", i);
        Console.ReadLine();
        return;
        Console.ReadLine();
    } else {
        p++;
        continue;
    }
} 
```

用这个代替：

```
bool isPrime = true;

for (p = 2; p <= Math.Sqrt(i); p++) {
    if (i % p == 0) {
        isPrime = false;
        break;
    }

    if (isPrime) {
        Console.Write("{0} ", i);
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:43:51.687

你不能像这样做一个for循环吗？

```
for (int i = 2; i < myInt; i++)
{
    if(myInt % i == 0)
        //Do something with it.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T18:26:45.127

使用试除法进行整数分解的基本算法从 2 开始尝试每个可能的因子，如果它除*n*，则输出因子，减少*n*并搜索下一个因子；请注意，如果*f除以**n*则不会递增，因为它可能会再次除以减少的*n*。当*f*大于*n*的平方根时，循环停止，因为此时*n*必须是素数。这是伪代码：

```
function factors(n)
    f := 2
    while f * f <= n
        if n % f == 0
            output f
            n := n / f
        else
            f := f + 1
    output n 
```

有更好的方法来分解整数，但这应该让你开始。当你准备好更多时，我谦虚地在我的博客上推荐这篇[文章。](http://programmingpraxis.com/essays)

# opengl - JOGL glTexSubImage2D 占用高达 100% 的 cpu 并且需要很长时间

> ID：13275082
> 
> 赞同：0
> 
> 时间：2012-11-07T17:36:08.013
> 
> 标签：opengl, jogl

我遇到的问题是，在 Linux 上运行并占用 100% 的 CPU 时，单个 gl.glTexSubImage2D() 调用的执行时间需要 0.1-0.2 秒。在mac上一切都很好。

调用参数如下：

```
gl.glTexSubImage2D(GL.GL_TEXTURE_2D, 0, 0, 0, 1920, 1080, GL2.GL_RED, GL2.GL_UNSIGNED_SHORT, data); 
```

纹理设置如下：

```
void glCreateClearTex(GL gl, int target, int fmt, int format, int type, int filter, int w, int h, int val) {
    float fval = 0;
    int stride;
    if (w == 0)
        w = 1;
    if (h == 0)
        h = 1;
    stride = 2/*2048*/ * 2;
    ByteBuffer init = ByteBuffer.allocateDirect(stride * h/*2048*/);
    glAdjustAlignment(gl, stride);
    gl.glPixelStorei(GL2.GL_UNPACK_ROW_LENGTH, w);
    gl.glTexImage2D(target, 0, fmt, w, h, 0, format, type, init);
    gl.glTexParameterf(target, GL2.GL_TEXTURE_PRIORITY, 1.0f);
    gl.glTexParameteri(target, GL2.GL_TEXTURE_MIN_FILTER, GL2.GL_LINEAR);
    gl.glTexParameteri(target, GL2.GL_TEXTURE_MAG_FILTER, GL2.GL_LINEAR);
    gl.glTexParameteri(target, GL2.GL_TEXTURE_WRAP_S, GL2.GL_CLAMP_TO_EDGE);
    gl.glTexParameteri(target, GL2.GL_TEXTURE_WRAP_T, GL2.GL_CLAMP_TO_EDGE);
    gl.glTexParameterfv(target, GL2.GL_TEXTURE_BORDER_COLOR, FloatBuffer.wrap(new float[] { fval, fval, fval, fval }));
} 
```

做同样工作的 Mplayer 在本地运行得很好。glxgears 运行正常，但也占用了 100%。这可能是 OpenGL 设置问题的迹象，但 glxinfo 和其他人报告它是硬件渲染。显卡是 ATI FirePro。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:28:52.637

我发现了这个问题。Jogl 有两个 gl.glTexSubImage2D() 的变体。一种是使用数据 ptr 上传到 pbo，然后再上传到 GPU，另一种是在已经准备好的 pbo 中偏移。我的错误是我上传了两次数据，这不知何故导致了 linux 的严重减速。

So the fix is to upload data to pbo and then upload it to GPU with gl.glTexSubImage2D() using offset inside pbo.

# vba - 没有权限; 错误 70 ....Word 2007

> ID：13275094
> 
> 赞同：1
> 
> 时间：2012-11-07T17:36:55.030
> 
> 标签：vba, ms-word, activex

运行 Word 2007 宏时遇到一个奇怪的问题。

背景信息：此特定宏使用 ActiveX 控件。这允许用户从数据库中获取客户/地址信息并填充到 Word 文档的格式化字段中。

几年来，所有这些都在办公室的 50 多台用户 PC 上完美运行。昨天早上来到办公室，突然它不再工作了。每个人都会收到错误 70 权限被拒绝消息。

以供参考`sProgressPath = "p:\acts\"`

以下是部分代码：

```
Dim InFile As String

InFile = sFolderPath & "Results.txt"

'Delete results file if present

If Dir(InFile) <> "" Then
   Kill InFile
End If

'start an instance of progress by executing the batch file

Set objshell = CreateObject("WScript.Shell")

strBatFilePath = sProgressPath & "how2send.bat"

**objshell.Run strBatFilePath, 0**

Set objshell = Nothing 
```

# php - 文件名中的 str_replace

> ID：13275099
> 
> 赞同：-1
> 
> 时间：2012-11-07T17:37:18.533
> 
> 标签：php, file, directory, str-replace

我有一个 PHP 代码，可以在列表中显示目录的文件内容。每个文件都是链接的，因此如果单击，它将下载或打开。目录内的文件将是客户上传的文件。如果文件名包含空格，则链接已损坏且无法打开，因此我希望将空格替换为下划线。

我知道 str_replace 可以满足我的要求，但是我不确定如何将其应用于此代码（我没有编写）。

```
// Define the full path to your folder from root 
$path = "uploads/artwork"; 

// Open the folder 
$dir_handle = @opendir($path) or die("Unable to open $path"); 

// Loop through the files 
while ($file = readdir($dir_handle)) { 

if($file == "." || $file == ".." || $file == "index.php" ) 

    continue; 
    echo "<a href=uploads/artwork/$file>$file</a><br />"; 

} 
// Close 
closedir($dir_handle); 
```

非常感谢所有帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T17:41:05.920

当您将它们保存到服务器时，您还必须用下划线替换文件名。

由于您没有保存文件的位置的代码，因此您可以[`urlencode()`](http://php.net/urlencode)链接 URL，这样它就不会被危险字符破坏。请注意，最初它被空格打破，因为你没有`href`用引号括起来的值，我在这里做的：

```
echo "<a href='" . urlencode("uploads/artwork/$file") . "'>$file</a><br />"; 
```

否则，要用下划线替换空格，你会这样做：

```
echo "<a href=" . str_replace( ' ', "_", "uploads/artwork/$file") . ">$file</a><br />"; 
```

但同样，这可能需要您在上传时更改文件名。

请注意，您还需要调用该链接[`htmlentities()`](http://php.net/htmlentities)的`$file`一部分，以防止诸如`<`破坏 HTML 页面之类的字符。因此，最终结果将是：

```
echo "<a href='" . urlencode("uploads/artwork/$file") . "'>" . htmlentities( $file) . "</a><br />"; 
```

# visual-studio - Visual Studio 是否具有屏幕中心输入模式？即保持输入的焦点在屏幕的垂直中间

> ID：13275100
> 
> 赞同：2
> 
> 时间：2012-11-07T17:37:22.683
> 
> 标签：visual-studio

我可以让编辑器将当前输入保持在窗口的垂直中心吗？

使页面文本自动滚动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:02:50.427

我发现了一些对我想要的有用的东西，但仍然想要居中的打字焦点模式。

`Ctrl`+`↑</kbd> – moves view up one line at a time, so the text scrolls 'down' one line at a time
`Ctrl`+`↓</kbd> – moves view down one line at a time, so the text scrolls 'up' one line at a time``

# asp.net-mvc - 处理 MVC 子操作中的错误

> ID：13275101
> 
> 赞同：2
> 
> 时间：2012-11-07T17:37:22.777
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, partial-views, child-actions

我的错误处理收集（一些手动，一些自动）在控制器执行期间产生的错误。然后我有一个呈现错误消息的局部视图。我将错误消息存储在 ViewData 中（如果我在 RedirectResult 中响应，则将它们传输到 TempData）。

问题是：**如果子操作导致错误，它将不会被显示**，因为它们（至少是页面下方的那些）是在呈现局部视图之后执行的。

现在，我唯一的、有点绝望的想法是将消息呈现为布局页面底部的 javascript，并让该 javascript 更新错误显示框。但它闻起来很糟糕，我不应该为此需要客户端代码。

在其他所有事情之后，有没有办法让部分视图“延迟渲染”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T02:01:43.357

您可以尝试使用`Html.Action`结果并将结果存储在每个子操作的变量中。

完成后，您可以调用您`Html.RenderPartial`的“错误面板”。

```
@{
    var result = Html.Action("ChildAction"); 
}

@Html.Partial("ErrorMessages")

@result 
```

然后通过放置变量而不是调用操作来恢复常规布局。

# c++ - for(auto e : xxx) 与构造函数冲突

> ID：13275106
> 
> 赞同：0
> 
> 时间：2012-11-07T17:37:37.427
> 
> 标签：c++, qt, c++11

我定义了一个类“eventZone”，它在我的类“配置”中使用

`class configuration { ... QMap<QString, eventZone> zones ... }`

直到最近我成功地使用了像锯一样的for循环

```
for(eventZone evz : config.zone.values()) { ... } 
```

但是这不起作用，因为我为 eventZone 实现了一个复制构造函数（需要对其进行序列化并能够保存配置）

我得到的错误是

```
/home/.../zonedisplay.cpp:43: erreur : no matching function for call to 'eventZone::eventZone(eventZone&)' 
```

我的新构造函数具有类型：

```
explicit eventZone(const eventZone &cpy); 
```

如何让这两者共存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:01:13.793

没有理由放在`explicit`这里。`explicit`的工作是防止隐式*转换*，但你不转换 - 你只是复制。去掉它。只有具有与类类型本身*不同*类型的参数的单参数构造函数才需要它。

无论如何，C++ 中通常的习惯用法是获取引用（除非您明确需要副本），这也适用于基于范围的 for 循环：

```
for(auto const& e : config.zone.values())
  // do whatever with 'e' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:54:22.720

您需要从复制构造函数中删除显式。或者您可以通过引用传递您的自动值...

for (auto &value : 容器) ...

# java - java代码，我想确保我做得正确吗？

> ID：13275108
> 
> 赞同：-4
> 
> 时间：2012-11-07T17:37:49.000
> 
> 标签：java, validation

所以我必须设计和实现类时钟来在程序中实现一天中的时间....我已经完成了所有我只需要最后两个部分的帮助（不确定它是否正确我是如何做到的） 1.当分钟大于或等于60时增加小时。当秒大于或等于60时增加分钟。2.inputTime为时钟对象输入小时，分钟和秒。验证输入（小时0-23。分钟 0-59，秒 0-59）

这就是我所拥有的 1。

```
while (Minutes >= 60) {
   Minutes = Minutes - 60;
   Hours = Hours + 1;
}

while (Seconds >= 60) {
    Seconds = Seconds - 60;
    Minutes = Minutes + 1;
} 
```

2.

```
public void inputTime() {
    Scanner input = new Scanner(System.in);

    System.out.println("Enter Hours = ");
    Hours = input.nextInt();
    System.out.println("Enter Minutes = ");
    Minutes = input.nextInt();
    System.out.println("Enter Seconds = ");
    Seconds = input.nextInt();

    //validates the input
    if (0 <= Hours && Hours < 24)
        Hours = Hours;
    else
        System.out.println("invalid");

    if (0 <= Minutes && Minutes < 60) 
        Minutes = Minutes;
    else
        System.out.println("invalid");

    if (0 <= Seconds && Seconds < 60)
        Seconds = Seconds;
    else
        System.out.println("invalid");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:44:45.587

您的代码包含大量错误，并且在没有使用任何合理的编码约定的情况下编写。

1.  我们从小写字母开始变量和方法。(`Minutes`等`Seconds`)
2.  `while(Minutes>60 | Minutes==60);`没有事情，因为它的身体是空的。
3.  `Minutes>60 | Minutes==60`语法错误：你应该使用`||`“或”
4.  尽管 java 允许在`if-else`没有它的情况下编写结构，`{}`但强烈建议代码可读性
5.  Java 编译器忽略空格和制表符。`if-else`但是，您应该在块内使用缩进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:47:22.643

输入很少。

1.  使用`||`代替`|`in 删除`;`最后，添加花括号来包装接下来的两个语句。

    ```
    while(Minutes>60 || Minutes==60){
     Minutes=Minutes-60;
     Hours=Hours+1;
    }
    while(Seconds>60 || Seconds==60){
      Seconds=Seconds-60;
      Minutes=Minutes+1;
    } 
    ```

2.  在分钟处理之前进行第二次处理，因为您的`seconds`处理更改了处理`minutes`时应注意的事项`minutes`。

    ```
    while(Seconds>60 || Seconds==60){
      Seconds=Seconds-60;
      Minutes=Minutes+1;
    }
    while(Minutes>60 || Minutes==60){
     Minutes=Minutes-60;
     Hours=Hours+1;
    } 
    ```

3.  使用正确的命名约定，即类名以大写开头，而方法和变量以小写开头。

4.  完成读取输入后，最后关闭`Scanner`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:00:18.117

您可以计算它会循环多少次，而不是使用循环。

```
minutes += seconds / 60;
seconds %= 60;
hours += minutes / 60;
minutes %= 60; 
```

注意：您应该计算第`seconds`一次的调整，因为它可能会改变小时数。

# ios - xcode storyboard Container View - 如何访问视图控制器

> ID：13275112
> 
> 赞同：50
> 
> 时间：2012-11-07T17:38:04.433
> 
> 标签：ios, objective-c, xcode, uiviewcontroller, container-view

我正在尝试使用情节提要并使事情正常工作。我已将一个容器视图添加到我现有的视图之一。当我尝试在我的视图控制器`.h`文件（ctrl-drag）中添加对此的引用时，我得到一个`IBOutlet UIView *containerView`. 如何获取对容器视图的视图控制器的引用？我需要容器视图控制器，这样我就可以将它设置为我的视图控制器的委托，这样它们就可以相互“交谈”。

我的故事板设置为：

![在此处输入图像描述](../Images/df7057190e53a5530c7fb64da878fc23.png)

它在我的 .h 文件中引用为：

![在此处输入图像描述](../Images/73a9dfc42dc4f50c589f8fda5781eac9.png)

请注意 .h 中的 UIView，而不是视图的 InstallViewController。如何添加对视图控制器的引用？我需要能够设置它的委托。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-11-16T17:00:15.783

还有另一种解决方案，方法是为嵌入 segue 指定一个标识符并在方法中检索相应的视图控制器`prepareForSegue:`

这种方式的优点是您不需要依赖添加子视图控制器的特定顺序，因为每个子视图控制器都是通过唯一的 segue 标识符嵌入的。

2013-01-17 更新 - 示例

```
- (void) prepareForSegue:(UIStoryboardSegue*)segue sender:(id)sender
{
    // -- Master View Controller
    if ([segue.identifier isEqualToString:c_SegueIdEmbedMasterVC])
    {
        self.masterViewController = segue.destinationViewController;
        // ...
    }
    // -- Detail View Controller
    else if ([segue.identifier isEqualToString:c_SegueIdEmbedDetailVC])
    {
        self.detailViewController = segue.destinationViewController;
        // ...
    }
} 
```

`c_SegueIdEmbedMasterVC`&`c_SegueIdEmbedDetailVC`是具有故事板中定义的 segue ID 的相应 ID 的常量。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-09T14:04:23.167

当您添加容器视图时，xcode 会调用 UIViewController 方法`addChildViewController:`

在您的情况下，您可以让容器 ViewController 在 SplashViewController 的列表中查找它`childViewControllers`，如下所示：

```
for (UIViewController *childViewController in [self childViewControllers])
{
    if ([childViewController isKindOfClass:[InstallViewController class]])
    {
        //found container view controller
        InstallViewController *installViewController = (InstallViewController *)childViewController;

        //do something with your container view viewcontroller

        break;
    }
} 
```

昨天我也有同样的疑问:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-31T10:53:27.453

[Vitor Franchi](https://stackoverflow.com/users/973801/vitor-franchi)的答案是正确的，但可能更高效、更方便。特别是在多次访问子视图控制器时。

创建只读属性

```
@interface MyViewController ()
@property (nonatomic, weak, readonly) InstallViewController *cachedInstallViewController;
@end 
```

然后创建一个方便的getter方法

```
- (InstallViewController *)installViewController
{
    if (_cachedInstallViewController) return _cachedInstallViewController;

    __block InstallViewController *blockInstallViewController = nil;
    NSArray *childViewControllers = self.childViewControllers;
    [childViewControllers enumerateObjectsUsingBlock:^(id childViewController, NSUInteger idx, BOOL *stop) {

        if ([childViewController isMemberOfClass:InstallViewController.class])
        {
            blockInstallViewController = childViewController;
            *stop = YES;
        }
    }];

    _cachedInstallViewController = blockInstallViewController;

    return _cachedInstallViewController;
} 
```

从现在开始以这种方式访问​​子视图控制器

```
[self.installViewController doSomething]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-17T17:37:43.223

```
UIView* viewInsideOfContainer = installerView.subviews[0]; 
```

将为您提供控制器 UIView 引用的 UIViewController 内的 UIView。您可以将子视图转换为从 UIView 继承的任何类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-31T11:35:08.583

如果 nib 被加载，它将调用 addChildViewController 作为初始化过程的一部分

所以一个高性能的解决方案也可以覆盖

```
- (void)addChildViewController:(UIViewController *)childController 
```

在那里你可以捕捉你的 childController 例如通过比较它的 Class 并将它分配给一个属性/ ivar

```
-(void)addChildViewController:(UIViewController *)childController
{
    [super addChildViewController:childController];

    if([childController isKindOfClass:[InstallViewController class]])
    {
        self.installViewController = (InstallViewController *)childController;
    } 
```

}

这将使您免于通过 childViewControllers 进行迭代。

# sql - Long Integer 可以存储字母吗？

> ID：13275113
> 
> 赞同：3
> 
> 时间：2012-11-07T17:38:05.583
> 
> 标签：sql, ms-access-2007, database-performance

我在 Access 中运行了“分析性能”功能，它有一个提高性能的“想法”；Access 说我应该将看起来像这样的字母数字混合的项目`12BB1-DF740`从`text`数据类型转换为`long integer`（来自想法的特定名称）。Access是否正确，这将提高性能是次要的长整数是否可以存储字母。

*[§ 关于数据 - 提供给我的数据中的连字符始终出现在该位置；字母总是AF]*

据我所知，[w3schools](http://www.w3schools.com/sql/sql_datatypes.asp)表示`Long`只会存储数字

> `Long`- 允许 -2,147,483,648 和 2,147,483,647 之间的整数

*   我在混淆数据类型吗？（此外，当我拉起设计视图时，它仅`number`作为数据类型提供；没有`long`or `long integer`）
*   可以`Long Integer`存信吗？
*   如果我的列已经填充，并且我转换了数据类型，我会丢失数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:47:00.000

您可以通过将它们拆分为 2 个 Long Integer 列来存储这些值。然后，当您需要原始文本表单时，`Hex()`用短划线连接它们的值。

```
? Hex(76721) & "-" & Hex(915264)
12BB1-DF740 
```

但是我不明白为什么值得这样做。有时，性能分析器的建议对我来说没有意义；就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:45:09.540

我从来没有遇到过这种情况，但看起来它认为你的字符串是十六进制数字。

如果除了 AF 之外你从来没有其他字母，那么你可以将它们存储为 long，然后使用 Hex() 函数转换回来，但这看起来很笨拙，除非你真的很想获得一些性能，否则我会避免这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T17:57:21.520

如果它实际上是十六进制数据，并且它始终具有相同的格式，以便可以在同一位置添加破折号，那么可以存储数据数字，并在需要时将其转换为十六进制表示法。

十个十六进制数字代表 40 位数据，因此`Long`w3schools 页面中描述的类型不会这样做，因为它只有 32 位。您需要一个 64 位的数据类型，例如 a `double`or `bigint`。（后一种可能在 Access 中不可用。）

但是，只有在您实际对数字形式的数据进行任何处理时，这才是真正的收获。否则，每条记录只能保存几个字节，并且需要额外的处理来转换为数字格式。

如果您的表已经填充，您将必须读出值、转换它们，然后以数字形式将它们存储回。

# objective-c - 获取 UITextView 中文本的宽度（自定义字体）

> ID：13275114
> 
> 赞同：0
> 
> 时间：2012-11-07T17:38:06.927
> 
> 标签：objective-c, uitextview

我有带有自定义字体（ttf 文件）的 UITextView，它运行良好，但是当我尝试使用以下代码获取文本的宽度时

```
UITextView*textInput;

CGFloat width1 =  [textInput.text sizeWithFont:textInput.font].width;

frame.size.width=width1;
textInput.frame = frame; 
```

它不正确：width1 小于文本的实际宽度..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T17:53:18.947

现在在您的代码中，我不知道什么是 textInput，但可能是一个没有 UITextView 使用的真实字体的字符串。UITextView 有属性AttributeText，通过它可以获取一个NSAttributedString。
在此之后，您可以获得大小：

```
NSMutableAttributedString* attributedString=[myTextView attributedText];
NSSize size=[attributedString size]; 
```

然后 size.width 将是宽度。

# c# - 将像素应用于蒙版

> ID：13275122
> 
> 赞同：0
> 
> 时间：2012-11-07T17:38:22.463
> 
> 标签：c#, image, processing, mask, digital

我目前正在向一个非常简单的数字图像处理程序添加不同的功能。它是使用不安全的方法编码的。该程序仅适用于灰度图像。

我的问题是如何将蒙版应用于像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:47:34.090

只需将 pix_vals 乘以掩码并求和。所以只需添加：

p[y * stride + x] = pix_val[0] * Gx[0] + ... + pix_val[8] * Gx[8];

编辑：但要注意极端情况，您应该真正将偏移量更改为 [-1, 0, 1] 而不是 [0, 1, 2] 并处理边界条件。

# c++ - 使用 boost::split 的编译器警告

> ID：13275129
> 
> 赞同：1
> 
> 时间：2012-11-07T17:38:39.517
> 
> 标签：c++, boost

> **可能重复：**
> [C++ Boost：这个警告的原因是什么？](https://stackoverflow.com/questions/1301277/c-boost-whats-the-cause-of-this-warning)

此代码取自 boost 文档[http://www.boost.org/doc/libs/1_51_0/doc/html/string_algo/usage.html#id3240174](http://www.boost.org/doc/libs/1_51_0/doc/html/string_algo/usage.html#id3240174)

```
 using namespace boost;
    string str1("hello abc-*-ABC-*-aBc goodbye");
    typedef vector< string > split_vector_type;
    split_vector_type SplitVec;
    split( SplitVec, str1, is_any_of("-*"), token_compress_on ); 
```

我收到讨厌的编译器警告

```
1>c:\program files\boost\boost_1_51\boost\algorithm\string\detail\classification.hpp(102) : warning C4996: 'std::copy': Function call with parameters that may be unsafe - this call relies on the caller to check that the passed values are correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++ 'Checked Iterators'
1>        c:\program files (x86)\microsoft visual studio 9.0\vc\include\xutility(2550) : see declaration of 'std::copy'
1>        c:\program files\boost\boost_1_51\boost\algorithm\string\classification.hpp(206) : see reference to function template instantiation 'boost::algorithm::detail::is_any_ofF<CharT>::is_any_ofF<boost::iterator_range<IteratorT>>(const RangeT &)' being compiled
1>        with
1>        [
1>            CharT=char,
1>            IteratorT=const char_type *,
1>            RangeT=boost::iterator_range<const char_type *>
1>        ]
1>        c:\users\james\code\ecrew\work\src\cinstrumentpanel.cpp(71) : see reference to function template instantiation 'boost::algorithm::detail::is_any_ofF<CharT> boost::algorithm::is_any_of<const char[3]>(RangeT (&))' being compiled
1>        with
1>        [
1>            CharT=char,
1>            RangeT=const char [3]
1>        ] 
```

为什么？

除了简单地用 _SCL_SECURE_NO_WARNINGS 压制它们之外，我如何才能摆脱警告

提升版本 1.51

MSVSC2008

# php - 如何避免 PHP 中可能丢失的缓存文件？

> ID：13275131
> 
> 赞同：0
> 
> 时间：2012-11-07T17:38:42.167
> 
> 标签：php, caching, if-statement, file-get-contents

我有一个简单的缓存系统

```
if (file_exists($cache)) {
echo file_get_contents($cache);
// if coming here when $cache is deleting, then nothing to display
}
else {
// PHP process
} 
```

我们会定期删除过期的缓存文件，例如 1 小时后删除所有缓存。虽然这个过程非常快，但我认为可以在`if statement`和`file_get_contents`进程之间删除缓存文件。

我`if statement`的意思是当检查缓存文件是否存在时，它存在；但是当`file_get_contents`试图捕捉它时，它不再存在（通过同时缓存删除过程删除）。

`file_get_contents`锁定文件以避免在读取过程中进行删除过程。`if statement`但是当将 PHP 进程发送到第一个条件（在 开始之前）时，可以删除该文件`file_get_contents`。

有什么方法可以避免这种情况吗？缓存删除系统是否不同？

**注意：**我没有遇到任何实际问题，因为捕获此事件的可能性不大，但从逻辑上讲这是可能的，并且应该在重负载时发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:58:36.900

失败时，`file_get_contents`返回 false，那么这个呢：

```
if (($output = file_get_contents($filename)) === false){
  // Do the processing.
  $output = 'Generated content';
  // Save cache file
  file_put_contents($filename, $output);
}
echo $output; 
```

顺便说一句，您可能需要考虑使用`fpassthru`，它更节省内存，尤其是对于较大的文件。在大文件（> 100 MB）上使用 file_get_contents 可能会导致问题（取决于您的配置）。

```
<?php
$fp = @fopen($filename, 'rb');
if ($fp === false){
  // Generate output
} else {
  fpassthru($fp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:58:48.713

幸运的是`file_get_contents`返回`FALSE`错误，所以你可以快速烘焙它：

```
if (FALSE !== ($buffer = file_get_contents())) {
    echo $buffer;
    return;
}
// PHP process 
```

或类似的。`@`考虑到您希望操作员隐藏有关不存在文件的任何警告，这有点快速和肮脏的方式：

```
if (FALSE !== ($buffer = @file_get_contents())) { 
```

另一种选择是锁定，但是如果您已锁定文件，这可能会阻止您的缓存删除*不*删除文件。

然后剩下的是你自己的缓存。这意味着在 PHP 中读取文件创建时间，检查它是否小于 5 分钟，然后进行文件删除处理（5 分钟是示例性的），然后您就会知道该文件已经过时并被替换为新内容。然后重新创建文件。否则读入文件，这可能比使用`readfile`而不是`file_get_contents`和更好`echo`。

# google-maps-api-3 - 带参数的 kml 加载未加载到地图上

> ID：13275132
> 
> 赞同：1
> 
> 时间：2012-11-07T17:38:52.027
> 
> 标签：google-maps-api-3, parameter-passing, kml

我正在尝试在谷歌地图上加载一个 kml，但我做不到。我在单击事件后加载 kml，然后调用包含 url 的函数：

```
function LoadRoute(latlng, param1, param2, param3) {
var georssLayer = new google.maps.KmlLayer('http://myserver.net/kmls/file.asp?id='+param1+'&date='+param2+' 00:00:00&EndDate='+param3+' 23:59:59');
georssLayer.setMap(map);
} 
```

上面的代码不加载 kml，但另一方面，如果我加载直接下载的同一个文件，它可以工作，我的意思是，像这样：

```
function LoadRoute(latlng, param1, param2, param3) {
var georssLayer = new google.maps.KmlLayer('http://myserver.net/kmls/file.kml');
georssLayer.setMap(map);
} 
```

有谁知道发生了什么？我认为这与参数语法有关。无论如何，如果我创建另一个包含上述 url 的函数来检查它是否可以通过 url 访问，它也可以工作。为了检查它，我打开一个新的选项卡窗口来查看 url 格式是否正确，结果是文件已下载。

```
function open_in_new_tab(latlng, param1, param2, param3)
{
  window.open('http://myserver.net/kmls/file.asp?id='+param1+'&date='+param2+' 00:00:00&EndDate='+param3+' 23:59:59', '_blank');
  window.focus();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:21:42.550

您的网址中有空格：

```
var georssLayer = new google.maps.KmlLayer('http://myserver.net/kmls/file.asp?id='+param1+'&date='+param2+' 00:00:00&EndDate='+param3+' 23:59:59'); 
```

这意味着它需要进行[urlencoded](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)

在 javascript 中，您可以使用[转义对字符串进行 URL 编码](http://www.w3schools.com/jsref/jsref_escape.asp)

# sql - 子选择中的 SQL AVG

> ID：13275135
> 
> 赞同：0
> 
> 时间：2012-11-07T17:39:08.797
> 
> 标签：sql, charts, subquery, average

我想从特定类别 (fk_rate_category) 中的产品 (productId) 中获取费率以及该类别中所有产品的总体平均费率。

更具体地说：我需要图表的数据。图表中的一条线表示产品的费率（y 轴 = rate ; x 轴 = date_added），另一条线显示所有产品的平均费率。

我有以下方法：

```
SELECT        id, productId, rate, fk_rate_category, date_added,
                             (SELECT        AVG(rate) AS Expr1
                               FROM            rates
                               WHERE        (fk_rate_category = r.fk_rate_category)) AS avgRate
FROM            rates AS r
WHERE        (productId = @productId) AND (fk_rate_category = @fk_rate_category) 
```

问题是，使用我的方法，返回的每条记录中的 avgRates 值都是相同的。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:53:02.560

首先，当您可以通过连接获得相同的结果时，请始终尽量避免使用相关子查询，优化器会更好地处理它并且您会更快地获得结果。

我认为问题可能是因为您没有链接数据的日期以及 FK_Rate_Cateogry，我想如果这是出于图形目的，您会希望按日期计算平均值：

```
SELECT  r.ID,
        r.ProductID,
        r.Rate,
        r.FK_Rate_Category,
        r.Date_Added,
        ar.avgRate
FROM    Rates r
        LEFT JOIN
        (   SELECT  r.Date_Added, 
                    r.FK_Rate_Category, 
                    AVG(r.Rate) AS avgRate
            FROM    Rates r
            GROUP BY r.FK_Rate_Category, r.Date_Added
        ) ar
            ON ar.FK_Rate_Category = r.FK_Rate_Category
            AND ar.Date_Added = r.Date_Added
WHERE   r.ProductID = @ProductID
AND     r.FK_Rate_Category = @FK_Rate_Category; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:59:38.340

你得到了一组具有特定 id 和 rate_category 的记录。并且 avgRate 是具有相同 rate_category 的所有记录的平均值 - 该集合将外部记录作为子集（参见两个查询的条件）。所以所有返回的记录都具有相同的 avgRate 值。
所以我在你的逻辑线上看到了一些漏洞。

# c - 哪个初始化器适合 int64_t？

> ID：13275136
> 
> 赞同：14
> 
> 时间：2012-11-07T17:39:09.353
> 
> 标签：c, gcc, int64

我喜欢将我的变量初始化为一些“虚拟”值，并开始使用`int64_t`and `uint64_t`。到目前为止，看起来至少有三种方法可以将 an 初始化`int64_t`为特定值（并且对无符号等效项稍作更改）：

```
int64_t method_one   = 0;
int64_t method_two   = 0LL;
int64_t method_three = INT64_C(0); 
```

我使用 GCC 并以 OS X 和 Linux 为目标。我想选择一种旨在易于移植和清晰的方法——但最重要的是正确性。我是否过度考虑了这一点，或者是否有一种“最佳”或“最推荐”的方法来初始化这个变量类型，对于我抛出的任何特定值（当然是在它的范围内）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T00:39:44.610

```
int64_t method_one   = 0; 
```

……完全合理。C99（参见[此处](http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1256.pdf)的草案；是的，我知道它不再是最新的标准，但它是引入`int<N>_t`类型的标准）说：

*   `0`具有类型`int`（§6.4.4.1 第 5 段）；
*   表达式的类型是`int64_t`（§6.5.16 para.3）；
*   右侧的类型将转换为表达式的类型（第 6.5.16.1 段第 2 节）；
*   此转换不会更改值（§6.3.1.3 第 1 段）。

所以这完全没有问题，并且没有额外的混乱使得它在初始化为 0 或`int`.

```
int64_t method_two   = 0LL; 
```

`int64_t`不保证与`long long`; 然而，这实际上也应该适用于任何有符号的 64 位值（`ULL`对于无符号的 64 位值也是如此）：`long long`(and `unsigned long long`) 在符合 C99 的实现中应该至少为 64 位（§5.2.4.2.1 )，因此`LL`(and `ULL`) 对于初始化 64 位值应该始终是安全的。

```
int64_t method_three = INT64_C(0); 
```

对于可能在范围之外的值，这可以说是一个更好的选择`int`，因为它更清楚地表达了意图：`INT64_C(n)`将扩展到适合`n`（至少）64 位范围内的任何值（一般参见第 7.18 节，以及特别是第 7.8.4.1 节）。

* * *

在实践中，我可能会根据上下文使用上述任何一种。例如：

```
uint64_t counter = 0; 
```

（为什么要添加不必要的混乱？）

```
uint64_t some_bit = 1ULL << 40; 
```

（除非非常宽，`1 << 40`否则根本无法工作；在这里对我来说似乎不太可读。）`int``UINT64_C(1) << 40`

```
uint64_t some_mask = UINT64_C(0xFF00FF00FF00FF00); 
```

（在这种情况下，将值显式调用为 64 位常量对我来说似乎比写*更*易读`0xFF00FF00FF00FF00ULL`。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T17:51:33.693

就个人而言，我会使用第三种，这是实现这一目标的最便携的方式。

```
#include <stdint.h>

int64_t method_three  = INT64_C(0);
uint64_t method_three = UINT64_C(0); 
```

无论如何，我认为这不是一件很重要的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:58:14.577

根据 ANSI C 标准，a`long long int`和`unsigned long long int`is`LL`的后缀`ULL`分别为：

> **以ll 或 LL**为后缀的八进制或十六进制long long int、unsigned long long int 十进制、八进制或以**u 或 U 以及 ll 或 LL**为后缀的十六进制unsigned long long int

如果您知道`int64_t`定义为：

```
typedef signed long long int int64_t 
```

那么方法二绝对是正确的：

```
int64_t method_two   = 0LL;
uint64_t method_two   = 0ULL; 
```

**编辑**：

牢记可移植性问题，并且不能保证将其定义为`long long`，那么最好使用第三种方法：

```
INT64_C()
UINT64_C() 
```

# mysql - 关于查询的格式

> ID：13275137
> 
> 赞同：0
> 
> 时间：2012-11-07T17:39:09.543
> 
> 标签：mysql, sql, database, oracle

我制作了一个应用程序，其中我将 sql 查询放入 java 方法中，如下所示..

```
private static String getSaleTransactionsQuery(final String currentTradingDate){

        final String query =
            " SELECT '990' line_code, " +
            " sum(toti_wag.TTIW_CUST_CNT) amount " +
            " FROM total_till_wag toti_wag " +
            " where toti_wag.TOTI_TRADING_DATE = '" + currentTradingDate + "' ";

        return query;
    } 
```

现在，当我想过滤掉 sql 查询时，我必须将此查询复制到 sql 文件中，并且必须手动删除引号（“”）和加号（+），以使它们成为纯 sql，然后必须执行它们以查看查询输出，是否有任何其他工具可以格式化所有这些意味着删除引号和加号，请告知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:13:32.937

您可以制作一个简单的脚本来帮助您。

[http://jsfiddle.net/GFhFg/7/](http://jsfiddle.net/GFhFg/7/)

我发现在完成这项工作的 JavaScript 中将一些东西放在一起很容易。

```
function cleanIt(txt) {
    var result = "";
    // remove semi-colon at the end
    txt = txt.replace(/\;$/m, '');
    var lines = txt.split('\n');
    for(var i=0; i<lines.length; i++) {
        var line = lines[i];
        // trim whitespace
        line = line.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
        // remove + from beginning or end of line
        line = line.replace(/^\+\s*/, '').replace(/\s*\+$/, '');
        // remove quotes
        line = line.replace(/"/g, '');
        // remove the +'s around parameters/variables
        line = line.replace(/('?\s*\+\s*)([^\s\+']+)(\s*\+\s*'?)/g, '$2')
        result += line + '\n';
    }
    return result;
} 
```

显然它还没有经过详尽的测试，但它应该给你一个开始的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:14:29.327

**没有自动化的方法。** 您可以编写一些通用的自定义函数来为您完成。

一种好的主动方法是将所需的详细信息记录在日志文件中。如果您这样做并记录您的查询，那么您将在日志文件中看到不带引号和加号的查询。

# iphone - 如何使 xib 与 iphone 5 和 iphone 4 设备兼容

> ID：13275144
> 
> 赞同：45
> 
> 时间：2012-11-07T17:39:40.167
> 
> 标签：iphone, xcode, interface-builder

我正在尝试布局我的 xib，以便布局适合 iphone 5（4 英寸视网膜）和 3.5 设备。

因为我必须支持 IOS-5 我不能使用自动布局。我必须使用弹簧和 Struts。

我尝试了界面生成器中的所有内容。但要么我的观点超出了 iphone-3.5 英寸的底部，要么没有完全填充 iphone-4 英寸视网膜。

有人可以提示如何使 xib 与这两种设备兼容吗？

为了更清楚，我添加了屏幕截图：

当我在属性检查器中设置大小 3.5 时： ![当我在属性检查器中将大小设置为 3.5](../Images/7ea783d6e654cfacf5bb6b3c748e73ab.png)

它看起来在 iphone-5 中。按钮下方有一个空格： ![这就是它在 3.5 英寸设备的模拟器中的外观](../Images/68d8fdde69ea3c59871fcc82d88eb573.png)

如果我在界面生成器中设置尺寸 4 英寸。您可以看到底部按钮在 iphone-4 中不可见。 ![如果我在界面生成器中设置尺寸 3.5 英寸](../Images/ad65a6e017f2fb3ca8dc0b1b2dfcb7b3.png)

所以你会问我使用的是什么设置。他们是这样的：

![在此处输入图像描述](../Images/0fcc1feb475319a07db7f30864817afd.png) ![在此处输入图像描述](../Images/a6fd7252e3edcbfa715ee8625c246c22.png) ![在此处输入图像描述](../Images/d6c63e0608774db57e8123beff3a076d.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-08T06:43:04.900

1.  您为 UIviewController 添加新类别并将此代码添加到 .h 文件中

    ```
     - (id)initWithNibNameforIphone4:(NSString *)nibNameOrNil4 NibNameforIphone5:(NSString *)nibNameOrNil5 NibNameforIpad:(NSString *)nibNameOrNilpad bundle:(NSBundle *)nibBundleOrNil; 
    ```

2.  将此代码添加到您的 .m 文件中

    ```
     - (id)initWithNibNameforIphone4:(NSString *)nibNameOrNil4 NibNameforIphone5:(NSString *)nibNameOrNil5 NibNameforIpad:(NSString *)nibNameOrNilpad bundle:(NSBundle *)nibBundleOrNil
     {
       if (self = [super init])
     {
      self = [self initWithNibName:[self CheckDeviceIphone4:nibNameOrNil4 Iphone5:nibNameOrNil5 Ipad:nibNameOrNilpad] bundle:nibBundleOrNil];
      }
      return self;

    }

      -(NSString *)CheckDeviceIphone4:(NSString *)iphone4 Iphone5:(NSString *)iphone5 Ipad:(NSString *)ipad {

        return ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) ? ipad :([[UIScreen mainScreen] bounds].size.height == 568) ?  iphone5 :iphone4;
      } 
    ```

3.  打开 YouProject-Prefix.pch 文件并在此处导入您的类别

4.  现在你只需在这样的整个项目中使用它

    ```
     self.firstView=[[firstView alloc]initWithNibNameforIphone4:@"firstView4" NibNameforIphone5:@"firstView" NibNameforIpad:@"firstViewIpad" bundle:[NSBundle mainBundle]]; 
    ```

    谢谢和任何问题然后发表评论，不要忘记投票:-)

\

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-21T07:58:31.857

尝试将此添加到所有需要支持 iPhone 5 的控制器中：

```
- (void) loadView
{
    [super loadView];
    self.view.frame = [UIScreen mainScreen].bounds;
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-17T10:47:32.583

只需使用 Interface-builder
将视图大小设置为 None 它会在运行时获取视图大小，只需要处理视图中每个元素（UILabel、UIImage 等）的原点和自动调整大小。

*   **Interface-builder(XIB) -> Attribute Inspector -> Simulated Metrics - 大小：无**

![在此处输入图像描述](../Images/dd4d630239db332b1db186468c325113.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-14T22:55:54.443

我今天为此苦苦挣扎，无论我做什么，我的视图总是显示为 320x480，即使在视网膜 4" 模拟器上运行时也是如此。甚至 [UIScreen mainScreen].bounds 也返回 320x480！

我发现添加 Default-568h@2x.png 启动图像是让 iOS 将我的应用程序识别为“准备好视网膜 4”的关键。一旦我这样做了，我发现不需要做任何其他事情来让笔尖自动调整大小没有黑条。不需要有两个单独的 xib，在 Interface Builder 中更改设置，覆盖 loadView 等。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-05T11:53:02.177

您不需要为 3.5 英寸和 4 英寸设备使用不同的笔尖。为 4 英寸设备设计应用程序并正确设置 AutoResizingMask，它应该可以正常工作。

在您的情况下，只需将 AutoResizingMask 设置为

```
[view setAutoresizingMask:UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth]; 
```

自动调整大小的蒙版将视图正确地放置在两个设备中的位置。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-02T12:37:14.537

如果您选择使用 2 个 xib 文件的解决方案；在您的 initWithNibName() 方法中，只需使用不同的 nib 名称调用 super 即可。

我将测试原始的 480 高度尺寸而不是 568 高度，以便在 Apple 发布更大的屏幕时选择更大的 xib 文件。在未来，至少较大的 xib 不会像较小的 xib 那样被装箱。

```
// From MainView.m
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        // iPhone Classic
        self = [super initWithNibName:@"MainView" bundle:nibBundleOrNil];
    }
    else
    {
        // iPhone 5 or maybe a larger iPhone ??
        self = [super initWithNibName:@"MainView5" bundle:nibBundleOrNil];
    }

    return self;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-08T03:05:10.447

我有个主意。让您的 UI 分为页眉、正文和页脚（如网站）。然后在您的代码控制台中，找到 Size Inspector 并使用 Autosizing。

注意正方形的外线，它是您对主视图的控制位置。将页眉部分和正文部分中的控件（导航栏、UIImageView、UIButton 等）设置为顶部，将页脚中的控件（书签、关闭等）设置为底部。

每次运行时，控件都会附加到它们的自动调整大小设置。在 iPhone 5 上，页眉/正文和页脚之间会有一个空格，但我认为这很好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-11-20T09:36:02.680

定义下面的行并根据设备检查条件。

```
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) 
```

```
if (IS_IPHONE_5) {
    btnBookmark.frame=CGRectMake(0, 460, 100, 70);
    btnBookmark.frame=CGRectMake(150, 460, 100, 70);
}
else {
    btnBookmark.frame=CGRectMake(0, 360, 100, 70);
    btnBookmark.frame=CGRectMake(150, 360, 100, 70);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-02-07T02:06:37.340

我也遇到了 3.5" 和 4" 的问题，我误解了哪里出了问题，所以我想在这里记录一下，以防它帮助任何人。

如果您尝试访问它，直到或某些类似事件`self.view.frame`才会正确报告。`viewDidAppear`如果您尝试`self.view.frame`从内部访问，`viewDidLoad`则可以在自动调整大小*之前*报告框架的尺寸。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-07T17:56:34.927

如果不使用自动布局，您可能需要在代码中处理很多事情。我假设您的大多数布局都可以很好地使用弹簧和支柱，但某些 UI 元素不能，因此只需根据您的视图大小手动设置某些对象的框架是必要的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-11-07T18:00:28.960

*   在情节提要中，单击“显示文件检查器”。
*   在 Interface builder document->Document versioning 下，选择 Deployment=iOS 5（或您的选择）。

如果这不起作用，您需要处理每个视图。选择它们。在它们每个的属性检查器下，在视图部分下，请参阅模式属性。将此设置为“重绘”。

如果即使这样也不能得到令人满意的结果，请将视图大小设置为您将要使用的所有版本中的最小值。并设置 Mode 属性 = 'Scale to fill'。

以编程方式，Mode 属性是[view.contentmode](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW99)属性。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-05-01T15:13:56.093

只要您记得减去导航和工具栏的偏移量（在大多数情况下总共为 64），上面查询整个屏幕大小的 ivanzoid 片段就可以解决问题。

需要调整的是视图高度；弹簧和支柱否则会照顾它。

在 iPhone 5 上重新测试我的应用程序，我只需要在一个屏幕上执行此操作，并调整一些运行时控制位置。其他所有情况均由 XIB 默认处理。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-06-21T06:12:09.043

如果您不想使用两个 xib 并且有兴趣在 [此处使用 Autosizing](https://www.dropbox.com/s/sfqfkk8vusqtxi0/Demo.zip)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2013-06-21T06:19:55.100

如果你的 UI 太复杂并且包含太多 UIControls ，那么我建议在 viewDidLoad() 中执行以下操作：

```
NSLog(@"Iphone %f ",[[UIScreen mainScreen] bounds].size.height);
if ([[UIScreen mainScreen] bounds].size.height == 568) 
{
     //design frames of your controls accordingly add add the controls as subview to
     self.view            
     //this is iphone 5 xib
} else 
{
     //design frames of your controls accordingly add add the controls as subview to
     self.view 
     // this is iphone 4 xib
} 
```

# c++ - 如何在 CUDA 中正确使用全局内存？

> ID：13275145
> 
> 赞同：1
> 
> 时间：2012-11-07T17:39:46.503
> 
> 标签：c++, c, memory-management, cuda, gpu

我正在尝试在 CUDA 中做一个应用程序，它使用用**device**定义的全局内存。此变量在 .cuh 文件中声明。

在另一个文件中，.cu 是我的主要文件，我在其中执行 cudaMallocs 和 cudaMemCpy。

这是我的代码的一部分：

```
cudaMalloc((void**)&varOne,*tam_varOne * sizeof(cuComplex));
cudaMemcpy(varOne,C_varOne,*tam_varOne * sizeof(cuComplex),cudaMemcpyHostToDevice); 
```

varOne 在 .cuh 文件中声明如下：

```
 __device__ cuComplex *varOne; 
```

当我启动内核（我没有将 varOne 作为参数传递）并尝试使用调试器读取 varOne 时，它​​说无法读取变量。指针指向它 000..0 所以很明显它是错误的。

那么，我必须如何在 CUDA 中声明和复制全局内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:00:45.693

首先，您需要声明指向将从 CPU 复制到 GPU 的数据的指针。在上面的示例中，我们要将数组复制`original_cpu_array`到 CUDA 全局内存中。

```
int original_cpu_array[array_size];   
int *array_cuda; 
```

计算数据将占用的内存大小。

```
int size = array_size * sizeof(int); 
```

Cuda内存分配：

```
msg_erro[0] = cudaMalloc((void **)&array_cuda,size); 
```

从 CPU 复制到 GPU：

```
msg_erro[0] = cudaMemcpy(array_cuda, original_cpu_array,size,cudaMemcpyHostToDevice); 
```

执行内核

从 GPU 复制到 CPU：

```
msg_erro[0] = cudaMemcpy(original_cpu_array,array_cuda,size,cudaMemcpyDeviceToHost); 
```

空闲内存：

```
cudaFree(array_cuda); 
```

出于调试原因，我通常将函数调用的状态保存在一个数组中。（*例如，* `cudaError_t msg_erro[var];`）。这不是绝对必要的，但如果在分配和内存转移过程中发生错误，它将为您节省一些时间。

如果确实发生错误，我会使用如下函数打印它们：

```
void printErros(cudaError_t *erros,int size, int flag)
{
 for(int i = 0; i < size; i++)
     if(erros[i] != 0)
     {
         if(flag == 0) printf("Alocacao de memoria");
         if(flag == 1) printf("CPU -> GPU  ");
         if(flag == 2) printf("GPU -> CPU  ");
         printf("{%d} => %s\n",i ,cudaGetErrorString(erros[i]));
     }
} 
```

该标志主要用于指示代码中发生错误的部分。例如，在内存分配之后：

```
msg_erro[0] = cudaMalloc((void **)&array_cuda,size);
printErros(msg_erro,msg_erro_size, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:53:40.950

我已经尝试了一些示例，发现您不能直接使用内核中的全局变量而不传递给它。即使在 .cuh 文件中进行初始化，也需要在 main() 中进行初始化。

**原因：**

1.  如果全局声明，则内存不会在 GPU 全局内存中分配。您需要`cudaMalloc((void**)&varOne,sizeof(cuComplex))`用于分配内存。它只能在 GPU 上分配内存。声明`__device__ cuComplex *varOne;`就像原型和变量声明一样工作。但是，在使用之前不会分配内存`cudaMalloc((void**)&varOne,sizeof(cuComplex))`。
2.  此外，您最初需要将`*varOne`in main() 初始化为 Host 指针。使用后`cudaMalloc()`知道指针是Device Pointer。

步骤顺序是：（对于我测试过的代码）

```
int *Ad;        //If you can allocate this in .cuh file, you dont need the shown code in main()

__global__ void Kernel(int *Ad){
....
}

int main(){
....
      int size=100*sizeof(int);
      cudaMalloc((void**)&Ad,size);
      cudaMemcpy(Ad,A,size,cudaMemcpyHostToDevice);
....
} 
```

# c++ - 超类中的 C++ 引用子类

> ID：13275150
> 
> 赞同：1
> 
> 时间：2012-11-07T17:39:59.227
> 
> 标签：c++, oop, inheritance

我对在 C++ 中引用超类中的子类有点困惑。例如，给定 Java ：

```
public class Entity {

  protected ComplexEntity _ce;

  public Entity() {

  }

  public ComplexEntity getCentity() {
    return _ce;
  }
} 
```

ComplexEntity 扩展实体的地方。它可以工作。在子类中，我调用 getCentity() 没有错误。

现在，在 C++ 中，当我写这样的东西时：

```
 #pragma once

 #include "maininclude.h"
 #include "ExtendedEntity.h"
 using namespace std;

 class EntityBase
 {
 public:
    EntityBase(void);
    EntityBase(const string &name);

    ~EntityBase(void);

 protected:

    ExtendedEntity* _extc;
    string   _name;
 }; 
```

我收到编译器错误：

```
 error C2504: 'Entity' : base class undefined 
```

在从该实体继承的类中。为什么会发生这种情况？

在 C++ 中是完全不能接受的吗？

可能实体必须是抽象的？我想就可能的解决方法获得建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:47:13.410

您可以考虑使用[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)，从维基百科剪切/粘贴：

```
// The Curiously Recurring Template Pattern (CRTP)
template<class Derived>
class Base
{
    Derived* getDerived() { return static_cast<Derived*>(this); }
};

class Derived : public Base<Derived>
{
    // ...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:48:58.440

C++ 中的类需要知道其所有成员及其所有超类的大小。类`Entity`不知道它的子类的大小`ComplexEntity`，除非`ComplexEntity`在类之前定义了类`Entity`。但是，类`ComplexEntity`不知道其超类的大小`Entity`。

这个问题在 C++ 中存在，因为类成员是使用简单的偏移计算来访问的。您可以通过向前声明派生类并使用指针作为成员来解决此问题：

```
class Extended; // declare the derived class

class Base {  // define the base class
  Extended* e; // you cannot use Extended e here,
               // because the class is not defined yet.
};

class Extended : public Base {}; // define the derived class 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T17:55:15.400

您的代码如下所示：

```
struct D : B {}; // error: B doesn't mean anything at this point

struct B {
    D *d;
}; 
```

您的标头 ExtendedEntity.h 试图在定义 Entity 之前使用 Entity 的定义。

您需要将代码更改为：

```
struct D;

struct B {
    D *d;
};

struct D : B {}; 
```

# jquery - 从 jQuery 添加的字段中获取数据

> ID：13275152
> 
> 赞同：0
> 
> 时间：2012-11-07T17:40:01.137
> 
> 标签：jquery, asp.net-mvc, partial-views

我通过 jQuery 添加了动态数量的部分视图（基于下拉列表的选择）。

如何获取文本框中的数据？

```
 <script>
$(document).ready(function() {
    $('select#testStationUniqueId').change(function() {
        var testStation = $(this).val();
        $.ajaxSetup({ cache: false });

        $.ajax({
            url: "TestInput/getTestStationInformation/" + testStation,

            type: 'post',
            success: function(data) {
                $('#driveDetailDiv').empty();
                for (var i = 0; i < data.length; i++) {
                    $.post('TestInput/Details/', { id: data[i] }, function(data2) {
                        $('#driveDetailDiv').append(data2);
                    });
                }
            }
        });
    });
}); 
```

我的部分视图有一些标签和一些文本框。我不知道如何获取每个文本框的值。

```
 public PartialViewResult Details(string id)
    {
        DriveDetails t = new DriveDetails(id);
        return PartialView("DriveDetailsPartial", t);
    } 
```

`DriveDetailsPartial`有一些字段和文本框和下拉列表等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:10:03.283

你可以试试这个，在完成所有查询 ajax ($.post) 之后，`inputs`你将拥有所有`input's`to `driveDetailDiv`：

```
success: function(data) {
   $('#driveDetailDiv').empty();
   var arequest = [];
   for (var i = 0; i < data.length; i++) {
      arequest.push($.post('TestInput/Details/', { id: data[i] }, function(data2) {
         $('#driveDetailDiv').append(data2);
      }));
   }

   $.when.apply($, arequest).done(function() {
      var inputs = $('#driveDetailDiv').find('input[type="text"]');
   });​
} 
```

# java - JLabel 根据内部的值不断移动

> ID：13275154
> 
> 赞同：0
> 
> 时间：2012-11-07T17:40:06.327
> 
> 标签：java, swing, applet, jlabel

所以我正在为游戏创建一个 Java Applet，并且我正在使用 JLabel 来显示玩家的当前分数。JLabel 中的分数不断更新，但是当分数从 9 到 10 或从 99 到 100 时，由于添加了整数，JLabel 的位置（？或者可能只是 JLabel 的文本）移动了。

例如，

    分数：9 变成
   分数：10

如您所见，“Score”一词的位置向左移动。我想防止这种情况发生。我认为左对齐文本可以解决问题，但绝对没有。：/

这是一些相关的代码：

```
label = new JLabel("Score", SwingConstants.LEFT);
label.setFont(new Font("Lucida Grande", Font.PLAIN, 27));
label.setText("Score: " + getScore());
label.setBounds(0, 152, 213, 42); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:03:18.580

代替：

```
label.setText("Score: " + getScore()); 
```

经过：

```
label.setText(String.format("Score: %-5s", getScore())); 
```

其中`5`表示分数的最大位数。负数左对齐，否则右对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:48:37.900

尝试使用

> label.setMinimumSize(新维度(100,100));
> 
> label.setPreferredSize(新维度(100,100));

有一个非常相似的问题，当我把它们一起写成这个组件的属性时，它们工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:48:45.163

这都是关于您的布局管理器的。请参阅此示例。阅读布局管理器以了解解决此问题的其他方法。取消注释以防止标签移动。

```
public class Test
{
    private static int score = 0;

    public static void main(String[] args)
    {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        //panel.setLayout(new BoxLayout(panel, BoxLayout.X_AXIS));      

        final JLabel label = new JLabel("Score: " + score);
        //panel.add(Box.createHorizontalStrut(8));
        panel.add(label);
        //panel.add(Box.createHorizontalGlue());

        frame.add(panel);
        frame.pack();
        frame.setVisible(true);

        TimerTask task = new TimerTask() {
            public void run() {
                score++;
                label.setText("Score: " + score);
            }
        };

        Timer timer = new Timer();
        timer.scheduleAtFixedRate(task, 0, 100);
    }
} 
```

# xamarin.ios - 为什么 DateElement 选择器上没有后退按钮？

> ID：13275155
> 
> 赞同：4
> 
> 时间：2012-11-07T17:40:09.060
> 
> 标签：xamarin.ios, monotouch.dialog

[此 MT.D 演练](http://docs.xamarin.com/ios/Guides/User_Interface/MonoTouch.Dialog/Elements_API_Walkthrough) 显示了 UIDatePicker 上的后退按钮，该按钮在点击 DateElement 时出现。我在一个 iPad 应用程序中，并使用 MT.D DialogViewController*作为*整个 UIView 中的子视图。当日期选择器向上滑动时，我只是得到黑色背景，无法关闭选择器（没有带后退按钮的导航栏）。无线电组选择器也存在同样的问题。这是因为对话框视图控制器被用作子视图吗？任何想法如何使用内置的选择器逻辑通过后退按钮获得导航栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:03:27.550

您必须使用 DialogViewController 作为 UINavigationController 的子元素来获取后退按钮。在 iPad 上，您可以将 UINavigationController 嵌入到 UIPopoverController 中。将一个控制器的视图添加到另一个控制器的视图中在 iOS 上并不被认为是好的设计，并且不会导致您期望的行为。

# ruby-on-rails - 在表单提交的底部显示错误消息

> ID：13275157
> 
> 赞同：0
> 
> 时间：2012-11-07T17:40:18.733
> 
> 标签：ruby-on-rails, css, twitter-bootstrap

是否有一个 twitter 引导类可以在表单提交按钮的底部显示所有验证错误消息？

```
<div class="row-fluid">
<div class="span12"> 
    <div class="devise-body">

<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name),
      :html => { :class=>'control-group error'} ) do |f| %>
      <%= f.error_notification %>
      <div class="controls">
        <div class="row-fluid">
            <div class="span6">
            <%= f.input :first_name,:required=>true,:autofocus => true %>
                            </div>
            <div class="span6"><%= f.input :last_name,:required=>true%>  
         </div>
        </div>
        <div class="row-fluid">
            <div class="span6"><%= f.input :company %></div>
            <div class="span6"><%= f.input :title %></div>
        </div>

        <div class="row-fluid">
            <div class="span6"> <%= f.input :email, :required => true %></div>
            <div class="span6"><%= f.input :phone_number %></div>
        </div>  

        <%= f.input :password, :required => true %>
        <%= f.input :password_confirmation, :required => true %>
      </div>
      <div class="form-actions" > 
        <!-- #class="form-actions" -->
        <%= f.button :submit, "Sign up" ,:class => 'btn'%>
      </div>
    <% end %>
    <%= render "devise/shared/links" %>
   </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:43:58.567

如果我是你，我会使用他们的警报类：

[http://twitter.github.com/bootstrap/components.html#alerts](http://twitter.github.com/bootstrap/components.html#alerts)

# windows - 如何使用 WMI C# 获取所有 Windows 组及其权限？

> ID：13275158
> 
> 赞同：3
> 
> 时间：2012-11-07T17:40:18.453
> 
> 标签：windows, c#-4.0, wmi

我正在努力阅读

1.  Windows 中的所有用户**组**
2.  **每个组的权限**（ACL、DACL 等）。

这是我的代码

```
public List<GroupPermissions> GetGroups()
{
    var scope = new ManagementScope("\\\\.\\ROOT\\cimv2");
    var sQuery = new SelectQuery("Select * from Win32_SecurityDescriptor");
    var secDesc = new List<GroupPermissions>();
    try
    {
        var mSearcher = new ManagementObjectSearcher(scope,sQuery);

        foreach (ManagementObject mObject in mSearcher.Get())
        {
            var sDObj = new GroupPermissions();
            var aceList = new List<ACE>();
            var saceList = new List<ACE>();

            var aceobjs = (ManagementObjectCollection)mObject["DACL"];
            var aceobjsS = (ManagementObjectCollection)mObject["SACL"];
            var gpTt = (ManagementObject)mObject["Group"];
            var ownerTt = (ManagementObject)mObject["Owner"];
            var sids = (UInt16[]) gpTt["SID"];
            var osids= (UInt16[]) ownerTt["SID"];
            var groupTrustee = new Trustee()
                                   {
                                       Domain =Convert.ToString(gpTt["Domain"]),
                                       Name = Convert.ToString(gpTt["Name"]),
                                       SIDString = Convert.ToString(gpTt["SIDString"]),
                                       SidLength = Convert.ToUInt32(gpTt["SidLength"]),
                                       SID = sids
                                   };
            var ownerTrustee = new Trustee()
                                   {
                                       Domain =Convert.ToString(ownerTt["Domain"]),
                                       Name = Convert.ToString(ownerTt["Name"]),
                                       SIDString = Convert.ToString(ownerTt["SIDString"]),
                                       SidLength = Convert.ToUInt32(ownerTt["SidLength"]),
                                       SID = osids
                                   };

            foreach (ManagementObject ace in aceobjs)
            {
                var dTrustee = (ManagementObject)ace["Trustee"];
                var daclSids= (UInt16[]) dTrustee ["SID"];
                var daclTrustee = new Trustee()
                                       {
                                           Domain =Convert.ToString(gpTt["Domain"]),
                                           Name = Convert.ToString(gpTt["Name"]),
                                           SIDString = Convert.ToString(gpTt["SIDString"]),
                                           SidLength = Convert.ToUInt32(gpTt["SidLength"]),
                                           SID = daclSids
                                       };

                aceList.Add(new ACE()
                                {
                                    AccessMask = Convert.ToUInt32(ace["AccessMask"]),
                                    AceFlags = Convert.ToUInt32(ace["AceFlags"]),
                                    GuidInheritedObjectType = Convert.ToString(ace["GuidInheritedObjectType"]),
                                    AceType = Convert.ToUInt32(ace["AceType"]),
                                    GuidObjectType = Convert.ToString(ace["GuidObjectType"]),
                                    Trustee = daclTrustee 

                                });
            }
            foreach (ManagementObject sace in aceobjsS)
            {
                var dTrustee = (ManagementObject)sace["Trustee"];
                var daclSids = (UInt16[])dTrustee["SID"];
                var daclTrustee = new Trustee()
                {
                    Domain = Convert.ToString(gpTt["Domain"]),
                    Name = Convert.ToString(gpTt["Name"]),
                    SIDString = Convert.ToString(gpTt["SIDString"]),
                    SidLength = Convert.ToUInt32(gpTt["SidLength"]),
                    SID = daclSids
                };

                saceList.Add(new ACE()
                {
                    AccessMask = Convert.ToUInt32(sace["AccessMask"]),
                    AceFlags = Convert.ToUInt32(sace["AceFlags"]),
                    GuidInheritedObjectType = Convert.ToString(sace["GuidInheritedObjectType"]),
                    AceType = Convert.ToUInt32(sace["AceType"]),
                    GuidObjectType = Convert.ToString(sace["GuidObjectType"]),
                    Trustee = daclTrustee

                });
            }

            sDObj.ControlFlags = Convert.ToUInt32(mObject["ControlFlags"] ?? 0);
            sDObj.DACL = aceList.ToArray();
            sDObj.Group = groupTrustee;
            sDObj.Owner = ownerTrustee;
            sDObj.SACL = saceList.ToArray();
            secDesc.Add(sDObj);
        }
    }
    catch (Exception ex)
    {

    }
    return secDesc;

} 
```

和我创建的依赖类（在 WMI 类的副本中）

```
public class GroupPermissions
{
    public UInt32 ControlFlags;
    public ACE[] DACL;
    public Trustee Group;
    public Trustee Owner;
    public ACE[] SACL;
}

public class ACE
{
    public UInt32 AccessMask;
    public UInt32 AceFlags;
    public UInt32 AceType;
    public string GuidInheritedObjectType;
    public string GuidObjectType;
    public Trustee Trustee;
};

public class Trustee
{
    public string Domain;
    public string Name;
    public UInt16[] SID;
    public UInt32 SidLength;
    public string SIDString;
}; 
```

它什么也不返回。列表对象为空。我肯定做错了什么。有人可以帮我吗？

# c++ - C & C++ String Literal Deprecation for char * = "stringLiteral";

> ID：13275162
> 
> 赞同：0
> 
> 时间：2012-11-07T17:40:46.737
> 
> 标签：c++, c

我了解语法**char * = "stringLiteral";** 已被弃用，将来甚至可能无法使用。我不明白的是**WHY**。

我搜索了网络和堆栈，虽然有很多回声确认 char * = "stringLiteral"; 是错误的，**const** char * = "stringLiteral"; 是正确的，我还没有找到关于为什么说语法错误的信息。换句话说，我想知道问题到底是什么。

## **说明我的困惑**

**代码段 1 - EVIL WAY（已弃用）**

```
char* szA = "stringLiteralA";     //Works fine as expected. Auto null terminated.
std::cout << szA << std::endl;    
szA = "stringLiteralB";          //Works, so change by something same length OK.
std::cout << szA << std::endl;    
szA = "stringLiteralC_blahblah"; //Works, so change by something longer OK also.
std::cout << szA << std::endl;    

Ouput:
stringLiteralA
stringLiteralB
stringLiteralC_blahblah 
```

那么这里的问题到底是什么？似乎工作得很好。

**代码段 2（“OK”方式）**

```
const char* szA = "stringLiteralA";  //Works fine as expected. Auto null term.
std::cout << szA << std::endl;    
szA = "stringLiteralB";          //Works, so change by something same length OK.
std::cout << szA << std::endl;    
szA = "stringLiteralC_blahblah"; //Works, so change by something longer OK also.
std::cout << szA << std::endl;    

Ouput:
stringLiteralA
stringLiteralB
stringLiteralC_blahblah 
```

也可以正常工作。没有不同。添加const有什么意义？

**代码段 3**

```
const char* const szA = "stringLiteralA";  //Works. Auto null term.
std::cout << szA << std::endl;    
szA = "stringLiteralB";           //Breaks here. Can't reasign. 
```

我只是在这里说明，为了只读保护变量内容，您必须 const char* **const** szA = "something"; .

我没有看到弃用或任何问题的意义。为什么这种语法被弃用并被认为是一个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T17:49:26.697

`const char *`是指向`*`常量 ( ) 的指针 ( `const`) `char`（指针定义很容易从右到左读取）。这里的重点是保护内容，因为正如标准所说，修改此类指针的内容会导致未定义的行为。

这源于以下事实：通常 (C/C++) 编译器将整个程序中使用的字符串分组在一个内存区域中，并且允许对在程序的不相关部分中使用的相同字符串的实例使用相同的内存位置（以最小化可执行文件大小/内存占用）。如果允许修改字符串文字，您可以通过一次更改来影响相同文字的其他不相关实例，这显然不是一个好主意。

事实上，对于大多数现代编译器（在支持内存保护的硬件上），字符串表的内存区域是只读的，因此如果您尝试修改字符串文字，您的程序就会崩溃。添加`const`到引用字符串文字的指针会使这些错误立即显现为编译错误而不是崩溃。

顺便说一句，请注意，字符串文字可以隐式衰减为非常量的事实`char *`只是对与标准前库的向后兼容性的让步（`const`当时还不是 C 语言的一部分），如上所述标准总是说改变字符串文字是UB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:44:31.620

`"abc"`是一个指向可能不可变内存的静态数组。[在 C](https://stackoverflow.com/questions/10001202/is-modification-of-string-literals-undefined-behaviour-according-to-the-c89-stan)中，修改字符串文字的内容是未定义的行为 (UB)。

* * *

但是 C99 没有创建`"abc"`类型的对象`const char [n]`。事实上，这是完全相反的，为了保持与 C89（和 ANSI C）的兼容性，它指定（§3.1.4/3）：

> 字符串文字具有静态存储持续时间和*char 类型数组*，并使用给定字符进行初始化。

也就是声明

```
char* c = "12345"; 
```

在 C中***不被弃用***，甚至直到 C11。

从[http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf](http://www.open-std.org/jtc1/sc22/wg14/www/C99RationaleV5.10.pdf)，我们可以看到在 C99 中进行字符串文字修改 UB 的基本原理，同时保持类型为`char [n]`：

> 字符串文字不需要是可修改的。该规范允许实现共享具有相同文本的字符串副本，将字符串文字放置在只读内存中，并执行某些优化。但是，字符串文字没有*const char 类型数组，*以避免指针类型检查的问题，特别是对于库函数，因为将*指向 const char 的指针*分配给指向 char的普通 *指针*是无效的。那些坚持字符串文字应该是可修改的 C89 委员会成员满足于将这种做法指定为公共扩展（参见 §J.5.5）

其中 C99 §J.5.5 是：

> ## J.5.5 可写字符串文字
> 
> 字符串文字是可修改的（在这种情况下，相同的字符串文字应该表示不同的对象）（6.4.5）。

* * *

另一方面，由于您的代码是 C++，这在标准 C++ 中实际上应该是***错误***的，因为它需要 (C++03 §2.13.4/1)

> ... 一个普通的字符串字面量具有“ *n* `const char`数组”类型和静态存储持续时间 ...

并将 a 分配`const char[n]`给 a`char*`不应该编译。编译器警告“弃用”，因为当时的现有实现允许转换（因为 C 允许），所以它进入附件 D：兼容性特性：

> ## D.4 常量字符串的隐式转换
> 
> 不推荐将字符串文字 (4.2) 从 const 隐式转换为非 const 限定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T17:50:40.963

弃用背后的想法是帮助编译器捕获否则会在运行时导致崩溃的错误。

```
char *hello = "hello";
strcpy(hello, "world"); // Compiles but crashes 
```

与

```
const char *hello = "hello";
strcpy(hello, "world"); // Does not compile 
```

这是捕获整个类非常讨厌的运行时错误的一种相对便宜的方法，因此弃用转换非常符合 C++ 作为“更好的 C”的一般理念。

此外，您的代码段 2 不会使指针的内容受到保护这一事实无效。被覆盖的是指针本身，而不是它的内容。`const char *ptr`和之间有区别`char * const ptr`：前者保护内容；后者保护指针本身。两者可以结合起来保护指针及其内容为`const char * const ptr`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T17:49:54.773

语法错误，因为没有从**char const ***到**char ***的隐式转换。

在 C 和 C++ 中，字符串文字的类型一直是**char const ***。（关于非常老的 C 可能是错误的。）

规则的更改与字符串文字的类型无关，而是与指针类型之间允许的转换有关。

转换是错误的，因为指向 const 的东西是不可变的。一个字符串字面量，它是一个已知在编译和链接时保持不变的值，可以放在只读内存段中。

# spring - Spring 在 EAR 之外找不到 jar - WebSphere 社区版

> ID：13275172
> 
> 赞同：0
> 
> 时间：2012-11-07T17:41:44.090
> 
> 标签：spring, shared-libraries, geronimo, websphere-ce

我有一个部署到 WebSphere Application Server Community Edition 的耳朵，它使用 spring 来加载不同的接口。对于生产，所有这些类都加载到耳朵内。我正在尝试用 EAR 之外的 jar 中的另一个类覆盖这些类。

我将我的 jar 放在 /var/shared/lib 中，并有一个部署依赖项，我认为它会将这些文件夹包含到类路径中：

```
<sys:dependencies>
<sys:dependency>
<sys:groupId>org.apache.geronimo.configs</sys:groupId>
<sys:artifactId>sharedlib</sys:artifactId>
</sys:dependency>
</sys:dependencies> 
```

我错过了什么？弹簧导致 NoClassDef 说明找不到类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:05:46.523

Websphere 具有共享库功能。将您的 jar 添加到共享库中，然后使用 websphere 管理控制台将该库添加到您的应用程序中。

```
Using shared libraries at the application level
To define a shared library named VersionCheckerV2_SharedLib and associate it 
to our ClassloaderTest application, do the following steps:
1\. In the administrative console, select Environment → Shared Libraries.
2\. Select the scope at which you want this shared library to be defined, such as 
Cell, and click New 
```

添加

```
Select Applications → Application Types→ WebSphere enterprise 
applications.
6\. Select the ClassloadersExample application.
7\. In References, select Shared library references.
8\. Select AppName in the Application row.
9\. Click Reference shared libraries.
10.Select the VersionCheckerV2_SharedLib and click the >> button to move it 
to the Selected column 
```

用于`shared library`此任务。使用[本书](http://www.redbooks.ibm.com/redpapers/pdfs/redp4581.pdf)作为指导。

# maven - 使用 Maven 在战争中包含系统相关的二进制文件

> ID：13275173
> 
> 赞同：0
> 
> 时间：2012-11-07T17:41:44.800
> 
> 标签：maven, maven-assembly-plugin

我必须将 Java EE 应用程序分发到 Windows 和 Linux。应用程序在 WEB-INF/bin 文件夹中有几个系统相关文件（dll 等）

我正在尝试这种方法。

项目文件夹树是这样的：

*   项目
    -- src
    ---- main
    ---- java ------
    webapp
    -------- ...
    -------- WEB-INF --------
    ---- bin（现在是一个空文件夹）
    --目标

我已将所有 bin 文件移至：

*   项目
    -- distrib
    ---- bin
    ------ win
    ------ linux

在第一步中，我尝试将 Maven 配置为将 distrib/bin/win 复制到目标文件夹中的 WEB-INF/bin

在第二步中，当第一个工作时，我将添加两个配置文件，一个用于 Windows，另一个用于 linux。

在我的 pom.xml 我放了这些行：

```
<build>
    <plugins>
        <plugin>
          <artifactId>maven-assembly-plugin</artifactId>
          <executions>
            <execution>
              <id>distro-assembly</id>
              <phase>package</phase>
              <goals>
                <goal>single</goal>
              </goals>
              <configuration>
                <descriptors>
                  <descriptor>distrib/bin.xml</descriptor>
                </descriptors>
              </configuration>
            </execution>
          </executions>
        </plugin>
    </plugins> 
```

在这里你有 bin.xml 源：

```
 <assembly 
xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd" >
  <id>webtop10.2_bin</id>
  <fileSets>
    <fileSet>
      <directory>${project.build.directory}/distrib/bin/win</directory>
      <outputDirectory>/WEB-INF/bin</outputDirectory>
      <includes>
          <include>*.*</include>
      </includes>
      <fileMode>0750</fileMode>
      <directoryMode>0755</directoryMode>
      <lineEnding>keep</lineEnding>
    </fileSet>
  </fileSets>
</assembly> 
```

当我执行 mvn package 构建成功但文件没有复制到 WEB-INF/bin 文件夹。组装插件说：

```
[INFO] --- maven-assembly-plugin:2.2-beta-5:single (distro-assembly) @ sibila ---
[INFO] Reading assembly descriptor: distrib/bin.xml
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

我是 Maven 的新手，所以我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:44:28.523

您说要复制的文件位于 中`project/distrib/bin/win`，但您的程序集描述符的文件集正在从 中复制`${project.build.directory}/distrib/bin/win`。除非您在 POM 中更改了项目的构建目录，`${project.build.directory}`否则`project/target`. 程序集文件集中的目录可能应该是 just `distrib/bin/win`，因为我相信该目录是相对于项目基础的：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
    <id>webtop10.2_bin</id>
    <fileSets>
        <fileSet>
            <directory>distrib/bin/win</directory>

            ...

        </fileset>
    </fileSets>
</assembly> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:57:23.317

如果您只想将二进制文件复制到`WEB-INF/bin`战争中的文件夹中，那么我认为您根本不应该使用`maven-assembly-plugin`。

这是一个更简单的方法：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <webResources>
                    <resource>
                        <directory>distrib/win</directory>
                        <targetPath>WEB-INF/bin</targetPath>
                    </resource>
                </webResources>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

这可以专门用于构建配置文件，以便您选择 windows 或 linux 二进制文件。

# xml - UnauthorizedAccessException - 服务器对文件目录的访问被拒绝

> ID：13275175
> 
> 赞同：1
> 
> 时间：2012-11-07T17:41:51.250
> 
> 标签：xml, c#-4.0, active-directory, file-permissions, file-access

我遇到 UnauthorizedAccessException 错误，而服务器上的应用程序正在尝试读取其他机器上的 XML 文档。

编码：

```
private void generateNewXml()
    {

        string filePath = (@"\\IP_LocationA\Folder\DocumentA.xml");
        StreamReader reader = new StreamReader(filePath);
        string text = reader.ReadToEnd();
        reader.Close();

        text = text.Replace("TextA", "TextB");

        XmlDocument xdoc = new XmlDocument();
        xdoc.LoadXml(text);

        xdoc.Save(@"\\IP_LocationB\Folder\DocumentB.xml");

    } 
```

错误：

[UnauthorizedAccessException：对“\IP_LocationB\Folder\DocumentA.xml”的访问被拒绝。]

注意：我确实从我的语言翻译了错误消息，因此它可能与标准英文版本不同。

关于如何解决这个问题的任何想法？是否必须在 app-server-machine (IP_LocationA) 和 file-server-machine (IP_LocationB) 上配置具有用户 ASPNET 的用户权限？

# jquery - Twitter Bootstrap 选项卡 - 如何无需第二次点击即可跳转到新网页

> ID：13275176
> 
> 赞同：1
> 
> 时间：2012-11-07T17:42:07.957
> 
> 标签：jquery, tabs, twitter-bootstrap

我确信这很容易令人尴尬，但我有一个空白。我已经实现了 Twitter Bootstrap 的标签。一切正常，但我无法弄清楚如何对下面的 ** ... ** 突出显示的网页链接进行编码。如果我将它们放在标签之间，我必须在单击选项卡后单击一个链接，而我希望它立即打开页面。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery.js"></script>
<link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet"    type="text/css" />
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-tab.js"></script>
<meta charset=utf-8 />
</head>
<body>

    <ul id="myTab" class="nav nav-tabs">
      <li class="active"><a href="#google" data-toggle="tab">Google</a></li>
      <li><a href="#bing" data-toggle="tab">Bing</a></li>
      <li><a href="#AOL" data-toggle="tab">AOL</a></li>

      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">More choices <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a href="#yahoo" data-toggle="tab">Yahoo</a></li>
          <li><a href="#cnn" data-toggle="tab">CNN</a></li>
          <li><a href="#weather" data-toggle="tab">Weather</a></li> 
        </ul>
      </li>
    </ul>

<div id="myTabContent" class="tab-content">
 <div id="google" class="tab-pane fade">
  ** http://www.google.com **
 </div>

 <div id="bing" class="tab-pane fade">
  ** http://www.bing.com **
 </div>

 <div id="AOL" class="tab-pane fade">
  ** http://www.aol.com ** 
 </div> 

 <div id="yahoo" class="tab-pane fade">
   ** http://www.yahoo.com **
 </div>

 <div id="cnn" class="tab-pane fade">
  ** http://www.cnn.com **
 </div>

 <div id="weather" class="tab-pane fade">
   ** http://www.weather.com **
 </div>
 </div

 </body>
 </html> 
```

我尝试添加 JQuery 代码，但没有乐趣

```
 <script>
 $('#google').load('http://www.google.com');
 $('#bing').load('http://www.google.com');
 $('#AOL').load('http://www.google.com'); 
</script> 
```

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:05:05.040

让我们把第一件事排除在外。由于[相同的来源政策](http://en.wikipedia.org/wiki/Same_origin_policy)，您不能 .load() [http://google.com](http://google.com)。看看[这个问题](https://stackoverflow.com/questions/1292486/why-cant-i-load-an-external-resource-from-jquery-load-method)来解决这个问题。

一旦你有了你想要加载的东西，你可以使用下面的代码：

```
$('#myTab a').click(function(){
    var id = $(this).attr("href");
    $(id).load("example-url.php");
}); 
```

这很简单，当您单击选项卡时，拉动“href”并将其用作选择器以获取选项卡内容 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:57:00.743

我的一个聪明的朋友建议这样做，这似乎有效。

```
<div id="myTabContent" class="tab-content">
<div id="google" class="tab-pane fade">
 <iframe src="http://www.google.com/custom" style="border: 0; width: 100%; height: 100%">  </iframe>
</div>

<div id="bing" class="tab-pane fade">
<iframe src="http://www.bing.com" style="border: 0; width: 100%; height: 100%"></iframe>
</div>

<div id="AOL" class="tab-pane fade">
<iframe src="http://www.aol.com" style="border: 0; width: 100%; height: 100%"></iframe>
</div> 

<div id="yahoo" class="tab-pane fade">
<iframe src="http://www.yahoo.com" style="border: 0; width: 100%; height: 100%"></iframe>
</div>

<div id="cnn" class="tab-pane fade">
<iframe src="http://www.cnn.com" style="border: 0; width: 100%; height: 100%"></iframe>
</div>

<div id="weather" class="tab-pane fade">
<iframe src="http://www.weather.com" style="border: 0; width: 100%; height: 100%"></iframe>
</div>

</div> 
```

# javascript - createRange 在父 js 中全选

> ID：13275177
> 
> 赞同：0
> 
> 时间：2012-11-07T17:42:12.157
> 
> 标签：javascript, range, selector

我正在寻找一个带有 javascript`createRange`函数的范围。经过这么多年发现这个功能，我现在才刚刚发现，它就是那些 DOH 之一！时刻。

有没有办法选择给定父级中的所有元素。目前，我有一个 div 充满了我正在尝试选择的内容。该内容可能是文本节点、元素、IDK。

```
var container = document.getElementById('mydiv');
var range = document.createRange();
range.setStart(container, 0);
range.setEnd(container, ???); 
```

是否有一种准确、简单、有效的方法来获取父级 ( `container`) 中的内容长度？或者是否有一种隐藏的方法`range`可以做到这一点？

请不要图书馆！不太关心跨浏览器的回退，但如果你有任何见解，欢迎。

**编辑**

为清楚起见，我不是要获取 innerHTML，而是要获取范围对象。所以**请**不要说“为什么不只使用innerHTML”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:13:40.220

`selectNodeContents`做的伎俩，获取指定元素的内容。

```
range.selectNodeContents(container); 
```

# jquery - 带有多个父母/孩子的下拉菜单

> ID：13275178
> 
> 赞同：0
> 
> 时间：2012-11-07T17:42:12.703
> 
> 标签：jquery, css, menu

我正在尝试做一种手风琴式菜单，所有第一级页面都在其中布局，如果单击父页面，它将向下滑动，然后如果单击具有更多子元素的页面，它将再次向下滑动.

我有点卡住了，这是我下面的内容。首先，因为 slideDown 动作附加到 LI，当您尝试单击也有子元素的子元素时，它会向上滑动。有什么方法可以选择要单击的锚点然后将向下滑动？

抱歉让我的解释有点混乱，但希望到目前为止的 HTML 和 JS 将有助于解释。一个简单的点击和展开菜单。

**更新：http: [//jsfiddle.net/TDPb4/1/](http://jsfiddle.net/TDPb4/1/)**

谢谢，R

HTML：

```
<ul class="sub-navigation">
  <li class="page_item page-item-29 current_page_item parent"><a href="http://richgc.com/dust/bmk/home/clinicallaboratory/">Clinical/Laboratory</a>
    <ul class="children">
      <li class="page_item page-item-40 parent"><a href="http://richgc.com/dust/bmk/home/clinicallaboratory/histopathology/">Histopathology</a>
        <ul class="children">
          <li class="page_item page-item-99"><a href="http://richgc.com/dust/bmk/home/clinicallaboratory/histopathology/test-page/">Test page</a></li>
        </ul>
      </li>
      <li class="page_item page-item-42"><a href="http://richgc.com/dust/bmk/home/clinicallaboratory/bacteriology/">Bacteriology</a></li>
      <li class="page_item page-item-46"><a href="http://richgc.com/dust/bmk/home/clinicallaboratory/packaging-guidelines/">Packaging Guidelines</a></li>
      <li class="page_item page-item-44"><a href="http://richgc.com/dust/bmk/home/clinicallaboratory/water-quality-analysis/">Water Quality Analysis</a></li>
    </ul>
  </li>
  <li class="page_item page-item-33 parent"><a href="http://richgc.com/dust/bmk/home/education-and-training/">Education and Training</a>
    <ul class="children">
      <li class="page_item page-item-104"><a href="http://richgc.com/dust/bmk/home/education-and-training/test-page/">Test page</a></li>
    </ul>
  </li>
  <li class="page_item page-item-31"><a href="http://richgc.com/dust/bmk/home/environmental-services/">Environmental Services</a></li>
  <li class="page_item page-item-35"><a href="http://richgc.com/dust/bmk/home/products/">Products</a></li>
  <li class="page_item page-item-27"><a href="http://richgc.com/dust/bmk/home/veterinary/">Veterinary</a></li>
</ul> 
```

jQuery：

```
$(".sub-navigation li.parent a").click(function(e) {
   $(this).parent(".children").slideToggle('fast');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:43:03.503

尝试`.closest()` 代替`.parent()`

```
$(".sub-navigation li.parent a").click(function(e) {
   e.preventdefault()
   $(this).closest(".children").slideToggle('fast');
}); 
```

**更新**

```
$(".sub-navigation li.parent a").click(function(e) {
   e.preventDefault()
   $(this).closest('.parent').find("> .children").slideToggle('fast');
});​ 
```

**[更新小提琴](http://jsfiddle.net/sushanth009/TDPb4/2/)**

# ios - 在后台处理方法中使用相同的调度队列

> ID：13275180
> 
> 赞同：2
> 
> 时间：2012-11-07T17:42:14.283
> 
> 标签：ios, grand-central-dispatch

我有一种方法可以更新表格中的两个部分，这需要一段时间。我想做类似的事情：

```
 dispatch_queue_t lowQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0);
    dispatch_queue_t mainQueue = dispatch_get_main_queue();

    dispatch_async(lowQueue, ^{
        NSArray *tempArray = // do long running task to get the data

        dispatch_async(mainQueue, ^{
            // update the main thread
            [self.activityIndicatorView stopAnimating];
            [self.reportsTableView reloadData];
        });
    });

dispatch_async(lowQueue, ^{

NSArray *tempArray2 = // same thing, do another long task

    // similarly, update the main thread 
```

如果我在相同的方法中使用相同的 lowQueue，可以吗？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T17:51:34.137

是的，您可以使用`lowQueue`相同的方法。当您获取`DISPATCH_QUEUE_PRIORITY_LOW`全局队列并将对它的引用存储在 中时`lowQueue`，您可以继续使用多个`dispatch_async`GCD 调用将其他块加入队列。每次调用`dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0)`时，都会返回对完全相同的调度队列的引用。

由于所有全局调度队列都是并发队列，两个任务中的每个块都将同时出列并执行，前提是 GCD 在运行时确定这对系统最有效（给定系统负载、可用 CPU 内核、其他数量）当前正在执行的线程等）。

# python - Windows/Linux 下的 Python RAD

> ID：13275181
> 
> 赞同：0
> 
> 时间：2012-11-07T17:42:19.260
> 
> 标签：python, ide

大家好，因为这个[关于 RAD](https://stackoverflow.com/questions/11061639/python-rad-desktop-deployment)的问题在 4 个月前就被幼稚地关闭了，而且没有得到回答，而且[SO 上唯一允许的 IDE 问题](https://stackoverflow.com/questions/81584/what-ide-to-use-for-python)并不是最新的，也不适合我的问题（Visual Studio + PTVS + Wine 得到linux下的WPF唯一应用程序，不，谢谢）我会再问一次：

**目前**是否有一个带有简单 GUI 编辑器（**RAD**工具）的可行 python IDE？（并且可能在 Linux 下可用？）

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:22:22.087

我发现[Monkey Studio](http://monkeystudio.org/) (2012) 是一个很好的 IDE，带有用于 QT4 和 PyQT 的 GUI 编辑器的 RAD，它支持 python 和其他语言。有人应该将它添加到 python IDE 列表中，解锁主题或启动一个新主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T02:31:42.333

在 Linux 下，您可以使用（我使用）一组单独的工具。pygtk 包可以使用 Builder 对象根据 XML 文件中指定的方案构建 ui。这个 XML 文件是由 glade UI builder 工具生成的。我使用 Vim 来编辑代码。正如您在链接答案中看到的那样，Vim 也有最高投票的答案。

但是，我使用自定义脚本和工具为自己扩展了环境，通常利用通用桌面工具和文件管理器。这更符合 *nix 使用最好的工具（为你），一起工作的理念。换句话说，整个 *nix 环境是一个 IDE，而不是单个应用程序。

否则，除了 Vim，还有[Anjuta](http://projects.gnome.org/anjuta/)可以创建和开发 Python/GTK 项目。

# javascript - jquery $.post() 在 IE 中不起作用

> ID：13275184
> 
> 赞同：0
> 
> 时间：2012-11-07T17:42:31.337
> 
> 标签：javascript, jquery, ajax, internet-explorer

我知道有很多这样的问题，但我找不到我的答案。

这是在所有浏览器中运行良好的代码。但 IE 忽略它。

**HTML**（两个提交的一个表单）

```
<form id="form0" method="post" accept-charset="UTF-8" 
 onsubmit="sendEmails(); return false;">
              <input id="ef" value="">
</form> 
```

**JS**

```
function sendEmails() {

        var email = $('#ef').val();

        $('#FormValue_EmailAddress').val(email);
        $('#YMLPValue').val(email);

        $.ajaxSetup({ cache: false });          

        $.post($("#form1").attr("action"), $("#form1").serialize());
        $.post($("#form2").attr("action"), $("#form2").serialize());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:15:40.493

好的，问题在于 IE 安全限制并将 json 添加到 POST。我得到了帮助，我的**JS**变成了这个变种

```
$.support.cors = true; // force cross-site scripting
        $.ajaxSetup({ cache: false });          

        var request = $.ajax({
            type: "POST",
            url: $("#form1").attr("action"),
            data: $("#form1").serialize(),
            sync: false,
            dataType: 'jsonp',
            crossDomain: true        
        });

        request = $.ajax({
            type: "POST",
            url: $("#form2").attr("action"),
            data: $("#form2").serialize(),
            sync: false,
            dataType: 'jsonp',
            crossDomain: true
        }); 
```

感谢丹尼尔）

# javascript - 有没有像 bcrypt 这样的慢速 Javascript 哈希算法？

> ID：13275187
> 
> 赞同：5
> 
> 时间：2012-11-07T17:42:42.707
> 
> 标签：javascript, hash, sha, bcrypt

*我不是在谈论服务器端 node.js。*

我想对我网站客户端的密钥使用慢速哈希算法。我发现[SHA-256](https://github.com/bitwiseshiftleft/sjcl/blob/master/core/sha256.js)的实现[似乎是可靠的](http://bitwiseshiftleft.github.com/sjcl/)。我还发现[这个问题](https://stackoverflow.com/questions/2299434/bcrypt-implementation-in-javascript)导致 OP[创建了自己的库](http://code.google.com/p/javascript-bcrypt/)。

但是，我不确定我是否应该只进行多轮 SHA 散列或信任其中的一些代码，因为我不是安全专家，而且它似乎没有大量的追随者，只被 36 人“盯着” .

在这种情况下，最好的选择是什么？一旦我选择了某些东西，我（基本上）就不能改变方法。

我想要一个慢速散列（不是加密）算法，我宁愿它产生一个短字符串。例如，慢速 60 字符 bcrypt 与快速 70 字符 SHA-256。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T19:30:02.983

目前有三种密钥派生函数被广泛认为可以防止暴力破解尝试。密钥派生函数与常规散列算法略有不同，因为它们的*设计*速度很慢，即使面对现代基于 GPU 的计算也是如此。

*我将按照理论上*的安全性顺序列出它们：

*   [PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)是 RSA 设计的，基于 SHA，是 NIST 推荐的算法。您可以在浏览器中使用几个[实现](http://code.google.com/p/crypto-js/#PBKDF2) [。](http://anandam.name/pbkdf2/)

    *Node 用户注意：* Node 的`crypto`模块具有[内置的 PBKDF2 功能](http://nodejs.org/api/crypto.html#crypto_crypto_pbkdf2_password_salt_iterations_keylen_callback)。用那个。

*   [bcrypt](http://en.wikipedia.org/wiki/Bcrypt)基于 Blowfish，比 PBKDF2 稍微安全一些。它经过了相对良好的测试和安全验证，但没有任何标准机构的批准印章，如果这是您的考虑因素。这里有[一个通用的 JS 实现](http://code.google.com/p/javascript-bcrypt/)。

    *Node 用户注意事项：*使用[node.bcrypt](https://github.com/ncb000gt/node.bcrypt.js/)，它在单独的线程上执行计算昂贵的东西。

*   最后，[scrypt](http://en.wikipedia.org/wiki/Scrypt)无疑是理论上最安全（最慢）的 KDF。不幸的是，该算法非常新，因此尚未通过密码学界的严格研究和测试来验证。但是，它[有望成为 IETF 标准](https://datatracker.ietf.org/doc/html/draft-josefsson-scrypt-kdf-00)。

    因为算法太新了，所以很难找到实现。我只能找到[这个半生不熟的](https://github.com/cheongwy/node-scrypt-js)。虽然安全优势非常有希望，但在算法本身及其实现都被验证安全之前，我不推荐使用 scrypt。

这三个实际上如何比较？[scrypt论文](http://www.tarsnap.com/scrypt/scrypt.pdf)有一个对比：

![算法对照表](../Images/e192fff7d1aa0634cff51f1ae5657ca3.png)

实际上，即使是 PBKDF2 也使得除政府以外的任何人破解单个 8 字符密码的成本都很高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:47:57.747

您始终可以忽略快速 SHA-256 的最后 10 个字符。或 xor 要包含的前 10 个字符。

SHA 的轮数可变。两轮 SHA 在某种程度上应该是可逆的。我有一个模糊的想法，即 20 轮被认为是“安全的”。30 轮应该是“高度安全的”，而 50 轮实际上并没有提高安全性。

SHA 被设计成安全的——不是希望破解者有一台足够慢的机器——而是通过数学证明。如果并且当每轮中不可逆比特的数量增加并置换为 256 位哈希码时，将永远不会有足够的计算机能力来尝试生成该特定哈希码的所有可能序列。宇宙中的能量甚至不足以包裹一个 256 位的计数器。

除非产生哈希的字符串非常小或写在某人显示器上的便利贴上。

# objective-c - UITableViewCellContentView 上的 shouldReceiveTouch

> ID：13275195
> 
> 赞同：14
> 
> 时间：2012-11-07T17:42:59.417
> 
> 标签：objective-c, ios, uitableview, uikit, uitapgesturerecognizer

我试图忽略 UITapGestureRecognizer 在 UITableView 上的点击，如下所示：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
      if ([touch.view isKindOfClass:[UITableViewCellContentView class]]) {
          return NO; // ignore the touch
      }
      return YES; // handle the touch
} 
```

它不会编译：“使用未声明的标识符 'UITableViewCellContentView'

无证类？需要子类？更好的方法来实现这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-07T17:53:28.530

这似乎做到了：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    if([touch.view isKindOfClass:[UITableViewCell class]]) {
         return NO;
    }
    // UITableViewCellContentView => UITableViewCell
    if([touch.view.superview isKindOfClass:[UITableViewCell class]]) {
         return NO;
    }
    // UITableViewCellContentView => UITableViewCellScrollView => UITableViewCell
    if([touch.view.superview.superview isKindOfClass:[UITableViewCell class]]) {
         return NO;
    }
    return YES; // handle the touch
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-09T08:24:43.510

你可以这样做。

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
    {
        if ([NSStringFromClass([touch.view class]) isEqualToString:@"UITableViewCellContentView"]) {
            return NO;
        }else{
            return YES;
        }
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-25T10:45:15.910

我刚刚遇到这个问题，以下解决方案适用于所有 iOS 版本，而不会有 Apple 更改 tableView 的视图层次结构的风险。基本上，保留对您的 UITableView 的引用：

```
 - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
      if([touch.view isDescendantOfView:detailsTableView]) {
          return NO;
      }
      return YES;
   }

//isDescendantOfView:YES if the receiver is an immediate or distant subview of view or if view is the receiver itself; otherwise NO. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-11T21:52:27.740

这是所选答案的快速解决方案。

我无法使用名为“MyTableView”的依赖项检查，因为我有一个自定义 BaseViewController，许多视图控制器都从该控制器派生。一些视图控制器有一个表格视图，一些有一个集合视图或两者都有，但在所有情况下，手势识别器都会窃取他们的触摸。

我不想把这个手势处理代码放在每个子类中，所以我让它在基类中工作的唯一方法是：

```
extension BaseViewController: UIGestureRecognizerDelegate {

    func gestureRecognizer(gestureRecognizer: UIGestureRecognizer, shouldReceiveTouch touch: UITouch) -> Bool {
        var view = touch.view
        while view != nil {
            if view!.isKindOfClass(UICollectionView) || view!.isKindOfClass(UITableView) {
                return false
            } else {
                view = view!.superview
            }
        }
        return true
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-02T13:10:47.117

我认为检查触摸区域更清晰、更简单。

```
func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer,
                       shouldReceive touch: UITouch) -> Bool {

    let point = touch.location(in: viewContentContainer)
    return !tableRules.frame.contains(point)
} 
```

# php - 有空对象时如何处理学说的延迟加载？

> ID：13275196
> 
> 赞同：1
> 
> 时间：2012-11-07T17:42:59.713
> 
> 标签：php, orm, doctrine, lazy-loading

我对处理学说的延迟加载机制的正确方法有疑问。我有一个通过@ManyToOne 引用另一个实体的实体：

```
class Entity {
    ...
    /**
     * @ManyToOne(targetEntity="AnotherEntity")
     * @JoinColumn(name="anotherEntityId", referencedColumnName="id")
     */
    protected $anotherEntity;
    ...
}

class AnotherEntity {
    /**
     * @var integer $id
     * @Column(name="id", type="integer", nullable=false)
     * @Id
     * @GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string $someValue
     * @Column(name="someValue", type="string")
     */
    private $someValue;
    ...
} 
```

Doctrine 现在为 AnotherEntity 生成一个代理，该代理在其 getter 上实现延迟加载：

```
public function getSomeValue()
{
    $this->__load();
    return parent::getSomeValue();
} 
```

如果我现在有一些 Entity 实例没有 AnotherEntity 的引用对应项（$anotherEntityId 为 0 或 null）。然后学说似乎生成了另一个实体的一个空对象，并使所有实体对象的 $anotherEntity 变量都指向它。空对象未初始化，因为我们想要延迟加载。当我这样做时，我现在得到一个 EntityNotFoundException ：

```
$entiy->getAnotherEntity()->getSomeValue(); 
```

那太棒了！我访问的另一个实体在数据库中不存在，所以我得到了这个异常。但是当我对第二个实体（以及之后的所有其他实体）执行相同操作时，我没有得到这个异常，因为它们都指向另一个实体的同一个实例，并且学说在第一次调用中将其标记为已初始化。所以现在我正在访问一个逻辑上不存在但没有出现任何异常的对象 - 我只是从 getSomeValue() 中获取未初始化的变量，例如一个空字符串。

您知道如何让我的应用程序识别出该对象不存在，而不仅仅是接受空值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T10:09:22.143

我想这是一个教义错误，因为代理被标记为已初始化，即使它不是在抛出 EntityNotFoundException 时也是如此。这是为每个代理生成的代码原则：

```
public function __load()
{
    if (!$this->__isInitialized__ && $this->_entityPersister) {
        $this->__isInitialized__ = true;

        if (method_exists($this, "__wakeup")) {
            // call this after __isInitialized__to avoid infinite recursion
            // but before loading to emulate what ClassMetadata::newInstance()
            // provides.
            $this->__wakeup();
        }

        if ($this->_entityPersister->load($this->_identifier, $this) === null) {
            throw new \Doctrine\ORM\EntityNotFoundException();
        }
        unset($this->_entityPersister, $this->_identifier);
    }
} 
```

在 ProxyFactory 文件中，您可以找到此代码，并在抛出异常之前添加以下行，问题就解决了：

```
$this->__isInitialized__ = false; 
```

有了这个，您每次需要时都会得到异常。

顺便说一句：学说人们自己已经讨论过这个问题，但修复似乎不在当前版本中：[https ://github.com/doctrine/doctrine2/pull/364](https://github.com/doctrine/doctrine2/pull/364)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-24T19:43:25.070

这是关于教义 2 的错误，请参见此处[https://github.com/doctrine/doctrine2/issues/3945](https://github.com/doctrine/doctrine2/issues/3945)

用户和地址之间的关系是一对零或一。当双方都有记录时，一切都很好。当右侧（地址）没有相关记录时，调用`$user->getAddress();`总是返回一个实例。在该实例上调用方法会导致异常：

> 致命错误：未捕获异常 'Doctrine\ORM\EntityNotFoundException' 并带有消息'找不到'地址'类型的实体。在第 176 行的学说/orm/lib/Doctrine/ORM/Proxy/ProxyFactory.php

预期行为： `$user->getAddress()`当右侧为空时应返回 NULL。

注意：请注意该地址是通过外国实体（用户）识别的

# css - css,sass 渐变色作为 extjs 主题的基色

> ID：13275198
> 
> 赞同：0
> 
> 时间：2012-11-07T17:43:05.930
> 
> 标签：css, sass, extjs4.1

我正在根据教程实现一个 extjs 主题：

[http://docs.sencha.com/ext-js/4-1/#!/guide/theming](http://docs.sencha.com/ext-js/4-1/#!/guide/theming)

我已经完成了所有设置并按预期工作。

但我想有一个渐变色作为基色：

我为 sass 尝试了以下语法，但它没有用。

请问有人有什么建议吗？

```
 $base-color: gradient(#09B3F0, #0A284A); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:44:47.480

安装[Compass](http://compass-style.org/)并使用这个 mixin：

```
@include background(linear-gradient(#09B3F0, #0A284A)); 
```

[演示](http://codepen.io/anon/pen/CAEgu)

`gradient()`不是原生 Sass 函数，并且没有内置的渐变支持。Compass 很棒的原因之一是它使[CSS3 渐变](http://compass-style.org/reference/compass/css3/images/)和其他功能使用起来很轻松。

# c++ - Return instance of class to main

> ID：13275200
> 
> 赞同：2
> 
> 时间：2012-11-07T17:43:09.450
> 
> 标签：c++, templates

My program reads from a configuration file and instantiates several classes with the contents of two specific sections for each time.

To initialize `Voice` class, I'd call:

```
initializeDomain ("voice", voice_config, voice_config_fields); 
```

and `Voice` should be initialized as:

```
Voice voice ( config, config_fields ); 
```

To do so, I programmed the following function:

```
void initializeDomain (string dom, map<string, string> & config, map<string, string> & config_fields)
{
    if ( dom == "voice" ) {
        Voice voice ( config, config_fields );
        return voice;
    } else if ( dom == "account" ) {
        Account account (config, config_fields);
        return account;
    }
} 
```

This is obviously not working, as the return type is variable, depending on the class that is instantiated. So, I tried to build a template that could address this need:

```
template <typename T>
T initializeDomain (string dom, map<string, string> & config, map<string, string> & config_fields)
{
    if ( dom == "voice" ) {
        T instantiated ( config, config_fields );
    } else if ( dom == "account" ) {
        T instantiated ( config, config_fields );
    }
    return instantiated;                                                          }
} 
```

But it does not work either. How can I instantiate different classes in the template?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:50:39.200

If I understand your question correctly, I would suggest using a factory pattern to allow feeding in your various types and returns the desired instance. I hope that helps.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:56:44.313

This looks like classic application for [Factory Design Pattern](http://en.wikipedia.org/wiki/Factory_method_pattern). Allocate instances dynamically and return by [smart] pointer:

```
class Base {};
class DerivedOne : public Base {};
class DerivedTwo : public Base {};

typedef std::unique_ptr<Base> BasePtr;

BasePtr createFoo( /* arguments */ ) {
    BasePtr ptr; // initialized to nullptr
    if ( ... ) ptr.reset( new DerivedOne );
    else if ( ... ) ptr.reset( new DerivedTwo );
    else ...

    return ptr;
} 
```

### Edit 0:

The usage for above setup is for *polymorphic* types, i.e. when you have a common interface to different implementations, so you would invoke *virtual* methods *via pointer*, like:

```
BasePtr base = createFoo( /* args */ );
base->callVirtualFunction( /* args */ ); 
```

What you are talking about is a bit strange. C++ is strongly-typed language, i.e. you can't store instances of unrelated types into same variable. The simple case you are describing looks like this:

```
std::string value = getInputSomewhere();

if ( value == "voice" ) {
    Voice v( /* ctor args */ );
    // do your voice stuff here
} else if ( value == "account" ) {
    Account a( /* ctor args */ );
    // do your account stuff here
} else {
    // ...
} 
```

So I don't really see what you are trying to accomplish with that template.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T21:30:43.157

It may not fit the question exactly without some assumptions, but with what we have to go on, I would have to agree with the factory pattern.

Good luck and please let us know how you resolved the issue?

# vb.net - 查找字符串 VB.NET

> ID：13275203
> 
> 赞同：1
> 
> 时间：2012-11-07T17:43:15.857
> 
> 标签：vb.net, string, parsing, text

我有一个包含多个不同项目的文本文件，我需要从中获取。

这是文本文件的一部分：

```
JOB_NUMBER                      XXXX-XX              TYPE: String               
                                                     SOURCE: User-Defined       
                                                     ACCESS: Full               
                                                     DESIGNATED: NO             
                                                     DESCRIPTION:               

CUSTOMER                        SAMPLE COMPANY       TYPE: String               
                                                     SOURCE: User-Defined       
                                                     ACCESS: Full               
                                                     DESIGNATED: NO             
                                                     DESCRIPTION:               

OVERBURN                        5.500000e-03         TYPE: Real Number          
                                                     SOURCE: User-Defined       
                                                     ACCESS: Full               
                                                     DESIGNATED: NO             
                                                     DESCRIPTION: 
```

我需要找到其中包含 JOB_NUMBER 的字符串并获取与“CUSTOMER”相同的数字“XXXX-XX”，但这将是一个字符串而不是整数。

这不能通过行号来完成，因为它每次都会不同。

任何建议都会非常有帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:08:45.300

每个文件中是否只有 1 个工作编号和一个客户字符串？如果是，您可以将文件读取为字符串并像这样提取：

```
Dim thefile As String = IO.File.ReadAllText("C:\test.txt")
Dim jobnumber As String = Split(Split(thefile, "JOB_NUMBER")(1), "TYPE:")(0).Trim()
Dim customer As String = Split(Split(thefile, "CUSTOMER")(1), "TYPE:")(0).Trim() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T09:38:47.297

你也应该看看[这里](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)。

[另一个例子](http://www.emoreau.com/Entries/Articles/2010/05/Do-you-know-the-TextFieldParser.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:50:44.430

如果这些是固定宽度的列，只需找到以 JOB_NUMBER 和 CUSTOMER 开头的行并从中间列中取出字符串，然后修剪空格。

# c# - 获取相对路径的绝对路径

> ID：13275207
> 
> 赞同：3
> 
> 时间：2012-11-07T17:43:32.780
> 
> 标签：c#, asp.net

我在 C# 中调用一个方法，如下所示：

```
return Chart.RenderChartHTML("../../Charts/MSLine.swf"); 
```

问题是路径可能会有所不同，具体取决于我从哪个文件夹调用 RenderChartHTML。

我尝试了以下方法，以便它找到绝对路径但不起作用：

```
string mslinepath = HttpContext.Current.Server.MapPath("~/Charts/MSLine.swf");

return Chart.RenderChartHTML(mslinepath); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T17:47:22.470

你不需要`~/`. 只是`HttpContext.Current.Server.MapPath("Charts/MSLine.swf");`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T17:57:16.233

使用**[ResolveUrl()](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveurl.aspx)**。它将 URL 转换为在请求客户端上可用的 URL。

所以试试这个：

```
string mslinepath = ResolveUrl("~/Charts/MSLine.swf") 
```

希望这会有所帮助！

# javascript - 强制换行 Jquery

> ID：13275208
> 
> 赞同：0
> 
> 时间：2012-11-07T17:43:35.903
> 
> 标签：javascript, jquery, html, web-applications

从服务器接收到数据后，我正在尝试使用 append 方法在 html 页面中创建换行符。这是我的代码片段（jquery）：

```
ws.onmessage = function(evt) $("#display").append("message: " + evt.data); 
```

这是html中的div：

```
<div id ="display"></div> 
```

我是新手，所以请原谅问题的简单性。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:46:48.667

尝试这个：

```
ws.onmessage = function(evt) $("#display").append("message: " + evt.data + "<br />"); 
```

另一种选择可能是

```
ws.onmessage = function(evt) $("#display").append("<p>message: " + evt.data + "</p>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T17:48:18.287

从技术上讲，HTML 中不会显示换行符，您需要使用`<br/>`标签来创建换行符。在 JavaScript 中，换行符是`\n`，但您可能想要使用：

```
ws.onmessage = function(evt) $("#display").append("message: " + evt.data + "<br/>"); 
```

如果您正在预先格式化`<div>`它，就好像它是一个`<pre>`标签并且实际上想要一个新行：

```
ws.onmessage = function(evt) $("#display").append("message: " + evt.data + "\n"); 
```

您的 div 的 HTML 也有点偏离，您应该删除和之间的`id`空格`="display"`

```
<div id="display"></div> 
```

# python - Python ctypes 堆栈损坏

> ID：13275211
> 
> 赞同：2
> 
> 时间：2012-11-07T17:43:40.820
> 
> 标签：python, ctypes

我在 ctypes 方面遇到了奇怪的问题，它似乎通过在不应该的情况下取消引用指针来破坏堆栈。待我一会儿，设置相当复杂。

我有一个`qfsm_search`带有包装签名的 C 函数，如下所示：

```
qmotion.qfsm_search.argtypes = [
    qfsm_ptr,
    qfsm_node_t,
    qskel_ptr,
    vec3, c_int,
    qfsm_node_ptr,
    POINTER(c_int)]
qmotion.qfsm_search.restype = None 
```

然后我输出参数的所有详细信息并在 python 中调用它，如下所示：

```
print("Fsm: %d | %X" % (sizeof(fsm), addressof(fsm.contents)))
print("Curr: %d | %d %d %d" % (sizeof(curr), curr.state, curr.anim, curr.frame))
print("Skel: %d | %X" % (sizeof(skel), addressof(skel.contents)))
print("Tar: %f %f %f" % (tar.x, tar.y, tar.z))
print("Limit: %i" % limit)
print("Out: %X" % addressof(out_nodes_p.contents))
print("Out Num: %X" % addressof(out_num_p.contents))

qmotion.qfsm_search(fsm, curr, skel, tar, limit, out_nodes_p, out_num_p) 
```

这会在 python 端输出以下内容。到目前为止，一切似乎都很好。

```
Fsm: 8 | 13CF0960
Curr: 12 | 0 0 89
Skel: 8 | 49193E60
Tar: 100.000000 100.000000 100.000000
Limit: 5
Out: 39A4FD10
Out Num: 2D623510 
```

然后在 CI 中有这样的功能：

```
void qfsm_search(qfsm_t* fsm, qfsm_node_t curr, qskel_t* skel, vec3 tar, int max_out, qfsm_node_t* out, int* out_num) {

  qdebug("Fsm: %d | %p", (int)sizeof(fsm), fsm);
  qdebug("Node: %d | %d %d %d", (int)sizeof(curr), curr.state, curr.anim, curr.frame);
  qdebug("Skel: %d | %p", (int)sizeof(skel), skel);
  qdebug("Tar: %f %f %f", tar.x, tar.y, tar.z);
  qdebug("Max: %d", max_out);
  qdebug("Out: %p", out);
  qdebug("Out Num: %p", out_num);

  .... 
```

但是这个函数输出：

```
Fsm: 8 | 0000000013CF0960
Node: 12 | 0 0 89
Skel: 8 | 000000000D6281A8
Tar: 0.000000 0.000000 14144512.000000
Max: 967112848
Out: 000000000D628468
Out Num: 0000000000000005 
```

请注意参数的值是如何`skel`变化的，以及它损坏后的堆栈。我认为 ctypes 取消引用`skel`参数的原因是，如果我设置`skel`为 NULL 指针，那么在输入 C 函数并打印任何调试信息之前，我会得到一个 NULL 指针段错误。

有谁知道可能会发生什么？我怀疑这可能是 type 的一些奇怪问题`qskel_ptr`，但这似乎不太可能，因为我在传递 NULL 指针时解释的行为。

值得一提的是，我正在运行 Windows 7 64 位和 Python 2.6.4。我还设法重现了 Python 2.7.3 上的行为

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:13:22.877

很抱歉无法提供更多帮助 - 但一个很好的提示是在 C 端接收到的“0000005”作为“Out Num” - 我认为它可能与应该在最大 / 中的“5”相同限制参数 - （“5”在损坏的内存中显示为 64 位整数的几率非常小）。如果是这种情况，ctypes 会在指针大小预期的 8 个字节之外多放 12 - 16 个字节。

你可能已经有了，但是在 Python 端仔细检查你的“skel”对象的定义——特别是，将它与正常工作的“fsm”对象进行比较——如果这没有给你提示，请粘贴您在更新问题的两个声明中发现的任何差异。

# linux - 在linux中执行一个目录

> ID：13275220
> 
> 赞同：0
> 
> 时间：2012-11-07T17:43:59.180
> 
> 标签：linux, bash, shell

我想执行这样的目录：'./some_directory some_args'。在那个 some_directory 中可以有一个脚本来获取这些 some_args，处理它们并将它们传递给位于同一目录中的二进制可执行文件或其他脚本。基本上，我想在 some_director 中运行一个脚本而不指定它的名称。我猜在 bash 或其他 shell 中执行 './some_directory some_args' 时必须运行默认脚本。谢谢。

所以我最终`__main__.py`在这个目录中使用了 python 和脚本。你像这样运行它：

```
python ./directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:48:15.373

您无法执行目录。目录没有默认脚本。您需要将脚本的路径放在命令行上。

根据您尝试这样做的原因，您可以考虑使用 shell 别名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T21:34:20.467

目录中的python和`__main__.py`脚本。你像这样运行目录：python`./directory`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:07:30.763

执行一个目录在 Linux 术语中是无意义的；您也许可以设置一些东西来伪造它（例如 autocd + prompt_command 代码），但这只会让任何熟悉 Linux 规范的用户感到困惑。

我建议您安装一个脚本以将应用程序启动到标准位置，使用应用程序的名称且没有后缀。例如，命令`/usr/local/bin/myapp`只是运行`/path/to/myapp/startscript.py`，用户只需键入即可调用它`myapp`。

# git - 将错误修复反向移植到旧分支的 Git 策略（cherry-pick vs. merge）

> ID：13275223
> 
> 赞同：20
> 
> 时间：2012-11-07T17:44:31.420
> 
> 标签：git, git-merge

我们在团队中的工作如下：

*   我们的 GitHub 存储库中只有一个`master`分支，它不稳定 - 认为每天都会被推送到那里；对于稳定版本，我们使用标签（对于开发，我们使用 GitHub 上的私有分支）
*   我们每 3 周发布一个新的次要版本，其中包含错误修复和新功能（比如 1.2.4、1.2.5、1.2.6...）
*   我们还必须在有限的时间内（几个月）维护每个小旧版本，所以当有人使用 1.2.4 而最新版本是 1.2.7 时，他们发现了一个错误，他们可以要求我们修复这个错误在他们使用的分支上。然后我们发布一个*补丁版本*，1.2.4A。
*   补丁是相当特殊的。我们通常为次要版本做不超过 1-2 个补丁。对于大多数版本，我们不做补丁。

**问题是，同时修复 master 和旧分支上的 bug 的最佳策略是什么？**

我可以想到两个主要策略：

1.  修复 bug `master`，然后 checkout `v1.2.4`，然后**选择**适当的提交（假设 bugfix 是一个始终存在的提交）并将生成的提交标记为`v1.2.4A`.

2.  签`v1.2.4`出，修复错误并提交，将提交标记为`v1.2.4A`，并将其合并到`master`，进行**合并**。

我更赞成第一个版本（樱桃采摘），但我想听听其他人关于利弊的评论。

**当然，当中间的提交引入一些重大更改时，事情可能会变得复杂，这可能会导致无法创建在 1.2.4 和 master 中都可以使用的提交**（例如，当某些函数名称更改时）或更复杂的事情）。但更常见的情况是可以毫无问题地移植修复程序。

师傅摘樱桃的好处：

*   我认为采樱桃的历史更“可食用”。考虑一下：

    ```
    | <- bugfix done on master
    |
    |
    | <- v1.2.7
    ...
    |
    |
    |
    |
    |
    |
    |
    |
    |
    |  - <- v.1.2.4A (cherry-picked from master)
    | / 
    | <- v1.2.4 
    ```

    与这个：

    ```
    | <- bugfix merged to master
    |\ 
    | \
    |  |
    |  |   <- v1.2.7
    ...
    |  |
    |  |
    |  |
    |  |
    |  |
    |  |
    |  |
    |  |
    |  |
    |  - <- v.1.2.4A (direct bugfix)
    | / 
    | <- v1.2.4 
    ```

    想想在这之间有几十个提交。考虑像这样并行应用多个补丁。一半的屏幕会被污染。

*   假设我修复了一个问题`v1.2.4`，但几天后有人问我要一个补丁`v1.2.3`。樱桃采摘是最明智的做法。

在我忽略的情况下，合并有什么好处吗？我可以理解它比樱桃采摘更好地保留了两个提交之间的联系，但是我们保留了发布文档，并且所有这些都在那里进行了跟踪。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-07T18:24:00.547

在我从事的开源项目中，共识似乎是应该首先在 master 上进行修复，在那里进行测试，然后才能向后移植到旧版本。您可以在 Linux 内核如何发布稳定版本中看到这一点，例如：开发人员为主线提交补丁，但也提名它们包含在稳定版本中。

在这种情况下挑选樱桃时，您可能想要使用该`-x`标志：

> 记录提交时，在原始提交消息中附加一行“(cherry pick from commit ...)”，以指示此更改是从哪个提交中挑选出来的。这仅适用于没有冲突的樱桃采摘。... [如果]您在两个公开可见的分支之间进行挑选（例如，将修复从开发分支向后移植到维护分支以获取旧版本），添加此信息可能很有用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-10-08T18:52:42.750

[gitworkflows(7)](https://www.kernel.org/pub/software/scm/git/docs/gitworkflows.html)建议您的策略 2，首先修复先前版本分支上的错误，例如`v1.2.4`，然后将该更改合并到您的开发主干：

> 规则：主题分支
> 
> 为每个主题（功能、错误修复……）创建一个分支。**在您最终希望将其合并到的最旧的集成分支上分叉它。**[*强调补充*]
> 
> 然后可以很自然地完成许多事情：
> 
> 要将功能/错误修复添加到集成分支中，只需将其合并即可。如果主题在此期间进一步发展，请再次合并。（注意，不一定要先合并到最旧的集成分支。例如，可以先合并一个bugfix到next，给它一些测试时间，当你知道它稳定时合并到maint。）

这往往运作良好的一个原因是，根据我的经验，添加的东西比删除的更频繁，因此通过在旧分支中进行更改，您可以避免依赖开发中可能可用的任何新功能等树干。

*但是，当您进行更改时*，您必须考虑要修复的分支是哪个分支，而不是仅仅在*master*上执行，然后决定在哪里合并它。

这两种策略都是可行的，并且都有好处。

# twitter - Twitter API，尝试获取我的访问令牌时总是出现错误 401

> ID：13275226
> 
> 赞同：0
> 
> 时间：2012-11-07T17:44:45.997
> 
> 标签：twitter, oauth, unauthorized

在过去的 4 个小时里，我一直在努力让它发挥作用，但没有任何效果。我一直在寻找高低的例子，但我尝试的一切都失败了。

这不是我第一次实现 oAuth（我已经为 Google Drive 和 Dropbox 成功实现了它），但我无法获得用于 Twitter API 的访问令牌。

我可以成功请求获取请求令牌（和秘密）并将用户重定向到 Twitter 网站。一旦用户授权了我的应用程序，我的回调 url 就会被点击，我会检索验证器。

现在我应该发送验证者并将其交换为访问令牌（和秘密）。

但是，我这样做的请求总是返回 401 Unauthorized 错误。我已经尝试了很多东西，我不知道还能尝试什么。请求的代码如下：

```
 Uri uri = new Uri("https://api.twitter.com/oauth/access_token");

    OAuth.OAuthBase oAuth = new OAuth.OAuthBase();
    String nonce = oAuth.GenerateNonce();
    String timestamp = oAuth.GenerateTimeStamp();
    String parameters = "";
    String normalizedUrl = "";
    String signature = oAuth.GenerateSignature(uri, _consumerKey, _ConsumerSecret, requestToken, requestTokenSecret, "POST", timestamp, nonce, OAuth.OAuthBase.SignatureTypes.HMACSHA1, out normalizedUrl, out parameters);

    StringBuilder authHeader = new StringBuilder();
    authHeader.AppendFormat("oauth_token=\"{0}\", ", requestToken);
    authHeader.AppendFormat("oauth_consumer_key=\"{0}\", ", _consumerKey);
    authHeader.AppendFormat("oauth_nonce=\"{0}\", ", nonce);
    authHeader.AppendFormat("oauth_timestamp=\"{0}\", ", timestamp);
    authHeader.AppendFormat("oauth_signature_method=\"{0}\", ", "HMAC-SHA1");
    authHeader.AppendFormat("oauth_version=\"{0}\", ", "1.0");
    authHeader.AppendFormat("oauth_signature=\"{0}\"", Uri.EscapeDataString(signature));

    ServicePointManager.Expect100Continue = false;

    WebRequest request = HttpWebRequest.Create(uri);
    request.Method = WebRequestMethods.Http.Post;
    request.ContentType = "application/x-www-form-urlencoded";
    request.Headers.Add("Authorization", "OAuth " + authHeader.ToString());

    using (StreamWriter sw = new StreamWriter(request.GetRequestStream()))
    {
        sw.WriteLine("oauth_verifier=" + verifier);
    }

    WebResponse response = request.GetResponse(); 
```

requestToken 和 requestTokenSecret 是我在第一次请求后收到的令牌。

生成签名的 oAuth 助手类工作正常，我已经成功使用了一段时间。

这个请求有什么问题，它总是给我一个 401？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:35:33.500

好吧，尽管我很想知道为什么这不起作用，但我最终使用了 Tweetsharp，并在几分钟内完成了工作。

# php - AJAX：PHP 与 Javascript 视图 - 重复视图逻辑？

> ID：13275227
> 
> 赞同：0
> 
> 时间：2012-11-07T17:44:47.323
> 
> 标签：php, javascript, ajax

我目前正在开发一个小型 Web 应用程序，其中包括一个显示其条目的日历。当页面被加载时，日历会通过 PHP 生成。

在同一页面上，有一个允许编辑条目的表单。更改命令由 AJAX 发送，然后必须以某种方式重新加载日历。

我目前想知道的是以下几点：

我有两种通过 AJAX 更新日历的可能性。

*   **一种是重新发送日历的 HTML 标记，**无论这意味着重新加载整个日历还是日历条目的元素。
    这可能不是最优的，因为它需要通过 AJAX 调用发送的大量（原始）数据。
    另一方面，我只需要调用相同的 PHP 函数再次生成标记，将其返回然后替换客户端的 DOM 元素，因此所需的工作大约是 5 行代码。
    这是我目前使用的方式，因为它感觉“更容易”。
*   **另一种是发送新日历条目 JSON 编码的数据**，然后通过 javascript 函数对现有标记进行必要的更改。
    这也感觉不是最佳的，因为我必须两次使用大量的标记知识：一次在 PHP 代码中，一次在 JS 代码中。一旦标记以任何方式发生变化，我就可以看到这个冗余代码导致问题。
    它也感觉像是一个更“复杂”的解决方案，考虑到我必须操作大量的字段（大约 10+），它很容易包含 4-5 的代码。
    另一方面，由于只发送内容，因此传输的数据要少得多。

**哪个是更好的解决方案？**我错过了第三个（甚至第四个）选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:15:36.223

第二个选项不一定需要在您的代码中涉及冗余。

您的立场是它会这样做，因为您在初始页面加载时在 PHP 中呈现日历 HTML，并且您希望避免在 Javascript 中重复该逻辑。

避免这种情况的方法是将日历呈现完全 Javascript，并始终将日历数据作为 JSON 从您的 PHP 代码中发送。

在初始页面加载时，这意味着 PHP 程序为日历提供了一组初始数据，然后由 Javascript 初始化函数填充（例如`$(document).ready()`，如果您使用 jQuery）。

此解决方案意味着您的代码在所有情况下都使用一致的基于 Javascript 的呈现。

当然，您的第一个解决方案也意味着执行渲染的代码库一致，因此从这个角度来看，这两个选项都可以正常工作。因此，如果这是标准，那么它们之间就没有什么可挑剔的了。显然，如果您已经编写了选项一，那么这显然是选项二的赢家，除非您有充分的理由切换到 Javascript。但其他可能发挥作用的标准可能包括使用相同的 JSON 对象呈现其他内容的可能性，使用它来填充现有的第三方 Javascript 日期控件，或者将其作为 API 提供给第三方。对于这些情况，JSON 无疑是赢家，因为它提供了更大的灵活性。

所以我想这取决于你，什么对你来说很重要。但我想我要说的主要观点是，这两种选择都可以在不重复代码的情况下进行。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:00:02.330

我会说这取决于您网站上的流量。如果该站点的流量很大，则后一种选择将最大程度地减少带宽量，这可以在一天内为您节省很多。

如果带宽不是问题，那么选择最简单的解决方案，我认为这是您当前的解决方案。如果您对 php 函数或布局没有太多控制权，这也可能是最佳解决方案，如果您只使用 css 和 js 工作就是这种情况。

# ios - Facebook朋友的墙贴

> ID：13275231
> 
> 赞同：1
> 
> 时间：2012-11-07T17:45:12.720
> 
> 标签：ios, xcode, facebook

当用户在我的应用程序上登录 facebook 时，他们可以访问他们的朋友列表，选择朋友，然后按完成。一个 UIView 出现，其中列出了选择的朋友的名字。我希望该应用程序在所选朋友的墙上发布消息，或者更好地发送私人消息或请求。我该怎么做？实在看不懂，也找不到具体的示例代码。我试过这个：

```
- (void)postwall
{
NSString *string = @"I reached a score of ";
string = [string stringByAppendingString:[NSString stringWithFormat:@"%d", highscore]];
string = [string stringByAppendingString:@" can you beat me?"];

NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               //kAppId, @"app_id",
                               @"https://developers.facebook.com/docs/reference/dialogs/", @"link",
                               @"http://fbrell.com/f8.jpg", @"picture",
                               @"Watch Ma Balls", @"name",
                               @"How long can you keep out of the way of ma balls for", @"caption",
                               string, @"description",
                               nil];

[facebook dialog:@"feed" andParams:params andDelegate:self];
} 
```

但是 [facebook 对话，“Facebook”给我带来了问题。当我使用 ought SDK 导入文件时，我得到了其他错误。

# javascript - 如何将 HTML 网页转换为 PDF 版本

> ID：13275233
> 
> 赞同：0
> 
> 时间：2012-11-07T17:45:17.807
> 
> 标签：javascript, html, css

> **可能重复：**
> [使用 PHP 将 HTML + CSS 转换为 PDF？](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)

我有一个使用 HTML、CSS 和 javascript/jQuery 开发的网站。我需要将网页转换为 PDF 格式（或任何其他可打印版本）。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:18:10.107

**...任何其他可打印版本**。为什么不使用诸如“打印版本”之类的链接来做特殊的 css 和 html 布局呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:12:52.150

[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)非常棒，可以与任何可以运行命令行进程的编程语言一起使用。您必须在服务器上运行它，但恕我直言，它是从 HTML 手中呈现 PDF 的最佳方式。

命令行：

```
wkhtmltopdf www.myhomepage.com myhomepage.pdf 
```

# c# - Activator.CreateInstance 和标准构造函数有什么区别？

> ID：13275235
> 
> 赞同：1
> 
> 时间：2012-11-07T17:45:30.073
> 
> 标签：c#, wpf, c#-4.0

下面两个例子有什么区别？的目的是什么`Activator`，我为什么要使用它？

1.

```
string objTypeName = "Foo";
Foo foo = (Foo)Activator.CreateInstance(Type.GetType(objTypeName)); 
```

2.

```
Foo foo = new Foo() 
```

我浏览了下面链接的页面，但没有得到清晰的图片。

[这里](http://msdn.microsoft.com/en-us/library/system.activator_methods.aspx)，[这里](https://stackoverflow.com/questions/7598088/purpose-of-activator-createinstance-with-example)和[这里](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:58:52.350

`Activator.CreateInstance`即使不能直接访问它应该属于的类（例如反射），您也可以创建对象，因此您可以例如创建与另一个对象相同类型的对象：

```
var duplicate = Activator.CreateInstance(original.GetType()); 
```

如果您不完全了解原始对象的类别，这是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T18:10:58.477

如果您知道将在设计时实例化的类型，则无需使用`Activator.CreateInstance`. 所做`Activator.CreateInstance`的只是调用公共默认构造函数。

`Activator.CreateInstance`是“后期绑定”的一种形式，如果您想实例化`Type`您在设计时不知道的 a，它会很有用。如果您在设计时已经知道具体类的类型，那么您肯定希望使用“早期绑定”来实例化它，它更快、更简单且显而易见。即直接调用适当的构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T17:58:53.843

Activator.CreatInstance 将调用类 Foo 的默认构造函数。

唯一的区别是，如果你在类型之前知道你的类型，那么创建它`new`会更有意义（和可读性）

# ruby-on-rails - 我是否为此运行后台作业？

> ID：13275239
> 
> 赞同：1
> 
> 时间：2012-11-07T17:45:55.800
> 
> 标签：ruby-on-rails, heroku, background-process

嗨，每当有人在我的网络应用程序中关注另一个人时，我都会发送一封电子邮件。这会显着减慢响应时间，因为在通过邮件程序发送电子邮件之前不会呈现 ajax。这是我使用后台作业的情况吗？我不熟悉后台作业的用例，我想知道，如果这是使用它的场景，从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:54:45.767

这是后台作业的完美场景。后台工作的一些通用宝石将是

*   [延迟作业](https://github.com/collectiveidea/delayed_job)
*   [回复](https://github.com/defunkt/resque)

此问题中的更多选项：[如何使用 Rails 实现在后台发送电子邮件的邮件系统](https://stackoverflow.com/questions/2665920/how-to-implement-a-mailing-system-with-rails-that-sends-emails-in-the-background)

# php - HTTP_Request：格式错误的响应

> ID：13275250
> 
> 赞同：1
> 
> 时间：2012-11-07T17:46:46.157
> 
> 标签：php, curl, pear

当我尝试打开连接时`HTTP_Request`抛出：

> 畸形响应：
> `<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">`

仅当站点与脚本位于同一服务器上时。

有谁知道为什么会发生这种情况或如何解决？

```
<?php
require_once 'HTTP/Request2.php';

$hosts = array('http://example.com', 'http://site_on_my_vps.com' );
$status = array();

foreach($hosts as $host){
    $request = new HTTP_Request2( $host , HTTP_Request2::METHOD_GET);
    $status[ $host ] = array( );

    try {
        $response = $request->send();
        $rbody = $request->getBody();

        $status[ $host ]['status']= $response->getStatus();
        $status[ $host ]['bodysize']=strlen( $rbody );

    } catch (HTTP_Request2_Exception $e) {
        $status[ $host ]['error'] = $e->getMessage();
    }
}

print_r($status); 
```

更新：添加代码

# c++ - 简单数组排序/检查+分治版

> ID：13275255
> 
> 赞同：0
> 
> 时间：2012-11-07T17:47:09.207
> 
> 标签：c++, algorithm, sorting

我想知道是否有人可以告诉我我的代码的错误。我正在尝试制作一种算法来搜索数组中的元素，如果元素“小于 i”且“大于 u”，则返回“true”。我不太明白为什么这似乎不起作用。它有时会返回 true，但似乎忽略了数组的第一个元素，其他的则不然。

除此之外，我想尝试一个“分而治之”的版本，现在我了解了这背后的一些理论。使用“枢轴”点并将数组分成两个较小的问题，但不知道如何实现它，如果有人能详细说明这些问题中的任何一个，我将不胜感激。谢谢。

```
#include <iostream>

using namespace std;

bool ArrayCheck(int length) {
    int A[] = { 5, 10, 20, 25, 50 };
    int i = 40;  //less Than
    int u = 15;  //Greater Than

    for (int Count = 0; Count < length; Count++) { //Counter
        if (A[Count] <= i && A[Count] >= u) { //Checker
            return true;
            break;
        } else {
            return false;
        }
    }
}

int main() {
    cout << ArrayCheck(5);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:52:30.730

其他人应该在那里吗？似乎该`else { return false }`行应该被删除，你可以`return false`在整个循环之后添加......

应该是这样的：

```
for(...)
{
    if(condition)
    {
         return true;
    }
}
return false; 
```

# c - 以十六进制数组打印字符缓冲区

> ID：13275258
> 
> 赞同：7
> 
> 时间：2012-11-07T17:47:17.490
> 
> 标签：c

我正在将 512 个字符读入缓冲区，并希望以十六进制显示它们。我尝试了以下方法，但它始终输出相同的值，尽管应该通过网络接收不同的值。

```
char buffer[512];
bzero(buffer, 512);
n = read(connection_fd,buffer,511);
if (n < 0) printf("ERROR reading from socket");
printf("Here is the message(%d): %x\n\n", sizeof(buffer), buffer); 
```

是否有可能在这里我输出缓冲区数组的地址，而不是它的内容？在 C 中是否有一种简单的方法来完成这项任务，还是我需要编写自己的子例程？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T17:50:08.070

这将读取相同的 512 字节缓冲区，但在输出时将每个*字符转换为十六进制：*

```
char buffer[512];
bzero(buffer, 512);
n = read(connection_fd,buffer,511);
if (n < 0) printf("ERROR reading from socket");

printf("Here is the message:n\n");
for (int i = 0; i < n; i++)
{
    printf("%02X", buffer[i]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T17:55:13.710

要以十六进制显示字符，您只需要正确的格式说明，并且需要遍历缓冲区：

```
//where n is bytes back from the read:
printf("Here is the message(size %d): ", n);
for(int i = 0; i<n; i++)
     printf("%x", buffer[i]); 
```

您使用的代码正在打印缓冲区的地址，这就是它没有为您改变的原因。

由于您已经有一段时间了，如果您希望看到每个字节的格式都很好`0xNN`，您也可以使用以下`%#x`格式：

```
for(int i = 0; i<n; i++)
    printf("%#x ", buffer[i]); 
```

得到类似的东西：

```
0x10 0x4 0x44 0x52... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:51:02.220

这根本不是 C 的工作方式。如果有的话，您正在打印`buffer`数组的地址。

您将需要编写一个子例程，循环遍历缓冲区中的每个字节并将其打印为十六进制。

如果您真的希望人们帮助您，我建议您开始接受一些答案。

# r - 我怎样才能重复一个data.frame？

> ID：13275260
> 
> 赞同：4
> 
> 时间：2012-11-07T17:47:21.393
> 
> 标签：r, dataframe

重复一次data.frame很容易，

```
mt2 <- rbind(mtcars, mtcars) 
```

但是一般来说，类似 R 的方法是什么？如果我想要 10 份`mtcars`一起，我可以

```
mt10 <- mtcars
for (i in 2:10) mt10 <- rbind(mt10, mtcars) 
```

这很简洁，但似乎不符合 R 的精神。有没有更好的方法来做到这一点，或者使用矢量回收的巧妙技巧？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T17:50:31.633

这是一个非常简单的方法：

```
mtcars[rep(1:nrow(mtcars),2),] 
```

或使用更好的“语法”：

```
mtcars[rep(seq_len(nrow(mtcars)),2),] 
```

正如下面 GSee 所指出的，这里的一个区别是`rbind`它将精确地复制行名，而使用索引将通过附加数字来强制唯一的行名。在我的脑海中，我认为唯一的解决方法是在`rep`事后设置行名（再次使用）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T17:59:48.150

@joran 的答案非常优雅，如果不需要复制行名，您应该使用它。但是，这种方式也会复制行名：

`do.call(rbind, replicate(10, mtcars[1:10, ], simplify=FALSE))`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T21:53:27.730

如果您可以忍受另一个包裹：

```
require(mefa)
rep(mtcars,10) 
```

*   毕竟工作！

它看起来有点快：

```
system.time(mtcars[rep(1:nrow(mtcars),1e5),])
system.time(mtcars[rep(seq_len(nrow(mtcars)),1e5),])
system.time(rep(mtcars,1e5)) 
```

给出：

```
 user  system elapsed 
 17.41    0.19   17.89
 17.11    0.31   17.91
 6.79    0.70    7.67 
```

注意事项：1）rep 不会复制行名；这是一个单独的步骤。2)`mefa::rep(mtcars,10)`不能作为：`Error: 'rep' is not an exported object from 'namespace:mefa'`. `mefa:::rep(mtcars,10)`还给`object 'rep' not found`. _ 不知道这是为什么...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-02T14:48:39.630

`dplyr`基于解决方案（从[这里](https://stackoverflow.com/a/47780537/5727278)）

```
library(dplyr)
mtcars %>% slice(rep(1:n(), 2))  # 2 copies of data frame 
```

# c# - 在 C# 和 C++ 之间共享变量

> ID：13275264
> 
> 赞同：18
> 
> 时间：2012-11-07T17:47:32.113
> 
> 标签：c#, c++, sharing

我正在用 c# 编写一个软件，它需要多次调用多个线程，并在 c++ 非托管 dll 中调用一个函数。

我有一个这样的 C++ 文件：

```
// "variables" which consist in some simple variables (int, double) 
//  and in some complex variables (structs containing arrays of structs)

extern "C"
{
     __declspec(dllexport) int function1()
    {
        // some work depending on random and on the "variables"
    }
} 
```

和一个像这样的 C# 类

```
public class class1
{
    //  "variables" <--- the "same" as the C++ file's ones 
    //  Dll import <--- ok

    public void method1()
    {
        int [] result;

        for(int i=0; i<many_times; i++)
        {
            result = new int[number_of_parallel_tasks];                

            Parallel.For(0, number_of_parallel_tasks, delegate(int j)
            { 
                 // I would like to do  result[j] = function1()  
            });

            //  choose best result
            //  then update "variables" 
        }
    }

} 
```

我写了“我想做……”，因为 c++ 函数在每一轮都需要更新“变量”。

我的问题是：

是否可以在 C++ 和 C# 之间共享内存以避免每次都传递引用？这只是浪费时间吗？

我阅读了有关内存映射文件的信息。他们能帮助我吗？但是，您知道更合适的解决方案吗？
非常感谢你。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-09T09:34:42.430

一旦你知道它是如何工作的，使用 P/Invoke 在 C# 和 C++ 之间共享内存就没有问题了。我建议阅读 MSDN 中的编组。您可能还想阅读有关使用 unsafe 关键字和修复内存的信息。

这是一个假设您的变量可以描述为简单结构的示例：

在 C++ 中声明你的函数如下：

```
#pragma pack(1)
typedef struct VARIABLES
{
/*
Use simple variables, avoid pointers
If you need to use arrays use fixed size ones
*/
}variables_t;
#pragma pack()
extern "C"
{
     __declspec(dllexport) int function1(void * variables)
    {
        // some work depending on random and on the "variables"
    }
} 
```

在 C# 中做这样的事情：

```
[StructLayout(LayoutKind.Sequential, Pack=1)]
struct variables_t
{
/*
Place the exact same definition as in C++
remember that long long in c++ is long in c#
use MarshalAs for fixed size arrays
*/
};

[DllExport("YourDll.dll", CallingConvention=CallingConvention.Cdecl)]
static extern int function(ref variables_t variables); 
```

在你的课堂上：

```
variables_t variables = new variables_t();
//Initialize variables here
for(int i=0; i<many_times; i++)
{
    int[] result = new int[number_of_parallel_tasks];
    Parallel.For(0, number_of_parallel_tasks, delegate(int j)
    { 
          result[j] = function1(ref variables)  
    });

    //  choose best result
    //  then update "variables" 
} 
```

您可以使用更复杂的场景，例如在 c++ 中分配和释放结构，使用其他形式的封送处理来获取数据，例如构建自己的类以直接读取和写入非托管内存。但是如果你可以使用一个简单的结构来保存你的变量，那么上面的方法是最简单的。

**编辑：关于如何正确处理更复杂数据的指针**

所以我认为上面的示例是在 C# 和 C++ 之间“共享”数据的正确方法，如果它是简单数据，例如。保存原始类型或原始类型固定大小的数组的结构。

话虽这么说，使用 C# 访问内存的方式实际上几乎没有限制。有关更多信息，请查看 unsafe 关键字、fixed 关键字和 GCHandle 结构。而且，如果您有一个非常复杂的数据结构，其中包含其他结构的数组等，那么您的工作会更复杂。

在上述情况下，我建议将有关如何将“变量”更新为 C++ 的逻辑。在 C++ 中添加一个函数，看起来像这样：

```
extern "C"
{
     __declspec(dllexport) void updateVariables(int bestResult)
    {
        // update the variables
    }
} 
```

我仍然建议不要使用全局变量，所以我提出以下方案。在 C++ 中：

```
typedef struct MYVERYCOMPLEXDATA
{
/*
Some very complex data structure
*/
}variables_t;
extern "C"
{
     __declspec(dllexport) variables_t * AllocVariables()
    {
        // Alloc the variables;
    }
     __declspec(dllexport) void ReleaseVariables(variables_t * variables)
    {
        // Free the variables;
    }
     __declspec(dllexport) int function1(variables_t const * variables)
    {
        // Do some work depending on variables;
    }
    __declspec(dllexport) void updateVariables(variables_t * variables, int bestResult)
    {
       // update the variables
    }
}; 
```

在 C# 中：

```
[DllExport("YourDll.dll", CallingConvention=CallingConvention.Cdecl)]
static extern IntPtr AllocVariables();
[DllExport("YourDll.dll", CallingConvention=CallingConvention.Cdecl)]
static extern void ReleaseVariables(IntPtr variables); 
[DllExport("YourDll.dll", CallingConvention=CallingConvention.Cdecl)]
static extern int function1(IntPtr variables); 
[DllExport("YourDll.dll", CallingConvention=CallingConvention.Cdecl)]
static extern void updateVariables(IntPtr variables, int bestResult); 
```

如果您仍想在 C# 中维护您的逻辑，则必须执行以下操作：创建一个类来保存从 C++ 返回的内存并编写您自己的内存访问逻辑。使用复制语义将数据公开给 C#。我的意思如下，假设你在 C++ 中有这样的结构：

```
#pragma pack(1)
typedef struct SUBSTRUCT
{
int subInt;
double subDouble;
}subvar_t;
typedef struct COMPLEXDATA
{
int int0;
double double0;
int subdata_length;
subvar_t * subdata;
}variables_t;
#pragma pack() 
```

在 C# 你做这样的事情

```
[DllImport("kernel32.dll")]
static extern void CopyMemory(IntPtr dst, IntPtr src, uint size);

[StructLayout((LayoutKind.Sequential, Pack=1)]
struct variable_t
{    
    public int int0;
    public double double0;
    public int subdata_length;
    private IntPtr subdata;
    public SubData[] subdata
    {
        get
        {
             SubData[] ret = new SubData[subdata_length];
             GCHandle gcH = GCHandle.Alloc(ret, GCHandleType.Pinned);
             CopyMemory(gcH.AddrOfPinnedObject(), subdata, (uint)Marshal.SizeOf(typeof(SubData))*subdata_length);
             gcH.Free();
             return ret;
        }
        set
        {
             if(value == null || value.Length == 0)
             {
                 subdata_length = 0;
                 subdata = IntPtr.Zero;
             }else
             {
                 GCHandle gcH = GCHandle.Alloc(value, GCHandleType.Pinned);
                 subdata_length = value.Length;
                 if(subdata != IntPtr.Zero)
                     Marshal.FreeHGlobal(subdata);
                 subdata = Marshal.AllocHGlobal(Marshal.SizeOf(typeof(SubData))*subdata_length);
                 CopyMemory(subdata, gcH.AddrOfPinnedObject(),(uint)Marshal.SizeOf(typeof(SubData))*subdata_length);
                 gcH.Free();
             }
        }
    }
};
[StructLayout((LayoutKind.Sequential, Pack=1)]
sturct SubData
{
    public int subInt;
    public double subDouble;
}; 
```

在上面的示例中，结构仍然可以像第一个示例一样传递。这当然只是关于如何使用结构数组和结构数组中的结构数组处理复杂数据的概述。如您所见，您将需要大量复制来保护自己免受内存损坏。此外，如果内存是通过 C++ 分配的，那么使用 FreeHGlobal 释放它会非常糟糕。如果您想避免复制内存并仍然维护 C# 中的逻辑，您可以编写一个带有访问器的本机内存包装器，用于您想要的任何内容。例如，您将有一个方法来直接设置或获取第 N 个数组成员的 subInt - 这种方式您将保留您的副本与您访问的内容完全相同。

另一种选择是编写特定的 C++ 函数来为您处理困难的数据，并根据您的逻辑从 C# 调用它们。

最后但并非最不重要的一点是，您始终可以将 C++ 与 CLI 接口一起使用。但是，我本人仅在必须时才这样做-我不喜欢术语，但是对于非常复杂的数据，您当然必须考虑它。

**编辑**

为了完整起见，我向 DllImport 添加了正确的调用约定。请注意，DllImport 属性使用的默认调用约定是 Winapi（在 Windows 上转换为 __stdcall），而 C/C++ 中的默认调用约定（除非您更改编译器选项）是 __cdecl。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T17:54:04.393

您可以做的最好的事情是定义您的 C++ 代码（我假设这将是非托管的）。然后在 C++/CLI 中为它编写一个包装器。包装器将为您提供到 C# 的接口，并且是您可以处理 marhalling 的地方（将数据从非管理区域移动到管理区域）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T01:59:42.563

避免传递对 C# 和 C++ 代码都需要的变量/数据的引用的一种方法是从本机 DLL 导出两个函数。除了完成工作的函数之外，请提供另一个函数，该函数允许将引用传入并存储到文件范围静态指针，该指针与两个函数在同一个 .cpp 文件中定义，以便两者都可以访问。

正如您所提到的，您还可以使用内存映射文件（在这种情况下，它可能是非持久化的，因为它永远不需要写入磁盘）。

# c# - 多个服务的多个程序集

> ID：13275268
> 
> 赞同：4
> 
> 时间：2012-11-07T17:47:38.023
> 
> 标签：c#, asp.net, servicestack

我不确定如何组织我的项目。我有一个包含多种服务的解决方案。例如。购物车，UrlShortener。然而，AppHostBase 只能接受一个程序集。如果将 Interface 程序集与 ServiceModel 程序集分离，我还对关注点分离和未来用例感兴趣。如果我的域模型需要了解接口（可能是客户端要求？），那么至少命名空间不会被不必要的 DTO 等淹没。

所以现在我认为它是这样的，每个都是单独的程序集/项目：

```
MyApp.RestServices.ShoppingCartService.Interface
MyApp.RestServices.ShoppingCartService.ServiceModel
MyApp.RestServices.UrlShorteningService.Interface
MyApp.RestServices.UrlShorteningService.ServiceModel 
```

我很困惑在注册 AppHost 时只能配置一个程序集。

```
public AppHost() : base("MyApp's REST services", 
    typeof(MyApp.RestServices.ShoppingCartService.Interface).Assembly) {} 
```

就我而言，我想要不同服务的单独程序集，例如。短网址服务，购物车服务。我不想将它们全部放在一个项目中。

```
public AppHost() : base("MyApp's REST services", 
    new[]{
          typeof(MyApp.RestServices.ShoppingCartService.Interface).Assembly,
          typeof(MyApp.RestServices.Interface.ShoppingCartService).Assembly}
) {} 
```

我真的很新，所以我可能会遗漏很多东西，但我确实希望在我继续学习的过程中长期保持正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T17:52:16.460

ServiceStack`params Assembly[]`在[AppHostBase 构造函数](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/AppHostBase.cs#L27)中接受 a ，即：

```
protected AppHostBase(
    string serviceName, params Assembly[] assembliesWithServices) {...} 
```

这意味着您可以告诉 ServiceStack 扫描多个程序集：

```
public AppHost() : base("MyApp's REST services", 
      typeof(MyApp.RestServices.ShoppingCartService.Interface).Assembly,
      typeof(MyApp.RestServices.Interface.ShoppingCartService).Assembly) {...} 
```

# mysql - SQL根据初始表的ID加入另一个表

> ID：13275271
> 
> 赞同：2
> 
> 时间：2012-11-07T17:47:42.953
> 
> 标签：mysql, sql, database, wordpress

我真的似乎无法掌握 SQL 连接等的 sytanx ......所以我需要一些帮助（我认为这很简单）

我查询`bid_tag`如下：

```
SELECT paid_date, term, pet_id FROM bid_tag WHERE active = 1 
```

我需要使用`pet_id`然后从另一个表中获取一些信息`wp_postmeta`，该表实际上在一个`meta_key` `meta_value`结构中（WordPress）......

因此，我需要获取`meta_value`“ `meta_key`bid_name”，例如......以及其他值。

```
TABLE
id | meta_key | meta_value
1    bid_name    Max 
```

这`ID`与`ID`我需要将初始表连接到...

对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:34:45.867

有一些方法可以使用加入：
1）使用`inner join`或同样只是`join`：

```
select 
  --some columns
from bid_tag
join wp_postmeta on
  bid_tag.pet_id = wp_postmeta.id
where
  wp_postmeta.meta_key = 'bid_name' 
```

结果将只有`pet_id`存在于中的记录`wp_postmeta`。另一个将被省略。如果`wp_postmeta`有几个相同的记录`id`（并且存在`pet_id`等于 this `id`），那么您将获得几个具有此 pet_id 的记录（**但**具有不同的`meta_key`and `meta_value`）。
2）使用`left join`：

```
select 
  --some columns
from bid_tag
left join wp_postmeta on
  bid_tag.pet_id = wp_postmeta.id
where
  wp_postmeta.meta_key = 'bid_name' 
```

在这种情况下，除了一件事之外，行为将是相同的——即使没有任何`id`a`pet_id`结果将包含来自`wp_postmeta`this的记录`pet_id`。但是`meta_key`，`meta_value`在这种情况下将是`null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:00:44.463

这是您的查询的方式：

```
SELECT B.meta_key, B.meta_value, A.pet_id
FROM bid_tag A
JOIN wp_postmeta B
ON B.id = A.pet_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T17:59:08.277

加入`id`和`meta_key`以选择您想要的值。如果您还希望值与元表中的其他键一起使用，一种方法是多次连接：

```
SELECT bt.paid_date, bt.term, bt.pet_id,
    bn.meta_value as bidname,
    bo.meta_value as bidother
FROM bid_tag bt
INNER JOIN wp_postmeta bn on bn.id = bt.pet_id and bn.meta_key = 'bid_name'
INNER JOIN wp_postmeta bo on bo.id = bt.pet_id and bo.meta_key = 'bid_other'
WHERE bt.active = 1 
```

如果这些值不一定存在于元表中，请使用 a`LEFT OUTER JOIN`代替，它将返回`null`缺少的任何内容。

# c++ - 有人知道模仿 Pascal 的“范围数组”的类吗？

> ID：13275272
> 
> 赞同：2
> 
> 时间：2012-11-07T17:47:45.497
> 
> 标签：c++

我不记得确切的名字——关于 Pascal 我几乎不记得太多了——但它只是一个做了一些边界检查的数组，所以你可以定义和使用这样的东西：

```
char arr[20..40]; 
```

如果您访问元素 15 或 60，它将引发越界异常。

在 C++ 中，我认为它看起来更像

```
vector<char> arr(20,40); 
```

使用围绕 C++ 数组的类包装器非常简单，但我希望有人知道使用向量的东西。理想情况下，我正在寻找范围（和大小）会动态变化的东西，如果（1）调用了 setter 或（2）进行了插入/删除，但（3）尝试访问无效元素仍然抛出异常。

```
arr.setUpper(50); 
```

和

```
arr.push_back(element);  //adjust upper array bound 
```

我还没有跟上 C++11 数组的速度，所以也许他们已经在做这样的事情了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:24:58.383

C++ 数组根本不支持像 Pascal 那样的自定义边界。它们总是从索引 0 开始，以索引长度 1 结束。如果你想要类似 Pascal 的索引，你必须自己实现它，例如：

```
template<typename T, const int LowBound, const int HighBound>
class RangedArray
{
private:
    T m_arr[HighBound-LowBound+1];

    void CheckBounds(const int index)
    {
        if ((index < LowBound) || (index > HighBound))
            throw std::out_of_range();
    }

public:
    int low() const { return LowBound; }
    int high() const { return HighBound; }

    T operator[](const int index) const
    {
        CheckBounds(index);
        return m_arr[index-LowBound];
    }

    T& operator[](const int index)
    {
        CheckBounds(index);
        return m_arr[index-LowBound];
    }
}; 
```

.

```
RangedArray<char, 20, 40> arr;
arr[20] // OK
arr[15] // out of bounds
arr[60] // out of bounds 
```

如果你想要更动态的东西，试试这个：

```
template<typename T, const int LowBound>
class RangedVector
{
private:
    std::vector<T> m_vec;

    void CheckBounds(const int index)
    {
        if ((index < low()) || (index > high()))
            throw std::out_of_range();
    }

public:
    int low() const { return LowBound; }
    int high() const { return m_vec.empty() ? -1 : (LowBound + m_vec.size() - 1); }

    void setHighBound(const int HighBound)
    {
        if (HighBound < LowBound)
            throw something;
        m_vec.resize(HighBound-LowBound+1);
    }

    void push_back(const T &value)
    {
        m_vec.push_back(value);
    }

    T operator[](const int index) const
    {
        CheckBounds(index);
        return m_vec[index-LowBound];
    }

    T& operator[](const int index)
    {
        CheckBounds(index);
        return m_vec[index-LowBound];
    }
}; 
```

.

```
RangedVector<char, 20> arr;
arr.setHighBound(40);
arr[20] // OK
arr[15] // out of bounds
arr[60] // out of bounds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:41:43.130

`std::vector::at`将执行[边界检查](http://en.cppreference.com/w/cpp/container/vector/at)`std::out_of_range`，如果使用了无效的位置，则会引发类型异常。`operator[]`不执行边界检查。

在您的示例中，`vector<char> arr(20,40)`将构造一个由 20 个整数组成的向量，其值为 40。这称为重复序列构造函数。

# android - 我在哪里可以找到有关如何使用 Google Market Billing APIv2 将应用内订阅添加到我的 Android 应用的良好说明？

> ID：13275275
> 
> 赞同：1
> 
> 时间：2012-11-07T17:48:05.983
> 
> 标签：android, in-app, subscriptions

我一直在尝试理解今年早些时候包含在 Market Billing API v2 中的有关应用内订阅功能的 Android 开发者文档。所有的文档似乎都在谈论应用内计费，并且只简单地提到了订阅的实现和测试。

我已经下载了不实现订阅的地下城示例应用程序。我已经建立了一个测试应用程序，它定义了我自己的两个订阅产品。当我购买 9.99 美元/年的订阅时，它确实向我收费。我未能正确存储购买令牌，因此没有实际交付（我的错）。然后我尝试通过 Google Checkout 为我的订单退款，以便我可以重新开始测试，但它没有给我退款。它实际上是从我的信用卡中扣款的，而且我没有捕获购买令牌，所以我无法恢复我所知道的旧交易。有谁知道 Google Play 应用内订阅过程的任何非常清晰的文档以及可靠且可重复的测试过程？关于这个的 android 文档对我来说很难。到目前为止，我一直在使用以下链接作为参考：

[http://developer.android.com/guide/google/play/billing/billing_subscriptions.html](http://developer.android.com/guide/google/play/billing/billing_subscriptions.html)

[http://developer.android.com/guide/google/play/billing/billing_overview.html](http://developer.android.com/guide/google/play/billing/billing_overview.html)

感谢您提供任何人都可以提供的帮助。

# android - Android 自定义键盘“下一步”到“完成”按钮

> ID：13275283
> 
> 赞同：3
> 
> 时间：2012-11-07T17:48:29.627
> 
> 标签：android, keyboard

我正在制作一个自定义键盘，但我遇到了 Next/Done 按钮的问题。

我`EditText`在屏幕上有两个框。第一个将 IMEOption 设置为显示 Next 按钮，第二个将 IMEOption 设置为显示 Done 按钮。如果我触摸其中一个并且调用了自定义键盘的`onStartInput`方法，则该按钮被正确标记。

但是，当我触摸到第一个`EditText`框，然后“下一步”到第二个框时，按钮保持为下一步，而不是应有的完成。

如何让键盘拉动它所在`EditorInfo`的`EditText`位置以重新标记 Next/Done 按钮？

谢谢亚当

# perl - 你如何防止 perl 制作转储文件？

> ID：13275288
> 
> 赞同：1
> 
> 时间：2012-11-07T17:48:40.600
> 
> 标签：perl, bash, perl-module

目前我正在运行几个处于实验测试阶段的脚本。不幸的是，它们有时会崩溃并生成大型“core-perl-11-544-546-27320-1xxxxxxx”perl 核心转储文件。

我想确保如果将来这些文件再次崩溃，它们不会生成 perl 转储文件，或者转储的文件大小受到限制。

现在有一些脚本检查 Perl 核心转储文件，如果它们大于设定的大小，则将其删除，但这显然是对膝盖受伤的创可贴。

**我该如何限制 perl 转储文件的大小，或阻止创建一个？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T12:42:45.503

为了防止从 perl 脚本中创建核心转储文件，您可以使用（从[How do I set a ulimit from inside a Perl script that apply to its children? 中窃取的过程？](https://stackoverflow.com/a/8272239/2413201)）：

```
require 'syscall.ph';
require 'sys/resource.ph';
$rstruct = pack "L!L!",0,&RLIM_INFINITY;
syscall(&SYS_setrlimit,&RLIMIT_CORE,$rstruct); 
```

要将转储限制为特定大小，请将`0`上述更改为所需大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T13:42:09.987

不会

使用 BSD::Resource；setrlimit(RLIMIT_CORE, 0, 0);

更简单？

# java - 代码不断跳过输入步骤

> ID：13275290
> 
> 赞同：1
> 
> 时间：2012-11-07T17:48:50.007
> 
> 标签：java, input

我最近开始使用 Java，我需要开始一个大项目，但是我的代码中出现了一些奇怪的问题，如下所示：

```
 import java.util.Scanner;
public class Sifre {

    public static void main(String[] args) {
        Scanner unos = new Scanner(System.in);
        System.out.println("Unesite broj sifara:");
        int bsif = unos.nextInt();
        String sifre[] = new String [bsif];
        String imena[] = new String [bsif];
        int i,z;
        for (i = 0;i<bsif;i++)
        {
            System.out.println("Unesite sifru broj " + (i+1));
            sifre[i] = unos.nextLine();
        }
        for (z=0;z<bsif;z++)
        {
            System.out.println(sifre[z]);
        }
    }

} 
```

每次我运行代码时，它都会跳过第一个输入步骤并继续正常工作，即使计数器以超过 0 开头。这是输出，告诉我出了什么问题（我知道代码并不完美，但它是我的第一个Java 3 个月后发布的时间）

```
> Unesite broj sifara:

>>3

>Unesite sifru broj 1

>Unesite sifru broj 2
>>first

>Unesite sifru broj 3
>>second
>
>first
>
>second 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:55:15.067

`Add input.nextLine()`后

```
int bsif = unos.nextInt(); 
```

# python - 避免对 HTTP 请求进行 RDNS 查找

> ID：13275291
> 
> 赞同：2
> 
> 时间：2012-11-07T17:48:56.053
> 
> 标签：python, linux, sockets, reverse-dns

我尝试使用以下代码使用 python 建立 HTTP 连接。我自己进行 DNS 解析，因为我无法更改相关机器上的`hosts`和`resolv.conf`文件之类的东西。

```
class resolver(object):
    def __init__(self, server):
        self.server = server
    def __call__(self, host):
        res = check_output('host %s %s' % (host, self.server), shell = True)
        ips = findall('has address (\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})', res)
        return choice(ips)

class http_connection(httplib.HTTPConnection):
    dns_server = '8.8.8.8'
    def connect(self):
        resolv = resolver(http_connection.dns_server)
        self.sock = socket.create_connection((resolv(self.host), self.port), self.timeout)
...
x = http_connection('%s:%d' % (args.host, args.port))
x.request('GET','/start/')
rep = x.getresponse()
print rep.read() 
```

一切正常，我从 DNS 获得一个 IP，创建了套接字（使用 ip-port 对，而不是主机名），我得到了答案。唯一的问题是，它需要很长时间，最多 5-6 秒。调试后，我发现由于某种原因，对已解析的 IP 进行了反向 DNS 查找，这会超时。在向 /etc/hosts 添加条目后，我通过在另一台机器上复制它来验证这是问题所在，一切都像我预期的那样快。此外，值得一提的是：使用 curl 或 wget 也会生成 RDNS。

我看到了两种解决方法，但不知道如何实际实现它们：

1.  理想情况下，我确实希望反向查找尽可能匹配默认行为，所以有没有办法强制此查找转到我自己提供的 dns_server（不在 resolv.conf 中）。
2.  如果那不可能，我可以在某处禁用此 RDNS 吗？我可以达到 setsockopt 级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:53:45.293

我终于找到了自己解决这个问题的方法。显然，当我自己没有明确提供源地址并让系统选择时，就会发生这种情况。我想 Linux 会采取一些技巧来找出最好使用的接口，而 RDNS 就是其中之一。

通过如下提供 source_address ，一切正常：

```
class http_connection(httplib.HTTPConnection):
    def __init__(self, dns_server, *args, **kwargs):
        httplib.HTTPConnection.__init__(self, *args, **kwargs)
        self.resolv = resolver(dns_server, self.source_address)
    def connect(self):
        self.sock = socket.create_connection((self.resolv(self.host), self.port), self.timeout, self.source_address)
...
x = http_connection(args.dns_server, '%s:%d' % (args.host, args.port), source_address = (args.source_address, 0)) 
```

# ios - 在代码中检测iOS模拟器中慢速动画是否打开/关闭

> ID：13275294
> 
> 赞同：13
> 
> 时间：2012-11-07T17:49:00.827
> 
> 标签：ios, xcode, animation, core-animation, ios-simulator

我想以编程方式检测模拟器中慢速动画是打开还是关闭。

像这样的东西会很方便。

```
IPHONE_SIMULATOR_SLOW_ANIMATIONS_ENABLED() 
```

这仅用于开发目的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T11:58:22.867

Fortunately it's easy:

```
float UIAnimationDragCoefficient(void);

static inline BOOL slowAnimationsEnabled()
{
#if TARGET_IPHONE_SIMULATOR
    return UIAnimationDragCoefficient() != 1;
#else
    return NO;
#endif
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T22:44:36.107

不幸的是，这并不容易。查看[0xced的](https://stackoverflow.com/users/21698/0xced)[这段代码](https://gist.github.com/89223f37e2764c283767)，了解如何在模拟器中制作慢速 CAAnimations。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-07T21:08:12.533

如何在 Swift 3.0 中做到这一点：

```
@_silgen_name("UIAnimationDragCoefficient") func UIAnimationDragCoefficient() -> Float

func slowAnimationsEnabled() -> Bool {
    return UIAnimationDragCoefficient() != 1.0
} 
```

请注意，不幸的是，您不能`TARGET_IPHONE_SIMULATOR`在 Swift 中在编译时使用，并且您不应将其包含在您的 App Store 提交中，因为您可能会因使用私有 API 而被拒绝。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-19T10:51:41.553

我定义了这个函数，它返回将动画持续时间乘以的因子（如果禁用慢速动画，则为 1，否则为慢速因子）：

```
CGFloat FTSimulatorAnimationDragCoefficient(void) {
    static float (*UIAnimationDragCoefficient)(void) = NULL;
#if TARGET_IPHONE_SIMULATOR
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        UIAnimationDragCoefficient = (float (*)(void))dlsym(RTLD_DEFAULT, "UIAnimationDragCoefficient");
    });
#endif
    return UIAnimationDragCoefficient ? UIAnimationDragCoefficient() : 1.f;
} 
```

请注意，我使用`float`, 不是`CGFloat`作为被调用`UIAnimationDragCoefficient()`函数的返回类型。这是使用 64 位模拟器所必需的。

然后我可以简单地将动画持续时间相乘：

```
CAAnimation animation = [CABasicAnimation animation];
animation.duration = 0.5 * FTSimulatorAnimationDragCoefficient(); 
```

# list - 如何保存列表 使用 protobuf.net 而不使用 ascii 文本？

> ID：13275299
> 
> 赞同：4
> 
> 时间：2012-11-07T17:49:33.497
> 
> 标签：list, protobuf-net, point

我正在尝试将列表中的点数据保存到 protobuf.net 创建的二进制文件中。虽然我本身并没有遇到问题，但我也在尝试以一种在文本编辑器中不易查看的格式保存数据。默认情况下，当您将点结构列表保存到文本文件时，每个点的 x 和 y 都显示为 ascii 文本。

```
 [global::ProtoBuf.ProtoMember(1, IsRequired = false, Name = @"BufPoints", DataFormat = global::ProtoBuf.DataFormat.Default)]
    private List<Point> BufPoints
    {
        get
        {
            return this.Points;
        }
        set
        {

            this.Points = value;

        }
    } 
```

我尝试创建自己的类来保存 x 和 y 双数据，但我的例程的一部分涉及数据的深度克隆，并且在执行此克隆时这些值似乎丢失了。

```
[global::ProtoBuf.ProtoMember(1, IsRequired = false, Name = @"EncodedPoints", DataFormat = global::ProtoBuf.DataFormat.Default)]
    private List<Utils.PointConverter> EncodedPoints
    {
        get
        {
            List<Utils.PointConverter> temp = new List<Utils.PointConverter>();
            if (Points != null)
            {
                foreach (Point p in this.Points)
                {
                    temp.Add(new Utils.PointConverter(p));
                }
            }
            return temp;
        }
        set
        {
            if (value != null)
            {
                this.Points = new List<Point>();
                foreach (Utils.PointConverter pc in value)
                {
                    this.Points.Add(pc.GetPoint());
                }
            }

        }
    } 
```

PointsConverter 类如下：

```
 [global::System.Serializable, global::ProtoBuf.ProtoContract(Name = @"PointConverter")]
class PointConverter
{
    [global::ProtoBuf.ProtoMember(1, IsRequired = true, Name = @"X", DataFormat = global::ProtoBuf.DataFormat.Default)]
    public double X;

    [global::ProtoBuf.ProtoMember(2, IsRequired = true, Name = @"Y", DataFormat = global::ProtoBuf.DataFormat.Default)]
    public double Y;

    public PointConverter(System.Windows.Point point)
    {
        this.X = point.X;
        this.Y = point.Y;
    }

    public PointConverter()
    {

    }

    public System.Windows.Point GetPoint()
    {
        return new System.Windows.Point(X, Y);
    }
} 
```

我不确定为什么在深度克隆期间值会丢失。有没有办法以非 ascii 格式以另一种方式保存数据，或者有办法处理我的深度克隆问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:44:21.567

首先，protobuf 在任何时候都不是 ASCII（尽管字符串值存储为 UTF-8，对于没有重音的拉丁字符，它通常看起来像 ASCII）——我无法评论你在没有上下文的情况下看到的内容，但是序列化也不是加密。使用二进制格式可能会*让人难以*阅读/编辑内容，但不要将其用作安全检查的一部分。

至于代码：我认为你把事情复杂化了。实际上，对于两者来说`System.Drawing.Point`，`System.Windows.Point`代码都非常*接近于*自动找出映射作为“自动元组”处理的一部分。但不完全是！但是我们可以通过在你的应用程序启动中添加一行配置调整来简单地教育它，告诉它`Point`通过存储`.X`为字段 1 和`.Y`字段 2 来序列化。这只是：

```
// either or both; whatever you need
model.Add(typeof(System.Windows.Point), false).Add("X", "Y");
model.Add(typeof(System.Drawing.Point), false).Add("X", "Y"); 
```

或者如果您使用的是默认模型实例（即`Serializer.*`方法）：

```
// either or both; whatever you need
RuntimeTypeModel.Default.Add(typeof(System.Windows.Point), false).Add("X", "Y");
RuntimeTypeModel.Default.Add(typeof(System.Drawing.Point), false).Add("X", "Y"); 
```

而且……就是这样！这就是你所需要的。or的成员`Point`或现在应该正确地序列化和反序列化。`List<Point>``Point[]`

# python - 如何将 unicode 字符串的 str 表示形式转换为 unicode？

> ID：13275301
> 
> 赞同：0
> 
> 时间：2012-11-07T17:49:52.743
> 
> 标签：python, unicode

我在葡萄牙的用户计算机上运行 python 程序，用户的用户名包含 unicode 字符。我希望`os.path.expanduser('~')`返回一些功能性的东西，因为我将结果路径用于某些文件操作，但它当前返回`str`unicode 字符串的 python 表示：

```
>>> import os
>>> os.path.expanduser('~')
'C:\\Users\\V\xe2nia' 
```

但这是一个 python 字符串......我怎样才能将它转换为 Windows 将识别为有效文件路径的实际 unicode 字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-07T17:52:51.453

该函数返回一个字节字符串，而不是一个 unicode 字符串。鉴于用于字符串的编码，您需要对其进行解码。

```
os.path.expanduser('~').decode(sys.getfilesystemencoding()) 
```

我在这里假设使用的编码是文件系统编码，可以通过[`sys.getfilesystemencoding()`](http://docs.python.org/2/library/sys.html#sys.getfilesystemencoding). 从这里看起来像 latin-1，但你不能确定。

您还可以尝试传入一个*unicode*路径`os.path.expanduser()`并让 Python 为您进行解码：

```
os.path.expanduser(u'~') 
```

[请阅读Python Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)中的这个和其他 Unicode 问题。如果您不了解编码字节串和 Unicode 字符串之间的区别，请阅读[这篇优秀](http://www.joelonsoftware.com/articles/Unicode.html)的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T01:21:34.173

仅当主目录的路径实际上可以在文件系统编码中表达时，使用文件系统编码将字节字符串解码为 Unicode 才有效。

在 Windows 上，用于 byte-string-file-path I/O 的文件系统编码是依赖于语言环境的“ANSI 代码页”，不幸的是，它从来不是 UTF，所以总有一些字符不能用字节表示-string-file-path 函数。例如，如果用户名包含一个日文字符，但它是西欧 Windows 安装（使用代码页 1252，类似于 ISO-8859-1），Martijn 的示例将失败。

在大多数使用 C 标准库基于字节字符串的文件 I/O 函数的语言上，这就是它的结尾：在 Java 等中，您根本无法访问名称包含 ANSI 代码页之外的字符的文件。

幸运的是，Python 使用本机 Win32 API 调用而不是 C 标准库，对 Windows 的 Unicode 文件名有特定的支持。使用这些，您可以获得 Windows 理解的真实 Unicode 文件名，避免将其转换为字节字符串并返回时所涉及的有损修改。

通常，您只需将 Unicode 字符串传递给您正在调用的函数即可触发 Python 2 中的 Unicode 文件名支持。Python 将返回 Unicode 字符串作为响应：

```
>>> import os
>>> os.path.expanduser(u'~')
u'C:\\Users\\V\xe2nia' 
```

# jquery - 查找具有特定类名的 div 的索引

> ID：13275302
> 
> 赞同：0
> 
> 时间：2012-11-07T17:49:53.683
> 
> 标签：jquery

如何使用每个找到具有特定类名的 div 索引？这是html：

```
<div class="">text1</div>
<div class="">text2</div>
<div class="active">text3</div>
<div class="">text4</div>
<div class="">text5</div>
<div class="">text6</div> 
```

所以基本上我需要找到类名，然后找到他的 div 索引号？有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T17:50:50.053

您不需要每个都这样做：

```
$("div.active").index(); 
```

在这里，有一个小提琴：http: [//jsfiddle.net/adrianonantua/SKBvW ​​/](http://jsfiddle.net/adrianonantua/SKBvW/)

请记住，返回的索引是从零开始的，因此代码将为发布的 HTML 返回 2，因为它是第三个 div。

# matlab - Matlab中的模拟音频信号

> ID：13275304
> 
> 赞同：0
> 
> 时间：2012-11-07T17:50:01.847
> 
> 标签：matlab, audio, microphone

我在使用 matlab 捕获影响麦克风阵列的音频信号时遇到问题。我有两个音频文件：一个是感兴趣的信号，另一个是噪音。我想模拟麦克风接收这两个信号的方式。

给定笛卡尔系统中两个声源的位置以及两个信号的方位角和仰角。（方位角将用作麦克风阵列的到达角方向）。

如何在 Matlab 中模拟这种测试？

# jquery - 1-N 实体创建/编辑视图

> ID：13275305
> 
> 赞同：0
> 
> 时间：2012-11-07T17:50:03.947
> 
> 标签：jquery, asp.net-mvc-3, grid, datatables

我正在浪费时间（或者我应该说几天？）试图把它放在一起，所以，任何帮助都会非常感激。

问题：我正在构建一个 MVC3 视图和控制器来为代表客户端的类输入数据，该类具有 0 或 N 个电话号码（由 ClientPhone 类表示）。我的问题在于该模型的用户界面（视图）。到目前为止，基于网上的一些研究，我已经为 Client 创建了一个强类型视图。然后，我遍历模型的 Phones 属性，为 Phones 呈现 HTML 表。我正在尝试将该表的 DataTables 表示用于电话数据的所有操作，并且在提交操作（javascript）中，我通过 JSon 为控制器发送此表（连同客户端的数据本身）。到目前为止，我的问题是在 JS 中实现这些电话数据操作的每一个使用场景（比如输入新电话，删除保留的电话，删除新添加的 - 但未保留的 - 电话，更新保留的电话，....）真是太辛苦了！必须有一个更简单的方法。

谁能指出我在父类的视图中维护某个类的列表的方法？

* * *

好的，这是代码（或者至少是重要的部分）：

对于类客户端类，我得到了这个：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;
using System.Linq;
using System.Web;
using Olimpique.DAL;
using System.Data.Entity;

namespace Olimpique.Entities
{
[Table("OLIM_PROPRIETARIO")]
public class Proprietario
{
    public int? fIDProprietario;
    //---=== ATRIBUTOS ===---
    [Key]
    [Column("PROP_ID_PROPRIETARIO")]
    public int? IDProprietario { get { return this.fIDProprietario; } set { this.fIDProprietario = value; this.LoadLists(); } }

    [ForeignKey("EstadoCivil")]
    [Column("ESCI_ID_ESTADO_CIVIL")]
    public int? IDEstadoCivil { get; set; }
    public virtual EstadoCivil EstadoCivil { get; set; }

    [Column("PROP_TX_NOME")]
    public string Nome { get; set; }

    [Column("PROP_TX_CPF")]
    public string CPF { get; set; }

    [Column("PROP_TX_IDENTIDADE")]
    public string Identidade { get; set; }

    [Column("PROP_TX_ORGAO_IDENT")]
    public string OrgaoIdentidade { get; set; }

    [Column("PROP_DT_EMISSAO_IDENT")]
    public DateTime? EmissaoIdentidade { get; set; }

    [Column("PROP_TX_NACIONALIDADE")]
    public string Nacionalidade { get; set; }

    [Column("PROP_TX_PROFISSAO")]
    public string Profissao { get; set; }

    [Column("PROP_TX_OBS")]
    public string Obs { get; set; }

    public List<EnderecoProprietario> Enderecos { get; set; } 

    public List<TelefoneProprietario> Telefones { get; set; }

    //---=== METODOS ===---
    public void LoadLists()
    {
        OlimpiqueDBContext myDbContext = new OlimpiqueDBContext();

        var ends = (from end in myDbContext.EnderecosProprietarios
                      where end.IDProprietario == this.IDProprietario
                      select end);

        var tels = (from tel in myDbContext.TelefonesProprietarios
                      where tel.IDProprietario == this.IDProprietario
                      select tel);

        this.Enderecos = ends.ToList<EnderecoProprietario>();
        this.Telefones = tels.ToList<TelefoneProprietario>();
    }
}
} 
```

这两个属性是列表，是代表电话和地址的属性......

在视图中，我得到了（到目前为止）：

```
(...)
    $(document).ready(function () {
        // here i have used datatables.js (jQuery Data Table)
        $('#tblTelefones').dataTable({
            "sDom": 'T<"clear">lfrtip',
            "oTableTools": {
                "aButtons": [],
                "sRowSelect": "single"
            },
            "bLengthChange": false,
            "bFilter": false,
            "bSort": false,
            "bInfo": false,
            "oLanguage": {
                "sZeroRecords": " - - - ",
                "sEmptyTable": "< nenhum telefone armazenado >"
            },
            "aoColumns": [
                    /*ID*/         { "bVisible": false },
                    /*Número*/     null,
                    /*Falar com */ null,
                    /*Obs*/        null,
                    /*Actions*/    null,
                    /*DataStatus*/ { "bVisible": false, "sType": "html" }
            ]
        });
        var oTable = $('#tblTelefones').dataTable();

    });
(...) 
```

这是保存“TelefoneProprietario”实例数据的表的 DataTable 表示形式的呈现。

以下是一些 JS 使用场景（例如添加和删除 TelefoneProprietario 数据）：

```
 function AddTel() {
        if ($('#Telefone').val().trim() == '')
        {
            alert('É necessário indicar ao menos o número do telefone a incluir');
            return;
        }
        $('#tblTelefones').dataTable().fnAddData(['', $('#Telefone').val(), $('#FalarCom').val(), $('#ObsTel').val(), '<span onclick="DeleteTel(this.parentNode.parentNode);">X</span>', 'I']);
        $('#Telefone').val("");
        $('#FalarCom').val("");
        $('#ObsTel').val("");
    }

    function DeleteTel(nTr) {
        var oTT = $('#tblTelefones').dataTable();
        var sRow = oTT.fnGetData(nTr);
        if (confirm('Tem certeza que deseja remover o telefone ' + sRow[1] + '?')) {
            if (sRow[0] == '') {
                oTT.fnDeleteRow(nTr);
            } else {
                oTT.fnUpdate('D', nTr, 5);
            }
        }
    } 
```

这是表格的渲染：

```
 <div style="width:75%; margin-left:auto; margin-right:auto;">
            <fieldset style="width:100%;">
                <legend>Novo Telefone</legend>
                <table style="width:100%;">
                    <tr>
                        <td style="width:10%;">
                            <span class="editor-label">
                                <label>Telefone:</label>
                            </span>
                        </td>
                        <td style="width:23%;">
                            <span class="editor-field">
                                @Html.TextBox("Telefone")
                            </span>
                        </td>
                        <td style="width:10%;">
                            <span class="editor-label">
                                <label>Falar com:</label>
                            </span>
                        </td>
                        <td style="width:23%;">
                            <span class="editor-field">
                                @Html.TextBox("FalarCom")
                            </span>
                        </td>
                        <td style="width:10%;">
                            <span class="editor-label">
                                <label>Obs:</label>
                            </span>
                        </td>
                        <td style="width:23%;">
                            <span class="editor-field">
                                @Html.TextBox("ObsTel")
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="6" style="text-align:center;">
                            <input type="button" value="Adicionar telefone" onclick="AddTel()" />
                        </td>
                    </tr>
                </table>
            </fieldset>
            <table id="tblTelefones" class="TabelaDados" style="width:100%">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Número</th>
                    <th>Falar com </th>
                    <th>Obs</th>
                    <th>&nbsp;</th>
                    <th>DataStatus(N = None / U - Updated / D - Deleted / I = Inserted)</th>
                </tr>
                </thead>
                <tbody>
                @{
                    foreach (var tel in Model.Telefones)
                    {
                        <tr>
                            <td>@Html.DisplayFor(t => tel.IDTelefoneProprietario)</td>
                            <td>@Html.DisplayFor(t => tel.Numero)</td>
                            <td>@Html.DisplayFor(t => tel.FalarCom)</td>
                            <td>@Html.DisplayFor(t => tel.Obs)</td>
                            <td><span onclick="DeleteTel(this.parentNode.parentNode);">X</span></td>
                            <td>N</td>
                        </tr>
                    }
                }
                </tbody>
            </table>
        </div> 
```

请注意，这并没有完全工作（只是为了简单的使用），它仍然没有实现很多情况......

将此表发送回控制器的方式完全基于作者称为“Master Detail CRUD 操作”的“http://code.msdn.microsoft.com/Detail-CRUD-Operations-fbe935ef”示例。 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T02:22:54.687

试试这个控制器

```
 public ActionResult ObtenerDatosGrid(string sidx, string sord, int page, int rows)
        {
            Func<Amigo, IComparable> funcOrden =
                sidx == "Apellidos" ? a => a.Apellidos :
                sidx == "FechaDeNacimiento" ? a => a.FechaDeNacimiento :
                sidx == "Email" ? a => a.Email :
                (Func<Amigo, IComparable>)(a => a.Id);

            // Establecemos si se trata de orden ascendente o descendente, en
            // función del parámetro "sord", que puede valer "asc" o "desc"
            Ordenacion ordenacion = sord == "asc" ? Ordenacion.Ascendente : Ordenacion.Descendente;

            // Usamos el modelo para obtener los datos
            var datos = gestorDeAmigos.ObtenerAmigos(page, rows, funcOrden, ordenacion);
            int totalRegistros = gestorDeAmigos.ContarAmigos();

            int totalPages = (int)Math.Ceiling((decimal)totalRegistros / (decimal)rows);

            // Creamos la estructura
            var data = new
            {
                total = totalPages,
                page = page,
                records = totalRegistros,
                rows = from a in datos
                       select new {
                           id= a.Id,
                           cell= new string[] {
                               a.Apellidos,
                               a.Nombre,
                               a.FechaDeNacimiento.ToShortDateString(),
                               a.Email
                           }
                       }
            };
           // return Json(data);
            return Json(data, JsonRequestBehavior.AllowGet);
        }

<link href="../../Content/Runnable.css" rel="stylesheet" type="text/css" /> 
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>   

<script type="text/javascript">
    jQuery(document).ready(function () {

        jQuery("#list").jqGrid({
            url: '<%= Url.Action("ObtenerDatosGrid") %>',
            datatype: 'json',
            mtype: 'GET',
            colNames: ['Apellidos', 'Nombre', 'Fecha Nac.', 'Email'],
            colModel: [
                      { index: 'Apellidos', width: 150, align: 'left' },
                      { index: 'Nombre', width: 150, align: 'left', sortable: false },
                      { index: 'FechaDeNacimiento', width: 80, align: 'center' },
                      { index: "Email", width: 120, align: 'left'}],
            pager: jQuery('#pager'),
            rowNum: 20,
            rowList: [20, 50, 100],
            sortname: 'Apellidos',
            sortorder: 'asc',
            viewrecords: true,
            imgpath: '/content/cupertino/images',
            caption: 'Agenda personal',
            height: 400,
            width: 900,
            onSelectRow: function (id) {
                alert("Pulsado Id: " + id);
            }
        });

    });
</script> 
```

# android - android WifiManager中Rssi是什么意思

> ID：13275306
> 
> 赞同：8
> 
> 时间：2012-11-07T17:50:07.150
> 
> 标签：android, android-wifi

我正在尝试使用获取当前 wifi 连接的信号强度`getRssi()`

```
private void checkWifi(){
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo Info = cm.getActiveNetworkInfo();
    if (Info == null || !Info.isConnectedOrConnecting()) {
        Log.i("WIFI CONNECTION", "No connection");
    } else {
        int netType = Info.getType();
        int netSubtype = Info.getSubtype();

        if (netType == ConnectivityManager.TYPE_WIFI) {
            wifiManager = (WifiManager)getApplicationContext().getSystemService(Context.WIFI_SERVICE);
            int linkSpeed = wifiManager.getConnectionInfo().getLinkSpeed();
            int rssi = wifiManager.getConnectionInfo().getRssi();
            Log.i("WIFI CONNECTION", "Wifi connection speed: "+linkSpeed + " rssi: "+rssi);

        //Need to get wifi strength
        } 
    }
} 
```

问题是我得到了 -35 或 -47 等数字。我不明白它们的值。我查看了 android 文档及其所有内容：

> 公共 int getRssi ()
> 
> 自：API 级别 1 返回当前 802.11 网络的接收信号强度指示器。
> 
> 这不是标准化的，但应该是！
> 
> 返回 RSSI，范围为 ??? 至 ？？？

有人可以解释如何“规范化”或理解这些结果吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T10:58:48.057

我在[WifiManager.java](https://github.com/android/platform_frameworks_base/blob/master/wifi/java/android/net/wifi/WifiManager.java#L478)中找到了这个：

```
/** Anything worse than or equal to this will show 0 bars. */
private static final int MIN_RSSI = -100;

/** Anything better than or equal to this will show the max bars. */
private static final int MAX_RSSI = -55; 
```

**android 上的相关 rssi 范围介于 -100 和 -55 之间**。

有这个静态方法[WifiManager.calculateSignalLevel(rssi,numLevel)](http://developer.android.com/reference/android/net/wifi/WifiManager.html#calculateSignalLevel(int,%20int))将为您计算信号电平：

```
int wifiLevel = WifiManager.calculateSignalLevel(rssi,5); 
```

返回 0 到 4 之间的数字（即 numLevel-1）：您在工具栏中看到的条数。

**编辑 API 30+**

静态方法现在已弃用，您应该使用[实例方法](https://developer.android.com/reference/android/net/wifi/WifiManager#calculateSignalLevel(int))

```
wifiManager.calculateSignalLevel(rssi) 
```

主要区别在于级别数现在由下式给出[`wifiManager.getMaxSignalLevel()`](https://developer.android.com/reference/android/net/wifi/WifiManager#getMaxSignalLevel())

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T17:55:25.213

**根据 IEEE 802.11 文档**：较小的负值表示较高的信号强度。

*范围在 -100 到 0 dBm 之间，接近 0 表示强度更高，反之亦然。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:02:28.970

来自维基百科：

> 供应商为实际功率（以 mW 或 dBm 测量）及其 RSSI 值范围（从 0 到 RSSI_Max）提供自己的精度、粒度和范围。
> 
> 例如，Cisco Systems 卡的 RSSI_Max 值为 100，将报告 101 个不同的功率级别，其中 RSSI 值为 0 到 100。另一个流行的 Wi-Fi 芯片组由 Atheros 制造。基于 Atheros 的卡将返回 0 到 127 (0x7f) 的 RSSI 值，其中 128 (0x80) 表示无效值。

所以这在很大程度上取决于设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T08:04:00.563

从ben75的回答开始，我们可以使用这种方法来规范化rssi：

```
public static int normalizeRssi(int rssi){
  // Anything worse than or equal to this will show 0 bars
  final int MIN_RSSI = -100;
  // Anything better than or equal to this will show the max bars.
  final int MAX_RSSI = -55;

  int range = MAX_RSSI - MIN_RSSI;
  return 100 - ((MAX_RSSI - rssi) * 100 / range);
} 
```

# jquery - 使用 JAX-RS 和 jquery .ajax() 检索参数

> ID：13275318
> 
> 赞同：2
> 
> 时间：2012-11-07T17:50:44.650
> 
> 标签：jquery, ajax, post, jax-rs

我正在使用 jax-rs 编写一个基本的 Web 服务。我正在使用以下 JQuery 测试应用程序。我可以使用 GET 参数很好地访问参数，但是当我使用 POST 时，它会失败。我使用以下 JQuery 来测试仅将“POST”切换为“GET”。

```
$.ajax({
    type: "POST",
    url: "http://localhost:8080/MyWebService/",
    data: 'text=this is text',
    dataType: 'jsonp',
    success: function(data){

        console.log(data);

    },
    error: function(){alert('failure');}
}); 
```

java端如下所示。请记住，我对 get 部分没有任何问题。

```
@GET
public Response getWork(@QueryParam("callback") String callbackName, @QueryParam("text") String searchText,
        @Context HttpServletResponse response, @Context HttpServletRequest request) throws JsonGenerationException,
        JsonMappingException, IOException {
            System.out.println(searchText);
    return work(callbackName, searchText, response, request);
}

@POST
public Response postWork(@FormParam("callback") String callbackName, @FormParam("text") String searchText,
        @Context HttpServletResponse response, @Context HttpServletRequest request) throws JsonGenerationException,
        JsonMappingException, IOException {
    System.out.println(searchText);
    return work(callbackName, searchText, response, request);
} 
```

使用 GET 时，它打印文本，但使用 POST 时，它打印 null。需要什么才能使用 POST 方法访问参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:16:12.947

如果您发送表单数据，您应该指定将使用哪种类型的内容服务器。所以你应该用`@Consumes(MediaType.APPLICATION_FORM_URLENCODED)`. 换句话说，POST 方法应该是这样的：

```
@POST
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
// rest of the code 
```

# web-services - Sharepoint 2010 服务应用程序.Net版

> ID：13275321
> 
> 赞同：0
> 
> 时间：2012-11-07T17:50:54.390
> 
> 标签：web-services, sharepoint, .net-4.5, service-application

我正在为 SharePoint 2010 设计一个服务应用程序，我想知道我的服务是否必须使用 .net 3.5。我检查了 MSDN，但我找不到明确的文章甚至是关于此的短语。

我不想开发一切，然后发现我无法使用 .net 4.5。我将非常感谢直接的回答，例如“是的，您可以使用您想要的任何版本的框架”或者“是的，如果他使用了，请在此处查看链接”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:54:56.880

Sharepoint 2010 基于 .net 3.5SP1，因此无法使用 4.0 或 4.5 功能。

Sharepoint 2013 基于 .net 4.5，在这种情况下并不重要。

# java - 无法在 Eclipse 和 Tomcat 中创建断点

> ID：13275332
> 
> 赞同：2
> 
> 时间：2012-11-07T17:51:43.507
> 
> 标签：java, eclipse, tomcat, compiler-construction, breakpoints

从昨天开始，当我在 Eclipse Juno（内部版本 20120614-1722）下启动 Tomcat（6.0.35）时收到一条奇怪的错误消息：

![在此处输入图像描述](../Images/135de22265105657273525aa1e19b8c6.png)

为了摆脱错误，我尝试了以下方法：

*   如果选中所有“类文件生成”复选框，请检查首选项 - > Java - > 编译器。我这样做是出于一般偏好和项目偏好
*   取消选中它们，构建，再次检查它们构建（在另一个问题上找到）
*   添加`org.eclipse.jdt.core.compiler.debug.lineNumber=generate`到我的`.settings/org.eclipse.jdt.core.prefs`文件
*   使用新的 CVS 结帐（相同的症状）

而现在，我不知道该怎么办了。问题是真的阻止我完成任何事情。我不能再工作了。

疯狂的是：问题不会发生在每个班级，只是其中一些班级。它也不会发生在我的其他 Eclipse 项目中。昨天之前没有发生过，即使我不记得做过什么奇怪的事情。实际上，在我使用 Eclipse 的近 10 年里，我从未见过这样的问题......

如果您有任何想法，我将非常感激...

**编辑：**

我还试图忽略该消息并继续我的测试：如果我在有问题的类的上游创建另一个断点，当我进入这个有问题的类时，它会尝试打开一个`$Proxy132`类，这意味着它实际上打开了一个空页面，带有`source not found`信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T21:51:05.810

每当我在 Eclipse Helios 中看到这种消息时，都是因为编译步骤（在我的例子中是 Ant）没有设置为包含调试信息。使用 Ant 时，我们有一个 build.xml 文件，其中有一个标志说明 debug="true"。这只是将“-g”参数设置为 javac 的一种高级方法。一旦我将调试标志设置为“true”，“-g”选项将被发送到编译器，并且源代码将构建并包含行号信息。这必须在所有 Java 文件上完成，因此如果您的模块没有作为更大 Java 进程的一部分自动编译，您将需要确保这些标志也被发送到这些模块中的编译器。基本上，您需要调试的任何地方都必须在编译时设置“-g”标志。希望这可以帮助。

# c# - 如何在不使用环境枚举的情况下在 C# 中以编程方式解析环境变量？

> ID：13275338
> 
> 赞同：5
> 
> 时间：2012-11-07T17:52:33.023
> 
> 标签：c#, .net, windows, environment-variables, class-library

> **可能重复：**
> [展开我的文档的环境变量](https://stackoverflow.com/questions/4726818/expand-environment-variable-for-my-documents)

我们经常在 Windows Xp、7、Vista、Server 2003-2008R2 以及未来的 Windows 版本中的命令提示符中使用 %% 分隔的环境变量。例子是：

```
%windir%
%systemroot%
%temp% 
```

我需要能够使用 C# 以编程方式解析这些环境变量。

请不要建议`Environmen.SpecialFolder`，因为我从上述格式的网络服务中获取值，我需要能够以编程方式解决它们并确定这些路径在服务器上的物理位置。我的场景是一个类库项目，我可能**不需要**/不能使用`Server.MapPath`

我正在寻找一种内置或自定义的通用方法，它可以帮助我以编程方式解析所有环境变量，并从这些变量计算本地物理路径，就像命令提示符或 Windows 资源管理器或运行命令一样！

我在 StackOverFlow 上看到过与这些类似的问题，但找不到任何标记的答案。请注意，这`Environment.Xxxxx Enum`不适合我正在处理的场景。

任何帮助表示赞赏。我正在使用带有 C# 的 .NET 4.0 Complete Framework Profile。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T17:57:17.777

~~您可以使用[`System.IO.Path.GetFullPath`](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx). 例如：~~

 ~~```
var resolvedPath = Path.GetFullPath("%WINDIR%"); 
```~~ 或者，如果您只想扩展字符串中的变量，请使用 [`Environment.ExpandEnvironmentVariables`](http://msdn.microsoft.com/en-us/library/system.environment.expandenvironmentvariables.aspx)：

```
var expanded = Environment.ExpandEnvironmentVariables(
    "This is my %WINDIR% in %SYSTEMROOT%, and temp is %TEMP%") 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-07T17:59:09.773

```
Environment.ExpandEnvironmentVariables("%windir%\SomeFolder") 
```

# xampp - Propel 无法访问 PEAR 日志文件

> ID：13275351
> 
> 赞同：0
> 
> 时间：2012-11-07T17:53:29.997
> 
> 标签：xampp, pear, propel

我在 XAMPP 设置上安装了推进装置。我的编码过程有点顺利，但需要对我的 PHP.ini 文件进行更改，所以这样做然后重新启动了 apache。我有一段时间没有关闭 apache 进程，现在尝试使用 Propel 时出现错误：

```
Warning: fopen(/path/to/propel.log) [function.fopen]: failed to open stream: No such file    or directory in /Applications/XAMPP/xamppfiles/pear/share/pear/Log/file.php on line 216

Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000]: General   error: 1017 Can't find file: './ghir/intervention.frm' (errno: 13)' in /Applications/XAMPP/xamppfiles/htdocs/ghir-php/vendor/propel/runtime/lib/query/ModelCriteria.php:1321 Stack trace: #0 /Applications/XAMPP/xamppfiles/htdocs/ghir-php/vendor/propel/runtime/lib/query/ModelCriteria.php(1321): PDOStatement->execute() #1 /Applications/XAMPP/xamppfiles/htdocs/ghir-php/vendor/propel/runtime/lib/query/ModelCriteria.php(1164): ModelCriteria->doSelect(Object(PropelPDO)) #2 /Applications/XAMPP/xamppfiles/htdocs/ghir-php/model.php(41): ModelCriteria->find() #3 /Applications/XAMPP/xamppfiles/htdocs/ghir-php/js/globals.php(38): GHD->__construct('175') #4 /Applications/XAMPP/xamppfiles/htdocs/ghir-php/index.php(78): require_once('/Applications/X...') #5 {main} Next exception 'PropelException' with message 'Unable to execute SELECT statement [SELECT intervention.ID, intervention.NAME, intervention.ABBREVIATION, intervention.DESCRIPTION, intervention. in /Applications/XAMPP/xamppfiles/htdocs/ghir-php/vendor/propel/runtime/lib/query/ModelCriteria.php on line 1324 
```

xamppfiles/pear/share/pear/Log/file.php 确实存在，并且是可读写的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T06:32:55.220

弄清楚了。最重要的错误是误导性的，而不是真正的问题。我的一些表已损坏，MySQL 服务器找不到 .fmr。我删除了这些表（从文件系统中，而不是通过 DROP），然后将它们恢复到旧版本。之后工作正常。

# wordpress - 这个自定义帖子类型/自定义字段查询有什么问题？

> ID：13275354
> 
> 赞同：1
> 
> 时间：2012-11-07T17:53:41.947
> 
> 标签：wordpress

我试图获取用户正在查看的实际帖子的相关帖子（自定义帖子类型命名属性）

目前它只给我来自相同“pcategory”的相关帖子，这些帖子是帖子类型的类别。

我需要的是与现在相同的帖子类型类别以及相同的帖子类型自定义字段（'位置'）。

尝试了很多方法，但无法得到它。怎么了？

```
$querystr = "
SELECT * FROM $wpdb->posts
LEFT JOIN $wpdb->postmeta ON($wpdb->posts.ID = $wpdb->postmeta.post_id)
LEFT JOIN $wpdb->term_relationships ON($wpdb->posts.ID = $wpdb->term_relationships.object_id)
LEFT JOIN $wpdb->term_taxonomy ON($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
LEFT JOIN $wpdb->terms ON($wpdb->term_taxonomy.term_id = $wpdb->terms.term_id)
    WHERE $wpdb->terms.term_id in (".$catId.")
AND $wpdb->term_taxonomy.taxonomy = 'pcategory'
AND $wpdb->posts.post_status = 'publish'
AND $wpdb->posts.post_type = 'property'
AND $wpdb->postmeta.meta_key = 'location'

ORDER BY $wpdb->posts.ID LIMIT 0 ,$limit"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-15T22:01:34.413

您应该阅读有关[wp_query](https://codex.wordpress.org/Class_Reference/WP_Query)的信息。是在 WordPress 中进行自定义查询的正确方法。

# bash - 在 shellscript 中执行 shellscript

> ID：13275356
> 
> 赞同：0
> 
> 时间：2012-11-07T17:53:56.507
> 
> 标签：bash, shell

我一直在为此挠头。我有一个由根 cron 作业运行的脚本。脚本执行，但脚本内有一个不会执行的脚本。这就是我们所说的 scriptA

```
#!/bin/bash
lines=`wc -l < /var/www/log/addme`;
DATE=`date +%Y-%m-%d`

if [[ $lines > 4 ]];
then
echo " " > /var/www/log/addme
RESTART=/var/www/log/restart.sh
$RESTART
else
echo "No new hosts added" | wall
fi 
```

基本上，restart.sh 脚本所做的是重新启动服务。当我从终端运行它们时，一切正常，但不是作为 cron 作业......我也试着把

```
./restart.sh
/var/www/log/restart.sh 
```

但结果相同。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:39:38.097

我怀疑您在 cron 运行其作业的最小环境中遇到了问题。最大的问题是 PATH 非常小，而且您的脚本可能正在使用一些找不到的命令。

如果这是问题所在，有几种方法可以解决它：最简单的方法通常是在运行脚本的条目之前将适当的 PATH 定义添加到 crontab 文件中。像这样的东西：

```
PATH=/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin
0 * * * *       /var/www/log/scriptA 
```

二是在scriptA开头添加类似的赋值。第三种选择是浏览这两个脚本，并为您使用的所有命令使用完整路径（例如`/usr/bin/wc`，而不是只是`wc`）。

顺便说一句，测试也存在问题`[[ $lines > 4 ]]`——在里面`[[ ]]`，`>`进行字符串（字母）比较，而不是数字比较。这是一个问题，因为按字母顺序，10 小于 4。使用`[[ $lines -gt 4 ]]`或`(( lines > 4 ))`进行数字比较。

# frame - 输出到 DVI 端口

> ID：13275360
> 
> 赞同：2
> 
> 时间：2012-11-07T17:54:01.243
> 
> 标签：frame, sequential, dvi

我正在尝试将帧顺序 3D 信号编程到 eMagin z800 HMD。该设备通过 VGA 串行端口进行通信，但我使用的是只有 DVI 端口的 NVidia Quadro FX 3450/4000 SDI 显卡。因此，我通过 VGA-DVI 转换器连接了它。

如果有人对输出到 c# 中的 DVI 端口有任何帮助（因为这是我的基本程序的其余部分所写的内容），我正在徘徊，最好是发送图像。或者，任何使用 z800 编程的经验和帮助将不胜感激。

谢谢

# jquery - JQtouch 覆盖 div 以丢失类，因为它命名空间“活动”

> ID：13275364
> 
> 赞同：0
> 
> 时间：2012-11-07T17:54:09.240
> 
> 标签：jquery, iphone, jqtouch

我正在为 iPhone 开发一个 jQuery 应用程序。

最*奇怪*的行为发生在我拖动视图时，我的按钮上的类被删除了。应用程序中*没有*说要删除类。

这有一个已知问题吗？还是拖动导致页面刷新的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:55:50.960

检查您是否有一个 CSS 类在拖动时覆盖流行的类。

# ruby-on-rails - Rails 2.3 分别记录所有数据库查询

> ID：13275373
> 
> 赞同：0
> 
> 时间：2012-11-07T17:55:04.440
> 
> 标签：ruby-on-rails

作为这篇[文章](https://stackoverflow.com/questions/13037475/to-sql-not-working-on-update-attributes-or-save?lq=1)的后续：我正在尝试记录所有正在生成的查询。我已经尝试将它放在初始化程序中，并且直接在控制台中运行它并执行似乎永远不会被执行。

我尝试了以下方法：

```
connection = ActiveRecord::Base.connection
class << connection
  alias :original_exec :execute
  def execute(sql, *name)
    # try to log sql command but ignore any errors that occur in this block
    # we log before executing, in case the execution raises an error
    raise "THROW AN ERROR"
    begin
        file = File.open(RAILS_ROOT + "/log/sql.txt",'a'){|f| f.puts Time.now.to_s+": "+sql}
    rescue Exception => e
      ;
    end
    # execute original statement
    original_exec(sql, *name)
  end
end 
```

然后运行

```
Person.last 
```

而且我仍然没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:06:20.353

您无需对 ActiveRecord 进行猴子补丁即可获取日志记录（无论如何您在这里做错了）。我假设您希望在生产中使用它，因为在开发中所有查询都已记录。只需将其设置为`config/environments/production.rb`：

```
config.log_level = :debug 
```

或者，如果您只想将其限制为 SQL 查询，而不需要其他冗长，请尝试以下操作：

```
ActiveRecord::Base.logger.level = Logger::DEBUG 
```

Or if your goal is to write the SQL queries to a dedicated logfile, check out this question: [Rails3 SQL logging output in a separate file](https://stackoverflow.com/questions/5976395/rails3-sql-logging-output-in-a-separate-file)

# asp.net - 使用 HttpWebRequest 下载文件

> ID：13275379
> 
> 赞同：1
> 
> 时间：2012-11-07T17:55:12.280
> 
> 标签：asp.net, httpwebrequest

如何使用 HttpWebRequest 下载 pdf 文件？我想下载 pdf 文件并将其保存到我的系统我无法使用 WebClient 下载，因为我需要在我的请求中添加 cookie

```
<code>
    Encoding encode = System.Text.Encoding.GetEncoding("utf-8");
    HttpWebRequest Request = (HttpWebRequest)HttpWebRequest.Create(Url);
    CookieContainer cookieJar = new CookieContainer();
    cookieJar.Add(new Cookie("cookieName", "value", "/", "domain));      
    (Request as HttpWebRequest).CookieContainer = cookieJar;
     HttpWebResponse Response = (HttpWebResponse)Request.GetResponse();

</code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:00:37.087

使用 HttpWebRequest [GetResponseStream()](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.getresponsestream.aspx)将响应的主体作为流获取，然后将其保存到文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:02:20.827

尝试这样的事情： -

```
string GetPage(string path) {
 HttpWebRequest req = (HttpWebRequest)WebRequest.Create(path);
req.CookieContainer = cookie;
WebResponse resp = req.GetResponse();
string t = new StreamReader(resp.GetResponseStream(), Encoding.Default).ReadToEnd();
return IsoToWin1250(t);
} 
```

# php - 配置 PHP 网站并将 mySQL 文件连接到本地服务器

> ID：13275384
> 
> 赞同：0
> 
> 时间：2012-11-07T17:55:31.287
> 
> 标签：php, config, mamp, localserver

我当前的工作站在 Mac OS X 上，使用 MAMP 作为我的本地服务器，配置了 PHP 5.4.44 和 mySQL。

我最近查看了 phpinfo() 并创建了一个测试站点，以确保 PHP 在服务器上正常工作，并且我的 PHP 工作正常。在这两个站点上，它们都在 CakePHP 中进行配置，并看到它运行几个 mySQL 文件。在转移过程中，所有文件夹系统都完好无损。

首先，如何通过 myPHPAdmin 连接这些 mySQL 文件？

其次，我从同一台服务器转移了另一个站点，就像我在页面上显示任何内容时遇到问题的站点一样。尽管许多核心 PHP 和 CSS 文件链接错误，但我刚刚传输的页面显示了页面上的一些项目。所有文件都正确链接，所以我想知道要尝试什么解决方案。

任何想法或建议表示赞赏！这是我第一次搞乱一个纯 CakePHP 构建的网站，所以如果我在这个解释中不清楚，我很抱歉。

# objective-c - 更改地图类型而不会丢失我的自定义 Pin 图

> ID：13275385
> 
> 赞同：1
> 
> 时间：2012-11-07T17:55:36.530
> 
> 标签：objective-c, xcode, mkmapview, mkannotationview

我有一个带有许多具有不同图像的图钉的地图视图！一切正常，但如果我更改地图类型...正常..卫星或 ibrid..我失去了我的形象，我的别针变成了标准的红色别针！我可以更改地图类型而不更改任何内容吗？

我使用此代码分配不同的图像：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id  <MKAnnotation>)annotation
{
annView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:nil];

if([annotation.title compare:@"Biggest"]==0){imageView = [UIImage imageNamed:@"pin.png"];annView.image=imageView;}
if([annotation.title compare:@"Campo sportivo"]==0){imageView = [UIImage imageNamed:@"mondo.png"];annView.image=imageView;}
if([annotation.title compare:@"BlackSheep ADV"]==0){imageView = [UIImage    imageNamed:@"an.png"];annView.image=imageView;}

annView.pinColor = MKPinAnnotationColorRed;
UIButton *advertButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];

[advertButton addTarget:self action:@selector(button:)       forControlEvents:UIControlEventTouchUpInside];
annView.rightCalloutAccessoryView = advertButton;

annView.animatesDrop = TRUE;
annView.canShowCallout = YES;
annView.calloutOffset = CGPointMake(0, 5);

if ([annotation isKindOfClass:[MKUserLocation class]]){
                                                    return nil;
                                                  }
return annView;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:22:36.633

```
 - (void) changeMapType: (id)sender
    {
        if (mapView.mapType == MKMapTypeStandard)
            mapView.mapType = MKMapTypeSatellite;
        else
            mapView.mapType = MKMapTypeStandard;
    } 

This method works as according to google maps have two types
1) standard
2) satellite

So by default if you use google maps, it is in the form of MKMapTypeStandard you can change if you want by             mapView.mapType = MKMapTypeSatellite; 
```

# javascript - 在 window.opener 中创建一个在子窗口关闭时持续存在的对象

> ID：13275389
> 
> 赞同：1
> 
> 时间：2012-11-07T17:55:56.560
> 
> 标签：javascript, dom

在 window.opener 中访问和创建对象非常简单。

```
window.opener.myObj = new Object();
window.opener.myObj.name = 'Tom';
alert(window.opener.myObj.name); // alerts('Tom') 
```

但是，当当前（子）窗口关闭时，对象 myObj 变为无效，因为该对象实际上驻留在当前窗口中，并且 window.opener 仅保留对它的引用。

我们如何从子窗口中在 window.opener DOM 中创建一个对象，以便在子（当前）窗口关闭时仍然存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:58:29.477

> 但是，当当前（子）窗口关闭时，对象 myObj 变为无效，因为该对象实际上驻留在当前窗口中，并且 window.opener 仅保留对它的引用。

你证明过吗？~~我不得不承认没有尝试过。~~我在 Chrome 或 Firefox 上都[看不到这个结果。](http://jsbin.com/uzulom/2)即使在子窗口关闭时，该对象仍然存在。**更新**：奇怪的是，在 IE9 上，*对象*仍然存在，但属性不存在。

~~但假设这是真的，你可以试试~~

 ~~```
window.opener.myObj = new window.opener.Object(); 
```~~ 

~~......但我不会真的抱任何成功的希望。**更新**：这不仅对 IE9 没有帮助，而且实际上使情况变得更糟。~~

* * *

相反，我认为我必须提倡回调父窗口以要求*它*创建对象。

父窗口脚本：

```
function createFoo(spec) {
    window.foo = jQuery.extend({}, spec);
    display("Created <code>foo</code> as requested by child window");
}

jQuery(function($) {
    var childid = "childwin" + new Date().getTime();

    $("#openPopup").click(function() {
        var wnd = window.open("http://jsbin.com/asocuy/1", childid);
    });
    $("#displayFoo").click(function() {
        if (window.foo) {
            display("<code>foo</code> exists");
            display("<code>foo.name</code> = " + window.foo.name);
        }
    });
});

function display(msg) {
    $("<p>").html(String(msg)).appendTo(document.body);
} 
```

子窗口脚本：

```
jQuery(function($) {

    if (window.opener) {
        if (!window.opener.createFoo) {
            display("<code>window.opener.createFoo</code> not found");
        }
        else {
            window.opener.createFoo({
                name: "Fred"
            });
            display("Asked parent window to create <code>foo</code> with name = 'Fred'");
        }
    }
    else {
        display("<code>window.opener</code> not found");
    }

    $("#btnClose").click(function() {
        window.close();
    });

    function display(msg) {
        $("<p>").html(String(msg)).appendTo(document.body);
    }
}); 
```

[实例](http://jsbin.com/usazon/1)| [来源](http://jsbin.com/usazon/1/edit)（甚至可以在 IE 中使用）

# python - Tastypie - 按相关 pk 过滤

> ID：13275391
> 
> 赞同：3
> 
> 时间：2012-11-07T17:56:03.053
> 
> 标签：python, tastypie

我想通过相关字段 pk 过滤资源。

例如，我有国家 pk，我想获得该国家的所有城市。我怎么能那样做？

```
class CityResource(ModelResource):
    class Meta:
        queryset = City.objects.all()
        resource_name = 'city'
        fields = ['name','id']

        filtering = {
           #Something here
        }

class CountryResource(ModelResource):
    class Meta:
        queryset = Country.objects.all()
        resource_name = 'country'
        fields = ['name','code2','id'] 
```

还有一个示例网址：

```
http://startuprepublik.pre.is/api/v1/city/?format=json&country__pk=4 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T00:34:00.750

```
from tastypie.fields import ForeignKey
from tastypie.resources import ALL_WITH_RELATIONS

class CityResource(ModelResource):
    country = ForeignKey("path.to.api.CountryResource", "country")

    class Meta:
        queryset = City.objects.all()
        resource_name = 'city'
        fields = ['name','id']

        filtering = {
           "country": ALL_WITH_RELATIONS
        }

class CountryResource(ModelResource):
    class Meta:
        queryset = Country.objects.all()
        resource_name = 'country'
        fields = ['name','code2','id']
        filtering = { "id": ALL } 
```

# .net - WSO2 ESB 通过代理通过 Windows 身份验证的 .NET Web 服务

> ID：13275401
> 
> 赞同：1
> 
> 时间：2012-11-07T17:56:41.993
> 
> 标签：.net, wso2, wso2esb, windows-authentication, esb

我有 WSO2 ESB 4.0.3。我正在尝试为启用了 Windows 身份验证的 .Net Web 服务创建传递代理。我收到一个错误

> “尝试将代理服务添加到 ESB 配置时出错：TESTPROXY :: 读取 wsdl URI 时出错”。

不过，wsdl URL 在浏览器中可以正常工作。如果启用匿名身份验证，我可以成功地为此 Web 服务创建传递代理，但我不想这样做。

如何在启用 Windows 身份验证的情况下为 .Net Web 服务创建直通代理？任何可以帮助我找出解决方案的信息将不胜感激。谢谢。

# ios - UITableView 选定的单元格在滚动时不会保持选中状态

> ID：13275405
> 
> 赞同：22
> 
> 时间：2012-11-07T17:56:53.843
> 
> 标签：ios, uitableview

我在滚动表格时遇到表格视图单元格未保持其“选定”状态的问题。以下是相关代码：

```
@property (nonatomic, strong) NSIndexPath *selectedIndexPath;

-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    self.selectedIndexPath = indexPath;
    //do other stuff
}

-(UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    MyCustomCell_iPhone* cell = [tableView dequeueReusableCellWithIdentifier:@"MyCustomCell_iPhone"];

    if (cell == nil)
        cell = [[[NSBundle mainBundle] loadNibNamed:@"MyCustomCell_iPhone" owner:self options:nil] objectAtIndex:0];

    if ([indexPath compare: self.selectedIndexPath] == NSOrderedSame) {
        [cell setSelected:YES animated:NO];
    }

    return cell;
} 
```

对于细胞：

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    if (selected) {
        self.selectedBg.hidden = NO;
    }else{
        self.selectedBg.hidden = YES;
    }
}

- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated
{
    [super setHighlighted:highlighted animated:animated];

    if (highlighted) {
        self.selectedBg.hidden = NO;
    }else{
        self.selectedBg.hidden = YES;
    }
} 
```

如何让选定的单元格保持突出显示？如果我将它从屏幕上滚动出来，当它在屏幕上回滚时，它会以未选中状态出现（隐藏了它的 selectedBg）。

编辑：从单元格中删除 setHighlighted 方法可以解决问题。然而，这意味着按下表格单元格时我没有突出显示状态。我想知道这个问题的解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-30T14:30:28.060

有同样的问题，选定单元格的附件视图在滚动时消失了。我的同事发现了这个问题的好方法。原因是在 iOS 7 on **touchesBegan**事件 UITableView 取消选择选定的单元格并选择按下的单元格。在 iOS 6 中它不会发生，并且在滚动选定的单元格时保持选中状态。要在 iOS 7 中获得相同的行为，请尝试：

1) 在您的 tableView 中启用多项选择。

2) 转到 tableView 委托方法**didSelectRowAtIndexPath**，并用代码取消选择单元格：

```
 NSArray *selectedRows = [tableView indexPathsForSelectedRows];
for(NSIndexPath *i in selectedRows)
{
    if(![i isEqual:indexPath])
    {
        [tableView deselectRowAtIndexPath:i animated:NO];
    }
} 
```

解决了我的问题！希望它会有所帮助，对不起我的英语不好顺便说一句。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-30T20:13:14.057

我知道我的方法不是很正统，但似乎有效。这是我的解决方案：

```
func tableView(tableView: UITableView, willDisplayCell cell: UITableViewCell, forRowAtIndexPath indexPath: NSIndexPath) {
    if cell.selected {
        cell.selected = true
    } else {
        cell.selected = false
    }
} 
```

您还必须实现您在帖子中提到的所有方法（@soleil）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-06T18:12:01.897

我正在使用 Xcode 9.0.1 和 Swift 4.0。当单元格离开屏幕并返回时，我发现以下代码解决了我的选择标记：

```
override func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) {
    if cell.isSelected {
        cell.accessoryType = .checkmark
    } else {
        cell.accessoryType = .none
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-29T23:36:53.830

iOS 7/8 都在滚动开始时取消选择单元格（正如 Alexander Larionov 指出的那样）。

对我来说更简单的解决方案是在我的 ViewController 中实现这个 UIScrollViewDelegate 方法：

```
 - (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
     NSInteger    theRow       = [self currentRowIndex]; // my own method
     NSIndexPath *theIndexPath = [NSIndexPath indexPathForRow:theRow inSection:0];
     [self.myTableView selectRowAtIndexPath:theIndexPath 
                                   animated:NO 
                             scrollPosition:UITableViewScrollPositionNone];
 } 
```

这是因为我的 viewController 是 UITableView 的委托，而 UITableView 继承自 UIScrollView。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-24T09:14:06.147

如果你想在 Swift 中实现同样的目标，那么这里是代码。顺便说一句，我将 Xcode 7.2 与 Swift 2.1 一起使用。

```
override func tableView(tableView: UITableView, willDisplayCell cell: UITableViewCell, forRowAtIndexPath indexPath: NSIndexPath) {
    if cell.selected == true{
        cell.selected = true
        cell.backgroundColor = UIColor.blackColor()
    }else{
        cell.backgroundColor = tableViewCellColor //Don't panic its my own custom color created for the table cells.
        cell.selected = false
    }
} 
```

做任何你想做的其他定制..

谢谢..

希望这有帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-20T16:55:26.267

Swift 3 解决方案，2017 年。

我用这行简单的代码解决了这个问题：

```
cell.isSelected = tableView.indexPathsForSelectedRows?.contains(indexPath) ?? false 
```

在***tableView(tableView:cellForRowAt indexPath:)***方法内部：

```
func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {

    // Dequeue a reusable cell
    if let cell = tableView.dequeueReusableCell(withIdentifier: "YourCellID") {

        cell.isSelected = tableView.indexPathsForSelectedRows?.contains(indexPath) ?? false

        // Now you can safely use cell.isSelected to configure the cell 

        // ...your configurations here

        return cell
    }

    return UITableViewCell()
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-06-08T23:55:12.530

# 斯威夫特 5

将以下代码放入您的自定义`UITableViewCell`子类中：

```
override func setHighlighted(_ highlighted: Bool, animated: Bool) {
    guard !isSelected else { return }

    super.setHighlighted(highlighted, animated: animated)
    if highlighted {
        // Style cell for highlighted
    } else {
        // Style cell for unhighlighted
    }
}

override func setSelected(_ selected: Bool, animated: Bool) {
    super.setSelected(selected, animated: animated)
    if selected {
        // Style cell for selected
    } else {
        // Style cell for unselected
    }
} 
```

**说明：**尝试在`setHighlighted`和上设置断点`setSelected`。您会发现该方法按此**顺序**`dequeueReusableCell`调用`setSelected`以重置新单元格。因此，您的突出显示代码正在破坏您在选择代码中所做的样式。非黑客修复是避免在被调用时破坏您选择的样式。`setHighlighted` **`setHighlighted(false, animated: false)`**

 *** * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-07T18:03:19.343

您是否尝试过比较索引路径的行而不是整个索引路径对象？

```
if ((indexPath.row == self.selectedIndexPath.row) && (indexPath.section == self.selectedIndexPath.section)) {
    [cell setSelected:YES animated:NO];
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-31T01:55:17.263

这是我想出的解决方案——它甚至不会让人觉得很奇怪。

1）在滚动期间实现`-scrollViewWillBeginDragging:`并`-scrollViewWillEndDragging:withVelocity:targetContentOffset:`手动突出显示所选行（如果有）的单元格。

我的看起来像这样：

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollview {
    self.scrollViewIsDragging = YES;

    if( [self.tableView indexPathForSelectedRow] ) {
        [[self.tableView cellForRowAtIndexPath:[self.tableView indexPathForSelectedRow]] setHighlighted:YES];
    }
}

- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset {
    self.scrollViewIsDragging = NO;

    if( [self.tableView indexPathForSelectedRow] ) {
        [[self.tableView cellForRowAtIndexPath:[self.tableView indexPathForSelectedRow]] setHighlighted:NO];
    }
} 
```

该`scrollViewIsDragging`属性在那里，因此`-tableView:cellForRowAtIndexPath:`我们可以确保任何新出列的单元格具有适当的突出显示（例如，如果所选行的单元格在离开屏幕后滚动到屏幕上）。该方法的相关部分如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    // ... cell creation/configuration ...

    if( self.scrollViewIsDragging && [[tableView indexPathForSelectedRow] isEqual:indexPath]) {
        [cell setHighlighted:YES animated:NO];
    } 
```

}

......你有它。selectedRow 的单元格将在滚动期间保持突出显示。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-18T16:32:30.133

UITableViewCell 有一个 BOOL 属性“ **selected** ”。每当您加载单元格时，请检查 selected 的状态并在 cellForRowAtIndexPath 定义中相应地进行选择或取消选择：

```
if (cell.selected) {
    // Maintain selected state
}
else{
     // Maintain deselected state
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-02-24T15:21:54.467

在这里发布了一个快速的答案： [https ://stackoverflow.com/a/35605984/3754003](https://stackoverflow.com/a/35605984/3754003)

在其中，我还解释了为什么会发生这种情况。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-22T08:46:07.137

不要使用内置系统属性`isSelected`。

您可以创建自己的属性，例如：

```
var isSelectedStyle = false
cell.isSelectedStyle = .... 
```**

# c# - 类似于一组字符串的字符串

> ID：13275408
> 
> 赞同：2
> 
> 时间：2012-11-07T17:57:07.527
> 
> 标签：c#, .net, cluster-analysis, levenshtein-distance, similarity

我需要将一组字符串与另一组字符串进行比较，并找出哪些字符串相似（模糊字符串匹配）。例如：

```
{ "A.B. Mann Incorporated", "Mr. Enrique Bellini", "Park Management Systems" } 
and
{ "Park", "AB Mann Inc.", "E. Bellini" } 
```

假设一个从零开始的索引，匹配将是 0-1、1-2、2-0。显然，在这类事情上没有算法是完美的。

我有一个 Levenshtein-distance 算法的工作实现，但是使用它从每个集合中查找相似的字符串需要循环遍历两组字符串来进行比较，从而产生 O(n^2) 算法。即使使用适度大小的集合，这也会运行得慢得令人无法接受。

我还尝试了一种使用 shingling 和 Jaccard 系数的[聚类算法。](http://matpalm.com/resemblance/jaccard_coeff/)不幸的是，这也是在 O(n^2) 中运行的，即使进行位级优化，最终也会变得太慢。

有谁知道更有效的算法（比 O(n^2) 更快），或者更好的是，已经用 C# 编写的库来完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:09:52.743

不是对 O(N^2) 的直接回答，而是对 N1 算法的评论。

那是样本数据，但都是干净的。这不是我会使用 Levenstien 的数据。Incriminate 与 Incorporated 的距离会比 Inc. E. 与 Enrique 的距离更近。

Levenshtein-distance 擅长捕捉关键输入错误。
它也适用于匹配 OCR。

如果您有干净的数据，我会使用词干和其他自定义规则。
Porter stemmer 可用于 C#，如果您有干净的数据，
例如
remove 。和其他标点符号
删除停用词（the）
词干
解析每个列表一次并为每个唯一词干分配一个 int 值
在 int
仍然 N^2 上进行匹配，但现在 N1 更快
，您可以在单个大写字母中添加匹配开头的单词使用 cap 获得部分分数
还需要考虑单词数量
两组 5 匹配 3 的分数应该高于匹配匹配 4 的两组 10

我会为每个短语创建 Int 哈希集，然后相交并计数。

不确定您是否可以摆脱N ^ 2。
但我建议你看看N1。

Lucene 是一个带有短语匹配的库，但它并不是真正为批处理设置的。
以多次使用的意图创建索引，以便索引搜索速度在索引创建时间上得到优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T06:24:22.980

这个问题，称为“字符串相似性连接”，最近在研究界进行了很多研究。我们发布了一个名为 Flamingo 的 C++ 源代码包，它实现了这样的算法[http://flamingo.ics.uci.edu/releases/4.1/src/partenum/](http://flamingo.ics.uci.edu/releases/4.1/src/partenum/)。如果您的数据集对于单台机器来说太大，我们在[http://asterix.ics.uci.edu/fuzzyjoin/](http://asterix.ics.uci.edu/fuzzyjoin/)也有一个基于 Hadoop 的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T21:26:57.910

在给定的例子中，至少有一个词总是匹配的。一种可能的方法是使用 multimap（一个能够为每个键存储多个条目的字典）或`Dictionary<TKey,List<TVlaue>>`. 第一组中的每个字符串都将被拆分为单个单词。这些词将用作多图中的键，整个字符串将作为值存储。

现在您可以将第二组中的字符串拆分为单个单词，并对每个单词进行 O(1) 查找，即对所有单词进行 O(N) 查找。这会产生第一个原始结果，其中每个匹配项至少包含一个匹配词。最后，您必须通过应用其他规则（例如搜索首字母或缩写词）来优化此原始结果。

# ios - 在 iOS Safari 上播放 WAV 文件

> ID：13275409
> 
> 赞同：16
> 
> 时间：2012-11-07T17:57:08.937
> 
> 标签：ios, html, safari, mobile-safari

我正在努力让 WAV 文件作为 HTML5 音频标签或通过移动 Safari（iPad/iPhone）中的常规可下载链接在 HTML 页面上播放：

```
<audio controls src="audio-pcm_s16le-8k.wav"/></audio>
<a href="audio-pcm_s16le-8k.wav">audio</a> 
```

HTML5`audio`对象只是显示`Cannot play audio file`在其中，当我单击下载引用的锚点时，我得到一个黑色页面，中间有一个“无法播放这个圆圈”。我尝试了各种频率（8000、11025、16000、32000、44100）、各种编码（mu-law、Linear Signed 16-bit LE 和 BE）、各种容器（.wav、.caf、.aiff）和各种音频转换程序（Audacity、ffmpeg 和 Apple 自己的 afconvert）...我无法播放音频（除非我将其制作为 MP3 - 不，我不能只使用 MP3 或 AAC，我需要一个“原始" 格式太长，无法进入这里）。

我查看了 iOS 支持的格式，它似乎支持 WAV……有人对这个问题有任何经验吗？我使用的是最新的 iOS 6.0.1

**编辑：**选定的回答者让我解决了这个问题，但原因在答案的评论中。底线是它需要 HTML 范围标题来播放文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-09T20:32:48.423

> 好吧，至少你肯定让我走上了正确的轨道……显然根本不是文件……它是网络服务器。来自stockley 的完全相同的内容有效，但在我的网络服务器上却没有。我想我将不得不详细查看 HTTP 响应。我的网络服务器正在返回`Content-Type: audio/x-wav`，所以不是...

检查我设置的测试站点的标题，您希望返回`Content-Type: text/html`包含所需 HTML 数据的页面：

![在此处输入图像描述](../Images/026f299e60853983f00e4f9f3f39a0c6.png)

而`Content-Type: audio/x-wav`对于实际的音频文件 ( `http://www.test.com/file.wav`)

![在此处输入图像描述](../Images/71e3745ae6a4c86afdac022364c1290c.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-24T13:26:44.960

通过反复试验，我发现您需要一个内容范围标头才能使其工作。这是我的标头示例，它允许 wav 文件在 iOS 版 Safari 中播放：

```
Content-Range: bytes XX-XX/XX
Content-Type: audio/wav 
Content-Disposition: attachment; filename="whatever.WAV" 
Content-Length: XX 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-19T16:17:58.970

它工作得很好。我使用**了 Content-Range: bytes XX-XX/XX**和**Content-Length: XX**

# c - 为什么 scanf("%d", [...]) 不消耗 '\n'？而 scanf("%c") 呢？

> ID：13275417
> 
> 赞同：10
> 
> 时间：2012-11-07T17:57:27.573
> 
> 标签：c, scanf, format-specifiers

[在这里](https://stackoverflow.com/questions/217074/parsing-input-with-scanf-in-c)，我在接受的答案中看到了这个声明：

> 大多数转换说明符会跳过包括换行符在内的前导空格，但`%c`不会。

对我来说，不清楚这种不同行为的基本原理，我会期待一个统一的行为（例如总是跳过或从不）。

我用这样的一段 C 代码遇到了这种问题：

```
#include "stdio.h"

int main(void){

    char ch;
    int actualNum;

    printf("Insert a number: ");
    scanf("%d", &actualNum);
    // getchar();

    printf("Insert a character: ");
    scanf("%c", &ch);

    return 0;
} 
```

交换两个`scanf`s 和 (commented) 可以解决问题，`getchar`否则`'\n'`第一个插入的 s 将被第二个`scanf`with消耗`%c`。我在 linux 和 windows 上都在 gcc 上进行了测试，行为是一样的：

> gcc (GCC) 4.7.2 20120921 (Red Hat 4.7.2-2)
> 版权所有 (C) 2012 Free Software Foundation, Inc.
> 这是免费软件；查看复制条件的来源。没有保修；甚至不考虑适销性或特定用途的适用性。

所以我的问题是：为什么`%d`和`%c`行为不同？`'\n'``scanf`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T18:13:04.543

这是一贯的行为，你只是想错了。;)

```
scanf("%c", some_char); // reads a character from the key board.
scanf("%d", some_int);  // reads an integer from the key board. 
```

所以如果我这样做：

```
printf("Insert a character: ");
scanf("%c", &ch);                // if I enter 'f'. Really I entered 'f' + '\n'
                                 // scanf read the first char and left the '\n'
printf("Insert a number: ");
scanf("%d", &actualNum);      // Now scan if is looking for an int, it sees the '\n'
                              // still, but that's not an int so it waits for the 
                              // the next input from stdin 
```

在这种情况下，它并不是自己消耗换行符。试试这个：

```
char ch;
char ch2;
printf("Insert a character: ");
scanf("%c", &ch);
printf("Insert another character: ");
scanf("%c", &ch2); 
```

它将“跳过”第二个`scanf()`，因为它`'\n'`在那个时候读取。`scanf()`是一致的，`'\n'`如果您要正确使用它，您必须使用它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-07T19:02:27.153

从[马口中](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)：

> ### 7.21.6.2 fscanf 函数
> 
> ...
> 5 由空白字符组成的指令通过读取输入执行，直到第一个非空白字符（仍然未读取），或者直到无法读取更多字符。该指令永远不会失败。
> ...
> 7 作为转换规范的指令定义了一组匹配的输入序列，如下文对每个规范的描述。转换规范按以下步骤执行：
> 
> 8 输入空白字符（由`isspace`函数指定）被跳过，**除非规范包括 a `[`、`c`或说明`n`符**。 ^(284))
> 
> 9 从流中读取输入项，除非规范中包含说明`n`符。**输入项被定义为输入字符的最长序列，它不超过任何指定的字段宽度，并且是匹配输入序列的前缀或匹配输入序列的前缀。** ^(285)) 输入项之后的第一个字符（如果有）保持未读状态。如果输入项的长度为零，则指令执行失败；这种情况是匹配失败，除非文件结尾、编码错误或读取错误阻止了来自流的输入，在这种情况下，它是输入失败。
> 
> * * *
> 
> ^(284）这些空白字符不计入指定的字段宽度。
> 285) fscanf 将最多一个输入字符推回输入流。因此，一些strtod、strtol等可以接受的序列，对于fscanf来说是不能接受的。)

重点是我加的。

空格不是有效整数字符串的一部分，因此`%d`转换说明符跳过任何前导空格是有意义的。`%c`但是，空格本身可能是有效的，因此转换说明符*不*跳过它 是有意义的。

根据上面的第 5 条，如果您在`%c`指令之前的格式字符串中放置一个空格，则将跳过所有前导空格：

```
scanf(" %c", &ch); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T18:51:42.487

这是因为空格永远不能是整数，但空格是由字符组成的。如果您特别想要一个角色，请尝试类似

```
scanf("%c", &ch );
while(isspace(c))
    scanf("%c" , &ch); 
```

或者`!isalnum()`，如果您只想允许字母和数字或`!isalpha()`仅允许字母，请使用。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-07T18:27:22.887

我不是专家，但我发现这样做：

```
fflush(stdin); 
```

在每次 scanf 帮助之后..

如：

```
scanf("%c", &ch);
fflush(stdin); 
```

# git-branch - gitolite可以防止分支删除吗？

> ID：13275420
> 
> 赞同：1
> 
> 时间：2012-11-07T17:57:37.750
> 
> 标签：git-branch, gitolite

是否可以设置 gitolite acls 以允许用户读取、写入和推送，但不能删除分支？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:20:11.493

您应该能够将所有存储库用作一般规则：

```
repo @all
    RWCD dummy-branch = foo 
```

' `D`' 是“删除”[类型的权限](http://sitaramc.github.com/gitolite/write-types.html)，它将授权删除 a `dummy-branch`，但会使您*现有的* `RW+`所有规则*拒绝*删除（因为它们没有 ' `D`'）

# javascript - javascript替换查询字符串值

> ID：13275421
> 
> 赞同：4
> 
> 时间：2012-11-07T17:57:38.747
> 
> 标签：javascript, regex

> **可能重复：**
> [添加或更新查询字符串参数](https://stackoverflow.com/questions/5999118/add-or-update-query-string-parameter)

我试图替换查询字符串中的页码，无论数字是 1。

请求参数

```
index.php?list&page=2&sort=epub 
```

javascript

```
window.location.href.replace(new RegExp("/page=.*?&/"), "page=1&") 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T18:01:05.040

您的代码看起来*几乎*正确；然而：

*   您需要使用*其中一个* `new RegExp` *或*特殊的`//`正则表达式语法，但不能同时使用两者。
*   该`replace`方法不会就地修改字符串，它仅返回修改后的副本。
*   而不是`.*?`，我认为写作更有意义`\d+`；在您没有想到的情况下，更精确的正则表达式通常不太可能出错。

所以，把它放在一起：

```
window.location.href = window.location.href.replace(/page=\d+/, "page=1"); 
```

# javascript - 网站的英文版和中文版

> ID：13275427
> 
> 赞同：0
> 
> 时间：2012-11-07T17:58:22.913
> 
> 标签：javascript, html

有没有办法（可能使用 JavaScript）使用链接将网站的语言从英文更改为中文（例如）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:04:38.343

如果您正在寻找一种以各种语言提供网站的简便方法，我相信您最好的选择是 Google 的[网站翻译器](https://translate.google.com/manager/website/)。

然而，请考虑到翻译将与常规的谷歌翻译结果一样可靠，正如您可能知道的那样，它仍然有一些希望。对于更严格的东西，您将需要创建一个更具技术性的解决方案。

**编辑：**注意到您在上面的评论回复。这在很大程度上取决于您的网站是如何构建的。如果它是使用存储在数据库中的内容动态生成的，您可以为每个翻译设置一列；然后必须告知生成页面的代码要使用哪个版本，这可以通过多种方式完成：我个人建议使用 URL 中的这个“参数”来构建您的解决方案，类似于您的站点。 com/lang/page-slug-here，但您也可以设置会话变量（“只需单击链接”），或者将用户的浏览器语言设置作为默认设置，等等。

# sql - 查找我的查询的总金额

> ID：13275431
> 
> 赞同：1
> 
> 时间：2012-11-07T17:58:37.430
> 
> 标签：sql, sql-server-2008, tsql

我有一个查询，可以让我检索客户订单。

```
Select ID, OrderID, Item, Price from customerOrders
Where Order = 1 
```

有没有一种方法可以汇总最终支付的金额并将其显示在下面，但仍然能够查看 sql 查询中所需的所有详细信息，例如

```
ID    |  OrderID |  Item  | Price
1     |   1      |  Book  | 9.99
2     |   1      |  DVD   | 12.99

                    total = 22.98 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:19:24.300

你可以试试[计算](http://msdn.microsoft.com/en-us/library/ms181708%28v=sql.105%29.aspx)

```
Select ID, OrderID, Item, Price from customerOrders
Where Order = 1
COMPUTE SUM(Price) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:21:32.237

两步：

1、要生成 SUM，需要使用 UNION ALL 将其添加到结果集中。UNION 添加了一个不需要的 DISTINCT 操作，即使在您的情况下它不会改变结果。

```
Select ID, OrderID, Item, Price from customerOrders
Where [Order] = 1
UNION ALL
Select NULL, NULL, NULL, SUM(Price) from customerOrders
Where [Order] = 1
ORDER BY CASE WHEN ID IS NULL THEN 2 ELSE 1 END, ID; 
```

2、要按你想要的顺序排序（底部的总和），你可以使用NULL ID作为标识符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T20:27:30.993

从技术上讲，您想要的东西称为汇总行。SQL Server 对这种情况有一个特殊的功能，它在子句中调用`ROLLUP()`和使用。`GROUP BY`在您的特定情况下，查询基本上如下所示：

```
SELECT ID, OrderID, Item, SUM(Price) AS Price
FROM customerOrders
WHERE OrderID = 1
GROUP BY ROLLUP((ID, OrderID, Item))
; 
```

[您可以在 SQL Fiddle](http://sqlfiddle.com/#!3/a1c01/1)看到此查询的现场演示。[可以在 MSDN](http://msdn.microsoft.com/en-us/library/ms177673.aspx "GROUP BY (Transact-SQL)")`ROLLUP()`中找到有关以及其他 GROUP BY 函数的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T18:01:12.280

这就是你需要的：

```
 Select ID, OrderID, Item, Price from customerOrders
   Where Order = 1
Union
   Select NULL, NULL, NULL, (
      Select Sum(Price) from customerOrders
      Where Order = 1
      Group By  Order
   ) 
```

**更新**

如果结果为空，则总数应为零，而不是空。使用更新的代码。

干杯

# c# - 命名信号量名称的最大长度是多少？

> ID：13275439
> 
> 赞同：1
> 
> 时间：2012-11-07T17:59:10.677
> 
> 标签：c#, .net, windows, semaphore

[Semaphore](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)名称的最大长度是多少？有一个是有道理的，因为它映射到底层内核信号量，但文档似乎没有准确地指定它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T17:59:10.677

信号量名称的最大长度为 260 个字符。超过此限制将导致[ArgumentException](http://msdn.microsoft.com/en-us/library/system.argumentexception.aspx)并显示以下消息：

`The name can be no more than 260 characters in length.`

# paypal - Paypal 发货详情

> ID：13275446
> 
> 赞同：0
> 
> 时间：2012-11-07T17:59:30.473
> 
> 标签：paypal, paypal-sandbox, paypal-adaptive-payments

我正在使用 PayPal 自适应支付（链式支付）。

如果我设置： 1\. CREATE payment 2\. 在 SetPaymentOptions -> Requires shipping address selection = true 3\. 当我重定向用户 https://www.sandbox.paypal.com/webscr&cmd=_ap-payment&paykey=[PA KEY ] 验证后的用户不会显示任何收货地址提示

为什么？

据此

[https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation)

使用 CREATE 时，我应该这样做： CREATE - 使用此选项使用 SetPaymentOptions 设置付款指令，然后稍后使用 ExecutePayment 执行付款。

但是，一旦我尝试运行 ExecutePayment，我就会得到以下信息：

> > 此付款请求必须由发件人授权

那我该如何设置额外的付款方式呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:21:30.163

发件人是否真的授权付款？流程应该是这样的：

1.  `actionType`使用as CREATE调用 Pay API 操作
2.  如果`paymentExecStatus`=CREATED 和`ack`=SUCCESS，获取`payKey`（这里，将`detailLevel`=保留`ReturnAll`在`RequestEnvelope`您的 Pay API 请求的字段中）
3.  将用户重定向到 Paypal [https://www.sandbox.paypal.com/webscr?cmd=_ap-payment&paykey=YOUR_PAYKEY_ABOVE](https://www.sandbox.paypal.com/webscr?cmd=_ap-payment&paykey=YOUR_PAYKEY_ABOVE)
4.  如果用户批准付款，您将被重定向到作为 Pay API 请求的一部分发送的 returnURL
5.  使用 PaymentDetails API 操作验证批准状态
6.  稍后您可以使用 ExecutePayment API 操作执行付款，从而在步骤 4 中设置。发送`payKey`您在步骤 2 中获得的相同内容。

您收到错误代码 550001，因为用户批准似乎尚未成功完成。这可能是由于：应用程序没有将用户/发件人重定向到 Paypal 进行授权

或者

用户没有输入正确的登录信息

或者

没有足够的可用资金等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:02:27.437

只有在您使用延迟链式付款时，才会使用 ExecutePayment 调用。否则，只要买家登录并批准，付款仍然会发生，因此不需要 ExecutePayment。此时调用它会导致您收到错误，即支付密钥已被使用。

# mongodb - 有没有更好的 mongo.exe 外壳

> ID：13275459
> 
> 赞同：2
> 
> 时间：2012-11-07T18:00:29.567
> 
> 标签：mongodb, ide, editor, utility

mongo.exe 有替代品吗？我为 Mongo 测试了几个可用的 GUI 环境，不幸的是没有一个允许直接执行命令。

有没有更好的输入 mongodb 查询的工具，至少支持 Unicode 字符并具有多行编辑环境？（甚至像记事本一样简单）

我尝试了 PowerShell ISE，但在调用 mongo.exe 后它停止了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T15:20:02.523

我发现：

*   [Robomongo](http://robomongo.org/) — 是一个以 shell 为中心的跨平台开源 MongoDB 管理工具（即 Admin GUI）。Robomongo 嵌入了与 MongoDB 的 mongo shell 相同的 JavaScript 引擎。您可以在 mongo shell 中编写的所有内容 — 您可以在 Robomongo 中编写！
*   一个提供良好 unicode Monogo shell 的 PhpStorm 插件。 [https://github.com/dboissier/mongo4idea/](https://github.com/dboissier/mongo4idea/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:10:35.950

如果您想尝试基于 Web 的工具，请查看[MongoLab](https://mongolab.com/)。除了托管服务，它们还提供了一个简单的 GUI 界面来管理您的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T21:20:52.540

您总是可以只启动 python，导入[pymongo](http://api.mongodb.org/python/current/)驱动程序，然后从那里运行命令。另一个好处是您可以导入您已经编写并保存为 .py 文件的更复杂的 Python 脚本。

# php - 组合数组项

> ID：13275461
> 
> 赞同：-2
> 
> 时间：2012-11-07T18:00:33.780
> 
> 标签：php, loops, for-loop

我的高级循环有问题，这是我的数组

```
$array1 = array(1,2,3);
$array2 = array(4,5);
$array3 = array(6,7,8,9);
$array4 = array(10,11); 
```

我想循环以下结果：

1.  1,4,6,10
2.  1,4,6,11
3.  1,4,7,10
4.  1,5,7,11

带最后一个：3,5,8,11

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:08:54.200

可变数量数组的解决方案。可能可以写得更短一些，但我把它留给你。;)

```
<?php

$array1 = array(1,2,3);
$array2 = array(4,5);
$array3 = array(6,7,8,9);
$array4 = array(10,11);

function turboArray()
{
    $arrays = func_get_args();
    $indexes = array_fill(0, count($arrays), 0);
    function turboSubArray(&$arrays, &$indexes, $l){
        for ($a = 0; $a < count($arrays[$l]); $a++){
            $indexes[$l] = $a;
            if ($l == count($arrays) - 1) {
                for ($i = 0; $i < count($indexes); $i++)
                {
                    echo $arrays[$i][$indexes[$i]];
                    if ($i == count($indexes) - 1){
                        echo "\n<br/>";
                        $indexes[$i] = 0;
                        if ($i == 0) return;
                    }
                    else {
                        echo ', ';
                    }
                }
            } else if ($l < count($indexes)) {
                turboSubArray($arrays, $indexes, $l + 1);
            }
        }
    }
    $l = 0;
    turboSubArray($arrays, $indexes, $l);
}

turboArray($array1, $array2, $array3, $array4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:10:56.667

这应该这样做......？

```
foreach ($array1 as $first) {
  foreach ($array2 as $second) {
    foreach ($array3 as $third) {
      foreach ($array4 as $fourth) {
        echo "$first $second $third $fourth";
      }
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T05:22:41.383

我觉得无聊，决定过度设计一点。享受。

```
class CrossJoin implements Iterator {
    private $arrays = array();
    private $index = 0;

    public function __construct(/* $array1, ... */) {
        foreach (func_get_args() as $arr) {
            // ArrayIterator's iteration stuff is cleaner than arrays',
            // and less prone to breakage when objects are passed around
            if (count($arr)) $this->arrays[] = new ArrayIterator($arr);
        }

        // if any of the arrays were empty, a cross join should fail.
        // fudge a single empty array to prevent special-casing later
        if (count($this->arrays) !== func_num_args()) {
            $this->arrays = array(new ArrayIterator(array()));
        }
    }

    public function next() {
        for ($i = count($this->arrays) - 1; $i >= 0; --$i) {
             // carry til we don't have to anymore
             $place = $this->arrays[$i];
             $place->next();
             if ($place->valid()) break;
        }
        // if $i<0, then we carried right off the edge of the list.
        // don't let $arrays[0] be reset, cause that's our indicator
        // that we're done.
        if ($i<0) return;

        ++$this->index;
        for (++$i; $i < count($this->arrays); ++$i) {
             $this->arrays[$i]->rewind();
        }
    }

    public function current() {
        $result = array();
        foreach ($this->arrays as $arr) { $result[] = $arr->current(); }
        return $result;
    }

    public function key() { return $this->index; }

    public function valid() {
        return !empty($this->arrays) && $this->arrays[0]->valid();
    }

    public function rewind() {
        foreach ($this->arrays as $arr) $arr->rewind();
        $this->index = 0;
    }
}

$combos = new CrossJoin(
    array(1, 2, 3),
    array(4, 5),
    array(6, 7, 8, 9),
    array(10, 11)
);

foreach ($combos as $combo) {
    echo implode(', ', $combo), "\n";
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T18:14:57.780

希望有帮助：

```
for ($i = 0; $i < count($a1); ++i) {
  for ($j = 0; $j < count($a2); ++j) {
    for ($k = 0; $k < count($a3); ++k) {
      for ($l = 0; $l < count($a4); ++l) {
        echo $a1[$i] . ' ' . $a2[$j] . ' ' . $a3[$k] . ' ' . $a4[$l] . '\n';
      }
    }
  }
} 
```

干杯!

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-07T18:07:21.980

您正在寻找 PHP [array_merge](http://php.net/manual/en/function.array-merge.php)函数。

# java - 在android中重新缩放png位图

> ID：13275473
> 
> 赞同：0
> 
> 时间：2012-11-07T18:01:22.997
> 
> 标签：java, android, png

所以我有这个 png 格式的绿球图像（103x104px 是大小），我试图在我在屏幕上绘制它之前调整它的大小。我正在尝试这段代码，我在许多线程和 android 文档中都找到了该代码，该函数被指定为我应该需要的，但它不起作用。

```
Bitmap a=BitmapFactory.decodeResource(getResources(), R.drawable.example);
Bitmap b=Bitmap.createScaledBitmap(a,30,30,false); 
```

然后我用

```
canvas.drawBitmap(b, x, y ,paint); 
```

但无论我给 createScaledBitmap() 提供哪些数字，屏幕上的图像仍然相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:18:51.487

好的，所以最终解决方案非常简单：D 我忽略了代码中的一行，当我决定调整它的大小时我忘记删除它并且该行总是支持它，所以这段代码确实有效。我的错，应该在发布之前更长时间地搜索我的代码。

# php - QueryException 显示其中的查询错误

> ID：13275478
> 
> 赞同：0
> 
> 时间：2012-11-07T18:01:42.587
> 
> 标签：php, exception, doctrine, doctrine-orm

我正在使用教义，它是我见过的最好的东西，但我有一点问题。我正在搜索我的 web 应用程序，我需要一个查询，因为使用 find 功能您无法搜索。

好吧，我不知道我做错了什么。因为 QueryException 即使是最简单的查询也会显示错误。这是我的一些代码：

```
$this->_em->createQuery('SELECT * FROM parcel u WHERE u.parcel_id = "1"')
                     ->getResult(); 
```

我只是想得到一个包裹（只是一个测试）。这就是我得到的：

```
Fatal error: Uncaught exception 'Doctrine\ORM\Query\QueryException' with message 'SELECT * FROM parcel u WHERE u.parcel_id = "1"' 
```

这不是一个容易的错误。我不知道我做错了什么。也许我的引导程序丢失了？

我对 Codeigniter 有教义，也许就是这样！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:02:23.500

`*`您需要使用 Doctrine 选择整个对象，而不是使用 as 在 SQL 中选择所有内容。

所以而不是`*`使用`u`.
全部的：

```
$this->_em->createQuery('SELECT u FROM Parcel u WHERE u.parcel_id = "1"')
    ->getResult(); 
```

此外，您要查询的数据应该是一个对象。类通常使用首字母大写。

# python - 将递归生成器对象转换为列表

> ID：13275479
> 
> 赞同：3
> 
> 时间：2012-11-07T18:01:48.033
> 
> 标签：python, recursion, iterator, python-2.7, generator

我一直在尝试在 Python 中实现一个简单的树结构。一棵树从一个具有子节点的“根”节点开始，它的每个子节点都可能有自己的子节点，依此类推。

现在，我想打印树的所有节点的名称，即我想将其转换为列表。我试图采用递归，但不幸的是递归地返回生成器对象的子树，我无法将其转换为节点。

有人可以帮助我并指出我在这里做错了什么吗？

```
class Node:

  def __init__(self,name):
    self.name = name
    self.children = []
    self.parent = None

  def appendChild(self,child):
    self.children.append(child)
    if child is not None:
      child.parent = self

  def listChildren(self):
    yield self
    for child in self.children:
      yield child.listChildren()
    raise StopIteration

# test
r = Node("root")

n = Node("name")
r.appendChild(n)
n.appendChild(Node("name2"))
n.appendChild(Node("name3"))

c = Node("child")
n.appendChild(c)
c.appendChild(Node("child2"))
c.appendChild(Node("child3"))

r.appendChild(Node("name4"))
r.appendChild(Node("name5"))
r.appendChild(Node("name6"))

for child in r.listChildren():
    print child.name 
```

输出：

```
Traceback (most recent call last):
  File "C:/Users/User/Documents/TreeNode.py", line 40, in <module>
    print child.name
AttributeError: 'generator' object has no attribute 'name' 
```

应该在迭代生成器时调用它，但在我的情况下， r.listChildren() 中的每个孩子反过来都是一个生成器对象。如果这是一个设计缺陷，那么我将不得不寻找另一种生成节点名称列表的方法。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:13:09.830

`child.listChildren()`将返回一个生成器对象，而不是实际的孩子。所以你可能想做类似的事情：

```
def listChildren(self):
  yield self
  for child in self.children:
    for c in child.listChildren():
      yield c
  raise StopIteration # PS: you don't need to do that explicitly 
```

或者，如果您使用 Python 3.3，您可以这样做：

```
def listChildren(self):
  yield self
  for child in self.children:
    yield from child.listChildren() 
```

# mongodb - mongodb - 查找具有最接近整数值的文档

> ID：13275491
> 
> 赞同：17
> 
> 时间：2012-11-07T18:02:29.890
> 
> 标签：mongodb, absolute-value

假设我有一个集合，其中包含具有浮点数的 ratio 属性的文档。

```
{'ratio':1.437} 
```

如何编写查询以查找具有最接近给定整数的值的单个文档，而不使用驱动程序将它们全部加载到内存中并找到具有最小值的文档`abs(x-ratio)`？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-07T18:25:25.157

有趣的问题。我不知道您是否可以在一个查询中完成，但您可以在两个查询中完成：

```
var x = 1; // given integer
closestBelow = db.test.find({ratio: {$lte: x}}).sort({ratio: -1}).limit(1);
closestAbove = db.test.find({ratio: {$gt: x}}).sort({ratio: 1}).limit(1); 
```

然后您只需检查两个文档中的哪个`ratio`最接近目标整数。

**MongoDB 3.2 更新**

3.2 版本增加了对[`$abs`](https://docs.mongodb.org/manual/reference/operator/aggregation/abs/#abs-aggregation)绝对值聚合运算符的支持，现在允许在单个`aggregate`查询中完成此操作：

```
var x = 1;
db.test.aggregate([
    // Project a diff field that's the absolute difference along with the original doc.
    {$project: {diff: {$abs: {$subtract: [x, '$ratio']}}, doc: '$$ROOT'}},
    // Order the docs by diff
    {$sort: {diff: 1}},
    // Take the first one
    {$limit: 1}
]) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T19:42:58.633

我有另一个想法，但非常棘手，需要更改您的数据结构。

您可以使用mongodb 支持的[地理位置索引](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)

首先，将您的数据更改为此结构，并将第二个值保留为 0

```
{'ratio':[1.437, 0]} 
```

然后您可以使用`$near`运算符找到最接近的比率值，并且由于运算符返回一个按距离排序的列表以及您给出的整数，因此您必须使用`limit`仅获取最接近的值。

```
db.places.find( { ratio : { $near : [50,0] } } ).limit(1) 
```

如果您不想这样做，我认为您可以使用@JohnnyHK 的答案 :)

# ruby-on-rails - Rails、ActiveRecord 和日期

> ID：13275492
> 
> 赞同：0
> 
> 时间：2012-11-07T18:02:38.207
> 
> 标签：ruby-on-rails, date, activerecord

可能是愚蠢的问题，但它现在让我发疯。为什么

```
 User.where(:created_at => 1.day.ago..Time.now).count
   (0.8ms)  SELECT COUNT(*) FROM "users" WHERE ("users"."created_at" BETWEEN '2012-11-06 17:58:22.443552' AND '2012-11-07 17:58:22.443809')
 => 2 
```

和

```
 User.where(:created_at => 1.day.ago.to_date..Time.now.to_date).count
   (0.6ms)  SELECT COUNT(*) FROM "users" WHERE ("users"."created_at" BETWEEN '2012-11-06' AND '2012-11-07')
 => 0 
```

给我一个不同的结果？

我知道如果没有时间（使用 .to_date ），一天的开始和结束应该需要午夜。这就是我想要的，但由于一些晦涩的原因，它显示为 0，但我在 10 分钟前创建了 2 个用户......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:14:26.987

以下答案可能对您有所帮助。 [MySQL“之间”子句不包含？](https://stackoverflow.com/questions/5080824/mysql-between-clause-not-inclusive)

具体到您的问题，我在这里复制并重写上述链接的答案：

> 问题是 2011-01-31 真的是 2012-11-07 00:00:00。那是一天的开始。不包括白天的一切。

因此，您在 10 分钟前添加的条目在您未添加时间时显然会被跳过。

# java - 我在java中使用线程类的睡眠方法，谁能告诉我如何避免这件事

> ID：13275493
> 
> 赞同：-1
> 
> 时间：2012-11-07T18:02:40.700
> 
> 标签：java

我正在使用睡眠，因为一种方法需要时间来执行，我想在它完成后执行下一个方法。这就是我正在尝试的。

```
method1();
Thread.sleep(3000);
method2(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T18:04:17.377

要一个接一个地运行一个方法，你可以做

```
method1();
method2(); 
```

在方法调用之间不需要休眠。

* * *

> 我的方法 1 正在执行一些 shellscript

在这种情况下，您应该有类似的东西

```
Process process = Runtime.getRuntime().exec(commandLine);
// wait for the process to finish.
process.waitFor(); 
```

# python - 在 Python 中对之间画线

> ID：13275494
> 
> 赞同：7
> 
> 时间：2012-11-07T18:02:43.277
> 
> 标签：python, numpy, matplotlib

我有一对元组：

```
pairs=[(3,6),(7,2),(8,5),(9,5),(5,13),(10,6),(6,1),(1,13),(11,2),(2,13),(12,4),(4,13)] 
```

每对描述两点之间的连接，即点 3 和点 6 之间有一条线。

目前，这样做：

```
i=0
for point in pairs:
    i+=1
    plt.plot(point,(i,i))
plt.show() 
```

给了我每个点与其各自目的地之间的直线：

![](../Images/8cdc79f762be5c5a80819fcc3d8b57d1.png)

但是，我正在寻找将这些线连接在一起以创建“桥梁”图，类似于：

![](../Images/b082b9aab52aa460f16de75854bdd0b1.png)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:00:22.293

使用[networkx](http://networkx.lanl.gov)，

```
import networkx as nx
import matplotlib.pyplot as plt

G = nx.Graph()
edges = [
    (3,6),(7,2),(8,5),(9,5),(5,13),(10,6),(6,1),(1,13),(11,2),(2,13),(12,4),(4,13)]

G.add_edges_from(edges)
nx.draw(G)
plt.show() 
```

产量 ![在此处输入图像描述](../Images/2e3972bb046479d0ff4d822aab5d186c.png)

# jakarta-ee - 如何将用户从 /page 重定向到 html 页面？

> ID：13275495
> 
> 赞同：1
> 
> 时间：2012-11-07T18:02:43.043
> 
> 标签：jakarta-ee, tomcat, localhost

如何在我的动态 Web 项目中重定向用户，以便当他打开*localhost:8080/pageName**时*，他实际上打开了我的 WebContent 文件夹中的 somepage.html？我在 web.xml 中写什么来实现这一点？

我希望用户输入*localhost:8080/pageName*但实际上看到*localhost:8080/somepage.html*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:09:31.557

你可以使用过滤器。这个 url 展示了如何安装一个 jar，并修改你的 web.xml： [http ://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)

您的重写文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 3.2//EN"
    "http://tuckey.org/res/dtds/urlrewrite3.2.dtd">

<urlrewrite>
    <rule>
        <name>pageName Redirect</name>
        <from>^/pageName$</from>
        <to>/somepage.html</to>
    </rule>
</urlrewrite> 
```

编辑：

我的示例不会更改用户浏览器中的 URL。当您希望多个 URL 显示相同的内容时，它的形式很有帮助。

如果要更改 URL，请对上面的代码进行此更改：

```
 <to type="redirect">/somepage.html</to> 
```

这不是向用户发送要显示的浏览器内容，而是向浏览器发送页面已移动的消息，并且它应该透明地修改浏览器 URL，然后加载该页面。

[JSP转发和重定向的区别](https://stackoverflow.com/questions/6068891/difference-between-jsp-forward-and-redirect)

# php - 解析 XML（抓取某些数据）

> ID：13275496
> 
> 赞同：0
> 
> 时间：2012-11-07T18:02:44.020
> 
> 标签：php, xml, xml-parsing

我在一个 XML 文件中有很多需要取出的数据。目前我需要提取大约 1000 条数据它看起来像这样

[http://pastebin.com/PwfhtbDF](http://pastebin.com/PwfhtbDF)

我需要以某种方式从每一个中提取 ip="83.42.146.140" 。请记住，其中大约有 1000 行（总共 44000 行）。我尝试过 XML 解析程序，但无法提取我想要的内容。我正在考虑以某种方式在PHP中做这件事。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:54:34.230

[试试](http://php.net/manual/en/book.simplexml.php)simpleXML 。SimpleXML 内置于 PHP 中。

[这是关于它的基本用法（附示例）](http://www.php.net/manual/en/simplexml.examples-basic.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T22:01:25.713

$result =~ /\b(\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3})\b/sg);

这就是我最终在 PHP 中使用来获取所有 IP 并将它们打印出来 :)。感谢您所有的帮助。

# dart - Dart 中 == 和 === 有什么区别？

> ID：13275506
> 
> 赞同：27
> 
> 时间：2012-11-07T18:03:35.023
> 
> 标签：dart

Dart 是否支持 == 和 === ？平等和身份有什么区别？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-07T18:03:35.023

Dart 支持`==`平等和`identical(a, b)`身份。Dart 不再支持`===`语法。

`==`当您想检查对象是否“相等”时，用于相等。您可以`==`在您的类中实现该方法来定义相等的含义。例如：

```
class Person {
  String ssn;
  String name;

  Person(this.ssn, this.name);

  // Define that two persons are equal if their SSNs are equal
  bool operator ==(other) {
    return (other is Person && other.ssn == ssn);
  }
}

main() {
  var bob =  Person('111', 'Bob');
  var robert =  Person('111', 'Robert');

  print(bob == robert); // true

  print(identical(bob, robert)); // false, because these are two different instances
} 
```

请注意， 的语义`a == b`是：

*   如果要么 要么`a`是`b`，`null`返回`identical(a, b)`
*   否则，返回`a.==(b)`

用于`identical(a, b)`检查两个变量是否引用同一个实例。[same](https://api.dart.dev/be/175003/dart-core/identical.html)是在 中找到的顶级函数`dart:core`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T18:10:38.290

由于据说 DART 与存在 === 的 javascript 相关，我希望不要很快被否决。

身份作为一个概念意味着 1 等于 1，但 1.0 不等于 1，false 也不等于 0，“2”也不等于 2，即使每个都相互*评估*并且 1==1.0 返回 true。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-08-16T23:38:00.817

应该注意的是，`identical`在 dart 中使用该函数有一些注意事项，正如这个 github 问题[评论](https://github.com/dart-lang/sdk/issues/563#issuecomment-108304500)中提到的：

> 规范已更新，以将双打之间的相同处理如下：
> 
> same() 函数是预定义的 dart 函数，如果它的两个参数是以下之一，则返回 true：
> 
> *   同一个对象。
> *   int 类型的并且具有相同的数值。
> *   double 类型，不是 NaN，并且具有相同的数值。

这意味着即使dart 中的[所有内容](https://dart.dev/guides/language/language-tour#important-concepts)`f`都是一个对象，并且`g`是不同的对象，以下打印`true`.

```
int f = 99;
int g = 99;
print(identical(f, g)); 
```

因为整数的值相同，而不是引用。

* * *

因此，要回答您的问题，`==`用于确定两个对象是否具有相同的值，但`identical`用于测试引用相等性，但上述摘录的情况`double`除外`int`。

请参阅：[平等和关系运算符](https://dart.dev/guides/language/language-tour#equality-and-relational-operators)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-07T19:03:04.520

需要注意的是，在 Dart 中，其`identical`工作方式与 Javascript 类似，其中`(5.0 == 5)`is `true`，但`identical(5.0, 5)`is `false`。

# java - toString，空指针异常

> ID：13275508
> 
> 赞同：0
> 
> 时间：2012-11-07T18:03:37.843
> 
> 标签：java, object, reference, nullpointerexception, tostring

尝试从数组列表中获取树名时出现 Nullpointerexception。我已经测试过仅获得名称，但我仍然收到此错误。我想做的就是知道哪个设备正在切割哪棵树。

```
public class TreeTester {
public static void main(String[] args) {   
    Tree trees = new Tree("Trees");
    Tree tree1 = new Tree("Ash Tree");
    trees.addTree(tree1); 
```

树类

```
public Class Tree{
    private ArrayList<Tree> theTrees;
    private String treeName;

    //Forgot these
    Tree(String trees //There are more but not relevent) {
        theTrees = new ArrayList<Tree>();
    }

    Tree(String treeName){
        this.treeName = treeName;
    }
    //

    public boolean addTree(Tree newTree){
        theTrees.add(newTree);
        return true;
    }

    @Override
    public String toString(){
        String s = getTreeName();
        return s;
    }

    private String getTreeName() {
        return this.treeName; }
    } 
```

//------------------为了方便而缩短--------------------------/ / 想象一下缺失的变量和构造函数

```
public Class Equipment{
    private Tree TreeDetails;
    @Override
    public String toString(){
        String s = "Using " + getEqupiment(); + "to cut " + setCutTree()
    }

    public boolean setCutTree(){
        this.treename = treename.toString(); //Nullpointer issue here
        return this.treecut = true;
        //getEquipment works fine
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:05:45.620

你需要初始化`theTrees` `ArrayList`

```
public class Tree {
   private ArrayList<Tree> theTrees = new ArrayList<Tree>(); 
```

您还遗漏了`Tree`您在方法中使用的一个参数构造函数`main`。由于您`NullPointerException`在访问名称时得到了一个偶数，我假设这个构造函数没有初始化`treeName`任何一个。

使用构造函数，类应该如下所示：

```
public class Tree {

   private ArrayList<Tree> theTrees;
   private String treeName;

   public Tree(String treeName) {
      this.treeName = treeName;
      this.theTrees = new ArrayList<Tree>();
   } 
   ... 
```

# sql - 如何根据这些记录中存在的多个字符串来检索记录？

> ID：13275510
> 
> 赞同：0
> 
> 时间：2012-11-07T18:03:39.223
> 
> 标签：sql, search, search-engine, where-clause

我正在使用 Ruby on Rails v3.2.2 和 MySQL 数据库。我有一个包含数据的数据库表，如下所示（注意：`column1`包含逗号分隔的字符串）：

```
id   | column1                          | column2 | columnM    
-----|-----------------------------------------------------
1    | one1                             | value1  |  ...
2    | one1, two1                       | value1  |  ...
3    | one1, two1, three1               | value1  |  ...
4    | one2                             | value2  |  ...
5    | one2, two2                       | value2  |  ...
6    | one2, two2, three2               | value2  |  ...
...  | ...                              | ...     |  ...
1000 | oneN                             | valueN  |  ...
1001 | oneN, twoN                       | valueN  |  ...
1002 | oneN, twoN, threeN               | valueN  |  ...
1003 | oneN, twoN, threeN, fourN        | valueN  |  ... 
```

我想编写一个 SQL 查询，以便检索*同时*从`column1`. 也就是说，例如，假设我`column1`搜索*字符串*

```
Case 1: "thr"
Case 2: "two1 thr"
Case 3: "two thr"
Case 4: "wo"
Case 5: "one"
Case 6: "four one" 
```

然后，我想分别获取以下记录`id`：

```
Case 1: 3, 6, 1002, 1003                         # returns all records starting with "thr"
Case 2: 3                                        # returns all records starting with "two1" and at the same time starting with "thr" 
Case 3: 3, 6, 1002, 1003                         # returns all records starting with "two" and at the same time starting with "thr"
Case 4:                                          # nothing to return
Case 5: 1, 2, 3, 4, 5, 6, 1000, 1001, 1002, 1003 # returns all records starting with "one"
Case 6: 1003                                     # returns all records starting with "four" and at the same time starting with "one" 
```

*我怎样才能使 SQL 查询表现得像上面那样*（也许，通过使用通配符或其他我不知道的东西）*？*由于我正在尝试实现一个“简单”的搜索引擎，你有什么建议？有一些处方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:11:15.510

看LIKE子句，即案例2：

```
SELECT *
  FROM TBL
 WHERE 1
   AND CONCAT(', ', column1) LIKE '%, two1%'
   AND CONCAT(', ', column1) LIKE '%, thr%' 
```

这里的技巧是您要确保要搜索的字符串是逗号分隔项之一的开头，因此是前导`,`（逗号空格）。第一项不存在，因此我们`CONCAT()`将其转到列，转向`one, two1`=> `, one, two1`。LIKE 模式可以正常工作。

这`WHERE 1`是一种用一个条件“使用”种子 WHERE 子句的模式，因此对于您需要搜索的每个单词，您可以添加一个**AND**表达式

```
 AND CONCAT(', ', column1) LIKE '%, someword%' 
```

# vba - Access-Vb-根据另一张表的值更新一张表

> ID：13275511
> 
> 赞同：2
> 
> 时间：2012-11-07T18:03:43.883
> 
> 标签：vba, ms-access

我正在使用带有 vb 的 Access DB。我想根据其他表的值更新一个表的值

例如表 A 有列 a1、a2、a3、...... 表 B 有列 b1、b2、b3.......

如果 a1 和 b1 是他的 ID 号，对于表 B 中的每个匹配 ID，B3 的值也必须在 a3 中更新

如果 b1 的第一个值是 1234，则在 tableA 中搜索 1234，用 b3 值更新该特定行的 a3 位置。

请让我知道如何继续前进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T20:01:05.673

试试这个。如果您没有合适的索引，它可能无法正常工作。

```
UPDATE KeyTable090808 
INNER JOIN pplsft_IDandDEPT 
ON KeyTable090808.Employee_ID = pplsft_IDandDEPT.pplsft_UTDID
SET KeyTable090808.DEPT = pplsft_IDandDEPT.pplsft_Dept_Name 
```

# audio - 从 RTP 数据包中提取音频数据

> ID：13275512
> 
> 赞同：0
> 
> 时间：2012-11-07T18:03:46.283
> 
> 标签：audio, rtp, packets, payload

我有 RTP 数据包，我使用 pcap.net 数据包对象。我需要从数据包中获取实际的音频数据，没有 RTP 标头 - 只是有效负载。

语言：C#

谢谢，奥菲克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:18:36.153

RTP 标头长度通常为 12 字节。使用 pcap.net 你可以创建一个 udp 对象。

```
UdpDatagram udp = null; 
```

然后使用

```
udp.Payload.ToHexadecimal(); 
```

所以你会得到完整的 RTP 。在上面的十六进制字符串中删除前 12 个字节，这将是 rtp 数据（例如：语音）。

# c# - Reportviewer：标签中的下标

> ID：13275514
> 
> 赞同：1
> 
> 时间：2012-11-07T18:03:56.090
> 
> 标签：c#, report-viewer2010

我正在使用 MS reportviewer，C#（VS 2010）

在 tablix 列标题中，是否可以在标签中将字母显示为下标？

# mysql - 定制的客户网格导致 MySQL 表扫描和文件排序也就是性能下降

> ID：13275515
> 
> 赞同：13
> 
> 时间：2012-11-07T18:04:09.997
> 
> 标签：mysql, magento, grid, indexing

Magento 企业。1.10.1.1。客户和地址的数据集是半大型 (125k+) CSR 通常在此网格上（有时一次有 25+ 个并发用户）。

这是在客户`Grid.php` `Block`文件中生成集合的代码片段。没有什么花哨或不寻常的，只是主要为集合添加属性。

```
$collection = Mage::getResourceModel('customer/customer_collection')
    ->addNameToSelect()
    ->addAttributeToSelect('email')
    ->addAttributeToSelect('group_id')
    ->addAttributeToSelect('prod_codes')
    ->addAttributeToSelect('last_called_date')
    ->addAttributeToSelect('time_zone')
    ->addAttributeToSelect('salesrep')
    ->addAttributeToSelect('do_not_call')
    ->addAttributeToSelect('club_member')
    ->addAttributeToSelect('call_back_date')
    ->addAttributeToSelect('marketing_code_outcome')
    ->joinAttribute('billing_postcode', 'customer_address/postcode', 'default_billing', null, 'left')
    ->joinAttribute('billing_city', 'customer_address/city', 'default_billing', null, 'left')
    ->joinAttribute('billing_telephone', 'customer_address/telephone', 'default_billing', null, 'left')
    ->joinAttribute('billing_region', 'customer_address/region', 'default_billing', null, 'left');

$this->setCollection($collection); 
```

生成此查询，该查询在客户网格中行为不端导致加载时间过长：

```
SELECT 
    e . *,
    _table_prefix.value AS prefix,
    _table_firstname.value AS firstname,
    _table_middlename.value AS middlename,
    _table_lastname.value AS lastname,
    _table_suffix.value AS suffix,
    CONCAT(IF(_table_prefix.value IS NOT NULL AND _table_prefix.value != '',
                CONCAT(TRIM(_table_prefix.value), ' '),
                ''),
            TRIM(_table_firstname.value),
            IF(_table_middlename.value IS NOT NULL AND _table_middlename.value != '',
                CONCAT(' ', TRIM(_table_middlename.value)),
                ''),
            ' ',
            TRIM(_table_lastname.value),
            IF(_table_suffix.value IS NOT NULL AND _table_suffix.value != '',
                CONCAT(' ', TRIM(_table_suffix.value)),
                '')) AS name,
    _table_default_billing.value AS default_billing,
    _table_billing_postcode.value AS billing_postcode,
    _table_billing_city.value AS billing_city,
    _table_billing_telephone.value AS billing_telephone,
    _table_billing_region.value AS billing_region
FROM
    customer_entity AS e
        LEFT JOIN
    customer_entity_varchar AS _table_prefix ON (_table_prefix.entity_id = e.entity_id) AND (_table_prefix.attribute_id = '4')
        LEFT JOIN
    customer_entity_varchar AS _table_firstname ON (_table_firstname.entity_id = e.entity_id) AND (_table_firstname.attribute_id = '5')
        LEFT JOIN
    customer_entity_varchar AS _table_middlename ON (_table_middlename.entity_id = e.entity_id) AND (_table_middlename.attribute_id = '6')
        LEFT JOIN
    customer_entity_varchar AS _table_lastname ON (_table_lastname.entity_id = e.entity_id) AND (_table_lastname.attribute_id = '7')
        LEFT JOIN
    customer_entity_varchar AS _table_suffix ON (_table_suffix.entity_id = e.entity_id) AND (_table_suffix.attribute_id = '8')
        LEFT JOIN
    customer_entity_int AS _table_default_billing ON (_table_default_billing.entity_id = e.entity_id) AND (_table_default_billing.attribute_id = '13')
        LEFT JOIN
    customer_address_entity_varchar AS _table_billing_postcode ON (_table_billing_postcode.entity_id = _table_default_billing.value) AND (_table_billing_postcode.attribute_id = '29')
        LEFT JOIN
    customer_address_entity_varchar AS _table_billing_city ON (_table_billing_city.entity_id = _table_default_billing.value) AND (_table_billing_city.attribute_id = '25')
        LEFT JOIN
    customer_address_entity_varchar AS _table_billing_telephone ON (_table_billing_telephone.entity_id = _table_default_billing.value) AND (_table_billing_telephone.attribute_id = '30')
        LEFT JOIN
    customer_address_entity_varchar AS _table_billing_region ON (_table_billing_region.entity_id = _table_default_billing.value) AND (_table_billing_region.attribute_id = '27')
WHERE
    (e.entity_type_id = '1')
ORDER BY CONCAT(IF(_table_prefix.value IS NOT NULL AND _table_prefix.value != '',
            CONCAT(TRIM(_table_prefix.value), ' '),
            ''),
        TRIM(_table_firstname.value),
        IF(_table_middlename.value IS NOT NULL AND _table_middlename.value != '',
            CONCAT(' ', TRIM(_table_middlename.value)),
            ''),
        ' ',
        TRIM(_table_lastname.value),
        IF(_table_suffix.value IS NOT NULL AND _table_suffix.value != '',
            CONCAT(' ', TRIM(_table_suffix.value)),
            '')) desc
LIMIT 20 OFFSET 60 
```

查询显示`EXPLAIN`，注意表 e 上的 Extra，*使用临时和使用文件排序*：

```
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: e
         type: ref
possible_keys: IDX_ENTITY_TYPE
          key: IDX_ENTITY_TYPE
      key_len: 2
          ref: const
         rows: 55556
        Extra: Using temporary; Using filesort
*************************** 2\. row ***************************
           id: 1
  select_type: SIMPLE
        table: _table_prefix
         type: eq_ref
possible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_VARCHAR_ATTRIBUTE,FK_CUSTOMER_VARCHAR_ENTITY,IDX_VALUE
          key: IDX_ATTRIBUTE_VALUE
      key_len: 6
          ref: prod.e.entity_id,const
         rows: 1
        Extra:
*************************** 3\. row ***************************
           id: 1
  select_type: SIMPLE
        table: _table_firstname
         type: eq_ref
possible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_VARCHAR_ATTRIBUTE,FK_CUSTOMER_VARCHAR_ENTITY,IDX_VALUE
          key: IDX_ATTRIBUTE_VALUE
      key_len: 6
          ref: prod.e.entity_id,const
         rows: 1
        Extra:
*************************** 4\. row ***************************
           id: 1
  select_type: SIMPLE
        table: _table_middlename
         type: eq_ref
possible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_VARCHAR_ATTRIBUTE,FK_CUSTOMER_VARCHAR_ENTITY,IDX_VALUE
          key: IDX_ATTRIBUTE_VALUE
      key_len: 6
          ref: prod.e.entity_id,const
         rows: 1
        Extra:
*************************** 5\. row ***************************
           id: 1
  select_type: SIMPLE
        table: _table_lastname
         type: eq_ref
possible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_VARCHAR_ATTRIBUTE,FK_CUSTOMER_VARCHAR_ENTITY,IDX_VALUE
          key: IDX_ATTRIBUTE_VALUE
      key_len: 6
          ref: prod.e.entity_id,const
         rows: 1
        Extra:
*************************** 6\. row ***************************
           id: 1
  select_type: SIMPLE
        table: _table_suffix
         type: eq_ref
possible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_VARCHAR_ATTRIBUTE,FK_CUSTOMER_VARCHAR_ENTITY,IDX_VALUE
          key: IDX_ATTRIBUTE_VALUE
      key_len: 6
          ref: prod.e.entity_id,const
         rows: 1
        Extra:
*************************** 7\. row ***************************
           id: 1
  select_type: SIMPLE
        table: _table_default_billing
         type: eq_ref
possible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_INT_ATTRIBUTE,FK_CUSTOMER_INT_ENTITY,IDX_VALUE
          key: IDX_ATTRIBUTE_VALUE
      key_len: 6
          ref: prod.e.entity_id,const
         rows: 1
        Extra:
*************************** 8\. row ***************************
           id: 1
  select_type: SIMPLE
        table: _table_billing_postcode
         type: eq_ref
possible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_ADDRESS_VARCHAR_ATTRIBUTE,FK_CUSTOMER_ADDRESS_VARCHAR_ENTITY,IDX_VALUE
          key: IDX_ATTRIBUTE_VALUE
      key_len: 6
          ref: prod._table_default_billing.value,const
         rows: 1
        Extra:
*************************** 9\. row ***************************
           id: 1
  select_type: SIMPLE
        table: _table_billing_city
         type: eq_ref
possible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_ADDRESS_VARCHAR_ATTRIBUTE,FK_CUSTOMER_ADDRESS_VARCHAR_ENTITY,IDX_VALUE
          key: IDX_ATTRIBUTE_VALUE
      key_len: 6
          ref: prod._table_default_billing.value,const
         rows: 1
        Extra:
*************************** 10\. row ***************************
           id: 1
  select_type: SIMPLE
        table: _table_billing_telephone
         type: eq_ref
possible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_ADDRESS_VARCHAR_ATTRIBUTE,FK_CUSTOMER_ADDRESS_VARCHAR_ENTITY,IDX_VALUE
          key: IDX_ATTRIBUTE_VALUE
      key_len: 6
          ref: prod._table_default_billing.value,const
         rows: 1
        Extra:
*************************** 11\. row ***************************
           id: 1
  select_type: SIMPLE
        table: _table_billing_region
         type: eq_ref
possible_keys: IDX_ATTRIBUTE_VALUE,FK_CUSTOMER_ADDRESS_VARCHAR_ATTRIBUTE,FK_CUSTOMER_ADDRESS_VARCHAR_ENTITY,IDX_VALUE
          key: IDX_ATTRIBUTE_VALUE
      key_len: 6
          ref: prod._table_default_billing.value,const
         rows: 1
        Extra:
11 rows in set (0.00 sec) 
```

除了 Magento 本身为 1.10.1 提供的默认索引外，没有修改任何索引，请参见此处的 1.5.1 (CE) 结构：http: [//www.magereverse.com/index/magento-sql-structure/version/1- 5-1-0](http://www.magereverse.com/index/magento-sql-structure/version/1-5-1-0)

这是称为 AS e 的别名表。在扫描中：

```
CREATE TABLE `customer_entity` (
    `entity_id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    `entity_type_id` SMALLINT(8) UNSIGNED NOT NULL DEFAULT '0',
    `attribute_set_id` SMALLINT(5) UNSIGNED NOT NULL DEFAULT '0',
    `website_id` SMALLINT(5) UNSIGNED NULL DEFAULT NULL,
    `email` VARCHAR(255) NOT NULL DEFAULT '',
    `group_id` SMALLINT(3) UNSIGNED NOT NULL DEFAULT '0',
    `increment_id` VARCHAR(50) NOT NULL DEFAULT '',
    `store_id` SMALLINT(5) UNSIGNED NULL DEFAULT '0',
    `created_at` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
    `updated_at` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
    `is_active` TINYINT(1) UNSIGNED NOT NULL DEFAULT '1',
    PRIMARY KEY (`entity_id`),
    INDEX `FK_CUSTOMER_ENTITY_STORE` (`store_id`),
    INDEX `IDX_ENTITY_TYPE` (`entity_type_id`),
    INDEX `IDX_AUTH` (`email`, `website_id`),
    INDEX `FK_CUSTOMER_WEBSITE` (`website_id`),
    CONSTRAINT `FK_CUSTOMER_ENTITY_STORE` FOREIGN KEY (`store_id`) REFERENCES `core_store` (`store_id`) ON UPDATE CASCADE ON DELETE SET NULL,
    CONSTRAINT `FK_CUSTOMER_WEBSITE` FOREIGN KEY (`website_id`) REFERENCES `core_website` (`website_id`) ON UPDATE CASCADE ON DELETE SET NULL
) 
```

**所以问题是我怎样才能让这个查询更好地执行而不导致创建和扫描临时表。**

我不确定我可以索引什么来提高查询性能，我不想过多地研究修改 Magento 的 ORM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:50:12.260

我不熟悉 Magento Enterprise，但从 MySQL 的角度来看，我会寻找一种方法来替换它

```
ORDER BY CONCAT(IF(_table_prefix.value IS NOT NULL AND _table_prefix.value != '',
            CONCAT(TRIM(_table_prefix.value), ' '),
            ''),
        TRIM(_table_firstname.value),
        IF(_table_middlename.value IS NOT NULL AND _table_middlename.value != '',
            CONCAT(' ', TRIM(_table_middlename.value)),
            ''),
        ' ',
        TRIM(_table_lastname.value),
        IF(_table_suffix.value IS NOT NULL AND _table_suffix.value != '',
            CONCAT(' ', TRIM(_table_suffix.value)),
            '')) desc 
```

具有预先计算的值`name`。这将消除双重计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:14:00.460

我不再记得可怕的 Magento 表结构了，但如果可能的话，你可以加快这样的事情：

仅选择您需要的每个条目的主 ID（仅执行行消除和排序*所需*的连接）。然后，只使用以前的 ID 进行大连接和值选择。在这种情况下，您似乎可以消除所有地址连接，这应该是一个很大的胜利。

有更少的原始数据来排序，然后在大连接中更少，你将有相当大的速度。在其他系统中，我已经进行了 >100 秒的查询，像这样在 <3 中运行，祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:37:00.973

不确定您的情况是否属实，但是...

如果您使用**_table_prefix.attribute_id**链接表并且它是整数，则删除引号，否则 mysql 将在比较之前将整数字段中的所有值转换为字符串。这将导致文件排序。

```
AND (_table_prefix.attribute_id = '4') 
```

……会变成……

```
AND (_table_prefix.attribute_id = 4) 
```

# iphone - 关闭 MPMoviePlayerViewController 时状态栏一直显示

> ID：13275519
> 
> 赞同：1
> 
> 时间：2012-11-07T18:04:45.590
> 
> 标签：iphone, objective-c

我正在制作一个应用程序，我需要在其中播放相机胶卷中的电影。我正在使用 MPMoviePlayerViewController 做的是，并显示它：

```
[self presentMoviePlayerViewControllerAnimated:theMovie]; 
```

我希望它以全屏模式运行：

```
[theMovie.moviePlayer setControlStyle:MPMovieControlStyleFullscreen]; 
```

这就是问题出现的地方。我不想在启动时显示选项，所以我决定最初将控件样式设置为 MPMovieControlStyleNone。但我仍然希望这些选项可用，所以在四处搜索后我发现了这个选项：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(enterFullScreenMode)
                                                 name:MPMoviePlayerLoadStateDidChangeNotification object:nil]; 
```

在这种方法中，我将控件状态更改为 MPMovieControlStyleFullscreen。这会导致状态栏在我关闭电影并返回到我的父视图控制器后显示在我的应用程序中。我的应用程序根本不使用状态栏。我试过这个：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES]; 
```

它没有用。我应该指出，这个问题只有在我从控制状态 None 开始，然后在电影播放时切换到 Fullscreen 时才会出现，但我需要这样做，因为我不希望选项在启动时出现。我对任何想法持开放态度。请帮我一劳永逸地消除状态栏。

多谢你们 ：）

# django - 如果模板标签不起作用，则在 Django 中过滤

> ID：13275520
> 
> 赞同：0
> 
> 时间：2012-11-07T18:04:58.763
> 
> 标签：django, django-templates, django-template-filters

我几乎完全掌握了 django[文档中的内容](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#filters)

```
{% if things|length > 1 %}

    <div>
        <span>Multiple things were found for this search criteria</span>
        <button>Show All</button>
    </div>
{% endif %} 
```

然而 div 在`things|length`为 0 时显示。

我使用的是 Django 1.3.1，所以我不知道这是否是问题所在——我找不到该信息。至少，它不在 1.4 发行说明中。

到底他妈发生了什么？这是1.3的问题，还是...？

编辑：真的看起来这是在[1.2](https://docs.djangoproject.com/en/dev/releases/1.2/#new-in-1-2-smart-if)中引入的，应该可以工作。那么有什么关系呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:54:51.340

尝试 {% if itineraries.items|length > 1 %} ... {% endif %} 或仅 {% if itineraries %}

# tfs - 是否有在构建控制器中不包含自定义活动的解决方法？

> ID：13275521
> 
> 赞同：1
> 
> 时间：2012-11-07T18:05:09.193
> 
> 标签：tfs, continuous-integration, tfsbuild, custom-activity

我需要一些帮助来开发[TFS build](http://msdn.microsoft.com/en-us/library/bb558974%28v=vs.100%29.aspx)的自定义活动。我已按照博客文章*[自定义 Team Build 2010 – 第 7 部分中的步骤进行操作：如何找到自定义程序集？](http://www.ewaldhofman.nl/post/2010/05/27/Customize-Team-Build-2010-e28093-Part-7-How-is-the-custom-assembly-found.aspx)*.

我已经创建了一个内置到 DLL 文件中并在构建模板中使用的自定义活动。我现在想在 TFS 构建中设置它，但我遇到了一些问题。在博客中，它建议通过构建控制器引用自定义活动 DLL 文件。然而，这对我来说是个问题。我在一家有许多项目并且都使用相同的构建控制器的公司工作。因此，我无权在配置自定义活动的版本控制路径时进行建议的更改。

我还有其他选择吗？还有其他方法可以引用自定义活动吗？也许在构建模板中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:43:29.407

您需要将该程序集放到构建服务器上（构建代理服务器，假设该活动仅在 Run On Agent 活动中使用）。

最方便的选择是简单地将其检入构建控制器指向的构建程序集的 TFS 文件夹中，控制器将自动将其推送到所有构建服务器。

或者，如果您可以直接访问构建代理服务器，您可以手动将程序集安装到 GAC 中的服务器上。

# javascript - 如何使用支持的 API 从 javascript 读取/写入 google 电子表格？

> ID：13275523
> 
> 赞同：5
> 
> 时间：2012-11-07T18:05:19.840
> 
> 标签：javascript, gdata-api, google-spreadsheet-api

我非常困惑如何使用受支持的 API 将 javascript 客户端（非小工具）写入私有 Google 电子表格？让 OAuth2 Drive API 客户端运行起来没有任何困难，但是没有电子表格支持！

[https://developers.google.com/apis-explorer](https://developers.google.com/apis-explorer)

这个问题粗略地要求电子表格 API 出现在该页面上：

[http://code.google.com/p/google-api-javascript-client/issues/detail?id=37](http://code.google.com/p/google-api-javascript-client/issues/detail?id=37)

我可能遗漏了一些明显的东西，所以谢谢你的好意帮助我......

**更新：**

哇，这是在踢我！因此，我将尝试从 Oauth2 工作流中获取 access_token，然后像这样设置 gdata API 授权标头：

```
service = new google.gdata.client.GoogleService('testapp');
service.setHeaders({'Authorization': 'Bearer '+ access_token}); 
```

不幸的是，chrome控制台显示，当我执行类似的操作时，此标头实际上并没有发送给谷歌

```
service.getFeed(url, cb, eb); 
```

嘘！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T07:10:13.237

为了从 Google 电子表格中获取信息，只需向附加了访问令牌的相关链接发送 GET 请求。urlLocation 是通过转到 Google Drive 并在单词“key=”之后复制 url 中的一长串数字和字母来找到的。

在这个例子中我也使用了 jQuery。

代码：

```
var urlLocation = ''; //Put the Spreadsheet location here
var url = 'https://spreadsheets.google.com/feeds/list/' + urlLocation + '/od6/private/full?access_token=' + token;
$.get(url, function(data) {
    console.log(data);
}); 
```

为了获得 JSON 表示，请改用它：

```
var urlLocation = ''; //Same as above
var url = 'https://spreadsheets.google.com/feeds/list/' + urlLocation + '/od6/private/full?alt=json-in-script&access_token=' + token + '&callback=?';
$.getJSON(url, function(data) {
    console.log(data);
}); 
```

# java - 在 Eclipse 中更改未处理的异常自动生成的捕获代码？

> ID：13275525
> 
> 赞同：29
> 
> 时间：2012-11-07T18:05:40.537
> 
> 标签：java, eclipse, code-generation, content-assist

如果我在 Java 中有未处理的异常，Eclipse 会向我提出两个选项：(1) 添加 throws 声明和 (2) 使用 try/catch 包围。

如果我选择 (2) 它会添加一个代码

```
try {
   myfunction();
} catch (MyUnhandledException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我想将其更改为

```
try {
   myfunction();
} catch (MyUnhandledException e) {
    throw new RuntimeException(e);
} 
```

这可能吗？

**更新**

为什么这么爱换话题的人？？？

如果异常被捕获并打印，它也不再需要捕获它。如果我忘记错误地处理异常，我希望我的应用程序崩溃。所以，我喜欢默认重新抛出它。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-07T18:10:06.653

是的，您可以更改 Eclipse 添加的默认代码。

1.  在 Preferences 中，导航到*Java>Code Style>Code Templates*。
2.  在*代码*下，选择*Catch 块体*。
3.  按编辑按钮更改代码。完成后，按 *OK*按钮。

考虑在默认的 catch 块中添加 TODO 注释。例如，默认包括：

```
 // ${todo} Auto-generated catch block 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:10:44.140

就个人而言，我使用了一个通用的习惯用法，而不管实际检查的异常类型如何，您可以让 Eclipse 将其用作模板：

```
try {
 ...
} 
catch (RuntimeException e) { throw e; } 
catch (Exception e) { throw new RuntimeException(e); } 
```

关键是包装整个代码块，而不是单独包装可能引发异常的每一行。该块可能会抛出任意数量的已检查和未检查的异常，这将允许未检查的异常安然无恙地通过，并且已检查的异常将被包装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:08:04.687

如果您从 catch 子句重新抛出异常，则必须在调用当前方法的方法中进行处理。但是，如果您将异常包装在 中`RuntimeException`，则无需处理它。但你为什么要这样做？

我的意思是为什么不只是：-

```
try {
   myfunction();
} catch (MyUnhandledException e) {
    throw e;
} 
```

因为，在您的代码中，基本上您将 a 包装在 a`checked exception`中`unchecked one`。如果我假设你的`MyUnhandledException`as `checked exception`.

还要注意，如果您采用这种方法，您仍然需要`declare it`在`thrown`您的`throws clause`.

如果您只想按照自己的方式做事，那么它也可以正常工作。您可以`Eclipse setting`根据@Andy 的回答更改。

但是，最好看看你的设计。为什么方法被覆盖并抛出未在您的方法中声明的异常`overriden`。应该是有问题，应该改正。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-23T13:39:49.357

您可能已经意识到这一点……但是如果您想摆脱检查异常带来的所有烦人的混乱和烦恼，为什么不添加`throws Exception`到每个方法中呢？

在重写接口方法的情况下，可以使用这种模式：

```
@Override
public void close() throws IOException {
    try {
        _close();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        throw new RuntimeException(e);
    }
}

private void _close() throws Exception {
    // ... closing ops
} 
```

# javascript - 如何让hubot列出当前营火聊天室中的所有用户？

> ID：13275529
> 
> 赞同：4
> 
> 时间：2012-11-07T18:05:47.717
> 
> 标签：javascript, coffeescript, bots, hubot, campfire

我在篝火聊天室里运行了 hubot (https://github.com/github/hubot)。

我正在尝试制作一个脚本来显示聊天室中所有登录的用户。

默认`hubot show users`命令似乎找不到所有已登录的用户。

不工作的伪代码

```
module.exports = (robot) ->    
  robot.respond /users$/i, (msg) ->
    for user in robot.room.users
        msg.respond user.name + "is logged in" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T00:33:50.013

尝试通过[Campfire room API](https://github.com/37signals/campfire-api/blob/master/sections/rooms.md)发送请求，它将列出当前房间内的所有用户。

# c# - 包括 3rd 方代码作为源 vs dll

> ID：13275532
> 
> 赞同：3
> 
> 时间：2012-11-07T18:05:51.900
> 
> 标签：c#

有一个我想使用的 C# 库的 Github 项目。将源作为一个单独的项目包含在我的 Visual Studio 解决方案中并构建 dll 作为常规编译过程的一部分，或者单独构建一个 dll 并将其包含在我的项目参考中是更传统的做法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T18:07:34.577

除非您需要修改源代码，否则请使用 DLL。不要忘记提及许可证和源存储库位置（Github 项目的主页）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:09:11.993

这两个选项同样有效，取决于您需要更改源代码的频率。

> 如果您确实需要更改，`source code`那么您应该将源代码添加到您的项目中，否则只需添加引用即可`dll`节省您的编译时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:08:43.830

我已经看到了这两种方法。

大多数情况下，如果我打算稍微修改它，或者至少我认为我会这样做，我会在解决方案中包含第 3 方代码。

在所有其他情况下，Dll 工作正常。

# database - 每天在 db 表中输入的最大记录数

> ID：13275534
> 
> 赞同：1
> 
> 时间：2012-11-07T18:06:06.463
> 
> 标签：database, oracle, plsql

我想知道如何限制每天输入数据库表的记录数。我正在使用 Oracle 数据库。我基本上希望用户每小时只输入 1 条记录，如果他们尝试超过该记录，则会抛出错误。任何想法的人？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T18:40:18.907

Add two columns to the table: `user_id number, timestamp_hour date` and

```
create unique index user_date(user_id, timestamp_hour) on your_table 
```

And then:

```
insert into table values (your_columns, user_id, trunc(sysdate, 'hh')); 
```

If the user tries to add a second record in the same hour will get an exception.

# iphone - 方法调用更多次

> ID：13275537
> 
> 赞同：0
> 
> 时间：2012-11-07T18:06:32.550
> 
> 标签：iphone, objective-c, ios

很长的问题，但很容易理解，所以请花点时间:)

几周前，我为我的应用创建了一个商店页面。我是应用内购买的新手，并获得了一些网络代码。这是为 1 个对象制作的，所以我决定根据自己的需要编辑代码。一次购买应用程序的专业版，购买 3 次购买 3 种不同数量的硬币。

当我购买硬币时，它可以正常工作，唯一的问题是我第二次购买它会增加我购买的硬币数量的 2 倍，第三次它将增加我购买的硬币数量的 3 倍等等。我希望有人可以看看在我的代码中并告诉我出了什么问题。对于这个主题，我将代码稍微小了一点，并且不会显示所有购买。

```
//the 100 coins button
-(IBAction)savedata100:(id)sender {
        askToPurchase100Munten = [[UIAlertView alloc] 
                         initWithTitle:@"100 Munten" 
                         message:@"Ga verder om 100 Munten te kopen."
                         delegate:self 
                         cancelButtonTitle:nil
                         otherButtonTitles:@"Verder", @"Cancel", nil]; 
        askToPurchase100Munten.delegate = self;
        [askToPurchase100Munten show];
        [askToPurchase100Munten release]; 
```

//下一步

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

else if (alertView==askToPurchase100Munten) {
    if (buttonIndex==0) {
        // user tapped YES, but we need to check if IAP is enabled or not.
        if ([SKPaymentQueue canMakePayments]) { 

            SKProductsRequest *request = [[SKProductsRequest alloc] initWithProductIdentifiers:[NSSet setWithObject:@"100Munten"]];  

            Temp = 2;
            request.delegate = self;  
            [request start];  

        } else {
            UIAlertView *tmp = [[UIAlertView alloc] 
                                initWithTitle:@"Prohibited" 
                                message:@"Parental Control is enabled, cannot make a purchase!"
                                delegate:self 
                                cancelButtonTitle:nil 
                                otherButtonTitles:@"Ok", nil]; 
            [tmp show];
            [tmp release];
        }
    }
} 
```

//下一步

```
-(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:    (SKProductsResponse *)response  
{ 
statusLabel.text = @"";
int count = [response.products count];
}
if (Temp == 2){
    if (count>0) {

        SKProduct *selectedProduct = [response.products objectAtIndex:0];
        SKPayment *payment = [SKPayment paymentWithProduct:selectedProduct];
        [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
        [[SKPaymentQueue defaultQueue] addPayment:payment];

    } else {
        UIAlertView *tmp = [[UIAlertView alloc] 
                            initWithTitle:@"Not Available" 
                            message:@"No products to purchase"
                            delegate:self 
                            cancelButtonTitle:nil 
                            otherButtonTitles:@"Ok", nil]; 
        [tmp show];
        [tmp release];
    }
} 
```

//最后一步这是每次我做的时候被调用的次数越来越多（uiView也弹出更多次）

```
-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions {
for (SKPaymentTransaction *transaction in transactions) {
    switch (transaction.transactionState) {
        case SKPaymentTransactionStatePurchasing:

            // show wait view here
            statusLabel.text = @"Verwerken...";
            break;

        case SKPaymentTransactionStatePurchased:

            [[SKPaymentQueue defaultQueue] finishTransaction:transaction];
            // remove wait view and unlock feature 2

            statusLabel.text = @"Klaar!";

            if (Temp == 2){
                //ADD COINS WHEN PURCHASES IS COMPLETE
                int coinsToAdd = 100;
                 int currentCoins = [[NSUserDefaults standardUserDefaults] integerForKey:@"savedstring"];
                 int savestring =
                 currentCoins + coinsToAdd;
                 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; [defaults setInteger:savestring forKey:@"savedstring"]; [defaults synchronize];
                 [label111 setText:[NSString stringWithFormat:@"Munten: %i",[self getCoins]]];

                //ALERTVIEW TO SHOW YOU PURCHASED COINS
                UIAlertView *tmp2 = [[UIAlertView alloc]
                                    initWithTitle:@"Voltooid" 
                                    message:@"Je hebt 100 Munten Gekocht"
                                    delegate:self 
                                    cancelButtonTitle:nil 
                                    otherButtonTitles:@"Ok", nil]; 
                [tmp2 show];
                [tmp2 release]; 
```

感谢阅读希望有人可以帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:45:25.197

完成交易后，您应该将 transaction.transactionState 设置为 SKPaymentTransactionStatePurchased，否则您将在下一次重复交易。

# vim - 我可以在当前选项卡的左侧打开一个新选项卡吗？

> ID：13275539
> 
> 赞同：18
> 
> 时间：2012-11-07T18:06:40.370
> 
> 标签：vim, tabs, customization

发行`:tabnew somefile`将在当前选项卡*右侧*`somefile`的新选项卡中打开。我能以某种方式让 Vim 打开当前选项卡*左侧的选项卡吗？*

 ****更新**：建议的答案确实允许我在左侧打开一个新选项卡，但它们会破坏文件名自动完成，这是不行的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-08-11T03:08:37.077

从[Vim 7.4.530 (2014) 开始](https://github.com/vim/vim/commit/b96a7f325c9047d6a65424d40e493d3e0eff26b5)，您可以使用负值`[count]`in`:[count]tabnew`打开选项卡。要直接在当前选项卡左侧打开选项卡，请使用：

```
:-1tabnew 
```

文档：[https ://vimhelp.appspot.com/tabpage.txt.html#:tabnew](https://vimhelp.appspot.com/tabpage.txt.html#:tabnew)

```
:[count]tabe[dit]                               :tabe :tabedit :tabnew
:[count]tabnew
                Open a new tab page with an empty window, after the current
                tab page.  If [count] is given the new tab page appears after
                the tab page [count] otherwise the new tab page will appear
                after the current one. 
                    :tabnew     " opens tabpage after the current one
                    :.tabnew    " as above
                    :+tabnew    " opens tabpage after the next tab page
                                " note: it is one further than :tabnew
                    :-tabnew    " opens tabpage before the current one
                    :0tabnew    " opens tabpage before the first one
                    :$tabnew    " opens tabpage after the last one 
```

, ,也可以使用类似的功能`:tabclose`，请参阅上面链接的提交。如果这不起作用，请用于检查您的 Vim 是否是最新的和/或用于检查文档是否与此处引用的文档相似。`:tabonly``:tabmove``:version``:help tabnew`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-07T18:33:32.270

要利用@romainl 描述的行为而不必求助于知道当前标签页号，请使用以下命令：

```
command -nargs=* -bar Tabnew :execute (tabpagenr()-1).'tabnew '.<q-args> 
```

. 注意：它完全可以保存使用`0tabnew`：即使没有数字低于 1 的标签页，它也能达到预期目的并使新标签页成为第一个标签页。

如果你确定你永远不会使用这个命令，`++opt`或者`+cmd`你可以`-complete=file`在`-bar`. 注意：除了它的名称之外，它*不是*一个完成选项，因为它也可以进行文件名扩展（并显示错误以防万一`-nargs=1`和 glob 以太多文件名扩展）。不幸的是，文档中甚至没有提到这种行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-07T18:25:47.990

您可以使用`[count]`. 假设您在标签 #4，`:3tabnew`在当前标签的左侧创建一个新标签。

但请记住，选项卡*始终*创建在当前选项卡或选项卡 # 的右侧`[count]`。实际上意味着“在标签 #3*之后*`:3tabnew`创建一个新标签”。

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T18:33:00.647

您可以编写自己的命令来执行此操作

```
:command -nargs=1 TabnewBefore exec "tabnew <args>" | exec "tabmove -1" 
```

然后使用它

```
:TabnewBefore somefile 
```

如果您希望它成为默认的“tabnew”行为，您可以这样做

```
:ca tabne TabnewBefore 
```

现在，如果您`tabne`在命令行上键入并按空格，它会执行您想要的操作，如果您想要原始行为，请键入完整的命令`tabnew`

您可以将这些定义放入您的 .vimrc 文件中以供将来使用***

# scala - Scala：比较类型

> ID：13275542
> 
> 赞同：2
> 
> 时间：2012-11-07T18:06:51.753
> 
> 标签：scala

我想定义一个可以比较两种类类型的函数。我定义了两个不同的类：

```
abstract class Task
case class DefinedTask(id: Long) extends Task
case class EmptyTask() extends Task 
```

然后我有一个返回类型对象的函数`Task`，它可以是`DefinedTask`或`EmptyTask`。

现在，我想做的是有一个函数来识别这个对象是 a`DefinedTask`还是只是一个`EmptyTask`. 问题很简单，我会使用模式匹配。但我想概括它，因为多个类都采用这种`Defined/Empty`模式。

到目前为止我尝试的是：

```
def makeReturned[T: Manifest, U: Manifest](obj: T)(u: U)(f: T => Value) = 
   if(manifest[U] equals manifest[T]) f(obj) else
     throw new IllegalArgumentException()
}
//call to it
makeReturned(task)(DefinedTask)(makeTask) 
```

`U`总是`DefinedTask`，`T`可能是`DefinedTask or EmptyTask`，但它返回为`Task`.

```
manifest[U].erasure.toString //"class DefinedTask$"
manifest[T].erasure.toString //"class Task" 
```

从编译器的角度来看这是正确的，但它不适合我。所以，我的问题是我怎样才能以一种能给我想要的方式比较它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:29:07.893

看起来您想要运行时检查，而不是编译时检查。所以我认为你的意思是

```
def makeReturned[U <: Task, T <: Task](obj: T)(u: U)(f: T => Value) = {
  if (obj.getClass.isInstance(u.getClass)) f(obj)
  else throw new IllegalArgumentException
} 
```

或类似的东西。查看方法，`java.lang.Class`然后选择可以满足您需求的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:02:01.183

1.  您的代码中有一些错误：
    *   您应该`abstract class Task`为详尽的模式匹配进行密封
    *   不推荐使用空案例类。编译器应该已经警告过你了。`case object EmptyTask extends Task`将是正确的选择
2.  案例类和案例对象都扩展了 trait [`Product`](http://www.scala-lang.org/api/current/scala/Product.html)。您可以通过以下任一方式检查产品是否为空：
    *   `task.productArity == 0`
    *   `task.productIterator.isEmpty`
3.  我认为你最好重新处理你的问题。为什么不直接使用标准`Option`并在其中包含简单的实例`case class Task(id: Int)`？这可能是您所有其他类似实体的一般方法。

# php - 如何使用 xpath 翻译字符串？

> ID：13275545
> 
> 赞同：0
> 
> 时间：2012-11-07T18:07:03.733
> 
> 标签：php, xpath

我有这段代码：

```
$xpath = new DOMXPath($dom);
foreach ($xpath->query("//text()") as $q) {
    foreach(preg_split("/(\r?\n)/", $q->nodeValue) as $line) {
        $str = trim($line);
        $translation = search_in_db_for_translation($str);
        if (!empty($translation) {
            replace string previously found by $translation
        }
    }
} 
```

脚本在 XML 文档中搜索每个字符串，如果数据库中有可用的翻译（对 {"input language string", "input language string"}），它必须替换 DOM 文档中的字符串（在此翻译之后是更多的 DOM 操作）。问题是我无法找到执行此操作的功能。

**编辑**：为了清楚起见，我需要的是一种修改当前行且仅修改当前行的方法（$line var 或 $q->nodeValue）。请参阅 JWiley 的回答和我的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:51:53.313

您可以`translate()`在 XPath 中使用该函数：

```
translate(text(), "oldText", "replacementText") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T19:35:35.917

答案很简单：

```
$xpath = new DOMXPath($dom);
foreach ($xpath->query("//text()") as $q) {
    foreach(preg_split("/(\r?\n)/", $q->nodeValue) as $line) {
        $str = trim($line);
        $translation = search_in_db_for_translation($str);
        if (!empty($translation) {
            $q->nodeValue = $translation;
        }
    }
} 
```

它将替换文本，在此之后我只需要做一个`$dom->saveHTMLFile($out)`以保存 HTML 文件。

# c# - 为 p2p 聊天打开端口

> ID：13275547
> 
> 赞同：1
> 
> 时间：2012-11-07T18:07:22.303
> 
> 标签：c#, visual-studio, port, p2p, firewall

我想在 C# 中使用服务器编写一个 p2p 聊天程序。基本上，当客户端 A 想要向客户端 B 发送消息时，服务器将通知客户端 B 的请求，并打开端口并创建套接字。消息将直接从一个 clint 传输到另一个。

问题：如何在防火墙上打开端口并将其保存在 NAT 中？是否有任何 c# 代码（开源）？

# java - 如何设置 JTable 的宽度

> ID：13275550
> 
> 赞同：7
> 
> 时间：2012-11-07T18:07:23.710
> 
> 标签：java, swing, jtable, jscrollpane

我在 JScrollPane 中有一个 JTable。我希望最小宽度在 600 左右，因为它是一张宽桌子。我尝试在表格、滚动窗格和面板上设置最小尺寸。大小根本没有改变，我错过了什么？很难用谷歌搜索这个，因为出现的只是如何设置列的宽度。

![在此处输入图像描述](../Images/747263d776aa52d67dda5352966673cf.png)

这是代码：

```
class SearchResults extends JPanel {

/**
 * Create the panel.
 */
public SearchResults() {
    setMinimumSize(new Dimension(640, 480));
    String[][] data= new String[][] {
            {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "VIEW BUTTON"},
            {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "VIEW BUTTON"}};
    String[] col = new String[] {
            "Last Name", "First Name", "Middle Initial", "Phone Number", "Email", "Project Title", "Project Description", "Amount", "Date Approved", "Date Completed", "College", "Faculty Mentor Name", "Co Grantee", "Major", "Travel Required", "Travel Purpose", "Travel Cost", "Travel Start Date", "Travel End Date", "View"};

      JTable table = new JTable(data,col);
      table.setMinimumSize(new Dimension(600,200));
      JTableHeader header = table.getTableHeader();
      JScrollPane pane = new JScrollPane(table);
      pane.setMinimumSize(new Dimension(600, 23));
      table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
      add(pane);
}

} 
```

这里是我将它添加到 JFrame 的地方：

```
public class Test extends JFrame
{

    public static void main(String[] args)
    {
        Test test = new Test();
        test.run();
    }

    public Test()
    {
        super("JAVA TEST!");
    }

    private void run()
    {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        SearchResults resultsPanel = new SearchResults();
        resultsPanel.setMinimumSize(new Dimension(600,200));
        add(resultsPanel);
        setSize(800,600);
        setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T18:43:34.147

有几个问题：

*   （正如我的评论中已经提到的）内部面板的 FlowLayout 总是将其子级调整为各自的 prefSize
*   表格的最小/首选项/最大宽度是根据相应列大小的总和计算的
*   一个表是可滚动的，因此发布了它的preferredScrollableViewportSize（这是周围的JScrollPane用来计算它自己的prefSize的大小）
*   prefScrollable 的实现是......缺乏（委婉地说）因为它被硬编码为 400 x 450 （或类似的）

因此，有几个螺丝需要调整（在删除所有 setXXSize 调用之后:)）

*   使面板使用 BorderLayout：如果调整框架大小，scrollPane 将填充整个区域。
*   扩展 JTable 以返回一些对 prefScrollableViewportSize 合理的东西（根据可见列/行的 pref 数量来计算）

在代码中（并使用 SwingX 项目的 JXTable，因为它已经有第二个 api :-)）

```
String[][] data= new String[][] {
        {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "VIEW BUTTON"},
        {null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "VIEW BUTTON"}};
String[] col = new String[] {
        "Last Name", "First Name", "Middle Initial", "Phone Number", 
        "Email", "Project Title", "Project Description", "Amount", 
        "Date Approved", "Date Completed", "College", "Faculty Mentor Name", 
        "Co Grantee", "Major", "Travel Required", "Travel Purpose", 
        "Travel Cost", "Travel Start Date", "Travel End Date", "View"};

 JXTable table = new JXTable(data,col);
 table.setVisibleColumnCount(10);
 table.setHorizontalScrollEnabled(true);
 JScrollPane pane = new JScrollPane(table);
 JComponent comp = new JPanel(new BorderLayout());
 comp.add(pane); 
```

**编辑**

解决 80% 的要求（以及 MigLayout 的一点预告 :-)）

```
// 80% with a minimum of 600 logical pixel:
MigLayout layout = new MigLayout("wrap 2, debug",
        "[600:pref, fill, grow][20%]");
JComponent comp = new JPanel(layout);
comp.add(pane, "spany");
comp.add(new JLabel("just something")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:11:02.113

这东西也有一些问题。使用`setPreferedSize(new Dimension(800,600));`也。这可以解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:42:35.043

布局很重要。像[Netbeans](http://netbeans.org)或[Eclipse](http://www.eclipse.org/downloads/)这样的 IDE通过拖放提供免提布局设计。

一旦您了解[Swing 布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)，您甚至可以通过代码来实现。我在这里提到的几个最常用的布局

```
BorderLayout
BoxLayout
FlowLayout
GridLayout 
```

在您的中，如果您添加`panel.setLayout( new GridLayout(1,1));`，表格将在框架内固定。

此外，您无需扩展`JPanel`或`JFrame`除非您覆盖某些内容或向框架添加更多内容。实践学习。

# .htaccess - htaccess 和 httpd.conf 配置以使 codeigniter 在 ubuntu 12.04 上工作

> ID：13275555
> 
> 赞同：1
> 
> 时间：2012-11-07T18:07:50.187
> 
> 标签：.htaccess, codeigniter, apache2, ubuntu-12.04

我已经安装了 ubuntu 12.04，并且我有运行 php 项目的完整要求（apache、mysql 和 php5）。不在 codeigniter 中的项目运行良好。在 codeigniter 中，当我加载项目时，默认控制器会加载 index_view 但当我单击其他控制器时；他们不会出现错误并显示错误

## 未找到 在此服务器上未找到请求的 URL /academic/login。

我意识到 .htaccess 不起作用；然后 /etc/apache2/httpd.conf 文件为空我想请求 httpd.conf 文件的基本配置示例，以便我的 htaccess 文件可以工作。如果有任何建议可以帮助我得出一些结果，我们将不胜感激。谢谢。我的 httaccess 在下面给出

```
RewriteEngine On
RewriteBase /

### Canonicalize codeigniter URLs

# If your default controller is something other than
# "welcome" you should probably change this
RewriteRule ^(platform(/index)?)/?$ / [L,R=301]
RewriteRule ^(.*)/index/?$ $1 [L,R=301]

# Removes trailing slashes (prevents SEO duplicate content issues)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ $1 [L,R=301]

# Enforce www
# If you have subdomains, you can add them to
# the list using the "|" (OR) regex operator
RewriteCond %{HTTP_HOST} !^(localhost|academic) [NC]
RewriteRule ^(.*)$ http://localhost/academic/$1 [L,R=301]

# Enforce NO www
#RewriteCond %{HTTP_HOST} ^www [NC]
#RewriteRule ^(.*)$ http://domain.tld/$1 [L,R=301]

###

# Removes access to the system folder by users.
# Additionally this will allow you to create a System.php controller,
# previously this would not have been possible.
# 'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php/$1 [L]

# Checks to see if the user is attempting to access a valid file,
# such as an image or css document, if this isn't true it sends the
# request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

```
# Without mod_rewrite, route 404's to the front controller
ErrorDocument 404 /index.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:31:59.307

这个值得信赖的人从来没有对我做错：

```
RewriteEngine On
RewriteBase /academic/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/ [L]
ErrorDocument 404 /index.php 
```

# iphone - 重复滚动视图动画

> ID：13275560
> 
> 赞同：0
> 
> 时间：2012-11-07T18:08:17.153
> 
> 标签：iphone, objective-c, ios, animation, uiscrollview

我已经为我的分页滚动视图设置了一个动画。现在我想问你，如果有人知道如何重复这个动画，因为我的滚动视图的宽度是 960 而不是 320。我试图在网上找到一些关于这个的东西，但最后我没有找到有用的东西。你们有人可以帮我解决这个问题吗？

```
-(void)viewDidAppear:(BOOL)animated {

[UIView animateWithDuration:1.5f animations:^{
    [scrollView setContentOffset:CGPointMake(320, 0)animated:YES];

}];

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:24:44.810

如果你想制作一系列动画，那么

```
for(int i = 0; i < 2; ++i) {
  [UIView animateWithDuration:1.5f animations:^{
      scrollView.contentOffset = CGPointMake(320 + 320*i, 0);    
  }];
} 
```

如果您想制作一次，请使用您想要的 CGPoint 设置 contentOffset ( `CGPointMake(640, 0)`)

当然 contentOffset 定义了一次偏移量，你可以随意使用它。

# php - REST for PHP 5.1.6 与 Backbone 一起使用

> ID：13275563
> 
> 赞同：0
> 
> 时间：2012-11-07T18:08:39.010
> 
> 标签：php, rest, backbone.js

我正在做一个项目，我没有对 linux 服务器的 SSH 访问权限，但只有对 public_html 文件夹的 FTP 访问权限。我对骨干网比较陌生，想利用它的全部功能。但是，服务器运行在：

> PHP 5.1.6 APACHE 2.0 模块：芯的prefork http_core mod_so mod_auth_basic mod_auth_digest的mod_authn_file模块mod_authn_alias mod_authn_anon mod_authn_dbm mod_authn_default mod_authz_host mod_authz_user mod_authz_owner mod_authz_groupfile mod_authz_dbm mod_authz_default util_ldap mod_authnz_ldap模块mod_include负责mod_log_config mod_logio mod_env mod_ext_filter mod_mime_magic模块指定mod_expires mod_deflate模块mod_headers中mod_usertrack mod_setenvif mod_mime mod_dav的mod_status的mod_autoindex mod_info mod_dav_fs可以mod_vhost_alias mod_negotiation模块mod_dir mod_actions mod_speling mod_userdir mod_alias中的mod_rewrite mod_proxy的mod_proxy_balancer的mod_proxy_ftp模块mod_proxy_http mod_proxy_connect mod_cache的mod_suexec mod_disk_cache mod_file_cache mod_mem_cache mod_cgi mod_version mod_ssl mod_jk mod_auth_pgsql mod_authz_ldap mod_nss mod_perl mod_php5 mod_proxy_ajp mod_python mod_dav_svnmod_authz_svn

是否可以通过任何方式在后端实现 REST api？我一直在研究 PHP 中的许多框架，但它们大多需要 > PHP 5.2 任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:58:12.947

一般来说，实现一个 RESTful api 并不一定依赖于特定的软件版本。

[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)本身只是一种方法论，基本上描述了如何使用 http 的协议特性来构建某种 Web 服务。

框架只提供工具来支持快速开发最终符合 RESTful-ness 的 api。

所以，我认为你有两个选择：

1.  寻找支持您的 php 版本的框架。
2.  自己编写 RESTful api。

# zend-framework2 - 如何在 Zend Framework 2 中查看 TableGateway 生成的 db 查询

> ID：13275569
> 
> 赞同：4
> 
> 时间：2012-11-07T18:09:20.693
> 
> 标签：zend-framework2

我是 ZF2 的新手，正在尝试使用 tableGateway 来管理和更新数据库中的条目。我可以毫无问题地选择和更新项目，但插入时出现错误。由于 tableGateway 类动态创建查询，我如何查看查询本身？

```
$this->tableGateway->insert($data); 
```

执行过程中发生错误；请稍后再试。附加信息：Zend\Db\Adapter\Exception\InvalidQueryException

文件：

```
/[redacted]/vendor/zendframework/zendframework/library/Zend/Db/Adapter/Driver/Pdo/Statement.php:220 
```

信息：

```
Statement could not be executed 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T07:11:35.830

只是对@zdenek-machek 的一些通知回答：

1) 要分析数据库查询，[`BjyProfiler`](https://github.com/bjyoungblood/BjyProfiler)还应安装模块。

2）（如果你使用PDO跳过）当我`BjyProfiler`上次使用时，mysqli连接有问题（`buffer_results`选项没有传递给`ProfilingStatement`类）。也许现在修好了，或者我设置的方式不对，但是我的补丁是在BjyProfiler/src/BjyProfiler/Db/Adapter/ProfilingAdapter.php中手动传递这个参数：

```
case 'Zend\Db\Adapter\Driver\Mysqli\Mysqli':
    $statementPrototype = new Driver\Mysqli\ProfilingStatement($this->options['buffer_results']);
    break; 
```

3)`ZendDeveloperTools`显示查询计数，但不列出它们。为了在页面底部列出，我通过以下方式修改了 view/zend-developer-tools/toolbar/toolbar.phtml：

```
<!-- END Zend Developer Toolbar -->
<?php
$queryProfiles = $this->getHelperPluginManager()->getServiceLocator()
    ->get('Zend\Db\Adapter\Adapter')->getProfiler()->getQueryProfiles();

echo '<ol>';
foreach($queryProfiles as $queryObj)
{
    $query = $queryObj->toArray();
    echo '<li>';
    echo '<b>' . ($query['elapsed']*1000) . '</b> ms<br/>';
    echo $query['sql'];
    if(count($query['parameters']))
    {
        echo '<br/><i>Parameters:</i> ';
        $list = array();
        foreach($query['parameters'] as $key => $value)
            $list[] = '?'. $this->escapeHtml($key)
                      ."='". $this->escapeHtml($value) ."'";
        echo implode(', ', $list);
    }
    echo '</li>';
}
echo '</ol>'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-29T17:30:10.903

就我而言，我只是在 try catch 中介绍了这一点： $e->__toString() 是关键

```
try {
    this->tableGateway->insert($data);
} catch (\Exception $e) {
    \Zend\Debug\Debug::dump($e->__toString()); exit;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T23:20:28.673

如何查看数据库查询的非常优雅的方法是使用 zend-developer-tools。

最简单的使用方法是通过将模块添加到 composer.json 文件来安装模块

`..... "repositories": [ { "type": "composer", "url": "http://packages.zendframework.com/" } ], "require": { "php": ">=5.3.3", "zendframework/zend-developer-tools": "dev-master" }`

[见文档](https://github.com/zendframework/ZendDeveloperTools)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-21T19:21:30.047

对于我想要在 Dev 中做的事情，即确切知道哪些查询与我的流程中的每个步骤相关联，这就是我所做的（将 PDO 与 MySQL / MariaDB 一起使用）：

1.  我去了Statement课（`vendor/zendframework/zendframework/library/Zend/Db/Adapter/Driver/Pdo/Statement.php`）

2.  我去了执行方法，就在它执行之前，我放了：

    ```
    ...
    error_log("DebugQ: ".print_r($this->getSql(),1).", ".print_r($this->getParameterContainer()->getNamedArray(),1));
    try {
        $this->resource->execute();
    }
    ... 
    ```

我想要一个快速且一次性的解决方案，将查询记录在错误日志中。我能够获得所有查询及其条件。

# mootools - mootools fx 在 ie9 中除外

> ID：13275571
> 
> 赞同：1
> 
> 时间：2012-11-07T18:09:27.433
> 
> 标签：mootools

这是我第一次尝试使用 Mootools，所以我欢迎对代码提出批评。

我有一个动态图像列表，这些图像在“点击”事件上展开并在“mouseout”事件上收缩。代码在所有浏览器（FF、Safari、Chrome，甚至智能手机）中都可以正常工作，但在 IE9 中却不行（JS 已启用)

有类似问题或解决方案的人吗？

我打算使用灯箱效果，将更大更清晰的图像下载到页面中心，而不是仅仅调整小图像的大小。但是，如果 IE9 有问题，我会犹豫是否尝试这样做。

我已经使用上传提交编码了三种图像大小，因此灯箱可以使用较大的图像，但是，我在 mootools 中没有看到灯箱的任何内容，或者我错过了它？

```
$i = 0;
while($i < count($validate)) {
    <div class="validate">
        <div class="validate_image_<?php echo $validate[$i]['validate_type']; ?>">
            <div class="validate_image" id="validate_image_wrapper_<?php echo $i; ?>">
                <?php 
                if ($validate[$i]['validate_image_filename'] != '') {
                    if (file_exists(UPLOAD_DIR . 'validate_image/' . str_replace('.', '_medium.', $validate[$i]['validate_image_filename']))) {
                        echo '<img src="' . UPLOAD_URL . 'validate_image/' . str_replace('.', '_medium.', $validate[$i]['validate_image_filename']) . '" alt="Listing Image" />';
                } else {

                        echo '<img src="' . UPLOAD_URL . 'validate_image/' . str_replace('.', '_large.', $validate[$i]['validate_image_filename']) .  '" alt="Listing image"  />';
                }

            } else {
               ?>   
               <img src="/images/no_image_posted_validate.png" alt="no image posted"  />
               <?php
            }
            ?>
        </div>

  ... remainder of HTML display code 

function setupEnlargeImage() {
    window.myFx = new Fx({
            duration: 200,
            transition: Fx.Transitions.Sine.easeOut
    });

    $$('.validate_image').addEvent('click', function() {
         window.selectedImage = this.id;
         myFx.start(1,2.0);
    });

    $$('.validate_image').addEvent('mouseout', function() {
        window.selectedImage = this.id;
        myFx.start(1.0,1);
    });

    myFx.set = function(value) {
        var style = "scale(" + (value) + ")";
        $(window.selectedImage).setStyles({
            "-webkit-transform": style,
            "-moz-transform": style,
            "-o-transform": style,
            "-ms-transform": style,
            transform: style
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T22:57:35.367

好吧，IE9 没有解决方案，但是我去 Slimbox 获取图像，它在 IE9 中运行良好。

所以，这个问题是封闭的。

# c# - 如何使用 HTMLAgilityPack 下载 CSV 文件？

> ID：13275576
> 
> 赞同：0
> 
> 时间：2012-11-07T18:09:45.143
> 
> 标签：c#, asp.net, vb.net, html-agility-pack

我有访问网站的代码，使用隐藏字段和 cookie 登录并包含浏览器标题，以便我以普通用户的身份出现。

现在我在受保护的内容中，我需要下载一个我在使用 HTMLAgilityPack 的文档中找到的 csv 文件。

我想用 HTMLAgilityPack 获取 csv，以便我可以继续使用已设置的 cookie 和浏览器用户代理字符串。

根据我阅读的内容，HTMLAgilityPack 解析了 dom。我希望 csv 文件会导致错误并返回 null。但是我已经看到了能够在解析之前获取请求的页面/文件的原始数据的模糊参考。如果是这样，那将是解决方案，但我找不到如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:56:10.033

您根本不需要使用 HtmlAgilityPack，假设您提交的 HTML 表单是不变的。只需手动制作 HTTP 请求并提交，然后使用 HttpWebRequest 下载相应的 CSV 文件。

HtmlAgilityPack 仅用于处理您已经拥有的 HTML。它确实包括发出基本 HTTP 请求的能力，但这是一个方便的功能。通常，您应该尽可能使用 HttpWebRequest。

# c++ - 在 LLVM 中的两个块之间插入一个块

> ID：13275577
> 
> 赞同：3
> 
> 时间：2012-11-07T18:09:52.583
> 
> 标签：c++, c, compiler-construction, llvm

我想在 LLVM 的两个基本块之间插入一个块。因此，例如，如果一个基本块 A 正在跳转到基本块 B，我想在它们之间插入一个基本块 C，以便 A 跳转到 C，C 跳转到 B。我该怎么做？我确实有一个基本想法，我需要更改基本块 A 的终止指令，以便目标 B 被 C 替换，但是我如何继续在其间添加新的基本块 C？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T07:37:52.890

是的，您需要更改（或替换）基本块 A 的终止指令 - 例如，如果它是一个分支，您可以使用`BranchInst::setSuccessor()`. 然后，您创建基本块 C 并确保其终止指令跳转到 B，这将使其介于两者之间。

你需要做的就是改变终结者的目标——你不需要重新排列内存中的块顺序或类似的东西。

但是，您必须知道，您需要担心两个特殊指令 - phi 节点和着陆台。

*   Phi 节点仅指块的直接前任。这意味着如果在 A 和 B 之间插入 C，则必须通过删除它们或使它们引用 C 而不是 A 来修复 B 中的所有 phi 节点。

*   如果 B 是一个landingpad 块（包含一个landingpad 指令），只有从invoke 指令的展开目标直接跳转到它才是合法的。如果从 A 到 B 的跳跃是通过展开目标，则不能在中间添加基本块，除非您将 C 本身变成一个着陆区并从 B 上移除着陆区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-08T22:34:25.280

有一个函数叫做`llvm::splitEdge`. 它完全符合问题的要求。

# java - jpa的辅助表上是否可以有鉴别器列

> ID：13275578
> 
> 赞同：5
> 
> 时间：2012-11-07T18:10:00.507
> 
> 标签：java, jpa-2.0, eclipselink

我目前正在努力将现有的数据库模式映射到 jpa 实体，并且在很多奇怪的情况下，我已经陷入了这个问题。

我有两个表，类似于：

```
Table 1          Table 2         
|Service     |  |Servicetype     |
|servicetype |  |Servicecategory |
|            |  |                | 
```

其中`servicetype`表 1 是表 2 中服务类型的外键。但是，表 1 中的服务根据它们所属的类别具有截然不同的行为（虽然有 100 多种服务类型，但只有 4 个类别）我希望能够将表 1 映射到四个不同的实体类，基于其服务类型的类别。

这是我到目前为止所拥有的：

```
@Entity
@Table(name = "table1")
@DiscriminatorColumn(name = "servicecategory", discriminatorType =         
     discriminatorType.INTEGER)
@DiscriminatorValue("1")
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@SecondaryTable(name = "table2",
pkJoinColumns =
 @PrimaryKeyJoinColumn(name = "servicetype", referencedColumnName = 
"servicetype"))
public class AbstractService implements Serializable {
...etc 
```

并且从这个扩展了 4 个类，但是有一个不同的`discriminatorvalue`，这是行不通的，因为我正在使用的 eclipselink 试图在 table1 中查找 servicecategory 的值。

是否可以用 jpa 表达这样的映射，或者我应该只`where servicecategory = ?`在每个查询上用 " " 进行映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:55:04.207

请在 EclipseLink 中提交增强以添加对此功能的支持。JPA 解决方案是用辅助表切换主表 - 这可能会导致插入顺序出现问题，并且外键将引用 table2 中的服务类型。

一个 EclipseLink 特定的解决方案是使用定制器来更改用于描述符字段的表。将@Customizer 标记添加到实体并指定具有方法的类：

```
public void customize(ClassDescriptor descriptor) {
    descriptor.getInheritancePolicy().getClassIndicatorField().setTable(
        descriptor.getTable("table2"));
} 
```

# couchdb - 使用 PHPillow 连接到 Cloudant (CouchDB)

> ID：13275582
> 
> 赞同：2
> 
> 时间：2012-11-07T18:10:34.327
> 
> 标签：couchdb, cloudant

PHPillow 使用此方法创建连接：

```
phpillowConnection::createInstance(HOST, PORT_NUMBER, USERNAME, PASSWORD); 
```

但是，我将 Cloudant 用作 CouchDB 服务，因此我需要以稍微不同的方式进行连接（使用 CURL）：

```
curl https://username:password@username.cloudant.com/_all_dbs 
```

有人对这个有经验么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T16:41:42.257

连接到 Cloudant 就像连接到 CouchDB 一样，所以 PHPillow 的连接方法中的变量 -- `HOST`、`PORT_NUMBER`、`USERNAME`和`PASSWORD`-- 工作如下：

*   `HOST`: [用户名].cloudant.com
*   `PORT_NUMBER`：443（安全 HTTP aka HTTPS 的默认值）
*   `USERNAME`：您的 Cloudant 用户名或 API 密钥
*   `PASSWORD`：您的 Cloudant 密码或 API 密码

因此，使用 PHPillow 与名为*fakeuser*且密码为*fakepassword*的帐户连接将如下所示

```
phpillowConnection::createInstance("fakeuser.cloudant.com", 443, "fakeuser", "fakepassword"); 
```

那有意义吗？

# c++ - C++ 纯虚 const 成员函数

> ID：13275583
> 
> 赞同：47
> 
> 时间：2012-11-07T18:10:34.483
> 
> 标签：c++

如何声明一个也是 const 的纯虚成员函数？我可以这样做吗？

```
virtual void print() = 0 const; 
```

还是这样？

```
virtual const void print() = 0; 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-11-07T18:12:37.833

从[微软文档](https://docs.microsoft.com/en-us/cpp/cpp/const-cpp#const-member-functions)：

> 要声明一个常量成员函数，请将`const`关键字放在参数列表的右括号之后。

所以应该是：

```
virtual void print() const = 0; 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-07T18:19:51.740

只有`virtual void print() const = 0`形式是可以接受的。看看 C++03 §9/2 中的语法规范：

> *member-declarator* :
>     *声明符 纯说明符[opt]*
>     *声明符 常量初始化器[opt]*
>     *标识符[opt]* `:` *常量表达式*
> 
> *纯说明符：*
>     `= 0`

这`const`是*声明*符的一部分——它是*直接声明*符中的*cv-qualifier-seq[选项]*（第 8/4 节）：

 *> *declarator* :
>     *直接声明*
>     *符 ptr-operator* *declarator*
> 
> *direct-declarator* :
>     *declarator-id*
>     *direct-declarator* `(` *parameter-declaration-clause* `)` *cv-qualifier-seq [opt] exception-specification [opt]*
>      *direct-declarator* `[` *constant-expression [opt]* `]`
>     `(` *declarator* `)`

因此，`= 0`必须在 之后`const`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-07T18:12:14.417

当然可以。正确的语法是：

```
virtual void print() const = 0; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-07T18:12:47.053

尝试这个：-

```
 virtual void print()  const = 0; 
```*

# silverlight - Silverlight 应用程序内存不足

> ID：13275592
> 
> 赞同：4
> 
> 时间：2012-11-07T18:10:55.573
> 
> 标签：silverlight, memory

我正在开发一个可能使用大量内存（最多 1 GB）的 Silverlight 应用程序。但是，当总内存超过大约 800 MB 时，我遇到了内存不足错误。我已经测试了最新版本的 Firefox 和 IE。我假设当总内存小于最大值的 1/2（32 位进程为 2 GB）时，我不应该遇到此错误。如果有人能对这个问题有所了解，将不胜感激。减少内存使用或使用 64 位浏览器目前不是一个选项。

# wordpress - 顶级菜单按钮“插件”的代码在哪里

> ID：13275597
> 
> 赞同：0
> 
> 时间：2012-11-07T18:11:05.123
> 
> 标签：wordpress

在管理页面的左侧有所有顶级菜单按钮，例如用户和设置。

我想制作我自己的插件页面，它比自定义页面更深入，但我需要查看 wordpress 内部的源代码。

wordpress 3.4.1 中插件页面的文件在哪里？（最新版本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:56:20.113

我认为这就是你要找的：

从 WordPress 根目录：/wp-admin/plugins.php

# javascript - 我无法从 Filezilla 在 Windows 中打开 JS 文件

> ID：13275598
> 
> 赞同：8
> 
> 时间：2012-11-07T18:11:05.497
> 
> 标签：javascript, asp.net, ftp

我从 Filezilla 登录到我的 FTP 并尝试打开一个 JS 文件，它给了我以下错误：

```
Script:    C:/.../slider.js
Line:      1
Char:      1
Error:     'document' is undefined
Code:      800A1391
Source:    Microsoft JScript runtime error 
```

我也有 jQuery 链接到 .php 文件......'document'来自：

```
$(document).ready(function() {
    //Code is here...
}); 
```

我尝试下载文件并打开它，我尝试删除 $(document).ready();，我尝试删除 jquery（顺便说一下，当我打开 jQuery 文件时，它给了我几乎相同的错误）。任何帮助表示赞赏。谢谢！

编辑：

这篇文章的标签之一是“asp.net”，但说实话我什至不知道它是否与 asp.net 相关......

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-04T15:03:05.783

我遇到了同样的问题，并通过在 Filezilla 中执行以下操作来修复它：

1.  转到编辑 > 设置
2.  转到“文件编辑”部分
3.  在“默认编辑器”下：确保选择 Notepad++ 作为您的自定义编辑器
4.  将单选按钮从“使用文件类型关联（如果可用）”更改为“始终使用默认编辑器”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T18:46:14.007

你说你是`right clicking and clicking "View/Edit"`，它会抛出那个错误。

发生错误是因为 Windows 正在执行脚本，并且脚本有问题（因为它依赖于正在加载的另一个脚本）。

因此，尽管您可能正在单击“查看/编辑”，并期望这将在 Notepad++ 中打开文件，但实际上它所做的是假设“查看”意味着“运行脚本”。

显然，Notepad++ 不是这种文件类型的默认操作，或者至少不是 Filezilla 的默认操作。也许默认操作实际上并未按照您的想法设置，或者可能是 Filezilla 不尊重您的默认操作。

解决方案：

*   如果 Filezilla 有一个选项“打开方式...”，允许您选择程序来打开文件，然后使用它并手动选择 Notepad++。更好的是，如果它可以选择将其设为默认值，然后勾选它，问题应该会得到永久解决。

*   或者，只需将文件下载到本地计算机，然后再尝试打开它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T18:44:35.473

我通过执行以下操作在 FileZilla 中工作：-

1.  编辑 -> 设置
2.  文件编辑 -> 使用自定义编辑器 [notepad ++ 的文件路径]*然后*
3.  |___文件编辑 -> 文件类型关联
4.  添加行 -> js "C:\Program Files (x86)\Notepad++\notepad++.exe"
5.  单击确定以保存更改

这将阻止 Windows 脚本主机尝试运行该文件并在 notepad++ 中打开。

虽然之前在帖子中已经有效地确定了这个问题，但我希望有人发现这个“操作方法”有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T18:42:23.710

这不是编程问题。这是一个文件关联问题 - Windows 正在尝试执行您的 .js 文件，而不是在编辑器中打开它。

在 SuperUser 上看到这个问题：[running-javascript-files-js](https://superuser.com/questions/276614/running-javascript-files-js)

[这里](http://www.highdots.com/forums/javascript/cant-open-js-file-w-260305.html)也有一些错误的解释。

再次检查您的文件关联。尝试重新启动您的机器。如果您在 SuperUser 上提出此类问题，您将获得更多帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-23T06:14:51.200

添加文件关联后，它对我有用。

*   编辑 -> 设置
*   文件编辑 -> 选择*使用文件类型关联（如果可用*）复选框。
*   选择文件类型关联 -> 在此处添加关联
    **js "C:\Program Files\Sublime Text 3\sublime_text.exe"**
*   OK
    *注意：根据您的文本编辑器应用程序更改关联。*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-24T10:48:40.360

只需按照以下步骤操作。这是一件容易的事。更改打开 js 文件的默认文件类型。

1.  编辑 -> 设置
2.  文件编辑 -> 文件类型关联
3.  添加行 -> js "C:\Program Files(x86)\Notepad++\notepad++.exe"

就是这样。最后，单击确定保存更改。它会在之后工作。

# javascript - jquery tablesort 不会显示对话框，更新缓存，排序然后关闭对话框

> ID：13275599
> 
> 赞同：1
> 
> 时间：2012-11-07T18:11:07.120
> 
> 标签：javascript, jquery, tablesorter

我在我的桌子上使用来自[http://mottie.github.com的 jquery 插件 tablesort。](http://mottie.github.com)发生的事情是

*   您单击标题单元格
*   一个 jquery ui 对话框显示正在加载
*   当数据通过用户输入更改时，表缓存使用​​更新事件进行更新
*   排序发生
*   然后对话框被删除

问题是对话框并非总是打开或不会关闭，如果我在事件 sortStart 和 sortEnd 中打开对话框，则它会打开和关闭两次，但它会等待打开，直到更新事件完成。

如果我使用警报效果会更好，但这不是我想要的，我需要一个对话框。

底线是我需要使用更新事件和对话框.....你能帮忙..我的概念代码在下面..谢谢

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="Default.aspx.vb" Inherits="_Default" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="js/jquery.tablesorter.min.js"></script>
    <link href="css/smoothness/jquery-ui-1.9.1.custom.min.css" rel="stylesheet" />
    <script src="js/jquery-ui-1.9.1.custom.min.js"></script>

    <script type="text/javascript">

        $(function () {
            //add table sort
            $("#myTable").tablesorter();

            // bind to sort events begin
            $("#myTable").bind("sortBegin", function (e, table) {

                $('<div id="myDialog">loading</div>').dialog();

                $("#myTable").trigger("update"); // update table cache
                //alert('open');
            })

            $("#myTable").bind("updateComplete", function (e, table) {
                //alert("updateComplete")
            });

            $("#myTable").bind("sortStart", function (e, table) {
                //alert("sortStart")
            });

            $("#myTable").bind("sortEnd", function (e, table) {
                //alert("sortEnd")
                $('#myDialog').dialog("close");

            });

        });

    </script>

</head>
<body>
    <form id="form1" runat="server">
    <div>

        <table id="myTable" class="tablesorter"> 
  <thead> 
    <tr> 
      <th>Last Name</th> 
      <th>First Name</th> 
      <th>Email</th> 
      <th>Due</th> 
      <th>Web Site</th> 
    </tr> 
  </thead> 
  <tbody> 

    <tr> 
      <td>Smith</td> 
      <td>John</td> 

         <td>jsmith@gmail.com</td> 
          <td>$50.00</td> 
          <td>http://www.jsmith.com</td> 
        </tr> 

<!-- this is here to simulate loads of extra rows -->
          <% For index = 1 To 100

                  Response.Write("<tr><td>Doe</td><td>Jason</td><td>jdoe@hotmail.com</td><td>$100.00</td><td>http://www.jdoe.com</td></tr> ")

              Next
              %>

        <tr> 
          <td>Conway</td> 
      <td>Tim</td> 
      <td>tconway@earthlink.net</td> 
      <td>$50.00</td> 
      <td>http://www.timconway.com</td> 
    </tr> 
  </tbody> 
</table>

    </div>
    </form>
</body>
</html> 
```

# .net-4.0 - .NET 4.5 应用需要 .NET 4.0

> ID：13275601
> 
> 赞同：0
> 
> 时间：2012-11-07T18:11:14.763
> 
> 标签：.net-4.0, installshield, .net-4.5

这是一个两部分的问题。我需要解决这两个部分以获得完整的答案。

**第一部分**

我有一个 .NET 4.5 桌面应用程序，我想知道是否可以将它部署到 Windows XP，如果在应用程序的 Installshield 项目的“要求”中，我勾选“已安装 .NET 4.0 完整包”复选框而不是“ .NET 4.5 完整包已安装”一。

[我在这里](http://www.west-wind.com/weblog/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40)读到：

> 您可以为 .NET 4.5 编译应用程序并在 4.0 运行时上运行它——直到您遇到 4.0 上不存在的新功能。此时应用程序会在运行时爆炸。假设您编写了一些主要是 .NET 4.0 的代码，但只有一些 .NET 4.5 的新功能，例如 aync/await 深埋在应用程序的内部，它只是偶尔触发。.NET 将愉快地启动您的应用程序并正常运行所有 4.0 代码，直到它遇到 4.5 代码——然后在运行时毫不客气地崩溃。

所以我知道我的应用程序在带有 .NET 4.0 的 Windows XP 上运行的能力取决于什么。对于这个问题，我们假设我的应用不会像上面引用的那样崩溃。

**第二部分**

我还需要知道在将应用程序安装到安装了 .NET 4.5 而不是 .NET 4.0 的机器上时，选择“.NET 4.0 Full Package is Installed”而不是“.NET 4.5 Full Package is Installed”会有什么影响。Installshield 安装程序会将已安装的 .NET 4.5 包视为 .NET 4.0 并因此不会抱怨吗？还是会因为没有安装 .NET 4.0 而变得挑剔并阻止应用程序的安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:40:54.823

您需要做的第一件事是将项目的目标框架版本从 4.5 更改为 4.0 并重新构建。如果您使用任何 4.5 特定功能，那么您现在会发现。您需要修复错误。

第 2 部分没有问题，.NET 4.5 是 .NET 4.0 的*替代品*。安装程序不会先卸载 4.5，因此它可以安装 4.0，这会破坏该机器上所有现有的 .NET 应用程序。

# pydev - 编辑站点包中的代码时会收到警告吗？

> ID：13275603
> 
> 赞同：2
> 
> 时间：2012-11-07T18:11:23.747
> 
> 标签：pydev

使用 pydev 进行调试时，我经常会在我的站点包目录中看到一个文件编辑器窗口。这可能会导致工作丢失，经过`python setup.py install`思考我在工作目录中进行了更改。

编辑站点包中的文件时是否可以让 pydev 警告我？

# python - 如何将 pySNMP 中的 setCmd 用于表元素？

> ID：13275604
> 
> 赞同：0
> 
> 时间：2012-11-07T18:11:26.527
> 
> 标签：python, pysnmp

我根据文档尝试了各种方法，但我无法弄清楚如何在动态表中设置 MIB。我有设置标量值并且工作正常的代码。我知道我必须`createAndGo(4)`在 RowStatus 上设置一个值，然后将其设置为`active(1)`. 这是我尝试过的和 MIB 定义：

```
 abcTable = MibTable((1, 3, 6, 1, 4, 1, 6367, 3, 21, 4))
    abcEntry = MibTableRow((1, 3, 6, 1, 4, 1, 6367, 3, 21, 4, 1)).setIndexNames((0, "abc-mib", "abcEntryNum"))
    abcRowStatus = MibTableColumn((1, 3, 6, 1, 4, 1, 6367, 3, 21, 4, 1, 1),        RowStatus()).setMaxAccess("readcreate")
    abcEntryNum = MibTableColumn((1, 3, 6, 1, 4, 1, 6367, 3, 21, 4, 1, 2), Integer32().subtype(subtypeSpec=constraint.ValueRangeConstraint(1, 10))).setMaxAccess("noaccess")
    abcName = MibTableColumn((1, 3, 6, 1, 4, 1, 6367, 3, 21, 4, 1, 3), DisplayString().subtype(subtypeSpec=constraint.ValueSizeConstraint(0, 30))).setMaxAccess("readcreate")
    abcType = MibTableColumn((1, 3, 6, 1, 4, 1, 6367, 3, 21, 4, 1, 4), Integer().subtype(subtypeSpec=constraint.SingleValueConstraint(0,2,3,1,)).subtype(namedValues=namedval.NamedValues(("aa", 0), ("ab", 1), ("cb", 2), ("ca", 3), )).clone(0)).setMaxAccess("readcreate")
    abcLocation = MibTableColumn((1, 3, 6, 1, 4, 1, 6367, 3, 21, 4, 1, 5), Integer32().subtype(subtypeSpec=constraint.ValueRangeConstraint(-1800, 1800))).setMaxAccess("readcreate")

    def getvar(self, symbol):
        """Used to get the dot notation string from the symbol in the MIB"""
        varObj, = self.mibBuilder.importSymbols('abc-mib', symbol)
        return varObj.getName()

    # Create the first Row
    errorIndication, errorStatus, errorIndex, varBinds = cmdgen.CommandGenerator().setCmd( \
        self.authData,
        cmdgen.UdpTransportTarget((host_addr, 161)),
        (getvar('abcRowStatus') + (1,), 4)  ) 
```

我收到以下错误：

> 消息文件名行位置回溯
> set_single abc.py
> setCmd build\bdist.win32\egg\pysnmp\entity\rfc3413\oneliner\cmdgen.py 374
> setCmd build\bdist.win32\egg\pysnmp\entity\rfc3413\oneliner\cmdgen. py 240
> AttributeError：MibIdentifier 实例没有属性“getSyntax”

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T21:01:44.313

您似乎指的是由 OID "abcRowStatus" + 1 标识的 MIB 对象。那是

```
(1, 3, 6, 1, 4, 1, 6367, 3, 21, 4, 1, 1,  1) 
```

该对象是否真的在您的 MIB 中定义？

由于您没有指定值的 SNMP 类型（传递 Python 整数），因此 setCmd() 要构建正确的请求消息，它必须将纯 Python 类型（代码中的整数）转换为 SNMP 类型。要确定 SNMP 类型，它会查找名为“abcRowStatus”的 MIB 对象，获取其 OID 并根据您的要求附加一个“1”子 OID。然后它通过该 OID 查找 MIB 对象，如果找到，则采用与其关联的 SNMP 类型以进行进一步转换。

所以，我想你的代码应该是这样的：

```
cmdgen.CommandGenerator().setCmd(
    self.authData,
    cmdgen.UdpTransportTarget((host_addr, 161)),
    (getvar('abcRowStatus'), 4)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:58:53.613

似乎@pooh 是正确的，因为类型是问题所在。我按原样使用了 getvar 函数，但只是添加了正确的类型（rfc1902.Integer(4)）并且它可以工作。我认为您也可以使用 MibVariable('abc-mib, 'abcRowStatus', 1).addMibSource(/path) 但我没有尝试过。表索引有点混乱，这就是为什么我坚持使用 getvar + (1,) 索引表的原因。我相信查看其他示例，我相信在多级表中使用 MibVariable 的方法是 MibVariable('abc-mib, 'abcRowStatus', '1.2.3') 其中 '1.2.3' 是索引多级列元素。

# java - 我可以从 JMouseClicked 运行 TableRowSorter 吗？他使用的排序算法是什么

> ID：13275605
> 
> 赞同：0
> 
> 时间：2012-11-07T18:11:30.160
> 
> 标签：java, sorting, jtable

首先，我想知道是否可以使用 JMouseClicking 'By Clicking a Button' 运行 TableRowSorter 'Or getRowSorter' ???

第二个，'TableRowSorter' 中使用的排序算法是什么？...是快速排序还是堆排序？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:22:56.870

您可能会在 oracle 文档中找到一些有用的提示（如何使用表格）

[http://docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

[http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableSorterDemoProject/src/components/TableSorter.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableSorterDemoProject/src/components/TableSorter.java)

以上可能会解决您的部分问题。

# mongodb - $elemMatch mongo 中的差异

> ID：13275607
> 
> 赞同：1
> 
> 时间：2012-11-07T18:11:34.963
> 
> 标签：mongodb

在涉及 $elemMatch 操作时，我发现 2.0.7 和 2.2.0 之间存在一些差异。

**在 2.2.0 中，我确实通过以下查询返回了结果：**

```
db.testColl.find( { "metadata" : {$elemMatch : {$gt : {age:23}, $lt : {age:99}} }}); 
```

**在 2.0.7 中，我没有得到任何结果。**

出于测试目的，我的 testColl 集合中只有一个文档：

```
{
    "_id" : ObjectId("4fb2974cbedb4a626109b002"),
    "metadata" : [
        {
            "age" : 59
        },
        {
            "gender" : "FEMALE"
        }
    ]
} 
```

有谁知道为什么这在 2.2.0 中有效，但在 2.0.7 中无效？

根据这个：

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24elemMatch](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24elemMatch)

v1.4+ 支持 elemMatch

谢谢，盖伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T01:30:13.740

如果您正在寻找一种适用于两个版本的方法，则无需在`$elemMatch`此处使用，因为您只与单个字段进行比较，因此您可以使用更简单的查询。试试这个：

```
db.testColl.find({ 'metadata.age': { $gt: 23, $lt: 99 }}); 
```

# javascript - iframe 中的可变高度

> ID：13275608
> 
> 赞同：2
> 
> 时间：2012-11-07T18:11:39.410
> 
> 标签：javascript, jquery, iframe, height

> **可能重复：**
> [如何自动调整 iFrame 的大小？](https://stackoverflow.com/questions/247128/how-to-auto-size-an-iframe)

事情是这样的，我有一个包含很多链接的菜单，这些链接有一个 iframe 作为目标。

在 iframe 中加载的页面有多个高度，所以我想获取在 iframe 中加载的页面的高度并将其应用于 iframe。

我在网上尝试了一些带有 jquery 和纯 javascript 的代码，但没有一个有效。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:17:20.870

如果页面在同一个域上，那么您可以计算 iframe 文档的高度，并根据高度设置 iframe 的高度。

```
$("iframe").load(
          function(){
          $(this).height($(this).contents().height() );
          }
       ); 
```

# android - 数字格式异常android

> ID：13275610
> 
> 赞同：-1
> 
> 时间：2012-11-07T18:11:44.293
> 
> 标签：android

在我的程序中，当我尝试计算而不给编辑文本框提供数值时程序崩溃。如果我给出值，应用程序可以正常工作。当它崩溃时，我在日志猫中得到以下错误

```
11-07 23:18:51.253: E/AndroidRuntime(450): FATAL EXCEPTION: main
11-07 23:18:51.253: E/AndroidRuntime(450): java.lang.NumberFormatException: 
11-07 23:18:51.253: E/AndroidRuntime(450):  at org.apache.harmony.luni.util.FloatingPointParser.parseDouble(FloatingPointParser.java:267)
11-07 23:18:51.253: E/AndroidRuntime(450):  at java.lang.Double.parseDouble(Double.java:318)
11-07 23:18:51.253: E/AndroidRuntime(450):  at com.xxx.xxx.Page1SubActivity$2.onClick(Page1SubActivity.java:77)
11-07 23:18:51.253: E/AndroidRuntime(450):  at android.view.View.performClick(View.java:2485)
11-07 23:18:51.253: E/AndroidRuntime(450):  at android.view.View$PerformClick.run(View.java:9080)
11-07 23:18:51.253: E/AndroidRuntime(450):  at android.os.Handler.handleCallback(Handler.java:587)
11-07 23:18:51.253: E/AndroidRuntime(450):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-07 23:18:51.253: E/AndroidRuntime(450):  at android.os.Looper.loop(Looper.java:123)
11-07 23:18:51.253: E/AndroidRuntime(450):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-07 23:18:51.253: E/AndroidRuntime(450):  at java.lang.reflect.Method.invokeNative(Native Method)
11-07 23:18:51.253: E/AndroidRuntime(450):  at java.lang.reflect.Method.invoke(Method.java:507)
11-07 23:18:51.253: E/AndroidRuntime(450):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-07 23:18:51.253: E/AndroidRuntime(450):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-07 23:18:56.723: I/Process(450): Sending signal. PID: 450 SIG: 9 
```

这是Java代码。

```
ImageButton rightbuton = (ImageButton) findViewById(R.id.rightbutton);
        rightbuton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {

                edit1 = (EditText) findViewById(R.id.editText1);
                edit2 = (EditText) findViewById(R.id.editText2);
                textview = (TextView) findViewById(R.id.textView5);

                Double number2 = 0.0;
                Double number3 = 0.0;

                if (edit1.getText().toString().trim().length()>0 ) {
                    number2 = Double
                            .parseDouble(edit1.getText().toString());

                }
                if(edit2.getText().toString().trim().length()>0){
                    number3 = Double
                            .parseDouble(edit2.getText().toString());
                }

                number3 = number2 * number3;

                int number2int = (int) (number2 * number3);
                int number3int = (int) (number3 / 40);

                number2 = number2 * number3;
                number3 = number3 / 40;

                if (number2int - number2 != 0) {
                    String number2val = Double.toString(number2);
                    textview.setText(number2val);

                } else {
                    String number2val = Integer.toString(number2int);
                    textview.setText(number2val);
                    // label.text = [NSString stringWithFormat:@"%d",
                    // number2int];

                }

                if (number3int - number3 != 0) {
                    String number3val = Double.toString(number3);
                    textview.setText(number3val);

                } else {

                    String number3val = Integer.toString(number3int);
                    textview.setText(number3val);

                }

            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:09:47.687

在您的代码周围放置一个 try/catch 短语 -

```
try {
    //all your code, starting from your first if statement and ending at the end of your method
catch (numberformatexception nfe){
//the code that you want to execute if there is not a number in the edittext
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:20:22.763

谢谢大家，我只为布局中的数字设置了输入。因此，我猜 javafile 可以使用该信息。但是，我用 try 块更正了代码

```
Double number2 = 0.0;
                    Double number3 = 0.0;
                    try {
                        if (edit1.getText().toString().trim().length() > 0) {

                            number2 = Double.parseDouble(edit1.getText()
                                    .toString());

                        }
                        if (edit2.getText().toString().trim().length() > 0) {
                            number3 = Double.parseDouble(edit2.getText()
                                    .toString());

                        }
                    } catch (NumberFormatException e) {

                        Toast.makeText(getApplicationContext(), "bad input",
                                Toast.LENGTH_LONG).show();
                    } 
```

感谢您帮助我纠正此问题。

# joomla - 只显示文章的内容

> ID：13275611
> 
> 赞同：3
> 
> 时间：2012-11-07T18:11:53.170
> 
> 标签：joomla, joomla2.5

如何只在一篇文章中显示内容？

我正在使用 Joomla 2.5 和 Ajax 调用单个文章，但是当我在`<div>`标签中呈现文章时，我再次呈现页眉、页脚和所有页面，但我只想要内容。

如何将页面或文章配置为仅显示内容？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T06:29:59.727

如果您只想获取组件，则可以`tmpl=component`在 url 中附加参数。您的文章网址将是这样的-

```
index.php?option=com_content&view=article&id=1&tmpl=component 
```

或者你可以这样尝试——

```
$('#result').load('index.php?option=com_content&view=article&id=1&tmpl=component #container'); 
```

[加载页面片段](http://api.jquery.com/load/#loading-page-fragments)

# string - 替换包含特定字符串的整个表达式

> ID：13275614
> 
> 赞同：5
> 
> 时间：2012-11-07T18:12:09.350
> 
> 标签：string, r, expression, gsub

我的数据框有一列包含大量文件名，例如：

```
d <- c("harry11_scott80_norm.avi","harry11_norm.avi","harry11_scott80_lpf.avi", 
       "joel51_lpf.avi","rich82_joel51_lpf.avi") 
```

我希望 R 用两个人的名字替换所有的表达式，比如`harry11_scott80_norm.avi`用这个表达式`incongruent`，而所有的用一个人的名字，比如`harry11_norm.avi`用`congruent`。我可以`gsub`这样做：

```
dd <- gsub("harry11_scott80_norm.avi", "incongruent", d) 
```

但我得到了很多这样的名字，所以这将是一个非常笨拙的解决方案。所以理想情况下，我想`_scott80_`用“不一致”替换包含字符串的整个表达式。我认为`gsub`可以做到这一点，但是当我运行它时：

```
dd <- gsub("_scott80_", "incongruent", d) 
```

它返回 with `harry11incongruentnorm.avi`，这显然是因为它只是替换了精确的字符串匹配。我发现有一些方法可以告诉`gsub`完全替换包含选定字符串的表达式，但我找不到它。

有一个问题[在 R 中，如何用另一个字符串替换包含特定模式的字符串？](https://stackoverflow.com/questions/5302669/in-r-how-do-i-replace-a-string-that-contains-a-certain-pattern-with-another-str)，但我不确定如何 `agrep`在这种情况下使用。

* * *

**编辑：**附带奖金问题-基于@GSee的回答，是否有任何功能可以让您传递要替换的字符串列表？例如，`gsub(c(".*_scott80_.*", ".*_harry11_.*"), "incongruent", d)`不会工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T18:14:20.437

这是一种方法

```
> gsub(".*_scott80_.*", "incongruent", d)
[1] "incongruent"           "harry11_norm.avi"      "incongruent"          
[4] "joel51_lpf.avi"        "rich82_joel51_lpf.avi" 
```

或与`grep`

```
> d[grep("_scott80_", d)] <- "incongruent"
> d
[1] "incongruent"           "harry11_norm.avi"      "incongruent"          
[4] "joel51_lpf.avi"        "rich82_joel51_lpf.avi" 
```

* * *

为了解决您的编辑问题，我相信这会做到（`|`用于表示“或”）

```
gsub(".*(_scott80_|_harry11_).*", "incongruent", d) 
```

`d`当然，你在那场比赛中没有任何字符串`"_harry11_"`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T21:30:42.513

如果您的文件名都是相同的格式，即具有两个名称（即`harry11_scott80_norm.avi` *始终*有两个下划线）的文件名，而具有一个名称（即`harry11_norm.avi` *始终*有一个下划线）的文件名，则可以快速使用以下方法重命名文件：

```
d = gsub(".*_.*_.*", "incongruent", d)
> d
[1] "incongruent"      "harry11_norm.avi" "incongruent"      "joel51_lpf.avi"  
[5] "incongruent"

d =gsub(".*_.*","congruent",d)
> d
[1] "incongruent" "congruent"   "incongruent" "congruent"   "incongruent" 
```

# c# - KeyNotFoundException 与使用 HtmlEntity.DeEntitize() 方法

> ID：13275620
> 
> 赞同：8
> 
> 时间：2012-11-07T18:12:35.683
> 
> 标签：c#, html-agility-pack, keynotfoundexception

我目前正在研究用 C# 4.0 编写的刮板。我使用各种工具，包括 .NET 的内置 WebClient 和 RegEx 功能。对于我的刮板的一部分，我正在使用 HtmlAgilityPack 解析 HTML 文档。我让一切按我的意愿工作，并进行了一些代码清理。

我正在使用该`HtmlEntity.DeEntitize()`方法来清理 HTML。我做了一些测试，该方法似乎效果很好。但是当我在我的代码中实现该方法时，我不断得到`KeyNotFoundException`. 没有更多细节，所以我很迷茫。我的代码如下所示：

```
WebClient client = new WebClient();
string html = HtmlEntity.DeEntitize(client.DownloadString(path));
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(html); 
```

下载的 HTML 是 UTF-8 编码的。我怎样才能绕过`KeyNotFound`异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T15:33:49.727

我知道问题是由于出现了非标准字符。比如说中文、日文等。

在您发现是什么字符导致了问题之后，也许您可​​以在[此处搜索 htmlagilitypack 的合适补丁](http://htmlagilitypack.codeplex.com/sourcecontrol/list/patches?ViewAll=true&ProjectName=htmlagilitypack)

[如果您想自己修改htmlagilitypack 源代码](http://htmlagilitypack.codeplex.com/workitem/31915)，这可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-20T20:56:57.597

四年后，我对一些编码字符（版本 1.4.9.5）也有同样的问题。在我的例子中，有一组有限的字符可能会产生问题，所以我刚刚创建了一个函数来执行替换：

```
// to be called before HtmlEntity.DeEntitize
public static string ReplaceProblematicHtmlEntities(string str)
{
    var sb = new StringBuilder(str);
    //TODO: add other replacements, as needed
    return sb.Replace("&period;", ".")
        .Replace("&abreve;", "ă")
        .Replace("&acirc;", "â")
        .ToString();
} 
```

就我而言，该字符串同时包含 html 编码字符和 UTF-8 字符，但问题仅与某些编码字符有关。

这不是一个优雅的解决方案，而是对所有具有有限（和已知）数量有问题的编码字符的文本的快速修复。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-10T19:29:47.047

我的 HTML 有一个像这样的文本块：

`... found in sections: 233.9 & 517.3; ...`

尽管有间距和小数点，但它被解释`& 517.3;`为 unicode 字符。

简单地对原始文本进行 HTML 编码为我解决了这个问题。

```
string raw = "sections: 233.9 & 517.3;";
// turn '&' into '&amp;', etc, before DeEntitizing
string encoded = System.Web.HttpUtility.HtmlEncode(raw);
string deEntitized = HtmlEntity.DeEntitize(encoded); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-22T04:49:55.247

在我的情况下，我通过将 HtmlAgilityPack 更新到版本 1.5.0 来解决这个问题

# c# - 创建一组字符串，其中列标题作为字符串标题，字符串值作为第 0 行值

> ID：13275622
> 
> 赞同：2
> 
> 时间：2012-11-07T18:12:37.600
> 
> 标签：c#, visual-studio-2010, loops, dataset

我有第 1 列第 2 列和第 3 列。在第 0 行中，我分别有值 1、2、3。

我怎样才能建立一个循环来设置

```
string column 1 = 1
string column 2 = 2
string column 3 = 3 
```

因此字符串名称是列标题，字符串的值是该列第 0 行中的值。

这需要对大约 150 多列进行，我希望避免单独输入。

列位于名为“ShipmentInfo”的表中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:19:11.037

试试这个代码：

```
for (int index = 0; index < DT.Rows.Count; index++)
{
    foreach (DataColumn DC in DT.Columns)
    {
        DT.Rows[index][DC] = index;
    }
} 
```

这里 DT 是 DataTable 对象。

希望这会帮助你。

# selenium - 我将如何使用 C# 通过 GRID 运行 Selenium 测试

> ID：13275623
> 
> 赞同：2
> 
> 时间：2012-11-07T18:12:38.350
> 
> 标签：selenium, selenium-webdriver, selenium-grid

我刚刚在我的本地机器上设置了 selenium 网格，一切似乎都已启动并正在运行。

我的问题是，有没有办法可以从 selenium 网格节点（命令提示符）运行测试用例？

我正在使用 WebDriver 使用 .Net 创建我的测试用例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:10:35.783

示例代码来自[这里](http://seleniumhq.org/docs/03_webdriver.html)

```
using OpenQA.Selenium;
using OpenQA.Selenium.Firefox;

// Requires reference to WebDriver.Support.dll
using OpenQA.Selenium.Support.UI;

class GoogleSuggest
{
    static void Main(string[] args)
    {
        // Create a new instance of the Firefox driver.

        // Notice that the remainder of the code relies on the interface, 
        // not the implementation.

        // Further note that other drivers (InternetExplorerDriver,
        // ChromeDriver, etc.) will require further configuration 
        // before this example will work. See the wiki pages for the
        // individual drivers at http://code.google.com/p/selenium/wiki
        // for further information.
        WebDriver driver = new RemoteWebDriver(new Uri("http://127.0.0.1:4444/wd/hub"),
        DesiredCapabilities.FirefoxDriver());

        //Notice navigation is slightly different than the Java version
        //This is because 'get' is a keyword in C#
        driver.Navigate().GoToUrl("http://www.google.com/");

        // Find the text input element by its name
        IWebElement query = driver.FindElement(By.Name("q"));

        // Enter something to search for
        query.SendKeys("Cheese");

        // Now submit the form. WebDriver will find the form for us from the element
        query.Submit();

        // Google's search is rendered dynamically with JavaScript.
        // Wait for the page to load, timeout after 10 seconds
        WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));
        wait.Until((d) => { return d.Title.ToLower().StartsWith("cheese"); });

        // Should see: "Cheese - Google Search"
        System.Console.WriteLine("Page title is: " + driver.Title);

        //Close the browser
        driver.Quit();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-23T11:28:08.047

```
WebDriver driver = new RemoteWebDriver(new Uri("http://127.0.0.1:4444/wd/hub"),
        DesiredCapabilities.FirefoxDriver());

OR in c#

IWebDriver driver;    
DesiredCapabilities capability = new DesiredCapabilities();      
driver = new RemoteWebDriver(
new Uri("http://hub-cloud.com/wd/hub/"), capability);    
driver.Navigate().GoToUrl("http://www.google.com"); 
```

# ios - 用于未读电子邮件计数的 IOS API

> ID：13275625
> 
> 赞同：-1
> 
> 时间：2012-11-07T18:12:49.643
> 
> 标签：ios

是否有一个 IOS API 可以让我阅读我的电子邮件收件箱中未读电子邮件的数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:24:43.390

不，没有任何 API 可以让您获得任何有关电子邮件的信息。

# c# - ToDecimal 区域/文化问题

> ID：13275628
> 
> 赞同：1
> 
> 时间：2012-11-07T18:13:01.293
> 
> 标签：c#, visual-studio-2010, oracle, cultureinfo

我从 Oracle 数据库接收到以下值（作为 varchar）：`7876,72` 在 Visual Studio 中，它被读取为`String`

**案例1（预期案例）：**

当我调试时，我看到：`7876.72`当我尝试时，`Convert.ToDecimal("7876.72")`我得到了`7876.72D`

**案例2（错误案例）：**

当我调试时，我看到：`7876,72`当我尝试时，`Convert.ToDecimal("7876,72")`我得到了`787672D`

我正在检查`CultureInfo.CurrentCulture`and`RegionInfo.CurrentRegion`它在两台机器上都是一样的......

造成这种情况的主要原因是：

`Convert.ToDecimal("7876,72").ToString("0,0.00", CultureInfo.InvariantCulture)`给我：`787,672.00`它应该是`7,876.72`。

**Global.asax - Application_Start**

```
Dim newCulture As CultureInfo = DirectCast(System.Threading.Thread.CurrentThread.CurrentCulture.Clone(), CultureInfo)
newCulture.DateTimeFormat.ShortDatePattern = "yyyy/MM/dd"
newCulture.DateTimeFormat.DateSeparator = "/"
newCulture.NumberFormat.CurrencyDecimalSeparator = "."
newCulture.NumberFormat.NumberDecimalSeparator = "."
Thread.CurrentThread.CurrentCulture = newCulture 
```

关于如何在两台机器上保持相同值的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T21:31:40.680

问题出在 Oracle 客户端，我的开发人员机器和服务器机器之间存在一些不一致，这就是为什么日期和十进制值在两台机器上显示不同的主要原因。

![在本地、服务器和开发人员机器上查看时出错](../Images/295d3aec1dc28a390a5e96adcce0a430.png)

解决方案是强制两台机器以相同的方式运行，为此我们更改了 Oracle 客户端的密钥并添加了所需的参数：

![在此处输入图像描述](../Images/ea60810ef559cdbc91882d2f60981cfb.png)

希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:37:05.603

您得到的不是预期的上述输出，因为以下值`7876,72`等于`787672`. 逗号仅用于分隔数字，但在转换时不用于指示小数点。但是，小数点由以下字符表示``.``

我建议您将字符替换为`,`，`.`因为您希望获得小数点而不是`,`.

**例子**

```
string NumberFromDatabase = "7876,72"; //Initialize a new string of name NumberFromDatabase as 7876,72
string NumberAfterReplacement = NumberFromDatabase.Replace(',', '.'); //Initialize a new string of name NumberAfterReplacement as 7876.72
decimal Output = Convert.ToDecimal(NumberAfterReplacement); //Initialize a new decimal of name Output as 7876.72 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:39:08.557

对于数字：使用`TryParse(...)`适当的`NumberStyle`

对于日期：这是一个好习惯`ParseExact`

# css - :before/:after 伪元素不随父元素转换

> ID：13275633
> 
> 赞同：2
> 
> 时间：2012-11-07T18:13:09.533
> 
> 标签：css, css-transforms

在此[链接](http://jsfiddle.net/xXePd/17/)中，我有一个在悬停时旋转的 div，我想知道是否可以使用 :before 或 :after 来充当阴影。在示例中，:before 元素与 div 一起转换并出现在顶部，即使它的 z-index 为负。我希望它在没有任何转变的情况下休息。

这都是关于 css 的，html 只是两个 div，一个用于透视的容器和正在转换的“卡片”。

```
<div id="container">
    <div id="card"></div>
</div> 
```

关于兼容性，这是我试图实现的仅 webkit 实验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T11:10:41.833

检查这个答案：[Z-index with before pseudo-element](https://stackoverflow.com/questions/7822078/z-index-with-before-pseudo-element)

:before 和 :after 伪元素根据定义**位于**关联元素内部，因此不可能将它们放在关联元素的外部（后面）。

您必须在 .`<div id="shadow">`之前插入第二个元素（如 a ）`<div id="card">`。

# html - 更改下拉链接和父链接的颜色？

> ID：13275634
> 
> 赞同：0
> 
> 时间：2012-11-07T18:13:20.843
> 
> 标签：html, css, web, listitem, navigationbar

当子链接悬停时，我试图突出显示“个人培训”链接和任何其他下拉链接。

例如：用户悬停“个人培训”链接，然后显示下拉菜单。然后，当他从列表中删除时，“个人训练”仍然突出显示。

HTML：

```
 <ul id="nav">
        <li><a href="index.php">Home</a></li>
        <li><a href="personaltraining.php">Personal Training</a>
            <ul>
                <li><a href="signup.php">Sign Up</a></li>
                <li><a href="meetthetrainers.php">Meet The Trainers</a></li>
            </ul>
        </li>
    </ul> 
```

CSS：

```
#header a {
    margin: 0px;
    padding: 10px;
    display: block;
    text-decoration: none;
    font-size: 20px;
    font-weight: bold;
    color: #000;
}
#nav a:hover {
    margin: 0px;
    padding: 10px;
    display: block;
    text-decoration: none;
    font-weight: bold;
    color: #000;
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0.5, #FFF), color-stop(1, #00F));
}
#nav li ul {
    width: auto;
    position: absolute;
    display: none;
    background-color: #0F0;
    background-image: none;
}
#nav ul li:hover {
    width: auto;
    position: absolute;
    background-color: #00F;
    background-image: none;
}
#nav ul a:hover {
    background-color: #00F;
    background-image: none;
}
#nav li a:hover + a {
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0.5, #FFF), color-stop(1, #00F));
}
#nav li:hover ul {
    display: block;
} 
```

我显示下拉菜单的代码有效，它突出显示悬停的任何单个项目我需要的是如何突出显示下拉链接及其父链接。

提前致谢， Slulego

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:26:21.030

由于子菜单`ul`包含在菜单标题`li`中，因此您应该将`:hover`样式应用于`li`，而不是`a`. 在这个[JSFiddle](http://jsfiddle.net/xkuE2/)中查看它的实际效果。

我将`CSS`选择器更改`#nav a:hover`为`#nav > li:hover`.

而且，尽管不用说，JSFiddle 的美学远非最佳；我只是将它破解在一起以显示我在说什么:)

# android - sencha 包无法在发布模式下运行 zipalign

> ID：13275639
> 
> 赞同：3
> 
> 时间：2012-11-07T18:13:36.897
> 
> 标签：android, build, sencha-touch, extjs

我正在尝试将我的 sencha 应用程序打包到 android，并且我正在使用 senchaCommandv3 和 sencha-touch2.1rc2 库。

在调试配置 sencha package build packager.json 的命令提示符下，此命令执行没有任何错误并成功生成 .apk 文件。

但是当我尝试在发布模式下生成包时，它会失败并给出“无法与 error1 压缩对齐”的错误

请帮忙，我被这个错误深深地困住了。无法找到有关此错误的任何信息。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:35:53.840

我建议您使用 Phonegap，这是一个相对轻松的过程。但是如果你想使用 Sencha Native 打包器，那么升级到 touch 2.1 GA 版本也确保你有 Sencha CMD 构建版本 250，然后再试一次。早期版本有一些 bug，这些 bug 记录在 Sencha 论坛中。

希望这可以帮助

# ios - iOS：UISearchBar 中的 UIActivityIndi cator

> ID：13275643
> 
> 赞同：9
> 
> 时间：2012-11-07T18:13:48.677
> 
> 标签：ios, xcode, search, uisearchbar, uiactivityindicatorview

搜索时是否可以在 UISearchBar 中显示 UIActivityIndi​​cator？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2017-08-27T13:14:56.660

**iOS 13**更新。

 **[![ios13](../Images/d6cb08f240c8c32cf6175a319d201af2.png)](https://i.stack.imgur.com/WMTJX.png)

您可以在 Swift 4+ 中使用以下扩展。用法：

显示活动： **`searchBar.isLoading = true`**

隐藏活动： **`searchBar.isLoading = false`**

**UISearchBar 扩展**

```
extension UISearchBar {

    public var textField: UITextField? {
        if #available(iOS 13.0, *) {
            return self.searchTextField
        } else {
            let subViews = subviews.flatMap { $0.subviews }
            guard let textField = (subViews.filter { $0 is UITextField }).first as? UITextField else {
                return nil
            }
            return textField
        }
    }

    public var activityIndicator: UIActivityIndicatorView? {
        return textField?.leftView?.subviews.flatMap{ $0 as? UIActivityIndicatorView }.first
    }

    var isLoading: Bool {
        get {
            return activityIndicator != nil
        } set {
            if newValue {
                if activityIndicator == nil {
                    let newActivityIndicator = UIActivityIndicatorView(activityIndicatorStyle: .gray)
                    newActivityIndicator.transform = CGAffineTransform(scaleX: 0.7, y: 0.7)
                    newActivityIndicator.startAnimating()
                    newActivityIndicator.backgroundColor = UIColor.white
                    textField?.leftView?.addSubview(newActivityIndicator)
                    let leftViewSize = textField?.leftView?.frame.size ?? CGSize.zero
                    newActivityIndicator.center = CGPoint(x: leftViewSize.width/2, y: leftViewSize.height/2)
                }
            } else {
                activityIndicator?.removeFromSuperview()
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-07T18:19:22.507

是的你可以。

开始搜索时，创建一个活动指示器并将其添加为`UISearchBar`using`addSubView`方法的子视图。完成搜索后，使用`removeFromSuperView`方法将其从搜索栏中删除。

```
UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
//set frame for activity indicator
[searchBar addSubview: spinner];
[spinner startAnimating]; 
```

请参阅此链接以获取替代[方法](https://stackoverflow.com/questions/1209842/replace-bookmarkbutton-with-activityindicator-in-uisearchbar)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-07-28T09:12:16.707

发现没有一个广告解决方案适用于 iOS13...这是我自己的，它是搜索栏的子类，应该更强大以备将来使用

```
class SearchBar: UISearchBar {

    var activityIndicator: UIActivityIndicatorView?

    var isLoading: Bool {
        get {
            return activityIndicator != nil
        } set {
            if newValue {
                if activityIndicator == nil {

                    guard let leftView = searchTextField.leftView else {
                        return
                    }

                    let ai = UIActivityIndicatorView(style: .medium)
                    ai.frame = self.convert(leftView.frame, from: leftView.superview)
                    self.addSubview(ai)

                    ai.startAnimating()
                    leftView.isHidden = true
                    activityIndicator = ai

                }
            } else {
                activityIndicator?.removeFromSuperview()
                activityIndicator = nil

                guard let leftView = searchTextField.leftView else {
                    return
                }
                leftView.isHidden = false
            }
        }
    }

} 
```**

# jquery - jQuery 1.8 自动完成与类别问题

> ID：13275646
> 
> 赞同：2
> 
> 时间：2012-11-07T18:14:05.290
> 
> 标签：jquery, jquery-autocomplete

我当前的代码使用的是 jQuery 1.7.x。我想升级到 jQuery 1.8，但我的自动完成功能遇到了问题。我用相同的代码创建了 2 个 jsfiddles。在一个示例中，它可以正常工作，而在另一个示例中则不能。主要问题是当您搜索并单击时，应该显示一个警告框并说明单击了什么。它适用于旧的 jQuery，但不适用于 1.8。

这是工作的 1.7 版本 - [http://jsfiddle.net/u2GEe/1/](http://jsfiddle.net/u2GEe/1/)

这是损坏的 1.8 版本 - [http://jsfiddle.net/TPWXh/3/](http://jsfiddle.net/TPWXh/3/)

这是代码：

```
$.widget("custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function(ul, items) {
        var self = this,
            currentCategory = "";
        $.each(items, function(index, item) {
            if (item.category != currentCategory) {
                ul.append("<li class='ui-autocomplete-category search-dropdown-category'>" + item.category + "</li>");
                currentCategory = item.category;
            }
            self._renderItem(ul, item);
        });
    }
});
$(document).ready(function() {
var data = [
    {
    label: "anders",
    category: "aa"},
{
    label: "andreas",
    category: "aa"},
{
    label: "antal",
    category: "aa"},
{
    label: "annhhx10",
    category: "Products"},
{
    label: "annk K12",
    category: "Products"},
{
    label: "annttop C13",
    category: "Products"},
{
    label: "anders andersson",
    category: "People"},
{
    label: "andreas andersson",
    category: "People"},
{
    label: "andreas johnson",
    category: "People"}
];

$("#search_input").catcomplete({
    source: data,
    select: function(event, ui) {
        alert(ui.item.label);
    }
});

});​ 
```

有谁知道这笔交易是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T19:45:39.647

在花了几天时间之后，我终于弄明白了。这是一行：

```
 self._renderItem(ul, item); 
```

现在需要

```
self._renderItemData(ul, item); 
```

在我改变它之后，一切都恢复正常了。非常令人沮丧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:43:59.740

通过记录`select`回调中的值，我注意到原来`item`是`undefined`.

```
$("#search_input").catcomplete({
    source: data,
    select: function(event, ui) {
        console.log(event, ui); // DEBUG
        alert(ui.item.label);
    }
}); 
```

不知道为什么 jQuery 1.8.2 和 jQuery UI 1.9.1 不能一起工作，但我通过使用 jQuery UI **1.8.2**而不是 1.9.1 让它工作。

[在这里](http://jsfiddle.net/3mgSG/)试试。

# json - 如何将 JSON 编码的数据从服务器加载到我的页面？

> ID：13275647
> 
> 赞同：0
> 
> 时间：2012-11-07T18:14:07.553
> 
> 标签：json

我正在使用 jQuery EasyUI 创建一个[复选框树](http://www.jeasyui.com/demo/main/index.php?plugin=Tree&theme=default&dir=ltr&pitem=)。我尝试了他们的演示，它在本地运行良好。当我在服务器上尝试它时，我没有看到树列表。

我包含了必要的 js 文件： - jquery-1.6.1.min.js - jquery.easyui.min.js

这是html：

```
 <ul id="tt" class="easyui-tree"
        url="data/tree_data.json"
        checkbox="true">
</ul> 
```

这是 JSON 数据：

```
 [{
    "id":1,
    "text":"Fruits",
    "state":"closed",
    "children":[{
        "text":"Apple"
    },{
        "text":"Pear"
    }]
}] 
```

如何让 json 数据加载到我的页面上？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:17:37.787

```
data = $.parseJSON(var);
alert(data.id); 
```

其中 var 包含您的 json 数据。

# javascript - 禁用-单击 HighCharts 柱形图中的图例

> ID：13275648
> 
> 赞同：27
> 
> 时间：2012-11-07T18:14:09.893
> 
> 标签：javascript, highcharts

我只是想在我的“柱形图”上禁用 DRILL-DOWN 效果。任何人都可以帮忙吗？这是 Fiddle [http://jsfiddle.net/D8Ez3/的示例代码](http://jsfiddle.net/D8Ez3/)

*如您所见，图表的图例是可点击的。我需要图例中的项目不可点击，因为当您单击所有项目时，图表返回空。我宁愿对图表没有任何深入研究。有任何想法吗？

```
chart = new Highcharts.Chart({
    chart: {
        renderTo: 'impact',
        type: 'column',
        margin: [0, 0, 0, 0],
        spacingTop: 0,
        spacingBottom: 0,
        spacingLeft: 0,
        spacingRight: 0,
        backgroundColor: null,
        events: {
            load: function (event) {
                console.log(this);
            }}},
    exporting: {
       buttons: { 
       exportButton: {
       enabled:false
    },
    printButton: {
        enabled:false
    }}},
credits: {
        enabled: false
    },
    title: {
        text: ''
    },
    subtitle: {
        text: ''
    },
    xAxis: {
        categories: ['Reporting Year']
    },
    yAxis: {
        min: 0,
        title: {
            text: 'Millions (mm)'
        }
    },
    legend: {
    enabled:false,
        layout: 'vertical',
        backgroundColor: '#FFFFFF',
        align: 'left',
        verticalAlign: 'top',
        x: 50,
        y: 30,
        floating: true,
        shadow: true
    },
    tooltip: {
        formatter: function () {
            return '' + this.x + ': ' + this.y + ' mm';
        }
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            size: '95%',
            borderWidth: 0},
    point: {
                events: {
                    legendItemClick: function () {
                        return true; // <== returning false will cancel the
                        default action }}},
            allowPointSelect: false,
    },
    series: [{
        name: 'Yr 1',
        data: [23.7] }, 
    {
        name: 'Yr 2',
        data: [13.6] }, 
    {
        name: 'Yr 3',
        data: [49.9] }, 
    {
        name: 'Yr 4',
        data: [83.6] }]
      }); 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-07T18:29:06.553

你很亲密。代替：

```
plotOptions: {
    column: {
        pointPadding: 0.2,
        size: '95%',
        borderWidth: 0
    },
    point: {
            events: {
                legendItemClick: function () {
                    return false; // <== returning false will cancel the default action
                }
            }
    },
    allowPointSelect: false,
}, 
```

你要：

```
plotOptions: {
    column: {
        pointPadding: 0.2,
        size: '95%',
        borderWidth: 0,
        events: {
            legendItemClick: function () {
                return false; 
            }
        }
    },
    allowPointSelect: false,
}, 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-07-17T11:09:03.327

如果你使用馅饼，你必须这样做：

```
 pie: {
       showInLegend: true,
       allowPointSelect: false,
       point:{
           events : {
            legendItemClick: function(e){
                e.preventDefault();
            }
           }
       }
   } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-09T12:43:40.397

这是使 Highcharts 图的图例不可点击的方法，因为每当您单击特定图例时，相应的切片就会从图中消失，因此根据业务要求使图保持不变，我们可能会使图例不可点击。

```
 plotOptions: {
        column: {
            pointPadding: 0,
            borderWidth: 1,
        },
        series: {
            events: {
                legendItemClick: function (e) {
                    e.preventDefault();
                }
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-21T07:49:06.240

如果使用**ES6**，您可以使用箭头函数使其更短，因为它指向**DOM 元素**，您可以简单地返回**false** ...

```
{
  name: 'Name of this chart',
  type: 'line',
  lineWidth: 1,
  color: '#333333',
  events: {
    legendItemClick: () => false  // disable legend click
  },
  data: [1, 5, 10, 8, 19, 28, 0 , 12]
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-25T22:01:07.537

来自[Highcharts JS API 文档](https://api.highcharts.com/highcharts/plotOptions.pie.point.events.legendItemClick)(v7.1.1)

> “默认操作是切换点的可见性。这可以通过调用 event.preventDefault() 来防止。”

所以这对我来说适用于饼图 -

```
 plotOptions: {
        pie: {
            point: {
                events: {
                    legendItemClick: function (e) {
                        e.preventDefault();
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-03T12:34:38.660

这是一个[JSFiddle](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-events-legenditemclick/)演示如何实现这一点：

```
plotOptions: {
        series: {
            events: {
                legendItemClick: function () {
                    var visibility = this.visible ? 'visible' : 'hidden';
                    if (!confirm('The series is currently ' +
                   **strong text**              visibility + '. Do you want to change that?')) {
                        return false;
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-21T14:00:56.110

作为对任何其他答案的有用补充，您可能还希望禁用图例悬停样式：

```
legend: {
    itemStyle: {
        cursor: 'default',
    },
    itemHoverStyle: {
        color: '#333333',
    }
}, 
```

见：[https ://jsfiddle.net/oyps4fj6/](https://jsfiddle.net/oyps4fj6/)

# mysql - 如何检查用户是否在其个人资料中具有特定角色？

> ID：13275649
> 
> 赞同：0
> 
> 时间：2012-11-07T18:14:10.703
> 
> 标签：mysql, vb.net

**再会，**

我需要一些帮助。我正在尝试查询我的 MySQL 数据库，以查看当前登录到我的应用程序的用户是否具有某些权限/角色。如果查询的值确实存在，那么我想启用某个菜单项。

我在输入问题时检查了大多数类似的问题，但它们主要处理 ASP 和 JSP，这让我更加困惑（因为我还没有研究过这些问题）。我还在学习 VB.Net 和 MySQL。

您的帮助将不胜感激。

**这是我的代码 - 我做错了什么？：**

```
Public Sub checkAccessLevel()
    Dim dbConn As New MySqlConnection(String.Format("Server={0};Port={1};Uid={2};Password={3};Database=parts", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password))
    Dim dbQuery As String = "SELECT Level FROM users WHERE username = '" & FormLogin.TextBoxUsername.Text & "'"
    Dim dbAdapter As New MySqlDataAdapter(dbQuery, dbConn)
    Dim dbData As MySqlDataReader

    Try
        dbConn.Open()
        dbData = dbAdapter.SelectCommand.ExecuteReader
        dbData.Read()
        While dbData.Read
            Select Case UCase(dbData(0).ToString)
                Case Is = "Admin"
                    TSMenuItemOptions.Enabled = True
                Case Is = "Manager"
                    TSMenuItemOptions.Enabled = True
                Case Is = "User"
                    TSMenuItemOptions.Enabled = False
            End Select
        End While
        dbData.Close()

    Catch ex As Exception
        MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                            vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
    Finally
        dbAdapter.Dispose()
        dbConn.Close()
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:54:18.503

我设法解决了我自己的问题如下；

通过修改 Select Case 语句......

**原始（不正确）：**

```
Select Case UCase(dbData(0).ToString) 
```

**修改（正确）：**

```
Select Case dbData(0).ToString 
```

# mysql - 从mysql数据库中获取unix时间戳并应用偏移量

> ID：13275650
> 
> 赞同：0
> 
> 时间：2012-11-07T18:14:12.967
> 
> 标签：mysql, time, timestamp, utc, convert-tz

我有以秒为单位的 UTC 偏移量，存储在数据库中的所有时间戳都是 UTC，如何在选择查询期间应用偏移量，

```
mysql_query("SELECT * FROM table WHERE unix_timestamp=unix_timestamp with offset applied");

mysql_query("INSERT INTO table (unix_timestamp) VALUES(UNIX_TIMESTAMP())"); 
```

我想将UTC时间插入数据库并在本地时间检索。

在 PHP 上：

```
date_default_timezone_set('UTC');

$user_timezone_offset=-7200; // -2 
```

我可以将 select 的 mysql 运行时减去 unix_timestamp 字段 $user_timezone_offset 吗？

我正在插入 UTC，这显然是我需要的，但是对于用户本地时间的选择，我需要以某种方式将偏移量应用于存储在数据库中的时间戳。

编辑：我刚遇到这个：

```
$user_timezone_offset="-2:00";

FROM_UNIXTIME(CONVERT_TZ(unix_timestamp,'+00:00','$user_timezone_offset')) 
```

需要知道如何将其应用于选择查询，从而将 unix_timestamp 的选择转换为在选择内进行比较，并且结果也被修改为 php 的 fetch_array

这似乎是解决方案：

```
 SELECT *, Unix_Timestamp(CONVERT_TZ(FROM_UNIXTIME(unix_timestamp), '+00:00', '$user_timezone_offset')) as unix_timestamp 
```

实际上这有一个问题 - 虽然在

```
 mysql_fetch_array($result){ $row['unix_timestamp']; } 
```

在检查时转换

```
 WHERE unix_timestamp=value //assuming unix_timestamp 
```

在选择上进行转换-在那里它没有被转换，另一个

```
 Unix_Timestamp(CONVERT_TZ(FROM_UNIXTIME(unix_timestamp), '+00:00', '$user_timezone_offset')) 
```

每次要对转换后的值进行检查时，都必须调用 unix_timestamp 进行“转换”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:52:52.853

我认为您可能使问题过于复杂。

时间戳始终为 UTC。当您在 PHP 中检索时间戳时，它是 UTC 格式的。

例如，当您使用该`date()`函数转换时区时，它会显示在 php.ini 设置[date.timezone](http://www.php.net/manual/en/datetime.configuration.php#ini.date.timezone)设置为的任何时区。

因此，如果您有具有特定时区的用户，只需`date_default_timezone_set()`在显示本地时间日期之前使用适当的时区进行调用。

如果您使用[DateTime](http://php.net/datetime)类，那么您可以在构造对象时指定所需的时区。

除非您有非常具体的原因，否则当您从数据库中获取时间戳时，不需要执行时区转换。PHP 为您处理这一切。

# python - 在 Python 中读取通过 CGI 上传的文件

> ID：13275657
> 
> 赞同：3
> 
> 时间：2012-11-07T18:14:42.337
> 
> 标签：python, upload, cgi

我在分析上传到我的服务器的文件时遇到问题。理想情况下，用户会上传一个 .csv 文件，我会`import numpy as np`从文件中的数据运行一些数字积分（因此是 ）并返回结果。为了在进行任何分析之前测试 cgi 部分，我制作了下面的 python 脚本。我的问题是消息总是显示为空白，所以最后我在浏览器中显示了一个空白的 html 页面。

显然我没有正确读取文件（这意味着我无法分析它），但我不知道我做错了什么。我自己的搜索表明我下面的内容应该可以工作。

```
#!/usr/bin/python

#---------------------------------------------
#=============================================
#---------------------------------------------
#imports

#import csv
#import time as tm
#import numpy as np
#import os
import cgi, cgitb

cgitb.enable()

form = cgi.FieldStorage()

#The variables
#httpopen=""
#httpclose=""
message="meow"

#get the fileitem
fileitem=form['userfile']
if fileitem.file:
    #yay...we got a file
    message=fileitem.file.readline()

print """\
Content-Type: text/html\n
<html><body>
<p>%s</p>
</body></html>
""" % (message,) 
```

这是提供上传的 html 表单：

```
<html>
<body>
   <form enctype="multipart/form-data" 
                     action="capacity_rewrite.py" method="post">
   <p>File: <input type="file" name="userfile" /></p>
   <p><input type="submit" value="Upload" /></p>
   </form>
</body>
</html> 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:19:21.917

您只从上传的文件中读取一行。也许第一行是空行？试试`fileitem.file.read()`吧，这会将整个文件读入一个字符串。不要对大文件这样做，因为您可能会耗尽内存，但这应该有助于理解您的测试。

# php - PHP file_exists 在骗我（说文件存在但它不存在）

> ID：13275659
> 
> 赞同：2
> 
> 时间：2012-11-07T18:14:50.760
> 
> 标签：php

这样做：

```
php -r 'unlink("path"); clearstatcache(); echo file_exists("path");' 
```

其中 path 是我的 linux 机器上文件的完整绝对路径。`1`即使文件明显不存在，命令也会返回“ ”。你可以运行这个命令一百万次，它总是会告诉你文件在那里。

跑步：

```
ls path 
```

告诉你没有这样的文件。

是什么赋予了？

更新：我知道 clearstatcache()。在这种情况下，这无济于事。此外，我正在使用 cli 运行它。从运行到运行没有任何变化。我也在运行 ubuntu 11.10 的 64 位 VM 上。

路径只是文件系统上的一个路径：/var/www/yo.txt。www 是一个 nfs 共享挂载，不确定是否与它有关。该文件已从远程计算机中删除，但本地计算机似乎知道它不存在。目录上的“ls”不显示任何文件，并且带有路径声明的 ls 表示该文件不存在。该文件只有几 kb，没什么大不了的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-18T16:39:34.077

PHP 说的是它知道的真相。罪魁祸首是 NFS 属性缓存。您可以`clearstatcache`整天打电话，但没有任何效果：NFS 负责。

我探索了[另一个 SO 答案中](https://stackoverflow.com/a/41724398/2908724)发生了什么，但简短的答案是：调整您的 NFS 挂载选项以提供更快的答案（尝试[`noac`](https://linux.die.net/man/5/nfs)）或使用[`opendir()`](http://php.net/manual/en/function.opendir.php)并使[`closedir()`](http://php.net/manual/en/function.closedir.php)NFS 缓存无效然后调用`clearstatcache()`，例如：

```
php -r 'unlink("path"); $d = dirname("path"); opendir($d); closedir($d); clearstatcache(); echo file_exists("path");' 
```

# android - 在尝试发送 SMS 之前检查 Android 中的网络覆盖范围

> ID：13275663
> 
> 赞同：5
> 
> 时间：2012-11-07T18:15:08.077
> 
> 标签：android, networking

我想为 Android 智能手机创建一个应用程序，用于检查手机是否处于飞行模式。如果是，应用程序将手机关闭飞行模式并检查是否有任何网络连接来发送 SMS。当我说网络连接时，我是指发送短信的手机网络覆盖范围，我不想检查互联网连接。如果有网络连接，应用程序将尝试发送 SMS。

我已经设法进行飞行模式检查和切换，但我找不到查看手机是否连接到蜂窝网络以及是否有覆盖范围的方法。我发现了许多检查 Internet 网络连接的示例，但这不是我需要的。

有没有办法检查手机是否连接到蜂窝网络以及是否有覆盖发送短信？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T18:29:24.990

使用它来检查信号强度：

```
 TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);

    PhoneStateListener signalListener = new PhoneStateListener() {
        public void onSignalStrengthChanged(int asu) {
            //asu is the signal strength
        }
    };

    telephonyManager.listen(signalListener, PhoneStateListener.LISTEN_SIGNAL_STRENGTH); 
```

# c# - 使用 Html.Action 将参数传递给局部视图

> ID：13275664
> 
> 赞同：2
> 
> 时间：2012-11-07T18:15:12.490
> 
> 标签：c#, asp.net-mvc, razor

我正在开发一个 MVC 应用程序（剃刀语法），并且在将参数传递给我的`Html.Action`调用时遇到问题。下面是我正在实施的搜索页面。请注意，模型包含要在下拉列表中使用的不同值。

从视图调用：

```
@using(Html.BeginForm("Search", "Home", FormMethod.Get, null)){

@Html.LabelFor(model => model.siteCode)
@Html.DropDownListFor(model => model.siteCode, new SelectList(Model.siteCode), "All")

@Html.LabelFor(model => model.group)
@Html.DropDownListFor(model => model.group, new SelectList(Model.group), "All")
}

@Html.Action("ShowOrderData", "Home", new {siteCode = Model.siteCode, group = Model.group} 
```

控制器中的操作：

```
public ActionResult ShowOrderData(string siteCode = "",
                                        string group = "",)
{
        var model = _db.ToolOrders
            .Where(r => r.SiteCD_LOC.Contains(siteCode))
            .Where(r => r.GroupCode.Contains(group))

return PartialView("_OrderData", model);
} 
```

注意：可能存在一些语法错误。还有大约 10 个参数被传递，我不想阻塞代码块。

因此，在使用此代码进行调试时，会将空字符串发送到我的*ShowOrderData*控制器。我试图在 Html.Action 调用 ( `Model.siteCode.ToString()`) 中添加 .ToString，然后会显示一个 LINQ 语句。我猜这种方法是错误的，因为模型不包含来自先前请求的任何信息。

如何正确地将数据从 QueryString 发送到局部视图？我见过通过 request.querystring 直接访问 queryString 的方法，但我也听说在视图中使用它是不好的做法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:22:41.540

利用：

```
 @Html.RouteLink() 
```

而不是行动

# ios - MonoTouch：接近过时的 iOS 方法

> ID：13275665
> 
> 赞同：4
> 
> 时间：2012-11-07T18:15:13.680
> 
> 标签：ios, xamarin.ios, obsolete

随着 iOS 的升级，旧版本的签名和方法被 MonoTouch 标记为**过时**。

我的问题是，如果我们接受 MonoTouch 提供的新方法的建议，我们会对旧 iOS 版本产生负面影响吗？

我了解 iOS 6 中的 Facebook 等新功能在 4.3 中不可用，但这个问题更多的是关于将 MonoTouch 应用程序迁移到更高版本的 IOS 的同时保持兼容性。

例如：

*运行 MonoTouch 6 应用程序的 iOS 4.3 设备：删除过时的方法并用新方法替换它们仍然有效吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:25:34.537

没有单一的、通用的答案，因为它取决于方法/类型被废弃的原因。

大多数`[Obsolete]`属性都有一条消息说明您应该避免使用它们的原因。他们大多分为两组：

*   API 中存在绑定错误，例如拼写错误。添加了一个新的 API 来纠正这个问题（它的名称应该是描述的一部分）。在这种情况下，对于 4.3 设备，使用 MonoTouch 6.x 中添加的新 API 是没有问题的；

*   Apple 引入了一种新的 API，并弃用了旧的 API。在这种情况下，描述应该说明新的 API 和它适用的 iOS 版本。如果您希望针对较旧的设备（例如 5.x），则不应**使用新的 API（例如在 iOS 6.0 中添加的任何内容）。**

如果您发现`[Obsolete]`没有任何文本消息的方法/类型，或者文本不够清晰，无法做出明确的决定，请[提交错误报告](http://bugzilla.xamarin.com)以便更正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:11:58.690

这可能有助于测试。添加旧 iPhone 模拟器：

**打开 xcode 并在顶部菜单中转到 xcode >> 首选项 >> 下载，您将可以选择下载旧的 sdks 以与 xcode 一起使用。您还可以下载命令行工具和设备调试支持。**

这将让您进入模拟器硬件/版本菜单并选择 4.3 或 5.0 或 5.1 等。

# android - Android Activity 作为对话框黑色边框

> ID：13275666
> 
> 赞同：0
> 
> 时间：2012-11-07T18:15:16.207
> 
> 标签：android, android-dialog

我有活动作为对话，所有我喜欢的节目。但是我对它们周围的框架有疑问。就像这里一样。

![在此处输入图像描述](../Images/1006410fd129a474a9afc8d965bc0706.png)

我的活动：

```
public class AlarmAlert extends Activity implements Alarms.AlarmSettings {

    @Override
        protected void onCreate(Bundle icicle) {
            super.onCreate(icicle);

            AlarmAlertWakeLock.acquire(this);

            /*
             * FIXME Intentionally verbose: always log this until we've fully
             * debugged the app failing to start up
             */
            Log.v("AlarmAlert.onCreate()");
            DigitalClock dc = (DigitalClock) findViewById(R.id.digitalClock1);

            mKeyguardManager = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);

            Intent i = getIntent();
            mAlarmId = i.getIntExtra(Alarms.ID, -1);

            Alarms.getAlarm(getContentResolver(), this, mAlarmId);

            mKlaxon = new AlarmKlaxon();
            mKlaxon.postPlay(this, mAlarmId);

            /* Set the title from the passed in label */
            setTitleFromIntent(i);

            /*
             * allow next alarm to trigger while this activity is active
             */
            Alarms.disableSnoozeAlert(AlarmAlert.this);
            Alarms.disableAlert(AlarmAlert.this, mAlarmId);
            Alarms.setNextAlert(this);

            mKlaxon.setKillerCallback(new AlarmKlaxon.KillerCallback() {
                public void onKilled() {
                    if (Log.LOGV)
                        Log.v("onKilled()");
                    updateSilencedText();

                    /* don't allow snooze */
                    mSnoozeButton.setEnabled(false);
                    dismiss();
                    mState = KILLED;
                }
            });

            updateLayout();

            SharedPreferences settings = getSharedPreferences(
                    AlarmClock.PREFERENCES, 0);
            if (settings.getBoolean(AlarmClock.PREF_SHAKE_SNOOZE, true)) {
                mShakeListener = new ShakeListener(this);
                mShakeListener
                        .setOnShakeListener(new ShakeListener.OnShakeListener() {
                            public void onShake() {
                                snooze();
                                if (mCaptchaSnooze == 0)
                                    finish();
                            }
                        });
            }
        }

        private void setTitleFromIntent(Intent i) {
            mLabel = i.getStringExtra(Alarms.LABEL);
            if (mLabel == null || mLabel.length() == 0) {
                mLabel = getString(R.string.default_label);
            }
            setTitle(mLabel);
        }

        private void updateSilencedText() {
            TextView silenced = (TextView) findViewById(R.id.silencedText);
            silenced.setText(getString(R.string.alarm_alert_alert_silenced,
                    mDuration / 1000 * 60));
            silenced.setVisibility(View.VISIBLE);
        }

        private void updateLayout() {
            setContentView(R.layout.alarm_alert); 
```

我的 alert_alarm.xml（对话框）。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root"
    android:layout_width="327dp"
    android:layout_height="295dp"
    android:background="@drawable/alertbg"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/silencedText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:paddingBottom="2dp"
        android:paddingTop="2dp"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="@color/ltgrey"
        android:visibility="gone" />

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="230dp"
        android:gravity="center_horizontal" >

        <Button
            android:id="@+id/snooze"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="25dp"
            android:layout_marginTop="20dp"
            android:background="@drawable/teesstt"
            android:text="@string/snooze_button"
            android:textColor="#fff"
            android:textSize="25dp"
            android:visibility="visible" />

        <Button
            android:id="@+id/dismiss"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="25dp"
            android:layout_marginTop="20dp"
            android:background="@drawable/teesstt"
            android:text="@string/dismiss_button"
            android:textColor="#fff"
            android:textSize="25dp"
            android:visibility="visible" />
    </RelativeLayout>
    <TextView
        android:id="@+id/tvDD"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/tvDate"
        android:layout_alignLeft="@+id/tvDate"
        android:text="Medium Text"
        android:textSize="20dp"
        android:textColor="#a6a6a6" />
    <TextView
        android:id="@+id/tvDate"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/relativeLayout1"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="55dp"
        android:layout_marginLeft="30dp"
        android:text="Medium Text"
        android:textSize="25dp"
        android:textColor="#a6a6a6" />

    <com.boxclocks.android.alarmclock.dc
        android:id="@+id/digitalClock1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="30dp"
        android:layout_marginTop="58dp"
        android:text="DigitalClock"
        android:textColor="#a6a6a6"
        android:textSize="70dp" />

</RelativeLayout> 
```

怎么去掉边框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-21T08:59:05.593

dialog.getWindow().setBackgroundDrawableResource(android.R.color.transparent);

[对话](http://tutorials-android.blogspot.in/2011/08/remove-title-bar-to-custom-dialog-and.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T23:12:49.723

你有两个选择。您可以将 Activity 的主题设置为

```
 Theme_Translucent_NoTitleBar 
```

或者您必须创建一个新主题并使用此处指定的自定义九补丁加载它

[如何从对话框中删除边框？](https://stackoverflow.com/questions/8051581/how-to-remove-border-from-dialog)

# javascript - 桌面应用程序上的 javafx + javascript

> ID：13275668
> 
> 赞同：0
> 
> 时间：2012-11-07T18:15:33.660
> 
> 标签：javascript, desktop, javafx

我在 JavaFX 方面没有任何经验，我对 javascript 了解一点。我想在 JavaFX 中开发一个桌面应用程序，并在 JavaFX 代码中添加一些 javascript 功能。我有一个 .js 文件，其中包含我需要使用的功能，但我不知道如何使用它们。这样做的主要步骤是什么？我被告知这是可能的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:20:06.583

您可以在[fxml 文档中使用](http://docs.oracle.com/javafx/2/fxml_get_started/jfxpub-fxml_get_started.htm)[脚本](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#scripting)和[脚本事件处理程序](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html#script_event_handlers)。

您还可以嵌入[WebView](http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)来处理 HTML 和 JavaScript。

# java - Java 拖动绘制的球

> ID：13275677
> 
> 赞同：0
> 
> 时间：2012-11-07T18:16:24.803
> 
> 标签：java, jpanel, mousemotionevent

我创建了一个程序，当我点击屏幕时会画一个圆圈。我让它工作，这样我就可以画出尽可能多的圆圈。如果我对要拖动的圆圈进行硬编码，我什至可以拖动一个圆圈而不是其他圆圈。代码是：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.List;
import java.util.ArrayList;

public class DrawBall extends JPanel implements MouseListener, MouseMotionListener {
private List<Ball> balls;
private int x, y;
private int numBalls = 0;
boolean drag = false;

public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            createAndShowGUI();
        }
    });
}

private static void createAndShowGUI() {
    JFrame frame = new JFrame("Draw Ball");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JComponent newContentPane = new DrawBall();
    newContentPane.setOpaque(true);
    frame.setContentPane(newContentPane);
    frame.setSize(300, 300);
    frame.setVisible(true);
}

public DrawBall() {
    super(new BorderLayout());
    balls = new ArrayList<Ball>(10);
    addMouseListener(this);
    addMouseMotionListener(this);
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g.create();
    g2d.setRenderingHint(RederingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    for(Ball ball: balls) {
        ball.paint(g2d);
    }
    g2d.dispose();
}

public void mouseClicked(MouseEvent event) {
    x = (int) event.getPoint().getX();
    y = (int) event.getPoint().getY();
    Ball ball = new Ball(Color.red, numBalls, 30);
    ball.setX(x);
    ball.setY(y);
    balls.add(ball);
    numBalls = numBalls + 1;
    repaint();
}

public void mousePressed(MouseEvent event) {
    drag = true;
}

public void mouseReleased(MouseEvent event) {
    drag = false;
}
public void mouseEntered(MouseEvent event) {}
public void mouseExited(MouseEvent event) {}

public void mouseDragged(MouseEvent event) {
    if(drag == true) {
        x = (int) event.getPoint().getX();
        y = (int) event.getPoint().getY();
        if(event.getSource() == balls.get(0)) {
            Ball ball = balls.get(0);
            ball.setX(x);
            ball.setY(y);
            balls.set(0,ball);
        }
        repaing();
    }
}

public void mouseMoved(MouseEvent event) {}

public class Ball {
    private Color color;
    private int x, y, diameter, id;

    public Ball(Color color, int id, int diameter) {
        setColor(color);
        setID(id);
        setDiameter(diameter);
    }

    public void setX(int x) {
        this.x = x;
    }

    public void setY(int y) {
        this.y = y;
    }

    public void setID(int id) {
        this.id = id;
    }

    public void setDiameter(int diameter) {
        this.diameter = diameter;
    }

    public void setColor(Color color) {
        this.color = color;
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    public int getID() {
        return id;
    }

    public int getDiameter() {
        return diameter;
    }

    public Color getColor() {
        return color;
    }

    protected void paint(Graphics2D g2d) {
        int x = getX();
        int y = getY();
        g2d.setColor(getColor());
        g2d.fillOval(x, y, getDiameter(), getDiameter());
    }
}
} 
```

我的问题是：在我的 mouseDragged 方法中，有没有一种简单的方法可以判断我悬停在哪个圆圈上？我玩过 event.getSource() ，但它似乎对我的圈子不起作用，至少不是我期望的那样。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:23:35.370

修改您的 Ball 类，使其基于中心点和半径创建一个圆，而不是左上角点和直径。

[然后，您可以通过将距离公式](http://www.purplemath.com/modules/distform.htm)依次应用到您单击的点和每个球的中心点来计算您是否在圆内单击。

距离小于半径的第一个球是您点击的球。或者，如果您想要更复杂，距离小于半径的最小距离的球就是您单击的球。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:47:43.237

您可以修改您`Ball`的类以利用[Shape 的 API](http://docs.oracle.com/javase/tutorial/2d/geometry/index.html)，并使用 an[`Ellipse2D`](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/Ellipse2D.html)来维护圆的坐标并渲染它。

然后，您可以简单地使用[`Ellipse2D#contains`](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/RectangularShape.html#contains%28java.awt.geom.Point2D%29)来确定形状是否被单击。

您将不得不循环检查每一个球的集合，直到您到达终点或找到​​您正在寻找的球

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:36:51.323

在这种情况下，事件源是 JPanel，而不是 Ball。尝试`System.out.println(event.getSource());`在您的 mouseDragged() 方法中添加一个以亲自查看。正如其他人所建议的那样，只需计算从鼠标按下的点到您的圆圈的距离。基于中心/半径将使数学更容易。

# data-mining - Weka 的回归树森林

> ID：13275683
> 
> 赞同：2
> 
> 时间：2012-11-07T18:16:53.427
> 
> 标签：data-mining, classification, weka, regression, random-forest

我正在使用 Weka，并希望使用随机森林进行回归。具体来说，我有一个数据集：

```
Feature1,Feature2,...,FeatureN,Class
1.0,X,...,1.4,Good
1.2,Y,...,1.5,Good
1.2,F,...,1.6,Bad
1.1,R,...,1.5,Great
0.9,J,...,1.1,Horrible
0.5,K,...,1.5,Terrific
.
.
. 
```

我不想学习预测最可能的类别，而是想学习给定特征向量的类别上的概率分布。我的直觉是，在 Weka 中仅使用 RandomForest 模型是不合适的，因为它会尝试最小化其绝对误差（最大似然）而不是平方误差（条件概率分布）。这种直觉对吗？如果我想执行回归而不是分类，是否有更好的模型可以使用？

**编辑：**我现在实际上在想，实际上这可能不是问题。据推测，分类器正在学习条件概率 P(Class | Feature1,...,FeatureN)，而得到的分类只是在 Class 中找到使概率分布最大化的 c。因此，一个 RandomForest 分类器应该能够给我条件概率分布。我只需要再考虑一下。如果那是错误的，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:04:33.097

如果要显式预测每个类的概率，则需要不同的输入数据。也就是说，您需要替换要预测的值。您需要 n 个数据集（用于 n 个不同的标签），而不是一个具有类标签的数据集，其中每个唯一特征向量具有聚合数据。您的数据看起来像

```
Feature1,...,Good
1.0,...,0.5
0.3,...,1.0 
```

和

```
Feature1,...,Bad
1.0,...,0.8
0.3,...,0.1 
```

等等。您需要为每个类学习一个模型，并在要分类的任何数据上分别运行它们。也就是说，对于每个标签，您学习一个模型来预测一个数字，该数字是在给定特征向量的情况下属于该类别的概率。

如果您不需要明确预测概率，请查看 Weka 中的贝叶斯分类器，它利用了他们学习的模型中的概率。

# c++ - C++ 运行时字段访问

> ID：13275686
> 
> 赞同：-1
> 
> 时间：2012-11-07T18:17:07.037
> 
> 标签：c++, runtime, field

```
class SuperClass{
/* ====================  METHODS       ======================================= */
    void
    setValue (
            std::string name,
            int         i ) {
        MemberMapIterator it = memberMap_.find ( name );
        if ( it != memberMap_.end ( ) ) {
            void* ptr = ( *it ).second;
            long long classPtr = reinterpret_cast< long long > ( this );
            long long memberPtr = reinterpret_cast< long long > ( ptr );
            int* value = reinterpret_cast< int* > ( classPtr + memberPtr );
            ( *value ) = i;
        }
    } // setValue

    int
    getValue (
            std::string name ) {
        MemberMapIterator it = memberMap_.find ( name );
        if ( it != memberMap_.end ( ) ) {
            void* ptr = ( *it ).second;
            long long classPtr = reinterpret_cast< long long > ( this );
            long long memberPtr = reinterpret_cast< long long > ( ptr );
            int* value = reinterpret_cast< int* > ( classPtr + memberPtr );
            return *value;
        }
        return -234234;
    } // getValue
protected:
    /* ====================  METHODS       ======================================= */
    void
    Build ( ) {
        configure ( );
    } // Build

    void
    AddMember (
            std::string name,
            void*       ptr ) {
        memberMap_.insert ( MemberMapPair ( name, ptr ) );
    } // AddMember

    /* ====================  STATIC METHODS======================================= */
    virtual void
    configure ( ) = 0;

private:
    /* ====================  METHODS       ======================================= */

    /* ====================  DATA MEMBERS  ======================================= */
    MemberMap memberMap_;
};

class SubClass: public SuperClass {
public:
    /* ====================  LIFECYCLE     ======================================= */
    SubClass( ) : age_ ( 0 ) {
        Build ( );
    }                         /* constructor      */

    ~SubClass( )                                           /* destructor       */
    { }

protected:
    /* ====================  STATIC METHODS======================================= */
    void
    configure ( ) {
        long long classPtr =  reinterpret_cast< long long > ( this );
        long long agePtr =  reinterpret_cast< long long > ( &this->age_ );
        void* ptr = reinterpret_cast< void* > ( agePtr - classPtr );
        this->AddMember ( "age", ptr );
    } // configure

private:
    /* ====================  DATA MEMBERS  ======================================= */
    int age_;
} 
```

在子类中，我使用字符串名称作为键添加私有类字段的偏移量（将类视为 C 结构）超级类映射。我将只执行一次配置，然后我想使用这个偏移**量每个 Person 实例在运行时访问其私有字段**（this + offset = field）。这会安全吗？我测试了这段代码及其工作，它正在做我想做的事。但是我应该期待任何内存违规或其他事情（假设它不会是故意违规（程序员错误））吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:12:17.040

首先，值得知道**C++ 类不像 C 结构**。编译器将额外的东西放在类中，例如 vtable 指针，它可能位于开头、结尾或其他位置，具体取决于编译器。有一种类的行为类似于 C 结构（即一袋位），它们被称为普通旧数据类型 (POD)。你可以在 StackOverflow 上找到很多关于它们的信息。由于您使用的是继承，因此您没有使用 POD。

如果您试图强制访问私有成员，您可能需要重新设计您的设计。您首先应该问自己为什么它们是私有的。根据您在代码中的目标，我可以想到更直接的方法：

*   将基类转换为子类，然后使用 setter 函数设置私有成员。
*   您可以在子类中创建`setValue`和`getValue`虚拟并覆盖它。
*   使用友谊。

# c++ - 如何使用某种二进制签名识别 WinRAR SFX？

> ID：13275687
> 
> 赞同：3
> 
> 时间：2012-11-07T18:17:15.583
> 
> 标签：c++, archive, winrar, self-extracting

我正在寻找与[此问题中](https://stackoverflow.com/questions/9542538/recognize-a-7z-sfx-from-binary-contents)的答案类似的答案，但使用的是 WinRAR 而不是 7zip。本质上，我想要一个权威的签名，我至少可以说“所有 WinRAR 生成的自解压可执行文件在版本 420 中使用默认 SFX 文件创建，在位置 0x00027400 和其他非SFX 文件不太可能有这个签名”。更好的是，如果可以在所有版本的 WinRAR SFX 文件中找到相同的签名，即使它们位于不同的位置。

就 SFX 的工作方式而言，它们非常相似，除了文件的存档部分，但有些字符串的标识符很差（例如，“这个程序不能在 DOS 模式下运行”出现在每个 SFX 中，但它恰好也存在于大多数其他 Windows 可执行文件中）

目前我确定签名的方法是查看不同版本的 WinRAR SFX，并找到所有文件共有的 4 或 6 字节序列。不幸的是，其中有很多，因此很难选择一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:04:19.923

从WinRAR 安装文件夹中的*TechNote.txt ：*

> 1.  要处理 SFX 存档，您需要跳过 SFX 模块在存档中搜索标记块。SFX 模块本身没有标记块序列（0x52 0x61 0x72 0x21 0x1a 0x07 0x00）。

您已经指出了这一点：unrar 源代码在*archive.cpp*中有它如何读取文件的代码。SFX 部分的最大大小永远不会大于*rdefs.hpp*中定义的数字：

```
#define  MAXSFXSIZE        0x100000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T00:57:47.140

If I have it right, you'd like to look a file up and see if it is a valid SFX file built with WinRAR, right?

In this case, these are the PE signatures you should be looking for (haven't tried them, but they're listed in the PE sig DB linked at the bottom):

WinRAR-SFX=80E9A1C1C11368E4167546C1C1055EEB019D6864863746EB028CE05FF7D0 WinRAR-SFX=EB0102EB02CD20B880

Just get the entry point and see if these bytes are following in the right order. An extensive list of PE signatures is available at [http://tot-ltd.org/packer.db](http://tot-ltd.org/packer.db).

# jquery - jQuery 可排序列表 - 禁用第一个元素

> ID：13275688
> 
> 赞同：2
> 
> 时间：2012-11-07T18:17:18.810
> 
> 标签：jquery, jquery-ui-sortable

我有一个可排序的列表，但我想禁用第一项，以便无法移动输入字段。

这是列表：

```
<ul id="sortable" class="connectedSortable">
    <input name="name1" class="inputfield" type="text" maxlength="30">
    <li>first sort item</li>
    <li>second sort item</li>
</ul> 
```

和js：

```
$("#sortable:not(:first-child)").sortable({
            connectWith : ".connectedSortable"
        }); 
```

我试图用 :not(:first-child) 解决这个问题，但它不起作用......有人知道怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T18:28:30.083

这个怎么样？

```
$( "#sortable" ).sortable({
    items: '> li'   
}); 
```

[演示](http://jsfiddle.net/WVqcc/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T18:24:51.713

如果您修复您的 HTML 以便您的输入正确包装在列表项中，那么您可以尝试使用 sortables 的[items 选项](http://api.jqueryui.com/sortable/#option-items)：

```
$("#sortable").sortable({
    items: "> li:gt(0)", 
    connectWith: ".connectedSortable"
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/qfnpa/1)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T18:28:42.103

您的 HTML 无效，因为您不能在 a`<ul>`中包含不在`<li>`'s 中的 HTML。

```
var _input = $("#sortable :first-child");

$('#sortable').before(_input); // move it outside of the UL
$('#sortable').sortable(); 
```

[http://jsfiddle.net/nF7yW/](http://jsfiddle.net/nF7yW/)

# excel - Application.Inputbox [LEFT] 和 [TOP] 在 Excel Vba 中不起作用。为什么？

> ID：13275692
> 
> 赞同：3
> 
> 时间：2012-11-07T18:17:34.863
> 
> 标签：excel, inputbox, vba

我的 VBA 代码中有一个简单的输入框。我想设置它的起始位置。我知道参数 [LEFT] 和 [TOP] 应该这样做，但它们不起作用。

这是我所拥有的：

```
x = Application.InputBox(MyPrompt, MyTitle, , 50, 50) 
```

这是函数语法

```
 InputBox(Prompt, Title, Default, Left, Top, HelpFile, HelpContextId, Type) 
```

（我将第三个参数 [DEFAULT] 留空）。

无论我为 LEFT 和 TOP 使用什么数字，输入框总是从同一个地方开始。那有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T18:41:41.543

之间有区别

```
InputBox("prompt","title","default", 10000,10000) 
```

它确实使用了顶部/左侧参数，并且

```
Application.InputBox("prompt","title","default", 10000,10000) 
```

没有。

请注意，顶部/左侧以点为单位，因此您提供的值需要大于您可能习惯的值...

[http://msdn.microsoft.com/en-us/library/office/aa195768(v=office.11​​).aspx](http://msdn.microsoft.com/en-us/library/office/aa195768(v=office.11).aspx)

> “InputBox 方法与 InputBox 函数的不同之处在于它允许选择性地验证用户的输入，并且它可以与 Microsoft Excel 对象、错误值和公式一起使用。请注意，Application.InputBox 调用 InputBox 方法；InputBox 没有对象限定符调用 InputBox 函数。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-09T10:52:08.980

高，
这个话题在我几周前尝试解决类似问题时进行的搜索中出现了很多。
我现在有一个解决方案，所以我想我会把它传递给其他有同样问题的人登陆这里
**问题总结和澄清已经给出的几点**
VBA 输入框函数（和 VBA MsgBox 框函数）是Modal，换句话说，当电子表格启动时，您无法对电子表格执行任何操作。他们似乎运作良好。
当您选择额外的最后一个*Type:=*选项时，应用程序输入框方法应该允许您执行此电子表格选择，*Type:=8*。（事实上​​，电子表格选择适用于所有*Type:=*选项，但 *Type:=8* ( Range ) 对我来说特别感兴趣。VBA 输入框功能仅允许您在框输入栏中输入字符串信息）
应用程序输入框方法确实允许您通过电子表格选择执行此*类型：= 8*（范围），但有几件事被破坏了：
_定位弹出窗口的能力（自 Excel 2007 以来似乎已损坏）
_Microsoft 帮助功能在我看来不适用于 Excel 2003 2007 2010。我不知道它是否适用于应用程序输入框方法
**A 解决方案我现在正在使用**
（这特别**不是使用 UserForm 的解决方案，**因为我也在单独考虑将其作为比较的工作）。这是一个*使用 API Programs 弹出用户伪 InputBox 和范围选择选项*。
这个解决方案克服了这些问题，这是我这样做的主要原因，特别是因为第一个问题，这是这个线程的主要问题。它还有一些额外的可能有用的东西：
_您可以选择弹出窗口的大小（宽度，高度）
_您可以调整“z”的东西......我对这些选项不太清楚，但简单来说就是意味着您根据您看到的窗口的顺序、您看到它的方式和优先级、看到哪些窗口“低于”或“高于”等等来安排它的显示方式。 _ *ByRef*
的简单更改到*呼叫*签名行中的*ByVal****ed 例程允许您将范围对象的值更改为您选择的值，但原始范围对象不会改变，也就是说它的地址保持与选择之前一样。这可以为您在电子表格中选择和移动的方式提供额外的选择。***

 ***所有代码应复制到同一代码模块。（如果详细的评论激怒了，那么您只需点击几下即可轻松地将它们全部放入 - 请参见此处：mrexcel.com/forum/about-board/795476-comments-code.html#post3893448）

第一部分*Rem 1*和*Rem 2*使必要的 API 程序可用并声明（*Dim*的）一些相关的全局变量。本节需要放在代码模块的顶部。
*Rem 1*是直截了当的，它提供了一个伪非模态消息框。
*Rem 2*有点复杂，它提供了一些 API 程序，当它们出现时，它们 需要与*Windows混淆。*

```
 Option Explicit    '                                                                                                    “Window"s is a name for a programming idea which might result in something we “see” as what we conceive as Windows. Manipulating of the actual “Windows” seems the key to pseudo “making my own” InputBox with range selection.        Direct linked libraries (dll) are available to run as and when required, hence the wording of direct link: They are used as an efficient means to organise Microsoft’s software generally allowing different Applications to share smaller programs which are shipped as standard with the Microsoft Windows Operating system. They are however also available to programmers , programming the applications.  They are usually contained in Folder with name similar to User 32\. "API calls”: just means usually that you are using those things and related “Windows” concept-all gets gets bundled up in imprecise intimidating term API, for Application Programming interface
    Rem 1 Pseudo Non Modal MsgBox,   MessageBoxA          API Standard Non Standard Stuff, More Fundamentally complicated    UnWRap it and.. "Pseudo Non Modal MsgBox"           ---  A valid handle, hWnd,  other than the Excel spreadsheet window (  Private Declare Function FindWndNumber Lib "user32" Alias "FindWindowA" (Optional ByVal lpClassName As String, Optional ByVal lpWindowName As String) As Long --- hWndParent = FindWndNumber(lpClassName:="XLMAIN", lpWindowName:=vbNullString)   ),  or even no ( Null ) hWnd results in a pseudo Non Modal MsgBox                                                                                http://www.excelfox.com/forum/showthread.php/2227-VBA-Input-Pop-up-Boxes-Application-InputBox-Method-versus-VBA-InputBox-Function?p=10476#post10470      http://www.tek-tips.com/faqs.cfm?fid=4699
    Private Declare Function APIssinUserDLL_MsgBox Lib "user32" Alias "MessageBoxA" (Optional ByVal hWnd As Long, Optional ByVal Prompt As String, Optional ByVal Title As String, Optional ByVal Buts As Long) As Long  '
    '_- ====  The above is all I need to do so that writing  APIssinUserDLL_MsgBox  in any code in this code module will do something very similar to the VBA  MsgBox.  The main difference is that when it is up, I can still scroll up and down in my Excel Spreadsheet and also select a range.
    Rem 2_b)(ii) == To set/change The positional arguments        "Sub Classing a "Window""       As is generally the case with “Window” Functions, A window belongs to a class. The Dynamic Linked Libraries concept allow the small programs in the with windows shipped typically in the User32 Folder programs to be called up / used at runtime, rather than a fixed set of instructions copied or and/ or used as such at some point. This allows for a modification of the class, known as Sub classing. This means that it is possible to modify / add to the “Window” Function and so pseudo create a customised ddl. It does not necessarily mean that a “Window” Function or a used User32 Folder program is directly Sub classes , but it just happens to be in our case as we are intending to mess about with the MessageBoxA ( or MessageBoxTimeoutA )  You can arrange that a used “Window” Function is modified as it is used.
    ' The next four line will tie something on my chain for when you pull it.                     Similar in the way that a Worksheet_change code is triggered as something happens, you must arrange that a VBA Function is triggered when a Windows “event” occurs. At this point the concept gets a bit vague and I doubt many people really understand anymore how it really works. A good name for the VBA Function might be Function WinSubWinCls_JerkBackOffHooKterd. This VBA Function will itself be a pseudo “Window” Function and “hung” or hooked on a chain of events. Because of the dynamic / volatile nature of the stuff, things will have a habit of going on forever if they not “unhooked” such that a procedure will have to be designed to unhook itself.
    Private Declare Function SetWindowsHooksExample Lib "user32" Alias "SetWindowsHookExA" (ByVal Hooktype As Long, ByVal lokprocedureAddress As Long, Optional ByVal hmod As Long, Optional ByVal DaFredId As Long) As Long '   The effect of this will be: In some predetermined set of instructions or planned chain of events, a “hook” or “marker” or “clap trap” or “page marker” or “trip trap” was made. This was given an identifying number which was returned by that “API Function” and it was chosen to be placed in the main code in a globial variable hHookTrapCrapNumber. I do not think that this number identifies the “page in the book” where the bookmarker is. I think it just is listed somewhere in a list of any active / set up book marks. I guess there might be / could be a few, so you need to distinguish them.
    Dim hHookTrapCrapNumber As Long ' "BookmarkClassNumber --- This makes pseudo  Declare Sub() SetWindowsHooksExample Lib "user32" AliAs "SetWindowsHookExA" (ByVal hHookTrapCrapNumber As Long, ByVal Hooktype As Long, ByVal MyloksPROCedureFukAddress As Long, Optional ByVal RadioButton2Out As Long, Optional ByVal duhFredId As Long) As Long     It was also disgust that possibly the number refers to set instances of a Bookmark class: there may be a few , but they are all effectively connected / activated by the number hHookTrapCrapNumber existing in some register. The bookmarker has a particular type, ( 5 ). The type will be responsible for catching the Message box code line to call the MessageBoxA, (like  APIssinUserDLL_MsgBox &H0, "Select Range", "working ApplicationPromptToRangeInputBox", vbYesNoCancel ). That fires my hook PROCedure Function, WinSubWinCls_JerkBackOffHooKterd. Other things may also fire my hook PROCedure Function. They may or may not be also related to the Popping up of my Box.
    '               Dim BookMarkClassTeachMeWind As Long: Let BookMarkClassTeachMeWind = 5 ' 5 is Hooktype that I will be using. Using a variable for two reasons: '1_- general point in computing that you might get problems when a number is used to refer to something that might take or give a number at some point. But you might need to do that, so having an intermediate word is a workaround for that so that the number is set to a word which is then related to a word that might be being referred to or returning a number. Function = Word --- Word = 873248   '2_- Just to avoid confusion Later as in this particular case later another option number happens to be 5
    Private Declare Function GetDaFredId Lib "kernel32" Alias "GetCurrentThreadId" () As Long '   The Thread is what is going on, I expect that means in this case my VBA. My computer might do something else with or without me knowing. Most things going on will have a Thread number. When used in my code, Function GetDaFredId will return an identifying number referring to the Excel instance that that code line is in.     It is actually needed in the setting of the Windows hook code line only ( that which is last argument in   SetWindowsHookEx(  ,   ,   , DaFredId As Long) ... set a hook, confined to the current thread (so it doesn't get triggered by other things going on) and give it the address of the function that you want to call in response to the hook being triggered. In this I will use 5 CBT hook which is triggered generally by Window messages (activating, creating, destroying, minimizing, maximizing, moving, or sizing a window)
    ' This below takes it off the chain. Or wipe the chain clean.  Or remove it from something.   Or cancel it. Or Kill it.   Or whatever.  In any case it needs the identifying number of the "hook",  then a simple code line as shown in comment below will do this "Killing"    Without doing this the thing seems to go on indefinitely (with or without any recursion. (A recursion is another issue which seems to happen as an additional issue - that occurs when the final API code below (over next line) does its job - that seems to fire  my Hook PROCedure function WinSubWinCls_JerkBackOffHooKterd
    Private Declare Function UnHookWindowsHookCodEx Lib "user32" Alias "UnhookWindowsHookEx" (ByVal hHookTrapCrapNumber As Long) As Long '               'Release the Hook           This is used in code in a simple code line like:-      Call UnHookWindowsHookCodEx(hHookTrapCrapNumber)
    '_-  === All of the above in section Rem 2 is required so that I am able to organise that when I use APIssinUserDLL_MsgBox another program (my windows hookProcedure program WinSubWinCls_JerkBackOffHooKterd) is triggered. (It has a habit of being triggered indefinitely so the API program Decared in the last line above will be used to stop that happening).
    '2(d)=== The Final API program below we need to actually do what we want.  (WindowIdentifyinghandle,    zorder         ,   x                ,       y            ,       width         ,     height          ,       zFurtherInfo  ) '_- Most is obvious, except the z stuff -      WindowIdentifyinghandle/wParam   is one the parameters passed in some secret process to my Function WinSubWinCls_JerkBackOffHooKterd(   , wParam ,   ) and will be the windows identifying number for my Message box that is popping up.  ( ,10 ,50 ,400 ,150 , ) These four numbers are the horizontal and vertical size and positions.   ( 0, , , , ,40 ) The two numbers 0 and 40 are chosen after a bit of intuitive guessing based on Microsoft references like https://msdn.microsoft.com/en-us/library/windows/desktop/ms633545(v=vs.85).aspx    The end effect is to have the window seen as dominantly as wanted. They are likely to be based to some extent on experimenting in a particular requirement.
    Private Declare Function SetWindowPosition Lib "user32" Alias "SetWindowPos" (ByVal hWnd As Long, ByVal zNumber As Long, ByVal CoedX As Long, ByVal CoedY As Long, ByVal xPiXel As Long, ByVal yPiYel As Long, ByVal wFlags As Long) As Long '    This API prog will be called in my hook PROCedure function.  So.. Rem 2a)-c) sets "Bookmark"/ series of "Bookmarks"/ Microsoft Windows cyber Robot monitering events (of "type 5", i.e. my Pop up coming up is one such. When such a event occurs my function is triggered by Windows software monitering Robot, he knows where/which my function WinSubWinCls_JerkBackOffHooKterd is from the  AddressOf  in a "hook setting code line" like  (5 ,AddressOf WinSubWinCls_JerkBackOffHooKterd , 0, ThreadID) The monitoring Robot program thing passes somehow  (a number from a list of event types to tell me more precisely what event it noticed, wParam-identifying number of the Window doing that event, possibly some other mouse thing info thing am not bothered about)
    Dim Booloks As Boolean ' I use this in the code line  Booloks = SetWindowPosition(WindowIdentifyinghandle, zorder,x, y, width, height ,zFurtherInfo)   I don't seem to need this, but as a function, the SetWindowPos is designed to return a value. In this usage I have not experienced problems using it as a Sub routine Call like    Call SetWindowPosition( , , , , , , )    but to be on the safe side I have used it as a Function returning its return in a Boolean variable, Booloks
    Dim GlobinalCntChopsLog As Long ' I use this to keep track of the copy number of my Hook PROCedure function WinSubWinCls_JerkBackOffHooKterd, that is to say check for when that  = 2\. If that is the case I do the "unhooking" and Exit the Function 
```

第*3a)*部分将是您想要使用/调用*带有范围选择的 Pop Up User 伪 InputBox*
的主要代码 我所做的简单演示有助于说明我提到的关于将*ByRef*更改为*ByVal*的事情。如果您使用代码并在下一个代码部分的开头更改它（*ByXxx*），那么我认为您会明白我在此建议的内容
所以在第*3a 部分）*与问题相关的主要内容是行
*调用 HangAHookToCatchAPIssinUserDLL MsgBoxThenBringThatMsgBoxUp(RSel)*
该代码行使弹出窗口出现，并且选定的电子表格范围作为变量*RSel*中的范围对象返回。代码将等到您做出选择，但它不会阻止您做出选择。因此，在这方面，它的工作方式类似于应用程序输入框方法（当您使用该应用程序输入框方法并选择最后一个选项为*Type:=8*时）。

```
 '  ========================
    Rem 3a) This is just to demo the idea of a Pop Up User InputBox with range selection alternative with API User 32 dll Programs.      ' Normally in this section 3a) there would be other stuff and probably lots of it and if I have anything to do with it then it will be very Pretty.. Pretty well disgusting probably.
    Sub MainSubWithAllOtherStuffInIt() ' This would be your main coding and would nornally be a lot bigger, it is just here as part of the demo for a Pop Up User InputBox with range selection alternative with API User 32 dll Programs
    ' Some where in the main code I might want to ask the user to select a range. So to do that I
    Dim RSel As Range ' This is a variable to hold the Pointer to the users range object..        So this variable in VBA is like the Link to the part of a URL string reducing size site where a few things about the actual Final site is informed about. This area in that site, like a pigeon Hole to which the variable refers, ( the "pigeon hole" location address, and all its contents would be defined as the "Pointer". Amongst other things it has a link, a "Pointing part", pointing to actually where all the stuff is
     'Set RSel = Selection ' This line will be needed if you chose to send ByVal. That is necerssary to ensure that you have a range object - If you do not have a range object when you go to HangAHookToCatchAPIssinUserDLL_MsgBoxThenBringThatMsgBoxUp(ByVal RcelsToYou), then you wont have one when you get back neither, as in HangAHookToCatchAPIssinUserDLL_MsgBoxThenBringThatMsgBoxUp you will be Set ing the copy variable, not the actual RSel variable. You put a copy of the Pointer in the new variable. But it is an object. A different object. A Copy object.   https://www.excelforum.com/excel-programming-vba-macros/1138804-help-understanding-class-instancing-cant-set-ws-new-worksheet-intellisense-offers-it-2.html#post4386360
     Call HangAHookToCatchAPIssinUserDLL_MsgBoxThenBringThatMsgBoxUp(RSel)  '                     In a normal application of the main Theme of all this, this would be the main code line you use to cause a the "Pop Up User pseudo InputBox with range selection alternative with API User 32 dll Programs"
     VBA.MsgBox Prompt:="Address check RSel - It is now " & RSel.Address & "" & vbCrLf & "Da .Value of the range object is " & RSel.Value ' Just done to demo that A simple change of the ByRef to ByVal in the signature line of a Called routine allows you to change the value of a range object to that of the selection, but the original range object will not change, that is to say its address remains as before the selection.
    End Sub 
```

第*3b)-3c)*节做了两件主要的事情。
_ “Hook”是“Hanged”，它会同时执行
__ “catch” 事件，类似于弹出的“非模态消息框”，
然后当它执行时
__ 触发*函数 WinSubWinCls JerkBackOffHooKterd*
我试图在更多中解释所有内容'评论中的详细信息（以及下面的第一个参考。）
实际上看起来最终发生的事情是，通常当我的消息框弹出时，该功能在到达我真正想要的“事件”之前被触发 6 次，即消息盒子窗口被激活

```
 Private Sub HangAHookToCatchAPIssinUserDLL_MsgBoxThenBringThatMsgBoxUp(ByRef RcelsToYou) ' This will by referral To You, (RSel), the actual Pointer of you the original RSel.  This is not too important a point here, but intersting if you consider the next line alternative to this one.....
    ' Public Sub HangAHookToCatchAPIssinUserDLL_MsgBoxThenBringThatMsgBoxUp(ByVal RcelsToYou)     The RSel Pointer aint Gone anywhere if you do this. Just a copy of the Pointer is here. This will allow you to change the value as the Pointer or a copy of it will tell you where to go and do that... But in neither this line or the last line case have you sent the range object. If you use this line then you will find that the address of the range object will not change, as that refers to the range object of the copy variable in this subroutine. But that will not change the range object of RSel
     Set RcelsToYou = Selection ' 3c(-i)                                                          Pointer GoneTo -1 WTF
Noughty:                        ' 3c(0i)                                                          Pointer GoneTo 0y WTF
    ' 3b) Hang A Hook to catch things like APIssinUserDLL_MsgBox,   ....  HOOK: Hook the pseudo Windows Sub Class Function WinSubWinCls_JerkBackOffHooKerd
    Dim BookMarkClassTeachMeWind As Long: Let BookMarkClassTeachMeWind = 5 ' I do not need this. 5 is Hooktype that I will be using. Using a variable for two reasons: '1_- general point in computing that you might get problems when a number is used to refer to something that might take or give a number at some point. But you might need to do that, so having an intermediate word is a workaround for that so that the number is set to a word which is then related to a word that might be being referred to or returning a number. Function = Word --- Word = 873248   '2_- Just to avoid confusion later as in this particular case later another option number in Rem 4 happens to be 5\. That is checking for a Window opening. So it is similar to the 5 of BookMarkClassTeachMeWind, but it is a narrowed down version of those window happening things. So a bit of aa coincidence really. Using the variable just reminds me of that.
     Let hHookTrapCrapNumber = SetWindowsHooksExample(BookMarkClassTeachMeWind, AddressOf WinSubWinCls_JerkBackOffHooKerd, 0, GetDaFredId)   ' (5-pull before flush,  somehow arranges that the function gets called  ,
    ' 3c) Bring APIssinUserDLL_MsgBox up
    Dim Valyou As Variant: Let Valyou = RcelsToYou.Value: If IsArray(Valyou) Then Valyou = Valyou(1, 1) 'For display Value of Top Left of Selection
    Dim Rpnce As Long '                                                                           Long is very simple to handle, - final memory "size" type is known (123.456 and 000.001 have same "size" computer memory ) , and so a Address suggestion can be given for the next line when the variable is filled in.  '( Long is a Big whole Number limit (-2,147,483,648 to 2,147,483,647) If you need some sort of validation the value should only be within the range of a Byte/Integer otherwise there's no point using anything but Long.--upon/after 32-bit, Integers (Short) need converted internally anyways, so a Long is actually faster. )       https://www.mrexcel.com/forum/excel-questions/803662-byte-backward-loop-4.html
     Let Rpnce = APIssinUserDLL_MsgBox(hWnd:=&H0, Prompt:="Yes,  or No to ReCheck, Cancel for help ", Title:="Selection Check: Address is " & RcelsToYou.Address & "  Value is """ & Valyou & """", Buts:=vbYesNoCancel) ' ' Pseudo Non Modal MsgBox
     Set RcelsToYou = Selection: Let Valyou = RcelsToYou.Value: If IsArray(Valyou) Then Valyou = Valyou(1, 1) 'The code waited until you made one of the three message box options. But in this time you could change the selection object
        If Rpnce = 2 Then Application.Help HelpFile:=ThisWorkbook.Path & "\AnyFileName.chm", HelpContextID:=2 '              -----    download this file:  https://app.box.com/s/bx2pkvtemsppscz60rd6f430wm89c6fj This is a “.chm Microsoft Help file” It has the name _ AnyFileName.chm ---  Put in same folder as this Workbook  ---   Check out possible workarounds  --- http://www.excelfox.com/forum/showthread.php/2146-%E0%A4%AC%E0%A5%8D%E0%A4%B2%E0%A5%89%E0%A4%97-%E0%A4%95%E0%A5%8B%E0%A4%B6%E0%A4%BF%E0%A4%B6-%E0%A4%95%E0%A4%B0-%E0%A4%B0%E0%A4%B9%E0%A4%BE-%E0%A4%B9%E0%A5%88-%D8%A8%D9%84%D8%A7%DA%AF%D8%B2-%DA%A9%DB%8C-%DA%A9*Trying-Blogs?p=10467#post10467   ---  you shopuld get this  HelpGetUpBollox.JPG imgur.com/KdKOYWr
        If Rpnce = 7 Then GoTo Noughty ' Option to update the displayed Address and Value in Top Left cell of that range
    End Sub 
```

第*4*节是*函数 WinSubWinCls JerkBackOffHooKterd*
这选择了我想要的特定事件，即我的“非模式消息框”被激活，并使用 API 事物*SetWindowPos*
更改窗口尺寸 （您需要尝试一下，主要是, 中间四个数字*10 50 400 150*
两端的两个数字, *0 40* , 你可能也想调整一下。完全理解这两个数字有点超出我的能力——我花了一周的时间才弄清楚 WTF所有其他的东西都是关于）。
这个函数做的最后一件事是“杀死”或“放下”或“脱掉”“钩子”或““解开”钩子”。如果您不这样做，该功能似乎被无限期触发。
关于类似点的最后一件事：我看到的其他一些类似的代码似乎导致了疯狂的递归： *SetWindowPos*在函数中完成的大小调整似乎再次触发了函数代码。堆栈似乎限制为 30。我看不出有任何理由这样做，事实上，它似乎有时会导致一些奇怪的不一致的幽灵图像出现在我的桌面上，有时是永久的！我的函数只做我认为它应该做的事情一次。它看起来更稳定。在我得到正确的 API 之前，我确实有很多有趣的刹车。但从那时起，代码似乎在不同计算机和不同 Excel 版本上的许多代码情况下运行良好，没有问题。（在我尝试过的所有情况下，我的代码都有*Exit*-ed 正如我在*If*子句检测到函数是否在第一次递归复制运行开始时所期望的那样。*（我认为在SetWindowPos*之后直接取消挂钩也可能没有害处***，以防*SetWindowPos*不会导致递归。（ ***尝试“取消挂钩”几次似乎没有害处) )

```
 Rem 4=============  Some hidden function / bookmark / bookmarks / cyber Robot thing was brought into life ("I hung or set a hook"). That monitors events like my message box popping up. When it catches one it starts this finction and passes to it three parameters. The first tells me with a number more excactly what even took place,  the next is the window identifying number of that window doing that particular event , the last parameter is something maybe to do with the mouse god knows what exactly probably even Sid don't know...  but looking at his Avatar I probably wouldn't say that to him  as he I don't know if I would want to mess with him...
    Private Function WinSubWinCls_JerkBackOffHooKerd(ByVal lMsg As Long, ByVal wParam As Long, ByVal lParam As Long) As Long  '    I "set a hook"  which should trigger ( things similar to my Meassage box popping up  , and gave it the AddressOf this function ,  0   ,   and limited it to this "Thread" on my computer that is to say my Excel   )
     Let GlobinalCntChopsLog = GlobinalCntChopsLog + 1 '  The idea of this is that  I add 1 on entering and subtract 1 when leaving the function. So this would be two if I started an other copy of this code before the first had finished. I am expecting that as the SetWindowPosition seemes to trigger it off again.
        If GlobinalCntChopsLog = 2 Then Let GlobinalCntChopsLog = GlobinalCntChopsLog - 1: UnHookWindowsHookCodEx hHookTrapCrapNumber: Exit Function ' If I have 2 then that is an indication that recurtion has taken place, that is to say I started another function run caused by SetWindowPosition triggering it off. So i assume then that SetWindowPosition has done what it should so I can "take the hook off" (as if i did not then the function seems to get triggeredt indefinitely even without recusion), and then I exit the function. So I do expect a second copy of the code to run, but due to this it does not do anything other than take the "hook off". I also reduce the count by 1\. It is then at 1\. But then the first copy of the function ends from just under SetWindowPosition. So then the count is reduced again and is at the initial 0
        If lMsg = 5 Then Let Booloks = SetWindowPosition(wParam, 0, 10, 50, 400, 150, 40)   '  5 here is the number for a window about to be activated. This is probably the one I want. If I catch it when it is starting , 3, then It might then re set the size and position stuff again to the standard after I have done it
     Let GlobinalCntChopsLog = GlobinalCntChopsLog - 1 '  Every first copy run of the code has the count reduced to 0 so that when it starts again (as the only first copy active) it will be increased to 1 again to indicate it is a run of the function copy 1
    End Function 
```

希望这可以帮助 OP 和其他有相同或类似问题的人。

艾伦

参考资料：
[http ://www.excelfox.com/forum/showthread.php/2227-VBA-Input-Pop-up-Boxes-Application-InputBox-Method-versus-VBA-InputBox-Function](http://www.excelfox.com/forum/showthread.php/2227-VBA-Input-Pop-up-Boxes-Application-InputBox-Method-versus-VBA-InputBox-Function)
[http://www.mrexcel .com/forum/excel-questions/447043-left-top-arguments-application-inputbox-method.html](http://www.mrexcel.com/forum/excel-questions/447043-left-top-arguments-application-inputbox-method.html)
[http://www.vbforums.com/showthread.php?617519-RESOLVED-Excel-InputBox-position-works- in-2003-but-not-2007](http://www.vbforums.com/showthread.php?617519-RESOLVED-Excel-InputBox-position-works-in-2003-but-not-2007)
[https://www.excelforum.com/excel-new-users-basics/1099015-vba-application-inputbox-option-helpfile-helpcontextid.html#post4827566](https://www.excelforum.com/excel-new-users-basics/1099015-vba-application-inputbox-option-helpfile-helpcontextid.html#post4827566)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-08T18:46:34.600

Excel 版本 2007-2013 不尊重 left 和 top 值。当输入框被调用时，您可以将其拖动到您想要的位置，它会记住该位置。***

# c# - 如何构建这个 LINQ 表达式？

> ID：13275694
> 
> 赞同：2
> 
> 时间：2012-11-07T18:17:38.907
> 
> 标签：c#, linq, collections, lambda

我有一个看起来像这样的类：

```
class UserProfile { public int Id; public int? ParentId; public string Name; public string Role; } 
```

每个 UserProfile 都是用户或管理员。每个用户可能是单个管理员的孩子，其 Id 存储在用户的 ParentId 中。下面是一个例子：

```
IEnumerable<UserProfile> users = new List<UserProfile>{
        new UserProfile(){Id = 1, ParentId = null,  Name = "Admin1", Role = "Admin" },
        new UserProfile(){Id = 2, ParentId = 1,  Name = "User2", Role = "Admin" },
        new UserProfile(){Id = 3, ParentId = 1,  Name = "User3", Role = "Admin" },
        new UserProfile(){Id = 3, ParentId = null,  Name = "Admin2", Role = "Admin" },
        new UserProfile(){Id = 4, ParentId = 3,  Name = "User4", Role = "Admin" },
        new UserProfile(){Id = 5, ParentId = null,  Name = "User5", Role = "Admin" },
        new UserProfile(){Id = 6, ParentId = 3,  Name = "User6", Role = "Admin" },
    }; 
```

我需要重新排列此列表或创建另一个列表，以便按特定顺序排列：所有管理员及其用户：

*   **Admin1**（完整详细信息）
*   用户2（完整详细信息）
*   用户 3（完整详细信息）
*   用户 5（完整详细信息）
*   **Admin2**（完整详细信息）
*   用户 4（完整详细信息）
*   用户 6（完整详细信息）

我试图先将它们分开，但我不知道如何以所需的顺序合并它们。

```
var adminsOnly = users.Where(p => p.Role.Equals("Admin")).OrderBy(p => p.Id);
var usersOnly = users.Where(p => p.Role.Equals("User")).OrderBy(p => p.Id); 
```

非常感谢。

**注意：可以有没有管理员的用户，也可以有没有用户的管理员。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:25:08.137

```
var users = users.OrderBy(p => p.ParentId ?? p.Id).ThenBy(p => p.Role); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T18:28:10.887

尝试这个：

```
users.Where(x => x.Role == "User" && x.ParentID == null)
     .Concat(users.Where(x => x.Role == "Admin")
                  .ToDictionary(x => x, 
                                x => users.Where(u => u.ParentId == x.Id));
                  .SelectMany(x => new[] {x.Key}.Concat(x.Value))); 
```

这将为您提供`IEnumerable<UserProfile>`, 所有用户都列在他们的管理员之后，所有没有管理员的用户都列在最前面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:38:52.160

鉴于问题中的新信息，伊斯特恩的回答似乎是最好的。我看到的唯一缺点是没有管理员的用户将按他们的 ID 排序到列表中，不一定在开头或结尾。

# mysql - 在构建 sql 查询方面需要帮助

> ID：13275696
> 
> 赞同：1
> 
> 时间：2012-11-07T18:17:58.390
> 
> 标签：mysql, sql

我有如下三个表：

这张桌子：`m_application_resources`

```
 resourceid resource_name   menu_group_id   menu_name   creation_date   last_created_by updation_date   last_updated_by 
```

第二个表：`m_roles`

```
roleid  rolename    description creation_date   last_created_by updation_date   last_updated_by 
```

第三张表是：`m_access_matrix`

```
accessid    resourceid  roleid  creation_date   last_created_by updation_date   last_updated_by 
```

表的关系是：resourceid 和 roleid

这是我的查询

```
select  am.accessid, ar.resource_name,rls.rolename
from m_application_resources ar, m_roles rls,m_access_matrix am 
where ar.resourceid=am.resourceid 
```

这将返回以下内容：

```
ccessid resource_name   rolename
1   DepartmentAction    Admin
1   DepartmentAction    Client
1   DepartmentAction    Doctors
2   PositionsAction     Admin
2   PositionsAction     Client
2   PositionsAction     Doctor 
```

结果是错误的，我不知道该怎么做。

例如：DepartmentAction 应该只出现一次，并且角色名称应该是任何一个。

Sqlfiddle[小提琴](http://www.sqlfiddle.com/#!2/2fca3/3)

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:23:29.277

您没有条件`role_id`：

```
select  am.accessid, ar.resource_name,rls.rolename
from m_application_resources ar, m_roles rls,m_access_matrix am 
where ar.resourceid=am.resourceid AND am.roleid = rls.roleid 
```

为了更清楚起见，我会将查询转换为 ANSI SQL 语法以进行连接：

```
SELECT am.accessid, ar.resource_name,rls.rolename
FROM m_application_resources ar
JOIN m_access_matrix am ON ar.resourceid=am.resourceid
JOIN m_roles rls ON am.roleid = rls.roleid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T18:29:49.650

最好在查询中显式连接表。我不是 100% 确定我了解您的表格，但这应该可以：

```
SELECT am.accessid, ar.resource_name, rls.rolename
FROM (m_application_resources ar INNER JOIN m_access_matrix am 
ON ar.resourceid = am.resourceid) INNER JOIN mroles rls ON am.roleid = rls.roleid 
```

# scala - 如何使用 ScalaQuery 按日期限制我的查询

> ID：13275699
> 
> 赞同：1
> 
> 时间：2012-11-07T18:18:02.897
> 
> 标签：scala, date, where, scalaquery

我正在使用 Scalaquery，当我尝试根据日期字段限制查询时遇到了问题。我正在使用 Scala 2.9.2，ScalaQuery 2.9.1:0.10.0-M1 考虑以下代码：

```
case class MyCase (opr_date: Date)       

object MyClass extends BasicTable[MyCase]("MYTABLE") {

    def opr_date = column[Date]("OPR_DATE")
    def * = opr_date <> (MyCase, MyCase.unapply _)

    def test(date: Date) = db.withSession {

        logDebug("test date:  " + date)
        val qry = for {
                d <- MyClass if (d.opr_date === date)
        } yield d.opr_date
        logDebug(qry.selectStatement)
        qry.list
    }
} 
```

此查询从不返回任何行。这是调用代码：

```
"The data" should {
    "be available " in {

        val testDate = CommonFormat.parseDate("2012-10-27", CommonFormat.EURO_SHORT).getTime
        val records = MyClass.test2(new java.sql.Date(testDate))
        records.size must be_>(0)
    }
} 
```

当我打印选择时，查询返回 0 行并生成以下 SQL：

```
SELECT "t1"."OPR_DATE" FROM "MYTABLE" "t1" WHERE ("t1"."OPR_DATE"={d '2012-10-27'}) 
```

我有测试日期的可用数据。如果我将 SQL 粘贴到 SQL 编辑器中并编辑日期以使其不是 JDBC 模板格式（'27-Oct-2012'），则查询将返回预期的行。谁能告诉我我做错了什么？这不应该工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T15:39:42.607

今天早上我发现这是一个数据问题。查询工作正常。原来我连接到了错误的服务器。我们对共享相同数据库名称的多个环境和备份系统的设置令人困惑。连接到正确的服务器后，查询按预期工作。我在我的代码和编辑器工具之间看到了不同的结果，因为它们指向不同的服务器（相同的数据库名称啊）。感谢所有花时间为我研究这个问题的人。我感谢你的努力。

# c# - 当 EditorTemplate 就位时，DateTime 的自定义绑定不起作用

> ID：13275702
> 
> 赞同：1
> 
> 时间：2012-11-07T18:18:15.333
> 
> 标签：c#, asp.net-mvc-3, model-binding, mvc-editor-templates

由于 MVC3 为 DateTime 提供的默认编辑器对 HTML5 不友好，因此我编写了以下自定义编辑器模板：

(日期时间.cshtml)

```
@model DateTime?

<input type="date" value="@{ 
    if (Model.HasValue) {
        @Model.Value.ToISOFormat() // my own extension method that will output a string in YYYY-MM-dd format
    }
}" /> 
```

现在，这工作正常，但后来我遇到了日期没有正确解析的问题，因为 ISO 日期没有使用默认的 DateTime 绑定进行解析。所以，我实现了自己的活页夹：

```
public class IsoDateModelBinder: DefaultModelBinder
{
    const string ISO_DATE_FORMAT = "YYYY-MM-dd";

    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);

        if (string.IsNullOrEmpty(value.AttemptedValue))
            return null;

        DateTime date;
        if (DateTime.TryParseExact(value.AttemptedValue, ISO_DATE_FORMAT, CultureInfo.InvariantCulture, DateTimeStyles.None, out date));
            return date;

        return base.BindModel(controllerContext, bindingContext);
    }
} 
```

我已经注册了它（Global.asax.cs）：

```
System.Web.Mvc.ModelBinders.Binders.Add(typeof(DateTime), new IsoDateModelBinder());
System.Web.Mvc.ModelBinders.Binders.Add(typeof(DateTime?), new IsoDateModelBinder()); 
```

但是，当自定义编辑模板就位时，自定义活页夹根本不会被调用。我已将其从解决方案中删除，并且正确调用了自定义活页夹——尽管此时格式错误，因为自定义编辑器没有提供正确的控件。

那么，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:02:13.097

事实证明我得到了它的工作。我怀疑这两种能力之间存在干扰，但实际上并非如此。

问题出在编辑器模板中，它不完整。对于发送回值的表单，它们需要有一个值（当然）和一个名称。如果名称不存在，则不会将值发送回服务器，当然也不会调用活页夹，因为没有要绑定的值。

正确的模板应该看起来更像这样：

```
@model DateTime?

<input type="date" id="@Html.IdFor(model => model)" name="@Html.NameFor(model => model)" value="@{ 
    if (Model.HasValue) {
        @Model.Value.ToISOFormat()
    }
}" /> 
```

此外，我这边的 ISO 格式字符串是错误的，它应该是`yyyy-MM-dd`而不是`YYYY-MM-dd`.

# math - 基于范围的数字猜谜游戏

> ID：13275704
> 
> 赞同：1
> 
> 时间：2012-11-07T18:18:24.910
> 
> 标签：math, clojure

我想找到一个范围内两个数字之间的差异，但我需要能够环绕到范围的开头，就像一个循环列表。

范围是 9。

因此，如果数字是 6 并且猜测是 5，则答案应该是 1，但是如果数字是 8 并且猜测是 2，那么答案应该是 3。

我的第一个想法是像这样将数字增加 10：

```
n is the correct number, g is the guess, r is the result. 

( let
   [ r (min (- (+ n 10) g) (- g n)) ]

   (if (> 0 r) ( * -1 r ) r) ) 
) 
```

...这对环绕有用，但问题是数字 10 的存在将结果增加 1，如果它环绕。仅从结果中减去 1 或数字在所有情况下都不起作用。

根据所讨论的数字，结果是否定的，因此 if 语句将其交换为正值。

这不是一个 clojure 问题，它实际上是一个数学问题，我会在任何语言中遇到这个问题，但碰巧这就是我正在写的。我才刚刚开始使用 clojure（或任何功能语言），所以我完全有可能做错事或非常不习惯。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:46:49.350

如果您在循环中包含零，则问题会变得更**小 A - B mod R 或 B - A mod R**

```
R = 9
8 - 3 mod 9 = 5
3 - 8 mod 9 = 4
min(5 3) = 3 
```

您可以通过减少您读取的数字并增加您打印的数字来获得不允许猜测零的效果，尽管如果您允许他们猜测数字零，您的游戏在数学上会更容易。

```
(defn mod- [x y r] 
  (let [res (rem (- x y) r)]
  (if (neg? res)
    (+ res r)
    res)))

(min (mod- A B r) (mod- B A r)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:47:12.770

您确定对于*数字为 8 且猜测为 2*的情况，答案应该是 3 而不是 6？如果是这种情况，那么以下函数如何计算差异：

```
(defn difference [rrange number-to-guess guess]
  (-> rrange
      (- guess)
      (+ number-to-guess)
      (mod rrange))) 
```

这是测试。

```
user=> (= 1 (difference 9 6 5))
true
user=> (= 6 (difference 9 8 2))
true 
```

# iphone - 上下颠倒使 iPhone 背光变暗

> ID：13275705
> 
> 赞同：0
> 
> 时间：2012-11-07T18:18:30.103
> 
> 标签：iphone, objective-c, ios, backlight, uiscreen

我在 iOS 应用程序“睡眠周期闹钟”上看到，当 iPhone 屏幕朝下（朝向地板）时，他们设法调暗了屏幕的背光。我一直在互联网上搜索，找不到提供此功能的 API。

我猜他们是通过测量重力对设备的加速度并相应地调暗背光来实现的，我对此没有任何问题。我只是不知道他们如何调暗背光（包括状态栏！）。它不是覆盖在 superview 上的半透明黑色 UIView，灯肯定会关闭。

检测不是问题，这是我不知道该怎么做的调光。

谁能指出我正确的方法/API 文档？我正在使用 iOS 6 SDK。

谢谢

编辑：

对不起各位，看来我错了。进一步的调查使我相信他们没有调暗背光。说明暂时停留在 superview 上。我认为他们实际上覆盖了黑色图像并删除了状态栏。我很抱歉！为了绕过方向锁定进行方向检测，我认为他们使用加速度计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:29:20.200

可以使用 检测设备是否面朝下`UIDevice orientation`。`UIDeviceOrientationFaceDown`当屏幕面向地板时，这将返回。

查看该`UIScreen`课程以了解与亮度相关的几种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:59:36.757

尝试这个：

```
[[UIScreen mainScreen] setBrightness:0.5]; //Any value you think works 
```

有关 UIScreen 的更多信息以及您可以用它做什么，请查看文档：

[UIScreen Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScreen_Class/Reference/UIScreen.html)

编辑：只需阅读其他答案的评论，这种方法会导致什么样的问题？

# php - 获取一个条目的多个日期之间的平均时间

> ID：13275706
> 
> 赞同：0
> 
> 时间：2012-11-07T18:18:34.050
> 
> 标签：php, mysql, math, time

我不太确定如何解释这一点，但基本上我想做的是获得一组日期之间的平均时间。这是数据库表的样子

```
id | offer_id | user |    date    | date_completed
----------------------------------------------------
1  |   123    | test | 1352265988 |   1352265995
2  |   123    | admin| 1352266004 |   1352266022
3  |   123    | kira | 1352264754 |   1352271946 
```

我需要获取两个时间戳之间的平均时间并将它们一起计算，以便我可以在我的代码中回显它。我确信这将通过一个`foreach`声明来完成，但我不知道如何去做。如果有人能指出我正确的方向，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:21:59.117

除非我遗漏了什么，否则您可以在一个查询中完成：

```
SELECT AVG(date_completed - date)
FROM myTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:22:05.673

对每个列（date 和 date_completed）使用 SQL 函数 AVG。比，你可以减去每个平均时间，你会得到你正在搜索的结果。

# java - 具有静态属性的 Java 代码的奇怪行为

> ID：13275707
> 
> 赞同：0
> 
> 时间：2012-11-07T18:18:40.387
> 
> 标签：java, static

我真的没有太多要问的。哎呀，我什至不知道这个问题应该说什么。基本上，这段 Java 代码运行良好，没有任何编译错误。

```
public class Application {
    static String[][] tiles;

    public Application() {
        tiles = new String[9][9];
    }

    public static void main(String[] args) {

        Application app = new Application();
        Grid mines = new Grid();
        mines.fillTiles(tiles, 9, 9, 10);
    }
}

class Grid {
    Random rand;

    public void fillTiles(String[][] tiles, int rowSize, int colSize,
            int numMines) {
        rand = new Random();
        int rowIndex;
        int columnIndex;
        while (numMines > 0) {
            rowIndex = rand.nextInt(rowSize);
            columnIndex = rand.nextInt(colSize);
            tiles[rowIndex][columnIndex] = "M";
            numMines--;
        }
    }
} 
```

但是，当我删除线

```
Application app = new Application(); 
```

从第一类的主要方法，它在抛出一个 NullPointerException

```
tiles[rowIndex][columnIndex] = new String("M"); 
```

有什么理由吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T18:19:57.920

```
Application app = new Application(); 
```

如果您不实例化`Application`,`tiles`将指向`null`. 对空引用的操作会导致`NullPointerException`.

您的 Array 初始化逻辑在构造函数中。

```
public Application() {
        tiles = new String[9][9];
    } 
```

构造函数将仅在创建对象时执行 ( `new Application()`)

如果你不想做`Application app = new Application();`

只是改变 `static String[][] tiles=new String[9][9];`

定义`static`数组变量并不意味着实例化将在加载时发生。这只是意味着该变量是类变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T18:21:21.313

你注意到你已经在你的构造函数中实例化了你的数组吗？

```
static String[][] tiles;

public Application() {
    tiles = new String[9][9];  <--- Here
} 
```

因此，如果您不实例化您的`Application`using `new Application()`，您的数组将不会被初始化，并且您的引用将指向 null。

此外，在构造函数中初始化静态变量也不是一个好主意。`static initializer block`理想情况下，您应该在 a或声明本身的位置初始化您的静态数组：-

```
static {
    tiles = new String[9][9];
} 
```

或者

```
static String[][] tiles = new String[9][9]; 
```

如果您在构造函数中初始化数组，则每次创建一个实例时，它都会为每个实例重新初始化。因为`static`变量对所有实例都是通用的。因此，您对`static`变量所做的更改将反映在您的所有实例中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T18:22:09.430

我想我可能知道原因：

```
public class Application {
    static String[][] tiles;

    public Application() {
        tiles = new String[9][9];
    }

    public static void main(String[] args) {

        Application app = new Application();
        Grid mines = new Grid();
        mines.fillTiles(tiles, 9, 9, 10);
    }
} 
```

在此，您有一个静态二维数组，其中包含称为图块的字符串。但是，您只能在 Application 的构造函数中对其进行初始化。因此，当调用“mines.fillTiles(tiles”时，tiles 仍然为 null 并且

```
tiles[rowIndex][columnIndex] = new String("M"); 
```

将抛出 NullPointerException。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-07T18:21:22.837

因为您正在构造函数中进行初始化`tiles = new String[9][9];`。仅当您使用`new`将对象实例创建为`new Application()`.

如果您不想使用构造函数，请将带有初始化的静态变量声明为：

```
 static String[][] tiles = new String[9][9]; 
```

如果没有构造函数调用，那应该可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T18:21:07.963

您正在实例的构造函数中初始化数组。如果您在第一个实例之后创建另一个实例，它将重新初始化静态成员。

# php - 使这个类符合依赖倒置原则

> ID：13275709
> 
> 赞同：7
> 
> 时间：2012-11-07T18:18:45.327
> 
> 标签：php, oop, zend-framework, dependency-injection

维基百科引用的 DI 定义指出：

> A. 高级模块不应该依赖于低级模块。两者都应该依赖于抽象。B. 抽象不应依赖于细节。细节应该取决于抽象。

我正在尝试将该原则应用于我的代码：

```
class Printer{
        private $logger;    
        function __construct(Zend_Log $logger){
            $this->logger=$logger;
        }    
       function print(){
          //Some code
          $this->logger->log('Logger in action ;)');
       }        
    } 
```

现在既然`Printer`类依赖于`Zend_Log`哪个既不是抽象类也不是接口，那么我就违反了依赖倒置原则。

`Zend_Log`知道既不扩展抽象类也不实现接口的情况下，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T18:30:48.710

最简单的方法是使用接口适配器，例如创建您的打印机应该在接口中使用的 API，然后在 Zend_Log 组件的适配器中实现该接口。将具体的适配器传递给打印机。然后打印机将依赖于 PrinterLog 而不是具体的 Zend_Log。

```
interface PrinterLog
{
    public function log($whatever);
}

class ZendPrinterLogAdapter implements PrinterLog
{
    private $logger;

    public function __construct(Zend_Log $logger)
    {
        $this->logger = $logger
    }

    public function log($whatever)
    {
        // delegate call to $this->logger
    }
}

class Printer
{ 
    private $logger; 

    function __construct(PrinterLog $logger)
    { 
        $this->logger = $logger; 
    }
} 

$printer = new Printer(new ZendPrinterLogAdapter(new Zend_Log)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T19:06:25.460

这是对相同 API 的另一种选择 .. 所以这将是您的标准设置：

```
interface Printerish // couldn't think of a good ajective
{
    public function print();
}

interface CanLogStuff // couldn't think of a good ajective
{
    public function log( $text );
}

class Printer implements Printerish
{
    public function print()
    {
        // do something
    }
} 
```

这将是可记录的打印机：

```
class LoggedPrinter implements Printerish
{
    protected $logger;
    protected $pritner;

    public function __construct( Printerish $printer, CanLogStuff $logger )
    {
        $this->logger = $logger;
        $this->printer = $printer;
    }

    protected function print()
    {
        $this->logger( 'I can print, I can print !!' );
        $this->printer->print();
    }

} 
```

这来自以下用例：如果在现实世界中您想开始控制真实打印机的使用（实习生已经再次[打印出互联网](http://www.bugbash.net/comic/10.html)）。那么你就不会制作不同的打印机了。您将尝试添加一些外部控制。

在编程中，它有点与[开放/封闭原则](http://en.wikipedia.org/wiki/Open/closed_principle)有关。

请记住，这只是一个想法，在尝试在生产代码中使用之前应该仔细研究一下。

# php - 过期的会话 cookie 似乎仍然存在

> ID：13275710
> 
> 赞同：0
> 
> 时间：2012-11-07T18:18:50.413
> 
> 标签：php, session-cookies

我正在尝试删除会话 cookie。这些是我正在遵循的步骤

```
 // Find the session - I believe this is doing a resume rather than starting a fresh session thus identifying the session.
        session_start();

        // Unset all the session variables enmasse by assigning an empty array
        $_SESSION = array();

        // find the session name that has been allocated then destroy the session cookie
        if(isset($_COOKIE[session_name()])){
            setcookie(session_name(),'', time()-42000, '/');
           // set content of found session to null, with a past time, at the root
        }

        // Destroy the session 
        session_destroy(); 
```

这肯定会让我退出。然而，实际的 cookie 仍然存在并且可以在浏览器 (firefox) 中查看。

```
$_COOKIE[session_name()] 
```

似乎返回的是加密的内容字符串，而不是会话名称。

问题：

如果 $_COOKIE[session_name()] 不是获取会话名称的正确方法是什么？

我应该设置一个 session_name 而不是让它默认吗？

我看到会话是因为它正在等待某种垃圾收集吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:25:37.620

你可能想看看这个页面：

[http://php.net/manual/en/function.session-destroy.php](http://php.net/manual/en/function.session-destroy.php)

> 为了完全终止会话，例如注销用户，还必须取消设置会话 ID。如果使用 cookie 传播会话 id（默认行为），则必须删除会话 cookie。setcookie() 可以用于此。

基于此，您可能希望使用`session_id()`而不是`session_name()`

# xcode - 在运行我的 xcode 项目时，我的 mac 64 位出现问题 .. 它是在 xcode 3 中完成的，我无法在 4 中运行它

> ID：13275711
> 
> 赞同：1
> 
> 时间：2012-11-07T18:18:51.150
> 
> 标签：xcode

方案“Dominos”不包含可以为运行目标 My Mac 64 位支持的 SDK 构建的可构建项目。确保您的目标都指定此版本的 Xcode 支持的 SDK。这有什么问题我如何更改为其他人请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T19:14:53.137

有两种方法可以解决此问题。首先，从项目窗口左侧的项目导航器中选择您的项目。这样做会打开项目编辑器。单击项目编辑器底部的验证设置按钮。验证设置将更新您的项目，使其基于 Xcode 4 构建。

其次，更改 Base SDK 构建设置。以下文章解释了如何在 Xcode 4 中访问构建设置：

[Xcode 4：访问构建设置](http://meandmark.com/blog/2011/03/xcode-4-accessing-build-settings/)

# ruby-on-rails - 嵌套资源的 cancan load_resource 不建立 has_one 关联

> ID：13275716
> 
> 赞同：0
> 
> 时间：2012-11-07T18:19:10.057
> 
> 标签：ruby-on-rails, cancan

我有一个拥有一个地址的所有者模型，并为其接受_nested_attributes。在加载所有者时，对于 :new 操作，我希望 :load_resource 方法能够像 @owner.build_address 那样构建关联，但是下面的代码不会发生这种情况：

```
class OnwersController < ApplicationController
    load_and_authorize_resource
    load_resource :address, :through => :owner, :singleton => true, :parent => false 
```

这是预期的行为，我必须自己做 @owner.address = @address 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:34:33.947

你可以参考答案。[https://stackoverflow.com/a/7015900/950843](https://stackoverflow.com/a/7015900/950843)

它对我有用，除了我必须忽略 :new 和 :create 动作。

# gwt - 设置 GWT 'HTML' 对象的 id

> ID：13275718
> 
> 赞同：0
> 
> 时间：2012-11-07T18:19:11.977
> 
> 标签：gwt

> **可能重复：**
> [设置 GWT 小部件的 id](https://stackoverflow.com/questions/7380765/setting-a-gwt-widgets-id)

我想在我的 GWT 'HTML' 对象中添加一个 'id' 以确保应用特定的样式。

```
HTML obj; 
```

如何为这个 obj 分配一个 id？

[我无法根据这个Javadoc](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/HTML.html)弄清楚

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:53:37.783

你可以使用 object.getElement().setId()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T23:30:50.827

你不需要设置一个ID。只需添加一个 CSS 类名：

```
obj.setStyleName("myStyle"); 
```

或者

```
obj.getElement().getStyle()... 
```

并直接设置您需要的任何样式。

# c++ - 围绕另一个旋转一个 3D 点

> ID：13275719
> 
> 赞同：1
> 
> 时间：2012-11-07T18:19:19.537
> 
> 标签：c++, math, opengl, trigonometry

我的程序中有一个函数，它将一个点（x_p，y_p，z_p）围绕另一个点（x_m，y_m，z_m）旋转角度 w_nx 和 w_ny。新坐标存储在全局变量 x_n、y_n 和 z_n 中。绕 y 轴旋转（因此改变 w_nx 的值 - 这样 y - 值不会受到损害）工作正常，但只要我绕 x 或 z 轴旋转（改变 w_ny 的值）坐标不再准确。我评论了我认为是我的错在的那一行，但我不知道该代码有什么问题。

谁能帮我？

```
void rotate(float x_m, float y_m, float z_m, float x_p, float y_p, float z_p, float w_nx ,float w_ny)
    {
        float z_b = z_p - z_m;
        float x_b = x_p - x_m;
        float y_b = y_p - y_m;
        float length_ = sqrt((z_b*z_b)+(x_b*x_b)+(y_b*y_b));
        float w_bx = asin(z_b/sqrt((x_b*x_b)+(z_b*z_b))) + w_nx;
        float w_by = asin(x_b/sqrt((x_b*x_b)+(y_b*y_b))) + w_ny; //<- there must be that fault
        x_n = cos(w_bx)*sin(w_by)*length_+x_m;
        z_n = sin(w_bx)*sin(w_by)*length_+z_m;
        y_n = cos(w_by)*length_+y_m;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:54:21.087

代码几乎做了什么：

*   计算差异向量
*   将矢量转换为[球坐标](https://en.wikipedia.org/wiki/Spherical_coordinate_system)
*   将 w_nx 和 wn_y 添加到倾角和方位角（参见术语链接）
*   将修改后的球坐标转换回笛卡尔坐标

有两个问题：

*   转换不正确，您所做的计算是针对两个倾角向量（一个沿 x 轴，另一个沿 y 轴）
*   即使计算正确，球坐标中的变换也不同于绕两个轴旋转

因此，在这种情况下，使用矩阵和向量数学将有助于：

```
b = p - m
b = RotationMatrixAroundX(wn_x) * b
b = RotationMatrixAroundY(wn_y) * b
n = m + b 
```

[基本旋转矩阵](https://en.wikipedia.org/wiki/Rotation_matrix#Basic_rotations)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T18:27:16.993

尝试使用向量数学。决定你旋转的顺序，首先沿着 x，然后沿着 y。

如果你沿 z 旋转，[z' = z]

```
x' = x*cos a - y*sin a;
y' = x*sin a + y*cos a; 
```

对 y 轴重复相同的操作：[y'' = y']

```
x'' = x'*cos b - z' * sin b;
z'' = x'*sin b + z' * cos b; 
```

再次沿 x 轴旋转：[x''' = x'']

```
y''' = y'' * cos c - z'' * sin c
z''' = y'' * sin c + z'' * cos c 
```

最后是围绕某个特定“点”旋转的问题：

首先从坐标中减去点，然后应用旋转，最后将点添加回结果。

据我所知，这个问题与“万向节锁”密切相关。角度 w_ny 不能相对于固定的 xyz 坐标系测量，而是相对于通过应用角度 w_nx 旋转的坐标系来测量。

正如 kakTuZ 所观察到的，您的代码将点转换为球坐标。这本身并没有什么错——只要有经度和纬度，就可以到达地球上的所有地方。如果一个人不关心地球赤道平面相对于它围绕太阳的轨迹倾斜，我没关系。

不沿第一个 w_ny 旋转下一个参考轴的结果是，在赤道相距 1 km 的两个点在两极和纬度 90 度处彼此靠近，它们接触。尽管明显的目的是让它们在旋转的地方保持 1 公里的距离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:00:38.307

如果要转换坐标系而不仅仅是点，则需要 3 个角度。但你是对的 - 对于转换点 2 个角度就足够了。有关详细信息，请[咨询维基百科](http://en.wikipedia.org/wiki/Rotation_matrix)...

但是当你使用 opengl 时，你真的应该使用 opengl 函数，比如`glRotatef`. 这些函数将在 GPU 上计算 - 而不是作为您的函数在 CPU 上计算。文档在[这里](http://www.khronos.org/opengles/documentation/opengles1_0/html/glRotate.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T22:05:48.810

就像许多其他人所说的那样，您应该使用 glRotatef 来旋转它以进行渲染。对于碰撞处理，您可以通过在其渲染点将其位置向量乘以堆栈顶部的 OpenGL ModelView 矩阵来获得其世界空间位置。使用 glGetFloatv 获取该矩阵，然后将其与您自己的向量矩阵乘法函数相乘，或者使用您可以轻松在线获得的众多函数之一。

但是，那会很痛苦！相反，请考虑使用 GL 反馈缓冲区。该缓冲区将仅存储绘制图元的点，而不是实际绘制图元，然后您可以从那里访问它们。
[这](http://www.opengl.org/sdk/docs/man2/xhtml/glRenderMode.xml)是一个很好的起点。

# android - WebView LoadURL 和 GetView

> ID：13275723
> 
> 赞同：0
> 
> 时间：2012-11-07T18:19:29.157
> 
> 标签：android, android-listview, android-webview

我使用 ListView，每个单元格都是 WebView。所以，我看到我必须将WebView.loadURL直接放在GetView中！每次滚动时它都会调用！那么如何缓存 WebView 以仅调用一次 LoadURL 呢？或者我可能会将膨胀的视图保存在数组中并在 GetView 中仅返回数组中的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:27:25.037

我认为你更容易（对不起，如果我错了）添加布局（例如 LinearLayout）并将其添加到 ScrollView 中。这有点绕路，但如果你不使用太多的 WebView，我认为这会容易得多。调用它以在 onCreate 加载所有 URL，滚动时它不会加载页面。

这个答案是另一种选择，我已经阅读了你的问题。

# asp.net-mvc-4 - 后退按钮导致下拉菜单具有不同的值

> ID：13275726
> 
> 赞同：0
> 
> 时间：2012-11-07T18:19:34.583
> 
> 标签：asp.net-mvc-4, internet-explorer-9, html-select

我有一个 ASP.Net MVC 应用程序，当用户单击某个链接时，我执行以下操作：

```
var orderID = returnStatus["Data"];
var url = '@Url.Content("~/OrderEntry/OrderDetail")?orderID=' + orderID;
window.location.href = url; 
```

这很好用，但是，当我单击后退按钮时，我的 html 下拉列表将从：

```
Zone: <select id="Zones" name="Zones" style="width: 150px"><option value="1">Zone 1</option>
<option value="2">Zone 2</option>
<option value="3">Zone 3</option>
<option value="4">Zone 4</option>
</select> 
```

对此：

```
Zone: <select id="Zones" name="Zones" style="width: 150px"><option value="QUOTE">Quote</option>
<option value="SUBM">Submitted</option>
<option value="INPRD">In Production</option>
<option value="CANC">Cancelled</option>
<option value="COM">Complete</option>
<option value="CH">Credit Hold</option>
</select> 
```

这些状态是在代码后面的下拉列表中定义的，我不确定为什么它们会移到这个下拉列表中？

这两个下拉列表都是从模型中填充的。就好像模型正在尝试重新生成这个 html，但是这些值在某种程度上是不正确的？

这是 Razor 语法：

```
Zone: @Html.DropDownList("Zones", Model.Zones, new { style = "width: 150px" } ) 
```

这似乎不会在 Firefox 或 Chrome 中发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:49:55.630

显然，这与我的 ID 被称为“区域”这一事实有关。我将此 ID 更改为 AcctManagerZones，现在一切正常。

编辑：看来这也不完全是答案。这显然与 IE 缓存页面的方式有关。我仍然得到同样的东西，直到我关闭页面缓存，然后它才起作用。

# lucene - lucene 是否支持词组索引？

> ID：13275730
> 
> 赞同：1
> 
> 时间：2012-11-07T18:19:52.447
> 
> 标签：lucene

lucene 可以配置为执行短语索引吗？例如，可以将 lucene 配置为索引嵌入在网页中的名词短语吗？或者，任何人都可以推荐一个开源来索引嵌入在网页中的名词短语。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:34:30.043

Lucene 可以索引短语，但 Lucene 不能专门识别名词短语、动词短语和其他短语。例如，可以对“He hit the ball with the bat”进行索引，以便您可以找到“he hit”、“hit the”、“the ball”、“ball with”、“with the”和“the bat”作为 2 字词组。

# c++ - 当 Skype ICallChannelManagerEvents 被触发时

> ID：13275737
> 
> 赞同：-1
> 
> 时间：2012-11-07T18:20:19.067
> 
> 标签：c++, skype, skype4com, skype4java, skype4py

我正在使用 Skype 进行应用程序到应用程序的通信。我的要求是当一个 Skype 用户发出呼叫/视频呼叫时，我想使用应用程序流将消息从插入 Skype 的一个应用程序发送到插入 Skype 的其他应用程序。

在单独的示例应用程序中，我可以使用应用程序流从一个应用程序向其他应用程序发送和接收消息，但我想在用户拨打电话时激活应用程序流。

Skype4COM 为 ICallChannelManager 公开这三个事件

1.  ICallChannelManagerEvents::Channels
2.  ICallChannelManagerEvents::Created
3.  ICallChannelManagerEvents::消息

我已经注册了这三个事件

```
hr = m_pCallChannelMgr.CreateInstance(__uuidof(CallChannelManager));
hr = SinkSkypeCallChannelMgrEvents::DispEventAdvise(m_pCallChannelMgr);

hr = m_pCallChannelMgr->CreateApplication(L"");
VARIANT_BOOL flag = m_pCallChannelMgr->GetCreated();
while(true )
{
if ( VARIANT_TRUE == flag) break;
flag = m_pCallChannelMgr->GetCreated();
Sleep(1000);

}
hr = m_pCallChannelMgr->Connect(m_Skypeptr); 
```

当 m_pCallChannelMgr->CreateApplication(); 被称为它会触发 ICallChannelManagerEvents::Created 事件。

我不确定，当其他两个事件 ICallChannelManagerEvents::Channels 和 ICallChannelManagerEvents::Message 被触发时。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:14:55.750

当已经有一个呼叫正在进行并且您的插件开始连接到 Skype 时，问题已解决 ICallChannelManagerEvents 被触发。

# python - 无法让 pytest 了解设置中的命令行参数

> ID：13275738
> 
> 赞同：7
> 
> 时间：2012-11-07T18:20:24.987
> 
> 标签：python, unit-testing, testing, command-line-arguments, pytest

所以我一直试图让 pytest 根据一些命令行参数在不同的环境中运行 selenium 测试。但它一直抛出这个错误：

```
TypeError: setup_class() takes exactly 2 arguments (1 given) 
```

似乎理解`setup_class`需要 2 个参数，但`host`没有被传递。这是代码`setup_class`：

```
def setup_class(cls, host):
        cls.host = host 
```

这是 conftest.py 文件：

```
def pytest_addoption(parser):
    parser.addoption("--host", action="store", default='local',
        help="specify the host to run tests with. local|stage")

@pytest.fixture(scope='class')
def host(request):
    return request.config.option.host 
```

奇怪的是，`host`函数正在看到它（所以如果我创建一个 test_function 并将主机作为参数传递，它就可以了），只是`setup`固定装置不起作用。

我环顾四周，发现了这个，[pytest - 在 setup_module 中使用 funcargs](https://stackoverflow.com/questions/11358437/pytest-use-funcargs-inside-setup-module)但这似乎不起作用（自 2.3.3 以来它已经过时了。

有谁知道我做错了什么？使用 py.test 2.3.2。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-15T00:54:08.903

要从设置函数内部访问命令行选项，您可以使用 pytest.config 对象。这是一个示例...根据需要进行调整。

```
import pytest

def setup_module(mod):
    print "Host is %s" % pytest.config.getoption('host') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:22:59.737

setup_module/class/method 和朋友不能直接使用 pytest 固定装置。pytest-2.3 的等效方法是使用[autouse fixtures](http://pytest.org/latest/fixture.html#autouse-fixtures-xunit-setup-on-steroids)。如果可以的话，最好将fixture 明确地传递给测试函数，或者在类或模块上放置一个[usefixtures 标记。](http://pytest.org/latest/fixture.html#usefixtures)

# php - 在 Friendly-URL 上使用 RewriteRule - 使用重定向 301 获取变量

> ID：13275740
> 
> 赞同：0
> 
> 时间：2012-11-07T18:20:37.077
> 
> 标签：php, .htaccess, mod-rewrite, get, friendly-url

我遇到了一些问题。我搜索了很多，尝试了变化，但仍然无法正常工作。

我的目标很简单：

重定向： [http ://site.com/folder1/folder2/](http://site.com/folder1/folder2/)**页面**

至： [http ://site.com/folder1/folder2/](http://site.com/folder1/folder2/)**页**

请注意，我使用的是“友好 URL”。

现在这是我尝试过的方法，以及我遇到的问题。

1）**重定向301**

```
Redirect 301 /folder1/folder2/page http://site.com/folder1/folder2/Page 
```

此重定向有效，问题是，我从“页面”获取变量出现在 URL 的末尾，这对 SEO 不利：

[http://site.com/folder1/folder2/Page?get=page](http://site.com/folder1/folder2/Page?get=page)

2)**重写规则**

mod_rewrite 的 RewriteRule 应该解决 Get Variables 出现的问题（根据我的阅读）。

问题是，我无法让它适用于我的 Fancy URL 结构。

```
RewriteRule ^/folder1/folder2/page$ http://site.com/folder1/folder2/Page [R=301,L] 
```

它根本行不通。没有执行重定向，所以这里一定有问题。我尝试了该代码的许多变体。

你不能直接在友好的 URL 上使用 RewriteRule 吗？

*（友好的 URL 意味着我去掉了 .php 扩展名）*

期待一些帮助！谢谢！

* * *

更新1：

请注意，区分大小写不是这里的问题。

即使我的例子是：**Page1 => Page 2**

而不是：**页面=>页面**

问题仍然存在。

* * *

更新 2：

这是迄今为止我得到的最接近的解决方案（但还没有）：

```
Redirect 301 /folder1/folder2/page http://site.com/folder1/folder2/Page? 
```

我加了一个“？” 在最后。

这将为我提供以下网址： [http://site.com/folder1/folder2/Page](http://site.com/folder1/folder2/Page)？

它删除了获取变量，但仍然不像我想要的那样对 SEO 友好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:53:57.320

我不能说我对这里的问题完全清楚：你是想让大写规则匹配还是丢失任何查询字符串？两个都？

如果是大写，我相信该规则有效（使用更正的错字 Rajesh 和 hakre 呼叫）已删除。是否希望剥离查询字符串尝试添加尾随？到你统治的后半部分。它看起来像：

```
RewriteRule ^folder1/folder2/page$ http://site.com/folder1/folder2/Page? [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:28:20.093

在第二种情况下，如果您在 htaccess 文件中添加重写规则，则不应匹配前导斜杠。

尝试：

```
RewriteRule ^folder1/folder2/page$ http://site.com/folder1/folder2/Page [R=301,L] 
```

**你为什么**问？好问题！

# asp.net - Plupload IE Upload - 非法字符问题

> ID：13275742
> 
> 赞同：2
> 
> 时间：2012-11-07T18:20:47.887
> 
> 标签：asp.net, plupload

我实现了 plupload ajax 上传器，用于在 asp.net 应用程序中上传视频和音频文件。除了使用 Flash 作为运行时的 IE（在 9.0 上测试）之外，它在所有其他浏览器上都能正常工作。

这是我在使用 Flash 作为运行时时在 IE 上收到的屏幕截图。

![在此处输入图像描述](../Images/901f1a25e001a5635d705df81dd054bc.png)

这是我正在使用的示例代码。

```
var uploader = new plupload.Uploader({
        runtimes: 'gears,html5,flash,silverlight,browserplus',
        browse_button: 'MC_uploader_v31_pickfiles',
        container: 'container',
        max_file_size: '1000mb',
        url: 'http://localhost/vuploader/videos/upload/upload.ashx',
        flash_swf_url: 'http://localhost/vuploader/plupload/js/plupload.flash.swf',
        silverlight_xap_url: 'http://localhost/vuploader/plupload/js/plupload.silverlight.xap',
        //chunk_size: '4mb',
        //unique_names: true,
        filters: [
        { title: 'Media Files', extensions: 'mp4,wmv,mpeg,mpg,flv,avi,rm,mov,m4v,dv,ogg,ogv,webm'}],
        headers: { UName: '', MTP: '0' }
    }); 
```

这是上传处理程序代码示例。

```
 int chunk = context.Request["chunk"] != null ? int.Parse(context.Request["chunk"]) : 0;
 string fileName = context.Request["name"] != null ? context.Request["name"] : string.Empty;
 HttpPostedFile fileUpload = context.Request.Files[0];
 using (var fs = new FileStream(Path.Combine(uploadPath, fileName), chunk == 0 ? FileMode.Create : FileMode.Append))
 {
     var buffer = new byte[fileUpload.InputStream.Length];
     fileUpload.InputStream.Read(buffer, 0, buffer.Length);
     fs.Write(buffer, 0, buffer.Length);
 } 
```

代码在除 IE 之外的所有浏览器上都能正常工作。任何人都可以帮助解决这个问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:27:24.493

最后我发现这是在 flash player 11 中引起的，它冻结了 pluploader 提供的现有 .swf 文件。

升级到 plupload 论坛上的最新补丁 .swf 文件时。

[http://www.diverse-tech.net/plupload_ex/plupload.flash.swf](http://www.diverse-tech.net/plupload_ex/plupload.flash.swf)

它通过 Flash 运行时修复了上传问题。

# c - '{' 标记之前的预期表达式

> ID：13275751
> 
> 赞同：12
> 
> 时间：2012-11-07T18:21:30.487
> 
> 标签：c, expression, token

对于我之前评论过的行，我得到：“错误：'{' token 之前的预期表达式”。如果结构已经定义，为什么它需要一个“{”在令牌之前。感谢您的任何帮助，您可以提供。

```
struct sdram_timing {
    u32 wrdtr;
    u32 clktr;
};

int calibration(void);
unsigned char read_i2c_cal(void);
static unsigned int eepcal[15];

main() {
    DQS_autocalibration();
}

int calibration(void)
{
    struct sdram_timing scan_list[30];

    read_i2c_cal();
    if(eepcal[0] == 0){

       scan_list = {{eepcal[1], eepcal[2]}, {-1, -1}}; // <-- PROBLEM LINE

        }
        else {
            //foo
        }

    return 0;
}

unsigned char read_i2c_cal(void) {
    eepcal[0] = 0;
    eepcal[1] = 02;
    eepcal[2] = 03;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-07T18:28:07.647

错误是因为您不能以这种方式分配数组，只能用于初始化它。

```
int arr[4] = {0}; // this works
int arr2[4];

arr2 = {0};// this doesn't and will cause an error

arr2[0] = 0; // that's OK
memset(arr2, 0, 4*sizeof(int)); // that is too 
```

因此，将其应用于您的具体示例：

```
struct sdram_timing scan_list[30];
scan_list[0].wrdtr = 0;
scan_list[0].clktr = 0; 
```

或者您可以以相同的方式使用 memset，但您需要结构的大小而不是 sizeof(int)。这并不总是有效......但考虑到你的结构，它会。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-07T18:37:21.290

C 语言中的数组是不可赋值的。无论您使用什么语法，您都不能为整个数组分配任何内容。换句话说，这

```
scan_list = { { eepcal[1], eepcal[2] }, {-1, -1} }; 
```

不可能。

在 C89/90 中，您必须逐行拼写作业

```
scan_list[0].wrdtr = eepcal[1];
scan_list[0].clktr = eepcal[2];
scan_list[1].wrdtr = -1;
scan_list[1].clktr = -1; 
```

在现代 C（C99 后）中，您可以使用复合文字来分配整个结构

```
scan_list[0] = (struct sdram_timing) { eepcal[1], eepcal[2] };
scan_list[1] = (struct sdram_timing) { -1, -1 }; 
```

最后，在现代 C 中，您可以使用`memcpy`和复合文字将数据复制到数组

```
memcpy(scan_list, (struct sdram_timing[]) { { eepcal[1], eepcal[2] }, {-1, -1} },
  2 * sizeof *scan_list); 
```

最后一个变体，虽然不是很优雅，但却是最接近“模拟”数组赋值的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T18:27:52.277

您只能在变量声明中使用初始化列表，而不是事后。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T18:31:46.143

初始化列表只能用于初始化数组。之后您将无法使用它。

但是，如果您使用`GCC`，则可以使用`Compound Literal`扩展名：

```
scan_list = (struct sdram_timing[30]){{eepcal[1], eepcal[2]}, {-1, -1}}; 
```

您可能需要将`scan_list`类型更改为`struct sdram_timing *`

# facebook - 在单个 Graph API 查询中可以检索多少 Facebook 用户？

> ID：13275753
> 
> 赞同：3
> 
> 时间：2012-11-07T18:21:38.323
> 
> 标签：facebook, facebook-graph-api

通过以下请求，可以使用 Facebook Graph API 检索多个用户：

`https://graph.facebook.com?ids=user1, user2, user3,...`

有谁知道我可以在单个查询中检索的用户数量是否有限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:38:43.417

根据您传递 URL 的方式和通过哪些服务器，最大 URL 长度[可能有](http://en.wikipedia.org/wiki/Query_string#Compatibility_issues)255、1024 或 2083 个字符的限制。如果存在，这将是您的限制因素。如果您使用 javascript 进行查询，您可能应该假设最大长度为 1024 个字符或更少。

假设您是通过服务器端脚本传递的，并且对出站 URL 长度没有限制，我猜您会发现 Facebook 存在限制。Facebook 似乎喜欢 5*10 ^n -item 限制他们的服务。我怀疑这可能是相同的，n = 1、2或3。

# sql-server - 无法与 sqmcmd 连接，尽管 MS SQL Server Management Studio 可以

> ID：13275758
> 
> 赞同：1
> 
> 时间：2012-11-07T18:21:52.510
> 
> 标签：sql-server

我有一个需要连接到远程数据库的案例。使用 MS SQL Server Management Studio 我可以毫无问题地连接。但是我在用 sqlcmd 做同样的事情时遇到了麻烦。

有人能告诉我 Mgmt Studio 的不同之处吗？

现在，我正在这样做：

```
sqlcmd /S server_name -E 
```

我正在使用 SQL Server 2008 R2。

谢谢，克里斯蒂安

# c# - 从任务栏单击并向上拖动时，如何在 C# 中更改程序的名称？

> ID：13275763
> 
> 赞同：0
> 
> 时间：2012-11-07T18:22:01.613
> 
> 标签：c#, windows-7, taskbar

好的。因此，在 Windows 7 中，您知道如何拥有打开程序的图标。好吧，当我单击并向上拖动我的 C# Windows 窗体应用程序时，它会显示“WindowsFormApplication3”当在 Visual Studio 中的每个可能文件中，我将其更改为我的程序的名称。即使在任务管理器中，它也会显示我的程序名称。如何更改从任务栏中的程序图标单击并向上拖动时显示的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:24:13.773

它通常基于进程名称。使用 TaskMgr.exe 的“进程”选项卡验证这一点，并检查它是否也被称为“WindowsFormApplication3”。

您可以使用 Project + Properties、Application 选项卡、Assembly name 设置对其进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:28:38.970

尝试在调试器之外运行程序。按 [ctrl]+F5 执行此操作，然后查看它的名称。当您在 IDE 调试器之外运行它时显示的名称应该是其他人运行您的程序 AFAIK 时显示的名称。

# spring - Spring：自动装配依赖项的注入失败

> ID：13275764
> 
> 赞同：0
> 
> 时间：2012-11-07T18:22:04.063
> 
> 标签：spring, dependency-injection, spring-security

嗨，我正在开发 Spring 应用程序。我想使用 spring 实用程序对密码进行哈希处理。

```
<bean class="org.springframework.security.authentication.encoding.Md5PasswordEncoder" id="passwordEncoder"/> 
```

已添加到 application-context.xml 中。

任何人都可以帮助我，在启动 Apache 时获得以下堆栈跟踪：

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userDao': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire method: private java.lang.String com.sapram.qx.dao.UserDao.encodePassword(java.lang.String); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [java.lang.String] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire method: private java.lang.String com.sapram.qx.dao.UserDao.encodePassword(java.lang.String); nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [java.lang.String] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:593)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    ... 23 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [java.lang.String] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoSuchBeanDefinitionException(DefaultListableBeanFactory.java:952)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:821)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:735)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:551)
    ... 25 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:33:43.453

您必须`@Autowired`在方法上添加注释：

```
 private java.lang.String UserDao.encodePassword(java.lang.String); 
```

因为 Spring Framework 没有找到任何 String 类型的 bean 来注入它，所以它抛出了异常。

删除注释。

# c# - 鼠标悬停时的 WPF TextBlock 样式下划线

> ID：13275765
> 
> 赞同：12
> 
> 时间：2012-11-07T18:22:04.390
> 
> 标签：c#, wpf, styles

简单的问题。下面的 WPF C# 代码可以减轻一些重量吗？我的意思是，WTF，呃......我的意思是 WPF，来一个。大家都看过 CSS 吗？当我像链接一样悬停鼠标时，我只想在文本下划线。我真的需要为此添加 9 行吗？

```
<TextBlock x:Name="Cassette_tblPrintLabel" Text="Print Label" Canvas.Left="154" Canvas.Top="215" Foreground="#FF3355FF" Cursor="Hand" MouseDown="Cassette_lblPrintLabel_MouseDown">
    <TextBlock.Style>
        <Style TargetType="TextBlock">
            <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="TextBlock.TextDecoration" Value="Underline" />
            </Trigger>
            </Style.Triggers>
        </Style>
    </TextBlock.Style>
</TextBlock> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-07T18:28:36.017

将样式添加为资源；那么至少你可以重复使用它。我认为这是你能做的最好的。

```
<Application.Resources>
    <Style TargetType="TextBlock" x:Key="HoverUnderlineStyle">
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="TextBlock.TextDecorations" Value="Underline" />
            </Trigger>
        </Style.Triggers>
    </Style>
</Application.Resources>

<TextBlock Style="{StaticResource HoverUnderlineStyle}" /> 
```

# c# - list.add 似乎正在添加对原始对象的引用？

> ID：13275768
> 
> 赞同：9
> 
> 时间：2012-11-07T18:22:16.793
> 
> 标签：c#, list

我创建了几个自定义类 (`NTDropDown`和`NTBaseFreight`)，用于存储从数据库中检索到的数据。我初始化一个列表`NTBaseFreight`和 2 个列表`NTDropDown`。

我可以成功地使用`List.Add`将运费添加到运费列表，但是当我调试代码时，我的 2 个下拉列表只包含 1 `NTDropDown`，它始终具有相同的值`NTDropDown`（我假设这是一个引用问题，但我在做什么错误的）？

举个例子，在第二行，如果承运人和我`carrier_label`在`"001", "MyTruckingCompany"`if 语句上打断 for `frt_carriers`，则 frt_carriers 和 frt_modes 都将在其列表中仅包含一项，其值`"001", "MyTruckingCompany"`...与 中的值相同`NTDropDown`。

代码：

```
List<NTDropDown> frt_carriers = new List<NTDropDown>();
List<NTDropDown> frt_modes = new List<NTDropDown>();
List<NTBaseFreight> freights = new List<NTBaseFreight>();
NTDropDown tempDropDown = new NTDropDown();
NTBaseFreight tempFreight = new NTBaseFreight();

//....Code to grab data from the DB...removed

while (myReader.Read())
{
    tempFreight = readBaseFreight((IDataRecord)myReader);

    //check if the carrier and mode are in the dropdown list (add them if not)
    tempDropDown.value = tempFreight.carrier;
    tempDropDown.label = tempFreight.carrier_label;
    if (!frt_carriers.Contains(tempDropDown)) frt_carriers.Add(tempDropDown);

    tempDropDown.value = tempFreight.mode;
    tempDropDown.label = tempFreight.mode_label;
    if (!frt_modes.Contains(tempDropDown)) frt_modes.Add(tempDropDown);

    //Add the freight to the list
    freights.Add(tempFreight);
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T18:28:51.357

是的，引用类型列表实际上只是引用列表。

您必须为要存储在列表中的每个对象创建一个新实例。

此外，该`Contains`方法比较引用，因此包含相同数据的两个对象不被认为是相等的。在列表中对象的属性中查找值。

```
if (!frt_carriers.Any(c => c.label == tempFreight.carrier_label)) {
  NTDropDown tempDropDown = new NTDropDown {
    value = tempFreight.carrier,
    label = tempFreight.carrier_label
  };
  frt_carriers.Add(tempDropDown);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-07T18:28:04.590

`tempDropDown`在整个循环中是同一个对象。如果要添加多个，则需要创建它的新实例。

我很难弄清楚你到底想在列表中添加 tempDropDown 做什么。

# spring - 使用 SpringJUnit4ClassRunner 时在运行时跳过测试

> ID：13275773
> 
> 赞同：4
> 
> 时间：2012-11-07T18:22:45.887
> 
> 标签：spring, junit

在我的项目中，我有需要很长时间才能运行的验收测试。当我在代码中添加新功能并编写新测试时，我想为了时间跳过一些现有的测试用例。我正在使用 SpringJUnit4ClassRunner 使用 Spring 3 和 junit 4。我的想法是为测试类创建一个注释（@Skip 或其他东西）。我猜我将不得不修改运行程序以查找此注释并从系统属性中确定是否应在测试时包含测试类。我的问题是，这很容易做到吗？还是我在某处缺少对我有帮助的现有功能？

谢谢。埃里克

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-07T21:21:55.687

在 Junit 4 中使用[@Ignore和在 Junit 5 中使用](https://github.com/junit-team/junit4/wiki/Ignoring-tests)[@Disabled](https://junit.org/junit5/docs/current/user-guide/#writing-tests-disabling)注释您的类（或单元测试方法），以防止执行带注释的类或单元测试。

忽略测试类：

```
@Ignore
public class MyTests {
    @Test
    public void test1() {
       assertTrue(true);
    }
} 
```

忽略单个单元测试；

```
public class MyTests {
    @Test
    public void test1() {
         assertTrue(true);
    }

    @Ignore("Takes too long...")
    @Test
    public void longRunningTest() {
        ....
    }

    @Test
    public void test2() {
         assertTrue(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-01T06:40:44.107

mvn install -Dmaven.test.skip=true
这样你就可以在没有测试的情况下构建你的项目，

mvn -Dtest=TestApp1 test
您只需添加应用程序的名称即可对其进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-30T21:42:22.847

我使用 Spring 配置文件来执行此操作。在您的测试中，在 Spring 环境中自动装配：

```
@Autowired
private Environment environment; 
```

在您不想默认运行的测试中，检查活动配置文件并在相关配置文件不活动时立即返回：

```
@Test
public void whenSomeCondition_somethingHappensButReallySlowly() throws Exception{
    if (Arrays.stream(environment.getActiveProfiles()).noneMatch(name -> name.equalsIgnoreCase("acceptance"))) {
        return;
    }
    // Real body of your test goes here
} 
```

现在，您可以使用以下方式运行日常测试：

```
> SPRING_PROFILES_ACTIVE=default,test gradlew test 
```

当您想要运行验收测试时，例如：

```
> SPRING_PROFILES_ACTIVE=default,test,acceptance gradlew test 
```

当然，这只是一个示例命令行，假设您使用 Gradle 包装器来运行测试，并且您使用的活动配置文件集可能不同，但关键是您启用/禁用`acceptance`配置文件。您可以在您的 IDE、CI 测试启动器等中执行此操作...

注意事项：

1.  您的测试运行程序会将测试报告为运行，而不是忽略，这是误导性的。
2.  而不是在单个测试中硬编码配置文件名称，您可能想要一个集中的地方来定义它们......否则很容易忘记所有可用的配置文件。

# c# - 获取最新信息后目录不是空消息

> ID：13275776
> 
> 赞同：2
> 
> 时间：2012-11-07T18:22:54.887
> 
> 标签：c#, visual-studio-2008, tfs

环境：Visual Studio 2008 和 Team Foundation Server 2008

执行“获取最新”后，我收到“无法删除，因为目录不为空”消息。任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T03:18:36.157

假设您在磁盘上有一个名为 fold 的文件夹，其中包含两个文件 foo.txt 和 bar.txt，如下所示：

```
fold
    foo.txt
    bar.txt 
```

现在，假设 foo.txt 已签入源代码控制，而 bar.txt 只是您在本地磁盘上的 TFS 不知道的文件（即它从未被签入，并且您没有待处理的文件）添加它）。

现在，假设您的团队成员删除折叠，然后您运行“获取最新”。TFS 认为它应该从本地磁盘中删除 fold 和 foo.txt。但是，它也注意到 bar.txt（它不知道的文件）处于折叠状态。此时，TFS 意识到它无法删除 bar.txt，因为它不想从您的磁盘中删除无法恢复的文件。因此，它删除了 foo.txt 并留下了 bar.txt。由于它无法删除 bar.txt，因此它无法删除折叠，因此会向您发出无法删除的警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:27:29.970

使用管理员帐户使用源代码管理资源管理器，查看源代码管理器文件夹内的内容。所有未提交删除的项目都可能导致此问题。签入待处理的更改后，再次获取项目（而不是文件夹）的最新内容。那时一切都会好起来的。

干杯

# c# - 检查点是否在数组边界内的方法

> ID：13275780
> 
> 赞同：0
> 
> 时间：2012-11-07T18:23:24.713
> 
> 标签：c#, arrays, generics, multidimensional-array

我想创建一个可以接受任何二维数组和一个点的方法，并检查该点的坐标是否在数组的维度内。

我不明白如何将任何类型的二维数组传递给这个方法。

```
Check(<T>[,] arr, Point p)
Check(Array[,] arr, Point p) 
```

两者都给了我不同类型的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T18:25:04.823

假设您想制作一个通用方法，我认为您的意思是`Check<T>(T[,] arr, Point p)`.

# java - Java中Singleton类中的可变字段

> ID：13275782
> 
> 赞同：3
> 
> 时间：2012-11-07T18:23:26.103
> 
> 标签：java, singleton, volatile

在某些站点/博客中，我发现单例代码为

```
public class MySingleton{

    private static MySingleton instance = null;
    .......
    .......
} 
```

在其他一些地方，我发现单例代码为

```
public class MySingleton{

    private volatile static MySingleton instance = null;
    .......
    .......
} 
```

是否有必要`MySingleton`作为参考`volatile`？会有什么意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:32:52.130

Java 中的 Volatile 关键字用作 Java 编译器和线程的指示符，它们不缓存此变量的值并始终从主内存中读取它

** 编辑 **

```
private volatile static MySingleton instance = null; 
```

在上面的代码片段中，volatile 关键字确保多个线程在将`instance`变量初始化为 MySingleton 实例时正确处理该变量。

阅读更多：http: [//javarevisited.blogspot.com/2011/06/volatile-keyword-java-example-tutorial.html#ixzz2BYyA5Jnm](http://javarevisited.blogspot.com/2011/06/volatile-keyword-java-example-tutorial.html#ixzz2BYyA5Jnm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:29:15.117

要么你想用一个简单的`enum`

```
public enum MySingleton {
    INSTANCE
} 
```

或者你有充分的理由让它变得更复杂

```
public class MySingleton {
    private MySingleton() { }

    private static MySingleton instance = null;

    public synchronized static MySingleton getInstance() {
         if (instance == null)
             instance = new MySingleton();
         return instance;
    }
} 
```

无论哪种方式，使用 volatile 都无济于事。

恕我直言，没有一个好的*单例*模式可供您使用`volatile`，因此如果需要，代码需要修复或简化。

* * *

AFAIK 使用 volatile 的唯一情况是双重检查锁定

```
public class MySingleton {
    private MySingleton() { }

    private static volatile MySingleton instance = null;

    public static MySingleton getInstance() {
         if (instance == null)
             synchronzied(MySingleton.class) {
                 if (instance == null)
                     instance = new MySingleton();
             }
         return instance;
    }
} 
```

为了比较，`enum`上面的示例做了很多示例。

[http://javarevisited.blogspot.co.uk/2011/06/volatile-keyword-java-example-tutorial.html](http://javarevisited.blogspot.co.uk/2011/06/volatile-keyword-java-example-tutorial.html)

[http://www.ibm.com/developerworks/java/library/j-dcl/index.html](http://www.ibm.com/developerworks/java/library/j-dcl/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:31:16.220

仅当您在多线程系统中具有可变单例字段时才需要这样做，特别是在单例延迟初始化的情况下。

这是关于如何在 Java 中的多线程系统中延迟初始化单例的更大讨论的一部分。有几种机制可用于此，但最流行的是：

*   [双重检查锁定](http://en.wikipedia.org/wiki/Double-checked_locking)
*   使用双重检查锁定`volatile`
*   [静态内部“实例持有人”](http://en.wikipedia.org/wiki/Initialization-on-demand_holder_idiom)
*   [将单例声明为 an`enum`而不是 a`class`](https://stackoverflow.com/questions/3635396/pattern-for-lazy-thread-safe-singleton-instantiation-in-java/3635619#3635619)

目前公认的为多线程系统保存延迟初始化的单例的方法是这种`enum`方法，尽管它们都在 Java 1.5+ 中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T18:25:24.700

好吧，是的，如果它是可变的并且出现在多线程代码中。您只需要了解什么`volatile`意思，单身人士是否需要使用它并没有什么特别之处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T18:28:12.700

无法判断 - 在两个示例中字段都是私有的，因此根据它们的发布方式，您可能需要也可能不需要它们是易变的。标准的习惯用法是[改用枚举](https://stackoverflow.com/questions/11831737/why-is-enum-best-implementation-for-singleton)。

# ruby-on-rails-3 - Rails 2 到 3 和不推荐使用的 gem

> ID：13275790
> 
> 赞同：0
> 
> 时间：2012-11-07T18:24:02.800
> 
> 标签：ruby-on-rails-3, gem, ruby-on-rails-2

我正计划为一个相当*大*的应用程序启动从 Rails 2 到 Rails 3 的升级。问题是该项目依赖于 Rails 3 不再支持的一些旧 gem。

知道停用相关功能不是一种选择，我有什么选择？除了寻找替代宝石之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:02:25.470

将应用程序升级到 rails 3 时最大的问题通常不是 gems 的更新......

您可以查看[http://www.railsplugins.org/](http://www.railsplugins.org/)以了解您使用的 gem 是否兼容。我不知道该页面是否是最新的，rails 3 已经存在了一段时间，rails 4 正在制作中。

这些是合理升级路径的步骤：

*   将您的应用更新到最新的 2.xx 版本
*   将所有 gem 更新到最新的兼容版本
*   创建一个 rails3 分支（更新需要很长时间）
*   修复您的应用程序代码中的所有不兼容问题
*   更新/替换/修补所有不适用于 rails 3 的 gem

# android - 当前位置到给定点之间的行驶方向

> ID：13275792
> 
> 赞同：0
> 
> 时间：2012-11-07T18:24:14.770
> 
> 标签：android, google-maps, google-api

> **可能重复：**
> [Android 在 Mapview 上使用两个 POI-s 绘制路线](https://stackoverflow.com/questions/4408671/android-draw-route-on-a-mapview-with-twoo-poi-s)

我需要显示/“绘制”当前位置到给定点之间的路线（行驶方向），

我该怎么做 ？

示例/方法将完全帮助...

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:45:30.617

[这](https://stackoverflow.com/questions/2023669/j2me-android-blackberry-driving-directions-route-between-two-locations/2023685#2023685)是答案。只需添加那里给出的类并调用所需的方法即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:03:14.643

[这](https://stackoverflow.com/a/11745316/1230123)是在两点之间绘制方向的链接，您可以将第一个点作为您的位置，将第二个点作为您的目的地（取决于您将如何从用户那里获取它，有多种方式）。由于这是您的第一篇文章，因此在您提出问题之前，必须搜索类似的问题并自行尝试。

# java - URLrewrite 过滤器中的过滤器链

> ID：13275793
> 
> 赞同：3
> 
> 时间：2012-11-07T18:24:15.940
> 
> 标签：java, tuckey-urlrewrite-filter

我正在使用 Tuckey 的 URL 重写过滤器和自制的安全过滤器。

*   URL 重写过滤器被映射到`/*`
*   安全过滤器映射到“/*”

此外，URL 重写过滤器具有以下规则：

```
<rule>
    <name>User</name>
    <from>^/user/$</from>
    <to>/user.do</to>
</rule> 
```

对于像这样的请求：**myapp/user/**我期待这个流程：

1.  由 URL 重写过滤器映射。请求 URL（或 Servlet 路径）变为**user.do**
2.  由安全过滤器映射。验证和重定向
3.  到达映射到**user.do的控制器**

但是，无论何时 Tuckey 的 URL 重写应用规则，都会以某种方式跳过第二步。这会导致非常不愉快的行为，例如在没有适当身份验证的情况下访问受保护的页面。

有什么我错过的吗？我应该期待另一种行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T01:52:37.037

发生这种情况是因为通常 urlrewritefilter 不会重定向 url。它只是在内部转发它。尝试添加 type="redirect" 作为属性，您的安全过滤器将捕获重定向的请求。

```
<rule>
    <name>User</name>
    <from>^/user/$</from>
    <to type="redirect">/user.do</to>
</rule> 
```

这以前对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T03:48:43.237

如果你做**type="redirect"**客户端将被发出一个 302“临时重定向”状态，最终将浏览器重定向到新的 url。

如果您希望用户仍然在浏览器的地址行中看到旧的“**来自**”网址，请尝试将这些添加到您的“安全”过滤器中：

```
 <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher> 
```

# android - viewpager.draw 上的 Android java null

> ID：13275794
> 
> 赞同：1
> 
> 时间：2012-11-07T18:24:26.557
> 
> 标签：android, nullpointerexception, android-viewpager

我无法理解错误在哪里，因为它似乎不是源自我的应用程序的问题，并且似乎在它自己的支持库中。

我刚刚意识到这个错误只发生在带有 android 2.1 update 1 的旧设备上，有时是 android 2.2 froyo。在我的设备 android 2.3 及以上版本中完全没有问题。我无法在我拥有的任何设备上重现此问题，甚至无法使用配置有相同规格手机的模拟器来重现此问题

我一整天都在关注这个问题，但没有找到问题所在。

```
java.lang.NullPointerException
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1366)
        at android.view.View.draw(View.java:6743)
        at android.support.v4.view.ViewPager.draw(SourceFile:1923)
        at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
        at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
        at android.view.View.draw(View.java:6743)
        at android.widget.FrameLayout.draw(FrameLayout.java:352)
        at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
        at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
        at android.view.View.draw(View.java:6743)
        at android.widget.FrameLayout.draw(FrameLayout.java:352)
        at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1843)
        at android.view.ViewRoot.draw(ViewRoot.java:1407)
        at android.view.ViewRoot.performTraversals(ViewRoot.java:1163)
        at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:123)
        at android.app.ActivityThread.main(ActivityThread.java:4627)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:521)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634)
        at dalvik.system.NativeStart.main(Native Method) 
```

以及来自 Main Activity onCreate 的代码

*   线性布局寻呼机只是一组点，用于指示用户在哪个视图寻呼机编号。填充寻呼机是用 ViewPager getcount() 检索的查看寻呼机数量上的点填充下部屏幕

*   PageListener 只是检查viewpager何时作为切换页面并用另一种颜色绘制相应的点

    ```
    pager = (LinearLayout) findViewById(R.id.pager);

    appViewPager = (ViewPager) findViewById(R.id.AppViewPager);

    adapter = new MyPagerAdapter(this, appsList);

    appViewPager.setAdapter(adapter);

    populatePager();

    PageListener pageListener = new PageListener();

    appViewPager.setOnPageChangeListener(pageListener); 
    ```

和 MyPagerAdapter 代码：

```
public class MyPagerAdapter extends PagerAdapter implements OnCancelListener {

private Context ctx = null;
public ArrayList<App> appsList;

public MyPagerAdapter(Context ctx, ArrayList<App> appsList) {
    this.ctx = ctx;
    this.appsList = appsList;
}

@Override
public int getCount() {
    int listsize = appsList.size();
    int numOfAppsPerPage = Integer.valueOf(ctx.getResources().getString(R.string.grid_number_of_apps_per_page));
    float num = Float.valueOf(listsize) / Float.valueOf(numOfAppsPerPage);
    float rest = num % 1;

    int numOfPagers = Math.round(num - rest);

    if (rest > 0 || numOfPagers == 0) {
        numOfPagers = numOfPagers + 1;
    }

    return numOfPagers;
}

@Override
public int getItemPosition(Object object) {
    return POSITION_NONE;
}

@Override
public Object instantiateItem(View collection, int position) {

    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View view = inflater.inflate(R.layout.grid, null);

    GridView gridview = (GridView) view.findViewById(R.id.gridview);

    int starterPosition;

    int numOfAppsPerPage = Integer.valueOf(ctx.getResources().getString(R.string.grid_number_of_apps_per_page));

    starterPosition = numOfAppsPerPage * position;
    int enderPosition = starterPosition + numOfAppsPerPage;

    // Log.e("ViewPagerPosition", "Position:" + position);

    int appsListSize = appsList.size();

    if (enderPosition > appsListSize) {
        enderPosition = appsListSize;
    }

    ArrayList<App> shorterList = new ArrayList<App>(appsList.subList(
            starterPosition, enderPosition));

    final AppLauncherAdapter grid = new AppLauncherAdapter(ctx, shorterList);

    gridview.setAdapter(grid);

    ((ViewPager) collection).addView(gridview, 0);

    return gridview;
}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);

}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);
}

@Override
public Parcelable saveState() {
    return null;
}
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T17:33:24.697

我有一个类似的问题并用这个链接解决它。我希望这有帮助：

[https://vvirlan.wordpress.com/2015/01/11/solved-android-java-lang-nullpointerexception-at-android-view-viewgroup-dispatchdrawviewgroup-java2922/](https://vvirlan.wordpress.com/2015/01/11/solved-android-java-lang-nullpointerexception-at-android-view-viewgroup-dispatchdrawviewgroup-java2922/)

# jquery - 使用 datejs 对输入值求和

> ID：13275807
> 
> 赞同：1
> 
> 时间：2012-11-07T18:25:13.217
> 
> 标签：jquery, datejs

我正在尝试获取输入字段值，将它们转换为毫秒，然后将它们全部相加。

如何使用 datejs 总结小时数？

例如。

```
<input type="text" class="singleSumma" value="03:30">
<input type="text" class="singleSumma" value="02:30">
<input type="text" class="singleSumma" value="03:45">

<script type="text/javascript">
$(document).ready(function(){
    $(".singleSumma").each( function(){ 
        var singleSummaVal= $(this).val();              
             if (singleSummaVal) {                                      
                var ssv = Date.parse(singleSummaVal).getTime();
                           //how to sum input values using datejs?
                           // result= ssv.add(ssv);                         

            }           
    }); 
});
</script> 
```

**geoffrey.mcgill 的**解决方案****

 **```
var t = Date.today();
var sum= 0 ;

$(".singleSumma").each(function() {             
    var singleSummaVal = $(this).val();
       if (singleSummaVal) {
        var ssv = Date.parse(singleSummaVal);
        sum += (ssv - t);
            var ts = new TimeSpan(sum);

           console.log(ts.hours + ":" + ts.minutes);
      }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:26:41.507

从一天开始，您必须以毫秒为单位获取每个值的值。然后将所有这些毫秒值加在一起并传递给一个新的 TimeSpan 对象。然后 TimeSpan 将计算天数、小时数、分钟数、秒数和毫秒数。

以下示例演示了整个场景。

**例子**

```
var d1 = Date.parse('03:30'),
    d2 = Date.parse('02:30'),
    d3 = Date.parse('03:45'),
    t = Date.today();

var sum = (d1 - t) + (d2 - t) + (d3 - t);

var ts = new TimeSpan(sum);

console.log('hours', ts.hours); // 9
console.log('minutes', ts.minutes); // 45 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:48:27.917

试试用这个

```
<script type="text/javascript">
$(document).ready(function(){
    var totalSum = 0;
    $(".singleSumma").each( function(){ 
        var singleSummaVal= $(this).val();              
            if (singleSummaVal) {                                       
                var ssv = Date.parse(singleSummaVal).getTime();
                totalSum += ssv; 
            }           
    }); 
    alert('ts in seconds' + totalSum ); 
    // or if you like other time properties
    var sumDT = new Date();
    sumDT.setTime(totalSum);    
});
</script> 
```**

# jquery - 如何获取、设置和选择具有数据属性的元素？

> ID：13275812
> 
> 赞同：25
> 
> 时间：2012-11-07T18:25:29.503
> 
> 标签：jquery, jquery-selectors, custom-data-attribute

我在数据属性方面遇到了一些问题，由于某种原因我无法正常工作，所以我一定是做错了什么：

放：

```
$('#element').data('data1', '1'); //Actually in my case the data is been added manually 
```

这有什么区别吗？

得到：

```
$('#element').data('data1'); 
```

选择：

```
$('#element[data1 = 1]') 
```

这些都不适合我，是我编造的还是怎么回事？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-07T18:46:31.603

所有的答案都是正确的，但我想说明一些其他人没有做过的事情。
jQuery`data`方法的作用类似于 html5 数据属性的 getter，但 setter 不会改变 data-* 属性。
因此，如果您手动添加数据（如您的评论中所述），那么您可以使用 css 属性选择器来选择您的元素：

```
$('#element[data-data1=1]') 
```

但是如果您通过 jQuery 添加（更改）数据，则上述解决方案将不起作用。
这是此失败的示例：

```
var div = $('<div />').data('key','value');
alert(div.data('key') == div.attr('data-key'));// it will be false 
```

所以解决方法是通过检查 jQuery 数据值以匹配所需的值来过滤集合：

```
// replace key & value with own strings
$('selector').filter(function(i, el){
    return $(this).data('key') == 'value';
}); 
```

因此，为了克服这些问题，您需要使用 html5 数据集属性（通过 jQuery 的`attr`方法）作为 getter 和 setter：

```
$('selector').attr('data-' + key, value); 
```

或者您可以使用过滤 jQuery internal 的自定义表达式`data`：

```
$.expr[':'].data = function(elem, index, m) {
    // Remove ":data(" and the trailing ")" from the match, as these parts aren't needed:
    m[0] = m[0].replace(/:data\(|\)$/g, '');
    var regex = new RegExp('([\'"]?)((?:\\\\\\1|.)+?)\\1(,|$)', 'g'),
    // Retrieve data key:
    key = regex.exec( m[0] )[2],
    // Retrieve data value to test against:
    val = regex.exec( m[0] );
    if (val) {
        val = val[2];
    }
    // If a value was passed then we test for it, otherwise we test that the value evaluates to true:
    return val ? $(elem).data(key) == val : !!$(elem).data(key);
}; 
```

并像这样使用它：

```
$('selector:data(key,value)') 
```

## 更新

我知道这个线程已经有几年的历史了，但由于它有一些活动，值得一提的是，使用`querySelector`dom API（不需要 jQuery）执行此操作非常简单：

```
document.querySelectorAll('[attribute=value]') 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-07T18:31:53.537

要立即在 DOM 中反映属性的值，您可以使用`.attr()`

```
$('#element').attr('data-data1', '1');  // Sets the attribute

$('#element[data-data1="1"]') // Selects the element with data-data1 attribute'

$('#element').data('data1'); // Gets the value  of the attribute

$('#element').attr('data-data1'); // Gets the value  of the attribute 
```

用纯 Javascript 你可以试试这个

```
var elem = document.getElementById('element');

elem.setAttribute('data-data1', '1'); // Set the attribute

elem.getAttribute('data-data1'); // Gets the attribute 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-07T18:34:14.433

```
// Set
$('#element').attr('data-value', 'value');
// Get
var value = $('#element').attr('data-value');
// Select
var elem = $('#element[data-value = "' +value+ '"]'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T18:29:53.243

您正在使用 ID 选择器，因此无需使用属性选择器，因为数据是一个属性并且您使用`data`方法（*而不是 attr 方法*）设置它，如果您只想选择元素，则无法使用属性选择器选择元素它有`data1 === 1`你可以使用的`filter`方法：

```
(function($){
    $(function(){
       // ...
       $('#element').filter(function() {
          return this.dataset.data1 == 1
          // return $(this).data('data1') == 1
       })
    })
})(jQuery); 
```

> `dataset`：允许在读取和写入模式下访问元素上设置的所有自定义数据属性（data-*）。它是 DOMString 的映射，每个自定义数据属性都有一个条目。

# ruby-on-rails - nil:NilClass 的未定义方法“destroy”

> ID：13275814
> 
> 赞同：10
> 
> 时间：2012-11-07T18:25:32.810
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

每次用户提交一些统计信息时，我的应用程序都会成功地为表创建行。现在我想提供一个删除按钮来删除一些行。

当我单击删除按钮时，我收到错误：

```
undefined method `destroy' for nil:NilClass 
```

在这种情况下，无论出于何种原因，似乎 rails 不理解 destroy 方法，或者 rails 没有看到任何要销毁的东西，因此 nil:NilClass。

我的第一个问题是确定是哪种情况，如果有的话。

我的第二个问题是修复它：D

这是我的 show.html：

```
<% provide(:title, "Log" ) %>
<% provide(:heading, "Your Progress Log") %>

<div class="row">  
  <div class="span8">
    <% if @user.status_update.any? %>
      <h3>Status Updates (<%= @user.status_update.count %>)</h3>    
      <table>
        <thead>
          <tr>
            <th>Entry Date</th>
            <th>Weight</th>
            <th>BF %</th>
            <th>LBM</th>
            <th>Fat</th>
            <th>Weight Change</th>
            <th>BF % Change</th>
            <th>Fat Change</th>
          </tr>
        </thead>
      <tbody class = "status updates">
          <%= render @status_updates %>
      </tbody>        
    <% end %>
  </div>
</div> 
```

"<%= render @status_updates %>" 调用 _status_update 部分。

```
 <tr>
 .
 .
 .
 . 
 <% if current_user==(status_update.user) %> 
 <td>
       <%= link_to "delete", status_update, method: :delete %>

 </td>
 <%  end  %>         

</tr> 
```

最后，这里是 StatusUpdateController

```
def destroy
    @status_update.destroy
    redirect_to root_url
end 
```

以下是错误页面上的参数：

```
{"_method"=>"delete",
 "authenticity_token"=>"w9eYIUEd2taghvzlo7p3uw0vdOZIVsZ1zYIBxgfBymw=",
 "id"=>"106"} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-07T18:29:39.743

由于您没有显示任何可以分配的代码（过滤器等）`@status_update`，我认为没有。`@status_update`因此，您的方法中的实例变量`destroy`未设置。您需要使用对象的 ID 查询类。

重写你的destroy方法如下：

```
def destroy
    @status_update = StatusUpdate.find(params[:id])
    if @status_update.present?
      @status_update.destroy
    end
    redirect_to root_url
end 
```

注意：将类名替换为`StatusUpdate`您的实际类名。

# css - 用css增加动态链接的点击面积

> ID：13275817
> 
> 赞同：1
> 
> 时间：2012-11-07T18:25:39.743
> 
> 标签：css

我有一个与表格列关联的背景图像，在该表格列的中心我有一个动态链接，示例如下。

[http://www.qrrw.net/v](http://www.qrrw.net/v)

正如你所看到的，写作是一个 php 链接，有没有办法让背景图像的整个区域都可以点击，而不仅仅是文本？

任何想法或建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:26:58.457

只需`display: block;`在您`<a>`的 s 上添加一个。

顺便说一句，那些`<div>`具有`center`属性 (brrrrh) 的人会使您的代码无效。考虑删除它们，为了不松散你的布局，在你`<a>`的 s.

```
.manu1 a {
    display: block;
    text-align: center;
    line-height: 109px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:30:34.287

除此之外，在`display:block;`上面放一点可能会有所`padding:10px;`帮助`<a>`。根据需要调整像素量以覆盖大部分背景图像

# sql-server - 创建 VFP Chrome 或 FireFox 对象

> ID：13275818
> 
> 赞同：1
> 
> 时间：2012-11-07T18:25:44.020
> 
> 标签：sql-server, firefox, google-chrome, visual-foxpro, ole-automation

我们有一个 VFP 应用程序，需要在 Chrome 或 Firefox 中打开一个特定的站点。该网站针对其中任何一种浏览器进行了优化。

我们知道如何在我们的应用`Createobject`程序`InternetExplorer.Application`中打开浏览器。这允许我们与浏览器交互。但是，它仅适用于`IE`.

有谁知道如何使用`Chrome`or来实现相同的目的`Firefox`？

我们这样做是为了打开默认浏览器（即`Chrome`或`Firefox`）。

```
oShell = Createobject("wscript.shell")
oShell.Run(lcUrl) 
```

这种方法的问题是它只是打开浏览器，我们不能与之交互（例如，传递值和读取页面上的项目）。

至少，如果我们可以在不使用 a 的情况下打开`Chrome`或`Firefox`传递 POST 参数`querystring`，那将是一个可以接受的开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:45:43.600

Chrome 没有公开 OLE 自动化接口，所以我认为你对 CreateObject() 不走运。您可能能够以某种方式向它发送击键，但它充其量只是kludgey。

# ruby-on-rails - 覆盖 FactoryGirl 中的属性键

> ID：13275821
> 
> 赞同：0
> 
> 时间：2012-11-07T18:25:54.357
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, factory-bot

我有一个`Post`带有属性的模型`published_at`。但是，在 POST 请求 API 中要求将其分配为`published`，而不是`published_at`。所以在我的模型中，我像这样覆盖 setter 方法

```
def published=(value)
  self.published_at = value
end 
```

问题是，在我的 API 测试中，我使用 FactoryGirl 的`attributes_for(:post)`方法为 POST 请求生成属性，并且它使用旧`published_at`名称。如何解决此问题并使用`published`键生成属性，而不是`published_at`在我的模型中更改此属性的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:45:40.590

`:post`改变你的工厂怎么样：

```
factory :post do
  published { Time.now }
  # published_at
end 
```

或者，如果您想将基于 API 的帖子和基于 Web 的帖子分开，请创建一个新工厂：

```
factory :api_post, class: Post do
  ...
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T18:53:27.103

我自己从未尝试过，但似乎别名可能有效：

```
alias_attribute :published, :published_at 
```

在那种情况下，我可能会摆脱`Post#published=`.

参考：[https ://stackoverflow.com/a/4017071/199712](https://stackoverflow.com/a/4017071/199712)

# dart - Dart 中的 Math.round() 在哪里？

> ID：13275824
> 
> 赞同：46
> 
> 时间：2012-11-07T18:25:57.833
> 
> 标签：dart

我没有看到任何方法可以在 Dart 中舍入一个数字？

```
import 'dart:math';

main() {
  print(Math.round(5.5)); // Error!
} 
```

[http://api.dartlang.org/docs/bleeding_edge/dart_math.html](http://api.dartlang.org/docs/bleeding_edge/dart_math.html)

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-07T18:32:01.383

是的，有办法做到这一点。该类`num`有一个名为的方法[`round()`](http://api.dartlang.org/docs/bleeding_edge/dart_core/num.html#round)：

```
var foo = 6.28;
print(foo.round()); // 6

var bar = -6.5;
print(bar.round()); // -7 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-07T18:36:55.287

在 Dart 中，一切都是对象。因此，例如，当您声明一个 num 时，您可以通过[num 类中的 round 方法](http://api.dartlang.org/docs/bleeding_edge/dart_core/num.html#round)对其进行四舍五入，以下代码将打印 6

```
num foo = 5.6;
print(foo.round()); //prints 6 
```

在你的情况下，你可以这样做：

```
main() {
    print((5.5).round());
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-24T12:24:03.797

这个等式可以帮助你

```
int a = 500;
int b = 250;
int c;

c = a ~/ b; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-24T12:42:40.227

**2021 年 3 月更新：**

该`round()`方法已移至[https://api.dart.dev/stable/2.12.2/dart-core/num/round.html](https://api.dart.dev/stable/2.12.2/dart-core/num/round.html)。以上所有链接都是错误的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-16T07:27:11.640

也许这在特定情况下会有所帮助， floor() 将向负无穷方向舍入

[https://api.dart.dev/stable/2.13.4/dart-core/num/floor.html](https://api.dart.dev/stable/2.13.4/dart-core/num/floor.html)

```
void main() {
 var foo = 3.9;
 var bar = foo.floor();
 print(bar);//prints 3
} 
```

# c# - Unity命名映射问题

> ID：13275826
> 
> 赞同：3
> 
> 时间：2012-11-07T18:26:08.290
> 
> 标签：c#, dependency-injection, unity-container

我有两种实现`IEmailService`，一种用于测试，一种用于实时（is-A）。我有一个`BusinessService`参考`IEmailService`。

```
BusinessService
    IEmailService (has-A)

IEmailService
    TestEmailService (is-A)
    LiveEmailService (is-A) 
```

在统一配置中，我注册了两个`IEmailService`实现，如下所示。

```
<unity xmlns="http://schemas.microsoft.com/practices/2010/unity">
<container>
  <register type="DataAccess.IEmailService, DataAccess"
            mapTo="DataAccess.LiveEmailService, DataAccess"
            name="Live">
    <lifetime type="singleton" />
  </register>
  <register type="DataAccess.IEmailService, DataAccess"
            mapTo="DataAccess.TestEmailService, DataAccess"
            name="Test">
    <lifetime type="singleton" />
  </register>
<container>
</unity> 
```

基于`appSetting`for`IEmailService`我希望 Unity 选择正确的实现。这将有助于测试。

```
<appSettings>
    <add key="IEmailService" value="Test"/>
</appSettings> 
```

问题是当 unity 解决时`BusinessService`，它会尝试解决`(none)`命名映射`IEmailService`而不是`Live`or`Test`并抛出`ResolutionFailedException`.

`container.Resolve<BusinessService>();`抛出以下异常：

```
BusinessServices.Test.BusinessServiceTest_Integration.Test103:

Microsoft.Practices.Unity.ResolutionFailedException : Resolution of the dependency failed, type = "BusinessServices.BusinessService", name = "(none)".
Exception occurred while: while resolving.
Exception is: InvalidOperationException - The current type, DataAccess.IEmailService, is an interface and cannot be constructed. Are you missing a type mapping?
-----------------------------------------------
At the time of the exception, the container was:

  Resolving BusinessServices.BusinessService,(none)
  Resolving parameter "emailService" of constructor BusinessServices.BusinessService(DataAccess.IEmailService emailService)
    Resolving DataAccess.IEmailService,(none)

  ----> System.InvalidOperationException : The current type, DataAccess.IEmailService, is an interface and cannot be constructed. Are you missing a type mapping? 
```

我想出的解决方法是在代码中指定注册，并有一个包装方法来`container.RegisterType`注册命名映射以及基于值。`IEmailService``(none)``appSetting`

```
IUnityContainer container;

// registering unity
static void Load()
{
    container = new UnityContainer().LoadConfiguration();

    RegisterType<IEmailService, TestEmailService>("Test");
    RegisterType<IEmailService, LiveEmailService>("Live");
}

// register the `Test` or `Live` implementation with `(none)` named mapping as per appSetting
static void RegisterType<TFrom, TTo>(string name) 
    where TTo : TFrom
{
    var tFromAppSetting= ConfigurationManager.AppSettings[typeof(TFrom).Name];
    if (!string.IsNullOrEmpty(tFromAppSetting) && tFromAppSetting == name)
        container.RegisterType<TFrom, TTo>();
} 
```

这可行，但我最终在两个地方指定了注册 - 配置和代码。有没有更好的方法来做到这一点？

**更新**

我实际上已经通过代码得到了正确的结果。我根本不需要统一配置。根据值，将*或*实现`RegisterType<TFrom, TTo>(string name)`注册为命名映射。也无一例外地解决了。*`Test``Live`**`(none)`**`appSetting``BusinessService`*

 *由于没有统一配置，我没有加载配置。

```
container = new UnityContainer(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T18:36:30.317

在我看来，在配置中进行注册的唯一一点是不要在代码中使用它们，并且能够在不重新编译的情况下替换实现。因此，您正在尝试将其从代码中删除。我不明白的是为什么你首先要在配置中同时注册。只需`Live`从配置中删除一个用于测试和`Test`从配置中删除应用程序，然后在没有名称的情况下注册它们。

因此，例如在应用程序 app.config 中：

```
<unity xmlns="http://schemas.microsoft.com/practices/2010/unity">
   <container>
      <register type="DataAccess.IEmailService, DataAccess"
        mapTo="DataAccess.LiveEmailService, DataAccess">
              <lifetime type="singleton" />
     </register> 
```

既然你真的不愿意按照自己的方式去做：

解决此问题的另一种方法是仅在代码中注册一种确定哪个实例是默认实例的方法：

```
 container.RegisterType<IEmailService>(new InjectionFactory((c)=>
   {
        var name = GetImplementationsNameFromAppSettings();
        return c.Resolve<IEmailService>(name);
   }); 
```*

# javascript - 让 onClick 事件每隔一次点击做一些不同的事情？

> ID：13275831
> 
> 赞同：2
> 
> 时间：2012-11-07T18:26:33.083
> 
> 标签：javascript

我在一个表中有 3 列，每列顶部都有一些文本，下面有一个图像。我有它，因此当有人从 3 列之一单击图像时，它会放大该列，并使用 onClick 事件删除其他列。但是，我想要它，以便当我第二次单击图像时，它会带回其他列。我遇到的问题是弄清楚如何让 onClick 事件在我第二次单击它时做一些不同的事情。我添加了几张（画得很差的）图片来帮助您了解一下。谢谢你的时间。

[http://i.minus.com/ijFBpWavY386c.jpg](http://i.minus.com/ijFBpWavY386c.jpg)

[http://i.minus.com/iNExaX8dsN5dK.jpg](http://i.minus.com/iNExaX8dsN5dK.jpg)

哦，我当前的 javascript 部分代码（狗、万圣节和喜剧是每个图像的 ID。请原谅我可怕的（不存在）缩进；仍在上课学习 javascript。）：

```
function dog()
{
td12 = document.getElementById('td2');
td12.parentNode.removeChild(td12);

td13 = document.getElementById('td3');
td13.parentNode.removeChild(td13);

td11 = document.getElementById('td1');
td11.style.textAlign = "center";
}
function halloween()
{
td21 = document.getElementById('td1');
td21.parentNode.removeChild(td21);

td23 = document.getElementById('td3');
td23.parentNode.removeChild(td23);

td22 = document.getElementById('td2');
td22.style.textAlign = "center";
}
function comedy()
{
td31 = document.getElementById('td1');
td31.parentNode.removeChild(td31);

td32 = document.getElementById('td2');
td32.parentNode.removeChild(td32);

td33 = document.getElementById('td3');
td33.style.textAlign = "center";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:34:36.480

你需要的是一个所有函数都可以访问的变量，它会告诉你你的表处于什么“模式”：

```
var allColumns = true;

function comedy() {
    if (allColumns) {
        // ... do stuff here ...
        allColumns = false;
    } else {
        // ... do different stuff here ...
        allColumns = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:36:09.270

如果您使用的是 jquery，则可以执行以下操作：

```
function bindImageClick(){    
    $("#imgid").unbind("click");
    $("#imgid").bind("click", function (event) {
        alert("first click");
        $(this).unbind("click");
        $(this).bind("click", function(){
           alert("second click");
           bindImageClick();
        });
    });
}
bindImageClick(); 
```

现场示例：http: [//jsfiddle.net/4zKNJ/3/](http://jsfiddle.net/4zKNJ/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T18:42:28.300

这样的事情将非常简单：

```
// Put this within the scope of the <a /> below...
var whichClick = 1;

// The link
<a href="..." onclick="javascript:doSomething(whichClick++ % 2 == 1)">Click Me</a>

// The handler
function doSomething(isOdd){
    // isOdd is true or false, respond accordingly
} 
```

等等。

**编辑**调整以使函数 arg 成为布尔值

干杯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T18:55:08.893

很简单，请参阅小提琴[演示](http://jsfiddle.net/rajnish/j6gWa/)

HTML

```
<table>
<tr>
    <td>Column1</td>
    <td id="click">Column2</td>
    <td>Column3</td>
</tr>
</table> 
```

CSS：

```
td{
  border:1px dotted #ccc;
  width:50px
 } 
```

查询

```
$(document).ready(function(){
  $("#click").toggle(
   function(){
     $(this).css('width',200).siblings().hide();;
   },
   function(){
     $(this).css('width',50).siblings().show();;
   }
  );
}) 
```

# ios - 如何在 ios 模拟器上模仿两指滚动/拖动手势？

> ID：13275832
> 
> 赞同：62
> 
> 时间：2012-11-07T18:26:38.463
> 
> 标签：ios, scroll, drag, simulator, gesture

我有一个滚动页面，我指定最少两个手指。它适用于我的设备，但不知道如何在模拟器上模仿这个手势。我可以毫无问题地模仿单指滚动。我试过 option/ctrl/shift 等，但无法正常工作。也许我的组合是错误的。有谁知道怎么做？谢谢。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-11-07T18:30:59.840

按住“Alt/Option”键并拖动模拟多点触控捏合缩放。

按住“Alt/Option + Shift”并拖动模拟多点触控滚动。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-12-29T20:55:39.403

Apple 的 iOS 模拟器用户指南中有一张很好的表格，其中包含所有受支持的手势。这是两指拖动的摘录：

1.  将指针放在要进行两指拖动的位置。
2.  按住选项键。
3.  将代表手指触摸的圆圈移动到起始位置。
4.  按住 Shift 键移动捏合目标的中心，将圆圈移动到所需的中心位置，然后松开 Shift 键。
5.  按住 Shift 键和鼠标按钮，沿要拖动的方向移动圆圈，然后松开 Shift 键和鼠标按钮。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-08-10T11:13:03.113

**To appear two fingers:**

```
press ALT and drag mouse. 
```

**To zoom using two fingers:**

```
press ALT and press SHIFT (to adjust touches.After adjusting release SHIFT key) and drag mouse. 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-08-28T12:40:47.040

在 iPad 模拟器中滚动的最佳方式是通过三指拖动，这是 OS X 的全局设置，而不是 iOS 模拟器的特定功能。

要使用三指滚动，您需要在 OS X 的设置应用程序中打开 TrackPad > Point and Click 下的“三指拖动”。

并将 Mission Control 和 App Exposé 设置为使用四根手指（在 OS X 的设置应用程序中的触控板 > 更多手势中）

（我做了漂亮的截图，但我太难用图片发布答案了）

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-10-03T20:51:28.193

对我来说，Sierra 中的事情发生了变化，但这是我启用三指滚动的方式：

1.  **系统偏好设置 > 辅助功能
2.  向下滚动到**鼠标和触控板**，然后点击**触控板选项**
3.  确保选中“**启用拖动**”
4.  从下拉列表中选择“**三指拖动”**

在各种设备和模拟器上进行测试时会产生如此大的差异。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-07-10T18:22:39.950

它适用于触控板上的**三指**滚动。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-26T10:17:02.467

它适用于 MBP 触控板和 Magic Trackpad。

线索是在触控板设置（Preferences.app）中启用“三指拖动”，然后在按下 ALT+SHIFT 的同时进行拖动，使滚动按预期工作。

它也适用于“三指滚动”。

# c++ - 变量的字节表示中的意外结果

> ID：13275834
> 
> 赞同：7
> 
> 时间：2012-11-07T18:26:44.823
> 
> 标签：c++, c, casting

我扫描了一个 int 变量的字节表示并得到了一些意想不到的结果。

如果我做

```
int a = 127;
cout << (unsigned int) *((char *)&a); 
```

我按预期得到127。如果我做

```
int a = 256;
cout << (unsigned int) *((char *)&a + 1); 
```

我按预期得到 1。但如果我这样做

```
int a = 128;
cout << (unsigned int) *((char *)&a); 
```

我有**4294967168**，嗯……很漂亮。

问题是：有没有办法在查看值为 128 的 int 变量的第一个字节时获得 128？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T18:35:56.307

出于同样的原因`(unsigned int)(char)128`4294967168:`char`在最常用的系统上默认签名。128 不适合有符号的 8 位数量，因此当您将其转换为 时`char`，您会得到 -128（十六进制的 0x80）。

然后，当您将 -128 转换为 时`unsigned int`，您会得到 2 ^(32) - 128，即 4294967168。

如果您想获得 +128，请使用 an`unsigned char`而不是`char`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:37:42.527

正如评论所指出的，看起来这里发生的事情是你遇到了奇怪的[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)。在您的最后一次转换中，由于您没有使用`unsigned char`，因此字节的最高位用于指示正​​值或负值。然后，您只有 8 位中的 7 位来表示您的值，为您提供 0-127 的正数范围（总体为 -128-127）。

如果超出此范围，则它会回绕，并得到 -128，当它被转换回 an 时，`unsigned int`将导致该异常大的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:32:55.220

`char`在此处签名，因此在您的第二个示例中，`*((char *)&a + 1) = ((char)256 +1) = (0+1) = 1`编码为`0b00000000000000000000000000000001`，因此变为 1 作为无符号整数。

在您的第三个示例中，`*((char *)&a) = (char)128 = (char)-127`编码为`0b10000000000000000000000000000000`，即 2<<31，即 4294967168

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T18:39:48.903

```
int a = 128;
cout << (unsigned int) *((unsigned char *)&a); 
```

Also all of your code is dependent on running on a little endian machine.

Here's how you should probably be doing these things:

```
int a = 127;
cout << (unsigned)(unsigned char)(0xFF & a);

int a = 256;
cout << (unsigned)(unsigned char)(0xFF & (a>>8));

int a = 128;
cout << (unsigned)(unsigned char)(0xFF & a); 
```

# knockout.js - koGrid totalServerItems

> ID：13275835
> 
> 赞同：1
> 
> 时间：2012-11-07T18:26:45.553
> 
> 标签：knockout.js, kogrid

我在我的网格中遇到了这个值的问题。

看起来它没有将我传递给网格配置的可观察项与总项目一起使用。

我在三个不同的选项卡中有三个 koGrid。所有这些都使用相同的初始化：

```
data-bind="koGrid: {data: records,
                                         autogenerateColumns: false,
                                         isMultiSelect: false,
                                         displayRowIndex: false,
                                         displaySelectionCheckbox: false,
                                         enablePaging: true,
                                         pageSizes: pageSizes,
                                         pageSize: pageSize,
                                         totalServerItems: totalItems,
                                        footerTemplate: 'koGridDebugFooter',
                                         currentPage: currentPage,                                        
                                         columnDefs:[
                                            {field: 'Created', width:300},
                                            {field:'Name', width:300},
                                            {field: 'Value', width:300}                                            
                                         ]} "> 
```

我在服务器中有 12 行，当我指定页面大小为 10 时，服务器项目总数保持在 10，因此导航按钮保持禁用状态。

如果我添加一个带有我的视图模型值的标签，即 viewmodel.totalServerItems，它包含的值是正确的值 (12)，但页脚显示的是不同的值 (10)。

我在 kogrid 的定义中修改了这些行：

```
/***********************************************
* FILE: ..\Src\GridClasses\Footer.js
***********************************************/
kg.Footer = function (grid) {
    var self = this;

    this.maxRows;

    //if (grid.config.totalServerItems() !== null && grid.config.totalServerItems() !== undefined) {
        this.maxRows = grid.config.totalServerItems; //observable
    //} else {
    //    this.maxRows = grid.maxRows; //observable
    //} 
```

所以现在我总是将 observable 设置为这个参数。我看到的唯一风险是调用者没有设置参数。但我总是这样做。

难道我做错了什么？你知道另一种解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T13:34:15.100

totalServerItems 在分页选项中，如下所示：

```
self.PagingOptions = {
            pageSizes: ko.observableArray([10, 20, 50]),
            pageSize: ko.observable(10),
            totalServerItems: ko.observable(0),
            currentPage: ko.observable(1)
        }; 
```

# javascript - 重置多维数组的最快方法？

> ID：13275839
> 
> 赞同：9
> 
> 时间：2012-11-07T18:27:05.137
> 
> 标签：javascript, arrays, performance, algorithm, multidimensional-array

假设我有一个二维数组：`vectors[x][y]`，初始数组结构如下所示：

```
vectors = [    
 [0, 0, 0, 0, 0,],
 [0, 0, 0, 0, 0,],
 [0, 0, 0, 0, 0,],
 [0, 0, 0, 0, 0,],
 [0, 0, 0, 0, 0,]
] 
```

经过一些计算，数组中的数据是随机的。将数组返回到初始状态的最快方法和最有效方法是什么？

我知道我可以硬编码上面的归零数组并再次设置向量等于它，但我也知道这样的算法：

```
for (var x = 0; x < vectors.length; x++) {
    for (var y = 0; y < vectors[x].length; y++) {
        vectors[x][y] = 0;
    }

} 
```

是 O(x * y)。

那么哪种方法更好呢？有没有更好、更快/更有效的方法来解决这个问题？

对于将任意长度的多维数组归零的一般情况，这是最好的方法吗？（如果重要的话，我正在使用 JavaScript）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:06:13.627

这是我的两分钱：

我会保留原始阵列的干净副本以获得最快的性能。您可以保留引用的硬编码副本

```
var vectorsOrig = [    
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0],
 [0, 0, 0, 0, 0]
]; 
```

或使用 slice 对初始数组进行动态干净克隆（（在您的情况下递归地进行深层复制）：

```
var clonedVectors = [0, 0, 0, 0, 0].slice(0); 
```

无论如何，采用将**矢量引用重置为原始副本的方法将比循环遍历和重置每个节点更快**。如果您的旧向量数组对象不再被引用，JavaScript 将垃圾收集它。

话虽如此，问题就变成了每次都获得一个干净的副本。拥有一次硬编码实例将为您提供一个干净的副本，之后您必须克隆它。您也不想通过与重置选项类似的 for 循环进行动态生成。我的建议是编写一个克隆函数，它只返回一个新的硬编码或初始化数组：

```
function newVector() {
    return [    
     [0, 0, 0, 0, 0],
     [0, 0, 0, 0, 0],
     [0, 0, 0, 0, 0],
     [0, 0, 0, 0, 0],
     [0, 0, 0, 0, 0]
    ];
}
var vector = newVector();
vector[1][2] = 11;
console.dir(vector);
vector = newVector();  // your old array will be garbage-collected if no longer referenced by any other reference
console.dir(vector); 
```

理想情况下，最好对各种方法进行基准测试。

**编辑** 感谢 Vega 的输入，我修改了他的测试以测试三种方法。在 Chrome 和 IE9 中，这个解决方案似乎是最快的，在 FF (15.0.1) 中手动迭代似乎更快（FF 中的内存分配/管理可能更慢）。[http://jsperf.com/array-zero-test/2](http://jsperf.com/array-zero-test/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:41:17.703

So far, it sounds like we have 2 possible choices.

1.  Overwrite the whole thing with zeroes. (Your solution)

2.  Keep a record of all modified elements and only reset those ones. `record[0].x = 3; record[0].y = 5;` and so on However, you'll still need to loop once through the record. *To explain it further,* I mean that each time an element in the array is set to a value, you should record that element's placement in the array. Then, using a loop, you can visit each element and set it to 0\. So, if you had a sparse array, it would be more efficient.

Depending on the implementation, I can see why you would want #2 instead of #1...but if you seriously have a large enough matrix that you need to worry about analyzing the algorithm, you might consider doing some kind of server pre-processing.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:50:09.907

另一种看待问题的不同方法是使用线性数组并在进行更新时从 x、y 索引计算线性索引。

然后初始化只是一个`for`时间为 O(x+y) 的循环

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-07T18:38:20.953

我会冒险说为所有元素分配相同值的最快方法是调用 Array.map()。

但是，这里有一个问题。请注意，这将在本机实现该方法的浏览器上具有令人难以置信的快速性能，并且在其他浏览器中将具有通常的性能。另请注意， .map() 在某些旧浏览器中不可用，因此您需要使用 Underscore.js 或任何其他提供该方法的库。

# .htaccess - mod_rewrite 到不可见文件

> ID：13275840
> 
> 赞同：1
> 
> 时间：2012-11-07T18:27:08.940
> 
> 标签：.htaccess

我错过了一些关于.htaccess 的东西。

工作树如：

```
/
/subdomain
/subdomain/.htaccess
/subdomain/index.php
/assets
/assets/... 
```

htaccess 在子域内，我正在访问它：`http://subdomain.localhost/`

资产在子域之外，我做了这个规则：

```
RewriteRule ^assets/(.*)$ http://localhost/assets/$1 
```

现在，当 subdomain/index.php 尝试加载类似 assets/style.css 的内容时，重写器重定向到`http://localhost/assets/style.css`.

当我尝试加载 javascript 文件时出现问题。它被识别为不同的域，并且无法正常工作。

有没有办法通过一些神奇的重写或其他东西使`http://subdomain.localhost/assets`作品成为（而不是重定向） ？`http://localhost/assets`

我试过`^assets/(.*)$ ../assets/$1`了，但它似乎不起作用。

# ios - 在哪里可以查看 Google Analytics（分析）iOS 崩溃日志？

> ID：13275842
> 
> 赞同：6
> 
> 时间：2012-11-07T18:27:09.627
> 
> 标签：ios, google-analytics-api, crash-reports

在适用于 iOS 的 Google Analytics 本机 SDK（v2 Beta）中，我在文档中找到了以下行：

```
// Optional: automatically track uncaught exceptions with Google Analytics.
[GAI sharedInstance].trackUncaughtExceptions = YES; 
```

这是否意味着，Google Analytics 现在也支持崩溃日志跟踪（如 BugSense 或 Crittercism）？但是我在 Google Analytics 的在线界面哪里可以找到它们呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-04T03:34:14.747

![Google Analytics（分析）iOS 崩溃日志](../Images/9e358ffb842ffcb02be96be9c41de1ae.png)

在左侧面板上，展开 Engagement 菜单，然后单击 Crash and Exceptions

**更新：**

现在是 GoogleAnalytics V4

> 行为 -> 崩溃和异常

[![在此处输入图像描述](../Images/2309c730c4ce238c349072c3c1c71654.png)](https://i.stack.imgur.com/P2aWS.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-11T08:51:43.640

查看**行为**>**崩溃和异常**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-28T09:54:02.823

**报告 --> 行为 --> 崩溃和异常**

[http://analytics.blogspot.in/2013/02/5-things-you-should-be-doing-with.html](http://analytics.blogspot.in/2013/02/5-things-you-should-be-doing-with.html)

# zend-framework - Zend DB 表和模型一对一

> ID：13275843
> 
> 赞同：0
> 
> 时间：2012-11-07T18:27:10.593
> 
> 标签：zend-framework, model, zend-db-table

我有一个用外键表示用户模型的类，它是图片的 id。

```
class Model_User extends Model_AbstractEntity
{
    protected $u_id;
    protected $u_email;
    protected $u_firstname;
    protected $u_lastname;
    protected $u_password;
    protected $u_salt;
    protected $u_created_at;
    protected $u_updated_at;
    protected $u_fb;
    protected $u_status;
    protected $u_r_id;
    protected $u_p_id;
} 
```

负责图片模型的类如下所示：

```
class Model_Picture extends Model_AbstractEntity
{
    protected $p_id;
    protected $p_created_at;
    protected $p_updated_at;
    protected $p_caption;
    protected $p_name;
    protected $p_basePath;
    protected $p_available;
    protected $p_u_id;
} 
```

这只是从数据库获取数据的模型部分。外键是 u_p_id，图片中的键是 p_id 我的问题是，当 Zend db 表执行 select() 时，它会返回带有外键的数据，但是我怎么知道返回数据的哪一部分是图片部分来设置正确的图片模型。 ...如何以正确的方式做到这一点不做 2 个查询，一个为用户，第二个为图片，以创建 2 个关联对象。我现在谈论的是一对一的关系，但可能是一对多的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:08:01.110

通常，您的实体模型不会以无效的形式存在，它们将与某种类型的数据映射器模型一起存在。Mapper 通常负责从任何方便的来源收集数据，然后构建实体模型。

例如，我有一个包含专辑实体的音乐收藏：

```
<?php
class Music_Model_Album extends Model_Entity_Abstract implements Interface_Album
{
    //id is supplied by Entity_Abstract
    protected $name;
    protected $art;
    protected $year;
    protected $artist; //alias of artist_id in Database Table, foreign key
    protected $artistMapper = null;

    /**
     * Constructor, copied from Entity_Abstract
     */
    //constructor is called in mapper to instantiate this model
    public function __construct(array $options = null)
    {         
        if (is_array($options)) {
            $this->setOptions($options);
        }
    }

  /**
   * Truncated for brevity.
   * Doc blocks and normal getters and setters removed
   */

    public function getArtist() {
        //if $this->artist is set return
        if (!is_null($this->artist) && $this->artist instanceof Music_Model_Artist) {
            return $this->artist;
        } else {
            //set artist mapper if needed
            if (!$this->artistMapper) {
                $this->artistMapper = new Music_Model_Mapper_Artist();
            }
            //query the mapper for the artist table and get the artist entity model
            return $this->artistMapper->findById($this->getReferenceId('artist'));
        }
    }
    //set the artist id in the identity map
    public function setArtist($artist) {
        //artist id is sent to identity map. Can be called later if needed - lazy load
        $this->setReferenceId('artist', $artist);
        return $this;
    }

    //each album will have multiple tracks, this method allows retrieval as required.
    public function getTracks() {
        //query mapper for music track table to get tracks from this album
        $mapper = new Music_Model_Mapper_Track();
        $tracks = $mapper->findByColumn('album_id', $this->id, 'track ASC');

        return $tracks;
    }
} 
```

在映射器中，我将构建实体模型，例如：

```
 //excerpt from Model_Mapper_Album
 //createEntity() is declared abstract in Model_Mapper_Abstract
 public function createEntity($row)
    {
        $data = array(
            'id'     => $row->id,
            'name'   => $row->name,
            'art'    => $row->art,
            'year'   => $row->year,
            'artist' => $row->artist_id,//
        );

        return new Music_Model_Album($data);
    } 
```

要在映射器方法中使用此方法，可能如下所示：

```
 //this is actually from Model_Mapper_Abstract, b ut give the correct idea and will work in any of my mappers.
 //this returns one and only one entity
 public function findById($id)
    {
        //if entity id exists in the identity map
        if ($this->getMap($id)) {
            return $this->getMap($id);
        }
        //create select object
        $select = $this->getGateway()->select();
        $select->where('id = ?', $id);
        //fetch the data
        $row = $this->getGateway()->fetchRow($select);
        //create the entity object
        $entity = $this->createEntity($row);
        //put it in the map, just in case we need it again
        $this->setMap($row->id, $entity);
        // return the entity
        return $entity;
    } 
```

我见过以许多不同方式构建的实体和映射器，找到你喜欢的方法并玩得开心。

此演示中省略了很多代码，因为它并不真正适用于该问题。如果您需要查看完整代码，请在[GitHub 上查看。](https://github.com/jschoenwolf/home-local.git)

# android - 使用 Android AccountManager 自定义帐户类型

> ID：13275847
> 
> 赞同：2
> 
> 时间：2012-11-07T18:27:22.500
> 
> 标签：android, android-intent, android-service, accountmanager

我有一个帐户类型“mypackage.account”和一个内容授权“mypackage”。我有一个`Service`提供 的实现`AbstractAccountAuthenticator`，`addAccount`方法是这样实现的：

```
 /**
     * The user has requested to add a new account to the system. We return an intent that will launch our login
     * screen if the user has not logged in yet, otherwise our activity will just pass the user's credentials on to
     * the account manager.
     */
    @Override
    public Bundle addAccount(AccountAuthenticatorResponse response, String account_type, String auth_token_type,
                             String[] required_features, Bundle options) throws NetworkErrorException {
        final Intent intent = new Intent(_context, ConnectAccountActivity.class);
        intent.putExtra(AccountManager.KEY_ACCOUNT_AUTHENTICATOR_RESPONSE, response);
        final Bundle reply = new Bundle();
        reply.putParcelable(AccountManager.KEY_INTENT, intent);

        return reply;
    } 
```

我提供一个`authenticator.xml`

```
<account-authenticator xmlns:android="http://schemas.android.com/apk/res/android"
                   android:accountType="mypackage.account"
                   android:icon="@drawable/ic_launcher"
                   android:smallIcon="@drawable/ic_launcher"
                   android:label="@string/app_name"
                   android:accountPreferences="@xml/account_preferences" /> 
```

我这样`Service`定义`AndroidManifest.xml`：

```
<!-- Account authentication service that provides the methods for authenticating KeepandShare accounts to the
     AccountManager framework -->
<service android:exported="true" android:name=".authenticator.AccountAuthenticatorService" android:process=":auth" tools:ignore="ExportedService">
    <intent-filter>
        <action android:name="android.accounts.AccountAuthenticator"/>
    </intent-filter>
    <meta-data android:name="android.accounts.AccountAuthenticator" android:resource="@xml/authenticator"/>
</service> 
```

这就是设置，现在当我想在设备上显示一个包含我的帐户类型帐户列表的屏幕以及添加新帐户的操作时，我的添加帐户操作如下所示：

```
final Intent intent = new Intent(Settings.ACTION_ADD_ACCOUNT);
intent.putExtra(Settings.EXTRA_AUTHORITIES, new String[]{ "mypackage" });
startActivity(intent); 
```

在这一点上，我被引导到一个帐户类型选择器，其中显示“mypackage.account”和“anotherpackage.account”作为选项。（“anotherpackage.account”在我工作的另一个应用程序中定义）这似乎不像预期的行为。我已经检查了大约 20 次，两个应用程序定义的权限是不同的——而且确实如此。有人可以告诉我我缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:26:17.227

Android 解耦又来咬我了。看来这两个应用程序还需要具有`sync_adapter.xml`类似功能：

```
<!-- The attributes in this XML file provide configuration information for the SyncAdapter. -->
<sync-adapter xmlns:android="http://schemas.android.com/apk/res/android"
          android:contentAuthority="mypackage"
          android:accountType="mypackage.account"
          android:supportsUploading="true"
          android:userVisible="true"
          android:allowParallelSyncs="false"
          android:isAlwaysSyncable="true"/> 
```

并将其连接到同步服务`AndroidManifest.xml`：

```
<!-- Data sync service that provides the SyncAdapter to the SyncManager framework. The SyncAdapter is used to
     maintain that the set of data on the device is a subset of the data on the server -->
<service android:exported="true" android:name=".data.sync.SyncService" tools:ignore="ExportedService">
    <intent-filter>
        <action android:name="android.content.SyncAdapter"/>
    </intent-filter>
    <meta-data android:name="android.content.SyncAdapter" android:resource="@xml/sync_adapter"/>
</service> 
```

为了完整起见，我`Service`的实现如下：

```
/**
 * Service that provides sync functionality to the SyncManager through the {@link SyncAdapter}.
 */
public class SyncService extends Service {

    @Override
    public void onCreate() {
        synchronized (_sync_adapter_lock) {
            if (_sync_adapter == null)
                _sync_adapter = new SyncAdapter(getApplicationContext(), false);
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return _sync_adapter.getSyncAdapterBinder();
    }

    private static final Object _sync_adapter_lock = new Object();
    private static SyncAdapter _sync_adapter = null;
} 
```

和`SyncAdapter`：

```
/**
 * Sync adapter for KeepandShare data.
 */
public class SyncAdapter extends AbstractThreadedSyncAdapter {

    public SyncAdapter(Context context, boolean should_auto_initialize) {
        super(context, should_auto_initialize);

        //noinspection ConstantConditions,PointlessBooleanExpression
        if (!BuildConfig.DEBUG) {
            Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
                @Override
                public void uncaughtException(Thread thread, Throwable throwable) {
                    Log.e("Uncaught sync exception, suppressing UI in release build.", throwable);
                }
            });
        }
    }

    @Override
    public void onPerformSync(Account account, Bundle extras, String authority, ContentProviderClient provider,
                              SyncResult sync_result) {
        // TODO: implement sync
    }
} 
```

尽管我实际上并没有同步任何数据（应用程序现在甚至没有链接到任何服务器），但 Android 框架似乎正在使用 的设置`SyncAdapter`来确定哪个帐户身份验证器响应添加帐户请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-05T12:08:29.283

我知道这个问题已经过时并且已经关闭了......

[文档](http://developer.android.com/reference/android/provider/Settings.html#EXTRA_ACCOUNT_TYPES)`Settings.ACTION_ADD_ACCOUNT`：_

> **可通过向具有一个或多个可同步**内容提供商权限的 Intent 添加额外的 EXTRA_AUTHORITIES 来限制可添加的帐户类型。**只有可以与该内容提供商同步的帐户类型**才会提供给用户。

我认为这就是为什么你必须实现一个空的同步适配器。参考文档，这在使用时应该没有必要`Settings.EXTRA_ACCOUNT_TYPES`（我没有像你那样在两个项目中尝试过，但它在我目前正在开发的项目中就像一个魅力，我根本不需要同步适配器）：

```
intent.putExtra(Settings.EXTRA_ACCOUNT_TYPES, new String[] { "mypackage.account" }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-19T23:49:20.643

而不是调用意图...

```
final Intent intent = new Intent(Settings.ACTION_ADD_ACCOUNT);
intent.putExtra(Settings.EXTRA_AUTHORITIES, new String[]{ "mypackage" });
startActivity(intent); 
```

给定帐户类型，您可以使用以下内容直接进入身份验证过程。这**不需要**你有一个`SyncAdapter`.

```
AccountManager accountManager = AccountManager.get(this);
accountManager.addAccount(AccountAuthenticator.ACCOUNT_TYPE, AccountAuthenticator.AUTHTOKEN_TYPE_FULL_ACCESS, null, null, this, new AccountManagerCallback<Bundle>() {
        @Override
        public void run(AccountManagerFuture<Bundle> future) {

        }
}, new Handler()); 
```

# java - web.xml 中设置的超时在 java 中不起作用

> ID：13275851
> 
> 赞同：6
> 
> 时间：2012-11-07T18:27:43.930
> 
> 标签：java, jsf, listener, session-timeout

我正在尝试在 Tomcat 7 应用程序服务器上设置我的应用程序超时。首先我在 web.xml 中将超时时间设置为一分钟

```
 <session-config>
       <session-timeout>1</session-timeout>
  </session-config> 
```

我正在使用[HttpSessionListener](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html)来确保我的超时工作正常。我在 web.xml 中声明了我的 sessionListener 类。

```
public class HttpSessionChecker implements HttpSessionListener {

    public void sessionCreated(HttpSessionEvent event) {
        System.out.printf("Session ID %s created at %s%n", event.getSession().getId(), new Date());
    }
    public void sessionDestroyed(HttpSessionEvent event) {
        System.out.printf("Session ID %s destroyed at %s%n", event.getSession().getId(), new Date());
    }
} 
```

在 web.xml 中

```
<listener>
    <listener-class>com.test.util.HttpSessionChecker</listener-class>
</listener> 
```

但是当启动我的服务器并启动我的应用程序时，我看到会话仅在登录页面上启动。

```
Session ID 934073ED5E9933158995EE5EB680D3F7 created at Wed Nov 07 09:39:13 PST 2012 
```

当我保持空闲超过一分钟或超过五分钟时，Tomcat 不会立即在我的应用程序中触发 Timeout 并单击我的应用程序中的某些内容 Session is not Expired.Still 我能够导航另一个页面。但是当我在登录页面上处于空闲状态或注销时，我看到会话被破坏。但是，一旦登录完成，当我在应用程序会话中时，超时就不会发生。我懂了

```
Session ID 934073ED5E9933158995EE5EB680D3F7 destroyed at Wed Nov 07 09:42:13 PST 2012 
```

我究竟做错了什么？`<session-timeout>`甚至在我提到`web.xml`我是否需要代码`session.invalidate`中的某个地方的代码？如何重定向到`login.xhtml`在 JSF 中销毁的会话中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T19:35:21.443

你没有做错什么。当会话过期时，后台线程将每 x 分钟检查一次。这是特定于容器的。即不保证在您指定的时间后过期。我知道在 tomcat 中，您可以轻松地在 server.xml 文件中修改此检查间隔。

# ios - 如何将 CBUUID 转换为字符串

> ID：13275859
> 
> 赞同：12
> 
> 时间：2012-11-07T18:28:06.677
> 
> 标签：ios, core-bluetooth, bluetooth-lowenergy

我找不到任何从 CBUUID 中获取 UUID 字符串的官方方法。这些 UUID 可以是 2 或 16 字节长。

目标是将 CBUUID 作为字符串存储在某个文件中的某个位置，然后使用 [CBUUID UUIDWithString:] 等复活。这是我目前所拥有的。

```
// returns a simple 4 byte string for 16bit uuids, 128 bit uuids are in standard 8-4-4-4-12 format
// the resulting string can be passed into [CBUUID UUIDWithString:]
+(NSString*)CBUUIDToString:(CBUUID*)cbuuid;
{
    NSData* data = cbuuid.data;
    if ([data length] == 2)
    {
        const unsigned char *tokenBytes = [data bytes];
        return [NSString stringWithFormat:@"%02x%02x", tokenBytes[0], tokenBytes[1]];
    }
    else if ([data length] == 16)
    {
        NSUUID* nsuuid = [[NSUUID alloc] initWithUUIDBytes:[data bytes]];
        return [nsuuid UUIDString];
    }

    return [cbuuid description]; // an error?
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-07T23:49:03.667

我为 CBUUID 设置了以下类别来执行此操作：

```
@interface CBUUID (StringExtraction)

- (NSString *)representativeString;

@end

@implementation CBUUID (StringExtraction)

- (NSString *)representativeString;
{
    NSData *data = [self data];

    NSUInteger bytesToConvert = [data length];
    const unsigned char *uuidBytes = [data bytes];
    NSMutableString *outputString = [NSMutableString stringWithCapacity:16];

    for (NSUInteger currentByteIndex = 0; currentByteIndex < bytesToConvert; currentByteIndex++)
    {
        switch (currentByteIndex)
        {
            case 3:
            case 5:
            case 7:
            case 9:[outputString appendFormat:@"%02x-", uuidBytes[currentByteIndex]]; break;
            default:[outputString appendFormat:@"%02x", uuidBytes[currentByteIndex]];
        }

    }

    return outputString;
}

@end 
```

对于此输入：

```
NSLog(@"UUID string: %@", [[CBUUID UUIDWithString:@"0bd51666-e7cb-469b-8e4d-2742f1ba77cc"] representativeString]);
NSLog(@"UUID string2: %@", [[CBUUID UUIDWithString:@"1800"] representativeString]); 
```

它产生以下输出：

```
UUID string: 0bd51666-e7cb-469b-8e4d-2742f1ba77cc
UUID string2: 1800 
```

并为 16 字节 UUID 保留适当的断字，同时支持简单的 2 字节 UUID。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-19T01:12:03.857

对于那些说 CBUUID 与 CFUUIDRef 是免费桥接的人来说，事实并非如此。

```
CBUUID * foo = [CBUUID UUIDWithString:CBUUIDCharacteristicExtendedPropertiesString];
CFStringRef fooBar = CFUUIDCreateString(NULL, (__bridge CFUUIDRef)foo);
if (![CBUUIDCharacteristicExtendedPropertiesString isEqualToString:(__bridge NSString *)fooBar])
    NSLog(@"fubar!"); 
```

它没有崩溃，但你正在把垃圾拿出来。它可能是唯一标识垃圾，但不能往返。

PS：这不能作为评论，因为奇怪的评论不允许代码格式化。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-20T00:21:41.213

iOS 7.1（昨天发布的测试版，2013 年 11 月 18 日）引入了以下属性`CBUUID`：

> `@property(nonatomic, readonly) NSString *UUIDString`
> 
> *表示为字符串的 UUID。（只读）*

来自[CBUUID 类参考](https://developer.apple.com/library/prerelease/ios/documentation/CoreBluetooth/Reference/CBUUID_Class/Reference/CBUUID.html#//apple_ref/occ/instp/CBUUID/UUIDString)。

还值得注意的是，将 UUID 字符串与 a 进行比较`CBUUID`，这是有效的：

```
if ([cbuuidInQuestion isEqual:[CBUUID UUIDWithString:@"1234-5678-9012-1234"]]) {
    // isEqual tests for "the same UUID"
    // == tests for "the same CBUUID object"
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-16T01:14:18.837

我知道它被问和回答已经 7 个月了，但是......`CBUUID`是“免费桥接”的`CFUUID`，最简单的转换方法是

```
 //CBUUID* uuid = descr.UUID;
 NSString* str = CFUUIDCreateString(nil, uuid); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-03T06:21:04.280

这是 Brad Larson 的答案的快速扩展：

```
import CoreBluetooth

extension CBUUID {

    func representativeString() -> String {
        let data = self.data

        let bytesToConvert = data.length
        let uuidBytes = UnsafePointer<CUnsignedChar>(data.bytes)
        var outputString = String()

        for currentByteIndex in 0..<bytesToConvert {
            switch currentByteIndex {
            case 3,5,7,9:
                outputString += String(format: "%02x-",uuidBytes[currentByteIndex])
            default:
                outputString += String(format: "%02x",uuidBytes[currentByteIndex])
            }
        }

        return outputString
    }
} 
```

来自 iOS 7.1`UUIDString`的属性是存在的，但对于特定的 iOS7，上述扩展是不错的选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-11T10:33:56.287

Objective C 和 Swift 中有本地方法，它是非常直接的方法。

```
NSString *str = characteristic.UUID.UUIDstring; 
```

与 Swift 语言链接到库-> [https://developer.apple.com/documentation/corebluetooth/cbuuid/1518742-uuidstring?language=objc相同](https://developer.apple.com/documentation/corebluetooth/cbuuid/1518742-uuidstring?language=objc)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-11-27T10:09:18.927

布拉德的[回答](https://stackoverflow.com/a/13280278/3541063)确实有效，但使用类的解决方案可能更简单（尽管可能效率不高）`NSUUID`：

```
// CBUUID+ToString.h

#import <CoreBluetooth/CoreBluetooth.h>

@interface CBUUID (ToString)

- (NSString *)toString;

@end

// CBUUID+ToString.m

#import "CBUUID+ToString.h"

@implementation CBUUID (ToString)

- (NSString *)toString {
    if ([self respondsToSelector:@selector(UUIDString)]) {
        return [self UUIDString]; // Available since iOS 7.1
    } else {
        return [[[NSUUID alloc] initWithUUIDBytes:[[self data] bytes]] UUIDString]; // iOS 6.0+
    }
}

@end 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-07-16T08:27:47.920

以下为我工作，没有任何错误：

```
NSString *str = [[NSString alloc] initWithFormat:@"%@",  CFUUIDCreateString(nil, peripheral.UUID) ]; 
```

# javascript - Ruby on Rails - 在视图文件夹目录中添加额外的 JavaScript 文件是否正确？

> ID：13275864
> 
> 赞同：1
> 
> 时间：2012-11-07T18:28:19.423
> 
> 标签：javascript, ruby-on-rails, file, location, conventions

我正在阅读一本关于“Ruby on Rails”的书，其中一项任务包括修改代码，创建额外的 JavaScript 功能。JavaScript 本身很简单，只需几行代码，所以我的问题完全是概念性的。

我正在执行第一个[活动](http://pragprog.com/wikis/wiki/Pt-F-1-31) ，在[讨论](http://pragprog.com/wikis/wiki/Task-F-AddADashofAjax-31)中人们说应该在视图文件夹中的单独 js.erb 文件中创建新代码。

我的问题是解决问题的更好方法是什么：

1.  在 views 文件夹中创建额外的 js.erb 文件

    **或者**

2.  在 assets->javascript->viewname.js.coffee 中添加额外的 JavaScript 代码

讨论中的人们使用第二种技术，但是将 JavaScript 添加到资产中是否更合适，因为它将与视图一起执行？

编辑：

我使用的是 Ubuntu 12.04，我的 Rails 版本是 3.2.8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:39:12.713

第二是要走的路！让 Rails 3 Asset Pipeline 为您管理 Javscript、CSS 和图像文件。扩展是可选的`.coffee`，取决于你是否想用 Coffeescript 编写。

# java - 在不使用嵌套注解的情况下向 @Cacheable 注解添加属性

> ID：13275877
> 
> 赞同：1
> 
> 时间：2012-11-07T18:29:07.690
> 
> 标签：java, spring, annotations, ehcache

因此，我在 Spring Roo 项目中使用了 ehcache-spring-annotations 1.2.0，并且每次遇到它没有创建的嵌套注释时，Roo 都完全适合。有没有办法在不使用嵌套注释的情况下重写这个注释？

```
@Cacheable(cacheName = "CacheName", 
           keyGenerator = @KeyGenerator (
               name = "ListCacheKeyGenerator",
               properties = {
                   @Property(name="useReflection", value="true"),
                   @Property(name="checkforCycles", value="true")}))
public void method() {
    // do something that needs cached
} 
```

# javascript - jQuery 一起提交 Javascript onSubmit

> ID：13275881
> 
> 赞同：-1
> 
> 时间：2012-11-07T18:29:22.370
> 
> 标签：javascript, jquery

如果我同时使用 Javascript onSubmit 处理程序和 jQuery 提交处理程序，会有什么行为？

```
<form action="" method="post" onSubmit="myJavascriptHandler();">
  <input type="submit" />
</form>
<script type="text/javascript">
$("form").submit(myJQueryHandler);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:49:44.917

正如您从[**小提琴**](http://jsfiddle.net/fcSHW/) `myJavascriptHandler`中看到的那样，首先会调用`myJQueryHandler`. 我认为这是因为 jquery 只是在表单中添加了一个事件侦听器，而旧的事件侦听器保持不变。

# python - Django Celery 定期任务运行但 RabbitMQ 队列未被消耗

> ID：13275884
> 
> 赞同：3
> 
> 时间：2012-11-07T18:29:33.413
> 
> 标签：python, django, heroku, rabbitmq, celery

# 问题

通过 celery 的周期性任务调度器运行任务后，beat，为什么我在 RabbitMQ 中还有这么多未使用的队列？

## 设置

*   在 Heroku 上运行的 Django Web 应用程序
*   通过 celery beat 安排的任务
*   任务通过 celery worker 运行
*   消息代理是来自 CouldAMQP 的 RabbitMQ

### 档案

```
web: gunicorn --workers=2 --worker-class=gevent --bind=0.0.0.0:$PORT project_name.wsgi:application
scheduler: python manage.py celery worker --loglevel=ERROR -B -E --maxtasksperchild=1000
worker: python manage.py celery worker -E --maxtasksperchild=1000 --loglevel=ERROR 
```

### 设置.py

```
CELERYBEAT_SCHEDULE = {
    'do_some_task': {
        'task': 'project_name.apps.appname.tasks.some_task',
        'schedule': datetime.timedelta(seconds=60 * 15),
        'args': ''
    },
} 
```

### 任务.py

```
@celery.task
def some_task()
    # Get some data from external resources
    # Save that data to the database
    # No return value specified 
```

## 结果

每次任务运行时，我都会（通过 RabbitMQ Web 界面）：

*   我的“队列消息”下处于“就绪”状态的附加消息
*   一个附加队列，其中一条消息处于“就绪”状态
    *   此队列没有列出的消费者

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T04:21:31.713

它最终成为我的设置[`CELERY_RESULT_BACKEND`](http://docs.celeryproject.org/en/latest/configuration.html#task-result-backend-settings)。

以前，它是：

```
CELERY_RESULT_BACKEND = 'amqp' 
```

将 RabbitMQ 更改为以下内容后，我不再有未使用的消息/队列：

```
CELERY_RESULT_BACKEND = 'database' 
```

发生的事情似乎是，在执行任务后，celery 正在通过rabbitmq 发送有关该任务的信息，但是，没有任何设置来使用这些响应消息，因此一堆未读的消息最终进入队列.

注意：这意味着 celery 将添加记录任务结果的数据库条目。为了防止我的数据库被无用的消息加载，我添加了：

```
# Delete result records ("tombstones") from database after 4 hours
# http://docs.celeryproject.org/en/latest/configuration.html#celery-task-result-expires
CELERY_TASK_RESULT_EXPIRES = 14400 
```

* * *

## Settings.py 中的相关部分

```
########## CELERY CONFIGURATION
import djcelery
# https://github.com/celery/django-celery/
djcelery.setup_loader()

INSTALLED_APPS = INSTALLED_APPS + (
    'djcelery',
)

# Compress all the messages using gzip
# http://celery.readthedocs.org/en/latest/userguide/calling.html#compression
CELERY_MESSAGE_COMPRESSION = 'gzip'

# See: http://docs.celeryproject.org/en/latest/configuration.html#broker-transport
BROKER_TRANSPORT = 'amqplib'

# Set this number to the amount of allowed concurrent connections on your AMQP
# provider, divided by the amount of active workers you have.
#
# For example, if you have the 'Little Lemur' CloudAMQP plan (their free tier),
# they allow 3 concurrent connections. So if you run a single worker, you'd
# want this number to be 3\. If you had 3 workers running, you'd lower this
# number to 1, since 3 workers each maintaining one open connection = 3
# connections total.
#
# See: http://docs.celeryproject.org/en/latest/configuration.html#broker-pool-limit
BROKER_POOL_LIMIT = 3

# See: http://docs.celeryproject.org/en/latest/configuration.html#broker-connection-max-retries
BROKER_CONNECTION_MAX_RETRIES = 0

# See: http://docs.celeryproject.org/en/latest/configuration.html#broker-url
BROKER_URL = os.environ.get('CLOUDAMQP_URL')

# Previously, had this set to 'amqp', this resulted in many read / unconsumed
# queues and messages in RabbitMQ
# See: http://docs.celeryproject.org/en/latest/configuration.html#celery-result-backend
CELERY_RESULT_BACKEND = 'database'

# Delete result records ("tombstones") from database after 4 hours
# http://docs.celeryproject.org/en/latest/configuration.html#celery-task-result-expires
CELERY_TASK_RESULT_EXPIRES = 14400
########## END CELERY CONFIGURATION 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:30:08.253

看起来您正在从已使用的任务中获得响应。

您可以通过以下方式避免这种情况：

```
@celery.task(ignore_result=True) 
```

# .net - 如何检测每天 25 小时的夏令时

> ID：13275886
> 
> 赞同：1
> 
> 时间：2012-11-07T18:29:34.900
> 
> 标签：.net, datediff

我每天在给定的时钟时间运行一个进程（在美国——这很重要）。我一直在尝试计算如何在一天 25 小时内正确地做到这一点。考虑以下 C# 代码：

```
var referenceDate = new DateTime(2012, 11, 3);
var referenceTime = new TimeSpan(0, 19, 30, 0);
var originalTime = referenceDate.Add(referenceTime);
var tomorrow = referenceDate.AddDays(1);
var nextTimestamp = string.Format(
            "{0} {1:00}:{2:00}", 
            tomorrow.ToShortDateString(), 
            referenceTime.Hours, 
            referenceTime.Minutes);
var nextRunTimestamp = DateTime.Parse(nextTimestamp); 
```

我使用格式/解析序列来确保我们可以避免跨越 DST 转换时间时的时间跨度。现在下面表达式的结果应该是什么？

```
nextRunTimestamp.Subtract(originalTime).TotalHours 
```

好吧，结果是 24，但我认为应该是 25，因为 2012 年 11 月 4 日是一天 25 小时（在凌晨 2 点转换），所以 11 月 3 日的 19:30 和 11 月 4 日的 19:30 之间的差异应该是 25 小时。

我如何得到一年中每个日期的正确答案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:58:02.137

实际上，听起来您根本不需要这样做。您的问题似乎没有实际意义，因为如果您每天都在同一时间运行某些东西，它无论如何都会自动适应您的时间变化。

不过，如果您真的感兴趣，您可以通过以下方式获取特定年份的[夏令时：](http://msdn.microsoft.com/en-us/library/system.globalization.daylighttime.aspx)

```
var dst = TimeZone.CurrentTimeZone.GetDaylightChanges(2012); 
```

DaylightTime 对象具有任何时区的 DST 的开始日期和时间以及结束日期和时间。从那里，如果您愿意，您可以检查 DST 开始或结束是否在您的时间段内，并根据需要增加或减少一个小时。

然后在您的代码中，您可以具有诸如（伪代码）之类的逻辑：

```
if(dst.End > originalTime && dst.End < tomorrow)
    //Add hour for "25 hour" day

if(dst.Start > orginalTime && dst.Start < tomorrow)
    //Subtract hour for "23 hour" day 
```

编辑：我想我误解了你在做什么。如果您的 DST 开始或结束在您的时间段内，上面的代码可以告诉您。你正在寻找这个：

```
//Probably DateTime.Now, but whatever
var referenceDate = new DateTime(2012, 11, 3, 19, 30, 0);
var nextTime = referenceDate.AddDays(1);

Timer t = new Timer(nextTime.ToUniversalTime() - referenceDate.ToUniversalTime());

t.Start(); 
```

I hope you are not puting your DateTime in a string format then trying to do a Parse in your actual code...

# android - 使用 LinearLayouts 作为拖动项的 Android Drag-n-Drop 网格

> ID：13275892
> 
> 赞同：0
> 
> 时间：2012-11-07T18:29:50.247
> 
> 标签：android, grid

我有一个网格的工作示例，它允许使用长触摸对项目进行重新排序以激活拖放操作。如果项目是简单的视图，例如`TextView`，或者`ImageView`如果项目`LinearLayouts`仅显示布局本身，则一切正常。

从这篇文章中，我一直在使用 Tom Quinsn 的网格（感谢 Tom ！！！）：

[Android Gridview 拖放示例](https://stackoverflow.com/questions/7365078/android-gridview-drag-and-drop-example)

`LinearLayouts`如果我派生自己的`LinearLayout`类并覆盖，我可以开始工作`onLayout()`，但这迫使我在此函数的布局中硬编码子控件的位置。

理想情况下，我希望能够在 XML 文件中定义项目布局并在将它们添加到处理网格的控件之前对其进行膨胀。我猜出于某种原因，框架没有为`DraggableGridView`Tom 的代码中定义的视图中包含的子项调用布局函数，但我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:34:32.533

[在此](http://blahti.wordpress.com/2011/10/03/drag-drop-for-android-gridview/)链接的帮助下，我正在开发自己的拖放应用程序。您可以将代码与来自 Tom Quesinsn 的代码进行比较。它还获取 GridView 的不同子级并将它们添加为“放置目标”，接受放置在它们上并复制您正在拖动的视图的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T07:26:23.690

这是一个已知的问题`DraggableGridView`——不幸的是——我还没有解决这个问题。当我写 DGV 时，我并没有完全掌握视图是如何布局的。您可以尝试让 DGV 在布置每个孩子之前对其进行测量。添加类似：

```
getChildAt(i).measure(MeasureSpec.makeMeasureSpec(childSize, MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(childSize, MeasureSpec.EXACTLY)); 
```

在这一行的布局之前：

```
getChildAt(i).layout(xy.x, xy.y, xy.x + childSize, xy.y + childSize); 
```

# c# - C# 等价于“Not MyEnum.SomeValue”

> ID：13275895
> 
> 赞同：5
> 
> 时间：2012-11-07T18:30:16.610
> 
> 标签：c#, vb.net, vb.net-to-c#

我正在尝试将一些 VB.net 代码转换为 C#。我使用 SharpDevelop 来完成繁重的工作；但它生成的代码在一些枚举操作上被破坏了，我不知道如何手动修复它。

VB.net 原代码：

```
Enum ePlacement
    Left = 1
    Right = 2
    Top = 4
    Bottom = 8
    TopLeft = Top Or Left
    TopRight = Top Or Right
    BottomLeft = Bottom Or Left
    BottomRight = Bottom Or Right
End Enum

Private mPlacement As ePlacement

''...

mPlacement = (mPlacement And Not ePlacement.Left) Or ePlacement.Right 
```

生成的 C# 代码：

```
public enum ePlacement
{
    Left = 1,
    Right = 2,
    Top = 4,
    Bottom = 8,
    TopLeft = Top | Left,
    TopRight = Top | Right,
    BottomLeft = Bottom | Left,
    BottomRight = Bottom | Right
}

private ePlacement mPlacement;

//...

//Generates CS0023:   Operator '!' cannot be applied to operand of type 'Popup.Popup.ePlacement'
mPlacement = (mPlacement & !ePlacement.Left) | ePlacement.Right; 
```

Resharper 建议将`[Flags]`属性添加到枚举中；但这样做不会影响错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-07T18:33:06.370

在 VB`Not`中用于逻辑和按位非。

在 C#`!`中是布尔非，`~`是按位非。

所以只需使用：

```
mPlacement = (mPlacement & ~ePlacement.Left) | ePlacement.Right; 
```

# jquery - 在页面加载时运行 JQuery 函数

> ID：13275902
> 
> 赞同：0
> 
> 时间：2012-11-07T18:30:37.033
> 
> 标签：jquery, html, dom

我正在尝试在页面加载时运行一些 jquery，但它现在正在运行。它正在检查是否已保存链接，如果已保存，请为其设置表格。这是否可能，因为它应该针对每个带有 img 类的 div 运行？

```
$(document).ready(function(){
    $(".img a").live('pageshow', function(event, ui) {
        var item=$(this).attr( 'href' );
        var action="check";
        jqxhr = $.post("webservice.php", { action: action, color: item }, function(data) {
            var result=data.result;
            if (result="saved") {
                $("span", this).html("Saved");
                $(this).attr("href","saved");
            }

        }, "json")
        .error(function() {         
            alert("error: unable to contact web service"); 
        });
    });
}); 
```

这是HTML

```
 <td>
                                <div class="img" style="background:#f8d3cf;">
                                    <a href="f8d3cf" rev="1" class="link">
                                        <span>Click to Save</span>
                                        <em>Saved</em>
                                    </a>
                                    <div class="popup">
                                        <div class="holder">
                                            <div class="popup-img" style="background:#f8d3cf;"></div>
                                            <div class="info">
                                                <h3>Desert Warmth</h3>
                                                <strong class="num">70YR 56/190 <span>A0542</span></strong>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:10:10.763

如前所述，pageshow 是一个 qmobile 事件，而 onpageshow 是 html5，并非所有浏览器都支持。答案是使用 'window.onload= function() {};' 该 window.onload 中的任何内容都将在页面加载时处理。这是我使用window.onload的方式。第一个 ajax 调用从会话中加载 cart_id 或在需要时创建一个。在完成 ajax 调用后，将调用填充购物车中的项目的应用程序。

```
window.onload = function() {
    $j(".cartid").each(function() {
        var self = $j(this);

        jqxhr = $j.post("mycartid.php", function(data) {
            self.html(data.cart_id);
        }, "json").complete(function() {

            $j("#cartitems").each(function() {
                var self = $j(this);
                jqxhr = $j.post("printitems.php", function(data) {
                    //var result=data.result;
                    self.html(data);
                }, "html");

            });
        });
    });
 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:14:04.043

在你的最后一行'));' 应该 '}）;

```
$(document).ready(function(){
    $(".img a").live('pageshow', function(event, ui) {
        var item=$(this).attr( 'href' );
        var action="check";
        jqxhr = $.post("webservice.php", { action: action, color: item }, function(data) {
            var result=data.result;
            if (result="saved") {
                $("span", this).html("Saved");
                $(this).attr("href","saved");
            }

        }, "json")
        .error(function() {         
            alert("error: unable to contact web service"); 
        });
    });
}); 
```

# c# - MapPath 与 VirtualPathUtility.ToAbsolute

> ID：13275907
> 
> 赞同：5
> 
> 时间：2012-11-07T18:30:58.733
> 
> 标签：c#, asp.net

我正在使用 c#、asp.net 并在 Web 应用程序上工作。

我最初有一个相对路径，因此我需要成为绝对路径。以下工作但需要获取绝对路径：

```
 return Chart.RenderChartHTML("../../Charts/MSLine.swf"); 
```

我尝试了以下不起作用的方法（请注意，它为我提供了硬盘驱动器上到 .swf 的完整路径）：

```
 string mslinepath = HttpContext.Current.Server.MapPath("Charts/MSLine.swf");

    return Chart.RenderChartHTML(mslinepath); 
```

然后我尝试了以下方法：

```
 string mslinepath = VirtualPathUtility.ToAbsolute("~/Charts/MSLine.swf");

    return Chart.RenderChartHTML(mslinepath); 
```

想知道为什么 VirtualPathUtility.ToAbsolute 有效，而另一个无效。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-07T18:37:58.460

`MapPath`返回与指定虚拟路径相对应的服务器上的物理文件路径。
*（例如：“C:\inetpub\wwwroot\Charts\MSLine.swf”）*

`ToAbsolute`将应用程序相关的虚拟路径（以“~/”开头的路径）转换为绝对虚拟路径。
*（例如：“/AppName/Charts/MSLine.swf”）*

# excel - 从 Excel/ActiveX 电子表格中恢复数据

> ID：13275909
> 
> 赞同：1
> 
> 时间：2012-11-07T18:31:05.097
> 
> 标签：excel, activex, excel-2007, rexcel

我遇到了以下问题：我有一个 Excel 电子表格，其中包含许多 VBA 代码和 ActiveX 控件，包括 RExcel 公式。

Excel 版本是 2007。

当我尝试打开此文件时，任务管理器说 Excel 没有响应，并且开始出现类似 Excel 开始运行无休止的代码；我停用了每个控件，但它似乎仍然损坏。

我想至少恢复我在该电子表格中编写的一些公式，但这实际上是不可能通过以传统方式打开电子表格的。

您能告诉我如何在不使用 Excel 打开电子表格的情况下“读取”该电子表格中的公式和文本吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:50:11.537

确实将计算设置为手动开始。

现在设置您的安全设置，以便禁用宏和 activeX：

Excel 选项 > 信任中心 > 信任中心设置... > 宏设置 > 禁用所有带有通知的宏

对于 ActiveX，我不确定 excel-2007 中是否有类似宏的菜单，但如果有，请确保它也设置为不运行。

现在您可以打开您的 Excel 工作簿，它不会运行您的宏，也不应该自动计算或更新！

补充：我过去有过这样的事情，这在 1 次中起作用：安装另一个 office excel 应用程序，如 open office（calc 应用程序具有 excel 功能）并查看它是否在该应用程序中打开。然后如果是，保存文件（在另一个文件名下）并关闭它。在 MS Office Excel 下打开新文件，看看还有什么可以恢复的。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T22:17:30.697

使用 7zip 之类的工具来提取文件。表格/公式在`.xml`

![xlsm 用 7zip 打开](../Images/754588a780be21e0efb8180a2713abe0.png)

启用宏的电子表格中的代码位于 可以使用[MalOfficeScanner](http://www.reconstructer.org/code.html)`.bin`读取的文件中

# java - 无法让 Java 正则表达式正确匹配

> ID：13275918
> 
> 赞同：2
> 
> 时间：2012-11-07T18:31:48.320
> 
> 标签：java, regex

我正在尝试为[CodingBat 问题](http://codingbat.com/prob/p136594)创建一个正则表达式，我必须根据字符串是否包含短语“xyz”返回一个布尔值，但以句点开头的“xyz”不计算在内。到目前为止，我尝试的正则表达式是：

```
str.matches("(?<!\\.)xyz");
str.matches("[^\\.]xyz") 
```

但两者都不是我想要的方式。如果有人能引导我朝着正确的方向发展，我将不胜感激。

**编辑：**由于有人要求进行测试：

xyzThere("abcxyz") → true
xyzThere("abc.xyz") → false
xyzThere("xyz.abc") → true
xyzThere("abcxy") → false
xyzThere("xyz") → true
xyzThere("xy") → 假
xyzThere("x") → 假
xyzThere("") → 假
xyzThere("abc.xyzxyz") → 真
xyzThere("abc.xxyz") → 真
xyzThere(".xyz") → 假
xyzThere("12 .xyz") → 假
xyzThere("12xyz") → 真
xyzThere("1.xyz.xyz2.xyz") → 假

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T18:35:14.290

`matches`将对整个字符串进行测试（隐式添加`^`和`$`围绕模式）。一个快速的解决方法是添加`.*`到模式的开头和结尾。否则，您的第一次尝试是正确的。第二个将在字符串的开头失败，因为它需要一个非`.`字符（但必须有一个）。

```
public boolean xyzThere(String str) {
    return str.matches(".*(?<!\\.)xyz.*");
} 
```

诚然，这有点骇人听闻。要对字符串的任何部分进行常规的正则表达式测试，您需要使用更多的 OOP：

```
public boolean xyzThere(String str) {
    return java.util.regex.Pattern.compile("(?<!\\.)xyz").matcher(str).find();
} 
```

（我似乎无法`import`在 CodingBat 上使用。）

# xcode - xcode 4.5 crash log symbolicates except for app lines

> ID：13275924
> 
> 赞同：5
> 
> 时间：2012-11-07T18:32:06.377
> 
> 标签：xcode, symbolicatecrash, symbolicate

How to I get to symbolicate everything?

Here is an example so what I am talking about:

```
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   CoreFoundation                  0x351642cc CFRelease + 32
1   CoreFoundation                  0x3518e130 CFArraySetValueAtIndex + 284
2   AddressBook                     0x32971aba ABCMultiValueReplaceLabel + 58
3   AddressBook                     0x3298c598 ABMultiValueReplaceLabelAtIndex + 140
4   My App                      0x00011206 0x00011206
5   My App                      0x00010e48 0x00010e48
6   My App                      0x00011ada 0x00011ada
7   My App                      0x0001027c 0x0001027c
8   My App                      0x0000ecf2 0x0000ecf2
9   My App                      0x00012f44 0x00012f44
10  My App                      0x00012e3e 0x00012e3e
11  Foundation                      0x32d0aef2 __65-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]_block_invoke_0 + 14
12  Foundation                      0x32c4a9ec -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:] + 196
13  Foundation                      0x32c4a908 -[NSURLConnectionInternal _withActiveConnectionAndDelegate:] + 56
14  CFNetwork                       0x3111c5dc ___delegate_didFinishLoading_block_invoke_0 + 24
15  CFNetwork                       0x3111bcc8 ___withDelegateAsync_block_invoke_0 + 52
16  CFNetwork                       0x31144130 ___performAsync_block_invoke_068 + 16
17  CoreFoundation                  0x3516974a CFArrayApplyFunction + 174
18  CFNetwork                       0x3114458e RunloopBlockContext::perform() + 70
19  CFNetwork                       0x310a815a MultiplexerSource::perform() + 186
20  CoreFoundation                  0x351f8680 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 12
21  CoreFoundation                  0x351f7ee4 __CFRunLoopDoSources0 + 208
22  CoreFoundation                  0x351f6cb2 __CFRunLoopRun + 642
23  CoreFoundation                  0x35169eb8 CFRunLoopRunSpecific + 352
24  CoreFoundation                  0x35169d44 CFRunLoopRunInMode + 100
25  GraphicsServices                0x356a62e6 GSEventRunModal + 70
26  UIKit                           0x365482fc UIApplicationMain + 1116
27  My App                      0x0000275a 0x0000275a
28  My App                      0x00002714 0x00002714 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T00:19:56.850

您可能会发现这些链接对于如何符号化崩溃日志很有用：
[Symbolicating iPhone App Crash Reports](https://stackoverflow.com/questions/1460892/symbolicating-iphone-app-crash-reports)
[iOS Crash Logs](http://kevincupp.com/2011/05/12/symbolicating-ios-crash-logs.html)

另一种方法：在 Xcode 4.5 中，将构建目标（通过停止按钮旁边的方案下拉菜单）设置为 iOS 设备。然后转到菜单栏中的产品菜单并选择存档。

接下来，打开 Organizer 窗口（菜单栏中的 Window 菜单 --> Organizer），并确保当您单击 Organizer 窗口顶部的 Archives 图标时，您的应用程序会显示在列表中。

最后，单击管理器窗口顶部的设备图标，单击库下左侧的设备日志，然后将崩溃日志拖到右侧的窗格中。它应该为您完全自动符号化。

# product - prestashop 1.5 基本产品库存管理

> ID：13275928
> 
> 赞同：0
> 
> 时间：2012-11-07T18:32:28.333
> 
> 标签：product, prestashop, stock

我正在尝试在 prestashop 1.5.0.17 中查找产品/库存管理。

我找到了 Advanced Stock Management，但这不是我想要的，因为我将只有一个没有名字也没有什么特别之处的仓库。

在旧的 prestashop 版本（例如 1.2）中，产品编辑表单中只有一个简单的“数量”输入，就可以完成这项工作。在新的 prestashop 中是否有这样的东西，或者我被迫使用高级库存管理：/？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:37:44.177

```
Preferences->Products->Enable stock management->Yes 
```

之后，您可以在此处设置数量：`Catalog->Product->Edit->Quantities`

问候

# image-processing - How to apply video processing on the GPU

> ID：13275929
> 
> 赞同：0
> 
> 时间：2012-11-07T18:32:28.837
> 
> 标签：image-processing, texture2d, sharpdx

I have a issue in programming for the graphics Card. I write a shader for Image processing (I use DirectX 11 in combination with SharpDX), but the Transfer from the CPU to the GPU is really slow (sometime about 0.5 seconds), but I think there should be a faster way than using Texture2D.FromStream, because when playing a video, also every image of the Video has to be transfered to the GPU (or am I wrong at this Point?). How can I Speed up this process?

# actionscript-3 - 在 Flash as3 中播放视频后，使影片剪辑可重新点击

> ID：13275933
> 
> 赞同：0
> 
> 时间：2012-11-07T18:32:54.000
> 
> 标签：actionscript-3, flash, event-handling, movieclip

因此，我正在尝试构建一个平台，用户可以从菜单类型页面单击影片剪辑观看视频，然后在完成后，视频消失，然后他们可以单击另一个影片剪辑，这将启动另一个视频。

但是，每当您观看一个视频时，视频播放完毕后您可以单击的所有内容都是相同的影片剪辑以重新开始，您无法单击不同的影片剪辑。

如何使启动其他视频的其他电影剪辑可被发现？我是否需要添加一个引用其他影片剪辑的新 eventListener，并将其放在所有影片剪辑中？

这是我的一个电影剪辑的代码

```
taffrail_click_play_mc.addEventListener(MouseEvent.MOUSE_DOWN, showTaffrailMovieBox);
taffrail_text_mc.addEventListener(MouseEvent.MOUSE_DOWN, showTaffrailMovieBox);

function showTaffrailMovieBox(e:MouseEvent):void
{

    MovieClip(root).taffrail_movie_mc.visible=true; 
    var myTaffTween = new Tween(MovieClip(root).taffrail_movie_mc, "alpha", Strong.easeIn, 0, 1, 1, true);

    var taffVideo:FLVPlayback = new FLVPlayback();
    var myTaffTween1 = new Tween(taffVideo, "alpha", Strong.easeIn, 0, 1, 1, true);
    taffVideo.source = "Wildlife.flv";
    addChild(taffVideo);
    taffVideo.play("Wildlife.flv");

    var cuePt:Object = new Object(); //create cue point object 
    cuePt.time = 3; 
    cuePt.name = "ASpt1"; 
    cuePt.type = "actionscript"; 

    taffVideo.addASCuePoint(cuePt);
    taffVideo.addEventListener(MetadataEvent.CUE_POINT, taff_vid_close);

    function taff_vid_close(eventObject:MetadataEvent):void { 
        var myTaffTween2 = new Tween(taffVideo, "alpha", Strong.easeIn, 1, 0, 1, true);
        var myTaffTween3 = new Tween(MovieClip(root).taffrail_movie_mc, "alpha", Strong.easeIn, 1, 0, 1, true);
        MovieClip(root).taffrail_movie_mc.visible=false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T19:29:03.293

另一个电影剪辑不可点击的原因是因为我没有在播放完成后删除视频，我需要

```
myCompbox3.addEventListener(TweenEvent.MOTION_FINISH, removeCompVideo);

    function removeCompVideo(e:TweenEvent):void
{
    removeChild(compVideo);
} 
```

在我的 taff_vid_close 函数中。谢谢你，自己的大脑。

# php - Facebook Video API 不上传视频

> ID：13275938
> 
> 赞同：0
> 
> 时间：2012-11-07T18:33:05.360
> 
> 标签：php, facebook, facebook-graph-api

它像应有的那样进行身份验证并重定向到thankyou.com，但我的时间轴上从未发布过任何视频。视频正在播放`www.mydomain.com/video.mp4`

```
 <?php
 $app_id = "2363xxxxxxx";
 $app_secret = "e4cd5bbxxxxxxxxxxxxxxx";
 $my_url = "http://thankyou.com";
 $video_title = "Test";
 $video_desc = "Test";

 $code = $_REQUEST["code"];

 if(empty($code)) {
 $dialog_url = "http://www.facebook.com/dialog/oauth?client_id="
 . $app_id . "&redirect_uri=" . urlencode($my_url)
 . "&scope=publish_stream";
 echo("<script>top.location.href='" . $dialog_url . "'</script>");
 }

 $token_url = "https://graph.facebook.com/oauth/access_token?client_id="
 . $app_id . "&redirect_uri=" . urlencode($my_url)
 . "&client_secret=" . $app_secret
 . "&code=" . $code;
 $access_token = file_get_contents($token_url);

 $post_url = "https://graph-video.facebook.com/me/videos?"
 . "title=" . $video_title. "&description=" . $video_desc
 . "&". $access_token;

//CURL CODES START

    $ch = curl_init();
    $data = array('name' => 'file', 'file' => '@'.realpath("video.mp4"));// use realpath
    curl_setopt($ch, CURLOPT_URL, $post_url);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    $res = curl_exec($ch);

    if (curl_errno($ch) == 60) { // CURLE_SSL_CACERT
        curl_setopt($ch, CURLOPT_CAINFO,
                  dirname(__FILE__) . '/src/fb_ca_chain_bundle.crt'); // path to the certificate
        $res = curl_exec($ch);
    }

    if( $res === false ) {
        echo curl_error($ch);
    }
    curl_close($ch);

//CURL ENDS
?> 
```

# delphi - 如何获取编译时已知的汇编指令的机器代码？

> ID：13275948
> 
> 赞同：5
> 
> 时间：2012-11-07T18:34:07.037
> 
> 标签：delphi, assembly, shellcode, basm

我希望能够将一行 ASM 转换为 shellcode。IE：

```
CALL EBX 
```

我该如何去做，并且能够正确地转换这个 shellcode，以便我可以将它存储在一个 delphi 应用程序的变量中。IE：

```
var ShellCodeArray:  array[0..3] of Byte = ($55,$8B,$EC,$81); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T21:03:52.133

`CALL EBX`如果我猜对了，您想使用 Delphi 内置汇编程序获取单个汇编指令的机器代码。

```
function CodeSize: Integer;
asm
    lea EAX, @@end
    lea EDX, @@start
    sub EAX, EDX
    JMP @@end
@@start:
    call EBX
@@end:
end;

procedure Code;
asm
    call EBX
end;

function CodeToBytes: TBytes;
var
  I, N: Integer;
  P: PByte;

begin
  N:= CodeSize;
  SetLength(Result, N);
  P:= @Code;
  for I:= 0 to N - 1 do begin
    Result[I]:= P^;
    Inc(P);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T21:24:42.847

对于它的价值，我会避免重复 Serg 的答案并这样写：

```
function CodeToBytes: TBytes;
var
  StartAddr, EndAddr: Pointer;
begin
  asm
    LEA EAX, @@start
    MOV StartAddr, EAX
    LEA EAX, @@end
    MOV EndAddr, EAX
    JMP @@end
  @@start:
    CALL EBX
  @@end:
  end;
  SetLength(Result, Integer(EndAddr)-Integer(StartAddr));
  Move(StartAddr^, Pointer(Result)^, Length(Result));
end; 
```

显然，您可以在开始和结束标签之间粘贴您喜欢的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T21:47:45.377

只需在代码后面使用一个虚拟程序并减去两者，例如：

```
procedure Code
asm
   call ebx;
end;

procedure CodeEnd;
asm end;

CodeSize :＝ DWORD_PTR(@CodeEnd) - DWORD_PTR(@Code);
CopyMemory(@MyByteArray[0], @Code, CodeSize); 
```

请注意，在您使用的代码中，只要您不调用其他代码（函数/过程/rtl），您也可以使用 Delphi 代码而不是 asm

编辑：作为对 Serg 和 David Heffernan 评论的回答，我在发布模式下使用 Delphi 2010 验证了结果。

我使用了以下代码：

```
procedure Code;
asm
  mov eax, 0;
end;

procedure CodeEnd;
asm end;

procedure TForm4.Button1Click(Sender: TObject);
begin
  ShowMessageFmt('CodeSize=%d', [DWORD_PTR(@CodeEnd) - DWORD_PTR(@Code)]);
end; 
```

报告的 CodeSize 为 8 字节，然后我使用 Ida Pro（可执行文件上的反汇编程序）进行了验证：

```
.text:004B3344                 Code            proc near              
.text:004B3344                                                        
.text:004B3344 B8 00 00 00 00                  mov     eax, 0
.text:004B3349 C3                              retn
.text:004B3349                 Code            endp
.text:004B3349
.text:004B3349                 ; -----------------------------
.text:004B334A 8B C0                           align 4 
```

所以在这个例子中 mov eax，0 是 5 个字节（B8 00 00 00 00），retn（由编译器添加）是 1 个字节（C3），对齐 4 是 2 个字节（8B C0），总共是 8 个。

# c# - 将 dataGrid 从匿名类型更新回 ef

> ID：13275949
> 
> 赞同：1
> 
> 时间：2012-11-07T18:34:09.020
> 
> 标签：c#, wpf, entity-framework

以下代码显示来自两个表的 dataGrid 结果

但我知道我无法将数据更新回数据库（因为它显示匿名类型）

```
public class NameAndDone
{
    public string document_Name { get; set; }
    public bool ? document_Done { get; set; }
}

       vagEntities projectE = new vagEntities();
       var doc = from c in projectE.Person_Documents
                  join cw in projectE.Documents on c.Document_Id equals cw.Document_Id
                  where c.Person_Id == selc   
                  select new NameAndDone { document_Name = cw.Document_Name,document_Done = c.Document_done};

       carsGrid.ItemsSource = doc; 
```

并在 xaml

```
 <DataGrid Grid.Row="1" RowHeight="30" AutoGenerateColumns="False" Margin="15,15,15,96" x:Name="carsGrid" >
    <DataGrid.Columns>
            <DataGridTextColumn  Binding="{Binding Path=document_Name}" MinWidth="100" Header="Documents"  />
            <DataGridCheckBoxColumn  Binding="{Binding Path=document_Done}" Header="Done" />
        </DataGrid.Columns>
    </DataGrid> 
```

我的问题是：是否可以使用 saveChanges () 函数进行更新？或者我需要更改所有代码（希望不是）

提前感谢任何提供帮助的人（即使我无法理解）

请问，有人有想法吗？

# php - 从选择数组中的多个值切换到 PHP 中的单个值

> ID：13275954
> 
> 赞同：0
> 
> 时间：2012-11-07T18:34:25.183
> 
> 标签：php

我目前有一段代码从数组中选择多个值，只是想知道如何将其切换为仅从数组中选择一个值。

到目前为止，我已经尝试更改`array_rand($status, rand(2,3))`为，`array_rand($status, rand(1,1))`但它给了我错误消息**为 foreach() 提供的参数无效**。我该如何解决？

```
$dateStart = new DateTime();
$dateStart->setDate(2012, 10, 01);
$dateEnd = new DateTime();
$dateEnd->setDate(2012, 12, 01);

$dates = array();
while ( $dateStart < $dateEnd ) {
   $rand = array_rand($status, rand(2,3));
   $text = '';
   foreach ( $rand as $key ) $text .= $status[$key] . '<br />';

   printf("<li><div id='activity_date'>%s</div>
           <div id='activity_box'>
           <div id='activity_text'>" . $text . ' request</div></div></li>',

   $dateStart->format("d/m/Y")
   );

   $dateStart->modify(sprintf("+%d day",mt_rand(1, 10)));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:37:10.733

```
$rand = array_rand($status); 
```

我觉得自己有点笨。

以这种方式更改您的代码：

```
$rand = array_rand($status);
$text = $status[$rand] . '<br />'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T18:39:15.233

*如果*你想保留你的 foreach，你必须确保你从`array_rand`. 一种方法是这样的：

```
$rand[] = array_rand($status);
foreach($rand as $key) { ... } 
```

如果您总是只需要一个随机数组成员，那么@Gianps 有更好的方法。失去`foreach`.

# html - HTML 导航栏延伸到底部

> ID：13275957
> 
> 赞同：0
> 
> 时间：2012-11-07T18:34:51.110
> 
> 标签：html, css

我为我的学校项目创建了一个导航栏（我正在做基本设计，然后我们正在添加 mysql 数据库），并且导航栏效果很好，但它没有延伸到页面底部，它只是一个小盒子现在。

这是我的风格脚本

```
style type='text/css'>
#navigation {
 display:block;
 width:150px;
 float:left;
 margin-left:7px;
 margin-right6px;
 margin:5px;
 border-style:solid;
}
#navhead {
 text-align:center;
 margin-left:7px;
 margin-right:6px;
}
#links {
 display:block;
 width:60px;
}
</style> 
```

我是否遗漏了任何“延伸到框架底部”的属性？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:53:53.413

您需要使用该`height`属性。您可以将 设置`height`为 100%（这个父级的高度，所以`<body>`），但它看起来很奇怪，因为它会渲染高度 + 填充 + 边框 + 边距。
您需要使用[`border-box`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)具有高度的属性。它允许您定义填充和/或边框（或默认情况下没有）是否计入`height`and`width`属性。您还需要杀死`margin-top`and `margin-bottom`。在这些更改之后，您的 CSS 应该如下所示：

```
#navigation {
    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
            box-sizing: border-box;
    display: block;
    width: 150px;
    height: 100%;
    float: left;
    margin-left: 7px;
    margin-right: 5px;
    border-style: solid;
} 
```

# c# - 升级：如何删除项目引用

> ID：13275960
> 
> 赞同：0
> 
> 时间：2012-11-07T18:34:55.217
> 
> 标签：c#, visual-studio

我正在卸载涉及不再使用的引用的应用程序的一部分。如何以编程方式从引用文件夹中删除该项目？

换句话说，我可以手动单击以展开“引用”节点并删除那里的引用。但是，作为卸载程序的一部分，我将如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T18:37:06.137

试试这个

```
Solution::Remove(Project prj); 
```

看看这个链接

[http://msdn.microsoft.com/en-us/library/envdte._solution.remove%28v=VS.100%29.aspx](http://msdn.microsoft.com/en-us/library/envdte._solution.remove%28v=VS.100%29.aspx)

# java - HP-Cloud Storage：无法上传带有有效负载的 blob

> ID：13275961
> 
> 赞同：1
> 
> 时间：2012-11-07T18:35:03.347
> 
> 标签：java, blob, jclouds, hp-cloud-services

这是我的代码示例：

```
    属性 props = new Properties();
    props.setProperty(KeystoneProperties.CREDENTIAL_TYPE, CredentialTypes.API_ACCESS_KEY_CREDENTIALS);
    上下文 = ContextBuilder.newBuilder("hpcloud-objectstorage")
        .overrides(道具)
        .credentials(api_key, api_secret)
        .buildView(BlobStoreContext.class);
    存储 = context.getBlobStore();

    // 这行得通
    Blob blob1 = store.blobBuilder("file1")
        .payload("")
        。建造（）;

    字符串 blobName1 = store.putBlob(remoteFolderName, blob1);

    // 这与消息一起崩溃，您可以在下面看到
    Blob blob2 = store.blobBuilder("file2")
        .payload("a")
        。建造（）;

    字符串 blobName1 = store.putBlob(remoteFolderName, blob2);

```

执行此代码后收到的异常消息如下：

```
    2012 年 11 月 7 日 7:08:44 PM org.jclouds.logging.jdk.JDKLogger logError
    Schwerwiegend：服务器错误后无法重试，命令已超出重试限制 5：[method=HPCloudObjectStorageAsyncApi.putObject, request=PUT https://region-a.geo-1.objects.hpcloudsvc.com/v1/82797321453196/cloudstoretest/file2 HTTP/1.1]
```

这里是堆栈跟踪：

```
    org.jclouds.http.HttpResponseException：连接到 PUT https://region-a.geo-1.objects.hpcloudsvc.com/v1/82797321453196/cloudstoretest/tada%21 HTTP/1.1 的服务器的文件意外结束
    在 org.jclouds.http.internal.BaseHttpCommandExecutorService$HttpResponseCallable.call(BaseHttpCommandExecutorService.java:179)
    在 org.jclouds.http.internal.BaseHttpCommandExecutorService$HttpResponseCallable.call(BaseHttpCommandExecutorService.java:135)
    ...

```

我没有任何线索，可能是什么问题。我正在寻找可能的解决方案 2 天，但没有任何结果。如果有人有想法，我会很高兴，我做错了什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:42:31.807

看起来您的 blob 的名称实际上是“tada！” 基于 url 编码的“tada%21”

openstack swift 实现很可能不支持名称包含尾随“！”的 blob。您可以尝试其他命名约定并查看是否有相同的错误吗？

# game-center - 如何获得您刚刚发布到 GameCenter 的分数的排名？

> ID：13275964
> 
> 赞同：2
> 
> 时间：2012-11-07T18:35:13.513
> 
> 标签：game-center, rank

有没有办法获得他刚刚发布的球员的分数排名，即使分数不是他的最好？

[GKScore reportScoreWithCompletionHandler:] 用于将得分发布到 GameCenter，但其“排名”始终为零。'rank' 值仅在调用 [GKLeaderboard loadScoresWithCompletionHandler:] 时有效，但它是玩家今天/周/所有时间的最佳得分的排名。

最好的地方是[GKScore reportScoreWithCompletionHandler:]，使'rank'值在从gamecenter返回时有效。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T10:21:43.920

AFIK 没有这样的解决方案。GameCenter 仅存储玩家的最好成绩。

[读这个](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/GameKit_Guide/LeaderBoards/LeaderBoards.html#//apple_ref/doc/uid/TP40008304-CH6-SW13)

所以，如果你真的想这样做，你必须自己给玩家排名。

1.  从排行榜中检索所有分数。
2.  检查当前分数的排名。

- 下面的示例代码

```
-(void) findRankWithScore: (int64_t)score
{
    GKLeaderboard *leaderboard = [[GKLeaderboard alloc] init];

    if (leaderboard != nil) {
        leaderboard.category = @"YourCategory";
        leaderboard.timeScope = GKLeaderboardTimeScopeWeek; //or all time, day... pick one.

        [leaderboard loadScoresWithCompletionHandler:^(NSArray *scores, NSError *error) {
            int rank = 0;
            if (error == nil && scores != nil) {
                for (GKScore* refScore in scores) {
                    //NOTE: Retrieved score array is sorted already.
                    if (refScore.value <= score) {
                        rank = refScore.rank - 1;
                        if (rank < 1) {
                            rank = 1;
                        }
                        break;
                    }
                }
                //show the rank to player. using delegate, notification, popups etc...

            }else {
                //handle errors
            }
        }];
    }
} 
```

此外，从 GameCenter 中检索每个排名结果的所有分数需要花费很多。

因此，我建议您存储分数数组并重复使用它，即使它会牺牲您的排名准确性。（并在某个时间间隔或类似的时间刷新分数数组）

# visual-c++ - `static char THIS_FILE[] = __FILE__;` 有什么意义？

> ID：13275966
> 
> 赞同：12
> 
> 时间：2012-11-07T18:35:35.053
> 
> 标签：visual-c++, memory-leaks, mfc, visual-studio-debugging, memory-leak-detector

## 有什么意义`static char THIS_FILE[] = __FILE__;`？

### 简介：它有什么作用？它从何而来？

MFC 是微软的 Windows 原生类库，有一个`DEBUG_NEW`宏可以跟踪内存分配和它们发生的位置（在用户代码中）。

为此，VS 向导将以下代码块放入每个 cpp 文件中：（*不在*头文件中）

```
#ifdef _DEBUG
    #define new DEBUG_NEW
    #undef THIS_FILE
    static char THIS_FILE[] = __FILE__;
#endif 
```

并且调试新宏定义为（in `afx.h`）：

```
#define DEBUG_NEW new(THIS_FILE, __LINE__) 
```

整个机器将产生有意义的泄漏检测输出，例如：

```
Detected memory leaks!
Dumping objects ->
f:\dd\vctools\vc7libs\ship\atlmfc\src\mfc\strcore.cpp(141) : {615} normal block at 0x04081CE0, 56 bytes long.
 Data: <¬9Í]            > AC 39 CD 5D 13 00 00 00 13 00 00 00 01 00 00 00 
c:\my\dev\path\myfile.cpp(237) : {614} normal block at 0x04087FC0, 4 bytes long.
 Data: <ð   > F0 1C 08 04 
Object dump complete. 
```

## 那么，又是什么问题呢？

让我感到困惑的是`THIS_FILE`char 数组的用途。机器没有意义。如果他们定义`DEBUG_NEW`为：

```
#define DEBUG_NEW new(__FILE__, __LINE__) 
```

他们可以将它放在标题中并完成它，而不是`ifdef`在每个文件中都有那个块。

那么，有什么意义`THIS_FILE`呢？

（顺便说一句，这正是 MS 的 CRT 所做的，`malloc`并且`_malloc_dbg`调试宏在标头中定义`crtdbg.h`为：

```
#define   malloc(s)             _malloc_dbg(s, _NORMAL_BLOCK, __FILE__, __LINE__) 
```

)

再说一遍，为什么在 MFC 宏中以复杂的方式完成，`DEBUG_NEW`而简单的方式可以工作（更好）？？？

* * *

更新：哈！我最近注意到 VS2005 向导*没有*将定义`THIS_FILE`放入生成的 cpp 文件中。

调查一下，似乎 MS 前段时间决定不再需要它了，`afxtempl.h`如下定义：

```
#undef THIS_FILE
#define THIS_FILE __FILE__ 
```

尽管如此，我想问题仍然是一样的，为什么它是必要的。（而且我想当时内存要求的答案是非常有效的。）

* * *

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T20:07:00.670

调试分配器在堆块中存储*指向文件名的指针。*只需 4 个字节，而不是让每个分配的块也必须为文件名分配空间。

请注意，当泄漏的块由 DLL 分配并且在生成泄漏报告时已卸载 DLL 时，这可能会导致调试信息丢失。

只有字符数组`THIS_FILE`保证在翻译单元中始终相同。不是`__FILE__`，那是字面意思。并且不保证两个文字具有相同的地址，即使它们具有相同的值，这意味着编译器可以为每次使用`__FILE__`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T19:51:21.363

我相信，我可能是错的，这是在编译的 exe 中描述内存块。如果您要获得异常，这将有所帮助，您可以追溯内存地址链以找到有问题的代码，前提是您知道 dll/exe 加载的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T08:59:55.347

`__FILE__`在整个文件中是相同的，而`__LINE__`在每一行都有变化。因此，如果您在一个文件中有大量调试代码，则不能很好地合并常量的旧编译器会有很多不必要的字符串“filename.ext”副本。您也许可以使用 -fno-merge-constants 之类的东西来检查差异（对不起，这就是它的 gcc CFLAG，不确定 VS）。大多数编译器现在默认合并常量，不需要该定义。

# sql - 更新时无法在具有唯一索引 'SAXXIRPT 的对象中插入重复的键行

> ID：13275969
> 
> 赞同：2
> 
> 时间：2012-11-07T18:35:43.327
> 
> 标签：sql

我正在编写一条 SQL 语句来从临时表中更新 SQL 中的表。我不断收到此错误消息：`Cannot insert duplicate key row in object with unique index 'SAXXIRPT'`。

这是我的更新声明：

```
Update dbo.sat_ser_rpt_itm
SET itm_key_cd = n.itm_key_cd,
  itm_typ_cd  = n.itm_typ_cd,
  ser_id  = n.ser_id ,
  as_of_dt = n.as_of_dt,
  ocrn_nr  = n.ocrn_nr ,
  id_rssd = n.id_rssd,
  ocrn_day_txt = n.ocrn_day_txt ,
  ocrn_dt = n.ocrn_dt ,
  hol_flg = n.hol_flg ,
  ocrn_val_nr = n.ocrn_val_nr 
  from #LookupTable n
  on sat_ser_rpt_itm.id_rssd = n.id_rssd 
AND sat_ser_rpt_itm.as_of_dt = n.as_of_dt 
AND sat_ser_rpt_itm.ser_id = n.ser_id 
and sat_ser_rpt_itm.itm_typ_cd = n.itm_typ_cd 
and sat_ser_rpt_itm.ocrn_nr = n.ocrn_nr 
where t.id_rssd is not null and  t.as_of_dt is not null  and  t.ser_id is not null and  t.itm_typ_cd is not null and t.ocrn_nr is not null 
```

这些是我的索引（聚集）：

```
id_rssd, as_of_dt, ser_id, itm_key_cd and ocrn_nr 
```

是什么导致此错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:39:13.670

错误消息中没有太多歧义：您在某处设置了重复项

1.  该组合已存在，您正在尝试再次插入它或
2.  它不存在，并且您正在使用相同的组合更新多行或
3.  重叠：该组合已经存在，并且您正在使用相同的组合更新多行。

我认为导致您出现此问题的问题 Updating multiple rows with same combination

我不确定表**dbo.sat_ser_rpt_itm的主键是什么**

通过加入两个表（dbo.sat_ser_rpt_itm，#lookup_table）尝试这样

```
Update itm
SET 
   //itm_key_cd = n.itm_key_cd,
   //ser_id = n.ser_id
  itm_typ_cd  = n.itm_typ_cd,
  //as_of_dt = n.as_of_dt,
  //ocrn_nr  = n.ocrn_nr ,
 //id_rssd = n.id_rssd,
  ocrn_day_txt = n.ocrn_day_txt ,
  ocrn_dt = n.ocrn_dt ,
  hol_flg = n.hol_flg ,
  ocrn_val_nr = n.ocrn_val_nr 
  FROM dbo.sat_ser_rpt_itm itm 
  INNER JOIN #LookupTable n
  ON ..................  ( it could be itm.id_rssd = n.id_rssd OR itm.as_of_dt = n.as_of_dt  OR
                           OR  itm.ser_id = n.ser_id OR itm.itm_key_cd = n.itm_key_cd OR 
                            itm.ocrn_nr = n.ocrn_nr )

  WHERE t.id_rssd is not null AND  t.as_of_dt is not null  
  AND  t.ser_id is not null AND  t.itm_typ_cd is not null AND t.ocrn_nr is not null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T18:11:24.063

回答很晚了，但是您的问题可能很简单，并且您的关键约束（您没有显示出来，但这可能是您的问题）正在做它应该做的事情。

当您将更新语句数据组合到受约束的键中时，如果您按该键进行选择，您会发现您返回一个结果。解决方案是首先通过键选择并查看它是否存在，然后根据需要更新它，xor 删除重复项，或者执行其他操作。

所以看看被违反的键约束——消息应该说'重复键是（东西等......）选择，看看你是否不试图将现有项目更改为另一个现有项目。

干杯，丹尼尔·韦斯科特

# winapi - WinAPI 的 Sleep() 有多精确？

> ID：13275974
> 
> 赞同：1
> 
> 时间：2012-11-07T18:36:04.153
> 
> 标签：winapi, sleep

而且我的意思不是精确到一毫秒，我问的是我想要延迟一个小时使用的情况`Sleep(60 * 60 * 1000)`。会是一个小时而不是 55 或 70 分钟吗？线程是否保证唤醒而不是永远休眠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T21:24:14.697

一个多小时后，Sleep() 调用的准确性还不错，（也很容易测试）。Sleep() 调用将返回足够接近小时，以至于无法使用手动秒表确定任何错误，（在 XP 上尝试过 - 现在没有理由让它有任何不同，AFAIK）。

错误。如果连续调用 Sleep(3600*1000)，wall-time 当然会累积，特别是如果在每个间隔结束时执行的操作本身很长和/或盒子严重超载，（即更多准备好的线程比核心）。

如果你要求它休眠一个小时，为什么线程会永远休眠？如果你调用 Sleep(3600*1000)，它会在那之后准备好。如果没有，那么操作系统无论如何都是 stuff 并且您正在重新启动。

这种 Sleep() 调用可能比某些计时器更受欢迎的原因是它是单行的，并且可以在调用者堆栈的任何地方工作 - 不需要消息处理程序和/或状态机来处理计时器回调。

# c# - CircularBuffer 高效实现（线程安全和非线程安全）

> ID：13275975
> 
> 赞同：30
> 
> 时间：2012-11-07T18:36:06.293
> 
> 标签：c#

有人可以建议好的 CircularBuffer 实现吗？我需要“非线程安全”和“线程安全”版本。我期望以下操作：

*   创建时提供缓冲区大小的能力
*   添加元素
*   迭代元素
*   迭代时移除元素
*   可能删除元素

我希望实现在速度和使用的内存、平均和最差时间等方面得到高度优化。

我希望“非线程安全”的实现非常快。我希望“线程安全”实现速度很快，可能使用“无锁代码”进行同步，如果速度需要，可以有一些限制。

如果缓冲区太小而无法存储新（添加）元素，则可以静默覆盖现有元素或引发异常。

我应该使用disruptor.net 吗？

添加链接到一个很好的示例[Disruptor.NET 示例](https://stackoverflow.com/questions/8860684/disruptor-net-example)

* * *

## 回答 #1

> 赞同：-8
> 
> 时间：2012-11-07T18:40:00.253

不是线程安全的：

[System.Collections.Generic.Queue](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)

线程安全：

[System.Collections.Concurrent.ConcurrentQueue](http://msdn.microsoft.com/en-us/library/dd267265.aspx)

或者

[System.Collections.Concurrent.BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx) （内部默认使用并发队列）

[尽管从技术上讲，您确实不应该使用“线程安全”一词。](http://blogs.msdn.com/b/ericlippert/archive/2009/10/19/what-is-this-thing-you-call-thread-safe.aspx) 简直太模棱两可了。第一个不是为多个线程同时使用而设计的，其余的都是。

# linux - bash 脚本中的错误替换错误

> ID：13275983
> 
> 赞同：4
> 
> 时间：2012-11-07T18:36:33.577
> 
> 标签：linux, bash, shell, syntax-error

我已经尝试了很多，但无法从中得到解决方案。我有一个简单的脚本：

```
#! /bin/sh
o="12345"
a=o
b=${!a}
echo ${a}
echo ${b} 
```

执行时像

```
$ . scp.sh 
```

它产生正确的输出，没有错误，但执行时如下：

```
$ ./scp.sh 
```

它产生

> ./scp.sh: 4: ./scp.sh: 替换错误

任何想法为什么会发生这种情况。

* * *

有人建议我使用 bash 模式，它工作正常。但是当我通过 Python 执行这个相同的脚本（将脚本头更改为 bash）时，我得到了同样的错误。

我从 Python 中将其称为：

```
import os
os.system(". ./scp.sh") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-07T18:41:01.873

尝试使用：

```
#!/bin/bash 
```

代替

```
#! /bin/sh 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-07T18:43:28.093

此错误的原因是在这些情况下使用了两个不同的 shell。

`$ . scp.sh`command 将使用当前的 shell ( `bash`) 来执行脚本（不分叉子 shell）。

`$ ./scp.sh`命令将使用脚本的 hashbang 行中指定的 shell。在您的情况下，它是`sh`or `dash`。

最简单的方法是将第一行替换为`#!/bin/bash`（或任何路径`bash`）。

# java - 将 Java 向量写入分隔文件

> ID：13275990
> 
> 赞同：0
> 
> 时间：2012-11-07T18:36:57.257
> 
> 标签：java, oracle, plsql

我正在连接到 Oracle 数据库并查询多个表。我当前的代码创建连接并调用包含查询的 PL/SQL 函数。获得结果集后，我将其添加到 Vector（因为我不确定每个查询将产生的记录数）。

我的问题是我不确定如何从 Vector 中写入分隔文件。我想一旦我将我的结果集添加到它，它只是一个巨大的字符串。我需要能够从查询中接收每个字段并在它们之间定界，并保持行分开。

这是我的代码：

```
 public static void main(String[] args) throws SQLException {

    // instantiate db connection
    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
    }catch (Exception e) {
        throw new SQLException("Oracle JDBC is not available", e);
    }

    // define connection string and parameters
    String url = "jdbc:oracle:thin:@//host:port/sid";
    Connection conn = DriverManager.getConnection(url, "USERNAME","PASSWORD");

    CallableStatement stmt = conn.prepareCall("{? = CALL <functionname>(?)}");

    // get result set and add to a Vector
    ResultSet rs = stmt.executeQuery();
    Vector<String> results = new Vector();
    while ( rs.next() ){
        results.add(rs.getString(1));
    }

    // close result set, sql statement, and connection
    rs.close();
    stmt.close();
    conn.close();

    // write Vector to output file,
    // where the file name format is MMddyyyy.txt
    try {

    Calendar cal = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat("MMddyyyy");
    String dateStr = sdf.format(cal.getTime());

    FileWriter fwrite = new FileWriter(dateStr + ".txt");
    BufferedWriter out = new BufferedWriter(fwrite);

    for(int i = 0; i < results.size(); i++)
    {
        String temp = results.elementAt(i);
        out.write(temp);
    }

    out.close();

}catch (Exception e) {
    System.err.println("Error: " + e.getMessage());
}
} 
```

我只是不确定如何从数据库中获取信息并将其写入分隔文件。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:52:08.663

如果您不确定每个 中的字段数`rows`，那么可能是不可能的。因为要从数据库中获取所有字段值，您需要知道每个字段的类型以及字段数。

但是，我将发布一个示例，说明当您有固定数量的字段时，您知道。

假设你`4 columns`每行都有。现在要以表格形式显示它，您必须使用`List of List`.

如果您正在使用`Vector`，请使用`Vector of List`.

这是一个示例`List of List`： -

```
List<List<String>> results = new ArrayList<List<String>>();

while ( rs.next() ) {
    List<String> tempList = new ArrayList<String>();
    tempList.add(rs.getString(1));
    tempList.add(rs.getString(2));
    tempList.add(rs.getString(3));
    tempList.add(rs.getString(4));

    results.add(tempList);
} 
```

然后打印它，使用这个循环： -

```
for (List<String> innerList: results) {
    for (String fields: innerList) {
        System.out.print(fields + "\t");
    }
    System.out.println();
} 
```

您可以将其以相同的形式写入您的`BufferedWriter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T18:43:41.247

使用`results.toString()`并截断`[]`结果字符串中的大括号（），将所有值以逗号分隔一次写入文件中。

```
 //toString() returns comma separated string values enclosed in []
    String resultString = results.toString();

    //truncate leading '[' and termincating ']'
    resultString = resultString.substring(1, resultString.length()-1);

    //if comma is not your delimiter then use String.replaceAll() 
    //to replace `,` with your delimiter

    //write comma separated elements all at once
    out.write(resultString); 
```

因此，如果您在Vector 中添加了 , 则`str1`具有值 as ，您可以使用.`str2``results``resultString``str1, str2``BufferedWriter out`

也请`Generics`在初始化的两侧使用：

```
 Vector<String> results = new Vector<String>(); 
```