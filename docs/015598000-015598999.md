# StackOverflow 问答 15598000-15598999

# objective-c - 如何将 UITextView 中的第一行文本保存为 UIView 的标题？

> ID：15598008
> 
> 赞同：3
> 
> 时间：2013-03-24T11:43:04.587
> 
> 标签：objective-c, cocoa-touch, ios6, nsstring, uitextview

我正在寻找类似于 Notes 应用程序的行为。它会自动将第一行文本保存为视图名称。我下面的代码将按 Return 时输入的文本保存为 UIView 的标题。我遇到的问题是如果我在输入任何文本之前按回车，然后输入一些文本并再次按回车，它不会保存它。

```
-(BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{

    NSMutableString *newString = [NSMutableString stringWithString:textView.text];
    [newString replaceCharactersInRange:range withString:text];
    NSRange newLineRange = [newString rangeOfCharacterFromSet:[NSCharacterSet newlineCharacterSet]];

    if(newLineRange.length > 0)
    {
        self.title = [newString substringToIndex:newLineRange.location];
    }
    else {
        self.title = textView.text;
    }

    return YES;

} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:48:28.117

您的代码的问题在于它找到了第一个换行符，并使用从零到其位置的子字符串作为标题。在寻找换行符之前修剪字符串应该可以解决这个问题：第一个非空行（如果有的话）将被选作标题：

```
[newString replaceCharactersInRange:range withString:text];
NSString *trimmed = [newString stringByTrimmingCharactersInSet:[NSCharacterSet newlineCharacterSet]];
NSRange newLineRange = [trimmed rangeOfCharacterFromSet:[NSCharacterSet newlineCharacterSet]];
if(newLineRange.length > 0)
{
    self.title = [trimmed substringToIndex:newLineRange.location];
}
else {
    self.title = trimmed;
} 
```

# python - 子进程调用因来自 Web 表单输入的 unicode 数据而失败 - 与来自其他地方的相同输入一起工作

> ID：15598010
> 
> 赞同：2
> 
> 时间：2013-03-24T11:43:09.303
> 
> 标签：python, unicode, cgi, subprocess, lighttpd

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:13:52.507

你想避免`echo`在这种情况下使用；而是将您的输入直接写入对象的`stdin`管道。`Popen()`

请确保您的环境设置为正确的语言环境，以便`grep`知道将输入解析为 UTF-8：

```
env = dict(os.environ)
env['LC_ALL'] = 'en_US.UTF-8'
p = subprocess.Popen(['grep', '-E', mainconf["MSG_FORMAT"][msgtype,fieldname]], stdin=subprocess.PIPE, env=env)
p.communicate(datarecord[fieldname])
if p.returncode:
     return fieldname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T05:09:09.217

只是为了补充 Martijn Pieters 的答案，他建议的解决方案在输入字符串为空的情况下将失败（与原始函数不同，即使正则表达式允许，grep 也将无法匹配空字符串）。因此，原始功能的完整实现将是：

```
if (msgtype,fieldname) in mainconf["MSG_FORMAT"]:
        if not datarecord[fieldname]:
            if not regex.search(mainconf["MSG_FORMAT"][msgtype,fieldname],datarecord[fieldname],regex.UNICODE):
                return fieldname
        else:               
            curenv = os.environ
            curenv['LC_ALL']="en_US.UTF-8"
            check = subprocess.Popen(['grep','-E', mainconf["MSG_FORMAT"][msgtype,fieldname]], stdin=subprocess.PIPE, env=curenv, stderr=subprocess.STDOUT,stdout=subprocess.PIPE)
            check.communicate (datarecord[fieldname]) 
            if check.returncode:
                return fieldname
return None 
```

这可以作为`regex`匹配在空字符串上正常工作。

# c# - Issue creating style to be set as the GroupStyle of some ComboBoxes

> ID：15598012
> 
> 赞同：1
> 
> 时间：2013-03-24T11:43:40.930
> 
> 标签：c#, .net, wpf, xaml, controltemplate

I'm trying to implement the [following code](http://www.jarloo.com/wpf-combobox-with-groupings/), with the difference that I would like this to apply to a style so that I can set it for any `ComboBox` that I like (i.e. I am creating a number of ComboBoxes dynamically from the code behind due to specific unchangeable requirements, and would like to add `GroupStyles` to each of them).

I am relatively new to `WPF` and `XAML`, so I thought of doing so through a `Style` and specifying the `GroupStyles` in the `ControlTemplate`, and then just applying the style to the respective `ComboBoxes`. This is what I've tried so far, but the code will not compile (mainly due to the `<ComboBox.GroupStyle>` part).

```
<Style x:Name="valuesComboStyle" TargetType="ComboBox">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <ComboBox.GroupStyle>
                                <GroupStyle>
                                    <GroupStyle.HeaderTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Name}"/>
                                        </DataTemplate>
                                    </GroupStyle.HeaderTemplate>
                                </GroupStyle>
                            </ComboBox.GroupStyle>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:47:39.807

定义`DataTemple`资源中的某处。`Combobox`并根据您的需要使用它。

这是代码：

```
<Grid>
    <Grid.Resources>
        <DataTemplate x:Key="groupStyle">
            <TextBlock FontWeight="Bold" Text="{Binding Name}"/>
        </DataTemplate>
        <Style TargetType="{x:Type ComboBoxItem}"  x:Key="comboBoxItemStyle">
            <Setter Property="Template" >
                <Setter.Value>
                    <ControlTemplate>
                        <Label Background="Red" Content="{Binding Item}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Grid.Resources>
    <ComboBox Height="27" Width="195" DisplayMemberPath="Item" Name="cboGroup"
              ItemContainerStyle="{StaticResource comboBoxItemStyle}">
        <ComboBox.GroupStyle>
            <GroupStyle HeaderTemplate="{StaticResource groupStyle}"/>
        </ComboBox.GroupStyle>
    </ComboBox>
</Grid> 
```

**编辑：**我创建了一个新的组合框并设置了一些项目并设置了您正在寻找的样式。（我更新了您链接中的代码）

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;

        ComboBox comboBox1 = new ComboBox();
        comboBox1.Height = 23;
        comboBox1.Width = 200;

        GroupStyle style = new GroupStyle();
        style.HeaderTemplate = (DataTemplate)this.FindResource("groupStyle");
        comboBox1.GroupStyle.Add(style);
        comboBox1.DisplayMemberPath = "Item";
        ObservableCollection<CategoryItem<string>> items = new ObservableCollection<CategoryItem<string>>();

        items.Add(new CategoryItem<string> { Category = "Warm Colors", Item = "Orange" });
        items.Add(new CategoryItem<string> { Category = "Warm Colors", Item = "Red" });
        items.Add(new CategoryItem<string> { Category = "Warm Colors", Item = "Pink" });
        items.Add(new CategoryItem<string> { Category = "Cool Colors", Item = "Blue" });
        items.Add(new CategoryItem<string> { Category = "Cool Colors", Item = "Purple" });
        items.Add(new CategoryItem<string> { Category = "Cool Colors", Item = "Green" });

        CollectionViewSource cvs = new CollectionViewSource();
        cvs.GroupDescriptions.Add(new PropertyGroupDescription("Category"));
        cvs.Source = items;

        Binding b = new Binding();
        b.Source = cvs;
        BindingOperations.SetBinding(
           comboBox1, ComboBox.ItemsSourceProperty, b);

        myGrid.Children.Add(comboBox1);
    }
}

public class CategoryItem<T>
{
    public T Item { get; set; }
    public string Category { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:59:44.343

`GroupStyle`属性位于组合框上，因此您需要单独设置它而不是在模板中 -

```
 <Style TargetType="ComboBox">
            <Setter Property="GroupStyle">
                <Setter.Value>
                    <GroupStyle>
                        <GroupStyle.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Name}"/>
                            </DataTemplate>
                        </GroupStyle.HeaderTemplate>
                    </GroupStyle>
                </Setter.Value>
            </Setter>
        </Style> 
```

**编辑**

好吧，您无法设置该`GroupStyle`属性，`Style`因为它没有任何关联的设置器。

[但是，您可以使用此处](https://stackoverflow.com/questions/12022529/unable-to-set-the-groupstyle-for-a-listbox-via-style)`Add()`说明的方法从代码隐藏中添加它，或者您必须创建自定义说明[此处](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/73ac639f-afdc-4582-805d-9b3bc8a33fe5)。`Attached property`

背后的代码 -

```
 GroupStyle g = new GroupStyle();

        //Create header template
        FrameworkElementFactory control = new
                                  FrameworkElementFactory(typeof(TextBlock));
        Binding binding = new Binding();
        control.SetBinding(TextBlock.TextProperty, binding);
        binding.Path = new PropertyPath("Name");
        DataTemplate dataTemplate = new DataTemplate();
        dataTemplate.VisualTree = control;

        g.HeaderTemplate = dataTemplate;
        ComboBox cmb = new ComboBox();
        cmb.GroupStyle.Add(g); 
```

# java - Adding items to a ListView from a Spinner doesn't work

> ID：15598013
> 
> 赞同：0
> 
> 时间：2013-03-24T11:44:03.940
> 
> 标签：java, android, android-listview, android-spinner

I have two ArrayLists in my app; one containing a list of all stations (`AllStations`) and one containing a list of stations that the user has select (`MyStations`). The user will select the stations from the spinner, which contains all items from the AllStations arraylist, and it will add them the `myStations` arraylist. There is a list view which displays the data from the `myStations` arrayList.

At the moment when a user selects a station to add to the `mystations` arraylist, it adds it to "myStations" but the listview does not refresh. I have tried `adapter.notifyDataSetChanged()` I have spend a couple of day googling etc. and haven't found any reason why it's not refreshing. Can anyone help me?

```
public class MyStations extends Activity{

    ListView personalStations;
    Spinner spinner;
    ArrayList<String>AllStations = new ArrayList<String>();
    ArrayList<String>MyStations = new ArrayList<String>();
    ArrayAdapter<String> StationNames;
    ArrayAdapter<String> myStationNames;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_stations);
        assignStations();
        spinner = (Spinner) findViewById(R.id.spinner1);
        StationNames = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, AllStations);
        spinner.setAdapter(StationNames);
        spinner.setOnItemSelectedListener(new OnItemSelectedListener()
        {
            public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3)
            {
                String selectedStation = spinner.getSelectedItem().toString();
                MyStations.add(selectedStation);
                myStationNames.notifyDataSetChanged();
                TextView txt1 = (TextView) findViewById(R.id.textView1);
                int size = MyStations.size();
                String sizes= String.valueOf(size);
                txt1.setText(sizes);

            }
            public void onNothingSelected(AdapterView<?> arg0)
            {
            // TODO Auto-generated method stub                 
            }
        });
        personalStations = (ListView) findViewById(R.id.myStnList);
        myStationNames = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, MyStations);
        personalStations.setAdapter(new ArrayAdapter<String>(MyStations.this, android.R.layout.simple_list_item_1, MyStations));
    }

    public void assignStations(){
        ImportData stationData = new ImportData();
        stationData.importStations();
        AllStations = stationData.getStationNames();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:50:41.753

你写：

```
personalStations = (ListView) findViewById(R.id.myStnList);
myStationNames = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, MyStations);
personalStations.setAdapter(new ArrayAdapter<String>(MyStations.this, android.R.layout.simple_list_item_1, MyStations)); 
```

从我看到的情况来看，您创建了一个适配器并将其分配给`myStationsNames`但`ListView`您设置了一个新的`ArrayAdapter`. `notifyDataSetChanged()`在这种情况下，调用`myStationsNames`不会做任何事情，因为它没有绑定到小部件。你确定你不想写：

```
personalStations = (ListView) findViewById(R.id.myStnList);
myStationNames = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, MyStations);
personalStations.setAdapter(myStationsNames); 
```

# sql - Sqlite: SELECT * BUT id FROM Table

> ID：15598014
> 
> 赞同：20
> 
> 时间：2013-03-24T11:44:07.147
> 
> 标签：sql, sqlite, select

I have many columns in a table and wanted to `SELECT * FROM Table` except for one column (ex: location) without having to list all the columns I want to use.

`SELECT * EXCEPT id FROM Table`???

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T11:50:57.017

绝对没有。

但这里有一个解决方法。创建一个`VIEW`表，例如

```
CREATE VIEW ViewName
AS
    SELECT col1, col2, col3, .... -- don't select the column name you want to hide
    FROM tableName; 
```

一旦`VIEW`创建，您现在可以调用它，

```
SELECT * FROM ViewName 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T11:46:18.113

不，你不能那样做。

您列出您需要的列，或者您接受结果集包含的列比您需要的多一列。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-07-20T20:02:58.553

*sqlite*是一个嵌入式 DBMS，预计某些功能可以用宿主语言实现。例如，存储过程被排除在外，因为所有这些高级逻辑和流结构都将存在于宿主语言中。

如果有人在 SQL 之外思考，答案是“是”：使用宿主语言迭代表的列并构建一个 select 语句以获得所需的模式。请参阅[如何获取 SQLite 数据库表中的列列表？](https://stackoverflow.com/questions/604939/how-can-i-get-the-list-of-a-columns-in-a-table-for-a-sqlite-database)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-10-08T07:05:30.903

一种粗略的方式，但出于任何原因需要时：

我们首先创建查询文本以创建视图的两步解决方案：

```
SELECT "CREATE TEMP VIEW my_view_1 AS SELECT " ||  (
SELECT 
    group_concat(name, ', ') 
FROM 
    pragma_table_info('my_table') 
WHERE 
    name != 'id') || 
" FROM my_table"; 
```

然后执行结果以创建视图。

应该给出如下内容：

```
CREATE TEMP VIEW test1 AS SELECT all, but, id, ... FROM my_table; 
```

一行便于复制：

*`SELECT "CREATE TEMP VIEW my_view_1 AS SELECT " || (SELECT group_concat(name, ', ') FROM pragma_table_info('my_table') WHERE name != 'id') || " FROM my_table";`*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-04T14:48:41.883

另一种方法：导出到 tsv 并使用`cut -f 2-`：

```
sqlite3 -header my.db 'select * from mytable' | tr '|' '\t' | cut -f 2- > all_but_id.tsv 
```

# jquery - How to set style to this element

> ID：15598016
> 
> 赞同：1
> 
> 时间：2013-03-24T11:44:10.853
> 
> 标签：jquery

I have this script to set box-shadow if element is hovered. It should also remove the parent(s) style at the same time:

```
 var on = {
    boxShadow : "inset 0px 0px 0px 1px  #f80"
  };

  var out = {
    boxShadow : "inset 0px 0px 0px 0px  #f80"
  };

$('body *').hover(function(e) {
  $(this).css(out);
  $(this).css(on); 
  e.stopPropagation();
}, function() {
  $(this).parent().css(out);
  $(this).css(out);
}); 
```

If you look at this example [JsFiddle](http://jsfiddle.net/mtHyF/14/) you will see that if you hover the span its parent (p) will also gain the style. What can I do to style only the element that is being hovered, so not its child nor its parent? Do I have to use each() ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:03:46.413

Got it working thanks to God:

[JsFiddle](http://jsfiddle.net/mtHyF/17/)

```
 var on = { boxShadow : "inset 0px 0px 0px 1px  #f80" };

  var out = { boxShadow : "inset 0px 0px 0px 0px  #f80" };

$('body *').hover(function(e) {
    $(this).parents().css(out);
  $(this).css(on); 
  e.stopPropagation();
}, function() {
  $(this).parent().css(out);
  $(this).css(out);
    $(this).parent().css(on);
}); 
```

You see @adeneo there is no problem:)

# c++ - Returning a literal by reference and inline

> ID：15598023
> 
> 赞同：3
> 
> 时间：2013-03-24T11:45:13.573
> 
> 标签：c++, inline, pass-by-reference

Supposedly, returning a literal *by reference* in C++ is bad since the literal goes out of scope then leaving the function:

```
const char &ToBoolean(bool val) const 
{ 
    return val ? (const char &)"1" : (const char &)"0"; 
} 
```

, but when using `inline` I'm guessing this should be ok since the literal's scope is now in the calling function, or no? Example:

```
inline const char &ToBoolean(bool val) const 
{ 
    return val ? (const char &)"1" : (const char &)"0"; 
} 
```

This is how I plan to use it:

```
void testToBoolean1()
{
     bool val = true;
     const char *valStr = ToBoolean(val);
     int result = strcmp("1", valStr);
     CPPUNIT_ASSERT_EQUAL(0, result);
} 
```

**Update.**

If static strings are ok, then how about this?

```
inline const char *ToBoolean(bool val) const { 
    char boolStr[6];
    if (val) strcpy(boolStr, "true");
    else strcpy(boolStr, "false");
    return &boolStr;
} 
```

This compiles and runs fine using VC++ 2012.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T11:52:26.803

字符串文字与局部变量不同，它们在整个程序生命周期内保持活动状态。它们具有静态持续时间生命周期。您可以安全地返回指向字符串文字的指针。

**C++11 标准§2.14.5.8：**

> 普通字符串文字和 UTF-8 字符串文字也称为窄字符串文字。窄字符串文字的类型为“n const char 数组”，其中 n 是字符串的大小，定义如下，并且具有静态存储持续时间 (3.7)。

**3.7.1 静态存储时间**
**第 1 段：**

> ...这些实体的存储应持续整个程序（3.6.2、3.6.3）

* * *

为了清楚起见，字符串文字“1”的类型是`char (*)[2]`. 这是因为，“1”的类型是 char[2]，指向 2 个字符的数组的指针被声明为`char (*)[2]`，所以如果你需要获取它的地址。当返回一个引用时，你的隐式 c 样式转换会演变为 a `reinterpret_cast`，它基本上可以将任何类型的指针转​​换为任何其他类型，而与正确性无关。在您的情况下，它带给您的是未定义的行为。如上所述，您可以安全地返回一个指向字符串文字的指针。您需要将返回类型修改为：

```
char const* ToBoolean(bool val) const; 
```

* * *

**回答更新的问题：**

您更新的解决方案只是将字符串文字复制到函数本地的数组中。该数组不存在超出函数范围。所以不，这不好。它可能看起来有效，但它会调用未定义的行为。“true”和“false”本身具有静态持续时间生命周期，但您没有返回指向它们的指针，而是将它们复制到本地数组并返回指向本地数组的指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T11:53:06.527

*char const**与*char const&*不同（前者是*指向 char*的指针，后者是对单个*char*的引用。字符串常量是静态分配的，因此从函数返回指向它们的指针是安全的。

```
inline char const* ToBoolean(bool val) const 
{ 
    return val ? "1" : "0"; 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T11:58:59.543

`"1"`是类型为“array of 2 `const` `char`”的字符串文字。当您使用 进行转换时`(const char &)"1"`，这会导致`reinterpret_cast<const char&>("1")`最终给您未定义的行为。

也许你的意思是：

```
inline const char &ToBoolean(bool val)
{ 
    return val ? '1' : '0'; 
} 
```

注意单引号。这些是字符文字，而不是字符串文字。

但是，由于字符文字是纯右值，因此绑定到`const char&`结果会导致使用相应值生成临时对象。然后引用绑定到*该*临时对象。但是，该临时对象将在完整表达式（语句）的末尾被销毁，`return`并且引用将悬空。

不，`inline`不会影响变量的范围或对象的生命周期。那将是愚蠢的，因为它只是向编译器提示要做什么。这意味着编译器可以根据需要选择更改代码的含义。

因此，请尝试返回指向字符串文字的指针：

```
inline const char* ToBoolean(bool val)
{ 
    return val ? "1" : "0"; 
} 
```

字符串文字具有静态存储持续时间，这意味着它们在程序的持续时间内存在。您可以返回指向字符串文字中第一个元素的指针，并确保它指向的对象始终有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T11:53:59.610

```
inline const char &ToBoolean(bool val) const 
{ 
    return val ? (const char &)"1" : (const char &)"0"; 
} 
```

你返回一个字符串 a `char`? - 另外，如果您真的必须返回 a`const char *`然后明确说明它。::

```
inline const char *ToBoolean(bool val) const 
{ 
    return val ? "1" : "0"; 
} 
```

# oop - Using Interface Confusing

> ID：15598026
> 
> 赞同：0
> 
> 时间：2013-03-24T11:45:20.670
> 
> 标签：oop, interface, dependency-injection, abstraction

I am looking at a framework that put different interfaces to each services such as:

```
public interface ICategoryService
{
    Category GetCategoryById(int categoryId);
    void InsertCategory(Category category);
    void UpdateCategory(Category category);
    void DeleteCategory(Category category);

    IPagedList<Category> GetAllCategories(string categoryName = "",
        int pageIndex = 0, int pageSize = int.MaxValue, bool showHidden = false);

    ...
}

public class CategoryService : ICategoryService
{
    public virtual void DeleteCategory(Category category)
    {
        if (category == null)
            throw new ArgumentNullException("category");

        category.Deleted = true;
        UpdateCategory(category);
    }

    public virtual void InsertCategory(Category category)
    {
        if (category == null)
            throw new ArgumentNullException("category");

        _categoryRepository.Insert(category);
    }

    public virtual void UpdateCategory(Category category)
    {
        if (category == null)
            throw new ArgumentNullException("category");

        var parentCategory = GetCategoryById(category.ParentCategoryId);
        while (parentCategory != null)
        {
            if (category.Id == parentCategory.Id)
            {
                category.ParentCategoryId = 0;
                break;
            }
            parentCategory = GetCategoryById(parentCategory.ParentCategoryId);
        }

        _categoryRepository.Update(category);

    }

    ...
} 
```

Each entity has one repository that does CRUD operations and also there are some Services that is using these repositories to do some business operations. They also use and IOC container to resolve these dependencies.

When I looked at the services, they have some similar methods and same implementations. So why they dont use an abstract base service and inherit from it to do these similar operations ?

```
public abstract class BaseService<T> where T : BaseEntity
{
    void Insert(T t)
    {
         //do some implementation
    }

    void Update(T t)
    {
         //do some implementation
    }

    ...
} 
```

While we take advantage of using Interface for testing and abstraction purpose, dont we put too much effort for it ? Is there an better way to implement this approach ?

# mysql - Finding whether a row exists in mysql or not using SELECT EXISTS

> ID：15598029
> 
> 赞同：0
> 
> 时间：2013-03-24T11:45:38.113
> 
> 标签：mysql, sql, select, sql-update, sql-insert

If there exists a row in the table FINES with the required value then I just want to update the fields Else I want to add a new row in the table.

if (mysql_query("SELECT EXISTS(SELECT * FROM fines WHERE SId='$sid' AND Semester='$sem')")>=1)

```
 mysql_query("UPDATE fines SET fines.TFine=fines.TFine+'$fine' WHERE SId='$sid' AND Semester='$sem'"); 
```

else

```
 mysql_query("INSERT INTO fines(SId, Semester, TFine, Flag) VAlUES('$sid','$sem', '$fine', 0)"); 
```

But the if condition is not working!! Please help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:49:31.090

`INSERT ... ON DUPLICATE KEY UPDATE`如果记录已经存在，则使用 MySQL更新记录，如果不存在则插入。

您需要做的第一件事是`unique`在一个或多个列上指定一个约束，

```
ALTER TABLE fines ADD CONSTRAINT tb_uq UNIQUE (SId, Semester) 
```

一旦你执行了语句，你可以简单地创建一个这样的语句，

```
INSERT INTO fines(SId, Semester, TFine, Flag) 
VALUES ('$sid','$sem', '$fine', 0)
ON DUPLICATE KEY UPDATE TFine = TFine +  '$fine'; 
```

*   [INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

# ruby - Ruby unpack array to block

> ID：15598031
> 
> 赞同：14
> 
> 时间：2013-03-24T11:46:02.723
> 
> 标签：ruby, arrays, multidimensional-array

```
settings = [ ['127.0.0.1', 80], ['0.0.0.0', 443] ] 
```

How can I do:

```
settings.each do |ip, port|  
    ...
end 
```

Instead of:

```
settings.each do |config|  
    ip, port = *config
    ...
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T12:21:41.637

您的第一个示例有效，因为 Ruby 将解构块参数。有关在 ruby​​ 中解构的更多信息，请参阅这篇[文章](http://tony.pitluga.com/2011/08/08/destructuring-with-ruby.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T06:09:33.370

您正在寻找的方法是 Array#map

```
settings = [ ['127.0.0.1', 80], ['0.0.0.0', 443] ]
settings.map { |ip, port| puts "IP: #{ip} PORT: #{port}"  } 
```

这将返回
#// => IP: 127.0.0.1 PORT: 80
#// => IP: 0.0.0.0 PORT: 443

# css - CSS background preloading

> ID：15598032
> 
> 赞同：0
> 
> 时间：2013-03-24T11:46:10.880
> 
> 标签：css, background, preload

I have a hover element, when I mouseover it, the background image changes. This is fine, but it loads the image just when I mouseover it, not before, and I see blank box for a short while. How do I preload the images?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:54:10.930

如果是，`background-image`那么您可以使用以下技术之一：

**技术#1**

将图像加载到元素的常规状态，仅将其与背景位置移开。然后移动背景位置以在悬停时显示它。

```
#grass { background: url(images/grass.png) no-repeat -9999px -9999px; }
#grass:hover { background-position: bottom left; } 
```

**技术#2**

如果有问题的元素已经应用了背景图像并且您需要更改该图像，则上述方法将不起作用。通常你会在这里选择一个精灵（一个组合的背景图像），然后移动背景位置。但如果这不可能，试试这个。将背景图像应用到另一个已在使用但没有背景图像的页面元素。

```
#random-unsuspecting-element { background: url(images/grass.png) no-repeat -9999px -9999px; }
#grass:hover { background: url(images/grass.png) no-repeat; } 
```

资料来源：

[Fatih Hayrioğlu 回答的重复问题](https://stackoverflow.com/questions/1373142/preloading-css-background-images)

[CSS 技巧](http://css-tricks.com/snippets/css/css-only-image-preloading/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T11:47:54.710

在你的身体开始，加载隐藏的图像：

```
<body>
    <img src="myimage.png" style="display: none;" />
</body> 
```

当您调用它时，浏览器将使用它的缓存来捕获相同的图像作为背景加载，因此不会延迟。

# android-emulator - Qemu 中的 ARM NEON 支持

> ID：15598035
> 
> 赞同：2
> 
> 时间：2013-03-24T11:46:17.440
> 
> 标签：android-emulator, arm, qemu, neon

Android SDK附带的Android模拟器支持NEON指令集模拟（我自己测试过）。它基于 QEMU。

我最近尝试使用 QEMU（模拟 Cortex-A9）创建一个自定义 VM，并安装了一些 ARMEL Linux 发行版。

但是，安装后`/proc/cpuinfo`没有显示`neon`在 CPU 功能中。Android 模拟器实际上有什么技巧，所以 NEON 似乎在他们的虚拟机中可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:28:24.567

These values are stored in `elf_hwcap` (see [kernel/setup.c](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/arch/arm/kernel/setup.c)). The [vfp/vfpmodule.c](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/arch/arm/vfp/vfpmodule.c) detects `NEON` support and sets a bit in `elf_hwcap`. Specifically via this code,

```
 /*
             * Check for the presence of the Advanced SIMD
             * load/store instructions, integer and single
             * precision floating point operations. Only check
             * for NEON if the hardware has the MVFR registers.
             */
            if ((read_cpuid_id() & 0x000f0000) == 0x000f0000) {
#ifdef CONFIG_NEON
                    if ((fmrx(MVFR1) & 0x000fff00) == 0x00011100)
                            elf_hwcap |= HWCAP_NEON;
#endif
#ifdef CONFIG_VFPv3
                    if ((fmrx(MVFR1) & 0xf0000000) == 0x10000000)
                            elf_hwcap |= HWCAP_VFPv4;
#endif
            } 
```

The `read_cpuid_id()` is a macro for the co-processor CP15 which gets a *cpu id* bit map. The `fmrx()` also uses another VFP co-processor register. So the emulator you are using is not responding properly to `MRC` instructions from either co-processor register; or maybe it does not support `NEON` emulation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T06:21:45.697

我面临着同样的问题。您必须模拟支持霓虹灯的硬件。bealexm 有支持。[在这里](http://www.cnx-software.com/2011/09/26/beagleboard-emulator-in-ubuntu-with-qemu/)检查

# asp.net - ASP.NET MVC - 从“未连接”类访问会话信息

> ID：15598039
> 
> 赞同：0
> 
> 时间：2013-03-24T11:46:41.657
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我正在使用[XSockets](http://xsockets.net)。现在，从 xsocket 控制器内部，我需要访问我的用户数据。我试过这样做：

`public class SocialsController : XSocketController, Controller`

但这是不允许的。有没有办法让我访问 SocialsController 中的所有会话数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:27:01.433

您不能在 XSockets 中使用 ASP.NET 会话，因为服务器在 IIS 之外运行。将来您可能可以，但不能在当前版本中。

您在 XSockets 中创建的每个连接都有自己连接的控制器实例。所以我们在控制器上有状态，而常规的 HTTP/ASP.NET MVC 没有状态。这就是他们需要会话的原因。

那么，如果您在 XSockets 中刷新/更改页面怎么办？由于控制器将“死亡”，因此您将失去状态......但是，XSockets 拥有自己的 SessionStorage，因此您可以将数据存储在服务器上以供特定客户端使用。可以从 JavaScript 和 C# 访问此 SessionStorage。

**C#** 示例存储一个 Person 对象，但它可以是任何东西

```
//Save in storage (will be there even if you disconnect and then reconnect)
this.StorageSet("me",new Person{Name="Uffe", Age=35});
//Get from storage (casting to correct type).
var p = (Person)this.StorageGet("me"); 
```

**JavaScript**

//设置，但检查[http://xfiddle.net/XFiddle/](http://xfiddle.net/XFiddle/)获取、设置、删除、getall

```
var myStorageObject = { Key: 'foo', Value: $("#storeValue").val() };
ws.trigger(XSockets.Events.storage.set, myStorageObject); 
```

问候乌夫

# android - 在自定义视图中注册到本地广播

> ID：15598040
> 
> 赞同：6
> 
> 时间：2013-03-24T11:46:44.470
> 
> 标签：android, view, broadcastreceiver

我创建了一个自定义视图，可以放置在应用程序的不同位置。我无法避免在视图中使用 BroadcastReceiver 从应用程序的其余部分获取消息。

我读过它不推荐（[在我自己的视图中我应该在哪里取消注册接收器？](https://stackoverflow.com/questions/15063039/where-should-i-unregisterreceiver-in-my-own-view)），但如果我选择使用它，是否有地方从广播管理器中取消注册视图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T14:05:10.127

我建议您使用 LocalBroadcastManager。它就像一个广播接收器，其意图只能在您的应用程序内部看到。

```
private BroadcastReceiver receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        // your code here
    }
};

@Override
protected void onPause() {
    LocalBroadcastManager.getInstance(this).unregisterReceiver(receiver);
    super.onPause();
}

@Override
protected void onResume() {
    LocalBroadcastManager lbm = LocalBroadcastManager.getInstance(this);
    IntentFilter filter = new IntentFilter();
    filter.addAction(MyClass.MY_ACTION);
    lbm.registerReceiver(receiver, filter);
    super.onResume();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-15T15:22:47.490

正如@vggonz 所说，视图没有像活动那样明确的生命周期，但是，如果您在中注册广播接收器`onAttachedToWindow()`并取消注册`onDetachedFromWindow()`，它会按预期工作。

```
public class MyView extends View {

    private BroadcastReceiver receiver;

    public MyView(Context context) {
        super(context);
    }

    @Override
    protected void onAttachedToWindow() {
        super.onAttachedToWindow();
        IntentFilter filter = new IntentFilter();
        filter.addAction("SOME_ACTION");
        filter.addAction("SOME_OTHER_ACTION");
        receiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                //do something based on the intent's action
            }
        };
        getContext().registerReceiver(receiver, filter);
    }

    @Override
    protected void onDetachedFromWindow() {
        super.onDetachedFromWindow();
        if (receiver != null) {
            getContext().unregisterReceiver(receiver);
            receiver = null;
        }
    }
} 
```

# cpu - 上下文切换线程等待

> ID：15598041
> 
> 赞同：2
> 
> 时间：2013-03-24T11:46:45.563
> 
> 标签：cpu

我一直在寻找这个问题的答案一天，但找不到一个直截了当的答案。我正在阅读有关上下文切换等待队列之类的内容，确实对所有内容都有很好的掌握。并且在阅读一篇文章时，有人写道，当发生护航情况时，将会有很多上下文切换。因此，让我直截了当地假设一个线程在等待队列中等待互斥锁解锁，cpu 是否不断地上下文切换到该等待线程以查看其等待的互斥锁是否已解锁。如果这是真的，则意味着每次线程等待互斥锁解锁或条件变量通知时，cpu 上下文都会切换到这些线程进行检查。我对么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:53:56.913

我假设我们正在谈论操作系统级别的互斥锁（没有用户模式旋转）。

操作系统将永久取消调度等待线程，直到互斥锁变得空闲。只有当正在等待的互斥锁被解锁时，操作系统才会调度一个或多个等待线程以恢复执行。

这意味着没有等待线程引起的开销。操作系统中没有忙循环旋转（“切换”）。之所以需要这样做，是因为操作系统只是在互斥锁可用时解除对服务员的阻塞。

想象一下，所有线程都在等待一个永远不会被释放的互斥锁。在那种情况下，服务员永远不会跑，他们永远不会被切换到。

# ruby-on-rails - rmagick 自动调整大小和换行文本

> ID：15598042
> 
> 赞同：1
> 
> 时间：2013-03-24T11:46:54.167
> 
> 标签：ruby-on-rails, text, annotations, carrierwave, rmagick

如何使 rmagick 将注释文本包装在图片上，然后自动缩放字体大小并添加换行符？它适用于模因生成器之类的东西。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-04T01:38:34.750

```
phrase = 'Nullam quis risus eget urna mollis ornare vel eu leo. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Aenean lacinia bibendum nulla sed consectetur.'
BACKGROUND_PATH = Rails.root.join('image_dir', 'background.jpg')    
background = Magick::Image.read(BACKGROUND_PATH).first
img = Magick::Image.read("caption:#{phrase}") do
  # puts self.methods
  self.size = '500x'
  self.background_color = 'none'
  self.pointsize = 30
  self.font = 'Tahoma'
  self.fill = 'gray'
  self.gravity = Magick::CenterGravity #Text orientation
end.first
#                          Text box orientation    #left(20), #right(40)
background.composite!(img, Magick::NorthEastGravity, 20, 40, Magick::OverCompositeOp)
background.write(Rails.root.join('tmp', 'my_image.jpg')) 
```

# android - 使用 Restlet 框架进行休息调用

> ID：15598044
> 
> 赞同：0
> 
> 时间：2013-03-24T11:47:06.770
> 
> 标签：android, api, http, rest, restlet

我开发了一个 android 应用程序，以收集保存在 Web API 上的订单。我使用 http 协议进行我的 Rest 调用，如下所示：

```
 HttpClient httpClient = new DefaultHttpClient();

 try {
      HttpGet httpGet = new HttpGet("http://.../api/orders...");
      HttpResponse httpResponse = httpClient.execute(httpGet);
      HttpEntity httpEntity = httpResponse.getEntity();
      if (httpEntity != null) {
          InputStream inputeStream = httpEntity.getContent();
      BufferedReader bufferReader = new BufferedReader(
                    new InputStreamReader(inputeStream));
      StringBuilder stringBuilder = new StringBuilder();

      String ligneLue = bufferReader.readLine();
      while (ligneLue != null) {
        stringBuilder.append(ligneLue + "\n");
        ligneLue = bufferReader.readLine();
      }
      bufferReader.close();
      SONObject jsonObject = new JSONObject(stringBuilder.toString());
          ...
          ...
          (I collect what I need.)
          ...
          ...
      } 
```

现在我想使用Framework restlet 来做同样的想法。这是可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:52:18.370

当然，这是可能的！Restlet 框架为此提供了 ClientResource 类：

```
ClientResource cr = new ClientResource("http://...");
Representation representation = cr.get();
JsonRepresentation jsonRepresentation = new JsonRepresentation(representation);
JSONObject jsonObject = jsonRepresentation.getJsonObject(); 
```

确保类路径中有 org.restlet.jar 和 org.restlet.ext.json.jar（及其 JSON 库依赖项）文件。请注意下载适用于 Android 的 Restlet 版本，以确保框架能够在 Java Android 环境中正确工作。

希望它可以帮助你。

蒂埃里

# javascript - JQuery / JS - 多个输入的一个选择器

> ID：15598045
> 
> 赞同：0
> 
> 时间：2013-03-24T11:47:07.297
> 
> 标签：javascript, jquery, datetimepicker, timepicker

是否可以将一个选择器分配给多个输入字段？

我正在使用时间选择器（jQuery-UI）将时间选择器分配给输入字段。但我注意到，我必须为每个输入字段创建一个选择器。巨大的超载，不是吗？

选择器：

```
$('#timepicker').timepicker({controlType: 'select',timeFormat: 'HH:mm'}); 
```

输入字段：

```
<div class="large-1 columns"><input type="text" id="timepicker" placeholder="Start"></div>
<div class="large-1 columns"><input type="text" id="timepicker" placeholder="End"></div> 
```

乘以 6x
所以我有 14 个可能的时间选择器输入。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T11:50:00.560

您不应该对多个输入使用相同的 ID。改用类，ID 应该是唯一的。这是如何在课堂上做到这一点的。

```
$('.timepicker').timepicker({controlType: 'select',timeFormat: 'HH:mm'}); 
```

和 html

```
<div class="large-1 columns"><input type="text" class="timepicker" placeholder="Start"></div>
<div class="large-1 columns"><input type="text" class="timepicker" placeholder="End"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:51:19.440

你可以使用类似的东西：

```
$(":input").timepicker({controlType: 'select',timeFormat: 'HH:mm'}); 
```

# php - 为包含的菜单创建 if 语句

> ID：15598054
> 
> 赞同：-1
> 
> 时间：2013-03-24T11:47:36.490
> 
> 标签：php

我的菜单在我的一个目录中是一致的。例如，

主页 文档页面 照片页面

我希望能够在每个页面中包含这样的菜单，我就完成了。但是，这一次有点不同，因为即使目的地相同，各个页面生成的链接也必须不同。以gallery.php页面的链接为例：

```
From the Home page:       <a href='galleries.php?id=<?=$id?>'>
From the Documents page:  <a href='galleries.php?id=<?=$doc[lid]?>'>
From the Photos page:     <a href='galleries.php?id=<?=$photo[lid]?>'>
From the Productss page:  <a href='galleries.php??id=<?=$product[lid]?>'> 
```

>

我现在正在做的是将菜单复制并粘贴到每个文件中，并根据需要更改 URL，但这不是一个非常令人满意的解决方案。如何在菜单本身中构建某种 if 语句，以便包含菜单的页面生成正确的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:03:44.373

您需要使用 $_SERVER 全局数组。您可以使用 $_SERVER['SCRIPT_FILENAME'] 或 $_SERVER['REQUEST_URI']

它可以像

```
function getLink($id)
{
 $uri             = $_SERVER['REQUEST_URI'];
 $is_page_home    = (strstr($uri, 'home') === true)?true:false;
 $is_page_photos= (strstr($uri, 'photos') === true)?true:false;
 $is_page_document = (strstr($uri, 'document') === true)?true:false;
 if( $is_page_home )
 {
    $urlid = $id
 }
 if( $is_page_photos)
 {
   $urlid = $doc[$id]
 }
 if( $is_page_document )
 {
  $urlid = $photo[$id]
}
return $urlId
}

$urlId =  getLink($id)

<a href='galleries.php??id=<?=$urlId?>'> 
```

了解更多关于服务器变量[http://php.net/manual/en/reserved.variables.server.php](http://php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:52:39.490

`$_SERVER['REQUEST_URI']`可以为您提供您当前所在的页面，您可以使用它来确定您应该链接到的位置。

例子：

```
function displayGalleryId($lid) {
    $uri = $_SERVER['REQUEST_URI'];
    switch ($uri) {
        case '/home.php':
            $link = $id;
            break;

        case '/documents.php':
            $link = $doc[$lid];
            break;

        // Others here...

        default:
            $link = 'gallery.php';
    }

    return $link;
} 
```

示例用法：

```
<a href='galleries.php?id=<? displayGalleryId($lid); ?> '> 
```

# html - 如何根据字母长度更改css选项卡的宽度？

> ID：15598060
> 
> 赞同：1
> 
> 时间：2013-03-24T11:48:13.533
> 
> 标签：html, css

这是一个CSS的标签菜单。我试图在一个选项卡中写一个长名称，以便它在它的位置上，您可以在以下链接上查看图像：

这是原版： ![http://innovativeartz.com/problems/orignal.png](../Images/523eef01f19e410d3dcb82888db9e873.png)

当我改变 css ![在此处输入图像描述](../Images/8de75919447b288bf42b2b34d6aaa756.png)

```
.tabs {width:100%;overflow:auto;}
.tabs li {float:left;padding-right:1px;}
.tabs .end {padding:0}
.tabs a {display:block;width:66px;font-size:13px;line-height:31px;color:#fff;text-transform:uppercase;text-align:center;border-radius:4px 4px 0 0;-moz-border-radius:4px 4px 0 0;-webkit-border-radius:4px 4px 0 0;behavior:url(js/PIE.htc);position:relative;background:url(../images/tabs_bg.gif) bottom repeat-x #3081c8;text-decoration:none;p}
.tabs a:hover, .tabs .active {background:url(../images/bg_form.gif) repeat}
.tabs_cont {border-radius:0 0 4px 4px;-moz-border-radius:0 0 4px 4px;-webkit-border-radius:0 0 4px 4px;behavior:url(js/PIE.htc);position:relative;background:url(../images/bg_form.gif) repeat;padding:30px 35px 28px;width:1000px;height:500px;} 
```

这是HTML

```
 <ul class="tabs">
        <li><a href="#" id="changeText">inclusive Class</a></li>
        <li><a href="#" id="changeText2">inclusive Class</a></li>
        <li><a href="#" id="changeText3">inclusive Class</a></li>
        <li class="end"><a href="#" id="changeText5">inclusive Class</a></li>
    </ul> 
```

请任何人帮我看看如何用长文本查看它的原始位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:43:23.897

`article.col1`是问题。它有一个固定的定义..只需将它`width`增加到它`100%`，你就会像以前一样工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:57:34.117

原因是你的`ul`（标签）在`article.col`其中有一个宽度，`267px`所以当你说它只扩展那么多时`100%`。`ul` `width`

使它成为 1000 像素。

也删除`tabs` `a`宽度。

# asp.net-mvc - 在 ServiceStack 服务中获取请求 URL、Scheme、主机名和端口

> ID：15598069
> 
> 赞同：2
> 
> 时间：2013-03-24T11:49:10.450
> 
> 标签：asp.net-mvc, servicestack

在 ServiceStack 服务中，我希望能够获取请求 HTTP 方案（HTTP 或 HTTPS）、主机名和端口，然后我将使用它们来构造作为 URL 数组（或列表）返回的图像的绝对路径.

服务在 ASP.NET MVC 应用程序中运行（/api 的并行场景），但这可能会在未来更改为自托管 SS，因此如果存在涵盖这两种场景的解决方案，让我们实现会很好就这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T16:54:03.907

在每个请求或响应过滤器或任何 ServiceStack 服务中，您始终可以访问底层 HTTP [Request](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/ServiceHost/IHttpRequest.cs)和[Response](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/ServiceHost/IHttpResponse.cs)。例如如何在您的服务中访问它们：

```
public class MyService : Service
{ 
    public object Get(Request request) 
    {
        var scheme = base.Request.IsSecureConnection ? "https" : "http";
        base.Response...
    }
} 
```

如果您需要访问底层 HTTP 请求或响应，您始终可以通过以下方式访问它们：

```
var aspnetRequest = (HttpRequest) base.Request.OriginalRequest;
var aspnetResponse = (HttpResponse) base.Request.OriginalResponse; 
```

### 以编程方式构建服务的 URL

ServiceStack 允许您使用 C# 服务客户端使用的相同内置`ToUrl(method,format)`和`ToAbsoluteUrl(method,format)`扩展方法为服务构建相对或绝对 url：

```
[Route("/customers")]
[Route("/customers/{Id}")]
public class Customers : IReturn<List<Customer>>
{
    public int? Id { get; set; }
} 
```

鉴于上述请求 DTO 和定义的路由，您可以构造以下 url，这些 url 将使用最相关的 url 来创建 url，例如：

```
var relativeUrl = new Customers().ToUrl(); // /customers
var absoluteUrl = new Customers().ToAbsoluteUri(); // http://host/api/customers

// /customers/1
var relativeIdUrl = new Customers { Id = 1 }.ToUrl();  
// http://host/api/customers/1
var absoluteIdUrl = new Customers { Id = 1 }.ToAbsoluteUri(); 
```

# visual-studio-2010 - 自定义动态磁贴 windows phone 7.8

> ID：15598073
> 
> 赞同：0
> 
> 时间：2013-03-24T11:49:31.960
> 
> 标签：visual-studio-2010, windows-phone-7, windows-phone-8, live-tile

我想创建一个自定义动态磁贴。我只需要在磁贴的中心显示一个带有大数字（1 到 4 位）的数字，没有图标，没有文本或其他任何内容，并且应该可以更新磁贴。我已经尝试过默认磁贴，但它在右上角以小字体显示数字并且无法传递数字 99。有什么想法吗？（在 Visual Basic 中编程）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:21:00.377

我写了一个指南，如何在透明的情况下渲染自己的图块，但要注意后台代理中的内存消耗。通常，您应该最多只渲染一个图块：
**Windows Phone 的 Pro Live Tiles**
[http://suchan.cz/?p=110](http://suchan.cz/?p=110)

# java - 如何在android中检查类型

> ID：15598080
> 
> 赞同：3
> 
> 时间：2013-03-24T11:50:25.673
> 
> 标签：java, android, gson

我的函数之一是获取**[类型](http://developer.android.com/reference/java/lang/reflect/Type.html)**变量。`java.util.List<Test$MyClass>`有时可能是`java.util.List<java.lang.String>`这样我如何识别它们？

```
if (type instanceof List) {

} 
```

两者都是列表类型，但类型不同。所以上面的代码不起作用。我想区分这两种列表类型。

我的主要问题是[https://stackoverflow.com/questions/15596112/implement-jsondeserializer-more-than-one-in-gson-in-android](https://stackoverflow.com/questions/15596112/implement-jsondeserializer-more-than-one-in-gson-in-android)

我正在使用`deserializer`它..

```
public class Data implements JsonDeserializer<ArrayList<MyClass1>> {
public ArrayList<MyClass1> myList1 = new ArrayList<MyClass1>();
public ArrayList<MyClass2> myList2 = new ArrayList<MyClass2>();

@Override
public ArrayList<MyClass1> deserialize(JsonElement json, Type type,
        JsonDeserializationContext context) throws JsonParseException {

    Debug.e("", type.toString());

    ArrayList<Layoutmap> data = new ArrayList<Layoutmap>();

    try {
        if (json.isJsonObject()) {

            // my stuff

            return data;
        } else {
            return new Gson().fromJson(json, type);
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return data;
} 
```

}

上面的代码适用于`public ArrayList<MyClass2> myList2 = new ArrayList<MyClass2>();`并且`myList2`我也想反序列化..它是 google [Gson](https://code.google.com/p/google-gson/)的一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:57:35.467

是的，问题在于，在 Java 中，针对不可具体化的类型的实例测试始终是错误的。

例如：

```
if(o instance of List<E>) 
```

其中 E 是任何类型，不会编译。

您只需检查列表中包含的内容是否相同，例如

```
if(list1.get(0) instance of String && list2.get(0) instance of String) 
```

**编辑：**

不确定这里是否存在语言障碍问题（您的问题很难完全理解），但您不需要让您的方法采用 Type 类型的参数。正如其他人提到的，你这里的设计很糟糕。您应该做的只是定义如何反序列化您的每个类（如果需要定义自定义反序列化......也就是说，如果默认值不起作用），然后以常规方式获取这些类的列表格森。

我对 GSON 不是很熟悉，但应该是这样的：

```
List<Class1> stuff = gson.fromJson(json, new TypeToken<List<Class1>>(){}.getType()); 
```

因此，换句话说，如果每个类都有使默认反序列化不起作用的特性，那么就没有办法（没有疯狂的体操）使反序列化方法对每种类型都有效。此外，不要将所有功能合二为一。获取一个`ArrayList<LayoutMap>`应该与反序列化每个类的功能分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:00:51.700

您可以尝试以下方法：

```
for (int i=0; i<type.size(); ++i) {
    if (type.get(i) instanceof String) {
        // Do something here
    }
} 
```

这将检查列表的每个元素，如果它是一个字符串，你可以处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T12:04:40.230

尝试在您的类型上使用 getClass() 函数来查找运行时对象的类。例如.. type.getClass().equals(java.lang.string)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T12:14:34.923

希望`type`将成为`ParameterizedType`. 因此，您可以使用[getActualTypeArguments()](http://developer.android.com/reference/java/lang/reflect/ParameterizedType.html#getActualTypeArguments())方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T12:21:10.617

我只是找到了我的解决方案..我不知道它是否更好

我正在比较两个`Type`这样的变量......

```
if (type.toString().equalsIgnoreCase(
                new TypeToken<List<Test.MyClass>>() {
                }.getType().toString())) {

}else
{

} 
```

# python - Python：将数字转换为单词

> ID：15598083
> 
> 赞同：0
> 
> 时间：2013-03-24T11:50:43.563
> 
> 标签：python, dictionary, numbers, converter, words

大家好，我正在尝试生成一个将数字转换为给定字典中的单词的代码。但它似乎根本不打印任何东西。没有错误或任何东西。我尝试了很多东西来找到问题，但仍然没有。

当我进入`6`程序时，什么都没有。

它应该输出`[six]`.

我认为这是一个间距问题，但我不认为是这种情况。

**这就是我所拥有的**

```
import string

value = input("Enter a number 1 - 9 separted by commas: ")

def user_input(value):
    numbers = {}
    user_list = value.split(',')
    numbers = [(x.strip()) for x in user_list]
    return numbers
    print(numbers)

user_input(value)

numbers = user_input()

unit_number = {0: 'zero', 1: 'one', 2: 'two', 3: 'three', 4: 'four', 
           5: 'five', 6: 'six', 7: 'seven', 8: 'eight', 9: 'nine'}

def convert_n_to_w(numbers):
    i = len(str(numbers))

    if i == 0:
        return

    if i == 1:
        return unit_number[numbers]

    print(unit_number[numbers]) 
```

convert_n_to_w(数字)

谁能告诉我我做错了什么？

**更新！！！！！！！**

我添加`convert_n_to_w(numbers)` 并告诉我

`line 38, in <module> convert_n_to_w(numbers)`

`NameError: name 'numbers' is not defined`

当我以为我定义了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:52:35.527

print 语句，`print(unit_number[numbers])`，在`convert_n_to_w`函数中。您在任何时候都不会调用该函数，因此不会运行 print 语句。

要么调用函数，要么从函数中取出 print 语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T12:00:08.830

您的代码有几个问题。我想修改你的代码。下面的代码可以很好地工作，但不是 pythonic。

```
value = input("Enter a number 1 - 9 separted by commas: ")

def user_input(value):
    if isinstance(value, tuple):
        return list(value)
    else:
        user_list = value.split(',')
        numbers = [(x.strip()) for x in user_list]
        return numbers

unit_number = {0: 'zero', 1: 'one', 2: 'two', 3: 'three', 4: 'four', 
           5: 'five', 6: 'six', 7: 'seven', 8: 'eight', 9: 'nine'}

def convert_n_to_w(numbers):
    for n in numbers:
        print(unit_number[int(n)])

numbers = user_input(value)

convert_n_to_w(numbers) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-18T01:03:55.060

```
#Dictionaries for reference
ones = {"1":"One","2":"Two","3":"Three","4":"Four","5":"Five","6":"Six", "7":"Seven","8":"Eight","9":"Nine"}
afterones = {"10":"Ten","11":"Eleven","12":"Twelve","13":"Thirteen","14":"Fourteen","15":"Fifteen","16":"Sixteen", "17":"Seventeen","18":"Eighteen","19":"Nineteen"}
tens = {"2":"Twenty","3":"Thirty","4":"Fourty","5":"Fifty","6":"Sixty", "7":"Seventy","8":"Eighty","9":"Ninety"}
grand={0:" Billion, ",1:" Million, ",2:" Thousand, ",3:""}

#Function converting number to words of 3 digit
def num_to_wrds(val):
    if val != "000":
        ans = ""
        if val[0] in ones:
            x = val
            ans = ans + ones[val[0]] + " Hundered and "
        if val[1:] in afterones:
            ans = ans + afterones[val[1:]] + " "
        elif val[1] in tens:
            ans = ans + tens[val[1]] + " "
        if val[2] in ones:
            ans = ans + ones[val[2]]
        return ans

num = input("Enter the number: ") 

# Paddiing with zeros
pad = 12-len(str(num))
numinwrds = "0"*pad + str(num)

final =""
numlis = [numinwrds[0:3],numinwrds[3:6],numinwrds[6:9],numinwrds[9:12]]

for key,grp in enumerate(numlis):

    if grp!="000":
        final = final + num_to_wrds(grp) + grand[key]

print final 
```

这将打印到十亿的值，您可以在大字典中添加更多它完美地工作注意：确保将最高值按降序排列

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T11:52:36.103

你`return`从`user_input`之前打印的数字。该`print`函数中的语句永远不会到达。

更新：

正如@Joni 指出的那样，您根本没有调用该函数`convert_n_to_w`。

所以`print`永远不会执行任何语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-07T15:28:16.380

```
def n2w(num):
    unit_number = {0: 'zero', 1: 'one', 2: 'two', 3: 'three', 4: 'four', 
    5: 'five', 6: 'six', 7: 'seven', 8: 'eight', 9: 'nine'}
    st=""
    while num>0 :
        a=num%10
        for i,j in unit_number.items():
            if i==a:
                st=unit_number[i]+" "+st
        num=num//10
        st=st.rstrip()
    return (st) 
```

# java - 当我在 Envers 中有自己的听众时，我还能使用 AuditReader 吗？

> ID：15598085
> 
> 赞同：0
> 
> 时间：2013-03-24T11:51:00.797
> 
> 标签：java, database, hibernate, hibernate-envers, audit-trail

我正在尝试使用 Envers 进行条件审核，因此根据[文档](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch15.html#d5e4275)，我关闭了默认的 Envers 事件侦听器，而是注册了我自己的子类。

现在我正在尝试使用 AuditReader 读取审计表，但它会引发异常，说明 Envers（默认）侦听器未正确注册。

如果我只在某些情况下打开/关闭审核，我还能以某种方式使用默认审核阅读器吗？我没有更改表，也没有在我的侦听器中手动做任何事情，我只是检查一些条件，然后从超类调用方法。

**更新：** 事实证明，要使 AuditReader 工作，侦听器需要实现 EnversListener 接口。问题解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:32:48.167

事实证明，Envers 尝试从分配给 Hibernate 会话的侦听器中读取 AuditReader。如果您的后插入侦听器未实现 AuditEventListener，则需要手动构建 AuditReader。这就是我在我们的解决方案中实现它的方式，大致基于 Envers 实现：

```
private AuditReader getAuditReader(final Session session) {
    SessionImplementor sessionImpl;
    if (!(session instanceof SessionImplementor)) {
        sessionImpl = (SessionImplementor) session
                .getSessionFactory().getCurrentSession();
    } else {
        sessionImpl = (SessionImplementor) session;
    }

    return new AuditReaderImpl(this.versionConfig, session, sessionImpl);
} 
```

输入会话是一个休眠会话。需要以某种方式提供 versionConfig 变量。这个 Envers 配置对象可以在您的自定义侦听器的 init 函数中创建，如下所示：

```
public final void initialize(final Configuration configuration) {
    versionConfig = AuditConfiguration.getFor(configuration);
} 
```

# c - 第三次我执行一个函数然后发生运行时错误C

> ID：15598086
> 
> 赞同：-3
> 
> 时间：2013-03-24T11:51:10.453
> 
> 标签：c, data-structures, tree

```
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>
#include<malloc.h>
#include<string.h>

struct node
{
    char *word;
    char *meaning;
    struct node *left;
    struct node *right;
    struct node *parent;
}*root=NULL,*trav,*tmp;

void add()
{
    int res;
    // create node
    tmp=(struct node *) malloc(sizeof(struct node));
    tmp->word=(char *)malloc(sizeof(char));
    tmp->meaning=(char *)malloc(sizeof(char));
    printf("\nEnter Word\n");
    scanf("%[^\n]%*c",tmp->word);
    printf("Enter Meaning\n");
    scanf("%[^\n]%*c",tmp->meaning);
    tmp->left=NULL;
    tmp->right=NULL;
        trav=root;
        while(1)
        {

            if(trav==NULL)
            {
                root=tmp;
                root->parent=NULL;
                root->left=NULL;
                root->right=NULL;
                break;

            }
            else
            {
                res=strcmp(tmp->word,trav->word);
                // if res==0 then words are same
                // if res==1 then left word is alphabetically smaller
                // if res==2 then left word is alphabetically bigger
                if(res<0)
                {   
                    if(trav->left==NULL)
                    {
                        trav->left=tmp;
                        tmp->parent=trav;
                        break;
                    }
                    //goto left child

                    trav=trav->left;

                }
                else if(res>0)
                {   
                    if(trav->right==NULL)
                    {
                        trav->right=tmp;
                        tmp->parent=trav;
                        break;
                    }
                    //goto left child
                    trav=trav->right;

                }
                if(res==0)
                {
                    printf("Word already exist\n");
                    break;
                }

            }

        }
}

int main()
{

    int flag=0;
    while(1)
    {
        printf("\n1.add word\n2.delete word\n3.search word\n4.inorder traverse\n5.preorder traverse\n6.postorder traverse\n7.exit\n");
        switch(getche())
        {
        case '1':
            {
                add();
                 break;
            }
        case '2':
            {
                delete_word();
                break;
            }
        case '3':
            {
                search();
                break;
            }
        case '4':
            {
                traverse_inorder(root);
                break;
            }
        case '5':
            {
                traverse_preorder(root);
                break;
            }
        case '6':
            {
                traverse_postorder(root);
                break;
            }
        case '7':
            flag=1;
        }

        if(flag==1)
            break;
    }
    return 0;

} 
```

/*
我正在创建一个基于树的字典，当我第三次执行 add 函数时，出现运行时错误，请帮助我*/ /* 错误出现在 malloc 函数上，当它第三次遇到时程序关闭*/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T11:52:43.603

您在这里只分配一个字符：

```
tmp->word=(char *)malloc(sizeof(char));
tmp->meaning=(char *)malloc(sizeof(char)); 
```

因此，之后您尝试将字符串写入内存块，该内存块的大小太小而无法保存该值。这会导致内存损坏。

猜你想分配一个数组，所以你需要：

```
tmp->word=malloc(len * sizeof(char));
tmp->meaning=malloc(len * sizeof(char)); 
```

这`len`是`word`and`meaning`包括 terminating的最大假定长度`\0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:53:27.843

您只为`word`and分配一个字符`meaning`，然后将 > 1 个字符读入其中（即写入未分配的内存）

# php - 如何从由 HTML 调用的 PHP 页面返回 标签？

> ID：15598088
> 
> 赞同：0
> 
> 时间：2013-03-24T11:51:17.783
> 
> 标签：php, javascript, mysql

我正在构建一个应用程序，该应用程序必须在 MyPHP 数据库中添加一行，其中包含一些数据，每行包含一个始终不同的小型 JPEG 图像。目前它的结构是这样的：

### JavaScript

```
function fn_addrow() {
    document.write('<form action="ADVBKMNGR-EventClass_MANAGE.php?Mode=ADD" method="POST" enctype="multipart/form-data">')
    document.write('<table width="500"><th width="150"></th><th width="350"></th>')
    document.write('<TR>')

    // Form building

    document.write('<input type="submit" value="Ok proceed">')
    document.write('</form>')
} 
```

### PHP

```
elseif($WorkMode == 'ADD'):
    $ID_ev = $_POST[ID_evcls];
    $ID_ds = $_POST[Desc];

    // Write all the data in a new row
    $query='INSERT INTO '.$db_tabscelta.' (`Cod_App`, `ID_eventclass`, `Descrizione`, `Active`, `Logo_Eve`) VALUES ("'.$Station_ID.'","'.strtoupper($ID_ev).'","'.$ID_ds.'","1","'.mysql_real_escape_string($datimmagine).'")';
    $result = mysql_db_query("AdVisual_02_", $query ,$connessione); 
    unlink($ID_logo);
    imagedestroy($ID_logo); 
```

PHP端的调用有效，记录已添加，但我的问题是最后我仍然在PHP页面上，而我想返回调用页面并重新显示整个表格。而且，PHP 的地址显示在用户屏幕中，我根本不喜欢这样。

有人有建议吗？

非常重要：我已经尝试过使用`XMLHttpRequest()`命令的方式。很好，但我根本无法上传图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:45:30.020

存储的值

```
$_SERVER['HTTP_REFERER'] 
```

一旦你登陆页面。这将为您提供 URL

完成作业后重定向到此 URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T11:55:06.893

我认为这适用于您搜索通过 ajax 提交的表单，即使存在文件上传

[http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)

# php - 我在页面顶部的 PHP 回显

> ID：15598090
> 
> 赞同：1
> 
> 时间：2013-03-24T11:51:30.627
> 
> 标签：php, codeigniter, buffer, echo

我正在使用 Codeigniter，并定义了包含我的布局的自己的控制器

```
protected $layout = 'layout';
protected function render($content) {
  $view_data = array(
    'content' => $content
  );
  $this->load->view($this->layout,$view_data);
} 
```

所有控制器都通过调用 View 来扩展这个控制器来定义自己的内容

```
class Voyage extends My_Controller {
    function index(){
        $this->load->helper('form');
        $this->load->helper('url');
        $content = $this->load->view('admin\voyages');
        $this->render($content);
    } 
```

我的html页面是这样的：

```
<body>
<header>.....</header>
<nav>......</nav>
<section>.. <?php echo $content; ?>...</sectiont> 
```

问题是我的 echo $content 将内容放在页眉和导航元素之前的页面顶部。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:17:38.427

```
$content = $this->load->view('admin\voyages'); 
```

应该：

```
$content = $this->load->view('admin\voyages', '', true); 
```

如果要将其加载到变量中。你在做什么会立即渲染它

# java - 如何检查对象类别

> ID：15598091
> 
> 赞同：0
> 
> 时间：2013-03-24T11:51:36.203
> 
> 标签：java, class

当我尝试获取对象类型时，我做错了。

我试图对两个向量求和，它可以是笛卡尔坐标（x，y）或极坐标（方位角，长度）。

我怎样才能检查我有什么类型的对象？

这是我的代码：

```
import java.lang.Math;
/**
 * Write a description of class Velocity here.
 * 
 * @author (your name) 
 * @version (a version number or a date)
 */
public class Velocity
{
    // instance variables - replace the example below with your own
    private double x;
    private double y;
    private double azimuth;
    private double length;
    private double prod;
    private PolarCoordinate pt;
    private CartesianCoordinate ct;
    private boolean compare;
    private double s;
    /**
     * Constructor for objects of class Velocity
     */
    public Velocity(CartesianCoordinate c)
    {
        x = c.getX();
        y = c.getY();
    }

    public Velocity(Velocity z)
    {

    }

    public Velocity(PolarCoordinate p)
    {
        ct = new CartesianCoordinate(x, y);
        pt = new PolarCoordinate(azimuth, length);
        azimuth = p.getAzimuth();
        length = p.getLength();
    }

    private Velocity sumOfPolar(double s)
    {
        this.s = s;
        return null;
    }

    private Velocity PolarCoordinate(double azimuth, double length)
    {
        return null;
    }

    private Velocity CartesianCoordinate(double x, double y)
    {
        return null;
    }

    private Velocity dotProduct(double prod)
    {
        return null;
    }

    //private boolean compare(java.lang.Object velocity,java.lang.Object ct)
    //{
    //    if (velocity.getClass().equals(ct.getClass())) {
    //        return true;
    //    } else {
    //        return false;
    //    }
    //}

    /**
     * This method performs a vector addition
     * and returns a new object representing the
     * sum of two vectors.
     *
     */
    public Velocity add(final Velocity velocity)
    {

        if(velocity.getClass().equals(ct.getClass()))
        {
            double sumX = x + velocity.x;
            double sumY = y + velocity.y;
            Velocity v = new Velocity(CartesianCoordinate(x,y));
            v.x = sumX;
            v.y = sumY;
            System.out.println("BLYABLYA");
            return v;
        }

        if(compare == false)
        {
            System.out.println("YEAAAAA");
            Velocity v = new Velocity(PolarCoordinate(azimuth, length));

            double xFirst = length * Math.cos(azimuth);
            System.out.println("xFirst: " + xFirst);
            double xSecond = velocity.length * Math.cos(velocity.azimuth);
            System.out.println("xSecond: " + xSecond);
            double yFirst = length * Math.sin(azimuth);
            System.out.println("yFirst: " + yFirst);
            double ySecond = velocity.length * Math.sin(velocity.azimuth);
            System.out.println("ySecond: " + ySecond);
            double sumX = xFirst + xSecond;
            System.out.println("sumX: " + sumX);
            double sumY = yFirst + ySecond;
            System.out.println("sumY: " + sumY);
            double sumXY = sumX + sumY;
            System.out.println("sumXY: " + sumXY);

            Velocity sum = new Velocity(sumOfPolar(sumXY));
            sum.s = sumXY;
            return sum;

        }
        return null;
    }

    /**
     * This method performs a vector subtraction
     * and returns a new object representing the
     * sub of two vectors.
     *
     */
    public Velocity subtarct(final Velocity velocity)
    {
        double subX = x - velocity.x;
        double subY = y - velocity.y;
        Velocity v = new Velocity(CartesianCoordinate(x,y));
        v.x = subX;
        v.y = subY;
        return v;
    }

    /**
     * This method performs a vector dot product
     * and returns a new object representing the
     * product of two vectors.
     *
     */
    public Velocity dotProduct(final Velocity velocity)
    {
        double prodX = x * velocity.x;
        double prodY = y * velocity.y;
        double sumProdXY = prodX + prodY;
        Velocity v = new Velocity(dotProduct(prod));
        v.prod = sumProdXY;
        return v;
    }

    /**
    * This method performs a scaling on a vector.
    *
    */
    public Velocity scale(final double scaleFactor)
    {
        double prodX = x * scaleFactor;
        double prodY = y * scaleFactor;
        Velocity v = new Velocity(CartesianCoordinate(x, y));
        v.x = prodX;
        v.y = prodY;
        return v;
    }

    public double getAzimuth()
    {
        PolarCoordinate p = new PolarCoordinate(azimuth,length);
        return p.getAzimuth();
    }

    public double getLength()
    {
        PolarCoordinate p = new PolarCoordinate(azimuth,length);
        return p.getLength();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T11:53:43.377

您可以使用`instanceof`来确定对象类型。

```
if (velocity instanceof PolarCoordinate) {
       return true;
} else {
       return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T11:55:03.913

使用`instanceof`.

```
String s = "TGTGGQCC";
System.out.println(s instanceof String); // true 
```

# .htaccess - htaccess 给出 500 - 内部服务器错误

> ID：15598097
> 
> 赞同：2
> 
> 时间：2013-03-24T11:52:17.690
> 
> 标签：.htaccess, internal-server-error, .htpasswd

我正在使用 htaccess 和 htpasswd 保护一个 html 文件。当我尝试访问它时，输入用户名和密码后，而不是加载“index.html”文件，我得到“500 - 内部服务器错误”

```
AuthName "Restricted Area" 
AuthType Basic 
AuthUserFile home/folder/index.html/.htpasswd 
AuthGroupFile /dev/null 
require valid-user 
```

有什么建议么？也许与托管服务有关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T12:13:21.467

首先，查阅错误日志（通常位于 中`/var/log/apache2/error.log`）以查看错误的确切原因。

如果您无权访问它，请检查以下内容：

*   服务器是否支持这种技术？（询问您的提供商或管理员）
*   是`AuthUserFile`正确的吗？它似乎缺少一个斜线，并且目录不寻常。我会怀疑类似的东西`AuthUserFile /home/webuser/sitefolder/.htpasswd`。
*   将组文件更改为`AuthGroupFile None`而不是将 apache 指向 read `/dev/null`。把它想象`/dev/null`成一个无底垃圾桶。从那里得到任何东西并不容易，这可能是服务器尝试失败的一个原因。
*   将您要求的大小写更改为`Require valid-user`. 它必须是大写的 R。

总结一下：

```
AuthName "Restricted Area" 
AuthType Basic 
AuthUserFile /home/webuser/sitefolder/.htpasswd 
AuthGroupFile None
Require valid-user 
```

有关更多信息，我推荐[http://httpd.apache.org/docs/](http://httpd.apache.org/docs/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-16T21:22:49.150

现在这个问题更老了*，*但我想我也会加入，因为我没有找到最终在任何地方都对我有用的解决方案。此外，它*仍然*没有答案。

我的密码 .htaccess 也出现 500 错误，根据错误日志，这是由于“AuthName 接受一个参数”问题造成的。在我的头撞了太久之后，我终于注意到我在 AuthName 周围有“卷曲”引号，而不是正确的直引号。我更换了这些，确信我已经解决了我的问题。

仍然，500。差点把我的笔记本电脑扔出窗外。此时我的代码如下所示：

```
# PW PROTECT INT DIRECTORY
AuthType Basic
AuthName "Login"
AuthUserFile /home/mywebsite/mywebsite.com/reports/int/.htpasswd
require valid-user 
```

六种方式直到周日之后，作为绝望的冰雹玛丽，我删除了我努力包含在文件顶部的评论（必须包括那些评论）。做到了，500解决了。最后。

我无法解释为什么这在错误日志中被解析为 AuthName 问题，但我认为我的问题都归结为试图通过不太理想的“纯文本”编辑器复制/粘贴代码（在这个例如，Apple 的 TextEdit，它也负责那些可爱的弯引号，即使在纯文本模式下也存在）。这是一个错误，我不会重复。

我不知道“#”散列字符在 TextEdit 中是否有点愚蠢，或者第 1 行是否存在一些问题作为注释，相当于一个空行（在任何地方都没有看到），但是删除注释行就可以了（如果有人知道为什么，我很想听听）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-07T08:17:36.847

我知道这个问题有点老了，但是对于那些努力寻找答案的人，请确保 AuthUserFile 的路径正确并且对 .htpasswd 文件的访问设置为 0655。

与 .htaccess 文件关联的用户正在读取该文件。如果该用户无法执行它（即，如果它设置为 644 等），则服务器无法读取文件以对其进行身份验证，并且您会收到权限错误，即错误 500。

# java - 如何在运行时获取 java App 的 ExePath/MainClassPath/MainJarPath？

> ID：15598101
> 
> 赞同：-1
> 
> 时间：2013-03-24T11:52:32.520
> 
> 标签：java, path, main

“运行的 EXE 的路径”为用 C#、C++、VB 等编写的 Windows 应用程序定义了良好的。

- Windows 上的 Java 应用程序不是“EXE 应用程序”，而是启动类文件或 jar 文件而不是 EXE 文件。因此，对于 java 应用程序，术语“ExePath”应翻译为“MainClassPath”或“JarPath”。

- 在某些情况下，程序员需要知道应用程序的 jar 或 MainClass 的物理路径。（例如，当您在 java 和 c# 中使用相同的类和相同的方法开发一个大型项目时）

- 感谢其他 stackoverflow 用户，此语句完成了这项工作：

```
String exePath = URLDecoder.decode(this.getClass().getProtectionDomain().getCodeSource().getLocation().getPath(), "UTF-8") 
```

## 现在是我的问题：

如果我将相同的代码放入任何 helper/utils jar-library，那么它将返回 helperlib.jar 的路径，它不会返回我的 MainClass/AppJar 的路径！

-

所以最终的`getExePath()`辅助方法应该类似于：

```
return(URLDecoder.decode(Thread.currentThread().getStartingThread().getMainClass().getProtectionDomain().getCodeSource().getLocation().getPath(), "UTF-8")); 
```

（如果只有java 中的`getStartingThread()`and之类的方法...）`getMainClass()`

-

## 请指出最终的解决方案，我该如何实施这些步骤：

*   获取起始线程
*   获取起始线程的主类
*   获取主类的路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:38:22.193

如果我说对了，只需将带有所需类参数的方法放入您的 helperlib-class ...

例如：

```
public static String getExePath(Object main) {

        String path = "";

        try {
            path = URLDecoder.decode(main.getClass().getProtectionDomain().getCodeSource().getLocation().getPath(), "UTF-8");
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        }

        return path;
} 
```

然后你可以使用参数'this'从你的main-jar中调用它......

```
System.out.println("AppPath:\n" + helperlib.getExePath(this)); 
```

...并且您获得了参数中指定的类的路径

希望它对我的英语不好和抱歉... ;)

# c# - 空对象是什么意思？

> ID：15598108
> 
> 赞同：1
> 
> 时间：2013-03-24T11:52:45.803
> 
> 标签：c#

如果我创建一个类的对象

```
A obj = new A(); 
```

后来我分配`null`给它：`obj = null;`.

那么obj为null是什么意思呢？这是否意味着现在它没有指向任何地方并且所有内存都被释放了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T11:55:33.127

`obj`现在指向`null`参考内存位置。

从MSDN 上的[null（C# 参考） ：](http://msdn.microsoft.com/en-gb/library/edakx9da.aspx)

> null 关键字是表示空引用的文字，它不引用任何对象。

如果您没有将它以前指向的对象分配给其他任何对象，则该对象将有资格被 GC 收集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T11:54:05.923

这意味着它没有指向任何地方，并且内存有资格在未来某个未定义的时间被垃圾收集器释放。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T12:19:22.403

`null`不是一个对象。这是一个特殊的参考值，什么都不引用。如果您尝试使用`null`引用与对象通信，则会引发错误，因为没有对象。

还有一种称为[Null Object Pattern](http://en.wikipedia.org/wiki/Null_Object_pattern)的设计模式，是为了解决`null`需要特殊情况的引用问题而创建的。此模式中的*空对象*是具有“中性”行为的对象；也就是说，当被要求做某事时，实际上什么也不做，当被要求返回一个值时，返回零、空字符串、空列表和其他安全、中性的对象。

不要将*空对象*与特殊`null`引用混淆。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T11:55:36.093

在内部，这意味着该对象不被视为根。并且不会添加到可用对象图中。

因此，它将被视为可收藏的。（不确定的时间。）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-24T11:56:56.947

您需要了解引用类型（类）实际上是指向内存中数据的指针。本质上，它所做的是将指针（它只是一块包含数据地址的内存）设置为零值或空值。

实际上，这意味着如果没有其他对数据的引用，垃圾收集器可以随时将其删除。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-24T11:58:44.050

从技术上讲，是堆上的内存位置的替代名称，当您说时`obj`，它包含一个类型的对象`A``A obj = new A();`

但是，如果您当时说`obj = null;`then `obj`now 无处引用。

还有之前被类型 A 的对象占用的内存，它`obj`是一个别名，当 GC 认为是正确的时间时，它将由 GC 归还给操作系统。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-24T12:11:22.450

这意味着`obj`指向无处，并且类型的原始引用实例`A`转到 gen0。如果`A`是一个已实现的类型`IDisposable`，那么 A 持有的资源将在`Dispose`调用时被释放，并被抑制以最终确定。如果一次性没有明确处置，那么它将等待最终确定。

如果之后的执行再次引用它，它是 gen1，然后可能是 gen2，它的生命周期将会更长。

当 gc 来收集垃圾的时候，gen0s 将是被收集的首选，然后是 gen1，gen2。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-03-24T12:29:30.007

> 一个 obj = 新的 A();

引用变量*obj*的类型为*A*。您正在创建*A*的实例并将其引用分配给*obj*。*obj现在引用**A*的实例。

> 对象 = 空

上面的赋值说*obj*现在引用了*null*。那没什么。现在，新创建的*A*实例已被引用，最终将被*垃圾回收*。

# r - 将CSV数据转换为矩阵到R中的热图

> ID：15598117
> 
> 赞同：3
> 
> 时间：2013-03-24T11:53:49.640
> 
> 标签：r, csv, heatmap

为我正在写的一篇论文做一些可视化，并且被困在将数据从 CSV 加载的表中传输到矩阵中（以便之后能够从中绘制热图）。

我正在这样做：

```
dta.tesiscsv<- read.csv("dtatesis.csv", header=TRUE) 
```

加载如下所示的数据样本：

```
Col,Row,Kf
1,1,100
1,2,97.14285714
2,1,100 
...,...,... 
```

但我有点迷失在下一步（创建一个空矩阵并根据公式将数据从表传输到它）：

```
X<- matrix(nrow= 48, ncol=12)
X[dta.test[,c(1:2)]] <- dta.test$Kf 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T12:10:17.227

您可以使用`acast`from `reshape2`package 以您想要的矩阵形式获取数据。

```
require(reshape2)
acast(dta.test, Row ~ Col, value.var = "Kf") 
```

这将用`NA`. 如果你想填充它们，例如，用 0 代替，那么，

```
acast(dta.test, Row ~ Col, value.var = "Kf", fill = 0) 
```

会做到这一点。您可以将其包裹起来`heatmap(.)`以获取热图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:53:16.527

怎么样（如果每个 Col/Row 组合有一行*，*这应该是有意义的）：

```
dta.tesiscsv <- read.table(text="Col,Row,Kf
1,1,100
1,2,97.14285714
2,1,100",h=T,sep=",")

X <- tapply(dta.tesiscsv[,3],dta.tesiscsv[,2:1],head,1)
heatmap(X) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T13:09:20.973

你真的很亲近。要使用矩阵索引，索引必须是矩阵，而不是 data.frame。

```
X[as.matrix(dta.test[,c(1:2)])] <- dta.test$Kf 
```

# php - 注册功能

> ID：15598123
> 
> 赞同：1
> 
> 时间：2013-03-24T11:54:09.953
> 
> 标签：php, mysql, database, registration

几个月前我为我的项目建立了一个注册功能，直到昨天它一直运行良好，我不太确定发生了什么，因为我已经好几个星期没有用它改变任何东西了，当时我上次检查时它正在工作。我试图自己调试它，但我找不到任何问题，我不知道还能做什么！

代码分为多个页面，但本质上，这是发生了什么：

**HTML 构造**

```
<?php require_once("clean.php"); ?>

<ul class="nav pull-right"><?php
                        if (isset($_SESSION['logged'])) {?>
                            <li><a href="profile.php">Profile</a></li>
                            <li><a href="logout.php">Logout</a></li><?php
                        } else {?>
                            <li><a href="#register" class="account-register" data-toggle="modal" title="Register a new Screening account">Register</a></li>
                            <li><a href="#login" class="account-login" data-toggle="modal" title="Login to your Screening profile">Login</a></li><?php
                        }?>
                    </ul>

<div id="register" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="registerLabel" aria-hidden="true">
        <?php require_once("register-controller.php"); ?>

        <!-- reCAPTCHA jQuery -->
        <script type="text/javascript">
             var RecaptchaOptions = {
                theme : 'white'
             };
         </script>

        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
            <h3 id="registerLabel" class="modal-title">Register a new Screening account</h3>
        </div>

        <form name="register" action="" method='POST' enctype="multipart/form-data">
            <div class="modal-body">

                <?php echo $register_bad_message; ?>
                <?php echo $register_good_message; ?>

                <input class="input-block-level" type="text" name="firstname" placeholder="First Name">
                <input class="input-block-level" type="text" name="lastname" placeholder="Last Name">
                <input class="input-block-level" type="email" name="email" placeholder="Email">
                <input type="file" class="profile-picture-upload" name="profile-image" alt="profile-image">
                <input class="input-block-level" type="password" name="password" placeholder="Password">
                <input class="input-block-level" type="password" name="confirm-password" class="span3" placeholder="Confirm Password">
                <?php include ("recaptcha_form.php") ?>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                <button type="submit" class="btn btn-success" name="submit" value="Sign up!">Sign up!</button>
            </div>
        </form>
    </div> 
```

**清洁.php**

```
<?php
/*
        ini_set('display_errors', 1);
    error_reporting(E_ALL);
*/
    function clean_string($string) {
        $string = trim($string);
        $string = utf8_decode($string);
        $string = str_replace("#", "&#35", $string); $string = str_replace("%", "&#37", $string);

        if (mysql_real_escape_string($string)) {
            $string = mysql_real_escape_string($string);
        }

        if (get_magic_quotes_gpc()) {
            $string = stripslashes($string);
        }

        return htmlentities($string);
    }
?> 
```

**注册控制器.php**

```
<?php
    /*
ini_set('display_errors', 1);
    error_reporting(E_ALL);
*/
    class SimpleImage {

       var $image;
       var $image_type;

       function load($filename) {

          $image_info = getimagesize($filename);
          $this->image_type = $image_info[2];
          if( $this->image_type == IMAGETYPE_JPEG ) {

             $this->image = imagecreatefromjpeg($filename);
          } elseif( $this->image_type == IMAGETYPE_PNG ) {

             $this->image = imagecreatefrompng($filename);
          }
       }
       function save($filename, $image_type=IMAGETYPE_JPEG, $compression=75, $permissions=null) {

          if( $image_type == IMAGETYPE_JPEG ) {
             imagejpeg($this->image,$filename,$compression);
          } elseif( $image_type == IMAGETYPE_PNG ) {

             imagepng($this->image,$filename);
          }
          if( $permissions != null) {

             chmod($filename,$permissions);
          }
       }
       function output($image_type=IMAGETYPE_JPEG) {

          if( $image_type == IMAGETYPE_JPEG ) {
             imagejpeg($this->image);
          } elseif( $image_type == IMAGETYPE_PNG ) {

             imagepng($this->image);
          }
       }
       function getWidth() {

          return imagesx($this->image);
       }
       function getHeight() {

          return imagesy($this->image);
       }
       function resizeToHeight($height) {

          $ratio = $height / $this->getHeight();
          $width = $this->getWidth() * $ratio;
          $this->resize($width,$height);
       }

       function resizeToWidth($width) {
          $ratio = $width / $this->getWidth();
          $height = $this->getheight() * $ratio;
          $this->resize($width,$height);
       }

       function scale($scale) {
          $width = $this->getWidth() * $scale/100;
          $height = $this->getheight() * $scale/100;
          $this->resize($width,$height);
       }

       function resize($width,$height) {
            $new_image = imagecreatetruecolor($width, $height);
            if( $this->image_type == IMAGETYPE_GIF || $this->image_type == IMAGETYPE_PNG ) {
                $current_transparent = imagecolortransparent($this->image);
                if($current_transparent != -1) {
                    $transparent_color = imagecolorsforindex($this->image, $current_transparent);
                    $current_transparent = imagecolorallocate($new_image, $transparent_color['red'], $transparent_color['green'], $transparent_color['blue']);
                    imagefill($new_image, 0, 0, $current_transparent);
                    imagecolortransparent($new_image, $current_transparent);
                } elseif( $this->image_type == IMAGETYPE_PNG) {
                    imagealphablending($new_image, false);
                    $color = imagecolorallocatealpha($new_image, 0, 0, 0, 127);
                    imagefill($new_image, 0, 0, $color);
                    imagesavealpha($new_image, true);
                }
            }
            imagecopyresampled($new_image, $this->image, 0, 0, 0, 0, $width, $height, $this->getWidth(), $this->getHeight());
            $this->image = $new_image;  
        }   

    }

    //Clean
    echo "before clean";
    $submit = clean_string($_POST['submit']);
    echo "after clean";

    if ($submit == 'Sign up!') {

        $first_name = clean_string($_POST['first-name']);
        $last_name = clean_string($_POST['last-name']);
        $email = clean_string($_POST['email']);
        $password = clean_string($_POST['password']);
        $confirm_password = clean_string($_POST['confirm-password']);

        //Output variables
        $register_bad_message = '';
        $register_good_message = '';

        require_once($_SERVER['DOCUMENT_ROOT'] . '/recaptcha/recaptchalib.php');
        $privatekey = "6Ldbd8ASAAAAAFz8VT29H5w4WLNjsbI-mFY2QkaC";
        $resp = recaptcha_check_answer ($privatekey,
                                        $_SERVER["REMOTE_ADDR"],
                                        $_POST["recaptcha_challenge_field"],
                                        $_POST["recaptcha_response_field"]);
        if (!$resp->is_valid) {
            $errMessage = $resp->error;
            $register_bad_message = '<div class="alert alert-error">The reCAPTCHA you entered wasn\'t correct. Please try again.</div>';?>
            <script>
                $('a.account-register').trigger('click');
            </script><?php
        } else {
            if ($first_name&&$last_name&&$email&&$password&&$confirm_password) {
                if ($password == $confirm_password) {
                    if (strlen($password) > 25 || strlen($password) < 6) {
                        $register_bad_message = '<div class="alert alert-error">Please enter a password between 6 and 25 characters.</div>';?>
                        <script>
                            $('a.account-register').trigger('click');
                        </script><?php
                    } else {
                        require_once("db_connect.php");
                        if($db_server) {
                            $first_name = clean_string($first_name);
                            $last_name = clean_string($last_name);
                            $email = clean_string($email);
                            $password = clean_string($password);
                            echo "1";
                            mysql_select_db($db_database);

                            $taken = mysql_query("SELECT email FROM users WHERE email='$email'");
                            $count = mysql_num_rows($taken);
                            if ($count > 0) {
                                $register_bad_message = '<div class="alert alert-error">The email you have entered is already associated with a Screening account. Please choose another.</div>';?>
                                <script>
                                    $('a.account-register').trigger('click');
                                </script><?php
                            } else {
                                if ($_FILES) {
                                    //Put file properties into variables
                                    $file_name = $_FILES['profile-image']['name'];
                                    $file_size = $_FILES['profile-image']['size'];
                                    $file_tmp_name = $_FILES['profile-image']['tmp_name'];

                                    //Determine filetype
                                    switch ($_FILES['profile-image']['type']) {
                                        case 'image/jpeg': $ext = "jpg"; break;
                                        case 'image/png': $ext = "png"; break;
                                        default: $ext = ''; break;
                                    }

                                    if ($ext) {
                                        //Check filesize
                                        if ($file_size < 5242880) {
                                            //Process file - resize, clean up filename and move to safe location
                                            $image = new SimpleImage();
                                            $image->load($file_tmp_name);
                                            $image->resizeToWidth(250);
                                            $image->save($file_tmp_name);

                                            $n = "$file_name";
                                            $n = ereg_replace("[^A-Za-z0-9.]", "", $n);
                                            $n = strtolower($n);
                                            $n = "avatars/$n";
                                            move_uploaded_file($file_tmp_name, $n);
                                        } else {
                                            $register_bad_message = '<div class="alert alert-error">Please ensure your chosen file is less than 5MB.</div>';?>
                                            <script>
                                                $('a.account-register').trigger('click');
                                            </script><?php
                                        }
                                    } else {
                                        $register_bad_message = '<div class="alert alert-error">Please ensure your image is of filetype .jpg or.png.</div>';?>
                                        <script>
                                            $('a.account-register').trigger('click');
                                        </script><?php
                                    }
                                }
                                $password = md5($password);
                                $query = "INSERT INTO users (first_name, last_name, email, password, image) VALUES ('$first_name', '$last_name', '$email', '$password', '$n')";
                                mysql_query($query) or die("Insert failed. " . mysql_error() . "<br />" . $query);
                                $register_good_message = '<div class="alert alert-success">Registration successful!
                                                            <br />
                                                            <a href='#login' data-toggle='modal' title='Login to your Screening profile'>Login now</a></div>';?>
                                <script>
                                    $('a.account-register').trigger('click');
                                </script><?php
                            }
                        } else {
                            $register_bad_message = '<div class="alert alert-error">Error: could not connect to the database.</div>';?>
                            <script>
                                $('a.account-register').trigger('click');
                            </script><?php
                        }
                        require_once("db_close.php");
                    }
                } else {
                    $register_bad_message = '<div class="alert alert-error">Passwords failed to match. Please try again.</div>';?>
                    <script>
                        $('a.account-register').trigger('click');
                    </script><?php
                }
            } else {
                $register_bad_message = '<div class="alert alert-error">Please fill in all fields before continuing.</div>';?>
                <script>
                    $('a.account-register').trigger('click');
                </script><?php
            }
        }
    }

?> 
```

如果我打开错误报告，我收到的消息是：

清除前警告：mysql_real_escape_string(): Access denied for user ''@'localhost' (using password: NO) in \ICS-FILESHARE\WWW\newmedia.leeds.ac.uk\ug10\cs10aer\screening_new\clean.php on第 11 行警告：mysql_real_escape_string(): A link could not be established in \ICS-FILESHARE\WWW\newmedia.leeds.ac.uk\ug10\cs10aer\screening_new\clean.php on line 11 after clean 注意：未定义索引：第 100 行 \ICS-FILESHARE\WWW\newmedia.leeds.ac.uk\ug10\cs10aer\screening_new\register-controller.php 中的名字 警告：mysql_real_escape_string(): Access denied for user ''@'localhost '（使用密码：NO）在第 11 行的 \ICS-FILESHARE\WWW\newmedia.leeds.ac.uk\ug10\cs10aer\screening_new\clean.php 警告：mysql_real_escape_string()：无法在第 11 行的 \ICS-FILESHARE\WWW\newmedia.leeds.ac.uk\ug10\cs10aer\screening_new\clean.php 中建立到服务器的链接 注意：未定义索引：\ICS-FILESHARE 中的姓氏\WWW\newmedia.leeds.ac.uk\ug10\cs10aer\screening_new\register-controller.php 第 101 行警告：mysql_real_escape_string(): Access denied for user ''@'localhost' (using password: NO) in \ICS -FILESHARE\WWW\newmedia.leeds.ac.uk\ug10\cs10aer\screening_new\clean.php 第 11 行警告：mysql_real_escape_string()：无法在 \ICS-FILESHARE\WWW\newmedia 中建立到服务器的链接。 leeds.ac.uk\ug10\cs10aer\screening_new\clean.php 在第 11 行警告：mysql_real_escape_string()：在 \ICS-FILESHARE\WWW\newmedia 中用户 ''@'localhost'（使用密码：NO）的访问被拒绝。 leeds.ac.uk\ug10\cs10aer\screening_new\clean。第 11 行的 php 警告：mysql_real_escape_string()：无法在 \ICS-FILESHARE\WWW\newmedia.leeds.ac.uk\ug10\cs10aer\screening_new\clean.php 中建立到服务器的链接 11 警告：mysql_real_escape_string (): 第 11 行 \ICS-FILESHARE\WWW\newmedia.leeds.ac.uk\ug10\cs10aer\screening_new\clean.php 中的用户 ''@'localhost' 的访问被拒绝（使用密码：NO）警告：mysql_real_escape_string ()：无法在第 11 行的 \ICS-FILESHARE\WWW\newmedia.leeds.ac.uk\ug10\cs10aer\screening_new\clean.php 中建立到服务器的链接 警告：mysql_real_escape_string(): Access denied for user ''@'localhost'（使用密码：NO）在 \ICS-FILESHARE\WWW\newmedia.leeds.ac.uk\ug10\cs10aer\screening_new\clean.php 第 11 行警告：mysql_real_escape_string()：无法在第 11 行的 \ICS-FILESHARE\WWW\newmedia.leeds.ac.uk\ug10\cs10aer\screening_new\clean.php 中建立到服务器的链接

但是我检查了我的数据库连接，一切似乎都正常 - 网站上的其他功能，例如登录和添加、删除和修改数据库详细信息都运行良好，并且它们使用相同的数据库连接脚本，所以只是这个注册由于我无法理解的原因，突然损坏的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T11:57:16.763

您必须在调用之前连接到数据库`mysql_real_escape_string`。当代码到达这一点时，连接尚未建立：

```
//Clean
echo "before clean";
$submit = clean_string($_POST['submit']);
echo "after clean"; 
```

或者，您可以使用 not-as-safe`mysql_escape_string`功能。`mysql_real_escape_string`需要数据库连接，因为它需要知道连接的字符编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:01:02.377

更好的是，不要使用 php mysql 函数和即将被弃用的 mysql_real_esape_string() 而是使用更新和更安全的 PDO。

# php - MySQL中具有左右组的分层查询

> ID：15598132
> 
> 赞同：0
> 
> 时间：2013-03-24T11:54:49.613
> 
> 标签：php, mysql, hierarchical

我有一个包含 2 列用户名和领导者的表

```
 login_user    sponsered_id  right_left
    test1       admin          Right
    test2       admin          Left
    test3       test1          Right
    test4       test1          Left
    test43      test2          Left
    test44      test3          Left 
```

我有一个功能

```
function display_children($parent, $level) { 

    // retrieve all children of $parent 

    $result = mysql_query('SELECT name, login_user, right_left FROM members_list '. 

                           'WHERE sponsered_id="'.$parent.'";'); 

    while ($row = mysql_fetch_array($result)) { 

        // indent and display the title of this child 

     echo '<tr><td>'.
   $row['login_user'].' </td><td> '.$row['right_left'].' </td><td> '.$row['sponsered_id'].
    "</td></tr>";  

        // call this function again to display this 

        // child's children 

        display_children($row['login_user'], $level+1); 

    } 

} 

echo display_children('admin',0); 
```

但没有得到正确的输出....它给了我输出

```
test1   Right   admin
test3   Right   test1
test44  Left    test3
test4   Right   test1
test2   Left    admin
test43  Left    test2 
```

需要输出为

```
test1   Right   admin
test2   Left    admin

test3   Right   test1
test4   Left    test1

        Right   test2
test43  Left    test2

        Right   test3
test44  Left    test3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T17:57:42.147

Try this

```
SELECT 
    login_user,
    right_left, 
    sponsered_id  
FROM (
    SELECT 
        login_user,
        right_left, 
        sponsered_id  
    FROM 
        members_list

    UNION

    SELECT 
        NULL,
        CASE when max(right_left) ='Left' THEN 'Right' ELSE 'Left' END AS right_left, 
        sponsered_id
    FROM 
        members_list  
    GROUP BY 
        sponsered_id
    HAVING count(sponsered_id) < 2
) as temp
ORDER BY
    sponsered_id, 
    right_left 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:23:43.643

你可以试试这个

```
 select login_user , right_left , sponsered_id  from (

   select login_user , right_left , sponsered_id 
    from members_list
   union all

    select login_user , if(right_left ='left', 'right', 'right' ) right_left ,  sponsered_id
   from members_list 

  )t
  group by sponsered_id, right_left
  order by login_user 
```

[**在这里演示**](http://sqlfiddle.com/#!2/20a50/38)

# c# - 在 C# 中获取客户信息

> ID：15598140
> 
> 赞同：2
> 
> 时间：2013-03-24T11:55:36.110
> 
> 标签：c#, networking, ip-address, mac-address, network-scan

我有一个应用程序可以扫描本地网络以查找连接的 PC。

![在此处输入图像描述](../Images/c2ef813a3e4723df5a56a146ae7b97f6.png)

我想获取客户端信息（IP地址、MAC地址、主机名...）和连接状态（下载速率、上传速率），并将它们放在 中`ListView`，但问题是这些信息不是恒定的！

我怎样才能实时获得这些信息？`ListView`每次客户端的信息发生变化时，信息会发生变化吗？

我当前的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Collections;
using System.Text;
using System.Windows.Forms;
using NetUtils;
using System.Net;

namespace WindowsFormsApplication5
{

public partial class Form1 : Form
{
    private IPScanner _scanner;

    private class HostSorterByIP : IComparer
    {
        public int Compare(object x, object y)
        {
            byte[] bytes1 = ((IPScanHostState)((ListViewItem)x).Tag).Address.GetAddressBytes();
            byte[] bytes2 = ((IPScanHostState)((ListViewItem)y).Tag).Address.GetAddressBytes();

            int i = bytes1.Length - 1;
            for (; i > 0 && bytes1[i] == bytes2[i]; i--)
                ;

            return bytes1[i] - bytes2[i];
        }
    }

    public Form1()
    {
        InitializeComponent();

        _scanner = new IPScanner((int)_spnConcurrentPings.Value, (int)_spnPingsPerScan.Value, _cbContinuousScan.Checked,
            (int)_spnTimeout.Value, (int)_spnTTL.Value, _cbDontFragment.Checked, (int)_spnBufferSize.Value);

        _scanner.OnAliveHostFound += new IPScanner.AliveHostFoundDelegate(_scanner_OnAliveHostFound);

        _scanner.OnStartScan += new IPScanner.ScanStateChangeDelegate(_scanner_OnStartScan);
        _scanner.OnStopScan += new IPScanner.ScanStateChangeDelegate(_scanner_OnStopScan);
        _scanner.OnRestartScan +=new IPScanner.ScanStateChangeDelegate(_scanner_OnRestartScan);
        _scanner.OnScanProgressUpdate +=new IPScanner.ScanProgressUpdateDelegate(_scanner_OnScanProgressUpdate);

        _lvAliveHosts.ListViewItemSorter = new HostSorterByIP();

        _cmbRangeType.SelectedIndex = 0;
    }

    private void _scanner_OnAliveHostFound(IPScanner scanner, IPScanHostState host)
    {
        if (InvokeRequired)
        {
            BeginInvoke(new IPScanner.AliveHostFoundDelegate(_scanner_OnAliveHostFound), scanner, host);
            return;
        }

        ListViewItem item = new ListViewItem();
        item.Tag = host;

        item.BackColor = Color.GreenYellow;
        item.SubItems.Add(host.Address.ToString());
        item.SubItems.Add("");
        item.SubItems.Add("");
        item.SubItems.Add("");

        _lvAliveHosts.Items.Add(item);
        _lvAliveHosts.Sort();

        host.OnHostNameAvailable += new IPScanHostState.HostNameAvailableDelegate(host_OnHostNameAvailable);
        host.OnStateChange += new IPScanHostState.StateChangeDelegate(host_OnStateChange);

        if (!host.IsTesting())
        {
            item.ImageIndex = (int)host.QualityCategory;
            item.SubItems[2].Text = host.AvgResponseTime.ToString("F02") + " ms";
            item.SubItems[3].Text = ((float)(host.LossCount) / host.PingsCount).ToString("P");
            item.SubItems[4].Text = host.HostName;
        }

        //AddLogEntry("Host [" + host.Address.ToString() + "] is alive.");

        Timer newTimer = new Timer();
        newTimer.Tag = item;
        newTimer.Interval = 2000;
        newTimer.Tick += new EventHandler(newTimer_Tick);

        newTimer.Enabled = true;
    }

    void host_OnHostNameAvailable(IPScanHostState host)
    {
        if (InvokeRequired)
        {
            BeginInvoke(new IPScanHostState.HostNameAvailableDelegate(host_OnHostNameAvailable), host);
            return;
        }

        ListViewItem item = FindListViewItem(host);
        if (item != null)
            item.SubItems[4].Text = host.HostName;
    }

    private ListViewItem FindListViewItem(IPScanHostState host)
    {
        foreach (ListViewItem item in _lvAliveHosts.Items)
        {
            if (item.Tag == host)
                return item;
        }

        return null;
    }

    private void host_OnStateChange(IPScanHostState host, IPScanHostState.State oldState)
    {
        if (InvokeRequired)
        {
            BeginInvoke(new IPScanHostState.StateChangeDelegate(host_OnStateChange), host, oldState);
            return;
        }

        if (!host.IsTesting())
        {
            ListViewItem item = FindListViewItem(host);
            if (item != null)
            {
                if (host.IsAlive())
                {
                    item.ImageIndex = (int)host.QualityCategory;
                    item.SubItems[2].Text = host.AvgResponseTime.ToString("F02") + " ms";
                    item.SubItems[3].Text = ((float)(host.LossCount) / host.PingsCount).ToString("P");
                }
                else
                {
                    //AddLogEntry("Host [" + host.Address.ToString() + "] died.");

                    host.OnStateChange -= host_OnStateChange;
                    host.OnHostNameAvailable -= host_OnHostNameAvailable;

                    item.BackColor = Color.IndianRed;

                    Timer removeTimer = new Timer();
                    removeTimer.Tag = item;
                    removeTimer.Interval = 2000;
                    removeTimer.Tick += new EventHandler(removeTimer_Tick);

                    removeTimer.Enabled = true;
                }
            }
        }
    }

    void newTimer_Tick(object sender, EventArgs e)
    {
        Timer timer = (Timer)sender;

        timer.Stop();
        timer.Tick -= newTimer_Tick;

        ListViewItem item = (ListViewItem)timer.Tag;
        item.BackColor = Color.White;
    }

    void removeTimer_Tick(object sender, EventArgs e)
    {
        Timer timer = (Timer)sender;

        timer.Stop();
        timer.Tick -= newTimer_Tick;

        ListViewItem item = (ListViewItem)timer.Tag;
        _lvAliveHosts.Items.Remove(item);
    }

    private void _scanner_OnStartScan(IPScanner scanner)
    {
        if (InvokeRequired)
        {
            BeginInvoke(new IPScanner.ScanStateChangeDelegate(_scanner_OnStartScan), scanner);
            return;
        }

        foreach (ListViewItem item in _lvAliveHosts.Items)
        {
            ((IPScanHostState)item.Tag).OnStateChange -= host_OnStateChange;
            ((IPScanHostState)item.Tag).OnHostNameAvailable -= host_OnHostNameAvailable;
        }

        _lvAliveHosts.Items.Clear();

        _prgScanProgress.Value = 0;

        EnableSettings(false);
    }

    private void EnableSettings(bool enable)
    {
        _cmbRangeType.Enabled = _tbRangeStart.Enabled = _tbRangeEnd.Enabled = _spnTimeout.Enabled = _spnTTL.Enabled = _spnBufferSize.Enabled = _cbDontFragment.Enabled =
            _spnConcurrentPings.Enabled = _spnPingsPerScan.Enabled = _cbContinuousScan.Enabled = enable;

        _btnStartStop.Text = enable ? "&Start" : "&Stop";
        if (enable)
            _prgScanProgress.Text = "Scanner is not running!";
    }

    private void _btnStartStop_Click(object sender, EventArgs e)
    {
        if (!_scanner.Active)
        {
            try
            {
                _scanner.Start(_cmbRangeType.SelectedIndex == 0
                    ? new IPScanRange(IPAddress.Parse(_tbRangeStart.Text), IPAddress.Parse(_tbRangeEnd.Text))
                    : new IPScanRange(IPAddress.Parse(_tbRangeStart.Text), int.Parse(_tbRangeEnd.Text)));
            }
            catch (FormatException)
            {
                MessageBox.Show(this, "Cannot parse IP range or subnetmask!", "Error!", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }
        }
        else
            _scanner.Stop(false);
    }

    private void _scanner_OnStopScan(IPScanner scanner)
    {
        if (InvokeRequired)
        {
            BeginInvoke(new IPScanner.ScanStateChangeDelegate(_scanner_OnStopScan), scanner);
            return;
        }

        EnableSettings(true);

        _prgScanProgress.Value = 0;
    }

    void _scanner_OnRestartScan(IPScanner scanner)
    {
        if (InvokeRequired)
        {
            BeginInvoke(new IPScanner.ScanStateChangeDelegate(_scanner_OnRestartScan), scanner);
            return;
        }

        _prgScanProgress.Value = 0;
    }

    void _scanner_OnScanProgressUpdate(IPScanner scanner, IPAddress currentAddress, ulong progress, ulong total)
    {
        if (InvokeRequired)
        {
            BeginInvoke(new IPScanner.ScanProgressUpdateDelegate(_scanner_OnScanProgressUpdate), scanner, currentAddress, progress, total);
            return;
        }

        int prog = (int)((100 * progress) / total);
        _prgScanProgress.Value = prog;
        _prgScanProgress.Text = prog.ToString() + "%" + " [" + currentAddress.ToString() + "]";
    }

    private void _cmbRangeType_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (_cmbRangeType.SelectedIndex == 0)
        {
            _lRangeSep.Text = "-";
            _lRangeEnd.Text = "Range &End:";
            _tbRangeEnd.Size = new Size(130, _tbRangeEnd.Size.Height);
        }
        else
        {
            _lRangeSep.Text = "/";
            _lRangeEnd.Text = "Subnet &Mask:";
            _tbRangeEnd.Size = new Size(32, _tbRangeEnd.Size.Height);
        }
    }

    //private void _lvAliveHosts_DoubleClick(object sender, EventArgs e) { _btnAddHost_Click(sender, e); }

    private void IPScanForm_FormClosing(object sender, FormClosingEventArgs e) { _scanner.Stop(true); }

    private ListViewItem.ListViewSubItem _activeTooltipSubitem = null;

    private static string[] QualityCategoryNames = { "Very Poor", "Poor", "Fair", "Good", "Very Good", "Excellent", "Perfect" };

    private void _lvAliveHosts_MouseMove(object sender, MouseEventArgs e)
    {
        ListViewItem item = _lvAliveHosts.HitTest(e.Location).Item;
        if (item != null)
        {
            ListViewItem.ListViewSubItem subitem = _lvAliveHosts.HitTest(e.Location).SubItem;
            if (subitem != null && item.SubItems.IndexOf(subitem) == 0)
            {
                if (_activeTooltipSubitem != subitem)
                {
                    _ttQuality.Show("Quality: " + QualityCategoryNames[item.ImageIndex], _lvAliveHosts, item.SubItems[1].Bounds.X, subitem.Bounds.Y);
                    _activeTooltipSubitem = subitem;
                }

                return;
            }
        }

        _activeTooltipSubitem = null;
        _ttQuality.Hide(_lvAliveHosts);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:06:34.040

我将创建客户列表并在列表视图中显示它们。

然后，在后台线程中，每隔 X 秒轮询所有当前客户端。接下来，将更新的客户端列表与上次更新的客户端列表进行比较。

剩下要做的是将任何新客户端添加到列表中，并删除任何不再存在的客户端。

注意上下文，使用 InvokeRequired() 从后台线程获取对 UI 控件的访问。

**编辑：**

这是运行后台线程的方法：

```
static void Main(string[] args)
        {

            Thread worker = new Thread(DoBackgroundWork);
        }

        public static void DoBackgroundWork()
        {

            while (true)
            {
                //Sleep 10 seconds
                Thread.Sleep(10000);

                //Do some work and than post to the control using Invoke()

            }

        } 
```

# ruby-on-rails - 我需要将修补程序应用于生产，但我没有创建分支，我该怎么办？

> ID：15598141
> 
> 赞同：4
> 
> 时间：2013-03-24T11:55:40.537
> 
> 标签：ruby-on-rails, git, heroku

我开始在没有分支的情况下处理代码中的一堆新特性。

这些新功能还没有准备好部署。然而，一个紧急请求已经出现，以解决不同的问题。

我想回到开始添加新功能之前的版本，在那里应用修复，然后部署。

但是，我对哪个应该成为分支以及哪个版本应该合并到哪个版本感到困惑。

有人可以为我提供这个问题的解决方案，作为一个逐步完成的 git 过程。

**注意**，我从来没有在源代码控制上分支过（现在我明白了为什么我应该拥有）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:07:06.133

这是一种方法，可能还有一种更简单的方法。这也假设您所做的更改仅在您的计算机上本地进行，而不是推送到任何远程分支。

可以说我们有

```
 master
             |
A - B - C' - D' 
```

where`C'`并`D'`使用您不想部署的新功能标记提交。

首先，在当前提交 ( `master`) 处创建一个新分支：

```
git branch new_feature 
```

现在我们必须指向 commit`D'`和. 这对于不要丢失您已经进行的任何更改很重要。`master``new_feature`

```
 master
             |
A - B - C' - D'
             |
        new_feature 
```

现在我们想将`master`分支重置为没有新功能的状态，即提交`B`我们可以使用`git reset --hard`.
**重要提示：**如果此时您有未提交的更改，它们将丢失。我建议阅读这篇关于 的[优秀文章`git reset`](http://git-scm.com/2011/07/11/reset.html)，以了解它真正在做什么。

```
git reset --hard B 
```

结构现在看起来像：

```
 master
    |
A - B - C' - D'
             |
        new_feature 
```

在`master`分支上，您现在可以进行修补程序更改（提交`E`）并将它们推送到 heroku：

```
 master
        |
A - B - E
     \
      C' - D'
           |
       new_feature 
```

然后您可以将修补程序合并到`new_feature`分支中，或者只是将其重新定位在修补程序之上：

```
git rebase master new_feature 
```

这导致：

```
 master
        |
A - B - E
         \
          C' - D'
               |
          new_feature 
```

* * *

Pro Git 书是学习 Git 的一个非常好的资源，而且它是免费的：http: [//git-scm.com/book](http://git-scm.com/book)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:23:43.007

我要做的是从您当前的状态创建一个分支作为功能分支，这样您就不会丢失任何工作。

```
git checkout -b new-features && git push origin new-features 
```

现在您已将当前状态保存到分支（并将其推送到远程），`git checkout`您的原始分支并将其恢复到当前头部之前的某个点。

最好的方法是使用`git revert`. 关于为什么以及如何可以找到的一个很好的解释：[Revert multiple git commits](https://stackoverflow.com/questions/1463340/revert-multiple-git-commits)。

一旦您恢复更改、提交和推送，我建议您创建一个分支来开发错误修复。这是一种很好的做法，原因与人们创建功能分支的原因相同。一个好的经验法则是创建一个与您正在处理的问题具有相同或相似名称/编号的分支。在那里进行所有更改，完成后，您可以将其拉入您要标记部署的任何分支。

最好的部分是无论是否将任何更改推送到远程，它都可以工作，它很简单并且遵循最佳实践。

希望有帮助。

编辑：回答评论中的问题。

“这还假设您所做的更改仅在您的计算机上本地进行，而不是推送到任何远程分支。”

如果您已经推送，该方法将不起作用。有一些方法可以解决它，但我不推荐它。

基本上，这两种方法之间的唯一区别在于它们的核心是一种`git reset --hard [commit]`使用，另一种使用`git revert`. 重置实际上告诉 git 返回到特定的提交，这本质上是您想要的效果，但如果您已经推送，则不赞成。由于 git 不允许推送进行非快进更改，并且您实际上已经删除了历史记录，因此您必须执行`git push origin [branch] --force`导致遥控器也丢失更改的操作。

Revert 实际上创建了一个提交，它将有关您正在撤消的提交的历史记录添加到 git。这更好，因为可以跟踪所有恢复的更改，并且从该分支拉出的任何人都不会变得不同步。当他们拉动时，他们将获得回复或回复。这样做的一个好的副作用是，如果您在还原更改中出错，您可以稍后还原它，因为它只是另一个提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T12:02:38.890

你现在可以创建一个新的分支，比如`git checkout -b my_current_work`，然后你可以回到 master - `git checkout master`，然后回到已经部署的提交 [希望你记得 ]。您可以使用例如`gitk`命令来查看图表并获取正确提交的哈希值。之后你可以`git checkout hash_of_the_commit`或者`git reset --hard hash_of_the_commit`（我建议结帐，我相信它更安全）。如果是上一次提交，你总是可以使用类似的语法`git checkout HEAD~1`，其中 ~1 表示上一次提交，~2 表示第二次最后一次提交等。你的整个工作应该仍然在“my_current_work”分支中，所以你不会丢失任何东西。只需确保在创建新分支之前提交所有更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T12:04:14.647

> 我开始在没有分支的情况下处理代码中的一堆新特性。

假设您没有提交其中任何一个，您可以在临时分支上提交它们。

```
git checkout -b temp_work
git commit -am "temporary work" 
```

然后你可以再次结帐`master`，从那里分支并在那里做你的紧急工作。

```
git checkout -b urgent_work 
```

完成后，通过其测试等，然后将其合并回`master`

```
git checkout master
git merge urgent_work 
```

# linux - windows-linux g++编译器内存错误

> ID：15598145
> 
> 赞同：0
> 
> 时间：2013-03-24T11:56:09.160
> 
> 标签：linux, windows, memory, g++

我已经在 Windows VS 平台上编写了我的代码，当我编译它时没有错误。但是当我尝试使用 g++ 编译器在 linux 上编译它时，我得到如下所示的错误：

```
[user@ssh ~]$ g++ main.cpp -o main
[user@ssh ~]$ ./main "data1_h1.txt" "data1_r1.txt" 3 "output1_S1"
*** glibc detected *** ./main: free(): invalid pointer: 0x00007fff795578b4 ***
======= Backtrace: =========
/lib64/libc.so.6[0x320ec716af]
/lib64/libc.so.6(cfree+0x4b)[0x320ec758db]
./main(__gxx_personality_v0+0x3b2)[0x4013da]
./main[0x401d4b]
/lib64/libc.so.6(__libc_start_main+0xf4)[0x320ec1d9c4]
./main(__gxx_personality_v0+0x71)[0x401099]
======= Memory map: ========
00400000-00405000 r-xp 00000000 00:16 18302619                           /users/lnxsrv1/ee/user/main
00604000-00605000 rw-p 00004000 00:16 18302619                           /users/lnxsrv1/ee/user/main
11159000-1117a000 rw-p 11159000 00:00 0 
320e800000-320e81c000 r-xp 00000000 fd:00 1585318                        /lib64/ld-2.5.so
320ea1c000-320ea1d000 r--p 0001c000 fd:00 1585318                        /lib64/ld-2.5.so
320ea1d000-320ea1e000 rw-p 0001d000 fd:00 1585318                        /lib64/ld-2.5.so
320ec00000-320ed4f000 r-xp 00000000 fd:00 1585379                        /lib64/libc-2.5.so
320ed4f000-320ef4f000 ---p 0014f000 fd:00 1585379                        /lib64/libc-2.5.so
320ef4f000-320ef53000 r--p 0014f000 fd:00 1585379                        /lib64/libc-2.5.so
320ef53000-320ef54000 rw-p 00153000 fd:00 1585379                        /lib64/libc-2.5.so
320ef54000-320ef59000 rw-p 320ef54000 00:00 0 
320f000000-320f082000 r-xp 00000000 fd:00 1585438                        /lib64/libm-2.5.so
320f082000-320f281000 ---p 00082000 fd:00 1585438                        /lib64/libm-2.5.so
320f281000-320f282000 r--p 00081000 fd:00 1585438                        /lib64/libm-2.5.so
320f282000-320f283000 rw-p 00082000 fd:00 1585438                        /lib64/libm-2.5.so
3212800000-321280d000 r-xp 00000000 fd:00 1585420                        /lib64/libgcc_s-4.1.2-20080825.so.1
321280d000-3212a0d000 ---p 0000d000 fd:00 1585420                        /lib64/libgcc_s-4.1.2-20080825.so.1
3212a0d000-3212a0e000 rw-p 0000d000 fd:00 1585420                        /lib64/libgcc_s-4.1.2-20080825.so.1
3217000000-32170e6000 r-xp 00000000 fd:00 782090                         /usr/lib64/libstdc++.so.6.0.8
32170e6000-32172e5000 ---p 000e6000 fd:00 782090                         /usr/lib64/libstdc++.so.6.0.8
32172e5000-32172eb000 r--p 000e5000 fd:00 782090                         /usr/lib64/libstdc++.so.6.0.8
32172eb000-32172ee000 rw-p 000eb000 fd:00 782090                         /usr/lib64/libstdc++.so.6.0.8
32172ee000-3217300000 rw-p 32172ee000 00:00 0 
2b43d24f0000-2b43d24f2000 rw-p 2b43d24f0000 00:00 0 
2b43d2508000-2b43d250a000 rw-p 2b43d2508000 00:00 0 
7fff79543000-7fff79558000 rw-p 7ffffffe9000 00:00 0                      [stack]
7fff795fd000-7fff79600000 r-xp 7fff795fd000 00:00 0                      [vdso]
ffffffffff600000-ffffffffffe00000 ---p 00000000 00:00 0                  [vsyscall]
Aborted 
```

我该如何解决这个错误？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:27:00.390

您不会在编译时收到错误，而是在运行时收到错误。

我建议编译`g++ -Wall -g`（并改进您的代码，直到没有收到警告）然后使用[valgrind](http://valrgrind.org/)调试内存泄漏，当然还有通常的`gdb`调试器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:29:40.367

您正在释放未分配的内存。第一个这样的例子是`residentData`。

尽管您没有分配它，但您在 main 中将其分配为 be`argv[1]`并在后面调用它。（从技术上讲，你确实分配了它。你只是稍后`delete[]`替换它）。`argv[1]`

正如@Basile Starynkevitch 所建议的那样，您可能希望在 valgrind 下运行您的代码。它会查明许多内存错误。

# java - 使用两个 FileWriter，一个附加，另一个不附加

> ID：15598148
> 
> 赞同：0
> 
> 时间：2013-03-24T11:56:22.977
> 
> 标签：java, filewriter

我`FileWriter`一个接一个地使用两个 s。

第一个不附加

```
BufferedWriter versionWriter = new BufferedWriter(new FileWriter(new File(filePath)));
versionWriter.write(s);
versionWriter.close(); 
```

而我想追加一个。

```
BufferedWriter bw = new BufferedWriter(new FileWriter(new File(filePath), true));
bw.newLine();
bw.write(s); 
```

问题是我首先`FileWriter`破坏了整个文件，因此使我丢失了数据。

我使用两个`FileWriter`s 的原因是第一个应该覆盖我的文本文件的第一行，而第二个应该附加到文件的末尾。

这样做的正确方法是什么？

编辑：我意识到可以先读取所有内容然后将其保存回来，但这非常低效，特别是因为我需要在文件中存储大量数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:01:17.030

使用 RandomAccessFile.seek(...) 将数据写入文件的特定位置。

但是除了读入内存，替换第一行并再次写入文件之外，“替换文件的第一行”并没有什么魔力。除非那条线总是有相同的长度。并且注意不要覆盖 EOL 字符。:-)

顺便说一句，不要忘记在关闭之前调用 flush() 。

# wikipedia - 使用维基百科表格重命名文件

> ID：15598150
> 
> 赞同：-2
> 
> 时间：2013-03-24T11:56:53.783
> 
> 标签：wikipedia

我想制作一个给定系列名称的程序，它将我的文件重命名为来自维基百科的剧集名称。我可能会将剧集列表放入表格或某些数据结构并重命名文件。可以吗？如果可以，我怎样才能从维基百科获得剧集列表？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:42:49.580

如果您想获取 Wikipedia 文章的文本，您可以使用[API](https://www.mediawiki.org/wiki/API)。

例如，要获取文章 HTML（包含在 XML 中），您可以使用如下请求：

[http://en.wikipedia.org/w/api.php?format=xml&action=parse&page=List%20of%20Breaking%20Bad%20episodes](http://en.wikipedia.org/w/api.php?format=xml&action=parse&page=List%20of%20Breaking%20Bad%20episodes)

如果您更喜欢使用 wikitext 而不是 HTML，则查询将类似于：

[http://en.wikipedia.org/w/api.php?format=xml&action=query&titles=List%20of%20Breaking%20Bad%20episodes&prop=revisions&rvprop=content](http://en.wikipedia.org/w/api.php?format=xml&action=query&titles=List%20of%20Breaking%20Bad%20episodes&prop=revisions&rvprop=content)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:05:44.843

从维基百科检索数据来做到这一点相当容易。我会使用 python 来检索带有`urllib2`or [requests](http://docs.python-requests.org/en/latest/)或[mechanize](https://pypi.python.org/pypi/mechanize/)的页面。您最喜欢的编程语言中可能有类似的功能。[使用BeautifulSoup](https://beautiful-soup-4.readthedocs.org/en/latest/)分析检索到的页面并使用它来检索名称。

更困难的可能是将您的本地文件名映射到该表，除非您的原始文件已经具有类似 S1E7 的内容，否则您将不知道从您创建的表中选择哪个剧集名称。

# python - IOError: [Errno 22] 无效模式 ('r') 或文件名：'c:\\Python27\test.txt'

> ID：15598160
> 
> 赞同：34
> 
> 时间：2013-03-24T11:57:46.177
> 
> 标签：python, file-io

以下有什么问题：

```
test_file=open('c:\\Python27\test.txt','r') 
```

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-03-24T12:00:17.620

`\t`是一个制表符。改用原始字符串：

```
test_file=open(r'c:\Python27\test.txt','r') 
```

或双斜杠：

```
test_file=open('c:\\Python27\\test.txt','r') 
```

或改用正斜杠：

```
test_file=open('c:/Python27/test.txt','r') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T12:14:14.330

当您想避免转义时，请始终使用 'r' 来获取原始字符串。

```
test_file=open(r'c:\Python27\test.txt','r') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T12:06:05.990

`\`是 Python 中的转义字符。`\t`被解释为一个选项卡。如果您需要`\`字符串中的字符，则必须使用`\\`.

您的代码应该是：
`test_file=open('c:\\Python27\\test.txt','r')`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T12:00:12.690

`\t`在字符串中标记制表符的转义序列。对于文字`\`，使用`\\`.

# javascript - 在 jaydata 中：将变量传递给过滤器，仅全局有效

> ID：15598161
> 
> 赞同：3
> 
> 时间：2013-03-24T11:57:49.510
> 
> 标签：javascript, variables, global, jaydata

我有这个功能：

```
function db_borrarServer(idABorrar){
    serversDB.servidores
        .filter(function(elementoEncontrado) {
            return elementoEncontrado.id_local == this.idABorrar; 
        })
        .forEach(function(elementoEncontrado){
                console.log('Starting to remove ' + elementoEncontrado.nombre);
                serversDB.servidores.remove(elementoEncontrado);
                serversDB.saveChanges();
        });    
} 
```

不起作用，但如果我用数字替换变量“this.idABorrar”，它会起作用

```
return elementoEncontrado.id_local == 3; 
```

或者，如果我将 idABorrar 声明为全局，则可以。

我需要将 idABorrar 作为变量传递。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:01:07.280

EntitySet filter() 函数（与任何其他谓词函数一样）不是真正的闭包块，而是编写为函数的表达式树。要解析此范围内的变量，您只能依赖 Global 和`this`which 代表参数上下文。这遵循 HTML5 Array.filter 语法。要访问闭包变量，您需要通过参数传递它们。一些例子

在事件处理程序中，最长的语法是：

```
$('#myelement').click(function() {
   var element = this;
   context.set.filter(function(it) { return it.id_local == this.id; }, 
                      { id: element.id});
}); 
```

但是，您也可以省略从`this`JayData 1.2 开始引用参数并使用字符串谓词

```
$('#myelement').click(function() {
   var element = this;
   context.set.filter("it.id_local == id", { id: element.id});
}); 
```

请注意，在字符串语法中，使用`it`来表示 lambda 参数是强制性的。

在 JayData 1.3 中，我们将有一个更简单的调用语法

```
$('#myelement').click(function() {
   var element = this;
   context.set.filter("it.id_local", "==", element.id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:19:29.690

在过滤器中，您应该传递一个作为对象的`this`对象，如下所示：

```
.filter(function(){},{idABorrar: foo}) 
```

`foo`可以是 const 或范围内的任何变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-11T07:15:21.320

.filter() 函数采用可选的第二个参数，该参数分配给第一个参数函数内部的*this 。*

所以你可以像这样修改你的代码：

```
function db_borrarServer(idABorrar){
    serversDB.servidores
        .filter(function(elementoEncontrado) {
            return elementoEncontrado.id_local == this; 
        }, idABorrar)
        .forEach(function(elementoEncontrado){
                console.log('Starting to remove ' + elementoEncontrado.nombre);
                serversDB.servidores.remove(elementoEncontrado);
                serversDB.saveChanges();
        });
} 
```

让我知道你是怎么做的——我对 jaydata 也很陌生，而且我也有点疯狂地试图让我的头脑进入这个范式。但是我遇到了您试图解决相同问题的问题，这就是我为我解决的方法。

# javascript - for循环内的异步chrome方法

> ID：15598162
> 
> 赞同：0
> 
> 时间：2013-03-24T11:58:03.307
> 
> 标签：javascript, google-chrome-extension, bookmarks

对于每个变量 i，下面的代码应该遍历每个书签节点并比较 url，无论它是否存在。

```
for(i=0;i<arg1;i++){
    chrome.bookmarks.getChildren(Traverse[i], function(child){       //to fetch the child nodes
        Loc =child.length;
        alert(Loc);   // This message to appear first
        if(Loc != 0){
            child.forEach(function(book) {
                if (book.url == urL){
                    alert("Bookmark already exist");
                    element = "init";
                }   
            }); 
        }
    });
alert("message to be printed last");
} 
```

由于该方法是异步的，因此我收到了最后一条消息，并且不会发生书签遍历。任何帮助将非常感激。

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:01:44.853

你可能需要一个闭包：

```
for(i=0;i<arg1;i++){
    (function(my_i) {
        chrome.bookmarks.getChildren(Traverse[my_i], function(child){
            Loc =child.length;
            alert(Loc);
            if(Loc != 0){
                child.forEach(function(book) {
                    if (book.url == urL){
                        alert("Bookmark already exist");
                        element = "init";
                    }   
                }); 
            }
        });
    })(i);
    alert("message to be printed last");
} 
```

我猜你知道你正在覆盖循环内每次迭代`Loc`的变量和变量？`element`

# android - 使用联系人图像 (AsyncTask) 在自定义 ArrayAdapter 中加载 ImageView

> ID：15598168
> 
> 赞同：1
> 
> 时间：2013-03-24T11:58:50.393
> 
> 标签：android, android-asynctask, android-arrayadapter

我想在自定义 ArrayAdapter 中使用 AsyncTask 将用户联系人中的图像加载到 ImageView

这是我的图像加载代码片段：

```
class LoadImage extends AsyncTask<String, Void, Bitmap> 
{

    protected Bitmap doInBackground(String... ac) 
    {
        Bitmap contactPhoto = null;
        try 
        {
           ContentResolver cr = context.getContentResolver();
            Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
            "DISPLAY_NAME = '" + ac[0] + "'", null, null);
            if (cursor.moveToFirst()) 
            {
                String contactId =
                    cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
                //
                // Get the contact photo.
                //
                Uri uri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI,
                    Long.parseLong(contactId));
                InputStream input =
                    ContactsContract.Contacts.openContactPhotoInputStream(cr, uri);
                contactPhoto = BitmapFactory.decodeStream(input);
            }
            cursor.close();
            if(contactPhoto != null)
            {
                q.setImageBitmap(contactPhoto);
            }
            else
            {
               q.setImageResource(R.drawable.no_image);
            }
        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
        return contactPhoto;
    }

    @Override
    protected void onPreExecute()
    {

    }

    @Override
    protected void onPostExecute(Bitmap contactPhoto) 
    {

    }
 } 
```

在此代码中，图像加载到错误的位置，例如，第 1 个人的 imgae 为第 3 个人设置了！

如果我将此代码放在 onPostExecute 方法中：

```
 if(contactPhoto != null)
            {
                q.setImageBitmap(contactPhoto);
            }
            else
            {
               q.setImageResource(R.drawable.no_image);
            } 
```

什么都无法加载。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T15:23:36.077

*嗨，我希望这会对你有所帮助*

```
 class LoadImage extends AsyncTask<String, Void, List<Bitmap>> 
{

    protected List<Bitmap> doInBackground(String... ac) 
    {
        List<Bitmap> totalBitmap = new ArrayList<Bitmap>();
        Bitmap contactPhoto = null;
        try 
        {
           ContentResolver cr = context.getContentResolver();
            Cursor cursor = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
            "DISPLAY_NAME = '" + ac[0] + "'", null, null);
            if (cursor.moveToFirst()) 
            {
                String contactId =
                    cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
                //
                // Get the contact photo.
                //
                Uri uri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI,
                    Long.parseLong(contactId));
                InputStream input =
                    ContactsContract.Contacts.openContactPhotoInputStream(cr, uri);
                contactPhoto = BitmapFactory.decodeStream(input);
                totalBitmap.add(contactPhoto);
            }
            cursor.close();

        } 
        catch (Exception e) 
        {
            e.printStackTrace();
        }
        return totalBitmap;
    }

    @Override
    protected void onPreExecute()
    {

    }

    @Override
    protected void onPostExecute(List<Bitmap> contactPhoto) 
    {
        for (Bitmap bitmap : contactPhoto) {

            if(contactPhoto != null)
            {
                q.setImageBitmap(bitmap);
            }
            else
            {
               q.setImageResource(R.drawable.no_image);
            }

        }

    }
 } 
```

# enterprise-architect - 在 Enterprise Architect 中使用模板时如何格式化 RTF/PDF 文档中的数值

> ID：15598169
> 
> 赞同：1
> 
> 时间：2013-03-24T11:58:55.160
> 
> 标签：enterprise-architect

在项目管理过程中，为选定元素创建工作时，我为*时间*设置了值（即 2），Enterprise Architect 用六个十进制零保存该值。生成文档时，这些值也以六个零导出。

有没有一种方法可以将这些值格式化为零小数（即 2）以及如何？

这是 RTF 模板（其他元素已删除）。

我希望格式化的值以粗体显示。

包 > {Pkg.Name}

元素 >{Element.Name}

努力 > 时间：**{ElemEffort.Value}**

<努力

<元素子包> <子包<包

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:14:55.557

假设您正在创建 RTF 文档，您可以做的是使用模板片段。

模板片段允许您附加 SQL 查询或 EA 脚本，该脚本将文档生成引擎正在处理的当前包或元素的标识作为其输入。

鉴于此，您可以编写一段代码来检索相关信息并按照您想要的方式对其进行格式化。使用 SQL，您需要查看 t_object 和 t_objectefort 表；使用脚本，您将需要 Element 和 Effort 类。

如果没有原始的 RTF 模板，我不能更具体。

# ios - 使用增强现实找出卫星的位置

> ID：15598174
> 
> 赞同：1
> 
> 时间：2013-03-24T11:59:40.970
> 
> 标签：ios

我已经为 iPhone 开发了应用程序。在我的应用程序中，我想通过条形码和图片以及 gps 的安装配合来跟踪所有菜肴的安装。他们还希望有一个增强现实模块（在功能方面类似于 1。该应用程序将允许拍摄菜肴安装的照片。

```
The app will capture GPS co-ordinates of the installation area.

The app will allow the installer to point the phone to the sky and find out the location of satellite using Augmented Reality

The app will work without internet connection. 
```

# android - AVRDUDE Android Arduino ioctl 错误

> ID：15598179
> 
> 赞同：3
> 
> 时间：2013-03-24T12:00:05.760
> 
> 标签：android, arduino, avr, avrdude

我之前的问题，*[Android 无法使用 AVRDUDE 与 Arduino 对话](https://stackoverflow.com/questions/15596376/android-cannot-talk-to-arduino-using-avrdude/15596858?noredirect=1#15596858)*，已经解决。我现在可以将我的[Nexus 7](http://en.wikipedia.org/wiki/Nexus_7)连接到我的 Arduino Uno。我正在运行的完整命令是这样的：

```
/system/xbin/su (getting root here)
/data/data/jackpal.androidterm/local/bin/avrdude -F -V -c arduino -p ATMEGA328P -P /dev/bus/usb/002/002  -b 115200 -C /data/data/jackpal.androidterm/local/etc/avrdude.conf -U flash:w:led.hex 
```

在这里，我试图将十六进制文件放在 Arduino 上。但是，我确实收到以下错误：

> avrdude: ser_open():can't set attributes for device "/dev/bus/usb/002/002": Inappropriate ioctl for device ioctl("TIOCMGET"): Bad file deriptor

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:26:03.153

原来我使用了错误的端口。我用`/dev/bus/usb/002/002`了我应该用的`ttyACM0`。

# java - 如何从字符串生成 int 数组？

> ID：15598185
> 
> 赞同：-5
> 
> 时间：2013-03-24T12:00:21.317
> 
> 标签：java

用户假设以这种模式输入数字： `"( -2 , 9)" OR "(-2,-3) , etc".`
我正在构建一个`x,y`图表，我需要这些点。
如何将这些数字放入 int 数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:03:09.100

没有什么比好的 'ol 字符串操作更好的了：

*   将“）”和“（”替换为“”。
*   调用 String.split() 得到一个字符串数组。
*   分配一个相同长度的 int 数组。
*   循环遍历字符串数组，为每个元素调用 Integer.parseInt()。

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:05:22.183

用这个

```
Parameters p = new Parameters();
NumberVariable[] iV = IntegerVariable.newArray(2);
Format.printf("Enter two values: "); 
Format.scanf("(%i, %i)", p.add(iV[0]).add(iV[1])); 
```

# validation - 如何使用 p:growl 仅用于确认而不是验证 jsf2 primefaces

> ID：15598192
> 
> 赞同：7
> 
> 时间：2013-03-24T12:01:15.193
> 
> 标签：validation, jsf-2, primefaces, message, growl

我只想在提交`p:growl`对话框以确认用户记录已保存并且我使用`p:message`验证时使用

但问题是 p:growl 也用于验证旁边`p:message`

```
<p:dialog id="dialog" modal="true" header="Nouveau Type"
                widgetVar="dlg">

                <h:panelGrid id="panel" columns="3" cellpadding="5">

                    <h:outputLabel for="libelle" value="Libelle :" />
                    <p:inputText value="#{typeMB.newtype.libelle}" id="libelle"
                        required="true" label="libelle" requiredMessage="Veuillez saisir une valeur" 
                        validatorMessage="la valeur doit depasser 2 caracteres" >
                        <f:validateLength minimum="2"  />
                    </p:inputText>
                    <p:message for="libelle" display="text"  />

                    <h:outputLabel for="commission" value="commission :" />
                    <h:inputText value="#{typeMB.newtype.commission}" id="commission"
                        required="true" label="commission" 
                        requiredMessage="Veuillez saisir une valeur" 
                        converterMessage="Veuillez saisir un nombre"
                        validatorMessage="Veuillez saisir entre 0 et 100" >
                        <f:validateDoubleRange minimum="10" maximum="100" />
                        </h:inputText>
                    <p:message for="commission" display="text" />

                    <f:facet name="footer">
                        <p:commandButton id="ajouterBoutton" value="Ajouter"
                            update="panel :form:ourdatatable" actionListener="#{typeMB.ajouter}"
                            oncomplete="handleLoginRequest(xhr, status, args)" />
                        <p:commandButton type="reset" value="vider" update="panel"
                    process="@this" actionListener="#{typeMB.reset}" />
                    </f:facet>

                    <p:growl style="z-index=1000" id="growl" showDetail="true"
                        life="3000" />
                </h:panelGrid>

            </p:dialog> 
```

如何让 p:growl 只保存记录以确认它而不是验证，因为咆哮的值是从托管 bean 设置的：

```
msg = new FacesMessage(FacesMessage.SEVERITY_INFO, "Confirmation",
                "Type ajouté avec succés"); 
```

我希望我能解释更多我的问题

谢谢你

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T13:34:02.383

如果您使用`null`客户端 ID 设置消息，那么它将成为“全局消息”。现在，如果您在 中设置`globalOnly="true"`属性`<p:growl>`，那么它将*只*显示那种消息。

因此，所以

```
context.addMessage(null, message); 
```

和

```
<p:growl ... globalOnly="true" /> 
```

应该为你做。

# php - 使用加载功能后jquery表单提交不起作用

> ID：15598194
> 
> 赞同：0
> 
> 时间：2013-03-24T12:01:22.187
> 
> 标签：php, jquery, dom

我有一个 index.html 页面，它使用 jquery 调用驻留在同一站点内的 somepage.php 来加载这个 index.html 页面的内容。

所以这是预期的页面加载顺序：index.html -> somepage.php -> submit.php（如果单击提交按钮）

index.html 只有“main-div”，没有内容。当调用 somepage.php 时，通过运行 php 脚本加载“main-div”内容。main-div 包含一个带有提交按钮的小表单的子 div。使用 jQuery，我查看是否单击了提交按钮，当单击时，将调用 submit.php 脚本。

这是准系统代码：

```
<!DOCTYPE html>
<html>
<head>
        <script src="js/jquery.js"></script>
        <script>
            $('document').ready(function(){            

                $("#main-div").load("http://www.someurl.com/somepage.php");

                $('#item-submit').click(function(){
                    jsURL = $('#input').val();
                    submit(jsURL);

                });

                function submit(jsURL){
                    $.get(
                        'http://www.someurl.com/submit.php',    
                        {   item: jsURL   },
                        function(data){
                            if(data=="success")
                            {
                            $('#submit-status').html(data);
                            }
                            else
                            {
                            $('#submit-status').html(data);
                            }
                        }
                    );
                }

            });
        </script>

</head>
<body>

    <div id="main-div"> </div>

</body>
</html> 
```

现在的问题： index.html 页面加载时所有内容都正确显示（带有提交按钮的小表单，所有其他 main-div 内容，所有内容都显示）。但是，提交按钮并没有调用submit.php脚本，这意味着我相信点击事件对应的jQuery代码没有被注册。

我对 jQuery 相当陌生。这与我在 jQuery .ready() 中“排序”代码的方式有关吗？与调用函数之前 DOM 未准备好有关，或者可能与 jQuery 中的 .load() 问题有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:24:51.663

正如大家所指出的，**加载**函数是异步工作的，因此您的点击处理程序不适用于“未来”的 div。

您可以像这样将处理程序绑定到未来元素：

```
$(document).on('click', '#item-submit', function(event){
          jsURL = $('#input').val();
          submit(jsURL);  
}); 
```

这样您就可以在 jQuery 文档就绪函数中绑定您的处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T12:13:50.517

`load`异步加载数据，这意味着当您在提交按钮上分配单击处理程序时，按钮本身可能尚未出现在页面上。要克服这个问题，您有两种选择：

1.  指定加载的成功处理程序。

    ```
    $("#main-div").load("http://www.someurl.com/somepage.php", function(){
        $('#item-submit').click(function(){
                jsURL = $('#input').val();
                submit(jsURL);
            });
    }); 
    ```

2.  用于`on`指示应将单击处理程序分配给页面上或将要出现的元素。

    ```
    $('#item-submit').on('click', function(){
        jsURL = $('#input').val();
        submit(jsURL);
    }); 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T12:09:46.707

```
$(document).ready(function(){            
    $("#main-div").load("http://www.someurl.com/somepage.php");

    $("#main-div").on('click', '#item-submit', function(e){
           e.preventDefault();
           var jsURL = $('#input').val();
           submit(jsURL);
    });

    function submit(jsURL){
      $.get('http://www.someurl.com/submit.php', {item: jsURL}, function(data){
           $('#submit-status').html(data);
      });
    }
}); 
```

1.  不要引用文件
2.  `load()`是 的快捷方式`$.ajax`，它是异步的，因此`#item-submit`在附加事件处理程序时不存在，您需要一个委托的事件处理程序。
3.  如果它确实是表单内的提交按钮，请确保您阻止默认操作，以便表单不会被提交。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T12:11:36.517

该[`load`](http://api.jquery.com/load/)函数异步工作。当您尝试绑定事件处理程序时，您的代码`#item-submit`还不存在。

成功绑定事件处理程序：

```
$("#main-div").load("http://www.someurl.com/somepage.php", function () {
    $('#item-submit').click(function () {
        jsURL = $('#input').val();
        submit(jsURL);
    });
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-24T12:28:00.210

尝试这个 ：

```
<script>
$(document).ready(function(){
        $("#main-div").load("http://www.someurl.com/somepage.php",function(){
        $("#main-div").on('click', '#item-submit', function(e){
           e.preventDefault();
           var jsURL = $('#input').attr('value');
           submit(jsURL);
        });
        });
});

function submit(jsURL){
                    $.ajax({
                    url:'http://www.someurl.com/submit.php',
                    type :'GET',
                    success: function(data){
                    $('#submit-status').html(data);
                    }
                    });

                }
</script> 
```

# java - Tomcat j_security_check 用户 ID

> ID：15598202
> 
> 赞同：0
> 
> 时间：2013-03-24T12:02:40.723
> 
> 标签：java, tomcat, j-security-check

Tomcat j_security_check 的快速问题...

任何人都知道如何在 user_role 表中更改 'id' 的 'user_name'，因为我更愿意通过匹配 ID 而不是用户名来验证

服务器.xml

```
<Realm  className="org.apache.catalina.realm.JDBCRealm"
        driverName="com.mysql.jdbc.Driver"
        connectionURL="jdbc:mysql://localhost/test"
        connectionName="root" connectionPassword="password"
        userTable="user" userNameCol="user_name" userCredCol="user_pass"
        userRoleTable="user_role_link" roleNameCol="role_id" /> 
```

表

```
user
    id INT PK
    user_name PK
    user_pass
role
    id INT PK
    role_name
user_role
    user_id FK user_id to user.id
    role_id FK role_id to role.id 
```

形式仍然是：

```
<form method="post" action="j_security_check" name="loginForm">        
    <j:if test='${not empty param["failed"]}'>
        Invalid sign-in credentials<br/>
    </j:if>        
    <h:inputText id="j_username" autocomplete="off" />
    <br/>
    <h:inputSecret id="j_password" autocomplete="off"/>
    <br/>
    <h:commandButton type="reset" value="Clear"/>
    <h:commandButton type="submit" value="Login"/>          
</form> 
```

我已经让 role_id 工作了，但是使用 user_id 我只是得到一个

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'user_name' in 'where clause' 
```

例外

提前致谢

KPS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T19:50:28.163

你不能这样做`tomcat j_security_check`。如果`username`是一个独特的字段，那么删除它是更好的解决方案`id`。但我建议你合并这两个表。您只能存储一个包含以下字段的表：`username`、`password`和`role`。（或者你可以添加`id`它！）

我想这样，你的问题就迎刃而解了！

# eclipse - 导入 javax.persistence 无法解析

> ID：15598210
> 
> 赞同：41
> 
> 时间：2013-03-24T12:03:36.113
> 
> 标签：eclipse, persistence

我目前正在开发一个需要 javax.persistence 包中的 EntityManager EntityManagerFacotry 和 Persistence 的项目。它似乎是针对数据库服务的，但当前代码的文档记录不是很好。通过搜索谷歌，似乎应该有一个 xml 文件随之而来，但也没有一个。我想我的问题只是如何让这些未解决的导入消失？我是否必须在构建路径中添加另一个 jar？看来我不应该这样做，因为它从 1.5 开始就存在了。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2018-08-01T14:12:32.317

我遇到了同样的问题并意识到，由于我使用的是 spring boot，所以我需要做的就是添加以下依赖项：

```
 <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-data-jpa</artifactId>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-05-19T04:59:09.797

**是的，您可能需要添加另一个 jar 或依赖项**

`javax.persistence.*`是 Java Persistence API ( [JPA](https://en.wikipedia.org/wiki/Java_Persistence_API) ) 的一部分。它只是一个API，你可以把它想象成一个接口。JPA 有很多实现，这个[答案](https://stackoverflow.com/a/4477349/4212710)很好地阐述了每一个，以及使用哪个。

如果您的`javax.persistence.*`导入无法解析，则需要提供实现 JPA 的 jar。您可以通过手动下载它（并将其添加到您的项目）或通过向依赖管理工具（例如，Ivy/Maven/Gradle）添加声明来做到这一点。有关Maven 存储库上的 EclipseLink 实现（参考实现），请参见[此处。](http://mvnrepository.com/artifact/org.eclipse.persistence/eclipselink/2.5.0)

之后，您的导入应该得到解决。

另请参阅[此处](http://www.javaworld.com/article/2077817/java-se/understanding-jpa-part-1-the-object-oriented-paradigm-of-data-persistence.html)了解 JPA 是关于什么的。您所指的 xml 可能是`persistence.xml`，链接的第 3 页对此进行了说明。

**话虽如此，您可能只是指向错误的目标运行时**

如果我没记错的话，如果您将 JPA 部署到 JBoss 等 JavaEE 应用服务器中，则不需要提供 JPA 实现。请参阅[此处](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html_single/#architecture-javase)“请注意，在 Java EE 6 应用程序服务器（例如 JBoss AS 6）中部署应用程序时通常不需要它。”。尝试更改项目的目标运行时。

如果您的本地项目设置为指向 Tomcat，而您的远程存储库假定为 JavaEE 服务器，则可能是这种情况。请参阅[此处](https://stackoverflow.com/a/6882943/4212710)了解 Tomcat 和 JBoss 之间的区别。

编辑：我将我的项目更改为指向 GlassFish 而不是 Tomcat，并`javax.persistence.*`在没有任何明确的 JPA 依赖的情况下很好地解决了问题。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-03-26T07:01:46.493

hibernate-distribution-3.6.10.Final\lib\jpa ：添加这个 jar 来解决问题。它存在于 lib 文件夹中，里面有一个名为 jpa 的文件夹 ---> 里面有 hibernate-jpa-2.0-1.0.1.Final jar

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2017-09-01T13:20:02.790

如果有人在使用 Maven，则需要在 POM.XML 文件中添加依赖项。这篇文章的最新版本如下：

```
<dependency>
    <groupId>org.hibernate.javax.persistence</groupId>
    <artifactId>hibernate-jpa-2.1-api</artifactId>
    <version>1.0.0.Final</version>
</dependency> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-16T21:33:33.360

我通过添加以下依赖项解决了这个问题

```
<dependency>
    <groupId>javax.persistence</groupId>
    <artifactId>persistence-api</artifactId>
    <version>2.2</version>
</dependency> 
```

和...一起

```
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-data-jdbc</artifactId>
</dependency> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-03-28T09:43:48.157

如果您使用的是 spring boot 和 spring JPA，则在文件`Gradle`中添加以下依赖项`build.gradle`

```
dependencies {
    compile group: 'org.springframework.boot', name: 'spring-boot-starter-data-jpa', version: '2.1.3.RELEASE'
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-26T07:06:06.717

我的解决方案是选择我在 pom.xml 中定义的 Maven 配置文件，我在其中声明了休眠依赖项。

`CTRL + ALT + P`在日食。

在我的项目中，我遇到了这个问题和许多其他问题，因为在我的 pom 中，我有不同的配置文件来支持 Glassfish 3、Glassfish 4 和 WildFly，所以我每个容器都有不同版本的 Hibernate 以及不同的 Java 编译目标等等。选择活动的 Maven 配置文件解决了我的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-21T01:05:21.710

在较新的 hibernate jar 中，您可以在“hibernate-search-5.8.0.Final\dist\lib\provided\hibernate-jpa-2.1-api-1.0.0.Final”下找到所需的 jpa 文件。您必须将此 jar 文件添加到您的项目 java 构建路径中。这很可能会解决问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-09T06:04:21.013

如果您使用 Hibernate 作为 JPA 实现并且没有使用 Maven/Gradle，则更简单的方法是下载整个包而不是一个一个下载 jar 文件。

转到[http://hibernate.org/orm/downloads/](http://hibernate.org/orm/downloads/)`required`并下载最新的库，从文件夹中提取 jar 。

# php - PHP 和 MySQL 在图表上绘制时间

> ID：15598221
> 
> 赞同：1
> 
> 时间：2013-03-24T12:04:25.203
> 
> 标签：php, mysql, graphics, gd

我有以下表格形式的 MySQL 输出。

![mysql输出](../Images/f9dc436e3fe870dc1d81b046f76815c3.png)

我想要做的是在水平时间线上绘制每个地理围栏时间​​，如下所示：

![在此处输入图像描述](../Images/9509dfdb66774a032854271174a3f2a5.png)

理论是我将时间轴创建为表格行。起点和终点为时间（15 分钟间隔），Early Time 为起点，Late Time 为终点。

在第二行，我想要动态的“盒子”，用`imagefilledrectangle`. 每个“盒子”的起始坐标和结束坐标是表格中的 InSeconds 和 OutSeconds。然后显然我每行需要多个“框”来表示每次访问地理围栏。

我读了几篇关于`imagefilledrectangle`但我不确定从哪里开始以及如何获得多个盒子的文章。显然，这些框需要与第一个表格行中的时间相关联。

目前我生成数据表的查询是：（对不起`mysql_query`，将在稍后阶段转换为 PDO）：

```
$result = mysql_query("

      select * from (select
      PreQuery.callingname as vehicle,
      PreQuery.geofence,
      PreQuery.GroupSeq,
      MIN( PreQuery.`updatetime` ) as InTime,
      UNIX_TIMESTAMP(MIN( PreQuery.`updatetime`))as InSeconds,
      MAX( PreQuery.`updatetime` ) as OutTime,
      UNIX_TIMESTAMP(MAX( PreQuery.`updatetime`))as OutSeconds,
            TIME_FORMAT(SEC_TO_TIME((MAX( PreQuery.`updatetime` )-MIN( PreQuery.`updatetime` ))),'%H:%i') as Duration,
      round((MAX( PreQuery.`updatetime` )-MIN( PreQuery.`updatetime` )),0) as DurationSeconds

   from
     ( select
              v_starting.callingname,
              v_starting.geofence,
              v_starting.`updatetime`,
              @lastGroup := @lastGroup + if( @lastAddress = v_starting.geofence 
                                         AND @lastVehicle = v_starting.callingname, 0, 1 ) as GroupSeq,
              @lastVehicle := v_starting.callingname as justVarVehicleChange,
              @lastAddress := v_starting.geofence as justVarAddressChange
           from
              v_starting,
              ( select @lastVehicle := '',
                       @lastAddress := '',
                       @lastGroup := 0 ) SQLVars
           order by
              v_starting.`updatetime` ) PreQuery
   Group By
      PreQuery.callingname,
      PreQuery.geofence,
      PreQuery.GroupSeq) parent

      where geofence <>'' and InTime>  DATE_SUB(NOW(), INTERVAL 72 HOUR) and vehicle='TT08' and Duration>0 order by InTime asc

"); 
```

我生成表的语法很简单：

```
<table border=1>
    <tr>
        <th>Vehicle</th>
        <th>Geofence</th>
        <th>InTime</th>
        <th>InSeconds</th>
        <th>OutTime</th>
        <th>OutSeconds</th>
        <th>Duration</th>
        <th>DurationSeconds</th>
    </tr>

    <?php
    while($row = mysql_fetch_array($result)){
    ?>
    <tr>
    <td><?php echo $row['vehicle'] ?></td>
    <td><?php echo $row['geofence'] ?></td>
    <td><?php echo $row['InTime'] ?></td>
    <td><?php echo $row['InSeconds'] ?></td>
    <td><?php echo $row['OutTime'] ?></td>
    <td><?php echo $row['OutSeconds'] ?></td>
    <td><?php echo $row['Duration'] ?></td>
    <td><?php echo $row['DurationSeconds'] ?></td>
    </tr>
    <?php } ?>
    </table> 
```

所以我有点厚脸皮，但如果有人能给我关于如何开始的建议，那就太好了。或者，我可以阅读或用作参考的好文章。

图像填充矩形是正确的路线吗？我可以使用任何 JavaScript 解决方案或插件吗？

# jquery - 使用 jQuery 的 Twitter 提要

> ID：15598223
> 
> 赞同：3
> 
> 时间：2013-03-24T12:04:32.247
> 
> 标签：jquery, json, parsing, twitter, feed

我正在尝试制作一个 twitter 提要，通过使用 jQuery 解析 twitter 提供的 JSON 文件来显示 5 条推文。我[在这里](http://jsfiddle.net/MichaelvandeWeerd/3UbcH/1/)制作了 jsFiddle 。

```
$(document).ready(function () {

    var k = "http://api.twitter.com/1/statuses/user_timeline.json?screen_name=Twitter&include_rts=1&count=5";

    $.getJSON(k, function (data) {
        $.each(data, function (i, item) {
            $("#tweetFeed").append("<div class='tweetCloud'><div id='tweetArrow'></div><div id='tweetText'>" + item.text.linkify() + "</div></div>");
        });
    });
}); 
```

推文必须由 jQuery 代码以下列方式输出：

```
<div class="tweetCloud">
<div id="tweetArrow"></div>
<div id="tweetText">tweet text</div>
</div> 
```

只需要使用推文的文本。

正如您在 jsFiddle 中看到的那样，没有显示任何推文，我也不知道为什么。我对jQuery没有太多经验，对JSON几乎没有，所以我希望有人能清楚地解释为什么这不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T12:18:23.727

您的代码没有使用 JSONP，因此被跨域限制拒绝。我已经修改了请求，它现在可以工作了。这是代码，[这是小提琴](http://jsfiddle.net/3UbcH/2/)

```
$(document).ready(function () {

    var k = "http://api.twitter.com/1/statuses/user_timeline.json?screen_name=Twitter&include_rts=1&count=5&jsoncallback=";

    $.ajax({
        dataType: 'jsonp',
        url: k,
        success: function (data) {
            $.each(data, function (i, item) {
                $("#tweetFeed").append("<div class='tweetCloud'><div id='tweetArrow'></div><div id='tweetText'>" + item.text + "</div></div>");
            })
        }
    });
}); 
```

您在 CSS 中的 imgur 链接是 404，所以我将其注释掉。还有，`linkify()`不是方法。也许你忘了链接一些额外的库。最后，您指向 droid 字体的链接未正确嵌入 jsfiddle。

# android - 我的仪表盘通知消失了

> ID：15598224
> 
> 赞同：0
> 
> 时间：2013-03-24T12:04:38.750
> 
> 标签：android, dashclock

我正在构建一个应用程序来帮助您跟踪电视节目。

当我第一次将我的“小部件”添加到 dashclock 时，通知会出现（如果有），但过了一会儿它们又消失了。

我的活动代码扩展 DashClockExtension

```
@Override
protected void onUpdateData(int reason) {

    DatabaseHandler databaseHandler = new DatabaseHandler(this);
    ArrayList<Episode> episodes = databaseHandler.GetTodaysEpisodes();
    DateHelper dateHelper = new DateHelper();
    String numberOfEpisodes = "" +episodes.size();

    StringBuilder sb = new StringBuilder();

    for (Episode episode : episodes) {
        sb.append(dateHelper.Episodenumber(episode) + " " + episode.getTitle() + "\n");         
    }

    publishUpdate(new ExtensionData()
    .visible(true)
    .icon(R.drawable.ic_icon_dashclock)
    .visible(!numberOfEpisodes.equals("0"))
    .status(numberOfEpisodes)
    .expandedTitle(numberOfEpisodes + " episodes airing today")
    .expandedBody(sb.toString())
    .clickIntent(new Intent("se.ja1984.twee.CalendarActivity_LAUNCH_IT"))
            );

} 
```

由于我的数据经常没有更新，我很满意让 DashClock 检查更新。

我是android开发的新手，可能做错了什么:)我真的很感谢有人指出我正确的方向！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:30:14.700

好的，所以我解决了！

当我的应用程序启动时，我使用所选配置文件设置静态整数，然后在从数据库中获取数据时使用该配置文件。因此，当我的应用程序被系统杀死时，它会尝试获取配置文件 0（从不存在）的数据。

感谢 Robby 和 Roman 在这方面投入的帮助和时间！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:12:44.083

当**numberOfEpisodes 为 "0"**时，您正在设置**visible=false**。这很可能是正在发生的事情。您可以像调试任何其他应用程序一样调试扩展程序。只需在调试中运行它，然后通过 ddms 附加到您的应用程序。

# google-app-engine - GAE Jinja2 单引号转义

> ID：15598229
> 
> 赞同：0
> 
> 时间：2013-03-24T12:04:45.963
> 
> 标签：google-app-engine, escaping, jinja2

**你好！**

我尝试使用 TwitterBootstrap 框架在 GAE 应用程序中实现 typeahead 功能。有必要将此片段渲染到 Jinja2 模板中：

```
 <input type="text" class="span3" 
style="margin: 0 auto;" data-provide="typeahead" 
data-items="4" data-source='["Alabama","Alaska","Arizona"]'> 
```

这似乎是不可能的，因为模板引擎总是将单引号转义为双引号。显然，在这种情况下，整个预输入结构根本不起作用。有几种记录在案的转义方法，例如*raw*、*safe*甚至*autoescape false*，但它们无法解决此问题。如何强制 Jinja2 呈现单引号？

有没有人有一个匹配的食谱是如何解决的？

**谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:52:00.370

以下代码适用于我：

```
{{ typeahead_data|safe }} 
```

请考虑下次包含您的实际代码，而不是仅仅说“它不起作用”。

# javascript - 无法获取未定义或空引用的属性

> ID：15598231
> 
> 赞同：1
> 
> 时间：2013-03-24T12:04:49.720
> 
> 标签：javascript, prototype

我收到以下错误

> 无法获取未定义或空引用的属性“showMsg”

在下面代码的最后一行：

```
 Function.prototype.showMsg = function () {
        alert("This is a sample message.");
    };

    function Person() {
        this.name = "Mahesh";
    };

    var personObj = new Person();
    personObj.prototype.showMsg(); 
```

实际上我应该能够`showMsg()`从`Person`实例访问，因为我已将它添加到`Function.prototype`. 那为什么我会收到这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:11:56.777

好吧，你都理解错了

```
Function.prototype.showMsg = function () {
    alert("This is a sample message.");
};

function Person() {
    this.name = "Mahesh";
};

var personObj = new Person();
personObj.prototype.showMsg(); 
```

首先对函数类进行原型设计，然后创建一个名为 Person 的自定义类，然后创建 Person 的实例。然后你调用的是非常蓝图，它是 showMsg，它是 2 个错误 1 ​​showMsg 没有绑定到 Person 中，然后调用它，如果它有界，你可以像这样直接调用它

```
personObj.showMsg() 
```

从我的角度来看，如果我让你这样写的话，我愿意让这个脚本工作 ->

```
function Person() {
 this.name = "Mahesh";
};

Person.prototype.showMsg = function () {
  alert("This is a sample message.");
};

var personObj = new Person();
personObj.showMsg(); 
```

我的脚本将 showMsg 直接绑定到 Person 类，如果你需要它通过 Person 对象和 Function Class To 然后你必须像这样从 Function Class 继承

```
Function.prototype.showMsg=function () {
   alert("This is a sample message.");
    };

function Person() {
   this.name = "Mahesh";
    };

Person.prototype = Function;
Person.prototype.constructor = Person;

var personObj = new Person();
personObj.showMsg(); 
```

问候

# bash - 来自 bash 的 cygwin clearscreen

> ID：15598245
> 
> 赞同：45
> 
> 时间：2013-03-24T12:06:12.973
> 
> 标签：bash, cygwin

我想在 cygwin 终端中从 bash 中清除屏幕。我努力了

```
cmd /c cls
echo -e "^V^L"
echo -e "\014" 
```

这些都不起作用-它们都给出了“换行符”。按 CTRL+L 确实有效 - 但我想从 Bash 脚本中调用它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-03-24T19:37:59.853

或者你可以试试 ctrl-L :)

这也应该适用于大多数模拟终端。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-07-31T13:07:28.107

有两种方法：

**使用快捷方式**

`Alt+F8`清屏和`Ctrl-L`跳页

**使用`Clear`别名**

1.  去：`cygwin\home\USER\.bashrc`
2.  打开`.bashrc`文件并输入这个别名`alias clear='printf "\033c"'`。
3.  重新启动您的 cygwin 终端。
4.  清除屏幕使用`clear`命令。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-03-24T12:10:08.880

如果它包含在您的 cygwin 安装中（运行 Cygwin 的设置并确保您有名为“ncurses”的包），请尝试

```
tput clear 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2013-12-10T15:23:46.000

我的 ~/.bashrc 中有这个：

```
alias clear='printf "\033c"' 
```

同样， printf "\033c" 从 bash 脚本中清除屏幕。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-22T01:22:41.707

Alt+F8 清屏，Ctrl-L 跳过页面

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-14T20:14:05.170

使用快捷方式（针对`mitty`控制台用户）

`Alt+F8`清屏和`Ctrl-L`跳页

使用`sh bash`添加命令

如果您使用`console2`或相同的控制台，您可以将其添加`sh code`为不扩展此位置：..\cygwin64\bin\

`cls`和/或`clear`（不带扩展名）

```
#!/bin/sh
printf "\033c" 
```

然后你可以在 cygwin 命令中使用`cls`and|or 。`clear`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-18T12:31:36.520

我正在尝试做类似的事情，经过研究，我找到了上述答案，我尝试遵循上述一些解决方案，我将该行添加到 .bashrc，但它不接受该功能，我进行了调整并找到了另一个解决方案...它基本上执行' printf "\33c" 但不是调整 .bash.rc 文件，您只需转到目录 - /cygwin/bin ，编写以下命令：- printf "\033c" 并保存它使用文件名“cls”，在bin目录中，确保文件没有扩展名，因此它将具有“文件”类型..保存它，打开shell，命令将运行......

我通过玩msys和cygwin找到了这个方法，我在我的windows PC上都有，结果msys支持“cls”命令，我在它的bin目录中找到了一个同名的文件并将它复制到cygwin的bin文件夹中并使用 printf 函数编辑了文件，这就像一个魅力......希望这会有所帮助。

# swing - 如何在随机方向移动球，如何让它们在框架内弹跳？

> ID：15598247
> 
> 赞同：0
> 
> 时间：2013-03-24T12:06:21.337
> 
> 标签：swing, jframe, jpanel

这是代码：

```
public class BallGame extends JPanel implements Runnable {

    JPanel panel1 = new JPanel();

    private int ballX = 10, ballY = 110, ...;
    Thread aThread;
    int toRight=5; 
    int toLeft= -5; 
    int upWard=5; 
    int downWard= -5; 
    int widthBall, heightBall; 

    public BallGame(){
        game=true;
        aThread=new Thread(this);
        aThread.start();
    }

    public void paintComponent(Graphics g){
        setOpaque(false);
        super.paintComponent(g);

        g.setColor(Color.RED);
        g.fillOval(ballX, ballY, 7,7);
        g.setColor(Color.BLUE);
        g.fillOval(ballX + 15, ballY + 10, 7,7);
        g.setColor(Color.GREEN);
        g.fillOval(ballY - 10, ballY - 15, 7,7);

    }

    public void positionBall(int sx, int sy)
    {
        ballX = sx; 
        ballY = sy; 
        this.widthBall = this.getWidth();
        this.heightBall = this.getHeight();
        repaint();
    }
public void run() {
        boolean leftRight = false;
        boolean upDown = false;

        while(true){

            if(game){

            if (leftRight) 
            {
                ballX += toRight;
                if (ballX >= (widthBall - 5))
                    leftRight= false;
            }
            else
            {
                ballX += toLeft;
                if ( ballX <= 0)
                    leftRight =  true;
            }

            if (upDown) 
            {
                ballY += upWard;
                if (ballY >= (heightBall - 5))
                    upDown = false;

            }
            else
            {
                ballY += downWard;
                if ( ballY <= 0)
                    upDown =  true;
            }
            positionBall(ballX, ballY);

            try 
                {
                    Thread.sleep(70);
                }
                catch(InterruptedException ex)
                {

                } 
```

我不知道我画球的部分是否正确。球以相同的路径移动。如何在不同方向移动它们以及如何将它们限制在框架内？我需要这个立即用于我们的案例研究。感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:44:57.487

为了让球独立移动，您需要将它们视为 3 个球。它们总是朝着同一个方向前进的原因是你使用相同的 delta，只是将 delta x 和 delta y 的符号反转，因此你将始终保持相同的速度，并以 90 度弹跳。

在下面的代码中，与您的代码基本相同，我将每个球的状态保存在单独的实例中，一旦触摸一侧就改变 delta x 和 delta y 的速度，并使用 Swing Timer，这是一种更好的方法正如上面 Robin 所指出的，在 Swing 中计时。

![在此处输入图像描述](../Images/c1b4566e595011ac2edd28e9b79808ca.png)

我更新了示例，使 4 个球从中间开始，它们彼此远离。这应该为您提供足够的信息以使其适应您的要求。下图是只允许 10 次迭代产生的，并且设置

```
ballGame.setOpaque(true); 
```

![在此处输入图像描述](../Images/c79252d3cf436ad2229319f9eba23423.png)

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;

import javax.swing.*;

public class BallGame extends JPanel {

    private class Ball {
        private int x;
        private int y;
        private int width;
        private int height;
        private Color color;
        private boolean leftRight;
        private boolean upDown;
        private int deltaX;
        private int deltaY;

        Ball(Color color, int x, int y, int width, int height) {
            this(color, x, y, width, height, false, false);
        }

        Ball(Color color, int x, int y, int width, int height, boolean leftRight, boolean upDown) {
            this.color = color;
            this.x = x;
            this.y = y;
            this.width = width;
            this.height = height;
            this.leftRight = leftRight;
            this.upDown = upDown;
            updateDelta();
        }

        private void updateDelta() {
            final int minimumMovement = 5;
            final int maxExtra = 10;
            deltaY = minimumMovement + (int) (Math.random() * maxExtra);
            deltaX = minimumMovement + (int) (Math.random() * maxExtra);
        }

        public void positionBall() {
            if (leftRight) {
                x += deltaX;
                if (x >= (BallGame.this.getWidth() - width / 2)) {
                    leftRight = false;
                    updateDelta();
                }
            } else {
                x += -deltaX;
                if (x <= 0) {
                    leftRight = true;
                    updateDelta();
                }
            }

            if (upDown) {
                y += deltaY;

                upDown = !(y >= (BallGame.this.getHeight() - height / 2));
                if (y >= (BallGame.this.getHeight() - height / 2)) {
                    upDown = false;
                    updateDelta();
                }
            } else {
                y += -deltaY;
                if (y <= 0) {
                    upDown = true;
                    updateDelta();
                }
            }
        }

        public Color getColor() {
            return color;
        }

        public int getX() {
            return x;
        }

        public int getY() {
            return y;
        }

        public int getWidth() {
            return width;
        }

        public int getHeight() {
            return height;
        }
    }

    private ArrayList<Ball> balls = new ArrayList<>(3);

    public BallGame() {
        createBalls();
        startGame();
    }

    private void startGame() {
        int framesPerSecond = 30;
        int timeToWait = 1000 / framesPerSecond;
        Timer timer = new Timer(timeToWait, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                for (Ball ball : balls) {
                    ball.positionBall();
                }
                repaint();
            }
        });
        timer.start();
    }

    private void createBalls() {
        int startX = 400;
        int startY = 200;
        balls.add(new Ball(Color.green, startX, startY, 10, 10));
        balls.add(new Ball(Color.blue, startX, startY, 15, 15, true, true));
        balls.add(new Ball(Color.red, startX, startY, 20, 20, false, true));
        balls.add(new Ball(Color.orange, startX, startY, 20, 20, true, false));
    }

    public void paintComponent(Graphics g) {
        Graphics2D g2 = (Graphics2D) g.create();
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON);

        for (Ball ball : balls) {
            g2.setColor(ball.getColor());
            g2.fillOval(ball.getX(), ball.getY(), ball.getWidth(), ball.getHeight());
            g2.setColor(ball.getColor().darker());
            g2.drawOval(ball.getX(), ball.getY(), ball.getWidth(), ball.getHeight());
        }
        g2.dispose();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("Ball Game");
                BallGame ballGame = new BallGame();
                ballGame.setOpaque(false);
                frame.getContentPane().add(ballGame);
                frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
                frame.setMinimumSize(new Dimension(800, 450));
                frame.setLocationRelativeTo(null); // Center
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

# c# - c# 像指针一样对待数组

> ID：15598248
> 
> 赞同：1
> 
> 时间：2013-03-24T12:06:21.430
> 
> 标签：c#

我正在尝试在 c# 中实现合并排序以尝试学习该语言。我在拆分步骤中拆分数组时遇到问题。我来自交流背景，会做这样的事情：

```
void MergeSort(int array[], int size)
{
    if (size == 1) 
        return;
    MergeSort(array, size/2);
    MergeSort(array + size/2, size - size/2);
} 
```

我的问题是，你能在 c# 中做类似的事情吗？我知道有采取和跳过方法，但这是最好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T12:09:03.813

使用索引而不是指针。

```
void MergeSort(int[] array, int startIndex, int endIndex){
...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T12:10:23.007

也许您可以将要使用的索引传递给函数：

```
private static void MergeSort(int[] array, int size, int index) {
    if (size == 1) {
        return;
    }
    MergeSort(array, size / 2, index);
    MergeSort(array, size - size / 2, index + size / 2);
} 
```

# ios - iOS：自定义后退按钮过渡动画

> ID：15598252
> 
> 赞同：3
> 
> 时间：2013-03-24T12:07:00.917
> 
> 标签：ios, objective-c, animation, uinavigationcontroller, back

我有一个视图控制器（继承自`UIViewController`），它具有用于呈现数据的自定义逻辑。它可以初始化一个新的视图控制器（相同类型）并使用 `[self.navigationController pushViewController:next animated:NO]` （下一个是新实例化的控制器）显示它，创建“视图堆栈”的体验，使用导航控制器默认后退按钮向上导航堆栈.

现在，在调用之前，`pushViewController:animated:`我可以通过调用自定义过渡动画`[self.navigationController.view.layer addAnimation:animation forKey:nil]`。这对于视图的“向下堆栈”非常有效。

但是由于在堆栈上导航是使用默认后退按钮的默认方式完成的，因此使用的过渡是默认的向左滑动动画，它与我的自定义动画不匹配。

如何自定义此过渡动画？

编辑：

我接受了这里给出的想法并想出了：

```
UIBarButtonItem *back = [[UIBackButtonItem alloc] initWithTitle:@"\U000025C0\U0000FE0E" style:UIBarButtonItemStylePlain target:self action:@selector(back:)];
[self.navigationItem setLeftBarButtonItem:back] 
```

和过渡：

```
- (IBAction)back:(id)sender {
    CATransiotion *animation = [CATransition animation];
    animation.duration = 0.3f;
    amimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    animation.type = kCATransitionMoveIn;
    [self.navigationController.view.layer addAnimation:animation forKey:nil];
    [self.navigationController popViewControllerAnimated:NO];
} 
```

唯一的缺点是我愿意接受的新后退按钮的出现。

感谢您的回答:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:27:44.093

我想您必须制作自定义后退按钮，并将动画附加到它上面，例如。

```
- (IBAction) back:(id)sender
{       
    [UIView transitionWithView:self.navigationController.view
                      duration:0.5
                       options:UIViewAnimationOptionTransitionFlipFromLeft
                    animations:^{ [self.navigationController popViewControllerAnimated:NO]; }
                    completion:NULL];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T14:21:55.483

我这样做：

```
-(void)viewWillDisappear:(BOOL)animated {
CATransition *anim = [CATransition animation];
anim.duration = 1;
anim.type = @"cube";
anim.subtype = @"fromLeft";
[super viewWillDisappear:animated];
[self.navigationController.view.layer addAnimation:anim forKey:@"an"]; 
```

}

而且效果很好！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T12:21:03.890

[此代码来自此 Queston。](https://stackoverflow.com/questions/10553264/popviewcontrolleranimated-custom-transition-animation)

对于这种类型的过渡，我真的会推荐一个模态视图控制器，这就是系统的设计方式。

但是如果你坚持使用导航控制器，有一种方法，虽然有点难看。

```
[CATransaction begin];
[CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];

CATransition *transition = [CATransition animation];
[transition setType:kCATransitionFade];
[self.navigationController.view.layer addAnimation:transition forKey:@"someAnimation"];

[self.navigationController popViewControllerAnimated:YES];
[CATransaction commit]; 
```

这`CATransaction`将禁用所有标准动画。当`CATransition`视图被交换时，向导航控制器层添加一个淡入淡出过渡（在这种情况下删除弹出的视图控制器视图）。

还请参阅[如何在基于导航的应用程序中更改推送和弹出动画](https://stackoverflow.com/questions/2215672/how-to-change-the-push-and-pop-animations-in-a-navigation-based-app)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T22:02:40.920

如果您只是想让后退按钮返回到上一个视图控制器。没有代码更容易做到这一点。相反，只需将控件从后退按钮拖动到前一个视图控制器。（我更喜欢模态动作segue）。这使它更简单，因为它不涉及代码

# javascript - 查找重定向的 img 源

> ID：15598254
> 
> 赞同：0
> 
> 时间：2013-03-24T12:07:06.303
> 
> 标签：javascript, redirect

我有一个最新的网络摄像头拍摄[http://cam.hackerspace.sg/last.jpg](http://cam.hackerspace.sg/last.jpg)的 URL ，它会重定向到它的源文件名。1364124301.jpg

我想在 Javascript 中读取 Epoch '1364124301'，以便将其转换为时间戳。虽然记录 img.src 会显示旧的原始 URL。那么如何在不使用 Jquery 的情况下获得 '1364124301' 呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:22:17.063

单独使用 JavaScript 似乎不可能获得重定向位置： XMLHTTPRequest 透明地隐藏重定向，如果 iframe 来自另一个域，则 iframe 不允许访问它的 URL。

如果您有启用 PHP 的网站，则以下内容将允许获取重定向。（为简单起见，所有代码都没有捕获任何错误条件，在使用之前需要添加错误处理）。

首先，获取重定向位置，一些PHP，文件名为getRedirect.php：

```
<?php
$redirect = '';
$urlToQuery = $_GET['url'];
$urlParts = parse_url($urlToQuery);
$host = $urlParts['host'];
$path = $urlParts['path'];
$address = gethostbyname ($host);
$socket = socket_create (AF_INET, SOCK_STREAM, SOL_TCP);
socket_connect ($socket, $address, 80);
$request = 'GET '.$path.' HTTP/1.1'."\r\n";
$request .= 'Host: '.$host."\r\n";
$request .= 'Connection: Close'."\r\n\r\n";
socket_write($socket, $request);
$answer = socket_read($socket, 8192);
socket_close($socket);
$answerLines = explode("\r\n", $answer);
foreach ($answerLines as $line) {
    $lineParts = explode(':', $line, 2);
    if($lineParts[0] == 'Location') {
    $redirect=trim($lineParts[1]);
    break;
    }
}
header('Content-Type: text/plain; charset=us-ascii');
header('Content-Length: '.strlen($redirect));
echo $redirect;
?> 
```

二、图片展示页面，使用JavaScript设置图片并查询重定向位置（通过XMLHTTPRequest到getRedirect.php）：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">
    function updateImage() {
    var imgParent = document.getElementById("imgContainer");
    // delete existing image if exists
    var imgChild = imgParent.firstChild;
    if(imgChild!=null) imgParent.removeChild(imgChild);
    // insert new image with actual redirect
    var newImg = document.createElement("img");
    newImg.src = "http://cam.hackerspace.sg/last.jpg";
    imgParent.appendChild(newImg);
    var redirect = getRedirect("http://cam.hackerspace.sg/last.jpg");
    var timestamp = redirect.substring(redirect.lastIndexOf("/") + 1, redirect.lastIndexOf("."));
    document.getElementById("imageDate").innerHTML="Timestamp="+timestamp;

    }
    function getRedirect(url) {
    var redirect = "";
    var req = new XMLHttpRequest();
    req.open('GET', 'getRedirect.php?url='+url, false);
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
        redirect = req.responseText;
        }
    };
    req.send(null);
    return redirect;
    }
</script>
</head>
<body>
<button onclick="updateImage();">update image</button>
<div id="imgContainer"></div>
<p id="imageDate"></p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-24T09:55:35.063

使用 XMLHTTPRequest，您可以在 XMLHTTPRequest.responseURL 属性中重定向后读取 newUrl。通过将 newUrl 与 originUrl 进行比较，您可以确定它是否是重定向。

# python - Ghostscript 输出保存位置

> ID：15598256
> 
> 赞同：1
> 
> 时间：2013-03-24T12:07:27.537
> 
> 标签：python, ghostscript

我正在尝试在 python 中使用 ghostscript。这是我的代码：

```
import sys
import ghostscript

args = [
    "-sDEVICE=jpeg",
    "-sOutputFile=test-%d.jpg",
    "-dBATCH", "-dNOPAUSE",
    "/users/arnoutaertgeerts/downloads/langetest.pdf"
    ]

ghostscript.Ghostscript(*args) 
```

但是我找不到生成的图像（虽然我可以看到它们正在生成！）我做了一些测试，很明显，我在 -sDEVICE 输入的内容并不重要......所以最有问题吗？我正在使用 Ghostscript 9.0.6

Ghostscript 在哪里保存我的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:23:35.440

由于您的 args 没有 -dSAFER 您应该能够指定完整路径，包括带有目录的完整路径（如输入文件一样）。尝试 -sOutputFile="/users/arnoutaertgeerts/test-% d.jpg"

然后查看您的 /users/arnoutaertgeerts 目录。

# matlab - 在matlab中模拟正弦图

> ID：15598257
> 
> 赞同：0
> 
> 时间：2013-03-24T12:07:29.760
> 
> 标签：matlab, simulation

我今天的问题是如何在matlab中连续模拟一些图形？例如：让我们考虑以下最简单的代码

```
x = 0 : 0.1 : 10;
z = sin(x);
plot(x,z), grid 
```

当我运行这段代码时，我通常会得到*sin*函数图，其图如下所示 ![在此处输入图像描述](../Images/eeb8853dfb779af5a1aad8dec62afd7d.png)

实际上，我需要的是，图形是静态的，即它不会移动。我想要的是模拟这个图，即出现在窗口上，消失然后再次重复这个过程，因为我想我需要循环，但也许在 matlab 中有一些用于模拟图的内置函数？请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:02:48.220

你的意思是你想动画这个图表？MATLAB 提供[了许多方法](http://www.mathworks.com/help/matlab/creating_plots/animation.html)来做到这一点。

最简单的方法之一是使用命令逐帧生成短片[`getframe`](http://www.mathworks.com/help/matlab/ref/getframe.html)，然后使用[`movie`](http://www.mathworks.com/help/matlab/ref/movie.html)命令播放它。例如：

```
%// Generate movie
x = 0:0.1:10;
FRAMES = 32;                  %// Total number of frames
for k = 1:FRAMES
    ph = k * 2 * pi / FRAMES; %// Accumulate phase
    plot(x, sin(x + ph))      %// Generate plot
    grid, axis equal
    M(k) = getframe;          %// Capture frame
end

%// Play movie 10 times
movie(M, 10) 
```

# ruby-on-rails - 是否可以将所有记录的时间从 UTC 更改为 LOCAL？

> ID：15598258
> 
> 赞同：1
> 
> 时间：2013-03-24T12:07:33.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这样的编码错误

```
config.active_record.default_timezone = :utc 
```

事实上，我必须设置这个

```
config.active_record.default_timezone = :local 
```

但是，该服务已经启动，并且所有内容（所有记录）都使用 UTC 时间戳保存。

是否有可能一次性制作：本地时间戳？

我不知道如何优化它。

# eclipse - Eclipse 无法在 Debian 上启动

> ID：15598260
> 
> 赞同：0
> 
> 时间：2013-03-24T12:08:11.100
> 
> 标签：eclipse, debian

我有一个问题`Eclipse IDE`on `Debian`。当我尝试通过`"eclipse"`在终端中输入来启动它时，没有任何反应，并且我没有任何错误消息。

我试图删除并重新安装 eclipse-plateform 但它仍然无法正常工作。

我不知道为什么会这样，前段时间它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:25:34.010

可能这是您使用的 jre 的问题。

我记得在使用 gcj-jre 运行 eclipse 时遇到了类似的问题。使用 openjdk 为我解决了这个问题。

尝试使用：

```
update-alternatives --config java 
```

并选择openjdk而不是gij，看看问题是否仍然存在。

# assembly - 如何使用内存位置？

> ID：15598263
> 
> 赞同：-1
> 
> 时间：2013-03-24T12:08:21.373
> 
> 标签：assembly, x86-64, gnu-assembler

例如，我写了一个代码

```
.global _start
.data
str:
    .long 0x1
.text
_start:
  mov  $1, %rax         # system call 1 is write
  mov  $0x21, %rdx
  mov  %rdx, 4(%rax)

  mov  $60, %rax        # system call 60 is exit
  xor  %rdi, %rdi       # we want return code 0
  syscall               # invoke operating system to exit 
```

为什么我会收到分段错误？我什么时候使用内存位置？如何使用内存位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:55:44.660

您正在尝试将 rdx 中的值写入内存位置 5。（rax+4，并且 rax 已初始化为 1）。

你是在真机还是模拟器上运行这个程序？

如果您在计算机上运行它，**则不能**只写入任意内存位置。操作系统会为一个进程分配一定数量的内存，如果进程试图访问超出这个范围的内存，就会导致分段错误。

如果您在模拟器上运行它并且没有操作系统，那也没关系。如果要写入内存，请在数据段中声明一个变量，如下所示：

```
.data
myvar:
    .long 0x1
.text
_start:
  #....
  mov  %rdx, myvar
  #... 
```

# php - 如何更改列表的顺序？

> ID：15598265
> 
> 赞同：0
> 
> 时间：2013-03-24T12:08:46.373
> 
> 标签：php, mysql, arrays, loops

我正在使用`PHP/MySQL`但只是在寻找伪代码

如何允许用户更改项目列表显示的顺序？

假设用户将#4 移动到#1，我是否将#4 更改为#0，然后foreach 行(1-3) 将其增加1，所以它是2-4，然后将#0 更改为#1？

这是最好的方法吗？

更新：这是一个待办事项列表，我不会只是交换项目的顺序（即交换 #1 和 #4，而是将项目移动到其他人的前面）

我在 SQL db 中有 item_id、task、completed、order_id 的项目

我需要更改的是 order_id

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:19:56.120

我认为你已经做对了：

```
UPDATE items SET order_id = 0 WHERE order_id = 4;
UPDATE items SET order_id = order_id + 1 WHERE  order_id >= 1 AND order_id < 4;
UPDATE items SET order_id = 1 WHERE order_id = 0; 
```

要将带有 order_id i 的项目移动到位置 j (i > j)：

```
UPDATE items SET order_id = 0 WHERE order_id = i;
UPDATE items SET order_id = order_id + 1 WHERE  order_id >= j AND order_id < i;
UPDATE items SET order_id = j WHERE order_id = 0; 
```

要将带有 order_id i 的项目向下移动到位置 j (j > i)：

```
UPDATE items SET order_id = 0 WHERE order_id = i;
UPDATE items SET order_id = order_id - 1 WHERE  order_id > i AND order_id <= j;
UPDATE items SET order_id = j WHERE order_id = 0; 
```

另一种选择是添加一个`previous_sibling`. 假设您已经加载了列表，因此您知道之前的兄弟姐妹是`[1 => null, 2 => 1, 3 => 2, 4 => 3, 5 => 4]`：

```
UPDATE items SET previous_sibling = 3 WHERE id = 5; #previous_sibling of 4
UPDATE items SET previous_sibling = null WHERE id = 4; # previous_sibling of 1
UPDATE items SET previous_sibling = 4 WHERE id = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:22:10.247

我发现如果可行的话，通常最好使用 javascript（即 jquery）进行排序，因为它可以避免每次用户想要求助时都必须点击后端。

但是，如果您想使用 php 来执行此操作，我建议您查看 array_push、array_pop 等。他们可以完成你想做的事情。有关示例，请参见[http://www.php.net/manual/en/function.array-push.php#56479 。](http://www.php.net/manual/en/function.array-push.php#56479)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T14:09:03.370

假设您要将带有 id 的任务设置`$task_id`为`$order_id`：

```
UPDATE `table`
   SET order_id = order_id + 1
 WHERE order_id > $order_id;

UPDATE `table`
   SET order_id = $order_id
 WHERE task_id  = $task_id; 
```

并且只是为了确保订单 ID 始终是连续的并且没有间隙：

```
 SELECT @numrow := 0;

  UPDATE `table`
     SET order_id = @numrow := @numrow + 1;
ORDER BY order_id ASC; 
```

这会重新编号所有订单 ID。

# node.js - 产生 child_processes 的限制是什么？

> ID：15598266
> 
> 赞同：1
> 
> 时间：2013-03-24T12:08:46.563
> 
> 标签：node.js, socket.io, cloud-hosting

我必须通过算法进行计算，我被建议为每个打开的套接字使用一个子进程，我要做的是这样的：

```
var spawn = require('child_process').spawn;
var child = spawn('node', ['algorithem.js']); 
```

我知道如何向算法过程发送参数以及如何接收结果。

我关心的是，我可以拥有多少个套接字（每个套接字将产生一个进程）？如何通过我的云托管服务提供商解决此问题？以便我的应用程序自动缩放？

推荐的 node js 云托管提供商是什么？

最后，这是使用子进程的好方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T14:21:41.150

是的，当您必须在节点中进行一些繁重的处理时，这是一种公平的方法。但是，启动一个新进程会带来一些开销，因此请注意。您可以打开的套接字（文件描述符）的数量受操作系统的限制。在 Linux 上，可以使用例如[ulimit](http://ss64.com/bash/ulimit.html) -utility 来查看限制。

一种可以消除对套接字/进程数量的担忧的替代方法是运行单独的算法/计算服务器。这个服务器可以产生 N 个工作线程并监听一个套接字。当接收到计算请求时，这可以例如由第一个可用线程排队和处理。这种方法的一个优点是您的计算服务器可以在任何机器上运行，从而为您的节点实例释放资源。

# rest - 为什么 SOAP 不能使用 HTTP 缓存机制

> ID：15598267
> 
> 赞同：9
> 
> 时间：2013-03-24T12:09:02.433
> 
> 标签：rest, soap, http-caching

我正在从 SOAP 过渡到 REST，我想说服我的同事这是一个很好的举措。我们不需要 SOAP 可以提供的额外安全机制。多年来，SOAP 和 WSDL 的开销对我们来说只是一个令人头疼的问题。

除了明显的简化之外，我们系统的一个真正有价值的优势是 HTTP 缓存机制。我已经阅读了有关该主题的内容，但我仍然不完全理解为什么这些缓存机制不能应用于 SOAP 消息。

仅仅是因为 REST*按照惯例*对 url 中的所有参数进行了编码吗？由于 GET 调用也可以有一个带参数的主体，我知道它不受 REST 限制，但如果你这样做缓存机制不起作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T16:51:01.140

SOAP 在使用 HTTP 作为传输机制时，通过 HTTP POST 请求发送。由于 HTTP POST 是非幂等的，它不会在 HTTP 级别缓存。

REST*可以*被缓存，前提是所讨论的请求是幂等的：GET、PUT 和（理论上）DELETE。任何 POST 请求仍然不会被缓存。也就是说，如果您打算对此进行大量工作，则应该研究缓存如何检查它们是否仍然有效。特别是，如果您有一种廉价的方法来计算应该是什么值，那么[ETag 标头](http://en.wikipedia.org/wiki/HTTP_ETag)将是实现缓存的好方法。

> 仅仅是因为 REST 按照惯例对 url 中的所有参数进行了编码吗？由于 GET 调用也可以有一个带参数的主体，我知道它不受 REST 限制，但如果你这样做缓存机制不起作用？

REST 没有规定如何在 URL 中编码请求参数的任何特定机制。*建议*客户端永远不要进行任何 URL 合成：让服务器完成所有 URL 创建（通过您想要的任何机制，例如嵌入到路径中或作为查询参数）。您*绝对*不应该做的是有一个 GET 客户端将正文发送到服务器！任何缓存都可能丢失它。相反，当该请求不对应于某个资源的简单获取时，您可以将该复杂文档 POST 或 PUT 到服务器并 GET 操作结果作为单独的阶段。

将操作结果作为另一个复杂文档返回的复杂文档的 POST 几乎就是 SOAP 的编码方式。如果您很想这样做，您不妨直接使用 SOAP，因为它在许多语言中都有更成熟的工具。如果你想以这种方式运行 REST，你可能在某个地方做错了……</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T14:02:23.060

说 POST 请求通常是非幂等的是不正确的。POST 应该用于非幂等操作，但 SOAP 并没有真正正确使用 HTTP，因此它可能发生，POST 用于幂等操作 - 例如用于通过 ID 获取实体（您通常会使用获得）。

也根据这个：[是否可以在 HTTP 中缓存 POST 方法？](https://stackoverflow.com/questions/626057/is-it-possible-to-cache-post-methods-in-http) （检查reBoot的答案），POST请求可以根据RFC进行缓存。但是，浏览器和代理可能无法很好地实现它。无论如何，如果您添加适当的 HTTP 标头，则应该可以使用 HTTP 缓存机制缓存 SOAP over HTTP 消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-31T03:08:33.343

另一个原因可能是 SOAP URI 始终是肥皂服务器，它无法确定需要缓存哪个资源或资源是什么。所以缓存服务器不能缓存它不知道的东西。但是，REST 对每个资源都有 URI（可以是同一资源的多个 URI），这有助于缓存服务器执行其工作。

最重要的是，正如其他答案中提到的，只有一些 HTTP 动词用于缓存，如 GET、PUT 等（主要是 GET）。

# perl - 使用 perl 解析 xls 文件

> ID：15598273
> 
> 赞同：0
> 
> 时间：2013-03-24T12:09:17.000
> 
> 标签：perl, parsing

我想使用 perl 解析 xls 文件。xls 文件遵循的结构使得解析有点棘手；

```
 col1      col2
row1  School    1
row2  Dean      John
row3  No.stu.   55
row4  some irrelevant stuff 
row5  School2   2
row6  Dean      Tony 
row7  No. stu.  60 
row8  some irrelevant stuff 
```

我想要实现的输出是：

```
 col1 col2 col3
row1 School Dean No.stu. 
row2 1      John  55
row3 2      Tony  60 
```

到目前为止我一直在学习的模块是`Spreadsheet::ParseExcel`。任何其他模块可能会帮助我离开这里？问候，

感谢@amon 回复，它提供了部分解决我的问题的潜在方法。但是作为一个 perl 初学者，我很难消化代码。

解析部分开始在我头顶`ROW:`，那是做什么用的？我真的不知道

```
my ($key, $val) = map {$worksheet->get_cell($row, $_)} $col_min .. $col_max; 
```

我可以将其解释为`Spreadsheet::ParseExcel`文档中给出的内容吗：

`for my $row ( $row_min .. $row_max ) {`

`for my $col ( $col_min .. $col_max ) {`

`my $cell = $worksheet->get_cell( $row, $col );}`

另外，在进入输出部分之前，我可以看看已经解析了什么吗？说，有没有打印出已经累积到表中的变量`%data`？我已经挣扎了一段时间。

非常感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:04:41.007

您可以使用[Spreadsheet::ParseExcel](https://metacpan.org/module/Spreadsheet%3a%3aParseExcel)来读取您的文件。遍历所有行，并将前两个字段存储在哈希中。在每四行，您可以将数据写入输出，并清除哈希：

```
# Adapted from the module documentation
use strict; use warnings;
use Spreadsheet::ParseExcel;

my ($infile, $outfile) = @ARGV;

my $parser   = Spreadsheet::ParseExcel->new();
my $workbook = $parser->parse($infile);

die $parser->error unless defined $workbook;

# select the first worksheet
my ($worksheet) = $workbook->worksheets();

# get bounds:
my ( $row_min, $row_max ) = $worksheet->row_range();
my ( $col_min, $col_max ) = $worksheet->col_range();

# assert that there are at least two fields per row:
$row_max - $row_min >= 1 or die "To few cells per row";

my %data; # accumulate data here

ROW:
for my $row ($row_min .. $row_max) {
  # discard every fourth row:
  if ($row - $row_min && ($row - $row_min) % 3 == 0) {
    ...; # write to output
    %data = (); # clear cache
    next ROW;
  }
  my ($key, $val) = map {$worksheet->get_cell($row, $_)} $col_min .. $col_max;
  $data{$key} = $val;
} 
```

要编写电子表格，您可以使用[Spreadsheet::WriteExcel](https://metacpan.org/module/Spreadsheet%3a%3aWriteExcel)。这看起来像

```
# from the module documentation
my $out_workbook  = Spreadsheet::WriteExcel->new($outfile);
my $out_worksheet = $out_workbook->add_worksheet;
...;
# write data inside our loop:
my @cols = qw/School Dean No.stu/;
for my $i (0 .. $#cols) {
  my $val = delete $data{$cols[$i]} // die "uninitialized value for $cols[$i]";
  $out_worksheet->write($row, $i, $val);
}
# do some error handling
if (my @keys = keys %data) {
  die "Unexpected field(s) [@keys] encountered";
} 
```

对于定义或运算符，这需要 perl5 v10 或更高版本`//`。

* * *

## 更新：

很抱歉我使用了一些结构而没有正确解释它们。

### 丢弃每一行

我可以保留一个从一个开始的计数器。每次它命中时`4`，我都会跳过这一行，然后重置它。但是，我已经有一个行计数器，我用它来代替。我不知道第一行会是`0`，因为`$row_min`可能是任何东西。所以我转置行号`$row - $row_min`以获得实际的行数。它从零开始。

每第四行，这个实际计数可以被三整除：

```
0 1 2 3 4 5 6 · · ·
      *     * 
```

所以我可以使用模运算符`%`。但是，`0 % $n == 0`对所有人都是正确的`$n`（零可以通过所有数字整除），所以我必须对零进行特殊处理。我通过在执行可除性测试之前检查我们的计数不为零来做到这一点。除了零之外的所有数字都是真实的，所以我可以测试我们的数字的真实性。这导致测试

```
if ($row - $row_min && ($row - $row_min) % 3 == 0) { ... } 
```

### `map`表达式

该`map`函数采用以下任一方式：

*   `map EXPRESSION, LIST`
*   `map { BLOCK } LIST`-- 注意块和列表之间没有逗号。

它非常像一个漂亮的 foreach 循环：对于列表中的每个值，`$_`在我们的表达式中设置为该值。然后表达式返回一个被记住的值。处理完列表中的所有项目后，`map`返回表达式值的列表。

例如，下面是一个`map`对列表中所有数字求平方的表达式：

```
my @squares = map { $_ * $_ } 1 .. 10; # 1, 4, 9 16, .. 100 
```

我使用`map`来获取行内的所有单元格值：我指定所有列的列表 ( `$col_min .. $col_max`)，并且`map`块获取该列中当前行的单元格。

所以`map`返回一个单元格列表，我将其分配给“左值”列表`($key, $val)`。列表赋值导致`$key`具有第一个`$val`单元格的值和第二个单元格的值。

用一个普通的循环编写`foreach`，这看起来像：

```
my @cells;
for my $col ($col_min .. $col_max) {
  push @cells, $worksheet->get_cell($row, $_);
}
my $key = shift @cells;
my $val = shift @cells; 
```

### 查看您的数据结构

转储数据结构以进行调试的默认方法是使用[Data::Dumper](https://metacpan.org/module/Data%3a%3aDumper)模块。如果您想查看哈希或数组，请确保将数据结构作为*引用*传递。例如：

```
use Data::Dumper;   # at the top of your script
warn Dumper \%data; # where ever you need the info 
```

如果您需要更好的格式，您可以随时编写自己的：

```
printf "Contents of %%data for row %d:\n", $row - $row_min;
for my $key (sort keys %data) {
  printf "%10s:%s\n", $key, $data{$key}
} 
```

该`sort`函数的这种用法将按字母升序对其参数进行排序。

# google-app-engine - 后端实例小时数

> ID：15598276
> 
> 赞同：5
> 
> 时间：2013-03-24T12:09:43.027
> 
> 标签：google-app-engine

我正在使用 AppEngine 的后端实例，每日免费配额为 9 个实例小时。但是，我使用带有 10 个实例的后端大约 16-17 分钟，我的使用率已经超过 66%。

我的计算是 17 分钟 * 10 个实例 = 170 分钟 ~ 2.8 小时，这绝对小于 9 小时的 66%。

有人可以在这里解释一下计费方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T15:01:19.103

来自[https://developers.google.com/appengine/docs/quotas#Requests](https://developers.google.com/appengine/docs/quotas#Requests)：

> **实例小时数（可计费）**通常，实例使用量根据实例的正常运行时间按小时计费。计费在实例启动时开始，在实例关闭十五分钟后结束。您只需为空闲实例付费，最多为在管理控制台的性能设置选项卡中设置的最大空闲实例数。运行时开销计入实例内存。

在您的情况下，您的活动时间为 17 分钟 + 活动后 15 分钟 = 32 分钟。所以 320 分钟 (32 * 10) 非常接近 9 小时的 2/3。

您应该能够在应用程序的[使用历史记录](https://developers.google.com/appengine/docs/billing#viewing)中看到详细信息。

# android - 如何测量android相机实时捕获单帧所需的时间？

> ID：15598280
> 
> 赞同：3
> 
> 时间：2013-03-24T12:10:00.003
> 
> 标签：android, performance, real-time, android-camera

我正在对 Android 上的实时可能性进行一些性能测试，因为我需要证明使用 OpenCV Java 方法获取帧是否比 android SDK 方法更高效、更快。所以我想知道（如果可能的话），因为您可以测量相机 android 传感器拍摄单帧所需的确切时间？

我的初始代码只是获取时间前后的时间 takePicture 之后，减去并将该时间保存在一个数组中，然后求平均值，等等。但是我的代码不起作用，因为它在一个 while 循环中。

我的兴趣不是在预览中显示图像，我的兴趣是显示传感器获取帧或捕获所需的时间。我知道帧是以原始形式获取的，然后 Android SDK 提供了将其转换为 jpeg 图像的工具，但这并不让我感兴趣。

pd我使用Java方法然后使用C方法进行相同的测试。Android-OpenCV Java方法与Android SDK for android Java方法之类的东西。在 C 中也是如此，OpenCV for Android 的 C 函数与 android 中的本机 C 函数。

参考链接是： [捕获多张照片](https://stackoverflow.com/questions/5336890/capturing-multiple-photos)

但我不确定。

谢谢大家

# google-analytics - 跟踪网站上的横幅展示次数

> ID：15598281
> 
> 赞同：0
> 
> 时间：2013-03-24T12:10:01.680
> 
> 标签：google-analytics, ads, banner, web-analytics, adbannerview

我正在尝试在我的网站上销售广告空间，但要做到这一点，我需要知道每个横幅在网页和博客的各个部分获得的印象量。

我尝试只用 PHP / Javascript 来做，但是机器人和蜘蛛一直在创造印象，所以这不起作用。

然后我研究了如何在分析中做到这一点，并阅读了有关使用事件的信息。但这似乎不能正常工作。该横幅位于页脚中，在过去的 24 小时内，它收到了 106 次“推送”事件，但该网站已收到近 4000 次页面浏览量。有什么不对劲！

这是我用来跟踪这些印象的代码：

```
<img onload="_gaq.push(['_trackEvent', 'Site Banners', 'Impression', 'Website Name']);" src="http://www.my-site.com/images/website-x.png" /> 
```

我还听说使用它会使网站运行速度变慢，这不好，因为我抱怨网站速度很慢！

关于如何获取横幅印象统计数据的任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:00:59.060

谷歌分析不是这样做的工具。你想要的是一个广告服务器。下面有几个选项：

*   [开放式](http://www.openx.com/)
*   [DFP 广告管理系统标准版](http://www.google.com/doubleclick/publishers/small-business/)

这些是 2 个免费工具，您可以自行安装并管理您网站中的广告空间。我会首先使用 DFP 小型企业版，它每月最多可免费获得 9000 万次广告展示。

如果您需要更多，您可以使用付费工具或使用 OpenX 安装和管理自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T09:38:15.163

OpenX 于 3 月 22 日关闭了他们的免费版本。

除了 DFP 小型企业之外，您可以尝试的替代方案是 Adzerk。

DFP 很好，它有点复杂，它假设了大多数发布商缺乏的复杂元素。

# vba - VBA Ubound() 不起作用？

> ID：15598285
> 
> 赞同：0
> 
> 时间：2013-03-24T12:10:17.973
> 
> 标签：vba, excel-2010

我正在尝试在 VBA-Excel 2010 中创建自己的函数来计算数组中作为函数 arg 传递的一些东西。也通过了2个条件。问题是我无法让 Ubound() 函数工作。

这是代码：

```
Function IleGier(Arr As Variant, Champ As String, Data As Date) As Variant 'Integer
    '                arr/\           cond1/\        cond2/\
    Dim i As Integer
    Dim ile As Integer

    ile = -1
    i = 1

    Do While i < UBound(Arr, 1)
        If Arr(1)(i) = Data Then
            If Arr(2)(i) = Champ Then
                ile = ile + 1
            End If
        End If
        i = i + 1
    Loop

    IleGier = ile
    'IleGier = Arr(2)(1)
End Function 
```

数组将始终是二维的。

前任。大批：

```
15-3-2013 Arg1
15-3-2013 Arg2
15-3-2013 Arg1
15-3-2013 Arg1
16-3-2013 Arg3
16-3-2013 Arg3
16-3-2013 Arg1 
```

所需的返回`=IleGier(E1:F10;"Arg1";"15-3-2013")`值为 3（此示例中的日期 arg 可能传递了错误的“”bcoz），但`#ARG`只要我使用`UBound()`函数，它就会返回。

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:11:26.477

`i`作为第二个索引，我想你应该使用：

```
Do While i < UBound(Arr, 2) 
```

# android - gridview中的图像在android中滚动时改变它们的位置

> ID：15598287
> 
> 赞同：0
> 
> 时间：2013-03-24T12:10:23.860
> 
> 标签：android, gridview, adapter

我正在尝试`Gridview`用一些`TextViews`和来填充我的`Imageviews`。我成功地做到了，但是当我在网格中向下滚动时，图像会改变它们的位置。我已经阅读了与同一问题相关的其他一些问题；喜欢this one [question](https://stackoverflow.com/questions/6055730/gridview-elements-changes-their-place-dynamically-when-scroll-screen)，但它对我没有帮助。

**适配器**

```
public class ItemListBaseAdapter extends BaseAdapter {

private static ArrayList<ItemDetails> itemDetailsrrayList;

private LayoutInflater l_Inflater;

private Context context;

// private OnClickListener listner;

public ItemListBaseAdapter(Context context, ArrayList<ItemDetails> results) {
    itemDetailsrrayList = results;
    l_Inflater = LayoutInflater.from(context);
    this.context = context;
}

public int getCount() {
    return itemDetailsrrayList.size();
}

public Object getItem(int position) {
    return itemDetailsrrayList.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = l_Inflater.inflate(R.layout.activity_gridview_items,
                null);
    holder = new ViewHolder();
    convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }       

    holder.txt_itemName = (TextView) convertView
            .findViewById(R.id.tv_item_title);
    holder.txt_itemDescription = (TextView) convertView
            .findViewById(R.id.tv_item_detail);
    holder.txt_itemPrice = (TextView) convertView
            .findViewById(R.id.tv_item_price);
    holder.itemImage = (ImageView) convertView
            .findViewById(R.id.iv_item_image);
    holder.txt_itemName
            .setText(itemDetailsrrayList.get(position).getName());
    holder.txt_itemDescription.setText(itemDetailsrrayList.get(position)
            .getItemDescription());
    holder.txt_itemPrice.setText("Rs "
            + itemDetailsrrayList.get(position).getPrice());
     holder.itemImage.setImageBitmap(itemDetailsrrayList.get(position)
     .getImage());

    return convertView;
}

static class ViewHolder {
    TextView txt_itemName;
    TextView txt_itemDescription;
    TextView txt_itemPrice;
    ImageView itemImage;
    Button likeBtn;
    Button addBtn;
  }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-24T12:25:35.463

你需要打电话`findViewById`时`convertView == null`。

```
if (convertView == null) {
    convertView = l_Inflater.inflate(R.layout.activity_gridview_items, parent, false);
    holder = new ViewHolder();

    holder.txt_itemName = (TextView) convertView
        .findViewById(R.id.tv_item_title);
    holder.txt_itemDescription = (TextView) convertView
        .findViewById(R.id.tv_item_detail);
    holder.txt_itemPrice = (TextView) convertView
        .findViewById(R.id.tv_item_price);
    holder.itemImage = (ImageView) convertView
        .findViewById(R.id.iv_item_image);

    convertView.setTag(holder);
} else {
    holder = (ViewHolder) convertView.getTag();
} 
```

# php - 从不同的表中删除几个相关的行

> ID：15598289
> 
> 赞同：1
> 
> 时间：2013-03-24T12:10:29.697
> 
> 标签：php, mysql, sql, sql-delete

我有一个这样的数据库

```
table 1 : area
+------------+
| id | name  |
+------------+
| 1  | area1 |
+------------+

table 2 : area_members
+------------------------+
| rel_area  | rel_school |
+------------------------+

table 3 : school
+------------+
| id  | name |
+------------+

table 4 : school_members
+---------------------------+
| rel_school  | rel_student |
+---------------------------+

table 5 : student
+------------+
| id  | name |
+------------+ 
```

在这张表中，任何地区都有几所学校，任何学校都有几名学生。我想通过删除 area1 从所有这 5 个表中删除与“area1”（区域、学校、学生）相关的任何内容。

我尝试了一些 JOIN 和 UNION 查询，但我无法修复它。有人能帮帮我吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:14:00.347

您可以简单地连接表，最好的部分是，MySQL 允许您在一次查询中删除多个表。

```
DELETE  a, b, c, d, e
FROM    area a
        INNER JOIN are_members b
            ON a.ID = b.rel_area
        INNER JOIN school c
            ON b.rel_school = c.ID
        INNER JOIN school_members d
            ON c.ID = d.rel_school
        INNER JOIN student e
            ON d.rel_student = e.ID
WHERE   a.Name = 'area1' 
```

*PS：请在执行上述语句前**备份您的数据库***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:36:56.473

定义外键约束时，您可以指定删除的记录是否影响与外键相关的其他记录。在声明外键时，您可以指定一个选项：**删除级联**。假设表**B**属于表**A**。如果您**在删除级联上指定：如果表 B 中的记录与表****A**中的记录相关，则当表**A**中的该记录被删除时，这将导致表**B**中的记录被删除

# php - 如何显示 与 class='current' 取决于父类别

> ID：15598291
> 
> 赞同：0
> 
> 时间：2013-03-24T12:10:46.087
> 
> 标签：php, pligg

嗨，我有一个导航栏，其中包含两种类型的新闻 TOP 和 Upcoming 以及子类别，并且我有以下代码`class='current'`在选择子类别时添加，例如来自即将到来的“经济”，但是当我按下同一类别但来自 TOP 新闻时它无论如何都会激活即将到来。

```
<?PHP
    $category = $_REQUEST[category];

    echo "<ul id='frumos'>";
        echo "<li ";
        if($category == 'economic'){
            echo " class='current'";
        }
        echo "><a href='/upcoming.php?category=economic'>Economic</a></li> ";
        echo "<li";
        if($category == 'other'){
            echo " class='current'";
        }
        echo "><a href='/upcoming.php?category=other'>Freestyle</a></li>";
        echo "<li";
        if($category == 'social'){
            echo " class='current'";
        }
        echo "><a href='/upcoming.php?category=social'>Social</a></li>";
    echo "</ul>";
    ?> 
```

我是 PHP 新手，我尝试了这段代码，但它不起作用（[此处](http://www.comment.md)为原始菜单）

```
 <?PHP
        $category = $_REQUEST[category];
   if ($pagename eq 'upcoming')
        echo "<ul id='frumos'>";
            echo "<li ";
            if($category == 'economic'){
                echo " class='current'";
            }
            echo "><a href='/upcoming.php?category=economic'>Economic</a></li> ";
    else
         echo "<ul id='frumos'>";
            echo "<li ";
            if($category == 'economic'){
                echo " class='current'";
            }
            echo "><a href='/?category=economic'>Economic</a></li> ";
            echo "<li";
            if($category == 'other'){
                echo " class='current'";
            }
            echo "><a href='/upcoming.php?category=other'>Freestyle</a></li>";
            echo "<li";
            if($category == 'social'){
                echo " class='current'";
            }
            echo "><a href='/upcoming.php?category=social'>Social</a></li>";
        echo "</ul>";
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:32:35.487

你错过了一些大括号。我不确定这是否是您想要的，但这是开始的地方。

```
<?PHP
    $category = $_REQUEST[category];
if ($pagename eq 'upcoming') {
    echo "<ul id='frumos'>";
        echo "<li ";
        if($category == 'economic'){
            echo " class='current'";
        }
        echo "><a href='/upcoming.php?category=economic'>Economic</a></li> ";
} else {
     echo "<ul id='frumos'>";
        echo "<li ";
        if($category == 'economic'){
            echo " class='current'";
        }
        echo "><a href='/?category=economic'>Economic</a></li> ";
        echo "<li";
        if($category == 'other'){
            echo " class='current'";
        }
        echo "><a href='/upcoming.php?category=other'>Freestyle</a></li>";
        echo "<li";
        if($category == 'social'){
            echo " class='current'";
        }
        echo "><a href='/upcoming.php?category=social'>Social</a></li>";
}
echo "</ul>";
?> 
```

# jquery - 使用 blueimp 上传错误文件

> ID：15598293
> 
> 赞同：4
> 
> 时间：2013-03-24T12:10:49.223
> 
> 标签：jquery, ajax, jquery-plugins, file-upload, blueimp

我正在尝试通过 blueimp 文件上传来上传文件。我使用非常简单的代码进行测试，但代码不起作用。在 firefox 错误控制台中有两个错误

*   错误：TypeError：$.ajaxTransport 不是函数

*   错误：TypeError：$.support 未定义

这是我的代码

```
<input id="fileupload" type="file" name="picture"/>
<input type='button' id='sub'/>

$('#sub').click(function () {
$('#fileupload').fileupload({
    url: 'php/index.php',
   // dataType: 'json',
    done: function (e, data) {
        $.each(data.result.files, function (index, file) {
            $('<p/>').text(file.name).appendTo(document.body);
        });
    }
});
}); 
```

单击按钮后发生另一个错误

*   错误：TypeError：$(...).fileupload 不是函数

    这意味着插件功能不起作用。请提前帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T18:15:30.493

所以我对 jquery 很陌生，但我在尝试使用相同的插件时遇到了同样的错误。查找 ajaxTransport 并发现它实际上是 jquery 中的一个函数，这让我很好地猜测我使用的是旧版本的 jquery。果然：VS2010并没有更新它的jquery，所以如果你在VS中新建一个项目，你会得到jquery-1.4.1。jquery 现在升级到 1.10.0 版本。将我的项目更新到该版本，错误消失了，我的服务器端代码被成功调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-04T11:17:19.923

在浏览器中按 F12 并查看网络选项卡以查看刷新页面时正在加载哪些脚本。在我的情况下，我加载了两次 jquery，删除其中一个为我解决了问题。

# java - ListIterator 下一个和上一个。细节

> ID：15598297
> 
> 赞同：3
> 
> 时间：2013-03-24T12:11:17.837
> 
> 标签：java, iterator, next

因此，通过阅读[http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html#next%28%29](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html#next%28%29)

*强调文本*

> E 下一个（）
> 
> ```
> Returns the next element in the list. This method may be called repeatedly 
> ```
> 
> 以前来回走。（**请注意，交替调用 next 和 previous 将重复返回相同的元素**。）

我明白他们的意思

> **请注意，交替调用 next 和 previous 将重复返回相同的元素**

但是我还没有在 javadoc 中找到它是如何发生的。我想这是因为`iterator.next()`“光标”在返回当前元素后自动进入下一个位置？可能？所以在这种情况下，调用`iterator.previous()`只会返回相同的元素并将光标设置回调用之前的位置`iterator.next()`。

# android - 按项目位置在 GridView 中设置背景

> ID：15598301
> 
> 赞同：5
> 
> 时间：2013-03-24T12:11:29.857
> 
> 标签：android, gridview, view, background

我想更改 GridView 中特定项目的背景颜色（按位置）。

```
gridview.getChildAt(1).setBackgroundResource(android.R.drawable.btn_default); 
```

不起作用。

如果我在 OnClickListener 中使用它，它可以工作：

```
public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
    view.setBackgroundResource(android.R.drawable.btn_default);
} 
```

但我想更改它而无需单击。

* * *

*编辑*

**图像适配器：**

```
public class ImageAdapter extends BaseAdapter {
private final String TAG = getClass().toString();

private Context mContext;

public ImageAdapter(Context c) {
    mContext = c;
}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    parent.getChildAt(1).setBackgroundColor(Color.RED);

    imageView.setImageResource(mThumbIds[position]);
    return imageView;
} 
```

**活动：**

```
final GridView gridview = (GridView) view.findViewById(R.id.gridView);
gridview.setAdapter(new ImageAdapter(MainActivity.this));
gridview.setSelection(0);
    gridview.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    View previous = null;
    @Override
    public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            if(previous == view) {
                view.setBackgroundResource(android.R.drawable.btn_default);
            } else {
                view.setBackgroundResource(android.R.drawable.btn_default);
                if(previous != null) previous.setBackgroundResource(0);
                previous =  view;
            }

        }
    }); 
```

**XML:**

```
<GridView
    android:id="@+id/gridView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:numColumns="4" >
</GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:40:11.560

**在你的中**使用它**`getView()`，看看你的背景是否改变：**

 **```
gridView.getChildAt(position).setBackgroundColor(Color.RED); 
```

**不要忘记**使用`@Override`on `getView()`：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-21T05:14:37.353

尝试这个

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        if(position==1)
             imageview.setBackgroundColor(Color.RED);

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-22T09:53:55.497

您可以将 setBackground 用于项目适配器。

尝试这个。item_image.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent">

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/bg_item_selection">

    <ImageView
        android:layout_width="200dp"
        android:layout_height="200dp" />
</LinearLayout> 
```

bg_item_selection.xml

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:drawable="@color/white_color" android:state_pressed="false"/>
<item android:drawable="@color/black"/> 
```

在适配器中。

```
 @Override
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ItemUserEntity itemUserEntity = new ItemUserEntity();
    itemUserEntity = arrayList.get(position);
    LayoutInflater inflater = (LayoutInflater) mContext
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    if (convertView == null) {

        convertView = inflater.inflate(R.layout.item_image, parent,
                false);
    }

    return convertView;

} 
```**

# c - 分析向量位置的内容

> ID：15598305
> 
> 赞同：0
> 
> 时间：2013-03-24T12:11:49.340
> 
> 标签：c

我需要比较向量上的所有数字是否都为零。如果不是，请打印一条消息。

我正在考虑指向地址的内容，但我该怎么做呢？

我的代码：

```
#include <stdio.h>
#include <stdlib.h>

int main (void)
{
    int linha_user=0, coluna_user=0;
    float *identidade[linha_user][coluna_user];
    int linha, coluna;
    int se=0,sim=0,nao=0;
    printf("Digite o número de linhas desejado na matriz:\n");
    scanf("%d", &linha_user);
    printf("Digite o número de colunas desejado na matriz:\n");
    scanf("%d", &coluna_user);

    for (linha=0;linha<linha_user;linha++)
    {
        for (coluna=0;coluna<coluna_user;coluna++)
        {
            printf("Digite o número desejado para a posição %d,%d\n",linha,coluna);
            scanf("%d", &identidade[linha][coluna]);
        }
    }

    for (linha=0;linha<linha_user;linha++)
    {
        for (coluna=0;coluna<coluna_user;coluna++)
        {
            if (*identidade[linha][coluna] != 0)
            {
                se=nao;
            }
            else
            {
                se=sim;
            }
        }
    }

    if (se == nao)
    {
        printf("Nem todos os elementos são iguais a zero\n");
    }
    else
    {
        printf("Todos os elementos são iguais a zero.\n");
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:18:00.733

请在评论、消息和标识符名称中使用英文。

我用 GNU 重新缩进了你的代码`indent`，然后我编译它（使用 GCC 4.8）`gcc -Wall -Wextra`并得到了

```
walter.c: In function 'main':
walter.c:22:4: warning: format '%d' expects argument of type 'int *', but argument 2 has type 'float **' [-Wformat=]
scanf ("%d", &identidade[linha][coluna]);
^
walter.c:49:1: warning: control reaches end of non-void function [-Wreturn-type] 
```

}

还有你的声明

```
 int linha_user=0, coluna_user=0;
 float *identidade[linha_user][coluna_user]; 
```

肯定是错的。您正在声明一个零大小的浮点指针矩阵（如果稍后您设置`linha_user`或`coluna_user`使用 ag`scanf`或某些赋值，则不会改变）。

我强烈建议阅读一些好的 C 编程书籍。

您可能希望（至少在 Linux 上）使用调试器（如`gdb`Linux）和内存泄漏检测器（如Linux 上的[valgrind](http://valgrind.org/) ）来调试程序。

顺便说一句，您使用的*向量术语让我建议使用*[C++2011](http://en.wikipedia.org/wiki/C++11)（使用 GCC 4.8 编译器）及其容器类，尤其是它的[std::vector](http://en.cppreference.com/w/cpp/container/vector)标准模板。当然你想`g++ -std=c++11 -Wall -g`在这种情况下编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:15:27.047

您的两个对象在您的程序中`sim`具有`nao`相同的值。如果您想在以下方面区分它们，`0`它们需要具有不同的值（如`0`和）：`1`

```
if (se == nao) 
```

`break`然后，当您观察到`for`循环中需要的非零元素时。

# scala - Scala：递归添加到不可变映射？

> ID：15598307
> 
> 赞同：1
> 
> 时间：2013-03-24T12:12:10.703
> 
> 标签：scala, map, immutability

如何在不使用 var 的情况下添加到不可变地图？如何将不可变***绑定***到新值？尝试以下代码时出现错误：

```
"reassignment to val" 
```

我的代码：

```
object Play {

  def main(args: Array[String]): Unit = {
          test1()
  }

  def test1() {
val pairs = Array(("a", 1), ("b", 2), ("c", 3), ("d", 4))
val m = Map[String, Int]()

for (x <- pairs) {
    m = addToMap (x, m)
}
  }

  def addToMap(pair: (String, Int), map: Map[String, Int]): Map[String, Int] = {
      map + (pair._1 -> pair._2)
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:17:05.277

如果要重新分配不可变映射，则需要将其设为 var：

```
var m = Map[String, Int]() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T13:44:57.013

或使用 à mutable 数据结构，如：

```
scala.collection.mutable.Map 
```

但是您将无法重新分配变量！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-21T06:08:33.847

有几个选项。

最常见的方法是`var`在构建结构时使用 a 。这通常是最简单和最易读的方法

另一种是使用递归结构，可以直接编写递归函数调用，也可以使用类似`fold`. （我通常建议您使用折叠和地图等标准函数，而不是自己进行迭代。）

另一个对您有用的习惯用法是使用 toMap 之类的东西。这已经在你有一个像你一样的现有数组的情况下被提到过，但它也可以与 foreach 循环（或等效函数）结合使用。例如，

```
( for (x <- xs)
  yield (toKey(x), toVal(y))
).toMap 
```

如果值是静态的，您也可以这样做。

```
Map("a" -> 1, "b" -> 2, "c" -> 3, "d" -> 4) 
```

就个人而言，当我只是使用临时本地地图时，我发现可变地图通常是最合适的。了解如何以函数式的方式做事是很有价值的，我认为每个人都应该学习 Haskell，但是 Scala 的`m(x) = y`可变映射语法通常可以导致非常简单和简洁的代码。

Scala 有意成为一种混合范式语言。我的建议是首先使用不可变的函数式方法，但不要害怕在它们使事情变得更简单时使用命令式特性——除非涉及线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T17:14:04.960

您所需要的只是从 转换`Array`为`Map`：

```
val pairs = Array(("a", 1), ("b", 2), ("c", 3), ("d", 4))
val m = pairs.toMap 
```

# codeigniter - 在 CodeIgniter 中设置表单验证规则

> ID：15598308
> 
> 赞同：3
> 
> 时间：2013-03-24T12:12:12.673
> 
> 标签：codeigniter, validation

我有这些问题，我想在“文本”类型的三种输入形式上设置规则，我的规则是这三个**中的至少**一个具有值（三个中**的任何一个**），我不知道如何在 CI 中设置它们，因为它们在 run() 被触发时完全执行，所以你们中的任何人都知道如何设置这些规则以在 CI 中形成验证，请分享你的知识。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T12:38:08.777

您可以设置自己的验证函数类型。[这里](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)有很好的记录，但摘录如下：

```
<?php

class Form extends CI_Controller {

    public function index()
    {
        $this->load->helper(array('form', 'url'));

        $this->load->library('form_validation');

        $this->form_validation->set_rules('username', 'Username', 'callback_username_check');
        $this->form_validation->set_rules('password', 'Password', 'required');
        $this->form_validation->set_rules('passconf', 'Password Confirmation', 'required');
        $this->form_validation->set_rules('email', 'Email', 'required|is_unique[users.email]');

        if ($this->form_validation->run() == FALSE)
        {
            $this->load->view('myform');
        }
        else
        {
            $this->load->view('formsuccess');
        }
    }

    public function username_check($str)
    {
        if ($str == 'test')
        {
            $this->form_validation->set_message('username_check', 'The %s field can not be the word "test"');
            return FALSE;
        }
        else
        {
            return TRUE;
        }
    }

}
?> 
```

`callback_username_check`正在调用`username_check`控制器中的函数

**回答您的最新评论**

```
// $data is $_POST 
function my_form_validator($data)
{
    $data = 'dont worry about this';
    // you have access to $_POST here
    $field1 = $_POST['field1'];

    if($field1 OR $field2 OR $field3)
    {
        // your fields have value       
        return TRUE;
    }
    else
    {
        // your fields dont have any value
        $this->form_validation->set_message('field1', 'At least one of the 3 fields should have a value');

        return FALSE;
    }
} 
```

# java - 使用 python 客户端将数据发送到 java 服务器

> ID：15598309
> 
> 赞同：0
> 
> 时间：2013-03-24T12:12:17.703
> 
> 标签：java, python, sockets

我已经在网上搜索了一段时间，现在正在寻找这个问题的答案。

发送文件的python代码：

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
with open(path, mode='rb') as f:
   s.sendall(f.read()) 
```

接收数据的java代码：

```
 private BufferedInputStream bis = new BufferedInputStream(socket.getInputStream());
 try (BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(path))) {
      while (true) {
          int size = bis.read(by);
          if (size > 0) {
              bos.write(by, 0, size);
              bos.flush();
              total += size;
              System.out.println(size + "(" + total + ")");
              if (total == length) {
                  break;
              }
           }
        }
   }..... 
```

我看到正在发送数据，并且我知道数据在 java 端的流中。但是 bis.read(by) 调用挂起，并拒绝读取数据，直到数据连接终止。

我怀疑它与java中的“flush”有关，但我找不到任何方法来使用python进行“flush”。

任何线索为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:46:23.903

我想通了，由于某种原因正在发生竞争条件，在 python 代码中放置一个 sleep(0,2) 使 java 服务器能够响应。

```
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sleep(0.2)
with open(path, mode='rb') as f:
   s.sendall(f.read()) 
```

# javascript - 如何使用 javascript 和 JQuery 检测文档 URL 已更改？

> ID：15598311
> 
> 赞同：0
> 
> 时间：2013-03-24T12:12:24.883
> 
> 标签：javascript, jquery

我正在实现一个浏览器插件。
我想检测文档 url 更改为当前以外的另一个 url 的事件。
像这样的东西[顺便说一句，那是伪代码]：

```
$(window).bind('documenturlchange', function() {
    alert("page document url has been changed");
}); 
```

如何实现这个功能？

顺便说一句，`hashchange`仅检测 url 中更改的“哈希部分”，但不会检测到整个链接更改（例如，可能到另一个域）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:30:16.417

您可以利用窗口 DOM 对象 hashchange 事件来检测 URL 的变化。例如，假设当前 URL 是[http://yourhost.com](http://yourhost.com)而新 url 是[http://yourhost.com#changed](http://yourhost.com#changed)，在这种情况下会触发 onhashchange 事件。

参考：[HashChange](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/hashchange)

# python - 不同平台上的按钮顺序（QDialogBu ttonBox）

> ID：15598313
> 
> 赞同：1
> 
> 时间：2013-03-24T12:12:35.660
> 
> 标签：python, qt, pyqt4

QDialogBu​​ttonBox 小部件会自动对其按钮重新排序，以满足不同平台上用户的期望。我想遵循这种行为，但使用我自己的按钮标签（例如“导入”而不是“确定”）。我怎样才能做到这一点？是否可以使用 QMessageBox，或者我需要编写自己的实现？我正在用 PyQt4 和 Qt Designer 编写我的应用程序。

请参阅下面的 QDialogBu​​ttonBox 在 OS X 上的 Aqua 和 Cleanlooks 样式的屏幕截图。

![QDialogBu​​ttonBox](../Images/651450ccc5ead57d930d1d101da9ad42.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T12:23:31.303

`QDialogButtonBox`可以为您执行此操作，但您将需要创建一个对话框以将其放在首位（工作量很小）。

```
...
auto buttons = new QDialogButtonBox( this );
buttons->addButton( "Import", QDialogButtonBox::AcceptRole );
buttons->addButton( "Cancel", QDialogButtonBox::RejectRole );
... 
```

文档在[这里](http://qt-project.org/doc/qt-4.8/qdialogbuttonbox.html)（它是 C++，但我确信可以遵循它），总体思路是`ButtonRole`当前样式布局使用它来重新排列按钮。

# c# - 如何创建实时应用程序和互连应用程序

> ID：15598314
> 
> 赞同：0
> 
> 时间：2013-03-24T12:12:41.160
> 
> 标签：c#, android, .net, wpf, wcf

我有一个`WCF`服务，它暴露`SOAP`和 REST 端点，我们有`WPF`，Android，Windows Phone（将来），`ASP.NET`在我们的服务之上的应用程序`WCF`，所以很多用户可以使用来自世界不同地区的许多应用程序。

现在我们对数据的新鲜度有一个大问题，我们正在使用一些老派的轮询技术来查找更新的数据，有没有办法创建一个系统，无论平台和位置如何，都可以将数据推送到连接的应用程序数据更新发生在任何应用程序的服务器上。

我已经研究了 Duplex Callbacks 但这对于 android 是不可能的并且有一些其他限制。我也知道`GCM`for android 但不知道如何使它与其他平台应用程序一起工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:53:35.150

GCM 仅适用于 Android 设备。Windows Phone 和 iOS 也有类似的推送通知服务。有多种解决方案，例如[PushSharp](https://github.com/Redth/PushSharp)和[Windows Azure 移动服务](http://www.windowsazure.com/en-us/develop/mobile/)，它们允许您将通知推送到多个设备。

至于将推送通知用于什么。我强烈建议不要使用它们来推送数据，因为您不能总是 100% 确定通知是否会到达设备。因此，仅使用它们来通知客户端新数据可用，然后获取它。将推送通知与轮询一起使用。

目前还不完全清楚您的应用程序做了什么，因此我不知道您何时以及多久需要一次新数据。请记住，例如 iOS 不允许像 Android 和 Windows Phone 那样使用永久后台服务，但 WP 只允许每 30 分钟更新一次。

# rabbitmq - AMQP交换交换网状架构

> ID：15598323
> 
> 赞同：0
> 
> 时间：2013-03-24T12:14:15.207
> 
> 标签：rabbitmq, amqp, mesh

是否可以使用交换在服务器之间创建网格架构以交换与 AMQP 的绑定？

一个实际的例子是一个聊天中继系统，它在互联网上有多个出口节点/交换，它们必须都处于相同的状态，以便节点可以将消息中继到连接到它们的客户端，并且不会有重复的消息被传递。

其次，是否有比 AMQP 更好的技术来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:34:56.577

XMPP 将是聊天系统的明显选择。

到目前为止，AMQP 中还没有用于连接服务器的明确标准。“交换到交换绑定”是 RabbitMQ 的非标准扩展。也就是说，一旦建立连接，协议本身就是所需要的。所以网状网络当然是可能的，只是你建立它们的方式会因服务器而异。来自 Apache Qpid 的 qpidd 代理支持与任何 AMQP 0-10 或（最近）1.0 兼容的服务器建立连接，并在其上拉取或推送消息。

# xamarin.ios - 使用 V3 创建 MvvmCross 应用程序 - iOS 上缺少 System.Windows

> ID：15598326
> 
> 赞同：0
> 
> 时间：2013-03-24T12:15:12.983
> 
> 标签：xamarin.ios, mvvmcross, xamarin-studio

我目前尝试使用 V3 设置我的应用程序。

适用于 WP8 和 Android。但我在 iOS 上苦苦挣扎。

如新教程中所述，我已将以下引用添加到我的核心项目中：

*   Cirrious.CrossCore.dll
*   Cirrious.MvvmCross.dll

当我在我的 Mac 上打开我的解决方案（得到一个只包括 iOS 和核心项目的解决方案）时，Xamarin Studio 开始抱怨，它找不到 ICommand 所需的 System.Windows.Input 东西。

目前它在代码中没有找到 ICommand/IList/MvxRealyCommand...：S

所以问题是：我必须在核心项目中引用哪个 dll 才能使其在 Xamarin Studio 中工作？

* * *

编辑：好的，我必须将以下引用添加到我的核心项目中：

```
 <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Net" />
    <Reference Include="System.Runtime.Serialization" />
    <Reference Include="System.ServiceModel" />
    <Reference Include="System.Windows" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Xml.Serialization" />
  </ItemGroup> 
```

不确定我是否需要所有这些，只需从会议示例中复制粘贴它们即可。我必须对此进行更多研究：S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:36:29.350

**2013 年 6 月更新**

Xamarin 现在已经发布了他们的第一个 PCL 支持。

此外，已找到解决此问题的一个简单解决方法：干脆不要使用`MvxCommand`，而是使用您自己的本地项目`MyCommand`实现`System.Windows.Input.ICommand`作为项目的一部分`Core`。

**更新结束**

* * *

Xamarin 尚未正确支持 PCL

因此，您必须为 ios 构建单独编译 pcl 项目 - 并且您必须引用为 iOS 构建的 dll 而不是为“正确的 PCL”构建的 dll

按照当前的 mvx 演练，这仅意味着您需要在 Mac 上使用不同的 mvvmcross 二进制文件。我通常通过将不同的 dll 文件放在 /lib/mvx 文件夹中来做到这一点

回购[https://github.com/slodge/mvvmcross-binaries](https://github.com/slodge/mvvmcross-binaries)目前包含四组二进制文件 - 这些涵盖所有 pcl 和 ios，调试和发布

* * *

有关这种情况的更多信息，请访问[http://slodge.blogspot.co.uk/2013/01/almost-portable-binaries.html?m=1](http://slodge.blogspot.co.uk/2013/01/almost-portable-binaries.html?m=1)

* * *

希望这种情况很快就会改变——一旦适当的 PCL 支持到来，那么我们应该能够在所有平台上使用相同的二进制文件集:)

# azure - Azure MVC 4 网站引发 502 服务器错误并出现图像和 css 加载问题

> ID：15598327
> 
> 赞同：2
> 
> 时间：2013-03-24T12:15:18.797
> 
> 标签：azure, asp.net-mvc-4

我正在 azure 服务器（mvc 4 网站）中部署一个网站，但我不断收到 502 错误。它主要发生在 IE 中，但有时也发生在 Chrome 中。

另一个问题是，有时当用户未登录（验证）时，图像和 css 文件不会被加载。

有时（发生此问题时）如果我直接转到图像 URL，我将被重定向到登录页面。

这个问题只发生在 IE 中（我知道这是服务器问题，但仍然如此）。不用说，所有的动作 ActionResult 都是`[AllowAnonymous]`

在网络配置中，我尝试了 带有属性的`authorization`标签和位置标签`allow users="?"``path="~/Images" system.web => authorization => allow users="*,?"`

在本地主机中，我已经授予了这些文件夹`IUSER`权限，就完成了这项工作。似乎无法克服这个问题/：有人知道该怎么做或我得到这些错误的方式吗？

# android - 在 Android OpenGL ES 2.0 中使用点精灵

> ID：15598329
> 
> 赞同：2
> 
> 时间：2013-03-24T12:15:26.223
> 
> 标签：android, opengl-es-2.0, points, particles, point-sprites

我看过一些关于“点精灵与纹理四边形精灵”之类的讨论。

但是，如果我理解正确，有一件事让我感到困惑，点精灵的大小是否受到限制（按点精灵范围）？

我对 OpenGL ES 2.0 相当陌生，所以很可能会遗漏一些东西，但是在什么情况下可以在游戏中有效地使用点精灵（除了明显的粒子系统）？如果它们不能超过一定的大小，那么它们对字符等不是毫无用处吗？（我也知道最小和最大尺寸可能因设备而异，这使得事情变得更加不可预测）？

编辑：根据下面的评论和进一步的研究，似乎唯一保证“点”的大小是“1”（即 1 个像素）。

那么在像 Android 这样具有如此多屏幕 DPI 和分辨率的系统上，点是否真的可用于粒子系统？

让我详细说明一下，在低 Res / DPI 屏幕上，单个像素点会显得非常大，但是说，具有真正高分辨率 / DPI 屏幕的 Nexus 10 平板电脑，单个像素点几乎不会被注意到。通常，当我使用精灵时，我会根据屏幕分辨率缩放它们（即，如果我希望精灵占据可用屏幕的 1/4，我将简单地在 X 和 Y 方向上按 screen/2 缩放它。这给出了我的屏幕独立并且效果很好。但是如果我需要在我的 N10 平板电脑上使用 4 的粒子大小，那么它占用的相对空间与只使用一个点的低端（和低分辨率）电话设备相同大小为 1，我不能保证任何大于 1 像素的东西 - 这将如何工作？

我只是想了解点/点精灵何时在像 Android 这样的系统中有用！？

# javascript - jquerymobile需要从另一个js生效时需要先刷新

> ID：15598332
> 
> 赞同：0
> 
> 时间：2013-03-24T12:15:43.600
> 
> 标签：javascript, jquery-mobile

情况是这样的，我有`<a>`标签

```
a href="page2.html" 
```

当我单击然后转到 page2.htm 时，不会出现另一个 js 的效果，

如果我像从浏览器按 f5 那样手动刷新，效果就会出现

我添加了另一个功能`<a>`

```
function refreshPage() {

    $.mobile.changePage(
       url,
      {
          allowSamePageTransition : true,
          transition : 'none',
          showLoadMsg : false,
          reloadPage : true
      }
   );
} 
```

所以标签`<a>`变成：

```
a href="page2.html" onClick="refreshPage()" 
```

但问题没有解决为什么？抱歉，我的英语不好提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:15:38.067

禁用默认链接行为：

```
<a href="page2.html" onClick="refreshPage()" data-ajax="false">foo</a> 
```

# oracle - Oracle Spatial : 查找附近的建筑物

> ID：15598333
> 
> 赞同：0
> 
> 时间：2013-03-24T12:15:43.970
> 
> 标签：oracle, spatial

我正在创建一个应用程序，它可以找到附近建筑物/消防栓的建筑物着火。我已经创建了表格：

```
CREATE TABLE building (
       buildingno VARCHAR(40) PRIMARY KEY
       , buildingname VARCHAR2(32),noofvertices INT
       , shape MDSYS.SDO_GEOMETRY) 
```

和

```
CREATE TABLE hydrant (hydrantno VARCHAR(40) PRIMARY KEY
      , point MDSYS.SDO_GEOMETRY) 
```

和

```
CREATE TABLE firebuilding(hydrantno VARCHAR(40) PRIMARY KEY) 
```

我想找到特定建筑物（消防栓和建筑物）的最近邻居。我可以在不为列名创建空间索引的情况下执行此操作吗？

我正在学习空间查询，而我正在处理的数据集很小（每个表中大约有 20 个条目并且不会增长）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T17:39:35.333

您是否有充分的理由不创建空间索引？

如果这样做，并且形状的数量很少，则可以使用“蛮力”方法获得可接受的结果和性能，该方法用于`SDO_GEOM.SDO_DISTANCE`计算给定点与每个其他点之间的距离，然后选择最小距离. 例如，如果`firebuilding`标识给定建筑物，则以下查询使用 1 米（如果坐标是大地坐标）或 1 个坐标单位（如果坐标是非大地坐标）的容差来标识最近的建筑物：

```
SELECT
    B.*
FROM
    (
        SELECT
            A.*,
            DENSE_RANK () OVER (ORDER BY A.DISTANCE) AS RANKING
        FROM
            (
                SELECT
                    OTHER_BUILDINGS.*,
                    SDO_GEOM.SDO_DISTANCE(BUILDING.SHAPE, OTHER_BUILDINGS.SHAPE, 1) DISTANCE
                FROM
                    FIREBUILDING,
                    BUILDING,
                    BUILDING OTHER_BUILDINGS
                WHERE
                    BUILDING.BUILDINGNO = FIREBUILDING.BUILDINGNO
                    AND
                    OTHER_BUILDINGS.BUILDINGNO <> BUILDING.BUILDINGNO
            ) A
    ) B
WHERE
    B.RANKING = 1; 
```

# python - 如何阻止 Gstreamer 尝试初始化 X11

> ID：15598334
> 
> 赞同：2
> 
> 时间：2013-03-24T12:15:50.443
> 
> 标签：python, x11, gstreamer, pygst

我一直在尝试创建一个简单的音频播放器，我想从命令行运行它，为此我已经使用过`Gstreamer`，`pygst`python 绑定和我的代码到目前为止看起来像这样：

```
import pygst
pygst.require('0.10')
import gst
import os

class Player(object):
    mp3stream = "http://http-live.sr.se/p1-mp3-192"

    def __init__(self):
        self.pipeline = gst.Pipeline("RadioPipe")
        self.player = gst.element_factory_make("playbin", "player")
        self.pipeline.add(self.player)

        self.player.set_property('uri', self.mp3stream)
        self.pipeline.set_state(gst.STATE_PLAYING)

player = Player()

while 1:
    if(1 == 2):
        break 
```

现在由于某种原因，当我运行此代码时，我收到以下警告：

```
** (radio.py:7803): WARNING **: Command line `dbus-launch --autolaunch=f12629ad79391c6f12cbbc1a50ccbcc8 --binary-syntax --close-stderr' exited with non-zero exit status 1: Autolaunch error: X11 initialization failed.\n 
```

我可以毫无问题地播放音乐，但我会非常摆脱这些警告，现在我假设`Gstreamer`库出于某种原因试图启动`X11`音频播放部分需要但不是必需的东西。欢迎对这一假设的有效性发表任何评论。

我可以导入其他东西或传递某种标志来阻止 Gstreamer 尝试初始化`X11`吗？

**编辑 1**

我试过添加这个：

```
fakesink = gst.element_factory_make("fakesink", "fakesink")
self.player.set_property("video-sink", fakesink) 
```

根据[文档](http://pygstdocs.berlios.de/pygst-tutorial/playbin.html)，上面的代码将禁用视频流的自动启用。但是，这并不能解决我的警告问题。

**编辑 2**

好的，`element(?) playbin`这就像一个现成的管道，包含几个音频和视频相关的东西，对不起，我现在无法更好地解释它。但是似乎 playbin 初始化了一些`elements(?)`尝试访问`X11`的 . 我猜因为我没有播放任何与视频相关的内容，所以它不会崩溃。我已经设法编辑了一些，`playbin elements(?)`但没有一个能修复`X11`警告。

当前代码如下所示：

```
self.pipeline = gst.Pipeline("RadioPipe")

self.player = gst.element_factory_make("playbin", "player")
pulse = gst.element_factory_make("pulsesink", "pulse")
fakesink = gst.element_factory_make("fakesink", "fakesink")

self.player.set_property('uri', channel)
self.player.set_property("audio-sink", pulse)
self.player.set_property("video-sink", fakesink)

self.pipeline.add(self.player) 
```

元素后的问号与我不确定这是正确的措辞有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:10:20.990

您应该能够`video`在 playbin 的`flag`属性中禁用该标志。或者，如果您确实需要视频并且知道您需要哪个视频接收器，请`video-sink`相应地设置该属性。

# scala - 如何在Scala中获取对字符串的引用并通过修改此引用来修改原始字符串？

> ID：15598340
> 
> 赞同：1
> 
> 时间：2013-03-24T12:16:49.213
> 
> 标签：scala, reference, value-type

据我了解，Scala 中的字符串是值类型：

```
var a = "hello"
var b = a
b = "hi" 
```

-

```
println(a)   // hello
println(b)  // hi 
```

我想 a 指向 b 并在 print 上方制作代码

```
hi
hi 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:24:45.893

*警告：这是非常糟糕的功能风格*

你的`a`和`b`是字符串。您想要的是对字符串的**引用！**

```
class StringRef(var s:String)  

val a = new StringRef("hello")
val b = a
b.s = "Hi"
println(a.s)   // Hi
println(b.s)   // Hi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T12:29:29.100

您不能这样做，因为在[Java/Scala 中，所有内容都是按值分配的](https://stackoverflow.com/questions/2776145/how-can-java-assignment-be-made-to-point-to-an-object-instead-of-making-a-copy)。您不能分配一个变量来直接引用另一个变量。

相反，您可以分配两个变量以包含对可变对象的相同引用值。

# c# - JSON TinyMCE 返回值“\t”

> ID：15598341
> 
> 赞同：3
> 
> 时间：2013-03-24T12:17:03.277
> 
> 标签：c#, javascript, asp.net-mvc, json, tinymce

我应该为“streszczenie”使用另一个变量吗？或者我该怎么办？

在我看来，TinyMCE 正文有 html，但我只得到**"\t"**可能我对 JS 有问题

[这是新问题 - 这个问题与此链接有关。我为其他用户添加了这个](https://stackoverflow.com/questions/15597252/json-click-event-empty-parameter)

**这是我在 TinyMCE 中写的**

![在此处输入图像描述](../Images/4073a01ecfd480a6750fcc887cdbdfd2.png)

**这是我从 TinyMCE textarea "streszczenie" 得到的**

![在此处输入图像描述](../Images/17c0483470bec5f54584f2e4a842ba91.png)

如您所见，有文本**ghhfgh**但我无法获取此文本

![在此处输入图像描述](../Images/0274d358e8087e87a95fc6bf49ca951d.png)

现在我遇到了执行 JSON 的问题

```
<script type="text/javascript">

    function Save() {
        tinyMCE.triggerSave();
        var Temat_controll = $('#Temat').val();
        var Streszczenie_controll = tinyMCE.get('Streszczenie').getContent();
        var PelnyOpis_controll = $('#PelnyOpis').text();

            $.ajax({
                url: '@Url.Action("DodajTematSave", "StronaGlowna")',
                dataType: "json",
                data: { 
                    Temat: Temat_controll,
                    Streszczenie: Streszczenie_controll,
                    PelnyOpis: PelnyOpis_controll
                },
                type: "POST",
                async: false,
                error: function() {
                },
                success: function(data) {
                    if (data.Success) {
                        alert('success');
                    }

                }
            });
        }

</script> 
```

我明白了，但一直没有执行 JSON

![在此处输入图像描述](../Images/83328285c8091dc3eca681fa0e708e5b.png)

当我单击按钮 tinyMCE.get('Streszczenie').getContent() 为空时，我检查了它，但我不知道为什么，因为我已将文本放入 textarea

```
<script type="text/javascript">

    function Save() {
        var Temat_controll = $('#Temat').val();
        var $d = tinyMCE.get('Streszczenie').getContent();
        if ($d.length != 0) {
            if ($d.val().length != 0) {
                var Streszczenie_controll = tinyMCE.get('Streszczenie').getContent();
            }
            else {
                var Streszczenie_controll = 'ewewe';
            }
        }
        var PelnyOpis_controll = $('#PelnyOpis').text();

        $.ajax({
            url: '@Url.Action("DodajTematSave", "StronaGlowna")',
            dataType: "json",
            data: {
                Temat: Temat_controll,
                Streszczenie: Streszczenie_controll,
                PelnyOpis: PelnyOpis_controll
            },
            type: "POST",
            async: false,
            error: function () {
            },
            success: function (data) {
                if (data.Success) {
                    alert('success');
                }

            }
        });
    }

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:14:01.450

您以错误的方式获取内容，而不是通过 jQuery 的`val()`.

要获取 tinymce 内容，只需使用`tinyMCE`对象引用：

```
// Get the HTML contents of the currently active editor
console.debug(tinyMCE.activeEditor.getContent());

// Get the raw contents of the currently active editor
tinyMCE.activeEditor.getContent({format : 'raw'});

// Get content of a specific editor:
tinyMCE.get('content id').getContent() 
```

如前所述： [http ://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.getContent](http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.getContent)

希望它有所帮助。波兰人：）

# wcf - 使用 .net 4.5 在 VS2012 中创建自定义 STS 服务

> ID：15598345
> 
> 赞同：5
> 
> 时间：2013-03-24T12:17:22.030
> 
> 标签：wcf, wif

因为我是 WIF 的新手。我想在 WIF 上创建一个自定义 STS，但这些文档仅适用于 .net 3.5：http: [//msdn.microsoft.com/en-us/library/ee748498.aspx](http://msdn.microsoft.com/en-us/library/ee748498.aspx) ，我在 vs 2012 中找不到这些模板。所以我该怎么做？任何人都可以提供一些信息给我吗？谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-20T09:27:50.023

在 .NET 4.5 或简称为*WIF 4.5*的 WIF下**仍然**可以编写*自定义 STS 服务*。

 ***> “*要创建 STS，您必须从**SecurityTokenService**类派生。在您的自定义类中，您必须至少覆盖**GetScope**和**GetOutputClaimsIdentity**方法...* ”，Microsoft [1](http://msdn.microsoft.com/en-us/library/system.identitymodel.securitytokenservice(v=vs.110).aspx)

您首先从[System.IdentityModel.SecurityTokenService](http://msdn.microsoft.com/en-us/library/system.identitymodel.securitytokenservice(v=vs.110).aspx)派生一个新类型。

请注意，我们现在使用**SecurityTokenService**，它是 .NET 4.5 的**System.IdentityModel**的一部分，而不是 .NET 4.5 之前的**Microsoft.IdentityModel**。

请参阅下面的链接以查看被动 STS 的示例。

Microsoft 的[联合元数据示例](http://code.msdn.microsoft.com/vstudio/Federation-Metadata-34036040#content)是自定义 STS 的一个相当完整的示例。

MSDN：

> 此示例将向您展示如何在运行时在 ASP.NET Web 应用程序中动态使用 WS-Federation 元数据。您还将看到**如何创建生成 WS-Federation 元数据和颁发令牌的基本 STS**。
> 
> 此外，此示例还展示了如何将声明集成到 .NET 框架中的基础知识。您将了解如何启用 Web 应用程序以使用 WIF。您将了解它们在现有属性和函数中的用途，以及下一步如何使用 System.Security.Claims 中的 ClaimsPrincipal 类直接使用它们。您还将学习如何使用本地 STS，它是 Visual Studio 2012 的身份和访问工具的一部分。*[告诉我更多](https://code.msdn.microsoft.com/vstudio/Federation-Metadata-34036040#content)*

* * *

[1] [System.IdentityModel.SecurityTokenService](http://msdn.microsoft.com/en-us/library/system.identitymodel.securitytokenservice(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T19:25:30.777

模板已替换为[Identity and Access Tool](http://visualstudiogallery.msdn.microsoft.com/e21bf653-dfe1-4d81-b3d3-795cb104066e)。

请参阅[.NET Framework 4.5 Beta 中的 Windows Identity Foundation：工具、示例、声明无处不在](http://www.cloudidentity.com/blog/2012/03/15/windows-identity-foundation-in-the-net-framework-4-5-beta-tools-samples-claims-everywhere-2/)

根据 FedUtil 的向导，不再有自定义 STS 工具选项。正如其他帖子所暗示的那样，您仍然可以自己动手。

请参阅：[Windows Identity Foundation 4.5 中的新增功能](http://msdn.microsoft.com/en-us/library/hh873305.aspx)。

看看[Identity Server](http://thinktecture.github.com/)，它是一个非常好的自定义 STS 并根据需要进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:11:12.813

如果您是新手，那么编写自定义 STS 可能不是一个好主意 :-) 我建议您查看 ThinkTecture STS 中给出的实现（[https://github.com/thinktecture/Thinktecture.IdentityServer.v2](https://github.com/thinktecture/Thinktecture.IdentityServer.v2) ) 这是一个示例 STS，它处理不同的令牌类型（SAML、SWT 和 JWT）以及不同的协议（WSFederation、OAuth、...）对于许多简单的情况，这里的内容太多了，但至少代码可以工作。***

# iphone - 刷新表格时应用程序崩溃（可能是tableView上的调用endUpdates导致崩溃）

> ID：15598346
> 
> 赞同：0
> 
> 时间：2013-03-24T12:17:24.840
> 
> 标签：iphone, ios, objective-c, uitableview

看到这篇文章，但没有解决我的问题。

[iPhone 应用程序在 [self.tableView endUpdates] 上崩溃](https://stackoverflow.com/questions/3594566/iphone-app-crashing-on-self-tableview-endupdates)

拥有来自报纸网站的`UITableView`哪些文章。`loads`首先`load`按预期工作，但是当我再次使用`UIRefreshControl`文章时，我的应用程序在 ( )`fetch`时崩溃。`animating``inserting` `rows`

错误：

![在此处输入图像描述](../Images/f431b83242f98c58cd03df7dc27f5dff.png)

**代码：**

```
- (void)insertRowsWithAnimation
{
    NSMutableArray *indexPaths = [NSMutableArray array];
    NSInteger i = self.latestArticlesArray.count - self.latestArticlesArray.count;

    for (NSDictionary *dict in self.latestArticlesArray) {
        [indexPaths addObject:[NSIndexPath indexPathForRow:i inSection:0]];
        i++;
    }
    [self.tableView beginUpdates];
    [self.tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationMiddle];
    [self.tableView endUpdates];
}

- (void)fetchEntries
{
    UIView *currentTitleView = [[self navigationItem] titleView];
    UIActivityIndicatorView *aiView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];

    [[self navigationItem] setTitleView:aiView];
    [aiView startAnimating];

    void (^completionBlock) (NSArray *array, NSError *err) = ^(NSArray *array, NSError *err) {
        if (!err) {
            [[self navigationItem] setTitleView:currentTitleView];
            self.latestArticlesArray = [NSArray array];
            self.latestArticlesArray = array;
            [self insertRowsWithAnimation];
        }
    };
    [[Store sharedStore] fetchArticlesWithCompletion:completionBlock];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return self.latestArticlesArray.count;
} 
```

如果您想查看更多方法，请告诉我。希望你能帮忙。从我目前所了解到的情况来看，我认为帖子的数量已经发生了变化，因此该表期望显示其他数量的文章？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:24:32.300

它第一次加载的原因是因为您每次都插入了许多行，所以在第一次运行时，行数从 0 变为数组中的计数（在完成块中），并且您使用数字调用 insertRows索引路径的数量等于数组的计数。

第二次调用它是在插入新行，但没有更新计数以反映新的总和。您应该将现有数组添加到完成块中返回的数组中，并在 numberOfRowsInSection 中返回该组合数组的计数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T13:05:01.150

线

```
NSInteger i = self.latestArticlesArray.count - self.latestArticlesArray.count; 
```

设置***为零***`i`，因此使用空数组调用。*`insertRowsAtIndexPaths`*

 *我假设您的意图是`insertRowsAtIndexPaths`使用新添加行的行号进行调用，但是您必须在替换数组之前记住旧数据

```
self.latestArticlesArray = array; 
```

但请注意，由于您替换了整个数组，您也可以调用

```
[self.tableView reloadData]; 
```

而不是`beginUpdates`/ `insertRowsAtIndexPaths`/ `endUpdates`。

* * *

*更新：*我的第一个分析是错误的（而 wattson12 的分析是正确的）。正如您在评论中所说，您只需要一个简单的动画即可删除所有先前的行并在获取后插入新行。这可以这样做：

```
- (void)replaceArticlesWithAnimation:(NSArray *)articles
{
    NSUInteger oldCount = [self.latestArticlesArray count];
    self.latestArticlesArray = articles;
    NSUInteger newCount = [self.latestArticlesArray count];

    [self.tableView beginUpdates];
    for (NSUInteger i = 0; i < oldCount; i++) {
        [self.tableView deleteRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:i inSection:0]] withRowAnimation:UITableViewRowAnimationAutomatic];
    }
    for (NSUInteger i = 0; i < newCount; i++) {
        [self.tableView insertRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:i inSection:0]] withRowAnimation:UITableViewRowAnimationAutomatic];
    }
    [self.tableView endUpdates];
} 
```

在`fetchEntries`你打电话

```
if (!err) {
    [[self navigationItem] setTitleView:currentTitleView];
    [self replaceArticlesWithAnimation:array];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-15T08:47:38.827

```
dispatch_async(dispatch_get_main_queue(), ^(void){
        //Run UI Updates
    }); 
```*

# c# - 自托管服务的 WCF 设计方法

> ID：15598347
> 
> 赞同：0
> 
> 时间：2013-03-24T12:17:29.810
> 
> 标签：c#, wcf, wcf-binding, wcf-hosting, wcf-http

我正在寻找一个自托管的 WCF 服务（没有 IIS！）因为我想直接处理项目之间的数据而不是使用数据库。

基本上我需要的是一个正在听的服务让我们说：

> http://My-Public-IP/ServiceName/MethodName/

当用户创建并向该地址发出 HTTP 请求时，发生了一些事情，我希望能够在调试模式下捕获，所以假设我有一个名为 Ping 的操作合同：

```
public string Ping()
{
 return "Ping";
} 
```

当用户创建一个 HTTP 请求时，他将使用该方法等等......

我的问题是这样做的最佳设计是什么，请记住，该服务应该可以从世界各地访问，并且位于我的桌面上，我知道我需要打开端口和东西，但是我可以处理。

我需要你们关于如何设计这样的项目的建议，如果你有关于这个主题的教程、示例、文章或任何数据，我将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:47:44.043

无论您使用什么进程，都需要创建 ServiceHost 类的实例。这是实际处理接收、发送消息、实例化服务实例等的核心类。

# vim - 有没有办法获取当前正在运行的 vim 实例的服务器名称？

> ID：15598356
> 
> 赞同：8
> 
> 时间：2013-03-24T12:18:33.223
> 
> 标签：vim

如果我想将当前运行的 vim-instance/-server 的名称传递给外部脚本。我如何得到它？除此之外，`serverlist()`似乎没有一个内部有用的功能可以直接访问正在运行的进程的服务器名（=从当前的 vim 编辑器会话中）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T12:30:00.683

您正在寻找`v:servername`.

# javascript - 如何使用 Jquery/JavaScript 完全删除画布元素？

> ID：15598360
> 
> 赞同：1
> 
> 时间：2013-03-24T12:18:49.837
> 
> 标签：javascript, jquery, html5-canvas

我有一个画布对象，它从 jQuery 插件动态加载到我的页面上。它没有包装器，没有与之关联的 id 或类。但我需要在之后删除它

```
$(window).resize(function)() {...} 
```

发生。我尝试过使用 jQuery

```
...next().remove(); 
```

技术，以便相邻的 div 元素可以将其从 DOM 中删除，但我遇到了问题。具体来说，我页面上的其他元素也被删除了。有没有一种健康的方法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T12:23:35.343

如果您不使用多个画布元素，只需

```
$('canvas').remove(); 
```

将删除页面上所有匹配的元素。[http://jsfiddle.net/vj6NP/](http://jsfiddle.net/vj6NP/)

如果您在页面上确实有多个画布并且只想删除一个，您可以使用[nth-of-type](http://api.jquery.com/nth-of-type-selector/)选择要删除的一个。

例如删除第一个实例[http://jsfiddle.net/vj6NP/3/](http://jsfiddle.net/vj6NP/3/)： -

```
$('canvas:nth-of-type(1)').remove(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T12:24:20.660

页面上有多少画布元素？如果只有一个；而且您不打算将来添加任何内容，这可能是最简单的

```
var dynamic_canvas = $('canvas');
if(dynamic_canvas) dynamic_canvas.remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-01T10:33:14.530

最简单的方法是保留对添加到文档中的 canvas 元素的引用，然后使用 JQuery 将其删除：

```
this.canvas = document.createElement('canvas');
//later...
$(this.canvas).remove(); 
```

# delphi - Delphi：horz滚动条隐藏，而不是像我说的那样显示

> ID：15598361
> 
> 赞同：0
> 
> 时间：2013-03-24T12:18:50.010
> 
> 标签：delphi, winapi

我使用Delphi7/Win XP SP3/ [TMemo-like控件](http://econtrol.ru)TSyntaxMemo。

我更改了控制水平滚动条设置的代码。我打电话

*   `SetScrollInfo`和`si.fMask := SIF_ALL or SIF_DISABLENOSCROLL;`
*   `ShowScrollBar`和`bShow := not FWordWrapState`

然后我看到对于 WordWrap ON horz-bar 根据需要隐藏，但是对于 WordWrap OFF 它没有根据需要显示！它可能显示也可能不显示，它以某种方式取决于 SetScrollInfo 参数。

这是一个已知问题吗？

# rss - 是什么导致 Google 阅读器认为 RSS 提要中的项目已更新？

> ID：15598362
> 
> 赞同：1
> 
> 时间：2013-03-24T12:18:56.757
> 
> 标签：rss

我正在从我的博客生成一个 RSS 提要。我正在使用[node-rss](http://github.com/dylang/node-rss)。当我对提要中列出的某个帖子进行小幅编辑时，Google 阅读器会将其列为未读，尽管我在一周前将其标记为已读。

我的 RSS 提要包含每个项目的`title`、`description`、`link`和元素。对于，我只是使用该项目的规范 URL。该元素是条目首次发布的日期/时间，而不是最后一次编辑的时间。`guid``pubDate``guid``pubDate`

提要本身包含`lastBuildDate`，它设置为生成 RSS 提要的时间（即被请求的时间）。

据我所知，RSS 提要中没有任何内容将项目标记为已更改。那么为什么谷歌阅读器会认为该项目已更新，为什么又显示为未读呢？

它是否查看内容（已更改）？如果是这样，我是否可以在 RSS 提要中将其标记为次要更新，从而防止 Google Reader 将其显示为未读？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:08:56.283

如果在 Google 阅读器中，您将鼠标悬停在每个帖子右上角的日期上，您会看到它有“收到”和“发布”日期。

“已接收”似乎是 Google 阅读器服务器看到新内容的时间，而“已发布”来自提要本身。

谷歌阅读器似乎使用“收到”日期来决定是否有新内容。

因此，要获得正确的行为

*   不要在提要中放入任何超过（例如）6 个月的内容。
*   将提要 XML 限制为最近的 10 个左右的项目。

当然，第二个可能意味着第一个......

# php - php/mysql 高级搜索页面

> ID：15598363
> 
> 赞同：1
> 
> 时间：2013-03-24T12:19:15.560
> 
> 标签：php, sql

我在使用 php 作为输入和输出、使用 sql 来选择和过滤数据来开发高级搜索代码时遇到了问题。

php代码：

```
<form action="index.php?Type=Advance" method="post">
      <input type="text"   name="name">
                <input type="text"   name="sponsor">

    <select size="1" name="gender" id="">
    <option value="male">male</option>
    <option value="female">female</femal>
</select>
                       <select size="1" name="address" id="">
    <option value="x">x</option>
    <option value="y">y</option>
    <option value="z">z</option>
       </select>
             <input type="submit">
  </form> 
```

然后我声明变量

公共功能 AdvanceSearch($name,$sponsor,$gender,$address) {

```
$cheack = "";
if(isset($name)&&$name != ""){
    $cheack.="  name =  '$name' ";
}
if(isset($sponsor)&&$sponsor != ""){
    $cheack.=" AND sponsor =  '$sponsor' ";
}
if(isset($gender)&&$gender != ""){
    $cheack.=" AND gender =  '$gender' ";
}
if(isset($address) &&$address != "" ){
    $cheack.=" AND workplace =  '$address' ";
}
   $DB = mysql_query("SELECT * FROM table WHERE 1 =  1 ".$cheack);
   echo "SELECT * FROM user WHERE ".$WHQ;
   exit(); 
```

实际上它有效，但是如果我没有插入名称...... sql语句将是这样的

```
SELECT * 
FROM table 
WHERE AND sponsor = 'www' 
    AND gender = 'male' 
```

如果我想在表上搜索但不插入名称怎么办.. 如果我没有插入名称，我如何让 sql 语句工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:25:19.663

一个典型的解决方案总是首先添加一个真实的条件，例如`1=1`。没有任何额外条件的查询则变为

```
SELECT * FROM table WHERE 1=1 
```

当您添加任何`AND`条件时，您可以将它们添加到末尾，第一个或最后一个条件没有特殊情况：

```
SELECT * FROM table WHERE 1=1 AND sponsor = 'www' AND gender = 'male' 
```

请注意，如果您使用 OR 而不是 AND，则第一个条件应为 false，例如`0=1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:29:36.163

您可以使用如下标志变量：

```
$cheack = "";
$flag = False;

if(isset($name)&&$name != ""){
 $cheack.="  name =  '$name' ";
 $flag =True;
}

if(isset($sponsor)&&$sponsor != ""){
 if($flag){
  $cheack.="AND ";
 }
 $cheack.="sponsor =  '$sponsor' ";
}

if(isset($gender)&&$gender != ""){
 if($flag){
  $cheack.="AND ";
 }
 $cheack.="gender =  '$gender' ";
}

if(isset($address) &&$address != "" ){
 if($flag){
  $cheack.="AND ";
 }
 $cheack.="workplace =  '$address' ";
} 
```

# python - 获取在脚本中定义的类列表

> ID：15598364
> 
> 赞同：0
> 
> 时间：2013-03-24T12:19:15.597
> 
> 标签：python, class

我正在使用这一行来获取脚本中使用的所有类：

```
clsmembers = inspect.getmembers(sys.modules[__name__], inspect.isclass) 
```

是否有一种（通用）方法可以过滤掉除在脚本中创建的所有类之外的所有类？（我不想要导入的类的名称。）

简单地遍历所有元素并检查`__main__`是太丑陋了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:21:28.983

您检查`__module__`这些类的属性：

```
clsmembers = [c for c in inspect.getmembers(sys.modules[__name__], inspect.isclass) if c[1].__module__ == __name__] 
```

演示：

```
>>> import inspect
>>> import sys
>>> class Foo(object): pass
... 
>>> from json import *
>>> inspect.getmembers(sys.modules[__name__], inspect.isclass)
[('Foo', <class '__main__.Foo'>), ('JSONDecoder', <class 'json.decoder.JSONDecoder'>), ('JSONEncoder', <class 'json.encoder.JSONEncoder'>)]
>>> [c for c in inspect.getmembers(sys.modules[__name__], inspect.isclass) if c[1].__module__ == __name__]
[('Foo', <class '__main__.Foo'>)] 
```

# firefox - 在 Firebug 网络面板中，有一种方法可以按请求发生的顺序对请求进行排序

> ID：15598368
> 
> 赞同：0
> 
> 时间：2013-03-24T12:19:49.200
> 
> 标签：firefox, firebug

如果您在 Firebug 网络面板中按域对请求进行排序，那么是否可以重新对请求进行排序，以按照请求发生的顺序查看请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:27:13.930

当然。只需单击*Timeline*列标题两次。

塞巴斯蒂安

# c# - 等到 UIElement 被绘制（没有 updatelayout）

> ID：15598371
> 
> 赞同：1
> 
> 时间：2013-03-24T12:20:14.383
> 
> 标签：c#, .net, wpf, uielement

如果单击按钮，我有一个大约需要 5 秒才能完成的功能。如果单击按钮，我想显示某种通知以指示正在处理按钮单击，例如

```
<Button Click="OnButtonClick" Content="Process Input" />

<Border x:Name="NotificationBorder" Opacity="0" IsHitTestVisible="False" 
        Width="500" Height="100" Background="White">
    <TextBlock Text="Your input is being processed" HorizontalAlignment="Center" VerticalAlignment="Center"/>
</Border> 
```

并在按钮上的代码隐藏中单击：

```
private void OnButtonClick(Object sender, RoutedEventArgs e)
{
    DoubleAnimation da = new DoubleAnimation
        {
            From = 5,
            To = 0,
            Duration = TimeSpan.FromSeconds(2.5),
        };

    // Making border visible in hopes that it's drawn before animation kicks in
    NotificationBorder.Opacity = 1;
    da.Completed += (o, args) => NotificationBorder.Opacity = 0;

    NotificationBorder.UpdateLayout(); //Doesn't do anything
    UpdateLayout(); // Doesn't do anything

    NotificationBorder.BeginAnimation(OpacityProperty, da);

    // Simulate calculationheavy functioncall
    Thread.Sleep(5000);
} 
```

不知何故`UpdateLayout()`渲染速度不够快，通知仅在 5 秒结束后显示`Thread.Sleep`。

`Dispatcher.Invoke((Action)(() => NotificationBorder.Opacity = 1), DispatcherPriority.Render);`也不会工作。

此外，我不能让`Thread.Sleep`运行在单独的工作线程中——在实际应用程序中，它需要从 Dispatcher 拥有的对象中读取数据并（重新）构建 UI 的一部分。

有没有办法让它在`Thread.Sleep()`被调用之前可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T21:26:11.560

问题是主线程（UI 线程）上的任何长时间活动都会导致 UI 冻结，因此您将看不到任何动画。

您需要在单独的线程中进行计算。我需要访问 Dispatcher 拥有的对象，您可以使用 uiObject.Dispatcher.BeginInvoke 或 Invoke。BackgroundWorker 可以帮助您执行一些长计算并订阅事件 Completed，该事件将由 BackgroundWorker 在 UI 线程上自动触发。

如果您对 UI 冻结没问题，请使用 Dispatcher.BeginInvoke(DispatcherPriority.Background,...) 更改一些属性和其他内容重新安排，例如

NotificationBorder.Opacity = 1; Dispatcher.BeginInvoke(DispatcherPriority.Background, (Action)(()=>Thread.Sleep(5000)));

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T21:42:08.833

如果您希望 UI 更新，则需要将长时间运行的操作更改为异步操作，这意味着将 UI 依赖项与任何逻辑或可能一直占用 IO 绑定的操作正确解耦。如果您不这样做，那么在您的长时间运行操作中发生的任何 UI 更新实际上都不会反映在 UI 中，直到它完成为止。

如果您使用 .NET 4.5 运行，这是我的首选模式：

```
 public async Task DoComplexStuff()
    {
        //Grab values from UI objects that must be accessed on UI thread

        //Run some calculations in the background that don't depend on the UI
        var result = await Task.Run((Func<string>)DoComplexStuffInBackground);

        //Update UI based on results

        //Possibly do more stuff in the background, etc.
    }

    private string DoComplexStuffInBackground()
    {
        return "Stuff";
    } 
```

这与旧式 BackgroundWorker 方法相比有些“倒退”，但我发现它往往会导致更清晰的逻辑。您无需使用显式调用 UI 更新来编写后台代码，而是通过`Task.Run()`. 这也倾向于导致以 UI 为中心的代码和底层逻辑代码之间的自然分离，因为您需要将逻辑重构为可以以这种方式调用的方法。无论如何，这对于长期可维护性来说是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T12:40:17.310

因此，您可以将两个操作（UI 和您的计算）分派到调度程序中，它们将在一行中执行

```
Dispatcher.BeginInvoke(do ui things);
Dispatcher.BeginInvoke(do your logic things); 
```

但是你最好把你的计算移到后台线程中。

# javascript - onfocus 和 onblur 仅适用于 IE7

> ID：15598372
> 
> 赞同：0
> 
> 时间：2013-03-24T12:20:17.500
> 
> 标签：javascript, asp.net, css

我们可以为 IE7 等特定浏览器编写事件`onblur`吗`onfocus`？

我尝试过的如下。

```
<asp:TextBox  onfocus="this.style.backgroundColor='yellow'" onblur="this.style.backgroundColor='white'" Text="something" ID="txtName" runat="server" ></asp:TextBox> 
```

请注意，这对我来说很好。但我只需要`onblur`并`onfocus`在 IE7 上执行。

那可能吗？

也许有人遇到过这种需求。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:31:15.863

您可以检测浏览器并仅在 IE7 时运行您的脚本

把它放在你的标记正文标签的末尾

```
<!--[if lte IE 7]>
    <script type="text/javascript">
        var txtBox = document.getElementById('<%= txtName.ClientID %>');
         txtBox.onfocus =function(){ txtBox.style.backgroundColor='yellow';};
         txtBox.onblur=function(){txtBox.style.backgroundColor='white';};
    </script>
<![endif]--> 
```

或者把这个放在头上

```
<!--[if lte IE 7]>
    <script type="text/javascript">
      window.onload=function(){ 
           var txtBox = document.getElementById('<%= txtName.ClientID %>');
           txtBox.onfocus =function(){ txtBox.style.backgroundColor='yellow';};
           txtBox.onblur=function(){txtBox.style.backgroundColor='white';};
     }
    </script>
<![endif]--> 
```

# android - 如何在android中保存动态创建的复选框的状态

> ID：15598373
> 
> 赞同：0
> 
> 时间：2013-03-24T12:20:43.220
> 
> 标签：android, checkbox, save, sharedpreferences, state

我正在动态创建多个复选框，并且我已经做了一些逻辑来一次只选择一个。现在我只想保存选中复选框的状态，当我从下一个屏幕返回时，它应该被选中。下面我给出了复选框的代码

```
cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {

            if (isChecked) {                    
                if (hash.size() > 0) {
                    hash.get("1").setChecked(false);
                }                                       

                hash.put("1", buttonView);
                selAnyone = true;
            } else {
                hash.clear();
                selAnyone = false;

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:30:43.000

**编辑：**

每当您导航到当前活动到下一个活动时，请像这样保存所选复选框的 id

```
 SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
      SharedPreferences.Editor editor = preferences.edit();
      editor.putString("checkboxid","1");
      editor.commit(); 
```

或简单地通过 Intent 发送

```
yourintent.putExtra("checkboxid","1"); // selected checkbox id 
```

接着

如果您使用的是意图而不是 sharedpreferences，则在导航回当前屏幕时添加相同的额外内容。

首先使用 SharedPreferences：

在您的 Activity 的 onCreate 中检查 pref 是否包含复选框 id

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
  String name = preferences.getString("Name",null);  // if the  preference doesn't exist it returns null

if(name!=null)
{
 int checkedid=Integer.parseInt(name);
checkbox[checkid].setChecked(true);
} 
```

意图的相同逻辑也检查 checkboxid ，如果不存在则不检查任何内容，如果存在则检查带有关联 id 的复选框

* * *

使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)

例子：

```
 SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
  SharedPreferences.Editor editor = preferences.edit();
  editor.putString("checkboxid","1");
  editor.commit(); 
```

变成这样

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
  String name = preferences.getString("Name","checkboxid"); 
```

# php - 通过php类方法加载JS。可能吗？

> ID：15598374
> 
> 赞同：0
> 
> 时间：2013-03-24T12:20:43.620
> 
> 标签：php, javascript, class

我正在尝试使用方法 php 静态类加载一些 JS 代码。目的是将每个 JS 维护在其 HTML 对象的同一位置。因此，当我们调用该方法时，它将创建 HTML obj 并创建一个包含 $jsString 的标签脚本。我的类我的方法（）{

```
 btnObjc id=txtbtnid
  $jsString="
        $(document).ready(function(){
            $(\"#txtbtnid\").click(function() {
                alert(\"oook\");
            });
        });
    "; 
```

}

到目前为止，一切都很好。它创建 btn 对象并在 btn 之后创建标记脚本，其中包含 $jsString。问题是它没有反应。这意味着我按下按钮并没有发生。大家有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:37:15.290

问题是您在页面加载后创建按钮

解决方案：

改用**live 函数**：

```
 $(document).ready(function(){
            $(\"#txtbtnid\").live('click',(function() {
                alert(\"oook\");
            }));
        }); 
```

# java - 应用访问者模式来检测图中的循环

> ID：15598375
> 
> 赞同：0
> 
> 时间：2013-03-24T12:20:59.137
> 
> 标签：java, design-patterns, visitor-pattern

我需要检测有向图中是否存在循环，例如拓扑排序，但我想使用访问者模式。你有什么想法吗？我可以使用节点的数组列表，以及边或其他结构（不是数组）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:50:22.707

访问者模式真的无法以最纯粹的形式实现这样的事情。

请记住，访问者模式通常具有“访问者”在对象网络中旅行，但对象网络“指导”访问者。由于访问者实际上是不知道路径的，因此它可以防止某些类型的破损。

[来自访问者模式的维基百科示例（Java 中）](http://en.wikipedia.org/wiki/Visitor_pattern)

```
class Car implements CarElement {
    CarElement[] elements;

    public Car() {
        //create new Array of elements
        this.elements = new CarElement[] { new Wheel("front left"), 
            new Wheel("front right"), new Wheel("back left") , 
            new Wheel("back right"), new Body(), new Engine() };
    }

    public void accept(CarElementVisitor visitor) {     
        for(CarElement elem : elements) {
            elem.accept(visitor);
        }
        visitor.visit(this);    
    }
} 
```

注意`Car`接受方法。它确保覆盖汽车的所有子元素，封装导航，同时公开将外部函数应用于整个数据结构的能力。

由于您的代码*需要*了解数据结构是如何连接在一起的，因此访问者模式不太适合该任务。如果访问者遇到循环数据结构，未来的访问者将陷入同一个循环，无法访问*某些*数据，从而破坏`Visitor`了`VisitAcceptors`.

现在您可能能够在一定程度上实现目标，前提是您在访问路径中没有遵循“可能是循环的”链接。您仍然必须确保访问路径中的所有节点都跟随在访问路径中，只是访问路径的其他分支。然后，您的访问者基本上会变成一大群节点，这些节点可能会被未经过的反向链接击中，但是当您实施这样一个奇怪的解决方案时，您会想知道为什么要打扰访问者部分。

# java - Java servlet 请求 javax.xml.stream.XMLStreamException - 文件过早结束

> ID：15598379
> 
> 赞同：0
> 
> 时间：2013-03-24T12:21:16.253
> 
> 标签：java, google-app-engine, servlets, jetty, httprequest

我正在尝试读取和解析来自 2 个码头服务器（Eclipse - Google 插件）的 rss 提要：一个启用了 App Engine SDK，一个没有启用。1\. 当我在启用了应用程序引擎的码头运行测试时，它工作正常 2\. 当我在没有启用应用程序引擎的码头服务器上使用相同的代码时，我收到以下消息（因为收到的文本为空）：

javax.xml.stream.XMLStreamException: ParseError at [row,col]:[1,1] 消息：文件过早结束。

我搜索了输入流的过早读取的代码（我使用 new URL(host) 和 url.openStream() 来读取输入），但代码是好的（如果不是，它可能不会在第一种情况）。

我使用 tcpdump (-s 1024 -l -A dst host.com -i wlan0) 来检查标题：

1.  第一种情况：

    获取 /rss/... HTTP/1.1

    主机：www.host.com

    连接：保持活动

    Cookie：环境=a%3A2%3A%7Bs%3A4%3A%22skin%22%3Bs%3A7%3A%22default%22%3Bs%3A4%3A%22lang%22%3Bs%3A5%3A%22ro_RO%22% 3B%7D; 是PC=1

    Cookie2：$版本=1

2.  第二种情况：

    获取 /rss/... HTTP/1.1

    缓存控制：无缓存

    Pragma：无缓存

    用户代理：Java/1.6.0_39

    主机：www.host.com

    接受：文本/html、图像/gif、图像/jpeg、*；q=.2, */* ; q=.2

    连接：保持活动

这些标题可能是问题吗？有没有办法设置完全相同的标题？它会解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:14:37.163

我认为问题出在 User-Agent 标头上，它决定了某些服务器为某些值发送空内容（例如在我的情况下为 Jav/1.6.0_39）。我将 User-Agent 设置为空字符串，现在响应正常。

# html - Css 悬停下拉列表

> ID：15598386
> 
> 赞同：0
> 
> 时间：2013-03-24T12:22:23.867
> 
> 标签：html, css

当鼠标悬停在#clim 时，我创建一个下拉列表，#dropdown 的高度从 0 变为 150px。但代码不起作用。

html代码

```
 <div id="menu">
              <ul>
                <li id="index">Accueil</li>

                <li id="clim">Climatisation</li>
                <li id="ventil">Ventilation</li>
                <li id="electro">Electromenager</li>

              </ul>
            </div>
          </div>    
  <div id="dropdown" >
           <ul>
                <li id="index">Climatisation</li>
                <li id="clim">Ventilation</li>
          </ul>
          </div> 
```

CSS 代码

```
 #dropdown{
        margin-left:693px;
        width:165px;
        height:0px;
        position:absolute;
        background:#158DFB;
        overflow:hidden;
        -webkit-transition-duration:0.3s;
        } 
```

我在这部分有问题。不工作

```
 #clim:hover #dropdown{
        height:150px;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:42:41.567

首先，您的代码有额外的完成标记和 2 个具有相同 id (#clim) 的元素，这并没有使问题很清楚。

要使这项工作与 css 和没有 javascript 一起工作，您必须在外部元素内包含隐藏元素（下拉菜单），您将悬停并触发下拉菜单显示。

试试这个，然后添加你需要的剩余 CSS 规则：

```
<div id="menu">
  <ul>
    <li id="one">Accueil</li>
    <li id="two">
      Climatisation
      <ul id="dropdown">
        <li id="subone">sub Link</li>
        <li id="subtwo">Another sub link</li>
      </ul>
    </li>
    <li id="three">Ventilation</li>
    <li id="four">Electromenager</li>
  </ul>
</div>

#dropdown{
  height: 0;
  overflow:hidden;
  -webkit-transition-duration:0.3s;
}

#menu:hover #dropdown{
  height:150px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:23:59.657

> 当鼠标悬停在#clim 时，#dropdown 的高度会发生变化

你不能用纯 CSS 做到这一点，因为没有`parent`选择器。

# c++ - 尝试将 const char * 转换为 NSString 时出现空字符串

> ID：15598392
> 
> 赞同：1
> 
> 时间：2013-03-24T12:22:55.490
> 
> 标签：c++, objective-c

我在尝试从 const char * 获取 NSString 时遇到了一个奇怪的错误。

```
// in my obj c class
void myObjCMethod {
    const char* charString = myCFunctionReturningConstCharPtr(); 
    printf("%s \n", charString); // prints the correct string

    // ...put a brakpoint here... 

    NSString * nsString1 = [NSString stringWithUTF8String:charString];
    NSLog(@"%@", nsString1); // prints nothing

    NSString * nsString2 = [NSString stringWithFormat:@"%s",charString];
    NSLog(@"%@", nsString2); // prints nothing either
} 
```

来自我的 c 方法的 const char 很好地打印到控制台。但是尝试转换为 NSString 会导致空字符串。现在最奇怪的是，当我尝试调试代码并设置断点（如上所示）时，我的 NSString 突然*变得*有效！

那又怎样——我的测量改变了结果？很久以前的物理课听起来很熟悉，但我怀疑这里涉及到量子力学。

笔记：

我暂时省略了 的实现`myCFunctionReturningConstCharPtr()`，因为它会增加另一层可能与当前问题无关的复杂性（涉及多个 c++ 库，字符串已从 char 指针转换为 std::string 并返回） .

两天来我一直在努力解决这个问题，非常感谢任何帮助！谢谢

**编辑：**

该字符串最初来自`SPODNode`PowerVR 的 Insider SDK 的结构。我们有：

```
struct SPODNode {
    PVRTchar8 *pszName;
    // ...
} 
```

和：

```
typedef char PVRTchar8; 
```

在我的代码中，我这样做：

```
std::string MyCppClass::pvrNodeName() {
    if (node && node->pszName) {
        string stdName(node->pszName);
        return stdName;
    }
    return string();
} 
```

最后在`myCFunctionReturningConstCharPtr()`：

```
const char * myCFunctionReturningConstCharPtr() {
    std::string stdString = myCppClassInstace->pvrNodeName()
    return stdString.c_str();
} 
```

我希望这会有所帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T12:34:24.307

> const char * 是通过在 std::string 上调用 .c_str() 获得的。

您的程序很可能具有**未定义的行为**，因为您正在返回一个指向字符数组的指针，该字符数组在从函数返回时被释放`myCFunctionReturningConstCharPtr()`。

实际上，`const char*`您返回指向由本地`std::string`对象封装的字符数组；对象的析构函数`std::string`释放该数组，当本地对象超出范围时调用析构函数，即从函数返回时。

稍后尝试取消引用您收到的指针会导致未定义的行为，这意味着任何事情都可能发生。这包括您的程序在被调试时似乎运行良好，但在没有附加调试器的情况下运行时却没有。

您应该让函数返回（按值） an `std::string`，然后`c_str()`在需要获取封装的 C 字符串时调用该返回值：

```
std::string charString = myCFunctionReturningConstCharPtr(); 
printf("%s \n", charString.c_str()); // prints the correct string 
```

# ruby-on-rails - Ruby on Rails - 无法识别 gem - 安装问题？

> ID：15598395
> 
> 赞同：0
> 
> 时间：2013-03-24T12:23:22.223
> 
> 标签：ruby-on-rails, windows-7, gem, flickr

我只是想在 Rails 上构建一个应用程序来在 flickr 上进行简单的搜索。不幸的是，在我做任何有趣的事情之前，它似乎无法识别我安装的“flickr”gem。作为一个简单的测试，我所做的只是使用名为 flickrsearch 的方法生成一个名为 flickr 的控制器。在那种方法中，我放在那里的所有东西

```
 require 'flickr' 
```

但在浏览器中，我有以下错误：

```
 cannot load such file -- flickr 
```

事实上，我最初想在 config/environment.rb 中要求“flickr”，但服务器甚至都不会启动。它给了我错误，说它无法加载 flickr。我也尝试过使用其他已安装的 gem，但结果相同。

一个月前，当我第一次使用 Ruby 时，我安装了 Ruby 和一些 gem。一切正常……但最近，我在[http://railsinstaller.org/](http://railsinstaller.org/)上使用 Railsinstaller 安装了 Rails （我使用的是 Windows 7）。所以我猜它在错误的地方寻找宝石。

所以看起来我最初在 c:\Ruby193 中有 gem，现在我在 c:\RailsInstaller\Ruby1.9.3 中也有 gem

所以...我决定在疯狂的时刻删除整个 c:\Ruby193...我知道，这可能不是最干净的方法。

然后重新安装了 flickr gem (gem install flickr)。这一次，它实际上在 c:\RailsInstaller\Ruby1.9.3 中为 flickr 创建了 gem 文件。这是我所期望的，但我仍然遇到 Rails 无法识别 flickr gem 的问题。

请帮助...非常感谢。山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:26:14.340

您不必在 Rails 中明确要求 gems。只需确保您已将 flickr gem 添加到您的`Gemfile`并且您已运行该`bundle install`命令。

# ruby-on-rails - RoR，通过单击按钮销毁对象

> ID：15598403
> 
> 赞同：0
> 
> 时间：2013-03-24T12:24:04.210
> 
> 标签：ruby-on-rails

我有以下结构：

```
<% if @uploads%>
<br class="clear" />
<br />

<% @uploads.each do |file| %>

    <div class="file_information"> 

      <p><%= file.file_name %></p>

      <td class="Chip_info">
      <a href="<%=file.info%>" class= "btn btn-mini btn-info">Info</a>    
      </td>

      <td class="Pic">
      <a href="<%=file.image%>" class= "btn btn-mini btn-info">Pic</a>    
      </td>

      <td class="Hist">
      <a href="<%=file.hist%>" class= "btn btn-mini btn-info">Hist</a>    
      </td>

      <td class="Hist2">
      <a href="<%=file.hist2%>" class= "btn btn-mini btn-info">His2</a>    
      </td>

        <td class="delete">
        <button class="btn btn-mini btn-danger"  data-url="<%=file.destroy%>"> 
          <i class="icon-trash icon-white"></i>

        </button>

      </td> 

    </div>
  <%end%>
<%else%>

<br class="clear" />
<br />
<%end%> 
```

问题是，在运行它时，它会自动销毁所有对象，而无需我单击按钮。是否有可能以某种方式列出上传，并且仅通过单击按钮，相应的上传将被删除（将调用销毁操作）而不是所有上传？

提前致谢

**编辑**

我使用此[示例进行文件上传](https://github.com/tors/jquery-fileupload-rails-paperclip-example) 他使用以下方法删除文件：

模型：

```
"delete_url" => upload_path(self) 
```

看法：

```
 <td class="delete">
        <button class="btn btn-danger"  data-url="{%=file.delete_url%}">
          <i class="icon-trash icon-white"></i>

        <input type="checkbox" name="delete" value="1">
      </td> 
```

所以我尝试了

```
data-url="<%=file.upload_path(self)%>"> 
```

但它不起作用，所以我从控制器打印了 file.upload_path(self) 并得到了这个：

```
/uploads/%23%3CUploadsController:0xaf61b34%3E 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:56:21.617

您可以创建一个助手来生成包含一个按钮的表单：

```
def button_to_delete_file(file)
  form_tag file_path(file), :method => :delete, :style => "display:inline;" do
    button_tag :class => "btn btn-mini btn-danger" do
      content_tag :i, " ", :class => "icon-trash icon-white"
    end
  end
end 
```

并像这样使用它：

```
<%= button_to_delete_file(file) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:26:58.507

在按钮

```
<button class="btn btn-mini btn-danger"  data-url="<%=file.destroy%>"> 
```

你`data_url`不是一个网址。当文件被执行时，里面的所有东西都`<% %>`被执行，所以`file.destroy`被调用。

替换`file.destroy`为相应的 URL（看起来像`file_destroy_path(id)`），它应该可以工作。

# asp.net-mvc - 从其他用户登录时注销后的asp.net mvc以前的用户详细信息显示

> ID：15598404
> 
> 赞同：3
> 
> 时间：2013-03-24T12:24:07.633
> 
> 标签：asp.net-mvc, outputcache

当第一个用户登录并打开他的个人资料并注销时，我有一个 Web 应用程序。
当第二个用户在注销第一个用户后登录同一台计算机并打开配置文件时，它显示第一个用户配置文件。第二个用户必须刷新页面。
如何防止这种情况，我用过

```
 [OutputCache(NoStore = true, Duration = 60, VaryByParam = "*")]
 public ActionResult profile()
 {
    usertb user = db.usertbs.SingleOrDefault(a => a.EMail == userid);
    return View(user );
 } 
```

请帮我解决它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:51:20.443

如果您从操作方法中删除该`OutputCache`属性，它会起作用吗？

```
//[OutputCache(NoStore = true, Duration = 60, VaryByParam = "*")]
public ActionResult profile()
{
   usertb user = db.usertbs.SingleOrDefault(a => a.EMail == userid);
   return View(user );
} 
```

如果是这样，您应该能够通过 2 个步骤解决此问题。首先，把它放在你的 Global.asax 文件中：

```
public override string GetVaryByCustomString(HttpContext context, string custom)
{
    return "User".Equals(custom, StringComparison.OrdinalIgnoreCase)
        ? User.Identity.Name
        : base.GetVaryByCustomString(context, custom);
} 
```

之后，您可以`OutputCache`在操作中使用以下属性：

```
[OutputCache(NoStore = true, Duration = 60, VaryByCustom = "User")]
public ActionResult profile()
{
   usertb user = db.usertbs.SingleOrDefault(a => a.EMail == userid);
   return View(user );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-08T07:52:24.023

您只需将 OutputCache 的位置设置为 Client，这将在浏览器上缓存个性化数据，每个用户都将获得自己的缓存。

```
[OutputCache(NoStore = true, Duration = 60, VaryByParam = "*", Location=OutputCacheLocation.Client)]
public ActionResult profile()
{
    usertb user = db.usertbs.SingleOrDefault(a => a.EMail == userid);
    return View(user );
} 
```

请参阅： [使用输出缓存提高性能 (C#)](https://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute.aspx)

# java - 我的旋转矩阵有什么问题？

> ID：15598408
> 
> 赞同：0
> 
> 时间：2013-03-24T12:24:21.863
> 
> 标签：java, matrix, 3d, rotation

```
//---------------------------------------------------------------------------
//  arbitraryRotate - rotates v theta degrees around n
//---------------------------------------------------------------------------
private static Vector3D arbitraryRotate(Vector3D v, Vector3D n, double theta)
{
    theta = Math.toRadians(theta);
    double cosTheta = Math.cos(theta);
    double sinTheta = Math.sin(theta);

    double M11 = n.x * n.x * (1 - cosTheta) + cosTheta;
    double M12 = n.x * n.y * (1 - cosTheta) + (n.z * sinTheta);
    double M13 = n.x * n.z * (1 - cosTheta) - (n.y * sinTheta);

    double M21 = n.x * n.y * (1 - cosTheta) - (n.z * sinTheta);
    double M22 = n.y * n.y * (1 - cosTheta) + cosTheta;
    double M23 = n.y * n.z * (1 - cosTheta) + (n.x * sinTheta);

    double M31 = n.x * n.z * (1 - cosTheta) + (n.y * sinTheta);
    double M32 = n.y * n.z * (1 - cosTheta) - (n.x * sinTheta);
    double M33 = n.z * n.z * (1 - cosTheta) + cosTheta;

    return new Vector3D(v.x * M11 + v.y * M21 + v.z * M31,
                        v.x * M12 + v.y * M22 + v.z * M32,
                        v.x * M13 + v.y * M23 + v.z * M33);
} 
```

谁能告诉我我的矩阵有什么问题？围绕 Z 轴的旋转效果很好，但是 X 和 Y 轴旋转会导致变形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:34:02.627

您的矩阵设置不正确。这是正确旋转的方法

1.  创建一个旋转矩阵，将您的轴旋转到沿 XZ 平面
2.  创建一个旋转矩阵，将新轴旋转到沿 Z 轴
3.  使用 Z 轴旋转矩阵绕 Z 轴旋转 theta 度。
4.  乘以 2 的倒数
5.  乘以 1 的倒数。

你得到

```
new vector = (Rx^-1)(Ry^-1)RzRyRx(original vector) 
```

这是一个很好地说明它的[链接。](http://paulbourke.net/geometry/rotate/)您不必将向量和矩阵扩展到 4 维 - 如果您围绕空间中的任意线旋转，而不是源自原点的向量，这仅用于平移目的。

# python - 无法在 python 中发现 nameError

> ID：15598413
> 
> 赞同：-1
> 
> 时间：2013-03-24T12:24:49.740
> 
> 标签：python, python-2.7, nameerror, simpy

这是我的代码：

```
from SimPy.Simulation import *

class Message(Process):
    def arrive(self, destination):
        yield hold, self, 2
        try:
            print "%s %s going to %s" % (now(), self.name, destination.name)
            self.interrupt(destination)
        except NameError, x:
            print "%s is out of reach" % x 
```

我想要做的是打印出目的地在其名称不存在时无法到达，但我仍然遇到通常的python错误：

```
Traceback (most recent call last):
  File "<pyshell#22>", line 1, in <module>
    message.arrive(node2)
NameError: name 'node2' is not defined 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:28:23.853

方法中不会出现您的名称错误。它发生*在*方法被调用之前。

`node2`Python在将 的值传递`node2`给方法之前尝试解析`message.arrive()`。方法代码永远不会执行。

如果你只是`node2`在你的 shell 中输入，你会得到同样的错误，你没有定义它，所以 Python 也不知道如何使用它的值。

# asp.net-mvc - ASP.NET MVC 放置常量的最佳位置（从 TDD 的角度来看）

> ID：15598417
> 
> 赞同：0
> 
> 时间：2013-03-24T12:25:04.863
> 
> 标签：asp.net-mvc, unit-testing, tdd, constants, xunit

创建用户配置文件的控制器正在使用配置文件视图模型，该模型的一部分是默认徽标 (PNG)，如果用户选择不上传自己的，将显示和使用什么。

我创建`public static class Configuration`了保留项目的所有常量。常量之一是将用于默认徽标的文件名和位置。

我将实际文件名保留在 Web.Config 文件中，而不是硬编码常量 原因如下： 1\. 文件名可以更改 2\. 文件位置可以更改 3\. 讨厌硬编码任何东西，当我知道它可能会更改时

第一次测试控制器的尝试在`Web.Config`通过调用访问的常量类上失败了`ConfigurationManager.AppSettings`。这里的人（非常公正地）告诉我这是另一个应该避免的依赖。另一方面，它只是一个外部化的常量，我不喜欢像这样硬编码`File f = new File("..\\Images\\Profile\\DefaultLogo.PNG");`。没有人做这些事情，它应该是可配置的（意思是`Web.Config`- 如果我错了，请纠正我）。

您对处理这种情况有何建议？

**编辑问题** 让我重申这个问题：它不是使用什么格式，而是如何处理让控制器 TDD 可测试并在架构上保持常量的困境。（目前我使用静态类，所以我必须在构造函数中手动传递控制器需要的所有常量，它看起来不是最好的选择）

*   对常量进行硬编码（讨厌这样做）
*   将它从控制器移动到视图模型（我认为这不会解决 TDD 问题）
*   `IConfiguration`在控制器中`IRepository`有另一个接口抽象（
*   一些我没有想到的东西，因此寻求聪明的想法。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:36:48.677

> 在控制器中有另一个接口抽象（IConfiguration）以及 IRepository（对我来说看起来很难看） -**而且它不起作用，因为 Config 类是静态的并且不能实现接口**

大胆的说法并不完全正确。例如：

```
public interface IManageConfigurations
{
    string DefaultFileLocation { get; }
}

public class ConfigurationManagerImpl : IManageConfigurations
{
    public string DefaultFileLocation
    {
        get { return ConfigurationManager.AppSettings["DefaultFileLocation"]; }
    }
}

public class MyController : Controller
{
    private readonly IRepository _repository;
    private readonly IManageConfigurations _config;

    public MyController(IRepository repository, IManageConfigurations config)
    {
        _repository = repository;
        _config = config;
    }
} 
```

我不认为这是一个丑陋的解决方案，但这主要是一种审美观点，这是主观的。在大多数情况下，我不认为一个类会显示过度注入反模式，直到它具有大约 5 个或更多接口依赖项。

此外，这几乎是单元可测试代码中依赖关系解析的标准解决方案。您可以像模拟存储库一样模拟配置界面。以上是我如何使用 web.config 中保存的值解决依赖关系。

`ConfigurationManager.AppSettings["key"]`另一种解决方案是在控制器中对调用进行硬编码。然后，在您的单元测试项目中，您可以在 app.config 文件中设置相同的值。然后，单元测试运行器将在 app.config 中查找值，而 Web 服务器将在 web.config 中查找它们。

```
public class MyController : Controller
{
    public ActionResult Index()
    {
        // the below will get the value from the unit test project's app.config
        // when run as a unit test, but will get the value from web.config in server
        var fileLocation = ConfigurationManager.AppSettings["DefaultFileLocation"];
    }
} 
```

**更新**

如果你真的想将字符串保存在静态类中，并且有可单元测试的代码，你可以这样做：

```
public static class ConfigSettings
{
    public static string DefaultFileLocation
    {
        get { return ConfigurationManager.AppSettings["DefaultFileLocation"]; }
    }
} 
```

然后，您可以在`Controller`. 但是，为了在作为单元测试运行时提供值，如上所述，您必须`appSettings`在单元测试项目的文件中放置一个节点，这与在 Web 项目的文件中放置节点的`app.config`方式非常相似。单元测试运行器将从 app.config 中提取值，而 Web 服务器将从 web.config 中提取值。`appSettings``web.config`

UnitTestProject\app.config

```
<configuration>
    <appSettings>
        <!-- use this value when executed in unit test runner -->
        <add key="DefaultFileLocation"
            value="C:\Users\me\test_files\test_file.png" />
    </appSettings>
</configuration> 
```

MvcProject\web.config（默认）

```
<configuration>
    <appSettings>
        <!-- use this value when executed locally in IIS Express -->
        <add key="DefaultFileLocation"
            value="C:\Users\me\Documents\Visual Studio 20xx\Projects\MyProj\App_Data\default_files\default_logo.png" />
    </appSettings>
</configuration> 
```

MvcProject\web.Release.config（转换）

```
<configuration>
    <appSettings>
        <!-- use this value when executed on live IIS production server -->
        <add key="DefaultFileLocation"
            value="E:\approot\siteroot\App_Data\default_files\default_logo.png"
            xdt:Transform="SetAttributes" xdt:Locator="Match(key)" />
    </appSettings>
</configuration> 
```

如果这不能回答你的问题，也许我还没有完全理解你在追求什么。

**更新**

> 我在您的解决方案中只缺少一件 - 如何在控制器中使用该公共静态类 ConfigSettings？我应该将此静态类作为参数传递给构造函数吗？

不，你不需要做任何特别的事情。只需将它用作一个类，就像使用 static 一样`ConfigurationManager`。

```
public ActionResult MyAction()
{
    var customFilePath = GetCustomFilePath(); // may not be set
    if (string.IsNullOrWhiteSpace(customFilePath)) // fall back to default
        customFilePath = ConfigSettings.DefaultFilePath;
} 
```

因此，您的控制器操作依赖于静态`ConfigSettings`类，但在这种情况下它不是可注入/可交换的依赖项。当单元测试运行器调用此方法，并且 customFilePath 为 null / empty / whitespace 时，它​​将进入 ConfigSettings get 方法，该方法将调用 ConfigurationManager.AppSettings，该方法将在单元测试项目的 app.config/appSettings 中查找值.

# c++ - 如何将关联数组从 Node.js C++ 插件传递到 js 代码？

> ID：15598419
> 
> 赞同：3
> 
> 时间：2013-03-24T12:25:14.460
> 
> 标签：c++, node.js, qt, v8

所以，我想将 C++ 代码中的映射传递给 js 脚本。键是数字，值是包含使用普通 Node.js 技术包装的对象的列表。那是代码：

```
Handle<Value> topologicalSortedGraph( const Arguments &args ) {
    HandleScope scope;
    ...
    QMap<int, QList<Actor *> > topologicalSortedGraph = scriptContext->getTopologicalSortedGraph();
    const int schemeTiersCount = topologicalSortedGraph.size();
    Local<Object> scheme = Object::New( );
    for ( int i = 0; schemeTiersCount > i; ++i ) {
        Local<Object> tier = Object::New( );
        foreach ( Actor *actor, topologicalSortedGraph[i] ) {
            Handle<Value> actorInitData[] = { Int32::New( reinterpret_cast<int>( actor ) ) };
            Handle<Value> wrappedActor = ActorWrap::newInstance( 1, actorInitData );
            tier->Set( String::NewSymbol( actor->getId( ).toLocal8Bit( ).constData( ) ),
                wrappedActor );
        }
        scheme->Set( i, tier );
    }
    return scope.Close( scheme );

} 
```

然后我在脚本中调用以下代码：

```
var addon = require('./Addon');
...
var scheme = addon.topologicalSortedGraph();
for (var number in scheme) {
    for (var actor in scheme[number]) {
        if (actor.isReady()) {
            addon.tick(actor);
            break;
        }
    }
}
... 
```

问题是脚本无法识别“actor”对象，并在调用“actor.isReady()”时打印到控制台“undefined”。顺便说一句，这是“ActorWrap”类的定义：

```
class ActorWrap : public node::ObjectWrap {
public:
    static void                         init( );
    static Handle<Value>                newInstance( int argc, const Handle<Value> *argv );

private:
                                        ActorWrap( const Actor *initActor );
                                        ~ActorWrap( );

    static Handle<Value>                newObject( const Arguments &args );
    static Handle<Value>                id( const Arguments &args );
    static Handle<Value>                label( const Arguments &args );
    static Handle<Value>                isDone( const Arguments &args );
    static Handle<Value>                isReady( const Arguments &args );

    static Persistent<Function>         CONSTRUCTOR;
    static const char *                 CLASS_NAME;

    const Actor *                       actor;
}; 
```

和实施：

```
Persistent<Function> ActorWrap::CONSTRUCTOR;
const char *ActorWrap::CLASS_NAME = "Actor";

ActorWrap::ActorWrap( const Actor *initActor ) : actor( initActor ) {

}

ActorWrap::~ActorWrap( ) {

}

void ActorWrap::init( ) {
    Local<FunctionTemplate> tpl = FunctionTemplate::New( newObject );
    tpl->SetClassName( String::NewSymbol( CLASS_NAME ) );
    tpl->InstanceTemplate()->SetInternalFieldCount( 1 );

    tpl->PrototypeTemplate( )->Set( String::NewSymbol( "id" ),
        FunctionTemplate::New( id )->GetFunction( ) );
    tpl->PrototypeTemplate( )->Set( String::NewSymbol( "label" ),
        FunctionTemplate::New( label )->GetFunction( ) );
    tpl->PrototypeTemplate( )->Set( String::NewSymbol( "isDone" ),
        FunctionTemplate::New( isDone )->GetFunction( ) );
    tpl->PrototypeTemplate( )->Set( String::NewSymbol( "isReady" ),
        FunctionTemplate::New( isReady )->GetFunction( ) );

    CONSTRUCTOR = Persistent<Function>::New( tpl->GetFunction( ) );
}

Handle<Value> ActorWrap::newInstance( int argc, const Handle<Value> *argv ) {
    HandleScope scope;
    Handle<Value> objectInitData[] = { argv[0] };
    Local<Object> instance = CONSTRUCTOR->NewInstance( 1, objectInitData );
    return scope.Close( instance );
}

Handle<Value> ActorWrap::newObject( const Arguments &args ) {
    HandleScope scope;
    const Actor *actor = reinterpret_cast<Actor *>( args[0]->Int32Value( ) );
    Q_ASSERT( NULL != actor );
    ActorWrap *obj = new ActorWrap( actor );
    obj->Wrap( args.This( ) );
    return args.This( );
}

Handle<Value> ActorWrap::id( const Arguments &args ) {
    HandleScope scope;
    ActorWrap* obj = ObjectWrap::Unwrap<ActorWrap>( args.This( ) );
    return scope.Close( String::New( obj->actor->getId( ).toLocal8Bit( ).constData( ) ) );
}

Handle<Value> ActorWrap::label( const Arguments &args ) {
    HandleScope scope;
    ActorWrap* obj = ObjectWrap::Unwrap<ActorWrap>( args.This( ) );
    return scope.Close( String::New( obj->actor->getLabel( ).toLocal8Bit( ).constData() ) );
}

Handle<Value> ActorWrap::isDone( const Arguments &args ) {
    HandleScope scope;
    ActorWrap* obj = ObjectWrap::Unwrap<ActorWrap>( args.This( ) );
    LocalWorkflow::BaseWorker *worker = obj->actor->castPeer<BaseWorker>( );
    Q_ASSERT( NULL != worker );
    return scope.Close( Boolean::New( worker->isDone() ) );
}

Handle<Value> ActorWrap::isReady( const Arguments &args ) {
    HandleScope scope;
    ActorWrap* obj = ObjectWrap::Unwrap<ActorWrap>( args.This( ) );
    LocalWorkflow::BaseWorker *worker = obj->actor->castPeer<BaseWorker>( );
    Q_ASSERT( NULL != worker );
    return scope.Close( Boolean::New( worker->isReady() ) );
} 
```

我怀疑在第一个片段中初始化“层”对象时出现问题。我没有找到任何关于将对象设置为另一个对象的属性的信息，所以当我只调用“obj1->Set(string, obj2);”时可能是我错了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:31:12.353

嗯，这个问题是微不足道的。由于我对 js 很陌生，我在迭代关联数组的代码中出现了错误。正确的变体如下

```
var addon = require('./Addon');
...
var scheme = addon.topologicalSortedGraph();
for (var number in scheme) {
    for (var actor in scheme[number]) {
        if (scheme[number][actor].isReady()) {
            addon.tick(actor);
            break;
        }
    }
}
... 
```

所有 C++ 代码都是正确的，并且包装的对象也是正确的。

# ruby - 如何将 Ruby 升级到 2.0

> ID：15598422
> 
> 赞同：13
> 
> 时间：2013-03-24T12:25:26.900
> 
> 标签：ruby, rubygems, ruby-upgrade

我的红宝石版本是

```
ruby 1.9.3p374 (2013-01-15) [i386-mingw32] 
```

我在安装了 mingw 的 Windows 8 下运行。

如何将其升级到 ruby​​ 2.0 ？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-24T12:35:14.217

[Pik](https://github.com/vertiginous/pik)让您可以在 Windows 机器上使用和管理多个版本和风格的 ruby​​。我之所以选择这种方式，是因为我不确定我需要的所有东西都可以在第一次尝试新版本时使用，因此我也想保留以前的版本。

安装也很简单：如果您还没有 jet *Pik ，* [请参阅主题：“使用 ruby​​gems 安装 pik”](https://github.com/vertiginous/pik) 然后“pik install ruby​​ 2.0.0”

例如：

## 前

```
C:\Sites>pik list
  160: jruby 1.6.0 (ruby 1.8.7 patchlevel 330) (2011-03-15 f3b6154) (Java H...
  165: jruby 1.6.5.1 (ruby-1.9.2-p312) (2012-01-25 fffffff) (Java HotSpot(T...
  167: jruby 1.6.7 (ruby-1.8.7-p357) (2012-02-22 3e82bc8) (Java HotSpot(TM)...
  187: ruby 1.8.7 (2011-02-18 patchlevel 334) [i386-mingw32]
  192: ruby 1.9.2p0 (2010-08-18) [i386-mingw32]
* 193: ruby 1.9.3p125 (2012-02-16) [i386-mingw32] 
```

## 安装

```
C:\Sites>pik install ruby 2.0.0
** Downloading:  http://rubyforge.org/frs/download.php/76807/ruby-2.0.0-p0-i386-
mingw32.7z
... 
```

## 安装后

```
C:\Sites>pik list
  160: jruby 1.6.0 (ruby 1.8.7 patchlevel 330) (2011-03-15 f3b6154) (Java H...
  165: jruby 1.6.5.1 (ruby-1.9.2-p312) (2012-01-25 fffffff) (Java HotSpot(T...
  167: jruby 1.6.7 (ruby-1.8.7-p357) (2012-02-22 3e82bc8) (Java HotSpot(TM)...
  187: ruby 1.8.7 (2011-02-18 patchlevel 334) [i386-mingw32]
  192: ruby 1.9.2p0 (2010-08-18) [i386-mingw32]
* 193: ruby 1.9.3p125 (2012-02-16) [i386-mingw32]
  200: ruby 2.0.0p0 (2013-02-24) [i386-mingw32] 
```

# 现在我们可以使用版本 2.0.0

```
C:\Sites>pik use 200

C:\Sites>ruby --version
ruby 2.0.0p0 (2013-02-24) [i386-mingw32] 
```

# 想知道 Ruby 文件夹到底在哪里

```
 C:\>echo %HOME%
 C:\Users\rondinif

 C:\>where ruby 
 C:\Users\rondinif\.pik\rubies\Ruby-200-p0\bin\ruby.exe

 C:\>pik use 193
 C:\>where ruby 
 C:\RailsInstaller\Ruby1.9.3\bin\ruby.exe

 C:\>pik use 167
 C:\>where ruby 
     INFO: Could not find files for the given pattern(s).
 C:\>where jruby
 C:\Users\rondinif\.pik\rubies\JRuby-167\bin\jruby 
```

等等...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T12:33:41.947

只需从官方[ruby​​installer](http://rubyinstaller.org/)站点安装 ruby​​ 2.0 版。

没有什么比得上“升级”了。您实际上可以在您的 PC 上同时运行这两个版本（许多人也喜欢这样）。另请参阅此问题：[如何在 Windows 上拥有多个版本的 Ruby AND Rails 及其组合？](https://stackoverflow.com/questions/3648744/how-to-have-multiple-versions-of-ruby-and-rails-and-their-combinations-on-windo)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T12:28:36.630

好吧，您可以尝试从源代码构建它，就像您安装 1.9.3 的方式一样。就我个人而言，我建议使用[RubyInstaller 之](http://rubyinstaller.org/)类的东西，或者最好还是在 Linux VM 中进行 Ruby 开发。

# excel - excel行以逗号分隔

> ID：15598423
> 
> 赞同：-1
> 
> 时间：2013-03-24T12:25:27.840
> 
> 标签：excel, xls, xlsx, vba

我有一个具有以下值的 xls 文件：

```
ID Value
1 value1
1 value2
1 value3
2 value1
2 value2
3 value1
3 value2 
```

ETC

我想将其转换为（创建新工作表）

```
ID Values
1 value1,value2,value3
2 value1,value2
3 value1,value2,value3 
```

基本上，我希望所有具有相同 ID 的行都加入逗号分隔的所有值。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:20:33.427

试试下面的代码：

```
Sub sample()
    Dim i As Integer, j As Integer
    Dim temp As String
    Range("A:A").AdvancedFilter Action:=xlFilterCopy, copytorange:=Range("C1"), unique:=True

    Dim lastRow As Long
    lastRow = Range("C65000").End(xlUp).Row

    j = 1
     For i = 2 To lastRow
        Do Until Cells(j, 2) = ""
            If Trim(Cells(j, 1)) = Trim(Cells(i, 3)) Then
                temp = temp & "," & Cells(j, 2)
            End If
            j = j + 1
        Loop
        Cells(i, 4) = temp
        temp = ""
        j = 1
    Next
End Sub 
```

![在此处输入图像描述](../Images/24b9aecf2ebc2e9a183fcfa299c2ef1b.png)

![在此处输入图像描述](../Images/60f838cc53c3419a1a4a6a000549e877.png)

# c++ - 多个模板结束标记

> ID：15598428
> 
> 赞同：-5
> 
> 时间：2013-03-24T12:25:49.337
> 
> 标签：c++, ogre3d

```
Ogre::any_cast<std::map<Rail>::iterator> 
```

它需要`Ogre::any_cast<std::map<Rail>`并且说的参数太少等。我该如何解决它（除了明显的 typedef 别名）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:29:15.337

问题是它`std::map`至少需要两个模板参数——键类型和值类型。目前你有`std::map<Rail>`. 你映射`Rail`到什么？例如，如果您的迭代器适用于从to`std::map`映射的 a （假设不是推导类型），这将是可以的：`Rail``int``Rail`

```
Ogre::any_cast<std::map<Rail,int>::iterator>(some_any_object) 
```

# mongodb-hadoop - MongoDB-Hadoop 适配器

> ID：15598430
> 
> 赞同：0
> 
> 时间：2013-03-24T12:26:06.697
> 
> 标签：mongodb-hadoop

为了开始使用 mongodb-hadoop 适配器，我指的是[手册](http://docs.mongodb.org/ecosystem/tutorial/getting-started-with-hadoop/)

我系统上当前运行的 hadoop 版本是 0.20.2。

所以我将`build.sbt`文件编辑为

ThisBuild 中的 hadoopRelease := "0.20.2"。

但是当我尝试“sbt package”的下一个命令时，我收到以下错误。

```
[error] Hadoop Release '%s' is an invalid/unsupported release.  Valid entries are in 0.20.2
[error] Use 'last' for the full log. 
```

完整的日志是

```
[info] Loading project definition from E:\softwares\mine\mongo-hadoop\project
[debug] Running task... Cancelable: false, check cycles: false
[debug]
[debug] Initial source changes:
[debug]         removed:Set()
[debug]         added: Set()
[debug]         modified: Set()
[debug] Removed products: Set()
[debug] Modified external sources: Set()
[debug] Modified binary dependencies: Set()
[debug] Initial directly invalidated sources: Set()
[debug]
[debug] Sources indirectly invalidated by:
[debug]         product: Set()
[debug]         binary dep: Set()
[debug]         external source: Set()
[debug] Initially invalidated: Set()
[debug] Copy resource mappings:
[debug]

    java.lang.RuntimeException: Hadoop Release '%s' is an invalid/unsupported release.  Valid entries are in 0.20.2
            at scala.sys.package$.error(package.scala:27)
            at MongoHadoopBuild$$anonfun$streamingSettings$6$$anonfun$apply$8.apply(MongoHadoopBuild.scala:152)
            at MongoHadoopBuild$$anonfun$streamingSettings$6$$anonfun$apply$8.apply(MongoHadoopBuild.scala:152)
            at scala.collection.MapLike$class.getOrElse(MapLike.scala:122)
            at scala.collection.immutable.HashMap.getOrElse(HashMap.scala:38)
            at MongoHadoopBuild$$anonfun$streamingSettings$6.apply(MongoHadoopBuild.scala:152)
            at MongoHadoopBuild$$anonfun$streamingSettings$6.apply(MongoHadoopBuild.scala:151)
            at scala.Function1$$anonfun$compose$1.apply(Function1.scala:49)
            at scala.Function1$$anonfun$compose$1.apply(Function1.scala:49)
            at sbt.EvaluateSettings$$anonfun$sbt$EvaluateSettings$$single$1.apply(INode.scala:159)
            at sbt.EvaluateSettings$$anonfun$sbt$EvaluateSettings$$single$1.apply(INode.scala:159)
            at sbt.EvaluateSettings$MixedNode.evaluate0(INode.scala:177)
            at sbt.EvaluateSettings$INode.evaluate(INode.scala:132)
            at sbt.EvaluateSettings$$anonfun$sbt$EvaluateSettings$$submitEvaluate$1.apply$mcV$sp(INode.scala:64)
            at sbt.EvaluateSettings.sbt$EvaluateSettings$$run0(INode.scala:73)
            at sbt.EvaluateSettings$$anon$3.run(INode.scala:69)
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:722)
    [error] Hadoop Release '%s' is an invalid/unsupported release.  Valid entries are in 0.20.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:03:55.507

尝试更换

ThisBuild 中的 hadoopRelease := "0.20.2"。

和

ThisBuild 中的 hadoopRelease := "0.20"。

对我来说，当我制作 1.0.4 到 1.0 时，它起作用了。虽然我不得不承认我没有检查重新安装的罐子是否有效。

编辑：罐子没用。抱怨一些缺课。

# java - 在 Phonegap 中的页面更改上运行 Java 函数

> ID：15598432
> 
> 赞同：0
> 
> 时间：2013-03-24T12:26:16.190
> 
> 标签：java, javascript, android, cordova

我有一个`Android Phonegap`应用程序，它需要一个网站并注入一些新的库和样式表（zeptojs angularjs 等）

在我的具体情况下，我不能简单地将代码重写到`JavaScript`页面上（因为我不是负责页面脚本的人），而是我想使用该`Java`函数，并从一个对象`sendJavascript()`运行它。`Java timer`

但无论我怎么称呼`sendJavascript`它，它似乎从来没有做任何事情。

例如：

`myActivity.this.sendJavascript("javascript: alert(1)");`

但`alert(1)`从未真正开火

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:39:04.047

1.  要从 javascript 调用 java 函数，您必须编写一个电话间隙[插件](http://docs.phonegap.com/en/2.5.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)。然后在更改页面处理程序中，您从插件调用 javascript 函数。

2.  您能否提供有关警报的全部内容的更多详细信息？它与您之前要调用的 java 函数有关，还是您想从本机端通知的东西？

# ios - 推送通知后运行函数

> ID：15598433
> 
> 赞同：3
> 
> 时间：2013-03-24T12:26:20.247
> 
> 标签：ios, ipad, push-notification, apple-push-notifications, helpshift

我正在为 iPad 开发 iOS 应用程序。我将推送通知与名为 HelpShift 的服务一起使用。当用户点击通知时，我想运行一段代码。当应用程序处于活动状态时，它实际上可以工作，但是当它处于后台或非活动状态时，它就不起作用了。这是我的代码：

```
- (void) application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

if ([[userInfo objectForKey:@"origin"] isEqualToString:@"helpshift"]) {

    UIApplicationState state = [application applicationState];

    if (state == UIApplicationStateActive) {           

        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"You were answered in HelpShift"
                                                            message:@"Hello"
                                                           delegate:self
                                                  cancelButtonTitle:@"Cancel"
                                                  otherButtonTitles:@"Show", nil];
        [alertView show];

    } if (state== UIApplicationStateBackground) {

        UIViewController *vc = self.window.rootViewController;
        [[Helpshift sharedInstance] handleNotification:userInfo withController:vc];            

         [self showHelpShift];

    } if (state == UIApplicationStateInactive) {

        UIViewController *viewController =
        [[UIStoryboard storyboardWithName:@"MainStoryboard"
                                   bundle:NULL] instantiateViewControllerWithIdentifier:@"home"];

        [[Helpshift sharedInstance] handleNotification:userInfo withController:viewController];

    }        
   }
 }

 - (void) showHelpShift {
     UIViewController *vc = self.window.rootViewController;
     [[Helpshift sharedInstance] showSupport:vc];
  }

- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{

  if (buttonIndex == 1){
    UIViewController *vc = self.window.rootViewController;
    [[Helpshift sharedInstance] showSupport:vc];}
 } 
```

如您所见，问题在于 [self showHelpShift] 没有被调用或被提前调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:29:59.513

实现`application:didFinishLaunchingWithOptions:`并在字典中查找`UIApplicationLaunchOptionsRemoteNotificationKey`键。`launchOptions`

# c# - 如何在 Javascript 中使用模型？

> ID：15598438
> 
> 赞同：0
> 
> 时间：2013-03-24T12:27:00.300
> 
> 标签：c#, javascript, asp.net-mvc, razor

例子 ：

```
<script type="text/javascript">
        function abc() {
            var t = document.getElementById("name").value;
            @foreach(Player pl in Model){
            if (t == pl.Name) {
                alert("This name is already use!");
            }                
        }
    </script> 
```

错误：t - 无法解析符号 如何在 C# 代码中使用 JavaScript 变量？在这个例子中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:36:09.377

您不能在 C# 代码中使用 JS 变量，但可以在代码中使用 C# 变量。在大多数情况下，C# 用于呈现 HTML 或 JS。

在您的情况下，最好将 C# 服务器端模型呈现为 JS 数组，稍后您可以对其进行迭代。

1.  执行一个操作，[将您的列表（假设它是一个列表）作为 JSON 返回](https://stackoverflow.com/questions/5300820/how-do-i-return-json-from-action-method-with-array-property)

2.  [使用 AJAX 获取数据 get call to your action。](http://api.jquery.com/jQuery.get/)

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:43:51.653

你可以做这样的事情。

```
<script type="text/javascript">
    function abc(players) {
        var t = document.getElementById("name").value;
        for(p in players) {
        if (t == p.Name) {
            alert("This name is already use!");
        }                
    }

    abc(@Html.Raw(Json.Encode( Model )));
</script> 
```

# c# - 是否可以从托管 C++/CLI 项目中正常运行非托管 C++？

> ID：15598445
> 
> 赞同：5
> 
> 时间：2013-03-24T12:28:07.847
> 
> 标签：c#, c++, .net, visual-c++, c++-cli

我正在用 C++/CLI 包装一个纯非托管 VC++ 9 项目，以便从 .NET 应用程序中简单地使用它。我知道如何编写[wrappers](https://stackoverflow.com/questions/15505992/can-you-use-c-libraries-natively-in-a-c-cli-winforms-application?rq=1)，并且[可以从 .NET 执行](https://stackoverflow.com/questions/15487831/how-to-use-a-c-project-from-within-a-net-application)非托管代码，但我无法完全理解：

1.  非托管库是一个非常复杂的 C++ 库，并且使用了很多内联和其他功能，因此我无法将其编译到 -`/clr`标记的托管 DLL 中。我需要使用普通的 VC++ 编译器将它编译成一个单独的 DLL。

2.  如何从此非托管代码中导出符号，以便在 C++/CLI 项目中使用它？我是否将我需要的每个课程都标记为可见`extern`？是这么简单还是有一些更复杂的？

3.  如何从 C++/CLI 项目访问导出的符号？我是否只包含非托管*源代码*的头文件， C++ 链接器是否会从非托管 DLL 中获取实际代码？还是我必须在指向 DLL 中的类的新头文件中手动编写一组单独的“extern”类？

4.  当我的 C++/CLI 项目创建非托管类时，非托管代码会在正常的 VC9 运行时中完美运行，还是会被迫在 .NET 中运行？导致更多兼容性问题？

5.  C++ 项目创建了许多实例，并有自己的自定义实现的垃圾收集器，全部用纯 C++ 编写，它是一个 DirectX 声音渲染器并管理许多 DirectX 对象。这一切会正常工作还是会以任何方式影响此类 Win32 功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T12:49:10.747

您可以从一个普通的本机 C++ 项目开始（例如，从十多年前的 Visual Studio 6.0 导入），当您今天构建它时，它将链接到当前版本的 VC 运行时。

然后，您可以向其中添加一个新`foo.cpp`文件，但要配置该文件，使其启用 /CLR 标志。这将导致编译器从该文件生成 IL，并链接一些额外的支持，导致 .NET 框架在启动时加载到进程中，因此它可以 JIT 编译然后执行 IL。

应用程序的其余部分仍然像以前一样在本地编译，完全不受影响。

事实是，即使是“纯”CLR 应用程序也确实是混合的，因为 CLR 本身（显然）是本机代码。混合 C++/CLI 应用程序通过允许您添加更多与某些 CLR 托管代码共享进程的本机代码来扩展这一点。它们在过程的整个生命周期内共存。

如果您`foo.h`使用声明制作标题：

```
void bar(int a, int b); 
```

您可以在本机代码或`foo.cpp`CLR 代码中自由实现或调用它。编译器/链接器组合负责一切。不需要做*任何*特殊的事情来从 CLR 代码中调用本机代码。

您可能会收到有关不兼容开关的编译错误：

*   `/ZI`-*用于编辑和继续的程序数据库*，将其更改为仅*程序数据库*
*   `/Gm`- 你需要禁用*最小重建*
*   `/EHsc`- C++ 异常，*使用 SEH Exceptions (/EHa) 将其更改为 Yes*
*   `/RTC`- 运行时检查，将其更改为*默认值*
*   预编译头文件 - 将其更改为*不使用预编译头文件*
*   `/GR-`- 运行时类型信息 - 将其更改为*On (/GR)*

所有这些更改只需要在您启用 /CLR 的特定文件上进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:41:50.033

正如 Daniel 所说，您可以在文件级别微调您的设置。您也可以在文件中使用“#pragma managed”，但我不会无缘无故地这样做。

请记住，您可以创建一个完整的混合模式程序集。这意味着，您可以将您的本机代码原封不动地编译到该文件中，外加一些围绕该代码的 C++/CLI 包装器。最后，您将拥有与本机 Dll 相同的文件，其中包含所有导出的本机符号和成熟的 .NET 程序集（公开 C++/CLI 对象）！

这也意味着，只要考虑文件外的本机客户端代码，您只需关心导出。混合 dll/程序集内的 C++/CLI 代码可以使用通常的访问规则访问本机数据结构（只需包含标头即可）

因为您提到了它，所以我为一些重要的本机 C++ 类层次结构执行了此操作，包括相当数量的 DirectX 代码。所以，这里没有主要问题。

我建议不要在 .NET 驱动的环境中使用 pInvoke。没错，它有效。但是对于任何重要的事情（比如超过 10 个函数），使用 C++/CLI 提供的 OO 方法肯定会更好。您的 C# 客户端开发人员将不胜感激。在 C++/CLI 中，您拥有所有 .NET 的东西，例如委托/属性、托管线程等等。从 VS 2012 开始，也有一些可用的 Intellisense。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T12:31:39.440

您可以使用 PInvoke 从非托管 DLL 调用导出的函数。这就是从 .Net 访问非托管 Windows API 的方式。但是，如果您的导出函数使用 C++ 对象，而不仅仅是普通的 C 数据结构，您可能会遇到问题。

似乎还有对您有用的 C++ 互操作技术：http: [//msdn.microsoft.com/en-us/library/2x8kf7zx (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/2x8kf7zx(v=vs.80).aspx)

# android - 单击按钮时保存到表格中

> ID：15598446
> 
> 赞同：0
> 
> 时间：2013-03-24T12:28:12.320
> 
> 标签：android

我有一个 onclick 事件，例如：

```
@Override
public void onClick(View createView) {
    switch (createView.getId()) {
    case R.id.save_button:              
        break;
    }
} 
```

单击按钮时，我希望能够调用：

```
public void addAppointment(String string) {
  // Insert a new record into the Events data source.
  // You would do something similar for delete and update.
  ContentValues values = new ContentValues();
  values.put(TITLE, string);
  values.put(TIME, string);
  getContentResolver().insert(CONTENT_URI, values);
} 
```

从另一个班级，我是否必须导入某些部分或使其成为静态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:31:24.660

> 我是否必须导入某些部分或使其成为静态？

不，我建议您创建第二个类的新实例（在 onCreate() 方法中）并调用它的方法。

```
@Override
public void onClick(View createView) {
    switch (createView.getId()) {
    case R.id.save_button: 
        sc.addAppointment("someValue");
        break;
    }
} 
```

# python - peewee：对象没有属性 _meta

> ID：15598447
> 
> 赞同：3
> 
> 时间：2013-03-24T12:28:14.177
> 
> 标签：python, python-3.x, attributeerror, peewee

我正在使用 Python 3.3 32 位在 Windows 上工作。我已经安装了 peewee 并想尝试它的一些功能。我从 Peewee 快速入门 ( [http://peewee.readthedocs.org/en/latest/peewee/quickstart.html](http://peewee.readthedocs.org/en/latest/peewee/quickstart.html) ) 开始。

我的代码如下所示：

```
from peewee import *

db = SqliteDatabase('people.db')

class Person(Model):
    name = CharField()
    birthday = DateField()
    is_relative = BooleanField()

    class Meta:
            database = db

class Pet(Model):
    owner = ForeignKeyField(Person, related_name = "pets")
    name = CharField()
    animal_type = CharField()

    class Meta:
            database = db

Person.create_table()
Pet.create_table() 
```

我得到一个错误：

```
File "<stdin>", line 1, in <module>
File "<string>", line 21, in <module>
File "C:\Python33\lib\site-packages\peewee.py", line 2094, in create_table
db = cls._meta.database
AttributeError: type object 'Person' has no attribute '_meta' 
```

我的 peewee 安装有问题吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T12:33:41.997

Peewee*不*兼容 Python 3；它目前仅适用于 Python 2。

您看到的错误是由此造成的；该类`Model`使用 Python 2 技术定义了一个元类，该技术已针对 Python 3 进行了更改。

**更新**：2013-04-02 发布的[2.1 版增加了 Python 3 兼容性。](https://pypi.python.org/pypi/peewee/2.1.0)该软件包现在支持 Python 2.6、2.7 和 3.2 及更高版本。

# javascript - 如何在灯箱中显示二进制图像数据

> ID：15598450
> 
> 赞同：0
> 
> 时间：2013-03-24T12:28:34.727
> 
> 标签：javascript, jquery, image, lightbox, lightbox2

我正在使用 Lightbox 2 插件来显示灯箱图像（[http://lokeshdhakar.com/projects/lightbox2/](http://lokeshdhakar.com/projects/lightbox2/)）。它工作正常，但现在我的图像都存储为字节数组。如何更改此插件（或使用其他插件）以显示二进制图像数据而不是图像路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T00:11:07.047

我通过在处理图像的 ASP.NET MVC 应用程序中创建自定义 Image.ashx 处理程序来修复它。

# php - SQL 注入难题

> ID：15598452
> 
> 赞同：-2
> 
> 时间：2013-03-24T12:28:59.470
> 
> 标签：php, mysql, sql-injection

正如我们所知，通常的站点使用类似的函数，`mysqli_query()`并且 mysql 的 PHP 驱动程序不允许在`single`->query() 调用中进行多个查询（但您可以在***phpmyadmin*** SQL 运行部分中执行多个查询），因此我们不能直接添加`DELETE/UPDATE/INSERT`但滥用修改的可能性某些情况下的数据。第一件事是，在这种情况下，我认为 80% 的潜在风险（可能丢失数据）已经消失！&第二个是，依靠这些知识，为什么大多数注入教程都基于并专注于**多个**查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:34:27.197

> 80% 的潜在风险（可能丢失数据）已经消失！

这个假设是错误的。

> 为什么大多数注入教程都基于多个查询？

因为它只是一个简单易懂的例子，一个***概念*****证明***。就像一个“如果约翰有 2 个苹果，迈克有 5 个……”。如果真正的迈克不想放过他的苹果，那并不意味着算术全错了。*

 *> SQL 注入难题

注射没有难题。
对注射进行沉思是没有意义的。
没有要计算的风险百分比，而只是一个二分法：您的应用程序是否受到损害。
只有一个简单的规则 - 始终正确格式化您的数据，您将永远忘记注入。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T13:15:37.257

很长一段时间以来，PHP 都不允许为单个 query() 语句运行多个查询。这只是防止 sql 注入的一部分。您还必须转义您的输入，使用准备好的语句，使您的表名和列难以猜测等等。

最简单的 sql 注入攻击示例确实涉及被欺骗执行多个查询的查询，但显然 php 通过前面提到的限制阻止了许多此类攻击。然而，像子查询这样的事情仍然是可能的，所以它不是万无一失的。我不认为完全不可能使 sql 注入成为可能，因为人们一直在寻找新的方法来欺骗脚本。

您能做的最好的事情就是了解此类攻击是如何进行的，并根据当前公认的最佳实践编写代码以防止此类攻击。如果您已经完成了所有这些并且仍然被黑客入侵，那么可能（但不确定）不是您的 sql 是您安全性中最薄弱的环节。据我了解，黑客更经常使用社会工程技术取得成功。

制作一个不可破解的系统几乎是不可能的，因此您能做的最好的事情就是使其难以破解，因此，不要成为“唾手可得的果实”，或者换句话说，不要成为一个容易的目标。*

# dvcs - 如何找到集市工作副本的修订版？（如 hg 父母）

> ID：15598455
> 
> 赞同：1
> 
> 时间：2013-03-24T12:29:17.103
> 
> 标签：dvcs, bazaar

如果您在集市中有未更新的工作树，由

```
bzr st
working tree is out of date, run 'bzr update' 
```

你如何找到工作副本的修订号？（或应用的最新提交）

使用 Mercurial，您可以使用`hg parents`，我正在寻找它的集市对应物或任何解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:35:35.957

明白了，`bzr version-info`是

它的好处是您还可以通过`--custom --template='your settings'`参数格式化它的输出。

**更新：**

更简单地说，您也可以使用`bzr revno --tree`。

# django - 使用 DecimalField 以正确的精度显示

> ID：15598460
> 
> 赞同：0
> 
> 时间：2013-03-24T12:29:36.307
> 
> 标签：django, django-models

在我的数据库中，我有一个用于存储学分的字段。积分是 的倍数`0.5`，例如一个人可以有 1、1.5、10 或 100 等

我是否为此在数据库中选择了正确的字段？...

```
 models.DecimalField(max_digits=10, decimal_places=5,
                                      null=True, blank=True) 
```

同样在显示余额时，我执行以下操作....

```
 def _balance(self):
        aggregates = self.transactions.aggregate(sum=Sum('amount'))
        sum = aggregates['sum']
        return D('0') if sum is None else sum 
```

例如，这给了我 10.00000 这不是我想要的。我想要 10 或者如果它有一半 10.5 等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:33:41.147

更改字段的小数位

```
 models.DecimalField(max_digits=10, decimal_places=1,
                                  null=True, blank=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T00:38:20.550

Django 的 DecimalField 将值填充为固定长度的小数。例如，如果您设置 decimal_places=1，您将始终得到小数点后一位数，即使它为零。

我为自己解决此问题的方法是覆盖 models.DecimalField 中的行为，以创建自己的字段 VariableDecimalField，如下所示：

```
class VariableDecimalField(models.DecimalField):

  def get_db_prep_save(self, value, connection):
    s = str(value)
    return self.to_python(s.rstrip('0').rstrip('.') if '.' in s else s) 
```

这将去掉任何微不足道的尾随零，如果没有小数点，也会去掉小数点。在它存储在数据库中之前。但是，如果您希望保留尾随零，如果用户以这种方式输入，只需执行此操作。

```
class VariableDecimalField(models.DecimalField):

  def get_db_prep_save(self, value, connection):
    return self.to_python(value) 
```

然后只需使用 VariableDecimalField 而不是 DecimalField。

# git - 我应该担心`git fsck`警告：“包含零填充文件模式”

> ID：15598465
> 
> 赞同：8
> 
> 时间：2013-03-24T12:30:00.230
> 
> 标签：git, corruption

在我的仓库上运行`git fsck`，我得到这个输出：

```
$ git fsck
Checking object directories: 100% (256/256), done.
warning in tree bde551ba2d6882ac7614c25305c24ddc1c75b1c4: contains zero-padded file modes
warning in tree 7cac28aefa67ff63e5ca163de382a3e08b8a7ba5: contains zero-padded file modes
warning in tree c24803abe783decd96c1dbf05d3ac45dbf3ff372: contains zero-padded file modes
warning in tree 51393697adb908ddb5fac540a86ea5a331fc1da5: contains zero-padded file modes
Checking objects: 100% (40275/40275), done. 
```

我应该担心这些警告吗？他们会损坏我的回购吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T22:48:33.763

它不会彻底*破坏**repo*，但它是可疑的。零填充文件模式的测试早在 2005 年就开始了：

```
commit 64071805eda2b57d2b77943bb3f9865d90562ecf
Author: Linus Torvalds <torvalds@g5.osdl.org>
Date:   Wed Jul 27 16:08:43 2005 -0700

    git-fsck-cache: be stricter about "tree" objects

    In particular, warn about things like zero-padding of the mode bits,
    which is a big no-no, since it makes otherwise identical trees have
    different representations (and thus different SHA1 numbers).

    Also make the warnings more regular.

    Signed-off-by: Linus Torvalds <torvalds@osdl.org> 
```

不同的 SHA1 值将使 git 相信“树 A”与“树 B”不同，即使它们在所有重要方面都相同（相同的文件和模式，除了前导零），这将使回购略大于必要。此外，两个实际上相同的提交（例如，通过重放补丁创建）看起来是不同的。我不知道结果*会*出现什么问题，但它可能会混淆各种操作（他们“期望”找到差异，但随后找不到任何差异）并且随着时间的推移它可能会使存储库膨胀。

两个有趣的附加问题：（1）你如何解决这个问题？我怀疑使用`git filter-branch`可以修复它（通过重播提交以获得“正确”树对象），但您必须弄清楚哪些分支包含包含这些树的提交，并且还必须清除“坏”提交指坏树对象。（当然，这会给任何克隆 repo 的人带来各种痛苦。）（2）这首先是如何产生的？

看看`git cat-file`这些树的打印内容会很有趣，尽管`git cat-file -p`添加了前导零，所以这有点痛苦。（`git cat-file tree bde551ba2d6882ac7614c25305c24ddc1c75b1c4`转储原始内容，但它们充满了二进制位。仍然可以查看，只需要使用处理二进制内容的东西。）

# c# - 按名称查找列表 C#

> ID：15598467
> 
> 赞同：-6
> 
> 时间：2013-03-24T12:30:02.547
> 
> 标签：c#, list

我有一系列列表，我想创建一个方法，该方法将按名称查找列表并返回列表。列表存储在类本身中。

```
 public void AddCord(string cord, string listName)
    {
        List<String> myShip;
        myShip = findListByName(listName);
        myShip.Add(cord);
    } 
```

请保持代码使用最简单的方法..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:33:45.120

尝试这个：

```
//Create global dictionary of lists
Dictionary<string, List<string> dictionaryOfLists = new Dictionary<string, List<string>();

//Get and create lists from a single method
public List<string> FindListByName(string stringListName)
{
    //If the list we want does not exist yet we can create a blank one
    if (!dictionaryOfLists.ContainsKey(stringListName))
        dictionaryOfLists.Add(stringListName, new List<string>());

    //Return the requested list
    return dictionaryOfLists[stringListName];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:32:19.183

```
Dictionary<string, List<string>> myRecords=new Dictionary<string, List<string>>();

if(!myRecords.ContainsKey("abc"))
{
    List<string> abcList=new List<string>();
    myRecords.Add("abc", abcList);
}
else 
    myRecords.["abc"].Add("a"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-24T13:12:19.247

这是我的答案，在我看来更有趣的一种解决方案：D

```
class MyList<T> : List<T>
{
    static List<object> superlist;

    public string name;

    ~MyList() {
        if (superlist != null)
        superlist.Remove(this);
    }

    public MyList(string name)
        : base() {
        init(name);
    }

    public MyList(string name, int cap)
        : base(cap) {
        init(name);
    }

    public MyList(string name, IEnumerable<T> IE)
        : base(IE) {
        init(name);
    }

    void init(string name) {
        if (superlist == null)
            superlist = new List<object>();

        this.name = name;
        superlist.Add(this);
    }

    public static void AddToListByName(T add, string listName) {
        for (int i = 0; i < superlist.Count; i++) {
            if (superlist[i].GetType().GenericTypeArguments[0] == add.GetType() && ((MyList<T>)(superlist[i])).name == listName) {
                ((MyList<T>)(superlist[i])).Add(add);
                return;
            }
        }
        throw new Exception("could not find the list");
    }

} 
```

现在您可以在代码中轻松干净地使用它

```
 MyList<string> a = new MyList<string>("a");
        MyList<string> b = new MyList<string>("b");

        a.Add("normal add to list a");

        MyList<string>.AddToListByName("hello add to a", "a");
        MyList<string>.AddToListByName("hello add to b", "b"); 
```

# vb.net - 处置托管对象

> ID：15598473
> 
> 赞同：-1
> 
> 时间：2013-03-24T12:30:28.143
> 
> 标签：vb.net

请看下面的代码：

```
Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        Dim objCommand As SqlCommand
        Dim objCon As SqlConnection
        Dim p1 As Person
        Try
            p1 = New Person
            p1.DoSomething()
            objCommand = New SqlCommand
            Using objCommand
                Dim strConString As String = "Data Source=IANSCOMPUTER;Initial Catalog=Test;Integrated Security=True"
                objCon = New SqlConnection
                Using objCon
                    objCon.ConnectionString = strConString
                    objCon.Open()
                    objCommand.Connection = objCon
                    objCommand.CommandText = "select startdate from person "
                    Dim objDR As SqlDataReader = objCommand.ExecuteReader
                    If objDR.HasRows Then
                        objDR.Read()
                        Using objCon
                            Dim startdate As String = objDR("startdate")
                        End Using
                    End If
                End Using
            End Using
        Catch ex As Exception

            Throw
        Finally
            If objCon.State = ConnectionState.Open Then
                objCon.Close()
            End If
            objCon = Nothing
            objCommand = Nothing
            p1=Nothing 'This line is still needed
        End Try
    End Sub 
```

我知道 finally 子句中的代码毫无意义，因为连接和命令都包含在 Using 语句中。

但是，如果您有自己的自定义类（如 Person）不使用非托管资源，会发生什么情况？在这个实例中肯定需要 FINALLY 子句来确保对对象（在堆上）的引用设置为空，无论是否抛出异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:45:54.193

当从方法中引用对象时，无需将变量设置为 Nothing，因为一旦方法调用结束，对象将“无根”并且可用于垃圾回收。当方法调用结束时，堆栈上的所有局部变量都将消失，它们所引用的对象将没有对它们的根引用，从而使它们可用于垃圾回收。通常，您不需要`Nothing`在 .NET 中“清空”（通过在 vb.net 中设置它们）变量，因为它不依赖引用计数来管理堆上的对象。

查看[这篇文章](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)，了解如何在 .NET 中分配和释放内存。

# c# - 使用 c# 从远程 pc 查找空闲时间

> ID：15598478
> 
> 赞同：0
> 
> 时间：2013-03-24T12:30:55.753
> 
> 标签：c#

我需要使用 c# 应用程序从服务器 pc 中找出远程 pc 的空闲时间。我有一个在局域网中连接的 IP 地址和主机名列表。我想找出 LAN 中连接的每台计算机的空闲时间超过 30 分钟。我为本地电脑完成了它，但它不适用于远程电脑。这是我的本地电脑代码。

```
[DllImport("user32.dll")]
private static extern bool GetLastInputInfo(ref LASTINPUTINFO plii);

 private int GetIdleTime()
{
    LASTINPUTINFO lastone = new LASTINPUTINFO();
    lastone.cbSize = (uint)Marshal.SizeOf(lastone);
    lastone.dwTime = 0;

    int idleTime = 0;

    int tickCount = Environment.TickCount;
    if (GetLastInputInfo(ref lastone))
    {
        idleTime = tickCount - (int)lastone.dwTime;
        return idleTime;
    }
    else
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:53:58.403

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646302%28v=vs.85%29.aspx)，这对于本地机器来说是不可能的，更不用说远程机器了。

> 此功能对于输入空闲检测很有用。但是，GetLastInputInfo 不提供跨所有正在运行的会话的系统范围的用户输入信息。相反，GetLastInputInfo 仅为调用该函数的会话提供特定于会话的用户输入信息。

但是，您可以尝试以下方法之一：

*   在每台 PC 上都有一个可以查询的进程。
*   在每台 PC 上都有一个进程向您的中央进程报告。
*   监控远程 PC 进程以确定屏幕保护程序是否处于活动状态。

如果您没有停用终端服务，并且客户端是 xp 或更高版本，您也可以使用

> ITerminalServicesSession.LastInputTime

为此，您可以使用 Cassia 库或 p/invoke

> WTS查询会话信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-14T08:36:05.487

我使用这个远程 WMI 查询：

```
object idleResult = Functions.remoteWMIQuery(machinename, "", "", "Select CreationDate From Win32_Process WHERE Name = \"logonUI.exe\"", "CreationDate", ref wmiOK); 
```

Logonui.exe 是锁屏。在业务环境中，大多数系统会在用户空闲时锁定。

您可以像这样以 DateTime 格式翻译结果

```
DateTime idleTime = Functions.ParseCIM_DATETIME((string)idleResult); 
```

ParseCIM_DATETIME 是这个功能：

```
public static DateTime ParseCIM_DATETIME(string date)
    {
        //datetime object to store the return value
        DateTime parsed = DateTime.MinValue;

        //check date integrity
        if (date != null && date.IndexOf('.') != -1)
        {
            //obtain the date with miliseconds
            string newDate = date.Substring(0, date.IndexOf('.') + 4);

            //check the lenght
            if (newDate.Length == 18)
            {
                //extract each date component
                int y = Convert.ToInt32(newDate.Substring(0, 4));
                int m = Convert.ToInt32(newDate.Substring(4, 2));
                int d = Convert.ToInt32(newDate.Substring(6, 2));
                int h = Convert.ToInt32(newDate.Substring(8, 2));
                int mm = Convert.ToInt32(newDate.Substring(10, 2));
                int s = Convert.ToInt32(newDate.Substring(12, 2));
                int ms = Convert.ToInt32(newDate.Substring(15, 3));

                //compose the new datetime object
                parsed = new DateTime(y, m, d, h, mm, s, ms);
            }
        }

        //return datetime
        return parsed;
    } 
```

远程 WMI 查询功能如下：

```
public static object remoteWMIQuery(string machine, string username, string password, string WMIQuery, string property, ref bool jobOK)
    {
        jobOK = true;
        if (username == "")
        {
            username = null;
            password = null;
        }
        // Configure the connection settings.
        ConnectionOptions options = new ConnectionOptions();
        options.Username = username; //could be in domain\user format
        options.Password = password;
        ManagementPath path = new ManagementPath(String.Format("\\\\{0}\\root\\cimv2", machine));
        ManagementScope scope = new ManagementScope(path, options);

        // Try and connect to the remote (or local) machine.
        try
        {
            scope.Connect();
        }
        catch (ManagementException ex)
        {
            // Failed to authenticate properly.
            jobOK = false;
            return "Failed to authenticate: " + ex.Message;
            //p_extendederror = (int)ex.ErrorCode;
            //return Status.AuthenticateFailure;
        }
        catch (System.Runtime.InteropServices.COMException)
        {
            // Unable to connect to the RPC service on the remote machine.
            jobOK = false;
            return "Unable to connect to RPC service";
            //p_extendederror = ex.ErrorCode;
            //return Status.RPCServicesUnavailable;
        }
        catch (System.UnauthorizedAccessException)
        {
            // User not authorized.
            jobOK = false;
            return "Error: Unauthorized access";
            //p_extendederror = 0;
            //return Status.UnauthorizedAccess;
        }

        try
        {
            ObjectQuery oq = new ObjectQuery(WMIQuery);
            ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, oq);

            foreach (ManagementObject queryObj in searcher.Get())
            {
                if (property != null)
                {
                    return queryObj[property];
                }
                else return queryObj;
            }
        }
        catch (Exception e)
        {
            jobOK = false;
            return "Error: " + e.Message;
        }
        return "";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T11:02:37.150

如果您启用了屏幕保护程序，我建议您检查屏幕保护程序进程中的 CreateDate 并与远程的 createdate 时间有所不同，您将获得空闲时间 + 屏幕保护程序超时

您可能想将 WMI 用于此类事情

它是一个黑客，但它有效

# ruby - 使用 Ruby 调用方法

> ID：15598480
> 
> 赞同：-3
> 
> 时间：2013-03-24T12:31:00.383
> 
> 标签：ruby

我有一个Ruby练习，不知道怎么做！我仍然是一个新手，并且在编程世界中学习我的方式，但我无法解决这个练习。如果你也可以向我解释你是如何做到的，那就太好了！

这里是 ：

在对象帐户上编写一个方法 double，它返回其输入参数 num 的 double。

```
def account.double(num)
    #your code here
end

# call double here 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:40:19.280

```
def account.double(num)
    num*2    
end

account.double(54) 
```

在 ruby​​ 中，如果未明确指定`return`值，则方法最后一条语句的值。`return`这里`num*2`由方法返回。

我们`account.double`在程序结束时使用 54 作为数字调用。您可以使用您喜欢的任何其他号码。

请记住，应在定义/调用此双重方法之前创建帐户对象。我把它留给你作为练习。

# c++ - 智能指针/编码模式的名称

> ID：15598481
> 
> 赞同：5
> 
> 时间：2013-03-24T12:31:00.663
> 
> 标签：c++, design-patterns, boost, qt4, smart-pointers

最近我经常遇到需要类似于这种数据结构的东西的情况。

**限制**：C++03 标准。

* * *

```
 +-----+--------------+               +----+
 |node0| NodeDataRef ->-------------->|data|
 +-----+--------------+               +----+
 +-----+--------------+                ^^ ^
 |node1| NodeDataRef ->----------------+| |
 +-----+--------------+                 | |
 +-----+--------------+                 | |
 |node2| NodeDataRef ->-----------------+ |
 +-----+--------------+                   |
                                          |
 +-----+--------------+                   |
 |root | RootDataRef ->-------------------+
 +-----+--------------+ 
```

1.  有几个`Node`类，每个类都`Node`持有对“ ”（类、结构等——动态分配） 的同一个实例的`NodeDataRef`“引用”（想想）。`shared_ptr``Data`
2.  还有一个“ `Root`”或“主”节点/类包含对相同“ ”的`RootDataRef`引用（这次，认为） 。`weak_ptr``Data`
3.  当所有`Node`s 被销毁时，`data`也被销毁并`RootDataRef`设置为`0`/ `NULL`。即`NodeDataRef`行为像`shared_ptr<Data>`和`RootDataRef`行为像`weak_ptr<Data>`
4.  **然而**，即使仍有活动`NodeDataRef`的 s，根节点也可以强制销毁数据。在这种情况下，所有`NodeDataRef`指向数据的 s 都设置为`NULL`/`0`并且`RootDataRef`也设置为`0`/ `NULL`。

* * *

即`weak_ptr<Data>`可以强制破坏所有联系`shared_ptr<Data>`。

1.  这种模式/智能指针类型有名称吗？
2.  如何使用 Boost 或 Qt 4*快速实现这一点？*（“快速”意味着无需编写类来维护引用列表）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T12:44:38.937

> 这种模式/智能指针类型有名称吗？

据我所知，不，这不是具有常用名称的典型所有权模式。

> 如何使用 Boost 或 Qt 4 快速实现这一点？（“快速”意味着无需编写类来维护引用列表）

此用例没有预先打包的所有权策略，因为这会破坏共享所有权的意义。如果存在多个指向给定对象的共享指针，则根据定义，这些共享指针必须使该对象保持活动状态。如果给了我一个共享指针，则可以保证该对象在我释放它之前一直存在。

如果您希望一个主对象能够命令销毁指向的对象，而不管其他对象是否拥有指向它的共享指针，那么您将必须想出一些单独的机制来让它命令共享指针的所有持有者指向该对象释放它。

**更新：**

尽管存在“hacky”解决方案可以“快速”完成这项工作，但我不建议您使用其中任何一个。这种模式非常非典型，您希望当有人阅读您的代码时（包括几个月后的您） ，它会*很明显。*

您的意图应该通过主对象和其他所有者之间的显式通信模式来明确，而不是隐藏在包装器、自定义删除器或其他任何地方的某个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:02:54.307

你可以使用`shared_ptr<T>`和`weak_ptr<T>`在哪里`T = scoped_ptr<Data>`。假设您可以`Data`使用 operator new 创建实例）。

`shared_ptr`应该使用`make_shared<unique_ptr<Data>>(new Data(...));`

根weak_ptr 可以通过调用强制删除`root.lock().reset()`

```
template <typename T>
struct RootHandle : public boost::weak_ptr< boost::scoped_ptr<T> >
{
    typedef boost::weak_ptr< boost::scoped_ptr<T> > weak_type;
    typedef boost::shared_ptr< boost::scoped_ptr<T> > strong_type;

    RootHandle() {}
    RootHandle(const weak_type& impl)
        :weak_type(impl) {}

    T* get() const
    {
        strong_type x = lock();
        return (x) ? x->get() : 0;
    }

    void reset()
    {
        strong_type x = lock();
        if (x)
            x->reset();
    }
};

template <typename T>
struct NormalHandle : public boost::shared_ptr< boost::scoped_ptr<T> >
{
public:
    typedef boost::shared_ptr< boost::scoped_ptr<T> > strong_type;

    NormalHandle() {}
    NormalHandle(const strong_type& impl)
        :strong_type(impl) {}

    T* get() const
    {
        boost::scoped_ptr<T>* ppx = strong_type::get();
        return (0 != ppx) ? ppx->get() : 0;
    }   
}; 
```

新 NormalHandles 的初始化如下所示：

`NormalHandle<Data> handle1(boost::make_shared< boost::scoped_ptr<Data> >(new Data(4, 3, "abc")));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:09:28.647

我不确定你为什么要这样做，但这是一个（非常）hackish 的解决方案，它还需要在每次访问 a 时运行一些额外的代码`NodeDataRef`（理想情况下作为该类的方法完成）。

与您的对象一起创建一个哨兵`Data`对象。给`RootDataRef`它一个拥有引用，给所有节点一个弱引用。然后，在每次访问 a 之前`NodeDataRef`，检查对哨兵的弱引用是否仍然有效。要强制从`root`中删除，请删除对哨兵的拥有引用，导致`NodeDataRef`s 中的所有弱引用变得无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T13:13:52.823

一种易于实现（但不是最有效）的方法是拥有双 shared_ptr 层：
**shared_ptr < shared_ptr < data >>**
根将有一个指向它的弱指针，当您想要强制销毁时，您将重置内部 shared_ptr 数据（在锁下执行！）
所有其他节点将正常使用它，但在使用它之前必须检查内部 shared_ptr 的有效性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T18:46:48.390

没有人给出特定于 Qt 的答案（奇怪？），所以我会尝试一下，尽管我对共享指针类有点粗略。

似乎您可以将其生`RootDataRef`成为[QSharedPointer](http://qt-project.org/doc/qt-4.8/qsharedpointer.html#details)并从中生成节点。创建第一个 后，使用[QSharedPointer::toWeakRef](http://qt-project.org/doc/qt-4.8/qsharedpointer.html#toWeakRef)`NodeDataRef`将 降级`RootDataRef`为[弱指针](http://qt-project.org/doc/qt-4.8/qweakpointer.html#details)。这样，当您删除所有s 时，原始指针将被删除，并且应该（也许不是？）设置为零。`NodeDataRef``RootDataRef`

[如果您需要使用根删除原始对象，只需使用QWeakPointer::toStrongRef](http://qt-project.org/doc/qt-4.8/qweakpointer.html#toStrongRef)将其重新提升回强引用，删除它，所有节点都应自动分配为零。

* * *

编辑：或者，你真的需要一个指针吗？如果这是共享数据而不是实际共享对象的情况，您可能会考虑 Qt 在[QSharedDataPointer](http://qt-project.org/doc/qt-4.8/qshareddatapointer.html#details)中的隐式共享方案，尤其是[QExplicitlySharedDataPointer](http://qt-project.org/doc/qt-4.8/qexplicitlyshareddatapointer.html)。

# php - MySQL全文搜索忽略数字

> ID：15598485
> 
> 赞同：0
> 
> 时间：2013-03-24T12:31:32.000
> 
> 标签：php, mysql, full-text-search, evaluation

好吧，我有一个 mysql 全文搜索，问题是这个查询似乎时不时地忽略数字，所以数据库包含视频游戏的名称，如

> 帝国
> 时代 帝国时代2帝国
> 时代3

**现在，当使用像Age of Empires 2**这样的字符串执行全文搜索时，它有时会返回 Age of Empires 或 Age of Empires 3 作为第一个匹配项。

基本上，如何确保搜索字符串中的数字在查询/或稍后评估返回的匹配项时具有高优先级？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-24T12:58:35.600

您应该使用以下语法：`Select * From table1 Where column1 Like 'Age Of Empires 2';`

就我而言：

```
mysql> Select * From table1;
 +----------------------+
 |column1               |
 +----------------------+
 |Age Of Empires        |
 |Age Of Empires 2      |
 |Age Of Empires 3      |
 +----------------------+

 mysql> Select * From table1 Where column1 Like 'Age Of Empires 2';
 +----------------------+
 |column1               |
 +----------------------+
 |Age Of Empires 2      |
 +----------------------+ 
```

# android - 通过_id选择时Sqlitedatabase查询不起作用

> ID：15598488
> 
> 赞同：0
> 
> 时间：2013-03-24T12:31:50.587
> 
> 标签：android, sqlite

我的 sqlitedatabase 已经被这个问题困扰了好几天了。

我的插入方法有效，我在它运行后中断并检查数据库现在是否包含行（在它为空之前），通过查询整个数据库，它有效。这是返回生成的puzzleId 的插入方法。

```
 public int savePuzzleToEdit(ContentValues puzzle, Integer puzzleId) {
      Integer id = puzzle.getAsInteger(General.ID);
      if (id == 0 && puzzleId == null) {
        puzzle.remove(General.ID);
        puzzleId = (int) ourDatabase.insert(PUZZLE_TABLE, null, puzzle);
      }else {
        ....
      }
    return puzzleId 
```

然而，查询方法不返回任何结果，即游标为空。

```
public ArrayList<ContentValues> getCreatedPuzzles(int puzzleId) {
  Cursor c = ourDatabase.query(PUZZLE_TABLE, null, "_id = " + puzzleId, null, null, null, null, null);
        while (c.moveToNext()) { // Generate return list ...} 
```

我尝试在插入之后和查询之前进行中断，以查看数据库中是否确实存在行。但是，我无法通过按 id 选择进行查询。但是，我可以通过表中的其他字段查询并获得正确的行，因此它必须是有错误的 _id 字段。

我还尝试使用 rawQuery 方法，该方法在查询整个数据库或除 id 之外的任何其他字段时也可以使用。

这是创建语句：

```
private static final String PUZZLE_TABLE_CREATE =
            "CREATE TABLE puzzle ( _id INTEGER, name varchar(45), category " +
                    "varchar(25), publishdate DATE, rating INT, timesplayed INT, numberOfQuestions INT);"; 
```

据我了解，id 必须是 INTEGER 才能在插入时进行 auto_increment，我相信这是有效的，因为 insert 方法返回一个 id，它从一个插入到另一个不同。

查询方法不会返回任何错误或异常，并且看起来表中没有具有该 ID 的行。我假设返回的puzzleId 也作为id 存储在表中，但这可能是错误的？！

任何我的意思是任何有关如何尝试解决此问题的建议或见解都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:11:06.370

首先你的创建表语句可能是错误的，如果你没有在语句中提到它，_id 将不会自动递增。应该是这样的

_id 整数主键自增

并检查您的创建表语句是否有其他错误

# c++ - 构造函数中的 C++ 循环指针注入

> ID：15598490
> 
> 赞同：1
> 
> 时间：2013-03-24T12:32:06.510
> 
> 标签：c++, dependency-injection

我已经阅读了很多循环依赖主题，但我找不到解决我问题的主题。我有两个包含彼此指针的类：

```
class B;

class A
{
public:
    A(B* _b, int _c): b(_b), c(_c) {}
    B* b;
    int c;
};

class B
{
public:
    B(A* _a, int _d): a(_a), d(_d) {}
    A* a;
    int d;
}; 
```

问题是在以下代码中：

```
class C
{ 
public:
    A* a_ptr;
    B* b_ptr;
    C() 
    {
        a_ptr = new A(b_ptr, 3);
        b_ptr = new B(a_ptr, 2);
        qDebug() << a_ptr->c;
        qDebug() << b_ptr->d;
        qDebug() << a_ptr->b->d;
        qDebug() << b_ptr->a->c;
    }
} 
```

最后两行是崩溃的应用程序。我了解问题和崩溃的原因。我可以为成员编写 setter 并在创建对象后调用它们，因此指针将是有效的。但是，我希望在调用构造函数后对象是完整的，而不调用任何其他方法。

所以......我想知道是否有任何方法可以在构造函数中注入（循环）指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:36:37.110

您可以让一个构造函数完成另一个对象的初始化：

```
B(A* a_ptr) : a(a_ptr)
{
    if(a)
        a->b = this;
} 
```

对于`A()`. 因此，您可以像下面这样创建它们：

```
a_ptr = new A(b_ptr, 3); // b_ptr was initialized to 0
b_ptr = new B(a_ptr, 2); // b_ptr->a = a_ptr
                         // b_ptr->a->b = b_ptr (ie, a_ptr->b = b_ptr) 
```

**编辑**：如评论中所述，如果您有很多课程，这是不可扩展的。但是，在一般情况下，您必须在构造函数*之外*初始化循环依赖项，其次，您不应该有很多循环依赖于彼此的类（如果是这种情况，也许您可​​以重新排列代码...... ）。

# python - unpickle 输入错误

> ID：15598494
> 
> 赞同：0
> 
> 时间：2013-03-24T12:32:37.780
> 
> 标签：python, pickle, typeerror

我有一本被腌制到文件“offsets.pickle”中的字典。当我尝试用

```
import pickle
a = open('offsets.pickle')
b = pickle.load(a) 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/global/python-2.7.3-intel/lib/python2.7/pickle.py", line 1378, in load
    return Unpickler(file).load()
  File "/usr/global/python-2.7.3-intel/lib/python2.7/pickle.py", line 858, in load
    dispatch[key](self)
  File "/usr/global/python-2.7.3-intel/lib/python2.7/pickle.py", line 1198, in load_setitem
    dict[key] = value
TypeError: 'str' object does not support item assignment 
```

我的代码每晚运行并且运行良好一段时间，突然这种情况开始发生。我可以恢复文件中存储的内容吗？

# java - 如何在 Lucene 或类似库中索引和搜索嵌套文档/结构化数据？

> ID：15598496
> 
> 赞同：1
> 
> 时间：2013-03-24T12:32:58.477
> 
> 标签：java, json, lucene

我有以下形式的结构化 JSON 数据：

```
{
    "id": 42,
    "name": "hand",
    "quantity": 2,
    "digits": [
        {
            "id": 43,
            "name": "thumb",
            "quantity": 1,
            "components": [
                {
                    "id": 44,
                    "name": "thumb",
                    "position": 0
                }
            ]
        },
        {
            "id": 45,
            "name": "fingers",
            "quantity": 4,
            "components": [
                {
                    "id": 46,
                    "name": "index",
                    "position": 1
                },
                {
                    "id": 47,
                    "name": "middle",
                    "position": 2
                },
                {
                    "id": 48,
                    "name": "ring",
                    "position": 3
                },
                {
                    "id": 49,
                    "name": "little",
                    "position": 4
                }
            ]
        }
    ]
} 
```

我需要使用 Java 对这些数据进行索引，以便之后可以进行查询以获取所需的信息。

为此，一个解决方案可能是使用自 3.4 版起支持嵌套文档的[Apache Lucene 。](https://lucene.apache.org/)但是，我找不到任何教程，也找不到有关如何创建嵌套文档的简单示例。

谁能解释如何为结构化数据创建 Lucene 文档？

或者，是否有其他类似于 Lucene 的库可以更好地支持结构化数据的索引和搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:00:24.423

在您的情况下，一个简单的解决方案是使用路径枚举（“Dewey Decimal”）。例如，您的前三个项目将是“42”、“42.43”和“42.43.44”，而您的第四个项目将是“42.45”。确保您的插槽足够大，可以容纳您需要的最大数量的物品——例如，“042.043.044”。

# python - python：ImportError：没有命名模块

> ID：15598498
> 
> 赞同：-3
> 
> 时间：2013-03-24T12:33:18.120
> 
> 标签：python, ubuntu, importerror

我开始学习 python，但是当我尝试从另一个文件导入模块时，我收到此错误：

```
Traceback (most recent call last):
 File "./test", line 4, in <module>
  from multip import table
ImportError: No module named multip 
```

这两个文件在同一个目录中

当我导入像'math'或'os'这样的模块时，它可以工作，问题出在文件之间

操作系统：ubuntu 12.04

python版本：python 3.2.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:50:03.993

您只能导入具有`.py`扩展名的文件。（或其中包含`__init__.py`文件的目录）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T13:09:51.337

编辑：我不知道修改 PYTHONPATH 环境被认为是一种不好的做法。@wRAR 给出的原因是它具有永久性效果，可能会产生无法控制的副作用。你最好尝试第一个命题（sys.path.append），看看它是否能解决你的问题。有关 sys.path.append 与 PYTHONPATH 的更多信息，请参阅本主题：[PYTHONPATH 与 sys.path](https://stackoverflow.com/questions/1893598/pythonpath-vs-sys-path)

* * *

它与您的 PYTHONPATH 环境变量无关吗？如果添加“。” 或者你正在工作的目录，我想应该没问题

在你的外壳中：

导出 PYTHONPATH=.:$PYTHONPATH python test.py

或（出于测试目的，不要系统地使用）在您的 python 文件中：

```
 import sys
 sys.path.append(".") 
```

# android - Android 游戏循环、内存和动画

> ID：15598508
> 
> 赞同：2
> 
> 时间：2013-03-24T12:34:15.527
> 
> 标签：android, memory, game-loop

我是 Android 新手，我正在开发猴岛 1 的侮辱剑术，但我面临一些菜鸟问题 :)

这是我的游戏循环：

```
public class MainThread extends Thread {

private static final String TAG = MainThread.class.getSimpleName();

// desired fps
private final static int    MAX_FPS = 50;   
// maximum number of frames to be skipped
private final static int    MAX_FRAME_SKIPS = 5;    
// the frame period
private final static int    FRAME_PERIOD = 1000 / MAX_FPS;  

// Surface holder that can access the physical surface
private SurfaceHolder surfaceHolder;
// The actual view that handles inputs
// and draws to the surface
private MainGamePanel gamePanel;    

// flag to hold game state 
private boolean running;
public void setRunning(boolean running) {
    this.running = running;
}

public MainThread(SurfaceHolder surfaceHolder, MainGamePanel gamePanel) {
    super();
    this.surfaceHolder = surfaceHolder;
    this.gamePanel = gamePanel;
}

@Override
public void run() {
    Canvas canvas;
    Log.d(TAG, "Starting game loop");
    // initialise timing elements for stat gathering
    initTimingElements();

    long beginTime;     // the time when the cycle begun
    long timeDiff;      // the time it took for the cycle to execute
    int sleepTime;      // ms to sleep (<0 if we're behind)
    int framesSkipped;  // number of frames being skipped 

    sleepTime = 0;

    while (running) {
        canvas = null;

        // try locking the canvas for exclusive pixel editing
        // in the surface
        try {
            canvas = this.surfaceHolder.lockCanvas();
            synchronized (surfaceHolder) {
                beginTime = System.currentTimeMillis();
                framesSkipped = 0;  // resetting the frames skipped
                // update game state 
                this.gamePanel.update();
                // render state to the screen
                // draws the canvas on the panel
                this.gamePanel.render(canvas);              
                // calculate how long did the cycle take
                timeDiff = System.currentTimeMillis() - beginTime;
                // calculate sleep time
                sleepTime = (int)(FRAME_PERIOD - timeDiff);

                if (sleepTime > 0) {
                    // if sleepTime > 0 we're OK
                    try {
                        // send the thread to sleep for a short period
                        // very useful for battery saving
                        Thread.sleep(sleepTime);    
                    } catch (InterruptedException e) {}
                }

                while (sleepTime < 0 && framesSkipped < MAX_FRAME_SKIPS) {
                    // we need to catch up
                    this.gamePanel.update(); // update without rendering
                    sleepTime += FRAME_PERIOD;  // add frame period to check if in next frame
                    framesSkipped++;
                }

            }
        } finally {
            // in case of an exception the surface is not left in 
            // an inconsistent state
            if (canvas != null) {
                surfaceHolder.unlockCanvasAndPost(canvas);
            }
        }   // end finally
    }
} 
```

第一个菜鸟问题：

不断渲染背景或固定图像（如完成的动画帧）是否合法？是不是很浪费内存？我想先从廉价的内存逻辑开始，然后再开始主要使用动画。

第二个问题：

在我的 render() 函数中，我调用

```
canvas.drawBitmap(background, null,new Rect(0, 0,canvas.getWidth(),canvas.getHeight()), paint); 
```

或者

```
Rect dest = new Rect(this.getXpos(), getYpos(), getXpos() + (rclip.right - rclip.left),
            getYpos() + (rclip.bottom - rclip.top));
canvas.drawBitmap(tileSheet, rclip, dest, null); 
```

将所有这些称为“新”是否正确？GC 在使用它们后会清理它们吗？

# linux - 设置虚拟主机文件以托管来自远程服务器的源代码

> ID：15598515
> 
> 赞同：1
> 
> 时间：2013-03-24T12:35:22.737
> 
> 标签：linux, apache, virtualhost

非常感谢您对以下查询的支持

**现在的情况：**

我在 Linux Apache 服务器“A”上有一个 Web 应用程序（包含一个上传文档的模块），它只能通过 Intranet 进行 HTTP 编辑。

**必需的：**

需要另一台 Linux Apache 服务器“B”来托管相同的 Web 应用程序，同时仅在服务器“A”上维护源代码。服务器“B”可以通过 Internet 和 Intranet 进行 HTTP-ed。

**阻塞点：**

在当前情况下，我们无法直接在服务器“B”上托管网站（这似乎是合乎逻辑的解决方案）。

**问题：**

是否可以为这种要求设置 httpd.conf 文件的虚拟主机？

**研究：**

通常我的大部分发现都是关于部署负载共享/负载平衡解决方案的帖子（**不是我的目标**），或者在“A”和“B”之间设置双向同步过程（最后的解决方案）。

**谷歌搜索字符串：**

*在两台服务器之间共享网站，在两台服务器上托管网站，虚拟主机到另一台服务器，在多台服务器上运行单个网站设置，在另一台服务器上为网站虚拟主机，在两台不同的服务器上托管一个网站，设置两台 linux 服务器来托管相同的服务器网站*

**服务器详情：**

***服务器 A：***

*   服务器IP：192.168.xxx.xxx（只能通过内网访问）

*   托管网站源代码

*   阿帕奇服务器

*   操作系统：RHEL5

**服务器 B：**

*   可通过 Intranet 和 Internet 访问

*   阿帕奇服务器

*   操作系统：与 A 相同（RHEL5）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T17:25:40.010

总结一下您现在可能发现的内容：不幸的是，有两件事称为代理。您感兴趣的称为*反向代理*，其中 B 将接受请求并将其转发给 A。客户端永远不会看到 A 甚至存在。几乎没有安全问题，具体取决于您查看的安全角度：

1.  服务器 A 只看到来自 B 的请求，而不是原始客户端，因此您想要的任何基于 IP 的限制都应该在服务器 B 上配置。

2.  通常提到的安全问题是（*转发*）代理将代表客户端向任意服务器请求事物，因此它掩盖了客户端的身份。只要您`ProxyRequests Off`禁用转发代理，我认为您无需担心这一点。

3.  服务器 A 可能会意外泄露它的 IP，您可能对此感到不舒服。当 B 将其从 A 收到的客户端请求的答案传递回时，它不会查看有效负载。因此，如果您返回 HTML 文档，它们最好都只有相对路径。我认为这可能是您遇到的问题：如果您的代码仍然包含对 192.168.xy 的引用，那么这些对外部客户端不起作用。如果你正在改变路径（即你有类似的东西`ProxyPass /somepath http://internal-server/otherpath`），事情会变得更加复杂，所以尽量避免这种情况。（通常，您的后端应用程序需要了解其公开可见的 URI 是什么。如何做到这一点取决于应用程序。）

# .htaccess - 将规则 .htaccess 从 blog.domain.com/anypath 重写为 www.domain.com/blog/anypath

> ID：15598516
> 
> 赞同：1
> 
> 时间：2013-03-24T12:35:25.270
> 
> 标签：.htaccess, url-rewriting, rewrite

我正在尝试在我的 .htaccess 文件中编写规则，以便将来自 blog.domain.com/anypath 的任何访问者重定向到 www.domain.com/blog/anypath

我在下面编写的规则似乎仅将 blog.domain.com 重定向到 domain.com/blog 但如果 URL 包含诸如 blog.domain.com/path 之类的路径，则似乎无法正确重定向

```
RewriteCond %{HTTP_HOST} ^blog\.* [NC]
RewriteRule .* http://www.domain.com/blog [L] 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:07:58.923

这是因为您没有使用`()`捕获组捕获路径以通过变量重写`$1`。您需要将其附加到您的重定向 URL。

```
RewriteCond %{HTTP_HOST} ^blog\.* [NC]
# Capture the full path into $1 and append it to the output URL
RewriteRule (.*) http://www.domain.com/blog/$1 [L,R=301] 
```

如果这是一个永久重定向，你应该`R=301`使用`[L,R=301]`

与往常一样，请查阅[mod_rewrite 文档](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)以获取完整的详细信息，并使用[这个聪明的重写测试器](http://htaccess.madewithlove.be/)进行实验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:08:21.960

您需要捕获您的`REQUEST_URI`并将其传递到路径上。

```
RewriteCond %{HTTP_HOST} ^blog.domain.com$ [NC]
RewriteRule ^(.*)$ http://www.domain.com/blog/$1 [R=301,L] 
```

这将从博客的子域中捕获路径，并将其重定向到正确的 URL。

例如，`blog.domain.com/post/736/test`将重定向到`www.domain.com/blog/post/736/test`.

# parsing - Joomla 3 和简单的图片库 - 不解析 {gallery}

> ID：15598523
> 
> 赞同：1
> 
> 时间：2013-03-24T12:35:55.387
> 
> 标签：parsing, joomla, tags, gallery, joomla-extensions

我在使简单图像库在 Joomla 3 中工作时遇到问题。它不显示任何图片，实际上它甚至不关心它们。

我有这个页面： [http ://utsnorthsath.kangoowebs.com/gallery/images/34-short-course-cross-country](http://utsnorthsath.kangoowebs.com/gallery/images/34-short-course-cross-country)

看起来 {gallery} 标记无法识别/解析，并且没有显示画廊。这个模块 SIG 安装后是否需要任何额外的操作来告诉 Joomla 现在应该解析 {gallery} 标签？

我没有收到任何错误消息，只是内容没有被解析。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:59:42.810

不想教你吸蛋，但是当我发现 {plugincodes} 按原样呈现时，这要么意味着你没有正确使用语法，要么你没有在插件管理器中启用插件。

可能影响插件的另一件事是您在 Mootools 之前加载 jquery。

最佳做法是反过来加载这些。

你可以寻找一个名为 JQuery Easy 的优秀插件，它应该可以解决这个问题，如果不是上面的问题，也可能是 Gallery 问题。

# forms - Zend 表单装饰器问题

> ID：15598524
> 
> 赞同：0
> 
> 时间：2013-03-24T12:36:08.017
> 
> 标签：forms, zend-framework, zend-decorators

****我英语说得不好。所以我现在要发布代码。****

表格代码：

```
protected $elementDecorators = array('ViewHelper','Errors','Description','Label',
            array('HtmlTag',array('tag' => 'div','class' => '_wrapperElement')          
            ));

    public function init(){
        $this->addElement('text','mytext',array(
        'class' => '_inputText',
        'label' => 'Mytext',
        'required' => true,
        'decorators' => $this->elementDecorators
        ));

        $this->setDecorators(array('FormElements',array('HtmlTag',array('tag' => 'div','class' => '_formWrapper')),'Form'));

    } 
```

输出：

```
<form method="post" action="" enctype="application/x-www-form-urlencoded">
    <div class="_formWrapper">
        <div class="_wrapperElement">
            <label class="required" for="mytext">Mytext</label>
            <input type="text" class="_inputText" value="" id="mytext" name="mytext">    
        </div>
    </div>
</form> 
```

现在我想要一个 div 包装标签和输入元素，如下所示：

```
<form method="post" action="" enctype="application/x-www-form-urlencoded">
    <div class="_formWrapper">
        <div class="_wrapperElement">
            <div class="_wrapperLabel">
                <label class="required" for="mytext">Mytext</label>
            </div>
            <div class="_wrapperInput">
                <input type="text" class="_inputText" value="" id="mytext" name="mytext">    
            </div>
        </div>
    </div>
</form> 
```

怎么做？

我尝试了很多次，但我做不到。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:28:23.393

```
protected $elementDecorators = array('ViewHelper','Errors','Description', array('Label', array('tag' => 'div', 'class' => '_wrapperLabel')
        ),
            array('HtmlTag',array('tag' => 'div','class' => '_wrapperInput')          
            )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:03:46.417

我找到了将装饰器渲染到 ViewScript 的解决方案。

# android - 如何从主活动中的选项卡主机内加载的活动更改主活动中的编辑文本字段？

> ID：15598528
> 
> 赞同：0
> 
> 时间：2013-03-24T12:36:21.770
> 
> 标签：android, activerecord, tabs, android-tabhost

我正在开发一个应用程序，在我的主要活动中，有一个选项卡主机和一个编辑文本字段。更改选项卡时，选项卡主机将在每个选项卡内加载不同的活动。在每个选项卡中加载的每个活动中，我都放置了一个按钮。当我单击按钮时，我需要在主活动的编辑文本中显示一些文本。但每当我尝试在主活动之外的其他活动中初始化编辑文本字段时，我都会收到“应用程序强制关闭”。

因此，如果有人可以帮助我从选项卡中加载的活动中的按钮中获取编辑文本获取价值，那将是一个很大的帮助

这是屏幕截图蓝色框将是每个选项卡中加载的活动，其中将是主要活动

![我的应用程序的屏幕截图](../Images/5c1fdbaf79d34bf621c97a13c2e80a08.png)

这就是发生强制关闭时 Logcat 输出的样子。

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.batz.voiceforyou/com.batz.voiceforyou.Things}: java.lang.NullPointerException
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2065)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1906)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:694)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.widget.TabHost.setCurrentTab(TabHost.java:358)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.widget.TabHost$2.onTabSelectionChanged(TabHost.java:150)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.widget.TabWidget$TabClickListener.onClick(TabWidget.java:553)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.view.View.performClick(View.java:4129)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.view.View$PerformClick.run(View.java:17143)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.os.Handler.handleCallback(Handler.java:615)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.os.Looper.loop(Looper.java:137)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.app.ActivityThread.main(ActivityThread.java:4802)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at java.lang.reflect.Method.invokeNative(Native Method)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at java.lang.reflect.Method.invoke(Method.java:511)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:813)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:580)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at dalvik.system.NativeStart.main(Native Method)
03-24 17:55:23.928: E/AndroidRuntime(23581): Caused by: java.lang.NullPointerException
03-24 17:55:23.928: E/AndroidRuntime(23581):    at com.batz.voiceforyou.Things.onCreate(Things.java:19)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.app.Activity.performCreate(Activity.java:5013)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-24 17:55:23.928: E/AndroidRuntime(23581):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2029)
03-24 17:55:23.928: E/AndroidRuntime(23581):    ... 18 more 
```

这是 MainActivity 代码

```
public class MainActivity extends TabActivity {

String text="";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final EditText mainText=(EditText) findViewById(R.id.maintext);

    Resources res =  getResources();
    TabHost tabs =  getTabHost();

    Intent regular =  new Intent(this, Regular.class);
    TabSpec reg =  tabs.newTabSpec("Regular")
            .setIndicator("", res.getDrawable(R.drawable.ic_launcher))
            .setContent(regular);

    Intent things =  new Intent(this, Things.class);
    TabSpec thngs =  tabs.newTabSpec("Things")
            .setIndicator("", res.getDrawable(R.drawable.ic_launcher))
            .setContent(things);

    tabs.addTab(reg);
    tabs.addTab(thngs);

    tabs.setCurrentTab(0);

}

} 
```

这是在选项卡内加载的活动之一

```
public class Regular extends Activity {
String text="";
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.regular);

    //final EditText mainText=(EditText) findViewById(R.id.maintext);
    //text=mainText.getText().toString();

    Button regbtn =  (Button) findViewById(R.id.regularbutton);
    regbtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            text=text+" regular";
            //mainText.setText(text);
        }
    });

} 
```

}

在这里您可以看到我评论的 3 行，如果我删除这些行，应用程序将在启动时强制关闭。如果你愿意，我也可以分享布局

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:24:01.477

您可以通过发送广播使用现有设置来实现此目的。

**首先**，在 MainActivity 中创建一个 BroadcastReceiver，如下所示：

```
public static final String ACTION_UPDATE_TEXT = "com.batz.voiceforyou.UPDATE_TEXT";
public static final String EXTRA_TEXT = "text";

private BroadcastReceiver textReceiver = new  BroadcastReceiver() {

    @Override
    public void onReceive(Context context, final Intent intent) {
        if (intent != null && ACTION_UPDATE_TEXT.equals(intent.getAction())) {
            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    String text = intent.getStringExtra(EXTRA_TEXT);
                    EditText mainText=(EditText) findViewById(R.id.maintext);
                    mainText.setText(text);
                }
            });
        }
    }
}; 
```

然后在MainActivity的onResume()方法中注册receiver：

```
registerReceiver(textReceiver, new IntentFilter(ACTION_UPDATE_TEXT)); 
```

不要忘记在 onPause() 方法中取消注册它：

```
unregisterReceiver(textReceiver); 
```

**接下来**，在您的每个活动（常规和事物）按钮 onclick 处理程序中，像这样发送广播：

```
 @Override
    public void onClick(View v) {
        //your other code

        Intent intent = new Intent(MainActivity.ACTION_UPDATE_TEXT);
        intent.putExtra(MainActivity.EXTRA_TEXT, text);
        sendBroadcast(intent);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:15:06.753

为什么不直接将编辑文本实例 mainText 传递到您的常规活动中，然后更新它？

如果您感到困惑，请打我。

**更新** 试试这个，告诉我它是否有效：

在你的`MainActivity`,

```
int id = mainText.getId();

intent.putExtra("tv", id ); 
```

在你的`Regular`活动中。

```
//in onCreate
int id = getIntent().getExtras().getInt("tv");

EditText mainText=(EditText) findViewById(id); 
```

这是未经测试的代码，请尝试看看它是否有效。用结果打我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:13:16.277

在您的选项卡主机 java 文件中，插入以下代码。

```
View MainActivityView=(LinearLayout)findViewById(R.layout.activity_main);
EditText et=(EditText)MainActivityView.findViewById(R.id.maintext); 
```

您收到空指针异常，因为edittext 框不在您的选项卡主机视图中。

# jquery - jquery表单插件不起作用

> ID：15598535
> 
> 赞同：0
> 
> 时间：2013-03-24T12:37:02.710
> 
> 标签：jquery, ajax, jquery-forms-plugin

我是一个新手程序员。我被一个简单的编码问题困扰了两天。我尝试使用jquery表单插件将表单提交到另一个页面并从该页面获取反馈。问题是插件不起作用，表单正常提交而没有反馈. 这是代码：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
<script src="http://malsup.github.com/jquery.form.js"></script>

<div id='preview'></div>
<form  action='ajaxcall.php' id='upload_pic' enctype='multipart/form-data'  method='post'>
<input type='file' id='pic' name='picture'>
<input type='submit' id='sub'>
</form>

var options=
{
  target:'#preview',
  url:'ajaxcall.php'
};

$(document).ready(function(){
    $("#sub").click(function(){
        $('#preview').html("<img src='images/loader.gif' alt='Loading.....'/>");
        $('#upload_pic').ajaxForm(options).submit();
    });
}); 
```

这是我的 ajaxcall.php 页面代码

```
if(!empty($_FILES['picture']['size']))
{
 echo "<img src='images/197.jpg'>";
} 
```

期望是回显的图像会反馈，但页面只是重定向到 ajaxcall.php 页面。我知道 ajaxForm() 函数不起作用。我在 SO 中问了两次同样的问题，但仍然没有令人满意的解决方案。但为什么？请帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:59:54.887

Use adeneo's answer, because I also do not see why you would use this plugin, but here could be a few reasons why what you have isn't working:

In the examples from [the plugin's website](http://www.malsup.com/jquery/form/#html), you should

1.  bind to the form, not the button
2.  use the beforeSubmit option
3.  Remove the submit() from the end of your call, not sure why it is there
4.  Watch console for any errors

> ```
> var options=
> {
>   target:'#preview',
>   url:'ajaxcall.php',
>   beforeSubmit:  showLoading,
>   error: function(e){
>       alert("Error: " + e);
>   }
> };
> 
> function showLoading(){
>     $('#preview').html("<img src='images/loader.gif' alt='Loading.....'/>");
> }
> 
> $(document).ready(function(){
>     $("#upload_pic").ajaxForm(options);
> }); 
> ```

# hadoop - 如何在 MapReduce 中设置自定义输入格式？

> ID：15598537
> 
> 赞同：0
> 
> 时间：2013-03-24T12:37:11.813
> 
> 标签：hadoop, mapreduce

我正在编写 MapReduce 程序并使用 org.apache.hadoop.mapred.* 中的类。谁能告诉我这个错误的原因？我的 CustomInputFormat 类扩展了 InputFormat 并且我已经覆盖了 createRecordReader 方法。

我的 CustomInputFormat 的签名是：

```
class ParagraphInputFormat extends InputFormat {

    @Override
    public RecordReader createRecordReader(InputSplit arg0,
        TaskAttemptContext arg1) throws IOException, InterruptedException {
        return new CustomRecordReader();
    }

    @Override
    public List<InputSplit> getSplits(JobContext arg0) throws IOException,
        InterruptedException {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

CustomRecordReader 的签名是 `class CustomRecordReader extends RecordReader`

在声明这个类时，我使用了 org.apache.hadoop.mapreduce。*. 我对 org.apache.hadoop.mapred 感到困惑。*和 org.apache.hadoop.mapreduce.*。Eclipse 有时会继续显示已弃用的消息。我听说 apache 添加了一些类，然后删除了这些类，然后又添加了以前的类。是不是因为这个？它会影响我的代码吗？

```
JobConf conf = new JobConf(new Configuration(),MyMRJob.class);
        conf.setJobName("NameofJob");

        conf.setOutputKeyClass(CutomeKeyClass.class); //no error to this line
        conf.setOutputValueClass(IntWritable.class);

        conf.setMapperClass(MYMap.class);
        conf.setCombinerClass(MyReduce.class);
        conf.setReducerClass(MyReduce.class);

        conf.setInputFormat(CustomInputFormat.class);//ERROR to this line while typing
        conf.setOutputFormat(IntWritable.class);

        FileInputFormat.setInputPaths(conf, new Path(args[0]));
        FileOutputFormat.setOutputPath(conf, new Path(args[1]));

        JobClient.runJob(conf); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:29:53.230

您的输入格式扩展了 mapreduce 包的 InputFormat（它扩展而不是实现，并且签名与新 api 的签名匹配），但您的作业配置使用旧 API（JobConf 而不是 Job）。

因此，您要么需要修改自定义输入格式以实现 InputFormat (oahmapred.InputFormat)，要么修改作业配置以使用新的 API (Job)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-27T05:27:24.453

嘿，我遇到了同样的问题，然后我使用了 org.apache.hadoop.mapreduce 中的类而不是 org.apache.hadoop.mapred，这是新旧 API 的问题，为此不要使用 JobConf 配置，仅使用 Job 配置.. .

# php - 写博客并首先使用最新日期的文件 i/o 输入？

> ID：15598540
> 
> 赞同：0
> 
> 时间：2013-03-24T12:37:20.693
> 
> 标签：php

```
<?php

foreach (glob("POSTS/*.txt") as $filename) 
        {       

            $file = fopen($filename, 'r') or exit("Unable to open file!");
            //Output a line of the file until the end is reached

                echo date('D, M jS, Y H:i a', filemtime($filename))."<br>";
                echo '<h2>' . htmlspecialchars(fgets($file)) . '</h2>';

                while(!feof($file))
                  {
                  echo fgets($file). "<br>";
                  }
            echo "<hr/>";
        }
    fclose($file);

    ?> 
```

我正在写一个博客，并且已经能够输入文件，但只能首先输入最旧的文件

我怎么做才能让我首先在最新日期之前输入它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:45:58.593

用于[`usort()`](http://www.php.net/manual/en/function.usort.php)以正确的顺序放置文件数组（日期说明）。

```
function timeSort($first, $second) {
    $firsttime = filemtime($first);
    $secondtime = filemtime($second);

    return $secondtime - $firsttime;
}

$files = glob("POSTS/*.txt");

usort($files, 'timeSort');

foreach ($files as $filename) {

     /* Same as before */

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:49:17.213

如果您真的坚持使用文本文件而不是数据库来存储您的博客条目，那么以所需方式对它们进行排序的一种简单方法是使用[`array_reverse()`](http://php.net/manual/en/function.array-reverse.php)，如下所示：

```
$posts = array_reverse(glob("POSTS/*.txt"));
foreach($posts as $filename) {
    // do your stuff
} 
```

# java - 用.htaccess 保护.jar？

> ID：15598542
> 
> 赞同：0
> 
> 时间：2013-03-24T12:37:47.637
> 
> 标签：java, php

我想防止对我的游戏客户端进行反编译。是否有一个选项我可以使用 .htaccess 或任何其他方法保护 .jar 文件，以便客户端（浏览用户，通过小程序加载客户端）将无法获取文件并对其进行反编译。

我一直想知道是否有解决方案，有吗？也许创建一个crypt代码，并且每当服务器尝试获取客户端jar时，它会通过GET发送一个crypt代码，如果crypt代码匹配，它将从该页面加载客户端，我不知道，应该有一个解法 ？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:42:26.753

浏览器要执行applet，需要下载包含applet 代码的jar 文件。如果它下载它，它可用于反编译。为了保护您免受这种情况的影响，您可以混淆字节码，或者根本不使用小程序，而只需使用传统的 Web 应用程序，其中代码位于服务器端，客户端只能看到 HTML 和 JavaScript 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:53:03.763

*您无法*阻止用户获取未加密的字节码。

**没有什么。**

用户的机器需要未加密形式的小程序字节码才能执行它们。由于用户（有足够的知识）可以完全控制他的机器做什么，你可以假设控制将扩展到允许他/她在字节码被解密的某个点截取它们。

如果用户可以截获小程序的字节码，那么他/她可以*更改*它们以击败您放入代码中的任何聪明的东西。这包括更改字节码以击败您用来检测字节码更改的任何措施。

> “只要做到这一点，他们就必须在浏览器中使用它，然后检查他们是否从我们的 url 访问它”这可行吗？

没有。用户可以修改小程序以删除该检查。

> “您还可以让 php 创建一个带有哈希的会话变量，并检查该 hah 是否存在并与我们的哈希算法匹配”

没有。用户也可以修改小程序以删除该检查。

> 不知道，应该有解决办法吧？

不幸的是，没有实用的解决方案……除了在服务器端运行所有需要保护的东西。

顺便说一句，这个问题并不是 Java 独有的。具有技术知识和动机的人也可以击败 Javascript 中的任何篡改保护措施，甚至可以在您让用户安装的本机代码插件中（如果他足够愚蠢的话）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T12:40:24.130

不可以。您可以阻止浏览器获取文件，但随后它将无法运行它。

> 也许创建一个加密代码，并且每当服务器尝试获取客户端 jar 时，它会通过 GET 发送一个加密代码，如果加密代码匹配，它将从该页面加载客户端，

用户可以看到代码并仍然获取文件。

# sql-server - 在 T-SQL 中创建自定义谓词函数？

> ID：15598543
> 
> 赞同：1
> 
> 时间：2013-03-24T12:37:49.147
> 
> 标签：sql-server, tsql, sql-server-2012

是否可以在 T-SQL 中定义自定义谓词？所以例如我可以写：

```
SELECT a,b,c 
FROM MyTable
WHERE dbo.myCustomPredicate(a) 
```

一个简单的解决方法是创建一个返回 BIT 的标量值函数 dbo.myCustomPredicate，并将 WHERE 子句更改为

```
WHERE dbo.myCustomPredicate(a)=1 
```

只是好奇是否可以避免“= 1”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T15:19:09.917

不，这是不可能的。

SQL Server 不支持 ANSI SQL 布尔数据类型。

你没有说什么是实现，`dbo.myCustomPredicate`但很可能`WHERE dbo.myCustomPredicate(a)=1`也应该避免，因为 SQL Server 中标量 UDF 的 Sargability 和一般性能。

# symfony - 带有 FOSUserBundle 的 Symfony2 数据夹具

> ID：15598544
> 
> 赞同：1
> 
> 时间：2013-03-24T12:38:00.833
> 
> 标签：symfony, doctrine, fosuserbundle

我想为我的项目创建 som 固定装置以进行测试。我现在在命令行脚本中执行此操作，但我从 Doctrine 中发现了 DataFixtures 捆绑包并想对其进行测试。我有以下代码：

```
<?php
// src/Pan100/MoodLogBundle/DataFixtures/ORM/LoadUserData.php

namespace Acme\HelloBundle\DataFixtures\ORM;

use Doctrine\Common\DataFixtures\FixtureInterface;
use Doctrine\Common\Persistence\ObjectManager;
use Symfony\Component\DependencyInjection\ContainerAware;

use Pan100\MoodLogBundle\Entity\Day;
use Pan100\MoodLogBundle\Entity\Medication;
use Pan100\MoodLogBundle\Entity\Trigger;

use FOS\UserBundle\Doctrine\UserManager;

class MockDataMaker extends ContainerAware
{
    /**
     * {@inheritDoc}
     */
    public function load(ObjectManager $manager)
    {
        $userManager = $container->get('fos_user.user_manager');
        //make some users
        $user = $userManager->createUser();
        $user->setUsername('John');
        $user->setEmail('john.doe@example.com');
        $user->setPlainPassword('passord');
        $userManager->updateUser($user);
    }

} 
```

我明白了：

```
 [InvalidArgumentException]                                                   
  Could not find any fixtures to load in:                                      

  - /var/www/path/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/D  
  ataFixtures/ORM                                                              
  - /var/www/path/vendor/symfony/symfony/src/Symfony/Bundle/SecurityBundle/Da  
  taFixtures/ORM                                                               
  - /var/www/path/vendor/symfony/symfony/src/Symfony/Bundle/TwigBundle/DataFi  
  xtures/ORM                                                                   
  - /var/www/path/vendor/symfony/monolog-bundle/Symfony/Bundle/MonologBundle/  
  DataFixtures/ORM                                                             
  - /var/www/path/vendor/symfony/swiftmailer-bundle/Symfony/Bundle/Swiftmaile  
  rBundle/DataFixtures/ORM                                                     
  - /var/www/path/vendor/symfony/assetic-bundle/Symfony/Bundle/AsseticBundle/  
  DataFixtures/ORM                                                             
  - /var/www/path/vendor/doctrine/doctrine-bundle/Doctrine/Bundle/DoctrineBun  
  dle/DataFixtures/ORM                                                         
  - /var/www/path/vendor/sensio/framework-extra-bundle/Sensio/Bundle/Framewor  
  kExtraBundle/DataFixtures/ORM                                                
  - /var/www/path/vendor/jms/aop-bundle/JMS/AopBundle/DataFixtures/ORM         
  - /var/www/path/vendor/jms/di-extra-bundle/JMS/DiExtraBundle/DataFixtures/O  
  RM                                                                           
  - /var/www/path/vendor/jms/security-extra-bundle/JMS/SecurityExtraBundle/Da  
  taFixtures/ORM                                                               
  - /var/www/path/vendor/friendsofsymfony/user-bundle/FOS/UserBundle/DataFixt  
  ures/ORM                                                                     
  - /var/www/path/src/Pan100/MoodLogBundle/DataFixtures/ORM                    
  - /var/www/path/vendor/sonata-project/intl-bundle/Sonata/IntlBundle/DataFix  
  tures/ORM                                                                    
  - /var/www/path/vendor/ob/highcharts-bundle/Ob/HighchartsBundle/DataFixture  
  s/ORM                                                                        
  - /var/www/path/vendor/doctrine/doctrine-fixtures-bundle/Doctrine/Bundle/Fi  
  xturesBundle/DataFixtures/ORM                                                
  - /var/www/path/src/Acme/DemoBundle/DataFixtures/ORM                         
  - /var/www/path/vendor/symfony/symfony/src/Symfony/Bundle/WebProfilerBundle  
  /DataFixtures/ORM                                                            
  - /var/www/path/vendor/sensio/distribution-bundle/Sensio/Bundle/Distributio  
  nBundle/DataFixtures/ORM                                                     
  - /var/www/path/vendor/sensio/generator-bundle/Sensio/Bundle/GeneratorBundl  
  e/DataFixtures/ORM 
```

我的问题是：如何使用 FOSUserBundle 在灯具中创建用户？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-28T15:10:55.220

您的课程必须扩展“AbstractFixture”并实现“ContainerAwareInterface”以访问用户管理器服务！如果您的类不扩展“AbstractFixture”，则不是固定装置；-) 在 fosub 和 symfony 中寻找不同的固定装置接口和不同的容器感知接口以获取更多方法。验证命名空间是否是复制并粘贴 Sadden，因为我的英语真的不差！例如：对于订购的灯具

```
use Doctrine\Common\DataFixtures\AbstractFixture;
use Doctrine\Common\DataFixtures\OrderedFixtureInterface;
use Symfony\Component\DependencyInjection\ContainerAwareInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;
use Doctrine\Common\Persistence\ObjectManager;
class LoadArticleFixture extends AbstractFixture implements OrderedFixtureInterface, ContainerAwareInterface
{
/**
 * @var ContainerInterface
 */
private $container;

/**
 * {@inheritDoc}
 */
public function setContainer(ContainerInterface $container = null)
{
    $this->container = $container;
}
public function load(ObjectManager $manager)
{
    $auteurs = $this->container->get('fos_user.user_manager')->findUsers();
    etc...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:35:54.523

您的源文件位置与您的命名空间不匹配：

`src/Pan100/MoodLogBundle/DataFixtures/ORM/LoadUserData.php`对比`namespace Acme\HelloBundle\DataFixtures\ORM;`

尝试将您的命名空间设置为`Pan100\MoodLogBundle\DataFixtures\ORM`.

正如 MolecularMan 指出的那样，您还应该实施`FixtureInterface`

# javascript - 将对象分配给“this”

> ID：15598549
> 
> 赞同：6
> 
> 时间：2013-03-24T12:38:54.197
> 
> 标签：javascript

假设我有一个类和一些像这样的静态辅助方法：

```
function MyClass (myVar) {
    this.myVar = myVar;

    this.replaceMe = function (value) {
        // this will fail
        this = MyClass.staticHelper( value );

        return this;
    }

    this.revealVar = function () {
        alert( this.myVar );
    }
}

MyClass.staticHelper = function (instance, value) {
    return new MyClass( instance.myVar + value );
} 
```

我想做的是这样的：

```
var instance = new MyClass( 2 );

instance.revealVar(); // alerts 2
instance.replaceMe( 40 ).revealVar(); // alerts 42 
```

原因是我的类的结构稍微复杂一些，我不想每次都手动分配所有内部变量，而是替换整个对象。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:24:57.620

> `instance.replaceMe( 40 ).revealVar();`警报 42

好的，这样`return MyClass.staticHelper(this, value);`就足够了。问题只是下一次调用`instance.revealVar()`现在应该警告 2 还是 42 - 如果您想`instance`更改为 42，它会变得更加复杂：

```
this = MyClass.staticHelper( value ); // this will fail 
```

…因为[`this`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)不是一个公共变量，而是一个*关键字*，并[*计算出当前执行上下文的 ThisBinding 的值，该值*](http://es5.github.com/#x11.1.1)取决于[函数的输入方式](http://es5.github.com/#x10.4.3)- 你不能分配给它，你只能在调用函数时设置它.

> 我不想每次都手动分配所有内部变量，而是替换整个对象。

不幸的是，您必须这样做，而不更改`instance`对象的属性（以及闭包隐藏变量），您不会更改`instance`并且`revealVar()`将保持 2。

> 有没有一种简单的方法可以做到这一点？

是的，它可以通过编程方式完成。最简单的方法是（再次）*在当前实例上*[调用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)构造函数，就像使用[关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)调用时一样：*[`new`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)*

 *```
MyClass.call( instance, instance.myVar + value ); 
```

然而你不能像创建一个全新实例的静态函数那样使用它。`replaceMe`要么你把它放在一个静态方法中并从with中调用它`this`，要么你直接把它放在`replaceMe`.

如果您需要一个首先返回一个全新实例的静态方法，您也可以通过在旧实例上复制新属性来使用它：

```
….replaceMe = function(val) {
    var newInst = MyClass.staticHelper(this, val); // new MyClass(this.myVar+val);
    for (var prop in newInst)
        if (newInst.hasOwnProperty(prop))
            this[prop] = newInst[prop];
    return this;
}; 
```

这意味着覆盖旧的属性，并且旧的闭包现在可以被垃圾收集，因为没有任何东西可以引用它们。

顺便说一句，我建议[将您的方法放在原型上，而不是在构造函数中分配它们](https://stackoverflow.com/questions/310870/use-of-prototype-vs-this-in-javascript)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:43:36.960

只返回新实例怎么样：

```
function MyClass(myVar) {
    // ...

    this.replaceMe = function (value) {
        return MyClass.staticHelper(this, value);
    }

    // ...
}

MyClass.staticHelper = function (instance, value) {
    return new MyClass( instance.myVar += value );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T12:50:14.137

这在 Javascript 中不起作用有两个原因。

首先，尽管它看起来像一个变量，但`this`实际上是一个函数调用*，因此不能分配给它。`this=foo`是一样的`bar()=baz`。所以不可能有这样的代码：

```
a = 5
a.change(10)
alert(a == 10) // nope 
```

其次，即使`this=z`可能，该方法无论如何都会失败，因为 Javascript 按值传递，因此不可能有一个函数来更改其参数的值：

```
a = 5
change(a)
alert(a == 10) // nope 
```

`*`“是”的意思是“在各方面都完全一样”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T14:37:34.983

不久前我想做一些非常相似的事情。不幸的是，没有办法给它赋值`this`——`this`指针是一个只读变量。然而，下一个最好的方法是使用 getter 和 setter 对象来更改保存实例本身的变量。

请注意，这只会更新对实例的单个引用。你可以在这里阅读更多内容：[有更好的方法来模拟 JavaScript 中的指针吗？](https://stackoverflow.com/q/10281115/783743)

这就是它的工作原理：

```
function MyClass(pointer, myVar) {
    this.myVar = myVar;

    this.replaceMe = function (value) {
        pointer.value = MyClass.staticHelper(this, pointer, value);
        return pointer.value;
    };

    this.revealVar = function () {
        alert(this.myVar);
    };
}

MyClass.staticHelper = function (instance, pointer, value) {
    return new MyClass(pointer, instance.myVar + value);
}; 
```

这是创建`pointer`和使用它的方法：

```
var instance = new MyClass({
    get value() { return instance; },
    set value(newValue) { instance = newValue; }
}, 2);

instance.revealVar();               // alerts 2
instance.replaceMe(40).revealVar(); // alerts 42 
```

这不是最优雅的解决方案，但它可以完成工作。您可以看到此代码在运行：http: [//jsfiddle.net/fpxXL/1/](http://jsfiddle.net/fpxXL/1/)*

# php - get_terms() 显示插件分类错误

> ID：15598554
> 
> 赞同：2
> 
> 时间：2013-03-24T12:39:22.940
> 
> 标签：php, wordpress

我在 wordpress 插件文件夹中有这段代码，`localhost/wp-content/plugins/test/cat.php`

```
<? 
define( "WP_INSTALLING", true );
require ('../../../wp-blog-header.php');

$categories = get_terms("ad_cat","parent=6&hide_empty=0");
print_r($categories);
?> 
```

但是，这显示错误为：

```
WP_Error Object
(
    [errors] => Array
        (
            [invalid_taxonomy] => Array
                (
                    [0] => Invalid Taxonomy
                )
        )
    [error_data] => Array
        (
        )
) 
```

但是，当我使用 PHP 代码插件在侧边栏小部件中做同样的事情时，没有任何错误。存在分类法`ad_cat`，它是使用 Wordpress 分类主题自动创建的。当我使用`category`wordpress 的默认类别分类法时，这很有效。但是，我希望它显示`ad_cat`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T04:03:07.020

删除`define( "WP_INSTALLING", true );`，这将解决项目。这对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:48:03.193

Wordpress 在添加任何主题文件之前添加插件文件。因此，您无法在插件中获取主题修改数据。

因此，您必须等待添加主题文件。

考虑`add_action`并`add_hook`挂钩您的自定义函数。这将使您的自定义函数中的每个数据都可用

# android - 钛安卓配置OSX

> ID：15598557
> 
> 赞同：0
> 
> 时间：2013-03-24T12:40:04.240
> 
> 标签：android, configuration, appcelerator-mobile

我是新手，我正在关注“Appcelerator Titanium Smartphone App Development Cookbook”中的教程

现在我已经构建了几乎所有的应用程序，但是当我尝试在 android 中构建时，我得到了一个非常尴尬的结果。见图片：

![在此处输入图像描述](../Images/3482a09a40c173e9c320a4603505025b.png) ![在此处输入图像描述](../Images/bc8a4491dd1475b9806038821acc03f2.png) ![在此处输入图像描述](../Images/48dc5b14c0473399bd3c71793187440a.png)

我应该在配置中更改什么才能正确显示？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:45:46.160

配置没有什么可改变的。您需要为不同的设备分辨率提供不同的资源（如 iPhone 的视网膜和非视网膜图片，Android 也有不同的分辨率和尺寸）。查看Titanium 文档的[用户界面基础知识。此外，对于所有尺寸（高度、宽度、顶部、左侧等），您应该始终使用“dp”（与设备无关的像素）。](http://docs.appcelerator.com/titanium/latest/#!/guide/User_Interface_Fundamentals)然后 Titanium 会重新计算当前设备的大小。

```
Ti.UI.createView({
  height: '20 dp',
  width: '20 dp',
  left: '20 dp'
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:30:59.587

在您的 tiApp.xml 文件中添加以下内容

```
<android xmlns:android="http://schemas.android.com/apk/res/android">
  <manifest>
   <supports-screens android:anyDensity="false"/>
  </manifest>
 </android> 
```

这基本上会根据使用的 android 设备对它们进行缩放，因为 android 设备具有不同的分辨率。请参阅[Android 布局的默认值](http://developer.appcelerator.com/blog/2011/06/new-defaults-for-android-layouts-in-1-7.html)。我使用它，发现它甚至可以在平板电脑上使用不同的分辨率

# facebook - Facebook 登录 - php sdk - 概率

> ID：15598559
> 
> 赞同：0
> 
> 时间：2013-03-24T12:40:12.927
> 
> 标签：facebook, login

我对 facebook 登录一团糟。代码如下。[您可以在http://beta.jokesnfunnypics.com/login](http://beta.jokesnfunnypics.com/login)查看输出。在范围内，我以电子邮件的形式提供，但是当我单击链接并重定向到 facebook 时，它说该应用程序只要求基本权限。此外，我已经将 redirect_uri 提到为[http://beta.jokesnfunnypics.com/add](http://beta.jokesnfunnypics.com/add)，但我只被重定向到同一页面。再说一遍，在获得许可后，页面上也没有显示任何信息。请帮我。我准备给任何给我正确代码的人几美元。

```
<?php 
//Application Configurations
$app_id     = "XXXXXXXXXX";
$app_secret = "XXXXXXXXXXXXX";
$site_url   = "http://www.beta.jokesnfunnypics.com/add";

try{
        include_once "src/facebook.php";
}catch(Exception $e){
        error_log($e);
}
// Create our application instance
$facebook = new Facebook(array(
    'appId'     => $app_id,
'secret'    => $app_secret,
));

// Get User ID
$user = $facebook->getUser();

if($user){
try{
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
}catch(FacebookApiException $e){
    error_log($e);
    $user = NULL;
}

}

if($user){
    // Get logout URL
$logoutUrl = $facebook->getLogoutUrl();
}else{
// Get login URL
$loginUrl = $facebook->getLoginUrl(array(
    'scope'     => 'email',
    'redirect_uri'  => $site_url,
    ));
}

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
}

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
    <title>php-sdk</title>
  </head>
  <body>
    <h1>php-sdk</h1>

    <?php if ($user): ?>

      <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php else: ?>
      <div>
        Login using OAuth 2.0 handled by the PHP SDK:
        <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
      </div>
    <?php endif ?>

    <h3>PHP Session</h3>
    <pre><?php print_r($_SESSION); ?></pre>

    <?php if ($user): ?>
  <h3>You</h3>
$_SESSION['user']="abc;
  <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

  <h3>Your User Object (/me)</h3>
  <pre><?php print_r($user_profile); ?></pre>
<?php else: ?>
  <strong><em>You are not Connected.</em></strong>
<?php endif ?>

<h3>Public profile of Naitik</h3>
<img src="https://graph.facebook.com/naitik/picture">
<?php echo $naitik['name']; ?>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T07:29:20.097

从代码来看，$loginUrl 变量被定义了 2 次，scope 和 redirect_uri 在第二次中丢失。尝试从您的代码中删除这些行

```
<?php 
$app_id     = "XXXXXXXXXX";
$app_secret = "XXXXXXXXXXXXX";
$site_url   = "http://www.beta.jokesnfunnypics.com/add";

try{
    include_once "src/facebook.php";
 }catch(Exception $e){
   error_log($e);
 }
// Create our application instance
$facebook = new Facebook(array(
'appId'     => $app_id,
'secret'    => $app_secret,
));

// Get User ID
$user = $facebook->getUser();

if($user){
try{
// Proceed knowing you have a logged in user who's authenticated.
$user_profile = $facebook->api('/me');
}catch(FacebookApiException $e){
error_log($e);
$user = NULL;
}

}

if($user){
// Get logout URL
$logoutUrl = $facebook->getLogoutUrl();
}else{
// Get login URL
$loginUrl = $facebook->getLoginUrl(array(
'scope'     => 'email',
'redirect_uri'  => $site_url,
));
}
?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
 <head>
<title>php-sdk</title>
 </head>
 <body>
<h1>php-sdk</h1>

<?php if ($user): ?>

  <a href="<?php echo $logoutUrl; ?>">Logout</a>
<?php else: ?>
  <div>
    Login using OAuth 2.0 handled by the PHP SDK:
    <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
  </div>
<?php endif ?>

<h3>PHP Session</h3>
 <pre><?php print_r($_SESSION); ?></pre>

 <?php if ($user): ?>
  <h3>You</h3>
 $_SESSION['user']="abc";
 <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">
 <h3>Your User Object (/me)</h3>
 <pre><?php print_r($user_profile); ?></pre>
 <?php else: ?>
 <strong><em>You are not Connected.</em></strong>
 <?php endif ?>

  <h3>Public profile of Naitik</h3>
  <img src="https://graph.facebook.com/naitik/picture">
  <?php echo $naitik['name']; ?>
  </body>
  </html> 
```

请参阅这些教程。

[使用 PHP SDK 登录 Facebook](http://www.idiotminds.com/login-with-facebook-using-php-sdk/ "使用 PHP SDK 登录 Facebook")

[使用 PHP 登录 facebook（演示和下载）](http://www.krizna.com/general/login-with-facebook-using-php "使用 PHP 登录 facebook（演示和下载）")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:13:22.630

好吧，通常我不使用 php sdk 来生成我的登录 url，而是手动执行，尝试更改此行：

```
<a href="<?php echo $loginUrl; ?>">Login with Facebook</a> 
```

对此：

```
<a href="https://www.facebook.com/dialog/oauth?client_id=YOUR_APP_ID&redirect_uri=http://beta.jokesnfunnypics.com/add&scope=email">Login with Facebook</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-23T09:02:18.193

PHP 中的正确代码 - 1 种形式的 3 步 - 由 iZend - Web 引擎解释，包括 Facebook 上的配置：[http](http://www.izend.org/en/identification-by-facebook) ://www.izend.org/en/identification-by-facebook 。

1.  使用 SDK 打开与 Facebook 的连接。
2.  获取 Connect with Facebook 按钮的 URL。
3.  检索已连接用户的电子邮件地址（以及注册表单中的名字和姓氏等其他信息）。

# java - 如何模拟一个完整的方法？

> ID：15598560
> 
> 赞同：3
> 
> 时间：2013-03-24T12:40:14.293
> 
> 标签：java, junit, mocking

可以模拟一个完整的方法吗？或者我是否必须在该方法中模拟每个服务调用？

这是一个（愚蠢的）示例：

```
class Foo {
   void update() {
      service1.do();
      service2.do();
      //...
   }
}

class Bar extends Foo {

   void save() {
      super.update();
      // doSometing that I want to test.
   }
} 
```

我想测试 Bar.save() ，并且我想模拟 super.update() 中的所有内容，而不必模拟每个服务本身。那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T12:56:07.180

Your Bar class is-a Foo. Bar has inherited update method from Foo. So you shouldn't mock the method from the class under test. It is much nicer to choose one of this:

*   Consider using composition, then it would be natural way to mock it.
*   Inherit from FooTest. You have tests for Foo, right? You have @Before setup which mock all services there. Reuse it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T12:46:41.177

在您的情况下，Bar 似乎扩展了 Foo。

因此，使用框架模拟它更加困难，但您可以在测试中覆盖 update() ：

```
Bar testBar = new Bar() {
@Override
  void update() {
  // do nothing
  }
}

assertSomething(bar.save()); 
```

但是...@smas 是对的，需要这样做是一种代码味道，这表明您应该将 is-a 分解为 has-a 关系，然后嘲笑将变得轻而易举：

```
class Bar {

  private Foo foo;

  public Bar(Foo foo) {
    this.foo = foo;
  }

  void save() {
    foo.update();
  }

} 
```

你的测试：

```
Bar bar = new Bar(mock(Foo));

assertSomething(bar.update()); 
```

# jquery-ui - 在选择列表的开始/结束处禁用下一个/上一个

> ID：15598564
> 
> 赞同：0
> 
> 时间：2013-03-24T12:40:23.473
> 
> 标签：jquery-ui

我希望能够在页面加载时禁用上一个和下一个按钮。然后，当我选择第一个选项以禁用上一个按钮时，以及当我选择最后一个选项以禁用下一个按钮时。When an option between the first and last is selected; 应该启用下一个和上一个按钮。

```
$(文档).ready(函数() {
    $(".nextbutton").button({ disabled: true });

```
$('.dropdown').change(function() {
    if (($('.dropdown').val() == 0) || ($('.dropdown').val() ==8)) {
      $(".nextbutton").button({ disabled: true });
    } else {
      $(".nextbutton").button({ disabled: false });
    }
}); 
```

$(".prevbutton").button({ disabled: true });

$('.dropdown').change(function() {
    if ($('.dropdown').val() < 2) {
      $(".prevbutton").button({ disabled: true });
    } else {
      $(".prevbutton").button({ disabled: false });
    }
}); 
```

当我从下拉列表中进行选择时，它在我的代码中有效，但是当我选择选项 2 并单击最后一个选项旁边的按钮时，它不起作用。[我的小提琴演示](http://jsfiddle.net/Godfather/49zdR/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:07:11.930

问题是您的按钮没有触发下拉菜单中的更改事件（您可以在其中设置按钮的禁用/启用状态）。

我已经修改了您的 JavaScript，以便“下一个”和“上一个”按钮触发下拉菜单的“更改”事件；并稍微修改了“更改”事件中的代码，以说明您尝试创建的行为。

[您可以在此处](http://jsfiddle.net/49zdR/13/)的 JSFiddle 中使用它

下面的代码：

```
$(document).ready(function() {
    $(".nextbutton").button({ disabled: true });

    $('.dropdown').change(function() {
        if ($('.dropdown').val() == 0) {
            //If nothing is selected; only previous button is disabled
            $(".prevbutton").button({ disabled: true });
        } else if ($('.dropdown').val() == 1) {
            //If the first option is selected; enabled the next button
            $(".prevbutton").button({ disabled: true });
            $(".nextbutton").button({ disabled: false });            
        } else if ($('.dropdown').val() == 8) {
            //If the last option is selected disable the next button
            $(".nextbutton").button({ disabled: true }); 
        } else {
            //Anywhere else we enable both buttons
            $(".nextbutton").button({ disabled: false });
            $(".prevbutton").button({ disabled: false });
        }
    });

    $(".prevbutton").button({ disabled: true });        
});

$("#next").click(function() {
  var nextElement = $('#mylist > option:selected').next('option');
  if (nextElement.length > 0) {
      $('#mylist > option:selected').removeAttr('selected').next('option').attr('selected', 'selected');
      //Trigger change to modify the status of the drop down/buttons
      $('.dropdown').trigger('change');      
  }
});

$("#prev").click(function() {
  var nextElement = $('#mylist > option:selected').prev('option');
  if (nextElement.length > 0) {
      $('#mylist > option:selected').removeAttr('selected').prev('option').attr('selected', 'selected');
      //trigger change; to modify the status of the drop down/buttons
      $('.dropdown').trigger('change');        
  }  
}); 
```

# shell - 带和不带环境变量的 Shell 报价单

> ID：15598568
> 
> 赞同：0
> 
> 时间：2013-03-24T12:40:33.747
> 
> 标签：shell, environment-variables, quotes

这是问题：

> 当shell读取命令行时，双引号（“）之间的文本和单引号（'）之间的文本有什么区别？
> 
> 您需要考虑有环境变量和没有环境变量的两种情况。

我似乎找不到区别，对我来说这两种情况的使用方式相同。

我对硬引号和软引号有点了解，但这让我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:52:21.133

这个问题措辞不好。它似乎指的是一般的变量，而不是试图区分“shell变量”和“环境变量”（即标记为导出到子进程的shell变量）。如果这是真的，那么正确的答案当然是双引号字符串允许参数扩展，而单引号字符串不允许。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:47:39.057

双引号通常用于可以提取 Shell 变量值的地方。例子：

```
my_name="prabhu"
echo "printing $my_name" 
```

输出：打印 prabhu

单引号不打印变量的值，而是打印给定的内容。例子：

```
my_name="prabhu"
echo 'printing $my_name' 
```

输出：打印 $my_name

# android - 结果的活动不起作用

> ID：15598577
> 
> 赞同：-2
> 
> 时间：2013-03-24T12:41:59.160
> 
> 标签：android, android-activity

我们有 3 个类 A、B、C。A 类调用 B 类`startActivityForResult`以从中获取数据。它返回后取决于从B类中检索到的数据，我们是否会去C类获取数据给A类。这将在一个`onListItemClick`方法中完成。下面的代码不起作用，任何人都可以说出问题所在吗？

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    Cursor note = mDbHelper.fetchNote(id);
    startManagingCursor(note);
    mpass= note.getString(note.getColumnIndexOrThrow(NotesDbAdapter.KEY_PASS));
    theid = id
    if(mpass !=null) {
        Intent ps = new Intent(this, EnterPass.class); 
        startActivityForResult(ps,2);
    }
    else {
        Intent i = new Intent(this, NoteEdit.class);
        i.putExtra(NotesDbAdapter.KEY_ROWID, id);

        startActivityForResult(i, 1);}
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
        super.onActivityResult(requestCode, resultCode, intent);

        if(requestCode==2) { 
            if(null!=intent) {
                message=intent.getStringExtra("MESSAGE"); 
                if (mpass == message) { 
                    Intent i = new Intent(this, NoteEdit.class);
                    i.putExtra(NotesDbAdapter.KEY_ROWID, theid);
                    startActivityForResult(i, 1);
                }
            }
            else 
        }
        if(requestCode==1) {
            if (resultCode == RESULT_OK)
                fillData();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:51:33.197

现在这个答案将出现在 Mono for Android 中，但它仍然适用于常规 Android。

我创建了 3 个非常简单的活动。`ActivityA`,`ActivityB`和`ActivityC`.

在`ActivityA`我开始`ActivityB`调用：

```
var intent = new Intent(this, typeof (ActivityB));
intent.PutExtra("RowId", rowId);
StartActivityForResult(intent, 1); 
```

`rowId`列表的位置在哪里。您可以通过将更多内容放入`Intent`.

在其中`ActivityB`，您可以获取所有这些信息并使用它做任何您想做的事情：

```
var data = Intent.GetStringExtra("RowId");
var textView = FindViewById<TextView>(Resource.Id.textView1);
textView.Text = data; 
```

这里我只是把它放在 a`TextView`中来显示`rowId`传递的 from `ActivityA`。然后，当我想`ActivityB`用​​一些数据返回时`ActivityA`，我会：

```
var result = new Intent();
result.PutExtra("ActivityBResult", "myResult");
SetResult(Result.Ok, result);
Finish(); 
```

这些数据可以在我开始时设置`ActivityA`的`OnActivityResult`方法look in中`case 1`获取。然后我开始：`RequestCode``StartActivityForResult``ActivityB``ActivityC`

```
protected override void OnActivityResult(int requestCode, Result resultCode, Intent data)
{
    base.OnActivityResult(requestCode, resultCode, data);
    if (resultCode != Result.Ok) return;
    switch (requestCode)
    {
        case 1:
            {
                var activityBData = data.GetStringExtra("ActivityBResult");
                _textView1.Text = activityBData;

                //Some logic here based on data from ActivityB

                var intent = new Intent(this, typeof(ActivityC));
                intent.PutExtra("ActivityBResult", activityBData);
                StartActivityForResult(intent, 2);
            }
            break;
        case 2:
            {
                var activityCData = data.GetStringExtra("ActivityCResult");
                _textView2.Text = activityCData;
            }
            break;
    }
} 
```

`ActivityB`以与启动相同的方式`ActivityC`启动。`ActivityC`与我返回数据的方式相同`ActivityB`：

```
var result = new Intent();
result.PutExtra("ActivityCResult", "some result");
SetResult(Result.Ok, result);
Finish(); 
```

哪个返回并跳入上面`case 2`的`switch`。`OnActivityResult`

# sublimetext2 - 如何在 Sublime Text 中选择具有多个光标的每一行？

> ID：15598584
> 
> 赞同：181
> 
> 时间：2013-03-24T12:42:41.367
> 
> 标签：sublimetext2, sublimetext

在 Sublime Text 2 中，是否可以立即选择每隔一行（或奇数/偶数行）并在这些行上放置多个光标？

谢谢。

* * *

## 回答 #1

> 赞同：436
> 
> 时间：2013-04-29T07:52:13.467

1.  查找：`Ctrl`+`F`
2.  如果正则表达式尚未启用，请启用它们：`Alt`+`R`
3.  输入表达式`.*\n.*\n`
4.  查找所有：`Alt`+`Enter`
5.  按向左箭头删除选择，只留下光标：`←</kbd>`
6.  您现在在每条奇数行的开头都有一个光标。如果您想要偶数行，请按下：`↓</kbd>`
7.  根据文件的不同，文件底部可能缺少一个光标。使用鼠标（该死！）滚动到底部，按住`Ctrl`，然后单击缺少的光标应添加的位置。

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2013-03-24T12:47:32.537

你可以轻松做到：

*   选择所有行或整个文档`Ctrl`+`A`
*   添加多个选择器：`Ctrl`++ （在 Mac 中：Command `Shift`+ `L`Shift + L）

编辑 ：

*   或者使用[出色的 Joe Daley 方法](https://stackoverflow.com/a/16273692/1238019)来`(.*(\n|$)){2}`表达

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-06-03T08:57:20.440

我正在寻找一种在崇高中选择替代行的方法。

感谢 Joe Daley 提供了一个非常好的答案。虽然我意识到，如果你使用正则表达式，如果文件末尾没有换行符，它不会选择文件中的最后一行。

我想改进该答案，但目前我似乎没有足够的声誉来评论上述答案。

您可以在打开正则表达式的情况下使用以下搜索字符串，然后按 alt+enter。随后是一个左箭头。这会将每个光标放在交替行上（与 Joe Daley 解释的步骤相同）

```
^.*\n.*$ 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-24T17:30:52.093

您可以尝试使用插件：`Tools/New Plugin...`

```
import sublime_plugin

class ExpandSelectionToOtherLinesCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        self.view.window().run_command("expand_selection", {"to": "line"})
        start_region = self.view.sel()[0]
        self.view.window().run_command("select_all")
        self.view.sel().subtract(start_region) 
```

将此文件保存在您的`Packages/User`.

然后，为该插件添加键绑定：

```
{ "keys": ["super+alt+l"], "command": "expand_selection_to_other_lines" } 
```

此命令将选择所有其他行。当您选择了其他行时，您可以使用`Split selection into lines`命令（在 Mac 上是`Ctrl`++ 、`Shift`++ ） 。`L``Cmd``Shift``L`

如果你想在一个快捷方式中拥有所有东西，你可以像这样修改插件：

```
import sublime_plugin

class ExpandSelectionToOtherLinesCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        self.view.window().run_command("expand_selection", {"to": "line"})
        start_region = self.view.sel()[0]
        self.view.window().run_command("select_all")
        self.view.sel().subtract(start_region)
        self.view.window().run_command("split_selection_into_lines")
        self.view.window().run_command("move", {"by": "characters", "forward": False}) 
```

最后一行只是删除选择，在所选行的开头留下多个光标。

# c++ - 访问 HTML5 来自 NaCl 代码

> ID：15598591
> 
> 赞同：2
> 
> 时间：2013-03-24T12:43:22.960
> 
> 标签：c++, google-chrome, html5-canvas, google-nativeclient

我有兴趣将我的 HTML5 Canvas / JavaScript 游戏移植到 NaCl / C++，但我找不到任何好的 NaCl 示例源代码访问画布。有人可以指点我几个样品吗？请注意，我只对标准 2D 画布感兴趣，不需要复杂的 3D / OpenGL 东西。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T23:34:08.013

NaCL 不使用 HTML5 API，但有自己的称为*Pepper*的 API 子系统。

它具有 Graphics2D 类，您可能正在寻找它：

[https://developers.google.com/native-client/peppercpp/classpp_1_1_graphics2_d](https://developers.google.com/native-client/peppercpp/classpp_1_1_graphics2_d)

据我所知，NaCL 客户端无法访问页面元素，但可以在`<embed>`标签沙箱中操作：[https ://developers.google.com/native-client/devguide/coding/application-structure](https://developers.google.com/native-client/devguide/coding/application-structure)

与 NaCL 应用程序的通信通过 JavaScript`postMessage()`泵[https://developers.google.com/native-client/devguide/coding/message-system进行](https://developers.google.com/native-client/devguide/coding/message-system)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T23:32:21.493

我在这件事上找到了一个很好的代码源：http: [//gonativeclient.appspot.com/dev/demos/sdk_examples/](http://gonativeclient.appspot.com/dev/demos/sdk_examples/)

问题解决了！

# android - Google Maps API V2 '未能加载地图。无法联系 Google 服务器，即使我检查权限和密钥库

> ID：15598596
> 
> 赞同：8
> 
> 时间：2013-03-24T12:43:48.197
> 
> 标签：android, google-maps

我按照[指南](https://developers.google.com/maps/documentation/android/start?hl=zh-CN)创建谷歌地图示例，

但它总是抛出以下错误。

```
E/Google Maps Android API(27821): Failed to load map.  Could not contact Google servers. 
```

READ_GSERVICES 权限以及调试和发布密钥库已经过测试。他们也无法解决上述问题。谁能告诉我为什么它会抛出这个错误？

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.where.common"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />
    <permission
        android:name="com.where.common.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />
    <uses-permission android:name="com.where.common.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyDawEkMP7gdiB4nOOkXcdUcxSAvm0kfCmI" />
        <activity
            android:name="com.where.common.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

Java 文件：

```
package com.where.common;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

查看文件：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.MapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-06T15:24:28.433

在尝试新的 API KEY 之前不要忘记清除程序缓存 :) 因为即使您更改 API 密钥，Android 也会使用第一个 API 密钥。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T10:45:04.607

确保注意以下所有要点：

1) 启用了错误的服务。确保启用“ **Google Maps Android API v2** ”，而不是“ **Google Maps API v2** ”并重新生成 API 密钥。

2) 将以下元素添加到您的清单中。将**com.example.mapdemo**替换为您的应用程序的包名称。

3) 使用**正确的证书和密钥**。发布证书，当您在我的手机上运行应用程序时，它在调试期间将不起作用。您必须改用调试密钥库证书指纹。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-25T12:54:38.383

最后，我找到了为什么会发生这种情况。因为我写

```
<uses-permission android:name="android.permission.com.google.android.providers.gsf.permission.READ_GSERVICES" /> 
```

这是错误的。它应该是

```
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" /> 
```

在这里我感谢 Emil Adz 的耐心帮助我！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-24T12:45:36.717

您是否添加了所有其他需要的权限？

```
<permission android:name="com.eadesign.skygiraffefinalv2.permission.MAPS_RECEIVE" android:protectionLevel="signature"/>
<uses-permission android:name="com.eadesign.skygiraffefinalv2.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

**更新：**

**1.** 该`meta-data`部分应位于应用程序标签的最下方，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.where.common"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />
<permission
    android:name="com.where.common.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />
<uses-permission android:name="com.where.common.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.where.common.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

<meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyDawEkMP7gdiB4nOOkXcdUcxSAvm0kfCmI" />
</application> 
```

**2.**我看到的另一个问题是您为 API V8 开发应用程序，因此您必须`SupportMapFragment`为`FragmentActivity`您的`Activity`.

**3.**要让您的地图正常工作，您必须为 Google 许可信息添加许可活动。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-07-15T19:14:10.813

我有同样的问题。创建API密钥很多时间后，问题仍然存在。然后我简单地卸载应用程序并再次安装它。基本上应用程序在缓存中存储了错误的 api 密钥凭据。当我们重新运行应用程序时，它只是从缓存中加载它。所以再次安装应用程序解决了我的问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-27T17:23:47.590

你解决问题了吗？可能是这个问题->

启用了错误的服务。确保启用“Google Maps Android API v2”而不是“Google Maps API v2”并重新生成 API 密钥。（[https://stackoverflow.com/a/13805807/1300982](https://stackoverflow.com/a/13805807/1300982)）

如果这是问题所在，请不要忘记重新生成 API 密钥。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-20T18:47:06.013

我通过在布局类的片段中添加支持解决了这个问题：

```
class="com.google.android.gms.maps.SupportMapFragment" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-28T00:06:07.087

我遇到了与 user2204477 类似的问题。我有

```
<uses-permission android:name="com.google.android.providers.gsf.permissions.READ_GSERVICES" /> 
```

它应该是

```
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" /> 
```

注意错误的说“许可”，正确的说“许可”。我只是浪费了 5 个小时试图弄清楚这一点，哈哈。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-08-28T11:58:22.570

我有同样的问题！重装了50次。在删除之前，只需清除缓存并删除 Android 设备上应用程序的所有数据。有帮助，感谢各位大神...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-04T12:06:34.887

检查权限

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<permission
    android:name="com.packagename.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" /> 
```

# c++ - 如何为 a[x][y] 形式创建重载运算符？

> ID：15598597
> 
> 赞同：4
> 
> 时间：2013-03-24T12:43:49.087
> 
> 标签：c++, overloading

我有一个简单的 Matrix 类，我必须从格式中读取/写入`a[index1][index2]`。

例如：

```
Matrix a;

a[1][2] = 5; 
```

我将如何在 C++ 中实现它？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T12:47:26.140

这是一个很好的基本实现，它完全符合您的要求。

**更新（2013 年 9 月 26 日）：**我对代码进行了很多改进。

模板中的类型`T`只需要满足`std::vector`.

```
#include <vector>
#include <stdexcept>

template<typename T>
class matrix {
    class row {
        std::vector<T> values;
    public:
        row(std::size_t n)
            : values(n, T()) {}

        T& operator[] (std::size_t index) {
            if (index < values.size())
                return values[index];
            else
                throw std::domain_error("Matrix column index out of bounds.");
        }
        const T& operator[] (std::size_t index) const {
            if (index < values.size())
                return values[index];
            else
                throw std::domain_error("Matrix column index out of bounds.");
        }

        std::size_t size() const { return values.size(); }
    };

    std::vector<row> rows;

public:
    matrix(std::size_t m, std::size_t n)
        : rows(m, row(n)) {}

    row& operator[](std::size_t index) {
        if (index < rows.size())
            return rows[index];
        else
            throw std::domain_error("Matrix row index out of bounds.");
    }
    const row& operator[](std::size_t index) const {
        if (index < rows.size())
            return rows[index];
        else
            throw std::domain_error("Matrix row index out of bounds.");
    }

    std::size_t row_count() const { return rows.size(); }
    std::size_t col_count() const {
        if (rows.size()) return rows[0].size();
        return 0;
    }

    std::size_t size() const { return row_count() * col_count(); }
}; 
```

为方便起见，此助手可用于打印矩阵。

```
#include <ostream>

template<typename T>
std::ostream& operator <<(std::ostream& o, const matrix<T>& mat) {
    for (std::size_t i = 0u; i < mat.row_count(); ++i) {
        for (std::size_t j = 0u; j < mat.col_count(); ++j) {
            o << mat[i][j] << ' ';
        }
        o << '\n';
    }
    return o;
} 
```

只是为了你，一个使用例子来测试这个：

```
int main() {
    matrix<int> mat_0(2, 3);
    matrix<double> mat_1(1, 2);

    mat_0[0][0] = 2;
    mat_0[0][1] = 3;
    mat_0[0][2] = 4;
    mat_0[1][0] = 3;
    mat_0[1][1] = 7;
    mat_0[1][2] = 9;

    mat_1[0][0] = 0.43;
    mat_1[0][1] = 213.01;

    std::cout << mat_0;
    std::cout << '\n';
    std::cout << mat_1;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T12:47:58.120

您需要重载`Matrix::operator[]`，以便它返回一个表示矩阵中的列的辅助类。该助手类也应该重载`operator[]`以访问该列中的元素。

但是，以这种方式实现它可能过于复杂。相反，它可能更容易实现`operator()`并将两个索引作为参数：

```
int& Matrix::operator()(int i, int j)
{
  return internal_array[i][j];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T12:50:32.003

定义一个嵌套`class RowType`并`operator[]`返回一个 ref 到一个`Matrix`元素，并定义`Matrix` `operator []`一个 ref 来返回一个 ref 的元素`RowType`。

这是thema的变体（围绕第一个答案）。我只是相信你不应该使用 new-delete.. 啊，和一个模板，使用 int、double、complex、（string！？）等。这不是一个完整的实现，我没有调试它。这只是一个想法。

```
#include <vector>

template <typename Num>
class Matrix {
   public:
    class RowType 
    { public:
       RowType () { }
       RowType (unsigned int columnCount):values(columnCount,Num()) {}
             int& operator[](unsigned int index)     {return values[index];}
       const int& operator[](unsigned int index)const{return values[index];}

       std::vector<Num> values;
    };

    Matrix() {  }
    Matrix(unsigned int rowCount, unsigned int columnCount)
              :rows(rowCount, MatrixRow<Num>(columnCount) )  {}
          RowType& operator[](unsigned int index)     {return rows[index]);}
    const RowType& operator[](unsigned int index)const{return rows[index]);}

  private:  std::vector<RowType<Num>> rows;
};

....
Matrix<int> a(10,10);
a[9][9]=1; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T12:48:39.397

您可以创建一个 1d Matrix 类，例如`Matrix1D`并重载其`[]`运算符以使您可以访问特定索引处的值。

然后，您可以创建一个 2d Matrix 类，例如`Matrix2D`并重载其`[]`运算符以使您可以访问其中包含的`Matrix1D`类之一。

这样你就可以从`a`( `Matrix2D`) 转换到`Matrix1D`with `[]`，然后转换到 2nd 的值`[]`。

# notepad++ - Notepad ++如何在每一行附加不同的东西

> ID：15598599
> 
> 赞同：0
> 
> 时间：2013-03-24T12:44:04.240
> 
> 标签：notepad++, text-editor

好的，我会尽量具体。我遇到了一个非常独特的问题。

所以假设我在记事本++中有1000行。我们会说代码行。还可以说每一行如下所示。将以此为例：

```
<a href="" class="note has_notes" title="(1789-1797)" data-note="">
<a href="" class="note has_notes" title="(1797-1801)" data-note="">
<a href="" class="note has_notes" title="1801-1809)" data-note="">
<a href="" class="note has_notes" title="(1809-1817)" data-note=""> 
```

我知道如何在这些行中附加或添加数据前缀。（我知道如何在之前和之后添加代码）

这些行并不完整。在每一行的末尾，我需要添加“一些东西”。**然而**，每个“东西”都是不同的。**但是**每个“东西”都与每一行代码都井井有条。

例子：

```
George Washington</a>
John Adams</a>
Thomas Jefferson</a>
James Madison </a> 
```

假设我有一份总统名单。从第一个到最后一个顺序。我将它们按该顺序复制到我的剪贴板，因此当我粘贴它们时，它们也按该顺序粘贴。现在上面的前 4 行代码（带日期）与总统的顺序相同。我需要能够复制粘贴，并且每个总统都以相应的顺序附加到每行的末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:57:18.977

您可以下载[用于 win32 的 GNU 实用程序](http://sourceforge.net/projects/unxutils/?source=dlp)。然后只需提取它。它是 Windows 移植工具的集合。非常便利。

然后`paste`从那里使用该程序。你可以在

```
extracted_folder\usr\local\wbin\paste.exe 
```

您可以从 Windows 命令提示符使用它。
逐行合并两个文件

```
path_to\paste.exe file1.txt file2.txt > merged.txt 
```

用分隔符 ';' 合并三个文件

```
path_to\paste.exe -d ";" file1.txt file2.txt file3.txt > merged.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:49:02.350

记事本可以做的不是真正的编辑。这似乎是一个简单的合并操作，网络搜索“合并两个文件”应该提供很多可能性。我能想到的大多数都需要一些编程技能。您知道或可以使用哪些编程语言？

或者，您可以将一个文件粘贴到电子表格的一列中，将另一个文件粘贴到相邻的列中，然后将电子表格保存到某种形式的文本文件中。

# c++ - 我应该什么时候使用 std::bind？

> ID：15598607
> 
> 赞同：39
> 
> 时间：2013-03-24T12:44:40.277
> 
> 标签：c++, c++11, lambda, bind, standard-library

每次我需要使用`std::bind`时，我最终都会使用 lambda。那么我应该什么时候使用`std::bind`呢？我刚刚从一个代码库中删除了它，我发现 lambdas 总是比`std::bind`. 不是`std::bind`完全没有必要吗？将来不应该弃用吗？我什么时候应该更喜欢`std::bind`lambda 函数？（它与 lambdas 同时进入标准肯定是有原因的。）

我还注意到越来越多的人熟悉 lambda（所以他们知道 lambda 的作用）。但是，熟悉`std::bind`和的人要少得多`std::placeholders`。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-24T12:57:48.877

Here's something you can't do with a lambda:

```
std::unique_ptr<SomeType> ptr = ...;
return std::bind(&SomeType::Function, std::move(ptr), _1, _2); 
```

Lambdas can't capture move-only types; they can only capture values by copy or by lvalue reference. Though admittedly this is a temporary issue that's being actively resolved for C++14 ;)

"Simpler and clearer" is a matter of opinion. For simple binding cases, `bind` can take a lot less typing. `bind` also is focused solely on function binding, so if you see `std::bind`, you know what you're looking at. Whereas if you use a lambda, you have to look at the lambda implementation to be certain of what it does.

Lastly, C++ does not deprecate things just because some other feature can do what it does. `auto_ptr` was deprecated because it is *inherently dangerous* to use, and there is a non-dangerous alternative.

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-24T13:45:36.453

您可以创建使用 lambda 无法创建的多态对象`std::bind`，即`std::bind`可以使用不同的参数类型调用返回的调用包装器：

```
#include <functional>
#include <string>
#include <iostream>

struct Polly
{
  template<typename T, typename U>
    auto operator()(T t, U u) const -> decltype(t + u)
    { return t + u; }
};

int main()
{
  auto polly = std::bind(Polly(), std::placeholders::_1, "confusing");

  std::cout << polly(4) << polly(std::string(" this is ")) << std::endl;    
} 
```

我将其创建为一个[难题](http://advogato.org/person/redi/diary/255.html)，而不是一个好的代码示例，但它确实演示了多态调用包装器。

# php - 使用带有数组作为参数的 PHP 函数的 switch case 来更新 MySQL 数据库

> ID：15598610
> 
> 赞同：3
> 
> 时间：2013-03-24T12:45:22.677
> 
> 标签：php, mysql, arrays

**HTML 代码：-**

```
<form action="run.php" method="post">
Ambulance ID:<input type="text" name="amb_id">
Select the any of the point and submit:
<input type="radio" name="tposition" value="1">t1  (1 km away from the signal)
<input type="radio" name="tposition" value="2">t2 (before 500 mtrs point) 
<input type="radio" name="tposition" value="3">a3 (500 Mtr from signal)
<input type="radio" name="tposition" value="4">t3 (before signal, after 500 mtrs)
<input type="submit" value="Submit">
</form> 
```

**PHP代码： -**

```
<?php
$ambid = $_POST['amb_id'];
//lattitude array
$lat=array(13.092593,13.092781,13.093126,13.09344,13.093889,13.094349,13.094882,13.095485,13.096575);

//longitude array
$lon=array(77.586415,77.585009,77.583454,77.58251,77.581598,77.580793,77.580096,77.57946,77.578486);

//connect to the db
$con = mysql_connect('localhost', 'root','');
mysql_select_db('traffic', $con);

//check the radio button
  if (isset($_POST['tposition'])) {
     switch($_POST['tposition']) {
    case 1:
        updateDb($lat[0],$lon[0]);
        break;
    case 2:
        updateDb($lat[1],$lon[1]);
        break;

        }
}

    else { echo "Please select any of the tpositon radio button"; }

function updateDb($lati,$longi)
{
$query = "UPDATE emergency SET e_latitude=$lati,e_longitude=$longi WHERE amb_id=$ambid ";
$res= mysql_query($query) or die("Unable to update the latlong values because : " . mysql_error());

}
mysql_close($con);

?> 
```

运行上述脚本时，我收到错误消息“无法更新 latlong 值，因为：您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在 '' 行附近使用1" 。

但是，如果在每种情况下都使用相同的代码行而不是函数，则它可以工作。这是为什么 ？你能帮我提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:51:34.613

尝试这个

```
function updateDb($lati,$longi)
{
global $ambid;
$lati = mysql_real_escape_string($lati);
$longi = mysql_real_escape_string($longi);
$ambid = mysql_real_escape_string($ambid);
$query = "UPDATE emergency SET `e_latitude`='$lati',`e_longitude`='$longi' WHERE `amb_id`='$ambid' ";
$res= mysql_query($query) or die("Unable to update the latlong values because : " . mysql_error());

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:46:48.503

可能会发生此错误，因为您在插入`'`字符时没有使用`mysql_real_escape_string()`插入到 MySQL 查询中的值。我建议，你像这样封装你的价值观

```
$ambid = mysql_real_escape_string($_POST['amb_id']); 
```

但是，我根本不建议你使用 mysql_ 函数，因为它对 mysql 注入非常弱且易受攻击，就像你的代码一样。改为学习 PDO。

# java - 以编程方式从 Maven 中心检索依赖项的最简单的 Ivy 代码

> ID：15598612
> 
> 赞同：7
> 
> 时间：2013-03-24T12:45:26.500
> 
> 标签：java, ivy

我发现 Ivy API 非常复杂。

使用 Ivy 100% 以编程方式（没有 Ant，没有 Xml 文件，......）从 Maven Central 将工件检索到特定本地目录中的最简单的片段是什么？

举例来说，将 commons-logging:commons-logging:1.1:jar 检索到 /my/destination 中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-17T13:21:03.860

我一直致力于使用 Ivy 从 Maven 存储库中远程解析工件（和依赖项）。这是一个下载一个工件（无依赖项）的代码示例。

如果需要依赖项，则需要调整依赖项描述符。

一些注意事项：

1.  Ivy 使用缓存来存储以前检索到的工件及其“常春藤翻译”（您会在缓存中找到从 Maven 工件派生的 ivy 模块）

2.  一般概念是您以编程方式创建一个 Ivy 模块，该模块依赖于存储“伪模块”的 Maven 存储库（即，解析器实现了底层映射 - 我相信）。

3.  一般来说，如果你想知道如何以编程方式使用 Ivy，一个很好的起点是主类`org.apache.ivy.Main`。

```
 public static void main(String[] args) throws Exception {

        String groupId = "org.springframework";
        String artifactId = "spring-context-support";
        String version = "4.0.2.RELEASE";
        File   out = new File("out");

        // create an ivy instance
        IvySettings ivySettings = new IvySettings();
        ivySettings.setDefaultCache(new File("ivy/cache"));

        // use the biblio resolver, if you consider resolving 
        // POM declared dependencies
        IBiblioResolver br = new IBiblioResolver();
        br.setM2compatible(true);
        br.setUsepoms(true);
        br.setName("central");

        ivySettings.addResolver(br);
        ivySettings.setDefaultResolver(br.getName());

        Ivy ivy = Ivy.newInstance(ivySettings);

        // Step 1: you always need to resolve before you can retrieve
        //
        ResolveOptions ro = new ResolveOptions();
        // this seems to have no impact, if you resolve by module descriptor (in contrast to resolve by ModuleRevisionId)
        ro.setTransitive(true);
        // if set to false, nothing will be downloaded
        ro.setDownload(true);

        // 1st create an ivy module (this always(!) has a "default" configuration already)
        DefaultModuleDescriptor md = DefaultModuleDescriptor.newDefaultInstance(
            // give it some related name (so it can be cached)
            ModuleRevisionId.newInstance(
                groupId, 
                artifactId+"-envelope", 
                version
            )
        );

        // 2\. add dependencies for what we are really looking for
        ModuleRevisionId ri = ModuleRevisionId.newInstance(
            groupId, 
            artifactId,
            version
        );
        // don't go transitive here, if you want the single artifact
        DefaultDependencyDescriptor dd = new DefaultDependencyDescriptor(md, ri, false, false, false);

        // map to master to just get the code jar. See generated ivy module xmls from maven repo
        // on how configurations are mapped into ivy. Or check 
        // e.g. http://lightguard-jp.blogspot.de/2009/04/ivy-configurations-when-pulling-from.html
        dd.addDependencyConfiguration("default", "master");
        md.addDependency(dd);

        // now resolve
        ResolveReport rr = ivy.resolve(md,ro);
        if (rr.hasError()) {
            throw new RuntimeException(rr.getAllProblemMessages().toString());
        }

        // Step 2: retrieve
        ModuleDescriptor m = rr.getModuleDescriptor();

        ivy.retrieve(
            m.getModuleRevisionId(),
            out.getAbsolutePath()+"/[artifact](-[classifier]).[ext]",
            new RetrieveOptions()
                // this is from the envelop module
                .setConfs(new String[]{"default"})
        );
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-24T20:13:33.540

检索工件（及其依赖[项）的最简单方法是从命令行使用 ivy](http://ant.apache.org/ivy/history/latest-milestone/standalone.html)

```
java -jar ivy.jar -dependency commons-logging commons-logging 1.1 -retrieve "/my/destination/[artifact](-[classifier]).[ext]" 
```

这会将文件检索到目录“/my/destination”中。

其他示例：

*   [以编程方式使用 IVY 依赖项管理器](https://stackoverflow.com/questions/3955209/using-ivy-dependencies-manager-programmatically/3963721#3963721)
*   [使用 Maven 将依赖项下载到命令行上的目录](https://stackoverflow.com/questions/15450383/using-maven-to-download-dependencies-to-a-directory-on-the-command-line/15456621#comment21919979_15456621)

# c# - 在运行时从 DLL 加载类型

> ID：15598615
> 
> 赞同：0
> 
> 时间：2013-03-24T12:45:36.283
> 
> 标签：c#, reflection

我需要在运行时加载的程序集中执行一个方法。我要加载的程序集是包含接口实现的插件。

这是加载类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Reflection;

namespace Stub.Logic {
    public class DllReader {
        private static List<Type> connectionTypes = new List<Type>();

        public static void LoadConnectionTypes(string path) {
            DirectoryInfo dllDirectory = new DirectoryInfo(path);
            FileInfo[] dlls = dllDirectory.GetFiles("*.dll");
            foreach (FileInfo dllFileInfo in dlls) {
                Assembly assembly = Assembly.Load(dllFileInfo.FullName);
                connectionTypes.AddRange(assembly.GetTypes());
            }
        }

        //public static Connection GetConnection(string connectionTypeName) {
        //    return new Connection();
        //}
    }
} 
```

我收到此错误：

> 无法加载文件或程序集“..\Plugins\MqConnection.dll”或其依赖项之一。给定的程序集名称或代码库无效。（来自 HRESULT 的异常：0x80131047）

这是加载的程序集：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Linq;
using System.IO;
using Stub.Logic;

namespace MqConnection {

    public class MqConnection : Connection {
        // Stuff here...
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:52:22.613

[Assembly.Load](http://msdn.microsoft.com/en-us/library/x4cw969y.aspx)采用[Assembly name](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyname.aspx)，而不是文件路径。改用[Assebmly.LoadFrom](http://msdn.microsoft.com/en-us/library/1009fa28.aspx) _

# c# - 从枚举标志中获取所有设置的枚举名称

> ID：15598623
> 
> 赞同：2
> 
> 时间：2013-03-24T12:46:06.640
> 
> 标签：c#, enums, flags

如何将返回枚举值转换为其整数值？

我想将`_allVisibleDays`枚举中设置的所有标志作为整数值获取，就像：

`Tuesday`并`Wednesday`设置然后我想将这些名称转换为`DayOfWeek`枚举以获取整数值：

所以`Tuesday`返回我`2`而`Wednesday` `3`不是下面的枚举`2`。`4`

我在 SO 上找到了这种方法：

```
public IEnumerable<int> GetFlags()
{
   foreach (Enum value in Enum.GetValues(typeof(VisibleDayOfWeek)))
     if (_allVisibleDays.HasFlag(value))
       yield return (int) value;
} 
```

但我不能让它仅用于将枚举（上面的值）转换为整数的简单示例......

```
private VisibleDayOfWeek _allVisibleDays;

        [Flags]
        enum VisibleDayOfWeek : int
        {
            None = 0,
            Monday = 1, 
            Tuesday = 2,
            Wednesday = 4,
            Thursday = 8,
            Friday = 16,
            Saturday = 32,
            Sunday = 64
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:05:18.857

由于your`VisibleDayOfWeek`是`Flags`枚举，而[DayOfWeek](http://msdn.microsoft.com/en-ca/library/system.dayofweek%28v=vs.110%29.aspx)不是，因此两者之间没有直接对应的翻译（例如`VisibleDayOfWeek.Friday`是16，`DayOfWeek.Friday`而是5）。特别是因为这些只是一周中的几天，并且将来可能不会改变（我希望！）我认为最好的选择是编写一个带有检查的简单实用方法：

```
public IEnumerable<DayOfWeek> ConvertFromVisible(VisibleDayOfWeek visibleDay)
{
    if ((visibleDay & VisibleDayOfWeek.Monday) == VisibleDayOfWeek.Monday)
        yield return DayOfWeek.Monday;

    if ((visibleDay & VisibleDayOfWeek.Tuesday) == VisibleDayOfWeek.Tuesday)
        yield return DayOfWeek.Tuesday;

    if ((visibleDay & VisibleDayOfWeek.Wednesday) == VisibleDayOfWeek.Wednesday)
        yield return DayOfWeek.Wednesday;

    if ((visibleDay & VisibleDayOfWeek.Thursday) == VisibleDayOfWeek.Thursday)
        yield return DayOfWeek.Thursday;

    if ((visibleDay & VisibleDayOfWeek.Friday) == VisibleDayOfWeek.Friday)
        yield return DayOfWeek.Friday;

    if ((visibleDay & VisibleDayOfWeek.Saturday) == VisibleDayOfWeek.Saturday)
        yield return DayOfWeek.Saturday;

    if ((visibleDay & VisibleDayOfWeek.Sunday) == VisibleDayOfWeek.Sunday)
        yield return DayOfWeek.Sunday;
} 
```

这样做的好处是自动返回`DayOfWeek`枚举，而不是稍后要转换的整数。

此外，由于这会跳过反射，因此它应该更高效，并且更能抵抗值的变化（尽管我怀疑这无论如何都会发生）。

编辑：如果你想调整他们返回的顺序（比如你想从周日开始到周六），你可以轻松地改变上面行的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:05:34.963

您可以遍历`Enum`数组并检查索引。

```
public int GetEnumIndex(VisibleDayOfWeek day, bool ToBeConvertedToDoW)
{
     var allValues = Enum.GetValues(typeof(VisibleDayOfWeek));
     for (int i = 0; i <  allValues.Length ; i++)
     {
         if ((VisibleDayOfWeek)allValues.GetValue(i) == day)
         {
             //if you plan to convert to a DayOfWeek, this will return the
             //index for the DoW enum
             if(ToBeConvertedToDoW)
                return (i % 7);
             else //else return the actual index from VisibleDayOfWeek enum
                return i;
         }
     }
     return -1;
 } 
```

# python - python pandas OLS.predict，正确的签名是什么？

> ID：15598625
> 
> 赞同：1
> 
> 时间：2013-03-24T12:46:41.883
> 
> 标签：python, model, pandas, regression, predict

我有一个熊猫 OLS 模型，

```
mid_lag_lead_df_model 
```

> -------------------------回归分析总结------------------------ ----
> 
> 公式：Y ~ <1> + <2> + <3> +
> 
> 观察次数：56 自由度数：4
> 
> R 平方：0.2864 调整 R 平方：0.2452
> 
> 有效值：0.0001
> 
> F-stat (3, 52): 6.9554, p-value: 0.0005
> 
> 自由度：模型 3，残差 52
> 
> ------------------------估计系数总结------------------------ -
> 
> ```
>  Variable       Coef    Std Err     t-stat    p-value    CI 2.5%   CI 97.5% 
> ```
> 
> * * *
> 
> ```
>  1     0.0527     0.0268       1.97     0.0547     0.0001     0.1053
>         2    -0.0009     0.0269      -0.03     0.9730    -0.0537     0.0519
>         3     0.0980     0.0268       3.66     0.0006     0.0455     0.1505
> intercept     0.0000     0.0000       1.59     0.1184    -0.0000     0.0000 
> ```
> 
> ----------------------总结结束-------------- ------------------

如果我需要预测，`y`值来自`[0.000207, -0.000361, -0.000091]`

```
mid_lag_lead_df_model.predict 
```

上面的签名应该使用`predict`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:22:41.600

您可以这样做来计算`y`您的自变量向量：

```
mid_lag_lead_df_model.beta.dot(pandas.Series([0.000207, -0.000361, -0.000091])) 
```

# c# - P/Invoke 是否执行 DLL 然后将其关闭？

> ID：15598636
> 
> 赞同：7
> 
> 时间：2013-03-24T12:47:41.227
> 
> 标签：c#, c++, .net, dll, pinvoke

如果我使用 C# 来 P/Invoke 某个 DLL，实际的 C++ DLL 会在调用期间运行然后被关闭，从而破坏所有使用的内存吗？还是 .NET 会负责 C++ DLL 在非托管“堆”中使用的内存，并在我每次调用静态函数时将指向这些对象的指针指向 C++ DLL？

当我需要某个 C++ 项目使其内存持久化时，我是否应该创建一个 ActiveX/COM 服务器以使其内存持久化，并且能够从 C# 调用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T12:50:33.723

> 如果我使用 C# 来 P/Invoke 某个 DLL，实际的 C++ DLL 会在调用期间运行然后被关闭，从而破坏所有使用的内存吗？

不会。一旦加载了 DLL，它将保持加载状态。DLL 的生命周期与函数调用**无关。**这意味着 DLL 中具有静态存储的变量在初始 p/invoke 调用之后仍然存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T12:51:31.753

如果您从 C++-DLL 创建一个对象，它实际上会一直存在，直到您删除它或更确切地说是处置它。由于您需要手动删除非托管对象，它将保留。

# vhdl - 与选择相关的 VHDL 错误

> ID：15598637
> 
> 赞同：-1
> 
> 时间：2013-03-24T12:47:52.583
> 
> 标签：vhdl

我正在制作 N 到 2^N 解码器并面临一些错误。请帮帮我。

*   `Naddr`- 地址位数整数

*   `addr`- 地址位`std_logic_vector`

*   `fbd`- (integer, `std_logic_vector`) - 从二进制转换为十进制的函数

*   `fpower`- (整数) - 提供 2^N 的函数

代码：

```
Architecture deco of Deco is   
begin  

process(addr, En)  
  variable a : integer;  
begin  
  a := fbd(Naddr, addr);  
  if(En = '1') then  
    q <= (a => '1', others => '0'); --- error1           
  elsif(En = '0') then  
    q <= (fpower(Naddr)-1 downto 0 => '0');  
  end if;  
end process;  

end deco; 
```

我得到的错误是：

> 1) 错误 (10318)：Deco.vhd(33) 处的 VHDL 聚合错误：选择必须保持不变 (error1)
> 
> 2) 错误：无法详细说明顶级用户层次结构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:37:03.190

这是正确的 VHDL（假设 Naddr 是常数）并且可以在仿真中工作。（这不是*好的*VHDL，但那是另一回事）

但是，当前的综合工具无法将其转换为工作硬件：考虑您想将一位连接到“1”，但在电路完成并通电之前您不知道那是哪一位……这样的一块硬件长什么样？使用简单的逻辑元素在纸上画出来。

放弃？

现在设计一个简单的电路，可以根据每个位的“if”条件将任何位设置为“1”......

```
process(addr, En)
variable a : integer;
begin
    a := fbd(Naddr, addr);  
    if En = '1' then  
       q <= (others => '0');
       for i in q'range loop
          if i = a then
             q(i) <= '1';
          end if;
       end loop;
    end if;
end process; 
```

由于这一切都发生在一个进程中，因此这里只有一个用于 Q 的驱动程序，尽管事实上有多个分配给 Q。

您还必须了解**时钟进程**的好处，但不是在这个答案中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:34:39.123

在行中：

```
q <= (a => '1', others => '0'); --- error1 
```

假设 q 是一个位向量，并且在执行此语句时“a”的值为 4。那么您说的是使除第 4 位之外的所有位为 0。使“q[4] =1”。但是，VHDL 不允许将位的位置指定为变量。在编译时必须知道它的值。所以这可以是一个常数，也可以是一个通用参数，但不能是一个信号或变量。

您似乎正在像 C 编程一样接近 VHDL……使用日志、整数等来制作简单的解码器是个坏主意。请参阅[此](http://computer-programming-forum.com/42-vhdl/91040f71c27e047d.htm)链接以获取简单的 8 至 256 位解码器

# image - 图像在滑块中对齐

> ID：15598639
> 
> 赞同：0
> 
> 时间：2013-03-24T12:48:00.297
> 
> 标签：image, alignment

希望有人可以提供帮助。我是这类东西的业余爱好者，并且已经编辑了一个模板站点，我被派往我朋友想要建立的站点。我有一页上有一个滑块，744 x 495 的横向图像非常合适，当我尝试在其中添加纵向图像时，它会自动向左对齐，我需要它在中间。有什么建议么？该网站是[www.jaymcallister.co.uk](http://www.jaymcallister.co.uk)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:00:27.220

As far as I understand your new image should have the same size and you need to add some additonal black "space" on left like here: [http://www.jaymcallister.co.uk/images/01.jpg](http://www.jaymcallister.co.uk/images/01.jpg)

# date - Databene benerator：使用已经生成的日期，作为同一实体中另一个日期的最小值

> ID：15598645
> 
> 赞同：0
> 
> 时间：2013-03-24T12:48:41.470
> 
> 标签：date, data-generation, benerator

我有一个带有开始日期和结束日期的 RESERVATION 实体。我正在使用 benerator 生成测试数据。我想要的是使用 the`start date + 1 day`作为结束日期的最小值。事实证明，如何实现这一目标是困难的。这是生成标签的一部分，它使 benerator 抱怨。

```
<attribute name="START_DATE" type="date" min="2013-03-24" max="2013-03-30"    
     nullable="false"/>
<attribute name="END_DATE" type = "date" min="this.START_DATE + 1" max="2013-04-13" 
     nullable="false"/> 
```

那么如何使用生成的开始日期作为要生成的结束日期的最小值呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:43:37.450

Databene benerator 的作者 Volker bergmann 在我通过电子邮件向他发送问题时给了我一个答案。只需使用`TimeUtil`类和一些像这样的变量......

```
<attribute name="START_DATE" type="date" script="TimeUtil.today()" nullable="false"/>
<variable name="for_endDate" type="int" min="1" max="10" />
<attribute name="END_DATE" type = "date" script="TimeUtil.addDays(this.START_DATE,   
      for_endDate)"  nullable="false"/> 
```

并且您必须`TimeUtil`在 setup 标记之后的 xml 开头导入类

```
<import class="org.databene.commons.TimeUtil"/> 
```

# php - 不带“？”的页面 ID 在网址中

> ID：15598648
> 
> 赞同：0
> 
> 时间：2013-03-24T12:49:15.733
> 
> 标签：php, database, variables, url-routing

我见过一些网站，其中不同的页面是通过页面 id 访问的，而页面 id 不是通过 get 方法传递的。

所以像这样： [http](http://www.website.com/sitefolder/pageid/) ://www.website.com/sitefolder/pageid/ 我经常在其他网站上看到： [http ://www.website.com/index.php?id=12](http://www.website.com/index.php?id=12)

我知道示例 1 的不同页面存储在一个数据库中，而不是像它建议的那样存储在不同的文件夹中。

通常，如果您有正斜杠，这意味着您正在浏览不同的文件夹..

有人可以解释我如何创建正斜杠页面 id 指示器，而无需为不同的页面创建数百个不同的文件夹吗？

因此，只需“sitefolder”中的一个 php 页面，它通过页面 id 或页面名称或通过 URL 传递的 URL 别名来调整其内容，而不使用 '?id=12' 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:52:14.950

您可以使用启用的`.htaccess`规则来完成此操作，如下所示：`mod_rewrite`

```
RewriteEngine On
RewriteRule ^/([^/]+)$  index.php?id=$1 
```

这将重写`example.com/12`为`example.com/index.php?id=12`.

**编辑**：RegEx，细分：

*   `^`匹配行首
*   `/`匹配斜线
*   `([^/]+)`匹配并保存第一组不是斜杠的字符
*   `$`匹配行尾

在`RewriteRule`RegEx 的情况下，“行”表示 . 之后的任何内容`example.com`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:00:57.957

是的，您是对的，通常“/”表示转到下一个文件夹..但有时您也可以根据需要自定义 url 结构....

您需要为此启用 url 重写。这可以使用 .htaccess 规则来完成，例如

```
RewriteEngine On
RewriteRule ^([^/.]+)(/([^/.]+))?(/([^/.]+))?$ index.php?page=$1 [L,QSA] 
```

或者您可以拥有自己的自定义 mvc，在这种情况下，您可以修改为 url 以处理带有“/”的参数，例如

```
 $request_url = $_SERVER['REQUEST_URI'];        
       $url         =  str_replace(LOCAL_PATH,"",$request_url);        
       $parameters   = explode("/",$url);

       if($_SERVER['HTTP_HOST']!='localhost')
       {
         $total = count($parameters)-1;
         unset($parameters[0]);        
         unset($parameters[1]);
         unset($parameters[2]); 
       }       
       $slipt = array_chunk($parameters, 2);
       $response = array();
       foreach($slipt as $val)
       {
          if( isset($val[1]) )
            $response[$val[0]] = $val[1];
       }         
      return $response; 
```

这意味着让我们有 url`"http://domaintest/controller/method/page/1";`

那么这里的页面参数值将是 1

# javascript - IE 上的 Javascript parseInt 错误

> ID：15598654
> 
> 赞同：0
> 
> 时间：2013-03-24T12:49:42.500
> 
> 标签：javascript, html, internet-explorer

下面的代码不起作用`IE`，有人可以帮助我吗？

```
onclick="x.value=parseInt(b.value*d.value*c.value)+parseInt(a.value) 
```

在所有其他浏览器上，它似乎很好，可以进行计算并给出输出，但在 IE 上，无论我做什么，输出都保持为`0`值，下面是我更好地解决问题的完整表格：

```
<form id="mainselection">
        <h6>Transfer Fee Calculator</h6>    
<select name="a">
    <option value="0">Select</option>
    <option value="0">Dalaman</option>
    <option value="30">Bodrum</option>
</select>
<select name="b">
    <option value="0">Resort</option>
    <option value="10">Marmaris</option>
    <option value="12">Icmeler</option>
    <option value="18">Turunc</option>
</select>
<select name="c">
    <option value="0">Pax</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>  
</select>
<select name="d">
    <option value="1">One Way</option>
    <option value="2">Return</option>
</select>
<br />
<span class="total">Total:</span><output name="x" for="a b c ">0</output>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="currency">£</span>
<br />
<br />
<input type="button" value="Calculate" class="cal-but" onclick="x.value=parseInt(b.value*d.value*c.value)+parseInt(a.value)">
<input type="button" value="Book Now" class="book" onclick="window.location='reservation.html'"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:01:10.150

首先要说的是，这*不是*IE 错误。这与您使用非标准方式访问 Javascript 代码中的元素名称有关。

您遇到的问题是您将元素的`name`属性用作全局 Javascript 变量。这不是（也从来不是）推荐的做法。一些浏览器出于向后兼容的原因支持它，但这并不意味着它将在任何浏览器的未来版本中继续工作。它不是标准的，不应该使用。

直接在 Javascript 中访问单个元素的正确方法是使用`getElementsById()`方法。这将为您提供当前代码所没有的良好的跨浏览器兼容性。

**解决方案：**

*   第 1 步：`id='x'`在您的`name='x'`. 并对您当前按名称访问的任何其他元素执行相同操作

*   第 2 步：无论您在何处使用类似`x`元素名称的变量，请将变量名称替换为`document.getElementById('x')`.

    是的，它更啰嗦，但这是正确的做法。

这将为您解决问题。

# java - 如何在java中使用“ls *.c”命令？

> ID：15598657
> 
> 赞同：9
> 
> 时间：2013-03-24T12:50:04.177
> 
> 标签：java, linux, command-line, ls

我正在尝试在 java 中打印“*.C”文件

我使用下面的代码

```
public static void getFileList(){
    try
    {
        String lscmd = "ls *.c";
        Process p=Runtime.getRuntime().exec(lscmd);
        p.waitFor();
        BufferedReader reader=new BufferedReader(new InputStreamReader(p.getInputStream()));
        String line=reader.readLine();
        while(line!=null)
        {
            System.out.println(line);
            line=reader.readLine();
        }
    }
    catch(IOException e1) {
        System.out.println("Pblm found1.");
    }
    catch(InterruptedException e2) {
        System.out.println("Pblm found2.");
    }

    System.out.println("finished.");
} 
```

PS：-“ls”命令工作正常。当我在任何命令中使用“*”时，所有命令都不起作用。需要在java中的命令中替换“*”。

**更新**

谢谢你们的帮助。

现在我需要在 java 中的注释“ ls -d1 $PWD/** ”得到相同的结果。它将列出具有完整路径的所有目录名称。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T13:01:46.527

您可能会发现这更可靠：

```
Path dir = Paths.get("/path/to/directory");

try (DirectoryStream<Path> stream = Files.newDirectoryStream(dir, "*.c")) {
    for (Path file : stream) {
        // Do stuff with file
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T13:05:54.363

您需要执行“bash -c 'ls *.c'”形式的命令...因为 java`exec`方法不理解`'*'`扩展（globbing）。（“bash -c”形式确保使用 shell 来处理命令行。）

但是，您不能简单地将上述命令作为单个字符串提供给`Runtime.exec(...)`，因为`exec`也不理解拆分包含引号的命令字符串的正确方法。

因此，为了`exec`做正确的事，你需要做这样的事情：

```
 String lscmd = "ls *.c";
  Process p = Runtime.getRuntime().exec(new String[]{"bash", "-c", lscmd}); 
```

换句话说，您需要手动进行参数拆分...

* * *

需要注意的是，这个例子也可以通过使用`FileMatcher`执行“通配”并从结果中组装参数列表来实现。但是，如果您要做的不是跑步，那就很复杂了`ls`……而且 IMO 的复杂性是不合理的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T13:02:11.117

或者，您可以使用[`public File[] File.listFiles(FilenameFilter filter)`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#list%28java.io.FilenameFilter%29)

```
File[] files = dir.listFiles(new FilemaneFilter() {
  public boolean accept(File dir, String name) {
    return name.endsWith(".c");
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T12:52:34.983

由`*`外壳扩展。因此，要使用它将文件名扩展为 glob，您必须`ls`通过 shell 调用命令，例如：

 ~~~~```
String lscmd = " bash -c 'ls *.c' "; 
```~~ 

~~***编辑***~~

 ~~@Stephen 的好点，关于 exec 未能拆分命令。要执行`ls -d1 $PWD/*`你可以这样做：

```
String lscmd = "ls -d1 $PWD/*";
Process p = Runtime.getRuntime().exec(new String[]{"bash", "-c", lscmd}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T12:59:31.743

Java 方式是使用`FilenameFilter`. [我从这里](http://www.java-tips.org/java-se-tips/java.io/get-the-content-of-a-directory-with-a-filter.html)改编了一个代码示例：

```
import java.io.File;
import java.io.FilenameFilter;
public class Filter implements FilenameFilter {

  protected String pattern;

  public Filter (String str) {
    pattern = str;
  }

  public boolean accept (File dir, String name) {
    return name.toLowerCase().endsWith(pattern.toLowerCase());
  }

  public static void main (String args[]) {

    Filter nf = new Filter (".c");

    // current directory
    File dir = new File (".");
    String[] strs = dir.list(nf);

    for (int i = 0; i < strs.length; i++) {
      System.out.println (strs[i]);
    }
  }
} 
```

**更新：**

对于您的更新，您可以在每个文件上迭代 a`new File (".").listFiles();`和 issue 。`file.getAbsolutePath()`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-24T16:23:39.163

自 Java 7 以来列出文件的一个示例。

```
import java.io.IOException;
import java.nio.file.DirectoryStream;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
public class Main {
    public static void main(String[] args) {
        Path dir = Paths.get("/your/path/");
        try {
            DirectoryStream<Path> ds = Files.newDirectoryStream(dir, "*.{c}");
            for (Path entry: ds) {
                System.out.println(entry);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```~~~~

# ruby - Ruby 按数组中的列写入 CSV 文件？

> ID：15598658
> 
> 赞同：2
> 
> 时间：2013-03-24T12:50:13.143
> 
> 标签：ruby, arrays, csv

我想从几个数组生成一个 csv 文件。这是我的代码：

```
require 'csv'
CSV.open("csvfile.csv", "ab") do |csv|
csv << [array1]
csv << [array2]
csv << [array3]
end 
```

我需要这种输出格式：

```
array1,array2,array3
array1,array2,array3
array1,array2,array3
array1,array2,array3
array1,array2,array3 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:07:38.297

根据您的帖子，您的意思是array1，array2，array3存储表的3列的值，并且行索引由这些数组中值的索引标识？您可以先将列组合在一起，`transpose`对二维数组执行 a 操作，然后逐行写入 CSV 文件。

```
require 'csv'
table = [array1, array2, array3].transpose
CSV.open('csvfile.csv', 'ab') do |csv|
    table.each do |row|
        csv << row
    end
end 
```

你会得到一个这样的 csv 文件：

```
array1[0], array2[0], array3[0]
array1[1], array2[1], array3[1]
array1[2], array2[2], array3[2]
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:29:26.953

[`Enumerable#zip`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-zip)是并行遍历多个集合最常用的方法。

```
require 'csv'

CSV.open('csvfile.csv', 'ab') do |csv|
  array1.zip(array2,array3) { |row| csv << row }
end 
```

# android - 如何从短信打开应用程序

> ID：15598661
> 
> 赞同：0
> 
> 时间：2013-03-24T12:50:21.130
> 
> 标签：android, sms

有没有可能从 SMS中打开一个`Activity`via ？`Intent`我可以使用`autoLink`并以某种方式覆盖 URL 自动链接来打开我的应用程序或 GooglePlay 页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:54:24.857

您可以创建一个[BroadcastReceiver](https://stackoverflow.com/questions/4117701/android-sms-broadcast-receiver)来扫描传入 SMS 的关键字，或者检查发件人是否是特定号码。

如果您的任何检查匹配，您可以通过 Intent 启动 Activity。

但是，请记住，如果您每次收到 SMS 时都打开 Activity，用户可能不会很喜欢它。在大多数情况下，您实际上应该使用通知。

# hibernate - Hibernate 中抽象类的继承

> ID：15598663
> 
> 赞同：0
> 
> 时间：2013-03-24T12:50:25.690
> 
> 标签：hibernate, inheritance, annotations

我有以下情况，一篇文章可以有几种类型的内容（例如Text，Images，Sourcecode，...）。因此我设计了这个简单的类结构：

这是抽象**ArticleContent**类的来源：

```
@Entity
@Table( name = "ARTICLE_CONTENTS" )
@Inheritance( strategy = InheritanceType.TABLE_PER_CLASS )
public abstract class ArticleContent extends AbstractEntity {

  private Article article;

  @ManyToOne
  @JoinColumn( name = "ARTICLE_ID", nullable = false, updatable = false )
  public Article getArticle() {
    return article;
  }

  public void setArticle( Article article ) {
    this.article = article;
  }

  @Column( name = "CONTENT", columnDefinition = "TEXT", nullable = false )
  public abstract String getContent();

  public abstract void setContent( String content );

} 
```

`getContent()`and`setContent()`方法被标记为抽象，因为它们将返回实际显示的内容（例如纯文本、`<img src="..." />`...）。

我从**TextArticleContent**类的实现开始。这个类只是将内容存储在一个字符串中：

```
@Entity
@Table( name = "TEXT_ARTICLE_CONTENTS" )
@AttributeOverrides( { @AttributeOverride( name = "content", column = @Column( name = "CONTENT" ) ) } )
public class TextArticleContent extends ArticleContent {

  private String content;

  @Override
  public String getContent() {
    return content;
  }

  @Override
  public void setContent( String content ) {
    this.content = content;
  } 
```

}

这是我收到的错误输出：

```
Caused by: org.hibernate.MappingException:
Repeated column in mapping for entity: com.something.model.TextArticleContent column: 
  CONTENT (should be mapped with insert="false" update="false") 
```

尽管错误消息给了我一个建议（`should be mapped with insert="false" update="false"`），但老实说，当我刚开始使用 Hibernate 时，我不知道如何处理它。

**更新：解决** 方案这个问题的解决方案是我需要更改方法的`@Column`注释`getContent()`。正确的注释如下所示：

```
@Column( name = "CONTENT", columnDefinition = "TEXT", nullable = false, insertable = false, updatable = false )
public abstract String getContent(); 
```

我不得不添加**insertable**和**updatable**，这基本上意味着 Exception 中的提示并不完全正确。

此外，我需要更改抽象**ArticleContent**类的 InheritanceStrategy。正确的`@Inheritance`注释是：

```
@Inheritance( strategy = InheritanceType.SINGLE_TABLE ) 
```

出于美观的原因，现在可以将**TextArticleContent**`@Table`类中的注释替换为：

 **```
@DiscriminatorValue( "TEXT_ARTICLE_CONTENT" ) 
```

这会将**ARTICLE_CONTENTS**表中的鉴别器值更改为**TEXT_ARTICLE_CONTENT**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:02:17.117

尝试更改 ArticleContent

```
 @Column( name = "CONTENT", columnDefinition = "TEXT", nullable = false )
  public abstract String getContent(); 
```

至

```
 @Column( name = "CONTENT", columnDefinition = "TEXT", nullable = false,
insertable = false, updatable = false )
      public abstract String getContent(); 
```

**更新**。

改为可插入、可更新。**

# javascript - 带有 contains() 的 jquery 多个选择器

> ID：15598667
> 
> 赞同：0
> 
> 时间：2013-03-24T12:50:34.097
> 
> 标签：javascript, jquery, html, jquery-selectors

我在一个和一个额外的属性中有很多`<option>`s叫做`<select>``zip`

```
<SELECT id="city">
  <OPTION zip="AUC 1291 100005" value="1">City 1</OPTION>
  <OPTION zip=" 1295 100006" value="2">City 2</OPTION>
  <OPTION zip=" 1299 100008" value="3">City 3</OPTION>
</SELECT> 
```

现在我想选择 Text 或 ZIP 包含字符串值的选项，但以下代码不起作用。

```
var val = '1291'; //Zip code
var x = $('#city option:contains('+val+'), #city zip:contains('+val+')').val(); 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:10:45.800

如果要选择具有属性的元素，taht 值包含请求的字符串，则必须使用：

```
 var val = '1291'; //Zip code
  var x = $('#city option[zip*="' + val + '"]').val(); 
```

如前所述：[http ://api.jquery.com/attribute-contains-selector/](http://api.jquery.com/attribute-contains-selector/)

但正如人们所说，更好的方法是使用 HTML5`data-zip`属性而不是`zip`

（只是前缀`data-`）。

在这种情况下，您的选择器将是：

```
 var x = $('#city option[data-zip*="' + val + '"]').val(); 
```

希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T12:53:25.893

`contains`检查内部元素而不是属性，您应该使用以下内容：

```
$('#city option').filter(function(){
    return this.innerHTML.indexOf(val) > -1 || 
           $(this).attr('zip').indexOf(val) > -1;
}); 
```

请注意，这`zip`不是一个有效的 HTML 属性，最好使用它`data-zip`。

```
$('#city option').filter(function(){
    return this.innerHTML.indexOf(val) > -1 || 
           $(this).data('zip').indexOf(val) > -1;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:26:25.797

这是我的问题的答案。测试和工作:)

```
var x = $('#city option:contains('+val+'), #city [data-zip*='+val+']').val(); 
```

# python - 在 Python 3.3 中使用 Z3Py

> ID：15598669
> 
> 赞同：1
> 
> 时间：2013-03-24T12:51:11.960
> 
> 标签：python, python-3.x, z3, python-2to3

## 我的情况

我已经安装了 Microsoft Z3 ( `Z3 [version 4.3.0 - 64 bit]. (C) 2006`)，它是`pyc`Python2 的二进制文件。

我编写了一个需要访问`z3`功能的 Python3 包。

为了能够将`pyc`二进制文件与我的 Python3 包一起使用，我`decompyle`将`z3`二进制文件和应用了`2to3`.

## 我的问题

`Int('string')`不起作用，因为 Z3Py 无法处理`<class 'str'>`用作参数的新`'string'`参数：

```
>>> import z3; z3.Int('abc')

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File ".\bin\z3.py", line 2931, in Int
    return ArithRef(Z3_mk_const(ctx.ref(), to_symbol(name, ctx), IntSort(ctx).ast), ctx)
  File ".\bin\z3.py", line 72, in to_symbol
    return Z3_mk_string_symbol(_get_ctx(ctx).ref(), s)
  File ".\bin\z3core.py", line 1430, in Z3_mk_string_symbol
    r = lib().Z3_mk_string_symbol(a0, a1)
ctypes.ArgumentError: argument 2: <class 'TypeError'>: wrong type 
```

## 我的问题

*   `decompyle`首先需要Z3 的`*.pyc`文件有点麻烦。那么，有没有可用的 Z3Py 源代码？
*   是否已经有 Python3 的现有 Z3Py 端口？
*   任何其他想法如何让**Z3Py 与 Python3 一起运行**？

谢谢。- 如果有任何不清楚的地方，请留下问题评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:10:03.270

( `unstable`work-in-progress) 支持 Python 3。此功能将在下一个 Z3 版本 (v4.3.2) 中提供。同时，您可以使用[此处](http://z3.codeplex.com/wikipage?title=Building%20the%20unstable%20%28working-in-progress%29%20branch&referringTitle=Documentation)`unstable`的说明构建分支。

# java - 在属性文件中添加二级数据

> ID：15598672
> 
> 赞同：2
> 
> 时间：2013-03-24T12:51:35.150
> 
> 标签：java, jsf, jsf-2, properties

我拥有的是如下属性文件。

## 欢迎.properties

```
admin = Admin
welcomeAdmin = Welcome Admin
editAdmin = Edit Admin 
```

正如我**重复了管理员**词一样，我想使用如下所示的内容。

```
admin = Admin
welcomeAdmin = Welcome #{admin}
editAdmin = Edit #{admin} 
```

所以如果我在一个地方改变，即在`admin = Admin`，所有地方都会反映出来。

任何想法/建议如何完成这项工作将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:34:21.297

根据今天，经典`ResourceBundle`类不支持命名参数及其替换，而是支持`{0}`包的键值对中类型的简单占位符，可以通过 using 替换`MessageFormat#format`。

在这种情况下，如果您替换`Welcome #{admin}`为，`Welcome {0}`您将能够通过使用以下方法之一来实现您寻求的功能：

1.  *JSF的`<h:outputFormat>`*：

    ```
    <h:outputFormat value="#{msg.welcomeAdmin}">
        <f:param value="#{msg.admin}" />
    </h:outputFormat> 
    ```

2.  *JSTL的`<fmt:message>`*：

    ```
    <fmt:message key="msg.welcomeAdmin">
        <fmt:param value="#{msg.admin}">
    </fmt:message> 
    ```

您也可以创建自己的 EL 函数、标签处理程序或 UI 组件，或者`MessageFormat`在 bean 中使用类方法等。当然，您也可以扩展`ResourceBundle`类以支持命名参数并返回带有命名参数的消息解析。

**推荐阅读**：

1.  [Java 中的资源包是否支持运行时字符串替换？](https://stackoverflow.com/questions/2451049/do-resource-bundles-in-java-support-runtime-string-substitution);
2.  [如何使用带有 JSF 组件的非值属性的参数化消息格式](https://stackoverflow.com/questions/12000006/how-to-use-parameterized-messageformat-with-non-value-attributes-of-jsf-componen)；
3.  [将参数传递给从资源包到 h:outputFormat 以外的组件的消息](https://stackoverflow.com/questions/5697189/pass-parameters-to-messages-from-resource-bundle-to-components-other-than-hou)。

# python-2.7 - 使用scrapy从网站抓取数据时如何获得干净的结果

> ID：15598674
> 
> 赞同：0
> 
> 时间：2013-03-24T12:52:10.357
> 
> 标签：python-2.7, web-scraping, scrapy, scrape, scraper

我是 python 新手，我正在尝试从黄页中抓取数据。我能够刮掉它，但我得到了一个混乱的结果。

这是我得到的结果：

```
2013-03-24 20:26:47+0800 [scrapy] INFO: Scrapy 0.14.4 started (bot: eyp)
2013-03-24 20:26:47+0800 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, MemoryUsage, SpiderState
2013-03-24 20:26:47+0800 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware,DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats
2013-03-24 20:26:47+0800 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware
2013-03-24 20:26:47+0800 [scrapy] DEBUG: Enabled item pipelines: 
2013-03-24 20:26:47+0800 [eyp] INFO: Spider opened
2013-03-24 20:26:47+0800 [eyp] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)
2013-03-24 20:26:47+0800 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023
2013-03-24 20:26:47+0800 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080 
```

我怎样才能得到一个干净的结果？我只想获取姓名、地址、电话号码和链接。

顺便说一句，我用来执行此操作的代码是；

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from eyp.items import EypItem
class EypSpider(BaseSpider):
    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        titles = hxs.select('//ol[@class="result"]/li')
        items = []
        for title in titles:
            item = EypItem()
            item['title'] = title.select(".//p/text()").extract()
            item['link'] = title.select(".//a/@href").extract()
            items.append(item)
        return items 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:19:20.163

您的代码有点混乱，但我会尽力提供帮助：

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.item import Item, Field
import string

class EypItem(Item):
    name = Field()
    address = Field()
    phone = Field()

class eypSpider(BaseSpider):
    name = "eyp.ph"
    allowed_domains = ["eyp.ph"]
    start_urls = ["http://www.eyp.ph/home-real-estate/search/real-estate/davao/cat/real-estate-brokers"]
    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select("//li/div[@class='details']")
        items = []
        for site in sites:
            itemE = EypItem()
            itemE["name"] = site.select("normalize-space(p[1]/text())").extract()
            itemE["address"] = site.select("normalize-space(p[2]/text())").extract()
            itemE["phone"] = site.select("normalize-space(p[3]/text())").extract()
            items.append(itemE)
        return items 
```

您缺少`class EypItem`. 我已经推荐了一个。将上述内容保存为`test.py`运行命令行：

```
$ scrapy runspider test.py -o items.json -t json 
```

将为您提供一个名为 .json 的带有 JSON 输出的文件`items.json`。输出样本是

```
[{"phone": ["Phone: +63(907)6390603"], "name": ["(CARLOS A. VARGAS)"], "address": ["Mezzanine Wee Eng Apartment, Guerrero Street, Davao City, Davao Del Sur"]},
 {"phone": ["Phone: +63(921)9566577"], "name": ["(ROGELIO G. CARBIERO)"], "address": ["Sto. Nino Heights, Pantinople Village, Davao City, Davao Del Sur"]},
 {"phone": ["Phone: +63(917)3137855"], "name": ["(FLORIZEL C. CHAVEZ)"], "address": ["12 Tulip Street, El Rio Vista Village P4a, Davao City, Davao Del Sur"]},
.......... 
```

# php - Mysqli Prepared Statement Fetch Assoc

> ID：15598678
> 
> 赞同：-2
> 
> 时间：2013-03-24T12:52:38.603
> 
> 标签：php, mysqli

我正在为我的网站制作一个 mysqli 类，但我被卡住了。

这是我的课：

```
class Database  {

    private $mysqli = '';
    private $params = '';
    private $result = '';

    function Database($hostname, $username, $password, $database) {
        $this->mysqli = new mysqli($hostname, $username, $password, $database);

        if ($this->mysqli->connect_errno) {
            printf('Error #%s -> %s', $this->mysqli->connect_errno, $this->mysqli->connect_error);
            exit;
        }
    }

    public function setQuery($query) {
        $this->result = $this->mysqli->prepare($query); 
        $this->params = array();
        return $this;
    }

    public function setParam($type, $value) {
        $this->params[$type] = $value;

        return $this;
    }

    public function execute() {
        $params = $this->params;

        foreach ($params as $key => $value) {
            $this->result->bind_param($key, $value);
        }

        $user = $this->result->result_metadata()->fetch_assoc();
        echo $user['username'];
    }

} 
```

我在用着：

```
Core::$database->setQuery('SELECT * FROM habbo_characters WHERE id = ?')->setParam('i', 1)->execute(); 
```

但是我没有输出/空字符串作为输出。我做错了什么？setParam 函数可以正常工作，但事实并非如此。它包含 id 为 1 的用户（sql）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-24T13:37:00.393

使用 PDO：

```
<?php
/* Execute a prepared statement by passing an array of values */
$sql = 'SELECT name, colour, calories
    FROM fruit
    WHERE calories < :calories AND colour = :colour';
$sth = $dbh->prepare($sql, array(PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY));
$sth->execute(array(':calories' => 150, ':colour' => 'red'));
$red = $sth->fetchAll();
$sth->execute(array(':calories' => 175, ':colour' => 'yellow'));
$yellow = $sth->fetchAll();
?> 
```

更多示例可以在这里找到：http: [//php.net/manual/de/pdo.prepare.php](http://php.net/manual/de/pdo.prepare.php)

# windows - 我想创建一个“金山词霸”脚本

> ID：15598681
> 
> 赞同：0
> 
> 时间：2013-03-24T12:53:07.120
> 
> 标签：windows, kingsoft

我想创建一个“金山词霸”脚本。下面是脚本。

```
IfWinActive, ahk_class QWidget
{
sleep 2000
Click 486, 15
Click 570, 93
Send (various keystrokes)
Return
} 
```

该脚本的目的是：

我想使用一个名为“金山作家”的程序。

Kingsoft Writer 是一个免费软件程序，具有 Microsoft Word 的所有功能。但是金山词霸加载速度很快，不会因为加载缓慢而很少使用的花里胡哨而臃肿。界面也更加用户友好。

我想编程“Kingsoft Writer”默认打开所有文本文件。

我想将鼠标点击和击键发送到这个新打开的“金山词霸”窗口，这样我就可以使界面成为一个非常漂亮和简单的界面。它将具有我选择的背景颜色。它将仅显示 1 个工具栏，而不是 Microsoft Word 中的 5 或 6 个。换句话说，该界面将是对 Microsoft Word 界面的重大改进。

与 Microsoft Word 相比，最重要的功能改进将是金山词霸的加载速度。差异是巨大的。

但它仍将具有 Microsoft Word 的所有功能。它是免费下载的！

所以我需要创建一个可能没有定义热键的脚本。

我需要创建一个脚本，只要出现“Kingsoft Writer”窗口就会运行。

我用谷歌搜索了所有相关的词 2 小时。但是我仍然对如何创建这个脚本一无所知。

请给我一些想法来帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:01:11.817

不幸的是，您不能使用 IfWinActive 以您想要的方式触发脚本。虽然有解决方案。

一种方法是每 100 到 500 毫秒运行一个小测试脚本，以查看金山软件是否处于活动状态。或者，您可以使用一些系统调用在每次对任何窗口的焦点发生更改时触发测试脚本。这是一个例子！

# 带有 ShellMessage 的选项 1

```
#SingleInstance
#installKeybdHook
#Persistent
Global SwitchCounter

Gui +LastFound 
hWnd := WinExist()
DllCall( "RegisterShellHookWindow", UInt,Hwnd )
MsgNum := DllCall( "RegisterWindowMessage", Str,"SHELLHOOK" )
OnMessage( MsgNum, "ShellMessage" )
Return

ShellMessage( wParam )
{
    If (wParam = 4)
    { 
        IfWinActive, ahk_class QWidget
        {
            Sleep 2000
            Click 486, 15
            Click 570, 93
            ;Send (various keystrokes)
            Return
        }
    }
}
Return 
```

# 选项 2 以固定时间间隔检查

```
#SingleInstance
#installKeybdHook
#Persistent
SetTimer, CheckWin, 1000 ; This is executed on startup of AutoHotKey 
Return ; Anything below this point is not executed on startup

CheckWin:
WinGetTitle, CurrName, A
If (CurrName = "KingSoft")
{
    if (CurrName = PrevName)
        Return ; Only continue if an other application was activated
    PrevName = %CurrName% ; When new app, then sync CurrName and PrevName
    SoundBeep, 500, 200
    TrayTip, KingSoft, Activated, 2
}
Return 
```

我只发出声音并在系统托盘中显示一条消息。时间间隔设置为 1000 毫秒，因为仅蜂鸣声就需要 200 毫秒。基于计时器的解决方案会不断发出哔哔声，因此我检查应用名称是否有变化。默认情况下，ShellMessage 仅在您将金山软件置于焦点时才会发出哔声。

这个脚本来自[move GUI and daughter together](https://stackoverflow.com/questions/15179134/autohotkey-how-to-link-a-gui-to-a-window-to-act-the-same-as-its-parent/15185395#15185395)，当计算器和其他应用程序行为相同时我们触发一个动作（同时最小化或恢复）

如果只是检测应用程序是否正在运行，那么使用 settimer 并每 200 毫秒执行一次 ifWinExist 可能会更容易（尽管 ShellMessage 更好）。

# html - 删除 HTML 类之前和之后的所有内容

> ID：15598682
> 
> 赞同：-1
> 
> 时间：2013-03-24T12:53:12.430
> 
> 标签：html, ruby, nokogiri

我在一个文件中有页面源，但是我需要的页面只有一小部分，它包含在这个类中：

```
<td class="left">
<a href="hiscorepersonal.ws?user1=xMorgan">xMorgan</a>
<br><a href="hiscorepersonal.ws?user1=unik4kosova">unik4kosova</a>
<br><a href="hiscorepersonal.ws?user1=MiscDemeanor">MiscDemeanor</a>
<br>
</td> 
```

据我了解，没有简单的方法可以做到这一点，因为它不包含在元素中。这还有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:34:57.927

给定输入的预期输出是什么？是不是像下面这样：

```
"\nxMorgan\nunik4kosova\nMiscDemeanor\n" 
```

如果这是你想要的，你可以写：

```
require 'nokogiri'
require 'open-uri'

doc = Nokogiri::HTML(open('url-of-the-page-you-want-to-save'))
puts doc.css('td.left').text 
```

如果这不是您想要的，请提供足够的 HTML 示例和所需的输出。

# perl - Perl 中带有 /c 修饰符的奇怪 tr/// 运算符行为

> ID：15598686
> 
> 赞同：1
> 
> 时间：2013-03-24T12:53:29.827
> 
> 标签：perl, tr

修饰符在这里`/c`做了一些我不明白的事情。我想知道为什么下面的代码会打印“abc3333”？

```
#!/usr/bin/perl
$x = 'abcdefg';
$x =~ tr/abc/123/c;
print $x; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T16:22:54.933

`/c`使搜索列表得到补充；也就是说，搜索每个*未*列出的字符。

假设您在 range 中只有字符，则`\0-\xff`：

```
tr/abc/123/c 
```

相当于：

```
tr/\0-\x60\x64-\xff/123/ 
```

并且替换列表的最后一个字符根据需要重复多次以匹配搜索列表中的字符数（不使用 /d 时）。

所以“\0”变成“1”，“\1”变成“2”，“a”、“b”或“c”不变，其他任何字符变成“3”。

用 /c 指定替换列表是相当不寻常的；通常 /c 仅用于计数：

```
tr/abc//c # returns number of non-abc characters; string is unchanged 
```

或删除：

```
tr/0-9//cd # delete all non-digits 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:56:42.000

`/c`通常用于修改`/d`

```
tr/...//d;    # Delete every matching char.
tr/...//cd;   # Delete every char that doesn't match. 
```

或用于计数。

```
tr/...//;    # Returns number of matching chars.
tr/...//c;   # Returns number of chars that don't match. 
```

我无法用非空替换集为它提供一个有用的示例，但它很容易解释：它只是使用搜索集的补集。请记住`a`，`b`和`c`是字符 0x61、0x62 和 0x63，

```
tr/abc/123/c; 
```

因此等价于

```
tr/\x00-\x60\x64-\x{FFFFFFFFF}/123/;            # Perl with 32bit ints
  or
tr/\x00-\x60\x64-\x{FFFFFFFFFFFFFFFFFF}/123/;   # Perl with 64bit ints 
```

请记住，替换集的最后一个字符用于搜索集中没有对应字符的字符，

*   `"\x00"`变成`1`
*   `"\x01"`变成`2`
*   其他匹配的都变成`3`.

`tr`这种行为与所基于的命令行工具完全一致`tr///`。我不确定没有 . 怎么`/c`可能有用`/d`，但也许是因为`tr`命令行工具具有的额外功能`tr///`（例如字符类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T15:45:38.440

`/c`修饰符影响列表中字符的*补码。*它主要与`/d`修饰符一起使用，删除除给定字符集之外的所有字符。

```
my $string = 'ABCdef123';
$string =~ tr/a-z//cd;
print $string; 
```

**输出**

```
def 
```

# c# - GetFields 返回空数组

> ID：15598689
> 
> 赞同：1
> 
> 时间：2013-03-24T12:53:55.500
> 
> 标签：c#, reflection

谁能看到我在下面做错了什么？该类型具有服务方法试图访问的公共属性，那么为什么它没有被反射拾取呢？

```
Public class SomeClass
{
   private YetAnotherClass yetAnotherClass;

   public SomeClass(SomeOtherClass otherclass)
   {
       this.yetAnotherClass = otherclass.SomeProperty;
   }

   public YetAnotherClass SomeProperty
   {
       get { return this.yetAnotherClass; }
   }
}

Public class ServiceClass
{
    public void DoSomething(SomeClass someclass)
    {
         Type type = someclass.GetType();
         FieldInfo[] fieldsinfo = type.GetFields(BindingFlags.Public | BindingFlags.Instance); // returns empty collection
         FieldInfo fieldinfo = type.GetField("SomeProperty"); // returns null reference exception
    }
} 
```

干杯

斯图尔特

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T12:58:54.180

SomeProperty 是 - 顾名思义 - 一个属性。使用`GetProperty`and`GetProperties`代替！这导致`PropertyInfo`而不是`FieldInfo`.

# android - ImageView 和大 GIF 下采样

> ID：15598690
> 
> 赞同：4
> 
> 时间：2013-03-24T12:53:56.340
> 
> 标签：android, android-imageview, gif, bitmapfactory

我在`ImageView`. 除了使用`BitmapFactory.decodeStream`（从 URL 下载）而不是`BitmapFactory.decodeResource`：

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

这对 JPG 和 PNG 非常有效，但对于 GIF 则根本不适用，因为 GIF 不显示，而且我的*位图太大而无法上传到纹理*消息中。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:34:38.297

创建位图后，检查其尺寸并根据需要使用[Bitmap.createScaledBitmap 自行缩小。](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap%28android.graphics.Bitmap,%20int,%20int,%20boolean%29)

[此处](https://stackoverflow.com/questions/7428996/hw-accelerated-activity-how-to-get-opengl-texture-size-limit)描述了如何获得纹理的最大尺寸。

[还要注意此处](https://stackoverflow.com/questions/8420802/resize-image-from-file/13252754#13252754)描述的可能的伪影。

# javascript - Javascript：函数的变量可见性

> ID：15598691
> 
> 赞同：0
> 
> 时间：2013-03-24T12:53:56.870
> 
> 标签：javascript

我正在学习 Javascript 并想测试以下代码：

```
var name1 = "global";

function userobject(){
    this.name1 = "local";
}
function func() {
    alert(name1);
}

var myobject=new userobject();
func();
func.call(myobject); 
```

据我了解，在第一次调用 func 时，应该调用 alert("global")，但在第二次调用 func.call(myobject) 时，应该调用 alert("local")，

但实际上在这两种情况下都会显示“全局”文本。我想，在执行时，当解释器看到变量名时，它会尝试在本地识别它，如果在那里找不到它，它将在父级中搜索它。在我的情况下，我认为由于 func.call(myobject)，父对象是 myobject，并且函数应该使用它的 name1 变量，该变量被定义为“本地”。

请正确地理解我在哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:00:49.080

当解释器在范围内找不到`name1`时，它开始在外部范围内搜索，如果找不到，最终进入全局命名空间。没有隐式引用，`this`所以`name1`始终是全局变量，而不是任何本地对象属性。如果您已明确访问该属性，那么您的代码将按预期工作：

```
function func() {
    alert( this.name1 );
} 
```

您的`call`方法*确实*放在`this`范围内，但它不会更改局部变量所指的内容。您可以拥有一个与全局对象属性同名的变量，但它们不会是同一个东西。

# c++ - 为什么在 C 中减去 '0' 会导致 char 所代表的数字？

> ID：15598698
> 
> 赞同：33
> 
> 时间：2013-03-24T12:54:43.787
> 
> 标签：c++, c, digits

有人可以解释为什么这有效吗？

```
char c = '9';
int x = (int)(c - '0'); 
```

为什么从 char 的 ascii 代码中减去“0”会得到该 char 所代表的数字？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-24T12:55:59.417

Because the char are all represented by a number and '0' is the first of them all.

**On the table below you see that:**

```
'0' => 48
'1' => 49

'9' => 57. 
```

**As a result:** (`'9'` - `'0'`) = (57 − 48) = 9

![enter image description here](../Images/69af119cc2bc9f06c58b96aefd54e068.png) *Source: [http://www.asciitable.com](http://www.asciitable.com)*

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-24T13:00:02.660

`char` is an integer type, just like `int` and family. An object of type `char` has some numerical value. The mapping between characters that you type in a character literal (like `'0'`) and the value that the `char` object has is determined by the encoding of that character in the *execution character set*:

*   C++11 §2.14.3:

    > An ordinary character literal that contains a single *c-char* representable in the execution character set has type `char`, with value equal to the numerical value of the encoding of the *c-char* in the execution character set.

*   C99 §6.4.4.4:

    > An integer character constant is a sequence of one or more multibyte characters enclosed in single-quotes, as in `'x'`.
    > 
    > [...]
    > 
    > An integer character constant has type `int`.

    Note that the `int` can be converted to a `char`.

The choice of execution character set is up to the implementation. More often than not, the choice is ASCII compatible, so the tables posted in other answers have the appropriate values. However, the character set does not *need* to be ASCII compatible. There are some restrictions, though. One of them is as follows (C++11 §2.3, C99 §5.2.1):

> ```
> a b c d e f g h i j k l m n o p q r s t u v w x y z
> A B C D E F G H I J K L M N O P Q R S T U V W X Y Z
> 0 1 2 3 4 5 6 7 8 9
> _ { } [ ] # ( ) < > % : ; . ? * + - / ^ & | ~ ! = , \ " ’ 
> ```
> 
> [...]
> 
> In both the source and execution basic character sets, the value of each character after 0 in the above list of decimal digits shall be one greater than the value of the previous.

This means that whatever value the character `'0'` has, the character `'1'` has value one more than `'0'`, and character `'2'` has value one more than that, and so on. The numeric characters have consecutive values. You can summarise the mapping like so:

```
Character:            0    1    2    3    4    5    6    7    8    9
Corresponding value:  X    X+1  X+2  X+3  X+4  X+5  X+6  X+7  X+8  X+9 
```

All of the digit characters have values offset from the value of `'0'`.

That means, if you have a character, let's say `'9'` and subtract `'0'` from it, you get the "distance" between the value of `'9'` and the value of `'0'` in the execution character set. Since they are consecutive, the distance will be 9.

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-03-24T12:56:53.077

Because the C standard guarantees that the characters `0, 1, 2, 3, 4, 5, 6, 7, 8, 9` are always in this order regarding their numerical character code. So, if you subtract the char code of `'0'` from another digit, it will give its position relative to `0`, which is its value...

From the C standard, Section 5.2.1 Character sets:

> In both the source and execution basic character sets, the value of each character after 0 in the above list of decimal digits shall be one greater than the value of the previous

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-24T12:56:12.617

Because, the literals are arranged in sequence.

So if `0` was 48, `1` will be 49, `2` will be 50 etc.. in ASCII, then `x` would contain, ascii value of `'9'` minus the ascii value of `'0'` which means, ascii value of `'9'` would be 57 and hence, `x` would contain `57 - 48 = 9`.

Also, `char` is an integral type.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-24T12:56:41.647

the code ascii of numeric chars are ordered in the order `'0' '1' '2' '3' '4' '5' '6' '7' '8' '9'` as indicated in the [ascii table](http://www.asciitable.com/)

so if we make difference beween asii of `'9'` and ascii of `'0'` we will get `9`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-24T12:56:56.427

In the ASCII-table the Digits are aligned sequentially, starting with the lowest code for `0`. If you subtract a higher number from `0`, you create the difference of the two ASCII-values. So, `9` has value `57` and `0` has `48`, so if you subtract 48 from 57 you get 9. Just have a look at the ASCII-table.

Look [here](http://www.asciitable.com/).

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-24T12:57:29.183

Look at the [ASCII TABLE](http://www.asciitable.com/):

```
'9' in ASCII =  57 //in Decimal

'0' in ASCII =  48 //in Decimal 
```

# **57 - 48 = 9**

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-24T13:04:03.013

First, try:

```
cout << (int)'0' << endl; 
```

now try:

```
cout << (int)'9' << endl; 
```

the charictors represent numbers in text form, but have a different value in when taken as a number. Windows uses a Number to decide which charictor to print. So the number 0x30 represents the charictor 0 in the windows OS. The number 0x39 represents the charictor 9\. After all, all a computer can recognize is numbers, it does'nt know what a "char" is.

Unfortunatly `(int)('f' - '0')` does not equal 15, though.

This gives you the various charictors and the number windows uses to represent them. [http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx)

If you need to find that for another OS, you can search: `Virtual Key Codes <OSname>` in Google. to see what other OS's have as their codes.

# linux - 32 位 Linux 上的 Syscall 或 sysenter？

> ID：15598700
> 
> 赞同：9
> 
> 时间：2013-03-24T12:54:49.287
> 
> 标签：linux, assembly, 32-bit, system-calls, sysenter

从 MS‑DOS 开始，我就知道使用中断进行系统调用。在旧论文中，我看到了`int 80h`在 Linux 上调用系统函数的参考。很长一段时间以来，我知道`int 80h`不赞成使用该`syscall`指令。但我无法让它在我的 32 位机器上运行。

# 问题

`syscall`指令只能在 64 位平台上使用吗？32位Linux不使用`syscall`吗？

# 样品测试

在我的 32 位 Linux（Ubuntu Precise）上，该程序以核心转储终止：

```
global _start

_start:
        mov     eax, 4                ; 4 is write
        mov     ebx, 1                ; 1 is stdout
        mov     ecx, message          ; address of string
        mov     edx, length           ; number of bytes
        syscall

        mov     eax, 1                ; 1 is exit
        xor     ebx, ebx              ; return code 0
        syscall

message:
        db  10,"Hello, World",10,10
length  equ $ - message 
```

我试过用`sysenter`而不是`syscall`，但它以同样的方式崩溃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-04-21T22:42:58.540

英特尔[手册](http://www.intel.com/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-instruction-set-reference-manual-325383.pdf)说这`syscall`在兼容（32位）模式下无效，因此内核不应使用它。

然而，这似乎是英特尔独有的限制：[https](https://stackoverflow.com/a/29784932/895245) ://stackoverflow.com/a/29784932/895245 AMD 没有，但 Linux 肯定必须支持英特尔 :-)

`sysenter`似乎是今天最好的方法，因为它比 快`int 0x80`，但它应该通过 VDSO 间接使用，如[如何通过内联汇编中的 sysenter 调用系统调用（x86/amd64 linux）？](https://stackoverflow.com/questions/9506353/how-to-invoke-a-system-call-via-sysenter-in-inline-assembly-x86-amd64-linux)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T15:44:02.360

经过一些网络搜索，我找到了 StackOverflow 上的另一个主题：[Linux 通过 sysenter 教程调用系统调用](https://stackoverflow.com/questions/13595033/linux-invoke-a-system-call-via-sysenter-tutorial)。它说调用系统的推荐方法既不是 using`int 80h`也不`syscall`是`sysenter`，而是`linux-gate.so`。

关于崩溃和核心转储的问题仍然存在。最后我的猜测是，尽管其中一个`syscall`或多个`sysenter`指令都可以作为 CPU 指令使用，但可能是 Linux 内核在确定它在给定的硬件平台上没有真正用处时没有正确设置这个“入口点”。

似乎在 32 位平台上，`sysenter`或者`syscall` **可能**可用，虽然它始终可用，但仅在 64 位平台上。

虽然我觉得这回答了我的问题，但我仍然欢迎更多材料，比如我上述猜测的权威参考。

- 更新 -

至少，我可以找到这证实了上述内容。这仍然不是一个权威的参考，但我相信它似乎足够可信。

[什么是 linux-gate.so.1？](http://www.trilithium.com/johan/2005/08/linux-gate/)，说：

> 调用系统调用的首选方式 **由内核在启动时确定**，显然这个框使用 sysenter。

此外，从另一个来源，一个示例 FASM 程序集源（如果您使用 NASM，需要一些翻译），通过以下方式调用系统函数`linux-gate.so`：[Finding linux-gate.so.1 in Assembly](http://shaurz.wordpress.com/2008/06/02/finding-linux-gateso1-in-assembly/)。

# hibernate - Spring Data Transformers.aliasToBean(AgentRecordDTO.class)

> ID：15598701
> 
> 赞同：6
> 
> 时间：2013-03-24T12:54:49.750
> 
> 标签：hibernate, spring-data, hibernate-criteria, transformer

**我想将[Hibernate 转换](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/transform/Transformers.html) 与 Spring Data 一起使用。**

我有一个`AgentRecord`属性为的实体

```
@Entity
public class AgentRecord extends AbstractEntity<Long> {
        @ManyToOne
        private User processedBy;

        private String description;

        private RecordType recordType;

        private AgentRecordStatus status;
} 
```

我遵循将所需属性设置为调用的不同 DTO`AgentRecordDTO`并将其返回给 Client-side( `gwt`) 的做法。

```
public class AgentRecordDTO implements IsSerializable {

    private long processedBy;

    private String description;

    private RecordType recordType;

    private AgentRecordStatus status;
} 
```

我不想获取实体的所有属性，而是想获取一些属性并将它们设置`AgentRecordDTO`为`new AgentRecordDTO()`我可以在 hql 中做的那样，但想用**Spring Data Specification**做。

![转型](../Images/1b90369d3b5e6ba04ca3cddd10b85e63.png)

我`AgentRepository`的是

```
public interface AgentRecordRepository extends CrudRepository<AgentRecord, Long>, JpaSpecificationExecutor<AgentRecord> {

} 
```

## 我的转换不完整代码看起来像

```
public Page<AgentRecordDTO> getAgentRecords(final long userId) {
    SimplePageable page = new SimplePageable(1, 10); //my custom object
    Page<AgentRecord> pages = agentRecordRepository.findAll(new Specification<AgentRecord>() {

        @Override
        public Predicate toPredicate(Root<AgentRecord> root, CriteriaQuery<?> query, CriteriaBuilder cb) {
            //Projection plus Transformers.aliasToBean(AgentRecordDTO) missing here
            Predicate predicate = cb.equal(root.get("processedBy").get("id"), userId);
            if (null != predicate) {
                predicate = cb.or(predicate, cb.equal(root.get("recordType"), RecordType.VERIFICATION_REQUEST));
                predicate = cb.or(predicate, cb.equal(root.get("recordType"), RecordType.VERIFICATION));
            }

            return predicate;
        }
    }, new PageRequest(page.getPage(), page.getSize(), new Sort(new Order(Direction.DESC, "id"))));
    return null;
} 
```

[Hibernate 3.2: Transformers for HQL and SQL](http://relation.to/Bloggers/Hibernate32TransformersForHQLAndSQL)日期为 2008 年 6 月 3 日是一篇精彩的文章，但是

## 我无法在 Spring Data Specification 中战胜它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-13T12:11:13.007

不是直接的答案，而是一种规避。

每当 Spring Data 存储库不符合我的要求时，我都会从 entitymanager 直接进入 Hibernate。

例如

```
entityManager.unwrap(Session.class).
    createSQLQuery(SPECIAL_QUERY).
    setTimestamp("requestTime", time).
    setParameter("currency", String.valueOf(currency)).
    setResultTransformer(
        Transformers.aliasToBean(BookingSummary.class)
    ).list(); 
```

我有一些摘要，需要左外连接，因此无法将其映射回实体。

# .net - System.Data.OracleClient 需要 Oracle 客户端软件版本 8.1.7 或更高版本

> ID：15598702
> 
> 赞同：0
> 
> 时间：2013-03-24T12:54:51.650
> 
> 标签：.net, oracle

我已安装 oracle 10g 并尝试托管我的 .Net Frame Work 2.0 网站，但在尝试浏览该站点时收到此消息 System.Data.OracleClient 需要 Oracle 客户端软件版本 8.1.7 或更高版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:18:41.003

老实说，我从未尝试在与 oracle 数据库相同的服务器上安装网站，但是，每当我安装需要访问 oracle 后端的网站时，我都必须执行以下操作：

*   安装Oracle客户端的相关版本（[http://www.oracle.com/technetwork/database/features/instant-client/index-097480.htm](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.htm)
*   确保我的 tnsnames.ora 文件已正确设置 ( [http://www.orafaq.com/wiki/Tnsnames.ora](http://www.orafaq.com/wiki/Tnsnames.ora) )

就是这样。它应该是相当直截了当的。如果您仍然收到相同的错误，则可能是您在注册表中设置的 ORACLE_HOME 路径存在问题。可能是它指向了不应该指向的地方，或者是权限错误。如果安装客户端不起作用，请查看此帖子以获取更多信息：[System.Data.OracleClient 需要 Oracle 客户端软件版本 8.1.7](https://stackoverflow.com/questions/447983/system-data-oracleclient-requires-oracle-client-software-version-8-1-7)

# prestashop - 在 Prestashop 中删除地址询问

> ID：15598703
> 
> 赞同：1
> 
> 时间：2013-03-24T12:54:54.290
> 
> 标签：prestashop

我想禁用 prestashop 中的地址询问功能。有没有办法做到这一点。我将只在 prestashop 1.5.3.1 中托管虚拟产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-13T22:05:05.037

如果您在信息部分选择“虚拟产品”，运输选项卡将自动消失。这才是重点。

# c# - 将记录保存到数据库中会在 ASP.Net C# 中引发运行时错误

> ID：15598705
> 
> 赞同：0
> 
> 时间：2013-03-24T12:54:57.930
> 
> 标签：c#, asp.net, sql, sql-server

我想知道为什么我通过抛出这个异常得到这个运行时错误：

> **SqlException 未被**用户代码处理
> 
> 'm' 附近的语法不正确。
> 字符串 ')' 后面的非闭合引号。

当我使用下面的这段代码将记录添加到我的数据库中时，实际上我每次都使用这段代码，现在它不起作用。

我希望你能找出这个错误的原因。谢谢...这是下面的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
   string conn = @"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Coldwind.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
   SqlConnection connection = new SqlConnection(conn);
   // SqlDataReader dr = new SqlDataReader();

   connection.Open();
   string sql = "INSERT INTO [CommentTab]([Name],[Comments]) Values('" + TextBox1.Text + "','" + TextBox2.Text + "')";
   SqlCommand cmd = new SqlCommand(sql, connection);
   cmd.CommandType = CommandType.Text;

   cmd.ExecuteNonQuery();
   cmd.Dispose();
   connection.Close();
   Response.Redirect("~/Default5.aspx");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:06:22.243

您的问题可能是您直接传递用户键入的字符串。例如，如果用户使用单引号键入内容，则会产生错误。

请避免使用内联 sql 将用户键入的字符串直接传递给数据库。您很容易受到 sql 注入攻击。使用参数化查询使您的查询安全且无错误。您可以如下修改您的代码。

```
//Your code
connection.Open();
string sql = "INSERT INTO [CommentTab]([Name],[Comments]) Values(@username,@comments)";
SqlCommand cmd = new SqlCommand(sql, connection);
cmd.CommandType = CommandType.Text;
cmd.Parameters.AddWithValue("@username", TextBox1.Text);
cmd.Parameters.AddWithValue("@comments", TextBox2.Text);

cmd.ExecuteNonQuery();
cmd.Dispose();
connection.Close();
Response.Redirect("~/Default5.aspx"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T12:59:35.797

我认为问题出在您插入的文本中。你能发帖吗？另外，我建议改用存储过程并传递参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T13:03:34.597

I think Your input contains `quotation mark("'")` itself. So better to replace them by double quotation mark like this

```
string Val1 =TextBox1.Text.Replace("'","''"); 
```

and then use this value in your query.

# ssl - SSL 的特性如何对抗 IP 劫持？

> ID：15598708
> 
> 赞同：3
> 
> 时间：2013-03-24T12:55:04.473
> 
> 标签：ssl

如果两台主机之间的活动、经过身份验证的连接被中断，攻击者取代了其中一台主机，那么 SSL 功能如何帮助对抗或防止？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:20:48.143

两台原始主机已就临时密钥达成一致，因此试图劫持连接的主机需要知道密钥才能代替其中一台主机。否则它不能发送任何被对方视为有效的消息。

这称为主密钥（参见[https://www.rfc-editor.org/rfc/rfc6101#section-6.1](https://www.rfc-editor.org/rfc/rfc6101#section-6.1)）。

因此，除非劫持者能够破解加密，否则他不能简单地劫持连接。

如果您提到的中断意味着建立新连接，则证书验证的通常规则会阻止攻击者替换一侧（但前提是使用并验证了客户端证书，否则可以替换客户端）。有诸如证书固定之类的方法可以防止使用不同的有效证书，但必须实施这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T22:48:06.653

[您将在 TLS 规范的介绍中](https://www.rfc-editor.org/rfc/rfc5246#section-1)找到您问题的大部分答案。

在建立 SSL/TLS 连接时，双方就一个主密钥达成一致，该主密钥用于生成共享的加密密钥和 MAC 密钥。

虽然加密的目的是确保对话的机密性，但消息完整性受到[消息验证码 (MAC)](https://www.rfc-editor.org/rfc/rfc5246#section-5)的保护。攻击者没有正确的 MAC 密钥来冒充合法主机。

（当然，这只有在密钥交换一开始就被正确验证时才有用。）

# c - Suppressing GCC error output when invoking it from a C program

> ID：15598717
> 
> 赞同：2
> 
> 时间：2013-03-24T12:56:37.483
> 
> 标签：c, linux, gcc

I'm trying to compile certain files from my C program in Linux and give them grades. I'd like to give zero grade if the file did not compile. I already managed to do so, but I have a problem in this case, because gcc is printing a message to the screen (what is called the compilation error).

I've been googling and looked in the man for a flag which would prevent it from doing so, but haven't found one yet.

Does anyone know what is the flag? Or else, maybe there's other solution?

Here's my code:

```
//child process
    if((pid=fork())==0)
    {
        execl("/usr/bin/gcc", "/usr/bin/gcc", "-o", outpath, fullpath,NULL);
    }
    else
    {
        wait(&stat);
        if(WIFEXITED(stat))
        {
            stat=WEXITSTATUS(stat);
            if(stat!=0)
            {
                if(write(fdresult,",0\r\n",4)==-1)
                {
                    perror("Writing result.csv has failed.");
                    exit(1);
                }
                continue;
            }
        }
    } 
```

Note:This code works. I just need a way to prevent gcc from printing an error when the file does not compile.

Thanks!

edit: Tried adding

```
dup2("/dev/null",2); 
```

just before execl, but gcc still print out message.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:11:20.013

在 C 标准中，该`freopen`函数将给定流 ( `stderr`) 与给定路径 ( `"/dev/null"`) 的文件相关联，并指定其模式 ( `"w"`)。

```
#include <stdio.h>

freopen ("/dev/null", "w", stderr); 
```

# jquery - Jquery menu breaking on fast clicking/ scrolling over

> ID：15598718
> 
> 赞同：0
> 
> 时间：2013-03-24T12:56:39.837
> 
> 标签：jquery, drupal

I have this jquery code below, but the problem is that if I scroll over and out of the trigger element quickly and through the menu, then it breaks, progressively showing less elements each time until nothing is shown. Can I add a timer or easing to stop this breaking?

```
<ul class="buying-dropdown">
 <li><p class="green-button"><a href="#">Read the blog</a></p>
    <ul>
      <li class="first amazon"><a href="#">paperback</a></li>
      <li class="signed"><a href="#">Signed edition</a></li>
      <li class="kindle"><a href="#">kindle edition</a></li>
      <li class="hardback"><a href="#">hardback edition</a></li>
      <li class="last postcard"><a href="#">postcard edition</a></li>
     </ul> </li> 
```

```
(function ($) {
Drupal.behaviors.weaveoftheride = {
attach: function(context, settings) {

 console.log('called');
$('.buying-dropdown li').hover(
        function () {
            //show its submenu
            $('ul', this).stop().slideDown(100);

        }, 
        function () {
            //hide its submenu
            $('ul', this).stop().slideUp(100);          
        }
    );
}

};
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:58:47.620

使用方法时，应强制 jQuery 清除动画队列并跳转到动画的末尾`.stop()`，即`.stop(true, true)`.

# sql - GROUP rows between starting trigger and finishing trigger

> ID：15598722
> 
> 赞同：3
> 
> 时间：2013-03-24T12:56:53.187
> 
> 标签：sql, sql-server, tsql

Would be cool if you could help me with my problem. I have a table where you can see events from a game. Every player has some amount of gold which you can see in a `Value` column after `Log in`. I need to find out with how much gold people start playing their FIRST game after `Log in`. Before players start the game they can `Buy gold` or `Get bonus` which will raise their amount of gold by `Value`

```
**Player ID      Timestamp      Action     Value**    
    1111           09:11        Log in      500
    1111           09:25        Buy gold    100
    1111           09:28        Get bonus    50
    1111           09:30        Start game      
    2222           11:14        Log in      800
    3333           12:01        Log in      700
    3333           12:04        Get bonus    50
    3333           12:08        Start game   
    3333           12:15        Buy gold    100
    3333           12:18        Start game
    1111           14:40        Log in      300
    1111           14:42        Buy gold    100
    1111           14:50        Start game
    2222           15:22        Log in      600
    2222           15:25        Buy gold    100
    2222           16:25        Log in      400
    2222           16:30        Get bonus    50
    2222           16:35        Start game 
```

Te result I am looking for is something like that. It is basically a SUM of Values between `Start game` and the most recent `Log in` of a player.

```
**Match number   Player ID     Value**
     1             1111         650
     2             3333         750
     3             1111         400
     4             2222         450 
```

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:13:34.277

您可以尝试一些相关的子查询：

```
SELECT PlayerID, SUM(value) FROM table a
WHERE
TimeStamp >= (SELECT MAX(TimeStamp) FROM table WHERE a.PlayerID = PlayerID AND Action = 'Log in' )
GROUP BY PlayerID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:21:38.510

一种方法是搜索每一`Log in`行。然后查找下一行是`Log in`or `Start game`。如果该行是 a `Start game`，则您有一对标识登录后的第一个游戏。然后，您可以找到该对之间所有行的值的总和：

```
select  row_number() over (order by start.Timestamp) as MatchNumber
,       start.[Player ID]
,       vals.SumValue
from    YourTable login
cross apply
        (
        select  top 1 *
        from    YourTable start
        where   login.[Player ID] = start.[Player ID]
                and login.Timestamp < start.Timestamp 
                and start.Action in ('Start game', 'Log in')
        order by
                start.Timestamp
        ) start
cross apply
        (
        select  sum(cast(vals.Value as int)) as SumValue
        from    YourTable vals
        where   vals.[Player ID] = start.[Player ID]
                and vals.Action in ('Log in', 'Get bonus', 'Buy gold')
                and vals.Timestamp between login.Timestamp and start.Timestamp
        ) vals
where   login.Action = 'Log in'
        and start.Action = 'Start game' 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/bfced/6/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:15:50.180

这有点复杂。我的方法是为每次登录查找下一个时间戳，即“登录”或“开始游戏”，然后返回原始表以查找所有金牌条目。

```
select tli.playerId, tli.TimeStamp, sum(value)
from (select t.*,
             (select top 1 timestamp
              from t t2
              where t2.playerId = t.playerId and
                    t2.timestamp > t.timestamp and
                    t2.action in ('log in', 'start game')
              order by timestamp
             ) as nextTimestamp
      from t
      where t.action in ('log in')
     ) tli join
     t
     on t.playerId = tli.playerId and
        t.timestamp >= tli.timestamp and
        t.timestamp < tli.nextTimeStamp
group by tli.playerId, tli.timeStamp 
```

# google-bigquery - 400 Bad Request error attempting to load bigquery table from cloud store

> ID：15598724
> 
> 赞同：3
> 
> 时间：2013-03-24T12:57:00.427
> 
> 标签：google-bigquery

I get a 400 bad request error:

Exception in thread "main" com.google.api.client.googleapis.json.GoogleJsonResponseException: 400 Bad Request

```
{
  "code" : 400,
  "errors" : [ {
    "domain" : "global",
    "message" : "Bad Request",
    "reason" : "badRequest"
  } ],
  "message" : "Bad Request"
} 
```

I'm not sure how to see the full request, but using Job's toPrettyString() method I get:

```
{configuration=
  {load=
    {
      createDisposition=CREATE_IF_NEEDED, 
      destinationTable={
        datasetId=vcf1, 
        projectId=x8-alien-rainfall-3, 
        tableId=NewTable
      }, 
      encoding=UTF-8,
      maxBadRecords=10, 
      schema={
        fields=[
          {name=sample_id, type=String}, 
          {name=chromosome, type=String}, 
          {name=start_pos, type=Integer}, 
          {name=end_pos, type=Integer}, 
          {name=reference, type=String}, 
          {name=observed, type=String}, 
          {name=quality, type=Float}, 
          {name=filter, type=String}, 
          {name=zygosity, type=String}, 
          {name=refGene_function, type=String}
        ]
      }, 
      skipLeadingRows=1, 
      sourceUris=[gs://vcfs/test_exome_part1.csv]
    }
  }, 
  jobReference={projectId=x8-alien-rainfall-3}
} 
```

I setup my request using the instructions here: [Load data from Google Cloud Storage to BigQuery using Java](https://stackoverflow.com/questions/10671266/load-data-from-google-cloud-storage-to-bigquery-using-java) . The actual code is shown below:

```
 public static void loadCsvAsNewTable(Bigquery bigquery,
                                Integer skipLeadingRows,
                                Integer maxBadRecords)
      throws IOException {

    String encoding = "UTF-8";
    String csvFile = "gs://vcfs/test_exome_part1.csv";
    String datasetId = "vcf1";
    String tableId = "NewTable";

    Job insertJob = new Job();
    insertJob.setJobReference(new JobReference().setProjectId(PROJECT_ID));
    JobConfiguration config = new JobConfiguration();
    JobConfigurationLoad loadConfig = new JobConfigurationLoad();
    config.setLoad(loadConfig);

    List<String> sources = new ArrayList<String>();
    sources.add(csvFile);
    loadConfig.setSourceUris(sources);

    TableReference destinationTable = new TableReference();
    destinationTable.setDatasetId(datasetId);
    destinationTable.setTableId(tableId);
    destinationTable.setProjectId(PROJECT_ID);
    loadConfig.setDestinationTable(destinationTable);
    loadConfig.setSchema(tableSchema());
    loadConfig.setCreateDisposition("CREATE_IF_NEEDED");

    if (skipLeadingRows != null) {
      loadConfig.setSkipLeadingRows(skipLeadingRows);
    }
    if (maxBadRecords != null) {
      loadConfig.setMaxBadRecords(maxBadRecords);
    }

    loadConfig.setEncoding(encoding);
    config.setLoad(loadConfig);
    insertJob.setConfiguration(config);

    System.out.println(insertJob.toPrettyString());

    Insert insert = bigquery.jobs().insert(PROJECT_ID, insertJob);
    insert.setProjectId(PROJECT_ID);

    println("Starting load job.");
    Job job = insert.execute();
    if (isJobRunning(job)) {
      Job doneJob = waitForJob(bigquery, PROJECT_ID, job.getJobReference());
      println("Done: " + doneJob.toString());
    } else {
      println("Error: " + job.toString());
    }
  } 
```

I'm able to query a table using the same GoogleCredential, which uses a Service Account approach.

Any assistance would be greatly appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-03T17:45:12.350

请求的架构部分中指定的字段类型必须小写：字符串而不是字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-13T19:22:33.257

异常代码 400 表示***billingTierLimitExceeded***。

当您尝试执行超出项目最大计费层级的高计算查询时，会返回此错误。

**故障排除：**减少每个输入字节完成的计算次数或启用高计算查询以允许每个字节进行更多计算。

您可以在此处参考[故障排除错误](https://cloud.google.com/bigquery/troubleshooting-errors)

# javascript - Why coffeescript use « return » statement everywhere?

> ID：15598727
> 
> 赞同：3
> 
> 时间：2013-03-24T12:57:18.207
> 
> 标签：javascript, coffeescript

When writing something like that:

```
$(document).ready ->
  doSomething()

doSomething = ->
  alert('Nothing to do') 
```

is compiled into

```
$(document).ready(function() {
  return doSomething();
});

doSomething = function() {
  return alert('Nothing to do');
}; 
```

In my understand, the return statement is for values (string, array, integer...)

Why coffeescript do that ?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T13:03:29.977

CoffeeScript uses an implicit return if none is specified.

CS returns the value of the last statement in a function. This means the generated JS will have a `return` of the value of the last statement since JS requires an explicit `return`.

> the return statement is for values (string, array, integer...)

Yes, and those values may be returned by calling a function, like `doSomething()` or `alert()` in your example. That the values are the result of executing a method is immaterial.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:05:32.450

Coffeescript 和 Ruby 一样，总是返回函数中的最后一条语句。最后一条语句将始终计算为一个值（字符串、数组、整数等）或`null`. 无论哪种情况，返回结果都是完全有效的。

要回答'为什么' coffescript 对所有函数都这样做，而不仅仅是那些有值的函数，这仅仅是因为在许多情况下，Coffeescript 无法判断最后一条语句何时会评估为一个值或`null`. 始终将`return`声明放在那里会更安全、更简单，并且不会产生任何负面后果。如果你不关心函数返回什么，你可以忽略返回值。

# map - Groovy map with an array as a key returns null when given a key equivalent to one I know exists

> ID：15598728
> 
> 赞同：2
> 
> 时间：2013-03-24T12:57:24.027
> 
> 标签：map, groovy, key

Riddle me this,

In my code, I am using a map to store all the methods of an object which have my annotation. Because of the way I wanted to use the map, I'm storing the java.reflection.Method object as the value, and the key is an array list containing the method name as a String and the parameter types as a Class[]

to create the map my code does the following:

```
def map = [:]
Foo.metaClass.methods*.cachedMethod.each { 
    if(it.isAnnotationPresent(Test.class)) { 
        map << [([it.name, it.parameterTypes]):it] 
    } 
} 
```

This successfully returns me a map containing something similar to this:

```
[[exampleMethod, [class java.lang.String, class java.lang.String]]:public java.util.List Foo.exampleMethod(java.lang.String,java.lang.String)] 
```

I can examine the key and print the classes and know that its made up of an `ArrayList` where the first element is a `String` and the second is a `Class[]` containing two `String`s

Whilst testing this code, I built an Array list which is equivalent to a key i knoiw exists in the map:

```
def tstKey = ["exampleMethod" as String, [String.class, String.class]] 
```

And I know this is equivalent to a current key with an assert:

```
assert tstKey == curKey 
```

Which passes fine... However when I try to access the element by `tstKey` it returns null. Yet accessing the element by `curKey` returns the element.

This has left me scratching my head a little. If they are equivalent arrays, why can't I return the element using the built `tstKey`?

**SIDENOTE**: I tried using `getParamTypes()` on the CachedMethod instead of `getParameterTypes` on the actual method, however it returned null despite `getParamsCount` returning `2`, any ideas why that would be?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T15:59:46.847

核心原因是`it.parameterTypes`返回一个Java Object 数组。因此，首先您需要更改以下内容：

```
def tstKey = ["exampleMethod" as String, [String.class, String.class] as Class<?>[]] 
```

现在真正的问题是`ArrayList`从地图中获取值时使用了哈希码。ArrayList 哈希码基于其元素的哈希码，Java 数组就是其中之一。[Java 数组哈希码](https://stackoverflow.com/questions/744735/java-array-hashcode-implementation)基于 Object 中所做的对象引用，因此没有 2 个数组将具有相同的哈希码。
如果您要打印两个密钥的哈希码，您会发现它们并不相同。

# php - PHP comparing UNIX timestamps

> ID：15598729
> 
> 赞同：1
> 
> 时间：2013-03-24T12:57:26.830
> 
> 标签：php, unix, timestamp

I've having an issue comparing two unix timestamps in php.

```
$time_now = mktime();
if($auction->time_end > $time_now){
   //true
}
else{
   //false
} 
```

$auction->time_end is 1362579127 and set as int from db. $time_now is for example 1364129253 and is set as int, both were checking with var_dump and are indeed returning both as ints.

The problem is that PHP seems to think 1362579127 is greater than 1364129253 (returns false) which it is not.. am I missing something here? If I input the values into the if statement it works as it should but when it's comparing the object it doesn't seem to like it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:15:09.443

看看你的问题，你的逻辑似乎是错误的。当前时间总是大于过去的时间。尝试以下操作：

```
if($time_now>$auction->time_end){
//...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:05:11.713

如果您在 32 位系统上，则 int 类型的最大值定义为大约 20 亿。你的两个数字似乎都太大了。请参阅[文档](http://php.net/manual/de/language.types.integer.php)。

# php - Using a list of anchor to submit form and redirect

> ID：15598731
> 
> 赞同：0
> 
> 时间：2013-03-24T12:57:33.017
> 
> 标签：php, javascript, html

I am trying to make a list of anchors that will submit the value of the one clicked and redirect to another page. The form is:

```
<form id="searchCategory" action="test.php" method="post">
<div id="categories">
<details>
<summary>Beers</summary>
<a href="test.php" onclick="document.getElementById("title").submit();"> <input id="title" name="title">Lager </input></a>
<a href="#"> Ale</a> //would make as above
<a href="#">Pale Lager </a> // same
</details>
</form> 
```

The top of the test.php is this:

```
<?php
if (!empty($_POST['submit'])){
include ("connection.php");

$title = (trim($_POST['title'])=="")?
die ("You did not enter any search criteria"):
mysql_real_escape_string($_POST['title']); 
```

The anchor redirects me to the test.php page but the value doesn't seem to be submitted.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:31:02.150

您可以使用此处`GET`提交您的类别，只需`GET query`在您的`href`. 很简单，制作也很简单

```
<ul>
    <li><a href="test.php?cat=lager">Lager</a></li>
    <li><a href="test.php?cat=ale">Ale</a></li>
    <li><a href="test.php?cat=palelager">Pale Lager</a></li>
</ul>

//handle it in test.php page or where you want 

<?php if(isset($_GET['cat'])) { 
    echo $_GET['cat'];// do anyting with cat
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:05:09.480

您的标记无效。链接不能包含输入，输入也不能包含任何内容。

如果您希望提交单击的值，则不需要链接或 JavaScript。只需使用提交按钮：

```
<form id="searchCategory" action="test.php" method="post">
    <fieldset>
        <legend>Beers</legend>

        <input type="submit" name="title" value="Lager">
        <input type="submit" name="title" value="Ale">
        <input type="submit" name="title" value="Pale Lager">
    </fieldset>
</form> 
```

# java - 带有 DST 的 Java 时区

> ID：15598736
> 
> 赞同：2
> 
> 时间：2013-03-24T12:57:54.743
> 
> 标签：java, timezone, dst

我有以下代码：

```
 public static void main(String[] args) {
       DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
   //get current date time with Date()
       Date date = new Date();
       String currentDate = dateFormat.format(date);

       final SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
         try {
            System.out.println(sdf.format(getSomeDate(currentDate,TimeZone.getTimeZone("Asia/Omsk"))));
         } catch (ParseException e) {
         // TODO Auto-generated catch block
         e.printStackTrace();
       }  
    }

    public static Date getSomeDate(final String str, final TimeZone tz) throws ParseException {
       final SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
       sdf.setTimeZone(tz);
       return sdf.parse(str);
    } 
```

现在的问题是，如果我使用我想要的时区（即“美国/芝加哥”），我会得到完全错误的时间。它执行当前时间 +6 而不是 -6。

那么我该如何解决这个问题，因为现在我必须从 GMT + 6 开始设置一个时区才能为我的程序获取正确的时间和日期。

此外，Java 会自动合并 DST 设置吗？由于世界各地的人们都在使用它，因此有些人使用不同的 DST 时间，因此很难保持正确的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-04T06:02:39.447

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T14:14:12.500

我想问题是您在 getSomeDate() 方法中只为 SimpleDateFormat 设置了一次 TimeZone。尝试对 SimpleDateFormat 的所有实例执行此操作。

# c# - 如何将 ldap 请求更改为关系数据库？

> ID：15598739
> 
> 赞同：1
> 
> 时间：2013-03-24T12:58:10.540
> 
> 标签：c#, java, database, ldap

我想这样做：有人通过 LDAP 协议发送请求，例如用户名和密码，以进行身份​​验证。

是否有任何方法（使用 c#、java 或其他程序）将此 LDAP 协议连接到关系数据库（而不是标准 LDAP 存储），从该数据库获取结果并通过 LDAP 协议返回结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:15:24.033

openldap有多种[后端](http://www.openldap.org/doc/admin24/backends.html)。如果没有一个直接的数据库后端适合您，您总是可以考虑使用 Perl 接口通过适当的映射将数据传入/传出关系数据库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T16:03:07.147

拦截和解析 ldap 查询数据对于您的需求来说可能是一个巨大的开销。我相信解决您的问题的最有效方法是用您喜欢的编程语言编写一个简单的应用程序/脚本，定期从您的关系数据库中提取您的用户帐户（或者在您的数据库中的数据更改时触发）并创建它们在 ldap 服务器上。这样，您可以将数据库用作“主”，但 ldap 将用于进行身份验证。

但是，此解决方案要求您可以以未加密的方式访问用户的密码，或者加密/散列机制与 ldap 兼容。

# makefile - Makefile 每次都重建一切，为什么？

> ID：15598747
> 
> 赞同：2
> 
> 时间：2013-03-24T12:58:51.047
> 
> 标签：makefile

我在这里有简单的makefile：

```
SOURCES= $(wildcard *.c)
OBJECTS= $(patsubst %.c, %.o, $(SOURCES))
NAMES= $(patsubst %.c, %, $(SOURCES))
CC=gcc
CFLAGS= -Wall -c -o     
TASKS_IN_DIRS= $(addprefix obj/,$(OBJECTS)) $(addprefix bin/,$(NAMES))

all: $(NAMES)

$(NAMES): %: %.o $(OBJECTS)
    $(CC) -o bin/$@ obj/$^
$(OBJECTS): %.o: %.c 
    $(CC) $(CFLAGS) obj/$@ $<
clean:
    rm -rf $(TASKS_IN_DIRS) 
```

1.  获取所有 c 文件名。
2.  用它们制作简单的名称（不带扩展名）和对象名称。
3.  做事

重要的是 - 一切正常，但每次我打印 make（编译和链接所有文件）时都有效。即使我没有改变任何东西并且我连续做了几次，依赖关系有问题吗？

我期望像“blabla 是最新的”这样的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T13:20:32.173

```
$(OBJECTS): %.o: %.c 
    $(CC) $(CFLAGS) obj/$@ $< 
```

正在您的当前目录中查找 .o 文件。因为他们不在那里，所以正在重建他们。

以下做你想要的。

```
SOURCES= $(wildcard *.c)
OBJECTS:= $(patsubst %.c, %.o, $(SOURCES))
OBJECTS:= $(addprefix obj/,$(OBJECTS))
NAMES:= $(patsubst %.c, %, $(SOURCES))
NAMES:= $(addprefix bin/,$(NAMES))
CC=gcc
CFLAGS= -Wall -c -o
TASKS_IN_DIRS=$(OBJECTS) $(NAMES)

all: $(NAMES)

$(NAMES): $(OBJECTS)
    $(CC) -o $@ $<

obj/%.o: %.c
    $(CC) $(CFLAGS) $@ $<

clean:
    rm -rf $(TASKS_IN_DIRS) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T13:43:23.317

*你撒谎了。*您承诺每个`$(NAMES)`目标都在当前目录中创建其目标文件，但由于`$(CC) -o bin/$@ obj/$^`它是在`bin`目录中创建的。

在下一次`make`调用时，它找不到目标文件并再次运行每个命令。

*Makefile 的硬性和快速规则：*每个非 PHONY 目标必须`$@`在其命令中的某处使用纯文本来指示它创建的文件。

# c - 外部变量在c中的全局定义

> ID：15598750
> 
> 赞同：10
> 
> 时间：2013-03-24T12:59:02.197
> 
> 标签：c, gcc, global-variables, extern

我有以下我感兴趣的源代码。

```
#include <stdio.h>
extern int foo;
int foo = 32;

int main()
{
printf("%d", foo);
} 
```

这是一段完全正常的代码，当我编译它时

```
gcc -Wall -Wextra -pedantic foo.c 
```

我没有收到任何警告。

这似乎很奇怪，因为变量在同一个文件中既定义为外部变量，又定义为全局变量。我很确定链接器很容易在同一个文件中找到外部变量的引用，但它看起来不像是编码错误吗？如果是这样，为什么编译器不对此发出警告？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T13:02:01.873

没有什么奇怪的。您首先声明了一个变量（您向编译器承诺它存在），然后您实际定义了它。这没有问题。

此外，默认情况下，所有不是函数本地且未定义为的变量`static`都是`extern`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-24T13:01:04.113

你似乎误解了什么`extern`。`extern`只是让你的声明只是一个声明而不是一个定义。

```
int i; //definition of i
extern int i; //declaration of i 
```

对同一个变量有多个声明是完全正常的，但整个程序中应该只存在一个定义。将此与函数进行比较

```
void f(void); //declaration
void f(void) //definition(and redeclaration)
{
} //definition 
```

为了使用一个变量或函数，你只需要它的声明。它的定义可能出现在程序的任何地方（链接器会找到它）。任何地方都可以是同一个文件、另一个文件，甚至是外部库。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-24T13:01:29.430

> 这似乎很奇怪，因为变量在同一个文件中既定义为外部变量，又定义为全局变量。

```
extern int foo; 
```

说：它声明时没有定义一个`int`名为`foo`.

```
 int foo = 32; 
```

它声明并定义了一个以外部链接`int`命名的类型的对象。`foo`

没有矛盾，它是有效的 C 代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T13:01:42.180

不同之处在于前者是一个声明 ->`extern`声明一个变量并说它将在附近的某个地方可用。您可以拥有任意数量的声明，而后者是一个必须恰好存在一次的定义。
所以应该没有警告也没有错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T13:07:20.863

extern 是一种为在别处定义的变量提供可见性的方法......

extern 就像一个承诺...

在 example.h

```
extern int g;// promises that this will be in the object code to anything that includes example.h 
```

例子。C

```
int g; 
```

# php - 如何捕获 require_once/include_once 异常？

> ID：15598751
> 
> 赞同：7
> 
> 时间：2013-03-24T12:59:20.890
> 
> 标签：php, exception, include, try-catch, require

我正在尝试编写类似的代码：

```
<?php
$includes = array(
    'non_existing_file.php', //This file doesn't exist.
);

foreach ($includes as $include) {
    try {
        require_once "$include";
    } catch (Exception $e) {
        $message = $e->getMessage();
        echo "
            <strong>
              <font color=\"red\">
                A error ocurred when trying to include '$include'.
                Error message: $message
              </font>
            </strong>
        ";
    }
} 
```

我试过`require_once`and `include_once`，但`try catch`没有发现异常。

我怎样才能捕捉到这个**致命错误/警告**异常？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-24T13:29:16.197

由于 include/require 不会引发异常，因此请先检查您要包含的文件是否存在并且可读。例如：

```
$inc = 'path/to/my/include/file.php';

if (file_exists($inc) && is_readable($inc)) {

    include $inc;

} else {

    throw new Exception('Include file does not exists or is not readable.');
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T13:01:47.397

这些函数正在抛出[E_COMPILE_ERROR](http://www.php.net/manual/en/function.require.php)，并且不能像这样被捕获。

要处理这些错误，请参阅[set_error_handler](http://php.net/manual/en/function.set-error-handler.php)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T14:00:07.720

这个解决方案（改编自[这里](https://stackoverflow.com/questions/277224/how-do-i-catch-a-php-fatal-error)）对我来说很好：

```
register_shutdown_function('errorHandler');

function errorHandler() { 
    $error = error_get_last();
    $type = $error['type'];
    $message = $error['message'];
    if ($type == 64 && !empty($message)) {
        echo "
            <strong>
              <font color=\"red\">
              Fatal error captured:
              </font>
            </strong>
        ";
        echo "<pre>";
        print_r($error);
        echo "</pre>";
    }
} 
```

# vb.net - DateValue 和 SQL DATETIME - 30/12/1899 转换为 01/01/01？

> ID：15598754
> 
> 赞同：0
> 
> 时间：2013-03-24T12:59:34.043
> 
> 标签：vb.net, sql-server-2008

请看下面的数据库结构：

```
CREATE TABLE TestStartDate (PersonID int, StartDate datetime NOT NULL)
INSERT INTO TestStartDate VALUES(1,'1899-12-30') 
```

和下面的代码：

```
Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        Dim objCommand As SqlCommand, objCommand2 As SqlCommand
        Dim objCon As SqlConnection
        Try
            objCommand = New SqlCommand
            Using objCommand
                Dim strConString As String = "Data Source=IANSCOMPUTER;Initial Catalog=Test;Integrated Security=True;MultipleActiveResultSets=true"
                objCon = New SqlConnection
                Using(objCon)
                    objCon.ConnectionString = strConString
                    objCon.Open()
                    objCommand.Connection = objCon
                    objCommand.CommandText = "select startdate from TestStartDate "
                    Dim objDR As SqlDataReader = objCommand.ExecuteReader
                    If objDR.HasRows Then
                        objDR.Read()
                        Using objCon
                            objCommand2 = New SqlCommand
                            Using objCommand2
                                objCommand2.Connection = objCon
                                objCommand2.CommandText = "INSERT INTO TestStartDate (StartDate) VALUES (@StartDate)"
                                objCommand2.Parameters.AddWithValue("@StartDate", DateValue(objDR("StartDate"))) 'line 24
                                'objCommand2.Parameters.AddWithValue("@StartDate", objDR("StartDate")) 'line 25
                                objCommand2.ExecuteNonQuery() 'Line 26
                                Dim date1 As Date = objDR("startdate")
                            End Using
                        End Using
                    End If
                End Using
            End Using
        Catch ex As Exception
            Throw
        Finally

        End Try
    End Sub 
```

代码在第 26 行抛出异常（第 26 行有注释）：

> SqlDateTime 溢出。必须在 1753 年 1 月 1 日上午 12:00:00 到 9999 年 12 月 31 日晚上 11:59:59 之间

我可以通过注释掉第 24 行并取消注释第 25 行来解决此问题。为什么会`DATEVALUE`导致此异常？

我查看了以下网页：http: [//msdn.microsoft.com/en-us/library/6d6k22a5%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/6d6k22a5%28v=vs.80%29.aspx)。这表明 DATEVALUE 可能正在将 30/12/1899 转换为 01/01/01（01/01/01 在 SQL Server 中不是可接受的值）？如果是这种情况，那么为什么 30/12/1899 转换为 01/01/01？

# java - oracle.jdbc.driver.OracleDriver ClassNotFoundException

> ID：15598757
> 
> 赞同：9
> 
> 时间：2013-03-24T12:59:51.047
> 
> 标签：java, eclipse, jdbc, oracle10g, classnotfoundexception

This is my code for which I am getting error. My `classes12.jar` has been imported as an external jar.

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class LoginAction extends HttpServlet {
Connection conn;
Statement stmt;
ResultSet rs;
String query = "SELECT * FROM v_urja_login";
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter out = response.getWriter();
    out.println("Hello");
    String u_name = request.getParameter("uname");
    String u_pass = request.getParameter("upass");
    out.println(u_name);
    out.println(u_pass);
    try{
        Class.forName("oracle.jdbc.driver.OracleDriver");
        conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","urja","urja");
        stmt = conn.createStatement();
        rs = stmt.executeQuery(query);
    }catch(SQLException sex){
        sex.printStackTrace();
    } catch (ClassNotFoundException cnf) {
        cnf.printStackTrace();
    }
}
} 
```

Stacktrace:

```
java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at LoginAction.doPost(LoginAction.java:27)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T13:13:20.100

```
 Class.forName("oracle.jdbc.driver.OracleDriver"); 
```

此行会导致`ClassNotFoundException`，因为您没有将`ojdbc14.jar`文件放在项目的 lib 文件夹中。或者你还没有设置`classpath`所需的 jar

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-25T07:46:04.967

`java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver`

只需将**ojdbc14.jar**添加到您的类路径中。

以下是在eclipse中添加ojdbc14.jar的步骤：

1）在你的项目中

2) 图书馆

3）右键单击JRE系统库

4) 构建路径

5）选择配置构建路径

6) 单击添加外部 JAR...

7) C:\oracle\app\oracle\product\10.2.0\server\jdbc\lib

8）在这里你会得到ojdbc14.jar

9) 选择这里

10) 打开

11) 好的

保存并运行程序，您将获得输出。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-07T18:17:05.340

在 Eclipse 中，右键单击您的应用程序

**运行方式 -> 运行配置 ->**从**类型过滤器文本框中选择您的服务器**

然后在**Bootstrap Entries**下的 Classpath 中添加您的**classes12.jar 文件**并单击**Apply**。
现在，运行文件......这对我有用！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-20T06:26:10.270

方法一：下载ojdbc.jar

将 ojdbc6.jar 添加到部署程序集。右键单击项目->属性->选择部署程序集->单击“添加”->选择“文件系统中的存档”->浏览到保存ojdbc6.jar的文件夹。->添加jar->单击完成- >应用/确定。

方法二：

如果您想将 ojdbc.jar 添加到您的 maven 依赖项中，请点击以下链接：[http ://www.mkyong.com/maven/how-to-add-oracle-jdbc-driver-in-your-maven-local-repository /](http://www.mkyong.com/maven/how-to-add-oracle-jdbc-driver-in-your-maven-local-repository/) 。. 即使您使用的是 maven 项目，也不必将 ojdbc 添加到 maven 依赖项（方法 2），方法 1（直接添加到部署程序集）也可以正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-16T11:21:39.523

尝试通过服务器lib“C:\apache-tomcat-7.0.47\lib”添加ojdbc6.jar或其他版本，

然后在eclipse中重启服务器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-28T16:03:05.730

在日食中，

在 servlet 中使用 JDBC 时，驱动程序 jar 必须放在项目的 WEB-INF/lib 目录中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-27T06:44:59.280

1.右键单击您的java项目。

2.选择“运行方式”。

3.选择“运行配置...”。

4.在页面左侧选择您的服务器，然后您会在右侧看到“CLASS PATH”选项卡，只需单击它即可。

5.点击“USER ENTRIES”并选择“ADD EXTERNAL JARS”。

6.选择“ojdbc14.jar”文件。

7.单击应用。

8.单击运行。

9.Finally 重启你的服务器然后它就会被执行。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-09-20T05:16:07.290

您可以添加一个具有上述指定类的 JAR，存在已安装的 java 版本支持的 egojdbc jar，还请确保已将其添加到类路径中。

# highcharts - Upgrading to v3.0

> ID：15598765
> 
> 赞同：0
> 
> 时间：2013-03-24T13:00:38.473
> 
> 标签：highcharts

I have updated from Highcharts 2.3.5 to Highcharts 3.0 and found some problems:

1) The printer button (exporting) - has disappeared ?

2) Is the export icon changed it's size? as I have added new custome image clickable buttons - which should change their size too

See image attached:

![enter image description here](../Images/8a424bda2f537ee2ffebf6c71a28a3be.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:17:53.980

在发布公告中提到了这一点

[http://www.highcharts.com/component/content/article/2-news/54-highcharts-3-0-released](http://www.highcharts.com/component/content/article/2-news/54-highcharts-3-0-released)

滚动到底部。

# c# - QuadrilateralTransformation Class

> ID：15598766
> 
> 赞同：-1
> 
> 时间：2013-03-24T13:00:40.930
> 
> 标签：c#, aforge

i tray QuadrilateralTransformation Class to convert the image to rectangle, the image has been rectangle, but i want to know the new coordinates of any point so i want the transformation array can you help me ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:41:44.817

正如您在课程的源代码中看到的：

[https://code.google.com/p/aforge/source/browse/trunk/Sources/Imaging/Filters/Transform/QuadrilateralTransformation.cs](https://code.google.com/p/aforge/source/browse/trunk/Sources/Imaging/Filters/Transform/QuadrilateralTransformation.cs)

没有任何功能允许这样做。但由于 aforge 是开源的，您可以复制计算新矩形的部分，因此该函数`QuadTransformationCalcs.MapQuadToQuad`并使用返回矩阵计算新点。您需要的所有代码都在上面的源代码文件中

# r - 使用 R 中的 DAAG 包进行交叉验证

> ID：15598769
> 
> 赞同：2
> 
> 时间：2013-03-24T13:00:57.787
> 
> 标签：r

我试图让`CVlm`函数工作应用`DAAG`程序包我的数据集：适合（有 27 个条目（行）和 6 个变量我在 R 中使用以下表达式：

```
CrossVal<-CVlm(df=fit,m=3,
form.lm=formula(fit$X1~fit$X2 + fit$X3 + fit$X4 + fit$X5 + fit$X6)) 
```

当使用`m=1`与 1 不同的 m 时，它可以很好地工作（例如，如上所示的 3）我收到一条错误消息：

```
Error in `[<-.data.frame`(`*tmp*`, rows.out, "cvpred", value = c(228.541323416399,  : 
  replacement has 27 rows, data has 9
In addition: Advarselsbesked:
'newdata' had 9 rows but variable(s) found have 27 rows 
```

我很乐意为使简历正常工作提供一些帮助 在此先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:45:08.240

很难说没有可重复的例子，但我认为你没有写出正确的公式。这应该适合你

```
 CrossVal<-CVlm(df=fit,m=3,
                form.lm= formula(X1 ~ X2 + X3 + X4 + X5 + X6)) 
```

例如，使用`housprices`来自`DAAG`I 的数据可以重现错误：

```
 CVlm(df = houseprices, form.lm =
        formula(houseprices$sale.price ~ houseprices$area), m=2)
Error in `[<-.data.frame`(`*tmp*`, rows.out, "cvpred", value = c(201.067581902091,  : 
  replacement has 15 rows, data has 7 
```

但这很好用：

```
CVlm(df = houseprices, form.lm = formula(sale.price ~ area), m=2)
Analysis of Variance Table

Response: sale.price
          Df Sum Sq Mean Sq F value Pr(>F)  
area       1  18566   18566       8  0.014 * 
```

**编辑**为什么 m =1 有效，而不是 m 与 1 不同：

这是`CVlm`发生错误的代码部分：

```
subs.lm <- lm(form, data = df[rows.in, ])
df[rows.out, "cvpred"] <- predict(subs.lm, newdata = df[rows.out, 
```

发生错误是因为我们尝试将 df 的 9 行设置为 27 行。])

```
Error in `[<-.data.frame`(`*tmp*`, rows.out, "cvpred", value = c(228.541323416399,  : 
  replacement has 27 rows, data has 9 
```

确实`predict`适用于效果方面，它不使用`newdata`对象，而是使用原始 data.frame ，因为您给出了使用公式`$`，这就是它在警告中打印的内容：

```
In addition: Advarselsbesked:
'newdata' had 9 rows but variable(s) found have 27 rows 
```

使用 m=1 它可以工作，因为 newdata 具有与原始数据集相同的行数。当然结果是不正确的，因为它不使用原始数据的排列的新数据子集。

# html - 如何修改 Fancybox 1.3.4 CSS 来实现自定义控件？

> ID：15598772
> 
> 赞同：0
> 
> 时间：2013-03-24T13:01:05.500
> 
> 标签：html, css, fancybox

如何修改 Fancybox 1.3.4 CSS 以实现自定义控件图像？下面的css和图像：

[控制](http://img16.imageshack.us/img16/4081/controlsj.png)

[CSS](http://demo-store.prestashop.com/css/jquery.fancybox-1.3.4.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:41:08.343

将图像精灵替换为自定义的，前三个图标是前进、后退和关闭，如果悬停，则底部相同。

# special-characters - (GATE) 如何让 Minipar 玩特殊字符，如 Ö、Ü、Ä？

> ID：15598773
> 
> 赞同：0
> 
> 时间：2013-03-24T13:01:07.900
> 
> 标签：special-characters, gate

在学习 Gate 的过程中，遇到了如下问题：

Minipar 在看到 Ö、Ü、Ä 等非注释字符时抛出异常。

例如，在句子*“Batten 病（也称为 Spielmeyer-Vogt-Sjögren-Batten 病）是一种罕见的、致命的常染色体隐性遗传神经退行性疾病，始于儿童期。” （来自 wiki 文章）* Minipar 在停止工作之前得到的注释是“Batten disease（也称为 Spielmeyer-Vogt-Sj”，正好在字符**ö**之前，所以这让我猜测这是一个在使用时值得关注的案例Gate. 因为同一个流水线轻而易举地处理了其他几篇文章。

在消息选项卡中，它报告：

```
 gate.util.InvalidOffsetException
    at gate.annotation.AnnotationSetImpl.getNodes(AnnotationSetImpl.java:773)
    at gate.annotation.AnnotationSetImpl.add(AnnotationSetImpl.java:802)
    at minipar.Minipar.runMinipar(Minipar.java:419)
    at minipar.Minipar.execute(Minipar.java:527)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.creole.ConditionalSerialController.runComponent(ConditionalSerialController.java:154)
    at gate.creole.SerialController.executeImpl(SerialController.java:153)
    at gate.creole.ConditionalSerialAnalyserController.executeImpl(ConditionalSerialAnalyserController.java:129)
    at gate.creole.AbstractController.execute(AbstractController.java:75)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.gui.SerialControllerEditor$RunAction$1.run(SerialControllerEditor.java:1619)
    at java.lang.Thread.run(Unknown Source)
gate.creole.ExecutionException: gate.util.InvalidOffsetException
    at minipar.Minipar.runMinipar(Minipar.java:491)
    at minipar.Minipar.execute(Minipar.java:527)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.creole.ConditionalSerialController.runComponent(ConditionalSerialController.java:154)
    at gate.creole.SerialController.executeImpl(SerialController.java:153)
    at gate.creole.ConditionalSerialAnalyserController.executeImpl(ConditionalSerialAnalyserController.java:129)
    at gate.creole.AbstractController.execute(AbstractController.java:75)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.gui.SerialControllerEditor$RunAction$1.run(SerialControllerEditor.java:1619)
    at java.lang.Thread.run(Unknown Source)
Caused by: gate.util.InvalidOffsetException
    at gate.annotation.AnnotationSetImpl.getNodes(AnnotationSetImpl.java:773)
    at gate.annotation.AnnotationSetImpl.add(AnnotationSetImpl.java:802)
    at minipar.Minipar.runMinipar(Minipar.java:419)
    ... 9 more
gate.creole.ExecutionException: Document doesn't have sentence annotations. please run tokenizer, sentence splitter and then Minipar
    at minipar.Minipar.saveGateSentences(Minipar.java:194)
    at minipar.Minipar.execute(Minipar.java:525)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.creole.ConditionalSerialController.runComponent(ConditionalSerialController.java:154)
    at gate.creole.SerialController.executeImpl(SerialController.java:153)
    at gate.creole.ConditionalSerialAnalyserController.executeImpl(ConditionalSerialAnalyserController.java:129)
    at gate.creole.AbstractController.execute(AbstractController.java:75)
    at gate.util.Benchmark.executeWithBenchmarking(Benchmark.java:291)
    at gate.gui.SerialControllerEditor$RunAction$1.run(SerialControllerEditor.java:1619)
    at java.lang.Thread.run(Unknown Source) 
```

我要再次感谢 Ian 的热情支持。

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:22:13.680

这似乎是某种与编码相关的问题，但不幸的是，我自己无法进行任何调试，因为 minipar 解析器二进制文件似乎不再可从[通常的下载页面](http://webdocs.cs.ualberta.ca/~lindek/minipar.htm)获得 - 我得到一个小的（小于 2kB）灰度JPEG 图像而不是多 MB .tgz。

有几件事你可以从我的脑海中尝试。GATE Minipar 包装器为解析器写入输入文件，并使用您正在运行的系统上的默认编码读取解析器的输出。我的猜测是解析器正在以不同的编码产生其输出（可能与原始训练数据的编码有关？）。

GATE 包装器将其输入写入一个临时文件，只要您让 GATE Developer 在后台运行（临时文件在 Developer 退出时被删除），您就应该能够在临时目录中找到该文件。我会尝试从命令行对该文件运行 minipar-windows.exe 并查看输出的样子

```
C:\path\to\minipar-windows.exe -p C:\path\to\minipar\data -file GATESentencesNNNNNN.txt 
```

输出可能会为您提供有关失败的线索。如果它看起来正确并且您可以确定它尝试使用的编码，您可以将您的 GATE 开发人员设置为将其用作其默认编码（如果您使用`gate.exe`它来启动它，那么您可以通过添加一行`-Dfile.encoding=ISO-8859-1`或其他内容来执行此操作`gate.l4j.ini`）并查看如果这有帮助。如果是这样，我们可以考虑在 PR 中添加一个参数来指定与解析器可执行文件交换数据时要使用的编码。

# matlab - 表达式中的“大于”符号：(1-X).*(X>1) 是什么意思？

> ID：15598775
> 
> 赞同：1
> 
> 时间：2013-03-24T13:01:11.990
> 
> 标签：matlab

MATLAB：表达式中的“大于”符号：(1-X).*(X>1) 是什么意思？

X 是一个列向量，理论上 X 的每个元素都在 0 到 1 的范围内。在数值上，由于精度有限，一个元素可能会稍微超过 1.0，因此这可能是一种条件或约束。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:08:06.717

在您描述的上下文中，它本质上是“选择”大于 1 的元素并从 1 中减去它们；结果中的所有其他元素（位于 位置的元素`X <= 1`）将为 0，因为它们已乘以 的结果中的零`X > 1`。这是一个例子：

```
>> X = [0 0.5 1 1.5 2];
>> X > 1

ans =

 0     0     0     1     1

>> (1 - X)

ans =

1.0000    0.5000         0   -0.5000   -1.0000

>> (1 - X) .* (X > 1)

ans =

     0         0         0   -0.5000   -1.0000 
```

在最后一个结果中，第一个结果中的三个零已（按元素）与中间结果中的前三个值相乘，并且这两个零与中间结果中的最后两个值相乘。这样，它就有效地选择了（1-X）的结果在X > 1开始的位置。

显然，如果 X 的任何值都不大于 1，那么结果将始终全为零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T13:10:21.967

对于大于 1 的每个元素，表达式`(X > 1)`返回(逻辑 '1')，否则返回 (逻辑 '0')。因此，会生成一个布尔向量（与 相同大小），其中包含 '1'，其中对应的元素大于 1。我强烈建议您更加熟悉[MATLAB 运算符](http://www.mathworks.com/help/matlab/matlab_prog/operators.html)。`true``false``X > 1``X``X`

至于表达式的其余部分：

`(1 - X)`简单地返回一个与 维数相同的向量，其中每个元素都是从 1`X`中减去相应元素的结果。`X`

`.*`是逐元素乘法，因此最终结果是一个向量（与 具有相同的维度），如果 X [i] >1，则`X`第 i 个元素等于 (1 - X [i )，否则为 0。]

### 例子

```
 >> X = [-1 4 0 2 -3];
 >> X > 1

 ans =
      0     1     0     1     0

 >> 1 - X

 ans =
      2    -3     1    -1     4

 >> (1 - X) .* (X > 1)

 ans =
      0    -3     0    -1     0 
```

# delphi - 德尔福 XE3 和 TChromium

> ID：15598776
> 
> 赞同：1
> 
> 时间：2013-03-24T13:01:12.780
> 
> 标签：delphi, delphi-xe3, tchromium

用Delphi XE3 TChromium中的一个组件制作出工作需要获取加载到论坛内容页面的工作代码示例：

```
procedure DoWork (const doc: ICefDomDocument);
var
  q: ICefDomNode;
begin
  q: = doc.GetElementById ('q');
  if Assigned (q) then q.SetElementAttribute ('value', 'Hello, world');
end;

procedure actDomExecute;
var
  q: ICefDomNode;
begin
   crm.Browser.MainFrame.VisitDomProc (DoWork);
end; 
```

但是调试器以某种方式绕过了顽固的 DoWork 的执行。可能有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:20:20.327

我让 tChromium 在 Delphi 7 下工作，它应该都是一样的。

我采取了一些步骤来从 DOM 中读取元素

首先我从这个项目中得到了一个包装： [https ://code.google.com/p/delphichromiumembedded/downloads/detail?name=dcef-r306.7z&can=2&q=](https://code.google.com/p/delphichromiumembedded/downloads/detail?name=dcef-r306.7z&can=2&q=)

XE2 也有一个，将其转换为 XE3 不需要太多，如果您需要帮助，我很乐意应要求提供帮助。

然后在 tchromium 中声明一个开始和结束

```
procedure TMainForm.crmLoadStart(Sender: TObject;   const browser: ICefBrowser; const frame: ICefFrame); begin   
  if (browser <> nil) and (browser.GetWindowHandle = crm.BrowserHandle) and ((frame = nil) or (frame.IsMain)) then FLoading := True; 
end; 
```

,

```
procedure TMainForm.crmLoadEnd(Sender: TObject; const browser: ICefBrowser; const frame: ICefFrame; httpStatusCode: Integer; out Result: Boolean);
begin
  if (browser <> nil) and (browser.GetWindowHandle = crm.BrowserHandle) and ((frame = nil) or (frame.IsMain)) then begin
    FLoading := False;
    // see if loaded
    while(httpStatusCode <> 200) do begin
      Application.ProcessMessages;
      Sleep(50);
    end;
    browser.GetMainFrame.VisitDomProc(DomProc);
  end;
end; 
```

像这样声明一个名为 domproc 的过程：

```
procedure DomProc(const Doc: ICefDomDocument);
var
  Node: ICefDomNode;
begin
  url := Doc.BaseUrl;
  if(url='www.goodwebsite.com') then // check if it is the right page and not add
    Node := Doc.Body.Document.GetElementById('idofwhatyouarelookingfor');
  Node.SetElementAttribute('value','Hello world :D');
end; 
```

这是迄今为止我发现的最可靠的方法，您需要确保页面加载良好并且您获得了正确框架的 dom。

希望它对您有所帮助，请务必查看上面下载链接中的示例代码，这对我有很大帮助。

玩得开心编码，德尔福摇滚！

# java - Java 反射 - 错误抛出

> ID：15598783
> 
> 赞同：0
> 
> 时间：2013-03-24T13:01:51.913
> 
> 标签：java, exception, reflection, throws

我有以下代码：

```
class ClassDetails {
  private String current_class;
  public ClassDetails(String current_class) {
    this.current_class = current_class;
  }
  public void getClassDetails() throws ClassNotFoundException {
    try {
        Class theClass = Class.forName(current_class);
        String name = theClass.getName() ;
        System.out.println(name);
    } catch (ClassNotFoundException e) {
        System.out.println(e.getMessage());
    }
  }
}

class MMain {
  public static void main(String[] args) {
      ClassDetails C = new ClassDetails(args[0]);
      C.getClassDetails();
  }
} 
```

我主要有这个错误：

```
Unhandled exception type ClassNotFoundException 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:05:08.317

如签名所示，您的`main`方法调用了`getClassDetails()`引发该异常的方法：

```
public void getClassDetails() throws ClassNotFoundException 
```

而且您没有捕获它，也没有将其扔到方法中，因此您的代码将无法编译。所以你必须这样做：

```
public static void main(String[] args) throws ClassNotFoundException {
    ClassDetails C = new ClassDetails(args[0]);
    C.getClassDetails();
} 
```

或者：

```
public static void main(String[] args) {
    ClassDetails C = new ClassDetails(args[0]);
      try
      {
          C.getClassDetails();
      }
      catch(ClassNotFoundException ex)
      {
          //Add exception handling here
      }
} 
```

# scala - 如何使用带有泛型参数的结构类型？

> ID：15598788
> 
> 赞同：6
> 
> 时间：2013-03-24T13:02:32.077
> 
> 标签：scala, generics, structural-typing

我有两个案例类

```
case class StringCaseClass(argument: String)

case class IntCaseClass(argument: Int) 
```

我想定义一个结构类型，它将匹配这两者的伴随对象

```
type HasApply1 {
  def apply[A, R](argument: A): R
} 
```

这会编译得很好，但是当我尝试像这样使用它时

```
def method(caseClass: HasApply1) {
  // whatever
}

method(StringCaseClass) 
```

我会得到一个编译器错误

```
found   : StringCaseClass.type
required: WithApply1
            (which expands to)  AnyRef{def apply[A, R](string: A): R} 
```

有没有办法做到这一点？如果我将结构类型重新定义为具有 A 和 R 的具体类型，它将正确编译，但是我失去了灵活性

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T18:55:53.267

@aloiscochard 的评论几乎就在那里。他忘记提到的是案例类伴生对象*已经*实现了适当的`FunctionN`特征，所以你可以简单地这样做，

```
scala> case class StringCaseClass(argument: String)
defined class StringCaseClass

scala> case class IntCaseClass(argument: Int)
defined class IntCaseClass

scala> def method[A, R](caseClass: A => R, a: A) = caseClass(a)
method: [A, R](caseClass: A => R, a: A)R

scala> method(StringCaseClass, "foo")
res0: StringCaseClass = StringCaseClass(foo)

scala> method(IntCaseClass, 23)
res1: IntCaseClass = IntCaseClass(23) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T14:07:12.437

一般来说，您应该避免结构类型，因为它*非常*昂贵。由于 JVM 的限制，该调用将转换为反射调用。当您开始使用 scala 2.10 结构类型时，将在编译时产生警告（尽管您可以使用标志禁用它）。

如果您正在寻找一种更通用的方法来向不共享继承层次结构的类添加功能，您可以使用类型类。

这是一个简单的例子：

```
trait CanCreateRFromA[A,R]{
    def createNew(a:A): R
}

implicit object CanCreateBlahFromInt extends CanCreateRFromA[Int,Blah2]{
    def createNew(i:Int):Blah2 = new Blah2(i)
}

implicit object CanCreateBlah1FromString extends CanCreateRFromA[String,Blah1]{
    def createNew(s:String):Blah1 = new Blah1(s)
}

case class Blah1(something:String)
case class Blah2(something:Int)

def createRFromA[A,R](a:A)(implicit tc:CanCreateRFromA[A,R])= tc.createNew(a) 
```

然后你可以调用：

```
createRFromA(1) // This gives a Blah2
createRFromA("1") // This gives a Blah1 
```

同样，我不确定您要完成什么，但是使用类型类可能会做您想做的事情，而且速度会快得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:52:31.433

您没有将 的实例传递`StringCaseClass`给您的`method`. 你在那里传递的是伴随对象`StringCaseClass`（它是为案例类自动生成的）。

试试这是否有效：`method(StringCaseClass("dummy"))`.

# io - Read digital data directly from a USB port

> ID：15598795
> 
> 赞同：0
> 
> 时间：2013-03-24T13:03:21.767
> 
> 标签：io, usb, arduino, sensors, digital

I use Arduino for comunication between sensors and my [C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29) application using a serial port. Is there any possibility to access digital components directly such as *[Force Sensitive Resistor - Square](https://www.sparkfun.com/products/9376)*, from a USB port?

Do I have to write a driver for that?

I drew a semi-schematic diagram to exemplify:

![enter image description here](../Images/d7ab97505a23ccccae8d36ba8c702116.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:19:29.540

没有办法通过 USB 直接读取模拟传感器，因为它是数字总线。您需要某种处理将模拟信号转换为数字信号并通过总线正确通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:43:35.090

从力敏电阻的外观来看，这是一个模拟元件；电阻和电容随着施加在传感器上的力而变化。如果您查看 FSR 安装指南文档，建议的电气接口从第 16 页开始。

我会推荐第一个电路，将 Vout 连接到 Arduino 上的模拟输入。从那里您需要将 ADC 计数转换为电压，然后使用 Arduino 中的查找表函数根据图 9 从电压转换为力。此时，您有一个包含施加到传感器的力的变量。从这里您可以像任何其他值一样通过 USB 串行总线传输值。然后，您的 C# 应用程序需要读取串行数据，并解析出该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:50:52.053

为了从任何传感器采样信息，您需要一个中介。Arduino 使用 FTDI 芯片将 UART（串行）转换为 USB。当您通过此连接读取数据时，您正在通过 USB 串行接口读取数据。我的建议是坚持使用 Arduino 或其他微控制器。

如果您真的想通过 USB 直接读取它（而不是通过 USB 串行转换器），您将不得不在支持 USB 的设备中实现某种协议，例如[Stellaris Launchpad](http://www.ti.com/ww/en/launchpad/stellaris_head.html?DCMP=stellaris-launchpad&HQS=stellaris-launchpad)或[Atmega32U4](http://www.atmel.com/devices/atmega32u4.aspx) AKA [Arduino Lenardo](http://arduino.cc/en/Main/arduinoBoardLeonardo)。您还必须编写一个驱动程序来描述如何与此 USB 设备进行通信。除非您能够将其实现为已知的设备，例如键盘或串行端口（是的，我们在那里绕了一圈）。

简而言之，目前还没有制造出的芯片可以将来自传感器的模拟（或数字）值转换为任何操作系统本机可以理解的东西。由于[USB 是一种](http://en.wikipedia.org/wiki/Universal_Serial_Bus)类似于[IP](http://en.wikipedia.org/wiki/Internet_Protocol)的协议，因此您将无法使用谨慎的设备。您将不得不使用带有 USB 堆栈的微控制器。

同样，我的建议是通过现有的串行（通过 USB）端口通过 USB 传递传感器值。这非常简单，并且无需整个 Arduino 即可轻松重现。

# jquery - .length() doesn't fill a new variable jquery

> ID：15598798
> 
> 赞同：0
> 
> 时间：2013-03-24T13:03:31.707
> 
> 标签：jquery, html

I have a function where I want to read the length of the path of a image source and use it in an if else clause but the variable which it is supposed to contain the numeric value seems empty. Neither the if clause nor the else one is being used.

```
<!DOCTYPE html>
<html>
<head>
<script>
function imgresize(img){
var strl=img.src.length;
  if(strl<10)
  {
    //do someting
  }
  else
    //do something
}
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
   <img onclick="imgresize(this)" src="image1.png">
</body>
</html> 
```

Any idea why this strl variable is not being filled?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:51:01.020

尝试这个 ：

[**在这里**](http://jsfiddle.net/PucCp/)生活小提琴[](http://jsfiddle.net/PucCp/)

 ****HTML**

```
<img src="http://cdn1.iconfinder.com/data/icons/musthave/256/Positive.png" alt="etstst" onclick="imgresize(this);">
<img src="zzzz" alt="etstst" onclick="imgresize(this);"> 
```

**jQuery**

```
function imgresize(img) {
    var stringlen =  $(img).attr('src').length;
    alert("length is : " + stringlen);
    if (stringlen < 10) {
        alert("Length smaller than 10");
    } else{
        alert("Length greater than 10");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:19:28.597

# 试试这个：

**[http://jsfiddle.net/aidioo7/Fg3CB/](http://jsfiddle.net/adiioo7/Fg3CB/)**

JS代码：-

```
function imgresize(img) {
    var strl = img.src.length;
    if (strl < 10) {
        alert("Length smaller than 10");
    } else{
        alert("Length greater than 10");
    }
} 
```

HTML 代码：-

```
<img src="http://t2.gstatic.com/images?q=tbn:ANd9GcQTkCsSOSfmGx9uq2EvOeq65-oZBlIzvqSKnqgNgrDEsPn1b7xr" alt="etstst" onclick="imgresize(this);"> 
```**

# android - Unknown Chromium Error -6 when loading local images in Android Webview

> ID：15598802
> 
> 赞同：6
> 
> 时间：2013-03-24T13:03:53.673
> 
> 标签：android, html, cordova, ibm-mobilefirst

I'm working on a Worklight project that downloads a zip file, unpacks it, and stores the files in the specific documents directory of the platform (in iOS that's `NSDocumentDirectory`, on Android I'm using `getFilesDir()`). The file consists of one HTML file and several images, located in a sub directory (media). Downloading and unzipping works fine on both platforms. After the unzip process I'm loading the contents of the HTML file into an existing div (since this is a Worklight app, everything is in one HTML file).

Here things become complicated: The image tag sources in the HTML file that I've downloaded are relative to the HTML file (e.g. 'media/myimage.jpg'). When I inject the HTML file into the Worklight HTML file (which is located in the App bundle/package), the base URL changes and the images can't be found anywhere. I fixed this by writing native functions that rewrite all the image tags in the downloaded HTML file to point to an absolute URL (iOS: `/var/mobile/Applications/<identifier>/Documents/`, Android: `/data/data/<id>/files/`). This works fine on iOS, but on Android it causes the HTML to only load partially. LogCat then shows:

```
Unknown chromium error: -6 
```

If I keep the files as they are, the HTML loads correctly, but obviously with broken images. I've also tried to change the URLs to `file:///data/data/<id>/files/ [...]`, which also causes the HTML to not load completely. I have really no idea what is causing this problem. The app already has the `WRITE_EXTERNAL_STORAGE` permission.

Does anyone have an idea how to fix this? Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T12:53:26.227

原来这个错误是由宽度大于 1500 像素的图像引起的。缩小它们后，错误消失了。我猜一定是Android webview的问题。

# php - PDO UPDATE query does not update table

> ID：15598804
> 
> 赞同：-1
> 
> 时间：2013-03-24T13:04:16.547
> 
> 标签：php, mysql, pdo

The code in question is like this:

```
if (isset($_SESSION['logged_in'])) {
    if (isset($_POST['title'], $_POST['content'], $_POST['id'])) {
        $title = $_POST['title'];
        $content = $_POST['content'];
        $id = $_POST['id'];
    }
    if (empty($title) or empty($content) or empty($id)) {
        $error = 'All fields are required!';
    } else {

        try {

            $query = $pdo->prepare("UPDATE articles SET article_title = ?, article_content = ? WHERE article_id = ? ");

            $query->bindValue(1, 'title');
            $query->bindValue(2, 'content');
            $query->bindValue(3, 'id');

            $query->execute();

            header('Location: index.php');
        } catch (PDOException $e) {
            print_r($e->errorInfo);
            die();
        }
    }
} 
```

It gives me no error whatsoever and the table does not update.

P.S. I am quite new to PHP in general so please bear with me if my errors are somewhat trivial, I just don't have anyone else to ask.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:09:33.770

```
$query->bindValue(1, 'title'); 
$query->bindValue(2, 'content'); 
$query->bindValue(3, 'id'); 
```

bindValue 的第二个值应该是*值*，而不是值的名称，例如；

```
$query->bindValue(1, $title); 
$query->bindValue(2, $content); 
$query->bindValue(3, $id, PDO::PARAM_INT); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T13:12:11.703

如果您是 PHP 新手，那么我建议您尝试另一种使用占位符 (?) 执行查询的方法，因为它更简单。

首先设置您的连接。

```
try {
  # First let us connect to our database 
  $db = new \PDO("mysql:host=localhost;dbname=xx;charset=utf8", "xx", "xx", []); 
 } catch(\PDOException $e){
   echo "Error connecting to mysql: ". $e->getMessage();
 }
 $db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

现在调用准备/执行方法，例如：

```
$stmt = $db->prepare("
        UPDATE articles 
        SET article_title = ?, article_content = ? 
        WHERE article_id = ?
 ");

 $stmt->execute(array($article_title, $article_content,$article_id));

 if($stmt->rowCount()) {
   echo 'success';
 } else {
   echo 'update failed';
 } 
```

# mvc-mini-profiler - Determine if Glimpse is running during Application_BeginRequest()

> ID：15598805
> 
> 赞同：3
> 
> 时间：2013-03-24T13:04:18.577
> 
> 标签：mvc-mini-profiler, glimpse

I have installed Glimpse (Glimpse MVC4) and MiniProfiler (with EF support).

I also installed the MiniProfiler plugin for Glimpse.

I have that all wired up and working. I want to allow the configuration of Glimpse to determine if MiniProfiler should start profiling. That is, if Glimpse is enabled (through Glimpse.axd not via a config setting) I want to call MiniProfiler.Start() in the Application_BeginRequest() method. So, something like this:

```
protected void Application_BeginRequest()
{
    if (Glimpse.IsRunning)
    {
        MiniProfiler.Start();
    }
} 
```

Is there a way to determine if Glimpse is enabled?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T14:47:13.103

*从技术上讲*，有一种方法，但我充其量称它为 hacky。我会让你决定它是否适合你的目的。

```
var policyString = HttpContext.Current.Items["__GlimpseRequestRuntimePermissions"].ToString();
RuntimePolicy glimpsePolicy;
RuntimePolicy.TryParse(policyString, out glimpsePolicy);

if (!glimpsePolicy.HasFlag(RuntimePolicy.Off))
{
    MiniProfiler.Start();
} 
```

我称其为 hack 的原因是，虽然 Glimpse 可能`On`在请求的开始，但它可能会在稍后转为`Off`.

这种行为的一个例子是，一旦 ASP.NET 开始报告不受支持的媒体类型（如图像），Glimpse 就会自动关闭。ASP.NET 在 HTTP 处理程序运行之前无法知道媒体类型。在这种情况下，Glimpse 会说它在请求开始时打开，但在请求结束时会关闭。

# mysql - Mysql查询支付

> ID：15598808
> 
> 赞同：0
> 
> 时间：2013-03-24T13:04:36.787
> 
> 标签：mysql

我有一个名为日志的表，其中包含技术人员按日期为医生所做的工作。它包含字段：`ref_doctor_id (doctor), technician_id (technician) and dos (date)`.
技术人员可以在特定日期为几位医生工作。对于每位医生，我需要了解技术人员在特定日期是否为其他医生做过工作，如果他做过，我需要知道他当天为多少医生做过工作。这是将费用分配给医生。

例如：
我正在工作，`Doctor 6 (id=6)`技术人员每天可以获得 100 美元。
5 日，他只为 6 号医生工作，所以 6 号医生的费用是 100 美元。
6 日，他为 6 号和 8 号医生工作，因此 6 号医生的费用为 50 美元。
7 日，他为 6 号、7 号和 8 号医生工作，因此 6 号医生的费用为 33.33 美元。
该期间医生的总费用为 183.33 美元。

我希望这足够清楚，我希望 SQL 可以解决这个问题。
先感谢您！

```
2013-03-05  6   16
2013-03-06  6   16
2013-03-06  8   16
2013-03-07  6   16
2013-03-07  8   16
2013-03-07  10  16 
```

我的选择是选择包含医生 ID 和技术人员 ID 的记录，然后使用 PHP 循环遍历记录集日期以查看该技术人员在该日期是否有任何其他医生工作。这似乎是一个漫长的过程，但可能是唯一的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:32:28.593

计算子查询中的医生数量并将结果重新加入：

```
select dos, technician_id, dt.numdocs
from t left outer join
     (select dos, technician_id, count(distinct ref_doctor_id) as numdocs
      from t
      group by dos, technician_id
     ) dt
     on dt.dos = t.dos and dt.technician_id = t.technician_id
where ref_doctor_id = 6
group by dos, technician_id 
```

# functional-programming - 通过 consing vs tail-call accumulator 创建一个列表

> ID：15598820
> 
> 赞同：0
> 
> 时间：2013-03-24T13:05:19.107
> 
> 标签：functional-programming, sml

例如，一个函数通过 consing 创建一个列表：

```
fun example1 _ _ [] = []
  | example1 f g (x::xs) =
    if f x
    then (g x)::(example1 f g xs)
    else x::(example1 f g xs) 
```

一个通过尾调用累加器创建一个列表：

```
fun example2 f g xs =
    let fun loop acc [] = acc
          | loop acc (x::xs') =
            if f x
            then loop (acc@[(g x)]) xs'
            else loop (acc@[x]) xs'
    in
        loop [] xs
    end 
```

在给定相同参数的情况下生成相同的列表。

哪个函数的运行时间更好？

追加操作是否会`@`遍历到列表的末尾以追加并最终与 consing 解决方案具有相同的运行时间，但使用更少的空间和稍微复杂的代码？

consing 或 append 是否会创建一个全新的元素（对象的深层副本），即使原始元素没有更改或者它只是重用现有元素？

这个问题为这个问题提供了一个更具体的[例子](https://stackoverflow.com/questions/15585971/efficiency-of-list-operations-in-functional-languages/15591140?noredirect=1#15591140)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:33:46.760

`x :: xs`创建一个新的列表单元，其头部为`x`，尾部为`xs`。它不会创建副本`xs`- 既不深也不浅。所以这是一个 O(1) 操作。

`xs @ [x]`创建一个浅表副本，`xs`其中先前最后一个节点的尾部是 now `[x]`。这是一个`O(n)`操作。

所以你的函数的时间复杂度是，你的函数`example1`的时间复杂度是。这两个功能都消耗辅助空间。因为它的堆栈使用以及因为在堆上创建不属于结果列表的列表。`O(n)``example2``O(n^2)``O(n)``example1``example2``@`

如果在到达列表末尾时更改`example2`为使用`::`而不是`@`然后在结果上使用，它的运行时间将为，但它仍然会比在末尾反转列表的额外成本要慢一些。然而，这可能是一个可以接受的价格，以便能够在没有堆栈溢出的情况下处理大型列表。`List.rev``O(n)``example1`

# quickbooks - CheckAdd ApplyCheckToTxnAdd useMacro用法

> ID：15598825
> 
> 赞同：1
> 
> 时间：2013-03-24T13:05:44.730
> 
> 标签：quickbooks, intuit

根据文档，QuickBooks SDK 中 CheckAdd 消息的 ApplyCheckToTxnAdd 成员采用可选的 usemacro 值。当我这样做时，它会出现错误，因为缺少元素：“TxnID”。

这向我表明文档或 Web 连接器或 QuickBooks 本身存在错误。

我试图复制的业务场景是通过写支票来支付客户贷项通知单。

有任何想法吗？谢谢马克

# php - 如何更改 wordpress 上的搜索永久链接

> ID：15598831
> 
> 赞同：0
> 
> 时间：2013-03-24T13:06:49.230
> 
> 标签：php, wordpress, search

是否可以从以下位置更改 Wordpress 搜索永久链接：

> www.mydomain.com/search/my+result+keyword+term

至：

> www.mydomain.com/my-result/keyword-term

并显示搜索页面或任何想法。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:18:46.797

在您的主题文件夹中打开`searchform.php`并更改表单操作。如果您愿意，您当然甚至可以重建整个搜索表单。

wordpress codex 有一个关于这个主题的有用教程：http: [//codex.wordpress.org/Creating_a_Search_Page](http://codex.wordpress.org/Creating_a_Search_Page)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-12T05:10:08.700

为时已晚，但可以帮助像我这样的其他人:)

将以下代码添加到您的 functions.php 文件中。

```
function wp_change_search_url() {
    if ( is_search() && ! empty( $_GET['s'] ) ) {
        wp_redirect( home_url( "/search/" ) . urlencode( get_query_var( 's' ) ) );
    }
}
add_action( 'template_redirect', 'wp_change_search_url' );

function wp_search_rule(){
    add_rewrite_rule('^search/([^/]*)?', 'index.php?s=$matches[1]', 'top');
}
add_action( 'init', 'wp_search_rule' ); 
```

# iphone - 避免图片解压阻塞主线程

> ID：15598835
> 
> 赞同：3
> 
> 时间：2013-03-24T13:07:29.107
> 
> 标签：iphone, ios, objective-c, javax.imageio

我有一些代码可以使用 UIImageView 显示动画 GIF 图像，这里：[https ://github.com/amleszk/GifBlocking](https://github.com/amleszk/GifBlocking)

它适用于 99% 的情况，尽管某些类型的 GIF 图像存在问题，可以在此处找到示例：http: [//i.imgur.com/mbImw.gif](http://i.imgur.com/mbImw.gif)

这个 gif 很好地接收了 101 个图像，然后在显示包含动画图像的 UIImageView 时阻塞了主线程。如果它有压缩，它可以解压缩 gif，但是我将如何阻止它阻塞主线程？

在主线程上调用的方法是 `DGifDecompressInput` `DGifDecompressLine` `copyImageBlockSetGIF`

问题是当视图被添加到层次结构时会发生 gif 解压缩 - 这应该在主线程上完成

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T18:22:41.587

grasGendarme 的代码很有用，但请注意 UIImage 是惰性的，在真正需要之前不会解码图像。关键是您必须使用`CGContextDrawImage`. 所以使用[UIImage+JTImageDecode.h](https://gist.github.com/mystcolor/1257111)在后台创建一个未压缩的图像版本，然后将其设置回主线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T15:37:06.247

很高兴看到实际的代码。没有它，我们的帮助是有限的。

也许你可以写一行：

```
[self performSelectorInBackground:@selector(yourBlockingMethod:) withObject:yourObject]; 
```

或者修改您的库以在后台线程上解压缩 GIF，然后`setNeedsDisplay`在主线程上使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T15:44:19.957

您可以使用 Grand Central Dispatch 和串行队列在单独的线程上完成所有操作：

```
// create the queue that will process your data:
dispatch_queue_t dataProcessQueue = dispatch_queue_create("data process queue", NULL); // the name is there for debugging purposes
    //dispatch to the newly created queue, and do not wait for it to complete
    dispatch_async(dataProcessQueue, ^{
        // load and decode gif
        // ...
        dispatch_async(dispatch_get_main_queue(), ^{
            // put gif in place (UI work always happen on the main queue)
            // ...
    });
}); 
```

# c++ - boost::iostreams::copy 上的编译错误

> ID：15598840
> 
> 赞同：1
> 
> 时间：2013-03-24T13:07:56.190
> 
> 标签：c++, boost, boost-iostreams

我正在尝试通过一些示例来学习 boost::iostreams。这是gcc不能接受的其中之一：

```
#include <iostream>
#include <boost/iostreams/filter/regex.hpp>
#include <boost/iostreams/copy.hpp>
#include <boost/iostreams/filtering_stream.hpp>
#include <boost/iostreams/device/back_inserter.hpp>

using namespace std;

int main()
{
    boost::regex reg("a.c");    
    string str("abcdef aochijk");   
    string result;
    boost::iostreams::copy(
                boost::make_iterator_range(str),    
                boost::iostreams::filtering_ostream(    
                    boost::iostreams::regex_filter(reg,"test") |    
                    boost::iostreams::back_inserter(result))    
                );
    cout<<result<<endl; 
    return 0;
} 
```

这是错误：

```
error:no matching function for call to 'copy(boost::iterator_range<__gnu_cxx::__normal_iterator<char*, std::basic_string<char> > >, boost::iostreams::filtering_ostream)'

error:no type named 'type' in 'struct boost::disable_if<boost::iostreams::is_std_io<boost::iostreams::filtering_stream<boost::iostreams::output> >, void>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:52:51.027

我的 clang 副本也无法编译，告诉我`note: candidate function [snip] not viable: expects an l-value for 2nd argument`.

这对我来说似乎很合理，事实上，这编译：

```
boost::regex reg("a.c");    
string str("abcdef aochijk");
string result;
boost::iostreams::filtering_ostream ios(    
                boost::iostreams::regex_filter(reg,"test") |    
                boost::iostreams::back_inserter(result));
boost::iostreams::copy( boost::make_iterator_range(str), ios); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:56:39.447

```
#include <iostream>
#include <boost/iostreams/filter/regex.hpp>
#include <boost/iostreams/copy.hpp>
#include <boost/iostreams/filtering_stream.hpp>
#include <boost/iostreams/device/back_inserter.hpp>

using namespace std;

int main()
{
    boost::regex reg("a.c");    
    string str("abcdef aochijk");   
    string result;
    boost::iostreams::filtering_ostream fos(boost::iostreams::regex_filter(reg,"test") |    
                                            boost::iostreams::back_inserter(result))   ;
    boost::iostreams::copy(boost::make_iterator_range(str),fos);
    cout<<result<<endl; 
    return 0;
} 
```

# jpa - JPA 2 @JoinTable 与密钥生成

> ID：15598844
> 
> 赞同：2
> 
> 时间：2013-03-24T13:08:08.897
> 
> 标签：jpa, persistence, jointable

JPA 2 中有没有办法使用 @JoinTable 为行的 id 生成 UUID 键？我不想为这个表创建新实体（即使这样可以解决问题），我也不想从数据库中创建它。

```
 @ManyToMany
    @JoinTable(name="Exams_Questions", schema="relation",
            joinColumns = @JoinColumn(name="examId", referencedColumnName="id"),
            inverseJoinColumns = @JoinColumn(name="questionId", referencedColumnName = "id"))   
    private List<Question> questions = new ArrayList<Question>(); 
```

数据库表

```
CREATE TABLE [relation].[Exams_Questions](
    [id] [uniqueidentifier] PRIMARY KEY NOT NULL,
    [examId] [uniqueidentifier] NOT NULL,
    [questionId] [uniqueidentifier] NOT NULL, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:54:26.513

不确定到底是什么问题，但让我尝试回答。

仅对于您的第一句话，我会说“是”和“可能”：

1.  您需要一个单独`@Entity class`的`Question`, 并在该类中为`id`.

2.  无法使用规范 JPA 为列指定 UUID 值的自动生成。有使用[OpenJPA](http://www.jarvana.com/jarvana/view/org/apache/openjpa/openjpa-persistence-jdbc/2.0.0/openjpa-persistence-jdbc-2.0.0-test-sources.jar!/org/apache/openjpa/persistence/generationtype/GeneratedValues.java?format=ok)和[Hibernate](http://www.skill-guru.com/blog/2009/10/10/80priamary-key-generation-strategies-in-hibernate/)的方法。 [EclipseLink](http://wiki.eclipse.org/EclipseLink/Examples/JPA/CustomSequencing)将允许您为此目的创建自定义生成器，他们的示例实际上是针对 UUID。

如果您想*公开*连接表的属性或让 JPA*管理*它们（即`id`在`Exams_Questions`表上），请查看此外部[链接](http://giannigar.wordpress.com/2009/09/04/mapping-a-many-to-many-join-table-with-extra-column-using-jpa/)（[在此答案中找到](https://stackoverflow.com/a/8587556/1448212)）。您最终会得到从 Exam/Question 实体到连接表的 @OneToMany 关系，以及从连接表到 Exam/Question 实体的 @ManyToOne 关系。

将连接表作为实体公开将使您能够管理单独的键 (uuid)。如果您*不需要*uuid 主键，则不要这样做 - 没有必要解决问题，因为examId/questionId 组合是唯一的。

# php - mysql_fetch_array 在一个表中有两个条件

> ID：15598851
> 
> 赞同：0
> 
> 时间：2013-03-24T13:08:34.133
> 
> 标签：php, mysql, while-loop

我有 2 张桌子。我想把它们放到一个 html 表中（每个表在一个单独的列中）。我认为 mysql_fetch_array 在 2 个条件下对我不起作用。

```
echo "<table id='123'>";
echo "<tr> 
<th>header</th> 
</tr><td>";
$query1 = "SELECT * FROM table1"; 
$result1 = mysql_query($query1) or die(mysql_error());
$query2 = "SELECT * FROM table2"; 
$result2 = mysql_query($query2) or die(mysql_error());

while($row1 = mysql_fetch_array($result1) && $row2 = mysql_fetch_array($result2)){
    echo "<tr><td>"; 
    echo "";
    echo "</td><td>";   
    echo $row1['score'];
    echo "</td><td>"; 
    echo $row2['score'];
    echo "</td></tr>"; 
} 
echo "</td></table> <br>"; 
```

我怎样才能解决这个问题？

# java - 如何在休眠文件中定义关联

> ID：15598852
> 
> 赞同：0
> 
> 时间：2013-03-24T13:09:11.110
> 
> 标签：java, hibernate

我有一个查询，当我在 sqlDeveloper 中运行时，我得到了结果。这是查询

```
select * from Losa_Cust_Reject_App rejectApp 
inner join 
    Losa_Cust losaCust 
on 
    rejectApp.app_Ref_No = losaCust.app_Ref_No 
where 
    rejectApp.app_Ref_No != '0000001912' and  rejectApp.app_Dt >= '23-SEP-2012' 
and
    rejectApp.cust_Id1 = 'A111111111' and rejectApp.cust_Id1_Type = '01'; 
```

我将此查询翻译为休眠如下

```
public List findAppByDate(String appRefNo, Date previousAppDate, String currentId1,
    String currentIdType1) {

    StringBuffer query = new StringBuffer("from ");
    query.append(LosaCustRejectApp.class.getName());
    query.append(" rejectApp inner join ");
    query.append(LosaCust.class.getName());
    query.append(" losaCust with rejectApp.appRefNo = losaCust.comp_id.appRefNo");
    query.append(" where rejectApp.appRefNo != ? and  rejectApp.appDt >= ?");
    query.append(" and rejectApp.custId1 = ? and rejectApp.custId1Type = ? ");

    List result = null;

    try {
        result = getHibernateTemplate().find(query.toString(),
            new Object[] { appRefNo, previousAppDate, currentId1, currentIdType1 });

        if (CollectionUtils.isNotEmpty(result)) {
            return result;
        }
    } catch (Exception e) {
        String message = e.getMessage();
        System.out.println();
    }
    return result;
} 
```

但是我想在hibernate中定义映射，所以hibernate会自动加入。我如何在休眠文件中为上述查询定义关联，以便休眠自动进行连接。

这是我的 LosaCustReject.hbm.xml

```
<hibernate-mapping default-lazy="false">
<class name="com.thetasp.losa.data.LosaCustRejectApp" table="LOSA_CUST_REJECT_APP" optimistic-lock="version">

    <id name="rejectAppId" type="java.lang.Long" column="REJECT_APP_ID">
        <generator class="com.thetasp.code.runningno.HibernateId">
            <param name="fieldCode">REJECT_APP_ID</param>
            <param name="returnType">java.lang.Long</param>
        </generator>
    </id>
    <version name="rowVersion" type="int" column="ROW_VERSION" access="property" unsaved-value="undefined" />
    <property name="appRefNo" type="java.lang.String" column="APP_REF_NO" not-null="true" length="20" />
    <property name="appDt" type="java.sql.Timestamp" column="APP_DT" not-null="true" length="23" />
    <property name="custId1Type" type="java.lang.String" column="CUST_ID1_TYPE" not-null="true" length="1" />
    <property name="custId1" type="java.lang.String" column="CUST_ID1" not-null="true" length="20" />
    .......
    <property name="updateDt" type="java.sql.Timestamp" column="UPDATE_DT" length="23" />

    <!-- associations -->
</class>
</hibernate-mapping> 
```

LosaCust.hbm.xml

```
<hibernate-mapping default-lazy="false">
<class name="com.thetasp.losa.data.LosaCust" table="LOSA_CUST" discriminator-value="I" optimistic-lock="version">

    <composite-id name="comp_id" class="com.thetasp.losa.data.LosaCustPK">
        <key-property name="custId" column="CUST_ID" type="java.lang.String" length="20" />
        <key-property name="appRefNo" column="APP_REF_NO" type="java.lang.String" length="20" />
    </composite-id>

    <discriminator column="CUST_T" type="string" length="1" >
    </discriminator>

    <version name="rowVersion" type="int" column="ROW_VERSION" access="property" unsaved-value="undefined" />
    <property name="custLevel" type="java.lang.String" column="CUST_LEVEL" not-null="false" length="10" />
              .....
    <property name="staySinceMth" type="java.lang.String" column="STAYED_SINCE_MTH" length="10" />
            ....
    <subclass name="com.thetasp.losa.data.LosaIndvCust" discriminator-value="I" lazy="false" >
        <property name="id1Type" type="java.lang.String" column="ID1_TYPE" length="1" />
        <property name="id1" type="java.lang.String" column="ID1" length="20" />
         ....

 </subclass>

</class> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:26:16.060

我想你可以做这样的事情

在 LosaCust.java 中定义一个表示与 LosaCustRejectApp 实体的一对多关联的字段：

```
List<LosaCustRejectApp> associatedLosaCustRejectApps; 
```

在 LosaCust.hbm.xml 中，您可以使用以下内容映射这个新字段：

```
<list name="associatedLosaCustRejectApps" table="LOSA_CUST_REJECT_APP" >
    <key>
        <column name="app_Ref_No" not-null="true" />
    </key>
    <one-to-many class="com.thetasp.losa.data.LosaCustRejectApp" />
</set> 
```

有关如何进行此类映射的更多详细信息甚至完整教程，您可以访问此处：

[Hibernate – 一对多示例（XML 映射）](http://www.mkyong.com/hibernate/hibernate-one-to-many-relationship-example/)

此致

# jsf-2 - 选择 selectOneMenu 项目时未获得预期参数

> ID：15598859
> 
> 赞同：0
> 
> 时间：2013-03-24T13:09:52.170
> 
> 标签：jsf-2, primefaces

嗨，我的 HTML 中有以下内容：

```
<p:selectOneMenu  value="#{lottoCheckerBean.selectedPowerBallDrawingDate}"  >
                        <p:ajax update="powerBallDrawings"  listener="#{lottoCheckerBean.handleDrawDateSelection}" />
                        <f:selectItems value="#{lottoCheckerBean.powerBallDrawingDates}"  />
                    </p:selectOneMenu> 
```

我的 bean 代码的相关部分如下：

```
 public void setSelectedPowerBallDrawingDate(String newSelectedPowerBallDate) {

    this.selectedPowerBallDrawingDate = newSelectedPowerBallDate;
} 
```

ajax 标记会按预期导致对 setSelectedPowerBallDrawingDate(String newSelectedPowerBallDate) 的调用。但是 newSelectedPowerBallDate 的值是空字符串。不是下拉列表的预期选定值。

selectOneMenu 的来源是 List<String>

列表。这个需要转换器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:36:17.540

感谢 Laabidi Raissi 的建议。然而，答案是我的 selectOneMenu 不在表单中。移动表单标签使它们包含下拉列表解决了这个问题。

# asp.net - Asp.net 从 IIS 搜索 Active Directory

> ID：15598860
> 
> 赞同：3
> 
> 时间：2013-03-24T13:09:54.413
> 
> 标签：asp.net, iis, active-directory

最近，我将 ASP.NET 应用程序从运行 IIS5 的旧服务器移到了运行 IIS7.5 的新服务器上。

该应用程序给了我一个错误：

> (&(objectCategory=person)(sAMAccountName=)) 搜索过滤器无效。
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArgumentException：(&(objectCategory=person)(sAMAccountName=)) 搜索过滤器无效。

搜索AD的功能是：

```
public static string Get_AD_User_Email(string username)
{
        try
        {
            DirectorySearcher searcher = new DirectorySearcher("(&(objectCategory=person)(sAMAccountName=" + username + "))");
            SearchResult result = searcher.FindOne();

            if (result != null)
            {
                DirectoryEntry employee = result.GetDirectoryEntry();

                if (employee.Properties["mail"] != null)
                {
                    return employee.Properties["mail"].Value.ToString();
                }
                else return "NULL";
            }
            else throw new Exception("ERROR: Problem searching active directory for users.");
        }
        catch (Exception ex) { throw ex; }
    } 
```

奇怪的是，在 Visual Studio 中调试时，网站正在运行，只是从 IIS 崩溃。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:56:24.737

问题只是你的函数 `Get_AD_User_Email(string username)`是用一个空值调用的`username`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:33:44.547

您更改了 IIS 服务器，现在调用方法没有传入用户名（正如其他几个答案所指出的那样）。

我将验证您是否在 IIS 中禁用了该网站上的匿名访问。发现启用了 Windows 身份验证和匿名访问是很常见的。发生这种情况时，首选匿名，您将无法获得用户名。

检查 HttpContext.Current.User 的值。我通常使用如下代码来验证 Windows 身份验证：

```
WindowsIdentity id = (WindowsIdentity)HttpContext.Current.User.Identity; 
string username = id.Name; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T17:18:48.633

自从：

```
DirectorySearcher searcher = new DirectorySearcher("(&(objectCategory=person)(sAMAccountName=" + username + "))"); 
```

正在返回异常：

> (&(objectCategory=person)(sAMAccountName=)) 搜索过滤器无效。

您将一个空字符串传递给`Get_AD_User_Email`.

您如何检索“用户名”？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-04T17:24:43.427

试试：objectClass=user

而不是：objectCategory=person

# python - 在numpy中提取数值数组函数的值

> ID：15598867
> 
> 赞同：3
> 
> 时间：2013-03-24T13:10:45.910
> 
> 标签：python, numpy

如果我用两个数组定义一个函数，例如这样：

```
from numpy import *
x = arange(-10,10,0.1)
y = x**3 
```

如何提取 y(5.05) 的值，对两个更接近的点 y(5) 和 y(5.1) 的值进行插值？现在，如果我想找到那个值，我使用这个方法：

```
y0 = y[x>5][0] 
```

我应该获得`y`for的值`x=5.1`，但我认为存在更好的方法，并且可能它们是正确的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:17:47.600

有[numpy.interp](http://docs.scipy.org/doc/numpy/reference/generated/numpy.interp.html)，如果线性插值就足够了：

```
>>> import numpy as np
>>> x = np.arange(-10, 10, 0.1)
>>> y = x**3
>>> np.interp(5.05, x, y)
128.82549999999998
>>> 5.05**3
128.787625 
```

并且有很多`scipy`用于插值的工具[[docs]](http://docs.scipy.org/doc/scipy/reference/interpolate.html)：

```
>>> import scipy.interpolate
>>> f = scipy.interpolate.UnivariateSpline(x, y)
>>> f
<scipy.interpolate.fitpack2.LSQUnivariateSpline object at 0xa85708c>
>>> f(5.05)
array(128.78762500000025) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T13:18:31.407

在 numpy/scipy 中有一个功能。

```
import numpy as np
np.interp(5.05, x, y) 
```

# ios - Imitating button click with UIGestureRecognized

> ID：15598869
> 
> 赞同：0
> 
> 时间：2013-03-24T13:10:56.177
> 
> 标签：ios, objective-c, cocoa-touch, uiview, uigesturerecognizer

Having added a `UITapGestureRecognized` to a `UIView`, how do I parse the view for ie. changing the background color during the tap? The purpose of this is to imitate a button click.

```
UIView *locationView = [[UIView alloc] init];
locationView.tag = 11;
locationView.backgroundColor = [UIColor clearColor];
locationView.userInteractionEnabled = YES;
[locationView addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(promptForLocation)]]; 
```

Let's say I want `locationView.backgroundColor = [UIColor blueColor]` right after the tap gesture. Would you just implement it in the target action or is there a specific implementation for this?

**Update**: This is my final code inspired by @0x7fffffff

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // ...
    UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressDetectedLocation:)];
    longPress.allowableMovement = 50.0f;
    longPress.minimumPressDuration = 0.05;
    UILongPressGestureRecognizer *longPress2 = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressDetectedPhoto:)];
    longPress2.allowableMovement = 50.0f;
    longPress2.minimumPressDuration = 0.05;
    [leftView addGestureRecognizer:longPress];
    [rightView addGestureRecognizer:longPress2];
    // ...
}

- (BOOL)longPressDetected:(UILongPressGestureRecognizer *)sender {
    if ([self.view hasFirstResponder]) {
        return NO;
    }
    if (sender.state == UIGestureRecognizerStateBegan) {
        [sender.view setBackgroundColor:[UIColor colorWithRed:(4/255.0) green:(129/255.0) blue:(241/255.0) alpha:1]];
    } else if (sender.state == UIGestureRecognizerStateEnded || sender.state == UIGestureRecognizerStateFailed) {
        [sender.view setBackgroundColor:[UIColor clearColor]];
    }
    CGPoint location = [sender locationInView:sender.view];
    return sender.state == UIGestureRecognizerStateEnded && location.x > 0 && location.x < sender.view.frame.size.width && location.y > 0 && location.y < sender.view.frame.size.height;
}

- (void)longPressDetectedLocation:(UILongPressGestureRecognizer *)sender {
    if ([self longPressDetected:sender]) {
        [self promptForLocation];
    }
}

- (void)longPressDetectedPhoto:(UILongPressGestureRecognizer *)sender {
    if ([self longPressDetected:sender]) {
        [self promptForPhoto];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:36:16.597

考虑到您正在尝试模仿按钮单击，我假设您希望视图在触摸结束后恢复到其原始状态。为此，您需要使用 a`UILongPressGestureRecognizer`而不是 a `UITapGestureRecognizer`。

使用轻击手势，在触摸结束之前不会检测到识别器，因此只要您抬起手指，您就会有效地突出显示视图。要解决此问题，请使用其`minimumPressDuration`属性设置为 0.0 的长按手势。然后在其选择器中，检查发送手势的状态；如果它刚刚开始，则更改背景颜色，如果它已经结束，则恢复为原始颜色。

这是一个例子：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(100.0f, 100.0f, 100.0f, 100.0f)];
    [myView setBackgroundColor:[UIColor redColor]];
    [self.view addSubview:myView];

    UILongPressGestureRecognizer *longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressDetected:)];
    [longPress setAllowableMovement:50.0f];
    [longPress setMinimumPressDuration:0.0];
    [myView addGestureRecognizer:longPress];
}

- (void)longPressDetected:(UILongPressGestureRecognizer *)sender {
    if (sender.state == UIGestureRecognizerStateBegan) {
        [sender.view setBackgroundColor:[UIColor blueColor]];
    }else if (sender.state == UIGestureRecognizerStateEnded || sender.state == UIGestureRecognizerStateFailed) {
        [sender.view setBackgroundColor:[UIColor redColor]];
    }
    NSLog(@"%d",sender.state);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:19:08.663

```
UITapGestureRecognizer *gr = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tappedMethod:)];
    [locationView addGestureRecognizer:gr]; 
```

这是方法

```
-(void)tappedMethod:(UIGestureRecognizer *)ge
{
  // write relavent code here;
  locationView.backgroundColor = [UIColor blueColor];
} 
```

# firefox - formData object not sending all datas on firefox and IE

> ID：15598870
> 
> 赞同：0
> 
> 时间：2013-03-24T13:10:58.287
> 
> 标签：firefox, xmlhttprequest

i'm designing a web interface using only xhr functions for forms processing while it's working perfectly on chrome, it has a very weird behavior on IE and firefox: not all datas are transmisted when submiting a form and there is nothing pointing to something specific when these errors occurs.

my post function looks like this:

```
function submitForm(formName,formTarget)  {
console.log(formName);
var form = document.getElementById(formName);
var formDatax = new FormData(form);

var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function() {
if (xhr.readyState == 4 && (xhr.status == 200 || xhr.status == 0)) {
document.getElementById("mainCenter").innerHTML = xhr.responseText;
} else if (xhr.readyState < 4) {
document.getElementById("mainCenter").innerHTML = "<div class='loadingDiv'></div>";
}
};
xhr.open('POST', formTarget, true);
xhr.send(formDatax);

return false;
} 
```

some forms are sent correclty, some others not (even very simple, like email/password login form)!

did anybody encoutered the same behavior or any clue to correct this ?

thank you !

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:08:55.910

终于找到原因了：

如果`<form>`标签放在`<table>`标签之后，它就不起作用。在表格标记解决问题之前移动表格标记。如果有人有解释，只是为了理解这种行为:)

谢谢你 ！

# java - Write PNG file with less disk size in Java

> ID：15598872
> 
> 赞同：3
> 
> 时间：2013-03-24T13:11:06.070
> 
> 标签：java, image, image-processing, png

I have a `BufferedImage`:

```
BufferedImage bi = new BufferedImage(14400, 14400, BufferedImage.TYPE_INT_ARGB); 
```

I have saved this image to a PNG file using the following code:

```
public static void saveGridImage(BufferedImage sourceImage, int DPI,
            File output) throws IOException {
        output.delete();

        final String formatName = "png";

        for (Iterator<ImageWriter> iw = ImageIO
                .getImageWritersByFormatName(formatName); iw.hasNext();) {
            ImageWriter writer = iw.next();
            ImageWriteParam writeParam = writer.getDefaultWriteParam();
            ImageTypeSpecifier typeSpecifier = ImageTypeSpecifier
                    .createFromBufferedImageType(BufferedImage.TYPE_INT_RGB);
            IIOMetadata metadata = writer.getDefaultImageMetadata(
                    typeSpecifier, writeParam);
            if (metadata.isReadOnly()
                    || !metadata.isStandardMetadataFormatSupported()) {
                continue;
            }

            setDPI(metadata, DPI);

            final ImageOutputStream stream = ImageIO
                    .createImageOutputStream(output);
            try {
                writer.setOutput(stream);
                writer.write(metadata,
                        new IIOImage(sourceImage, null, metadata), writeParam);
            } finally {
                stream.close();
            }
            break;
        }
    }

    public static void setDPI(IIOMetadata metadata, int DPI)
            throws IIOInvalidTreeException {

        double INCH_2_CM = 2.54;

        // for PNG, it's dots per millimeter
        double dotsPerMilli = 1.0 * DPI / 10 / INCH_2_CM;

        IIOMetadataNode horiz = new IIOMetadataNode("HorizontalPixelSize");
        horiz.setAttribute("value", Double.toString(dotsPerMilli));

        IIOMetadataNode vert = new IIOMetadataNode("VerticalPixelSize");
        vert.setAttribute("value", Double.toString(dotsPerMilli));

        IIOMetadataNode dim = new IIOMetadataNode("Dimension");
        dim.appendChild(horiz);
        dim.appendChild(vert);

        IIOMetadataNode root = new IIOMetadataNode("javax_imageio_1.0");
        root.appendChild(dim);

        metadata.mergeTree("javax_imageio_1.0", root);
    } 
```

When the code executes it creates an PNG file with 400 DPI and Disk Size of **168 MB**; this is too much.

Is there any way or parameters I can use to save a smaller PNG?

Before, I had a 1.20 GB TIFF file, and when I converted it to PNG using imagemagick at 400 DPI, the resulting file size was only 700 KB.

So, I think I might be able to save the above file smaller.

**Can pngj help me? Because I now have a png file which I can read in pngj library.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T15:11:39.300

14400x14400 ARGB8 图像的原始（未压缩）大小为 791MB。它将根据其性质（具有均匀或平滑的区域）和根据（不太重要的）PNG 压缩参数或多或少地进行压缩。

> 当我使用 imagemagic 将其转换为使用 400 DPI 的 PNG 时，生成的文件大小仅为 700 KB。

（我不明白你为什么说 DPI，这无关紧要，重要的是像素大小）你是说你得到 700KB 的 14400x14400 ARGB？这将代表 1/1000 的压缩，除非图像实际上是平坦的，否则很难相信。您应该首先了解这里发生了什么。

无论如何，这是一个使用 PNGJ 的示例代码

```
/** writes a BufferedImage of type TYPE_INT_ARGB to PNG using PNGJ */
public static void writeARGB(BufferedImage bi, OutputStream os) {
    if(bi.getType() != BufferedImage.TYPE_INT_ARGB) 
       throw new PngjException("This method expects  BufferedImage.TYPE_INT_ARGB" );
    ImageInfo imi = new ImageInfo(bi.getWidth(), bi.getHeight(), 8, true);
    PngWriter pngw = new PngWriter(os, imi);
    pngw.setCompLevel(9);// maximum compression, not critical usually
    pngw.setFilterType(FilterType.FILTER_AGGRESSIVE); // see what you prefer here
    DataBufferInt db =((DataBufferInt) bi.getRaster().getDataBuffer());
    SinglePixelPackedSampleModel samplemodel =  (SinglePixelPackedSampleModel) bi.getSampleModel();
    if(db.getNumBanks()!=1) 
        throw new PngjException("This method expects one bank");
    ImageLine line = new ImageLine(imi);
    for (int row = 0; row < imi.rows; row++) {
        int elem=samplemodel.getOffset(0,row);
        for (int col = 0,j=0; col < imi.cols; col++) {
            int sample = db.getElem(elem++);
            line.scanline[j++] =  (sample & 0xFF0000)>>16; // R
            line.scanline[j++] =  (sample & 0xFF00)>>8; // G
            line.scanline[j++] =  (sample & 0xFF); // B
            line.scanline[j++] =  (((sample & 0xFF000000)>>24)&0xFF); // A
        }
        pngw.writeRow(line, row);
    }
    pngw.end();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:24:23.690

我会尝试摆弄您正在创建的 writeParam 对象的设置。目前您正在调用`getDefaultWriteParam();`它，它为您提供了一个基本的 writeParam 对象。我的猜测是默认为无压缩。

之后，您可能可以设置一些压缩模式来减小文件大小。

```
writeParam.setCompressionMode(int mode);
writeParam.setCompressionQuality(float quality);
writeParam.setCompressionType(String compressionType); 
```

请参阅[http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageWriteParam.html](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageWriteParam.html) 特别是[http://docs.oracle.com/javase/6/docs/api/javax/imageio/ ImageWriteParam.html#setCompressionMode(int)](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageWriteParam.html#setCompressionMode(int))

# git - git remote add -f 不添加跟踪分支

> ID：15598875
> 
> 赞同：0
> 
> 时间：2013-03-24T13:11:31.593
> 
> 标签：git, github, git-remote

我正在 github 中克隆一个项目的分支，并希望设置一个上游远程来跟踪原始项目。据我了解，获取上游远程应该在我的本地仓库中创建远程分支的跟踪分支，但是 git 没有这样做，所以要么我误解了这个过程，要么我做错了什么。

我都试过了

```
git remote add upstream https://github.com/dude1/awesome-project.git
git fetch upstream 
```

和

```
git remote add -f upstream https://github.com/dude1/awesome-project.git 
```

当我`git branch -a`在任何一组操作之后做的时候，我所拥有的只是我的原点跟踪分支。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:16:38.257

添加远程存储库不会跟踪远程存储库上的所有分支。要跟踪远程分支，您应该这样做

*   如果您的本地存储库上没有分支并且想要创建一个。

    ```
    git branch {branch_name} upstream/{branch_name} 
    ```

其中 {branch_name} 代表您的分支名称。

它将在您的本地仓库中创建一个分支，并将跟踪您指定的远程分支。

*   如果您在本地仓库中有分支并希望将其推送到远程仓库，

    ```
    git push upstream {branch_name_on_local}:{branch_name_in_repo} 
    ```

# visual-studio-2010 - Crystal Reports 延迟显示使用 MS Access 时的旧数据

> ID：15598877
> 
> 赞同：0
> 
> 时间：2013-03-24T13:11:44.613
> 
> 标签：visual-studio-2010, ms-access, crystal-reports-xi

这是有趣的一个。

我有一个使用单个 Microsoft Access 2007 表的 Crystal Report。表中的数据在运行时根据列表框中的条件进行更新。

如果我从列表中选择一个条目，它会更新数据并显示在报告中。如果我选择并且不同的条目显示旧数据的数据。如果我选择该报告的次数足够多，它将最终显示新数据。

访问数据库中的数据在我手动检查时更新

我的问题是数据更新和显示新数据的报告之间似乎存在延迟。

有没有办法减少这种延迟或让我的程序等到访问完成更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T15:44:30.077

这里有一些想法：

如果您将 cr-xi 与 VS2010 混合使用，并且没有真正的理由这样做，请卸载 xi 并安装 VS2010 的新库。我在将 cr-xi 与 VS2010 混合时遇到了问题。

有一个选项可以使用报告保存数据。确保已关闭。如果已经存在，请将其打开，运行报告，然后再次将其关闭。

您可以在 crystalReportViewer1.ReportSource = rpt 之前尝试 rpt.Refresh()。

[这个页面](http://scn.sap.com/thread/3151988)有一些想法，包括我列出的最后一个。

# parsing - POSIX sh EBNF 语法

> ID：15598878
> 
> 赞同：12
> 
> 时间：2013-03-24T13:11:45.577
> 
> 标签：parsing, posix, grammar, sh, ebnf

是否有现有的 POSIX sh 语法可用，或者我必须直接从规范中找出它？

*请注意，我对纯*sh不太感兴趣；一个扩展但符合标准的 sh 对于我的目的来说也很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T15:18:26.900

POSIX 标准定义了POSIX shell 的[语法](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_10)。该定义包括一个带注释的 Yacc 语法。因此，它可以或多或少地机械地转换为 EBNF。

如果你想要一个“真正的”语法，那么你必须更加努力。选择你的“真实外壳”并找到源代码并从中找出语法。

请注意，EBNF 并未广泛使用。它的实用价值有限，尤其是因为基本上没有支持它的工具。因此，您不太可能找到现成的 EBNF 语法（几乎任何东西）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-24T14:48:35.923

我做了更多的挖掘并找到了这些资源：

1.  [位于此处](https://web.archive.org/web/20170207130846/http://porkmail.org/era/unix/shell.html)的`sh`教程

2.  一本包含 Bash 2.0 的 BNF 语法的 Bash 书（从[此处](http://www.teiser.gr/icd/staff/nikolaid/learning_the_bash_shell.pdf)消失），相关附录[仍在此处](http://my.safaribooksonline.com/book/operating-systems-and-server-administration/unix/1565923472/syntax/lbs.appd.div.3)

我查看了 , , 的来源，`bash`但在我需要的抽象级别上没有找到任何远程的东西。`pdksh``posh`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-05-06T01:39:59.150

在过去的一年中，我多次尝试编写自己的成熟 Bash 解释器，并且在某些时候我也达到了标记答案（#2）中所述的同一本书附录参考，但它并不完全正确/更新（例如，它没有使用'coproc'保留关键字定义生产规则，并且使用'<&'进行重定向的重复生产规则定义，可能是更多问题，但这些是我注意到的）。

1.  我发现的最好的方法是去`http://ftp.gnu.org/gnu/bash/`
2.  下载当前 bash 版本的源代码
3.  打开 parse.y 文件（在本例中是 YACC 文件，它基本上包含 bash 使用的所有解析逻辑），然后将 '%%' 之间的行复制粘贴到您喜欢的文本编辑器中，这些行定义了语法的产生规则
4.  然后，使用一点正则表达式（顺便说一句，我很糟糕），我们可以删除 '{...}' 之间的额外代码逻辑，以使语法看起来更像 BNF。

我使用的正则表达式是：

```
(\{(\s+.*?)+\})\s+([;|]) 
```

它匹配任何非贪婪的行，包括大括号之间的`.*?`空格和新行，特别是在or字符之前的最后一个右大括号。然后我只是将匹配的字符串替换为（例如第三个捕获组的结果，要么是;要么|）。`\s+``;``|``\3`

这是我在发布时设法提取的语法定义`https://pastebin.com/qpsK4TF6`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T13:47:29.590

我希望 sh、csh、ash、bash 将包含解析器。这些的 GNU 版本是开源的；你可以去那里检查一下。

# ios - 使用 @property 和 @synthesize 时获取不正确的值

> ID：15598880
> 
> 赞同：0
> 
> 时间：2013-03-24T13:12:03.347
> 
> 标签：ios

我创建了两个 ViewController`ViewControllerA`和`ViewControllerB`. 我已经拿了一个`NSString`对象`myString`，`ViewControllerA`并想在`ViewControllerB`. 所以，我已经宣布

```
@property(nonatomic,retain) NSString *myString 
```

和

```
@synthesize myString 
```

在 ViewControllerA.m. 但是当我创建一个`ViewControllerA`in对象`ViewControllerB`并尝试获取`myString`like的值时

```
NSString *tempString = viewControllerBobject.myString 
```

然后我得到一个`null`值。如何获得正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:45:43.997

您没有提供太多细节，但我怀疑您的问题是您正在创建视图控制器 A 的新实例，而不是获取对设置字符串值的已有实例的引用。您如何获得该参考取决于您的应用程序是如何设置的，以及两个视图控制器如何相互关联。如果您需要帮助，您需要提供更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:07:16.997

你得到了正确的值。

VCA 中字符串属性的值为 nil。当您创建 VC1 时，会合成一个名为 string 的字符串属性。但它没有指向任何地方（它的值尚未设置）因此它是零。因此，当您在 VCB 中创建 VCA 实例时，VCA 的属性仍然为 nil。您需要将该属性的值设置为某个字符串。然后所有 VCA 实例都将具有该默认值。或者您需要在 VCA 的具体实例上设置该属性的值，然后，该具体实例将具有该值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T13:21:47.157

您可能会得到，`(null)`因为字符串尚未设置。

**尝试：**

```
viewControllerBobject.myString = @"Hello World!";
NSString *tempString = viewControllerBobject.myString;
NSlog(@"tempString= %@", tempString); 
```

你得到什么结果？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T13:34:25.287

在这一行之后`NSString *tempString = viewControllerBobject.myString`，添加这个`[tempString retain];`

# php - 仅在表单提交时显示复选框选中的数据

> ID：15598886
> 
> 赞同：1
> 
> 时间：2013-03-24T13:12:57.750
> 
> 标签：php, jquery, html-table

我有一个表格，其中包含一个表格，其中包含四个用于比较的数据单元格，并且每列都有一个复选框。当我单击复选框并提交表单时，我只想在新页面中显示选中的表格。我怎样才能做到这一点？任何人都可以帮我举个例子吗？

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Comparision of Printers</title>

</head>
<body>

<form action="newpage.php" method="get">
<table width="1023" border="1">
  <tr>
    <td width="193"></td>
    <td class="p1" width="113"><img src="images/upmini.png"/>
      <label>
      <input type="checkbox" name="p[]" value="Printer1" id="CheckboxGroup1_0" />
      Printer1</label>
</td>
    <td class="p2" width="67"><img  src="images/upmini.png"/>
      <label>
      <input type="checkbox" name="p[]" value="Printer2" id="CheckboxGroup1_1" />
      Printer2</label></td>
    <td class="p3" width="67"><img  src="images/upmini.png"/><label>
      <input type="checkbox" name="p[]" value="Printer3" id="CheckboxGroup1_2" />
      Printer3</label></td>
    <td class="p4" width="67"><img  src="images/upmini.png"/><label>
      <input type="checkbox" name="p[]" value="Pritner4" id="CheckboxGroup1_3" />
      Printer4</label></td>
</tr>
<tr>
  <td>Title</td>
    <td class="p1" >Printer1</td>
    <td class="p2" >Printer2</td>
    <td class="p3" >Printer3</td>
    <td class="p4" >Printer4</td>
</tr>
<tr>
    <td>Manufacturer</td>
    <td class="p1" >Personal Portable 3DPrinters (PP3DP) founded by Be</td>
    <td class="p2" >Personal Portable 3DPrinters (PP3DP) founded by Be</td>
    <td class="p3" >Personal Portable 3DPrinters (PP3DP) founded by Be</td>
    <td class="p4" >Personal Portable 3DPrinters (PP3DP) founded by Be</td>
</tr>

</table>
<input type="submit" name="compare" value="compare" />
</form>
</body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T14:16:52.107

我认为你应该使用`POST`而不是`GET`将你的`printer`和`manufacturer`信息存储在一个数组中。我使用二维数组来存储信息以使其变得容易。并获取`key`此数组的值，`GET REQUEST`然后仅打印与键匹配的值。很简单..

这是完整的功能代码（改变了一点）打印机比较

```
</head>
<body>
// store your infomation in a arrya and use KEY same as in your form checkbox name
<?php 
  $printers = array(
    'printer1' => array(
                    'title' => 'printer1',
                    'manufacturer' => 'Personal Portable 3DPrinters (PP3DP) founded by Be 1'
                  ),
    'printer3' => array(
                    'title' => 'printer2',
                    'manufacturer' => 'Personal Portable 3DPrinters (PP3DP) founded by Be 2'
                  ),
    'printer2' => array(
                    'title' => 'printer3',
                    'manufacturer' => 'Personal Portable 3DPrinters (PP3DP) founded by Be 3'
                  ),
    'printer4' => array(
                    'title' => 'printer4',
                    'manufacturer' => 'Personal Portable 3DPrinters (PP3DP) founded by Be 4'
                  ) 

    )
 ?>

 //if form submited then print the submited index only
<?php if(isset($_GET['p'])):?>
    <?php $printerIndex = $_GET['p'];?> 
    <table width="1023" border="1">
        <td>Title</td>
            <?php foreach($printerIndex as $index): ?>
                <td class = "p1" ><?php echo $printers[$index]['title']; ?></td>
            <?php endforeach; ?>
        </tr>
        <tr>
            <td>Manufacturer</td>
          <?php foreach($printerIndex as $index): ?>
                <td class = "p1" ><?php echo $printers[$index]['manufacturer']; ?></td>
            <?php endforeach; ?>
        </tr>
    </table> 
<?php endif; ?>

//make the table

<?php if(!isset($_GET['p'])): ?>
<form action="" method="get">
<table width="1023" border="1">
    <tr>
        <td width="193"></td>
        <?php foreach($printers as $printer ): ?>
        <td class="p1" width="113"><img src="images/upmini.png"/>
        <label> <?php echo $printer['title']; ?></label>
        <input type="checkbox" name="p[]" value="<?php echo $printer['title']; ?>" id="CheckboxGroup1_0" />
        </td>
        <?php endforeach; ?>
    </tr>
<tr>
<td>Title</td>
    <?php foreach($printers as $printer): ?>
        <td class = "p1" ><?php echo $printer['title']; ?></td>
    <?php endforeach; ?>
</tr>
<tr>
    <td>Manufacturer</td>
   <?php foreach($printers as $printer): ?>
       <td class = "p1" ><?php echo $printer['manufacturer']; ?></td>
   <?php endforeach; ?>
</tr>

</table>
<input type="submit" name="compare" value="compare" />
</form>
<?php endif; ?>
</body></html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:24:02.890

检查的打印机作为数组存储`p`在`$_GET`变量中。例如。在您的示例中检查打印机 1 和 3 将显示以下结果：

```
<?php var_dump($_GET) ?>

array
  'p' => 
    array
      0 => string 'Printer1' (length=8)
      1 => string 'Printer3' (length=8)
  'compare' => string 'compare' (length=7) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:30:14.030

您只有一张带有多个 TD 的表。

因此，在 newpage.php 中，您可以执行以下操作：

```
if (isset($_GET['P']))
{ 
    $P = $_GET['P'];
    for ($i=0;$i<sizeof($P);$i++)
    {
        // Show what you like, e.g.
        echo "Printer".$P[$i]."<br />";
    }
} 
```

是你的意思吗？

# backbone.js - 如何监听数组子模型的值变化

> ID：15598889
> 
> 赞同：0
> 
> 时间：2013-03-24T13:13:12.973
> 
> 标签：backbone.js, backbone-events

我有一个模型定义如下。

```
var A = Backbone.Model.extends({
    initialize: function(){
       this.on('change:users.name',this.onUserNameChanged)
    },
    onUserNameChanged: function(){ alert('name changed')
});
var a = new A ({
   id:1,
   name:'test',
   users:[
   {
      id:2,
      name:'u1'
   },
   {
      id:3,
      name:'u4'
   }
  ]
  }) 
```

我想在模型定义中的每个用户名更改上添加事件。我不知道这样做。这对我来说似乎很难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:18:24.530

您似乎无法通过操作 Backbone 模型数组成员来获取更改事件，如下所述：

[骨干js-set-model-array-property](https://stackoverflow.com/questions/7325004/backbone-js-set-model-array-property)

您最好的选择是设置整个数组并监听一个`change:users`事件，甚至更好 - 提出一个不同的模型，该模型具有一个 Backbone 集合，供用户在操作时获取事件：

```
var A = Backbone.Model.extend({
    initialize: function (options) {
        _.extend(this, options);
    }
});
var Users = Backbone.Collection.extend({
    initialize: function () {
        this.on('change:name', function () {
            alert('name changed');
        });
    }
});

var a = new A({
    id: 1,
    name: 'test',
    users: new Users([{
        id: 2,
        name: 'u1'
    }, {
        id: 3,
        name: 'u4'
    }])
});

a.users.get('2').set('name', 'u2'); 
```

# c++ - 在 C++ 中使用私有方法的属性

> ID：15598894
> 
> 赞同：0
> 
> 时间：2013-03-24T13:13:32.010
> 
> 标签：c++, class, visual-c++, properties, private

我有这门课：

```
class Size
{
    private:
        int size_x;
        int size_y;

        int GetX( void );
        int GetY( void );
        void PutX( int x );
        void PutY( int y );
    public:
        _declspec ( property ( get = GetX , put = PutX ) ) int X;
        _declspec ( property ( get = GetY , put = PutY ) ) int Y;
}; 
```

此代码不起作用，因为当我尝试访问 X 或 Y 时，使用了私有方法。

如何创建一个使用不能在课堂外使用的函数的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:22:45.600

> 如何创建一个使用不能在课堂外使用的函数的属性？

恐怕只能使用另一种语言。标准 C++ 没有这样的属性糖（很遗憾），虽然有一些 hack，但它们都不是很漂亮，包括 Microsoft 的。`declspec(property)`有关您的私有方法与 Microsoft扩展 不兼容的特定问题的更多讨论，请参见此处：http: [//blog.aaronballman.com/2011/11/an-almost-useful-language-extension/](http://blog.aaronballman.com/2011/11/an-almost-useful-language-extension/)

# objective-c - 计算动态形成的多边形的面积和位置

> ID：15598896
> 
> 赞同：0
> 
> 时间：2013-03-24T13:13:45.137
> 
> 标签：objective-c, math, cocos2d-iphone, box2d, polygon

嗨 stackoverflow 社区，

这是我 6 个月提出的关于[计算动态形成的矩形的面积和位置的](https://stackoverflow.com/questions/12228649/calculating-the-area-and-position-of-dynamically-formed-rectangles)问题的延续。为此提供的解决方案很有效，但现在我想更进一步。

一些背景 - 我正在使用 Cocos2D/Box2D 开发一款益智游戏，玩家在屏幕上画线。根据玩家绘制的情况，我想计算出由于绘制线而出现的多边形的区域和位置。

在下图中，黑色边框代表一个游戏区域，这将始终是相同的形状。灰线是玩家绘制的，并且总是笔直的。绿色方块是障碍物。障碍物将是凸形。形成的多边形（在本例中为 3 个）是蓝色区域，并且是我试图获取其坐标和区域的形状。

![显示多边形游戏的游戏区域的图像](../Images/9f690f2d8909affc0e3032254b4d29a8.png)

我想我可以用行列式计算出多边形的面积，但在此之前，我需要计算出蓝色多边形的坐标，我不知道该怎么做。

我有两端的线（x，y）坐标，障碍物的坐标和黑色边框的角坐标。使用这些，是否可以计算出蓝色多边形的坐标，还是我以错误的方式接近这个？

更新 - 对 duffymo 的回应

感谢您的回答。为了进一步解释，提到的每个对象都定义并封装在一个类中，即我有一个 Line/Obstacle/PlayingArea 对象。我的多边形对象被封装在一个“矩形”对象中。这些对象中的每一个都有它自己的属性与之相关联，例如它的坐标/区域/ID/状态等......

为了跟踪所有对象，我有一个监督单例对象，它将所有 Line 对象 / Obstacle 对象等保存在它们各自的数组中。这样，我可以遍历所有线条，并知道每条线条是否已被玩家绘制。

这个游戏有点像[经典的 JezzBall](https://www.youtube.com/watch?v=VD6GQJxHh7E)，所以当用户画一条线时，我需要能够创建这些多边形，因为多边形将用作我检测特定区域是否包含球的方法。如果不是，则需要填充该区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:17:11.660

由于您已经拥有多边形的节点和边，我建议您使用[等高线积分](http://shuisman.com/?p=359)计算质心、周长和面积 您可以使用格林定理将质心和面积表示为等高线积分。

您可以使用[高斯求](http://mathworld.wolfram.com/GaussianQuadrature.html)积沿每条边进行分段积分。

它将快速而准确；它适用于任意复杂的多边形。

更新：Objective-C 是一种面向对象的语言。我自己不知道，但我相信它是基于 C 和 C++ 的想法。既然是这样，我建议您开始更多地根据对象编写内容。坐标数组？它们需要封装在一起。我建议将点（id，x，y）封装在一起的点抽象。制作一个包含点列表的网格。

听起来用户提供点之间的关系以形成多边形。从您的描述中不清楚，因此您在实施它时遇到困难也就不足为奇了。

# call - 有什么方法可以从 JinternalFrame 调用其他 JinternalFrame，但是在主 Jframe 的 desktopPane 中。

> ID：15598909
> 
> 赞同：2
> 
> 时间：2013-03-24T13:15:33.597
> 
> 标签：call, jinternalframe

下面的“代码部分 1”用于在 MDI 应用程序中从 menuItem 调用 UcakListesi(JinternalFrame) 没有问题。

我想使用相同的代码从另一个 JinternalFrame 调用相同的 UcakListesi(JinternalFrame) 但是，我收到有关“desktopPane.add(nw);”的错误 行见代码第 2 部分。无法访问主 jframe desktopPane 表单 JinternalFrame ..

有什么方法可以从 JinternalFrame 调用其他 JinternalFrame，但是在主 Jframe 的 desktopPane 中。

对不起我糟糕的英语。

问候和谢谢。

```
---code part 1---
private void UckListeMenuItemActionPerformed(java.awt.event.ActionEvent evt) {                                                 
    //Uçak listesi penceresi çağrılıyor
    UcakListesi nw = UcakListesi.getInstance();
    nw.pack();
    if (nw.isVisible()) {
    } else {
        desktopPane.add(nw);
        nw.setVisible(true);
    }
    try {
        //açılan internal frame'in max size ile açılması için 
        nw.setMaximum(true);
    } catch (PropertyVetoException ex) {
        Logger.getLogger(AnaUygulama.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
---code part 2---
class PopUpx extends JPopupMenu {
JMenuItem anItem1;
JMenuItem anItem2;
JMenuItem anItem3;
JMenuItem anItem4;
JMenuItem anItem5;
JSeparator anSeparator1; 
JSeparator anSeparator2; 
JSeparator anSeparator3; 
JSeparator anSeparator4; 
JMenu yeni;
ActionListener anListener2;

public  PopUpx(final String x){
    anItem1 = new JMenuItem(x+ " numaralı Uçak için");
    anItem2 = new JMenuItem("Detay Bilgiler");
    anItem3 = new JMenuItem("Arıza İş Emri Aç");
    anItem4 = new JMenuItem("Uçuş Öncesi Servis");
    anItem5 = new JMenuItem("Uçuş Sonrası Servis");
    anSeparator1 = new JSeparator();
    anSeparator2 = new JSeparator();
    anSeparator3 = new JSeparator();
    anSeparator4 = new JSeparator();
    yeni = new JMenu ("Servis İşlemleri");

    add(anItem1);
    anItem1.setEnabled(false);
    add(anSeparator1);
    add(anItem2);
    anItem2.addActionListener(new ActionListener() {

            @Override
        public void actionPerformed(ActionEvent event) {
            System.out.println(x+" nolu uçağın "+anItem2.getText()+" basıldı"); 

            UcakListesi nw = UcakListesi.getInstance();
    nw.pack();

    if (nw.isVisible()) {
    } else {

      //problem is here 
       desktopPane.add(nw);
        nw.setVisible(true);
    }
    try {
        //açılan internal frame'in max size ile açılması için 
        nw.setMaximum(true);
    } catch (PropertyVetoException ex) {
        Logger.getLogger(AnaUygulama.class.getName()).log(Level.SEVERE, null, ex);
    }

        }

    });

    anItem2.setToolTipText(x+ " numaralı Uçağın Detay Bilgilerine ulaşılır...");

    add(anSeparator2);
    add(anItem3);
    add(anSeparator3);
    yeni.add(anItem4);
    add(anSeparator4);
    add(yeni); 
    yeni.add(anItem4);
    yeni.add(anSeparator4);
    yeni.add(anItem5);

 }} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T21:15:58.997

我找到了解决方案。

对于第一个类（MainApplication），您的 Jframe 和 JDesktopPane 在下面放置代码

```
public javax.swing.JDesktopPane getDesktopPane() {
    return desktopPane;
} 
```

然后在任何这样的 JinternalFrame 类文件中使用来调用另一个（YourJinternalFrame）

```
 YourJinternalFrame  nw = YourJinternalFrame.getInstance();
    nw.pack();
    if (nw.isVisible()) {
    } else {
        getDesktopPane().add(nw);
        nw.setVisible(true);
    }
    try {
        nw.setMaximum(true);
    } catch (PropertyVetoException ex) {
        Logger.getLogger(MainApplication.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

要仅获取名为 JinternalFrame 的一个实例，请将此代码放在名为 JinternalFrame(YourJinternalFrame) 的下方

```
private static YourJinternalFrame myInstance;

public static YourJinternalFrame getInstance() {
    if (myInstance == null) {
        myInstance = new YourJinternalFrame();
    }
    return myInstance; 
```

谢谢我：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T06:33:11.517

首先在 f2 按钮操作上创建 f1 框架对象

```
F1 f1 = new F1(); 
```

然后像这样创建一个 JDesktopPane 对象

```
JDesktopPane desktopPane = getDesktopPane();
desktopPane.add(f1);//add f1 to desktop pane
f1.setVisible(true);// set the f1 frame visible 
```

最后，如果需要处理当前帧

```
this.dispose(); 
```

# android - java.lang.String 不能转换为 android.database.Cursor

> ID：15598916
> 
> 赞同：0
> 
> 时间：2013-03-24T13:16:39.640
> 
> 标签：android, logcat

我正在尝试单击列表视图中的值以转到新的 xml 布局我的问题是出现此错误：

从我的 logcat 我只能理解这个

```
03-24 11:37:20.990: E/AndroidRuntime(793):  at me.mojica.caloriewatch.Search$1.onItemClick(Search.java:261) 
```

这个

```
 Cursor cursor = (Cursor) parent.getItemAtPosition(position); 
```

这是完整的logcat。

```
03-24 11:37:20.990: E/AndroidRuntime(793): FATAL EXCEPTION: main
03-24 11:37:20.990: E/AndroidRuntime(793): java.lang.ClassCastException: java.lang.String cannot be cast to android.database.Cursor
03-24 11:37:20.990: E/AndroidRuntime(793):  at me.mojica.caloriewatch.Search$1.onItemClick(Search.java:261)
03-24 11:37:20.990: E/AndroidRuntime(793):  at android.widget.AdapterView.performItemClick(AdapterView.java:298)
03-24 11:37:20.990: E/AndroidRuntime(793):  at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
03-24 11:37:20.990: E/AndroidRuntime(793):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
03-24 11:37:20.990: E/AndroidRuntime(793):  at android.widget.AbsListView$1.run(AbsListView.java:3423)
03-24 11:37:20.990: E/AndroidRuntime(793):  at android.os.Handler.handleCallback(Handler.java:725)
03-24 11:37:20.990: E/AndroidRuntime(793):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-24 11:37:20.990: E/AndroidRuntime(793):  at android.os.Looper.loop(Looper.java:137)
03-24 11:37:20.990: E/AndroidRuntime(793):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-24 11:37:20.990: E/AndroidRuntime(793):  at java.lang.reflect.Method.invokeNative(Native Method)
03-24 11:37:20.990: E/AndroidRuntime(793):  at java.lang.reflect.Method.invoke(Method.java:511)
03-24 11:37:20.990: E/AndroidRuntime(793):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-24 11:37:20.990: E/AndroidRuntime(793):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-24 11:37:20.990: E/AndroidRuntime(793):  at dalvik.system.NativeStart.main(Native Method) 
```

对于我的 search.java

```
package me.mojica.caloriewatch;

import java.util.ArrayList;
import android.app.Activity;
import android.content.Context;
import android.content.DialogInterface;
import android.content.SharedPreferences;
import android.content.pm.ActivityInfo;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AlphabetIndexer;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.SectionIndexer;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.ArrayAdapter;
import android.text.Editable;
import android.text.TextWatcher;
import android.content.DialogInterface.OnClickListener;

public class Search extends Activity implements OnClickListener {

   int arlene = 0;
   int textlength = 0;

   ListView listContent1, transact;
   EditText search, food, calories;
   Button FSearch;
   TextView result;

   SimpleCursorAdapter cursorAdapter, cursorAdap;
   Cursor cursor;
   private String[] listview_array;
   private ArrayList<String> array_sort = new ArrayList<String>();
   private SQLiteAdapter mySQLiteAdapter;

   /*   Called when the activity is first created.  */

   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.search);
      setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

  listContent1 = (ListView) findViewById(R.id.lFoodlist1);
  listContent1.setFastScrollEnabled(true); //must be enabled
  // transact = (ListView)findViewById(R.id.transact);
  search = (EditText) findViewById(R.id.eFsearch);
  food = (EditText) findViewById(R.id.editText1);
  calories = (EditText) findViewById(R.id.editText2);
  FSearch = (Button) findViewById(R.id.bFsearch);
  result = (TextView) findViewById(R.id.textView3);

  /*
     Create/Open a SQLite database
     and fill with dummy content
     and close it
    */
  mySQLiteAdapter = new SQLiteAdapter(this);
  mySQLiteAdapter.openToWrite();
  mySQLiteAdapter.deleteAll();

  mySQLiteAdapter.insert("Adobong Baboy (1 bowl)", "339");
  mySQLiteAdapter.insert("Adobong Kangkong ( 1 bowl)", "84");
  mySQLiteAdapter.insert("Adobong Manok (1 bowl) ", "624");
  mySQLiteAdapter.insert("Adobong Pusit (1 bowl)", "121");
  mySQLiteAdapter.insert("Arroz Caldo (1 bowl)", "500");
  mySQLiteAdapter.insert("Chicken Afritada (1 bowl)", "323");
  mySQLiteAdapter.insert("Chicken Asado (1 bowl)", "205");
  mySQLiteAdapter.insert("Chicken Empanada (1 bowl)", "150");
  mySQLiteAdapter.insert("Chicken Tinola (1 bowl)", "267");
  mySQLiteAdapter.insert("Dinuguan (1 bowl)", "255");
  mySQLiteAdapter.insert("Fried Bangus (1 pc)", "162");
  mySQLiteAdapter.insert("Ginataang Kalabasa (1 bowl)", "225");
  mySQLiteAdapter.insert("Ginataang Langka (1 bowl)", "167");
  mySQLiteAdapter.insert("Ginataang Pinakbet (1 bowl)", "155");
  mySQLiteAdapter.insert("Igado (1 bowl)", "297");
  mySQLiteAdapter.insert("Kare Kare (1 bowl)", "129");
  mySQLiteAdapter.insert("Laing (1 bowl)", "202");
  mySQLiteAdapter.insert("Lechon Kawali (1 bowl)", "245");
  mySQLiteAdapter.insert("Pakbet (1 bowl)", "233");
  mySQLiteAdapter.insert("Paksiw na Isda (1 bowl)", "73");
  mySQLiteAdapter.insert("Paksiw na Pata (1 bowl)", "342");
  mySQLiteAdapter.insert("Pinakbet (1 bowl)", "110");
  mySQLiteAdapter.insert("Pork Afritada (1 bowl)", "402");
  mySQLiteAdapter.insert("Pork Asado (1 bowl)", "533");
  mySQLiteAdapter.insert("Pork Barbaque on Stick (1 stick)", "111");
  mySQLiteAdapter.insert("Pork Embutido (1 bowl)", "350");
  mySQLiteAdapter.insert("Pork Mechado (1 bowl)", "157");
  mySQLiteAdapter.insert("Pork Nilaga (1 bowl)", "181");
  mySQLiteAdapter.insert("Pork Pochero (1 bowl)", "798");
  mySQLiteAdapter.insert("Pork Sinigang (1 bowl)", "290");
  mySQLiteAdapter.insert("Relyenong Bangus (1 bowl)", "390");
  mySQLiteAdapter.insert("Salmon Sinigang (1 bowl)", "190");
  mySQLiteAdapter.insert("Sisig (1 bowl)", "293");
  mySQLiteAdapter.insert("Tilapia (1 pc)", "100");
  mySQLiteAdapter.insert("Tinolang Manok (1 bowl)", "843");
  mySQLiteAdapter.insert("Tortang Talong (1 pc)", "291");
  mySQLiteAdapter.insert("Balut (1 egg)", "188");
  mySQLiteAdapter.insert("Beefsteak (1 bowl)", "210");
  mySQLiteAdapter.insert("Bibingka", "100");
  mySQLiteAdapter.insert("Biko (1 slice)", "100");
  mySQLiteAdapter.insert("Buko Pie (1 slice)", "145");
  mySQLiteAdapter.insert("Cassava Cake (1 slice)", "100");
  mySQLiteAdapter.insert("Chicsilog (1 meal)", "284");
  mySQLiteAdapter.insert("Coorned Beef (1 meal)", "267");
  mySQLiteAdapter.insert("Danggit (1 pc)","98");
  mySQLiteAdapter.insert("Ice Cream", "157");
  mySQLiteAdapter.insert("Embotido", "187");
  mySQLiteAdapter.insert("Ensaymada", "410");
  mySQLiteAdapter.insert("Espasol", "50");
  mySQLiteAdapter.insert("Fishball (1 pc)", "9");
  mySQLiteAdapter.insert("Fruit Salad (1 bowl)", "211");
  mySQLiteAdapter.insert("Galapong (1 slice)", "100");
  mySQLiteAdapter.insert("Ginataan (1 bowl)", "167");
  mySQLiteAdapter.insert("Halaya", "70");
  mySQLiteAdapter.insert("Halo halo (1 cup)", "80");
  mySQLiteAdapter.insert("Hotdog (1 pc)", "183");
  mySQLiteAdapter.insert("Kutsinta", "100");
  mySQLiteAdapter.insert("Leche Flan", "228");
  mySQLiteAdapter.insert("Lomi", "222");
  mySQLiteAdapter.insert("Longganisa (1 pc)", "170");
  mySQLiteAdapter.insert("Lumpiang Shanghai (1 pc)", "169");
  mySQLiteAdapter.insert("Palabok", "305");
  mySQLiteAdapter.insert("Palitaw", "100");
  mySQLiteAdapter.insert("Pancit", "416");
  mySQLiteAdapter.insert("Pansit Palabok", "305");
  mySQLiteAdapter.insert("Pastillas (1 pc)", "76");
  mySQLiteAdapter.insert("Porksilog (1 meal)", "555");
  mySQLiteAdapter.insert("Pulvoron (1 pc)", "40");
  mySQLiteAdapter.insert("Puto (1 pc)", "112");
  mySQLiteAdapter.insert("Puto Bumbong (1 pc)", "50");
  mySQLiteAdapter.insert("Puto Pao (1 bun)", "120");
  mySQLiteAdapter.insert("Qwek qwek (1 pc)", "14");
  mySQLiteAdapter.insert("Saging na Saba", "122");
  mySQLiteAdapter.insert("Sapin sapin (1 slice)", "100" );
  mySQLiteAdapter.insert("Scrambled Egg", "100");
  mySQLiteAdapter.insert("Sinangag (1 cup)", "300");
  mySQLiteAdapter.insert("Siopao", "240");
  mySQLiteAdapter.insert("Suman (1 pc )", "31");
  mySQLiteAdapter.insert("Taho (1 cup)", "180");
  mySQLiteAdapter.insert("Tapsilog (1 meal)", "364");
  mySQLiteAdapter.insert("Tikoy (1 slice)", "100");
  mySQLiteAdapter.insert("Tuyo (1 pc)", "57");
  mySQLiteAdapter.insert("Yema (1 pc)", "20");

  mySQLiteAdapter.insert("Apple", "80");
  mySQLiteAdapter.insert("Apricots", "17");
  mySQLiteAdapter.insert("Avocado", "30");
  mySQLiteAdapter.insert("Banana", "105");
  mySQLiteAdapter.insert("Blueberries", "82");
  mySQLiteAdapter.insert("Cherry", "4");
  mySQLiteAdapter.insert("Coconut", "159");
  mySQLiteAdapter.insert("Eggplant", "132");
  mySQLiteAdapter.insert("Grape Fruit", "62");
  mySQLiteAdapter.insert("Guava", "61");
  mySQLiteAdapter.insert("Kiwi Fruit", "25");
  mySQLiteAdapter.insert("Lemon", "24");
  mySQLiteAdapter.insert("Limes", "20");
  mySQLiteAdapter.insert("Lychee", "4");
  mySQLiteAdapter.insert("Mango", "107");
  mySQLiteAdapter.insert("Melon", "188");
  mySQLiteAdapter.insert("Orange", "62");
  mySQLiteAdapter.insert("Peach", "38");
  mySQLiteAdapter.insert("Pineapple (1 slice)", "42");
  mySQLiteAdapter.insert("Pomelo (per section)", "72");
  mySQLiteAdapter.insert("Rambutan", "7");
  mySQLiteAdapter.insert("Raspberries", "82");
  mySQLiteAdapter.insert("Strawberry", "8");
  mySQLiteAdapter.insert("Tomato", "15");
  mySQLiteAdapter.insert("Watermelon (per slice)", "46");

  mySQLiteAdapter.close();

  /* 
     Open the same SQLite database
     and read all it's content.
    */
  mySQLiteAdapter = new SQLiteAdapter(this);
  mySQLiteAdapter.openToRead();
  listview_array = mySQLiteAdapter.qall();

  listContent1.setAdapter(new ArrayAdapter<String>(this,
          android.R.layout.simple_list_item_1, listview_array));
  listContent1.setOnItemClickListener(listContentOnItemClickListener); 
  result.setOnClickListener(new View.OnClickListener(){

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub

        // Toast.makeText(Search.this, Toast.LENGTH_LONG).show();      
    }

  });

  search.addTextChangedListener(new TextWatcher()
  {
  public void afterTextChanged(Editable s)
  {
                                                                  // Abstract Method of TextWatcher Interface.
  }
  public void beforeTextChanged(CharSequence s,
  int start, int count, int after)
  {
  // Abstract Method of TextWatcher Interface.
  }
  public void onTextChanged(CharSequence s,
  int start, int before, int count)
  {
  textlength = search.getText().length();
  array_sort.clear();
  for (int i = 0; i < listview_array.length; i++)
  {
  if (textlength <= listview_array[i].length())
  {
  if(search.getText().toString().equalsIgnoreCase(
  (String)
  listview_array[i].subSequence(0,
  textlength)))
  {
      array_sort.add(listview_array[i]);
      }
   }
}
  listContent1.setAdapter(new ArrayAdapter<String>
  (Search.this,
  android.R.layout.simple_list_item_1, array_sort));
  }

  });

  Cursor cursor = mySQLiteAdapter.queueAll();
  startManagingCursor(cursor);

  String[] from = new String[] { SQLiteAdapter.KEY_FOODNAME, SQLiteAdapter.KEY_CALORIES };
  int[] to = new int[] { R.id.tv1, R.id.tv2 };

  SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.row, cursor, from,
        to);

      listContent1.setAdapter(cursorAdapter);
      listContent1.setOnItemClickListener(listContentOnItemClickListener);
   }

   private ListView.OnItemClickListener listContentOnItemClickListener = new     ListView.OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
         Cursor cursor = (Cursor) parent.getItemAtPosition(position);

     String item_content1 = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.KEY_FOODNAME));
     String item_content2 = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.KEY_CALORIES));

     arlene = arlene + Integer.parseInt(item_content2);
     String item = String.valueOf(" Food Name: " + item_content1) + "\n" + " Calories: "
           + item_content2;

     Toast.makeText(Search.this, item, Toast.LENGTH_LONG).show();

     food.setText(item_content1);
     calories.setText(String.valueOf(arlene));
     result.setText(String.valueOf(arlene));

     // define a key to store value into sharedpreferences
     String key = food.getText().toString() + ":" + calories.getText().toString();

     // here i assume that the combinasion food:calories are unique
     SavePreferences(key, key); 

     /*
        mySQLiteAdapter.openToWrite();
        String data1 = food.getText().toString();
        String data2 = calories.getText().toString();
        mySQLiteAdapter.insertFood(data1, data2);
        updateList();
       */
     SavePreferences("computed", result.getText().toString());
  }
   };

   protected void SavePreferences(String key, String value) {
  // TODO Auto-generated method stub
  SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
  SharedPreferences.Editor editor = sharedPreferences.edit();
  editor.putString(key, value);
  editor.commit();

   }

       protected void LoadPreferences() {
      // // TODO Auto-generated method stub
       SharedPreferences sharedPreferences = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
      String strSavedMem1 = sharedPreferences.getString("computed", "");
      // String strSavedMem2 = sharedPreferences.getString("calories", "");
      //
       result.setText(strSavedMem1);
       }
      // calories.setText(strSavedMem2);
      // }

class MyCursorAdapter extends SimpleCursorAdapter implements SectionIndexer{

    AlphabetIndexer alphaIndexer;

            public MyCursorAdapter(Context context, int layout, Cursor c,
                            String[] from, int[] to) {
                    super(context, layout, c, from, to);

   alphaIndexer=new AlphabetIndexer(c, cursor.getColumnIndex(SQLiteAdapter.KEY_FOODNAME), "        ABCDEFGHIJKLMNOPQRSTUVWXYZ");

            }
   // you have just to instanciate the indexer class like this

   //cursor,index of the sorted column,a string representing the alphabet (pay attention on the        blank char at the beginning of the sequence)

   @Override

   public int getPositionForSection(int section) {                

           return alphaIndexer.getPositionForSection(section); //use the indexer

   }

   @Override

   public int getSectionForPosition(int position) {                       

    return alphaIndexer.getSectionForPosition(position); //use the indexer

   }

   @Override

   public Object[] getSections() {

           return alphaIndexer.getSections(); //use the indexer

   }

            }

      protected void onDestroy() {

         // TODO Auto-generated method stub

         super.onDestroy();

         mySQLiteAdapter.close();

      }

      private void updateList() {
         // TODO Auto-generated method stub
         cursor.requery();
      }

   @Override
   public void onClick(DialogInterface arg0, int arg1) {
       // TODO Auto-generated method stub

   }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:53:53.343

问题是 onTextChanged: 你应该使用/拥有：`cursorAdapter.getFilter().filter(s.toString());`

我建议您查询用于在搜索编辑文本中键入的字符串，然后使用列表视图获取项目位置以在 onItemClick 中获取光标`Cursor cursor = (Cursor) listContent1.getItemAtPosition(position);`

# javascript - 使用 angular.js 向 HTTP 请求添加自定义标头

> ID：15598917
> 
> 赞同：90
> 
> 时间：2013-03-24T13:16:45.660
> 
> 标签：javascript, angularjs, http-headers

我是 angular.js 的新手，我正在尝试向请求中添加一些标头：

```
 var config = {headers: {
            'Authorization': 'Basic d2VudHdvcnRobWFuOkNoYW5nZV9tZQ==',
            'Accept': 'application/json;odata=verbose'
        }
    };

   $http.get('https://www.example.com/ApplicationData.svc/Malls(1)/Retailers', config).success(successCallback).error(errorCallback); 
```

我查看了所有文档，在我看来这应该是正确的。

当我对 中的 URL 使用本地文件时`$http.get`，我在 Chrome 的网络选项卡上看到以下 HTTP 请求：

```
GET /app/data/offers.json HTTP/1.1
Host: www.example.com
Connection: keep-alive
Cache-Control: max-age=0
If-None-Match: "0f0abc9026855b5938797878a03e6889"
Authorization: Basic Y2hhZHN0b25lbWFuOkNoYW5nZV9tZQ==
Accept: application/json;odata=verbose
X-Requested-With: XMLHttpRequest
If-Modified-Since: Sun, 24 Mar 2013 15:58:55 GMT
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22
X-Testing: Testing
Referer: http://www.example.com/app/index.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

如您所见，两个标题均已正确添加。但是当我将 URL 更改为`$http.get`上面显示的 URL 时（使用真实地址，而不是 example.com 除外），然后我得到：

```
OPTIONS /ApplicationData.svc/Malls(1) HTTP/1.1
Host: www.datahost.net
Connection: keep-alive
Access-Control-Request-Method: GET
Origin: http://mpon.site44.com
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22
Access-Control-Request-Headers: accept, origin, x-requested-with, authorization, x-testing
Accept: */*
Referer: http://mpon.site44.com/app/index.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

这两者之间代码的唯一区别是，第一个 URL 是本地文件，第二个 URL 是远程服务器。如果您查看第二个 Request 标头，则没有 Authentication 标头，并且`Accept`似乎使用默认值而不是指定的标头。此外，第一行现在说`OPTIONS`而不是`GET`（虽然`Access-Control-Request-Method`是`GET`）。

知道上面的代码有什么问题，或者在不使用本地文件作为数据源时如何获取包含的附加标头？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-24T14:16:53.713

我拿走了你所拥有的，并添加了另一个`X-Testing`标题

```
var config = {headers:  {
        'Authorization': 'Basic d2VudHdvcnRobWFuOkNoYW5nZV9tZQ==',
        'Accept': 'application/json;odata=verbose',
        "X-Testing" : "testing"
    }
};

$http.get("/test", config); 
```

在 Chrome 网络选项卡中，我看到它们正在发送。

```
GET /test HTTP/1.1
Host: localhost:3000
Connection: keep-alive
Accept: application/json;odata=verbose
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.172 Safari/537.22
Authorization: Basic d2VudHdvcnRobWFuOkNoYW5nZV9tZQ==
X-Testing: testing
Referer: http://localhost:3000/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

您没有从浏览器或服务器上看到它们吗？尝试浏览器工具或调试代理，看看发送了什么。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-01-01T16:45:16.487

使用 HTTP POST 方法的基本身份验证：

```
$http({
    method: 'POST',
    url: '/API/authenticate',
    data: 'username=' + username + '&password=' + password + '&email=' + email,
    headers: {
        "Content-Type": "application/x-www-form-urlencoded",
        "X-Login-Ajax-call": 'true'
    }
}).then(function(response) {
    if (response.data == 'ok') {
        // success
    } else {
        // failed
    }
}); 
```

...和带有标头的 GET 方法调用：

```
$http({
    method: 'GET',
    url: '/books',
    headers: {
        'Authorization': 'Basic d2VudHdvcnRobWFuOkNoYW5nZV9tZQ==',
        'Accept': 'application/json',
        "X-Login-Ajax-call": 'true'
    }
}).then(function(response) {
    if (response.data == 'ok') {
        // success
    } else {
        // failed
    }
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-11-21T08:04:36.100

如果您想将自定义标头添加到所有请求，您可以更改 $httpProvider 的默认值以始终添加此标头...</p>

```
app.config(['$httpProvider', function ($httpProvider) {
    $httpProvider.defaults.headers.common = { 
        'Authorization': 'Basic d2VudHdvcnRobWFuOkNoYW5nZV9tZQ==',
        'Accept': 'application/json;odata=verbose'
      };
}]); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-01-07T11:11:45.910

我的建议是在函数中添加这样的函数调用设置，检查适合它的标题。我相信它肯定会奏效。它对我来说非常有用。

```
function getSettings(requestData) {
    return {
        url: requestData.url,
        dataType: requestData.dataType || "json",
        data: requestData.data || {},
        headers: requestData.headers || {
            "accept": "application/json; charset=utf-8",
            'Authorization': 'Bearer ' + requestData.token
        },
        async: requestData.async || "false",
        cache: requestData.cache || "false",
        success: requestData.success || {},
        error: requestData.error || {},
        complete: requestData.complete || {},
        fail: requestData.fail || {}
    };
} 
```

然后像这样调用你的数据

```
 var requestData = {
        url: 'API end point',
        data: Your Request Data,
        token: Your Token
    };

    var settings = getSettings(requestData);
    settings.method = "POST"; //("Your request type")
    return $http(settings); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-24T16:58:57.440

您看到的 OPTIONS 请求很好。授权标头未在其中公开。

但是为了使基本身份验证工作，您需要添加：`withCredentials = true;`到您的`var config`.

来自 AngularJS [$http 文档](http://docs.angularjs.org/api/ng.%24http)：

> **withCredentials** - `{boolean}`- 是否`withCredentials` 在 XHR 对象上设置标志。有关更多信息，请参阅[带有凭据的请求。](https://developer.mozilla.org/en/http_access_control#section_5)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-24T19:10:57.400

服务器的答案是什么？它应该回复 204，然后真正发送您请求的 GET。

在 OPTIONS 中，客户端正在检查服务器是否允许 CORS 请求。如果它为您提供了不同于 204 的信息，那么您应该配置您的服务器以发送正确的 Allow-Origin 标头。

添加标题的方式是正确的方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-02-08T12:52:40.527

Chrome 正在预检请求以查找 CORS 标头。如果请求是可接受的，它将发送真正的请求。如果您正在跨域执行此操作，则只需处理它或找到一种方法使请求非跨域。这是设计使然。

> 与简单请求（上面讨论过）不同，“预检”请求首先通过 OPTIONS 方法向另一个域上的资源发送 HTTP 请求，以确定实际请求是否可以安全发送。跨站点请求是这样预检的，因为它们可能对用户数据有影响。特别是，在以下情况下会预检请求：
> 
> 它使用 GET、HEAD 或 POST 以外的方法。此外，如果 POST 用于发送 Content-Type 不是 application/x-www-form-urlencoded、multipart/form-data 或 text/plain 的请求数据，例如，如果 POST 请求向服务器发送 XML 有效负载使用 application/xml 或 text/xml，然后预检请求。它在请求中设置自定义标头（例如，请求使用诸如 X-PINGOTHER 之类的标头）

参考：[Chrome 中的 AJAX 发送 OPTIONS 而不是 GET/POST/PUT/DELETE？](https://stackoverflow.com/questions/21783079/ajax-in-chrome-sending-options-instead-of-get-post-put-delete)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-30T08:03:08.847

您只是添加了服务器不允许的标头。

例如 - 您的服务器设置 CORS 以仅允许这些标头（接受、缓存控制、编译指示、内容类型、来源）

在您的http请求中，您正在添加这样的

```
 headers: {
        'Authorization': 'Basic d2VudHdvcnRobWFuOkNoYW5nZV9tZQ==',
        'Accept': 'application/json',
        'x-testing': 'testingValue'
    } 
```

然后服务器将拒绝此请求，因为不允许（授权和 x 测试）。

这是服务器端配置。

并且与 HTTP 选项无关，它只是对来自不同域的服务器的预检，以检查服务器是否允许实际调用。

* * *

## 回答 #9

> 赞同：-9
> 
> 时间：2013-03-24T13:42:01.763

对我来说，以下解释性片段有效。也许您不应该使用`'`标题名称？

```
{
   headers: { 
      Authorization: "Basic " + getAuthDigest(), 
      Accept: "text/plain" 
   }
} 
```

我正在使用`$http.ajax()`，但我不希望它会改变游戏规则。

# opennebula - opennebula3.4.1中找不到open.db

> ID：15598921
> 
> 赞同：0
> 
> 时间：2013-03-24T13:17:08.310
> 
> 标签：opennebula

oneadmin 的主位置（即 /var/）中缺少 open.db。正因为如此，每当我开始打开星云数据库时就会发生不匹配，该怎么办？有什么建议么？

-琳达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T09:59:12.940

OpenNebula sqlite DB (OpenNebula default DB) is called `one.db`, and it is placed in `/var/lib/one`. Database version mismatch errors arise when an update is performed to OpenNebula and 'oned' is started before the DB is migrated.

The straight solution would be to run `onedb upgrade -s /var/lib/one/one.db` and start OpenNebula. The radical solution (that entails losing all the information about hosts, VMs, vnets, etc) would be to erase the DB and start OpenNebula.

# javascript - 有没有办法在 JavaScript 中动态修改函数的闭包？

> ID：15598924
> 
> 赞同：3
> 
> 时间：2013-03-24T13:17:18.160
> 
> 标签：javascript, functional-programming, scope, closures

```
function a(){ return x++; }
function b(){ var x=0; return a(); /*call a using b's scope*/ };
console.log(b(),b(),b()); 
```

所需输出：1、2、3

问题：有没有办法调用`a`inside `b`，强制它使用`b`'s 范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:20:07.060

不完全是，但你可以在它周围包裹一个闭包：

```
(function() {
    var x = 0;
    window.a = function() {return x++;};
    window.b = function() {return a();};
    console.log(b(),b(),b());
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T14:07:38.637

您的问题可以分解为两部分：

1.  动态范围 - [http://en.wikipedia.org/wiki/Scope_(computer_science)#Dynamic_scoping](http://en.wikipedia.org/wiki/Scope_(computer_science)#Dynamic_scoping)
2.  跨调用的变量保留

第一部分可以使用`eval`. 阅读以下 StackOverflow 问题以获取更多详细信息：[是否可以在不使用 eval 的情况下在 JavaScript 中实现动态范围？](https://stackoverflow.com/q/10060857/783743)

第二部分要求您将变量的中间值存储在`x`某处，并在每次函数调用后恢复它。在这种情况下存储它的最佳位置是函数`b`本身。

这就是您的代码的样子：

```
function a() {
    return ++x; // I believe you want prefix increment, not postfix
}

function b() {
    var x = b.x;
    eval(String(a)); // dynamic scoping
    b.x = a();
    return x;
}

b.x = 0;

console.log(b(), b(), b()); 
```

你可以在这里看到演示：http: [//jsfiddle.net/ucGxD/1/](http://jsfiddle.net/ucGxD/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T13:19:43.560

不，范围仅来自函数的定义方式。

您必须使用参数（和闭包）传递数据才能将 b 范围内的某些内容放入 a 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-24T13:45:32.523

您的确切示例不起作用（因为`x`每次调用时都会重新初始化`b`），但请考虑：

```
x = 100;
function a() { return x++; }
function b() { 
    var x = 0; 
    console.log(a(), a(), a()); // 100 101 102
    eval(a.toString())
    console.log(a(), a(), a()); // 0 1 2
} 
```

不用说，不要在工作中尝试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T15:19:24.273

不，没有。这绝对是一个功能。

**更新**

由于这里的一些答案和评论建议使用`function.toString`和`eval`模拟动态范围，让我总结一下为什么我认为这不是一个合适的解决方案（无论如何都是一个坏主意）：

1.  语言标准没有规定调用`toString`函数的结果，也不打算用于这种用途。它恰好适用于大多数（用户定义的）功能的当前浏览器，但不能保证这一点，我强烈建议不要编写依赖它的生产代码。

2.  函数远不止字符串化可以给你的一段文本。特别是，函数是具有标识和携带状态的*对象*，字符串化不能保留这两者。更确切地说：

    *   函数可以具有函数体可以访问的属性（特别是`prototype`属性）。它们将在字符串化过程中丢失。

    *   函数有一个闭包环境，封装了它们使用的周围范围的变量。同样，这将丢失，导致悬空或错误绑定变量引用（即使这可能是其中一些练习的目的）。

    *   函数还有其他可能相关的属性，比如它们的身份、修改`__proto__`的 或配置状态，比如不可扩展。这些都没有被保留。

    *   并非所有函数都是简单的 JavaScript 源函数。它们可能是原生的，或者从 ES6 开始，它们可能是函数代理。在这两种情况下，字符串化都不会有用。

3.  具有未绑定变量引用的函数在严格模式下是不合法的（因此在 ES6 中的许多地方都是非法的）。

因此，虽然字符串化可能在一些简单的情况下起作用，但这是偶然的，而不是设计使然。这是一个脆弱的黑客。避开它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-24T14:18:25.890

是的。上下文可以通过[call](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Function/call)或[apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)转移。您可以通过调用[bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)来将上下文设置为范围。看这个例子：

```
function a() {
    return ++this.x;
}

function b() {
    this.x = this.x || 0;
    return a.call(this);  // a works with x in b's context
}

b = b.bind(b); // now the b's context is the b's scope :-)

console.log(b(),b(),b()); // 1 2 3
console.log(x); // error: x is not defined - global scope is clear 
```

正如 Quentin 所指出的，请参见[此处](http://clubajax.org/javascript-scope-and-context-not-the-same-thing/)的上下文和范围之间的区别。

# html - 手机上的 Twitter Bootstrap 菜单样式

> ID：15598925
> 
> 赞同：0
> 
> 时间：2013-03-24T13:17:20.937
> 
> 标签：html, css, twitter-bootstrap

我正在使用 twitter 引导程序，我的菜单当前显示如下： ![菜单](../Images/5322af317fe9d33971d5c2702859705d.png) 这是完美的，但我需要在移动视图中显示菜单显示，如： ![在此处输入图像描述](../Images/e969e47a2addbb9f6de7488158b88fe4.png)

现在我知道我需要使用媒体查询，这不是问题，问题是如何在 CSS 中让我的菜单样式像线条等......？

这是HTML：

```
<!--SUBMENU-->
<div class="row-fluid">
   <div class="span12 submenu">
       <ul class="nav menu nav-pills">
            <li class="item-109"><a href="/stradix/index.php/company-profile" >Company Profile</a></li>
            <li class="item-108"><a href="/stradix/index.php/due-diligence" >Due Diligence</a></li>
            <li class="item-110"><a href="/stradix/index.php/our-solution" >Our Solution</a></li>
            <li class="item-111"><a href="/stradix/index.php/loan-process" >Loan Process</a></li>
            <li class="item-112"><a href="/stradix/index.php/currency-converter" >Currency Converter</a></li>
            <li class="item-113"><a href="/stradix/index.php/loan-calculator" >Loan Calculator</a></li>
            <li class="item-114"><a href="/stradix/index.php/news" >News</a></li>
            <li class="item-115"><a href="/stradix/index.php/important-downloads" >Downloads</a></li>
        </ul>
    </div>
</div>
<!--SUBMENU--> 
```

和覆盖默认引导程序的 CSS：

```
.submenu .nav-pills > li > a {
    font-size:1.25em; 
    padding:0; 
    margin:2em 0.9em 0 0;
    padding: 0 0.9em 0 0;
    color:#6D6E70; 
    border-right:1px solid #A7A9AB;
    border-radius:0;
}
.submenu .nav-pills a:hover {
    background:none;
    color:#00ADEE;
}
.submenu .nav-pills > .active > a {
    background:none;
    color:#00ADEE;
}

.submenu .nav-pills > li:last-child > a {
        border-right:none;
        padding: 0;
        margin-right:0;
} 
```

我会在 JSFIDDLE 上发布但由于某种原因，我仍然无法从周五连接到 jsfiddle..

任何帮助非常感谢..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:36:43.810

你可以做这样的事情来达到预期的效果

```
@media (max-width: 480px) { 

 .nav-pills > li {
float: left;
width: 50%;
 }
} 
```

以 [我的 JSFiddle 为例](http://jsfiddle.net/shail/jeNmY/)

# asp.net-mvc - 尝试构建下拉列表时 ASP MVC Select 语句错误

> ID：15598930
> 
> 赞同：0
> 
> 时间：2013-03-24T13:17:56.677
> 
> 标签：asp.net-mvc, select, selectlistitem

错误：不包含“选择”的定义，也没有“选择”的扩展方法，接受......的第一个参数

我在示例中看到很多使用这种方式，为什么它讨厌我的 .select 语句？我只是想建立我的下拉列表并将其发送到视图。

```
IEnumerable<SelectListItem> items = db.Genres
                .Select(c => new SelectListItem
                                {
                                    Value = c.gId.ToString(),
                                    Text = c.gName
                                });
ViewBag.gId = items; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:10:28.450

> 为什么它讨厌我的 .select 语句？

通过在页面顶部添加正确的 using 指令，确保您已将[`.Select()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select.aspx)扩展方法纳入范围：

```
using System.Linq; 
```

[`extension methods`](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)在进入 ASP.NET MVC 之前，您可能应该阅读更多有关如何工作和一般 LINQ 的信息。

# post - mootools textarea 字符串

> ID：15598934
> 
> 赞同：0
> 
> 时间：2013-03-24T13:18:42.380
> 
> 标签：post, mootools, innerhtml

我想发送一个包含文本区域内容的请求，但我只得到一个数组而不是希望的字符串。

```
<textarea id="putup" name="textarea" cols="70" rows="15">http://www.example.com/?var=2EBR&n=1</textarea>

window.addEvent('domready', function() {
alert($('putup').value);
myRequest = new Request({
method: 'post',
url: 'build2.php',
}).post('var='+$('putup').value+'&uniquebutton='+$('uniquebutton').value);
}); 
```

我的帖子看起来像这样：

```
Array ( [var] => http://www.example.com/?var=2EBR [n] => 1 [uniquebutton] => aqynnnisqopo ) 
```

如何获得真正的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:06:45.920

您的代码很好，除了您试图在您的帖子中发送完整的网址而不对其进行编码 - 如果网址还包含参数，这可能会产生问题 - 就像在您的情况下它是 &n=1 作为帖子参数键发送的 => n value=>1 当您发送可能包含参数字符的 url 和字符串时，您需要使用 encodeURIComponent ，因此保存此 URL 的参数将包含整个 URL 并且不会破坏它：

```
myRequest = new Request({
    method: 'post',
    url: 'build2.php',
}).post('var='+ window.encodeURIComponent($('putup').value)+'&uniquebutton='+$('uniquebutton').value); 
```

还有一点要说的——在 mootools 中，你可以使用 element 的 get 函数来获取任何元素的任何有效属性——所以你可以做 $('pupup').get('value') 但是经典的方法 $('putup' ).value 当然很好。

# linux - awk：来自一个文本文件的词频，如何输出到 myFile.txt？

> ID：15598935
> 
> 赞同：1
> 
> 时间：2013-03-24T13:18:43.993
> 
> 标签：linux, shell, awk, frequency-analysis, word-frequency

**给定一个带有空格分隔单词的 .txt 文件**，例如：

```
But where is Esope the holly Bastard
But where is 
```

和**awk 函数**：

```
cat /pathway/to/your/file.txt | tr ' ' '\n' | sort | uniq -c | awk '{print $2"@"$1}' 
```

我在控制台中得到**以下输出：**

```
1 Bastard
1 Esope
1 holly
1 the
2 But
2 is
2 where 
```

**如何进入打印到 myFile.txt ？** 我实际上有 300.000 行和近 200 万字。最好将结果输出到文件中。

* * *

编辑：使用的答案（@Sudo_O）：

```
$ awk '{a[$1]++}END{for(k in a)print a[k],k}' RS=" |\n" myfile.txt | sort > myfileout.txt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T15:10:28.190

您的管道效率不高，您应该`awk`改用以下方法：

```
awk '{a[$1]++}END{for(k in a)print a[k],k}' RS=" |\n" file > myfile 
```

如果您希望按排序顺序输出：

```
awk '{a[$1]++}END{for(k in a)print a[k],k}' RS=" |\n" file | sort > myfile 
```

* * *

管道给出的实际输出是：

```
$ tr ' ' '\n' < file | sort | uniq -c | awk '{print $2"@"$1}'
Bastard@1
But@2
Esope@1
holly@1
is@2
the@1
where@2 
```

注意：`cat`在这里使用是没有用的，我们可以只用 . 重定向输入`<`。该`awk`脚本也没有意义，它只是颠倒单词和单词频率的顺序并用`@`. 如果我们删除`awk`脚本，则输出更接近所需的输出*（但请注意前面的间距，它是未排序的）*：

```
$ tr ' ' '\n' < file | sort | uniq -c 
      1 Bastard
      2 But
      1 Esope
      1 holly
      2 is
      1 the
      2 where 
```

我们可以`sort`再次删除前导空格`sed`：

```
$ tr ' ' '\n' < file | sort | uniq -c | sort | sed 's/^\s*//'
1 Bastard
1 Esope
1 holly
1 the
2 But
2 is
2 where 
```

但就像我一开始提到的，让我们`awk`来处理它：

```
$ awk '{a[$1]++}END{for(k in a)print a[k],k}' RS=" |\n" file | sort
1 Bastard
1 Esope
1 holly
1 the
2 But
2 is
2 where 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T13:22:33.387

只需将输出重定向到文件。

```
cat /pathway/to/your/file.txt % tr ' ' '\n' | sort | uniq -c | \
awk '{print $2"@"$1}' > myFile.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T13:24:40.083

只需使用[外壳重定向](http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-3.html)：

```
 echo "test" > overwrite-file.txt
 echo "test" >> append-to-file.txt 
```

### 提示

一个有用的命令是`tee`允许重定向到文件并仍然看到输出：

```
echo "test" | tee overwrite-file.txt
echo "test" | tee -a append-file.txt 
```

### 排序和语言环境

我看到您正在使用亚洲脚本，您需要小心系统使用的语言环境，因为结果排序可能不是您所期望的：

> *** 警告 ***环境指定的语言环境会影响排序顺序。设置 LC_ALL=C 以获得使用本机字节值的传统排序顺序。

并看看输出：

```
locale 
```

# bazaar - 如何将具有整个历史记录的项目迁移到另一个 bzr 存储库？

> ID：15598936
> 
> 赞同：0
> 
> 时间：2013-03-24T13:18:46.613
> 
> 标签：bazaar

我有旧集市仓库；现在我想将一些具有完整提交历史的项目从它迁移到新存储库中的特定节点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:31:59.433

好吧，只需**将每个项目签出推送到新的存储库**。

获取您的项目1（如果您已经有本地副本，则可选）

```
bzr branch bzr://Path/to/my/Project1 
```

然后将其推送到新的存储库。

```
bzr push bzr://Path/to/my/new/repository/particular/node/Project1 
```

您可以将项目导入您想要的存储库（或共享存储库）中。我认为这就是您所说的“节点”？推送参考帮助： [http ://doc.bazaar.canonical.com/bzr.2.5/en/user-reference/push-help.html](http://doc.bazaar.canonical.com/bzr.2.5/en/user-reference/push-help.html)

# c++ - 如何使用 std::is_integral<> 选择实现？

> ID：15598939
> 
> 赞同：15
> 
> 时间：2013-03-24T13:19:03.977
> 
> 标签：c++, templates, c++11, typetraits

我试图返回一个`int64_t`如果`std::is_integral<>::value`是真的。

否则，我想调用`to_int64t()`对象。

我在下面的尝试失败了，因为不允许函数模板的部分专业化。

**代码**

```
#include <type_traits>
#include <cstdint>

template<class T,bool is_integral_type>
int64_t to_int64t( const T& t )
{
        return t;
}

template<class T>
int64_t to_int64t<T,std::is_integral<T>::value>( const T& t )
{
        return t;
}

template<class T>
int64_t to_int64t<T,!std::is_integral<T>::value>( const T& t )
{
        return t.to_int64t();
}

int main()
{
        int64_t i = 64;
        auto x = to_int64t( i );
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-24T13:23:28.890

函数模板不能部分特化，一般来说，使用函数模板特化不是一个好主意。

实现您想要的一种方法是使用一种称为*标记调度*的技术，该技术基本上包括提供一个转发器函数，该函数根据额外虚拟参数的值选择正确的重载：

```
#include <type_traits>
#include <cstdint>

template<class T>
int64_t to_int64t( const T& t, std::true_type )
{
    return t;
}

template<class T>
int64_t to_int64t( const T& t, std::false_type )
{
    return t.to_int64t();
}

template<class T>
int64_t to_int64t( const T& t )
{
    return to_int64t(t, std::is_integral<T>());
}

int main()
{
    int64_t i = 64;
    auto x = to_int64t( i );
} 
```

另一种可能性是使用基于`std::enable_if`. 这就是它的样子（请注意，从 C++11 开始，函数模板上的默认模板参数是允许的）：

```
#include <type_traits>
#include <cstdint>

template<class T, typename std::enable_if<
    std::is_integral<T>::value>::type* = nullptr>
int64_t to_int64t( const T& t )
{
    return t;
}

template<class T, typename std::enable_if<
    !std::is_integral<T>::value>::type* = nullptr>
int64_t to_int64t( const T& t )
{
    return t.to_int64t();
}

int main()
{
    int64_t i = 64;
    auto x = to_int64t( i );
} 
```

另一种可能性，虽然更冗长，是在命名空间中定义帮助类模板（可以部分专门化）`detail`并提供全局转发器 - 我不会在这个用例中使用这种技术，但我展示它是因为它可能会出现在相关设计情况下得心应手：

```
#include <type_traits>
#include <cstdint>

namespace detail
{
    template<class T, bool = std::is_integral<T>::value>
    struct helper { };

    template<class T>
    struct helper<T, true>
    {
        static int64_t to_int64t( const T& t )
        {
            return t;
        }
    };

    template<class T>
    struct helper<T, false>
    {
        static int64_t to_int64t( const T& t )
        {
            return t.to_int64t();
        }
    };
}

template<class T>
int64_t to_int64t( const T& t )
{
    return detail::helper<T>::to_int64t(t);
}

int main()
{
    int64_t i = 64;
    auto x = to_int64t( i );
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-24T13:23:22.267

您可以使用`std::enable_if`：

```
template<class T, typename std::enable_if<std::is_integral<T>::value, int>::type = 0>
int64_t to_int64t( const T& t )
{
        return t;
}

template<class T, typename std::enable_if<!std::is_integral<T>::value, int>::type = 0>
int64_t to_int64t( const T& t )
{
        return t.to_int64t();
} 
```

# java - 创建以字符串命名的对象

> ID：15598941
> 
> 赞同：0
> 
> 时间：2013-03-24T13:19:10.117
> 
> 标签：java, string, object, named, createobject

是否可以创建一个可以创建名为的对象的方法`String`？

```
private static int a = 0;
public static void CreateNew() {
    Object ("number" + a) = new Object();
    a++;
} 
```

如果你知道，我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:11:33.053

在这种情况下使用 java.util.Map / HashMap 更有意义。

```
Map<String,String> strMap = new HashMap<String, String>();
strMap.put("number" + a, "value_for_this_string"); 
```

Java 是一种编译语言，而不是像脚本语言那样的解释语言，您可以在其中直接执行此类操作。

# c++ - 错误信息：分配大小无效

> ID：15598944
> 
> 赞同：-1
> 
> 时间：2013-03-24T13:19:18.877
> 
> 标签：c++, allocation

我有两节课：

```
class A {
   long int m_Code;
   char m_Name[NAME_LEN];
   bool vec[2]; 
};

class B {
   A* movie;
   char time[LEN_TIME]; 
};

class C {
  int theater_number; 
  B *b;
};

class D {
   C* vec;
 public:
  void allocate() { vec = new C[10]; } // create a vector: 10 elements of A
}; 
```

但我收到一条错误消息：分配大小无效：2425452 字节

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:27:10.173

^(***免责声明：涉及很多猜测***)

我相信原因是你没有正确定义

`NAME_LEN`

或者

`LEN_TIME`

或已将它们定义为具有太大的值。

# javascript - 使用 ASP.Net 按钮控件调用 javascript 函数

> ID：15598950
> 
> 赞同：0
> 
> 时间：2013-03-24T13:19:37.090
> 
> 标签：javascript, asp.net, google-maps

这是我的代码：

```
<script type="text/javascript">
            var geocoder;
            var map;
            var latlngstr;
            function initialize() {
                geocoder = new google.maps.Geocoder();
                var latlng = new google.maps.LatLng(-34.397, 150.644);
                var mapOptions = {
                    zoom: 15,
                    center: latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
            }

            function codeAddress() {
                var address = document.getElementById('address').value;

                geocoder.geocode({ 'address': address }, function (results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {

                        latlngstr = results[0].geometry.location;

                        map.setCenter(results[0].geometry.location);
                        var marker = new google.maps.Marker({
                            map: map,
                            position: results[0].geometry.location
                        });
                    } else {
                        alert('Geocode was not successful for the following reason: ' + status);
                    }
                });

                document.getElementById('lat').value = latlngstr.lat();
                document.getElementById('lng').value = latlngstr.lng();
            }
        </script>
      </head>
      <body onload="initialize()">
          <form  id="form1" runat="server">

        <div>
            <input id="address" type="text" value="sydney" />
            <input type="button" value="Geocode" onclick="codeAddress()">
            <input id="lat" type="text" />

            <input id="lng" type="text" />
        </div>

            <asp:Button ID="Button1" runat="server" 
                  Text="Button" EnableViewState="False" 
                  ViewStateMode="Disabled" OnClientClick="javascript:return codeAddress();"/>

          <div id="map-canvas"></div>
       </form>   
      </body>
    </html> 
```

我想调用函数`codeAddress`。当我使用 html 按钮调用此函数时，该按钮具有 value `Geocode`，它工作正常。但是，当我使用 ASP.Net 按钮调用该函数时，会执行“else”部分并且不会产生任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:15:55.990

我推断您想要做的是使用地理编码代码来获取纬度和经度，然后将其发回。

与其让一个按钮执行客户端代码并（同时）回发，我会保留 HTML 按钮，但在设置字段后从您的 JavaScript 代码开始表单发布：

```
 document.getElementById('lat').value = latlngstr.lat();
            document.getElementById('lng').value = latlngstr.lng();
            document.forms[0].submit(); 
```

# html - 如何使用 HTML5 和 CSS 验证表单

> ID：15598953
> 
> 赞同：0
> 
> 时间：2013-03-24T13:19:48.637
> 
> 标签：html, css

我编写了一个表单，可以将信息发布到另一个处理它的页面。我想问用户是否有未选择的选项。我的表格如下所示：

```
<form action="answers-of-brain-teaser-questions.php" method="post">
<div>
<div>Question 1</div>
<input name="q1" type="radio" value="1">A. 1
<br />
<input name="q1" type="radio" value="2">B. 4
<br />
<input name="q1" type="radio" value="3">C. 3
<br />
<input name="q1" type="radio" value="4">D. 2
</div>
<div>
<div id="question">Question 2</div>
<input name="q2" type="radio" value="5">A. 1
<br />
<input name="q2" type="radio" value="6">B. 2
<br />
<input name="q2" type="radio" value="7">C. 3
<br />
<input name="q2" type="radio" value="8">D. 4
</div>
</form> 
```

如果单击某些单选按钮，如何向用户显示消息。如果问题没有选择答案（没有选择单选按钮），我只想显示一条消息。例如，如果没有为问题 2 选择任何选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:25:09.197

***最简单的方法是使用名为required***的内置 HTML5 属性，它告诉用户他已经留下了一个字段（在我们的例子中是单选按钮）。
如何使用它的示例：

```
<!DOCTYPE HTML>
<html>
    <body>
        <form id="exampleForm" action="#" method="get">
            <input name="q1" type="radio" required="required" value="4">test<br />
            <input name="q1" type="radio" required="required" value="4">test<br />
            <input name="q1" type="radio" required="required" value="4">test<br />
            <input name="sform" type="submit">
        </form>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:35:09.623

如果您无法访问 JQuery 并且想要支持不支持的浏览器`required`，则可以使用以下内容：

```
var names = new Array("q1", "q2");
var notSelected = new Array();
var checked = "";
for(var i = 0; i < names.length; ++i) {
    var current = getElementsByName(names[i]);
    for(var j = 0; j < current.length; ++j) {
        if(current[j].checked) {
            checked = names[i];
        }
    }
    if(names[i] !== checked)
        notSelected.push(names[i]);
}
if(notSelected.length>0)
    alert("You have to select the following radiogroups: "+notSelected.join(", ")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T13:35:15.410

如果您想通过 jquery 验证它，它将像- //在脚本中添加 jquery-min.js

```
function validate(){
  if($("input[name=q2]:checked").length > 0) {
   //Is Valid
  }
}
<form action="answers-of-brain-teaser-questions.php" method="post" onsubmit="validate()">
<div>
<div>Question 1</div>
<input name="q1" type="radio" value="1">A. 1
<br />
<input name="q1" type="radio" value="2">B. 4
<br />
<input name="q1" type="radio" value="3">C. 3
<br />
<input name="q1" type="radio" value="4">D. 2
</div>
<div>
<div id="question">Question 2</div>
<input name="q2" type="radio" value="5">A. 1
<br />
<input name="q2" type="radio" value="6">B. 2
<br />
<input name="q2" type="radio" value="7">C. 3
<br />
<input name="q2" type="radio" value="8">D. 4
</div>
</form> 
```

如果您想在 php 页面中执行此操作，请通过以下方式进行检查-

```
if(!isset($_POST['q2'})){
//your msg to user
} 
```

# android - 如何以编程方式检查 android 设备上的 USB 主机支持？

> ID：15598957
> 
> 赞同：3
> 
> 时间：2013-03-24T13:20:13.873
> 
> 标签：android, usb, accessory, usb-otg

我知道从 Android 3.1 开始就支持它，我的意思是“如何检查硬件支持”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-11T10:51:11.803

请参阅：http: [//developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_USB_HOST](http://developer.android.com/reference/android/content/pm/PackageManager.html#FEATURE_USB_HOST)

```
 context.getPackageManager().hasSystemFeature(
                PackageManager.FEATURE_USB_HOST); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T05:51:18.513

我有同样的问题，经过一番谷歌搜索后，我发现了这个： [http ://android.serverbox.ch/?p=549](http://android.serverbox.ch/?p=549)

总之，您的应用程序需要使用 UsbManager 系统服务并通过连接的 USB 设备进行枚举。

```
mUsbManager = (UsbManager) mApplicationContext.getSystemService(Context.USB_SERVICE);
HashMap<String, UsbDevice> devlist = mUsbManager.getDeviceList();
Iterator<UsbDevice> deviter = devlist.values().iterator();
while (deviter.hasNext()) {
    UsbDevice d = deviter.next();
    if (mUsbManager.hasPermission(d)) {
        UsbInterface usbIf = mDevice.getInterface(1);
        for (int i = 0; i < usbIf.getEndpointCount(); i++) {
            if (usbIf.getEndpoint(i).getType() == UsbConstants.USB_ENDPOINT_XFER_BULK) {
                //...
            }
        }
    }
} 
```

# android - 将一项活动切换到另一项活动时更改菜单

> ID：15598961
> 
> 赞同：0
> 
> 时间：2013-03-24T13:20:21.263
> 
> 标签：android

我喜欢在活动更改时更改菜单。我有 MainActivity.java 和 activity_main.xml 菜单。然后我有 MyDetailFragment.java 和 detail_view_menu.xml。MainActivity 菜单在 MainActivity.java 的 onCreateOptionsMenu 中膨胀为

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    new MenuInflater(this).inflate(R.menu.activity_main, menu);
    return (super.onCreateOptionsMenu(menu));
} 
```

它工作正常。当点击其中一项并加载 MyDetailFragment.java 时，我喜欢显示 detail_view_menu.xml。我的实施方式是

```
public class MyDetailsFragment extends Fragment {

TrackerInfo trackerInfo;
public MyDetailsFragment() {    
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    // Inflate the layout for this fragment

    View view =  inflater.inflate(R.layout.my_details_fragment, container, false);  
    setHasOptionsMenu(true);
    TextView displayText = (TextView) view.findViewById(R.id.details); 
    displayText.setText(trackerInfo.getIdnumber());
    return view;
}

public void retrieveData(TrackerInfo tracker){
    trackerInfo = tracker;
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
   inflater.inflate(R.menu.detail_view_menu, menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
       case R.id.track:

            return (true);

       case R.id.view_history:
            return (true);

    }

    return (super.onOptionsItemSelected(item));}} 
```

但问题是菜单仍然是相同的activity_main 菜单并且从未改变过。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T14:57:33.510

**第一：**你应该有一个`onCreate()`高于你的方法，在`onCreateView()`那里你`set setHasOptionsMenu(true);`

**第二：**你需要`super.onCreateOptionsMenu(menu, inflater);`在你的充气机之后使用`onCreateOptionsMenu()`。

**第三：**您刚刚复制了您最初在**[此处](https://stackoverflow.com/questions/15594753/error-in-oncreateoptionsmenu-at-detail-activity)**发布的问题。请不要在未来这样做。我已经为您提供了有关该问题的更多详细信息，然后您打开了这个问题。下次只需编辑您的原始问题。否则，您可能只会破坏自己，并让那些试图帮助您的人感到恼火。

**这样做**：

```
public class MyDetailsFragment extends Fragment {

TrackerInfo trackerInfo;
public MyDetailsFragment() {    
}

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setHasOptionsMenu(true); // this should go here not in onCreateView();

        // ....
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
                         Bundle savedInstanceState) {
    // Inflate the layout for this fragment

    View view =  inflater.inflate(R.layout.my_details_fragment, container, false);  
    TextView displayText = (TextView) view.findViewById(R.id.details); 
    displayText.setText(trackerInfo.getIdnumber());
    return view;
}

public void retrieveData(TrackerInfo tracker){
    trackerInfo = tracker;
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
   inflater.inflate(R.menu.detail_view_menu, menu);
   super.onCreateOptionsMenu(menu, inflater); // you need to call super
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
       case R.id.track:

            return (true);

       case R.id.view_history:
            return (true);

    }

    return (super.onOptionsItemSelected(item));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T14:01:17.990

您需要超级调用相同的方法。

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
   inflater.inflate(R.menu.detail_view_menu, menu);
   super.onCreateOptionsMenu(menu, inflater);
} 
```

一旦我在新菜单项附加到菜单时遇到问题。所以我通过在添加新菜单项之前删除所有菜单项来解决它。像这样：

```
public static void emptyFragmentOptionsMenu(Menu menu){
        if(menu==null)return;
        for(int i=0; i < menu.size(); i++)
            menu.removeItem(menu.getItem(i).getItemId());
} 
```

干杯，

编辑：我如何使用该方法：

```
 @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
       emptyFragmentOptionsMenu(menu);
       inflater.inflate(R.menu.detail_view_menu, menu);
       super.onCreateOptionsMenu(menu, inflater);
    } 
```

# forms - 为什么我的表单不能在 Internet Explorer 9 中上传文件？

> ID：15598963
> 
> 赞同：19
> 
> 时间：2013-03-24T13:20:25.370
> 
> 标签：forms, internet-explorer, file-upload, cross-browser, internet-explorer-9

***欢迎收看“为什么 Internet Explorer 如此糟糕？”*的第 32,342,343 集。...**

我看到很多报告说 IE9 在上传文件方面做得很糟糕。显然，它有很多关于何时会或不会起作用的警告（如果有人有明确的清单，我很乐意看到它）。但是，我发现的大多数问题/解决方案都与 javascript 有关，通常是 jQuery 表单插件或类似的东西。

我的表单不是通过 AJAX 提交的，并且文件输入字段没有被 css 隐藏或遮挡。然而，我每天从 IE9 上尝试提交表单的用户那里收到几张支持票，但“什么也没发生”（=表单提交。没有错误，但文件没有上传。）我没有收到任何投诉不同的浏览器，甚至 IE8*似乎*也可以工作（和以往一样）。

这是我的表格的顶部。我错过了什么吗？

```
<form action="http://mysite.dev/account-settings/?open=resume" method="post" class="wpjb-form" enctype="multipart/form-data">    

        <input type="hidden" name="resume_form" value="resume_form" />
        <fieldset class="wpjb-fieldset-default">

            <input id="firstname" name="firstname" type="hidden" class="regular-text " value="John" />
            <input id="lastname" name="lastname" type="hidden" class="regular-text " value="Henry" />
            <input id="email" name="email" type="hidden" class="regular-text " value="john.henry@johnhenry.com" />

            <div class="wpjb-element-input-checkbox wpjb-element-name-is_active">
                <label class="wpjb-label">Show resume? </label>
                <div class="wpjb-field">
                    <label for="is_active_1"><input type="checkbox" class="" name="is_active" id="is_active_1" value="1" checked="checked" /> Yes <small style="display:inline;">(Uncheck to hide your resume)</small></label>

                </div>
            </div>
            <div class="wpjb-element-input-select-one wpjb-element-name-file">
                            <label class="wpjb-label">Upload a <i>new</i> resume file</label>
                <div class="wpjb-field">
                    <input style="line-height:1em;" id="file" name="file" type="file" class="regular-text " />
                    <small class="wpjb-hint">Accepted file types: doc, docx, odf, pdf, rtf</small>
                </div>
            </div>
        </fieldset>
        ... 
```

它像这样继续，还有几个`<fieldset>`s 然后像这样结束：

```
 ....
    <p class="submit">
        <input type="submit" name="Submit" id="wpjb_submit" value="Save Changes" />
    </p>
</form> 
```

**更新** 我为从未遇到过此问题的每个人感到高兴，但不仅仅是我： [http ://answers.microsoft.com/en-us/ie/forum/ie9-windows_vista/cannot-upload-files-using-internet -explorer-9/5724d921-ae71-e011-8dfc-68b599b31bf5](http://answers.microsoft.com/en-us/ie/forum/ie9-windows_vista/cannot-upload-files-using-internet-explorer-9/5724d921-ae71-e011-8dfc-68b599b31bf5)

**Update2** 我看到很多建议添加元标记以强制用户代理使用 IE8... `<meta http-equiv="X-UA-Compatible" content="IE=8" />` 我不想这样做，因为虽然我支持 IE8，但我网站上的许多元素在 IE8 中呈现不同与 IE9 相比。这将创建一个相当草率的用户体验，因为任何 IE 用户都会在该特定页面上临时“时间扭曲”回到 IE8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T23:51:04.657

我能够通过在 setTimeout 中包装 jQuery 表单提交来解决这个问题的噩梦：

```
$('#complete_profile input[type="submit"]').click(function(){
  setTimeout(function() {
    $('#complete_profile form').submit();
  }, 0);
}); 
```

但是，当表单确实提交时，这可能会导致重复提交，所以要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:12:21.327

我建议设置`X-UA-Compatible`元标记值并查看是否有任何区别。

请参阅此问题以获取可能的值：[<meta http-equiv="X-UA-Compatible" content="IE=edge"> 做什么？](https://stackoverflow.com/questions/6771258/whats-the-difference-if-meta-http-equiv-x-ua-compatible-content-ie-edge)

也可能是页面在IE9中触发了非标准模式。我建议在 IE9 中打开页面，打开开发者工具，然后查看选择了哪些浏览器/文档模式。这可能会给你一个线索。请注意，在 IE8 之前不支持“enctype”表单属性，因此如果浏览器使用的是较旧的 doc 模式，则无法识别该属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T23:50:09.487

好的，我宁愿发表评论而不是答案，但我还没有要点！

1.  用户是否处于怪癖模式？大多数 IE 用户不知道 quirks 模式，并且可能在尝试刷新页面时不小心点击了它（而不是按 F5）。如果它是间歇性的，这可能是原因。

2.  从上面继续.. 在服务器端，您如何检查空字段？我更多的是在这里你经常寻找“”的 JS 行，null 和 undefined 我只是在想，也许怪癖模式正在发送一些模糊数据，你的服务器端错误检查丢失了，因为你没有看对于它，因此报告一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T07:35:36.903

如果没有发送任何数据，您可以通过服务器端脚本上的隐藏输入来检查发布数据。例如，如果您使用的是 php，它将类似于

```
<? if($_POST['resume_form']=='resume_form'){
    //Do something
} ?> 
```

或者您也可以使用 IE 的元兼容标签来呈现页面，如 IE8

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T03:20:34.027

正如 Graham 所做的那样，我认为这可能更多是服务器问题 - 而且我从来没有遇到过 IE9（或更高版本）中的文件上传问题 - 我猜你不想发布处理上传的 PHP 脚本的代码？

# git - 管理针对给定解决方案版本推出错误修复的最佳方法是什么？

> ID：15598972
> 
> 赞同：1
> 
> 时间：2013-03-24T13:21:08.523
> 
> 标签：git, versioning

我正在尝试使用 Git 来管理产品的不同版本。我有几种方法可以做到这一点。我熟悉拥有“主”分支的概念，并沿着该主分支标记不同的点以构成解决方案的命名“版本”。例如，在某个时间点，我可能会决定当前构建代表我的产品的“RP_2012”构建。稍后，在添加更多功能后，可能会有“RP_2013”​​版本等。

我突然想到，即使开发可能在特定“版本”上完成，可能仍需要推出错误修复。例如，假设我在 Azure 中工作，每个客户都有自己的解决方案版本，而不是多租户安排（因为这样我就可以为他们提供更新版本的产品，如果他们想付费升级，并且他们可以继续使用他们熟悉的旧版本产品，直到他们准备好升级，而不是强加新功能）。我有一个使用 TeamCity、FluentMigrator 等组合的脚本，以便能够获取特定客户拥有的版本并随意升级它，同时保留他们现有的数据。所以，

如果我使用上面讨论的标记版本方法和单个“主”分支，那么推出这样的错误修复可能是不可能的。如果我改为为每个版本提供自己的分支，是否可以在派生自每个“版本”分支的祖先的单独分支中执行错误修复，然后将该分支合并为几个不同的、特定于版本的分支分支机构？或者是否有一些聪明的方法来使用 Rebase，这样如果我有一个会影响版本 10、11 和 12 的错误修复，比如说，那些“版本”只是沿着 master 分支标记的点，我可以从master 中标记为“版本 10”的点，并以某种方式将 master 重新设置为基于将在所述错误修复分支中完成的修复，从而确保版本 10 及更高版本都受益于给定分支地址的修复？与此同时，当然，任何新功能都将通过从 master 的 Head 中分支并合并回来完成。

我希望我的问题和潜在意图足够清楚。**本质上，我想知道是否最好将给定产品的不同版本保留在一个主分支中。并且，如果是这样，如何最好地实施能够在需要时/如果需要时滚动到每个版本中的错误修复。这可能涉及将单个分支合并为几个离散的后代分支。或者它可能涉及重新定位所有版本所在的单个分支。或者也许你们知道一些更聪明的方法。**

在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:48:31.237

我建议为此使用“git flow”。它是 git 的扩展，用于处理您所描述的用例，具有一个主分支和开发分支、单独的发布分支和单独的功能分支。有关所使用的分支模型的详细说明，请参阅[这篇](http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/)文章和[这篇博文。](http://nvie.com/posts/a-successful-git-branching-model/)

对于您所描述的目的，您应该非常小心地使用 rebase。Rebase 将*重写*版本历史，如果有来自具有“不同”版本历史的人的提交，这将变得非常混乱和困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:40:21.613

我不认为有一个客观的方法来定义什么是*最好*的。

就我个人而言，我总是使用 1-branch-per-release 模型。特别是如果您有多个客户。有时甚至客户也会要求自定义功能，因此您从他们的分支分支分支以进行次要版本，依此类推。

在您的情况下，假设您使用多分支模型，并且您有一个要应用于某些分支的错误修复，您可以[选择](https://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)该修复/提交到任何需要它的分支。

另外，检查[这个问题](https://stackoverflow.com/questions/7259135/git-commit-to-multiple-branches-at-the-same-time)，提问者提供了一个同时提交多个分支的脚本。使用cherry-pick来解决这个问题。

# sql - 带小数的 where 语句

> ID：15598975
> 
> 赞同：0
> 
> 时间：2013-03-24T13:21:21.560
> 
> 标签：sql

我正在创建一个小项目来管理资金。

我有一个过滤内容的选项`DataGrid`（值是数据库中的内容），过滤选项之一是按金额过滤，但我有一个问题。我如何使用中`decimal`的值进行搜索`SQL`？

我使用的一种`SQL query`是：

```
Select qtd As 'Monetary amount' 
From mm_registos 
Where qtd > 10 
```

但我想使用`decimal`以下值进行过滤：

```
Select qtd As 'Monetary amount' 
From mm_registos 
Where qtd > 10,8 
```

谁能告诉我正确的`query`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:28:33.867

您遇到的问题是由于小数分隔符。尝试使用`.`（即 write `Where qtd > 10.8`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:30:51.653

SQL 是针对句点十进制表示法量身定制的。

[十进制表示法](http://en.wikipedia.org/wiki/Decimal_mark)

# android - 无法在其他活动中访问我的共享偏好

> ID：15598977
> 
> 赞同：0
> 
> 时间：2013-03-24T13:21:30.133
> 
> 标签：android, sharedpreferences

在我的第一个活动中，我将我的共享偏好保存为

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_WORLD_READABLE);
settings.edit().putString("uname", username); 
```

然后我在另一个活动中阅读它

```
 SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_WORLD_READABLE);
  String uname = settings.getString("uname", ""); 
```

但是 uname 字符串总是空的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:22:44.927

你忘了做 .commit

[http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#commit%28%29](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#commit%28%29)

```
settings.edit().putString("uname", username).commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:29:11.087

所以你的问题很明显。看这个

```
settings.edit().putString("uname", username); 
```

在这里您尝试通过保存`String`，`SharedPreferences.Editor`但如果 String 可以永久保存到 SharedPreferences 中，您还需要调用**commit()**，这意味着您要确认您的操作。在其他情况下，您的价值永远不会被保存。

你可以把它想象成一个“交易”。如果您不提交事务，则在其中执行的任何更改都将被丢弃。

所以，正确的方法是

```
settings.edit().putString("uname", username).commit(); 
```

# python - 与长时间运行的 python 进程交互

> ID：15598980
> 
> 赞同：3
> 
> 时间：2013-03-24T13:21:44.637
> 
> 标签：python, background-process, raspberry-pi

我有一个长时间运行的 python 进程在树莓派（控制花园）上无头运行，如下所示：

```
from time import sleep

def run_garden():
    while 1:
        /* do work */
        sleep(60)

if __name__ == "__main__":
    run_garden() 
```

60 秒的睡眠时间足以让我的花园发生任何变化（湿度、空气温度、打开泵、关闭风扇等），但是如果我想手动覆盖这些东西怎么办？

目前，在我的`/* do work */`循环中，我首先调用另一台保存配置变量的服务器，我可以通过 Web 控制台更新这些配置变量，但它缺乏任何实时感，因为它依赖于 60 秒循环（例如，您可能会更新 Web 控制台，然后等待 45 秒以使所需的效果生效）

树莓派运行`run_garden()`专用于花园，它基本上是唯一占用资源的东西。所以我知道我有空间做某事，我只是不知道是什么。

一旦循环发现配置变量已更新的事实，循环就可以进行指数退避以继续检查交互，而不是等待 60 秒，但感觉并没有好很多。

有没有更好的方法可以基本上进入这个长期运行的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:25:49.493

为什么不使用基于事件的循环而不是休眠一段时间。

这样，您的循环将仅在检测到更改时运行，并且始终在检测到更改时运行（这是您问题的重点？）。

你可以通过使用来做这样的事情：
[python 事件对象](http://docs.python.org/2/library/threading.html#event-objects)

只需等待一个或所有事件对象被触发并运行循环。您也可以等待 X 事件完成，等等，这取决于您是否期望一个变量会更新很多。

甚至像这样的系统： [广播事件](https://stackoverflow.com/questions/1092531/event-system-in-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:34:57.187

监听主循环中的套接字。在套接字读取调用上使用超时（例如 60 秒，应该执行下一次花园更新的时间），以便在没有命令进入时至少每分钟恢复正常功能。

如果您需要花园式更新的*速度不快*于每分钟，您需要检查自上次更新以来的时间，因为当有命令进入时，读取调用将大大加快*完成*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T13:44:41.590

Python 的[`select`](http://docs.python.org/2/library/select.html)模块听起来可能会有所帮助。

如果您曾经使用过 unix 模拟（例如可能在套接字编程中？），那么它会很熟悉。

如果没有，[这里是`select`我经常推荐的 C 套接字参考部分](http://www.beej.us/guide/bgnet/output/html/multipage/selectman.html)。这[是一个看起来不错的模块文章](http://pymotw.com/2/select/)。

警告：第一个参考资料专门针对 C，而不是 Python，但`select`系统调用的概念是相同的，因此讨论可能会有所帮助。

基本上，它允许你告诉它你感兴趣的事件（例如，套接字数据到达、键盘事件），它会永远阻塞，或者直到你指定的超时时间过去。

如果您使用的是套接字，那么将套接字和标准输入添加到您感兴趣的事件列表中很容易。如果您只是在寻找一种“有条件地睡眠”60 秒的方法，除非/直到检测到按键，那么这也可以。

**编辑**：

解决此问题的另一种方法是让您的 raspberry-pi 在运行 Web 控制台的服务器上“注册”。这可能涉及一些额外的工作，但它会给你你正在寻找的实时效果。

基本上，树莓派通过向服务器发出警报来“注册”自己，然后服务器存储设备的地址。如果使用 TCP，您可以保持连接打开（如果您有防火墙要处理，这可能很重要）。如果使用UDP，可以在注册前绑定设备上的端口，让服务器响应“公告”的源地址。

一旦宣布，当配置。服务器上的选项发生变化，通常会发生以下两种情况之一：

A）您向设备发送一个微小的“ping”（一般意义上，不是 ICMP 主机检测协议），提醒它配置选项已更改。此时主机将立即请求完整配置。设置，获取更新。

B）您发送更新的配置。选项（或者可能是整个配置集）返回到设备。这会减少设备和服务器之间的消息数量，但可能需要更多的工作，因为这似乎与您当前的设置有更大的偏差。

# highcharts - 升级到 v3.0 - 发现更多问题

> ID：15598984
> 
> 赞同：0
> 
> 时间：2013-03-24T13:22:17.200
> 
> 标签：highcharts, zooming

我已经从 Highcharts 2.3.5 更新到 Highcharts 3.0 并且发现了一些问题：

1) 在图表的左侧/右侧放大时 - 它有时会显示 xAxis 比例偏移 -2、-1 或 10、11

见附图：

![在此处输入图像描述](../Images/cc63adbc8b10654010dd1caf86928f0a.png)

# .net - 保持后台任务在云服务应用程序域内运行的最佳实践是什么？

> ID：15598986
> 
> 赞同：1
> 
> 时间：2013-03-24T13:22:24.010
> 
> 标签：.net, asp.net-mvc-3, azure, signalr

我运行 Windows Azure 云服务。我需要一个在我的云服务应用程序域中不断运行的后台任务，因此不能选择外部工作者角色。这是因为我需要通知 JavaScript 客户端某些事件，而我只能在我的 AppDomain 中执行此操作。我需要确保此任务**始终**在运行，否则我的服务将无法正常工作。

到目前为止，我的想法是在应用程序启动中创建一个线程并让它永远运行，但我不知道这是否是更好的想法。

有什么建议吗？

**编辑**

我不能使用 Worker Roles 的原因是我需要与云服务在同一个应用程序域中，这样我才能通过[SignalR](http://signalr.net/)连接通知客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:54:46.367

在托管 SignalR 的同一个 asp.net Web 应用程序中，设置 wcf (svc) 服务或 asmx Web 服务并从“h24 服务”调用它。现在您可以在 Worker Role 或 Windows 服务（在 Windows 虚拟机中）中托管您的 h24 服务。
PS：请记住保护您的 svc 或 asmx 免受来自互联网的有害呼叫；）

# android - Android：从意图活动返回主活动后执行方法

> ID：15598991
> 
> 赞同：1
> 
> 时间：2013-03-24T13:23:03.057
> 
> 标签：android, android-intent, android-activity

我见过很多例子

```
startActivityForResult(Intent, int) 
```

然后使用

```
onActivityResult(int, int, Intent) 
```

但对我来说，我不需要传递任何东西，我只想启动活动（意图），当意图活动返回时，在主要活动中调用一个方法。有任何关于这样做的教程吗？

编辑：这里有一个示例代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_options);

    createEvent = (Button) findViewById(R.id.createEvent);
    createEvent.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent intent = new Intent(optionsInterface.this, MainActivity.class);
            startActivity(intent);
        }
    });
} 
```

在这里，在我从 MainActivity 返回后（按回，或者只是关闭它），我希望该活动执行一项任务（没有从 MainActivity 传递数据）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:57:21.777

您可以使用 startactivityforResult() .. 是否发回任何数据都没有关系...当您使用 startactivityonResult() 时，将调用 onActivityResult 方法...只需检查那里的请求代码并执行任何操作想要......寄回一些东西是没有必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T13:52:24.180

而不是`startActivity()`您可能想要使用[`startActivityForResult()`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)，以便您获得对结果的回调。

# c++ - 可以使用 SIMD 优化两个字符串之间的计数字节匹配吗？

> ID：15598997
> 
> 赞同：8
> 
> 时间：2013-03-24T13:23:52.637
> 
> 标签：c++, optimization, x86-64, sse, simd

分析表明，这里的这个函数是我的应用程序的真正瓶颈：

```
static inline int countEqualChars(const char* string1, const char* string2, int size) {
    int r = 0;
    for (int j = 0; j < size; ++j) {
        if (string1[j] == string2[j]) {
            ++r;
        }
    }

    return r;
} 
```

即使使用`-O3`and `-march=native`，G++ 4.7.2 也不会向量化这个函数（我检查了汇编程序的输出）。现在，我*不是*SSE 和朋友的专家，但我认为一次比较多个字符应该更快。关于如何加快速度的任何想法？目标架构是 x86-64。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T13:34:44.373

当然可以。

`pcmpeqb`比较两个 16 字节的向量，并生成一个向量，它们不同的地方为零，匹配的地方为 -1。使用它一次比较 16 个字节，将结果添加到累加器向量中（确保最多累加 255 个向量比较的结果以避免溢出）。完成后，累加器中有 16 个结果。对它们求和并取反以获得相等元素的数量。

如果长度很短，则很难从这种方法中获得显着的加速。如果长度很长，那将是值得追求的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-24T14:04:40.077

**向量化的编译器标志：**

`-ftree-vectorize`

`-ftree-vectorize -march=<your_architecture>`（使用计算机上所有可用的指令集扩展，而不仅仅是用于 x86-64 的 SSE2 之类的基线）。用于`-march=native`针对运行编译器的机器进行优化。） `-march=<foo>`也设置`-mtune=<foo>`，这也是一件好事。

**使用 SSEx 内在函数：**

*   将缓冲区填充并对齐到 16 个字节（根据您实际要使用的向量大小）

*   `countU8`使用[_mm_set1_epi8](http://msdn.microsoft.com/en-US/library/6e14xhyf%28v=vs.80%29.aspx) (0)创建累加器

*   对于所有 n/16 输入（子）向量，请执行以下操作：

    *   [使用_mm_load_si128](http://msdn.microsoft.com/en-US/library/x7s4chk3%28v=vs.80%29.aspx)或[_mm_loadu_si128](http://msdn.microsoft.com/en-US/library/x7s4chk3%28v=vs.80%29.aspx)从两个字符串中加载 16 个字符（用于未对齐的加载）

    *   [_mm_cmpeq_epi8](http://msdn.microsoft.com/en-us/library/5yc9bc1f%28v=vs.71%29.aspx#vcref_mm_cmpeq_epi8) 并行比较八位位组。否则，每次匹配都会产生`0xFF`(-1) 。`0x00`

    *   `countU8`使用[_mm_sub_epi8](http://msdn.microsoft.com/en-us/library/tb4wh6zw%28v=VS.90%29.aspx)减去上述结果向量（减 -1 -> +1）

    *   总是在 255 个周期之后，必须将 16 个 8 位计数器提取为更大的整数类型以防止溢出。有关如何做到这一点，请参阅这个不错的答案中的解包和水平添加：[https ://stackoverflow.com/a/10930706/1175253](https://stackoverflow.com/a/10930706/1175253)

代码：

```
#include <iostream>
#include <vector>

#include <cassert>
#include <cstdint>
#include <climits>
#include <cstring>

#include <emmintrin.h>

#ifdef __SSE2__

#if !defined(UINTPTR_MAX) ||  !defined(UINT64_MAX) ||  !defined(UINT32_MAX)
#  error "Limit macros are not defined"
#endif

#if UINTPTR_MAX == UINT64_MAX
    #define PTR_64
#elif UINTPTR_MAX == UINT32_MAX
    #define PTR_32
#else
#  error "Current UINTPTR_MAX is not supported"
#endif

template<typename T>
void print_vector(std::ostream& out,const __m128i& vec)
{
    static_assert(sizeof(vec) % sizeof(T) == 0,"Invalid element size");
    std::cout << '{';
    const T* const end   = reinterpret_cast<const T*>(&vec)-1;
    const T* const upper = end+(sizeof(vec)/sizeof(T));
    for(const T* elem = upper;
        elem != end;
        --elem
    )
    {
        if(elem != upper)
            std::cout << ',';
        std::cout << +(*elem);
    }
    std::cout << '}' << std::endl;
}

#define PRINT_VECTOR(_TYPE,_VEC) do{  std::cout << #_VEC << " : "; print_vector<_TYPE>(std::cout,_VEC);    } while(0)

///@note SSE2 required (macro: __SSE2__)
///@warning Not tested!
size_t counteq_epi8(const __m128i* a_in,const __m128i* b_in,size_t count)
{
    assert(a_in != nullptr && (uintptr_t(a_in) % 16) == 0);
    assert(b_in != nullptr && (uintptr_t(b_in) % 16) == 0);
    //assert(count > 0);

/*
    //maybe not so good with all that branching and additional loop variables

    __m128i accumulatorU8 = _mm_set1_epi8(0);
    __m128i sum2xU64 = _mm_set1_epi8(0);
    for(size_t i = 0;i < count;++i)
    {

        //this operation could also be unrolled, where multiple result registers would be accumulated
        accumulatorU8 = _mm_sub_epi8(accumulatorU8,_mm_cmpeq_epi8(*a_in++,*b_in++));
        if(i % 255 == 0)
        {
            //before overflow of uint8, the counter will be extracted
            __m128i sum2xU16 = _mm_sad_epu8(accumulatorU8,_mm_set1_epi8(0));
            sum2xU64 = _mm_add_epi64(sum2xU64,sum2xU16);

            //reset accumulatorU8
            accumulatorU8 = _mm_set1_epi8(0);
        }
    }

    //blindly accumulate remaining values
    __m128i sum2xU16 = _mm_sad_epu8(accumulatorU8,_mm_set1_epi8(0));
    sum2xU64 = _mm_add_epi64(sum2xU64,sum2xU16);

    //do a horizontal addition of the two counter values
    sum2xU64 = _mm_add_epi64(sum2xU64,_mm_srli_si128(sum2xU64,64/8));

#if defined PTR_64
    return _mm_cvtsi128_si64(sum2xU64);
#elif defined PTR_32
    return _mm_cvtsi128_si32(sum2xU64);
#else
#  error "macro PTR_(32|64) is not set"
#endif

*/

    __m128i sum2xU64 = _mm_set1_epi32(0);
    while(count--)
    {
        __m128i matches     = _mm_sub_epi8(_mm_set1_epi32(0),_mm_cmpeq_epi8(*a_in++,*b_in++));
        __m128i sum2xU16    = _mm_sad_epu8(matches,_mm_set1_epi32(0));
                sum2xU64    = _mm_add_epi64(sum2xU64,sum2xU16);
#ifndef NDEBUG
        PRINT_VECTOR(uint16_t,sum2xU64);
#endif
    }

    //do a horizontal addition of the two counter values
    sum2xU64 = _mm_add_epi64(sum2xU64,_mm_srli_si128(sum2xU64,64/8));
#ifndef NDEBUG
    std::cout << "----------------------------------------" << std::endl;
    PRINT_VECTOR(uint16_t,sum2xU64);
#endif

#if !defined(UINTPTR_MAX) ||  !defined(UINT64_MAX) ||  !defined(UINT32_MAX)
#  error "Limit macros are not defined"
#endif

#if defined PTR_64
    return _mm_cvtsi128_si64(sum2xU64);
#elif defined PTR_32
    return _mm_cvtsi128_si32(sum2xU64);
#else
#  error "macro PTR_(32|64) is not set"
#endif

}

#endif

int main(int argc, char* argv[])
{

    std::vector<__m128i> a(64); // * 16 bytes
    std::vector<__m128i> b(a.size());
    const size_t nBytes = a.size() * sizeof(std::vector<__m128i>::value_type);

    char* const a_out = reinterpret_cast<char*>(a.data());
    char* const b_out = reinterpret_cast<char*>(b.data());

    memset(a_out,0,nBytes);
    memset(b_out,0,nBytes);

    a_out[1023] = 1;
    b_out[1023] = 1;

    size_t equalBytes = counteq_epi8(a.data(),b.data(),a.size());

    std::cout << "equalBytes = " << equalBytes << std::endl;

    return 0;
} 
```

* * *

我为大型和小型阵列获得的最快的 SSE 实现：

```
size_t counteq_epi8(const __m128i* a_in,const __m128i* b_in,size_t count)
{
    assert((count > 0 ? a_in != nullptr : true) && (uintptr_t(a_in) % sizeof(__m128i)) == 0);
    assert((count > 0 ? b_in != nullptr : true) && (uintptr_t(b_in) % sizeof(__m128i)) == 0);
    //assert(count > 0);

    const size_t maxInnerLoops    = 255;
    const size_t nNestedLoops     = count / maxInnerLoops;
    const size_t nRemainderLoops  = count % maxInnerLoops;

    const __m128i zero  = _mm_setzero_si128();
    __m128i sum16xU8    = zero;
    __m128i sum2xU64    = zero;

    for(size_t i = 0;i < nNestedLoops;++i)
    {
        for(size_t j = 0;j < maxInnerLoops;++j)
        {
            sum16xU8 = _mm_sub_epi8(sum16xU8,_mm_cmpeq_epi8(*a_in++,*b_in++));
        }
        sum2xU64 = _mm_add_epi64(sum2xU64,_mm_sad_epu8(sum16xU8,zero));
        sum16xU8 = zero;
    }

    for(size_t j = 0;j < nRemainderLoops;++j)
    {
        sum16xU8 = _mm_sub_epi8(sum16xU8,_mm_cmpeq_epi8(*a_in++,*b_in++));
    }
    sum2xU64 = _mm_add_epi64(sum2xU64,_mm_sad_epu8(sum16xU8,zero));

    sum2xU64 = _mm_add_epi64(sum2xU64,_mm_srli_si128(sum2xU64,64/8));

#if UINTPTR_MAX == UINT64_MAX
    return _mm_cvtsi128_si64(sum2xU64);
#elif UINTPTR_MAX == UINT32_MAX
    return _mm_cvtsi128_si32(sum2xU64);
#else
#  error "macro PTR_(32|64) is not set"
#endif
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T13:52:52.250

当前 gcc 中的自动矢量化是帮助编译器理解对代码进行矢量化很容易的问题。在您的情况下：如果您删除条件并以更命令的方式重写代码，它将理解矢量化请求：

```
 static inline int count(const char* string1, const char* string2, int size) {
            int r = 0;
            bool b;

            for (int j = 0; j < size; ++j) {
                    b = (string1[j] == string2[j]);
                    r += b;
            }

            return r;
    } 
```

在这种情况下：

```
movdqa  16(%rsp), %xmm1
movl    $.LC2, %esi
pxor    %xmm2, %xmm2
movzbl  416(%rsp), %edx
movdqa  .LC1(%rip), %xmm3
pcmpeqb 224(%rsp), %xmm1
cmpb    %dl, 208(%rsp)
movzbl  417(%rsp), %eax
movl    $1, %edi
pand    %xmm3, %xmm1
movdqa  %xmm1, %xmm5
sete    %dl
movdqa  %xmm1, %xmm4
movzbl  %dl, %edx
punpcklbw   %xmm2, %xmm5
punpckhbw   %xmm2, %xmm4
pxor    %xmm1, %xmm1
movdqa  %xmm5, %xmm6
movdqa  %xmm5, %xmm0
movdqa  %xmm4, %xmm5
punpcklwd   %xmm1, %xmm6 
```

（ETC。）