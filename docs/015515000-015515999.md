# StackOverflow 问答 15515000-15515999

# iphone - ARC 中 @property 声明的默认选项是什么？

> ID：15515004
> 
> 赞同：0
> 
> 时间：2013-03-20T03:57:06.843
> 
> 标签：iphone, objective-c, properties, automatic-ref-counting

如果我的 .h 文件中有以下内容：

```
@property UIButton *connect; 
```

这是否与以下内容相同：

```
@property(atomic, strong) UIButton *connect; 
```

例如，@property 声明中的默认“参数”是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:02:16.057

根据文档，属性默认为`atomic`and `strong`。

[属性默认是原子的](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW37)

[使用强声明和弱声明来管理所有权](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW30)- 请参阅下一句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T04:04:42.730

**strong**和**atomic**是属性声明中的默认选项，请参阅此链接：[link](http://openradar.appspot.com/11071507)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T04:07:55.797

是的。`atomic`并且`strong`是默认属性。尽管它花费的时间比我想象的要长，但它似乎在文档中散布开来：

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T04:08:50.003

默认情况下，属性是原子的，如此[处](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW37)所述，并且如此处所提到的那样强大[（](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW22)参见上面的“避免强引用循环”）

# sql - SQL Server 如何找到从每个商店购买产品的客户？

> ID：15515007
> 
> 赞同：1
> 
> 时间：2013-03-20T03:57:13.470
> 
> 标签：sql, sql-server

我正在尝试编写一个查询，该查询将列出从德克萨斯州的每一家商店购买商品的所有客户。

所以这里有4个表及其属性：

```
Customers:
customerID, CustomerName 

Purchases:
CustomerID, ProductID 

StoresInventory:
StoreID, ProductID

StoreLocation:
StoreID, State 
```

我可以查询返回德克萨斯州的所有商店，但我不确定如何检查客户是否从所有这些商店购买了产品。另外，我不能使用`count`or `aggregation`。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:45:55.020

尝试这样的事情：

```
Select c.CustomerId From Customers c
Inner Join Purchases p on C.CustomerId=p.CustomerId
Inner Join StoresInventory s on s.ProductID=p.ProductID
Group By c.CustomerId
Having COUNT(Distinct s.StoreId)=(Select Count(Distinct StoreId) From StoreLocation Where State='Texas') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:36:00.923

除非 ProductID 对商店来说是唯一的；您想要的数据未存储在架构中。您知道哪些客户购买了哪些产品以及哪些商店存储了这些产品，但您没有存储客户从哪个商店购买了产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-26T06:30:49.080

```
SELECT a.customerid
FROM purchases a
JOIN store_inventory b
    ON a.productid=b.productid
GROUP BY  a.customerid
HAVING count(distinct storeid)= 
    (SELECT count(*)
    FROM store_location s); 
```

# sql-server-2008-r2 - 将进度数据库与 SQL Server 同步

> ID：15515008
> 
> 赞同：0
> 
> 时间：2013-03-20T03:57:16.883
> 
> 标签：sql-server-2008-r2, data-synchronization, progress-db

我有一个 Progress Database OpenEdge 10.2A，我们有 SQL Server 2008R2。现在我的要求是寻找一个可以在这两个数据库之间进行数据库同步的工具（上面提到过）。

所需的主要功能是：

1.  数据同步应该是双向的。
2.  如果一个系统宕机，那么它应该有能力存储更新的数据，可能是消息队列或其他形式，然后在它启动时发送到目的地。
3.  当对源系统进行任何 DML 或 DDL 更改时，工具应该能够从源中获取更改。
4.  它应该具有计划数据同步的能力，即数据同步应该发生的每个计划时间。

你能告诉我市场上有什么方法或任何工具可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:52:16.970

Bravepoint 有一个“复制到 SQL”产品。我没有这方面的经验。

[http://www.bravepoint.com/products-pro2-replication-suite.shtml](http://www.bravepoint.com/products-pro2-replication-suite.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:29:56.407

进步具有复制作为附加功能。但是，如果这可以处理 MsSql 的进度，我不确定。

这是**Progress 10.2B**文档的链接，您可以在其中阅读有关复制的信息：http: [//communities.progress.com/pcom/docs/DOC-103525](http://communities.progress.com/pcom/docs/DOC-103525)

10.2A 实际上已经过时了（2008 年发布）。当前版本是 11.2。无论如何，我认为您最好联系当地的 Progress 办公室并询问他们是否有任何解决方案。[http://www.progress.com](http://www.progress.com)

至于第三方解决方案，我不知道！

# ruby-on-rails - 运行 Rails 4 和 Ruby 2.0.0 的 Heroku 上的 Bundler 错误

> ID：15515013
> 
> 赞同：1
> 
> 时间：2013-03-20T03:57:53.347
> 
> 标签：ruby-on-rails, heroku, bundler, ruby-on-rails-4, ruby-2.0

尝试使用 Heroku Cedar 在 Ruby 2.0.0 上部署一个非常基本的 Rails 4.0.0 beta 1 应用程序。当我尝试推送到 Heroku 时，出现以下捆绑程序错误：

```
bin/bundle: 1: Syntax error: "(" unexpected
Failed to install gems via Bundler. 
```

Gemfile如下：

```
source 'https://rubygems.org'
ruby '2.0.0'

gem 'rails', '4.0.0.beta1'
gem 'jquery-rails', '~> 2.2.1'
gem 'jbuilder', '~> 1.0.1'
gem 'angularjs-rails', '~> 1.0.5'
gem 'lodash-rails'

group :assets do
  gem 'sass-rails', '~> 4.0.0.beta1'
  gem 'coffee-rails', '~> 4.0.0.beta1'
  gem 'uglifier', '>= 1.0.3'
end

group :test do
  gem 'factory_girl_rails', '~> 4.2.1'
end

group :test, :development do
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end 
```

`bundle install`当我使用 bundler 1.3.4 在本地运行它时，我没有收到任何 bundler 错误

有人对 Heroku Cedar 上的 Edge Rails 有任何想法或经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:24:29.203

[使用这个 gist 在 heroku 上安装 rails 4 应用程序。](https://gist.github.com/peter/3025502)

我无法使用 ruby​​ 2.0 在 heroku 上运行它。使用上述要点是我的做法，直到有明确的方法可以顺利升级到 ruby​​ 2.0。

[这是我遇到问题时的问题。](https://stackoverflow.com/questions/15278099/issue-running-a-rails-4-app-on-heroku)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T01:10:59.747

问题实际上是 bin 目录中的“bundle”可执行文件，只要我删除“bin/bundler”，它就可以正常部署。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T23:19:30.517

您需要在`ruby "2.0.0"`Gemfile 的开头添加一行。

有关更多信息，请访问[heroku 文档](https://blog.heroku.com/archives/2012/11/5/ruby-2-preview-on-heroku)。

# python - 使用 ARMA 的统计模型

> ID：15515019
> 
> 赞同：6
> 
> 时间：2013-03-20T03:58:19.190
> 
> 标签：python, pandas, statsmodels

这里有点新，但试图让一个 statsmodel ARMA 预测工具工作。我从雅虎导入了一些股票数据，并得到了 ARMA 来给我合适的参数。但是，当我使用预测代码时，我收到的只是一个我似乎无法弄清楚的错误列表。不太确定我在这里做错了什么：

```
import pandas
import statsmodels.tsa.api as tsa
from pandas.io.data import DataReader

start = pandas.datetime(2013,1,1)
end = pandas.datetime.today()

data = DataReader('GOOG','yahoo')
arma =tsa.ARMA(data['Close'], order =(2,2))
results= arma.fit()
results.predict(start=start,end=end) 
```

错误是：

```
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
C:\Windows\system32\<ipython-input-84-25a9b6bc631d> in <module>()
     13 results= arma.fit()
     14 results.summary()
---> 15 results.predict(start=start,end=end)

D:\Python27\lib\site-packages\statsmodels-0.5.0-py2.7.egg\statsmodels\base\wrapp
er.pyc in wrapper(self, *args, **kwargs)
     88         results = object.__getattribute__(self, '_results')
     89         data = results.model.data
---> 90         return data.wrap_output(func(results, *args, **kwargs), how)
     91
     92     argspec = inspect.getargspec(func)

D:\Python27\lib\site-packages\statsmodels-0.5.0-py2.7.egg\statsmodels\tsa\arima_
model.pyc in predict(self, start, end, exog, dynamic)
   1265
   1266         """
-> 1267         return self.model.predict(self.params, start, end, exog, dynamic
)
   1268
   1269     def forecast(self, steps=1, exog=None, alpha=.05):

D:\Python27\lib\site-packages\statsmodels-0.5.0-py2.7.egg\statsmodels\tsa\arima_
model.pyc in predict(self, params, start, end, exog, dynamic)
    497
    498         # will return an index of a date

--> 499         start = self._get_predict_start(start, dynamic)
    500         end, out_of_sample = self._get_predict_end(end, dynamic)
    501         if out_of_sample and (exog is None and self.k_exog > 0):

D:\Python27\lib\site-packages\statsmodels-0.5.0-py2.7.egg\statsmodels\tsa\arima_
model.pyc in _get_predict_start(self, start, dynamic)
    404             #elif 'mle' not in method or dynamic: # should be on a date

    405             start = _validate(start, k_ar, k_diff, self.data.dates,
--> 406                               method)
    407             start = super(ARMA, self)._get_predict_start(start)
    408         _check_arima_start(start, k_ar, k_diff, method, dynamic)

D:\Python27\lib\site-packages\statsmodels-0.5.0-py2.7.egg\statsmodels\tsa\arima_
model.pyc in _validate(start, k_ar, k_diff, dates, method)
    160     if isinstance(start, (basestring, datetime)):
    161         start_date = start
--> 162         start = _index_date(start, dates)
    163         start -= k_diff
    164     if 'mle' not in method and start < k_ar - k_diff:

D:\Python27\lib\site-packages\statsmodels-0.5.0-py2.7.egg\statsmodels\tsa\base\d
atetools.pyc in _index_date(date, dates)
     37         freq = _infer_freq(dates)
     38         # we can start prediction at the end of endog

---> 39         if _idx_from_dates(dates[-1], date, freq) == 1:
     40             return len(dates)
     41

D:\Python27\lib\site-packages\statsmodels-0.5.0-py2.7.egg\statsmodels\tsa\base\d
atetools.pyc in _idx_from_dates(d1, d2, freq)
     70         from pandas import DatetimeIndex
     71         return len(DatetimeIndex(start=d1, end=d2,
---> 72                                  freq = _freq_to_pandas[freq])) - 1
     73     except ImportError, err:
     74         from pandas import DateRange

D:\Python27\lib\site-packages\statsmodels-0.5.0-py2.7.egg\statsmodels\tsa\base\d
atetools.pyc in __getitem__(self, key)
     11         # being lazy, don't want to replace dictionary below

     12         def __getitem__(self, key):
---> 13             return get_offset(key)
     14     _freq_to_pandas = _freq_to_pandas_class()
     15 except ImportError, err:

D:\Python27\lib\site-packages\pandas\tseries\frequencies.pyc in get_offset(name)

    484     """
    485     if name not in _dont_uppercase:
--> 486         name = name.upper()
    487
    488         if name in _rule_aliases:

AttributeError: 'NoneType' object has no attribute 'upper' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T05:04:43.773

对我来说似乎是一个错误。我会调查的。

[https://github.com/statsmodels/statsmodels/issues/712](https://github.com/statsmodels/statsmodels/issues/712)

**编辑**：作为一种解决方法，您可以从 DataFrame 中删除 DatetimeIndex 并将其传递给 numpy 数组。它使预测在日期方面有点棘手，但是在没有频率的情况下使用日期进行预测已经非常棘手，因此仅具有开始日期和结束日期本质上是没有意义的。

```
import pandas
import statsmodels.tsa.api as tsa
from pandas.io.data import DataReader
import pandas

data = DataReader('GOOG','yahoo')
dates = data.index

# start at a date on the index
start = dates.get_loc(pandas.datetools.parse("1-2-2013"))
end = start + 30 # "steps"

# NOTE THE .values
arma =tsa.ARMA(data['Close'].values, order =(2,2))
results= arma.fit()
results.predict(start, end) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-16T18:19:20.640

当我运行您的代码时，我得到：

“ValueError：这些日期没有频率，并且日期 2013-01-01 00:00:00 不在日期索引中。尝试给出日期索引中的日期或使用整数”

由于交易日期的发生频率不均（节假日和周末），因此模型不够聪明，无法知道正确的计算频率。

如果你用它们在索引中的整数位置替换日期，那么你就会得到你的预测。然后，您可以简单地将原始索引放回结果中。

```
prediction = results.predict(start=0, end=len(data) - 1)
prediction.index = data.index
print(prediction)

2010-01-04    689.507451
2010-01-05    627.085986
2010-01-06    624.256331
2010-01-07    608.133481
...
2017-05-09    933.700555
2017-05-10    931.290023
2017-05-11    927.781427
2017-05-12    929.661014 
```

顺便说一句，您可能希望在每日收益而不是原始价格上运行这样的模型。以原始价格运行它不会像你想象的那样捕捉动力和均值回归。您的模型是根据价格的绝对值构建的，而不是基于价格、动量、移动平均线等您可能想要使用的其他因素的变化。您创建的预测看起来会非常好，因为它们只是提前一步预测，所以它没有捕捉到复合误差。这让很多人感到困惑。相对于股票价格的绝对值，误差看起来很小，但该模型的预测性并不强。

我建议您先阅读此演练：

[http://www.johnwittenauer.net/a-simple-time-series-analysis-of-the-sp-500-index/](http://www.johnwittenauer.net/a-simple-time-series-analysis-of-the-sp-500-index/)

# html-email - 无论如何，我们可以在电子邮件的主题行中有一个动画 gif 吗？

> ID：15515021
> 
> 赞同：1
> 
> 时间：2013-03-20T03:58:32.110
> 
> 标签：html-email

**或者我们可以在html**中编写一个可以影响主题行的特定代码吗？

比如风格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:49:36.533

您不能在主题行中放置动画 gif，但是，某些电子邮件客户端（iPhone、Android）会将某些 unicode 实体呈现为图像。

该网站列出了一些 - [http://ecommerce-blog.nexternal.com/%E2%98%85-use-symbols-in-your-email-subject-lines-to-get-noticed-%E2% 98%85/](http://ecommerce-blog.nexternal.com/%E2%98%85-use-symbols-in-your-email-subject-lines-to-get-noticed-%E2%98%85/)

但是，您肯定会希望在许多电子邮件客户端中对此进行测试，以确保不会产生不利影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:20:25.143

怀疑 - 但它最终取决于电子邮件客户端的实现，因为 HTML 电子邮件似乎没有得到很好的定义/标准化。

根据[RFC 2822](https://www.rfc-editor.org/rfc/rfc2822)的第 3.6.5 和 2.2.1 节，主题行是：

> 称为 [an] 非结构化字段体。从语义上讲，非结构化字段体仅被视为单行字符，无需进一步处理。

另一方面，消息正文（第 2.3 节）支持其他 MIME 类型：

> [RFC2045, RFC2046, RFC2048, RFC2049] 扩展此标准以允许不同类型的消息体。

# visual-c++ - 在 VC++ 中读取串口时挂起

> ID：15515025
> 
> 赞同：0
> 
> 时间：2013-03-20T03:59:03.763
> 
> 标签：visual-c++, serial-port

我有一个问题，我想每隔 1 秒用 vc++ 表单应用程序读取串口。但是当我调试时，它会在读取串口后停止（可以再调试）。当我运行它时，程序挂起。

```
void CENVSConfigDlg::OnTimer(UINT_PTR ID){
if(ID==cTimer1){

    char Buff[3]="0";
    char Buf[6]="0";
    int b;
    int Count = 20;
    DWORD nbytes;

    //Read Sensors

    b=0; //sensor 0
    sprintf(Buff,"%iz",b);
    if(!WriteFile( hnd_serial, Buff, Count, &nbytes, NULL )){KillTimer(cTimer1);MessageBox(L"Write Com Port fail!");return;}

    Sleep(20);

    if(!ReadFile( hnd_serial, Buf, Count, &nbytes, NULL )){KillTimer(cTimer1);MessageBox(L"Read Com Port fail!");return;}

    /* Store buf value*/
    sensor1 =atoi(Buf);

    /* Update text box. */
    CString string;
    string.Format( L"%i", sensor1 );
    Sensor_1_edit.SetWindowText( (LPCTSTR)string );
 }} 
```

这里有一些相关的代码：

```
 BOOL CENVSConfigDlg::OnInitDialog()
 {
    CDialog::OnInitDialog();

// Set the icon for this dialog.  The framework does this automatically
//  when the application's main window is not a dialog
SetIcon(m_hIcon, TRUE);         // Set big icon
SetIcon(m_hIcon, FALSE);        // Set small icon

if(!OpenComPort())MessageBox(L"Could not open Adrino port!");

return TRUE;  // return TRUE  unless you set the focus to a control
}

   BOOL CENVSConfigDlg::OpenComPort(){
//Opens com port to adrino
DCB conf = { 0 };
conf.DCBlength = sizeof( conf );

if ( hnd_serial != INVALID_HANDLE_VALUE )
    CloseHandle( hnd_serial );

MessageBox(L"Opening serial connection.\n" );

hnd_serial = CreateFileA( AdrinoComPort, GENERIC_READ | GENERIC_WRITE, 0, 0,
                         OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0 );

if ( hnd_serial == INVALID_HANDLE_VALUE ) {
    MessageBox(L"Failed to open serial port.\n" );
    return FALSE;
}

if ( !GetCommState( hnd_serial, &conf ) ) {
    MessageBox(L"Failed to configure serial port.\n" );
    CloseHandle( hnd_serial );
    hnd_serial = INVALID_HANDLE_VALUE;
    return FALSE;
}

conf.BaudRate = CBR_9600;
conf.ByteSize = 8;
conf.Parity = NOPARITY;
conf.StopBits = ONESTOPBIT;

if ( !SetCommState( hnd_serial, &conf ) ) {
    MessageBox(L"Failed to configure serial port.\n" );
    CloseHandle( hnd_serial );
    hnd_serial = INVALID_HANDLE_VALUE;
    return FALSE;   
}
}

void CENVSConfigDlg::CloseComPort(){
//Opens com port to adrino
if ( hnd_serial != INVALID_HANDLE_VALUE )
    CloseHandle( hnd_serial );

} 
```

任何人都可以帮助我，我的代码有什么问题

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:12:20.920

使用 com 端口时，您通常希望使用 comm DCB 设置端口的参数。您通常还想用它`SetCommTimeouts`来告诉您要如何写入和（尤其是）从 comm 端口读取。

[我在上一个答案](https://stackoverflow.com/a/6037377/179910)中包含了一个工作示例。

# drupal - drupal是一个框架吗

> ID：15515028
> 
> 赞同：0
> 
> 时间：2013-03-20T03:59:20.193
> 
> 标签：drupal, frameworks

我是 Drupal 的新手。我从未使用过任何框架。我搜索了框架的定义。其中许多定义都适合drupal——这是我的看法。所以有人澄清了我的疑问。drupal 是不是一个框架。

提前致谢....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T04:05:50.183

维基百科将[Drupal](http://en.wikipedia.org/wiki/Drupal)称为[内容管理框架](http://en.wikipedia.org/wiki/Content_management_framework)(CMF)。

> **内容管理框架 (CMF)**是一种便于使用可重用组件或定制软件来管理 Web 内容的系统。它共享 Web 应用程序框架和内容管理系统 (CMS) 的各个方面。

所以是的，我认为 Drupal 是一个“框架”，也是一个 CMS。它被设计成一个典型的 CMS，允许非程序员或 Web 开发人员添加和操作内容。但也是一种非常灵活和模块化的产品，因此您可以对其进行自定义以做新的事情。

我之所以称它为框架，是因为它提供了许多典型的类似框架的东西，例如数据库抽象、用户/会话处理等。如果你将 Drupal 的一些特性与一些大型 PHP 进行比较框架，比如 CodeIgniter，我想你也会称它为“框架”。

# vb.net - 使用 MessageBox 是按钮清除文本框

> ID：15515031
> 
> 赞同：0
> 
> 时间：2013-03-20T03:59:49.273
> 
> 标签：vb.net

我想出了如何清除文本框，但是当我按下`No`MessageBox 时它就会清除。我希望它清除用户是否选择`Yes`. 如果用户选择`No`，那么我什么也不想做。

```
 Private Sub BtnFah_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnFah.Click
        Try
            Dim intFah As Integer
            intFah = CInt(TxtBoxTemp.Text)
            intFah = (intFah * 9) / 5 - 32
            If MessageBox.Show(intFah.ToString & ControlChars.CrLf & "Would you like to start another temp conversion?", "Result", MessageBoxButtons.YesNo) Then
                TxtBoxTemp.Text = String.Empty
            End If
        Catch
            MessageBox.Show("Would you like to start another temp conversion?", "System Error", MessageBoxButtons.YesNo)

        End Try
    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:02:03.243

你需要比较[`DialogResult`](http://msdn.microsoft.com/en-us/library/system.windows.forms.dialogresult.aspx)

```
 Public Class Form1    
    Private Sub BtnFah_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles BtnFah.Click
        Try
            Dim intFah As Integer
            intFah = CInt(TxtBoxTemp.Text)
            intFah = (intFah * 9) / 5 - 32
            If MessageBox.Show(intFah.ToString & ControlChars.CrLf & "Would you like to start another temp conversion?", "Result", MessageBoxButtons.YesNo) = DialogResult.Yes Then
                TxtBoxTemp.Text = String.Empty
            End If
        Catch
            MessageBox.Show("Would you like to start another temp conversion?", "System Error", MessageBoxButtons.YesNo)

        End Try
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T04:02:06.817

[`MessageBox.Show`](http://msdn.microsoft.com/en-us/library/519bytz3.aspx)返回一个[`DialogResult`](http://msdn.microsoft.com/en-us/library/system.windows.forms.dialogresult.aspx)。你应该检查`DialogResult.Yes`：

```
If MessageBox.Show(...) = DialogResult.Yes Then
   TxtBoxTemp.Text = String.Empty
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:17:06.060

尝试这个...

```
If MessageBox.Show("Your Message", "Title", MessageBoxButtons.YesNo) = DialogResult.Yes Then
textbox.clear()
End If 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T04:06:41.643

使用Q作为变量，dim作为msgboxresult使msgbox有结果，如果按yes，文本框将被清除，如果没有，则返回或不执行任何操作

```
 Dim q As MsgBoxResult
            q = MsgBox("Your Question", vbYesNo)
            If q = vbYes Then
                TextBox1.Clear()
            Else
                Return
            End If 
```

# sql - 按月数选择

> ID：15515041
> 
> 赞同：0
> 
> 时间：2013-03-20T04:00:45.490
> 
> 标签：sql, sql-server-2008, select, count, case

我有皮卡表，并试图写一份报告，显示一年中每个月有多少皮卡。
它应该看起来像这样
![在此处输入图像描述](../Images/a98a4a21429395807dd62746c43a7aa1.png)

我到目前为止我有这个

```
 SELECT
DATEPART(MONTH, PickupDate)as 'Month',
count (CASE WHEN DATEPART(YEAR, PickupDate) = 2012 THEN 1 ELSE 0 end)as 'Pickups'
,count (CASE WHEN CategCode  = 'NB' and DATEPART(YEAR, PickupDate) = 2012  THEN 1 ELSE 0 end) as 'Newborn'
FROM dbo.Pickup 
where DATEPART(YEAR, PickupDate) = 2012
group by DATEPART(MONTH, PickupDate)

WITH ROLLUP 
```

我不知道如何计算新生儿列，有什么想法吗？到目前为止，我的查询计算不正确，它只计算取件表中的所有取件。
![在此处输入图像描述](../Images/4ef51bfa316ac23d94a9de86be3a12b6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:28:04.383

更改`COUNT`为`SUM`或更改`ELSE 0`为`ELSE NULL`。

`COUNT(0,1,0)`= 3, `SUM(0, 1, 0)`= 1, `COUNT(NULL,1,NULL)`= 1

如果我可以提供另一个提示，请尝试使用日期比较而不是 DATEPART 函数重写查询 - 使用此函数将阻止优化器使用索引。日历表是去这里的方式。

# ruby - mongoid 中的嵌入式文档与哈希数据类型

> ID：15515053
> 
> 赞同：9
> 
> 时间：2013-03-20T04:02:07.813
> 
> 标签：ruby, mongodb, mongoid

我找不到任何关于此的博客文章或文档。它们都是嵌入式文档和散列数据类型，非常相似。彼此相比有什么好处或限制？

考虑我的架构设计：

```
class HistoryTracker
  include ::Mongoid::Document
  include ::Mongoid::Timestamps

  field :modifier,          type: Hash,    default: {}
  field :original,          type: Hash,    default: {}
  field :modified,          type: Hash,    default: {}
  field :changeset,         type: Hash,    default: {}
end 
```

我应该在这个 HistoryTracker 类中创建几个嵌入式文档吗？或者只是使用它？索引怎么样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T17:30:26.553

Mongoid 在数据库级别以几乎相同的方式存储嵌入式文档和 Hash 属性。使用 mongoid 在模型中声明字段时这是正常的，因此如果您有嵌套结构，则创建嵌入式文档是正常的。因为 MongoDB 是无模式的 mongoid 需要您声明字段才能以与 ActiveRecord 相同的 API 呈现它们。但对于某些用例，Hash 属性为您提供了更多的灵活性。这种灵活性的缺点是您仅限于 Hash API，因此您无法获得自动生成的属性方法，并且您无法像通常在模型类中那样封装业务逻辑。

例如，假设您有一个问卷模型，您需要在其中存储许多包含许多问答对的部分。如果系统的关键要求是管理员能够设置新的部分和问题，那么您将无法轻松地将答案建模为包含每个问题的明确字段的常规嵌入式文档。对于那种事情，哈希可能更有意义。

我不知道您的具体要求是什么，但作为粗略的指导，我会说，当您使用带有嵌入式文档的固定模式时，但当您需要开放式模型时，请考虑 Hash 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T06:58:12.620

对于嵌入式文档，您还具有属性别名，如

```
class Outer
  include Mongoid::Document

  embeds_one :inner_informative_object_with_long_name, store_as: :inn
end

class Embedded
  include Mongoid::Document

  attribute :vvla, as: :very_very_long_attribute, type: String
end 
```

所以在数据库中你有短名称（使用的内存少得多），你在代码中使用长名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-16T20:25:56.150

我在使用哈希而不是嵌入文档时遇到的问题

当 Mongoid 即将序列化文档时，它当前不查看哈希的嵌套值并假设它们已经序列化。

所以如果你想有一个像下面这样的“哈希转储”

```
class Event
  include Mongoid::Document
  field :properties, type: Hash
end 
```

然后你不能在属性中使用对象

```
class Foo 
  include Mongoid::DOcument
end

e = Event.new(
  properties: {
    some_info: Foo.new
  }
} 
```

尝试持久化以下事件会导致崩溃，因为 Foo 不会被序列化（尝试`e.as_document`你会看到 的值`some_info`不会被序列化）

对问题的引用：[Github](https://github.com/ankane/ahoy/issues/279)，[MongoDB 跟踪器](https://jira.mongodb.org/browse/MONGOID-4437)

# php - 用 php 处理 Wordpress Ajax 表单

> ID：15515055
> 
> 赞同：0
> 
> 时间：2013-03-20T04:02:14.437
> 
> 标签：php, ajax, wordpress, jquery

我的网站上有一个表格，目前正在发布到一个 php 文件。现在，当提交表单时，它会将用户带到空白的 php 文件。我想在它处理完邮件功能后通过 ajax 发布或重定向。谢谢！

HTML：

```
<form method="post" id="formApply"  action="<?php bloginfo('template_url');?>/inc/sendContact.php" name="applyForm">
                <div id="col1">
                <fieldset class="col-1">
                <div class="white info-line">Want to know more? Drop us a line and we'll get right back to you.</div>
                <label class="white text-label name" for="fname">Name:</label><input type="text" name="fname" id="fname" tabindex="1" />
                <div class="clear"></div>
                <label class="white text-label email" for="email">Email:</label><input type="email" class="lower" name="email" id="email"  tabindex="2"/>
                <div class="clear"></div>
                <label class="white text-label phone" for="phone">Phone:</label><input type="tel" name="phone" id="phone" tabindex="3" maxlength="10"/>
                <div class="white text-label checker-title" id="checkererror">I am interested in:</div>
                <input type="checkbox" id="checkbox-2-1" class="regular-checkbox big-checkbox" name="checker[]" value="Office Space" /><label for="checkbox-2-1"></label><div class="white text-label checker">Office Space</div>
                <input type="checkbox" id="checkbox-2-2" class="regular-checkbox big-checkbox" name="checker[]" value="Designated Workspace" /><label for="checkbox-2-2"></label><div class="white text-label checker">Designated Workspace</div>
                <input type="checkbox" id="checkbox-2-3" class="regular-checkbox big-checkbox" name="checker[]" value="Shared Space" /><label for="checkbox-2-3"></label><div class="white text-label checker">Shared Space</div>
                </fieldset>
                </div>
                <div id="col2">
                <fieldset class="col-2">
                <label class="white text-label note-label" for="notes">Notes:</label><br/>
                <textarea name="notes" id="notes" rows="10" cols="30" class="requiredField" tabindex="4"></textarea>
                <input type="hidden" name="submitted" id="submitted" class="submitted" value="true" /><button id="submit" type="submit">Submit Application</button>
                </fieldset>
                </div>
                </form> 
```

PHP 文件：

```
 require_once 'lib/swift_required.php';

$transport = Swift_MailTransport::newInstance();

$mailer = Swift_Mailer::newInstance($transport);

$name = Trim(stripslashes($_POST['fname']));
$email = Trim(stripslashes($_POST['email']));
$phone = Trim(stripslashes($_POST['phone']));
$notes  = Trim(stripslashes($_POST['notes']));
$checkbox = $_POST['checker'];

$message = Swift_Message::newInstance()
  ->setFrom(array('From_Email' => 'My Website'))
  ->setSubject('[My_Subject from '.$name.']')
  ->setTo(array('My_Email'))
  ->setBody(
'<html>'.
'<head></head>'.
'<body>'.
'<strong>Name:</strong><br />'.
$title.' '.$name.'<br /><br />'.
'<strong>Email Address:</strong><br />'.
$email.'<br /><br />'.
'<strong>Phone Number:</strong><br />'.
$phone.'<br /><br />'.
'<strong>Interested in:</strong><br />'.
implode('<br />', $checkbox).'<br /><br />'.
'<strong>Message:</strong><br />'.
$notes.'<br /><br />'.
'</body>'.
'</html>',
'text/html' );
$result = $mailer->send($message); 
```

有人建议我使用这个 jquery，但我也无法让它工作。

```
jQuery(document).ready(function() {  
jQuery("#submit").click(function(){ 
    jQuery.ajax({  
        type: 'POST',  
        url: '<?php echo admin_url('admin-ajax.php');?>',  
        data: {  
            action: 'MyAjaxCallBack',
            MyParam: 'MyParamValue'
        },  
        success: function(data, textStatus, XMLHttpRequest){  
            alert(data);  
        },  
        error: function(MLHttpRequest, textStatus, errorThrown){  
            alert(errorThrown);  
        }  
    });  
}); 
```

});

在functions.php中

```
 function MyAjaxCallBack()
{
    foreach($_POST as $key=>$value)
        $$key = $value;

    die('Email script will go here!');
}

// creating Ajax call for WordPress  
add_action('wp_ajax_nopriv_MyAjaxCallBack', 'MyAjaxCallBack');
add_action('wp_ajax_MyAjaxCallBack', 'MyAjaxCallBack'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:38:31.223

我通过添加以下代码解决了它更新：HTML：

```
<form method="post" id="formApply"  action="<?php bloginfo('template_url');?>/inc/sendContact.php" name="applyForm">
                <div id="col1">
                <fieldset class="col-1">
                <div class="white info-line">Want to know more? Drop us a line and we'll get right back to you.</div>
                <label class="white text-label name" for="fname">Name:</label><input type="text" name="fname" id="fname" tabindex="1" />
                <div class="clear"></div>
                <label class="white text-label email" for="email">Email:</label><input type="email" class="lower" name="email" id="email"  tabindex="2"/>
                <div class="clear"></div>
                <label class="white text-label phone" for="phone">Phone:</label><input type="tel" name="phone" id="phone" tabindex="3" maxlength="10"/>
                <div class="white text-label checker-title" id="checkererror">I am interested in:</div>
                <input type="checkbox" id="checkbox-2-1" class="regular-checkbox big-checkbox" name="checker[]" value="Office Space" /><label for="checkbox-2-1"></label><div class="white text-label checker">Office Space</div>
                <input type="checkbox" id="checkbox-2-2" class="regular-checkbox big-checkbox" name="checker[]" value="Designated Workspace" /><label for="checkbox-2-2"></label><div class="white text-label checker">Designated Workspace</div>
                <input type="checkbox" id="checkbox-2-3" class="regular-checkbox big-checkbox" name="checker[]" value="Shared Space" /><label for="checkbox-2-3"></label><div class="white text-label checker">Shared Space</div>
                </fieldset>
                </div>
                <div id="col2">
                <fieldset class="col-2">
                <label class="white text-label note-label" for="notes">Notes:</label><br/>
                <textarea name="notes" id="notes" rows="10" cols="30" class="requiredField" tabindex="4"></textarea>
                <input type="hidden" name="submitted" id="submitted" class="submitted" value="true" /><button id="submit" type="submit">Submit Application</button>
                </fieldset>
                </div>
                </form> 
```

PHP 文件：

```
require( '../../../../wp-blog-header.php' );        
require_once 'lib/swift_required.php';

    $transport = Swift_MailTransport::newInstance();

    $mailer = Swift_Mailer::newInstance($transport);

    $name = Trim(stripslashes($_POST['fname']));
    $email = Trim(stripslashes($_POST['email']));
    $phone = Trim(stripslashes($_POST['phone']));
    $notes  = Trim(stripslashes($_POST['notes']));
    $checkbox = $_POST['checker'];
    $adminEmail = get_bloginfo('admin_email');

    $message = Swift_Message::newInstance()
      ->setFrom(array('From_Email' => 'My Website'))
      ->setSubject('[My_Subject from '.$name.']')
      ->setTo(($adminEmail))
      ->setBody(
    '<html>'.
    '<head></head>'.
    '<body>'.
    '<strong>Name:</strong><br />'.
    $title.' '.$name.'<br /><br />'.
    '<strong>Email Address:</strong><br />'.
    $email.'<br /><br />'.
    '<strong>Phone Number:</strong><br />'.
    $phone.'<br /><br />'.
    '<strong>Interested in:</strong><br />'.
    implode('<br />', $checkbox).'<br /><br />'.
    '<strong>Message:</strong><br />'.
    $notes.'<br /><br />'.
    '</body>'.
    '</html>',
    'text/html' );
    $result = $mailer->send($message);
$url = home_url('/#apply');
die(header("Location: $url", true)); 
```

# linux - 如何使用包含逗号的 awk 编写 csv 文件

> ID：15515058
> 
> 赞同：0
> 
> 时间：2013-03-20T04:02:19.713
> 
> 标签：linux, csv, awk

我有这样的文件

```
field1****This is, sample text ", here and there"@@@@field2****This is, sample text ", here and there"@@@@field3****This is, sample text ", here and there"@@@@ 
```

`**** is the field separator`

`@@@@ is the record separator`

我想要这样的csv

```
field1, "This is, sample text ", here and there"" 
```

这样我就可以在 microsoft excel 中打开它并在两列中显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:17:55.800

```
$ cat file
field1****This is, sample text ", here and there"@@@@field2****This is, sample text ", here and there"@@@@field3****This is, sample text ", here and there"@@@@

$ gawk -F'\\*\\*\\*\\*' -v OFS=', ' -v RS='@@@@\n?' '{$2="\"" $2 "\""}1' file
field1, "This is, sample text ", here and there""
field2, "This is, sample text ", here and there""
field3, "This is, sample text ", here and there""

$ gawk -F'\\*\\*\\*\\*' -v OFS=', ' -v RS='@@@@\n?' '{for (i=1;i<=NF;i++) $i="\"" $i "\""}1' file
"field1", "This is, sample text ", here and there""
"field2", "This is, sample text ", here and there""
"field3", "This is, sample text ", here and there"" 
```

# wordpress - 显示自定义字段值等于值数组的帖子 - Wordpress

> ID：15515059
> 
> 赞同：1
> 
> 时间：2013-03-20T04:02:26.167
> 
> 标签：wordpress, posts

我有一系列城市名称

```
$cities = array('Ludhiana','Doraha','Jagraon','Moga','Phillaur','Ahmedgarh'); 
```

在我的 wordpress 实现中，我有一个名为“cty_name”的自定义字段

现在，我想查询那些在“cty_name”自定义字段中包含任何数组值的帖子。我知道这可以在 Wp_Query 函数中使用 meta_query 来完成，但无法弄清楚。

请引导我找到一种快速有效的方法来获取这些帖子，实际上我将在数组中有大约 100 个值，并且将每个值与帖子进行比较是低效的。

谢谢你，

**编辑 ：**

我解决了这个问题，虽然这很容易......谢谢大家的支持

```
$cities = array('Ludhiana','Doraha','Jagraon','Moga','Phillaur','Ahmedgarh');

$args = array(
'post_type' => 'city_posts',
'meta_query' => array(
    array(
        'key' => 'cty_name',
        'value' => $cities,
        'compare' => 'IN'
    )
  )
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T12:38:39.520

我解决了这个问题，虽然这很容易......谢谢大家的支持

```
$cities = array('Ludhiana','Doraha','Jagraon','Moga','Phillaur','Ahmedgarh');

$args = array(
'post_type' => 'city_posts',
'meta_query' => array(
    array(
        'key' => 'cty_name',
        'value' => $cities,
        'compare' => 'IN'
    )
  )
); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T04:30:20.630

试试这个大小`wp_query`，我会推断你的关键是`cty_name`：

```
$args = ( 'meta_key' => 'cty_name'); // this will get all posts with meta key cty_name
$the_query = new WP_Query( $args );

while ( $the_query->have_posts() ) :
    $the_query->the_post();
    echo '<li>' . get_the_title() . '</li>';
    the_content();
endwhile;

wp_reset_postdata(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T04:54:36.563

尝试使用这个

```
<?php $punjab= array ('Ludhiana','Doraha','Jagraon','Moga','Phillaur','Ahmedgarh'); print_r($punjab); $pos = array_search('Ludhiana', $punjab); echo 'Phillaur found at: '.$pos; ?> 
```

# ruby-on-rails-3 - 自定义图像大小到设计 + facebook-omniauth

> ID：15515064
> 
> 赞同：2
> 
> 时间：2013-03-20T04:02:47.147
> 
> 标签：ruby-on-rails-3, devise, omniauth, mongoid3

我在设计中使用 mongoid、rails 3.2.10 和omniauth .. 并尝试设置facebook 个人资料图片网址的自定义image_size

```
 config.omniauth :facebook , API_KEYS['facebook']['api_key'], API_KEYS['facebook']['api_secret'], :image_size => {:width => 100, :height => 100} 
```

我配置如上..但结果如下..

```
http://graph.facebook.com/636937446/picture?type=#<OmniAuth::Strategy::Options height=100 width=100> 
```

所以我检查了 facebook-omniauth Strategy.rb 文件。请告诉我该怎么办..

```
 def image_url uid, options
    uri_class = options[:secure_image_url] ? URI::HTTPS : URI::HTTP
    url = uri_class.build({:host => 'graph.facebook.com', :path => "/#{uid}/picture"})

    query = if options[:image_size].is_a?(String)
      { :type => options[:image_size] }
    elsif options[:image_size].is_a?(Hash)
      options[:image_size]
    end
    url.query = Rack::Utils.build_query(query) if query

    url.to_s
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:34:41.217

嗨，我有同样的问题。我实际上编辑了我的`strategy.rb`文件，添加了我的自定义函数，并且效果很好。

第 39 行：将其更改为`'image' => image_url(uid,options),`

接下来将 image_url 方法编辑成这样

```
 def image_url uid, options
    query = if options[:image_size].is_a?(String)
      { :type => options[:image_size] }
    elsif options[:image_size].is_a?(Hash)
      options[:image_size]
    end
    url = build_url("https://graph.facebook.com/","#{uid}/picture",query) if query

    url.to_s
  end 
```

在这里，我调用了另一种方法，称为`"build url"`. 所以就在 image_url 方法定义之后`"build url"`

```
 def build_url(domain,path,params)
      return domain + "#{path}?".concat(params.collect { |k,v| "#{k}=#{CGI::escape(v.to_s)}" }.join('&')) if not params.nil?
  end 
```

保存文件，就是这样！！希望这对你有用！！！

# django - Django ListView：在模板中获取标签名称

> ID：15515068
> 
> 赞同：0
> 
> 时间：2013-03-20T04:03:21.397
> 
> 标签：django, tags

这个问题是我之前的问题的延续，你可以[在这里找到](https://stackoverflow.com/questions/15103287/creating-tag-index-django)。我有一个`ListView`代表共享公共标签的项目列表。这是视图：

```
class TagView(ListView):
    model = Blog
    context_object_name = 'blog_list'
    template_name = 'tag-list.html'
    def get_queryset(self):
         queryset = super(TagView, self).get_queryset()
         return queryset.filter(tags__name__in=[self.kwargs['tag']]) 
```

当您单击标签时（如下所示）：

```
<a href='{% url tag_url tag=tag %}'>{{ tag.name }}</a>

url(r'^tagged/(?P<tag>[\w-]+)/$', TagView.as_view(), name='tag_url'), 
```

它将带你到一个也用相同标签标记的项目列表（就像你点击stackoverflow标签部分的“django”标签一样，它会弹出所有标签为“django”的问题）。

这很好用，除了我希望能够访问当前模板中单击标签的名称。换句话说，我希望能够说：`"Questions tagged {{ tag.name }}"`在当前的模板`ListView`中。

我的网址看起来像：`www.example.com/tagged/django`用户点击链接后。但是我如何`django`从上面的 url 进入这个模板，以便我可以说：这些是标记为 django 的问题。？我已经尝试过`{{ blog_list.tag }}`，但它没有显示任何内容……抱歉，如果这令人困惑（我意识到这对许多人来说可能是基本的），我已尽力详细说明，并将根据任何反馈进一步详细说明。谢谢你的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:15:40.873

您可以通过实现自定义`get_context_data`方法轻松地将标签传递给模板：

```
class TagView(ListView):
    ...
    def get_context_data(self, **kwargs):
        context = super(TagView, self).get_context_data(**kwargs)
        context.update({
            'tag': self.kwargs['tag']
        })
        return context 
```

然后你可以在模板中使用它：

```
{{ tag }} 
```

# ios - NSArray 未按数字顺序排序

> ID：15515069
> 
> 赞同：0
> 
> 时间：2013-03-20T04:03:26.963
> 
> 标签：ios, nsmutablearray, nsarray, nsdictionary

我希望用字典中的项目创建一个数组，然后按降序排列，以便最大值位于顶部，最小值位于底部。但是，当我的项目长度超过一位时，它似乎很困难。

我的代码是这样的：

```
// build a new dictionary to swap the values and keys around as my main dictionary stores these values in another way
    NSMutableDictionary *newDictionary = [[NSMutableDictionary alloc] init];
    for (int i = 1; i < (numberOfPlayers + 1); i++ ){
        [newDictionary setValue:[NSString stringWithFormat:@"player%dSquareNumber", i] forKey:[NSString stringWithFormat:@"%@",[PlayerDictionary valueForKey:[NSString stringWithFormat:@"player%dSquareNumber", i]]]];
        NSLog(@"value added to dictionary");
// my value should now look like "player1SquareNumber", and the key will be a number such as 8, 12, 32 etc
    }

    // build array to sort this new dictionary
    NSArray *sortedKeys = [[newDictionary keysSortedByValueUsingSelector:@selector(compare:)] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];

    // make an array to sort based on this array
    NSMutableArray *sortedValues = [NSMutableArray array];
    for (NSString *key in sortedKeys){
         [sortedValues addObject:[newDictionary objectForKey:key]];
    }

    NSLog(@"sortedValues = %@", sortedValues);
    NSLog(@"sortedKeys = %@", sortedKeys); 
```

理想情况下，我的排序键应该按数字顺序排列，但我得到的是像这样的输出

```
10
11
18
7
8 
```

对于我来说`sortedArrayUsingSelector:@selector()`，我尝试了一些不同的解决方案，例如`compare:` `caseInsensitiveCompare:`等。

这里的任何帮助将不胜感激！

EDIT+ 我知道有人问过这样的另一个问题。给出的解决方案不是为字符串设计的，而是按升序而不是降序返回数组。虽然我可以使用它，但我希望在这里学习如何使用字符串并仍然按照我希望的顺序获取数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:15:50.540

试试这个：

```
NSArray *array = @[@"1",@"31",@"14",@"531",@"4",@"53",@"64",@"4",@"0"];

NSArray *sortedArray = [array sortedArrayUsingComparator:^(id str1, id str2) {
        return [((NSString *)str1) compare:((NSString *)str2) options:NSNumericSearch];
    }];
NSLog(@"%@",sortedArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:54:44.367

尝试这个，

```
// build a new dictionary to swap the values and keys around as my main dictionary stores these values in another way
NSMutableDictionary *newDictionary = [[NSMutableDictionary alloc] init];
for (int i = 1; i < (numberOfPlayers + 1); i++ )
     {
    [newDictionary setValue:[NSString stringWithFormat:@"player%dSquareNumber", i] forKey:[NSString stringWithFormat:@"%@",[PlayerDictionary valueForKey:[NSString stringWithFormat:@"player%dSquareNumber", i]]]];
     }
NSArray *arrKeys = [[newDictionary allKeys];
NSArray *sortedArray = [arrKeys sortedArrayUsingComparator:^(id firstObject, id secondObject) {
    return [((NSString *)firstObject) compare:((NSString *)secondObject) options:NSNumericSearch];
}];
NSLog(@"%@",sortedArray); 
```

# ruby-on-rails - 为什么我的 js.erb 不起作用

> ID：15515073
> 
> 赞同：0
> 
> 时间：2013-03-20T04:03:46.983
> 
> 标签：ruby-on-rails, jquery

我有以下代码：

评论.js.erb

```
alert("Alert"); 
```

应用程序.js

```
jQuery.ajaxSetup({ 
   'beforeSend': function(xhr) {xhr.setRequestHeader("Accept", "text/javascript")}
})

jQuery.fn.submitWithAjax = function() {
   this.submit(function() {
     $.post(this.action, $(this).serialize(), null, "script");         
     return false;
                         })
   return this;
};

$(document).ready(function() {
   $(".comment_form").submitWithAjax();
}) 
```

查看表格：

```
<% form_for :comment, :url => comment_task_path(tasks.id), 
                      :html => {:remote => true,
                      :class => "comment_form"} do |f|-%>
  <%= f.text_field :remark, :placeholder => "Add Comments", :rows => 2,
                   :class => 'box',
                   :style => "width: 834px; height: 40px;"%>
  <%= f.submit "Comment"%>
<% end -%> 
```

控制器方法：

```
def comment    
  @comment = Comment.new(params[:comment])
  @comment.user_id = @current_user.id
  @task.comments << @comment
  flash[:notice] = "thank you"
  if @comment.save
    # what code do I put here to render comment.js.erb?
  else

  end
end 
```

`comment`如果我希望该方法呈现我的comment.js.erb，我需要输入什么代码？我试过`render to`and `respond to`，但它仍然没有运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:07:11.187

您需要`FORM`在插件中作为参数传递。

```
jQuery.fn.submitWithAjax = function(elem, options, arg) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:15:12.513

无需显式渲染**comment.js.erb**。默认情况下，控制器将在执行该方法后呈现**comment.js.erb 。**也许您可以拥有以下代码。

在**评论**动作中

```
def comment
  # ...
  @comment.save
end 
```

并在**comment.js.erb**文件中

```
<% if @comment.valid? %>
  alert("Comment created successfully");
<% else %>
  alert("Something went wrong.");
<% end %> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T05:48:12.060

在您的路线中添加一个获取请求以获取 comments.js.erb

得到'你的控制器名称/评论'，：as =>'评论'

在您的控制器中，只需使用 comments_path

# python - 扭曲的资源对象render_Post如何在延迟后返回某个值

> ID：15515075
> 
> 赞同：0
> 
> 时间：2013-03-20T04:03:50.243
> 
> 标签：python, twisted

我应该写一些像这样的代码：

```
class SomePage(Resource):
    def render_GET(self, request):
        d = DoSomeQuery()
        # if d run success
        # return "success"
        # if d fails
        # return "fail" 
```

我的意思是 render_GET 函数的返回值取决于延迟结果。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:16:58.197

添加这个：

```
d.addCallbacks(lambda _: "success",
               lambda _: "fail")
d.addCallback(request.write)
d.addBoth(lambda _: request.finish())
return server.NOT_DONE_YET 
```

# jquery - 如何在悬停时将背景图像应用于 div - jQuery

> ID：15515081
> 
> 赞同：0
> 
> 时间：2013-03-20T04:04:32.433
> 
> 标签：jquery, css, background, hover

我想在这个 div 中添加背景图片：

```
<div class="logo-main"></div> 
```

但我的脚本不起作用：

```
<script type='text/javascript'>
$(document).ready(function(){
    var div = $('.logo-main');
    $('.logo-main').hover(function() {
        div.css({ 'background': 'url(images/slides/glare.png)' }); 
        )};
});
</script> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:08:09.893

存在语法错误

```
$(document).ready(function() {
    var div = $('.logo-main');
    div.hover(function() {
        div.css({
                    'background' : 'url(images/slides/glare.png)'
                        });
            });
}); 
```

它可以简化为

```
$(document).ready(function() {
    $('.logo-main').hover(function() {
        $(this).css({
                    'background' : 'url(images/slides/glare.png)'
                });
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/4QSHR/)

但可能你想要的是

```
$(document).ready(function() {
    $('.logo-main').hover(function() {
        $(this).css('background', 'url(images/slides/glare.png)');
    }, function(){
        $(this).css('background', '');
    });
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/4QSHR/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:06:44.940

尝试使用背景图像（并将 : 替换为 ,）..

```
<script type='text/javascript'>
$(document).ready(function(){
    var div = $('.logo-main');
    $('.logo-main').hover(function() {
        div.css({ 'background-image', 'url(images/slides/glare.png)' }); 
        )};
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:08:11.500

您无需通过 JavaScript 执行此操作，因为仅使用 CSS 即可支持此操作。

```
.logo-main {

}

.logo-main:hover {
    background-image: url(images/slides/glare.png);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T04:09:06.837

您只需将其添加到样式表（css）中即可在悬停事件上添加背景...

```
.logo-main:hover {
    background: url(images/slides/glare.png);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T04:22:26.847

@Alex：在这里我为你做了一个 POC。请在这里找到我的代码....

HTML：

```
 <div class="logo-main"></div> 
```

CSS：

```
.logo-main{
      background-    
         image:url(http://tommytoy.typepad.com/.a/6a0133f3a4072c970b016301ec8627970d-550wi);
        background-repeat:no-repeat;
        background-position:0 0;
        width:350px;
        height:165px;
        } 
```

* * *

## jQuery代码：

```
 $('.logo-main').mouseover(function() {
       $(this).css('backgroundPosition', '0 100%')
    .mouseout(function() {
     $(this).css('backgroundPosition', '0 0%') ;
    });
   }); 
```

* * *

[小提琴](http://jsfiddle.net/ssthil/PvgcE/1/)

# c - 如何检查字符串是否以C中的某个字符串开头？

> ID：15515088
> 
> 赞同：21
> 
> 时间：2013-03-20T04:04:57.250
> 
> 标签：c, string

例如，要验证有效的 Url，我想执行以下操作

```
char usUrl[MAX] = "http://www.stackoverflow"

if(usUrl[0] == 'h'
   && usUrl[1] == 't'
   && usUrl[2] == 't'
   && usUrl[3] == 'p'
   && usUrl[4] == ':'
   && usUrl[5] == '/'
   && usUrl[6] == '/') { // what should be in this something?
    printf("The Url starts with http:// \n");
} 
```

或者，我考虑过使用`strcmp(str, str2) == 0`，但这一定很复杂。

是否有一个标准的 C 函数可以做这样的事情？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-20T04:21:20.177

```
bool StartsWith(const char *a, const char *b)
{
   if(strncmp(a, b, strlen(b)) == 0) return 1;
   return 0;
}

...

if(StartsWith("http://stackoverflow.com", "http://")) { 
   // do something
}else {
  // do something else
} 
```

您还需要`#include<stdbool.h>`或只是替换`bool`为`int`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-20T04:20:40.840

我建议这样做：

```
char *checker = NULL;

checker = strstr(usUrl, "http://");
if(checker == usUrl)
{
    //you found the match

} 
```

这只会在字符串以开头`'http://'`而不是类似的开头时匹配`'XXXhttp://'`

`strcasestr`如果您的平台上可用，您也可以使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-12T08:06:21.540

使用显式循环的解决方案：

```
#include <stdio.h>
#include <stddef.h>
#include <stdbool.h>

bool startsWith(const char *haystack, const char *needle) {
    for (size_t i = 0; needle[i] != '\0'; i++) {
        if (haystack[i] != needle[i]) {
            return false;
        }
    }

    return true;
}

int main() {
    printf("%d\n", startsWith("foobar", "foo")); // 1, true
    printf("%d\n", startsWith("foobar", "bar")); // 0, false
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-17T19:28:11.380

以下应检查 usUrl 是否以“http://”开头：

```
strstr(usUrl, "http://") == usUrl ; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-20T04:12:21.897

`strstr(str1, "http://www.stackoverflow")`是可用于此目的的另一个函数。

# objective-c - Objective-C / Blocks - 这不是一个保留周期吗？

> ID：15515093
> 
> 赞同：0
> 
> 时间：2013-03-20T04:05:08.997
> 
> 标签：objective-c, objective-c-blocks, retain-cycle

```
@interface ClassA : NSObject

@property (strong, nonatomic) dispatch_queue_t dispatchQ;
@property (strong, nonatomic) NSString *string;

@end

@implementation ClassA

- (id)init
{
    self = [super init];
    if (self) {
        _dispatchQ = dispatch_queue_create("com.classa.q", NULL);
    }

    return self;
}

- (void)longRunningTaskWithCompletion:(void(^)(void))completion
{
    dispatch_async(self.dispatchQ, ^{

        for (int i = 0; i < 10000; i++) {
            NSLog(@"%i", i);
        }

        dispatch_sync(dispatch_get_main_queue(), ^{
            self.string = @"Class A Rocks!";

            if(completion) {
                completion();
            }
        });
    });
}

@end 
```

我认为这段代码创建了一个保留周期，因为块中的块在块中`-longRunningTaskWithCompletion:`捕获自我（设置字符串属性）并将块添加到调度队列属性中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T07:50:40.787

有一个保留周期，但它是暂时的。保留周期如下所示：

*   `self`保留`dispatchQ`
*   `dispatchQ`保留块
*   该块保留`self`

当块返回时，`dispatchQ`释放它。此时，保留周期被打破。该块被释放并释放`self`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T04:21:05.863

这不是保留周期。要具有保留周期，`self`需要在块保留时保留块`self`。在贴出的代码中，`self`不保留块。因此没有保留周期。

# c# - 默认发送 BASIC auth，而不是等待 HTTP 401

> ID：15515098
> 
> 赞同：4
> 
> 时间：2013-03-20T04:05:13.830
> 
> 标签：c#, asp.net, http, basic-authentication, http-status-code-401

我有一个 Web 服务需要在请求中出现 BASIC 身份验证标头，否则该服务将返回 HTTP 401（未经授权）。这有效 - 当挑战回来时，浏览器（在本例中为 Chrome）会弹出并询问凭据。然后将它们保存以供将来请求。

我的问题是，现在对服务的每个后续请求都发出两个请求 - 一个没有身份验证（收到 401），然后浏览器立即在标头中回复正确的身份验证。

有没有办法强制浏览器（可能通过特殊的标头）提供凭据，而不必每次都被 Web 服务明确询问？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:25:03.240

我不相信强制浏览器抢占 401 是可能的。当对您的服务提出请求时，服务会以 HTTP 401 响应并添加 WWW-Authenticate Basic 标头以及我猜的领域（您可以定义）。

有必要看一下基本身份验证的 RFC，其中详细介绍了如何实施基本身份验证标准。 [http://www.ietf.org/rfc/rfc2617.txt](http://www.ietf.org/rfc/rfc2617.txt)

您还可以考虑实现自己的 HTTP 模块，它应该为您的应用程序提供更大的灵活性以及如何处理基本身份验证。这允许您为 Authenticate 和 End Request 事件注册事件处理程序，并更清楚地指示您的服务将如何处理基本身份验证。asp.net 网站上提供了这方面的入门指南。 [http://www.asp.net/web-api/overview/security/basic-authentication](http://www.asp.net/web-api/overview/security/basic-authentication)

如果您的服务根据您的应用程序身份验证使用不同的身份验证（例如，当应用程序配置为表单身份验证时，该服务将仅使用基本身份验证）而不是使用 HTTP 模块将允许您有条件地使用基本身份验证。我通常在这种情况下注册我的处理程序，如下所示：

```
AuthenticationSection config = (AuthenticationSection)WebConfigurationManager.GetSection("system.web/authentication");

if(config.Mode == AuthenticationMode.Forms)
{
    module.Authenticate += OnEnter;
    context.EndRequest += OnLeave;
} 
```

# java - 在 java 中从 Berkeley DB 中检索所有记录

> ID：15515101
> 
> 赞同：1
> 
> 时间：2013-03-20T04:05:29.870
> 
> 标签：java, berkeley-db

有没有一种简单的方法来获取给定数据库中的所有键/值对？我在某处读到我可以使用光标，但我找不到它的真实示例。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:49:06.610

[这](http://download.oracle.com/berkeley-db/docs/je/1.5.3/GettingStartedGuide/Positioning.html)是一个来自oracle的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:12:34.947

您可以迭代游标并将所有键/值添加到地图

# java - 将滚动页面重新渲染到顶部

> ID：15515105
> 
> 赞同：0
> 
> 时间：2013-03-20T04:05:55.257
> 
> 标签：java, jsf, richfaces

ajax 调用后，我正在重新渲染页面的一部分。但它会导致页面向上滚动。如何防止页面在部分重新渲染时滚动。

谢谢

# svn - 使用 SVNKit 在 SVN 中提交特定文件

> ID：15515110
> 
> 赞同：1
> 
> 时间：2013-03-20T04:06:18.607
> 
> 标签：svn, commit, svnkit

如何使用 SVNKit 在 SVN 中提交特定文件而不是整个目录？

提交整个目录的代码：

```
 ISVNAuthenticationManager authManager = SVNWCUtil.createDefaultAuthenticationManager((String) session.getAttribute("USERNAME"), (String) session.getAttribute("PASSWORD"));
        repository.setAuthenticationManager(authManager);

        SVNClientManager ourClientManager = SVNClientManager.newInstance(null,repository.getAuthenticationManager());
        SVNUpdateClient updateClient = ourClientManager.getUpdateClient();
        updateClient.doUpdate(wcDir, SVNRevision.HEAD, SVNDepth.INFINITY, false, false);
        ourClientManager.getWCClient().doInfo(wcDir, SVNRevision.HEAD);
        SVNCommitInfo s1=ourClientManager.getCommitClient().doCommit(new File[] {wcDir}, true, "From Code", svnProperties.getRegularProperties(), null, true, false, SVNDepth.INFINITY); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T12:22:05.157

如果您使用 SVNKit 作为库，请使用以下代码：

```
final SvnOperationFactory svnOperationFactory = new SvnOperationFactory();
try {
    final SvnCommit commit = svnOperationFactory.createCommit();
    commit.setSingleTarget(SvnTarget.fromFile(file));
    commit.setCommitMessage("Commit message");
    final SVNCommitInfo commitInfo = commit.run();
} finally {
    svnOperationFactory.dispose();
} 
```

如果您使用 SVNKit 作为命令行工具，请运行：

```
$ jsvn commit path/to/file 
```

**更新：** 这是 1.3.x 的代码

```
final SVNClientManager clientManager = SVNClientManager.newInstance();
try {
    final SVNCommitClient commitClient = clientManager.getCommitClient();
    final SVNCommitInfo commitInfo = commitClient.doCommit(new File[]{file}, false, "Commit message", null, null, false, false, SVNDepth.INFINITY);
} finally {
    clientManager.dispose();
} 
```

# jquery - 使用 Rails 通过 Ajax 更新部分内容

> ID：15515119
> 
> 赞同：0
> 
> 时间：2013-03-20T04:06:57.433
> 
> 标签：jquery, ruby-on-rails, ruby, ajax, voting

我正在尝试在使用 Ajax 并遇到一些问题时更新 Rails 部分。基本上我有一个带有业力属性的帖子。用户可以投票赞成和反对，以从帖子中删除和删除 Karma。我想允许用户使用 Ajax 异步更新 post 值，并且我遇到了 NilClass 错误，我希望你能帮助我。我得到的错误是 nil:NilClass 的未定义方法“业力”（在我的 _karma_value.erb 文件中），我的文件如下所示。我完全卡住了！

post_controller.rb

```
 def add_karma
     # Save the page that the request came from
     session[:initial_page] ||= request.referer

     @post = Post.find(params[:id])
     @post.karma = @post.karma + 1
     @post.update_attributes(params[:post])

     respond_to do |format|
       format.html { redirect_to session[:initial_page] }  #redirect back to requesting page
       format.json { head :no_content }
       format.js {}
     end   
   end 
```

add_karma.js.erb

```
 $('#add_karma').html(
     "<%= escape_javascript(render('_karma_value', post: @post)) %>"); 
```

index.html.erb

```
...
<b>Karma:</b> 
        <%= render(:partial => 'karma_value', :locals => {:post => @post}) %>  <br>
... 
```

_karma_value.erb

```
<% if !(post.karma.nil?) %>
    <%= post.karma %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:27:05.027

是的，**@post**在部分中将为零。

因为，在渲染部分时，您提到了局部变量**post**作为**@post**。但是部分使用**@post**。

只需在该部分中使用**post即可。**

在`_karma_value.html.erb`

```
<% if !(post.karma.nil?) %>
  <%= post.karma %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:26:57.020

你通过`:locals => {:post => @post}`了，所以你应该使用`post`而不是`@post`里面 _karma_value.erb partial

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:38:34.140

为什么不在and中使用相同的`render :partial =>`命令？似乎您没有正确渲染.`add_karma.js.erb``index.html.erb``add_karma.js.erb`

# php - 使用 jquery 和 PHP 创建弹出框成功消息

> ID：15515120
> 
> 赞同：0
> 
> 时间：2013-03-20T04:07:08.530
> 
> 标签：php, jquery

没有ajax提交后如何使用jquery和PHP创建弹出框成功消息？我通常只使用javascript，

```
<?php 

  $query = //my query insert query
  if($query){
      echo "<script>alert('success submitted');</script>"; // my popup box success message
  }

?> 
```

对此有什么建议吗？我希望把它做成jquery，这样看起来更好。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:10:40.060

```
<?php 

  $query = //my query insert query
  if($query){
      echo "<script>
   $('#selectorId').html('success submitted');

  $('#selector').dialog();</script>"; // my popup box success message
  }

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:15:47.760

对于弹出窗口，您可以使用以下 vode：

```
<script language="javascript" type="text/javascript">

function popitup(url) {
    newwindow=window.open(url,'name','height=200,width=150');
    if (window.focus) {newwindow.focus()}
    return false;
}

</script>

<a href="popupex.html" onclick="return popitup('popupex.html')"
    >Link to popup</a> 
```

你可以按照你想要的方式使用它

# matplotlib - 在屏幕上运行 matplotlib/pymc 时出错

> ID：15515126
> 
> 赞同：2
> 
> 时间：2013-03-20T03:43:57.847
> 
> 标签：matplotlib, tkinter, gnu-screen, pymc

当我在 pymc 中运行 Matplot.plot 时，我使用 screen 来暂停它。完成后，出现一些错误：

```
_tkinter.TclError: couldn't connect to display "localhost:10.0" 
```

我已经尝试过 ioff()，但它没有用。有没有其他方法可以解决它？

# objective-c - NSString 中每个句子的首字母大写

> ID：15515128
> 
> 赞同：5
> 
> 时间：2013-03-20T04:08:03.290
> 
> 标签：objective-c, nsstring

如何将 NSString 中每个句子的首字母大写？例如，字符串：`@"this is sentence 1\. this is sentence 2! is this sentence 3? last sentence here."`应该变成：`@"This is sentence 1\. This is sentence 2! Is this sentence 3? Last sentence here."`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T07:16:49.287

```
static NSString *CapitalizeSentences(NSString *stringToProcess) {
    NSMutableString *processedString = [stringToProcess mutableCopy];

    NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en"];

    // Ironically, the tokenizer will only tokenize sentences if the first letter
    // of the sentence is capitalized...
    stringToProcess = [stringToProcess uppercaseStringWithLocale:locale];

    CFStringTokenizerRef stringTokenizer = CFStringTokenizerCreate(kCFAllocatorDefault, (__bridge CFStringRef)(stringToProcess), CFRangeMake(0, [stringToProcess length]), kCFStringTokenizerUnitSentence, (__bridge CFLocaleRef)(locale));

    while (CFStringTokenizerAdvanceToNextToken(stringTokenizer) != kCFStringTokenizerTokenNone) {
        CFRange sentenceRange = CFStringTokenizerGetCurrentTokenRange(stringTokenizer);

        if (sentenceRange.location != kCFNotFound && sentenceRange.length > 0) {
            NSRange firstLetterRange = NSMakeRange(sentenceRange.location, 1);

            NSString *uppercaseFirstLetter = [[processedString substringWithRange:firstLetterRange] uppercaseStringWithLocale:locale];

            [processedString replaceCharactersInRange:firstLetterRange withString:uppercaseFirstLetter];
        }
    }

    CFRelease(stringTokenizer);

    return processedString;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:52:01.053

采用

> -(NSArray *)componentsSeparatedByCharactersInSet:(NSCharacterSet *)分隔符

放置所有您期望新句子开头的分隔符（？，。，！），确保放回实际的分隔符并将数组中的第一个对象大写，然后使用

> -(NSString *)componentsJoinedByString:(NSString *)分隔符

用空格分隔符将它们加入

将每个句子的第一个字母大写，对数组的所有元素运行 for 循环。

> NSString *txt = @"你好！" txt = [txt stringByReplacingCharactersInRange:NSMakeRange(0,1) withString:[[txt substringToIndex:1] uppercaseString]];

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T07:15:15.370

这似乎有效：

```
NSString *s1 = @"this is sentence 1\. this is sentence 2! is this sentence 3? last sentence here.";

NSMutableString *s2 = [s1 mutableCopy];
NSString *pattern = @"(^|\\.|\\?|\\!)\\s*(\\p{Letter})";
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:pattern options:0 error:NULL];
[regex enumerateMatchesInString:s1 options:0 range:NSMakeRange(0, [s1 length]) usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
    //NSLog(@"%@", result);
    NSRange r = [result rangeAtIndex:2];
    [s2 replaceCharactersInRange:r withString:[[s1 substringWithRange:r] uppercaseString]];
}];
NSLog(@"%@", s2);
// This is sentence 1\. This is sentence 2! Is this sentence 3? Last sentence here. 
```

*   `"(^|\\.|\\?|\\!)"`匹配字符串或“.”、“?”或“!”的开头，
*   `"\\s*"`匹配可选的空白，
*   `"(\\p{Letter})"`匹配一个字母字符。

所以这个模式找到每个句子的第一个字母。`enumerateMatchesInString`枚举所有匹配项并将出现的字母替换为大写字母。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T00:49:27.890

这是我最终想出的解决方案。我创建了一个类别来使用以下方法扩展 NSString：

```
 -(NSString *)capitalizeFirstLetter
{
    //capitalizes first letter of a NSString
    //find position of first alphanumeric charecter (compensates for if the string starts with space or other special character)
    if (self.length<1) {
        return @"";
    }
    NSRange firstLetterRange = [self rangeOfCharacterFromSet:[NSCharacterSet alphanumericCharacterSet]];
    if (firstLetterRange.location > self.length)
        return self;

    return [self stringByReplacingCharactersInRange:NSMakeRange(firstLetterRange.location,1) withString:[[self substringWithRange:NSMakeRange(firstLetterRange.location, 1)] capitalizedString]];

}

-(NSString *)capitalizeSentences
{
    NSString *inputString = [self copy];

    //capitalize the first letter of the string
    NSString *outputStr = [inputString capitalizeFirstLetter];

    //capitalize every first letter after "."
    NSArray *sentences = [outputStr componentsSeparatedByString:@"."];
    outputStr = @"";
    for (NSString *sentence in sentences){
        static int i = 0;
        if (i<sentences.count-1)
            outputStr = [outputStr stringByAppendingString:[NSString stringWithFormat:@"%@.",[sentence capitalizeFirstLetter]]];
        else
            outputStr = [outputStr stringByAppendingString:[sentence capitalizeFirstLetter]];
        i++;
    }

    //capitalize every first letter after "?"
    sentences = [outputStr componentsSeparatedByString:@"?"];
    outputStr = @"";
    for (NSString *sentence in sentences){
        static int i = 0;
        if (i<sentences.count-1)
            outputStr = [outputStr stringByAppendingString:[NSString stringWithFormat:@"%@?",[sentence capitalizeFirstLetter]]];
        else
            outputStr = [outputStr stringByAppendingString:[sentence capitalizeFirstLetter]];
        i++;
    }
    //capitalize every first letter after "!"
    sentences = [outputStr componentsSeparatedByString:@"!"];
    outputStr = @"";
    for (NSString *sentence in sentences){
        static int i = 0;
        if (i<sentences.count-1)
            outputStr = [outputStr stringByAppendingString:[NSString stringWithFormat:@"%@!",[sentence capitalizeFirstLetter]]];
        else
            outputStr = [outputStr stringByAppendingString:[sentence capitalizeFirstLetter]];
        i++;
    }

    return outputStr;
}
@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-22T03:31:58.407

这个解决方案对我有用：

```
NSMutableString *processedString = [NSMutableString stringWithString:[stringToProcess uppercaseString]];
NSRange range = {0, [processedString length]};

[processedString enumerateSubstringsInRange:range options:NSStringEnumerationBySentences usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {

    substringRange.location++;
    substringRange.length--;

    NSString *replacementString = [[processedString substringWithRange:substringRange] lowercaseString];
    [processedString replaceCharactersInRange:substringRange withString:replacementString];
}]; 
```

注意：正如 fumoboy007 所述，字符串需要在开头转换为大写，否则枚举无法正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-13T23:55:18.313

我今天想这样做，并想出了一个可变字符串“str”，它可以包含许多句子：

```
 NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(^|\\.|\\!|\\?)\\s*[a-z]" options:0 error:NULL];
    for (NSTextCheckingResult* result in [regex matchesInString:str options:0 range:NSMakeRange(0, str.length)]) {
       NSRange rng = NSMakeRange(result.range.length+result.range.location-1, 1);
       [str replaceCharactersInRange:rng withString:[[str substringWithRange:rng] uppercaseString]];
    } 
```

我的解决方案要求我只尝试将非重音拉丁字母大写，因此使用 [az]。

用perl我觉得有点长，所以我检查了堆栈溢出。除了一个类似的答案，我想我们不能比这更简单......

# php - Imagick 类未加载

> ID：15515129
> 
> 赞同：0
> 
> 时间：2013-03-20T04:08:08.273
> 
> 标签：php, apache, mamp, darwin

我按照在线教程安装了 ImageMagick，然后安装了 PECL Imagick 类。我正确地遵循了所有步骤，并将其添加`extension=imagick.so`到**php.ini**，但它不断抛出以下错误：`Class 'Imagick' not found in...`. 然后，如果我执行，`phpinfo()`我不会得到任何*Imagick*部分。我能做些什么？

```
PHP Version: 5.4.10
System: Darwin server.local 12.3.0 (MAMP)
Darwin Kernel Version 12.3.0: Sun Jan 6 22:37:10 PST 2013;
root:xnu-2050.22.13~1/RELEASE_X86_64 x86_64

Build Date: Jan 21 2013 15:11:11 
```

编辑：我已经修改了**php.ini**（正确的，如 中所示`phpinfo()`）并多次重新启动服务器。

# c - 从文本文件中读取输入

> ID：15515133
> 
> 赞同：1
> 
> 时间：2013-03-20T04:08:12.943
> 
> 标签：c, scanf

我编写了一个简单的 C 程序，它使用类似于以下的代码从用户那里获取输入：

```
printf("Please enter number one: ");
scanf("%i", &numberOne);
printf("Please enter number two: ");
scanf("%i", &numberTwo);
... 
```

当程序运行时，这一切都工作正常 - 提示用户输入，每个输入提示出现在单独的行上（可能是因为用户按下 Return 键以表示他们已在前一行完成输入）。例如：

```
Please enter number one:
Please enter number two: 
```

但是，当我使用所有输入提示将文本文件作为输入（用于测试）重定向到程序中`./myProgram < inputText.txt`时，我猜是因为所有输入都来自文本文件，所以没有按下 Return 键：

```
Please enter number one: Please enter number two: 
```

提示是否有可能出现在各自的行上？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T06:13:18.800

当程序以交互方式运行时，用户输入会在屏幕上回显。当您将标准输入重定向到程序中时，该输入不会被回显。因此，为了在后一种情况下而不是前一种情况下获得换行符，您必须检测这种情况并根据您从哪里获得输入做一些不同的事情。

值得庆幸的是，只要您使用的是 POSIX 系统，这并不是很困难。添加：

```
#include <unistd.h> 
```

然后在每次`scanf`添加之后：

```
if (!isatty(STDIN_FILENO))
    printf("\n"); 
```

这将检查标准输入是否连接到终端。如果不是（例如，如果它是从文件重定向输入），它会打印一个换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:15:30.230

您可以在之后打印换行符`scanf`以获得更漂亮的打印输出。副作用是您在输入时会看到额外的空白行。

```
printf("Please enter number one: ");
scanf("%i", &numberOne);
printf("\n");
printf("Please enter number two: ");
scanf("%i", &numberTwo);
printf("\n");
... 
```

# powershell-2.0 - 使用powershell获取数字签名的签名时间（时间戳）

> ID：15515134
> 
> 赞同：0
> 
> 时间：2013-03-20T04:08:19.010
> 
> 标签：powershell-2.0, digital-signature

我有某些 DLL 和 Exe ，我使用 powershell 检查文件是否经过数字签名，现在我想要的是获取数字签名的时间戳（签名时间），即文件被签名的时间？如何在PowerShell中获取此信息？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-12T13:01:39.507

到目前为止，我发现的唯一方法如下所述：

[http://en-us.sysadmins.lv/Lists/Posts/Post.aspx?ID=27](http://en-us.sysadmins.lv/Lists/Posts/Post.aspx?ID=27)

（谢谢 Vadims Podans ！！！）

只需将以下代码放入 ps1 脚本中，然后在最后调用该函数，并提供您要检查的文件的路径：

```
#==================================================
function Get-AuthenticodeSignatureEx {
<#
.ForwardHelpTargetName Get-AuthenticodeSignature
#>
[CmdletBinding()]
    param(
        [Parameter(Mandatory = $true, ValueFromPipeline = $true, ValueFromPipelineByPropertyName = $true)]
        [String[]]$FilePath
    )
    begin {
$signature = @"
[DllImport("crypt32.dll", CharSet = CharSet.Auto, SetLastError = true)]
public static extern bool CryptQueryObject(
    int dwObjectType,
    [MarshalAs(UnmanagedType.LPWStr)]string pvObject,
    int dwExpectedContentTypeFlags,
    int dwExpectedFormatTypeFlags,
    int dwFlags,
    ref int pdwMsgAndCertEncodingType,
    ref int pdwContentType,
    ref int pdwFormatType,
    ref IntPtr phCertStore,
    ref IntPtr phMsg,
    ref IntPtr ppvContext
);
[DllImport("crypt32.dll", CharSet = CharSet.Auto, SetLastError = true)]
public static extern bool CryptMsgGetParam(
    IntPtr hCryptMsg,
    int dwParamType,
    int dwIndex,
    byte[] pvData,
    ref int pcbData
);
[DllImport("crypt32.dll", CharSet = CharSet.Auto, SetLastError = true)]
public static extern bool CryptMsgClose(
    IntPtr hCryptMsg
);
[DllImport("crypt32.dll", CharSet = CharSet.Auto, SetLastError = true)]
public static extern bool CertCloseStore(
    IntPtr hCertStore,
    int dwFlags
);
"@
        Add-Type -AssemblyName System.Security
        Add-Type -MemberDefinition $signature -Namespace PKI -Name Crypt32
    }
    process {
        Get-AuthenticodeSignature @PSBoundParameters | ForEach-Object {
            $Output = $_
            if ($Output.SignerCertificate -ne $null) {
                $pdwMsgAndCertEncodingType =  0
                $pdwContentType =  0
                $pdwFormatType =  0
                [IntPtr]$phCertStore = [IntPtr]::Zero
                [IntPtr]$phMsg = [IntPtr]::Zero
                [IntPtr]$ppvContext = [IntPtr]::Zero
                $return = [PKI.Crypt32]::CryptQueryObject(
                    1,
                    $Output.Path,
                    16382,
                    14,
                    $null,
                    [ref]$pdwMsgAndCertEncodingType,
                    [ref]$pdwContentType,
                    [ref]$pdwFormatType,
                    [ref]$phCertStore,
                    [ref]$phMsg,
                    [ref]$ppvContext
                )
                $pcbData = 0
                $return = [PKI.Crypt32]::CryptMsgGetParam($phMsg,29,0,$null,[ref]$pcbData)
                $pvData = New-Object byte[] -ArgumentList $pcbData
                $return = [PKI.Crypt32]::CryptMsgGetParam($phMsg,29,0,$pvData,[ref]$pcbData)
                $SignedCms = New-Object Security.Cryptography.Pkcs.SignedCms
                $SignedCms.Decode($pvData)
                foreach ($Infos in $SignedCms.SignerInfos) {
                    foreach ($CounterSignerInfos in $Infos.CounterSignerInfos) {
                        $sTime = ($CounterSignerInfos.SignedAttributes | ?{$_.Oid.Value -eq "1.2.840.113549.1.9.5"}).Values | `
                        Where-Object {$_.SigningTime -ne $null}
                    }
                }
                $Output | Add-Member -MemberType NoteProperty -Name SigningTime -Value $sTime.SigningTime.ToLocalTime() -PassThru -Force
                [void][PKI.Crypt32]::CryptMsgClose($phMsg)
                [void][PKI.Crypt32]::CertCloseStore($phCertStore,0)
            } else {
                $Output
            }
        }
    }
    end {}
}

Get-AuthenticodeSignatureEx .\wsusscn2.cab | FL *

#================================================== 
```

输出应该为您提供所有信息，包括：

签约时间 : 08-04-2014 09:27:2

希望能帮助到你！

# c - 为什么这个c程序输出4？

> ID：15515136
> 
> 赞同：0
> 
> 时间：2013-03-20T04:08:35.077
> 
> 标签：c, puzzle

为什么这个程序输出 4

```
#define SIZE 10
void size(int arr[SIZE])
{
   printf("size of array is:%d\n",sizeof(arr));
}

 int main()
{
      int arr[SIZE];
      size(arr);
      return 0;
} 
```

在函数中调用`size(arr`)时会发生什么`main`，是否意味着将函数`arr`中的地址分配给函数中？`main``arr[SIZE]``size`

有人可以解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:16:39.077

函数内部`arr`是一个指针。一个指针占用 4 个字节。`sizeof`返回作为参数传递的变量的大小（以字节为单位）。这就是为什么。

# php - 用ajax打印一个php页面

> ID：15515142
> 
> 赞同：0
> 
> 时间：2013-03-20T04:09:07.493
> 
> 标签：php, jquery, ajax, echo

我经常使用 Ajax 来传递 JSON 数据，但实际上我遇到了问题。

我想将我页面的 php 转移到另一个页面，并且只用 ajax 打印它。

php：

```
<ul  class="thumbnails biblio sortable">
                                <?php
                                    $reponse = $bdd->query("SELECT id_gallery,nom_gallery,link_gallery,img_gallery
                                    FROM gallery where id_gallery='$gallery'");

                                    $donnees = $reponse->fetchAll();
                                    for($k=0;$k<count($donnees);$k++){
                                        $id_gallery=$donnees[$k]['id_gallery'];
                                        $nom_gallery=$donnees[$k]['nom_gallery'];
                                        $link_gallery=$donnees[$k]['link_gallery'];
                                        $img_gallery=$donnees[$k]['img_gallery'];

                                        $link_gallery = explode(",", $link_gallery);

                                        $longueur=count($link_gallery);
                                        //echo "longueur: ".$longueur;
                                        for($j=0;$j<$longueur;$j++){
                                            $id=$link_gallery[$j];
                                            $reponse = $bdd->query("SELECT nom_fichier,id_fichier
                                                                    FROM fichier
                                                                    where id_fichier = '$id' ");

                                            $donnees = $reponse->fetchAll();
                                            if(count($donnees) != 0){
                                                $nom_fichier=$donnees[0]['nom_fichier'];
                                                $id_fichier=$donnees[0]['id_fichier'];

                                                if($j % 4 == 0 && $j !=0){
                                                    echo"</ul>";
                                                    echo"<ul  class='thumbnails biblio sortable'>";
                                                }
                                                //if($)
                                                echo"<li class='span3 ui-state-default info' style='overflow:hidden;' data-click='".$id_fichier."'>";
                                                //str+="<input id='"+data[i].id_gallery +"' type='checkbox' value='option'>";
                                                echo"<ul class='thumbnail-actions'>";
                                                echo"<li><a href='#' title='Edit photo'><span class='icon-pencil'></span></a></li>";
                                                //str+="<li><a href='upload/download.php?filename="+dataSplited[i].nom_fichier+"' title='Download photo'><span class='icon-download'></span></a></li>";
                                                echo"<li><a class='delete' id='href-".$id_fichier."' href='".$nom_fichier."' data-click='".$id_fichier."'  title='Delete photo'><span class='icon-trash'></span></a></li>";
                                                echo"</ul>";
                                                echo"<a class='thumbnail' href='#' ><img alt='Image 34' src='upload/uploads/".$nom_fichier."' style='width:200px;height:200px;'  ></a>";
                                                echo"</li>";
                                                }

                                        }

                                    }
                                ?>
                            </ul> 
```

问题是我不知道如何打印所有的“回声”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:53:55.917

如果您只想在其他页面中打印上述代码的输出，只需简单地使用`.load();`方法。[http://api.jquery.com/load/](http://api.jquery.com/load/)和 php 一样`include()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:57:03.827

试试这个脚本从另一个页面加载。我已经尝试过它的工作 var default_content="";

```
 $("#pageContent").onClick(function loadPage(url)
  {
url=url.replace('#page','');

$('#loading').css('visibility','visible');

$.ajax({
    type: "POST",
    url: "YourPHP.php",
    data: 'page='+url,
    dataType: "html",
    success: function(msg){

        if(parseInt(msg)!=0)
        {
            $('#pageContent').html(msg);
            $('#loading').css('visibility','hidden');
        }
    }

});

   }
 </script>
 <div id ="pageContent">
......do something  here
 </div> 
```

# php - Mysqli 数组加载删除第一个条目

> ID：15515143
> 
> 赞同：0
> 
> 时间：2013-03-20T04:09:07.677
> 
> 标签：php, arrays, mysqli

```
$query_string="SELECT wp_app_tracker.wp_apt_application_date,wp_app_tracker.wp_apt_user FROM wp_app_tracker WHERE wp_app_tracker.wp_apt_user = '" . $current_user_name . "'";

$temp_result = mysqli_query($conn, $query_string);
$row_count = mysqli_num_rows($temp_result);
$application_row = mysqli_fetch_array($temp_result,MYSQLI_ASSOC);

$row_kounter=0;

while ( $application_row=mysqli_fetch_array($temp_result, MYSQLI_ASSOC) ) {...... 
```

$conn, $current_user_name 中的值是有效的，因为我没有收到任何语法错误。

我在网页上回显了 $query_string 并确认检索到了正确数量的记录，但是在循环中处理时，while 循环不会处理数组中的第一行。

谁能解释一下为什么？

先感谢您

乌塔姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:19:51.420

那是因为你在打电话

```
$application_row = mysqli_fetch_array($temp_result,MYSQLI_ASSOC); 
```

在 while 循环之前也有一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:24:58.183

在进入循环之前，您正在执行 2 次 mysqli_fetch_array 调用。这样，您将始终丢失第一行。

删除下面的行，它应该可以工作。

```
$application_row = mysqli_fetch_array($temp_result,MYSQLI_ASSOC); 
```

# android - 用于不同 ABI 库的多个 APK

> ID：15515145
> 
> 赞同：3
> 
> 时间：2013-03-20T04:09:09.287
> 
> 标签：android, android-ndk, apk

我正在使用一个相当大（15 MiB）的预编译库，在 arm5 和 arm7 版本之间有显着的加速。我的应用程序不是 NDK 应用程序，因此我无法在 Application.mk AFAIK 中声明 APP_ABI。[根据http://androidhardwares.com/android-hardware-development/android-hardware](http://androidhardwares.com/android-hardware-development/android-hardware-requirements/)，我的目标 SDK 至少是 android 2.3，虽然我个人还没有看到不支持 armeabi-v7a 的 2.3+ 设备[-requirements/](http://androidhardwares.com/android-hardware-development/android-hardware-requirements/)我应该只假设 armeabi。

是否有某些功能或 GL 我可以假设适用于所有 arm-v7 处理器，但不适用于 arm-v6 或 arm-v5？有没有办法将我的应用程序转换为 NDK 仅针对 Application.mk 中的一个选项？如果我只使用不同的版本名称（IE 1.0-arm5、1.0-arm7）和不同的 apk，只在 lib 中使用 armeabi 和 armeabi-v7a 目录，那会起作用吗？根据[http://developer.android.com/google/play/publishing/multiple-apks.html](http://developer.android.com/google/play/publishing/multiple-apks.html)我必须在 android 清单中有其他不同的东西才能工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:02:47.970

*“我正在使用库”* - 这是本机库（C/C++）吗？如果是，那么您的应用程序就是一个 NDK 应用程序，即使您没有`ndk-build`在常规构建过程中构建这个库；即使是由一些不同的原生工具链构建的，与 NDK 完全无关；即使它是您根本不构建的 3 方库。

所以，在 Apllication.mk 中设置 APP_ABI 是没有问题的。我相信这会解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T21:34:17.870

解决方法是在 AndroidManifest.xml 中将 versionCode 设置为更高的 arm 系统的数字。如果您的版本是 1.0.0 并且您的版本代码是 100，请将其更改为 arm 5 的 1005 和 arm 7 的 1007。这样，当用户在 Play 商店中看到它时，如果他们的设备支持，则会下载 arm 7 版本因为它有更高版本的代码。只需确保在上传到开发者控制台时先上传较低版本的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-15T12:40:08.157

您应该订购版本代码，以便在每台设备上运行性能最佳的 APK。例如，对版本代码进行排序，使 x86 APK 的版本代码最高，其次是 ARMv7，然后是 ARMv5TE。因此，x86 APK 将首选用于 x86 设备，而 ARMv7 APK 将首选用于 ARMv7 设备。

# ftp - FTP文件导入问题

> ID：15515148
> 
> 赞同：1
> 
> 时间：2013-03-20T04:09:32.537
> 
> 标签：ftp, data-importer

我正在尝试制作一个 ftp 导入器，它几乎完成了，但为了进一步优化它，我想看看请求的文件是否已在服务器中更新。如果它已经存在并且没有被修改，我不会再次获取它。什么是最好的方法。请帮忙

# c - 嵌套for循环逻辑

> ID：15515149
> 
> 赞同：0
> 
> 时间：2013-03-20T04:09:37.333
> 
> 标签：c, for-loop, logic, nested-loops

我正在尝试使用嵌套的 for 循环（C 语言）完成以下操作：

```
 a[0] = b[0][0];
    a[1] = b[1][0];
    a[2] = b[1][1];
    a[3] = b[2][0];
    a[4] = b[2][1];
    a[5] = b[2][2];
    a[6] = b[3][0];
    a[7] = b[3][1];
    a[8] = b[3][2];
    a[9] = b[3][3]; 
```

我有这个：

```
 for (j=0; j<3; ++j)
        for (k=0; k<j; ++k)
            a[i] = b[j][k]; 
```

我想我需要这个：

```
 for (i=0; i<9; ++i) 
```

但我很难确定把它放在哪里。对逻辑的任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:16:37.953

两个修复。

*   包括一个计数器
*   让您的绑定支票包含在内

插图：

```
int i=0;
for (j = 0; j <= 3; ++j)
    for (k = 0; k <= j; ++k)
        a[i++] = b[j][k]; 
```

[爱迪生](http://ideone.com/mrgN5A)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:13:09.360

你离得太近了！这应该这样做：

```
i=0;
for (j=0; j<3; ++j)
    for (k=0; k<j; ++k)
        a[i++] = b[j][k]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:14:32.993

您只需要在嵌套的 for 循环中增加一个变量：

```
int i = 0;
for (j=0; j<3; ++j)
    for (k=0; k<j; ++k)
        a[i++] = b[j][k]; 
```

# ruby-on-rails - Rails 迁移不匹配模型

> ID：15515151
> 
> 赞同：0
> 
> 时间：2013-03-20T04:09:42.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我无法理解迁移如何根据模型自行更新。

例如，我已经设计了设置，我想删除电子邮件字段并且只有一个用户名和密码字段。

所以我做了

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :username, :password
  # attr_accessible :title, :body
end 
```

但是，迁移文件即使在之后也不会反映这些更改

```
rake db:migrate 
```

或者

```
 rake db:reset 
```

迁移文件仍然有电子邮件字段

```
class DeviseCreateUsers < ActiveRecord::Migration
  def change
    create_table(:users) do |t|
      ## Database authenticatable
      t.string :email,              :null => false, :default => ""
      t.string :encrypted_password, :null => false, :default => ""

      ## Recoverable
      t.string   :reset_password_token
      t.datetime :reset_password_sent_at

      ## Rememberable
      t.datetime :remember_created_at

      ## Trackable
      t.integer  :sign_in_count, :default => 0
      t.datetime :current_sign_in_at
      t.datetime :last_sign_in_at
      t.string   :current_sign_in_ip
      t.string   :last_sign_in_ip

      ## Confirmable
      # t.string   :confirmation_token
      # t.datetime :confirmed_at
      # t.datetime :confirmation_sent_at
      # t.string   :unconfirmed_email # Only if using reconfirmable

      ## Lockable
      # t.integer  :failed_attempts, :default => 0 # Only if lock strategy is :failed_attempts
      # t.string   :unlock_token # Only if unlock strategy is :email or :both
      # t.datetime :locked_at

      ## Token authenticatable
      # t.string :authentication_token

      t.timestamps
    end

    add_index :users, :email,                :unique => true
    add_index :users, :reset_password_token, :unique => true
    # add_index :users, :confirmation_token,   :unique => true
    # add_index :users, :unlock_token,         :unique => true
    # add_index :users, :authentication_token, :unique => true
  end
end 
```

我还尝试删除迁移文件，以便 Rails 希望知道创建一个新文件。但是，这不起作用，并且迁移仍然是从某个地方运行的？这些迁移是从哪里运行的？请注意，我的 db/migrate 文件当时是空的。

```
-- create_table("users", {:force=>true})
   -> 0.2476s
-- add_index("users", ["email"], {:unique=>true, :name=>"index_users_on_email"})
   -> 0.1832s
-- add_index("users", ["reset_password_token"], {:unique=>true, :name=>"index_users_on_reset_password_token"})
   -> 0.1832s
-- initialize_schema_migrations_table()
   -> 0.3776s
-- assume_migrated_upto_version(20130320033132, ["/home/Portfolio Rails/portfolio/db/migrate"])
   -> 0.1532s 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:12:05.910

你把这一切都搞反了。迁移是磁盘上的文件。它们*从不*“自我更新”，尽管您可以要求 Rails 为您生成它们，但它会根据您的输入而不是您的数据库或模型的状态来执行此操作。

更改不会从模型流向迁移，而是通过数据库从迁移流向模型。*作为开发人员，您有责任通过引入**新*的迁移来更改数据库。如果要删除字段，则需要创建一个删除该列的新迁移。

跑步`rake db:migrate`的作用与你想象的相反。*它从*您的迁移中复制状态，而不是复制*到*它们。它将查看`db/migrate`并查看是否有任何新文件包含有关如何修改数据库状态的说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:14:33.483

迁移文件只是您对架构所做的修改的书面记录。修改它们对数据库本身没有任何作用。

您需要创建一个删除电子邮件字段的迁移：

```
rails generate migration remove_email_from_users email:string
rake db:migrate 
```

# android - 在android中使用音频文件作为麦克风输入流

> ID：15515159
> 
> 赞同：2
> 
> 时间：2013-03-20T04:10:25.863
> 
> 标签：android, microphone

有什么办法可以在来电期间使用音频文件作为麦克风输入流，以便呼叫者可以听到该音频？安卓有可能吗？任何回应表示赞赏，请帮助！

# c# - 如何在 WinRT 应用程序中获取字体的大小（以像素为单位）？

> ID：15515162
> 
> 赞同：0
> 
> 时间：2013-03-20T04:10:42.890
> 
> 标签：c#, xaml, fonts, windows-store-apps, pixels

如标题所示，在 .NET 4.5 中，我们有一个字体类，可以为您提供像素高度，但在 WinRT 中呢？

是否有任何 API 可用于获取它使用的像素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:56:38.397

由于 Windows Store Apps 的 .NET API 中甚至不存在 FormattedText 类，因此我的解决方法是使用 TextBlock：

```
TextBlock dummyTextBlock = new TextBlock();
dummyTextBlock.FontFamily = new FontFamily("Tahoma");
dummyTextBlock.FontSize = 18;
dummyTextBlock.FontStyle = FontStyle.Normal;
dummyTextBlock.FontWeight = FontWeights.Bold;
dummyTextBlock.Text = "X";
dummyTextBlock.Measure(new Size(0,0));
dummyTextBlock.Arrange(new Rect(0,0,0,0));
double width = dummyTextBlock.ActualWidth;
double height = dummyTextBlock.ActualHeight; 
```

这为您提供了文本的显示方式的高度（和宽度）。

# sql - Sql Join 语句检索名称

> ID：15515168
> 
> 赞同：0
> 
> 时间：2013-03-20T04:11:12.847
> 
> 标签：sql, join

我正在尝试从 EmployeeMaster 检索名称并插入 LeaveCarryForwardTemp .. 我写了这个查询.. 但它返回一个空值.. 请建议..

```
 (    
         @CreatedUserID as nvarchar(9)
        ,@CalendarYear as numeric(18, 0)    
   )
    AS

    BEGIN

    Select

        A.EmployeeID,B.Name  as EmpName             
        From HRLeaveCarryForwardTemp A
        Join HREmployeeMaster B On A.EmployeeID = B.EmployeeID
        Where A.EmployeeID = B.EmployeeID

        Delete dbo.HrLeaveCarryForwardTemp
        Where UserID = @CreatedUserID 

        INSERT INTO [dbo].[HrLeaveCarryForwardTemp]
           ( [UserID]
            ,[EmployeeID]
            ,[CalendarYear]
            ,[LeaveCarryForward]
            ,[Status]
            )
        Select 
             @CreatedUserID             
            ,[EmployeeID]
            ,@CalendarYear
            ,[LeaveCarryForward]
            ,[Status]           
        From dbo.[HRLeaveCarryForward]
        Where CalendarYear =@CalendarYear

    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:24:15.903

因此，您必须将 Name 或 Id 保存在变量中，并将变量传递给 Insert 查询，如下所示...

```
DECLARE @EmpID int

Select  @EmpID = A.EmployeeID
        From HRLeaveCarryForwardTemp A
        Join HREmployeeMaster B On A.EmployeeID = B.EmployeeID
        Where A.EmployeeID = B.EmployeeID 
```

-- 或者如果你想要名字然后

```
Declare @EmpName varchar(50)

Select  @EmpName = B.Name 
        From HRLeaveCarryForwardTemp A
        Join HREmployeeMaster B On A.EmployeeID = B.EmployeeID
        Where A.EmployeeID = B.EmployeeID 
```

现在根据您的要求将变量传递给插入查询...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:31:20.267

您正在与 HREmployeeMaster 一起加入 HRLeaveCarryForwardTemp，并从 HRLeaveCarryForward 表中插入..??

# shell - 使用 sed 编写 shell 脚本

> ID：15515169
> 
> 赞同：1
> 
> 时间：2013-03-20T04:11:20.943
> 
> 标签：shell

我想从标准输入读取，删除所有'/'，并将输出写入标准输出。因此，一个文件包含：

```
/ab1/1a6/ 17
/a/b/1 
```

将有输出：

```
ab11a6 17
ab1 
```

我认为应该是这样的：

```
read input
sed -r 's/\/[^\/]*\/[^\/]*\/.*/"I not sure what do I need to put in here"/g'
echo $input 
```

我真的不知道我需要什么来放置“替换”部分。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T04:15:12.010

```
sed 's./..g' 
```

这将删除`/`每行上的所有字符，因此您不需要替换部分。您可以将`/`用作分隔符并在文本中对其进行转义：`s/\///g`或选择不同的标点符号作为分隔符：`s./..g`

因此，如果您想转换一个名为的文件`input.txt`并将输出写入`output.txt`：

```
sed 's./..g' input.txt > output.txt
# or
sed 's./..g' < input.txt > output.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T04:17:26.130

完成您所要求的最简单的程序是：

```
 tr -d '/' 
```

如果你输入，你会得到你想要的输出 - 没有 / 字符你不需要`read`or`echo`语句

sed 的行为与其他人显示的相同，默认情况下， tr & sed 从标准输入读取并写入标准输出：

```
sed 's/\///g' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T04:14:42.090

没什么……如下图：

```
% echo "/ab1/1a6/ 17" | sed 's/\///g'
ab11a6 17 
```

# matlab - 打印结果的 awk 问题

> ID：15515175
> 
> 赞同：1
> 
> 时间：2013-03-20T04:11:36.500
> 
> 标签：matlab, output, printf

那么我面临的问题是非常基本的。我编写了以下代码将一条线分成 10 个部分并找到每个部分的坐标。程序运行良好，但输出文本文件未显示正确结果。我只想在文本文件的列中打印 linspace 的结果。谢谢。

```
h=input('enter the size of the test box ');
theta=input('the angle');
xs=input('enter the x1 position of the slipplane');
ys=input('enter the y1 position of the slipplane');

r=h/sind(theta);
xe=(xs+(h/sind(theta)));
ye=(ys+(h/sind(theta)));
x1=xs+4;
y1=ys+4;
x10=xe-4;
y10=ye-4;

   n=linspace(x1,x10,10)
   m=linspace(y1,y10,10)

fid = fopen('result.txt', 'wt'); 
fprintf(fid,' %f\t %f\n',n,m);
fclose(fid); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:47:01.057

采用：

```
h=input('enter the size of the test box ');
theta=input('the angle');
xs=input('enter the x1 position of the slipplane');
ys=input('enter the y1 position of the slipplane');

r=h/sind(theta);
xe=(xs+(h/sind(theta)));
ye=(ys+(h/sind(theta)));
x1=xs+4;
y1=ys+4;
x10=xe-4;
y10=ye-4;

   n=linspace(x1,x10,10)
   m=linspace(y1,y10,10)

fid = fopen('result.txt', 'wt'); 
fprintf(fid,'%f\t %f\n',[n;m]);
fclose(fid); 
```

终端：

```
enter the size of the test box 10
the angle10
enter the x1 position of the slipplane10
enter the y1 position of the slipplane10

n =

  Columns 1 through 5

   14.0000   19.5097   25.0195   30.5292   36.0390

  Columns 6 through 10

   41.5487   47.0585   52.5682   58.0780   63.5877

m =

  Columns 1 through 5

   14.0000   19.5097   25.0195   30.5292   36.0390

  Columns 6 through 10

   41.5487   47.0585   52.5682   58.0780   63.5877 
```

result.txt 的内容：

```
14.000000    14.000000
19.509745    19.509745
25.019490    25.019490
30.529235    30.529235
36.038980    36.038980
41.548725    41.548725
47.058470    47.058470
52.568215    52.568215
58.077960    58.077960
63.587705    63.587705 
```

# c++ - 为什么我不能在初始化列表中初始化静态变量？

> ID：15515179
> 
> 赞同：3
> 
> 时间：2013-03-20T04:12:02.573
> 
> 标签：c++, oop, static

我试图使用以下代码：

```
class Test 
{
private:
    static int x;
public:
    Test(int i) : x(i) {}
};
main()
{
    Test a(5);
} 
```

但是，然后我得到了错误：

```
‘int Test::x’ is a static data member; it can only be initialized at its definition 
```

上述实现有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T04:17:15.797

错误消息非常准确地告诉您问题。

问题是静态成员只有一个实例，而不管您碰巧创建了多少类实例。即使您创建了该类的多个实例，您也只需对其进行一次初始化——这意味着它不能附加到构造函数。

```
class Test 
{
private:
    static int x;
public:

};

int Test::x = 1; // newly added

main()
{
    Test a;
} 
```

在这种情况下，看起来您可能根本不想要一个静态成员变量——您在创建类的实例时传递了一个值来初始化它，这往往表明您可能只想要一个普通的成员变量：

```
class Test 
{
private:
    int x;
public:
    Test(int i) : x(i) {}
};

main()
{
    Test a(5);
} 
```

在这种情况下，如果您想要具有不同值的对象的第二个实例，您可以这样做：

```
main() { 
    Test a(5), b(1);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T04:15:08.850

静态变量不是对象的一部分——它们是类的一部分。这就是为什么您不能将它们与对象的其他成员一起初始化的原因。

您需要在源文件的某处提供静态变量的定义，并且可以将其初始化放在那里：

```
int Test::x = 5; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T04:16:43.477

类静态变量必须在类主体之外进行存储，并且可以进行初始化。像这样：

```
class Test 
{
private:
    static int x;
public:
    Test(int i) { x = i; }
};
int Test::x = 42;

main()
{
    Test a(5);
} 
```

# ruby-on-rails - 启动 Rails 服务器时出现 ExecJS::RuntimeUnavailable 错误

> ID：15515180
> 
> 赞同：4
> 
> 时间：2013-03-20T04:12:03.137
> 
> 标签：ruby-on-rails, execjs

我创建了一个新的 Rails 应用程序。当我尝试启动服务器时，出现以下错误：

```
[bathakarai@Project1-CO samp]$ rails server
/home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/railties-3.2.13/lib/rails/script_rails_loader.rb:11: warning: Insecure world writable dir /usr in PATH, mode 040777
/home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.4/lib/bundler/runtime.rb:216: warning: Insecure world writable dir /usr in PATH, mode 040777
/home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `block (2 levels) in require'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `each'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `block in require'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `each'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `require'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/bundler-1.3.4/lib/bundler.rb:132:in `require'
    from /home/bathakarai/gold/Ruby/Practice/Rails/samp/config/application.rb:7:in `<top (required)>'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/railties-3.2.13/lib/rails/commands.rb:53:in `require'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/railties-3.2.13/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap'
    from /home/bathakarai/.rvm/gems/ruby-2.0.0-p0/gems/railties-3.2.13/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T04:17:20.233

如果您刚刚生成了一个新应用程序，那么当 gem`therubyracer`被评论时就会出现这种情况。需要编译您的资产。您可以取消注释或安装类似的东西，`nodejs`这样您就不需要在所有项目中使用 gem。

```
brew install nodejs
# or
sudo apt-get install nodejs 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T04:35:23.717

尝试

```
sudo gem install therubyracer 
```

或者

```
gem install therubyracer 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-29T03:13:32.257

最流行的 JavaScript 运行时是`therubyracer`gem。正如*@muttonlamb* [所说](https://stackoverflow.com/a/15515425)，安装它运行：

```
gem install therubyracer 
```

然后，正如*Bathakarai* [提到](https://stackoverflow.com/q/15515180/#comment21973798_15515425)`Gemfile`的，在文件底部添加下一行：

```
gem 'therubyracer' 
```

现在`rails server`再次运行，一切正常。

为了简化流程，您可以运行[脚本](https://gist.github.com/lucio-martinez/23110e3618c1bac7f641)来生成应用程序并自动添加 JS 运行时。

# android - sherlockfragment 中的gridview 无法执行onItemClick

> ID：15515182
> 
> 赞同：0
> 
> 时间：2013-03-20T04:12:06.553
> 
> 标签：android, actionbarsherlock, android-gridview

我看过很多关于此的帖子，但无法理解我的代码不起作用。

我在 SherlockFragment 中有一个 gridview，我在 asyncTask 中更新了 gridview 项目。

这是我的gridView xml，

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/gridview"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:horizontalSpacing="4dip"
android:numColumns="auto_fit"
android:stretchMode="columnWidth"
android:verticalSpacing="10dip"
android:padding="4dip"
android:background="#000000"
 /> 
```

和 GridView 项目 xml 是。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="140dp"
android:layout_height="150dp"
android:paddingLeft="4dp"
android:paddingTop="4dp" >

<ImageView
    android:id="@+id/cat_thumbnail"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:contentDescription="@string/content_description"
    android:scaleType="fitXY"
    android:src="@drawable/logo" />

<TextView
    android:id="@+id/cat_title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/cat_thumbnail"
    android:background="#80a0a0a0"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textColor="#ffffff" /> 
```

我正在使用的代码是。

```
extends SherlockFragment {
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    final View v = inflater.inflate(R.layout.grid_layout, container, false);
    gridView = (GridView) (v.findViewById(R.id.gridview));
    return v;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    imageLoader = ImageLoader.getInstance();
    setHasOptionsMenu(false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setRetainInstance(true);
    CategoryItems = new ArrayList<HashMap<String, String>>();
    new GridImages().execute();
    gridView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            HashMap<String, String> tempMap = new HashMap<String, String>();
            tempMap = CategoryItems.get(position);
            String Catid = tempMap.get(TAG_ID);
            Fragment videoFragment = new VideosFragment();
            Bundle bundle = new Bundle();
            bundle.putString(TAG_ID, Catid);
            videoFragment.setArguments(bundle);
            FragmentChangeActivity fca = (FragmentChangeActivity) getActivity();
            fca.switchContent(videoFragment);
        }
    });

}

public class ImageAdapter extends BaseAdapter {

    public class ViewHolder {
        public TextView title;
        public ImageView thumbnail;
    }

    private Context mContext;

    public ImageAdapter(Context ctx) {
        mContext = ctx;
    }

    @Override
    public int getCount() {
        return imageUrls.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        final ViewHolder holder;
        if (convertView == null) {
            view = LayoutInflater.from(mContext).inflate(
                    R.layout.category_list_row, parent, false);
            holder = new ViewHolder();
            holder.title = (TextView) view.findViewById(R.id.cat_title);
            holder.title.setSelected(false);
            holder.thumbnail = (ImageView) view
                    .findViewById(R.id.cat_thumbnail);
            holder.thumbnail.setSelected(false);

            view.setTag(holder);

        } else {
            holder = (ViewHolder) view.getTag();
            view=(View) convertView;
            view.setTag(holder);
        }
        HashMap<String, String> tempMap = new HashMap<String, String>();

        tempMap = CategoryItems.get(position);
        holder.title.setText(tempMap.get(TAG_NAME));
        imageLoader.displayImage(imageUrls[position], holder.thumbnail,
                defaultOptions);
                    holder.title.setOnClickListener(forItemClick);
        holder.thumbnail.setOnClickListener(forItemClick);
        return view;
    }
}
  private OnClickListener forItemClick=new OnClickListener() {

    @Override
    public void onClick(View v) {
        Toast.makeText(getActivity(), "kjsdhkfds", Toast.LENGTH_LONG).show();
    }
};

class GridImages extends AsyncTask<Void, Void, Void> {
    ProgressDialog dialog = new ProgressDialog(
            CategoryFragment.this.getActivity());

    @Override
    protected Void doInBackground(Void... params) {
        parsing();
        return null;
    }

    protected void onPreExecute() {
        dialog.setMessage("Please wait...");
        dialog.setIndeterminate(true);
        dialog.show();
    }

    protected void onPostExecute(Void unused) {
        gridView.setAdapter(new ImageAdapter(getActivity()));
        dialog.dismiss();
    }

}

private void parsing() {
    JSONParser jParser = new JSONParser();
    JSONObject json = jParser.getJSONFromUrl(url.trim());
    try {
        JSONObject Collection = json.getJSONObject(TAG_HEADER);
        Category = Collection.getJSONArray(TAG_CATEGORY);
        for (int i = 0; i < Category.length(); i++) {
            JSONObject temp = Category.getJSONObject(i);
            String id = temp.getString(TAG_ID);
            String name = temp.getString(TAG_NAME);
            String thumbnail = temp.getString(TAG_THUMBNAIL);

            HashMap<String, String> map = new HashMap<String, String>();

            map.put(TAG_ID, id);
            map.put(TAG_NAME, name);
            map.put(TAG_THUMBNAIL, thumbnail);

            CategoryItems.add(map);
        }

    } catch (JSONException e) {
        e.printStackTrace();
    }
    int i = 0;
    imageUrls = new String[CategoryItems.size()];
    for (HashMap<String, String> map : CategoryItems) {
        imageUrls[i] = map.get(TAG_THUMBNAIL).trim();
        System.out.println(imageUrls[i]);
        i++;
    }
    defaultOptions = new DisplayImageOptions.Builder().cacheInMemory()
            .showStubImage(R.drawable.logo).resetViewBeforeLoading()
            .cacheOnDisc().build();

    config = new ImageLoaderConfiguration.Builder(getActivity()
            .getApplicationContext()).defaultDisplayImageOptions(
            defaultOptions).build();
    imageLoader.init(config);
} 
```

请告诉我我做错了什么。，我找不到它。，

我无法为我的 gridView 执行 onClick 事件。

我**已经更新了我的代码现在可以工作了。但这不会是我认为的最终解决方案，因为我没有使 gridview 可点击。预计总是会有有价值的评论 Thaks @Dhaval Sodha Parmar。，**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:54:42.790

在 AsyncTask 的 onPostExecute 方法中设置适配器后，编写您的 onItemClickListener，如下所示。

```
class GridImages extends AsyncTask<Void, Void, Void> {

@Override
protected Void doInBackground(Void... params) {
    //your background task code
    return null;
}

protected void onPostExecute(Void params) {

    getActivity().runOnUiThread(new Runnable() {

    public void run() {
        //add the below line
       gridView = (GridView)getView().findViewById(R.id.gridView);

       gridView.setAdapter(new ImageAdapter(getActivity()));

       /*gridView.setOnItemClickListener(new OnItemClickListener() {

       @Override
       public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

        }
      });*/

     gridView.setOnItemSelectedListener(new OnItemSelectedListener() {

     @Override
     public void onItemSelected(AdapterView<?> arg0,View arg1, int arg2, long arg3) {
     // TODO Auto-generated method stub

     }

     @Override
     public void onNothingSelected(AdapterView<?> arg0) {
     // TODO Auto-generated method stub

     }
    });
  }
} 
```

# python - Python - 将用户可编辑字符串存储到列表中的问题

> ID：15515187
> 
> 赞同：0
> 
> 时间：2013-03-20T04:12:27.740
> 
> 标签：python, string

我无法创建一个非常简单的程序，该程序允许用户存储和编辑字符串，以列表格式查看（我几周前才开始编程）。每当我执行程序时，用户输入都不会编辑字符串。这是我的代码，下面是程序当前所做的事情，以及修补后我打算做什么（请注意，我没有收到任何错误）。

```
Code:

#Program that stores up to 5 strings

def main():
    line1="hello"
    line2=""
    line3=""
    line4=""
    line5=""
    print("[1]"+line1)
    print("[2]"+line2)
    print("[3]"+line3)
    print("[4]"+line4)
    print("[5]"+line5)
    print("")
    print("Which line would you like to edit?")
    lineChoice=''
    while lineChoice not in ('1', '2', '3', '4', '5'):
        lineChoice=input("> ")
    if lineChoice=="1":
        print("You are now editing Line 1.")
        line1=input("> ")
        main()
    if lineChoice=="2":
        print("You are now editing Line 2.")
        line2=input("> ")
        main()
    if lineChoice=="3":
        print("You are now editing Line 3.")
        line3=input("> ")
        main()
    if lineChoice=="4":
        print("You are now editing Line 4.")
        line4=input("> ")
        main()
    if lineChoice=="5":
        print("You are now editing Line 5.")
        line5=input("> ")
        main()

main() 
```

这是我的程序所做的。

```
>>> ================================ RESTART ================================
>>> 
[1]hello
[2]
[3]
[4]
[5]

Which line would you like to edit?
> 1
You are now editing Line 1.
> hello world
[1]hello
[2]
[3]
[4]
[5]

Which line would you like to edit?
> 
```

这是我打算让我的程序做的事情。

```
>>> ================================ RESTART ================================
>>> 
[1]hello
[2]
[3]
[4]
[5]

Which line would you like to edit?
> 1
You are now editing Line 1.
> hello world
[1]hello world
[2]
[3]
[4]
[5]

Which line would you like to edit?
> 
```

如果我需要提供更多信息，我愿意。

*   雅各布·登斯莫尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:19:47.680

它实际上是因为您在`main`每次重置变量时递归调用。您需要做的是用循环替换递归`main`调用`while`。尽可能少地更改您的代码，它看起来像这样（假设您使用`input`的是 3.x 并因此使用）：

```
def main():
    line1="hello"
    line2=""
    line3=""
    line4=""
    line5=""
    while True:
        print("[1]"+line1)
        print("[2]"+line2)
        print("[3]"+line3)
        print("[4]"+line4)
        print("[5]"+line5)
        print("")
        print("Which line would you like to edit?")
        lineChoice=''
        while lineChoice not in ('1', '2', '3', '4', '5'):
            lineChoice=input("> ")
        if lineChoice=="1":
            print("You are now editing Line 1.")
            line1=input("> ")
        if lineChoice=="2":
            print("You are now editing Line 2.")
            line2=input("> ")
        if lineChoice=="3":
            print("You are now editing Line 3.")
            line3=input("> ")
        if lineChoice=="4":
            print("You are now editing Line 4.")
            line4=input("> ")
        if lineChoice=="5":
            print("You are now editing Line 5.")
            line5=input("> ")

main() 
```

# gruntjs - Grunt Concat 无法写入文件

> ID：15515192
> 
> 赞同：32
> 
> 时间：2013-03-20T04:12:50.203
> 
> 标签：gruntjs

刚刚在 Ubuntu 12.04 上安装了最新的 Grunt。这是我的 gruntfile：

```
module.exports = function(grunt){
//project configuration
grunt.initConfig({
    pkg: grunt.file.readJSON('package.json'),

    concat: {
        slides :  {
            src : ['src/top.html', 'src/bottom.html'],
            dest : ['build/index.html']
        }
    }
});

//enable plugins
grunt.loadNpmTasks('grunt-contrib');
grunt.registerTask('default', ['concat:slides']);
} 
```

这会很好地创建 build/ 目录，但会给我以下输出：

> 运行“concat:slides”（concat）任务警告：无法写入“build/index.html”文件（错误代码：未定义）。使用 --force 继续。

我尝试在目录上运行 chmod 777 ，因为我认为它可能与权限有关，但这似乎并没有改变任何东西。

我怎样才能让 Grunt 写入 build/index.html？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-20T12:21:56.877

弄清楚了：

```
//Does not work
dest : ['build/index.html'] 
```

作为字符串工作，但不是数组：

```
//Works
dest : 'build/index.html' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T14:34:56.803

我更改了 tasks/concat.js 以接受 dest 数组：

```
// Write the destination file.
// If f.dest is an array take the first element
var dest  = ([].concat(f.dest))[0]
grunt.file.write(dest, src); 
```

但后来我决定使用文件形式而不是 src/dest：

```
files: { 'dest.js': ['a.js', 'b.js'] } 
```

# ios - Theos 在添加首选项包后无法编译调整

> ID：15515197
> 
> 赞同：1
> 
> 时间：2013-03-20T04:13:24.987
> 
> 标签：ios, cydia, theos

我正在尝试将首选项包添加到我正在构建的调整中。我按照[本教程](http://blog.aehmlo.com/2012/08/03/new-tweak-readme)的一部分添加了首选项包。在我尝试添加首选项包后，我的调整无法编译并出现以下错误：

```
Making all for tweak MyTweak...
 Preprocessing Tweak.xm...
 Compiling Tweak.xm...
 Linking tweak MyTweak...
 Stripping MyTweak...
 Signing MyTweak...
Making all in prefs...
Making all for bundle prefs...
 Copying resource directories into the bundle wrapper...
 Compiling prefs.mm...
cc1objplus: warnings being treated as errors
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/PrivateFrameworks/Preferences.framework/Headers/PSListController.h:9,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/PrivateFrameworks/Preferences.framework/Headers/PSLocaleController.h:8,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/PrivateFrameworks/Preferences.framework/Headers/Preferences.h:9,
                 from prefs.mm:1:
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/PrivateFrameworks/Preferences.framework/Headers/PSViewController.h:47: warning: property ‘specifier’ type does not match protocol ‘PSController’ property type
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/PrivateFrameworks/Preferences.framework/Headers/PSViewController.h:47: warning: property ‘rootController’ type does not match protocol ‘PSController’ property type
In file included from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/PrivateFrameworks/Preferences.framework/Headers/PSSetupController.h:7,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/PrivateFrameworks/Preferences.framework/Headers/PSInternationalLanguageSetupController.h:7,
                 from /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/PrivateFrameworks/Preferences.framework/Headers/Preferences.h:24,
                 from prefs.mm:1:
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/System/Library/PrivateFrameworks/Preferences.framework/Headers/PSRootController.h:71: warning: property ‘specifier’ type does not match protocol ‘PSController’ property type
make[3]: *** [obj/prefs.mm.ade1d157.o] Error 1
make[2]: *** [internal-bundle-all_] Error 2
make[1]: *** [prefs.all.bundle.variables] Error 2
make: *** [internal-all] Error 2 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:18:54.337

您的标头版本可能搞砸了，因为它们是私有框架标头，而不是官方的 Apple 标头。

两种可能的解决方案：

1.  从更好的来源重新下载标题。通常推荐使用[rpetrich 的版本。](https://github.com/rpetrich/iphoneheaders)

2.  如果这不起作用，请手动编辑标题以解决问题。找到包含`PSController`协议的头文件（可能是 PSController.h），检查`specifier`应该是什么类型，然后在`PSViewController.h`. 我相信我第一次处理 Preference Bundles 时必须做这样的事情。

# java - Android java.lang.VerifyError: com/company/project/Main

> ID：15515201
> 
> 赞同：0
> 
> 时间：2013-03-20T04:14:02.027
> 
> 标签：java, android

我完全被这个问题打败了，我看到了一些类似的问题，但没有任何帮助。我似乎无法运行几天前运行良好的应用程序。

我得到了可怕的VerifyError，并希望有人能够找出我哪里出错了。

**这是我的项目构建路径的屏幕截图**

*图书馆*

![在此处输入图像描述](../Images/64fa62ad2dc5df91fa757dce8188c64c.png)

*订购和出口*

![在此处输入图像描述](../Images/7caf90e09f77313f41bf359f601b8233.png)

**这是我的完整堆栈跟踪**

```
03-20 00:01:07.176: E/AndroidRuntime(13968): FATAL EXCEPTION: main
03-20 00:01:07.176: E/AndroidRuntime(13968): java.lang.VerifyError: com/snrblabs/bishop/Main
03-20 00:01:07.176: E/AndroidRuntime(13968):    at java.lang.Class.newInstanceImpl(Native Method)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at java.lang.Class.newInstance(Class.java:1319)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at android.app.Instrumentation.newActivity(Instrumentation.java:1054)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at android.os.Looper.loop(Looper.java:137)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at java.lang.reflect.Method.invokeNative(Native Method)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at java.lang.reflect.Method.invoke(Method.java:511)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-20 00:01:07.176: E/AndroidRuntime(13968):    at dalvik.system.NativeStart.main(Native Method) 
```

**这是我的类路径**

```
 <?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/>
    <classpathentry kind="lib" path="C:/Sources/Third Party Libraries/dom4j-1.6.1.jar"/>
    <classpathentry kind="lib" path="C:/Sources/Third Party Libraries/google-voice-java-1.10-java6.jar"/>
    <classpathentry kind="lib" path="C:/Sources/Third Party Libraries/jaxen-1.1.3.jar"/>
    <classpathentry kind="lib" path="C:/Sources/Third Party Libraries/json.jar"/>
    <classpathentry kind="lib" path="C:/Sources/Third Party Libraries/jtidy.jar"/>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="src" path="gen"/>
    <classpathentry kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>
    <classpathentry kind="output" path="bin/classes"/>
</classpath> 
```

**编辑**

所以出现这个问题是因为我正在尝试升级 google-voice-java 库，

当我使用旧库恢复到旧版本时，我很好。但是，当我尝试添加最新的 google-voice-java 库时，我收到了同样的错误。

***是的，我清理并构建了我的项目***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:14:09.017

希望这对您有所帮助，将您的所有要求`jar` `files`放在`libs`文件夹中，如果您的项目中没有 libs 文件夹，请创建它并将所有 jar 文件放在这里，然后再次从项目路径中的 libs 中选择所有文件，清理您的项目并再次构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:13:00.333

命名的类文件无效。重新编译它。清理并重建一切。

# jquery - Instagram API - 手动获取图像的“tag_id”

> ID：15515202
> 
> 赞同：2
> 
> 时间：2013-03-20T04:14:20.557
> 
> 标签：jquery, ajax, instagram

使用标签端点，返回的“分页”对象为我提供了 next_max_tag_id 和 min_tag_id 以便轻松分页，但是如何手动获取特定图像的标签 ID？

例如，我通过 AJAX 请求 25 张图片，但只显示前 10 张（因为 Instagram 在收听“count”时不会忽略私人图片）。但我希望使用我正在显示的第 10 个图像的 id 来使用自定义 next_max_tag_id。

更好的问题 - 'next_max_tag_id' 是什么？

有什么帮助吗？

# asp.net - ASP.NET MVC - 如何将子站点 (ASP.NET) 添加到我的应用程序？

> ID：15515211
> 
> 赞同：2
> 
> 时间：2013-03-20T04:15:06.017
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有一个 ASP.MVC 站点运行在`http://mysite.com`. 现在，我想向其中添加子应用程序，如此处所述：http: [//www.wiris.com/plugins/docs/ckeditor](http://www.wiris.com/plugins/docs/ckeditor)（第 2.2 点）。我尝试添加新应用程序，但它不允许我在 处添加新应用程序`http://mysite.com`，因为已经定义了一个。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:24:37.190

有两种方法可以做到这一点。

第一个是在父应用程序的子路径中创建新应用程序。所以应用程序 URL 将是[http://mysite.com/mysubsite](http://mysite.com/mysubsite)。

另一种方法是让子站点侦听不同的端口（例如端口 81）。该 URL 将是[http://mysite.com:81](http://mysite.com:81)。此解决方案的问题是用户需要知道您的站点正在侦听的端口，或者只能通过链接访问它。

# javascript - D3.js，需要在 d3.js 中点击事件

> ID：15515215
> 
> 赞同：10
> 
> 时间：2013-03-20T04:15:11.963
> 
> 标签：javascript, d3.js

我正在尝试制作一个气泡图，如果我点击一个气泡，气泡的标题应该出现在控制台中。我尝试了一些方法，但没有成功。

```
d3.json("deaths.json",
function (jsondata) {

    var deaths = jsondata.map(function(d) { return d.deaths; });
var infections = jsondata.map(function(d) { return d.infections; });
var country = jsondata.map(function(d) { return d.country; });
var death_rate = jsondata.map(function(d) { return d.death_rate; });

    console.log(deaths);
console.log(death_rate);
console.log(infections);
console.log(country);
console.log(date);

//Making chart

for (var i=0;i<11;i++)
{
var f;
var countryname=new Array();
var dot = new Array();
dot = svg.append("g").append("circle").attr("class", "dot").attr("id",i)
.style("fill", function(d) { return colorScale(death_rate[i]); }).call(position);       

//adding mouse listeners....

dot.on("click", click());
function click() 
{
     /***********************/
 console.log(country); //i need the title of the circle to be printed
     /*******************/
    }

function position(dot) 
{
dot .attr("cx", function(d) { return xScale(deaths[i]); })
    .attr("cy", function(d) { return yScale(death_rate[i]); })  
    .attr("r", function(d) { return radiusScale(infections[i]); });
dot.append("title").text(country[i]);
}
}
}); 
```

我需要打印圈子的标题请帮忙！！！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-20T07:32:27.200

`on("click", ...)`通过使用该功能，您有了一个好主意。但是我看到两件事：

*   第一个问题是您不会在单击事件上调用该函数，而是调用它的值。所以，你写`dot.on("click", click());`而不是`dot.on("click", click);`. 为了理解区别，让我们假设函数 click 需要一个参数，例如表示有趣的点，它会是什么？好吧，您将编写以下内容：

    ```
    dot.on("click", function(d){click(d)}) 
    ```

    这与写作等效（并且不易出错）：

    ```
    dot.on("click", click) 
    ```

*   现在，第二点是，您确实希望将节点作为函数的参数传递`click`。幸运的是`on`，正如我在示例中使用的那样，通过事件，函数 click 被调用，其参数`d`表示`dot`. 因此，您现在可以编写：

    ```
    dot.on("click", click);
    function click(d) 
    {
        console.log(d.title); //considering dot has a title attribute
    } 
    ```

    注意：您也可以通过编写`function click(d,i)`with 来`i`表示数组中的索引来使用另一个参数，有关更多详细信息，请参阅[文档](https://github.com/d3/d3-selection/blob/master/README.md#selection_on)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:35:17.150

如果您的数据有标题，

```
 dot.on('click' , function(d){ console.log(d.title); }); 
```

# python - 根据存储在同一列表中的其他数据，以存储在文本文件中的基本 record-jar 格式对列表进行排序和显示

> ID：15515218
> 
> 赞同：2
> 
> 时间：2013-03-20T04:15:17.767
> 
> 标签：python

我正在尝试编写一个脚本，从以这种格式存储的项目中生成一个排序列表：

&&
任务：
项目：
上下文：
DUE_DATE：
COMPLETION_DATE：
优先级：
%%

我对我正在尝试做的事情背后的逻辑有一个很好的了解，但我对 Python 很陌生，所以我正在努力实现。这是我到目前为止所拥有的：

```
import sys
import getopt

#add function
if sys.argv[1] == 'add':
    try:
        f = open("todo.txt", "added")
        try:
            f.write("TASK:" + sys.argv[2] + "\n")
            project = raw_input("Please enter the project: ")
            f.write("PROJECT:" + project + "\n")
            context = raw_input("Please enter the context: ")
            f.write("CONTEXT:" + context + "\n")
            duedate = raw_input("Please enter the due date: ")
            f.write("DUE_DATE:" + duedate + "\n")
            completiondate = raw_input("Please enter the completion date: ")
            f.write("COMPLETEION_DATE:" + completiondate + "\n")
            priority = raw_input("Please enter the priority level")
            f.write("PRIORITY:" + priority + "\n")
        finally:
            f.close()
    except IOError:
        pass

#list function
if sys.argv[1] == 'list':
    listnum = 1
    try:
        with open("todo.txt", "r") as f:
                searchlines = f.readlines()
        for i, line in enumerate(searchlines):  
                if "TASK:" in line: 
                    for l in searchlines[i:i+3]: 
                    print listnum, l[5:],   
                    listnum += listnum

    except IOError:
        pass

#complete function
if sys.argv[1] == 'complete':
    listName.pop(args[0]-1);#this pops it out and deletes it.  need to sort into order and from that list. delete that item
#by popping and it will be the -1 of the one from the list. 
```

现在，我的添加功能工作正常。我知道 argeparse(sp?) 可以让我用一行添加所有元数据，但我想我会尽可能简单。目前我的列表功能只是根据文件中的顺序列出所有项目，但它没有任何类型的过滤器功能。它也不显示 TASK: 行下方的元数据。

我想用我的列表函数做的是让默认操作根据优先级对文本文件中的所有项目进行排序。我想在同一行中接受其他搜索“标签”，并让列表函数生成一个任务列表：谁有任意数量的元数据匹配任何搜索标签，我希望过滤后的列表也按优先级排序。

我在想的是使用字母标签作为优先级（A、B 等）并遍历文件中的每个条目。然后，我会将任务名称和所有元数据与每个过滤器标签进行比较。如果发生匹配，我会检查优先级，如果优先级为“A”，则显示条目。如果优先级不是“A”，但发生匹配，我会让某种布尔标志变为 1，让我知道程序在寻找下一级优先级时需要再次遍历列表。

我不知道该怎么做的事情：

1.  遍历列表并查找匹配项，然后查看优先级。
2.  使用 TASK 显示过滤或未过滤的列表：枚举行和所有其他行缩进和未枚举。
3.  一旦显示特定过滤器的所有有效列表候选者，如何让程序停止遍历列表
4.  不要让以前显示的条目触发导致程序继续寻找更多条目的布尔值。
5.  如果可能的话，我想完成寻找给定的任务名称，如果找到，删除任务名称和文本文件中接下来的 6 行。

感谢您提供任何帮助！

# c - 如何增加数组中变量的值（C 编程）

> ID：15515231
> 
> 赞同：0
> 
> 时间：2013-03-20T04:17:10.083
> 
> 标签：c, arrays, variables, increment

在过去的一个小时左右，我一直在摆弄我的代码，但我似乎无法让它按照我想要的方式工作。我一直在阅读有关数组是固定状态的想法，但老实说，我只是从这个小实验中筋疲力尽，非常感谢一些帮助。

基本上我想要做的是获取我声明的三个温度传感器读数并将它们集中到一个数组中。从那时起，我希望能够增加数组中每个变量的值，具体取决于用户选择的当前通道。

**因此，如果用户在通道 0 上，并且他们按 R，我希望使用以下代码块增加 temperatureSensor1Reading。**请忽略我知道这不是整个代码的不完整性，但这目前隔离了我的问题。

temperature_t 是我之前声明的 typedef。该程序没有给我任何错误，但是当我按 R 或 F（递增或递减）时它不执行任何操作。我刚刚突出显示了反映我的目标的代码块。提前感谢您的帮助！

```
temperature_t selectChannel = 0;
temperature_t temperatureSensor1Reading = 75;
temperature_t temperatureSensor2Reading = 75;
temperature_t temperatureSensor3Reading = 75;
temperature_t temperatureSensorReadings[3] = {temperatureSensor1Reading, temperatureSensor2Reading, temperatureSensor3Reading};

case 'R': //if user input is R
case 'r'://if user input is r

    temperatureSensorReadings[selectChannel] ++;

break; //exits loop 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T04:20:41.583

您的数组仅包含创建数组时变量值的副本。当您更改数组时，您只是在更改它，而不是从中复制值的变量。*您可以通过使数组不保持温度而是指向*温度的指针来实现您想要做的事情：

```
temperature_t *readings[] = {&temp1, &temp2, &temp3};
// ...later...
(*readings[channel])++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:23:36.727

您在这里被“按值传递”和“按引用传递”固定。@icktoofay 的答案是正确的。他用“按引用传递”替换了您的“按值传递”。

# pagination - 无法让 Meteor-Pagination 工作

> ID：15515234
> 
> 赞同：0
> 
> 时间：2013-03-20T04:17:24.507
> 
> 标签：pagination, meteor

我正在尝试向我的流星应用程序添加分页支持，但是一旦我在模板中添加 {{{pagination}}} 标记，我的模板就会显示一个空白页面。日志中没有错误。

我的客户端 js（路由信息）看起来像这样

```
Meteor.Router.add({
  '/': function () {
  var user;

  if (Meteor.loggingIn()) {
   console.log('home: loading');
   return 'loading';
  }

 user = Meteor.user();
 if (!user) {
  console.log('homer: signin');
  return 'user_signin';
 }

  // start on 'start' page
  console.log('home: start');
  return 'page';
  },

  '/landing':       'landing',
  '*':              'not_found',

  '/landing/:page': function (page) {
   Session.set('page', page) ;
   return 'landing' ;
  }
  }); 
```

我的 Landing.js 看起来像这样

```
 Template.userList.pagination = function () {
  return Pagination.links('/landing', Meteor.users.find({}).count(), {currentPage: Session.get('page'), perPage: 8}) ;
 } 
```

我的登陆模板如下：

```
 </thead>
                      <tbody>
                        {{#each users}}
                          {{> user}}
                        {{/each}}
                        {{{pagination}}}
                      </tbody>
                  </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:40:03.487

我在发布的代码中看到了几件事。

1.  我对 Pagination 插件了解不多，但看起来您将它放在 table 标记内，并根据此（[https://github.com/egtann/meteor-pagination](https://github.com/egtann/meteor-pagination)）呈现一个 div。我相信那将是无效的。
2.  在您的路线中，您`'*'`在`'landing/:page'`. 我相信它会首先匹配那个。应该`'*'`是您添加的最后一条路线。

# java - 使用 Ajax 上传文件 - 没有获得完整的文件名

> ID：15515244
> 
> 赞同：0
> 
> 时间：2013-03-20T04:18:40.650
> 
> 标签：java, javascript, jquery, file-upload

这是一个很常见的问题，但我找不到答案

我有一个带有输入文本框（类型=文件）和提交按钮的简单 HTML。单击提交按钮时，我调用了一个 js 函数，在其中尝试获取文件的完整路径

```
var data = $('#fileName').val(); 
```

问题是我没有得到我正在上传的文件的完整文件路径。我知道由于安全原因，chrome 给了我一个`C:\fakePath\filename`，而 firefox 只给了我`fileName`. 但是如果我需要一条完整的路径，我该怎么办？

PS：此外，我将进行 ajax 调用并将该文件路径提供给需要它使用 FileReader 读取该文件的后端

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T04:20:39.250

您无法获得完整的路径！没有办法做到这一点！即使您在 Intranet 上并且您有足够的权限。

解决方法是设置一个`textarea`并要求用户输入文件的完整路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:43:50.900

简而言之，一旦在服务器端加载文件，您就不能拥有文件的全名，您只会在原始`byte`数组中拥有文件名及其内容（以及其他属性）。这不是 Java*问题*，也不是其他服务器端技术问题，与浏览器实现有关（但看起来[IE6 可能包含这方面的缺陷](http://commons.apache.org/proper/commons-fileupload//faq.html#whole-path-from-IE)）。

与您的问题没有直接关系，但引起了我的注意

> PS：此外，我将进行 ajax 调用并将该文件路径提供给需要它使用 FileReader 读取该文件的后端

通常，您*无法*使用 ajax 处理文件上传，因为它可能导致安全漏洞。尽管如此，仍有一些浏览器（如 Chrome 和 Firefox）允许您使用[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest?redirectlocale=en-US&redirectslug=XMLHttpRequest)发送文件，但在某些浏览器（如 IE8-）上不允许这样做，因此您必须使用 iframe 才能使*文件 ajax 上传*工作。

为了避免处理所有这些问题，我建议您使用处理 ajax 文件上传的第三方 js 库。一个例子是[blueimp jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)，它也有[Java 服务器端的例子](https://github.com/blueimp/jQuery-File-Upload/wiki#java)（免责声明：我不在这个项目中工作，也没有以任何方式与 blueimp 相关联）。请注意，使用此插件需要您对 HTML/JavaScript/jQuery/Java 服务器端有一定的了解，因此如果您是初学者，可能需要一些时间才能使其工作，但一旦完成就非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:37:59.557

Browsers block the filepath access on javascript for securit reasons.

The behavior makes sense, because the server doesn't have to know where the user stores the file on his computer, it is irrelevant to the upload process.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T04:34:31.533

我不知道您使用的是哪种技术.. 但是一旦文件上传到服务器上，您总是可以获取文件名（使用 php 或 .net ）

您上传的步骤应如下所示：

1) 将文件上传到服务器 (ez /uploadedFiles/...filename 2) 创建一个从上传路径获取文件名的方法 3) 只需将文件名插入数据库（这将使您可以灵活地更改文件夹名称如果需要，将来上传的文档）

通常文件名不会按原样存储。以避免将来发生名称冲突。因此，建议始终通过在文件名后添加分钟和秒来重命名文件名。

如果有任何疑问，请询问。

希望能帮助到你。

# ios - 带有多个参数的 Shopify Products API 调用

> ID：15515245
> 
> 赞同：2
> 
> 时间：2013-03-20T04:18:47.203
> 
> 标签：ios, shopify

我正在使用 Shopify API。我们有一个自定义集合，其中包含两种产品用于测试。我在移动平台上工作，所以我想限制我需要提取的数据量。因此，我想按集合获取所有产品（用于在应用程序内排序），并且只有自应用程序上次检查 shopify 以来它已更新。

我可以这样更新所有产品：

```
https://VAR1:VAR2@MYSHOPIFY/admin/products.json?updated_at_min=updatedTime 
```

我还可以像这样获取集合中的所有产品：

```
https://VAR1:VAR2@MYSHOPIFY/admin/products.json?collection_id=cID 
```

但是，当我将它们放在一起时：

```
https://VAR1:VAR2@MYSHOPIFY/admin/products.json?updated_at_min=updatedTime&collection_id=cID 
```

我得到“无效的查询”。无论如何将两个参数传递给 Shopify API？

# ios - UISwipeGestureRecognizer 没有响应 Up

> ID：15515248
> 
> 赞同：1
> 
> 时间：2013-03-20T04:19:00.110
> 
> 标签：ios, objective-c

我有以下`UIGestureRecognizer`检测正确向上滑动

```
- (void) addGestureRecognizer {
    _swipeRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(didSwipe:)];
    [_swipeRecognizer setDirection:UISwipeGestureRecognizerDirectionUp];
    [_swipeRecognizer setDelegate:self];
    [self.view addGestureRecognizer:_swipeRecognizer];
}

- (void) didSwipe:(id)sender{
    NSLog(@"didSwipe");
} 
```

然后我修改了方向以包括左和右

```
[_swipeRecognizer setDirection:UISwipeGestureRecognizerDirectionUp|UISwipeGestureRecognizerDirectionLeft|UISwipeGestureRecognizerDirectionRight]; 
```

它不再响应向上滑动（向左或向右滑动有效）。我究竟做错了什么？（在模拟器、iphone5、ipad3上试过）

**注意**：我不需要检测滑动的实际方向。我只需要知道有一个滑动。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:24:19.417

试试这个方法

```
 UISwipeGestureRecognizer *_swipeRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(didSwipe:)];
    [_swipeRecognizer setDirection:UISwipeGestureRecognizerDirectionLeft|UISwipeGestureRecognizerDirectionRight];
    [_swipeRecognizer setDelegate:self];
    [self.view addGestureRecognizer:_swipeRecognizer];

    _swipeRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(didSwipe:)];
    [_swipeRecognizer setDirection:UISwipeGestureRecognizerDirectionUp|UISwipeGestureRecognizerDirectionDown];
    [_swipeRecognizer setDelegate:self];
    [self.view addGestureRecognizer:_swipeRecognizer]; 
```

**编辑**

正如@LearnCocos2D 所[建议](https://stackoverflow.com/questions/7420078/detect-when-uigesturerecognizer-is-up-down-left-and-right-cocos2d/7760927#7760927)的那样 “*显然每个 UISwipeGestureRecognizer 只能检测到给定方向的滑动。即使方向标志可以 OR'ed 在一起，UISwipeGestureRecognizer 也会忽略其他标志。* ”

并且根据您的“**注意**：*我不需要检测滑动的实际方向。我只需要知道有滑动。* ”，您只需要检测滑动而不是方向，因此将左右组合为一个和向上-down 作为其他手势将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:23:48.980

swipeGesture 是谨慎的手势，上下滑动是两种不同的手势。您必须创建 4 个手势并将其发送到一个操作。

```
- (void) addGestureRecognizer {
    UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(didSwipe:)];
    [swipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
    [swipeLeft setDelegate:self];
    [self.view addGestureRecognizer:swipeLeft];

    UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(didSwipe:)];
    [swipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
    [swipeRight setDelegate:self];
    [self.view addGestureRecognizer:swipeRight];

}

- (void) didSwipe:(UISwipeGestureRecognizer *)sender{
    NSLog(@"didSwipe");
} 
```

# sproutcore - notify() 在 IE8 中不起作用

> ID：15515252
> 
> 赞同：0
> 
> 时间：2013-03-20T04:19:31.333
> 
> 标签：sproutcore

我正在开发基于 Sproutcore 1.9.1 的网络应用程序。要从服务器检索数据，它会发出 SC.Request.getUrl() 请求，该请求在除 IE8 之外的所有浏览器中都可以正常工作。对于 IE8 的请求是这样的：

```
 SC.Request.getUrl("'http://example.com/some/path')
    .set('isJSON', YES)
    .async(false)        // made async false to work in IE
    .notify(this, 'someMethodDidComplete', {  query: query, store: store})
    .send();

works fine. But when the request is :

    SC.Request.getUrl("'http://example.com/some/path')
    .set('isJSON', YES)
    .notify(this, 'someMethodDidComplete', {  query: query, store: store})
    .send();

it works fine for other browsers but for IE8, it is not working. After spending some 
time with the issue i found out that the finishrequest() is not invoking. For doing so 
what I did is made 'asynchronous false' and then it works.  Now I don't know what to do. 
Please suggest me something on this and  why normal request is not working.
thanks in advance. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:11:46.983

这个问题是已知的（[https://github.com/sproutcore/sproutcore/issues/866](https://github.com/sproutcore/sproutcore/issues/866)）并且似乎已经修复，至少在 SC master 上是这样。

作为旁注，您包含查询并存储在对象中作为 .notify() 的参数。您不需要这样做，您可以简单地将它们包含为额外参数，并且您的通知函数将使用这些额外参数调用：

```
.notify(this,this.notifier,query,store) 
```

和文件中的其他地方：

```
notifier: function(result,query,store){ } 
```

# android - Canvas HTML5 不能在 Ecllipse 中拖放图像？

> ID：15515253
> 
> 赞同：1
> 
> 时间：2013-03-20T04:19:31.947
> 
> 标签：android, html, drag-and-drop, html5-canvas, android-canvas

我是 HTML5 的新手。我无法在 Eclipse 中拖放。此功能在浏览器中运行。

请有人帮助我。提前致谢。

```
<!DOCTYPE HTML>
<html>
<head>
<style type="text/css">
#div1 {
    width: 350px;
    height: 70px;
    padding: 10px;
    border: 1px solid #aaaaaa;
}
</style>
<script>
    function allowDrop(ev) {
        ev.preventDefault();
    }
    function drag(ev) {
        ev.dataTransfer.setData("Text", ev.target.id);
    }
    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("Text");
        ev.target.appendChild(document.getElementById(data));
    }
</script>
</head>
<body>
    <p>Drag the image into the rectangle:</p>
    <div id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
    <br>
    <img id="drag1" src="ic_launcher.png" draggable="true"
        ondragstart="drag(event)" width="336" height="69">
</body>
</html> 
```

# c++ - 用C++“挂钩”一个内存地址？

> ID：15515259
> 
> 赞同：0
> 
> 时间：2013-03-20T04:20:04.563
> 
> 标签：c++, c

当单个静态内存地址达到特定值时，挂钩更改的可靠性如何？

我习惯做的是从基本的 c++ 应用程序中使用读/写内存，尽管我发现有时这对于每秒更改 1000 次以上的地址并不可靠。很多时候，我的应用程序无法通过 case 函数及时捕获地址处的值，从而将其更改为另一个值。这个挂钩的概念究竟是如何工作的，它是否错过了价值变化？我正在使用 Win 7 Ult。x86

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:28:24.367

（重复使用我对一个我认为相关的问题给出的答案，但结果并非如此。）

有一些特定于环境的方法可以检测变量何时更改。您可以使用 MMU 访问控制标志（通过 mprotect 或 VirtualProtect）在第一次写入时生成异常，并从处理程序内部设置脏标志。（几乎每个现代操作系统都使用内存映射文件来执行此操作，以确定是否需要将其写回磁盘）。或者您可以使用硬件断点来匹配对该地址的写入（调试器使用它在变量上实现断点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:21:06.943

挂钩可以通过多种方式完成。大多数要求您在目标进程中有代码，使 ReadProcessMemory 过时（只需使用指针并取消引用它们）。如果你想挂钩，虽然你可以这样做：找出哪些指令写入该地址（调试器内存断点），它很可能是一个函数，所以我通常做的只是在开头附近修补一些字节要将执行流程重定向到我的代码，每次调用该函数时都会执行它，我有时也会更改堆栈上的返回地址，以便我可以检查和控制返回值以及执行我想要执行的代码函数完成后（例如，从堆栈中获取一些信息，因为我要么懒得挖掘用于存储它的结构，要么如果它'

# jxl - JXL 柱跨度

> ID：15515263
> 
> 赞同：2
> 
> 时间：2013-03-20T04:20:13.087
> 
> 标签：jxl

我的 excel 中有多行，除了第一行之外，其中的内容都很小。只是为了在第一行插入一个大标题，我不希望后续行的宽度受到影响。有没有一种方法可以将顶行中的内容跨越多列而不影响后续行的宽度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-20T14:31:41.737

是的，通过使用 WritableSheet.mergeCells 方法。

例如：

```
WritableWorkbook w = Workbook.createWorkbook(outputStream);
WritableSheet s = w.createSheet("MySheet", 0);
int row = 0;

WritableCell titleCell = new Label(0, row, "Hello World");
s.addCell(titleCell);
s.mergeCells(0, row, 13, row); 
```

这具有使第一行为 13 个单元格宽的效果，并且不会影响后续行的单元格宽度。请注意，这将允许您合并行，但这不起作用。更改行高的正确方法是：

```
/* Row heights are in 20ths of a point */
int fontPointSize = 16;
int rowHeight = (int) ((1.5d * fontPointSize) * 20);
s.setRowView(row, rowHeight, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-30T14:23:11.550

这是可能的，玩这个。希望它会帮助你。

```
int col1 = 0;
int col2 = 2;
int row1 = 0;
int row2 = 0;

WritableWorkbook workbook = Workbook.createWorkbook(outputStream);
WritableSheet sheet = workbook.createSheet("MySheet", 0);
sheet.mergeCells(col1,row1,col2,row2); 
//This makes the cell at row1 and col1 span the next two cells
//Write content at the marge cell
sheet.addCell(new Label(col1,row1,"Content here")); 
```

参考文献： [第一次参考](http://jexcelapi.sourceforge.net/resources/javadocs/2_6_10/docs/jxl/write/WritableSheet.html)和[第二次参考](http://bethecoder.com/applications/tutorials/excel/jexcel-api/how-to-merge-cells-in-excel-spreadsheet.html)

# javascript - 使用 javascript 重置 FreeTextBox 编辑器

> ID：15515274
> 
> 赞同：1
> 
> 时间：2013-03-20T04:21:04.490
> 
> 标签：javascript, asp.net, .net

我正在使用第三方开源 FreeTextbox (FTB) 编辑器，我想使用 javascript 重置文本框或使文本框为空。

//HTML

```
<FTB:FreeTextBox ID="FreeTextBox1" BreakMode="LineBreak" DesignModeCss="~/FreeTextBox/DesignMode.css" Width="780px" Height="210px" AutoParseStyles="False" FormatHtmlTagsToXhtml="False" HtmlModeDefaultsToMonoSpaceFont="True" ClientIDMode="Static"></FTB:FreeTextBox>

<input type="button" value="Reset" id="buttonReset" runat="server" clientidmode="Static" />

<script language="javascript">

$("#buttonReset").bind('click', function () {
          // Need the code here
});

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T04:27:16.263

首先你必须找到控件，然后重置它。

//代码

```
$("#buttonReset").bind('click', function () {
            if (FTB_API != null) {
                objFTBControl = FTB_API['FreeTextBox1'];
                if (objFTBControl) {
                    objFTBControl.SetHtml("");
                }
            }     
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:28:36.210

试试这个它会工作......

```
$("#buttonReset").bind('click', function () { 
     if (FTB_API != null) {
          objFTBControl = FTB_API['FreeTextBox1'];
          if (objFTBControl) {
                 objFTBControl.SetHtml("");
          }
     }             
 }); 
```

# asp.net - 在gridview中访问选中的复选框

> ID：15515279
> 
> 赞同：1
> 
> 时间：2013-03-20T04:21:23.487
> 
> 标签：asp.net, gridview

我有一个gridview，我在每行中使用复选框。我试图访问每一行的复选框并试图找出哪些复选框已被选中。但是当我尝试运行下面的代码时。条件总是为假，并且代码永远不会达到内部 if 条件。亲切帮助我。提前谢谢。

```
protected void btn_3id_Click(object sender, EventArgs e)
{
    string str = "";
    string srr = "";
    for (int i = 0; i < GridView1.Rows.Count;i++ )
    {
       CheckBox chk = (CheckBox)GridView1.Rows[i].FindControl("CheckBox1");
       if (chk.Checked==true)     
       {         
           if (str == "")    
           {
              str = GridView1.Rows[i].Cells[0].Text.ToString();
           }     
           else     
           {         
              srr = str + "," + GridView1.Rows[i].Cells[0].Text.ToString();  
           } 
        }
    }
    Session["Card_id"] = str;
    Response.Redirect("ID.aspx");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:36:08.290

代码看起来不错。
问题可能是您在页面加载时绑定了gridview。
在页面加载的以下部分尝试网格绑定

```
if(!Page.IsPostBack)
{
  //code to bind the gridview

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:35:48.873

我只能猜测您`gridview`在没有检查 PostBack 的情况下绑定每个页面加载。这导致复选框失去其当前状态。因此，在将 DataSource 分配给 Gridview 的位置，请检查 PostBack，例如：

```
if(!Page.IsPostBack)
{
   GridView1.DataSource = yourDataSource;
   GridView1.DataBind();
} 
```

你也可以对你的代码做一些小的改进，比如你的检查：

```
if(chk.Checked == true) 
```

可以替换为：

```
if(chk.Checked) //Since it returns a bool value. 
```

您可以省略多个字符串变量进行连接。如果您使用[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)会更好，*（看看[为什么更好](https://stackoverflow.com/questions/4191079/stringbuilder-vs-string-concat)）*所以您的代码将是：

```
protected void btn_3id_Click(object sender, EventArgs e)
{
    StringBuilder sb  = new StringBuilder();
    for (int i = 0; i < GridView1.Rows.Count;i++ )
    {
       CheckBox chk = (CheckBox)GridView1.Rows[i].FindControl("CheckBox1");
       if (chk.Checked==true)     
       {         
              sb.Append() GridView1.Rows[i].Cells[0].Text.ToString();
       }     
    }
    Session["Card_id"] = sb.ToString();
    Response.Redirect("ID.aspx");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:13:52.437

```
if(!Page.IsPostBack)
{
  //
} 
```

Postback 在 cs 文件中起着重要的作用。如果您在页面加载时清除值，您会将复选框的值设为空。你的代码很好。尝试这样做...

# html - 循环通过 JSON 将结果放入 HTML

> ID：15515280
> 
> 赞同：0
> 
> 时间：2013-03-20T04:21:25.660
> 
> 标签：html, arrays, json

我刚从 JSON 和 JavaScript 开始，在解析 JSON 结果时遇到了一些困难。这是因为在剧集数组中有一个变量数组，其中包含我想要的 JSON。所以如果我是对的，这是一个数组中的一个数组。

示例代码：

```
{
   "description":"This is a description",
   "banner":"This is a banner",
   "episodes":{
      "15":[
         {
            "id":"28685",
            "active":1,
            "lang":"en",
            "link":"http:\/\/link.com\video.php?hd=1"
         }
      ],
      "14":[
         {
            "id":"28577",
            "active":1,
            "lang":"ru",
            "link":"http:\/\/link.com\video.php?hd=1"
         }
]}; 
```

“15 和 14”是剧集编号，id、active、lang 和 links 是该剧集的属性。

因此，在 HTML 中，我想将其显示为一个组。任何人都可以帮我解决这个问题，因为我在 JQuery 页面上找不到任何结果如何获取那些可变的剧集编号数组名称。

也许是为了让它更清楚一点。这是我的 JSON 源，我想从中创建一个视频页面。它列出了所有这些带有属性的剧集。我打算把它和 twitter bootstrap 库放在一起。描述是“电视连续剧的描述”横幅用于横幅图像，上面的列表是第 15 集和第 14 集。我希望能够点击这样的剧集链接。唯一认为我很难在不同的对象中将它们全部分开：完整的 json： http: [//pastie.org/6635498](http://pastie.org/6635498)

如果Json更新它也更新html，它需要以这种方式动态，这样我就不能对“15”进行静态引用

一些快速的 html 我已经成为目标的想法： http: [//pastie.org/6635571](http://pastie.org/6635571)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:27:28.817

使用 jquery，您可以将您的 json 字符串（假设它是一个有效的 json 字符串）转换为 javascript 对象，如下所示：

```
var jsonObj =  $.parseJSON('{
   "description":"This is a description",
   "banner":"This is a banner",
   "episodes":{
      "15":[
         {
            "id":"28685",
            "active":1,
            "lang":"en",
            "link":"http:\/\/link.com\video.php?hd=1"
         }
      ],
      "14":[
         {
            "id":"28577",
            "active":1,
            "lang":"ru",
            "link":"http:\/\/link.com\video.php?hd=1"
         }
]}'); 
```

从这里您可以像这样访问 javascript 中的 json 数据（例如第 15 集的 id）：

```
var episode15id = jsonObj['episodes']['15']['id']; 
```

然后通过javascript魔术你可以把它放到你的html中：

html:

```
<div id="jsondatahere" ></div> 
```

js：

```
$("#jsondatahere").html(episode15id); 
```

# mysql - 为什么这个简单的查询需要很长时间才能执行并执行全表扫描？

> ID：15515285
> 
> 赞同：-1
> 
> 时间：2013-03-20T04:22:17.533
> 
> 标签：mysql, sql, performance, query-performance

简单查询需要大约 630 秒才能执行全表扫描。请帮我重写查询并建议我是否需要添加任何索引。

询问：

```
mysql> explain SELECT count(DISTINCT(tab1.idnum)) as totalresults FROM (`tab1`) LEFT JOIN `tab2` ON tab2.idnum = tab1.col1id WHERE tab1.userid = '165258' AND `result` = 'correct' AND tab2.department = 'DEPT1' AND tab2.book = 2096 AND `quarantined` = 0; 
```

解释计划：

```
+----+-------------+--------------+--------+------------------------------------+---------+---------+---------------------------+-------+-------------+
| id | select_type | table        | type   | possible_keys                      | key     | key_len | ref                       | rows  | Extra       |
+----+-------------+--------------+--------+------------------------------------+---------+---------+---------------------------+-------+-------------+
|  1 | SIMPLE      | tab1 | ref    | userid,col1id,result,userid_status | userid  | 4       | const                     | 14720 | Using where |
|  1 | SIMPLE      | tab2 | eq_ref | PRIMARY                            | PRIMARY | 4       | comp1.tab1.col1id |     1 | Using where |
+----+-------------+--------------+--------+------------------------------------+---------+---------+---------------------------+-------+-------------+
2 rows in set (0.00 sec) 
```

表结构：

```
mysql> show create table tab1\G
*************************** 1\. row ***************************
       Table: tab1
Create Table: CREATE TABLE `tab1` (
  `idnum` int(11) NOT NULL AUTO_INCREMENT,
  `questid` int(11) NOT NULL DEFAULT '0',
  `userid` int(11) NOT NULL DEFAULT '0',
  `col1id` int(11) NOT NULL DEFAULT '0',
  `result` enum('correct','incorrect') NOT NULL DEFAULT 'def1',
  `answergiven` varchar(35) NOT NULL DEFAULT '0',
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `status` enum('calibrating','normal') NOT NULL DEFAULT 'def2',
  `quarantined` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`idnum`),
  KEY `questid` (`questid`),
  KEY `userid` (`userid`),
  KEY `col1id` (`col1id`),
  KEY `result` (`result`),
  KEY `userid_status` (`userid`,`status`),
  KEY `questid_status` (`questid`,`status`),
  KEY `timestamp` (`timestamp`)
) ENGINE=InnoDB AUTO_INCREMENT=143018786 DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

mysql> show create table tab2\G
*************************** 1\. row ***************************
       Table: tab2
Create Table: CREATE TABLE `tab2` (
  `idnum` int(11) NOT NULL AUTO_INCREMENT,
  `userid` int(11) NOT NULL DEFAULT '0',
  `timestarted` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `timefinished` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `questionlist` mediumtext NOT NULL,
  `topics` mediumtext NOT NULL,
  `totalnum` int(11) NOT NULL DEFAULT '0',
  `completednum` int(11) NOT NULL DEFAULT '0',
  `assignment` int(11) NOT NULL DEFAULT '0',
  `department` varchar(255) NOT NULL DEFAULT '',
  `book` int(11) NOT NULL DEFAULT '0',
  `cqs` mediumtext NOT NULL,
  `metatype` varchar(25) DEFAULT 'topic',
  PRIMARY KEY (`idnum`),
  KEY `userid` (`userid`),
  KEY `assignment` (`assignment`)
) ENGINE=InnoDB AUTO_INCREMENT=13547403 DEFAULT CHARSET=latin1
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:31:45.767

您需要一个多列索引，即。同时跨越 tab1 中的 userid 和 col1id 的一个。尝试：

```
create index idx_usr_col1 on tab1(userid,col1id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T05:56:00.600

尝试为 MySQL 添加多列索引以供使用：

```
ALTER TABLE `tab2` ADD INDEX idx_col1id_userid_result_quarantined (`col1id`, `userid`, `result`, `quarantined`);

ALTER TABLE `tab1` ADD INDEX idx_department_book (`department`, `book`); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T07:51:06.007

尝试这个：

```
SELECT count(distinct result.idnum)) as totalresults FROM `tab1` as result
inner join (select distinct idnum from `tab2` where department = 'DEPT1' and book = 2096 ) as col11 ON col11.idnum = result.col1id
 WHERE result.userid = '165258' AND `result` = 'correct'  AND `quarantined` = 0; 
```

# ruby-on-rails - Ruby on Rails - 如何在 url 中使用破折号而不是下划线？

> ID：15515291
> 
> 赞同：1
> 
> 时间：2013-03-20T04:23:24.747
> 
> 标签：ruby-on-rails

当我运行它时，`rails generate controller Pages index sample_page`它创建了我的两个控制器。我可以在 处看到页面`localhost:3000/sample_page`，但是如何将其更改为在 url 中显示破折号而不是下划线，即：`localhost:3000/sample-page`

Rails 不喜欢用破折号创建控制器，所以我必须使用下划线。我需要在 routes.rb 文件中添加什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T07:16:46.887

在路由中使用路径

```
resources :pages do
  collection do
    get :contact_us, path: "contact-us"
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T04:31:10.333

请注意，您可能应该只为您的页面创建一个控制器。

要回答您的问题，您可以执行一些自定义路线，例如：

```
 match '/about-us' => 'pages#about'
  match '/contact-us' => 'pages#contact'
  match '/terms-and-conditions' => 'pages#terms' 
```

# regex - 检查没有 http 和“.com”的 url

> ID：15515292
> 
> 赞同：0
> 
> 时间：2013-03-20T04:23:26.600
> 
> 标签：regex

我想检查给定的网址是否有效。

它应该接受：

```
www.gmail.com 
```

并且应该拒绝：

```
www.gmail 
```

我试过用这个`/((ftp|http|https):\/\/)?(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/`

它可以工作，但如果给定的输入是`www.gmail`它确实接受它。

有任何想法吗？

**更新**

[http://jsfiddle.net/aabanaag/VktaX/](http://jsfiddle.net/aabanaag/VktaX/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:25:01.570

试试这个。它对我有用

```
<script type="text/javascript">
    function validate() {
        var url = document.getElementById("url").value;
        var pattern = new RegExp("^(http:\/\/www.|https:\/\/www.|ftp:\/\/www.|www.){1}([0-9A-Za-z]+\.)");
        if (pattern.test(url)) {
            alert("Url is valid");
            return true;
        } 
            alert("Url is not valid!");
            return false;

    }
</script> 
```

在 jQuery 中

你可以使用 url 验证

```
<input type="text" class="url"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:29:20.690

您可以为此使用 Jquery Validate 插件。

```
$("#myform").validate({
  rules: {
    field: {
      required: true,
      url: true
    }
  }
}); 
```

[你可以在这里](http://docs.jquery.com/Plugins/Validation/Methods/url)找到它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:41:17.750

解决了我的问题：

在网上搜索时发现了这个。

```
 /^(http:\/\/www.|https:\/\/www.|ftp:\/\/www.|www.){1}[0-9A-Za-z\.\-]*\.[0-9A-Za-z\.\-]*$/

var pattern1 = /^(http:\/\/www.|https:\/\/www.|ftp:\/\/www.|www.){1}[0-9A-Za-z\.\-]*\.[0-9A-Za-z\.\-]*$/;

var result = "www.gmail";

if (pattern1.test(result)) {
    console.log("test");
}else{
    console.log("fail");
} 
```

它效果最好。

# codeigniter - 刷新或重置codeigniter活动记录而不在构建后执行？

> ID：15515293
> 
> 赞同：4
> 
> 时间：2013-03-20T04:23:28.173
> 
> 标签：codeigniter, activerecord

实际上我在stackoverflow本身看到了一些建议，但没有得到这个问题的确切解决方案，请不要认为这是重复的。

我正在为我的 codeigniter 站点和活动记录使用 memcache 来构建查询。我正在使用

```
 this->db->return_query_string(); 
```

在执行之前从活动记录中获取查询。现在我想刷新活动记录而不执行相同的查询。

也来自各种参考

```
 $this->db->start_cache();
     $this->db->stop_cache();
     $this->db->flush_cache() 
```

可能做的工作是这个确切的结果吗？如果是这样，我如何在不执行的情况下获取缓存的查询

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T04:33:02.550

您可以根据需要使用这两个功能

```
public function _compile_select($select_override = FALSE)
public function _reset_select() 
```

要使用它们，您必须删除公共或私人关键字。
转到 system/database/DB_active_rec.php 从这些函数中删除 public 或 protected 关键字

示例用法

```
$this->db->select('trans_id');
$this->db->from('myTable');
$this->db->where('code','B');
$subQuery = $this->db->_compile_select();

$this->db->_reset_select(); 
```

$subQuery 包含查询字符串，_reset_select 重置活动记录，以便您可以编写新查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-13T10:07:06.567

从 CodeIgniter 3.x 开始，您可以：

```
$subQuery = $this->db
    ->select('trans_id')
    ->where('code', 'B')
    ->get_compiled_select('myTable'); 
```

# java - 从 Java 调用 python

> ID：15515298
> 
> 赞同：4
> 
> 时间：2013-03-20T04:24:10.637
> 
> 标签：java, python

我正在为我公司的内部工具包构建一个前端。一半的工具是用 python 编写的，另一半是用其他几种脚本语言编写的。所以我正在使用swing在java中构建一个前端。到目前为止，我可以通过以下代码调用 python 脚本：

```
public class Foo
{
    public static void main(String[] args)
    {
        try
        {
            Runtime r = Runtime.getRuntime();
            Process p = r.exec("python foo.py");
            BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
            p.waitFor();
            String line = "";
            while (br.ready())
                System.out.println(br.readLine());

        }
        catch (Exception e)
        {
        String cause = e.getMessage();
        if (cause.equals("python: not found"))
            System.out.println("No python interpreter found.");
        }
    }
} 
```

效果很好，但是如果 python 脚本遇到任何错误，它就不会打印出来。我怎样才能确保它也打印出它有的任何错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T04:26:53.840

简单的答案是也阅读`Process.getErrorStream`。

更复杂的答案是，您所说的 Python 可能是指 CPython，它只是该语言的一种实现。还有另一个实现，Jython，它基本上将 Python 编译成 Java 字节码，以便在 JVM 上运行。这将允许更紧密的集成，而不是简单地通过 Java 调用 CPython`Runtime.exec`

PS`Runtime.exec`是一种古老的做事方式。`ProcessBuilder`在 Java 中启动子进程通常是一种更简洁、更直观的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:37:07.710

prevois 的答案是好的，这里建议您应该释放 Process 的任何资源，例如：

```
 Process process = null;
    try{
        //xxxx
    }catch(xxx){

    }finally{
        if(process!=null){
            process.destroy();
        }
    } 
```

原因是如果你忘记销毁进程，涉及的文件处理程序会泄漏，你最终会得到一个 IOException 显示打开的文件太多。

# google-app-engine - 如何在应用引擎python中检查请求是https

> ID：15515299
> 
> 赞同：1
> 
> 时间：2013-03-20T04:24:18.947
> 
> 标签：google-app-engine, python-2.x

我想知道是否有办法验证请求（比如 POST 或 GET）是通过 https 发出的，

我需要在*webapp2.RequestHandler*中检查这一点，以使每个不是通过 https 发送的请求都无效

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:22:42.300

检查 self.request.environ['HTTPS'] == 'on' # 或 'off'。如果您只使用 https，请考虑使用`secure:always`如下`app.yaml`：

```
handlers:
- url: /.*
  script: main.app
  secure: always 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T02:41:48.023

上面提供的使用 app.yaml 配置的答案效果很好，但在某些情况下，您需要检查 Python 代码本身的粒度，我相信这是您所要求的，因为您想检查 RequestHandler。

这是您可以在 RequestHandler 中执行的操作：

```
if self.request.scheme.lower() != 'https':
    self.abort(403)
else:
    # handle your request here, you know it's secured! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-21T09:54:59.803

如果您使用的是 GAE Flex（`secure:`指令不​​起作用），我发现检测到这一点的唯一方法（我自己重定向 http->https）是检查是否`request.environ['HTTP_X_FORWARDED_PROTO'] == 'https'`

# mysql - 在我的 mysql where 语句中使用“作为列”

> ID：15515310
> 
> 赞同：1
> 
> 时间：2013-03-20T04:25:16.333
> 
> 标签：mysql, where-clause, mysql-error-1054

我有一个 mysql 查询，它从几行中减去金额以在名为“余额”的新列中显示新金额。我希望它只显示余额>'0'的那些记录。见下文：

```
 SELECT 
visits.visit_id,
visits.payment_increments,
((visits.total - visits.paid) - SUM(payments.amount)) AS Balance,
schedule.schedule_date
FROM
visits
    LEFT OUTER JOIN
schedule ON visits.schedule_id = schedule.id
    LEFT OUTER JOIN
payments ON visits.visit_id = payments.visit_id
WHERE
Balance>'0'
GROUP BY visits.visit_id 
```

有没有办法在 WHERE 语句中使用我的新列？现在，它显示的只是一个错误-> 错误代码：1054 'where 子句'中的未知列'Balance'。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:29:27.673

使用`HAVING`而不是`WHERE`

```
GROUP BY ... HAVING Balance >0 
```

**注意：** `HAVING`适用于非表列..由于**Balance**不是主表的列，所以这是一个虚构的列，所以它可以像使用表列`HAVING`一样工作`WHERE`

[`Read more...`](http://blog.sqlauthority.com/2007/07/04/sql-server-definition-comparison-and-difference-between-having-and-where-clause/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:31:49.287

```
 SELECT 
visits.visit_id,
visits.payment_increments,
((visits.total - visits.paid) - SUM(payments.amount)) AS Balance,
schedule.schedule_date
FROM
visits
    LEFT OUTER JOIN
schedule ON visits.schedule_id = schedule.id
    LEFT OUTER JOIN
payments ON visits.visit_id = payments.visit_id

GROUP BY visits.visit_id HAVING  Balance>'0' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:14:33.683

您可以使用相同的 SQL 查询，只需提及完整的列名

```
 SELECT 
   visits.visit_id,
   visits.payment_increments,
   ((visits.total - visits.paid) - SUM(payments.amount)) AS Balance,
   schedule.schedule_date
  FROM
     visits
    LEFT OUTER JOIN
   schedule ON visits.schedule_id = schedule.id
   LEFT OUTER JOIN
  payments ON visits.visit_id = payments.visit_id
WHERE
  ((visits.total - visits.paid) - SUM(payments.amount))>'0'
 GROUP BY visits.visit_id 
```

# r - 多年平均每日数据以替换 R 中的 NA 值

> ID：15515313
> 
> 赞同：0
> 
> 时间：2013-03-20T04:25:47.443
> 
> 标签：r, time-series, average, replace, mean

我有一个名为 daily 的数据框，如下所示：

```
 daily[1:10,]
         Climate_Division    Date      Precipitation
      1                 1 1948-07-01     0.2100000
      2                 1 1948-07-02     0.7000000
      3                 1 1948-07-03     0.1900000
      4                 1 1948-07-04     0.1033333
      5                 1 1948-07-05     0.1982895
      6                 1 1948-07-06     0.1433333
      7                 1 1948-07-07            NA
      8                 1 1948-07-08            NA
      9                 1 1948-07-09            NA
      10                1 1948-07-10            NA 
```

我想要实现的目标是平均所有年份（1948-1995）的所有日期值，以替换该特定日期发生的 NA 值。例如，由于第 7 行的 NA 为 1948 年 7 月 7 日，我将对 1948 年至 1995 年的所有 7 月 7 日进行平均，并将该特定日期替换为平均值。

到目前为止，我尝试过的是：

```
 index <- which(is.na(daily$Precipitation)) # find where the NA's occur
 daily_avg <- daily # copy dataframe
 daily_avg$Date <- strftime(daily_avg$Date, format="2000-%m-%d") # Change the Date format to represent only the day and month and disregard year
 daily_avg <- aggregate(Precipitation~Date, FUN = mean, data = daily_avg, na.rm = TRUE) # find the mean precip per day 
 daily[index,3] <- daily_avg[daily_avg$Date %in% strftime(daily[index,2], format="2000-%m-%d"), 2] 
```

代码中的最后一行无法正常工作，我不知道为什么。这就是我对这个问题的思考过程。但是，我想知道是否有更好的方法来使用我不知道的内置函数。任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T05:09:50.790

我认为您示例中的数据不能解释问题。您应该提供多年来某一天的数据，并带有一些 NA 值。例如，在这里我在 3 年内将问题更改为 2 天。

```
Climate_Division       Date Precipitation
1                1 1948-07-01     0.2100000
2                1 1948-07-02            NA
3                1 1949-07-01     0.1900000
4                1 1949-07-02     0.1033333
5                1 1950-07-01            NA
6                1 1950-07-02     0.1433333 
```

如果我理解的话，这个想法是用所有年份的值的平均值替换 NA 值。您可以使用`ave`and`transform`创建包含平均值的新列，然后用它替换 NA 值。

```
daily$daymonth <- strftime(daily$Date, format="%m-%d") 
daily <- transform(daily, mp =ave(Precipitation,daymonth,
               FUN=function(x) mean(x,na.rm=TRUE) ))
transform(daily, Precipitation =ifelse(is.na(Precipitation),mp,Precipitation))

    Climate_Division       Date Precipitation daymonth        mp
1                1 1948-07-01     0.2100000    07-01 0.2000000
2                1 1948-07-02     0.1233333    07-02 0.1233333
3                1 1949-07-01     0.1900000    07-01 0.2000000
4                1 1949-07-02     0.1033333    07-02 0.1233333
5                1 1950-07-01     0.2000000    07-01 0.2000000
6                1 1950-07-02     0.1433333    07-02 0.1233333 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T04:54:09.827

使用`data.table`

一些虚拟数据

```
 set.seed(1)
 library(data.table)
 daily <- seq(as.Date('1948-01-01'),as.Date('1995-12-31')
 dd <- data.table(date = daily, precip = runif(length(daily)))
 # add na values
 nas <- sample(length(daily),300, FALSE)
 dd[, precip := {is.na(precip) <- nas; precip}]

 ## calculate the daily averages
 # add day and month
 dd[, c('month','day') := list(month(date), mday(date))]

 monthdate <- dd[, list(mprecip = mean(precip, na.rm = TRUE)),
                  keyby = list(month, date)]
 # set key for joining
  setkey(dd, month, date)
 # replace NA with day-month averages
 dd[monthdate, precip := ifelse(is.na(precip), mprecip, precip)]
 # set key to reorder to daily

 setkey(dd, date) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-26T12:44:34.467

mnel 答案的一个稍微简洁的版本，我更喜欢接受的答案：

```
set.seed(1)
library(data.table)
# step 1: form data
daily <- seq(as.Date('1948-01-01'),as.Date('1995-12-31'),by="day")
dd <- data.table(date = daily, precip = runif(length(daily)))
# step 2: add NA values
nas <- sample(length(daily),300, FALSE)
dd[, precip := {is.na(precip) <- nas; precip}]
# step 3: replace NAs with day-of-month across years averages
dd[, c('month','day') := list(month(date), mday(date))]
dd[,precip:= ifelse(is.na(precip), mean(precip, na.rm=TRUE), precip), by=list(month,day)] 
```

# c# - Tasks/Thread/Delegate.beginInvoke 与 Thread.Sleep()

> ID：15515315
> 
> 赞同：3
> 
> 时间：2013-03-20T04:25:57.973
> 
> 标签：c#, multithreading

在下面的示例中，只有 _DisplayUsingThreads(timesToDisplay) 真正并行执行操作。而另外两个 _DisplayUsingTasks 和 _DisplayUsingDelegates 一次只执行 4 次（在四核机器上），然后等待一秒钟再执行 4 次。为什么？

```
public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }
            delegate void DisplayDelegate();
            DisplayDelegate myDisplaySleep;

            private void btnGo_Click(object sender, EventArgs e)
            {
              const int timesToDisplay = 50;

                //_DisplayUsingDelegates(timesToDisplay);
                //_DisplayUsingTasks(timesToDisplay);
                //_DisplayUsingThreads(timesToDisplay);
            }

            private void _DisplayUsingTasks(int displayNumber)
            {
                for (int i = 0; i < displayNumber; i++)
                {
                    Task task = new Task(DisplayIdSleep);
                    task.Start();
                }

            }

            private void _DisplayUsingThreads(int displayNumber)
            {
                for (int i = 0; i < displayNumber; i++)
                {
                    Thread thread = new Thread(DisplayIdSleep);
                    thread.Start();
                }
            }
            private void _DisplayUsingDelegates(int displayNumber)
            {
                myDisplaySleep = DisplayIdSleep;

                for (int i = 0; i < displayNumber; i++)
                {
                    myDisplaySleep.BeginInvoke(null, null);
                }
            }

            private void DisplayIdSleep()
            {
                Debug.WriteLine("Thread Id : {0}", Thread.CurrentThread.ManagedThreadId);
                Thread.Sleep(1000);
            }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T04:35:26.640

这是使用线程池线程的结果，`Task`而`BeginInvoke`创建您自己的线程则创建了一个线程。

添加`ThreadPool.SetMinThreads(50, 0);`并`btnGo_Click`观察会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:19:45.713

可以排队到线程池的操作数量仅受可用内存的限制；但是，线程池限制了进程中可以同时处于活动状态的线程数。从 .NET Framework 4 开始，进程的线程池的默认大小取决于几个因素，例如虚拟地址空间的大小。

# r - i如何在R中拆分多行文本？

> ID：15515316
> 
> 赞同：1
> 
> 时间：2013-03-20T04:26:03.993
> 
> 标签：r, split

我有一个包含一个段落的输入文件。我需要按模式将段落分成两个小段。

段落.xml

```
 <Text>
      This is first line.
      This is second line.
      \delemiter\new\one
      This is third line.
      This is fourth line.
 </Text> 
```

代码：

```
doc<-xmlTreeParse("paragraph.xml")
top = xmlRoot(doc)
text<-top[[1]] 
```

我需要把这一段分成两段。

第1段

```
 This is first line.
 This is second line. 
```

第2段

```
 This is third line.
  This is fourth line. 
```

我发现 strsplit 函数非常有用，但它从不分割多行文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T06:26:23.153

由于您有 xml 文件，因此最好使用`XML`包工具。我看到你在这里开始使用它是你开始的连续性。

```
library(XML)
doc <- xmlParse('paragraph.xml') ## equivalent xmlTreeParse (...,useInternalNodes =TRUE)
## extract the text of the node Text
mytext = xpathSApply(doc,'//Text/text()',xmlValue)
## convert it to a list of lines using scan
lines <- scan(text=mytext,sep='\n',what='character')
## get the delimiter index
delim <- which(lines == "\\delemiter\\new\\one")
## get the 2 paragraphes
p1 <- lines[seq(delim-1)]
p2 <- lines[seq(delim+1,length(lines))] 
```

Then you can use `paste` or `write` to get the paragraph structure, for example, using `write`:

```
write(p1,"",sep='\n')

This is first line.
This is second line. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:58:52.957

这是一种迂回的可能性，使用`split`、`grepl`和`cumsum`。

一些样本数据：

```
temp <- c("This is first line.", "This is second line.", 
          "\\delimiter\\new\\one", "This is third line.", 
          "This is fourth line.", "\\delimiter\\new\\one",
          "This is fifth line")
# [1] "This is first line."   "This is second line."  "\\delimiter\\new\\one"
# [4] "This is third line."   "This is fourth line."  "\\delimiter\\new\\one"
# [7] "This is fifth line" 
```

通过使用on`split`生成“组”后使用：`cumsum``grepl`

```
temp1 <- split(temp, cumsum(grepl("delimiter", temp)))
temp1
# $`0`
# [1] "This is first line."  "This is second line."
# 
# $`1`
# [1] "\\delimiter\\new\\one" "This is third line."   "This is fourth line." 
# 
# $`2`
# [1] "\\delimiter\\new\\one" "This is fifth line" 
```

如果需要进一步清理，这里有一个选项：

```
lapply(temp1, function(x) {
  x[grep("delimiter", x)] <- NA
  x[complete.cases(x)]
})
# $`0`
# [1] "This is first line."  "This is second line."
# 
# $`1`
# [1] "This is third line."  "This is fourth line."
# 
# $`2`
# [1] "This is fifth line" 
```

# javascript - 带有柱状图的 Ajax 动态数据

> ID：15515318
> 
> 赞同：1
> 
> 时间：2013-03-20T04:26:25.510
> 
> 标签：javascript, ajax, highcharts

是否可以运行 highcharts 柱形图？我已经尝试了几次，不幸的是，在不重新加载数据的情况下，这并没有真正的方法来刷新数据。

我编写了一些伪代码，这是我在工作中所做的方式（我现在不在那里，所以无法获取代码）。

我应该启动一个循环并运行 5,000 次还是延迟 5 秒？我不确定如何进行。

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highcharts Example</title>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
< your typical ajax call function here
    return some value;
>

$(function () {
    <var ajax_far = ajax_function();>
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            title: {
                text: 'Monthly Average Rainfall'
            },
            subtitle: {
                text: 'Source: WorldClimate.com'
            },
            xAxis: {
                categories: [
                    'Some Bar'
                ]
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Rainfall (mm)'
                }
            },
            legend: {
                layout: 'vertical',
                backgroundColor: '#FFFFFF',
                align: 'left',
                verticalAlign: 'top',
                x: 100,
                y: 70,
                floating: true,
                shadow: true
            },
            tooltip: {
                formatter: function() {
                    return ''+
                        this.x +': '+ this.y +' mm';
                }
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0
                }
            },
                series: [{
                name: 'Tokyo',
                data: [ajax_var]

            }]
        });
    });

}, 5000);
        </script>
    </head>
    <body>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:08:46.160

ajax 调用应该简单地获取图表以显示的新数据。无需重新绘制整个图表，只需替换系列数据，或添加单个点即可。这是关于在 highcharts 网站上执行此操作的一篇好文章[http://docs.highcharts.com/#preprocessing-live-data](http://docs.highcharts.com/#preprocessing-live-data)，但他们建议的 ajax 代码是：

```
/**
 * Request data from the server, add it to the graph and set a timeout to request again.
 */
function requestData() {
    $.ajax({
        url: 'live-server-data.php',
        success: function(point) {
            var series = chart.series[0],
                shift = series.data.length > 20; // Shift if the series is longer than 2.

            // Add the point.
            chart.series[0].addPoint(point, true, shift);

            // Call it again after one second.
            setTimeout(requestData, 1000);    
        },
        cache: false
    });
} 
```

在此代码中，每秒钟调用一次 requestData 函数（通过 setTimout）。它通过对 live-server-data.php 的 ajax 调用获得一个新的数据点，并使用 chart.series[0].addPoint 将其添加到图表中。

如果 ajax 调用返回整个系列，您将调用 chart.series[0].setData 来替换整个系列。

您唯一需要担心的是确保在开始调用 addPoint 或 setData 之前创建图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:35:11.050

将您的 ajax 代码放在它从就绪函数调用的一个函数中......试试这个

```
$(document).ready(function(){
example();
 setInterval("example()",5000);
}
function example()
{
//ajax code here

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:28:15.787

```
 $(function () {
    var chart;
    var list;
    $(document).ready(function() {
        var options = {
            chart: {
               //all chart attr here
                 }
                //other attr
           }
 chart = new Highcharts.Chart(options);
    setInterval(function() {
        $.ajax({
        type: "GET",
        url: "service",
        dataType: "json",
        success: function (data) 
    { 
           chart.series[0].setData(data);
        }
    }),1000); //will set ur data to ajax data every 1 sec
                  if u want to update to existing chart data try addPoint()
});
}); 
```

# algorithm - 如何对具有字谜的字符串数组进行排序

> ID：15515324
> 
> 赞同：4
> 
> 时间：2013-03-20T04:27:02.673
> 
> 标签：algorithm, sorting

如何对带有字谜的字符串数组进行排序？

例如：

输入{神，狗，abc，出租车，人}
输出{abc，出租车，狗，神，人}

我的方法：在 O(nlogn) 中对数组进行排序（不考虑字谜的情况）。接下来，拿起第一个字符串并为字符串创建一个直方图，并将直方图与数组中剩余的字符串直方图进行比较，并将匹配的字符串放在数组的适当位置..重复直到达到数组大小..这个算法采用 O(n^3) 的最坏情况（如果我们假设在最坏的情况下，每个字符串的大小也为 n）和直方图表示的额外空间

来自参考的直方图方法： [查找两个单词是否是彼此的字谜](https://stackoverflow.com/questions/4236906/finding-if-two-words-are-anagrams-of-each-other)

我们能做得比这更好吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T04:55:40.057

您当然可以做得更好，如下所示：

1.  循环遍历字符串数组
2.  对于每个字符串，首先对其字符进行排序，将排序后的字符串作为键，将原始字符串作为值，放入哈希表中。你最终会得到一个哈希表，其中键是排序的字符串，值都是字谜，同时，这些值是有序的。您可以`map<string, set<string> >`为此目的服务。
3.  遍历哈希表并将给定键的所有字谜一起输出，它们应该彼此相邻

假设字符串的长度为 M，数组的大小为 N，则时间复杂度为：O(NMlogM)，M 通常平均小于 N。所以这比你说的要有效得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-23T22:05:35.470

```
#include <vector>
#include <unordered_map>
#include <string>
#include <set>
#include <algorithm>
#include <iostream>

using namespace std;

vector<string> sort_string_anagram(vector<string> array)
{
    unordered_map<string, set<string>> anagram;

    for(string word : array)
    {
      string sorted_word(word);

      sort(sorted_word.begin(),sorted_word.end());

      anagram[sorted_word].insert(word);
    }

    sort(array.begin(), array.end());

    vector<string> result;

    for(string word : array)
    {
        unordered_map<string,set<string>>::iterator iter;

        string sorted_word(word);

        sort(sorted_word.begin(), sorted_word.end());

        if( (iter = anagram.find(sorted_word)) != anagram.end() )
        {
           for(set<string>::iterator it = (iter->second).begin(); it!= (iter->second).end();++it)
           {
              result.push_back(*it);
           }
           anagram.erase(iter);
        }
    }
    return result;
} 
```

@Jitendard，@taocp，具有时间复杂度的完整解决方案：O( N(MlogM) + NlogN + N(MlogM + A) )。N 是数组大小，M 是单词大小，A 是单词存在的最大字谜数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-07T03:00:29.737

在 python 中，这可以通过以下方式完成：

```
sorted(word_list, key=lambda word: ''.join(sorted(word.replace(" ", "").lower()))) 
```

其中键是按字母顺序排序的字符。字谜的关键是相同的，从而将它们保持在一起

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T07:00:42.347

@Song Wang：甚至我都在考虑这样做。但是，一旦将字符串从 hashmap 中取出，您怎么知道放置字符串的顺序？假设您提取
K1 = "abc", V1 = "cab"
K2 = "abc", V2 = "abc"
您如何知道将哪个放在列表 1 或 2 的首位？
也许你会再次对它们进行排序。但是，那么这对复杂性不利。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T04:32:11.970

为什么要先排序？您不能仅根据字谜将数组划分为子集。对子集进行排序，最后根据每个子集中的第一个词进行合并。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-28T20:54:03.870

把它放在一个'真正的'java编程上下文中（即我们使用一些现有的和基本的jdk util类，我认为下面的方法可能会给这个主题带来另一个有趣的方面（即“如何对一个字符串数组进行排序，每个字符串旁边都有字谜其他”）：

(a) 我们定义了一个比较器来判断两个字符串是否是字谜；(b) 我们使用 Arrays.sort(array,comparator) 对数组进行排序；

下面是代码和结果（这个想法可以在第 9 章看到，例如 Gayle Laakmann 的“破解编码面试”）

```
import java.util.Arrays;
import java.util.Comparator;

public class SolutionForSortArraysByAnagrams {

    public static void main(String[] args){

        String[] strArray = new String[]{"abets","mates","baste","meats", "betas","beast", "steam", "tames", "beats", "teams"}; 

        sortArraysByAnagrams(strArray);

        for(String str : strArray){
            System.out.println(str);
        }

    }

    private static void sortArraysByAnagrams(String[] strArray) {

        Arrays.sort(strArray, new AnagramComparator());

    }

}

class AnagramComparator implements Comparator<String> {

    @Override
    public int compare(String s1, String s2) {

        //check edge conditions and length
        if( s1 == null || s2 == null)
            return -1;
        if( s1.length() <  s2.length())
            return -1;
        else if ( s1.length() >  s2.length())
            return 1;

        //sort s1 and s2 to compare:
        //System.out.println(s1 + " vs  " + s2);        
        return sort(s1).compareTo(sort(s2));

    }

    private String sort(String s1) {
        char[] cArray = s1.toCharArray();
        Arrays.sort(cArray);        
        //System.out.println(" sorted:  " + new String(cArray));
        return new String(cArray);
    }

} 
```

输入：{“abets”、“mates”、“baste”、“meats”、“betas”、“beast”、“steam”、“tames”、“beats”、“teams”}；

输出： abets baste betas 野兽击败伙伴肉类蒸汽驯服团队

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-26T12:00:07.997

从网上找到解决方案：

```
public static void sortStringWithAnagrams(String[] stringArray) {
    Arrays.sort(stringArray, new AnagramComparator());
}

public static class AnagramComparator implements Comparator<String> {

    public String getSortedString(String s) {
        char[] content = s.toCharArray();
        Arrays.sort(content);
        return new String(content);
    }

    public int compare(String s1, String s2) {
        return getSortedString(s1).compareTo(getSortedString(s2));
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-22T15:12:19.173

```
 private static String[] getSortedAnagram(String[] array) {
    Map<String, ArrayList<String>> sortedMap = new HashMap<>();
    for (String a : array) {
        String sortedString = a.chars().sorted().
                collect(StringBuilder::new, StringBuilder::appendCodePoint, StringBuilder::append).toString();
        sortedMap.computeIfAbsent(sortedString, s->new ArrayList<>()).add(a);
    }
   String[] output = new String[array.length];
   List<String> list = sortedMap.values().stream().flatMap(List::stream).collect(Collectors.toList());
   return list.toArray(output);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-27T00:52:03.803

```
import java.util.Arrays;
import java.util.Comparator;

/**
 * Sort an array of strings so that all anagrams are next to each other
 * @author asharda
 *
 */
public class Anagram implements Comparator<String> {

  public static String  anagram(String input)
  {
    char []s=input.toCharArray();
    Arrays.sort(s);
    return new String(s);
  }
  public static void main(String[] args) {
    // TODO Auto-generated method stub

    String arr[]= {"abc","god","cab","dog"};
    Arrays.sort(arr, new Anagram());
    for(String s:arr)
    System.out.println(s);

  }
  @Override
  public int compare(String arg0, String arg1) {
    return arg0.compareTo(arg1);
  }

}

//Credit to Cracking Coding Interview by Gayle Laakmann 
```

# windows-8 - 从 WINRT Webview 控件访问 HTML DOM 对象

> ID：15515328
> 
> 赞同：2
> 
> 时间：2013-03-20T04:27:26.123
> 
> 标签：windows-8, windows-runtime

我找到了如何在 Webview XAML 控件中加载本地 html 页面

访问[winrt：在webview中加载本地html及其资源](https://stackoverflow.com/questions/13521884/winrt-load-local-html-and-its-resources-in-webview)

我找不到的是如何访问 Webview 控件的 HTML DOM 对象

我正在开发一个 C# Metro 风格的 windows 8 应用程序，我想捕获用户签名，因为在 winrt xaml 中还没有控制，我正在尝试使用 JQUERY 来做到这一点

我的 SignatureCpture 已加载到 webView 中，用户完成签名后我需要阅读签名，为此我必须访问 WebView 的 HTML DOM

我在页面中有一些隐藏字段，我需要使用 document.getElementByID('') 来获取值并将其存储在数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:31:42.423

请参阅 MSDN 代码库中的此示例代码：[XAML WebView 控件示例](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7)。在第5个场景中，它演示了如何访问html dom。

# scala - 从用 scala 解析器组合器编写的解释器生成本机代码的好方法是什么？

> ID：15515330
> 
> 赞同：2
> 
> 时间：2013-03-20T04:27:37.263
> 
> 标签：scala, llvm, parser-combinators

我已经有我的语言的翻译。它通过以下方式实现：

*   parser -> scala 解析器组合器；
*   AST -> scala 案例类；
*   评估器-> scala 模式匹配。

现在我想将 AST 编译为本机代码，希望是 Java 字节码。我正在考虑两个主要选项来完成这两项任务中的至少一项：

*   生成 LLVM IR 代码；
*   生成 C 代码和/或 Java 代码；

obs.: GCJ 和[SLEM](https://code.google.com/p/slem/)似乎无法使用（GCJ 使用简单的代码，我可以测试）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:48:43.443

### 简答

我会选择Java Bytecode。

### 长答案

问题是，您编译的语言级别越高，

1.  编译过程越慢越繁琐
2.  您获得的灵活性越大

例如，如果您编译为 C，则可以为 C 编译器获得许多可能的后端 - 您可以为许多架构生成 Java 字节码、LLVM IR、asm 等，但您基本上编译两次。如果您选择 LLVM IR，那么您已经完成了编译为 asm 的一半（解析 LLVM IR 比解析 C 等语言要快得多），但是您将很难从中获取 Java 字节码。不过，两种中间语言都可以编译为本机语言。

我认为编译为一些中间表示比编译为通用编程语言更可取。在 LLVM IR 和 Java Bytecode 之间，我会使用 Java Bytecode——尽管我个人更喜欢 LLVM IR——因为你写过你基本上想要两者，虽然你可以将 Java Bytecode 转换为 LLVM IR，但另一个方向是非常难的。

剩下的唯一困难是将您的语言翻译成 Java 字节码。[这个有关可以使其更容易的工具的相关问题](https://stackoverflow.com/questions/688098/compile-to-java-bytecode-without-using-java)可能会有所帮助。

最后，Java Bytecode 的另一个优点是它可以很好地与您的解释器配合使用，有效地允许您轻松生成类似热点的 JITter（甚至是跟踪编译器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:00:22.303

我同意@Oak 关于选择 ByteCode 作为最简单目标的观点。[@psuter](https://github.com/psuter/cafebabe)的 CafeBabe是一个可能生成 ByteCode 的 Scala 库。

你不能用它做所有事情，但对于小型项目来说它可能就足够了。语法也很清楚。请参阅项目 Wiki 了解更多信息。

# php - 如果它的 4 位数字，是否可以将此正则表达式修改为不匹配字符串？

> ID：15515341
> 
> 赞同：1
> 
> 时间：2013-03-20T04:28:31.880
> 
> 标签：php, regex

我正在使用以下正则表达式来匹配@username 字符串（twitter 之类的用户名匹配系统）。

```
(?<![\w@])@([\w@]+(?:[.!][\w@]+)*) 
```

这段代码对我来说很完美，但想排除一个特定的情况：如果匹配的字符串是一组 4 位数字。只有4位数。如果有 3 位或 5 位，那么它应该像现在一样继续匹配。

例如：

@8500 <-- 不匹配

@850 <-- 匹配

@8500000000 <-- 匹配

有没有人能想到的简单修改？如果不是，我打算只在 PHP 中进行检查。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T04:32:49.583

```
if(strlen($string) != 4){
    ...regex here...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T04:37:19.320

使用负前瞻`(?!...)`，您可以检查以下模式是否在当前位置*不匹配：*

```
(?<![\w@])@(?!\d\d\d\d\b)([\w@]+(?:[.!][\w@]+)*) 
```

这里所讨论的负前瞻是`(?!\d\d\d\d\b)`. 该模式将匹配四个数字，然后是一个单词边界。由负前瞻反转，这将匹配任何*不是*四位数字，然后是单词结尾的内容。

这假定有效的用户名不包含任何会导致单词边界匹配的字符。如果`@1234-hello`是一个有效的用户名，这将失败，您需要在 PHP 中执行匹配。

一些示例测试用例如下：

```
<?php

function test($test) {
    $pattern = '/(?<![\w@])@(?!\d\d\d\d\b)([\w@]+(?:[.!][\w@]+)*)/';
    echo (preg_match($pattern, $test) ? 'Matches' : 'No match') . "\n";
}

test('Hello @test world'); // Matches
test('Hello @123 world'); // Matches
test('Hello @1234 world'); // No match
test('Hello @12345 world'); // Matches
test('Hello @test1234 world'); // Matches
test('Hello @1234test world'); // Matches
test('Hello @1234-test world'); // No match
test('Hello @1234_test world'); // Matches 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T04:36:11.487

您可以使用语法指定正则表达式标记的最小/最大匹配数`{min,max}`，因此您可以使用这样的片段来匹配 1-3 或 5 个或更多数字 ( `\d`)，由非数字字符 ( `\D`) 包围：

```
/\D*(\d{1,3}|\d{5,})\D*/ 
```

# binary - 在 Arduino 草图中将文本字符串转换为二进制 ASCII

> ID：15515344
> 
> 赞同：1
> 
> 时间：2013-03-20T04:28:37.160
> 
> 标签：binary, arduino, ascii

我正在为 Arduino 编写一个草图，旨在将文本字符串转换为二进制 7 位或 8 位 ASCII。例如，“Hello World”将变成这个 8 位 ASCII 二进制流：

0100100001100101011011000110110001101111001000000111011101101111011100100110110001100100

如您所见，这是标准的 7 位 ASCII，用零填充以使其成为 8 位 ASCII。我不介意我使用哪个位长，只要我开始后它是一致的。我花了几个小时试图找出一种方法来实现这一目标，但无济于事。我最接近的是这样的：

```
char text[] = "Hello world"; 
```

当像这样打印到监视器时：

```
Serial.println(text[0], BIN); 
```

给我 1001000。但是，这根本没有填充（所以“0”将只是 0，而不是 0000000），显然这并没有为我提供任何可以使用的东西，只是一些可以看的东西！有人对我有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:52:22.680

You can use this as a starting point:

```
char inputChar = 'H';

// This will 'output' the binary representation of 'inputChar' as 8 characters of '1's and '0's, MSB first.
for ( uint8_t bitMask = 128; bitMask != 0; bitMask = bitMask >> 1 ) {
  if ( inputChar & bitMask ) {
    output('1');
  } else {
    output('0');
  }
} 
```

# android - 使用cookies android维护会话

> ID：15515346
> 
> 赞同：1
> 
> 时间：2013-03-20T04:29:02.100
> 
> 标签：android, session-cookies, setcookie

嗨，我正在开发 android 应用程序，我想在其中设置 cookie 以进行会话处理。我正在使用 datadroid 库进行`HttpURLConnection`在后台使用的网络调用。登录过程后，我尝试设置 cookie，之后每次通话我都尝试传递 cookie。但它没有给我有效的会话。我通过以下方式做到了这一点。登录过程后：

```
header = result.headerMap //this gves me header part after log in responce. 
```

所以这个头变量看起来像

```
{Cache-Control=[no-store, no-cache, must-revalidate, post-check=0, pre-check=0], 
***Connection=[close]***, Content-Encoding=[gzip], Content-Length=[173], Content-Location=
[login.php], Content-Type=[application/json], Date=[Wed, 20 Mar 2013 04:05:38 GMT], 
Expires=[Thu, 19 Nov 1981 08:52:00 GMT], Pragma=[no-cache], Server=[Apache/2.2.22 
(Fedora)],
 ***Set-Cookie***=[QCSESSID=mckdk1povn625jk1bhs11m0t97; path=/, 
QCSESSID=d44cnlf6gv2ii8lt76tr7vbqm4; path=/], TCN=[choice], Vary=[negotiate,Accept-
Encoding,User-Agent]} 
```

所以对于我的下一个网络电话我使用`Set-Cookies part`

```
 connect_status= header.get("Connection");
    login_cookie= header.get("Set-Cookie");
    cookie1=login_cookie.get(0);
    cookie2=login_cookie.get(1);

// This is datadroid syntax. So here I m setting cookies for my next call
 login_header.put("User-Agent"," Apache-HttpClient/4.2.3 (java 1.5)");
   login_header.put("Connection" ,"Keep-Alive");
   login_header.put("Cookie", cookie2);

   networkConnection.setHeaderList(login_header); 
```

但它仍然给我错误，没有有效的会话退出。我的标头响应显示连接参数已关闭，因此我尝试使用连接“保持活动状态”但这也不起作用。难道我做错了什么？需要帮忙。如何解决这个问题呢。

如果我用我的 GET API 之一尝试它，它的工作正常。但是当我将它与我的 PUT API 调用一起使用时，它会给我带来会话问题“会话不退出”。

谢谢你。

# silverlight - 如何在wp7中将字典数组转换为字节数组

> ID：15515353
> 
> 赞同：0
> 
> 时间：2013-03-20T04:29:35.290
> 
> 标签：silverlight, windows-phone-7

我想在 blob 类型的 SQLite 数据库属性中添加字典数组。但是 blob 只接受二进制数据，所以我怎么能以二进制形式转换字典数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T12:32:45.727

这里我们可以在 Windowns Phone 8 Libraries 中使用 DataContractSerializer

```
 Dictionary<string, string>[] stringlist = new Dictionary<string, string>[5];

    DataContractSerializer serializer = new DataContractSerializer(typeof(Dictionary<String, String>[]));

    byte[] byteArr;

    using (var ms = new System.IO.MemoryStream())
    {
        serializer.WriteObject(ms, stringlist);
        byteArr = ms.ToArray();
    } 
```

这里，stringlist 是 Dictionary 数组的类型，它使用 DataContractSerializer 转换为字节数组。

# titanium - Titanium 中不可预测的 z-index

> ID：15515354
> 
> 赞同：1
> 
> 时间：2013-03-20T04:29:36.073
> 
> 标签：titanium, z-index, appcelerator

这个奇怪的错误已经连续两天困扰我了！

我有 5 个视图，每个视图都包含一个滚动视图，并在单击它们时在它们上设置 z-index。出于某种奇怪的原因，z-index 为 3 的元素总是显示在 z-index 为 4 的元素之上，除非它是倒数第二个元素被点击。到底是怎么回事？！

请查看下面的代码。我用的是合金。显然不是生产代码，但我意识到它可能不是我的代码，所以我使用以下代码对其进行了测试。非常感谢你的帮助！

合金标记：

```
<!-- index.xml -->
<Alloy>
  <Window id="container">
    <View id="v0" class="test" top="0">
      <ScrollView borderColor="green">
        <Label/>
      </ScrollView>
    </View>
    <View id="v1" class="test" top="40">
      <ScrollView borderColor="blue">
        <Label/>
      </ScrollView>
    </View>
    <View id="v2" class="test" top="80">
      <ScrollView borderColor="red">
        <Label/>
      </ScrollView>
    </View>
    <View id="v3" class="test" top="120">
      <ScrollView borderColor="purple">
        <Label/>
      </ScrollView>
    </View>
    <View id="v4" class="test" top="160">
      <ScrollView borderColor="teal">
        <Label/>
      </ScrollView>
    </View>
  </Window>
</Alloy> 
```

这是主要脚本：

```
// index.js
zs = [];

changeOrder = function(){
  for(var i=0; i<5; i++){
    z = zs[i];
    v = $["v#{i}"];
    // Set the supposedly correct order of view stack
    v.setZIndex(z);
    // Display the order for debugging
    v.children[0].children[0].setText(z);
};

$.v0.addEventListener("click", function(){
  zs = [5,4,3,0,1];
  changeOrder();
});

$.v1.addEventListener("click", function(){
  zs = [1,5,4,3,0];
  changeOrder();
});

$.v2.addEventListener("click", function(){
  zs = [0,1,5,4,3];
  changeOrder();
});

$.v3.addEventListener("click", function(){
  zs = [3,0,1,5,4];
  changeOrder();
});

$.v4.addEventListener("click", function(){
  zs = [4,3,0,1,5];
  changeOrder();
});

$.container.open() 
```

钛手机 3.0.22 合金 1.0.0 iOS 模拟器 6.1 OSX 10.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:43:46.907

看起来您正在将 PHP 与 javascript 混合，因此对视图元素的引用是错误的。此外，您设置视图的方式有问题，因此当您单击最顶部的视图时，其他视图变得不可点击，但是，这正是您想要做的。这个：

```
v = $["v#{i}"]; 
```

应该：

v = $["v"+i];

# html - !DOCTYPE 声明弄乱了我的字体大小

> ID：15515356
> 
> 赞同：2
> 
> 时间：2013-03-20T04:30:02.083
> 
> 标签：html, css, fonts, size, doctype

```
!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd" 
```

以上是 W3 验证器为我的站点建议的文档类型。

我真的很愚蠢，并且在没有在每页顶部声明文档类型的情况下发展了很多。

幸运的是，它似乎只影响了字体大小/粗细，由于某种原因，它们现在都很大。

下面是我网站上的 CSS 示例。有什么建议么？

```
table.bookings {
    width: 744;
    margin-left: 8px;
    font-size: 14px;
    font-family: "Helvetica";
    color: #ffffff;
    text-decoration: none;
    background-color:#484848;
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:19:10.903

请纠正您的 Doctype，我认为您使用的是 html4.01，所以它：-

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

对于新的 HTML5，文档类型将是：-

```
<!DOCTYPE HTML> 
```

还要纠正你的字体系列，它没有错，但就 w3v 规则而言，你必须提到字体是无衬线、草书等...

```
font-family: "Helvetica", sans-serif; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T06:41:32.100

验证器不建议任何文档类型。它只是*默认*为特定的文档类型。

通过从一组备选方案中添加 doctype，您可以在浏览器中触发“标准模式”。这实际上意味着“非故意破坏模式”，即避免“怪癖模式”，这是浏览器模式的统称，它们或多或少地模仿旧浏览器的错误（类似于 IE 5 错误）。您显然正在使用这样的文档类型，即使问题缺少作为文档类型字符串一部分的`<`和字符。`>`

[怪癖模式](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)与标准模式会影响很多事情，尤其是在 CSS 中。这可能包括，除其他外，打破字体大小的继承。也就是说，为包含表格的元素声明的字体大小可能不会被表格的单元格继承。从发布的摘录中，无法说出真正发生的事情。但在标准模式下，至少该部分`width: 744`被忽略为语法错误。

如果您编写的页面现在使用 quirks 模式，就像您显然拥有的那样，那么合理的选择是保持这种方式并重写它。对于新页面，从一开始就使用标准模式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-11-05T20:55:51.077

一旦你声明这是一个 html doc 类型，你就不能在里面放一个 css 代码，浏览器会乱解释它，所以把 css 代码放在一个单独的文件中。

# php - 如何在 PHP for Social Mention API 中将 JSON 解析为 CSV

> ID：15515357
> 
> 赞同：0
> 
> 时间：2013-03-20T04:30:13.870
> 
> 标签：php, json, url

我需要在 SocialMention.com 上查询“Colorado Springs”和“District 11”，并将数据拉回到 CSV 文件中。我是一名老程序员，但对 PHP 和 JSON 很陌生。这是简单的php代码：

```
<?php 
$curl = curl_init('http://api.socialmention.com/search?q=%22colorado+springs%22+%22district+11%22&f=json&src[]=twitter&sentiment=true&meta=info');
$result = curl_exec($curl); 
echo $result; 
?> 
```

如何解析 $result 并将其存储在 CSV 文件中？我已经对此进行了 6 天的研究，并尝试了所有我能找到的示例，但都没有运气。在下面的示例中，我不断收到“foreach 中的参数无效”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:39:09.423

u can refer the two links too

1.[Parsing JSON file with PHP](https://stackoverflow.com/questions/4343596/parsing-json-file-with-php)

2.[php writing to csv from an array](https://stackoverflow.com/questions/6752964/php-writing-to-csv-from-an-array)

```
$json_a=json_decode($string,true); //decodes json

//writes to csv
 $fp = fopen('file.csv', 'w');

    for ($i = 0; $i < count($json_a); $i++) {
        $fields = //json object feids here
        fputcsv($fp, $fields);
    }

    fclose($fp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:35:11.073

你的问题很广泛，因为你并没有真正说出你想如何 parse `$result`，但你甚至没有得到，`$result`因为`curl_exec`实际上会打印出它的内容。相反，您可以设置`curl_setopt($curl, CURLOPT_RETURNTRANSFER, true)`，或者您可能只使用`$result = file_get_contents($url);`

无论如何，您可以通过 .将结果从 JSON 更改为可用的 PHP 数据结构`$data = json_decode($result, true)`。第二个参数强制关联数组，这可能更适合您的目的。

然后您可以写入 CSV 文件：

```
$fh = fopen('csvfile', 'w');
foreach ($result['items'] as $items) {
    fputcsv($fh, $items);
} 
```

# php - 如何在此语句中添加条件以不回显空 $weekday

> ID：15515365
> 
> 赞同：0
> 
> 时间：2013-03-20T04:30:59.527
> 
> 标签：php, foreach, conditional

我正在修改一个用于以列表格式输出每周课程表的 wordpress 小部件。就像现在的代码一样，它将输出每个工作日，然后是当天的班级信息。问题是即使有一天没有课，它仍然会呼应那一天的名字。我想跳过回显任何不包含其数组中数据的 $weekday 。这是代码：

```
<?php
/**
 * @file
 * Output view template.
 *
 * Available Variables:
 * - $weekday_names: Array of weekday names to be used in table output.
 * - $weekdays: Array of used weekdays based on user preference.
 * - $start_hours: Array of unique start hours.
 * - $classes: Multi-dimensional array in the structure of $classes[weekday][start_hour].
 */
?>

<div id="wcs-schedule-list"> 
    <?php foreach ( $weekdays as $weekday ): ?>
    <h3><?php echo $weekday; ?></h3>
    <div class="list-container">
        <ul class="wcs-schedule-list">
        <?php foreach ( $start_hours as $start_hour ): ?>
        <?php echo WcsSchedule::model()->renderListItem( $classes, $start_hour, $weekday ) ?>
        <?php endforeach; ?>
        </ul>
    </div>
    <?php endforeach; ?>
</div> 
```

任何帮助将不胜感激！

这是`var_dump($start_hours);`一个空的 $weekday。

```
Tuesday

array(6) { [1]=> string(8) "12:00 pm" [6]=> string(7) "2:00 pm" [4]=> string(7) "3:30 pm" [5]=> string(7) "6:00 pm" [2]=> string(7) "7:00 pm" [0]=> string(7) "8:15 pm" } array(6) { [1]=> string(8) "12:00 pm" [6]=> string(7) "2:00 pm" [4]=> string(7) "3:30 pm" [5]=> string(7) "6:00 pm" [2]=> string(7) "7:00 pm" [0]=> string(7) "8:15 pm" } array(6) { [1]=> string(8) "12:00 pm" [6]=> string(7) "2:00 pm" [4]=> string(7) "3:30 pm" [5]=> string(7) "6:00 pm" [2]=> string(7) "7:00 pm" [0]=> string(7) "8:15 pm" } array(6) { [1]=> string(8) "12:00 pm" [6]=> string(7) "2:00 pm" [4]=> string(7) "3:30 pm" [5]=> string(7) "6:00 pm" [2]=> string(7) "7:00 pm" [0]=> string(7) "8:15 pm" } array(6) { [1]=> string(8) "12:00 pm" [6]=> string(7) "2:00 pm" [4]=> string(7) "3:30 pm" [5]=> string(7) "6:00 pm" [2]=> string(7) "7:00 pm" [0]=> string(7) "8:15 pm" } array(6) { [1]=> string(8) "12:00 pm" [6]=> string(7) "2:00 pm" [4]=> string(7) "3:30 pm" [5]=> string(7) "6:00 pm" [2]=> string(7) "7:00 pm" [0]=> string(7) "8:15 pm" } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:42:47.067

另外两个答案是错误的。他们仍然输出这一天，即使它是空的。干得好：

```
<div id="wcs-schedule-list"> 
    <?php foreach ( $weekdays as $weekday ): ?>
    <?php if (empty($classes[$weekday])) continue; ?>
    <h3><?php echo $weekday; ?></h3>
    <div class="list-container">
        <ul class="wcs-schedule-list">
        <?php foreach ( $start_hours as $start_hour ): ?>
        <?php echo WcsSchedule::model()->renderListItem( $classes, $start_hour, $weekday ) ?>
        <?php endforeach; ?>
        </ul>
    </div>
    <?php endforeach; ?>
</div> 
```

此答案假定`$classes[$weekday]`在给定的 没有任何安排时为空`$weekday`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:37:26.040

```
<?php foreach ( $weekdays as $weekday ): ?>
<h3><?php echo $weekday;
    if(isset($weekday) && !empty($weekday)) { 
 ?></h3>
<div class="list-container">
    <ul class="wcs-schedule-list">
    <?php foreach ( $start_hours as $start_hour ): ?>
    <?php echo WcsSchedule::model()->renderListItem( $classes, $start_hour, $weekday ) ?>
    <?php endforeach; ?>
    </ul>
</div>
<?php } endforeach; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:43:59.210

```
<?php
echo '<div id="wcs-schedule-list"> ';
foreach ( $weekdays as $weekday ){
//you need to add a check with WcsSchedule first, to see if this $weekday has any classes before you begin outputting anything
    echo "<h3>$weekday</h3>";
    echo '<div class="list-container">';
    foreach ( $start_hours as $start_hour ) {
        echo '<ul class="wcs-schedule-list">';
        echo WcsSchedule::model()->renderListItem( $classes, $start_hour, $weekday );
    }
    echo "</ul>";
    echo "</div>";
}
echo "</div>";
?> 
```

这还不完整，你需要调整它，因为我不熟悉你使用的东西，但是，我想你需要首先检查是否有使用你的模型的类。

您需要想出一种方法来检查当天是否有课程并从那里开始，或者如上所述，在输出任何内容之前遍历您的 start_hours。在那个 for 循环中检查是否从您的模型返回任何内容并从那里开始。

# angularjs - Angular-JS ui-sortable 绑定到模型

> ID：15515368
> 
> 赞同：3
> 
> 时间：2013-03-20T04:31:05.600
> 
> 标签：angularjs

假设您有一个每行呈现 3 次的项目列表，例如：

```
<div ng-repeat="piece in fooService.get()" class="span3"> 
```

你希望能够对它们进行排序。我发现的唯一方法是包装：

```
<div ui-sortable> 
```

哪个有效，但不绑定到模型。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:33:58.187

您也必须通过`ng-model`：请参阅下面的小提琴，我发现谷歌搜索：

[http://jsfiddle.net/g/hKYWr/](http://jsfiddle.net/g/hKYWr/)

**编辑** 参考： [http ://plnkr.co/edit/Bzjruq?p=preview](http://plnkr.co/edit/Bzjruq?p=preview)

# java - Java中的信号条件变量触发等待

> ID：15515369
> 
> 赞同：1
> 
> 时间：2013-03-20T04:31:08.497
> 
> 标签：java, concurrency, triggers, locking

我创建了一个*Runnable*类，它定期执行一些任务。此类具有*触发*立即执行任务的方法，该方法丢弃指定的时间是否已过。

类确实在指定时间执行定期任务，但触发无法按预期工作。
下面是带有 main 方法的简化类代码。根据我解释中的 API 文档，何时`trigger`被调用，`await`发出信号并且它必须返回，以便或多或少地*立即*执行任务，而无需等待指定时间的流逝。

Java 锁和条件有什么问题？我无法弄清楚为什么我的`trigger`方法没有按预期运行？

```
import java.util.concurrent.TimeUnit;
import java.util.concurrent.locks.*;

public class PeriodicRunner implements Runnable {

    private Lock lock = new ReentrantLock();
    private Condition cond = lock.newCondition();

    public void trigger() {
        lock.lock();
        try {
            cond.signalAll();
        }
        finally {
            lock.unlock();
        }
    }

    @Override
    public void run() {
        lock.lock();
        try {
            while(true) {
                cond.await(5, TimeUnit.SECONDS);
                System.out.println("some task here");
            }
        }
        catch(InterruptedException ex) {
        }
        finally {
            lock.unlock();
        }
    }

    public static void main(String[] args) throws InterruptedException {

        PeriodicRunner pr = new PeriodicRunner();
        new Thread(pr).start();
        pr.trigger();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:12:37.833

我认为您想要的可以通过以下方式更透明地实现`ScheduledExecutorService`：

```
class PeriodicRunner implements Runnable
{
  private final ScheduledExecutorService _scheduler = Executors.newSingleThreadScheduledExecutor();

  PeriodicRunner() 
  {
    _scheduler.scheduleWithFixedDelay(this, 5, 5, TimeUnit.SECONDS);
  }

  public void trigger()
  {
    _scheduler.execute(this);
  }

  public void run()
  {
    System.out.println("some task here");
  }
} 
```

**更新**

例如，以下内容：

```
PeriodicRunner runner = new PeriodicRunner();
Thread.sleep(TimeUnit.SECONDS.toMillis(12));
System.out.println("[" + new Date() + "] triggering extra task");
runner.trigger();    
Thread.sleep(TimeUnit.SECONDS.toMillis(1));
System.out.println("[" + new Date() + "] triggering extra task");
runner.trigger();
Thread.sleep(TimeUnit.SECONDS.toMillis(1));
System.out.println("[" + new Date() + "] triggering extra task");
runner.trigger(); 
```

将产生输出：

```
[Wed Mar 20 13:18:31 CST 2013] some task here
[Wed Mar 20 13:18:36 CST 2013] some task here
[Wed Mar 20 13:18:38 CST 2013] triggering extra task
[Wed Mar 20 13:18:38 CST 2013] some task here
[Wed Mar 20 13:18:39 CST 2013] triggering extra task
[Wed Mar 20 13:18:39 CST 2013] some task here
[Wed Mar 20 13:18:40 CST 2013] triggering extra task
[Wed Mar 20 13:18:40 CST 2013] some task here
[Wed Mar 20 13:18:41 CST 2013] some task here
[Wed Mar 20 13:18:46 CST 2013] some task here 
```

**更新 2**

要扩展 d3rzKy 的答案，修复现有代码，您可以引入一个标志来指示`trigger`已被调用。此外，`await`不能保证一直等待，因此您需要循环并跟踪您已经等待了多长时间。

```
import java.util.concurrent.TimeUnit;
import java.util.concurrent.locks.*;

public class PeriodicRunner implements Runnable {

    private final Lock lock = new ReentrantLock();
    private final Condition cond = lock.newCondition();

    private volatile boolean triggered = false;

    public void trigger() {
        lock.lock();
        try {
            triggered = true;
            cond.signalAll();
        }
        finally {
            lock.unlock();
        }
    }

    @Override
    public void run() {
        lock.lock();
        try {
            while(true) {

                if (!triggered) {
                    long remainingMs = TimeUnit.SECONDS.toMillis(5);
                    long dueTimeMs = System.currentTimeMillis() + remainingMs;
                    while (remainingMs > 0 && !triggered) {
                        if (cond.await(remainingMs, TimeUnit.MILLISECONDS)) {
                            break;
                        }
                        remainingMs = dueTimeMs - System.currentTimeMillis();
                    }
                }
                triggered = false;
                System.out.println("some task here");
            }
        }
        catch(InterruptedException ex) {
        }
        finally {
            lock.unlock();
        }
    }

    public static void main(String[] args) throws InterruptedException {

        PeriodicRunner pr = new PeriodicRunner();
        new Thread(pr).start();
        pr.trigger();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T06:17:11.670

我认为问题在这里：

```
pr.trigger(); 
```

它在新线程实际启动之前被调用。所以没有人会收到第一个 cond.signalAll()。尝试以这种方式更改它：

```
Thread.sleep(100);
pr.trigger(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:39:42.737

```
new Thread(pr).start(); 
```

它将启动`run`方法`lock`并将被无限获取。

```
pr.trigger(); 
```

当它调用`trigger`方法时，`main`线程将无限等待，因为`lock`已被另一个线程获取。

# ruby - 为什么monkeypatching Hash.new 不起作用？

> ID：15515370
> 
> 赞同：4
> 
> 时间：2013-03-20T04:31:09.080
> 
> 标签：ruby, hash, monkeypatching

我正在修补 Ruby 的`Hash`课程。

```
class Hash
  alias_method :_initialize, :initialize

  def initialize
     puts 'In my hash class'
     _initialize
  end
end 
```

当我做

```
Hash.new 
```

它按预期工作。但是让我们说我有一个需要`Hash`. 就像是，

```
foo 'a' => 'b' 
```

在这种情况下，我的`Hash`课程没有被使用。我希望我`Hash`的班级的`initialize`方法被调用。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:56:47.670

因为文字哈希不会调用将调用的`initialize`方法`Hash.new`。

相同`Hash['a', 'b']`或`Hash['a' => 'b']`

# google-maps - 如何在同一页面的不同 div 中的 2 个地图上显示相同的多边形

> ID：15515374
> 
> 赞同：0
> 
> 时间：2013-03-20T04:31:19.077
> 
> 标签：google-maps, google-maps-api-3

我正在使用谷歌地图 api V3。我有一个多边形点数组，就像这个[链接的](https://google-developers.appspot.com/maps/documentation/javascript/examples/polygon-simple)变量'triangleCoords'一样。

我正在使用按钮单击动态生成地图..

我想放置相同的多边形以包含在所有地图中。

正如我正在尝试的那样，多边形仅显示在生成的最新地图上。

我希望多边形像[图像链接中一样](http://i1324.photobucket.com/albums/u616/7842587827/Track_zps4f54b610.png?t=1363753715)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:53:58.380

您只能将 google.maps.Polygon 添加到一张地图。如果您有多张地图，则需要为每张地图制作一张。

```
function initialize() {
    var myLatLng = new google.maps.LatLng(24.886436490787712, -70.2685546875);
    var mapOptions = {
      zoom: 4,
      center: myLatLng,
      mapTypeId: google.maps.MapTypeId.TERRAIN
    };

    var bermudaTriangle;

    var map = new google.maps.Map(document.getElementById('map-canvas'),
        mapOptions);
    var map2 = new google.maps.Map(document.getElementById('map-canvas2'),
        mapOptions);
    var map3 = new google.maps.Map(document.getElementById('map-canvas3'),
        mapOptions);

    var triangleCoords = [
        new google.maps.LatLng(25.774252, -80.190262),
        new google.maps.LatLng(18.466465, -66.118292),
        new google.maps.LatLng(32.321384, -64.75737),
        new google.maps.LatLng(25.774252, -80.190262)
    ];

    // Construct the polygon
    var bermudaTriangle1 = new google.maps.Polygon({
      paths: triangleCoords,
      strokeColor: '#FF0000',
      strokeOpacity: 0.8,
      strokeWeight: 2,
      fillColor: '#FF0000',
      fillOpacity: 0.35
    });
    var bermudaTriangle2 = new google.maps.Polygon({
      map: map2,
      paths: triangleCoords,
      strokeColor: '#FF0000',
      strokeOpacity: 0.8,
      strokeWeight: 2,
      fillColor: '#FF0000',
      fillOpacity: 0.35
    });
    var bermudaTriangle3 = new google.maps.Polygon({
      map: map3,
      paths: triangleCoords,
      strokeColor: '#FF0000',
      strokeOpacity: 0.8,
      strokeWeight: 2,
      fillColor: '#FF0000',
      fillOpacity: 0.35
    });

    bermudaTriangle1.setMap(map);
  } 
```

[例子](http://www.geocodezip.com/v3_GoogleEx_polygon-simple_3maps.html)

# samsung-smart-tv - 为三星智能电视开发 Web 应用程序时无法显示视频（mp4 格式）

> ID：15515376
> 
> 赞同：0
> 
> 时间：2013-03-20T04:31:26.643
> 
> 标签：samsung-smart-tv

我正在使用最新的三星智能电视模拟器并为其开发了一个非常简单的应用程序：播放视频。

代码如下所示。代码太简单了，我找不到根本原因（无法播放视频）。我在 mac safari 和 chrome 网络浏览器上验证了它。

```
 <!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>basicexample</title>
</head>
<body background="http://icbd.tv/wp-content/uploads/2012/06/background.jpg">
    <video id="video" src="http://www.808.dk/pics/video/gizmo.mp4" autoplay="autoplay">Your browser does not support the video tag.
    </video>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:58:17.660

三星 SDK 不支持`autoplay`属性。要播放视频，您需要手动启动它：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>basicexample</title>
</head>
<body onload="document.getElementById('video').play(1)" background="http://icbd.tv/wp-content/uploads/2012/06/background.jpg" >
    <video id="video" src="http://www.808.dk/pics/video/gizmo.mp4" autoplay="autoplay">Your browser does not support the video tag.</video>
</body>
</html> 
```

此代码在 2011-2013 模拟器上播放视频。2010 不支持`<video>`标签。

# javascript - 如何从动态形成的网页中检索标题

> ID：15515377
> 
> 赞同：0
> 
> 时间：2013-03-20T04:31:26.920
> 
> 标签：javascript, python, web-scraping, spynner

我正在使用 Django 开发书签应用程序，并希望从使用 javascript 生成标题的网页中提取标题。我查看了 windmill 并安装/运行了 selenium，这很有效，但我相信这些工具不仅仅是我获得网页标题所需的工具。我目前正在尝试使用 spynner，但在页面完全呈现后未能成功检索内容。这是我目前拥有的代码...

```
from spynner import Browser
from pyquery import PyQuery
browser = Browser()
browser.set_html_parser(PyQuery)
browser.load("https://www.coursera.org/course/techcity") 
```

在 python shell 中执行最后一行时，我收到 SpynnerTimeout: Timeout reached: 10 seconds 错误。如果我再次执行最后一条语句，它将返回 True，但只返回运行 javascript 之前的页面，它没有“正确”的页面标题。我还尝试了以下方法：

```
browser.load("https://www.coursera.org/course/techcity", wait_callback=wait_load(10))
browser.soup("title")[0].text 
```

但这也会返回不正确的标题 - “Coursera.org”（即运行 javascript 之前的标题）。

以下是我的问题：

1.  是否有更有效的推荐方法来提取使用 javascript 动态生成的网页标题，该方法使用其他一些 python 工具/库？如果是这样，推荐的方法是什么？- 任何示例代码表示赞赏。
2.  如果使用 spynner 是一个好方法，那么在页面加载后我应该怎么做才能获取标题，或者更好的是，在 javascript 呈现标题之后。我现在拥有的代码正是我从一篇博客文章中拼凑而成的，并在 github 上查看了 spynner 的源代码。

# css - 无法将父 DIV 样式应用于内部子 DIV HTML 元素

> ID：15515378
> 
> 赞同：0
> 
> 时间：2013-03-20T04:31:28.227
> 
> 标签：css, html, styles

我有父 DIV 元素，其中有一个用`background:#efefef;`. 然后我在上面的 DIV 元素中复制并插入了另一个 DIV 元素。但背景颜色不影响子 DIV。我希望子 DIV 具有相同的背景颜色也有一个完整的视图。

我的 HTML 代码在这里：http: [//jsfiddle.net/aC5P3/2/](http://jsfiddle.net/aC5P3/2/)

谢谢 ：）-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:34:39.473

`float: left;`从子 css 中删除。

**或者**

给`float: left;`家长申请。

# iphone - 关闭手机，MobileSMS 应用程序不成功

> ID：15515386
> 
> 赞同：3
> 
> 时间：2013-03-20T04:31:59.363
> 
> 标签：iphone, sqlite, jailbreak

如何使用 system("/usr/bin/killall [appname]"); 关闭应用程序 我用过它，但是当我双击主页按钮以显示后台应用程序时。它仍然出现。可以帮忙吗？我在越狱手机上开发，我想清除call_history.db，我想我想完美关闭MobilePhone应用程序，之后我可以在call_history上删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:39:49.403

我不是 100% 确定这个答案。但是，我相信如果您双击主页按钮，它不会向您显示*后台*应用程序列表。它向您显示*最近使用*的应用程序列表。

例如，系统可能会由于内存不足而停止其中一些应用程序，但它们仍在此列表中。如果您单击任何停止的应用程序，它们将由系统再次启动。

基于这种认识。Killall 很可能实际上运行良好（杀死了一个应用程序），但该应用程序保留在最近的应用程序列表中。您无需为您的任务担心此列表。

# html - 为什么我的 CSS 与我的内容重叠？

> ID：15515387
> 
> 赞同：1
> 
> 时间：2013-03-20T04:32:00.067
> 
> 标签：html, css

你可以在这里看到我的网页

```
http://209.140.27.232/~ashleyo/portfolio.html 
```

我似乎无法弄清楚我的 CSS 有什么问题。似乎一个不可见的容器与我的内容重叠，所以我无法单击图像，除了看起来在容器之外的底部图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T04:35:45.747

**删除** `#content` `id` `z-index -1`和

**现在添加** `z-index` `0`您的`#content` `id`

**像这样**

```
#content{
z-index:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:54:18.883

希望这可以帮助你:)

实际上这里`s neither a need of this "z-index" for CONTENT`的 DIV 和 CONTAINER`s DIV as there`的“高度”都不需要 z-index 和高度可以自动增长。

只需删除这些属性。

```
#content{
    z-index:0;
}
#container{
    height: 500px;
} 
```

如果您愿意，可以使用此 CSS 属性限制您的 div 的最大高度

```
#container{
    max-height: 500px;
} 
```

# ruby-on-rails - 复杂的查询融化了我的大脑！Rails 和 Postgres

> ID：15515388
> 
> 赞同：0
> 
> 时间：2013-03-20T04:32:04.967
> 
> 标签：ruby-on-rails, database, postgresql

如果我在这里遗漏了一些非常明显的东西，我深表歉意，但希望你能幽默我！

我有这些模型

```
Employee - with id, first_name, last_name
Shift Type - with id, shift_name
Date Indices - with id, date
Locations - with id, location
Allocated shifts - with employee_id, shift_type_id, date_index_id, location_id 
```

现在我可以编写查询来显示分配的班次并加入位置、名称等，但我是能够生成一个表，该表将日期作为列，将员工作为行来生成这样的名册

```
______________________________________________

|employee|date 1     |date 2     | date 3    |
|'dave'  |early shift|late shift |day off    |
|'martha'|day off    |early shift|early shift| 
```

等等

我确定我很笨，但是我怎样才能创建这些“虚拟”列并将它们链接到员工？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:42:11.527

您正在寻找“枢轴”或“交叉表”查询。Postgres 有额外的模块[**tablefunc**](http://www.postgresql.org/docs/current/interactive/tablefunc.html)。此相关答案中的更多信息：
[PostgreSQL Crosstab Query](https://stackoverflow.com/questions/3002499/postgresql-crosstab-query/11751905#11751905)

以及从那里指向类似问题的许多链接。

# r - R + 将一个向量列表组合成一个向量

> ID：15515390
> 
> 赞同：61
> 
> 时间：2013-03-20T04:32:14.897
> 
> 标签：r, list, vector, append, sapply

我有一个数字向量列表，我想将它们组合成一个向量。但我无法做到这一点。该列表可以有一个跨列表元素共有的元素。最终向量不应将它们添加两次。这是一个例子：

```
>lst
`1`
[1] 1 2
`2`
[2] 2 4 5
`3`
[3] 5 9 1 
```

我想要这样的最终结果

```
>result
[1] 1 2 4 5 9 1 
```

我尝试做以下事情，而不用担心重复：

```
>vec<-vector()
>sapply(lst, append,vec) 
```

和

```
>vec<-vector()
>sapply(lst, c, vec) 
```

他们都没有工作。有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-21T05:01:22.600

一种比上面提出的解决方案更快的解决方案：

```
vec<-unlist(lst)
vec[which(c(1,diff(vec)) != 0)] 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-12-29T15:30:28.827

另一个答案使用`Reduce()`.

创建向量列表：

```
lst <- list(c(1,2),c(2,4,5),c(5,9,1)) 
```

将它们组合成一个向量

```
vec <- Reduce(c,lst)
vec
# [1] 1 2 2 4 5 5 9 1 
```

重复的只保留一次：

```
unique(Reduce(c,lst))
#[1] 1 2 4 5 9 
```

如果你想在最后保留那个重复的，你可能想`vec[which(c(1,diff(vec)) != 0)]`在@Rachid的回答中使用

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-20T04:46:21.323

你想要rle：

```
rle(unlist(lst))$values

> lst <- list(`1`=1:2, `2`=c(2,4,5), `3`=c(5,9,1))
> rle(unlist(lst))$values
## 11 21 22 31 32 33 
##  1  2  4  5  9  1 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-03-19T00:36:28.787

stack 也会很好地做到这一点，并且看起来更简洁：

```
stack(lst)$values 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-11-27T13:26:38.927

[对Rachit](https://stackoverflow.com/a/15539879/4836511)和[Martijn](https://stackoverflow.com/a/52175207/4836511)的两个答案进行基准测试

```
rbenchmark::benchmark(
  "unlist" = {
    vec<-unlist(a)
    vec[which(diff(vec) != 0)]
  },
  "reduce" = {
    a %>% reduce(c) %>% unique
  }
) 
```

输出：

```
 test replications elapsed relative user.self sys.self user.child sys.child
2 reduce          100   0.036        3     0.036    0.000          0         0
1 unlist          100   0.012        1     0.000    0.004          0         0 
```

[这个](https://stackoverflow.com/a/15539879/4836511)明显打败了另一个。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-09-04T23:34:06.957

以tidyverse方式进行：

```
library(tidyverse)
lst %>% reduce(c) %>% unique 
```

这将`reduce`purrr 中的（未大写的）版本与管道结合使用。另请注意，如果列表包含*命名*向量，则最终命名将根据是否使用`unlist`或`reduce`方法而有所不同。

# c# - 无法浏览所有表

> ID：15515394
> 
> 赞同：2
> 
> 时间：2013-03-20T04:32:32.397
> 
> 标签：c#, .net, winforms, entity-framework-5, sql-server-2012-express

我对实体框架版本有疑问。5`ConnectionString`带有 ADO.NET 实体数据模型。当我使用生成`connectionString`的*用户名*和*密码*时，我无法映射/浏览数据库中的所有表。

```
<connectionStrings><add name="myEntities" 
                        connectionString="metadata=res://*/myDbase.csdl
                        |res://*/myDbase.ssdl|res://*/myDbase.msl;provider=System.Data.SqlClient;
                        provider connection string=&quot;data source=PCName\SQLEXPRESS;
                        initial catalog=myDbase;user id=myusername;password=2143;MultipleActiveResultSets=True;App=EntityFramework&quot;" 
                        providerName="System.Data.EntityClient" />
</connectionStrings> 
```

我需要使用*用户*名和*密码*来满足服务器的要求，这样我就可以使用实体框架版本将我的项目连接到服务器。5\. 我的问题有什么解决方案？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:08:12.460

在我重新配置服务器`log-on as NetworkService`并重新构建后，`connectionString`我的问题就解决了。

```
<connectionStrings><add name="myEntities" 
                        connectionString="metadata=res://*/myDbase.csdl
                        |res://*/myDbase.ssdl|res://*/myDbase.msl;provider=System.Data.SqlClient;
                        provider connection string=&quot;data source=PCName\SQLEXPRESS;
                        initial catalog=myDbase;user id=myusername;password=2143;MultipleActiveResultSets=True;integrated security=true;App=EntityFramework&quot;" 
                        providerName="System.Data.EntityClient" />
</connectionStrings> 
```

参考： http: [//odetocode.com/blogs/scott/archive/2012/08/15/a-troubleshooting-guide-for-entity-framework-connections-amp-migrations.aspx](http://odetocode.com/blogs/scott/archive/2012/08/15/a-troubleshooting-guide-for-entity-framework-connections-amp-migrations.aspx)

# openlayers - 如何更改 OpenLayers 样式？

> ID：15515395
> 
> 赞同：3
> 
> 时间：2013-03-20T04:32:49.430
> 
> 标签：openlayers, geoserver, sld

我对网络地图非常非常陌生。我有一个由 PostGis 数据库中的形状文件制成的 OpenLayers 地图，有一个矢量图层，它具有默认样式（GeoServer SLD），但是当用户单击刷新按钮时，我想更改矢量图层的样式。我在网上搜索，我没有找到简单明了的例子。任何人都请帮助我，或者也许有人想做同样的事情并为此找到简单的教程？任何帮助都非常感谢。

```
<script type="text/javascript">
    var map;
    function init() {
    var bounds = new OpenLayers.Bounds(
        68.089442, 6.752729,
        97.407576, 37.072537);

    var options = {
            controls: [ new OpenLayers.Control.Navigation(),
            new OpenLayers.Control.PanZoom()
        ],

        maxExtent: bounds,
        maxResolution: 0.11843675,
        projection: "EPSG:4326",
        units: 'degrees'
    };

    map = new OpenLayers.Map ("map", options );

    var india = new OpenLayers.Layer.WMS(
        "cite:india_state - Tiled", 
        "http://localhost:8080/geoserver/cite/wms",
        {LAYERS: 'cite:india_state',STYLES: 'style',
        //format: format,
        tiled: true,
        tilesOrigin: map.maxExtent.left + ',' + map.maxExtent.bottom
        },
        {buffer: 0, displayOutsideMaxExtent: true,
        isBaseLayer: true,
        yx: {'EPSG:4326' : true}
        }
    );

    var style = new OpenLayers.Style();
    //rule used for all polygons
    var rule_fsa = new OpenLayers.Rule({
        symbolizer: {
            fillColor: "#ff9a9a",
            fillOpacity: 0.5,
            strokeColor: "#000000",
            strokeWidth: 1,
            strokeDashstyle: "dash",
            label: "${name}",
            labelAlign: "cc",
            fontColor: "#333333",
            fontOpacity: 0.9,
            fontFamily: "Arial",
            fontSize: 14
        }
    });

    var rule_highlight = new OpenLayers.Rule({
        filter: new OpenLayers.Filter.Comparison({
            type: OpenLayers.Filter.Comparison.EQUAL_TO,
            property: "classification",
            value: "1",
        }),

        symbolizer: {
            fillColor: "#FF7144",
            fillOpacity: 0.6,
            strokeColor: "#FF0000",
            strokeWidth: 2,
            strokeDashstyle: "solid",
            label: " ${name}",
            labelAlign: "cc",
            fontColor: "#000000",
            fontOpacity: 1,
            fontFamily: "Arial",
            fontSize: 16,
            fontWeight: "600"
        }
    });

    style.addRules([rule_fsa, rule_highlight]);

    var polygon = new OpenLayers.Layer.Vector("Polygon", {
        Style: 'style',
        rendererOptions: {zIndexing: true}
    });

    map.addLayers([india,polygon]);

    map.zoomToMaxExtent();
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T19:46:45.060

矢量图层可以有一个`StyleMap`关联，它可以确定您的特征如何在不同的意图上显示：默认样式、选择特征时、编辑时等。

查看示例：[http](http://acanimal.github.io/Openlayers-Cookbook/) ://acanimal.github.io/Openlayers-Cookbook/请参阅第 7 章使用 StyleMap 和渲染意图代码。该代码创建一个空矢量图层，您可以在其中添加功能并重新定义默认值和选择意图。

我还向您推荐 OpenLayers Cookbook [http://www.packtpub.com/openlayers-create-gis-web-applications-cookbook/book](http://www.packtpub.com/openlayers-create-gis-web-applications-cookbook/book)

干杯。

# python - 按键时的 Pygame 声音

> ID：15515397
> 
> 赞同：2
> 
> 时间：2013-03-20T04:32:53.070
> 
> 标签：python, pygame, 2d-games

目前只是在尝试 pygame，我创建了一个白色背景的窗口，只有一个图像。我希望能够使用箭头键移动图像（工作正常）以及按下箭头键时，我想要播放引擎声音 mp3。这是我目前得到的代码：

```
 image_to_move = "dodge.jpg"

    import pygame
    from pygame.locals import *

    pygame.init()
    pygame.display.set_caption("Drive the car")
    screen = pygame.display.set_mode((800, 800), 0, 32)
    background = pygame.image.load(image_to_move).convert()

    pygame.init()

    sound = pygame.mixer.music.load("dodgeSound.mp3")

    x, y = 0, 0
    move_x, move_y = 0, 0

    while True:

        for event in pygame.event.get():
            if event.type == QUIT:
                pygame.quit()
                break

            #Changes the moving variables only when the key is being pressed
            if event.type == KEYDOWN:
                pygame.mixer.music.play()
                if event.key == K_LEFT:
                    move_x = -2
                if event.key == K_RIGHT:
                    move_x = 2
                if event.key == K_DOWN:
                    move_y = 2
                if event.key == K_UP:
                    move_y = -2

            #Stops moving the image once the key isn't being pressed
            elif event.type == KEYUP:
                pygame.mixer.music.stop()
                if event.key == K_LEFT:
                    move_x = 0
                if event.key == K_RIGHT:
                    move_x = 0
                if event.key == K_DOWN:
                    move_y = 0
                if event.key == K_UP:
                    move_y = 0

        x+= move_x
        y+= move_y

        screen.fill((255, 255, 255))
        screen.blit(background, (x, y))

        pygame.display.update() 
```

图像可以正常加载，我可以在屏幕上移动，但是根本没有声音

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:14:31.873

目前，您的脚本将在未按下任何键时停止声音。将 .stop() 命令放入已使用键的特定键事件中应该可以解决它。

此外，不要将声音播放为：

```
pygame.mixer.music.play() 
```

正如您所做的那样，将声音作为您分配的变量播放：

```
sound = pygame.mixer.music.load("dodgeSound.mp3")

if event.type == KEYDOWN:
            sound.play() 
```

或者，使用以下命令分配声音文件：

```
sound = pygame.mixer.Sound("dodgeSound.mp3") 
```

pygame 声音文件的更多示例如下所示：

[http://www.stuartaxon.com/2008/02/24/playing-a-sound-in-pygame/](http://www.stuartaxon.com/2008/02/24/playing-a-sound-in-pygame/)

[http://www.pygame.org/docs/ref/mixer.html](http://www.pygame.org/docs/ref/mixer.html)

# excel - “直到”循环在“for each”循环结束之前退出宏

> ID：15515400
> 
> 赞同：2
> 
> 时间：2013-03-20T04:33:35.950
> 
> 标签：excel, vba

对于工作表的每一行，我都在尝试浏览单元格。当我遇到一个空的牢房时，我会停下来。然后我想去下一行。

为了做到这一点，我使用了一个带有“IsEmpty”条件的“Do until”循环。这个“Do until”循环位于“For each”循环中。“For each”循环用于在第一列中从一个范围转到另一个范围。从 A1 到 A2，再到 A3 等。

我设法成功浏览了第一行。但我无法到达第二排，以及以下几排。我假设“直到”循环退出宏而不让 Excel 读取“下一个 rng”语句......

我的宏退出，活动单元格是第一行的第一个空单元格。（我们现在应该去第二排，而不是停下来）

这是我的代码：

```
Sub label_clusters()

Dim rng As Range, iCounter As Integer
iCounter = 1

For Each rng In Feuil1.Range("A1:A24")

If ActiveCell.Column = 1 Then
Sheets("Feuil2").Cells(iCounter, 1) = rng.Value
Sheets("Feuil2").Cells(iCounter, 2) = rng.Offset(0, 1).Value
iCounter = iCounter + 1
ActiveCell.Offset(0, 2).Select
End If

Do Until IsEmpty(ActiveCell.Value) = True

If ActiveCell.Column <> 1 Then
Sheets("Feuil2").Cells(iCounter, 1) = rng.Value
Sheets("Feuil2").Cells(iCounter, 2) = ActiveCell.Value
iCounter = iCounter + 1
ActiveCell.Offset(0, 1).Select
End If

Loop

Next rng

End Sub 
```

我显然做错了什么，但是在一次又一次的谷歌搜索之后，我现在缺乏想法。任何 suugestion 都可以 =) 非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:59:11.817

问题在于这一行：

```
If ActiveCell.Column = 1 Then 
```

完成第一行后，`ActiveCell`是第一个空单元格，并且`ActiveCell.Column`> 1。因此，对于第一个之后的循环的每次迭代`for each`，第一个代码块都会被跳过，并且`ActiveCell`永远不会更新到下一行的第一个单元格。

查看您的代码，这两个`if`语句似乎都是多余的。`if`我认为如果您同时删除和`end if`行，代码将正确执行。

# oracle - 调用函数失败：ORA-00904：“TEMP_DATA”。“P_LNAME”：标识符无效

> ID：15515406
> 
> 赞同：1
> 
> 时间：2013-03-20T04:34:03.840
> 
> 标签：oracle, plsql

以下函数编译得很好。但是当调用匿名 PL/SQL 代码中的函数时，调用会失败。谁能建议为什么？我正在尝试插入不匹配的（新）数据并更新匹配的（现有）数据。

```
Function Fn_Insert_Data_Using_Merge (p_Id in Number,
                                     p_fname in varchar2,
                                     p_mname in varchar2,
                                     p_lname in varchar2,
                                     p_birth_date in date) Return Boolean
Is
Begin
  Dbms_Output.put_line ('Inside the function Fn_Insert_Data_Using_Merge ...');
  Merge Into test_employee te
    using (select distinct p_Id, p_fname, p_mname, p_lname, p_birth_date
             from test_employee) temp_data
    on (te.first_name = temp_data.p_fname and
        te.middle_name = temp_data.p_mname and
        te.last_name = temp_data.p_lname)
    when matched then 
      update
        set first_name = p_fname,
            middle_name = p_mname,
            last_name = p_lname,
            run_status = 'Updated'
    when not matched then
      insert (id, first_name, middle_name, last_name, birth_date, run_status)
        values
             (p_id, p_fname, p_mname, p_lname, p_birth_date, 'Inserted');

  Dbms_Output.put_line ('Returning successfully from the function Fn_Insert_Data_Using_Merge ...');
  Return True;
Exception
  When Dup_Val_On_Index Then
    Dbms_Output.put_line ('The name already exists...Cannot insert again ..');
    Return False;
  When Others Then
    Dbms_Output.put_line ('Facing some critical error : ' || SQLERRM);
    Return False;
End Fn_Insert_Data_Using_Merge; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:52:07.963

该错误试图告诉您 TEMP_DATA 提取中没有名为 P_LNAME 的列。函数有一个名为“p_lname”的参数，但在提取中您没有分配列别名，因此没有命名字段。此外（虽然不是导致错误的原因），从可能有很多行的表中执行 DISTINCT 是在 USING 子句中将函数参数放入临时表的缓慢方法；你最好使用 SELECT...FROM DUAL。尝试用以下内容替换您的 MERGE 语句，并让我们知道它是如何进行的：

```
Merge Into test_employee te
using (select p_Id as p_Id,
              p_fname as p_fname,
              p_mname as p_mname,
              p_lname as p_lname,
              p_birth_date as p_birth_date
         from dual) temp_data
on (te.first_name = temp_data.p_fname and
    te.middle_name = temp_data.p_mname and
    te.last_name = temp_data.p_lname)
when matched then 
  update
    set first_name = temp_data.p_fname,
        middle_name = temp_data.p_mname,
        last_name = temp_data.p_lname,
        run_status = 'Updated'
when not matched then
  insert (id,                first_name,             middle_name,
          last_name,         birth_date,             run_status)
    values
         (temp_data.p_id,    temp_data.p_fname,      temp_data.p_mname, 
          temp_data.p_lname, temp_data.p_birth_date, 'Inserted'); 
```

分享和享受。

# ios - 自定义照片选择器视图

> ID：15515407
> 
> 赞同：8
> 
> 时间：2013-03-20T04:34:06.347
> 
> 标签：ios, objective-c, xcode, uiimagepickercontroller

我想以自定义形式使用照片选择器视图，例如在屏幕上显示一个矩形以专注于图片的指定区域。但是，UIImagePickerController 只能提供普通的照片选择器视图。是否有任何其他类可以用来替换 UIImagePickerController，或者我应该创建 UIImagePickerController 的子类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T04:42:38.250

您可以使用[ALAsset](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAsset_Class/Reference/Reference.html)库来设计您自己的 ImagePicker。借助 ALAsset 库，您可以从 iOS 相册中提取照片和视频，并将其用于您自己的设计中。

一个很好的例子是[ELCImagePickerController](https://github.com/elc/ELCImagePickerController)

# javascript - AJAX：jQuery ajax api 与 Javascript xhr

> ID：15515412
> 
> 赞同：0
> 
> 时间：2013-03-20T04:34:20.883
> 
> 标签：javascript, jquery, ajax, html

tl；博士：尽管我相信它们是相同的，但下面的两个脚本并不相同。为什么？

我会给你一些关于这篇文章的背景信息。我正在尝试构建一个图像上传表单，该表单发出 AJAX 请求以创建动态上传页面。因为我了解了 HTML5 的 File API，所以我试图在 AJAX 请求中使用它。[我按照MDN](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)上的一些不错的示例构建了自己的实例。我的工作脚本对 AJAX 请求使用直接的 JS，但我尝试构建一个使用 jQuery 的版本。我的问题是，为什么 jQuery 版本不能正常工作？据我所知，它是从 JS xhr 风格的 AJAX 到 jQuery 风格的 AJAX 的直接移植。（这个问题的目的是对jQuery的AJAX API进行学术理解；由于我已经有一个工作脚本，我的实际需求已经得到满足）

这是有效的 Javascript AJAX 请求：

```
$("form").submit(function(){

    var file = $("input:file").get(0).files[0];
    var xhr = new XMLHttpRequest();
    var fd = new FormData();

    xhr.open("POST", "/upload", true);
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && xhr.status == 200) {
            alert(xhr.responseText);
        }
    };
    fd.append('img', file);
    xhr.send(fd);

    return false;

}); 
```

和非工作 jQuery 版本：

```
$("form").submit(function(){

    var fd = new FormData();
    var file = $("input:file").get(0).files[0];
    fd.append('img', file);

    $.post("/upload", fd, function(data){
        alert(data);
    });

    return false;

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:38:44.093

As posted in [the documentation](http://api.jquery.com/jQuery.post/), `$.post` accepts either a plain object or a string as its data argument. You cannot use `FormData`.

> **data**
> Type: PlainObject or String
> *A plain object or string that is sent to the server with the request.*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:44:03.327

如果它不是字符串， jQuery 会调用（和其他）`$.param`的第二个参数。不是字符串，但on无效。如果要使用原始值，则必须在ajax 设置中设置为：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)`$.post``fd``$.param``fd``fd``processData``false`

```
$.ajax({
    ur: "/upload",
    data: fd,
    processData: false,
}).done(function (data) {
    console.log(data);
}); 
```

# python - Google App Engine：存储数据和查询数据

> ID：15515417
> 
> 赞同：0
> 
> 时间：2013-03-20T04:34:59.580
> 
> 标签：python, google-app-engine, jpa, google-cloud-datastore

我想知道存储数据的最佳方式是什么适合我的情况。我想为一个人存储一个属性列表，例如电话号码。例如：

姓名：John Doe 号码：0998234、23443145、2341234、3425425

问题是，给定一个数字，我如何通过“数字”属性搜索来定位 John Doe。从我读过的内容来看，没有使用 GAE 的 LIKE 语句？

谢谢，

编辑：

我将使用 python 来抓取数据并将其插入数据存储区。然后我将使用[Google Cloud Endpoints](https://developers.google.com/eclipse/docs/cloudsql-jpatools) (Java JPA Querys) 查询这些数据。目前我无法搜索属性中的多个值并返回相应的实体，因为 GAE 数据存储中没有可用的 LIKE 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:06:59.400

您可以使用重复属性。这是一个例子：

```
class User(ndb.Model):
    name = ndb.StringProperty(required=True)
    numbers = ndb.StringProperty(repeated=True)

# save a user
john_doe = User(name='John Doe',
                numbers=['0998234', '23443145', '2341234', '3425425'])
john_doe.put()

# query with a number '0998234'
query = User.query(User.numbers == '0998234')
for matched_user in query:
    # do something with matched_user
    ...
    ... 
```

# php - 使用 Jquery 为不同的 ID 显示隐藏

> ID：15515418
> 
> 赞同：-1
> 
> 时间：2013-03-20T04:35:01.783
> 
> 标签：php, jquery

我使用以下代码使用 javascript 函数显示/隐藏 div。

我怎么能用 Jquery 写这个？？？每个 div 的 ID 都不同。

**Javascript函数：**

```
function showHide(id) {
    var divid = id;
    var ele = document.getElementById("showHideDiv_"+divid);
    if(ele.style.display == "block") {
            ele.style.display = "none";
      }
    else {
        ele.style.display = "block";
    }
} 
```

**Html 和 PhP 代码：**

```
for($i=1;$i<count($data);$i++) 
{
   <a href="javascript:void(0);" onclick="return showHide(<?php echo $i; ?>);">

 <div id="showHideDiv_<?php echo $i; ?>" class="coomentbox" style="display:none;">
   // some content within div
 </div>

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:52:41.933

```
function showHide(id) {
   $( '#showHideDiv_'+id ).toggle();  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:46:09.257

试试这个：

```
function showHide(id) {
    var divid = id;

    if ( ( $( '#showHideDiv_'+id ).is( ":visible" ) ) 
              $( '#showHideDiv_'+id ).hide();
   else
               $( '#showHideDiv_'+id ).show();
} 
```

# performance - 在浏览器 IE8 ~ 10 中使用 flash 直接模式时 mouseChildren 为 true 时性能变差

> ID：15515420
> 
> 赞同：1
> 
> 时间：2013-03-20T04:35:09.577
> 
> 标签：performance, flash, internet-explorer, fullscreen, displayobject

我遇到了一种奇怪的情况，导致我们`DisplayObject`的 s 性能不佳。情况如下：

1.  我们为我们的 3D Flash Web 游戏项目使用 Stage3D 和直接模式。

2.  我们使用 CS6 为这个项目构建我们的 GUI。*在（并且仅在）Internet Explorer 中，当屏幕从 Flash 全屏模式（不是*浏览器全屏）切换到普通屏幕模式时，性能会变差。

3.  我们的主游戏 GUI 是 a `DisplayObject`，它有很多孩子。

经过多次测试，我终于发现在主游戏界面属性为假*或*没有“直接模式”的情况下，性能并*没有变差。*鉴于这种情况只发生在具有 FlashPlayer 直接模式的 Internet Explorer 中，我有什么办法可以修改我的代码吗？`mouseChildren`

# asp.net-mvc-4 - 继承类型的 WebApi 模型绑定

> ID：15515423
> 
> 赞同：14
> 
> 时间：2013-03-20T04:35:12.230
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我希望在 WebApi 中处理继承类型的模型绑定，而我真正想做的是使用默认模型绑定来处理绑定（除了选择无法这样做的类型），但我我错过了一些基本的东西。

所以说我有以下类型：

```
public abstract class ModuleVM
{
    public abstract ModuleType ModuleType { get; }
}

public class ConcreteVM : ModuleVM
{

} 
```

使用 MVC 控制器，我会做这样的事情：

```
public class ModuleMvcBinder : DefaultModelBinder
{
    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        if (modelType == typeof(ModuleVM))
        {
            // Just hardcoding the type for simplicity
            Type instantiationType = typeof(ConcreteVM);
            var obj = Activator.CreateInstance(instantiationType);
            bindingContext.ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(null, instantiationType);
            bindingContext.ModelMetadata.Model = obj;
            return obj;
        }
        return base.CreateModel(controllerContext, bindingContext, modelType);
    }

}

[AttributeUsage( AttributeTargets.Class | AttributeTargets.Enum | AttributeTargets.Interface | AttributeTargets.Parameter | AttributeTargets.Struct | AttributeTargets.Property, AllowMultiple = false, Inherited = false)]
public class ModuleMvcBinderAttribute : CustomModelBinderAttribute
{
    public override IModelBinder GetBinder()
    {
        return new ModuleMvcBinder();
    }
} 
```

然后使用控制器上的属性，一切都很好，我正在利用 DefaultModelBinder 进行实际工作，我基本上只是提供正确的对象实例化。

那么我该如何为 WebApi 版本做同样的事情呢？

如果我使用自定义模型绑定器（例如[在 Asp.Net Web API 中实现自定义模型绑定器时出错](https://stackoverflow.com/questions/13805915/error-implementing-a-custom-model-binder-in-asp-net-web-api)），我的问题是（我相信）在 BindModel 方法中我没有找到使用“标准”http 的好方法一旦我实例化对象就绑定。正如其他帖子中所建议的那样，我可以专门针对 JSON（[将 Json 反序列化为 Asp.Net Web API 中的派生类型](https://stackoverflow.com/questions/12638741/deserialising-json-to-derived-types-in-asp-net-web-api)）或 XML（[将我的自定义模型绑定到我的 POST 控制器](https://stackoverflow.com/questions/10643590/getting-my-custom-model-bound-to-my-post-controller)）来执行此操作，但在我看来，自从 web api 应该将其分开，并且是-它只是不知道如何确定类型。（所有混凝土类型自然都处理得很好。）

我是否忽略了一些明显的事情，我应该在实例化对象后将 BindModel 调用定向到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:42:43.797

以下是一个示例，其中我在我的类型中具有继承性，并且在进行了一些设置（例如使用 Xml 格式化程序的 datacontractserializer 所需的 KnownType 属性进行装饰）和 Json 格式化程序上的 TypeNameHandling 设置之后，我们可以预期两个 xml/json 请求的行为一致。

```
using Newtonsoft.Json;
using System;
using System.Collections.Generic;
using System.Net;
using System.Net.Http;
using System.Net.Http.Formatting;
using System.Net.Http.Headers;
using System.Runtime.Serialization;
using System.Web.Http;
using System.Web.Http.SelfHost;

namespace Service
{
    class Service
    {
        private static HttpSelfHostServer server = null;
        private static string baseAddress = string.Format("http://{0}:9095/", Environment.MachineName);

        static void Main(string[] args)
        {
            HttpSelfHostConfiguration config = new HttpSelfHostConfiguration(baseAddress);
            config.Routes.MapHttpRoute("Default", "api/{controller}/{id}", new { id = RouteParameter.Optional });
            config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;
            config.Formatters.JsonFormatter.SerializerSettings.TypeNameHandling = TypeNameHandling.Objects;

            try
            {
                server = new HttpSelfHostServer(config);
                server.OpenAsync().Wait();

                Console.WriteLine("Service listenting at: {0} ...", baseAddress);

                TestWithHttpClient("application/xml");

                TestWithHttpClient("application/json");

                Console.ReadLine();
            }
            catch (Exception ex)
            {
                Console.WriteLine("Exception Details:\n{0}", ex.ToString());
            }
            finally
            {
                if (server != null)
                {
                    server.CloseAsync().Wait();
                }
            }
        }

        private static void TestWithHttpClient(string mediaType)
        {
            HttpClient client = new HttpClient();

            MediaTypeFormatter formatter = null;

            // NOTE: following any settings on the following formatters should match
            // to the settings that the service's formatters have.
            if (mediaType == "application/xml")
            {
                formatter = new XmlMediaTypeFormatter();
            }
            else if (mediaType == "application/json")
            {
                JsonMediaTypeFormatter jsonFormatter = new JsonMediaTypeFormatter();
                jsonFormatter.SerializerSettings.TypeNameHandling = TypeNameHandling.Objects;

                formatter = jsonFormatter;
            }

            HttpRequestMessage request = new HttpRequestMessage();
            request.RequestUri = new Uri(baseAddress + "api/students");
            request.Method = HttpMethod.Get;
            request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue(mediaType));
            HttpResponseMessage response = client.SendAsync(request).Result;
            Student std = response.Content.ReadAsAsync<Student>().Result;

            Console.WriteLine("GET data in '{0}' format", mediaType);
            if (StudentsController.CONSTANT_STUDENT.Equals(std))
            {
                Console.WriteLine("both are equal");
            }

            client = new HttpClient();
            request = new HttpRequestMessage();
            request.RequestUri = new Uri(baseAddress + "api/students");
            request.Method = HttpMethod.Post;
            request.Content = new ObjectContent<Person>(StudentsController.CONSTANT_STUDENT, formatter);
            request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue(mediaType));
            Student std1 = client.SendAsync(request).Result.Content.ReadAsAsync<Student>().Result;

            Console.WriteLine("POST and receive data in '{0}' format", mediaType);
            if (StudentsController.CONSTANT_STUDENT.Equals(std1))
            {
                Console.WriteLine("both are equal");
            }
        }
    }

    public class StudentsController : ApiController
    {
        public static readonly Student CONSTANT_STUDENT = new Student() { Id = 1, Name = "John", EnrolledCourses = new List<string>() { "maths", "physics" } };

        public Person Get()
        {
            return CONSTANT_STUDENT;
        }

        // NOTE: specifying FromBody here is not required. By default complextypes are bound
        // by formatters which read the body
        public Person Post([FromBody] Person person)
        {
            if (!ModelState.IsValid)
            {
                throw new HttpResponseException(Request.CreateErrorResponse(HttpStatusCode.BadRequest, this.ModelState));
            }

            return person;
        }
    }

    [DataContract]
    [KnownType(typeof(Student))]
    public abstract class Person : IEquatable<Person>
    {
        [DataMember]
        public int Id { get; set; }

        [DataMember]
        public string Name { get; set; }

        public bool Equals(Person other)
        {
            if (other == null)
                return false;

            if (ReferenceEquals(this, other))
                return true;

            if (this.Id != other.Id)
                return false;

            if (this.Name != other.Name)
                return false;

            return true;
        }
    }

    [DataContract]
    public class Student : Person, IEquatable<Student>
    {
        [DataMember]
        public List<string> EnrolledCourses { get; set; }

        public bool Equals(Student other)
        {
            if (!base.Equals(other))
            {
                return false;
            }

            if (this.EnrolledCourses == null && other.EnrolledCourses == null)
            {
                return true;
            }

            if ((this.EnrolledCourses == null && other.EnrolledCourses != null) ||
                (this.EnrolledCourses != null && other.EnrolledCourses == null))
                return false;

            if (this.EnrolledCourses.Count != other.EnrolledCourses.Count)
                return false;

            for (int i = 0; i < this.EnrolledCourses.Count; i++)
            {
                if (this.EnrolledCourses[i] != other.EnrolledCourses[i])
                    return false;
            }

            return true;
        }
    }
} 
```

# facebook - Facebook API 未获得访问令牌

> ID：15515435
> 
> 赞同：1
> 
> 时间：2013-03-20T04:35:59.087
> 
> 标签：facebook, facebook-javascript-sdk, facebook-php-sdk, facebook-authentication

所以，我使用 FB 登录按钮让用户登录。单击 FB 登录按钮后，用户将被重定向到名为 fb_redirect.php 的文件，以便 php 可以启动会话。

```
window.fbAsyncInit = function() 
{
    FB.init({
        appId: '12345', 
        status: true, 
        cookie: true, 
        xfbml: true
    });
    FB.Event.subscribe('auth.login', function(response) 
    {
        window.location = '/fb_redirect.php';
    });
}; 
```

在 fb_redirect 文件中，我有以下内容：

```
session_start();
require("model/facebook_api/src/facebook.php");

$facebook = new Facebook(array(
    'appId' => '12345',
    'secret' => '12345'
));

$access_token = $facebook->getAccessToken();
$facebook->setAccessToken($access_token);

if($access_token != "") 
{
    $user = $facebook->getUser();

    if($user != 0)
    {
        $user_profile = $facebook->api("/".$user);  
        $fb_id = $user_profile['id'];
        $fb_first_name = $user_profile['first_name'];
        $fb_last_name = $user_profile['last_name'];
        $fb_email = $user_profile['email'];

        $_SESSION['login'] = "true";
    }
}

header("Location:index.php"); 
```

文件中发生的事情有点令人困惑。它真的是命中或错过。如果我已经登录 FB，然后尝试使用 FB 登录按钮登录我的站点，则会弹出一个屏幕然后很快消失。但是，它不会让我登录到我的网站。

如果我没有登录 FB 并尝试登录我的网站，则会弹出一个屏幕并提示我登录 FB。当我在弹出屏幕中成功登录 FB 时，会发生重定向。但是，当它发生时，我要么收到一条错误消息，告诉我我需要一个有效的访问令牌。其他时候，它只是重定向到主页而不设置会话。所以，我猜根本没有设置访问令牌。

我在某处读到可能是您必须手动设置访问令牌。所以，我尝试了：

```
$facebook->setAccessToken($access_token); 
```

但是，那没有用。

我不知道如何理解这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T15:34:30.467

don't know if it helps (because, let's face it, FB SDK is quite versatile), but FB guidelines would rather you get the user before you get the access token; maybe (just a theory) when you're already logged in, the access token is not available to your $facebook object until you execute the getUser() method...seems reasonnable, i guess, to get the user before getting his access token.

# android - aChartEngine：是否可以只显示一个象限，仅在其中启用平移和缩放功能？

> ID：15515437
> 
> 赞同：0
> 
> 时间：2013-03-20T04:36:05.847
> 
> 标签：android, achartengine

基本上我想将平移限制在图表的第一象限。用户不应该能够平移到负 x 或 y 轴。但他们应该只能在第一象限内进行缩放和平移。我试过：

```
mRenderer.setXAxisMin(0); // to start off from 0 in X
mRenderer.setYAxisMin(0); // to start off from 0 in Y
mRenderer.setPanEnabled(false, false); // dont let them pan in any axis,
// but I want them to pan within the first quadrant - !problem!
mRenderer.setZoomEnabled(true, true); // let them zoom anywhere in xy quadrant 
```

所以问题是一旦他们放大，他们就不能在那个缩放级别的正象限内平移。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:08:52.170

看看Javadocs`setPanLimits`和`setZoomLimits`in the `XYMultipleSeriesRenderer`Javadocs。

# .htaccess - 为什么在重写 URL 中重复查询字符串？

> ID：15515439
> 
> 赞同：2
> 
> 时间：2013-03-20T04:36:09.233
> 
> 标签：.htaccess, rewrite, query-string

我有这些重写。第一个（用于画廊）按预期工作。第二个（用于照片）有效，但查询字符串重复。所以它转发到：[http ://www.domain.com/photo-TheID?id=TheID](http://www.domain.com/photo-TheID?id=TheID)

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /gallery\.php\?set=([^/]*)\ HTTP/
RewriteRule ^gallery\.php$ http://www.domain.com/gallery?set=%1 [R=301,L]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /photo\.php\?id=([^/]*)\ HTTP/
RewriteRule ^photo\.php$ http://www.domain.com/photo-%1 [R=301,L] 
```

但是，如果我添加 ? 到重写的结尾

```
RewriteRule ^photo\.php$ http://www.domain.com/photo-%1? [R=301,L] 
```

然后它按预期工作转发到： http: [//www.domain.com/photo-TheID](http://www.domain.com/photo-TheID)

我的问题是为什么在没有“？”的情况下重复该查询字符串？在末尾？我很困惑，因为第一次重写（对于画廊）没有？但它不会重复查询字符串。如果我添加 ? 在画廊重写的末尾，它将“%3f”添加到 URL 的末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:17:08.287

因为除非您在替换 URL 中放置尾随问号，否则它会自动附加，前提是它不包含新的查询字符串。

> “*当你想删除一个现有的查询字符串时，只用一个问号结束替换字符串*”。
> 
> 检查此 Apache 链接中的[修改查询字符串](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)的标题。

你的问题：

> 我很困惑，因为第一次重写（对于画廊）没有？

原因是第一条重写规则：

```
RewriteRule ^gallery\.php$ http://www.domain.com/gallery?set=%1 
```

**创建一个新的查询字符串，在这种情况下，传入的查询字符串不会自动附加，除非您使用QSA**标志明确执行此操作。

# c - 作用域如何影响同名的全局和局部结构？

> ID：15515441
> 
> 赞同：1
> 
> 时间：2013-03-20T04:36:16.377
> 
> 标签：c

我已经声明了两个具有相同名称 foo 的不同结构，因为其中一个被声明为全局的，并且可以被程序中的任何函数轻松访问。但是我在 main 中有第二个结构，它是本地声明的。

最坏的情况是我需要在主要访问它们？我通过声明具有不同名称的结构变量来做到这一点。但现在的问题是我需要检查结构的大小......我应该如何获得局部结构的大小而不是全局结构？

```
#include <stdio.h>
#include <stdlib.h>

struct foo {
    char arr1[200];
    int x_val;
    int y_val;
    float result;
};
struct foo globe_foo;

int main()
{
    struct foo {
        char c;
        char arr[20];
        int x;
    }; 

    struct foo my_foo;
    globe_foo.x_val = 20;
    printf("Globe foo x_val: %d\n",globe_foo.x_val);
    printf("Size of struct foo is: %d\n",sizeof(struct foo));

    //how to check size of global decleared stuct foo? 
    printf("Size of struct foo is: %d\n",sizeof(struct foo));           
    system("pause"); 
    return 0;                        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:07:07.393

块作用域内与全局作用域同名的变量隐藏全局标识符

[6.2.1 中的 ISO C9899](http://busybox.net/~landley/c99-draft.html#6.2.1)说：

> 如果一个标识符在同一个名称空间中指定了两个不同的实体，则作用域可能会重叠。如果是这样，一个实体的范围（内部范围）将是另一个实体范围（外部范围）的严格子集。在内部范围内，标识符指定在内部范围内声明的实体；在外部范围内声明的实体在内部范围内隐藏（不可见）。

因此，`struct foo`如果您仅引用`main()`.

建议：对这些类型使用不同的名称或使用不同名称的变量或对结构类型使用 typedef。

您`printf("Size of struct foo is: %d\n",sizeof(struct foo));`将只给出本地结构 foo 的大小（取决于 28 或 25）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T10:14:21.587

标准 C 不提供任何方式来引用被本地声明隐藏的标识符（对象名称或类型名称）。

`struct foo`在这种情况下，您可以通过使用对象的大小来查看全局的大小`sizeof globe_foo`。

GCC（和支持其扩展的编译器）提供了一种引用对象类型的方法，`__typeof__`. 因此，在 GCC 中，您可以参考`globe_foo`with的类型`__typeof__(struct globe_foo)`。

另一种选择是给全局类型一个别名，使用`typedef`. 如果在文件范围内声明`typedef struct foo foo_t;`，则`foo_t`即使`struct foo`隐藏该类型，该类型也将在函数内可见。

打印尺寸（类型的值`size_t`）时，您应该使用带有，而不是的`%zu`规范。`printf``%d`

# php - Mysql 时间戳和 php date()

> ID：15515445
> 
> 赞同：7
> 
> 时间：2013-03-20T04:36:41.720
> 
> 标签：php, mysql

mysql 时间戳采用标准格式 2013-02-20 02:25:21，当我使用 date('H:i:s',$date) 时，我得到相同的无效输出 18:33:33，我该如何得到正确的输出？时:分:秒

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T04:39:25.743

用这个`date('Y-m-d H:i:s',strtotime($date));`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-20T04:53:18.017

提示：尝试使用 MYSQL[`DATE_FORMAT`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)函数

```
SELECT DATE_FORMAT('2013-02-20 02:25:21', '%H:%i:%s'); 
```

如果您只想使用 PHP 进行操作，请使用[`strtotime`](http://php.net/manual/en/function.strtotime.php)

```
 date('H:i:s',strtotime('2013-02-20 02:25:21')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T04:39:16.010

这可能会帮助你

```
date('H:i:s',strtotime($date)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T04:43:09.700

试试这个 `date('Y-m-d H:i:s',strtotime($date));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T04:44:23.057

尝试[`strptime()`](http://php.net/manual/en/function.strptime.php)

```
strptime($date,"%H:%M:%S") 
```

# eclipse - Eclipse RCP Juno 调试器不会在断点处停止

> ID：15515447
> 
> 赞同：0
> 
> 时间：2013-03-20T04:36:50.097
> 
> 标签：eclipse, debugging, breakpoints

我正在使用 Eclipse RPC Juno 来修改现有的插件项目。我有 Java 1.7。当我在调试模式下运行应用程序时，它不会在断点处停止。我确定代码已执行。有没有人有同样的问题？你如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:11:24.740

您可能使用过“跳过所有断点”命令。在下面的屏幕截图中，这是按下的按钮，从左上角到右下角有一条线。如果是这样，再次点击它以启用所有断点。

![在此处输入图像描述](../Images/22af852f7094f5d320ca5379918af7b2.png)

# jquery - 将横幅的内部 HTML 复制到我的 div

> ID：15515449
> 
> 赞同：0
> 
> 时间：2013-03-20T04:36:58.787
> 
> 标签：jquery, ajax, get

嗨，我使用 iframe 作为横幅，我有一个选项卡式 div，它将通过 $.get 在每个选项卡单击时加载数据，彻底的 $.get 方法我们可以获取横幅脚本并通过 $.get 方法将其加载到我的页面上

我在每次点击标签时都写了 get like

```
$.get("/index.php", { 'ext': "myvotingpics",'action' : "Show" },
            function(response) {                                
                data = response;                                       
            }); 
```

我正在将数据附加到我的主页 div ...

```
 $('#My_div").html(data); 
```

.但是单击任何选项卡后，它会显示空白屏幕....如果我删除横幅脚本，它将正常工作....所以我的问题是如何每次通过 $.get 方法在我的页面上加载**脚本**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:47:24.290

它不是附加的，而是替换的。但只要数据中的文本是有效的 html 就可以了。

但在你的情况下，它是一个脚本。所以应该是`<script>'yourDataHere'</script>`

但我建议您使用`$.getScript`来加载和运行脚本：

```
$.getScript("test.js", function(){
    alert("Running test.js");
}); 
```

# javascript - 悬停在未选中的其他元素上的类 - javascript

> ID：15515451
> 
> 赞同：0
> 
> 时间：2013-03-20T04:37:09.160
> 
> 标签：javascript, html, css, addclass, onhover

## HTML

```
<div>
    <ul class="navBar"> 
        <li class="selected"><a href="#">HOME</a></li>
        <li><a href="#">WORKS</a></li>
        <li><a href="#">ARTICLES</a></li>
        <li><a href="#">ABOUT</a></li>
    </ul>
</div> 
```

## CSS

```
.selected{
    background-color: #CCCCCC;
}

.onHover{
    display: block;
    background-color: #0088FF;
} 
```

## JAVASCRIPT

```
$(function() {
        $("ul.navBar li a").hover(
            function(){
                $(this).addClass("onHover");
            },
            function(){
                $(this).removeClass("onHover");
        });
    }); 
```

我想要的是 javascript 在悬停时不将“onHover”类添加到 HOME 链接，只是其他三个链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:41:57.103

您可以使用[not()](http://api.jquery.com/not-selector/)选择器来不允许选择该项目。

```
$(function() {
    $("ul.navBar li:not(.selected) a").hover(
        function(){
            $(this).addClass("onHover");
        },
        function(){
            $(this).removeClass("onHover");
    });
}); 
```

但是如果你真的想要的话，你可以用纯 CSS 的解决方案来做到这一点。不需要 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:44:44.563

使用 jQuery`:not()`选择器不包含“selected”类。最好使用事件委托`.on()`，而不是直接将事件绑定到元素，即。`.hover()`.

有关[使用](http://api.jquery.com/not-selector/)`:not()`. _

```
$(function () {
    $(document).on('mouseenter', 'ul.navBar li:not(.selected) a', function () {
        $(this).addClass('onHover');
    });
    $(document).on('mouseleave', 'ul.navBar li:not(.selected) a', function () {
        $(this).removeClass('onHover');
    });
}); 
```

见小提琴：http: [//jsfiddle.net/4rZ3D/](http://jsfiddle.net/4rZ3D/)

# android - android:空指针异常

> ID：15515455
> 
> 赞同：0
> 
> 时间：2013-03-20T04:37:23.170
> 
> 标签：android

我一直在开发一个应用程序，公平预测是其中的一部分..它也包含一个 webpart..但我无法登录该部分..该应用程序到那时终止..登录页面链接到一个 jsp 页面并转入一个mysql数据库..我在这里发布代码..请帮助我..提前谢谢..

## 登录.java

```
package com.example.tracemeendpointsjson;

import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class TLogin extends Activity  {

    EditText uname,pwd;
    Button log,signup;
    String response="";
    NameValuePair v;
    String LoginID,LoginPassword;
    HttpRequestClass mynetworkclass;
    ArrayList<NameValuePair> namevaluepair;

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tlogin);
        uname=(EditText) findViewById(R.id.uname);
        pwd=(EditText) findViewById(R.id.pwd);
        log=(Button) findViewById(R.id.login);
        signup=(Button) findViewById(R.id.bSignup);
        log.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                LoginID=uname.getText().toString();
                LoginPassword=pwd.getText().toString();
                //CommonClassForLogin q=(CommonClassForLogin) getApplication();
                //q.myUID=LoginID;

                String url="http://"+details.ip+"taxinew/mobile/login.jsp";

            new AsyncTaskLogin().execute(url,LoginID,LoginPassword);

            }
        });

    }
    public class AsyncTaskLogin extends AsyncTask<String, Integer, String>  
    {

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            mynetworkclass=new HttpRequestClass();
            namevaluepair=new ArrayList<NameValuePair>();
            namevaluepair.add(new BasicNameValuePair("username",params[1]));
            namevaluepair.add(new BasicNameValuePair("password",params[2]));

            try {
                String result=mynetworkclass.getinformation(params[0],namevaluepair);
                Log.d("dsfwewerte", result);
                result=result.replaceAll("\\r|\\n", "");
            return result;

        } catch (Exception e) {
            e.printStackTrace();
        }
            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            //Log.d("222222222", result);

            if(result.equals("0"))
            {
                Toast.makeText(getApplicationContext(),"Welcomes You", Toast.LENGTH_SHORT).show();
                Intent in=new Intent(getApplicationContext(), Trip.class);
                startActivity(in);

                //Log.d("11111111111", result);
            }
            else
            {
                Toast.makeText(getApplicationContext(),"Wrong Entry", Toast.LENGTH_SHORT).show();
                Intent in1=new Intent(getApplicationContext(), Home.class);
                startActivity(in1);

                //Log.d("0000000000", result);

            }

        }

    }

} 
```

## HttprequestClass 如下

```
package com.example.tracemeendpointsjson;

import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.ParseException;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;
import android.widget.Toast;

public class HttpRequestClass {
    HttpClient httpclient;
    public String getinformation(String url,ArrayList<NameValuePair> namevaluepair) throws ParseException, IOException
    {
        httpclient=new DefaultHttpClient();
        HttpPost request=new HttpPost(url);
        request.setEntity(new UrlEncodedFormEntity(namevaluepair));
        try
        {
            HttpResponse respnse=httpclient.execute(request);
            int status=respnse.getStatusLine().getStatusCode();
            if(status==200)
            {
                HttpEntity e=respnse.getEntity();
                String data=EntityUtils.toString(e);
                return data;
            }
        }
        catch(ClientProtocolException e)
        {
            e.printStackTrace();
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }

        return null;

    }

    public String getsingleinformation(String url) throws ParseException, IOException
    {
        httpclient=new DefaultHttpClient();
        HttpPost request=new HttpPost(url);
        try
        {
            HttpResponse respnse=httpclient.execute(request);
            int status=respnse.getStatusLine().getStatusCode();
            if(status==200)
            {
                HttpEntity e=respnse.getEntity();
                String data=EntityUtils.toString(e);
                return data;
            }                               
        }
        catch(ClientProtocolException e)
        {
            e.printStackTrace();
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }

        return null;

    }
} 
```

## 清单文件如下所列：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.tracemeendpointsjson"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET"/>
 <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.SEND_SMS"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>

    <application
        android:icon="@drawable/traffic"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
           <uses-library android:name="com.google.android.maps"/>
        <activity
            android:name="com.example.tracemeendpointsjson.Home"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MainActivity"></activity>
         <activity
            android:name=".UploadDetails"></activity>
        <activity
            android:name=".CurrentLocation"></activity>
        <activity
            android:name=".GmailLogin"></activity>
         <activity
            android:name=".MailReceivers"></activity>
         <activity
            android:name=".ShowWeather"></activity>
         <activity
            android:name=".DisplayWeather"></activity>
          <activity
            android:name=".Trip"></activity>
           <activity
            android:name=".ShowRoute"></activity>
           <activity
            android:name=".Parking"></activity>
            <activity
            android:name=".Estfare"></activity>
             <activity
            android:name=".GetFare"></activity>
           <activity 
               android:name=".TLogin">
           </activity>
           <activity
            android:name=".ParkingPlaceShow"></activity>

        <service android:name=".ServiceClass" >
        </service>

      <!-- <service android:name=".GPSTracker"></service> -->  

    </application>

</manifest> 
```

## logcat 输出：

```
03-20 09:51:30.866: E/AndroidRuntime(476): FATAL EXCEPTION: main
03-20 09:51:30.866: E/AndroidRuntime(476): java.lang.NullPointerException
03-20 09:51:30.866: E/AndroidRuntime(476):  at com.example.tracemeendpointsjson.TLogin$AsyncTaskLogin.onPostExecute(TLogin.java:85)
03-20 09:51:30.866: E/AndroidRuntime(476):  at com.example.tracemeendpointsjson.TLogin$AsyncTaskLogin.onPostExecute(TLogin.java:1)
03-20 09:51:30.866: E/AndroidRuntime(476):  at android.os.AsyncTask.finish(AsyncTask.java:417)
03-20 09:51:30.866: E/AndroidRuntime(476):  at android.os.AsyncTask.access$300(AsyncTask.java:127)
03-20 09:51:30.866: E/AndroidRuntime(476):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
03-20 09:51:30.866: E/AndroidRuntime(476):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 09:51:30.866: E/AndroidRuntime(476):  at android.os.Looper.loop(Looper.java:130)
03-20 09:51:30.866: E/AndroidRuntime(476):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-20 09:51:30.866: E/AndroidRuntime(476):  at java.lang.reflect.Method.invokeNative(Native Method)
03-20 09:51:30.866: E/AndroidRuntime(476):  at java.lang.reflect.Method.invoke(Method.java:507)
03-20 09:51:30.866: E/AndroidRuntime(476):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-20 09:51:30.866: E/AndroidRuntime(476):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-20 09:51:30.866: E/AndroidRuntime(476):  at dalvik.system.NativeStart.main(Native Method)
03-20 09:51:30.896: W/ActivityManager(83):   Force finishing activity com.example.tracemeendpointsjson/.TLogin
03-20 09:51:31.428: W/ActivityManager(83): Activity pause timeout for HistoryRecord{40803618 com.example.tracemeendpointsjson/.TLogin}

03-20 09:51:33.555: E/InputDispatcher(83): channel '40800e70 com.example.tracemeendpointsjson/com.example.tracemeendpointsjson.Home (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
03-20 
09:51:33.555: E/InputDispatcher(83): channel '40800e70 com.example.tracemeendpointsjson/com.example.tracemeendpointsjson.Home (server)' ~ Channel is unrecoverably broken and will be disposed! 
```

* * *

Login.jsp如下：

```
<%-- 
    Document   : login
--%>
<%@page import="javax.swing.JOptionPane,DB.DbCon"%>
<%@page import="org.json.JSONObject" %>
<%@page import="org.json.JSONArray" %>
<%@page import="java.sql.ResultSet"%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%
String username=request.getParameter("username");
String password=request.getParameter("password");

JSONObject jo= new JSONObject();
//JSONArray ja=new JSONArray();
String query="select * from Userdetails where name='"+username+"' and pwd='"+password+"' ";

DbCon o=new DbCon();
ResultSet rs=o.selects(query);
         if(rs.next()){
             jo.accumulate("0", true);

         }

       else
                     {

        jo.accumulate("1", false);
               }

     out.print(jo);

%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:46:00.263

试试这些代码..我认为这是问题所在。

```
protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        String result;
        mynetworkclass=new HttpRequestClass();
        namevaluepair=new ArrayList<NameValuePair>();
        namevaluepair.add(new BasicNameValuePair("username",params[1]));
        namevaluepair.add(new BasicNameValuePair("password",params[2]));

        try {
            result=mynetworkclass.getinformation(params[0],namevaluepair);
            Log.d("dsfwewerte", result);
            result=result.replaceAll("\\r|\\n", "");
        return result;

    } catch (Exception e) {
        e.printStackTrace();
    }
        return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:43:50.627

你`result`是空的，一个简单的改变你的 if 条件就可以解决这个问题

```
if("0".equals(result)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:43:23.700

除了 null 之外，只需尝试`result`在您的方法中返回。`doInBackground`在该方法结束时，您将返回 null 这就是它抛出`nullpointer excepection`.

或者您需要在`onPostExecute`方法中检查结果的 null 值，以防止抛出异常。

> ```
>  @Override
>     protected String doInBackground(String... params) {
>         // TODO Auto-generated method stub
>         mynetworkclass=new HttpRequestClass();
>         namevaluepair=new ArrayList<NameValuePair>();
>         namevaluepair.add(new BasicNameValuePair("username",params[1]));
>         namevaluepair.add(new BasicNameValuePair("password",params[2]));
>         try {
>             String result=mynetworkclass.getinformation(params[0],namevaluepair);
>             Log.d("dsfwewerte", result);
>             result=result.replaceAll("\\r|\\n", "");
>         return result;
>     } catch (Exception e) {
>         e.printStackTrace();
>     }
>         return result;       <----- Check this line.
>     }
>     @Override
>     protected void onPostExecute(String result) {
>         // TODO Auto-generated method stub
>         super.onPostExecute(result);
>       //Check for the result is null or not.
>        if(result != null)
>        {
>              if(result.equals("0"))
>              {}
>         }
>    } 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T04:51:27.217

你可以返回`result` `"with No data"`并`default`匹配它，你也可以调试和检查你的响应你得到了什么

# java - java JSON文本编码问题

> ID：15515459
> 
> 赞同：2
> 
> 时间：2013-03-20T04:37:41.873
> 
> 标签：java, json, character-encoding, google-search-appliance, windows-1252

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T06:07:20.280

The text encoding problem was happening because the call which is made to the GSA server using Apache HTTP Client was using a default content encoding character set of `iso-8859-1` but the GSA server expected the HTTP Client request and response to be in `UTF-8` encoding.

This problem got resolved after setting the encoding for HTTPClient -

```
HttpClient httpClient = new HttpClient();
httpClient.getParams().setContentCharset("UTF-8"); 
```

And the servlet response encoding to

`response.setContentType("application/json;charset=UTF-8");`

# .htaccess - joomla URL重写

> ID：15515460
> 
> 赞同：2
> 
> 时间：2013-03-20T04:37:47.143
> 
> 标签：.htaccess, joomla, url-rewriting, joomla-extensions

我正在使用 Joomla 2.5，我正在为站点使用扩展 Enmass，我已经从管理员创建了 SEO URL，但 URL 将显示如下

[http://abc.com/index.php/component/enmasse/deal/view/8/evo_in_line_foldable_scooter_black](http://abc.com/index.php/component/enmasse/deal/view/8/evo_in_line_foldable_scooter_black)

我需要将此 URL 重写为

[http://abc.com/evo_in_line_foldable_scooter_black.html](http://abc.com/evo_in_line_foldable_scooter_black.html)

我曾尝试更改 .htaccess，但没有成功。

如果有人对此有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:54:22.933

您可以在 Joomla 中为此 Enmass 视图创建一个菜单项，它将创建此 URL。

如果没有菜单项 (Itemid) 与原始 URL 一起传递，您看到的 URL 是由 Joomla JRoute 类创建的。

此外，扩展程序可以使用 router.php 文件 (/components/com_enmasse/router.php) 设置自己的路由规则。

# android - check which fragment is loaded in framelayout before replacing it

> ID：15515462
> 
> 赞同：1
> 
> 时间：2013-03-20T04:37:56.010
> 
> 标签：android, android-fragments, android-framelayout, fragmenttransaction

Is it possible to check whether a fragment has already been loaded into a FrameLayout before adding it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-08T17:55:25.750

```
Fragment a = getSupportFragmentManager().findFragmentById(R.id.FrameLayout);

if(a == null)
    FrameLayout is empty 
```

# android - Galaxy Tab2 comes under HDPI or MDPI resolution bucket

> ID：15515465
> 
> 赞同：0
> 
> 时间：2013-03-20T04:38:01.993
> 
> 标签：android, android-layout

I developing Application for Galaxy Tab2\. It has screen resolution of 600*1024(169 PPI). According to [Android Document](http://developer.android.com/guide/practices/screens_support.html#overview),It comes under HDPI Android resolution bucket.Then smallest Width of this device is 600 PPI. Then divide by 1.50 gives 400 dp. So its smallestWidth is 400 dp. Then it goes to sw-320dp folder. But actually it should be in sw600dp.

So my doubt is the Tab2 id HDPI or MDPI? or I done any mistakes in calculations?

**My Code:**

```
public void calculate(View view)
    {
        EditText widthResolution=(EditText)findViewById(R.id.dip_et_screenwidthres);
        EditText heightResolution=(EditText)findViewById(R.id.dip_et_screenheightres);
        EditText size=(EditText)findViewById(R.id.dip_et_screensize);

        String screenWidth = widthResolution.getText().toString();
        Double screenWidthD=Double.valueOf(screenWidth);

        String screenHeight = heightResolution.getText().toString();
        Double screenHeightD=Double.valueOf(screenHeight);

        String screenSize = size.getText().toString();
        Double screenSizeD=Double.valueOf(screenSize);

        Double sumOfXY2=(screenWidthD*screenWidthD)+(screenHeightD*screenHeightD);
        double totalDiagonalRes = Math.sqrt(sumOfXY2);

        Double diagonalPPI =totalDiagonalRes/screenSizeD;

        //used for calculation
        int diagonalPPIInt=diagonalPPI.intValue();

        //Diagonal Resolution in PPI
        String resultDiagonalResolution=String.format("%.2f", diagonalPPI);

        //Android Resolution Bucket
        String resultAndroidResBucket="";
        String resultDiagonalDPSize="";
        String resultWidthHeightDP="";
        String resultSmallestWidthDP="";
        String resultLayoutFolder="";
        String resultDrawableFolder="";

        double smallestWidthDPTemp = 0;

        if(diagonalPPIInt<120)
        {
            resultAndroidResBucket="LDPI"; //0.75

            //Diagonal size
            double diagonalDPSize=diagonalPPI/0.75;
            resultDiagonalDPSize=String.format("%.2f", diagonalDPSize);

            //Width * Height
            double screenWidthDP=screenWidthD/0.75;
            String screenWidthTemp=String.format("%.2f", screenWidthDP);

            double screenHeightDP=screenHeightD/0.75;
            String screenHeightTemp=String.format("%.2f", screenHeightDP);

            resultWidthHeightDP=screenWidthTemp+" dp * "+screenHeightTemp+" dp";

            //Smallest Width
            smallestWidthDPTemp=Math.min(screenWidthDP, screenHeightDP);
            resultSmallestWidthDP=String.format("%.2f", smallestWidthDPTemp);

            //DrawableFolder
            resultDrawableFolder="drawable-ldpi";
        }
        else if(diagonalPPIInt >= 120 && diagonalPPIInt < 160)
        {
            resultAndroidResBucket="MDPI"; //0.00

            //Diagonal size
            double diagonalDPSize=diagonalPPI;
            resultDiagonalDPSize=String.format("%.2f", diagonalDPSize);

            //Width * Height
            double screenWidthDP=screenWidthD;
            String screenWidthTemp=String.format("%.2f", screenWidthDP);

            double screenHeightDP=screenHeightD;
            String screenHeightTemp=String.format("%.2f", screenHeightDP);

            resultWidthHeightDP=screenWidthTemp+" dp * "+screenHeightTemp+" dp";

            //Smallest Width
            smallestWidthDPTemp=Math.min(screenWidthDP, screenHeightDP);
            resultSmallestWidthDP=String.format("%.2f", smallestWidthDPTemp);

            //DrawableFolder
            resultDrawableFolder="drawable-mdpi";
        }
        else if(diagonalPPIInt >= 160 && diagonalPPIInt < 240)
        {
            resultAndroidResBucket="HDPI"; //1.50

            //Diagonal size
            double diagonalDPSize=diagonalPPI/1.50;
            resultDiagonalDPSize=String.format("%.2f", diagonalDPSize);

            //Width * Height
            double screenWidthDP=screenWidthD/1.50;
            String screenWidthTemp=String.format("%.2f", screenWidthDP);

            double screenHeightDP=screenHeightD/1.50;
            String screenHeightTemp=String.format("%.2f", screenHeightDP);

            resultWidthHeightDP=screenWidthTemp+" dp * "+screenHeightTemp+" dp";

            //Smallest Width
            smallestWidthDPTemp=Math.min(screenWidthDP, screenHeightDP);
            resultSmallestWidthDP=String.format("%.2f", smallestWidthDPTemp);

            //DrawableFolder
            resultDrawableFolder="drawable-hdpi";
        }
        else if(diagonalPPIInt >= 240 && diagonalPPIInt < 320)
        {
            resultAndroidResBucket="XHDPI"; //2.00

            //Diagonal size
            double diagonalDPSize=diagonalPPI/2.00;
            resultDiagonalDPSize=String.format("%.2f", diagonalDPSize);

            //Width * Height
            double screenWidthDP=screenWidthD/2.00;
            String screenWidthTemp=String.format("%.2f", screenWidthDP);

            double screenHeightDP=screenHeightD/2.00;
            String screenHeightTemp=String.format("%.2f", screenHeightDP);

            resultWidthHeightDP=screenWidthTemp+" dp * "+screenHeightTemp+" dp";

            //Smallest Width
            smallestWidthDPTemp=Math.min(screenWidthDP, screenHeightDP);
            resultSmallestWidthDP=String.format("%.2f", smallestWidthDPTemp);

            //DrawableFolder
            resultDrawableFolder="drawable-xhdpi";
        }
        else if(diagonalPPIInt >= 320)
        {
            resultAndroidResBucket="XXHDPI";

            //Diagonal size
            double diagonalDPSize=diagonalPPI/2.50;
            resultDiagonalDPSize=String.format("%.2f", diagonalDPSize);

            //Width * Height
            double screenWidthDP=screenWidthD/2.50;
            String screenWidthTemp=String.format("%.2f", screenWidthDP);

            double screenHeightDP=screenHeightD/2.50;
            String screenHeightTemp=String.format("%.2f", screenHeightDP);

            resultWidthHeightDP=screenWidthTemp+" dp * "+screenHeightTemp+" dp";

            //Smallest Width
            smallestWidthDPTemp=Math.min(screenWidthDP, screenHeightDP);
            resultSmallestWidthDP=String.format("%.2f", smallestWidthDPTemp);

            //DrawableFolder
            resultDrawableFolder="drawable-xxhdpi";
        }

        if(smallestWidthDPTemp >= 320 && smallestWidthDPTemp < 480 )
        {
            //Mobile
            resultLayoutFolder="layout-sw320dp";

        }
        else if(smallestWidthDPTemp >= 480 && smallestWidthDPTemp < 600 )
        {
            //5" Mobile
            resultLayoutFolder="layout-sw480dp";
        }
        else if(smallestWidthDPTemp >= 600 && smallestWidthDPTemp < 720 )
        {
            //7" Tablet
            resultLayoutFolder="layout-sw600dp";
        }
        else if(smallestWidthDPTemp >= 720)
        {
            //10" Tablet
            resultLayoutFolder="layout-sw720dp";
        }

        TextView diagonalResTV=(TextView)findViewById(R.id.dip_result_stv_diagonalres);
        diagonalResTV.setText(resultDiagonalResolution+" PPI");

        TextView androidResTV=(TextView)findViewById(R.id.dip_result_stv_androidresbucket);
        androidResTV.setText(resultAndroidResBucket);

        //For Android Developer Units in DP

        TextView diagonalsizeTV=(TextView)findViewById(R.id.dip_result_stv_diagonalsize);
        diagonalsizeTV.setText(resultDiagonalDPSize+" dp");

        TextView widthHeightTV=(TextView)findViewById(R.id.dip_result_stv_widthheight);
        widthHeightTV.setText(resultWidthHeightDP);

        TextView smallestWidthTV=(TextView)findViewById(R.id.dip_result_stv_smallestwidth);
        smallestWidthTV.setText(resultSmallestWidthDP+" dp");

        TextView layoutFolderTV=(TextView)findViewById(R.id.dip_result_stv_layoutfolder);
        layoutFolderTV.setText(resultLayoutFolder);

        TextView drawableFolderTV=(TextView)findViewById(R.id.dip_result_stv_drawablefolder);
        drawableFolderTV.setText(resultDrawableFolder);

    } 
```

# netbeans - 如何告诉 Netbeans IDE 不要在启动时打开以前打开的项目

> ID：15515469
> 
> 赞同：4
> 
> 时间：2013-03-20T04:38:28.990
> 
> 标签：netbeans, crash, project

每次我尝试打开它时，我的 netbeans 似乎都会冻结。它说`waiting projects opened`。我想以某种方式清除“开放项目”列表，以便 netbeans 不会尝试在启动时自动打开它们。

也许清除缓存之类的？

我在 Mac OS 上运行 Netbeans 7.3：X Mountain Lion

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-27T14:46:30.693

有点晚了，但我认为 `config/Preferences/org/netbeans/modules/projectui.properties`是您正在（正在？）寻找的文件。

我的（GNU/Linux 机器上的 Netbeans 8.1）位于 下`%my_home_dir%/.netbeans/8.1/`，例如：

`/home/scherrer/.netbeans/8.1/config/Preferences/org/netbeans/modules/projectui.properties`

我已经对此文件进行了重命名测试，当我打开 IDE 时，没有打开任何项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T04:49:00.680

**清除 netbeans 缓存：**

清除 Netbeans 中的缓存可能会导致它不加载以前打开的项目：[Clearing Cache in NetBeans](https://stackoverflow.com/questions/8689780/clearing-cache-in-netbeans)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-14T23:30:16.967

清除缓存`Netbeans`不足以避免项目的负载，您可以暂时关闭项目。

使用`shift`+Click 您可以选择要关闭的多个项目：

[![在此处输入图像描述](../Images/230232c61acfbd7e6becc6fb3bb0963a.png)](https://i.stack.imgur.com/RjdVL.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-20T02:47:33.753

我有同样的问题，我用这种方式解决了

1.  杀死网豆
2.  更改您拥有项目的文件夹的名称
3.  打开网豆
4.  将文件夹重命名为原始名称
5.  一个个打开你的项目

# .net - clr version for visual studio 2010

> ID：15515471
> 
> 赞同：0
> 
> 时间：2013-03-20T04:38:32.060
> 
> 标签：.net, visual-studio-2010, clr, clr4.0

I have only visual studio 2010 in my machine. But, when I look at the visual studio command prompt for "clrver", it shows two versions of CLR are installed in my machine - v2.0.5 and v4.0.3

From this link, I understand only the CLR version v4.0.3 should be available in my machine. [http://msdn.microsoft.com/en-us/library/bb822049.aspx](http://msdn.microsoft.com/en-us/library/bb822049.aspx)

But I am confused how I got v2.0.5\. please explain?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T04:42:59.080

Visual Studio 2010 允许您编写面向多个 NET Framework 版本（2.0、3.0、3.5 和 4.0）的应用程序。

您会从链接到的文章中注意到，.NET Framework 版本 2.0、3.0 和 3.5 都共享相同的 CLR 版本：2.0，而 4.0 使用 CLR 的新版本 4.0。

因此，为了让 VS2010 允许您处理 2.0-3.5 项目，它需要安装 2.0 CLR。这就是安装它的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:31:04.373

简单地说，当 clrver 告诉

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\VC>clrver

Microsoft (R) .NET CLR Version Tool  Version 4.0.30319.17929
Copyright (c) Microsoft Corporation.  All rights reserved.

Versions installed on the machine:
v2.0.50727
v4.0.30319 
```

它实际上意味着

*   您在这台机器上安装了 .NET 2/3/3.5
*   您在这台机器上安装了 .NET 4 或 4.5

输出仅与您计算机上安装的 .NET Frameworks 相关，与您使用的 Visual Studio 版本无关。

CLR v2.0.50727 由 .NET 2.0/3.0/3.5 共享，而 CLR v4.0.30319 由 .NET 4.0 和 4.5 共享。请尝试将 .NET Framework 和 CLR 视为独立的概念。我知道初学者很难将它们彼此区分开来。

请注意，它是原子概念`v2.0.50727`，而不是`2.0.5`mate 。`2.0.50727`这也适用于`v4.030319`.

您对 MSDN 文章的解释不正确。为了避免进一步的误解，您可能会从诸如 CLR 通过 C# 等书籍中阅读更多关于 CLR 的信息。

# cakephp - formhelper cakephp 不工作

> ID：15515482
> 
> 赞同：0
> 
> 时间：2013-03-20T04:39:12.157
> 
> 标签：cakephp

我使用 cakephp 2.3.1 并尝试使用 formhelper 创建一个表单。

这是我的 addStudent.ctp ：

```
<?php
$this->Form->create("Test");
$this->Form->input("stuId",array('class'=>'inputField', 'placeholder'=>'SVxxxxxxxx'));
$this->Form->input("stuName",array('class'=>'inputField', 'name'=>'stuName'));
$this->Form->input('submit',array('type'=>'submit'));
$this->Form->end();
?> 
```

我已经添加： var $helpers= array('Form'); 在 AppController 中。但它什么也没显示？这里有什么问题：（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:47:12.077

您需要将输出回显到浏览器。请记住，您在这里使用的是返回 html 的函数。但为了让它显示在页面上，它必须被回显。试试这个：

```
<?php
echo $this->Form->create("Test");
echo $this->Form->input("stuId",array('class'=>'inputField', 'placeholder'=>'SVxxxxxxxx'));
echo $this->Form->input("stuName",array('class'=>'inputField', 'name'=>'stuName'));
echo $this->Form->input('submit',array('type'=>'submit'));
echo $this->Form->end();
?> 
```

# java - 矩形和框类中的 equals() 方法

> ID：15515490
> 
> 赞同：-2
> 
> 时间：2013-03-20T04:39:45.550
> 
> 标签：java

我有一个类层次结构，如下所示......

```
public class Rectangle2
{
    // instance variables 
    private int length;
    private int width;
    /**
     * Constructor for objects of class rectangle
     */
    public Rectangle2(int l, int w)
    {
        // initialise instance variables
        length = l;
        width = w;
    }
    // return the height
    public int getLength()
    {
        return length;
    }
    public int getWidth()
    {
        return width;
    }
    public String toString()
    {
        return "Rectangle - " + length + " X " + width;
    }
} 
```

.

```
public class Box2 extends Rectangle2
{
    // instance variables 
    private int height;
    /**
     * Constructor for objects of class box
     */
    public Box2(int l, int w, int h)
    {
        // call superclass
        super(l, w);
        // initialise instance variables
        height = h;
    }
    // return the height
    public int getHeight()
    {
        return height;
    }
    public String toString()
    {
        return "Box - " + getLength() + " X " + getWidth() + " X " + height;
    }
} 
```

.

```
public class Cube extends Box2 {
            public Cube(int length)
             {
              super(length, length, length);
             } 
            public String toString()
    {
        return "Cube - " + getLength() + " X " + getWidth() + " X " + getHeight();
    }
} 
```

我想为所有类添加一个 equals() 方法，这样如果一个类的输出等于其他类的输出，它将打印“Box and Cube has the same dimension”。我真的很困惑。我所知道的是我必须使用一个`if-else`声明，但在那之后我就是想不出该怎么做。

这就是我的问题所说的： 3\. 还向类添加一个 equals() 方法，以便您可以根据它们的尺寸值确定两个矩形、框或立方体何时相等。Cube 应该继承 Box 类的 equals 方法而不是重写它。输出应该是这样的：http: [//i.stack.imgur.com/Kgti1.png](http://i.stack.imgur.com/Kgti1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T04:49:49.503

这是一个坏主意，但您可以定义`equals`如下`Box2`：

```
public class Box2 extends Rectangle2 {
  //...

  boolean equals(Object o) {
   //a quick check if we are comparing with ourselves
   if (this==o) return true; 

   //no object is equals to null
   if (o==null) return false;

   //compare only if o is an instance of Box
   if (o instanceof Box2) {
     (Box2) that = (Box2) o;
     if (this.getWidth()!=that.getWidth()) return false;
     if (this.getLength()!=that.getLength()) return false;
     if (this.getHeight()!=that.getHeight()) return false;
     return true;
   }

   //instances of other classes cannot be equal to this instance
   return false;
  }

} 
```

由于`Cube`extends `equals`，任何`Box`具有相同尺寸的盒子都将等于另一个具有相同尺寸的盒子。A`Cube`是一个`Box`。

**为什么这是个坏主意？**假设我们有一个类`BoxWithColor`扩展`Box`并添加了一个变量来表示盒子颜色

```
public class BoxWithColor extends Box {
  public String color;
  public BoxWithColor(String color, int l, int w, int h) {
    super(l,w,h);
    this.color=color;
  }      
} 
```

现在`new BoxWithColor("red",1,2,3).equals(new Box(1,2,3))`，这是错误的。

通常，equals 应该保留给**同一个类的实例**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:27:19.643

您可以这样做：

```
public class Rectangle {

    private final int length;
    private final int width;

    public Rectangle(int length, int width) {
        this.length = length;
        this.width = width;
    }

    public int getLength() {
        return length;
    }

    public int getWidth() {
        return width;
    }

    public String toString() {
        return "Rectangle - " + length + " X " + width;
    }

    @Override
    public int hashCode() {
        return (length * 159) + (width * 523);
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }
        if (!(obj instanceof Rectangle)) {
            return false;
        }
        Rectangle that = (Rectangle) obj;
        return this.hashCode() == that.hashCode();
    }

} 
```

当你覆盖 equals 时，你需要覆盖 hashCode，因为[hashCode 的约定](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#hashCode%28%29)规定如果对象相等，则 hashCode 必须相同。hashCode 的实现应该尽量避免为不同的对象生成相同的 hashCode，但这不是硬性要求。因此，此处显示的方法就足够了。hashCode 主要用于在使用像 HashMap 这样的分桶系统的数据结构中很好地分布对象，因此对于此类数据结构的性能，如果 hashCodes 具有良好的分布是很有用的。

```
 public class Box extends Rectangle {

    private final int height;

    public Box(int length, int width, int height) {
        super(length, width);
        this.height = height;
    }

    public int getHeight() {
        return height;
    }

    public String toString() {
        return "Box - " + getLength() + " X " + getWidth() + " X " + height;
    }

    @Override
    public int hashCode() {
        return super.hashCode() + (height * 343);
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }
        if (!(obj instanceof Box)) {
            return false;
        }
        Box that = (Box) obj;
        return this.hashCode() == that.hashCode();
    }
} 
```

Box 可以调用 super.hashCode() 并为额外参数“height”添加一个因子。请注意，使用这种方法，高度为零的框将具有与具有相同长度和宽度的矩形相同的 hashCode。这不是必需的，但在某些情况下可能很有用。

```
public class Cube extends Box {

    public Cube(int length) {
        super(length, length, length);
    }

    public String toString() {
        return "Cube - " + getLength() + " X " + getWidth() + " X "
                + getHeight();
    }
} 
```

Cube 可以在 Rectangle 和 Box 中完成工作。这一切运行良好的原因是所有这些类中的字段都是不可变的（例如，没有设置器）。我通过将它们全部设为最终版本来强调这一点，因此编译器确实确保它们不能被更改。如果你有设置器，你可以创建一个立方体，然后将宽度设置为不同的值。这会搞砸这个设计。有关更多信息，请参阅文章[“正方形不是矩形”](http://cafe.elharo.com/programming/a-square-is-not-a-rectangle/)

# postgresql - 数据库表大小没有按比例减少

> ID：15515498
> 
> 赞同：17
> 
> 时间：2013-03-20T04:40:36.957
> 
> 标签：postgresql, postgresql-8.4, vacuum

我正在使用 PostgreSQL 8.4.13 数据库。
最近我在一个表中有大约 8650 万条记录。我几乎全部删除了——只剩下 5000 条记录。我跑了

```
reindex 
```

和

```
vacuum analyze 
```

删除行后。但是我仍然看到该表正在占用很大的磁盘空间：

```
jbossql=> SELECT pg_size_pretty(pg_total_relation_size('my_table'));
pg_size_pretty 
----------------
7673 MB 
```

此外，剩余行的索引值仍然很高——比如在百万范围内。我想在清理和重新索引之后，剩余行的索引将从 1 开始。

我阅读了文档，很明显我对重新索引的理解是有偏差的。

但尽管如此，我的意图是在删除操作后减小表大小并降低索引值，以便`SELECT`从表中读取操作（）不会花费那么长时间 - 目前我需要大约 40 秒才能从我的桌子。

### 更新

谢谢欧文。我已经更正了 pg 版本号。

```
vacuum full 
```

为我工作。我在这里有一个后续问题：
[删除大部分大表后重新启动现有行的主键数](https://stackoverflow.com/questions/15526813/reatart-primary-key-numbers-of-existing-rows-after-deleting-most-of-a-big-table)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-20T04:44:23.317

要实际将磁盘空间返回给操作系统，请运行[**`VACUUM FULL`**](https://www.postgresql.org/docs/current/sql-vacuum.html).

进一步阅读：

*   [VACUUM 将磁盘空间返回给操作系统](https://dba.stackexchange.com/a/37032/3684)

# php - Yahoo Boss API Pagination

> ID：15515499
> 
> 赞同：1
> 
> 时间：2013-03-20T04:40:39.490
> 
> 标签：php, jquery, json, pagination, yahoo-api

I am getting this json output from yahoo boss api. It goes on for 50 results, but, I have pasted only the first two...

```
 (
        [bossresponse] =&gt; stdClass Object
            (
                [responsecode] =&gt; 200
                [web] =&gt; stdClass Object
            (
                [start] =&gt; 0
                [count] =&gt; 50
                [totalresults] =&gt; 2750000
                [results] =&gt; Array
                    (
                        [0] =&gt; stdClass Object
                            (
                                [date] =&gt; 
                                [clickurl] =&gt; http://www.apple.com/ipad/
                                [url] =&gt; http://www.apple.com/ipad/
                                [dispurl] =&gt; www.apple.com/<b>ipad</b>
                                [title] =&gt; Apple - <b>iPad</b>
                                [abstract] =&gt; <b>iPad</b> is a magical window where nothing comes between you and what you love. And it comes in two sizes.
                            )

                        [1] =&gt; stdClass Object
                            (
                                [date] =&gt; 
                                [clickurl] =&gt; http://en.wikipedia.org/wiki/IPad
                                [url] =&gt; http://en.wikipedia.org/wiki/IPad
                                [dispurl] =&gt; en.wikipedia.org/wiki/<b>IPad</b>
                                [title] =&gt; <b>iPad</b> - Wikipedia, the free encyclopedia
                                [abstract] =&gt; The <b>iPad</b> is a line of tablet computers designed and marketed by Apple Inc., which runs Apple's iOS operating system. The first <b>iPad</b> was released on April 3, 2010; the ...
                            )

                        [2] =&gt; stdClass Object
                            (
                                [date] =&gt; 
                                [clickurl] =&gt; http://www.amazon.com/s?ie=UTF8&amp;page=1&amp;rh=i%3Aaps%2Ck%3Aipad
                                [url] =&gt; http://www.amazon.com/s?ie=UTF8&amp;page=1&amp;rh=i%3Aaps%2Ck%3Aipad
                                [dispurl] =&gt; www.amazon.com/s?ie=UTF8&amp;page=1&amp;rh=i%3Aaps%2Ck%3A<b>ipad</b>
                                [title] =&gt; Amazon.com: <b>ipad</b>
                                [abstract] =&gt; Considering an <b>iPad</b>? Compare it to Kindle Fire HD Check out our easy side-by-side comparison chart to see how the newest <b>iPad</b> stacks up to Kindle Fire HD 8.9".
                            ) 
```

I use the following code in php to connect to the api and display the results...

```
 **//connect to yahoo api and get results in json**
      <?php
      require("OAuth.php");

    $cc_key  = "**confidential**";
    $cc_secret = "**confidential**";
    $url = "http://yboss.yahooapis.com/ysearch/web";
    $args = array();
    $args["q"] = "yahoo";
    $args["format"] = "json";

    $consumer = new OAuthConsumer($cc_key, $cc_secret);
    $request = OAuthRequest::from_consumer_and_token($consumer, NULL,"GET", $url, $args);
    $request->sign_request(new OAuthSignatureMethod_HMAC_SHA1(), $consumer, NULL);
    $url = sprintf("%s?%s", $url, OAuthUtil::build_http_query($args));
    $ch = curl_init();
    $headers = array($request->to_header());
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    $rsp = curl_exec($ch);
    $results = json_decode($rsp);
    ?>
    **// Present results in html/php**
    <div id="resultsdiv">
    <?php
     foreach($results->bossresponse->web->results as $result) 
      {
echo '<h3><a href='.$result->url.'>'.$result->title.'</br>'.$result->abstract.'</a></h3>';
}
      ?> 
```

My question is how do I paginate results, since all the 50 results appear on the first web page only. I want to display ten results in every page.

Any help is appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:37:28.297

根据雅虎！BOSS 文档，特别是[Universal Arguments 部分](http://developer.yahoo.com/boss/search/boss_api_guide/v2_univer_api_args.html "雅虎！ BOSS API 文档")，看起来您可以使用`start`和`count`参数来调整结果的分页。看起来默认返回计数为 50，与您观察到的相符。

在您的代码示例中，您可以通过添加进行调整：

```
$args["start"] = 0; // increment as needed
$args["count"] = 10; 
```

# model-view-controller - How to make a new window open inside main view in griffon?

> ID：15515500
> 
> 赞同：1
> 
> 时间：2013-03-20T04:40:51.747
> 
> 标签：model-view-controller, griffon

I use new version of griffon, 1.2.0. Is there a way to open new window (second view) inside the main app window by clicking button or something?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:16:01.510

假设辅助 View 定义了一个顶级 Window 容器，如下所示

```
application(id: 'secondaryWindow', ...) { /* content */ } 
```

并且应用程序的配置文件 ( `Application.groovy`) 包含一个由“辅助”标识的 MVC 组定义，那么任何控制器都可以像这样弹出窗口

```
import griffon.transform.Threading

class SomeController {
    @Threading(Threading.Policy.INSIDE_UITHREAD_ASYNC)
    def showSecondary = {
        def group = createMVCGroup('secondary')
        app.windowManager.show('secondaryWindow')
    }
} 
```

# c# - 我正在尝试查找所选项目的小计

> ID：15515504
> 
> 赞同：0
> 
> 时间：2013-03-20T04:41:17.453
> 
> 标签：c#, arrays

我有一个数组中项目的价格：

```
double[] productPriceArray = { 1162.99, 399.99, 329.99, 199.99, 149.99 }; 
```

我正在尝试查找用户放入“购物车”的总数。我不知道该怎么做。我知道我可以使用以下代码行：

```
subtotal = productCostArray[lbxCart.SelectedIndex];  
lblSubtotal.Text = subtotal.ToString("c"); 
```

找到其中一个指数的总和，但我怎样才能找到多个指数的总和？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:43:30.903

当前设计中没有办法，您至少需要一个产品列表和产品价格映射然后您需要购物车中的产品列表，并且在购物车类中您可以定义一个函数来获取所有产品的小计。

```
public class  Product
{
    public string ProductId { get; set; }

    public string ProductName { get; set; }

    public double Price { get; set; }
}

public class ShoppingCart
{
    public string CartId { get; set; }

    public List<Product> Products { get; set; }

    public void AddProductToCart(Product p)
    {
        if(Products==null)
            Products = new List<Product>();
         if(p!=null)
                 Products.Add(p);

    }

    public double CartPrice()
    {
        return Products != null ? Products.Sum(p => p.Price):0D;
    }
} 
```

和使用

```
 var shopCart = new ShoppingCart();
        shopCart.AddProductToCart(new Product {ProductId = "1",Price = 12.09, ProductName = "P1"});
          shopCart.AddProductToCart(new Product {ProductId = "2",Price = 11.09, ProductName = "P2"});
        MessageBox.Show(shopCart.CartPrice().ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:48:07.827

如果您有选定项目索引的列表（如您的示例所示），您可以执行以下操作：

```
var subtotal = SelectedIndices.Select(idx => productPriceArray[idx]).Sum(); 
```

# objective-c - 故事板 - 详细视图中的静态单元格 - 动态管理按钮

> ID：15515505
> 
> 赞同：0
> 
> 时间：2013-03-20T04:41:20.647
> 
> 标签：objective-c

我最近找到了一种方法来解决在数据存在时而不是在单元格中没有数据时显示按钮的问题。特别是在详细视图（静态单元格）中使用情节提要。这个按钮是故事板上的必需品，因为我已经连接了一些后续接线。

我放置了一个没有背景图像的自定义按钮，并将 tableviewcell 的标记值设置为 1。

然后在我的实现文件中，我覆盖了 cellForRowAtIndexPath。
我的问题是，虽然这很好用，但它是性能密集型的吗？我在这个 MOC 中只有 5 个单元格。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [super tableView:tableView cellForRowAtIndexPath:indexPath];

    // need to capture the section and the cell to modify....

    if (cell.tag == 1){

        if (self.map){

            self.mapButton.enabled = YES;

            self.mapLabel.text = @"Click Map for Pic Location...";

            UIImage *buttonImage = [UIImage imageNamed:@"MyMap.png"];
            [self.mapButton setBackgroundImage:buttonImage forState:UIControlStateNormal];

        } else{
            self.mapLabel.text = @"No Location found for Pic";
            self.mapButton.enabled = NO;
        }
    }
    return cell;
} 
```

# java - Matlab + Java + JNI：java.lang.UnsatisfiedLinkError

> ID：15515506
> 
> 赞同：1
> 
> 时间：2013-03-20T04:41:30.480
> 
> 标签：java, matlab, java-native-interface, unsatisfiedlinkerror

使用带有 Java 和 JNI 的 Matlab，我得到了一个我无法理解的 UnsatisfiedLinkError。

首先，我从 Matlab 命令行加载一个本地库。有用：

```
>> java.lang.System.load('/usr/local/share/OpenCV/java/libopencv_java.so') 
```

然后我调用一个用本机库实现的 Java 函数：

```
>> org.opencv.core.Mat

   Java exception occurred:
   java.lang.UnsatisfiedLinkError: org.opencv.core.Mat.n_Mat()J
    at org.opencv.core.Mat.n_Mat(Native Method)
    at org.opencv.core.Mat.<init>(Mat.java:441) 
```

它抱怨找不到 org.opencv.core.Mat.n_Mat()J，但该符号在 .so 中：

```
echristiansen@jnu:/usr/local/share/OpenCV/java$ nm libopencv_java.so | grep Mat_n_1Mat
0000000000027780 T Java_org_opencv_core_Mat_n_1Mat__
00000000000316c0 T Java_org_opencv_core_Mat_n_1Mat__DDI
00000000000312a0 T Java_org_opencv_core_Mat_n_1Mat__DDIDDDD
00000000000318a0 T Java_org_opencv_core_Mat_n_1Mat__III
00000000000314b0 T Java_org_opencv_core_Mat_n_1Mat__IIIDDDD
0000000000030fa0 T Java_org_opencv_core_Mat_n_1Mat__JII
0000000000031120 T Java_org_opencv_core_Mat_n_1Mat__JIIII 
```

因此，如果它使用正确的符号加载本机库，为什么我会收到 UnsatisifiedLinkError？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T04:48:30.683

问题似乎是对 System.load 的调用发生在 Matlab REPL 中，而不是在预构建的 jar 中。解决方法：1) 编写一个只加载本地库的简单类，2) 构建该类并将其添加到 Matlab Java 类路径，3) 要加载本地库，请调用您刚刚编写的简单函数。

我的简单类如下所示：

```
public class LoadOpenCV {
    public static void loadOpenCV() {
        System.load("/usr/local/share/OpenCV/java/libopencv_java.so");
    }
} 
```

Matlab 调用如下所示：

```
>> LoadOpenCV.loadOpenCV
>> org.opencv.core.Mat

ans =

Mat [ 0*0*CV_8UC1, isCont=false, isSubmat=false, nativeObj=0x7f174286d800, dataAddr=0x0 ] 
```

现在要弄清楚*为什么*会这样；很明显，REPL 和编译代码之间存在差异。

# sql - SQL Server：帮助删除交替行中的重复项

> ID：15515513
> 
> 赞同：2
> 
> 时间：2013-03-20T04:41:48.813
> 
> 标签：sql, sql-server, join, null, duplicates

```
Column 0    Column 1        Column 2    Column 3    Column 4
csus        00287y109       38          NULL        169
mbus        01185pag4       NULL        NULL        1
mbus        01185pag4       100         NULL        18
mbus        018033DR8       100         NULL        5
psus        20002309        26          NULL        5
cbus        025816aq2       NULL        NULL        169
cdus        02586tbj2X      101         NULL        1
cdus        02586tbj2X      NULL        NULL        1 
```

我需要从这个名为组合的表中删除重复的行。但是，并非所有行都是重复的，每列中的重复行也不相同。示例重复是第 2 行和第 3 行。删除的标准是如果存在第 0 列和第 1 列（这些是实际列标题）相同的行，则保留第 2 列中具有值的行，删除行如果在第 0 列和第 1 列和第 2 列中存在重复行，则在第 2 列中使用 NULL。如您在第 2 列第 6 行中看到的，空值是可以的，因为根据我的标准，这不会与任何其他行重复重点关注前三列。如果 Column 0 和 Column 1 重复，则 Null 是不行的。第 3 列始终为 NULL，第 4 列是否重复并不重要。最后两行，第 7 行和第 8 行也是重复的。

**添加**了预期的结果

```
Column 0    Column 1        Column 2    Column 3    Column 4
csus        00287y109       38          NULL        169
mbus        01185pag4       100         NULL        18
mbus        018033DR8       100         NULL        5
psus        20002309        26          NULL        5
cbus        025816aq2       NULL        NULL        169
cdus        02586tbj2X      101         NULL        1 
```

在所需的结果中，第 2 行和第 8 行已被删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T05:00:46.800

试试这个：

```
with cte as 
(
 Select * ,
 row_number() over (partition by [Column 0],[Column 1] order by [Column 2] desc) rn
 from Sample
)
Select * from cte
where rn=1 
```

演示[SQL 小提琴](http://sqlfiddle.com/#!3/b27a4/9)

在旁注`don't use spaces`中`column names`。如果您真的想使用空间，请使用`underscore`

```
Updated

;with cte as 
 ( 
  Select * ,
  row_number() over (partition by [Column 0],[Column 1] order by [Column 2] desc) rn
  from Sample
 )
 Insert into final
 Select [Column 0], [Column 1], [Column 2], [Column 3] , [Column 4] 
 from cte 
 where rn=1 
```

# asp.net-mvc-3 - 通过下拉列表选择值在 Telerik 网格中加载数据

> ID：15515516
> 
> 赞同：-1
> 
> 时间：2013-03-20T04:42:06.113
> 
> 标签：asp.net-mvc-3, jquery, gridview, telerik-grid, nopcommerce

我是 ASP.NET MVC3 中 Telerik Grid 的初学者。我尝试将 Grid 与下拉列表选定值绑定。请在下面查看我的代码。

我的网络模型课

```
public class CustomerEventRolesModels
{
    public int Event { get; set; }
    public IEnumerable<System.Web.Mvc.SelectListItem> Events { get; set; }
    public Telerik.Web.Mvc.GridModel<CustomerEventRolesModel> GridData { get; set; }
}

public class CustomerEventRolesModel : BaseNopEntityModel
{
    public string Customer { get; set; }
    public bool Sponsor { get; set; }
    public bool Speaker { get; set; }
} 
```

我的.cshtml

```
<table id="grdCustomerEventRoleData" class="adminContent" style="display: none">
<tr>
    <td>
        <p>
        </p>
    </td>
</tr>
<tr>
    <td>
        @(Html.Telerik().Grid<CustomerEventRolesModel>(Model.GridData.Data)
    .Name("grdCustomerEventRoles")
              .Columns(columns =>
              {

                  columns.Bound(x => x.Customer);

                  columns.Bound(x => x.Speaker).Template(x => Html.CheckBox("spk", x.Speaker));
                  columns.Bound(x => x.Sponsor).Template(x => Html.CheckBox("spn", x.Sponsor));
              }
        )   .Pageable(settings => settings.Total(Model.GridData.Total)
                        .PageSize(gridPageSize)
                        .Position(GridPagerPosition.Both))
                        .ClientEvents(events => events.OnDataBinding("onDataBinding"))
                        .DataBinding(dataBinding => dataBinding.Ajax().Select("FilterByDropdown", "Customer"))
                        .EnableCustomBinding(true))
        ) )
    </td>
</tr> 
```

```
<script type="text/javascript">
var initialLoad = true;
$("#select-event").change(function () {
    if ($("#select-event option:selected").val() > 0) {
        $("#grdCustomerEventRoleData").show();
        $("#grdCustomerEventRoles").data("tGrid").rebind();
    }
    else {
        $("#grdCustomerEventRoleData").show();
    }
});

function onDataBinding(e) {
    if (initialLoad == true) {
        e.preventDefault();
        initialLoad = false;
    }
    else {
        var classificationId = $("#select-event option:selected").val();
        if (classificationId != "")
            e.data = $.extend(e.data, {
                selEvent: classificationId
            });
        else {
            e.preventDefault();
            $("#grdCustomerEventRoleData").hide();
        }
    }

} 
```

控制器中的操作

```
 public ActionResult FirstBind()
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCustomers))
            return AccessDeniedView();

        var model = new CustomerEventRolesModels();

        model.Event = 0;

        List<Nop.Core.Domain.Catalog.Product> products = _productRepository.Table.Where(p => p.EventDate != null && p.EventDate >= DateTime.Now).ToList();

        model.Events = products.Select(p => new System.Web.Mvc.SelectListItem
        {
            Text = p.Name,
            Value = p.Id.ToString()
        });

        var grdmodel = new GridModel<CustomerEventRolesModel>
        {
            Data = null,
            Total = 0
        };

        model.GridData = grdmodel;

        return View(model);
    }

    [HttpPost, GridAction(EnableCustomBinding = true)]
    public ActionResult FilterByDropdown(GridCommand command, int selEvent)
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCustomers))
            return AccessDeniedView();

        if (selEvent == 0)
            return View();

        var model = new CustomerEventRolesModels();

        model.Event = selEvent;

        var roles = (from lst in _customerEventRoleRepository.Table
                     join cust in _customerRepository.Table on lst.CustomerId equals cust.Id
                     join product in _productRepository.Table on lst.EventId equals product.Id
                     join role in _customerRoleRepository.Table on lst.RoleId equals role.Id
                     orderby lst.Id descending
                     select new CustomerEventRolesModel
                     {
                         Id = lst.Id,
                         Customer = cust.Email,
                         Sponsor = (role.Name == "Sponsor") ? true : false,
                         Speaker = (role.Name == "Speaker") ? true : false
                     }).ToList();

        var grdmodel = new GridModel<CustomerEventRolesModel>
        {
            Data = roles,
            Total = roles.Count
        };

        model.GridData = grdmodel;

        return new JsonResult
        {
            Data = model
        };
    } 
```

**FilterByDropdown**操作正常工作，但 Grid 未绑定。

我一无所知。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:14:53.500

你返回了错误的模型。

在 FilterByDropdown 中试试这个：

```
 var grdmodel = new GridModel<CustomerEventRolesModel>
    {
        Data = roles,
        Total = roles.Count
    };

    return new JsonResult
    {
        Data = grdmodel
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T11:07:29.783

如果您想在编辑行时向 Telerik MVC 网格添加下拉菜单，则需要执行接下来的几个步骤（除了使网格 ajax 绑定和行可编辑）。

假设我们希望表示名称的列（模型中的“名称”）是一个下拉列表，可以从中选择名称而不是键入名称。将名为“EditorTemplates”的文件夹添加到包含网格所在视图的文件夹中。对于我们想要在正在编辑的行中显示的每个下拉列表，它将包含一个单独的部分视图。制作一个局部视图（如上所述），将其命名为“ClientName.cshtml”，其中包含一个名为“Name”的 Telerik DropDownList 并绑定到所需的名称列表。

`@(Html.Telerik().DropDownList() .Name("Name") .BindTo(new SelectList((IEnumerable)ViewData["CustomerNames"], "Text", "Value")) )`

将以下属性添加到网格使用的数据类型的“名称”属性，例如网格使用“客户”类，包含“字符串名称”字段：

`public class Customer{ [UIHint("ClientName"), Required] public string Name { get; set; } }`

UIHint 属性指定在呈现特定列时使用哪个字段模板。

将以下 java 脚本添加到包含网格函数的页面： `function onEditCustomerList(e) { if (e.dataItem != null) { $(e.form).find('#Name').data('tDropDownList').select(function (dataItem) { return dataItem.Text == e.dataItem['Name']; }); } }`

这应该可以解决问题。

# ms-word - 将 MS WORD 2003 的 Word 文档转换为 Tiff 图像

> ID：15515520
> 
> 赞同：1
> 
> 时间：2013-03-20T04:42:22.210
> 
> 标签：ms-word, document

我有一个使用 MS Office 2003 创建的 word 文档。现在我使用 ASP.net 开发了一个 Web 应用程序，其中我使用文件上传控件上传 word 文档文件。我的要求是将上传的 word 文档转换为 tiff/jpg 并显示在 iframe.please 告诉我实现这一目标的可能方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:44:31.033

如果您听说过 Aspose，它们具有实现此目的的简单功能。

# php - PHP 减少日期时间的天数、小时数和分钟数

> ID：15515521
> 
> 赞同：1
> 
> 时间：2013-03-20T04:42:33.723
> 
> 标签：php, datetime

需要使用 php 从日期时间减少天数、小时数和分钟数。

日期时间的格式**为 Ymd H:i:s**

例如：假设日期时间是**2013-03-20 14:20:00**。如何从中减少**2 天****3 小时****10 分钟**，从而导致**2013-03-18 11:10:00**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T05:24:38.913

```
<?php
$date =  new DateTime("2013-03-20 14:20:00");
$dateIncremented = $date->sub(date_interval_create_from_date_string('2 days 3 hours 10 minutes'));
$finalDate = $date->format("Y-m-d H:i:s");
echo $finalDate;
?> 
```

好吧。一个别名。但可读格式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T04:59:58.577

使用[DateTime](http://php.net/manual/en/class.datetime.php) 对象：

```
$date = new DateTime('2013-03-20 14:20:00');
$date->sub(new DateInterval('P2DT3H10M'));
echo $date->format('Y-m-d H:i:s'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T04:59:37.040

您必须探索[DateTime::sub](http://www.php.net/manual/en/datetime.sub.php)和[DateInterval](http://www.php.net/manual/en/class.dateinterval.php)，以及关于[DateInterval 格式](http://www.php.net/manual/en/dateinterval.construct.php)

```
echo \DateTime::createFromFormat('Y-m-d H:i:s', '2013-03-20 14:20:00')
    ->sub(new \DateInterval('P2DT3H10M'))
    ->format('Y-m-d H:i:s'); // 2013-03-18 11:10:00 
```

# ruby - 使用 Nokogiri 获取网站标题

> ID：15515522
> 
> 赞同：0
> 
> 时间：2013-03-20T04:42:34.943
> 
> 标签：ruby, nokogiri

我正在尝试使用 Nokogiri 获取网站的标题（越南语）：

![在此处输入图像描述](../Images/9704571fa2a4f765d973add3adea1cc1.png)

```
# encoding: utf-8
require 'rubygems'
require 'nokogiri'
require 'open-uri'

page = Nokogiri::HTML(open("http://vnexpress.net"))   
list = page.css("a[class='link-topnews']")
puts list[0].text 
```

但它给出了错误：

```
undefined method `text' for nil:NilClass (NoMethodError) 
```

奇怪的是，使用完全相同的代码，有时它确实可以工作并给出正确的结果：

```
Triều Tiên dọa hành động với máy bay B-52 của Mỹ 
```

即使尝试获取标题，它也会给出相同的错误：

```
page = Nokogiri::HTML(open("http://vnexpress.net/"))   
list = page.css("title")
puts list[0].text 
```

为什么它会这样？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:56:29.340

当您仅使用 nokogiri 时，他们的服务器似乎拒绝提供内容。我想，他们正在检查一些标题。您可以添加标题或使用 Mechanize gem：

```
require 'mechanize'

agent = Mechanize.new
page = agent.get "http://vnexpress.net"
page.search("a.link-topnews").first.text 
```

=> "Triều Tiên dọa hành động với máy bay B-52 của Mỹ"

# javascript - 提交时未关闭 Facebook 框

> ID：15515523
> 
> 赞同：0
> 
> 时间：2013-03-20T04:42:35.070
> 
> 标签：javascript, facebox

提交时，由于某种原因它不会关闭 Facebook 框。你们能帮帮我吗？

我的代码是：

```
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script type="text/javascript">

$(function() {

 $('#reset_form').click(function() {
     $('#name,#comment').val('');
 });
 $('#submit').click(function() {

var name = $('#name').val();
var comment = $('#comment').val();

$.ajax({
    url: '../forms/comment_ajax.php?id=<?php echo $_GET['id']; ?>',
    data: { form_name: name, form_comment: comment },
    success: function(data) {
        $('#new_comment').append(data);

        $(document).trigger('close.facebox');

        $('#new_comment').effect("bounce", { direction:'down', times:5 }, 300);        
        $('html,body').animate({scrollTop:0}, 2000, "easeOutQuart");
        return false;
    }
});
});                    
});
</script>

Name: <br />
<input type="text" id="name" class="userpass" maxlength="15"/><br /><br />

Comment: <br />
<textarea id="comment" rows="6" cols="75"></textarea><br /><br />

<input type="submit" id="submit" value="Comment" class="button" />
<input type="reset" id="reset_form" name="submit" value="Reset" class="button" /> 
```

这不是在做`$(document).trigger('close.facebox');`

我在一个脸书箱里打开了它。它发布的索引是： http: [//pastebin.com/JhpDhevr](http://pastebin.com/JhpDhevr)

有点乱，但是。它没有关闭提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T04:50:06.310

尝试

```
 $('#button-id').click($.facebox.close); 
```

代替

```
$(document).trigger('close.facebox'); 
```

# sql - Microsoft Access 中的 SQL 查询平均值

> ID：15515525
> 
> 赞同：0
> 
> 时间：2013-03-20T04:42:38.157
> 
> 标签：sql, ms-access

这是表格：

学院：

```
 School_ID char(3), 
    Fac_LastName char(15), 
    Fac_FirstName char(15), 
    Fac_DOB char(15), 
    Fac_SS# char(15), 
    Fac_Address char(15), 
    Fac_City char(15), 
    Fac_State char(2), 
    Fac_Zip char(5), 
    Fac_salary numeric(8,2) 
```

查询： **显示工资高于平均水平的教师。**

我在 Microsoft Access 中运行以下查询：

```
SELECT Avg(FACULTY.Fac_salary) AS average, FACULTY.Fac_LastName
FROM FACULTY
GROUP BY FACULTY.Fac_LastName
HAVING (((FACULTY.Fac_salary) >Avg([FACULTY].[Fac_salary]))); 
```

**但它的给出和错误是 (((FACULTY.Fac_salary) >Avg([FACULTY].[Fac_salary]))) 不是聚合函数的一部分。**

请保留您针对 Microsoft Access 的特定答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:56:23.770

假设比较平均值是针对 table 中的所有记录`FACULTY`，您需要单独计算总体平均值，然后才能确定哪些成员超过了该平均值。

你可以这样做：

```
SELECT FACULTY.Fac_LastName, FACULTY.Fac_salary
FROM FACULTY
WHERE ((FACULTY.Fac_salary) > (SELECT Avg(FACULTY.Fac_salary) FROM FACULTY)); 
```

# crm - CRM 2011 汇总 12 Javascript 错误

> ID：15515527
> 
> 赞同：1
> 
> 时间：2013-03-20T04:42:46.417
> 
> 标签：crm, microsoft-dynamics, rollup, xrm

我们最近升级到汇总 12，现在每当出现包含功能区自定义的与网格相关的功能区时，我们都会遇到 JavaScript 错误，对话框消息在约 6000 万行内部 CRM 资源中指出“语法错误”。这似乎只发生在定制的功能区（使用功能区工作台定制）。

有没有其他人经历过这个？如果是这样，任何解决提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T19:15:28.300

经过一番调试，我们发现问题是由自定义功能区引起的。我们有一个添加到功能区的按钮，该按钮正在调用 javascript 库。剩下的是 $webresource 指令。

希望这对某人有所帮助，为此引发的错误无助于调试根本原因。

[Microsoft Dynamics CRM 的 Web 资源](http://msdn.microsoft.com/en-us/library/gg309473.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:23:31.880

我们有一个自定义按钮（通过功能区工作台创建），其中包含使用 JavaScript 的启用规则。

它在 Web 客户端中正常工作，但会在 Outlook 中引发错误。

这是因为 Outlook 正在刷新功能区而不提供`Xrm.Page.ui`对象。

最后，我们必须检查所有启用规则是否已定义。

例如

```
if(Xrm.Page.ui !== undefined) {
   //Do some work
} 
```

# javascript - 谷歌地图自动完成和自动完成服务之间的不同结果

> ID：15515537
> 
> 赞同：2
> 
> 时间：2013-03-20T04:43:29.747
> 
> 标签：javascript, google-maps-api-3

我正在使用谷歌地图 APIv3 AutocompleteService 将数据提取到引导程序的预输入。但是，与使用谷歌内置的自动完成返回的结果相比，结果有点不准确。

我的 HTML 代码：

```
<label>Built-in</label><input type="text" id="address1" />
<label>Customize</label><input type="text" id="address2" /> 
```

我的脚本：

```
<script>
    //this input use google built-in autocomplete
    var input1 = document.getElementById('address1');
    autocomplete = new google.maps.places.Autocomplete(input1);

    //this input use google AutocompleteService
    $('#address2').typeahead({
        source: process_keyword
    });

    var service = new google.maps.places.AutocompleteService();

    function process_keyword(query, process) {
        var place_results = [];
        var request = {
            input: query,
            types: ['geocode']
        };
        service.getPlacePredictions(request, function (predictions, status) {
            process($.map(predictions, function (prediction) {
                return prediction.description;
            }));
        });
    }
</script> 
```

我在这里发布了完整的代码：http: [//jsbin.com/ididas/1/edit](http://jsbin.com/ididas/1/edit)

例如当我输入

> 9 亭天晃

到第一个框，它将显示 5 个结果。但是当我在第二个框中输入相同的查询时，它只会显示 2 个结果。

我的问题是为什么他们有这个不同，我该如何修复，以便我的自定义预输入完美地作为内置的自动完成功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T07:26:21.607

对我来说，`service.getPlacePredictions()`也返回 5 个结果。问题出现在 中`$.typeahead`，因为当您搜索`9 dinh tien hoang`并且服务返回`9 Đinh Tiên Hoàng`查询字符串与结果不匹配时（例如，搜索`d`与 a 不匹配`Đ`，它是一个完全不同的字符）。

由于您根本不需要任何过滤`$.typeahead()`（因为 autocompleteService 已经返回过滤结果），您可以将其添加到 $.typeahead-options 中：

```
matcher:function(){return true;} 
```

# php - 如何从独立的 php 文件中调用 zend 控制器操作？

> ID：15515539
> 
> 赞同：2
> 
> 时间：2013-03-20T04:43:49.043
> 
> 标签：php, zend-framework

我有一个控制器 IndexController.php，其中的操作是这样的

```
class IndexController extends CustomControllerAction {

public function preDispatch() {

    if (!$this->view->authenticated) {

        $this->_redirect('/users/login');

    }

}

public function indexemailAction() {

  //somecode which calculates certain things

} 
```

}

现在，我需要使用独立的 php 文件在 IndexController.php 中调用操作“indexmailAction”

php文件是indextest.php

```
 <?php
   //Need to write some code to call indexmailAction in IndexController.php

 ?> 
```

我应该在这个文件中写什么......

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-29T02:14:41.937

我知道这已经有几年的历史了，这可能不是类/函数的预期用途，但我发现以下内容在从命令行调用的独立文件中非常有用。

这为我解决的问题是它消除了 Apache 进程的产生。该解决方案很棒，因为我可以从 URL 访问所需的一些控制器/操作。

在几乎任何基于 ZF1 的应用程序中，您都可以复制索引文件并保持所有内容不变，只需注释掉以下行。

```
$application->run(); 
```

您可以使用自动加载器等访问此行下方的任何内容。它很粗糙，但它可以工作。不幸的是，您很快就会发现自己对应用程序拥有的许多文件的访问权限有限，并且感觉访问所需文件的唯一方法是通过 Controller/Action。

相反，我在 $application->bootstrap() 下的新文件中使用以下内容（仍然删除 $application->run() ）：

```
$front = Zend_Controller_Front::getInstance();

// You can put more here if you use non-default modules
$front->setControllerDirectory(array(
        'default' => APPLICATION_PATH.'/controllers'
));

$viewRenderer = new Zend_Controller_Action_Helper_ViewRenderer();
$viewRenderer->setNeverRender(true);

Zend_Controller_Action_HelperBroker::addHelper($viewRenderer);

$req = new Zend_Controller_Request_Http("http://anydomain.tld/controller/action");

// Example just to see how this can be extended
$req->setParam("someVar", "someValue");

$front->setRequest($req);

$front->dispatch(); 
```

最后，您有一个独立的 PHP 文件，该文件引导所有内容与您的 web 主 index.php 相同，但您可以根据需要手动触发控制器/动作，让您更轻松地访问 ZF1 的其余文件。您可以访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:09:34.070

您不必为此调用控制器操作，您的逻辑应该驻留在模型中。然后，您可以创建模型的新实例并调用适当的方法。例子 ：

```
require_once '/path/to/mymodel.php';
$mymodel = new Mymodel();
$data = $mymodele->fetchAll(); 
```

PS：也许你应该考虑创建一个restful api来处理来自应用程序外部的调用

**更新**：

好的，我现在知道您需要什么了，实现它的最佳方法是调用 url 而不是文件（例如 website.com/emails/send），如果您担心安全性，可以使用一些预共享密钥来确保请求来自您，将其与请求一起发送并检查您的操作是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:54:20.650

控制器被设计用于 MVC，而不是脚本。您的控制器应该组装请求变量，将它们定向到模型并返回某种 HTTP 响应。您的脚本应该直接作用于模型。

无论如何，如果您坚持，您可以像任何其他类一样实例化一个控制器类并调用方法，只要您注入 MVC 将具有的任何依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T06:06:50.473

如果您希望在操作中的多个位置使用逻辑，则应将其放入操作助手中，或者如果代码非常通用，则应放入自定义库 (/library/custom/)

注意：身份验证更适合插件而不是每个控制器中的预调度方法。

# c# - 在 Monotouch 中设置真实的背景颜色

> ID：15515546
> 
> 赞同：0
> 
> 时间：2013-03-20T04:44:15.973
> 
> 标签：c#, iphone, ios, xamarin.ios

好的，我正在这样做：

```
 UIButton btReturn;

    btReturn = UIButton.FromType (UIButtonType.RoundedRect);

    btReturn.Frame = btnBounds;
    btReturn.SetTitle (Caption, UIControlState.Normal);

    btReturn.Layer.CornerRadius = 14;
    btReturn.ClipsToBounds = true;
    btReturn.TouchUpInside += touchHandler;
    btReturn.BackgroundColor = UIColor.FromRGB (0xe4, 0x96, 0x37);
    return btReturn; 
```

这引出了一个问题……为什么它会以白色背景出现？？？我最初尝试将其设置为使用背景图像清除，但这也不起作用...

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:46:38.420

这是因为 的`RoundedRect`类型`UIButton`不允许除白色之外的任何其他颜色背景。

您必须使用 a`UIButtonType.Custom`来更改背景颜色（但您将失去漂亮的圆形按钮并最终得到一个方形按钮 - 您必须在您最喜欢的图形包中设计自己的精美按钮 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:49:46.663

像这样试试

```
 btReturn.BackgroundView = null;
         btReturn.BackgroundColor = UIColor.Black; 
```

另请参阅以下链接，

[如何在 Monotouch 中更改 UIButton 的背景颜色](https://stackoverflow.com/questions/9733213/how-to-change-background-color-of-uibutton-in-monotouch)

[如何在 DialogViewController (Monotouch.Dialog) 上设置背景颜色](https://stackoverflow.com/questions/7312150/how-to-set-the-background-color-on-a-dialogviewcontroller-monotouch-dialog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:30:19.403

看这里：[is-it-even-possible-to-change-a-uibuttons-background-color](https://stackoverflow.com/questions/2808888/is-it-even-possible-to-change-a-uibuttons-background-color)还有一个关于如何创建自己的按钮的示例，因为您无法修改圆形按钮。

# ravendb - ravendb 集合可以强制存储在内存中吗？

> ID：15515547
> 
> 赞同：0
> 
> 时间：2013-03-20T04:44:17.870
> 
> 标签：ravendb

我可以强制 ravendb 集合保留在内存中，以便查询快速吗？我阅读了有关积极缓存的信息，但文档仅讨论了请求缓存。如果我启用了分片，我可以强制所有分片将集合缓存在内存中吗？

任何帮助表示赞赏，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:07:26.507

RavenDB 并没有真正意义上的“集合”。集合的唯一用途是通过`Raven-Entity-Name`元数据过滤文档。这有几个目的：

*   Raven Studio UI 可以对事物进行分组，以便于查找。
*   索引可以使用快捷形式，`docs.EntityName`而不是针对每个索引中的元数据使用 where 子句。

但仅此而已。它们不是在磁盘上隔离的。例如，当 Raven 索引文档时，每个索引都会考虑*所有*文档。如果文档没有通过集合过滤器，它们会很快被丢弃，但它们仍然会通过管道。

[您可以在此处](http://ravendb.net/docs/2.0/theory/ravendb-collections)阅读有关集合的更多信息。

此外 - 只要您仍处于学习阶段，您可能希望将这些风格的问题发布到[RavenDB Google Group](https://groups.google.com/forum/?fromgroups#!forum/ravendb)上。你会得到更好的回应。当您询问非代码“X 可以做 Y 吗？”时，您不会在 StackOverflow 上得到太多评价。问题。当你写了一些代码后回到这里。查看[ravendb](/questions/tagged/ravendb "显示标记为“ravendb”的问题")标签以了解其他已回答的问题，您将了解 StackOverflow 的用途。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:21:46.460

你不需要这样做。RavenDB 将自动检测使用模式并将频繁请求的文档保存在内存中。

# node.js - Node.js：编写一个函数以将 spawn stdout 作为字符串返回

> ID：15515549
> 
> 赞同：31
> 
> 时间：2013-03-20T04:44:21.547
> 
> 标签：node.js

我试图将此函数的输出作为字符串返回，但它一直以未定义的形式返回。我哪里错了？

```
function run(cmd){
    var spawn = require('child_process').spawn;
    var command = spawn(cmd);
    var result = '';
    command.stdout.on('data', function(data) {
            result += data.toString();
    });
    command.on('close', function(code) {
            return result;
    });
}
console.log(run('ls')); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-20T04:53:31.087

您的函数在`command.on`语句后立即返回。`return`事件回调中的语句`close`无处返回。`return`属于事件回调，而不是`run()`.

将`console.log`call 而不是`return result`.

一般来说，您应该编写如下内容：

```
function run(cmd, callback) {
    var spawn = require('child_process').spawn;
    var command = spawn(cmd);
    var result = '';
    command.stdout.on('data', function(data) {
         result += data.toString();
    });
    command.on('close', function(code) {
        return callback(result);
    });
}

run("ls", function(result) { console.log(result) }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T04:52:10.320

```
var spawn = require('child_process').spawn,
    command  = spawn('ls', ['/tmp/']);
command.stdout.pipe(process.stdout); 
```

以下[链接](https://stackoverflow.com/questions/14458508/node-js-shell-command-execution)与您的问题完全相同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-02T15:25:42.733

你总是可以将你的函数包装在一个 Promise 中并返回它。我发现比@fuwaneko 的回调解决方案更有效

```
function run(cmd) {
    return new Promise((resolve, reject) => {
        var spawn = require('child_process').spawn;
        var command = spawn(cmd)
        var result = ''
        command.stdout.on('data', function(data) {
             result += data.toString()
        })
        command.on('close', function(code) {
            resolve(result)
        })
        command.on('error', function(err) { reject(err) })
    })
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-10T06:33:10.323

干净的方式正在使用`async/await`，所以试试这样：

```
const spawn = require('child_process').spawnSync;

try {
    const child = spawn(cmd)
    return { stdout: child.stdout.toString(), stderr: child.stderr.toString() }
} catch (error) {
    console.log(error);
    return error
} 
```

# c# - 获取动态创建的复选框值，但来自 onprerender 阶段

> ID：15515552
> 
> 赞同：1
> 
> 时间：2013-03-20T04:44:30.293
> 
> 标签：c#, asp.net, sharepoint, sharepoint-2010, web-parts

我正在尝试在 Web 部件（SP 2010）中动态生成复选框控件，但必须创建的复选框数量取决于先前 Web 部件的值。遵守 Web 部件通信基础架构，我只能在“onprerender”阶段获得该值。但是，如果我尝试创建具有该值计数的复选框，则无法在回发时获得复选框的选定值！我知道动态创建的控件应该放在 page_load 或 oninit 中。但是，这里不应该放在那里，因为我在预渲染阶段获得了特定的价值。请帮忙！对此感到震惊！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:49:51.573

Asp.net 需要您在第一次添加控件后重新创建动态添加的控件`Init`，直到您在页面上需要这些控件。

您可以使用`Session`变量来跟踪您的计数。

如果在调用方法时控件不存在`ProcessPostData`（在 LoadViewState 之后调用），您将无法接收用户输入。CheckedChanged 之类的事件也只会在您的控件在`ProcessPostData`调用之前出现在 Controls 集合中时才会触发。

参考：[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

# iphone - 在单例中访问可变值？

> ID：15515554
> 
> 赞同：0
> 
> 时间：2013-03-20T04:44:35.617
> 
> 标签：iphone, ios, objective-c, variables, singleton

首先，我来自 Lua，不要怪我是全局变量，哈哈。所以，我一直在阅读有关如何使用整个“单例系统”的信息，但我不确定我是否完全没有抓住重点，或者我只是不正确地实施它？

我的代码的目标是为多个文件创建一种方法来访问一个变量，该变量在特定文件中保存数组的大小。这是我的单身人士：

。H

```
#import <Foundation/Foundation.h>

@interface GlobalVariables : NSObject
{
    NSNumber *currentGameArrayCount;
    BOOL *isGamePaused;
}

@property (nonatomic, readwrite) NSNumber *currentGameArrayCount;
@property (nonatomic, readwrite) BOOL *isGamePaused;

+ (GlobalVariables *)sharedInstance;

@end 
```

.m

```
#import "GlobalVariables.h"

@implementation GlobalVariables
@synthesize currentGameArrayCount, isGamePaused;

static GlobalVariables *gVariable;

+ (GlobalVariables *)sharedInstance
{

    if (gVariable == nil) {
        gVariable = [[super allocWithZone:NULL] init];
    }

    return gVariable;
}

- (id)init
{
    self = [super init];
    if (self)
    {
        currentGameArrayCount = [[NSNumber alloc] initWithInt:0];
        isGamePaused = NO;

    }

    return self;
}

@end 
```

在另一个包含我使用的数组的文件中：

```
GlobalVariables *sharedData = [GlobalVariables sharedInstance];
        NSNumber *tmpArrayCount = [sharedData currentGameArrayCount];

        NSInteger tmpCount = [whereStuffActuallyHappens.subviews count]; // Subviews is the array
        NSNumber *currentCount = [NSNumber numberWithInteger:tmpCount];

        tmpArrayCount = currentCount; 
```

这段代码的希望是在 singeton ( `currentGameArrayCount`) 中获取变量，并将其设置为当前数组计数 ( `currentCount`)。我是否错误地解释了单身人士的目的？我只是不擅长单身并且没有正确设置吗？有谁知道我怎样才能达到让我的数组计数可以访问我的所有文件的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:53:18.583

你有几个问题。尝试以下更改：

全局变量.h：

```
#import <Foundation/Foundation.h>

@interface GlobalVariables : NSObject

@property (nonatomic, assign) int currentGameArrayCount;
@property (nonatomic, assign) BOOL gamePaused;

+ (GlobalVariables *)sharedInstance;

@end 
```

GlobalVariables.m：

```
#import "GlobalVariables.h"

static GlobalVariables *gVariable = nil;

@implementation GlobalVariables

+ (GlobalVariables *)sharedInstance {
    if (gVariable == nil) {
        gVariable = [[self alloc] init];
    }

    return gVariable;
}

- (id)init {
    self = [super init];
    if (self) {
        self.currentGameArrayCount = 0;
        self.gamePaused = NO;
    }

    return self;
}

@end 
```

现在在您的其他代码中，您可以执行以下操作：

```
GlobalVariables *sharedData = [GlobalVariables sharedInstance];
int tmpArrayCount = sharedData.currentGameArrayCount;

NSInteger tmpCount = [whereStuffActuallyHappens.subviews count]; // Subviews is the array
sharedData.currentGameArrayCount = tmpCount; 
```

# php - 检查多个值是否存在php数组

> ID：15515560
> 
> 赞同：20
> 
> 时间：2013-03-20T04:44:55.630
> 
> 标签：php, arrays

我在 PHP 中有一个数组

```
$permission = array( "admin", "moderator", "guest"  ); 
```

我有另一个数组

```
$userRoles = array( "admin", "moderator" ); 
```

我检查过，`in_array`但它不适用于多个值。

如何在不循环的情况下检查`$userRoles`存在的至少一个值？`$permission`

提前致谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-20T04:46:44.213

利用[`array_intersect`](http://www.php.net/manual/en/function.array-intersect.php)

```
count(array_intersect($permission, $userRoles)); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-20T04:48:19.797

利用`array_intersect`

> **array_intersect** — 计算数组的交集
> 
> 大批`array_intersect ( array $array1 , array $array2 [, array $ ... ] )`
> 
> **array_intersect()**返回一个数组，其中包含所有参数中存在的 array1 的所有值。请注意，密钥是保留的。

**`[`Read`](http://www.php.net/manual/en/function.array-intersect.php)`**

# overloading - 可变参数重载

> ID：15515569
> 
> 赞同：2
> 
> 时间：2013-03-20T04:46:19.137
> 
> 标签：overloading, variadic-functions

我只是在尝试使用 Varargs 做一些事情：

刚遇到一个问题：

```
class A {
public void func(int... a) {
     System.out.println("int... a");
}
   public void func(double... b) {
     System.out.println("double... b");
 }
}

 public class B {
 public static void main(String... args) {
       A a = new A();
    a.func(); //Getting no compilation error;instead func(int... a)  is    
                //being called
  }
 } 
```

其中好像 A 类被修改为：

```
class A {

public void func(int... a) {
     System.out.println("int... a");
}

public void func(boolean... b) {
     System.out.println("boolean... b");
 }
 } 
```

现在我得到编译时错误。只是想知道为什么在与 int 和 double 一起使用时不会更早发生这种情况。但现在这种情况只发生在 int 和 boolean 中。我理解模棱两可，但这也应该发生在第一种情况下。我正在使用 java 7。它仅在布尔值的情况下发生。您介意帮我提供解决方案吗？

谢谢。

# php - 从计算机 PHP / HTML 加载图像

> ID：15515571
> 
> 赞同：0
> 
> 时间：2013-03-20T04:46:26.330
> 
> 标签：php, html, image, web

此刻我在中国。我创建了一个简单的网站，用于上传一些图片与朋友分享。添加评论等等。我上传了所有图片，但它们在中国的加载速度非常慢，所以我的想法是：

当我登录时（可以在会话中找到），我将简单地从我的本地机器而不是从网站加载图片，因为它非常慢或者它甚至不加载图片。

我试过这个：

```
 if ($_SESSION['id'] == 1) {  //check if i am logged in
            $china = "file:///F:/";
        } else { $china = ''; } 
```

之后：

```
 echo "<div id='title" . $image['id'] . "'><h2>" . $image['title'] . "</h2></div>
                        <img src='$china" . $image['url'] . "'/>"; 
```

但是当我打开浏览器时，它似乎可以找到图片，因为它有宽度但没有高度，所以图片没有显示。当我使用 devoloper 工具点击图片链接时，它会显示图片，因此链接是正确的。

我认为由于某些安全原因或其他原因，这不起作用。我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:00:58.603

毕竟这很容易做到，我在我的电脑（apache）上运行了一个本地网络服务器。没想到这一点，但很直截了当。

谢谢你和我一起思考。

# database-design - 两个表，两个关系？

> ID：15515576
> 
> 赞同：-1
> 
> 时间：2013-03-20T04:47:11.473
> 
> 标签：database-design

只为两个表创建两个关系是否正确？我所处的情况：我有一张供***用户使用的桌子***

另一个是***书本***

我有两个关系：

1- `offer book`（一对多）：提供您拥有并想出售的书

2- `order book`（一对多）：订购以前提供的书籍之一

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:02:44.120

在您的情况下，我认为您还应该创建两个表：offers、orders，其列列表如下：

offer: id | id_user | 身份证 | 日期时间 | 价值 ..
订单：id | id_user | 身份证 | 日期时间 | value ..

然后在 4 个表之间创建关系

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:07:45.387

我会用 4 张桌子

**用户，user_offer_book，user_buy_book，书**

用户买书是多对多的，所以来了 user_buy_book（relashionship 表）

用户报价书也是多对多的，所以来了user_offer_book（relashionship表）

您还需要 user 和 book 表

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:11:53.687

我认为你在正确的轨道上，这两个关系应该用两个表来表示。

如果你有 2 张桌子，这意味着你可以代表一本书被几个人订购（可以生成*延期交货*或*候补名单的想法），请参见下面的示例：*

*UserOffersBook*表：`bookId`可以是唯一的，因为不应有多个人提供同一本书

```
[[UserOffersBook]]
bookId | userId | ...
---------------------
 100   |   1
 101   |   1
 200   |   2
 201   |   2 
```

每本书由一个用户提供。用户可以提供许多书籍。

* * *

*UserOrdersBooks*表：`orderId`可以是代表用户订单的唯一标识符

```
[[UserOrdersBooks]]
orderId | bookId | userId | ...
-------------------------------
   123  |   100  |   2
   124  |   100  |   3 
   125  |   201  |   1
   126  |   101  |   2 
```

每个订单包含一本书和一个用户。一本书可以属于许多订单和不同的用户，因为这些用户可能希望将自己列入该书的*候补名单*。

但我认为您可能希望以*book order*表示一组书籍，因此：

```
[[UserOrdersBooks]]                      [[BasketsBooks]]
orderId | basketId | userId | ...         basketId | bookId
---------------------------------         -----------------
  123   |    500   |   2                     500   |   100
  124   |    501   |   1                     500   |   101
  125   |    502   |   3                     501   |   201
                                             502   |   100 
```

所以这意味着：

*   Person1 想要订购 Book201（购物篮中的 1 本书），他的订单编号为 124。
*   Person2 想要订购 Book100 和 Book101（篮子里有 2 本书），他的订单编号为 123。
*   Person3 想要订购 Book100（购物篮中的 1 本书），他的订单号为 125。他在该书的候补名单上，因为他的订单在 Person2 之后。

# ios - 关于APNS的问题

> ID：15515577
> 
> 赞同：0
> 
> 时间：2013-03-20T04:47:17.597
> 
> 标签：ios, apple-push-notifications

我已经在我的应用程序中实现了 APNS。但我有两个问题。

1.  如何让徽章自增？在我的应用程序中，它现在总是设置为 1。

2.  如果在应用程序处于前台时收到推送通知，据我所知，我需要实现一个替代视图并自己播放声音。在这种情况下，有没有办法播放系统默认的通知声音，即当用户在设置中更改它时，它会自动更改。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:18:04.400

您可以按照 wasim 的描述增加徽章计数，但它仅在您的应用程序处于前台时才有效，因此要显示正确的徽章计数，您的服务器必须推送正确的徽章编号。
当应用程序处于前台时播放默认系统通知声音我认为没有任何 API，因为您已将声音文件放入包中并在收到通知时播放该声音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:12:51.637

通常在所有应用程序中，未读通知计数都保存在服务器中。当服务器向特定设备发送推送通知时，令牌***服务器将徽章计数与有效负载一起发送*。**

您的服务器逻辑需要跟踪正确的徽章计数并适当地发送。

```
{
    "aps" :  
    {
        "alert" : "Your notification message",
        "badge" : badgecount ,
        "sound" : "bingbong.aiff"
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:04:46.737

在您`AppDelegate.m`使用以下功能：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    badge_value+=[[[userInfo objectForKey:@"aps"] objectForKey:@"badge"]intValue];
    [UIApplication sharedApplication].applicationIconBadgeNumber = badge_value;
} 
```

其中，badge_value 是存储徽章值的整数。

# c# - 为什么我的 IDocHostUIHandler 实现被忽略

> ID：15515581
> 
> 赞同：3
> 
> 时间：2013-03-20T04:47:27.547
> 
> 标签：c#, .net, browser, webbrowser-control

`WebBrowser`我已经从具有自己实现的控件创建了派生控件，该控件`IDocHostUIHandler`遵循方法的想法[`CreateWebBrowserSiteBase`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.createwebbrowsersitebase%28v=vs.100%29.aspx)：

> WebBrowser.WebBrowserSite 类提供 OLE IDocHostUIHandler 接口的默认实现。您可以提供自己的此接口实现或实现任何其他 WebBrowser ActiveX 控件接口，以自定义控件的行为。

不工作的问题。我的代码如下所示：

```
[PermissionSetAttribute(SecurityAction.LinkDemand, Name = "FullTrust")]
public MyBrowser(){}

protected override WebBrowserSiteBase CreateWebBrowserSiteBase()
{
    var manager = new NewWebBrowserSite(this);
    return manager;
}

protected class NewWebBrowserSite : WebBrowserSite, 
    UnsafeNativeMethods.IDocHostUIHandler
{
    private MyBrowser host;
    public NewWebBrowserSite(MyBrowser h)
        : base(h)
    {
        this.host = h; 
    }

    int UnsafeNativeMethods.IDocHostUIHandler.ShowContextMenu(int dwID, NativeMethods.POINT pt, object pcmdtReserved, object pdispReserved)
    {
        MyBrowser wb = (MyBrowser)this.host;
        // other code
    }

    // rest of IDocHostUIHandler methods
} 
```

我的问题是：

1.  我是否必须实现其他接口才能使其正常工作？
2.  是设计使然吗，我读过一些[帖子](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/79c1f5a7-372e-4777-84e5-862d3f14267f/)，它与 .net 框架实现中的错误有关`WebBrowser`

我知道这是可能的[`ICustomDoc.SetUIHandler`](http://www.codeproject.com/csharp/advhost.asp)，但这不是我想要的。

我曾经有过放弃 c# 并使用非托管代码的想法。是这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-30T13:48:12.513

我刚刚处理了完全相同的问题：如何为`IDocHostUIHandler`WinForms`WebBrowser`控件提供自定义实现。问题是基类`WebBrowserSite`已经实现了自己的版本`IDocHostUIHandler`（这是一个`internal`接口，所以不可能在派生类中[显式地重新实现](http://msdn.microsoft.com/en-us/library/aa664593%28v=vs.71%29.aspx)`NewWebBrowserSite`它）。但是，理论上，用相同的 GIID 和方法布局实现另一个 C# 接口应该不是问题（因为在这种特殊情况下，这就是所有 COM 客户端 - 底层 WebBrowser ActiveX 控件 - 所关心的）。

不幸的是，在 .NET 4.0 之前这是不可能的。幸运的是，现在它是通过新的[ICustomQueryInterface](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.icustomqueryinterface.aspx)功能实现的：

```
protected class NewWebBrowserSite : WebBrowserSite, 
    UnsafeNativeMethods.IDocHostUIHandler
    ICustomQueryInterface
{
    private MyBrowser host;
    public NewWebBrowserSite(MyBrowser h): base(h)
    {
        this.host = h; 
    }

    int UnsafeNativeMethods.IDocHostUIHandler.ShowContextMenu(int dwID, NativeMethods.POINT pt, object pcmdtReserved, object pdispReserved)
    {
        MyBrowser wb = (MyBrowser)this.host;
        // other code
    }

    // rest of IDocHostUIHandler methods

    // ICustomQueryInterface

    public CustomQueryInterfaceResult GetInterface(ref Guid iid, out IntPtr ppv)
    {
        if (iid == typeof(UnsafeNativeMethods.IDocHostUIHandler).GUID)
        {
            ppv = Marshal.GetComInterfaceForObject(this, typeof(UnsafeNativeMethods.IDocHostUIHandler), CustomQueryInterfaceMode.Ignore);
        }
        else
        {
            ppv = IntPtr.Zero;
            return CustomQueryInterfaceResult.NotHandled;
        }
        return CustomQueryInterfaceResult.Handled;
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:57:43.187

您不能简单地覆盖类实现的接口。如果 IDocHostUIHandler 的方法未标记为虚拟，则无法替换它们。

定义接口的事实`UnsafeNativeMethods`也是一个线索，除非您非常清楚自己在做什么，否则您可能不应该弄乱它。

# jquery - 根据 Datepicker DateRange 验证从文本框中输入的日期

> ID：15515582
> 
> 赞同：2
> 
> 时间：2013-03-20T04:47:30.693
> 
> 标签：jquery, datepicker

嗨有一个文本框日期选择器。用户可以从日期选择器中选择日期，也可以通过在文本框中键入手动输入日期。如果日期是手动输入的，我该如何验证输入是否在我的日期选择器的日期范围内？请帮忙。例如，我的日期选择器最大年份仅为 1995，因此不允许用户输入日期，例如 01/25/1996。

**HTML**

```
Date of Birth (MM/DD/YYYY):
<input type="text" class="datepicker minimumSize" 
name="BirthDate" id="BirthDate"/> 
```

**JavaScript**

```
var d = new Date();
var year = d.getFullYear() - 18;
d.setFullYear(year);
$('#BirthDate').datepicker({
    changeYear: true,
    changeMonth: true,
    yearRange: '1920:' + year + '',
    defaultDate: d});

$('#BirthDate').blur(function(){
//Validate input
}); 
```

**JSfiddle** [http://jsfiddle.net/jobzky/wUpQG/](http://jsfiddle.net/jobzky/wUpQG/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:03:09.903

这对我来说很完美。

首先你必须验证日期语法。假设日期是有效日期。然后，你可以做到这一点。

```
 var from_date_monthfield = valid_from.split("/")[1];
  var from_date_dayfield = valid_from.split("/")[0];
  var from_date_yearfield = valid_from.split("/")[2]; 
```

// 以上拆分取决于您的日期格式

```
 var from_date = new Date(from_date_yearfield, from_date_monthfield-1, from_date_dayfield);

  var cur_date = new Date();
  if(!(from_date > cur_date.setDate(cur_date.getDate() - 1))) // set date as 1995 here and your logic here
  { 
    return false;
  }

  return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T06:17:02.437

您可以使用 input 元素的`readonly`属性来防止用户手动输入日期，例如

```
<input type="text" class="datepicker minimumSize" 
name="BirthDate" id="BirthDate" readonly/> 
```

# xquery - 使用 xquery 比较两个 xml

> ID：15515586
> 
> 赞同：-2
> 
> 时间：2013-03-20T04:47:49.420
> 
> 标签：xquery

我有两个 xml，比如 Sample1.xml 和 Sample2.xml。现在我需要比较两个 xml 值（父节点、子节点、属性及其值）并在 xquery 中返回它们之间的差异。我知道我可以使用 deep-equal 函数来判断 xml 是否相同。但我不知道如何比较和返回xml差异。

请帮忙。

谢谢，-N

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:29:02.667

根据我们在这里讨论的一般程度，这是一个[不平凡的问题](http://research.cs.wisc.edu/niagara/papers/xdiff.pdf)(PDF)。如果您的问题是“我该如何编写这个算法”，那么对于 StackOverflow 来说，这太开放了（请参阅常见问题解答）。另一方面，如果您问“是否有任何 XQuery 库代码可以做到这一点”，那么似乎只需在 Google 上搜索“XML 差异 XQuery”即可直接找到[答案](https://blogs.oracle.com/knutvatsendvik/entry/xmldiff_with_xquery)。甚至更快，然后让其他人在 Stack Overflow 上为您进行谷歌搜索。

# jquery - iOS Web 应用程序从 iframe 链接退出全屏

> ID：15515587
> 
> 赞同：1
> 
> 时间：2013-03-20T04:47:57.750
> 
> 标签：jquery, ios, web-applications

我的 ios 全屏网络应用程序中有一个 iframe，iframe 源是来自 batchgeo.com 的地图。我添加了一个 html 链接以将数据从地图传递到应用程序（例如 example.com?name=bob），它重新加载相同的页面但包含数据。但是，当单击该链接时，它会退出应用程序并在 Safari 中打开链接，我希望它在全屏应用程序中打开而不是去 safari。

我尝试了类似`<a target="_parent" href="http://example.com?name=bob">`没有运气的东西。我还尝试在网络应用程序中使用 jquery 更改链接的默认行为，但这不想使用我从另一个类似问题中找到的这段代码，但这不适用于 iframe 内的链接：

```
if (window.navigator.standalone) {

$(document).on(
"click",
"a",
function (event) {
    event.preventDefault();

    var aurl = $(event.target).attr("href");
    if (aurl) {
        location.href = $(event.target).attr("href");
    }
    else {
        location.href = this;
    }
}
);
} 
```

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:07:29.990

很简单：

```
$('a').on('click touchend', function(ev){

    $(this).preventDefault();
    window.location = $(this).attr('href');

}); 
```

# java - 如何在另一个线程同时记录时安全地读取 Log4j 日志？

> ID：15515589
> 
> 赞同：0
> 
> 时间：2013-03-20T04:48:06.437
> 
> 标签：java, multithreading, synchronization, log4j

如果我有多个线程使用 log4j 写入单个日志文件，并且我希望另一个线程将其读回，有没有办法安全地读取（逐行）这些日志，以便我总是读取整行？

编辑：这样做的原因是我需要将所有日志上传到一个中心位置，它可能是几天前的日志或刚刚写入的日志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:22:09.450

如果你需要实现你正在做的事情，这将是一件痛苦的事情，尤其是你必须处理文件滚动。

对于您的特定要求，有更好的选择：

1.  如果您要备份的位置可以直接写入（即挂载在您的文件系统中），最好将您的文件滚动设置为写入该备份目录；或者

2.  利用 Splunk 等日志管理工具来监控和管理您的日志文件（这样您甚至不需要复制到该备份目录）；或者

3.  即使您需要自己进行备份，您也不需要（也没有理由）在单独的线程中进行备份。尝试编写一个shell脚本监视您的日志目录，并使用rsync之类的工具或自己编写类似的逻辑，仅对本地和远程位置不匹配的文件进行上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T04:51:25.330

您应该使用读写锁。

如果没有人写入文件，则可以由多个用户持有读锁，但无论如何一次只能由 1 个线程持有写锁。

只需确保在您的写入线程完成写入时，它会释放 readwritelock 以允许读取线程进行读取。同样，当阅读器完成阅读时，请始终释放读锁，以便 log4j 可以继续写入

查看

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReadWriteLock.html)

但是，仔细想想，你这样做的目的是什么？如果您只是想监控您的日志，您应该使用不同的解决方案，而不是在同一个应用程序中使用监控线程。似乎没有意义。如果数据在应用程序/服务中可用，为什么将其传递到文件中并立即读回？

# python - wxpython将文件夹添加到listctrl？

> ID：15515591
> 
> 赞同：0
> 
> 时间：2013-03-20T04:48:10.550
> 
> 标签：python, wxpython

我正在尝试学习 wxpython，但我从来没有在我有生之年编程过。

此应用程序带有 listctrl 和 dirdialog。但是然后我想将文件夹添加到 listctrl （或者它是我应该使用的 listctrl 吗？）

我该怎么做？

还是我做错了？

无论如何，这是代码。

```
# -*- coding: cp1252 -*-
import os
import wx

# Menu ID
ID_QUIT=1
ID_ABOUT=2
ID_ADD=3

class Frame(wx.Frame):
def __init__(self, parent, id, title,):
    wx.Frame.__init__(self, parent,id , title, size=(700, 750),)
    self.Center()
    self.Show()
    self.CreateStatusBar()
    self.SetStatusText("Status bar") #Statusbar in the bottom of the window
    panel = wx.Panel(self, id)

    #Listctrl
    self.index = 0

    self.list_ctrl = wx.ListCtrl(panel, size=(400,600),
                                 style=wx.LC_REPORT
                                 |wx.SUNKEN_BORDER
                                 )
    self.list_ctrl.InsertColumn(2, 'Name',width = 401)

    sizer = wx.BoxSizer(wx.VERTICAL)
    sizer.Add(self.list_ctrl, 0, wx.ALL|wx.TOP, 30)
    panel.SetSizer(sizer)

            #Menu
    menuBar = wx.MenuBar()
    filemenu = wx.Menu()
    helpmenu = wx.Menu()
    filemenu.Append(ID_ADD,"&Add\tCtrl+A", "Adding directory")
    filemenu.Append(ID_QUIT, "&Quit\tCtrl+Q", "Quit application")
    helpmenu.Append(ID_ABOUT, "&About\tCtrl+A", "About application")
    menuBar.Append(filemenu, "&File")
    menuBar.Append(helpmenu, "&Help")
    self.SetMenuBar(menuBar)

    #Event
    wx.EVT_MENU(self, ID_ADD, self.onDir)
    self.Bind(wx.EVT_MENU, self.QuitWindow, id=ID_QUIT)
    self.Bind(wx.EVT_MENU, self.OnAboutBox, id=ID_ABOUT)  

                    # DirDialog
    self.currentDirectory = os.getcwd()

    dirDlgBtn = wx.Button(panel, label="Add", pos=(600, 10), size=(60, 30))
    dirDlgBtn.Bind(wx.EVT_BUTTON, self.onDir)

def onDir(self, event):
    """
    Show the DirDialog and print the user's choice to stdout
    """
    dlg = wx.DirDialog(self, "Choose a directory:",
                       style=wx.DD_DEFAULT_STYLE
                       #| wx.DD_DIR_MUST_EXIST
                       #| wx.DD_CHANGE_DIR
                       )
    if dlg.ShowModal() == wx.ID_OK:
        print "You chose %s" % dlg.GetPath()
    dlg.Destroy()
                    # END

def QuitWindow(self, event):
    self.Destroy()

def OnAboutBox(self, event):
    description = "text"
    licence = "text"
    info = wx.AboutDialogInfo()
    info.SetName ('text')
    info.SetVersion ('0.1')
    info.SetDescription(description)
    info.SetCopyright ('text')
    info.SetLicence(licence)  

    wx.AboutBox(info)

class App(wx.App):
def OnInit(self):
    frame = Frame(None, -1, title = "Film")
    frame.Show(1+1==2)
    self.SetTopWindow(frame)
    return True

app = App(0)
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:50:35.717

假设您想将文件夹名称插入 listctrl，一个干净的方法是编写一个小函数并从您的 onDir 函数中调用它：

```
def onDir(self, event):
    """
    Show the DirDialog and print the user's choice to stdout
    """
    dlg = wx.DirDialog(self, "Choose a directory:",
                   style=wx.DD_DEFAULT_STYLE
                   #| wx.DD_DIR_MUST_EXIST
                   #| wx.DD_CHANGE_DIR
                   )
    if dlg.ShowModal() == wx.ID_OK:
        path = dlg.GetPath()
        print "You chose %s" % path
        self.AddToList(path)
    dlg.Destroy()

def AddToList(self, path):
    fname = os.path.basename(path)  # insert only folder-name
    self.list_ctrl.Append(fname) 
```

# javascript - 卡在 Form 和 JS 调用中

> ID：15515592
> 
> 赞同：0
> 
> 时间：2013-03-20T04:48:11.890
> 
> 标签：javascript, forms

我一直在编写一个代码生成器，我可以在其中填写表单中的变量，按下生成并将代码调用到文本字段中。以前做过，但由于某种原因，这次我似乎无法让它工作。我要疯了！在这个例子中，我一直在尝试调用第一个表单字段的值“问题”这是一个在线页面的[链接](http://test.theshananway.com/generatecode.html)，这是我在页面中使用的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Generate Newsletter</title>

<style type="text/css">
#image {
    background-color:#666;
    box-shadow: 2px 2px 10px #888888;
    display:block;
    padding-top:1px;
    padding-bottom:10px;
    padding-left:5px;
    padding-right:5px;
    color:#FFF;
}

</style>

<script language="javascript" type="text/javascript">

function generateCode(form){

issue = document.inputForm.issue.value;
Header = document.inputForm.Header.value;
SubHeader = document.inputForm.SubHeader.value;
Content = document.inputForm.Content.value;
ArticleImage = document.inputForm.ArticleImage.value;
ArticleImageLink = document.inputForm.ArticleImageLink.value;
DidyouknowConent = document.inputForm.DidyouknowConent.value;
DidyouknowImage = document.inputForm.DidyouknowImage.value;
DidyouknowImageLink = document.inputForm.DidyouknowImageLink.value;
Courtesy = document.inputForm.Courtesy.value;
CourtesyLink = document.inputForm.CourtesyLink.value;

document.inputForm.source.value = issue;

return issue;
}
</script>
</head>

<body>
<form name="inputForm" id="inputForm">
<div id="EditBox" style="width:600px; height:650px; padding:10px; background-color:#CCC; border:2px; border-bottom-color:#666; box-shadow: 2px 2px 10px #888888;"><!--- INPUT FIELD -->

        <div id="LeftEdit" style="float:left;"><!--- LEFT EDIT SIDE-->

            <p>Issue # 
                <input name="issue" type="input" size="10"  value="">
            </p>
            <p>Article Header<br />
                <input name="Header" type="input" size="45">
            </p>

            <p>Sub Header<br />
                <textarea name="SubHeader" cols="35" rows="3"></textarea>
            </p>

            <p>Content<br />
                <textarea name="Content" cols="35" rows="25"></textarea>
            </p>
        </div>

      <div id="RightEdit" style="float:right; margin-top:50px;"><!--- RIGHT EDIT SIDE-->
            <div id="image">
                <h4> Article Image </h4>
                <p>source URL<br />
                    <input name="ArticleImage" type="input" size="35" onClick="this.focus();this.select()">
                </p>
                <p>Image Link<br />
                    <input name="ArticleImageLink" type="input" size="35" onClick="this.focus();this.select()">
                </p>
            </div>
            <p>Did You Know Conent<br />
                <textarea name="DidyouknowContent" cols="28" rows="5"></textarea>
            </p>
            <div id="image">
                <h4> Did You know Image </h4>
                <p>source URL<br />
                    <input name="DidyouknowImage" type="input" size="35" onClick="this.focus();this.select()">
                </p>
                <p>Image Link<br />
                    <input name="DidyouknowImageLink" type="input" size="35" onClick="this.focus();this.select()">
            </p>
            </div>
            <p>Image courtesy of <input name="Courtesy" type="input" size="19"> <br />
                Link to <input name="CourtesyLink" type="input" size="30" onClick="this.focus();this.select()"> <br />
            </p>
        </div>

</div>
<div style="clear:both;">
    <input type="button" value="Generate Code!" onClick="javascript:generateCode();">
    <br>
    <textarea name="source" rows="7" cols="40" onClick="this.focus();this.select()" style="margin-top: 1.2px; margin-bottom: 1.2px; height: 200px; margin-left: 1.2px; margin-right: 1.2px; width: 500px; "></textarea>
</div>

</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:55:39.940

![在此处输入图像描述](../Images/4986ad8848365e3dbd83ca91f5ea6406.png)这里拼写错误

```
DidyouknowContent

DidyouknowConent = document.inputForm.DidyouknowConent.value;  // DidyouknowConent

<textarea name="DidyouknowContent" cols="28" rows="5"></textarea> //DidyouknowContent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:00:28.187

我在萤火虫中尝试了你的代码，它显示如下

```
TypeError: document.inputForm.DidyouknowConent is undefined 
```

看看这个..

或者你可以尝试插入使用

```
<input type="button"> 
```

试试这个

```
<input type="submit"> 
```

# constraints - VHDL UCF - 如何定义没有引脚的约束？

> ID：15515597
> 
> 赞同：3
> 
> 时间：2013-03-20T04:48:37.443
> 
> 标签：constraints, vhdl, fpga

我正在使用一些用于 Xilinx Spartan 6 FPGA 的简单 VGA 驱动程序代码（通过 Papilio Pro 板）。该代码期望每种颜色有 4 位输出，因此为每种颜色定义了逻辑向量。但是，我的设置碰巧不能为每种颜色提供完整的 4 位，所以我想找到一种创造性的方法来通过 UCF 控制它。

最初的 UCF 为每种颜色定义了 4 个引脚。在蓝色的情况下，我只有两个引脚，所以我选择将我必须的两个映射到蓝调 MSB，因此：

```
NET Blue(0)                 IOSTANDARD=LVTTL;  # N/C
NET Blue(1)                 IOSTANDARD=LVTTL;  # N/C
NET Blue(2)     LOC="P92" | IOSTANDARD=LVTTL;  # to a pin
NET Blue(3)     LOC="P87" | IOSTANDARD=LVTTL;  # to a pin 
```

（起初我完全忽略了前两个约束，它仍然编译并工作，但抱怨电压标准不一致（缺席的默认为 IOSTANDARD = LVCMOS25），因此抛出“WARNING:Place:838 - An IO Bus with more than找到一个 IO 标准。”）

主要警告是我想知道如何消除的警告，最好是在 UCF 内：

```
WARNING:Place:837 - Partially locked IO Bus is found. 
    Following components of the bus are not locked: 
     Comp: Blue<1>
     Comp: Blue<0> 
```

***将没有可编程引脚位置的网络映射到 UCF 内的*默认值（逻辑“1”或“0”，或者可能是三态值）的正确方法是什么，以消除这种“部分锁定的 IO巴士”之类的警告？**

我的目标是，在每个通道或多或少位由引脚驱动的设置中，只有 UCF 需要更改（而不是源代码）。尽管有警告，但我所做的工作仍然有效……我只想做得更好并正确消除这些警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:52:39.223

您已在代码的顶层（在您的`entity`）中要求输入引脚。因此，工具必须提供它们。因此你必须映射它们（否则它会为你选择一些随机的，你通常不想要的）

如果这些引脚在电路板上真的无处可去并且永远不会有，那么将它们从设计中完全移除（UCF 和 HDL）。

否则，您必须锁定它们。您可以`PULLDOWN`在 UCF 中为它们添加一个以确保它们达到较低的值。

# javascript - 引导菜单 - 下拉单击而不是悬停

> ID：15515601
> 
> 赞同：2
> 
> 时间：2013-03-20T04:48:50.893
> 
> 标签：javascript, css, twitter-bootstrap, drop-down-menu, menu

将引导菜单从单击下拉而不是悬停更改的最简单方法是什么？

示例网址：[http ://riverc.mgns.se](http://riverc.mgns.se)

这可以通过引导程序实现，纯粹通过 CSS 或一点 JavaScript 来实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:54:19.420

在您的 javascript 代码中添加这一行：

```
$('.dropdown-toggle').dropdownHover(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:09:35.023

在 twitter bootstrap 下拉菜单中，下拉菜单由 css 控制，因此单击过程 cnt 可以使用 css 完成，因此您必须为此使用 javascript 或 jquery ...

想法是使用两个类进行切换，

```
.off { display:none; }
.on { display:block; } 
```

借助[http://api.jquery.com/toggleClass/开发您的脚本](http://api.jquery.com/toggleClass/)

# iphone - 子视图不显示全屏显示黑色背景

> ID：15515603
> 
> 赞同：0
> 
> 时间：2013-03-20T04:48:55.860
> 
> 标签：iphone, ipad, uiview

我有一个视图，其中我添加了 subView 并且在 subView 中有 webview 问题是在侧面显示黑色背景我想删除它并在中心制作 pdf 视图我正在使用带有许多 detailView 控制器的 splitview 控制器我还添加了视图的屏幕截图

![在此处输入图像描述](../Images/7c33ff324ca528fd2ae4ffc1646b5f1d.png)

```
 pdfView=[[UIView alloc] initWithFrame:CGRectMake(0,0,1024,768)];

    UIWebView*webView=[[UIWebView alloc]initWithFrame:CGRectMake(10,0,1024,768)];

webView.backgroundColor=[UIColor clearColor];

     NSURL *targetURL = [NSURL URLWithString:@"http://celeritas-solutions.com/pah_brd_v1/productivo/1.pdf"];
 NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
 [webView loadRequest:request];

[pdfView addSubview:webView];                  
    [webView release];                     
[self.view addSubview:pdfView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:09:03.827

将其属性设置为 Scaling for Fit in Page..

尝试 ：：**`[webView setScalesPageToFit:YES];`**

希望，它会帮助你。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:18:50.383

我认为这是 webView 的阴影。尝试创建 webview 的边框颜色。并使其变为白色。使用核心图形来实现这一点。

我觉得可以解决你的问题！！

# c - 如何在ext2中打印间接块

> ID：15515605
> 
> 赞同：2
> 
> 时间：2013-03-20T04:48:59.720
> 
> 标签：c, inode, ext2

我正在尝试打印 ext2 文件系统中的所有单个间接块。我可以很容易地打印直接块（0-11），但我不明白如何到达单个间接块，然后是双重和三重间接块。如果我查看 ino->i_block[12] 的值，我如何使用它来到达它指向的位置？我确定我在这里遗漏了一些简单的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T06:52:54.810

EXT2 中的一个 inode 有 128 个字节长，并且包含许多不同的字段。

i_size 字段表示文件中存储的字节数，即文件的长度。i_block 数组是一个包含 15 个块编号的数组。

数组中的前 12 个条目（i_block[0] 到 i_block[11]）包含直接块的块号：它们命名包含文件内容的前 12 个块的数据块。

数组中的第 13 个条目 (i_block[12]) 包含单个间接块的块号：它命名包含 4 字节块号数组的块；这些块中的每一个都包含额外的文件内容。

数组中的第 14 个条目 (i_block[13]) 包含一个双重间接块的块号：它命名一个包含一个 4 字节块号数组的块，这些块中的每一个块都位于一个单间接块中，其中包含一个直接块的 4 字节块号数组。数组中的第 15 个条目 (i_block[14]) 包含三重间接块的块号。

# css - 内联元素 CSS

> ID：15515609
> 
> 赞同：0
> 
> 时间：2013-03-20T04:49:17.620
> 
> 标签：css

我想在我的页面标题中使用类似导航的结构，所以我决定使用内联列表，但是它产生的结果不是我想象的那样。它将元素放在 3 条单独的线上。

```
Element 1    Element 2    Element 3 
```

以上是我的目标，但是目前我得到了，

```
Element 1
Element 2
Element 3 
```

这是我的 CSS 和 HTML 片段：

CSS

```
#nav li {
    display: inline;
} 
```

HTML

```
<ul id="nav">
    <li><button id="left_nav"><</button></li>
    <li><div id="day">Monday</div></li>
    <li><button id="right_nav">></button></li>
</ul> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:54:03.770

使用 inline-block 代替 inline，您也可以通过 float 使用它...

通过**内联块**，

```
#nav li {
    display: inline-block;
} 
```

通过**浮动**，

```
#nav {
      overflow:hidden;
}
#nav li {
      float:left; margin-right:10px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:54:59.070

尝试使用以下内容：

```
#nav li {
    list-style: none;
    float: left;
    margin-right: 5px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:56:31.757

你有并且`buttons`在`div`内部`li`给予`width`，这将起作用。`div``button`

因为`div`是块级元素，`width`如果您不分配固定宽度，它会使用所有页面。

**或者**

适用`float: left;`于`li`那也将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T04:58:29.087

添加这个CSS：

```
#navigation ul
{margin:0px; padding:0px;}

#navigation ul li
{display:inline; height:30px; float:left; list-style:none; margin-left:15px;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T05:06:45.793

对于不同的用户，结构是不同的。检查链接：http: [//jsfiddle.net/wWyMW/1/](http://jsfiddle.net/wWyMW/1/)

```
<div id="nav">
   <ul>
       <li>
           <a href="#">Element <span>1</span></a>
           <div class="clr"></div>
       </li>
       <li>
           <a href="#">Element <span>2</span></a>
           <div class="clr"></div>
       </li>
        <li>
           <a href="#">Element <span>3</span></a>
           <div class="clr"></div>
       </li>
   </ul>
   <div class="clr"></div>
</div> 
```

**和 CSS：**

```
*{ matgin:0; padding:0}
ul, li{ list-style:none}
a{ text-decoration:none}
.clr{ clear:both;}
#nav{margin:auto; width:960px;}
#nav ul li{ float:left; margin-left:10px}
#nav ul li:first-child{ margin-left:0}
#nav ul li a{ display:block; background:#f00; color:#0F0; line-height:30px; text-align:center; width:70px; padding:0px 10px; font-weight:bold;}
#nav ul li a span{ display:block; float:right;} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T04:54:48.327

利用

```
#nav li {
    display: inline-block;
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/znwhF/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T04:55:27.040

并排使用`float:left`或对齐`float:right`

```
#nav li { 

float:left;

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-20T04:50:44.750

将此添加到您的 LI 的 CSS...

```
li{ display:inline; } 
```

# drupal - 将数据库中的数据打印到特定的块内容

> ID：15515612
> 
> 赞同：0
> 
> 时间：2013-03-20T04:49:42.677
> 
> 标签：drupal

我需要将简单数据从数据库打印到特定块，我使用了下面给出的代码并输出了文本，但它不在指定的块中（hello_world）。

```
function hello_world_block_view($delta = '') {
  $block = array();

  if ($delta == 'hello_world') {
 $sql = "SELECT Test_name FROM Test_table";
        $result = db_query($sql);
        $record = $result->fetch(); 
        foreach ($record as $records) {
             echo $records;
        }

    $block['subject'] = t('Hello world Subject');
    $block['content'] = t('Need to print database content');
  }

  return $block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:59:27.327

您需要将变量`$records`与`$block['content']`. 所以它看起来像：

```
function hello_world_block_view($delta = '') {
  $block = array();

  if ($delta == 'hello_world') {
    $output = '';
    $sql = "SELECT Test_name FROM Test_table";
    $result = db_query($sql);
    $record = $result->fetch(); 
    foreach ($record as $records) {
      $output .= $records;
    }

    $block['subject'] = t('Hello world Subject');
    $block['content'] = $output;
  }

  return $block;
} 
```

# arrays - Python numpy循环索引超出范围错误

> ID：15515617
> 
> 赞同：0
> 
> 时间：2013-03-20T04:49:53.523
> 
> 标签：arrays, for-loop, numpy, indexoutofboundsexception, python-3.2

```
a1 = np.random.random_sample(10)

a2 = np.random.random_sample(5)

a3 = np.zeros([10])

for i in range(0,9):

    a3[i] = ((a2[i]+a2[i+1])/2.) * ((a1[i+1]-a1[i])/2.) * (a1[i]*a2[i])

    print(i, a3[i]) 
```

我试图运行这个简单的脚本，但我得到了错误`"IndexError: index out of bounds"`...请任何想法来避免这个错误？我了解由数字引起的错误`5`，但我无法更改它，因为数组是从长度为`a2`的 txt 加载的， 请知道吗？`(a2= np.loadtxt('data.txt',unpack=True, usecols=[1])``5`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:54:08.367

里面只有5个元素，`a2` 因为：

```
a2 = np.random.random_sample(5) 
```

但在 for 循环中运行 i > 5 到 8

```
for i in range(0,9):

    a3[i] = ((a2[i]+a2[i+1])/2.) * ((a1[i+1]-a1[i])/2.) * (a1[i]*a2[i])
                       ^ index out                                ^ index out 
```

因为您`a2`也可以访问`a2[i+1]`。所以`i`最多可以`3`试试`range(0,4)`

**编辑**：

要填写五个额外的 1，请执行以下操作：

```
a2.extend(5*[1])
a2 
```

# google-app-engine - 采用用户对象的应用程序引擎端点方法

> ID：15515618
> 
> 赞同：2
> 
> 时间：2013-03-20T04:49:59.000
> 
> 标签：google-app-engine, python-2.7, google-cloud-datastore, google-cloud-endpoints, user-object

我有一个需要用户对象的端点方法。我会做以下事情吗？这似乎有点奇怪，因为我可以让用户使用`endpoints.get_current_user()`

```
@endpoints.method(FriendListRequest, FriendListResponse,
                  path='scores', http_method='POST',
                  name='scores.list')
def friend_list(self, request):
  # work would go here 
```

那么 FriendListRequest 将是

```
class FriendListRequest(messages.Message):
    user_object = messages.Field(1, required=True) 
```

我需要该`User`对象的原因是因为我必须使用用户电子邮件来查询和查找该用户的朋友。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:47:25.970

为了安全地对用户进行身份验证，Cloud Endpoints 提供了简单的 OAuth 2.0 支持。而不是在请求中传递用户对象（不安全），请求消息可以是 a`VoidMessage`并且您可以依赖 Authorization 标头，其中包含用户的 OAuth 2.0 令牌。

要实际获取当前用户，您将调用`endpoints.get_current_user()`; 这将需要在装饰器或方法中添加`allowed_client_ids`和/或。有关更多信息，请参阅[文档](https://developers.google.com/appengine/docs/python/endpoints/create_api#allowed-clients-and-audiences)。`audiences``@endpoints.method``@endpoints.api`

例如，在 API 上：

```
@endpoints.api(name='myapi', ...,
               allowed_client_ids=[MY_CLIENT_ID])
class MyApi(...):

    @endpoints.method(message_types.VoidMessage, FriendListResponse,
                      path='scores', http_method='POST',
                      name='scores.list')
    def friend_list(self, request):
        user = endpoints.get_current_user()
        # work would go here 
```

或者，在方法上：

```
 @endpoints.method(message_types.VoidMessage, FriendListResponse,
                      path='scores', http_method='POST',
                      name='scores.list',
                      allowed_client_ids=[MY_CLIENT_ID])
    def friend_list(self, request):
        user = endpoints.get_current_user()
        # work would go here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:50:26.200

使用用户创建一个用户对象并传递相同的

用户实例也可以从电子邮件地址构造：

```
from google.appengine.api import users

user = users.User("A***.j***@gmail.com") 
```

# android - “访问连接被拒绝”linkedin-j android

> ID：15515620
> 
> 赞同：1
> 
> 时间：2013-03-20T04:50:19.270
> 
> 标签：android, linkedin-j

我在我的 android 应用程序中使用linkedin-j。按照中提到的库使用情况

[https://code.google.com/p/linkedin-j/wiki/OAuthFlow](https://code.google.com/p/linkedin-j/wiki/OAuthFlow)

[https://code.google.com/p/linkedin-j/wiki/GettingStarted](https://code.google.com/p/linkedin-j/wiki/GettingStarted)

我能够获得登录用户的详细信息。但是我在获取连接和发布网络更新时遇到问题。在 myeclipse 中，它显示错误访问连接被拒绝。任何人都可以帮助我如何获得电子邮件。任何帮助表示赞赏并提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T05:59:21.103

请检查您的linkedin 应用程序中的默认范围。

# web-scraping - 我可以跟踪谁在链接或操纵我网站的数据吗？

> ID：15515632
> 
> 赞同：0
> 
> 时间：2013-03-20T04:51:36.330
> 
> 标签：web-scraping

是否可以跟踪是否有人链接到我网站上的数据？特别是如果我的数据用于开发人员程序动态生成的站点中？我想知道是否有人公然将我网站的数据作为他们自己的数据传递。显然有直接链接到内容的方法，例如内容操作甚至手动操作。但是，如果有人将我的内容链接（或直接逐字逐句添加或操作）到他们的网站，有没有办法跟踪它？

我是否可以避免有人能够抓取我的网站，或者一切都只是为了抢夺？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:24:07.440

最好的答案和最简单的答案是 GOOGLE - WEBMASTER TOOLS！ [这里](https://accounts.google.com/ServiceLogin?service=sitemaps&passive=1209600&continue=https://www.google.com/webmasters/tools/&followup=https://www.google.com/webmasters/tools/) 实际上这样做非常困难，您需要抓取网络以发现指向您页面的那些链接......动态内容也被链接，因此谷歌也可以找到它。

该工具将允许您查看指向您网站的外部链接。您可以检查它们。

额外的 - 您可以监控您网站的请求和流量，并找到一遍又一遍地使用同一页面的 ip。这可以告诉您外部页面正在从您的网页动态加载内容。

**编辑：**

这是这个主题的一篇好文章：[链接](http://blog.kissmetrics.com/content-scrapers/)- 向下滚动，您可以看到谷歌网站管理员工具与其他一些程序和方法的使用。

这是谷歌网站管理员的一个很好的入门指南：[链接](http://blog.kissmetrics.com/google-webmaster-tools-2012/)

请享用！

# qt - 如何在 QUiLoader 加载的 UI 中将文本设置为 Label

> ID：15515633
> 
> 赞同：0
> 
> 时间：2013-03-20T04:51:40.573
> 
> 标签：qt, user-interface

我有以下情况：

![在此处输入图像描述](../Images/2e8d820a2987c18721514d0157095af4.png)

*   加载 Ui 按钮是中央小部件布局的一部分。
*   中央小部件在 Load Ui 按钮的右侧有一个 QWidget。该小部件的主布局还有两个空布局lay1和lay2
*   单击加载 Ui 时，通过动态 ui 加载器将具有 QLable（在此处打​​印）和 QPushButton（加载行编辑器）的 Ui 表单加载到lay1。
*   单击加载线编辑器会将 QLineEdit 添加到lay2

现在我想获取行编辑文本并将其打印到 QLabel("Print here")

我不知道如何在不产生任何中间变量的情况下做到这一点。

以下是主窗口类定义的一部分：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    lay1 =  new QHBoxLayout;
    lay2 =  new QHBoxLayout;
    laymain = new QVBoxLayout;
    laymain->addLayout(lay1);
    laymain->addLayout(lay2);
    ui->widget->setLayout(laymain);
    connect(ui->pushButton,SIGNAL(clicked()),this,SLOT(LoadEdit()));
}

void MainWindow::LoadEdit()
{
 if(lay1->isEmpty())
     {

         QUiLoader load;
         QFile file("E:\\WorkFolder\\Qt\\ValueOfFilter\\PrintValue.ui");
             file.open(QIODevice::ReadOnly);
         QWidget * edit = load.load(&file,this);

         lay1->addWidget(edit,Qt::Horizontal);

         edit->addAction(act);
         QPushButton * textbutton = edit->findChild<QPushButton*>("pushButton");
         connect(textbutton,SIGNAL(clicked()),this,SLOT(LoadEditClicked()));

}

void MainWindow::LoadEditClicked()
{
   if(lay2->isEmpty())
   {
        QLineEdit * lineedit = new QLineEdit;

        lay2->addWidget(lineedit);
   }
        //want to take text from lineedit and print it to label
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:53:01.583

这是你想要的吗？

```
void MainWindow::LoadEditClicked()
{
   if(lay2->isEmpty())
   {
        QLineEdit * lineedit = new QLineEdit;

        lay2->addWidget(lineedit);
   }
   QLabel * label = edit->findChild<QLabel*>("label");
   label->setText(lineedit->text());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T06:46:18.103

当我作为主窗口的成员进行编辑然后将 LoadEditClicked 更改为：

```
void MainWindow::LoadEditClicked()
 {
     if(lay2->isEmpty())
        {
             QLineEdit * lineedit = new QLineEdit;

             lay2->addWidget(lineedit);

         QLabel * label = edit->findChild<QLabel*>("label");

         connect(lineedit,SIGNAL(textChanged(QString)),label,SLOT(setText(QString)));
    }
 } 
```

感谢@lwinhtoko 发表评论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:10:49.483

每当 lineedit 中的文本发生更改时，都会发出一个信号

```
textChanged( const QString & text ) 
```

将此连接到的`settext()`插槽`QLabel`

```
connect(lineedit , SIGNAL(textChanged(QString)),label, SLOT(setText(QString ))); 
```

# sql - 查找范围列表涵盖的日期范围内的总持续时间

> ID：15515637
> 
> 赞同：1
> 
> 时间：2013-03-20T04:52:19.187
> 
> 标签：sql, oracle, intervals, date-range

我有一堆日期范围存储在表的记录中，其中许多重叠。

```
2013-03-10 10:00 - 2013-03-10 16:00
2013-03-10 15:00 - 2013-03-10 17:00
2013-03-10 20:00 - 2013-03-10 22:00 
```

对于我的光标，我有两个输入日期，我需要知道上表中存储的范围涵盖了这两个日期之间的时间。

对于这个范围：

```
2013-03-10 12:00 - 2013-03-10 23:00 
```

以上范围涵盖了 7 个小时

希望这很清楚。

通常我会发布我尝试过的内容，但我似乎根本无法将其转换为 SQL 查询。我拥有的最好的方法是从我的游标中调用 PLSQL 函数，它循环遍历其他几个游标，试图将表中的日期范围混合在一起，然后从给定的范围中减去它，这是一个可怕的混乱。

我目前使用的是 Oracle 10g，但我们目前正在迁移到 11g，因此在迁移完成之前，我无法使用任何特定于任一版本的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T08:10:28.380

架构：

```
create table Overlapping_Ranges (B date, E date);
insert into Overlapping_Ranges (B, E) values
  (to_date('2013-03-10 10:00', 'yyyy-mm-dd hh24:mi'), to_date('2013-03-10 16:00', 'yyyy-mm-dd hh24:mi'));
insert into Overlapping_Ranges (B, E) values
  (to_date('2013-03-10 15:00', 'yyyy-mm-dd hh24:mi'), to_date('2013-03-10 17:00', 'yyyy-mm-dd hh24:mi'));
insert into Overlapping_Ranges (B, E) values
  (to_date('2013-03-10 20:00', 'yyyy-mm-dd hh24:mi'), to_date('2013-03-10 22:00', 'yyyy-mm-dd hh24:mi'));

create table Ranges_from_cursor (B date, E date);
insert into Ranges_from_cursor (B, E) values
  (to_date('2013-03-10 12:00', 'yyyy-mm-dd hh24:mi'), to_date('2013-03-10 23:00', 'yyyy-mm-dd hh24:mi')); 
```

选择：

```
select
   to_char(c.B, 'yyyy-mm-dd hh24:mi') as "From",
   to_char(c.E, 'yyyy-mm-dd hh24:mi') as "To",
   sum(greatest(0, least(r.E, c.E) - greatest(r.B, c.B))) * 24 as "Hours Overlapped"
from 
   Ranges_from_cursor c,
   (
      select distinct
         r.B, r.E
      from
         (
            select
               T as B,
               lead(T) over (order by T) as E,
               T + (lead(T) over (order by T) - T)/2 as M
            from
               (
                  select B as T from Overlapping_Ranges
                  union
                  select E as T from Overlapping_Ranges
               )
         ) r
         join Overlapping_Ranges o
            on r.M between o.B and o.E
   )r
group by c.B, c.E
order by 1 
```

输出：

```
FROM               TO                 HOURS OVERLAPPED
2013-03-10 12:00   2013-03-10 23:00   7 
```

[小提琴](http://www.sqlfiddle.com/#!4/15663/12)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T07:41:55.273

这是你要找的吗？

```
SELECT MIND1,
     MAXD2,
     24*(MAXD2-MIND1)
FROM
     (SELECT MIN(d1) MIND1,
          MAX(d2)MAXD2
     FROM my_test1
     WHERE D1>'10-mar-2013 12:00:00'
      AND d2 < '10-mar-2013 23:00:00'
     ); 
```

在这里 看[小提琴](http://www.sqlfiddle.com/#!4/55459/6/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T09:22:40.007

这对我来说很完美。

```
WITH daterange AS (
  SELECT TO_DATE('2013-03-10 10:00', 'YYYY:MM:DD HH24:MI') AS date_from, TO_DATE('2013-03-10 16:00', 'YYYY:MM:DD HH24:MI') AS date_to FROM dual
  UNION ALL
  SELECT TO_DATE('2013-03-10 15:00', 'YYYY:MM:DD HH24:MI'), TO_DATE('2013-03-10 18:00', 'YYYY:MM:DD HH24:MI') FROM dual
  UNION ALL
  SELECT TO_DATE('2013-03-10 19:00', 'YYYY:MM:DD HH24:MI'), TO_DATE('2013-03-10 22:00', 'YYYY:MM:DD HH24:MI') FROM dual
)
SELECT FLOOR(sum_diff)
       ||' days, '||(sum_diff - FLOOR(sum_diff))*24||' hours'
       AS hours_between
  FROM (SELECT SUM(CASE
                      WHEN date_from >= TO_DATE(:date_from, 'YYYY-MM-DD HH24:MI')
                       AND date_to <= TO_DATE(:date_to, 'YYYY-MM-DD HH24:MI') THEN
                           (date_to - date_from)
                      WHEN date_from >= TO_DATE(:date_from, 'YYYY-MM-DD HH24:MI')
                       AND date_to > TO_DATE(:date_to, 'YYYY-MM-DD HH24:MI') THEN
                           (TO_DATE(:date_to, 'YYYY-MM-DD HH24:MI') - date_from)
                      WHEN date_from < TO_DATE(:date_from, 'YYYY-MM-DD HH24:MI')
                       AND date_to <= TO_DATE(:date_to, 'YYYY-MM-DD HH24:MI') THEN
                           (date_to - TO_DATE(:date_from, 'YYYY-MM-DD HH24:MI'))
                      WHEN date_from < TO_DATE(:date_from, 'YYYY-MM-DD HH24:MI')
                       AND date_to > TO_DATE(:date_to, 'YYYY-MM-DD HH24:MI') THEN
                           (TO_DATE(:date_to, 'YYYY-MM-DD HH24:MI') - TO_DATE(:date_from, 'YYYY-MM-DD HH24:MI'))
                      ELSE 0
                   END) AS sum_diff -- The differences are numeric values, hence sum will also be numeric.
          FROM daterange dr
         WHERE date_to > TO_DATE(:date_from, 'YYYY-MM-DD HH24:MI')
           AND date_from < TO_DATE(:date_to, 'YYYY-MM-DD HH24:MI'))
; 
```

**注意：**该`WITH`子句仅用于说明目的。在适用的情况下替换为您自己的表名。

# php - 带有 htmlspecialchars 的 php simplexml_load_file

> ID：15515638
> 
> 赞同：0
> 
> 时间：2013-03-20T04:52:36.067
> 
> 标签：php, xml, xml-parsing, simplexml, htmlspecialchars

我正在使用以下代码获取 XML 的内容：

```
$xml = simplexml_load_file("X.xml");
echo $xml->CountryList->Country[1]; 
```

这是 X.xml：

```
<PickUpCityListRQ>
  <CountryList>
    <Country>Albania</Country>
    <Country>Andorra</Country>
  </CountryList>
</PickUpCityListRQ> 
```

一切正常，它为我返回了 Andorra，但是，当我尝试使用带有特殊字符的 url 时，比如这个：

```
http://somelink/ServiceRequest.do?xml=<PickUpCityListRQ><Credentials username='USERNAME' password='PASSWORD' remoteIp='IP'/><Country>UK</Country></PickUpCityListRQ> 
```

此链接对您不起作用，因为它只是一个示例，但请相信，真正的链接返回与 X.xml 相同的内容。我知道原因是链接中的特殊字符，但我无法让它工作。我试过这样的事情：

```
$username = "USERNAME";
$password = "PASSWORD";
$accessurl = htmlspecialchars("Credentials username='$username' password='$password' remoteIp='123.123.123.123'/");
$required = htmlspecialchars("<PickUpCityListRQ><$accessurl><Country>UK</Country></PickUpCityListRQ>");
$url = 'somelink/service/ServiceRequest.do?xml='.$required;
echo $url; 
```

它返回（带有回显）所需的链接，以防我手动（在浏览器中）使用它，我将获得所需的内容。但是，如果我尝试使用此代码获取 XML 内容：

```
$xml = simplexml_load_file($url);
echo $xml->CountryList->Country[1]; 
```

我不会工作。有任何想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:00:13.500

`htmlspecialchars`用于保护 HTML 内容页面中的特殊字符（尤其是在用户输入时，以避免某种 XSS 或其他攻击..）。

当您操作 URL 时，您应该使用`urlencode`将您的内容作为 URL 的参数发送。

所以你的网址将是：

```
http://someserver/somethink/services/ServiceRequest.do?xml=%3CPickUpCityListRQ%3E%3CCredentials%20username%3D'USERNAME'%20password%3D'PASS‌​WORD'%20remoteIp%3D'IP'%2F%3E%3CCountry%3EUK%3C%2FCountry%3E%3C%2FPickUpCityListR‌​Q%3E 
```

正如文档所说，`urldecode`不需要，因为超全局变量 $_GET 和 $_REQUEST 已经被 urldecoded。因此，在执行该工作的脚本中，您可以直接使用 $_GET 条目中的值。

```
$xml = simplexml_load_string($_GET['xml']); 
```

文档：[urlencode](http://www.php.net/manual/en/function.urlencode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:03:03.960

[从PHP simplexml_load_file](https://stackoverflow.com/questions/8942739/php-simplexml-load-file-with-special-chars-in-url)窃取的答案在 URL 中有特殊字符

用这个

```
$username = "USERNAME";
$password = "PASSWORD";
$accessurl = "Credentials username='$username' password='$password' remoteIp='123.123.123.123'/";
$required = "<PickUpCityListRQ><$accessurl><Country>UK</Country></PickUpCityListRQ>";

$url= rawurlencode("somelink/service/ServiceRequest.do?xml={$required}");

$xml = simplexml_load_file($url);
echo $xml->CountryList->Country[1]; 
```

# javascript - JavaScript 未提交表单

> ID：15515639
> 
> 赞同：2
> 
> 时间：2013-03-20T04:52:38.300
> 
> 标签：javascript, html, forms, submit, form-submit

我花了最后一个小时左右在这里和谷歌搜索，但没有成功。我有一个表格，我想通过 POST 提交。javascript 运行并验证良好，它甚至“提交”表单。但是当它这样做时，它只是重新加载页面。不发送 POST 标头（在 Firefox 中使用 Firebug 确认）。就好像它只是重新加载页面而不是提交它。

此表单嵌入在 addUser.php 页面中。

```
<form action="addUser.php" method="post" name="NewUser">
<div data-role="field-contain">
    <label label-for="EmpID" class="ui-hidden-accessible">Enter Employee ID</label>
    <input name="EmpID" id="EmpID" placeholder="Employee ID" value="" autocomplete="off" title="Enter Employee ID" type="number" required autofocus>

    <label label-for="UserName" class="ui-hidden-accessible">Enter username</label>
    <input name="UserName" id="UserName" placeholder="Username" value="" autocomplete="off" title="Enter the new username" required>

    <p>
        <label label-for="NewPass1" class="ui-hidden-accessible">Enter Your Current Password</label>
        <input name="NewPass1" id="NewPass1" placeholder="New Password" value="" type="password" autocomplete="off" title="Must be at least 8 characters, with numbers and upper and lower case letters." required>
    </p>

    <p>
        <label label-for="NewPass2" class="ui-hidden-accessible">Enter Your Current Password</label>
        <input name="NewPass2" id="NewPass2" placeholder="Verify Password" value="" type="password" autocomplete="off" title="Re-enter your chosen new password." required>
    </p>
</div>
<button type="button" name="submitButton" value="submitButton" data-theme="d" data-inline="true" data-icon="check" data-iconpos="left" onclick="validateForm ()">
    Add User
</button> 
```

这是Javascript：

```
function validateForm()
{
    var reason = "";

    reason += validateEmpID();
    reason += validateUserName();
    reason += validateNewPassword();

    if (reason != "") {
        alert("There are some errors with the data you entered:\n" + reason);
        return false;
    } else {
        document.NewUser.submit();
    }
} 
```

我尝试了各种不同的调用提交方法，结果都一样。非常感谢任何帮助。

谢谢加雷斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:59:32.130

我认为应该是

```
document.forms['NewUser'].submit(); 
```

或者

```
document.forms.NewUser.submit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T06:24:29.710

我认为您缺少添加 return false 的地方，这就是您的浏览器要求重新加载表单的原因。更好的提交方法是使用提交按钮而不是使用简单的按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T04:58:01.000

为什么不使用 AJAX 帖子？或者更好的是 jQuery AJAX POST？

```
$.post(url, data, datatype); 
```

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T05:15:11.927

```
function validateForm(event) {
    var reason = "";

    reason += validateEmpID();
    reason += validateUserName();
    reason += validateNewPassword();

    if (reason != "") {
        alert("There are some errors with the data you entered:\n" + reason);
        event.preventDefault();
    }
}

document.getElementById('my_form').addEventListener('submit', validateForm, false); 
```

# java - 错误：适配器的内容发生了变化但ListView没有收到通知

> ID：15515643
> 
> 赞同：-4
> 
> 时间：2013-03-20T04:52:51.917
> 
> 标签：java, android

这是我的 logcat 错误；

```
03-20 04:24:42.482: E/AndroidRuntime(920): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131165193, class android.widget.ListView) with Adapter(class com.example.recipestutors.ItemListBaseAdapter)] 
```

我提出了所有可能的方法，但它一次又一次地显示错误 ItemListAdapter.java 我为这些问题添加的是

```
public class ItemListBaseAdapter extends BaseAdapter {
private static ArrayList<Recipedetails> itemDetailsrrayList;

private Integer[] imgid = {
                R.drawable.vegeterian,
                R.drawable.nonveg,
                R.drawable.pickels,
                R.drawable.soup,
                R.drawable.sweets,
                R.drawable.cakes,
                R.drawable.icecreams,
                R.drawable.chinesevegdishes,
                R.drawable.chinesenonveg,
                R.drawable.chinesenoodles,
                R.drawable.chinesesoup,
                R.drawable.godhumaivegadai,
                R.drawable.soyamorekoozh,
                R.drawable.tomatokulambu,
                R.drawable.tomatoupma,
                R.drawable.vadanavratrispecial,
                R.drawable.eggkurma,
                R.drawable.milagu,
                R.drawable.rasam,
                R.drawable.vegetablekootu,
                R.drawable.avial,
                R.drawable.kothavarangaicurry,
                R.drawable.allepeyfishcurry,
                R.drawable.spicymadraschicken,
                R.drawable.prawns,
                R.drawable.keralachickenstew,
                R.drawable.nilgirichickenkorma,
                R.drawable.pepperchickencurry,
                R.drawable.chettiandchicken,
                R.drawable.prawnmasala,
                R.drawable.beeffry,
                R.drawable.crispyfish,
                R.drawable.amlapickle,
                R.drawable.avakaipickle,
                R.drawable.capsicumpickle,
                R.drawable.lemonpickle,
                R.drawable.onionpickle,
                R.drawable.mangopickle,
                R.drawable.tendermangopickle,
                R.drawable.tomatopickle,
                R.drawable.chillipickles,
                R.drawable.gingerpickle,
                R.drawable.garlicsoup,
                R.drawable.mixedvegsoup,
                R.drawable.chickenmanchowsoup,
                R.drawable.cleartomatosoup,
                R.drawable.sweetcornvegetablesoup,
                R.drawable.prawnandnoodlesoup,
                R.drawable.beetrootsoup,
                R.drawable.capsicumsoup,
                R.drawable.muttonsoup,
                R.drawable.spinachsoup,
                R.drawable.vegcurry,
                R.drawable.mushroommutter,
                R.drawable.alooparatha,
                R.drawable.daltadka,
                R.drawable.aloomethi,
                R.drawable.rajma,
                R.drawable.paneerbhujri,
                R.drawable.alooghobi,
                R.drawable.aloosabzi,
                R.drawable.kadhaipaneer,
                R.drawable.chickenwithbellpeppers,
                R.drawable.butterchicken,
                R.drawable.fishkorma,
                R.drawable.prawnfry,
                R.drawable.tandoorichicken,
                R.drawable.maccherjholfish,
                R.drawable.shamikabab,
                R.drawable.saagmeat,
                R.drawable.sindhichickenbiryani,
                R.drawable.punjabichickencurry,
                R.drawable.gulabjamun,
                R.drawable.basundi,
                R.drawable.peda,
                R.drawable.badhamhalwa,
                R.drawable.coconutburfi,
                R.drawable.kulfi,
                R.drawable.ladoo,
                R.drawable.mysorepak,
                R.drawable.ricekheer,
                R.drawable.badam,
                R.drawable.cauliflowersoup,
                R.drawable.cucumbersoup,
                R.drawable.tomatosoup,
                R.drawable.mulligatawnysoup,
                R.drawable.greenpeassoup,
                R.drawable.northindianmuttonsoup,
                R.drawable.chickennoodlesoup,
                R.drawable.spicybeansoup,
                R.drawable.eggdropsoup,
                R.drawable.springvegsoup,
                R.drawable.mushroomandseitan,
                R.drawable.tofuwith3spices,
                R.drawable.creamyvegpie,
                R.drawable.grilledvegmedley,
                R.drawable.bakedsquash,
                R.drawable.africanchickenstew,
                R.drawable.westafricanchicken,
                R.drawable.africanyamsoup,
                R.drawable.chickenchilliroast,
                R.drawable.chilliblackbeans,
                R.drawable.williecake,
                R.drawable.pumpkingingercupcakes,
                R.drawable.doublelayerpumpkincheesecake,
                R.drawable.carrotcake,
                R.drawable.sexcake,
                R.drawable.chocolatechipicecream,
                R.drawable.cookieicecream,
                R.drawable.cinnamonicecream,
                R.drawable.appleicecream,
                R.drawable.walnut,
                R.drawable.chineseaubergins,
                R.drawable.spicycucumber,
                R.drawable.chinesemushrooms,
                R.drawable.chinesegobi,
                R.drawable.spicytofu,
                R.drawable.chinesetilchicken,
                R.drawable.chickenmoongali,
                R.drawable.sweetsourchicken,
                R.drawable.cherrychicken,
                R.drawable.mymasalachicken,
                R.drawable.coldseasamenoodles,
                R.drawable.sobanoodles,
                R.drawable.noodleswithtofu,
                R.drawable.chinesevegandbeef,
                R.drawable.noodleswithpepper,
                R.drawable.jhingasoup,
                R.drawable.masalachickensoup,
                R.drawable.cabbagesoup,
                R.drawable.chinesepumpkinsoup,
                R.drawable.baconsoup,

                };

private LayoutInflater l_Inflater;

public ItemListBaseAdapter(Context context, ArrayList<Recipedetails> results) {
        itemDetailsrrayList = results;
        l_Inflater = LayoutInflater.from(context);
}

public int getCount() {
        return itemDetailsrrayList.size();
}

public Object getItem(int position) {
        return itemDetailsrrayList.get(position);
}

public long getItemId(int position) {
        return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
                convertView = l_Inflater.inflate(R.layout.item_details_view, null);
                holder = new ViewHolder();
                holder.txt_itemName = (TextView) convertView.findViewById(R.id.name);
                holder.txt_itemDescription = (TextView) convertView.findViewById(R.id.itemDescription);
                holder.itemImage = (ImageView) convertView.findViewById(R.id.photo);

                convertView.setTag(holder);
        } else {
                holder = (ViewHolder) convertView.getTag();
        }

        holder.txt_itemName.setText(itemDetailsrrayList.get(position).getName());
        holder.txt_itemDescription.setText(itemDetailsrrayList.get(position).getItemDescription());
        holder.itemImage.setImageResource(imgid[itemDetailsrrayList.get(position).getImageNumber() - 1]);
        return convertView;
}
public synchronized   void refreshAdapter(ArrayList<Recipedetails> items) {
    //itemDetailsrrayList.clear();
    itemDetailsrrayList = items;
   notifyDataSetChanged();
}

static class ViewHolder {
        TextView txt_itemName;
        TextView txt_itemDescription;
        ImageView itemImage;
} 
```

}

我的 listactivity.java，添加了这些行

公共类 NorthIndian 扩展 Activity { ItemListBaseAdapter _itemListAdapter;

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<Recipedetails> image_details = new ArrayList<Recipedetails>();

        _itemListAdapter = new ItemListBaseAdapter(this, image_details);

        final ListView lv1 = (ListView) findViewById(R.id.listV_main);
        lv1.setAdapter(_itemListAdapter);

        lv1.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                Object o = lv1.getItemAtPosition(position);
                Recipedetails obj_itemDetails = (Recipedetails)o;
                Toast.makeText(NorthIndian.this, "You have chosen : " + " " + obj_itemDetails.getName(), Toast.LENGTH_LONG).show();

                switch(obj_itemDetails.getImageNumber())
                {
                    case 1:
                         Intent newActivity = new Intent(NorthIndian.this, 
                                 AndroidTabLayoutActivity4.class);     
                         startActivity(newActivity);
                        break;

                    case 2:
                        Intent new1Activity = new Intent(NorthIndian.this, 
                                AndroidTabLayoutActivity5.class);     
                        startActivity(new1Activity);
                        break;

                    case 5:
                        Intent new2Activity = new Intent(NorthIndian.this, 
                                AndroidTabLayoutActivity6.class);     
                        startActivity(new2Activity);
                        break; 

                    case 4:
                        Intent new3Activity = new Intent(NorthIndian.this, 
                                AndroidTabLayoutActivity7.class);     
                        startActivity(new3Activity);
                        break;      

                   default:
                       Toast.makeText(NorthIndian.this, "Wrong Input", Toast.LENGTH_LONG).show();
                }
            }  
        });

        refreshYourAdapter(GetSearchResults());
 }
 private void refreshYourAdapter(final ArrayList<Recipedetails> items) {
     //this is what I meant. The error clearly states you are not updating the adapter on the UI thread
     runOnUiThread(new Runnable() {
         public void run() {
             _itemListAdapter.refreshAdapter(items);
         }
     });
}

    private ArrayList<Recipedetails> GetSearchResults(){
        ArrayList<Recipedetails> results = new ArrayList<Recipedetails>();

        Recipedetails item_details = new Recipedetails();
        item_details.setName("Vegterian");
        item_details.setItemDescription("Recipes made by raw materials");
        item_details.setImageNumber(1);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Non-Vegterian");
        item_details.setItemDescription("Flesh of sweet animals");
        item_details.setImageNumber(2);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Sweets");
        item_details.setItemDescription("Tasty sweets made from indians");
        item_details.setImageNumber(5);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Soups");
        item_details.setItemDescription("Startup for our food");
        item_details.setImageNumber(4);
        results.add(item_details);

        return results;
    } 
```

}

和 southindina.java

```
ublic class SouthIndian extends Activity {
ItemListBaseAdapter _itemListAdapter;
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<Recipedetails> image_details = new ArrayList<Recipedetails>();

        _itemListAdapter = new ItemListBaseAdapter(this, image_details);

        final ListView lv1 = (ListView) findViewById(R.id.listV_main);
        lv1.setAdapter(_itemListAdapter);

        lv1.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> a, View v, int position, long id) {
                        Object o = lv1.getItemAtPosition(position);
                        Recipedetails obj_itemDetails = (Recipedetails)o;
                        Toast.makeText(SouthIndian.this, "You have chosen : " + " " +      obj_itemDetails.getName(), Toast.LENGTH_LONG).show();

                        switch(obj_itemDetails.getImageNumber())
                        {
                            case 1:
                                 Intent newActivity = new Intent(SouthIndian.this,
                                                 AndroidTabLayoutActivity.class);    
                     startActivity(newActivity);
                                break;

                            case 2:
                                Intent new1Activity = new Intent(SouthIndian.this,
                                                AndroidTabLayoutActivity1.class);    
                            startActivity(new1Activity);
                                break;

                            case 3:
                                Intent new2Activity = new Intent(SouthIndian.this,
                                                AndroidTabLayoutActivity2.class);    
                            startActivity(new2Activity);
                                break;

                            case 4:
                                Intent new3Activity = new Intent(SouthIndian.this,
                                                AndroidTabLayoutActivity3.class);    
                            startActivity(new3Activity);
                                break;        

                           default:
                                   Toast.makeText(SouthIndian.this, "Wrong Input", Toast.LENGTH_LONG).show();
                        }

                }
        });

        refreshYourAdapter(GetSearchResults());
    }

    // THIS IS WHAT IT SHOULD LOOK LIKE MORE OR LESS. THIS IS AS MUCH AS I CAN HELP

    private void refreshYourAdapter(final ArrayList<Recipedetails> items) {
         //this is what I meant. The error clearly states you are not updating the adapter on the UI thread
         runOnUiThread(new Runnable() {
             public void run() {
                 _itemListAdapter.refreshAdapter(items);
             }
         });
    }

    private ArrayList<Recipedetails> GetSearchResults(){
        ArrayList<Recipedetails> results = new ArrayList<Recipedetails>();

        Recipedetails item_details = new Recipedetails();
        item_details.setName("Vegterian");
        item_details.setItemDescription("Recipes made by raw materials");
            item_details.setImageNumber(1);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Non-Vegterian");
        item_details.setItemDescription("Flesh of sweet animals");
        item_details.setImageNumber(2);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Pickels");
        item_details.setItemDescription("Touchable dish  by Homemade");
        item_details.setImageNumber(3);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Soups");
        item_details.setItemDescription("Startup for our food");
            item_details.setImageNumber(4);
        results.add(item_details);

        return results;
    } 
```

}

在我的应用程序中添加所有链接后，同样的问题一次又一次地出现

请在此处查看我的代码以进一步说明[http://pastebin.com/DXdvB5HC](http://pastebin.com/DXdvB5HC)

AndroidTabLayoutActivity

```
public class AndroidTabLayoutActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabmain);

        TabHost tabHost = getTabHost();

        // Tab for Photos
        TabSpec photospec = tabHost.newTabSpec("Manual");
        photospec.setIndicator("Manual", getResources().getDrawable(R.drawable.icon_photos_tab));
        Intent photosIntent = new Intent(this, SouthIndianvegrecipes1.class);
        photospec.setContent(photosIntent);

        // Tab for Videos
        TabSpec videospec = tabHost.newTabSpec("Videos");
        videospec.setIndicator("Videos", getResources().getDrawable(R.drawable.icon_videos_tab));
        Intent videosIntent = new Intent(this, SouthIndianvegrecipes.class);
        videospec.setContent(videosIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(photospec); // Adding photos tab
         // Adding songs tab 
        tabHost.addTab(videospec); // Adding videos tab
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:03:44.397

用这个替换你现有的课程

```
public class SouthIndian extends Activity {
ItemListBaseAdapter _itemListAdapter;
ArrayList<Recipedetails> results = new ArrayList<Recipedetails>();           
Recipedetails item_details = new Recipedetails();
ArrayList<Recipedetails> image_details = new ArrayList<Recipedetails>();
ListView lv1;
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        lv1 = (ListView) findViewById(R.id.listV_main);
        lv1.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> a, View v, int position, long id) {

                        Recipedetails item_details = new Recipedetails();
                        item_details = results.get(position);
                        //Object o = lv1.getItemAtPosition(position);

                      //  Recipedetails obj_itemDetails = (Recipedetails)o;
                        //Toast.makeText(SouthIndian.this, "You have chosen : " + " " +      obj_itemDetails.getName(), Toast.LENGTH_LONG).show();

                        Toast.makeText(SouthIndian.this, "You have chosen : " + " " +      item_details.getName(), Toast.LENGTH_LONG).show();

                        switch(item_details.getImageNumber())
                        {
                            case 1:
                                 Intent newActivity = new Intent(SouthIndian.this,AndroidTabLayoutActivity.class);    
                                 startActivity(newActivity);
                                break;

                            case 2:
                                Intent new1Activity = new Intent(SouthIndian.this,AndroidTabLayoutActivity1.class);    
                                startActivity(new1Activity);
                                break;

                            case 3:
                                Intent new2Activity = new Intent(SouthIndian.this,AndroidTabLayoutActivity2.class);    
                                startActivity(new2Activity);
                                break;

                            case 4:
                                Intent new3Activity = new Intent(SouthIndian.this,AndroidTabLayoutActivity3.class);    
                                startActivity(new3Activity);
                                break;        

                           default:
                                   Toast.makeText(SouthIndian.this, "Wrong Input", Toast.LENGTH_LONG).show();
                        }

                }
        });

    }

    // THIS IS WHAT IT SHOULD LOOK LIKE MORE OR LESS. THIS IS AS MUCH AS I CAN HELP

    private void refreshYourAdapter(final ArrayList<Recipedetails> items) {
         //this is what I meant. The error clearly states you are not updating the adapter on the UI thread
         runOnUiThread(new Runnable() {
             public void run() {
                 _itemListAdapter.refreshAdapter(items);
             }
         });
    }

    private ArrayList<Recipedetails> GetSearchResults(){
        /*ArrayList<Recipedetails> results = new ArrayList<Recipedetails>();           
        Recipedetails item_details = new Recipedetails();*/

        item_details.setName("Vegterian");
        item_details.setItemDescription("Recipes made by raw materials");
            item_details.setImageNumber(1);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Non-Vegterian");
        item_details.setItemDescription("Flesh of sweet animals");
        item_details.setImageNumber(2);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Pickels");
        item_details.setItemDescription("Touchable dish  by Homemade");
        item_details.setImageNumber(3);
        results.add(item_details);

        item_details = new Recipedetails();
        item_details.setName("Soups");
        item_details.setItemDescription("Startup for our food");
            item_details.setImageNumber(4);
        results.add(item_details);

        return results;
    }

    @Override
    protected void onResume() {
        super.onResume();
        _itemListAdapter = new ItemListBaseAdapter(this, image_details);
        refreshYourAdapter(GetSearchResults());
        lv1.setAdapter(_itemListAdapter);

    } 
```

}

有关通知数据的更多详细信息，[请参见此处](http://androidadapternotifiydatasetchanged.blogspot.in/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:24:05.953

首先，我不确定是否要在将适配器`onCreate()`设置到列表后立即更改适配器。据我了解，您可以从一开始就使用正确的数据创建适配器。例如**，仅用于测试**您可以通过以下方式进行：

```
new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
                refreshYourAdapter(GetSearchResults());
            }
        }, 1000); 
```

我建议尝试以下更改（但是，我无法完全运行您的代码）：

ItemListBaseAdapter.java：

```
...
public synchronized void refreshYourAdapter(ArrayList<Recipedetails> items) {
    itemDetailsrrayList = items;
    notifyDataSetChanged();
}
... 
```

# python-2.7 - 我的密码生成器有问题

> ID：15515646
> 
> 赞同：0
> 
> 时间：2013-03-20T04:53:14.410
> 
> 标签：python-2.7, passwords, generator, ubuntu-12.10

我做了一个密码生成器——我只有 16 岁，所以它可能不是最好的——它输出 8 0 和 01100101 之类的，然后它输出密码。好吧，当密码中有“10”时，例如 FG4v10Y6，它会添加另一个字符，因此它不是 FG4v10Y6，而是 FG4v10Y6M，因此它有 9 个或更多字符，具体取决于其中有多少个“10”。

我不确定它为什么这样做，请帮忙。谢谢！

```
import pygame
import random

pygame.init()

#letters

reg = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']

CAP = ['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z']

final_pass = []
num_let_list = []
new_list = []

i = 0

file = open("password_test","w")

def num_list_gen(num_list):
    for i in range(8):
        num_let_list.append(random.randint(0,1))
        i += 1

    for each in num_let_list:
        each = str(each)
        new_list.append(each)   
    print ''.join(new_list)

def CAP_reg_num(final_pass,num_let_list,CAP,reg):
    for each in num_let_list:
        if each == 0:
            cap_reg = random.randint(0,1)
            if cap_reg == 0:
                let1 = random.randint(0,25)
                final_pass.append(reg[let1])
            if cap_reg == 1:
                let1 = random.randint(0,25)
                final_pass.append(CAP[let1])
        if each == 1:

                    num1 = random.randint(0,10)
            num1 = str(num1)
                    final_pass.append(num1)

def main(CAP,reg,num_let_list,final_pass):
    num_list_gen(num_let_list)
    CAP_reg_num(final_pass,num_let_list,CAP,reg)
    print ''.join(final_pass)
    file.write(''.join(final_pass))
    file.close

main(CAP,reg,num_let_list,final_pass) 
```

为什么代码在某些地方的帖子上出现的都很奇怪，你如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:01:46.817

您的密码生成器正在掷硬币以选择添加字母或数字。当它选择添加号码时，您选择要添加的号码：

```
num1 = random.randint(0,10) 
```

但是，这不会返回单个数字。它返回 11 个可能值之一：0 到 10 之间的数字。所以在 11 中的一次，它会将数字 10 添加到字符串中，这当然是两位数。

你要：

```
num1 = random.randint(0,9) 
```

而是添加一个数字。

# sql - 如何删除数据不在列中的重复数据行

> ID：15515649
> 
> 赞同：1
> 
> 时间：2013-03-20T04:53:21.210
> 
> 标签：sql

A `SELECT QUERY`for Person Matches 生成一个表，其中每 2 行包含与其上方的行相同的信息。一个`Sort By Surname,GivenName,BirthD` 例如之后

```
IDIR1, Surname, GivenName, BirthD IDIR2\. 
IDIR2, Surname, GivenName, BirthD IDIR1\. 
```

（两人的标准相同，但不同`IDIR`）

有哪些选项可以消除第 2 行的出现。删除是可以接受的，但`NOT IN, <>,`等不起作用，因为： 全部`IDIRs (1 & 2)`都在`2 IDIR`列中。只读取一行以检查两者是否都是个人而不是同一个人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:59:20.813

沿着这些思路的东西应该给你一个结果集，其中每一秒的记录都被遗漏了。

```
SELECT a.*
  FROM thetable AS a
  JOIN thetable AS b
    ON a.Surname = b.Surname
   AND a.GivenName = b.GivenName
   ...
 WHERE a.IDIR < b.IDIR 
```

请注意，它未经测试 - 您可能需要稍微清理一下，但诀窍是`a.IDIR < b.IDIR`用来清除重复项。

# javascript - 如果标记靠近另一个，Google Maps API 通知

> ID：15515657
> 
> 赞同：1
> 
> 时间：2013-03-20T04:54:03.363
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用 Google 地图 API 允许用户通过单击地图来设置位置。无论用户单击何处，都会放置标记并且效果很好。我的问题是，我的用户正在向我的应用程序添加重复的位置，尽管他们可以直观地看到该位置已经有一个标记（我正在从我的数据库中加载现有位置的标记）。

**如果标记放置在地图上已有标记的 X 距离内，是否有办法在 Google Maps API 中触发事件？**我知道我可能会以某种方式在javascript中使用haversine算法，但如果可以的话，我想避免在客户端出现这种复杂性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T06:10:38.177

请尝试这种方法..这可能需要根据您的需要进行一些修改，这将是客户端，但逻辑也可以在服务器端实现。

```
function CheckIFMarkersAreNearBy(preExistingMarkersArray, milesToCheck, lat, lon){
    var range = milesToCheck/70;

    var minLat = lat - range;
    var maxLat = lat + range;
    var minLon = lon - range;
    var maxLon = lon + range;

    var markersNearBy = 0;

    for( var i = 0; i < preExistingMarkersArray.length; i++){
        if(preExistingMarkersArray[i].lat > minLat && preExistingMarkersArray[i].lat < maxLat && preExistingMarkersArray[i].lon > minLon && preExistingMarkersArray[i].lon < maxLon){
            markersNearBy++;
        }
    }

    alert('you have ' + markersNearBy + 'markers near by you current selection');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T08:54:37.463

另一种方法，不需要进一步计算距离或类似的：

对于放置在地图上的每个标记，还要在同一位置创建一个圆圈。通过将 fillOpacity 和 strokeOpacity 设置为隐藏圆圈`0`并应用适合您需要的半径。

结果：圆圈不可见，但仍然存在。当用户点击隐藏的圆圈时，地图不会响应点击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:01:39.873

我认为没有特定的功能。你会发现最接近的东西是[google.maps.geometry.spherical](https://developers.google.com/maps/documentation/javascript/reference?hl=en-US#spherical)，其中包括一个函数`computeDistanceBetween(from:LatLng, to:LatLng, radius?:number)`

因此，在您在地图上放置新标记之前，只需获取当前标记与新请求标记之间的距离即可。请记住，即使 Google Maps API 提供了执行此操作的方法，它仍将位于客户端，因此无论如何您都不会避免“客户端的复杂性”。

# android - 源附件不包含文件 ChartFactory.class 的源

> ID：15515664
> 
> 赞同：1
> 
> 时间：2013-03-20T04:54:17.443
> 
> 标签：android, achartengine

我正在使用 achartengine-1.0.0 以图表的形式表示我的数据。在 Properties Build path 中，我给出了 jar 文件的路径。在 Order and Import 选项卡中，我检查了 achartengine-1.0.0.jar 选项。但是在调试我的应用程序时，它仍然显示“源附件不包含文件 ChartFactory.class 的源”。这是代码，

```
 import org.achartengine.ChartFactory;
 import org.achartengine.GraphicalView;
 import org.achartengine.chart.PointStyle;
 import org.achartengine.chart.BarChart.Type;
 import org.achartengine.model.XYMultipleSeriesDataset;
 import org.achartengine.model.XYSeries;
 import org.achartengine.renderer.XYMultipleSeriesRenderer;
 import org.achartengine.renderer.XYSeriesRenderer;

public class MainActivity extends Activity {

  private static final int SERIES_NR = 2;
  public final android.content.Context Context = MainActivity.this;    

  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
   Button ReportGraph=(Button)findViewById(R.id.ReportGraph);
   ReportGraph.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            RelativeLayout relChartView=(RelativeLayout)findViewById(R.id.ChartView);
            GraphicalView GraphChartView = ChartFactory.getBarChartView(getApplicationContext(), getDemoDataset(), getDemoRenderer(),Type.DEFAULT);
            //ChartFactory.getLineChartIntent(this, getDemoDataset(), getDemoRenderer());
            relChartView.addView(GraphChartView);
        }
    });

}

  private XYMultipleSeriesDataset getDemoDataset() {
    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    final int nr = 7;
    Random r = new Random();
    for (int i = 0; i < SERIES_NR; i++) {
        XYSeries series = new XYSeries("Demo series " + (i + 1));
        for (int k = 0; k < nr; k++) {
            series.add(k, 20 + r.nextInt() % 100);
        }
        dataset.addSeries(series);
    }
    return dataset;
}

private XYMultipleSeriesRenderer getDemoRenderer() {
    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
    renderer.setAxisTitleTextSize(12);
    renderer.setChartTitleTextSize(12);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);
    renderer.setPointSize(5f);
    renderer.setMargins(new int[] { 20, 30, 15, 0 });
    XYSeriesRenderer r = new XYSeriesRenderer();
    r.setColor(Color.BLUE);
    r.setPointStyle(PointStyle.DIAMOND);
    r.setFillBelowLine(false);
    r.setFillPoints(true);
    renderer.addSeriesRenderer(r);
    setChartSettings(renderer);
    return renderer;
}

private void setChartSettings(XYMultipleSeriesRenderer renderer) {
    renderer.setChartTitle("Chart demo");
    renderer.setXTitle("x values");
    renderer.setYTitle("y values");
    renderer.setApplyBackgroundColor(false);
    renderer.setRange(new double[] {0,6,-70,40});
    renderer.setFitLegend(false);
    renderer.setAxesColor(Color.BLACK);
    renderer.setShowGrid(true);
    renderer.setXAxisMin(0.5);
    renderer.setXAxisMax(10.5);
    renderer.setYAxisMin(0);
    renderer.setZoomEnabled(false);
    renderer.setYAxisMax(100);
  }
} 
```

请任何人帮助我。任何帮助将不胜感激！！！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:07:17.833

[您可以按照此处](http://code.google.com/p/achartengine/source/checkout)的说明获取整个 AChartEngine 源代码。您无需费心反编译它。

# c# - 如何在windows Phone中应用项目点击功能并在下一页显示数据

> ID：15515668
> 
> 赞同：0
> 
> 时间：2013-03-20T04:54:21.660
> 
> 标签：c#, windows-phone-7

```
public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    public MainPage()
    {
        InitializeComponent();
        myButton.Click += new RoutedEventHandler(myButton_Click);
    }

    void myButton_Click(object sender, RoutedEventArgs e)
    {
        WebClient webClient = new WebClient();
        webClient.DownloadStringCompleted += new DownloadStringCompletedEventHandler(webClient_DownloadStringCompleted);
        webClient.DownloadStringAsync(new Uri("http://www.taxmann.com/TaxmannWhatsnewService/mobileservice.aspx?service=topstories"));
    }

    void webClient_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        var rootObject = JsonConvert.DeserializeObject<List<NewsItem>>(e.Result);
        lstEmployee.ItemsSource = rootObject;
    }

    public class NewsItem
    {
        public string news_id { get; set; }
        public string news_title { get; set; }
        public string website_link { get; set; }
        public string imagepath { get; set; }
        public string news_date { get; set; }
        public string news_detail_description { get; set; }
    }
} 
```

这是我的代码，我可以在 Listview news_title 和 news_data 中打印数据。
现在我想选择特定新闻项目的项目并在另一个页面中显示它的 news_description。

请帮助我如何实施。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T05:41:35.867

我想你正在使用`ListBox`。所以试试这样

```
 <ListBox x:Name="lstEmployee" SelectionChanged="lstEmployee_SelectionChanged_1" /> <br/><br/>

    private void lstEmployee_SelectionChanged_1(object sender, SelectionChangedEventArgs e)
    {
        NewsItem selectedItem = (sender as ListBox).SelectedItem;
        if (selectedItem != null)
        {
            // pass news detail as parameter and take it from you nerw page
            NavigationService.Navigate(new Uri(string.Format( "/Path/YourNewPage.xaml?desc=selectedItem.news_detail_description ", UriKind.Relative));
        }
    } 
```

此[链接](https://stackoverflow.com/questions/4143383/wp7-pass-parameter-to-new-page)将帮助您了解如何在页面之间传递参数。

**附加：**由[nkchandra](https://stackoverflow.com/users/649306/nkchandra)

要将整个 NewsItem 传递到另一个页面，最好的方法是使用 Application.Current

首先在 App.xaml.cs 页面中创建 NewsItem 的实例

```
public NewsItem selectedNewsItem; 
```

然后在 ListBox 的 SelectionChanged 事件处理程序中，

```
 NewsItem selectedItem = (sender as ListBox).SelectedItem;
    if (selectedItem != null)
    {
        (Application.Current as App).selectedNewsItem = selectedItem;
        // Navigate to your new page
        NavigationService.Navigate(new Uri("/YourNewPage.xaml", UriKind.Relative));
    } 
```

最后，在您的新页面中，您可以使用与上述相同的方式访问 selectedNewsItem。

```
 NewsItem selectedNewsItem = (Application.Current as App).selectedNewsItem; 
```

# javascript - 数据点和刻度在 highstock 折线图中未对齐

> ID：15515669
> 
> 赞同：0
> 
> 时间：2013-03-20T04:54:23.523
> 
> 标签：javascript, highcharts, highstock

绘制的数据点与刻度不完全匹配，或者刻度未放置在数据点上。当我使用导航器缩小范围时，我非常清楚地看到了这个问题。有什么方法可以让我设置周六或我指定的任何一天的蜱虫？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:40:51.917

您可以设置 tickInterval [http://api.highcharts.com/highcharts#xAxis.tickInterval](http://api.highcharts.com/highcharts#xAxis.tickInterval)并定义 pointStart [http://api.highcharts.com/highcharts#plotOptions.series.pointStart](http://api.highcharts.com/highcharts#plotOptions.series.pointStart)。您还可以通过[http://api.highcharts.com/highcharts#xAxis.tickPositioner使用其他解决方案](http://api.highcharts.com/highcharts#xAxis.tickPositioner)

# .net - TFS 2012 API - .GetService （） 慢的

> ID：15515670
> 
> 赞同：2
> 
> 时间：2013-03-20T04:54:34.177
> 
> 标签：.net, web-services

我有一个使用安装在 TFS 2012 服务器上的 TFS API 的自定义 Web 服务。在将 TFS 服务器从 2010 年升级到 2012 年之后，我的用户每次调用该服务需要 20 到 30 秒来执行以下代码行：

WorkItemStore store = tfsCollection.GetService();

在升级之前，此 Web 服务的性能很好。

有没有人遇到过这样的 TFS 2012 API 性能问题？有没有人有解决这个性能问题的建议？

我确实配置了缓存设置 WorkItemTrackingCacheRoot。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T03:31:21.750

我们与 MS 支持部门合作寻找解决方案。问题是在 IIS 7 中使用默认的 .NET 模拟。每个用户都获得了所有 TFS 非 WIT 内容（定位服务文件等）的临时缓存，并且每次调用都会重新生成它。我们不再直接使用默认的 .NET 模拟，而是开始使用 TFS 模拟。这是因为应用程序池用户（服务帐户）获得了一次创建的临时缓存。每个用户的身份都被传递到与 TFS WIT 相关的调用。

有关 TFS 模拟的详细信息，请参阅此博客文章：http: [//blogs.msdn.com/b/taylaf/archive/2009/12/04/introducing-tfs-impersonation.aspx](http://blogs.msdn.com/b/taylaf/archive/2009/12/04/introducing-tfs-impersonation.aspx)

# android - 在android中使用jxl.jar从excel文件中读取内容时如何纠正验证错误

> ID：15515675
> 
> 赞同：1
> 
> 时间：2013-03-20T04:54:47.637
> 
> 标签：android, excel

我已经开发了应用程序来显示数据库中的详细信息列表。数据是从 excel 文件中提取并存储到数据库中的。从 excel 读取内容时，出现错误： **java.lang.VerifyError: p41.android.consol.products.StartSectionActivity**

我的代码在这里：

公共类 StartSectionActivity 扩展 Activity {

```
Context context=this;
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    super.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.product);

    try {
        //int resourceId = context.getResources().getIdentifier("p41.android.consol.products:raw/products.xls", null, null);
        //File f = new File(context.getResources().openRawResource(resourceId));
        File excel=new File("p41.android.consol.products:raw/products.xls");

        Workbook book=Workbook.getWorkbook(excel);
        Sheet sheet1=book.getSheet(0);
        Cell a1=sheet1.getCell(0, 0);
        Log.d("Cell Value!", a1.getContents());
        /*String files[]=getResources().getAssets().list(null);

        Log.d("files", files[0]);*/
        //InputStream stream=getResources().getAssets().open("PRODUCT_MASTER.xls");

    } catch (BiffException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

}

# sql - 选择数年

> ID：15515679
> 
> 赞同：1
> 
> 时间：2013-03-20T04:55:22.560
> 
> 标签：sql, select, sql-server-2008-r2, case

我有一个看起来像这样的皮卡表

```
create table Pickup
(
PickupID int IDENTITY,
ClientID int ,
PickupDate date ,
PickupProxy  varchar (200) ,
PickupHispanic bit default 0,
EthnCode varchar(5) ,
CategCode varchar (2) ,
AgencyID int,
Primary Key (PickupID),
); 
```

它包含我需要根据此表创建报告的客户的取件，该表应如下所示
![在此处输入图像描述](../Images/acc991b81c41a801bad8e8a17efd87c1.png)

我知道我需要使用`CASE`但真的不知道如何输入年份并计算每年的平均拾取次数。以及如何计算特定年份的皮卡。到目前为止，我只有这个

```
SELECT
DATEPART(YEAR, PickupDate)as 'Month'

FROM dbo.Pickup 
group by DATEPART(YEAR, PickupDate)
WITH ROLLUP 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:22:07.283

构造这样的查询的最佳方法是使用索引表。理想情况下，在您的主数据库中创建它，以便服务器上的所有数据库都可以使用它，但也可以在本地数据库中创建。

你可以像这样创建一个

```
create table IndexTable
(
IndexID int NOT NULL,
Primary Key (IndexID),
); 
```

然后用数字 1 - n 填充它，其中 n 足够大，比如 1,000,000。

像这样

```
INSERT IndexTable
VALUES (1)

WHILE (SELECT MAX(IndexID) FROM IndexTable) < 1000000
INSERT IndexTable
SELECT IndexID + (SELECT MAX(IndexID) FROM IndexTable)
FROM IndexTable 
```

然后，您的查询使用此表将月份视为整数

```
SELECT DATEADD(month, 0, i.IndexID) Months
      ,COUNT(p.PickupDate)
      ,AVERAGE(*Whatever*)
FROM Pickup p
     INNER JOIN
     IndexTable i ON DATEDIFF(month, p.PickupDate, 0) = i.IndexID
GROUP BY i.IndexID
WITH ROLLUP 
```

# jakarta-ee - JPA - 更改对现有（但已分离）实体的引用会导致插入重复项

> ID：15515681
> 
> 赞同：2
> 
> 时间：2013-03-20T04:55:28.213
> 
> 标签：jakarta-ee, jpa, glassfish, eclipselink, entitymanager

我有两个具有单向多对一关系的实体：

*   许多人`Bar`都有一个`Foo`

当我尝试通过将托管`Bar`实例更改`Foo`为现有的分离`Foo`实例来更新托管实例时，刷新到数据库失败。

我使用外观 ( `FooFacade`& `BarFacade`) 来创建和修改实体。这是我的测试代码：

```
public void test() {
    FooFacade fooFacade = (FooFacade) lookupEJB(FooFacade.class);
    BarFacade barFacade = (BarFacade) lookupEJB(BarFacade.class);

    Foo originalFoo = fooFacade.createFoo();    // returned entity is detatched
    Foo newFoo = fooFacade.createFoo();         // returned entity is detatched

    Bar bar = barFacade.createBar(originalFoo); // returned entity is detatched

    barFacade.changeFoo(bar.getId(), newFoo);
} 
```

此代码将导致以下 SQL 错误：

> 该语句被中止，因为它会导致在“FOO”上定义的“SQL130321134048610”标识的唯一或主键约束或唯一索引中出现重复键值。

`newFoo`Eclipselink在刷新 的更改时尝试插入`bar`，即使它已经存在！

但是，实例已分离的事实`newFoo`应该没有区别 - 请参阅下面**粗体字的**[EJB 持久性规范](http://download.oracle.com/otndocs/jcp/ejb-3_0-fr-eval-oth-JSpec/)（第 3.2.3 节，第 50 页）的相关部分：

 **> 应用于实体 X 的刷新操作的语义如下：
> 
> *   如果 X 是托管实体，则将其同步到数据库。
>     *   对于由来自 X 的关系引用的所有实体 Y，如果与 Y 的关系已使用级联元素值 cascade=PERSIST 或 cascade=ALL 进行注释，则将持久操作应用于 Y。
>     *   对于由来自 X 的关系引用的任何实体 Y，其中与 Y 的关系尚未使用级联元素值 cascade=PERSIST 或 cascade=ALL 进行注释：
>         *   如果 Y 是新的或删除的，则刷新操作（并且事务回滚）将抛出 IllegalStateException，否则事务提交将失败。
>         *   **如果 Y 是分离的，则语义取决于关系的所有权。如果 X 拥有该关系，则对该关系的任何更改都会与数据库同步**；否则，如果 Y 拥有关系，则行为未定义。
> *   如果 X 是已删除的实体，则将其从数据库中删除。没有级联选项是相关的。

任何人都可以帮助解释为什么这似乎不起作用？我找不到现有的 eclipselink 错误报告。我在下面有一些代码，技术是：

*   EclipseLink（使用嵌入式 Glassfish EJB 容器进行测试）
*   Derby（用于测试这个问题 - 在生产中我使用 MS SQL，但它也失败了）

谢谢！

> **请注意：**我知道我可以通过
> 
> 1.  将分离的合并`Foo`到更新时使用的相同持久性上下文中`bar`，然后
> 2.  `foo`在 . 上设置合并的实例`bar`。
> 
> 但是，这不是我希望在我的应用程序中采用的方法。

***更新 1：**我已经包含了 JPA 规范的一部分，这表明这应该可以工作*

***更新 2：**简化了示例场景*

## 实体

```
@Entity
@TableGenerator(name="test_generator", table="SEQUENCE", pkColumnName="SEQ_NAME", valueColumnName="SEQ_VALUE", pkColumnValue="TEST_SEQUENCE")
public class Foo {

    @Id
    @GeneratedValue(strategy=GenerationType.TABLE, generator="test_generator")
    private int id;

    public int getId() {return this.id;}
    public void setId(int id) {this.id = id;}

} 
```

和

```
@Entity
public class Bar {

    @Id
    @GeneratedValue(strategy=GenerationType.TABLE, generator="test_generator")
    private int id;

    @ManyToOne
    private Foo foo;

    public int getId() {return this.id;}
    public void setId(int id) {this.id = id;}

    public Foo getFoo() {return this.foo;}
    public void setFoo(Foo foo) {this.foo = foo;}

} 
```

## 外墙

```
@Singleton
@LocalBean
public class FooFacade {

    @PersistenceContext(unitName="CurriculumManagementSystem")
    private EntityManager em;

    public Foo createFoo() {
        Foo newFoo = new Foo();

        em.persist(newFoo);

        return newFoo;
    }
} 
```

和

```
@Singleton
@LocalBean
public class BarFacade {

    @PersistenceContext(unitName="CurriculumManagementSystem")
    private EntityManager em;

    public Bar createBar(Foo parent) {
        Bar newBar = new Bar();

        newBar.setFoo(parent);

        em.persist(newBar);

        return newBar;
    }

    public void changeFoo(int barID, Foo detachedFoo) {
        Bar bar = (Bar) em.find(Bar.class, barID);

        bar.setFoo(detachedFoo);

        // when this method exits, the transaction completes
        // and any changes are flushed to the DB.

        // instead of only updating the Bar table by changing the
        // foreign key reference to the detachedFoo's ID, elipselink
        // tries to insert the detachedFoo as a new row in the
        // Foo table!
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:20:46.180

这个问题是由于 EclipseLink 中的一个错误造成的：

> [任何引用分离对象的更改都将导致插入分离对象](https://bugs.eclipse.org/bugs/show_bug.cgi?id=300108)

这已在版本 2.4.0 中修复。在版本 1.1.3 中报告。

在撰写本文时，与最新版本 Glassfish (3.1.2) 一起分发的 EclipseLink 版本是 2.3.2，因此我要么必须等待 Glassfish 的未来版本，要么在我的应用程序中提供更新的 EclipseLink 库。

目前，我将等待并使用我在原始帖子中描述的合并解决方法。感谢所有试图帮助我解决这个问题的人！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:46:49.053

听起来您正在通过混合托管对象和分离对象来破坏对象。您不应该将两者混为一谈。

如果要更改对象的引用，您应该在同一持久性上下文（EntityManager/transaction）中为新引用执行 find() 或 getReference()。

您还需要正确维护双向关系。**

# facebook - 获取帖子用户评论的权限在 facebook 上被标记

> ID：15515684
> 
> 赞同：0
> 
> 时间：2013-03-20T04:55:39.837
> 
> 标签：facebook, facebook-graph-api

我正在尝试对用户的 Facebook 数据进行一些分析，因此我正在尝试收集尽可能多的数据。使用 Facebook graph api，我需要请求哪些权限才能获得用户被标记的帖子的评论。如果帖子在用户的墙上，那不是问题，但如果用户被标记在朋友墙上的帖子中没有评论，并且计数设置为 0。

我正在请求 //feed 使用我认为来自我的应用程序的有效访问令牌。但是，使用 Facebook 的图形浏览器工具也会发生同样的情况。我认为问题是我缺少的权限，但似乎无法弄清楚我应该添加哪个权限。

我目前正在请求以下权限：

*   朋友照片
*   朋友喜欢
*   朋友签到
*   朋友状态
*   用户照片
*   用户喜欢
*   user_checkins
*   用户状态
*   读邮箱
*   读流

> ```
>  {
>   "id": REDACTED, 
>   "from": {
>     "name": REDACTED, 
>     "id": REDACTED
>   }, 
>   "to": {
>     "data": [
>       {
>         "name": REDACTED,
>         "id": REDACTED
>       }
>     ]
>   }, 
>   "message": REDACTED, 
>   "message_tags": {
>     "121": [
>       {
>         "id": REDACTED, 
>         "name": REDACTED, 
>         "type": "user", 
>         "offset": 121, 
>         "length": 11
>       }
>     ]
>   }, 
>   "privacy": {
>     "value": ""
>   }, 
>   "type": "status", 
>   "created_time": "2013-03-13T14:25:44+0000", 
>   "updated_time": "2013-03-13T14:25:44+0000", 
>   "comments": {
>     "count": 0
>   } 
> ```

# binding - ZK 将字符串值绑定到日期框

> ID：15515687
> 
> 赞同：0
> 
> 时间：2013-03-20T04:55:54.687
> 
> 标签：binding, zk

我创建了一个**列表框**，其中一列可以包含不同的组件，如**Combobox**、**Datebox**、**Decimal 框**等。在一列中，我必须 在某些条件下显示**Datebox**或**Decimalbox ，因此我将****Datebox**和**Decimalbox**绑定在此列中与**String**值。当我将字符串值绑定到日期**框**并尝试使用弹出日历输入日期时出现异常。

```
 <datebox value="@bind(data.prodValue)" width="250px"></datebox>

private String prodValue; 
```

**prodValue**是**String类型。当我在****Datebox**中输入日期时，出现异常。谁能告诉我如何将**Datebox**与字符串绑定值一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:38:50.287

您可以创建自定义日期框，其中数据类型 String 和 Timestamp 条件 wize 。只需设置标志`type="String/Timestamp"`

[在这里](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zul/Datebox.html#setFormat%28java.lang.String%29)找到这个类只是在新的自定义类中扩展 setValue 方法并修改 getValue 方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T14:38:36.550

1.  日期框使用 java.util.Date

2.  如果你绑定 @bind(data.prodValue) 将被调用 getProdValue() 方法

# java - 简化比较两个数据集的逻辑

> ID：15515688
> 
> 赞同：0
> 
> 时间：2013-03-20T04:55:57.837
> 
> 标签：java, string, arraylist

**问题陈述：-**

1.  首先，我需要检查`columns`我所拥有的所有东西是否都`columnsList`存在`attributes` `(attr.getName())`。
2.  其次，如果任何`column`from`columnsList`不存在，`attributes`那么`boolean foundData`应该是错误的。
3.  第三，如果任何属性状态不成功，`boolean foundData`则应为假。
4.  第四，如果`column`属性中存在`(attr.getName())`并且其状态也为成功，则将计数器加一

`attr.getName()`将返回列名。

下面是我的代码。我敢肯定，我在下面的代码中搞砸了一些东西。

```
List<String> columnsList = getColumns(service.getColumns());

List<Attribute<?>> attributes = beClient.getAttributes(columnsList);

for (String column : columnsList) {
    for(Attribute<?> attr : attributes) {
        if(!attr.getName().equals(column) || !attr.getStatus().equals("SUCCESS")) {
            foundData=false;
            break;
        }  else if(attr.getName().equals(column) && attr.getStatus().equals("SUCCESS")) {
                count_success.incrementAndGet();
        }
    }
} 
```

谁能帮我这个？

我的代码中发生的错误是对于每一列，如果它不匹配，它将检查属性，它每次都会循环。我相信这是不对的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:24:31.763

我会`Map<String,String>`为属性创建一个。然后，您可以使用 Collection 实用程序。例如第 1 步

```
ArrayList<String> copyOfColumns = new ArrayList<String>(columnsList );
copyOfColumns.removeAll(map.keySet());
if (copyOfColumns.size() > 0)
  // you have a column that isn't in the attribute 
```

对于步骤 3，它很简单，例如：

```
if (map.values().contains("FAILURE"))
  // you had a failure 
```

我会把其他的留作练习...... :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:14:39.900

为属性名称实现 equals 和 hashcode。迭代 columnList 并创建一个 Attribute 对象。然后检查该属性是否存在于属性列表中。然后你的代码会很简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:36:51.547

检查这个重构的代码是否可以工作......

```
List<String> columnsList = getColumns(service.getColumns());

List<Attribute<?>> attributes = beClient.getAttributes(columnsList);

for (String column : columnsList) {
    boolean isPresent =false;
    boolean isSuccess = true;

    for(Attribute<?> attr : attributes) {
        if(attr.getName().equals(column)){
            isPresent = true; 
        }       
        if(!attr.getStatus().equals("SUCCESS")){
            isSuccess = false; 
        }
    }

    if(!isPresent || !isSuccess){
        foundData=false; 
    }else{
        count_success.incrementAndGet();
    }   
} 
```

# javascript - 在javascript中嵌套if else

> ID：15515697
> 
> 赞同：0
> 
> 时间：2013-03-20T04:56:58.890
> 
> 标签：javascript, nested

我在使用 javascript 中的嵌套 if 结构时遇到了问题。任何帮助表示赞赏。

```
function validateForm()
{
    var a = document.forms["demo1"]["addr1"].value;
    var b = document.forms["demo1"]["city"].value;
    //var c = document.forms["demo1"]["fname"].value;
    //var d = document.forms["demo1"]["lname"].value;
    //var f = document.forms["demo1"]["phno"].value;
    //var g = document.forms["demo1"]["email"].value;
    //var g1 = document.forms["demo1"]["cemail"].value;
    //var h = document.forms["demo1"]["pwd"].value;
    //var h1 = document.forms["demo1"]["cpwd"].value;
    if(b=="" || b==null)
    {
      alert("Please enter your city");
      return false;
      break;
    }
    else if(a=="" || a==null)
        {
            alert("Please enter your address");
            return false;
            break;
        }
    else {return true;} 
}

<form name = "demo1" action = "exp2.php" onsubmit = "return validateForm()" method = "POST"> 
```

如果只有一个 if 语句，则代码可以正常工作（按预期）。但是，如果部署了多个 if else，我不会得到预期的结果。

问候，玛尼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T05:00:55.710

首先，您不需要`break`语句，它们在这种情况下毫无用处。

其次，你不需要嵌套，事实上，你*不应该*因为检查`a`and`b`是相互独立的：

```
if(b=="" || b==null)
{
    alert("Please enter your city");
    return false;
}

if(a=="" || a==null)
{
    alert("Please enter your address");
    return false;
}

return true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:33:56.170

`isEmpty`用可重用的功能缩短你的代码怎么样

```
function validateForm()
{

    var isEmpty = function ( name , label ){

          var val = document.forms["demo1"][ name ].value;

          if( ! val  )
          {
               alert("Please enter your "+ label );
               return true;     
          }

          return false;

    }         

    return !isEmpty( 'city', 'city') && 
           !isEmpty( 'addr1', 'address');

} 
```

isEmpty 返回`true`或`false`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:11:56.387

就像 paxdiablo 所说，您可以使用两个单独的 if 语句。

但是，如果您只想在输入城市时需要地址，您必须意识到这不是嵌套的 if 语句。这是：

```
if(b=="" || b==null)
{
  alert("Please enter your city");
  return false;
}
else 
{
    if(a=="" || a==null)
    {
        alert("Please enter your address");
        return false;
    }
    else 
    {
        return true;
    }
} 
```

一个更可重复的版本是，imo：

```
if(b=="" || b==null)
{
  alert("Please enter your city");
  return false;
}

if((b=="" || b == null) && (a=="" || a==null))
{
    alert("Please enter your address");
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-08T12:33:39.723

```
if(b=="" || b==null) {
alert("Please enter your city");
return false;
}
else if(a=="" || a==null) {
alert("Please enter your address");
return false;
}
else {
return true;
} 
```

# eclipse - 无法在 Eclipse Helios 中安装 VestiGO JPA 查询浏览器

> ID：15515698
> 
> 赞同：2
> 
> 时间：2013-03-20T04:57:00.503
> 
> 标签：eclipse

我正在为 Java EE 应用程序使用 Eclipse Helios。

我在安装 VESTIGO JPA 查询浏览器时遇到问题。我收到这样的错误日志...

```
 Cannot complete the install because one or more required items could not be found.
  Software being installed: Vestigo Cumulus4j integration 1.0.1 (org.nightlabs.vestigo.cumulus4j.ui.feature.feature.group 1.0.1)
  Missing requirement: org.nightlabs.vestigo.ui 1.0.1 (org.nightlabs.vestigo.ui 1.0.1) requires 'package org.osgi.framework [1.7.0,2.0.0)' but it could not be found
  Cannot satisfy dependency:
    From: Vestigo Cumulus4j integration 1.0.1 (org.nightlabs.vestigo.cumulus4j.ui.feature.feature.group 1.0.1)
    To: org.nightlabs.vestigo.ui.feature.feature.group 1.0.1
  Cannot satisfy dependency:
    From: Vestigo - JDO JPA Query Browser 1.0.1 (org.nightlabs.vestigo.ui.feature.feature.group 1.0.1)
    To: org.nightlabs.vestigo.ui [1.0.1] 
```

这是错误的快照..

![在此处输入图像描述](../Images/c4f9549fc72a6c1a54ab1c760d4d00dc.png)

谁能告诉我.. 我怎样才能满足 VESTIGO 安装所需的依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T03:10:59.600

从您安装的错误消息来看，Vestigo UI 需要 'org.osgi.framework' 和版本 '1.7.0' 作为先决条件。

我认为 Eclipse Juno 中的“org.osgi.framework”已更新为“1.7.0”。您必须先将您的 Helios 更新到 Juno，或者直接[从 eclipse.org 下载 Juno，](http://www.eclipse.org/downloads/)然后在其上安装 Vestigo。

# outlook-addin - C# - 无论如何要在 Outlook 的查看功能区中将用户定义字段添加到排序面板？

> ID：15515701
> 
> 赞同：1
> 
> 时间：2013-03-20T04:57:39.503
> 
> 标签：outlook-addin

I have added a userproperty to an outlook folder and it can be displayed as a column in email list when the folder is selected. 是否可以将此字段添加到查看功能区选项卡中的“排序组”/“排列依据”？请看图：[http ://screencast.com/t/aSJtdZhv](http://screencast.com/t/aSJtdZhv)

# arrays - 根据评级对多维数组进行排序

> ID：15515705
> 
> 赞同：0
> 
> 时间：2013-03-20T04:57:59.193
> 
> 标签：arrays, sorting, multidimensional-array

我有一个多维数组

```
At index 0  
           mset =3
           rating=5
At index 1 
           mset=4
           rating=8
At index 2
           mset=4
           rating=9
At index 3
           mset=5 
           rating=3 
```

....我必须像这样对数组进行排序，首先 mset = 4 然后 mset = 3 with rating> = 4 然后 mset = 5 然后 mset = 3 with rating <4。此外，在每个 mset 中，应该按照评级的降序排列，因为我们必须首先显示 mset =4，但第一个 index=2 应该显示，因为它的评级是 9，它大于 index=1 的评级=8。请为我提供一个函数来根据需要对这个数组进行排序..提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:04:09.833

我不确定你在这里问什么，因为结局有点不清楚。但这是我认为您想要做的：仅根据第一个维度的值对二维数组进行排序。

所以使用任何排序算法，但是当你执行交换时，交换两个维度的值。

如果您有一些代码，我很乐意为您查看并提供更好的反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:16:04.817

我从你的问题中读到的是你有两个排序标准：

1.  按降序排列`rating`
2.  按降序排列`mset`

使用任何稳定的排序算法（即不改变根据应用的排序标准相等的元素的相对位置的算法），您可以分几个阶段进行排序。

首先，您使用次要标准对输入进行排序，即按`mest`.

然后，您使用主要标准对结果进行排序，即按 的降序排列`rating`。

对于这种分阶段排序，所应用的排序算法必须是稳定的。

让我们抽象地考虑你的例子。我们有

```
[(3, 5), (4, 8), (4, 9), (5, 3)] 
```

在第一阶段之后，我们得到

```
[(5, 3), (4, 8), (4, 9), (3, 5)] 
```

第二阶段之后我们得到

```
[(4, 9), (4, 8), (3, 5), (5, 3)] 
```

那是你问的吗？

# iphone - iOS 直接从 Google Drive 或 Dropbox 提取/导入文件

> ID：15515707
> 
> 赞同：1
> 
> 时间：2013-03-20T04:58:06.420
> 
> 标签：iphone, ios, google-drive-api, dropbox, url-scheme

在 iOS for iPhone -iPad 应用程序中，我们是否可以直接从照片库或 Dropbox 或 GoogleDrive 或任何其他类似类型的应用程序中选择/导入/复制文档或文件到我们的本地应用程序中？

或者使用一些**url-scheme**我们可以通过提供路径直接将其上传到服务器吗？

Google 的 Android 操作系统正在提供这种功能。我们在iOS中有类似的吗？或者我们如何实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:28:08.870

尝试 AMAZON S3 服务器上传文件并从服务器获取文件等等

请通过以下链接

[http://aws.amazon.com](http://aws.amazon.com)

# linux - 确定线程的堆栈大小和位置

> ID：15515708
> 
> 赞同：1
> 
> 时间：2013-03-20T04:58:22.130
> 
> 标签：linux, multithreading, stack, base

如何在 Linux 下确定线程堆栈的基数及其大小？是否有可用的 C/C++ API 或在 gdb 中查找的方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-08T05:15:49.027

如果您可以不获取堆栈的确切顶部（这对于某些应用程序可能就足够了），那么遍历帧指针可能会起作用：

```
// main.c
#include <stdint.h>

// -fno-omit-frame-pointer might be required - otherwise you might get a crash
// might not be exactly at the top; but probably very close

void *stack_top() {
    void **top;
    asm("movq %%rbp, %0" : "=r" (top)); // set top to %rbp - replace with %ebp for 32-bit x86
    // if top is higher in memory than the variable, then still part of the stack.
    while ((uintptr_t) *top > (uintptr_t) &top) {
        top = *top;
    }
    return top;
} 
```

这是因为`%rbp`寄存器（或`%ebp`32 位上的寄存器）用于存储指向父堆栈帧基址的指针（保存的`%rbp`或`%ebp`值所在的位置） - 所以我们可以迭代地遍历这个链表，直到我们到达一个无效的地址.

请注意，`stack_top`在某些与`&top`比较相关的情况下可能会失败 - 我的系统使用指向程序加载代码中某个位置的指针终止了链表，所以这是我发现检测到这一点的最佳方法 - 但您需要测试这彻底。（如果有人有更好的方法来检测链的末端，请添加评论。）

示例测试程序：

```
#include <stdio.h>
#include <pthread.h>

void *test_another_layer(int x) {
    return stack_top();
}

void *subthread(void *ptr) {
    void *st1 = stack_top();
    void *st2 = test_another_layer(0);
    void *st3 = &ptr;
    printf("stack tops 2: %x %x %x\n", st1, st2, st3);
    return NULL;
}

int main(int argc, char *argv[]) {
    void *st1 = stack_top();
    void *st2 = test_another_layer(0);
    void *st3 = &argc;
    printf("stack tops: %x %x %x\n", st1, st2, st3);
    pthread_t ot;
    if (pthread_create(&ot, NULL, subthread, NULL) != 0) {
        perror("cannot create");
        return 1;
    }
    if (pthread_join(ot, NULL) != 0) {
        perror("cannot join");
        return 2;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-13T22:36:41.397

这是执行此操作的另一种方法，涉及阅读`/proc/self/maps`。与其他一些方法不同，它不需要在程序开始时进行特殊检测，并为您提供堆栈末尾的*确切*位置。

如果你尝试`cat /proc/self/maps`，你会得到这样的东西：

```
00400000-0040c000 r-xp 00000000 08:01 6039736              /usr/bin/cat
0060b000-0060c000 r--p 0000b000 08:01 6039736              /usr/bin/cat
0060c000-0060d000 rw-p 0000c000 08:01 6039736              /usr/bin/cat
00908000-00929000 rw-p 00000000 00:00 0                    [heap]
7fcdb1c68000-7fcdb1e01000 r-xp 00000000 08:01 6032628      /usr/lib/libc-2.21.so
7fcdb1e01000-7fcdb2000000 ---p 00199000 08:01 6032628      /usr/lib/libc-2.21.so
7fcdb2000000-7fcdb2004000 r--p 00198000 08:01 6032628      /usr/lib/libc-2.21.so
7fcdb2004000-7fcdb2006000 rw-p 0019c000 08:01 6032628      /usr/lib/libc-2.21.so
7fcdb2006000-7fcdb200a000 rw-p 00000000 00:00 0
7fcdb200a000-7fcdb202c000 r-xp 00000000 08:01 6032717      /usr/lib/ld-2.21.so
7fcdb21f5000-7fcdb21f8000 rw-p 00000000 00:00 0
7fcdb2209000-7fcdb222b000 rw-p 00000000 00:00 0
7fcdb222b000-7fcdb222c000 r--p 00021000 08:01 6032717      /usr/lib/ld-2.21.so
7fcdb222c000-7fcdb222d000 rw-p 00022000 08:01 6032717      /usr/lib/ld-2.21.so
7fcdb222d000-7fcdb222e000 rw-p 00000000 00:00 0
7ffe78c41000-7ffe78c62000 rw-p 00000000 00:00 0            [stack]
7ffe78dba000-7ffe78dbc000 r--p 00000000 00:00 0            [vvar]
7ffe78dbc000-7ffe78dbe000 r-xp 00000000 00:00 0            [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0    [vsyscall] 
```

如您所见，有一个`[stack]`条目。这可能是您正在寻找的。

解析此行的示例程序：

```
#include <stdio.h>
#include <unistd.h>
#include <string.h>

int main(int argc, char *argv[]) {
    FILE *file = fopen("/proc/self/maps", "r");
    char line[1024];
    void *result = NULL;
    while (!feof(file)) {
        if (fgets(line, sizeof(line) / sizeof(char), file) == NULL) {
            break;
        }
        unsigned long start, end, offset;
        unsigned int devma, devmi, ino;
        char perms[6];
        char path[128];
        if (sscanf(line, "%lx-%lx %5s %lx %d:%d %d %127s", &start, &end, &perms, &offset, &devma, &devmi, &ino, &path) != 8) {
            continue; // could not parse. fail gracefully and try again on the next line.
        }
        if (strcmp(path, "[stack]") == 0) { // use [stack:TID] for a thread besides the main thread
            printf("Stack found from %lx to %lx\n", start, end);
            break;
        }
    }
    fclose(file);
    return 0;
} 
```

这将打印如下内容：

```
Stack found from 7fff91834000 to 7fff91855000 
```

这可能与您正在寻找的内容非常接近。

# ember.js - Ember.js RC1 - 控制器“需要”另一个尚不存在的控制器

> ID：15515711
> 
> 赞同：1
> 
> 时间：2013-03-20T04:58:48.787
> 
> 标签：ember.js

我的路由结构：

```
App.ready = function() {
    App.Router.map(function() {
        this.resource('contacts', function() {
            this.resource('contact', function() {
            });
        });
    });
} 
```

现在在我的`contactsController`我响应和`add`转换到联系路线的行动。然后我想`add`在我的`contactController`.

我已将其放在我的位置`needs: ['contact']`上，`ContactController`但随后我收到此消息：

```
<App.ContactsController:ember197> needs controller:contact but it does not exist 
```

当我使用`controllerFor`（*已*弃用）时，我也会收到一个错误：

```
this.controllerFor('contact').add(); 
```

因此，Ember.js RC1 似乎只在一个实际转换到适当的路由时才创建控制器（和其他相关实例）。

有没有解决的办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T07:14:43.570

> 因此，Ember.js RC1 似乎只在一个实际转换到适当的路由时才创建控制器（和其他相关实例）。

有趣 - 我之前曾认为 ember 生成控制器，但猜不出来。

> 有没有解决的办法？

解决方法是手动定义 App.ContactController。像这样的东西会起作用：

```
App = Ember.Application.create({});

App.Router.map(function() {
    this.resource('contacts', function() {
        this.resource('contact', function() {
        });
    });
});

App.ContactController = Ember.Controller.extend({
  add: function() {
    alert('App.ContactController.add() was called!');
  }
});

App.ContactsController = Ember.Controller.extend({
  needs: ['contact'],
  add: function() {
    this.get('controllers.contact').add();
  }
}); 
```

[http://jsbin.com/osapal/1/edit](http://jsbin.com/osapal/1/edit)

# java - Android/OpenGLES：通过我的类层次结构拉 x 和 y 坐标？

> ID：15515713
> 
> 赞同：0
> 
> 时间：2013-03-20T04:59:04.753
> 
> 标签：java, android, class, opengl-es

所以我正在使用 OpenGL 开发一款 Android 游戏；它与 Breakout 大致相似。到目前为止，当用户更改她的输入时，我已经在每个并条帧上更新游戏。不过，现在我有一个球对象，我想定期更新它的 x 和 y 坐标。我通过一个游戏循环来做到这一点，但尝试提取坐标比我预期的更令人困惑。

我的类层次结构是这样的： MainActivity 有一个 GameLoop 的实例。GameLoop 有一个 Ball 的实例。Ball 具有 x 和 y 字段以及用于更新它们的函数；GameLoop 在新线程中重复调用这些函数。

MainActivity 也有一个 MyGLSurfaceView 的实例，它有一个 MyRenderer 的实例，它在每个并条框上绘制我的所有对象——所以这是我需要访问那些 x 和 y 坐标的地方。

所以我想要做的是通过我的层次结构的两个级别向上拉两个变量，并通过两个不同的级别向下拉两个变量。诚然，我对 OOP 有点陌生，我觉得这个程序的整个结构可能会被误导，所以我不知道从哪里开始。：/

感谢您的帮助！我会发布代码，但我不确定哪些位会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T10:12:10.050

我认为你所做的是最好的方法......你的游戏世界或多或少在 MainActivity 中定义，从它分支到 GameLoop 中的物理部分（+用户输入）和 MyGLSurfaceView 中的图形表示。

你失败的地方是你在 GameLoop 而不是 MainActivity 中定义了你的“球”。我建议您在 MainActivity 中创建所有现有对象，然后将它们发送到需要的地方，通常是多个地方。因此，对于您的“球”案例，您应该在 MainActivity 中创建它的一个实例并设置`GameLoop.ball = ball`and `MyGLSurfaceView.MyRenderer.ball = ball`。

在更一般的情况下，您将为您的游戏对象 GameObject 创建一个基类，然后对它们进行子类化，基类可能具有与游戏相同的方法`move(double timeInterval)`，`draw()`具体取决于游戏。现在您的 MainActivity 将持有某种类型的数组来保存所有 GameObject 对象，并负责创建这些对象并将它们发送到其他类，例如绘图引擎或物理引擎，这些类也应该有一个可以存储这些对象以供使用的数组。

现在，如果您管理这样的层次结构，您的绘图引擎将只循环其内部数组并绘制所有对象（除了设置矩阵和参数），这正是它应该做的。请注意，它甚至不必知道那些 X、Y 位置，因为它们仅用于 draw() 方法，该方法是 GameObject 本身的一部分。游戏的物理部分也是如此。

不过，这里有一些关于多线程的注意事项。在您的情况下，您似乎至少有 3 个线程：MainActivity、GameLoop、MyRenderer。您不能随时将 MainActivity 数组中的对象添加到 MyRenderer 数组中，您应该将消息排队到 GameLoop 以收集对象并在渲染周期完成时将它们添加到其数组中，删除和 GameLoop 线程也是如此。另一件事是加载 GL 内容：所有加载都应该在单个线程 (MyRenderer) 上，因此尽管 MainActivity 线程创建了它不应该初始化任何 GL 加载的项目，MyRenderer 线程应该询问对象是否已加载 GL 部分并调用如果需要加载，删除也是如此。

虽然这个问题与openGL无关，但游戏引擎的架构非常重要，应该提前规划。我希望您在使用 OOP 和设计引擎时都能对这个答案有所了解。另请注意，有许多很棒的方法可以创建这样的引擎，其他人可能不同意或有更好的解决方案。

# android - 如何在 android 中为 Drawpanel 设置背景？

> ID：15515720
> 
> 赞同：1
> 
> 时间：2013-03-20T04:59:37.527
> 
> 标签：android

我正在使用 SurfaceView 在屏幕上绘制路径。如果我没有为 drawPanel 设置任何背景，一切正常；如果我为 SurfaceView 设置背景，则绘图不起作用。我需要一些彩色屏幕来绘图。

提前致谢。

下面是我的代码：

```
package com.example.draw;
import java.util.ArrayList;
import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup.LayoutParams;
import android.view.Window;
import android.view.WindowManager;
import android.widget.FrameLayout;
public class MainActivity extends Activity implements OnTouchListener 
{
DrawPanel dp;
    private ArrayList<Path> pointsToDraw = new ArrayList<Path>();
    private Paint mPaint;
    Path path;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_main);
        dp = new DrawPanel(this);
        dp.setBackgroundColor(R.drawable.imge);
        dp.setOnTouchListener(this);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
        mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setColor(Color.RED);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(30);
        FrameLayout fl = new FrameLayout(this);
        fl.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
       //fl.setBackgroundResource(R.drawable.imge);
        fl.addView(dp);
        setContentView(fl);
    }

    @Override
    protected void onPause() 
    {
        // TODO Auto-generated method stub
        super.onPause();
        dp.pause();
    }
    @Override
    protected void onResume() 
    {
        // TODO Auto-generated method stub
        super.onResume();
        dp.resume();
    }

    public boolean onTouch(View v, MotionEvent me) 
    {
        // TODO Auto-generated method stub
                synchronized(pointsToDraw)
                {
        if(me.getAction() == MotionEvent.ACTION_DOWN)
        {
            path = new Path();
            path.moveTo(me.getX(), me.getY());
            //path.lineTo(me.getX(), me.getY());
            pointsToDraw.add(path);
        }
      else if(me.getAction() == MotionEvent.ACTION_MOVE)  
       {
            path.lineTo(me.getX(), me.getY());
        }else if(me.getAction() == MotionEvent.ACTION_UP)
        {
            //path.lineTo(me.getX(), me.getY());
        }
        }
        return true;
    }
    public class DrawPanel extends SurfaceView implements Runnable
    {
Thread t = null;
        SurfaceHolder holder;
        boolean isItOk = false ;

        public DrawPanel(Context context) 
        {
            super(context);
            // TODO Auto-generated constructor stub
            holder = getHolder();
        }

        public void run() 
        {
            // TODO Auto-generated method stub
            while( isItOk == true)
             {

                if(!holder.getSurface().isValid())
                {
                    continue;
                }

                Canvas c = holder.lockCanvas();
                c.drawARGB(255, 0, 0, 0);
                onDraw(c);
                holder.unlockCanvasAndPost(c);
            }
        }

        @Override
        protected void onDraw(Canvas canvas) 
        {
            // TODO Auto-generated method stub
            super.onDraw(canvas);
                        synchronized(pointsToDraw)
                        {
            for (Path path : pointsToDraw)
            {
                canvas.drawPath(path, mPaint);
            }
                        }
        }

        public void pause()
        {
            isItOk = false;
            while(true)
            {
                try
                {
                    t.join();
                }
               catch(InterruptedException e)
               {
                    e.printStackTrace();
                }
                break;
            }
            t = null;
        }

        public void resume()
        {
            isItOk = true;
            t = new Thread(this);
            t.start();

        }
    }
} 
```

# android - 以编程方式访问电源按钮android？

> ID：15515722
> 
> 赞同：-1
> 
> 时间：2013-03-20T04:59:55.170
> 
> 标签：android, ios, power-off

有没有办法以编程方式访问 android 甚至 IOS 中的电源按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T05:12:28.607

是的，有一种方法可以检测 android 中电源按钮的按下情况。使用此代码

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
      if (event.getKeyCode() == KeyEvent.KEYCODE_POWER) //KEYCODE.POWER determines the press of power Button
 {
    // do what you want with the power button
     return true;
 }
  return super.onKeyDown(keyCode, event);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:12:37.833

Apple 不允许您完全使用硬件组件。他们增加了一些限制。他们在应用程序委托中提供了方法，即`applicationDidEnterBackground`可以按下主页按钮。他们还提供了访问相机、蓝牙等的 API。至少我知道苹果公开提供的用于访问硬件的 API。您无法访问您的应用程序中未由苹果公开提供的其他硬件元素。如果您能够以任何方式执行此操作，那么您的应用程序也不会被苹果批准。

# ruby-on-rails - Rails 下拉列表错误未定义的局部变量或方法

> ID：15515726
> 
> 赞同：1
> 
> 时间：2013-03-20T05:00:26.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, drop-down-menu

我有 3 个模型：客户、员工、票证。我想在创建新工单时使用下拉列表选择employee_id，但它给了我这个错误

```
undefined local variable or method `employee' for #<#<Class:0x3f2c880>:0x3f4a070>

Extracted source (around line #16):

13: 
14:     <div class="field">
15:       <%= f.label :employee_id %><br />
16:       <%= f.select :employee_id, employee.all.map{|s| [s.name, s.id]} %>
17:     </div>
18:     <div class="field">
19:       <%= f.label :customer_id %><br /> 
```

据我了解，这一定是因为我没有将员工设置为全局变量。我在控制器中看到了这条线：

```
def new
    @employee = Employee.new 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:04:16.800

您正在使用`employee.all`which 假定您要访问名为`employee`. 将其更改为`Employee.all`将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:07:52.740

在控制器操作中声明一个实例变量，如下所示：

```
def new
    @employee = Employee.new
    @employees = Employee.all
end 
```

现在在你看来，使用这个实例变量

```
<%= f.select :employee_id, @employees.map{|s| [s.name, s.id]} %> 
```

这~~可能~~比直接从视图中访问模型更好`Employee.all`

# git - git存储库忽略所有.dll

> ID：15515729
> 
> 赞同：90
> 
> 时间：2013-03-20T05:00:46.077
> 
> 标签：git, gitignore

标题说明了一切。我正在尝试将我的 NuGet 包添加到存储库。正在检测除 .dll 文件之外的所有内容。

gitignore 文件不包含对 *.dll 的引用。.dll 文件在位于整个存储库中的任何位置时都不会被识别。info/exclude 也是空的。

我还克隆了存储库（文件系统到文件系统，而不是从远程到文件系统），但没有运气。此问题也发生在两台不同的计算机上。

我可以手动添加 .dll 文件，但应该跟踪它们。为什么他们没有被追踪？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-03-20T05:11:04.893

您是否有`~/.gitignore_global`或`~/.gitignore`在您的主目录中也可能列出这些文件模式？

请参阅[https://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2014-08-02T18:05:19.930

如果您使用 SourceTree 和默认设置，默认情况下它将忽略所有 DLL... Tools=>Options=>Git 然后“编辑文件”...在*.dll =>“#* .dll”之前添加一个“#”。 。 保存并关闭。

然后在你的包文件夹中的 Windows 资源管理器中打开 GitBash 终端并输入“git add”。让它工作，回到 SourceTree 稍等片刻，所有那些丢失的包 DLL 都会显示出来供你提交和推送。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-20T05:14:50.297

> 我可以手动添加 .dll 文件，但应该跟踪它们。为什么他们没有被追踪？

不，它们*不应该*被跟踪，除非你添加了它们。仅跟踪已添加和提交的文件；这就是“跟踪”的意思。

尝试通过手动添加其中一个，`git add`它会*告诉*您为什么忽略它们，并提示您`git add -f`无论如何都要使用添加文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T05:22:14.603

您需要明确告诉 git 跟踪任何新文件。

1.  运行`git add filename`以将文件添加到 git 的索引。

2.  运行`git commit`以提交索引中的更改。

`git status`还应该显示未跟踪的文件和目录的列表。

如果要列出 repo 中被 gitignore 忽略的所有文件，可以运行：

```
git ls-files . --ignored --exclude-standard --others 
```

如果要列出 repo 中所有未跟踪的文件：

```
git ls-files . --exclude-standard --others 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-31T14:59:41.643

我遇到了类似的问题。我无法将 .dll 文件从包目录添加到我的 git，然后我发现 gitignore_global.txt 文件，因为 sourcetree 自动将此文件添加为全局 git 忽略设置。我从 gitignore_global.txt 文件中删除了 *.dll，它对我来说工作正常。

gitignore_global.txt 文件的位置如下

C:\Users\XXXX\Documents\gitignore_global.txt 或者您可以从 sourcetree TOOL => OPTION => GIT 选项卡中找到它并找出全局忽略列表

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-31T00:34:07.187

就我而言，.gitignore 文件中没有 .dll 引用，并且我没有全局文件。但是，在 .git 子目录中，我找到了一个名为 ms-persist.xml 的文件。我关闭了 Visual Studio 的所有实例，然后将丢失的 .dll 手动添加到该文件中。当我重新打开 Visual Studio 时，.dll 显示需要签入。我签入了它们，现在我很高兴......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-25T17:53:51.110

您在子目录中有一个全局文件`.gitignore`或其他文件 - 相对于您的项目的根目录。`.gitignore`

在 Linux 系统和 MacOS 上，全局 git-ignore 最有可能在您的主页中`~/`

`~/.gitignore_global`

在 Windows 上，它可能在您的用户目录中。您的本地用户（您可以通过输入`ECHO %USERPROFILE%`或`whoami`在命令行中找到该用户。

如果它不存在，那么肯定 a`.gitconfig`存在。在此处查找 gitignore 的位置（例如，用户的`Documents`文件夹）。

**编辑**：`git config --list --show-origin`用于获取贡献的 git-settings 及其相应文件位置的详细信息。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-12T15:08:33.307

我知道这个问题已经很老了，但我正在为将来可能会访问这个问题的其他人添加。您可以按照上述答案修改全局忽略文件，但这会影响您的所有 git 存储库。相反，如果您想要更精细的方法，您可以在您的单个项目 .gitignores 中排除特定的 DLL 或特定文件夹。这会覆盖所有忽略设置并强制 git 检测和处理文件。我认为这是一个更好的方法。

.gitignore（针对您的特定项目）

```
# Custom ignores
!*.dll
# or
!My.specific.dll

# rest of .gitignore 
```

# html - Bootstrap，固定位置的导航栏

> ID：15515732
> 
> 赞同：0
> 
> 时间：2013-03-20T05:00:59.653
> 
> 标签：html, css

我的 html 网站顶部有一个导航栏。我最近想更改它，以便当用户向下滚动时，该栏将始终显示在页面上。我在执行此操作时遇到了问题。出于某种原因，它获取列表并将其垂直堆叠，而最初它是水平的。我一直试图为此找到解决方案，但我被卡住了。这是它的样子：我不知道如何保持列表水平，非常感谢所有帮助！

```
 <table>
    <!-- first row -->
    <tr>
         <!-- first column -->
        <td colspan="2" style="position: fixed; top: 0px; right: 50%">       
      <div class="navbar" style="text-align: center; margin: 0 auto;">
      <div class="navbar-inner">

      <div class="brand">

       <a href="www.investorsfortunes.com">

        Investorsfortunes.com 
      </a>
      </div>

<ul class="nav">
  <li class="divider-vertical"><a href="#">Investors</a></li>
  <li class="divider-vertical"><a href="#">Deals</a></li>
  <li class="divider-vertical"><a href="#">Attornies</a></li>
  <li class="divider-vertical"><a href="#">Appraisers</a></li>
  <li class="divider-vertical"><a href="#">Contact Us</a></li>

  <li class="login">

        <button class="btn btn-primary" id="loginBtn" >Login</button>

  </li>

    <li class="login">
            <button class="btn btn-primary" id="loginBtn" >Sign-Up</button>
    </li>
    </ul>
   </div>
  </div>

        </td>

         <!-- second column -->
        <td>

        </td>
         <!-- third column -->
        <td>

        </td>

    </tr>
   </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:06:13.287

将导航栏包裹在这些 div 元素之间

```
<div id="navbar" class="navbar navbar-fixed-top ">

</div> 
```

# javascript - jQuery 对 Chrome 和 IE 中的数组输出进行不需要的排序（FF 工作正常）

> ID：15515734
> 
> 赞同：2
> 
> 时间：2013-03-20T05:01:10.137
> 
> 标签：javascript, jquery, internet-explorer, google-chrome, firefox

我有一个 jquery 脚本，它使用数组将下拉选择框的选项转换为 ul 列表项。下拉列表中的每个选项都有一个数字选项值，例如

```
<option value="12">Size S</option>
<option value="34">Size M</option>
<option value="7">Size L</option> 
```

它被转换为一个列表，如

```
<ul>
<li class="opt_12">Size S</li>
<li class="opt_34">Size M</li>
<li class="opt_7">Size L</li>
</ul> 
```

在 Firefox 中，一切都按预期工作，列表项的显示顺序与下拉选项的顺序相同。但是 IE 和 Chrome 似乎按选项值按降序自动对数组的选项值进行排序。因此，在 Chrome 和 IE 中，我得到的不是下拉菜单中的尺寸顺序 S、M、L、XL，而是一个类似 XL、M、S、L 的列表。

我注意到一件事：当我使用`var options = Array;`构造数组时，Firefox 以正确的顺序显示列表元素，而 Chrome 和 IE 显示错误的顺序。当我使用`var options = [];`时，所有三个经过测试的浏览器都以错误的顺序显示列表。

下面是我用来将下拉列表转换为列表项的脚本的相关代码：

```
(function($) {
    $.fn.visualAttribute = function(options) {
        var defaults = {
            useTitle: false,
            attrClicked : function(data) {
                return true;
            },
            attrUpdated : function(data) {
            }
        };
        var settings = $.extend(defaults, options);

        //loop all attributes
        var selectbox_counter = 0;
        return this.each(function() {
            //use counter for a unique class for each wrapper
            selectbox_counter++;

            //store reference to attribute selectbox
            var selectbox = $(this);

            //hide the default dropdown (but keep it in dom for posting the required values)
            $(this).css('position', 'absolute').css('left', '-100000px').show();

            //insert wrapper for options
            var wrapper = $('<ul />')
                    .attr("class", "la_wrapper")
                    .attr("id", "la_wrapper_" + selectbox_counter)
                    .appendTo($(this).parent());

            $(this).parent().append('<div style="clear:both"></div>');

            if (selectbox.attr("id") != "") {
                wrapper.attr("rel", selectbox.attr("id"));
            }

            //store all values of the dropdown in an array
            var options = [];
            var option_counter = 0;
            var description = '';

            selectbox.children('option').each(function() {
                option_counter++;

                if (option_counter == 1) {
                    //first option contains the description, e.g. 'please select size'
                    description = $(this).text();
                }

                //only use option if has a value
                var value = $(this).val();
                if (value != '') {
                    options[value] = ({value : value, text : $(this).text()});
                }
            });

            //loop all stored options and create custom html
            if (options.length) {
                for (var index in options) {
                    if (!isNaN(index)) {
                        var value = index;
                        var text = options[index].text;
                        if (!settings.useTitle) {
                            description = '';
                        }
                        wrapper.append('<li title="' + description + '" class="opt_' + value + '"><a href="#' + value + '">' + text + '</a></li>');
                    }
                }
            }

            //set custom options to same value as current selectbox value (only needed in rare cases)
            var current_value = selectbox.val();
            if (current_value > 0) {
                $("#la_wrapper_" + selectbox_counter + ' li.opt_' + current_value + ' a').addClass('selected');
            }

            //event handler for catching a clicked attribute
            $("#la_wrapper_" + selectbox_counter + ' li a').click(function() {

                var value = $(this).attr("href").split('#')[1];

                //use callback
                if (!settings.attrClicked(options[value])) {
                    return false;
                }

                //set value and class
                selectbox.val(value);
                $("#la_wrapper_" + selectbox_counter + ' .selected').removeClass('selected');
                $(this).addClass('selected');

                //use callback
                settings.attrUpdated(options[value]);

                return false;
            });
        });
    };
    })(jQuery); 
```

如何防止 IE 和 Chrome “自动排序”数组并在结果列表中保留/传输下拉选项的原始顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:10:13.937

如果顺序很重要，请不要`value`将选项的 of 用作数组键，只需执行一个`append`（PS 使用`[]`，而不是`Array`- 那不是在做你认为它在做的事情）

```
var options = [];
var option_counter = 0;
var description = '';

selectbox.children('option').each(function() {
    option_counter++;

    //only use option if has a value
    var value = $(this).val();
    if ( value ) {
        options.push({value : value, text : $(this).text()});
    }
}); 
```

然后，在循环时，完全摆脱它`if (options.length)`，并使用常规的 for 循环：

```
for (var i=0; i<options.length; i++) {
    var value = options[i].value;
    var text = options[i].text;
    if (!settings.useTitle) {
        description = '';
    }
    wrapper.append('<li title="' + description +
                   '" class="opt_' + value +
                   '"><a href="#' + value + '">' + text +
                   '</a></li>');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:16:11.077

当你用这个迭代一个数组时：

```
for (var index in options) 
```

您没有得到保证的顺序，因为您只是在迭代按规范没有保证顺序的对象（不是数组索引）的属性。你应该使用这个：

```
for (var i = 0; i < options.length; i++) 
```

以数组顺序迭代数组。第一种形式不按特定顺序迭代对象的属性。后一种形式以数组索引顺序迭代数组元素（它为您提供数组顺序中的实际数组元素）。

此外，您声明一个数组：

```
var options = []; 
```

或者

```
var options = new Array(); 
```

你不应该使用：

```
var options = Array; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:21:43.460

您的问题是您正在使用`for...in`枚举属性。

到目前为止，ECMAScript 中未定义对象（包括数组）属性的枚举顺序。有一个建议 ECMAScript 6 或多或少地定义如下顺序：“首先是名称看起来像整数的所有属性，按照数字顺序，然后是所有其他属性，按照它们添加的顺序”。这是 Chrome 和 IE 实现的行为。Firefox 的行为有点复杂，这取决于您的对象是否是数组，以及它是否是一个数组，使用了哪些确切的属性名称以及使用的顺序和数组的长度以及其他一些事情。

在任何情况下，如果您想按顺序枚举值，只需将它们存储在数组中`array.push()`，然后枚举数组的索引。因此，替换`options[value] = ...`为`options.push(...)`并替换`for (var index in options)`为`for (var index = 0; index < options.length; ++index)`并从中获取值，`options[index].value`就像您已经获取文本一样。

# c# - Windows Phone Linq2Twitter - 获取授权用户的屏幕名称、ID 和姓名？

> ID：15515735
> 
> 赞同：0
> 
> 时间：2013-03-20T05:01:10.290
> 
> 标签：c#, silverlight, windows-phone-7, linq-to-twitter

我是 LinQ 的菜鸟，并且在使用 Linq2Twitter 和 Twitter API 时遇到了问题。

我无法理解如何在成功授权后获取授权用户的屏幕名称、id 和名称。

我在网上搜索了讨论线程，从 Joe 那里得到的唯一建议是在查询结果时使用异步调用。除了由于某种原因我没有 MaterializedAsyncCallback 所以我使用 AsyncCallback 代替。

以下是我从授权到尝试获取用户信息的所有步骤：

1.  使用我的消费者密钥和秘密作为凭据创建 PinAuthorizer

    ```
    this.pinAuth = new PinAuthorizer
    {
        Credentials = new InMemoryCredentials
         {
             ConsumerKey = CONSUMER_KEY,
             ConsumerSecret = CONSUMER_SECRET
         },
         UseCompression = true,
         GoToTwitterAuthorization = pageLink =>
         Dispatcher.BeginInvoke(() => {
             WebBrowser.Navigate(new Uri(pageLink + "&force_login=true", UriKind.Absolute));
         })
     }; 
    ```

2.  授权开始

    ```
    this.pinAuth.BeginAuthorize(resp => ... 
    ```

3.  输入 pin，从而在 pinAuth.OAuthTwitter 中获取访问令牌和密码：

    ```
    pinAuth.CompleteAuthorize(
        this.pin,
        completeResp => Dispatcher.BeginInvoke(() =>
        { ... 
    ```

4.  然后，我尝试让用户......使用异步调用，因为这是 Joe Mayo 在其他线程中推荐的。

    ```
    ITwitterAuthorizer auth = pinAuth;
    TwitterContext twitterCtx = new TwitterContext(pinAuth);
    (from user in twitterCtx.User
     where user.UserID != "JoeMayo"
     select user).AsyncCallback(asyncResponse => {
         var response = asyncResponse.ToList();
         User acc = response.FirstOrDefault();
     // Anything in this block is pointless
     // as I never get into this async callback block.
     // But this is where I expect to get the user's info
     // (screen name, name, id, etc.)
    }); 
    ```

我从来没有得到异步响应。`MaterializedAsyncCallback` （由于某种原因我也没有）。

如何获取授权用户的屏幕名称、id 和名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:29:29.360

您实际上根本没有触发查询！

```
(from user in twitterCtx.User
 where user.UserID != "JoeMayo"
 select user).AsyncCallback(users => {
    // result is in users variable
    var user = users.SingleOrDefault();
    if(user != null)
    {
        // use user here.
    }
}).SingleOrDefault(); 
```

# c#-4.0 - 在列表<>中搜索

> ID：15515740
> 
> 赞同：2
> 
> 时间：2013-03-20T05:01:55.883
> 
> 标签：c#-4.0, bindingsource

我想在 List<> 中找到值，但我没有得到整数值。这是我想在列表中找到值的代码

```
private void txtnapsaserach_TextChanged(object sender, EventArgs e)
{
    try
    {
       //decimal find = decimal.Parse(txtnapsaserach.Text);

       if (decimal.Parse(txtnapsaserach.Text) > 0)
       {
       List<NapsaTable> _napsatabs = this.napsaTableBindingSource.List as List<NapsaTable>;
       this.napsaTableBindingSource.DataSource = 
        _napsatabs.Where(p =>p.NapsaRate.Equals(txtnapsaserach.Text)).ToList();

       }
    }
    catch (Exception Ex)
    {
    }
} 
```

对我来说任何解决方案。因为当我尝试查找字符串值时，这对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:03:48.820

> 我想在 List<> 中找到值，但我没有得到整数值。

您`p.NapsaRate`是整数类型或浮点数，**（可能是十进制）** 将您的值转换`txtnapsaserach.Text`为十进制值，然后在 where 子句中进行比较。

```
decimal rate = 0;
if(!decimal.TryParse(txtnapsaserach.Text), out rate)
{
//Invalid number in textbox
}

this.napsaTableBindingSource.DataSource = 
        _napsatabs.Where(p =>p.NapsaRate == rate)).ToList(); 
```

如果`p.NapsaRate`是 double 或 float 类型，您可以使用`Double.TryParse`or`Double.Parse`等​​相应地解析它们

**您没有收到任何错误**的原因是您正在使用`object.Equals`将十进制值与字符串进行比较的方法。您应该始终`==`用于值类型的相等比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:04:29.423

```
private void txtnapsaserach_TextChanged(object sender, EventArgs e)
{
     float value;
     if (!float.TryParse(txtnapsaserach.Text, out value))
         return; // return if text cannot be parsed as float number

     if (value > 0)
     {
        var napsatabs = napsaTableBindingSource.List as List<NapsaTable>;
        napsaTableBindingSource.DataSource = 
            napsatabs.Where(p =>p.NapsaRate == value).ToList();
     }
} 
```

试试这个

# ibm-mobilefirst - IBM WorkLight android 源代码安全性

> ID：15515741
> 
> 赞同：0
> 
> 时间：2013-03-20T05:01:58.350
> 
> 标签：ibm-mobilefirst, code-security

我正在使用IBM workLight 4.0 版本，目前我正在开发一个简单的保险应用程序，一切都做得很好。在 Android 设置完成后，我可以从 .APK（android 设置文件）中提取 HTML5 和 javascript 源。我觉得它对黑客来说是不安全的，并且可能被某人滥用。

你能请任何人告诉我如何在设置/部署中保护代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:07:31.627

答案是在创建 APK 之前混淆您的代码。有关混淆的更多信息，[请访问 wiki](http://en.wikipedia.org/wiki/Obfuscation_%28software%29)。

我之前的 stackoverflow 帖子告诉了如何为 android 做这件事。 [如何避免对 APK 文件进行逆向工程？](https://stackoverflow.com/questions/13854425/how-to-avoid-reverse-engineering-of-an-apk-file)

对于 Javascript 混淆，请访问这个 stackoverflow 问题 [How can I obfuscate (protect) JavaScript?](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

还有一件事 HTML**不能**被混淆，你可以通过按 F12 来查看 HTML 源代码和相关的 css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T07:21:54.157

Worklight 4.0 2013 年还在使用？:)

Android Proguard 不适用于 Worklight v4 到 v6.2（当前版本）中基于 Worklight 的 Android 应用程序。

在 Worklight 中向 Android 应用程序添加某种程度的混淆的唯一方法是使用 Google Closure 编译器。您可以按照 Anton Aleksandrov 的以下博客文章中的步骤执行此操作：[在 Worklight 应用程序中混淆 JavaScript 代码](https://www.ibm.com/developerworks/community/blogs/worklight/entry/obfuscating_javascript_code?lang=en)。

笔记：

```
Wikipedia defines code obfuscation in a following way
In software development, obfuscation is the deliberate act of creating obfuscated code, i.e. source or machine code that is difficult for humans to understand. Programmers may deliberately obfuscate code to conceal its purpose (security through obscurity) or its logic, in order to prevent tampering, deter reverse engineering, or as a puzzle or recreational challenge for someone reading the source code. Programs known as obfuscators transform readable code into obfuscated code using various techniques.

Two important things to be noted from the above definition are
- The purpose of code obfuscation is to conceal its purpose, prevent tampering, deter reverse engineering or puzzle someone reading the code.
- Obfuscated code is difficult for humans to understand.

So basically obfuscating your code means converting it to a format that is difficult for humans to read. Not impossible. Just difficult.
Therefore - it is very important to understand that code obfuscation, especially in JavaScript, is a relatively weak security measure. Most modern web debugging tools are smart enough to "prettify" the obfuscated code reverting it to a much more readable (however still not original) format. 
```

# iphone - 视图不可见

> ID：15515743
> 
> 赞同：0
> 
> 时间：2013-03-20T05:02:08.683
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiview

我的应用程序从根控制器开始，称为我创建`TaskController : UINavigationController` 的类的根视图控制器（它已添加为视图）；当我启动应用程序时，我只看到TaskRootController 的标题和它的背景颜色。但我没有看到表格视图。如果我的应用程序以I see table view 开头。`UINavigationController``TaskRootController : UIViewController<UITableViewDelegate>``UITableView``TaskRootController``rootViewController`

在可能的情况下如何查看表格视图？

**编辑**

```
 @implementation TaskRootController

@synthesize taskRootView; //table view

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    NSLog(@"SIZE x:%f,y:%f ; %f:%f", self.view.bounds.origin.x, self.view.bounds.origin.y, self.view.bounds.size.width, self.view.bounds.size.height);
    self.view.backgroundColor = [UIColor grayColor];
    self.title = @"Root";
    self.taskRootView = [[UITableView alloc] initWithFrame: self.view.bounds style:UITableViewStylePlain];
    [self.view addSubview:self.taskRootView];
    self.taskRootView.delegate = self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    CGFloat result = 20.0f;
    if([tableView isEqual:self.taskRootView])
    {
        result = 40.0f;
    }
    return result;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:27:53.303

@iPatel - 我认为这些方法不需要显示简单的表格视图（带有灰色虚线的白色背景），因为当我在我的应用程序中将它设置为根控制器时，TaskRootController 显示一切正常（不是我的 UINavigationController 中的根）

@Manohar - 我没有触手可及的代码。但我记得它看起来像：

```
self.taskRoot = [[TaskController alloc] initWithNill.....] //initialization of controller
self.window.rootViewController = self.taskRoot; 
[self.window makeKeyAndVisible]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:03:58.903

添加`UITableView`

将委托和数据源放在`TaskRootController.h`文件中。

```
@interface TaskRootController : UIViewController <UITableViewDataSource, UITableViewDelegate> 
```

并将此代码放入`TaskRootController.m`文件中

```
self.tblView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height) style:UITableViewStyleGrouped];
    self.tblView.delegate = self;
    self.tblView.dataSource = self;
    [self.view addSubview:self.tblView]; 
```

并添加相关的**委托和数据源**方法`UITabelView`。

**编辑：**

检查您的以下方法..是否正确添加？

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1; // put number for section.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return 6; // put number as you want row in section.
} 
```

# java - 将列表转换为字符串然后返回

> ID：15515744
> 
> 赞同：0
> 
> 时间：2013-03-20T05:02:18.063
> 
> 标签：java

我想在从函数“LookUpTransaction”返回之前获取以下代码中生成的列表作为字符串。我该怎么办。？

```
public String[] LookUpTransaction() {
        List list=new ArrayList();
        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/bank", "root", "root");
            PreparedStatement ps = con
                    .prepareStatement("select accountno,details,amount from transaction");
            rs = ps.executeQuery();
            while(rs.next()){
                list.add(rs.getString(1));
                list.add(rs.getString(2));
                list.add(rs.getString(3));
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        String[] strarray = new String[list.size()];
        return list.toArray(strarray);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:06:29.760

您可以使用`return Arrays.toString(strarray);`在这种情况下，您必须将方法的返回类型更改为`String`. 那就是你的代码必须修改如下：

```
public String LookUpTransaction() {
        List list=new ArrayList();
        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/bank", "root", "root");
            PreparedStatement ps = con
                    .prepareStatement("select accountno,details,amount from transaction");
            rs = ps.executeQuery();
            while(rs.next()){
                list.add(rs.getString(1));
                list.add(rs.getString(2));
                list.add(rs.getString(3));
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        String[] strarray = new String[list.size()];
        strarray = list.toArray(strarray);
        return Arrays.toString(strarray);
    } 
```

Please note that the `Arrays.toString(strarray)` returns a string representation of the contents of the specified array (`strarray` in your scenario). The string representation consists of a list of the array's elements, enclosed in square brackets ("[]"). Adjacent elements are separated by the characters ", " (a comma followed by a space). If you are looking to iterate over the list & concatenating the elements you could try something like this:

```
 public String LookUpTransaction() {
        List list=new ArrayList();
        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection(
                    "jdbc:mysql://localhost:3306/bank", "root", "root");
            PreparedStatement ps = con
                    .prepareStatement("select accountno,details,amount from transaction");
            rs = ps.executeQuery();
            while(rs.next()){
                list.add(rs.getString(1));
                list.add(rs.getString(2));
                list.add(rs.getString(3));
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        StringBuilder stringBuilder = new StringBuilder();
        for (String str : list) {
            stringBuilder.append(str);
        }

        return stringBuilder.toString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:07:26.050

Use List.toArray(), followed by Arrays.toString()

```
String[] y = x.toArray(new String[0]);
Arrays.toString(y) 
```

# wordpress - 在 wordpress 中使用永久链接时找不到 URL 错误

> ID：15515745
> 
> 赞同：0
> 
> 时间：2013-03-20T05:02:20.840
> 
> 标签：wordpress

我是 WordPress 新手。我正在实施一个网站，在这样做的时候我遇到了一个错误。

实际上，我试图将链接更改为`page name`，而不是 id 我正在显示链接的名称。这是由 Permalink 实现的。

但是在这样做的同时，我遇到了`Url Not Found`错误。

当我将永久链接从名称更改回时`id (default)`，它显示的是同一页面。

其实我想用格式来实现`Permalink`这个`Page Name`。

那么任何人都可以建议任何插件或任何帮助来帮助我实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:37:14.023

**只需尝试以下内容：**

在您的 wordpress 管理员中，转到**设置**部分 -->**永久链接**菜单 --> 选择通用设置选项：***帖子名称*** ，然后单击保存更改。

然后转到您的根目录 ftp 或通过 cpanel filemanager 只需检查**.htaccess**文件是否存在，如果不存在，只需创建一个名为**.htaccess**的文件并通过 ftp ot cpanel filemanager 将其上传到您的根目录。

***.htaccess 文件，内容如下：***

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

我认为这可以帮助您解决问题。

# jqgrid - JQGrid 从自定义错误消息中删除值

> ID：15515746
> 
> 赞同：1
> 
> 时间：2013-03-20T05:02:22.753
> 
> 标签：jqgrid

在内联导航中，我想从自定义错误消息中删除用户输入的值。到目前为止，所有示例都包含此信息。

例如，我想删除日期“2013-blah blah”

[![](../Images/d9b09fcaf72588a5bba503ee56677255.png)](https://i.stack.imgur.com/fulgi.png)
[（来源：[easycaptures.com](http://easycaptures.com/fs/uploaded/579/1044002386.png)）]

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:28:03.103

您可以使用 custom_func 来实现这一点。

将编辑规则添加到 colModel 中的列详细信息，如下所示

```
editrules:{custom: true, custom_func: customValidationMessage} 
```

和功能（在这种情况下，我正在对必需进行验证，您可以在 if 条件下对日期进行验证）

```
function customValidationMessage(val, colname) {
        if (val.trim() == "") {
        return [ false,colname + " is required " ];
        } else {
        return [ true, "" ];
        }
          } 
```

# javascript - 将父子节点的关系坐标绘制成拓扑树并处理的算法

> ID：15515747
> 
> 赞同：2
> 
> 时间：2013-03-20T05:02:23.513
> 
> 标签：javascript, algorithm, tree, topology, topological-sort

我有一个数据构造与JavaScript中的父节点和子节点的关系，如下所示：

```
var data = {
    'name': 'A1',
    'children': [
        {
            'name': 'B1',
            'children': [
                {'name': 'C1'},
                {'name': 'C2'},
                {'name': 'C3'},
                {'name': 'C4'},
                {'name': 'C5'}
            ]
        },
        {
            'name': 'B2',
            'children': [
                {
                    'name': 'C6',
                    'children': [
                        {'name': 'D1'}
                    ]
                },
                {'name': 'C7'},
                {'name': 'C8'}
            ]
        }
    ]
}; 
```

我需要做的是用拓扑计算每个子节点的坐标。最终的结果大概是这样的——拓扑树：

```
┌─────────────────────────────────
│                ┌C1[2,0]
│                │C2[2,1]
│       ┌B1[1,2]─┼C3[2,2]   
│       │        │C4[2,3]
│A1[0,4]┤        └C5[2,4]
│       │        ┌C6[2,5]─D1[3,5]
│       └B2[1,6]─┼C7[2,6]
│                └C8[2,7] 
```

当然，该算法可以兼容各种情况，比如如果最终节点的子节点过多，则每个父节点的 Y 坐标都会加上一个偏移量。

这是拓扑树的演示：http: [//mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html)

但是，我只想用 JavaScript 代码的核心来计算上面的坐标。任何想法？或者，也许您可​​以使用其他语言来实现它。

非常感谢！

# objective-c - 如何在两个不同的 UIViewController 之间使用 IBAction 进行委托

> ID：15515753
> 
> 赞同：1
> 
> 时间：2013-03-20T05:02:57.933
> 
> 标签：objective-c, delegates, protocols, ibaction, delegation

我只是想了解委托是如何工作的，我遇到了麻烦。

我有两个类（都是 UIViewController）连接到情节提要中，第一个（ViewController.h/m）保存一个带有单元格的 TableView，第二个（AddNameViewController.h/m）只保存一个 TextField（我想写的地方）和一个按钮（添加名称）

正如您肯定理解的那样，我希望按下按钮将写入 TextField 的内容发送到 TableView，非常简单。

而且由于我有两个不同的控制器和一个包含 tableview 保存的数据的数组，我想将它们与一个委托连接（只是为了学习它）。

这是一些代码：

视图控制器.h

```
#import "AddNameViewController.h"
@interface ViewController : UIViewController <UITableViewDelegate, UITableViewDataSource, AddNameViewControllerDelegate>
@property (strong, nonatomic) NSMutableArray *array;
@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "AddNameViewController.h"
@inferface ViewController ()

@end

@implementation ViewController
@synthesize array;

-(void)addStringWithString:(NSString*)string
{
[self.array addObject:string];
NSLog(@"%@", array);
}

-(void)viewDidLoad
{
AddNameViewController *anvc = [[AddNameViewController alloc] init];
anvc.delegate = self;

array = [[NSMutableArray alloc] initWithObjects:@"first", @"second", nil];
NSLog(@"%@", array);
[super viewDidLoad];

}

-(NSInteger)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSindexPath*)indexPath
{
static NSString *simpleTableIdentifier = @"RecipeCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
if (cell == nil)
{
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
}

cell.textLabel.text = [array objectAtIndex:indexPath.row];
return cell;
}

@end 
```

AddNameViewController.h

```
@protocol AddNameViewControllerDelegate <NSObject>

-(void)addStringWithString:(NSString*)string;

@end

@interface AddNameViewController : UIViewController

@property (weak, nonatomic) id <AddNameViewControllerDelegate> delegate;
@property (weak, nonatomic) IBOutlet UITextField *myTextField;

-(IBAction)add:(id)sender;

@end 
```

最后是 AddNameViewController.m

```
#import "ViewController.h"

@interface AddNameViewController ()

@end

@implementation AddNameViewController
@synthesize myTextField, delegate;

-(id)initWithNibName:(NSString*)nibNameOrNil bundle:(NSBundle*)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self)  {
}
return self;
}

-(void)viewDidLoad
{
[super viewDidLoad];
}

-(IBAction)add:(id)sender
{
[self.delegate addStringWithString:self.myTextField.text];
// I've also tried with this but nothing --> [self.delegate addStringWithString:@"aa"];
}

@end 
```

该数组已正确初始化，没有错误，没有警告，没有崩溃，似乎甚至没有调用方法“addStringWithString”，因为它甚至不是 NSLog 任何东西。

显然故事板，方法和插座中的所有内容都连接在一起，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:22:44.907

在 AddNameViewController 的界面构建器中，您是否将按钮事件（内部触摸）连接到操作 -(IBAction)add:(id)sender ？

也试试这个

```
-(IBAction)add:(id)sender
{
 if([self.delegate respondsToSelector:@selector(addStringWithString:)]) {
[self.delegate addStringWithString:self.myTextField.text];
}
// I've also tried with this but nothing --> [self.delegate addStringWithString:@"aa"];
} 
```

# jquery-mobile - Access-Control-Allow-Origin jquery mobile不允许Origin null

> ID：15515756
> 
> 赞同：0
> 
> 时间：2013-03-20T05:03:11.967
> 
> 标签：jquery-mobile

当我将 jquery mobile javascript 文件包含到代码中以识别点击和点击保持事件时，在以下代码中

```
$("#applyZoom").live("tap", function(event){
    alert('binding');
}); 
```

我在 chrome 浏览器中收到错误“ **Access-Control-Allow-Origin 不允许使用 Origin null。 ”。**
当我在 IOS 模拟器中测试时，没有其他点击事件起作用。
我没有使用任何 ajax 调用。

请帮助我摆脱这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:12:30.957

您使用的是什么 jQuery 库？`live`从 1.9 开始折旧。您应该使用`on`而不是`live`. 检查它是否解决了问题。

根据[文档](http://api.jquerymobile.com/tap/)，您应该执行以下操作

```
$( "#applyZoom" ).on( 'tap', tapHandler );
function tapHandler( event ) {
    alert("all set");
} 
```

我想您正在尝试从本地目录运行文件，而不是托管解决方案。尝试将其托管在 localhost 并通过 http 访问，看看是否收到 null origin 错误。否则尝试通过`file:///`类似 url 访问并查看。

# php - JQuery 和 PHP - 如何显示数据库中单个帖子的评论？

> ID：15515760
> 
> 赞同：0
> 
> 时间：2013-03-20T05:03:25.487
> 
> 标签：php, jquery, database, comments

以下代码在单击链接时显示一个 div，但是它会为我的新闻提要页面上的每个帖子打开每个评论 div。有没有办法只打开与其新闻帖子特别相关的评论 div？

**HTML**

```
<html>
<head>
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<meta charset=utf-8 />
<title>Avinash</title>

<style>

</style>
</head>
<body>
<a href="#" class="comments">Show Comments</a>
<br />
<div class="toggleComments" style="display:none;">
  This is #comment1 <br />
  This is #comment2 <br />
  This is #comment3 <br />
  This is #comment4 <br />
  This is #comment5 <br />
  This is #comment6
</div>

</body>
</html> 
```

**Javascript**

```
var toggle = false;
$(function() {
    $('a.comments').click(function(e) {
    var $this = $(this);
    $('.toggleComments').toggle(500,function() {
      if(!toggle) {
        $this.text('Hide Comments');
        toggle = !toggle;
      }else {
        $this.text('Show Comments');
        toggle = !toggle;
      }
    });
        e.preventDefault();
    });
}); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:07:52.197

您需要将显示评论链接链接到帖子 ID。也许像 Show comments 之类的，然后在您的 javascript 中访问它。

您需要在与 postid 相关的另一个部分/div 中列出所有评论，以便区分不同的帖子评论。

# wpf - 如何在 WPF 中隐藏/取消隐藏主窗口上的菜单条（使用框架和页面）

> ID：15515761
> 
> 赞同：0
> 
> 时间：2013-03-20T05:03:30.217
> 
> 标签：wpf, vb.net

我创建了一个带有主页的应用程序。并且根据登录，我想根据用户级别向用户显示/隐藏不同的项目。我如何从其他页面访问我在主窗口中创建的菜单条。（即主窗口以外）例如：- 我有 3 页

主窗口-主页面包含菜单条 此窗口只有菜单条，显示文本的文本框很少。和加载其他页面的框架控件

登录窗口-不同的页面

用户窗口-登录后的另一个页面

（希望我很清楚）当应用程序启动时，我正在使用框架在应用程序中导航，它将打开登录页面。它不能在登录后显示菜单条，具体取决于用户，菜单项必须可见。怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:00:58.127

有一个属性叫做可见性。将此与您的 ViewModel 绑定。

这是文本块的代码，可以通过 ViewModel 更改其可见性。

```
<TextBlock Text="{Binding StatusMessage}" Visibility="{Binding IsStatusMessageVisible}" Foreground="Red" Background="#ffc8c8c8" />

public System.Windows.Visibility IsStatusMessageVisible
{
    get
    {
        return (string.IsNullOrEmpty(StatusMessage))
            ? System.Windows.Visibility.Collapsed
            : System.Windows.Visibility.Visible;
    }
} 
```

这实际上检查 StatusMessage 是否为空，然后不显示 TextBlock。我猜你可以在你的 MenuStrip 中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T18:21:06.473

很抱歉，它的回复很晚，但是可能对其他任何人都有用。

```
 void MenuItemShowHideManager_OnClicked(object sender, RoutedEventArgs e)

    {
                var navService = NavigationService.GetNavigationService(this);

                var window = new MasterPages.MyMasterWindow
                    {
                        MenuItem1 = {Visibility = Visibility.Hidden},
                        MenuItem2 = {Visibility = Visibility.Hidden},
                        MenuItem3 = { Visibility = Visibility.Visible }

                    };

             //Navigate to your default screen      
  } 
```

# java - CAPD远程监控系统

> ID：15515771
> 
> 赞同：1
> 
> 时间：2013-03-20T05:04:30.027
> 
> 标签：java, android, device

我知道有一些设备可以监测 CAPD 患者的血糖。我的问题是你知道我是否可以读取/访问这些数据吗？我计划创建一个读取这些数据的 Android 应用程序，但由于我不知道其他设备，所以我碰壁了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:09:27.107

您可以从许多医疗设备上读取数据，但接口不同，通信协议也不同，而且并非所有设备都支持外部数据收集。您必须逐个设备访问并为每个设备编写一个设备驱动程序。

有点像你的电脑打印机。他们可以与PC通信吗？当然可以——但是有些通过 USB 连接，有些通过 PS2，有些通过 LAN，有些通过 Wifi，几乎所有这些都需要设备驱动程序才能“交谈”。

# sql - IN() 子句 oracle PLSQL 中的数组

> ID：15515772
> 
> 赞同：18
> 
> 时间：2013-03-20T05:04:34.160
> 
> 标签：sql, oracle, stored-procedures, plsql

我将字符串数组（plcListchar）传递给存储过程，我想在 IN() 子句中使用这个字符串数组。

我不能在 IN() 子句中直接使用 plcListchar。让我展示我如何在 JAVA 中创建 plcListchar 字符串数组。

```
 String array[] = {"o", "l"}; 
 ArrayDescriptor des = ArrayDescriptor.createDescriptor("CHAR_ARRAY", con);
 ARRAY array_to_pass = new ARRAY(des,con,array);            
 callStmtProductSearch.setArray(4, array_to_pass); 
```

用于装箱 CHAR_ARRAY，

```
create or replace type CHAR_ARRAY as table of varchar2; 
```

我想在 IN 子句中使用 plcListchar。以下是我的存储过程。

```
CREATE OR REPLACE PROCEDURE product_search(
            status IN varchar2, 
            plcList IN varchar2,
            i_culture_id IN number,
            plcListchar IN CHAR_ARRAY,
            status_name OUT  varchar2, 
            culture_code  OUT varchar2)
AS  
    CURSOR search_cursor IS
    SELECT p.status_name, p.culture_code
                FROM PRISM_ITEM_cultures@prism p
                WHERE p.publishable_flag=1 
                AND p.isroll =0 
                AND status = '-1'
                AND p.plc_status IN (   );
 BEGIN
           OPEN search_cursor;
           FETCH search_cursor INTO status_name, culture_code ;
           CLOSE search_cursor;
 END; 
```

你能否建议我如何使用，如果你想建议任何其他逻辑，那就太好了。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-20T05:38:21.200

假设您的集合是在 SQL 中定义的，而不仅仅是在 PL/SQL 中，您可以使用`TABLE`运算符（您发布的定义在语法上无效——您需要为 指定长度`VARCHAR2`）

```
AND p.plc_status IN (SELECT column_value
                       FROM TABLE( plcListchar )) 
```

由于我没有您的表，因此使用`SCOTT`架构的示例

```
SQL> create type ename_tbl is table of varchar2(30);
  2  /

Type created.

SQL> ed
Wrote file afiedt.buf

  1  declare
  2    l_enames ename_tbl := ename_tbl( 'KING', 'SMITH' );
  3  begin
  4    for i in (select *
  5                from emp
  6               where ename in (select column_value
  7                                 from table( l_enames )))
  8    loop
  9      dbms_output.put_line( 'ENAME = ' || i.ename );
 10    end loop;
 11* end;
SQL> /
ENAME = KING
ENAME = SMITH

PL/SQL procedure successfully completed. 
```

# sql - SQL 访问查询以显示最小学生的姓名

> ID：15515775
> 
> 赞同：0
> 
> 时间：2013-03-20T05:05:01.010
> 
> 标签：sql, ms-access

编写查询： **显示年龄最小的学生的名字和姓氏。**

对于下表：
`STUDENT (School_ID char(3), St_LastName char(15), St_FirstName char(15), St_DOB char(15), St_SS# char(15), St_Address char(15),St_City char(15), St_State char(2),st_Zip char(5), st_phone char(15));` 它的工作但不执行值

SELECT STUDENT.St_FirstName,STUDENT.St_DOB FROM STUDENT, (SELECT MAX(STUDENT.St_DOB) AS maximum FROM FACULTY )AS YOUNG WHERE ((STUDENT.St_DOB) <(YOUNG.maximum));

您的答案应该在 Microsoft Access 中具体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:14:39.113

`CDate`使用 MS Access函数编写查询以将 St_DOB 转换为日期。并按该日期的降序对结果进行排序。然后第一行结果包含最年轻的学生。我现在没有 ms 访问权限。否则我会显示实际的查询。

# javascript - 在边框上也应用背景 - Javascript/CSS

> ID：15515776
> 
> 赞同：-1
> 
> 时间：2013-03-20T05:05:20.410
> 
> 标签：javascript, html, css, background-color

## HTML - 导航栏

```
<div id="navBar">
    <ul class="navBarWidth navBarMain"> 
        <li class="borderRight onSelect"><a href="#">LINK 1</a></li>
        <li class="borderRight borderLeft"><a href="#">LINK 2</a></li>
        <li class="borderRight borderLeft"><a href="#">LINK 3</a></li>
        <li class="borderRight borderLeft"><a href="#">LINK 4</a></li>
    </ul>
    <ul class="navBarExtended">
        <li class="borderLeft"><a href="#">EXTRA LINK</a></li>
    </ul>
</div> 
```

## CSS - 以下是应用的样式

```
html, body, h1, h2, h3, h4, h5, h6, p, ol, ul, li, pre, code, address, variable, form, fieldset, blockquote {
 padding: 0;
 margin: 0;
 font-size: 100%;
 font-weight: normal;
}
table { border-collapse: collapse; border-spacing: 0; }
td, th, caption { font-weight: normal; text-align: left; }
img, fieldset { border: 0; }
ol { padding-left: 1.4em; list-style: none; }
ul { padding-left: 1.4em; list-style:none; }
q:before, q:after { content:''; }

#navBar{
    width: 100%;
    position: absolute;
    line-height: 50px;
    background: -moz-linear-gradient(top,  #0088FF,  #0066BF);
}
.navBarWidth{
    width: 960px;
    margin: 0 auto;
}
.borderRight{
    border-right: 1px solid #005FB3;
    text-shadow: -1px -1px #0061B6;
}
.borderLeft{
    border-left: 1px solid #4CACFF;
    text-shadow: -1px -1px #0061B6;
}
#navBar li{
    float: left;
    }

.navBarMain  li a{
    display: inline-block;
    vertical-align: top;
    color: #ffffff;
    font-size: .8em;
    text-decoration: none;
    text-align: center;
    padding-left: 20px;
    padding-right: 20px;
    }
.navBarExtended  li a{
    display: inline-block;
    vertical-align: top;
    color: #ffffff;
    font-size: .8em;
    text-align: center;
    padding-left: 20px;
    padding-right: 20px;
    }

.onHoverMain{
    background-color: #3D3C3C;
    text-shadow: none;
    box-shadow: inset 0 0 16px #000000;
    }

.navBarExtended li a:hover{
    text-decoration: underline;
}

.onSelect{
    border-left: 1px solid #005FB3; 
    background-color: #242424;
    text-shadow: 0px 1px #000000;
    box-shadow: inset 0 0 16px #000000;
} 
```

## JAVASCRIPT

```
$(function() {
        $("ul.navBarMain li:not(.onSelect) a").hover(
            function(){
                $(this).addClass("onHoverMain");
            },
            function(){
                $(this).removeClass("onHoverMain");
        });
    }); 
```

悬停时的免费就在边界之间，我想在这里实现的是它也应该应用在边界上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:32:45.750

```
$(function() {
    $("ul.navBarMain li:not(.onSelect) a").hover(
        function(){
            $(this).addClass("onHoverMain");
        },
        function(){
            $(this).removeClass("onHoverMain");
        });
}); 
```

[演示](http://jsfiddle.net/ULVWz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:14:49.907

尝试

```
$(function() {
    $("ul.navBarMain li:not(.onSelect)").hover(
        function(){
            $(this).addClass("onHoverMain");
        },
        function(){
            $(this).removeClass("onHoverMain");
        });
}); 
```

和

```
.onHoverMain{
    background-color: #3D3C3C;
    border-color: #3D3C3C;
    text-shadow: none;
    box-shadow: inset 0 0 16px #000000;
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/nhYeW/2/)

# linux - 如何在 X11 中播放波形文件

> ID：15515780
> 
> 赞同：0
> 
> 时间：2013-03-20T05:05:53.443
> 
> 标签：linux, x11, embedded-linux

请帮忙，我需要在 X11 中播放波形文件。X11 中是否有任何 API，例如 Windows 中的 PlaySound？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:07:51.300

您可以使用`aplay`, `mplayer`, `vlc`, `mpg123`,`mpg321`等。

对于原始（非 mp3、非压缩）`wav`文件，simple`cat`应该可以工作：

```
cat file.wav > /dev/dsp 
```

如果您需要 API 方式来执行此操作，这是如何[使用 ALSA API](https://gist.github.com/ghedo/963382)[播放`wav`](https://gist.github.com/ghedo/963382)文件的简单示例。

但是，这与X11无关。

# php - PHP 的 SimpleXMLElement 解析问题

> ID：15515781
> 
> 赞同：0
> 
> 时间：2013-03-20T05:06:01.073
> 
> 标签：php, xml, simplexml

我正在尝试解析以下响应：

```
SimpleXMLElement Object ( 
    [responseType] => SimpleXMLElement Object ( 
        [inputConceptName] => aspirin [inputKindName] => % ) 
    [groupConcepts] => SimpleXMLElement Object ( 
        [concept] => Array ( 
            [0] => SimpleXMLElement Object ( 
                [conceptName] => ASPIRIN 
                [conceptNui] => N0000145918 
                [conceptKind] => DRUG_KIND ) 
            [1] => SimpleXMLElement Object ( #
                [conceptName] => Aspirin 
                [conceptNui] => N0000006582 
                [conceptKind] => INGREDIENT_KIND ) 
) ) ) 
```

在 PHP 中。我将它存储为 curl 字符串：

```
$xml = simplexml_load_string($data);
print_r($xml); 
```

如何将第一个对象的 conceptNui 作为 PHP 变量获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:11:22.033

看一下文档，它给出了简单的例子来理解提取数据的友好语法：

[http://www.php.net/manual/en/simplexml.examples-basic.php](http://www.php.net/manual/en/simplexml.examples-basic.php)

在你的情况下，它可能是：

```
$xml->groupConcepts->concept[0]->conceptNui 
```

因为你的结构是

```
SimpleXMLElement Object ( 
  [responseType] => SimpleXMLElement Object ( 
    [inputConceptName] => aspirin 
    [inputKindName] => % ) 
  [groupConcepts] => SimpleXMLElement Object ( 
    [concept] => Array ([0] => SimpleXMLElement Object ( 
                    [conceptName] => ASPIRIN 
                    [conceptNui] => N0000145918 
                    [conceptKind] => DRUG_KIND ) 
              [1] => SimpleXMLElement Object ( 
                    [conceptName] => Aspirin 
                    [conceptNui] => N0000006582 
                    [conceptKind] => INGREDIENT_KIND ) 
              )
          )
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:16:26.117

```
 $conceptNui = $mainObj->groupConcepts->concept[0]->conceptNui; 
```

# java - 查看动态生成的java类的内容

> ID：15515785
> 
> 赞同：2
> 
> 时间：2013-03-20T05:06:18.357
> 
> 标签：java, eclipse, proxy-classes

有没有一种方法可以让我们以某种方式查看动态生成的 java 类的内容（比如由 JDKProxy 或 CGLIB 生成的代理）——比如在 Eclipse 调试器视图中，或者按需打印在日志文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:13:49.717

它在没有配置方面的情况下工作吗？我建议您再次查看[ProceedingJoinPoint.proceed()](http://eclipse.org/aspectj/doc/next/runtime-api/index.html)的文档，然后将其与您的方面实际在做什么进行比较。

编辑：这是一个提示

```
@Aspect
public class AstralMethodInterceptor {

    private static final Logger LOG = LoggerFactory
            .getLogger(AstralMethodInterceptor.class);

    @Around("(execution(* com.kilo.proxyproxy.*.*(..)) || execution(* net.webservicex.*.*(..)) )")
    public void handleMethod(ProceedingJoinPoint pjp) throws Throwable {
        LOG.info("I encountered astral method in "
            + pjp.getThis().getClass().getCanonicalName());
        pjp.proceed();
    }
} 
```

# android - android中不同类型的设备需要相同的设计

> ID：15515791
> 
> 赞同：1
> 
> 时间：2013-03-20T05:06:46.060
> 
> 标签：android, design-patterns, layout

我创建了一个按钮布局设计，如图所示。如何实现不同尺寸屏幕的设计模式？此布局适用于 3.7 英寸屏幕，但不适用于其他屏幕。可能是滚动视图是一种选择，但这并不满足我。我该怎么做？有什么帮助吗？

![在此处输入图像描述](../Images/5efca9a20c77e39ffde248a363481f11.png)

这是我的 xml 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="110dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="5dp"
    android:text="Button" />

<Button
    android:id="@+id/button2"
    android:layout_width="match_parent"
    android:layout_height="110dp"
    android:layout_below="@+id/button1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="5dp"
    android:text="Button" />

<Button
    android:id="@+id/button3"
    android:layout_width="match_parent"
    android:layout_height="110dp"
    android:layout_below="@+id/button2"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="5dp"
    android:text="Button" />

<Button
    android:id="@+id/button4"
    android:layout_width="match_parent"
    android:layout_height="110dp"
    android:layout_below="@+id/button3"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="5dp"
    android:text="Button"
    android:layout_marginBottom="5dp" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:43:56.133

嗨，您可以使用权重而不是相对布局。如果您使用相对布局概念，它将适合所有屏幕。试试下面的 xml 并签入不同的屏幕。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
      android:orientation="vertical"
   android:weightSum="8" >

     <Button
android:id="@+id/button1"
android:layout_width="match_parent"
android:layout_height="0dp"
   android:layout_weight="2"
android:text="Button" />

  <Button
android:id="@+id/button2"
android:layout_width="match_parent"
android:layout_height="0dp"
android:layout_weight="2"
android:text="Button" />

  <Button
android:id="@+id/button3"
android:layout_width="match_parent"
android:layout_height="0dp"
  android:layout_weight="2"
android:text="Button" />

   <Button
android:id="@+id/button4"
android:layout_width="match_parent"
android:layout_height="0dp"
  android:layout_weight="2"
android:text="Button"
 />
</LinearLayout> 
```

线性布局中的权重总和将占据整个屏幕尺寸。并且 layout_weight 将根据权重修复按钮..

# android - 我们真的应该在 onActivityCreated 中调用 getLoaderManager().initLoader，这会导致 onLoadFinished 被调用两次

> ID：15515799
> 
> 赞同：24
> 
> 时间：2013-03-20T05:07:18.813
> 
> 标签：android

Google 建议我们`getLoaderManager().initLoader(0, null, this);`在 Fragment 的`onActivityCreated`

[http://developer.android.com/reference/android/content/AsyncTaskLoader.html](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)

但是，这会产生以下问题：**onLoadFinished 在配置更改期间将被调用两次（轮换）**

我们可以模拟如下问题。

## 代码

```
package org.yccheok.gui;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.AsyncTaskLoader;
import android.support.v4.content.Loader;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.actionbarsherlock.app.SherlockFragment;

public class HomeMenuFragment extends SherlockFragment implements LoaderManager.LoaderCallbacks<HomeMenuFragment.Infos> {
    private static class InfosLoader extends AsyncTaskLoader<Infos> {

        private Infos infos = null;

        public InfosLoader(Context context) {
            super(context);
        }

        @Override
        public Infos loadInBackground() {
            Log.i(TAG, "loadInBackground");

            this.infos = Infos.newInstance();
            return infos;
        }

        /**
         * Handles a request to cancel a load.
         */
        @Override 
        public void onCanceled(Infos infos) {
            super.onCanceled(infos);
        }

        /**
         * Handles a request to stop the Loader.
         * Automatically called by LoaderManager via stopLoading.
         */
        @Override 
        protected void onStopLoading() {
            // Attempt to cancel the current load task if possible.
            cancelLoad();
        }

        /**
         * Handles a request to start the Loader.
         * Automatically called by LoaderManager via startLoading.
         */
        @Override        
        protected void onStartLoading() {
            if (this.infos != null) {
                Log.i(TAG, "deliverResult");
                deliverResult(this.infos);
            }

            if (takeContentChanged() || this.infos == null) {
                Log.i(TAG, "forceLoad");
                forceLoad();
            }
        }

        /**
         * Handles a request to completely reset the Loader.
         * Automatically called by LoaderManager via reset.
         */
        @Override 
        protected void onReset() {
            super.onReset();

            // Ensure the loader is stopped
            onStopLoading();

            // At this point we can release the resources associated with 'apps'
            // if needed.
            this.infos = null;
        }        
    }

    static class Infos {

        private Infos() {
        }

        public static Infos newInstance() {
            return new Infos();
        }
    }

    @Override
    public void onActivityCreated (Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        Log.i(TAG, "onActivityCreated");
        // Prepare the loader.  Either re-connect with an existing one,
        // or start a new one.
        getLoaderManager().initLoader(0, null, this);
    }

    @Override
    public Loader<Infos> onCreateLoader(int arg0, Bundle arg1) {
        return new InfosLoader(this.getSherlockActivity());
    }

    @Override
    public void onLoadFinished(Loader<Infos> arg0, Infos arg1) {
        Log.i(TAG, "onLoadFinished! -> " + arg1);
    }

    @Override
    public void onLoaderReset(Loader<Infos> arg0) {
    }

    public void reloadAfterOpenFromCloud() {
        this.getLoaderManager().getLoader(0).onContentChanged();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.home_menu, container, false);
        return v;
    }

    private static final String TAG = HomeMenuFragment.class.getSimpleName();
} 
```

## 日志记录

```
I/HomeMenuFragment(14776): onActivityCreated
I/HomeMenuFragment(14776): forceLoad
I/HomeMenuFragment(14776): loadInBackground
I/HomeMenuFragment(14776): onLoadFinished! -> org.yccheok.gui.HomeMenuFragment$Infos@4195ad58

[Rotation happens right here]

I/HomeMenuFragment(14776): onActivityCreated
I/HomeMenuFragment(14776): onLoadFinished! -> org.yccheok.gui.HomeMenuFragment$Infos@4195ad58
I/HomeMenuFragment(14776): onLoadFinished! -> org.yccheok.gui.HomeMenuFragment$Infos@4195ad58 
```

根据[Android： LoaderCallbacks.OnLoadFinished 调用了两次](https://stackoverflow.com/questions/11293441/android-loadercallbacks-onloadfinished-called-twice)，建议的解决方案之一是调用`initLoader`。`onResume`

```
@Override
public void onActivityCreated (Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    Log.i(TAG, "onActivityCreated");
    //getLoaderManager().initLoader(0, null, this);
}

@Override
public void onResume()
{
    super.onResume();
    Log.i(TAG, "onResume");
    // Prepare the loader.  Either re-connect with an existing one,
    // or start a new one.
    getLoaderManager().initLoader(0, null, this);
} 
```

这是日志记录。现在我们**搬到**. `initLoader`_`onResume`

## 日志记录

```
I/HomeMenuFragment(15468): onActivityCreated
I/HomeMenuFragment(15468): onResume
I/HomeMenuFragment(15468): forceLoad
I/HomeMenuFragment(15468): loadInBackground
I/HomeMenuFragment(15468): onLoadFinished! -> org.yccheok.gui.HomeMenuFragment$Infos@4195aed0

I/HomeMenuFragment(15468): onActivityCreated
I/HomeMenuFragment(15468): onResume
I/HomeMenuFragment(15468): onLoadFinished! -> org.yccheok.gui.HomeMenuFragment$Infos@4195aed0 
```

我想知道

1.  为什么建议的解决方案有效？
2.  这是一个错误吗？我们是否应该向 Google 提交有关此行为的错误？也许有人向 Google 提交了一张罚单，但我找不到。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-26T15:50:29.077

**为什么建议的解决方案有效**

如果我们调用然后我们初始化变量`getLoaderManager()`。`onActivityCreated()``Fragment.mLoaderManager`

结果我们`mLoaderManager.doReportStart()`调用`Fragment.performStart()`了`FragmentActivity.onStart()`：

```
 void performStart() {
    if (mChildFragmentManager != null) {
        mChildFragmentManager.noteStateNotSaved();
        mChildFragmentManager.execPendingActions();
    }
    mCalled = false;
    onStart();
    if (!mCalled) {
        throw new SuperNotCalledException("Fragment " + this
                + " did not call through to super.onStart()");
    }
    if (mChildFragmentManager != null) {
        mChildFragmentManager.dispatchStart();
    }
    if (mLoaderManager != null) {
        mLoaderManager.doReportStart();
    }
} 
```

这是第一次调用的原因`onLoadFinished()`。

稍后`FragmentActivity.onStart()`我们会调用`lm.finishRetain()`（参见代码片段）：

```
 if (mAllLoaderManagers != null) {
     LoaderManagerImpl loaders[] = new LoaderManagerImpl[mAllLoaderManagers.size()];
     mAllLoaderManagers.values().toArray(loaders);
     if (loaders != null) {
         for (int i=0; i<loaders.length; i++) {
             LoaderManagerImpl lm = loaders[i];
             lm.finishRetain();
             lm.doReportStart();
         }
     }
 } 
```

这是第二次调用的原因`onLoadFinished()`。

* * *

好的。现在考虑我们调用的`getLoaderManager().initLoader(0, null, this)`情况`onResume()`：

如果我们这样做，我们既没有`mLoaderManager.doReportStart()`也没有`lm.finishRetain()`after `onActivityCreated()`，而是我们有`onLoadFinished()`call during `initLoader()`：

```
public <D> Loader<D> initLoader(int id, Bundle args, LoaderManager.LoaderCallbacks<D> callback) {
    if (mCreatingLoader) {
        throw new IllegalStateException("Called while creating a loader");
    }

    LoaderInfo info = mLoaders.get(id);

    if (DEBUG) Log.v(TAG, "initLoader in " + this + ": args=" + args);

    if (info == null) {
        // Loader doesn't already exist; create.
        info = createAndInstallLoader(id, args,  (LoaderManager.LoaderCallbacks<Object>)callback);
        if (DEBUG) Log.v(TAG, "  Created new loader " + info);
    } else {
        if (DEBUG) Log.v(TAG, "  Re-using existing loader " + info);
        info.mCallbacks = (LoaderManager.LoaderCallbacks<Object>)callback;
    }

    if (info.mHaveData && mStarted) {
        // If the loader has already generated its data, report it now.
        info.callOnLoadFinished(info.mLoader, info.mData);
    }

    return (Loader<D>)info.mLoader;
} 
```

您可以在此代码段中看到`info.callOnLoadFinished()`调用：

```
if (info.mHaveData && mStarted) {
     // If the loader has already generated its data, report it now.
     info.callOnLoadFinished(info.mLoader, info.mData);
} 
```

我认为这很清楚:)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-20T05:31:59.587

尝试从您的`onStartLoading`. 当调用已经返回的加载器时，`LoaderManager`已经返回现有值。`initLoader`

# php - PHP 脚本创建损坏的 SQLite 数据库

> ID：15515810
> 
> 赞同：1
> 
> 时间：2013-03-20T05:08:04.763
> 
> 标签：php, macos, sqlite

我有这个 PHP 脚本可以在 MAC Snow Leopard 上创建数据库。当我尝试打开创建的 .sqlite 时，我从*SQLite 数据库浏览器 2.0 b1*（“发生错误：文件不是 SQLite 3 数据库”）和 Firefox *SQLite 管理器*（“SQLiteManager：打开文件论坛时出错。 sqlite - 文件已加密或损坏异常名称：NS_ERROR_FILE_CORRUPTED 异常消息：组件返回失败代码：0x8052000b (NS_ERROR_FILE_CORRUPTED)[mozIStorageService.openUnsharedDatabase]")。这是我的脚本

```
<?php

$dbhandle = sqlite_open('forum.sqlite', $error);
if (!$dbhandle) die ($error);

$stm1 = 'CREATE TABLE author' .'(
            id INTEGER PRIMARY KEY,
            name TEXT,
            url TEXT
           )';

$ok1 = sqlite_exec($dbhandle, $stm1, $error);

if (!$ok1)
   die("Cannot execute query. $error");

echo "Table author created successfully"."\n";   

$stm2 = 'CREATE TABLE thread' .'(
            id INTEGER PRIMARY KEY,
            authorId INTEGER,
            title TEXT,
            reactions INTEGER,
            dislikes INTEGER,
            userScore INTEGER,
            createdAt DATETIME,
            slug TEXT,
            postNumber INTEGER,
            link TEXT,
            likes INTEGER,
            message TEXT,
            category INTEGER,
            score INTEGER,
            categoryLink TEXT,
            FOREIGN KEY(authorId) REFERENCES author(id)
            )';

$ok2 = sqlite_exec($dbhandle, $stm2, $error);

if (!$ok2)
   die("Cannot execute query. $error");

echo "Table thread created successfully"."\n"; 

$stm3 = 'CREATE TABLE commentAuthor' .'(
            authorUrl TEXT PRIMARY KEY,
            name TEXT
            )';

$ok3 = sqlite_exec($dbhandle, $stm3, $error);

if (!$ok3)
   die("Cannot execute query. $error");

echo "Table commentAutor created successfully"."\n"; 

$stm4 = 'CREATE TABLE comment' .'(
            id INTEGER PRIMARY KEY,
            threadId INTEGER,
            forum TEXT,
            parent INTEGER,
            authorUrl TEXT,
            dislikes INTEGER,
            rawMEssage TEXT,
            createdAt DATETIME,
            numReports INTEGER,
            likes INTEGER,
            message TEXT,
            FOREIGN KEY(threadId) REFERENCES thread(id),
            FOREIGN KEY(authorUrl) REFERENCES commentAuthor(authorUrl)
            )';

$ok4 = sqlite_exec($dbhandle, $stm4, $error);

if (!$ok4)
   die("Cannot execute query. $error");

echo "Table comment created successfully"."\n"; 

sqlite_close($dbhandle);

?> 
```

脚本运行正确，我收到确认表已创建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T07:43:00.063

这些`sqlite_`* 函数创建 SQLite 2 数据库。

对于 SQLite 3 数据库，使用 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T08:50:22.830

Or instead of PDO, you could also use this: [http://php.net/sqlite3](http://php.net/sqlite3)

(but I'd prefer PDO as well)

# ios - 如何为 iPad 开发/实现远程桌面应用程序？

> ID：15515811
> 
> 赞同：4
> 
> 时间：2013-03-20T05:08:06.393
> 
> 标签：ios, objective-c, ipad, remote-desktop, rdp

我一直在尝试在网上搜索很多，但大多数链接都没有解释如何实现。

开始的一些问题：

1.  我应该使用哪个 API 为 iPad 开发 RDP 应用程序以连接到 Windows/Mac 机器？
2.  此外，当远程机器连接时，我想在该机器上自动启动应用程序。
3.  Microsoft RDP API 对开发 iPad 远程桌面应用程序有用吗？如果是这样，任何人都可以提供一些教程或建议一种方法吗？

我已经阅读了这些问题，但他们没有充分解释：

[远程桌面协议 C 或 Objective-C 库](https://stackoverflow.com/questions/1019236/remote-desktop-protocol-c-or-objective-c-library)

[我想为 iPad 应用程序开发像“桌面连接”这样的应用程序](https://stackoverflow.com/questions/5804209/i-would-like-to-develop-application-like-desktop-connect-for-ipad-app)

# android - 尝试显示谷歌广告时出现警告

> ID：15515815
> 
> 赞同：0
> 
> 时间：2013-03-20T05:08:16.867
> 
> 标签：android

我正在尝试展示我的谷歌广告，我正在使用 oncreate 方法。

这就是我正在做的事情。

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.cities);

        AdView adView = new AdView(this, AdSize.BANNER, "a150cb2e3184cd");
        LinearLayout addLay = (LinearLayout) findViewById(R.id.addlay);

        AdRequest adRequest = new AdRequest();
        // adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
        addLay.addView(adView);
        adRequest.setTesting(true);
        adView.loadAd(adRequest); 
```

但是当我运行我的应用程序时，我收到以下警告并且屏幕转换很慢。

这是警告

```
03-20 05:07:22.952: W/webview_proxy(8998): java.lang.Throwable: Warning: A WebView method was called on thread 'AsyncTask #4'. All WebView methods must be called on the UI thread. Future versions of WebView may not support use on other threads.
03-20 05:07:22.952: W/webview_proxy(8998):  at android.webkit.WebView.checkThread(WebView.java:1876)
03-20 05:07:22.952: W/webview_proxy(8998):  at android.webkit.WebView.loadDataWithBaseURL(WebView.java:859)
03-20 05:07:22.952: W/webview_proxy(8998):  at c.a(Unknown Source)
03-20 05:07:22.952: W/webview_proxy(8998):  at c.doInBackground(Unknown Source)
03-20 05:07:22.952: W/webview_proxy(8998):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-20 05:07:22.952: W/webview_proxy(8998):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-20 05:07:22.952: W/webview_proxy(8998):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-20 05:07:22.952: W/webview_proxy(8998):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-20 05:07:22.952: W/webview_proxy(8998):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-20 05:07:22.952: W/webview_proxy(8998):  at java.lang.Thread.run(Thread.java:856) 
```

这是我的 AsyncTask 类

```
public class CityData extends AsyncTask<Integer, Void, String> {

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            try {
                if (!lstresponse.isEmpty()) {
                    lstresult.addAll(lstresponse);
                    lstcities.setAdapter(CustAdapter);
                }
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        @Override
        protected String doInBackground(Integer... params) {
            // TODO Auto-generated method stub

            SendRequesttoServer();
            return "1";
        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();

        }

    } 
```

我在做什么错？？？

谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:18:40.410

由于`AdView`必须通过互联网进行通信，并且广告需要时间才能出现。

“阻塞”或“滞后”可能是`Ad SDK's`试图让广告展示给您的线程。我真的不认为在尝试获取广告时`AdMob`会阻止`UI`线程，但是在您看到所有 UI 小部件项目（按钮、文本字段、图像等）显示在您的屏幕上之间会有明显的延迟活动以及广告出现的时间。

尝试在线程中加载广告，如下所示：

> ```
>  public class MainActivity extends Activity {
>       @Override
>       public void onCreate(Bundle savedInstanceState) {
>           super.onCreate(savedInstanceState);
>           setContentView(R.layout.main);
>           long now = System.currentTimeMillis();
>       new Thread(new Runnable() {
>       public void run() {
>         new AdView(this, AdSize.BANNER, "MY_ID");               
>       }
>   }).start();
>  } 
> ```

# ruby - 我想找出特定的子图是否存在于 ruby 的图中

> ID：15515818
> 
> 赞同：-1
> 
> 时间：2013-03-20T05:08:27.300
> 
> 标签：ruby

通过使用 ruby​​ 中的 RGL 库，如何在图中找到子图的存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:58:33.160

你可以看看这里[`set`](http://www.ruby-doc.org/stdlib-2.0/libdoc/set/rdoc/Set.html#method-i-proper_subset-3F)

*这是一个提示代码：*

```
p RUBY_VERSION
require 'set'

arr = [ [1,2], [1,3], [3,4], [3,5], [4,6], [6,5], [5,7],[7,8]]
arr1 = [[1,3],[3,4]]
arr2 = [[10,11],[4,5]]
dirgraph = Set.new()
subgraph = Set.new()
subgraph1 = Set.new()

arr.each{|x|
dirgraph.add(x)
}

p dirgraph

arr1.each{|x|
subgraph.add(x)
}

p subgraph

arr2.each{|x|
subgraph1.add(x)
}

p subgraph1

p subgraph.subset?(dirgraph)
p subgraph1.subset?(dirgraph) 
```

*输出：*

```
"2.0.0"
#<Set: {[1, 2], [1, 3], [3, 4], [3, 5], [4, 6], [6, 5], [5, 7], [7, 8]}>
#<Set: {[1, 3], [3,4]}>
#<Set: {[10, 11], [4, 5]}>
true
false 
```

# ant - 在 ANT 中使用 javac 时如何指定清单

> ID：15515820
> 
> 赞同：1
> 
> 时间：2013-03-20T05:09:00.063
> 
> 标签：ant, manifest, javac

我有一个罐子，包括指向一堆罐子的清单。我试图在 ANT 中使用 javac 来编译源文件。问题是如何让 ANT 知道这个 jar 只是一个清单，以便它可以通过遵循这个清单找到正确的 jar。JAVAC 不像 JAR 那样提供“清单”选项。有什么建议吗？

# sql-server - 我们的 SQL Server 2005 上的严重性 14 错误状态 16，用户“用户名”登录失败

> ID：15515823
> 
> 赞同：1
> 
> 时间：2013-03-20T05:09:26.927
> 
> 标签：sql-server, sql-server-2005, iis-6

我们遇到了问题

资源：

> *登录错误：18456，严重性：14，状态 16
> 用户“用户名”客户端登录失败 [XXXX]*

`XXXX`: 是我们在 SQL Server 2005 机器上的 IP 地址。

重点是

1.  错误自己来了又走了

2.  仅适用于一个数据库

3.  主要发生在晚上（7pm-8am）

4.  上述错误在白天（上午 8 点至下午 6 点）非常少

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:09:17.507

您好，感谢您的所有回复。我终于在我们的应用程序中找到了一个永久的解决方案。

### 原因

1.  这是由于用户无权登录已设置为默认数据库的数据库。
2.  数据库有时会进入恢复中，因为那个时候特定的数据库对用户不可用。
3.  同时在 SQL 错误日志中我们可以找到正在启动数据库 'DB'

### 解决方案

转到您的 Microsoft SSMS，选择 db->Properties->Options-> 如果 Auto Close 设置为 true ，将 Auto Close 更改为 false 并单击 Ok。它将永久解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:02:22.997

我过去见过这种情况。经过四处研究，我们发现这是由于用户无权登录已设置为默认数据库的数据库。这是一个新设置的数据库用户，供 SSIS 导入使用。

我们使用[ALTER LOGIN](http://msdn.microsoft.com/en-us/library/ms189828.aspx)解决了​​这个问题。

```
ALTER LOGIN [username]
WITH DEFAULT_DATABASE = [database name] 
```

注意：这是使用 SQL Server 2008，但它应该与 2005 相同。

# shell - 使用 sed 编写 shell 脚本

> ID：15515827
> 
> 赞同：0
> 
> 时间：2013-03-20T04:51:40.543
> 
> 标签：shell

所以，我想从标准输入读取文件，删除所有包含 3 个“/”的行中的“/”，并将输出写入标准输出。所以一个文件包含：

```
/a1/b/c
/a/b2
///
/a 
```

将有输出：

```
a1bc
/a/b2

/a 
```

我在想这样的事情：

```
sed -r 's/\/[^\/]*\/[^\/]*\/.*/"I not sure what do I need to put in here"/g' 
```

但是，我不确定我需要在替换会话中添加什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:02:05.830

一个 sed 解决方案：

```
sed '/.*\/.*\/.*\//{s#/##g}' file 
```

如果 Perl 适合您：

```
perl -F/ -ape '$_=@F>3?join"",@F:join "/",@F;' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:23:31.447

```
sed -e '/^[^\/]*\/[^\/]*\/[^\/]*\/[^\/]*$/ s%/%%g' 
```

令人毛骨悚然的模式寻找行首，零个或多个非斜线后跟一个斜线，更多非斜线和第二个斜线，更多非斜线和第三个斜线，更多非斜线和行尾. 在任何与此匹配的行上，将斜杠替换为任何内容。

还有其他编写正则表达式的方法，但它们并不十分清晰。这几乎适用于任何版本的`sed`. 这也会：

```
sed -e '/^\([^\/]*\/\)\{3\}[^\/]*$/ s%/%%g' 
```

它查找行首、3 个单位（零个或多个非斜线后跟一个斜线）、零个或多个非斜线和行尾。

如果您`sed`有扩展的正则表达式（`sed`例如 GNU），那么您可以获得一些符号上的便利。

```
sed -r -e '/^([^\/]*\/){3}[^\/]*$/ s%/%%g'

sed -r -e 's%^([^/]*)/([^/]*)/([^/]*)/([^/]*)$%\1\2\3\4%' 
```

后者捕获四组“零个或多个非斜线”并将它们粘贴在一起以进行替换。你可以用非扩展的正则表达式来写，但它会比以前更多地使用反斜杠。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T12:49:06.910

这在以下方面要简单得多`awk`：

```
awk -F/ 'NF==4 { gsub("/","") } {print}' tmp.txt 
```

# ruby-on-rails - 如何在生产中使用 Paperclip 更改图像文件名

> ID：15515829
> 
> 赞同：0
> 
> 时间：2013-03-20T05:09:47.533
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

我正在使用带有 Paperclip 和 S3 的 Rails 进行图像上传，并且我已经让它在生产环境中运行了一段时间。现在我正在尝试更新图像的保存方式（以创建更具可读性的文件名），但我不确定如何在不破坏所有已上传的图像的情况下更改路径。

关于解决方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:01:47.157

我没做过但是试试

rake 回形针：刷新 CLASS=class_name

我用它来刷新附件的样式大小。我不知道它是否有效。试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T09:05:30.227

你可以试试这个。假设您的模型是 Avatar。

1.  创建模型的副本，例如 OldAvatar。将此模型中的表名设置为“头像”
2.  在 Avatar 模型中，根据需要设置回形针路径/文件名。
3.  现在您可以编写一个 rake 任务，该任务将遍历每个 OldAvatar 并使用 OldAvatar 图像文件创建新 Avatar

注意：您必须删除循环中的 OldAvatars，并可能保存必要的字段，如 user_id 等。

# java - 在 java android 应用程序中需要帮助

> ID：15515832
> 
> 赞同：2
> 
> 时间：2013-03-20T05:10:00.457
> 
> 标签：java, android, for-loop, project

我正在尝试从随机字母中生成 5 个字母的单词。一切正常，但是当我单击按钮生成单词时，生成这些单词大约需要 2 分钟，而在这 2 分钟内，我的按钮仍然处于点击状态（蓝色），这看起来不太好。我想放处理环，但这也行不通。下面是我的方法的一些编码

```
String finalWrd = searchWrd.toUpperCase();
        String twoLetterString = "";
        int wordLen = searchWrd.length();//searchWrd is a random letter entered by user
        String[] array = finalWrd.split("");    
        for(int i =1; i<=wordLen; i++)
            for(int j=1; j<=wordLen; j++)
                for(int K=1; K<=wordLen; K++)
                    for(int l=1; l<=wordLen; l++){
                        for(int m=1; m<=wordLen; m++){
                            twoLetterString += array[i] + array[j]+ array[K]+ array[l] + array[m] +",";
                        }

                    }

String[] array2Letters = twoLetterString.split(",");

    int a =array2Letters.length, b = dictLinesArray.length;

    for(int i =0;i<a; i++)
    { 

        for(int l=0;l<b;l++)
        {
            if(array2Letters[i].equals(dictLinesArray[l]))
            {
                dictString2Lettes += dictLinesArray[l] +"," ;
            } 
        }
    }

    text = dictString2Lettes; 
```

请帮助我，我的大学项目需要它。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:45:46.937

我将尝试为您提供一个体面的解决方案来提高您的算法的性能。使用@Seraphim 的（或类似的）答案来提高您的用户友好性。

**修复您的字典数据结构。**

1) 让你的字典成为一个`Map<String,ArrayList<String>>`.

2）在您的字典中添加单词，如下所示：

```
String[] oldDictionary = {"using","suing","apple","orange"};
HashMap<String, ArrayList<String>> map = new HashMap<>();
for (int i = 0; i < oldDictionary.length; i++) {
  char[] sort = oldDictionary[i].toCharArray();
  Arrays.sort(sort);
  String alphabetical = new String(sort);
  if (map.containsKey(alphabetical)) {
    map.get(alphabetical).add(oldDictionary[i]);
  } else {
    ArrayList<String> tmp = new ArrayList<>();
    tmp.add(oldDictionary[i]);
    map.put(alphabetical, tmp);
  }
} 
```

您现在可以使用这种新的和改进的数据结构来超级轻松地查找单词。

```
String inputWord = "iusgn";
char[] sort = inputWord.toCharArray();
Arrays.sort(sort);
inputWord = new String(sort);

if (map.containsKey(inputWord)) {
  StringBuilder sb = new StringBuilder();
  for (String word : map.get(inputWord)) {
    sb.append(word + ",");
  }
  sb.deleteCharAt(sb.length() - 1);
  System.out.println(sb.toString());
} else {
  System.out.println("Nothing found :(");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:21:51.317

我不会评论您的算法效率低下（尝试找到更好的东西！:)）。**我将简单地为看起来冻结的 UI 提供一个解决方案：**

*“我的按钮仍然被点击（蓝色），看起来不太好”*

当您的计算需要时间完成时，您需要**AsyncTask**之类的东西：

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

假设您在名为 MyActivity 的活动中：

```
public class MyActivity extends BaseActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main_menu);

        Button btn = (Button)findViewById(R.id.button);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            //execute async task
            new FindWordsTask().execute();              
        }
    });
} 
```

比你这样设置你的**AsyncTask**：

```
private class FindWordsTask extends AsyncTask<Void, Void, Void> {

    ProgressDialog progressDialog;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        progressDialog = ProgressDialog.show(MyActivity.this,
                "Title",
                "Finding words...", true);
    }

    @Override
    protected Void doInBackground(Void... params) {

        //do the computation,
        //use here your function

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        progressDialog.dismiss();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:23:22.087

我猜你最花时间的是第二个循环（因为`dictLinesArray`很大）

尝试更改`dictLinesArray`为 Set and use `contains`。`dictLinesSet`初始化应该只进行一次（在某些初始化函数中）。

```
Set<String> dictLinesSet = new HashSet<String>(Arrays.asList(dictLinesArray));

for(int i =0;i<a; i++){
    if (dictLinesSet.contains(array2Letters[i])){
         dictString2Lettes += array2Letters[i] +"," ;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T05:29:41.420

一些想法，我希望他们有所帮助。

在您的构建中，您实际上是在做一些不太理想的数据管理。由于字符串是不可变的，因此每次通过最内层循环（即 wordLen^5 次迭代）时，您将创建 6 个字符串对象（= 符号右侧），并创建第七个（= 符号左侧） . 字符串在 Java 中是不可变的，与笔记本电脑/台式机开发相比，移动应用程序更关注内存。因此，对于 5 个字长，您将创建 21,875 个对象。对于 8 的 wordLen，您正在创建 229,376 个对象，而且情况只会变得更糟。

更好的是使用 StringBuilder 并在完成后存储值：

您还希望从一开始就使 twoLetterString 成为字符串构建器。

```
StringBuilder twoLetterStringBuilder = new StringBuilder();
//inside the loop
    twoLetterStringBuilder.append(array[i]).append(array[j]). ... .append(","); 
```

最后，只需使用

```
twoLetterStringBuilder.toString().split(","); 
```

AsyncTask 将防止事情被锁定，但这应该可以帮助您更有效地创建对象和整体处理时间。

所有 for 循环的原因是否有必要拥有所有可能排列的数组？如果不只是使用：

```
Random r = new Random();
int arrayIndex = r.nextInt(wordLen); 
```

# ios - 将 NSObjects 的 NSMutableArray 存储到 NSUserDefaults

> ID：15515833
> 
> 赞同：1
> 
> 时间：2013-03-20T05:10:01.233
> 
> 标签：ios, objective-c, xcode, nsmutablearray, nsuserdefaults

我目前正在为 iPhone 编写一个应用程序，我需要遵循的设计要求之一如下：

存储`NSObjects`到 a`NSMutableArray`中，将数据显示到 a`UITableView`并将数据保存到`NSUserDefaults`. 我能够将 a 存储`NSObject`到 a`NSMutableArray`中并将其显示在 中`UITableView`，但我需要帮助了解如何将数据存储`NSObject`到`NSUserDefaults`.

我的定义`NSObject (.h)`：

```
 #import <Foundation/Foundation.h>
    @interface Name : NSObject
    @property (nonatomic)NSString *name;
    @property (nonatomic)NSInteger score;
    @end 
```

我的实施`NSObject (.m)`

```
 #import "Name.h"
    @implementation Name
    -(id)initWithName:(NSString*)name andScore:(NSInteger)score
    {
    _name = name;
    _score= score;
    return [super init];
    }
    @end 
```

这就是我存储到我的方式`NSObject`：

```
 NSString *newName = _submitNameTextBox.text;
    NSInteger score = 0;
    Name *name = [[Name alloc] init];//Name is the object name
    name.name = newName; 
    name.score = score;
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    NSMutableArray *listTemp = appDelegate.nameList; //main copy of my list is in app delegate, but i have it accessible by my uiviewcontrollers. 
```

我添加`NSObjects`了我的`secondUIViewController`，并在我的第三个 UIViewController 中显示数据，而我的第一个是存储数据的基本操作屏幕。

所以我的问题是，鉴于我用来定义我的代码`NSObject`以及我如何将所述对象存储到 a `NSMutableArray`，我如何在应用程序关闭时将其存储`NSMutableArray`到。`NSUserDefaults`想法是数组需要使用上次运行的数据加载程序数组，以便用户可以跟踪他/她的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:15:30.147

如果您需要编写包含字符串的数组，则：

保存：

```
[[NSUserDefaults standardUserDefaults] setObject:yourArray forKey:@"ArrayKey"]; 
```

阅读 ：

```
NSMutableArray *array = [NSMutableArray arrayWithArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"ArrayKey"]]; 
```

由于您需要编写包含对象的数组，因此您需要对它们进行编码并使用 Archiver。

```
- (void)encodeWithCoder:(NSCoder *)coder {
    [coder encodeObject:array forKey:@"array"];
}

- (id)initWithCoder:(NSCoder *)coder {
    array=[coder decodeObjectForKey:@"array"];
    return self;
}

- (NSData *)dataOfType:(NSString *)typeName error:(NSError **)outError
{
    return nil;
}

- (BOOL)readFromData:(NSData *)data ofType:(NSString *)typeName error:(NSError **)outError
{
    yourObject=[NSKeyedUnarchiver unarchiveObjectWithData:data];
    NSLog(@"array is ->%@",[yourObject array]);
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T05:17:34.837

当应用程序终止时，您需要使用`applicationDidEnterBackground`App Delegate 的事件来存储数组。

```
- (void)applicationDidEnterBackground:(UIApplication *)application 
{
   [[NSUserDefaults standardUserDefaults] setObject:nameList forKey:@"dataArray"];
} 
```

当您的 App 再次加载时，您需要使用`didFinishLaunchingWithOptions`App 委托的委托加载数据。

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   nameList = (NSMutableArray *)[[NSUserDefaults standardUserDefaults] objectForKey:@"dataArray"];
   if(!nameList)
   {
       //First time load or data is not saved yet
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:17:55.057

这个概念很简单。您正在创建类名称的对象，并在 UITableView 中显示它。当您创建一个对象并在 UiTableView 中显示它时，您使用的是内存地址，您只需从 NSMutableArray 获取活动对象，而您试图将对象保存在 NSUserDefaults 中，然后重新运行应用程序您什么也得不到，因为引用将被杀死，因此请保存放在您的类对象通知中的数据，字符串或字典..

# android - java.lang.RuntimeException：无法启动活动 ComponentInfo

> ID：15515834
> 
> 赞同：3
> 
> 时间：2013-03-20T05:10:03.870
> 
> 标签：android, calendar

我正在开发一个应用程序，我必须在其中创建一个`Lunar Calendar` 我正在创建一个自定义农历。农历上的代码非常有限。但不知何故，我设法创造了一个。这是我的代码。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        webView = (WebView)this.findViewById(R.id.wv);
         webView.loadUrl(contentUri);
       // webView.loadUrl("file://D:/Andro_WS_2/LunarCalendar/assets/calendar.html");

        mGestureDetector = new GestureDetector(this);
        webView.setOnTouchListener(this);
        try {
            Thread.sleep(1500);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }                  

        webView.loadUrl("javascript:pushBtm('MU')");  
        webView.loadUrl("javascript:pushBtm('MD')"); 

        if(!ConfigCenter.getValue(this, Constant.KEY_WIDGET_ADDED, false)){ 
                Toast.makeText(MainActivity.this, "Please Wait", Toast.LENGTH_LONG).show();
        }

    } 
```

当我运行这段代码时它崩溃了。我的错误 logcat 显示：

```
03-20 04:51:41.197: E/AndroidRuntime(967): FATAL EXCEPTION: main
03-20 04:51:41.197: E/AndroidRuntime(967): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.lunarcalendar/com.example.lunarcalendar.MainActivity}: android.view.InflateException: Binary XML file line #23: Error inflating class net.youmi.android.AdView
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.os.Looper.loop(Looper.java:137)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.app.ActivityThread.main(ActivityThread.java:5039)
03-20 04:51:41.197: E/AndroidRuntime(967):  at java.lang.reflect.Method.invokeNative(Native Method)
03-20 04:51:41.197: E/AndroidRuntime(967):  at java.lang.reflect.Method.invoke(Method.java:511)
03-20 04:51:41.197: E/AndroidRuntime(967):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-20 04:51:41.197: E/AndroidRuntime(967):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-20 04:51:41.197: E/AndroidRuntime(967):  at dalvik.system.NativeStart.main(Native Method)
03-20 04:51:41.197: E/AndroidRuntime(967): Caused by: android.view.InflateException: Binary XML file line #23: Error inflating class net.youmi.android.AdView
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-20 04:51:41.197: E/AndroidRuntime(967):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.app.Activity.setContentView(Activity.java:1881)
03-20 04:51:41.197: E/AndroidRuntime(967):  at com.example.lunarcalendar.MainActivity.onCreate(MainActivity.java:44)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.app.Activity.performCreate(Activity.java:5104)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-20 04:51:41.197: E/AndroidRuntime(967):  ... 11 more
03-20 04:51:41.197: E/AndroidRuntime(967): Caused by: java.lang.ClassNotFoundException: Didn't find class "net.youmi.android.AdView" on path: /data/app/com.example.lunarcalendar-2.apk
03-20 04:51:41.197: E/AndroidRuntime(967):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
03-20 04:51:41.197: E/AndroidRuntime(967):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-20 04:51:41.197: E/AndroidRuntime(967):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.view.LayoutInflater.createView(LayoutInflater.java:552)
03-20 04:51:41.197: E/AndroidRuntime(967):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
03-20 04:51:41.197: E/AndroidRuntime(967):  ... 21 more 
```

我的 XML 是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:umadsdk="http://schemas.android.com/apk/res/com.china.calendar"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/white"
    android:orientation="vertical" >

    <WebView
        android:id="@+id/wv"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <net.youmi.android.AdView
        android:id="@+id/ad"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:26:17.270

我认为您应该更改布局文件中的 adview 类。

除了将 adview 定义为`net.youmi.android.AdView`尝试`com.google.ads.AdView`在您的布局中定义它。

添加您`AdView`的如下：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" <!-- Change this line also -->
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/white"
    android:orientation="vertical" >

    <WebView
        android:id="@+id/wv"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <com.google.ads.AdView
        android:id="@+id/ad"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="your add id" />

</RelativeLayout> 
```

# ruby-on-rails - 为什么有时这仅在特定记录上不起作用？

> ID：15515840
> 
> 赞同：2
> 
> 时间：2013-03-20T05:10:58.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我做了一个交易来计算 current_user 的社区拥有多少成员，以及每个社区有多少成员。

如果其他注册用户在特定社区按“加入”。
用户将成为社区成员，社区所有者获得 1 分。

当然，当用户从社区中按下“退出”时，它会执行相反的操作。

我是这样编码的，到目前为止它工作得很好。
但是，我发现只有一个社区不接受此交易。
实际上，它会切换标志，但没有这些计算和计数事务。所以积分的数量和成员的数量不会改变：（看起来记录几乎被锁定了！

为什么会这样？就一张唱片！！

## 控制器

```
 if current_user.voted_up_on? @community
        current_user.dislikes @community

        #Calculate the points of the community's owner
        if @community.user
            @user = User.find(@community.user_id)
            @user.profile.total_point = Community.sum(:cached_votes_up, :conditions => ["user_id = ?", @user]) + @user.profile.bonus_point
            @user.profile.next_level = next_level_set(@user)
            @user.save
        end

        #count how many members the community has.
        @users =  User.where(:id => @community.likes.map(&:voter_id))
        @community.cached_votes_up = @users.count           
        @community.save

    else
        current_user.likes @community

        #Calculate the points of the community's owner
        if @community.user
            @user = User.find(@community.user_id)
            @user.profile.total_point = Community.sum(:cached_votes_up, :conditions => ["user_id = ?", @user]) + @user.profile.bonus_point
            @user.profile.next_level = next_level_set(@user)
            @user.save
        end

        #count how many members the community has.
        @users =  User.where(:id => @community.likes.map(&:voter_id))
        @community.cached_votes_up = @users.count           
        @community.save

    end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:45:12.400

我猜您正在尝试调用`save`，`@community`但由于某种原因未能保存，可能是验证错误。我建议检查 的结果`@community.save`，如果是`false`，请检查`@community.errors`验证错误。另请参阅有关该主题的[Rails 指南](http://guides.rubyonrails.org/active_record_validations_callbacks.html#working-with-validation-errors)。

# javascript - 获取与dojo中图表对象关联的图例的方法

> ID：15515844
> 
> 赞同：0
> 
> 时间：2013-03-20T05:11:17.790
> 
> 标签：javascript, charts, dojo

我想将图表及其图例下载为 pdf 文件。有没有办法使用 Dojo 图表中的图表实例获取与图表关联的图例。我对此进行了很多搜索，但几乎没有找到任何解决方案。

# sql - 等分的sql查询

> ID：15515848
> 
> 赞同：1
> 
> 时间：2013-03-20T05:11:55.000
> 
> 标签：sql, sql-server

我写了这个 sql 查询

```
update temp_calpoints1  
set perwet = (select perwet
              from process 
              where processid = temp_calpoints1.processid) 
```

截至目前，它为每个用户更新 10%，如下所示。

```
orderid            processid          uid            ordervalue            perwet
---------------------------------------------------------------------------------    
1                     1                1               10000              10
1                     1                2               10000              10
1                     1                3               10000              10
1                     2                1               10000              10
1                     2                2               10000              10
1                     3                1               10000              10 
```

我希望如果超过 1 个用户以相同的顺序参与 1 个进程，它应该平均分配百分比

这意味着它必须像这样插入

```
orderid        processid             uid         ordervalue          perwet
------------------------------------------------------------------------------    
1                    1                1               10000             3.33 
1                     1               2               10000             3.33
1                     1               3               10000             3.33
1                     2               1               10000             5.00
1                     2               2               10000             5.00
1                     3               1               10000            10.00 
```

任何的想法？

表结构

```
 CREATE TABLE [dbo].[temp_calpoints1](
     [orderid] [int] NULL,
     [processid] [int] NULL,
     [uid] [int] NULL,
     [ordervalue] [bigint] NULL,
     [perwet] [float] NULL
     ) ON [PRIMARY]

     CREATE TABLE [dbo].[process](
     [processid] [float] NULL,
     [processdesc] [nvarchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
     [perwet] [int] NULL
     ) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:16:24.540

```
update temp_calpoints1  set perwet = (select perwet/count(uid)
  from process 
  where 
  processid=temp_calpoints1.processid group by uid) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:17:52.220

```
update temp_calpoints1 set perwet = processcallpoints.perwet
from (select MAX(process.perwet) / COUNT(1) perwet from temp_calpoints1 inner join process on temp_calpoints1.processid = process.processid group by process.processid) processcallpoints 
```

顺便说一句，你不能有 3.33，因为列类型是 int，所以你会得到 3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T06:48:24.143

像这样的东西：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!3/a2631/2)**

```
UPDATE temp_calpoints1  
SET perwet = (SELECT p.perwet/(SELECT CASE WHEN count(*) = 0
                                      THEN 1 ELSE count(*) * 1.00  END
                             FROM temp_calpoints1 t2
                             WHERE t2.processid = temp_calpoints1.processid)
              FROM  process p 
              WHERE p.processid = temp_calpoints1.processid) 
```

结果：

```
| ORDERID | PROCESSID | UID | ORDERVALUE | PERWET |
---------------------------------------------------
|       1 |         1 |   1 |      10000 |   3.33 | 
|       1 |         1 |   2 |      10000 |   3.33 |
|       1 |         1 |   3 |      10000 |   3.33 | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T06:59:02.113

你可以试试这样

```
update t set perwet = ((select perwet from process where processid = t.processid)  
/(select count(uid) from temp_calpoints1 group by orderid,processid having processid = 
t.processid AND orderid=t.orderid )) from temp_calpoints1 t; 
```

[**SQL小提琴**](http://www.sqlfiddle.com/#!6/6ab51/19)

# php - 通过 PHP 将 MySQL 查询转换为 JSON 对象？

> ID：15515853
> 
> 赞同：-1
> 
> 时间：2013-03-20T05:12:20.127
> 
> 标签：php, mysql, json

我在修改 PHP 数组并将其转换为 JSON 对象时遇到问题；数组形式通过 MySQL 查询。

所需的 JSON 格式如下：

```
[{
    "id":101,
    "text":"Bank / Kas",
    "children":[{
        "id":101.1,
        "text":"Bank",
        "children":[{
            "id":101.11,
            "text":"Bank Bca",
            "children":[{
                "id":101.111,
                "text":"Bank Sayangan"
                }]
        },{
            "id":101.12,
            "text":"Bank BNI"
        }]
    },{
        "id":101.2,
        "text":"Kas",
        "state":"closed",
        "children":[{
            "id":101.21,
            "text":"Kas Besar"
        },{
            "id":101.22,
            "text":"Kas Kecil"
        }]
    }]
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:14:59.283

你应该使用[json_encode](http://php.net/manual/en/function.json-encode.php)来做到这一点：

```
$data = $table->fetchAll();
return json_encode($data); 
```

# android - Android 保存音频文件并在媒体播放器中显示

> ID：15515858
> 
> 赞同：3
> 
> 时间：2013-03-20T05:12:39.850
> 
> 标签：android, android-mediaplayer

我可以从互联网将音频文件下载到 sd 卡中，但下载的音频文件未显示在设备的默认媒体播放器中。我应该怎么做才能让它也被列在默认媒体播放器中

# node.js - 带有socketio的nodejs（express）

> ID：15515862
> 
> 赞同：0
> 
> 时间：2013-03-20T05:12:54.697
> 
> 标签：node.js, socket.io

在我的应用程序中，我使用的是 socketio 和 nodejs。我正在尝试实现简单的身份验证。如果用户被授权，我必须重定向到我的应用程序，否则我必须重定向到同一页面。我实现的示例代码是

```
<script>
     $(function(){    
        $('#join').click( function() {   
            var uname = $('#uname').val();
            alert(uname);
            socket.emit('news', uname);                             
            var pwd = $('#pwd').val();    
            socket.emit('pass', pwd);
        });
        });
</script> 
```

服务器代码是..

```
app.get('/', function(req, res){
      if(auth)
      {
          res.sendfile(__dirname + '/home.html');
      }
      else
      {
      res.send("hello user");
      }
});
io.sockets.on('connection', function(socket){   
      var uname;
      var pwd;    
    socket.on('news', function(data){       
    uname=data;
    console.log("the information i got is" + uname);
    });
    socket.on('pass', function(data){
    pwd=data;
    console.log("the information i got is" + pwd);      
    if ( uname==123 && pwd ==321)
    {
    auth=true;
    console.log("AUTHENTICATED USER");
    }
    });
    socket.on('disconnect', function(data){          
    });    
}); 
```

在控制台上我得到了这个

```
the information i got is123
the information i got is321
AUTHENTICATED USER 
```

但我面临的问题是如果用户授权它没有重定向到另一个页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:55:03.900

尝试将 url 发送到客户端并让客户端浏览器处理重定向...

这个怎么样？

客户：

```
 $(function(){    
        $('#join').click( function() {   
            var uname = $('#uname').val();
            alert(uname);
            socket.emit('news', uname);                             
            var pwd = $('#pwd').val();    
            socket.emit('pass', pwd);
            socket.on('url', function (data) {
            window.location.href=data;    
  });
        });
        }); 
```

服务器 ：

```
app.get('/', function(req, res){
      if(auth)
      {
          socket.emit('url', { msg: 'homePage' });  
      }
      else
      {
             socket.emit('url', { msg: 'hiPage' }); 
      }
}); 
```

注意：这只是一个示例代码，不是可执行的。

# orchardcms - AttributeRouting - 在程序集中获取路由的方法

> ID：15515863
> 
> 赞同：2
> 
> 时间：2013-03-20T05:12:57.813
> 
> 标签：orchardcms, orchardcms-1.6, attributerouting

我想将[AttributeRouting](http://attributerouting.net/)与 Orchard CMS 一起使用。为此，我需要`IRouteProvider`使用返回 Orchard 列表的方法来实现`RouteDescriptor`。

我需要一种获取路线列表的方法，以便可以执行以下操作：

```
 public IEnumerable<RouteDescriptor> GetRoutes()
    {
        return _routes ?? (_routes = MvcRouting.GetRoutes(GetType().Assembly).Select(route => new RouteDescriptor
        {
            ...
        }).ToArray());
    } 
```

此方法来自 MvcRouting 但我想使用功能更丰富的[AttributeRouting](http://attributerouting.net/)但找不到扫描当前程序集以查找路由属性的方法。需要一种 AttributeRouting 方法来返回我可以投射到 s 列表中`RouteDescriptor`但实际上不注册它们的路由列表，将其留给 Orchard。

```
 public class RouteDescriptor {
    public string Name { get; set; }
    public int Priority { get; set; }
    public System.Web.Routing.RouteBase Route { get; set; }
    public System.Web.SessionState.SessionStateBehavior SessionState { get; set; }
} 
```

如果我想直接注册路由（在非 Orchard 项目中），我会使用以下 AttributeRouting 扩展方法：

```
 routesCollection.MapAttributeRoutes(config =>
        {
            config.AddRoutesFromAssembly(Assembly.GetExecutingAssembly());
        } 
```

但这不适用于其他 Orchard 模块。所以需要采取上面的方法。

你能想到什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:06:32.987

正如 Bertrand 已经指出的，您需要的是对当前可用`Controller`类型的简单反映。

1.  `IRouteProvider`像你已经做的那样实施。
2.  `Controller`获取当前启用的模块导出的所有类型

    ```
    IExtensionManager _extensions;
    ShellBlueprint _shell;
    ...
    var types = _extensions
                    .LoadFeatures(_extensions.EnabledFeatures(_shell.Descriptor))
                        .SelectMany(feature => feature
                            .ExportedTypes
                            .Where(t => typeof(Controller).IsAssignableFrom(t))); 
    ```

3.  循环上述每种类型的方法并选择那些定义了给定属性的方法。对于选择的每个方法，获取其名称（动作名称）、包含其声明类型（区域名称）的程序集名称以及属性数据（路由模式等）。

4.  有了上面的集合，您可以简单地循环它并`new RouteDescriptor{ ... }`为每个集合返回。

# scala - 在 Scala 中使用 Neo4j

> ID：15515865
> 
> 赞同：12
> 
> 时间：2013-03-20T05:13:06.823
> 
> 标签：scala, neo4j

我是 Scala 和 Neo4j 的新手。我想使用 Scala 创建一个 Neo4j 数据库。是否有任何资源可以找到一些现成的代码来创建节点、删除节点、添加属性、创建索引等。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T10:16:18.393

实际上有几个选项取决于**（a）**您希望如何与 neo4j 通信（是否休息）**（b）**您的运行时环境。

当您的应用程序可以使用仅 REST 通信并且可以使用[ANORM](http://www.playframework.com/documentation/2.0/ScalaAnorm)访问您的（数据）时。有一个很有前途的驱动程序，目前足以使用 Cypher 作为请求语言来做很多事情。你可以在那里找到它（**AnormCypher**）：[https](https://github.com/AnormCypher/AnormCypher) ://github.com/AnormCypher/AnormCypher 。ANORM 的强大功能引起了很多争论，但我认为它有很多好的特性。

还有非常完整的 FaKod scala 驱动程序，第二个版本（现在是 M1）也将包含 REST 功能。这个驱动程序 ( [**neo4j-scala**](https://github.com/FaKod/neo4j-scala/) ) 的强大之处在于它提供了用于抽象遍历内部的干净 DSL，它非常直观且有据可查。

另一方面，我已经启动了我的[驱动程序](https://github.com/andypetrella/neo4j-rest-play-plugin)一段时间，但没有时间投入太多精力（很快就会改变）。当前版本仍然很粗糙，并且与播放应用程序紧密耦合。但是这个驱动程序尝试使用 amap 未来的反应性（现在基于 akka）和 play 的 json api。但是，由于缺乏文档和清洁，这种方式不会是最有效的......欢迎任何帮助;-)。这也是一个播放插件，非常容易配置和注入。

**有关驱动程序的更多信息，您应该去那里： http:** [//www.neo4j.org/develop/drivers](http://www.neo4j.org/develop/drivers)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T20:23:03.723

您可能想看看[gremlin-scala](https://github.com/mpollmeier/gremlin-scala)。它使用 Tinkerpop 堆栈，本质上类似于关系数据库的 JDBC。您可以将它与包括 Neo4J 在内的许多图形数据库一起使用。github 页面上有一些基本示例，[gremlin wiki](https://github.com/tinkerpop/gremlin/wiki)中有更多示例。

**免责声明**：我是 gremlin-scala 的维护者；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T19:40:59.150

看看[Renesca](https://github.com/renesca/renesca)，它允许您使用来自 Scala的**Neo4j REST API 。**您可以创建和修改节点和关系，并一次保留所有更改。

对于更高级的场景，请查看[Renesca-magic](https://github.com/renesca/renesca-magic)，它是 Renesca 之上的抽象层。它允许您用尽可能少的代码定义强大的**类型安全图形模式。**

一些亮点是：

*   属性的多重继承
*   HyperRelations（连接节点和关系）

免责声明：我是这些库的开发人员。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-30T22:58:18.267

Neotypes 仍在积极开发中[https://github.com/neotypes/neotypes](https://github.com/neotypes/neotypes) 与其他库集成，例如 Akka

# php - CodeIgniter 数据库检索问题

> ID：15515867
> 
> 赞同：2
> 
> 时间：2013-03-20T05:13:14.773
> 
> 标签：php, mysql, codeigniter

这是我第一次尝试在 CodeIgniter 中编写代码。问题是它无法从数据库中检索数据。它抛出的错误是：

```
A PHP Error was encountered

Severity: Notice

Message: Undefined property: Site::$db

Filename: core/Model.php

Line Number: 51 
```

我可以理解在`core/model.php`.

这是另一个错误：

```
 Fatal error: Call to a member function query() on a non-object in C:\wamp\www\CI_one\application\models\site_model.php on line 9 
```

### 控制器

```
<?php
    class Site extends CI_Controller {
        function datta(){
            $this->load->model('site_model');
            $get = $this->site_model->getValues();
            $data['get'] = $get;
            $this->load->view('data3',$data);
        }
    } 
```

### 模型

```
<?php
    class site_model extends CI_Model{

        function index(){
            echo "default index";
        }

        function getValues(){
            $query = $this->db->query("select * from nav_menu");

            if ($query->num_rows() > 0)
            {
               foreach ($query->result() as $row)
               {
                  echo $row->c1;
                  echo $row->m2;
                  echo $row->d3;
               }
            }
            return array(
                "name" => "nameless",
                "form" => "formless",
                "age"  => "ageless");
        }
    } 
```

我已经在`app/config/database.php`.

我该如何进行这项工作？

* * *

我自己解决了。我擦掉并重新编码如下以获得结果......

### 控制器

```
<?php
    class Site extends CI_Controller {
        function datta(){

            $this->load->database();
            $this->load->model('site_model');
            $get = $this->site_model->getValues();
            $data['get'] = $get;
            $this->load->view('data3',$data);
        }
    } 
```

模型为

```
<?php
    class site_model extends CI_Model{

        function index(){
            echo "default index";
        }

        function getValues(){
            $query = $this->db->query("select * from nav_menu");

            if ($query->num_rows() > 0)
            {
               foreach ($query->result() as $row)
               {
                  echo $row->c1;
                  echo $row->m2;
                  echo $row->d3;
               }
            }
            return array(
                "name" => "nameless",
                "form" => "formless",
                "age"  => "ageless");
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:23:25.743

在 Codeigniter 中，您必须手动加载数据库库，如下所示：

```
$this->load->database(); 
```

或者您必须按照 Sandip 的说明自动加载库。

在您的应用程序中，您可能需要自动加载多个库和帮助程序，因此最好不要手动加载它们，而是自动加载。请在此处阅读有关自动加载的信息。

[http://ellislab.com/codeigniter/user-guide/general/autoloader.html](http://ellislab.com/codeigniter/user-guide/general/autoloader.html)

另请阅读文档的其余部分，您将从那里了解有关 CI 的所有信息。它很简单，简洁并且有例子。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:17:29.190

请在 CodeIgniter 控制器中编写一个**构造函数：**

```
public function __construct() {
    parent::__construct();
} 
```

除此之外：

您必须先加载数据库库。在

自动加载.php：

```
 $autoload[‘libraries’] = array(‘database’); 
```

或者在控制器构造函数中为：

```
 $this->load->database(); 
```

我希望它会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:23:44.730

试试这个 ：

控制器 ：

```
<?php
class Site extends CI_Controller {
    function datta(){
        $this->load->database();
        $this->load->model('site_model');
        $get=$this->site_model->getValues();
        $data['get']=$get;
        $this->load->view('data3',$data);
    }
} 
```

# android - 将页脚视图添加到列表视图

> ID：15515868
> 
> 赞同：1
> 
> 时间：2013-03-20T05:13:15.830
> 
> 标签：android, android-layout, android-listview

朋友们。将页脚视图添加到列表视图时出现问题。我使用以下代码添加页脚视图。

```
TextView totalIncome = new TextView(this);
TextView totalExpense = new TextView(this);
totalIncome.setGravity(Gravity.CENTER);
totalExpense.setGravity(Gravity.CENTER);
totalIncome.setPadding(0, 5, 0, 5);
totalExpense.setPadding(0, 5, 0, 5);
totalIncome.setText("Total Income is : " + tIncome + "");
totalExpense.setText("Total Expense is : " + tExpense + "");
final ListView lv1 = (ListView) findViewById(R.id.ListView);
lv1.addFooterView(totalIncome);
lv1.addFooterView(totalExpense);
lv1.setAdapter(adapter); 
```

但是我的问题是在动态更改列表内容时，页脚视图会下降一些步骤。我不知道它为什么在移动。请朋友们帮帮我。

参考：

![在此处输入图像描述](../Images/aeae33c6c8638c6639d9fda9ef0eeef9.png)

更改内容后

![在此处输入图像描述](../Images/f4c1388da5cd370f2156445afa6eee80.png)

查看列表到footerview 好友之间的差距。我不想要这个空间。我试图在更改内容时删除footerview。但我不能。我通过互联网搜索了很多。但是我没有找到任何解决方案的朋友。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:48:49.060

我想您可以在更改列表视图的内容时尝试删除并读取页脚视图

去除 ：

```
lv1.removeFooterView(totalIncome);
lv1.removeFooterView(totalExpense); 
```

读

```
lv1.addFooterView(totalIncome);
lv1.addFooterView(totalExpense); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T06:04:39.787

**1.删​​除页脚视图**

有一种`ListView`去除的方法`FooterView`，

```
lv.removeFooterView(v); 
```

您只需要注意您*传递的是您添加的相同视图*，这意味着保存`totalIncome`和`totalExpense`textview 对象，使它们`static`和删除时传递相同。

**2.删除空间**

不确定，还在努力。

我想，一旦您将页眉/页脚设置为列表视图，然后将适配器设置为列表视图，页眉/页脚视图就会被放置在它们的位置，并且在修改列表内容时这些视图不会改变，*建议*：尝试删除和添加当您调用`notifyDatasetChanged`适配器的方法时再次查看。

# android - 如何在同一个视图中运行不同的活动

> ID：15515871
> 
> 赞同：3
> 
> 时间：2013-03-20T05:13:50.540
> 
> 标签：android, parent-child, subactivity

我正在使用以下项目

[https://github.com/akotoe/android-slide-out-menu.git](https://github.com/akotoe/android-slide-out-menu.git) 开发滑出菜单应用程序。

如何通过单击幻灯片菜单中的列表在同一视图中运行不同的活动。

![](../Images/133f4e2d9d6565fd171b746aad3c6a85.png)

例如，如果我单击项目 1，我想在单独的活动中解析一个 XML 文件，并将该活动作为子项添加到此父视图。因为在每个项目单击时，我想解析一个单独的 XML 文件，而且我也会喜欢在单独的布局文件中表示已解析的数据。所以我需要一个活动来执行此操作，并且我希望将该活动作为子项添加到此父视图中。

我怎么能做到这一点任何人都可以帮助我做到这一点。

如果我开始一个新的 Intent (startactivity)，它会导航到另一个页面。我看不到这个父页面的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T05:20:24.927

可以嵌入到 Activity 中的 UI 组件应该派生自 Fragment 而不是 Activity。将您的子活动转换为片段时，您需要覆盖 onCreateView 而不是 onCreate 以加载片段的布局。

在您的主要活动的布局中，您可以直接插入最初要显示的片段，并为该片段指定一个 ID。然后，您可以使用代码将具有该 ID 的片段替换为不同的片段。

这是一个入门的好地方：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

这是一个太大的话题，我无法涵盖所有​​内容 - 您确实应该查看 Android 开发人员资源 - 但这里有一些示例。

正如我所说，您可以将初始片段直接放入您的活动布局中。“片段”位于布局编辑器的“布局”选项卡上。您为该片段占位符提供一个“Id”，您可以使用它来识别它以及将要从那里开始的片段类的“名称”。

然后当需要切换片段时，您可以使用如下代码：

```
// Create new fragment and transaction
Fragment newFragment = new ExampleFragment();
FragmentTransaction transaction = getFragmentManager().beginTransaction();

// Replace whatever is in the fragment_container view with this fragment
transaction.replace(R.id.fragment_container, newFragment);

// Commit the transaction
transaction.commit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T05:21:02.197

您不能将活动嵌套在另一个活动中。但是您可以使用 Fragment instread。当单击该项目时，只需通过 FragmentManager 向右 Fragment 切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:42:15.890

**先检查这个答案**

**[如何为我的 Android 应用程序创建页眉或页脚按钮栏](https://stackoverflow.com/questions/7831044/how-do-i-create-a-header-or-footer-button-bar-for-my-android-application/7831387#7831387)**

* * *

您可以在您的项目中拥有一项 Master 活动，

说，`MainActivity.java`

在那个主要活动中为滑动菜单编写代码

```
@Override
    public void onCreate(Bundle inState) {
        super.onCreate(inState);

        mMenuDrawer = new MenuDrawerManager(this, MenuDrawer.MENU_DRAG_CONTENT,
                MenuDrawer.MENU_POSITION_RIGHT);

        mMenuDrawer.setContentView(R.layout.appui);
        mMenuDrawer.setMenuView(R.layout.slide_menu_ui);

    } 
```

在同一个活动中，*初始化您的菜单组件并为它们编写侦听器*。

现在，

在您的所有其他活动`extends`中`MainActivity`

你就完成了。！

# javascript - 内联 require() 在 requirejs 中工作，但不适用于优化的 almond 构建

> ID：15515872
> 
> 赞同：11
> 
> 时间：2013-03-20T05:13:50.697
> 
> 标签：javascript, backbone.js, requirejs, gruntjs, almond

正如标题所说，我的内联 require 调用在非优化的 requirejs 运行中工作，但在使用 grunt 和 almondjs 构建时不起作用。

```
Uncaught Error: undefined missing views/some/view 
```

任何文件的顶部可能是：

```
define(
['jquery', 'app'],
function($, App) { 
```

后来基于业务逻辑，我希望能够需要另一个文件

```
require(['views/some/view'], function(SomeView){
     console.log(SomeView);
}); 
```

我也尝试了替代语法：

```
var SomeView= require('views/some/view'); 
```

这一切都使用未构建的 requirejs 版本。但是当我用 grunt 和 almond 构建它时它又失败了

```
 requirejs: {
        compile: {
            options: {
                name: "../components/almond/almond", 
                baseUrl: "src",
                mainConfigFile: "./require.config.js",
                include: ['main'], 
                insertRequire: ['main'], // Add a require step in at the end for the main module.
                wrap: true, // Wrap everything up in a closure
                generateSourceMaps: true, // Experimental
                preserveLicenseComments: false, // Needs turned off for generateSourceMaps
                optimize: "uglify2", // Supports generateSourceMaps
                out: "assets/javascripts/build.js"
            }
        }
    }, 
```

如果我在定义调用中将它放在文件顶部，我可以让它在杏仁中正常工作，但是在 AMD 中保持精简不是更可取吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-30T03:17:13.057

根据 Almond 文档，它在非动态加载和打包到一个文件中的所有内容时效果最佳。

您应该能够在编译选项中将“findNestedDependencies”设置为 true，以确保您的内联 require 调用包含在构建中。

# sed - 搜索与 XML 标记内的模式匹配的文本

> ID：15515883
> 
> 赞同：0
> 
> 时间：2013-03-20T05:15:00.540
> 
> 标签：sed, awk, grep, unix

我有一个包含 XML 标签的文件。每行都有一个根元素和几个子元素。结构类似于这样

```
<document><title>some title1</title><abstract>Some abstract1</abstract></document>
<document><title>some title2</title><abstract>Some abstract2</abstract></document>
<document><title>some title3</title><abstract>Some abstract3</abstract></document>
<document><title>some title4</title><abstract>Some abstract4</abstract></document> 
```

现在我必须找到标签包含特定单词的所有行。`<abstract>`例如：获取标签内包含 abstract1 的所有行。

如何在 grep、awk 或 sed 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T05:24:55.987

使用 sed：

```
sed -n '/<abstract>[^<]*abstract1/p' input 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:22:57.387

更新：

```
 grep  -nir  "<abstract>.*word.*</abstract>" filename 
```

# java - 无法在 ValueStack 中打开或放置休眠会话：无法打开连接

> ID：15515886
> 
> 赞同：0
> 
> 时间：2013-03-20T05:15:21.020
> 
> 标签：java, mysql, eclipse, hibernate, struts2

我已经使用 struts 和 hibernate 创建了应用程序。在 Eclipse IDE 中运行应用程序时出现以下错误：

```
org.hibernate.SessionException: Error! Please, check your JDBC/JDNI Configurations and Database Server avaliability. 

 Could not open or put a Hibernate Session in ValueStack: Cannot open connection
    com.googlecode.s2hibernate.struts2.plugin.interceptors.SessionTransactionInjectorInterceptor.intercept(SessionTransactionInjectorInterceptor.java:134)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:468)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:76) 
```

有什么线索吗？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:18:03.057

您需要在我的 pom.xml 中添加 asm 和 cglib 的依赖项。您添加了吗？请检查一次。

例如[见这里](http://www.mkyong.com/struts2/struts-2-hibernate-integration-with-full-hibernate-plugin/)

# ios6 - 缩放地图时 GMSMarkerOptions 更改位置

> ID：15515887
> 
> 赞同：1
> 
> 时间：2013-03-20T05:15:24.870
> 
> 标签：ios6, annotations, google-maps-sdk-ios

我正在使用适用于 ios6 的 Google maps sdk 我已经能够成功添加地图绘制折线路径并添加标记注释。但是当我开始缩放地图时出现问题 GMSMarkerOptions 注释从原始位置稍微改变了它的位置有没有人遇到过同样的问题？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:03:24.833

设置标记的`groundAnchor`属性可在缩放期间将标记锚定到下方的地图上。

# kinect - 使用从面部跟踪基础获得的点使用 kinect 进行面部识别？

> ID：15515889
> 
> 赞同：1
> 
> 时间：2013-03-20T05:15:46.950
> 
> 标签：kinect

是否有任何算法人脸识别使用从微软给出的“人脸跟踪基础”中获得的点？

现在我正在使用下面的代码。但我没有得到正确的值

```
for (int i = 0; i < this.facePoints.Count - 1; i++)
{
  Total += ((facePoints[i].Y + facePoints[i+1].Y) / (facePoints[i].Y -facePoints   [i+1].Y));
 } 
```

# asp.net - 如何在网站 (ASP.NET) 中公开桌面应用程序服务？

> ID：15515890
> 
> 赞同：1
> 
> 时间：2013-03-20T05:15:47.427
> 
> 标签：asp.net

我没有 ASP 或 Web 开发经验。

我编写了一些桌面应用程序（C# .NET4.0），简单地转到一些数据源（如数据库）并显示该数据源保存的信息（根据一些输入）。

（在桌面应用程序中，GUI 在 MVVM 中工作）

我想使用这个应用程序并在一些网页上显示数据。应用程序输入是一些字符串 - 所以我也想从同一个网页“给出”这个输入。

所以据我所知..我需要将我的应用程序“放置”在某个服务器上并公开一些具有“网络功能”的新界面

这样对吗 ？怎么去呢？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:27:07.570

您有两个选项可以在您正在构建的新 Web 应用程序中使用该应用程序，或者开发一个新的 Web 服务来托管服务并被许多应用程序使用。选择是你的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T05:27:16.773

我认为您可以使用 Web 服务来实现这一目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T05:41:23.460

在启动您的网站之前创建另一个图层会更好

你将有两层

1.  **服务层**- 将连接到数据库和您的应用程序，这可以是普通的 ASP.NET Web 服务或 WCF（我推荐这个）。这将从您的用户界面层获取输入，并对数据库进行操作并将适当的响应返回给用户界面层

2.  **用户界面层**- 用户应用程序将出现在这里，这可以是 Web 应用程序、桌面应用程序、移动应用程序

> 您的用户界面永远不会直接连接到您的数据库，它将调用您已经为任何数据库操作创建的服务方法
> 
> *开始时有点额外的工作，但将来会减少很多工作。*

以下是一些可以帮助您入门的链接：

[http://www.asp.net/web-api](http://www.asp.net/web-api)

[http://msdn.microsoft.com/en-us/library/t745kdsh(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/t745kdsh(v=vs.90).aspx)

[http://msdn.microsoft.com/en-us/library/ms734712.aspx](http://msdn.microsoft.com/en-us/library/ms734712.aspx)

# javascript - 为什么在使用 indexedDB 时没有调用我的 onsuccess/onerror 回调？

> ID：15515902
> 
> 赞同：0
> 
> 时间：2013-03-20T05:16:54.757
> 
> 标签：javascript, html, indexeddb

我正在尝试创建一个登录表单。我在数据库中有一些用户名（对象）。我创建了一个表单，它接受提交的用户名（主键）并检查它是否在数据库中。但是，在信息通过我的 loginCheck() 方法后，页面只是刷新并且不运行成功或我设置调试的失败警报

JS：

```
//-------------USER DB------------------//
function startDB(){
    //sign in page elements
    logUser = document.getElementById('logUserName');
    logPass = document.getElementById('logPass');
    signin = document.getElementById('signin');
    signin.addEventListener('click',getLogin);

    //register page elements
    mainForm = document.getElementById('mainFormSidebar');
    mainForm.addEventListener('submit',addObject);
    fname = document.getElementById('fName');
    lName = document.getElementById('lName');
    users = document.getElementById('uName');
    pass = document.getElementById('password');
    email = document.getElementById('email');
    dob = document.getElementById('dob');
    phone = document.getElementById('phone');
    bio = document.getElementById('bio');
    terms = document.getElementById('terms');
    school = document.getElementById('school');
    gender = document.getElementsByName('gender');
    save = document.getElementById('save');
    reset = document.getElementById('reset'); 
    reset.addEventListener('click',clearForm);
    databox = document.getElementById('databox');

    //open DB
    var request = indexedDB.open('macroPlay'); 
    //if fails
    request.addEventListener('error', showerror); 
    //if succeeds
    request.addEventListener('success', start); 
    //if !exist, create.
    request.addEventListener('upgradeneeded', createdb); 

    //Create Admin account on launch

}
function showerror(e){
    alert('Error: ' + e.code + ' - ' + e.message);
}
function start(e){
    db = e.target.result;
    chkAdmin();
    showUsers();// Show all values in the object store
}
function createdb(e){
    var datababase = e.target.result;
    var myusers = datababase.createObjectStore('users', {keyPath: 'userName'});
}
function addObject(){
    if(confirm('Are you sure you want to resgister?')){
        var fName = document.getElementById('fName').value;
        var lName = document.getElementById('lName').value;
        var userName = document.getElementById('uName').value;
        var pass = document.getElementById('password').value;
        var email = document.getElementById('email').value;
        var dob = document.getElementById('dob').value;
        var phone = document.getElementById('phone').value;
        var bio = document.getElementById('bio').value;
        var terms = document.getElementById('terms').value;
        var school = document.getElementById('school').value;

        //May need to set a loop to find value of radio
        var gender;
        var radios = document.getElementsByName('gender');

        for (var i = 0, length = radios.length; i < length; i++) {
            if (radios[i].checked) {
                gender=radios[i].value;
            }
        }

        //set up transaction
        var mytransaction = db.transaction(['users'], "readwrite"); 

        //get object store
        var myusers = mytransaction.objectStore('users'); 

        //Add item
        var request = myusers.add(new getUser(userName,fName,lName,pass,email,dob,phone,bio,terms,school,gender));
    }

    // Show all results.
    mytransaction.addEventListener('complete', showUsers);  

    //Reset Form Fields
    resetForm();

}
function getUser(userName, fn, ln, pw, em, dob, tel, bio,tm, scl, gender){
    this.userName = userName;
    this.fn = fn;
    this.ln = ln;
    this.pw = pw;
    this.em = em;
    this.dob = dob;
    this.tel = tel;
    this.bio = bio;
    this.tm = tm;
    this.scl = scl;
    this.gender = gender;
}
function showUsers(){
    //reset box
    databox.innerHTML = ''; 
    //set the transaction 
    var mytransaction = db.transaction(['users']);
    //get object store
    var myusers = mytransaction.objectStore('users');
    //open the cursor and set an order
    var newcursor = myusers.openCursor(null,"prev");
    //show all users on successful load of DB
    newcursor.addEventListener('success',showUserList);
}
function showUserList(e){
    //var result = e.target.result;
    //databox.innerHTML = '<div>' + result.id + ' - ' + result.name + ' - ' + result.date + '</div>';
    var cursor = e.target.result; // Capture multiple return values as a cursor
    // Modify the databox to show the results 
    if (cursor){
   /*
        databox.innerHTML = '<div>' + 
           'Username'+ ' - ' + 
           'First'+ ' - ' + 
           'Last'+ ' - '+ 
           'Pass'+ ' - '+ 
           'Email'+ ' - '+ 
           'DOB'+ ' - '+
           'TEL'+ ' - '+ 
           'BIO'+ ' - '+ 
           'NEWS'+ ' - '+
           'TOS'+ ' - '+
           'SCL'+' - '+
           'Gender </div>';
   */

        databox.innerHTML += '<div>' + 
        cursor.value.userName + ' - ' + 
        cursor.value.fn+ ' - ' + 
        cursor.value.ln+ ' - '+ 
        cursor.value.pw+ ' - '+ 
        cursor.value.em+ ' - '+ 
        cursor.value.dob+ ' - '+
        cursor.value.tel+ ' - '+ 
        cursor.value.bio+ ' - '+ 
        cursor.value.tm+ ' - '+
        cursor.value.scl+' - '+
        cursor.value.gender+ 
        ' <input type="button" onclick="removeobject(\'' + cursor.value.userName + '\')" value="remove"/></div>';
            // Add a remove button as inserted HTML
        cursor.continue(); // Iterates over the cursor
    }
}
function removeobject(keyword){
    // Confirm the deletion
    if(confirm('Are you sure?')){ 
        // Set the transaction
        var mytransaction = db.transaction(['users'], "readwrite"); 
        // Get the object store
        var mystore = mytransaction.objectStore('users'); 
        // Delete the record with the chosen index
        var request = mystore.delete(keyword); 
        // If success, show the updated results
        mytransaction.addEventListener('complete', showUsers); 
    }
}

//reset functions
function clearForm(){
    //Clear form
    if(confirm('Clear all fields?')){
        resetForm();
    }
    showUserList();    
}
function resetForm(){
    //Reset form
    fname = document.getElementById('fName').value='';
    lName = document.getElementById('lName').value='';
    uName = document.getElementById('uName').value='';
    pass = document.getElementById('password').value='';
    email = document.getElementById('email').value='';
    dob = document.getElementById('dob').value='';
    phone = document.getElementById('phone').value='';
    bio = document.getElementById('bio').value='';
    nl = document.getElementById('nl').value='';
    terms = document.getElementById('terms').checked = false;
    school = document.getElementById('school').value='';
    gender = document.getElementsByName('gender').value='';
    showUserList();    
}

//------Create Admin Account-----//
function chkAdmin(){ 
     if(localStorage.getItem('admin')!="added"){             
        alert('Adding administrator Account');
        addAdmin();
    }
}
function addAdmin(){
    //set up transaction
        var mytransaction = db.transaction(['users'], "readwrite"); 
    //get object store
        var myusers = mytransaction.objectStore('users'); 
        var request = myusers.add(new getUser('admin','Shawn','Smith-Chao','admin'));  
        request.addEventListener('success',showUsers);   
    //Locally store that admin as been created  
        var admin = 'admin'; 
        var value = 'added';
        newItem(admin,value); 
}

//--------Retrieve User Date---------//
function getLogin(){
    alert('getLogin launched');
    var user = logUser.value;
    var pass = logPass.value;  
    alert('User: '+user+'  Pass: '+pass+"   sent to loginCheck");
    loginCheck(user,pass);
    alert ('user/pass checked');
}

function loginCheck(user,pass){
    var transaction = db.transaction(['users']);   
    var mystore = transaction.objectStore('users');  
    alert('User table opened');
    var request = transaction.get(user);
    alert('passed the get user request');
    request.onerror = function (event){
        alert("username does not exist");
    };
    request.onsuccess =function (event){
         alert('request was successful');
        /*alert("Welcome "+ request.result.userName);*/
        //run function populating all fields

    }
} 
```

我在 start(e) 函数中放置了一个警报，它似乎在显示用户/通行证的警报之后立即被调用。我环顾四周，我无法弄清楚是什么一直在调用它。

此外，如果我将 loginCheck 更改为此，警报会运行，并且代码会进一步发出警报（“用户/通过检查”）；但随后 start(e) 再次被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:20:23.580

indexeddb API 异步工作，这就是为什么警报不会按照您的想法显示的原因。因为 API 是异步的，这意味着所有其他代码将在您等待异步调用完成时执行。

# objective-c - 从 Obj-C 中的字符串中提取数字

> ID：15515905
> 
> 赞同：3
> 
> 时间：2013-03-20T05:17:09.207
> 
> 标签：objective-c, string, nsstring, normalization

我是 Objective-C 的新手，但在其他高级语言方面经验丰富。我想通过删除所有非数字字符来规范化字符串。换句话说，给定输入字符串“206-555-1212”，归一化结果应该是“2065551212”。下面的代码片段有效，但考虑到我在其他语言方面的经验，这似乎有点矫枉过正。有更好的方法吗？

**编辑：**输入字符串“(206) 555-1212”、“206.555.1212”、“206 555 1212”等也应该返回相同的标准化结果。

```
NSString * normalize(NSString * number)
{
    NSString *normalizedNumber = @"";
    NSString *tmpString = nil;

    NSRange searchRange;
    NSRange resultRange;
    searchRange.location = 0;
    searchRange.length = number.length;

    while (0 < searchRange.length)
    {
        resultRange = [number rangeOfCharacterFromSet:[NSCharacterSet decimalDigitCharacterSet]
                                        options:NSLiteralSearch
                                          range:searchRange];
        tmpString = [number substringWithRange:resultRange];
        normalizedNumber = [normalizedNumber stringByAppendingString:tmpString];
        searchRange.location = resultRange.location + resultRange.length;
        searchRange.length = number.length - searchRange.location;
    }

    return normalizedNumber;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T05:23:26.997

Resh32 在他们对类似问题[的回答中建议使用此代码：](https://stackoverflow.com/questions/1160403/iphone-sdk-remove-all-characters-except-for-numbers-0-9-from-a-string/13177885#13177885)

```
NSString * val = @"(555) 555-555 Office";
NSString * strippedNumber = [val stringByReplacingOccurrencesOfString:@"[^0-9]" withString:@"" options:NSRegularExpressionSearch range:NSMakeRange(0, [val length])];
NSLog(@"%@", strippedNumber); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T06:10:32.030

所有这些答案都没有解决问题的“删除所有非数字字符”部分。这是一个简单的方法：

```
NSString *normalize(NSString *number) {
    NSMutableCharacterSet *nonNumberCharacterSet = [NSMutableCharacterSet decimalDigitCharacterSet];
    [nonNumberCharacterSet invert];

    return [[number componentsSeparatedByCharactersInSet:nonNumberCharacterSet] componentsJoinedByString:@""];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T05:23:52.933

我有一个小帮手方法：

```
+ (NSString *)strip:(NSString *)str keep:(NSString *)chars {
    NSCharacterSet *cs = [NSCharacterSet characterSetWithCharactersInString:chars];
    NSMutableString *res = [NSMutableString stringWithString:str];
    for (int i = [res length] - 1; i >= 0; i--) {
        if (![cs characterIsMember:[res characterAtIndex:i]]) {
            [res deleteCharactersInRange:NSMakeRange(i, 1)];
        }
    }

    return res;
} 
```

可以这样调用：

```
NSString *cleanString = [UtilityClass strip:originalString keep:@"0123456789+*#"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T05:35:59.940

即使这个也可以：

```
NSString *s = @"234-1243-123";
NSString *ss=[[s componentsSeparatedByString:@"-"] componentsJoinedByString:@""]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T05:21:38.583

一种选择是创建一个 NSFormatter 子类来封装逻辑，或者使用开源的。[PhoneNumberFormatter](https://github.com/edgecase/PhoneNumberFormatter)看起来很有希望，并且可以让您删除格式，如下所示：

```
PhoneNumberFormatter *formatter = [[PhoneNumberFormatter alloc] init];
id objectValue;
NSError *error;
[formatter getObjectValue:&objectValue forString:@"1 (234) 567-8900" errorDescription:&error];
// objectValue = @"12345678900" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T06:05:59.790

这取决于您的具体目标。

如果您确实确定您的所有输入都将是 form ，这与[从字符串中删除所有空格](https://stackoverflow.com/questions/7628470/remove-all-whitespace-from-nsstring)（答案与已发布的答案相似）`xxx-xxx-xxxx`相同的基本问题，只是不是删除空格，而是删除字符. 总结：使用（在这种情况下有点过度杀戮，但可能足以代替下面的技术）。`-``-[NSString stringByReplacingOccurrencesOfString:withString:]``-[NSString componentsSeparatedByCharactersInSet:]``NSScanner`

如果您尝试使用任意格式清理电话号码，那么您使用的方法是合理的，但是使用 NSScanner 会稍微更惯用，如[“从 NSString 中删除除数字之外的所有数字”的答案](https://stackoverflow.com/questions/1129521/remove-all-but-numbers-from-nsstring)中所述。另请注意，如果您正在构建一个字符串（就像您的代码一样），使用 NSMutableString`-appendString:`而不是`-[NSString stringByAppendingString:]`.

[rmaddy 的](https://stackoverflow.com/a/15515978/1059264)方法在这里也是一个很好的方法，但需要注意的是，它作为 NSString 上的一个类别可能最有意义，其名称遵循 Apple 的约定。

请注意，这些技术都不会***验证***电话号码，只会天真地从字符串中提取 base-10 数字。

最强大的解决方案是使用某种形式的专用电话号码检测器（la Stuart 的链接[PhoneNumberFormatter](https://github.com/edgecase/PhoneNumberFormatter)）。

但是，如果您要做的是识别和提取电话号码而不必规范您的数据，Apple 提供了一个可以为此目的配置的类[NSDataDetector 。](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSDataDetector_Class/Reference/Reference.html)一个简单的示例如下所示：

```
NSError *error = nil;
NSDataDetector *detector = [NSDataDetector dataDetectorWithTypes:NSTextCheckingTypePhoneNumber error:&error];

if(!detector) {
   NSLog(@"Error creating phone number detector: %@", [error localizedDescription]);
   return;
}

NSString *phoneNumberString = @"(555) 555-5555";

NSArray *matches = [detector matchesInString:phoneNumberString
                             options:0
                               range:NSMakeRange(0, [phoneNumberString length])];

if([matches count] < 1) {
   NSLog(@"No phone numbers found!");
   return;
}

NSTextCheckingResult *match = [matches lastObject];
if([match resultType] != NSTextCheckingTypePhoneNumber) {
    NSLog(@"Matched something, but not a phone number!");
    return;
}

NSString *phoneNumber = [match phoneNumber];
NSLog(@"Matched phone number: %@", phoneNumber); 
```

# php - php quiz 网站没有携带会话变量

> ID：15515909
> 
> 赞同：0
> 
> 时间：2013-03-20T05:17:29.470
> 
> 标签：php, xml, session

我有一个 php 文件和一个 xml 文件。php 应该将 xml 解析为测验，但是每当我单击提交查询以输入我的答案选择时，会话变量不会继续存在。该页面应该刷新并为测验提供另一个问题。这是正确使用php吗？

```
 <!DOCTYPE html>
<?php

    session_start(); $_SESSION['qcorrect']; $_SESSION['quizno']; $_SESSION['qvar'] = 0;
    if (!isset($_SESSION['quizno'])){
        $_SESSION['quizno'] = 0;

    }
    if (!isset($_SESSION['qcorrect'])){
        $_SESSION['qcorrect'] = 0;
    }

    ?>
    <html>

    <head>
    <style>
    h1 { text-align:center; }
    p  { text-align:center; }

    </style>

     <title> Memequiz.net </title>

    </head>

        <body>

        <h1>Memequiz.net</h1>

        <div id = "image"  style = width:"500px" align = "middle">

    <?php   

            $xml = simplexml_load_file('firsquiz.xml');

            $question = ($xml -> question[$_SESSION['quizno']] -> ask);
            $correctans = ($xml -> question[$_SESSION['quizno']] -> correctanswer);
            $answer0 = ($xml -> question[$_SESSION['quizno']] -> answers -> answer[$_SESSION['qvar']] -> text);
            $answer1 = ($xml -> question[$_SESSION['quizno']] -> answers -> answer[$_SESSION['qvar']+1] -> text);
            $answer2 = ($xml -> question[$_SESSION['quizno']] -> answers -> answer[$_SESSION['qvar']+2] -> text);
            $answer3 = ($xml -> question[$_SESSION['quizno']] -> answers -> answer[$_SESSION['qvar']+3] -> text);

            echo "<img src = \"".$xml -> question[$_SESSION['quizno']] -> picture."\" alt = \"Meme\" width = \"400\" height = \"350\">";
            echo "<p><br>Question ".$_SESSION['quizno']."<p>Number Correct: ".$_SESSION['qcorrect']."</p><p>".$question."<br></p>";

            echo "<form action = \"\" method = \"get\">";

            echo "<table>";

            echo "<tr> <td> <input type = \"radio\" name = \"ans\" value = \"".$answer0."\"></td> <td>".$answer0."</td> </tr>";
            echo "<tr> <td> <input type = \"radio\" name = \"ans\" value = \"".$answer1."\"></td> <td>".$answer1."</td> </tr>";
            echo "<tr> <td> <input type = \"radio\" name = \"ans\" value = \"".$answer2."\"></td> <td>".$answer2."</td> </tr>";
            echo "<tr> <td> <input type = \"radio\" name = \"ans\" value = \"".$answer3."\"></td> <td>".$answer3."</td> </tr>";

            echo "</table>";

            echo "<input type = \"submit\" name = \"submit1\">";
            echo "<input type = \"submit\" name = \"refresh\">";

            echo "</form>";

            echo "You submitted: ";

            echo "<br><br><br>";
            echo "my xml file: ";

                if (isset($_GET['submit1'])){

                $_SESSION['quizno']++;

                if ($correctans == $_GET['ans']){ 

                    echo "Correct Answer!";
                    $_SESSION['qcorrect']++;

                }else{
                    echo "The wrong answer, try again!";

                }

                }

                if (isset($_GET['refresh'])){
                    $_SESSION['qcorrect'] = 0;
                     $_SESSION['quizno'] = 0;
                }

        ?>  

        </div>
    </body>

</html>

 XML file:

    <?xml version = "1.0"?>
    <quiz>
    <question>
        <ask>What is the name of the movie that this meme comes from?</ask>
        <correctanswer>Downfall</correctanswer>
        <picture>question1.jpg</picture>
        <answers>
            <answer>
                <text>Stalingrad</text>
            </answer>

            <answer>
                <text>Downfall</text>
            </answer>

            <answer>
                <text>Band of Brothers</text>
            </answer>

            <answer>
                <text>The Fuhrer</text>

            </answer>
        </answers>
    </question>

    <question>
        <ask>What is the name of this actor?</ask>
        <correctanswer>Bruno Ganz</correctanswer>
        <picture>question1.jpg</picture>
        <answers>
            <answer>
                <text>Bruno Ganz</text>
            </answer>
            <answer>
                <text>Ulrich Matthes</text>
            </answer>
            <answer>
                <text>Thomas Kretschmann</text>
            </answer>
            <answer>
                <text>Hans Funck</text>
            </answer>
        </answers>

    </question>

    <question>
        <ask>What is the name of the youtube account in which this first appeared in?</ask>
        <picture>questionn2.jpg</picture>
        <correctanswer>wzr0713</correctanswer>
        <answers>
        <answer>
            <text>wzr0713</text>
        </answer>
        <answer>
            <text>rerer434</text>
        </answer>
        <answer>
            <text>karetoshare</text>
        </answer>
        <answer>
            <text>blueberrypie573</text>
        </answer>

        </answers>

    </question>

    <question>
        <ask>What date did this picture first appear on the internet?</ask>
        <picture>questionn2.jpg</picture>
        <correctanswer>June 6 2012</correctanswer>
        <answers>
            <answer>
                <text>Aug 12 2011</text>
            </answer>
            <answer>
                <text>Oct 22 2010</text>
            </answer>
            <answer>
                <text>Aug 13 2011</text>
            </answer>
            <answer>
                <text>June 6 2012</text>
            </answer>
        </answers>
    </question>

    <question>
        <ask>This is a stock photo from which company?</ask>
        <correctanswer>Corbis Images</correctanswer>
        <picture>question3.png</picture>

        <answers>
            <answer>
                <text>Foter</text>
            </answer>
            <answer>
                <text>Getty Images</text>
            </answer>
            <answer>
                <text>Sipa Press</text>
            </answer>
            <answer>
                <text>Corbis Images</text>
            </answer>
        </answers>
    </question>

    <question>
        <ask>Which website did this meme originate from?</ask>
        <correctanswer>quickmeme</correctanswer>
        <picture>question3.png</picture>
        <answers>
            <answer>
                <text>memebase</text>
            </answer>
            <answer>
                <text>funnyjunk</text>
            </answer>
            <answer>
                <text>4chan</text>
            </answer>
            <answer>
                <text>quickmeme</text>
            </answer>
        </answers>
    </question>

    <question>
        <ask>What is the name of the comedy show in which this image first appeared?</ask>
        <correctanswer>Panic Face King</correctanswer>
        <picture>question4.jpeg</picture>
        <answers>
            <answer>
                <text>Takeshi Castle</text>
            </answer>
            <answer>
                <text>Panic Face King</text>
            </answer>
            <answer>
                <text>Spank the laugh</text>
            </answer>
            <answer>
                <text>The Big Moment</text>
            </answer>
        </answers>
    </question>

    <question>
        <ask>What is the name of the person above?</ask>
        <correctanswer>Ayumu Kato</correctanswer>
        <picture>question4.jpeg</picture>
        <answers>
            <answer>
                <text>Katashi Samosoro</text>
            </answer>
            <answer>
                <text>Konno Miko</text>
            </answer>
            <answer>
                <text>Ayumu Kato</text>
            </answer>
            <answer>
                <text>Nakamura Asuka</text>
            </answer>
        </answers>
    </question>

</quiz> 
```

# mootools - 使用 mootools 检索隐藏变量值

> ID：15515910
> 
> 赞同：1
> 
> 时间：2013-03-20T05:17:31.460
> 
> 标签：mootools

在我的jsp中，有一个隐藏的输入变量是这样的：

```
 <input type="hidden" name="servtype" id="serv_Type" value=noneFiOS TV> 
```

我在 mootools 中使用以下代码来检索值：

```
 var servtype = $("serv_Type").value;
 alert(servtype); 
```

警报仅显示**"noneFiOS"**而不是**"noneFiOS TV"**。这里有什么问题。任何人请提供解决方案来检索包括空格在内的整个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:35:00.750

您需要将值括在引号中：

`<input type="hidden" name="servtype" id="serv_Type" value="noneFiOS TV">`

# awk - 在 awk 程序中去除前导零

> ID：15515911
> 
> 赞同：3
> 
> 时间：2013-03-20T05:17:34.597
> 
> 标签：awk

所以我很迷茫，因为我错过了一周并且正在追赶，但我要编写一个 awk 程序来区分两个日期之间的天数。

我或多或少地完成了它，但是如果用户在进行数据验证时输入 01/01/YYYY，它不喜欢它。我将 3 个字段从 arg 中提取出来，然后将它们传递给一个函数进行验证。

在我的验证中，给我带来麻烦的部分是：

```
if ( day > Days[month] ){
invalid stuff here
} 
```

其中`Days[]`是包含 [1]=31、[2]=28（如果是跳跃则为 29）等的数组。

它命中是因为 Days[01] 没有定义。我可以通过将 [01] 定义为与我想的 [1] 相同的方法来绕过它，但我更喜欢更优雅的东西。

如何在 awk 程序中去除变量月份的前导零？我发现的所有内容都用于 shell 脚本并调用 awk，但这并没有真正帮助我。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T05:39:55.883

另外一个选项：

```
$ echo 01234 | awk '{x=$0+0;print x}'
1234 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T05:18:54.570

你需要这个，假设你的变量被调用`month`：

```
gsub ("^0*", "", month); 
```

是`^`起始锚点，`0*`表示零个或多个`0`字符。因此，这有效地删除`0`了变量开头的所有字符。

举例来说（这也显示了一种对*中间*数字进行操作的方法，在将日期分开之前，请参阅第二个`gsub`）：

```
pax> echo '1/1/2013
03/12/2014
02/02/1965' | awk '{gsub ("^0*", "", $0); gsub ("/0*", "/", $0); print}'

1/1/2013
3/12/2014
2/2/1965 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-22T12:35:46.140

我尝试了@paxdiablo 建议的答案。它最终也剥离了非前导零。

```
$ echo '20/02/1965' | awk '{gsub ("^0*", "", $0); gsub ("/0*", "/", $0); print}'
2/2/1965 
```

改用对我`sub`来说`gsub`效果很好。

```
$ echo '20/02/1965' | awk '{sub ("^0*", "", $0); sub ("/0*", "/", $0); print}' 
20/2/1965 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-22T16:43:32.607

最新的贡献有所缩短。

```
echo '20/02/1965' | awk '{sub ("/0", "/", $0)}1'
20/2/1965 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-18T16:13:17.637

对不起。我的回答不是关于 awk，而是关于 bash 本身。所以请不要给我的评论减分）

```
echo -e "00000000" | sed -r 's/^[0]*$/0/g' | sed -r 's/^0[0]+//g' 
```

或者使用 (( )) 符号执行整数计算

```
echo $((0000)) 
```

# windows - 在 Windows 7 的开始按钮上进行搜索的 API 是什么？

> ID：15515914
> 
> 赞同：1
> 
> 时间：2013-03-20T05:17:54.363
> 
> 标签：windows, api, search, full-text-search

像开始菜单按钮上可用的那样进行搜索的 API 是什么？它总是在 Windows 7 上可用吗？

# python - 关于Python函数教程中的斐波那契数列示例

> ID：15515920
> 
> 赞同：5
> 
> 时间：2013-03-20T05:18:33.777
> 
> 标签：python, fibonacci

这就是[他们](http://docs.python.org/2/tutorial/controlflow.html)所拥有的：

```
def fib(n):
    a, b = 0, 1
    while a < n:
        print a,
        a, b = b, a+b 
```

这就是我所拥有的：

```
def fib(n):
    a = 0
    b = 1
    while a < n:
        print a
        a = b
        b = b+a 
```

第一个在使用时返回正确的序列，而我的继续 0, 1, 2, 4, 8, 16, 32...

我目前正在学习编程（没有以前的计算机科学教育），很明显问题在于我如何定义我的变量。用逗号分隔变量和用新行分隔变量有什么区别（假设这是问题所在）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T05:29:41.737

这是一个元组赋值：

```
a, b = 0, 1 
```

你也可以把它想象成

```
(a, b) = (0, 1) 
```

使用值创建一个临时元组`0`，`1`然后将其解压缩到变量`a`中`b`

这也是一个元组赋值

```
a, b = b, a+b 
```

同样，您可以将其视为

```
(a, b) = (b, a+b) 
```

*临时元组是根据它们中的任何一个更新之前*的值创建`b`的。分配仅在创建临时元组*后发生。*`a+b`

 **通过将其分解为单独的步骤，您正在改变代码的含义。

让我们看看这里发生了什么

```
a, b = 0, 1        # a=0 , b=1
a, b = b, a+b      # a=1 , b=1 
```

与之比较

```
a = 0              # a=0
b = 1              # a=0 , b=1
a = b              # a=1 , b=1
b = b+a            # a=1 , b=2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T05:20:56.717

只有一个区别：

在第一个中，分配`b = b+a`是在修改之前完成的`a`。这是因为，在完成任何赋值之前，首先计算 RHS 中的表达式。

而在第二个中，第二个赋值是在修改`a`. 这就是为什么你看到错误的结果。

因此，在您的代码中：

```
b = b + a 
```

实际上是：

```
b = b + b 
```

因为`a`已经被赋予了 的值`b`。**

# sql - 执行查询时，具有特定月份和年份的存储过程不能作为输入参数...？

> ID：15515921
> 
> 赞同：0
> 
> 时间：2013-03-20T05:18:36.883
> 
> 标签：sql, sql-server

我在使用特定月份和年份作为输入边界创建存储过程时遇到问题。

我需要创建一个存储过程，称为`sp_products`列出在指定月份和年份订购的指定产品。产品名称、月份和年份将是存储过程的输入参数。显示表格中的产品名称、单价和库存单位，以及`Products`表格中的供应商名称`Suppliers`。使用以下查询来测试您的存储过程以生成下面列出的结果集。

```
EXEC sp_products '%tofu%', 'December', 1992

ProductName UnitPrice UnitsInStock Name
------------------------------ -------------- --------------- ----------------------------------- 
```

这是我编写的成功执行的查询的代码。

但是当我运行

```
EXEC sp_products '%tofu%', 'December', 1992 
```

我收到错误消息。

```
CREATE PROCEDURE sp_products
   (@product VARCHAR(40),
@month DATETIME = 'December',
@year DATETIME = 1992
   ) 
AS
   SELECT             
      P.ProductName, P.UnitPrice, P.UnitsInStock,
      S.Name
   FROM 
      Products P
   INNER JOIN 
      Suppliers S ON P.SupplierID = S.SupplierID 
   WHERE 
      P.SupplierID = @product 
```

需要帮忙.....！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:21:15.923

您可以在存储过程上连接模式，

```
CREATE PROCEDURE sp_products
(         
    @product VARCHAR(40),
    @month DATETIME,
    @year DATETIME
)
AS
SELECT  P.ProductName,
        P.UnitPrice,
        P.UnitsInStock,
        S.Name
FROM    Products P
        INNER JOIN Suppliers S 
            ON P.SupplierID = S.SupplierID 
WHERE   P.SupplierID = '%' + @product + '%'

GO 
```

执行过程，

```
EXEC sp_products 'tofu', 'December', 1992 
```

*追问：`@month`和`@year`参数有什么用？*

# gwt - FileUpload.getFilename() 返回不同的值

> ID：15515922
> 
> 赞同：-3
> 
> 时间：2013-03-20T05:18:37.893
> 
> 标签：gwt, file-upload

我有一个文件上传小部件。

```
FileUpload fileUpload = new FileUpload();

Window.alert(fileUpload.getFilename()); 
```

当我使用 firefox 在开发模式下运行时，它会提醒**filename.doc**

但是当我使用 chrome 在开发模式下运行时，它会提醒**C:]fakepath\filename.doc**

有人知道它的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:23:52.067

所有浏览器都应该隐藏文件名的实际路径，但它们以不同的方式隐藏。这没有标准。

基本上，您应该查找文件名中的最后一个斜杠或反斜杠字符（如果存在）并删除它之前的任何内容以获得“普通”文件名。

# php - CakePhp Auth 会话数据：点表示法不起作用

> ID：15515924
> 
> 赞同：0
> 
> 时间：2013-03-20T05:18:46.023
> 
> 标签：php, session, cakephp, authentication

如果我将以下代码添加到控制器操作并访问它：

```
debug($this->Session->read('Auth.User')); 
```

如果看到以下打印：

```
array(
    'User' => array(
        'password' => '*****',
        'username' => 'admin'
    )
) 
```

但是，如果我尝试使用点符号访问“用户名”：

```
debug($this->Session->read('Auth.User.username')); 
```

它返回空值。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:22:46.707

尝试这个 `debug($this->Session->read('Auth.User.User.username'));`

# ruby - 无法使用 rvm 安装 Ruby 2.0.0

> ID：15515928
> 
> 赞同：1
> 
> 时间：2013-03-20T05:18:59.003
> 
> 标签：ruby, macos, terminal, installation, rvm

我尝试安装 Ruby 2.0.0，`rvm install 2.0.0`这是我的输出：

```
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p392.
Continuing with compilation. Please read 'rvm mount' to get more information on binary   rubies.
Installing requirements for osx/10.8/x86_64, might require sudo password
Password:
DEBUG: Copying /Users/Family/Library/Preferences/com.apple.dt.Xcode.plist to      /opt/local/var/macports/home/Library/Preferences
DEBUG: MacPorts sources location: /opt/local/var/macports/sources/rsync.macports.org/release/tarballs
--->  Updating MacPorts base sources using rsync
receiving file list ... done

sent 36 bytes  received 69 bytes  70.00 bytes/sec
total size is 3594240  speedup is 34230.86
receiving file list ... done

sent 36 bytes  received 76 bytes  224.00 bytes/sec
total size is 512  speedup is 4.57
DEBUG: successful verification with key /opt/local/share/macports/macports-pubkey.pem
DEBUG: /usr/bin/tar -C   /opt/local/var/macports/sources/rsync.macports.org/release/tarballs/tmp -xf /opt/local/var/macports/sources/rsync.macports.org/release/tarballs/base.tar
MacPorts base version 2.1.3 installed,
DEBUG: Rebuilding and reinstalling MacPorts if needed
MacPorts base version 2.1.3 downloaded.
--->  Updating the ports tree
Synchronizing local ports tree from rsync://rsync.macports.org/release/tarballs/ports.tar
DEBUG: /usr/bin/rsync -rtzv --delete-after   rsync://rsync.macports.org/release/tarballs/ports.tar /opt/local/var/macports/sources/rsync.macports.org/release/tarballs
receiving file list ... done

sent 36 bytes  received 70 bytes  212.00 bytes/sec
total size is 55050240  speedup is 519341.89
DEBUG: /usr/bin/rsync -rtzv --delete-after      rsync://rsync.macports.org/release/tarballs/ports.tar.rmd160    /opt/local/var/macports/sources/rsync.macports.org/release/tarballs
receiving file list ... done

sent 36 bytes  received 77 bytes  226.00 bytes/sec
total size is 512  speedup is 4.53
DEBUG: successful verification with key /opt/local/share/macports/macports-pubkey.pem
DEBUG: /usr/bin/tar -C /opt/local/var/macports/sources/rsync.macports.org/release/tarballs/tmp -xf /opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports.tar
Creating port index in /opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports

Total number of ports parsed:   0 
Ports successfully parsed:  0 
Ports failed:           0 
Up-to-date ports skipped:   16692

--->  MacPorts base is already the latest version
DEBUG: Setting MacPorts sources ownership to root

The ports tree has been updated. To upgrade your installed ports, you should run
port upgrade outdated
Missing required packages: autoconf, automake, libtool, pkg-config, libiconv, libyaml, libffi, readline, libxml2, libxslt, libksba, openssl, curl-ca-bundle, sqlite3, zlib, ncurses, gdbm.
Installing Ruby from source to: /Users/Family/.rvm/rubies/ruby-1.9.3-p392, this may take a       while depending on your cpu(s)...
ruby-1.9.3-p392 - #downloading ruby-1.9.3-p392, this may take a while depending on your connection...
######################################################################## 100.0%
ruby-1.9.3-p392 - #extracting ruby-1.9.3-p392 to /Users/Family/.rvm/src/ruby-1.9.3-p392
ruby-1.9.3-p392 - #extracted to /Users/Family/.rvm/src/ruby-1.9.3-p392
ruby-1.9.3-p392 - #configuring..........
Error running './configure --prefix=/Users/Family/.rvm/rubies/ruby-1.9.3-p392 --disable-     install-doc --without-tcl --without-tk --enable-shared',
please read /Users/Family/.rvm/log/ruby-1.9.3-p392/configure.log
There has been an error while running configure. Halting the installation. 
```

我正在运行 mac osx Mountan Lion。如果我尝试安装 1.9.3，它会做同样的事情我的问题是什么，我该如何解决？我是 RVM 和 ruby​​ 的新手，所以这可能只是一个简单的错误。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T00:30:17.437

当我在我的 OS X Mountain Lion 上安装 Ruby 2.0 时，我必须确保首先安装了 OpenSSL。由于我使用的是 Homebrew，所以我之前要做的`brew install openssl`就是`rvm install 2.0.0`. 看起来您正在运行 Macports（我以前没有使用过），所以我想`sudo port install openssl`可能对您有用。

还尝试安装以下内容：`autoconf, automake, libtool, pkg-config, libiconv, libyaml, libffi, readline, libxml2, libxslt, libksba, curl-ca-bundle, sqlite3, zlib, ncurses, gdbm`- 它们在您提供的输出中被列为缺失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T07:15:44.807

通过接下来的步骤，我成功安装了 ruby​​-2.0.0-rc2。

```
brew update    
brew install libyaml libxslt sqlite
brew upgrade automake libksba openssl pkg-config
rvm get stable    
rvm autolibs enable
rvm install 2.0.0-p0 
```

# magento - 将现有属性添加到所有属性集

> ID：15515932
> 
> 赞同：8
> 
> 时间：2013-03-20T05:19:21.217
> 
> 标签：magento

我有一个嵌入代码的**现有**属性。我需要将此属性与 120 多个现有属性集相关联。

如果我知道属性集 ID，如何以编程方式将属性添加到所有属性集？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-20T18:28:18.897

我发现为这个问题编写代码很有趣，所以这是可行的解决方案:)

在包含 mage.php 的 php 脚本中运行此代码，并让我知道它是否运行良好。

> 将 ( firstname ) 替换为要批量添加到所有属性集的属性代码

```
 $attSet = Mage::getModel('eav/entity_type')->getCollection()->addFieldToFilter('entity_type_code','catalog_product')->getFirstItem(); // This is because the you adding the attribute to catalog_products entity ( there is different entities in magento ex : catalog_category, order,invoice... etc ) 
    $attSetCollection = Mage::getModel('eav/entity_type')->load($attSet->getId())->getAttributeSetCollection(); // this is the attribute sets associated with this entity 
    $attributeInfo = Mage::getResourceModel('eav/entity_attribute_collection')
        ->setCodeFilter('firstname')
        ->getFirstItem();
    $attCode = $attributeInfo->getAttributeCode();
    $attId = $attributeInfo->getId();
    foreach ($attSetCollection as $a)
    {
        $set = Mage::getModel('eav/entity_attribute_set')->load($a->getId());
        $setId = $set->getId();
        $group = Mage::getModel('eav/entity_attribute_group')->getCollection()->addFieldToFilter('attribute_set_id',$setId)->setOrder('attribute_group_id',"ASC")->getFirstItem();
        $groupId = $group->getId();
        $newItem = Mage::getModel('eav/entity_attribute');
        $newItem->setEntityTypeId($attSet->getId()) // catalog_product eav_entity_type id ( usually 10 )
                  ->setAttributeSetId($setId) // Attribute Set ID
                  ->setAttributeGroupId($groupId) // Attribute Group ID ( usually general or whatever based on the query i automate to get the first attribute group in each attribute set )
                  ->setAttributeId($attId) // Attribute ID that need to be added manually
                  ->setSortOrder(10) // Sort Order for the attribute in the tab form edit
                  ->save()
        ;
        echo "Attribute ".$attCode." Added to Attribute Set ".$set->getAttributeSetName()." in Attribute Group ".$group->getAttributeGroupName()."<br>\n";
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-31T12:40:32.420

对于上面的代码有问题的人，

like：在非对象上调用成员函数 getModelInstance()

您需要将以下内容添加到文件顶部：

```
include 'app/Mage.php';
Mage::app(); 
```

编辑：

我正在使用 magento 1.8.1.0 并且代码仍然无法正常工作

我必须将以下行添加到 $newItem，这样验证通过

```
 ->setAttributeCode($attCode) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-29T17:40:23.687

该函数`Mage_Catalog_Model_Resource_Setup::addAttribute()`可用于更新和添加属性。我觉得有用的另一件事是，如果您使用此功能指定一个组，它会自动分配给所有组。

```
$attributeCode = 'name'; // choose your attribute here
$setup = Mage::getResourceSingleton('catalog/setup');
$setup->addAttribute('catalog_product', $attributeCode, array(
    // no need to specify fields already used like 'label' or 'type'
    'group'      => 'General',
    'sort_order' => 10
)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-12T14:21:44.863

如果您使用的是外部脚本（而不是 magento 设置脚本），这项工作来自我

```
<?php
/// run in magento root
require_once 'app/Mage.php';
ini_set('display_errors', 1);
error_reporting(E_ALL);
Mage::app();

$attributeCode = 'my_attr_code';
$group = 'MyGroup';
$sortOrder = 10;

//this way you config the setup connections
$setup = new Mage_Catalog_Model_Resource_Setup('catalog_setup');

$setup->startSetup();
$setup->addAttribute('catalog_product', $attributeCode, array(
    'group'      => $group,
    'sort_order' => $sortOrder
)); 
```

（作为对@Eric的回答）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-05T13:39:26.817

不使用

```
Mage::getResourceSingleton('catalog/setup'); 
```

但是使用

```
Mage::getResourceModel('catalog/setup', 'catalog_setup'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-03T08:24:53.763

```
$attributeSets = Mage::getResourceModel('eav/entity_attribute_set_collection')
    ->setEntityTypeFilter('4'); // Catalog Product Entity Type ID
foreach ($attributeSets as $attributeSet) {
    $installer->addAttributeToSet(
        Mage_Catalog_Model_Product::ENTITY,   // Entity type
        $attributeSet->getAttributeSetName(), // Attribute set name
        'General',                            // Attribute set group name
        $yourAttributeCode,
        100                                   // Position on the attribute set group
    );
} 
```

# c# - 如何获取属性值

> ID：15515934
> 
> 赞同：0
> 
> 时间：2013-03-20T05:19:40.873
> 
> 标签：c#, html, html-agility-pack

我的 HTML 行是这样的

```
li a name="1:2" in die autem tertia apparuit homo veniens de castris Saul
veste conscissa et pulvere aspersus caput et ut venit ad David
cecidit super faciem suam et adoravit

```

我希望输出为

```
1:2 in die autem tertia apparuit homo veniens de castris Saul
veste conscissa et pulvere aspersus caput et ut venit ad David
cecidit super faciem suam et adoravit

```

现在我得到的输出为

```
in die autem tertia apparuit homo veniens de castris 扫罗
veste conscissa et pulvere aspersus caput et ut venit ad David
cecidit super faciem suam et adoravit

```

号码不见了

我正在使用这个条件：

```
foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//li"))
{
    //coding
} 
```

我将 HTML 内容存储在 SQLite 数据库中。

如何获取属性的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:30:36.003

用于`GetAttributeValue`获取*name*属性的值：

```
foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//li")){

    string liName = node.GetAttributeValue("name", ""));

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:49:44.277

您必须使用 GetAttributeValue 来获取值。

# php - GD Text to Image 产生奇怪的输出

> ID：15515936
> 
> 赞同：1
> 
> 时间：2013-03-20T05:19:51.307
> 
> 标签：php, image, gd

我有一些 GD/PHP 代码试图从字符串（保存在 PHP 变量中）创建图像。虽然输出很奇怪..

这是代码：（看起来开始时有一堆空白，但那是因为我缩进在这里插入它，我仍然不明白如何正确使用Stackoverflow的代码插入功能：/在我的实际代码中有没有这种过多的空格。

```
<?php 
        session_start(); 

        //If user is not logged in
        if(!isset($_SESSION['username']))
        {
            //They aren't meant to be able to access this page. GET THEM OUT OF HERE!
            echo "<script language=\"javascript\">top.location=\"index.php\";</script>";
            echo "<script language=\"javascript\">alert('You need to be logged in to access this page.');</script>";
        }   else
            {

                //Localise.
                $username = $_SESSION['username'];

                //Include important settings and functions.
                include($_SERVER['DOCUMENT_ROOT'] . '/includes/config.php');

                //Connect to MySQL Database.
                include($_SERVER['DOCUMENT_ROOT'] . '/includes/connect.php');

                //Let's get the users id.
                $sql = "SELECT * FROM `users` WHERE `username` = '$username'";
                $result = mysql_query($sql) or die(mysql_error());
                if(mysql_num_rows($result))
                {
                    $userarray = mysql_fetch_array($result) or die(mysql_error());  
                    $userid = $userarray['id'];
                }
            }

        if(!$_GET['i'] || $_GET['id'] != '95dd76e1099af307a37804ecb4d820bd' || $_GET['arid'] != 'b691362f280e16e9a5136d1623ac8156')
        {
            echo "<script language=\"javascript\">alert('There was an error with your request.');</script>";
            echo "<script language=\"javascript\">top.location=\"members.php\";</script>";
        }   else
            {
                //Decode and localise.
                $articletitle = urldecode($_GET['i']);  
            }
    ?>
    <!DOCTYPE html>
    <!--[if IE 7 ]>    <html class="ie7 oldie"> <![endif]-->
    <!--[if IE 8 ]>    <html class="ie8 oldie"> <![endif]-->
    <!--[if IE 9 ]>    <html class="ie9"> <![endif]-->
    <!--[if (gt IE 9)|!(IE)]><!--> <html> <!--<![endif]-->

    <head>

        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <meta charset="utf-8"/>
        <meta name="description" content="">
        <meta name="author" content="">

        <title>5StarWriters</title>

        <link rel="stylesheet" type="text/css" media="screen" href="css/style.css" />

        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/jquery-1.6.1.min.js"><\/script>')</script>

        <script src="js/scrollToTop.js"></script>

    </head>

    <body id="top">

    <!--header -->
    <div id="header-wrap"><header>

            <hgroup>
            <h1><a href="index.html">5StarWriters</a></h1>
            <h3>Quality content, fast.</h3>
        </hgroup>

            <?php include($_SERVER['DOCUMENT_ROOT'] . '/includes/navlogged.php'); ?>

            <!-- Login bar can go here -->

    <!--/header--> </header></div>

    <!-- content-wrap -->
    <div id="content-wrap">

        <!-- content -->
        <div id="content" class="clearfix">

            <!-- main -->
            <div id="main">
                <?php
                    $sql = "SELECT `id` FROM `articles` WHERE `title` = '$articletitle'";
                    $result = mysql_query($sql) or die(mysql_error());
                    $array = mysql_fetch_array($result) or die(mysql_error());
                    $articleid = $array['id'];

                    $sql2 = "SELECT * FROM `pendingreview` WHERE `requestid` = '$userid' AND `articleid` = '$articleid'";
                    $result2 = mysql_query($sql2) or die(mysql_error());
                    //unset($array); //Clear variable data.
                    $array = mysql_fetch_array($result2); //Lets reload it with some more useful data.

                    //$sql = "SELECT * FROM `pendingreview` WHERE `requestid` = '$userid' AND ";
                    //$result = mysql_query($sql) or die(mysql_error());
                ?>
                <center><h1>Pending Review<h1></center>
                <br />
                <center>

    <?php
    $text="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.";

    $arrText=explode("\n",wordwrap($text,75,"\n"));//change number 75 here to check the wordwrap

    $im = @imagecreate(700,500); //creates an image (width,height)
    $background_color = imagecolorallocate($im, 0, 0, 0); //sets image background color
    $y=5; //vertical position of text
    foreach($arrText as $arr)
    {
      $white=imagecolorallocate($im,255,255,255); //sets text color
      imagestring($im,5,15,$y,trim($arr),$white); //create the text string for image,added trim() to remove unwanted chars
      $y=$y+15;

    }
    header("Content-type: image/png");
    imagepng($im);
    imagedestroy($im);
    ?>

                </center>
                <br /><br /><center>
                </center>
                <br /><br /><br /><br />
            <!-- /main -->
            </div>

            <!-- sidebar -->
            <div id="sidebar">

                <div class="about-me">
                        <!-- SIDEBAR CONTENT HERE -->
                </div>

                <div class="sidemenu">

                    <!-- Extra sidebar content -->
                </div>

            <!-- /sidebar -->
            </div>

        <!-- content -->
        </div>

    <!-- /content-out -->
    </div>

    <!-- footer -->
    <?php include($_SERVER['DOCUMENT_ROOT'] . '/includes/footer.php'); ?>
    </body>
    </html> 
```

这是输出：

> �PNG IHDR����PLTE���������������������������������������������� ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ������������������������������������������������������ ����������������������= IDATx��X ��44�,�BB @������'��K]G��53 /Qa�-�Q]]��;MÆ 6lذaÆ 6lذaÆ 6�S�/������)��,����z�z_�Ό��H�<3�rc��w!|=�m�>n���� n�x��As�9�uxֈ�M?�����R&... �R����&��/0j-������L _3�zW�QN�;�f#��t�x����D$Ž�<�(�#�<� C�yL�_p���L�6y�X��X�G�qC��}��&��ej��(#ː�j��H�5[����xX�vT,1 �m"�e��5���c%ak��ra4�)��z�[f�#^#xE�'�7�;��W)V����� ӡޛ�!' =U�SN����[�� �1ċW�m��7��c�o��&�N�i7-�T��'���Q�tz�x+�R�)�/� H�噼��a�W��u�[�"LID��[��ͨ0%�N|��@f�<code>J:�v�P���N�E�& ��/��E��"��v4*8�[���4��4�5Q�g����ב+��$J9䢺�C�-4h��Y�|ыGI� /���R'�a7(�%R��l�:�v�]y$I���w�1 �Iۮy�Ǿ/�͞iW|o�.�x,�e��5����c%ak��ra4�)��z�[f�#^#xE�'�7�;��W)V�����ӡޛ�!�=U� SN���[����1ċW�m��7��c�o��&�N�i7-�T��'���Q�tz�x+�R�)�/�H��� 呲呲呲呲[�"LID��[��ͨ0%�N|��@f�<code>J:�v�P���N�E�&��/ ��E��"��v4*8�[����4��4�5Q�g����ב+��$J9䢺�C�-4h��Y�|ыGI�/�� �R'�a7(�%R��l�:�v�]y$I���w�1 �Iۮy�Ǿ/�͞iW|o�.�x,�e��5����c%ak��ra4�)��z�[f�#^#xE�'�7�;��W)V�����ӡޛ�!�=U� SN���[����1ċW�m��7��c�o��&�N�i7-�T��'���Q�tz�x+�R�)�/�H��� 呲呲呲呲[�"LID��[��ͨ0%�N|��@f�<code>J:�v�P���N�E�&��/ ��E��"��v4*8�[����4��4�5Q�g����ב+��$J9䢺�C�-4h��Y�|ыGI�/�� �R'�a7(�%R��l�:�v�]y$I���w�1 �Iۮy�Ǿ/�͞iW|o�.�x,`��y��6lذa�&gt;u{�bc�G;��6<�(�����Wխ��N�M���cWⓚX���~�x[�:Ļ�q�xW��hkuM�FX��K�k ���/�5vC�^?��? �˚�8Ͼ��DU��E)F����n���������3 �G��JةlPQ�z[�9",w�B�Qu���|�4�%Բr:{��*�����T���l����9'>p���MT�$S�5��K6Vj��r�����X�����\ˎLJ�x���a%6+M�V��(�Qsj�Db�����!$��]a f�,�m���9N���������ר�&�� f o��x>T�aE�����K'nǔ�ɦ��2v1�5��"N"<ŋ��i�1��*b�9�F�\Hx��u�V"��E�j��Y����d�F�o(I滦��� �s���"�(ن��Ju� ��j h`?y��^�k�~�"�������ؾ�"�H Ah�k���1y]�@]Qu�x��7_�ӹ�=

还有更多的输出，发布时间太长了。

我不知道发生了什么：/任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:29:13.330

如果您正确复制粘贴代码，那么您的代码中有前导空格：

```
 <?php
^^^^^^^^^^^^ 
```

去掉它; 否则，空白将成为 PNG 输出的一部分，因此会导致“损坏”的图像。

# 编辑

现在您已经发布了完整的代码：您正在将 PHP 代码与图像的二进制数据混合；它不是那样工作的。将生成图像的代码移动到单独的文件中，例如`article-image.php`，然后在指向该文件的主 HTML 中添加图像标签，例如：

```
<img src="article-image.php?id=1"> 
```

# javascript - 如何使用javascript将元素包裹在字符周围

> ID：15515937
> 
> 赞同：0
> 
> 时间：2013-03-20T05:19:53.323
> 
> 标签：javascript, jquery

我想在元素中的一些字符周围包裹一个跨度。

例如： `<div>Some random string</div>;`

然后如果javascript随机选择“随机”中的“m”和字符串中的“r”。我希望它变成这样： `<div>Some rando<span>m</span> st<span>r</span>ing</div>`

如果没有 jQuery 的替换，我将如何做到这一点？

本机替换不会更改原始字符串，只需用修改后的字符串覆盖原始字符串即可删除元素的其他样式。我也用 insertNode 进行了调查，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:49:30.447

这有帮助吗：

我生成`2 random numbers`然后用 span 包装它们并得到你想要的结果。

[http://jsfiddle.net/Gkkbb/2/](http://jsfiddle.net/Gkkbb/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:49:58.613

如果您只在 innerHTML 中*添加*span 标签，则所有样式都应该保留（除非您有您关心的子元素）。

假如说：

*   您的 div 中没有子元素
*   文本内容本身是 html 安全的
*   您有办法找到要包装的字符的索引

（在您的示例中，所有假设似乎都是正确的）

您可以转换原始字符串并使用 .html() 重新注入

由于我不知道你*如何*选择你关心的索引，我把它留给你，但是，再次在陈述的假设内，你可以这样做：

```
var my_div = $('some_selector_goes_here');
var original = my_div.text();

var indexes = find_the_indexes(original);

var updated = '', cur_idx = 0;
for (var idx=0; idx<indexes.length; idx++)
{
    var index = indexes[idx];
    updated += original.substr(cur_idx, index);
    updated += '<span>' + original.charAt(index) + '</span>';
    cur_idx = index + 1;
}
updated += original.substr(cur_idx);

my_div.html(updated); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:52:58.713

请参阅此示例..根据需要进行编辑..

```
<div id='div'>Some random string</div>

<script>
var div = document.getElementById('div');
var OurString = div.innerHTML.split(' '); // array containing words of div
var StringToFind = 'random',CharToFind = 'm';
var span = document.createElement('span');
div.innerHTML = '';
for(var i=0;i<OurString.length;i++)
{
if(StringToFind == OurString[i])
{
div.innerHTML += OurString[i].substring(0,OurString[i].indexOf(CharToFind));
div.appendChild(span);
span.innerHTML = CharToFind;
div.innerHTML += OurString[i].substring(OurString[i].indexOf(CharToFind) + 1,OurString[i].length);
}
else
div.innerHTML += OurString[i];
div.innerHTML = ' ';
}
</script> 
```

# c# - 在 oracle 查询中添加日期参数

> ID：15515938
> 
> 赞同：2
> 
> 时间：2013-03-20T05:19:55.460
> 
> 标签：c#, sql, visual-studio-2010, oracle, oracle11g

我要做的是在两个日期之间执行查询，日期将来自一个参数。

在下面的代码中，我放置了一个参数并让第二个日期固定为示例目的。

将代码/查询粘贴在这里有点长，但这是一个简短的版本：

```
OracleParameter fromDateParameter = new OracleParameter();
fromDateParameter.OracleDbType = OracleDbType.Varchar2;
fromDateParameter.Value = "'3/06/2013 20:00:00'";

this.oracleDataAdapter4.SelectCommand = new OracleCommand("
   SELECT DISTINCT (LOG.RID) FROM LOG WHERE LOG.TIMESTAMP 
   BETWEEN TO_DATE(:fromDateParameter, 'MM/DD/YYYY hh24:mi:ss ') 
   AND TO_DATE('3/06/2013 23:59:00', 'MM/DD/YYYY hh24:mi:ss '))", 
   oracleConnection4);

oracleDataAdapter4.SelectCommand.Parameters.Add(fromDateParameter);           
this.oracleDataAdapter4.Fill(event11); 
```

我收到了这条消息：

> ORA-01858: 在需要数字的地方发现了一个非数字字符

我在没有参数的情况下做了同样的查询，它工作得很好。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:29:00.683

我没有找到使用 Varchar2 数据类型的方法。所以，我使用日期数据类型给出答案。

```
if (dateTo.Minute > 30)
   minToInt = 30;
else
   minToInt = 00;

dateFrom = DateTime.Now;
dateTo = DateTime.Now;     

DateTime dateFrom = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, dateFrom.Hour, 00, 00);
DateTime dateTo = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, dateTo.Hour, minToInt, 00);

////////FROM DATE/////////
OracleParameter fromDateParameter = new OracleParameter();
fromDateParameter.OracleDbType = OracleDbType.Date;
fromDateParameter.Value = dateFrom;

////////TO DATE/////////
OracleParameter toDateParameter = new OracleParameter();
toDateParameter.OracleDbType = OracleDbType.Date;
toDateParameter.Value = dateTo;

this.oracleDataAdapter4.SelectCommand = new OracleCommand("
   SELECT DISTINCT (LOG.RID) FROM LOG WHERE LOG.TIMESTAMP 
   BETWEEN :fromDateParameter 
   AND :toDateParameter)", oracleConnection4);

oracleDataAdapter4.SelectCommand.Parameters.Add(fromDateParameter);           
oracleDataAdapter4.SelectCommand.Parameters.Add(toDateParameter);  
this.oracleDataAdapter4.Fill(event11); 
```

* * *

不要与 if/else 分钟验证混淆，这只是为了我的查询目的。

# asp.net - 自动回发属性不适用于选项卡容器

> ID：15515939
> 
> 赞同：1
> 
> 时间：2013-03-20T05:20:03.437
> 
> 标签：asp.net, c#-4.0, globalization, tabpanel, tabcontainer

我正在我的酒店管理系统门户网站上应用全球化，但我遇到了一个问题。我的问题是我有一个包含英语和西班牙语两种语言的下拉列表，我设置了 autopostback="true" 所以从下拉列表中我选择了西班牙语我的网页通过调用下面的方法成功地将英语转换为西班牙语

```
 protected override void InitializeCulture()
        {

            if (Request.Form["ctl00$contentplaceholder1$language_drp"] != null)
            {

                UICulture = Request.Form["ctl00$contentplaceholder1$language_drp"];
            }

            base.InitializeCulture();
        } 
```

因为我已经将 autopostback 属性设置为 true，所以这个函数被成功调用。我也有编辑控件，我可以用西班牙语或英语编辑我的酒店详细信息，我已经使用标签容器来保存所有酒店信息。但是当我单击编辑时，我的页面没有回复为 true，这就是为什么我无法调用 iniliaze 文化方法，这就是为什么我的页面语言无法转换的原因。我在 tabcontainer 中应用了 autopostback 属性 true 但失败了。在标签容器中，我有标签面板。这是我的代码

```
<asp:TabContainer ID="TabContainerHotelDetails" runat="server" AutoPostBack="true"  
            Width="100%" OnLoad="TabContainerHotelDetails_Load">
            <asp:TabPanel runat="server"  HeaderText="General" ID="TabGeneral" >
                <ContentTemplate>
                    <asp:Panel ID="PanelInfo" runat="server"  Width="100%" GroupingText="<%$ Resources:Resource, LocalizedInformation %>">
                        <table width="100%" border="0" cellpadding="0" cellspacing="0">
                            <tr>
                                <td width="20%">
                                    <table width="100%" border="0" cellpadding="0" cellspacing="0">
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="metaHotelName" runat="server" Text="<%$ Resources:Resource, LocalizedHotelName %>"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="metaHotelStatus" runat="server" Text="<%$ Resources:Resource, LocalizedStatus %>"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="metaMemberShip" runat="server" Text="<%$ Resources:Resource, LocalizedMemberShipType %>"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="metaUserName" runat="server" Text="<%$ Resources:Resource, LocalizedUserName %>"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="metaEmail" runat="server" Text="<%$ Resources:Resource, LocalizedEmail %>"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="metaTotalPoint" runat="server" Text="<%$ Resources:Resource, LocalizedTotalPoint %>"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="metaRegistrationDate" runat="server" Text="<%$ Resources:Resource, LocalizedRegisteredDate %>"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="metaLastLogin" runat="server" Text="<%$ Resources:Resource, LocalizedLastLogin %>"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="metaEmailActivated" runat="server" Text="<%$ Resources:Resource, LocalizedEmailActivated %>"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="metaLockedOut" runat="server" Text="<%$ Resources:Resource, LocalizedLockedOut %>"></asp:Label>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td width="5%" style="border-right: 1px dotted black;">
                                </td>
                                <td>
                                    <table border="0" cellpadding="0" cellspacing="0" style="padding-left: 10px;">
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="lblHotelName" runat="server"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="lblStatus" runat="server"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="lblMembershipType" runat="server"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="lblUserName" runat="server"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="lblEmail" runat="server"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="lblTotalPoints" runat="server"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="lblRegisteredDate" runat="server"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:Label ID="lblLastLogin" runat="server"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:CheckBox ID="chkEmailActivated" runat="server" OnCheckedChanged="chkEmailActivated_CheckedChanged"
                                                    AutoPostBack="True" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="padding-top: 10px; height: 30px;">
                                                <asp:CheckBox ID="chkLockedOut" runat="server" OnCheckedChanged="chkLockedOut_CheckedChanged"
                                                    AutoPostBack="True" />
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>
                    </asp:Panel> 
```

有什么方法可以轻松做到这一点或替代方法，以便在单击编辑后调用我的 iniliizeculture 方法。请帮忙，因为我对堆栈溢出很陌生。我实际上不知道发布问题的好方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:32:46.020

您可以使用网络方法来初始化文化。为此，您必须最初创建将在您单击编辑选项卡时调用的 javascript 方法，并且从该脚本中您可以调用页面级 Web 方法来初始化文化。希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:56:14.863

经过两天的搜索，我在这里找到了答案。答案很简单：）

我将我的语言的值设置为 UICulture

```
protected override void InitializeCulture()
        {
            if (Request.Form["ctl00$contentplaceholder1$language_drp"] != null)
            {

                UICulture = Request.Form["ctl00$contentplaceholder1$language_drp"];
            }
            if (Request.QueryString["HotelID"] != null)
            {

                this.UICulture = "es";
            }
            base.InitializeCulture();
        } 
```

及其工作正常:)

# validation - 如何验证jsf中的字段

> ID：15515946
> 
> 赞同：1
> 
> 时间：2013-03-20T05:21:02.210
> 
> 标签：validation, jsf, jsf-1.2

我的`addNew.xhtml`页面中有很多字段。我必须对客户端的字段进行验证。其中一个领域是`city`.

`city`如果我不输入which says ，我想得到一个验证错误`city cannot be left blank`。

以前我在研究 grails 框架，自定义验证是一项非常容易的任务。现在我正在研究 jsf，我无法在互联网上找到解决这个问题的好例子。

你能帮我实现这个验证吗

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:a4j="http://richfaces.org/a4j">
   <head>
       <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
     <link type="text/css" rel="stylesheet" href="../css/global.css" />

   </head>
       <body>
<div class="windowContents">
    <a4j:form style="width: 700px; height: 500px" ajaxSubmit="true"
        id="addNewRecord">

            <a4j:repeat value="#{addAction.editedtable}"
                var="address">

                <br />
                <br />

                    <table border="0" style="font-size: 12px; width: 100%;">
                        <tr>
                            <td><h:outputText value="File ID:" /></td>
                            <td><h:outputText value="#{address.fileId}" /></td>

                            <td><h:outputText value="Insured Name" />:</td>
                            <td><h:outputText value="#{dataEntryAction.insuredName}" /></td>
                        </tr>
                        <tr>
                            <td><h:outputText value="House No" /><span class="red">*</span>:</td>
                            <td><h:inputText value="#{address.houseNumber}" /></td>

                            <td><h:outputText value="Street" /><span class="red">*</span>:</td>
                            <td><h:inputText value="#{address.street}" /></td>
                        </tr>
                        <tr>
                            <td><h:outputText value="City" />:</td>
                            <td><h:inputText id ="city" value="#{address.city}" required="false" requiredMessage="City is required" /></td>
                                            <h:message for="city" />

                        </tr>

                    </table>
            </a4j:repeat>
            <br />
            <h:panelGroup rendered="true">
                <a4j:commandButton value="save" image="../images/buttons/save.gif"
                      render="@form"
                    action="#{addAction.saveEditedAndPrepareHistory(addAction.userComment,user, addAction.editedtable)}"
                    reRender="dataEnrtyTable,dataEntryDetails"
                    oncomplete="javascript:Richfaces.hideModalPanel('addNewRecordPanel')"
                    style="align:center;" />

            </h:panelGroup>

    </a4j:form>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T06:03:02.563

严格回答您的问题，在 JSF 1.2+ 中，应该这样做：

```
<h:outputLabel for="city" value="City" />
<h:inputText id="city" value="#{address.city}" required="true" requiredMessage="City cannot be left blank." />
<h:message for="city" /> 
```

我认为这些文章可能会让您感兴趣：

*   [多个字段的验证器](http://balusc.blogspot.com.br/2007/12/validator-for-multiple-fields.html)
*   [JSF 转换和验证](http://www.ibm.com/developerworks/java/library/j-jsf3/)

我希望它有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T05:55:59.280

JSF 中有不同的选项来完成你的任务，

`1.`客户端验证。

您在有关客户端验证的问题中提出了问题。

```
<tr>
   <td><h:outputText value="City" />:</td>
    <td><h:inputText value="#{address.city}" id="cityID"/></td>
</tr>

<h:commandLink action="#{yourBean.submitMethod}" onclick="checkCity(cityID)"> 
    <h:outputText value="Submit"></h:outputText>
</h:commandLink>

function checkCity(cityID)
{
    var cityEntered = $("#" + cityID).val();
    //Do whatever validations you want
} 
```

**与您的问题无关** 还有其他方法（您没有在问题中提出）。

`2.` `maxlength`- 可以在此字段中输入的最大字符数。

```
<h:inputText id="cityID" value="#{yourBean.cityID}" maxlength="10"/> 
```

`3`. 服务器端验证

可以说你没有把`onclick`事件`h:commandLink`放在首位。1

在您的 Facelets 页面中，

```
<h:messages globalOnly="true" layout="table" />

public String submitMethod() {
 try
 {
    FacesContext facesContext = null;
    facesContext=FacesContext.getCurrentInstance();

    ArrayList <String> errorList= new ArrayList <String>();
    if(this.cityID.equals(//something))
     {
       errorList.add("//some message");
     }
     if(errorList != null && errorList.size() > 0)
     {
        for(int i=0;i<errorList.size();i++)
         {
           msg= (String)errorList.get(i);
           FacesMessage facemsg= new FacesMessage(FacesMessage.SEVERITY_ERROR,msg ,msg);
           facesContext.addMessage(null, facemsg);
         }
     }
 }
 catch(Exception e)
  {
    //Do error handling
  }

} 
```

`4.`内置验证器组件

```
<h:inputText id="cityID" value="#{yourBean.cityID}">
    <f:validateLength minimum="6" maximum="15"/>
</h:inputText> 
```

# android - 如何在我的 android 的 gmail 中阅读（查看）html？/ Gmail

> ID：15515947
> 
> 赞同：1
> 
> 时间：2013-03-20T05:21:09.000
> 
> 标签：android

我正在向我的 gmail 帐户发送一封邮件。此邮件包含我的自定义方案 URL（因此当单击此链接时，我将能够激活我在设备上安装的应用程序）。但是我无法单击此网址，因为当我在 android 设备中打开我的 gmail 时，它只会向我显示简单的文本，如下所示：-

你好，你可以在这里下载你的书：- 这将是我的链接。

现在“这将是我的链接”似乎不是一个链接，所以我无法单击此链接，因此无法打开我的应用程序。

我的问题是如何在我的 android 的 gmail 中读取（查看）html？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T05:31:15.330

这不仅仅是一个 Android 问题 - GMail 网站也不允许您单击具有未知方案的 URL。

据我所知，没有改变这种行为。但是，您可以将您的 Android 应用程序配置为响应来自您网站的 URL。所以如果你有网站[http://mywebsite.com/](http://mywebsite.com/)那么你可以设置你的应用来处理所有以[http://mywebsite.com/app/](http://mywebsite.com/app/)开头的 URL 。用户可以在 GMail 中单击这些链接，如果他们安装了您的应用程序，它将打开您的应用程序。如果他们不这样做，它将加载浏览器并转到您的网站 - 您可以告诉他们他们需要安装您的应用程序。= )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T05:05:01.683

当我试图实现自定义方案 url（Appcelerator Titan）但我的电子邮件无法将该 url 读取为链接时，我添加了**http://**我的 url 开头，所以现在我的电子邮件将其显示为 url，现在我可以点击此 url 响应我的应用程序成功打开。

我的重点是创建一个通用链接，这样无论是 iOS 还是 android，如果用户单击此链接，我安装的应用程序都将打开。但是在 iOS 中添加 http:// 永远不会打开你的应用程序，它总是会被定向到浏览器（我读过的那个）。所以现在我为不同的操作系统保留了两个不同的链接。

# gwt - 从演示者设置 GWT celltable 数据

> ID：15515949
> 
> 赞同：4
> 
> 时间：2013-03-20T05:21:19.100
> 
> 标签：gwt, celltable

我是 GWT 的新手。我想知道，是否可以从**GWT Presenter**设置单元格表格内容？从视图本身设置单元格表数据并仍然遵循 MVP 模式是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T06:07:57.050

不要与 GWT 演示者和它的模式混淆。如您所知，GWT Presenter 是 View 和 Model 之间通信的合同。最好在 Presenter 中编写服务器**调度**代码和**事件总线**代码，并在 View 本身中为 GWT 小部件设置数据。

在从模型获取单元格表数据到演示者之后，使用`dispatch.execute`方法。在`onSuccess`方法中，调用一个在celltable中设置数据的方法。

*   定义一种在视图界面中设置单元格表数据的方法

    ```
     public interface MyView  extends View
        {
         void setCellTableData(List<Data> dataList);
        } 
    ```

    它将在视图类中实现，编写一个在那里设置单元表数据的代码。

*   在presenter中，**onSuccess**方法设置数据如

    ```
    dispatch.execute(new GetDataAction(),
        new AsyncCallback<GetDataActionResult>() {
            @Override
            public void onFailure(Throwable caught) {

            }
            @Override
            public void onSuccess(List<Data> result) {
                 getView().setCellTableData(result);
            }   
            };
        }); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T06:03:11.910

**View 仅用于渲染 UI。**

它不应该保持 a 的状态`specific domain object`。

所有`view`渲染业务逻辑都应该是`Presenter`图层的一部分。

[MVP 的更好实践。](http://blahti.wordpress.com/2010/01/10/gwt-best-practices/).

[在 MVP 中使用和维护不同的层。](http://www.codeproject.com/Articles/25491/Model-View-Presenter-And-Its-Best-Practices)

# yii - 如何在 Yii 框架中记录特定控制器的操作并将其发送到电子邮件地址？

> ID：15515953
> 
> 赞同：0
> 
> 时间：2013-03-20T05:21:58.593
> 
> 标签：yii

如何通过“txt 文件”或电子邮件记录 Yii 应用程序特定控制器中发生的所有事件？假设我有这个由 Yii 制成的应用程序，现在每当有用户使用该站点时，我希望特定控制器的操作被记录并通过电子邮件发送给我。如那个 ，

*   插入记录
*   删除记录
*   更新记录

这样我就会知道每当发生错误时该查看的确切位置，以防万一不在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T08:19:16.090

Yii 日志功能非常方便，您是否阅读过：[http](http://www.yiiframework.com/doc/guide/1.1/fr/topics.logging) ://www.yiiframework.com/doc/guide/1.1/fr/topics.logging ？

您应该配置`CEmailLogRoute`，例如：

```
array(
  'class'=>'CEmailLogRoute',
  'levels'=>'info',
  'emails'=>'admin@example.com',
  'categories'=>'application.controller.YourController',
), 
```

在您的控制器操作中，只需输入：

```
Yii:log('message to log', 'info', 'application.controller.YourController'); 
```

# ruby-on-rails - Rails 嵌套表单属性构建

> ID：15515958
> 
> 赞同：3
> 
> 时间：2013-03-20T05:22:38.090
> 
> 标签：ruby-on-rails, nested-attributes

我很难理解如何处理我拥有的嵌套表单。用户将登录应用程序，单击“创建团队”，此页面将允许用户输入团队名称和团队成员列表。（有效地创建团队成员列表）。

*   我有一个包含`fields_for`成员资格的嵌套表单，以便创建成员资格。[见表格截图](http://cl.ly/NhQH)
*   保存表单后，成员模型运行`Entrant.find_or_creates_by_name`以创建参赛者。
*   我遇到的问题是在创建时我收到错误消息：
    *   成员资格团队不能为空

**如何防止这种情况发生并允许用户添加参赛者/确保正确创建会员资格？**

抱歉，如果这个问题已经得到解答，（似乎有很多关于 has_many 的主题通过嵌套资源，但我找不到处理我的具体问题（我可能/似乎不清楚）

* * *

**我的创建操作目前是标准的嵌套表单操作，如下所示：**

```
def create
  @user = current_user
  @team = @user.teams.build(params[:team])
  if @team.save
    redirect_to(team_url(@team), :notice => "Team was successfully saved")
  else
    render :action => "new"
  end
end 
```

**我有以下型号：**

用户模型

```
class User < ActiveRecord::Base
  has_many :teams
end 
```

团队模型

```
class Team < ActiveRecord::Base
  belongs_to :user
  has_many :memberships
  has_many :entrants, :through => :memberships

  attr_accessible :name, :team_type, :website, :memberships_attributes
  accepts_nested_attributes_for :memberships, allow_destroy: true
end 
```

会员模式

```
class Membership < ActiveRecord::Base
  belongs_to :team
  belongs_to :entrant

  validates :team_id, presence: true
  validates :entrant_id, presence: true

  attr_accessor :entrant_name
  attr_accessible :entrant_name 

  def entrant_name
    entrant && entrant.name
  end

  def entrant_name=(name)
    self.entrant = Entrant.find_or_create_by_name(name) unless name.blank?
  end

end 
```

Entrants Model - 这实际上是成员列表的团队成员，但是当用户进入团队时，他们可以指定可能在团队之间更改的昵称。

```
class Entrant < ActiveRecord::Base
  attr_accessible :name
  has_many :memberships
  has_many :teams, :through => :memberships
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T05:41:56.277

我认为这是一个验证错误。尝试 从会员模型中删除
validates :entrant_id, presence: true 。

# r - 识别和提取特定来源的先前观察

> ID：15515965
> 
> 赞同：1
> 
> 时间：2013-03-20T05:22:58.433
> 
> 标签：r

我有一个表格中的数据：

```
id   source
1    m
1    p
1    l1
1    l1
2    t
2    q
3    p
3    l1
3    n
3    l1 
```

现在对于每个 id，我想在源中出现 l1 时识别它，并在 l1 之前提取观察结果。例如：对于 id 1，l1 中的第三个源和之前的观察是 p。所以我的数据应该是这样的：

```
id    source
1      p
3      p
3      n 
```

我如何在 R 中创建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T06:23:18.347

数据表解决方案

```
 library(data.table)

 dd <- data.table(df)
 dd[, source[match('l1', source)-1L],by = id] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T04:40:32.767

这是另一个 data.table 解决方案。我无法从@mnel 的早期版本中获得看似正确的答案。

```
library(data.table)

## Create the test data table:
dt <- data.table(id=c(1,1,1,1,2,2,3,3,3,3),
                 source1=c("m","p","l1","l1","t","q","p","l1","n","l1"))

dt[,list(id, source1, source0=c(NA,source1[seq_len(.N-1L)]))][source1=="l1"]

##    id source1 source0
## 1:  1      l1       p
## 2:  1      l1      l1
## 3:  3      l1       p
## 4:  3      l1       n 
```

这是将列 source0 添加到获取前一行（或第一行的 NA）的数据表中。这`.N`是一个行号，我`seq_len`用来获取前一个行号。然后它对原始 source1 的值为“l1”的结果进行子集化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T05:35:36.340

可能有更直接的方法，但试试这个：

```
#get your data
test <- read.table(text="id   source
1    m
1    p
1    l1
1    l1
2    t
2    q
3    p
3    l1
3    n
3    l1",header=TRUE)

# do some picking of the cases
result <- do.call(rbind,by(test,test$id,function(x) x[which(x$source=="l1")-1,]))
result <- result[result$source!="l1",] 
```

这使：

```
> result
  id source
2  1      p
7  3      p
9  3      n 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T23:58:46.643

这是一个矢量化解决方案，仅使用来自 R 基础的简单函数。

如果`DF`是输入数据框，那么`sel`是一个逻辑向量，其`TRUE`组件选择所需的行。`&`由符号连接的三个术语选择这些行：

*   下一行的`source`列等于“l1”和
*   其源列不是`l1`并且
*   是这样的，下一行不是第一行`id`

的长度`sel`比 in 的行数少一，`DF`因此我们使用它`which`来避免回收`sel`.

```
is.l1 <- DF$source == "l1"
sel <- is.l1[-1] & !is.l1[-nrow(DF)] & duplicated(DF$id)[-1]
DF[which(sel),] 
```

最后一行的结果是：

```
 id source
2  1      p
7  3      p
9  3      n 
```

# c - 当 T 不是现有类型时，为什么“struct T* next”会编译？

> ID：15515966
> 
> 赞同：4
> 
> 时间：2013-03-20T05:23:02.503
> 
> 标签：c, pointers, gcc, struct

我在 Windows 上使用 MinGW。我正在构建链表，对此我感到困惑。

```
#include <stdio.h>
#include <stdlib.h>

typedef struct Data
{
    int x;
    int y;
    struct BlaBla * next;               /*compiles with no problem*/
}List;

int main(void)
{
    List item;
    List * head;
    head = NULL;
    return 0;
} 
```

我现在该结构不能具有结构变量（对象，该结构的实例），但可以具有该结构类型的指针。不知道指针可以是不存在类型的指针。`struct BlaBla * next`;（不是链表，它必须`struct Data * next`是泛泛之谈）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T05:26:19.493

是的，您可以，因为编译器在第一次遇到未知类型名称时，会假定存在具有此*名称*的结构类型定义。然后它将为您**前向声明**结构名称，让您将其用作指针，但您不能取消引用它，也不能对其进行指针运算（因为它是不完整的类型）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T05:31:53.550

编译器将接受例如您的示例的代码：

```
typedef struct Data
{
    int x;
    int y;
    struct BlaBla * next;               /*compiles with no problem*/
}List; 
```

这没关系，因为编译器知道指针的大小，并且编译器假设结构将在取消引用之前定义。

因为编译器以这种方式运行，所以可以这样做：

```
typedef struct Data
{
    int x;
    int y;
    struct Data * next;     /* points to itself */
} List; 
```

但是，如果您要包含内联结构，如下所示：

```
typedef struct Data
{
    int x;
    int y;
    struct BlaBla blaStruct;               /* Not a pointer. Won't compile. */
}List; 
```

编译器无法计算出有多大`struct Data`，因为它不知道`struct BlaBla`有多大。要编译它，您需要包含`struct BlaBla`.

请注意，只要您需要访问 的成员`struct BlaBla`，您就需要包含定义它的头文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:26:18.010

这取决于您所说的“不存在”是什么意思。如果你甚至没有*声明* `BlaBla`，你会得到一个错误。

如果您已声明它但尚未*定义*它，那将正常工作。您可以拥有指向不完整类型的指针。

事实上，这是在 C中处理[不透明指针](http://en.wikipedia.org/wiki/Opaque_pointer)的正常方式。

因此，您可能会认为这是无效的，因为`struct BlaBla`在范围内没有声明：

```
typedef struct Data {
    struct BlaBla *next;  // What the ??
} List; 
```

但是，它实际上没关系，因为它同时声明`struct BlaBla`和定义`next`。

当然，由于定义意味着声明，这也是可以的：

```
struct BlaBla { int xyzzy; };
typedef struct Data {
    struct BlaBla *next;  // What the ??
} List; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:57:48.090

为了声明给定类型的变量或字段，将一个作为参数传递，或将一个复制到另一个相同类型，编译器必须知道变量或字段占用多少字节，它有什么对齐要求（如果any)，以及它兼容的其他指针类型，但这就是编译器需要知道的全部内容。在 C 的所有常见方言中，指向任何结构的指针将始终具有相同的大小并需要相同的对齐方式，而不管它指向的结构的大小或该结构可能包含的内容，并且指向任何结构类型的指针仅与指向相同结构类型的其他指针兼容。

因此，除了分配空间来保存指针本身（与它们指向的结构相反）、将它们作为参数传递或将它们复制到其他指针之外，不需要对指向结构的指针做任何事情的代码不会除了其唯一名称之外，不需要知道关于它们指向的结构类型的任何信息。需要为结构分配空间（而不是指向结构的指针）或访问其任何成员的代码必须更多地了解其类型，但不做这些事情的代码不需要此类信息。

# iphone - FlurryAds 的集成

> ID：15515967
> 
> 赞同：0
> 
> 时间：2013-03-20T05:23:17.867
> 
> 标签：iphone, ios, objective-c, ads, flurry

我正在尝试将 flurryAds 集成到我的 iPhone 应用程序中，但我无法做到这一点。我导入名为的 .h 文件

```
#import "Flurry.h"
#import "FlurryAds.h"
#import "FlurryAdDelegate.h" 
```

当我使用代码行初始化时

```
[Flurry startSession:@"DV2B6SYZTHSJ5230458"];
[FlurryAds initialize:self.viewController]; 
```

我收到一个错误，例如

```
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_FlurryHttpAsyncTask", referenced from:
      objc-class-ref in libFlurryAds.a(libFlurryAds.a-i386-master.o) 
```

任何人都可以帮助我吗？先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T05:30:37.717

我猜你的项目是为 iPhone/iPad 设计的。i386 适用于 mac 项目。

所以从有效架构中删除 i386。

看到这张图片： http: [//postimage.org/image/pxz2fyij5/](http://postimage.org/image/pxz2fyij5/)

或者，另一种机会是您正在使用 Mac Flurry Lib...使用 iphone 版本的 flurry lib。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:34:56.693

您是否在应用程序中包含以下必需的框架？

MediaPlayer.framework

SystemConfiguration.framework

UIKit.framework

CoreGraphics.framework

（全面披露：我在 Flurry 的支持团队工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:32:30.100

检查[此链接](http://web-c3.anscamobile.com/forum/2012/12/07/implementing-flurry-ads)。看看有没有帮助。

尝试删除 -ObjC 标志，然后查看是否仍然出现错误。

# android - 通过java代码将android .apk复制到另一个.apk文件并覆盖其资产文件？

> ID：15515986
> 
> 赞同：4
> 
> 时间：2013-03-20T05:24:38.937
> 
> 标签：android, apk, assets, android-assets

是否可以通过复制已经存在的 .apk 文件并修改其资产文件夹来创建 .apk 文件？我在 assets 文件夹中的文件中有一些信息，其中包含用户要连接的服务器 ip 和端口。用户来自不同的地区，必须通过不同的服务器进行连接。谁能告诉我如何实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T16:29:58.693

我添加了一条评论，其中包含我针对此问题的推荐解决方案。但是，这是您的问题的答案：

当然，您可以解压 APK，换出资产，然后从中创建一个新的 APK。但是，您需要使用正确的密钥再次签署 APK。

如果您自己构建应用程序，您可以构建多个 APK，每个 APK 包含不同的资产文件。但是，您必须手动分发这些 APK（即：它们不能上传到 Google Play），因为它们每个都具有相同的包名称，并且您不能在应用商店中拥有多个具有相同包名称的应用程序。

# jquery - Jquery - 仅将图像添加到下拉项目

> ID：15515988
> 
> 赞同：0
> 
> 时间：2013-03-20T05:24:44.593
> 
> 标签：jquery, drop-down-menu

我试图弄清楚如何简单地将箭头动态添加到我的下拉菜单项中。我的 html 的标记非常简单。只是一个

```
<nav>
    <ul>
        <li> -Top level Link
            <ul>
                <li> -Child Level Links </li>
            </ul>
        </li>
    </ul>
</nav> 
```

它们里面的东西对这个问题真的不重要，我想象的结构才是真正需要的..

我认为我需要做的是找出哪些菜单项具有子级链接，然后更改父链接或父链接的类`<li>`以包含向下箭头的图像，或者通过 jquery 添加向下箭头的图像。

任何帮助至少找出正确的方法将不胜感激，即使你不共享代码我总是可以使用谷歌找出方法。

我想我已经解决了我的需求..或多或少....

```
 $(document).ready(function(){ 
       $('.hmenu').has('ul').addClass('arrow'); 
       $('ul.arrow').find('a:first').append('*'); }); 
```

我知道我可以附加 html 并创建一个 div 并在 div 内放置一个图像，并使用一点 css 确保看起来不错。

如果有人有更简单的方法来做到这一点，我非常想知道。我没有太多需要或机会做 java script/jquery，因为我通常盯着 php 代码，但我喜欢动态，所以代码知道遇到 x 时该怎么做。

感谢所有回复的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:13:58.533

我想这就是你想要的

```
$("nav > ul > li > ul").parent().addClass("arrow"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T05:34:45.340

您可以为此使用后代选择器将类添加到相关项目，例如：

```
$('ul li ul li').addClass('child'); 
```

另请参阅以获取更多信息：

[http://api.jquery.com/descendant-selector/](http://api.jquery.com/descendant-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T05:40:39.823

如果您想要一个简单的箭头，只能通过 css 完成，“ **∨** ”是 ascii 代码中的向下箭头。

的CSS： -

```
.arrow1 { font-family:Arial, Helvetica, sans-serif; font-weight:bold; font-size:12px; } 
```

在第一个 li 之后添加此行：-

```
<li>-<span class="arrow1">&or;</span>Top level Link
          <ul>
              <li> -Child Level Links
           </li>
        </ul>
      </li> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T06:01:41.240

或者你可以使用已经这样做的jquery插件..

这是您可以尝试的所有插件的列表..

[不同的下拉插件](http://www.jquery4u.com/plugins/10-jquery-selectboxdrop-down-plugins/)