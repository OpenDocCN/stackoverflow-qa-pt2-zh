# StackOverflow 问答 15663000-15663999

# jquery - 根据设置的 cookie 隐藏内容

> ID：15663000
> 
> 赞同：0
> 
> 时间：2013-03-27T15:41:03.360
> 
> 标签：jquery, cookies

我正在为特定域设置 myCookie，当设置 cookie 时，我想隐藏内容，但显示/隐藏 IF 语句根本不起作用。

我想使用 jquery .cookie 插件，但这是我目前所拥有的。写 cookie 确实有效，我只是无法让隐藏功能正常工作。

```
var cookieName = 'myCookie';
var cookieValue = 'myCookie';
var myDate = new Date();
myDate.setMonth(myDate.getMonth() + 12);
document.cookie = cookieName +"=" + cookieValue + ";expires=" + myDate 
                  + ";domain=.example.com;path=/";

$(document).ready(function(){
    if ($.cookieName('myCookie') >= 0) {
        $('.myContent').hide();
    }
}); 
```

HTML

```
<div class="myContent">
hide this content if the cookie is set
</div>
otherwise show this content if you don't have the required cookie 
```

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:07:56.240

我给你举了一个例子：

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="jquery.cookie.js"></script>
<script type="text/javascript">
$.cookie('myCookie', 25);

$(document).ready(function(){

    if ($.cookie('myCookie') >= 0) {
        $('.myContent').hide();
    }
});
</script>
</head>
<body>
<div class="myContent">
hide this content if the cookie is set
</div>
</body>
</html> 
```

这个例子隐藏了 div，因为 25 > 0。

在其他情况下：

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="jquery.cookie.js"></script>
<script type="text/javascript">
$.cookie('myCookie', 25);

$(document).ready(function(){

    if ($.cookie('myCookie') >= 26) {
        $('.myContent').hide();
    }
});
</script>
</head>
<body>
<div class="myContent">
hide this content if the cookie is set
</div>
</body>
</html> 
```

现在我更改了 if 条件和它显示的 div myCookie = 25 并且它小于 26（因此它在两种情况下都有效）。

------------------------------已编辑------- ---------------

Javascript版本：

```
function createCookie(name,value,days) {
if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
}
else var expires = "";
document.cookie = name+"="+value+expires+"; path=/"; //replace this line

}

function readCookie(name) {
var nameEQ = name + "=";
var ca = document.cookie.split(';');
for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
}
return null;
}

function eraseCookie(name) {
createCookie(name,"",-1);
} 
```

Javascript 创建 cookie 调用：

```
createCookie('ppkcookie','testcookie',7)  //name_of_cookie,value,num_days 
```

读取 cookie：

```
var x = readCookie('ppkcookie1') 
```

完整说明：[http ://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

在 createCookie 函数中：

```
 document.cookie = name+"="+value+expires+"; path=/"; //replace this line

    //with this one adding domain
    document.cookie = name+"="+value+expires=" + ";domain=.example.com;path=/"; 
```

萨卢多斯 ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:58:46.833

首先，下载**[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)**并在您的页面中引用。

然后，就像将您的`if`声明更改为：

```
if ($.cookie("myCookie") !== undefined)
{
    $(".myContent").hide();
} 
```

*如果你愿意，你也可以`$.cookie`用来设置 cookie；README.md 有示例。*

# mysql - 远程连接 Mysql Ubuntu

> ID：15663001
> 
> 赞同：101
> 
> 时间：2013-03-27T15:41:10.813
> 
> 标签：mysql, ubuntu, remoting

由于某种原因，我无法远程连接到我的 MySQL 服务器。我已经尝试了一切，但我仍然遇到错误。

```
root@server1:/home/administrator# mysql -u monty -p -h www.ganganadores.cl
Enter password:
ERROR 1045 (28000): Access denied for user 'monty'@'server1.ganganadores.cl' (using password: YES) 
```

现在，我试过跑步

```
 GRANT ALL ON *.* to monty@localhost IDENTIFIED BY 'XXXXX'; 
 GRANT ALL ON *.* to monty@'%' IDENTIFIED BY 'XXXXXX';` 
```

还是什么都没有！我做错了什么？

**编辑**：`my.cnf`已注释掉绑定 ip。

* * *

## 回答 #1

> 赞同：355
> 
> 时间：2013-03-28T14:23:56.720

要将 MySQL 暴露给 localhost 以外的任何内容，您必须具有以下行

**对于 mysql 5.6 及以下版本**

取消注释`/etc/mysql/my.cnf`并分配给您的计算机 IP 地址，而不是环回

**对于 mysql 5.7 及以上版本**

取消注释`/etc/mysql/mysql.conf.d/mysqld.cnf`并分配给您的计算机 IP 地址，而不是环回

```
#Replace xxx with your IP Address 
bind-address        = xxx.xxx.xxx.xxx 
```

或者 `bind-address = 0.0.0.0`如果您不想指定 IP，请添加

然后使用新的 my.cnf 条目停止并重新启动 MySQL。运行后转到终端并输入以下命令。

```
lsof -i -P | grep :3306 
```

这应该会在您的 xxx 中返回类似这样的实际 IP

```
mysqld  1046  mysql  10u  IPv4  5203  0t0  TCP  xxx.xxx.xxx.xxx:3306 (LISTEN) 
```

如果上述语句正确返回，您将能够接受远程用户。但是，要让远程用户以正确的权限连接，您需要在 localhost 和 '%' 中创建该用户。

```
CREATE USER 'myuser'@'localhost' IDENTIFIED BY 'mypass';
CREATE USER 'myuser'@'%' IDENTIFIED BY 'mypass'; 
```

然后，

```
GRANT ALL ON *.* TO 'myuser'@'localhost';
GRANT ALL ON *.* TO 'myuser'@'%'; 
```

最后，

```
FLUSH PRIVILEGES; 
EXIT; 
```

如果您没有像上面那样创建相同的用户，当您在本地登录时，您可能会继承基本 localhost 权限并遇到访问问题。如果您想限制 myuser 的访问权限，则需要在[此处](http://dev.mysql.com/doc/refman/5.5/en/grant.html)阅读 GRANT 语句语法。

注意：如果 lsof 没有返回或找不到，您可以根据您的 Linux 发行版在[此处安装它。](https://packages.debian.org/)您不需要 lsof 来使事情正常工作，但是当事情没有按预期工作时，它非常方便。

更新：如果即使在添加/更改`bind-address`in`my.cnf`之后也不起作用，请在最初声明的位置进行更改：

```
/etc/mysql/mariadb.conf.d/50-server.cnf 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-05-05T06:13:29.143

在 apesa 的优秀帖子上添加几点：

1）您可以使用下面的命令来检查 ip 地址 mysql 服务器正在侦听

```
netstat -nlt | grep 3306

sample result:

tcp 0  0  xxx.xxx.xxx.xxx:3306  0.0.0.0:*   LISTEN 
```

2)`FLUSH PRIVILEGES`如果由于某种原因更改没有立即生效，则用于强制加载授权表

```
GRANT ALL ON *.* TO 'user'@'localhost' IDENTIFIED BY 'passwd' WITH GRANT OPTION;
GRANT ALL ON *.* TO 'user'@'%' IDENTIFIED BY 'passwd' WITH GRANT OPTION;
FLUSH PRIVILEGES; 
EXIT; 
```

> user == 用于连接 mysql 的用户 ex.root
> passwd == 用于连接 mysql 的密码

3）如果在mysql服务器机器上启用了netfilter防火墙（`sudo ufw enable`），请执行以下操作以打开端口3306进行远程访问：

```
sudo ufw allow 3306 
```

使用检查状态

```
sudo ufw status 
```

4) 建立远程连接后，可以在客户端或服务器机器上使用命令对其进行验证

```
netstat -an | grep 3306
netstat -an | grep -i established 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-09-20T09:13:42.203

MySQL 只监听 localhost，如果我们要启用对它的远程访问，那么我们需要在 my.cnf 文件中进行一些更改：

```
sudo nano /etc/mysql/my.cnf 
```

我们需要注释掉 bind-address 和 skip-external-locking 行：

```
#bind-address = 127.0.0.1
# skip-external-locking 
```

进行这些更改后，我们需要重新启动 mysql 服务：

```
sudo service mysql restart 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-05T12:39:50.693

*您正在使用 ubuntu 12（相当旧的）*

首先，打开 /etc/mysql/mysql.conf.d/mysqld.cnf 文件（**Ubuntu 14.04 及更早版本为 /etc/mysql/my.cnf**

在 [mysqld] 下找到该行， bind-address = 127.0.0.1 并将其更改为， bind-address = 0.0.0.0 或注释掉

然后，重新启动 Ubuntu MySQL 服务器 `systemctl restart mysql.service`

现在 Ubuntu Server 将允许远程访问 MySQL Server，但是您仍然需要配置 MySQL 用户以允许从任何主机访问。

用户必须`'username'@'%'`拥有所有必需的授权

为确保 MySQL 服务器侦听所有接口，请按如下方式运行 netstat 命令。

`netstat -tulnp | grep mysql`

希望这有效！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-30T11:58:43.017

如果在 Windows 上测试，别忘了打开 3306 端口。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-24T11:53:32.597

就我而言，我使用的是 MySql Server 版本：8.0.22

我不得不添加

```
bind-address        = 0.0.0.0 
```

并将此行更改为

```
mysqlx-bind-address = 0.0.0.0 
```

在 /etc/mysql/mysql.conf.d 的文件中

然后通过运行重新启动 MySQL

```
sudo service mysql restart 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-20T16:19:14.313

当我尝试将 Mysql 连接到远程服务器时，我遇到了同样的问题。我发现我必须将绑定地址更改为数据库服务器的当前私有 IP 地址。但是当我尝试`bind-address =0.0.0.0`在`my.cnf`文件中添加该行时，当我尝试创建数据库时它不理解该行。

经过搜索，我找到了声明 bind-address 的原始位置。

实际声明在：`/etc/mysql/mariadb.conf.d/50-server.cnf`

因此我直接在那里更改了绑定地址，然后一切似乎都正常了。

# ruby - 在我的观点上添加评论为“评论最多”？

> ID：15663007
> 
> 赞同：0
> 
> 时间：2013-03-27T15:41:23.920
> 
> 标签：ruby, ruby-on-rails-3

我有一个 Rails 3 博客，其中包含文章和评论模型`has_many`以及`belongs_to`关联。当文章评论大于 3 时，我应该在我的 application.html.erb 视图中看到它，因此我可以将其称为“评论最多”。

```
<div class="span2">
 <%=image_tag ("Lekki_Gardens_new.gif")  %>
<br><br>
  <b><p>News update</p></b>  
  <% @articles.first(4).each do |article| %>
   <%=image_tag article.avatar_url(:lilthumb).to_s, :class=>"img-polaroid" %><br>
  <%= link_to article.name, article%><hr>
   <% end %>

</div 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:47:26.010

您可以`:counter_cache`在您的文章模型中使用该选项，然后使用范围来检索评论最多的那些。

```
class Article < ActiveRecord::Base
  has_many :comments, counter_cache: true
  scope :most_commented, where('comments_count > 3')
end 
```

然后在您的模板中：

```
<% Article.most_commented.each do |article| %>
  <% # anything you want %>
<% end %> 
```

# android - ADB 未启动（无错误消息）

> ID：15663010
> 
> 赞同：12
> 
> 时间：2013-03-27T15:41:41.507
> 
> 标签：android, windows, adb

我正在尝试运行 adb。当我运行：“adb start-server”时，它会挂起一段时间，然后没有消息。

之后命令“adb get-state”收到答案“错误：协议故障（无状态）”如果我运行然后“adb kill-server”答案是“*服务器未运行*”

我正在使用 Windows 7。管理员已将我的权限提升为本地管理员，但它没有解决任何问题。

我使用资源监视器来验证是否有任何其他应用程序正在使用 adb 的端口，但事实并非如此。

在[https://developers.google.com/chrome-developer-tools/docs/remote-debugging](https://developers.google.com/chrome-developer-tools/docs/remote-debugging) 上，第 3 步指示“设置”>“高级”>“开发工具”下的“启用 USB Web 调试”。但在我的测试手机上，chrome 设置中没有“高级”类别。我也找不到安装的 chrome 版本。

在网上的某个地方，我看到一个建议更改“tmp/android/”的权限以允许所有用户读写，但在 C:\Users\me\AppData\Local\Android\android-sdk\temp 中有没有安卓文件夹。

所以我现在非常绝望，任何帮助将不胜感激。

谢谢

-奥利维尔

**编辑 1**：我找不到“启用 USB Web 调试”，因为它是“android 浏览器”而不是 chrome（有点荒谬是的）。我不知道。使用另一台安装了正确 chrome 的设备，我可以在那里检查该选项，但 adb 在启动时仍然崩溃。

**编辑 2**：我做了一个疯狂的猜测，平台工具文件夹存在一些写入问题。所以我使用sdk管理器卸载了所有东西，我删除了整个adt-bundle-windows-x86_64。然后我将它解压缩到其他地方，在 c: 上。奇怪的是，当我启动 SDKManager.exe 时，几个包已经被标记为已安装：

*   工具>Android SDK 工具
*   工具>Android SDK 平台-工具
*   Android 4.2.2>SDK 平台
*   Android 4.2.2>ARM EABI v7a 系统镜像
*   附加功能>Android 支持库

我尝试再次卸载它们，删除文件夹，再次解压缩并重新安装，但结果仍然相同。似乎不知何故，它安装错误，但拒绝正确卸载。任何人都知道如何强制卸载？

**编辑 3**：使用 set ADB_TRACE=1 后 adb start-server 的输出

```
C:\adt-bundle-windows-x86_64-20130219\sdk\platform-tools>adb start-server
system/core/adb/adb.c::main():Handling commandline()
system/core/adb/adb_client.c::_adb_connect():_adb_connect: host:version
system/core/adb/sysdeps_win32.c::socket_loopback_client():socket_loopback_client: port 5037 type tcp => fd 100
system/core/adb/transport.c::writex():writex: fd=100 len=4: 30303063 000c
system/core/adb/transport.c::writex():writex: fd=100 len=12: 686f73743a76657273696f6e host:version
system/core/adb/transport.c::readx():readx: fd=100 wanted=4
system/core/adb/transport.c::readx():readx: fd=100 disconnected
system/core/adb/sysdeps_win32.c::adb_close():adb_close: 100(lo-client:5037)
system/core/adb/adb_client.c::adb_connect():adb_connect: service host:start-server 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T00:37:14.743

在启动 ADB 服务器之前尝试设置环境变量 ADB_TRACE 看看它是否可以提供任何线索：

```
 C:\Android\android-sdk\platform-tools>set ADB_TRACE=1
 C:\Android\android-sdk\platform-tools>adb start-server 
```

请在您的问题中包含输出。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-07T14:00:08.213

这个解决方案对我有用：

=> 检查 adb 是否在**Task Manager**中运行，然后将其杀死。现在然后尝试通过以下方法再次重新启动它：

1) Shift + 右键单击`...\android-sdk\platform-tools`​​文件夹并选择`Open command window here`

2）使用这些命令： `adb kill-server`然后`adb start-server`

如果此方法不起作用并且您在命令窗口中看到类似的内容`Killing adb...`

然后应用以下步骤：

3) 关闭日食

4）现在杀死`javaw.exe Java(TM) Platform SE binary`并`Task manager`再次执行**步骤1和2**。

它肯定会奏效。:)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-26T04:52:22.873

要解决 windows 机器中的问题，请尝试以下操作：

## 问题

ADB 停止连接附加的 Android 设备 恶魔未运行且恶魔正在端口上运行`5037`

## 解决方案

`5037` 首先列出在端口命令上运行的所有进程：`netstat -ano | find "5037"` 上述命令的输出：

```
TCP    127.0.0.1:52935        127.0.0.1:5037         SYN_SENT        31016
TCP    127.0.0.1:52936        127.0.0.1:5037         SYN_SENT        31016 
```

使用以下命令杀死在端口 5037 上运行的进程：`taskkill /F /PID 31016`

然后，重启 adb 服务器 adb kill-server adb start-server

预期输出：

```
* daemon not running. starting it now at tcp:5037 *
* daemon started successfully * 
```

键入`adb devices`将为您提供连接到 adb 服务器的设备列表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T15:43:50.257

在**C:\Documents and Settings\userfoo.android**有一些卸载程序不会删除的与 android 相关的文件。尽管它们中的大多数是由 AVD 使用的，而不是由 ADB 使用，但我建议您在任何“全新”安装之前将其删除。

请检查您的用户权限和权限，以及用户“系统”权限，因为在某些公司，它们被切断以防止病毒或自动攻击。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T17:32:38.073

输出可以固定到传输代码：

```
D("readx: fd=%d wanted=%d\n", fd, (int)len);

while(len > 0) {
    r = adb_read(fd, p, len);
    if(r > 0) {
        len -= r;
        p += r;
    } else {
        if (r < 0) {
            D("readx: fd=%d error %d: %s\n", fd, errno, strerror(errno));
            if (errno == EINTR)
                continue;
        } else {
            D("readx: fd=%d disconnected\n", fd);
        }
        return -1;
    } 
```

这可能意味着`adb_read()`返回 0 (EOF)，而传输尝试读取下一个 4。因此，看起来传输除了 EOF 之外无法读取任何内容，并且只是断开连接。这可能是 USB 驱动程序问题。

尝试使用 Linux，或以 root/admin 权限运行命令。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-29T11:20:05.433

试试这个，

打开具有管理权限的命令提示符并键入

> netsh interface tcp set global autotuninglevel=disabled

这对我有用

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-31T11:04:40.700

我在运行java应用程序'traccar'时也有同样的情况，它在杀死这个进程后对我有用

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-07-03T19:13:19.240

我认为另一个进程，如 java web 服务器或 java 应用程序，如在您的机器上运行的“traccar”。杀死这些过程后，它对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-27T17:20:44.590

1.  `Platform Tools`在 Android SDK 管理器中卸载
2.  查找并删除和`AdbWinUsbApi.dll`的所有副本`AdbWinApi.dll``adb.exe`
3.  `Platform Tools`在 Android SDK Manager 中重新安装

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-05T16:11:18.180

我可以想到几个你会遇到这种行为的场景。

1.  （很可能）您没有以特权用户身份运行 adb.exe。即使您设置为本地管理员，您也不会以提升的权限运行此命令。由于默认的 run->cmd 处于正常用户模式，因此这是意料之中的。以下文章说明了如何以管理员/特权用户身份运行命令提示符。 [http://www.howtogeek.com/howto/windows-vista/run-a-command-as-administrator-from-the-windows-vista-run-box/](http://www.howtogeek.com/howto/windows-vista/run-a-command-as-administrator-from-the-windows-vista-run-box/)

2.  （不太可能）您可能需要将 adb.exe 添加到 Windows 防火墙规则中。转到控制面板-> Windows 防火墙，然后单击“高级设置”。然后，在“入站规则”和“出站规则”下，将 adb.exe 的规则添加为程序。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-04-16T14:36:59.897

我所做的是在我的任务管理器上结束 adb.exe，重新启动 Android Studio，然后我再次连接我的设备，然后一切正常：D

# excel - 使用 VBA 引用命名的 Excel 变量

> ID：15663018
> 
> 赞同：6
> 
> 时间：2013-03-27T15:42:24.910
> 
> 标签：excel, vba, variables

情况：我使用的是 Excel 10。我有一个命名变量，它使用公式来计算它的值。这是一个命名变量，而不是命名范围（在“名称管理器”中，名称“MaxDate”指的是“=MAX(Sheet1!B:B)”，其中 B 列是日期列表）。计算值本身不会出现在任何单元格中，而是用于电子表格中的各种公式中。

我的问题：如何在 VBA 代码中引用这个命名变量？使用 range("MaxDate").value 不起作用。我知道我可以简单地将值放入一个单元格并引用该单元格，但我想找到一种直接引用变量的方法。有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T16:06:03.380

以下是使用命名变量的一些示例：

```
Sub TestNamedVariable()

Dim varFormula As String
Dim varValue As Variant

'This will print the formula if you need it:
varFormula = ActiveWorkbook.Names("MaxDate")

'This will evaluate the named variable/formula
varValue = Application.Evaluate("MaxDate")

End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:14:33.563

对于具有命名变量“MyVar”的给定工作簿，其值为“=MAX(Sheet1!B:B)”。
试试下面的代码：

```
Evaluate(ActiveWorkbook.Names("MyVar").RefersTo) 
```

如果需要，将 ActiveWorkbook 替换为您引用的对象。

# angularjs - Angular JS：为什么 module.config 注入和控制器注入有区别？

> ID：15663019
> 
> 赞同：5
> 
> 时间：2013-03-27T15:42:26.223
> 
> 标签：angularjs, angular-ui, angularjs-service

这是我在挖掘 AngularJS 代码时无法弄清楚的，也许你可以帮助解开这个谜团。

为了展示它，我向 AngularJS 种子项目添加了一项服务：

```
function MyServiceProvider() {
    console.log('its my service');
    this.providerMethod = providerMethod;

    function providerMethod() {
        console.log('its my service.providerMethod');
    }

    this.$get = $get;

    function $get() {
        var innerInjectable = {
             name: 'stam'
        };
        return innerInjectable;
    }
}

var serviceModule = angular.module('myApp.services', []).
    value('version', '0.1').
    provider('myservice',MyServiceProvider); 
```

您可以看到此提供程序公开了 $get 和某个 'providerMethod'。

现在，对于注入用法：如果我们调用 config，我们可以注入整个类并访问“外部”提供程序方法：

```
serviceModule.config(function(myserviceProvider) {
    console.log('myServiceProvider:',myserviceProvider);
    myserviceProvider.providerMethod();
}); 
```

但是当我们将它注入控制器时（注意 Provider-less 名称），只有 $get 返回值被暴露：

```
function MyCtrl1(myservice) {
    console.log('MyCtrl1.myservice =',myservice,myservice.name);
}
MyCtrl1.$inject = ['myservice']; 
```

控制台输出如下：它的我的服务 myServiceProvider: Constructor {providerMethod: function, $get: function} 它的我的 service.providerMethod MyCtrl1.myservice = Object {name: "stam"} stam

任何人都可以解释其中的区别吗？原因？非常感谢您的任何想法

里奥

PS：我在 angular-ui [new](https://github.com/angular-ui/ui-router) ui-router 中看到了这种技术（优秀的项目！）。我需要访问外部提供程序类才能在茉莉花和其他地方进行注入 - 无济于事

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-04T14:57:36.933

提供者负责创建实例。在您的示例中，您明确创建了一个提供程序，但事实是每个服务都有一个提供程序，即使它是为它自动创建的。`[module].service()`并且`[module].factory()`只是`[module].provider()`.

`[module].config()`在提供程序注册和配置期间运行，因此您可以更改访问提供程序并使用它们进行操作。这是一个配置事物的地方，因此得名。

从文档（[http://docs.angularjs.org/guide/module](http://docs.angularjs.org/guide/module)）：

> 配置块 - 在提供者注册和配置阶段执行。只有提供者和常量可以注入到配置块中。这是为了防止在完全配置之前意外实例化服务。

另一方面，控制器是在配置服务之后实例化的，因此您不应该再与提供者混为一谈。一切都已经配置好了。您现在就可以购买他们的产品了。在这个阶段，注入器不能再注入提供者，只能注入它们创建的实例（服务）。

如果您注册服务`myService`...

```
myModule.service('myService', function() {
    // this is your service constructor
}); 
```

然后你可以`myServiceProvider`在配置函数中访问它的提供者...

```
myModule.config(function(myServiceProvider) {
    // to stuff with your provider here
}); 
```

但是当控制器被实例化时，你应该请求服务，而不是他们的提供者，所以这不起作用......

```
myModule.controller(function(myServiceProvider) {
    ...
}); 
```

而这会很好......

```
myModule.controller(function(myService) {
    ...
}); 
```

如果您发现自己需要在控制器中进行配置，您应该停下来重新考虑职责所在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T18:01:18.353

从 Angular 邮件列表中，我得到了一个很棒的[帖子](https://stackoverflow.com/questions/15666048/angular-js-service-vs-provide-vs-factory)，它解释了服务、工厂、提供者以及它们的注入用法。[我决定在这里](https://stackoverflow.com/questions/15666048/angular-js-service-vs-provide-vs-factory)把它放在自己的问题中

具体答案是：它是设计使然，允许在配置时配置提供程序。

# sql - 根据第一个和最后一个条目返回 2 行

> ID：15663022
> 
> 赞同：0
> 
> 时间：2013-03-27T15:42:28.200
> 
> 标签：sql, teradata

我试图为每个 USERID 拉 2 行，第一行是最旧的日期（RSLVD_DTTM），第二行是最新的（RSLVD_DTTM）

这是我目前拥有的

```
USERID  VIRTUAL_PROFILE            LINE_STABILITY numb1  numb2     RSLVD_DTTM

USER1  STGR_al2_d7296-1184_u1088-256    STABLE  "7,296" "20,074"    12/06/2012  
USER1  STGR_al1_d12288-5056_u1088-256   STABLE  "12,284""21,700"    08/01/2013  
USER1  STGR_al1_d7296-1184_u1088-256    STABLE  "7,292" "21,479"    06/11/2012  
USER1  STGR_al1_d7296-1184_u1088-256    STABLE  "7,292" "20,365"    03/04/2012 
```

这是我希望输出的示例。

```
USERID  VIRTUAL_PROFILE LINE_STABILITY_RATING    numb1    numb2     RSLVD_DTTM
USER1   STGR_al1_d7296-1184_u1088-256   STABLE  "7,292" "20,365"    03/04/2012  
USER1   STGR_al1_d12288-5056_u1088-256  STABLE  "12,284""21,700     08/01/2013 
```

这是我的查询

```
select 
  USERID,
  VIRTUAL_PROFILE, 
  LINE_STABILITY_RATING,
  numb1,
  numb2,
  RSLVD_DTTM
from 
  symmktg.V_NDW_ACTUAL_SPEEDS, symmktg.VREMEDY_SYM_TICKET
where 
   USERID IS IN ('USER1')
   and cast(RSLVD_DTTM as date) = '2013/03/23' 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:51:22.343

`row_number()`您可以为此使用窗口函数：

```
select USERID,VIRTUAL_PROFILE, LINE_STABILITY_RATING,numb1,numb2,RSLVD_DTTM
from (select USERID,VIRTUAL_PROFILE, LINE_STABILITY_RATING,numb1,numb2,RSLVD_DTTM,
             row_number() over (partition by userId order by rslvd_dttm asc) as seqnuma,
             row_number() over (partition by userId order by rslvd_dttm desc) as seqnumd
      from symmktg.V_NDW_ACTUAL_SPEEDS, symmktg.VREMEDY_SYM_TICKET
      where USERID IS IN ('USER1') and cast(RSLVD_DTTM as date) = '2013/03/23' 
     ) t
where seqnuma = 1 or seqnumd = 1 
```

大多数数据库都支持此功能。

顺便说一句，我不明白你的问题。连接条件应该使用现代连接语法而不是`,`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:52:23.730

以下查询将仅获取给定用户的最旧和最新记录：

```
select userid,
       virtual_profile,
       line_stability_rating,
       numb1,
       numb2,
       rslvd_dttm
from 
   symmktg.v_ndw_actual_speeds, 
   symmktg.vremedy_sym_ticket

where 
   userid in ('user1')
   and (rslvd_dttm = (select min(rslvd_dttm) 
                      from symmktg.v_ndw_actual_speeds, symmktg.vremedy_sym_ticket
                      where userid in ('user1'))
    or  (rslvd_dttm = (select max(rslvd_dttm) 
                       from symmktg.v_ndw_actual_speeds, symmktg.vremedy_sym_ticket)
                       where userid in ('user1')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:55:11.530

您的查询没有告诉我们您的表定义，即哪一列来自哪个表。

看起来您正在使用交叉连接，这意味着您获得的结果集在每个表的字段之间没有明确的关系。这可能是故意的，但我对此表示怀疑。我希望您的两个表之间存在某种主键/外键关系，这样对于一个表中的每一行，另一个表中有许多相应的行。目前，对于一个表中的每一行，您将返回另一个表中的*每一*行。

所以我认为这是您所追求的一般模式，使用更现代（且明确）的 Ansi92 语法：

```
 Select 
    t.your-return-values, 
    ..., 
    o.your-other-return-values, 
    ...

  From
    Sourcetable t

    Inner join yourothertable o 
    on o.somekey = t.somekey

    Inner join
    (
       Select UserId, min(rslvd_dttm) as mindttm, max(rsvld_dttm) as maxdttm
       From sourcetable
       Group by userid

    ) q
    On t.userid = q.userid 
    and (t.rslvd_dttm = q.mindttm or t.rslvd_dttm = q.maxdttm) 
```

但是，您需要确定一个表中的哪个字段与另一个表中的哪个字段相关，我要为第一次连接指定您的键。

此外，连接当前是 INNER，这意味着它只会返回来自第一个表的结果，如果第二个表中至少存在一个对应的结果。

您可能希望将其更改为 LEFT，这意味着返回包含第一个表中的值的行，即使找不到来自第二个表的匹配行（在这种情况下，这些列对于该行返回 null）。

如果您在使用的 Ansi89 语法中需要它，请告诉我，我会看看我能做什么！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-24T16:52:28.507

正如其他一些人已经告诉您的那样，两个表之间没有真正的连接条件。

添加到 Gordon Linoff 的解决方案：

1.  您可以在 Teradata 中使用 QUALIFY 而不是派生表
2.  具有不同 ORDER BY 的两个 ROW_NUMBER 将导致两步计算，当您用 MAX/MIN 重写它时，它只是一个步骤

这将导致

```
select 
  USERID,
  VIRTUAL_PROFILE, 
  LINE_STABILITY_RATING,
  numb1,
  numb2,
  RSLVD_DTTM
from 
  symmktg.V_NDW_ACTUAL_SPEEDS, symmktg.VREMEDY_SYM_TICKET
where 
   USERID IS IN ('USER1')
   and cast(RSLVD_DTTM as date) = '2013/03/23'
qualify 
   min() over (partition by userId) = RSLVD_DTTM
or max() over (partition by userId) = RSLVD_DTTM 
```

# java - Java EE 应用程序之间的 Web 服务通信

> ID：15663023
> 
> 赞同：2
> 
> 时间：2013-03-27T15:42:33.040
> 
> 标签：java, web-services, jakarta-ee, jax-ws

我在两个独立的应用程序服务器上有两个 Java EE 应用程序。其中之一已经包含一个工作的 EJB。我希望能够通过使用 JAX-WS Web 服务从其他应用程序与这个 EJB 进行通信（通信必须在不同的应用程序服务器和不同的服务器版本之间工作，所以远程 EJB 调用是没有选择的）。将服务器 api 暴露给客户端应用程序是没有问题的。服务端很清楚，添加@Webservice注解似乎效果很好。但我想知道构建客户端的最佳方法是什么：我真的不想从 wsdl 生成客户端存根（在我的例子中，它本身是由容器从 ejb 代码生成的）并打包所有这些生成的类进入客户的耳朵 - 但这似乎是我可以使用 @WebServiceRef 注释的唯一方法。

规范和“容器”不推荐使用 javax.xml.ws.Service 的静态方法（例如 service=Service.create() 和 service.getPort()）自己制作动态代理的替代方法提供者不需要支持使用这些方法创建的托管服务实例”。但这正是某事。我想使用：

有没有办法在我的代码中注入一个由应用程序服务器管理的动态代理？或者是使用生成的客户端存根类完成托管 Web 服务客户端实例的唯一方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T05:53:43.137

阅读 JAX-WS 2.2 规范，第 4 章：客户端 API。

**1.静态客户端生成**

确实是使用 JAX-WS 的最简单方法。从 Web 服务的角度来看，WSDL 是接口和连接属性。即使您选择不实际使用它，您仍然需要从逻辑意义上了解它才能进行有意义的 SOAP 调用。

来自 JAX-WS 规范的注释：使用 SOAP 1.1/HTTP 绑定的端点必须在发布地址以 WSDL 1.1 文档的形式提供其合同，并以`?WSDL`或为后缀`?wsdl`

**2.动态客户端编程**

> *有没有办法在我的代码中注入一个由应用程序服务器管理的动态代理？*

此方法涉及针对 JAX-WS API 的动态编程，以使用或不使用 WSDL 连接到 Web 服务。没有办法随便“注入”一个动态代理。您需要使用 SEI 的端口 URL 构建和配置一个。WSDL 文档是存储此类配置信息的标准位置，尽管可以避免它并以编程方式插入信息。

*   **2A) 使用 WSDL 进行动态编程：**

    ```
     javax.xml.ws.Service service = Service.create(
         new URL("http://example.org/stocks.wsdl"),
         new QName("http://example.org/stocks", "StockQuoteService"));
     com.example.StockQuoteProvider proxy = service.getPort(portName,
     com.example.StockQuoteProvider.class)
     javax.xml.ws.BindingProvider bp = (javax.xml.ws.BindingProvider)proxy;
     Map<String,Object> context = bp.getRequestContext();
     context.setProperty("javax.xml.ws.session.maintain", Boolean.TRUE);
     proxy.getLastTradePrice("ACME"); 
    ```

    **优于 (1) 的优点：**可以在应用部署后动态更改 WSDL 文档，*前提*是此类更改不会影响到客户端的 java 接口。

    **即对你几乎没有什么好处**。您的 WSDL 是静态的。虽然您*可以将*您的客户端指向`<service endpoint URL>?wsdl`动态查找，但这意味着您需要手动配置`<service endpoint URL>`AND，在不影响您的客户端逻辑的情况下，在 SEI/WSDL 中几乎没有其他可以更改的内容。

*   **2B) 没有 WSDL 的动态编程：**

    ```
    String endpointUrl = ...;           
    QName serviceName = new QName("http://example.org/wssample/echo/", "EchoService");
    QName portName = new QName("http://example.org/wssample/echo/", "EchoServicePort");

    /** Create a service and add at least one port to it. **/ 
    Service service = Service.create(serviceName);
    service.addPort(portName, SOAPBinding.SOAP11HTTP_BINDING, endpointUrl);

    /** Create a Dispatch instance from a service.**/ 
    Dispatch<SOAPMessage> dispatch = service.createDispatch(portName, 
    SOAPMessage.class, Service.Mode.MESSAGE);

    /** Create SOAPMessage request. **/
    // compose a request message
    MessageFactory mf = MessageFactory.newInstance(SOAPConstants.SOAP_1_1_PROTOCOL);

    // Create a message.  This example works with the SOAPPART.
    SOAPMessage request = mf.createMessage();
    SOAPPart part = request.getSOAPPart();

    // Obtain the SOAPEnvelope and header and body elements.
    SOAPEnvelope env = part.getEnvelope();
    SOAPHeader header = env.getHeader();
    SOAPBody body = env.getBody();

    // Construct the message payload.
    SOAPElement operation = body.addChildElement("invoke", "ns1",
    "http://com/ibm/was/wssample/echo/");
    SOAPElement value = operation.addChildElement("arg0");
    value.addTextNode("ping");
    request.saveChanges();

    /** Invoke the service endpoint. **/
    SOAPMessage response = dispatch.invoke(request); 
    ```

    **优势（不是真的）：**最终可以让它执行与上述相同的行为。

    **缺点：**编程复杂。非标准配置（WSDL 之外）。需要避免硬编码设置。易受界面变化影响。在服务器和客户端之间手动同步设置 - 容易忽略某些东西，调试起来非常困难。

## 回答：

回到（1）。从 WSDL 生成客户端存根。将其用作接口契约——它应该设计得好而不是改变。

然后花时间解决实际问题... ;) ;)

# django - 使用参数 '()' 和关键字参数 '{'continent': 'America'}' 反转'filter_display'

> ID：15663028
> 
> 赞同：0
> 
> 时间：2013-03-27T15:42:52.063
> 
> 标签：django, url, view

运行我的应用程序时出现“oReverseMatch at /filter”错误？这是 urls.py：

```
urlpatterns = patterns('myform.views',
                       url(r'^contact$', 'contact'),
                       url(r'^affiche$', 'affiche'),
                       url(r'^add$', 'add'),
                       url(r'^filter$', 'filter'),
                       url(r'^filter_display/(?P<continent>[-\w]+)/$', 'filter_display',name='FilterDisplay'), 
```

这是我的view.py：

```
class FilterForm(forms.Form):
    Continent = forms.ChoiceField(choices=Select_continent())   
    Country = forms.ChoiceField(choices=Select_country())
    City = forms.ChoiceField(choices=Select_city())
    Server_Adress = forms.ChoiceField(choices=Select_adress())

def filter(request):
    if request.method == 'POST':                                                                                                                                                 
        form = FilterForm(request.POST)                                                                                                                                            
        if form.is_valid() :
            Continent = form.cleaned_data['Continent']
            Country = form.cleaned_data['Country']
            City = form.cleaned_data['City']
            Server_Adress = form.cleaned_data['Server_Adress']
            #Continent = dict(form1.fields['Continent'].choices)[Continent]
            #Country = dict(form1.fields['Country'].choices)[Country]
            #City = dict(form1.fields['City'].choices)[City]
            #Server_Adress = dict(form1.fields['Server_Adress'].choices)[Server_Adress]
            url = reverse('filter_display', args=(),   kwargs={'continent': 'America',})
            return HttpResponseRedirect(url)
    else:
        form = FilterForm()
    return render_to_response('filter.html', { 'form': form }, RequestContext(request))     

def filter_display(request, continent):
        if request.method == 'POST':                                                                                                                                                 
            form1 = FilterForm(request.POST)                                                                                                                                            
            if form1.is_valid() :
                Continent = form1.cleaned_data['Continent']
                Country = form1.cleaned_data['Country']
                City = form1.cleaned_data['City']
                Server_Adress = form1.cleaned_data['Server_Adress']
        else:
            form1 = FilterForm()
        data = Select_WHERE(continent)
        return render_to_response('affiche_continent.html', {'form1':form1, 'data':data }, RequestContext(request)) 
```

当我在 URL 中输入 'localhost:8000/filter_display/EUROPE/' 时，它可以工作。
该代码在“filter_display”中完美运行。
但是当我尝试使用视图中的“过滤器”函数传递参数时，我得到了这个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:01:40.320

`name`您已经为该 URL提供了一个，因此您应该在调用中使用它`reverse`：

```
url = reverse('FilterDisplay', kwargs={'continent': 'America',}) 
```

# c - C：指针混淆

> ID：15663029
> 
> 赞同：2
> 
> 时间：2013-03-27T15:42:55.320
> 
> 标签：c, pointers, binaryfiles

```
#include<stdio.h>
#include<stdlib.h>

typedef struct{
        char cStdName[50];
        int  nStdNum;
        char cStdClass[4];
        float dStdAvg;
}student;

student* students;

int cmp(const void* a, const void* b);

void main() {
    int num = 0,i=0;
    FILE *f;

    printf("Number of students:");
    scanf("%d", &num);
    students = (student*)malloc(num*sizeof(student));

    for(i=0;i<num;++i){

        student* ptr = students+i*sizeof(student);
        printf("Name:");
        scanf("%s", ptr->cStdName);
        printf("Num");
        scanf("%d", &ptr->nStdNum);
        printf("Class:");
        scanf("%s", ptr->cStdClass);
        printf("Grade:");
        scanf("%f", &ptr->dStdAvg);
    }

    f = fopen("bin.bin","wb");
    fwrite(&num,sizeof(int),1,f);
    fwrite(students,sizeof(student),num,f);
    fclose(f);
    system("pause");
} 
```

这应该在二进制文件中输出学生的数量和所有结构“数组”，它适用于 1 个学生。但是当我添加 >=2 人时，文件如下所示：http: [//i.imgur.com/LgL8fUa.png](http://i.imgur.com/LgL8fUa.png)

如果我只添加 1 名学生，仍然会有一些 Windows 路径废话： http: [//i.imgur.com/s7fm9Uv.png](http://i.imgur.com/s7fm9Uv.png) 不过没关系，读取文件的程序会忽略 NULL 之后的所有内容（我的意思是，对于第一个 char 数组）。

我认为问题出在 for() 循环和指针杂耍的某个地方，但我不知道在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:45:45.723

```
student* ptr = students + i * sizeof(student); 
```

在 C 中，指针算术已经包括`sizeof(student)`. 你会读到你的数组的末尾。

```
student* ptr = students + i; 
```

但是，您会注意到访问 to`ptr`与访问`students[i]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:15:58.303

您的代码存在一些问题：

*   首先，正如基里连科所说，你应该`students[i]`在你的代码中使用。在您的情况下，`students + i * sizeof(student)`超出范围。
*   `fwrite`与结构数组一起使用从来都不是一个好主意。这是因为编译器可能会在结构的成员之间添加一些空间（填充），这意味着当您将结构数组传递给 时`fwrite`，将打印填充字节（其中将包含垃圾）。
*   这同样适用于结构中的 char 数组成员。所有未使用的字节都将包含垃圾，当您使用`fwrite`. 最好用于`strlen`确定每个 char 数组包含多少个读取字符。

这是我将学生数组写入文件的方法：

```
void write(students* array, int len, FILE* out)
{
    int i;
    fwrite(len, 1, sizeof(len), out);

    for (i = 0; i < len; i++){
        fwrite(array[i]->cStdName, 1, strlen(array[i]->cStdName), out);
        fwrite(array[i]->nStdNum, 1, sizeof(array[i]->nStdNum), out);
        fwrite(array[i]->cStdClass, 1, strlen(array[i]->cStdClass), out);
        fwrite(array[i]->dStdAvg, 1, sizeof(array[i]->dStdAvg), out);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:51:57.370

指针分配可以在 for 循环之外一次，您可以在 for 循环结束时递增指针。试试这个。

行。这是试图解释正在发生的事情，ptr 指向结构类型的学生列表中的第一个元素，当您在 for 循环结束时增加 ptr 时，它指向列表中的下一个学生。

* * *

```
---
students = (student*)malloc(num*sizeof(student));
student* ptr = students;

    for(i=0;i<num;++i){

        printf("Name:");
        ----
        ----
        ptr++;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T16:28:18.323

基里连科的回答应该可以解决您当前的问题，但是该程序的几乎每一行都存在从微不足道到严重的错误。根据您更大的目标，您可能不需要修复所有这些问题，但无论如何我都会将它们全部写下来，以说明冰山的大小。

```
void main() { 
```

`int main(void)`. 是`int`绝对要求。`()`在 C（不是 C++）中，为函数参数列表编写意味着参数是*未指定*的，而不是没有参数；从技术上讲，您可以在这里摆脱它，因为这是一个函数*定义*，但它的风格很糟糕。

函数定义的左大括号总是单独一行，即使所有其他左大括号都被拥抱。

```
 int num = 0,i=0; 
```

间距不一致。初始化是不必要的。

```
 printf("Number of students:"); 
```

`fputs("Number of students", stdout);`当您不使用`printf`的格式化功能时，一些样式指南更喜欢。但是有些编译器可以为你做转换，这没什么大不了的。

```
 scanf("%d", &num); 
```

**永远不要使用`scanf`, `fscanf`, or`sscanf`**，因为：

1.  数值溢出会触发*未定义的行为*。允许 C 运行时仅仅因为某人输入了太多数字而使*您的程序崩溃。*
2.  一些格式说明符（特别是`%s`，您稍后将在此程序中使用！）是不安全的，其方式与不安全完全相同`gets`，即它们会愉快地写入提供的缓冲区的末尾并让您的程序崩溃（这个特定的程序看起来不安全- 对我很敏感，但应该总是像一个人的程序那样编码至少*有点*危险）。
3.  它们使正确处理格式错误的输入变得极其困难。

从用户那里读取单个非负数的正确方法是这样的：

```
unsigned long getul(void)
{
    char buf[80], *endp;
    unsigned long val;

    for (;;) {
        fgets(buf, 80, stdin);
        val = strtoul(buf, &endp, 10);
        if (endp != buf && *endp == '\n')
            return val;

        if (buf[strlen(buf)] != '\n')
            while (getchar() != '\n')
                /* discard */;
        fprintf(stderr, "*** Enter one nonnegative integer, smaller than %lu.\n",
                ULONG_MAX);
    }
} 
```

您可以在这里使用固定大小的缓冲区，因为没有人的 ULONG_MAX 大到无法容纳 80 个字符。

```
 students = (student*)malloc(num*sizeof(student)); 
```

您应该`calloc`在此处使用，这样当您将结构写入磁盘时，它们不会充满垃圾。（或者按照 Alexandros 的建议编写自定义序列化程序，这也可以避免这个问题。）

```
 for(i=0;i<num;++i){ 
```

首选样式是`for (i = 0; i < num; i++) {`. 除了间距之外，使用`i++`代替`++i`so 可以`i`在所有三个表达式中出现在相同的位置；这使它更容易阅读。

```
 student* ptr = students+i*sizeof(student); 
```

`student* ptr = students + i;`如其他地方所讨论的。

```
 printf("Name:");
        scanf("%s", ptr->cStdName); 
```

请参阅上面的评论。您需要另一个辅助函数，如下所示：

```
void getstr(char *buf, size_t len)
{
    size_t n;

    for (;;) {
        fgets(buf, len, stdin);
        n = strlen(buf);
        if (n < len && buf[n] == '\n') {
            memset(buf+n, 0, len-n);
            return;
        }
        while (getchar() != '\n')
            /* discard */;
        fprintf(stderr, "*** Enter no more than %lu characters.",
                (unsigned long)(len-1));
    }
} 
```

...

```
 scanf("%f", &ptr->dStdAvg); 
```

在这里你需要另一个辅助函数。和除了它使用`getf`的完全一样，当然错误信息也有一点不同。`getul``strtod`

```
 f = fopen("bin.bin","wb"); 
```

这不是一个非常通用的文件名吗？用户可能应该有一种方法来指定它。

```
 fwrite(&num,sizeof(int),1,f); 
```

您的文件格式需要一个[幻数](https://en.wikipedia.org/wiki/File_format#Internal_metadata)。

```
 fwrite(students,sizeof(student),num,f); 
```

您正在以 CPU-endian 顺序将二进制数据写入磁盘。对于此应用程序来说，这可能不是问题，但请注意，您可能会遇到跨平台兼容性问题。（就个人而言，对于您正在做的事情，我会使用诸如 JSON 之类的文本序列化，或诸如 sqlite 之类的简单无守护进程数据库。）有关此文件格式的更多潜在问题，请参阅 Alexandros 的回答。

写入磁盘上的文件时很少出现问题，而且这不是那种输出通过管道传输到某处的程序，但是，我仍然要提到它`fwrite`并不能保证写入您提供的所有数据。从技术上讲，您必须`fwrite`像这样调用循环：

```
size_t r, n = sizeof(student) * num;
char *p = (char *)students;
while (n > 0) {
    r = fwrite(p, 1, n, f);
    if (r == 0) break;  /* write error */
    n -= r;
    p += r;
} 
```

为此，您*必须*自己进行乘法运算并将第二个参数的 1 传递给`fwrite`; 否则，简短的写入可能会在“数据元素”的中间结束，您无法知道这已经发生了。

```
 fclose(f); 
```

在关闭文件之前检查写入错误。

```
if (ferror(f) || fclose(f)) {
    perror("bin.bin");
    return 1; /* unsuccessful exit */
} 
```

...

```
 system("pause"); 
```

只是`return 0`。使您按键退出的程序对批处理不友好。

# html - 带括号和下划线的文本字段

> ID：15663031
> 
> 赞同：-1
> 
> 时间：2013-03-27T15:43:10.243
> 
> 标签：html, input, textfield

如何制作输入字段，如用于输入电话号码的波纹管链接。

[http://phoenix-tape.com/?p=7](http://phoenix-tape.com/?p=7)

输入数字时，此下划线需要消失。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:46:50.923

您可以使用当用户单击输入框以清除字段时调用的函数。例子：

```
<script>
clear(){
document.querySelector('input#tel').value="";
}
</script>

<input id="tel" on click="clear();"/> 
```

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:48:31.470

这个 jquery 插件将是你的解决方案

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

# asp.net-mvc-4 - 关于 mvc、require.js 和 angular 的童话故事。以后有幸福吗？

> ID：15663032
> 
> 赞同：7
> 
> 时间：2013-03-27T15:43:16.320
> 
> 标签：asp.net-mvc-4, angularjs, requirejs

所以。从前有四种神奇的生物：asp.net mvc、require.js 和 angular。一个聪明的巫师决定把它们放在同一个房子里，让 asp.net 的每个视图都有自己的“代码隐藏”javascript 文件；

首先他添加到`_Layout.cshtml`

```
 <script  data-main="/main" src="~/Scripts/require.js"></script> 
```

然后他`main.js`在根目录中创建：

```
require.config({
    baseUrl: "/Scripts/",
    paths: {
        'jquery': 'jquery-1.9.1.min',
        'jquery-ui': 'jquery-ui-1.10.2.custom.min',
        'angular': 'angular.min',
        'ng-grid': 'ng-grid-2.0.2.debug'
    },
    shim: {
        'jquery': { exports: "$" },
        'underscore': { exports: "_" },
        'jquery-ui': ['jquery'],
    },
});
 // Standard Libs
require(['jquery','jquery-ui','underscore','angular']); 
```

还没有什么花哨和神奇的东西。但随后他创建了一个 html 助手：

```
public static MvcHtmlString RequireJs(this HtmlHelper helper)
{
    var controllerName = helper.ViewContext.RouteData.Values["Controller"].ToString(); // get the controllername 
    var viewName = Regex.Match((helper.ViewContext.View as RazorView).ViewPath, @"(?<=" + controllerName + @"\/)(.*)(?=\.cshtml)").Value; //get the ViewName - extract it from ViewPath by running regex - everything between controllerName +slash+.cshtml should be it;

// chek if file exists
    var filename = helper.ViewContext.RequestContext.HttpContext.Request.MapPath("/Scripts/views/" + controllerName.ToLower() + "-" +
                                                                  viewName.ToLower()+".js");
    if (File.Exists(filename))
    {
        return helper.RequireJs(@"views/" + controllerName.ToLower() + "-" + viewName.ToLower());   
    }
    return new MvcHtmlString("");
}

public static MvcHtmlString RequireJs(this HtmlHelper helper, string module)
{
    var require = new StringBuilder();
    require.AppendLine(" <script type=\"text/javascript\">");
    require.AppendLine("    require(['Scripts/ngcommon'], function() {");
    require.AppendLine("        require( [ \"" + module + "\"] );");
    require.AppendLine("    });");
    require.AppendLine(" </script>");

    return new MvcHtmlString(require.ToString());
} 
```

然后他可以`_Layout.cshtml`像这样使用它：

```
 @Html.RequireJs() 
```

如果你仔细听过这个故事，你可能会注意到还有`Scripts/ngcommon.js`手动引导 angular.js 的文件，并且有常用的 angular 指令和服务

```
require(['angular', 'jquery'], function() {
    angular.module("common",[]).directive('blabla', function() {
        return {
            restrict: 'A',
            scope: { value: "@blabla" },
            link: function(scope, element, attrs) {     }
        }
    });

    //manually bootstrap it to html body
    $(function(){
        angular.bootstrap(document.getElementsByTagName('body'), ["common"]);
    });
}); 
```

神奇的地方来了：从现在开始，如果它是 \Scripts\views 中名为 controllerName-viewName.js 的 javascript 文件，`home-index.js`对于 Home\Index.cshtml，它将被 require.js 自动拾取并加载。美不美？

但后来魔术师想：如果我需要加载其他东西（比如 ng-grid）并且不应该将某些东西注入到常见的 Angular 模块中，因为并非所有页面都会使用它。当然，他总是可以手动将另一个模块引导到他需要的每个代码隐藏 javascript 中的页面元素中，但他不够聪明地找到问题的答案： **是否可以注入一些 angular.js 组件（如 ng-grid ) 直接进入控制器，而不将其作为应用程序模块的一部分？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:20:25.953

如果我理解*魔术师的*想法正确，那么可以通过将您的应用程序拆分为被定义为组件集合的子模块来继续。

`myApp`如果他为主模块设置依赖项，它将起作用，例如：

```
var myApp = angular.module('myApp', ['Constants', 'Filters', 'Services', 'Directives', 'Controllers']);
myApp.Constants = angular.module('Constants', []);
myApp.Controllers = angular.module('Controllers', []);
myApp.Filters = angular.module('Filters', []);
myApp.Services = angular.module('Services', []);
myApp.Directives = angular.module('Directives', []); 
```

然后每个子模块：`Services`等 - 可以使用单个组件进行扩展，例如：

```
myApp.Controllers.controller('MyController', function () {});
myApp.Services.factory('myService', function () {});
myApp.Directives.directive('myDirective', function () {});
myApp.Filters.filter('myFilter', []);
myApp.Constants.constant('myConstant', []); 
```

这样主应用程序模块加载了几个子模块，但每个结构并不重要。它可以在后端提供的每个页面上包含单独的控制器、服务、指令和过滤器——*魔术师*只需要确保所有需要的依赖项都已加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T23:22:22.430

**DI**是在 MVC 视图中具有单独的角度代码隐藏的神奇关键。你甚至根本不需要 requirejs，因为 angular 本质上是一个依赖注入器和模块加载器，angular.bootstrap 是一个神奇的起点。

所以让巫师变得更强大的法术 - [$inject](http://docs.angularjs.org/guide/di)。

```
 var TmplController = function($scope, $compile, $http... // any module itself
    {
      this.parts = ['legs','arms','head'];
      $scope.dynamicPageTemplate = function($compile)
      {
        $compile('<div><p ng-repeat="each in parts">{{each}}</p></div>' )( $scope );
      }
    }

  TmplController.$inject = ['$scope','$comple', '$http']; //try legs or head 
```

参考[https://github.com/angular/bower-angular-scenario](https://github.com/angular/bower-angular-scenario)的 angular-scenario.js 的完整注释源，您将了解如何使用定义方式助手注入代码。

# matlab - 加载：无法从文件中读取矩阵

> ID：15663035
> 
> 赞同：0
> 
> 时间：2013-03-27T15:43:27.393
> 
> 标签：matlab, octave

我正在尝试从文件 .dat 加载一些变量（矩阵，数字 ...），但是当我尝试加载时，我得到错误*load: failed to read matrix from file*。

这是主文件

```
function resultado = batallaNaval()
   init();
end

function resultado =init()
  load historial.dat;
  jugadas = historial() 
end 
```

historial.dat 文件的代码是：

```
a=[1 1 ;2 1; 3  0; 4  7];
numberBoats= 5; 
```

加载变量的正确形式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:46:08.437

我想你想这样做

```
load('historial.dat', '-mat'); 
```

这告诉 MATLAB 它是 .mat 文件格式，即使它没有正确的扩展名。

# phpmyadmin - 无法访问 wamp 服务器中的 phpmyadmin。

> ID：15663038
> 
> 赞同：0
> 
> 时间：2013-03-27T15:43:33.813
> 
> 标签：phpmyadmin, wampserver

它说，

Forbidden 您无权访问此服务器上的 /phpmyadmin/。

我已经在使用一个使用 wamp (/localhost/phploginsession/) 的现有项目来创建和工作数据库，但不是通过 phpmyadmin。请帮我在我的项目中使用 phpmyadmin。

谢谢你，富兰克林瓦兹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:03:34.173

使用 127.0.0.1/phpmyadmin

发生这种情况是因为如果您将 wamp 服务器联机并且如果有人可以在网络中访问您的站点，则它无法访问 phpmyadmin，因为它是 127.0.0.1/phpmyadmin

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T13:42:46.077

WAMP 绑定到您的 Windows 版本上的 IPv6 地址。要修复，只需在 c:\wamp\alias\phpmyadmin.conf 中添加来自 ::1 的 Allow。您可能会得到“允许所有”的建议，但这会使 ua wamp 公开，因此我强烈不推荐它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-25T02:43:45.517

我遇到了这个问题，因为我更新了我正在使用的 phpmyadmin 版本。phpmyadmin.conf 中的 Alias /phpmyadmin "" 行仍然包含旧版本的文件夹。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T15:45:11.610

你应该试试 127.0.0.1 ！它可能会起作用！

# android - 如何将信息从 Edittext 保存到 android 中的原始文件

> ID：15663043
> 
> 赞同：0
> 
> 时间：2013-03-27T15:43:47.027
> 
> 标签：android, android-activity, android-edittext

我正在努力解决如何使用edittext将更改保存到我的file.txt。到目前为止，我的代码将允许我打开文本文件，但是在关闭它时，它不会保存所做的更改。文本文件正被打开到另一个活动中，并且在方向改变和最小化时将保存更改。我已经尝试了很多不同的解决方案，但我无法理解如何存储所做的更改。

```
public class Editor extends Activity {
private String Text;
private String Folder;
private String toast;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_editor);
    Bundle extras = getIntent().getExtras(); 
    this.Text = extras.getString ("txt");
    this.Folder = extras.getString("s");
    this.toast = (Folder + "/" + Text);
    Toast.makeText(this, toast, Toast.LENGTH_SHORT).show();
    File sdcard = Environment.getExternalStorageDirectory();
    File file = new File(sdcard + "/NoteTaker/" + Folder + "/" + Text);
    StringBuilder text = new StringBuilder();
    try {
    BufferedReader br = new BufferedReader(new FileReader(file));
    String line;
    while ((line = br.readLine()) != null) {
    text.append(line);
    text.append('\n');
    }
    }
    catch (IOException e) {
    }
    TextView tv = (TextView)findViewById(R.id.editText1);
    tv.setText(text);
    getActionBar().setDisplayHomeAsUpEnabled(true);

}   

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_editor, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:09:30.320

如果您正在执行读取操作，请使用`InputStream`

或者

如果您正在执行写操作，请使用`OuptputStream`

这是[您的解决方案之一](http://www.java-samples.com/showtutorial.php?tutorialid=1523)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:55:39.750

这可能是您正在寻找的：

```
public void onPause(){
    super.onPause();

    try{
        OutputStreamWriter out=new OutputStreamWriter(openFileOutput(NOTES, 0));

        out.write(editor.getText().toString());
        out.close();
    }
    catch (Throwable t) {
        Toast.makeText(this, "Exception: "+t.toString(), Toast.LENGTH_LONG).show();
    }
} 
```

您需要将 NOTES 变量更改为您的 file_name.txt 并将编辑器更改为您的 EditText 名称。

# ios - 最后一条记录显示在所有行中

> ID：15663050
> 
> 赞同：0
> 
> 时间：2013-03-27T15:44:05.230
> 
> 标签：ios, objective-c

我有一个 EventObject(s) 数组。每个对象都有标题和城市以及许多其他属性。我想将单元格的标题显示为事件标题，将单元格的副标题显示为事件城市。我尝试在下面这样做，但我只显示最后一个对象 4 次（即数组中的对象数）。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

//    NSDate *object = _objects[indexPath.row];
//    cell.textLabel.text = [object description];

    EventObject *eventInstance = [[EventObject alloc] init];
    int row = [indexPath row];

    eventInstance = eventObjectsArray[row];
    cell.textLabel.text = eventInstance.eventTitle;
    NSLog(@"Event Title: %@", eventInstance.eventTitle);
    cell.detailTextLabel.text = eventInstance.eventCity;

    return cell;
} 
```

我做错什么了？我正在学习objective-c，所以初学者肯定会出错。谢谢

编辑：这就是我插入对象的方式：

```
 //get events from database
    eventsDictionary = [eventInstance getEventsObjects];

    //process each key in dictionary and assign to eventInstance
    for(id key in eventsDictionary)
    {
         eventInstance.eventId = [NSString stringWithFormat:@"%@", key[@"id"]];
         eventInstance.eventTitle = [NSString stringWithFormat:@"%@", key[@"title"]];
         eventInstance.eventDescription = [NSString stringWithFormat:@"%@", key[@"description"]];
         eventInstance.eventCity = [NSString stringWithFormat:@"%@", key[@"city"]];
         [eventObjectsArray addObject:eventInstance];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:13:16.917

**建议**

*[这可能是问题]*

在 eventObjectsArray 中添加对象时，请确保每次添加对象之前都有新的 EventObject 实例

```
EventObject *eventInstance = [[EventObject alloc] init];
eventInstance.eventTitle = @"your title";
eventInstance.eventCity  = @"your city";
[eventObjectsArray addObject:eventInstance]; 
```

*[这是建议，因为您应该知道这一点以提高您的编码标准和内存管理]*

从数组中检索对象时，您实际上不需要拥有自定义对象的实例，而是像

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

    //EventObject *eventInstance = [[EventObject alloc] init]; //you don't need this
    int row = [indexPath row];

    EventObject *eventInstance = eventObjectsArray[row]; // make reference like this
    cell.textLabel.text = eventInstance.eventTitle;
    NSLog(@"Event Title: %@", eventInstance.eventTitle);
    cell.detailTextLabel.text = eventInstance.eventCity;

    return cell;
} 
```

# python - Django 管理操作表单有效

> ID：15663051
> 
> 赞同：0
> 
> 时间：2013-03-27T15:44:05.857
> 
> 标签：python, django

我有下面的代码。我在 OfferAdmin 中有一个操作“send_offer”。

基本上，该操作会显示一个表单，当人们完成时，会向用户发送一封电子邮件。

但是，下面的代码对我不起作用。当我单击要约旁边的复选框并从 django 管理员的下拉菜单中选择“发送要约电子邮件”时，我会看到该表单，但未发送给用户的电子邮件。

基本上 request.method == 'POST' 行下方的代码部分不起作用。

我该怎么办？

```
class OfferAdmin:
...

    class OfferForm(forms.Form):
        title = forms.CharField(max_length=100)
        image_link = forms.CharField(max_length=100)
        list_price = forms.FloatField()
        discount_price = forms.FloatField()
        exclusive_price = forms.FloatField()
        comments = forms.CharField(widget=forms.widgets.Textarea())

    def send_offer(self, request, queryset):
        form = None

        if request.method == 'POST':
            form = self.OfferForm(request.POST)

            if form.is_valid():

                for bid in queryset:
                    title = form.cleaned_data['title']
                    image_link = form.cleaned_data['image_link']
                    list_price = form.cleaned_data['list_price']
                    discount_price = form.cleaned_data['discount_price']
                    exclusive_price = form.cleaned_data['exclusive_price']
                    comments = form.cleaned_data['comments']

                    form_params = {
                        'title': title,
                        'image_link': image_link,
                        'list_price': list_price,
                        'discount_price': discount_price,
                        'exclusive_price': exclusive_price,
                        'comments': comments
                    }

                    params = {
                        'obj': bid,
                        'form': form_params
                    }

                    rts = render_to_string
                    subject = rts(
                        'shopper/email/email-offer-subject.txt', params)
                    text = rts('shopper/email/email-offer.txt', params)
                    html = rts('shopper/email/email-offer.html', params)
                    bid.user.send_email(subject, text, html)

                    self.message_user(request, "Successfully sent email")

                    return HttpResponseRedirect(request.get_full_path())

        if not form:
            for obj in queryset:
                data = {
                    'title': obj.product.title,
                    'image_link': obj.image_link,
                    'list_price': obj.list_price,
                    'discount_price': obj.discount_price,
                    'exclusive_price': obj.exclusive_price,
                }
            form = self.OfferForm(data)

    return render_to_response(
        "shopper/admin/offer_form.html", {
            'bids': queryset, 'offer_form': form},
        context_instance=RequestContext(request))

send_offer.short_description = "Send offer email" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:54:22.050

您需要处理表单提交的[中间页面](https://docs.djangoproject.com/en/1.5/ref/contrib/admin/actions/#actions-that-provide-intermediate-pages)。

当您的代码当前工作时，提交表单时，请求由更改列表视图处理，而不是`send_offer`功能。

编辑：另外，请注意管理员操作总是收到 POST 请求。

# java - 你怎么知道哪里抛出了异常？

> ID：15663055
> 
> 赞同：0
> 
> 时间：2013-03-27T15:44:13.513
> 
> 标签：java, eclipse, debugging, exception

假设你有这样的代码：

```
Random rnd=new Random();
try {

  if(rnd.nextInt(1000)==0) {
     throw new Exception();
  }
  // repeat above code N times, N being big.

}catch(Exception e) {
  LOGGER.error("caught:", e);
} 
```

现在我在 catch 子句中添加一个断点。如果它得到 caugt，我怎样才能找出引发异常的行号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:47:37.100

堆栈跟踪包含此信息。

[想法](http://ideone.com/EKu2U6)：

堆栈跟踪：

```
Exception in thread "main" java.lang.Exception
    at Main.main(Main.java:8) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:51:58.857

添加异常断点：

在异常对话框中，按“J！” 按钮，然后捕获异常。

以下是截图：

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fbreakpoints%2Fref-addexception_viewaction.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fbreakpoints%2Fref-addexception_viewaction.htm)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-27T15:53:25.673

您已经知道行号，它就是其中的行`throw new Exception()`；）

如果你的意思是你想知道你已经循环了多少次，那么你可以在异常的构造函数中包含循环计数器，然后用`e.getMessage()`

# bash - Vim - 在搜索时捕获字符串并在替换时使用

> ID：15663057
> 
> 赞同：9
> 
> 时间：2013-03-27T15:44:17.547
> 
> 标签：bash, search, vim, replace

我有一个 CSS 选择器，例如：

```
#page-site-index .toolbar .items { 
```

如何捕获“.toolbar .items”部分并将其用于替换 Vim S&R 的部分，所以这个选择器可以变成：

```
#page-site-index .toolbar .items, #page-site-login .toolbar .items { 
```

就像是：

```
%s:/#page-site-index \(.toolbar .items\)/#page-site-index (the captured string), #page-site-login (the captured string)/g 
```

顺便说一句，我正在使用 Vim 的终端版本。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-27T15:47:18.487

使用`\1`...在此处查看 wiki：http: [//vim.wikia.com/wiki/Search_and_replace](http://vim.wikia.com/wiki/Search_and_replace)

更明确地说：

```
%s:/#page-site-index \(.toolbar .items\)/#page-site-index \1, #page-site-login \1/g 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:50:16.397

在你的 vim 中试试这个命令：

```
%s/\v#(page-site-index )(\.toolbar \.items)/&, #page-site-login \2/g 
```

你也可以使用`\zs, \ze`和不分组：

```
%s/#page-site-index \zs\.toolbar \.items\ze/&, #page-site-login &/g 
```

继续打高尔夫球，如果文本与您给出的问题一样，您可以：

```
%s/#page-site-index \zs[^{]*\ze /&, #page-site-login &/g 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T16:02:12.703

您已经`\(...\)`在尝试中对正则表达式中有趣的部分进行了分组。要在替换部件中引用这些*捕获*`\1`的子匹配，请使用、`\2`等，其中数字指的是第一个（打开的）捕获组，从左到右。整个匹配的文本还有`\0`== `&`。有关`:help /\1`更多信息，请参阅。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:47:38.050

首先键入`:`进入命令模式。然后发出以下命令：

```
%s/#page-site-index .toolbar .items/#page-site-index .toolbar, #page-site-login
.toolbar .items/ 
```

不关心格式，这是因为stackoverflow markdown解析器......

# nhibernate - QueryOver：区分大小写的 Like 或 Equals

> ID：15663061
> 
> 赞同：2
> 
> 时间：2013-03-27T15:44:30.077
> 
> 标签：nhibernate, iqueryable, queryover, icriteria

网上有很多帖子和关于堆栈溢出的帖子都在谈论解决不区分大小写的点赞问题。我猜这是因为这些人的数据库默认区分大小写。

Sql server 默认使用不区分大小写的排序规则，所以默认情况下我永远不会遇到这个问题。

但不幸的是，我有相反的问题。我需要做一个一次性区分大小写的等于或类似。

我无法设置表的排序规则，所以理想情况下会运行一些这样的 sql

```
WHERE Column COLLATE Latin1_General_CS_AS = 'CaseSensitive' 
```

据我所见，我不明白为什么要实现 InsensitiveLike，因为我们肯定可以做这样的事情

```
.Where(x=> x.Column.ToLower() == variable.ToLower()) 
```

但是我的问题无法以任何其他方式解决上述排序更改。

如果这是内置的，而不是编写 sql 查询，那就太好了。

我错过了什么还是真的没有办法做到这一点？

# python - C enum typedef in Python ctypes TypeError

> ID：15663063
> 
> 赞同：2
> 
> 时间：2013-03-27T15:44:32.637
> 
> 标签：python, c, ctypes

我正在尝试使用 ctypes 在 Python 中调用外部 C 库。我取得了良好的进展，直到我得到一个引用某个枚举的特定函数调用，该枚举在头文件中定义如下：

```
typedef enum { a = 0,
               b
             } A; 
```

我尝试了各种调用函数的方法，但我不断得到：

```
a = libc.function2(out, 0, outputCallback, c_int(1), 1)
ctypes.ArgumentError: argument 3: <type 'exceptions.TypeError'>: Don't know how to convert parameter 3 
```

这是我将函数名称更改为通用的代码，问题出在第二个函数调用中：

```
cdll.LoadLibrary("library.so")

libc = CDLL("library.so")

def outputCallback():
    print "Hello"

// This function executes properly
out = libc.function1(0, 0, 0, 0, 0)

// Function that gives error                  #
a = libc.function2(out, 0, outputCallback, c_int(1), 1) 
```

# generics - 在 Web 服务器 C# 上将图标转换为 png 文件

> ID：15663066
> 
> 赞同：0
> 
> 时间：2013-03-27T15:44:36.670
> 
> 标签：generics, bitmap, icons, png, gdi+

我正在尝试使用以下代码在 Web 服务器上将图标转换为 png。但是在保存位图时，我总是收到“GDI+ 通用错误”。我错过了什么？

```
private static byte[] IconAsSizedPng(byte[] iconBytes, int iSize)
    {
        System.Drawing.Icon icon;
        using(var ms = new System.IO.MemoryStream(iconBytes))
            icon = new System.Drawing.Icon(ms, iSize, iSize);
        using(icon) {
            using(var bmp = icon.ToBitmap()) {
                //bmp.Save(Response.OutputStream, System.Drawing.Imaging.ImageFormat.Png);
                using(var ms = new System.IO.MemoryStream()) {
                    bmp.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
                    return ms.ToArray();
                }
            }
        }
    } 
```

字节数据为：

```
System.IO.File.ReadAllBytes(filePath) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:12:58.787

我不得不将 AppPoolUser 的身份更改为“LocalSystems”。现在它起作用了。似乎这在某种程度上是一个“权限”问题。

# javascript - document.forms[0].onsubmit 没有完全正常工作......有什么问题？

> ID：15663071
> 
> 赞同：0
> 
> 时间：2013-03-27T15:44:46.810
> 
> 标签：javascript, javascript-events

所以我在我的代码中使用 document.forms[0].onsubmit 来检查我的应用程序的文本字段中是否存在两个重复的值，如果用户输入了两个相同的数字，那么当你点击提交时，一个警报弹出框告诉您两个数字相同..该部分工作正常..但是在更改值并具有不同的数字后，我仍然从警报框中得到相同的文本，说这两个数字是相同的..它看起来我的更改在第一个错误被更正后根本无法识别.. 我怎样才能真正让提交过程认识到对错误进行了更改。下面是相关代码。如果可能的话，我希望能够用我已经拥有的代码在 Javascript 中更正这一点。谢谢

```
if(duplicate(esnList)){
  document.forms[0].onsubmit = function () { 
      alert ("ERROR: You can have duplicate ESNs in the ESN text field."); 
      return false; 
  }
}

<input class="submit" type="submit" name="submit" value="Provision Unit(s)" tabindex="13"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:46:21.817

您应该在函数内部进行检查。

```
 document.forms[0].onsubmit = function () { 
    if(duplicate(esnList)) {
      alert ("ERROR: You can have duplicate ESNs in the ESN text field."); 
      return false; 
    }
  } 
```

您必须始终提供有条件地显示消息的回调，而不是有条件地提供始终显示错误消息的回调。

# java - Java - 取消或按下“x”时，我的 JOptionPane 不关闭

> ID：15663073
> 
> 赞同：0
> 
> 时间：2013-03-27T15:44:53.483
> 
> 标签：java, validation, joptionpane

我有以下类（testDate），它测试另一个类（MyDate），当执行这3行时，当我取消或右上角的小“x”时输入对话框不会关闭。

```
myDay = Integer.parseInt(JOptionPane.showInputDialog(null, "Enter the day of the month, you're travelling on: "));
myMonth = Integer.parseInt(JOptionPane.showInputDialog(null, "Enter the month (1-12), you're travelling on: "));
myYear = Integer.parseInt(JOptionPane.showInputDialog(null, "Enter the year, you're travelling on: ")); 
```

这是完整的 testDate 类：

```
import javax.swing.JOptionPane;

public class testDate {
public static void main(String[] args){
    int myDay = 0, myMonth = 0, myYear = 0; // initialising variables
    boolean dateCorrect = false;
    MyDate userTravelDate;

    do {
        try {
            do {
                myDay = Integer.parseInt(JOptionPane.showInputDialog(null, "Enter the day of the month, you're travelling on: "));
                myMonth = Integer.parseInt(JOptionPane.showInputDialog(null, "Enter the month (1-12), you're travelling on: "));
                myYear = Integer.parseInt(JOptionPane.showInputDialog(null, "Enter the year, you're travelling on: "));
                userTravelDate = new MyDate(myDay, myMonth, myYear);
            } while (userTravelDate.isDateValid(userTravelDate.formDate()) == false);
            dateCorrect = true;
        } 
        catch (Exception e) {
            JOptionPane.showMessageDialog(null, "Please enter only integers!", "Error Occurred!", JOptionPane.ERROR_MESSAGE);
        }
    } while (dateCorrect == false);
    JOptionPane.showMessageDialog(null, myDay + "-" + myMonth + "-" + myYear);      
} 
```

}

我想知道如果我按下“X”或取消输入对话框是否可以关闭，因为此时如果按下“x”或取消，它会执行以下行：

```
JOptionPane.showMessageDialog(null, "Please enter only integers!", "Error Occurred!", JOptionPane.ERROR_MESSAGE); 
```

并不断循环询问日、月和年，直到这些都是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:49:50.490

您可以在没有响应的情况下检查循环的响应`showInputDialog`和`break`循环外的响应

```
String response = JOptionPane.showInputDialog(...);
if (response == null) {
   break; // X pressed!
} else {
   myDay = Integer.parseInt(result);
   ...
} 
```

# asp.net - 另一个面板中的必填字段导致 ASP.NET 面板出现问题

> ID：15663075
> 
> 赞同：0
> 
> 时间：2013-03-27T15:44:57.603
> 
> 标签：asp.net, submit, panel

我有以下代码

```
 <asp:Panel ID="searchPanel" DefaultButton="searchButton" runat="server">
                    <asp:TextBox ID="searchBox" runat="server" value="     Search..."></asp:TextBox>
                    <asp:Button ID="searchButton" runat="server" Style="display: none" OnClick="searchInput" />
                </asp:Panel>

                                <asp:Panel ID="loginPanel" DefaultButton="submitButton" runat="server">

                                        <asp:TextBox ID="username" runat="server"  required="required"></asp:TextBox>
                                        <asp:TextBox runat="server" ID="password"  required="required"></asp:TextBox>

                                        <asp:Button ID="submitButton" runat="server" Text="Log in" OnClick="login" />

                                </asp:Panel> 
```

每当我在 searchBox 聚焦时按“输入”键时，其他面板中的字段都会突出显示并显示“请填写该字段”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:46:09.017

我相信您正在使用 HTML 5“必需”属性。当您尝试进行回发时，这将导致验证。

您可以使用特定于搜索控件的表单并在表单元素中使用“novalidate”属性。

或者

您可以使用验证组来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:45:55.963

通过使用验证组解决了这个问题

```
 <asp:RequiredFieldValidator ID="RequiredFieldValidator1"
                    ControlToValidate="username"
                    ValidationGroup="emailValidationGroup"
                    runat="Server">
                </asp:RequiredFieldValidator>

 ValidationGroup="emailValidationGroup" //goes to button 
```

也不要忘记添加

```
<appSettings>
    <add key="ValidationSettings:UnobtrusiveValidationMode" value="None" />
  </appSettings> 
```

到网络配置

# asp.net - 是否有用于 ASP.NET 的最新 .browser 文件的存储库？

> ID：15663076
> 
> 赞同：0
> 
> 时间：2013-03-27T15:45:05.237
> 
> 标签：asp.net, browsercaps

Internet 上是否有用于 ASP.NET 的最新 .browser 文件存储库，可帮助检测现代移动设备和平板电脑设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:56:05.737

我相信 WURFL 是获得最新最好的浏览器上限的流行选择。

[http://wurfl.sourceforge.net/dotnet_index.php](http://wurfl.sourceforge.net/dotnet_index.php)

# php - Wordpress 重定向到静态 index.html 页面，同时保持子页面完整？

> ID：15663077
> 
> 赞同：2
> 
> 时间：2013-03-27T15:45:05.623
> 
> 标签：php, html, wordpress, .htaccess

Wordpress 新手在这里并以此为基础，我遇到了与此处提出的问题类似的问题：

[在根文件夹上使用 WordPress 时，索引上的正在构建页面](https://stackoverflow.com/questions/14602227/under-construction-page-on-index-while-working-with-wordpress-on-root-folder)

第一次为客户使用 Wordpress。他们一直在使用 Wordpress（由与他们失去联系的另一位设计师安装）并希望恢复拥有静态 html 页面，但希望保留为客户登录和制作子页面的能力。子页面不会是私人页面，而是“如果你知道它在那里并且有链接”类型的页面。

目前他们将 www.domain.com 转到 index.php，但希望它重定向到我为他们创建的单独的静态 index.html 设计。是否可以在 .htaccess 文件中执行此操作而不会破坏其余的 Wordpress 设置？我害怕破坏某些东西并且无法修复它并失去他们迄今为止所拥有的东西。目前正在阅读 WP 并观看我可以了解的每个视频教程以了解更多信息！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:51:44.813

如果将此行放在`.htaccess`文件的顶部：

```
DirectoryIndex index.html index.php 
```

它将交换 Apache 优先处理文件的顺序。

# sql-server - 在 MS SQL 的一个字段中显示一元关系层次结构

> ID：15663088
> 
> 赞同：1
> 
> 时间：2013-03-27T15:45:32.653
> 
> 标签：sql-server, hierarchy, recursive-query, relationships

我有一个名为“Services”的表，其中包含一个 ServiceID、一个 ParentID 和一个 Description，其中 ParentID 是另一条记录的 ServiceID。数据以这样一种方式设置，即形成项目的多级层次结构，并且“根”项目的 ParentID 设置为零。如何使用一个新字段进行查询，该字段显示每个记录的所有父级到根父级的线程。当然，根项目会将此字段设置为空白。以汽车为例，我想在该字段中分别输入“X3”和“Punto”这样的文本：

汽车 > 德国 > 宝马 > 四轮驱动 > X3

汽车 > 意大利 > FIAT > 前轮驱动 > Punto

我怀疑我应该有一个函数来提供 ServiceID 并执行必要的递归以获取包含线程描述的字符串值。尝试谷歌搜索一元关系，但找不到我需要的函数的代码示例。

提前致谢！

更新：

这是我的桌子的样子：

```
CREATE TABLE [dbo].[Services](
[ServiceID] [int] IDENTITY(1,1) NOT NULL,
[ParentID] [int] NULL,
[ServiceDescription] [nvarchar](250) NULL) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:26:25.317

这是一个通用示例。您可以复制、粘贴和运行它，它会显示输出。如果这可行，您应该能够修改表和列值以使其适用于您的情况。

```
If      Object_ID('dbo.Services') Is Not Null Drop Table [dbo].[Services];
Create  Table [dbo].[Services] (ServiceID Int Identity(1,1) NOT NULL, ParenServiceID Int NULL, ServiceDescription Nvarchar(250) NULL);

Insert  [dbo].[Services]
Select  null, 'Automobiles'
Union   All
Select  1, 'Germany'
Union   All
Select  2, 'BMW'
Union   All
Select  3, '4 Wheel Drive'
Union   All
Select  1, 'Italy'
Union   All
Select  5, 'FIAT'
Union   All
Select  4, 'X3'
Union   All
Select  6, 'Front Wheel Drive'
Union   All
Select  8, 'Punto';

With    recurCTE As
(
        Select  h.ServiceID, h2.ParenServiceID As nextParent, Convert(Varchar(max),Isnull(h2.ServiceDescription + ' > ','') + h.ServiceDescription) As Hierarchy
        From    [dbo].[Services] h
        Left    Join [dbo].[Services] h2
                On  h.ParenServiceID = h2.ServiceID
        Union   All
        Select  rc.ServiceID, h.ParenServiceID As nextParent, Convert(Varchar(max),Isnull(h.ServiceDescription + ' > ','') + rc.Hierarchy) As Hierarchy
        From    recurCTE rc
        Join    [dbo].[Services] h
                On  rc.nextParent = h.ServiceID
),      orderedResults As
(
        Select  ServiceID, Hierarchy
        From   (Select  Row_Number() Over (Partition By ServiceID Order By Len(Hierarchy) Desc) As lenPriID,
                        ServiceID,
                        Hierarchy
                From    recurCTE) As n
        Where   lenPriID = 1
)
Select  h.*, o.Hierarchy
From    orderedResults o
Join    [dbo].[Services] h
        On  o.ServiceID = h.ServiceID
Where   ServiceDescription In ('X3','Punto'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:08:48.303

我会使用左连接到一些合理的限制（比如 20），然后连接字符串：

```
 declare @services table (ServiceID int , ParentID int,[Description] varchar(20))

 insert @services
 select 1,null,'automobiles' union
 select 2,null,'hotels' union
 select 3,1,'Germany' union
 select 4,3,'BMW' union
 select 5,3,'Audi' union
 select 6,2,'Hawaii' union
 select 7,2,'Australia'

 select  

 s.Description+'>'+s2.Description+'>'+isnull(s3.Description,'')+'>'+isnull(s4.Description,'')
 from @services s
 left join @services s2 on (s2.ParentID=s.ServiceID)
 left join @services s3 on (s3.ParentID=s2.ServiceID)
 left join @services s4 on (s4.ParentID=s3.ServiceID)
 left join @services s5 on (s5.ParentID=s4.ServiceID) 
```

# c# - 下拉列表中的不同值和默认值过滤器

> ID：15663097
> 
> 赞同：1
> 
> 时间：2013-03-27T15:45:45.473
> 
> 标签：c#, asp.net-mvc, drop-down-menu, filter

我有这个 ViewData 和 DropDownList 需要有不同的值。让我在上下文中为您介绍，在我看来，当我创建一个“项目”时，它可以将其“样式值”设置为某些东西（它是一个字符串字段），例如“Pop”。在我的下拉过滤器内的索引页面上，我将在其中包含“Pop”。如果我创建第二个项目，其样式值为“Pop”，下拉菜单将显示两次。我不想要那个。

我要做的第二件事是在我的下拉过滤器中设置一个默认值，这样当我选择该值时，它将删除所有过滤器并显示添加的所有项目的完整列表。

如果我没有说清楚，就这么说吧。

这是我的代码中的情况。

我的控制器：

```
public ActionResult Index()
    {
        var projects = from s in db.Project select s;
        var projectList = db.Project.ToList();

        if (Request.Form["FilterStyle"] != null && Request.Form["FilterStyle"] != "")
        {
            int i = int.Parse(Request.Form["FilterStyle"]);
            projects = from s in db.Project
                       where s.ID == i
                       select s;
        }

        if (Request.Form["FilterStyle"] == null)
        {
            projects = from s in db.Project select s;
        }

        ViewData["Styles"] = new SelectList(projectList, "ID", "Style");

        return View(projects);
    } 
```

我的观点 ：

```
@using (Html.BeginForm())
{
<table>
    <thead>
        <tr align="left">

        ....

            <th>
                Style :
                <br /><br />
                @Html.DropDownList("FilterStyle", (SelectList)ViewData["Style"], " ", new { onchange = "this.form.submit()" })
            </th>

        ....

        </tr>    
    </thead>

    <tbody>

    ....

    </tbody>
</table>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:04:58.540

在将查询传递给视图之前，您需要确保在查询中您只会获得不同的值。

```
projects = (from s in db.Project
                       where s.ID == i
                       select s).Distinct().ToList();

  var projectList = db.Project.Distinct().ToList(); 
```

# javascript - 函数声明不应放在块中

> ID：15663098
> 
> 赞同：1
> 
> 时间：2013-03-27T15:45:48.303
> 
> 标签：javascript, google-maps, geolocation

我的 JavaScript（如下）非常**不整洁**，并且包含一个我无法解决的**错误。**错误在 showPosition 函数内（*我在函数中有一个函数，不推荐*）。
我刚刚开始尝试使用 JavaScript，所以如果这是一个简单的问题，我深表歉意。我还提供了我的 JavaScript 的 jsFiddle，它突出显示了我坚持的区域 ( [http://jsfiddle.net/dnUTx/](http://jsfiddle.net/dnUTx/) )。

在 jsFiddle 中，我在第 25 行收到错误 - “函数声明不应放在块中”。

任何帮助将不胜感激。

```
// JavaScript Document

var x = document.getElementById("info");

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.watchPosition(showPosition, showError, clearWatch, {
            enableHighAccuracy: true,
            maximumAge: 30000,
            timeout: 30000
        });
    } else {
        x.innerHTML = "Your browser does not support the geolocation () API.";
    }
}
var flightPathCoordinates = [];
var lat1, lng1, first_check = false;

function showPosition(position) {
    if (!first_check) {
        lat1 = position.coords.latitude;
        lng1 = position.coords.longitude;
        first_check = true;
    } else {
        function distanceFrom(points) {
            var lat1 = points.lat1;
            var radianLat1 = lat1 * (Math.PI / 180);
            var lng1 = points.lng1;
            var radianLng1 = lng1 * (Math.PI / 180);
            var lat2 = points.lat2;
            var radianLat2 = lat2 * (Math.PI / 180);
            var lng2 = points.lng2;
            var radianLng2 = lng2 * (Math.PI / 180);
            var earth_radius = 3959; // or 6371 for kilometers
            var diffLat = (radianLat1 - radianLat2);
            var diffLng = (radianLng1 - radianLng2);
            var sinLat = Math.sin(diffLat / 2);
            var sinLng = Math.sin(diffLng / 2);
            var a = Math.pow(sinLat, 2.0) + Math.cos(radianLat1) * Math.cos(radianLat2) * Math.pow(sinLng, 2.0);
            var distance = earth_radius * 2 * Math.asin(Math.min(1, Math.sqrt(a)));
            return distance.toFixed(3);
        }
        var distance = distanceFrom({
            "lat1": lat1,
            "lng1": lng1,
            "lat2": position.coords.latitude,
            "lng2": position.coords.longitude
        });
    }
    x.innerHTML = "Latitude: " + position.coords.latitude +
        "<br>Longitude: " + position.coords.longitude +
        "<br>Accuracy: " + position.coords.accuracy +
        "<br>Altitude: " + position.coords.altitude +
        "<br>Altitude Accuracy: " + position.coords.altitudeAccuracy +
        "<br>Heading: " + position.coords.heading +
        "<br>Speed (km): " + position.coords.speed * 3.6 +
        "<br>Timestamp: " + new Date(position.timestamp).toLocaleString() +
        "<br>Distance Travelled (km): " + distance +
        "<br>Stopwatch: " + min + ":" + sec + ":" + msec;

    lat = position.coords.latitude;
    lon = position.coords.longitude;
    latlon = new google.maps.LatLng(lat, lon);
    mapholder = document.getElementById('mapholder');

    var myOptions = {
        center: latlon,
        zoom: 16,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        mapTypeControl: true,
        navigationControlOptions: {
            style: google.maps.NavigationControlStyle.SMALL
        }
    };
    var map = new google.maps.Map(document.getElementById("mapholder"), myOptions);

    //Bicycle Store
    var request = {
        location: (latlon),
        radius: '1000',
        types: ['bicycle_store']
    };
    infowindow = new google.maps.InfoWindow();
    var service = new google.maps.places.PlacesService(map);
    service.nearbySearch(request, callback);

    function callback(results, status) {
        if (status == google.maps.places.PlacesServiceStatus.OK) {
            for (var i = 0; i < results.length; i++) {
                var place = results[i];
                createMarker(results[i]);
            }
        }
    }

    function createMarker(place) {
        var placeLoc = place.geometry.location;

        //Custom Marker 1
        var image1 = '../images/logo_marker1.png';
        var marker1 = new google.maps.Marker({
            position: place.geometry.location,
            map: map,
            icon: image1,
            title: "Bicycle Store"
        });
        google.maps.event.addListener(marker1, 'click', function () {
            infowindow.setContent(place.name);
            infowindow.open(map, this);
        });
    }

    //Bicycle Layer
    var bikeLayer = new google.maps.BicyclingLayer();
    bikeLayer.setMap(map);

    //Custom Marker 2
    var image2 = '../images/logo_marker2.png';
    var marker2 = new google.maps.Marker({
        position: latlon,
        map: map,
        icon: image2,
        title: "You are here!"
    });

    //Panoramio Layer
    var panoramioLayer = new google.maps.panoramio.PanoramioLayer();

    panoramioLayer.setUserId("7467601");
    panoramioLayer.setMap(map);
    google.maps.event.addListener(panoramioLayer, 'click', function (event) {
        var attribution = document.createTextNode(event.featureDetails.title + ": " + event.featureDetails.author);
        var br = document.createElement("br");
        var link = document.createElement("a");
        link.setAttribute("href", event.featureDetails.url);
        link.appendChild(attribution);
    });

    //Polyline Layer
    flightPathCoordinates.push(new google.maps.LatLng(position.coords.latitude, position.coords.longitude));
    var flightPath = new google.maps.Polyline({
        path: flightPathCoordinates,
        strokeColor: "#FF0000",
        strokeOpacity: 1.0,
        strokeWeight: 2
    });
    flightPath.setMap(map);
}

function showError(error) {
    switch (error.code) {
        case error.PERMISSION_DENIED:
            x.innerHTML = "User denied the request for Geolocation.";
            break;
        case error.POSITION_UNAVAILABLE:
            x.innerHTML = "Location information is unavailable.";
            break;
        case error.TIMEOUT:
            x.innerHTML = "The request to get user location timed out.";
            break;
        case error.UNKNOWN_ERROR:
            x.innerHTML = "An unknown error occurred.";
            break;
    }
}

function clearWatch() {
    navigator.geolocation.clearWatch(showPosition);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:33:55.140

好吧，对我来说，这个问题非常清楚，甚至为新成员提供了一个 jsfiddle，+1。

你的问题是2倍：

您使用局部变量`distance`来构建您的`x.innerHTML`字符串。但是，`distance`仅在`else`if 语句的子句中定义（精确分配）。

其次，您在 block 中使用“函数声明” `{}`，这在语法上是非法的！这是因为 Blocks 只能包含 Statements，而不是 SourceElements，FunctionDeclaration 是。
因此，在 if/else/while/for 块中，您必须使用“函数表达式”；
例如：`var identifier=function(//args){//code};`
*这就是 JSFiddle 中的 JSHint 给出的错误消息的原因。*

请参阅[此小提琴更新](http://jsfiddle.net/dnUTx/1/)以查看我的更改（只是使 jshint 验证，但由于这只是某些代码的一部分，因此我无法进一步尝试）。

我在你的函数中`var distance=0`的第一个 - 子句之前添加了一个局部变量，并将你的 - 子句更改为一个内部变量。`if``showPosition``function declaration``function expression``else`

祝你好运！

# c# - 如何获取反序列化对象的 json 源？json.net

> ID：15663099
> 
> 赞同：0
> 
> 时间：2013-03-27T15:45:58.397
> 
> 标签：c#, json.net, deserialization

我正在使用 json.net

将json反序列化为对象后，我想获取该对象的json源

例如

```
objParent:{
  objChild1: {name:"testObj"},
  objChild2: {age: 25}
} 
```

在 C# 代码中

```
public ObjChild1
{
  public string name {get;set;}

  [JsonIgnore]
  public string JsonSource { get; set; }    //objChild1: {name:"testObj"}
}

public ObjChild2
{
  public int age {get;set;}

  [JsonIgnore]
  public string JsonSource { get; set; }   //objChild2: {age: 25}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:31:42.350

我没有安装 json.net，但是使用标准类，您可以简单地将单个对象序列化回 JSON 字符串，如下所示：

```
...
    public static class JSONHelper
    {
        public static string ToJSONString(this object obj)
        {
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            return serializer.Serialize(obj);
        }
    }
...

    public ObjChild1
    {
        public string name {get;set;}

        [ScriptIgnore]
        public string JsonSource { get { return this.ToJSONString(); } }
    }    

    public class ObjChild2
    {
        public int age {get;set;}

        [ScriptIgnore]
        public string JsonSource { get { return this.ToJSONString(); } }
    } 
```

# javascript - jQuery - 隐藏 div，然后在点击时显示

> ID：15663101
> 
> 赞同：0
> 
> 时间：2013-03-27T15:46:03.137
> 
> 标签：javascript, jquery

所以我有一个 div，我想在单击箭头时从另一个 div 后面向下滑动 - 然后在单击表单按钮后再次隐藏。我可以编写大部分代码，但是我不明白如何从视图中隐藏 div，然后使用 slideToggle 使其下拉。

编辑：正如下面的人所建议的（谢谢），事实证明 slideToggle() 不是我需要的，而是 animate() - 下面的代码似乎不起作用，我添加了一个指向 jQuery UI 的链接但仍然没有。

HTML

```
 <div class="schedule">
        <div class="scheduletop">
            <a href="/"><img src="/images/audit.png"></a>
        </div><!-- .scheduletop -->
        <div class="schedulebottom">
            <?php echo do_shortcode("[contact-form-7 id='61' title='Audit']"); ?>
        </div><!-- .schedulebutton -->
        <div class="thestuff">
            <h3>TEST!</h3>
        <div class="slide">
            CLICK TEST TO SLIDE
        </div><!-- .slide -->
        </div><!-- .thestuff -->
    </div><!-- .schedule --> 
```

jQuery

```
$(document).ready(function() {
$(".slide").click(function() {
        $(".thestuff").animate({"down": "150px"}, "slow");
    });
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:37:02.930

正如你被告知的那样，你应该使用 .animate()。
我在[这里](http://jsfiddle.net/cAyaV/3/)做了一个简单的例子。
这是js代码

```
$(document).ready(function () {
    $(".thestuff").click(function () {
        $el = $(this).find(".slide");
        if (!$el.data('up')) {
            var h3Margin = parseInt($(this).children().eq(0).height(), 10);
            var margin = "-" + ($el.height() + h3Margin) + "px";
            $el.css("z-index", -10);
            $el.animate({
                "margin-top": margin
            });
            $el.data('up', true);
        } else {
            $el.animate({
                "margin-top": 0
            }, {
                complete: function () {
                    $el.css("z-index", 1);
                }
            });

            $el.data('up', false);
        }
    });
}); 
```

你也可以使用 opacity 代替 z-index 但这取决于你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:37:09.047

```
 $(".slide").animate(
        { top: "+=150" }, 
        1000, 
        function () {
            $(this).hide();
        }
    ); 
```

上面的代码将通过增加“top”属性将你的 div 动画向下 150px。然后当它完成动画时，它会隐藏你的 .slide div。

编辑：那里的“1000”说，需要1秒钟才能完成动画。

edit2：哦，还要确保 .slide 将属性“位置”设置为“相对”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T15:58:00.207

`slideToggle()`不是您在这种情况下应该使用的功能。它只会改变匹配元素的高度，而`.animate()`另一方面，该方法可以将您的 div 移动到所需的方向，但它不会在动画完成时隐藏元素，因此如果您想使用回调，则应使用实现这一目标。如果你想在另一个 div 后面放置一个 div，你应该使用`z-index`css 属性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-27T16:40:36.490

好吧，看来我可以通过 slideToggle() 实现我正在寻找的东西，我只需将主要内容容器设置为在单击之前不显示（添加 display: none; 到 CSS）。

```
$(document).ready(function() {
$(".slide").click(function() {
    $(".thestuff").slideToggle("slow");
    });
}); 
```

对于任何可能试图找到类似解决方案的人，请检查[jsfiddle](http://jsfiddle.net/6JttU/)

# javascript - iframe 导致 css 弹出问题

> ID：15663102
> 
> 赞同：0
> 
> 时间：2013-03-27T15:46:03.223
> 
> 标签：javascript, jquery, html, css, iframe

我对 Web 开发相当陌生，并且我所做的一切都是自学的。我有一个 iframe，其中有一个页面，其中有一个由 jquery 调用的 css 和 javascript 弹出窗口。应该发生的是当一个链接被按下时，在转到下一页之前，它会显示在一个带有阴影背景的弹出窗口中。这是我的 JavaScript 代码：

```
$SearchListings.on("click", "a", function (e) {
     e.preventDefault();
     href = e.target.href;
     itemnum = getItemNum(href);
     var dataString = //urlhere
     $.get(dataString, function (data) {
         $linkShade.fadeIn();
         $linkModal.html(data).delay(500).fadeIn();
         Galleria.loadTheme('js/galleria.classic.min.js');
         $('#galleria').galleria({ lightbox: true });
     });
 });

 $linkShade.on("click", closeModal);
 $linkModal.on("click", ".modalCancel", closeModal);

 $linkModal.on("click", ".modalBtn", function (e) {
     e.target.href = href;
 });` 
```

这是涉及的CSS

```
#linkModal {
background: white;
border: 10px solid black;
bottom: 0;
color: black;
display: none;
font-family: Helvetica, "Helvetica Neue", Arial, sans-serif;
height: 700px;
left: 0;
margin: auto;
position: fixed;
right: 0;
top: 0;
width: 800px;
overflow: scroll;

} 
```

我的问题是如何让弹出窗口显示并居中于用户在页面上的位置而不仅仅是居中于 iframe 中的屏幕。如果这解释得不好，我很抱歉。这是我的第一篇文章。大多数情况下，我来这里是为了找到我的答案，从来不需要发布任何东西。如果可以的话请帮忙。谢谢！

编辑＃1：这是[jsfiddle](http://jsfiddle.net/yUnfa/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:24:30.877

不幸的是，您无法从 iFrame 中的父页面访问任何内容，例如屏幕大小，以便通过 JavaScript 设置值。并且子页面中的 css 仅与包含 iFrame 的窗口的解释“屏幕大小”相关。

如果您确实有一个固定的布局，您可以将屏幕大小作为查询字符串参数传递给您的 iFrame 页面。

```
var $iframe = $("#myIframe");
$iframe.attr("src", "iFrame.html?parentHeight=" + $(window).height() 
                                    + "&parentWidth=" + $(window).width() 
                                    + "&iFrameHeight=" + $iframe.height()
                                    + "&iFrameWidth=" + $iframe.width(); 
```

然后，您可以在子页面加载时进行一些数学运算，以设置模态对话框的位置，使其显示为居中，但它仍然必须包含在您的 iFrame 中。

# python - 排除特定域的 URL 正则表达式不正确匹配

> ID：15663104
> 
> 赞同：0
> 
> 时间：2013-03-27T15:46:08.547
> 
> 标签：python, regex

我正在尝试将某些表达式与正则表达式匹配，但它不起作用。我想匹配一个不以`http://www.domain.com`. 这是我的正则表达式：

```
^https?:\/\/(www\.)?(?!domain\.com) 
```

我的正则表达式有问题吗？

我想匹配以 http:// 开头但与[http://site.com](http://site.com)不同的表达式 例如：

```
/page.html => false
http://www.google.fr => true
http://site.com => false
http://site.com/page.html => false 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T16:02:58.633

使用它来匹配没有您提到的域的 URL：`https?://(?!(www\.domain\.com\/?)).*`

实例：[http ://regexr.com?34a7p](http://regexr.com?34a7p)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:06:56.483

这里的问题是，当正则表达式引擎在否定前瞻中遇到成功匹配时，它将将该匹配视为失败（如预期的那样）并回溯到`(www\.)`量化为可选的前一个组，然后查看表达式是否成功没有它. 这是你看过的。

这可以通过应用原子分组或所有格量词来“忘记”回溯的可能性来解决。不幸的是，python 正则表达式本身不支持这一点。相反，您将不得不使用效率低得多的方法：使用更大的前瞻。

```
^https?:\/\/(?!(www\.)?(domain\.com)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:55:12.070

你想要一个否定的前瞻断言：

```
^https?://(?!(?:www\.)?site\.com).+ 
```

这使：

```
>>> testdata = '''\
... /page.html => false
... http://www.google.fr => true
... http://site.com => false
... http://site.com/page.html => false
... '''.splitlines()
>>> not_site_com = re.compile(r'^https?://(?!(?:www\.)?site\.com).+')
>>> for line in testdata:
...     match = not_site_com.search(line)
...     if match: print match.group()
... 
http://www.google.fr => true 
```

请注意，该模式不包括`www.site.com` *和* `site.com`：

```
>>> not_site_com.search('https://www.site.com')
>>> not_site_com.search('https://site.com')
>>> not_site_com.search('https://site-different.com')
<_sre.SRE_Match object at 0x10a548510> 
```

# unit-testing - 可访问的持续集成

> ID：15663108
> 
> 赞同：1
> 
> 时间：2013-03-27T15:46:15.873
> 
> 标签：unit-testing, continuous-integration, accessibility

我正在寻找一个可供盲人用户访问的持续集成套件。我似乎找不到一个。TeamCity 看起来非常不错，但没有可访问性支持。是否有盲人可访问的持续集成解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:38:46.580

从我自己的经验来看，CruiseControl 似乎还不错。我只使用了 .NET 版本，它带有 Windows 的任务托盘图标，所以我不确定其他版本是否有。但是我认为是通用的 Web 界面是可以访问的。我一直将它与 NVDA（非可视桌面访问）v2012.3.1 一起使用。恐怕这是我迄今为止唯一尝试过的一个。但我希望这会有所帮助。

# jquery - 向 jVectorMap 添加标记

> ID：15663113
> 
> 赞同：0
> 
> 时间：2013-03-27T15:46:34.517
> 
> 标签：jquery, jquery-plugins, vector, jvectormap

所以，

我已经设法使用 jVectorMap 插件获得要显示的自定义地图，并且我正在尝试添加自定义标记，但是当我按照此处的示例进行操作时：http: [//jvectormap.com/examples/mall/](http://jvectormap.com/examples/mall/)没有任何反应。我只是在代码中遗漏了一些简单的东西吗？

这是我在添加标记之前的代码：

```
 //@code_start
      $(function(){
        $('#usmxmap').vectorMap({
          map: 'map',
          regionsSelectable: false,
          markersSelectableOne: true,
          backgroundColor: '#cfdbdd',
          regionStyle: {
            initial: {
      fill: '#5e7073',
      "fill-opacity": 1,
      stroke: 'none',
      "stroke-width": 0,
      "stroke-opacity": 1
      },
      hover: {
      fill: 'black'
      },
      selected: {
      fill: 'yellow'
      },
      selectedHover: {
      }
      },
        });
      });
      //@code_end 
```

产生的 JsFiddle：http: [//jsfiddle.net/73aze/5/](http://jsfiddle.net/73aze/5/)

这是我必须添加标记的内容：

```
//@code_start
      $(function(){
        $('#usmxmap').vectorMap({
          map: 'map',
          regionsSelectable: false,
          markersSelectableOne: true,
          backgroundColor: '#cfdbdd',
          markers: [{
          coords: [60, 110],
          name: 'Escalator 1',
          style: {fill: 'yellow'}
          }],
          regionStyle: {
            initial: {
      fill: '#5e7073',
      "fill-opacity": 1,
      stroke: 'none',
      "stroke-width": 0,
      "stroke-opacity": 1
      },
      hover: {
      fill: 'black'
      },
      selected: {
      fill: 'yellow'
      },
      selectedHover: {
      }
      },
        });
      });
      //@code_end 
```

正如您从 jsFiddle ( [http://jsfiddle.net/Z9u4T/3/](http://jsfiddle.net/Z9u4T/3/) ) 中看到的那样，这只会导致地图消失，我无法确定我错过了什么。有什么想法吗？

马卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T21:29:40.893

你的文件有点乱`jsfiddles`。试试[这个 jsfiddle](http://jsfiddle.net/3xZ28/154/)。

这是您[修改后的第二个 jsfiddle](http://jsfiddle.net/Z9u4T/20/)。从 github 导入 raw 显然是个问题。我改为链接到`jquery-jvectormap-1.2.2.min.js`jvectormap 的网页，现在它可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T10:08:46.517

`}, }); }); //@code_end`

一定是

`} }); }); //@code_end`

# odbc - [unixODBC][Driver Manager]HP -UX 上的游标状态无效

> ID：15663120
> 
> 赞同：0
> 
> 时间：2013-03-27T15:46:51.757
> 
> 标签：odbc, hp-ux

我在我们的驱动程序中使用开源 ODBC 驱动程序管理器，我收到此错误 24000(0)[unixODBC][Driver Manager]Invalid cursor state 我试图在我的驱动程序中调试但没有帮助。请你解释一下这个错误是来自驱动程序管理器还是来自我的驱动程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:03:29.333

错误来自驱动程序管理器。您将不按顺序调用 ODBC 函数。打开驱动程序管理器跟踪，在您的 odbcinst.ini 添加

```
[ODBC]
Trace = Yes
TraceFile = /tmp/sql.log 
```

然后运行您的应用程序并查看导致错误的原因。

# ios - MFMailComposeViewController canSendMail 返回 YES 但不在 iOS 中发送邮件

> ID：15663121
> 
> 赞同：4
> 
> 时间：2013-03-27T15:46:51.743
> 
> 标签：ios, mfmailcomposeviewcontroller, mfmailcomposer

以下是我在邮件中发送附件的代码。这工作正常。我可以发送邮件，但我并不总是收到邮件。

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;

// Set the subject of email
[picker setSubject:@"My data file"];

// Add email addresses

[picker setToRecipients:[NSArray arrayWithObjects:emailId, nil]];

// Fill out the email body text
NSString *emailBody = @"Hello, \n Please find the data from the iOS app in the attachments.\n\n Thank you.\nMy Team.";

// This is not an HTML formatted email
[picker setMessageBody:emailBody isHTML:NO];

// Create NSData object from file
NSData *exportFileData = [NSData dataWithContentsOfFile:filePath];

// Attach image data to the email
[picker addAttachmentData:exportFileData mimeType:@"text/csv" fileName:  [self.CSVNameTextField text]];

// Show email view

if ([MFMailComposeViewController canSendMail]) {

    [self presentModalViewController:picker animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T16:06:28.583

使用应用程序发送邮件后，转到 iPhone 上的邮件软件，您很可能会在发件箱中找到邮件。

因为 MFMailComposeViewController 只会将邮件转发到邮件软件，它并不关心邮件旁边会发生什么。因此，如何以及何时更新发件箱取决于您的邮件软件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-03T06:40:04.417

我有同样的问题，我发现它会通过邮箱并说它已发送，然后什么都不会通过。

大约 20-30 分钟后，第一个通过了，然后我发送的其余部分也逐渐通过了。

我不知道为什么要花这么长时间，如果我发现我会编辑这个答案，但肯定要等一个小时才能假设你的代码被破坏了。

希望这对像我一样可能一遍又一遍地拖网代码的人有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-14T06:17:34.330

就我而言，我必须手动打开 iphone 邮件应用程序，然后立即发送和接收邮件。

# mysql - MySQL存储过程使用IN变量名而不是值

> ID：15663124
> 
> 赞同：1
> 
> 时间：2013-03-27T15:46:59.290
> 
> 标签：mysql, stored-procedures

我定义了以下存储过程：

```
DROP PROCEDURE IF EXISTS `Create_Domain_Table`;
DELIMITER ;;
PROCEDURE `Create_Domain_Table`(IN newTable VARCHAR(255))
BEGIN
       CREATE TABLE newTable LIKE `domain_template`;
END;;
DELIMITER ; 
```

但是，当我调用程序时，例如

```
CALL Create_Domain_Table('test_domain_table'); 
```

它创建一个名称为 newtable 而不是 test_domain_table 的新表。

我的语法有问题还是我错误地引用了参数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:49:03.227

对此使用*动态 SQL*，

```
DROP PROCEDURE IF EXISTS `Create_Domain_Table`;
DELIMITER ;;
CREATE PROCEDURE `Create_Domain_Table`(IN newTable VARCHAR(255))
BEGIN

   SET @sql = CONCAT('CREATE TABLE `', newTable,'` LIKE domain_template');

   PREPARE stmt FROM @sql;
   EXECUTE stmt;
   DEALLOCATE PREPARE stmt;

END;;
DELIMITER ; 
```

# javascript - jQuery toggle() 方法的最佳替代方案？

> ID：15663125
> 
> 赞同：3
> 
> 时间：2013-03-27T15:47:00.847
> 
> 标签：javascript, jquery

jQuery 弃用了 toggle() 方法。这是一种轻松切换类的方法，在搜索 stackoverflow 时，我发现了各种其他方法来完成相同的任务（[替代 jQuery 的支持 eventData 的 .toggle() 方法？](https://stackoverflow.com/questions/2459153/alternative-to-jquerys-toggle-method-that-supports-eventdata)）。哪个 jQuery 片段应该是为这个标记切换类的理想选择？

谢谢

标记：

```
<a href="#">Toggle Class</a>
<div class="a"></div> 
```

CSS：

```
.a{
background: #f2f2f2;
}
.b{
background: #ededed;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-27T15:48:19.703

在这种情况下，只需使用[`.toggleClass()`](http://api.jquery.com/toggleClass).

```
$("a").click(function(){
    $("div").toggleClass("a b");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:49:02.117

[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

`toggleClass()`似乎是你想要/需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T21:39:02.350

如果您只有 1 个类可以切换（启用和删除它），下面应该可以正常工作：

```
$("a").click(function(){
        $(this).toggleClass('class1', '');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-11T06:36:10.500

`toggle()`用于切换视图的功能。哪个有性能问题。（建议不要使用）

`toggleClass()`用于切换类。

情况1

```
<div id='mydiv' class="class1"></div>

$('#mydiv').toggleClass('class1 class2');

output: <div id='mydiv' class="class2"></div> 
```

案例：2

```
<div id='mydiv' class="class2"></div>

$('#mydiv').toggleClass('class1 class2');

output: <div id='mydiv' class="class1"></div> 
```

案例：3

```
<div id='mydiv' class="class1 class2 class3"></div>

$('#mydiv').toggleClass('class1 class2');

output: <div id='mydiv' class="class3"></div> 
```

# css - 批处理 Ruby Sass 手表字符串

> ID：15663129
> 
> 赞同：1
> 
> 时间：2013-03-27T15:47:12.963
> 
> 标签：css, ruby, directory, sass, watch

我想从根目录运行 Ruby/Sass 我使用批处理文件保存了所有项目。

Ruby 版本：1.9.3 Sass 版本：3.2.7

例如：

D:\所有项目

我想从根文件夹运行 SASS.bat ，它应该自动在所有项目上执行 watch 函数 watch for sass，如下所示：

```
sass --watch D:\all-projects/sass:public/stylesheets 
```

此刻我得到了这个：

```
@echo off
cmd.exe /E:ON /K C:\Ruby193\bin\setrbvars.bat

sass --watch D:\all-projects/sass:public/stylesheets 
```

这只会启动根目录中的 ruby​​，但**不会运行 Sass 的 watch 函数**。

我正在寻找这个解决方案，因为它会使 Sass 的使用变得更加容易和有效。

目前你必须运行 RUBY -> 查找目录 -> 运行 sass --watch ...

我怎样才能做到这一点？为了使这项工作，我应该改变什么？

我欢迎所有提示和帮助。

先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:01:01.390

试试这个，看看它是否有效：

```
@echo off
cmd.exe /E:ON /K C:\Ruby193\bin\setrbvars.bat
START /B sass --watch D:\all-projects\sass:public\stylesheets
PAUSE 
```

我过去为 SASS 创建了批处理文件，并做了类似的事情。但是我从来不需要在 BATCH 文件中运行 Ruby。所以我有点好奇为什么你需要开始 ruby​​。

**编辑：（基本示例）**

*这就是使用 SASS 创建基本批处理文件所需的全部内容。*

- 使用以下代码创建一个名为**test.bat的批处理文件并保存到您的桌面。**

```
@echo off 
sass --watch file.scss
PAUSE 
```

-创建一个名为**test.scss**的空白 .scss 文件并保存到您的桌面。- 现在运行你的批处理文件，它应该创建**file.css**并说......

```
>>> Sass is watching for changes. Press Ctrl-C to stop.
overwrite file.css 
```

# sql - PostgreSQL - 查询两个不同列的值之间的记录

> ID：15663133
> 
> 赞同：0
> 
> 时间：2013-03-27T15:47:22.160
> 
> 标签：sql, postgresql

我被迫进入一个非正常化的情况。我有一个报告、驱动程序、警报和警报代码表。都有关系。但是，当使用驱动程序 ID 填充的 driver_id 字段创建报告时，所有后续报告也应与驱动程序相关联（即使不会填充这些报告的 driver_id 列），直到创建其警报其警报代码的报告有一个名称字段等于“内部围栏”。理想情况下，填充每个报告的 driver_id 字段会很好，但这不是我所处的情况。

*因此，我尝试构建最有效的查询，但我被困在查询中，该查询在指定日期和给定月份内警报代码具有“内部围栏”字符串的报告之间获取报告。*

这是我想出的，但给出了“运算符不存在：布尔 <= 字符变化”错误：

```
SELECT reports.* FROM reports 
INNER JOIN alerts ON alerts.report_id = reports.id 
INNER JOIN alert_codes ON alert_codes.id = alerts.code 
WHERE (reports.unit_id = 3000 AND extract(MONTH FROM reports.time) = 3 
AND extract(YEAR FROM reports.time) = 2013) 
BETWEEN reports.time = '2013-03-20 15:21:05.379941' 
AND alert_codes.name = 'Inside fence'
ORDER BY reports.time asc 
```

有些东西告诉我，我不能在 BETWEEN 子句中使用两个不同的列。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:13:01.747

您可以执行以下操作：

```
SELECT reports.* FROM reports
WHERE 
reports.time >= '2013-03-20 15:21:05.379941' 
AND reports.time <= (
    SELECT min(r2.time) from reports r2 
    INNER JOIN alerts ON alerts.report_id = r2.id 
    INNER JOIN alert_codes ON alert_codes.id = alerts.code 
    WHERE r2.time >= '2013-03-20 15:21:05.379941' 
    AND alert_codes.name = 'Inside fence') 
```

我排除了该`unit_id = 3000`条款。您可以将它放在有意义的地方（在外部`WHERE`或内部`WHERE`）。

# actionscript-3 - 使用一个文本输入显示更多文本

> ID：15663144
> 
> 赞同：0
> 
> 时间：2013-03-27T15:47:43.440
> 
> 标签：actionscript-3

是否可以显示多个文本，`TextField`如下所示：

```
Susan            50
Bob              100
Michael          30 
```

这适用于排行榜

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:12:34.870

我会说对于这样的排行榜，您需要两个相邻的 TextField，具有相同的`defaultTextFormat`属性，都设置为`multiline=true; wordwrap=false`，并在左侧填充名称，右侧填充分数。这样您就可以避免使用等宽字体。一个例子：

```
public class Leaderboard extends Sprite {
    var namesTF:TextField;
    var scoresTF:TextField;
    var dtf:TextFormat;
    ...
        // this goes into the constructor
        dtf=new TextFormat(...);
        namesTF.defaultTextFormat=dtf;
        scoresTF.defaultTextFormat=dtf;
    ...
    public function displayScores(scores:Array):void {
        // scores are objects like {name:Susan,score=200}
        scores.sortOn("score",Array.NUMERIC+Array.DESCENDING);
        namesTF.text='';
        scores.text='';
        for each (var o:Object in scores) {
            namesTF.appendText(o.name+'\n');
            scoresTF.appendText(o.score.toString()+'\n');
        }
    }
} 
```

将界面调整为记录您的分数的方式。

# asp.net-mvc-3 - 在 MVC 中使用分页和样式的正确组合是什么？

> ID：15663146
> 
> 赞同：1
> 
> 时间：2013-03-27T15:47:44.913
> 
> 标签：asp.net-mvc-3, webgrid

我可能找不到最好的方法来问这个问题，但我正在通过尝试建立一个小型网站来学习 MVC。这应该是一个购物网站。在这里，我负责在页面上显示项目。我是通过 webgrid 来的，但它以表格形式显示项目。我应该学习html中的表格技巧吗？因为我听说可以修改它们以给出任何视图？或者还有其他替代 webgrid 的方法吗？我真的很喜欢它的分页功能。我认为我现在还不够好，无法为此编写代码。我尝试了一些谷歌搜索并找到了 jqgrid 但这似乎也适用于数据的表格表示。从昨晚开始，我一直在尝试这个 webgrid 的东西，但它真的不是很好。还有什么选择？当我可以提供从控制器到视图的产品列表（模型）时，我的意思是足够抽象的东西，可以为我提供购物网站产品页面的漂亮外观？然后呢？更新：基本上我想知道我错过了什么？修改表格以创建良好的视图？正确使用 webgrid？还是我错误地使用了 webgrid？在这个场景中应该使用其他东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:29:21.627

您可以看一下如何使用 Twitter Bootsrap 设置 WebGrid 样式的简单示例：[WebMatrix WebGrid – Re-Working the Pager](http://www.mdobie.co.uk/2012/12/02/webmatrix-webgrid-re-working-the-pager/)。

您还可以查看[Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html)站点，了解可用于转换表格数据的其他方式的示例。

# java - 如何从 JInternalFrame 访问 jpanel（在 JDesktopPane 中）

> ID：15663148
> 
> 赞同：-1
> 
> 时间：2013-03-27T15:47:51.223
> 
> 标签：java, swing, jpanel, jinternalframe, jdesktoppane

我想从 JInternalFrame 设置对 jpanel（在 JDesktopPane 中）的访问，我将它设置为 public，但是当我进行这样的测试时它不会给出“null”：

```
JDesktop frameP = new JDesktop();
frameP.jPanel1.setVisible(true); //This is what I want but it doesn't work

System.out.println("Name " + frameP.jPanel1.getName()); 
```

所以最后一行给了我null，这意味着他没有得到JPanel。

我也尝试了该代码：

```
 for(int k=0; k<frameP.getContentPane().getComponentCount();k++ ){
             if(frameP.getContentPane().getComponent(k)instanceof  JPanel){
                 JPanel pnl = (JPanel) frameP.getContentPane().getComponent(k);
                 if(pnl.getName().equals("jPanel1")){
                     pnl.setVisible(true);
                 }
                 System.out.println("Nom pnl: " +pnl.getName()); // That gives null too
             }
         } 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T14:39:11.967

我只是解决了我这样做的问题：

```
JDesktop.jpnlGauche.setVisible(false);
JDesktop.jpnlHaut.setVisible(false); 
```

# sql - 合并 2 个表以加入

> ID：15663155
> 
> 赞同：0
> 
> 时间：2013-03-27T15:48:15.523
> 
> 标签：sql, postgresql, left-join, cross-join, generate-series

我正在使用 Postgres 9.1，我有一个查询返回 2 列，即使没有数据存在，我也希望复制这些列。我的查询的重要部分是

```
SELECT DATE_TRUNC('week', tx_dttm) AS interval_time, institution_id FROM (...)
WHERE institution_id IN (1, 3, 4, 5, 7, 9) GROUP BY interval_time, institution_id 
```

正如我所期望的那样，这将返回给我所有机构和所有 interval_times。现在我也想要没有数据的行。我可以执行以下操作来一次获取任何一个

```
SELECT DATE_TRUNC('week', tx_dttm) AS interval_time, institution_id FROM (...)
WHERE institution_id IN (1, 3, 4, 5, 7, 9) GROUP BY interval_time, institution_id
RIGHT JOIN generate_series('2012-02-03', '2013-02-18', interval '1 week')
ON DATE_TRUNC('week', generate_series) = interval_time 
```

或者

```
SELECT DATE_TRUNC('week', tx_dttm) AS interval_time, institution_id FROM (...)
WHERE institution_id IN (1, 3, 4, 5, 7, 9) GROUP BY interval_time, institution_id
RIGHT JOIN unnest(array[1, 3, 4, 5, 7, 9]) AS all_institution_id
ON all_institution_id = institution_id 
```

但是，我想将它们结合起来，以便获得所有机构的所有 interval_times。似乎最好的办法是创建某种中间表，其中包含为每个 interval_time 重复的每个机构 ID，然后在其上进行 RIGHT JOIN，但我不知道该怎么做。任何帮助将非常感激。

编辑

玩了一会儿之后，我想做的似乎是以下，但我的语法是错误的

```
SELECT DATE_TRUNC('week', tx_dttm) AS interval_time, institution_id FROM (...)
WHERE institution_id IN (1, 3, 4, 5, 7, 9) GROUP BY interval_time, institution_id
RIGHT JOIN unnest(array[1, 3, 4, 5, 7, 9]) AS all_institution_id,
generate_series('2012-02-03', '2013-02-18', interval '1 week')
ON DATE_TRUNC('week', generate_series) = dose_hsts.interval_time
AND all_institution_id = institution_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:57:23.420

我认为您`CROSS JOIN`在执行此操作之前需要一个`LEFT JOIN`（在此处将其替换`RIGHT JOIN`为相同的效果）：

```
SELECT interval_time::date , institution_id, ...
FROM   generate_series(date_trunc('week', timestamp '2012-02-03')
                     , timestamp '2013-02-18'
                     , interval '1 week')   AS d(interval_time)
CROSS  JOIN unnest(array[1, 3, 4, 5, 7, 9]) AS i(institution_id)
LEFT   JOIN (
   SELECT date_trunc('week', tx_dttm) AS interval_time, institution_id
   FROM   ...
   GROUP  BY 1, 2
   ) x USING (interval_time, institution_id); 
```

关于`generate_series()`：

*   [在 PostgreSQL 中生成两个日期之间的时间序列](https://stackoverflow.com/questions/14113469/generating-time-series-between-two-dates-in-postgresql/46499873#46499873)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:40:03.587

我认为您想要的是 UNION 两个查询。尝试这个：

```
SELECT DATE_TRUNC('week', tx_dttm) AS interval_time, institution_id FROM (...)
WHERE institution_id IN (1, 3, 4, 5, 7, 9) GROUP BY interval_time, institution_id
UNION
SELECT DATE_TRUNC('week', tx_dttm) AS interval_time, institution_id FROM (...)
WHERE institution_id IN (1, 3, 4, 5, 7, 9) GROUP BY interval_time, institution_id
RIGHT JOIN generate_series('2012-02-03', '2013-02-18', interval '1 week')
ON DATE_TRUNC('week', generate_series) = interval_time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:40:15.047

我通过使用以下语法弄清楚了

```
SELECT DATE_TRUNC('week', tx_dttm) AS interval_time, institution_id FROM (...)
WHERE institution_id IN (1, 3, 4, 5, 7, 9) GROUP BY interval_time, institution_id
RIGHT JOIN (SELECT * FROM unnest(array[1, 3, 4, 5, 7, 9]) AS all_institution_id,
generate_series('2012-02-03', '2013-02-18', interval '1 week'))
ON DATE_TRUNC('week', generate_series) = dose_hsts.interval_time
AND all_institution_id = institution_id 
```

# c# - 在自定义 UITypeEditor 中使用 OR'ed 枚举

> ID：15663166
> 
> 赞同：0
> 
> 时间：2013-03-27T15:48:49.777
> 
> 标签：c#, enums, enum-flags

我在编写的自定义控件上有一个属性，它是基于标志的枚举。我创建了自己的自定义控件，以一种合乎逻辑的方式对其进行编辑，并从我自己的 UITypeEditor 中调用它。问题是，当我尝试存储的值是它告诉我该值无效的标志的组合时，Visual Studio 会生成错误。

例子：

```
public enum TrayModes
{ 
    SingleUnit = 0x01
  , Tray = 0x02
  , Poll = 0x04
  , Trigger = 0x08
}; 
```

如果我要保存`SingleUnit | Trigger`的值是生成的值是 9。这反过来会产生以下错误：

![属性“TrayMode”的代码生成失败。 错误是：'值'9'对于枚举'TrayModes'无效。'](../Images/b3797e9181556a90942cd0f0edbda958.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:48:49.777

在枚举上使用[Flags](http://msdn.microsoft.com/en-us/library/vstudio/system.flagsattribute.aspx)属性将防止错误发生。这对我来说是个谜，因为在没有标志的情况下存储 ORed 枚举是有效的，并且可以在代码中完成（使用适当的演员表）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:58:28.770

您必须`[Flags]`在您的枚举声明之前添加

```
[Flags]
public enum TrayModes
{ 
    SingleUnit = 0x01
   , Tray = 0x02
   , Poll = 0x04
   , Trigger = 0x08
}; 
```

考虑使用 HasFlag 函数来检查设置的标志

```
TrayModes t=TrayModes.SingleUnit|TrayModes.Poll;
if(t.HasFlag(TrayModes.SingleUnit))
//return true 
```

编辑：这是因为带有 flags 属性的枚举以不同的方式受到威胁，正如您在[http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)中的示例中所见 A To string of enum with并且没有 Flags 属性显示它们的不同之处

没有 FlagsAttribute 的 Enum 值的所有可能组合：

```
 0 - Black
  1 - Red
  2 - Green
  3 - 3
  4 - Blue
  5 - 5
  6 - 6
  7 - 7
  8 - 8 
```

带有 FlagsAttribute 的枚举值的所有可能组合：

```
 0 - Black
  1 - Red
  2 - Green
  3 - Red, Green
  4 - Blue
  5 - Red, Blue
  6 - Green, Blue
  7 - Red, Green, Blue
  8 - 8 
```

# avfoundation - CMTime 的纪元时间

> ID：15663168
> 
> 赞同：3
> 
> 时间：2013-03-27T15:48:52.197
> 
> 标签：avfoundation, cmtime

Apple 的 AVFoundation 文档对 CMTime 有以下内容：

“CMTime 的 epoch 编号通常设置为 0，但您可以使用它来区分不相关的时间线。例如，可以通过演示循环在每个周期递增 epoch，以区分循环 0 中的时间 N 和循环中的时间 N循环 1。”

我不喜欢这个例子。谁能详细说明？

# java - 比较两个 int 数组并输出新的和以前的项目

> ID：15663169
> 
> 赞同：1
> 
> 时间：2013-03-27T15:48:55.763
> 
> 标签：java, compare

我对Java真的很陌生。我需要知道两个数组之间的新项目和以前的项目。例子：

```
A1= {4,5,6};
A2={5,6,7};
result: new item is 7
    former item is 4\. 
```

我尝试这段代码没有结果：

```
import java.util.Arrays;
import java.util.List; 
Integer[] s1 = {4, 5, 6};
  Integer[] s2 = {5,6,7};
  List<Integer> s1List = new ArrayList(Arrays.asList(s1));
  for (Integer s : s2) {
    if (s1List.contains(s)) {
      s1List.remove(s);
    } 
    else {
      s1List.add(s);
    }
    System.out.println("nouveaux items =" + s1List);

  } 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:58:01.463

我了解您正在尝试的是：

```
Integer[] s1 = {3, 4, 5, 6};
Integer[] s2 = {3, 5, 6, 7};
List<Integer> newItems = new ArrayList<Integer>(Arrays.asList(s1));
newItems.removeAll(Arrays.asList(s2));
List<Integer> formerItems = new ArrayList<Integer>(Arrays.asList(s2));
formerItems.removeAll(Arrays.asList(s1));
System.out.println("New items: " + newItems);
System.out.println("Former items: " + formerItems); 
```

输出：

```
New items: [7]
Former items: [4] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:00:51.550

你快到了，只需添加两个列表 s1List 是旧项目，新项目是新列表

```
List<Integer> s1List = new ArrayList(Arrays.asList(s1));
List<Integer> newList = new ArrayList();

for (Integer s : s2) {
if (s1List.contains(s)) {
   s1List.remove(s);
 } 
 else {
   newList.add(s);
 }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:01:39.227

给定两个数组 a1 和 a2，您以前的项目将是 a1 中存在的项目，而不是 a2 中的项目，而新项目将正好相反。假设这是您的意思，该函数会`newItem(a1, a2)`查找 a2 中存在但 a1 中不存在的项目。与交换的数组一起`formerItems()`使用`newItems()`，因为逻辑保持不变。

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class FormerAndLast {

    public static void main(String[] args) {

        Integer[] s1 = { 4, 5, 6 };
        Integer[] s2 = { 5, 6, 7 };

        System.out.println("nouveaux items =" + newItems(s1, s2));

        System.out.println("former items =" + formerItems(s1, s2));
    }

    private static List<Integer> formerItems(Integer[] s1, Integer[] s2) {
        return newItems(s2, s1);
    }

    private static List<Integer> newItems(Integer[] a1, Integer[] a2) {
        List<Integer> list1 = Arrays.asList(a1);
        List<Integer> list2 = Arrays.asList(a2);

        List<Integer> newItems = new ArrayList<Integer>();

        for (Integer i : list2) {
            if (!list1.contains(i))
                newItems.add(i);
        }

        return newItems;
    }
} 
```

> PS：Java中的可执行代码应该驻留在main等函数中（初始化除外）

# jquery - 发布许多输入关系值 - jQuery

> ID：15663173
> 
> 赞同：0
> 
> 时间：2013-03-27T15:49:13.633
> 
> 标签：jquery, arrays

我有一个表单，用户可以向其中添加输入。所以他们可以添加他们想要的任意数量的输入。每次他们单击“添加新”按钮时，都会发生这种情况：

```
$('#add_specification').on('click', function(){
        var new_item = '<input type="text" class="specification_title" title="TITLE" /> : <input type="text" class="specification_desc" title="DESCRIPTION" /> ';
        $('#specifications_inputs_holder').append(new_item);
    }); 
```

正如你在上面的代码中看到的，每次点击都会有 2 个新的输入添加到表单中，第一个是标题，第二个是描述，现在假设用户点击了“添加新”按钮 3次，所以我们有 6 个输入框：

![在此处输入图像描述](../Images/90a698ca6f1cf0520f7fc8b261c4df40.png)

现在我想提交表单，我希望整个值可以像这样发送：

```
var specifications = ('Title 1=>Description 1','Title 2=>Description 2','Title 3=>Description 3'); 
```

所以在服务端我仍然可以看到彼此的相关数据，我怎么能做到这一点？

我认为我应该做的是使用 jQuery each() 和一个数组：

```
$('#specifications_inputs_holder input').each(function(count){
    specifications[count] = $(this).val();
}); 
```

但这听起来不是一个好的解决方案，有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:52:02.813

在 jQuery 中：

```
var spec = [];
$('.specification_title').each(function() {
  var index = $(this).attr('data-index');

  $(spec).push({$(this).val():$('.specification_desc[data-index='+index).val()});

}); 
```

在您的添加项目功能中：

```
var new_item = '<input type="text" data-index='+parseint($('.specification_title').length+1)+' class="specification_title" title="TITLE" /> : <input type="text" data-index='+parseint($('.specification_title').length+1)+' class="specification_desc" title="DESCRIPTION" /> '; 
```

如果您只能删除最后一项，这将起作用（对于数据索引）。否则，请改用增量全局变量。

[编辑]

以及如何更改输入名称以与内容同步，以检索好的数组......更快！

```
$('input[class^="specification"').change(function() {
  $(this).attr('name', $(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:59:28.683

您可以使用简单的 for 循环通过 XML 获取所有键/值对并将它们推送到数组：

```
var $title = $('.specification_title'),
    $desc =- $('.specification_desc'),
    arr = [];

for(var i=0;i<$title.length;i++){
    var key = $title.eq(i).val(),
        val = $desc.eq(i).val(),
        pair = {key:val};
    arr.push(pair);
} 
```

现在你有一个看起来像这样的数组：

```
[{title1:desc1},{title2:desc2},...,{titleX:descX}] 
```

这样在 PHP 端，您可以只使用输入的键。

# c# - 展平嵌套字典的最有效方法？

> ID：15663182
> 
> 赞同：2
> 
> 时间：2013-03-27T15:49:40.263
> 
> 标签：c#, linq, iteration

关键是构建`Key`字符串，就好像它是一个命名空间一样。使用递归执行此操作是我当前的实现，但我确信还有更多的堆栈友好选项（LINQ？迭代？）我还没有找到。几乎每个示例都过于简单，并且没有考虑基于密钥层次结构“命名空间”它们的能力。

这是我的字典布局的一个简单示例。希望这很容易理解 - 我想彻底。

我转换类似于此的 JSON（嵌套，以通过网络保存数据）：

```
"entity": {
    "foo": {
      "bar": {
        "baz": {
          "2": "description",
          "1": "title"
             }
          } 
```

进入一个`Dictionary<string,object>`. 当`Value is string`，那是“命名空间”的结尾。对该对象进行详细而令人困惑的观察：

```
[0] {[entity, Dictionary[String,Object]]}   KeyValuePair<string,object>
  Key   "entity"    string
  Value Count = 1   object {Dictionary<string,object>}
    [0] {[foo, Dictionary[String,Object]]}  KeyValuePair<string,object>
    Key "foo"   string
      Value Count = 12  object {Dictionary<string,object>}
      [0]   {[bar, Dictionary[String,Object]]}  KeyValuePair<string,object>
        Key "bar"   string
        Value   Count = 1   object {Dictionary<string,object>}
          [0]   {[baz, Dictionary[String,Object]]}  KeyValuePair<string,object>
          Key   "baz"   string
          Value Count = 3   object {Dictionary<string,object>}
            [0] {[3, title]}    KeyValuePair<string,object>
              Key   "3" string
              Value "title" object {string} 
```

这`KeyValuePair`最终会是：`"entity.foo.bar.baz.title.3", "3"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:32:21.877

这只是一个简单的treewalk。递归实现应如下所示：

```
static void Main( string[] args )
{
  Dictionary<string,object> nested = LoadNestedDictionary() ;
  Dictionary<string,string> flat   = new Dictionary<string, string>() ;
  Flatten(nested,flat) ;
  return;
}

/// <summary>
/// The wrapper method. Invoke this from your code
/// </summary>
/// <param name="input"></param>
/// <param name="output"></param>
private static void Flatten( IEnumerable<KeyValuePair<string,object>> input , Dictionary<string,string> output )
{
  foreach ( KeyValuePair<string,object> item in input )
  {
    string key   = item.Key   ;
    object value = item.Value ;
    if ( value is string )
    {
      output.Add(key,(string)value) ;
    }
    else if ( value is Dictionary<string,object> )
    {
      Flatten( key , (IEnumerable<KeyValuePair<string,object>>) value , output ) ;
    }
    else
    {
      throw new InvalidOperationException();
    }
  }
  return ;
}

/// <summary>
/// The core method. Called only from the wrapper method
/// </summary>
/// <param name="root"></param>
/// <param name="input"></param>
/// <param name="output"></param>
private static void Flatten( string root , IEnumerable<KeyValuePair<string,object>> input , Dictionary<string,string> output )
{
  foreach ( KeyValuePair<string,object> item in input )
  {
    string segment = item.Key ;
    string key     = root + "." + segment ;
    object value   = item.Value ;
    if ( value is string )
    {
      string s = (string) value ;
      output.Add(key,s) ;
    }
    else if ( value is Dictionary<string,object> )
    {
      Dictionary<string,object> d = (Dictionary<string,object>) value ;
      Flatten(key,d,output);
    }
    else
    {
      throw new InvalidOperationException();
    }
  }
  return ;
} 
```

# objective-c - xcode AVAudioPlayer 不产生声音

> ID：15663183
> 
> 赞同：0
> 
> 时间：2013-03-27T15:49:44.003
> 
> 标签：objective-c, xcode, avaudioplayer

我无法让 AVAudioPlayer 工作。但是，我可以让 AudioServices 正常工作。我的问题是为什么一个工作，而不是另一个？有什么区别？如果我仍然无法解决这个问题，我的下一个问题是 AudioServices 是否允许您循环和更改速度？这是我的最终目标。谢谢！

```
// this works
SystemSoundID soundID;
NSString *soundFile = [[NSBundle mainBundle]
                      pathForResource:@"explode" ofType:@"wav"];
AudioServicesCreateSystemSoundID((__bridge  CFURLRef)
                                 [NSURL fileURLWithPath:soundFile], & soundID);
AudioServicesPlaySystemSound(soundID);

// this does not
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                 pathForResource:@"explode" ofType:@"wav"]];
AVAudioPlayer *audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
[audioPlayer play]; 
```

# c# - 无法密封，因为它不是覆盖

> ID：15663185
> 
> 赞同：12
> 
> 时间：2013-03-27T15:49:46.453
> 
> 标签：c#, overriding, sealed

我有以下课程：

```
namespace Warnings
{
    public abstract class BaseWarningIntField : IWarningInnerDataField
    {
        public string PropName;

        public string HeaderCaption;

        public sealed WarningInnerDataType DataType
        {
            get { return WarningInnerDataType.Integer; }
        }
    }
} 
```

我希望最后一个属性`DataType`不可覆盖，因为它是整数类型的警告详细信息字段的基类，因此它需要始终返回正确的类型`WarningInnerDataType.Integer`。

无论如何，编译器给我以下错误：

> 'Warnings.BaseWarningIntField.DataType' 不能被密封，因为它不是覆盖

但是，据我所知，`override`这与我想要实现的目标完全相反。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-27T15:52:48.173

默认情况下，`C#`所有方法都是非虚拟的。您不能覆盖子类中的非虚拟方法。因此，像往常一样保留属性将使您免受子类覆盖它的影响。

`Sealed`是在类声明中用于继承限制的关键字，或用于停止类层次结构成员的虚拟链。但同样 - 这与虚拟方法和属性有关。

试图覆盖子类中的“正常”属性将导致编译错误

> “WarningIntField.DataType.get”：无法覆盖继承的成员“BaseWarningIntField.DataType.get”，因为它未标记为虚拟、抽象或覆盖

为了回答您的评论，我将提供一些代码示例来说明我的观点。您实际上不能限制派生类隐藏方法或属性。所以下一种情况是合法的，没有办法克服它（这与虚拟方法和用`new`关键字表示的方法有关）

```
class BaseClass
{
    public string Property {get; set;}
}

class DerivedClass : BaseClass
{
    //compiler will give you a hint here, that you are hiding a base class prop
    public string Property {get; set;}
} 
```

同样的方式你不能限制通过局部变量隐藏类中的字段，所以这种情况也是有效的。请注意，编译器还将帮助您注意，您正在通过局部变量隐藏类字段。这也与`readonly` `const`简单`static`领域有关。

```
int field = 0; //class field
void Foo()
{
    int field = 0; //local variable
} 
```

# mysql - MySQL - 选择今天的日期时间为 00:00:00 的最有效方法

> ID：15663193
> 
> 赞同：-6
> 
> 时间：2013-03-27T15:50:16.970
> 
> 标签：mysql, sql, select

如何选择当前日期的午夜？

`2013-03-27 00:00:00`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T15:51:22.220

```
SELECT *
FROM   TableName
WHERE  dateColumn = CURDATE() 
```

`CURDATE()`返回当前日期，时间设置为`00:00:00`。

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/fdb61/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T16:01:53.050

```
mysql> select cast(current_date() as datetime);
+----------------------------------+
| cast(current_date() as datetime) |
+----------------------------------+
| 2013-03-27 00:00:00              |
+----------------------------------+
1 row in set (0.00 sec)

mysql> 
```

# css - 将 6+ div 与每行 3 div 对齐

> ID：15663195
> 
> 赞同：2
> 
> 时间：2013-03-27T15:50:20.957
> 
> 标签：css, html, positioning

所以我必须在包装器 div 中对齐一些 div。这是代码：

```
<div id="tiles-wrapper">
    <div class="tile">asdfasdf</div>
    <div class="tile">asdfas</div>
    <div class="tile">asdf</div>
    <div class="tile">asdfasdf</div>
    <div class="tile">asdfas</div>
    <div class="tile">asdf</div>
</div> 
```

这是我的 CSS 代码：

```
/* TILES */
#tiles-wrapper{
    position: relative;
    margin-top: 20px;
    width: 960px;
    overflow: hidden;
}
.tile{
    width: 300px;
    height: 200px;
    margin-bottom: 20px;
    float: left;
    overflow: hidden;
    background-color: aqua;
} 
```

我需要在一行中有 3 个 div。每行中的第一个和最后一个 div 必须放置在包装 div 的边界，没有任何填充或边距。每行中的第二个 div 应居中，并在左侧和右侧留出一些边距。

问题是我的 html 内容中不能有行。我需要让所有的 div 一个接一个地排列。

div 的位置应如下所示：

```
|[1]------[2]-------[3]|
|[4]------[5]-------[6]|
|[7]------[8]-------[9]|
... 
```

有没有好的 CSS 或 JS 方法来做到这一点？

这是小提琴：http: [//jsfiddle.net/STS5F/5](http://jsfiddle.net/STS5F/5)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T15:58:36.243

使用 :nth-child(n) 选择器

```
.tile:nth-child(3n+1) {
    /* position of the first column */
}

.tile:nth-child(3n+2) {
    /* position of the second column */
}

.tile:nth-child(3n+0) {
    /* position of the third column */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:01:27.363

我曾经想出这个奇怪的东西

```
.justify-content { text-align : justify; position : relative; }

.justify-content>* { display : inline-block; }

.justify-content:after { content : ''; display : inline-block; width : 100%; height : 0; display : inline-block; } 
```

只需将`justify-content`类添加到您的元素中，它的内容就会被证明是合理的。但是您必须删除浮动。

演示：http: [//jsfiddle.net/pavloschris/STS5F/11/](http://jsfiddle.net/pavloschris/STS5F/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:58:32.073

假设你想让你的列间隔开，你可以简单地给你的`.tile`分隔线 a `margin-left`30px，然后给每个`nth-child(3n+1)`a `margin-left`0。

```
.tile{
    ...
    margin-left:30px;
}
.tile:nth-child(3n+1) {
    margin-left:0;
} 
```

[JSFiddle 示例](http://jsfiddle.net/STS5F/10/)。

# wpf - ItemsPanel 的 VerticalAlignment

> ID：15663196
> 
> 赞同：0
> 
> 时间：2013-03-27T15:50:25.553
> 
> 标签：wpf, vertical-alignment, arrangeoverride

iv'e 有一个从堆栈面板派生的自定义面板

这个面板有一个布局逻辑，它取决于面板的垂直对齐

CS ：

```
 public class ReArrangeStackPanel : StackPanel
  {      
    protected override Size ArrangeOverride(Size arrangeSize)
    {
        double delta =  this.VerticalAlignment == System.Windows.VerticalAlignment.Bottom 
                              ? CalcForBottom() : CalcForTop();                        

        ChildrenArrangement(delta);

        return base.ArrangeOverride(arrangeSize);
    } 
```

1）我希望 ItemsPanel 的 VerticalAligment 属性继承自它是子项的项控件，似乎它没有，因为它设置为默认的“Stretch”值。

2）即使在 ItemsPanel 上显式设置 VerticalAlignment 时，如果我不硬编码，则在 ArrangeOverride 范围内将 VerticalAlignment 的值设置为“Stretch”，并且仅在稍后（我使用 snoop 观察）设置为“Bottom”价值 。

XAML：

a) 不起作用：使用绑定，设置值但仅在 ArrangeOverride 之后。

```
<Setter Property="ItemsPanel">
        <Setter.Value>
            <ItemsPanelTemplate>
                <local:ReArrangeStackPanel 
                      VerticalAlignment="{Binding Path=VerticalAlignment, 
                      RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:PipeControl}}}" />
            </ItemsPanelTemplate>
        </Setter.Value>
    </Setter> 
```

b) 工作：明确硬编码值。

```
 <ItemsPanelTemplate>
         <local:ReArrangeStackPanel VerticalAlignment="Bottom" />
    </ItemsPanelTemplate> 
```

在我的 Windows XAML 中， ItemsControl (PipeControl) 设置为所需的 VerticalAlignment 。

所以我的问题：

1）为什么没有继承价值？

2）为什么在 ArrangeOverride 发生之前没有通过绑定设置值？

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:28:45.070

[FrameworkElement.VerticalAlignment](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.verticalalignment.aspx)的默认值为`Stretch`，因此您的`ReArrangeStackPanel.VerticalAlignment`类的默认值也是`Stretch`

由于 WPF 控件的典型大小调整样式通常基于父面板，因此`ArrangeOverride`a 的方法可能`StackPanel`是实际设置`VerticalAlignment`StackPanel 属性的方法，而您正在覆盖该方法。

如果确实如此，那么您可以通过调用`base.ArrangeOverride()`您的`ArrangeOverride()`方法来确保正确设置默认值

```
protected override Size ArrangeOverride(Size arrangeSize)
{
    base.ArrangeOverride(arrangeSize);

    ...
} 
```

至于为什么绑定不起作用，我怀疑这是因为[Rendering 发生在 DataBinding 之后](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)，所以`VerticalAlignment`直到您绑定到的父控件被渲染之后才设置属性。

`Converter`您可以通过将 a放入您的`VerticalAlignment`绑定并检查它在评估时的值是什么来验证是否是这种情况。

# vb.net - 使用 OleDb 从数据库中删除行

> ID：15663199
> 
> 赞同：1
> 
> 时间：2013-03-27T15:50:35.743
> 
> 标签：vb.net, row, oledb

我的这个功能工作了一半。工作正常的部分是我可以在 DataGridView 上选择一行，使用“删除行”按钮调用此函数，然后它将从 DataGridView 中删除该行....但是，它不会删除该行数据库上。

谁能帮助我使用 OleDb 从数据库中删除该行？

```
Function DeleteTableRow()
    Dim TaxConnStr As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & ConfigurationManager.AppSettings("Database")
    Dim dbConnection = New OleDbConnection(TaxConnStr)

    Try
        Dim dbCommand As OleDbCommand = New OleDbCommand
        Dim rdr2 As OleDbDataReader

        Dim selectedRow = DataGridView1.SelectedRows

        dbCommand.CommandText = "DELETE FROM UserCriteria WHERE RowID =" & selectedRow
        If dbConnection.State = ConnectionState.Closed Then
            dbConnection.Open()
        End If

        dbCommand.Connection = dbConnection
        rdr2 = dbCommand.ExecuteReader
        dbCommand.ExecuteNonQuery()

        rdr2.Close()

        '''Must select entire row to delete
        'DataGridView1.Rows.Remove(DataGridView1.Rows(DataGridView1.SelectedCells.Item(0).RowIndex))

        '''allows you to select on cell in the row to delete entire row
        For Each oneCell As DataGridViewCell In DataGridView1.SelectedCells
            If oneCell.Selected Then
                DataGridView1.Rows.RemoveAt(oneCell.RowIndex)
            End If
        Next

    Catch ex As Exception
        MsgBox(ex.Message)
    Finally
        dbConnection.Close()
    End Try
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:19:57.510

[DataGridView.SelectedRows](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewselectedrowcollection.aspx)是一个集合`DataGridViewRow`，不能使用集合作为参数来删除数据库表上的特定记录。（您是否将[OPTION STRICT 设置为关闭](http://msdn.microsoft.com/en-US/library/zcd4xwzs%28v=vs.110%29.aspx)？）

您需要遍历集合，`ID`从每一行获取正确的值并将该值用作删除查询的参数。

```
If dbConnection.State = ConnectionState.Closed Then
    dbConnection.Open()
End If

' Creating the command and its parameter here before entering the loop to avoid a continue'
' create and destroy pattern for the OleDbCommand'
Dim dbCommand As OleDbCommand = New OleDbCommand
dbCommand.CommandText = "DELETE FROM UserCriteria WHERE ID =?"
dbCommand.Connection = dbConnection
dbCommand.Parameters.AddWithValue("@row", 0) 
Dim rows = DataGridView1.SelectedRows
For Each row in rows
    dbCommand.Parameters("@row").Value = row.Cells("ID").Value)
    dbCommand.Connection = dbConnection
    dbCommand.ExecuteNonQuery()
Next 
```

还要注意不要使用字符串连接来构建 sql 命令。这种习惯导致了一种叫做 Sql Injection 的蠕虫

当然，这里不需要 OleDbDataReader。（没有什么可读的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:16:42.010

您不需要阅读器来删除一行。不会返回任何数据

```
 rdr2 = dbCommand.ExecuteReader
    dbCommand.ExecuteNonQuery()

    rdr2.Close() 
```

应该只是

```
 dbCommand.ExecuteNonQuery() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:21:12.490

问题是您`DataGridView1.SelectedRows`将返回一个[`SelectedRowCollection`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.selectedrows.aspx)（对不起，我假设这是一个 WinForms 应用程序）。当传递给您时，这不会为您提供正确的结果，`CommandText`因为您可能会获得 ToString() 的`SelectedRowCollection`而不是您所追求的 ID

您真正想要做的是遍历集合（如果用户能够选择多行）并删除选择的每一行，例如：

```
For Each selectedRow in DataGridView1.SelectedRows
    '1\. Get the DatabaseId of the selected row
    '2\. Modify dbCommand.CommandText to use the selected row from 1
    '3\. execute command like you are doing with ExecuteNonQuery
Next 
```

上面的每个`selectedRow`都属于[这种](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewrow.aspx)类型......它有一个`Cells`属性，您可以访问以获取您需要的 ID（我不确定它将在哪个单元格中，但您应该能够从您的代码中分辨出来）。

# php - PHP 字符集转换

> ID：15663200
> 
> 赞同：0
> 
> 时间：2013-03-27T15:50:35.177
> 
> 标签：php, mysql, utf-8, character-encoding, latin1

我以前用 latin1 对 MySQL 数据进行了编码。现在，我在 MySQL 中将其转换为 UTF-8，但数据仍保存在 latin1 中。最初存储为 Latin-1 的 UTF-8 数据未正确转换为 UTF-8。我需要在 PHP 中解决，这样当我使用查询从数据库中获取数据时，它应该被转换为 UTF-8。

我找到了使用 MySQL 函数转换数据库的解决方案，这真的很有帮助... [MySQL - 将 UTF8 表上的 latin1 字符转换为 UTF8](https://stackoverflow.com/questions/9407834/mysql-convert-latin1-characters-on-a-utf8-table-into-utf8)

但我的情况是，我需要在 PHP 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:56:12.633

您可以使用 PHP 函数 utf8_encode ( [http://php.net/manual/fr/function.utf8-encode.php](http://php.net/manual/fr/function.utf8-encode.php) ) 和 utf8_decode ( [http://php.net/manual/fr/function.utf8-decode.php](http://php.net/manual/fr/function.utf8-decode.php) )

然后你必须在你的 SQL 表中循环以用清理过的值替换值

```
<?php
$query = mysql_query("SELECT * from table");

while($result = mysql_fetch_array($query)){
    //Then update row with new name
    mysql_query("UPDATE table SET col_name = '" . utf8_decode($result["col_name"]) ."' WHERE id = " . $result["id"]);

  }
?> 
```

# python - 如何在不阻塞的情况下在 python 中读取 unix 管道？

> ID：15663203
> 
> 赞同：1
> 
> 时间：2013-03-27T15:50:40.480
> 
> 标签：python, pipe

我想通过这样的管道读取进程的输出：

```
./backup.sh | my-python_program.py 
```

我的 python 程序当前从标准输入读取：

```
buff =  sys.stdin.read() 
```

虽然这看起来很幼稚，并且似乎阻碍了需要很长时间才能执行的脚本。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:52:13.140

不知道 python 是如何包装它的，但你会想要使用具有较小超时值的[select() 。](http://linux.die.net/man/2/select)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:54:51.650

Pipes are set up explicitly to block and for most purposes it makes sense -- does your program have other stuff that it could be doing when not reading the input?

If so, then you can look into asynchronous I/O, and if you're going to be doing this in python, I'd recommend using [`gevent`[([http://www.gevent.org/](http://www.gevent.org/)) which will let you use lightweight threads that do efficient asynchronous I/O:

```
import gevent
from gevent import monkey; monkey.patch_all()

def read_from_stdin():
    buff = sys.stdin.read()
    # Whatever you're going to do with it

def some_other_stuff_to_do():
    # ...
    pass

gevent.Greenlet(read_from_stdin).run()
gevent.Greenlet(some_other_stuff_to_do).run() 
```

# android - 保存在内部存储中捕获的 图片？

> ID：15663206
> 
> 赞同：7
> 
> 时间：2013-03-27T15:50:56.617
> 
> 标签：android, android-camera, android-image

我编码拍照并将其保存在外部存储中。它在我的平板电脑上运行良好，带有 sd 卡。但是，我的手机不支持 sd 卡时遇到了一些问题。谁能帮我编写代码以保存在内部存储中。谢谢！

```
 ((Button) findViewById(R.id.btnTaken))
            .setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                            takeImage();                            
                }
                });

protected void takeImage() {
     Log.i(TAG,"onClick event");
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd_HH-mm-ss");
        String currentDateandTime = sdf.format(new Date());
        String fileName = Environment.getExternalStorageDirectory().getAbsolutePath() +
                               "/Image_" + currentDateandTime + ".jpg";

        mCamera.takePicture(fileName);
        Toast.makeText(this, fileName + " saved", Toast.LENGTH_SHORT).show();

}
public void takePicture(final String fileName) {
    Log.i(TAG, "Tacking picture");
    PictureCallback callback = new PictureCallback() {

        private String mPictureFileName = fileName;

        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
            Log.i(TAG, "Saving a bitmap to file");
            Bitmap picture = BitmapFactory.decodeByteArray(data, 0, data.length);
            try {
                FileOutputStream out = new FileOutputStream(mPictureFileName);
                picture.compress(Bitmap.CompressFormat.JPEG, 90, out);
                picture.recycle();
                mCamera.startPreview();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    };

    Camera.ShutterCallback shutter = new Camera.ShutterCallback() {
         public void onShutter() {
         Log.e(getClass().getSimpleName(), "SHUTTER CALLBACK");
         }
         };
         Camera.PictureCallback raw = new Camera.PictureCallback() {
             public void onPictureTaken(byte[] data, Camera c) {
              Log.e(getClass().getSimpleName(), "PICTURE CALLBACK RAW: " + data);
              mCamera.startPreview();
             }
             };
    mCamera.takePicture(shutter, raw, callback) ;

} 
```

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-10-19T05:12:44.640

这很简单..而不是外部文件路径名..您应该给出内部文件路径名..这是`FileOutputStream out = new FileOutputStream(new File(getFilesDir()+File.separator+"MyFile.jpg"));`..请尝试..它工作得很好

和

还有一件事，您应该将内部存储的权限添加到 Android Manifest.xml 文件中

```
<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE"/> 
```

# sql - 如何在 SQL 中使用 NULL 或空字符串

> ID：15663207
> 
> 赞同：164
> 
> 时间：2013-03-27T15:50:56.973
> 
> 标签：sql, sql-server, null, where

我想知道如何`WHERE`在 SQL Server 的子句中同时使用 NULL 和空字符串。我需要查找具有空值或空字符串的记录。谢谢。

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2013-03-27T15:55:01.257

```
Select *
From Table
Where (col is null or col = '') 
```

或者

```
Select *
From Table
Where IsNull(col, '') = '' 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-12-22T10:40:19.263

如果您在**SELECT**部分需要它，可以这样使用。

```
SELECT ct.ID, 
       ISNULL(NULLIF(ct.LaunchDate, ''), null) [LaunchDate]
FROM   [dbo].[CustomerTable] ct 
```

您可以将 替换为`null`您的替换值。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-03-27T15:54:37.600

你可以简单地这样做：

```
SELECT *
FROM   yourTable
WHERE  yourColumn IS NULL OR yourColumn = '' 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-03-27T15:53:09.553

```
SELECT *
FROM   TableName
WHERE  columnNAme IS NULL OR 
       LTRIM(RTRIM(columnName)) = '' 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-10-09T02:30:10.453

要查找 col 所在的行`NULL`、空字符串或空格（空格、制表符）：

```
SELECT *
FROM table
WHERE ISNULL(LTRIM(RTRIM(col)),'')='' 
```

要查找 col 所在的行`NOT NULL`、空字符串或空格（空格、制表符）：

```
SELECT *
FROM table
WHERE ISNULL(LTRIM(RTRIM(col)),'')<>'' 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-12-08T18:17:01.393

**一些[sargable](https://stackoverflow.com/questions/799584/what-makes-a-sql-statement-sargable)方法...**

```
SELECT *
FROM #T
WHERE SomeCol = '' OR SomeCol IS NULL;

SELECT *
FROM #T
WHERE SomeCol = '' 
UNION ALL
SELECT *
FROM #T
WHERE  SomeCol IS NULL;

SELECT *
FROM #T
WHERE EXISTS ((SELECT NULL UNION SELECT '') INTERSECT SELECT SomeCol); 
```

**还有一些不可分割的...**

```
SELECT *
FROM #T
WHERE IIF(SomeCol <> '',0,1) = 1;

SELECT *
FROM #T
WHERE NULLIF(SomeCol,'') IS NULL;

SELECT *
FROM #T
WHERE ISNULL(SomeCol,'') = ''; 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-02-15T13:47:38.427

我最好的解决方案：

```
 WHERE  
 COALESCE(char_length(fieldValue), 0) = 0 
```

COALESCE 返回表达式 list() 中的第一个非空 expr。

如果 fieldValue 为 null 或空字符串，则：我们将返回第二个元素，然后返回 0。

所以 0 等于 0 那么这个 fieldValue 是一个 null 或空字符串。

以python为例：

```
def coalesce(fieldValue):
    if fieldValue in (null,''):
        return 0 
```

祝你好运

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-03-27T15:59:08.057

您可以使用[`isnull`](http://msdn.microsoft.com/en-us/library/ms184325.aspx)函数来获取`null`文本字段的值和空值：

```
SELECT * FROM myTable
WHERE isnull(my_nullable_text_field,'') = '' 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-09-29T16:37:24.960

这是丑陋的 MSSQL：

```
CASE WHEN LTRIM(RTRIM(ISNULL([Address1], ''))) <> '' THEN [Address2] ELSE '' END 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-03-27T15:55:19.480

```
SELECT *
FROM   Table
WHERE  column like '' or column IS NULL OR LEN(column) = 0 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-06-03T08:58:41.530

```
select 
   isnull(column,'') column, * 
from Table  
Where column = '' 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-11-07T14:23:17.610

```
--setup
IF OBJECT_ID('tempdb..#T') IS NOT NULL DROP TABLE #T;
CREATE TABLE #T(ID INT NOT NULL IDENTITY(1,1) PRIMARY KEY, NAME VARCHAR(10))
INSERT INTO #T (Name) VALUES('JOHN'),(''),(NULL);
SELECT * FROM #T
 1  JOHN
 2  -- is empty string
 3  NULL 
```

您可以通过将其转换为使用来检查`''`as`NULL``NULL``NULLIF`

```
--here you set '' to null
UPDATE #T SET NAME = NULLIF(NAME,'')
SELECT * FROM #T 
 1  JOHN
 2  NULL
 3  NULL 
```

或者你可以检查`NULL`为`''`使用`SELECT ISNULL(NULL,'')`

```
-- here you set NULL to ''
UPDATE #T SET NAME = ISNULL(NULL,'') WHERE NAME IS NULL
SELECT * FROM #T
1   JOHN
2   -- is empty string
3   -- is empty string

--clean up
DROP TABLE #T 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-05-11T07:59:25.037

在 sproc 中，您可以使用以下条件：

```
DECLARE @USER_ID VARCAHR(15)=NULL --THIS VALUE IS NULL OR EMPTY DON'T MATTER
IF(COALESCE(@USER_ID,'')='')
PRINT 'HUSSAM' 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-08-05T11:32:15.597

通过这个功能：

```
ALTER FUNCTION [dbo].[isnull](@input nvarchar(50),@ret int = 0)
RETURNS int
AS
BEGIN

    return (case when @input='' then @ret when @input is null then @ret else @input end)

END 
```

并使用这个：

dbo.isnull（值，0）

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-01-18T20:06:49.773

```
SELECT * FROM DBO.AGENDA
WHERE 
  --IF @DT_START IS NULL OR EMPTY
  ( ISNULL( @DT_START,'' ) = '' AND DT_START IS NOT NULL ) -- GET ALL DATE
  OR --ELSE
  ( DT_START >= @DT_START ) --FILTER

-- MORE FILTER

SELECT * FROM DBO.AGENDA
WHERE 
  ( ( ISNULL( @DT_START,'' ) = '' AND DT_START IS NOT NULL ) OR ( DT_START >= @DT_START ) ) 
  AND
  DT_END < GETDATE() 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-08-13T12:40:59.190

你检查 null With IS NULL and string Empty With LEN(RTRIM(LTRIM(Column))) = 0 in

```
SELECT *
FROM AppInfra.Person
WHERE   LEN(RTRIM(LTRIM(NationalCode))) = 0 OR  NationalCode IS NULL 
```

# ios - UIButton 移动动画

> ID：15663213
> 
> 赞同：0
> 
> 时间：2013-03-27T15:51:13.830
> 
> 标签：ios, animation, uibutton

我想知道是否可以创建一个 UIButton 动画以使按钮在屏幕中快速滑动，在到达中心时减速，然后加速并在另一侧退出屏幕。该按钮不必按下，所以我使用：

```
userInteractionEnabled = NO; 
```

这是我试图做的：

```
UIButton* buttonNumberCountTutorial = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[buttonNumberCountTutorial setTitle:@"2" forState:UIControlStateNormal];
[buttonNumberCountTutorial setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
[buttonNumberCountTutorial.titleLabel setFont:[UIFont fontWithName:@"Zapfino" size:40]];
buttonNumberCountTutorial.frame = CGRectMake(-400, 430, 400, 400);
[buttonNumberCountTutorial setBackgroundImage:[UIImage imageNamed:@"socialize-navbar-bg.png"]forState:UIControlStateNormal];
[baseView addSubview:buttonNumberCountTutorial];
[UIView animateWithDuration:1.9f
                 animations:^{

        buttonNumberCountTutorial.frame = CGRectMake(20, 430, 200, 200);

        }
              completion:^(BOOL finished){

                  [buttonNumberCountTutorial removeFromSuperview];
    }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:57:30.400

您可以定义动画选项。为您提供有趣的选择

```
UIViewAnimationOptionCurveEaseInOut
UIViewAnimationOptionCurveEaseIn 
UIViewAnimationOptionCurveEaseOut
UIViewAnimationOptionCurveLinear 
```

您需要使用 UIView 的以下 Class 方法才能使用这些选项

```
+ (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion 
```

当然，您可以通过在完成块中启动新动画来制作嵌套动画。

# install4j - Install4j：Mac 的“检测到正在运行的进程”屏幕？

> ID：15663214
> 
> 赞同：1
> 
> 时间：2013-03-27T15:51:18.390
> 
> 标签：install4j

在 Windows 上更新应用程序时，Install4j 有一个很棒的功能，即通知用户应用程序当前是否正在运行：“检测到正在运行的进程”屏幕。Mac 有类似的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T22:46:29.667

在安装程序中运行脚本以调用此 shell 脚本并根据结果为用户设置警告屏幕：-

```
#!/bin/bash
PROCESS=YourApp.app
number=$(ps aux | grep $PROCESS | wc -l)
if [ $number -gt 1 ]
then
        echo Running;
else
    echo NotRunning;
fi 
```

# javascript - 木偶复合视图 onfetch

> ID：15663218
> 
> 赞同：0
> 
> 时间：2013-03-27T15:51:26.553
> 
> 标签：javascript, backbone.js, marionette

我有一个骨干木偶合成视图如下。

这是初始化方法。

```
initialize: function(options) {

        log.debug("Initialize");
        this.wizard = options.wizard;

        this.model = new Feed({
            id: options.modelid
        });
        this.modelid = options.modelid;
        this.collection = new Similar();

        this.listenTo(this.model, "change", this.onFetch);
        this.listenTo(this.model, "reset", this.onFetch);

        this.collection.fetch({ data: { id: this.modelid }});

        this.model.fetch();
    }, 
```

这是 onFetch 方法

```
onFetch: function() {
        log.debug("Fetch");

        this.$el.html(this.template(this.model.toJSON()));} 
```

这是附加方法

```
appendHtml: function(collectionView, itemView, index) {
        log.debug("appendHtml");

        var jsonFeed = itemView.model.toJSON();

        if (this.prevFeed === null || jsonFeed.start !== this.prevFeed.start) {
            var date = new Date(jsonFeed.start);
            collectionView.$(this.itemViewContainer).append('<div class="day-divider c-color box-center" ><h3>' + moment(date).format('DD MMMM') + '</h3></div>');
        }

        collectionView.$(this.itemViewContainer).append(itemView.el);

        this.prevFeed = jsonFeed;
    }, 
```

我的集合被覆盖 html 内容的 onFetch 函数清空。这是我的日志：

```
DEBUG - Initialize
DEBUG - Render
DEBUG - appendHtml
DEBUG - appendHtml
DEBUG - appendHtml
DEBUG - Render
DEBUG - Fetch 
```

知道这是怎么发生的吗？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T20:23:53.773

为什么不使用 onRender 代替 onFetch？onRender 是一个已经包含的函数，它在渲染完成时显示内容。

注意：您甚至可以使用 onShow 来完成所有内容的渲染。

# google-chrome - 使 Chrome 脚本断点在页面（重新）加载之间保持不变

> ID：15663221
> 
> 赞同：0
> 
> 时间：2013-03-27T15:51:38.383
> 
> 标签：google-chrome, google-chrome-devtools

我有在文档加载时运行的脚本。但是要查看我对页面所做的更改，我必须重新加载它，这会清除我在脚本中设置的所有断点。有没有办法让这些断点从页面加载到页面加载持续存在？似乎 Chrome 曾经自动执行此操作，但现在不再执行此操作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:52:37.980

添加指令

```
if (my_dbg != undefined) {
    debugger;
} 
```

到你的脚本。如果要启用中断，请在某处添加：

```
var my_dbg = true; 
```

不太优雅，但应该可以解决您的问题。

例如：

```
$(document).ready(function(){
   $('#submit_me').click(function () {
      if (my_dbg != undefined) {
        debugger;
      }
   });
   // do other important things...
   if (my_dbg != undefined) {
        debugger;
    }
   // moar important things follow, need to debug
}); 
```

在再次加载页面之前，弹出 js 控制台并输入

```
var my_dbg = true; 
```

然后点击重新加载。应该工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:04:48.463

在 Chrome 开发人员工具的源标签中，您应该能够单击行号并获得一个蓝色箭头。这将设置一个断点，该断点将在页面加载之间持续存在。

# c# - 行元素未出现在打印的第二页和后续页上

> ID：15663222
> 
> 赞同：2
> 
> 时间：2013-03-27T15:51:39.260
> 
> 标签：c#, silverlight, printing

我正在从我们的 Silverlight 应用程序打印一组标签。从数据库中读取构成数据的数据，并动态创建 UI 元素并将其添加到`Canvas`for 布局中。标签以网格形式排列在页面上，行数和列数由所使用的纸材决定。

除了添加一条线以“删除”一个元素（例如，一件商品打折时的原始价格）之外，一切都运行良好：

![打印第一页上的标签](../Images/54f8ec104b6024e26a9a078c6a5ea62e.png)

![印刷品第二页上的标签](../Images/10a0a30d890b6999c77c27b92efb4f3b.png)

这是生成该行的代码：

```
var line = new Line { StrokeThickness = 2, Stroke = new SolidColorBrush(Colors.Black) };
line.X1 = 0;
line.SetBinding(Line.Y1Property, new Binding { ElementName = element.Name, Path = new PropertyPath("ActualHeight") });
line.Y2 = 0;
line.SetBinding(Line.X2Property, new Binding { ElementName = element.Name, Path = new PropertyPath("ActualWidth") });
// Insert the element straight after the element it's bound to
canvas.Children.Insert(canvas.Children.IndexOf(element) + 1, line);
line.SetValue(Canvas.TopProperty, element.GetValue(Canvas.TopProperty));
line.SetValue(Canvas.LeftProperty, element.GetValue(Canvas.LeftProperty));
// and make sure it's Z index is always higher
line.SetValue(Canvas.ZIndexProperty, (int)element.GetValue(Canvas.ZIndexProperty) + 1); 
```

*   `canvas`是用于显示标签的 Canvas
*   `element`是要突出的元素（在本例中为原始价格）。

* * *

1.  正在为所有正在打印的标签调用代码。
2.  绑定是一致的。
3.  如果我用硬编码值替换绑定，则会绘制线条，因此它似乎是由绑定中的某些内容引起的。然而：
4.  每个标签的“父”元素的和是相同的`ActualHeight`。`ActualWidth`
5.  这条线没有在打印输出的其他地方绘制（我可以看到）。如果我在第一页停止输出，则不会出现任何行。
6.  其他一切都出现并出现在正确的位置。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:34:32.600

看来是绑定有问题。无论我做什么，只要我在行中添加绑定就消失了 - 在某些情况下甚至从第一页开始。

最后唯一有效的是将代码更改为：

```
element.Measure(new Size(canvas.Width, canvas.Height));
var line = new Line { StrokeThickness = 2, Stroke = new SolidColorBrush(Colors.Black) };
line.X1 = 0.0;
line.Y1 = element.ActualHeight;
line.Y2 = 0.0;
line.X2 = element.ActualWidth;
// Insert the element straight after the element it's bound to
canvas.Children.Insert(canvas.Children.IndexOf(element) + 1, line);
line.SetValue(Canvas.TopProperty, element.GetValue(Canvas.TopProperty));
line.SetValue(Canvas.LeftProperty, element.GetValue(Canvas.LeftProperty));
// and make sure it's Z index is always higher
line.SetValue(Canvas.ZIndexProperty, (int)element.GetValue(Canvas.ZIndexProperty) + 1);
line.Height = element.ActualHeight;
line.Width = element.ActualWidth; 
```

所以我“测量”文本元素以确保它的高度和宽度得到更新，然后直接从文本元素的and设置`Y1`、和属性。这会在正确的位置和正确的大小绘制线条。`X2``Height``Width``ActualHeight``ActualWidth`

# asp.net - 如何在代码隐藏中定义的 DataSet 上设置 FilterExpression？

> ID：15663226
> 
> 赞同：0
> 
> 时间：2013-03-27T15:51:51.590
> 
> 标签：asp.net, gridview, dataset

我正在尝试为 GridView 创建一个过滤器，您可以在其中将姓氏输入文本框中，然后单击一个按钮，单击该按钮后应根据数据源中的姓氏列过滤 GridView。

因此，一旦单击按钮，我将向 GridView 的 DataSource 添加一个 FilterExpression。但是，智能感知没有拾取 .FilterExpression 所以我知道我错过了一些东西。GridView 的 DataSet 以编程方式在代码隐藏中定义，我习惯于在 .aspx 页面上定义的 DataSource 上使用 .FilterExpression。

**代码：**

```
protected void Page_Load(object sender, EventArgs e)
{
     if (!Page.IsPostBack)
     {
      databind();
     }
}
private void databind()
    {
        try
        {
            customerBE = new CustomerBE();
            customerBE.UserID = 0;
            dset = new DataSet();
            customerBL = new CustomerBL();
            dset = customerBL.GetUserDetails(customerBE);
            gridViewCreateUser.DataSource = dset;
            gridViewCreateUser.DataBind();

        }
        catch (Exception ex)
        {
            ...
        }
    } 
```

**所以我想做的是：**

```
protected void Button1_Click(object sender, EventArgs e)
{
  dset.FilterExpression = ("LastName=" + textbox1.Text);
} 
```

**在这种情况下是否可以使用 .FilterExpression 或类似的东西？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:09:18.743

不确定您的情况，但您可以在数据表上使用 .Select 。您可以在数据集中表的索引中替换索引或名称。

```
DataTable dt = new DataTable();
dt = dset.Tables[0].Select("LastName=" + textbox1.Text).CopyToDataTable(); 
```

# java - 尝试为 Elasticsearch 创建映射

> ID：15663231
> 
> 赞同：0
> 
> 时间：2013-03-27T15:52:03.453
> 
> 标签：java, jakarta-ee, full-text-search, elasticsearch

我正在尝试为 elasticsearch 创建映射，但我不明白该怎么做。我只是想用 XContentBuilder 创建这个 json。我正在使用 Java API。我无法创建嵌套对象。`putMapping`我也不知道该方法实际需要多少这个对象。

```
{
    "tweet" : {
        "properties" : {
            "message" : {
                "type" : "string",
                "store" : "yes",
                "index" : "analyzed",
                "null_value" : "na"
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:30:54.307

我认为找到 elasticsearch Java API 问题答案的最佳位置是 elasticsearch[集成测试](https://github.com/elasticsearch/elasticsearch/blob/aaa3c48b3c105ed62acf5e7d2ad3a29866bbec13/src/test/java/org/elasticsearch/test/integration/search/simple/SimpleSearchTests.java#L82)。在您的特定情况下，此映射将如下所示：

```
XContentFactory.jsonBuilder().startObject()
    .startObject("tweet")
        .startObject("properties")
            .startObject("message")
                .field("type", "string")
                .field("store", "yes")
                .field("index", "analyzed")
                .field("null_value", "na")
            .endObject()
        .endObject()
    .endObject()
.endObject() 
```

# javascript - 如何使用 Python / jQuery（或其他选项？）从 Web 应用程序中的屏幕截图创建图像

> ID：15663236
> 
> 赞同：0
> 
> 时间：2013-03-27T15:52:19.777
> 
> 标签：javascript, python, image, flask

我正在用 Python/Flask 和 HTML 编写一个 Web 应用程序，用户可以创建一种特殊类型的图表，它基本上是 div 中的一个图像，当用户单击它时，它会在其顶部覆盖圆形 div。

现在用户只是对生成的图表进行屏幕截图，但我正在寻找一种更简单的方法来使用 Python 或 Javascript/jQuery，它知道如何根据特定 div 中的内容制作图像。

解决此问题的最佳方法是什么？

# java - 在android中的单词列表文本文件中搜索单词

> ID：15663241
> 
> 赞同：0
> 
> 时间：2013-03-27T15:52:30.543
> 
> 标签：java, search, file-io, word

朋友 我在一个包含 300,000 个单词（每行 1 个单词）的文本文件 (2MB) 中有一个按字母顺序排列的单词列表。由于它已经排序，我想进行快速字符串搜索，该搜索必须准确且不区分大小写。任何想法如何做到这一点？

必须使其尽可能快且不区分大小写。例如，

如果用户需要从文本文件中搜索单词“MAT”，则输出必须为 mat/MAT，并且不应包含 mate、matted 或任何此类单词。应该在最短的时间内生成输出。

编辑 - 我需要一个像类或算法这样的解决方案来完成它，比如 Pattern/matcher 或 BufferedReader/Scanner 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:02:10.083

如果您的单词列表已经排序，我能想到的最快方法是使用[二分搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)。至于区分大小写的部分，只需在每个字符串（输入字符串和文件中要比较的字符串）上应用 ToUpper() 或 ToLower() 即可解决问题。

尽管我同意其他人的观点，但您应该为此使用数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:57:59.773

您最好的方法可能是将其正确存储到数据库中，这样您就必须搜索最少的数据量。

例如，每个字母表都有一个表，只有以该字母开头的单词。基本上这已经将搜索减少到 300,000 / 20 （26 - 减去一些很少单词的稀有字母）。

这可能已经完成了 300,000 个单词，但如果没有，您甚至可以更进一步并进行一些长度分离。

将所有单词保存到数据库中可能需要一段时间，但这对您的应用程序来说可能不是问题。

# php - CakePHP autorender 不停止默认视图

> ID：15663244
> 
> 赞同：4
> 
> 时间：2013-03-27T15:52:38.497
> 
> 标签：php, cakephp, cakephp-1.3

我正在尝试在控制器中运行一个方法，该方法在普通浏览器上呈现默认视图，但在请求来自移动设备时呈现移动视图。

在 app_controller.php

```
function beforeFilter() { 
    if ($this->RequestHandler->isMobile()) {
        $this->is_mobile = true;
        $this->set('is_mobile', true );
        $this->autoRender = false;
    }
} 
```

在控制器中：

```
function home(){    
    ...bunch of data grabbing stuff...

    if ($this->is_mobile){
        $this->autoRender = NULL;
        $this->layout = 'empty';
        $this->render('/mobile/home');
    } else {
        $this->layout = 'default';
    }
} 
```

当我在浏览器上点击它（用户代理切换到移动设备）时，它会呈现正确的移动/家庭视图文件，但它也会在下面呈现正常的非移动视图文件。打开调试，没有什么不寻常的，除了第二个，“正常”视图文件正在从移动视图的 mysql 跟踪下方呈现。

关于如何从渲染中完全禁用默认视图并仅显示移动设备的任何想法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-27T18:48:48.353

如果选项为“假”，CakePHP 将忽略它们；您需要像这样更改代码：

```
<?php

$this->autoRender = false;

?> 
```

那应该停止渲染视图；

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-06T09:26:17.370

如果你想为特定视图关闭自动渲染，然后添加

```
$this->autoRender = false; 
```

在特定方法中而不是在应用程序控制器中

# c++ - 模板特化：不匹配任何模板声明

> ID：15663247
> 
> 赞同：7
> 
> 时间：2013-03-27T15:52:49.623
> 
> 标签：c++, templates

在学习模板专业化时，我使用了一个非常简单的示例，但仍然出现错误。

```
#include <iostream>

template <class T>
class chrrr{
    public:
    T chgchr(T c);  
};

template < class T> 
T chrrr<T>::chgchr(T c){
    return c+1; 
}

template <>
class chrrr<char>{
    public:
    char chgchr(char c);    
};
template <>
char chrrr<char>::chgchr(char c){
    return c+2; 
}

using namespace std;

int main(){
    char a='a';
    int i=1;

    chrrr<int> it;
    chrrr<char> ch;
    cout<<ch.chgchr(a)<<endl;
    cout<<it.chgchr(i)<<endl;

    return 0;
} 
```

错误说：

```
line 20: error: template-id ‘chgchr<>’ for ‘char chrrr<char>::chgchr(char)’ does not match any template declaration 
```

我想知道为什么它不匹配？如果我在类定义主体而不是外部定义 chgchr，它会很好地工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-27T15:55:28.497

您已经明确专门化了该类，从而产生了一个完全实例化的类型，称为`chrrr<char>`. 定义成员函数时不需要提供模板参数。简单地：

```
char chrrr<char>::chgchr(char c){
    return c+2; 
} 
```

但是，您似乎正在专门化整个课程只是为了专门化一个功能。你可以这样做：

```
template <class T>
class chrrr {
    public:
    T chgchr(T c);  
};

template <class T> 
T chrrr<T>::chgchr(T c){
    return c+1; 
}

// Explicitly specialize for the member function
template <>
char chrrr<char>::chgchr(char c){
    return c+2; 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T15:57:54.103

专门的类模板会生成一个具有有趣名称的普通类，而不是模板。当您specialize `chrrr<char>`时，它​​不再是模板，其类成员的实现*也不*是模板特化。所以你应该简单地写：

```
char
chrrr<char>::chgchr( char c ) ... 
```

你前面说的`template<>`还有一个模板需要专门化，其实不是这样的。

# php - 使用隐藏字段将数据添加到数据库中

> ID：15663248
> 
> 赞同：0
> 
> 时间：2013-03-27T15:52:52.257
> 
> 标签：php, database, hidden-field

我正在使用隐藏字段添加数据。最初它可以工作并在我的数据库中显示我需要的所有信息。但是，当我再次对其进行处理时，它只捕获了与之前已经捕获的名称相同的名称。

例如，有一个苹果的图像，当我添加时，它应该显示名称为苹果。然后，当我单击梨的图像时，显然它应该在我的数据库中显示“梨”作为名称。但不是“梨”，而是显示为苹果。有谁知道为什么？

```
<form action="addOrder.php" method="post">
<td class="timgG"><h4><img src="apple.jpg" style="vertical-align: text-bottom;" title="Apple"/> Apple <br>
<input type="hidden" name="op" value="add">
<input type="hidden" name="name" value="Apple"> 
<input type="hidden" name="price" value="0.50">
<input type="submit" value="Add to Cart">
</h4></td>

<td class="timgG"><h4><img src="pear.jpg" style="vertical-align: text-bottom;" title="Pear"/> Pear <br>
<input type="hidden" name="op" value="add">
<input type="hidden" name="name" value="Pear"> 
<input type="hidden" name="price" value="0.50">
<input type="submit" value="Add to Cart">
</h4></td>
</form>

<?php
            if (isset($_SESSION['user_id'])) {
                //$order_id = $_POST['order_id'];
                $name = $_POST['name'];
                //$quantity = $_POST['quantity'];
                $price = $_POST['price'];

                $query = "INSERT INTO order_details (name,price) VALUES ('" . $name . "','" . $price . "')";
                $status = mysqli_query($link, $query) or die(mysqli_error($link));

                if ($status) {
                    $msg = "Item has been added.<br />";
                    $msg .= "<a href='product.php'>Back</a></p>";
                }
            } else {
                $msg = "There was an error processing the form.Please try again <a href=girls.php>Back";
            }
            ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:56:48.003

您的`HTML`输入具有相同的`name`：

```
<input type="hidden" name="name" value="Apple"> 

<input type="hidden" name="name" value="Pear"> 
```

既然`Apple`是第一个，那就是第一个被`PHP`.

解决方法是使用两种不同的表单，它们具有唯一的提交按钮名称，或者为您的隐藏输入使用唯一的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:55:05.467

您`name`对同一表单中的不同产品使用相同的属性，因此您将覆盖表单字段。

您可以使用数组来拥有多个具有相同名称的项目：

```
<input type="hidden" name="name[]" value="Apple">
// etc. 
```

然后在 php 中，`$_POST['name']`也将是一个数组。

你真的应该切换到准备好的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:56:49.023

`<form>`对每个项目使用单独的。当前设置（如果您以不同方式设置其他参数，您会注意到）始终使用表单内隐藏输入的第一个定义。

尝试使用

```
<form action="addOrder.php" method="post">
<td class="timgG"><h4><img src="apple.jpg" style="vertical-align: text-bottom;" title="Apple"/> Apple <br>
<input type="hidden" name="op" value="add">
<input type="hidden" name="name" value="Apple"> 
<input type="hidden" name="price" value="0.50">
<input type="submit" value="Add to Cart">
</h4></td>
</form>

<form action="addOrder.php" method="post">
<td class="timgG"><h4><img src="pear.jpg" style="vertical-align: text-bottom;" title="Pear"/> Pear <br>
<input type="hidden" name="op" value="add">
<input type="hidden" name="name" value="Pear"> 
<input type="hidden" name="price" value="0.50">
<input type="submit" value="Add to Cart">
</h4></td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T15:59:06.090

使用两种不同的形式

```
<form action="addOrder.php" method="post">
<td class="timgG"><h4><img src="apple.jpg" style="vertical-align: text-bottom;" title="Apple"/> Apple <br>
<input type="hidden" name="op" value="add">
<input type="hidden" name="name" value="Apple"> 
<input type="hidden" name="price" value="0.50">
<input type="submit" value="Add to Cart">
</h4></td>
</form>
<form action="addOrder.php" method="post">
<td class="timgG"><h4><img src="pear.jpg" style="vertical-align: text-bottom;" title="Pear"/> Pear <br>
<input type="hidden" name="op" value="add">
<input type="hidden" name="name" value="Pear"> 
<input type="hidden" name="price" value="0.50">
<input type="submit" value="Add to Cart">
</h4></td>
</form> 
```

也正如一些人提到的，在数据​​库中插入内容时使用 mysqli_real_escape_string()

# c# - 使用相同的 SQLParameter 更新多个表？

> ID：15663260
> 
> 赞同：0
> 
> 时间：2013-03-27T15:53:20.237
> 
> 标签：c#, asp.net, .net

我需要更新一些具有相同字段的表。

现在我对每个表都有一个单独的更新语句，如下所示：

```
try
        {
            using (SqlConnection conn = new SqlConnection(cCon.getConn()))
            {

                using (SqlCommand cmd = conn.CreateCommand())
                {
conn.Open();
                    cmd.CommandText = "update table0 set active= 'N' where id=@id";
                    cmd.Parameters.Add(new SqlParameter("@id", id));
                    cmd.ExecuteNonQuery();

                    cmd.Parameters.Clear();
                    cmd.CommandText = "update table1 set active= 'N' where id= @id ";
                    cmd.Parameters.Add(new SqlParameter("@id", id));
                    cmd.ExecuteNonQuery();

                    cmd.Parameters.Clear();
                     cmd.CommandText = "update table2 set active= 'N' where id= @id "
                    cmd.Parameters.Add(new SqlParameter("@id", id));
                    cmd.ExecuteNonQuery();

                    cmd.Parameters.Clear();
                    cmd.CommandText = "update table4 set active= 'N' where id= @id "
                    cmd.Parameters.Add(new SqlParameter("@id", id));
                    cmd.ExecuteNonQuery();
                }
            }
        } 
```

我可以优化代码以减少调用次数吗？也许将所有更新合并到 1 个命令文本中并且只执行一次？

因为它的参数都是一样的，我认为这应该是可能的？还是我应该只做一个存储过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T15:59:07.637

理想情况下，您将调用存储过程来处理此问题。但是在语句批处理中使用相同的参数也可以：

```
cmd.CommandText = @"update table0 set active= 'N' where id=@id;
      update table1 set active= 'N' where id= @id;
      update table2 set active= 'N' where id= @id;
      update table4 set active= 'N' where id= @id;";
cmd.Parameters.Add(new SqlParameter("@id", id));
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:04:42.703

```
const string query = @"update {0} set active= 'N' where id=@id;";

public string GetCommandText(string table)
{
    return string.Format(query, table);
}

public IEnumerable<string> GetTables()
{
    yield return "table0";
    yield return "table1";
    yield return "table2";
    yield return "table4";
}

using (SqlCommand cmd = conn.CreateCommand())
{
    cmd.Parameters.Add(new SqlParameter("@id", id));
    cmd.CommandText = GetTables().Select(GetCommandText).Aggregate((s, s1) => s + s1);

    conn.Open();
    cmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:56:58.803

你删除

```
cmd.Parameters.Clear(); 
```

并且您只使用此代码一次

```
 cmd.Parameters.Add(new SqlParameter("@id", id)); 
```

所以 ：

```
cmd.CommandText = "update table0 set active= 'N' where id=@id";
                    cmd.Parameters.Add(new SqlParameter("@id", id));
                    cmd.ExecuteNonQuery();

                    cmd.CommandText = "update table1 set active= 'N' where id= @id ";
                    cmd.ExecuteNonQuery();

                     cmd.CommandText = "update table2 set active= 'N' where id= @id "
                    cmd.ExecuteNonQuery();

                    cmd.CommandText = "update table4 set active= 'N' where id= @id "
                    cmd.ExecuteNonQuery();
                    cmd.Parameters.Clear(); 
```

# asp.net - 我应该在 asp.net 中使用模拟吗？

> ID：15663262
> 
> 赞同：1
> 
> 时间：2013-03-27T15:53:24.890
> 
> 标签：asp.net, sql-server, database, impersonation

我们组织的 Web 应用程序主要由拥有 Active Directory 帐户的用户在内部使用。目前，我们的每个应用程序都在其自己的 AD 帐户下运行。我们授予对数据库端应用程序 AD 帐户的访问权限以进行数据访问。

出于审计原因，我们的 DBA 想要摆脱这种情况。他希望来自应用程序的每个数据请求都带有登录用户的 AD 凭据，而不是应用程序的 AD 凭据。我知道这是通过模仿来完成的。这是推荐的做法吗？有什么好处和坏处？有没有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:10:38.513

您将以下内容添加到您的 web.config 中：

```
<configuration>
  <system.web>
    <identity impersonate="true"/>
  </system.web>
</configuration> 
```

Web 服务器将“模拟经过身份验证的用户”，您的 DBA 将看到用户的网络 ID。您还可以使用配置文件来模拟特定用户：

```
<identity impersonate="true" userName="user" password="pwd" /> 
```

但这不是您的 DBA 在这种情况下要寻找的。

是的，“模拟”可能听起来很奇怪，但这是在您的内部网络上验证 Web 应用程序用户的完美标准方式。您必须确保您的每个用户都具有必要的文件夹权限等，才能完成他们需要做的所有事情，因为 Web 服务器现在以他们的名义而不是以一般应用程序用户的名义做这些事情。当用户尝试做他们过去可以做的事情时，您会很快听到这些权限问题，并被拒绝访问。但是，一旦他们每个人都获得了必要的权限，那就没问题了。

# javascript - 我的双击事件不起作用，当我双击标记时，它不会删除

> ID：15663266
> 
> 赞同：0
> 
> 时间：2013-03-27T15:53:36.360
> 
> 标签：javascript, html, google-maps

我的双击事件不起作用，当我双击标记时，它不会删除。请帮忙 ：）。这是我的代码。:) 我已经尝试通过编辑一些东西来修复它，但它似乎不起作用。

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
html { height: 100% }
body { height: 100%; margin: 0; padding: 0 }
#map_canvas { height: 100% }
</style>
<script type="text/javascript"
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC5dtn-wkog5K5cFZ0hN1uyiWo2kB89Lk0&sensor=true">
</script>
<script type="text/javascript">
var map;
var markersArray = [];

function initialize() {
   var haightAshbury = new google.maps.LatLng(37.7699298, -122.4469157);
   var mapOptions = {
      zoom: 12,
      center: haightAshbury,
      mapTypeId: google.maps.MapTypeId.TERRAIN
   };
   map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

   google.maps.event.addListener(map, 'click', function(event) {
      addMarker(event.latLng);
   });

   google.maps.event.addListener(map, 'dblclick', function() {
      clearOverlays();
   });
}

function clearOverlays() { 
   if (markersArray) { 
      for (i in markersArray) { 
         markersArray[i].setMap(null); 
      } 
   } 
}

function addMarker(location) {
   marker = new google.maps.Marker({
      position: location,
      map: map
   });
   markersArray.push(marker);
}

function deleteMarker() { 
   map.setMap(null);
}
</script>
</head>
<body onload="initialize()">
<div id="map-canvas" style="width:100%; height:100%"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:05:00.907

```
function addMarker(location) {
  marker = new google.maps.Marker({
    position: location,
    map: map
  });

  google.maps.event.addListener(marker, 'dblclick', 
    // closure so the callback remembers the marker
    (function(what){
      return function() {
        what.setMap(null);
        // you might want to remove it from markersArray here too
      };
    )(marker)
  );
  });

  markersArray.push(marker);
} 
```

# javascript - 是否有可能使用 JavaScript 破坏 XHR 网络性能？

> ID：15663267
> 
> 赞同：0
> 
> 时间：2013-03-27T15:53:37.923
> 
> 标签：javascript, performance, xmlhttprequest

我有一个 XHR 请求。我想了解从发送请求到获得响应需要多少时间。我想说它在服务器上花了 X 时间，在网络上花了 Y 时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:13:53.290

您可以使用日期对象来获取时间，在发送请求之前，您可以将时间戳存储在变量中，当它返回时（xml.readyState==4 && xml.status==200），您可以获得另一个时间日期对象来获取时间然后拿差价。

使用 IE --> 按 F12 --> 然后网络 --> 捕获网络 --> 您可以看到的每个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T15:58:12.690

1.  您可以使用 Chrome 中的**开发者工具**或 FF 中的 Firebug 来查看您的请求的网络跟踪。
2.  您还可以查看应用程序的**服务器端**日志。我使用 log4j，所以很容易看到时间戳。
3.  如果您只想使用**javascript**代码来完成此操作，我会说使用`console.log`. 您可以围绕它创建一个包装器以始终打印日期。如果未定义 console.log，请小心。

这是一个小的 js 包装器：

```
log : function(message, debugType) {
    var str = new Date().toLocaleTimeString() + ", "
            + ((debugType) ? debugType : "INFO") + ", " + message;
    console.log(str);
} 
```

然后你可以在你的 XHR 之前和之后调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:58:25.790

你可以：

1.  记录您发起请求的时间并将其存储在变量中
2.  服务器收到后立即记录时间并将其存储在变量中
3.  记录服务器完成处理的时间，并将处理开始和结束的时间包含在对客户端的响应中
4.  记录客户端收到响应的时间。

从这四个时间戳中，您应该能够确定服务器接收请求所用的时间、处理请求所用的时间、客户端接收响应所用的时间以及总时间。

它不会 100% 准确，但会很接近。

# javascript - 如何将脚本库添加到 XPage 自定义 Java 控件

> ID：15663268
> 
> 赞同：2
> 
> 时间：2013-03-27T15:53:37.743
> 
> 标签：javascript, jsf, xpages, lotus-notes

我正在尝试按照 IBM ( [LINK](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Creating_a_Basic_UI_Control_for_XPages) ) 上的指南在 XPage 中开发我自己的 Java 自定义控件。

一切正常，但现在我想做一些我想使用 jQuery 库的客户端 JavaScript 事情。在 XPage 中包含 jQuery.js 并不是什么大问题，但我想将我的控件打包到一个库中，以便我们公司的每个开发人员都可以使用它。

所以我的问题是如何将 JavaScript 集成到控件中，这样使用它的人就不必在 Notes 应用程序中手动实现 JavaScript。

当然，我可以将其放入渲染中：

```
writer.startElement("script", null);
writer.writeAttribute("type", "text/javascript", null);
writer.writeText(JQuery-js-content, null);
writer.endElement("script"); 
```

但是，当用户打开包含控件的 XPage 时，服务器必须始终呈现它。

从 Web 或服务器加载 jQuery 是没有选择的（防火墙）。

每当开发人员将组件从 jQuery 添加到 Notes 应用程序的面板中拖动时，我正在寻找的解决方案。

**更新：**

感谢您的提示，我找到了“最适合我”的解决方案。我使用`ExtLibResources`扩展库中的类`com.ibm.xsp.extlib.resources.ExtLibResources`来包含我的脚本库。使用这种方法，当您在同一个 XPage 上使用多个我的控件时，它们不会被包含多次。

如果您不想使用扩展库，但想使用此方法在自定义控件中包含 CSJS，则可以构建自己的资源类。

现在我包含 jQuery 的代码如下所示：

```
ScriptResource jquerymin = new ScriptResource();
jquerymin.setType("text/javascript");
jquerymin.setSrc(JQUERY_PATH);
jquerymin.setClientSide(true);
ExtLibResources.addEncodeResource(context, jquerymin); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T18:15:19.427

在 OpenNTF 上查看这个项目。一个 jQuery 分机。图书馆。我怀疑这是你需要做的。

[http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=jQuery%20Extension%20Library](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=jQuery%20Extension%20Library)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:38:40.180

除了自己添加库之外，难道不能使用 CDN 添加 jquery 库吗？

# windows - Application add to startup ( need administrator rights to start app )

> ID：15663270
> 
> 赞同：0
> 
> 时间：2013-03-27T15:53:40.833
> 
> 标签：windows, startup, administrator

I have a C# application and I want to add this application to start-up. I use:

```
 RegistryKey Key = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Windows\CurrentVersion\Run", true);
 Key.SetValue("APPName", "C:\\Program Files\\App\AppName.exe"); 
```

My application need Administrator Right to run, I want a method to register my app or to add to trusted applications.

## Thanks.

Now I'm using:

```
 var info = new ProcessStartInfo(
            Assembly.GetEntryAssembly().Location)
        {
            Verb = "runas", // indicates to elevate privileges
        };

        var process = new Process
        {
            EnableRaisingEvents = false, // enable WaitForExit()
            StartInfo = info
        };

        process.Start(); 
```

For obtain access only for one method, but now I have problem with

```
 unauthorizedAccessException was unhandled 
```

I'm trying to create a directory in C:\Program Files.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:02:03.573

如果您使用 Visual Studio 2010 或 2012，请转到添加新项目 Application Manifest。将请求的执行级别更改为以下：

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

现在，当您的应用程序启动时，它会要求在提升模式下运行。

另一种方法是在提升模式下重新启动应用程序。为此，您不需要应用清单。

您可以在这里阅读这两种技术：http:
[//www.codeproject.com/Articles/105506/Getting-Elevated-Privileges-on-Demand-using-C](http://www.codeproject.com/Articles/105506/Getting-Elevated-Privileges-on-Demand-using-C)

# rest - ServiceStack: Using a single route to perform multiple business processes on a resource

> ID：15663273
> 
> 赞同：4
> 
> 时间：2013-03-27T15:53:43.940
> 
> 标签：rest, servicestack

My team is in the process of designing a REST API for an existing enterprise application that handles tracking of physical assets.

Our domain model is pretty complex, and we're hitting a blocking issue while designing our routes.

Ideally, we'd like each resource to support multiple business processes. But we can't find a way to do that without extending the resource's URL to help ServiceStack's routing engine figure out which DTO to use.

Here's an example. We keep a detailed history of transactions that involve widgets, and users can perform multiple types of actions on a widget that we represent with different types of transactions. For example a `widget` could be inspected, or it could be cleaned. Both are operations against `/api/widget/{id}`, but the first results in an inspection transaction and the second a maintenance transaction. We'd really like to create different DTOs that use the same route, `/api/widget/{id}`, and have the correct DTO selected based on the request body.

This doesn't appear to be possible. Instead, it's looking like we need to create two endpoints: `/api/widgets/{id}/inspect` and `/api/widgets/{id}/clean`, or something similar.

That doesn't feel very RESTful, since it's not far from `/api/cleanWidget`. It's more of a method call than an update to a resource.

Another option we've discussed is creating a single `/api/transactions` endpoint, since most requests to the API will result in a transaction being created. However, this would result in a single, monolithic endpoint, and users would have to figure out which of dozens of possible data attributes they need to populate for a given type of request. It's also pretty far removed from the use cases that our users will be programming for. They care more about the physical entities they're interacting with, not our behind-the-scenes implementation.

Two questions:

1.  Are we thinking about this incorrectly? Is there a better way to model this in a RESTful way?
2.  If our thinking is sound, is there a good way to use ServiceStack to consider the request body when determining which DTO and service method to use when satisfying the request?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:22:18.617

怎么样`/api/widgets/{id}/inspection`？如果你 PUT 就可以开始检查，如果你 GET 就可以得到检查状态。

如果您有更多检查同时运行（与您提到的事务一起），则可以设想一个您 POST 到的模式，`/api/widgets/{id}/inspections`以便在`/api/widgets/{id}/inspections/{id}/`. 在这里您可以 GET 来查看状态，DELETE 来取消等等。

如果您想根据消息正文确定 URL，一个想法是拥有一个`/api/widgets/{id}/transactions`资源，您可以在其中发布消息。该资源可以解析身体并返回一个 201 并参考`/api/widgets/{id}/inspections/{id}/`身体是否要求检查，或者`/api/widgets/{id}/cleanings/{id}/`身体是否要求清洁。

这只是一些想法。顺便说一句，您可能想查看[RESTify DayTrader](http://bitworking.org/news/201/RESTify-DayTrader)以获得一些灵感。

# struct - 我的 C 结构和内存分配是否正确？

> ID：15663274
> 
> 赞同：0
> 
> 时间：2013-03-27T15:53:45.287
> 
> 标签：struct, dynamic-allocation, calloc

不确定我的语法是否正确；我的代码正在运行，只是想通过任何想要评论以帮助改进它的人运行它。我假设分配 20480 不会占用任何空间，因为它只是一个指针数组？所以我可以让它去任何大于 dwStringsFound 的数字？

```
 struct sArray   {
    TCHAR *sName;
    }*sKeys[20480];

    // get dwStringsFound...
    [...]

    // allocate the space
    for (DWORD i=0;i<dwStringsFound;i++) sKeys[i] = (sArray *) calloc(1,sizeof(sArray));
    for (DWORD i=0;i<dwStringsFound;i++) sKeys[i]->sName = tcalloc(1024);

    // Do work...
    [...]

    // Free resources.
    for (DWORD i=0;i<dwStringsFound;i++)    {
    free(sKeys[i]->sName);sKeys[i]->sName=NULL;
    free(sKeys[i]);sKeys[i]=NULL;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:06:27.403

TCHAR * 是一个指针，为什么你不能只做 TCHAR * sName[20480]？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:06:47.633

静态分配很好，但它不是最有效的内存。将来您可能需要考虑将 **sKeys 分配为 sArray 数组，其中 dwStringsFound 是该数组的大小。如果您在程序中的某个点调用深度递归函数，您当前的方法会遇到问题，您可能会用完堆栈内存。请记住，堆内存总是比堆栈内存多。如果你不打算在整个程序中使用某些东西，它可能应该被 malloc'ed 和释放。如果它只是静态分配的，那么它只是在使用它之后浪费空间。

# cakephp - Class Inflector not found after installing uploader 4.* plugin to cakephp using composer

> ID：15663276
> 
> 赞同：0
> 
> 时间：2013-03-27T15:53:50.567
> 
> 标签：cakephp, composer-php, uploader

After i installed uploader plugin in cakephp i received the following error NB: I used composer to install uploader dependency.

Fatal error: Class 'Inflector' not found in /home/*****/lib/Cake/Core/App.php on line 748

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:04:32.123

`App::uses('Inflector', 'Utility')`App.php 文件中似乎缺少了请参阅[https://github.com/cakephp/cakephp/pull/1201](https://github.com/cakephp/cakephp/pull/1201)

# javascript - 检测excel对话框何时出现并发出javascript命令

> ID：15663279
> 
> 赞同：1
> 
> 时间：2013-03-27T15:54:01.613
> 
> 标签：javascript, jquery, asp.net, extjs, export-to-excel

我在 asp.net 应用程序中出现和消失了一条“加载消息”。一个新的要求是，当单击链接按钮时会出现加载消息，然后假设它会在 excel 对话框弹出以打开或保存或取消（excel 文件）时消失。

如何检测此对话框？发生回发，我使用的是Response.End，但与excel对话框交互后似乎无法让“加载覆盖层消失”。

这发生在 ASP.NET 3.5 / EXT JS (EXT.NET) 中，但我可以像在这个项目中那样使用 jQuery。我玩过 Fiddler，但我对在 DOM 中处理事件和检测有点生疏。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T03:04:45.577

不久前我可能遇到过同样的问题。这是堆栈帖子...

[下载文件并更新面板进度](https://stackoverflow.com/a/7937284/697660)

如果您在此页面后面的代码中执行长时间运行的工作，您的更新面板将按预期运行。事件的生命周期可能是这样的。

1.  btnEvent 获取/构建 excel 文件。
2.  在 btn 事件背后的代码中，执行构建/获取 excel 文件并将其存储在缓存中的工作......然后将 iframe 的源设置为提供 excel 作为下载（从缓存）的页面。更新面板一直显示进度 html。
3.  当 html 刷新时，加载面板将消失，下载文件提示应从 iframe 中出现。

我不必编写任何 javascript 来使用更新面板来完成这项工作。

```
<asp:UpdateProgress ID="progress1" runat="server" AssociatedUpdatePanelID="up">
    <ProgressTemplate>
        <div id="processMessage">
            <table width="100%">
                <tr>
                    <td>
                        Loading...
                    </td>
                    <td>
                        <img alt="Please wait..." src="../Images/spinner.gif" />
                    </td>
                </tr>
            </table>
        </div>
    </ProgressTemplate>
</asp:UpdateProgress>

<asp:UpdatePanel runat="server" ID="up">
    <ContentTemplate>
            <div id="excel" align="right">
                <asp:Button runat="server" ID="btnExcelExport" Text="Export to Excel" OnClick="btnExcelExport_Click" />
            </div>
            <iframe runat="server" id="ifmExcel" width="0" height="0" marginheight="0" marginwidth="0" frameborder="0" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

您绝对可以使用 javascript 和 ajax 调用执行此操作，使用 beforeSend 和完成事件在工作完成时显示微调器，然后在完成时更改 iframe 的 src attr，启动下载。

希望这可以帮助。

# assembly - 如何让 GNU 汇编器使用斜杠 / 表示注释？

> ID：15663280
> 
> 赞同：11
> 
> 时间：2013-03-27T15:54:07.363
> 
> 标签：assembly, comments, gnu, gnu-assembler

这确实是我的一个愚蠢的特质，但我无法忍受 GNU AS 用来插入评论的方式。我太习惯于 Sun 方式（在大多数 UNIX 汇编程序中使用的方式相同），它使用一个简单的斜杠“/”来注释代码直到行尾。

你知道有什么方法可以完成我的小奇思妙想吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-18T12:15:03.717

在 Gnu 汇编器中，注释开始字符是特定于目标的。对于 i386 和 x86_64，它是 #。对于 ARMv7，它是 @。

其他一些注释约定在某些条件下有效。我不确定细节。// comment starter 和 /* */ 多行注释是我见过的例子。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-27T17:08:39.027

是的，继续使用`#`，你会习惯的。

可能有一些方法可以`/`开始工作，但是您的代码不仅是特定于处理器的，而且是特定于计算机的。你最好习惯小事情，而不是完全破坏代码的可移植性来幻想一时兴起。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-08-23T17:32:22.853

**GNU GAS 文档**

在“[机器依赖](https://sourceware.org/binutils/docs-2.26/as/Machine-Dependencies.html#Machine-Dependencies)”部分下，进入每个拱门，然后进入“语法”和“字符”。

这记录了每个拱门的评论。

**x86**

[https://sourceware.org/binutils/docs-2.26/as/i386_002dChars.html#i386_002dChars](https://sourceware.org/binutils/docs-2.26/as/i386_002dChars.html#i386_002dChars)

> 出现在行中任何地方的“#”表示注释的开始，该注释延伸到该行的末尾。
> 
> 如果“#”作为一行的第一个字符出现，则整行被视为注释，但在这种情况下，该行也可以是逻辑行号指令（请参阅注释）或预处理器控制命令（请参阅预处理） .
> 
> 如果没有指定 --divide 命令行选项，那么出现在行中任何位置的“/”字符也会引入行注释。

但是，我要么遗漏了某些东西，要么存在错误，因为我的测试与文档不匹配。

好的：

```
/ mycomment
# mycomment
nop # mycomment 
```

失败：

```
nop / mycomment 
```

这表明`/`只有当它是第一个字符时才有效。

并且`--divide`没有任何区别。

**手臂**

[https://sourceware.org/binutils/docs-2.26/as/ARM_002dInstruction_002dSet.html#ARM_002dInstruction_002dSet](https://sourceware.org/binutils/docs-2.26/as/ARM_002dInstruction_002dSet.html#ARM_002dInstruction_002dSet)

> 行中任何地方出现“@”表示注释的开始，该注释延伸到该行的末尾。
> 
> 如果“#”作为一行的第一个字符出现，则整行被视为注释，但在这种情况下，该行也可以是逻辑行号指令（请参阅注释）或预处理器控制命令（请参阅预处理） .

我的测试`arm-linux-gnuabihf-as`证实了文档所说的内容。

好的：

```
# mycomment
@ mycomment
nop @ mycomment 
```

失败：

```
nop # mycomment 
```

**aarch64**

[https://sourceware.org/binutils/docs-2.26/as/AArch64_002dChars.html#AArch64_002dChars](https://sourceware.org/binutils/docs-2.26/as/AArch64_002dChars.html#AArch64_002dChars)

> 行上出现'//' 表示注释的开始延伸到当前行的结尾。如果“#”作为一行的第一个字符出现，则整行都被视为注释。

[此外， ARMv8-fb 手册](https://static.docs.arm.com/ddi0487/fb/DDI0487F_b_armv8_arm.pdf)在 C1.2“A64 汇编语言的结构”本身也鼓励了这一点：

> 在 C1-185 页的示例 C1-1 中，序列 // 用作注释前导符，鼓励 A64 汇编器接受此语法。

我的测试`aarch64-linux-gnuabihf-as`证实了文档所说的内容。

好的：

```
// mycomment
# mycomment
nop // mycomment 
```

失败：

```
nop # mycomment 
```

**个人推荐**

如果可以选择，只需始终使用 C 预处理器编译程序集`gcc`或`cpp`显式使用 C 预处理器，并使用 C 预处理器注释：

```
/* mycomment */ 
```

因为：

*   C 是标准化的，适用于所有拱门
*   在任何情况下你都需要 C 预处理器，因为 GNU GAS 宏不够强大
*   `#`不好，因为它可能与`#`预处理器指令冲突

在 Ubuntu 16.04、Binutils 2.26.1 上测试。

# orm - Passing User-Defined Table type using FluentData

> ID：15663283
> 
> 赞同：1
> 
> 时间：2013-03-27T15:54:09.663
> 
> 标签：orm, fluentdata

I'm new to FluentData, and I would like to know if it's possible to pass a user-defined table type to a stored procedure using FluentData.

```
dbContext().Sql("MyStoredProcedureName")
.Parameter("MyUserDefinedTableType", DbTypes.???????) 
```

Which `DataTypes` should i use? Or is it not supported?

# asp.net-mvc-4 - Mono 3.0.6 - System.IO.FileNotFoundException

> ID：15663290
> 
> 赞同：1
> 
> 时间：2013-03-27T15:54:26.113
> 
> 标签：asp.net-mvc-4, mono, centos

I'm running Mono 3.0.6 on CentOS 6\. I've published an ASP.NET 4.0/MVC4 website on it, and after ironing out some compatibility issues, I've met a wall. Whenever I try to access the application, I get this error:

```
 System.IO.FileNotFoundException
Could not load file or assembly 'System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies.

Description: HTTP 500.Error processing request.
Details: Non-web exception. Exception origin (name of application or object): mscorlib. 
```

I think this is due to the fact that Mono uses EF6, but this is still Alpha and so Microsoft bundles EF5\. What would be the most elegant, least 'hackish' way of fixing this error?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:03:45.990

您需要弄清楚什么是*未找到的***文件**。

 *为此，您可以使用 env vars`MONO_LOG_MASK="asm"`和`MONO_LOG_LEVEL="debug"`，[在此处](http://www.mono-project.com/Logging_Runtime_Events)解释。*

# jquery - 是的，不工作

> ID：15663298
> 
> 赞同：2
> 
> 时间：2013-03-27T15:54:55.227
> 
> 标签：jquery, yepnope

我已经尝试实现 yepnope，无论我尝试什么，yepnope 事件根本不会触发，无论我尝试他们主页上的哪个示例。我的 Firebug 日志中没有错误。

我的`<head>`标签中有以下内容。

```
 <script type="text/javascript" src="yepnope.js"></script>
    <script type="text/javascript">  
        yepnope({
            test: window.jQuery,
            nope: 'jquery.js',
            complete: function () {
                console.log('jQuery loaded!');
            }
        });               
    </script> 
```

'jQuery 加载' 消息永远不会记录在控制台中。jquery.js 文件与我的 index.html 文件在同一个文件夹中，所以这应该可以正常工作，对吧？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:46:24.890

我找到了解决方案——我在手册中遗漏了一些东西。我需要有适当的缓存头。一旦我设置了正确的缓存头，它就起作用了。这是在 YepNope 主页上的“注意事项”标题下。

# ios - 你如何打开一个带有完成处理程序的 FBSession，它不会被保留并在每次会话状态更改时调用？

> ID：15663301
> 
> 赞同：6
> 
> 时间：2013-03-27T15:55:00.943
> 
> 标签：ios, facebook-ios-sdk

出于某种奇怪的原因，Facebook 决定创建实际上只是通知观察者的完成处理程序。忽略他们为什么这样做，我需要一些方法来请求打开一个 FBSession 并且只发生一次回调，因为回调中的对象不能被保留。

如果用户按下按钮并且具有“publish_actions”权限的 Facebook 会话未打开，则应显示活动指示器并防止在打开 Facebook 会话时与 UI 交互。

这是用于登录 Facebook 的方法：

```
- (void)loginToFacebookFromViewController:(UIViewController *)viewController completion:(void (^)(NSString *facebookAccountName))completion
{
    if([self isLoggedIntoFacebook] == NO)
    {
        [viewController startLoadingAnimation];

        [FBSession openActiveSessionWithPublishPermissions: @[ @"publish_actions" ] defaultAudience:FBSessionDefaultAudienceFriends allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error)
            {
                if(error == nil)
                {
                    [FBRequestConnection startForMeWithCompletionHandler:^(FBRequestConnection *connection, id<FBGraphUser> user, NSError *error)
                        {
                            NSString *accountName = [user name];

                            if(error == nil)
                            {
                                NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];
                                [standardUserDefaults setObject:accountName forKey:TSFacebookAccountName];
                                [standardUserDefaults synchronize];
                            }

                            [viewController stopLoadingAnimation];

                            if(completion != nil)
                                completion(accountName);
                        }];
                }
                else
                {
                    [viewController stopLoadingAnimation];

                    if(completion != nil)
                        completion(nil);
                }
            }];
    }
    else
    {
        if(completion != nil)
            completion([self facebookAccountName]);
    }
} 
```

如果没有保留完成处理程序（再次出于毫无意义的原因，因为 NSNotifications 在会话状态更改时发布），那么此方法将完美运行。

因为该应用程序不围绕 Facebook 旋转，所以我对会话状态何时更改没有任何兴趣。如果用户尝试向 Facebook 分享内容并且活动会话未打开，则登录过程将被启动，如果会话打开，则共享过程将继续。否则，将向用户显示错误消息。

有人能解释一下 Facebook 是如何期望实现这种功能的吗，因为这似乎是一个很常见的用例，在有人提到“你为什么不使用默认的 Facebook 对话框”之前，这是因为需要向用户收集用于 Open Graph 帖子的特定信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-24T19:44:38.337

如果您不关心像我一样从 FBSessionStateHandler 接收状态更改，那么下面的代码应该允许您登录 Facebook 并为您提供未保留的完成块。

当发生任何状态更改时，传递到方法中的完成块将始终被使用，然后立即 nil'd ，这样如果发生另一个状态更改，它将被忽略。

```
typedef void(^FacebookLoginCompletionBlock)(id<FBGraphUser> user);

- (void)loginToFacebookFromWithCompletionBlock:(FacebookLoginCompletionBlock)completionBlock
{
    // If the user is not logged into Facebook attempt to open a session with "publish_actions" permissions.
    if([[FBSession activeSession] isOpen] == NO)
    {
        // Copy the completion block to a local variable so it can be nil'd out after it is used to prevent retain loops.
        __block FacebookLoginCompletionBlock copiedCompletionBlock = completionBlock;

        [FBSession openActiveSessionWithPublishPermissions:@[ @"publish_actions" ] defaultAudience:FBSessionDefaultAudienceFriends allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error)
            {
                // Only attempt to run any of this code if there is a completion block to call back to. If completion block is nil than it has already been used and this is a state change that we do not care about.
                if(copiedCompletionBlock != nil)
                {
                    // Because this method is only concerned with the user logging into Facebook just worry about the open state occuring with no errors.
                    if(status == FBSessionStateOpen && error == nil)
                    {
                        // If the user successfully logged into Facebook download their basic profile information so the app can save the information to display to the user what account they are logged in under.
                        [FBRequestConnection startForMeWithCompletionHandler:^(FBRequestConnection *connection, id<FBGraphUser> user, NSError *error)
                            {
                                if(copiedCompletionBlock != nil)
                                    copiedCompletionBlock(user);

                                // nil out the copied completion block so it is not retained and called everytime the active FBSession's state changes.
                                copiedCompletionBlock = nil;
                            }];
                    }
                    // Because this method is only concerned with the user logging into Facebook if any other state is triggered call the completion block indicating that there was a failure.
                    else
                    {
                        if(copiedCompletionBlock != nil)
                            copiedCompletionBlock(nil);

                        // nil out the copied completion block so it is not retained and called everytime the active FBSession's state changes.
                        copiedCompletionBlock = nil;
                    }
                }

                // This block will exist the lifespan of the application because for some bizarre reason Facebook retains the completion handler for their open active session methods. Throw in some code that will display an error to the user if any session state changes occur that Facebook thinks the user should be aware of. Your code should be always checking if a active Facebook session exists before taking any action so not being aware of these changes should not be any issue. Worst case scenario you can listen for FBSessionDidSetActiveSessionNotification, FBSessionDidUnsetActiveSessionNotification, FBSessionDidBecomeOpenActiveSessionNotification or FBSessionDidBecomeClosedActiveSessionNotification notifications.
                if ([error fberrorShouldNotifyUser] == YES)
                {
                    NSString *alertTitle = @"Error logging into Facebook";
                    NSString *alertMessage = [error fberrorUserMessage];

                    if ([alertMessage length] == 0)
                        alertMessage = @"Please try again later.";

                    UIAlertView *alertView =  [[UIAlertView alloc] initWithTitle:alertTitle message:alertMessage delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

                    [alertView show];
                }
            }];
    }
    // If the user is already logged into Facebook immediately call the completion block with the user object that should have been saved when the user previously logged in.
    else
    {
        if(completionBlock != nil)
            completionBlock([self facebookUser]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:14:38.853

我实现类似行为的方式是将我的会话逻辑放在一个单例中。单例实现了一个完成处理程序，当会话发生变化时，FB 可以安全地调用该处理程序。然后，我的完成处理程序会发布自己的通知，以供其他控制器根据需要进行观察。

假设您有一个`MySession`单例，您在其中定义了一些关于 FB auth 的方法和通知。您的视图控制器逻辑将类似于：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // observe MySession notifications
    [MySession.sharedSession addObserver:self];
}

- (void)dealloc
{
    // stop observing MySession notifications
    [MySession.sharedSession removeObserver:self];
}

// this is a user action that requires FB auth
- (void)someActionRequiringFacebookAuth
{
    if (![MySession.sharedSession isLoggedIntoFacebook]) {
        self.postAuthAction = @selector(someActionRequiringFacebookAuth);
        [MySession.sharedSession loginToFacebook];
    }

    else {
        // perform action
    }
}

// notification posted by MySession before a FB auth attempt
- (void)mySessionWillAttemptFacebookAuth:(NSNotification *)notification
{
    [self startLoadingAnimation];
}

// notification posted by MySession if a FB auth attempt succeeds
- (void)mySessionDidAuthWithFacebook:(NSNotification *)notification
{
    [self stopLoadingAnimation];
    if (self.postAuthAction) {
        [self performSelector:self.postAuthAction];
        self.postAuthAction = nil;
    }
}

// notification posted by MySession if a FB auth attempt fails
- (void)mySessionFacebookAuthDidFail:(NSNotification *)notification
{
    [self stopLoadingAnimation];
    // display error if desired
    self.postAuthAction = nil;
} 
```

# php - 只将一个值传递给 php 文件

> ID：15663304
> 
> 赞同：-2
> 
> 时间：2013-03-27T15:55:04.450
> 
> 标签：php, javascript, jquery, ajax

我正在尝试通过创建股票投资组合来学习 php 和 javascript。我想要做的是自动更新表格的价格单元格，而无需使用 javascript 刷新页面。我创建了一个新的 php 文件，仅将那个价格字段添加到投资组合中，但我似乎无法让它工作。我在那个价格字段上有很多错误。我已将所有文件都放在这里[pastebin](http://pastebin.com/NZ31hJPV)。任何帮助，将不胜感激。 ![在此处输入图像描述](../Images/36899c456d220a6446cda26d3d26d5f1.png)

```
portfolio.php file

<table class="table table-hover center-table table-bordered">
        <tr>
        <th>Symbol</th>
        <th>Name</th>
        <th>Shares</th>
        <th>Price</th>
        <th>Total</th>
        </tr>
<?php foreach ($shares as $row): ?>

        <tr>
        <td><?= $row["symbol"]?></td>
        <td><?= $row["name"]?></td>
        <td><?= $row["shares"]?></td>

        <td id="price">$<?= number_format($row["price"],2)?></td>

        <td>$<?= number_format($row["total"],2)?></td>
        </tr>

<? endforeach ?>

<tr>
    <td>CASH</td>
    <td></td>
    <td></td>
    <td></td>
    <td>$<?= number_format($cash[0]["cash"], 2)?></td>

</tr>

</table>

<script type="text/javascript" src="js/update.js" ></script> 
```

index.php 文件

```
<?php

// configuration
require("../includes/config.php");

//query user's portfolio

$rows = query("SELECT * FROM shares WHERE id = ?", $_SESSION["id"]);
$cash = query("SELECT cash FROM users WHERE id = ?", $_SESSION["id"]);

    //create array to store the shares
    $shares = [];

    //for each of the user info

    foreach($rows as $row){

        //lookup stock info
        $stock = lookup($row["symbol"]);

        if($stock !== false){

            $shares[] = [
                "name" => $stock["name"],
                "price" => $stock["price"],
                "shares" => $row["shares"],
                "symbol" => $row["symbol"],
                "total" => $row["shares"]*$stock["price"]

            ];
                 //dump($shares);      
        }

    }

// render portfolio
render("portfolio.php", ["shares" => $shares,"cash" => $cash, "title" => "Portfolio"] );  
?> 
```

更新.php

```
<?php

require("../includes/functions.php"); 
require("../includes/config_update.php");

$rows = query("SELECT * FROM shares WHERE id = ?", $_SESSION["id"]);
$cash = query("SELECT cash FROM users WHERE id = ?", $_SESSION["id"]);
        //create array to store the shares
    $shares = [];

    //for each of the user info

    foreach($rows as $row){

        $stock = lookup($row["symbol"]);

        if($stock !== false){

            $shares[] = [

                "name" => $stock["name"],
                "price" => $stock["price"],
                "shares" => $row["shares"],
                "symbol" => $row["symbol"],
                "total" => $row["shares"]*$stock["price"]
            ];

        }
    }

// render portfolio
render("portfolio.php", ['shares' => $shares, 'cash' => $cash]);  
?> 
```

更新.js

```
$(document).ready(function(){
    var updater = setTimeout(function(){
        $('#price').load('update.php', 'update=true');
    },6);
}); 
```

当我第一次运行它时，我在价格单元格中得到了整个表格以及这些错误消息注意：未定义的变量：portfolio.php 中的股票第 10 行为第 10 行的portfolio.php 中的 foreach() 提供的参数无效未定义的变量兑现第 31 行的投资组合.php

我不再收到任何错误，但现在我在表格的价格字段中获得了整个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:19:26.227

您在 index.php 中传递了一个参数数组，其中一个具有 key `shares`，但是在 update.php 中，您试图只传回该数组，在 update.php 中更改它

```
 render("portfolio.php", $share); 
```

到

```
render("portfolio.php", ['shares' => $share]); 
```

# openstack - RHEL 6.x image for OpenStack

> ID：15663308
> 
> 赞同：1
> 
> 时间：2013-03-27T15:55:11.790
> 
> 标签：openstack, rhel6

I am looking for a RHEL 6.x image to upload as an image to our Openstack System, similar to what Rackspace ([https://github.com/rackerjoe/oz-image-build](https://github.com/rackerjoe/oz-image-build)) provides, however they only go up to 5.6. The idea is to have an image that supports the instance meta data server and ssh injects.

Googling didnt help much.

Cheers Jannis

# css - 修复css中的列高度

> ID：15663310
> 
> 赞同：1
> 
> 时间：2013-03-27T15:55:18.663
> 
> 标签：css, height

我有以下 CSS 源代码：

```
/**Track Properties***/
#area {
    font-size: 14px;
}
conteiner {
    height:100%;

}
.track {
    position: relative;
    padding: 0px;
    margin: 0 auto;
    width: 980px;
}

.trackdetails {
    position: relative;
    top: -450px;
    float: left;
    width: 250px;
    line-height: 25px;
    border-right: 2px solid #9e9e9e;
    padding-right: 25px;
    padding-bottom: 15px;
    font-size: 14px;
    margin: 0;
    left:100px;

}

    .trackdetails #title {
        color: #3852A4;
        font-size: large;
        text-decoration: underline;
        font-family: Tahoma, Geneva, sans-serif;
        margin-bottom: 20px;
    }

    .trackdetails #content {
        z-index: 1111;
    }

#trackdescription {
    width: 550px;
    text-align: justify;
    min-height: 400px;
}

/**END**/ 
```

而这个 HTML/ASPX 源代码：

```
 <div class="track">

        <h1><%=TrackName %></h1>

        <div class="details">
            <span id="author">מאת: <%=FullName %>,</span>
            <span id="date">פורסם בתאריך: <%=PostDate%></span>

            <div>
                <span id="area"><b>איזור: </b><%=TrackLocation %></span>
            </div>
        </div>
        <div id="trackdescription">
            <%=TrackDescription %><p></p>
        </div>

        <div class="trackdetails">
            <div id="content">
                <div id="title">פרטים נוספים</div>
                <p>
                    <b>רמת קושי:</b>  <%=DifficultLevel %>
                </p>
                <p>
                    <b>מעגלי?</b> <%=IsCircular %>
                </p>
                <p>
                    <b>מתאים למתחילים?</b>  <%=ForBeginners %>
                </p>
                <p>
                    <b>משך המסלול:</b> <%=TrackDuration %>
                </p>
                <p>
                    <b>אורך המסלול:</b> <%=TrackLength %>
                </p>
                <p>
                    <b>טיפוס מצטבר:</b> <%=OverallHeight %>
                </p>
                <p>
                    <b>עונה מומלצת:</b> <%=Season %>
                </p>
                <p>
                    <b>נקודת התחלה:</b> <%=StartPoint %>
                </p>
                <p>
                    <b>מקום חניה:</b> <%=ParkingPlace %>
                     <b>מקום חניה:</b> <%=ParkingPlace %> <b>מקום חניה:</b> <%=ParkingPlace %> <b>מקום חניה:</b> <%=ParkingPlace %> <b>מקום חניה:</b> <%=ParkingPlace %> <b>מקום חניה:</b> <%=ParkingPlace %> <b>מקום חניה:</b> <%=ParkingPlace %> <b>מקום חניה:</b> <%=ParkingPlace %>
                </p>
            </div>    </div>

        </div>
        תמונות <%=images %><p></p>
        מפה : <%=result2%><p></p> 
```

问题是我得到了这个结果，有些内容在其他内容上（有一个 PrintScreen） 我的问题是为什么以及如何解决这个问题？希望得到帮助，谢谢！[在此处输入图片描述][1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:30:36.350

添加这个CSS

```
#image{width:600px;
height:50px;
float:right;}

#result{width:600px;
height:50px;
float:right;} 
```

并在 html 中像这样使用 div

```
<div id="image">?????? <%=images %><p></p></div>
<div id="result">??? : <%=result2%><p></p></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:53:36.213

试试这个 CSS——

```
#image{position:relative;
top:-450px;
width:1010px;
height:100px;
float:left;}

#result{position:relative;
top:-450px;
width:1010px;
height:100px;
float:left;} 
```

# javascript - 如何使用与 AND 相对的 OR 逻辑过滤表列

> ID：15663313
> 
> 赞同：5
> 
> 时间：2013-03-27T15:55:27.853
> 
> 标签：javascript, jquery, datatables, filtering

[**示例小提琴**](http://jsfiddle.net/fks37/)

我有一个 html 表：

```
_A_B_C_D_
|0|1|0|1|
|0|1|0|0|
|1|0|0|1| 
```

我想过滤*非零*列。使用 jQuery dataTables（不是硬性要求，正是我目前使用的）我执行以下过滤器：

```
// value is the column index, true simply informs the filter method to use regex
dataTable.fnFilter("[^0]", value, true); 
```

但是，过滤多个列会创建一个**AND**过滤器。因此：

```
dataTable.fnFilter("[^0]", 0 /*A*/, true); 
dataTable.fnFilter("[^0]", 3 /*D*/, true); 
```

将创建以下

```
_A_B_C_D_
|1|0|0|1| 
```

我需要**OR**行为，但这会创建下表：

```
_A_B_C_D_
|0|1|0|1|
|1|0|0|1| 
```

其中*A 列*非零**或** *D 列*非零。我想不出任何方法可以用我目前的结构来实现这一点。

如何使用与 AND 相对的 OR 逻辑过滤表列？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T17:01:08.153

使用您的小提琴作为模型，我对其进行了更新以提供我认为您想要的功能。

每次单击复选框时，我都会扩展 dataTables 过滤：

```
$.fn.dataTableExt.afnFiltering.push(
    function (settings, data, index) {
        var s = [0, 3, 5]; // columns to filter
        for (var i=0; i < s.length; i++) {
            if (data[s[i]] != 0) return true;
        }
        return false;
    }
); 
```

完全集成到小提琴中：[链接](http://jsfiddle.net/fks37/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-07T10:16:50.230

以防万一您可能需要将该功能包装到某些用户界面中，您可以查看[这个 DataTables 插件](https://github.com/ygorbunkov/datatables-multiple-criteria-filter)，除了传统的“与”逻辑之外，您还可以应用“或”过滤。

# css - Get the a sepia effect image and full color when hovering it?

> ID：15663318
> 
> 赞同：0
> 
> 时间：2013-03-27T15:55:39.323
> 
> 标签：css

I found this css code which show the images in grayscale color and then in full color when hover the image. I need the same but with the **sepia** color instead of grayscale

```
 img {
  filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); /* Firefox 3.5+ */
  filter: gray; /* IE6-9 */
  -webkit-filter: grayscale(100%); /* Chrome 19+ & Safari 6+ */
}

 img:hover {
  filter: none;
  -webkit-filter: grayscale(0%);
} 
```

Update: tried with this code but it doesn't work in Firefox. The sepia image is not shown at all:

```
img.sepia{ -webkit-filter: sepia(1);
-webkit-filter: sepia(100%); -moz-filter: sepia(100%);
-ms-filter: sepia(100%); -o-filter: sepia(100%);
filter: url(sepia.svg#old-timey);
filter: sepia(100%);
background-color: #5E2612;
filter: alpha(opacity = 50);
zoom:1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T07:33:49.913

使用 webkit 和过滤器，这很容易。在这里，您可以剪切和粘贴：

```
img {
    filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'old-timey\'><feColorMatrix type=\'matrix\' values=\'0.14 0.45 0.05 0 0 0.12 0.39 0.04 0 0 0.08 0.28 0.03 0 0 0 0 0 1 0\'/></filter></svg>#old-timey");
    -webkit-filter: sepia(1);
    -webkit-filter: sepia(100%);
    -moz-filter: sepia(100%);
    -ms-filter: sepia(100%);
    -o-filter: sepia(100%);
    filter: sepia(100%);
}
img:hover {
    filter: none;
    -webkit-filter: sepia(0);
    -moz-filter: sepia(0);
    -ms-filter: sepia(0);
    -o-filter: sepia(0);
    filter: sepia(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T15:57:43.993

您可以使用 Sepia CSS 过滤器。

[http://html5-demos.appspot.com/static/css/filters/index.html](http://html5-demos.appspot.com/static/css/filters/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T11:17:52.407

这是为了让它在 FF 中更像在 chrome 中

```
filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'old-timey\'><feColorMatrix type=\'matrix\' values=\'0.64 0.55 0.15 0 0 0.52 0.49 0.14 0 0 0.18 0.38 0.13 0 0 0 0 0 1 0\'/></filter></svg>#old-timey"); 
```

# c# - WPF & MVVM - 单元测试和弹出消息框或对话框

> ID：15663320
> 
> 赞同：1
> 
> 时间：2013-03-27T15:55:40.687
> 
> 标签：c#, wpf, mvvm

我正在用 MVVM 编写一个应用程序，到目前为止效果很好。但我正在 ViewModel 中工作，这会引发一个错误，我想向用户展示让他们知道。

我*可以*在我的 ViewModel (VM) 中做这样的事情：

```
MessageBox.Show(errorMessage); 
```

或更可能是这样的：

```
new ErrorMessageWindow(errorMessage).ShowDialog() 
```

所以我可以设计它。

问题是我正在从 VM 创建一个 UI 弹出窗口。我正在为应用程序创建单元测试，它也会弹出窗口并停止运行，直到它被手动关闭。

寻找一个好的方法。

我正在考虑在 VM 中引发一个事件 - 但由于 View 确实不了解 VM 或其属性，我不知道我将如何订阅它。

我没有使用任何外部框架——我宁愿自己实现任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:00:02.457

我通常为 viewmodel 提供了一种方法来表明它需要引发错误。您可以通过依赖注入、将其传递给构造函数等来做到这一点。实现由包含应用程序或绑定视图提供。

当您进行测试时，您将传入“显示错误消息”功能的测试实现，该功能仅验证它是否被调用以及它是否请求了正确的错误消息。理想情况下，您将视图模型限制为将资源名称和参数数组传递给格式字符串，以便它也适用于国际化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T16:01:08.647

您应该反对抽象，以便您可以在单元测试期间交换实现。

例如，您可以拥有一个`IWindowManager`带有`ShowDialog`方法的接口，然后是一个调用的实现`MessageBox`（或您在生产期间想要的任何技术），然后您可以使用隔离框架或为单元测试创​​建一个测试实现，返回您想要的结果测试中的控制变量。

你真的应该考虑[使用 MVVM 框架](http://www.lhotka.net/weblog/UsingTheMVVMPatternRequiresAFramework.aspx)，像[Caliburn.Micro](http://caliburnmicro.codeplex.com/)这样的东西已经有了一个`IWindowManager`接口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T16:00:35.250

我建议您远离传统的`Win32 dialogs`. 如果有的话，最好在 WPF 中完成对话框，并从`ViewModel`使用例如绑定到 bool 的对话框中提升它以提高可见性。这很容易测试，因为您甚至不需要创建窗口管理器的模拟类。

[此处](https://stackoverflow.com/questions/8103743/wpf-c-sharp-inputbox/8103869#8103869)提供了有关如何在 WPF 中制作自己的弹出对话框的简单示例。

[您还可以在此处](http://www.codeproject.com/Articles/36745/Showing-Dialogs-When-Using-the-MVVM-Pattern)找到使用对话框服务的替代实现，以帮助您从 ViewModel 中创建对话框。这允许您在单元测试期间模拟对话服务。

# php - how to insert followers list from twitter into database using PHP

> ID：15663322
> 
> 赞同：-1
> 
> 时间：2013-03-27T15:55:47.470
> 
> 标签：php, database, twitter, phpmyadmin

I'm still new at this field of API & PHP so any help would be great!

I'm using the Twitter's API "followers/ids" and I would like to insert it into my table in "phpMyAdmin".

After I get the list, I want to insert it into the table that contains two columns - one is for the ID I entered and the other column is for the follower's ID.

I managed to get the list from the Twitter's API but unable to insert it into the table..

thanks for your help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:29:17.917

使用这个：[https](https://dev.twitter.com/docs/api/1.1/get/followers/list) ://dev.twitter.com/docs/api/1.1/get/followers/list将帮助您了解您想对关注者做什么。

SQL 语句应该很容易使用 PHP。创建一个数据库连接并使用 INSERT INTO table_name VALUES (parameter1, paramter2...)。

关于 PHP + mySQL 的信息可以在这里找到：http: [//php.net/manual/en/function.mysql-connect.php](http://php.net/manual/en/function.mysql-connect.php)

所以我要做的是将来自twitter的数据保存在PHP的一个类中，然后将每个数据保存在PHP的一个数组中，完成后我将使用SQL语句：

插入表名值（parameter_for_column1，parameter_for_column2 ... parameter_for_columnN）；

然后，这些值可以是您的 PHP 类中的变量。这应该是一个有效的查询，否则请看这里：www.w3schools.com/sql/sql_insert.asp

```
class dataFromTwitter
{
    public $id;
    public $screen_name;

    public function __construct($setID, $setScreenName)
    {
        $this->id = $setID;
        $this->screen_name = $setScreenName;
    }
}

function insertDB($twitterArray)
{
    foreach($twitterArray as $item)
    {
        mysqli_query($db, "INSERT INTO table_name VALUES ('.$item->id.', '.$item->screen_name.'");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:11:17.367

您只需获取关注者 id 并将变量放入`insert into`sql 语句中，您也可以从这里开始：`https://dev.twitter.com/docs/api/1/get/followers/ids`

# python - 匹配不同的列并使用python组合它们

> ID：15663323
> 
> 赞同：0
> 
> 时间：2013-03-27T15:55:47.667
> 
> 标签：python, python-2.7

我有两个文本文件。

第一个是空格分隔的列表：

```
23 dog 4
24 cat 5
28 cow 7 
```

第二个是 -`'|'`分隔的列表：

```
?dog|parallel|numbering|position
Dogsarebarking
?cat|parallel|nuucers|position
CatisBeautiful 
```

我想获得如下输出文件：

```
?dog|paralle|numbering|position|23
?cat|parallel|nuucers|position|24 
```

这是一个`'|'`- 分隔的列表，其中包含第二个文件的值，并附加了第一个文件的第一列中的值，其中两个文件的第二列中的值匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T15:59:24.523

用于`csv`读取第一个文件，并使用一个字典来存储 file1 行。第二个文件是 FASTA 格式，所以我们只取以 开头的行`?`：

```
import csv

with open('file1', 'rb') as file1:
    file1_data = dict(line.split(None, 2)[1::-1] for line in file1 if line.strip())

with open('file2', 'rb') as file2, open('output', 'wb') as outputfile:
    output = csv.writer(outputfile, delimiter='|')
    for line in file2:
        if line[:1] == '?':
            row = line.strip().split('|')
            key = row[0][1:]
            if key in file1_data:
                 output.writerow(row + [file1_data[key]]) 
```

这会产生：

```
?dog|parallel|numbering|position|23
?cat|parallel|nuucers|position|24 
```

对于您的输入示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T16:24:14.953

这是[pandas](http://pandas.pydata.org)库擅长的任务：

```
import pandas as pd
df1 = pd.read_csv("c1.txt", sep="|", header=None).dropna()
df2 = pd.read_csv("c2.txt", sep=" ", header=None)
merged = df1.merge(df2, on=1).ix[:,:-1]
merged.to_csv("merged.csv", sep="|", header=None, index=None) 
```

* * *

一些解释如下。首先，我们将文件读入称为 DataFrames 的对象中：

```
>>> df1 = pd.read_csv("c1.txt", sep="|", header=None).dropna()
>>> df1
               0      1          2         3
0      ?parallel    dog  numbering  position
3      ?parallel    cat    nuucers  position
6  ?non parallel  honey  numbering  position
>>> df2 = pd.read_csv("c2.txt", sep=" ", header=None)
>>> df2
    0    1  2
0  23  dog  4
1  24  cat  5
2  28  cow  7 
```

`.dropna()`跳过没有任何数据的情况。或者，`df1 = df1[df1[0].str.startswith("?")]`将是另一种方式。

然后我们将它们合并到第一列：

```
>>> df1.merge(df2, on=1)
         0_x    1        2_x         3  0_y  2_y
0  ?parallel  dog  numbering  position   23    4
1  ?parallel  cat    nuucers  position   24    5 
```

我们不需要最后一列，所以我们对其进行切片：

```
>>> df1.merge(df2, on=1).ix[:,:-1]
         0_x    1        2_x         3  0_y
0  ?parallel  dog  numbering  position   23
1  ?parallel  cat    nuucers  position   24 
```

然后我们用 写出来`to_csv`，产生：

```
>>> !cat merged.csv
?parallel|dog|numbering|position|23
?parallel|cat|nuucers|position|24 
```

现在，对于许多简单的任务来说，可能是多余的，学习如何使用像模块`pandas`这样的低级工具也很重要。`csv`OTOH，当您只想立即完成某些事情时（tm），它非常非常方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:29:09.300

这似乎正是[JOIN](http://en.wikipedia.org/wiki/Inner_join#Inner_join)在关系数据库中的用途。

> 内连接是应用程序中最常见的连接操作，可以视为默认连接类型。内连接通过基于连接谓词组合两个表（A 和 B）的列值来创建一个新的结果表。该查询将 A 的每一行与 B 的每一行进行比较，以找到满足连接谓词的所有行对。当满足连接谓词时，将 A 和 B 的每对匹配行的列值组合成一个结果行。

看看这个例子：

```
import sqlite3
conn = sqlite3.connect('example.db')

# get hands on the database
c = conn.cursor()

# create and populate table1
c.execute("DROP TABLE table1")
c.execute("CREATE TABLE table1 (col1 text, col2 text, col3 text)")
with open("file1") as f:
    for line in f:
        c.execute("INSERT INTO table1 VALUES (?, ?, ?)", line.strip().split())

# create table2
c.execute("DROP TABLE table2")
c.execute("CREATE TABLE table2 (col1 text, col2 text, col3 text, col4 text)")
with open("file2") as f:
    for line in f:
        c.execute("INSERT INTO table2 VALUES (?, ?, ?, ?)", 
            line.strip().split('|'))

# make changes persistent
conn.commit()

# retrieve desired data and write it to file
with open("file3", "w+") as f:
    for x in c.execute(
        """
        SELECT table2.col1
             , table2.col2
             , table2.col3
             , table2.col4
             , table1.col1 
        FROM table1 JOIN table2 ON table1.col2 = table2.col2
        """):
        f.write("%s\n" % "|".join(x))

# close connection
conn.close() 
```

输出文件如下所示：

```
paralle|dog|numbering|position|23
parallel|cat|nuucers|position|24 
```

# android - 自定义 ScrollView 出错

> ID：15663324
> 
> 赞同：0
> 
> 时间：2013-03-27T15:55:52.750
> 
> 标签：android, scrollview, horizontalscrollview

我正在为我的关卡选择屏幕创建一个“对齐”Horizo​​ntalScrollView。我有一些我不明白为什么它不起作用的代码（ScrollView 不会捕捉，它的行为与普通的 ScrollView 一样）。滚动视图中可能有一些底层方法需要覆盖，但我似乎找不到它。到目前为止，这是我的代码：

```
public class SnapToScrollView extends HorizontalScrollView implements
    OnTouchListener {

//Marks the point where touch starts
float pointDown;
//Marks the position of the ScrollView when touch first occurs, used to snap
float startX;

public SnapToScrollView(Context context) {
    super(context);
    setSmoothScrollingEnabled(true);
}

public SnapToScrollView(Context context, AttributeSet attrs) {
    super(context, attrs);
    setSmoothScrollingEnabled(true);
}

public SnapToScrollView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    setSmoothScrollingEnabled(true);
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    //If motion is stopped, then snap to nearest
    if (event.getAction() == MotionEvent.ACTION_UP) {
        //determine if we have moved far enough from original touch
        if (Math.abs(pointDown - event.getX()) > 640) {
            //Move backwards or forwards
            int c = (int) ((pointDown - event.getX()) / Math.abs(pointDown
                    - event.getX()));
            smoothScrollTo((int) (startX + c * 640), 0);
        } //else scroll to where we started
        else {
            smoothScrollTo((int) startX, 0);
        }
    } // when first touch happens, record coordinates
    else if (event.getAction() == MotionEvent.ACTION_DOWN) {
        startX = getScrollX();
        pointDown = event.getX();
    } // If it is not first or last touch, then scroll
    else {
        smoothScrollTo((int) (startX + event.getX()), 0);
    }
    return true;
}
} 
```

# php - 选择多行mysqli

> ID：15663326
> 
> 赞同：-3
> 
> 时间：2013-03-27T15:55:58.283
> 
> 标签：php, mysqli

我想将下面的 MySQL 查询更改为 MySQLi(prepared statements)，但我不知道该怎么做，因为它有多行可供选择。谁能指出我正确的方法。

```
$check_added_files = mysql_query("select * from `vpb_uploads` where `username` = '".mysql_real_escape_string($username)."' and `firstname` = '' and `image_one` != '' and `image_two` != '' and `image_three` != '' and `image_four` != '' and `image_five` != ''");
        if(mysql_num_rows($check_added_files) == 1)
        {
            echo 'up_to_five_already';
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:03:09.037

正确的方法是将其更改为[PDO](https://stackoverflow.com/tags/pdo/info)

```
$sql = "select * from vpb_uploads where username=? and firstname=''
        and image_one != '' and image_two != '' and image_three != '' 
        and image_four != '' and image_five != ''";
$stm = $pdo->prepare($sql);
$stm->execute(array($username));
$files = $stm->fetchAll(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:03:55.143

Mysqli 在经典的 mysql api 上提供了面向对象的接口。它还支持事务、prepared Statement、多个语句。

如果你想获取行作为对象，你可以看看这个[http://www.php.net/manual/en/mysqli-result.fetch-object.php](http://www.php.net/manual/en/mysqli-result.fetch-object.php)

如果你想获取行作为关联数组，那么你可以看看[http://www.php.net/manual/en/mysqli-result.fetch-assoc.php](http://www.php.net/manual/en/mysqli-result.fetch-assoc.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T21:58:04.687

这很简单，我不知道为什么每次我问问题都会被拒绝。

```
$mysqli = new mysqli("localhost", "root", "", "database");
    if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
    }

 $username = $_SERVER['REMOTE_ADDR']; 
    $stmt = $mysqli->prepare("select * from `vpb_uploads` where `username` = ? and `firstname` = '' and `image_one` != '' and `image_two` != '' and `image_three` != '' and `image_four` != '' and `image_five` != ''");
    $stmt->bind_param('s', $username);
    $stmt->execute();
    $stmt->store_result();

    if ($stmt->num_rows == 1) {

    echo 'up_to_five_already';
    } 
```

# javascript - 尝试将第一个 h2 标记转换为 h1 时出现 jQuery [object Object] 错误

> ID：15663327
> 
> 赞同：0
> 
> 时间：2013-03-27T15:56:01.453
> 
> 标签：javascript, jquery, dom

我正在处理一个所有标题都使用 h2 标签的网页。我想转换第一个标题，以便它使用 h1。

这是我正在使用的代码：

```
<script type="text/javascript">
var myHeader = $('h2:first');
var myHeaderHTML = myHeader.html();

alert("myHeader: " + myHeader);
alert("myHeaderHTML: " + myHeaderHTML);

$(document).ready(function() {
$(myHeader).replaceWith("<h1>" + $(myHeaderHTML) + "</h1>");
});
</script> 
```

但是，当我重新加载页面时，我收到一个包含在 h1 标记中的 [object Object] 错误。正如您在上面看到的，我在代码中添加了几个警报，这样我就可以看到变量包含的值，它是包含 [object Object] 的 myHeader 变量。myHeaderHTML 变量包含我所期望的。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T15:57:53.083

这是错误的：

```
"<h1>" + $(myHeaderHTML) + "</h1>" 
```

您正在向对象添加字符串，该对象将对象转换为字符串`"[Object object]"`并执行连接。

它应该是：

```
 "<h1>" + myHeaderHTML + "</h1>" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:57:32.257

您不需要再次调用 jquery。

```
$(myHeader).replaceWith("<h1>" + myHeaderHTML + "</h1>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T15:59:43.930

通过`$(myHeaderHTML)`将 HTML 字符串包装在一个 jQuery 对象中，该对象`[object Object]`在与其他字符串 ( `"<h1>"`) 连接时将被序列化。

采用

```
$(document).ready(function() {

    var myHeader = $('h2:first');
    var myHeaderHTML = myHeader.html();

    alert("myHeader: " + myHeader); // alerts [object Object] as well
    alert("myHeaderHTML: " + myHeaderHTML);

    myHeader.replaceWith("<h1>" + myHeaderHTML + "</h1>");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T16:35:00.193

这是一种可能更安全的方法，不需要将 HTML 内容放入字符串中：

```
<script type="text/javascript">
  $(function(){
    $('h2:first').wrapInner('<h1>').find('h1').unwrap();
  });
</script> 
```

# javascript - CRM 2011 - 针对一个实体的多种形式

> ID：15663329
> 
> 赞同：2
> 
> 时间：2013-03-27T15:56:09.263
> 
> 标签：javascript, dynamics-crm-2011

**实体**：

程度

**表格**：

1.  毕业
2.  毕业后

**要求**：

当用户点击新建时，毕业表格打开。现在，使用左侧导航窗格，我可以选择 Post Graduation，然后打开 Post Graduation 表单。我还编写了 JS，它将在现有记录的两种形式之间翻转（基于在 new_degreetype 中选择的值）。这无疑是丑陋的，因为它会加载表单两次。

**问题**：

1.  我如何让它与新表格一起使用。也就是说，当用户点击新建时，我想显示一个弹出窗口，用户应该选择毕业或毕业后，根据在那里选择的值，我在创建模式下打开正确的表单。

2.  如何防止用户通过左侧导航窗格选择其他表单。因此，当用户尝试将表单从 Graduation 更改为 Post Graduation 时，显示一条消息并说“对不起！这是不允许的”。或者，我可以完全删除它吗？不让用户选择能够翻转表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:08:30.313

形式有何不同？拥有一个表单可能会更容易，并使用 javascript 来改变它的外观（隐藏/显示/启用/禁用某些字段）。对用户查看哪些表单的控制取决于安全角色以及您定义层次结构的方式。试图让它做一些它原本不打算做的事情，可能比它值得更痛苦。

# sql - PostgreSQL & regexp_split_to_array + unnest

> ID：15663330
> 
> 赞同：3
> 
> 时间：2013-03-27T15:56:11.230
> 
> 标签：sql, regex, postgresql, postgresql-9.1, crosstab

我有那种绳子

> 测试 1|纽约| X，测试 2| 芝加哥|Y，测试 3| 宾夕法尼亚哈里斯堡| Z

我需要的结果是

```
 Column1  Column 2     Column3
 Test 1   new york        X
 Test 2   chicago         Y
 Test 3   harrisburg,pa   Z 
```

但是运行这个查询

```
SELECT  
split_part(stat.st, '|', 1) Column1,
split_part(stat.st, '|', 2) Column2,    
split_part(stat.st, '|', 3) Column3
FROM
(
    SELECT
            UNNEST (
                string_to_array('Test 1|new york| X, Test 2| chicago|Y, Test 3| harrisburg, pa| Z',',')
            )
         AS st
) stat; 
```

结果是

```
 Column1  Column 2   Column3
 Test 1   new york      X
 Test 2   chicago       Y
 Test 3   harrisburg    
 pa          Z 
```

Column3 可以是所有内容（| 除外）。匹配它的可能模式。这可以重复 N 次。STRING 可以是除 | 之外的所有内容 字符。

我怎么能用`regexp_split_to_array()`我的愿望结果集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T17:07:59.883

几乎*没有足够的信息*来完成这项工作。但这可以完成工作：

```
SELECT * FROM crosstab3(
   $$
   SELECT (rn/3)::text AS x, (rn%3)::text, item
   FROM  (
      SELECT row_number() OVER () - 1 AS rn, trim(item) AS item
      FROM (
         SELECT CASE WHEN rn%2 = 1 THEN regexp_split_to_table(item, ',') 
                     ELSE item END AS item
         FROM  (
            SELECT row_number() OVER () AS rn, *
            FROM regexp_split_to_table('Test 1|new york| X, Test 2| chicago|Y, Test 3| harrisburg, pa| Z', '\|') AS item
            ) x
         ) y
      ) z
   $$) 
```

回报：

```
 row_name | category_1 |   category_2   | category_3
----------+------------+----------------+------------
 0        | Test 1     | new york       | X
 1        | Test 2     | chicago        | Y
 2        | Test 3     | harrisburg, pa | Z 
```

在 处拆分字符串后`|`，我建立在仅*行号不均匀*的行应在 处拆分的标准上`,`。
在进行交叉制表之前，我`trim()`将结果并添加另一个的导数`row_number()`以达到此中间状态：

```
 x | text |      item
---+------+----------------
 0 | 0    | Test 1
 0 | 1    | new york
 0 | 2    | X
 1 | 0    | Test 2
 1 | 1    | chicago
 1 | 2    | Y
 2 | 0    | Test 3
 2 | 1    | harrisburg, pa
 2 | 2    | Z 
```

最后，我应用了模块中的`crosstab3()`函数。[`tablefunc`](http://www.postgresql.org/docs/current/interactive/tablefunc.html)要安装它，如果您还没有：

```
CREATE EXTENSION tablefunc; 
```

### 预处理`regexp_replace()`

这是一个可能更容易理解的替代方案。不确定哪个更快。复杂的正则表达式往往很昂贵：

```
SELECT trim(split_part(a,'|', 1)) AS column1
      ,trim(split_part(a,'|', 2)) AS column2
      ,trim(split_part(a,'|', 3)) AS column3
FROM  (
   SELECT unnest(
             string_to_array(
                         regexp_replace('Test 1|new york| X, Test 2| chicago|Y, Test 3| harrisburg, pa| Z'
                        ,'([^|]*\|[^|]*\|[^,]*),', '\1~^~', 'g'), '~^~')) AS a
   ) sub 
```

这个`,`仅在两个管道 ( ) 之后替换逗号 ( `|`)，然后再继续。
现在使用`*`而不是`+`允许管道之间的空字符串。

# c++ - 无法将 xerces2_7.dll 与 64 位应用程序链接

> ID：15663339
> 
> 赞同：0
> 
> 时间：2013-03-27T15:56:27.030
> 
> 标签：c++, visual-studio-2008, 64-bit, xerces, xerces-c

嗨，我正在尝试将已经在 Windows 7 上构建的 32 位项目升级到 64 位。我在应用程序中使用了这个 xerces 2_7 dll，所以我下载了 xerces2_7_0 版本的源代码并以 64 位构建库。到这里都没问题。但是当我尝试将这个库连接到我的项目时，它会引发链接器错误。以下是错误

```
error LNK2019: unresolved external symbol "__declspec(dllimport) public: static bool __cdecl xercesc_2_7::DOMImplementation::loadDOMExceptionMsg(enum xercesc_2_7::DOMException::ExceptionCode,unsigned short * const,unsigned int)" (__imp_?loadDOMExceptionMsg@DOMImplementation@xercesc_2_7@@SA_NW4ExceptionCode@DOMException@2@QEAGI@Z) referenced in function "int `private: bool __cdecl 
error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_2_7::XMLUni::fgDOMDatatypeNormalization" (__imp_?fgDOMDatatypeNormalization@XMLUni@xercesc_2_7@@2QBGB)
error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_2_7::XMLUni::fgDOMValidateIfSchema" (__imp_?fgDOMValidateIfSchema@XMLUni@xercesc_2_7@@2QBGB)
error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_2_7::XMLUni::fgXercesSchemaFullChecking" (__imp_?fgXercesSchemaFullChecking@XMLUni@xercesc_2_7@@2QBGB)
error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_2_7::XMLUni::fgXercesSchema" (__imp_?fgXercesSchema@XMLUni@xercesc_2_7@@2QBGB)
error LNK2001: unresolved external symbol "__declspec(dllimport) public: static unsigned short const * const xercesc_2_7::XMLUni::fgDOMNamespaces" (__imp_?fgDOMNamespaces@XMLUni@xercesc_2_7@@2QBGB)
error LNK2019: unresolved external symbol "__declspec(dllimport) public: static class xercesc_2_7::DOMImplementation * __cdecl xercesc_2_7::DOMImplementationRegistry::getDOMImplementation(unsigned short const *)" (__imp_?getDOMImplementation@DOMImplementationRegistry@xercesc_2_7@@SAPEAVDOMImplementation@2@PEBG@Z) referenced in function "private: bool __cdecl 
```

所以我怀疑我是否真的在 64 位中构建了这个 xerces 2_7_0 并编写了一个 64 位控制台应用程序的测试项目并尝试挂钩这个 xerces 库并能够成功构建项目（使用了我在项目中进行的同一组调用）

我使用dependency walker来检查所有的依赖；当我在我的 64 位 xerces dll 上尝试依赖 walker 时，我在打开文件时发现错误，以下是错误：

```
Error: The Side-by-Side configuration information for "c:\users\vivek\desktop\xerces64bit\x64\debug\XERCES64BIT.EXE" contains errors. The application has failed to start because its side-by-side configuration is incorrect. Please see the application event log or use the command-line sxstrace.exe tool for more detail (14001).
Error: At least one required implicit or forwarded dependency was not found.
Error: At least one module has an unresolved import due to a missing export function in an implicitly dependent module.
Error: Modules with different CPU types were found. 
```

任何想法我做错了什么以及为什么它对我的 64 位测试应用程序没有任何抱怨。顺便说一句，我使用的是 Visual Studio 2008。谢谢

`Update 1:` 好的，我将依赖walker错误减少到2

```
Error: The Side-by-Side configuration information for "c:\users\vivek\desktop\xerces64bit\x64\debug\XERCES64BIT.EXE" contains errors. The application has failed to start because its side-by-side configuration is incorrect. Please see the application event log or use the command-line sxstrace.exe tool for more detail (14001).
Error: At least one required implicit or forwarded dependency was not found. 
```

其他 2 个错误是因为我使用的依赖 walker 是 32 位可执行文件。现在我正在使用 64 位依赖遍历器，但我仍然看到 2 个错误。

`Update 2:` 通过将 CRT 更改为 /MT，我摆脱了 2 个错误。但我仍然无法将此库与我的项目链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T20:06:25.260

我想到了。这是语言设置的问题。在`Configuration Properties`-> `C/C++`->下`Language`，在我的项目`Treat wchar_t as Built in Type`中设置为`No`，当我正在构建 xerces 库时，选项设置为是。

这有所作为。

# java - 如何在 SQLite 数据库的 onCreate() 函数中使用 getWritableDatabase？（安卓）

> ID：15663340
> 
> 赞同：0
> 
> 时间：2013-03-27T15:56:29.707
> 
> 标签：java, android, sqlite

我正在编写一个安卓应用程序。我需要创建一个 SQLite 数据库并在创建时填充它。所以我试图将它填充到它的 onCreate() 函数中。但是，要在数据库中插入数据，需要使用 db.getWritableDatabase()。但是不能在数据库的 onCreate() 函数中执行此操作，因为这意味着在创建数据库期间调用数据库（它会引发错误）。那么如何在数据库的 onCreate() 函数中使用 getWritableDatabase() 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T15:58:06.007

> 但是，要在数据库中插入数据，需要使用 db.getWritableDatabase()。

不，你需要一个`SQLiteDatabase`实例。一种是提供给`onCreate()`你的方法`SQLiteOpenHelper`——使用它。

例如，在[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Database/Constants)中，我有一个`onCreate()`如下所示：

```
 @Override
  public void onCreate(SQLiteDatabase db) {
    try {
      db.beginTransaction();
      db.execSQL("CREATE TABLE constants (_id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT, value REAL);");

      ContentValues cv=new ContentValues();

      cv.put(TITLE, "Gravity, Death Star I");
      cv.put(VALUE, SensorManager.GRAVITY_DEATH_STAR_I);
      db.insert("constants", TITLE, cv);

      cv.put(TITLE, "Gravity, Earth");
      cv.put(VALUE, SensorManager.GRAVITY_EARTH);
      db.insert("constants", TITLE, cv);

      // several more inserts here

      cv.put(TITLE, "Gravity, Venus");
      cv.put(VALUE, SensorManager.GRAVITY_VENUS);
      db.insert("constants", TITLE, cv);

      db.setTransactionSuccessful();
    }
    finally {
      db.endTransaction();
    }
  } 
```

# c# - 向 .sdf 数据库插入问题 C#

> ID：15663344
> 
> 赞同：-1
> 
> 时间：2013-03-27T15:56:37.377
> 
> 标签：c#, insert, sql-server-ce

当我运行该程序时，它似乎没有任何错误，但它没有将任何数据插入数据库。是否缺少一些基本代码？

这是我的代码：

```
 Using string connection = @"Data Source=|DataDirectory|\InvoiceDatabase.sdf";
            SqlCeConnection cn = new SqlCeConnection(connection);

            try
            {
                cn.Open();
            }
            catch (SqlCeException ex)
            {
                MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
                Application.ExitThread();
            }

            SqlCeCommand cmd = new SqlCeCommand("INSERT INTO Client(Name, Address, Postcode, Telephone_Number)VALUES(@name, @address, @postcode, @tel)", cn);
            cmd.Parameters.AddWithValue("@name", txt_ClientName.Text);
            cmd.Parameters.AddWithValue("@address", txt_ClientAddress.Text);
            cmd.Parameters.AddWithValue("@postcode", txt_postcode.Text);
            cmd.Parameters.AddWithValue("@tel", txt_TelNo.Text);

            try
            {
                int affectedRows = cmd.ExecuteNonQuery();

                if (affectedRows > 0)
                {
                    txt_ClientAddress.Text = "";
                    txt_ClientName.Text = "";
                    txt_postcode.Text = "";
                    txt_TelNo.Text = "";
                    MessageBox.Show("Client: " + txt_ClientName.Text + " added to database. WOoo", Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Information);
                }
                else
                {
                    MessageBox.Show("Client: " + txt_ClientName.Text + " Failed to add to database. WOoo", Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
            } 
```

提前感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:12:22.900

请确保您观察添加行的数据库。

在大多数情况下，数据库 .sdf 文件会被复制到发布文件夹中，然后您就可以使用它，而服务器资源管理器已经打开了其他一些数据库文件。

尝试在 Release 下打开 .sdf 文件，检查是否在那里添加了行。

# javascript - 如何创建事件调度程序对象

> ID：15663348
> 
> 赞同：1
> 
> 时间：2013-03-27T15:56:49.487
> 
> 标签：javascript

是否可以创建一个可以像 HTMLElements 一样分派事件的对象并将其用作我的新类的原型？

我知道我可以编写一个 EventDispatcher 类来为我做这个，但我相信它比使用已经这样做的本机函数（addEventListener、removeEventListener、dispatchEvent）要慢。

情况1：

```
var obj = new EventDispatcher();
obj.addEventListener( 'someevent', listener ); // obj can receive listener to a event

obj.dispatchEvent( myEvent ); // CustomEvent being dispatched 
```

案例二：

```
var MyNewClass = function(){};
// MyNewClass now can dispatch events in their instances...
MyNewClass.prototype = Object.create( EventDispatcher.prototype );

var obj2 = new MyNewClass();
obj2.addEventListener( 'someevent', listener ); // works! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:00:44.083

是的，可以使用本机 (DOM) 事件。

利用[`document.createEvent()`](https://developer.mozilla.org/en-US/docs/DOM/document.createEvent)

和`element.dispatchEvent(my_event);`

# javascript - 是否有移动 Safari 全屏 Javascript 事件？

> ID：15663349
> 
> 赞同：2
> 
> 时间：2013-03-27T15:56:50.707
> 
> 标签：javascript, ios, mobile-safari, dom-events

我什至找不到人问这个问题，这让我很困惑。

当用户进入全屏模式（iOS 6）时，移动版 Safari 是否会触发 Javascript 事件？我目前正在调整我的文档大小`onorientationchange`，也需要在全屏模式下这样做，但找不到任何关于此的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:52:46.240

好吧，这可以解释为什么没有人问这个问题：

`window.onresize`. 呸！

# c# - 自定义 DataAnnotations ValueAttribute 在客户端和服务器端验证提供不同的错误消息

> ID：15663351
> 
> 赞同：0
> 
> 时间：2013-03-27T15:57:03.000
> 
> 标签：c#, asp.net-mvc, validation, data-annotations

我创建了一个自定义数据注释，它在客户端按预期工作，在输入的日期无效时正确地向用户显示自定义消息。但是，如果条目未通过*服务器端*验证，则会返回默认错误消息。我无法找到为什么在服务器端验证失败时也不会显示自定义消息的根源。逐步进行，调试器中的一切似乎都很好，但输出最终不正确。任何帮助将非常感激！

```
public class DobViewModel
{
   [DateTypeWithPhrase()]
   public DateTime? DateOfBirth { get; set; }    
}

public class DataTypeWithPhraseAttributeAdapter : DataAnnotationsModelValidator<DateTypeWithPhraseAttribute>
{
   private readonly DateTypeWithPhraseAttribute _attribute;

   public DataTypeWithPhraseAttributeAdapter(ModelMetadata metadata, ControllerContext context, DateTypeWithPhraseAttribute attribute)
          : base(metadata, context, attribute)
   {
        _attribute = attribute;
   }

    public static void SelfRegister()
    {
         DataAnnotationsModelValidatorProvider
              .RegisterAdapter(
                  typeof(DateTypeWithPhraseAttribute),
                  typeof(DataTypeWithPhraseAttributeAdapter));
    }

    public override IEnumerable<ModelClientValidationRule> GetClientValidationRules()
    {
        return new[] { new ModelClientValidationDateRule(_attribute.ErrorMessage) };
    }
}

public class DateTypeWithPhraseAttribute : DataTypeAttribute
{
    public DateTypeWithPhraseAttribute() : base(DataType.Date)
    {
         ErrorMessageResourceName = null;
         ErrorMessage = ErrorPhrase;
    }

    public string ErrorPhrase = "Invalid Date";
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:07:34.037

似乎在回发绑定时触发了错误。如果日期无效，它会识别出错误，并将 DateOfBirth 的值设置为 null，这将通过自定义验证。但是，它已经失败，因此返回了默认消息。

我实施的解决方案是将 DateOfBirth 更改为一个字符串，然后它将正确绑定。然后我重写 IsValid 方法来验证字符串是否实际上是有效日期。

```
public class DobViewModel
{
   [DateTypeWithPhrase()]
   public string DateOfBirth { get; set; }    
}

public class DateTypeWithPhraseAttribute : DataTypeAttribute
{
    public DateTypeWithPhraseAttribute() : base(DataType.Date)
    {
         ErrorMessageResourceName = null;
         ErrorMessage = ErrorPhrase;
    }

    public string ErrorPhrase = "Invalid Date";

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        DateTime myDate;
        if (value == null || DateTime.TryParse(value.ToString(), out myDate))
        {
            return ValidationResult.Success;
        }
        return new ValidationResult(ErrorMessage);
    }
 } 
```

从那以后，我的一位同事找到了一篇文章的链接，该文章提出了创建自定义模型活页夹的可能性，我将在未来进行研究。这篇文章在[这里](http://weblogs.asp.net/melvynharbour/archive/2008/11/21/mvc-modelbinder-and-localization.aspx)，最初是在这里找到[的](https://stackoverflow.com/a/528560/942582)。

# html - 您可以通过模式属性使用正则表达式作为 HTML 字段的验证吗

> ID：15663352
> 
> 赞同：0
> 
> 时间：2013-03-27T15:57:04.063
> 
> 标签：html, regex, forms, validation

我正在寻找一种验证 HTML 字段（例如标准邮政编码等）的简单方法。由于纯粹的易用性，我真的不希望使用 JavaScript，并希望可以在文本输入的模式属性中使用复杂的正则表达式。

如果您有更好的建议，他们非常欢迎。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:03:20.213

是的，因为这是模式属性的重点。

在这里您可能对此感兴趣：http: [//html5pattern.com/Postal_Codes](http://html5pattern.com/Postal_Codes)

以及带有可选空格的英国邮政编码 RegEx：`[A-Za-z]{1,2}[0-9Rr][0-9A-Za-z]?( |)[0-9][ABD-HJLNP-UW-Zabd-hjlnp-uw-z]{2}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-30T03:25:12.357

对于英国缩写日期，以下正则表达式可用于 HTML 输入模式属性，以强制执行日期-月-年格式，其中日期为 1-31，月份为 1-12，年份为 1930-1999...

```
(?:[1-9]|1[0-9]|2[0-9]|3[0-1])\/(?:1[0-2]|[1-9])\/(19[3-9]{1}[0-9]{1}) 
```

应用正则表达式，像这样添加一些 CSS 视觉提示，Bob 就是你的叔叔：

```
input::placeholder {
    color: rgb(46, 163, 242);
    font-style: italic;
}
input:focus {
    box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.4) inset;
}
input:required:invalid, input:focus:invalid {
    border: 2px solid rgb(255, 159, 159) !important;
    background: white;
}
input:required:valid {
    background: rgba(196, 255, 214, .5) !important;
    color: black !important;
}

section.form-layout input { 
    width: 120px;
    height: 27px;
    border: 2px solid rgb(46, 163, 242);
    border-radius: 5px;
    text-align: center;
    color: rgb(46, 163, 242);
    transition: all .5s ease;
}
*:focus {
    outline: none;
}
```

```
<section class="form-layout">
    <p>Enter your DOB <span style="font-style: italic;">(dd/mm/yyyy)</span>:</p>
    <input required id="dob-1" placeholder="Date of Birth" type="text" pattern="(?:[1-9]|1[0-9]|2[0-9]|3[0-1])\/(?:1[0-2]|[1-9])\/(19[3-9]{1}[0-9]{1})" autocomplete="off">
</section>
```

# java - 打破继承层次结构的最佳方法

> ID：15663355
> 
> 赞同：1
> 
> 时间：2013-03-27T15:57:10.030
> 
> 标签：java, design-patterns

我有我正在重构的遗留代码。目前的情况是有一个超类，我将其称为 SuperParent。现在，任何需要向 SuperParent 添加一些功能的人 - 扩展 SuperParent 为特定功能创建一个接口，然后创建一个扩展 SuperParent 并实现此接口的类 subParent。这样继续下去，它创建了一大段类，这些类基本上是从这个 SuperParent 扩展而来的。

我不知道重构它的正确方法是什么？应该只是作曲吗？我重构它的主要目标是使代码更简洁——因为 SuperParent 有很多扩展——很难看出要扩展哪个类。它变得难以管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:43:45.570

**模板 -> 策略重构：**

按方法所需的超类中的字段对方法进行分组。将字段和方法重构为传递给超类的策略类。在策略类的替代实现中，方法被覆盖的地方。

# php - SQL 多重计数查询

> ID：15663361
> 
> 赞同：2
> 
> 时间：2013-03-27T15:57:20.457
> 
> 标签：php, mysql, sql, count

我有一张表格，其中包含基于三个类别的学生成绩。每个类别有五个等级（A、B、C、D、E），所以表格如下所示：

```
id | cat1 | cat2 | cat3
1     A      B       A
2     D      C       D
3     B      A       E
4     C      B       D 
```

ETC

我有第二张表列出成绩

```
grade
  A
  B
  C
  D
  E 
```

我需要能够对此数据运行查询，以便我可以计算每个等级在每个类别中达到的等级数。像这样的东西：

```
 Cat1 | Cat2 | Cat 3
A     1     1      1
B     1     2      0
C     1     1      0
D     1     0      2
E     0     0      1 
```

我运行了以下查询，我知道这是不正确的，但产生的结果接近预期：

```
SELECT g.grade, COUNT( mb.cat1) , COUNT( mb.cat2) , COUNT( mb.cat3)
FROM markbook mb, grades g
WHERE g.grade = mb.cat1
GROUP BY g.grade 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:04:21.247

尝试：

```
SELECT g.grade, 
       COUNT(case mb.cat1 when g.grade then 1 end), 
       COUNT(case mb.cat2 when g.grade then 1 end), 
       COUNT(case mb.cat3 when g.grade then 1 end)
FROM markbook mb
cross join grades g
GROUP BY g.grade 
```

[（这里](http://sqlfiddle.com/#!2/c9369/2)的 SQLFiddle ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:15:11.973

虽然我知道已经选择了答案，但我会采用的方法是使用 LEFT JOIN，这样如果成绩没有匹配项，它仍然会显示出来。示例如下：

```
SELECT 

  g.grade,
  SUM(CASE mb.cat1 WHEN g.grade THEN 1 ELSE 0 END) AS cat1,
  SUM(CASE mb.cat2 WHEN g.grade THEN 1 ELSE 0 END) AS cat2,
  SUM(CASE mb.cat3 WHEN g.grade THEN 1 ELSE 0 END) AS cat3

FROM grades g
LEFT JOIN markbook mb 
    ON g.grade IN (mb.cat1,mb.cat2,mb.cat3)
GROUP BY g.grade; 
```

（SQL 小提琴示例，从 Mark Ba​​nnisters 借用的模式回答：[http](http://sqlfiddle.com/#!2/9b863/1) ://sqlfiddle.com/#!2/9b863/1 ）

# c# - 当定时器倒计时到 0 时调用方法

> ID：15663362
> 
> 赞同：0
> 
> 时间：2013-03-27T15:57:27.873
> 
> 标签：c#, service, methods, timer, onstart

我正在编写一个 C# 服务，它的主要功能是从数据库中提取照片并每天两次将它们保存到一个目录中。此操作通常需要大约 15 分钟（有很多照片）。如果我将运行程序的逻辑放在 OnStart() 中，则在启动服务大约一分钟后报告它没有成功启动。这是因为它在 OnStart() 方法中的时间过长。

如何在 OnStart() 方法中设置一个计时器，大约一分钟后将调用我的 RunApp() 方法？

编辑：这是一些代码。在设置了让它每天运行的调度程序之后，我还想简单地运行它。我认为将计时器设置为大约一分钟会起作用，这样它就有时间退出 OnStart() 方法。然后，当计时器关闭时，应用程序将运行。

```
protected override void OnStart(string[] args)
{
    Scheduler sch = new Scheduler("Photo Sync");

    try
    {
      MailConfiguration mailConfig = new MailConfiguration(Properties.Settings.Default.EmailLogTo, Properties.Settings.Default.EmailLogFrom,
                                                           "Photo Sync Photo Service error", Properties.Settings.Default.SmtpServerIp, "Photo Sync");
      sch.MailComponent = mailConfig;
    }
    catch
    {

    }

    sch.SchedulerFired += new EventHandler(RunApp);

    try
    {
      sch.ScheduleDaily(Properties.Settings.Default.DailyScheduledTime);
    }

    RunApp();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:10:03.563

通常，启动 Windows 服务的正常过程是创建一个线程，并让该线程执行服务处理，以便`OnStart`Windows 及时退出。线程还在后台处理事情。例如：

```
protected CancellationTokenSource _tokenSource = null;

protected override void OnStart(string[] args)
{
    _tokenSource = new CancellationTokenSource();

    Task processingTask = new Task(() =>
       {
           while(!_tokenSource.IsCancellationRequested)
           {
               // Do your processing
           }
       });

    processingTask.Start();
}

protected override void OnStop()
{
    _tokenSource.Cancel();
} 
```

如果您的服务不需要无限期地运行，那么您可能需要考虑计划任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:10:29.487

在服务的 OnStart 方法中启动的单独线程中运行保存功能。像这样的东西：

```
protected override void OnStart(string args[])
{

    // your other initialization code goes here

    // savePhotos is of type System.Threading.Thread
    savePhotosThread = new Thread(new ThreadStart(SavePhotos));
    savePhotosThread.IsBackground = true;
    savePhotosThread.Name = "Save Photos Thread";
    savePhotosThread.Start();

}

You'll place the functionality for saving the files in the `SavePhotos` method, maybe something like this:

private void SavePhotos()
{

    // logic to save photos
} 
```

我已经使用与上面类似的代码来进行日志记录（我每 5 分钟左右记录一次服务的统计信息），以实现我几年前编写的始终在线服务。不要忘记将 System.Threading 添加到您的服务和 using 指令中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:12:03.100

```
 System.Threading.Timer Timer1 = new System.Threading.Timer(RunApp, null, 1000, System.Threading.Timeout.Infinite);

void RunApp(object State)
{
} 
```

# python - python中的属性装饰器初始化

> ID：15663366
> 
> 赞同：2
> 
> 时间：2013-03-27T15:57:31.307
> 
> 标签：python, properties, decorator, dependency-properties

***`@property`我想知道是否有人知道使用和常规属性是否有任何细微差别？***

`@property`在 python 中使用装饰器时，初始化属性是否会出现任何问题？我的理解是，这个装饰器允许在每次调用它时由函数计算属性，因为它是一个依赖于其他可变属性的属性。我已经在其中编写了一些`@property`装饰器，但由于某种原因它们无法正常工作。我收到这种形式的错误：

`for key in temp_spectra.overall_properties_dictionary:`

`AttributeError: 'Spectra' object has no attribute 'overall_properties_dictionary'`

据我了解，创建这些`@property`s 的正确方法是这样的：

```
from PyQt4 import QtCore, QtGui
class someObject(QtCore.QObject):
    def __init__(self, x, y):
        self.x = x
        self.y = y

    @property
    def some_other_property(self):
        # some complicated function which will recalculate everytime it is called
        # because the other properties may be mutable
        p = self.x + self.y
        return p
class otherObject(QtGui.QTabWidget):
    def __init__(self, someObject):
        print someObject.some_other_property

otherObject(someObject(1,5)) 
```

然而，这行得通！所以我不确定我的代码的哪一部分可能导致这种情况。
值得一提的是，我正在将我的代码转换为利用`multiprocessing`. 这会导致问题吗？我只是不明白初始化可能出现什么问题导致这种类型的错误。

**编辑：我按照建议更改了代码以匹配新样式类。***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:02:10.933

值得注意的一件事是属性只支持新样式的类，而你的不支持。

改变

```
class someObject: 
```

到

```
class someObject(object): 
```

# ios - 在 InterfaceOrientation 上的 customCell 中重新定位 UIButtons

> ID：15663370
> 
> 赞同：4
> 
> 时间：2013-03-27T15:57:35.410
> 
> 标签：ios, objective-c, uitableview, uiinterfaceorientation

我使用一个自定义的 tableviewcell，有 3 个按钮。

我在我的自定义单元格中设置了 layoutSubviews 方法内的按钮框架：

```
-(void)layoutSubviews
{
    [super layoutSubviews];
    CGRect frame;
    if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation))
    {
        frame = CGRectMake(310, 7, 55, 35);
        _prod.frame = frame;

        frame = CGRectMake(365, 7, 55, 35);
        _leva.frame = frame;

        frame = CGRectMake(220, 4, 65, 65);
        _imageButton.frame = frame;
    }
    else{
        frame = CGRectMake(150, 7, 55, 35);
        _prod.frame = frame;

        frame = CGRectMake(205, 7, 55, 35);
        _leva.frame = frame;

        frame = CGRectMake(120, 4, 65, 65);
        _imageButton.frame = frame;
    }
} 
```

问题是，当用户滚动表格视图时，在将方向更改为横向（例如，所有按钮）后，所有按钮都会返回到旧的纵向位置。以下是我初始化单元格的方式：

```
LojaCell *cell = (LojaCell *) [tableView dequeueReusableCellWithIdentifier: @"LojaCell"];
if(cell == nil) cell = [[LojaCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"LojaCell"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:04:22.717

您可能必须将相同的方向敏感代码添加到 cellForRowAtIndexPath: 以便在 tableview 重新加载或重新创建单元格时它们加载到正确的位置。因为您使用的是 dequeueReusableCells，它会删除屏幕外的单元格以提高性能，这可能会解释滚动时的行为。

# mysql - MYSQL 较高的 LIMIT 偏移量会减慢查询

> ID：15663378
> 
> 赞同：2
> 
> 时间：2013-03-27T15:57:55.237
> 
> 标签：mysql, sql-order-by, limit, mysql-slow-query-log

我有以下 Mysql 查询。这是一个缓慢的查询，大约需要 3 秒才能完成。message_id 是主键。这个问题是高 LIMIT 偏移量`LIMIT 85075, 25`。

```
SELECT * FROM `phorum_messages` WHERE 1  and `catergory` >=0 and parent_id=0   order by `message_id` desc  LIMIT 85075, 25; 
```

基于[此解决方案](https://stackoverflow.com/questions/4481388/why-does-mysql-higher-limit-offset-slow-the-query-down)，我将查询更改为以下方式。问题是如果我删除`where parent_id=0`，速度会快得多。但我真的需要`where parent_id=0`

**编辑：我已经为 parent_id 和 message_id 创建了索引。**

有什么建议么？提前致谢。

```
SELECT  t.*
FROM    (
        SELECT  message_id
        FROM    phorum_messages where parent_id=0
        ORDER BY message_id desc LIMIT 85075, 25
        ) q
JOIN    phorum_messages t
ON      t.message_id = q.message_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:02:45.750

你有关于 parent_id 或 category_id 的索引吗？它会进行全表扫描，因为您在搜索字段上没有索引。除了发回数据（在执行阶段之后）之外，具有限制的查询需要几乎相同的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:08:41.273

当使用较大的 LIMIT 偏移时，有时最好使用不使用 LIMIT 偏移的不同方法。

对于第一个查询使用

```
SELECT * FROM `phorum_messages`
WHERE `catergory` >=0 and parent_id=0 
order by `message_id` desc 
LIMIT 25 
```

并将最低的 message_id 保存为 $min_id

next_call: 然后就可以调用了

```
SELECT * FROM `phorum_messages`
WHERE `catergory` >=0 and parent_id=0  AND message_id < $min_id
order by `message_id` desc 
LIMIT 25 
```

获得接下来的 25 个结果。将 $min_id 设置为您从结果集中获得的最小 message_id。转到下一个呼叫。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:06:14.640

创建一个复合索引`(parent_id, message_id)`并稍微重写您的查询：

```
SELECT  t.*
FROM    (
        SELECT  message_id
        FROM    phorum_messages
        WHERE   parent_id = 0
        ORDER BY
                parent_id DESC, message_id DESC
        LIMIT   85075, 25
        ) q
JOIN    phorum_messages t
ON      t.message_id = q.message_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T16:01:23.700

您可以在 parent_id 列上创建索引以加快查询过程

```
CREATE INDEX indexName ON phorum_messages (parent_id); 
```

# python - 使用 Python 进行 HTTP 请求和响应检查

> ID：15663379
> 
> 赞同：1
> 
> 时间：2013-03-27T15:57:57.540
> 
> 标签：python, http, listener

是否可以使用 Python 设置“侦听器”服务来检查机器上的传出 HTTP 请求及其传入响应并以易于阅读的格式返回其内容（URL、标头等）？为此目的是否存在任何好的库？理想的应用程序应该能够捕获浏览器和应用程序对网站或 Web 服务（SOAP、REST 等）发出的请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:02:36.163

像wireshark 这样的网络嗅探器使用libpcap 来嗅探来自网络接口的流量。为此有一个 python 模块：[pylibpcap](http://sourceforge.net/projects/pylibpcap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-08T12:22:06.623

FTR，如果你想要更高层次的东西，你可以选择使用 Scapy 2.4.3+

```
from scapy.layers.http import *
from scapy.sendrecv import sniff
packets = sniff() 
```

见[https://scapy.readthedocs.io/en/latest/layers/http.html](https://scapy.readthedocs.io/en/latest/layers/http.html)

# ios - iOS 钥匙串的 UICKeyChainStore

> ID：15663385
> 
> 赞同：0
> 
> 时间：2013-03-27T15:58:07.397
> 
> 标签：ios, objective-c, xcode4.5

[我真的是 iOS 钥匙串的新手，在这里](https://github.com/kishikawakatsumi/UICKeyChainStore)偶然发现了这个名为 UICKeyChainStore 的框架。[我还在这里](http://shaune.com.au/ios-keychain-sharing-data-between-apps/)看到了使用上述框架在多个应用程序之间共享钥匙串的教程。

在框架站点中，开发人员提到了使用以下语法保存到钥匙串：

```
[UICKeyChainStore setString:@"kishikawakatsumi" forKey:@"username" service:@"com.kishikawakatsumi"];

[UICKeyChainStore setString:@"password1234" forKey:@"password" service:@"com.kishikawakatsumi"]; 
```

这是否意味着它分别存储用户名和密码？那么如何找回同一个人的用户名和密码呢？我对 GitHub 环境一无所知。尝试在 GitHub 中寻找有关该特定框架的论坛，但找不到任何内容。希望stackoverflow可以对这个问题有所了解......

提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:05:37.400

将值保存到钥匙串后，您应该能够像这样检索它们：

```
NSString *username = [UICKeyChainStore stringForKey:@"username" service:@"com.kishikawakatsumi"];
NSString *password = [UICKeyChainStore stringForKey:@"password" service:@"com.kishikawakatsumi"]; 
```

# silverlight-5.0 - SL5 OOB 应用程序 - 最小化后，恢复到不同大小

> ID：15663387
> 
> 赞同：1
> 
> 时间：2013-03-27T15:58:12.747
> 
> 标签：silverlight-5.0, out-of-browser

我有一个 Silverlight oob 应用程序。如果我单击任务栏中的图标，应用程序将最小化。
当我再次单击该图标时，应用程序会恢复，但大小不同。
什么控制应用程序恢复到的大小？
当应用程序恢复以确保应用程序恢复到正确的大小时，我可以拦截一个事件吗？

感谢您的任何见解....

# c++ - 带有 MinGW GCC 的 Eclipse CDT 生成错误 127

> ID：15663388
> 
> 赞同：0
> 
> 时间：2013-03-27T15:58:21.943
> 
> 标签：c++, c, eclipse, gcc, mingw

我目前正在尝试设置开发环境，但无法正确构建简单的“hello world”应用程序。我安装了 Eclipse 和 MinGW 并添加了 GCC

```
C:\MinGW\bin
C:\MinGW\msys\1.0\bin 
```

到我的路上并正在使用

```
C:\MinGW\msys\1.0\bin\make.exe 
```

作为构建命令。每当我尝试构建时，都会收到以下错误：

```
Description         Resource    Path    Location    Type
make: *** [TCP.exe] Error 127   TCP                 C/C++ Problem 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:38:40.670

使用 Eclipse，MinGW 无缝集成。确保您已将以下内容添加到您的环境路径中：

`YourPath\MinGW\include;` `YourPath\MinGW\bin;`

在选择创建一个新的 C++ 项目时，我个人更喜欢under`Empty Project`并`Project type:`确保. 选择这两个，为项目命名，然后选择. 如果 MinGW 不在，那么它在您的环境中设置不正确，或者您需要重新启动计算机。`MinGW GCC``Toolchains:``Finish``Toolchains:`

`Right-Click`添加一个新的项目名称`Source-Folder`（我通常称为'src'），然后`Right-Click`在新的源文件夹上添加一个`Source File`并随后编写你的hello world代码。只要将 CDT 设置为`Internal Builder`并且您没有对 Eclipse 项目设置进行其他更改，您的程序就应该正确构建，并且您应该在控制台中观察到：

```
12:27:48 **** Rebuild of configuration Debug for project Demo ****
Info: Internal Builder is used for build
g++ -O0 -g3 -Wall -c -fmessage-length=0 -o "src\\main.o" "..\\src\\main.cpp" 
g++ -o Demo.exe "src\\main.o" 

12:27:50 Build Finished (took 1s.262ms) 
```

如果要在 Eclipse/MinGW 中启用 c++11，只需参考[Eclipse CDT C++11/C++0x support中包含的答案](https://stackoverflow.com/questions/9131763/eclipse-cdt-c11-c0x-support)

# intellij-idea - IntelliJ 想法 - 发现 Jetty 重复配置？

> ID：15663391
> 
> 赞同：13
> 
> 时间：2013-03-27T15:58:26.260
> 
> 标签：intellij-idea, jetty

我的 Windows 7 机器上有 IntelliJ Idea 12 和 Jetty 9。

我还有一个在 Tomcat 7.0 上运行良好的示例 JSF 项目。当我尝试使用 Jetty 添加运行时时，出现错误：

> 发现重复的配置文件路径

当我删除

> 等\jetty-jmx.xml

从此屏幕上的 Jetty Server Settings 中，我没有收到此错误，但是当我尝试启动项目时，我得到：

> 2013-03-27 17:50:42.076:WARN:oejx.XmlParser:main: FATAL@file:/D:/Jetty-9/start.d/ line:1 col:1: org.xml.sax.SAXParseException; systemId:file:/D:/Jetty-9/start.d/；行号：1；列号：1；序言中不能有内容。java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.eclipse.jetty.start.Main.invokeMain(Main.java:453) at org.eclipse.jetty.start.Main.start(Main. java:595) 在 org.eclipse.jetty.start.Main.main(Main.java:96) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect。NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 com.intellij.rt.execution .application.AppMain.main(AppMain.java:120) 引起：org.xml.sax.SAXParseException; systemId:file:/D:/Jetty-9/start.d/；行号：1；列号：1；序言中不能有内容。在 com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198) 在 com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError(ErrorHandlerWrapper.java:177)在 com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:441) 在 com.sun.org.apache.xerces.internal.impl.XMLErrorReporter。
> 
> 用法：java -jar start.jar [options] [properties] [configs] java -jar start.jar --help # 获取更多信息

那么，如何在 IntelliJ 12 上正确配置 Jetty？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-31T19:40:43.577

我遇到了同样的问题，但在 Intellij 2016.2.5 和 Jetty 9.3.13 上以这种方式解决了

在 start.ini 中默认启用以下模块

```
--module=ext
--module=resources
--module=server
--module=http
--module=deploy
--module=jsp
--module=websocket 
```

当我在 IntelliJ 中配置 Jetty 时，我再次将上述一些内容添加到“Jetty Server Settings”部分，因此出现错误。

只添加“modules/jmx.mod”

[![在此处输入图像描述](../Images/5658df584cf0e169d210e6c0b4e4f5e9.png)](https://i.stack.imgur.com/ljo4X.png)

解决方案是在此处（IntelliJ > Run > Edit Configurations > Jetty server > local）或“start.ini”文件中添加模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T19:50:56.753

到目前为止，我知道，Idea 12 不支持 Jetty 9。仅此而已。

# c++ - Problems Enabling Symbols in Code::Blocks (custom makefile)

> ID：15663393
> 
> 赞同：0
> 
> 时间：2013-03-27T15:58:30.850
> 
> 标签：c++, debugging, open-source, makefile, codeblocks

I'm attempting to debug an [open-source C++ game](https://github.com/TheDarklingWolf/Cataclysm-DDA) on Windows 7 x64, but the debugger windows in Code::Blocks are empty when I debug the program. There's a "CataclysmWin.cbp" file that's included in the repository, but it is configured to use the Linux makefile, so I had to change some settings to get it to work in Windows. [This is the .cbp file I'm using](http://pastebin.com/CrAyr88F).

Here's my build log:

```
 -------------- Build: Release in Cataclysm (compiler: GNU GCC Compiler)---------------
mingw32-make.exe -f Makefile.Windows
mkdir objwin
g++ -g -O3 -c mapbuffer.cpp -o objwin/mapbuffer.o
g++ -g -O3 -c defense.cpp -o objwin/defense.o
g++ -g -O3 -c skill.cpp -o objwin/skill.o
g++ -g -O3 -c item.cpp -o objwin/item.o
g++ -g -O3 -c mtypedef.cpp -o objwin/mtypedef.o
g++ -g -O3 -c posix_time.cpp -o objwin/posix_time.o
g++ -g -O3 -c texthash.cpp -o objwin/texthash.o
g++ -g -O3 -c tutorial.cpp -o objwin/tutorial.o
g++ -g -O3 -c bionics.cpp -o objwin/bionics.o
g++ -g -O3 -c monmove.cpp -o objwin/monmove.o
g++ -g -O3 -c help.cpp -o objwin/help.o
g++ -g -O3 -c calendar.cpp -o objwin/calendar.o
g++ -g -O3 -c settlement.cpp -o objwin/settlement.o
g++ -g -O3 -c name.cpp -o objwin/name.o
g++ -g -O3 -c mission_place.cpp -o objwin/mission_place.o
g++ -g -O3 -c missiondef.cpp -o objwin/missiondef.o
g++ -g -O3 -c setvector.cpp -o objwin/setvector.o
g++ -g -O3 -c basecamp.cpp -o objwin/basecamp.o
g++ -g -O3 -c player.cpp -o objwin/player.o
g++ -g -O3 -c overmap.cpp -o objwin/overmap.o
g++ -g -O3 -c mission_start.cpp -o objwin/mission_start.o
g++ -g -O3 -c mutation_data.cpp -o objwin/mutation_data.o
g++ -g -O3 -c keypress.cpp -o objwin/keypress.o
g++ -g -O3 -c mission_end.cpp -o objwin/mission_end.o
g++ -g -O3 -c mapitemsdef.cpp -o objwin/mapitemsdef.o
g++ -g -O3 -c construction.cpp -o objwin/construction.o
g++ -g -O3 -c npcmove.cpp -o objwin/npcmove.o
g++ -g -O3 -c mongroupdef.cpp -o objwin/mongroupdef.o
g++ -g -O3 -c event.cpp -o objwin/event.o
g++ -g -O3 -c monster.cpp -o objwin/monster.o
g++ -g -O3 -c newcharacter.cpp -o objwin/newcharacter.o
g++ -g -O3 -c veh_interact.cpp -o objwin/veh_interact.o
g++ -g -O3 -c color.cpp -o objwin/color.o
g++ -g -O3 -c input.cpp -o objwin/input.o
g++ -g -O3 -c mission_fail.cpp -o objwin/mission_fail.o
g++ -g -O3 -c line.cpp -o objwin/line.o
g++ -g -O3 -c melee.cpp -o objwin/melee.o
g++ -g -O3 -c iexamine.cpp -o objwin/iexamine.o
g++ -g -O3 -c debug.cpp -o objwin/debug.o
g++ -g -O3 -c main_menu.cpp -o objwin/main_menu.o
g++ -g -O3 -c disease.cpp -o objwin/disease.o
g++ -g -O3 -c inventory.cpp -o objwin/inventory.o
g++ -g -O3 -c gamemode.cpp -o objwin/gamemode.o
g++ -g -O3 -c options.cpp -o objwin/options.o
g++ -g -O3 -c mission.cpp -o objwin/mission.o
g++ -g -O3 -c trapdef.cpp -o objwin/trapdef.o
g++ -g -O3 -c artifact.cpp -o objwin/artifact.o
g++ -g -O3 -c main.cpp -o objwin/main.o
g++ -g -O3 -c catacurse.cpp -o objwin/catacurse.o
catacurse.cpp: In function 'WINDOW* initscr()':
catacurse.cpp:270:27: warning: passing NULL to non-pointer argument 4 of 'int MessageBoxA(HWND, LPCSTR, LPCSTR, UINT)' [-Wconversion-null]
catacurse.cpp:281:31: warning: passing NULL to non-pointer argument 4 of 'int MessageBoxA(HWND, LPCSTR, LPCSTR, UINT)' [-Wconversion-null]
catacurse.cpp:317:27: warning: passing NULL to non-pointer argument 4 of 'int MessageBoxA(HWND, LPCSTR, LPCSTR, UINT)' [-Wconversion-null]
g++ -g -O3 -c bodypart.cpp -o objwin/bodypart.o
g++ -g -O3 -c npc.cpp -o objwin/npc.o
g++ -g -O3 -c game.cpp -o objwin/game.o
g++ -g -O3 -c rng.cpp -o objwin/rng.o
g++ -g -O3 -c output.cpp -o objwin/output.o
g++ -g -O3 -c tileray.cpp -o objwin/tileray.o
g++ -g -O3 -c mapdata.cpp -o objwin/mapdata.o
g++ -g -O3 -c faction.cpp -o objwin/faction.o
g++ -g -O3 -c npctalk.cpp -o objwin/npctalk.o
g++ -g -O3 -c crafting.cpp -o objwin/crafting.o
g++ -g -O3 -c ranged.cpp -o objwin/ranged.o
g++ -g -O3 -c monitemsdef.cpp -o objwin/monitemsdef.o
g++ -g -O3 -c itypedef.cpp -o objwin/itypedef.o
g++ -g -O3 -c mapgen.cpp -o objwin/mapgen.o
g++ -g -O3 -c monattack.cpp -o objwin/monattack.o
g++ -g -O3 -c veh_typedef.cpp -o objwin/veh_typedef.o
g++ -g -O3 -c iuse.cpp -o objwin/iuse.o
g++ -g -O3 -c map.cpp -o objwin/map.o
g++ -g -O3 -c mutation.cpp -o objwin/mutation.o
g++ -g -O3 -c computer.cpp -o objwin/computer.o
g++ -g -O3 -c trapfunc.cpp -o objwin/trapfunc.o
g++ -g -O3 -c action.cpp -o objwin/action.o
g++ -g -O3 -c inventory_ui.cpp -o objwin/inventory_ui.o
g++ -g -O3 -c mondeath.cpp -o objwin/mondeath.o
g++ -g -O3 -c lightmap.cpp -o objwin/lightmap.o
g++ -g -O3 -c field.cpp -o objwin/field.o
g++ -g -O3 -c weather.cpp -o objwin/weather.o
g++ -g -O3 -c graffiti.cpp -o objwin/graffiti.o
g++ -g -O3 -c wish.cpp -o objwin/wish.o
g++ -g -O3 -c vehicle.cpp -o objwin/vehicle.o
g++ -Wl,-stack,12000000,-subsystem,windows -o cataclysm.exe -g -O3 objwin/mapbuffer.o objwin/defense.o objwin/skill.o objwin/item.o objwin/mtypedef.o objwin/posix_time.o objwin/texthash.o objwin/tutorial.o objwin/bionics.o objwin/monmove.o objwin/help.o objwin/calendar.o objwin/settlement.o objwin/name.o objwin/mission_place.o objwin/missiondef.o objwin/setvector.o objwin/basecamp.o objwin/player.o objwin/overmap.o objwin/mission_start.o objwin/mutation_data.o objwin/keypress.o objwin/mission_end.o objwin/mapitemsdef.o objwin/construction.o objwin/npcmove.o objwin/mongroupdef.o objwin/event.o objwin/monster.o objwin/newcharacter.o objwin/veh_interact.o objwin/color.o objwin/input.o objwin/mission_fail.o objwin/line.o objwin/melee.o objwin/iexamine.o objwin/debug.o objwin/main_menu.o objwin/disease.o objwin/inventory.o objwin/gamemode.o objwin/options.o objwin/mission.o objwin/trapdef.o objwin/artifact.o objwin/main.o objwin/catacurse.o objwin/bodypart.o objwin/npc.o objwin/game.o objwin/rng.o objwin/output.o objwin/tileray.o objwin/mapdata.o objwin/faction.o objwin/npctalk.o objwin/crafting.o objwin/ranged.o objwin/monitemsdef.o objwin/itypedef.o objwin/mapgen.o objwin/monattack.o objwin/veh_typedef.o objwin/iuse.o objwin/map.o objwin/mutation.o objwin/computer.o objwin/trapfunc.o objwin/action.o objwin/inventory_ui.o objwin/mondeath.o objwin/lightmap.o objwin/field.o objwin/weather.o objwin/graffiti.o objwin/wish.o objwin/vehicle.o -static -lgdi32
Process terminated with status 0 (4 minutes, 33 seconds)
0 errors, 3 warnings (4 minutes, 33 seconds) 
```

Here's the debugger tab output:

```
Building to ensure sources are up-to-date
Selecting target:
Release
Adding source dir: C:\Users\Matt\Documents\GitHub\Cataclysm-DDA\
Adding source dir: C:\Users\Matt\Documents\GitHub\Cataclysm-DDA\
Adding file: C:\Users\Matt\Documents\GitHub\Cataclysm-DDA\Cataclysm.exe
Changing directory to: C:/Users/Matt/Documents/GitHub/Cataclysm-DDA/.
Set variable: PATH= *a million entries*
Starting debugger: C:\MinGW\bin\gdb.exe -nx -fullname  -quiet  -args C:/Users/Matt/Documents/GitHub/Cataclysm-DDA/Cataclysm.exe
done
Registered new type: wxString
Registered new type: STL String
Registered new type: STL Vector
Setting breakpoints
Debugger name and version: GNU gdb (GDB) 7.4
Child process PID: 1264
[Inferior 1 (process 1264) exited normally]
No stack.
No stack.
No stack.
Failure finding "Stack level "
Failure matching reg_output
Debugger finished with status 0 
```

Why isn't debugging working for this project?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:32:48.837

Joachim was right - I forgot that the debugging windows don't get populated with info until a break in the code (it has been awhile since I last did this). I put in a breakpoint, the code stopped executing, and the call stack was displayed.

# c# - 如何强制 TextView 处理其文本并呈现它

> ID：15663397
> 
> 赞同：1
> 
> 时间：2013-03-27T15:58:41.997
> 
> 标签：c#, gtk

我正在使用 GTK，当我将文本插入 TextView 时，它似乎在后台线程中处理它。

1.  我在 1 行插入文本
2.  我做了一些其他的事情，但是在这一刻，文本甚至还没有呈现在那里
3.  我使用 ScrollToIter() 使其滚动到底部 - 但是因为文本尚未呈现，滚动到没有尽头，所以什么都没有发生

如果我将滚动条插入到某个计时器中，它可以工作 - 但它非常缓慢而且很奇怪。（先绘制文本，绘制完成后跳到底部，对于长文本，它会跳转几次，因为绘制需要很长时间）。

每次我更改 Buffer.Text 时，控件都会重绘所有行（在循环中逐行追加，这看起来也很烦人）。

我需要做的是：

1.  将 TextView.Buffer.Text 更改为不同的字符串
2.  强制 TextView 处理所有文本并立即重绘
3.  滚动到底部

例如：

假设您要创建一个文本编辑器，该编辑器应该打开大文本文件（100 000 行），并在打开文件后立即滚动到底部。所以理想情况下，你打开文件，首先你看到的是它的底部。这就是在许多文本编辑器中发生的事情。我想用这个 gtk 东西来实现这种行为。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T19:57:35.773

这不是基于主循环的工具包中的事件驱动编程的工作方式。使用主循环（如 GTK+）的工具包进行事件驱动编程的基本原则是：您**永远不会**阻塞主循环。

GTK+ 不使用单独的线程进行渲染和布局：您执行的每个阻塞操作都会阻止其他操作运行，包括绘图、事件处理和您自己的代码。

一旦缓冲区更新，您应该使用 TextBuffer 提供的通知信号滚动到 TextView 的底部；你也不应该**在**一个紧密的循环中插入（长）文本：如果你想逐行插入文本，或者更可能是逐块插入文本，你应该将作业细分为更小的部分，并使用空闲回调或超时回调，这将在主循环中执行。

# database - 从数据库填充的 JSP 下拉列表

> ID：15663401
> 
> 赞同：1
> 
> 时间：2013-03-27T15:58:52.150
> 
> 标签：database, jsp, validation, model-view-controller

所以实际上这里有两个问题。

首先，在我的页面上，用户单击一个按钮以添加一个新条目，该条目将他们定向到 JSP 表单。他们通过文本框填写一些信息，然后有下拉菜单从我们的数据库中提取数据。
一些字段受基本验证约束：

```
@NotNull(message="Version field may not be left blank") 
```

现在我遇到了一个问题，用户尝试提交一个新条目，而版本字段留空。系统正确弹出消息，通知用户他们必须输入一个值，但是下拉列表现在是空的，用户必须返回一个页面并重新开始让他们再次加载数据。

相当多的代码块很难知道发布多少或多少……但基本上`'add'`点击被捕获并由以下处理：

```
@RequestMapping(value = "/cmsattribute_add", method = RequestMethod.GET)
public String Home(ModelMap model, HttpServletRequest request) {

    List<CmsGroup> list =  cmsGroupService.getCmsGroupData();
    TreeMap<Integer, String> entries = getCMSList(list);
    model.addAttribute("entries", entries);

    List<Attribute> attList = attributeService.getAttributeData();
    TreeMap<Integer, String> attResult = getAttributeList(attList);     
    model.addAttribute("attResult", attResult);

    CmsAttribute cmsAttribute = new CmsAttribute();
    model.addAttribute("cmsAttribute", cmsAttribute);
    return "/cmsattribute_insert";
} 
```

然后通过我的jsp显示如下：

```
<tr>
    <td><span class="required">*</span> CMS Group ID:</td>
    <td>
        <form:select path="cmsGroupId">
            <form:options items="${entries}" /> 
        </form:select>
    </td>
    <td><form:errors path="cmsGroupId" cssClass="required" /></td>
</tr> 
```

我不知道该怎么办:(

**第二个问题：** 简单得多。对于其中一些表格，有一个从服务器填充的下拉列表（与上述相同），但它是一个可选字段，例如在加载页面时在下拉列表中`id`添加一个条目作为默认值`'blank'`因此，如果用户在提交后不需要在该字段中添加任何内容，则不会从该字段传回任何内容。

有什么线索吗？

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T03:36:39.967

在表单选项中，也许您可​​以更改每个代码的用途……就像这样。

```
 <form:select path="cmsGroupId">
    <c:forEach var="d" items="${entries}">
       <form:options items="${d.name}" /> 
    </c:forEach>
 </form:select> 
```

# actionscript-3 - loading sound in as3

> ID：15663402
> 
> 赞同：0
> 
> 时间：2013-03-27T15:58:58.943
> 
> 标签：actionscript-3, audio, flash-cs6, urlrequest

i am trying to load a sound and play it when two nape bodies collide i have the collision detection working but cant play the sound the error is coming from the following code:

```
var collisionSound:Sound;

collisionSound = new Sound();
collisionSound.addEventListener(Event.COMPLETE, onSoundLoaded);
collisionSound.load(new URLRequest("bang.mp3"));

private function onSoundLoaded(e:event):void
{
    collisionSound.play();
} 
```

i have sample code in another script very similar to this thaat works help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:00:00.500

Did you try playing it after it is loaded? Also add error handlers to see if there are any errors while loading the file.

```
collisionSound = new Sound();
collisionSound.addEventListener(Event.COMPLETE, onSoundLoaded);
collisionSound.addEventListener(IOErrorEvent.IO_ERROR, onSoundLoadError);
collisionSound.load(new URLRequest("bang.mp3"));

private function onSoundLoaded(e:Event):void
{
   collisionSound.play();
}

private function onSoundLoadError(e:IOErrorEvent):void
{
   trace(e.text);
} 
```

# android - 如何在画布上显示软键盘并在 android 上书写

> ID：15663411
> 
> 赞同：3
> 
> 时间：2013-03-27T15:59:12.420
> 
> 标签：android

我正在尝试通过 android 中的软键盘在画布上书写。

我的问题是如何显示软键盘并处理它在画布上生成的事件。我的代码是：

```
public class DrawView extends View {
            Paint paint = new Paint();
            private static final String LOGID = "MxView";
            String message = "No key pressed yet.";
            DrawView(Context context) {
                    super(context);
                    setFocusable(true);
            }

            @Override
            protected void onDraw(Canvas canvas) {

                    canvas.drawText(message, 5, 20, paint);

            }
            @Override
            public boolean onKeyDown(int keyCode, KeyEvent ev) {
                    switch(keyCode) {
                    case KeyEvent.KEYCODE_ENTER:
                            message = "Key is Enter!";
                            Log.i(LOGID, message);
                            break;
                    case KeyEvent.KEYCODE_E:
                            message = "Key is E!";
                            Log.i(LOGID, message);
                            break;
                    default:
                            return false;
                    }
                    invalidate();
                    return true;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:04:18.130

您可以通过在屏幕上提供“菜单”来做到这一点。当用户选择该选项时，请执行以下操作。

*   允许用户触摸屏，这是他想要放置文本的地方
*   然后创建一个“自定义对话框”，根据需要从用户那里获取输入。
*   将这些文本返回到您的屏幕并在用户触摸的位置写入文本。

第二种方法是通过以下代码查看软键盘。

```
((InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE)).toggleSoftInput(InputMethodManager.SHOW_FORCED,InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

这将向您显示软键盘，并从键盘获取参数，请使用以下代码。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    Log.d("TEST", "Key Down  :" + keyCode + " String : " + s);
    s += (char) event.getUnicodeChar();

    return super.onKeyDown(keyCode, event);
} 
```

这里，“s”是存储按下值的字符串对象。

要隐藏键盘，

```
((InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE))
                .hideSoftInputFromWindow(rel.getWindowToken(), 0); 
```

这里，`rel`是`RelativeLayout`。您可以在这里传递任何视图。

# angularjs - How to access $scope variable in angular from chrome console

> ID：15663412
> 
> 赞同：47
> 
> 时间：2013-03-27T15:59:17.047
> 
> 标签：angularjs, google-chrome-devtools

How to access the scope variable widgets from chrome's console

```
function MyCntrl($scope) {
    $scope.widgets = [
        {text:'Widget #1', datarow:1, datacol:1, datasizex:3, datasizey:3},
        {text:'Widget #2', datarow:2, datacol:1, datasizex:3, datasizey:3},
        {text:'Widget #3', datarow:1, datacol:2, datasizex:3, datasizey:3},
        {text:'Widget #4', datarow:2, datacol:2, datasizex:3, datasizey:3}
    ]; 
```

Something like `$scope.widgets` simply doesn't work in the console!

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-06-04T17:04:55.693

this is a way of getting at scope without batarang. Assuming you have references to jquery and angular on your page, you can do:

```
var scope = angular.element($('#selectorId')).scope(); 
```

or if you want to find your scope by controller name, do this:

```
var scope = angular.element($('[ng-controller=myController]')).scope(); 
```

After you make changes to your model, you'll need to apply the changes to the DOM by calling

```
scope.$apply(); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-27T16:07:28.197

The scope is bound to the DOM so you need to grab an element and use some angular code to get the scope.

Your best bet is to get an element that the Controller is bound to and have a look at the scope on that.

Here is the answer [How do I access the $scope variable in browser's console using AngularJS?](https://stackoverflow.com/questions/13743058/how-to-access-the-angular-scope-variable-in-browsers-console)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-27T17:56:46.517

You can either follow the asnwer of Will or install [Angular Batarang](https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk?hl=en) Chrome extension. This will not only allow you to view and manipulate '$scope' object from, let's say your JavaScript console, but also it's a fundamental tool when developing complex AngularJS apps.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-15T14:51:32.630

Here is one Example: I have following DOM on my angular Single Page application:

```
<div ng-controller="usersAppController as uac" class="ng-scope">
    <div class="tab ng-scope is-normal is-active" id="rolesTab" ref="tabs" mode="normal" target-ref="rolesContent" xng-locals="xng.userApp.roles">Roles
    </div>
</div> 
```

and this **div** is present in the controller name usersAppController as uac Above here I have controller as syntax

Also note down that I am using jQuery in my application:

$($0).controller() method will give me a direct access to the uac object which is on the $scope object.

$($0).scope() will give me prototype chain for the element I have selected and if I follow that chain I will find my scope object on that element.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-30T05:24:59.873

You can first select an element from the DOM that's within the `scope` you want to inspect:

[![enter image description here](../Images/afc8cab767a7273ad94245068a8a3f49.png)](https://i.stack.imgur.com/J3Qdu.png)

Then you can view the scope object by querying the following in the console:

`angular.element($0).scope()`

You can query any property on the scope, e.g.:

`angular.element($0).scope().widgets`

Or you can inspect the controller attached to the scope:

`angular.element($0).scope().$myControllerName`

# sharepoint - XSLT sort specific value

> ID：15663413
> 
> 赞同：0
> 
> 时间：2013-03-27T15:59:20.750
> 
> 标签：sharepoint, sorting, xslt

I have XSLT where

```
<xsl:for-each select="$Rows">
<xsl:sort select="@ows_plstx" order="ascending" /> 
```

I need to output, where first sort value is defined text value @ows_plstx='specific value' and then xslt sort other @ows_plstx values in ascending order.

Example

First defined @ows_plstx specific value

Other @ows_plstx values

...

...

How can I achieved that? Sorry, I am not very familiar with XSLT.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:16:34.353

You can use the fact that boolean true converts to the number 1 and boolean false converts to the number 0

```
<xsl:for-each select="$Rows">
  <xsl:sort select="number(@ows_plstx = 'specific value')"
            order="descending" data-type="number" />
  <xsl:sort select="@ows_plstx" order="ascending" /> 
```

`number(@ows_plstx = 'specific value')` is 1 for the "specific value" and 0 for all other values, so sorting in descending order by those numeric values should put the "specific value" first. Technically the `number()` call in that select isn't necessary but I think it makes it a bit clearer.

# java - 如何将文本文件内容存储到数组中并显示它们

> ID：15663417
> 
> 赞同：1
> 
> 时间：2013-03-27T15:59:28.343
> 
> 标签：java, arrays, readfile

我正在尝试将我的文本文件的内容存储到一个数组中并在控制台中显示它们。我还想在文件中找到空白空间并在其中插入我之前设计的游戏板。

这是我的文本文件内容：

```
rfhrf
1
4

sdtgv
1
1

rfhrf
1
3

sdtgv
2
1

rfhrf
4
4

sdtgv
3
1 
```

这是我到目前为止所拥有的：

```
File text = new File("actions.txt");
try {
    Scanner scanner = new Scanner(text);

    while (scanner.hasNextLine()) {

    String line = scanner.nextLine();
    System.out.println(line);   
    Thread.sleep(5000);
    }

    scanner.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (InterruptedException e) {
    e.printStackTrace();
} 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:20:52.563

您可以做的是按约定定义格式，更改您的文件，使其看起来像这样：

```
rfhrf;1;4
sdtgv;1;1
... 
```

然后对于每个读取行，您可以看到值和位置。例子：

```
File text = new File("actions.txt");
try {
    Scanner scanner = new Scanner(text);

    while (scanner.hasNextLine()) {

        String line = scanner.nextLine();
        String params = line.split(";");
        String value = params[0];
        int row = Integer.parseInt(params[1]);
        int col = Integer.parseInt(params[2]);

        myArray[row][col] = value;

    }

    scanner.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} 
```

如果我真的理解你的意思，那应该对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T17:10:15.357

我认为您不需要使用 Array. 只需尝试以下！希望它有效！

```
File text = new File("actions.txt");
try {
    Scanner scanner = new Scanner(text);

    while (scanner.hasNextLine()) {
        String line = scanner.nextLine();
        if (line.isEmpty()) {
            System.out.println("This is Space!");
        } else {
            System.out.println(line);
        } 
        Thread.sleep(5000);
    }

    scanner.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (InterruptedException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:19:56.797

做你自己的类来满足你的所有需求（比如空间计数、单词）让我们说 MyClassContainer 然后把你所有的 MyClassContainer 放在一个哈希表中。它既快速又简单

# mysql - numeric format on MySQL

> ID：15663423
> 
> 赞同：-2
> 
> 时间：2013-03-27T15:59:48.460
> 
> 标签：mysql

I need your expertise on my problem

```
SELECT 
(begBal) AS 'Beg. Balance',
(deposit) AS 'Deposit',
(withdrawal) AS 'Withdrawn',
(begBal+deposit-withdrawal) AS Balance
FROM savingsTable; 
```

result:

```
| Beg. Balance | Deposit | Withdrawal | Balance | 
|         2000 |    1500 |       1100 |    2400 | 
```

our teacher wants the result like this :

```
| Beg. Balance |  Deposit | Withdrawal |  Balance |
|     2,000.00 | 1,500.00 |   1,100.00 | 2,400.00 | 
```

please include a little explanation on your answer. thank you very much in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:03:20.697

You can use `FORMAT()`

```
SELECT FORMAT(columnName, 2) 
```

*   [SQLFiddle Demo](http://www.sqlfiddle.com/#!2/e8372/2)

SOURCE:

*   [MySQL FORMAT()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:03:37.463

You can use the [`FORMAT()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_format) function to do this.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:04:13.927

I assume that these are decimal fields. If not, it doesn't really make sense to have the `.00` since it can't be stored. Either way, just add `FORMAT(field, 2)`, e.g.

```
SELECT FORMAT(begBal, 2) AS 'Beg. Balance', 
```

# django - Django - How to conect Pentaho Kettle ETL with wep app

> ID：15663426
> 
> 赞同：1
> 
> 时间：2013-03-27T15:59:59.977
> 
> 标签：django, etl, kettle

I have a Django application where users can upload big dataset in PostgreSQL db. I would like to use an ETL tool like [Pentaho Kettle](http://kettle.pentaho.com/) to do the upload job. Later, I would like to use Kettle for data mining and transformations.

However, I have no idea how I to connect my Django app to Kettle. I am not sure what version of Kettle is needed, do I need spoon, or carte?

How can I trigger the job from django python and how to pass the request.FILES of my app to Kettle?

Can you explain the general steps or point to documentation or examples?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T12:19:09.750

1) make your data transformation on kettle (spoon.sh).

2) do a shellscript launching kitchen or pan and this transformation.

3) trigger this shellscript from your django app after the data is uploaded to the server.

# css - 为什么不只对 CSS 中的所有图像进行 base-64 编码？（假设您不必支持旧版浏览器。）

> ID：15663428
> 
> 赞同：1
> 
> 时间：2013-03-27T16:00:01.170
> 
> 标签：css, performance, base64, uri, asset-pipeline

Base64 uri 将图像编码为 css 文件可防止额外请求并加快页面加载速度。

假设您不必支持不支持 base64 uri 的旧 IE。

使用 base64 的最佳策略是什么，我倾向于对小于 8KB 的文件进行编码。但为什么不把所有东西都编码呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:05:04.490

将所有内容作为 base64 内联图像发送的一些问题：

*   如果您的图像在多个地方使用，则内联它可以防止缓存使用
*   base64 编码比二进制发生更多（大约三分之一）
*   浏览器会尽快开始渲染，如果您的 CSS 甚至包含主页不需要的图像，则会使渲染速度变慢
*   即使请求较少通常是好的，但有几个请求并没有那么糟糕，因为浏览器会使它们并行
*   当您考虑在所有页面上使用的一组小图像时，会有更好的优化，特别是如果它们共享相同的调色板：精灵
*   您可能比图像更频繁地更改 CSS。只有一个文件意味着每次更改时都必须重新下载所有内容。没有很好地使用缓存。

你可以坚持你今天的政策（只要你不在css中内联你作为与其他地方分开的文件调用的图像，比如HTML），但我个人认为正确配置缓存参数和精灵的功能不太强大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:07:28.500

（我假设您正在谈论将图像嵌入到外部 .css 文件中。）

这是一个选项*，如果*：

*   没有太多这样的图像
*   图片很小
*   图像适用于几乎所有包含 CSS 的页面

这是一个糟糕的选择，因为：

*   图像可能很大，文件可能很容易快速增长到几兆字节
*   图像的 base64 编码比原始二进制更大
*   它强制客户端一次下载所有图像，这可能没有必要（见上面的第三点）
*   它不允许客户端单独管理缓存文件；即它不能在保留小的CSS文件的同时丢弃大的图像文件，可能会迫使它很快再次一起下载

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T16:07:35.020

Base64 URL 可能会阻止额外的请求，但它也会显着增加所涉及图像的大小，因此减少一个请求的性能优势可能会被总下载大小中的额外权重所抵消

减少请求数量可能是个好主意，但这并不是影响您网站性能的唯一因素。事实上，对于大多数网站来说，它可能在列表中相对较低。

此外，如果图像或您的 CSS 发生变化，那么将它们全部放在一个文件中实际上对已经访问过您网站的人不利，因为必须将整个内容从缓存中丢弃并重新加载。如果它们是单独的文件，则在更改时只需要重新加载其中一个。同样，您正在增加所需的下载总量。

**不要盲目尝试优化；使用站点性能分析工具来确定您的特定瓶颈在哪里，并首先解决最重要的瓶颈。**

# python - Google App Engine blobstore 错误：BlobNotFoundError

> ID：15663431
> 
> 赞同：1
> 
> 时间：2013-03-27T16:00:02.833
> 
> 标签：python, google-app-engine, blobstore

我使用 Google App Engine blobstore 来保存大量用户数据——大小从几百字节到几百 KB 不等。blob_info 保存为数据存储实体的属性。

有时，在生产环境中，从 blobstore 读取会失败并出现 BlobNotFoundError('',)。该异常没有提供任何细节，我无法弄清楚为什么会发生故障。

根据谷歌的文档：

“如果 blob 不引用实际的 Blobstore 值，则 fetch_data 会引发 BlobNotFoundError。” [https://developers.google.com/appengine/docs/python/blobstore/functions#fetch_data](https://developers.google.com/appengine/docs/python/blobstore/functions#fetch_data)

“fetch_data() 函数找不到与给定 BlobInfo 或 BlobKey 值对应的 Blobstore 值。” [https://developers.google.com/appengine/docs/python/blobstore/exceptions#BlobNotFoundError](https://developers.google.com/appengine/docs/python/blobstore/exceptions#BlobNotFoundError)

最令人费解的是，故障是间歇性的。

下面是我用于读取/写入 blobstore 的代码。仅当 blob_info（从数据存储区读取）不是 None 时才会尝试读取。

有什么建议么？

```
def read(blob_info):
    blob_reader = blobstore.BlobReader(blob_info.key(), buffer_size=358400)
    try:
        data = blob_reader.read()
    finally:
        blob_reader.close()

    return data

def write(data, mime_type):
    file_name = files.blobstore.create(mime_type=mime_type)

    with files.open(file_name, 'a') as f:
        f.write(data)

    files.finalize(file_name)

    blob_key = files.blobstore.get_blob_key(file_name)

    # This is a hack to handle an apparent GAE delay synchronizing the blobstore
    for i in range(1,3):
        if blob_key:
            break
        else:
            time.sleep(0.05)
            blob_key = files.blobstore.get_blob_key(file_name)

    new_blob_info = blobstore.BlobInfo.get(str(blob_key))

    return new_blob_info 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:31:10.047

我认为你对 GAE 延迟的破解运行了三遍但没有成功，给 blob_key 的 value `None`。在行

`new_blob_info = blobstore.BlobInfo.get(str(blob_key))`

`str(blob_key)`将转换为“None”，即包含单词 None 的字符串。因此，您正在返回一个带有键的 blob_info，它只包含单词“None”。

您可以通过在循环后检查显式 None 来快速修复它。

正确的解决方法是以某种方式避免竞争条件，但我不知道为什么会发生这种情况；你的代码对我来说看起来很正常。我在 Java 上做了大致相同的工作，它似乎工作正常。请记住，blobstore 文件支持是实验性的，并且没有很好的文档记录。您能否重新编写代码以使用原始 blobstore API（即使用上传 URL）？

# c# - 从另一个类调用函数 - XNA 4.0 - C#

> ID：15663432
> 
> 赞同：1
> 
> 时间：2013-03-27T16:00:03.813
> 
> 标签：c#, class, function, xna

基本上我正在尝试在我的游戏中实现保存功能。当您单击菜单中的保存时，游戏将写入 .txt 文件。从 MenuManager 类我想在 Game1.cs 中调用一个函数

这是我的 MenuManager.cs 中的代码

```
 case Menu.ButtonEvents.Save:
                    activeMenu.ButtonEvent = Menu.ButtonEvents.None;
                    game1.Save();
                    Show("Save Menu"); 
```

第三行是我想在 Game1.cs 中调用函数的地方

在 Game1.cs 我有保存功能

```
 public void Save()
    {
        // Example #1: Write an array of strings to a file. 
        // Create a string array that consists of three lines. 
        string[] lines = { levelIndex.ToString(), player.checkpointPos.X.ToString(), player.checkpointPos.Y.ToString() };
        System.IO.File.WriteAllLines("WriteText.txt", lines);
    } 
```

我的问题是我在 Game1.cs 中有所有变量，但是在 MenuManager 系统中按下了保存按钮。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:04:20.573

您需要将对`game1`变量的引用传递给您的`MenuManager`类。

尝试这样的事情：

**菜单管理器**

```
public Game1 Game
{
    get { return this._game; }
    set { this._game = value; }
}
private Game1 _game = null; 
```

**游戏1.cs**

```
this.MenuManager.Game = this; 
```

在您的功能中：

```
case Menu.ButtonEvents.Save:
activeMenu.ButtonEvent = Menu.ButtonEvents.None;
this.Game.Save();
Show("Save Menu"); 
```

# jira - 用户登录 Jira，但什么也看不到 - 似乎没有真正登录

> ID：15663434
> 
> 赞同：0
> 
> 时间：2013-03-27T16:00:07.730
> 
> 标签：jira

用户具有项目权限，但在登录屏幕后看不到任何内容。只是这个，还有登录选项，好像他没有登录一样。有什么想法吗？很难搜索有关“jira 问题”的帮助

![在此处输入图像描述](../Images/73a5c47c246f63b3b50eee1c71cab451.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:32:46.420

如果这是使用 OnDemand JIRA，那么用户可能没有对 JIRA 的应用程序访问权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T23:03:02.230

发现问题。有人正在更改权限并将这些用户从“用户”组中删除。你必须属于这个才能使用 Jira。

![在此处输入图像描述](../Images/cbc3d5666f27d040c45d26941698a879.png)

# c# - run multiple shell commands one by one in c#

> ID：15663435
> 
> 赞同：1
> 
> 时间：2013-03-27T16:00:10.833
> 
> 标签：c#, shell, cmd, command, dos

I want to run multiple shell commands from c#. I've tried `Process.Start("");` but it opens new instances for each command. I've also tried `ProcessStartInfo` with `StreamWriter` [(ref.)](https://stackoverflow.com/a/437444/1160207) but it doesn't work for me. I want to exeute following shell commands from my c# application.

```
timeout 10
taskkill /F /IM "v*"
taskkill /F /IM "B*"
timeout 5
shutdown /f /p 
```

How can I run these commands one by one from my c# application?

Thanks in advance...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:08:58.843

Try `Process.StartInfo.CreateNoWindow` and `Process.WaitForExit()`

[http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)

[http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)

You can also eliminate the "timeout" commands by doing `System.Threading.Thread.Sleep(5000)`

Here is some code to get you started:

```
static void Main(string[] args)
{
    System.Threading.Thread.Sleep(10000);
    ExecuteCommandAndWait("taskkill", "/F /IM \"v*\"");
    ExecuteCommandAndWait("taskkill","/F /IM \"B*\"");
    System.Threading.Thread.Sleep(5000);
    ExecuteCommandAndWait("shutdown", "/f /p");
}

private static void ExecuteCommandAndWait(string fileName, string arguments)
{
    Process process = new Process();
    process.StartInfo.CreateNoWindow = true;
    process.StartInfo.FileName = fileName;
    process.StartInfo.Arguments = arguments;
    process.Start();
    process.WaitForExit();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:03:02.653

Creating CMD file and running it is probably the easiest option.

Side note: `shutdown /f /t 30` maybe an easier command.

# jquery - Get text inside a div and place it as a value of another attribute

> ID：15663436
> 
> 赞同：0
> 
> 时间：2013-03-27T16:00:12.890
> 
> 标签：jquery, attributes, return-value

I need to get the text inside each 'dd' and place it as a value of the data-description attribute of the related 'a.myClass'. It would be perfect if the data-description attribute is created only if 'gallery-caption' is present.

HTML

```
<dl>
    <dt>
       <a class="myClass"></a>
    </dt>
    <dd class="gallery-caption">This is my caption</dd>
</dl> 
```

CURRENT JS (non-working)

```
$(".myClass").each(function(){

     var Caption = $(this).find('dd.gallery-caption').text();

     $(this).attr('data-description', Caption );

}); 
```

Thanks for your help

**FINAL WORKING SOLUTION**

```
$(".myClass").each(function(){
     var Caption = $(this).parent().next('dd.gallery-caption').text();

     if (Caption && Caption !== ''){
         $(this).attr('data-description', Caption );
     }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:03:12.133

Have you tried

```
$(this).parents("dl").find('dd.gallery-caption').text(); 
```

[http://docs.jquery.com/Traversing/parent](http://docs.jquery.com/Traversing/parent)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:03:14.447

Why don't you just check it before setting it? Also, data attributes can be accessed by using `.data("description")`.

Also, your selector for `Caption` needs tweaking.

Try this:

```
$(".myClass").each(function(){

     var Caption = $(this).parents("dl").find('dd.gallery-caption').text();

     if ($(this).data("data-description")) {
         $(this).data('description', Caption);
     }

}); 
```

Demo: [http://jsfiddle.net/taju4/](http://jsfiddle.net/taju4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T16:03:39.747

You needed to go a little higher up the chain to find your caption:

```
$(".myClass").each(function(){
     var Caption = $(this).closest('dl').find('dd.gallery-caption').text();
     if (Caption && Caption !== ''){
         $(this).attr('data-description', Caption );
     }
}); 
```

If you have multiple DD/DT's inside the DL then you'll need to use next():

```
var Caption = $(this).parent().next('dd.gallery-caption').text(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T16:03:59.350

See `dd.gallery-caption` is not a children of `.myClass`, so try this with `.next()`:

```
var Caption = $(this).parent().next('dd.gallery-caption').text(); 
```

Here you traverse up to its parent and then go at next level of dd and find the `.gallery-caption` class and take the text out of it.

Although same can be achieved with `.siblings()` too:

```
var Caption = $(this).parent().siblings('dd.gallery-caption').text(); 
```

Here you traverse up to its parent and then get the sibling at same level and find the `.gallery-caption` class and take the text out of it.

# php - PHP using sessions

> ID：15663437
> 
> 赞同：1
> 
> 时间：2013-03-27T16:00:15.633
> 
> 标签：php, html, phpmyadmin

I have a login.html page where the user logs in and their information; name and postcode displays. This information displays on the login.php page.

```
<?php
session_start();

echo "systemResult=Success";
        $row=mysql_fetch_array($result);
        echo $row['Name']." is located at".$row['Postcode'];
        $_SESSION['name'] = $row['User_id']; 
```

I want this information to display in a form on a different page and not on the page its displaying on at the moment. (Shown below)

```
<form name="form1" method="post" action="info.php">
            <strong>info</strong>
            <br />
            <br />
            Name: <input name="name" type="text" id="name" />
            <br />
            Postcode: <input name="postcode" type="text" id="postcode" />
            <br />

            </form

            <div data-role="content">
            <?php
            session_start();
            echo $_SESSION['user_id'] 
```

I have set the session up on the login.php page but it still displays information on the wrong page. On the 'info' page, the information does display but not in the forms.

To sum up, I want the information that displays in login.php to display in info.php so when the user logs in, it automatically takes them to info.php, displaying their inforamtion.

The information is coming from the phpmyadmin database.

Thanks in advance

Info.php page

```
<!DOCTYPE html>
<?php
session_start();
echo $_SESSION['user_id'] 
?>
<html>

    </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
            <a data-role="button" data-theme="c" href="menu.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                    Main Menu
                    </a>
                <h3>
                    Your info
                </h3>
            </div>
            <form name="form1" method="post" action="login.php">
            <strong>Details</strong>
            <br />
            <br />
            Name: <input name="name" type="text" id="name" />
            <br />
            Postcode: <input name="postcode" type="text" id="postcode" />

            </form

         </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:01:59.697

First off, your pages need to be `.php`

Secondly, you must start the session with `session_start()` before ANYTHING is rendered on the page. Start the session above the header at the beginning of the page.

Read up on [PHP SESSIONS](http://www.w3schools.com/php/php_sessions.asp)

**UPDATE**

Change your `info.php` code to look like this:

```
<?php
session_start();
// This needs to go before ANYTHING else on the page.
?>
<!DOCTYPE html>
<html>

    </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
            <a data-role="button" data-theme="c" href="menu.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                    Main Menu
                    </a>
                <h3>
                    Your info
                </h3>
                <p>
                    <?php // Put this where you want to echo the user_id on the page
                     echo $_SESSION['user_id']; ?>
                </p>
            </div>
            <form name="form1" method="post" action="login.php">
            <strong>Details</strong>
            <br />
            <br />
            Name: <input name="name" type="text" id="name" />
            <br />
            Postcode: <input name="postcode" type="text" id="postcode" />

            </form

         </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:08:46.710

My dear friend, I think you are confused with session variables. Please keep in mind that ,you should start

```
session_ start( ); 
```

at the very begning of you php page,before anything starts. You can store values to session variables as showm below

```
$_SESSION['demo'] = 'Hello'; 
```

and you can retrieve session variables as showm below

```
echo $_SESSION['demo']; 
```

thats it. Double check u are getting values from db before assigning to session variable

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:15:50.127

Your session variable is called $_SESSION['name'], change it to $_SESSION['user_id'] = $row['User_id'] in your login.php file. Maybe you want multiple session variables? such as:

```
$_SESSION['user_id']  = $row['User_id'];
$_SESSION['name']     = $row['name'];
$_SESSION['postcode'] = $row['code']; 
```

As already mention session_start() needs to be the done before anything else, move the php code to before the DOCTYPE.

# ruby-on-rails - "pg" Ruby gem is throwing a "prepared statement already exists" error from Resque

> ID：15663438
> 
> 赞同：1
> 
> 时间：2013-03-27T16:00:20.923
> 
> 标签：ruby-on-rails, postgresql, resque, pg

Apparently the `pg` gem uses `prepared statements` for Postgres. I have seen fixes for Unicorn to ensure that each process uses it's own db connection like so:

```
after_fork do |server, worker|
  ActiveRecord::Base.establish_connection
end 
```

But I have no idea how to make this work with Resque.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:35:54.887

I found the answer. Please look at `Christian Fazzini`'s answer here:

[Rails Resque workers fail with PGError: server closed the connection unexpectedly](https://stackoverflow.com/questions/2611747/rails-resque-workers-fail-with-pgerror-server-closed-the-connection-unexpectedl/5519372#5519372)

The error is different, but Christian's solution is the same, and it works.

# asp.net - 连接到远程 iis 服务器 2012 以远程调试 Web 应用程序

> ID：15663439
> 
> 赞同：2
> 
> 时间：2013-03-27T16:00:21.153
> 
> 标签：asp.net, visual-studio-2012, iis-7.5, remote-debugging

问题：想要使用 Visual Studio 2012 远程调试器和 Web 部署应用程序连接到 Windows Server 2008R2 IIS Web 应用程序。

重现步骤：
1) 用于生产的全新 WinSrv2008r2 框
- 已启动 Web 部署服务
- 并已启动远程调试服务
2) 用于开发的全新 WinSrv2008r2 框
- 使用 Visual Studio 2012 pro
3) 在 Visual Studio 2012 中启动新的 asp.net Web 项目在开发盒上。
4) 在default.aspx.vb 的Page_Load 事件中创建测试变量并设置它。在这里设置一个断点。
5）部署到生产箱上新创建的测试iis网站 - 成功。
6）导航到页面，希望打断点。

结果：没有断点被击中，但是，如果我只是在开发盒上，我可以让它击中。

预期结果：击中断点。

问题：您如何设置？目标？？过程？在开发 Visual Studio 解决方案上获取部署在生产机器上的应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T17:07:28.670

您需要将调试器附加到远程机器上的 w3wp 进程。从 Debug->Attach To Process.. 菜单项启动“Attach To Process”对话框。

在“限定符”字段中输入要调试的远程计算机的名称。此时，如果您在远程计算机上有一个 RDP 会话，您应该会看到正在与远程调试器建立连接。

现在从列表中选择 w3wp 进程以附加到 IIS 并选择“附加”。

![附加到远程调试器](../Images/999c4558e0b975a2632f12308ba1ec09.png)

如果一切顺利，您应该会在左下角的状态栏中看到 Visual Studio 从远程计算机加载调试符号。

现在在 VS2012 中设置一个断点并执行将导致它在远程网站上被击中的操作，您应该在断点处中断。

# visual-studio-2010 - Ctrl K + D 和 Ctrl E + D 的区别

> ID：15663447
> 
> 赞同：26
> 
> 时间：2013-03-27T16:00:55.453
> 
> 标签：visual-studio-2010, keyboard-shortcuts, difference

`Ctrl` `E`Visual Studio 2010 快捷键+`D`和`Ctrl` `K`+有什么区别`D`？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-10T01:40:41.923

**带有 C# 键绑定的 Visual Studio**

要回答具体问题，在 C# 中，您可能会使用 C# 键盘映射方案，默认情况下将使用这些热键：

`Ctrl`+ `E`, `Ctrl`+`D`格式化整个文档。

`Ctrl`+ `E`, `Ctrl`+`F`格式化选择。

您可以在工具 > 选项 > 环境 -> 键盘中更改这些（通过选择不同的“键盘映射方案”，或将单个键绑定到命令“Edit.FormatDocument”和“Edit.FormatSelection”）。

如果您没有选择使用 C# 键盘映射方案，那么您可能会发现快捷键有所不同。例如，如果您不使用 C# 绑定，则键可能是：

`Ctrl`+ `K`+ `D`（整个文档）

`Ctrl`+ `K`+ `F`（仅限选择）

要找出在您的 Visual Studio 副本中应用哪些键绑定，请查看“编辑”>“高级”菜单 - 键显示在菜单项的右侧，因此很容易发现它们在您的系统上是什么。

# jsp - 无法保存 jsp 页面中的更改

> ID：15663453
> 
> 赞同：4
> 
> 时间：2013-03-27T16:01:09.063
> 
> 标签：jsp, aem

当我在文件夹中创建一个 jsp 页面并单击CRXDE 中的*全部保存时，它给了我这个错误*

> 无法保存更改。收到 409（冲突）保存工作区 crx.default 中的更改。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:58:43.717

这是 CRXDE Lite 的常见问题。您有时可以从中恢复，但通常您能做的最好的事情就是关闭浏览器并重新开始。

要检查的一件事：确保您以具有足够权限应用更改的用户身份登录。

**更新**

首先如何避免这个问题？养成每次更改后单击“全部保存”的习惯，包括添加属性和删除或重命名节点。

# android - css + Android - no click response on scrollable/List view

> ID：15663454
> 
> 赞同：4
> 
> 时间：2013-03-27T16:01:08.840
> 
> 标签：android, css, click, overflow, scrollview

I have a very Long List in my WebApplication generated dynamically with JQuery Mobile. My Problem here is, i can't click on any Item of this scrollable view. I can hear the sound when I click on an Item, but there is no response. And I have this issue only on Android. On iOS everything is working fine. The Problem seems to be something with overflow: auto/scroll in css. An issue, that is known since 2009\. The strange thing here is, I don´t have a Problem with scrolling. It´s really working fine. Touch events just doesn´t responding. Any Idea?

Im using Android 4.x, Phonegap 2.4 and JQueryMobile 1.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:32:30.053

I solved it. My Problem was, the Parent Div had no height.

# c# - Issue adding search filter to paged, sorted WebGrid

> ID：15663456
> 
> 赞同：0
> 
> 时间：2013-03-27T16:01:10.563
> 
> 标签：c#, ajax, asp.net-mvc, webgrid

I'm having an issue getting my filtered results to post back into the paged, sorted webgrid properly. For example, my grid is limited to 5 items per page, but if the filter search returns 9 items, all 9 items are displayed on one page instead of broken over two pages but I'll still have "next" and "prev" page links like the grid doesn't even know that it's displaying the filtered results.

Then if I try to sort the filtered results I lose the filter altogether and am returned to non-filtered webgrid data.

Can you help me understand why the filtered results aren't posting into the webgrid properly?

Here's my controller:

```
using System.Linq;
using System.Web.Mvc;
using SchedulerManager.Models;

namespace SchedulerManager.Controllers
{
    public class ScheduleController : Controller
    {
         readonly ModelServices _mobjModel = new ModelServices();

         public ActionResult Index()
         {
             var schedules = _mobjModel.GetSchedules();
             return View(schedules);
         }

        [HttpPost]
        public ActionResult Index(string description)
        {
            var schedules = _mobjModel.GetSchedules();

            if (!string.IsNullOrEmpty(description))
                schedules = schedules.Where(s => s.Description.ToLower().Contains(description.ToLower())).ToList();

            return PartialView("_grid", schedules);
        }
    }
} 
```

Here is my model:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Scheduler;

namespace SchedulerManager.Models
{
    public class ModelServices : IDisposable
    {
        private readonly Entities _entities = new Entities();

        public IEnumerable<Schedule> GetSchedules()
        {
            return _entities.Schedules.ToList();
        }

        public void Dispose()
        {
            _entities.Dispose();
        }
    }
} 
```

Here is my index.cshtml:

```
@model IEnumerable<Schedule>
@using Scheduler
@using System.Globalization
@{
    ViewBag.Title = "Schedules";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
@using (Ajax.BeginForm(new AjaxOptions 
    { HttpMethod = "Post", InsertionMode = InsertionMode.Replace, UpdateTargetId = "myGrid" }))
{
    <fieldset>
        <legend>Schedules</legend>
        <div>
            Description: 
            <input type="text" id="description" name="description" /> 
            <input type="submit" value="Search" />
        </div>
    </fieldset>
}

<div id="myGrid">
        @Html.Partial("_grid", Model)
</div> 
```

And here is my _grid.cshtml:

```
@model IEnumerable<Schedule>
@using Scheduler

@{
    var grid = new WebGrid(Model, rowsPerPage: 5, ajaxUpdateContainerId: "grid");

    @grid.GetHtml(htmlAttributes: new { id = "grid" },
                  fillEmptyRows: false,
                  alternatingRowStyle: "alternate-row",
                  headerStyle: "grid-header",
                  footerStyle: "grid-footer",
                  mode: WebGridPagerModes.All,
                  firstText: "<< First",
                  previousText: "< Prev",
                  nextText: "Next >",
                  lastText: "Last >>",
        columns: new[] {
        grid.Column("Description", style: "description"),
        grid.Column("ScheduleType", "Type", style: "scheduletype"),
        grid.Column("EnableDate", "Enable Date", s=>s.EnableDate.ToShortDateString(), style: "enabledate"),
        grid.Column("DisableDate", "Disable Date", s=>s.DisableDate != null ? s.DisableDate.ToShortDateString() : "", style: "disabledate"),
        grid.Column("", "", 
                @<text>
                    @(Html.ActionLink("Edit", "Edit", new { id = item.ScheduleId }, new { @class = "actionlink" }))
                    |
                    @(Html.ActionLink("Delete", "Delete", new { id = item.ScheduleId }, new { @class = "actionlink" }))
                </text>)
        })
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:15:53.370

First make sure that you have included the `jquery.unobtrusive-ajax.js` script to your page (after jquery) or your Ajax.BeginForm won't do what you think it will:

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
<script type="text/javascript" src="@Url.Content("~/scripts/jquery.unobtrusive-ajax.js")"></script> 
```

then you could use a GET request for the Search form so that the search criteria gets properly rendered as query string in the pagination anchors that will be generated after the search:

```
@using (Ajax.BeginForm("filter", new AjaxOptions { HttpMethod = "GET", InsertionMode = InsertionMode.Replace, UpdateTargetId = "myGrid" }))
{
    <fieldset>
        <legend>Schedules</legend>
        <div>
            Description: 
            <input type="text" id="description" name="description" /> 
            <input type="submit" value="Search" />
        </div>
    </fieldset>
} 
```

Finally rename your controller action and enable it to GET requests:

```
public class ScheduleController : Controller
{
    readonly ModelServices _mobjModel = new ModelServices();

    public ActionResult Index()
    {
        var schedules = _mobjModel.GetSchedules();
        return View(schedules);
    }

    public ActionResult Filter(string description)
    {
        var schedules = _mobjModel.GetSchedules();

        if (!string.IsNullOrEmpty(description))
        {
            schedules = schedules.Where(s => s.Description.ToLower().Contains(description.ToLower())).ToList();
        }

        return PartialView("_grid", schedules);
    }
} 
```

# c++ - How to get QT 4.8 apps running with Netbeans 7.3?

> ID：15663457
> 
> 赞同：0
> 
> 时间：2013-03-27T16:01:11.163
> 
> 标签：c++, qt, netbeans, qt4, netbeans-7

I followed [Netbeans' guide](http://netbeans.org/kb/docs/cnd/qt-applications.html) to create a basic application with QT. The project builds successfully but fail to Run with no explanation.

I'm running W8 x64 with MinGW and QT4.8 (downloaded from netbeans' guide links).

Here is the C++ files code (for the most part created automatically) :

main.cpp :

```
#include <QtGui/QApplication>
#include "UI_main.h"

int main(int argc, char *argv[]) {
    // initialize resources, if needed
    // Q_INIT_RESOURCE(resfile);

    QApplication app(argc, argv);

    // create and show your widgets here
    UI_main main_w;
    main_w.show();

    return app.exec();
} 
```

UI_main.h :

```
#ifndef _UI_MAIN_H
#define _UI_MAIN_H

#include "ui_UI_main.h"

class UI_main : public QMainWindow {
    Q_OBJECT
public:
    UI_main();
    virtual ~UI_main();
private:
    Ui::UI_main widget;
};

#endif  /* _UI_MAIN_H */ 
```

ui_UI_main.h :

```
#ifndef UI_UI_MAIN_H
#define UI_UI_MAIN_H

#include <QtCore/QVariant>
#include <QtGui/QAction>
#include <QtGui/QApplication>
#include <QtGui/QButtonGroup>
#include <QtGui/QGroupBox>
#include <QtGui/QHeaderView>
#include <QtGui/QMainWindow>
#include <QtGui/QMenuBar>
#include <QtGui/QStatusBar>
#include <QtGui/QWidget>

QT_BEGIN_NAMESPACE

class Ui_UI_main
{
public:
    QWidget *centralwidget;
    QGroupBox *groupBox;
    QMenuBar *menubar;
    QStatusBar *statusbar;

    void setupUi(QMainWindow *UI_main)
    {
        if (UI_main->objectName().isEmpty())
            UI_main->setObjectName(QString::fromUtf8("UI_main"));
        UI_main->resize(800, 600);
        centralwidget = new QWidget(UI_main);
        centralwidget->setObjectName(QString::fromUtf8("centralwidget"));
        groupBox = new QGroupBox(centralwidget);
        groupBox->setObjectName(QString::fromUtf8("groupBox"));
        groupBox->setGeometry(QRect(300, 210, 120, 80));
        UI_main->setCentralWidget(centralwidget);
        menubar = new QMenuBar(UI_main);
        menubar->setObjectName(QString::fromUtf8("menubar"));
        menubar->setGeometry(QRect(0, 0, 800, 21));
        UI_main->setMenuBar(menubar);
        statusbar = new QStatusBar(UI_main);
        statusbar->setObjectName(QString::fromUtf8("statusbar"));
        UI_main->setStatusBar(statusbar);

        retranslateUi(UI_main);

        QMetaObject::connectSlotsByName(UI_main);
    } // setupUi

    void retranslateUi(QMainWindow *UI_main)
    {
        UI_main->setWindowTitle(QApplication::translate("UI_main", "UI_main", 0, QApplication::UnicodeUTF8));
        groupBox->setTitle(QApplication::translate("UI_main", "GroupBox", 0, QApplication::UnicodeUTF8));
    } // retranslateUi

};

namespace Ui {
    class UI_main: public Ui_UI_main {};
} // namespace Ui

QT_END_NAMESPACE

#endif // UI_UI_MAIN_H 
```

UI_main.cpp :

```
#include "UI_main.h"

UI_main::UI_main() {
    widget.setupUi(this);
}

UI_main::~UI_main() {
} 
```

UI_main.ui only contains a group box created with QTDesigner.

The error msg :

> RUN FAILED (exit value -1 073 741 819, total time: 2s)

I tried running it with Windows console and with compatibility mode W7 and XP with the same result.

Any Ideas ? Thank by advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T18:53:11.567

The code is okay and runs without any error in Qt Creator.

![enter image description here](../Images/0e519e73b80da563e95685153d41473c.png)

`exit value -1 073 741 819` means you are using wrong library link or mismatched header or build versions. Please check project linkers, their versions, arch etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:02:37.033

I finally found the source of the problem by uninstalling everything (Qt and MinGW) and restarting the guide from the beginning (paying attention to versions etc. ) . The only thing that was different (apparently) is that I had installed MSYS1.0 separately from MinGW installer. Now everything works well and I can carry on with my project. Thanks [Muhammad Minhazul Haque](https://stackoverflow.com/users/1288414/muhammad-minhazul-haque) for your help !

# html - Weird text wrapping differences between browsers

> ID：15663460
> 
> 赞同：0
> 
> 时间：2013-03-27T16:01:22.917
> 
> 标签：html, css, word-wrap

Trying to debug a bigger problem I managed to reduce it to this simple situation:

Here it is in jsFiddle: [http://jsfiddle.net/uUGp6/](http://jsfiddle.net/uUGp6/)

Here's the HTML:

```
<div class="box">
    <img class="pic" src="http://i3.minus.com/jbuwgurDfNniFM.png"/>
    Test 1
    this is a test: testa testb testc testd teste
</div>

<div class="divider"/></div>

<div class="box">
    <img class="pic" src="http://i3.minus.com/jbuwgurDfNniFM.png"/>
    Test 2<br/>
    this is a test testa testb testc testd teste
</div> 
```

And the CSS:

```
.box {
    background-color: beige;
    float: left;
    margin-right: 10px;
    height: 100px;
}

.pic {
    float: left;
}

.divider {
    clear:both;
    height:10px;
    width:500px;
    background:blue;
} 
```

In Firefox,Chrome and Safari the text in the second box is wrapped. A new line starts after "testc" However in Opera, IE9, IE8 there is no wrapping.

The only difference between the two boxes is the br tag in the second one.

I don't understand why in the second box the line gets wrapped but in the first box a much bigger line is not wrapped. And what does the br tag have to do with it? Does anyone know what I can do to force the browsers to display it in the same way?

Also, which browsers get it right?

P.S.

The floats are essential (like i said, this is a simplification of a bigger problem).

I should add that I'm testing this on Windows 7

Edit: it wraps in Safari as well

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:49:53.213

If you wrap the content that is pulled from the DB after the floated `img` element in an `inline-block` `div` (or `span` if you can't use `div`) the problem will be solved. Even if you have `<br>` or `<h1>`... tags in the pulled content from the DB.

So your sample code will look like this:

```
<div class="box">
 <img class="pic" src="http://i3.minus.com/jbuwgurDfNniFM.png"/>
 <div class="DBContentWrapper">
  Test 1
  this is a test: testa testb testc testd teste
 </div>
</div>

<div class="divider"/></div>

<div class="box">
 <img class="pic" src="http://i3.minus.com/jbuwgurDfNniFM.png"/>
 <div class="DBContentWrapper">
   Test 2<br/>
   this is a test testa testb testc testd teste
 </div>
</div> 
```

/\

```
.box {
    background-color: beige;
    float: left;
    margin-right: 10px;
    height: 100px;
}

.DBContentWrapper {
    display: inline-block;
}

.pic {
    float: left;
}

.divider {
    clear:both;
    height:10px;
    width:500px;
    background:blue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:06:57.373

if you define the white-space attribute to e.g. pre-wrap, you will have the same wrapping in all browsers and you can drop the `<br />` tag...

```
.box { white-space: pre-wrap; } 
```

# api - Conventions for adding child objects via API (JSON) - Thin URL/Fat Body, or vice-versa?

> ID：15663470
> 
> 赞同：0
> 
> 时间：2013-03-27T16:01:51.023
> 
> 标签：api, asp.net-web-api

Say you have an api method that POSTS shelves to a wall:

```
POST /api/shelve  {wallId: 0, shelveTitle: "a shelve for my favorite books"} 
```

And then you have another method that POSTS a book to a shelve:

```
POST /api/book {shelveId: 0, bookTitle: "my book"} 
```

In terms of syntax and usability, would you rather have the above (thin URL, fat body), or a more verbose URL like this:

```
POST /api/shelve/0/book {bookTitle: "my book"} 
```

I'm tempted to just keep the URL as simple as possible by saying /api/book and delegate all specification / definition to the body, restricting the URL to verb/noun pairs. I'm brand new to APIs and want to make sure I get off on the right foot... what's the convention in this scenario?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:13:35.137

Personally I would go with

```
POST /api/shelve/0/book {bookTitle: "my book"} 
```

because it's clear that you are adding a book to a shelve, rather then just adding a book.

Opinions vary on REST design, but I can really recommend this small, free book: [Web Api Design](http://apigee.com/about/api-best-practices/api-design/ebook)

# java - 如何将 Java 代理附加到已运行的 VM 实例

> ID：15663472
> 
> 赞同：3
> 
> 时间：2013-03-27T16:01:58.557
> 
> 标签：java, classloader, virtual-machine, attach-api

我正在尝试使用附加 API 将*Java 代理*附加到正在运行的*Java*实例。我遇到的问题是，当我在 Windows 任务管理器中检查已经运行的 Java 进程的进程 ID 并将其硬编码到附加 Java 代理的程序中时。什么都没发生。是不是因为我们不能将 Java 代理附加到已经运行的进程。

我浏览了[动态代理加载教程](http://dhruba.name/2010/02/07/creation-dynamic-loading-and-instrumentation-with-javaagents/)，它工作正常，但我看到的唯一问题是，它检测到**VM**实例并将*Java 代理*动态附加到它。这个实例正是正在启动当前程序的实例。

**这里的要求是像JMonitor**和其他分析工具一样，将 Java 代理附加到已经运行的**VM**实例。如何进行，请提供一些方向。

# android - Saving/reading large xml string to/from file

> ID：15663475
> 
> 赞同：0
> 
> 时间：2013-03-27T16:02:04.563
> 
> 标签：android, xml, file, save

So, my app receives a large xml from a soap server. I wish to save this in a file, for later use. I managed to do this, and to read the file. BUT the result (after reading) is a garbled xml! A large portion of text (412 characters) from the latter part of the xml is copied and pasted at the end of my xml, and I can't figure out why this is happening. I have tried 2 ways to write the file and 2 ways to read the file, no dice! (will post code below) Note: xml is large 5000-20000 characters, so I used methods to keep eclipse from returning out of memory error.

BOTTOM LINE:

-input xml file is correct

-output xml file is incorrect

-tried 2 save methods

-tried 2 read methods

-wtf?!

save code 1:

```
 InputStream is = new ByteArrayInputStream(string.getBytes());

                    FileOutputStream fos = ctx.openFileOutput(filename, Context.MODE_PRIVATE);

                        byte[] buffer = new byte[1024];
                        int length;
                        while ((length = is.read(buffer))>0){
                            fos.write(buffer, 0, length);
                        }

                        fos.flush();
                        fos.close();
                        is.close(); 
```

save code 2 :

```
 InputStream is = new ByteArrayInputStream(string.getBytes());

                    BufferedReader reader = new BufferedReader(new InputStreamReader(
                            is, "iso-8859-1"), 8);
                    FileOutputStream fos = ctx.openFileOutput(filename, Context.MODE_PRIVATE);
                    StringBuilder sb = new StringBuilder();
                    String line = null;

                    while ((line = reader.readLine()) != null) {
                        Log.e("stuff is good", "line: "+line);
                        sb.append(line);

                        if (sb.toString().length() > 10000) {
                           fos.write(sb.toString().getBytes());
                           fos.flush();
                           sb = new StringBuilder();

                        }

                    }

                    fos.write(sb.toString().getBytes());
                    fos.flush();
                    is.close();
                    fos.close(); 
```

read code 1:

```
 FileInputStream fis = openFileInput("caca");
                    int c;
                    StringBuilder fileContent = new StringBuilder();

                    while((c=fis.read())!=-1)
                            {
                        fileContent.append((char)c);

                            }
                    fis.close();

                    Log.e("TEST TEST", "XML length = "
                            +String.valueOf(fileContent.length()) );
                    Log.e("TEST TEST", "XML = "
                            +fileContent ); 
```

read code 2 :

```
 FileInputStream fis;
                    fis = openFileInput("caca");
                    StringBuffer fileContent = new StringBuffer("");
                    byte[] buffer = new byte[1024];
                    int i =1;
                    while (fis.read(buffer) != -1) {
                        fileContent.append(new String(buffer));
                        Log.v("TEST"+ String.valueOf(i), new String(buffer) );
                        i++;
                    }
                    Log.e("TEST TEST", "XML length = "
                            +String.valueOf(fileContent.length()) );
                    Log.e("TEST TEST", "XML = "
                            +fileContent ); 
```

save to file code :

```
 File myFile = new File("/sdcard/mysdfile.txt");
                        myFile.createNewFile();
                        FileOutputStream fOut = new FileOutputStream(myFile);
                        OutputStreamWriter myOutWriter = 
                                                new OutputStreamWriter(fOut);
                        myOutWriter.append(fileContent);
                        myOutWriter.close();
                        fOut.close();
                        Toast.makeText(getBaseContext(),
                                "Done writing SD 'mysdfile.txt'",
                                Toast.LENGTH_SHORT).show(); 
```

Sorry for the long post, but after 3 days, I'm at my wits end. Any input would be nice, thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:57:44.507

I prefer to use [Apache Commons IO](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/IOUtils.html) for this:

```
DefaultHttpClient client = new DefaultHttpClient();
HttpGet httpGet = new HttpGet(url + id);

try {
    HttpResponse response = client.execute(httpGet);
    InputStream content = response.getEntity().getContent();        
    StringWriter writer = new StringWriter();
    IOUtils.copy(content, writer, "utf-8");
    return writer.toString(); 

} catch (ClientProtocolException e) {
    Log.e(tag, "client problem:" + e.getMessage());
    throw new RuntimeException("client problem",e);
} catch (IOException e) {
    Log.e(tag, "IO problem:" + e.getMessage());
    throw new RuntimeException("IO problem",e);
} 
```

Then just write out the string as usual.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:03:39.203

ok.... I fixed it , I have no idea why it works.

save code:

```
 public static void Save(String filename, String string, 
          Context ctx) {
            Log.e("stuff is good", "xml length b4 save= "+String.valueOf(string.length()));

                try {
                    FileOutputStream fOut = ctx.openFileOutput(filename, Context.MODE_PRIVATE); 

                    OutputStreamWriter myOutWriter = 
                                            new OutputStreamWriter(fOut);
                    myOutWriter.append(Login.messagesXmlDump);
                    myOutWriter.close();
                    fOut.close();
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

            } 
```

read code:

```
 Save("LOL", messagesXmlDump, getApplicationContext());

                try {

                    FileInputStream fis = openFileInput("LOL");
                    int c;
                    StringBuilder fileContent = new StringBuilder();

                    while((c=fis.read())!=-1)
                            {
                        fileContent.append((char)c);

                            }
                    fis.close(); 
```

Managed to write/read a 70k characters long xml. Maybe that recursive method of saving it wasn't the best idea. Think I over-complicated a simple matter.

Sorry for wasting your time :(

# python - How to force the short summary dataframe output in Ipython Notebook

> ID：15663481
> 
> 赞同：2
> 
> 时间：2013-03-27T16:02:24.813
> 
> 标签：python, pandas, ipython-notebook

I'm using IPython Notebook and would like to be able to control which type of output is returned from submitting a simple DataFrame name. For example:

```
df = DataFrame({"A": [1,2,3], "B": [4,5,6]})
df 
```

will always return a grid representation because it such a small DataFrame. However larger DataFrames will show in HTML representation (at least with my settings in the notebook). That is, as long as there isn't more than about 15 columns, in which case the representation is something like this:

```
<class 'pandas.core.frame.DataFrame'>
Index: 35 entries, 6215.0 to 6028.0
Data columns:
District Name               35  non-null values
Total Percent Pass          35  non-null values
GE Percent Pass             35  non-null values
SE Percent Pass             3  non-null values
White Percent Pass          11  non-null values
Black Percent Pass          23  non-null values
Hispanic Percent Pass       21  non-null values
Asian Percent Pass          4  non-null values
PI Percent Pass             0  non-null values
AI Percent Pass             0  non-null values
Other Percent Pass          0  non-null values
EcDis Percent Pass          29  non-null values
Non EcDis Percent Pass      26  non-null values
Total Percent Pass_D        35  non-null values
GE Percent Pass_D           35  non-null values
SE Percent Pass_D           31  non-null values
White Percent Pass_D        27  non-null values
Black Percent Pass_D        35  non-null values
Hispanic Percent Pass_D     35  non-null values
Asian Percent Pass_D        19  non-null values
PI Percent Pass_D           0  non-null values
AI Percent Pass_D           0  non-null values
Other Percent Pass_D        0  non-null values
EcDis Percent Pass_D        35  non-null values
Non EcDis Percent Pass_D    35  non-null values
Comparative                 35  non-null values
dtypes: float64(25), object(1) 
```

I would like to be able to force this type of representation (the last one) at will without having to turn options on an off in the notebook. Is there a way to do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:22:57.323

Extending your example, you can just use `df.info`

```
In [21]: df.info()
<class 'pandas.core.frame.DataFrame'>
Int64Index: 3 entries, 0 to 2
Data columns:
A    3  non-null values
B    3  non-null values
dtypes: int64(2) 
```

# c# - Exception when update a progressbar in a Background Worker

> ID：15663482
> 
> 赞同：0
> 
> 时间：2013-03-27T16:02:26.590
> 
> 标签：c#, wpf, multithreading, progress-bar, backgroundworker

I created a wpf application. In my application, i open a windows and i copy in background some files. I would like to display and update a progressbar during thos copy.

I tried to use a BackgroundWorker :

```
public partial class FenetreProgressBar : Window
{

    private readonly BackgroundWorker worker = new BackgroundWorker();

    public FenetreProgressBar(ObservableCollection<Evenement.FichierJoint> CollectionFicJointsToAdd)
    {
        InitializeComponent();

        worker.WorkerReportsProgress = true;
        worker.DoWork += worker_DoWork;
        worker.RunWorkerCompleted += worker_RunWorkerCompleted;
        worker.ProgressChanged +=worker_ProgressChanged;

        worker.RunWorkerAsync(CollectionFicJointsToAdd);

    }

    private void ProgressChanged(double Persentage, ref bool Cancel)
    {
        if (Cancel)
            this.Close();

        worker.ReportProgress((int)Persentage);
    }

    private void Completedelegate()
    {
        this.Close();
    }

    private void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        ObservableCollection<Evenement.FichierJoint> collection = e.Argument as ObservableCollection<Evenement.FichierJoint>;

        //2) On ajoute les fichiers joints à l'évènements ( ce qui va donc les copier dans le répertoire paramétré)

        foreach (Evenement.FichierJoint FichierJoint in collection)
        {
            if (FichierJoint.strPathFichier.Length > 0)
            {
                Evenement.FichierJoint monFichierJoint = new Evenement.FichierJoint(FichierJoint.strPathFichier, App.obj_myEvenement.strEvtNumeroString);

                MaProgressBar.Minimum = 0;
                MaProgressBar.Maximum = 100;

                monFichierJoint.copyObject.OnProgressChanged += ProgressChanged;
                monFichierJoint.copyObject.OnComplete += Completedelegate;

                monFichierJoint.AddFichierJoint();

            }
        }
    }

    private void worker_RunWorkerCompleted(object sender,RunWorkerCompletedEventArgs e)
    {
        // Traitement terminé, on ferme la fenetre
        this.Close();
    }

    private void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        MaProgressBar.Value = e.ProgressPercentage;
    }

} 
```

When the programme go here :

```
MaProgressBar.Minimum = 0;
MaProgressBar.Maximum = 100; 
```

I have an exception : " The calling thread cannot access this object because a different thread owns it".

I have read severals answer on google and stackoverflow but i don't try to use this approach with the BackgroundWorker.

Anyone coule help me in order to avoid this exception and solve the problem please ?

Thanks a lot,

Best regards :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:15:50.083

You `cannot modify UI objects from background worker`. You need to `invoke` the methods on UI `dispatcher` like this -

```
App.Current.Dispatcher.Invoke((Action)delegate
            {
                MaProgressBar.Minimum = 0;
                MaProgressBar.Maximum = 100;
            }); 
```

But since you only need to `set maximum an minimum values`, i would suggest you to set these values outside of backgroundWorker in `constructor` -

```
public FenetreProgressBar(ObservableCollection<Evenement.FichierJoint> 
                      CollectionFicJointsToAdd)
{
    InitializeComponent();

    MaProgressBar.Minimum = 0;
    MaProgressBar.Maximum = 100;

    worker.WorkerReportsProgress = true;
    worker.DoWork += worker_DoWork;
    worker.RunWorkerCompleted += worker_RunWorkerCompleted;
    worker.ProgressChanged +=worker_ProgressChanged;

    worker.RunWorkerAsync(CollectionFicJointsToAdd);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:12:59.497

Why don't you use C# new async and await new feature/keywords? they were specifically designed to make the UI responsive while doing lengthy operations.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:15:46.023

You should try this:

```
_backgroundWorker.OnProgressChanged += new ProgressChangedEventHandler(backgroundWorker_ProgressChanged); 
```

and then

```
// Event handler
private void backgroundWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    // Update main thread here
} 
```

# c++ - 查询后的 MongoDB 套接字异常不返回结果

> ID：15663484
> 
> 赞同：1
> 
> 时间：2013-03-27T16:02:32.037
> 
> 标签：c++, mongodb

*   现在，在下面的简化代码段中，如果我的查询返回结果，则一切正常。

*   如果查询没有返回结果，那么一切仍然按预期进行，抛出并捕获异常。

*   在此查询之后，如果我尝试执行另一个查询，则该语句`dbConn->query(collection, queryObj)`会抛出一个`mongo::SocketException`. 打印的消息是：

    `socket exception [SEND_ERROR] for 127.0.0.1:27017 // 9001 socket exception [2] server [127.0.0.1:27017]`

*   从这个开始，以下查询都抛出相同的异常，并带有不同的消息： `socket exception [FAILED_STATE] for localhost:27017 // 9001 socket exception [5] server [localhost:27017]`

*   我还打印了错误代码字符串，它们都是“未知错误”。

*   如果我重新启动该过程，它会重置，因此我假设连接以某种方式损坏。目前没有其他人正在访问共享 ptr。mongo 守护进程运行良好，mongodb 日志中没有任何异常。

*   我的大问题是：为什么会发生？

片段：

```
try
{
    // Some initialzation here..
    // dbConn is a boost::shared_ptr<mongo::DBClientConnection>

    std::auto_ptr<mongo::DBClientCursor> cursor = dbConn->query(collection, queryObj);
    if (!cursor->more())
    {
        throw Exception();
    }
}
catch(const Exception&)
{

}
catch(const mongo::SocketException& e)
{
    std::cout << ex.what() << "//" << ex.toString() << std::endl;
} 
```

MongoDB C++ 驱动程序版本为 2.3.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T22:15:43.337

我假设您在代码中的其他位置获取并初始化连接，期望避免每次需要时获取该连接的开销。（我最初也是在我的代码中这样做的）。

我想您会发现，在使用过程中更靠近`ScopedDbConnection`获取连接并从驱动程序获得新连接会有所帮助；驱动程序似乎可以很好地管理连接。

# linux - 查找视频缓冲区的物理内存偏移量

> ID：15663487
> 
> 赞同：2
> 
> 时间：2013-03-27T16:02:37.607
> 
> 标签：linux, memory, graphics

我正在使用集成显卡运行的 Fedora 17。鉴于我能够操作物理内存的内容，我如何找出可以写入的物理内存偏移量以便在屏幕上显示某些内容？

我试图查找 0xB8000 和 0xB0000 偏移，但它们包含所有 0xff。

是否有在内存中启动视频缓冲区的特定模式？关于这个主题有什么好的信息来源吗？

我的问题的根本原因是 Linux 没有使用传统视频模式，因此 0xB8000 的内存受到限制（在我的情况下是只读的）。但是发出中断可以切换到其他模式：

```
INT 10 - VIDEO - SET VIDEO MODE

AH = 00h
AL = desired video mode (see #00010) 
```

发现于： http: [//www.delorie.com/djgpp/doc/rbinter/id/74/0.html](http://www.delorie.com/djgpp/doc/rbinter/id/74/0.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:37:08.000

## 像1989年一样生活

```
 #include <linux/fb.h>
    #define DEV_MEM     "/dev/fb0"

    /* Screen parameters (probably via ioctl() and /sys. */
    #define YRES 240
    #define XRES 320
    #define BYTES_PER_PIXEL (sizeof(unsigned short)) /* 16 bit pixels. */
    #define MAP_SIZE    XRES*YRES*BYTES_PER_PIXEL
    unsigned short  *map_lbase;

    if((fd = open(DEV_MEM, O_RDWR | O_SYNC)) == -1) {
        fprintf(stderr, "cannot open %s - are you root?\n", DEV_MEM);
        exit(1);
    }

   // Map that page.
    map_lbase = (unsigned short *)mmap(NULL, MAP_SIZE,
        PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);
    if((long)map_lbase == -1) {
        perror("cannot mmap");
        exit(1);
    } 
```

Humons- [Framebuffer API 文档](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/Documentation/fb/api.txt)，[Framebuffer Doc 目录](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/Documentation/fb)。
Smart Humons -[内部](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/Documentation/fb/internals.txt)结构、[延迟 I/O 文档](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/Documentation/fb/deferred_io.txt)或如何模拟内存映射视频。

* * *

您不能直接使用*0xB8000*和*0xB0000*，因为它们是物理地址。我假设您在用户空间中并且没有编写内核驱动程序。在 Linux 下，我们通常启用 MMU；换句话说，我们有虚拟内存。并非所有进程/用户都可以访问视频内存。但是，如果您被允许，您可以`mmap`将*帧缓冲*设备添加到您的地址空间。最好让内核给你一个地址，而不是请求一个特定的地址。

或者看看[专业人士是怎么](http://repo.or.cz/w/fbv.git) [做](http://www.ummon.eu/Linux/API/Devices/framebuffer.html)的。

男：[mmap](http://man7.org/linux/man-pages/man3/mmap64.3.html)

**编辑：**如果您不是*root*，您仍然可以在`/dev/fb0`（或任何设备）上使用 Unix 权限来授予组读/写权限，或者使用某种*登录*过程来授予用户当前*tty*权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:06:31.907

也许你可以从这里开始： [http ://www.tldp.org/HOWTO/Framebuffer-HOWTO/](http://www.tldp.org/HOWTO/Framebuffer-HOWTO/)

但现代视频图形绝不是“找到内存中的 VRAM 所在位置”并在那里写入那么简单。

# php - 是否可以将使用 php 上传的文件作为输入传递给 javascript？

> ID：15663495
> 
> 赞同：1
> 
> 时间：2013-03-27T16:03:02.630
> 
> 标签：php, javascript, tmx

我正在使用基于磁贴的 tmx 编辑器，目前正在保存文件。目前，它将 tmx 传递给一个名为 endpoint 的 php 文件，该文件用于下载该文件。可以在此处查看 www.jamesplanet.net/growtopiamapeditor/beta。

我需要知道的是可以使用 php 上传文件然后将文件传递给 javascript 以加载到编辑器中吗？

如果您需要源的副本，我可以放一个链接

如果这个问题的措辞不正确或没有足够的信息，请不要投反对票。而是让我知道您还需要知道什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:20:43.040

可能的解决方案：您可以让 PHP 脚本下载文件，将文件详细信息插入表中，然后仅返回名称和/或 ID，说明如何以 JSON 格式从表中获取文件详细信息，以便 javascript 将文件添加到名单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:15:41.713

基本上这需要工作，你必须使用 iframe ，你可以动态创建并使用它作为回发到 php 代码。这是实现这一目标的常用方法之一。会有很多第三方使用这个概念

# apache - Using "require group" with mod_authn_dbm in Apache HTTPD 2.4

> ID：15663501
> 
> 赞同：0
> 
> 时间：2013-03-27T16:03:15.240
> 
> 标签：apache, authorization, basic-authentication, httpd.conf

I am using Apache HTTPD 2.4 and I've decided it's time for me to move from `mod_authn_file` to `mod_authn_dbm`. I've got it mostly working but it won't check my `AuthDBMUserFile` for group information. I've googled it and it appears that this kind of functionality should still be available, via `mod_authz_dbm` which I've now included. The documentation for `mod_authz_dbm` makes it appear that you just have to use the `AuthDBMGroupFile` directive as in my configuration below:

```
<Directory "C:/Apache24/site/requests">
AuthType Basic
AuthName "Secure Area"
AuthBasicProvider dbm
AuthDBMUserFile site/data/users
AuthDBMGroupFile site/data/users
Require group admin
</Directory> 
```

(Don't worry, `site/data` is not accessible via the webserver!)

However, even though the directive is clearly known (`httpd -t` doesn't complain and the server starts OK), it is either being ignored or something else is trying to find a different group file. The error I see in the log file is:

```
AH01664: No group file was specified in the configuration 
```

Does my configuration look incomplete somehow?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:45:40.593

I have an answer via the [Apache HTTPD Users Mailing List](http://httpd.apache.org/userslist.html) courtesy of Eric Covener, who says:

> mod_authz_dbm responds to Require dbm-group (and dbm-file-group) only in 2.4 which seems to be a change from 2.2.

So my configuration should have been:

```
<Directory "C:/Apache24/site/requests">
AuthType Basic
AuthName "Secure Area"
AuthBasicProvider dbm
AuthDBMUserFile site/data/users
AuthDBMGroupFile site/data/users
Require dbm-group admin
</Directory> 
```

I have tried this and it does exactly what I wanted. Many thanks Eric!

# java - How to validate & instantiate Java Locale from strings?

> ID：15663503
> 
> 赞同：8
> 
> 时间：2013-03-27T16:03:14.907
> 
> 标签：java, validation, locale

My app is being fed string from an external process, where each string is either 2- or 5-characters in length, and represents a `java.util.Locale`s. For example:

> en-us
> 
> ko

The first example is a 5-char string where "en" is the ISO language code, and "us" is the ISO country code. This should correspond to the "en_US" Locale. The second example is only a 2-char string, where "ko" is the ISO language code, and should correspond to the "ko_KR" (Korean) Locale.

I need a way to take these strings (either the 2- or 5-char variety), validate it (as a supported Java **6** Locale), and then create a Locale instance with it.

I would have hoped that Locale came with such validation out of the box, but unfortunately this code runs without exceptions being thrown:

```
Locale loc = new Locale("waawaaweewah", "greatsuccess");

// Prints: "waawaaweewah"
System.out.println(loc.getDisplayLanguage()); 
```

So I ask, given me the 2 forms that these string will be given to me in, how can I:

*   Validate the string (both forms) and throw an exception for strings corresponding to non-existent or unsupported Java 6 Locales; and
*   Instantiate a new Locale from the string? This question really applies to the 2-char form, where I might only have "ko" and need it to map to the "ko_KR" Locale, etc.

Thanks in advance!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T16:09:12.470

[Locale.getISOCountries()](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html#getISOCountries%28%29) and [Locale.getISOLanguages()](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html#getISOLanguages%28%29)

return a list of all 2-letter country and language codes defined in ISO 3166 and ISO 639 respectively and can be used to create Locales.

You can use this to validate your inputs.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T16:15:15.160

You have two options,

1.  Use a library for doing this [commons-lang](http://commons.apache.org/proper/commons-lang/) has the [LocaleUtils](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/LocaleUtils.html) class that has a method that can parse a `String` to a `Locale`.
2.  While your own method, the validation here is non trivial as there are a number of different sets of country codes that a valid for a `Locale` - see the [javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html)

A starting point would be to split the `String` and switch on the number of elements:

```
public static Locale parseLocale(final String locale) {
    final String[] localeArr = locale.split("_");
    switch (localeArr.length) {
        case 1:
            return new Locale(localeArr[0]);
        case 2:
            return new Locale(localeArr[0], localeArr[1]);
        case 3:
            return new Locale(localeArr[0], localeArr[1], localeArr[2]);
        default:
            throw new IllegalArgumentException("Invalid locale format;");
    }
} 
```

Presumably you would need to get lists of all valid country codes and languages and compare the elements in the `String[]` to the valid values before calling the constructor.

# php - jQuery根据所选值更改表单操作

> ID：15663505
> 
> 赞同：0
> 
> 时间：2013-03-27T16:03:18.333
> 
> 标签：php, javascript, jquery

我在使用一种方法在值更改时设置表单操作时遇到了一个非常棘手的问题。我有以下代码：

```
var actions = new Array();
actions[0] = "some-site.html";
actions[1] = "some-other-site.html";
actions[2] = "another-site.html";
etc....

$("select#feld-urlaubsart").change(function () {
if ($("select#fieldname").val() !== "") {
$("form#searchform").attr("action","http://www.mysite.com/" +  
actions[$("select#fieldname").val()]);
}
}); 
```

另一方面，我的选择如下所示：

```
<select id="fieldname" name="fieldname">
<option value="0" selected="selected">All</option>
<optgroup label="Golfurlaub mit Greenfees">
<option value="1">Alle Greenfee-Angebote</option>
<option value="2">Top-Angebote</option>
<option value="3">Golfurlaub mit 4 Tage Greenfee</option>
</optgroup> 
```

实际上它确实有效，但我对它不满意，因为我需要依赖 value="1" value="2" 等。

现在我需要使用实际描述作为值来与另一个脚本兼容，我将值传递给在 PHP/JSON 中使用。我需要这样的数据

```
<option value="All">All</option>
<option value="Option 1">Option 1</option>
etc 
```

如何在不需要使用“1”“2”等数组键的情况下根据选定的 VALUE 更改表单的操作？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:13:11.593

使用 json 对象：

```
actions = {"All":"some-site.html","Option1":"some-other-site.html"} 
```

然后

```
actions["All"] 
```

是

```
"some-site.html" 
```

# javascript - 使用媒体查询切换元素

> ID：15663508
> 
> 赞同：2
> 
> 时间：2013-03-27T16:03:21.617
> 
> 标签：javascript, css

我不知道从平板电脑访问网站时是否可以切换两个 HTML 元素。

现在我有以下设置：

```
<section id="content"></section><!-- End section#content -->
<aside id="sidebar"></aside><!-- End aside#sidebar --> 
```

我想要的是，当您在平板电脑上查看网站时，内容部分上方的旁边位置，如下所示：

```
<aside id="sidebar"></aside><!-- End aside#sidebar -->
<section id="content"></section><!-- End section#content --> 
```

什么是最好的解决方案？一个简单的`CSS`或我必须使用的行`Javascript`以及它应该是什么样子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:30:40.223

您可以通过 css 实现您想要的：只需浮动`#content`，`#sidebar`默认情况下并在平板电脑模式下删除浮动。此外，您可以`width: 100%`在平板电脑模式下进行设置。

看看我的[小提琴](http://jsfiddle.net/Sj43S/2/)。

在平板电脑模式下按照您的需要排列 html：

```
<aside id="sidebar"></aside><!-- End aside#sidebar -->
<section id="content"></section><!-- End section#content --> 
```

和基本的CSS：

```
#content {
    float: right;
    width: 700px;
    height: 200px;
}

#sidebar {
    float: right;
    width: 200px;
    height: 200px;
}

@media screen and (max-width: 900px) {
    #sidebar, #content {
    clear: both;
    width: 100%;
   }
} 
```

在切换到具有相对宽度的平板电脑模式之前，您还可以添加另一个媒体查询以缩小桌面模式。例如，就像在这个[替代小提琴](http://jsfiddle.net/Sj43S/5/)中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:17:12.593

你可以用 jQuery 做到这一点。

```
 $('#content').clone().insertAfter('#sidebar');

 //You will also have to remove the first content element. 
 //You could do something like this to remove it

  $('#content').eq(0).remove();

  //or this 

  $('#content:first-child').remove(); 
```

[http://jsfiddle.net/ckhGe/](http://jsfiddle.net/ckhGe/)

# java - DBpedia Jena Query returning null

> ID：15663510
> 
> 赞同：4
> 
> 时间：2013-03-27T16:03:25.087
> 
> 标签：java, rdf, sparql, jena, dbpedia

I'm just trying to run a small query on DBpedia, the query itself works, see it [here](http://dbpedia.org/snorql/?query=PREFIX%20rdfs%3a%20%3Chttp://www.w3.org/2000/01/rdf-schema#%3E%20SELECT%20?label%0D%0A%09%09%09WHERE%20%7B%0D%0A%09%09%09%20%3Chttp://dbpedia.org/resource/Quatre_Bornes%3E%20%3Chttp://dbpedia.org/ontology/country%3E%20?y%20.%0D%0A%09%09%09%20?y%20rdfs%3alabel%20?label%20.%20%0D%0A%09%09%09%20FILTER%20%28LANG%28?label%29%20=%20%27en%27%29%0D%0A%09%09%09%7D), but I don't why its returning when doing so with Jena, I'm getting null.

```
String service = "http://dbpedia.org/sparql";
String queryString = "";
queryString = "PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> SELECT ?label" +
        "WHERE {" +
        "<http://dbpedia.org/resource/Quatre_Bornes> <http://dbpedia.org/ontology/country> ?y ."+
        "?y rdfs:label ?label ."+ 
        "FILTER (LANG(?label) = 'en')"+
        "}";

Query query = QueryFactory.create(queryString);
QueryEngineHTTP qexec = QueryExecutionFactory.createServiceRequest(service, query);
ResultSet results = qexec.execSelect();
for ( ; results.hasNext() ; ) {
    QuerySolution soln = results.nextSolution() ;
    System.out.println(soln.getLiteral("label"));
} 
```

Any suggestion?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:54:54.537

that is so embarassing, there is space problem in the query:

```
String service = "http://dbpedia.org/sparql";
        String queryString = "";
        queryString = "PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> SELECT ?label " +
            "WHERE {" +
             "<http://dbpedia.org/resource/Quatre_Bornes> <http://dbpedia.org/ontology/country> ?y ."+
             "?y rdfs:label ?label ."+ 
             "FILTER (LANG(?label) = 'en')"+
            "}"; 
```

# sql - Alias passing wrong data in subquery

> ID：15663511
> 
> 赞同：0
> 
> 时间：2013-03-27T16:03:27.813
> 
> 标签：sql, postgresql, subquery

I am currently working on building a software that monitors data processing on a server. I have been trying to build a query that can determine what the 'current processed through date' is for a given system. I am trying to accomplish this by first determining what the oldest failure is, and then grabbing the date immediately before that one.

The problem that I am having is that my subquery (referencing the alias for one of the other tables that was joined) seems to be passing the wrong id in the WHERE clause.

Here's the Query I have written:

```
select
    t.team_name as team,
    c.client_name as client,
    c.client_id as cid,
    p.pvl_name as pvl,
    p.pvl_id as pid,
    f.feeder as feeder,
    coalesce((
        select to_char( to_timestamp(status_date)::timestamp, 'mm/dd/yyyy' )
        from database1.status
        where
            status_date < (
                select status_date
                from database1.status
                where
                    status_date not in (
                        select status_date
                        from database1.status
                        where
                            process_step_id = 5
                            and process_state_id = 5
                            and pvl_id = p.pvl_id
                            and status_date is not null
                        )
                    and pvl_id = p.pvl_id
                order by status_date
                limit 1
                )
            and pvl_id = p.pvl_id
        limit 1
        ), '--------------' ) as through_date
from
    database1.client c
    join
    database1.pvl p on c.client_id = p.client_id
    left join (
        select child_pvl_id, count(child_pvl_id) as feeder
        from database1.relation
        group by child_pvl_id
    ) f on f.child_pvl_id = p.pvl_id
    join
    database1.team t on c.team_id = t.team_id
where c.team_id = 1
order by c.client_name, f.feeder desc 
```

For the first system, it always returns the 'through_date' as 03/16/2013, even though the correct date should be 03/21/2013\. I have tried pulling out the subquery and replacing 'p.pvl_id' with an actual pvl_id, and it works correctly, it only seems to function erroneously when it is in a subquery using 'p.pvl_id'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:26:47.873

I found one source of problem. In this part you set a limit but do not set an order by. So it can return any row:

```
 and pvl_id = p.pvl_id
limit 1
), '--------------' ) as through_date 
```

Also I simplified the query a bit:

```
select
    t.team_name as team,
    c.client_name as client,
    c.client_id as cid,
    p.pvl_name as pvl,
    p.pvl_id as pid,
    f.feeder as feeder,
    coalesce((
        select to_char(to_timestamp(max(status_date))::timestamp, 'MM/DD/YYYY')
        from database1.status
        where
            status_date < (
                select min(status_date)
                from database1.status
                where
                    not (
                            process_step_id = 5
                            and process_state_id = 5
                            and pvl_id = p.pvl_id
                            and status_date is not null
                        )
                    and pvl_id = p.pvl_id
                )
            and pvl_id = p.pvl_id
        ), '--------------' ) as through_date
from
    database1.client c
    join
    database1.pvl p on c.client_id = p.client_id
    left join (
        select child_pvl_id, count(child_pvl_id) as feeder
        from database1.relation
        group by child_pvl_id
    ) f on f.child_pvl_id = p.pvl_id
    join
    database1.team t on c.team_id = t.team_id
where c.team_id = 1
order by c.client_name, f.feeder desc 
```

# r - How to have a new line in a `bquote` expression used with `text`?

> ID：15663535
> 
> 赞同：12
> 
> 时间：2013-03-27T15:57:56.650
> 
> 标签：r, data-visualization, plotmath

I want to have a new line in my `bquote` envrionment, how can I do this?

my code:

```
test<-c(1,2,3,4,4.5,3.5,5.6)
test2<-0.033111111
plot(test,c(1:length(test)))

segments(4,0,4,23,col="red",lwd=2)
text(5, 4.5, labels = bquote(Qua[0.99] == .(round(test2,4))),col="red", cex = 1.4) 
```

And I want to have a new line after the equal sign, so this should give:

```
VaR_0.99 =

0.03311

and not

    VaR_0.99 = 0.03311 
```

I tried it with lines, but it did not work:

```
 test<-c(1,2,3,4,4.5,3.5,5.6)
    test2<-0.033111111
    lines<-list(bquote(Qua[0.99] == ),bquote(.(round(test2,4))))
    plot(test,c(1:length(test)))

    segments(4,0,4,23,col="red",lwd=2)
    text(5, 4.5, labels =lines ,col="red", cex = 1.4) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T16:24:35.143

For instance, using `atop`:

```
test<-c(1,2,3,4,4.5,3.5,5.6)
test2<-0.033111111
plot(test,c(1:length(test)))

segments(4,0,4,23,col="red",lwd=2)
text(5, 4.5, 
     labels = bquote(atop(Qua[0.99] == phantom(), .(round(test2,4)))),
     col="red", cex = 1.4) 
```

![enter image description here](../Images/d9f537fad98cacf05611205969f9c594.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T16:24:59.553

One of the errors was noted above in my comment to the questioner. R expressions get parsed so they need to be syntactically valid. Since "==" is a two-argument function it cannot be the final item in an expression. The `phantom` function serves as a placeholder that is non-printing. Could also have been an empty character value (`""`). Since there was no "outside" value that needed to be evaluated, I just used `expression()` rather than `bquote()` for the first argument in the expression list.

(Note: that expressions in R behave as lists so that `c()` succeeds in appending language items to a single element expression and `list()` is not needed, and in fact was harmful in this situation. There is another subtlety in that `bquote` does not return an "expression"-classed result but rather a "call". It may need to be wrapped with `as.expression` if a true "expression" is needed as was the case here. I've seen R savants use an `lapply( . , as.expression)` to return an expression list in similar situations.)

The other one was more a semantic error than a syntactic one. You need to give an explicit y location for the second `bquote` expression. Pretty much all of the important arguments of text are vector-capable but there doesn't appear to be implicit up-(or down-)indexing for the y values:

```
test <- c(1, 2, 3, 4, 4.5, 3.5, 5.6)
test2 <- 0.033111111
lines <- c( expression(Qua[0.99] == phantom(0)) ,
           bquote(.(round(test2,4)))
          )
plot(test,c(1:length(test)))

segments(4,0,4,23,col="red",lwd=2)
text(5, c(4.5, 4), labels =lines ,col="red", cex = 1.4) 
```

![enter image description here](../Images/979070fafcf42c12650e2830dcf89818.png)

I have used the `atop` suggestion myself in the past, even suggesting it on Rhelp, but I think the approach above generalizes better to three or more expressions and allows more control over positioning. `atop` also silently reduces font sizes, so if you went the nested atop route for a three expression task, it might need to be `atop( atop(..., ...), atop(..., phantom() )` to keep the sizes uniform.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-09T19:20:45.780

I wanted this but left aligned. After searching for solutions I ended up using two `text()` calls set up to put the text 0.25 inch apart and 0.25 in from top regardless of the plot dimensions.

```
plot(1:100)
r2 <- 40.2
rmse <- 0.6
ll = bquote(paste(italic(R)^2," = ",.(r2),"  RMSE = ",.(rmse)))
val=0.25*diff(par('usr')[3:4])/par('pin')[2]
text(par('usr')[1], par('usr')[4] - val, pos=4, labels=ll)
text(par('usr')[1], par('usr')[4] - 2*val, pos=4, labels="Model A") 
```

[Image produced by code](https://i.stack.imgur.com/XKtNm.png)

# php - Multidimensional arrays to insert for one row

> ID：15663536
> 
> 赞同：0
> 
> 时间：2013-03-27T16:04:40.187
> 
> 标签：php, html, mysql

I have three arrays that look like this:

**ingredientQTY** is the first input box in each row, **measurements** is the select/dropdown in each row, and **ingredientsNAME** is the last input box in each row. As you can see, there can be infinite numbers of **ingredientQTY's, ingredientNAME's, and measurements**.

![picture](../Images/2cd10b86d5d4a51aac5d97846427d0e3.png)

When I send them to my php script, the data is in arrays like:

```
IngredientQTY
(
  [0] => 5 //The first row 
  [1] => 5 //The next rows value
)   
Measurements
(
  [0] => Bunch  //The first row
  [1] => Bunch  //The next rows value
)   
IngredientName
(
  [0] => 5   //The first row
  [1] => 5   //The next rows value
) 
```

I'm trying to upload them to a table called ingredients that has 3 columns: `ingredientNAME`, `ingredientQTY`, and `measurements`.

In my php script, I'm combining them into a multidimensional array, which is assigned to `$ingredientsROW`:

```
foreach($_POST as $key => $value) {
      $value = $this->input->post($key);
      $ingredientQTY = $this->input->post('ingredientQTY');
      $measurements = $this->input->post('measurements');
      $ingredientNAME = $this->input->post('ingredientNAME');
      $ingredientsROW[] = array($ingredientQTY, $measurements, $ingredientNAME);
      break;
} 
```

My question is: How can I get group all the first row of form elements (which means the first `ingredientQTY`, the first `measurements` dropdown and the first `ingredientNAME` and insert them into a row?

The only way I could think of is to have one insert where I insert `ingredientQTY`, then look up the id of the row I just inserted and use two mysql updates to enter for the same row, but I'm pretty sure there is more efficient ways of going about this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:19:40.263

Would something like this work?

```
foreach($_POST['IngredientQTY'] as $index=>$qty)
    mysql_query("insert into ingredients ".
                 "set IngredientQTY='".addslashes($qty)."'".
                 ", measurements ='".addslashes($_POST['measurements'][$index])."'".
                 ", ingredientNAME ='".addslashes($_POST['ingredientNAME'][$index])."'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:12:18.163

Iterate through the data and create an array like this:

```
for ($i = 0, $count = count($ingredientQTY); $i < $count; $i++) {
   $rows[] = array(
       'QTY'         => $ingredientQTY[$i],
       'measurement' =>  $measurements[$i],
       'name'        => $ingredientNAME[$i]
   );
} 
```

With this array you can create the insert quite easily and insert whole rows.

# c# - 即使使用 ClipToBounds 和 CornerRadius，边框内容也会转义

> ID：15663538
> 
> 赞同：0
> 
> 时间：2013-03-27T16:04:44.153
> 
> 标签：c#, wpf, xaml, canvas

我有一个位于边框内的自定义控件，边框有一个`CornerRadius`和一个内部阴影，应该创建一个漂亮的外观。在该边框内是一个自定义控件，但该控件似乎忽略了边框半径，并且当控件放置在角落下方时使其看起来是方形的。我怎样才能解决这个问题？

```
<Border Background="#ccc" BorderBrush="Transparent" BorderThickness="1" ClipToBounds="True" CornerRadius="5">
    <Border Background="Transparent" BorderBrush="Gray"  ClipToBounds="True" CornerRadius="5" BorderThickness="1" Margin="0">
        <Grid>
            <Toolkit:CanvasControl HorizontalAlignment="Stretch" VerticalAlignment="Stretch"> 
            <!-- more contents here -->
            </Toolkit:CanvasControl>
        </Grid>
    </Border>
</Border> 
```

被`CanvasControl`定义为

```
public class CanvasControl : Panel
{
} 
```

# c++ - Why isn't object returned by std::move destroyed immediately

> ID：15663539
> 
> 赞同：7
> 
> 时间：2013-03-27T16:04:50.840
> 
> 标签：c++, c++11

I tested the following code:

```
#include <iostream>
using namespace std;
class foo{
public:
    foo()       {cout<<"foo()"<<endl;}
    ~foo()      {cout<<"~foo()"<<endl;}
};

int main()
{
    foo f;
    move(f);
    cout<<"statement \"move(f);\" done."<<endl;
    return 0;
} 
```

The output was:

```
foo()
statement "move(f);" done.
~foo() 
```

**However, I expected**:

```
foo()
~foo()
statement "move(f);" done. 
```

According to the source code of the function move:

```
 template<typename _Tp>
    constexpr typename std::remove_reference<_Tp>::type&&
    move(_Tp&& __t) noexcept
    { return static_cast<typename std::remove_reference<_Tp>::type&&>(__t); } 
```

The returned object is a right value, So Why isn't it destroyed immediately?

-----------------------------------------------------------------
I think I just confused rvalue and rvalue reference.
I modified my code:

```
#include <iostream>

template<typename _Tp>
constexpr typename /**/std::remove_reference<_Tp>::type /* no && */
/**/ mymove /**/ (_Tp&& __t) noexcept
{ return static_cast<typename std::remove_reference<_Tp>::type&&>(__t); }

using namespace std;
class foo{
public:
    foo()       {cout<<"foo() at "<<this<<endl;} /* use address to trace different objects */
    ~foo()      {cout<<"~foo() at "<<this<<endl;} /* use address to trace different objects */
};

int main()
{
    foo f;
    mymove(f);
    cout<<"statement \"mymove(f);\" done."<<endl;
    return 0;
} 
```

And now I get what I've been expecting:

```
foo() at 0x22fefe
~foo() at 0x22feff
statement "mymove(f);" done.
~foo() at 0x22fefe 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T16:20:03.447

Moving from an object doesn't change its lifetime, only its current value. Your object `foo` is destroyed on return from `main`, which is after your output.

Futhermore, `std::move` doesn't move from the object. It just returns an rvalue reference whose referand is the object, making it *possible* to move from the object.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T16:20:45.187

Objects get destroyed when they go out of scope. Moving from an object doesn't change that; depending on what the move constructor or move assignment operator does, the state of the object can be different after the move, but is hasn't yet been destroyed, so the practical rule is that moving from an object **must** leave it in a state that can be destroyed.

Beyond that, as @R.MartinhoFernandes points out, `std::move` doesn't do anything. It's the object's move constructor or move assignment operator that does whatever needs to be done, and that isn't applied in a call to `std::move`; it's applied when the moved-from object is used to construct a new object (move constructor) or is assigned to an existing object (move assignment operator). Like this:

```
foo f;
foo f1(f);            // applies foo's copy constructor
foo f2(std::move(f)); // applies foo's move constructor
foo f3, f4;
f3 = f;               // applies foo's copy assignment operator
f4 = std::move(f1);   // applies foo's move assignment operator 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T16:27:01.733

A `std::move` doesn't change objects lifetime. Roughly speaking it's nothing more than a `static_cast` that casts a non const lvalue to a non const rvalue reference.

The usefulness of this is overload resolution. Indeed, some functions take parameters by const lvalue reference (e.g. copy constructors) and other take by non const rvalue reference (e.g. move constructors). If the passed object is a temporary, then the compiler calls the second overload. The idea is that just after the function is called the a temporary can no longer be used (and will be destroyed). Therefore the second overload could take ownership of the temporary's resources instead of coping them.

However, the compiler will not do it for a non-temporary object (or, to be more correct for an lvalue). The reason is that the passed object has a name that remains in scope and therefore is alive could still be used (as your code demonstrate). So its internal resources might still be required and it would be a problem if they have had been moved to the other object. Nevertheless, you can instruct the compiler that it can call the second overload by using `std::move`. It casts the argument to a rvalue reference and, by overload resolution, the second overload is called.

The slight changed code below illustrate this point.

```
#include <iostream>

using namespace std;

class foo{
public:
    foo()  { cout << "foo()"  << endl; }
    ~foo() { cout << "~foo()" << endl; }
};

void g(const foo&) { cout << "lref" << endl; }
void g(foo&&)      { cout << "rref" << endl; }

int main()
{
    foo f;
    g(f);

    g(move(f));

    // f is still in scope and can be referenced.
    // For instance, we can call g(f) again.
    // Imagine what would happen if f had been destroyed as the question's author
    // originally though?

    g(static_cast<foo&&>(f)); // This is equivalent to the previous line

    cout<<"statement \"move(f);\" done."<<endl;
    return 0;
} 
```

The output is

```
foo()
lref
rref
rref
statement "move(f);" done.
~foo() 
```

**Update:** (After the question has been changed to use `mymove`)

Notice that the new code doesn't give exactly what you said at the very beginning. Indeed it reports two calls to `~foo()` rather than one.

From the displayed addresses we can see that the original object of type `foo`, namely, `f` is destroyed at the very end. Exactly as it used to be with the original code. As many have pointed out, `f` is destroyed only at the end of its scope (the body of function `main`). This is still the case.

The extra call to `~foo()` reported just before the `statement "mymove(f);" done.` destroys another object which is a copy of `f`. If you add a reporting copy constructor to `foo`:

```
foo(const foo& orig) { cout << "copy foo from " << &orig << " to " << this << endl;} 
```

Then you get an output similar to:

```
foo() at 0xa74203de
copy foo from 0xa74203de to 0xa74203df
~foo() at 0xa74203df
statement "move(f);" done.
~foo() at 0xa74203de 
```

We can deduce that calling `mymove` yields a call to the copy constructor to copy `f` to another `foo` object. Then, this newly created object is destroyed before execution reaches the line that displays `statement "move(f);" done.`

The natural question now is *where this copy come from*? Well, notice the return type of `mymove`:

```
constexpr typename /**/std::remove_reference<_Tp>::type /* no && */` 
```

In this example, after a simplification for clarity, this boils down to `foo`. That is, `mymove` returns a `foo` by value. Therefore, a copy is made to create a temporary object. As I said before, a temporary is destroyed just after the expression that creates it finishes to be evaluated (well, there are exceptions to this rule but they don't apply to this code). That explains the extra call to `~foo()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T16:09:15.293

Because in the general case, the move could happen in another translation unit. In your example, the object wasn't even moved, only marked as *movable*. This means that the caller of `std::move` will not know if the object was moved or not, all he knows is, that there is an object and that it has to call the destructor *at the end of the scope/lifetime* of that object. `std::move` only marks the object as *movable*, it does not perform the move operation or create a moved copy that can be further moved or anything like that.

Consider:

```
// translation unit 1
void f( std::vector< int >&& v )
{
  if( v.size() > 8 ) {
    // move it
  }
  else {
    // copy it as it's just a few entries
  }
}

// translation unit 2

void f( std::vector< int >&& );
std::vector< int > g();

int main()
{
  // v is created here
  std::vector< int > v = g();

  // it is maybe moved here
  f( std::move( v ) );

  // here, v still exists as an object
  // when main() ends, it will be destroyed
} 
```

In the example above, how would translation unit 2 decide whether or not to call the destructor after the `std::move`?

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T16:25:06.780

You're getting confused by the name -- `std::move` doesn't actually move anything. It just converts (casts) an lvalue reference into an rvalue reference, and is used to make someone else move something.

Where `std::move` is useful is when you have an overloaded function that takes either an lvalue or an rvalue reference. If you call such a function with a simple variable, overload resolution means you'll call the version with the lvalue reference. You can add an explicit call to `std::move` to instead call the rvalue reference version. No moves involved, except within the function that takes the rvalue reference.

Now the reason it is *called* move is the common usage where you have two constructors, one of which takes an lvalue reference (commonly called the copy constructor) and one that takes an rvalue reference (commonly called the move constructor). In this case, adding an explicit call to `std::move` means you call the move constructor instead of the copy constructor.

In the more general case, it's common practice to have overloaded functions that take lvalue/rvalue references where the lvalue version makes a copy of the object and the rvalue version moves the object (implicitly modifying the source object to take over any memory it uses).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T16:22:05.933

Suppose code like this:

```
void bar(Foo& a) {
  if (a.noLongerneeded())
    lastUnneeded = std::move(a);
} 
```

In this case, the caller of `bar` can not know that the function might in some cases end up calling the destructor of the passed object. It will feel responsible for that object, and make sure to call its destructor at any later point.

So the rule is that `move` may turn a valid object into a different but still valid object. Still valid means that calling methods or the destructor on that object should still yield well-defined results. Strictly speaking, `move` by itself does nothing except tell the receiver of such a reference that it *may* change the object if doing so makes sense. So it's the recipient, e.g. move constructor or move assignment operator, which does the actual moving. These operations will usually either not change the object at all, or set some pointers to `nullptr`, or some lengths to zero or something like that. They will however never call the destructor, since that task is left to the owner of the object.

# javascript - 使用不同的文件扩展名运行 node.js

> ID：15663541
> 
> 赞同：2
> 
> 时间：2013-03-27T16:04:59.037
> 
> 标签：javascript, node.js, file-extension

`.js`是否可以使用与like:不同的扩展名来运行 node.js`node server.type`而不是`node server.js`?

我试过[require.extensions](http://nodejs.org/api/globals.html#globals_require_extensions)

```
require.extensions['.type'] = require.extensions['.js']; 
```

但我收到此错误：

```
Error: /root/project/server.type: invalid ELF header
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Function.Module.runMain (module.js:497:10)
    at startup (node.js:119:16)
    at node.js:901:3 
```

但是我认为这无关紧要，`require`除非我想从 node.js 中要求这些文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:10:26.943

工作得很好：

```
$ echo 'console.log("hello world")' > server.type
$ node server.type
hello world 
```

但我猜你想将它作为可执行文件运行。在这种情况下，请使用以下命令开始您的脚本：

```
#!/usr/bin/env node

# followed by your actual script:
console.log("hello world"); 
```

并使您的脚本可执行：

```
chmod 755 server.type 
```

之后：

```
$ /root/project/server.type
hello world 
```

# msdeploy - 在域用户下运行的 msdeploy 和 AppPool

> ID：15663543
> 
> 赞同：1
> 
> 时间：2013-03-27T16:05:03.593
> 
> 标签：msdeploy, msdeployserviceagent

我正在使用 CompanyApp.deploy.cmd 来远程部署 Web 应用程序包 (/t:Package)。AppPool 在域用户下运行（因为 kerberos），而不是在网络服务帐户下。

我正在使用本地管理员进行部署。

在我们的 CI 服务器上构建时，我调用：

```
CompanyApp.deploy.cmd
  /Y
  /M:IP
  /U:Administrator
  /P:******
  -enableRule:DoNotDeleteRule 
```

发生以下错误：

```
27-Mrz-2013 14:41:28    SetParameters from:
27-Mrz-2013 14:41:28    "C:\b\SH-SDS09-DEP2\CompanyApp\CompanyApp.SetParameters.xml"
27-Mrz-2013 14:41:28    You can change IIS Application Name, Physical path, connectionString
27-Mrz-2013 14:41:28    or other deploy parameters in the above file.
27-Mrz-2013 14:41:28    -------------------------------------------------------
27-Mrz-2013 14:41:28     Start executing msdeploy.exe
27-Mrz-2013 14:41:28    -------------------------------------------------------
27-Mrz-2013 14:41:28     "C:\Program Files (x86)\IIS\Microsoft Web Deploy V3\msdeploy.exe" -source:package='C:\b\SH-SDS09-DEP2\CompanyApp\CompanyApp.zip' -dest:auto,computerName="IP",userName="Administrator",password="********",includeAcls="False" -verb:sync -disableLink:AppPoolExtension -disableLink:ContentExtension -disableLink:CertificateExtension -setParamFile:"C:\b\SH-SDS09-DEP2\CompanyApp\CompanyApp.SetParameters.xml"  -enableRule:DoNotDeleteRule -setParam:...
27-Mrz-2013 14:41:29    Info: Using ID '475e8a8f-94a4-4cda-8e4c-a281bbc75145' for connections to the remote server.
27-Mrz-2013 14:41:29    Info: Adding ACL's for path (Default Web Site/CompanyApp)
27-Mrz-2013 14:41:29    Error: (3/27/2013 2:41:29 PM) An error occurred when the request was processed on the remote computer.
27-Mrz-2013 14:41:29    Error: The account 'COMPANYDOMAIN\service_user' does not appear to be valid. The account was obtained from this location: 'system.applicationHost/applicationPools/CompanyAppPool'.
27-Mrz-2013 14:41:29    Error: Some or all identity references could not be translated.
27-Mrz-2013 14:41:29    Error count: 1. 
```

当 AppPool 在 Network Service Account 下运行时，远程部署成功。

哪个星座可以在这里成功部署？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T19:38:47.053

运行服务的凭据没有对 applicaitonhost.config 的写入权限。您应该授予此用户对 \inetsrv\config 的写入权限

# java - WELD-000315 未能获取对话锁

> ID：15663547
> 
> 赞同：1
> 
> 时间：2013-03-27T16:05:19.760
> 
> 标签：java, jsf, primefaces, weld, jboss-weld

我在 JBoss EAP 6 上使用 PrimeFaces 3.4.2 和 CDI 创建 JSF 2 应用程序。该应用程序有一个部分使用 3 页的长时间运行对话。当用户导航到使用对话的第一个页面时，他们有 2 个指向其他页面的链接。

```
<p:commandLink action="#{event.navigateToIfg()}" >
    <h:outputText value="#{msg.ifg_label}" />      
</p:commandLink>
<p:commandLink action="#{event.navigateToJob()}" >   
        <h:outputText value="#{msg.job_label}"/>        
</p:commandLink> 
```

这两种方法都使用导航规则在页面之间移动。

navigateToIfg() 使用规则：

```
<navigation-rule>
    <from-view-id>/event/event.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>TO_IFG</from-outcome>
            <to-view-id>/event/eventGuideIfg.xhtml?cid=#  {javax.enterprise.context.conversation.id}</to-view-id>
            <redirect />
        </navigation-case>
</navigation-rule> 
```

navigateToJob() 使用规则：

```
<navigation-rule>
    <from-view-id>/event/event.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>TO_JOB</from-outcome>
        <to-view-id>/event/eventGuideJob.xhtml?cid=#{javax.enterprise.context.conversation.id}</to-view-id>
        <redirect />
    </navigation-case>
</navigation-rule> 
```

该应用程序还有一个全局点击 javascript 监听器，它触发 ap:remoteCommand 通知一个 sessionscoped bean 的点击。因此，当用户尝试导航到 IFG 或 JOB 时，也会触发以下操作。

```
<p:remoteCommand id="keepAliveRemoteCommand" name="keepAliveRC" actionListener="#{sessionInfo.keepAlive()}" autoRun="false" update="@none" process="@this" /> 
```

我相信导航和点击监听器一起触发会导致我收到警告：

> WELD-000315 未能在 1,000 中获取会话锁定，用于 id 为 1 的会话

然后在我的应用程序中导致其他异常和失败。最后，问题并不总是一致的，有时它会立即发生，有时它不会使用相同的步骤发生。我需要了解我做错了什么以及如何解决这个问题。

**更新：**
谁能解释这个警告？这是什么意思？具体是怎么引起的？我的 JSF 应用程序似乎无法控制它。在这种情况下，它似乎特定于 Web 应用程序 JBoss EAP 6 (JBoss AS 7.1.3)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T14:29:12.237

在获得有关[WELD-000315 错误](https://community.jboss.org/message/805531#805531)含义的更多信息后，我确定错误的原因是我为用户的每次点击触发了一个全局点击监听器。

单击的 ajax 请求总是将对话 id 附加到请求上，这导致它在另一个请求运行时间超过 1 秒时尝试锁定对话。问题出现在请求时间超过 1 秒的情况下，例如导航到不同的页面或长时间保存请求。为了解决这个问题，我所要做的就是更具体地说明何时触发点击侦听器。

# php - Symfony2.1实体字段类型多扩展不保存

> ID：15663548
> 
> 赞同：1
> 
> 时间：2013-03-27T16:05:20.057
> 
> 标签：php, doctrine-orm, symfony-2.1, symfony-forms

在 Symfony 2.1 中使用实体字段类型时，我在双向关系（一对多）方面遇到了一些问题。在创建子（产品）并选择父（类别）时，一切都是 hunky dory，它按预期创建和持久化。当创建父级（类别）并选择由 Symfony2 的表单系统生成的多个子级（产品）复选框时，就会出现问题。**这不会持续**。

我将把我的示例类放在下面，但是克隆我的示例项目 repo 可能更容易 - [https://github.com/domudall/multiple-expanded-entity-choice-issue](https://github.com/domudall/multiple-expanded-entity-choice-issue)

**类别**

```
class Category
{
    protected $id;
    protected $name;

    /**
     * @ORM\OneToMany(targetEntity="Product", mappedBy="category")
     */
    protected $products;

    public function __construct()
    {
        $this->products = new ArrayCollection();
    }

    public function addProduct($product)
    {
        if (!$this->products->contains($product)) {
            $this->products->add($product);
            $product->setCategory($this);
        }

        return $this;
    }

    public function setProducts($products)
    {
        foreach ($products as $product) {
            $this->addProduct($product);
        }

        return $this;
    }

    public function removeProducts()
    {
        if ($this->products->contains($product)) {
            $this->products->remove($product);
        }

        return $this;
    }
} 
```

**产品**

```
class Product
{
    protected $id;
    protected $name;

    /**
     * @ORM\ManyToOne(targetEntity="Category", inversedBy="products")
     */
    protected $category;

    public function setCategory(Category $category)
    {
        $this->category = $category;
        $category->addProduct($this);

        return $this;
    }

    public function getCategory()
    {
        return $this->category;
    }
} 
```

**默认控制器**

```
class DefaultController extends Controller
{
    public function categoryCreateAction(Request $request)
    {
        $category = new Category();

        $form = $this
            ->createFormBuilder($category)
            ->add('name', 'text', array())
            ->add('products', 'entity', array(
                'class' => 'AcmeShopBundle:Product',
                'property' => 'name',
                'required' => false,
                'expanded' => true,
                'multiple' => true,
            ))
            ->getForm();

        if ($request->getMethod() == 'POST') {
            $this->save($category, $form, $request);
        }
    }

    public function productCreateAction(Request $request)
    {
        $product = new Product();

        $form = $this
            ->createFormBuilder($product)
            ->add('name', 'text')
            ->add('category', 'entity', array(
                'class' => 'AcmeShopBundle:Category',
                'property' => 'name',
                'required' => false,
            ))
            ->getForm();

        if ($request->getMethod() == 'POST') {
            $this->save($product, $form, $request);
        }
    }

    protected function save($entity, $form, $request)
    {
        $form->bind($request);

        if ($form->isValid()) {
            $em = $this->getDoctrine()->getManager();
            $em->persist($entity);
            $em->flush();
        }
    }
} 
```

任何指向我哪里出错的指针将不胜感激。

**笔记**

我不想使用 Doctrine`cascade`选项，而是希望实体中的逻辑与数据库分开进行单元测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:20:25.950

如果您不想级联，则必须手动保留这些实体。

我使用集合的`map()`方法（如下），但您可以使用`foreach`或`array_map`通过集合的`toArray()`方法来完成。

尝试以下控制器代码：

```
protected function saveCategory($category, $form, $request)
{
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();           
        $entity->getProducts()->map(
            function($product) use ($em) {
                $em->persist($product);
            }
        );

        $em->persist($category);
        $em->flush();
    }
} 
```

# php - 如果没有加载配置文件，PHP 在哪里获取其设置？

> ID：15663551
> 
> 赞同：13
> 
> 时间：2013-03-27T01:25:31.327
> 
> 标签：php

我在 RHEL 4 服务器上设置了 PHP 5.3.10。

当我运行`php -i | grep "Loaded"`它返回

`Loaded Configuration File => (none)`

这个设置没问题。PHP 正在按照我们需要的方式工作。我只需要知道，如果没有使用 php.ini，PHP 从哪里获取所有设置？谢谢。

更新：我在点击提交后意识到了这一点。抱歉，如何将其移至 Stack Overflow？-_-

更新 2：结果`php --ini`：

`Configuration File (php.ini) Path: /usr/local/lib Loaded Configuration File: (none) Scan for additional .ini files in: (none) Additional .ini files parsed: (none)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-12T16:04:18.277

如果没有加载 php 配置文件，它只采用默认值。请查看文档以获取默认值列表：

[http://php.net/manual/en/ini.core.php](http://php.net/manual/en/ini.core.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T05:17:24.217

这可能取决于您的服务器设置。

可能（取决于 PHP 版本）从 Apache 配置文件中控制 PHP 配置： [如何更改配置设置](http://php.net/manual/en/configuration.changes.php)

您可以使用 phpinfo() 函数来查看您的 PHP 配置设置（包括配置文件目录）。创建一个名为 info.php 的文件（例如在“DocumentRoot”文件夹中），然后编辑该文件以包含以下代码：

```
<? phpinfo(); ?> 
```

因此，如果您的域是：

```
http://example.com 
```

你的“DocumentRoot”是：

```
".../www" or  ".../public_html" 
```

将文件放在该文件夹中，然后使用浏览器转到：

```
http://example.com/info.php 
```

这应该向您显示所有设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T05:32:52.403

首先你要明白命令行 PHP 使用另一个`php.ini`. Apache（或 NGINX 等）模块使用另一个`php.ini`.

您可以尝试使用更可靠的命令：`php --ini`而不是`php -i`确保它没有加载任何配置。

通常它`php.ini`从`/etc/php5`

如果该命令没有向您显示任何内容，那么您可以尝试`/etc/php5/cli/php.ini`手动添加该文件 ( ) 并检查。

在`RedHat`它可能直接在`/etc/`目录上。

# android - 是否可以在 Gmaps 上打开 kml 文件？

> ID：15663554
> 
> 赞同：1
> 
> 时间：2013-03-27T16:05:36.703
> 
> 标签：android, google-maps, kml

我想知道是否可以从我的应用程序中打开一个 kml 文件。我有 google api 8 并且我实例化了一个对象 GoogleMap

```
GoogleMap = m_gmap
m_gmap.setMyLocationEnabled(true);
m_gmap.getMyLocation();
...and so on. 
```

假设有一种方法可以从我的应用程序中打开文件，我该如何切换 kml 添加的新图层？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T20:06:30.880

这是一个可能对您有帮助的答案的链接，[如何使用 kml 文件在地图上绘制路径？](https://stackoverflow.com/questions/3109158/how-to-draw-a-path-on-a-map-using-kml-file/3109723#3109723) 但据我所知，谷歌响应不再支持 kml 格式，谷歌支持 JSON 和 XML。

# java - Netty 4 Beta 3 问题

> ID：15663556
> 
> 赞同：0
> 
> 时间：2013-03-27T16:05:39.483
> 
> 标签：java, netty

我刚刚开始通过 Netty 4 示例来了解新功能以及如何在应用程序中使用它。我从 Discard Server 教程开始。我编写并运行它并且它有效。我可以通过 telnet 命令进行检查。然而，根据 netty 网站上的内容，我应该能够看到控制台上写的东西。但是，尽管应用程序正在运行，但我看不到这一点。

我也有这个警告消息：警告：您的平台没有提供完整的低级 API 来可靠地访问直接缓冲区。除非明确要求，否则始终首选堆缓冲区以避免出现 OutOfMemoryError 的潜在风险。

这是我写的代码：

```
/**
 * 
 */
package com.smsgh.Discard;

import java.net.InetSocketAddress;

import io.netty.bootstrap.ServerBootstrap;
import io.netty.channel.Channel;
import io.netty.channel.ChannelFuture;
import io.netty.channel.ChannelInitializer;
import io.netty.channel.ChannelOption;
import io.netty.channel.nio.NioEventLoopGroup;
import io.netty.channel.socket.SocketChannel;
import io.netty.channel.socket.nio.NioServerSocketChannel;

/**
 * @author Arsene
 *
 */
public class DiscardServer {

    /**
     * 
     */
    public DiscardServer() {
    }

    public static void main(String[] args){

        // Instance of the Server bootstrap
        ServerBootstrap bootstrap = new ServerBootstrap();

        try{
            // Bootstrap group is used to handle incoming connections and handle the I/O of
            // those connections
            bootstrap.group(new NioEventLoopGroup(), new NioEventLoopGroup());

            // Set the factory
            bootstrap.channel(NioServerSocketChannel.class);

            // Add a child channel handler
            bootstrap.childHandler(new ChannelInitializer<SocketChannel>() {

                @Override
                protected void initChannel(SocketChannel ch) throws Exception {
                    ch.pipeline().addLast(new DiscardServerHandler());
                }
            });

            // add the options
            bootstrap.childOption(ChannelOption.TCP_NODELAY, true);
            bootstrap.childOption(ChannelOption.SO_KEEPALIVE, true);

            ChannelFuture future = bootstrap.bind(new InetSocketAddress(8889)).sync();
            future.channel().closeFuture().sync();
        }
        catch(Exception ex){
            ex.printStackTrace();
        }
        finally{
            bootstrap.shutdown();
        }
    }
} 
```

这是服务器处理程序代码：

```
/**
 * 
 */
package com.smsgh.Discard;

import io.netty.buffer.ByteBuf;
import io.netty.channel.ChannelHandlerContext;
import io.netty.channel.ChannelInboundByteHandlerAdapter;

/**
 * @author Arsene
 * 
 */
public class DiscardServerHandler extends ChannelInboundByteHandlerAdapter {

    /**
     * 
     */
    public DiscardServerHandler() {
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * io.netty.channel.ChannelInboundByteHandlerAdapter#inboundBufferUpdated
     * (io.netty.channel.ChannelHandlerContext, io.netty.buffer.ByteBuf)
     */
    @Override
    protected void inboundBufferUpdated(ChannelHandlerContext ctx, ByteBuf in)
            throws Exception {

        // Here we manipulate the data received
        while(in.isReadable()){
            System.out.println((char)in.readByte());
            System.out.flush();
        }
        in.clear();
    }

    @Override
    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {
        cause.printStackTrace();
        ctx.close();
    }
} 
```

谁能告诉我出了什么问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:24:53.920

我看到了这个问题。我没有为管道中的消息添加任何编码器或解码器。

# database - 非规范化会变得低效吗？

> ID：15663559
> 
> 赞同：0
> 
> 时间：2013-03-27T16:05:45.393
> 
> 标签：database, denormalization, query-performance

我们有一个非规范化的表，因为对于我们用户的数据量来说，连接速度太慢的风险很大。所以我们创建了 10 列信息（INFO0、INFO1...INFO9）。大多数时候，只使用 2-3 第一列，其他为空。

但现在，我们需要再添加两种类型的信息，每列 10 列（总共 20 列）。棘手的部分是，我们的设计将使用户无法使用所有 30 个非规范化列。在任何时候，他们总是能够在每行上使用最多 10 个。此外，我们可能需要添加更多新的非规范化列，但我们永远无法在每行上使用超过 10 个。

我知道这不是一个好的设计，但我们真的别无选择。所以我的问题是：这种设计会变得低效吗？有很多具有空值的列会减慢我的查询速度吗？如果是的话，它会成为一件大事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:30:36.463

是的，它可以。你没有说你正在使用什么数据库或者额外的列是什么数据类型，但是添加更多的列会增加你的表的“宽度”，这意味着需要更多的逻辑读取来检索相同数量的记录，更多的读取等于更慢的速度。因此，通过非规范化获得的结果可能最终会因添加太多列而丢失，但这程度取决于您的数据库设计。

如果它确实影响性能，则中间解决方案可能是垂直拆分表，将不经常引用的列放置在第二个表中。

# nsis - 如何比较 NSIS 中的两个文件？

> ID：15663561
> 
> 赞同：0
> 
> 时间：2013-03-27T16:05:56.017
> 
> 标签：nsis

我使用 nsis 创建了 exe。我使用以下代码来比较两个文件。

```
Function compare 
   IfFileExists "$INSTDIR\old.properties" 0 filenotfound
    FileOpen $0 "$INSTDIR\old.properties" "r"
    FileOpen $1 "$INSTDIR\new.properties" "w"                     
    loop:
        FileRead $0 $2        
        MessageBox MB_OK "old $2" 
        FileRead $1 $3
        MessageBox MB_OK "new $3"                
        IfErrors done                          
        strcmp $3 $2 loop here
        here:                                  
           FileWrite $1 $2                     
           Goto loop
    done:
        FileClose $0                                    
        FileClose $1

     filenotfound:
     MessageBox MB_OK "File not found"
FunctionEnd 
```

读取旧属性的第一个文本比较新属性的第一个文本如果匹配转到两个文件的下一个单词。否则旧属性值应在新属性文件中替换。但如果字符串不匹配替换新属性文件中的字符串不发生。如何解决这个问题？我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:40:57.013

`FileOpen $1 "$INSTDIR\new.properties" "w"`将擦除 new.properties 中的所有内容，`"a"`如果您想保留其内容，请使用。

我并不完全理解您要做什么，因为“比较文件”通常意味着只读操作，您也在编写，但您似乎并没有真正用新的不同行替换特定的旧行.. .

# spring - Spring Security 不拦截请求

> ID：15663566
> 
> 赞同：0
> 
> 时间：2013-03-27T16:06:10.863
> 
> 标签：spring, spring-mvc, spring-security

我正在尝试做一个基本的弹簧安全 D/B 身份验证程序。我通过两种方式进行了尝试，即

方法 1：使用自定义表进行 Spring Security 身份验证。
方法2：使用Spring security特定的数据库表进行用户认证和授权。

文件位置：
1\. index.jsp -> webapp/index.jsp
2\. welcome.jsp -> webapp/pages/welcome.jsp
3\. login.jsp -> webapp/pages/login.jsp

对于方法 1，Spring security 没有拦截请求，我没有在控制台中看到错误。我没有拦截请求，而是直接带到了 welcome.jsp。

PS - 因为我没有尝试授权，所以我没有在安全上下文 xml 中使用下面的“authorities-by-username-query”属性。我不确定是否也必须创建一个授权表。

下面是我的security-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
     <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:security="http://www.springframework.org/schema/security"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/security
      http://www.springframework.org/schema/security/spring-security-3.1.xsd
      http://www.springframework.org/schema/tx 
      http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">

<security:http auto-config="true">
    <security:intercept-url pattern="/welcome.html" />
    <security:form-login login-page="/login.html"
        default-target-url="/welcome.html" authentication-failure-url="/loginfailed.html" />
    <security:logout logout-success-url="/logout.html" />
</security:http>

<security:authentication-manager>
    <security:authentication-provider>
        <security:jdbc-user-service data-source-ref="dataSource"
         users-by-username-query="select FIRST_NAME,LAST_NAME,PASSWORD from USER_AUTHENTICATION where FIRST_NAME=?" />
    </security:authentication-provider>
</security:authentication-manager> 
```

网页.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-  app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee   http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
 <display-name>SpringPOC</display-name>
 <servlet>
<servlet-name>spring</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>spring</servlet-name>
<url-pattern>*.html</url-pattern>
</servlet-mapping>
<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>
        /WEB-INF/applicationContextDirect.xml
        /WEB-INF/applicationContext-security.xml
    </param-value>
</context-param>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
  <filter-name>springSecurityFilterChain</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping>
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

基本控制器

```
//@RequestMapping(value="/login", method = RequestMethod.GET)
@RequestMapping("/login")
public ModelAndView login(Model model) {
    //System.out.println("Inside /login...");
    return new ModelAndView("login");
}
/*public String login(ModelMap model) {

    System.out.println("Inside /login...");
    return "login";

}*/

@RequestMapping(value="/loginfailed", method = RequestMethod.GET)
public String loginerror(ModelMap model) {

    model.addAttribute("error", "true");
    return "login";

}

@RequestMapping(value="/logout", method = RequestMethod.GET)
public String logout(ModelMap model) {

    return "login";

} 
```

登录.jsp

```
 <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
          <html>
         <head>
         <title>Login Page</title>
         <style>
         .errorblock {
    color: #ff0000;
    background-color: #ffEEEE;
    border: 3px solid #ff0000;
    padding: 8px;
    margin: 16px;
     }
     </style>
     </head>
     <body onload='document.f.j_username.focus();'>
    <h3>Login with Username and Password (Authentication with Database)</h3>

    <c:if test="${not empty error}">
        <div class="errorblock">
            Your login attempt was not successful, try again.<br /> Caused :
            ${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message}
        </div>
    </c:if>

    <form name='f' action="<c:url value='j_spring_security_check' />"
        method='POST'>

        <table>
            <tr>
                <td>User:</td>
                <td><input type='text' name='j_username' value=''>
                </td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type='password' name='j_password' />
                </td>
            </tr>
            <tr>
                <td colspan='2'><input name="submit" type="submit"
                    value="submit" />
                </td>
            </tr>
            <tr>
                <td colspan='2'><input name="reset" type="reset" />
                </td>
            </tr>
        </table>

    </form> 
```

索引.jsp

```
 <body>
    <div id="content">
   <h1>Home Page</h1>
   <p>
   Anyone can view this page.
   </p>
   <p><a href="welcome.html">Login page</a></p>
   </div>
   </body> 
```

对于方法 2，我按照以下链接创建了名为“USERS”和“AUTHORITIES”的 spring 特定数据库表。这里的 SQL 查询没有在 xml 中使用，如下所示。

```
 http://www.raistudies.com/spring-security-tutorial/authentication-authorization-spring-security-mysql-database/ 
```

除了 security-context.xml 之外，一切都保持不变。

```
 <?xml version="1.0" encoding="UTF-8"?>
  <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"         xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:security="http://www.springframework.org/schema/security"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
      http://www.springframework.org/schema/security
      http://www.springframework.org/schema/security/spring-security-3.1.xsd
      http://www.springframework.org/schema/tx 
      http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">

<security:http realm="Project Realm" auto-config="true">
    <security:intercept-url pattern="/welcome.html" access="ROLE_USER"/>
    <security:form-login login-page="/login.html"
        default-target-url="/welcome.html" authentication-failure-url="/loginfailed.html" />
    <security:logout logout-success-url="/logout.html" />   
</security:http>

<security:authentication-manager>
    <security:authentication-provider>
    <security:password-encoder hash="md5"/>
    <security:jdbc-user-service data-source-ref="dataSource"/>
    </security:authentication-provider>
</security:authentication-manager>
    </beans> 
```

当我尝试上述方式时，即使我输入了正确的用户名和密码，我也会收到“错误凭据”消息[但是是的，在这种情况下，spring security 正在拦截请求]。我正在使用 Oracle 数据库。

[更新]：我启用了 spring 调试日志来查找两种方法中错误的根本原因。我无法从日志中弄清楚或理解到底出了什么问题，所以我比较了尝试这两种方法后得到的日志。因为，对于方法 1，Spring 安全性没有拦截请求，而对于方法 2，我能够登录（Spring 安全性是至少拦截请求）但即使在输入正确的用户名和密码后我也收到了“错误的凭据”消息。

下面是方法 2 的代码片段[这里我得到登录页面，但身份验证失败]

```
 firing Filter: 'FilterSecurityInterceptor'
        DEBUG: org.springframework.security.web.util.AntPathRequestMatcher - Checking match of request : '/welcome.html'; against 

        '/welcome.html'
        DEBUG: org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Secure object: FilterInvocation: URL: 

        /welcome.html; Attributes: [ROLE_USER]
        DEBUG: org.springframework.security.web.access.intercept.FilterSecurityInterceptor - Previously Authenticated: 

        org.springframework.security.authentication.AnonymousAuthenticationToken@9055c2bc: Principal: anonymousUser; Credentials: 

        [PROTECTED]; Authenticated: true; Details: org.springframework.security.web.authentication.WebAuthenticationDetails@b364: 

        RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: null; Granted Authorities: ROLE_ANONYMOUS
        DEBUG: org.springframework.security.access.vote.AffirmativeBased - Voter: 

        org.springframework.security.access.vote.RoleVoter@19432e0, returned: -1
        DEBUG: org.springframework.security.access.vote.AffirmativeBased - Voter: 

        org.springframework.security.access.vote.AuthenticatedVoter@9830bc, returned: 0
        DEBUG: org.springframework.security.web.access.ExceptionTranslationFilter - Access is denied (user is anonymous); 

        redirecting to authentication entry point
        org.springframework.security.access.AccessDeniedException: Access is denied
            at org.springframework.security.access.vote.AffirmativeBased.decide(AffirmativeBased.java:83)
            at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation

        (AbstractSecurityInterceptor.java:206)
            at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke

        (FilterSecurityInterceptor.java:115)
            at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter

        (FilterSecurityInterceptor.java:84)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
            at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
            at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
            at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter

        (AnonymousAuthenticationFilter.java:113)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
            at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter

        (SecurityContextHolderAwareRequestFilter.java:54)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
            at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
            at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter

        (BasicAuthenticationFilter.java:150)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
            at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter

        (AbstractAuthenticationProcessingFilter.java:183)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
            at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
            at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter

        (SecurityContextPersistenceFilter.java:87)
            at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
            at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
            at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
            at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
            at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
            at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
            at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
            at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
            at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
            at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
            at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
            at java.lang.Thread.run(Thread.java:662)
        DEBUG: org.springframework.security.web.savedrequest.HttpSessionRequestCache - DefaultSavedRequest added to Session: 

        DefaultSavedRequest[http://localhost:8080/itrade-web/welcome.html]
        DEBUG: org.springframework.security.web.access.ExceptionTranslationFilter - Calling Authentication entry point.
        DEBUG: org.springframework.security.web.DefaultRedirectStrategy - Redirecting to 'http://localhost:8080/itrade-

        web/login.html;jsessionid=3FD72892F4F4EF2E65B0C90ABE115354'
        DEBUG: org.springframework.security.web.context.HttpSessionSecurityContextRepository - SecurityContext is empty or contents 

        are anonymous - context will not be stored in HttpSession.
        DEBUG: org.springframework.security.web.context.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as 

        request processing completed
        DEBUG: org.springframework.security.web.FilterChainProxy - /login.html at position 1 of 10 in additional filter chain; 

        firing Filter: 'SecurityContextPersistenceFilter'
        DEBUG: org.springframework.security.web.context.HttpSessionSecurityContextRepository - HttpSession returned null object for SPRING_SECURITY_CONTEXT
        firing Filter: 'UsernamePasswordAuthenticationFilter'
        ...
        DEBUG: org.springframework.security.web.FilterChainProxy - /login.html at position 7 of 10 in additional filter chain; 

        firing Filter: 'AnonymousAuthenticationFilter'
        DEBUG: org.springframework.security.web.authentication.AnonymousAuthenticationFilter - Populated SecurityContextHolder with 

        anonymous token: 'org.springframework.security.authentication.AnonymousAuthenticationToken@6fa8940c: Principal: 

        anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: 

        org.springframework.security.web.authentication.WebAuthenticationDetails@fffde5d4: RemoteIpAddress: 0:0:0:0:0:0:0:1; 

        SessionId: 3FD72892F4F4EF2E65B0C90ABE115354; Granted Authorities: ROLE_ANONYMOUS'
                    ...
        DEBUG: org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter - Request is to process 

        authentication
        DEBUG: org.springframework.security.authentication.ProviderManager - Authentication attempt using 

        org.springframework.security.authentication.dao.DaoAuthenticationProvider
        DEBUG: org.springframework.security.provisioning.JdbcUserDetailsManager - Query returned no results for user 'admin'
        DEBUG: org.springframework.security.authentication.dao.DaoAuthenticationProvider - User 'admin' not found
        DEBUG: org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter - Authentication request 

        failed: org.springframework.security.authentication.BadCredentialsException: Bad credentials
        DEBUG: org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter - Updated SecurityContextHolder 

        to contain null Authentication
        DEBUG: org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter - Delegating to authentication 

        failure handler org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler@1882c1a
        DEBUG: org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler - Redirecting to 

        /loginfailed.html
        DEBUG: org.springframework.security.web.DefaultRedirectStrategy - Redirecting to '/itrade-web/loginfailed.html'
        DEBUG: org.springframework.security.web.context.HttpSessionSecurityContextRepository - SecurityContext is empty or contents 

        are anonymous - context will not be stored in HttpSession.
        DEBUG: org.springframework.security.web.context.SecurityContextPersistenceFilter - SecurityContextHolder now cleared, as 

        request processing completed 
```

[更新] 对于方法 1，我在为“授权”创建自定义表后添加了“权限-用户名-查询”标签。现在我正在登录屏幕，所以我知道为了让 spring security 拦截我需要有'authorities-by-username-query'标签。但是在输入用户名和密码后，我收到以下错误消息：

```
 Caused : PreparedStatementCallback; uncategorized SQLException for SQL [select          FIRST_NAME,LAST_NAME,PASSWORD from USER_AUTHENTICATION where FIRST_NAME=?]; SQL state   [null]; error code [17059]; Fail to convert to internal representation; nested exception is   java.sql.SQLException: Fail to convert to internal representation 
```

我在调试模式下看到以下几行：

```
 DEBUG: org.springframework.security.authentication.ProviderManager - Authentication attempt using org.springframework.security.authentication.dao.DaoAuthenticationProvider
        INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
        DEBUG: org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter - Authentication request failed: org.springframework.security.authentication.AuthenticationServiceException: PreparedStatementCallback; uncategorized SQLException for SQL [select FIRST_NAME,LAST_NAME,PASSWORD from USER_AUTHENTICATION where FIRST_NAME=?]; SQL state [null]; error code [17059]; Fail to convert to internal representation; nested exception is java.sql.SQLException: Fail to convert to internal representation
        DEBUG: org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter - Updated SecurityContextHolder to contain null Authentication
        DEBUG: org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter - Delegating to authentication failure handler org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler@e7736c
        DEBUG: org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler - Redirecting to /loginfailed.html
        DEBUG: org.springframework.security.web.DefaultRedirectStrategy - Redirecting to '/itrade-web/loginfailed.html' 
```

[更新]：现在对于这两种方法，尽管我输入了正确的用户名和密码，但我都遇到了同样的错误。此外，由于我可以从 D/B 获取数据，我确信我不会因为数据不存在而出错在 D/B。

```
 DEBUG: org.springframework.security.provisioning.JdbcUserDetailsManager - Query returned no results for user 'user' 
```

我觉得这个错误背后应该有任何其他原因。

[编辑] 现在我在 D/B 中关注 'users_detail' 表：

USER_ID 整数

用户名 VARCHAR2（50 字节）

密码 VARCHAR2（50 字节）

启用整数

“users_detail”表中的数据：

USER_ID 用户名密码已启用

100 个用户 123456 1

我的查询在 security-context.xml 中：

```
 "select username,password, enabled from users_detail where username=?" 
```

当我手动执行查询时，即选择用户名，密码，从users_detail 启用，其中用户名='user'。我得到了结果集。

我哪里错了？为什么 JdbcUserDetailsManager 类总是返回 'Query returned no results for user 'user' ' 即使在 D/B 中有相同的条目。

当我收到上述错误时，调试模式不显示正在执行 JdbcUserDetailsManager 类的哪个方法。我怎么知道？另外，spring 在保存密码字段的同时是否在内部做任何加密/解密技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:45:50.213

使用默认模式时，日志消息“未找到用户 'admin'”似乎很明显是身份验证失败的原因。为什么不手动执行命令并查看它是否返回用户数据？

此外，是否显示登录屏幕并不取决于您是否设置了“'authorities-by-username-query”。它仅取决于`intercept-url`您请求的 URL 是否适用于哪些值。唯一的例外是，如果您自定义了拒绝访问行为（对于权限不足的经过身份验证的用户）以显示登录页面（此处不是这种情况）。

您的 SQL 异常可能是由于您的自定义表具有错误的列类型。您最终需要得到与从标准模式获得的结果集兼容的东西。除非您有充分的理由不这样做，否则最好坚持使用默认设置。

更好的是，在您掌握使用 HSQLDB 等简单测试数据库的基础知识之前，请完全忘记 Oracle。

# c# - C# - 从 DataTable 中删除具有相同列值的行

> ID：15663569
> 
> 赞同：3
> 
> 时间：2013-03-27T16:06:22.120
> 
> 标签：c#, linq, datatable, filtering

我有一个`DataTable`看起来像这样的：

```
 ID   Name    DateBirth
.......................
 1     aa      1.1.11
 2     bb      2.3.11
 2     cc      1.2.12
 3     cd      2.3.12 
```

这是删除具有相同 ID 的行的最快方法，以获得类似的结果（保留第一次出现，删除下一​​个）：

```
 ID   Name    DateBirth
.......................
 1     aa      1.1.11
 2     bb      2.3.11
 3     cd      2.3.12 
```

我不想双重传递表格行，因为行号很大。如果可能的话，我想使用一些 LinQ，但我想这将是一个大查询，我必须使用比较器。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T16:11:22.630

您可以使用 LINQ to DataTable，根据列进行区分`ID`，您可以按此列*分组*，然后先*选择*：

```
 var result = dt.AsEnumerable()
                 .GroupBy(r => r.Field<int>("ID"))
                 .Select(g => g.First())
                 .CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-24T13:28:41.850

我正在解决同样的情况，发现它很有趣，并想分享我的发现。

1.  如果要基于**ALL COLUMNS**来区分行。

```
DataTable newDatatable = dt.DefaultView.ToTable(true, "ID", "Name", "DateBirth"); 
```

您在此处提到的列，只有那些将返回`newDatatable`.

2.  如果基于一列的不同且列类型为**int**，那么我更喜欢`LINQ`查询。

```
 DataTable newDatatable = dt.AsEnumerable()
                           .GroupBy(dr => dr.Field<int>("ID"))
                           .Select(dg => dg).Take(1)
                           .CopyToDataTable(); 
```

3.  如果基于一列的不同且列类型是**字符串**，那么我更喜欢循环。

```
List<string> toExclude = new List<string>();
for (int i = 0; i < dt.Rows.Count; i++)
{
    var idValue = (string)dt.Rows[i]["ID"];
    if (toExclude.Contains(idValue))
    {
        dt.Rows.Remove(dt.Rows[i]);
        i--;
    }
    toExclude.Add(glAccount);
} 
```

第三个是我最喜欢的。

我可能已经回答了一些问题中没有提出的问题。它的意图很好，也没有什么兴奋。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T16:10:24.643

你可以试试这个

```
DataTable uniqueCols = dt.DefaultView.ToTable(true, "ID"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T16:12:50.650

不一定是最有效的方法，但也许是最易读的：

```
table = table.AsEnumerable()
    .GroupBy(row => row.Field<int>("ID"))
    .Select(rowGroup => rowGroup.First())
    .CopyToDataTable(); 
```

Linq 也更强大。例如，如果您想更改逻辑并且不选择每个 id-group 的第一（任意）行，而是根据`DateBirth`：

```
table = table.AsEnumerable()
    .GroupBy(row => row.Field<int>("ID"))
    .Select(rowGroup => rowGroup
                          .OrderByDescending(r => r.Field<DateTime>("DateBirth"))
                          .First())
    .CopyToDataTable(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-27T16:37:03.923

1.  获取每个记录数`ID`

```
var rowsToDelete = 
    (from row in dataTable.AsEnumerable()
    group row by row.ID into g
    where g.Count() > 1 
```

2.  确定要保留的记录（不知道您的标准；然后我将按 DoB 排序`Name`并保留第一条记录）并选择其余记录

```
select g.OrderBy( dr => dr.Field<DateTime>( "DateBirth" ) ).ThenBy( dr => dr.Field<string>( "Name" ) ).Skip(1)) 
```

3.  展平

```
.SelectMany( g => g ); 
```

4.  删除行

```
rowsToDelete.ForEach( dr => dr.Delete() ); 
```

5.  接受更改

```
dataTable.AcceptChanges(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-10T07:18:54.327

这是实现这一点的一种方法，所有你需要使用[moreLinq](https://code.google.com/p/morelinq/)库使用它的功能`DistinctBy`

**代码：**

```
protected void Page_Load(object sender, EventArgs e)
{
  var DistinctByIdColumn = getDT2().AsEnumerable()
                                   .DistinctBy(
                                   row => new { Id = row["Id"] });
  DataTable dtDistinctByIdColumn = DistinctByIdColumn.CopyToDataTable();
}

public DataTable getDT2()
{
   DataTable dt = new DataTable();
   dt.Columns.Add("Id", typeof(string));
   dt.Columns.Add("Name", typeof(string));
   dt.Columns.Add("Dob", typeof(string));
   dt.Rows.Add("1", "aa","1.1.11");
   dt.Rows.Add("2", "bb","2.3.11");
   dt.Rows.Add("2", "cc","1.2.12");
   dt.Rows.Add("3", "cd","2.3.12");
   return dt;
} 
```

**输出：**如你所料

![在此处输入图像描述](../Images/1b4ce154b0a2a136913fd4c77b894808.png)

[**更多Linq示例代码查看我的博客**](http://satindersinght.blogspot.in/2013/04/morelinq-distinctby-how-to-remove.html)

# c++ - Jenkins 是否适合在较小的项目中使用？

> ID：15663570
> 
> 赞同：2
> 
> 时间：2013-03-27T16:06:22.693
> 
> 标签：c++, jenkins, continuous-integration

嗨，我正在研究 Jenkins 持续集成工具，需要找到它的优势。作为初学者，我已经探索过它有助于在开发大功能项目的早期阶段捕获错误。它将在一段时间后构建，并且会通知相关开发商。

我必须开发一个 c++ 应用程序并且必须决定是否使用 jenkins？假设我们有一个简短的功能而不是一个非常大的任务，在那里使用 jenkins 会有好处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:16:36.617

即使在一个小项目上（即使只有一个开发人员），设置 CI 工作也有好处（并非详尽无遗）：

1.  设置 CI 作业时，开发人员需要确保构建合理且测试策略可用
2.  如果设计是模块化的，如果源代码控制使用不正确或依赖关系设置不正确，CI 作业可能会失败 - 您需要尽快知道这一点
3.  随着应用程序的增长，您将已经有了 CI 来协助开发工作
4.  如果有人推送失败的构建或测试，您将尽早知道

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:16:24.873

如果其他开发人员将使用该代码，那么拥有一台单独的干净机器进行构建总是有用的。这可以确保您将所有必要的文件签入源代码控制，并且该项目不依赖于您的开发机器上的某些独特配置。

如果只是你在处理代码，我仍然会编写某种构建脚本，但跳过 Jenkins 设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:15:01.417

一个优点是开发和自动化测试的分离。尤其是在单开发者项目中，但在多开发者项目中也有私有分支，只要您认为可能没问题就能够推送新版本，然后继续编码，这让 IMO 松了一口气。CI 系统将同时工作，通过构建它来验证提交、运行单元测试、部署和/或创建相关的安装包等。

绝对值得。甚至不需要单独的构建服务器，您可以在工作站上运行它。只需安装，打开 Web UI，创建检查源代码并运行构建命令的作业，看看它是如何进行的。

# java - Java - Upload file using POST to URL then retrieve response

> ID：15663586
> 
> 赞同：0
> 
> 时间：2013-03-27T16:06:54.230
> 
> 标签：java, http, url, post

I want to upload a file (GPX file, which is similar to XML) to a URL ([http://www.gpsvisualizer.com/map_input](http://www.gpsvisualizer.com/map_input)). Then wait for the map to be generated and retrieve it. The developer has stated this is possible, but I am not getting anywhere. Here is my code so far:

```
private static void postData(File fileName) {
    File input = fileName;

    //Setup connection
    URL url = new URL("http://www.gpsvisualizer.com/map");
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setDoOutput(true);
    connection.setInstanceFollowRedirects(false);
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Content-Type", "application/xml");
    connection.setRequestProperty("User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; .NET CLR 1.2.30703)");

    //Send file
    OutputStream os = connection.getOutputStream();
    TransformerFactory tf = TransformerFactory.newInstance();
    Transformer transformer = tf.newTransformer();
    FileReader fileReader = new FileReader(input);
    StreamSource source = new StreamSource(fileReader);
    StreamResult result = new StreamResult(os);
    transformer.transform(source, result);
    os.flush();

    //Retrieve response
    BufferedReader br = new BufferedReader(  
    new InputStreamReader(connection.getInputStream()));  
    String line = br.readLine();  
    while ( line != null ) {  
        System.out.println(line);  
        line = br.readLine();  
    }  
    br.close();
} 
```

All this is doing, is setting up the connection, when I get the response, I am only getting the HTML of the initial page, not the (should be) map one.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T15:18:27.287

I realised I was almost doing this correctly. After speaking to the developer of the website, I realised I could send the GPX file as a String. (This is very simple) I then put this String into parameters which worked a treat!

```
String data = URLEncoder.encode("data", "UTF-8") + "=" + URLEncoder.encode("convertedGPX", "UTF-8");

OutputStreamWriter wr = new OutputStreamWriter(conn.getOutputStream());
wr.write(data);
wr.flush(); 
```

# gitolite - gitweb 404 - gitolite-admin 推送时未找到项目

> ID：15663589
> 
> 赞同：2
> 
> 时间：2013-03-27T16:07:00.157
> 
> 标签：gitolite, gitweb

语境：

*   gitolite (v3.5-0-g4071623) 已安装；
*   安装了 gitweb；
*   gitolite 和 gitweb 工作正常，直到我添加一个新的存储库`gitolite-admin`并推送更改
    *   gitweb 用户：`www-data`
    *   gitolite用户：`git`

和：

```
usermod -a -G git www-data
usermode -a -G www-data git 
```

当我添加一个新的存储库时，gitolite 将权限更改`projects.list`为`-rw-------`（用户：读写）

为了让 gitweb 使用`projects.list`文件工作，权限应该至少是 `-rw-r-----`（用户：读写；组：读取）

当我手动设置文件的权限时：

```
chmod g+r projects.list 
```

, gitweb 又开始工作了。

文件`.gitolite.rc`包含`UMASK => 0027`.

问题：

**执行推送时如何使 gitolite 设置权限`-wr-r-----`(u:rw g:r)`projects.list`归档`gitolite-admin`？**

# c# - 实现上的单元测试接口

> ID：15663593
> 
> 赞同：2
> 
> 时间：2013-03-27T16:07:11.503
> 
> 标签：c#, testing, logging, interface

我有一个用于获取一些数据的 MVC 控制器的接口。为了简单起见，到目前为止的界面看起来像这样：

```
public interface IDataProvider
{
    DataModel GetData();
} 
```

我对此接口进行了适当的单元测试，该接口在操作中被调用。但是，在实际实现中，这将调用一个 Web 服务，当然这可能会引发异常，因此，如果它确实发生了，我想编写一个测试以确保在发生错误时记录一条消息。

为此，我有一个记录器接口，它实际上是一个名为 ILogger 的 NLog 接口。我可以这样做：

```
public interface IDataProvider
{
    DataModel GetData(ILogger logger);
} 
```

这将允许我为记录器运行单元测试，使其变得简单易用。但是，我认为这不是正确的方法，因为记录器实际上与此方法无关。此外，如果我开始向此接口添加其他需要记录的方法，那么我也必须将记录器包含在所有这些方法的参数中。

我现在能想到的最好方法是将记录器包含在我的实现的构造函数中，它可能看起来像这样：

```
public class DataProvider : IDataProvider
{
    private readonly ILogger _logger;

    public DataProvider(ILogger logger)
    {
        _logger = logger;
    }

    public DataModel GetData()
    {
        // CODE GOES HERE
    }
} 
```

但是，这意味着我无法在单元测试中测试记录器。实现此目的的最佳方法是什么，以便我可以将记录器与方法分开并使其可测试？

我会很感激任何帮助，谢谢。

编辑：

我意识到我错过了单元测试代码，这就是我的意思：

目前，我确保在我的操作中以这种方式调用 GetData：

```
var controller = new DataController(_dataProvider.Object);

controller.Index();

_dataProvider.Verify(dataProvider => dataProvider.GetData()); 
```

我想做的是相同的，但对于记录器，但前提是抛出这样的异常：

```
_dataProvider.Setup(dataProvider => dataProvider.GetData()).Throws<WebException>();

var controller = new DataController(_dataProvider.Object);

controller.Index();

_logger.Verify(logger => logger.ErrorException(It.IsAny<string>(), It.IsAny<Exception>()); 
```

显然记录器将在设置中提供给数据提供者。我希望这更有意义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T16:14:11.317

您可以尝试使用工厂模式。

这里发生的是在您的生产代码中，您从**Factory**获取记录器。在这个工厂中，它要么返回你的真实记录器，要么返回一个在你的单元测试中设置的**假记录器。**对于您的生产代码，它没有任何区别。

在您的单元测试中，您使用的是使用[Moq](https://code.google.com/p/moq/)创建的假记录器。在这种情况下，这个假使您可以测试是否调用了接口方法`ILogger.Log()`。这是通过使用`.Verify`方法完成的。

尝试这样的事情：

**ILogger.cs**

```
public interface ILogger
{
    void Log(string message);
} 
```

**记录器工厂.cs**

```
public static class LoggerFactory
{
    public static ILogger Logger
    {
        get
        {
            return LoggerFactory._logger == null ? new Logger() : LoggerFactory._logger;
        }
        set
        {
            LoggerFactory._logger = value;
        }
    }
    private static ILogger _logger = null;
} 
```

**数据提供者.cs**

```
public void GetData()
{
    var logger = LoggerFactory.Logger;

    logger.Log("..."); // etc...
} 
```

**单元测试.cs**

```
private void Mock<ILogger> _mockLogger = null;

public void Load()
{
    this._mockLogger = new Mock<ILogger>();

    LoggerFactory.Logger = _mockLogger.Object;
}

public void UnitTest()
{
    // test as required

    this._mockLogger.Verify(m => m.Log(It.IsAny<string>()));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:11:04.603

如果您需要测试记录器是否被调用，我建议使用称为“间谍”的测试替身。这不会进行任何日志记录，但会跟踪调用了哪些方法（如果有）。然后您可以验证记录器是否在特定实例中被调用。

您可以通过使用模拟框架为您创建双重（或模拟）来做到这一点。或者您可以`ILogger`自己创建实现。例如：

```
class LoggerSpy : ILogger
{
    public string LogWasCalled;

    public void Log(string message)
    {
        LogWasCalled = true;;
    }
} 
```

以下似乎有一个使用 Moq 模拟 ILogger 的示例：[How to Mock ILogger / ILoggerService using Moq](https://stackoverflow.com/questions/9785539/how-to-mock-ilogger-iloggerservice-using-moq)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T16:11:08.283

使用模拟框架（例如 Moq 或 RhinoMocks）来验证记录器是否被调用。然后，您发布的最终代码块（通过构造函数传入记录器）将起作用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T16:17:46.360

在构造函数中传递记录器（或任何其他依赖项）是非常标准的做法，并允许您在需要时使用依赖注入框架。

我不确定为什么您将在构造函数中传递记录器视为单元测试的限制：您有 3 个可以单独测试的组件

*   控制器（取决于提供的数据，模拟此依赖项进行测试），
*   数据提供者（取决于日志记录和其他一些让您调用 Web 服务的类 - 模拟所有依赖项，以便您知道何时调用日志记录并且无需调用 Web 服务）
*   日志记录 - 不确定它依赖于什么，但应该可以单独测试。

笔记：

*   使用模拟框架（即[moq](http://code.google.com/p/moq/)）进行测试 - 您将能够非常轻松地提供接口的任何实现（包括异常）。
*   看看依赖注入框架（即[Unity](http://msdn.microsoft.com/en-us/library/ff647202.aspx)）是否适合您。MVC4 非常适合它。

# java - 比较具有相同结构但在 Windows 操作系统中不完全相同的窗口标题

> ID：15663595
> 
> 赞同：0
> 
> 时间：2013-03-27T16:07:15.573
> 
> 标签：java, string, windows-7, jna

我目前正在用 Java 开发一个处理中断的项目。我的目标是了解何时是打断用户的好时机。目前，我当前的方法是列出不应中断的窗口，并将其与每 3 秒聚焦的窗口进行比较，然后使用键盘挂钩来检测它们是否正在打字。

但是，我遇到了 Microsoft Word 和许多其他程序没有固定窗口标题的问题。如果用户想要将 Microsoft Word 添加到不中断列表中，那么它只会添加当前正在处理的文件名，而不是可以用来唯一标识 Microsoft Windows 的文件名。另一个例子是 twitter，如果用户添加`twitter`到列表中，那么它不会认为`(15) twitter`是等效的。

是否有任何替代方法可用于检测窗口标题属于哪个程序或可能适合此问题的字符串搜索方法？

我也对如何做到这一点的全新方法持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:28:44.400

我认为比使用窗口标题更好的答案是获取实际的进程 ID 并将其保存在不被中断的进程列表中。这样你就不用担心改名了。

像这里所做的事情应该可以解决问题：[http ://www.golesny.de/p/code/javagetpid](http://www.golesny.de/p/code/javagetpid)

获得不太理想的 PID 的另一种方法：

如果您不知道该示例...获取 PID 的另一个选项如下：

```
String line = "";
Process p = Runtime.getRuntime().exec(System.getenv("windir") +"\\system32\\"+"tasklist.exe -v");
BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));
while ((line = input.readLine()) != null) {
        System.out.println(line); // this should print out process names with PID

} 
```

# cakephp - CakePHP - Auth logoutRedirect 不适用于管理员用户

> ID：15663603
> 
> 赞同：1
> 
> 时间：2013-03-27T16:07:48.197
> 
> 标签：cakephp

在我的 cake 2.2 应用程序中，我在应用程序控制器中设置了以下 beforeFilter() ：

```
public function beforeFilter() {

    //Configure AuthComponent
    // Admin
    if($this->Auth->user('group_id') == '12') {
        $this->Auth->allow('admin_index'); 
        $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login', 'admin' => FALSE);
        $this->Auth->loginRedirect = array('controller' => 'pages', 'action' => 'index', 'admin' => TRUE);
        $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login', 'admin' => FALSE);

        $this->set("group", "admin");

    // Staff
    }

    if($this->Auth->user('group_id') == '13') {
        $this->Auth->allow('admin_index'); 
        $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login', 'admin' => FALSE);
        $this->Auth->loginRedirect = array('controller' => 'pages', 'action' => 'index', 'admin' => TRUE);
        $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login', 'admin' => FALSE);

        $this->set("group", "staff"); 
```

所以基本上我希望在会话到期时将所有用户与用户组相关的所有用户发送到 /users/login 。这适用于用户，但任何管理员用户都会被重定向到 admin/users/login 并在用户控制器错误中显示 Missing 方法（因为这不是管理员方法）。由于某种原因，'admin' => FALSE 不起作用。

那么，无论用户类型如何，如何让所有用户重定向到 /users/login 的非管理方法/url

```
 // Users
    } 

    if($this->Auth->user('group_id') == '14') {
        $this->Auth->allow(array('controller' => 'pages', 'action' => 'index', 'admin' => FALSE));
        $this->Auth->loginAction = array('controller' => 'users', 'action' => 'login', 'admin' => FALSE);
        $this->Auth->loginRedirect = array('controller' => 'pages', 'action' => 'index', 'admin' => FALSE);
        $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login', 'admin' => FALSE);

        $this->set("group", "user");
    }

    // General logout redirect (including expired session redirect)
    $this->Auth->logoutRedirect = array('controller' => 'users', 'action' => 'login', 'admin' => FALSE);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:12:47.217

我猜正在发生的是会话到期时用户实际上并没有登录。除非用户明确退出（我假设在您的 UsersController 中执行一个 lougout 操作），例如这样

```
public function logout() {
    ... some code here...
    $this->Session->destroy();
    $this->redirect($this->Auth->logout());
} 
```

该 logoutRedirect 可能无法正常工作。
如果会话过期，用户将无权查看页面，重定向将转到 Auth->unauthorizedRedirect。

对于您要执行的操作，我将使用一种方法检查用户是否登录了 AppController 的 beforeFilter

```
public function beforeFilter() {
    if (!$this->Auth->loggedIn() && $this->action != 'login') {
        $this->redirect(array('controller'=>'users', 'action'=>'login', 'admin'=>false));
    }
} 
```

或者如果你想

```
public function beforeFilter() {
    if (!$this->Auth->loggedIn() && $this->action != 'login') {
        $this->redirect($this->Auth->logoutRedirect);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-05T10:11:58.407

```
public function admin_logout() {
    $this->Session->setFlash(__('Thanks for using Applired.com!'), 'default', array('class' => 'alert alert-success'));
    $this->Session->delete('user_to_register');
    $this->Session->destroy();
    $this->Auth->logout();
    return $this->redirect(array('controller' => 'dashboard', 'action' => 'login'));
} 
```

# node.js - Nodejs：解析 XML，编辑值，使用 sax-js 模块保存最终结果

> ID：15663604
> 
> 赞同：2
> 
> 时间：2013-03-27T16:07:54.947
> 
> 标签：node.js, xml-parsing, saxparser

我想要实现的是：

*   解析一大块 XML
*   编辑一些值
*   将最终结果保存在新的 xml 文件中

模块是**sax-js：[https ://github.com/isaacs/sax-js#readme](https://github.com/isaacs/sax-js#readme)**

该模块具有一些内置机制来读取/写入任何内容。

我认为这项任务将是小菜一碟；相反，我整天都在为此苦苦挣扎。

这是我的代码：

```
var fs = require('fs');
var saxStream = require("sax").createStream(true);

saxStream.on("text", function (node) {
    if (node === 'foo') { //the content I want to update
    node = 'blabla';    
  }
});
fs.createReadStream("mysongs.xml")
  .pipe(saxStream)
  .pipe(fs.createWriteStream("mysongs-copy.xml")); 
```

我确实认为更新一些内容（见上面的评论）足以将更新的流写入一个新文件。

这段代码有什么问题？

谢谢你的帮助，

罗兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T05:19:01.920

[sax](http://npm.im/sax)模块不允许您这样修改节点。如果您看一下[这段代码](https://github.com/isaacs/sax-js/blob/master/lib/sax.js#L201-L205)，您会发现输入被不加选择地传递到输出。

然而，所有的希望都不会落空！查看[漂亮打印的示例](https://github.com/isaacs/sax-js/blob/master/examples/pretty-print.js)- 这将是您想要做的一个很好的起点。但是，如果您仍然希望能够`.pipe()`摆脱它，您必须做一些工作来实现流的可读部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T22:16:24.377

如果您了解 XML 的一般结构，可以尝试 xml-flow。它将 XML 流转换为对象，但具有将它们转换回 xml 字符串的实用程序： [https ://github.com/matthewmatician/xml-flow](https://github.com/matthewmatician/xml-flow)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-06T08:03:22.440

根据 deoxxa 的回答，我为此[https://www.npmjs.com/package/sax-streamer编写了一个 NPM 模块](https://www.npmjs.com/package/sax-streamer)

# bash - 计算“查找”结果的最佳方法是什么？

> ID：15663607
> 
> 赞同：118
> 
> 时间：2013-03-27T16:07:58.147
> 
> 标签：bash, find

我目前的解决方案是`find <expr> -exec printf '.' \; | wc -c`，但是当有超过 10000 个结果时，这需要很长时间。有没有更快/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-03-27T16:10:39.660

为什么不

```
find <expr> | wc -l 
```

作为一个简单的便携式解决方案？您最初的解决方案是为找到的每个单独文件*生成一个新进程* `printf`，这非常昂贵（正如您刚刚发现的那样）。

请注意，如果您的文件名嵌入了换行符，这将多计，但如果您有，那么我怀疑您的问题会更深一些。

* * *

## 回答 #2

> 赞同：97
> 
> 时间：2013-03-27T16:14:23.190

试试这个（需要`find`的`-printf`支持）：

```
find <expr> -type f -printf '.' | wc -c 
```

这将比数行更可靠、更快捷。

请注意，我使用`find`'s `printf`，而不是外部命令。

* * *

让我们坐一会儿：

```
$ ls -1
a
e
l
ll.sh
r
t
y
z 
```

我的片段基准：

```
$ time find -type f -printf '.' | wc -c
8

real    0m0.004s
user    0m0.000s
sys     0m0.007s 
```

用完整的线条：

```
$ time find -type f | wc -l
8

real    0m0.006s
user    0m0.003s
sys     0m0.000s 
```

所以我的解决方案更快=）（重要的部分是`real`行）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-11T10:51:31.790

这个解决方案肯定比`find -> wc`这里的一些其他解决方案慢，但是如果您除了计算文件名之外还倾向于对文件名执行其他操作，您可以`read`从`find`输出中获取。

```
n=0
while read -r -d ''; do
    ((n++)) # count
    # maybe perform another act on file
done < <(find <expr> -print0)
echo $n 
```

它只是对BashGuide 中找到[的解决方案](http://mywiki.wooledge.org/BashGuide/Arrays)`find`的修改，该解决方案通过使用 将输出定界符设置为 NUL 字节`print0`并使用`''`(NUL 字节) 作为循环定界符从中读取来正确处理具有非标准名称的文件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-27T17:04:19.103

这是我的`countfiles`功能`~/.bashrc`（它相当快，应该适用于 Linux 和 FreeBSD `find`，并且不会被包含换行符的文件路径所迷惑；最后`wc`只计算 NUL 字节）：

```
countfiles () 
{ 
   command find "${1:-.}" -type f -name "${2:-*}" -print0 | 
       command tr -dc '\0' | command wc -c;
return 0
}

countfiles

countfiles ~ '*.txt' 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-09-25T12:29:48.683

POSIX 兼容和换行证明：

```
find /path -exec printf %c {} + | wc -c 
```

而且，根据我在 中的测试`/`，甚至不比其他解决方案慢两倍，这些解决方案要么不是换行证明，要么是不可移植的。

请注意，`+`而不是`\;`. 这对性能至关重要，因为每个文件名`\;`生成一个`printf`命令，而`+`为单个命令提供尽可能多的文件名`printf`。（并且在参数过多的可能情况下，Find 会根据需要智能地生成新的 Printfs 来应对它，所以它就像

```
{ 
  printf %c very long argument list1
  printf %c very long argument list2
  printf %c very long argument list3 
} | wc -c 
```

被称为。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-03T15:21:13.030

我需要一些我不会从 find 中获取所有输出的东西，因为其他一些命令运行也会打印东西。

不需要临时文件，这只有一个很大的警告：你可能会得到（远）多于一行的输出，因为它会为每 800~1600 个文件执行一次输出命令。

```
find . -print -exec sh -c 'printf %c "$@" | wc -c' '' '{}' + # just print the numbers
find . -print -exec sh -c 'echo "Processed `printf %c "$@" | wc -c` items."' '' '{}' + 
```

生成此结果：

```
Processed 1622 items.
Processed 1578 items.
Processed 1587 items. 
```

另一种方法是使用临时文件：

```
find . -print -fprintf tmp.file .
wc -c <tmp.file # using the file as argument instead causes the file name to be printed after the count

echo "Processed `wc -c <tmp.file` items." # sh variant
echo "Processed $(wc -c <tmp.file) items." # bash variant 
```

`-print`in every find 命令根本不会影响计数。

# javascript - 使用唯一变量处理多个 AJAX 回调

> ID：15663610
> 
> 赞同：0
> 
> 时间：2013-03-27T16:08:05.167
> 
> 标签：javascript, jquery, ajax, callback

我正在使用 JQuery 的 AJAX 实现来访问多个 JSON 和不同的 URL。我有一个每个 URL 对应的名称数组，并且希望能够在 AJAX 请求的回调函数中引用与相应 JSON 文件一起使用的相应名称。

到目前为止，我已经编写了一个用于测试的代码示例：

```
 var nameList = ['Tom', 'Neil', 'Jane']; 
    for(var i = 0; i < nameList.length; i++){
        var currentName = nameList[i]; 
        var newURL = urlFromName(currentName)
        $.ajax({
            type: 'GET',
            url: newURL,
            dataype: 'jsonp'
        }).always(function(data,status, error){
               console.log(currentName);
               console.log(data);
           });
    } 
```

代码输出：

```
 - Neil
      - Object 
      - Neil
      - Object
      - Neil
      - Object 
```

我正在寻找每个 Object 以我提供的 nameList 中的相应名称打印出来。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:15:09.830

试试这个：

```
 var nameList = ['Tom', 'Neil', 'Jane']; 
    for(var i = 0; i < nameList.length; i++){
        var currentName = nameList[i]; 
        var newURL = urlFromName(currentName)
        $.ajax({
            type: 'GET',
            url: newURL,
            dataype: 'jsonp',
            currentName: currentName // <-- Add this here
        }).always(function(data,status, error){
               console.log(this.currentName); // <-- Use the 'this' to get it
               console.log(data);
           });
    } 
```

# c# - Linq to xml Select 语句

> ID：15663611
> 
> 赞同：0
> 
> 时间：2013-03-27T16:08:05.433
> 
> 标签：c#, linq, linq-to-xml

我试图弄清楚如何使用 linq to xml 执行选择语句。如果 DeploymentType 等于特定值 (Enterprise9999)，我想返回 ServerTypes。

XML:

```
<Deployments>
  <Deployment>
    <DeploymentType>Enterprise9999</EnterpriseDeploymentType>
    <Servers>
      <DeploymentServer>
        <ServerType>WindowsServer</ServerType>
      </DeploymentServer>
      <DeploymentServer>
        <ServerType>LinuxServer</ServerType>
      </DeploymentServer>
    </Servers>
  </Deployment>
  <Deployment></Deployment>
  <Deployment></Deployment>
</Deployments> 
```

这是我到目前为止在代码中的内容。我确定我会以错误的方式解决这个问题：

```
XDocument xmlDoc = XDocument.Load(@xmlFile);
IEnumerable<XElement> xlDeployments = from depRows in xmlDoc.Descendants("Deployments")
                                           select depRows;

var deploy = xlDeployments.Descendants("Deployment");

foreach (var dep in deploy)
{
    if (dep.Element("DeploymentType").ToString() == "Enterprise9999")
    {
        MessageBox.Show(dep.Elements("ServerType").ToString());
    }
} 
```

选择语句是否需要命名空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:18:56.287

我已将您的封闭标签更改`</EnterpriseDeploymentType>`为`</DeploymentType>`

```
XDocument xmlDoc = XDocument.Load(@xmlFile);

var deployments = xmlDoc.Descendants("Deployment")
                       .Where(dep => dep.Element("DeploymentType") != null 
                                  && dep.Element("DeploymentType").Value == "Enterprise9999");

var servers = deployments.Descendants("ServerType")
                         .Select(node => node.Value);

Console.WriteLine(string.Join(Environment.NewLine, servers)); 
```

印刷：

```
WindowsServer
LinuxServer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:35:34.403

假设您已根据我的评论更正了您的 XML，您可以使用以下单个查询：-

```
var nodes = from n in xml.Descendants("DeploymentType")
                     .Where(x => x.Element("EnterpriseDeploymentType").Value.Equals("Enterprise9999"))
                        select n.Descendants("Servers").Descendants("ServerType").Select(s => s.Value); 
```

这会给你：

`WindowsServer` `LinuxServer`

# android - Android：将不同的主题应用于一个活动的片段

> ID：15663613
> 
> 赞同：25
> 
> 时间：2013-03-27T16:08:12.997
> 
> 标签：android, android-layout

**我想做的事：**

我希望 MainActivity 的每个 Fragment 使用不同的主题，以便 ActionBar 具有不同的背景颜色，具体取决于可见的 Fragment。

**情况：**

我创建了一个使用 Tabs + Swipe Navigation 的 MainActivity。我添加了 7 个标签（=7 个片段）。我创建了一个仅应用于第一个片段 (fragment_main_1) 的主题。

这里的主题：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
<style name="Blue" parent="android:Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/Blue.ActionBarStyle</item>
</style>

<style name="Blue.ActionBarStyle" parent="android:Widget.Holo.Light.ActionBar">
    <item name="android:titleTextStyle">@style/Blue.ActionBar.TitleTextStyle</item>
    <item name="android:background">#33B5E5</item>
</style>

<style name="Blue.ActionBar.TitleTextStyle" parent="android:TextAppearance.Holo.Widget.ActionBar.Title">
    <item name="android:textColor">#FFFFFF</item>
</style>
</resources> 
```

在创建另外 6 个主题后，应该可以在 ActionBar 自动更改其背景颜色时滑动浏览选项卡。

**什么不起作用：**

将这些行（我在 stackoverflow 上找到）添加到 Fragment1.java：

```
// create ContextThemeWrapper from the original Activity Context with the custom theme
final Context contextThemeWrapper = new ContextThemeWrapper(getActivity(), R.style.Blue);

// clone the inflater using the ContextThemeWrapper
LayoutInflater localInflater = inflater.cloneInContext(contextThemeWrapper);

// inflate the layout using the cloned inflater, not default inflater
return localInflater.inflate(R.layout.fragment_main_1,container, false); 
```

我希望你能帮助我：）谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-07-07T09:30:29.757

许多片段（例如`PreferenceFragment`）直接从`Context`返回的`Fragment.getContext()`方法中读取样式属性，因此您可能也需要覆盖它：

```
private var themedContext: Context? = null

override fun onAttach(context: Context) {
    super.onAttach(context).also {
        themedContext = ContextThemeWrapper(context, R.style.ThemeForThisFragment)
        // if you want to apply a theme overlay:
        // themedContext.theme.applyStyle(R.style.MyThemeOverlay, true)
    }
}

override fun onDetach() {
    super.onDetach()
    themedContext = null
}

override fun getContext(): Context? {
    return themedContext ?: super.getContext()
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:13:17.363

试试`LayoutInflater localInflater = inflater.from(contextThemeWrapper);`吧。

# c++ - 在开罗渲染文本时反转文本

> ID：15663624
> 
> 赞同：0
> 
> 时间：2013-03-27T16:08:49.757
> 
> 标签：c++, c, cairo

我正在使用 Cairo 编写一个程序，我需要使用以下代码将坐标从屏幕更改为笛卡尔坐标：

```
cairo_translate( cr, x, height );
cairo_scale( cr, 1.0, -1.0 ); // FLIP the Y axis 
```

但是当我尝试渲染文本（cairo_show_text）时，文本也会被反转，因此不可读。

使用缩放字体 (cairo_scaled_font_t) 时也会发生同样的情况：

```
cairo_font_options_t *font_options;
cairo_matrix_t ctm, font_matrix;
cairo_scaled_font_t *scaled_font;

font_options = cairo_font_options_create();
cairo_get_matrix( cr, &ctm );
cairo_get_font_matrix( cr, &font_matrix );

font_matrix.xx = font_matrix.yy = 20.0; // font size

// font_face initialized elsewhere and is valid

scaled_font = cairo_scaled_font_create( font_face, &font_matrix, &ctm, font_options );

cairo_set_scaled_font( cr, scaled_font );

cairo_move_to( cr, 1, 50 );

cairo_show_text( cr, "some text" );

... 
```

我认为矩阵需要一些调整，但我不知道如何。任何帮助表示赞赏。提前致谢。

**编辑：**

文字是颠倒的。例如，“L”看起来像 Gamma，“W”看起来像“M”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-25T09:18:45.083

我知道有两种方法可以做到这一点：

```
cairo_matrix_t ms, mt, m;
cairo_matrix_init_scale(&ms, 1.0f, -1.0f);
cairo_matrix_init_translate(&mt, 0.0f, -m_height);
cairo_matrix_multiply(&m, &mt, &ms);
cairo_set_matrix(cr, &m); 
```

或者：

```
cairo_scale(cr, 1.0f, -1.0f);
cairo_translate(cr, 0.0f, -m_height); 
```

两者都为我解决了问题。通过 y 上的 -1 缩放 cr，但这意味着文本不在表面上，因此通过表面的 -height 进行平移，它应该位于正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:20:15.720

好吧，您正在翻转 Y 轴，因此文本也会翻转。尝试这个：

```
cairo_save(cr);
cairo_reset_clip(cr);
cairo_show_text(cr, "Some Text");
cairo_restore(cr); 
```

以上替换了您示例中的 cairo_show_text() 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-11T14:52:18.430

由于您将坐标系倒置，因此文本也会倒置显示。这个问题的解决方案是手动翻转文本，方法是设置一个字体矩阵，垂直比例为负数。您可以通过修改代码来设置字体大小，如下所示：

```
double font_size = 20.0;
font_matrix.xx = font_size;
font_matrix.yy = -font_size; // negative size to vertically flip text 
```

# mysql - 从事务中的表中删除后插入的重复条目

> ID：15663626
> 
> 赞同：1
> 
> 时间：2013-03-27T16:08:56.433
> 
> 标签：mysql, magento, transactions

我正在寻找任何想法来解释（和防止）以下内容：

1）我们有一个 Magento 重新索引过程（价格或股票），但不时失败：

> 异常“Zend_Db_Statement_Exception”和消息“SQLSTATE [23000]：完整性约束违规：1062 /[省略]/lib/Zend/Db/Statement/Pdo.php 中键“PRIMARY”的重复条目“512723-1-1”： 242

完整跟踪：[https ://gist.github.com/werdan/5255362](https://gist.github.com/werdan/5255362)

2) Magento reindex 是在事务中完成的，大致如下：

```
START TRANSACTION;
DELETE FROM `cataloginventory_stock_status`;
INSERT INTO cataloginventory_stock_status SELECT * FROM cataloginventory_stock_status_idx;
COMMIT; 
```

3) 在 DELETE 和 INSERT 命令之间破坏表的一致性应该是不可能的，但是它发生了。

我们检查了表 cataloginventory_stock_status 和 cataloginventory_stock_status_idx 具有相同的键和结构。

还有什么可以作为解释和解决方案的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:20:30.403

这是许多 SQL 转储工具所做的：

```
LOCK TABLES foo WRITE;
ALTER TABLE foo DISABLE KEYS;

INSERT INTO foo (foo_id, foo_name) VALUES (1, 'One'), 
    (2, 'Two'), 
    (3, 'Three');

ALTER TABLE foo ENABLE KEYS;
UNLOCK TABLES; 
```

# php - 如果语句为真，则显示表单 php

> ID：15663628
> 
> 赞同：0
> 
> 时间：2013-03-27T16:08:59.853
> 
> 标签：php, html, forms, if-statement

```
<?php
        if($dun==0){
     show form1 and add vaules to database
         }
        else if($toplam==0){
 show form2 and add values to database
    }
        else if($toplam==$dun){
        header('Location: member.php');
         }else{
        echo "<script> alert('Error.');history.go(-1);</script>";
        }
        ?> 
```

我如何通过 if 语句显示两个不同的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:12:09.633

您可以通过关闭`<?PHP`标签来使用内联 HTML，`?>`如下所示：

```
<?php
if($dun==0){
// start parsing HTML
?>
    <form>[...]</form>
<?PHP
} else if($toplam==0){
// start parsing second HTML
?>
    <form>[...]</form>
<?PHP
}
else if($toplam==$dun){
    header('Location: member.php');
}else{
    echo "<script> alert('Error.');history.go(-1);</script>";
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:11:16.893

如果不使用 OOP 并且您不熟悉 OOP 编程和 MVC 框架或 html 渲染，那么您可以执行以下操作：

```
form1.php file holds the HTML for form 1
form2.php file holds the HTML for form 2

if ($dun == 0) {
    include('form1.php');
//add values to database
} else if ($toplam == 0) {
    include('form2.php');
//add values to database
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:20:02.527

难道你不能像你一样的`echo`形式吗？`echo'd``javascript`

```
<?php
        if($dun==0){
          echo '
             <form name="form1"><input type="submit" name="submit1" /></form>
          ';
         }
        else if($toplam==0){
          echo '
             <form name="form2"><input type="submit" name="submit2" /></form>
          ';
         }
        else if($toplam==$dun){
            header('Location: member.php');
         }else{
            echo "<script> alert('Error.');history.go(-1);</script>";
        }
?> 
```

如果您想根据`if`语句将数据插入数据库，那么您可以添加`functions`：

```
<?php

  function doForm1(){
     //MYSQL HERE
  }

  function doForm2(){
     //MYSQL HERE
  }

        if($dun==0){
          echo '
             <form name="form1"><input type="submit" name="submit1" /></form>
          ';
          doForm1();
         }
        else if($toplam==0){
          echo '
             <form name="form2"><input type="submit" name="submit2" /></form>
          ';
          doForm2();
         }
        else if($toplam==$dun){
            header('Location: member.php');
         }else{
            echo "<script> alert('Error.');history.go(-1);</script>";
        }
?> 
```

# php - php和mysql的问题

> ID：15663633
> 
> 赞同：0
> 
> 时间：2013-03-27T16:09:13.853
> 
> 标签：php, mysql, arrays, multidimensional-array, row

我有一个具有名为 属性的表，`URL`在向该表添加注册表时，我可以选择保留该字段`NULL` 或编写一个`URL`. 如果我把它留空，我想显示`autoassigned`我创建的 url `($url)`。如果它不为空，我想`row URL`现在显示注册表（）的内容，我做了第一部分......我不知道如何做第二部分。

```
$sql="select * from agenda";
$result= mysql_query($sql) or die(mysql_error());
if(mysql_num_rows($result)==0) die("No hay registros para mostrar");
echo "<table border=1 cellpadding=4 cellspacing=0>";
echo "<tr>
<th colspan=5> Agenda </th><tr>
<th> Categoria </th><th> Evento </th><th> Fecha </th><th> Hora </th><th> Info </th><th> ID     </th>";
while($row=mysql_fetch_array($result))
{
$url= $row[id].".php";
echo "<tr>
<td align='left'> $row[categoria] </td>
<td> <a href= '$url'> $row[evento] </a> </td>
<td> $row[fecha] </td>
<td> $row[hora] </td>
<td> $row[info] </td>
<td> $row[id] </td>
</tr>";         
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:15:03.020

如果我让你正确，那么这将是你的解决方案......

```
while($row=mysql_fetch_array($result))
{

  $url = (($row['url'] == '')|| ($row['url'] == null))?"{$row['id'].php}":$row['url'];
  echo "<tr>
  <td align='left'> $row[categoria] </td>
  <td> <a href= '$url'> $row[evento] </a> </td>
  <td> $row[fecha] </td>
  <td> $row[hora] </td>
  <td> $row[info] </td>
    <td> $row[id] </td>
   </tr>";         
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:15:42.103

我不确定你想得到什么，但如果我猜你需要这个代码

```
<?php
$sql="select * from agenda";
$result= mysql_query($sql) or die(mysql_error());
if(mysql_num_rows($result)==0) die("No hay registros para mostrar");
echo '<table border=1 cellpadding=4 cellspacing=0>';
echo '<tr><th colspan=5> Agenda </th><tr><th> Categoria </th><th> Evento </th><th> Fecha </th><th> Hora </th><th> Info </th><th> ID     </th>';
while($row = mysql_fetch_array($result)) {
    $url = (NULL != $row['URL'] && '' != $row['URL']) ? $row['URL'] : ($row['id'].'.php');
    echo '<tr>'.
        '<td align="left">'.$row[categoria].'</td>'.
        '<td><a href= '.$url.'>'.$row[evento].'</a></td>'.
        '<td>'.$row[fecha].'</td>'.
        '<td>'.$row[hora].'</td>'.
        '<td>'.$row[info].'</td>'.
        '<td>'.$row[id].'</td>'.
    '</tr>'; 
}     
?> 
```

**ADD1**另外，停止使用`mysql_*`函数。**它已被弃用**。请改用[mysqli](http://www.php.net/manual/en/class.mysqli.php)或[PDO](http://www.php.net/manual/en/class.pdo.php)。

**ADD2** `$var = (condition) ? 'val if true' : 'val if false';`语法是更短的版本

```
if (condition) $var = 'val if true';
else $var = 'val if false'; 
```

# function - Jquery - 帮助编写切换按钮？

> ID：15663643
> 
> 赞同：0
> 
> 时间：2013-03-27T16:09:30.863
> 
> 标签：function, jquery

我正在建造一个飞出盒，但遇到了问题。我认为它可以用 if / then 语句来解决，但不知道该怎么做。

我有以下 8 个 div 设置为单击按钮。

```
<script>
    $( "#btn1" ).click(function() {
        $( "#one" ).toggle( "slide", "easeInOutExpo", 100);
    });
    $( "#btn2" ).click(function() {
        $( "#two").toggle( "slide", "easeInOutExpo", 100);
    });
    $( "#btn3" ).click(function() {
        $( "#three" ).toggle( "slide", "easeInOutExpo", 100);
    });
    $( "#btn4" ).click(function() {
       $( "#four" ).toggle( "slide", "easeInOutExpo", 100);
    });
    $( "#btn5" ).click(function() {
        $( "#five" ).toggle( "slide", "easeInOutExpo", 100);
    });
    $( "#btn6" ).click(function() {
       $( "#six" ).toggle( "slide", "easeInOutExpo", 100);
    });
    $( "#btn7" ).click(function() {
        $( "#seven" ).toggle( "slide", "easeInOutExpo", 100);
    });
    $( "#eight" ).click(function() {
       $( "#one" ).toggle( "slide", "easeInOutExpo", 100);
    });

</script> 
```

每个 div 在点击时效果很好。这是我需要它做的事情：

如果任何其他 div 是打开的，我需要它们来切换......所以说我点击 3 然后点击 7，3 应该关闭。

这是html：

```
<div id="transaction">
    <div id="btn1">btn1 </div>
    <div id="btn2">btn1 </div>
    <div id="btn3">btn1 </div>
    <div id="btn4">btn1 </div>
    <div id="btn5">btn1 </div>
    <div id="btn6">btn1 </div>
    <div id="btn7">btn1 </div>
    <div id="btn8">btn1 </div>
</div>
<p id="one">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque dapibus commodo purus sit amet fermentum. Donec libero quam, facilisis non consectetur vel, lacinia eu nibh. Pellentesque eget porttitor purus. Donec non quam nulla, luctus tempor urna. Duis commodo cursus justo eget pellentesque. Aliquam a aliquam odio. Donec tristique lorem vitae dolor.</p>
<p id="two">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque dapibus commodo purus sit amet fermentum. Donec libero quam, facilisis non consectetur vel, lacinia eu nibh. Pellentesque eget porttitor purus. Donec non quam nulla, luctus tempor urna. Duis commodo cursus justo eget pellentesque. Aliquam a aliquam odio. Donec tristique lorem vitae dolor.</p>
<p id="three">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque dapibus commodo purus sit amet fermentum. Donec libero quam, facilisis non consectetur vel, lacinia eu nibh. Pellentesque eget porttitor purus. Donec non quam nulla, luctus tempor urna. Duis commodo cursus justo eget pellentesque. Aliquam a aliquam odio. Donec tristique lorem vitae dolor.</p>
<p id="four">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque dapibus commodo purus sit amet fermentum. Donec libero quam, facilisis non consectetur vel, lacinia eu nibh. Pellentesque eget porttitor purus. Donec non quam nulla, luctus tempor urna. Duis commodo cursus justo eget pellentesque. Aliquam a aliquam odio. Donec tristique lorem vitae dolor.</p>
<p id="five">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque dapibus commodo purus sit amet fermentum. Donec libero quam, facilisis non consectetur vel, lacinia eu nibh. Pellentesque eget porttitor purus. Donec non quam nulla, luctus tempor urna. Duis commodo cursus justo eget pellentesque. Aliquam a aliquam odio. Donec tristique lorem vitae dolor.</p>
<p id="six">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque dapibus commodo purus sit amet fermentum. Donec libero quam, facilisis non consectetur vel, lacinia eu nibh. Pellentesque eget porttitor purus. Donec non quam nulla, luctus tempor urna. Duis commodo cursus justo eget pellentesque. Aliquam a aliquam odio. Donec tristique lorem vitae dolor.</p>
<p id="seven">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque dapibus commodo purus sit amet fermentum. Donec libero quam, facilisis non consectetur vel, lacinia eu nibh. Pellentesque eget porttitor purus. Donec non quam nulla, luctus tempor urna. Duis commodo cursus justo eget pellentesque. Aliquam a aliquam odio. Donec tristique lorem vitae dolor.</p>
<p id="seven">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque dapibus commodo purus sit amet fermentum. Donec libero quam, facilisis non consectetur vel, lacinia eu nibh. Pellentesque eget porttitor purus. Donec non quam nulla, luctus tempor urna. Duis commodo cursus justo eget pellentesque. Aliquam a aliquam odio. Donec tristique lorem vitae dolor.</p>
<script>
$( "#btn1" ).click(function() {
$( "#one" ).toggle( "slide", "easeInOutExpo", 100);
});
$( "#btn2" ).click(function() {
$( "#two").toggle( "slide", "easeInOutExpo", 100);
});
$( "#btn3" ).click(function() {
$( "#three" ).toggle( "slide", "easeInOutExpo", 100);
});
$( "#btn4" ).click(function() {
$( "#four" ).toggle( "slide", "easeInOutExpo", 100);
});
$( "#btn5" ).click(function() {
$( "#five" ).toggle( "slide", "easeInOutExpo", 100);
});
$( "#btn6" ).click(function() {
$( "#six" ).toggle( "slide", "easeInOutExpo", 100);
});
$( "#btn7" ).click(function() {
$( "#seven" ).toggle( "slide", "easeInOutExpo", 100);
});
$( "#eight" ).click(function() {
$( "#one" ).toggle( "slide", "easeInOutExpo", 100);
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:23:22.640

这就是类和[`.siblings()`](http://api.jquery.com/siblings)方法存在的原因。

要使用另一个按钮，我更喜欢使用`.data()`和`data-`属性的魔力。在按钮的 HTML 中添加类似这样的内容：

```
<div class="btn" id="btn1" data-para="one"> 
```

和段落：

```
<p class="para" id="one">Lorem ipsum...</p> 
```

您可以改用这个 jQuery：

```
$('.btn').on('click',function(e) {
    var id = $(this).data('para');
    $('#'+id).toggle( "slide", "easeInOutExpo", 100).siblings('.para').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:17:07.243

这似乎是事件委托的主要候选人：[http ://learn.jquery.com/events/event-delegation/](http://learn.jquery.com/events/event-delegation/)

本质上，这个想法是你可以检测到哪个元素被点击了，而不是使用一堆`.on("click")`事件。这极大地节省了性能。

这是一个小提琴：http: [//jsfiddle.net/jD78j/2/](http://jsfiddle.net/jD78j/2/)

这是使用的代码：

```
$(document).on("click","button", function(e) {

    var buttonId = $(e.target).attr("id");
    var nextDiv = $("#" + buttonId).next();

    $("div").slideUp("fast");

    if(nextDiv.is(":visible")) {
        return false;
    } else {
        nextDiv.slideToggle("fast");
    }

}); 
```

这为您提供了额外的好处，即实际上知道用户在对象中单击了哪个按钮，该`event`对象具有许多不同的属性可供使用。

# string - 使用变量和单元格引用分配单元格公式

> ID：15663645
> 
> 赞同：1
> 
> 时间：2013-03-27T16:09:32.967
> 
> 标签：string, excel, excel-formula, vba

我正在尝试将一个公式分配给一个单元格，该单元格的引用在每次迭代时都会发生变化。然而，下面作业的左侧似乎有效，因为如果我将右侧设为“=”“Test”“”，它似乎有效。

我想问题出在右手边的公式上。有一个字符串的组合，一个随着每次循环迭代而变化的变量和一个从单元格中获取的值。

```
 Worksheets("LimsOutput").Cells(4, 2 + 14 * i).Formula = "=" & BR & " Blah blah " & Worksheets("Lims").Range("A3").Value 
```

我认为问题可能与工作表中的引号和单元格引用有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:23:27.703

下面是一个简单的例子。我希望这可以帮助你。

```
 Sub sample()
    Dim lastRow As Long
    lastRow = Range("A65000").End(xlUp).Row

    Dim rng As Range
    Set rng = Range("B1:B" & lastRow)

    Dim BR As String
    BR = "STRING"

    rng.Formula = BR & " Blah blah " & cstr(Range("$A$3"))

End Sub 
```

![在此处输入图像描述](../Images/2cab767355a30b973c48f7f964cef695.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:46:11.550

在您的情况下，Excel 单元格中的连接公式看起来像这样

```
 = "String" & " Blah Blah " & "30/06/2012" 
```

要将其转换为代码，请使用`CHR(34)`双引号和`"&"`

看这个例子

```
Worksheets("LimsOutput").Cells(4, 2 + 14 * i).Formula = "=" & _
                                                        Chr(34) & BR & Chr(34) & _
                                                        "&" & _
                                                        Chr(34) & " Blah blah " & Chr(34) & _
                                                        "&" & _
                                                        Worksheets("Lims").Range("A3").Value 
```

还有一件事 ：）

`Worksheets("Lims").Range("A3").Value`会给`0.00248508946322068`你`30/06/2012`

所以上面的代码会给出一个输出，比如`STRING Blah blah 0.00248508946322068`最后你必须`CHR(34)`在日期之前和之后添加日期。例如

```
Worksheets("LimsOutput").Cells(4, 2 + 14 * i).Formula = "=" & _
                                                        Chr(34) & BR & Chr(34) & _
                                                        "&" & _
                                                        Chr(34) & " Blah blah " & Chr(34) & _
                                                        "&" & _
                                                        Chr(34) & Worksheets("Lims").Range("A3").Value & Chr(34) 
```

# java - getJsonStringFromURL() 返回一个空字符串

> ID：15663646
> 
> 赞同：0
> 
> 时间：2013-03-27T16:09:44.123
> 
> 标签：java, android, json

我正在尝试从 url 获取 json 字符串，当我使用这行代码时，我的方法返回一个空字符串值：

```
String jsonStr = getJsonStringFromURL(url); 
```

这是我正在使用的方法：

```
public static String getJsonStringFromURL(String url)  {
    InputStream is = null; 
    String result = "";
    JSONObject jsonObject = null;

    try { 
        HttpClient httpclient = new DefaultHttpClient(); 
        HttpPost httppost = new HttpPost(url);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent(); 
    }
    catch (Exception e) { 
        return null;
    }

    try { 
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "utf-8"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) { 
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    }
    catch(Exception e) { 
        return null;
    }
    return result;
} 
```

我有一个 url 变量，当我将 url 复制并粘贴到浏览器中时，它会返回并显示一个 json 字符串。任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:20:02.437

`BufferReader`问题是您在关闭时为结果赋值。这就是为什么你得到空值。

而不是分配`result = sb.toString()`; `BufferReader`在关闭它之前分配它之外。

```
 BufferedReader reader = new BufferedReader(new InputStreamReader(is, "utf-8"), 8);
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) { 
        sb.append(line + "\n"); 
    }
    result = sb.toString();
    System.out.println(result);// It will print you the value
    is.close(); 
```

希望能帮助到你。

# php - PHP多维数组：查找多元素子数组匹配......是否有循环的替代选项？

> ID：15663648
> 
> 赞同：3
> 
> 时间：2013-03-27T16:09:56.217
> 
> 标签：php, multidimensional-array, foreach

我们有一些从单独的数据存储开始的客户数据。我有一个整合脚本来标准化并将其迁移到我们的核心数据库中。大约有 60,000-70,000 条记录正在迁移。

自然地，有一个小错误，它在第 9k 行附近失败了。
我的下一个技巧是让脚本在再次运行时能够从中断的地方继续。

**仅供参考：**
源记录非常恶心，并按他们购买的品牌分为 5 个表...... IE：

```
create TABLE `brand1_custs` (`id` int(9), `company_name` varchar(112), etc...)
create TABLE `brand2_custs` (`id` int(9), `company_name` varchar(112), etc...) 
```

当然，给定的公司名称可以（并且确实）存在于多个源表中。

**无论如何......**我使用 ParseCSV 库进行日志记录，如果成功迁移，每一行都会被记录（如果某些行太丑而无法以编程方式解析，则会被跳过）。使用 ParseCSV 打开日志备份时，它看起来像：

```
array(
  0 => array( 'row_id'   =>  '1', 
          'company_name' =>  'Cust A', 
          'blah'         =>  'blah', 
          'source_tbl'   =>  'brand1_cust'
      ),
  1 => array( 'row_id'   =>  '2',
          'company_name' =>  'customer B',
          'blah'         =>  'blah',
          'source_tbl'   =>  'brand1_cust'
      ),
  2 => array( 'row_id'   =>  '1',
          'company_name' =>  'Cust A',
          'blah'         =>  'blah',
          'source_tbl'   =>  'brand2_cust'
      ),
  etc...
) 
```

**我目前的工作流程**是这样的：

```
foreach( $source_table AS $src){
    $results = // get all rows from $src
    foreach($results AS $row){
        // heavy lifting
    {
} 
```

**我的计划**是检查
`$row->id`and`$src->tbl`组合中的and组合
是否匹配。
`$log[?x?]['row_id']``$log[?x?]['source_tbl']`

为了实现这一点，我必须在循环内做一个循环`foreach($log AS $xyz)`，***并***`foreach($results AS $row)`跳过任何发现已经迁移的行（否则，它们会被重复）。
这对我来说似乎有**很多**循环。
当我们在创纪录的 #40 或 50000 附近起床时呢？
那将是 50k x 50k 循环！

**问题：**除了每次循环之外*，*
我有没有更好的方法来检查子数组是否有“row_id”和“source_tbl”匹配？

 ***注意：**与往常一样，如果我应该以***完全***不同的方式考虑这个问题，我愿意接受任何和所有建议:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:30:33.230

我认为您应该对日志进行预处理，对其进行散列（或组合键）`row_id and` `source_tbl`并将其存储在散列图中，然后为每一行构造键的散列并检查它是否已在散列图中定义。

我告诉你使用散列集，因为你可以随着`O(k)`时间的推移在其中搜索，否则它与你提出的只是一个更干净的代码相同。*

# facebook-graph-api - 流 fql 仅在限制为 100 时有效 - 不适用于限制 1

> ID：15663649
> 
> 赞同：0
> 
> 时间：2013-03-27T16:09:57.200
> 
> 标签：facebook-graph-api, facebook-fql

我在开发人员工具和应用程序中都试过这个。

```
SELECT message, description, post_id, likes FROM stream WHERE source_id=me() AND type=46 
```

哪个不工作

```
SELECT message, description, post_id, likes FROM stream WHERE source_id=me() AND type=46 LIMIT 1 
```

这不起作用

```
SELECT message, description, post_id, likes FROM stream WHERE source_id=me() AND type=46 LIMIT 100 
```

这对我来说很好。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:21:33.063

没有。`stream`使用1进行查询的问题`LIMIT`在于，您的查询返回的帖子可能对您不可见。Facebook在查询完成*后过滤结果。*

如果您只想要一个帖子，请请求比您需要的更多，然后在客户端将其过滤为一个。

有关更多信息，请参阅[此 SO 线程](http://facebook.stackoverflow.com/questions/14268907/fql-stream-doesnt-return-the-number-of-posts-as-defined-by-limit/14269101#14269101)。

# quickfix - TCP 连接丢失时的预期行为是什么？

> ID：15663652
> 
> 赞同：5
> 
> 时间：2013-03-27T16:10:07.380
> 
> 标签：quickfix, fix-protocol

我查看了 FIX v4.2 规范，我不清楚当 TCP 连接在会话中间丢失时应该是什么预期行为。

更具体地说，假设当前序列号为 100，此时 TCP 连接丢失，当任何一方尝试恢复会话时，它会重新发送 100 号消息，还是通过登录开始新的会话？

在描述 FIX 会话时，规范说一个会话有一个登录和一个注销，但可以跨越多个物理连接。这使我认为，当 TCP 连接丢失时，恢复过程不应该以登录消息开始，但我对此并不积极。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:55:45.550

FIX 协议没有定义与传输协议相关的任何内容。官方网站上有一些文件只建议如何在这个或那个协议之上实现它，但只是建议。

因此，TCP/IP 断开连接时的预期行为取决于实现。例如，可能有一个根本不关心 TCP/IP 断开连接的系统，这会使这些细节变得无关紧要。在这种情况下，预期的行为将是在重新建立连接后继续发送接收消息，当然如果有的话，继续“恢复”丢失的消息。但实际上，我从未见过这样的系统。

实际上，所有系统都将 TCP/IP 断开连接视为会话的隐式丢失，并期望客户端在重新连接时发送登录信息。

登录时，有两个选项 - 重新连接会话可能会发送下一个传出序列号，或者它可能会要求服务器重置序列（为 1）。在第一种情况下，如果序列大于或等于它的预期，服务器端可以发送登录确认，或者如果接收到的序列号小于预期，则关闭（甚至拒绝）会话。此外，如果序列大于预期，服务器将发出重新传输。客户端会话也监视服务器的序列，如果检测到间隙（接收到的序列大于预期），则需要请求重传。在第二种情况下，如果服务器支持序列重置，则输入和输出序列都重置为 1，并且不会恢复任何消息。

在您的情况下，如果在发送序列号为 100 的消息后连接丢失，则客户端必须重新连接并发送序列号为 101 的登录，然后从那里继续。或者，连接并重置序列，在这种情况下，某些消息可能会丢失。

另外，不要忘记检查您连接的场地的具体情况。可能有一些非常奇怪的细节根本没有被 FIX 协议指定，甚至是那些违反 FIX 协议的细节。例如，ICE（实际上是最脑残的交易所之一）在这方面是最愚蠢的交易所之一——它不允许在前 15 秒内重新连接，然后如果客户端无法连接 30 秒，他们应该切换到故障转移服务器。如果发生故障转移，它们无法保持序列号完整，客户端别无选择，只能重置序列号。

希望它能让你更清楚一点。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T11:47:17.763

如果传输层是 TCP/IP，我希望会话发起者：

1.  重新建立套接字连接
2.  发送新的登录消息

登录消息上使用的序列号取决于会话的类型以及与 FIX 会话接受者达成的协议（有关详细信息，请参阅规范）。对于重播任何手数消息没有价值的会话，例如价格过时的市场数据馈送，发送序列号为 1 的登录消息并设置标签 141=Y（重置序列号）是有意义的。对于可能需要重播消息的订单会话，会话发起者通常应该使用比发送的最后一条消息大 1 的序列号登录（并期望来自 FIX 会话接受者的登录响应，其序列号比最后一条消息大 1收到消息）。

除非您确实需要重播消息，否则每次登录时重新设置序列号会更干净、更容易。这显然取决于 FIX 会话接受器（FIX 服务器）对此的支持。对于 STP 提要之类的东西，我发现这要可靠得多，并且应用程序协议通常更好地提供应用程序级重放设施，而不是依赖 FIX 会话重放的脆弱性。

# linux - 获得独特的线条

> ID：15663654
> 
> 赞同：2
> 
> 时间：2013-03-27T16:10:18.313
> 
> 标签：linux, bash, awk, unique, delimiter

我正在 graphViz 中创建图形，我需要每个连接只显示一次，如何使用 linux 命令转换此输入？

输入

```
aa -- bb[label=xyz]
ab -- bb[label=yzx]
aa -- bb[label=zxy]
ac -- ab[label=xyz]
bb -- aa[label=xzy] 
```

期望的输出：

```
aa -- bb[label=xyz]
ab -- bb[label=yzx]
ac -- ab[label=xyz] 
```

所以`aa -- bb`等于`bb -- aa`并且需要删除。

我试过`sort -k1,2 -u -t[`机器人，它不能与`[`分隔符一起工作，不知道如何检查“反向”条目（“xx -- yy”=“yy -- xx”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:26:12.817

这是一种使用方法`awk`：

```
$ awk -F'[[]| -- ' '!a[$1,$2]++&&!a[$2,$1]' file
aa -- bb[label=xyz]
ab -- bb[label=yzx]
ac -- ab[label=xyz] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:14:46.397

您可以通过这种方式将 [ 指定为分隔符：

```
sort -k2 -u -t'[' 
```

这能满足你的需要吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:38:11.723

这是一个想法（未经测试，但应该接近）：

```
sed -e 's/[[].*// -e 's/-- //' input.txt |
  awk '{ if ((e[$1$2] != 1) && (e[$2$1] != 1))
         { print $1, $2
           e[$1$2] = e[$2$1] = 1
         }
       }' 
```

由于您似乎并不关心它们，因此该`sed ...`位会去除`--`和部分，然后跟踪已按任一顺序看到的对，并且仅在尚未看到它们时才打印它们。`[label...]``awk`

# asp.net-mvc - MVC 和实体框架 - 插入、更新、最佳实践

> ID：15663655
> 
> 赞同：2
> 
> 时间：2013-03-27T16:10:19.123
> 
> 标签：asp.net-mvc, entity-framework, reflection

我会尽量简短而清楚地回答这个问题。

我们有一个使用实体框架 4 的 asp.net mvc 应用程序。

我们的业务模型相对简单：我们有一个名为 Photo(s) 的对象（对应于一张表）。该照片表有一些与对象的属性相匹配的列。描述、标题、日期等。它还有一些引用其他表的外键的列：AuthorId、LicenseId 等...

作者和许可证表本身就很复杂，有多个字段（标题、摘要、日期等）

我有多个客户使用此应用程序查看他们的照片。我希望每个客户都指定他们在查看照片时看到的字段，以及他们在编辑这些字段时看到的字段。

我的想法是设置表格，说明客户端 A 在查看照片时应该看到 Field1、Field2 和 Field3，而客户端 B 应该看到 Field1、Field4 和 Field5。但是其中一些字段不仅仅是主照片表中的列，它们可能是子表中的字段。所以 Field1 可能是：Table.Photos.Title -> 对应于对象：Objects.Photo.title... 但 Field3 可能是：Table.Licenses.LicenseSummary -> 对应于对象：Objects.Photo。 License.LicenseSummary

我试图找出我们将使用的方法来拥有一个非常数据驱动的环境，所以我可以说在数据库中显示这个对象/属性（用于查看或编辑），然后它会知道如何映射到任何表它需要提取这些信息。此外，在编辑过程中......如果它是那种类型的属性，而不仅仅是一个文本字段，请给它一些方法来提取可用值的列表。

我正在寻找这可能涉及的示例，我们的模型实际上比这更复杂，但这只是我们试图完成的一个想法。我不知道我正在尝试做的事情是否正常，也许它涉及反思？这对我来说是一个新领域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:14:37.787

如果客户正在定义他们自己的自定义字段，我会简单地给他们一个键/值对表。

```
PhotoID    FK
Key        string
Value      string
Display    bool 
```

请注意，这基本上相当于[EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)，它有自己的一系列困难。

如果只是关于现有字段的权限，则需要捕获该信息：

```
PhotoID    FK
ClientID   FK
FieldName  string
Display    Bool 
```

您可以使用此信息来禁止在视图中显示字段。`Display`最简单的方法是在视图本身中使用循环，仅当设置为时才将字段写入输出`true`。

# ios - 使用 NSAttributedString/NSString 和 UILabel 将数字转换为大写数字

> ID：15663661
> 
> 赞同：0
> 
> 时间：2013-03-27T16:10:33.793
> 
> 标签：ios, fonts, nsstring, uilabel, uppercase

我在这里使用的字体对于大写和小写数字具有不同的外观。这在文本编辑器和 Adob​​e 的工具中非常有效（通过将标签设置为仅大写），我认为这在 UIKit 中也可以通过 uppercaseString 方法运行字符串，但它似乎并没有真正转动数字成他们的大写版本。

那么……如何在 UIKit 中将数字转换为大写？我可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T19:19:09.660

[这篇博文](http://blog.amyworrall.com/post/46329875785/core-text-and-upper-case-numbers)可能会有所帮助。

另请注意，虽然这些有[很多不同的术语](http://en.wikipedia.org/wiki/Text_figures)，但在排版世界中，它们通常被称为***衬里***和***旧式***数字，而不是“大写和小写数字”

# regex - 查找所有点文件，但不是 . 或 .. 正则表达式

> ID：15663663
> 
> 赞同：1
> 
> 时间：2013-03-27T16:10:39.223
> 
> 标签：regex, emacs, elisp

使用 dired-omit-file，我有一个正则表达式来查找（和过滤）所有点文件。问题是，我想保留 . 和 .. 在文件列表中。

这是我目前拥有的代码：

```
(add-hook 'dired-mode-hook
  (lambda ()
  (setq dired-omit-files
        (concat dired-omit-files "\\|^\\..+$")))) 
```

如何改进它以输出我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:34:05.847

这应该适合您的需求：

```
^([.][^.].*|[^.]+[.].*)$ 
```

*以点开头的名称，后跟除点以外的任何字符，或以除点以外的任何字符，至少包含一个点。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T01:18:49.667

我的简短回答是：

```
^\\.\\w.*$ 
```

说明: 以 '.' 开头的字符串 后跟一个 WORD，后跟 0 个或多个任意符号。WORD 不包括 '.' 性格，并确保你会留住你'。和“..”条目。

如果您想了解有关正则表达式的更多信息，可以在此处阅读 emacs 手册中的部分：http: [//emacswiki.org/emacs/RegularExpression](http://emacswiki.org/emacs/RegularExpression)

另一个测试正则表达式的好方法是内置于 emacs 中的正则表达式构建器。`M-x regexp-builder`. 您可以进入`*scratch*`缓冲区并写下一些文件名。一旦你有了一些，调用 regexp-builder 它将突出显示与你的正则表达式匹配的所有内容。

# php - 通过复制和粘贴在刚刚创建的私钥上调用 openssl_pkey_get_private()

> ID：15663666
> 
> 赞同：0
> 
> 时间：2013-03-27T16:10:52.907
> 
> 标签：php, openssl, rsa, phpseclib

以下代码创建一个公钥/私钥对，使用 openssl_pkey_get_private() 函数成功打开密钥并将密钥对发送到显示器。然后将先前创建的密钥复制并粘贴回代码中。我尝试打开以前有效的完全相同的私钥，但现在它失败了。

有兴趣的可以从以下网址获取该库： http: [//phpseclib.sourceforge.net/index.html](http://phpseclib.sourceforge.net/index.html)

我正在使用昨天从源伪造网站下载的 phpseclib0.3.1。

问题是什么？

这是完整的代码。回显的结果已准备好进行复制和替换。

```
<?php
    set_include_path(get_include_path() . PATH_SEPARATOR . '../libraries/phpseclib');
    include('../libraries/phpseclib/Net/SSH2.php');
    include('../libraries/phpseclib/Crypt/RSA.php');

    $rsa = new Crypt_RSA();

    //$rsa->setPrivateKeyFormat(CRYPT_RSA_PRIVATE_FORMAT_PKCS1);
    //$rsa->setPublicKeyFormat(CRYPT_RSA_PUBLIC_FORMAT_PKCS1);

    //define('CRYPT_RSA_EXPONENT', 65537);
    //define('CRYPT_RSA_SMALLEST_PRIME', 64); // makes it so multi-prime RSA is used
    extract($rsa->createKey()); // == $rsa->createKey(1024) where 1024 is the key size

    echo("<h1 style=\"margin: 0; padding: 0;\"><b><u>Create Keys</u></b></h1><br />");
    echo("\$privatekey2 = \"$privatekey\";<br /><br />");
    echo("\$publickey2 = \"$publickey\";<br /><br />");

    // Decrypt argument
    define("KEY_PASSPHRASE", "");
    $key = openssl_pkey_get_private($privatekey, KEY_PASSPHRASE);
    if (FALSE == $key)
    {
            echo("Failed to get the private key<br />");
            return false;
    }
    else
            echo("Successfully obtained private key.<br />");

    echo("<h1 style=\"margin: 0; padding: 15px 0px 0px 0px;\"><b><u>Read Copy and Pasted Keys</u></b></h1><br />");

    $privatekey2 = "-----BEGIN RSA PRIVATE KEY----- MIICXAIBAAKBgQDPyrp/i8WSh8qmGHhTMaKgZeKj9X/Qh+8PrEFa8BqUMyZs61dGN9Cl9fKUq1iz cgRZWQsMPxNTmRvO4gWjBnkr1HQRELLywpfb6ecOin3uPeGY06Kme/DSRfS9YGOxy5rmhzNaCaSG WLdOUUFnQYCKdO5KkvqJSqnFYoLMBfLzEwIDAQABAoGBAJtAd1Ow1O+Ecc7j3ZMbNMzvEwU5+kOO LPni0/nkB5fPF9ithcm7DjPRrWuTEnUQrVssgmql/gSqEvLiQR/rSEA0jtgQ6n2m87SbWNz0DTLp j9jWFHbLFgo865IfssOiiht44FKWyMhQ9/FeH9gBQ0xTbHQIl8Hf/vm59n8wi3AhAkEA6fm6POv/ P+/u0Xz170FVcFVF8HosyPCiHTesdaf3U27Z8nxpPJmybf2+ZH7eJt5HUQAMvsJB75pe7gp7Iiwc awJBAONaCV5kfgmY1xGsRaWme21o1/wxqW8tX3/8glGQ1HeehiEnQ6krlNifrmeH2sBA+BpGhBGJ SovQKZA66TNFrfkCQEQpMAwXZCCoMRZuJOcyTUWQUfOgY/OVxmRkl6Ue7XoszOlLPQ0eaVCJnzF/ lBAWqQf7z7qytKqsegM2onBuEUkCQCmlY5Pz6paNddAZ84Qdk/x9uRrMahIgiJ7kPWb9lb33vvAx xhYmEpT/4y252Bthi1Ec27JuqMYlsodmEzO+LtkCQAVoE1zVkf/pQnUMcTyEE7vDAUouRjiXZHV7 JZq0uOu4ArQFhFBZILIfB9RYbb3Mr1mh1/pt+JipwtMuQ5Nnh7g= -----END RSA PRIVATE KEY-----";
    $publickey2 = "-----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDPyrp/i8WSh8qmGHhTMaKgZeKj9X/Qh+8PrEFa 8BqUMyZs61dGN9Cl9fKUq1izcgRZWQsMPxNTmRvO4gWjBnkr1HQRELLywpfb6ecOin3uPeGY06Km e/DSRfS9YGOxy5rmhzNaCaSGWLdOUUFnQYCKdO5KkvqJSqnFYoLMBfLzEwIDAQAB -----END PUBLIC KEY-----";
    echo("\$privatekey2 = \"$privatekey2\";<br /><br />");
    $key2 = openssl_pkey_get_private($privatekey2, KEY_PASSPHRASE);
    if (FALSE == $key2)
    {
            echo("Failed to get the copy and pasted key<br />");
            return false;
    }
    else
            echo("Successfully obtained private copy and pasted key.<br />");
?> 
```

这是一个示例输出。此处的结果用作后续运行的输入（复制和粘贴）。

```
Create Keys
$privatekey2 = "-----BEGIN RSA PRIVATE KEY----- MIICXAIBAAKBgQDA5Ehy7A/nZ0CB+xikxods0MzID8OQfJof4nCiKAa7dEv4Z/FA5KpxVSPj+ZQj X+zdm7QLHfqOGTz6ac1eOtmBCmm1VtNh5cxRQwR00GV+PTpuaUjOghL/upcJ8RlC2UAkBMIlw+7O 3rZ+B5ykHSWF2fWyX9uk7N9Ls4LUjDLs7QIDAQABAoGAFp/wG4Kyztqeh2BzYIhkxA+tpV2r+5uR 3GGMAokdWQloC8ftVUY887Qf1JKmnIuY1dl4gcFPbTFqpJiaXQ4cCsFWMjYKcVrTZj38QaWp/ikc 4ZEuYfV6dr2FDUaQaIYlqPvCxmrc7eISHDZEvPNT9LUZcAtxzeJMTIXrbf6T9MECQQD0nH2fGglp FweVVjec/fp2coJuxiI3rtWuLP0Gy3a95d/UbSTxw+gXgVdTTSZy2FfHsTrc4J49jAbTYvVHqPj9 AkEAyd9Zep/jlbGOPIim+UTzvNJsQnJRC4jS1BsYjP/digMkNDQG/nt4R2QZVlTHXM7+abdbeXYA yW3AOPHzP8++sQJBAMJHmK7JKzhAhlFiDQGv50I0aMw6qeq3/hc8vCqtZz4kWcaKeZFcG/avUABl gmgs1GtSpIHSFVyk3rb+HfowhrECQBRFdmHG7n6YrtTLUCEV2HfslWxyuEq1OZ6M/gEirGdwe1E2 rEEfuutIVPcDWmWqb4fEHs5qmBeiCrxtJ2UQAnECQCoUFle3/XAll4sACiV5/Endd7DKCM1g6jQd rtCbvzHh/j6P3sZEGuTZcuDWYmtNVUy6E2HHfNNwztZxVEJZqW4= -----END RSA PRIVATE KEY-----";
$publickey2 = "-----BEGIN PUBLIC KEY----- MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDA5Ehy7A/nZ0CB+xikxods0MzID8OQfJof4nCi KAa7dEv4Z/FA5KpxVSPj+ZQjX+zdm7QLHfqOGTz6ac1eOtmBCmm1VtNh5cxRQwR00GV+PTpuaUjO ghL/upcJ8RlC2UAkBMIlw+7O3rZ+B5ykHSWF2fWyX9uk7N9Ls4LUjDLs7QIDAQAB -----END PUBLIC KEY-----";

Successfully obtained private key.

Read Copy and Pasted Keys
Failed to get the copy and pasted key 
```

更新 1： phpseclib0.3.1 似乎没有该更改，但是更改并没有解决问题，至少从复制和粘贴来看。我手动更改了 RSA.php（v0.3.1 上的第 795-804 行）：

```
$RSAPrivateKey = "-----BEGIN RSA PRIVATE KEY-----\r\n" .
                                 "Proc-Type: 4,ENCRYPTED\r\n" .
                                 "DEK-Info: DES-EDE3-CBC,$iv\r\n" .
                                 "\r\n" .
                                 chunk_split(base64_encode($des->encrypt($RSAPrivateKey)), 64) .
                                 '-----END RSA PRIVATE KEY-----';
            } else {
                $RSAPrivateKey = "-----BEGIN RSA PRIVATE KEY-----\r\n" .
                                 chunk_split(base64_encode($RSAPrivateKey), 64) .
                                 '-----END RSA PRIVATE KEY-----'; 
```

更新 2：我得到了工作的代码。我不确定上面是否包含 ", 64" 是否起到了作用或是否需要，但诀窍是用 "\n" 替换看起来像空格的字符，可能来自复制和粘贴作业. 一旦我这样做了，那么瞧！可能需要两次编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:42:26.047

你使用的是最新的 Git 版本的 phpseclib 吗？我问是因为前一段时间有这个提交：

[https://github.com/phpseclib/phpseclib/commit/e4ccaef7bf74833891386232946d2168a9e2fce2#phpseclib/Crypt/RSA.php](https://github.com/phpseclib/phpseclib/commit/e4ccaef7bf74833891386232946d2168a9e2fce2#phpseclib/Crypt/RSA.php)

提交的灵感来自[https://stackoverflow.com/a/13908986/569976](https://stackoverflow.com/a/13908986/569976)

# r - 具有矩阵参数的 R 函数以查找特征值和特征向量

> ID：15663669
> 
> 赞同：-1
> 
> 时间：2013-03-27T16:10:59.450
> 
> 标签：r, statistics

我只是在编写一个 R 函数来对某些协方差矩阵进行 PCA。在这里，当我尝试使用特征函数来获取特征值和特征向量时，编译器说找不到对象。有什么办法可以解决这个问题吗？我的代码如下：

```
lab3<-function(cov,scale){ 
  if (scale==F)
  cov<-cov2cor(cov)

  dimension<-nrow（cov）
  eig<-eigen(cov)$values
  total<-sum(eig)
  stdev<-sqrt(eig)
  rotation<-eigen(cov)$vectors
  indp<-c(1:dimension)
  cump<-c(1:dimension)
  for （i in 1:dimension）
  {indp[i]=eig[i]/total
   cump[i]=sum(eigenvalue[1:i])/total
  }

  output=list(stdev,rotation,indp,cump)

} 
```

谢谢。

输入就可以`d<-matrix(c(1,-2,0,-2,5,0,0,0,2),3)` 运行`lab3(d,T)`代码了.. 造成的混乱真的很抱歉。我不打算这样做，只是我不知道。谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:21:13.463

直接的问题是，在

```
cump[i]=sum(eigenvalue[1:i])/total 
```

你指的是`eigenvalue`哪个不存在。我想你打算在`eig`这里使用：

```
cump[i]=sum(eig[1:i])/total 
```

从评论来看，错误似乎是：

```
as.vector(x, mode) : cannot coerce type 'closure' to vector of type 'any' 
```

我怀疑这是因为您在未指定的情况下调用该函数`scale`。然后，R 将找到`scale`函数（闭包），并且不能将其强制为`if()`语句所需的类型。解决此问题的一种简单方法是执行以下操作之一：

```
lab3 <- function(cov, scale = FALSE) {
.... 
```

或者

```
lab3 <- function(cov) {
  if(missing(scale))
    scale <- FALSE
.... 
```

首选第一种形式。

还有其他问题；

1.  你肯定想要

    ```
    if(scale)
      cov <- cov2cor(cov) 
    ```

    ? 即仅当您希望将所有变量缩放为零均值单位方差时才需要相关矩阵，

2.  使用`for`这两行可以更有效地完成循环：

    ```
    indp <- eig / total
    cump <- cumsum(indp) 
    ```

    你根本不需要循环，`for`也不需要先设置。`indp``cump`

3.  你打电话`eigen()`两次。最好调用一次并保存整个返回的对象。您想要的位的子集。

如果我解决了所有这些问题，那么我们有以下功能：

```
lab3 <- function(cov, scale=FALSE){ 
  if (scale)
    cov <- cov2cor(cov)

  ed <- eigen(cov)
  eig <- ed$values
  total <- sum(eig)
  stdev <- sqrt(eig)
  rotation <-ed$vectors
  indp <- eig / total
  cump <- cumsum(eig)

  list(stdev, rotation, indp, cump)
} 
```

哪个有效：

```
> lab3(cov(iris[, 1:4]))
[[1]]
[1] 2.0562689 0.4926162 0.2796596 0.1543862

[[2]]
            [,1]        [,2]        [,3]       [,4]
[1,]  0.36138659 -0.65658877 -0.58202985  0.3154872
[2,] -0.08452251 -0.73016143  0.59791083 -0.3197231
[3,]  0.85667061  0.17337266  0.07623608 -0.4798390
[4,]  0.35828920  0.07548102  0.54583143  0.7536574

[[3]]
[1] 0.924618723 0.053066483 0.017102610 0.005212184

[[4]]
[1] 4.228242 4.470912 4.549122 4.572957 
```

最后，我会注意到，出于数值稳定性的原因，通过奇异值分解进行 PCA 被认为比通过特征分解更好。您可以通过`princomp`或最好`prcomp`在基础 R中完成所有这些操作。

# for-loop - 在 LOOP 中使用“at”CMD 调度

> ID：15663671
> 
> 赞同：0
> 
> 时间：2013-03-27T16:11:03.473
> 
> 标签：for-loop, cmd, at-job

我想远程对磁盘进行碎片整理。我试过这个简短的脚本：

```
for /f "delims=" %%s in (servers.txt) do (
at \\%%s 20:00 defrag.exe c: -f
)
@pause 
```

通常其他命令工作，例如`ping %%s`。不幸的是，当我使用`at`不起作用的“”命令时（该命令在第一台服务器上“循环”并在该 CMD 窗口关闭之后）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:26:46.077

我相信`defrag.exe c: -f`应该用引号引起来。

```
for /f "delims=" %%s in (servers.txt) do (
at \\%%s 20:00 "defrag.exe c: -f" ) 
@pause 
```

# php - php不能部分替换gd图片

> ID：15663675
> 
> 赞同：1
> 
> 时间：2013-03-27T16:11:16.273
> 
> 标签：php, wordpress, gd

我正在尝试根据我的捐赠百分比对图像进行部分着色，所以我发现的方法是将彩色图像的一个小部分复制到等效的黑白图像中，这样我就可以用任何图像实现一个小压力表我想。

```
<?php
function createPartialGraycaleCopy($post_id, &$image_src_path,&$image_src_filename,&$bw_image_filename,$valor_currente,$objectivo)       {
    $post_thumbnail_id = get_post_thumbnail_id($post_id);
    // Find thumbnail locations
    $image_src = wp_get_attachment_image_src($post_thumbnail_id, 'thumbnail');
    $image_src_path = dirname($image_src[0]);
    $image_src_filename =substr(basename($image_src[0]), 0, strpos(basename($image_src[0]), "?")) ;

    // Create greyscale filename
    $image_src_extention_loc = (strripos($image_src_filename, '.') - strlen($image_src_filename));
    $bw_image_filename = substr($image_src_filename, 0, $image_src_extention_loc) . '_bw' . substr($image_src_filename, $image_src_extention_loc);

    // Get the local path of the image
    $wpcontent_image_path = dirname(get_attached_file($post_thumbnail_id));

    // Create greyscale image
    $bw_image = wp_load_image( $wpcontent_image_path . '/' . $image_src_filename);

    // Apply greyscale filter
    imagefilter($bw_image, IMG_FILTER_GRAYSCALE);

    header("Content-Type: image/jpeg"); 

    //Output the newly created image in jpeg format 
    ImageJpeg($image);                           // Save the image.
    imagejpeg($bw_image,$wpcontent_image_path . '/' . $bw_image_filename, 100);

    imagedestroy($bw_image);

   partialGrayscale($image_src_path,$image_src_filename,$bw_image_filename,$valor_currente,$objectivo)     ;
}         

function  partialGrayscale  ($image_src_path,$image_src_filename,$bw_image_filename,$valor_currente,$objectivo){
    // Create image instances
    $color = imagecreatefromjpeg($image_src_path . '/' . $image_src_filename);
    $saturated = imagecreatefromjpeg($image_src_path . '/' . $bw_image_filename);

    $percentagemCompleto=round((100*$valor_currente)/(100-$valor_currente));
    $comprimentoSaturado=imagesx($saturated)-(round(imagesx($saturated)*($percentagemCompleto/100)));
    $alturaSaturada=imagesy($saturated)-(round(imagesy($saturated)*($percentagemCompleto/100)));

    // Greyscale operation
   echo imagecopyresampled ($saturated, $color, 0, 0, 0, 0, $comprimentoSaturado, $alturaSaturada,$comprimentoSaturado, $alturaSaturada);   

    // Save the greyscale image file
    header("Content-Type: image/jpeg"); 

    //Output the newly created image in jpeg format 
                 // Save the image.
    imagejpeg($saturated,$wpcontent_image_path . '/' . $bw_image_filename, 100);
    // Remove original images from memory.
    imagedestroy($color);
    imagedestroy($saturated);
} 
```

?>

我可以成功创建黑白图像，但无法进行复制部分。我究竟做错了什么？有一个更好的方法吗

# html - 列表标题的咏叹调标签，语义正确吗？

> ID：15663679
> 
> 赞同：1
> 
> 时间：2013-03-27T16:11:24.023
> 
> 标签：html, semantic-markup

我有一个菜单项链接列表，其中包含描述菜单的标题。这个菜单是向左浮动的，所以为了减少标记，我已经将标题作为它的一部分，`ul`所以它很容易浮动。

例如

```
<ul>
    <li class="heading">My Title</li>
    <li><a href="">Link</a></li>
    <li><a href="">Link</a></li>
    <li><a href="">Link</a></li>
    <li><a href="">Link</a></li>
</ul> 
```

我应该做一些特别的事情来分隔标题吗？添加[wai-aria](http://www.w3.org/TR/wai-aria/roles) ? 搜索引擎有可能会混淆吗？

它本身在语义上似乎并不正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T17:50:36.817

根据[在 HTML 中使用 WAI-ARIA](http://www.w3.org/TR/aria-in-html/)`li`的工作草案，一个元素可能具有各种角色，但`heading`不在其中。所以不，您不应该使用 ARIA 属性将列表项声明为标题。

因此，正如@JamesDonnelly 所建议的那样，将标题作为列表之前的单独标题元素会更合适，尽管您需要根据整体结构选择标题的级别。

（搜索引擎可能不在乎。）

（这实际上不是关于语义，而是关于结构。语义是关于意义，将元素声明为标题并不能描述它的意义，只是它与结构的关系或它的作用。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T16:19:19.053

我认为将标题与列表分开在语义上会更正确（作为链接列表而不是链接和标题列表）。但是，我不知道这将如何影响搜索引擎。但这不应该使样式变得更加困难：

```
<div>
    <h4>My Title</h4>
    <ul>
        <li><a href="">Link</a></li>
        <li><a href="">Link</a></li>
        <li><a href="">Link</a></li>
        <li><a href="">Link</a></li>
    </ul>
</div> 
```

如果您希望它们内联显示，您可以简单地：

```
div h4, div ul, div ul li { display:inline-block; }
div ul { list-style-type:none; padding:0; } 
```

[JSFiddle 示例](http://jsfiddle.net/RNEgw/)。

# sql-server - 用户知道在 Windows 7 中的 Vb6 ADODC 登录失败

> ID：15663680
> 
> 赞同：0
> 
> 时间：2013-03-27T16:11:25.383
> 
> 标签：sql-server, windows-7, vb6, truedbgrid

我有一个带有`Apex TruedbGrid 6`Oledb 数据源的表单的 vb6 项目，该表单在同一表单上具有 ADODC (Ado 6.0 sp6)。

`cn.ConnectionString = "Provider=SQLNCLI.1;Data Source=pc-musica;Initial Catalog=QdE;User ID=sa;Password=*******"`

在 Form_Load 中：

```
Adodc.ConnectionString = cn.ConnectionString
Adodc.RecordSource = "Select Code, Description from Cantine"
Adodc.Refresh 
```

当仅在 Windows 7 上执行最后一条语句`Adodc.Refresh`时（因为一切都在 Xp 中安静地工作）给了我错误：

`Login failed for the user, type: -2147217843 Automation Error.`

我检查了连接字符串，当程序使用相同的连接打开记录集并安静运行时也是正确的。

连接在模块中声明。

你认为我可以如何修复 Windows 7 32 位？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T09:58:11.913

您应该使用 ; 在字符串上添加属性`Persist Security Info=true`

发生这种情况是因为在 Windows Vista 或 Windows 7 上有一个新的安全修复程序，这会导致连接字符串出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:44:16.190

有一个[错误报告](http://support.microsoft.com/kb/304310)表明，如果您的密码带有尾随空格，则可能会发生这种情况。他们的建议是：

> 要变通解决此问题，请使用 OLE DB Provider for ODBC Driver 而不是 OLE DB Provider for SQL Server，或者不要创建带有尾随空格的密码。

如果不是这样，你可以尝试用不同的提供者重写它。或者更换网格。我在让 VB6 在 Windows 7 上运行时遇到了一些麻烦。

# jquery - jQuery AJAX 无法使用 IE

> ID：15663681
> 
> 赞同：0
> 
> 时间：2013-03-27T16:11:26.973
> 
> 标签：jquery, ajax, json, internet-explorer

我在 SO 和其他地方看到过很多其他人遇到这个问题，但给定的解决方案似乎都不适合我。

我有一个对 ASHX 处理程序的 jQuery AJAX 调用。该代码适用于 Firefox 和 Chrome，但不适用于 IE（版本 8、9 或 10）。

它看起来像这样（简化）：

```
var val = $(this).val();

$.ajax({
    url: '/Source/Handlers/Search.ashx?q=' + val,
    type: "GET",
    cache: false,
    dataType: 'json',
    error: function(w,t,f) {
         alert(w + "\n" + t + "\n" + f);
    },
    success: function (data) {
         ...
    }
 }); 
```

当我在 IE 中运行代码时，错误处理程序会启动并说

```
[object Object]
error
error 
```

有用吧？

ASHX 处理程序是这样的（再次简化）：

```
public class Search : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        context.Response.ContentType = "application/json";
        context.Response.Buffer = false;

        JavaScriptSerializer serializer = new JavaScriptSerializer();
        List<Suggestions> jsonResponse = new List<Suggestions>();

        // do some stuff

        context.Response.Write(serializer.Serialize(jsonResponse));
    }
} 
```

我尝试将“GET”换成“POST”，尝试启用和禁用“cache”属性，尝试不同的数据类型设置，例如“json”、“xml”和“text”。

使用 HTTP Fiddler 我可以看到 json 响应确实回来了，但 IE 似乎无法处理它。

有任何想法吗？

**编辑**

这是来自 HTTP Fiddler 的 TextView 中的 JSON 响应：

```
543
[{"title":"GAMES","results":[{"title":"abcdefg™","link":"http://www.abcdefg.com/en_gb/abcdefg/","image":"/uploadedImages/abcdefg/games/1-Game_Folder_Master(1)/Config/abcdefg(1).jpg","total":""},{"title":"abcdefg","link":"http://www.abcdefg.com/en_gb/abcdefg","image":"/uploadedImages/abcdefg/games/1-Game_Folder_Master(1)/Config/abcdefg.jpg","total":""},{"title":"abcdefgg","link":"/Retailers/?game=1432&amp;platform=0","image":"/uploadedImages/abcdefg/games/1-Game_Folder_Master(1)/Config/abcdefg.jpg?n=9736","total":""},{"title":"abcdefg","link":"http://www.abcdefg.com","image":"/uploadedImages/abcdefg/games/1-Game_Folder_Master(1)/Config/abcdefg.jpg","total":""},{"title":"abcdefg","link":"/Retailers/?game=1763&amp;platform=0","image":"/uploadedImages/abcdefg/games/1-Game_Folder_Master(1)/Config/abcdefg_promo.jpg","total":""}],"total":"24","link":"/Search/?q=total"},{"title":"MEDIA","results":[{"title":"Videos","link":"/Search/?q=total","image":"","total":"1"},{"title":"Screenshots","link":"/Search/?q=total","image":"","total":"35"}],"total":null,"link":null}]
0 
```

**编辑 2**

嗯，我更新了 $.ajax 调用以提醒 w.status 并返回“404”。困惑 - 当 Fiddler 将响应显示为 200 时，它如何返回 404 状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:17:47.920

我依稀记得这样一个问题。你可以尝试添加

```
contentType: "application/json; charset=utf-8" 
```

到 ajax 请求属性。我认为这解决了当时的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:14:55.500

尝试添加`data : {q : val}`并查看是否可以解决问题：

```
 var val = $(this).val();

 $.ajax({
    url: '/Source/Handlers/Search.ashx',
    type: "GET",
    data : {q : val},  //<--------send it this way
    cache: false,
    dataType: 'json',
    error: function(w,t,f) {
       alert(w + "\n" + t + "\n" + f);
    },
    success: function (data) {
       ...
    }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T09:04:04.860

经过大量的试验和错误，我发现了问题。使用 IE 时，我需要对从我的 ASHX 处理程序返回的数据对象调用 JSON.parse(data)。为此，请使用调用 Ajax 的非 jQuery 方法。这意味着我有两种不同的 Javascript 块——一种用于 IE，另一种用于其他浏览器。

```
if ($.browser.msie) {
    var xhReq = new XMLHttpRequest();
    xhReq.open("GET", "/Source/Handlers/Search.ashx?q=" + val + "&d=" + dateObj.getTime(), false);
    xhReq.send(null);
    AjaxSuccess(xhReq.responseText);
} else {
    $.ajax({
        url: '/Source/Handlers/Search.ashx',
        type: "GET",
        cache: false,
        dataType: 'json',
        data: { q: val },
        contentType: "application/json;",
        error: function (xhr, ajaxOptions, thrownError) {
            alert(xhr.responseText);
        },
        success: function (data) {
            ...
        }
    });
 }

 function AjaxSuccess(data) {
     data = JSON.parse(data);
     ...
 } 
```

奇怪的是，JSON.parse() 方法在 Firebug 中引发了“意外字符”错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-17T10:57:37.043

可能编码有问题。试试这个

```
$.ajax({
        type: 'GET',
        url: encodeURI(url ),
        dataType: 'text',
        success: function (data) {
                            result = JSON.parse(JSON.parse(data))
                                                }
       }); 
```

# class - 统一容器。如何注册一个带参数的类构造函数

> ID：15663683
> 
> 赞同：0
> 
> 时间：2013-03-27T16:11:30.040
> 
> 标签：class, dependency-injection, constructor, dependencies, unity-container

我是 Microsoft Unity Container 的新手，所以我的问题可能很简单。我必须为只有一个无参数构造函数的类注册和解析实例。现在我想学习如何使用简单的构造函数注册和解析一个类。这是我的课。

```
public class MyClass
{
    private string a1;

    public string A1
        {
        get { return a1; }
        set { a1 = value; }
        }
    private int a2;

    public int A2
        {
        get { return a2; }
        set { a2 = value; }
        }
    public MyClass()
    { this.a1 = "aaaaa";
    this.a2 = 1;
    }

    public MyClass(string a1,int a2)
        {
        this.a1 = a1;
        this.a2 = a2;
        }
    } 
```

我必须注册并解析 MyClass() 构造函数；然后，我尝试注册第二个

```
 //App.xaml.cs
        container = new UnityContainer();
        container.RegisterType<MainView>();
        ............
        container.RegisterType<string>("A1");
        container.RegisterType<int>("A2");
        container.RegisterType<MyClass>("MyClassConstructor",new InjectionConstructor(new ResolvedParameter<string>("A1"),new ResolvedParameter<int>("A2")));

        //NavigationService.cs, create an instance of MyClass("mystring",100) and bind it to a window
        public Window ShowMainView()
        {
        var window = Container.Resolve<MainView>();

        MyClass myClass = Container.Resolve<MyClass>("MyClassConstructor", new ParameterOverrides { { "A1", "mystring" }, { "A2", 100 } });
        window.DataContext = myClass ;
        window.Show();
        return window;
        } 
```

当容器尝试创建 MyClass 实例时，出现此错误：

依赖项解析失败，type = "MySolution.MyProject.ViewModels.MyClass"，name = "MyClassConstructor"。异常发生时：解决时。

## 异常是： InvalidOperationException - 无法构造类型 String。您必须配置容器以提供此值。

在异常发生时，容器是：

解析 MySolution.MyProject.ViewModels.MyClass,MyClassConstructor 解析构造函数 MySolution.MyProject.ViewModels.MyClass(System.String a1, System.Int32 a2) 的参数“a1” 解析 System.String,A1

请帮助我了解它是如何工作的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:50:31.873

你在注册方面做得太多了。
更重要的是，您需要指定构造函数参数名称（小写），而不是属性名称（大写）。

它应该是这样的：

```
 [TestMethod]
    public void Should_Be_Able_To_Pass_Parameters_To_Ctor()
    {
        var container = new UnityContainer();

        container.RegisterType<MyClass>();

        var myClass = container.Resolve<MyClass>( 
            new ParameterOverrides { { "a1", "mystring" }, { "a2", 100 } });

        Assert.IsNotNull(myClass);
        Assert.AreEqual("mystring", myClass.A1);
        Assert.AreEqual(100, myClass.A2);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T14:26:19.977

尝试这个

```
int start_at = 1;
container.Register(
    Component.For<IMyComponent>().DependsOn(dependency: Dependency.OnValue<int>(start_at))
); 
```

# c# - 为什么弹出窗口不显示？

> ID：15663684
> 
> 赞同：1
> 
> 时间：2013-03-27T16:11:30.490
> 
> 标签：c#, windows-phone-7.1

第一的：

```
public MainPage()
{
    InitializeComponent();

    this.Loaded += new RoutedEventHandler(MainPage_Loaded);
}

void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    Verdienen v = new Verdienen(4, 3);
} 
```

然后： public Verdienen(int attesaInSecondiIniziale = 20, int attesaInSecondiFinale = 8) { this.AttesaInSecondiIniziale = attesaInSecondiIniziale; this.AttesaInSecondiIniziale = attesaInSecondiFinale; MostraPerQuestaSezione = false;

```
 popup = new Popup();
        Border border = new Border();
        border.Background = new SolidColorBrush(Colors.LightGray);
        border.Margin = new Thickness(3);
        StackPanel panelVerticale = new StackPanel();
        panelVerticale.Orientation = Orientation.Vertical;
        AdControl control = new AdControl();
        panelVerticale.Children.Add(control);
        StackPanel panelOrizzontale = new StackPanel();
        panelOrizzontale.Orientation = Orientation.Horizontal;
        Button bAltreApp = new Button();
        bAltreApp.Content = "";
        bAltreApp.Tap += new EventHandler<GestureEventArgs>(bAltreApp_Tap);
        Button bVota = new Button();
        bVota.Tap += new EventHandler<GestureEventArgs>(bVota_Tap);
        bVota.Content = "";
        panelOrizzontale.Children.Add(bAltreApp);
        panelOrizzontale.Children.Add(bVota);
        panelVerticale.Children.Add(panelOrizzontale);
        border.Child = panelVerticale;
        popup.Child = border;

        this.ShowPopup();
    }

    private async **System.Threading.Tasks.TaskEx** ShowPopup()
    {
        do
        {
            Debug.WriteLine("thread iniziato. pausa cominciata");
            await System.Threading.Tasks.TaskEx.Delay(1000 *    this.AttesaInSecondiIniziale);
            Debug.WriteLine("thread: fine pausa");
            popup.IsOpen = true;
            await System.Threading.Tasks.TaskEx.Delay(1000 * this.AttesaInSecondiFinale);
            popup.IsOpen = false;
        } while (MostraPerQuestaSezione);
    } 
```

你能告诉我为什么这段代码不显示弹出窗口吗？注意：一些不必要的代码不存在！编辑：请注意*System.Threading.Tasks.TaskEx*被标记为错误（“异步方法的返回状态必须为 void、Task 或 Task”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:14:32.457

使用 时`Thread.Sleep`，会阻止 UI 消息泵。这会阻止系统显示您的弹出窗口，因为它在正确处理消息之前不会显示。

更好的方法是将其移动到异步方法中，并在构造后调用它：

```
public async Task ShowPopup(int attesaInSecondiIniziale = 20, int attesaInSecondiFinale = 8)
{
   // Your code...

   do
   {
      await Task.Delay(1000 * this.AttesaInSecondiIniziale);
      this.ShowPopup();
      await Task.Delay(1000 * this.AttesaInSecondiIniziale);
      this.HidePopup();       
   }
   while (MostraPerQuestaSezione);
} 
```

通过在异步方法中使用`Task.Delay`with `await`，您不会阻塞 UI。但是，这需要使用[异步定位包](https://nuget.org/packages/Microsoft.Bcl.Async)来定位 WP7.5 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:14:44.147

```
this.ShowPopup(); ...
this.HidePopup(); 
```

应该

```
popup.ShowPopup(); ...
popup.HidePopup(); 
```

你正在打电话`this`，在这种情况下，`this`是一个`Verienen`对象，你没有

`ShowPopup()`或`HidePopup()`方法

# java - 带有 JExcelAPI 的 Spring 3（注释）

> ID：15663685
> 
> 赞同：0
> 
> 时间：2013-03-27T16:11:32.257
> 
> 标签：java, spring, excel, annotations, jexcelapi

我正在尝试使用 Spring 3 和注释来完成本教程[http://www.mkyong.com/spring-mvc/spring-mvc-export-data-to-excel-file-via-abstractjexcelview/ 。](http://www.mkyong.com/spring-mvc/spring-mvc-export-data-to-excel-file-via-abstractjexcelview/)

所以我有一个 WebAppConfig 类

```
@Configuration
@ComponentScan("com.mkyong.common")
@EnableWebMvc
public class WebAppConfig {
  @Bean
  public InternalResourceViewResolver setupViewResolver() {
    InternalResourceViewResolver resolver = new InternalResourceViewResolver();
    resolver.setPrefix("/WEB-INF/pages/");
    resolver.setSuffix(".jsp");
    return resolver;
  }
} 
```

和一个 WebAppInitializer 类

```
class public class WebAppInitializer implements WebApplicationInitializer {

    public void onStartup(ServletContext servletContext) throws ServletException {
        XmlWebApplicationContext appContext = new XmlWebApplicationContext();
        String[] locations = { "classpath*:applicationContext.xml" };
        appContext.setConfigLocations(locations);
        ServletRegistration.Dynamic dispatcher = servletContext.addServlet("dispatcher", new DispatcherServlet(appContext));
        dispatcher.setLoadOnStartup(1);
        dispatcher.addMapping("/");
        servletContext.addListener(new ContextLoaderListener(appContext));
        servletContext.getServletRegistration ("default").addMapping ("*.js", "*.css", "*.jpg", "*.gif", "*.png");
    }
} 
```

我对经典页面（没有 excel）没有任何问题，但是使用 excel，应用程序会查找 ExcelRevenueSummary.jsp。

有人知道我怎么能“翻译”这个：

```
<bean id="ExcelRevenueSummary"
    class="com.mkyong.common.view.ExcelRevenueReportView">
</bean> 
```

以 Spring 3 使用的正确格式？

谢谢你。

# javascript - 本地存储 Javascript 和 JSONArray

> ID：15663687
> 
> 赞同：0
> 
> 时间：2013-03-27T16:11:44.370
> 
> 标签：javascript, json, local-storage

我正在尝试使用 JSONArrays 和 Objects 在本地存储数据。该程序所做的是获取我动态插入的几个滑块的值（有时是 1 个，有时是 2 个滑块，有时是 3 或 4 个......）。因此，我将产品的值和 id 与数组一起存储在本地。**但是有一个问题它只保存了第一个数组，push方法不起作用。**

这是代码：

```
function afegir_i_editar_llistacompra(){
    //Obtenim els valors dels sliders i els guardem a localhost 
    var id_product = $('body').data('product');
    var array_of_bought_colors_new = new Array({'id': id_product});
    var array_of_bought_colors_existing = get_product_info(id_product, 'cesta_list'); 

    for (var i = 0; $('#slider-'+i).val() != null ; i++) {
        array_of_bought_colors_new.push({'color':$('#slider-'+i).attr('name'),'value': $('#slider-'+i).val()});
    };

    if(array_of_bought_colors_existing != null){
        for (var i = array_of_bought_colors_existing.length - 1; i >= 1; i--) {
            if(array_of_bought_colors_existing[i].value != array_of_bought_colors_new[i].value)
                array_of_bought_colors_existing[i].value = array_of_bought_colors_new[i].value;
        };
    }else if( array_of_bought_colors_new.length > 1 && $('body').data('cesta_list') != null) {      
        $('body').data('cesta_list', $('body').data('cesta_list').push(array_of_bought_colors_new));
    }else{
        $('body').data('cesta_list', array_of_bought_colors_new);
    }
} 
```

我要保存的内容：

```
[{id:1},/*First slider -->*/{'color':'blue','value':2},/*Second slider -->*/{'color':'blue','value':32}] 
```

希望你能理解！

# c++ - 将一个 int 数组放入一个 char 中。C 或 C++

> ID：15663689
> 
> 赞同：-2
> 
> 时间：2013-03-27T16:11:48.740
> 
> 标签：c++, c

我正在尝试一些非常简单的事情（我认为），将一个 int 数组输出到一个 char 中，如下所示：

```
 int Z[10]={0};
 char buff[100];

 for(int i =0; i<10; i++){
    Z[i]+=10;
  }

   sprintf(buff,"%d",Z); 
 retunr buff; 
```

我希望你能帮助我或提供替代解决方案。

我怎样才能将所有这些值（int 数组）放在一个变量中？

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:15:20.317

您提供的代码不应该正常工作，因为`Z`它是一个数组`int`，而`%d`涉及一个`int`. 使用`sprintf`，可以将 的每个值`Z`放在一个字符串中：

```
#include <stdio.h>

int size = 0;

for (i = 0; i < 10; i++)
{
  size += sprintf(buff+size, "%d", Z[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:15:34.833

```
sprintf(buff,"%d",Z); 
```

是错的。您的想法是将整个数组放入缓冲区，这是行不通的。

它应该是

```
int ret = 0;
for(int i=0; i<10; i++)
{
  ret += sprintf(buff+ret, "%d", z[i]);
} 
```

代码片段只是一个示例。请确保您进行了充分的错误检查。

另一个建议是使用[snprintf](http://linux.die.net/man/3/snprintf)，它比 sprintf 更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:29:03.750

首先，*不要*使用`sprintf`. 这太危险了。其次，不要忘记分隔符。就像是：

```
std::ostringstream dest;
for ( int const* p = std::begin( Z ); p != std::end( Z ); ++ p ) {
    if ( p != std::begin( Z ) ) {
        dest << ' ';
    }
    dest << *p;
}
std::string results = dest.str(); 
```

应该做的伎俩。

# jquery - 切换隐藏的 div 时，为什么我的 div 在 Opera 中移动？

> ID：15663691
> 
> 赞同：0
> 
> 时间：2013-03-27T16:11:52.053
> 
> 标签：jquery, css, html, opera

这在所有其他浏览器中都可以正常工作，但是由于某种原因，当我在 Opera 中运行它时，当我单击 btn1 时，整个 app_cont div 似乎向左分流了几个像素。我认为它与 icon_div 有关，因为当我删除它时它不会分流。图标 div 实际上是 svg 图像，但我已将其更改为 div，因为我不知道如何将文件上传到 SO。如果有人可以向我解释我做错了什么，我将不胜感激。

谢谢。

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<style type="text/css">
@CHARSET "ISO-8859-1";
html,body,div,span,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,abbr,address,cite,code,del,dfn,em,img,ins,kbd,q,samp,small,strong,sub,sup,var,b,i,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,figcaption,figure,footer,header,hgroup,menu,nav,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}
body{line-height:1}
article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}
nav ul{list-style:none}
blockquote,q{quotes:none}
blockquote:before,blockquote:after,q:before,q:after{content:none}
a{margin:0;padding:0;font-size:100%;vertical-align:baseline;background:transparent}
ins{background-color:#ff9;color:#000;text-decoration:none}
mark{background-color:#ff9;color:#000;font-style:italic;font-weight:bold}
del{text-decoration:line-through}
abbr[title],dfn[title]{border-bottom:1px dotted;cursor:help}
table{border-collapse:collapse;border-spacing:0}
hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0;padding:0}
input,select{vertical-align:middle}

#app_cont {
    border: 1px solid grey;
    height: auto;
    width: 500px;
    margin: 200px auto;
    background: #efefef;
    -webkit-border-radius: 6px;
    -moz-border-radius: 6px;
    border-radius: 6px;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    font-family: Arial;
    padding: 10px
}

#ab_cont {
    float: left;
    height: auto;
    width: 100%;
    margin: 10px 0 0px 0;
}

#answerBox {
    margin: 0px 10px 15px 0px;
    padding: 5px 3px;
    height: auto;
    width: 225px;
    padding: 5px 8px;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    border: 1px solid grey;
    font-size: 30px;
    float: left;
}

#prog_bar {
    height: 20px;
    border: 1px solid grey;
    margin: 0px 10px 10px 0px;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    padding: 3px;
    background: #dfdfdf;
}

#prog_inner {
    height: 20px;
    -webkit-border-top-right-radius: 2px;
    -webkit-border-bottom-right-radius: 2px;
    -moz-border-radius-topright: 2px;
    -moz-border-radius-bottomright: 2px;
    border-top-right-radius: 2px;
    border-bottom-right-radius: 2px;
    -webkit-border-top-left-radius: 4px;
    -webkit-border-bottom-left-radius: 4px;
    -moz-border-radius-topleft: 4px;
    -moz-border-radius-bottomleft: 4px;
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px;
    background-color: #3299bb;
    width: 15%;
}

#btn_cont {
    border: 1px solid grey;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    background: #dcdcdc;
    clear: both;
    padding: 10px;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

#btn1 {
    margin-left: 20px;
    margin-right: 30px;
}

#btn3 {
    margin-right: 20px;
    margin-left: 30px;
}

#sub_btn {
    font-size: 20px;
    color: #545454;
    border: 1px solid #545454;
    height: 27px;
    vertical-align: middle;
    line-height: 27px;
    height: auto;
    margin: 0px 0px 15px 0px;
    float: left;
}

.app_btns {
    margin: 0;
    font-size: 16px;
    font-family: Arial;
    font-weight: normal;
    -moz-border-radius: 4px;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    border: 1px solid #ababab;
    padding: 9px 18px;
    text-decoration: none;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(5%, #ededed),
        color-stop(100%, #dfdfdf) );
    background: -moz-linear-gradient(center top, #ededed 5%, #dfdfdf 100%);
    background: -ms-linear-gradient(top, #ededed 5%, #dfdfdf 100%);
    filter: progid :                                 
                   DXImageTransform.Microsoft.gradient (             

                            startColorstr =                      
                              '#ededed', endColorstr =     

                 '#dfdfdf' );
    background-color: #ededed;
    color: #777777;
    display: inline-block;
    text-decoration: none;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.app_btns:hover {
    background: -webkit-gradient(linear, left top, left bottom, color-stop(5%, #dfdfdf),
        color-stop(100%, #ededed) );
    background: -moz-linear-gradient(center top, #dfdfdf 5%, #ededed 100%);
    background: -ms-linear-gradient(top, #dfdfdf 5%, #ededed 100%);
    filter: progid :                                 
                   DXImageTransform.Microsoft.gradient (             

                            startColorstr =                      
                              '#dfdfdf', endColorstr =     

                 '#ededed' );
    background-color: #dfdfdf;
    cursor: pointer;
}

.app_btns:active {
    position: relative;
    top: 1px;
}

#hid_div {
    border: 1px solid grey;
    background: #f1e8ba;
    width: 482px;
    height: auto;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    margin: 0px 0px 10px 0px;
    float: left;
    display: none;
    padding: 8px;
    line-height: 20px;
    font-size: 14px;
    color: #313131;
}

#icon_div {
    width: 125px;
    height: 80px;
    float: left;
    margin: 0px 0px -12px 20px;
    background:darkgrey;
}

#icon {
    float: left;
    height: 65px;
    width: 65px;
    margin: -8px 0px 0px 20px;
    background:black;
}

#link {
    text-decoration: none;
    float: left;
    /*  float: right;*/ /*  margin: -10px 0px 10px 0px;*/
    margin: -16px 0px 0px 10px;
    font-size: 12px;
    color:#ff9900;
}

</style>
<title></title>
</head>
<body>

    <div id="app_cont">

        <div id="game_pnl">

            <div id="prog_bar">
            <div id="prog_inner"></div>
            </div>  

            <div id="ab_cont">
                <input type="text" name="answerBox" id="answerBox" autofocus="autofocus" autocomplete="off" maxlength="20" /> 
                <a href="#" id="sub_btn" class="app_btns">Submit</a>
                <div id="icon_div">

                        <div id="icon"></div>
                    <a href="#" id="link">link link link</a>
                </div>

            </div>

            <div id="hid_div">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc bibendum tincidunt magna ut fermentum. 
            </div>

            <div id="btn_cont" unselectable="on">
                    <a href="#" id="btn1" class="app_btns"  unselectable="on">Button 1</a>
                    <a href="#" id="btn2" class="app_btns"  unselectable="on">Button 2</a>
                    <a href="#" id="btn3" class="app_btns"  unselectable="on">Button 3</a>
            </div>

        </div><!--#game_pnl-->

    </div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
<script type="text/javascript" >

$(document).ready(function(){

    $('#btn1').click(function(){

        $('#hid_div').slideToggle(500);

    });

});

</script>
</body>
</html> 
```

这是[JSfiddle](http://jsfiddle.net/zcwkw/)，但您无法真正看到其中的问题，因为该问题似乎只发生在 Opera 中。

# c# - C# HttpRuntime.Cache

> ID：15663693
> 
> 赞同：0
> 
> 时间：2013-03-27T16:12:00.760
> 
> 标签：c#, iis-7.5

我在Win7 64位。这是一个相当讨厌的问题。以下是重现它的步骤：

1.  在 Visual Studio 中创建一个新的 C# Asp.Net 项目（我使用的是 VS 2010，不确定这是否重要）

2.  在 Default.aspx 后面的代码中，将此代码添加到`Page_Load`方法中

    ```
    HttpRuntime.Cache.Insert("foo", "test", null, DateTime.Now.AddMinutes(30), TimeSpan.FromMinutes(0));

    string p = "var retval; retval = window.showModalDialog('Test.aspx','', 'dialogHeight:100px; dialogWidth: 100px;scroll: no;center: Yes; help: No; resizable: yes; status: no; unadorned: yes;');";
    ScriptManager.RegisterStartupScript(this, GetType(), "openpop", p, true); 
    ```

3.  添加另一个名为 Test.aspx 的 Web 窗体。您可以在标记中添加任何您想要的内容，这并不重要。

4.  在 Test.aspx 后面的代码中，将此行放入`Page_Load`方法中，并在其上设置断点。

    ```
    string x = (string)HttpRuntime.Cache["foo"]; 
    ```

5.  在项目属性中，确保应用程序设置为使用本地 IIS Web 服务器运行。

当你运行项目并且它遇到断点时，再一步让它分配 x，然后 x 的值将为空。至少这就是发生在我身上的事情。我不明白为什么会这样，因为该值应该仍然在缓存中。在我的实际应用程序中，我还为 HttpRuntime.Cache.Insert 添加了一个回调来跟踪为什么该项目不在缓存中，并且它说它已经过期。但是如果我给它一个30分钟的绝对过期窗口，它怎么会过期呢？

有趣的是，如果您使用 Visual Studio Development Server 而不是 IIS 运行应用程序，则该值存在于缓存中！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T08:21:33.037

我对这种设置没有任何问题，但你有。所以我认为问题在于`DateTime.Now`设置你的使用。根据msdn：

> 插入对象过期并从缓存中删除的时间。为避免本地时间可能出现的问题，例如从标准时间更改为夏令时，请将此参数值使用**UtcNow**而不是**Now**。如果您使用绝对过期，slidingExpiration 参数必须为 NoSlidingExpiration。

所以试试这个：

```
HttpRuntime.Cache.Insert("foo", "test", null, DateTime.UtcNow.AddMinutes(30), TimeSpan.FromMinutes(0)); 
```

# python - 没有文件的shutil.copytree

> ID：15663695
> 
> 赞同：12
> 
> 时间：2013-03-27T16:12:03.480
> 
> 标签：python, shutil

我正在尝试使用 shutil.copytree：

```
shutil.copytree(SOURCE_DIR, TARGET_DIR, ignore=None) 
```

此副本也是文​​件夹中的文件。我只需要复制没有任何文件的文件夹。怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-27T16:35:55.473

您可以通过提供“忽略”功能来做到这一点

```
def ig_f(dir, files):
    return [f for f in files if os.path.isfile(os.path.join(dir, f))]

shutil.copytree(SRC, DES, ignore=ig_f) 
```

基本上，当您调用[copytree](http://docs.python.org/2/library/shutil.html#shutil.copytree)时，它​​会递归地转到每个子文件夹并将该文件夹中的文件列表提供给忽略函数，以根据模式检查这些文件是否合适。忽略的文件将在函数末尾作为列表返回，然后，copytree 将仅复制该列表中不包括的项目（在您的情况下，包含当前文件夹中的所有文件）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T17:30:48.637

[这是@Oz123 解决方案](https://stackoverflow.com/a/15663866/4279)的一个实现，它基于[`os.walk()`](http://docs.python.org/2/library/os#os.walk)：

```
import os

def create_empty_dirtree(srcdir, dstdir, onerror=None):
    srcdir = os.path.abspath(srcdir)
    srcdir_prefix = len(srcdir) + len(os.path.sep)
    os.makedirs(dstdir)
    for root, dirs, files in os.walk(srcdir, onerror=onerror):
        for dirname in dirs:
            dirpath = os.path.join(dstdir, root[srcdir_prefix:], dirname)
            try:
                os.mkdir(dirpath)
            except OSError as e:
                if onerror is not None:
                    onerror(e) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T16:18:00.610

您应该考虑使用`os.walk`.

[这是 os.walk 的示例](http://www.saltycrane.com/blog/2007/03/python-oswalk-example/)。这样您就可以列出所有目录，然后使用`os.mkdir`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T16:40:16.050

用于[`distutils.dir_util.create_tree`](http://docs.python.org/2/distutils/apiref.html#distutils.dir_util.create_tree)仅复制目录结构（不是文件）

注意：参数`files`是文件名列表。如果你想要一些可以作为 shutils.copytree 工作的东西：

```
import os
import distutils.dir_util
def copy_tree(source, dest, **kwargs):
    filenames = [os.path.join(path, file_) for path, _, files in os.walk(source) for file_ in files]
    distutils.dir_util.create_tree(dest, filenames, **kwargs) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-11T18:19:59.537

如果你想用 忽略模式功能`os.walk()`，那么：

```
ignorePatterns=[".git"]
def create_empty_dirtree(src, dest, onerror=None):
    src = os.path.abspath(src)
    src_prefix = len(src) + len(os.path.sep)
    for root, dirs, files in os.walk(src, onerror=onerror):
        for pattern in ignorePatterns:
            if pattern in root:
                break
        else:
            #If the above break didn't work, this part will be executed
            for dirname in dirs:
                for pattern in ignorePatterns:
                    if pattern in dirname:
                        break
                else:
                    #If the above break didn't work, this part will be executed
                    dirpath = os.path.join(dest, root[src_prefix:], dirname)
                    try:
                        os.makedirs(dirpath,exist_ok=True)
                    except OSError as e:
                        if onerror is not None:
                            onerror(e)
                continue #If the above else didn't executed, this will be reached

        continue #If the above else didn't executed, this will be reached 
```

这将忽略`.git`目录。

注意：这需要`Python >=3.2`，因为我使用了旧版本不可用的`exist_ok`选项。`makedirs`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-14T12:59:20.830

上述答案有效，但它们肯定不会无忧无虑，并且很容易花费您 30 分钟。如果您使用的是 Windows，最快的方法是打开 shell 并使用 xcopy，即：

```
c:\user> xcopy "source" "destination" /t /e 
```

或者，如果你运行 Linux，你可以使用

```
rsync -a -f"+ */" -f"- *" source/ destination/ 
```

# python - 提示错误：IndentationError: expected an indented block

> ID：15663697
> 
> 赞同：0
> 
> 时间：2013-03-27T16:12:08.293
> 
> 标签：python

我是 python 新手，我在这里做练习（[http://www.learnpython.org/page/Loops](http://www.learnpython.org/page/Loops)）。对于以下代码：

```
 numbers = [
        951, 402, 984, 651, 360, 69, 408, 319, 601, 485, 980, 507, 725, 547, 544, 
        615, 83, 165, 141, 501, 263, 617, 865, 575, 219, 390, 984, 592, 236, 105, 942, 941, 
        386, 462, 47, 418, 907, 344, 236, 375, 823, 566, 597, 978, 328, 615, 953, 345, 
        399, 162, 758, 219, 918, 237, 412, 566, 826, 248, 866, 950, 626, 949, 687, 217, 
        815, 67, 104, 58, 512, 24, 892, 894, 767, 553, 81, 379, 843, 831, 445, 742, 717, 
        958, 609, 842, 451, 688, 753, 854, 685, 93, 857, 440, 380, 126, 721, 328, 753, 470, 
        743, 527
    ]

    # your code goes here
    for number in numbers:
        if number <= 237 and number%2 == 0:
            print number 
```

我遇到了以下问题：

```
Traceback (most recent call last):
  File "/base/data/home/apps/s~learnpythonjail/2.365841894475711898/main.py", line 75, in execute_python
    exec(code, {})
  File "<string>", line 14
    print number
        ^
IndentationError: expected an indented block 
```

我可以知道如何解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:19:51.790

错误意味着`print`缩进没有超出前`if`一行的级别。

如果在您的编辑器中，看起来该`print`行无论如何都正确缩进，那么您正在不一致地混合制表符和空格。用空格替换所有制表符以进行更正。

*您可以将大多数编辑器配置为仅*使用空格进行缩进；这是[Python 样式指南 (PEP 8)](http://www.python.org/dev/peps/pep-0008/)的建议：

> ## 制表符还是空格？
> 
> 切勿混合制表符和空格。
> 
> Python 最流行的缩进方式是仅使用空格。第二种最流行的方式是仅使用选项卡。使用制表符和空格混合缩进的代码应转换为仅使用空格。当使用 -t 选项调用 Python 命令行解释器时，它会发出有关非法混合制表符和空格的代码的警告。使用 -tt 时，这些警告会变成错误。强烈推荐这些选项！
> 
> 对于新项目，强烈建议仅使用空格而不是选项卡。大多数编辑器都具有使此操作变得容易的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:30:48.310

以下是您的代码在显示所有带有制表符的空白字符的编辑器中的样子（制表符大小设置为 4）：

![在此处输入图像描述](../Images/72eeed42608019278e326227bd2d0d8a.png)

小圆点是空格字符，箭头是制表符。正如其他答案中所述，混合制表符和空格是一个坏主意。上面的代码可能看起来没问题，但看看如果将制表符大小更改为 8 个字符会发生什么：

![在此处输入图像描述](../Images/eb4c6bdbc1e2b3d2b6fcebaf50620923.png)

这是您看到的错误的根本原因。当您混合制表符和空格时，您在编辑器中看到的缩进可能与 Python 解释器看到的缩进不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T16:21:06.547

我已经重现了您的情况： if 语句之前的一个表，打印之前的 8 个空格。请仅使用空格代替。

# jquery - 如何将jquery tinyscrollbar设置为滚动：覆盖中的false

> ID：15663700
> 
> 赞同：1
> 
> 时间：2013-03-27T16:12:13.320
> 
> 标签：jquery, overlay, tinyscrollbar

在可滚动区域内调用覆盖。使用 tinyscrollbar 插件（ [http://www.baijs.nl/tinyscrollbar/][1] ），当调用覆盖时，我想将 tinyscrollbar 中的滚动选项设置为 false。这是标题中的脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#scrollbar2').tinyscrollbar({ scroll: true });
    });
</script> 
```

这是覆盖脚本：

```
<script>
    $(document).ready(function () {
        $("img[rel]").overlay({
            onBeforeLoad: function (event) {
                $('#scrollbar2').tinyscrollbar({ scroll: false });
            },
            onClose: function (event) {
                $('#scrollbar2').tinyscrollbar({ scroll: true});
            }
        });
    });
</script> 
```

如您所见，在 onBeforeLoad 中，我尝试将滚动设置为 false，而 onClose 将其设置回 true，但这些都被忽略了。对 jquery 来说有点新，所以不确定如何动态更改这些选项。在设置滚动选项后尝试调用 tinyscrollbar_update() 但没有任何效果。不知道该怎么做...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:01:07.127

虽然我想不出任何不向 tinyscrollbar 源代码添加代码的解决方案，但我确实想出了一个解决方法。由于在页面加载后让 tinyscrollbar 更改的唯一方法是调用 tinyscrollbar_update()，因此在我的脚本中调用覆盖功能，在 onBeforeLoad 中，我使封闭的“.overview”容器的高度小于最小高度调用滚动条，然后调用 tinyscrollbar_update()。由于 tinyscrollbar 看到它不需要渲染自己，它就消失了。然后，在 onBeforeClose 中，我只是将高度重置为原来的高度，再次调用 tinyscrollbar_update() 并且滚动条重新出现。

这是修改后的代码：

```
<script>
    $(document).ready(function () {
        $('#scrollbar2').tinyscrollbar();

        $('img[rel]').overlay({
            oneInstance: false,
            onBeforeLoad: function (event) {
                $('.overview').css('height','150px');
                $('#scrollbar2').tinyscrollbar_update();
            },
            onBeforeClose: function (event) {
                $('.overview').css('height','auto');
                $('#scrollbar2').tinyscrollbar_update();
            }
        });
    });
 </script> 
```

# android - 如何使用 cygwin 和 android ndk r5 在 windows 上编译 ffmpeg-0.10.3

> ID：15663704
> 
> 赞同：1
> 
> 时间：2013-03-27T16:12:20.163
> 
> 标签：android, android-ndk, ffmpeg, cygwin

我想用cygwin和android ndk在windows上编译ffmpeg。我发现这个链接非常有用，因为有编译 ffmpeg 的分步指南。

[有人觉得这有用吗？- 在 Windows 上使用 Cywin 和 NDK r5 编译 FFMPEG](https://stackoverflow.com/questions/10665039/does-anyone-find-this-useful-compiling-ffmpeg-on-windows-with-cywin-and-ndk-r)

但是最后一点，当我要创建 .so 文件时，我在 cygwin bash 中遇到了这个错误。

* * *

**控制台输出：**

```
vikram mahal@vikrammahal-PC ~
$ cd /cygdrive/c/ffmpeg-0.10.3
vikram mahal@vikrammahal-PC /cygdrive/c/ffmpeg-0.10.3
$ dos2unix build_android.sh
dos2unix: converting file build_android.sh to Unix format ...
vikram mahal@vikrammahal-PC /cygdrive/c/ffmpeg-0.10.3
$ ./build_android.sh
)/configure: line 10: warning: setlocale: LC_ALL: cannot change locale (C
': not a valid identifierort: `LC_ALL
./configure: line 14: syntax error near unexpected token `$'{\r''
'/configure: line 14: `try_exec(){
./build_android.sh: line 54: make: command not found
./build_android.sh: line 55: make: command not found
C:\android-ndk-r5\toolchains\arm-linux-androideabi-4.4.3\prebuilt\windows\bin\ar
m-linux-androideabi-ld.exe: cannot open output file ./android/armv7-a/libffmpeg.
so: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T06:49:59.253

> 1] ./configure：第 14 行：意外标记 `$'{\r'' 附近的语法错误

要解决此问题，请创建 build_android.sh 的备份副本并运行

```
$dos2unix build_android_backup.sh
$sh build_android_backup.sh 
```

> 2] ./build_android.sh：第 54 行：make：找不到命令

解决上述错误检查您在安装 Cygwin 时是否安装了“make”程序

# casting - MIPS 中的类型转换

> ID：15663708
> 
> 赞同：0
> 
> 时间：2013-03-27T16:12:24.010
> 
> 标签：casting, mips

如何将这种代码块转换为 MIPS？

`gap = (int)(gap / 1.3);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:50:53.343

首先将 1.3 加载到 af reg。参考：[MIPS（或 SPIM）：加载浮点数](https://stackoverflow.com/questions/2589233/mips-or-spim-loading-floating-point-numbers)

```
.data

number: .double 1.3

.text

l.s $f2, number 
```

现在将 f1 加载到（双）间隙

```
mtc1 $a0, $f1
cvt.d.w $f1, $f1 
```

然后设置 $f3 = (double)(gap / 1.3)

```
div.d $f3, $f1, $f2 
```

现在将其转换为 int

```
cvt.w.d $f3, $f3    
mfc1 $s2, $f3 
```

就这样

# java - 对 5000 个元素数组进行快速排序

> ID：15663709
> 
> 赞同：-2
> 
> 时间：2013-03-27T16:12:25.183
> 
> 标签：java

各位早上好，我想弄清大 O 表示法，以便对 5000 个元素的数组进行快速排序。我以随机顺序（200、20、4 等...）、排序顺序（1、2、3、4、5 等...）和反向排序顺序（4999、4998、4997、4996 等）运行快速排序....) 我从中间选择支点。

当我查找 Big O 表示法时，它告诉我，对于快速排序，它是 O (n log n)，这对我来说意味着......当使用 base 2 log 时，O(5000 * 12.287712) = 61438.56，如果使用 base 10 log O(5000 * 3.69897) = 18494.85 所以我假设我会使用 61438.56，当我查看我的输出（发布在下面）时，它几乎不需要那么长时间。

在进行比较时，我只是想了解一下我通常期望从随机顺序、排序顺序和反向排序测试中看到什么。我已经通过我的 java 代码发布了 5 次运行的结果，也许我想多了，或者在错误的地方进行了比较，但我想我会这样做，尽管在不同通道上的比较会有更大的差异。

如有必要，我可以发布我的代码，只是遇到了问题，因为我无法将其缩进 4 个空格，并且不确定是否有自动化的方法来做到这一点。

第一次运行：随机顺序-交换次数 16196 排序顺序-交换次数 18242 反向排序-交换次数 22790

第 2 次运行：随机顺序 - 交换次数 16072 排序顺序 - 交换次数 18118 反向排序 - 交换次数 22666

第 3 次运行：随机顺序 - 交换次数 16205 排序顺序 - 交换次数 18251 反向排序 - 交换次数 22799

第 4 次运行：Random-Order-Number of swaps made 16333 Sorted-Order-Number of swaps made 18379 Reverse-Sorted-Number of swaps made 22927

5th Run: Random-Order-Number of swaps made 16283 Sorted-Order-Number of swaps made 18329 Reverse-Sorted-Number of swaps made 22877

```
 package QuickSort;

import java.util.Random;

public class QuickSortApp
{

  /**
   * @param args the command line arguments
   */
  public static void main(String[] args)
  {

      // This for loop just runs through the code 20 times.
      for(int loop = 0; loop < 20; loop++)
      {

    // This creates an array with 5000 random numbers    
    int maxSize = 5000;
    ArrayQuickSort arr;
    Random rnd = new Random();
    arr = new ArrayQuickSort(maxSize);
    ArrayQuickSort.setSwapCount(0);
    ArrayQuickSort.setMedianCount(0);
    for (int j = 0; j < maxSize; j++)
    {
      int n = rnd.nextInt(50000);
      arr.insert(n);
    }

    // This creates a sorted array to test
    ArrayQuickSort arrSorted;
    arrSorted = new ArrayQuickSort(maxSize);
    ArrayQuickSort.setSwapCount(0);
    ArrayQuickSort.setMedianCount(0);
    for (int j = 0; j < maxSize; j++)
    {
      int n = j + 1;
      arrSorted.insert(n);
    }

    // This creates a reverse sorted array for checks
    ArrayQuickSort arrReverseSorted;
    arrReverseSorted = new ArrayQuickSort(maxSize);
    ArrayQuickSort.setSwapCount(0);
    ArrayQuickSort.setMedianCount(0);
    for (int j = 5000; j > 0; j--)
    {
      int n = j;
      arrReverseSorted.insert(n);
    }

    arr.quickSort();
    System.out.println("Random-Order-Number of swaps made " + ArrayQuickSort.getSwapCount() + " Recursion Count is " + ArrayQuickSort.getMedianCount() );
    arrSorted.quickSort();
    System.out.println("Sorted-Order-Number of swaps made " + ArrayQuickSort.getSwapCount() + " Recursion Count is " + ArrayQuickSort.getMedianCount());
    arrReverseSorted.quickSort();
    System.out.println("Reverse-Sorted-Number of swaps made " + ArrayQuickSort.getSwapCount() + " Recursion Count is " + ArrayQuickSort.getMedianCount());

    }  
  }
}

    package QuickSort;

public class ArrayQuickSort {

    private int[] theArray;
    private int nElms;
    private static int swapCount=0;
    private static int medianCount = 0;

    public ArrayQuickSort(int max) {
        theArray = new int[max];
        nElms = 0;
    }

    public void insert(int value) {
        theArray[nElms] = value;
        nElms++;
    }

    public void display() {
        System.out.print("Array = ");
        for (int i = 0; i < nElms; i++) 
        {
            System.out.print(theArray[i] + " ");
            if(i%25==0)
                System.out.println();
        }
        System.out.println();
    }

    private void swap(int dx1, int dx2) {
        int temp = theArray[dx1];
        theArray[dx1] = theArray[dx2];
        theArray[dx2] = temp;
        swapCount++;  // I am counting here to see how many times numbers are swapped.
    }

    private int medianOf3(int left, int right)
    {
        int center =(left+right)/2;

        if(theArray[left] > theArray[center])
            swap(left, center);
        if(theArray[left] > theArray[right])
            swap(left, right);
        if(theArray[center] > theArray[right])
            swap(center, right);

        swap(center, right);
        medianCount++;   // I am counting here to see how many times the pivot is changed
        return theArray[right];

    }

    public void quickSort()
    {
        recQuickSort(0, nElms -1);
    }

    private void recQuickSort(int left, int right)
    {
        int size = right-left+1;
        if(size < 5)
            insertionSort(left, right);
        else
        {
            int median = medianOf3(left, right);
            int partition = partitionIt(left, right, median);
            recQuickSort(left, partition-1);
            recQuickSort(partition+1, right);

        }
    }

    private int partitionIt(int left, int right, int pivot) {
        int leftPtr = left - 1;
        int rightPtr = right;

        while (true) {
            while (theArray[++leftPtr] < pivot)
            ;
            while (theArray[--rightPtr] > pivot)
            ;
            if(leftPtr >= rightPtr)
                break;
            else
                swap(leftPtr, rightPtr);
        }
        swap(leftPtr, right);
        return leftPtr;
    }

    private void insertionSort(int left, int right) {
        int in, out;

        for (out = left + 1; out <= right; out++) {
            int temp = theArray[out];
            in = out;
            while (in > left && theArray[in - 1] >= temp) {
                theArray[in] = theArray[in - 1];
                in--;
            }
            theArray[in] = temp;
        }
    }

     public static int getMedianCount()
  {
    return medianCount;
  }

  public static void setMedianCount(int medianCount)
  {
    ArrayQuickSort.medianCount = medianCount;
  }

  public static int getSwapCount()
  {
    return swapCount;
  }

  public static void setSwapCount(int swapCount)
  {
    ArrayQuickSort.swapCount = swapCount;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:19:14.603

重要的是要意识到 big-Oh 用于描述算法的*渐近行为*，即*增长率*。它也是一个*上限*，可能很紧也可能不紧。

由于这些因素，您无法仅通过知道其大哦时间复杂度来计算该算法需要多少操作。

> 当我查找 Big O 表示法时，它告诉我快速排序是 O (n log n)

这是在平均情况下。但是，在最坏的情况下，您的实现很可能是`O(n^2)`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T16:21:47.457

我认为 O-Notation 为您提供了在排序期间必须进行的比较次数，而不是实际的交换。如果你计算比较次数，你应该得到期望值附近的数字，作为平均值。

# ios - UIImageView 调整大小问题

> ID：15663710
> 
> 赞同：0
> 
> 时间：2013-03-27T16:12:30.613
> 
> 标签：ios

我正在尝试为我拥有的所有框添加一个水平覆盖黑条。这些框的大小在 IB 中，它们的大小为 328 X 300，至少这就是界面构建器在属性中说的原因。

当我调整叠加图像的大小并将其调整为 328 宽度时，它不会覆盖整个视图。下面的屏幕截图显示了我在说什么：

![在此处输入图像描述](../Images/0cb9637cfa2cce6691bb4c3f1a567c6a.png)

这是代码：

```
 thumbnailImageView = CGRectMake(0, 0, TILE_WIDTH,TILE_HEIGHT); // 328X300

UIView *blackView = [[UIView alloc] initWithFrame:CGRectMake(0, thumbnailImageView.frame.size.height - 100, thumbnailImageView.bounds.size.width, thumbnailImageView.bounds.size.height/4)];
[thumbnailImageView addSubview:blackView]; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:35:58.603

使用`thumbnailImageView.frame`代替`thumbnailImageView.bounds`

```
UIView *blackView = [[UIView alloc] initWithFrame:CGRectMake(0, thumbnailImageView.frame.size.height - 100, thumbnailImageView.frame.size.width, thumbnailImageView.bounds.size.height/4)] 
```

# iphone - 在 iOS 应用中生成和保存图像

> ID：15663713
> 
> 赞同：1
> 
> 时间：2013-03-27T16:12:32.447
> 
> 标签：iphone, ios, objective-c, image, uiscrollview

我希望能够从一组数据中生成图像。生成图像后，我想将其保存到相册并在滚动视图中显示。如何告诉应用程序创建图像？创建图像后，如何在滚动视图中显示它？同时，如何将该图像保存到相册？

我的应用程序在此处不做太多详细说明：

它接收用户输入的一组数据（主要是整数数据），然后使用 Core Graphics 将其转换为图像（我可以通过为视图生成一个新类来生成图像并将其显示给视图控制器 [子类UIView] 视图控制器的一部分）。现在我希望能够保存该图像以供进一步使用（我希望能够保存无限数量的图像，因此 NSUserDefaults 不是我想要的）。PNG文件是理想的，但我知道必须进行转换才能做到这一点。

我想尝试的事情：

UIImage 的创作者很多，但不知道要用哪一个。我应该创建一个新类来生成图像吗？我应该在另一个视图控制器中生成图像并将其保存在那里并在我想要显示它的视图控制器中访问它吗？我是否应该一起跳过核心图形而只使用 OpenGL ES（我有 OpenGL 的经验，只是在 iPhone 上没有）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:13:54.967

你没有提供太多关于你在做什么的细节，所以除了笼统的术语之外很难给出建议：

1.  你是如何生成你的图像的？如果它是基于 UIImage 的，则保存图像很简单——使用[UIImageWriteToSavedPhotosAlbum](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)。该文档还说明了 PNG 和 JPEG 表示功能。
2.  如果您还没有 UIImage（即，您只是渲染到图形上下文中），则可以使用不同的方法来处理您想要的内容。[查看CGBitmapContextCreateImage](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGBitmapContext/Reference/reference.html)上的 Core Graphics 文档和[UIGraphicsBeginImageContextWithOptions](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)上的 UIKit 文档。

更新：

关于文本，您是否在调用之前调用了绘制方法`UIGraphicsGetImageFromCurrentImageContext`？

我通常在您的方法上使用 Core Graphics 变体，但逻辑相似：

```
CGContextRef context = CGBitmapContextCreate(...);
// ... do some other drawing...
NSString* foo = @"Foo";
CGRect bounds = CGRectMake(0,0,100,100);
[foo drawInRect:bounds withFont:[UIFont systemFontOfSize:10]];
CGImageRef image = CGBitmapContextCreateImage(context); 
```

# ios - 替换 UIView 的 contentStretch？

> ID：15663721
> 
> 赞同：5
> 
> 时间：2013-03-27T16:12:53.070
> 
> 标签：ios, uiview, ios6, deprecated, stretching

在 iOS 6.0 中 UIView 的 contentStretch 属性已被弃用。如何使用新/旧/其他 API 实现相同的功能？

我正在寻找的功能只是在 UIButton 上拉伸图像的一部分（除了边缘之外的所有内容）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T19:16:19.120

使用 resizableImageWithCapInsets 和 UIEdgeInsets 制作可拉伸的 UIButton 背景图像。例如：

```
UIImage* image = [UIImage imageNamed:@"image.png"];
image = [image resizableImageWithCapInsets:UIEdgeInsetsMake(0, 20, 0, 20)];
[button setBackgroundImage:image forState:UIControlStateHighlighted]; 
```

我认为您不能在水平和垂直方向上拉伸超过一个像素。

希望这可以帮助。

# python - 如何在 Z3py 函数中有超过 255 个参数？

> ID：15663723
> 
> 赞同：0
> 
> 时间：2013-03-27T16:12:57.140
> 
> 标签：python, z3, smt, constraint-programming

我想问一下，如何在 Z3 Python 函数中有超过 255 个参数

```
 h1, h2 = Consts('h1 h2', S)
     def fun(h1 , h2):
          return Or(
 And( h1 == cl_4712, h2 == me_1935),
 And( h1 == cl_1871, h2 == me_1935),
 And( h1 == cl_4712, h2 == me_1935),
                   .
                   .
                   .
  And( h1 == cl_1871, h2 == me_6745)
                ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:20:45.940

```
func(arg1, arg2, arg3) 
```

完全等同于

```
args = (arg1, arg2, arg3)
func(*args) 
```

因此，将参数作为单个可迭代对象提供：

```
Or(*(And(...),...)) 
```

或者更清楚：

```
conditions = (And(...), ...)
Or(*conditions) 
```

或者，也许您可​​以只提供一个生成您的条件的生成器：

```
def AndCond(a, b):
    for ....:
        yield And(...)

Or(*AndCond(v1, v2)) 
```

我可能会这样写你的代码：

```
h1, h2 = Consts('h1 h2', S)
def fun(h1 , h2):
    # possibly this should be a set() or frozenset()
    # since logically every pair should be unique?
    h1_h2_and_conds = [
        (cl_4712, me_1935),
        (cl_1871, me_1935),
        (cl_1871, me_6745),
        # ...
    ]
    and_conds = (And(h1==a, h2==b) for a,b in h1_h2_and_conds)
    return Or(*and_conds) 
```

# linux - 遍历每个 ls 行

> ID：15663726
> 
> 赞同：0
> 
> 时间：2013-03-27T16:13:07.000
> 
> 标签：linux, shell

我是 linux 中 shell 脚本的新手。我希望能够列出我的目录中的文件数、目录中的目录数等等。我决定使用

```
 ls -l | cut -c1-1 
```

因此，通过这种方式，我可以获得每个 ls 命令的第一个字符，然后根据它的内容，记录文件类型，直到列出所有文件。例如，如果我在一个包含一堆文件的文件夹中并从上面执行了剪切命令，它将显示许多“-”权限，表明它是一个文件。

我的问题是，根据上面的命令，我将如何通过每一行 ls ？如果我在 shell 中从上面输入命令，它只会一次显示所有命令......我想浏览每一行 ls 。

谢谢！

目录称为 Test 并包含

```
 -rw-r--r--  1 teddy  user  31 27 Mar 10:07 test1.txt
 drwx------  1 teddy  user   9 30 Jan 19:18 tooney
 -rw-r--r--  1 teddy  user  31 27 Mar 10:07 test2.txt
 drwx------  1 teddy  user   9  21 Mar 11:32 dirt 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:15:12.973

如何使用`find`and `wc`：

```
# Find all files in the current directory 
$ find . -maxdepth 1 -type f | wc -l

# Find all directories in the current directory 
$ find . -maxdepth 1 -type d | wc -l 
```

命令`wc` *（字数）*可用于统计字符数、单词数和行数。这里`wc -l`计算从结果输出的行数`find`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T16:17:27.657

使用您的方法，您可以使用 计算总数`uniq`，例如：

```
$ ls -l | cut -c1-1 | sort | uniq -c
    214 -
     13 d
      2 l
      1 t 
```

`uniq -c`计算一行连续出现的次数，`sort`并将它们按某种排序顺序排列，以便相同的类型最终放在一起。

如果您希望这些结果包含在变量中，那么这会更容易：

```
dirs=0
files=0

for name in *
do
    if [[ -d "$name" ]]
    then
        ((dirs++))
    elif [[ -f "$name" ]]
    then
        ((files++))
    # Possibly other things you want to count ...
    fi
done

echo "Files: $files"
echo "Directories: $dirs" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:18:47.503

将命令输入更多将防止它滚动到屏幕外。

```
ls -l | cut -c1-1 | more 
```

# sql - 如何将三个 sql 选择组合到一个查询中

> ID：15663727
> 
> 赞同：-1
> 
> 时间：2013-03-27T16:13:07.577
> 
> 标签：sql

我有下面的三个查询，我想将它们组合成一个查询，所以我得到三列按县列出的结果。我尝试对所有表进行内部连接，但我得到了错误的数据。如何结合这三个查询并按县分组？

```
 select [Total DLL Children] = SUM(cd.NumberOfLanguageSpeakers)
 from ClassroomDLL as cd
 inner join Classrooms as c on cd.Classroom_Id = c.Id
 inner join Sites as s on c.Site_Id = s.Id
 inner join Profiles as p on s.Profile_Id = p.Id
 inner join Counties as co on p.County_Id = co.Id
 group by co.Description

 select [Total Children] = (SUM(demo.NumberOfPreschoolers) + SUM(demo.NumberOfToddlers) + SUM(demo.NumberOfInfants))
 from ClassroomDemographics as demo
 inner join Classrooms as c on demo.Classroom_Id = c.Id
 inner join Sites as s on c.Site_Id = s.Id
 inner join Profiles as p on s.Profile_Id = p.Id
 inner join Counties as co on p.County_Id = co.Id
 group By co.Description

 select co.Description from Counties as co
 group by co.Description 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:36:36.137

请试试这个。基本上，每个子查询，您也需要返回 County.Description，然后您可以将它们连接在一起。

```
 SELECT A.Description, B.[Total DLL Children], C.[Total Children]
 FROM (
     select co.Description from Counties as co
     group by co.Description
     ) A
 LEFT JOIN 
     (
         select co.Description, [Total DLL Children] = SUM(cd.NumberOfLanguageSpeakers)
         from ClassroomDLL as cd
         inner join Classrooms as c on cd.Classroom_Id = c.Id
         inner join Sites as s on c.Site_Id = s.Id
         inner join Profiles as p on s.Profile_Id = p.Id
         inner join Counties as co on p.County_Id = co.Id
         group by co.Description
      ) B
      ON A.DESCRIPTION = B.DESCRIPTION 
LEFT JOIN 
      (
         select co.Description, [Total Children] = (SUM(demo.NumberOfPreschoolers) + SUM(demo.NumberOfToddlers) + SUM(demo.NumberOfInfants))
         from ClassroomDemographics as demo
         inner join Classrooms as c on demo.Classroom_Id = c.Id
         inner join Sites as s on c.Site_Id = s.Id
         inner join Profiles as p on s.Profile_Id = p.Id
         inner join Counties as co on p.County_Id = co.Id
         group By co.Description
      ) C
      ON A.DESCRIPTION = C.DESCRIPTION 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:38:13.940

一种方法是将现有查询转换为像这样的内联表 - 您不需要从 Counties 表中选择，因为您已经在前两个查询中获得了该表：

```
select co.Description, a.[Total DLL Children], b.[Total Children]
from
(select co.id,[Total DLL Children] = SUM(cd.NumberOfLanguageSpeakers)
 from ClassroomDLL as cd
 inner join Classrooms as c on cd.Classroom_Id = c.Id
 inner join Sites as s on c.Site_Id = s.Id
 inner join Profiles as p on s.Profile_Id = p.Id
 inner join Counties as co on p.County_Id = co.Id
 group by co.id, co.Description) a
 join 
 (select co.id, co.Description, [Total Children] = (SUM(demo.NumberOfPreschoolers) +             SUM(demo.NumberOfToddlers) + SUM(demo.NumberOfInfants))
  from ClassroomDemographics as demo
  inner join Classrooms as c on demo.Classroom_Id = c.Id
  inner join Sites as s on c.Site_Id = s.Id
  inner join Profiles as p on s.Profile_Id = p.Id
  inner join Counties as co on p.County_Id = co.Id
  group By co.id, co.Description) b on a.id = b.id 
```

# c++ - 我如何在 C++ 中执行此操作，打印此列表中最高的 10 个数字？

> ID：15663731
> 
> 赞同：-3
> 
> 时间：2013-03-27T16:13:14.157
> 
> 标签：c++

如何打印此列表中最高的 10 个数字？

这是我的数字列表，我是编程新手，我知道我必须使用数组，但之后我不确定。

```
 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:17:11.653

您将需要[`std::partial_sort`](http://en.cppreference.com/w/cpp/algorithm/partial_sort)结合`operator>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:14:52.520

如果将这些数字保存在向量中，则可以使用 std::sort()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:17:53.987

将您的数字放入一个数组中（理想情况下读取文件中的数字列表）按降序对数组进行排序（使用现有函数，如其他答案所建议的那样，或者，我猜这是一个课程练习，通过使用解释的算法在课堂上) for (i = 0; i<10; i++) print array[i];

抱歉，它开始看起来像代码...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T16:18:55.613

首先对数组进行排序。

获取数组的大小，并将其用作索引。然后写一个for循环，如：

```
for(int index = size -1; index >=0; index--) 
    // print here 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T16:46:57.917

以下应该有效：

```
#include <iostream>
#include <vector>
#include <algorithm>
int main() {
  std::vector<int> v;
  for(unsigned i = 0; i < 100; ++i) {
     v.push_back(i);
  }
  std::random_shuffle(v.begin(), v.end());

  std::partial_sort(v.begin(), v.begin() + 4, v.end());
  for(unsigned k = 0; k < 4; ++k) {
    std::cout << k << "-th element is " << v[k] << '\n';
  }
} 
```

正如其他人已经指出的那样，关于复杂性的说明。在这种情况下使用 partial_sort通常会*更好*，因为它对这种情况具有更好的复杂性。但是，如果您只是玩玩具实例，那么完整的排序也可以解决您的问题。

下一次，展示更多的努力，比如你尝试过的代码和你在文献中找到的东西等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T16:45:12.977

您可以通过以下几种方式做到这一点：假设您的列表中有 N 个元素，并且您必须选择 X 个最高的元素。1）对数组进行排序，然后选择 X 个最高元素元素。现在，由于排序将花费 O(NlogN) 时间，而您的选择将花费 O(X) 时间，因此总体复杂度将为 O(NlogN)。

2）不要对数组进行排序，只需遍历列表以找到最高元素，然后再次遍历以找到下一个最高元素，依此类推，直到获得 X 个最高元素。复杂度 O(X*N)，当 X < logN 时，最后一种方法更好。

3）您可以通过使用固定（X）大小的最大堆优化方法2，如果它们大于最大堆中的最小元素，则遍历列表将元素插入列表。复杂度 O(NLogX)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-27T16:33:43.760

如果列表很大，使用`sort`效率不是很高，因为您只想找到`10`最大的元素。更好的方法是用`10`元素构建一个最小堆，当堆大小小于 时`10`，将元素插入堆中。之后，当新元素到来时，将元素与堆的根进行比较，如果元素大于根，则插入堆并移除当前堆头，重复此过程，直到扫描完列表中的所有元素。该算法适用于时间复杂度“O(nlogk)”，其中`n`是元素的总数，`k`在这种情况下为 10。`O(nlogn)`如果您使用排序，效率会更高。您需要了解二进制堆在 C++ 中的工作原理，并且可以应用标准容器来实现一个非常容易为您工作的容器。

但是，使用`std::sort`是蛮力的方式，易于理解。

# java - 如何在 JSP 中包含资源而不是开销服务方法？

> ID：15663736
> 
> 赞同：2
> 
> 时间：2013-03-27T16:13:23.657
> 
> 标签：java, jsp, include

我正在使用 JSP 开发一个高负载项目，其中包含大量页面上的其他资源（jsp、jspf）。

众所周知，在 JSP 中使用 include 有两种方式：静态 - **<%@include %>**和动态 - **<jsp:include />**（或 JSTL 等效的 <c:import />）。

但他们都有缺点。

例如，静态导入可能会导致主页面中的变量名发生冲突。动态导入性能较差。

我想使用一些不是服务方法开销的东西，同时独立于其余代码。

在最狭窄的地方，我们不得不将 html-code 放在 java-code 中：

```
public String getHtml() {
    return “&lt;div class=’entity’&gt;” + … + “&lt;/div>”;
} 
```

在 JSP 中，我们执行以下操作：

```
<jsp:getProperty name="someEntity" property="html" /> 
```

这解决了包含问题，但它是一种可怕的代码风格，而且很难重构。

似乎理想的解决方案是编写特殊的标签库，例如：

```
<entitytag>
    <parameter name=’param1’ class=’java.util.String’ />
    <parameter name=’param2’ class=’mypackage.Entity’ />
    <tagbody>
        <div class=’entity’&gt;…&lt;/div>
    </tagbody>
</entitytag> 
```

这将被翻译成：

```
static public void entitytag(String param1, Entity param2, JSPWriter out) {
    out.write(“&lt;div class=’entity’&gt;”);
    …
    out.write(“&lt;/div>”);
} 
```

在 JSP 中，这个调用看起来像：

```
<mylib:entitytag param1=’someString’ param2=’someEntity’ />; 
```

在服务方法中：

```
MylibClass.entitytag(param1, param2, out); 
```

所以，我的问题是下一个：有什么方法可以优雅地制作这种技巧吗？也许使用第三方库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:18:29.053

我不认为解决方案是在 java 中做 html。

正常的 jstl 包含很好，您认为可以通过什么方式提高性能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:36:10.863

当第一次查看 jsp 时，它会变成一个 java 类并编译——包括任何包含和/或导入，所有这些都变成一个类。

因此，大量的包含可能会在第一次查看页面时影响性能，但在那之后，它基本上与调用 servlet 相同。

如果您使用的是 tomcat，请深入到 tomcat/work 目录以查看您精心编写的 jsps 的变化。

# android - 可调用和网络主线程错误

> ID：15663737
> 
> 赞同：0
> 
> 时间：2013-03-27T16:13:27.653
> 
> 标签：android, multithreading, executorservice, future, callable

我正在做一些网络操作，正如你所知道的那样，蜂窝应该在另一个线程而不是 UIthread 上完成，否则它会给出 networkmainthread 错误。就我而言，我必须从 api 获取返回值并对其进行处理，所以我决定使用 Callable。我正在发送一个请求并在 call() 方法中获得响应，但最后它仍然给我 networkmainthread 错误。我应该在哪里犯错？任何建议将不胜感激。

```
 private static <T> T getReader(String url, List<NameValuePair> params, final Class<T> classOfT, final Context _context) {

    T result = null;
    RestApiHelper apiHelper = new RestApiHelper(url, params, _context);
    ExecutorService executor = Executors.newFixedThreadPool(10);
    Future<Reader> futureSubmit = executor.submit(apiHelper);

    try {
        Reader reader = futureSubmit.get();
        if (reader != null){
            result = new Gson().fromJson(reader, classOfT);   //I'm getting the exception at this line. 
            .
            .
            .   

//*********************************************
//call method of RestApiHelper class which implemented Callable
//*********************************************
@Override
public Reader call() throws Exception {
    Reader reader = null;
    if(fileUri==null)
        reader = executeNormalPost();
    else
        reader = executeSendFilePost();

    return reader;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:51:48.787

`AsyncTask`如果您正在进行网络操作，我会建议使用。最好处理联网操作。

# iphone - 如何避免将 NSData 的内容保留在活动内存中？

> ID：15663738
> 
> 赞同：4
> 
> 时间：2013-03-27T16:13:29.483
> 
> 标签：iphone, ios, objective-c, memory, nsdata

我的应用程序需要通过网络发送图像和视频等数据。我设法使用可接受的 RAM 量将文件分成更小的块，如下所示：

```
NSData *data = UIImageJPEGRepresentation([UIImage imageNamed:@"image.jpg"], 1.0);
NSArray *array = [data splitIntoSubdataWithLength:1000000];

-(NSArray *)splitIntoSubdataWithLength:(int)subdataLength {

    NSMutableArray *array = [[NSMutableArray alloc] init];

    NSUInteger dataLength = [self length];
    NSUInteger offset = 0;
    do {
        NSUInteger thisChunkSize = dataLength - offset > subdataLength ? subdataLength : dataLength - offset;

        NSData* chunk = [NSData dataWithBytesNoCopy:(char *)[self bytes] + offset
                                             length:thisChunkSize
                                       freeWhenDone:NO];

        offset += thisChunkSize;

        [array addObject:chunk];
        NSLog(@"chunk size: %i", chunk.length);

    } while (offset < dataLength);

    return array;

} 
```

问题是，如果原始 NSData 对象是 26MB，那么 RAM 会增加到 ~26MB。我是否需要像这样在内存中激活 NSData 对象的全部内容，或者我能够以任何方式减少内存使用量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:28:54.740

您可以使用内存映射文件，并将值临时存储在磁盘上。这是带有ARC的ios的一个很好的实现。

[http://www.cimgf.com/2012/02/17/extending-nsdata-and-not-overriding-dealloc/](http://www.cimgf.com/2012/02/17/extending-nsdata-and-not-overriding-dealloc/)

# scheme - 为什么 Racket 语法中允许使用“点对”s 表达式？

> ID：15663742
> 
> 赞同：1
> 
> 时间：2013-03-27T16:13:40.110
> 
> 标签：scheme, racket

在或多或少地理解了[这个问题](https://stackoverflow.com/questions/15631001/)的答案之后，在我看来，在 Racket/Scheme 中，在读者级别，语法树中每对的第二个元素必须是一个列表。换句话说，只要一个带点的 s-expression 形式`(A . B)`表示语法树的一个顶点，`B`就只能由一个解析为列表的 s-expression 来表示，例如`(C D E)`. 例如：`(A . (C D E))`。这当然可以写成`(A C D E)`，因为它的解析方式相同。

```
(+ . (1 2 3)) ; => 6
(+ 1 2 3) ; => 6

(define . (x 1))
x ; => 1
(define y 2)
y ; => 2 
```

我的问题是：除了内部文字数据之外，Racket/Scheme 语法中允许“点对”s 表达式的原因是什么？是否有可以使用对编写但不能使用列表更简单地编写的 Racket/Scheme 表达式的示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:20:14.960

在任何 Lisp 系统中，阅读和评估都是独立的步骤。对读者来说，*一切*都是文字数据；评估者决定评估什么以及将什么（凭借`quote`and `quasiquote`）视为文字数据。

读者以完全相同的方式阅读以下表达式：

```
(+ 1 2 3)
(+ . (1 2 3))
(+ . (1 . (2 3)))
(+ . (1 . (2 . (3))))
(+ . (1 . (2 . (3 . ())))) 
```

这是因为，在基本级别上，非空列表是由一堆 cons 单元格组成的，这些单元格恰好有一个`cdr`指向另一个列表（空或非空）。

此外，有*一些*合法的 Scheme 表达式确实使用了不正确的列表。lambda 的 Rest 参数就是一个很好的例子：

```
(define (list . items)
  items) 
```

# node.js - 为复杂的 json 路径创建字符串键

> ID：15663744
> 
> 赞同：0
> 
> 时间：2013-03-27T16:13:49.550
> 
> 标签：node.js, jsobject

我需要访问并在一个大的 json 对象上进行一系列操作。我需要阅读和更改的一些内容非常深入树的路径，例如：

```
result.project.properties[0]['hudson.model.ParametersDefinitionProperty'][0].parameterDefinitions[0]['hudson.model.BooleanParameterDefinition'] 
```

这条路径是我将一遍又一遍地引用的东西。我希望能够做类似的事情：

```
key = "project.properties[0]['hudson.model.ParametersDefinitionProperty']  [0].parameterDefinitions[0]['hudson.model.BooleanParameterDefinition']" 
```

所以我可以像这样读取和或写入路径：

```
result[key] 
```

但节点甚至不能使用：

```
result['project.properties'] 
```

更不用说我必须使用的整个深层路径。

有没有一种好方法可以使路径可重用，而不必多次输入整个内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:43:48.383

`result[key]`指的是一个对象（键），您将其初始化为：

```
key = "project.properties[0]['hudson.model.ParametersDefinitionProperty']  [0].parameterDefinitions[0]['hudson.model.BooleanParameterDefinition']" 
```

在您的 JSON 对象中，没有具有该大名称的对象，因此它不起作用。如果您不想输入整个内容，请尝试以下操作：

```
shortResult = result.project.properties[0]['hudson.model.ParametersDefinitionProperty'][0].parameterDefinitions[0]['hudson.model.BooleanParameterDefinition']; 
```

从这里您可以访问“BooleanParameterDefinition”中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:47:14.373

你有没有尝试过类似的东西

```
var reference = result.project.properties[0]['hudson.model.ParametersDefinitionProperty'][0].parameterDefinitions[0]['hudson.model.BooleanParameterDefinition']; 
```

这将在您的较大对象中保留对该“位置”的引用，并且您可以在 is as 中引用属性`reference[attribute]`。

`result['project.properties']`不起作用的原因是它正在寻找具有键“project.properties”的属性，而您的对象没有该属性。

# arrays - 3D 数组中特定元素序列的最大数量

> ID：15663746
> 
> 赞同：0
> 
> 时间：2013-03-27T16:13:52.720
> 
> 标签：arrays, math, multidimensional-array, mathematical-optimization, discrete-mathematics

因此，对于数据结构分配，我必须使用随机选择的五种颜色之一来初始化静态分配的 3D 数组中的每个元素。该数组的类型为 ColorEnum，声明如下：

* * *

枚举 ColorEnum { 红色、橙色、黄色、绿色、蓝色}；

* * *

我的任务是找到构成特定元素序列的元素的索引（这意味着序列中的每个元素在逻辑上与序列中的下一个元素并排、从上到下或从前到后接触）。一个完整的序列将是一个红色元素正在接触橙色元素，而橙色元素正在接触黄色元素，黄色元素正在接触绿色元素，而绿色元素正在接触蓝色元素。要接触，两个元素的整个侧面必须相邻，而不仅仅是边缘或角落。因此，每个元素最多可以接触 6 个其他元素。单个元素可以在多个序列中使用。为了在序列中存储元素的索引，我使用了一个静态分配的 1D 结构数组，该数组将保存元素的行、列和深度索引。为了存储每个序列，我使用了另一个静态分配的 1D 数组，该数组保存序列中元素的索引。谈到我的问题，为了尽可能少地使用内存，我需要知道分配给数组数组的大小。我希望这个大小等于这些红色、橙色、黄色、绿色、蓝色序列的最大数量，但我不知道如何确定这个数字。有没有数学天才愿意帮我一把？我的任务早就完成了。我得到了 94/100，但这个问题困扰着我。我很感激帮助。我希望这个大小等于这些红色、橙色、黄色、绿色、蓝色序列的最大数量，但我不知道如何确定这个数字。有没有数学天才愿意帮我一把？我的任务早就完成了。我得到了 94/100，但这个问题困扰着我。我很感激帮助。我希望这个大小等于这些红色、橙色、黄色、绿色、蓝色序列的最大数量，但我不知道如何确定这个数字。有没有数学天才愿意帮我一把？我的任务早就完成了。我得到了 94/100，但这个问题困扰着我。我很感激帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:42:04.433

可能序列的最大数量将取决于 3D 数组的尺寸和（当然）网格的填充。从组合的角度来看，我会尝试找到这种 3D 网格的最有效填充。但是，分配最大值是假设最坏的情况，您最好使用@Kevin 评论的向量。

对我来说似乎有效的网格填充是用 3 个先前的颜色和 3 个接下来的颜色填充 1 个块的 6 个相邻位置（因此黄色块将具有 3 个橙色块和 3 个绿色块作为邻居）。如果你用下一种颜色填充（后、右、上）邻居，用前一种颜色填充（前、左、下）邻居，那么新兴结构允许在很多序列中使用 1 个块。如果一种颜色没有下一个/上一个颜色，只有上一个/下一个颜色。

在 2D 中你会有这样的东西（缩写的颜色名称）

```
BGYOROYGBGYOROYGB
GBGYOROYGBGYOROYG
YGBGYOROYGBGYOROY
OYGBGYOROYGBGYORO
ROYGBGYOROYGBGYOR 
```

使用左下角 R 的序列数是 2^4，使用中间 R 之一（在无限场中）的序列数是 2^5。然后可以针对该模式计算 3D 字段中序列的确切总 nr，同时考虑边界（并且可能在边缘采用不同的方案，因为会有一些损失）

我的填充方法只是填充网格的一种方法，还有其他可能性，甚至可能更好。

# php - move_uploaded_file 与 ajax

> ID：15663749
> 
> 赞同：0
> 
> 时间：2013-03-27T16:14:03.887
> 
> 标签：php, ajax

我在尝试从表单上传文件时遇到问题。带有文件输入的表单是使用 ajax 创建的。

ajax-getForm.php

```
<input id="uploadCouponPhoto" name="uploadCouponPhoto" type="file"> 
```

然后我在按钮上使用 javascript

```
<input id="popup_couponBox_commandButton" type="button" onclick="javascript: coupons_apply();" value="Appliquer"> 
```

执行另一个保存表单的 ajax 文件。

ajax-saveCoupon.php

```
$customPhoto = @$_POST['uploadCouponPhoto'];
if(!empty($customPhoto)){
    $name = "coupon_".$idCoupon;
    $directory = $_SERVER["DOCUMENT_ROOT"]."/resources/images/members/".$idMember;
    if(move_uploaded_file($customPhoto, $directory."/".$name)){
        echo "success";
    }
    else{
        var_dump($_FILES['uploadedfile']['error']);
    }
} 
```

但是，ajax-saveCoupon.php 的响应总是错误的。我试图查看使用的错误，`$_FILES['uploadedfile']['error']`但这给出了NULL。`var_dump($_FILES)`给出一个空数组。我还可以`uploadCouponPhoto: C:\fakepath\small-logo2.jpeg`在 ajax-saveCoupon 标头的表单数据中看到。我想知道我没有正确执行此操作，是因为 move_uploaded_file 与输入不在同一个文件中吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:23:34.820

您不能简单地`POST`使用 AJAX 文件。您可以使用 FileReader API 来读取文件并构建您自己的`multipart/form-data`请求。

这是相当复杂的，并且有很多关于如何做到这一点的教程。祝你好运。

# libraries - gfortran 中的 f77 代码 - 库调用

> ID：15663752
> 
> 赞同：1
> 
> 时间：2013-03-27T16:14:11.097
> 
> 标签：libraries, gfortran, g77

我从以前的研究人员那里继承了一个旧的 f77/g77 程序，但对 Fortran 的经验很少。我已经完成了文件中的大部分语法转换，但我遇到了一个问题，即旧文件调用了一个名为[libstr](http://www.ccl.net/cca/software/SOURCES/FORTRAN/string-library/libstr/string.shtml)的（已弃用？）库。我似乎在任何当前的 gfortran 文档中都找不到对此的参考（尽管我也不确定我是否在寻找正确的地方）。我想知道的是是否有办法避免调用`Union`and `flostr`函数，而是直接在文件中输出值。

代码的相关部分在这里：

```
if (mod(ntime,nout) .eq. 0) then

ndec = 1
call flostr(t,str1,ndec)
call Union('signal_t=',str1,str2)
call Union('lineshapeSPConD_t=',str1,str3)
open(7,file = str3,STATUS ='unknown') 
```

我想要么弄清楚如何安装库（我尝试运行 makefile，并且 gfortran 在其搜索路径中查看 /usr/bin），要么能够替换函数将解决问题。我在 OS X 10.8.3 上使用从 Homebrew 安装的 gfortran 4.8。

谢谢！

更新：

我通过在 gfortran 编译中包含库成功地编译了代码，但是现在运行输出程序会导致一串错误......</p>

输出错误是：

```
Program received signal SIGFPE: Floating-point exception - erroneous 
arithmetic operation.

Backtrace for this error:
#0  0x1470e91c2
#1  0x1470e998e
#2  0x7fff92330949
#3  0x10421642e
#4  0x104217472
[1]    18171 floating point exception  ./Lineshape_thick_SP_New.x 
```

回到绘图板。

# ios - 截图 iOS，MonoGame

> ID：15663755
> 
> 赞同：2
> 
> 时间：2013-03-27T16:14:13.830
> 
> 标签：ios, xamarin.ios, monogame

我正在使用 MonoGame 为 iOS 开发游戏。该游戏已经使用 MonoGame 为 Windows 8 (metro) 发布。我们得到了 MonoTouch，我遇到了几个问题，但只剩下一个主要问题。我不能截图。能够截取屏幕截图是游戏中必不可少的组成部分，因为我们有游戏区域共享，所以其他用户将能够看到保存的游戏的样子。据我了解，这在develop3d 分支中未实现，但我从某人那里听说它是在旧版本的develop 分支中实现的。有谁知道解决这个问题的方法？这似乎是一件相当普遍的事情。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:38:06.580

对于 UIKit 屏幕，您可以使用：

```
UIScreen.Capture() 
```

对于 OpenGL 屏幕，您可以使用：

```
iPhoneOSGameView.Capture() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:29:46.137

您可能可以使用本机 iOS API 来做到这一点：

```
UIViewController controller = game.Services.GetService(typeof(UIViewController)) as UIViewController;

UIGraphics.BeginImageContext(controller.View.Frame.Size);
using (var context = UIGraphics.GetCurrentContext())
{
    controller.View.Layer.RenderInContext(context);
    using (var image = UIGraphics.GetImageFromCurrentImageContext())
    {
        //Save the image to file here   
    }
}
UIGraphics.EndImageContext(); 
```

检查错误，这不在我的脑海中。

我猜 XNA api 只是没有实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T12:20:49.603

我自己实现了这个，我打算创建一个 PR 但没有时间。我用来创建屏幕截图的代码可以在这里找到：[Texture2D.cs](https://github.com/weaverx9x9/MonoGame/blob/local/MonoGame.Framework/Graphics/Texture2D.cs "这里") 我有一段时间没有与 remote 合并，所以不确定这将如何插入当前源。请注意，您要查看的方法是 SaveAsJpeg 和 SaveAsPng，棘手的部分是正确获取 GetTextureData()。这个问题完全有可能已经被其他人解决了。但这对我有用。

# ios - 防止我的应用程序在后台模式下挂起？

> ID：15663757
> 
> 赞同：0
> 
> 时间：2013-03-27T16:14:17.197
> 
> 标签：ios, background-process

我的应用程序在一段时间后被 iOS 暂停 - 从一小时到几天 - 但我希望它在设备运行时尽可能长时间（可能无限）在后台工作。SMS 会一直通知用户设备正在运行——iOS 不会终止 SMS 服务。我的应用程序具有类似的功能，应该通知用户新的收入消息等。

那么我可以对我的应用程序做同样的事情吗？也许有一些黑客？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:23:43.797

不。

有以下例外：

*   玩音乐
*   GPS追踪
*   网络电话

此外，所有应用程序最多可以有十分钟的时间来完成现有任务。

如果您准备越狱，应该有一个答案，否则，当前版本的 iOS 是不可能的。

解决这个问题的方法是在服务器上进行处理，并在发生有趣的事情时发送推送通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:26:43.343

您不希望您的应用程序无限期地运行。

您应该使用[推送通知](http://www.raywenderlich.com/3443/)。这将以与 SMS 应用程序相同的方式通知您的用户。

# c# - 截断逗号分隔字符串中最后一项的最简洁方法？

> ID：15663758
> 
> 赞同：0
> 
> 时间：2013-03-27T16:14:18.843
> 
> 标签：c#

您知道采用逗号分隔的字符串（例如“A，B，C，D，E，F，G”）并仅返回列表中第一个 x 数量的项目的最佳/最干净的方法是什么？因此，如果 x = 5，那么结果将是“A、B、C、D、E”。

我知道有不同的方法可以做到这一点：“for循环”计数逗号，然后截断字符串；将字符串拆分为数组或列表，然后删除最后 x 个项目。

有没有我不知道的更清洁、更有效的选择？你会怎么做？

提前致谢！！格雷格

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:16:37.277

我会将任务分为两部分：

*   用逗号分割字符串
*   只取前 N 个值

幸运的是，C# 使这两个都变得非常简单，[`String.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)处理第一个，而 LINQ[`Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)方法处理第二个：

```
var items = text.Split(',')
                .Take(itemLimit); 
```

或者，如果您想创建一个列表：

```
var items = text.Split(',')
                .Take(itemLimit)
                .ToList(); 
```

除非您确实需要，否则我*不会*将其转换回逗号分隔的字符串。`List<string>`尽可能长时间地保持数据的最自然表示（例如 a ）。如果需要，只需使用`String.Join`.

您可以*通过*编写“惰性拆分器”来提高该`Split`部分的效率 - 但 IMO 除非您希望得到一个很长的字符串并且只想保留一些项目，否则它只会获得很少的收益。它看起来*像*这样：

```
public static IEnumerable<string> LazySplit(this string text, string separator)
{
    int start = 0;
    while (true)
    {
        int end = text.IndexOf(separator, start);
        if (end == -1)
        {
            // Note: if the string ends with the separator, this will yield
            // an empty string
            yield return text.Substring(start);
            yield break; // This will terminate the otherwise-infinite loop
        }
        yield return text.Substring(start, end - start);
        start = end + separator.Length;
    }
} 
```

那么使用代码和之前类似：

```
var items = text.LazySplit(",")
                .Take(itemLimit)
                .ToList(); 
```

或者，如果你*真的，真的*需要把它保存在一个字符串中，你可以写一些东西来找到第 N 个逗号，然后用它`Substring`来获取字符串的第一部分：

```
// TODO: Improve the name :)
public static string TruncateAfterSeparatorCount(string text,
                                                 string separator,
                                                 int count)
{
    // We pretend that the string "starts" with a separator before index 0.
    int index = -separator.Length;
    for (int i = 0; i < count; i++)
    {
        int nextIndex = text.IndexOf(separator, index + separator.Length);
        // Not enough separators. Return the whole string. Could throw instead.
        if (nextIndex == -1)
        {
            return text;
        }
        index = nextIndex;
    }
    // We need to handle the count == 0 case, where index will be negative...
    return text.Substring(0, Math.Max(index, 0));
} 
```

但正如我所说，如果可能的话，我个人会尝试使用这种`List<string>`方法。上面的代码显然比`Split`/ `Take`/复杂得多`ToList`，尽管它更有效。只有在证明有必要时才使用更高效但更复杂的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T16:16:07.243

试试这个：

```
string.Join("," , str.Split(",").Take(5)); 
```

或者，如果你经常这样做，你可以为此编写一个扩展方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:16:47.343

大概是一个[`Split`](http://msdn.microsoft.com/en-gb/library/b873y76a.aspx)和一个[`Take`](http://msdn.microsoft.com/en-gb/library/bb503062.aspx)。

试试这个：

```
string yourString = "A,B,C,D,E,F,G";
List<string> items = yourString.Split(',')
    .Take(5)
    .ToList();
string output = string.Join(",", items); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T16:16:54.813

```
string[] words = s.Split(',').Take(5); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T16:19:08.537

```
 string[] List = SubList(5);
    string Output = string.Join(",", List);

private string[] SubList(int p)
{
    string[] List = new string[] { "A", "B", "C", "D", "E", "F" };
    string[] List2 = new string[p];
    for (int i = 0; i < p; i++)
        List2[i] = List[i];
    return List2;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T16:30:26.957

如果您只想使用`String`方法（而不是 Take()），这应该可以工作：

```
string.Join(",", s.Split(","), 0, 5); 
```

如果你知道每个元素只有一个字符，你可以这样做：

```
s.Substring(0, 2*x - 1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-27T16:34:58.007

只是为了好玩 - 仅使用 Regex/String 方法（我不会使用 Regex 来做这个现实世界 - 然后我会[遇到两个问题](https://meta.stackexchange.com/a/20842/158564)）：

```
string.SubString(0,Regex.Matches(string,",")[x-1].Index); 
```

# android - 在 Fragment 构造函数中访问资源

> ID：15663759
> 
> 赞同：1
> 
> 时间：2013-03-27T16:14:21.487
> 
> 标签：android, android-fragments

我有一个`Fragment`空构造函数，我需要能够访问字符串资源，以便我可以创建片段的构造组件。

我知道我可能应该使用`newInstance()`构造函数而不是构造函数，但构造函数到目前为止一直在工作，使用`Bundle`.

我的片段构造函数如下：

```
public SideMenuView(Context ctx) {

    menuItems = new MenuItem[] {

            new MenuItem(R.drawable.one_icon, ctx.getResources().getString(R.string.one), R.id.imgChevron),
            new MenuItem(R.drawable.two_icon, ctx.getResources().getString(R.string.two), R.id.imgChevron),
            new MenuItem(R.drawable.three_icon, ctx.getResources().getString(R.string.three), R.id.imgChevron)
        };

    fragCache = new Fragment[menuItems.length];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:47:29.007

为什么需要在构造函数中获取这些资源？我只是将那段代码移到`onCreate()`方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:50:07.997

在片段中使用菜单就足够了：

a) 添加以下从 XML 资源构建菜单的方法

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
{
     inflater.inflate(R.menu.attendance_fragment, menu);
} 
```

b) 添加

```
setHasOptionsMenu(true); 
```

在片段构造函数中提示 android 你的片段想要参与填充选项菜单

# perl - 为什么变量在 perl 中被先前的命令替换？

> ID：15663761
> 
> 赞同：2
> 
> 时间：2013-03-27T16:14:24.807
> 
> 标签：perl, csh

我正在尝试使用 perl one liner 仅替换文件中第一次出现的模式。

```
>touch tmp
>perl -p -i.bak -e '++$seen if( !$seen && s/alpha/beta/);' tmp 
```

在此之后，我按 Enter。屏幕上出现以下消息。

```
perl -p -i.bak -e '++$seen if( tmpseen && s/alpha/beta/);' tmp 
```

请注意，已`!$seen`替换为`tmpseen`.

为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:27:02.483

正如 kjprice 提到的 !$ 被外壳扩展。一种可能的解决方案是使用运算符“not”而不是运算符 !。

```
perl -p -i.bak -e '++$seen if( (not $seen) && s/alpha/beta/);' tmp 
```

括号存在是因为运算符“not”的优先级较低

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T16:28:06.090

您可以使用以下命令转义任何 csh 特殊字符`\`：

```
 perl -p -i.bak -e '++$seen if( \!$seen && s/alpha/beta/);' tmp 
```

# sql - 在没有 oracle 页眉/页脚的情况下将 sqlresult 放入 bash 变量

> ID：15663763
> 
> 赞同：0
> 
> 时间：2013-03-27T16:14:26.283
> 
> 标签：sql, bash, sqlplus

```
#!/bin/bash -x

x=`sqlplus scott/tiger@xe<<endl
set heading off
select sysdate from dual;
exit
endl`

echo the answer is $x 
```

正在输出

```
the answer is SQL*Plus: Release 10.2.0.1.0 - Production on Wed Mar 27 09:01:25 2013 Copyright (c) 1982, 2005, Oracle. All rights reserved. Connected to: Oracle Database 10g Express Edition Release 10.2.0.1.0 - Production SQL> SQL> 27-MAR-13 SQL> Disconnected from Oracle Database 10g Express Edition Release 10.2.0.1.0 - Productiong 
```

我想要的只是查询 sysdate 的结果。我如何摆脱所有的 oracle 版本、版权、...信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:21:20.620

我找到了答案

```
sqlplus -s 
```

然后将消除标题

# asp.net - SessionHelper 类仅存储最后一个用户

> ID：15663766
> 
> 赞同：0
> 
> 时间：2013-03-27T16:14:34.340
> 
> 标签：asp.net, c#-4.0, session-variables

我们有这个帮助类来访问会话，但它只存储最后一个值。我无法检测到任何错误。

```
public interface ISessionHelper
{
    void AddToSession<T>(string key, T value);
    T GetFromSession<T>(string key);
    void RemoveFromSession(string key);
}

public class SessionHelper : ISessionHelper
{
    private static SessionHelper sessionHelper;
    private Dictionary<string, object> sessionCollection;
    private const string SESSION_MASTER_KEY = "SESSION_MASTER";

    private SessionHelper()
    {
        if (null == sessionCollection)
        {
            sessionCollection = new Dictionary<string, object>();
        }
    }

    public static ISessionHelper Instance
    {
        get
        {
            if (null == sessionHelper)
            {
                sessionHelper = new SessionHelper();
            }
            return sessionHelper;
        }
    }

    public void AddToSession<T>(string key, T value)
    {
        sessionCollection[key] = value;
        HttpContext.Current.Session.Add(SESSION_MASTER_KEY, sessionCollection);
    }

    public void RemoveFromSession(string key)
    {
        sessionCollection.Remove(key);
    }

    public T GetFromSession<T>(string key)
    {
        var sessionCollection = HttpContext.Current.Session[SESSION_MASTER_KEY] as Dictionary<string, object>;
        if (null != sessionCollection)
        {
            if (sessionCollection.ContainsKey(key))
            {
                return (T)sessionCollection[key];
            }
            else
            {
                return default(T);
            }
        }
        else
        {
            throw new Exception("Session Abandoned");
        }
    }
} 
```

对该类的调用如下：

```
SessionHelper.Instance.AddToSession(SessionConstants.CURRENT_USER_INFO, user); 
```

我认为初始化类的字典部分会导致问题，但我无法确定它。

或者这可能是问题所在？

```
void Session_Start(object sender, EventArgs e)
{
    CUserRoles userRoles;

    string currentUser = HttpContext.Current.User.Identity.Name;

    User user = UserManager.GetUserCompleteInfo(currentUser, out userRoles);

    if (user != null && user.UserID > 0)
    {
        SessionHelper.Instance.AddToSession(SessionConstants.CURRENT_USER_INFO, user);

        if (userRoles != null)
        {
            SessionHelper.Instance.AddToSession(SessionConstants.CURRENT_USER_ROLE, userRoles);
        }
    }
    else
    {
        Response.Redirect("AccessDenied.aspx", true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:16:40.280

我想，既然`sessionCollection`是单例的成员，那就有作用了。我只是将成员`sessionCollection`从会话中拉出并使用它或根据需要在每种方法中插入它。你`GetFromSession`看起来像正确的模式。

一个更简单的方法是这样做。拨打此电话以获取您的收藏。

```
private Dictionary<string, object> GetSessionCollection() 
{ 
     // add locking
    var collection = HttpContext.Current.Session[SESSION_MASTER_KEY] as Dictionary<string, object>;

    if (collection == null) 
    {
        collection = new Dictionary<string, object>()
        HttpContext.Current.Session[SESSION_MASTER_KEY] = collection;
    }

    return collection;
} 
```

一个更新的`AddToSession`

```
public void AddToSession<T>(string key, T value)
{
    var sessionCollection = GetSessionCollection();
    sessionCollection.Add(key, value);
} 
```

# android - 如何在不启动新实例的情况下将数据从 Activity 传递到 Service？

> ID：15663767
> 
> 赞同：1
> 
> 时间：2013-03-27T16:14:34.480
> 
> 标签：android

我在使用意图、附加功能等和使用 startService(intent) 将数据传递给服务时没有问题

```
Intent intent = new Intent();
intent.setClass(MainActivity.this, MediaPlayerService.class);
intent.setAction(MediaPlayerService.PLAY_PAUSE);

intent.putExtra("URI", URI);
intent.putExtra("TITLE", content.toString());
//PendingIntent.getService(MainActivity.this, 0, intent, 0);
startService(intent); 
```

问题是该服务是使用 MediaPlayer 播放音乐的后台服务。每次使用 startService 我担心它可能会产生多个玩家，最终我得到一个 ANR（即使一切正常）

我只需要告诉 MusicPlayerService 播放新曲目。有任何想法吗？正如您从代码中看到的那样，我也尝试了 PendingIntent （在网上建议），但它似乎没有用

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:18:37.567

> 每次使用 startService 我担心它可能会产生多个玩家

不会。您的服务将恰好有零个或一个实例。如果服务已经启动，`startService()`则不会启动第二个实例，而只是调用`onStartCommand()`现有实例。

> 最终我得到了一个 ANR

堆栈跟踪应该指出您的困难的根源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:29:38.557

绑定到您的服务并通过 Messenger 发送您的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:53:16.120

解决了！我检查了，如果我这样做了

```
public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);
        Log.d(TAG,"super called "+startId);
... 
```

我看到 startId 不断增加并最终给出超时。通过调用解决

```
stopService(intent)
...
startService(intent) 
```

如此简单，但要找到它却让人头疼！

# python-2.7 - Google App Engine Live Auction App 服务器端更新逻辑

> ID：15663771
> 
> 赞同：1
> 
> 时间：2013-03-27T16:14:44.190
> 
> 标签：python-2.7, google-app-engine, server-side

我正在编写一个类似于 proxibid.com 的现场拍卖应用程序。当一件物品进入拍卖区时，如果没有连接到驱动应用程序的客户端，我将如何更新服务器？假设一件物品在上午 10 点进行拍卖。拍卖室里没有人竞标该物品，因此 10 秒后我需要通知服务器并将该物品标记为未售出。任何煽动都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:53:03.540

GAE 的缺点之一是您不能运行自己的单独服务器进程，但是您可以运行[cron 作业](https://developers.google.com/appengine/docs/python/config/cron)：

> App Engine Cron 服务允许您配置在定义的时间或定期运行的定期计划任务

您可以以较小的间隔安排一个 cron。

另一种选择是在与您的应用程序通信的单独服务器上运行一个进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T01:02:41.160

后端是一个潜在的解决方案。你可以运行一个永久的后端，跟踪并标记未售出。 [https://developers.google.com/appengine/docs/python/backends/](https://developers.google.com/appengine/docs/python/backends/)。这些可能是比 cron 更好的解决方案。

# arrays - C# 数组距离函数

> ID：15663777
> 
> 赞同：1
> 
> 时间：2013-03-27T16:14:57.520
> 
> 标签：arrays, c#-4.0, distance

有没有简单的方法来计算 2 个相同长度的数组上的某种距离函数以检查它们的差异？数组都是浮点数，每个 bin 可能为空或包含一个值。我这样做是因为我需要比较两个不同图像的两个颜色直方图。谢谢

编辑：通过距离函数，我的意思是两个阵列上的 Levenshtein 距离，所以我可以检查两者之间的“差异”。我希望根据计算的距离检查对象是否在图像中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:19:44.847

如果您只想要各个值之间差异的总和，您可以使用：

```
var distance = array1.Zip(array2, (a,b) => Math.Abs(a-b)).Sum(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:57:38.257

最后使用一个简单的 for 循环遍历每个项目：

```
private static float ArrayDistanceFunction(float[] array1, float[] array2)
{
        float total = 0;

        for (int i = 0; i < array1.Length; i++)
        {
            total += Math.Abs(array1[i] - array2[i]);
        }
        return total;
} 
```

Reed Copsey 的回答确实有效，但不知何故它的表现比我的实现慢

# iphone - iPhone相册源代码

> ID：15663789
> 
> 赞同：0
> 
> 时间：2013-03-27T16:15:25.273
> 
> 标签：iphone, photo-gallery

我是 iPhone 开发的新手，我希望在我的应用程序中添加一个图片库，该图片库的外观和行为与 iPhone 照片库相同。带有滑动/手势识别器的缩略图导致详细视图。请问有人可以帮我解决这个问题的源代码吗？多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:30:48.977

使用其中之一：

[PhotoPicker 的 Apple 代码](https://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196)

[照片滚动器](https://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010080)

或者如果你没有找到任何东西，去[这里探索](https://developer.apple.com/library/ios/navigation/index.html?filter=passkit#section=Resource%20Types&topic=Sample%20Code)

# java - 限制对 servlet 的访问

> ID：15663791
> 
> 赞同：1
> 
> 时间：2013-03-27T16:15:31.893
> 
> 标签：java, tomcat, servlets, restriction

我有一个网关 sevlet，它将用户转发到许多处理任务的 servlet。

每个用户必须首先通过网关 servlet，然后将它们转发到适当的 servlet。我创建了一个 RequestDispatcher 并将其转发功能执行到正确的 servlet。

问题是所有 servlet 都是公开可用的，因此他们的用户实际上可以去执行他们想要的任何 servlet。

我想只允许访问网关 servlet 并限制对所有其他人的访问。但当然要允许网关转发到 servlet。

怎么做到呢？

谢谢你！

使用 Apache Tomcat 7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:56:08.973

使用过滤器检查当前用户是否已登录，您需要自己编写方法 userIsLoggedIn()，通过检查会话属性：

```
public class LoginFilter implements Filter {

  public void doFilter(ServletRequest req, ServletResponse res,
        FilterChain chain) throws IOException, ServletException {

      if (userIsLoggedIn()) {

        //process request normally, pass up the filter chain to the servlet:
        chain.doFilter(req, res);  

      } else {

        //go to login screen instead
        RequestDispatcher dispatcher = getRequestDispatcher("login");
        dispatcher.forward( request, response );
      }
  }
} 
```

在您的 web.xml 中，您需要声明您的过滤器：

```
<filter>
  <filter-name>loginFilter</filter-name>
  <filter-class>
     com.foo.LoginFilter
  </filter-class>
</filter>
<filter-mapping>
  <filter-name>loginFilter</filter-name>
  <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# ios - 如何将“通过 Twitter 登录”凭据从 Rails 后端传递到 iPhone 应用程序？

> ID：15663792
> 
> 赞同：4
> 
> 时间：2013-03-27T16:15:32.207
> 
> 标签：ios, objective-c, ruby-on-rails, twitter, omniauth

我正在为 Rails 中的 iOS 应用程序做后端。用户需要能够使用特定于应用程序的用户名/密码或通过 Twitter 登录应用程序，但我不太确定如何设置通过 Twitter 登录。

如果我使用 OmniAuth，那么流程似乎是这样的：

1.  iOS 应用程序将 Safari 中的用户定向到 OmniAuth 为我设置的 /auth/twitter 页面
2.  /auth/twitter 页面将用户发送到 Twitter 以进行 OAuth 身份验证
3.  Twitter 将用户返回到 /auth/twitter/callback，OmniAuth 给了我一个包含信息的 auth 哈希
4.  ？？？
5.  iOS 应用程序现在拥有在调用我的 API 时识别发出请求的用户所需的凭据
6.  身份验证完成，应用程序正常使用

这是第 4 步，将凭据返回到 iOS 应用程序，我不知道如何设置。iOS 应用程序调用的所有 API 都是无状态的；如果他们需要经过身份验证的用户，则用户凭据包含在 API 调用中。我对编写 iOS 应用程序知之甚少，对应用程序如何与 Safari 交互几乎一无所知。

将用户凭据返回到应用程序的安全方法是什么？一个不能被窥探的？如果我让回调页面将信息放入 cookie 或会话中，应用程序是否可以访问这些信息，但观看流量的任何人都不能访问？

或者，如果应用程序在对 /auth/twitter 的初始调用中附加了一些标识符，那么 Twitter 和 OmniAuth 是否会保留该标识符，以便将其包含在 /auth/twitter/callback 中，以便应用程序可以询问我结束与该标识符关联的身份验证的凭据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T12:52:19.827

> 或者，如果应用程序在对 /auth/twitter 的初始调用中附加了一些标识符，那么 Twitter 和 OmniAuth 是否会保留该标识符，以便将其包含在 /auth/twitter/callback 中，以便应用程序可以询问我结束与该标识符关联的身份验证的凭据？

你试过了吗？因为这通常是您的第 4 步。您保留有关用户的令牌或其他内容，因此当您收到回调时，您可以再次查找该用户。没有会话或 cookie，只有普通的 db。

# android - 从 Android 中的谷歌地图清除标记

> ID：15663793
> 
> 赞同：88
> 
> 时间：2013-03-27T16:15:32.613
> 
> 标签：android, google-maps-android-api-2

我已经在片段活动上添加了地图并使用 addMarker 函数添加了几个标记，但是我能够删除所有标记，我收到不同标记列表的通知，

现在我想删除所有标记并添加新标记。

将所有标记保留在列表中并一一删除的一种方法，（marker.remove（））

有没有更好的方法来清除所有标记。

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2013-03-27T16:17:21.000

如果要清除“地图上的所有标记、叠加层和折线”，[请](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#clear%28%29)[在`clear()``GoogleMap`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#clear%28%29).

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-06-13T10:54:52.807

如果您不想清除折线并且只需要删除标记，请按照以下步骤操作。

首先创建一个新的标记数组，如下所示

```
List<Marker> AllMarkers = new ArrayList<Marker>(); 
```

然后，当您在谷歌地图上添加标记时，还将它们添加到标记数组（在本例中为 AllMarkers）

```
for(int i=0;i<places.length();i++){

                LatLng location = new LatLng(Lat,Long);
                MarkerOptions markerOptions = new MarkerOptions();
                markerOptions.position(location);
                markerOptions.title("Your title");

                 Marker mLocationMarker = Map.addMarker(markerOptions); // add the marker to Map
                    AllMarkers.add(mLocationMarker); // add the marker to array

                } 
```

然后最后调用以下方法一次删除所有标记

```
 private void removeAllMarkers() {
        for (Marker mLocationMarker: AllMarkers) {
            mLocationMarker.remove();
        }
        AllMarkers.clear();

    } 
```

从任何地方调用以删除所有标记

```
removeAllMarkers(); 
```

当我正在寻找一种仅删除地图标记而不清除折线的方法时，我找到了此解决方案。希望这对你也有帮助。

# r - 编织文件时禁止 knitr 的所有输出

> ID：15663800
> 
> 赞同：9
> 
> 时间：2013-03-27T16:15:44.773
> 
> 标签：r, knitr

我正在使用 knitr 并且想在编织文件时抑制任何类型的详细输出。我知道我可以通过

```
opts_knit$set(progress=FALSE) 
```

然而，我什至想抑制有关处理文件和输出文件的信息。这有可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T17:43:48.837

我刚刚添加了一个在前几天命名的新参数[`quiet`](https://twitter.com/xieyihui/status/316669228415610880)，`knit()`它将抑制有关文件名的消息。您可以安装[最新的开发版本](https://github.com/yihui/knitr#readme)，或者等待`knitr`大约 10 天后的 v1.2。

```
library(knitr)
knit(..., quiet = TRUE) 
```

# wpf - WPF中的选择更改事件

> ID：15663804
> 
> 赞同：1
> 
> 时间：2013-03-27T16:15:51.257
> 
> 标签：wpf, tabcontrol, selectionchanging

我正在寻找一种方法来防止 WPF 项目中的选择更改（现在是 Tab 控件，但将来需要对 ListBoxes、ListViews 和 ComboBoxes 执行此操作）。

我遇到了[这个线程](https://stackoverflow.com/questions/4851315/wpf-tabcontrol-prevent-selection-change)并尝试使用标记为答案的相同技术。

在该技术中，您检索选项卡控件项目的[CollectionView](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.aspx)并处理[CollectionView 的 CurrentChanging 事件](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.currentchanging.aspx)以防止发生选择。

出于某种原因，我的代码中从未触发 CurrentChanging 事件。

这是我正在使用的非常简单的用户控件。它有一个带有 3 个选项卡的选项卡控件。

(XAML)

```
<UserControl x:Class="UserControlWithTabs"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">

    <TabControl x:Name="MainTabControl">
       <TabItem Header="First Tab">Content for the first tab</TabItem>
       <TabItem Header="Second Tab">Content for the second tab</TabItem>
       <TabItem Header="Third Tab">Content for the third tab</TabItem>
     </TabControl>
</UserControl> 
```

在我的用户控件的 VB.NET 代码中，我只是为选项卡控件的项目检索 CollectionView 并使用 AddHandler 方法来监视事件。

(VB.NET)

```
Public Class UserControlWithTabs
  Private WithEvents mainTabCollectionView As CollectionView
  Private Sub UserControlWithTabs_Loaded(sender As Object, e As System.Windows.RoutedEventArgs) Handles Me.Loaded
    mainTabCollectionView = CollectionViewSource.GetDefaultView(MainTabControl.Items)
    AddHandler mainTabCollectionView.CurrentChanging, AddressOf MainTabControl_ItemSelecting
  End Sub

  Private Sub MainTabControl_ItemSelecting(ByVal sender As Object, ByVal e As System.ComponentModel.CurrentChangingEventArgs)

  End Sub
End Class 
```

我在 MainTabControl_ItemSelecting 方法上设置了一个断点，但它从未被击中。

我究竟做错了什么？

谢谢，

-弗林尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:28:44.487

您是否尝试过添加`IsSynchronizedWithCurrentItem="True"`到您的`TabControl`?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-02T16:16:35.280

感谢问题和答案，我能够在 c# 中做到这一点。因此，对于任何需要使用 c# 代码隐藏这样的东西的人，我是这样做的：

```
 mytab.IsSynchronizedWithCurrentItem = true; 
    mytab.Items.CurrentChanging += new CurrentChangingEventHandler(Items_CurrentChanging); 

    private void Items_CurrentChanging(object sender, CurrentChangingEventArgs e)
    {
        if (e.IsCancelable)
        {
            FrameworkElement elemfrom = ((ICollectionView)sender).CurrentItem as FrameworkElement;
            FrameworkElement elemto = mytab.SelectedItem as FrameworkElement; 
        }
        Console.WriteLine("tab is changing."); 
    } 
```

# c++ - 用于用 C++ 编写 Windows 应用程序的免费编译器 + IDE（针对学生）

> ID：15663805
> 
> 赞同：0
> 
> 时间：2013-03-27T15:34:19.427
> 
> 标签：c++, ide

我将在这个暑假期间教初中和高中生 C++。我去了一家书店，浏览了一些推荐的 C++ 书籍，例如 C++ Primer、The C++ Programming Language、Thinking in C++，我坚信我的学生在阅读这些书籍时会很快失去兴趣 :) 需要 2 小时一个为期 8 周的计划，所以我没有太多时间，主要目标是让学生对编写应用程序感到兴奋，并让他们为下学期的 AP 计算机课程做好准备（因此 C++ 而不是 C# 或 Java）

我自己首先学习了使用 MFC 进行编程。我对 C++ 一无所知，但按照 Sam 的 VC++ MFC 自学，编写一个可以单击按钮并弹出“hello world”的应用程序的想法比无聊的控制台应用程序要酷得多. 如果我从带有黑屏和白色文本的控制台应用程序开始，我可能不会做今天的生活软件。

所以我打算向我的学生教授 MFC。我不会深入探讨 MFC，因为重点将放在 C++ 上并让学生对编程感到兴奋……直到我意识到 Visual Studio Express 不包含 MFC。

如果我的学生可以免费使用 C++ 编译器、IDE 和框架并能够创建 Windows 对话框应用程序，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:36:36.333

你检查过*加速 C++*吗？这是一本现代 C++ 教科书，是为初学者编写的。

[http://www.amazon.com/Accelerated-C-Practical-Programming-Example/dp/020170353X](https://rads.stackoverflow.com/amzn/click/com/020170353X)

我不确定为初学者教授 GUI 编程是否是一个好主意。就其本质而言，GUI 编程更为复杂。如果你真的想尝试一下，Codeblocks 是一个围绕 wxWidgets 构建的跨平台 IDE，它是一个不错的开源 GUI 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:29:41.030

MFC 相当陈旧，在 Windows 下使用 Visual Studio 进行窗体编程是当前使用 C++/CLI 的做法，C++/CLI 是 c++ 的扩展，必须学习，但与 c++ 的语法相似。

如果您对 Visual Studio 感兴趣，那么我会采用这种方式，除非 Express 版本不受欢迎，并且您可以使用使用 Eclipse C++ CDT 和 MinGW 的开源 IDE/编译器。还有 CodeBlocks 和其他一些开源和免费 IDE，您的学生可以在其中编写 c++ 代码。

我也插

[C++ 入门](https://rads.stackoverflow.com/amzn/click/com/0321714113)

作为一本书，我正在学习 C++。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:13:47.410

我会推荐一本像“Head First C”这样的书，Head First 系列有很多图片，读起来真的很有趣，因为它有很多幽默。尽管他们没有 C++ 书籍。值得一试，这样您就可以更好地了解如何以不同的方式解释事物。

我个人喜欢这些书，因为就像我说的那样，它有很多视觉上的东西要考虑。如果您正在考虑教授 OOP 概念，那么我认为 Head First OOAD 是必须的。

我不确定是否有免费的 C++ IDE 来创建 Windows 控制台应用程序。有免费的 IDE 来创建 C++ 应用程序，但特定于 Windows。我不认为有。我很确定如果你联系微软，他们可能会给你免费的许可证。因为您将在 k-12 学校任教。但是，Visual Studio Express 版本是免费的，因此应该足以让您入门。

如果您想要所有的花里胡哨，那么 Pro 版本是您的最佳选择，但可能需要联系 Microsoft 才能免费获得它。

最良好的祝愿。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-08T12:20:19.717

代码块和 Turbo C 是最常用的 IDE 之一。

代码块是一个开源程序，也是一个跨平台且完全免费的程序。该编译器确实具有可扩展性并且速度非常快。调试器非常容易理解，也非常适合初学者程序

# php - iPhone在网站上放大方式

> ID：15663806
> 
> 赞同：0
> 
> 时间：2013-03-27T16:15:55.427
> 
> 标签：php, iphone, html, css

已经为此工作了几个小时，但似乎无法弄清楚它是什么。该网站因某种原因被放大，我无法弄清楚。这是我的元标记：

```
 <meta name="viewport" content="width=1030, initial-scale=1.0"/> 
```

我认为这可能是一个CSS问题。网站在[这里](http://ghcnow.com/)

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:30:59.033

这很难测试，但您在该元标记中使用固定值，并且可能在 CSS 文件中：

1.  尝试用该元标记替换

    ```
     <meta name="viewport" content="initial-scale=1, maximum-scale=1"> 
    ```

2.  确保您在 CSS 中使用 % 而不是 px pt 等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:39:52.747

尝试使用此方法（最适用于所有设备）：

```
<meta name="viewport" content="width=device-width" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T17:06:20.260

由于您没有响应式设计，因此最好删除元标记。

# ant - ant build 在目标上 2 小时后失败，一旦问题得到修复，构建应该从失败的目标运行而不更改构建默认命令

> ID：15663810
> 
> 赞同：0
> 
> 时间：2013-03-27T16:15:58.570
> 
> 标签：ant

我遇到了 ant build 在目标上 2 小时后失败的情况，一旦问题得到修复，构建应该从失败的目标运行而不更改构建默认命令，这意味着要在整个构建生命周期中节省 2 小时的构建过程。我们怎样才能达到这种情况。请帮助我。

问候， Sankar B.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:32:56.233

我将您的问题解释为您想从失败的那个开始构建过程，跳过依赖目标。你不能跳过我知道的依赖目标。

你可以尝试这样的事情。对于每个目标，创建两个目标。一个实际完成工作，一个调用依赖目标。在你的情况下，你会想要运行`someTaskImpl`.

```
<target name="someTask" depends="init">
    <antcall target="someTaskImpl" />
</target>

<target name="someTaskImpl">
    <!-- do stuff -->
</target> 
```

# objective-c - 按下按钮时显示 ViewController，同时还存在 tabBar

> ID：15663815
> 
> 赞同：0
> 
> 时间：2013-03-27T16:16:08.490
> 
> 标签：objective-c, xcode, uibutton, uitoolbar

我有一个使用 UITabBar 控制器进行导航的简单应用程序。假设我在 tabBar 上有 ViewA 和 ViewB。一切正常。但是，我还想向 ViewA 添加一个 UIButton，在按下时向用户显示 ViewB。

换句话说，有两种方法可以从 ViewA 到达 ViewB。第一个来自 tabBar，第二个来自按 ViewA 中的按钮。

实现这一目标的最佳方法是什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:32:34.237

好的，那么我将在 ViewA.h 中定义一个协议

```
@protocol ViewADelegate
-(void)viewAPressButton;
@end 
```

并向 ViewA 添加一个属性：

```
@property (nonatomic, assign) id<ViewADelegate> delegate 
```

实例化此控制器时不要忘记设置此属性。

在 ViewA.m 中按下按钮时调用此方法

```
-(IBAction)buttonPressed:(id)sender {
[delegate viewAPressButton];
} 
```

然后在正确的位置实施（在您的情况下可能是 AppDelegate ？）假设 ViewB 位于索引 1

```
-(void)ViewAPressButton {
[self.tabBarController setSelectedIndex:1];
} 
```

# ios - 无法在沙盒模式下完成 iPhone 中应用内购买的购买

> ID：15663816
> 
> 赞同：3
> 
> 时间：2013-03-27T16:16:09.993
> 
> 标签：ios

我正在开发一个应用内购买应用程序，我的应用程序已经在 AppStore 中。我创建了新的应用程序，我在其中集成了应用内购买。我创建了沙盒帐户（选定国家/地区）。我启动了应用程序并移至 iTunes，单击安装。它显示了使用现有 Apple ID、创建 Apple ID、取消的弹出窗口。我正在输入 Apple ID 和密码（沙盒）。然后它显示一个带有以下消息的弹出窗口。“在沙盒模式下无法完成购买

$0.00购买“App Name”成功，但沙盒模式下无法完成交易。

[环境：沙盒]"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:30:53.367

您不能在沙盒中使用普通的 Apple ID。您必须在 iTunes Connect 中创建测试用户。可以在[iTunes Connect 开发人员指南](http://developer.apple.com/library/mac/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/7_ManagingYourTeam/ManagingYourTeam.html#//apple_ref/doc/uid/TP40011225-CH2-SW1)中找到有关创建测试帐户的信息。

# jquery - 鼠标悬停时元素多次淡入/淡出

> ID：15663818
> 
> 赞同：1
> 
> 时间：2013-03-27T16:16:11.180
> 
> 标签：jquery

我正在尝试在鼠标悬停时做一个简单的淡入淡出功能。问题是元素在预期的项目被鼠标悬停然后淡出后多次淡入和淡出。我在下面包含了我的 jquery 代码以及随附的 HTML。任何帮助将不胜感激。谢谢。

```
$(document).ready(function(){
        $('.claimfile-text').hide();
        $('.claimfile-graphic').mouseover(function(){
            $('.claimfile-text').fadeIn();
        }).mouseout(function(){
            $('.claimfile-text').fadeOut();
        });

    }); 
```

（索赔文件）

（悬停显示）

```
 <div class="claimfile-text fade-box case-text">
            <p>Claimant</p>
        </div><!-- end claimfile-text --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:20:46.297

无需查看 html 的其余部分，您将需要[stop()](http://api.jquery.com/stop/)

```
 $('.claimfile-text').stop().fadeIn(); 
```

这会：

> 描述：停止匹配元素上当前正在运行的动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:27:25.383

你为什么不使用：

```
$(".claimfile-graphic").hover(function(){
  $(".claimfile-text").fadeIn();
}, function(){
  $(".claimfile-text").fadeOut();
}); 
```

Hover 包含两个事件处理程序 - handlerIn 和 handlerOut。更多 - [http://api.jquery.com/hover/](http://api.jquery.com/hover/)

# java - 在工厂中使用反射

> ID：15663819
> 
> 赞同：2
> 
> 时间：2013-03-27T16:16:19.370
> 
> 标签：java, oop, design-patterns, reflection, coding-style

我有一个可以建造多种类型物体的工厂，它可能会增长。

使用反射返回所有不同类型而不是调用方法中的每个方法是个好主意`getPrototypes()`吗？

反射看起来像这样：

```
public final class ShapeFactory
{
    private ShapeFactory(){} // no instance

    public static Shape buildSquare()
    {
        return new Square(2);
    }

    public static Shape buildCircle()
    {
        return new Circle(2);
    }

    public static Shape buildTriangle()
    {
        return new Triangle(2, 2, 2);
    }

    // and many more shapes...

    public static List<Shape> getPrototypes()
    {
        final List<Shape> prototypes = new ArrayList<>();

        // using reflection, call every build function
        final Method[] methods = ShapeFactory.class.getMethods();
        for(final Method picked : methods)
        {
            if(picked.getReturnType() == Shape.class && picked.getParameterTypes().length == 0)
            {
                try
                {
                    prototypes.add((Shape)picked.invoke(null));
                }
                catch(final Exception e)
                {
                    // this is an example, do not ignore
                    // exceptions in real code
                }
            }
        }

        return prototypes;
    }
} 
```

很抱歉使用 Shape 示例。

编辑：形状是可克隆的原型。编辑#2：改进示例以防有人使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:22:59.667

这实际上取决于您是希望在编译时完成类型检查，还是希望以牺牲编译时检查为代价来灵活地进行运行时探索。

这两种选择都是完全有效的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:25:04.410

> 使用反射来返回所有不同的类型而不是调用 getPrototypes() 方法中的每个方法是个好主意吗？

这是一件合理的事情。`getPrototypes()`反射代码更加复杂和脆弱，但这意味着您在添加新的形状构建器方法时不需要更改。这取决于哪个对你更重要。

但是，您不应该像您正在做的那样压制异常。也许您应该对用于创建原型的方法更具选择性。（如果您添加一个返回 a`Shape`但接受参数的方法......或者不是构建器，则当前版本将失败。）

# xml - 在定义的范围内强制执行 XML 属性唯一性

> ID：15663828
> 
> 赞同：4
> 
> 时间：2013-03-27T16:16:37.853
> 
> 标签：xml, xsd

我需要强制元素属性的唯一性，但仅限于父元素的范围内。这是一个有效 XML 的示例

```
<ns:Root
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ns="urn:Test.Namespace"  
    xsi:schemaLocation="urn:Test.Namespace Test1.xsd"
    >
    <ns:element1 id="001">
        <ns:element2 id="001.1" order="1">
            <ns:element3 id="001.1.1" />
        </ns:element2>
        <ns:element2 id="001.2" order="2">
            <ns:element3 id="001.1.2" />
        </ns:element2>        
    </ns:element1>
    <ns:element1 id="002">
       <ns:element2 id="002.1" order="1">
           <ns:element3 id="002.1.1" />
        </ns:element2>
        <ns:element2 id="002.2" order="2">
            <ns:element3 id="002.1.2" />
        </ns:element2>        
    </ns:element1>    
</ns:Root> 
```

请注意，上面有两组“element1”，其中 element2 节点有一个名为“order”的属性。要求是“order”在父“element1”中必须是唯一的。例如，这个简化版本将是无效的 XML

```
<ns:Root
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ns="urn:Test.Namespace"  
    xsi:schemaLocation="urn:Test.Namespace Test1.xsd"
    >
    <ns:element1 id="001">
        <ns:element2 id="001.1" order="1">
            <ns:element3 id="001.1.1" />
        </ns:element2>
        <ns:element2 id="001.2" order="1">
            <ns:element3 id="001.1.2" />
        </ns:element2>        
    </ns:element1>    
</ns:Root> 
```

我已经编写了以下架构来为我执行此操作；

```
<?xml version="1.0"?>

<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="urn:Test.Namespace"
            xmlns:ns="urn:Test.Namespace"
            elementFormDefault="qualified">
    <xsd:element name="Root">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="element1" maxOccurs="unbounded" type="ns:element1Type"/>
            </xsd:sequence>
        </xsd:complexType>
        <xsd:unique name="uniqueElement2OrderInElement1">
            <xsd:selector xpath="./ns:element1" />
            <xsd:field xpath="ns:element2/@order" />
        </xsd:unique>        
    </xsd:element>

    <xsd:complexType name="element1Type">
        <xsd:sequence>
            <xsd:element name="element2" maxOccurs="unbounded" type="ns:element2Type"/>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:string"/>
    </xsd:complexType>

    <xsd:complexType name="element2Type">
        <xsd:sequence>
            <xsd:element name="element3" type="ns:element3Type" />
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:string" />
        <xsd:attribute name="order" type="xsd:string" />
    </xsd:complexType>

    <xsd:complexType name="element3Type">
        <xsd:attribute name="id" type="xsd:string"/>
    </xsd:complexType>        
</xsd:schema> 
```

这很接近，因为它确实强制执行唯一性，但文档范围很广。即每个订单属性必须是唯一的。我认为这是因为它被放置在 Root 的架构中，但我试图将其移动到更本地化的位置，或者使选择器更具体并且它不起作用（我得到错误）。

我正在尝试做的事情可能吗？

非常感谢期待

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T17:23:14.463

你在正确的轨道上移动它，据我所知，xsd:unique 约束的范围取决于你放置它的元素。所以，如果你希望某个元素在给定的元素 1 中是唯一的，那么把它放在element1 xsd:element 块。

我尝试了您的示例（诚然，在剥离命名空间之后），如果您移动 xsd:unique 块并如下更新 xpath，它应该可以工作。

```
<xsd:element name="Root">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="element1" maxOccurs="unbounded" type="ns:element1Type">
                <xsd:unique name="uniqueElement2OrderInElement1">
                    <xsd:selector xpath="./ns:element2" />
                    <xsd:field xpath="@order" />
                </xsd:unique> 
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>               
</xsd:element> 
```

# php - 意外的 $end 错误

> ID：15663829
> 
> 赞同：-3
> 
> 时间：2013-03-27T16:16:38.383
> 
> 标签：php

在下面的代码中不断收到 $end 错误。我已经使用键盘清除了一些错误，但现在我被卡住了。我知道这与冒号和分号有关，但我似乎不知道问题出在哪里。帮助

```
<?php

$dbName="";
$dbUsername="";
$dbPassword="";

$fromPC=$_POST['fromPC'];
$toPC=$_POST['toPC'];

//

function getDistance($lat1, $long1, $lat2, $long2, $unit)
{

  if($unit=="miles"){
      $earth = 3960; //miles
  }else{
     $earth = 6371; //kilometres
  }

    //From co-ordinates
    $lat1 = deg2rad($lat1);
    $long1= deg2rad($long1);

    //To co-ordinates
    $lat2 = deg2rad($lat2);
    $long2= deg2rad($long2);

    // The Haversine Formula
    $dlong=$long2-$long1;
    $dlat=$lat2-$lat1;

    $sinlat=sin($dlat/2);
    $sinlong=sin($dlong/2);

    $a=($sinlat*$sinlat)+cos($lat1)*cos($lat2)*($sinlong*$sinlong);

    $c=2*asin(min(1,sqrt($a)));

$d=round($earth*$c);

    return $d;
}

if( (!empty($fromPC)) && (!empty($toPC)) )
{
    mysql_connect("********",$dbUsername,$dbPassword);
    @mysql_select_db($dbName) or die( "Unable to select database");

  // basic cleaning of input
    $firstPC = strtoupper(preg_replace("/[^a-zA-Z0-9]/","", ));
    $secondPC = strtoupper(preg_replace("/[^a-zA-Z0-9]/","", ));

    // get first details
    $query = 'SELECT `latitude`, `longitude` FROM `uk_postcodes` WHERE `postcode`="'.$firstPC.'";';
    $result = mysql_query($query);
    $first = mysql_fetch_row($result);
    $checkFirst=mysql_num_rows($result);

  // get second details
    $query = 'SELECT `latitude`, `longitude` FROM `uk_postcodes` WHERE 

`postcode`="'.$secondPC.'";';
    $result = mysql_query($query);
    $second = mysql_fetch_row($result);
  $checkSecond=mysql_num_rows($result);

  // ensure there were results to calculate with
  if( ($checkFirst<1) || ($checkSecond<1) ){
      $outputResults="Unrecognised postcode entered.";
  }else{
        $distance = getDistance($first[0], $first[1], $second[0], $second[1], "miles");
        $outputResults = "The distance between postcode: $firstPC and postcode: $secondPC is ".$distance." miles.";
  }

  // always close your connections !!
    mysql_close();
}

?>

<?=$outputResults?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:41:13.540

解析错误，这个

```
$firstPC = strtoupper(preg_replace("/[^a-zA-Z0-9]/","", ));
    $secondPC = strtoupper(preg_replace("/[^a-zA-Z0-9]/","", )); 
```

应该

```
$firstPC = strtoupper(preg_replace("/[^a-zA-Z0-9]/","","Any String"));
    $secondPC = strtoupper(preg_replace("/[^a-zA-Z0-9]/","","Any String" )); 
```

# c# - 如何阻止文本框中的第一个字符成为空格？

> ID：15663835
> 
> 赞同：0
> 
> 时间：2013-03-27T16:16:50.247
> 
> 标签：c#, winforms

我有一个文本框，希望用户不能在第一个文本框中输入空格。用户可以在除开始文本框之外的任何文本框中输入空格。我的电脑 = 允许我的电脑 = 不允许（开头的空格），空格可能是一两个或更多的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:38:18.180

如果您真的坚持使用其中一个事件来执行此操作，我建议您在`Text_Changed`事件中执行此操作，我为您设置了一种简单的方法来执行此操作..

```
private void txtaddgroup_TextChanged(object sender, EventArgs e)
{
    var textBox = (TextBox)sender;
    if (textBox.Text.StartsWith(" "))
    {
        MessageBox.Show("Can not have spaces in the First Position");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:31:34.170

实现一个按键事件，您可以在其中摆脱任何空格，请[在此处](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/b38b9d6a-2a49-45ae-aa7f-65ae1a18e598/)阅读更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T21:52:06.773

将这段代码添加到您的 KeyDown 事件处理程序中以停止注册空格键：

```
//Check to see if the first character is a space
        if (UsernameTextBox.SelectionStart == 0) //This is the first character
        {
            //Now check to see if the key pressed is a space
            if (e.KeyValue == 32)
            {
                //Stop the key registering
                e.Handled = true;
                e.SuppressKeyPress = true;
            }
        } 
```

32 如果是空格字符的键码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-11T10:12:55.927

`KeyPress`您应该在事件中使用参数为“e”调用此函数：

这里 32 是空格的 ASCII 值

```
void SpaceValidation(KeyPressEventArgs e)
{
    if (e.KeyChar == 32 && ActiveControl.Text.Length == 0)
        e.Handled = true;       
}

private void textbox1_KeyPress(object sender, KeyPressEventArgs e)
{
    SpaceValidation(e);
} 
```

# utf-8 - UTF-8 不支持哪些语言？

> ID：15663837
> 
> 赞同：18
> 
> 时间：2013-03-27T16:16:54.840
> 
> 标签：utf-8, internationalization, c++builder, utf-16, utf

我正在努力使我的一个工作程序国际化。我正在尝试使用远见来避免可能出现的问题或重做该过程。

我看到了 UTF-8、UTF-16 和 UTF-32 的参考资料。我的问题是两个部分：

1.  UTF-8**不**支持哪些语言？
2.  UTF-16 和 UTF-32 相比 UTF-8 有哪些优势？

如果 UTF-8 适用于一切，那么我很好奇 UTF-16 和 UTF-32 的优势是什么（例如，数据库中的特殊搜索功能等）理解应该有助于我完成程序设计（和数据库连接） ） 适当地。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-27T16:21:05.343

这三种只是表示同一事物的不同方式，因此没有一种语言支持而另一种语言不支持。

有时 UTF-16 会被您需要与之互操作的系统使用 - 例如，Windows API 本机使用 UTF-16。

理论上，UTF-32 可以在单个 32 位整数中表示任何“字符”，而无需使用多个整数，而 UTF-8 和 UTF-16 需要使用多个 8 位或 16 位整数要做到这一点。但在实践中，对于某些代码点的组合和非组合变体，这并不是真的。

UTF-8 优于其他的一个优点是，如果您有一个错误，即假设 8 位、16 位或 32 位整数的数量分别与代码点的数量相同，那么它会更快地变得明显使用 UTF-8 - 只要你有任何非 ASCII 代码点，就会失败，而使用 UTF-16，错误可能会被忽视。

要回答您的第一个问题，以下是 Unicode 目前不支持的脚本列表：[http ://www.unicode.org/standard/unsupported.html](http://www.unicode.org/standard/unsupported.html)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-27T16:21:53.660

UTF8 是可变的 1 到 4 个字节，UTF16 是 2 或 4 个字节，UTF32 是固定的 4 个字节。

这就是为什么 UTF-8 在 ASCII 是最普遍的字符的情况下具有优势的原因，UTF-16 在 ASCII 不占优势的情况下更好，UTF-32 将覆盖 4 个字节中的所有可能的字符。

# javascript - 在页面加载默认单选按钮

> ID：15663838
> 
> 赞同：-2
> 
> 时间：2013-03-27T16:17:06.297
> 
> 标签：javascript, html, checkbox

我在页面上有以下复选框代码。我需要在页面加载时默认检查它们。这将显示查询的结果。现在，当取消选中其中一个复选框时，需要提交表单并需要显示不同的查询结果。即使我取消选中一个框，复选框也总是被选中。有人可以在这里指导我吗？谢谢

```
 <form action="abc.cfm?show=yes" method="post" name="myform">
      <table align="center"><tr>
      <td>
     <input type="checkbox" checked="checked" name="chkbox" id="chkbox1"> <font size="3+"><strong> Agreement      Only</strong> </font>
       &nbsp;&nbsp;<input type="hidden" name="chk" id="chk1">
        <input type="checkbox" checked="checked" name="chkbox" id="chkbox2"> <font size="3+"><strong>Active          Employees</strong> </font>
     &nbsp;&nbsp;<input type="hidden" name="chk" id="chk2">
    </td>
    <td>
      <input type="Submit" name="submitnow" value="View now">
     </td>
        </table>
      </form>

             <cfif isdefined("form.chk1")>
                  query 1
              <cfelseif isdefined("form.chk2")>
                  query 2
             </cfif> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:58:04.827

```
var states = [false, false, true];

function saveStates()
{
    var context = $("#chk1,#chk2,#chk3");
    $(context).each(function (index) {
        states[index] = $(context[index]).prop("checked");
    });
} 
```

我没有对此进行测试，也许某处存在语法错误，但您明白了。您需要使用 jQuery 来应用我的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:35:02.400

您可以使用 a`<input type="hidden" value=" (the value of your checkbox here) "/>`来存储然后发送检查的值。

'保存选定的单选按钮状态'到底是什么意思？

在您的表单发布到的页面中，您将通过检查您的发布变量来知道选中了哪个复选框。如果您的想法是再次显示带有上述代码的页面，并选中用户选择的复选框，您可以查看以下内容（jQuery 1.6+）：

```
$("#chkboxId").prop('checked', true); //check the checkbox with id chkboxId.
$("#chkboxId").prop('checked', false); //uncheck it. 
```

# macos - 使用 Core Data 作为缓存

> ID：15663839
> 
> 赞同：1
> 
> 时间：2013-03-27T16:17:06.610
> 
> 标签：macos, core-data, appkit

我正在使用 Core Data 的存储功能。在某些时候，我进行了需要我更新本地对象图的外部 API 调用。我目前的（愚蠢的）计划是清除旧 NSManagedObjects 的所有实例（无论它们是否已更新）并用它们的新等价物替换它们——一种王牌合并策略。

我觉得有更好的方法来做到这一点。我有来自服务器的唯一标识符，所以我应该能够将它们与商店中的对象相匹配。有没有办法做到这一点，而无需通过标识符从上下文中手动获取对象并重置每个属性？有没有办法让我创建一个全新的上下文，重新生成对象图，然后将其提供给 Core Data 以根据它们的唯一标识符进行合并？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:00:11.870

基于服务器唯一 ID 的匹配策略是一个好方法。希望您可以让您的服务器仅交付自上次更新以来已更改的对象（您将跟踪并在服务器调用中提供）。

但是，为了更新 Core Data 对象，您必须获取它们、实例化 NSManagedObjects、进行更改并保存它们。您可以在后台线程（子上下文`performBlock:`）中完成所有这些操作，但您仍然需要将对象往返传输到内存中并返回存储。在子上下文和它自己的线程中执行此操作将使您的 UI 保持敏捷，但您仍然必须进行处理。

另一个想法：在最后一天左右，我一直在阅读关于`AFIncrementalStore`的`NSIncrementalStore`实现，它用于`AFNetworking`按需提供 Core Data 属性，在本地缓存。我还没有用它构建任何东西，但它看起来很漂亮。听起来您的项目可能很好地利用了这个库。代码在 GitHub 上：[https](https://github.com/AFNetworking/AFIncrementalStore) ://github.com/AFNetworking/AFIncrementalStore 。

# phpmyadmin - 在 MAMP phpMyAdmin 中将 DB 表导出到 Excel 会导致错误 6

> ID：15663842
> 
> 赞同：1
> 
> 时间：2013-03-27T16:17:09.527
> 
> 标签：phpmyadmin

尝试在本地主机上的 MAMP 中使用 phpMyAdmin 将数据库表导出到 Excel 时，出现以下错误：

未找到此网页 未找到该网址的网页：../localhost/phpMyAdmin/export.php 错误 6 (net::ERR_FILE_NOT_FOUND)：找不到文件或目录。

CSV 导出工作正常，但我想导出为 Excel？

任何帮助将不胜感激。

问候，

约翰

# zip - 带密码的 Zip 文件，以不同的扩展名发送

> ID：15663852
> 
> 赞同：1
> 
> 时间：2013-03-27T16:17:29.410
> 
> 标签：zip, password-protection, unzip

我通过电子邮件收到了一个受密码保护的 zip 文件。但是，我的电子邮件系统阻止了 zip 文件类型，因此发件人将扩展名更改为其他内容。我保存了文件并将其重命名为 .zip。但是，它不要求输入密码来解压缩它，并且解压缩失败。

有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:19:38.753

确保上面没有双文件扩展名（即“file.jpg.zip”）。

# ios - Corona 'ApplicationResume' 事件在 iOS 上不起作用

> ID：15663854
> 
> 赞同：0
> 
> 时间：2013-03-27T16:17:34.593
> 
> 标签：ios, xcode, cocoa-touch, coronasdk

'applicationStart' 工作，但 'applicationResume' 不起作用，我已经设置了“UIApplicationExitsOnSuspend = false”。同样奇怪的是，它实际上可以在 Corona Simulator 上运行，但不能在真实设备（iPhone5/iOS6）上运行。

这是代码：

```
local onSystem = function( event )
if event.type == "applicationStart" then
    system.cancelNotification()
     native.setProperty( "applicationIconBadgeNumber",0)
elseif event.type == "applicationExit" then
    print("exit")
elseif event.type == "applicationSuspend" then
    print("suspend")
elseif event.type == "applicationResume" then
    native.showAlert( "Hihi", "", { "OK" } )
end
end

-- setup a system event listener
Runtime:addEventListener( "system", onSystem ) 
```

有任何想法吗？？

我发现了另一个事件处理程序代码：

```
local function onSystemEvent( event ) 
if event.type == "applicationStart" then
    --fb.logout();        
     return true
end
if event.type == "applicationExit" then
    --fb.logout();
    return true
end
end 
```

# php - Symfony 1.4 + Pager：忽略顺序数组

> ID：15663856
> 
> 赞同：0
> 
> 时间：2013-03-27T16:17:38.003
> 
> 标签：php, symfony-1.4, pager

我有一个 symfony 问题：功能上运行良好，但这不能按我想要的方式运行。

```
$res = array("4","2","1","3"); // LIST ID (a.id)
$paginas = new sfDoctrinePager('TbArticle', 2);
$paginas->setQuery(Doctrine::getTable('TbArticle')->createQuery('a')->where('a.ifactive = 1')->andWhere('a.dirimage=1')->andWhere('a.stock<>0')->whereIn("a.id", $res));
$paginas->setPage($page);
$paginas->init(); 
```

它工作正常，但是当我调用时`getResults()`，数组顺序不正确。例如，这种排序返回：`1,2,3,4`. 我喜欢得到`4, 2, 1, 3`：（`$res`）

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:15:05.730

不幸的是，这不能通过查询来完成。

`ORDER BY`可以使用子句按升序或降序顺序返回 MySQL 查询。数组中的元素不使用。当您将数组作为`WHERE IN`子句的参数传递时，MySQL 并不关心元素的顺序，如您所见。

幸运的是有一个解决方案:)

首先，您必须使用 Doctrine 的能力来创建一个结果表，并用您想要的内容进行索引。用这个：

```
Doctrine::getTable('TbArticle')->createQuery('a INDEX BY id')->...; 
```

这将返回一个结果数组，其中数组键是行的 id。然后您可以重新排列结果数组以匹配您的`$res`（假设`$rows`有 Doctrine 返回的行）：

```
foreach ($res as $i) {
    $new_array[] = $rows[$i];
} 
```

棘手的部分是让它与分页器一起工作。但我相信你也可以这样做（尝试从分页器中检索结果并在显示之前重新排列它们）。

# php - 如何做一个简单的 PHP Multisort

> ID：15663858
> 
> 赞同：0
> 
> 时间：2013-03-27T16:17:40.157
> 
> 标签：php

从查询的数据库中，我们得到了这个

```
foreach ($child_posts as $child_post) {
 $child_id = $child_post->ID;
 $dayOfWeek = get_post_meta($child_id,'wpcf-day-of-week', true);
 $time = get_post_meta($child_id,'wpcf-time', true);

$class[] = array('day' => $dayOfWeek, 'time' => $time, 'value' => $child_id);
}

{"classes":[
{"day":"7","time":"1500","value":13574},
{"day":"7","time":"1800","value":13573},
{"day":"4","time":"1900","value":11346},
{"day":"6","time":"1100","value":11494},
{"day":"5","time":"1800","value":11362},
{"day":"7","time":"1700","value":13572},
{"day":"6","time":"1600","value":11498},
{"day":"6","time":"1500","value":11496}]} 
```

日 = 周一 - 周日

时间=军用时间

价值 = 我需要但不需要排序的东西

我需要先按天排序，然后按时间排序。并以原来的格式取回数据库

```
{"classes":[
{"day":"4","time":"1900","value":11346},
{"day":"5","time":"1800","value":11362},
{"day":"6","time":"1100","value":11494},
{"day":"6","time":"1500","value":11496},
{"day":"6","time":"1600","value":11498},
{"day":"7","time":"1500","value":13574},
{"day":"7","time":"1700","value":13572},
{"day":"7","time":"1800","value":13573}]} 
```

我尝试使用 php 手册中的方法，但我仍然无法真正得到它。

这就是我所做的

```
foreach ($class as $key => $row) {
    $day[$key]  = $row['day'];
    $time[$key] = $row['time'];
    $value[$key] = $row['value'];

}

$class[] = array_multisort($day, SORT_DESC, $time, SORT_ASC, $class); 
```

我知道我应该期待什么，但我不知道如何去获得它。希望有人可以在这里提供帮助:)

我的原始脚本：

```
 $childargs = array(
 'post_type' => 'class',
 'numberposts' => -1,
 'meta_query' => array(array('key' => '_wpcf_belongs_instructor_id', 'value' => $instructor_post_id))
 );
 $child_posts = get_posts($childargs);

 //$child_posts = types_child_posts(‘class’);
 foreach ($child_posts as $child_post) {
  $child_id = $child_post->ID;
  $dayOfWeek = get_post_meta($child_id,'wpcf-day-of-week', true);
  $time = get_post_meta($child_id,'wpcf-time', true);

 $class[] = array('day' => $dayOfWeek, 'time' => $time, 'value' => $child_id);
 }

 echo json_encode(
   array("classes" => $class)
 )
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:22:55.297

```
<?php

$json = '{"classes":[
          {"day":"7","time":"1500","value":13574},
          {"day":"7","time":"1800","value":13573},
          {"day":"4","time":"1900","value":11346},
          {"day":"6","time":"1100","value":11494},
          {"day":"5","time":"1800","value":11362},
         {"day":"7","time":"1700","value":13572},
         {"day":"6","time":"1600","value":11498},
       {"day":"6","time":"1500","value":11496}]}';

$array = json_decode($json,true);

$temp = $array['classes'];

foreach($temp as $key=>$value)
{
  $day[] = $value['day'];
  $time[] = $value['time'];
  }

array_multisort($day,SORT_ASC,$time,SORT_ASC,$temp);

$array['classes'] = $temp;

echo json_encode($array);
?> 
```

尝试将您的代码更改为。我假设 $classes 包含 json_decoded 内容。

```
$temp = $classes['classes'];

foreach ($temp as $key => $row) {
$day[]  = $row['day'];
$time[] = $row['time'];
$value[] = $row['value'];
}

 array_multisort($day, SORT_DESC, $time, SORT_ASC, $temp);
 $classes['classes'] = $temp;

 echo json_encode($classes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T15:53:39.410

按一列对从 MYSql 返回的行数组进行排序。这里的问题是按会话 (1,2) 和周期 (1,2,3) 对课程进行排序 如果会话 = 3 这意味着如果会话 == 3 准备表格以进行排序和打印，则插入第 1 行, 和第 2 行。然后进行排序。表格内容在 $coursesr 中。

```
$ar = array();
if ($order == "session"){
    for ($i = 0; $i < count($coursesr); $i++){          
        $ar[0][] = (($coursesr[$i]['session'])*10)+$coursesr[$i]['period'];
        $ar[1][] = $i;
    }
    $b = array_multisort($ar[0],SORT_ASC,SORT_NUMERIC,$ar[1],SORT_ASC,SORT_NUMERIC);        
}else{
    for ($i = 0; $i < count($coursesr); $i++){          
        $ar[0][] = ucwords($coursesr[$i]['lastname']);
        $ar[1][] = $i;
    }
    array_multisort($ar[0],SORT_ASC,SORT_NATURAL,$ar[1],SORT_ASC,SORT_NUMERIC);
} 
```

然后要将其从 $coursesr 数组中取出，您必须计算索引...

```
for ($i = 0; $i < $num; $i++){
    $r = $coursesr[$ar[1][$i]]; // simplify reference   
    echo "<tr>";..... 
```

# three.js - ThreeJS 预定义着色器属性/制服

> ID：15663859
> 
> 赞同：26
> 
> 时间：2013-03-27T16:17:43.423
> 
> 标签：three.js, glsl, shader

在做了一些“常规”WebGL 之后，我开始使用 ThreeJS 的 WebGL 渲染器，没有额外的库 + GLSL 着色器。我现在正在尝试在我的 ThreeJS 程序中编写自定义着色器，我注意到 ThreeJS 处理了很多标准的东西，例如投影和模型/视图矩阵。我的简单顶点着色器现在看起来像这样：

```
// All of these seem to be predefined:
// vec3 position;
// mat4 projectionMatrix;
// mat4 modelViewMatrix;
// mat3 normalMatrix;
// vec3 normal;

// I added this
varying vec3 vNormal;

void main() {
    vNormal = normalMatrix * vec3(normal);
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
} 
```

我的问题是：哪些其他变量（我假设它们是统一的）是为我可以使用的顶点和片段着色器预定义的？例如，ThreeJS 是否可以帮助处理光矢量/光色（当然假设我已经在我的 ThreeJS 场景中添加了一个或多个灯光）？

**更新**（2014 年 10 月 9 日）：这个问题已经获得了相当多的浏览量，用户 Killah 提到现有的答案不再导致当前版本的 three.js 的解决方案。我添加并接受了我自己的答案，见下文。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-27T17:03:12.570

对于制服，简短的回答如下：

在顶点着色器中

```
"uniform mat4 modelMatrix;",
"uniform mat4 modelViewMatrix;",
"uniform mat4 projectionMatrix;",
"uniform mat4 viewMatrix;",
"uniform mat3 normalMatrix;",
"uniform vec3 cameraPosition;", 
```

在片段着色器中

```
"uniform mat4 viewMatrix;",
"uniform vec3 cameraPosition;", 
```

对于涉及制服和属性的完整答案，您的自定义着色器具有字符串变量`prefixVertex`并`prefixFragment`预先附加。

```
var vertexGlsl = prefixVertex + vertexShader;
var fragmentGlsl = prefixFragment + fragmentShader;

var glVertexShader = THREE.WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );
var glFragmentShader = THREE.WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl ); 
```

和`prefixVertex`变量`prefixFragment`定义可以`WebGLProgram.js`在`three.js`.

编辑：更新到 three.js r.73

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-27T17:00:40.650

您可以在着色器中使用的制服都取决于您如何设置材质：您是否启用了灯光？顶点颜色？剥皮？...

三个 JS 创建了一个程序，该程序严重依赖于一些定义（代码中的#ifdef），这些定义在程序顶部注入，具体取决于我上面谈到的参数。

我发现了解发生了什么的最好方法是打印三个 JS 生成的着色器：因为您已经了解 GLSL，您将很容易理解代码的含义以及可以使用的制服。在三个 JS 源中查找`buildProgram`，然后 (r57)：

```
var glFragmentShader = getShader( "fragment", prefix_fragment + fragmentShader );
var glVertexShader = getShader( "vertex", prefix_vertex + vertexShader ); 
```

在这些行之后，添加：

```
console.log("fragment shader:", prefix_fragment + fragmentShader);
console.log("vertex shader:", prefix_vertex + vertexShader); 
```

您将能够看到着色器的内容。

[编辑] 重读你的问题，我意识到我的回答有点不对劲，因为你创建了自己的着色器......

您可以查看 WebGLRenderer 的第 6463 和 6490 行（[https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L6463](https://github.com/mrdoob/three.js/blob/master/src/renderers/WebGLRenderer.js#L6463)）：您将看到标准制服/属性三个 JS 注入到你的着色器中。您可以查看 Wiki，您可以在其中找到相关条目（[https://github.com/mrdoob/three.js/wiki](https://github.com/mrdoob/three.js/wiki) - 自定义着色器中提供哪些默认属性/制服/变量？）但它会指导您到我上面概述的线条。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-09T16:18:48.347

这个问题已经获得了相当多的关注，用户 Killah 提到现有的答案在当前版本的 three.js 中不再导致解决方案。这就是我再次尝试解决问题的原因，我想概述一下我发现的几个选项：

*   最快和最简单的方法（虽然不是很优雅）是在着色器中放置一个随机错误。整个着色器代码都会出现控制台错误，包括 three.js 添加的所有内容。

*   更好的解决方案是从编译位置输出着色器源，即 THREE.WebGLShader（从当前的 three.js 版本开始，r68）。我已经完成了快速复制和粘贴，它应该在编译之前输出所有着色器源。

    在包含三个.js 之后和您自己的代码之前添加这个：

    ```
    THREE.WebGLShader = ( function () {
        var addLineNumbers = function ( string ) {
            var lines = string.split( '\n' );
            for ( var i = 0; i < lines.length; i ++ ) {
                lines[ i ] = ( i + 1 ) + ': ' + lines[ i ];
            }
            return lines.join( '\n' );
        };
        return function ( gl, type, string ) {
            var shader = gl.createShader( type ); 
            console.log(string);
            gl.shaderSource( shader, string );
            gl.compileShader( shader );
            if ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {
                console.error( 'THREE.WebGLShader: Shader couldn\'t compile.' );
            }
            if ( gl.getShaderInfoLog( shader ) !== '' ) {
                console.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', gl.getShaderInfoLog( shader ) );
                console.warn( addLineNumbers( string ) );
            }
            return shader;
        };
    } )(); 
    ```

    请注意，此代码段只是从 three.js 源中复制（并且略有更改），应在实际使用代码之前将其删除。只是为了调试！

*   还有另一种侵入性较小的选项：您可以在创建和渲染至少一次后检查您的 ShaderMaterial，如下所示：

    ```
    var material = new THREE.ShaderMaterial({
        uniforms: {
            uColorMap: { type: 't', value: THREE.ImageUtils.loadTexture('./img/_colors.png') },
            uSpecularMap: { type: 't', value: THREE.ImageUtils.loadTexture('./img/_spec.png') }, 
            uNormalMap: { type: 't', value: THREE.ImageUtils.loadTexture('./img/_normal.png') }
        },
        vertexShader: document.getElementById('vShader').innerText,
        fragmentShader: document.getElementById('fShader').innerText
    }); 
    ```

    然后，*在*渲染对象至少一次之后：

    ```
    console.log(material.program.attributes);
    console.log(material.program.uniforms); 
    ```

希望这对大家有帮助！如果您知道更多和/或更好的方法来获取您的着色器代码，请随时添加您的评论。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-12T15:22:36.127

现在可以在 three.js 文档中找到这个问题的答案：[https ://threejs.org/docs/#api/renderers/webgl/WebGLProgram](https://threejs.org/docs/#api/renderers/webgl/WebGLProgram)

# angularjs - 使用 require.js 时，角度找不到控制器

> ID：15663865
> 
> 赞同：2
> 
> 时间：2013-03-27T16:17:57.690
> 
> 标签：angularjs, requirejs

所以在这个例子中：

```
<div ng-controller="myController">
    {{name}}
</div>

function myController($scope){
   $scope.name = "Jack Robinson";
} 
```

有用。但是如何将它与 require.js 一起使用？下一个片段不起作用

```
define(function(){
   return function myController($scope){
      $scope.name = "Jack Robinson";
    }
}) 
```

它说：'myController' 不是函数，未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:21:16.330

尝试使用带有 RequireJs 和 AngularJs 的模板/启动项目

[https://github.com/jhiemer/angularjs-requirejs-testacular](https://github.com/jhiemer/angularjs-requirejs-testacular)

# dart - JS-Interop：尝试使用 salesforce 代理

> ID：15663869
> 
> 赞同：2
> 
> 时间：2013-03-27T16:18:15.517
> 
> 标签：dart

我正在尝试使用 Salesforce 的 sforce 库向 salesforce 发出 Ajax 调用。这是正在运行的示例 javascript：

```
function setupPage() {

    var state = { //state that you need when the callback is called
        output : document.getElementById("output"),
        startTime : new Date().getTime()};

    var callback = {
        //call layoutResult if the request is successful
        onSuccess: layoutResults,
        //call queryFailed if the api request fails
        onFailure: queryFailed,
        source: state};

    sforce.connection.query(
            "Select Id, Name, Industry From Account order by Industry",
            callback);
}
function queryFailed(error, source) {
    // not shown function code
}

function layoutResults(queryResult, source) {
   // not shown function code
} 
```

这是我的飞镖实现：

```
import 'dart:html';
import 'package:js/js.dart' as js;
import 'dart:json';

void main() {

  js.scoped(() {

    var sforce = js.context.sforce;

    var callbackSuccess = new js.Callback.once(success);
    var callbackFailed = new js.Callback.once(failure);

    var sfdc = new js.Proxy(sforce.connection.query("Select Id, Name, Industry From Account order by Industry"),
        js.map({"onSuccess" : callbackSuccess, "onFailure" : callbackFailed}));    

  });
}

void success(queryResult) {
  print("queryResult is: " + queryResult);
}

void failure(error) {
  print("error is: " + error);
} 
```

正在放置 Ajax 调用，因为我看到正在发出 POST 请求并返回数据。但是，我似乎总是收到此错误（并且我尝试了无数不同的组合）：

```
Uncaught TypeError: object is not a function (program):370
construct (program):370
ReceivePortSync.dispatchCall darttest:178
$$._JsSendPortSync.callSync$1 minidartjs:4929
$.Proxy_Proxy$withArgList minidartjs:8194
$.Proxy_Proxy minidartjs:8183
$$.main_anon.call$0 minidartjs:6057
$.scoped minidartjs:8136
$.main minidartjs:8066
$$._IsolateContext.eval$1 minidartjs:276
$.startRootIsolate minidartjs:6533
(anonymous function) 
```

任何帮助将不胜感激，因为我现在不知道该转向哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T19:06:28.003

`js.Proxy`您收到此错误是因为您尝试`sfdc`使用`sforce.connection.query(...)`. 使用的时候`new js.Proxy(f)`，`f`一定是`js.Proxy`一个js的`function`。在这里你得到一个`object`，这就是你得到错误的原因。

这是应该工作的代码。

```
import 'dart:html';
import 'package:js/js.dart' as js;
import 'dart:json';

void main() {

  js.scoped(() {

    var sforce = js.context.sforce;

    var callbackSuccess = new js.Callback.once(success);
    var callbackFailed = new js.Callback.once(failure);

    sforce.connection.query("Select Id, Name, Industry From Account order by Industry",
        js.map({"onSuccess" : callbackSuccess, "onFailure" : callbackFailed}));

  });
}

void success(queryResult, source) {
  print("queryResult is: " + queryResult);
}

void failure(error, source) {
  print("error is: " + error);
} 
```

# php - PHP 5.3 推荐使用哪种 bcrypt 实现？

> ID：15663874
> 
> 赞同：8
> 
> 时间：2013-03-27T16:18:32.817
> 
> 标签：php, hash, passwords, bcrypt, password-encryption

好的，我终于了解了 bcrypt，它是如何工作的，以及如何将它存储在数据库中，所以我几乎可以开始了。现在的问题是选择与 PHP 一起使用的 bcrypt 实现`5.3`。

看着所有不同的解决方案，我快疯了，我不确定哪一个是最推荐和最安全的，所以我再次求助于你们。

以下是我找到的：

1) [https://gist.github.com/marcoarment/1053158](https://gist.github.com/marcoarment/1053158)

2) [http://www.openwall.com/phpass/](http://www.openwall.com/phpass/)

3) [https://stackoverflow.com/a/6337021/869849](https://stackoverflow.com/a/6337021/869849)

4) ...其他的？

这些是可互换的，还是产生不同的哈希？我想认为，由于它们都是“bcrypt”，它们会产生相同的结果，但我不确定（我在上面测试过`1)`，`2)`它们似乎是可以互换的，因为`1)`check out on产生的哈希值`2)`）。

**那么哪个是 PHP 的推荐解决方案`5.3`？**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-27T16:52:39.130

最佳解决方案：您应该使用 PHP 5.5 内置的密码库。他们为 PHP 5.3 和 5.4 发布了一个向后兼容的版本，称为[password_compat](https://github.com/ircmaxell/password_compat)。但是请注意，您需要 5.3.7 或更高版本。5.3.7 之前的 bcrypt 存在安全问题，这意味着新库将无法工作。

如果您使用的是 5.3.7 之前的版本，那么下一个最佳选择是同一作者的[Password Lib 。](https://github.com/ircmaxell/PHP-PasswordLib)但我建议升级 PHP 会是更好的选择。

**安装**

只需下载它们，将它们复制到您的站点文件夹，然后将它们的主文件包含在您的代码中即可安装这两个库 - 即`require('password.php');`.

如果您使用 Composer，也可以选择通过 Composer 安装。

**用法**（假设您使用 password_compat）：

创建密码：

```
$hash = password_hash($password, PASSWORD_BCRYPT); 
```

要验证密码：

```
if (password_verify($password, $hash)) {
    /* Valid */
} else {
    /* Invalid */
} 
```

这基本上就是您需要知道的全部内容。该库为您处理所有其他细节，例如加盐密码等。

[编辑]如果您需要根据您的评论更改算法“成本”，则在`password_hash()`调用中添加一个附加参数以指定它，如下所示：

```
password_hash($password, PASSWORD_BCRYPT, array("cost" => 11)); 
```

我在上面链接的下载页面上提供了完整的文档。

使用 password_compat 库的真正好处是，它经过专门设计，具有与 PHP 5.5 标准一样内置于 PHP 中的相同 API 和功能。因此，如果您在使用 PHP 5.3 或 5.4 时使用 password_compat，那么当您迁移到 PHP 5.5 时，您的系统中已经有了正确的代码来使用新的内置密码功能。唯一的区别是您不需要`include`图书馆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-27T10:04:48.983

如果您尝试更新到 PHP 5.5，请在迁移前查看此内容 本手册有非常有趣的要点，应在升级前阅读

从 5.3 到 5.4 的更改以及发行说明的向后不兼容页面

[http://php.net/manual/en/migration54.incompatible.php](http://php.net/manual/en/migration54.incompatible.php)

# batch-file - 匹配 MS dos 上的第一个字符

> ID：15663879
> 
> 赞同：1
> 
> 时间：2013-03-27T16:18:45.640
> 
> 标签：batch-file, match

我这里有问题

我想在文件中写入并匹配一个字符，然后执行一些命令，但我错了，..！你可以试试这些命令..

```
c:>\echo 1 >file.txt
c:>\set /p var=<file.txt
c:>\if %var% EQU "1" (echo 21 ) ELSE (echo 10) 
```

你会得到值是`10`，我尝试另一种方式将变量写入文件。

```
c:>\set /p=1 <nul>file.txt
c:>\set /p var=<file.txt
c:>\if %var% EQU "1" (echo 21 ) ELSE (echo 10) 
```

如果要查看`file.txt`and上的数据`var`：

```
c:>\type file.txt
1
c:>\echo %var%
1
c:>\if %var% EQU "1" (echo 21 ) ELSE (echo 10)
10 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:41:52.690

正如斯蒂芬所建议的那样，您正在`1*space*`向`file.txt`. 尝试将重定向放在行首，如下所示：

```
>file.txt echo 1 
```

您还可以将 echo 命令括在括号中，如下所示：

```
(echo 1)>file.txt 
```

我认为`>file.txt echo 1`比 更具可读性`(echo 1)>file.txt`，但您的里程可能会有所不同。

不幸的是，您不能通过简单地删除 之后的空格来解决问题`1`，因为 cmd 会将其解释为`echo stdout>file.txt`，并且`file.txt`会有内容`ECHO is on.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T18:35:05.600

使用该`set /a`命令，您可以从数值变量中删除不需要的不可见空格。试试这个：

```
C:\>echo 1 >file.txt

C:\>set /p var=<file.txt

C:\>set /a var=%var%
1
C:\>if "%var%" EQU "1" (echo 21 ) ELSE (echo 10)
21 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:59:55.227

当心行尾的空格，**BUT** `ECHO 1>file.txt`会将 STDOUT 的输出定向到文件，因为您在重定向器之前有一个数字。

```
ECHO 1 >file.txt
FOR /f "delims=" %%i IN (file.txt) DO ECHO +%%i+
(ECHO 2) >file.txt
FOR /f "delims=" %%i IN (file.txt) DO ECHO +%%i+
>file.txt ECHO 3
FOR /f "delims=" %%i IN (file.txt) DO ECHO +%%i+
>file.txt (ECHO 4)
FOR /f "delims=" %%i IN (file.txt) DO ECHO +%%i+ 
```

下一点是那`1`是的内容，`var`这**不**等于`"1"`

环境变量始终是字符串。

将此更正为`if "%var%" equ "1" (echo 21 ) ELSE (echo 10)`

# google-analytics - 如何在同一域上单独跟踪 iframe 的最佳方法

> ID：15663881
> 
> 赞同：0
> 
> 时间：2013-03-27T16:18:51.667
> 
> 标签：google-analytics, analytics

在我的网站上，我为用户提供了功能，他们可以使用 iframe 在他们的页面上嵌入视频。现在我正在以相同的方式跟踪经典页面视图和 iframe 视图。所以我的分析统计数据不正确。我想分开这个跟踪以了解我在页面上有多少访问者以及在 iframe 上有多少访问者。我正在使用谷歌分析。

我很期待你有什么建议。

顺便说一句：我正在使用嵌入视频的特殊 url，但仍在同一个域中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T17:21:04.360

由于您有嵌入视频的特殊 URL，因此您可以使用过滤器为 Google Analytics（分析）配置文件包含或排除该 URL，并在每个页面上保留相同的分析代码。

我建议：

1.  保持一个配置文件未经过滤，显示所有流量
2.  一个过滤掉 iframe URL 的配置文件
3.  一个仅显示 iframe URL 的配置文件

[有关Google Analytics（分析）帐户和个人资料](https://developers.google.com/analytics/resources/concepts/gaConceptsAccounts?hl=en#profiles)的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:29:01.540

你能在你的 URL 中添加一个简单的 GET 参数吗？例如：`http://www.website.com/video.flv?type=embedded` 或

```
http://www.website.com/video.flv?type=extern 
```

不幸的是，我并不确切知道 Google Analytics 如何使用各种 GET 参数处理相同的 URL。

其他方法是使用简单的重定向脚本或 htaccess 规则。

# c++ - C++中小数据集的高效中值计算

> ID：15663884
> 
> 赞同：1
> 
> 时间：2013-03-27T16:18:59.117
> 
> 标签：c++, median

我有很多（数十万，m）组双打 d，~5-10（n，**常数小**）长。这些双打基本上是随机分布的。我需要得到每组的中位数：因为 m 非常大，我们需要很快地计算出中位数......虽然这些组非常小，所以我认为这将在选择如何做时发挥重要作用中位数。我知道我可以使用[nth_element](http://www.cplusplus.com/reference/algorithm/nth_element/)通过选择算法获得 O(n) 中的中位数，我知道我不会在复杂性上击败它。但是，由于常数 n 很小，我可能正在寻找开销最小的方法。

我找到了一堆不同的方法来做中位数（下），但如果有人知道在这里使用的“正确”方法，我只是好奇。

[最小最大堆](http://en.wikipedia.org/wiki/Min-max_heap)（O(n) 构建时间，持续访问，可能开销太大）

[这个 2010 年的问题](https://stackoverflow.com/questions/810657/fastest-code-c-c-to-select-the-median-in-a-set-of-27-floating-point-values)可能已经过时（新的 STL/Boost 代码可能已经实现了这些东西），也更关注时间复杂度而不是开销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:26:14.433

这可能无法很好地适应您的数据大小，但它是我找到的一个代码片段（不记得在哪里）并在我的图像处理函数中使用以获得 9 个无符号字符像素的中位数。

```
// optimised median search on 9 values
#define PIX_SWAP(a, b) { unsigned char uTemp = (a); (a) = (b); (b) = uTemp; }
#define PIX_SORT(a, b) { if ((a) > (b)) PIX_SWAP((a), (b)); }

unsigned char GetMedian9(unsigned char *pNine)
{
    // nb - this is theoretically the fastest way to get the median of 9 values
    PIX_SORT(pNine[1], pNine[2]); PIX_SORT(pNine[4], pNine[5]); PIX_SORT(pNine[7], pNine[8]); 
    PIX_SORT(pNine[0], pNine[1]); PIX_SORT(pNine[3], pNine[4]); PIX_SORT(pNine[6], pNine[7]); 
    PIX_SORT(pNine[1], pNine[2]); PIX_SORT(pNine[4], pNine[5]); PIX_SORT(pNine[7], pNine[8]); 
    PIX_SORT(pNine[0], pNine[3]); PIX_SORT(pNine[5], pNine[8]); PIX_SORT(pNine[4], pNine[7]); 
    PIX_SORT(pNine[3], pNine[6]); PIX_SORT(pNine[1], pNine[4]); PIX_SORT(pNine[2], pNine[5]); 
    PIX_SORT(pNine[4], pNine[7]); PIX_SORT(pNine[4], pNine[2]); PIX_SORT(pNine[6], pNine[4]); 
    PIX_SORT(pNine[4], pNine[2]); return(pNine[4]);
}

#undef PIX_SWAP
#undef PIX_SORT 
```

**编辑**- 好的，[这个答案也引用了它](https://stackoverflow.com/a/9721847/2065121)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:49:34.153

如果它是 std::set （你没有回答 BoBTFish）那么它已经被排序了。因此，您将通过迭代到 n/2 来获得中位数，这总是更好或等于 O(n)，通常应该是 O(ld n)。第 n 个元素在这里无济于事。

# java - JAVA SecurityManager - 具有多个操作的自定义 BasicPermission

> ID：15663885
> 
> 赞同：0
> 
> 时间：2013-03-27T16:19:01.377
> 
> 标签：java, security, policy, securitymanager

我创建了以下策略文件：

```
grant {
    permission StackPermission "use,save";
}; 
```

为了访问它，我使用以下参数运行我的 JVM：

```
-Djava.security.manager -Djava.security.policy=my.policy 
```

我的代码如下所示：

```
SecurityManager sec = System.getSecurityManager();
sec.checkPermission( new StackPermission( "use,save" ) ); 
```

一切都很好，但我想更细化一点，而不检查“保存”操作：

```
sec.checkPermission( new StackPermission( "use" ) ); 
```

即使我的策略同时指定“使用”和“保存”，这似乎也不起作用，我应该怎么做才能提供这样的功能？

非常感谢，弗拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:25:53.343

通常，权限构造函数有三种风格：无参数、`name`和`name`and `actions`。我没有你的源代码`StackPermissions`（我建议把它放在一个非默认包中，顺便说一句），但我猜你刚刚得到`name`但正在把它当作`action`. 有点遗憾的是，Java 允许构造函数即使在 arity 上也可以重载。

因此，将类放在一个命名包中，并在类和策略文件中的`name`前面添加一个。`action`

（一般来说，我建议尽快摆脱“Java 2 安全模型”。取而代之的是一个检查方法，它返回一个能够执行特权操作而无需进一步安全检查的对象（术语中的*对象能力*） . 在更高层的代码中做同样的事情。）

# computational-geometry - 一组几何集合的交叉几何集合

> ID：15663888
> 
> 赞同：0
> 
> 时间：2013-03-27T16:19:12.503
> 
> 标签：computational-geometry, intersection

我有一组要相交的几何集合，以便获得一个包含所有这些集合的交叉集合的几何集合。我尝试使用“交集”方法，但这只是计算两个几何之间的共享几何，它不会返回代表两个几何交叉的几何集合。

如果有人知道这样做的好方法，我将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T03:03:09.880

您的问题并未具体说明几何中使用的几何图元是什么。无论如何，我建议您使用像[CGAL](http://www.cgal.org/)这样的计算几何库。使用它的类表示您的几何图元，它具有计算所有类型图元的交集的功能。

# ruby-on-rails-3 - Rails 3没有路由匹配错误

> ID：15663891
> 
> 赞同：0
> 
> 时间：2013-03-27T16:19:16.890
> 
> 标签：ruby-on-rails-3, routes

我的应用程序使用票证和 call_logs。我将它们嵌套在一起，因此票证可以有许多 call_logs。我收到 [GET] "/call_logs" 的错误，我不知道我在这里缺少什么。
我确实有我的路线嵌套在**routes.rb**

```
 resources :tickets do
    resources :call_logs
  end 
```

**耙路线**：

```
ticket_call_logs     GET    /tickets/:ticket_id/call_logs(.:format)          call_logs#index
                     POST   /tickets/:ticket_id/call_logs(.:format)          call_logs#create
 new_ticket_call_log GET    /tickets/:ticket_id/call_logs/new(.:format)      call_logs#new
edit_ticket_call_log GET    /tickets/:ticket_id/call_logs/:id/edit(.:format) call_logs#edit
     ticket_call_log GET    /tickets/:ticket_id/call_logs/:id(.:format)      call_logs#show
                     PUT    /tickets/:ticket_id/call_logs/:id(.:format)      call_logs#update
                     DELETE /tickets/:ticket_id/call_logs/:id(.:format)      call_logs#destroy
             tickets GET    /tickets(.:format)                               tickets#index
                     POST   /tickets(.:format)                               tickets#create
          new_ticket GET    /tickets/new(.:format)                           tickets#new
         edit_ticket GET    /tickets/:id/edit(.:format)                      tickets#edit
              ticket GET    /tickets/:id(.:format)                           tickets#show
                     PUT    /tickets/:id(.:format)                           tickets#update
                     DELETE /tickets/:id(.:format)                           tickets#destroy 
```

**call_logs 控制器**：

```
class CallLogsController < ApplicationController

  before_filter :get_ticket

  # GET /call_logs
  # GET /call_logs.json
  def index
    @call_logs = @ticket.call_logs.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @call_logs }
    end

    # GET /call_logs/1
    # GET /call_logs/1.json
    def show
      @call_log = @ticket.call_logs.find(params[:id])

      respond_to do |format|
        format.html # show.html.erb
        format.json { render json: @call_log }
      end
    end

    # GET /call_logs/new
    # GET /call_logs/new.json
    def new
      @call_log = @ticket.call_logs.build

      respond_to do |format|
        format.html # new.html.erb
        format.json { render json: @call_log }
      end
    end

    # GET /call_logs/1/edit
    def edit
      @call_log = @ticket.call_logs.find(params[:id])
    end

    # POST /call_logs
    # POST /call_logs.json
    def create
      @call_log = CallLog.new(params[:call_log])

      respond_to do |format|
        if @call_log.save
          format.html { redirect_to ticket_call_logs_url(@ticket), notice: 'Call log was successfully created.' }
          format.json { render json: @call_log, status: :created, location: @call_log }
        else
          format.html { render action: "new" }
          format.json { render json: @call_log.errors, status: :unprocessable_entity }
        end
      end
    end

    # PUT /call_logs/1
    # PUT /call_logs/1.json
    def update
      @call_log = @ticket.call_logs.find(params[:id])

      respond_to do |format|
        if @call_log.update_attributes(params[:call_log])
          format.html { redirect_to ticket_call_logs_url(@ticket), notice: 'Call log was successfully updated.' }
          format.json { head :no_content }
        else
          format.html { render action: "edit" }
          format.json { render json: @call_log.errors, status: :unprocessable_entity }
        end
      end
    end

    # DELETE /call_logs/1
    # DELETE /call_logs/1.json
    def destroy
      @call_log = @ticket.call_log.find(params[:id])
      @call_log.destroy

      respond_to do |format|
        format.html { redirect_to ticket_call_logs_path(@call_log)}
        format.json { head :no_content }
      end
    end
  end
end

    private
    def get_ticket
      @ticket = Ticket.find(params[:ticket_id])
    end 
```

我相信在指向 call_log 页面时，我的 url 路径中有错误，但我似乎找不到它。任何建议或提示将不胜感激，因为我是菜鸟。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T14:19:54.773

看起来您已经在 routes.rb 中进行了更改，但没有在模型中维护关系。正如 rake 路由所说的 ticket_call_logs GET /tickets/:ticket_id/call_logs(.:format)

应该可以通过 /ticket/id/call_logs 访问，现在这里的“id”是票证 ID。这将列出该特定ticket_id 的所有通话记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:26:03.253

从 的输出中可以看出`rake routes`，您没有匹配 /call_logs 的路由。由于这是一个嵌套资源路由，因此您必须在前面加上票证和票证 id: `/tickets/<id>/call_logs`。

# overloading - 从 Ironpython 调用重载方法

> ID：15663895
> 
> 赞同：2
> 
> 时间：2013-03-27T16:19:26.687
> 
> 标签：overloading, ironpython

我想通过 IronPython从[RhinoCommon](http://4.rhino3d.com/5/rhinocommon/)[`Curve.Trim(CurveEnd, Double)`](http://4.rhino3d.com/5/rhinocommon/html/M_Rhino_Geometry_Curve_Trim.htm) API 调用该方法。我怎样才能确保我没有得到超载？[`Curve.Trim(Double, Double)`](http://4.rhino3d.com/5/rhinocommon/html/M_Rhino_Geometry_Curve_Trim_2.htm)

```
crv.Trim(geo.CurveEnd.End, 8.8)
    #raised: Message: expected float, got CurveEnd 
```

注意：如果您想自己尝试，您需要安装[Rhino 的试用版](http://www.rhino3d.com/download/rhino/5.0/evaluationtimed)。它包括一个 Python 编辑器。

**编辑/添加：**杰夫提到 的`.Overloads`属性在这里也不起作用。用于测试的片段：

```
import rhinoscriptsyntax as rs
import Rhino.Geometry as geo
import System

# first draw a curve longer than 8.8 units
crvO = rs.GetObject() # to pick that curve on the 3d GUI screen 
crv = rs.coercecurve(crvO)  # to get Rhino.Geometry.Curve

# these both don't work:
crv.Trim(geo.CurveEnd.End, 8.8) 
    #Message: expected float, got CurveEnd

crv.Trim.Overloads[geo.CurveEnd, System.Double](geo.CurveEnd.End, 8.8) 
    #Message: Trim() takes at least 2147483647 arguments (2 given) 
```

[rhinscriptsyntax](https://github.com/mcneel/rhinopython/tree/master/scripts/rhinoscript)是一个基于[RhinoCommon命名空间的库](http://4.rhino3d.com/5/rhinocommon/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T19:10:46.860

使用该`.Overloads`属性访问方法的重载：

```
csv.Trim.Overloads[CurveEnd, float](geo.CurveEnd.End, 8.8) 
```

[文档。](http://ironpython.net/documentation/dotnet/dotnet.html#method-overloads)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-29T18:31:39.250

我参加晚会迟到了。但是此代码有效（超出覆盖范围）。

```
import rhinoscriptsyntax as rs
import Rhino
import scriptcontext as sc
import System

crv_id = rs.GetObject()
crv = rs.coercecurve(crv_id)
trimmed = crv.Trim(Rhino.Geometry.CurveEnd.End, 4)
sc.doc.Objects.Replace(crv_id, trimmed)
sc.doc.Views.Redraw() 
```

# c - 指针参数之前的结构类型有什么作用？

> ID：15663897
> 
> 赞同：0
> 
> 时间：2013-03-27T16:19:38.143
> 
> 标签：c, types, struct, libuv

我想知道以下语法的作用：

```
func((some_type*) apointer) 
```

这是一个简单的类型检查还是做更多的事情？为什么类型周围需要括号？

[来自http://nikhilm.github.com/uvbook/networking.html#tcp](http://nikhilm.github.com/uvbook/networking.html#tcp)的整个示例：

```
int main() {
    loop = uv_default_loop();

    uv_tcp_t server;
    uv_tcp_init(loop, &server);

    struct sockaddr_in bind_addr = uv_ip4_addr("0.0.0.0", 7000);
    uv_tcp_bind(&server, bind_addr);

    /* here it is */
    int r = uv_listen((uv_stream_t*) &server, 128, on_new_connection);

    if (r) {
        fprintf(stderr, "Listen error %s\n", uv_err_name(uv_last_error(loop)));
        return 1;
    }
    return uv_run(loop, UV_RUN_DEFAULT);
} 
```

问候， 博多

**更新：**

这能行吗？

```
typedef struct one_t
{
    int counter;

} one_t;

typedef struct two_t
{
    another_t request;
} two_t;

(one_t*) two_t 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:21:26.760

它被称为[类型](http://en.wikipedia.org/wiki/Type_conversion)转换或类型转换。当您要将一种类型的数据转换为另一种类型的数据时使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:23:05.860

```
(uv_stream_t*)&server 
```

是演员表。它在这里用作 C 中的多态性仿真。

uv_tcp_t 可以这样声明：

```
typedef struct uv_tcp_t
{
    uv_stream_t base; //base has to be first member for byte reinterpretation to work

    /*...snip...*/

} uv_tcp_t; 
```

这允许`uv_listen`对 uv_tcp_t 进行操作，就好像它是一个 uv_stream_t 变量一样。

这很常见，并且（AFAIK）完全有效 C.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:21:51.133

```
(some_type) *apointer 
```

这意味着您将`apointer`内容转换为`some_type`类型

# c# - 构建一串 HEX 和字符串。如何？

> ID：15663899
> 
> 赞同：0
> 
> 时间：2013-03-27T16:19:39.260
> 
> 标签：c#

事实证明，在 python 中构建以下字符串......

```
# global variables
cr = '\x0d' # segment terminator
lf = '\x0a' # data element separator
rs = '\x1e' # record separator
sp = '\x20' # white space

a = 'hello'
b = 'world'

output = a + rs + b 
```

...与 C# 中的不同。

我如何在 C# 中完成相同的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:27:02.180

在不知道您要完成什么的情况下，您可以将其封装在一个类中。

```
public class StringStuff
{
    private const char cr = '\x0d'; // segment terminator
    private const char lf = '\x0a'; // data element separator
    private const char rs = '\x1e'; // record separator
    private const char sp = '\x20'; // white space

    public string BuildString()
    {
        var a = "hello";
        var b = "world";

        var output = a + rs + b

        return output;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:27:23.607

不确定您要完成什么，但试试这个：

```
// global variables
char cr = '\x0d'; // segment terminator
char lf = '\x0a'; // data element separator
char rs = '\x1e'; // record separator
char sp = '\x20'; // white space

string a = "hello";
string b = "world";

string output = a + rs + b; 
```

您也可以使用**字符串**而不是**字符**，然后使用双引号而不是单引号。

# java - 当清单文件不包含它时获取 jar 版本

> ID：15663901
> 
> 赞同：0
> 
> 时间：2013-03-27T16:19:44.263
> 
> 标签：java

我想知道当清单文件不包含它时如何获取jar版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:42:45.483

JAR 的清单是应该存储版本的位置。根据Oracle 关于产品版本控制的[这篇文章](http://docs.oracle.com/javase/7/docs/technotes/guides/versioning/spec/versioning2.html#wp89936)，为包定义了以下属性名称。每个属性的值都是一个字符串：

*   `Package-Title`包的标题
*   `Package-Version`版本号
*   `Package-Vendor`供应商公司或组织
*   `Specification-Title`规范的标题
*   `Specification-Version`版本号
*   `Specification-Vendor`供应商公司或组织

如果清单不包含包版本，则说明未使用此可用信息创建包。你不能真的只是弥补或得到其他地方，至少不是在任何标准意义上。

# asp.net - 使用 Twilio/ASP.NET 随着时间的推移触发一系列 SMS 警报

> ID：15663903
> 
> 赞同：2
> 
> 时间：2013-03-27T16:19:46.747
> 
> 标签：asp.net, sms, twilio

我没有看到像我这样的情况，所以这里是：

场景亮点：用户想要一个包含自定义 SMS 警报的系统。该功能的一个组成部分是有一种方法可以根据用户输入识别开始，然后在触发后根据预定义的时间间隔发送带有个性化消息的 SMS。我以前从未使用过 Twilio，并且正在研究实现。

First Pass 解决方案：使用 Twilio 帐户，我指定将通过 GET 接收入站触发警报/SMS 的 .aspx。接收页面在页面加载中声明并实例化我的 SMSAlerter 对象，该对象立即响应第一条 SMS 并启动 System.Timer.Timer。基本的和功能性的。

问题：如果计时器的时间间隔很短，则会继续发送警报。我每隔一分钟测试一次，并成功了。当我进入 10 分钟时，立即发送短信，并在 10 分钟后发送第一条消息，但之后没有任何消息。

我的观察：由于在入站文本之后没有与资源交互，因此如果保留默认 20 分钟，则 Session 超时。增加会话超时不起作用，即使它看起来不正确，因为间隔将是几小时，而不是几分钟。

使用缓存来存储每个新的 SMSAlerter 可能是要走的路。对于创建的任何 SMSAlerter，计划使用大约 12 小时，并在同一用户第二天通知系统时替换为新的 SMSAlerter 对象。有没有更好的办法？我是否过度/不足简化？我现在预计流量不高（数十个用户），但用户的想法很大。

感谢您的意见、建议。我没有包含代码，因为问题是关于设计，而不是语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:53:50.070

我认为您的计时器在原始请求后约 20 分钟超出范围，从而终止了计时器。我有一种感觉，如果你不断刷新 aspx 页面，它就不会发生 - 但显然这并没有多大帮助。

您可以启动一个具有 System.Timers.Timer 对象的新线程，以便它保持活动状态，并且在没有对服务器的后续请求时不会超出范围。但老实说，这不是一个好主意——尽管它可能有助于理解这个问题。

最终，您将需要某种持续运行的服务 - 因为您不想为此依赖应用程序池，所以我建议在后台运行 Windows 服务来处理它，这将是合适的长期解决方案。

希望这可以帮助！

（稍作编辑以使 Windows 服务方面更清晰）

# gcc - RHEL 5 和 6 上的 libgcc_s.so

> ID：15663907
> 
> 赞同：1
> 
> 时间：2013-03-27T16:19:53.730
> 
> 标签：gcc, rhel5, rhel6

我正在开发一个依赖于 libgcc_s.so 并将安装在 RHEL 5 和 6 上的应用程序。我试图找出更好的方法：使用 libgcc_s 分发应用程序，这将需要 2 种不同的设置，每个 RHEL 版本或依赖系统安装的libgcc_s。

*   libgcc_s.so 是否默认与 rhel 5 一起分发？如果是的话，在什么包下？
*   是否有只包含 gcc 运行时库（包括 libgcc_s.so）但没有 gcc 本身的包？因为我怀疑有些客户出于安全原因可能希望避免安装 gcc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:42:43.360

这里（与 Fedora 18 密切相关）`/usr/lib/libgcc_s.so.1`是 package 的一部分`libgcc`，它被描述为“这个包包含 GCC 共享支持库，例如异常处理支持。”。安装应该是安全的（如果部署了任何 C++ 代码，可能已经安装）。

（以上礼貌`locate(1)`，还有一点`rpm -qif ...`）

# adfs2.0 - 访问 ADFS 中的原始令牌

> ID：15663913
> 
> 赞同：0
> 
> 时间：2013-03-27T16:20:04.630
> 
> 标签：adfs2.0

是否可以在 ADFS 2.0 中访问原始令牌？

我的意思是，如果 SAML 令牌作为 ADFS 的输入，我想将转换规则中的这个完整令牌添加到输出声明中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:53:41.523

你为什么要这样做？

通常，SAML 令牌从 ADFS 发送到 RP。RP 可以使用 BootstrapToken 获取令牌。

令牌只是联合的 ADFS 输入。

# c++ - 实现二维范围树 C++

> ID：15663914
> 
> 赞同：1
> 
> 时间：2013-03-27T16:20:12.350
> 
> 标签：c++, structure, segment, range-tree

一段时间以来，我一直在尝试理解范围树，但我仍然无法理解。

有人可以通过实现向我解释吗，因为我想用它来解决 2D RMQ，我知道分段树，我的老师告诉我范围树类似于 2d 分段树，但我就是想不出空间如何复杂度可以小于 n^2，如 2d 段树。

我不确定这一点，但它是真的吗，它就像合并排序，所以内存将小于 n^2 使用向量

```
void merge(vector<int> &res,vector<int> &a,vector<int> &b)
{
    int la = 0;
    int lb = 0;
    int sa = SIZE(a);
    int sb = SIZE(b);
    while(la < sa || lb < sb)
    {
        if (la >= sa) {res.pb(b[lb]);lb++;}
        else if (lb >= sb) {res.pb(a[la]);la++;}
        else
        {
            if (a[la] < b[lb]) {res.pb(a[la]);la++;}
            else {res.pb(b[lb]);lb++;}
        }
    }
}

void build(int n,int l,int r)
{
    if (l == r)
    {
        rtree[n].pb(ar[l]);
        return;
    }
    int m = (l+r)/2;
    build(2*n,l,m);
    build(2*n+1,m+1,r);
    merge(rtree[n],rtree[2*n],rtree[2*n+1]);
} 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T17:12:14.610

你检查过通常的饼干罐吗？

比如[Wikipedia](http://en.wikipedia.org/wiki/Range_tree)，我在 Google 上找到的几个[以前的讲座以及一个](http://www.cise.ufl.edu/class/cot5520fa09/CG_RangeTrees.pdf)[Stack Question](https://stackoverflow.com/questions/13871394/clear-and-efficient-range-tree-implementation)？

我没有在大学学习它的乐趣，但它似乎是一个有趣的数据结构。

# git - Git/Github：如何将本地文件与最新的在线文件同步？

> ID：15663917
> 
> 赞同：0
> 
> 时间：2013-03-27T16:20:15.763
> 
> 标签：git, version-control, github, version, versioning

我的本地文件与 Github 同步，但我想在线上对 README 进行更改。进行此更改后，如何更新本地文件？

**OBS：**我是 Git 新手，也是 Git Hub 的新手。我已经用谷歌搜索了这个，没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:21:51.440

你再次从 Github 拉取代码。

假设您的分支是`master`并且远程是`origin`（这通常是默认值）

```
git pull origin master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:21:44.167

在线编辑文件类似于在另一台计算机上进行更改并将其推送到远程存储库。

如果要将更改从远程存储库同步到本地存储库，则应使用`git pull`.

# php - 获取在单个 mysqli 查询中插入的所有行的 insert_id（多个值）

> ID：15663918
> 
> 赞同：3
> 
> 时间：2013-03-27T16:20:17.960
> 
> 标签：php, mysql, mysqli, mysql-insert-id

在 PHP 中工作并使用 MYSQLI。尝试获取从具有多个值的单个插入查询插入的所有行的 insert_id。保持在一个单一的呼叫效率。我的实际代码在一个插入查询中有数百个值。但是，这里有一些示例代码，用于仅包含 4 个值的插入：

```
$sql = "INSERT INTO link_tags ( string_names_id, urls_id ) 
    VALUES ( '2', '17' ), ( '8', '31' ), ( '8', '1' ), ( '8', '4' )";

$mysqli->query($sql);

echo "id's: " .$mysqli->insert_id; 
```

上面的代码实现了插入，但只给了我调用中第一个插入的 id。如何检索此单个查询的所有 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T16:32:23.917

假设您的 id 是 mysql_insert_id + 接下来的 3 个（无论如何）应该是安全的，因为您的语句是在一个事务中完成的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:33:22.853

不，这对于 MySQL 是不可能的。

它甚至没有真正保存使用`LAST_INSERT_ID()`，因为它将返回一个 BIGINT（64 位）值，表示为 AUTO_INCREMENT 列成功插入的第一个自动生成的值。

你可能会猜到这个值 + 数据列表的长度将是 ID，但没有任何绝对保证这总是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T20:22:11.653

正如@thomas[指出](https://stackoverflow.com/a/15664201/362780)的那样，我使用了这个解决方案并假设可以检测到最后一个插入ID；

```
$id = $link->insert_id;
if ($id && $link->affected_rows > 1) {
    $id = ($id + $link->affected_rows) - 1; // sub first id num
} 
```

在您的情况下（适用于所有身份）；

```
$id = $link->insert_id; $ids = [$id];
if ($id && $link->affected_rows > 1) {
    for ($i = 0; $i < $link->affected_rows - 1; $i++) {
        $ids[] = $id + 1;
    }
}

// or more dirty way
$id = $link->insert_id; $ids = [$id];
if ($id && $link->affected_rows > 1) {
    $ids = range($id, ($id + $link->affected_rows) - 1);
} 
```

同时，我[`multi_query`](http://php.net/manual/en/mysqli.multi-query.php)在while循环中使用并处理了结果，但无法达到预期的结果。

```
while ($link->more_results() && $link->next_result()) $ids[] = $link->insert_id; 
```

# python - 最快的可变数据持有者

> ID：15663919
> 
> 赞同：2
> 
> 时间：2013-03-27T16:20:17.510
> 
> 标签：python, arrays, primes

[我最近从这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/#bitarray, "bitarray-0.8.0.win32-py2.7.‌exe")下载了 bitarray 模块，以获得更快的初筛，但结果令人沮丧。

* * *

```
from bitarray import bitarray
from numpy import ones
from timeit import timeit

def sieve1(n = 1000000):
    '''Sieve of Eratosthenes (bitarray)'''
    l = (n - 1)/2; a = bitarray(l); a.setall(True)
    for i in xrange(500):
        if a[i]:
            s = i+i+3; t = (s*s-3)/2; a[t:l:s] = False
    return [2] + [x+x+3 for x in xrange(l) if a[x]]

def sieve2(n = 1000000):
    '''Sieve of Eratosthenes (list)'''
    l = (n - 1)/2; a = [True] * l
    for i in xrange(500):
        if a[i]:
            s = i+i+3; t = (s*s-3)/2; u = l-t-1
            a[t:l:s] = [False] * (u/s + 1)
    return [2] + [x+x+3 for x in xrange(l)]

def sieve3(n = 1000000):
    '''Sieve of Eratosthenes (numpy.ones)'''    
    l = (n - 1)/2; a = ones(l, dtype=bool)
    for i in xrange(500):
        if a[i]:
            s = i+i+3; t = (s*s-3)/2; a[t:l:s] = False
    return [2] + [x+x+3 for x in xrange(l)]

print timeit(sieve1, number=10)
print timeit(sieve2, number=10)
print timeit(sieve3, number=10) 
```

* * *

结果如下——

```
1.59695601594
0.666230770593
0.523708537583 
```

* * *

筛子的`bitarray`速度是列表的两倍多。有人对更好的阵列有建议吗？任何东西都应该比 python 快`list`，或者我想。 `numpy.ones`最快，但我不喜欢，`numpy`因为它需要很长时间`import`。

我基本上是在寻找一个快速的数据持有者，它是可变的，并且可以持有`True`和`False`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:40:43.047

bitarray 中位的实际设置和清除速度非常快。正在做的是建立退货清单的速度较慢。与其遍历一个范围，然后测试每个位，不如利用 bitarray 对遍历位的支持。

试试这个：

```
def bitarray_sieve(n = 1000000):
    '''Sieve of Eratosthenes (bitarray)'''
    l = (n - 1)//2; a = bitarray(l); a.setall(True)
    for i in range(500):
        if a[i]:
            s = i+i+3; t = (s*s-3)//2; a[t:l:s] = False
    return [2] + [x+x+3 for x,b in enumerate(a) if b] 
```

它在我的机器上运行大约 0.38 秒，而列表版本大约需要 0.47 秒。

你看过这个[问题](https://stackoverflow.com/questions/2897297/speed-up-bitstring-bit-operations-in-python/2903765#2903765)吗？

我维护 gmpy2 并添加了迭代整数位和设置/清除位的能力。

以下示例大约需要 0.16 秒。

```
def gmpy2_sieve2(n=1000000):
    '''Sieve of Eratosthenes (gmpy2, version 2)'''
    l = (n - 1)//2; a = gmpy2.xbit_mask(l)
    for i in range(500):
        if a[i]:
            s = i+i+3; t = (s*s-3)//2; u = l-t-1
            a[t:l:s] = 0
    return [2] + [x+x+3 for x in a.iter_set()] 
```

现在的瓶颈是计算`x+x+3`。以下解决方案不会跳过筛分 2。它需要两倍的内存，但它允许立即使用位位置。在我的机器上大约需要 0.08 秒：

```
def gmpy2_sieve(limit=1000000):
    '''Returns a generator that yields the prime numbers up to limit.

    Bits are set to 1 if their position is composite.'''

    sieve_limit = gmpy2.isqrt(limit) + 1
    limit += 1

    # Mark bit positions 0 and 1 as not prime.
    bitmap = gmpy2.xmpz(3)

    # Process 2 separately. This allows us to use p+p for the step size
    # when sieving the remaining primes.
    bitmap[4 : limit : 2] = -1

    # Sieve the remaining primes.
    for p in bitmap.iter_clear(3, sieve_limit):
        bitmap[p*p : limit : p+p] = -1

    return list(bitmap.iter_clear(2, limit)) 
```

对于位的实际设置/清除，bitarray 比 gmpy2 快。而且 bitarray 有很多 gmpy2 所缺乏的能力。但是，我在二进制中找不到更快的方法来获取设置或清除哪些位的索引。

顺便说一句，您的基准函数 sieve2() 和 sieve3() 返回不正确的结果；你不见了`if a[x]`。

# android - TextViews 未按正确顺序显示且缺少字符串

> ID：15663924
> 
> 赞同：0
> 
> 时间：2013-03-27T16:20:31.887
> 
> 标签：android, xml, eclipse, textview

我正在尝试构建一个类似于计算自行车齿轮（[iOS 版本](https://itunes.apple.com/us/app/id593011453)）的 Android 应用程序，将磁带存储在数据库中。当用户用每个链环的齿数填写 editText 时，我想在下一个进行计算的活动中写入这些值，但我得到的只是一个奇怪的行为： - 如果用户选择两个链环，第二个value 没有写在信息 textView 上，但它出现在列上的 textview 中，以显示对应于第三个链环的结果， - 如果用户选择三个链环，则第二个和第三个值以相反的顺序放置，都在信息 textView 和标题中。

一些图片来说明

![用户填空](../Images/41e499580618d8e15a9e1b81883e934e.png)

![两个链轮值，第二个未显示](../Images/b745c58116925e1c94497b276948cd4d.png)

![三、最后两个倒置位置](../Images/6c9cf917d3ded4d7239aac9a9c7c005c.png)

我的一段代码：

活动一

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    init();
    fillSpinner();

        button1.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v){

chainring1editText.setBackgroundColor(getResources().getColor(android.R.color.background_light));
chainring2editText.setBackgroundColor(getResources().getColor(android.R.color.black));
chainring3editText.setBackgroundColor(getResources().getColor(android.R.color.black));
        chainringCount = "1";
    }
});
button2.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v){

chainring1editText.setBackgroundColor(getResources().getColor(android.R.color.background_light));   
chainring2editText.setBackgroundColor(getResources().getColor(android.R.color.background_light));       
chainring3editText.setBackgroundColor(getResources().getColor(android.R.color.black));
        chainringCount = "2";
            }
    });
    button3.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View v){

chainring1editText.setBackgroundColor(getResources().getColor(android.R.color.background_light));
chainring2editText.setBackgroundColor(getResources().getColor(android.R.color.background_light));
chainring3editText.setBackgroundColor(getResources().getColor(android.R.color.background_light));
        chainringCount= "3";
    }

});

//Check if database is empty
if (spinner.getAdapter().getCount()==0){
    Intent intent =new Intent (this,AddCassettes.class);
    startActivity(intent);
   }

}
private void init() {
    chainring1editText = (EditText)findViewById(R.id.chainring1editText);
    chainring2editText = (EditText)findViewById(R.id.chainring2editText);
    chainring3editText = (EditText)findViewById(R.id.chainring3editText);

    //force user to select number of chainrings

chainring1editText.setBackgroundColor(getResources().getColor(android.R.color.black));

chainring2editText.setBackgroundColor(getResources().getColor(android.R.color.black));

chainring3editText.setBackgroundColor(getResources().getColor(android.R.color.black));

    button1 = (Button)findViewById(R.id.btnBack);
    button2 = (Button)findViewById(R.id.btnReset);
    button3 = (Button)findViewById(R.id.btnSave);
    spinner = (Spinner)findViewById(R.id.picker);
    gearInches = (ToggleButton)findViewById(R.id.inches);
    rgWheelSize = (RadioGroup)findViewById(R.id.rgWheelsize);
    tvWheelsize = (TextView)findViewById(R.id.tvWheelsize);
}
@Override
protected void onResume(){
    super.onResume();
    fillSpinner();
}
@SuppressWarnings("deprecation")
private void fillSpinner(){
    DataBaseHelper databasehelper = new DataBaseHelper(this);
    SQLiteDatabase db = databasehelper.getReadableDatabase();

    Spinner picker = (Spinner)this.findViewById(R.id.picker);
    Cursor cursor = db.rawQuery ("SELECT _id AS _id, dmodel FROM cass",null);
    String[] from = new String[] {"dmodel"};
    int[] to = new int[] {android.R.id.text1};
    mAdapter = new 
    SimpleCursorAdapter(this,android.R.layout.simple_spinner_dropdown_item,cursor,from,to);
    picker.setAdapter(mAdapter);
    mAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    picker.setAdapter(mAdapter);
    db.close();

}

//private String[] getItems(){
public void getData(){

    // retrieve selected cassette to calculate gears

    Spinner spinner = (Spinner)this.findViewById(R.id.picker);
    selectedCassette = ((Cursor) spinner.getSelectedItem()).getString(1);

    //retrieve teeth 
    teethOne= this.chainring1editText.getText().toString();
    teethTwo =this.chainring2editText.getText().toString();
    teethThree =this.chainring3editText.getText().toString();

    //retrieve wheelsize from radio button
    switch (rgWheelSize.getCheckedRadioButtonId())
    {
    case R.id.r26inches:
        wheelsize = "2055";
        tvWheelsize.setText(wheelsize + "mm");
        break;
    case R.id.r275inches:
        wheelsize= "2170";
        tvWheelsize.setText(wheelsize + "mm");
        break;
    case R.id.r29inches:
        wheelsize = "2285";
        tvWheelsize.setText(wheelsize + "mm");
        break;
    case R.id.rRoad:
        wheelsize = "2097";
        tvWheelsize.setText(wheelsize + "mm");
        break;
    }
    //get the state from the toggle button
    if (gearInches.isChecked()){
        inches = "yes";
        }else{
            inches = "no";
        }
}

//MENU
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {

        case R.id.addCassette:
           Intent intent =new Intent (this,AddCassettes.class);
           startActivity(intent);
            return true;

        case R.id.deleteCassette:
            Intent intentTwo = new Intent (this,EditCassettes.class);
            startActivity(intentTwo);
            return true;

        case R.id.calculateCombinations:
            Intent intentThree = new Intent (this,Calculate.class);
            getData();

            Bundle b = new Bundle();
            b.putString("C",selectedCassette);
            b.putString("CC",chainringCount);
            b.putString("TO", teethOne);
            b.putString("TT", teethThree);
            b.putString("TH", teethTwo);
            b.putString("WH", wheelsize);
            b.putString("IN", inches);
            b.putString("CC", chainringCount);

            intentThree.putExtras(b);
            startActivity(intentThree);
                return true;

             default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

Calculate.java（活动 2）

```
public class Calculate extends Activity{

private TextView banner;
String bannerText, selCassette,chainringOne, chainringTwo, chainringThree,chainringCount;
int chainrings = 0;
...
TextView[] tvChainringArray = new TextView[3];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calculate);
    init();

    Bundle bundle = getIntent().getExtras();
    selCassette = bundle.getString("C");
    chainringOne = bundle.getString("TO");
    chainringTwo = bundle.getString("TT");
    chainringThree = bundle.getString("TH");
    chainringCount = bundle.getString("CC");
    wheelsize = bundle.getString("WH");
    gearInches = bundle.getString("IN");

    if(Integer.parseInt(chainringCount) == 1){
        bannerText = selCassette + " * " + chainringOne;
        banner.setText(bannerText);
    }else if (Integer.parseInt(chainringCount)== 2){
        bannerText = selCassette + " * " +chainringOne + "/" + chainringTwo;
        banner.setText(bannerText);
    }else if(Integer.parseInt(chainringCount) == 3){
        bannerText = selCassette + " * " + chainringOne + "/" + chainringTwo + "/" +    chainringThree;
        banner.setText(bannerText);
    }

    //call method to retrieve data from database
    queryDB("selCassette");

    //chainring teeth above gears
    tvChainringArray[0].setText(chainringOne);
    tvChainringArray[1].setText(chainringTwo);
    tvChainringArray[2].setText(chainringThree);

        }

     public void init(){
     banner = (TextView)findViewById(R.id.bigBanner);
     tvChainringArray[0] = (TextView)findViewById(R.id.tvCh1);
     tvChainringArray[1] = (TextView)findViewById(R.id.tvCh2);
     tvChainringArray[2] = (TextView)findViewById(R.id.tvCh3);
    }
... 
```

计算.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000" 
android:orientation="vertical">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="12dp"
    android:background="#C0C0C0"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/bigBanner"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fontFamily="Helvetica"
        android:labelFor="11"
        android:padding="5dp"
        android:text="@string/largeText"
        android:textAlignment="textStart"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="18sp" />

 </LinearLayout>

 <LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:orientation="horizontal"  >

    <TextView
      android:id="@+id/textView2" // blank textView to keep tvCh1,2 & in place
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="@string/mediumText"
      android:layout_marginBottom="15dp"
      android:textAppearance="?android:attr/textAppearanceMedium" />

  <TextView
     android:id="@+id/tvCh1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_weight="1"
     android:labelFor="80"
     android:text="@string/smallText"
     android:textAlignment="center"
     android:textAppearance="?android:attr/textAppearanceSmall"
     android:width="60dp" />

<TextView
     android:id="@+id/tvCh2"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_weight="1"
     android:labelFor="81"
     android:text="@string/smallText"
     android:textAlignment="center"
     android:textAppearance="?android:attr/textAppearanceSmall"
     android:width="60dp" />

<TextView
     android:id="@+id/tvCh3"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_weight="1"
     android:labelFor="82"
     android:text="@string/smallText"
     android:textAlignment="center"
     android:textAppearance="?android:attr/textAppearanceSmall"
     android:width="60dp" />

</LinearLayout> 
```

...

你能给出解决这种情况的提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:57:05.300

我的错，我在捆绑设置中交换了变量顺序。

```
Bundle b = new Bundle();
b.putString("C",selectedCassette);
b.putString("CC",chainringCount);
b.putString("TO", teethOne);
b.putString("TT", teethTwo);
b.putString("TH", teethThree);
...
intentThree.putExtras(b);
startActivity(intentThree); 
```

# c# - 将值从一个窗体传递到另一个窗体

> ID：15663928
> 
> 赞同：-4
> 
> 时间：2013-03-27T16:20:42.607
> 
> 标签：c#, winforms

我的第一个 Windows 窗体上有一个 DataGridView。用户单击的位置然后打开一个弹出窗口，其中是第二个 DataGridView，单击将显示在第一页 DataGridView 上的 DataGridView 行。

问题是，当我单击`Form`一个 DataGridView 时，它会打开第二个表单的弹出窗口，用户可以在其中选择任何行。我从该 DataGridView 中获取所需的数据，并将这些数据发送到以前在我的窗口上打开的第一页上。从这行代码中，我将值从 Second Form 传递给 First Form 。

```
FrmSetting _frmSetting = new FrmSetting(string _val,string code) 
```

我认为由于 new 关键字，它会打开一个新页面或类似的东西。我如何发送第一表格请建议我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:26:37.717

在第二个表单上创建属性并将所选值设置为该属性。然后你可以从第一个表格中得到它。

更新：

```
//this should be in second form
string _myProperty;
public string MyProperty
{
    get{return _myProperty;}
    set{_myProperty=value; if(MyPropertyChanged!=null)MyPropertyChanged(this,null);}
}

public event EventHandler MyPropertyChanged;

//assign value to MyProperty when your dataGrid changes or whatever 
```

然后从你的第一个表格你可以说：

```
string valueFromSecondForm = secondForm.MyProperty;
//subscribe to MyPropertyChanged event if you need to know when it is changed 
```

如果您需要第一个表格中的一些信息，您可以做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:23:08.727

将第一个表单作为参数传递给第二个表单的构造函数。将要在第一个表单中更新的 DataGrid 设为 public，并从第二个表单更新它：

```
Form1.DataGrid1.CaptionText = "Caption 1"; 
```

# qt - 使用 qstring 文件名构建 Qt QPixmap

> ID：15663934
> 
> 赞同：0
> 
> 时间：2013-03-27T16:21:02.607
> 
> 标签：qt, filenames, qstring, qpixmap

我需要用它的文件目录初始化一个 qpixmap 对象

如果我执行以下操作，它将起作用： image = new QPixmap("C:/Users/Administrator/Desktop/maze/HTetris-build-Desktop_Qt_5_0_1_MinGW_32bit-Debug/untitled/c12.bmp");

它也适用于： image = new QPixmap("/Users/Administrator/Desktop/maze/HTetris-build-Desktop_Qt_5_0_1_MinGW_32bit-Debug/untitled/c12.bmp");

但这太长太具体了。我已将 c12.bmp 放在与项目本身相同的文件中。但是 image = new QPixmap("c12.bmp");

根本行不通。

既然这个项目需要portal，我该怎么办！！！！！！！

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:28:48.060

您的文件必须位于执行应用程序的文件（运行时目录）中，该文件可能与可执行文件的目录不同。

您可以将资源文件用于可移植性（您的像素图将“嵌入”到您的二进制文件中）。

[http://qt-project.org/doc/qt-4.8/resources.html](http://qt-project.org/doc/qt-4.8/resources.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:26:10.717

考虑将您的文件放入资源文件（qrc）或将您的文件放在可执行文件附近，因为您的“c12.bmp”在运行时被搜索并且必须与可执行目录相同。

# asp.net - ASP.NET MVC3 Web 应用程序部署和代码加密

> ID：15663937
> 
> 赞同：0
> 
> 时间：2013-03-27T16:21:08.327
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, deployment

我在 ASP.NET MVC3 中开发了一个会计应用程序。这是一个前提安装的解决方案。

我担心的是我的代码的安全性。对于 ASP.NET 应用程序，有没有像 ioncube 这样的应用程序？或者哪个是 ASP.NET 应用程序的最佳加密解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T18:52:09.647

我认为您正在寻找 .NET 混淆器。这个答案可以帮助你： [https ://stackoverflow.com/questions/1988451/net-obfuscation](https://stackoverflow.com/questions/1988451/net-obfuscation)

# asp.net-mvc - 使用 MVC 模型作为存储库中的过滤器

> ID：15663938
> 
> 赞同：2
> 
> 时间：2013-03-27T16:21:10.110
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有一个输入到 IEnumerable 的详细信息视图。带有一堆下拉列表的视图，可让您将过滤器添加到呈现的记录列表中。

所有这些下拉列表对应于 MVC 模型上的属性：

```
public class Record
{
    public string CustomerNumber { get; set; }
    public string CustomerName { get; set; }
    public string LineOfBusiness{ get; set; }
    public DateTime? Date { get; set; }
} 
```

现在，我使用我的模型作为我的 dto 在我的控制器和我的 repo 之间混洗数据。由于我所有的下拉过滤器都代表模型属性，因此我将模型传递给 repo 检索方法，检查其属性并根据其值进行过滤？换句话说：

```
 public IEnumerable<TradeSpendRecord> Get(TradeSpendRecord record)
    {
        IQueryable<tblTradeSpend> query = _context.tblRecords;

        if (!String.IsNullOrEmpty(record.CustomerName))
            query = query.Where(x => x.CustomerNumber == record.CustomerNumber);

        if (!String.IsNullOrEmpty(record.LineOfBusiness))
            query = query.Where(r => r.LOB == record.LineOfBusiness); 
```

***剪辑***

希望这不是太主观，但我想知道是否有人对这是否是一个好/坏的做法有任何意见。我还没有看到很多我需要做的动态过滤示例，我正在寻找一些指导。

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:28:14.577

如果您正在做我认为您正在做的事情，我不确定这是不是最好的方法。

将您的“模型”保留在您的 MVC/表示层（无论这是否是一个物理组件）中，专用于您的表示层。唯一应该触及它们的是您的视图和控制器。您不希望应该是独立实体的东西如此紧密地耦合到您的视图模型。

我建议创建一个单独的`TradeSpendFilter`类，它最简单地公开域实体的可过滤属性（可能比任何给定的视图模型更多）。然后，您会将其传递给您的“过滤服务”或任何可能的内容。这也意味着您可以独立于域模型和 MVC 应用程序扩展过滤功能。例如，如果你突然想过滤多个对象，你可以简单地改变......

```
public class TradeSpendFilter
{
    public string CustomerName { get; set; }
    ...
} 
```

...到...

```
public class TradeSpendFilter
{
    public IEnumerable<string> CustomerNames { get; set; }
    ...
} 
```

...不会给您的 MVC 应用程序带来各种问题。

此外，这还意味着您可以在其他地方使用您的过滤功能，而无需将**其他**组件绑定到您的 MVC 应用程序并最终陷入自举的混乱局面。

# php - PHP 函数无法正常工作

> ID：15663941
> 
> 赞同：-1
> 
> 时间：2013-03-27T16:21:13.907
> 
> 标签：php, function

我有这个功能

```
function getDomain($you){
$domain = substr(strrchr($you, "@"), 1);
$blacklist = array('hushmail.com', 'sharklasers.com', 'guerrillamailblock.com', 'guerrillamail.com', 'guerrillamail.net', 'guerrillamail.biz', 'guerrillamail.org', 'guerrillamail.de', 'spam4.me' 'tagyourself.com', 'getairmail.com', 'broadbandninja.com', 'whatsaas.com', '6paq.com', 'consumerriot.com', '7tags.com', 'moburl.com', 'cellurl.com', 'whatiaas.com', 'vidchart.com', 'rmqkr.net', 'bh.mintemail.com', 'mailcatch.com', 'mailinator.com', 'spamthisplease.com', 'chammy.info', 'sogetthis.com', 'letthemeatspam.com', 'spamhereplease.com', 'sendspamhere.com', 'tradermail.info', 'meltmail.com', 'yopmail.fr', 'yopmail.com', 'yopmail.net', 'fakeinbox.com', 'emailsensei.com', 'insorg-mail.info', 'mailnesia.com', 'tempsky.com', 'freemail.ms', 'mailexpire.com', 'jetable.org', 'mailmetrash.com', 'inst1.com', 'inbox.si', 'armyspy.com', 'dayrep.com', 'teleworm.us', 'tempemail.net', 'throwawaymail.com', 'sofimail.com', 'tempinbox.com', 'dingbone.com', 'fudgerub.com', 'lookugly.com', 'smellfear.com', 'shitmail.com', 'crapmail.com', 'moto-technika71.com', 'blizzardrc.org', 'tyear.ru', 'autostop71.ru', 'anonymouss.ws', 'coupe-cars.ru', 'mytempemail.com', '0clickemail.com', 'utilities-online.info', 'emailisvalid.com', 'hushmail.me', 'hush.com', 'hush.ai', 'mac.hush.com', 'incognitomail.org', '12minutemail.com', 'deadaddress.com');
if (in_array($domain, $blacklist)) {
    return true
} else {
    return false
}
} 
```

我用它来确保人们在注册网站时不使用一次性电子邮件地址，但由于某种原因，当我添加它时，它破坏了整个脚本，我已经检查了好几次，我我一生都无法弄清楚我犯的错字/错误。这可能是非常简单的事情，但我的眼睛就是找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:25:22.487

`;`（1） return语句后缺失

(2) `,`'spam4.me' 和 'tagyourself.com' 之间缺失

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T16:24:25.837

您在这里缺少一个逗号：`'spam4.me' 'tagyourself.com'`

然后在两个返回行中使用分号。

虽然您应该激活 PHP 错误日志。

# c# - 在 Windows Phone 7 中签名哈希时出现 MethodAccessException

> ID：15663943
> 
> 赞同：0
> 
> 时间：2013-03-27T16:21:17.500
> 
> 标签：c#, windows-phone-7, exception, rsa

执行这行代码时出现 MethodAccessException：

```
byte[] signedData = rsaProvider.SignData(DataToSign, "SHA1"); 
```

rsaProvider 是 RSACryptoServiceProvider 的实例，它是 System.Security.Cryptography 的一部分。知道那里发生了什么和/或如何解决问题吗？

# dns - 主要和次要名称服务器定义

> ID：15663948
> 
> 赞同：0
> 
> 时间：2013-03-27T16:21:26.403
> 
> 标签：dns, subdomain, nameservers

在我的域注册器中，我不小心将我的主域名服务器定义为 ns2.mydomain.com，并将辅助域名服务器定义为 ns1.mydomain.com

当我遇到问题时，我想知道主要领域的内容和次要领域的内容是否重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:26:29.170

如果这些服务器具有相同的功能，并且两者都负责您的 DNS 区域，那么哪个是第一个，哪个是第二个并不重要。您的问题不太可能源于此问题，您还忽略了其他一些问题。

# java - 将桌面应用程序转换为基于 Web 的应用程序

> ID：15663950
> 
> 赞同：-4
> 
> 时间：2013-03-27T16:21:27.300
> 
> 标签：java, jakarta-ee

我开发了一个基于 openJump 的桌面应用程序，我想将我的桌面应用程序转换为基于 Web（启用浏览器）的应用程序。我只是 Web 技术的一个孩子。PLZ有没有可能做到这一点？并通过网络连接到应用程序。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:33:23.960

如果您要求从桌面轻松移植到基于 Web 的平台，那么恐怕您运气不好。您将不得不了解一些流行的 Web 框架，例如 Struts 或 Spring MVC，它们将帮助您了解如何构建您的 Web 应用程序。当然，您必须能够将您的业务逻辑移植到 Web 应用程序，而我希望没有太多的改变。尝试一些教程，首先从一个普通的 Hello World 开始。祝你好运。

# javascript - 从 javascript 访问具有相同名称的 HTML 表单元素

> ID：15663951
> 
> 赞同：0
> 
> 时间：2013-03-27T16:21:31.307
> 
> 标签：javascript, forms, asp.net-mvc-4

我正在使用多个提交按钮的以下解决方案（[如何最好地实现 Save | Save and Close | Cancel form actions in ASP.NET MVC 3 RC ），以允许从我的 MVC 表单中取消和保存：](https://stackoverflow.com/questions/4263995/how-to-best-implement-save-save-and-close-cancel-form-actions-in-asp-net-mvc)

```
<form action="Xxxx" method="post" onsubmit="return validatePost()">
...
<input type="submit" name="actionType" value="Save" />
<input type="submit" name="actionType" value="Cancel" />
</form> 
```

使用称为 onsubmit 的 javascript：

```
function validatePost() {
    if(Blah blah){
        return true;
    }
} 
```

如果单击“保存”，我只想执行此 javascript 验证，但无法判断从 javascript 中单击了哪个按钮。

我尝试使用`document.forms[0].elements["actionType"].value`但无法获取 actionType 值，因为表单上有多个名为 actionType 的项目。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:36:04.147

您可以使用`id`（[http://jsfiddle.net/7p5N5/](http://jsfiddle.net/7p5N5/)）

```
<form method="post">
<input id="save" type="submit" name="actionType" value="Save" />
<input type="submit" name="actionType" value="Cancel" />
</form>

function validate() {
    alert('Validate');
    return false; // cancel click, true will submit
}

$("#save").click(function () {
    return validate();
}); 
```

如果不想使用`id`，可以使用`$('input[name="actionType"][value="Save"]')`选择保存按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:31:07.503

您是否能够仅收听“保存”输入的 onclick 事件并让它使用您的 validatePost 函数。

然后，您可以使用不同的功能来单击“取消”以执行适当的操作。

# javascript - TableSorter - 使用 colspan 选择排序

> ID：15663959
> 
> 赞同：1
> 
> 时间：2013-03-27T16:21:49.843
> 
> 标签：javascript, jquery, tablesorter

我正在使用 tablesorter 插件对表格进行排序。

**信息**

*   我有一个跨越两个不同的 td。我仍然需要进行排序，好像 th 是两个 th:s。
*   “Testing2”没有按预期工作。它应该对第三列进行排序。

**jsfiddle**

我已经更新了另一个人的 jsfiddle。因为我没有将他的整个代码直接粘贴到这里。

**jQuery**

```
$('table').tablesorter();
$('select').change(function(){
    var column = parseInt($(this).val(), 10),
        direction = 1, // 0 = descending, 1 = ascending
        sort = [[ column, direction ]];
    if (column >= 0) {
        $('table').trigger("sorton", [sort]);
    }
}); 
```

[http://jsfiddle.net/Yke6M/53/](http://jsfiddle.net/Yke6M/53/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T21:33:35.773

我认为最简单的解决方案是添加一个没有`colspan`（[演示](http://jsfiddle.net/Mottie/Yke6M/54/)）的隐藏行：

```
<table class="tablesorter">
     <thead>
         <tr>
             <th>Alphabetic</th>
             <th colspan="2" style="text-align: center;">Testing</th>
             <th>Animals</th>
         </tr>
         <tr class="hidden">
             <td></td>
             <td></td>
             <td></td>
             <td></td>
         </tr> 
    </thead>
    <tbody>
    ...
    </tbody>
</table> 
```

然后相应地修改您的下拉列表

```
<select>
    <option value="-">Choose a column</option>
    <option value="0">Alphabetic</option>
    <option value="1">Testing</option>
    <option value="2">Testing2</option>
    <option value="3">Animals</option>
</select> 
```

我不确定为什么我很难在 jsFiddle 中隐藏该行，但我最终将 css 修改为：

```
th, tbody td {
    background: #eee;
    border: 1px solid #ccc;
    padding: 10px;
}
tr.hiddden {
    display: none;
} 
```

# c# - 将 ObservableCollection 绑定为不同 CollectionViewSource 的源

> ID：15663965
> 
> 赞同：2
> 
> 时间：2013-03-27T16:21:59.973
> 
> 标签：c#, wpf, binding, observablecollection, collectionviewsource

我有一个应该绑定到两个s (和)的`ObservableCollection<MyClass>`名称。`myCollection``CollectionViewSource``AllItems``SelectedItems`

`AllItems`的源属性绑定到`myCollection`. `SelectedItems`的源属性应该绑定`myCollection`到`IsSelected == true`.

```
public class MyClass : INotifyPropertyChanged
{
    //fields and interface implementations
    public string Name {//proper code};
    public bool? IsSelected {//proper code};
}

// some where else in the MainWindow
AllItems.Source = myCollection;
SelectedItems.Source = myCollection.Where(input=>input.IsSelected==true); 
```

**问题：**加载 Window 时一切正常。但是当 中的`IsSelected`某些项目的值`myCollection`明显改变时，它对`SelectedItems`. 因此，为了克服这个问题，我`SelectedItems`每次`IsSelected`更改属性时都会更新源属性。

**问题：**如何进行此类绑定，以便无需手动更新源属性`SelectedItems`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:55:22.047

变化后`MyClass`你应该加注`PropertyChanged Event`。

如果您已经这样做了，那么您应该查看您`SelectedItems.Source`的调试模式。也许它已经存在正确的值，但它没有显示给你。

我的意思是如果`SelectedItems.Source`属于一些可见的元素 - GUI - 你应该在屏幕上刷新它。导致值存在的另一种方式，但在重新绘制屏幕上的元素之前不会显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:04:24.843

首先，您应该无条件地删除您的手动过滤设置，并将其替换为更合适的设置。替换什么的选择主要取决于您所针对的 .NET 版本。

如果以 .NET 4.5 为目标，那么一个简单的解决方案是在集合视图上启用[实时过滤。](http://www.jonathanantoine.com/2011/10/05/wpf-4-5-%E2%80%93-part-10-live-shaping/)

对于早期版本的 .NET，无论如何您都必须做一些手动工作，但最好只调用[`Refresh`](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.refresh.aspx)重新绑定控件的集合视图。为此，您应该通过[`Filter`](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionviewsource.filter.aspx)从 XAML 设置事件处理程序来将筛选推迟到集合视图本身。

# c# - 如何在不修改 C# 应用程序中的代码的情况下更改错误记录位置？

> ID：15663966
> 
> 赞同：1
> 
> 时间：2013-03-27T16:22:03.847
> 
> 标签：c#, nlog, file-location, exception-logging

我用于`Nlog`在我的 C# windows 应用程序中记录异常，并有一个名为的文件`LogConfig.cs`，其中包含有关存储这些异常的位置（路径）和文件名的所有详细信息。

现在，如果我想更改记录这些文件的位置，我需要修改代码。有没有办法在不更改代码的情况下更改记录异常的位置？

我试图避免仅仅为了更改保存位置的路径而将其构建到生产环境中。

将此信息（路径和文件名）存储在单独的文本文件中，并从中读取最佳方式。这样我就可以在生产中修改文本文件，而无需更改代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:22:37.177

您可以将所有日志记录配置（包括路径）[放入 NLog.config](http://nlog-project.org/wiki/Configuration_file)，并将其放在与 exe 文件相同的文件夹中。它将自动加载并由 NLog 应用。

# c# - ASP.net MVC 4 用户和角色管理（“Membership.Provider”属性必须是“ExtendedMembershipProvider”的实例。）

> ID：15663973
> 
> 赞同：16
> 
> 时间：2013-03-27T16:22:32.473
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我已经尝试了 2 天的工作，但到目前为止它毫无意义。我需要的是管理用户及其角色，仅此而已。

我尝试的是了解如何在 MVC 中执行此操作，但我似乎无法在 Internet 或任何 MVC 4 书籍中找到有关如何执行此操作的详细教程。

我首先使用 aspnet_regsql 实用程序启用 aspnet 数据库，这将创建这些表：

![aspnet_regsql 添加的表](../Images/8462c9301e9fd1024da5889333e72bea.png)

这就是我在本教程中找到的全部内容，它没有显示如何与这些表进行交互（我假设是使用默认的成员资格提供程序），到目前为止，我发现有 3 个主要选项可以做到这一点：

*   默认会员提供者（我对此一无所知）
*   通用提供商
*   简单会员

我找到了这个教程：

[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-7)

在这里，他们要求使用 Internet 应用程序模板创建一个新的 MVC 4 应用程序项目，并复制与帐户控制相关的所有文件。

我是为我的项目这样做的，但是一旦我尝试登录，我就会得到：

要调用此方法，“Membership.Provider”属性必须是“ExtendedMembershipProvider”的一个实例。

根据这个论坛： [http ://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/d352bb1b-577c-42b7-8872-5ed59cd65f32/](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/d352bb1b-577c-42b7-8872-5ed59cd65f32/)

是因为我如何在 web.config 文件中定义配置文件、成员资格和 roleManager 提供程序，该文件定义如下：

```
<profile>
  <providers>
    <clear />
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="DatabaseConnection" applicationName="/" />
  </providers>
</profile>
<membership>
  <providers>
    <clear />
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="DatabaseConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership>
<roleManager enabled="true">
  <providers>
    <clear />
    <add connectionStringName="DatabaseConnection" applicationName="/" name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" />
    <add applicationName="/" name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" />
  </providers>
</roleManager> 
```

我所需要的只是能够添加新用户、为他们分配角色并根据访问视图的角色显示不同的内容。

**问题 #1** 当我使用 Internet 应用程序模板创建 MVC 4 应用程序时，使用的成员资格提供程序是什么？

**问题2**

我对 web.config 文件做错了什么？如何正确定义提供者？

**问题 #3**

哪个选项更适合我？如果你知道一个很好的教程，你能把我链接到它吗？

**任何帮助将不胜感激！提前致谢！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T17:03:24.287

您使用的会员服务提供商已过时。新的[通用成员资格提供程序](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)使用不带前缀的新表名`aspnet_`。

1) 请查看 Scott Hanselman 的链接。

2）`profile`如果你不使用它，你不需要它。`roleManager`配置不正确。

仅供参考：请`machineKey`在 web.config 中明确定义；它将为您节省很多未来的麻烦。

PS我同意你的看法。我刚读完`Pro ASP.NET MVC 4 by Adam Freeman`；他没有提到会员提供者。`ASP.NET MVC 4 and the Web API by Jamie Kurtz`如果您想阅读，请使用旧版 Membership Provider。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T19:48:40.027

问题 #1 当我使用 Internet 应用程序模板创建 MVC 4 应用程序时，使用的成员资格提供程序是什么？

答案：SimpleMembershipProvider

问题 #2 我对 web.config 文件做错了什么？如何正确定义提供者？

答：对于 SimpleMembershipProvider，不需要修改 web.config 文件。有关详细的配置/设置信息和教程，请参见此处：http: [//aaron-hoffman.blogspot.com/2013/02/aspnet-mvc-4-membership-users-passwords.html](http://aaron-hoffman.blogspot.com/2013/02/aspnet-mvc-4-membership-users-passwords.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-19T10:22:36.057

成员资格和安全性在 ASP.Net 中过于复杂，在 ASP.NET MVC 中仍然过于复杂。但幸运的是，完全可以不使用内置成员资格。我已经创建了简单的解决方案并在很多项目中使用，现在将其添加到 github，请参阅[http://github.com/TesserisPro/ASP.NET-SImple-Security-Provider](http://github.com/TesserisPro/ASP.NET-SImple-Security-Provider)您可以轻松自定义它。

# c# - 如何从代码隐藏文件中比较（小于或等于）C# 中的两个 sql 列

> ID：15663974
> 
> 赞同：0
> 
> 时间：2013-03-27T16:22:35.560
> 
> 标签：c#, asp.net, sql-server, tsql

我坚持将组合框值与 SQL 列进行比较。我正在尝试使用 C# 从 VS 2010 开始。我正在使用 SQL Server 2008。

请在下面找到我的 SQL 表。

```
Rings  NR     Name  Dia
=======================
10     12     a     15  
10     24     b     18  
10     15     c     21  
10     9      d     24  
10     7      e     15  
10     19     f     18  
10     33     g     24  
10     36     h     13 
```

我正在尝试比较`Rings`列和`NR`列的值。

我的 SQL 查询是这样的。

```
select * from tblData  where Dia=15 and (Rings<=NR) 
```

我能够在 SQL 中成功运行此查询并获得所需的结果，但我坚持在 C# 中实现这一点。如何比较 C# 中的两列？

我的 C# 代码是：

```
 string connectionString = ConfigurationManager.ConnectionStrings["QuoteProjectConnectionString"].ConnectionString;
 using (SqlConnection connection = new SqlConnection(connectionString))
 using (SqlCommand command = connection.CreateCommand())
 {
     {
         try
         {
            int a = Convert.ToInt32(cmbbx.SelectedItem.Text);
            command.CommandText = "Update tblData set Rings= " + 
                                     cmbbxRings.SelectedItem.Text+" ";
            connection.Open();
            command.ExecuteNonQuery(); 
            command.CommandText = "(select * from tblData where Dia=" + 15 +
                                     " and NR="+(a)<="NR"")";
            command.ExecuteNonQuery(); 
         }
         catch (SqlException ex)
         {
         } 
```

我正在努力用 C# 编写这部分查询：

```
 (NR="+(a)<="NR) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:38:41.553

首先，你应该使用用户参数来避免sql注入。尝试进行以下更改，这应该可以解决您的问题，并将使用更好的方法从 C# 执行查询，避免 Sql 注入。

替换这部分代码：

```
command.CommandText = "(select * from tblData where Dia="+15+" and NR="+(a)<="NR"")"; 
```

使用此代码：

```
command.CommandText = "select * from tblData where Dia=@Dia and NR<=@NR";
command.Parameters.Add(new SqlParameter("@Dia", 15));
command.Parameters.Add(new SqlParameter("@NR", a)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:09:32.593

尝试显而易见的。
如果查询在 SQL 中有效，那么为什么不使用它呢？

```
command.CommandText = "select * from tblData  where Dia=15 and Rings<=NR"; 
```

# ios - 支持 Storyboard 中 UIViewController 的纵向模式

> ID：15663977
> 
> 赞同：0
> 
> 时间：2013-03-27T16:22:38.727
> 
> 标签：ios, objective-c, xcode, ios6, xcode4.6

我使用情节提要创建了 UIViewController 并将其链接到 UIViewController 类。

我想让我的 UIViewController 只支持肖像方向，我尝试了打击代码，但它似乎不起作用。我的 UIViewController 仍然旋转。

我需要更改情节提要中的任何属性吗？

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

     return ((interfaceOrientation == UIInterfaceOrientationPortrait) || (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T16:25:03.280

`shouldAutorotateToInterfaceOrientation`在 iOS6 中已弃用，您应该使用`shouldAutoRotate`& `supportedInterfaceOrientations`。

在您的 viewController 中尝试这样的操作。

```
- (BOOL)shouldAutorotate {
    return NO;
}

- (BOOL)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:50:51.080

我在这里找到了答案： [iOS 6 shouldAutorotate: is NOT being called](https://stackoverflow.com/questions/12775265/ios-6-shouldautorotate-is-not-being-called)

**我的 UIViewController 由 UINavigationController 管理，它在 iOS 6 中控制它的方向：**

**现在，iOS 容器（例如 UINavigationController）不会咨询它们的子容器来确定它们是否应该自动旋转。默认情况下，应用程序和视图控制器支持的界面方向设置为 iPad 惯用语的 UIInterfaceOrientationMaskAll 和 iPhone 惯用语的 UIInterfaceOrientationMaskAllButUpsideDown 。**

我必须使用新的**shouldAutorotate**和**supportedInterfaceOrientations子类 UINavigationController**

我看到其他帖子更喜欢添加类别而不是子类化。但对我来说，子类化工作正常。

# javascript - 查找 .click 函数的类

> ID：15663978
> 
> 赞同：0
> 
> 时间：2013-03-27T16:22:40.177
> 
> 标签：javascript, jquery, json, html

我有一个从 JSON 对象中获得的书串对象。这个 Book 对象有三个键值对，Title、Author 和 URL。我使用 for 循环来读取每个对象，并将对象的标题作为按钮放在 html 页面上。但是，当单击按钮时，我希望提醒该书的 URL。当我阅读这些对象时，我制作了 Books 对象并将其推入一个数组以供以后使用。但我无法使用 .Click() 方法 URL 不正确。请查看代码以获得更好的理解。:-)

```
for (i = 0; i < 6; i++) //I know that there is only 65 Books..jsonString.books.lenght is not working.
{
    var title = jsonString.books[i].title;
    var classname = title.replace(/\s/g, "");
    var author = jsonString.books[i].author;
    var URL = jsonString.books[i].url;
    var htmlString = '<div class="' + classname + '"><input type="button" value="' + title + '"></div>';
    $(htmlString).appendTo(attachPoint).click(function () {
        loadBook(URL);
    });

    OneBook = new Book(author, title, URL);
    arr.push(OneBook);
} 
```

attachpoint 是我从中获得的 html 文件中的引用

```
var attachpoint=document.querySelector('.buttonAttachPoint'); 
```

所以在上面的代码中，我点击的 URL 始终是 jsonString 中的最后一个对象。这是因为 for 循环而发生的。那么有没有一种方法可以获取具有 onclick 或按钮标题的 Div 的类名，以便我可以从我创建的对象数组中获取 URL？或者有没有更简单的方法。也有人能指出为什么“jsonString.books.lenght”不起作用？在此先感谢。:-) 非常感谢所有帮助。:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T16:30:19.107

使用立即调用的函数表达式创建闭包应该可以解决问题。只需替换这个：

```
$(htmlString).appendTo(attachPoint).click(function () {
    loadBook(URL);
}); 
```

有了这个：

```
(function(URL) {
    $(htmlString).appendTo(attachPoint).click(function () {
        loadBook(URL);
    });
})(URL); 
```

`URL`在该匿名函数的范围内将具有传递给它的值，这将是该`for`循环迭代的正确值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T16:35:44.263

在 ECMAScript 中，变量的作用域是它们的函数，而不是任何块。

您要绑定的函数在整个循环的上下文中`click`具有闭包，而不是在循环迭代的上下文中。`URL``URL`

这意味着无论何时调用任何函数，都`URL`将具有循环设置的最后一个值。

您需要冻结`URL`每个循环的值。做到这一点的一种方法是在其他地方有一个函数`URL`作为参数，并返回一个关闭它的函数，因此：

```
function getBookLoader(url) {
  return function (){
    loadBook(url);
  };
} 
```

然后，您可以将您的`... .click`行替换为以下内容：

```
$(htmlString).appendTo(attachPoint).click(getBookLoader(URL)) 
```

要回答标题中的问题，事件的属性包含`target`事件被分派到的对象，而`currentTarget`属性包含当前正在评估其侦听器的对象。 `currentTarget`应该是有`div`问题的。

# javascript - 第一个函数完成后如何触发函数调用

> ID：15663980
> 
> 赞同：0
> 
> 时间：2013-03-27T16:22:47.943
> 
> 标签：javascript, backbone.js, event-handling

我正在使用 Backbone.js，并且我处于一个`this.search.searchGoogle(searchTerm)`触发其他函数调用的主要函数调用的状态。但是，在我的主要函数调用之后的下一行是另一个函数调用`this.search.cleanView`，,。问题是有时第二个调用在主要功能完成之前被调用。

```
 addNewPlace: function(e) {

      var searchTerm = this.$el.find("input").val();
      var poi = new vrboPoi({
        title: searchTerm,
        lat: this.options.vrbo_place.lat,
        lng: this.options.vrbo_place.lng
      });

      var target = $(e.target),
           index = target.closest("ul.pois").children().index(target.parent())
      this.search = new match({
        model: poi
      });

      this.search.render();

      this.search.searchGoogle(searchTerm);           
      this.search.bind("place:selected", this.placeSelected, this);

      // setTimeout( 
      //   this.search.cleanView, 500 
      //  );
      e.preventDefault();
  } 
```

有没有办法防止在完成`this.search.cleanView`之前被调用`this.search.searchGoogle(searchTerm)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:24:31.990

如果它是异步的，则不是。您将不得不进行`searchGoogle`回调或引发事件。

# c# - 带有私有构造函数的 C# 单元测试类？

> ID：15663983
> 
> 赞同：8
> 
> 时间：2013-03-27T16:22:55.380
> 
> 标签：c#, .net, unit-testing, nunit

好的，所以我刚刚得到一个任务，我必须对具有私有构造函数的类执行单元测试。

现在，当所有方法也是非静态的时，我想如何在不初始化类的情况下进行单元测试。

有什么方法可以对具有私有构造函数的类进行单元测试（不进行反射）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T20:56:55.037

如果您无法公开该类，您仍然可以通过以下方式创建它的实例来轻松测试它：

```
var anInstance = (YourPrivateClass)Activator.CreateInstance(typeof(YourPrivateClass), true); 
```

这将为您提供一个类的实例，然后您可以填充该实例。

另一个有用的测试位是，如果您有内部方法（不是私有的），您可以通过使内部对您的测试类可见来访问它们。您使用内部方法在类的 assemblyinfo.cs 中添加这一行：

```
[assembly: InternalsVisibleTo("YourSolution.Tests")] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T16:27:40.477

如果这个类有一个私有构造函数，这是要公开使用的吗？如果没有，最好不要对其进行单元测试。如果是这种情况，公开的代码应该通过调用它来测试它本身。

单元测试用于测试公众使用的内容——例如，通过在应用程序层之间连接代码。输入，我想要这个输出。这就是单元测试的真正意义所在。单元测试并不关心实际方法中的内容。只要它返回您想要的内容，执行所需的操作，您就可以通过。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T16:25:54.337

您应该通过公共 API 进行测试——必须以*某种*方式实例化和使用您要测试的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T17:08:08.103

通常编写和运行单元测试以确保代码符合其设计并按预期运行。

创建一个`non-static`不能在其上创建实例的类，即仅私有构造函数，可能永远不会有用，换句话说，它是 never `Unit Testable`。

为了可单元测试：

1.  您应该能够创建该类的实例。
2.  可测试函数应该是**Public 或 Internal**。您可以通过将您的程序集作为[朋友程序集来测试内部功能](http://msdn.microsoft.com/en-us/library/0tke9fxk%28v=vs.80%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T19:58:34.923

它可能是一个单例，并且您不想要该类的公共构造函数。用以下方式装饰构造函数：[ExcludeFromCodeCoverage]

# android - 使用 Android PDF Writer 但不支持中文

> ID：15663987
> 
> 赞同：0
> 
> 时间：2013-03-27T16:23:01.393
> 
> 标签：android, pdf

我使用[这个网站](http://sourceforge.net/projects/apwlibrary/)的源代码来创建一个新的 PDF 文件，它可以工作。

问题是我在PDFWriteDemo.java中写中文的时候： mPDFWriter.addText(70, 50, 12, "各位好"); ，无法正常显示PDF文件中的字符。

相反，它显示`???`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:35:47.280

尝试更改此行：

```
 outputToFile("helloworld.pdf",pdfcontent,"ISO-8859-1"); 
```

至：

```
 outputToFile("helloworld.pdf",pdfcontent,"UTF-8"); 
```

# 更新

考虑到可能是编码问题，您需要按照以下顺序更改字体和编码：

首先我们发现在 中`PDFWriterDemo.java`，这一行定义了 Font 和 encoding：

```
mPDFWriter.setFont(StandardFonts.SUBTYPE, StandardFonts.COURIER, StandardFonts.WIN_ANSI_ENCODING); 
```

其中`mPDFWriter`是在 中定义的类`PDFWriter.java`。

如您所见，`PDFWriter.java`有一种方法：

```
 public void setFont(String subType, String baseFont, String encoding) {
                    mCurrentPage.setFont(subType, baseFont, encoding);
            } 
```

类在哪里`mCurrentPage`定义`Page.java`

在此处`Page.java`

```
 public void setFont(String subType, String baseFont, String encoding) {
            IndirectObject lFont = mDocument.newIndirectObject();
            mDocument.includeIndirectObject(lFont);
            lFont.setDictionaryContent("  /Type /Font\n  /Subtype /" + subType + "\n  /BaseFont /" + baseFont + "\n  /Encoding /" + encoding + "\n");
            mPageFonts.add(lFont);
    } 
```

然后你会发现实际上他们并没有将字体嵌入到包中，他们只是提供了一个字体的名称，并且使用正确的编码，PDF阅读器会自动加载它们。

因此我认为的解决方案是编辑`StandardFonts.java`添加PDF标准字体以呈现中文字符和正确的编码。

# jquery - 在 textarea 中添加图片标题

> ID：15663991
> 
> 赞同：0
> 
> 时间：2013-03-27T16:23:06.483
> 
> 标签：jquery, textarea, append, image, title

我需要添加`<img> tag title=""`到中的解决方案`textarea`，但不删除任何现有文本。就像`.after();`或`.append();`。这是[小提琴](http://jsfiddle.net/XrKuy/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:25:23.690

我相信你正在寻找`$('textarea').append(' '+title+' ');`而不是`$('textarea').val(' '+title+' ');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T16:43:25.410

您可以使用本机 javascript 选择器：

```
document.getElementById('message').value += ' '+title+' '; 
```

然后它工作正常。

这是您使用此解决方案的 jsFiddle： [jsFiddle](http://jsfiddle.net/kay82/XrKuy/2/)

# jsf - 从以编程方式创建的 JSF 代码引用其他元素以进行重新呈现

> ID：15663993
> 
> 赞同：0
> 
> 时间：2013-03-27T16:23:10.373
> 
> 标签：jsf, richfaces

我正在使用 Apache MyFaces lib 创建 JSF 标签，例如 HtmlAjaxCommandLink。有一个方法 setReRender(parameter) 来识别相应的元素，它应该得到更新。在我的 HTML 源代码中，相应的锚点具有一个值为“subformContainer_7_facesMessagesContainer”的 id 属性。

我必须设置什么作为参数？提前致谢。

目前该区域（at：div）根本没有重新渲染。为了评估该区域是否被重新渲染，我使用了一个 randomNumberString，所以我应该识别值是否发生变化。

```
String rrString = "subformContainer_7_facesMessagesContainer";System.out.println("DEBUG rrString : " + rrString);
treeResizeButton.setReRender(rrString); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T17:31:53.753

如果你想告诉 JSF 在当前的 Ajax 请求中重新渲染一个组件，你可以使用 API for [PartialViewContext](http://docs.oracle.com/javaee/6/api/javax/faces/context/PartialViewContext.html)：

```
PartialViewContext partialViewCtx = FacesContext.getInstance().getPartialViewContext();
partialViewCtx.getRenderIds().add("putYourClientIdHere") 
```

或者，如果您使用 OmniFaces 库，您可以简单地使用[Ajax#update](http://omnifaces.org/docs/javadoc/current/org/omnifaces/util/Ajax.html#update%28java.lang.String...%29)。

# mysql - MySQL：在 INSERT `tablename` SELECT * FROM `data source` 期间将重复记录传输到另一个表

> ID：15663995
> 
> 赞同：1
> 
> 时间：2013-03-27T16:23:11.907
> 
> 标签：mysql, sql

我正在从 过渡`MS Access`到`MySQL`. 使用 Access，我可以在表之间复制和粘贴数据，任何重复项都将自动放置在表中`paste_errors`。我怎样才能做到这一点`MySQL`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:27:37.050

您可以尝试[创建一个`Trigger`](http://dev.mysql.com/doc/refman/5.0/en/create-trigger.html). 查看这篇[SO 帖子](https://stackoverflow.com/questions/11940506/mysql-on-duplicate-key-insert)，它将概述两种方法。