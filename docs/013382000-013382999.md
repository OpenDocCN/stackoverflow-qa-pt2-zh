# StackOverflow 问答 13382000-13382999

# javascript - JS 函数将 Javascript 返回到浏览器而不是预期的 Ajax 帖子

> ID：13382000
> 
> 赞同：1
> 
> 时间：2012-11-14T15:38:18.100
> 
> 标签：javascript, ajax

我发誓这曾经有效。我正在尝试做面包屑。我在名为“breadcrumb”的全局命名空间中有一个 JS 函数。它接受一个字符串作为其唯一参数：

```
function breadcrumb(attr) {
  hash = { type: "POST", url: "brands/get_attributes", data: $("#attributeform").serialize() };
  $.ajax(hash);
  return false;
} 
```

我在 HTML 页面上有我的面包屑链接，定义如下：

```
<a href="javascript:breadcrumb(\'<%= brand_attribute.attributename %>\');"><%= value %></a> 
```

到目前为止还好。但是当我点击面包屑链接时，我会在 URL 中得到这个：

```
javascript:breadcrumb('Whirlpool'); 
```

还有一个带有“false”字样的空白页，这就是函数返回的内容。我的问题是，为什么它实际上导航到 javascript 函数本身？为什么没有呈现 Ajax 结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:44:51.537

更改`href`为`onclick`：

```
<a href="#" onclick="return breadcrumb(\'<%= brand_attribute.attributename %>\');"><%= value %></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:15:22.430

使用 onclick 而不是 href。此外，我的强迫症建议进行以下语法更改：

```
var hash = { //use braces to define an object
               type: "POST", 
               url: "brands/get_attributes", 
               data: $("#attributeform").serialize()
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:44:15.340

这是因为您的 <a> 标签的 href 不包含 void(0); 最后声明，所以你的面包屑函数的值被返回给浏览器。

尝试改变：

```
href="javascript:breadcrumb(\'<%= brand_attribute.attributename %>\');" 
```

到：

```
href="javascript:breadcrumb(\'<%= brand_attribute.attributename %>\');void(0);" 
```

编辑：我也同意 jakubka 的回答，将 javascript 调用保留在链接的 onclick 属性中而不是 href 会是更好的做法。

所以，

```
href="#" onclick="breadcrumb(\'<%= brand_attribute.attributename %>\');" 
```

# django - 在相关集上使用自定义对象管理器

> ID：13382005
> 
> 赞同：1
> 
> 时间：2012-11-14T15:38:29.380
> 
> 标签：django, django-templates, django-views

我试图打印出 4 个条目。只要我没有任何未发表的条目，它就可以工作。

如何从我的“已发布”管理器中获取仅包含对象的查询集？

现在我使用： {% if benefit.status == "p" %} 不打印那些未发布的条目，但是未发布的条目会影响切片计数。

```
#views.py:

class PackageListFrontpage(ListView):
    context_object_name = "package_frontpage_list"
    template_name = "frontpage.html"
    queryset = Package.published.all().order_by('order')[:5]

#frontpage.html

{% for package in package_frontpage_list %}
<div>
    <h3>{{ package.name }} >></h3>
        <ul>
            {% for benefit in package.benefit_set.all|slice:":4" %}
              {% if benefit.status == "p" %}
                  <li><a href="{{ benefit.get_absolute_url }}">{{ benefit.name }}</a></li>
              {% endif %}
            {% empty %}
            <li>There are no published benefits in this package</li>
            {% endfor %}
        </ul>
</div>
{% endfor %} 
```

我想有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:46:36.803

您可以在`Package`模型上定义一个方法，该方法返回已发布的相关利益的查询集。

```
class Package(object):
    ...
    def benefit_set_published(self):
        """
        Return the related benefits which are published
        """
        return self.benefit_set.filter(status="p") 
```

然后将您的模板更改为：

```
 {% for benefit in package.benefit_set_published.all|slice:":4" %}
              <li><a href="{{ benefit.get_absolute_url }}">{{ benefit.name }}</a></li>
        {% empty %}
        <li>There are no published benefits in this package</li>
        {% endfor %} 
```

# wcf - 在 IIS 7 中托管启用 ajax 的 wcf 服务

> ID：13382016
> 
> 赞同：2
> 
> 时间：2012-11-14T15:39:07.323
> 
> 标签：wcf, iis-7, 64-bit, svc

我已经在 IIS 中部署了一个 asp.net mvc 应用程序，该应用程序已成功部署并且工作正常。我在我的应用程序中使用了启用 ajax 的 wcf 服务，问题是当我想使用该服务的方法时。我收到未找到错误，但是当我浏览查看它给出的页面说您的服务是托管的服务时，我无法访问已部署的启用 ajax 服务的方法。请帮帮我。

**需要注意的事情..** 我的服务托管为扩展名为 .svc 的文件 我在 windows server 2008 r2 64 位上部署了应用程序，但我将应用程序池配置为在 32 位下工作。服务是可访问的，但服务的方法是不允许的。

提前致谢。阿桑·诺曼尼。

# jquery - 单击选项卡时，Jquery fadeIn() 不起作用

> ID：13382021
> 
> 赞同：0
> 
> 时间：2012-11-14T15:39:28.987
> 
> 标签：jquery, fadein

嗨，我有 3 个选项卡，其内容由 jquery hide 和 fadeIn() 填充。一切正常，但是**当我们非常快速地单击每个选项卡时，内容会合并**例如：第一个选项卡可能包含第二个选项卡内容。

注意：缓慢点击每个选项卡时效果很好，只有速度和连续点击会导致问题

**查询：**

```
 $('.secondtab').on('click',function(){

$('.firsttabcontent,.thirdtabcontent').hide();
removeActiveTab();
$(this).addClass('activeclasstab');

$('.secondtabcontent').hide().fadeIn();

});

$('.firsttab').on('click',function(){
$('.secondtabcontent,.thirdtabcontent').hide();
removeActiveTab();
$(this).addClass('activeclasstab');

$('.firsttabcontent').hide().fadeIn();

});
$('.thirdtab').on('click',function(){
$('.secondtabcontent,.firsttabcontent').hide();
removeActiveTab();
$(this).addClass('activeclasstab');

$('.thirdtabcontent').hide().fadeIn();

}); 
```

请帮忙解决这个问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:59:04.077

最后我得到了解决方案。当快速单击选项卡时，我使用[stop()来防止选项卡之间的内容重叠。](http://api.jquery.com/stop/)

```
$('.secondtab').on('click',function(){

$('.firsttabcontent,.thirdtabcontent').hide();
$('.secondtabcontent').stop().hide().fadeIn();

}); 
```

# java - 当我将 scala 性质添加到 Eclipse 中的项目时收到错误

> ID：13382022
> 
> 赞同：0
> 
> 时间：2012-11-14T15:39:29.860
> 
> 标签：java, eclipse, scala

如何在 Eclipse 中使用 scala 和 java？当我将 scala 性质添加到我的项目中时，我收到以下错误：

> 构建过程中发生错误。在项目“my-scala-java-project”上运行构建器“Scala Builder”时出错。scala/工具/nsc/settings/MutableSettings$SettingValue

我正在使用带有 Scala 版本 2.0.2 的 Eclipse Helios

有没有我遗漏的步骤，或者这可能是 Eclipse/Scala 插件错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:54:21.890

Scala IDE 正在快速开发中，我建议先更新到最新版本，如果不能解决问题，请联系[scala-ide-user group](https://groups.google.com/forum/?fromgroups#!forum/scala-ide-user)的开发人员。

顺便说一句[，这个线程可能会](https://groups.google.com/forum/#!msg/scala-ide-user/TSQ0F4r86QU/tQtCMzwdAAEJ)帮助您入门。

# javascript - 刷新页面并更改 URL 的 ID

> ID：13382030
> 
> 赞同：-1
> 
> 时间：2012-11-14T15:39:40.610
> 
> 标签：javascript, html, css, zurb-foundation

我正在尝试制作带有标签内容的页面。我正在使用基础选项卡 (http://foundation.zurb.com/docs/tabs.php)。

我在元素之外创建了一个链接`<dl></dl>`，如果我只使用`<a href="#simple5">`. 我尝试了一个 javascript 来重新加载页面`<a href="#simple5" onClick="window.location.reload( true );">`，但也不起作用。

我该如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:50:17.883

当您在单击时调用 JS 时，它会在默认操作之前运行。您重新加载没有标签的页面。

尝试使用 JS 添加 ID：`<a href="#" onClick="window.location = '#simple5'; window.location.reload(true);">`

您还可以使用 et 函数并动态获取 id。

* * *

对不起，我的英语不好。^-^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:45:05.837

您不必手动执行`location.reload`. 导航到新哈希将更新 URL，而无需重新加载页面。如果 DOM 中的元素具有 ID `simple5`，浏览器将滚动到该元素。

您还可以手动查看哈希更改事件（或反复检查 URL 是否有更改，对于不支持该事件的浏览器），并执行诸如切换到某个选项卡之类的操作。

这是如果您希望在浏览器历史记录中反映选项卡之间的切换。如果您不希望在浏览器历史记录中留下标记，您可能希望拦截链接点击，提取`href`以用作显示哪个选项卡的指示器，执行选项卡更改，并阻止浏览器跟踪链接（这样就不会发生实际的哈希更改）

# r - R中属性的模式匹配

> ID：13382034
> 
> 赞同：1
> 
> 时间：2012-11-14T15:39:57.400
> 
> 标签：r

是否有任何模式匹配方法可以循环遍历 R 中的变量列表？

我很清楚使用索引，但是到目前为止，我还没有发现循环中的多个属性。

我所拥有的是：

```
x <- c(1, 2, 3, 4)
y <- c(4, 3, 2, 1)
for (i in 1:length(x)) {
    x[i]
    y[i]
} 
```

我想拥有：

```
x <- c(1, 2, 3, 4)
y <- c(4, 3, 2, 1)
for ((xi, yi) in c(x, y)) {
    xi
    yi
} 
```

问候！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:34:01.023

不，R 不允许您以这种方式解包值。您只能将序列中的每个元素分配给单个变量。

见这里： [http ://cran.r-project.org/doc/manuals/R-lang.html#for](http://cran.r-project.org/doc/manuals/R-lang.html#for)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:13:04.290

您可以使用`mapply`而不是`for`循环：

例如，

```
mapply(c, x, y) 
```

使用相同索引中 的`c`所有值运行函数，即等。`x``y``x=1``y=4`

```
 [,1] [,2] [,3] [,4]
[1,]    1    2    3    4
[2,]    4    3    2    1 
```

也可以定义新函数：

```
mapply(function(xi, yi) "your function", x, y) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:11:41.183

看一下 foreach 包：

> [http://cran.r-project.org/web/packages/foreach/index.html](http://cran.r-project.org/web/packages/foreach/index.html)

我想你会用 foreach() 函数找到你想要的。

# php - mod_rewrite 和 301 在同一个 htaccess 中重定向

> ID：13382036
> 
> 赞同：1
> 
> 时间：2012-11-14T15:40:01.083
> 
> 标签：php, .htaccess, mod-rewrite

我有以下 .htaccess 文件：

```
RewriteEngine on
Options +FollowSymLinks

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule (.*)$ ./page.php?name=$1 
```

我还有大约 20 个不同的静态地址，我想做 301 重定向。

它应该看起来像：

```
Redirect 301 http://www.example.com/category.php?id=3 http://www.example.com/books
Redirect 301 http://www.example.com/articles.php?id=124 http://www.example.com/birds 
```

我尝试了所有方法并失败了。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:33:37.147

我猜你在重定向示例中的一组SEO**友好****URL**之后，如果是这种情况，那么你不想要浏览器重定向，而是你想要一个内部重定向或别名，例如

 **```
RewriteRule ^/?books /category.php?id=3    [L]
RewriteRule ^/?birds /articles.php?id=124  [L] 
```

如果您有许多规则并且可以访问**httpd.conf**，您可能需要考虑重写映射文件和规则。

根据您在下面的评论，如果您想强制用户/爬虫使用新的 URL 结构，那么您需要在文件中添加一组额外的重写规则（而不是重定向），例如

```
RewriteCond %{THE_REQUEST}      /category\.php     [NC]
RewriteCond %{QUERY_STRING}     ^id=3  [NC]
RewriteRule ^.*                 http://%{HTTP_HOST}/books?   [R=301,L] 
```

**仅供参考：**如果您不清楚上述规则的作用，或者如果您想要更抽象的东西，请考虑以下[帖子](http://www.experts-exchange.com/A_4043.html)，Apache [mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)文档值得一读。**

# sql-server - sql中的=*运算符

> ID：13382038
> 
> 赞同：8
> 
> 时间：2012-11-14T15:40:03.447
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我一边打字，一边用肥手指点东西，当我打字的时候

```
=* 
```

在 sql 窗口（2008 SSMS 连接到 2005 服务器）中，它变成蓝色作为关键字。

我无法弄清楚，或者谷歌，这是做什么的。我知道 *= 但不知道 =*

这个运营商是做什么的？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-14T15:41:08.147

`=*`是一种编写右外连接的旧方法。例如：

```
select  *
from    A
right outer join
        B
on      A.bid = B.id 
```

用旧式写成，如：

```
select  *
from    A
,       B
where   A.bid =* B.id 
```

# php - Sphinxsearch _maxmatches

> ID：13382040
> 
> 赞同：0
> 
> 时间：2012-11-14T15:40:11.580
> 
> 标签：php, search, sphinx

I`m using SetLimits $max_matches=50000

I need it to display the sql items faster, without search filter.

Everything works fine on my local machine.

The problem apears on the production machine when I set _maxmatches more than 10000.

Thanks

# c++ - access class by ip

> ID：13382043
> 
> 赞同：1
> 
> 时间：2012-11-14T15:40:26.277
> 
> 标签：c++, sockets, ip

I'm currently working on a UDP server. I want to redirect all incoming packets to the connected clients by using the ip address and port. My current way of doing it looks like this:

```
class Connection;
typedef std::map<unsigned short, Connection*> PortMap;
typedef std::map<unsigned int, PortMap> AddressMap; 
```

So I'm basically using two maps. The second one contains a map of all the ports using an ipv4 address(unsigned int) as a key. The PortMap uses the port as the key and it contains a pointer to the Connection class(the clients).

I speed tested it by accessing 64 clients using randomly generated ips and ports and it took ~ (**EDIT** : 0.4 milliseconds) to access 64 different clients 64 times. I don't know really if it's slow or not. Of course it depends on the system I'm running the test on.

Here's how I'm accessing the client using the address:

```
Client * GetClient(Address address)
{
    AddressMap::iterator ipIt;
    PortMap::iterator portIt;
    unsigned int ip = address.GetAddress();
    unsigned short port = address.GetPort();

    /// Does the ip exist?
    if((ipIt = clientAddresses.find(ip)) == clientAddresses.end())
    {
        return NULL;
    }

    /// Does the port exist?
    if(clientAddresses[ip].find(port) == clientAddresses[ip].end())
    {   
        return NULL;
    }

    return clientAddresses[ip][port];
} 
```

Does anyone know another faster way of doing it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:43:39.247

64 次访问需要 400 毫秒的地图听起来非常慢……检查你的测量结果。您的映射可能应该基于 IP 和端口的组合（不是单独的），因为 NAT 可以组合特定 IP 下的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:27:30.587

也许将IP和端口结合起来会更好..

端口 < 65535。您可以获得密钥：IP * 65535 + 端口，它对于所有端口和 IP 都是唯一的。

关于速度：比如我们有N个IP，每个IP有M个端口。

搜索地图具有高效的 N log(N)，因此您的搜索需要 N*M*log(N)*log(M)。如果将 IP 和端口合二为一，则效率为 N*M*log(N*M)。log(N*M) = log(N)+log(M) < log(N)*log(M)，对于大 N，M..

所以，我认为它会更好。

# c# - How to create daily forms with ASP.NET MVC automatically

> ID：13382045
> 
> 赞同：0
> 
> 时间：2012-11-14T15:40:44.170
> 
> 标签：c#, asp.net-mvc-3

I have a web project with some forms in it. Every user on my web project should get an empty form ready to fill for everyday.

Is there anyway to Create a simple empty form with only `id`, `name`, `activity` fields, all automatically done by server everyday in MVC?

It can be timer that watches system time and creates a new form when a new day beguns or it can be another trick that i cant even think of.

Just show me ways to create forms every new day automatically.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:51:58.523

为什么不检查用户当天是否已经提交了表单，如果还没有，则显示该表单。您可以将日期保存在表单的隐藏字段中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:05:45.607

[在 ASP.NET 中实现计划任务很困难](https://stackoverflow.com/questions/542804/best-way-to-run-scheduled-tasks)。如果您的唯一目标是在数据库表中创建新行，请使用[SQL Server 作业](http://msdn.microsoft.com/en-us/library/ms187880.aspx)（假设您有 SQL Server）。

如果它比这更复杂（例如发送电子邮件），您可以在链接问题的答案中提供一些选项。我通常会创建一个简单的控制台应用程序并使用 Windows 任务计划程序对其进行计划，但这取决于任务的范围。

# android - Accelerometer: different values on different devices?

> ID：13382046
> 
> 赞同：3
> 
> 时间：2012-11-14T15:40:46.400
> 
> 标签：android, accelerometer

I am needing to implement a shake recognizer, and I am using the accelerometer on the device to that. However, when I check the values I get from the sensor, it appears that they vary wildly from device to device. For instance, I get a value range of 0-8 as force (after some calculations) on one device, and on the other 0 - 4\.

So it looks like they have very different ranges.

Is there anything I can do to make these ranges equal. Or are there some variables that I can use to somehow calculate what a fairly hard shake would be?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:45:34.853

According to [specification](http://developer.android.com/guide/topics/sensors/sensors_overview.html) accelerometer should return `Measures the acceleration force in m/s2`. So it should be calibrated. One thing you could check however is the [`Sensor`](http://developer.android.com/reference/android/hardware/Sensor.html) class's `getMaximumRange()` and `getResolution()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:55:09.823

芯片在 pcb 上的物理放置以及 pcb 在设备内的固定以及设备的结构都可能导致不同的阻尼效应，以响应您的振动输入力。

你没有说你如何处理传感器数据，很可能会产生与在驱动程序级别执行的采样和过滤相关的影响。

您显然需要在代码中灵活地使用您期望的值范围并在各种设备上进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T18:18:08.953

应校准传感器。

显然不是。如果不同方向（即 x、y、z）上的增益没有显着差异，那么寻找加速度计矢量的长度^2 的突然变化就足够了：`x^2+y^2+z^2`.

如果增益也显着不同，那么您别无选择，只能编写一个用于加速度计校准的应用程序......

顺便说一句，您不是第一个报告严重错误的人，例如[Android：加速度计传感器中的 z 值范围在不同的设备上是不同的](https://stackoverflow.com/q/13018119/341970)。

# c# - Repository returning objects implementing interfaces with generic types

> ID：13382048
> 
> 赞同：0
> 
> 时间：2012-11-14T15:40:53.117
> 
> 标签：c#, generics, interface

I have a problem that I'm trying to wrap my head around. I might be terribly mistaken but here is what I'm trying to do.

I have two interfaces. The second interfaces has a property that should be of a implementation of the first interface. Something like this:

```
public interface ITypeA{
   int Id {get;set;}
}

public interface IEntityA<T>: where T:ITypeA
{
   string Name{get;set;}
   T type{get;set;}
} 
```

The implementations looks like this:

```
public class TypeA: ITypeA{
  int Id {get;set;}
}

public class EntityA: IEntityA<TypeA>{
  public string Name{get;set;}
  public TypeA type{get;set;
} 
```

I might be doing something wrong already(?).

Now I'm implementing the repository pattern, and the interface for that looks like this:

```
public interface IRepo{
   IEnumerable<IEntityA<ITypeA>> GetObjects();
} 
```

and the implementation:

```
public class DefaultRepo:Repo{

  //Cunstructors

   public IEnumerable<IEntitytA<ITypeA>> GetObjects(){
      var objects = SomeMethodThatReturnsTheOjects();//Get objects as EntityA[];
      return object.ToList();
   }
} 
```

This doesn't work.

I've tried to cast it as well, but getting a warning that it is a suspicious cast.

```
objects.Cast<IEntityA<ITypeA>[]>().ToList(); 
```

Where am I doing/thinking wrong?

Help much appriciated :)

**EDIT:** Maybe the repository interface declaration should look like this

```
public interface IRepo<TEntityA> where TEntityA:IEntityA{
       IEnumerable<TEntityA> GetObjects();
    } 
```

and the implementation:

```
public class DefaultRepo:Repo<EntityA>{
   ///Methods
} 
```

Thoughts?? :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:29:03.053

> 存储库基本上应该获取 json 数据并将其转换为实体。然而，json 看起来可能与不同的提供者非常不同，但它包含相同的数据（或多或少）。我使用 Json.NET 设置解析，因此必须在存储库返回的实体实现中以不同方式指定 [JsonProperty]

你为什么不拥有：

```
public interface IUserRepository 
{
   IEnumerable<IUser> Find();
} 
```

然后有`UserFromSourceA`，`UserFromSourceB`等等。

通过这种方式，您可以使用具有不同实现的 JSON.NET 属性，同时仍然公开相同的用户界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:32:13.610

我已经找到了一个合适的解决方案。我正在使用 json.net，我可以通过这样做来解决它：

```
public interface ITypeA{
   int Id {get;set;}
}

public interface ITypeB{
   int id {get;set;}
}

public class TypeA:ITypeA
   string Name{get;set;}
   int id {get;set;}

   [JsonConverter(typeof (ConcreteTypeConverter<TypeB>))]
   ITypeB type{get;set;}
}

public class TypeB:ITypeB
{
   int id {get;set;}
} 
```

转换器看起来像这样：

```
 public class ConcreteTypeConverter<TConcrete> : JsonConverter
    {
        public override bool CanConvert(Type objectType)
        {
            //assume we can convert to anything for now
            return true;
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            //explicitly specify the concrete type we want to create
            return serializer.Deserialize<TConcrete>(reader);
        }

        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            //use the default serialization - it works fine
            serializer.Serialize(writer, value);
        }
    } 
```

如果没有泛型，接口会变得更简洁、更易于阅读。

# c# - wpf textblock binding not working

> ID：13382051
> 
> 赞同：0
> 
> 时间：2012-11-14T15:40:59.363
> 
> 标签：c#, wpf

I am new to WPF programming, so forgive me if this is a simple issue.

I have my `Mainwindow.xaml` set up like so:

```
<Window x:Class="GNMAwpf.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:GNMAwpf"
    Title="Uploader" 
    Height="353" Width="342" ResizeMode="NoResize" WindowStartupLocation="CenterScreen">

<Window.DataContext>
    <local:GinniNet x:Name="g" />
</Window.DataContext> 
```

Further down I have a textblock:

```
<TextBlock Text="{Binding Path=StatusText}" Grid.ColumnSpan="2" MinWidth="150"></TextBlock> 
```

In my class i have :

```
class GinniNet : INotifyPropertyChanged
{

    public event PropertyChangedEventHandler PropertyChanged;
    private string _statusMessage;
    public string StatusMessage
    {
        get
        {
            return _statusMessage;
        }
        set
        {
            _statusMessage = value;
            OnPropertyChanged("StatusMessage");
        }
    }
    public GinniNet()
    {
        StatusMessage = "Ready";
    } 
    private void OnPropertyChanged(string property)
    {

        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(property));
    }
} 
```

When I change `StatusMessage` The textblock does not update ever. Where am i making my mistake?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T15:44:40.227

绑定不正确 -

```
<TextBlock Text="{Binding Path=StatusText}"/> 
```

它应该是 -

```
<TextBlock Text="{Binding Path=StatusMessage}" 
```

# apache-tomee - Apache TomEE (Tomcat Java EE) 无法在 Windows 上启动（java.util.regex.PatternSyntaxException：索引 3 附近的非法/不受支持的转义序列）

> ID：13382059
> 
> 赞同：2
> 
> 时间：2012-11-14T15:41:22.280
> 
> 标签：apache-tomee

尝试在 Windows 上启动 TomEE 时出现以下错误：

> 严重：OpenEJBContextConfig.processAnnotationsFile：失败。java.util.regex.PatternSyntaxException：索引 3 附近的非法/不受支持的转义序列 C:\Users\Ed\moba\workspace.metadata.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\OpenJPATest\WEB-INF \classes ^ at java.util.regex.Pattern.error(Pattern.java:1713) at java.util.regex.Pattern.escape(Pattern.java:2177) at java.util.regex.Pattern.atom(Pattern. java:1952) 在 java.util.regex.Pattern.sequence(Pattern.java:1885) 在 java.util.regex.Pattern.expr(Pattern.java:1752) 在 java.util.regex.Pattern.compile(Pattern .java:1460) 在 java.util.regex.Pattern.(Pattern.java:1133) 在 java.util.regex.Pattern.compile(Pattern.java:823) 在 java.lang.String.replaceFirst(String.java :2146) 在 org.apache.tomee.catalina.OpenEJBContextConfig。

有谁知道为什么会发生这种情况以及我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:45:22.003

我实际上只是在这里回答了一个类似的问题：[other stackoverflow question](https://stackoverflow.com/questions/13367807/error-starting-tomee-server-from-eclipse-servers-tab)

重申：

> 当前的 Windows 版本似乎已损坏。您必须按照此处的错误报告中的建议下载固定版本： [https ://issues.apache.org/jira/browse/TOMEE-436](https://issues.apache.org/jira/browse/TOMEE-436)
> 
> 1.5.1 快照可在此处下载： [1.5.1-SNAPSHOT](http://openejb.apache.org/cgi-bin/builds.cgi/apache-tomee/1.5.1-SNAPSHOT/)

# javascript - Positioning scroll bar adjacent to child element

> ID：13382061
> 
> 赞同：0
> 
> 时间：2012-11-14T15:41:26.773
> 
> 标签：javascript, jquery, css

The following script positions the scroll bar on the far right of the screen. I wish it to be located directly right of the table.

Note that all style on this table is being added by JavaScript.

I thought I would just get the table width using `var width=$('.body').width();`, and apply it to the enclosing `<div>` using `$('.container').width(width);`

Problem is the scroll bar occupies space, and inappropriately compresses the table.

I can arbitrarily add some extra width, however, am concerned that it might be different for different browsers.

How would this best be accomplished? Thank you

```
<body>
    <div id="myTable">
        <table class="header"></table>
        <div class="container" style="overflow-y:auto; height:40px;">
            <table class="body">
                <tbody>
                    <tr>
                        <td style="width:100px">ddd</td>
                        <td style="width:110px">ccc</td>
                        <td style="width:120px">42</td>
                    </tr>
                    <tr>
                        <td>ddd</td>
                        <td>ccc</td>
                        <td>42</td>
                    </tr>
                    <tr>
                        <td>ddd</td>
                        <td>ccc</td>
                        <td>42</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <table class="footer"></table>
    </div>
</body> 
```

# c - correct way to change values of c pointers

> ID：13382065
> 
> 赞同：6
> 
> 时间：2012-11-14T15:41:41.547
> 
> 标签：c, arrays, pointers

Sorry, another C pointer question.. I have a function func() that sorts an array, then get the largest and smallest integers. I'm trying to put them inside pointer variables in main() but the values are only correct inside the func() function. I don't understand why :(

```
#include <stdio.h>

void func(int arr[], int *s, int *l, int n){
    int i = 1;
    for(; i < n; i++){
        int temp = arr[i];
        int n = i;
        while( n > 0 && arr[n-1] > temp){
            arr[n] = arr[n-1];
            n--;
        }
        arr[n] = temp;
    }
    l = &arr[n-1];
    s = &arr[0];\
    printf("%d %d\n",*l,*s);
}

int main(void){
    int arr[] = {1,2,9,3,58,21,4};
    int *s, *l;
    int size = 7;
    func(arr,s,l,size);
    printf("%d %d\n",*l,*s);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T15:47:48.310

当您将指针作为参数传递给 C 中的函数时，会生成指针的*副本*。因此，更改指针的值在该函数之外没有任何影响。但是，更改指针*引用*的内存中的值将在任何地方生效，如您所愿。在您的情况下，您需要这样做：

```
void func(int arr[], int *s, int *l, int n){
    // sorting code..
    // l = &arr[n-1]; WRONG - these change the value of the pointer,
    //s = &arr[0];\   without changing the value of the memory they reference

    *l = arr[n-1]; // CORRECT - changes the value at the referenced memory
    *s = arr[0];
    printf("%d %d\n",*l,*s);
} 
```

当然，您使用指针的`main`方式也不正确；它们未初始化，可能会导致分段错误。由于似乎没有理由在那里使用实际`int*`变量而不是普通`int`变量，我们可以采用另一种方法“通过引用”传递它们：

```
int main(void){
    int arr[] = {1,2,9,3,58,21,4};
    // int *s, *l; WRONG - we don't need pointers, we need to pass regular ints
    int s, l;
    int size = 7;
    // Get the address of our variables with the address-of (&) operator
    // This effectively creates int* variables out of our int variables
    func(arr, &s, &l,size);
    printf("%d %d\n",*l,*s);
} 
```

请注意，此处的“通过引用”一词在该短语的真正意义上是不正确的，因为您仍会收到与变量关联的地址的*副本*。大多数语言通过消除这种区别并只允许您访问变量及其值来提供真正的按引用功能，而复制在程序员的视线之外。您可以将其视为“通过相对于`l`和`s`内部的引用`main`”，因为它们的值可能会因调用的函数而改变。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T15:46:18.423

You need to pass the address of the pointer variables if you want to change what they are pointing at, otherwise a copy of the pointer variable is being changed inside the function (and is why it is correct within the function):

```
void func(int arr[], int** s, int** l, int n){
    /* snip */

    *l = &arr[n-1];
    *s = &arr[0];
}

func(arr, &s, &l, size); 
```

This would leave `s` and `l` pointing to elements of the array `arr`. If you just wanted the values of integers then the alternative would be to define `int` variables in `main()` and pass their addresses to `func()` and copy the relevent values from the array:

```
void func(int arr[], int* s, int* l, int n){
    /* snip */

    *l = arr[n-1];
    *s = arr[0];
}

int s, l;
func(arr, &s, &l, size); 
```

See [this question](http://c-faq.com/ptrs/passptrinit.html) from the C FAQ.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:43:31.440

您的指针未初始化。你有两个解决方案：

*   在函数中使用整数`main`（最终，虽然没用，但在同一个函数中使指针指向它们）；
*   为指针动态分配内存。

最简单的代码：

```
#include <stdio.h>

int main(void)
{
    int arr[] = {1, 2, 9, 3, 58, 21, 4};
    int s, l;
    int size = 7;
    func(arr, &s, &l, size);
    printf("%d %d\n", l, s);
} 
```

在当前代码中，您不需要 make`l`并`s`指向数组的大小写。所以，正如*Dan F*所说，你可以只做整数的赋值。

```
void func(int arr[], int *s, int *l, int n)
{
    int i = 1;
    for(; i < n; i++){
        int temp = arr[i];
        int n = i;
        while( n > 0 && arr[n-1] > temp){
            arr[n] = arr[n-1];
            n--;
        }
        arr[n] = temp;
    }
    *l = arr[n-1];
    *s = arr[0];
    printf("%d %d\n", *l, *s);
} 
```

# c# - SSIS 2012: is it possible to pass references to Package Objects to an external assembly?

> ID：13382076
> 
> 赞同：2
> 
> 时间：2012-11-14T15:42:38.313
> 
> 标签：c#, sql-server, ssis

I have an SSIS (2012) package which has 16 (c#) script tasks so far and there will be more. I am frustrated at having to basically copy code in for each component. I have a .cs file which I add to each script task but as this is copied into the dtsx if I update the 'common' code I have to modify every other component which has contains it.
I have tried to create an external assembly so I can put it into the GAC and avoid this stupidity but I cannot get it to work - the problem seems to be that my common code requires a reference to the InheritedVariableDispenser to work. I have tried adding references to Microsoft.SqlServer.Dts.Runtime in the external assembly in order to handle this but as I say, this fails.
A partial solution would be to create a customised script task with my common routines pre-loaded but this doesn't seem possible either.
My last alternative option is to write a program which acts directly upon the dtsx file and modifies the xml to update all the section which incorporate the common code. While this appeals to the hacker in me it does some like a little too much work and a bit 'iffy' - it would only solve the update problem while still not allowing re-use in another package.
If anybody knows how to re-use code which references SSIS objects I would be most interested!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T23:28:23.977

您的通用代码是否真的需要访问整个`VariableDispenser`对象，还是只需要访问变量？

如果您只需要变量本身，那么我建议将公共代码放在外部程序集中。使用脚本组件来消费通用代码功能；例如：

```
var foo = new MyLogic();
Dts.Variables["TransmogrifyResult"].Value = foo.Transmogrify(Dts.Variables["AnInput"].Value, Dts.Variables["AnotherInput"].Value); 
```

如果您绝对**必须**有权访问它`VariableDispenser`本身，则 MSDN [VariableDispenser](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.variabledispenser.aspx "变量分配器对象")文档会警告您实际上可能需要使用[IDTSVa​​riableDispenser100](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.wrapper.idtsvariabledispenser100.aspx)。

# java - 使用 ViewPageIndicator 在 SherlockFragment 中的 Tabhost

> ID：13382077
> 
> 赞同：0
> 
> 时间：2012-11-14T15:42:41.010
> 
> 标签：java, android, android-fragments, android-tabhost, actionbarsherlock

所以我有 3 个 Sherlock Fragments 设置并与 ViewPageIndicator 一起工作正常。我现在想做的是将 TabHost 放在其中一个 Fragment 中，以便它显示 2 个单独的选项卡（在底部）。我相信这意味着我需要再有 2 个片段放入 TabHost 控制的第 3 个片段中。

考虑到 TabHost 需要在 Fragment 中创建，我不确定如何正确创建它。

[这是我从本教程](http://droidista.blogspot.com/2012/08/making-actionbarsherlock-and.html)中获得的 Fragment 的代码，我尝试对其进行更新以添加 TabHost 失败：

TestFragment3.java

```
public class TestFragment3 extends SherlockFragment {
private String mContent = "none";

public static TestFragment3 newInstance(String text) {
    TestFragment3 fragment = new TestFragment3();

    // Supply num input as an argument.
    Bundle args = new Bundle();
    args.putString(KEY_TAB_NUM, text);
    fragment.setArguments(args);

    return fragment;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.activity_main, null);
    String text = getString(R.string.tab_page_num) + mContent;
    ((TextView)view.findViewById(R.id.text)).setText(text);

    return view;
}

@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   mContent =  getArguments() != null ? getArguments().getString(KEY_TAB_NUM) : "none";
}

} 
```

MainActivity.java

```
public class MainActivity extends SherlockFragmentActivity {

private static final String[] TAB_TITLES = new String[] { "This", "Is", "A", "ViewPager" };

TestFragmentAdapter mAdapter;
    ViewPager mPager;
    PageIndicator mIndicator;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.simple_tabs);

    mAdapter = new TestFragmentAdapter(getSupportFragmentManager());

    mPager = (ViewPager)findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager);
}

class TestFragmentAdapter extends FragmentPagerAdapter {     
    private int mCount = TAB_TITLES.length;

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return TestFragment.newInstance(String.valueOf(position));
    }

    @Override
    public int getCount() {
        return mCount;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return TAB_TITLES[position];
    }
}
} 
```

我是否需要创建一个新的 SherlockFragmentActivity 并将另外 2 个 SherlockFragment 添加到该 TabHost？如果是这样，我如何设置带有 3 个片段的 MainActivity 以使用另一个 Activity，而不是片段，作为它的第 3 个片段？

我在尝试将 Fragment 放入 Fragment 时收到此错误...

```
11-14 19:10:54.271: E/AndroidRuntime(2812): java.lang.IllegalStateException: Recursive entry to executePendingTransactions
11-14 19:10:54.271: E/AndroidRuntime(2812):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1388)
11-14 19:10:54.271: E/AndroidRuntime(2812):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
11-14 19:10:54.271: E/AndroidRuntime(2812):     at com.example.demolistview.EventInviteesFragment$TabManager.onTabChanged(EventInviteesFragment.java:152)
11-14 19:10:54.271: E/AndroidRuntime(2812):     at android.widget.TabHost.invokeOnTabChangeListener(TabHost.java:391)
11-14 19:10:54.271: E/AndroidRuntime(2812):     at android.widget.TabHost.setCurrentTab(TabHost.java:376)
11-14 19:10:54.271: E/AndroidRuntime(2812):     at android.widget.TabHost.addTab(TabHost.java:236)
...
...
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T01:35:25.640

关于这个问题：

> 考虑到 TabHost 需要在 Fragment 中创建，我不确定如何正确创建它。

如果您查看最新的支持演示，他们有一个您正在尝试实施的示例。它们可以通过 SDK 管理器下载。

这就是他们在片段中嵌套选项卡主机的方式。该设置使用 Child FragmentManager。

```
public class FragmentTabsFragmentSupport extends Fragment {
    private FragmentTabHost mTabHost;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        mTabHost = new FragmentTabHost(getActivity());
        mTabHost.setup(getActivity(), getChildFragmentManager(), R.id.fragment1);

        mTabHost.addTab(mTabHost.newTabSpec("simple").setIndicator("Simple"),
                FragmentStackSupport.CountingFragment.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("contacts").setIndicator("Contacts"),
                LoaderCursorSupport.CursorLoaderListFragment.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("custom").setIndicator("Custom"),
                LoaderCustomSupport.AppListFragment.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("throttle").setIndicator("Throttle"),
                LoaderThrottleSupport.ThrottledLoaderListFragment.class, null);

        return mTabHost;
    }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
        mTabHost = null;
    }
} 
```

我还创建了一个小示例，可以在以下位置找到：[https ://github.com/marsucsb/nested-fragments](https://github.com/marsucsb/nested-fragments)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:59:10.413

没有测试过，但应该是这样的

```
TabFragment extends SherlockFragment {
TabHost mTabHost;
    TabManager mTabManager;

mTabHost = (TabHost)findViewById(android.R.id.tabhost);
                 mTabHost.setup();

                 mTabManager = new TabManager(this.getActivity(), mTabHost, R.id.realtabcontent);

                 mTabManager.addTab(mTabHost.newTabSpec("first").setIndicator("First", getResources().getDrawable(R.drawable.ic_tab_first_tab)), FirstFragment.class  , null);

                 mTabManager.addTab(mTabHost.newTabSpec("second").setIndicator("Second", getResources().getDrawable(R.drawable.ic_tab_second_tab)), SecondFragment.class  , null);
 public static class TabManager implements TabHost.OnTabChangeListener {
            private final FragmentActivity mActivity;
            private final TabHost mTabHost;
            private final int mContainerId;
            private final HashMap<String, TabInfo> mTabs = new HashMap<String, TabInfo>();
            TabInfo mLastTab;

            static final class TabInfo {
                private final String tag;
                private final Class<?> clss;
                private final Bundle args;
                private Fragment fragment;

                TabInfo(String _tag, Class<?> _class, Bundle _args) {
                    tag = _tag;
                    clss = _class;
                    args = _args;
                }
            }

            static class DummyTabFactory implements TabHost.TabContentFactory {
                private final Context mContext;

                public DummyTabFactory(Context context) {
                    mContext = context;
                }

                public View createTabContent(String tag) {
                    View v = new View(mContext);
                    v.setMinimumWidth(0);
                    v.setMinimumHeight(0);
                    return v;
                }
            }

            public TabManager(FragmentActivity activity, TabHost tabHost, int containerId) {
                mActivity = activity;
                mTabHost = tabHost;
                mContainerId = containerId;
                mTabHost.setOnTabChangedListener(this);
            }

            public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
                tabSpec.setContent(new DummyTabFactory(mActivity));
                String tag = tabSpec.getTag();

                TabInfo info = new TabInfo(tag, clss, args);

                // Check to see if we already have a fragment for this tab, probably
                // from a previously saved state.  If so, deactivate it, because our
                // initial state is that a tab isn't shown.
                info.fragment = mActivity.getSupportFragmentManager().findFragmentByTag(tag);
                if (info.fragment != null && !info.fragment.isDetached()) {
                    FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
                    ft.detach(info.fragment);
                    ft.commitAllowingStateLoss();
                }

                mTabs.put(tag, info);
                mTabHost.addTab(tabSpec);
            }

            public void onTabChanged(String tabId) {
                TabInfo newTab = mTabs.get(tabId);
                if (mLastTab != newTab) {
                    FragmentTransaction ft = mActivity.getSupportFragmentManager().beginTransaction();
                    if (mLastTab != null) {
                        if (mLastTab.fragment != null) {
                            ft.detach(mLastTab.fragment);
                        }
                    }
                    if (newTab != null) {
                        if (newTab.fragment == null) {
                            newTab.fragment = Fragment.instantiate(mActivity,
                                    newTab.clss.getName(), newTab.args);
                            ft.add(mContainerId, newTab.fragment, newTab.tag);
                        } else {
                            ft.attach(newTab.fragment);
                        }
                    }

                    mLastTab = newTab;
                    ft.commitAllowingStateLoss();
                    mActivity.getSupportFragmentManager().executePendingTransactions();
                }
            }
        }
} 
```

还有你的框架布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

<TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

     <LinearLayout 
        android:orientation="vertical" 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent">

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_weight="1"
            android:layout_height="wrap_content">

        <FrameLayout
            android:id="@+id/realtabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>

        </FrameLayout>

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_marginBottom="-4dp"
            android:background="#333333" 
            android:layout_height="wrap_content" 
         />

        </LinearLayout>
</TabHost>

</LinearLayout> 
```

# iphone - Objective-C and ARC: Why value stored to during its initialization is never read?

> ID：13382078
> 
> 赞同：5
> 
> 时间：2012-11-14T15:42:41.943
> 
> 标签：iphone, objective-c, cocoa-touch, automatic-ref-counting

I'm using this code with **ARC**:

```
NSMutableDictionary *datesDict = [[NSMutableDictionary alloc]init];
NSMutableArray *datesArray = [[NSMutableArray alloc]init];

for (NSString *key in programsArray) {

    datesArray = [_onDemandDictionary objectForKey:key];
    NSMutableArray *newDates = [[NSMutableArray alloc]init];
    int count;
    for (count = 0; count <datesArray.count; count++) {
        NSMutableDictionary *programsDict = [[NSMutableDictionary alloc]init];
        programsDict = [datesArray objectAtIndex:count];
        [newDates addObject:[programsDict objectForKey:@"date"]];

    }

    [datesDict setObject:newDates forKey:key];
} 
```

But when I run the analyzer tool I'm getting **value stored to (datesArray and programsDict) during its initialization is never read** on lines:

```
NSMutableArray *datesArray = [[NSMutableArray alloc]init];
programsDict = [datesArray objectAtIndex:count]; 
```

Why is this happening how do I get hid of the warning?

Thank you!

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-14T15:45:20.660

The issue is you create a new `NSMutableArray` and assign it to `datesArray` at the beginning

```
NSMutableArray *datesArray = [[NSMutableArray alloc]init]; 
```

Then almost immediately after you assign a completely different value to `datesArray` with

```
datesArray = [_onDemandDictionary objectForKey:key]; 
```

I would just start with

```
NSMutableArray *datesArray = nil; 
```

It's the same concept for `programsDict`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:51:40.423

在第 2 行，您创建了一个新数组`datesArray`。
然后，在第 6 行（for 循环的第一行），将新值设置为`datesArray`.

编译器只是警告您，第 2 行没有任何效果，并且代码存在错误（从某种意义上说，它没有达到您的预期）。
的确，`programsArray`可能是一个空数组，在这种情况下，您只想`datesArray`在您向我们展示的代码段之后初始化以使用它，但最好明确说明。

对于`programsDict`，它更容易：您将其初始化，`... alloc] init]`然后将其设置为 的对象`datesArray`，从而使第一个操作无用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-20T19:11:23.217

你没有在你的循环中使用 datesArray，你只是给它赋值，所以要么把它当作 nil 数组

```
NSMutableArray* datesArray = nil; 
```

或喜欢

```
NSMutableArray *datesArray; 
```

删除waring。

# python - permanently replace values in a list using Python

> ID：13382080
> 
> 赞同：0
> 
> 时间：2012-11-14T15:42:50.443
> 
> 标签：python

```
list1 = [1,2,3,4,5,6,7,8,9]
def replace():

    input_list = input("Enter three numbers separated by commas: ")
    list2 = input_list.split(',')
    list2 = [int(x.strip())for x in list2]

    del list1[-3:]
    list1.insert(0,list2)

    print(list1) 
```

for input 12,13,14 this gives as a result [[12,13,14],1,2,3,4,5,6] Firstly I would like to have a 'flat' list as the result and can't seem to get this right [12,13,14,1,2,3,4,5,6]. I can get the last value entered as part of the list by removing the square brackets from the list2=[int(x.strip()) for...] statement, gives [14,1,2,3,4,5,6]. My second wish is that I can change the initial list permanently ie [12,13,14,1,2,3,5,6] becomes list1 that is called in the first place. Do I need to save this as a csv file and write to it? I am very new to this, so please forgive me if this is a very simple or stupid batch of questions.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:46:38.337

I believe this is what you want:

```
In [11]: list1 = [1, 2, 3, 4, 5, 6]

In [12]: list2 = [12, 13, 14]

In [13]: list1[0:0] = list2

In [14]: list1
Out[14]: [12, 13, 14, 1, 2, 3, 4, 5, 6] 
```

The slice operation changes `list1` in-place, so the variable isn't simply pointing at a new list. I think that's what you meant by "permanently"?

# php - 从字符串中删除除尾随 0 之外的所有 0

> ID：13382082
> 
> 赞同：0
> 
> 时间：2012-11-14T15:42:51.947
> 
> 标签：php, trailing

关于删除前导和尾随 0 有很多问题，但我找不到删除所有 0 的方法，除了尾随 0（前导 0 或除末尾以外的任何其他位置）。

```
100010 -> 110  
010200 -> 1200  
01110  -> 1110 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T15:48:55.787

尝试

```
echo preg_replace('/0+([1-9])/', '$1', $str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:48:52.807

您可以使用正则表达式`[0]+(?=[1-9])`查找零（使用正向前瞻）并`preg_replace`用空字符串替换它们（假设数字已经是字符串形式）。

```
$result = preg_replace("#[0]+(?=[1-9])#", "", "100010"); 
```

[在此处](http://codepad.org/JzA17sKN)查看实际操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T15:50:34.093

您想要替换不在字符串末尾的所有零。

您可以使用带有所谓的负前瞻的一些正则表达式来做到这一点，因此只有不在字符串末尾的零匹配被替换：

```
$actual = preg_replace('/0+(?!$|0)/', '', $subject); 
```

`$`表示字符串的结束。`0+`表示一个或多个零。那就是贪心，意思是，如果有两个，就需要两个，而不是一个。这很重要，不要在最后更换。但还需要写的是，被替换的内容不允许跟随 0。

就像你制定了你的句子：

> 一种删除除尾随 0 之外的所有 0 的方法（前导 0 或除结尾以外的任何其他位置）。

即：`0+(?!$|0)`。请参阅[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html) -[演示](http://3v4l.org/7v5Bl)。

另一种变体是[原子分组](http://www.regular-expressions.info/atomic.html)，它应该更直接一点（[演示](http://3v4l.org/PN20I)）：

```
(?>0+)(?!$) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:48:57.980

你可以使用正则表达式来做你想做的事：

```
if(preg_match('/^(0*)(.*?)(0*)$/',$string,$match)) {
    $string = $match[1] . str_replace('0','',$match[2]) . $match[3];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T15:51:49.173

您可以按照其他人的建议使用正则表达式，或者修剪。计算尾随的 0，去掉所有的 0，然后将尾随的 0 添加回去。

```
$num = 10100;
$trailing_cnt = strlen($num)-strlen(trim($num, "0"));
$num = str_replace('0','',$num).str_repeat('0', $trailing_cnt); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-14T15:52:31.457

```
// original string
$string = '100010';

// remember trailing zeros, if any
$trailing_zeros = '';
if (preg_match('/(0+)$/', $string, $matches)) {
    $trailing_zeros = $matches[1];
}

// remove all zeros
$string = str_replace('0', '', $string);
// add trailing ones back, if they were found before
$string .= $trailing_zeros; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-14T15:55:36.047

这是一个解决方案。应该有更漂亮的，但这也有效。

```
$subject = "010200";
$match = array();
preg_match("/0*$/",$subject,$match);
echo preg_replace("/0*/","",$subject).$match[0]; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-14T15:48:19.637

不是最漂亮的，但它的工作...

```
$str = "01110";

if(substr($str,-1) == 0){
    $str = str_replace("0","",$str)."0";
}else{
    $str = str_replace("0","",$str);
}

echo $str; // gives '1110' 
```

# menu - 鼠标悬停时下拉菜单

> ID：13382083
> 
> 赞同：3
> 
> 时间：2012-11-14T15:42:58.043
> 
> 标签：menu, drupal-7

我在 Drupal7 中建立了一个站点，如何发布一个菜单栏，只在鼠标悬停时打开一个子菜单？Dropal.org 站点中有一个模块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:53:12.547

查看这些模块以帮助您入门： http: [//megadrupal.com/blog/7-mega-menu-modules-for-drupal](http://megadrupal.com/blog/7-mega-menu-modules-for-drupal)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T22:46:41.647

您可以使用 Superfish 菜单模块。

# matplotlib - 在图例文本中绘制点和线？

> ID：13382086
> 
> 赞同：2
> 
> 时间：2012-11-14T15:43:02.163
> 
> 标签：matplotlib, legend

是否有可能将线条和点放入 matplotlib 中的图例文本中？我的想法如下

```
x=np.linspace(0,10,100)
ys=np.sin(x)
yc=np.cos(x)
pl.plot(x,ys,'--',label='sin')
pl.plot(x,yc,':',label='derivative of --')
pl.legend()
pl.show() 
```

除了`--`应该有相同的符号和相应的颜色，就像在图例标签前面一样`sin`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:35:35.443

在阅读了 matplotlib 源代码后，我终于找到了一个非常适合我的解决方案，并且不需要任何位置调整等，因为它使用了 matplotlibs 内部的 V- 和 HPackers。

```
import numpy as np
import pylab as pl

x=np.linspace(0,10,100)
ys=np.sin(x)
yc=np.cos(x)

pl.plot(x,ys,'--',label='sin')
pl.plot(x,yc,':',label='derivative of')
leg=pl.legend()

# let the hacking begin
legrows = leg.get_children()[0].get_children()[1]\
             .get_children()[0].get_children()
symbol  = legrows[0].get_children()[0]
childs  = legrows[1].get_children().append(symbol)

pl.show() 
```

结果如下所示：

![在此处输入图像描述](../Images/caa16087b4f27b3f4de8cedc095420ee.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:53:02.390

这有点小技巧，但它实现了您的目标并以适当的顺序将所有部分（即图例和文本）放置在情节上。

```
import pylab

pl.plot(x,ys,'--',label='sin', color='green')
pl.plot(x,yc,':',label='derivative of --',color='blue')
line1= pylab.Line2D(range(10), range(10), marker='None', linestyle='--',linewidth=2.0, color="green")
line2= pylab.Line2D(range(10), range(10), marker='None', linestyle=':',linewidth=2.0, color="blue")
leg = pl.legend((line1,line2),('sin','derivative of      '),numpoints=1, loc=1)
pylab.text(9.4, 0.73, '- -', color='green')
leg.set_zorder(2)
pl.show() 
```

我没有依赖线条的默认颜色，而是将它们设置为可以在图例中专门引用它们。图例中第二行的“导数”文本中留有额外的空格，因此我们可以`sin`在其顶部放置文本（也就是相应的行符号/颜色）。然后指定文本的符号/颜色并将其放置在与图例中的文本对齐的位置。最后，您指定顺序，通过`zorder`，将文本设置在顶部。

# spring - Grails Spring Security 插件 - 保护除根路径之外的所有内容

> ID：13382089
> 
> 赞同：3
> 
> 时间：2012-11-14T15:43:11.457
> 
> 标签：spring, grails, spring-security

由于一些外部原因（web.xml 中定义的一些过滤器仅适用于某些路径），我需要实现以下（简化）场景：

*   `/`路径不需要身份验证并重定向到“/secured”
*   `/secured`需要身份验证
*   `/public1`, `/public2`, 等不需要身份验证
*   其他所有内容 ( `/**`) 都需要身份验证

为了实现这一点，有一个`filterChain`定义在`Config.groovy`：

```
grails.plugins.springsecurity.filterChain.filterNames = [..., 'myAuthenticationFilter']
grails.plugins.springsecurity.filterChain.chainMap = [
  '/': 'JOINED_FILTERS,-myAuthenticationFilter',
  '/public1/**': 'JOINED_FILTERS,-myAuthenticationFilter',
  '/public2/**': 'JOINED_FILTERS,-myAuthenticationFilter',
  '/**': 'JOINED_FILTERS'
] 
```

但是，匹配`/`路径存在问题。我试过`'/'`了`''`。我可以将此路径与 匹配`'/*'`，但它匹配更多的 URL，这不是我需要的。

我不能要求用户在访问时进行身份验证`/`，因为在所有情况下都必须进行重定向`/secured`，并且身份验证要求是，比如说，“外部提供”仅适用于`/secured`和其他一些路径。

有什么好的方法可以实现这种行为吗？

我正在使用带有 Spring Security Core 插件的 Grails 2.0.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T03:43:11.673

在 Grails 中有更简单的方法来定义这些规则。您可以使用[interceptUrlMap](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/single.html#5.2%20Simple%20Map%20in%20Config.groovy)或requestmap。

例如，您可以在 Config.groovy 中定义您的安全配置：

```
grails.plugins.springsecurity.interceptUrlMap = [
   '/secured/**':    ['ROLE_ADMIN','IS_AUTHENTICATED_FULLY'],
   '/public1/**':   ['IS_AUTHENTICATED_ANONYMOUSLY'],
   '/public2/**':   ['IS_AUTHENTICATED_ANONYMOUSLY'],
   '/js/**':        ['IS_AUTHENTICATED_ANONYMOUSLY'],
   '/css/**':       ['IS_AUTHENTICATED_ANONYMOUSLY'],
   '/images/**':    ['IS_AUTHENTICATED_ANONYMOUSLY'],
   '/login/**':     ['IS_AUTHENTICATED_ANONYMOUSLY'],
   '/logout/**':    ['IS_AUTHENTICATED_ANONYMOUSLY'],
   '/':            ['IS_AUTHENTICATED_ANONYMOUSLY'],
   '/**':            ['IS_AUTHENTICATED_FULLY']          //put this as the last item
]
grails.plugins.springsecurity.successHandler.defaultTargetUrl = "/secured"   //redirect `/` access to `/secured` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T17:40:25.480

您可以使用 URLMapping 将特定控制器和操作与`/`URL 相关联吗？然后，您可以保护除特定控制器/操作对之外的所有内容。

# excel - Excel 宏将单元格格式更改为货币

> ID：13382091
> 
> 赞同：2
> 
> 时间：2012-11-14T15:43:16.403
> 
> 标签：excel, currency, currency-formatting, vba

我有一个文件，其中一列充满了数字，第二列有每个数字各自的货币。我有`USD, EUR, CHF, and GBP`。

我想创建一个宏，将数字列从数字格式化为货币，然后应用第二列中的货币。

诀窍是我希望数字列中仍然有数字，因为可以添加或减去数字。因此，我不想要两列的简单连接，因为这会使字段变为文本，并且无法在数学方程式中使用。

如果你知道怎么做，请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:12:08.970

我不确定我是否理解您的确切问题，但这将采用 A 列中的所有值，并根据 B 列中的货币值将它们格式化为 C 列中的货币：

```
Sub Macro1()

Dim cl As Range

For Each cl In Intersect(ActiveSheet.Range("A:A"), ActiveSheet.UsedRange)
   cl.Offset(0, 2).Value = cl.Value
   Select Case cl.Offset(0, 1).Value
      Case "USD"
         cl.Offset(0, 2).NumberFormat = "$#,##0.00"
      Case "EUR"
         cl.Offset(0, 2).NumberFormat = "[$€-2] #,##0.00"
      Case "GBP"
         cl.Offset(0, 2).NumberFormat = "[$£-809]#,##0.00"
      Case "CHF"
         cl.Offset(0, 2).NumberFormat = "[$CHF] #,##0.00"
   End Select

Next cl

End Sub 
```

如果要更改货币类型，请录制一个宏，在其中将单元格设置为正确的货币，然后根据需要复制并粘贴该数字格式。

# jquery - 交换的图像在 Firefox 中被遮盖了。必须点击两次才能摆脱焦点

> ID：13382098
> 
> 赞同：0
> 
> 时间：2012-11-14T15:43:41.493
> 
> 标签：jquery, firefox, focus, overlay

我有一个 jgal，它在除 Firefox 之外的其他浏览器中运行良好。

[http://www.beautiful-soul.co.uk/collections/ss13.php](http://www.beautiful-soul.co.uk/collections/ss13.php)

问题是，当您单击缩略图时，主图像会发生变化，但会覆盖一个焦点，该焦点不会自行移除，直到您在图像上单击两次。我曾尝试更改 CSS 和 JQuery，但我还不知道发生了什么？

任何想法将不胜感激。我认为这是一个原生的 Firefox 焦点/活跃问题。

谢谢

# git - how to add ssh public key to a specific git repo

> ID：13382099
> 
> 赞同：2
> 
> 时间：2012-11-14T15:43:42.133
> 
> 标签：git, ubuntu, ssh, public-key-encryption, repository

I have a git repo, i connect via root to push and pull. I have another user i'd like to have access to my repo.

I have got him to create me a public key file for me to add to my servers `~/.ssh/authorized_keys`

How do i then restrict him from having access to my entire server?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:53:16.977

Set `git-shell` as their login shell in `/etc/passwd`, as [documented here](http://git-scm.com/book/ch4-4.html). Doing this, you can have a single account dedicated to `git` access for you both.

The more complicated solution is to use something like [gitolite](https://github.com/sitaramc/gitolite) to manage access to a collection of repos. I've used it and it's a bit of a pain to set up at first, but it works well and is currently maintained.

Alternatively, [Bitbucket](http://bitbucket.org) hosts unlimited private Git repos for free. You can both point your repos to Bitbucket as origin/master and collaborate there instead. This is what I do now.

# visual-studio-2008 - MSVS2008 编译错误，跳过代码

> ID：13382103
> 
> 赞同：2
> 
> 时间：2012-11-14T15:43:58.383
> 
> 标签：visual-studio-2008

我有一个自动构建过程，昨天构建会在启动时出现页面错误（错误分配）。我手动构建了版本，页面错误神奇地消失了。我再次使用完全相同的代码使用自动构建过程，页面错误神奇地消失了。

今天在我的调试环境中，我遇到了一个新异常（不同的位置）。此时代码检查 NULL，然后“throw()”退出函数。我的指针为 NULL，输入了 if，编译器直接跳过了“throw(0)”，就像它不存在一样，继续执行同一个函数。我重建了 DLL，然后该行的行为就像它确实存在一样，一切都很好（再次神奇）。

我只是想知道其他人是否看到过这种行为，对为什么会发生这种情况有建议，并有任何解决问题的建议。有一种方法来确定代码在构建日志中没有显示错误时是否确实无法正确构建也会非常有帮助。

# data-structures - Clojure：我有许多排序的映射，并且想要按顺序减少所有值的超级映射键 -> 向量

> ID：13382113
> 
> 赞同：4
> 
> 时间：2012-11-14T15:44:27.243
> 
> 标签：data-structures, clojure, sortedmap

我已经看到[了这一点](https://stackoverflow.com/questions/7927899/clojure-summing-values-in-a-collection-of-maps)，但无法弄清楚如何将它（不是双关语）应用于我的情况。

我有一个这样的地图排序列表：（注意地图中可以有两个以上的键）（{name1 3，name2 7}，{name1 35，name2 7}，{name1 0，name2 3}）

之后我所追求的是这个数据结构：

({:name1 [3,35,0]}, {:name2 [7,7,3]})

我已经为此苦苦挣扎了一段时间，似乎无法靠近。

警告：数据必须保持排序，我有 N 个关键字，而不仅仅是两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:37:18.907

我会`merge-with`添加一些预处理：

```
(def maps [{:a :b :e :f} {:a :c} {:a :d :e :g}])
(apply merge-with concat (for [m maps [k v] m] {k [v]}))
>>> {:e (:f :g), :a (:b :c :d)} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:05:15.057

我认为你想要的功能是合并：

```
user=> (def x {:a 1 :b 2})
user=> (def y {:a 3 :b 4})
user=> (merge-with vector x y)
{:a [1 3], :b [2 4]}
user=> 
user=> (def z {:a 5 :b 6 :c 7})
user=> (merge-with vector x y z)
{:a [[1 3] 5], :c 7, :b [[2 4] 6]} ; oops
user=> (merge-with #(vec (flatten (vector %1 %2))) x y z)
{:a [1 3 5] :b [2 4 6] :c 7}
user=> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:58:28.130

这是我对这个问题的尝试。它不像 Rafal 的解决方案那样优雅。

```
(def maps [{:a :b :e :f} {:a :c} {:a :d :e :g}])
(apply merge-with #(if (list? %1) (conj %1 %2) (list %1 %2)) maps)
>>> {:a (:d :b :c), :e (:f :g)} 
```

# php - Printing SQL query results PHP

> ID：13382118
> 
> 赞同：0
> 
> 时间：2012-11-14T15:44:43.560
> 
> 标签：php, sql, forms, search

I am looking to be able to search a SQL database using a form and output the finds on the screen.

This is my code:

```
$query = "SELECT * FROM documents WHERE DocumentName = '%".$DocumentName."%'AND county = '".$county."' OR acreage = '".$acreage."' AND grantor = '".$grantor."' OR grantee = '".$grantee."' ORDER by 'DocumentName'" ;

$result=$db->query($query);
$num_results=$result->num_rows;
echo "<p>Number of documents found: ".$num_results."</p>";
for($i=0; $i <$num_results; $i++){ 
$row=$result->fetch_assoc();
echo"<p>".($i+1).".County: ";
echo htmlspecialchars(stripslashes($row['county']));
echo "<br />Acreage: ";
echo stripslashes($row['acreage']);
echo "<br />Grantor: ";
echo stripslashes($row['grantor']);
echo "<br />grantee: ";
echo stripslashes($row['grantee']);
echo "<br />Lessor: ";
echo stripslashes($row['DocumentName']);
echo "<br />PDF: ";
echo stripslashes ("<a href=".$row['PDF'].">" .$row['PDF'] . "</a><br>");
echo "</p>";
}

$result->free();
$db->close(); 
```

It selects and outputs the information. The thing is I need people to be able to leave a field blank the search form however this causes all data to be displayed. If they type in the county and leave everything else blank I want it to pull only that county records.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:59:16.550

我建议检查 post 值是否已设置并将 where 条件存储在数组中，然后`implode`用于创建一个字符串以用于您的查询。

```
if(isset($_POST['country']) && strlen($_POST['country'])) { 
    $where[] = "country = '$country'";
}
if(isset($_POST['acreage']) && strlen($_POST['country'])) { 
    $where[] = "acreage = '$acreage'";
}
....
$where = isset($where) ? ' WHERE '.implode(' AND ',$where) : '';
$query = 'SELECT * FROM documents'.$where; 
```

还值得注意的是，您没有针对 SQL 注入攻击的保护，您需要清理您的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:54:07.817

您可以打破`where`子句条件，例如：

```
$where = '';
$where .= empty(county) ? '' : "AND county='$county' ";
... 
```

并注入`$where`查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:54:17.890

尝试这样的事情（仅当关联的表单字段已发送且不为空时才显示该数据）

```
if(isset($_POST['country']) && strlen($_POST['country'])>0) echo ($i+1).".County: ". htmlspecialchars(stripslashes($row['county']));
if(isset($_POST['acreage']) && strlen($_POST['acreage'])>0) echo "<br />Acreage: ". stripslashes($row['acreage']);
// ... 
```

# android - CONNECTIVITY_SERVICE not working on Sprint phones

> ID：13382120
> 
> 赞同：1
> 
> 时间：2012-11-14T15:44:53.750
> 
> 标签：android

I'm trying to use the startUsingNetworkFeature for TYPE_MOBILE for MMS and everytime I test on a Sprint phone it just starts the WIFI service instead. It works fine on ATT and Verizon phones (I use Galaxy Nexus for my test phones on all three networks).

Here's my code and the associated logcat output:

```
 public class main extends FragmentActivity {

        private static final String TAG = "main";
        private ConnectivityManager mConnMgr;
        private ConnectivityBroadcastReceiver mReceiver;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            mConnMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            mReceiver = new ConnectivityBroadcastReceiver();

            beginConnectivity();

        }

        private int beginConnectivity() {

            int result = mConnMgr.startUsingNetworkFeature(ConnectivityManager.TYPE_MOBILE, PhoneEx.FEATURE_ENABLE_MMS);

            Log.v(TAG, "beginMmsConnectivity: result=" + result);

            return result;
        }

        @Override
        protected void onResume() {
            // TODO Auto-generated method stub
            super.onResume();
            IntentFilter intentFilter = new IntentFilter();
            intentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
            registerReceiver(mReceiver, intentFilter);

        }

        @Override
        protected void onPause() {
            // TODO Auto-generated method stub
            super.onPause();

            unregisterReceiver(mReceiver);
        }

        private class ConnectivityBroadcastReceiver extends BroadcastReceiver {
            @Override
            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                Log.w(TAG, "ConnectivityBroadcastReceiver.onReceive() action: " + action);

                NetworkInfo networkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);

                NetworkInfo mmsNetworkInfo = mConnMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
                Log.v(TAG, "" + mmsNetworkInfo);

                Log.v(TAG, "Handle ConnectivityBroadcastReceiver.onReceive(): " + networkInfo);

                // Check availability of the mobile network.
                if ((networkInfo == null) || (networkInfo.getType() != ConnectivityManager.TYPE_MOBILE_MMS)) {
                    Log.v(TAG, "   type is not TYPE_MOBILE_MMS, bail");
                    return;
                }

                if (!networkInfo.isConnected()) {
                    Log.v(TAG, "   TYPE_MOBILE_MMS not connected, bail");
                }

                return;
            }
        };

    } 
```

11-14 10:41:12.951: V/main(2772): NetworkInfo: **type: mobile_mms[CDMA - EvDo rev. A], state: DISCONNECTED/IDLE,** reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: true 11-14 10:41:12.951: V/main(2772): Handle ConnectivityBroadcastReceiver.onReceive(): NetworkInfo: **type: WIFI[], state: CONNECTED/CONNECTED**, reason: (unspecified), extra: (none), roaming: false, failover: false, isAvailable: true 11-14 10:41:12.951: V/main(2772): type is not TYPE_MOBILE_MMS, bail

I log the status of the TYPE_MOBILE_MMS as well, just for comparison. I expect the code to start the TYPE_MOBILE_MMS network feature and the broadcast receiver to receive the network change event for that network, but it always just picks up the wifi change and never activates the correct network.

Is there something unique about Sprint phones? Again, this works fine on ATT and Verizon, all on Galaxy Nexus phones with the latest update.

**update:** here is my permission list

*   "android.permission.ACCESS_NETWORK_STATE"

*   "android.permission.CHANGE_NETWORK_STATE"

**update 2:** working on Galaxy Nexus on Sprint, but not HTC Thunderbolt on Sprint. The GNex had data disabled in the prefs

**update 3:** on the HTC Thunderbolt, whenever I run the code and then check the mobile data settings it shows the mobile network as "disconnected because service is unavailable". However, when I force close the app the mobile network returns to normal? Something about this code is causing the the network to turn off on the HTC Thunderbolt.

**update 4:** I'm seeing the following logcat output during my testing,

11-14 14:49:35.866: V/main(1078): TYPE_MOBILE status NetworkInfo: type: mobile[CDMA - EvDo rev. A], **state: DISCONNECTED/DISCONNECTED, reason: dataConnectionDenied**, extra: (none), roaming: false, failover: false, isAvailable: true 11-14 14:49:35.866: V/main(1078): TYPE_MOBILE_MMS status NetworkInfo: type: mobile_mms[CDMA - EvDo rev. A], **state: DISCONNECTED/IDLE, reason: psRestrictDisabled**, extra: (none), roaming: false, failover: false, isAvailable: true

It seems like the connection request is being denied, does anyone know why this might be happening?

# velocity - 速度属性不起作用

> ID：13382127
> 
> 赞同：0
> 
> 时间：2012-11-14T15:45:13.377
> 
> 标签：velocity

我在我的项目中使用velocity，并且我有一个列表，列表中的每个项目都有一个图标，但我想根据来自我的数据库的内容设置de class icon，以使我的菜单动态化。

```
 <li>
                    #foreach($item in $navegacao)
                    <a href="javascript:void(0);" class="with_sub"><img src="#link("resources/theme/mango/img/icons/packs/fugue/16x16/application-form.png")" alt="" height="16" width="16">$item.nome</a>
                    <ul class="sub" style="display: none;">
                        #foreach($nav in $item.navegacoes)
                            <li class="with-icon"><a href="ui_grid.html"><span class="icon icon-th"></span>$nav.nome</a></li>
                        #end
                    </ul>
                    #end
                </li> 
```

我有这个代码`<span class="icon icon-th"></span>`，但是`icon icon th`我想设置一个新类，而不是，我试过`<span class=$nav.classIcon></span>`但它不起作用。我的对象`navegacao`和`item.navegacoes`即将到来的我的会议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:26:09.997

您的`class`属性缺少引号；由于您要设置多个类，因此这些是必需的（并且无论如何都应该存在）。

# tree - PostORder Traversal to compute disk space

> ID：13382128
> 
> 赞同：1
> 
> 时间：2012-11-14T15:45:17.350
> 
> 标签：tree, postorder

I have read that one of the applications of postorder traversal in trees is to compute disk space. Why can't we use preorder traversal? Won't we get the same answer?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:53:18.110

后序意味着您在处理完该节点的整个子树（所有子树）后处理当前节点。

这正是您在计算磁盘空间时所做的。您从 c:\ 开始，然后递归地计算 c:\Users 的大小，然后计算 c:\Program Files、... 和 c:\Windows 的大小，最后计算出 c:\ 的大小汇总子文件夹的大小。在处理所有子文件夹之前，您无法计算 c:\ 的大小...

# c# - 为什么实体框架不使用工作单元实现身份映射？

> ID：13382129
> 
> 赞同：3
> 
> 时间：2012-11-14T15:45:17.553
> 
> 标签：c#, entity-framework, unit-of-work, identity-map

我已经编写了如下测试代码：

```
Entities db = new Entities();

var place = new Place
                {
                    Id = Guid.NewGuid(),
                    Name = "test",
                    Address = "address"
                };

db.Places.Add(place);

var cachedPlace = db.Places.Where(x => x.Id == place.Id).FirstOrDefault(); \\ null 
```

我预计 dbset 将返回添加的实体。但它只有在将更改保存到真实数据库后才给我对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:49:54.210

如果要访问未保存的查询，则使用 DbSet 的 Local 属性。

它不能按您想要的方式工作的原因是它还必须支持自动编号的身份，这意味着 ID 为 0。如果您插入多条记录，您将拥有多个具有相同 0 ID 的对象。EF 在保存之前不会知道真实 ID 是什么。

# javascript - 查找 html 标签之间的文本并将其放入变量中

> ID：13382135
> 
> 赞同：0
> 
> 时间：2012-11-14T15:45:28.193
> 
> 标签：javascript, jquery, html

我想获取 html 标签之间的文本，例如：

```
<div id="text">
This is the text I want to put into a variable for later use.
</div> 
```

这就是我想要对变量执行的操作：

```
var = ????thedivtext????;

$(function(){
$("#text").val(thedivtext);
)} 
```

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:46:51.560

你需要jquery 的**[text()](http://api.jquery.com/text/)**函数，如果你需要，text 方法不会给出 html 标签然后使用[**html()**](http://api.jquery.com/html/)

**[现场演示](http://jsfiddle.net/rajaadil/Ny5e5/)**

```
var v = $("#text").text(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:46:59.737

`var text = $("#text").text();`会给你文字。

# python - python scipy unit test

> ID：13382139
> 
> 赞同：1
> 
> 时间：2012-11-14T15:45:36.013
> 
> 标签：python, scipy

I have installed a number of python modules into a common Linux directory that a number of people will be using via an NFS mount (yes I understand that there is a performance hit with this esp with python) I have been able to run the scipy.test('full') as the user that owns the NFS mount as well as root.

Is there a way that I can pass in an argument to the scipy.test() function that will tell it what dir to build the sc_* and linux227compiled_catalog.d* files in? ie scpipt.test('full', /tmp) so that any user who mounts this can run these tests and not have write access to the NFS mount?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:59:40.093

nvm ...我将以下内容放入测试脚本中：

```
import scipy
import os
import shutil

directory = os.getcwd()

userHomeDirectory = ( "/home/" + os.getlogin())
userHomeScipyTests = ( userHomeDirectory + "/scipytests" )

#               print ("your current directory location is: " + directory)
print ("Making the following temp folder:  " + userHomeScipyTests )
if (os.path.isdir(userHomeScipyTests)):
        shutil.rmtree(userHomeScipyTests)

os.makedirs ( userHomeScipyTests )
os.chdir( userHomeScipyTests )
print os.getcwd()
output = scipy.test('full')
#               print ("this is the output of the scipy full test: " + str(output.wasSuccessful()))
self.assertEqual(str(output.wasSuccessful()), 'True', 'FullSciPyTest failed')
if (output.wasSuccessful):
print ("Removing the following temp folder: " + userHomeScipyTests )
    shutil.rmtree(userHomeScipyTests) 
```

# javascript - jQuery获取自定义事件的参数值

> ID：13382140
> 
> 赞同：0
> 
> 时间：2012-11-14T15:45:42.730
> 
> 标签：javascript, jquery, custom-events

如果我有：

```
blockRoutes = function (value) {
        $('body').trigger('cantLeaveRoute', { val: value });
        return value;
} 
```

除了绑定回调，如：

```
this.bind('cantLeaveRoute', function () {
        this.params['val'] === true ? nav.disableHeader() : nav.enableHeader()            
 }); 
```

**我怎样才能直接（没有上面显示的绑定）读取参数的当前值？**

类似于以下错误语法的内容：

```
$('body').data('events')['cantLeaveRoute'].val 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:47:22.413

您在触发器中设置的参数是事件的一部分

```
this.bind('cantLeaveRoute', function (event) {
 var value = event.data.val;
 value === true ? nav.disableHeader() : nav.enableHeader()            
}); 
```

# python - 用 C++ 编译 Python 项目。如何包含链接库

> ID：13382141
> 
> 赞同：2
> 
> 时间：2012-11-14T15:45:46.663
> 
> 标签：python, c, swig

嗨，stackoverflowers，

我想使用以下命令用 g++ 编译一个 SWIG 项目：

```
g++ -shared python/swig_wrap.o  -IC:/Python27/include/ -lpython2.7 -o python/_lib.so 
```

不幸的是，g++ 或者更确切地说 ld.exe 抱怨它找不到 -lpython2.7

```
c:/mingw/bin/../lib/gcc/mingw32/4.7.2/../../../../mingw32/bin/ld.exe: cannot find -lpython2.7 
```

如何指定库在硬盘上的位置，还是必须先从 python 源编译它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:49:21.527

尝试 ：

```
g++ -shared python/swig_wrap.o  -IC:/Python27/include/ -LC:/Python27/libs -lpython27 -o python/_lib.so 
```

它应该正常工作。

# windows-7 - Windows 7 上的 IE10 并排 IE8

> ID：13382149
> 
> 赞同：24
> 
> 时间：2012-11-14T15:46:23.577
> 
> 标签：windows-7, internet-explorer-10

我可以安装[IE10 Preview for Windows 7](http://ie.microsoft.com/testdrive/Info/Downloads/Default.html)并保留以前的 IE8 版本进行开发测试吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-17T06:21:45.830

我不相信您将能够在同一台机器上并排运行 IE8 和 IE10。相反，我鼓励您使用F12 开发人员工具中的[浏览器仿真选项。](http://blogs.msdn.com/b/ie/archive/2010/10/19/testing-sites-with-browser-mode-vs-doc-mode.aspx)从那里您可以指示 IE10 的行为就像 IE8 一样。

如果不需要仿真，并且您对下载[虚拟机​​映像](http://www.microsoft.com/en-us/download/details.aspx?id=11575)不感兴趣，您还可以考虑探索[BrowserStack 服务](http://www.browserstack.com/start)。它将允许您在多个版本的 Windows 上启动 IE8，并查看远程和本地文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-13T19:33:01.290

我认为这对于开发人员来说是一个更可靠的选择

[IE 1-8 独立](http://finalbuilds.com/iecollection.htm)

它包含

*   Internet Explorer 1.0 (4.40.308)
*   Internet Explorer 1.5 (0.1.0.10)
*   Internet Explorer 2.01 (2.01.046)
*   Internet Explorer 3.0 (3.0.1152)
*   Internet Explorer 3.01 (3.01.2723)
*   Internet Explorer 3.03 (3.03.2925)
*   Internet Explorer 4.01 (4.72.3110.0)
*   Internet Explorer 5.01 (5.00.3314.2100)
*   Internet Explorer 5.5 (5.51.4807.2300)
*   Internet Explorer 6.0 (6.00.2800.1106)
*   Internet Explorer 6.0 (6.00.2900.2180)
*   Internet Explorer 7.0 (7.00.5730.13)
*   Internet Explorer 8.0 (8.00.6001.18702)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-23T02:36:33.943

还可以考虑 IETester - [http://my-debugbar.com/wiki/IETester/HomePage](http://my-debugbar.com/wiki/IETester/HomePage)

您可以在不同的浏览器版本中并排运行选项卡。适用于我的 Web 开发测试。

![IETest](../Images/e65d3e99e9b2fb9849bc98f4ba2b1a7f.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-15T09:28:50.610

MS 为 IE 测试启动了一个额外的主页。[http://loc.modern.ie/](http://loc.modern.ie/)下有很多选项

![在此处输入图像描述](../Images/3975fc78c335b9e3cd2af3b58779b14a.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-11T17:01:13.947

您可以考虑使用 VMware ThinApp（虚拟化应用程序）或 Microsoft RemoteApp（从远程服务器运行应用程序）。

在我的环境中，我混合了 ThinApp 和 RemoteApp（一些应用程序虚拟化 (ThinApp)，然后使用 RemoteApp 访问）。

# php - PHP 5 如何从一个函数调用多个值？

> ID：13382150
> 
> 赞同：-1
> 
> 时间：2012-11-14T15:46:23.327
> 
> 标签：php, oop, class, design-patterns

如果我有以下类示例：

```
<?php
class Person
{
    private $prefix;
    private $givenName;
    private $familyName;
    private $suffix;

    public function setPrefix($prefix)
    {
        $this->prefix = $prefix;
    }

    public function getPrefix()
    {
        return $this->prefix;
    }

    public function setGivenName($gn)
    {
        $this->givenName = $gn;
    }

    public function getGivenName()
    {
        return $this->givenName;
    }

    public function setFamilyName($fn)
    {
        $this->familyName = $fn;
    }

    public function getFamilyName() 
    {
        return $this->familyName;
    }

    public function setSuffix($suffix)
    {
        $this->suffix = $suffix;
    }

    public function getSuffix()
    {
        return $suffix;
    }

}

$person = new Person();
$person->setPrefix("Mr.");
$person->setGivenName("John");

echo($person->getPrefix());
echo($person->getGivenName());

?> 
```

我在 PHP（最好是 5.4）中有一种方法，可以将这些返回值组合到一个函数中，这样它的模型更像是 JavaScript 中的显示模块模式？

**更新：** 好的，我现在开始了解在 PHP 中，从函数返回单个值是规范的，但您“可以”返回多个值的数组。这是我的问题的最终答案，我将在这种理解下深入研究一些实践。

小例子——

```
function fruit () {
return [
 'a' => 'apple', 
 'b' => 'banana'
];
}
echo fruit()['b']; 
```

还有一篇我在stackoverflow上遇到的关于该主题的文章... [PHP：是否可以从函数返回多个值？](https://stackoverflow.com/questions/3579892/php-is-it-possible-to-return-multiple-values-from-a-function)

祝你好运！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:56:12.680

你听起来像是想要[`__get()`魔法的方法](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)。

```
class Thing {

private $property;

public function __get($name) {
    if( isset( $this->$name ) {
        return $this->$name;
    } else {
        throw new Exception('Cannot __get() class property: ' . $name);
    }
}

} // -- end class Thing --

$athing = new Thing();
$prop = $athing->property; 
```

如果您希望一次返回所有值，就像在 Marc B 的示例中一样，我将为此简化类设计：

```
class Thing {

private $properties = array();

public function getAll() {
    return $properties;
}

public function __get($name) {
    if( isset( $this->properties[$name] ) {
        return $this->properties[$name];
    } else {
        throw new Exception('Cannot __get() class property: ' . $name);
    }
}

} // -- end class Thing --

$athing = new Thing();
$prop   = $athing->property;
$props  = $athing-> getAll(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:48:26.670

也许

```
public function getAll() {
    return(array('prefix' => $this->prefix, 'givenName' => $this->giveName, etc...));
} 
```

# arrays - Is indexing vectors in MATLAB inefficient?

> ID：13382155
> 
> 赞同：56
> 
> 时间：2012-11-14T15:46:36.337
> 
> 标签：arrays, performance, matlab, loops, vectorization

**Background**

My question is motivated by simple observations, which somewhat undermine the beliefs/assumptions often held/made by experienced MATLAB users:

*   MATLAB is very well optimized when it comes to the built-in functions and the fundamental language features, such as indexing vectors and matrices.
*   Loops in MATLAB are slow (despite the JIT) and should generally be avoided if the algorithm can be expressed in a native, 'vectorized' manner.

The bottom line: core MATLAB functionality is efficient and trying to outperform it using MATLAB code is hard, if not impossible.

**Investigating performance of vector indexing**

The example codes shown below are as fundamental as it gets: I assign a scalar value to all vector entries. First, I allocate an empty vector `x`:

```
tic; x = zeros(1e8,1); toc
Elapsed time is 0.260525 seconds. 
```

Having `x` I would like to set all its entries to the same value. In practice you would do it differently, e.g., `x = value*ones(1e8,1)`, but the point here is to investigate the performance of vector indexing. The simplest way is to write:

```
tic; x(:) = 1; toc
Elapsed time is 0.094316 seconds. 
```

Let's call it method 1 (from the value assigned to `x`). It seems to be very fast (faster at least than memory allocation). Because the only thing I do here is operate on memory, I can estimate the efficiency of this code by calculating the obtained *effective memory bandwidth* and comparing it to the *hardware memory bandwidth* of my computer:

```
eff_bandwidth = numel(x) * 8 bytes per double * 2 / time 
```

In the above, I multiply by `2` because unless SSE streaming is used, setting values in memory requires that the vector is both read from and written to the memory. In the above example:

```
eff_bandwidth(1) = 1e8*8*2/0.094316 = 17 Gb/s 
```

[STREAM-benchmarked memory bandwidth](https://www.cs.virginia.edu/stream/) of my computer is around 17.9 Gb/s, so indeed - MATLAB delivers close to peak performance in this case! So far, so good.

Method 1 is suitable if you want to set *all* vector elements to some value. But if you want to access elements every `step` entries, you need to substitute the `:` with e.g., `1:step:end`. Below is a direct speed comparison with method 1:

```
tic; x(1:end) = 2; toc
Elapsed time is 0.496476 seconds. 
```

While you would not expect it to perform any different, method 2 is clearly big trouble: factor 5 slowdown for no reason. My suspicion is that in this case MATLAB explicitly allocates the index vector (`1:end`). This is somewhat confirmed by using explicit vector size instead of `end`:

```
tic; x(1:1e8) = 3; toc
Elapsed time is 0.482083 seconds. 
```

Methods 2 and 3 perform equally bad.

Another possibility is to explicitly create an index vector `id` and use it to index `x`. This gives you the most flexible indexing capabilities. In our case:

```
tic;
id = 1:1e8; % colon(1,1e8);
x(id) = 4;
toc
Elapsed time is 1.208419 seconds. 
```

Now that is really something - 12 times slowdown compared to method 1! I understand it should perform worse than method 1 because of the additional memory used for `id`, but why is it so much worse than methods 2 and 3?

Let's try to give the loops a try - as hopeless as it may sound.

```
tic;
for i=1:numel(x)
    x(i) = 5;
end
toc
Elapsed time is 0.788944 seconds. 
```

A big surprise - a loop beats a `vectorized` method 4, but is still slower than methods 1, 2 and 3\. It turns out that in this particular case you can do it better:

```
tic;
for i=1:1e8
    x(i) = 6;
end
toc
Elapsed time is 0.321246 seconds. 
```

And that is the probably the most bizarre outcome of this study - **a MATLAB-written loop significantly outperforms native vector indexing**. That should certainly not be so. Note that the JIT'ed loop is still 3 times slower than the theoretical peak almost obtained by method 1\. So there is still plenty of room for improvement. It is just surprising (a stronger word would be more suitable) that usual 'vectorized' indexing (`1:end`) is even slower.

**Questions**

*   is simple indexing in MATLAB **very** inefficient (methods 2, 3, and 4 are slower than method 1), or did I miss something?
*   why is method 4 **(so much) slower** than methods 2 and 3?
*   why does using `1e8` instead of `numel(x)` as a loop bound speed up the code by factor 2?

**Edit** After reading Jonas's comment, here is another way to do that using logical indices:

```
tic;
id = logical(ones(1, 1e8));
x(id) = 7;
toc
Elapsed time is 0.613363 seconds. 
```

Much better than method 4.

For convenience:

```
function test

tic; x = zeros(1,1e8); toc

tic; x(:) = 1; toc
tic; x(1:end) = 2; toc
tic; x(1:1e8) = 3; toc

tic;
id = 1:1e8; % colon(1,1e8);
x(id) = 4;
toc

tic;
for i=1:numel(x)
    x(i) = 5;
end
toc

tic;
for i=1:1e8
    x(i) = 6;
end
toc

end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-14T16:12:14.017

当然，我只能推测。但是，当我在启用和禁用 JIT 编译器的情况下运行测试时，我得到以下结果：

```
 % with JIT   no JIT
    0.1677    0.0011 %# init
    0.0974    0.0936 %# #1 I added an assigment before this line to avoid issues with deferring
    0.4005    0.4028 %# #2
    0.4047    0.4005 %# #3
    1.1160    1.1180 %# #4
    0.8221   48.3239 %# #5 This is where "don't use loops in Matlab" comes from 
    0.3232   48.2197 %# #6
    0.5464   %# logical indexing 
```

除法向我们展示了速度增加的地方：

```
% withoutJit./withJit
    0.0067 %# w/o JIT, the memory allocation is deferred
    0.9614 %# no JIT
    1.0057 %# no JIT
    0.9897 %# no JIT
    1.0018 %# no JIT
   58.7792 %# numel
  149.2010 %# no numel 
```

初始化的明显加速发生了，因为在关闭 JIT 的情况下，MATLAB 似乎会延迟内存分配直到它被使用，所以 x=zeros(...) 并没有真正做任何事情。（谢谢，@angainor）。

方法 1 到 4 似乎没有从 JIT 中受益。我猜想#4 可能会因为额外的输入测试而变慢，`subsref`以确保输入的格式正确。

结果`numel`可能与编译器更难处理不确定的迭代次数有关，或者由于检查循环的边界是否正常而产生一些开销（认为无 JIT 测试建议只有 ~0.1s )

令人惊讶的是，在我机器上的 R2012b 上，逻辑索引似乎比 #4 慢。

*我认为这再次表明，MathWorks 在加速代码方面做得很好，如果你想获得最快的执行时间，“不使用循环”并不总是最好的（至少眼下）。尽管如此，我发现矢量化通常是一种很好的方法，因为 (a) JIT 在更复杂的循环中失败，并且 (b) 学习矢量化可以让您更好地理解 Matlab。*

**结论：如果您想要速度，请使用分析器，如果您切换 Matlab 版本，请重新分析。** 正如@Adriaan 在评论中指出的那样，现在使用 timeit() 来衡量执行速度可能会更好。

* * *

作为参考，我使用了以下稍微修改的测试功能

```
function tt = speedTest

tt = zeros(8,1);

tic; x = zeros(1,1e8); tt(1)=toc;

x(:) = 2;

tic; x(:) = 1; tt(2)=toc;
tic; x(1:end) = 2; tt(3)=toc;
tic; x(1:1e8) = 3; tt(4)=toc;

tic;
id = 1:1e8; % colon(1,1e8);
x(id) = 4;
tt(5)=toc;

tic;
for i=1:numel(x)
    x(i) = 5;
end
tt(6)=toc;

tic;
for i=1:1e8
    x(i) = 6;
end
tt(7)=toc;

%# logical indexing
tic;
id = true(1e8,1));
x(id)=7;
tt(8)=toc; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-14T17:42:03.783

我没有对所有问题的答案，但我对方法2、3和4有一些精炼的推测。

关于方法 2 和 3。看起来 MATLAB 确实为向量索引分配内存并用从`1`to的值填充它`1e8`。为了理解它，让我们看看发生了什么。默认情况下，MATLAB 使用`double`它的数据类型。分配索引数组的时间与分配时间相同`x`

```
tic; x = zeros(1e8,1); toc
Elapsed time is 0.260525 seconds. 
```

目前，索引数组仅包含零。`x`与方法 1 一样，以最佳方式为向量赋值需要`0.094316`几秒钟。现在，必须从内存中读取索引向量，以便在索引中使用它。那是额外的`0.094316/2`秒数。回想一下，`x(:)=1`向量`x`必须同时从内存中读取和写入。所以只阅读它需要一半的时间。假设这就是所有在 中完成的`x(1:end)=value`，方法 2 和 3 的总时间应该是

```
t = 0.260525+0.094316+0.094316/2 = 0.402 
```

这几乎是正确的，但并不完全正确。我只能推测，但是用值填充索引向量可能是一个额外的步骤，并且需要额外的 0.094316 秒。因此 ,`t=0.4963`或多或少符合方法 2 和 3 的时间。

这些只是推测，但它们似乎确实证实了 MATLAB在进行本机向量索引时会**显式创建索引向量。**就个人而言，我认为这是一个性能错误。MATLAB 的 JIT 编译器应该足够聪明，能够理解这个简单的结构并将其转换为对正确内部函数的调用。就像现在一样，在当今的内存带宽受限架构中，索引的理论峰值约为 20%。

因此，如果您确实关心性能，则必须将其实现`x(1:step:end)`为 MEX 函数，例如

```
set_value(x, 1, step, 1e8, value); 
```

现在这在 MATLAB 中显然是非法的，因为您**不能**就地修改 MEX 文件中的数组。

**编辑**关于方法4，可以尝试分析各个步骤的性能，如下所示：

```
tic;
id = 1:1e8; % colon(1,1e8);
toc
tic
x(id) = 4;
toc

Elapsed time is 0.475243 seconds.
Elapsed time is 0.763450 seconds. 
```

第一步，分配和填充索引向量的值与单独的方法 2 和 3 所用的时间相同。似乎太多了 - 最多应该花费分配内存和设置值（`0.260525s+0.094316s = 0.3548s`）所需的时间，所以在某处有几秒钟的额外开销`0.12`，我无法理解。第二部分 ( ) 看起来也非常低效：设置 的值、读取向量 ( ) 以及对值进行一些错误检查`x(id) = 4`需要花费时间。用C编程，两个步骤采取：`x``id``0.094316s+0.094316/2s = 0.1415s``id`

```
create id                              0.214259
x(id) = 4                              0.219768 
```

使用的代码检查`double`索引是否实际上代表一个整数，并且它是否适合 的大小`x`：

```
tic();
id  = malloc(sizeof(double)*n);
for(i=0; i<n; i++) id[i] = i;
toc("create id");

tic();
for(i=0; i<n; i++) {
  long iid = (long)id[i];
  if(iid>=0 && iid<n && (double)iid==id[i]){
    x[iid] = 4;
  } else break;
}
toc("x(id) = 4"); 
```

第二步花费的时间比预期的要长`0.1415s`——这是由于需要对`id`值进行错误检查。开销对我来说似乎太大了——也许它可以写得更好。不过，所需的时间是`0.4340s`，不是`1.208419s`。MATLAB 在幕后做了什么——我不知道。也许有必要这样做，我只是没有看到。

当然，使用`doubles`as 索引会引入两个额外的开销级别：

*   大小的`double`两倍`uint32`。回想一下，内存带宽是这里的限制因素。
*   需要将双精度转换为整数以进行索引

方法 4 可以使用整数索引在 MATLAB 中编写：

```
tic;
id = uint32(1):1e8;
toc
tic
x(id) = 8;
toc

Elapsed time is 0.327704 seconds.
Elapsed time is 0.561121 seconds. 
```

这显然将性能提高了 30%，并证明应该使用整数作为向量索引。但是，开销仍然存在。

正如我现在所看到的，我们无法做任何事情来改善在 MATLAB 框架内工作的情况，我们必须等到 Mathworks 修复这些问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-11-01T07:10:01.803

简单说明一下，在 8 年的发展中，MATLAB 的性能特征发生了很大变化。

这是在 R2017a 上（OP 发布 5 年后）：

```
Elapsed time is 0.000079 seconds.    % x = zeros(1,1e8);
Elapsed time is 0.101134 seconds.    % x(:) = 1;
Elapsed time is 0.578200 seconds.    % x(1:end) = 2;
Elapsed time is 0.569791 seconds.    % x(1:1e8) = 3;
Elapsed time is 1.602526 seconds.    % id = 1:1e8; x(id) = 4;
Elapsed time is 0.373966 seconds.    % for i=1:numel(x), x(i) = 5; end
Elapsed time is 0.374775 seconds.    % for i=1:1e8, x(i) = 6; end 
```

请注意 for 循环`1:numel(x)`比 indexing 更快`x(1:end)`，似乎`1:end`仍在创建数组，而 for 循环则不是。现在在 MATLAB 中最好*不要*向量化！

（我确实`x(:)=0`在分​​配矩阵之后添加了一个赋值，在任何定时区域之外，实际分配了内存，因为`zeros`只保留内存。）

* * *

在 MATLAB R2020b（在线）（3 年后）上，我看到了这些时间：

```
Elapsed time is 0.000073 seconds.    % x = zeros(1,1e8);
Elapsed time is 0.084847 seconds.    % x(:) = 1;
Elapsed time is 0.084643 seconds.    % x(1:end) = 2;
Elapsed time is 0.085319 seconds.    % x(1:1e8) = 3;
Elapsed time is 1.393964 seconds.    % id = 1:1e8; x(id) = 4;
Elapsed time is 0.168394 seconds.    % for i=1:numel(x), x(i) = 5; end
Elapsed time is 0.169830 seconds.    % for i=1:1e8, x(i) = 6; end 
```

`x(1:end)`现在在与 相同的情况下进行了优化，不再显式创建`x(:)`向量。`1:end`

# android - The galaxy s3 wont take picture

> ID：13382158
> 
> 赞同：3
> 
> 时间：2012-11-14T15:46:41.670
> 
> 标签：android, android-activity, camera

So i'm trying to run picture capture to load image into imageview, it works fine on samsung galaxy mini and galaxy one, however on samsung galaxy s3 it crashes when returning to the app. my code to start the activity:

```
 Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
  startActivityForResult(cameraIntent, 11); 
```

And code where i recieve activity result:

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
   if (resultCode == RESULT_OK && requestCode == 11) { 
        ImageView slika=(ImageView)findViewById(R.id.nesrecaSlika1);
        Bitmap photo = (Bitmap) data.getExtras().get("data");            
        slika.setImageBitmap(photo);

    } 
```

However when i was debugging there is no error in the code, but app just crashes on return. If i go back without taking picture it works fine on. In my logcat i get that problem:

```
11-14 16:39:08.976: E/AndroidRuntime(19745): FATAL EXCEPTION: main
11-14 16:39:08.976: E/AndroidRuntime(19745): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid; is your activity running?
11-14 16:39:08.976: E/AndroidRuntime(19745):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:702)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:316)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:218)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:143)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at android.view.Window$LocalWindowManager.addView(Window.java:547)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at android.widget.PopupWindow.invokePopup(PopupWindow.java:1001)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at android.widget.PopupWindow.showAtLocation(PopupWindow.java:858)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at android.widget.PopupWindow.showAtLocation(PopupWindow.java:822)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at com.motiviti.zmapp.MainActivity.showPopup(MainActivity.java:310)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at com.motiviti.zmapp.MainActivity.access$10(MainActivity.java:297)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at com.motiviti.zmapp.MainActivity$8.run(MainActivity.java:287)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at android.os.Handler.handleCallback(Handler.java:605)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at android.os.Looper.loop(Looper.java:137)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at android.app.ActivityThread.main(ActivityThread.java:4514)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at java.lang.reflect.Method.invokeNative(Native Method)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at java.lang.reflect.Method.invoke(Method.java:511)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
11-14 16:39:08.976: E/AndroidRuntime(19745):    at dalvik.system.NativeStart.main(Native Method) 
```

Any ideas what it might be?

I jsut tested with that code:

```
 Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
 startActivity(cameraIntent); 
```

And steal it crashes when returning to my app.

# dns - 减少 DNS 查找时间

> ID：13382160
> 
> 赞同：0
> 
> 时间：2012-11-14T15:46:50.877
> 
> 标签：dns, nameservers

通过 Firebug 访问我的网站时，我可以看到很多等待时间和 DNS 查找时间。我的网站 ：`http://www.javaexperience.com`

像这样的网站`http://javapapers.com`有 0 毫秒的等待时间和非常短的 DNS 查找时间。

我可以从网站或网络主机端做些什么来减少这种延迟吗？对名称服务器有什么建议吗？

# grep - 通过查找和替换维护 GREP 变量

> ID：13382166
> 
> 赞同：0
> 
> 时间：2012-11-14T15:47:05.583
> 
> 标签：grep, replace

我最近进行了一个将文档转换为 HTML 的项目。也就是说，客户给了我一个 .DOC 文件，我需要将内容转换为一个长的 HTML 文件——没有样式，没有 CSS，只需使用段落标签、标题标签等清理 HTML。

我发现一个应用程序在自动化它的第一部分方面做得很好。问题是我需要使用变量基于字符串进行一些高级查找和替换。

例如，我有正确转换的脚注。它们目前显示为上标数字，带有

我想更改脚注的显示方式。而不是第 6 个脚注的上标数字 6，我希望它显示（注 6）

要在整个文档（数百个脚注）上执行此操作，我想知道是否可以执行以下操作：

寻找：

```
<sup><a name="FN[0-9]" href="FNR[0-9]">[0-9]</a></sup> 
```

代替：

```
<a name="FN%1" href="FNR%2">(Note %3)</a> 
```

问题是，我找不到可以让我在替换区域中维护变量的查找和替换工具。我得到的只是上标 6 显示为（注 %3），以及所有其他脚注都在做同样的事情。

有人对我如何有效地完成任务有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:24:28.720

在 Perl 中，它在命令行上大致如下所示（我没有测试过）：

```
perl -i -p -e's{<sup><a name="(FN\d)" href="(FNR\d)">(\d)</a></sup>}{<a name="$1" href="$2">(Note $3)</a>}' filenames.... 
```

`-i`说“就地编辑这个文件”，`-p`意思是“在我们完成`-e`开关中的任何操作后打印每一行”。

那是假设您只在`[0-9]`. 如果要匹配 FN427，则更`(FN\d)`改为`(FN\d+)`，例如。

这也假设您正在解析的 HTML 看起来完全一样。如果你得到一些 HTML `<a href=... name=...`（属性的顺序与你的顺序相反），那么它就会中断。在这种情况下，您需要使用 HTML 解析器。

我希望这能给你足够的开始。

# iphone - NSTimer 和 NSDate 倒计时时钟在模拟器中有效，但在设备上无效

> ID：13382169
> 
> 赞同：1
> 
> 时间：2012-11-14T15:47:09.547
> 
> 标签：iphone, objective-c, ios, nsdate, nstimer

我有一个 NSTimer 和一个 NSDate 一起工作来制作倒计时时钟。然后使用倒计时更新 UILabel。

我面临的问题是倒计时时钟在模拟器中有效，但在设备上无效。模拟器 iOS 6.0 和设备 iOS 6.0.1。

这是我的代码：

```
-(void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:YES];

    [self startTimer];

}

 // timer and update label to display a countdown clock 
- (void)startTimer {

    // Create a timer that fires every second repeatedly and save it in an ivar
    NSTimer *timer = [[NSTimer alloc] init];

    timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateLabel) userInfo:nil repeats:YES];

}

  - (void)updateLabel {

    // convert date string to date then set to a label
    NSDateFormatter *dateStringParser = [[NSDateFormatter alloc] init];
    [dateStringParser setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.000Z"];

    NSDate *date = [dateStringParser dateFromString:deadlineDate];

    NSLog(@"date from update label %@", date);

    NSTimeInterval timeInterval = [date timeIntervalSinceNow]; ///< Assuming this is in the future for now.

    NSString *stringVariable = [self stringFromTimeInterval:timeInterval];

    self.deadlineLbl.text = [NSString stringWithFormat:@"%@", stringVariable];

    NSLog(@"%@",stringVariable);

}

- (NSString *)stringFromTimeInterval:(NSTimeInterval)interval {
    NSInteger ti = (NSInteger)interval;
  //  NSInteger seconds = ti % 60;
    NSInteger minutes = (ti / 60) % 60;
    NSInteger hours = (ti / 3600);
    return [NSString stringWithFormat:@"%02i hours : %02i min", hours, minutes];
} 
```

这是首先在模拟器上然后在设备上的一些控制台输出：

模拟器控制台输出：

```
2012-11-14 15:39:57.021 appName[7856:13d03] 31 hours : 20 min
2012-11-14 15:39:58.020 appName[7856:13d03] 31 hours : 20 min
2012-11-14 15:39:59.021 appName[7856:13d03] 31 hours : 19 min
2012-11-14 15:40:00.021 appName[7856:13d03] 31 hours : 19 min 
```

设备控制台输出：

```
2012-11-14 15:45:44.887 appName[7556:907] 00 hours : 00 min
2012-11-14 15:45:45.896 appName[7556:907] 00 hours : 00 min
2012-11-14 15:45:46.891 appName[7556:907] 00 hours : 00 min
2012-11-14 15:45:47.891 appName[7556:907] 00 hours : 00 min 
```

我遇到的另一个问题是用户离开视图后计时器不断更新。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:07:50.147

检查行中的日期变量：

```
NSDate *date = [dateStringParser dateFromString:deadlineDate]; 
```

`date`如果不为零，则检查调试器。如果是，那么问题出在`deadlineDate`which 不是在中定义的预期格式`dateStringParser`（或者`deadlineDate`也是 nil）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T00:04:23.767

就模拟器和硬件之间的不同行为而言，这些代码看起来都没有可疑之处。

你如何初始化deadlineDate？尝试通过在启动计时器中强制一个值来排除这个问题......

```
deadlineDate = [NSDate dateWithTimeIntervalSinceNow:3600]; 
```

您可以对代码进行一些其他改进（例如，不确定您在 startTimer 方法中使用 labelFormatter 做什么，可以删除这些行，持久化日期格式化程序等），但没有什么可以解释模拟器与硬件行为。

# jquery - jquery：根据id获取第一个文本

> ID：13382171
> 
> 赞同：0
> 
> 时间：2012-11-14T15:47:14.197
> 
> 标签：jquery, kendo-ui

我希望能够根据行 ID 获得 1 或 2 的值。

```
<tbody>
<tr data-uid="4584f83c-5ebe-4463-883e-4113b38e9ef3">
    <td>1</td>
    <td>Commons</td>
    <td>Amherst</td>
    <td>Massachusetts</td>
    <td><a class="k-button k-button-icontext k-grid-edit" href="#"><span class="k-icon k-edit"></span>Edit</a><a class="k-button k-button-icontext k-grid-D" href="#"><span class=" "></span>D</a></td>
</tr>
<tr class="k-alt" data-uid="4146df62-1788-4296-8ff9-f8b523a4e844">
    <td>2</td>
    <td>Chase</td>
    <td>Amherst</td>
    <td>Massachusetts</td>
    <td><a class="k-button k-button-icontext k-grid-edit" href="#"><span class="k-icon k-edit"></span>Edit</a><a class="k-button k-button-icontext k-grid-D" href="#"><span class=" "></span>D</a></td>
</tr> 
```

这是我尝试过的：

```
var dataItem = this.dataItem($(e.currentTarget).closest("tr")); 
var propId = $("#Grid").data("kendoGrid").tbody.find("tr[data-uid='" + dataItem.uid + "']").first("td").html(); 
```

和

```
var dataItem = this.dataItem($(e.currentTarget).closest("tr")); 
var propId = $("#Grid").data("kendoGrid").tbody.find("tr[data-uid='" + dataItem.uid + "']").first("td").text(); 
```

第二个几乎起作用了，但它返回`TD`了`TR`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:59:14.843

```
$('tr[data-uid*="4584f83c-5ebe-4463-883e-4113b38e9ef3"] td:eq(0)').html(); 
```

**或者**

```
$('tr[data-uid*="4584f83c-5ebe-4463-883e-4113b38e9ef3"] td:eq(0)').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:50:29.350

一些简单的事情：`$('table tbody tr:eq(0) td:eq(0)').text();`记住所有索引都从 0 开始，所以第 1 行实际上是第 0 行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:51:06.060

您必须`tr`使用属性选择器选择正确的属性，然后使用子选择器为其子选择器，`td`最后是：`.first()``.text()`

```
var id = $("tr[data-uid='...'] > td").first().text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:56:36.777

```
$('tr[data-uid*="4584f83c-5ebe-4463-883e-4113b38e9ef3"]:first-child').html(); 
```

# oracle - 在同一个嵌套表上批量收集两次

> ID：13382174
> 
> 赞同：5
> 
> 时间：2012-11-14T15:47:27.377
> 
> 标签：oracle, plsql, oracle11g, bulk-collect

有没有办法在第二次批量收集之后，数据不会覆盖第一次批量收集。我不想循环迭代。

```
 DECLARE
       TYPE abc IS RECORD (p_id part.p_id%TYPE);

       TYPE abc_nt
       IS
          TABLE OF abc
             INDEX BY BINARY_INTEGER;

       v_abc_nt      abc_nt;
    BEGIN
       SELECT   p_id
         BULK   COLLECT
         INTO   v_abc_nt
         FROM   part
        WHERE   p_id IN ('E1', 'E2');

       SELECT   p_id
         BULK   COLLECT
         INTO   v_abc_nt
         FROM   part
        WHERE   p_id IN ('E3', 'E4');

       FOR i IN v_abc_nt.FIRST .. v_abc_nt.LAST
       LOOP
          DBMS_OUTPUT.put_line (
             'p_id is ' || v_abc_nt (i).p_id
          );
       END LOOP;
    END; 
```

**输出：**

*   p_id 是 E3
*   p_id 是 E4

*注意：E1 和 E2 存在于零件表中。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-14T16:05:06.630

您不能简单地将数据添加到集合中，不。

但是，您可以将 a`BULK COLLECT`放入一个单独的集合中，然后假设您确实只需要/想要一个嵌套表而不是关联数组来组合这些集合......

```
DECLARE
   TYPE abc IS RECORD (p_id part.p_id%TYPE);

   TYPE abc_nt
   IS
      TABLE OF abc;

   v_abc_nt       abc_nt;
   v_abc_nt2      abc_nt;
BEGIN
   SELECT   p_id
     BULK   COLLECT
     INTO   v_abc_nt
     FROM   part
    WHERE   p_id IN ('E1', 'E2');

   SELECT   p_id
     BULK   COLLECT
     INTO   v_abc_nt2
     FROM   part
    WHERE   p_id IN ('E3', 'E4');

   v_abc_nt := v_abc_nt MULTISET UNION v_abc_nt2;

   FOR i IN v_abc_nt.FIRST .. v_abc_nt.LAST
   LOOP
      DBMS_OUTPUT.put_line (
         'p_id is ' || v_abc_nt (i).p_id
      );
   END LOOP;
END; 
```

如果您真的想使用关联数组，则需要编写一些代码，因为当您将一个数组与另一个具有某些相同键的关联数组组合时，Oracle 无法自动知道如何重新映射该数组的关联.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T08:05:04.627

你可以这样写

不好的例子：

 `````
declare
  type t_numb is record(
    numb number);
  type t_numb_list is table of t_numb;
  v_numb_list t_numb_list;
begin
  with q as
   (select 1 a from dual union select 2 from dual union select 3 from dual)
  select q.a bulk collect into v_numb_list from q;
  with w as
   (select 4 a from dual union select 5 from dual union select 6 from dual)
  select w.a bulk collect into v_numb_list from w;

  for r in 1 .. v_numb_list.count loop
    dbms_output.put_line(v_numb_list(r).numb);
  end loop;
end; 
````  `这很好用：

 `````
declare
  type t_numb is record(
    numb number);
  type t_numb_list is table of t_numb;
  v_numb_list t_numb_list := t_numb_list();
  v_numb      t_numb;
begin
  for q in (select 1 a
              from dual
            union
            select 2
              from dual
            union
            select 3
              from dual) loop
    v_numb.numb := q.a;
    v_numb_list.extend;
    v_numb_list(v_numb_list.count) := v_numb;
  end loop;

  for w in (select 4 a
              from dual
            union
            select 5
              from dual
            union
            select 6
              from dual) loop
    v_numb.numb := w.a;
    v_numb_list.extend;
    v_numb_list(v_numb_list.count) := v_numb;
  end loop;

  for r in 1 .. v_numb_list.count loop
    dbms_output.put_line(v_numb_list(r).numb);
  end loop;
end; 
```````

# c# - 路线模式与单个路线

> ID：13382175
> 
> 赞同：2
> 
> 时间：2012-11-14T15:47:36.677
> 
> 标签：c#, asp.net-mvc, routes, asp.net-mvc-routing

目前我有一个看起来像这样的控制器：

```
public class MyController : Controller
{
    public ActionResult Action1 (int id1, int id2)
    {

    }

    public ActionResult Action2 (int id3, int id4)
    {

    }
} 
```

如您所见，我的两个控制器都具有相同的参数“模式”，即两个不可为空的有符号整数。

我的路线配置如下所示：

```
routes.MapRoute(
    name: "Action2",
    url: "My/Action2/{id3}-{id4}",
    defaults: new { controller = "My", action = "Action2", id3 = 0, id4 = 0 }
);

routes.MapRoute(
    name: "Action1",
    url: "My/Action1/{id1}-{id2}",
    defaults: new { controller = "My", action = "Action1", id1 = 0, id2 = 0 }
);

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

然而，我有比这两个更多的控制器动作，所以基本上我一直在为每个动作映射一个单独的路线，这让我觉得很混乱。

我想知道的是我是否可以使用两个参数而不是一个参数来执行类似于默认路由的操作，例如：

```
routes.MapRoute(
    name: "Default2",
    url: "{controller}/{action}/{id1}-{id2}",
    defaults: new { controller = "Home", action = "Index", id1 = 0, id2 = 0 }
); 
```

但是，鉴于我的参数并不总是被命名`id1`并且`id2`这不起作用（错误是“参数字典包含参数的空条目”。有没有办法可以做到这一点？（或者完全不同的方式更好？ )

谢谢您的帮助！

编辑：根据迄今为止的答案，我的问题似乎有点误导。我特别想要一个带有通用参数的路由，所以不依赖于特定的参数名称。

我希望能够告诉路由管理器“嘿，如果您收到带有模式的请求`{controller}/{action}/{parameter}-{parameter}`，我希望您将这两个参数传递给指定的控制器和操作，无论它们的类型或名称如何！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:52:27.330

只看默认路由：

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

关键位是`UrlParameter.Optional`. 这使您可以提供如下所示的操作：

```
public ActionResult Action1() 
```

和：

```
public ActionResult Action2(int id) 
```

甚至：

```
public ActionResult Action3(int? id) 
```

*（后者允许参数为空值）*

**强制性警告**

请记住，使用通用路线有一些注意事项。MVC 中的模型绑定器*非常*宽容。它只是尝试从可以收集信息的任何来源中填充尽可能多的参数。因此，即使您的特定路线仅通过`id1`，也没有什么能阻止狡猾的用户`?id2=something`跟随它。如果模型绑定器可以使用它，它会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T04:50:38.677

我想向您展示另一种方法。它可能不像你想的那么容易。但关键部分从声明转移到代码。所以你可以做更多的事情来调整你的设置。

与以前的答案相比，这个解决方案正在工作，做你想做的事。我不是在讨论您的意图，因此请仅将其作为可行的解决方案。

首先，我们将用一个约束来扩展声明，并稍微奇怪地命名*id参数：*

```
routes.MapRoute(
  name: "Default2",
  url: "{controller}/{action}/{theId1}-{theId2}",
  defaults: new { controller = "Home", action = "Index", theId1 = 0, theId2 = 0 },
  constraints: new { lang = new MyRouteConstraint() }
); 
```

现在在约束中我们可以扩展值集合（重复我们的参数）

```
public class MyRouteConstraint : IRouteConstraint
{
    public bool Match(System.Web.HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        // for now skip the Url generation
        if (routeDirection.Equals(RouteDirection.UrlGeneration))
        {
            return false;
        }

        // try to find out our parameters
        object theId1 = null;
        object theId2 = null;

        var parametersExist = values.TryGetValue("theId1", out theId1)
                            && values.TryGetValue("theId2", out theId2);

        // not our case
        if( ! parametersExist)
        {
            return false;
        }

        // first argument re-inserted
        values["id1"] = theId1;
        values["id3"] = theId1;
        // TODO add other, remove theId1

        // second argument re-inserted
        values["id2"] = theId2;
        values["id4"] = theId2;
        // TODO add other, remove theId2

        return true;
    }
} 
```

此解决方案不会消除您的 url 路由设计决策的复杂性。但它允许您根据需要以可扩展的方式（例如反射）在代码中解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-19T14:04:45.653

好吧，我决定扩展 Radim 的想法并设计我自己的自定义路由约束（在[这个问题](https://stackoverflow.com/q/13423545/1324019)中提到。

基本上，我现在没有许多不同的路线，而是只有一条路线可以匹配带有两个整数参数的任何东西：

```
routes.MapRoute(
    name: "Default2",
    url: "{controller}/{action}/{param1}-{param2}",
    defaults: new { controller = "Admin", action = "Index" },
    constraints: new { lang = new CustomRouteConstraint(new RoutePatternCollection( new List<ParamType> { ParamType.INT, ParamType.INT })) }
); 
```

在`Application_Start()`下面，`Global.asax`我为约束设置了控制器命名空间（这比每次都试图弄清楚它更有效）：

```
protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    //should be called before RegisterRoutes
    CustomRouteConstraint.SetControllerNamespace("********.Controllers");

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);            
} 
```

最后是自定义路由约束（我知道这是一大堆代码，可能过于复杂，但我认为这是不言自明的）：

```
using System;
using System.Collections.Generic;
using System.Web.Mvc;
using System.Web.Routing;
using System.Web;
using System.Linq;
using System.Reflection;

namespace ********.Code
{
    public class CustomRouteConstraint : IRouteConstraint
    {
        private static string controllerNamespace;

        RoutePatternCollection patternCollection { get; set; }

        /// <summary>
        /// Initializes a new instance of the <see cref="CustomRouteConstraint"/> class.
        /// </summary>
        /// <param name="rPC">The route pattern collection to match.</param>
        public CustomRouteConstraint(RoutePatternCollection rPC)
        {
            this.patternCollection = rPC;

            if (string.IsNullOrWhiteSpace(controllerNamespace)) {
                controllerNamespace = Assembly.GetCallingAssembly().FullName.Split(new string[1] {","}, StringSplitOptions.None)
                    .FirstOrDefault().Trim().ToString();
            }
        }

        /// <summary>
        /// Sets the controller namespace. Should be called before RegisterRoutes.
        /// </summary>
        /// <param name="_namespace">The namespace.</param>
        public static void SetControllerNamespace(string _namespace)
        {
            controllerNamespace = _namespace;
        }

        /// <summary>
        /// Attempts to match the current request to an action with the constraint pattern.
        /// </summary>
        /// <param name="httpContext">The current HTTPContext of the request.</param>
        /// <param name="route">The route to which the constraint belongs.</param>
        /// <param name="paramName">Name of the parameter (irrelevant).</param>
        /// <param name="values">The url values to attempt to match.</param>
        /// <param name="routeDirection">The route direction (this method will ignore URL Generations).</param>
        /// <returns>True if a match has been found, false otherwise.</returns>
        public bool Match(HttpContextBase httpContext, Route route, string paramName, RouteValueDictionary values, RouteDirection routeDirection)
        {
            if (routeDirection.Equals(RouteDirection.UrlGeneration)) {
                return false;
            }

            Dictionary<string, object> unMappedList = values.Where(x => x.Key.Contains("param")).OrderBy(xi => xi.Key).ToDictionary(
                kvp => kvp.Key, kvp => kvp.Value);

            string controller = values["controller"] as string;
            string action = values["action"] as string;

            Type cont = TryFindController(controller);

            if (cont != null) {
                MethodInfo actionMethod = cont.GetMethod(action);

                if (actionMethod != null) {
                    ParameterInfo[] methodParameters = actionMethod.GetParameters();

                    if (validateParameters(methodParameters, unMappedList)) {
                        for (int i = 0; i < methodParameters.Length; i++) {                            
                            var key = unMappedList.ElementAt(i).Key;
                            var value = values[key];

                            values.Remove(key);
                            values.Add(methodParameters.ElementAt(i).Name, value);
                        }

                        return true;
                    }
                }
            }

            return false;
        }

        /// <summary>
        /// Validates the parameter lists.
        /// </summary>
        /// <param name="methodParameters">The method parameters for the found action.</param>
        /// <param name="values">The parameters from the RouteValueDictionary.</param>
        /// <returns>True if the parameters all match, false if otherwise.</returns>
        private bool validateParameters(ParameterInfo[] methodParameters, Dictionary<string, object> values)
        {
            //@TODO add flexibility for optional parameters
            if (methodParameters.Count() != patternCollection.parameters.Count()) {
                return false;
            }

            for (int i = 0; i < methodParameters.Length; i++) {
                if (!matchType(methodParameters[i], patternCollection.parameters.ElementAt(i), values.ElementAt(i).Value)) {
                    return false;
                }
            }

            return true;
        }

        /// <summary>
        /// Matches the type of the found action parameter to the expected parameter, also attempts data conversion.
        /// </summary>
        /// <param name="actualParam">The actual parameter of the found action.</param>
        /// <param name="expectedParam">The expected parameter.</param>
        /// <param name="value">The value of the RouteValueDictionary corresponding to that parameter.</param>
        /// <returns>True if the parameters match, false if otherwise.</returns>
        private bool matchType(ParameterInfo actualParam, ParamType expectedParam, object value)
        {
            try {
                switch (expectedParam) {
                    case ParamType.BOOL:
                        switch (actualParam.ParameterType.ToString()) {
                            case "System.Boolean":
                                Convert.ToBoolean(value);
                                return true;
                                break;
                            default:
                                return false;
                                break;
                        }
                        break;
                    case ParamType.DOUBLE:
                        switch (actualParam.ParameterType.ToString()) {
                            case "System.Double":
                                Convert.ToDouble(value);
                                return true;
                                break;
                            case "System.Decimal":
                                Convert.ToDecimal(value);
                                return true;
                                break;
                            default:
                                return false;
                                break;
                        }
                        break;
                    case ParamType.INT:
                        switch (actualParam.ParameterType.ToString()) {
                            case "System.Int32":
                                Convert.ToInt32(value);
                                return true;
                                break;
                            case "System.Int16":
                                Convert.ToInt16(value);                                
                                return true;
                                break;
                            default:
                                return false;
                                break;
                        }
                        break;
                    case ParamType.LONG:
                        switch (actualParam.ParameterType.ToString()) {
                            case "System.Int64":
                                Convert.ToInt64(value);
                                return true;
                                break;
                            default:
                                return false;
                                break;
                        }
                        break;
                    case ParamType.STRING:
                        switch (actualParam.ParameterType.ToString()) {
                            case "System.String":
                                Convert.ToString(value);
                                return true;
                                break;
                            default:
                                return false;
                                break;
                        }
                        break;
                    case ParamType.UINT:
                        switch (actualParam.ParameterType.ToString()) {
                            case "System.UInt32":
                                Convert.ToUInt32(value);
                                return true;
                                break;
                            case "System.UInt16":
                                Convert.ToUInt16(value);
                                return true;
                                break;
                            default:
                                return false;
                                break;
                        }
                        break;
                    case ParamType.ULONG:
                        switch (actualParam.ParameterType.ToString()) {
                            case "System.UInt64":
                                Convert.ToUInt64(value);
                                return true;
                                break;
                            default:
                                return false;
                                break;
                        }
                        break;
                    default:
                        return false;
                }
            } catch (Exception) {
                return false;
            }
        }

        /// <summary>
        /// Attempts to discover a controller matching the one specified in the route.
        /// </summary>
        /// <param name="_controllerName">Name of the controller.</param>
        /// <returns>A System.Type containing the found controller, or null if the contoller cannot be discovered.</returns>
        private Type TryFindController(string _controllerName)
        {
            string controllerFullName;
            Assembly executingAssembly = Assembly.GetExecutingAssembly();

            if (!string.IsNullOrWhiteSpace(controllerNamespace)) {
                controllerFullName = string.Format(controllerNamespace + ".Controllers.{0}Controller", _controllerName);

                Type controller = executingAssembly.GetType(controllerFullName);

                if (controller == null) {
                    if (controllerNamespace.Contains("Controllers")) {
                        controllerFullName = string.Format(controllerNamespace + ".{0}Controller", _controllerName);

                        if ((controller = executingAssembly.GetType(controllerFullName)) == null) {
                            controllerFullName = string.Format(controllerNamespace + ".{0}", _controllerName);

                            controller = executingAssembly.GetType(controllerFullName);
                        }
                    } else {
                        controllerFullName = string.Format(controllerNamespace + "Controllers.{0}", _controllerName);

                        controller = executingAssembly.GetType(controllerFullName);
                    }
                }

                return controller;
            } else {
                controllerFullName = string.Format(Assembly.GetExecutingAssembly().FullName.Split(new string[1] {","}, StringSplitOptions.None)
                    .FirstOrDefault().Trim().ToString() + ".Controllers.{0}Controller", _controllerName);

                return Assembly.GetExecutingAssembly().GetType(controllerFullName);
            }            
        }
    }

    /// <summary>
    /// A list of the exepected parameters in the route.
    /// </summary>
    public struct RoutePatternCollection
    {
        public List<ParamType> parameters { get; set; }

        public RoutePatternCollection(List<ParamType> _params) : this()
        {
            this.parameters = _params;
        }
    }

    /// <summary>
    /// The valid parameter types for a Custom Route Constraint.
    /// </summary>
    public enum ParamType
    {
        STRING,
        INT,
        UINT,
        LONG,
        ULONG,
        BOOL,
        DOUBLE
    }
} 
```

如果您看到它们，请随时提出改进建议！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T21:42:38.470

不要担心控制器方法中的参数名称。例如，“id”可能在一种方法中表示公司 ID，而在另一种方法中表示帐户 ID。我有一个类似于这样路由的应用程序：

```
private const string IdRouteConstraint = @"^\d+$";

routes.MapRoute("TwoParameters",
   "{controller}/{action}/{categoryId}/{id}",
   new {controller = "Contents", action = "Index"},
   new {categoryId = IdRouteConstraint, id = IdRouteConstraint});

routes.MapRoute("OneParameter",
   "{controller}/{action}/{id}",
   new {controller = "Contents", action = "Index"},
   new {id = IdRouteConstraint}); 
```

# html - node.js，mongodb，mongoose，html 我如何插入数据（在 index.html 中）？

> ID：13382178
> 
> 赞同：3
> 
> 时间：2012-11-14T15:47:45.330
> 
> 标签：html, node.js, mongodb, mongoose

```
var mongoose = require('mongoose')
Schema = mongoose.Schema;
mongoose.connect('mongodb://localhost/mydatabase'); //connect database

/* *
 * *    Define UserSchema
 * **/

var UserSchema = new Schema({
user_id : String,
email : String,
base_location : Number,
user_type : String,
number_of_event : Number
});

mongoose.model('User', UserSchema);
var User = mongoose.model('User');
var user  =new User

app.post('/api/users', function (req, res){
var product;
console.log("User: ");
console.log(req.body);
user = new ProductModel({
user_id: req.body.user_id,
email: req.body.email,
base_location: req.body.base_location,
});
product.save(function (err) {
if (!err) {
return console.log("created");
} else {
return console.log(err);
}
});
return res.send(user);
}); 
```

这是我的 app.js 它包含架构和发布功能我不知道如何在 html 中使用此文件我想制作可以插入用户数据的 indext.html 我该怎么做？3421

423

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:56:31.723

There are a multitude a possibilities. What I usually do is create an [express server](http://expressjs.com/) and attach the routes to special functions in express.

```
//your modules
var express = require('express'),
    app = express(),
    mongoose = require('mongoose');

//connect mongo
Schema = mongoose.Schema;
mongoose.connect('mongodb://localhost/mydatabase');

//schema
var UserSchema = new Schema({
 user_id : String,
 email : String,
 base_location : Number,
 user_type : String,
 number_of_event : Number
});

mongoose.model('User', UserSchema);
var User = mongoose.model('User');
var user  =new User

app.post('/api/users', function (req, res){
  //do your stuff
});

app.listen(80); 
```

You then will need to run the above script (lets call it **app.js**) with

```
node app.js 
```

If the code above is sane, this will run the server. When you connect to the server with the app then you will receive a connection. You should also look up some docs on [socketIO](http://socket.io/).

# mysql - 使用教义和 symfony 在数据库上执行功能

> ID：13382182
> 
> 赞同：1
> 
> 时间：2012-11-14T15:47:52.730
> 
> 标签：mysql, doctrine, symfony-1.4, doctrine-1.2

我`CREATE FUNCTION`在 mysql 上使用名为 getDtails(id) 的数据库上的函数

我可以使用它从 mysql 调用它`SELECT getDetails(10)`返回一个整数。

我想使用教义从 symfony 1.4 执行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T11:51:39.787

你可以这样做：

```
Doctrine_Manager::getInstance()->getCurrentConnection()
       ->fetchAssoc('SELECT getDetails(10)'); 
```

您可以根据需要替换`fetchAssoc`为`fetchArray`或`fetchBoth`。

`Doctrine_Connection`该课程的文档在[这里](https://www.doctrine-project.org/api/doctrine1/latest/Doctrine_Connection.html)

# php - PHP中有没有办法在foreach中重新启动循环，或者在开关中更改测试值？

> ID：13382183
> 
> 赞同：3
> 
> 时间：2012-11-14T15:47:59.203
> 
> 标签：php, loops, foreach, switch-statement, continue

如果我在一个数组上循环，而在其中一个循环的中间我发现了一些小问题，改变……某事……，需要再试一次……有没有办法跳回循环的顶部而不从数组中获取下一个值？

我怀疑这是否存在，但它会是一些关键字，如`continue`or `break`。事实上，它很像`continue`，除了它没有获取下一项，它保持它在内存中的内容。

如果什么都不存在，我可以在数组中插入一些东西，使其成为循环中的下一个键/值吗？

也许这会更容易一段时间（array_shift（））......

或者我想循环内的递归函数可能会起作用。

好吧，当我输入这个问题时，我的问题正在演变，所以请查看这个伪代码：

```
foreach($storage_locations as $storage_location) {
    switch($storage_location){
        case 'cookie':
            if(headers_sent()) {
                // cannot store in cookie, failover to session
                // what can i do here to run the code in the next case?
                // append 'session' to $storage_locations?
                // that would make it run, but other items in the array would run first... how can i get it next?
            } else {
                set_cookie();
                return;
            }
        break;

        case 'session':
            set_session();
            return;
        break;
    }
} 
```

我确定没有关键字可以更改在交换机中途测试的值...那么我应该如何重构此代码以进行故障转移？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-14T15:50:07.430

不是使用 a `foreach`，而是使用更多手动数组迭代：

```
while (list($key, $value) = each($array)) {
    if (...) {
        reset($array); // start again
    }
} 
```

[http://php.net/each](http://php.net/each)
[http://php.net/reset](http://php.net/reset)

不过，似乎一个简单的失败就可以解决问题：

```
switch ($storage_location) {
    case 'cookie':
        if (!headers_sent()) {
            set_cookie();
            break;
        }

        // falls through to next case

    case 'session': 
```

# javascript - jQuery UI datepicker setDate with new Date vs Date.parse

> ID：13382184
> 
> 赞同：0
> 
> 时间：2012-11-14T15:48:01.607
> 
> 标签：javascript, jquery, jquery-ui, datepicker, jquery-ui-datepicker

和有什么区别

```
 new Date(2013,0,1) 
```

和

```
 Date.parse("2013-1-1") 
```

这打破了[http://api.jqueryui.com/datepicker/#method-setDate](http://api.jqueryui.com/datepicker/#method-setDate)

这是jsfiddle [http://jsfiddle.net/tawVx/4/](http://jsfiddle.net/tawVx/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:13:14.230

[Date.parse()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)返回自 1970 年 1 月 1 日 00:00:00 UTC 以来经过的毫秒数，而不是`Date`对象。

[setDate()](http://api.jqueryui.com/datepicker/#method-setDate)接受一个`Date`对象或一个字符串，而不是自纪元以来经过的毫秒数。

以下代码将起作用：

```
$("#datepicker").datepicker("setDate", new Date(Date.parse("2013-01-01"))); 
```

# hibernate - JPA 和 Hibernate 代理行为

> ID：13382187
> 
> 赞同：5
> 
> 时间：2012-11-14T15:48:08.810
> 
> 标签：hibernate, jpa, jpa-2.0, hibernate-4.x

我试图观察下面的 JPA2 / Hibernate4 代理行为，

// 带有延迟加载的循环实体：

```
@Entity
public class Employee {

 @Id@Generated
 int id;
 String name;
 @OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
 Employee boss;

 public String toString() {
  return id + "|" + name + "|" + boss;
 }

 //getters and setters ...

} 
```

// 持久化实体：

```
// Outer entity:
Employee employee = new Employee();
employee.setName("engineer");
// Inner entity:
Employee boss = new Employee();
boss.setName("manager");
employee.setBoss(boss);

entityTransaction.begin();
entityManager.persist(employee);
entityTransaction.commit();
System.out.println(employee); 
```

// 输出：

```
Hibernate: insert into Employee (id, boss_id, name) values (default, ?, ?)
Hibernate: insert into Employee (id, boss_id, name) values (default, ?, ?)

2|engineer|1|manager|null 
```

// 加载外部实体：

```
String queryString = "select e from Employee e where e.id=" + employee.getId();
Query query = entityManager.createQuery(queryString);
Object loadedEmployee = query.getSingleResult();
System.out.println(loadedEmployee.getClass().getSimpleName()); 
```

// 输出：

```
Hibernate: select employee0_.id as id2_, employee0_.boss_id as boss3_2_, employee0_.name as name2_ from Employee employee0_ where employee0_.id=2 limit ?

Employee 
```

令我惊讶的是，上面加载的外部实体仍然是普通实体，但我预计它是`Hibernate proxy`由`lazy loading`. 我可能在这里错过了一些东西，那么如何让它正确呢？非常感谢一个简单而具体的例子！

**@编辑**

根据我的回答，`@kostja`我修改了代码并在下面的 SE 模式下对其进行了调试，既不能`LazyInitializationException`生成，也不能被`boss property`代理。任何进一步的提示？

![代码窗口](../Images/21bcdfc770540520585bea3e053f7934.png)

![调试窗口](../Images/e7b30a773e4286c421bf4a72e95d1525.png)

**@编辑 2**

最后，我要确认来自的答案`@kostja`无疑是很棒的。

我在EE模式下进行了测试，所以在`proxied boss property`下面观察到，

//`LazyInitializationException`抛出：

```
public Employee retrieve(int id) {
 Employee employee = entityManager.find(Employee.class, id);
 // access to the proxied boss property outside of persistence/transaction ctx
 Employee boss = employee.getBoss();
 System.out.println(boss instanceof HibernateProxy);
 System.out.println(boss.getClass().getSimpleName());
 return boss;
} 
```

`Spring Tx`//就位后绿灯亮：

```
@Transactional
public Employee retrieve(int id) ... 
```

// 输出：

```
true
Employee_$$_javassist_0 
```

另外，可以参考[20.1.4。](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch20.html#performance-fetching-initialization)从 Hibernate 文档[初始化集合和代理。](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch20.html#performance-fetching-initialization)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T16:05:42.560

这是预期的 JPA 行为。您的查询中的实体没有理由被代理 - 它是查询的常规结果。然而，这个实体的`boss`属性应该是一个代理。但它不会告诉您是否被询问 - 当您对托管实体的延迟加载属性执行任何操作时，它将触发获取。

所以你应该在事务之外访问boss属性。如果尚未提取，您将获得一个`LazyInitializationException`.

你将如何去做取决于`EntityManager`and的类型`PersistenceContext`。

*   仅从 JPA 2.0 开始工作 - 调用`em.detach(loadedEmployee)`然后访问该`boss`属性。

对于 JPA 1：

*   如果您在 Java EE 环境中，请将该方法标记为`@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)`以暂停事务。

*   在具有用户事务的 SE 环境中，`transaction.commit()`在访问`boss`属性之前调用。

*   如果使用`PersistenceContext`将超过事务的 EXTENDED，请调用`em.clear()`.

EIDT：我想你没有得到异常的原因是这`FetchType.LAZY`只是对 JPA 提供者的一个提示，所以不能保证属性被延迟加载。与此相反，`FetchType.EAGER`保证渴望获取。我想，您的 JPA 提供者选择急切地加载。

我已经复制了这个例子，虽然有点不同，我可以重现地得到`LazyInitializationException`on log 语句。该测试是在 JBoss 7.1.1 上运行的 Arquillian 测试，使用 JPA 2.0 在 Hibernate 4.0.1 上运行：

```
@RunWith(Arquillian.class)
public class CircularEmployeeTest {
    @Deployment
    public static Archive<?> createTestArchive() {
        return ShrinkWrap
                .create(WebArchive.class, "test.war")
                .addClasses(Employee.class, Resources.class)
                .addAsResource("META-INF/persistence.xml",
                        "META-INF/persistence.xml")
                .addAsResource("testSeeds/2CircularEmployees.sql", "import.sql")
                .addAsWebInfResource(EmptyAsset.INSTANCE, "beans.xml");
    }

    @PersistenceContext
    EntityManager em;

    @Inject
    UserTransaction tx;

    @Inject
    Logger log;

    @Test
    @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
    public void testConfirmLazyLoading() throws Exception {
        String query = "SELECT e FROM Employee e WHERE e.id = 1";

        tx.begin();
        Employee employee = em.createQuery(query,
                Employee.class).getSingleResult();
        tx.commit();
        log.info("retrieving the boss: {}", employee.getBoss());
    }
} 
```

# c# - 十进制解析问题

> ID：13382188
> 
> 赞同：0
> 
> 时间：2012-11-14T15:48:10.777
> 
> 标签：c#, parsing, decimal, cultureinfo

我有十进制解析的问题，我知道这个问题被问了一个战利品，但没有一个解决方案对我有用，而且我已经在这里呆了两天了。

我的问题是我的 CultureInfo 设置为 fr_Fr，当我将代码放在下面时，错误显示由逗号分隔小数而不是句点引起。

```
double entree = Convert.ToDouble(row["entree"]);
double sortie = Convert.ToDouble(row["sortie"]);
int id_mw = Convert.ToInt32(row["mouvment_w_id"]);

qte_Stock += entree - sortie;
decimal qte_s ;

MessageBox.Show("" + CultureInfo.CurrentCulture);
qte_s = Decimal.Parse(Convert.ToString(qte_Stock), NumberStyles.Number ^ NumberStyles.AllowThousands);

MessageBox.Show("" + qte_s);
qte.CommandText = "Update tcpos.dbo.Warehouse_mouvement set qte_stock= " + qte_s + " where mouvment_w_id = "+id_mw;
qte.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:04:10.460

> qte_Stock 的类型是什么

...

> 这是一个小数

...

> 然后你就有了答案，因为你想把它变成小数。

传递小数[`Parameter`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)以防止 sql-injection 和此问题（小数分隔符）。

例如（假设 SQL-Server 为 rdbms）：

```
using(var con = new SqlConnection(connectionString))
using(var cmd = new SqlCommand("Update tcpos.dbo.Warehouse_mouvement set qte_stock=@qte_stock where mouvment_w_id = @mouvment_w_id", con))
{
    cmd.Parameters.AddWithValue("@qte_stock", qte_stock);
    cmd.Parameters.AddWithValue("@mouvment_w_id", id_mw);
    con.Open();
    cmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:03:36.327

```
qte_s = qte_Stock.ToString ("#.#", System.Globalization.CultureInfo.InvariantCulture); 
```

如果您的问题是因为在您的文化中（如我的文化），这将解决，逗号分隔小数，而不是千位。

此外，使用参数化 SQL，如 Damien_The_Unbeliever 和 Jonh Skeet 所说。

# java - 将 JPanel 放在 JFrame 内

> ID：13382190
> 
> 赞同：0
> 
> 时间：2012-11-14T15:48:14.113
> 
> 标签：java, swing

我已经在这里呆了几个小时了，我很困惑。我有这段代码，它在 JFrame 中添加了一个 JPanel，问题是当我将 Frame 设置为`Free Design`它时，它不会显示在 Frame 中。当我将框架设置`Border Layout`为代码时工作正常。我想做的是让它与`Free Design`我可以随意放置和调整 JPanel 大小的地方一起工作。这是将其放置在框架中的以下代码。

```
 canvas = new Canvas();
        canvas.setVisible(true);
        canvas.setImage(file);
        GroupLayout canvasLayout = new GroupLayout(canvas);
        canvas.setLayout(canvasLayout);
        canvas.setPreferredSize(new Dimension(100, 100));
        //canvas.setSize(200,200);
        //canvas.setPreferredSize(null);
        add(canvas);
        revalidate(); 
```

当我使用自由设计模式时，我错过了什么？这是构建布局的代码：

```
private void initComponents() {

    jInternalFrame1 = new javax.swing.JInternalFrame();

    jInternalFrame1.setVisible(true);

    javax.swing.GroupLayout jInternalFrame1Layout = new javax.swing.GroupLayout(jInternalFrame1.getContentPane());
    jInternalFrame1.getContentPane().setLayout(jInternalFrame1Layout);
    jInternalFrame1Layout.setHorizontalGroup(
        jInternalFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 0, Short.MAX_VALUE)
    );
    jInternalFrame1Layout.setVerticalGroup(
        jInternalFrame1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGap(0, 0, Short.MAX_VALUE)
    );

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setTitle("PocketShop");
    setName("main");

    pack();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:59:20.877

**取消 JInternalFrame**

JInternalFrame 用于 JDesktopPane 中的子项。windows中的一种windows，即所谓的MDI，multi-document-interface，相对于SDI，single-document interface。

**使用 JPanel 代替 Canvas**

Canvas 是老原生平台 AWT 的一个 Component，JPanel 的 Swing，一个 JComponent。您可以在那里覆盖paintComponent。

对于 Free Design 布局，我将使用与 NetBeans IDE 中一样的 GUI 编辑器。我这样做了，所以无法进一步帮助你。

如果可能，不要使用重新验证。

* * *

如果您手动添加 Canvas，请尝试添加 JPanel，并设置为自定义创建代码`new Canvas()`或`canvas`.

# c++ - 奇怪的“内存泄漏检测”错误 C++

> ID：13382201
> 
> 赞同：5
> 
> 时间：2012-11-14T15:48:55.443
> 
> 标签：c++, visual-c++, memory, memory-leaks

我有一个非常奇怪的内存泄漏问题。我使用 _CrtDumpMemoryLeaks 来检查泄漏。这是我的 WinMain 函数：

```
int APIENTRY _tWinMain(_In_ HINSTANCE hInstance,
                     _In_opt_ HINSTANCE hPrevInstance,
                     _In_ LPTSTR    lpCmdLine,
                     _In_ int       nCmdShow)
{
    UNREFERENCED_PARAMETER(hPrevInstance);
    UNREFERENCED_PARAMETER(lpCmdLine);

    ////////////////// SET UP CHECKS FOR MEMORY LEAKS ////////////////////
    _CrtSetDbgFlag( _CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF );
    //////////////////////////////////////////////////////////////////////

    _CrtDumpMemoryLeaks(); // Reports leaks to stderr

    return 0;
} 
```

如您所见，我已经完全删除了其中的所有内容，只是为了检查是否可能收到某种误报。

在我关闭一个应用程序后，我在输出中得到了一堆内存泄漏：

```
Detected memory leaks!
Dumping objects ->
{1343} normal block at 0x06076780, 8 bytes long.
 Data: < g      > 20 67 07 06 00 00 00 00 
{1342} normal block at 0x06076710, 52 bytes long.
 Data: <@   @   @       > 40 16 07 06 40 16 07 06 40 16 07 06 01 00 CD CD 
{1341} normal block at 0x060766B0, 32 bytes long.
 Data: <C:/Windows/Fonts> 43 3A 2F 57 69 6E 64 6F 77 73 2F 46 6F 6E 74 73 
{1339} normal block at 0x0607F438, 16 bytes long.
 Data: <              P > C0 17 0B 01 01 00 00 00 01 00 00 00 80 13 50 04 
{1338} normal block at 0x04501380, 8 bytes long.
 Data: <    H   > BC 0D 0B 01 48 18 07 06 
{1295} normal block at 0x060716B0, 8 bytes long.
 Data: <        > B4 B3 0B 01 00 00 00 00 
{1294} normal block at 0x06071640, 52 bytes long.
 Data: < g   g   g      > 10 67 07 06 10 67 07 06 10 67 07 06 01 01 CD CD 
{1293} normal block at 0x0450DFB8, 8 bytes long.
 Data: < !    P > E0 21 0B 01 98 05 50 04 
{1292} normal block at 0x0450E110, 8 bytes long.
 Data: <  P     > E8 05 50 04 00 00 00 00 
// (There's like thousand more of those...)
Object dump complete. 
```

我完全不知道它们是从哪里来的。

提前感谢您的任何回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T15:57:19.290

检查输出窗口。你看到一堆 DLL 被加载了吗？它们中的任何一个都可能在调用泄漏输出之前静态初始化未释放的数据结构。尝试使用[此处](https://github.com/google/googletest/blob/master/googletest/docs/faq.md#how-do-i-suppress-the-memory-leak-messages-on-windows)的提示排除一些噪音，方法是将泄漏检查括在一定的执行时间范围内。

> Since the statically initialized Google Test singleton requires allocations on the heap, the Visual C++ memory leak detector will report memory leaks at the end of the program run. The easiest way to avoid this is to use the _CrtMemCheckpoint and _CrtMemDumpAllObjectsSince calls to not report any statically initialized heap objects. See MSDN for more details and additional heap check/debug routines.

# r - 回归更改日期/时间格式后在 xts 上滚动应用

> ID：13382203
> 
> 赞同：0
> 
> 时间：2012-11-14T15:48:58.327
> 
> 标签：r, datetime, regression, xts

我有一个 xts 对象，对其执行回归，提取每列斜率系数的 t 值，然后在 5 个周期间隔内滚动应用。但是，由于某种原因，日期/时间索引值在 rollapply 之后从 POSIXct 更改为基于秒的时间戳。我需要它不更改或更改回 POSIXct ......有什么想法吗？

```
> class(w)
[1] "xts" "zoo"

> dput(w)
structure(c(41.8, 41.52, 41.95, 41.95, 41.58, 41.27, 41.02, 41.4, 
41.27, 41.51, 41.94, 42.27, 42.15, 41.5, 41.9, 41.04, 41.08, 
41.53, 41.21, 41.15, 41.82, 41.6, 41.8, 42.13, 41.44, 40.92, 
41, 41.15, 40.78, 40.155, 53.64, 53.42, 54.07, 54.14, 53.82, 
53.04, 52.89, 53.23, 53.17, 53.69, 54.58, 55.09, 54.88, 54.14, 
54.52, 53.35, 53.38, 53.7, 53.62, 53.58, 54.21, 53.69, 53.56, 
54.07, 53.26, 52.78, 52.8, 52.76, 52.5, 51.95, 91.89, 92.12, 
92.51, 92.46, 92.33, 92.07, 91.85, 92.35, 92.51, 92.93, 93.27, 
93.48, 93.43, 92.96, 92.98, 92.63, 92.55, 92.7, 92.48, 92.59, 
92.54, 92.41, 92.26, 92.4, 91.85, 91.55, 91.39, 91.42, 91.21, 
90.71, 108.45, 108.56, 108.13, 107.64, 107.99, 107.77, 108.03, 
108.13, 108.14, 108.17, 107.66, 106.98, 106.79, 107.24, 106.88, 
107.39, 107.16, 106.77, 107.45, 107.89, 107.53, 107.62, 107.88, 
107.39, 108.29, 108.77, 108.78, 108.85, 108.98, 109.01, 83.88, 
83.64, 84.21, 84.11, 83.58, 82.6, 82.47, 82.77, 82.1, 82.64, 
83.25, 84, 83.54, 81.85, 81.83, 81.42, 81.2, 81.53, 81.14, 81.63, 
82.49, 81.19, 81.73, 82.34, 80.34, 79.21, 79.38, 79.15, 78.7, 
77.24, 64.46, 64.65, 64.41, 64.69, 64.42, 64.14, 64.22, 64.23, 
63.95, 64.38, 64.68, 64.78, 65.39, 64.78, 64.55, 63.9, 63.94, 
63.66, 63.29, 64, 64.07, 64.5, 64.02, 64.16, 63.84, 63.19, 62.98, 
62.88, 62.68, 61.46, 124.25, 124.29, 122.74, 121.15, 122.17, 
121.95, 122.81, 123.66, 123.97, 123.69, 121.98, 120.85, 120.11, 
121.74, 120.96, 122.69, 121.48, 120.86, 122.64, 123.36, 122.35, 
122.26, 122.95, 121.79, 124, 125.84, 125.98, 126.19, 126.61, 
126.73), class = c("xts", "zoo"), .indexCLASS = c("POSIXct", 
"POSIXt"), .indexTZ = "GMT", index = structure(c(1349136000, 
1349222400, 1349308800, 1349395200, 1349654400, 1349740800, 1349827200, 
1349913600, 1.35e+09, 1350259200, 1350345600, 1350432000, 1350518400, 
1350604800, 1350864000, 1350950400, 1351036800, 1351123200, 1351209600, 
1351641600, 1351728000, 1351814400, 1352073600, 1352160000, 1352246400, 
1352332800, 1352419200, 1352678400, 1352764800, 1352851200), tzone = "GMT", tclass =    c("POSIXct", 
"POSIXt")), .Dim = c(30L, 7L), .Dimnames = list(NULL, c("EEM", 
"EFA", "HYG", "IEF", "IWM", "IYR", "TLT"))) 
```

执行回归

```
x <- w
f <- function (x) {
  res <- coef(summary(lm(x ~ time(x))))
  sapply(res, "[" ,"time(x)"  ,"t value")
} 
```

滚动应用超过 5 个周期

```
r <- rollapplyr(x, 5, f, by.column=FALSE) 
```

日期/时间更改？

```
> last(r,5)    
       Response EEM Response EFA Response HYG Response IEF Response IWM Response     IYR Response TLT
1352332800    -1.318353    -1.663508    -3.328802     2.158261    -1.655036    -3.871996     2.349788
1352419200    -2.916606    -2.456015    -4.642054     2.706211    -3.326938    -4.142477     3.192453
1352678400    -2.117244    -2.981824    -3.803602     3.148467    -2.917112    -6.177137     3.751326
1352764800    -1.623254    -3.322795    -4.656230     3.228277    -3.103968    -4.505336     3.128703
1352851200    -1.278702    -2.681911    -2.102026     0.918324    -3.453862    -9.012422     1.074501 
```

会话信息

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252        LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                           LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
[1] quantmod_0.3-17 Defaults_1.1-1  TTR_0.21-1      xts_0.8-6       zoo_1.7-7      

loaded via a namespace (and not attached):
[1] grid_2.15.1    lattice_0.20-6 tools_2.15.1 
```

添加 str()

```
> str(r)
‘zoo’ series from 1349654400 to 1352851200
  Data: num [1:26, 1:7] -0.0135 -0.9163 -7.4406 -1.9796 -0.7066 ...
 - attr(*, "dimnames")=List of 2
  ..$ : NULL
  ..$ : chr [1:7] "Response EEM" "Response EFA" "Response HYG" "Response IEF" ...
  Index: Class 'POSIXct'  atomic [1:26] 1.35e+09 1.35e+09 1.35e+09 1.35e+09 1.35e+09 ...
  ..- attr(*, "tzone")= chr "GMT" 
```

# sql-server - 使用连接提示优化 SQL Server 查询

> ID：13382206
> 
> 赞同：0
> 
> 时间：2012-11-14T15:49:07.020
> 
> 标签：sql-server, temp-tables, query-hints, join-hints

我们的系统中有一个查询，它使用的逻辑读取量存在问题。查询经常运行（一天几次），但它本质上是报告（即收集数据，它不是事务性的）。

在让几个人看过之后，我们正在考虑几个不同的选择。

1.  使用 OPTION (FORCE ORDER) 和一些 MERGE JOIN 提示让优化器更有效地处理数据（至少在已测试的数据上）。

2.  使用临时表来分解查询，这样优化器就不会处理非常大的查询，从而可以更有效地处理它。

我们真的没有选择进行重大模式更改或任何事情，调整查询是这个问题的集合点。

查询提示选项的性能比其他选项好一点，但在这一点上，这两个选项的性能都是可以接受的。

那么问题来了，你更喜欢哪一个？查询提示被认为有点危险，因为我们正在覆盖优化器等。临时表解决方案需要写出到 tempdb 等。

过去，我们已经能够在较大的报告查询中使用临时表来获得巨大的性能提升，但这通常是针对运行频率低于此查询的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:22:29.647

如果您已经通过索引用尽优化并删除了非 SARGABLE sql，那么我建议您使用临时表选项：

1.  临时表提供可重复的性能，前提是它们不会在大小增加和性能方面对 tempdb 施加过大压力 - 您需要监控这些
2.  由于将来其他表/索引更改，sql 提示可能会停止生效
3.  完成后记得清理临时表。

# itunes-store - 从 iTunes 网络搜索中获取更大的艺术品图像

> ID：13382208
> 
> 赞同：12
> 
> 时间：2012-11-14T15:49:07.813
> 
> 标签：itunes-store, itunesartwork

我正在使用[iTunes Store 网络服务搜索 API](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)获取歌曲信息。

我遇到的唯一问题是艺术品的分辨率极低（只有 60x60px 或 100x100px 可用）。

> **artUrl100，artworkUrl60**：与返回的媒体类型关联的艺术品的 URL，大小为 100x100 像素或 60x60 像素。

有没有办法获得更大尺寸的专辑图片？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-19T18:07:15.737

iTunes 也提供 600x600 版本的图像 - 只需将图像 URL 中的 100x100 更改为 600x600。

600x600 图像的尺寸有一个尺寸，最大为 600 像素。例如，书籍和电影不是正方形的，因此图像的高度为 600 像素，但宽度不是 600 像素。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-11T23:10:24.603

这些是我找到的：

*   30 × 30。
*   40 × 40。
*   60 × 60。
*   80 × 80。
*   100 × 100。
*   110 × 110。
*   130 × 130。
*   150 × 150。
*   160 × 160。
*   170 × 170。
*   200 × 200。
*   220 × 220。
*   230 × 230。
*   250 × 250。
*   340 × 340。
*   400 × 400。
*   440 × 440。
*   450 × 450。
*   460 × 460。
*   600 × 600。
*   1 200 × 1 200。
*   1 400 × 1 400。

但是，并非所有 iTunes 专辑都具有该图像大小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-10T14:38:57.270

以下是 iTunes 提供的艺术品尺寸的完整列表（截至 2014 年 11 月 10 日）

```
30x30
40x40
60x60
80x80
100x100
110x110
130x130
150x150
160x160
170x170
190x190
200x200
220x220
230x230
240x240
250x250
340x340
400x400
440x440
450x450
460x460
480x480
600x600
1200x1200
1400x1400 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-01T23:59:03.210

您可以通过替换`100x100bb`为`100000x100000-999`. 我得到了一些 3000x3000 的图像。感谢 Ben Dodson 的发现：[https ://bendodson.com/projects/itunes-artwork-finder/](https://bendodson.com/projects/itunes-artwork-finder/)

# cocoa - 保存 IAP 收据

> ID：13382211
> 
> 赞同：0
> 
> 时间：2012-11-14T15:49:11.963
> 
> 标签：cocoa, in-app-purchase, storekit

我想在我的数据库中保存非消耗品的 IAP 收据。我们有一个用于 IAP 恢复的两步下载机制。

1.  使用包含收据的 StoreKit 机制检索所有交易。
2.  从所有收据（即这些收据后面的产品）列表中选择要在以后恢复的交易

有没有关于数据可以被视为有效多长时间的消息？持久化数据还会遇到哪些其他缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:04:53.663

您的收据没有失效日期——您可以随时将其发送到 Apple 服务器，它会为您将其解码为 JSON。

至少，无论如何都没有这样的信息，所以在 Apple 以一种方式完成这样的事情之前，你可以放心地存储它。

# python - 打印类中的所有属性

> ID：13382215
> 
> 赞同：2
> 
> 时间：2012-11-14T15:49:28.343
> 
> 标签：python, class, attributes

请不要问我是如何让自己陷入这种境地的。可以说我有一个名为`ccollection`.

此类在运行时具有以下属性：

```
ccollection.a.b.x = 1
ccollection.a.b.y = 3
ccollection.a.b.z = 4
...
ccollection.a.c = 3
ccollection.b = 3 
```

此类将如上所述动态设置。所以没有办法事先知道类中的属性。

现在我想打印这个类中的所有属性，例如：

`ccollection.a.b`应该打印

```
ccollection.a.b.x = 1
ccollection.a.b.y = 3
ccollection.a.b.z = 4 
```

并且 `ccollection.a`应该打印

```
ccollection.a.b.x = 1
ccollection.a.b.y = 3
ccollection.a.b.z = 4
ccollection.a.c = 3 
```

我想你应该已经明白了。每次打印都应该开始打印同一级别及以下的所有元素。我正在寻找一种递归遍历所有属性的方法（这是一种树状数据结构）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T18:37:41.613

这种情况确实需要重构。您正在使用未设计为容器的对象。取而代之的是，使用一个容器，例如 dict 或从 dict 继承的类。

* * *

如果您必须使用当前设置，我同意[Blckknght](https://stackoverflow.com/users/1405065/blckknght)的观点，最有希望的方法似乎是使用 dir。

```
class CCollection(object):
  def get_children_strings(self):
    list_of_strings = []
    for attr_name in dir(self):
      if attr_name not in dir(CCollection()):
        attr = getattr(self, attr_name)
        if hasattr(attr, 'get_children_strings'):
          list_of_strings.extend(["." + attr_name + child_string for child_string in attr.get_children_strings()])
        else:
          list_of_strings.append("." + attr_name + " = " + str(attr))
    return list_of_strings

  def print_tree(self, prefix):
    print [prefix + s for s in self.get_children_strings()] 
```

那么你就可以

```
m = CCollection()
m.a = CCollection()
m.a.b = CCollection()
m.a.b.x = 1
m.a.b.y = 2
m.a.c = 3
m.d = 4

m.print_tree("m")
m.a.print_tree("m.a")
m.a.b.print_tree("m.a.b") 
```

并获得输出：

```
>>> m.print_tree("m")
['m.a.b.x = 1', 'm.a.b.y = 2', 'm.a.c = 3', 'm.d = 4']
>>> m.a.print_tree("m.a")
['m.a.b.x = 1', 'm.a.b.y = 2', 'm.a.c = 3']
>>> m.a.b.print_tree("m.a.b")
['m.a.b.x = 1', 'm.a.b.y = 2'] 
```

为了更进一步，您可能希望使用具有树遍历函数的类。如果您有一个获取父节点的函数、没有循环的保证以及一个保存节点名称的类变量，您可以自动生成当前通过函数的`prefix`参数传入的信息。`print_tree`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:52:25.683

看起来您想要一个具有属性访问权限的树状结构。这可以通过子类`dict`化然后设置适当的来完成，`__getattr__`并`__setattr__`获得您想要的访问 api，同时获得您想要的打印。

还可以使用覆盖`__str__`来使其完全按照您希望的方式打印。

编辑：

为了快速描述这一点，我会让它看起来像这样。

```
class DictTree( object ):
    _children = {}

    def __getattr__( self, name ):
        if not name in self._children:
            self._children[name] = DictTree()
        return self._children[name]

    def __setattr__( self, name, v ):
        self._children[name] = v 
```

上面的作品提供了你想要的访问和 API 接口，但是在打印它时我得到了一个`RuntimeError: maximum recursion depth exceeded` ，因为它是如何`__getattr__`工作的。如果你调整上面的代码没有这个问题，那么它应该得到你想要的。修复涉及`__str__`方法。

# ruby-on-rails - Rails 管理和动态导航

> ID：13382216
> 
> 赞同：1
> 
> 时间：2012-11-14T15:49:29.993
> 
> 标签：ruby-on-rails, dynamic, rails-admin

我刚刚开发了一个小型引擎，允许管理员创建表单并管理他们的订阅。它基本上由两个模型组成：Form(title, description) 和 FormSubscription(form_id, first_name, ...)

由于我已经在使用 RailsAdmin 进行整个应用程序管理，所以我想知道是否可以使用 RailsAdmin**通过 form**来管理这些订阅。

让我解释。假设管理员创建了 LaunchPartyRegistration 表单并且人们来注册。美妙的是在 RailsAdmin 的左侧菜单中有一个额外的 LaunchPartyRegistration 选项卡，它显示此特定表单的所有 FormSubscriptions（没有任何方式通过过滤器菜单修改 form_id）。如果有 4 种不同的表格，那么左侧菜单中将有 4 个新选项卡。

我知道已经有解决方案可以转到 FormSubscription 管理页面并通过过滤器菜单按表单过滤它们，但我觉得这对客户来说有点太复杂了。

所以......有没有办法我可以用 RailsAdmin 做到这一点，还是我自己做后端？:)

干杯！

# php - How to Re-structure multi-dimensional array in PHP?

> ID：13382217
> 
> 赞同：1
> 
> 时间：2012-11-14T15:49:35.910
> 
> 标签：php, arrays, foreach

I have an array that looks like this:

```
array(3) {
  [0]=>
  array(2) {
    [0]=>
    string(10) "2012-11-14"
    [1]=>
    string(5) "3238"
  }
  [1]=>
  array(2) {
    [0]=>
    string(10) "2012-11-13"
    [1]=>
    string(5) "3231"
  }
  [2]=>
  array(2) {
    [0]=>
    string(10) "2012-11-13"
    [1]=>
    string(5) "3231"
  } 
```

I would like to write a foreach loop that would turn this array into:

```
array(2) {
  [0]=>
  array(1) {
    "2012-11-14" => "3238"
  }
  [1]=>
  array(1) {
   "2012-11-13" => "3231"
  } 
```

So, basically, I would like to use the array element formatted as Y-M-D date as key to the second element in the array.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:52:42.230

```
<?php

$data = array(
    array("2012-11-14", "3238"),
    array("2012-11-13", "3231"),
    array("2012-11-13", "3231") // warning! when there are two record with same date, the second's count will be display
);

$result = array();
foreach ($data as $value) {
    $result[$value[0]] = $value[1];
}

echo '<pre>';
print_r($result); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T15:58:16.087

Given the following array...

```
$array = array(
    0 => array(0 => "2012-11-14", 1 => "3238"),
    1 => array(0 => "2012-11-13", 1 => "3231"),
    2 => array(0 => "2012-11-13", 1 => "3231"),
); 
```

putting it into a new array like this:

```
$new_array = array();
foreach ($array as $key => $item)
{
    $new_array[$key][$item[0]] = $item[1];
}

print_r($new_array); 
```

produces this output:

```
Array
(
[0] => Array
    (
        [2012-11-14] => 3238
    )

[1] => Array
    (
        [2012-11-13] => 3231
    )

[2] => Array
    (
        [2012-11-13] => 3231
    )

) 
```

My answer doesn't get rid of the duplicates, but the added dimension as specified in the original question means that duplicate dates as keys aren't an issue.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T15:55:17.683

```
<?php
    $newArray = array();
    for($i=0;$i<count($arrayVariable);$i++)
    {
       $newArray[$arrayVariable[$i][0]] = $arrayVariable[$i][1];
    }

echo '<pre>';print_r($newArray);echo '</pre>';
?> 
```

Didn't test it but something like this should work in concept. Of course change `arrayVariable` to your variable.. but that aside.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T15:58:58.923

You can use this code to get what you want:

```
$dates = array(
    array("2012-11-01", "3238"),
    array("2012-11-03", "4321")
);

print_r($dates);

$result = array();
foreach($dates as $value) {
    $result[][$value[0]] = $value[1];
}

print_r($result); 
```

The output will look like the requested form:

```
Array
(
    [0] => Array
        (
            [2012-11-01] => 3238
        )

    [1] => Array
        (
            [2012-11-03] => 4321
        )

) 
```

Codepad demo: [http://codepad.org/XAmUEdYh](http://codepad.org/XAmUEdYh)

However, I would personally prefer Aykut's solution. You would of course have a problem when you've got two records with the same date, but the overall array layout is a bit nicer ;).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T16:01:50.227

Here is what I came up with:

```
<?php
$original = array(
    array(
        "2012-11-14",
        "3238"
    ),
    array(
        "2012-11-13",
        "3231"
    ),
    array(
        "2012-11-13",
        "3231"
    )
);

$newArray = array();
foreach($original as $subArray){
    $newArray[] = array($subArray[0] => $subArray[1]);
}
var_dump($newArray); 
```

# ios6 - Xcode 4.5 仅上传 iPhone 5 应用程序

> ID：13382221
> 
> 赞同：0
> 
> 时间：2012-11-14T15:49:46.980
> 
> 标签：ios6, screenshot, app-store-connect, xcode4.5, iphone-5

我有一个内置在 Xcode 4.5 中的应用程序，带有 4 英寸屏幕/视图控制器我为 iPhone 5 构建了这个应用程序，因为我将它发送到 iTunes 连接。一旦它说收到上传，它就会立即显示“缺少本地化截图”。

我该如何解决这个问题，我有 5 个 iPhone 5 的屏幕截图，仅此而已，但如果我要为 3.5 英寸屏幕截图，消息就会消失，我的应用程序将等待审核，但一个问题是当我在我的 iPod 上运行它时图像/按钮是我不在屏幕上或在不同的地方，请帮忙。

有没有办法解决这个问题，如果你能告诉我，我真的很感激。

或者你现在必须为 iPhone 5 和 iPhone 4 开发应用程序吗？

希望这一切都有意义，你们明白我的意思谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:55:33.813

It isn't about the device, but the version of the OS. You can't target an app just at the iPhone 5\. You can can target an app at iOS version 6 which includes 4 inch and 3.5 inch screens.

**Edited to add**

There are many resources about supporting multiple screen sizes in iOS6, one of which is, for example:

[How to develop or migrate apps for iPhone 5 screen resolution?](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

# ruby - Ruby 将散列中的值转换为局部变量

> ID：13382224
> 
> 赞同：23
> 
> 时间：2012-11-14T15:49:53.797
> 
> 标签：ruby

假设我有这个哈希：

```
entry = {"director"=>"Chris Nolan", "prducer"=>"Sum Duk", "writer"=>"Saad Bakk"} 
```

我想将每个键提取到具有相关值的自己的局部变量中：

```
director = "Chris Nolan"
producer = "Sum Duk"
... 
```

通过使用循环而不是：

```
director = entry["director"] 
```

因为有很多价值观，我不想单独做。

我发现这几乎可以完美地工作，除了它创建一个实例变量并且我想要一个局部变量，但`local_variable_set`由于某种原因不存在。

```
entry.each_pair { |k, v| instance_variable_set("@#{k}", v) } 
```

有解决办法吗？或者失败了，一种将实例变量转换为本地变量并删除实例变量而不一个一个地执行它的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-08-14T15:49:10.280

**选项1**

除了好玩，我不能推荐这个，但它主要有你想要的效果：

```
entry.each |k, v|
  singleton_class.send(:attr_accessor, k)
  send("#{k}=", v)
end

director                        # => "Chris Nolan"
self.director = "Wes Anderson"  # Unfortunately, must use self for assignment
director                        # => "Wes Anderson" 
```

它不是创建局部变量，而是在当前对象的单例类上定义访问器方法，您可以像调用局部变量一样调用它们。

为了使它们更“本地化”，您可以在使用`singleton_class.remove_method`完这些方法后删除它们。您甚至可以尝试使用相同名称为任何现有的单例类方法起别名，然后再恢复它们。

**选项 2**

这是我在实际代码中使用的东西。它需要 Ruby On Rails 附带的 ActiveSupport gem，但也可以单独使用。

```
director, producer, writer = entry.values_at('director', 'producer', 'writer') 
```

不幸的是，它需要输入每个变量名称两次，而不是您要求的零次。如果你确定哈希值的顺序，你可以写：

```
director, producer, writer = entry.values  # Not so good, IMO. 
```

我对这个版本感到不安，因为现在创建散列的代码有一个不明显的责任来确保散列处于特定顺序。

**笔记**

如果您的目标只是减少输入，这里有一种方法，每次访问变量只需要两个字符，而不是真正的局部变量：

```
e = OpenStruct.new(entry)
e.director     # => "Chris Nolan" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T15:59:38.977

由于变量范围，您无法创建局部变量。
如果您在块内创建局部变量，则该变量只能在块本身内访问。
请参阅此问题以获取更多信息。
[在 Ruby 中动态设置局部变量](https://stackoverflow.com/questions/4963678/dynamically-set-local-variables-in-ruby)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T16:10:58.507

您可以使用 来执行此`eval`操作，但对这些变量的所有操作都必须在它们定义的范围内。

例如，这将起作用：

```
vals = {
  "foo" => "bar",
  "baz" => "qux"
}

eval <<-EOF
  #{ vals.map {|k, v| "#{k} = \"#{v}\""}.join("\n") }
  puts foo
EOF 
```

但是，这不会：

```
vals = {
  "foo" => "bar",
  "baz" => "qux"
}

eval <<-EOF
  #{ vals.map {|k, v| "#{k} = \"#{v}\""}.join("\n") }
EOF

puts foo 
```

as`foo`在评估结束时超出范围。但是，如果您对变量的所有工作都可以在 eval 的范围内完成，那是完全可行的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-16T20:52:43.180

扩展@antinome 的注释：如果您希望局部变量只存在，因为您想动态访问它们，例如通过在字符串中插入它们，那么`OpenStruct`+`instance_eval`提供了这种强大的方式：

```
require 'ostruct'
o = OpenStruct.new(entry)
o.instance_eval("Directed by #{director}, produced by #{producer}")
o.instance_eval {
  puts "Directed by #{director}"
  puts "Produced by #{producer}"
} 
```

# java - 使用文档准备好将按钮插入jsp上的div

> ID：13382229
> 
> 赞同：0
> 
> 时间：2012-11-14T15:50:03.267
> 
> 标签：java, spring, jsp, html, twitter-bootstrap

我有一个 layout.jsp，我用它来构建一个使用多个其他 jsp 的页面。

在我的主要内容 jsp 页面中，我有一两个按钮。在当前版本中，我将 div 与按钮相对定位。

我正在切换页面的设计方式。我在布局页面中创建了一个 div 来放置按钮。我给了它一个 appButtonDiv 类。

我遇到的问题是我不知道如何创建一个将其插入 div 的按钮。我想在准备好的文件上执行此操作。

这是我想将按钮放入的 div。

```
 <div class="row-fluid verticalmenubottom">
        <div class="span12 verticalMenuCell appButtonDiv"></div>
    </div> 
```

下面是一个示例按钮。

```
 <button type="submit" id="searchButton" name="searchButton"
                                value='<spring:message code="Generic.Search"/>'/>
                        Search</button> 
```

在某些情况下，我会有多个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:54:52.200

你的意思是你想在按钮内插入一个按钮？或在 div 中创建另一个按钮？

```
<div class="row-fluid verticalmenubottom">
    <div id="button1" class="span12 verticalMenuCell appButtonDiv"></div>
    <div id="button2" class="span12 verticalMenuCell appButtonDiv"></div>
</div> 
```

或者我想念什么@@？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:15:47.370

我没有 JSP 能力，但是您正在询问如何将内容添加到文档准备好的元素中。

使用 JQuery，您可以这样做：

```
$(document).ready(init); 
```

否则，如果没有 JQuery，您可能会使用 body 元素的 onload 事件：

```
<body onload="init()">...</body> 
```

然后在你的脚本标签中声明这个函数：

```
function init() {
//this executes on document ready

//create your elements
    var externDiv = document.createElement('div');
    var internDiv = document.createElement('div');
    externDiv.className = 'row-fluid verticalmenubottom';
    internDiv .className = 'span12 verticalMenuCell appButtonDiv';
    externDiv.appendChild(internDiv);

//find your button and put the new elements in it (check that your jsp don't change the id client-side)
    var btn = document.getElementById('searchButton');
    btn.appendChild(externDiv);
} 
```

而已！

# c# - 在 SharePoint（自定义操作）或 C# 项目中获取货币汇率的最佳和最简单的方法是什么

> ID：13382231
> 
> 赞同：2
> 
> 时间：2012-11-14T15:50:04.550
> 
> 标签：c#, web-services, sharepoint, currency, custom-action

我从未遇到任何需要我在 C# 项目或 SharePoint 自定义操作解决方案中使用外部 Web 服务或与货币转换器交互的问题（不要害怕人们它只是 Visual Studio 中的 C# 项目）。

我不确定这个问题是否适合这个网站，但是开发人员**你有没有试过在你的视觉工作室解决方案中获取货币汇率，如果是，那么如何以及哪个？我想我可以使用网络服务，但这是唯一的方法**，而且我不确定谁提供免费服务并且也很稳定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:21:21.703

那里有货币汇率服务。但是，业务和 LOB 规则应规定您实际执行此操作的方式。

1.  免费服务会因不同的时间跨度而延迟，如果您是实时进行的，则可能没有用。转换通常为一种标准货币，因此要将 YEN 转换为 EUR，您需要转换 YEN => USD => EUR。
2.  服务付费与您的网络延迟一样最新。这些通常也会进行不基于国家标准的转换（转换 YEN => EUR 而不经过美元）。
3.  如果您正在使用位于防火墙后面的系统，则可能无法访问 Web 服务。
4.  如果您只需要近似值，则可以使用简单的外部 XML 或数据库中的表，可以每周或根据需要更新。
5.  在某些商业案例中，实际汇率是错误的：例如，买入与卖出货币或大型跨国公司在多个货币市场上拥有期权，以便他们投机或稳定货币。

进行自己的转换的技巧是拥有一个内部恒定货币，所有其他货币都可以与之进行相对比较。这样，您只需要所有货币与一种货币 (N:1) 的比率，而不是所有货币与所有货币 (N:N) 的比率。

# java - 如何通过表单在恒定时间后将文本分配给变量？

> ID：13382233
> 
> 赞同：0
> 
> 时间：2012-11-14T15:50:11.207
> 
> 标签：java, jquery

我需要通过表单将字符串值分配给变量，10秒后，表单被处理。

一切正常，但是如何在按下提交时让表单返回？

这是我的代码：

```
<h:body>
<script type="text/javascript">
    setInterval(function () {
        $("#text").load("/x");
    }, 1000);
</script>
<h:form>
    <h:inputText value="#{indexBean.text}"/>
    <h:commandButton value="Ok" action="#{indexBean.storeText()}"/>
</h:form>
<h:panelGroup layout="block" id="text"/> 
```

```
 public void storeText(final String text) {
    new Runnable() {
        @Override
        public void run() {
            try {
                Thread.sleep(10000);
                setText(text);
            } catch (InterruptedException e) {
                e.printStackTrace();
        }
    }.run();
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:52:26.427

我不太明白你的问题是什么。但是，你可以试试这个：

```
<f:ajax event="click" render="@form" /> 
```

# c# - 如何创建一个线程，该线程将具有一个可以从另一个类中读取的字段

> ID：13382236
> 
> 赞同：1
> 
> 时间：2012-11-14T15:50:19.090
> 
> 标签：c#, multithreading

我想在 C# 中创建一个线程，它将计算计算机麦克风输入处的声音频率。我不是在问 FFT 算法，而是在问如何启动一个线程，以便我可以在 Thread.hz 更改时修改 A.hz 字段。

**将只有 1 个线程。**

```
public class A()
{
    Thread t;
    int hz;  <-- i would like to change this when

    A()
    {
        starts Thread
        onchange t.hz modifies and dispays this.hz
    }        
}

class Thread
{
    int hz; <-- this changes

    void computeFrequency() <-- because of that method
    {
        changesHZField...
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:47:43.440

正如所承诺的，这是使用 Rx 的解决方案：

```
using System;
using System.Reactive.Concurrency;
using System.Reactive.Linq;

namespace rxtest
{
    class FrequencyMeter
    {
        Random rand = new Random();
        public int Hz
        {
            get
            {
                return 60+rand.Next(3);
            }
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var obs = Observable.Generate<FrequencyMeter, int>(
                new FrequencyMeter(), //state
                x => !Console.KeyAvailable, // while no key is pressed
                x => x, // no change in the state
                x => x.Hz, // how to get the value
                x => TimeSpan.FromMilliseconds(250), //how often
                Scheduler.Default)
                .DistinctUntilChanged() //show only when changed
                ;

            using (IDisposable handle = obs.Subscribe(x => Console.WriteLine(x)))
            {
                var ticks = Observable.Interval(TimeSpan.FromSeconds(1)).Subscribe(x=>Console.WriteLine("tick")); //an example only
                Console.WriteLine("Interrupt with a keypress");
                Console.ReadKey();
            }
        }
    }
} 
```

异步传递值：

```
Interrupt with a keypress
60
61
tick
62
60
tick
61
60
tick
62
61
tick
62
60
tick 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:55:16.997

You won't have to do anything special - multiple threads will be able to access your `hz` field. You'll need to consider synchronization issues (http://msdn.microsoft.com/en-us/library/ms173179.aspx)

When you have multiple threads reading/writing the same variable there are all sorts of problems. The easiest thing is probably to follow the link and copy their locking approach.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:07:06.617

```
public class A()
{
    Thread t;
    int hz;

    A()
    {
        //starts Thread
    }

    internal void Signal(int hz){
        //modifies and dispays this.hz
    }

} 
```

现在 Thread 类可以在每次设置他的属性时调用方法 Signal。要引用 A 类实例，您可以将其传递给 Thread 类构造函数并将引用存储为私有变量，或者将 A 本身声明为静态；这取决于您的整体架构。

```
class MyThread : Thread
{
    int _hz;
    A _instance;

    public void MyThread(A inst){
        _instance = inst;
    }

    void computeFrequency()
    {
        //changesHZField...
        _instance.Signal(_hz);
    }
} 
```

最后，您可能需要启用跨线程操作，具体取决于您在 A 类和 MyThread 类中所做的事情

# database - 从多个来源在 Oracle 中创建数据库表

> ID：13382237
> 
> 赞同：0
> 
> 时间：2012-11-14T15:50:20.350
> 
> 标签：database, oracle, database-design

我从两个不同的表源获取数据。将它们组合成一个的最佳方法是什么？

例如：

**表一**有以下列：

```
date | time | exchange 
```

**表二**有以下列：

```
date | time | price | position 
```

**我想将它们组合起来，以便创建一个包含以下内容的表：**

```
date | time | exchange | position | price 
```

有时仓位和交换栏是空的。创建这个新表的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:52:53.680

我建议进一步阅读 SQL JOIN。[SQL 连接](http://www.w3schools.com/sql/sql_join.asp)

然后阅读视图如何表示来自多个表的数据：[什么是 Oracle 中的视图？](https://stackoverflow.com/questions/256700/what-is-a-view-in-oracle)

然后阅读 SQL UNION 如何组合来自多个表的结果：[http ://www.orafaq.com/wiki/Union](http://www.orafaq.com/wiki/Union)

阅读从选择中创建表：[http ://www.techonthenet.com/sql/tables/create_table2.php](http://www.techonthenet.com/sql/tables/create_table2.php)

了解物化视图：[http ://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_6002.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_6002.htm)

这只是表面问题。所有这些都将以各种好处和缺点解决您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:54:22.210

我可能会建议也使用连接表，尽管不清楚您的表是如何真正相关的。你应该了解[标准化](http://databases.about.com/od/specificproducts/a/normalization.htm)

# dynamics-crm-2011 - CRM 2011 如何为高级查找中的选项列表选择自动连接 StringMapBase 表？

> ID：13382238
> 
> 赞同：1
> 
> 时间：2012-11-14T15:50:20.973
> 
> 标签：dynamics-crm-2011, reporting-services, crm

StringMapBase SQL 表是保存已添加到实体的选项列表值的表。在 CRM 2011 中使用高级查找时，如果您从要添加到结果集中的实体中选择一个选取列表列（选项列表）值，高级查找机制会以某种方式自动连接来自 StringMapBase 的选取列表的字符串值表而不是显示实际存储在记录中的 StringMapBase 的主键值。

我正在创建取决于某些选项列表值的 SSRS 报告：

```
// SQL psuedocode
Select...
...
Where Value = 'Some String Value of Interest' 
```

但是，我非常不喜欢这样一个事实，到目前为止，我基本上必须编写一些临时 SQL 才能获得适用的 StringMapBase 值。为了做到这一点，我必须硬编码一些我鄙视的魔法值。

有谁知道 CRM Advanced Find 引擎通过什么机制自动连接这些值？还是它只是简单地加入 StringMap 系统视图或在某处使用 SPROC？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:05:06.270

当您使用过滤视图（读取报告中数据的唯一受支持的方式）时，位、选项列表和查找列将有一个额外的“逻辑”列。对于名为“new_option”的属性，您应该能够将“name”添加到列名的末尾并查询“new_optionname”。

```
select new_option, -- Integer
       new_optionname -- StringMap joins generated by Filtered Views
from   Filterednew_test 
```

# java - 嵌套迭代器类

> ID：13382241
> 
> 赞同：1
> 
> 时间：2012-11-14T15:50:34.530
> 
> 标签：java, iterator

我有一个类'Deck'，它创建一个名为deck 的ArrayList。我正在尝试创建一个**嵌套的迭代器类**，它以相反的顺序遍历卡片。

```
public class Deck {

    //Nested Iterator class to traverse the Cards in reverse order
    public abstract class DeckIterator implements Iterator<Card>{

        ListIterator it = deck.listIterator(deck.size());

        //Iterate in reverse.
        while(it.hasPrevious()) { //errors
            //System.out.println(it.previous());
            return it.previous();
        }  
    }
} 
```

我已经尝试了下面的建议，但我仍然没有运气......而不是将一个 ArrayList 以相反的顺序复制到另一个，我宁愿迭代外部类中的现有 ArrayList。这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T15:52:31.247

首先 make `Deck`implement `Iterable<Card>`，这将要求您实现该`iterator()`方法。使该方法返回嵌套`DeckIterator`类的实例。

```
@Override
public Iterator<Card> iterator()
{
    return new DeckIterator(deck);
} 
```

然后`DeckIterator`实现`Iterator<Card>`并实现`hasNext()`,`next()`和`remove()`方法。

```
private static class DeckIterator implements Iterator<Card>
{

private int nextCard;
private final List<Card> cards;

public DeckIterator(List<Card> cards)
{
    this.cards = cards;
    this.nextCard = cards.size() - 1;
}

@Override
public boolean hasNext()
{
    if (nextCard < 0)
        return false;
    return true;
}

/**
 * {@inheritDoc}
 */
@Override
public Card next()
{
    if (hasNext())
        return cards.get(nextCard--);
    return null;
}

/**
 * {@inheritDoc}
 */
@Override
public void remove()
{

}
} 
```

然后使用，

```
Iterator<Card> iterator = yourDeck.iterator();
while (iterator.hasNext())
{
 Card card = iterator.next();
} 
```

在甲板上向后迭代。

`Iterator`但是，如果您只想反向迭代，则不需要创建自己的`ListIterator`可以为您完成。

```
ArrayList<Card> deck = new ArrayList<Card>();
// Do whatever you do with your deck :P

ListIterator<Card> li = deck.listIterator(deck.size());

// Iterate in reverse.
while(li.hasPrevious()) 
{
  Card card = li.previous();
  // Do stuff with the card
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T15:54:10.797

[Iterator](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Iterator.html)是一个*接口*，因此您需要实现其中的方法。有关更多信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/5849154/can-we-write-our-own-iterator-in-java)。

但是，也许最简单的方法是在您`Deck`的

1.  创建集合的副本，但顺序相反
2.  *返回该*集合的迭代器

请注意，由于您现在正在迭代原始集合的副本，因此它应该不受另一个线程从桌面添加/删除卡片的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:00:08.490

使用 Guava，您可以反转列表并迭代结果。看看： [http ://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html#reverse%28java.util.List%29](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Lists.html#reverse%28java.util.List%29)

这应该很容易，不应该导致太多的变化/重构。

# php - 使用 join 和两个 where 条件更新语句

> ID：13382243
> 
> 赞同：1
> 
> 时间：2012-11-14T15:51:08.770
> 
> 标签：php, mysql

这就是我需要更新来做的事情：

*   使用用户编辑的 TIME 值更新我的汇总表 TIME 列
*   比较新的 TIME，使用我的汇总表和 hour_interval 表中的 ID 来连接表
*   找到新 TIME 所在的正确行 ID（有两列有开始和结束时间；例如：开始列 - 04:00:00 结束列 06:00:00）
*   使用汇总表 ID 使用正确的间隔行 ID 更新汇总表

代码执行，但不更新间隔 ID。建议？

```
UPDATE summary S  
JOIN hour_interval H  
ON S.hourinterval_id = H.hourinterval_id 
SET S.hourinterval_id = H.hourinterval_id 
WHERE ('$new_time' BETWEEN H.start_hour AND H.end_hour) 
AND summary_id = '$summary_id'" 
```

```
hourinterval_id start_hour  end_hour
1               4:00:00 5:59:59
2               6:00:00 7:59:59
3               8:00:00 9:59:59
4              10:00:00 11:59:59
5              12:00:00 13:59:59
6              14:00:00 15:59:59
7              16:00:00 17:59:59
8              18:00:00 19:59:59 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:16:02.440

尝试这个：

```
UPDATE summary S  
JOIN hour_interval H  
ON '$new_time' BETWEEN H.start_hour AND H.end_hour
SET S.hourinterval_id = H.hourinterval_id 
WHERE summary_id = '$summary_id'" 
```

# vba - 在 VBA Excel 2007 中将文本转换为数字

> ID：13382247
> 
> 赞同：1
> 
> 时间：2012-11-14T15:51:20.337
> 
> 标签：vba, excel, excel-2007

不

`Worksheets("Data").Cells(9, 17) + 0#`在 VBA 代码中将“6”（或任何存储为文本的数字）自动转换为数字？

如果没有，你知道有什么方法可以做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:01:02.367

试试`Worksheets("Data").Cells(9,17).NumberFormat = "0"`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:04:02.753

如果需要在代码中使用它，可以将字符串转换为 Dboule 数据类型：

```
Dim dbl As Double
dbl = CDbl(ThisWorkbook.Worksheets("Data").cells(9, 17)) 
```

# javascript - 做某事并继续执行类

> ID：13382248
> 
> 赞同：1
> 
> 时间：2012-11-14T15:51:26.823
> 
> 标签：javascript, oop, angularjs

我想在调用 $http 的 get 方法之前添加一些标题。我试过这个：

```
$http = $originalHttpMethod;
this.$http = function() {
   //add headers
   return $http
};
$http.get({url:'http://...'}); 
```

但我收到此错误：

> TypeError: Object function () {return $http} 没有方法'get'。

我想在没有崩溃原始课程的情况下做到这一点。
我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:17:10.260

当您调用 $http 服务时，您可以在[配置参数对象](http://docs.angularjs.org/api/ng.%24http#Usage)中定义您的标头：

```
configObj = {url:'http://...', headers: { add your headers here}, ... };
$http.get(configObj); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:07:27.847

提供服务而不是在本地做任何事情。这样，您可以更轻松地在您的应用程序中重用它。

```
module.factory('$myHttp', ['$http', function($http) {
  //do your stuff
  return $http;
}]); 
```

然后在您的控制器、指令或任何其他服务中，只需将其作为依赖项包含并像这样使用它：

```
$myHttp.get() 
```

以下是有关此的更多信息：

[http://www.yearofmoo.com/2012/10/more-angularjs-magic-to-supercharge-your-webapp.html#you-should-be-using-custom-services](http://www.yearofmoo.com/2012/10/more-angularjs-magic-to-supercharge-your-webapp.html#you-should-be-using-custom-services)

# extjs - ExtJS 4.1 - 改变 JsonStore 的值

> ID：13382249
> 
> 赞同：0
> 
> 时间：2012-11-14T15:51:27.723
> 
> 标签：extjs, store, javascript-framework, extjs4.1

我使用 ExtJS 4.1。这是我的模型和商店：

```
Ext.define('MyModel', {
    extend: 'Ext.data.Model',
    fields: ['status', 'data', 'data1', 'data2']
});

var store1 = Ext.create('Ext.data.JsonStore', {
    model: 'MyModel',
    proxy: {
        type: 'ajax',
        url : 'actionJsonServlet'
    },
    autoLoad: true
}); 
```

通过 Ajax 加载商店后，我想更改 JsonStore 的第一个“状态”（仅用于第一行）的值。我尝试了下面的行，但它不起作用（第 2 行的记录未定义）：

```
var record = store1.getAt(0);
record.set("status", "Waiting"); 
```

我有这个错误：

```
Cannot call method 'set' of undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:37:15.753

您的问题很可能是由于存储加载的异步性质造成的。根据您的代码编写方式，您可能会在加载存储之前过早尝试执行存储操作，即使您已打开自动加载。

最好的方法是在 store 上设置一个加载事件监听器，然后执行你的操作。她就是一个例子：

```
Ext.define('MyApp.store.Drafters', {
    extend:'Ext.data.Store',
    model:'MyApp.model.User',
    autoLoad:true,
    proxy:{
        type:'ajax',
        url:'user/drafters.json',
        reader:{
            type:'json',
            root:'data'
        }
    },
    listeners:{
        load:function (store, recs) {
            store.insert(0, {uid:'', name:''});  //adding empty record to enable deselection of assignment
        }
    }
}); 
```

# php - PHP cURL 获取沃尔玛礼品卡余额？

> ID：13382250
> 
> 赞同：1
> 
> 时间：2012-11-14T15:51:29.143
> 
> 标签：php, curl

我正在尝试使用以下代码来获取礼品卡中的余额，而无需将沃尔玛用于最终用户。

```
<?php 
$url = "https://www.walmart.com/cservice/ProcessShoppingCard.do";
//
$h = curl_init();

curl_setopt($h, CURLOPT_URL, $url); 
curl_setopt($h, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($h, CURLOPT_POST, true);
curl_setopt($h, CURLOPT_POSTFIELDS, array(
'cardNumber' => '1234567890123456',
'pin' => '1234',
'GetCardBalance' => 'GetCardBalance'
));
curl_setopt($h, CURLOPT_HEADER, true);
curl_setopt($h, CURLOPT_RETURNTRANSFER, true);

$result = curl_exec($h);
echo $result;

?> 
```

但它似乎只显示页面而不显示结果。我检查了 walmart 中使用的表单，它只有 3 个字段：cardNumber、pin 和 GetCardBalance。

我用过但仍然没有得到结果。

如果我转到此网址[https://www.walmart.com/cservice/ProcessShoppingCard.do](https://www.walmart.com/cservice/ProcessShoppingCard.do) 并尝试检查余额，它确实会显示响应。

任何想法，我做错了什么以及在哪里做错了？

请指教，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:42:01.760

好的，经过多次尝试，我终于能够使用以下代码工作。我没有正确使用 POSTFIELDS 方法。我使用 Firefox Firebug 来查看在提交表单时发送了哪些变量，并根据这些变量使用它们，这一切都奏效了 :)

```
$url = "https://www.walmart.com/cservice/ProcessShoppingCard.do";
//
$h = curl_init();
curl_setopt($h, CURLOPT_URL, $url); 
curl_setopt($h, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($h, CURLOPT_POST, true);
curl_setopt($h, CURLOPT_POSTFIELDS, "cardNumber=1234567890123456&pin=1234&GetCardBalance.x=90&GetCardBalance.y=8");
curl_setopt($h, CURLOPT_HEADER, true);
curl_setopt($h, CURLOPT_RETURNTRANSFER, true);
//
$result = curl_exec($h);
echo $result; 
```

谢谢大家的帮助和建议。

# android - 在 Android 应用中，将当前线程优先级设置为小于 1 会导致强制关闭

> ID：13382255
> 
> 赞同：1
> 
> 时间：2012-11-14T15:51:41.083
> 
> 标签：android, forceclose, thread-priority

我试图通过放置以下内容来增加应用程序中线程的优先级：

```
Thread.currentThread().setPriority(N); 
```

当前线程的正常优先级是 5，我可以更改`N`为低至 1，但如果我将其设置为 0 或 -1，我会在手机上收到强制关闭消息。

我不能增加这个线程的优先级有什么原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T15:56:13.353

If you look at the [documentation](http://developer.android.com/reference/java/lang/Thread.html#setPriority%28int%29) for `Thread.setPriority()`, it says the priority must be in a range defined by [`MAX_PRIORITY`](http://developer.android.com/reference/java/lang/Thread.html#MAX_PRIORITY) (10) and [`MIN_PRIORITY`](http://developer.android.com/reference/java/lang/Thread.html#MIN_PRIORITY) (1). Since 0 and -1 are outside that range you should be seeing an `IllegalArgumentException`.

# serialization - IDEA：为 Serializable howto 添加默认的序列版本 ID？

> ID：13382261
> 
> 赞同：2
> 
> 时间：2012-11-14T15:51:53.527
> 
> 标签：serialization, syntax, intellij-idea

使用`IntelliJ`，每当我添加`implements Serializable`它时，它都不会添加默认的序列版本 ID，类似于 Eclipse 的做法。

![在此处输入图像描述](../Images/cce8b707e3165cd4e00116941c4390a6.png)

使用`Eclipse`，如果我这样做，我会收到警告和要约

![在此处输入图像描述](../Images/3d3aa0726e3dd1905a336320e3271698.png)

**请问如何在 IntelliJ 中获得相同的行为？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T16:01:37.517

默认情况下禁用此检查，您需要在设置中启用它：

![启用检查](../Images/0eb83c26f552ed9fdc95be12f257ad23.png)

启用后，当站在突出显示的类名上时，快速修复在`Alt`+上可用：`Enter`

![Alt+Enter](../Images/fc771bebaaa25bc78fef00cca1908fec.png)

# python - node.js 在哪里适合堆栈或增强它

> ID：13382262
> 
> 赞同：0
> 
> 时间：2012-11-14T15:51:55.400
> 
> 标签：python, node.js, web-applications

我有兴趣了解有关 node.js 的更多信息并在新项目中使用它。我遇到的问题是设想我可以在哪里使用它来增强我的网络堆栈以及它将扮演什么角色。我真正用它做的只是遵循一两个教程，你可以在所有 JS 中制作类似于 todo 应用程序的东西。这一切都很好而且很花哨，但是在更复杂的 Web 架构中，我在哪里可以利用它。

所以这是我计划如何设置我的应用程序的示例

用于提供视图的 Web 服务器：

*   Python（烧瓶/werkzeug）
*   金贾
*   nginx
*   html/css/js

API服务器：

*   Python（烧瓶/werkzeug）
*   SQLAlchemy (ORM)
*   nginx
*   主管+独角兽

数据库服务器

*   Postgres

那么这个堆栈的任何部分是否可以通过引入 nodeJS 来替换或增强，我认为它最好在 API 服务器上使用，但不完全确定如何使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:30:40.373

它将`Python (flask/werkzeug)`在您的视图服务器和 API 服务器中替换。

# php - 在 symfony 命令中多次更改语言环境

> ID：13382264
> 
> 赞同：5
> 
> 时间：2012-11-14T15:52:05.313
> 
> 标签：php, symfony, command-line, locale

我正在尝试通过 symfony 2.0 命令（由 cron 调用）向用户发送提醒。问题是我们的网站是多语言的（默认是法语）。

我在发送提醒的循环的每个步骤中设置语言环境。第一次正确设置了区域设置。但在后续步骤中，好像最新的语言环境更改没有反映在模板中，模板被翻译为第一步的语言环境。

我想知道如何修复它以反映语言环境的变化。

这是一些代码（简化）供参考：

```
<?php
// This loop is inside the execute() function of a symfony service (implements ContainerAwareCommand)
// … 
// Sending reminders one at a time
foreach ($reminders as $reminder)
{
    $message = \Swift_Message::newInstance();

    $message->setFrom(array('noreply@domain.com' => 'YourBot'));
    // Change locale to that of the user
    $this->getContainer()->get('session')->setLocale($reminder->getLocale());

    $templating = $this->getContainer()->get('templating');

    // Reminder text
    $email_message = $templating->render('MyBundle:Reminder:reminder.html.twig');

    $message->setSubject('Reminder')
        ->setTo($reminder->getEmail())
        ->setBody($email_message, 'text/html');

    $this->getContainer()->get('mailer')->send($message);

    // Update reminder status
    $reminder->setEmailSent(true);
    $emSymfony->persist($reminder);
}
// … subsequent code
?> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T16:03:21.853

尝试添加

```
$this->getContainer()->get('translator')->setLocale($reminder->getLocale()); 
```

因为语言环境仅在其初始化时保存在翻译器中，而不是在调用 trans() 时

# django - 过滤反向关系

> ID：13382265
> 
> 赞同：2
> 
> 时间：2012-11-14T15:52:17.773
> 
> 标签：django, filtering, tastypie, one-to-many

我设置了美味的派和 Django，它们运行良好，我可以通过 HTTP 过滤和修补对象。

现在我想尝试根据反向关系过滤我的结果，但我无法让它正常工作。

所以我的 Django 模型是这样的，每个库对象都有一个多路索引，每个多路索引可能有多个与之一起使用的库：

```
class MultiplexIndex(models.Model):
    multiplex_index_name = models.CharField(max_length = 100,   unique=True )
    multiplex_index_seq = models.CharField(max_length = 100,   null=True, blank=True) 
   def __unicode__(self):
        return  "%s (%s)" % ( self.multiplex_index_name , self.type.name)
    class Meta:
        ordering = ['multiplex_index_name']

class Library(models.Model):
    sample = models.ForeignKey(Sample, db_index=True)
    date_prepared = models.DateField(null=True, db_index=True )
    multiplex_index = models.ForeignKey(MultiplexIndex , null=True , blank=True)
    ...
    ...
    etc.... 
```

我的 Tastypie 资源是这样的（我尝试了各种组合）：

```
class LibraryResource(ModelResource):
    sample = fields.ToOneField('sequencing.api.SampleResource', 'sample' )
    multiplexindex = fields.ToOneField('sequencing.api.MultiplexIndexResource' , 'multiplex_index'  , related_name='multiplexindex'  , null=True )  
    loadedwith_set = fields.ToManyField('sequencing.api.LoadedWithResource' ,    'loadedwith_set' , null=True)
    class Meta:
        queryset = Library.objects.all().order_by('-date_prepared')
        resource_name = 'library'
        paginator_class = Paginator
        serializer = PrettyJSONSerializer()
        filtering = {
            'sample': ALL_WITH_RELATIONS ,
            'multiplexindex' : ALL_WITH_RELATIONS , 
            'loadedwith' : ALL_WITH_RELATIONS , 
            'id' : ALL ,
            'name': ALL
        }

class MultiplexIndexResource(ModelResource):
    library = fields.ToManyField('sequencing.api.LibraryResource', attribute='library_set' ,    related_name='library' )
    class Meta:
        queryset = MultiplexIndex.objects.all()
        resource_name = 'multiplexindex'
        serializer = PrettyJSONSerializer()
        filtering = {
            'multiplex_index_name' : ALL ,
            'library' : ALL_WITH_RELATIONS , 
        } 
```

我可以正确过滤“前进方向”。以下将返回多路索引为 92hp 的所有库。

```
http://127.0.0.1:8000/api/seq/library/?multiplexindex__multiplex_index_name=92hp&format=json 
```

但是，当我尝试对反向关系进行过滤时，总是会出错。我想在 Django 查询集 API 中做同样的事情。

```
MultiplexIndex.objects.filter(library__name='515D') 
```

所以我的网址如下：

```
http://127.0.0.1:8000/api/seq/multiplexindex/?library__name=515D&format=json 
```

在这种情况下，我收到错误：无法将关键字“library_set”解析为字段。

（我尝试将其更改为库，但后来我得到的错误是：'MultiplexIndex' 对象没有属性'库'）

我的 MultiplexIndexResource 的 attribute='library_set' 似乎引起了问题。当它设置为库集时，它会返回一个相关的管理器，但是过滤器被设置为“library_set__name=515D”。当它设置为库时，MultiplexIndex 表上没有可供它过滤的字段。

那么有没有一种简单的方法来设置过滤，使其反向工作？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:55:51.040

在 上`MultipleIndexResource`，不要将`library_set`其视为 kwargs，而应视为 args。所以，用这样的`attribute = 'library_set'`替换`library_set`：

```
library = fields.ToManyField('sequencing.api.LibraryResource', 'library_set' , related_name='library') 
```

`full = True`如果你想添加。

# java - 来自 Spring 3.1 实现的 @Cacheable 与 JSF 不兼容？

> ID：13382267
> 
> 赞同：1
> 
> 时间：2012-11-14T15:52:20.880
> 
> 标签：java, spring, jsf-2, annotations

我正在开发一个集成 Spring 3.1 和 JSF 2 的应用程序。我尝试使用 Spring 中的 @Cacheable 创建一个简单的缓存，这就是我的应用程序上下文和我的 dao 中的代码：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:cache="http://www.springframework.org/schema/cache"
    xsi:schemaLocation="  
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd  
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.1.xsd  
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd  
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd">

    <aop:aspectj-autoproxy />

    <cache:annotation-driven />

    <!-- generic cache manager -->
    <bean id="cacheManager" class="org.springframework.cache.support.SimpleCacheManager">
        <property name="caches">
            <set>
                <bean
                    class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean"
                    name="default" />
                <bean
                    class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean"
                    name="parametros" />
            </set>
        </property>
    </bean>

    ....

</beans>

@Override
@Cacheable(value="parametros",key="nombre")
public Parametro getByNombre(final NombreParametro nombre) {
    final Criteria criteria = super.getSession().createCriteria(
            Parametro.class);
    criteria.add(Restrictions.eq("nombre", nombre));
    return (Parametro) criteria.uniqueResult();
}

@Override
@CacheEvict(value = "parametros")
public Parametro save(final Parametro entity) {
    getHibernateTemplate().save(entity);
    return entity;
} 
```

然后我有一个 Spring 组件，它使用封装这个 dao 的服务：

```
@Component("parametroUtilsBean")
public class ParametroUtilsBean implements Serializable {

    private static final Logger LOG = Logger
            .getLogger(ParametroUtilsBean.class);

    @Autowired
    IParametroService parametroService;

    public String getValorByNombre(final NombreParametro nombre) {

        final Parametro parametro = parametroService.getByNombre(nombre);
        return parametro == null ? null : parametro.getValor();
    }
} 
```

但是当我在我的 ManagedBean 中注入这个组件时：

```
@ManagedProperty(value = "#{parametroUtilsBean}")
private ParametroUtilsBean parametroUtils;

public void setParametroUtils(final ParametroUtilsBean parametroUtils) {
    this.parametroUtils = parametroUtils;
} 
```

我得到下一个例外：

```
GRAVE: Error Rendering View[/pages/gestionmensual/envio.xhtml]
java.io.NotSerializableException: org.springframework.aop.aspectj.annotation.InstantiationModelAwarePointcutAdvisorImpl
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)
    at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1346)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1154)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
    at java.util.HashMap.writeObject(HashMap.java:1001)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.defaultWriteFields(ObjectOutputStream.java:1518)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1483)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1346)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1154)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
    at java.util.HashMap.writeObject(HashMap.java:1001)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeWriteObject(ObjectStreamClass.java:945)
    at java.io.ObjectOutputStream.writeSerialData(ObjectOutputStream.java:1469)
    at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1400)
    at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1158)
    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
    at com.sun.faces.renderkit.ClientSideStateHelper.doWriteState(ClientSideStateHelper.java:325)
    at com.sun.faces.renderkit.ClientSideStateHelper.writeState(ClientSideStateHelper.java:173)
    at com.sun.faces.renderkit.ResponseStateManagerImpl.writeState(ResponseStateManagerImpl.java:122)
    at com.sun.faces.application.StateManagerImpl.writeState(StateManagerImpl.java:166)
    at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:94)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.access.channel.ChannelProcessingFilter.doFilter(ChannelProcessingFilter.java:144)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:889)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:732)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:2262)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

@Cacheable 实现与 JSF 不兼容，还是我做错了什么？如果它不兼容，是否有任何解决方法？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:05:48.473

抱歉，原来异常**与 @Cacheable 无关，**而是与实体 Parametro 所具有的另一个自动实现的 AspectJ 无关。没有它，完美运行！

# linux - python subprocess.readline() 在调用另一个 python 脚本时阻塞

> ID：13382272
> 
> 赞同：1
> 
> 时间：2012-11-14T15:52:24.233
> 
> 标签：linux, python-2.7

我一直在尝试使用 subprocess 模块将 python 脚本作为子进程运行，并且遇到了逐行读取输出的问题。

我已阅读的文档表明您应该能够在标准输出上使用子进程并调用 readline()，如果我调用的脚本是 bash 脚本，这确实有效。但是，当我运行 python 脚本时， readline() 会阻塞，直到整个脚本完成。

我写了几个重复这个问题的测试脚本。在测试脚本中，我尝试从 python 脚本 (tst.py) 中将 python 脚本 (tst1.py) 作为子进程运行，然后逐行读取 tst1.py 的输出。

tst.py 启动 tst1.py 并尝试逐行读取输出：

```
#!/usr/bin/env python
import sys, subprocess, multiprocessing, time
cmdStr = 'python ./tst1.py'
print(cmdStr)
cmdList = cmdStr.split()
subProc = subprocess.Popen(cmdList, stdout=subprocess.PIPE, stderr=subprocess.PIPE, stdin=subprocess.PIPE)

while(1):
    # this call blocks until tst1.py has completed, then reads all the output
    # it then reads empty lines (seemingly for ever)
    ln = subProc.stdout.readline()
    if ln:
        print(ln) 
```

tst1.py 只是循环打印一条消息：#!/usr/bin/env python import time

```
if __name__ == "__main__":
    x = 0
    while(x<20):
        print("%d: sleeping ..." % x)
        # flushing stdout here fixes the problem
        #sys.stdout.flush()
        time.sleep(1)
        x += 1 
```

如果 tst1.py 写成 shell 脚本 tst1.sh：

```
#!/bin/bash
x=0

while [ $x -lt 20 ]
do
    echo $x: sleeping ...
    sleep 1
    let x++
done 
```

readline() 按预期工作。

在玩了一些之后，我发现可以通过刷新 tst1.py 中的标准输出来解决这种情况，但我不明白为什么需要这样做。我想知道是否有人对这种行为有解释？

我正在运行 redhat 4 linux：Linux lb-cbga-05 2.6.9-89.ELsmp #1 SMP Mon Apr 20 10:33:05 EDT 2009 x86_64 x86_64 x86_64 GNU/Linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:57:55.437

因为如果输出被缓冲在某处，父进程将不会看到它，直到子进程在该点存在，输出被刷新并且所有 fd 都被关闭。至于为什么它在不*显式*刷新输出的情况下与 bash 一起工作，因为当您输入`echo`大多数 shell 时，它实际上会派生一个执行`echo`（打印某些内容）并存在的进程，因此输出也会被刷新。

# python - 从 mongo 集合中提取数据

> ID：13382275
> 
> 赞同：0
> 
> 时间：2012-11-14T15:52:34.593
> 
> 标签：python, mongodb, twitter, pymongo

我正在收集实时推文并存储到一个集合中我现在想从集合中的记录中提取信息：

```
 "place" : { "country_code" : "US", "url" : "http://api.twitter.com/1/geo   /id/01fbe706f872cb32.json", "country" : "United States", "place_type" : "city",  "bounding_box" : { "type" : "Polygon", "coordinates" : [  [ [     -77.119759,      38.791645 ],   [   -76.909393,     38.791645 ],    [   -76.909393,     38.995548  ],   [   -77.119759,     38.995548 ] ] ] }, "full_name" : "Washington, DC",  "attributes" : { }, "id" : "01fbe706f872cb32", "name" : "Washington" } 
```

我只想要坐标信息，所以使用 pymongo 我尝试这样做：

```
 cursor = coll.find({"place.bounding_box.type" : "Polygon"},{"coordinates" : 1}, tailable = True, timeout = False) 
```

但这不会返回边界框是关键的坐标。

我怎样才能得到这些数据返回？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:19:26.513

你必须这样做

```
cursor = coll.find({"place.bounding_box.type" : "Polygon"}, {"place.bounding_box.coordinates" : 1}) 
```

这将以以下格式返回数据：

```
>> cursor.next()
"place" : {"bounding_box" : { "coordinates" : [  [ [     -77.119759,      38.791645 ],   [   -76.909393,     38.791645 ],    [   -76.909393,     38.995548  ],   [   -77.119759,     38.995548 ] ] ]} 
```

因此，要获得您似乎想要的数据：

```
for doc in cursor:
    print doc["place"]["bounding_box"]["coordinates"] 
```

# validation - 如何创建 Symfony2.1 验证约束来验证字符串中的令牌数量

> ID：13382279
> 
> 赞同：0
> 
> 时间：2012-11-14T15:52:54.740
> 
> 标签：validation, symfony, token, symfony-2.1

有时会发生一组值作为唯一字符串存储在数据库中的情况。该字符串由用户定义的分隔符（例如“，”或“_”）分隔的所有值组成。

Symfony2.1 应用程序最好有一个验证约束，通过计算包含在该字符串中的标记数来验证字符串（例如，由输入文本表单提供）。

一个可能的例子是当您以字符串格式存储标签时，即您从输入字段（如`value1,value2,value10,value25`. 您会看到传递了 4 个令牌，但没有表单验证器可以为您进行控制。因此，应该使用这样的验证器，例如：

```
/**
* @Assert\Token(
     *      delimiter=",", 
     *      min = "1",
     *      max = "5",
     *      minMessage = "You must specify at least one token",
     *      maxMessage = "You cannot specify more than 5 tokens")
*/ 
$tags; 
```

**在 Symfony2.1** [Count](http://symfony.com/doc/current/reference/constraints/Count.html)验证器中使用 new 时有类似的东西，但它不适用于字符串，仅适用于实现 Countable 的对象数组。

谁知道如何实现那种“标记化字符串”验证器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:13:24.203

我解决了我的问题，我只想分享我的解决方案。

一种可能的解决方案是使用[回调约束](http://symfony.com/doc/current/reference/constraints/Callback.html)。例如，按照问题中提供的标签列表示例：

```
/**
 * @Assert\Callback(methods={"isTagStringValid"})
 */
class AFormModel{

protected $tags;

    public function isTagStringValid(ExecutionContext $context){
        $tagsExploded = explode(',', $this->tags);

        if(count($tagsExploded)==0){
            $context->addViolationAtSubPath('tags', 'Insert at least a tag', array(), null);    
        }
        if(count($tagsExploded)==1 && $tagsExploded[0]==='')
            $context->addViolationAtSubPath('tags', 'Insert at least a tag', array(), null);            
        }
        else if(count($tagsExploded)>10){
            $context->addViolationAtSubPath('tags', 'Max 10 values', array(), null);            
        }
    }

} 
```

* * *

一种更优雅的方式是定义“令牌”验证器。下面是一个示例：

```
namespace .....

use Symfony\Component\Validator\Constraint;

/**
  * @Annotation
*/
class Token extends Constraint {
    public $min;
    public $max;
    public $minMessage = '{{ min }} token(s) are expected';
    public $maxMessage = '{{ max }} token(s) are expected';
    public $invalidMessage = 'This value should be a string.';   
    public $delimiter = ',';
public function __construct($options = null){
    parent::__construct($options);

    if (null === $this->min && null === $this->max) {
        throw new MissingOptionsException('Either option "min" or "max" must be given for constraint ' . __CLASS__, array('min', 'max'));
    }
} 
```

}

验证器类是：

```
namespace ...

use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;

class TokenValidator extends ConstraintValidator {
    public function isValid($value, Constraint $constraint) {
        if ($value === null) {
            return;
        }
        if(!is_string($value)){
            $this->context->addViolation($constraint->invalidMessage, array(
                '{{ value }}' => $value,
            ));

            return;
        }

        $tokensExploded = explode($constraint->delimiter, $value);
        $tokens = count($tokensExploded);
        if($tokens==1){
            if($tokensExploded[0]==='')
                $tokens = 0;
        }

        if (null !== $constraint->max && $tokens > $constraint->max) {
            $this->context->addViolation($constraint->maxMessage, array(
                '{{ value }}' => $value,
                '{{ limit }}' => $constraint->max,
            ));

            return;
        }
        if (null !== $constraint->min && $tokens < $constraint->min) {
            $this->context->addViolation($constraint->minMessage, array(
                '{{ value }}' => $value,
                '{{ limit }}' => $constraint->min,
            ));
        }        
    }
} 
```

通过这种方式，您可以导入用户定义的验证器并在任何地方使用它，就像我在问题中提出的那样。

# java - 向 ApacheDS 服务器添加自定义属性

> ID：13382283
> 
> 赞同：1
> 
> 时间：2012-11-14T15:53:04.710
> 
> 标签：java, ldap, apacheds, ldif

我使用 ApacheDS 服务器作为 LDAP 服务器。我创建了一个自定义属性以在我定义的 LDAP 结构中使用。我创建了一个模式，并在该模式内定义了一个 ObjectClass 和一个名为 dateOfBirth 的属性。我导出了 Schema 并将其导入到 ApacheDS 的 DIT 中。架构已导入，可以查看 dateOfBirth 属性。

但是，当我尝试添加它时，我收到一条警告：

```
Warning according to the schema attribute dateOfBirth is not allowed.

Do you still want to add the new value? 
```

dateOfBirth 用于存储有关 Person 的信息。LDAP 中的 Person 对象类称为 inetOrgPerson ObjectClass。添加 dateOfBirth 以使用它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-25T15:30:51.127

您可以使用 Apache directory studio 在 Apache DS 中添加自定义**对象和属性**（不应存在）。

步骤是

1.  打开 Apache 目录工作室。
2.  转到**模式编辑器**透视图。
3.  右键单击项目窗格并创建新的模式项目。
4.  选择离线/在线并给出项目名称。
5.  打开连接
6.  右键单击模式窗格并创建具有唯一名称的新模式（例如 test123）。
7.  在架构下可以为这些属性创建新的属性和对象。（查看现有对象以供参考）
8.  完成所有操作后，可以导出为 .ldif 文件（比如说 test.ldif）
9.  现在转到**LDAP Browser**透视图。
10.  在**ou=schema**对象上右键，然后单击 import as LDIF。
11.  导入从模式项目中导出的 LDIF 文件（步骤 8）。
12.  成功完成并刷新 ou=schema 对象即可看到添加的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:20:37.380

无需定义`dateOfBirth`属性。[RFC2985](https://www.rfc-editor.org/rfc/rfc2985)`naturalPerson`中描述的辅助 objectClass已经允许使用. 将objectClass 添加到您的条目中，然后添加符合.`generalizedTimeSyntax``naturalPerson``dateOfBirth``generalizedTimeSyntax`

```
dn: cn=myPerson,dc=example,dc=com
objectClass: top
objectClass: inetOrgPerson
objectClass: naturalPerson
dateOfBirth: 20121115121912.810Z 
```

等等。

更新：来自 RC2985 的示例 objectClass 定义。

```
dn: cn=schema
objectClass: top
objectClass: ldapSubentry
objectClass: subSchema
objectClasses: ( 1.2.840.113549.1.9.24.2 NAME 'naturalPerson'
  SUP top
  AUXILIARY
  MAY ( emailAddress $
    unstructuredName $
    unstructuredAddress $
    dateOfBirth $
    placeOfBirth $
    gender $
    countryOfCitizenship $
    countryOfResidence $
    pseudonym $
    serialNumber )
  X-ORIGIN 'RFC 2985' ) 
```

# ruby-on-rails - 在回形针中将图像调整为最小尺寸

> ID：13382286
> 
> 赞同：1
> 
> 时间：2012-11-14T15:53:08.593
> 
> 标签：ruby-on-rails, imagemagick, paperclip

我正在使用 Paperclip 调整导入图像的大小，并且我希望图像至少为 465x465，因此我在模型中设置了以下样式：

```
has_attached_file :image, :styles => { :cropped => ["465x465^", :jpg]} 
```

据我了解 ImageMagick 文档以及 Stack Overflow 上的各种其他问题和答案，插入符号 (^) 应该意味着如果图像宽度或高度小于这些最小尺寸，则会调整其大小以满足它们并保持纵横比。

我遇到的麻烦是我正在导入超出宽度和高度的图像，在这种情况下，我希望 ImageMagick 不理会它，但它正在调整较小尺寸（如果是纵向图像，则宽度，如果它是风景）到 465px - 有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:10:24.253

看一下 imagemagick 的文档，看起来你正在看`<`标志：

[http://www.imagemagick.org/Usage/resize/#enlarge](http://www.imagemagick.org/Usage/resize/#enlarge)

我没试过，但应该可以

# jquery - jQuery: appendTo($('body')) 不起作用

> ID：13382287
> 
> 赞同：0
> 
> 时间：2012-11-14T15:53:15.230
> 
> 标签：jquery, jquery-selectors

```
var popupType1 = "<div id=\"layerpopuplock\" style=\"position:absolute; width:375px; height:170px; z-index:2; left: 2px; top: 50px; visibility: hidden; \">";
    popupType1 += "<table width=\"375\" border=\"1\" cellpadding=\"0\" cellspacing=\"0\" bordercolor=\"#FF0000\">";
    popupType1 += "<tr><td align=\"center\" bordercolor=\"#FFFFFF\" class=\"FacetBiggerFieldCaptionTD\" id=\"popupmessagelock\" nowrap>message</td></tr>";
    popupType1 += "</table></div>";

$(popupType1).appendTo($('body')); 
```

这段代码不起作用。

我尝试了 $('body') 的 console.log 并且我看到它是空的，但是当然 html 已经在这里，并且 body 存在。

***这可能是 $('body') 为空的原因吗？***

* * *

***解决方案：***

很抱歉浪费您的时间。我的假设是错误的：*html 已经在这里*

我以这种方式更正，现在它去了，对不起！！！！

```
$(function() {
    ... previous code ...
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T15:54:25.690

最后更换你的 2

```
popupType1 = ... 
```

经过

```
popupType1 += ... 
```

有一个有意义的 HTML 字符串。

另请注意，如果没有样式`visibility: hidden;`，则更容易看到结果。`div`

**[示范](http://dystroy.org/stackoverflow/appendTo.html)**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T15:54:57.300

你现在需要做`+=`的只是附加`</table></div>`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-14T16:10:48.630

我看到3点要注意：

1.  将字符串与`+=`...连接（组合）`var longstr = str; longstr += str2;`
2.  在`.appendTo()`使用选择器而不是对象引用...`$(..).appendTo('body');`
3.  您是否使用 DOM-Ready 处理程序`jQuery.ready( ... );`来触发您的代码？此处理程序确保在使用您的脚本时所有 DOM 节点都准备就绪，并且它将被插入到正确的位置（即使主体节点存在，也不会妨碍其他节点）[jQuery API：.ready()](http://api.jquery.com/ready/)

除了2：您还可以使用`$('body').append(popupType1);`

除了 3：它可能取决于您调用脚本的位置 - 例如，正文中的脚本标签可能会表现出奇怪的添加元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T15:55:50.833

```
popupType1 += "<tr><td align=\"center\" bordercolor=\"#FFFFFF\" class=\"FacetBiggerFieldCaptionTD\" id=\"popupmessagelock\" nowrap>message</td></tr>";
popupType1 += "</table></div>"; 
```

You are missing the += from your last two popupType1 assignments.

# crystal-reports - 在放置在多列格式部分中的子报表中显示居中的页眉

> ID：13382292
> 
> 赞同：2
> 
> 时间：2012-11-14T15:53:24.583
> 
> 标签：crystal-reports, crystal-reports-2010

一整天过去了，我仍然找不到解决方案......

我正在创建一份报告，用于打印试卷（带有 VS 2010 的水晶报告）。所有考试都有多个相关单元，并且所有单元都有自己的问题。

所以我创建了一个包含单元和问题的子报告，并添加到主报告的详细信息部分，该部分格式为多列。我已经生成了如下所示的报告。

[http://www.avekon.com/tmp/examprintscreen0.png](http://www.avekon.com/tmp/examprintscreen0.png)

到目前为止一切都很好。但是当我想添加单位标题（在子报表中）时，它们显示为每列的标题。我想将单元标题显示在每页顶部的中心，如下所示。

[http://www.avekon.com/tmp/examprintscreen.png](http://www.avekon.com/tmp/examprintscreen.png)

*   试图向主报告添加标题并从子报告中更新它。不工作！因为变量不在子报表循环时。

*   试图将其他部分格式化为多列。如我所见，不可能。

*   试图将子报表插入子报表。不可能了。

我尝试了很多其他合乎逻辑和不合逻辑的方式，但最后都没有成功。这应该很容易，但我找不到正确的方法。请帮忙，真的很重要！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:34:25.973

从主报表中删除多列格式，而是将子报表格式化为多列。

这应该可以解决问题。

# python - 我如何打印一些东西然后它的列表？

> ID：13382293
> 
> 赞同：5
> 
> 时间：2012-11-14T15:53:27.617
> 
> 标签：python

我有一个世界上所有国家的txt文件，以及他们出口什么样的产品。

这是没有任何拆分或剥离的一行的样子（注意`\t`和`\n`）： `[Jamaica\t alumina, bauxite, sugar, rum, coffee, yams, beverages, chemicals, wearing apparel, mineral fuels\n]`

我必须编写一个程序来做到这一点：

```
Angola
[ 'oil,', 'diamonds,', 'refined', 'petroleum', 'products,', 'coffee,', 'sisal,', 'fish,', 'fish', 'products,', 'timber,', 'cotton']

Anguilla
[ 'lobster,', 'fish,', 'livestock,', 'salt,', 'concrete', 'blocks,', 'rum']

Antigua and Barbuda
[ 'petroleum', 'products,', 'bedding,', 'handicrafts,', 'electronic', 'components,', 'transport', 'equipment,', 'food,', 'live', 'animals']

Argentina
[ 'soybeans,', 'petroleum,', 'gas,', 'vehicles,', 'corn,', 'wheat'] 
```

这是我到目前为止所做的，但从现在开始我不知道如何前进：

```
import os
file=open("exports.txt",'r')
list=[]

for i in file:
    list.append(i.split(" "))

for i in range(len(list)):
    print(list[i]) 
```

结果，我得到了每个国家/地区的清单以及它出口什么：

```
['Angola\t', 'oil,', 'diamonds,', 'refined', 'petroleum', 'products,', 'coffee,', 'sisal,', 'fish,', 'fish', 'products,', 'timber,', 'cotton\n']
['Anguilla\t', 'lobster,', 'fish,', 'livestock,', 'salt,', 'concrete', 'blocks,', 'rum\n']
['Antigua', 'and', 'Barbuda\t', 'petroleum', 'products,', 'bedding,', 'handicrafts,', 'electronic', 'components,', 'transport', 'equipment,', 'food,', 'live', 'animals\n']
['Argentina\t', 'soybeans,', 'petroleum,', 'gas,', 'vehicles,', 'corn,', 'wheat\n'] 
```

我该如何计数？感谢帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T16:00:36.813

这应该这样做

```
with open("exports.txt",'r') as infile:
    exports = {}
    for line in infile:
        parts = line.partition('\t')
        exports[parts[0]] = parts[-1].strip().split(', ')

for country, exports in exports.iteritems():
    print country
    print exports 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:02:01.333

假设你已经得到了你提到的列表，你可以简单地做

```
>>> some_list
[['Angola\t', 'oil,', 'diamonds,', 'refined', 'petroleum', 'products,', 'coffee,', 'sisal,', 'fish,', 'fish', 'products,', 'timber,', 'cotton\n'], ['Anguilla\t', 'lobster,', 'fish,', 'livestock,', 'salt,', 'concrete', 'blocks,', 'rum\n'], ['Antigua', 'and', 'Barbuda\t', 'petroleum', 'products,', 'bedding,', 'handicrafts,', 'electronic', 'components,', 'transport', 'equipment,', 'food,', 'live', 'animals\n'], ['Argentina\t', 'soybeans,', 'petroleum,', 'gas,', 'vehicles,', 'corn,', 'wheat\n']]
>>> for row in some_list:
    print row[0]
    print map(str.strip,row[1:])

Angola  
['oil,', 'diamonds,', 'refined', 'petroleum', 'products,', 'coffee,', 'sisal,', 'fish,', 'fish', 'products,', 'timber,', 'cotton\n']
Anguilla    
['lobster,', 'fish,', 'livestock,', 'salt,', 'concrete', 'blocks,', 'rum\n']
Antigua
['and', 'Barbuda\t', 'petroleum', 'products,', 'bedding,', 'handicrafts,', 'electronic', 'components,', 'transport', 'equipment,', 'food,', 'live', 'animals\n']
Argentina   
['soybeans,', 'petroleum,', 'gas,', 'vehicles,', 'corn,', 'wheat\n']
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:00:51.920

当您从文件中遍历列表时，您可以使用`list.pop(0)`- 这将为您提供列表的第一个元素并将其从列表中删除。

我还建议切换到使用`with`关键字打开文件并更改变量名。所以像：

```
with open("exports.txt",'r') as infile:
    lines = infile.readlines()

for line in lines: 
    print line.pop(0) #Note that this doesn't actually remove the tab
    print line 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T16:01:01.170

我的建议：构建一个将国家映射到它所生产的东西的字典，并在 "\t" 上分割每一行

```
file=open("exports.txt",'r')
dict = {}

for i in file:
    spl_line = i.split("\t")
    dict[spl_line[0]] = spl_line[1].split(" ") 
```

# sharepoint-2010 - 发布/部署 Masterpages Sharepoint 2010 Foundation

> ID：13382306
> 
> 赞同：1
> 
> 时间：2012-11-14T15:54:36.833
> 
> 标签：sharepoint-2010

有谁知道在“Sharepoint 2010 Foundation”中“发布”（执行所有发布操作）母版页的方法我可以在“Sharepoint 2010 Standard”中非常容易地做到这一点但是发布功能在 Foundation 中不可用

情况

我有 5 个以上的站点，每个站点都有 5 个子站点

我想更改一个母版页，然后将其发布到所有其他页面。

而不必将其复制到每个站点，然后将其设置为每个站点的默认值。

因为这是相当重复的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:09:53.993

您可能已经对这个进行了排序，但如果没有，那么这是安装到 SharePoint 2010 Foundation 的一个方便的小功能。

[http://spfmasterpageselect.codeplex.com/](http://spfmasterpageselect.codeplex.com/)

它允许您为网站集/网站选择母版页，然后将其推送到所有子网站。

希望这可以帮助。

干杯

# azure - Windows Azure 和 Unity3d

> ID：13382307
> 
> 赞同：3
> 
> 时间：2012-11-14T15:54:36.680
> 
> 标签：azure, unity3d, azure-web-roles

一段时间以来一直对 Unity3d 的某些项目感兴趣，并决定咬紧牙关！我开始玩弄，并幻想在 Windows azure 中运行 Unity3d。

然而，尽管我努力，我还是无法让它运行！

这是我到目前为止所尝试的：

包括来自统一的部署输出直接与我的部署到天蓝色。虽然可能是将 unity3d 文件保存在 azure 的 blob 存储中，但这只是出于测试目的。

我已经包含了 mime 类型以允许 iis 使用统一文件（通过 web.config）： 代码：

```
<staticContent>
      <mimeMap fileExtension=".unity3d" mimeType="application/vnd.unity"/>
    </staticContent> 
```

最后，我包含了 UnityWebPlayer.exe 文件，并添加了一个启动任务来在服务器上安装 UnityWebPlayer。同样在这里，另一个最佳实践是下载文件，因为它是最新版本，但同样，目前仅用于测试。我的启动服务定义如下：

代码：

```
<Startup>
    <Task commandLine="UnityWebPlayer.exe /S" executionContext="elevated" taskType="simple" />
    </Startup> 
```

我很想与社区联系，看看是否有其他人成功地将他们的游戏使用 Windows azure 迁移到云端？

编辑：

然后我应该在尝试部署这样的网络角色时添加，该角色卡在循环中并且永远不会部署。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T03:13:03.453

我想到了！

向 smarx 大声疾呼，指出您不需要在服务器上安装 UnityWebPlayer。

为了使统一文件正确加载，您必须将 mime 类型添加到 IIS，如上，除了没有“。”！

傻我。

享受！

# actionscript-3 - 这种情况下指定Interface ICellRenderer有什么用

> ID：13382309
> 
> 赞同：0
> 
> 时间：2012-11-14T15:54:39.663
> 
> 标签：actionscript-3

请参考帖子： [Flash List Control 中的显示复选框？（类似于 Flex 中的 itemrendering）](https://stackoverflow.com/questions/13356445/display-checkbox-inside-flash-list-control-similar-to-itemrendering-in-flex#comment18238913_13356445)

像往常一样，我总是对接口的意义感到有些困惑。

所以在上面的链接中，我还是不明白指定 ICellRenderer 有什么意义

为什么不能代替：

```
 public class CustomCellRenderer extends CheckBox implements ICellRenderer 
```

我可以写

```
 public class CustomCellRenderer extends CheckBox 
```

我试图玩上面的线，但它不起作用。我必须指定 ICellRenderer。

在我看来，接口只是告诉一个类遵循一定的函数使用规则。它如何停止类的工作（如果我已经使用了所有必要的功能，但没有实现所需的接口）

提前谢谢。维什瓦斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:04:45.097

由于检查对象上的其他代码未实现接口可能会导致失败。然而，这也是接口的优点，你的类不需要从某个东西扩展来实现一个接口，所以它可以从任何类任意扩展，但实现一个特定的接口，这意味着它在它的东西之外还有一些其他的功能从它的继承链中得到。所以 Adob​​e（或任何人）编写了如下代码：

```
if(argumentObject is ICellRenderer)
{
   var icr:ICellRenderer = argumentObject as ICellRenderer; //cast so code completion can work
   icr.data = data; //do some stuff on the object that only an ICellRenderer can do
} 
```

如果这个解释不清楚，请告诉我，我花了很长时间才掌握接口及其使用，但现在我是一个大力倡导者。

**支持论点**

就继承本身而言，为了清楚起见，概念是如果某事物与其他事物相似但具有与之关联的额外属性（名词）或动作（动词），则无需重新编写公共部分。

举一个常见的例子，假设你有一个类 Animal（属性如 isAlive，动作如复制）。现在假设你想为 SexualAnimal 和 AsexualAnimal 创建一个类，并且在 SexualAnimal 的rerepry 方法中接受一个参数，而AsexualAnimal 的那个没有（SexualAnimal 将具有rerepry 方法的重载版本，并会覆盖默认抛出错误）。好的，这一切都很好，现在说在我们到达 Birds 的某个地方，现在我们可以选择如何处理飞行，我们可以 A 在继承链中的某处将飞行添加为布尔值，或者 B 为飞行创建一个接口（也许我们并不关心Animal在继承树中的位置，我们只想知道它可以飞行，因此具有某些属性，如高度和动作，如takeFlight）。

另一种看待这一点的方式是，作为一名程序员，我可以编写一个接口给另一个团队，我们都可以根据接口中建立的“合同”进行操作。例如说我需要访问一个数据库来做一些操作，但我不知道他们将长期使用哪种数据库解决方案。所以我为我需要的数据库编写了一个接口，以便能够使用 X 参数获取 Y 数据，现在我可以在假设我提供 X 而你给我 Y 的情况下自由编写我的其余代码，无论如何我的代码的底层实现将起作用。

有关接口使用的更正式参考，请参见：[http ://en.wikipedia.org/wiki/Design_Patterns](http://en.wikipedia.org/wiki/Design_Patterns)

# c++ - 使用 ifstream::get 逐字节读取文件

> ID：13382312
> 
> 赞同：1
> 
> 时间：2012-11-14T15:54:53.753
> 
> 标签：c++, ifstream

我在互联网上的教程之后编写了这个二进制阅读器。（我正在寻找链接...）

代码逐字节读取文件，前 4 个字节一起是魔术字。（比方说 MAGI！）我的代码如下所示：

```
std::ifstream in(fileName, std::ios::in | std::ios::binary);
char *magic = new char[4];

while( !in.eof() ){
   // read the first 4 bytes
   for (int i=0; i<4; i++){
      in.get(magic[i]);
   }

   // compare it with the magic word "MAGI"
   if (strcmp(magic, "MAGI") != 0){
        std::cerr << "Something is wrong with the magic word: " 
                  << magic << ", couldn't read the file further! " 
                  << std::endl; 
        exit(1);
    }

   // read the rest ...
} 
```

现在问题来了，当我打开我的文件时，我得到这个错误输出： `Something is wrong with the magic word: MAGI?, couldn't read the file further!`所以在 MAGI 之后总是有一个（大部分是随机的）字符，就像在这个例子中的字符`?`！我确实认为这与 C++ 中的字符串如何存储和相互比较有关。我是对的，我该如何避免这种情况？

PS：这个实现包含在另一个程序中并且工作得很好......很奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:00:36.283

strcmp 假定两个字符串都是以 nul 结尾的（以 nul 字符结尾）。当您想比较未终止的字符串时，例如在这种情况下，您需要使用[strncmp](http://www.cplusplus.com/reference/clibrary/cstring/strncmp/)并告诉它要比较多少个字符（在这种情况下为 4 个）。

```
if (strncmp(magic, "MAGI", 4) != 0){ 
```

当您尝试使用 strcmp 比较非空终止字符数组时，它无法判断数组的长度（您无法仅通过查看数组本身来判断 C/C++ 中数组的长度 - 您需要知道它被分配的长度。标准库不能免除这个限制）。因此，它读取 char 数组之后恰好存储在内存中的任何数据，直到它达到 0 字节。

**顺便说一句：请注意**[Lightness Races in Orbit](https://stackoverflow.com/users/560648/)对您的问题的评论，这与您现在遇到的问题无关，但它暗示了一个不同的错误，可能会在以后给您带来一些问题。

# facebook - 在 Facebook 上发布带有提要对话框的图片

> ID：13382315
> 
> 赞同：2
> 
> 时间：2012-11-14T15:54:59.290
> 
> 标签：facebook

我想在我的应用程序中分享我墙上的一张图片，以展示给我所有的朋友。（就像我在 Facebook 上发布照片一样）。

我正在尝试使用提要对话框，但我认为我做错了。

```
 FB.ui({
         method:    'feed'
        ,name:      'Look at my picture !'
        ,link:      'https://www.facebook.com/link_to_app'
        ,caption:   "Application title"
        ,source: "http://icanhascheezburger.files.wordpress.com/2009/03/funny-pictures-kitten-finished-his-milk-and-wants-a-cookie.jpg" 

    } 
```

那么如何在我的墙上发布图片呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-09T15:42:39.433

您需要删除以开头的行`,source`而不是添加行

```
,picture: ......,  //url of picture in place of the ..... 
```

# wpf - Visual Studio locks Control, Shift, Alt keys while developing XAML / WPF

> ID：13382317
> 
> 赞同：1
> 
> 时间：2012-11-14T15:55:04.803
> 
> 标签：wpf, visual-studio, xaml, ide

While using Visual Studio I occasionally experience odd input 'quirks.' Certain types of input don't get through to the editor, while others do. It seems linked to one of the modifier keys (Ctrl, Alt, Shift) becoming 'locked' and causing the input to get routed in an alternate manner.

It occurs, almost exclusively, while I'm editing a WPF control's XAML. There are always multiple VS workspaces open across multiple monitors, but I'm not sure if that is linked to the issue, since that is a near-constant attribute of my development.

When the issue occurs, I can sometimes change window focus, save-all open files, and/or minimize all VS windows to resolve; although occasionally none of these work and I must completely restart VS.

I've turned Windows Sticky Keys off (although I was sure I wasn't toggling them), but that did not resolve the issue.

Similar question: [Visual Studio 2010: Editor stops responding to keyboard](https://stackoverflow.com/questions/3310033/visual-studio-2010-editor-stops-responding-to-keyboard)

# python - How to copy data from memory to numpy array in Python

> ID：13382318
> 
> 赞同：0
> 
> 时间：2012-11-14T15:55:05.577
> 
> 标签：python, arrays, memory, numpy, copy

For example, I have a variable which point to a vector contains many elements in memory, I want to copy element in vector to a numpy array, what should I do except one by one copy? Thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:05:31.927

我假设您的向量可以这样表示：-

```
import array

x = array('l', [1, 3, 10, 5, 6])   # an array using python's built-in array module 
```

然后将其转换为`numpy`数组将是：-

```
import numpy as np

y = np.array(x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T01:03:02.120

如果数据以原生浮点格式打包在缓冲区中：

```
a = numpy.fromstring(buf, dtype=float, count=N) 
```

# jpa - JPA/EclipseLink: disable cascade for certain merge operations?

> ID：13382319
> 
> 赞同：0
> 
> 时间：2012-11-14T15:55:14.470
> 
> 标签：jpa, merge, eclipselink, cascade, toplink

I am using EclipseLink 2.3.3\. with a data model with about 100 entities. I have a Java class mapped to each database table using annotations.

I have two use cases to implement. One is that a new record enters the system that hits about 60-75 of the tables. For this case, I want merge and persist to cascade, so that I can just merge the top level object and have that cascade to all related entities.

Another use case is that I need to insert a collection of individual objects, often one from each of a bunch of different tables. In this case I don't want the cascading merge, because I need to have control over the insertions. If I have cascade enabled, merging the first object might or might not merge the other objects, depending on if or how they are related, so I'd rather explicitly merge each of them.

So essentially, I want cascading merge and persist in one situation, but not another. So if I include the cascade annotations in the mapped classes, I need to selectively disable the cascading for certain operations; or, if I turn off cascading in the mapped classes, I would like to enable cascading for certain operations.

So far I am not finding any way to selectively turn on or off cascading for a particular operation. There is a CascadePolicy class but that seems to only be used with queries. There are dynamic entities, and I was thinking perhaps I could use that to do something like create a dynamic entity from an existing entity and turn off the cascading behavior on that entity's relationships and somehow use that for the merge, but I have not been able to find the right API for that.

So I am wondering if there is a better answer somewhere that I'm overlooking? Thanks for any information.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:54:38.367

我不确定您所追求的控制级别，尤其是在您提到要插入单个对象的情况下。从它的声音来看，级联合并正是您想要的实体对象树在第一种情况下与 EntityManager.merge 一起使用。对实体调用的合并将检查它是否是新的，并酌情更新或插入。将关系标记为级联合并将允许查找新对象并插入它们。

第二种情况虽然您想处理单个插入，但为什么不排除映射上的级联持久选项，而只在要插入的对象上调用 EntityManager.persist 呢？然后 Persist 不会级联，因此只有您调用 em.persist 的实体会被插入。关系将仅用于设置外键值 - 尽管您可能希望将它们保留为空并稍后将它们设置为更大的合并调用的一部分。双向关系的双方都需要维护，如果对方存在且没有被合并，则不存储其关系变化。

如果这不是您想要的，EclipseLink 在 UnitOfWork 上有本机 API（EntityManager 本质上包装了 UnitOfWork 用于事务工作），允许您指定合并策略。参见 UnitOfWork 上的 mergeClone、deepMergeClone 和 shallowMergeClone，它们本质上分别使用 CASCADE_ALL_PARTS、CASCADE_PRIVATE_PARTS 和 NO_CASCADE 作为合并策略，而 JPA 合并使用 CASCADE_BY_MAPPING。

# install4j - 如何通过 install4j 中的运行脚本检索安装类型？

> ID：13382321
> 
> 赞同：1
> 
> 时间：2012-11-14T15:55:15.707
> 
> 标签：install4j

install4j API 允许通过 ID 获取安装组件并确定它们是否在脚本操作中被选中。对于安装类型 ID，我没有办法做到这一点。我有几种安装类型，组件列表相同，但需要根据类型进行不同的配置。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T09:34:46.717

采用

```
(String)context.getVariable("sys.installationTypeId") 
```

之所以不在上下文中是因为安装类型不是 install4j 中的基本概念，它是由安装类型屏幕提供的。事实上，您可以仅使用公共 API 对整个安装类型功能进行编程。

# ruby - Object tree traversal in ruby

> ID：13382327
> 
> 赞同：1
> 
> 时间：2012-11-14T15:55:22.457
> 
> 标签：ruby

So... I have the following:

A class with several properties which are retrieved from an .xml file. These properties are if the object is a condition (it has two children) and its name. Basically, the object's children properties are the names of its children.

The .xml looks like this:

```
<object-2>
     <name>Object - 2</name>
     <yesChild>Object - 3</yesChild>
     <noChild>Object - 4</noChild>
</object-2> 
```

If the noChild is empty, then it means that the object is not a condition. All objects retrieved from the .xml are stored into an array.

What I need is to somehow create a tree out of it and identify all paths that can be taken in order to reach the last element in the array. The algorithm does not need to traverse all nodes, just the ones it needs to reach the last element of the array.

Example:

We have 4 objects: X1, X2, X3 and X4, where X1 is a condition with X2 and X3 as its children then we will have 2 paths that start in X1 and end in X4. Path 1: X1->X2->X4 Path 2: X1->X3->X4

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T09:23:36.593

由于您在解析后没有显示数据的格式，所以我猜测:) 以下是我将解析后的数据存储在 ruby​​ 对象中的方式（为清楚起见，使用新型哈希键语法）：

```
[ {yes: 2, no: 3},
  {yes: 4},
  {yes: 4},
  {yes: -1} ] 
```

然后，可以递归地完成树遍历。只要您的数组不是几千个元素长，这将正常工作。

```
def tree(object_number, list)
  if object_number == list.size
    [[object_number]]
  else
    list[object_number-1].values.map { |obj_num|
      tree(obj_num,list)
    }.inject{|a,b| a+b}.map{|l| [object_number] + l}
  end
end 
```

现在调用函数：

```
tree(1,data)
  => [[1, 2, 4], [1, 3, 4]]
data = [ {yes: 2, no: 3}, {yes: 4, no:5}, {yes:5, no:4}, {yes:5}, {yes: -1} ]
tree(1,data)
  => [[1, 2, 4, 5], [1, 2, 5], [1, 3, 5], [1, 3, 4, 5]] 
```

***它是如何工作的：***构建此列表的最简单方法是向后，因为我们只有在完成所有路径后才知道路径的数量。所以这段代码一直跟随引用到最后，当它到达最后一个对象时，它将它作为一个单元素二维数组返回。

```
tree(5,list)
  => [[5]] 
```

在每个递归级别，它获取递归调用的结果（作为列表列表返回）并将它自己的对象编号添加到每个内部列表中。因此，备份树：

```
tree(4,list) # prepends 4 to tree(5)
  => [[4,5]]
tree(3,list) # prepends 3 to tree(4) and tree(5)
  => [[3,4,5],[3,5]]
tree(2,list) # prepends 2 to tree(4) and tree(5)
  => [[2,4,5],[2,5]]
tree(1,list) # prepends 1 to tree(2) and tree(3)
  => [[1, 2, 4, 5], [1, 2, 5], [1, 3, 5], [1, 3, 4, 5]] 
```

如果列表可能长到足以溢出堆栈，则始终可以在不递归的情况下执行此操作。递归只是解决这个特定问题的最简单方法。

# ruby - 如何使用Ruby从字符串中删除括号内的所有符号？

> ID：13382332
> 
> 赞同：1
> 
> 时间：2012-11-14T15:55:47.987
> 
> 标签：ruby, regex, string

我有一个字符串“一些词，一些其他词（括号中的词）”

我怎样才能完全删除括号中的单词，以获得“一些单词，一些其他单词”字符串作为结果？

我是 regexp 的新手，但我保证会学习他们的工作原理）

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:03:32.343

试试这个：

```
# irb
irb(main):001:0> x = "Some words, some other words (words in brackets)"
=> "Some words, some other words (words in brackets)"
irb(main):002:0> x.gsub(/\(.*?\)/, '')
=> "Some words, some other words " 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:09:51.823

由于“*”的贪婪，如果有超过一对括号，则其中的所有内容都将被删除：

```
s = "Some words, some other words (words in brackets) some text and more ( text in brackets)"
=> "Some words, some other words (words in brackets) some text and more ( text in brackets)" 

ruby-1.9.2-p290 :007 > s.gsub(/\(.*\)/, '')
=> "Some words, some other words " 
```

更稳定的解决方案是：

```
/\(.*?\)/
ruby-1.9.2-p290 :008 > s.gsub(/\(.*?\)/, '')
=> "Some words, some other words  some text and more " 
```

保持括号组之间的文本不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:09:31.597

[字符串#[]](http://ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D)：

```
>>  "Some words, some other words (words in brackets)"[/(.*)\(/, 1] 
    #=> "Some words, some other words " 
```

正则表达式的意思是：`(.*)`将第一个开括号之前的所有内容分组`\(`，而参数的`1`意思是：取第一组。

如果您还需要匹配可以使用的封闭括号，但如果字符串不包含括号之一，`/(.*)\(.*\)/`则会返回。`nil`

`/(.*)(\(.*\))?/`也匹配不包含括号的字符串。

# windows - 在所有子目录中搜索给定的一组文件名。* 并复制到另一个目录

> ID：13382336
> 
> 赞同：0
> 
> 时间：2012-11-14T15:56:02.767
> 
> 标签：windows, batch-file, cmd, dos

我需要扩展这个问题：[搜索给定的文件集并复制到另一个目录](https://stackoverflow.com/questions/13333937/search-given-set-of-files-and-copy-to-another-directory)

在 needToFind.txt 文件中有一组给定的文件名，例如：

myImage1 , theImage, parisImage （每行一个文件名）

并且有一个名为 /MyImageFolder 的文件夹，其中包含其子文件夹及其本身中的 1000 张图像，还包含 myImage1.jpg、myImage1.png、theImage.jpg、parisImage.jpg、parisImage.png、parisImage.tiff

我想在不查看文件扩展名的情况下找到那些给定的图像名称并将它们复制到另一个目录。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:04:48.510

```
@echo off
cd "\MyImageFolder"
for /F "usebackq delims=" %%a in ("needToFind.txt") do (
   for /R %%b in ("%%~Na.*") do copy "%%b" "\anotherFolder"
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:39:53.193

```
@echo off
cd "\MyImageFolder"
for /f "usebackq eol=: delims=" %%F in ("needToFind.txt") do copy "%%~F.*" "\anotherFolder" 
```

如果提供的文件名已经有扩展名，并且您想忽略扩展名，您可以使用

```
@echo off
cd "\MyImageFolder"
for /f "usebackq eol=: delims=" %%F in ("needToFind.txt") do copy "%%~nF.*" "\anotherFolder" 
```

# ios - how to allow autorotation for child vc of vc in tabbar?

> ID：13382342
> 
> 赞同：1
> 
> 时间：2012-11-14T15:56:26.607
> 
> 标签：ios, autorotate

I have a tab bar view controller, which contains some navigation controllers each with a root view controller. Everything should only render in portrait. All's well. One of the child view controllers pushes another view controller using it's navigation vc, and that one I'd like to allow rotation to landscape on.

```
Tabbar vc
   nav vc/vc1
   nav vc/vc2
   nav vc/vc3
      pushes new vc4   <- ONLY this one should autorotate. Further more, if you're in landscape mode in this vc and hit 'back', it goes back in portrait. 
```

The app 'line' does this - the actual 'chat' window can autorotate.

Please give me the codes! ;) I'm hoping it doesn't require messing with the transforms...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:13:55.957

要在您的 UITabBarController 应用程序上支持自动旋转，您需要子类化您的 tabBarController 上的视图控制器旋转调用，并询问当前呈现的视图控制器是否支持新方向。在您的特定情况下，将询问 vc4 是否支持方向更改，因此标签栏可以在询问时旋转。

看看这个问题：[tabBarController and navigationControllers in landscape mode, episode II](https://stackoverflow.com/questions/756536/tabbarcontroller-and-navigationcontrollers-in-landscape-mode-episode-ii)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:23:33.490

@Colin 在您的 Tabbar 视图控制器中，将其限制为像

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
} 
```

并在您的新视图控制器（vc4）中，将其限制为横向。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight) );
} 
```

希望能帮助到你。

# c# - C# App.xaml 和资源字典

> ID：13382345
> 
> 赞同：3
> 
> 时间：2012-11-14T15:56:39.660
> 
> 标签：c#, wpf

我正在尝试让我的应用程序 (WPF) 使用 Pack URI 在我的 App.xaml 中使用引用的程序集。在我的解决方案中，我有几个项目。在基本应用程序中，我只有我的 App.xaml。我希望它使用引用的程序集。

使用 App.xaml 项目 1（在解决方案中）调用我的基础项目。这是 App.xaml 的相关部分：

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/MyProject.Project2;component/Themes/Generic.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

项目 2 有一个带有 Generic.xaml 的文件夹“主题”。我很确定我做的 Pack URI 不正确，因为没有使用 Generic.xaml 中的任何样式（我正在用自定义窗口覆盖默认窗口，但它目前不起作用。应用程序显示为默认窗口样式，窗口内的所有内容都是黑色的）。

文件夹层次结构：

```
MainFolder
    Project 1
        App.xaml
        bin
            Debug
                Application.exe
    Project 2
        Themes
            Generic.xaml 
```

问题：

1.  有人可以解释`pack://application:,,,`语法吗？这一切意味着什么？
2.  我对 Pack URI 做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:13:25.117

Pack Uri 中,,, 之后的第一项是程序集的名称。确保您设置：

`"pack://application:,,,/[ASSEMBLY name here];component/Themes/Generic.xaml"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:09:53.270

尝试将资源字典移动到项目 2 而不是 App.xaml 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T16:16:14.573

弄清楚了。结果在 MyProject.Project2 中我需要 AssemblyInfo.cs 中的以下代码：

```
[assembly: ThemeInfo(
ResourceDictionaryLocation.None, //where theme specific resource dictionaries are located
//(used if a resource is not found in the page, 
// or application resource dictionaries)
ResourceDictionaryLocation.SourceAssembly //where the generic resource dictionary is located
//(used if a resource is not found in the page, 
// app, or any theme specific resource dictionaries)
)] 
```

# winforms - Winform controls reset automatically

> ID：13382347
> 
> 赞同：1
> 
> 时间：2012-11-14T15:56:46.600
> 
> 标签：winforms, controls

when I was changing background color of gridview. When I started my app for final tests the buttons were not working. I checked their on click code and it was correct. Then I double clicked the button it created new button onClick_1 method. All controls are now not pointing to the methods existing. They make new methods upon clicking.

# c# - 413 Entity Too Large

> ID：13382348
> 
> 赞同：0
> 
> 时间：2012-11-14T15:56:49.703
> 
> 标签：c#, wpf, wcf, iis-6

Let me start this off by saying I've searched this error far and wide and tried a few presented solutions (see below) but nothing seems to work and I continuously get the dreaded 413 error.

**Basics:**
Everything is written in C# using .Net 3.5, and we are using IIS 6

I have a WPF client application that talks to a 'middleman' WCF web service (basically just a forwarding service that will be exposed to the internet), which talks to the workhorse WCF web service (this is where all the code is defined and it sits nicely behind our proxy, accessible only on the internal network)

Currently, the 'middleman' service is running locally on my machine, but will be deployed to an internet-exposed IIS box in time.

**The Situation:**
When I attempt to send data to the server from the client, it kicks back the 413 error. The data I'm sending is only about 41kb (according to Visual Studio). I tried sending back a minimal file size (15bytes) which did work. It should also be noted that this error did not happen while I was testing the server on my localhost.

**What I've done:**
We have used the console command on the IIS box to increase the UploadReadAheadSize to 130670\. In addition, I've modified all the App.config and Web.config files for the client and two services to increase the maxReceivedMessageSize & masStringContentLength to 2147483647

**The plea for help:**
So I ask, what I have I missed? What else is there to do?

# cocoa-touch - 正确子CCLayer定位

> ID：13382349
> 
> 赞同：0
> 
> 时间：2012-11-14T15:56:56.670
> 
> 标签：cocoa-touch, cocos2d-iphone

我对正确的锚点调整有一些问题。首先，我有主层和子层，我想做的是将某个点设置为该子层的锚点，然后将子层位置设置为（0,0）。所以，在我看来，子层应该移动到主层的（0,0）位置。

但是我下面的代码没有像我预期的那样工作。

```
[sublayer setAnchorPoint:ccp(x/sublayer.contentSize.width,y/sublayer.contentSize.height)];
[sublayer setPosition:ccp(0,0)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:40:16.113

首先，CCLayer 默认与锚点无关，所以它会忽略它的任何变化。您可以通过以下方式启用它

```
[layer setIsRelatieveAnchorPoint: YES]; 
```

第二个 - 如果你不完全理解它是如何工作的，你不应该改变锚点。

# java - 无法从地图施放 到地图 >>

> ID：13382361
> 
> 赞同：2
> 
> 时间：2012-11-14T15:57:51.250
> 
> 标签：java, generics, casting

我正在升级以下代码：

```
return this.getMethod().execute(mp); 
```

执行方法有签名的地方：

```
public Map<String,Object> execute(Object mp) 
```

我的代码期望该方法的返回为`Map<String, List<Map<String, String>>>`，但编译器在转换时窒息。那么我可以/我如何让它正确投射？Java 5 和 6 之间是否有任何变化会使这成为编译时问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T16:35:03.553

只要您*确定*返回的地图将只包含 type 的值`List<Map<String, String>>`，那么您需要使用双重转换：

```
Map<String, Object> map = this.getMethod().execute(mp);
@SuppressWarnings("unchecked") //thoroughly explain why it's okay here
Map<String, List<Map<String, String>>> mapWithNarrowedTypes =
        (Map<String, List<Map<String, String>>>)(Map<?, ?>)map;
return mapWithNarrowedTypes; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T21:45:33.957

通常对于此类问题，我发现以下构造很有用：

```
public final class Reinterpret {

    @SuppressWarnings("unchecked")
    public static <T> T cast(Object object) {
        return (T)object;
    }

} 
```

您可以使用它，例如，像这样：

```
...
public void process(Map<String, Object> data) {
    // method can properly handle any Object value,
    // including String
}

...
    Map<String, String> stringData = ...
    process(Reinterpret.<Map<String, Object>>cast(stringData));
... 
```

正如您所猜想的那样，Java 泛型类型系统的这种非常精确的弱化受到 C++ 的 reinterpret_cast 运算符的启发，并且适用于类似的上下文；但是，它也可以用于其他一些情况，例如当您想减少演员表的冗长时，例如，

```
 Map<String, Object> objectMap = Reinterpret.cast(stringMap); 
```

Java 6 的类型推断足够强大（或足够弱，取决于您的观点），可以将右侧表达式转换为左侧所需的表达式；但是请注意，这适用于赋值，但不适用于函数调用，这就是为什么上面的示例需要在调用本身中完全指定参数类型的原因。

# java - 将 Linux 库构建到 Android

> ID：13382362
> 
> 赞同：2
> 
> 时间：2012-11-14T15:57:53.290
> 
> 标签：java, android, linux, java-native-interface

我有适用于 Linux 的 C 库项目（带有 jni）。我需要为 Android 构建这个库。但是在 ndk-build 中使用 Makefile.in 是不可能的。

我找到了两种方法——一种是为这个项目创建makefile Makefile.mk，另一种是设置一些标志，并选择一个工具链来构建具有现有结构的项目和用于ARM处理器的makefile。

那么问题来了，第二种方式怎么做呢？或者可能是一些将现有项目移植到 Android 的示例。

提前致谢！

# php - JQuery 和 JSON 数组 - 如何检查数组是否为空或未定义？

> ID：13382364
> 
> 赞同：7
> 
> 时间：2012-11-14T15:57:54.730
> 
> 标签：php, jquery, arrays, json

对于某些任务，我需要将 php 数组传递给 jquery。为 SESSION 创建 php 数组，然后为 jquery 创建 json_encoded。之后，我将该变量存储到 window js 命名空间，以便在我的 jquery 脚本中使用该数组。

```
if(isset($_SESSION['mySession'])){
    $json_array = json_encode($php_array);
}

<script>
    <?php echo "window.json_from_php = ".$json_array; ?>
</script> 
```

我需要做的是在做任何事情之前检查这个数组是否存在/是否为空/未定义。'undefined' 操作数的检查子句成功，但其余的则不成功。如何在 jquery 中检查数组是否为空？

这是初始化后 json_encoded 数组的输出，当 $php_array 中没有任何元素时：

```
string '[""]' (length=4) 
```

这是jQuery：

```
$(function() {
        var results = $('#results');
        var js_array = window.json_from_php;
        var count = js_array.length;

        if ((typeof window.json_from_php === 'undefined') || (js_array === null) || (jQuery.isEmptyObject(js_array)) || (count === 0)) {
            $('<p>Array is empty.</p>').appendTo(results);
        }
        else {
            jQuery.each(js_array,function(key,val){
                $('<ul><li id="'+key+'">'+val+'</li></ul>').appendTo(results);                  
            });
        }
    }); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-14T16:00:37.723

这就是我检查空/空 json 数组的方式。

```
if (js_array == undefined || js_array == null || js_array.length == 0){
    $('<p>Array is empty.</p>').appendTo(results);
} 
```

如果您的 json 数组是，`[""]`那么您可能需要添加类似

```
if (js_array == undefined || js_array == null || js_array.length == 0 || (js_array.length == 1 && js_array[0] == "")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:20:01.797

这应该足够了：

```
if (typeof js_array === 'undefined' || !js_array.length) {
   $('<p>Array is empty.</p>').appendTo(results);
} else {...} 
```

# cordova - Phonegap 可以与谷歌地图一起使用吗？

> ID：13382367
> 
> 赞同：0
> 
> 时间：2012-11-14T15:58:01.770
> 
> 标签：cordova, google-maps-api-3, gis, cordova-2.0.0

我使用cordova 2.2.0 & 我想制作一个 gis 应用程序来检查用户位置以选择最接近的位置。我可以用 phonegap 做这个吗……它会在 IOS6 和 Android 上得到支持吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:09:09.590

是的，您可以[在 PhoneGap 中使用 GoogleMaps](http://zsprawl.com/iOS/2012/03/using-phonegap-with-google-maps/)。另请查看[PhoneGap GeoLocation API](http://docs.phonegap.com/en/1.0.0/phonegap_geolocation_geolocation.md.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T02:10:35.440

[Google Maps Plugin for PhoneGap / Cordova](https://github.com/wf9a5m75/phonegap-googlemaps-plugin)可帮助您从 JavaScript 控制 Google Maps SDK。

![在此处输入图像描述](../Images/11886f9c7bdbf73d04691d987f37b95d.png)

# ruby-on-rails - Rails - 脚本/服务器启动

> ID：13382371
> 
> 赞同：1
> 
> 时间：2012-11-14T15:58:13.597
> 
> 标签：ruby-on-rails, ruby, rubygems

有人可以帮我做一些看似简单的事情吗？毫无疑问，我对 Ruby on Rails 很陌生。我无法启动服务器。看起来无法找到引导文件，但我也不确定。

这里有几个版本的ruby，与安装rvm有关：

其中 -a ruby​​ /Users/me/.rvm/rubies/ruby-1.9.3-p327/bin/ruby /Users/me/.rvm/bin/ruby /usr/local/bin/ruby /usr/bin/ruby

可能需要删除一些？

在 Mac Mini 上使用 Rails 3.2.9 和 Ruby 1.9.3

谢谢！

cd [rails 项目目录]

$脚本/服务器

/Users/me/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': 无法加载这样的文件——脚本/。 ./config/boot (加载错误)

来自 /Users/me/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'

来自脚本/服务器：2:in `'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:59:39.803

使用 Rails 3+，您可以访问 rails 命令行脚本，而不是调用`script/server`您只是运行`rails server`或`rails s`简称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:02:41.213

这不是您遇到的问题。脚本/服务器仍然有效，您遇到的是您尝试使用的 gem 的问题。您可以尝试运行 rails s --trace，查看导致问题的 gems 并手动重新安装它们。从外观上看，这只是一个在 1.9.1 中具有依赖关系的孤立 gem 的问题。

# c# - 循环内的 RunAsync()

> ID：13382373
> 
> 赞同：0
> 
> 时间：2012-11-14T15:58:28.197
> 
> 标签：c#, windows-runtime, winrt-async

[https://github.com/Sangeepan/stackoverflow_github](https://github.com/Sangeepan/stackoverflow_github)（产生此错误的测试项目）

以下代码生成错误：

**mscorlib.dll 中出现“System.StackOverflowException”类型的未处理异常**

```
 private async void updateUserlist(String userlist)
    {
        var jsonArray = JArray.Parse(userlist);

        foreach (var jsonobjects in jsonArray)
        {
            var item = jsonobjects["Id"];
            await Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => main_userlist.Items.Add(item));
        }
    } 
```

当我用 Debug.Writeline(item) 替换 await 行时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:15:04.110

如果您等待的任务完成得太快并且您有很多项目要处理，则可能会发生这种情况。

让你的`async`电话更“笨拙”（因此更慢）：

```
private async Task updateUserlistAsync(String userlist)
{
  var jsonArray = JArray.Parse(userlist);
  var jsonobjects = jsonArray.Select(jsonobjects => jsonobjects["Id"]).ToArray();
  await Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
  {
    foreach (var item in jsonobjects)
    {
      main_userlist.Items.Add(item);
    }
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:25:38.650

问题解决了。我需要将 toString() 添加到 json 对象。有时 VS12 中的错误信息会误导您。当我用谷歌搜索 stackoverflow 错误消息时，它都是关于无限循环和线程的。

main_userlist.Items.Add(item.toString());

# objective-c - 使用 ARC 将 NSString* 转换为 char*

> ID：13382376
> 
> 赞同：0
> 
> 时间：2012-11-14T15:58:54.447
> 
> 标签：objective-c, xcode, network-programming

我正在尝试执行以下操作，在这样的 Iphone 应用程序中设置 udp 连接：

```
 struct sockaddr_in server_address;
 CFDataRef server_address_data;
  ....      

  memset(&server_address, 0, sizeof(server_address));
  server_address.sin_len = sizeof(server_address);
  server_address.sin_family = AF_INET;
  server_address.sin_port = htons(thePort);      
  inet_aton([theHost cStringUsingEncoding:[NSString UTF8String]], &server_address.sin_addr);
  // put server address into CFData
  server_address_data = CFDataCreate(NULL, (uint8_t *) &server_address, sizeof(server_address));
  // set timeout (ACK and RESULT packets) for socket
  ???? 
```

现在，我遇到了以下问题：变量 theHost 来自 TextField，并且是 NSString* 类型。我想从中获取 ip 地址，因此尝试 inet_aton，它需要一个 char *。如何转换它（使用 ARC）？我上面的尝试失败了，因为没有“选择器 UTF8String 的已知类方法”。另外我想为我的套接字设置一个超时时间，以便我们收到..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:03:22.143

`-UTF8String`是一个实例方法，所以你需要使用`[theHost UTF8String]`which 将返回一个`char *`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:04:56.310

只需用于`[NSString UTF8String]`获取 UTF-8 编码的字符串：

```
inet_aton([theHost UTF8String], &server_address.sin_addr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:15:28.547

您编写了 [NSString UTF8String]，但 UTF8String 不是静态方法，因此您必须首先创建字符串的实例，您可以将该行替换为：

```
inet_aton([theHost cStringUsingEncoding:[@"String that you want" UTF8String]], &server_address.sin_addr); 
```

# php - 在 php 中使用谷歌关闭大豆模板

> ID：13382379
> 
> 赞同：1
> 
> 时间：2012-11-14T15:59:03.417
> 
> 标签：php, google-closure-templates

是否有可能使用像 JAVA 这样的 PHP 的 Google 关闭大豆模板？一些生成 PHP 类而不是 JAVA 类的类生成器或在 php 代码中使用大豆模板的功能？我喜欢在双方都使用相同模板的想法（客户端使用 Javascript，服务器使用 JAVA）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:03:46.917

我还没有尝试过，但看起来不错，正是你需要的。

[https://github.com/kennberg/php-closure](https://github.com/kennberg/php-closure)

特征：

*   使用 Google Closure Compiler 在本地编译
*   支持 Google Closure 模板和 Soy-To-Js 编译器
*   处理源的缓存和重新编译。
*   添加包含源文件的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T16:02:31.883

可以通过两个步骤完成：

1.  编写一个通过 JNI 调用官方 JAVA 方法的 C/C++ 适配器，例如[cpp-closure-template](https://github.com/mapx/cpp-closure-template)。适配器需要一个修改过的 jar 球，如[Hello World Using Java - 闭包工具 - Google Developers](https://developers.google.com/closure/templates/docs/helloworld_java)（添加处理程序 java 文件）
2.  php 扩展利用适配器将 JSON 对象字符串作为数据映射传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-13T19:26:26.863

我做了一个 Closure Templates 的实验分支，它支持将 *.soy 文件编译为 PHP。

你可以在 GitHub 上获取它：[https ://github.com/oujesky/closure-templates](https://github.com/oujesky/closure-templates)

# mysql - MySql：按父子顺序排序

> ID：13382380
> 
> 赞同：23
> 
> 时间：2012-11-14T15:59:09.633
> 
> 标签：mysql, sql, sql-order-by

我有一张像这样的桌子：

```
+------+---------+-
| id   | parent  |
+------+---------+
| 2043 |    NULL |
| 2044 |    2043 |
| 2045 |    2043 |
| 2049 |    2043 |
| 2047 |    NULL |
| 2048 |    2047 |
| 2049 |    2047 |
+------+---------+ 
```

它显示了一个简单的 2 级“父子”关联。我如何通过 SELECT 语句订购以获取上面列表中的顺序，这意味着：第一个父母，第一个父母的孩子，第二个父母，第二个父母的孩子等等（如果我有，我可以添加为孩子们订购……我希望）。是否可以不添加排序字段？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-14T16:02:46.230

包括按 id 对孩子进行排序：

```
ORDER BY COALESCE(parent, id), parent IS NOT NULL, id 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/a63fc/4)

解释：

*   `COALESCE(parent, id)`：首先按（有效地组合在一起）父母的 id 进行排序。
*   `parent IS NOT NULL`：将父行放在组的顶部
*   `id`: 最后对所有的孩子进行排序（相同的父母，并且`parent`不为空）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-12-29T21:32:45.260

如果您的表使用`0`而不是`null`表示没有父项的条目：

```
id   | parent
-------------
1233 | 0
1234 | 1233
1235 | 0
1236 | 1233
1237 | 1235 
```

使用`greatest`代替`coalesce`并检查值不等于`0`：

```
ORDER BY GREATEST(parent, id), parent != 0, id 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-13T13:19:09.030

上面的解决方案对我不起作用，我的表使用 0 而不是 NULL。我找到了另一个解决方案：您在查询中创建一个包含串联父 ID 和子 ID 的列，您可以按它对结果进行排序。

```
SELECT CONCAT(IF(parent = 0,'',CONCAT('/',parent)),'/',id) AS gen_order
FROM table 
ORDER BY gen_order 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-07-31T20:15:48.630

这个问题仍然显示为第一个搜索结果之一。所以我想分享一个我的解决方案，希望它能帮助更多的人。当您有一个包含多个父子关系级别的表时，这也将起作用。虽然这是一个相当缓慢的解决方案。顶层`NULL`作为父级。

```
+---------+---------+
| id      | parent  |
+---------+---------+
| 1       | NULL    |
| 2       | 1       |
| 3       | 1       |
| 4       | 2       |
+---------+---------+ 
```

在我的方法中，我将使用一个过程，该过程将递归地调用自身并继续在路径之前加上请求的父级，`id`直到它到达`NULL`父级。

```
DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `PATH`(IN `input` INT, OUT `output` VARCHAR(128))
BEGIN

  DECLARE _id INT;
  DECLARE _parent INT;
  DECLARE _path VARCHAR(128);

  SET `max_sp_recursion_depth` = 50;

  SELECT `id`, `parent`
  INTO _id, _parent
  FROM `database`.`table`
  WHERE `table`.`id` = `input`;

  IF _parent IS NULL THEN
    SET _path = _id;
  ELSE
    CALL `PATH`(_parent, _path);
    SELECT CONCAT(_path, '-', _id) INTO _path;
  END IF;

  SELECT _path INTO `output`;

END $$
DELIMITER ; 
```

要在`ORDER BY`子句中使用结果，您还需要一个`FUNCTION`包装`PROCEDURE`.

```
DELIMITER $$
CREATE DEFINER=`root`@`localhost` FUNCTION `GETPATH`(`input` INT) RETURNS VARCHAR(128)
BEGIN

  CALL `PATH`(`input`, @path);
  RETURN @path;

END $$
DELIMITER ; 
```

现在我们可以使用递归路径对表格的顺序进行排序。在一张有 10000 行的桌子上，我的工作站只需要一秒钟多的时间。

```
SELECT `id`, `parent`, GETPATH(`id`) `path` FROM `database`.`table` ORDER BY `GETPATH`(`id`); 
```

示例输出：

```
+---------+---------+---------------+
| id      | parent  | path          |
+---------+---------+---------------+
| 1       | NULL    | 1             |
| 10      | 1       | 1-10          |
| 300     | 10      | 1-10-300      |
| 301     | 300     | 1-10-300-301  |
| 302     | 300     | 1-10-300-302  |
+---------+---------+---------------+
5 rows in set (1,39 sec) 
```

# directx - Windows XP 上的 DirectX、GDI+ 或 SDI？

> ID：13382383
> 
> 赞同：0
> 
> 时间：2012-11-14T15:59:11.580
> 
> 标签：directx, 2d, gdi+, directx-9

1.  如果我想在 Windows XP 和更高版本的 Windows 上实时缩放和合成 2D 抗锯齿矢量和位图图像，充分利用可用的硬件加速，我应该使用 GDI+ 还是 DirectX 9.0c？（实际上，Windows XP 和 Windows 7 很重要，但我们并不关心 Vista 上的性能。）

2.  考虑到应用程序不是跨平台的（而且永远不会），使用 SDL 有什么好处吗？我想知道 SDL 是否可以更轻松地切换到提供更好性能的任何底层绘图 API……</p>

3.  在哪里可以找到在 DirectX 9.0c 中进行 2D 图像缩放和合成的文档？（我找到了 DirectDraw 的文档，但读到它在 DirectX 7 之后已被弃用。但 Direct2D 直到 DirectX 10 才可用。）

4.  我可以合理地期望缩放和合成在中低规格 PC（即集成显卡）上的 Windows XP 上进行硬件加速吗？如果不是，那么我使用 GDI+ 还是 DirectX 9.0c 是否重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T01:36:03.227

不要使用 GDI+。它在软件中做所有事情，并且它有一个不利于软件性能的渲染模型。其他任何事情你都会过得更好。

Direct3D 或 OpenGL（如果您想要一个更完整的跨平台 API，您可以通过 SDL 访问）将为您提供支持它的硬件的最佳性能。Direct2D 在同一条船上，但在 Windows XP 上不可用。我的理解是，至少在 Intel 的集成 GPU 的情况下，硬件能够进行简单的操作，例如转换和合成，而这些 GPU 的大多数问题都出在对功能和性能要求很高的游戏中，以及针对 ATI/Nvidia 卡进行了优化。如果您以某种方式找到了显卡不支持 Direct3D 的机器并且正在回退到软件，那么您可能会遇到问题。

我相信 SDL 在 Windows 上使用 DirectDraw 进行非 OpenGL 绘图。不知何故，我的印象是 DirectDraw 在现代版本的 Windows 中的软件中执行所有操作（鉴于 DirectDraw 的用途自 win9x 时代以来从未真正重要过），但我无法验证这一点。

理想的情况是可以使用 Direct3D 或 OpenGL 进行渲染的跨平台矢量图形库，但 AFAICT 没有这样的东西可用。Cairo 图形库在 Windows 上缺乏加速，Mozilla 已经启动了一个名为 Azure 的项目，该项目显然具有该功能，但似乎并非专为在其项目之外使用而设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:37:23.357

我刚刚发现：[DirectX 8 中的 2D 渲染](http://www.gamedev.net/page/resources/_/technical/directx-and-xna/2d-rendering-in-directx-8-r1434)。

看来，自从微软在 DirectX 7 之后删除了 DirectDraw，他们希望所有 2D 绘图都使用 3D API 完成。这可以解释为什么我完全找不到我正在寻找的文档。

到目前为止，这篇文章看起来很有希望。

这是另一个：[3D 世界中的 2D 编程](http://www.gamasutra.com/view/feature/3062/2d_programming_in_a_3d_world.php)

# php - 使用 PHP ImageMagick 将文本写入图像的问题

> ID：13382385
> 
> 赞同：1
> 
> 时间：2012-11-14T15:59:17.900
> 
> 标签：php, macos, imagemagick, zend-server

我试图用下面的代码用 imagemagick 创建一个 png。

```
<?php
/* Create some objects */
$image = new Imagick();
$draw = new ImagickDraw();
$pixel = new ImagickPixel( 'gray' );

/* New image */
$image->newImage(800, 75, $pixel);

/* Black text */
$draw->setFillColor('black');

/* Font properties */
$draw->setFont('Oxin_free_promo.ttf');
$draw->setFontSize( 30 );

/* Create text */
$image->annotateImage($draw, 10, 45, 0, 'The quick brown fox jumps over the lazy dog');

/* Give image a format */
$image->setImageFormat('png');

/* Output the image with headers */
header('Content-type: image/png');
echo $image; 
```

但我不断收到以下错误。/usr/local/zend/tmp/ 被修改为 777 并由 daemon:zend 拥有，而 magick-* 不存在。有任何想法吗？

```
httpd: FreeType library is not available `/Users/gareth.williams/Sites/_tests/texttoimg/Oxin_free_promo.ttf'.
httpd: Postscript delegate failed `/usr/local/zend/tmp/magick-tmfNBDIx': No such file or directory.
PHP Fatal error:  Uncaught exception 'ImagickException' with message 'Unable to annotate image' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:39:53.830

查看给出的错误消息，它就在那里说明问题。

**“FreeType library is not available”** - ImageMagick 使用 FreeType 库来渲染字体，你给了它一个 TTF 来使用，它说 FreeType 没有安装，所以它不能使用字体。安装 FreeType，然后重新安装/重新编译 ImageMagick 以获得 FreeType 支持。

第二个错误可能是 ImageMagick 试图回退到使用其 postscript 光栅化支持来渲染字体，通常这是 via `ghostscript (gs)`，因此**"Postscript delegate failed"**。要么`ghostscript`不可用，要么它要求 ghostscript 渲染的临时文件的路径也/来自不可写。正如人们在问题评论中提到的那样，可以通过安装 ghostscript 并确保临时目录具有完全写入权限来修复。

要确认这些原因，请使用`-list`转换选项。

*   `convert -list format`：这将向您显示支持的文件类型，查找 TTF，确保它至少具有`r--`状态，它应该显示类似`"TTF* TTF r-- TrueType font (Freetype 2.2.1)"`FreeType 是否安装正确。

*   `convert -list delegate`：这将显示委托类型的处理和使用的命令行。它将使用其中一个`ps`转换器作为后备。

正如我所说，最简单的解决方法是安装 FreeType，然后重新编译/重新安装 ImageMagick。

# jquery - 如何使用同位素调整 CSS 以显示顶部边框？

> ID：13382389
> 
> 赞同：0
> 
> 时间：2012-11-14T15:59:30.727
> 
> 标签：jquery, css, jquery-masonry, jquery-isotope

我们正在使用基于同位素/砌体的布局，目前我们的项目存在以下问题：我们的同位素元素有一个边框，但是这个边框在同位素计算定位后消失了。在 element.style 中，Isotope 设置 top: 0px，而当我们手动调整值 top: 3px 时，边框再次正确显示。

请参阅随附的屏幕截图：

*   不显示顶部边框： ![错误的](../Images/2cbc2dfc336a460d59251231fee91d3b.png)

*   显示顶部边框： ![正确的](../Images/ca845168d50ed36a0e853a85a7fa26bd.png)

*   CSS 设置 top: 0px，但 top: 3px 会很好地显示边框： ![同位素最高值](../Images/3d624e8fefaa3c0b4fd6597ee019ae8f.png)

这是怎么回事？如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:26:51.710

好的，可以通过以下方式解决：

容器样式：{位置：'相对'，溢出：'可见'}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T18:10:53.613

您还可以使用框大小：

```
box-sizing:border-box; 
```

并且边框的尺寸将使用包含元素计算。

# hibernate - hibernate：由于代理，equals返回false

> ID：13382393
> 
> 赞同：0
> 
> 时间：2012-11-14T15:59:39.157
> 
> 标签：hibernate, proxy, equals

我已经实现了 equals（使用 lombok 和我的业务密钥）。在单元测试中，我想要一个简单的 assertEquals 但是返回的（从休眠）对象相关的对象是一个代理。我怎样才能得到实际的实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T12:33:31.813

您必须使用初始化程序。请参见下面的方法示例。在比较之前使用此方法以确保您没有比较代理。

```
public static <T> T initializeAndGetTargetObject(T entity) {
    if (entity == null) {
        throw new 
           NullPointerException("Entity passed is null");
    }

    Hibernate.initialize(entity);
    if (entity instanceof HibernateProxy) {
        entity = (T) ((HibernateProxy) entity).getHibernateLazyInitializer()
                .getImplementation();
    }
    return entity;
} 
```

# delphi - 为什么我在调用 IShellFolder._Release 时会出错？

> ID：13382397
> 
> 赞同：1
> 
> 时间：2012-11-14T15:59:58.563
> 
> 标签：delphi, winapi, windows-shell

`IShellFolder`我使用 windows shell 枚举控制面板中的项目并在 memo 中添加项目名称，最终发布`PITEMIDLIST`但得到错误。

代码 ：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  psfDeskTop : IShellFolder;
  psfControl : IShellFolder;
  pidControl : PITEMIDLIST;
  pidChild : PITEMIDLIST;
  pidAbsolute : PItemIdList;
  pEnumList : IEnumIDList;
  celtFetched : ULONG;
  FileInfo : SHFILEINFOW;

begin

  OleCheck(SHGetDesktopFolder(psfDeskTop));
  OleCheck(SHGetSpecialFolderLocation(0, CSIDL_CONTROLS, pidControl));
  OleCheck(psfDeskTop.BindToObject(pidControl, nil, IID_IShellFolder,
    psfControl));
  OleCheck(psfControl.EnumObjects(0, SHCONTF_NONFOLDERS or SHCONTF_INCLUDEHIDDEN
    or SHCONTF_FOLDERS, pEnumList));
  while pEnumList.Next(1, pidChild, celtFetched) = 0 do
  begin

    pidAbsolute := ILCombine(pidControl, pidChild);
    SHGetFileInfo(LPCTSTR(pidAbsolute), 0, FileInfo, SizeOf(FileInfo),
      SHGFI_PIDL or SHGFI_DISPLAYNAME);
    Memo1.Lines.Add(FileInfo.szDisplayName);

  end;
  //OK
  psfDeskTop._Release;
  //Error
  psfControl._Release;
  //Error
  //pEnumList._Release;
  CoTaskMemFree(pidControl);
  CoTaskMemFree(pidChild);
  CoTaskMemFree(pidAbsolute);
end; 
```

为什么可以发布`psfDeskTop`但发布时出错`psfControl and pEnumList`？有没有其他方法可以释放它们？还是在释放它们之前我需要一些判断？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:03:37.250

接口对象由内部引用计数器释放，不需要释放它们（您不应释放它们）。

# android - 如何根据几个经度和纬度在android的谷歌地图中添加大头针位置

> ID：13382401
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:00:01.730
> 
> 标签：android, google-maps, android-mapview, latitude-longitude, android-maps

这是我的地图活动，我需要根据从另一台服务器从我自己的数据库返回的我自己的坐标在这张地图上放置几个大头针位置。

公共类 MainActivity 扩展 MapActivity {

```
MapView map;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    map = (MapView)findViewById(R.id.mvMain);
    map.setBuiltInZoomControls(true);
    MapController myMapController = map.getController();
    myMapController.setCenter(new GeoPoint((int)(7.5653 * 1E6),(int)(80.4303 * 1E6)));
    myMapController.setZoom(8);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:07:12.747

在你问之前你应该好好搜索一下。

但这里有一个类似[问题的样本](https://stackoverflow.com/questions/8482650/google-maps-android-set-too-many-markers)

[上一个答案](https://stackoverflow.com/questions/6295203/adding-multiple-marker-on-google-map-in-android)

和这里[很好的教程](http://myandroidsolutions.blogspot.com/2012/03/android-how-to-put-markerspins-on-map.html)

# gxt - 在 GXT 中移动记录时取消 DualList 中的拖动事件

> ID：13382404
> 
> 赞同：1
> 
> 时间：2012-11-14T16:00:20.990
> 
> 标签：gxt

如果在 GXT 中验证失败，我想取消将记录从 FromDualList 移动到 ToDualList 的事件

```
DualListFrom.getStore().addStoreListener(
    new StoreListener<Model>() {
       @Override
      public void storeRemove( StoreEvent<Model> se ) {            
        if(!validation){

          se.setCancelled( true ); // this doesnt cancel the event
        }
       }
    }
    ); 
```

但`se.setCancelled( true );`不会阻止将记录从 fromList 移动到 ToList。

# c++ - C++：成员引用还是指针？

> ID：13382414
> 
> 赞同：3
> 
> 时间：2012-11-14T16:00:41.443
> 
> 标签：c++, arrays, pointers, reference, ptr-vector

我有一个`boost::ptr_vector`需要传递给几个仿函数的对象集合（当前）（我们称之为 vec）。我希望所有的仿函数都有一个指向同一个 vec 的引用/指针，它本质上是一个缓存，这样每个仿函数都有相同的数据缓存。我可以想到三种方法来做到这一点：

1.  将 a 传递给Functor 类`boost::ptr_vector<object>&`的构造函数`Functor`并拥有一个成员`boost::ptr_vector<object>&`

2.  将 a 传递`boost::ptr_vector<object>*`给 Functor 的构造函数并`boost::ptr_vector<object>*`在 Functor 类中有一个成员

3.  避免使用`boost::ptr_vector`并直接将数组 ( `object*`) 传递给构造函数

我曾尝试使用方法 3，但一直有人告诉我应该使用向量而不是原始指针。因此，我尝试了方法 2，但是由于指针添加了额外的间接级别，这增加了我的程序的延迟。我目前正在使用方法 1，但是我可能需要在仿函数的生命周期内重新分配缓存（因为数据缓存可能会更改），因此这可能不是一个合适的选择。

我不完全理解。我假设仿函数被复制的过程中的某个地方（尽管这些都存储在 ptr_vector 本身中）。

方法 3 最适合我的情况吗？方法 2，太慢了（延迟非常关键），至于方法 1，我一次又一次地被建议使用向量来代替。

非常感谢任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:08:11.583

C++ 中的引用只能初始化（“绑定”）到变量。

在那之后，引用***不能***在其生命周期内“重新定位”（使其*引用*不同的变量）。

这就是为什么可以想象生成默认的复制构造函数，但绝不会生成赋值运算符的原因，因为这需要“更改”引用。

我在这里推荐的方法是使用智能指针而不是引用。

*   std::unique_ptr （最简单，负责分配/解除分配）
*   std::shared_ptr （涉及更多，允许共享所有权）

在这种情况下：

```
std::shared_ptr<boost::ptr_vector<object> > m_coll; 
```

似乎很合适

# git - 跨 Github、Sourceforge 和 Google 代码镜像存储库

> ID：13382415
> 
> 赞同：13
> 
> 时间：2012-11-14T16:00:42.217
> 
> 标签：git, github, google-code, sourceforge

鉴于它们都支持 git，是否可以在 GitHub、SourceForge 和 Google Code 上镜像 git 存储库（跨所有主机同步）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T07:09:41.943

您可以编辑`.git/config`文件以创建推送到多个存储库的远程。

```
[remote "everyone"]
    url = https://github.com/USERNAME/REPOSITORY.git
    url = ssh://USERNAME@git.code.sf.net/p/PROJECTNAME/MOUNTPOINT
    url = https://PROJECT.googlecode.com/git 
```

或使用`git config --add`命令：

```
git config --add remote.everyone.url https://github.com/USERNAME/REPOSITORY.git
git config --add remote.everyone.url ssh://USERNAME@git.code.sf.net/p/PROJECTNAME/MOUNTPOINT
git config --add remote.everyone.url https://PROJECT.googlecode.com/git 
```

现在，当您输入 时`git push everyone master`，您会将主分支推送到所有三个遥控器。

感谢[这个 Stack Overflow 的答案](https://stackoverflow.com/a/166043/19818)。

# passbook - 未显示通行证文件的“添加到存折”选项

> ID：13382416
> 
> 赞同：0
> 
> 时间：2012-11-14T16:00:49.877
> 
> 标签：passbook

我正在开发通行证文件创建应用程序。创建了一个通行证文件，将其附加到邮件中，在安装了 ios6 的 iphone 4s 中打开它。通行证已正确打开，但未显示添加到存折选项。关于需要做什么的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:35:13.597

我成功地将附加的通行证添加到通行证应用程序。签署命令有问题。使用以下一个，它工作得很好。（以前缺少 WWDR.pem）。

`openssl smime -binary -sign -certfile WWDR.pem -signer passcertificate.pem -inkey passkey.pem -in manifest.json -out signature -outform DER -passin pass:12345`

# java - 运行 Cucumber 测试失败并出现 OutOfMemoryError：Java 堆空间异常

> ID：13382421
> 
> 赞同：1
> 
> 时间：2012-11-14T16:01:01.177
> 
> 标签：java, maven, cucumber, bdd

我正在使用 Cucumber 应用 BDD 方法，这很棒！

问题是我的测试套件越来越大，现在我得到以下异常，由于错误的原因导致我的测试失败......

我正在使用所有排序或 Cucumber 功能，例如：背景、场景大纲和简单场景。我像这样运行测试：

```
@RunWith(Cucumber.class)
@Cucumber.Options(features={"...../controller1"})
public class RunCukes1Test {
} 
```

我将功能文件拆分到不同的目录（controller1、controller2...）和运行程序（RunCukes1Test、RunCukes2Test...），但这没有帮助。

当我自己运行每个测试时，一切都很好，但是当我使用mave生命周期测试运行它时，它失败了。有谁知道 Java Cucumber 中的任何最佳实践以避免此类问题。

```
 Tests run: 5896, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 33.082 sec
Running com.kenshoo.urlbuilder.appservice.controller.RunCukes4Test

Tests run: 11838, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 80.833 sec
Exception in thread "Thread-73" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2882)
    at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100)
    at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:515)
    at java.lang.StringBuffer.append(StringBuffer.java:306)
    at java.io.BufferedReader.readLine(BufferedReader.java:345)
    at java.io.BufferedReader.readLine(BufferedReader.java:362)
    at org.codehaus.plexus.util.cli.StreamPumper.run(StreamPumper.java:129)
Exception in thread "ThreadedStreamConsumer" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOfRange(Arrays.java:3209)
    at java.lang.String.<init>(String.java:215)
    at java.lang.StringBuffer.toString(StringBuffer.java:585)
    at org.apache.maven.surefire.report.PrettyPrintXMLWriter.escapeXml(PrettyPrintXMLWriter.java:167)
    at org.apache.maven.surefire.report.PrettyPrintXMLWriter.addAttribute(PrettyPrintXMLWriter.java:178)
    at org.apache.maven.surefire.shade.org.codehaus.plexus.util.xml.Xpp3DomWriter.write(Xpp3DomWriter.java:50)
    at org.apache.maven.surefire.shade.org.codehaus.plexus.util.xml.Xpp3DomWriter.write(Xpp3DomWriter.java:55)
    at org.apache.maven.surefire.shade.org.codehaus.plexus.util.xml.Xpp3DomWriter.write(Xpp3DomWriter.java:39)
    at org.apache.maven.surefire.report.XMLReporter.testSetCompleted(XMLReporter.java:128)
    at org.apache.maven.surefire.report.MulticastingReporter.testSetCompleted(MulticastingReporter.java:51)
    at org.apache.maven.surefire.report.TestSetRunListener.testSetCompleted(TestSetRunListener.java:115)
    at org.apache.maven.plugin.surefire.booterclient.output.ForkClient.consumeLine(ForkClient.java:97)
    at org.apache.maven.plugin.surefire.booterclient.output.ThreadedStreamConsumer$Pumper.run(ThreadedStreamConsumer.java:67)
    at java.lang.Thread.run(Thread.java:662)

Results :

Tests run: 11790, Failures: 0, Errors: 0, Skipped: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:16:11.580

在黄瓜测试运行后，我得到了另一个 java-heap-space 异常的答案。你可以在这里看到 -[相关问题](https://stackoverflow.com/questions/13381977/jenkins-build-fails-after-running-cucumber-tests-on-java-heap-space-exception/13382285#comment18277175_13382285)

我的理论是，这是**Cucumber 运行期间**`-XX:MaxPermSize`的一个因素，因为 Cucumber 生成测试代码，而 PermSize 与代码量有关，如[java 中的 permsize所述](https://stackoverflow.com/questions/1634216/what-is-permsize-in-java)

 **这是**Cucumber 运行后**`-Xmx`的一个因素，同时解析测试结果。

 **因此解决方案是在它们和实际可用内存之间找到平衡点。****

# php - 从字符串数组 PHP 中消除部分字符串

> ID：13382437
> 
> 赞同：0
> 
> 时间：2012-11-14T16:02:07.923
> 
> 标签：php, arrays, string

我可以做到这一点，我只是想知道是否有比我想出的 47 行代码更优雅的解决方案......

本质上我有一个数组（值是所述字符串的出现）；

```
[Bob] => 2
[Theresa] => 3
[The farm house] => 2
[Bob at the farm house] => 1 
```

我想遍历数组并消除任何属于其他人的子字符串的条目，以便最终结果是；

```
[Theresa] => 3
[Bob at the farm house] => 1 
```

最初我是这样循环的（调用这个数组 $baseTags）：

```
foreach($baseTags as $key=>$count){
   foreach($baseTags as $k=>$c){
      if(stripos($k,$key)){
            unset($baseTags[$key]);
      }
   }
} 
```

我假设我正在循环遍历数组中的每个键，并且如果在另一个键中出现该键以取消设置它……但似乎对我不起作用。我错过了一些明显的东西吗？

先感谢您。

-H

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:05:18.020

您误用了 strpos/stripos。`0`如果您要搜索的字符串恰好位于“haystack”字符串的开头，例如您的`Bob`值，它们可以返回完全有效的字符串。您需要对此进行明确测试

```
if (stripos($k, $key) !== FALSE) {
   unset(...);
} 
```

如果 strpos/stripos 没有找到针，它们返回一个布尔值 false，在 PHP 的正常弱比较规则下等于/等价于 0。使用严格比较运算符 ( `===`, `!==`)，比较类型和值，你会得到正确的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:14:03.333

不要忘记 as-and `!== false`need ，你需要`$k != $key`让你的字符串不匹配自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:42:26.977

您的代码示例中有两个问题：

1.  您将每个键与每个键组合在一起，因此不仅是其他键，还有它本身。您将删除所有条目，因为`"Bob"`它也是 的子字符串`"Bob"`。
2.  [`stripos`](http://php.net/stripos)如果未找到则返回，这可能与表示在位置找到的`false`混淆，后者也等于但不等同于。`0``0``false`

您需要添加额外的检查以不删除*相同*的密钥，然后修复“未找到”情况的检查（[演示](http://3v4l.org/YUK7N#v500)）：

```
$baseTags = array(
    'Bob' => 2,
    'Theresa' => 3,
    'The farm house' => 2,
    'Bob at the farm house' => 1,
);

foreach ($baseTags as $key => $count)
{
   foreach ($baseTags as $k => $c)
   {
      if ($k === $key)
      {
          continue;
      }

      if (false !== stripos($k, $key))
      {
            unset($baseTags[$key]);
      }
   }
}

print_r($baseTags); 
```

输出：

```
Array
(
    [Theresa] => 3
    [Bob at the farm house] => 1
) 
```

# c++ - 将 char 数组另存为 JPG 用于 C++ Windows Store App

> ID：13382442
> 
> 赞同：0
> 
> 时间：2012-11-14T16:02:37.893
> 
> 标签：c++, windows-8, microsoft-metro

鉴于以下

*   char数组中的位图原始图像数据
*   图像宽度和高度
*   `wzAppDataDirectory`使用以下代码生成的 std::wstring 中的路径

* * *

```
// Get a good path.
wchar_t wzAppDataDirectory[MAX_PATH];
wcscpy_s( wzAppDataDirectory, MAX_PATH, Windows::Storage::ApplicationData::Current->LocalFolder->Path->Data() );
wcscat_s( wzAppDataDirectory, MAX_PATH, (std::wstring(L"\\") + fileName).c_str() ); 
```

* * *

我们如何将图像保存为 JPG？（包括编码以及 char 数组是原始位图形式）

非常感谢代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:23:13.250

您需要使用库来对 JPEG 进行编码。一些可能性是[Independent JPEG Group 的 jpeglib](http://www.ijg.org/)、[`stb_image`](http://nothings.org/stb_image.c)或[DevIL](http://openil.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:16:14.513

这是我从朋友那里获得的示例代码。

它使用 OpenCV 的 Mat 数据结构。请注意，您需要确保其中的 unsigned char 数据数组`cv::Mat`是连续形式的。`cv::cvtColor`会成功的（或，`cv::Mat.clone`）。

**请注意，不要使用 OpenCV 的`imwrite`.** 截至撰写本文时，`imwrite`未通过 Windows 应用商店认证测试。它使用了几个 API，这在 WinRT 中是被禁止的。

```
void SaveMatAsJPG(const cv::Mat& mat, const std::wstring fileName)
{
    cv::Mat tempMat;
    cv::cvtColor(mat, tempMat, CV_BGR2BGRA);

    Platform::String^ pathName = ref new Platform::String(fileName.c_str());

    task<StorageFile^>(ApplicationData::Current->LocalFolder->CreateFileAsync(pathName, CreationCollisionOption::ReplaceExisting)).
    then([=](StorageFile^ file)
    {
        return file->OpenAsync(FileAccessMode::ReadWrite);
    }).
    then([=](IRandomAccessStream^ stream)
    {
        return BitmapEncoder::CreateAsync(BitmapEncoder::JpegEncoderId, stream);
    }).
    then([=](BitmapEncoder^ encoder)
    {
        const Platform::Array<unsigned char>^ pixels = ref new Platform::Array<unsigned char>(tempMat.data, tempMat.total() * tempMat.channels());
        encoder->SetPixelData(BitmapPixelFormat::Bgra8, BitmapAlphaMode::Ignore, tempMat.cols , tempMat.rows, 96.0, 96.0, pixels);
        encoder->FlushAsync();
    });
} 
```

# html - 选择框内的项目在 ie8 中看起来很奇怪

> ID：13382446
> 
> 赞同：1
> 
> 时间：2012-11-14T16:02:50.750
> 
> 标签：html, css, cross-browser

我做了一个选择框，在除 IE8 之外的所有浏览器上看起来都不错，在 IE8 中，项目靠近底部而不是中间。

链接： [https ://dl.dropbox.com/u/107452929/select/index.html](https://dl.dropbox.com/u/107452929/select/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:05:36.417

使用`padding`而不是`height`属性来设置列表样式`select`...

```
select { padding:4px 0; } 
```

# .net - 使用 HttpWebRequest POST 方法将本地 CSV 文件数据导入 Big Query 表

> ID：13382449
> 
> 赞同：1
> 
> 时间：2012-11-14T16:02:54.333
> 
> 标签：.net, google-bigquery

我正在尝试创建一个新的作业正文并使用 HttpWebRequest 对象将此正文发布到 BigQuery。正文包含两部分，即。来自 csv 的定义和内容。我不知道我卡在哪里并且我收到一个错误：-“远程服务器返回一个错误：（400）错误请求”。我能够使用服务帐户成功生成访问令牌。

这是我的代码：-

```
 string strURL = "https://www.googleapis.com/upload/bigquery/v2/projects/" + strProjId + "/jobs";
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(strURL);
        request.ContentType = "multipart/related; boundary=xxx";
        request.Headers.Add(HttpRequestHeader.Authorization, strAccessToken);
        request.Method = "POST";
        //string strHeader = "{'Content-Type': 'multipart/related; boundary=xxx', 'Authorization': 'Bearer " + strAccessToken + "'}";
        string strJob = "--xxx" + "\n" +
                                "Content-Type: application/json; charset=UTF-8" + "\n" +
                                "{" + "\n" +
                                "'kind' : 'bigquery#job' ," + "\n" +
                                "'Id' : 'testJob' ," + "\n" +
                                  "'configuration': {" + "\n" +
                                    "'load': {" + "\n" +
                                     "'sourceFormat':'CSV'," + "\n" +
                                        "'schema': {" + "\n" +
                                        "'fields': [" + "\n" +
                                            "{'name':'Event_strLanguage','type':'STRING'}" + "\n" +
                                            "{'name':'Event_strTitle','type':'STRING'}," + "\n" +
                                            "{'name':'Event_dtmReleaseDate','type':'STRING'}," + "\n" +
                                        "]" + "\n" +
                                        "}," + "\n" +
                                        "'destinationTable': {" + "\n" +
                                        "'projectId': '" + strProjId + "'," + "\n" +
                                        "'datasetId': '" + strDatasetId + "'," + "\n" +
                                        "'tableId': 'tblEvents'" + "\n" +
                                        "}," + "\n" +
                                        "'fieldDelimiter':'|', " + "\n" +
                                    "}" + "\n" +
                                    "}" + "\n" +
                                "}" + "\n" +
                                "--xxx" + "\n" +
                                "Content-Type: application/octet-stream";

        StringBuilder sbrData = new StringBuilder();
        sbrData.AppendLine("Hindi|ABC|2008-01-11 00:00:00");//from CSV
        sbrData.AppendLine("Hindi|LMN|2008-02-20 00:00:00");//from CSV
        sbrData.AppendLine("Hindi|XYZ|2009-03-27 00:00:00");//from CSV
        StringBuilder sbrReqBody = new StringBuilder();
        sbrReqBody.Append(strJob + "\r\n" + sbrData + "--xxx--");

        byte[] bytes = Encoding.ASCII.GetBytes(sbrReqBody.ToString());
        request.ContentLength = bytes.Length;
        Stream requestStream = request.GetRequestStream();
        requestStream.Write(bytes, 0, bytes.Length);
        WebResponse resp = request.GetResponse();
        Stream stream = resp.GetResponseStream();
        StreamReader reader = new StreamReader(stream);
        stream.Dispose();
        reader.Dispose();
        var result2 = reader.ReadToEnd(); 
```

我编辑了代码，仍然收到错误 400 错误请求：-

```
 string strDataBoundary = "xxx";
 string strFooter = "\r\n--" + strDataBoundary + "--\r\n";
 string strContentType = "multipart/related; boundary=" + strDataBoundary;
 string strURL = "https://www.googleapis.com/upload/bigquery/v2/projects/" + strProjId + "/jobs";

HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(strURL);
            request.Method = "POST";
            request.ContentType = strContentType;
            System.Net.ServicePointManager.Expect100Continue = false;
            request.PreAuthenticate = true;
            request.AuthenticationLevel = System.Net.Security.AuthenticationLevel.MutualAuthRequired;
            request.Headers.Add("Authorization", "Bearer " + strAccessToken); //Supplied OAuth 2.0 Access Token.
            request.KeepAlive = true;

        string strJob = "--" + strDataBoundary + "\r\n" +
                                "Content-Type: application/json; charset=UTF-8" + "\r\n" +
                                "{" + "\r\n" +
                                "\"kind\" : \"bigquery#job\" ," + "\r\n" +
                                "\"Id\" : \"testJob\" ," + "\r\n" +
                                  "\"configuration\": {" + "\r\n" +
                                    "\"load\": {" + "\r\n" +
                                        "\"destinationTable\": {" + "\r\n" +
                                        "\"projectId\": \"" + strProjId + "\"," + "\r\n" +
                                        "\"datasetId\": \"" + strDatasetId + "\"," + "\r\n" +
                                        "\"tableId\": \"tblEvents\"" + "\r\n" +
                                        "}," + "\r\n" +
                                        "\"fieldDelimiter\":\"|\", " + "\r\n" +
                                    "}" + "\r\n" +
                                    "}" + "\r\n" +
                                "}" + "\r\n" +
                                "--" + strDataBoundary  + "\r\n" +
                                "Content-Type: application/octet-stream";

        FileStream objFS = new FileStream("D:\\Events.csv", FileMode.Open, FileAccess.Read);
        byte[] objFileData = new byte[objFS.Length];
        objFS.Read(objFileData, 0, objFileData.Length);
        objFS.Close();

        Stream objDataStream = new MemoryStream();
        objDataStream.Write(Encoding.UTF8.GetBytes(strJob), 0, Encoding.UTF8.GetByteCount(strJob));
        objDataStream.Write(objFileData, 0, objFileData.Length);
        objDataStream.Write(Encoding.UTF8.GetBytes(strFooter),0,Encoding.UTF8.GetByteCount(strFooter));

        objDataStream.Position = 0;
        byte[] objStream = new byte[objDataStream.Length];
        objDataStream.Read(objStream, 0, objStream.Length);
        objDataStream.Close();
        request.ContentLength = objStream.Length;

        Stream objReqStream = request.GetRequestStream();
        objReqStream.Write(objStream, 0, objStream.Length);
        objReqStream.Close();

        HttpWebResponse objResp = (HttpWebResponse)request.GetResponse(); 
```

现在，我正在尝试另一种方式：-

```
internal class clsGetOAuth2Authentication
    {
        public OAuth2Authenticator<AssertionFlowClient> objGetOAuth2(string strPrivateFilePath, string strPrivateFilePassword, string strServiceAccEmailId,string strScope)
        {
            AuthorizationServerDescription objAuthServerDesc;
            X509Certificate2 objKey;
            AssertionFlowClient objClient;
            OAuth2Authenticator<AssertionFlowClient> objAuth = null;

            string ScopeUrl = "https://www.googleapis.com/auth/" + strScope;
            string strSrvAccEmailId = strServiceAccEmailId; //strSrvAccEmailId: This is the Email Address of the Service Account. 
            string strKeyFile = strPrivateFilePath; //KeyFile: This is the physical path to the key file you downloaded when you created your Service Account.
            string strKeyPassword = (strPrivateFilePassword != "") ? strPrivateFilePassword : "notasecret"; //key_pass: This is probably the password for all key files, but if you're given a different one, use that.

            objAuthServerDesc = GoogleAuthenticationServer.Description; //objAuthServerDesc: Description of the server that will grant Authentiation. 
            objKey = new X509Certificate2(strKeyFile, strKeyPassword, X509KeyStorageFlags.Exportable); //objkey: Load up and decrypt the key.
            objClient = new AssertionFlowClient(objAuthServerDesc, objKey) { ServiceAccountId = strSrvAccEmailId, Scope = ScopeUrl }; //objClient: Using the AssertionFlowClient, because we're logging in with our certificate.
            objAuth = new OAuth2Authenticator<AssertionFlowClient>(objClient, AssertionFlowClient.GetState); //objAuth: Requesting Authentication.
            return objAuth;
        }
    }
//The above class returns OAuth2Authenticator<AssertionFlowClient> object:-

        clsGetOAuth2Authentication objOAuth2 = new clsGetOAuth2Authentication();
        var objAuth = objOAuth2.objGetOAuth2(strKeyFile, strKeyPassword,    strSrvAccEmailId, strScope); //Authentication data returned

        objBQServ = new BigqueryService(objAuth); //Instantiate BigQueryService with Authorization

        TableReference objTblRef = new TableReference();
        objTblRef.ProjectId = strProjId;
        objTblRef.DatasetId = strDatasetId;
        objTblRef.TableId = "tblEvents";

        JobConfigurationLoad objJobConfigLoad = new JobConfigurationLoad();
        objJobConfigLoad.FieldDelimiter = "|";
        objJobConfigLoad.DestinationTable = objTblRef;
        objJobConfigLoad.WriteDisposition = "WRITE_APPEND ";

        JobConfiguration objJobConfig = new JobConfiguration() { Load = objJobConfigLoad };
        Job objJob = new Job() { Configuration = objJobConfig, Kind = "bigquery#jobs", Id = "TestJob" };

        FileStream objFS = new FileStream("D:\\tblEvents2.csv", FileMode.Open, FileAccess.Read);
        byte[] objFileData = new byte[objFS.Length];
        objFS.Read(objFileData, 0, objFileData.Length);
        objFS.Close();

        Stream objDataStream = new MemoryStream();
        objDataStream.Write(objFileData, 0, objFileData.Length);

        objBQServ.Jobs.Insert(objJob, strProjId, objDataStream, "application/octet-stream").Upload(); //Getting error at the Upload() method. Object cannot be initialized. 
```

请帮我看看这段代码我是否朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:07:00.553

乍一看，我认为问题可能在于您似乎正在编码整个请求，而不仅仅是内容本身。我建议使用[此处描述](https://stackoverflow.com/questions/219827/multipart-forms-from-c-sharp-client)的 FileStream 类。

# cakephp - cakephp $this->Model->save() 没有更新

> ID：13382456
> 
> 赞同：1
> 
> 时间：2012-11-14T16:03:21.823
> 
> 标签：cakephp

我正在尝试构建一个数组并循环更新一些字段。

这是我的请求->数据

```
Array

(
    [list] => Array
        (
            [4] => null
            [2] => null
            [3] => null
            [5] => 3
        )

) 
```

它是来自 jquery 序列化列表的返回值。键是行 ID，值是行 parent_id。

所以我遍历控制器中的数组：

```
foreach ($this->request->data['list'] as $key => $value) {
    (!isset($orders[$value])) ? $orders[$value]=0 : $orders[$value]++;
    $data = array('id' => $key, 'parent_id' => (int)$value, 'display_order' => $orders[$value]);
    $this->Category->save($data);
} 
```

我在循环中创建的 $data 数组是正确的，但 sql 日志只显示每行的 SELECT COUNT(*) 等，没有 UPDATE 命令。

我尝试了各种方法来保存它：使用 set() 方法，使用 $this->Category->id = $key; 而不是直接在数据数组中添加键。

任何想法为什么这不保存？我敢肯定这很简单......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T19:36:47.217

我想你忘记了保存方法中的蛋糕约定，你必须把所有的字段值放在一个名为 FirstCap 的数组中，像这样：

```
Array
(
    [ModelName] => Array
        (
            [fieldname1] => 'value'
            [fieldname2] => 'value'
        )
) 
```

否则，您可以为每个值使用 set ，并且您忘记为您所做的每个插入创建一行，因此请尝试以下操作：

```
foreach ($this->request->data['list'] as $key => $value) {
     (!isset($orders[$value])) ? $orders[$value]=0 : $orders[$value]++;
     $data = array( 'Category' => array('id' => $key, 'parent_id' => (int)$value, 'display_order' => $orders[$value]));
     $this->Category->save($data);
} 
```

您还可以设置每个 id，然后迭代这些值

```
foreach ($this->request->data['list'] as $key => $value) {
     (!isset($orders[$value])) ? $orders[$value]=0 : $orders[$value]++;
    $this->Category->id = $key;
    $this->Category->set(array('parent_id' => (int)$value,
                               'display_order' => $orders[$value]
    ));

     $this->Category->save();
} 
```

尝试每一个答案，但我认为最后一个更适合你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:26:19.810

来自 CakePHP[书](http://book.cakephp.org/2.0/en/models/saving-your-data.html)。

> 在循环中调用 save 时，不要忘记调用 create()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:28:52.293

echo $data 并与 save() 方法的语法匹配。也不要滑到匹配表中字段的数据类型。

# ios - 在 iPhone 中看不到通讯录联系人

> ID：13382459
> 
> 赞同：0
> 
> 时间：2012-11-14T16:03:25.637
> 
> 标签：ios

> **可能重复：**
> [以编程方式请求访问 iOS 6 中的联系人](https://stackoverflow.com/questions/12648244/programmatically-request-access-to-contacts-in-ios-6)

我正在尝试在我的 iPhone 上测试一些功能，其中我提取所有地址簿成员并将它们显示在表格中。这在模拟器上运行良好，我看到了像“John Appleseed”这样的模拟联系人。当我在 iPhone 上运行代码时，我只看到显然是我的“移动用户”。

如何查看我的所有通讯录联系人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:15:12.583

在 iOS 6 中，用户必须授予应用程序使用联系信息的权限。

如果你用谷歌搜索的话，有很多这样的例子。你可以使用类似的东西：

```
ABAddressBookRef addressBook = ABAddressBookCreate();

__block BOOL accessGranted = NO;
if (ABAddressBookRequestAccessWithCompletion != NULL) { // we're on iOS 6
    dispatch_semaphore_t sema = dispatch_semaphore_create(0);
    ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
        accessGranted = granted;
        dispatch_semaphore_signal(sema);
    });
    dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
    dispatch_release(sema);   
}
else { // we're on iOS 5 or older
    accessGranted = YES;
}

if (accessGranted) {
    // Do whatever you want here.
} 
```

查看此问题以获取更多信息： [以编程方式请求访问联系人](https://stackoverflow.com/questions/12648244/programmatically-request-access-to-contacts-in-ios-6)

# php - 闭包中的PHP未定义变量

> ID：13382460
> 
> 赞同：10
> 
> 时间：2012-11-14T16:03:31.743
> 
> 标签：php

以下代码段返回一堆输入字段，但我无法设置它们的值，因为 $data 未定义（它位于闭包内）。

```
$row = array_map(function($n) {
    $name = sprintf('point[%0d]', $n+1);
    $value = $data['measurements'][$n];
    return form_input($name, $value, "class='input-mini'");
}, range($i*6, $i*6+5)); 
```

我知道全局变量并不酷。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-14T16:04:47.537

[从父作用域继承变量](http://php.net/manual/en/functions.anonymous.php#example-167)

```
$row = array_map(function($n) use ($data) {
    $name = sprintf('point[%0d]', $n+1);
    $value = $data['measurements'][$n];
    return form_input($name, $value, "class='input-mini'");
}, range($i*6, $i*6+5)); 
```

# facebook - Facebook 喜欢按钮头像

> ID：13382462
> 
> 赞同：2
> 
> 时间：2012-11-14T16:03:35.453
> 
> 标签：facebook, web, facebook-like, avatar

当我在我的网站上插入代码时，我想在点赞按钮框中显示更多的朋友头像，可以吗？我从中得到了代码，[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)目前，该框最多仅显示 7 个朋友头像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:30:26.607

这将取决于您有多少朋友喜欢该页面。您可以使用的另一个选项是显示一个类似框，旁边有一个[面罩框。](https://developers.facebook.com/docs/reference/plugins/facepile/)例如：

```
<div class="fb-like" data-href="https://www.facebook.com/" data-send="false" data-layout="box_count" data-width="50" data-show-faces="false" style="float:left;></div>
<div class="fb-facepile" data-href="https://www.facebook.com/" data-size="large" data-max-rows="1" data-width="350"></div> 
```

# cakephp - CakePHP AMFPHP 2.1 供应商集成

> ID：13382468
> 
> 赞同：1
> 
> 时间：2012-11-14T16:03:53.687
> 
> 标签：cakephp, amfphp

我对 cakephp 和 amfphp 2.1 的集成有疑问。我做了以下控制器：

```
 class AmfController extends AppController
    {
        public function index(){
            App::import('Vendor','Amfphp/index');
            $this->autoRender = false;
        }
        public function backOffice(){
            App::import('Vendor', 'backOffice', array('file' => 'BackOffice' . DS . 'ServiceBrowser.php'));
            $this->autoRender = false;

        }
  } 
```

方法索引工作正常，cakephp 正在输出 amf 入口点，但方法 backOffice 正在输出以下错误：

> 服务调用失败

```
object(CakeRequest) {
    params => array(
        [maximum depth reached]
    )
    data => array([maximum depth reached])
    query => array([maximum depth reached])
    url => 'amf/backOffice'
    base => ''
    webroot => '/'
    here => '/amf/backOffice'
}
object(CakeResponse) {

} 
```

请帮助我，文件夹 Amfphp 和 BackOffice 位于 app/Vendor 文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:07:06.913

这里有一个想法可能会有所帮助：服务浏览器调用入口点来获取有关各种服务的信息，因此这可能会在 CakePHP 中产生一些奇怪的副作用，从而导致无限循环。除此之外，我不知道...如果您在回帖时仍然遇到问题，我会试一试。

# ssdp - SSDP 协议 - 实现

> ID：13382469
> 
> 赞同：7
> 
> 时间：2012-11-14T16:03:59.027
> 
> 标签：ssdp

我正在尝试实现 SSDP 协议，但我不确定它是如何工作的。SSDP 通过 udp 发送数据，这很清楚。如果控制器连接到网络，它可以搜索带有 MSEARCH 消息的设备，该消息可以发送到多播地址 239.255.255.250:1900。每个设备都必须监听这个地址并做出响应。但我不知道他们是如何回应的。我在wireshark中看到他们用单播响应，但我不知道如何确定接收响应的端口。

编辑 - - - - - - - -

我正在尝试使用尖峰模糊测试框架编写 ssdp 模糊测试。正如我所说，我能够发送正确的数据，但无法接收响应。我将尝试粘贴一些带有简要说明的尖峰代码。有 Spike 结构，它表示要发送的数据（它存储实际数据、大小、协议信息......）。我删除了一些变量以使其更清晰。

```
struct spike {

  /*total size of all data*/
  unsigned long datasize;
  unsigned char *databuf;
  unsigned char *endbuf;
  int fd; /*for holding socket or file information*/
  int proto; /*1 for tcp, 2 for udp*/
  struct sockaddr_in *destsockaddr;
}; 
```

现在我正在通过 udp 发送数据，并希望通过以下功能接收一些响应

```
spike_connect_udp(target,port);
spike_send();
s_read_packet(); 
```

功能实现：

```
int 
spike_connect_udp(char * host, int port)
{
  int fd;
  /*ahh, having udpstuff.c makes this stuff easy*/
  fd=udpconnect(host,port);
  if (fd==-1)
    {
      fprintf(stderr,"Couldn't udp connect to target\n");
      return (0);
    }
  current_spike->fd=fd;
  current_spike->proto=2; /*UDP*/
  return 1;
}

int
udpconnect(const char * host,  const unsigned short port )
{
  int sfd = -1;
  struct sockaddr_in addr;
  /* Translate hostname from DNS or IP-address form */

  memset(&addr, 0, sizeof(addr));
  if (!getHostAddress(host, &addr))
    {
      hdebug("can't resolve host or address.\n");
      return -1;
    }
  addr.sin_family = AF_INET;
  addr.sin_port = ntohs(port);

  if ((sfd = socket(AF_INET,  SOCK_DGRAM, 0)) < 0)
    {
      hdebug("Could not create socket!\n");
      return -1;
    }

  /* Now connect! */

  if (connect(sfd, (struct sockaddr *)&addr, sizeof(addr)) < 0)
    {
      close(sfd);
      return -1;
    }

  return sfd;

}

int
spike_send()
{
  int retval;

  switch (current_spike->proto) 
    {
    case 1: /*TCP*/
    //deleted, doesnt matter, i am sending via udp
    case 2: /*UDP*/
      //udp_write_data is function from framework
      retval=udp_write_data(current_spike->fd, current_spike->destsockaddr, s_get_size(), s_get_databuf());
      break;

    }

  fflush(0);

  return retval;
} 
```

这工作正常并通过 udp 发送数据。现在我想通过打开的套接字 current_spike->fd 接收一些响应。函数 s_read_packet 无效

```
s_read_packet()
{
  unsigned char buffer[5000];
  int i;
  int size;
  s_fd_wait();
  printf("Reading packet\n");
  memset(buffer,0x00,sizeof(buffer));
  /what alarm and fcntl does?
  alarm(1);
  fcntl(current_spike->fd, F_SETFL, O_NONBLOCK);
  //this read return error -1 and sets errno to 11 service temporarily unavailable
  size=read(current_spike->fd,buffer,1500);
  fcntl(current_spike->fd, F_SETFL, 0);
  alarm(0);

  for (i=0; i<size; i++)
    {
      if (isprint(buffer[i]))
    printf("%c",buffer[i]);
      else
    printf("[%2.2x]",buffer[i]);
    }

  printf("\nDone with read\n");
}

int
s_fd_wait()
{
  /*this function does a select to wait for
    input on the fd, and if there
    is, returns 1, else 0 */
  int fd;
  fd_set rfds;
  struct timeval tv;
  int retval;

  fd=current_spike->fd;

  /* Watch server_fd (fd 0) to see when it has input. */
  FD_ZERO(&rfds);
  FD_SET(fd, &rfds);
  /* Wait up to zero seconds  .  will this wait forever? not on linux.*/

  /* from man page: timeout is an upper bound on the amount of time
       elapsed before select returns. It may be zero, causing select
       to return immediately.  If timeout is NULL (no timeout), select
       can block indefinitely. */

  /*wait 2 seconds only*/
  tv.tv_sec = TIMEINSECONDS;
  tv.tv_usec = TIMEINUSECONDS;
  //printf("Before select %d:%d\n",TIMEINSECONDS,TIMEINUSECONDS);
  retval = select(fd+1, &rfds, NULL, NULL, &tv);
  /* Don't rely on the value of tv now! */
  //printf("After select retval=%d.\n",retval);
  switch (retval)
   {
     case 0:
       /*Timeout - no packet or keypress*/
        return(0);
        break;
     case -1:
      /* ignore interrupted system calls */
       if (errno != EINTR)
         {
           /*some kind of weird select error. Die. */
           exit(-1);
         }
      /*otherwise we got interrupted, so just return false*/
       return (0);
       break;
     default:
         {
           if (FD_ISSET(fd,&rfds))
             return (1);
           else
            return (0);
         }
   }
} 
```

但是函数 s_read_packet 不会产生任何数据...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-12-19T13:00:10.307

为了实现 SSDP，您的应用程序需要能够将`NOTIFY`and`M-SEARCH`标头发送到指定的多播地址，并且还应该能够接收这些消息。为此，您需要创建一个专门的 UDP 套接字。

下面是一个关于如何初始化这样一个套接字的例子：

```
// Structs needed
struct in_addr localInterface;
struct sockaddr_in groupSock;
struct sockaddr_in localSock;
struct ip_mreq group;   

// Create the Socket
int udpSocket = socket(AF_INET, SOCK_DGRAM, 0);

// Enable SO_REUSEADDR to allow multiple instances of this application to receive copies of the multicast datagrams.
int reuse = 1;

setsockopt(udpSocket, SOL_SOCKET, SO_REUSEADDR, (char *)&reuse, sizeof(reuse));

// Initialize the group sockaddr structure with a group address of 239.255.255.250 and port 1900.
memset((char *) &groupSock, 0, sizeof(groupSock));

groupSock.sin_family = AF_INET;
groupSock.sin_addr.s_addr = inet_addr("239.255.255.250");
groupSock.sin_port = htons(1900);

// Disable loopback so you do not receive your own datagrams.
char loopch = 0;

setsockopt(udpSocket, IPPROTO_IP, IP_MULTICAST_LOOP, (char *)&loopch, sizeof(loopch));

// Set local interface for outbound multicast datagrams. The IP address specified must be associated with a local, multicast capable interface.
localInterface.s_addr = inet_addr("192.168.0.1");

setsockopt(udpSocket, IPPROTO_IP, IP_MULTICAST_IF, (char *)&localInterface, sizeof(localInterface));

// Bind to the proper port number with the IP address specified as INADDR_ANY.
memset((char *) &localSock, 0, sizeof(localSock));
localSock.sin_family = AF_INET;
localSock.sin_port = htons(1900);
localSock.sin_addr.s_addr = INADDR_ANY;

bind(udpSocket, (struct sockaddr*)&localSock, sizeof(localSock));

// Join the multicast group on the local interface. Note that this IP_ADD_MEMBERSHIP option must be called for each local interface over which the multicast datagrams are to be received.
group.imr_multiaddr.s_addr = inet_addr("239.255.255.250");
group.imr_interface.s_addr = inet_addr("192.168.0.1");

setsockopt(udpSocket, IPPROTO_IP, IP_ADD_MEMBERSHIP, (char *)&group, sizeof(group)); 
```

现在您可以使用此套接字将您的数据发送到多播组：

```
sendto(udpSocket, message, message_length, 0, (struct sockaddr*)&groupSock, sizeof(groupSock)); 
```

要接收消息，请执行以下操作：

```
struct sockaddr_in si_other;
socklen_t slen = sizeof(si_other);
char buffer[1024];

recvfrom(udpSocket, buffer, 1024, 0, (struct sockaddr *) &si_other, &slen); 
```

要响应特定请求（如上接收），请执行以下操作：

```
sendto(udpSocket, message, message_length, 0, (struct sockaddr*)&si_other, sizeof(si_other)); 
```

您现在所要做的就是创建所需的消息以发送和处理接收到的数据。假设您向`M-SEARCH`多播组发送请求（如上所述），然后您会从每个设备收到如下响应：

```
HTTP/1.1 200 OK
SERVER: Linux/2.6.15.2 UPnP/1.0 Mediaserver/1.0
CACHE-CONTROL: max-age=1200
LOCATION: http://192.168.0.223:5001/description.xml 
ST: urn:schemas-upnp-org:device:MediaServer:4
USN: uuid:550e8400-e29b-11d4-a716-446655440000::urn:schemas-upnp-org:device:MediaServer:4
Content-Length: 0
EXT: 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T22:13:03.437

问题是关于 TCP/UDP 通信的一般原则，而不是关于 SSDP 的细节。如果控制器作为 UDP 网络客户端打开一个到特定远程地址的套接字（无论是多播还是单播），则本地地址是适用的本地网络适配器地址和**一些**端口号，由操作系统分配。它看起来是随机的，但操作系统会仔细分配它以管理使用同一网络适配器的所有应用程序的唯一性。在 Wireshark 中，您会看到如下内容：

```
IP, Src: 192.168.1.40 Dst: 239.255.255.250
UDP, Src Port: 42578 Dst Port: 1900 
```

`192.168.1.40`控制器的（传出）网络地址在哪里。设备必须响应`192.168.1.40:42578`。UDP/IP 堆栈实现为您提供了该元组。

我建议阅读[UPnP 设备架构文档](http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.1.pdf)。第 1 章是关于 SSDP 的全部内容，也正是您要问的部分：发现、广告和搜索。

**添加代码后编辑：**

我没有看到任何“服务器”代码，任何`bind()`. 您正在尝试使用相同的描述符进行发送和接收。此外，您正在使用`read()`which 是*连接*资源的通用 POSIX 函数（当描述符是持久的时）。一般来说，在我看来，您以 TCP 客户端为例，只是更改了协议。它不适用于UDP。要接收 UDP 数据包，您必须在您身边设置一个服务器。UDP 不知道某个数据包是否是对某个其他数据包的“响应”，就像 TCP 一样。UDP 是无*连接*的，但你应该已经知道了。

我建议阅读*通用*UDP 原理，尝试在 UDP 中实现非常简单的回显服务器（[随机美观的起点](http://www.abc.se/~m6695/udp.html)），然后在其上堆积 SSDP 多播。

# javascript - THREE.js 中的多个 .obj 模型并检测点击的对象

> ID：13382470
> 
> 赞同：1
> 
> 时间：2012-11-14T16:04:05.890
> 
> 标签：javascript, webgl, three.js

我一直在按照[这个](http://mrdoob.github.com/three.js/examples/webgl_loader_obj.html)示例使用 three.js 加载 .obj 模型。因为我需要加载多个模型，所以我尝试了这个

```
loader.addEventListener( 'load', function ( event ) {

var object = event.content;

object.position.y = - 80;
scene.add( object );

});
loader.load( 'obj/model1.obj' );
loader.load( 'obj/model2.obj' ); 
```

首先：我不知道这是否是正确的方法，因为我搜索但没有找到任何加载多个 .obj 模型的教程。

第二：我希望能够在屏幕上点击不同的模型。我试过[这个](http://mrdoob.github.com/three.js/examples/canvas_interactive_cubes.html)似乎对我不起作用。对此有何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:58:35.947

此示例向您展示了加载多个模型的模式：

[http://mrdoob.github.com/three.js/examples/webgl_loader_json_objconverter.html](http://mrdoob.github.com/three.js/examples/webgl_loader_json_objconverter.html)

关于检测点击的对象，根据您的型号，您可能需要将`recursive`标志设置为`true`：

```
ray.intersectObjects( objects, true ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:24:21.000

好吧，由于您没有提供足够的代码来完全解释您的问题，我猜想对于第二部分，您必须确保将对象放入对象数组中，例如：

```
var objects = []; 
```

初始化你做的对象后：

```
objects.push( object ); 
```

现在您有一个数组，您可以在其中检查实现 THREE.Ray 后相交的对象。

# python - 基于字典内的值的所有可能的字典组合

> ID：13382474
> 
> 赞同：3
> 
> 时间：2012-11-14T16:04:19.743
> 
> 标签：python, combinations, itertools

我想根据其中的值生成使用字典的所有可能方式。为了用代码解释，我有：

```
a = {'name' : 'a', 'items': 3}
b = {'name' : 'b', 'items': 4}
c = {'name' : 'c', 'items': 5} 
```

我希望能够从这些字典中准确地挑选（比如说）7 个项目，以及我能做到的所有可能的方式。

所以：

```
x = itertools.product(range(a['items']), range(b['items']), range(c['items']))
y = itertools.ifilter(lambda i: sum(i)==7, x) 
```

会给我：

```
(0, 3, 4)
(1, 2, 4)
(1, 3, 3)
... 
```

我真正想要的是：

```
({'name' : 'a', 'picked': 0}, {'name': 'b', 'picked': 3}, {'name': 'c', 'picked': 4})
({'name' : 'a', 'picked': 1}, {'name': 'b', 'picked': 2}, {'name': 'c', 'picked': 4})
({'name' : 'a', 'picked': 1}, {'name': 'b', 'picked': 3}, {'name': 'c', 'picked': 3})
.... 
```

关于如何干净地做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:34:33.723

这里是

```
import itertools
import operator

a = {'name' : 'a', 'items': 3}
b = {'name' : 'b', 'items': 4}
c = {'name' : 'c', 'items': 5}

dcts = [a,b,c]

x = itertools.product(range(a['items']), range(b['items']), range(c['items']))
y = itertools.ifilter(lambda i: sum(i)==7, x)
z = (tuple([[dct, operator.setitem(dct, 'picked', vval)][0] \
       for dct,vval in zip(dcts, val)]) for val in y)
for zz in z:
    print zz 
```

您可以对其进行修改以创建字典的副本。如果每次迭代都需要一个新的 dict 实例，则可以将`z`line 更改为

```
z = (tuple([[dct, operator.setitem(dct, 'picked', vval)][0] \
      for dct,vval in zip(map(dict,dcts), val)]) for val in y) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:44:49.983

简单的方法是生成新的字典：

```
names = [x['name'] for x in  [a,b,c]]
ziped = map(lambda x: zip(names, x), y)
maped = map(lambda el: [{'name': name, 'picked': count} for name, count in el],
            ziped) 
```

# javascript - 如何处理 jeditable 字段上的 url 链接？

> ID：13382482
> 
> 赞同：0
> 
> 时间：2012-11-14T16:04:51.920
> 
> 标签：javascript, jquery, jquery-ui, jeditable

我有如下可编辑的文本字段。

如何处理文本中的链接。现在，当我单击链接时，它开始编辑它而不是打开链接。

![在此处输入图像描述](../Images/06f20bd7a69485ae713fb5a08ff8d2be.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:00:44.320

没有一个工作示例很难说，但您可以尝试覆盖 jeditable 的点击行为，如下所示：

```
$("#yourEditable a").click(function(e) {
    e.stopPropagation();
    window.open($(this).attr("href"));
}); 
```

# android - 如何保护我的应用程序联系人，如 Facebook

> ID：13382498
> 
> 赞同：7
> 
> 时间：2012-11-14T16:05:41.783
> 
> 标签：android, facebook, contactscontract

当您尝试从设备检索联系人时，您通常会获得由除 Facebook 之外的所有应用程序创建的联系人。这个[问题](https://stackoverflow.com/questions/6038290/cannot-find-facebook-contacts-in-rawcontacts)描述了它。

那么，当我通过我的应用程序（使用 ContactsContract？）存储联系人时，我需要做什么，以便其他应用程序无法通过 ContactsContract 检索它..但它们仍然可用于设备联系人应用程序.. . 还是我选择的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:35:33.430

Facebook 联系人使用不同的联系人 API 实现进行同步。谷歌曾经为此提供一个特例，但现在不再这样做了。支持它的不同硬件制造商针对此特定用途定制他们的联系人应用程序。这就是为什么 Facebook 联系人同步功能适用于 Nexus 系列以外的大多数手机的原因。这些是私有实现，但如果您愿意对大量混淆代码进行排序，我敢肯定可以进行逆向工程。

# php - 从 php 参数到 .net 的肥皂调用未通过

> ID：13382502
> 
> 赞同：0
> 
> 时间：2012-11-14T16:05:47.650
> 
> 标签：php, .net, web-services, soap

我试图让 php 只是简单地将参数传递给 .net Web 服务，但是它从不将参数添加到调用中，但它确实调用了函数。

这是php：

```
$client = new SoapClient("example.com/page.asmx?WSDL");
$header = new SoapHeader('example.com/', 'UserCredentials', 
    array(
        'userName' => "cory", 
        'password' => "test", 
    )
);
$client->__setSoapHeaders(array($header));

print_r($client->add("test1234")); 
```

这是.net

```
[WebMethod]
[SoapHeader( "consumer", Required = true )]
public string add( string id )
{
    if( id == null || id != "test1234" ) {
       return "ID Invalid: " + consumer.ToString() + ":::" + id;
    }
    return "good";
}

public class UserCredentials : System.Web.Services.Protocols.SoapHeader
{
    public string userName;
    public string password;

    public override string ToString()
    {
        return userName + ":" + password;
    }
} 
```

每当我运行它时，它都会打印

```
stdClass Object ( [addResult] => ID Invalid: cory:test::: ) 
```

因此凭据正确传递，但值永远不会成功。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T09:30:32.690

我认为您必须为参数使用关联数组：

```
array("id" => "test1234") 
```

所以你的肥皂电话：

```
print_r($client->add(array("id" => "test1234")); 
```

[文档](http://php.net/manual/fr/soapclient.soapcall.php#110390)PHP.NET：http://php.net/manual/fr/soapclient.soapcall.php#110390

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:26:30.533

.NET 根本无法正确执行 SOAP。我不再有权访问代码，但我相信您需要做一些荒谬的事情，例如将您的属性包装在另一个关联数组中，并放在名为“参数”的键下。

[这是我回答的问题，使我的应用程序正常工作。](https://stackoverflow.com/questions/8263557/how-is-php-5-3-soap-request-formed)

# java - hdiv 配置

> ID：13382503
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:05:50.053
> 
> 标签：java, struts2, hdiv

如果有人将 hdiv 2.0.4 与 struts 2.0.11 集成以实现安全完整性，请帮助我进行配置。我已经成功集成和配置它，并且能够在我的 tomcat6 上成功部署。

现在，我可以打开我的网络应用程序的欢迎/登录页面。当我输入登录信息时，将调用该操作，然后我得到空指针异常。请帮我消除这些异常。

> 2012 年 11 月 14 日下午 5:49:03 org.apache.catalina.core.StandardWrapperValve 调用严重：Servlet.service() 的 servlet 默认在 org.hdiv.util.RequestUtilsHDIV.composeURL(RequestUtilsHDIV. java:108) at org.hdiv.util.RequestUtilsHDIV.addHDIVParameterIfNecessary(RequestUtilsHDIV.java:59) at org.hdiv.dispatcher.HDIVServletRedirectResult.doExecute(HDIVServletRedirectResult.java:122) at org.apache.struts2.dispatcher.StrutsResultSupport.execute (StrutsResultSupport.java:178) 在 org.hdiv.dispatcher.HDIVServletActionRedirectResult.execute(HDIVServletActionRedirectResult.java:200) 在 com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:33:56.593

HDIV 的过滤器似乎未处理该请求。所有请求都必须经过 HDIV 的过滤器处理后才能在视图层中使用。

# java - 使用大量数据的 Swing 应用程序

> ID：13382511
> 
> 赞同：0
> 
> 时间：2012-11-14T16:06:26.863
> 
> 标签：java, image, swing, jar, embedded-resource

我开发了一个显示图像的摇摆应用程序，所以我有大量图像（超过 1500 个），我在问将这些图像添加到摇摆项目的最佳方法是什么，是否只是将图像插入特定的包，还是添加包含图像的 zip 文件更好，或者...？？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:16:50.977

这里的“正确”答案取决于您打算如何处理这些图像。如果您将它们用作图标，您可能希望将它们外部化为 zip 文件，甚至是应用程序随附的目录结构，以便在您发现需要时将它们换出。zip 文件很容易从代码中访问，您甚至可以像 java 源/包结构一样组织它，并将其放在类路径中，这样您就可以使用`getClass().getResourceAsStream("whatever")`. 这样做的好处是不会将实际源代码与图像等资源文件混为一谈。

# php - 如何将 XML 发送到 SOAP Web 服务？

> ID：13382512
> 
> 赞同：0
> 
> 时间：2012-11-14T16:06:29.810
> 
> 标签：php, xml, soap, service, web

我使用 SOAP UI 来测试我的实现，它在那里工作。但是，如果没有 SOAP UI 在 php 环境中，我不知道如何做到这一点。

我目前有 php 代码从 MySQL 数据库中提取数据并输出格式良好的 XML，但我不知道如何将此 XML 输出发送到要处理的 Web 服务。

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:08:13.970

您不必创建自己的 SOAP XML。有一个非常好的 SOAP 扩展可用，您可以在其中使用服务 WSDL 文件创建一个 SoapClient。

[http://ch1.php.net/soap](http://ch1.php.net/soap)

如果真的只是发送数据，请使用[curl](http://ch1.php.net/curl)。

配置示例：[如何通过 Curl 和 PHP 发送 SOAP XML？](https://stackoverflow.com/questions/3006977/how-can-i-send-soap-xml-via-curl-and-php)

# vba - 匹配 \d 和 \. 在正则表达式中

> ID：13382513
> 
> 赞同：0
> 
> 时间：2012-11-14T16:06:36.430
> 
> 标签：vba, ms-word

我正在尝试将浮点数的任何组合与 Microsoft Word 内的 VBA 中的正则表达式进行匹配。

例子：

```
<text="">
<text="1">
<text="2">
<text="3">
<text="3.5">
<text="4">
<text="44"> 
```

我尝试了以下模式：

```
regex.Pattern = "<text=" & Chr(34) & "\d*\.*\d*" & Chr(34) & ">"
regex.Pattern = "<text=" & Chr(34) & "[\d\.]*" & Chr(34) & ">" 
```

有趣的是，这些模式都不匹配 44。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:23:19.167

让我们分解一下。浮点数有两部分，整数和小数。格式上有一些选择：

这是一个非常常见的符号模式：

```
regex.Pattern = "<text=" & Chr(34) & "(-?\d+(\.\d+)?)?" & Chr(34) & ">" 
```

一些选择：

*   你想支持省略不可分割的部分吗？（例如'.001'）在第一个数字匹配中
    使用`*`而不是：`+``(-?\d*(\.\d+)?)?`

*   你想支持前导零吗？（例如000。）
    这会更棘手:)

*   你想支持没有小数部分的小数点吗？（例如'12.'）
    然后`?`在小数点后添加匹配：`(-?\d*(\.?\d+)?)?`

*   小数部分是强制性的吗？
    删除最后一个`?`：`(-?\d*(\.?\d+))?`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:16:25.183

从[正则表达式测试器](http://www.regextester.com/)站点，

正整数 ---`^\d+$`
负整数 ---`^-\d+$`
整数 ---`^-{0,1}\d+$`
正数 ---`^\d*\.{0,1}\d+$`
负数 ---`^-\d*\.{0,1}\d+$`
正数或负数 -`^-{0,1}\d*\.{0,1}\d+$`

测试空结果是否有效，并假设所有正数，你最终会得到

```
regex.Pattern = "<text=" & Chr(34) & "\d*\.{0,1}\d*" & Chr(34) & ">" 
```

# alloy - 集合的多重性

> ID：13382515
> 
> 赞同：0
> 
> 时间：2012-11-14T16:06:39.147
> 
> 标签：alloy

鉴于以下定义：

```
sig Name,Addr{}
sig Book{ addr : Name -> some Addr}

Let Name = { (J),(t), (b)}
Addr = {(1), (2)}
Book = {(bb0)} 
```

我很好奇在关系`addr : Name -> some Addr`中，第二列中名称的多重性是什么。此外，以下是否可能

```
addr = {(bbo, j , 1), (bb0, j, 2)} 
```

我试图了解 j 是否可以在第二列中多次出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:51:57.050

简短的回答是肯定的，但我只是通过尝试才弄清楚，你必须正确定义你的模型：

```
abstract sig Name,Addr{}
abstract sig Book{ addr : Name -> some Addr}

one sig J,t,b extends Name {}
one sig a1,a2 extends Addr {}
one sig bb0 extends Book {}

run { #addr > 3 } for 4 int 
```

执行它并使用求值器进行求值，`addr`你会看到它包含超过 3 个元素，其中两个具有相同的`Name`原子。

# javascript - 使用 JavaScript 获取滚动条宽度

> ID：13382516
> 
> 赞同：148
> 
> 时间：2012-11-14T16:06:41.407
> 
> 标签：javascript

以下 HTML 将在 div.container 的右侧内边缘显示一个滚动条。

是否可以确定该滚动条的宽度？

```
<div class="container" style="overflow-y:auto; height:40px;">
  <div class="somethingBig"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：286
> 
> 时间：2012-11-14T16:25:54.227

这个函数应该给你滚动条的宽度

```
function getScrollbarWidth() {

  // Creating invisible container
  const outer = document.createElement('div');
  outer.style.visibility = 'hidden';
  outer.style.overflow = 'scroll'; // forcing scrollbar to appear
  outer.style.msOverflowStyle = 'scrollbar'; // needed for WinJS apps
  document.body.appendChild(outer);

  // Creating inner element and placing it in the container
  const inner = document.createElement('div');
  outer.appendChild(inner);

  // Calculating difference between container's full width and the child width
  const scrollbarWidth = (outer.offsetWidth - inner.offsetWidth);

  // Removing temporary elements from the DOM
  outer.parentNode.removeChild(outer);

  return scrollbarWidth;

} 
```

这里的基本步骤是：

1.  创建隐藏的 div（外部）并获取它的偏移宽度
2.  使用 CSS 溢出属性强制滚动条出现在 div（外部）中
3.  创建新的 div（内部）并附加到外部，将其宽度设置为 '100%' 并获取偏移宽度
4.  根据收集的偏移量计算滚动条宽度

这里的工作示例：http: [//jsfiddle.net/slavafomin/tsrmgcu9/](http://jsfiddle.net/slavafomin/tsrmgcu9/)

**更新**

如果您在 Windows（地铁）应用程序上使用它，请确保将“外部”div的[-ms-overflow-style](http://msdn.microsoft.com/en-us/library/windows/apps/hh441298.aspx)`scrollbar`属性设置为，否则将无法正确检测到宽度。（代码更新）

**更新 #2** 这不适用于具有默认“滚动时仅显示滚动条”设置（优胜美地及以上）的 Mac OS。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2016-11-12T23:11:51.077

// **offsetWidth**包括滚动条的宽度，而**clientWidth**不包括。通常，它等于 14-18px。所以：

```
 var scrollBarWidth = element.offsetWidth - element.clientWidth; 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-07-18T07:34:03.490

我认为这将是简单而快速的 -

```
var scrollWidth= window.innerWidth-$(document).width() 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-11-14T16:09:05.283

如果孩子占据了容器的全部宽度，不包括滚动条（默认），那么您可以减去宽度：

```
var child = document.querySelector(".somethingBig");
var scrollbarWidth = child.parentNode.offsetWidth - child.offsetWidth; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-02-20T12:29:03.957

如果你使用 jquery。***ui***，试试这个代码：

```
$.position.scrollbarWidth() 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-11-25T08:06:27.883

这是使用 jQuery 的简单方法。

```
var scrollbarWidth = jQuery('div.withScrollBar').get(0).scrollWidth - jQuery('div.withScrollBar').width(); 
```

基本上我们从总宽度中减去可滚动宽度，这应该提供滚动条的宽度。当然，您希望缓存 jQuery('div.withScrollBar') 选择，这样您就不会重复该部分。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-09-09T23:45:04.207

假设容器只在页面上一次并且您使用的是 jQuery，那么：

```
var containerEl = $('.container')[0];
var scrollbarWidth = containerEl.offsetWidth - containerEl.clientWidth; 
```

另请参阅[此答案](https://stackoverflow.com/questions/23494468/detect-different-kind-of-scrollbars-eg-normal-hidden-osx/32490737#32490737)以获取更多详细信息。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-03-19T15:10:08.840

我使用下一个函数来获取滚动条的高度/宽度：

```
function getBrowserScrollSize(){

    var css = {
        "border":  "none",
        "height":  "200px",
        "margin":  "0",
        "padding": "0",
        "width":   "200px"
    };

    var inner = $("<div>").css($.extend({}, css));
    var outer = $("<div>").css($.extend({
        "left":       "-1000px",
        "overflow":   "scroll",
        "position":   "absolute",
        "top":        "-1000px"
    }, css)).append(inner).appendTo("body")
    .scrollLeft(1000)
    .scrollTop(1000);

    var scrollSize = {
        "height": (outer.offset().top - inner.offset().top) || 0,
        "width": (outer.offset().left - inner.offset().left) || 0
    };

    outer.remove();
    return scrollSize;
} 
```

这种基于 jQuery 的解决方案适用于 IE7+ 和所有其他现代浏览器（包括滚动条高度/宽度将为 0 的移动设备）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-26T17:17:35.663

[这](http://jdsharp.us/jQuery/minute/calculate-scrollbar-width.php)对我有用..

```
 function getScrollbarWidth() { 
    var div = $('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>'); 
    $('body').append(div); 
    var w1 = $('div', div).innerWidth(); 
    div.css('overflow-y', 'scroll'); 
    var w2 = $('div', div).innerWidth(); 
    $(div).remove(); 
    return (w1 - w2); 
} 
```

# jquery - 如何增加整个网站的字体大小

> ID：13382519
> 
> 赞同：0
> 
> 时间：2012-11-14T16:06:50.667
> 
> 标签：jquery, css

我有一个网站，其中包含所有元素`<h1>`-`<sup>`每个元素都有自己的字体大小，（大部分以像素为单位）

这个网站是客户端的集合，每个客户端都有自己的子域。虽然整个网站的基本代码、图像、css 和 js 都是相同的，但每个子域都有自己特定的 theme.css - 只是使用的一个 css 文件应用客户特定的设计。

现在，一位客户希望在其子域中使用更大的字体。所以我认为这只是添加的问题

```
*
{
    font-size: ...
} 
```

现在，我不能在那里指定一个大小.. 我可以列出所有元素并单独设置字体大小（这将是 B 计划） - 但是有没有办法可以设置所有元素以增加它们各自的字体大小？

* * *

**编辑**
如果 css 无法做到这一点，我可以用 jquery 来做到这一点。我想。
另外，更改现有的 px 大小不是一个选项，因为这是遗留代码，我无权访问基本的 css 文件。 . 只是`subdomain.css`和`subdomain.js`文件..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:21:51.027

如果您将所有元素更改为使用 em 或 percent 而不是像素，您可以更改主体的基本字体大小，但由于它们以像素为单位指定，您不能这样做。

解决方案 1：
将所有以像素为单位设置的字体大小更改为相应的 em 或百分比大小，并设置更大的正文大小。这个工具可以帮助你：http: [//pxtoem.com](http://pxtoem.com)

例子：

```
body {
  font-size: 16px;
}

p {
  font-size: 1em;
} 
```

解决方案 2：
将所有具有相同大小的元素分组并覆盖它们。

例子：

```
div,
span,
p {
  font-size: 12px;
}

sub,
sup {
  font-size: 10px;
} 
```

# google-play - 按应用版本过滤 Android 开发者控制台上的崩溃/ANR

> ID：13382522
> 
> 赞同：2
> 
> 时间：2012-11-14T16:06:59.770
> 
> 标签：google-play

有没有办法按应用版本过滤 Android 开发者控制台上的崩溃/ANR？现在，它们不仅按类型错误地分组，而且还混合了所有类型的应用程序版本。

# c# - MVC 控制器初始化程序被多次调用

> ID：13382523
> 
> 赞同：1
> 
> 时间：2012-11-14T16:07:01.983
> 
> 标签：c#, asp.net-mvc, unity-container

**问题：**

当我加载我的应用程序时，我试图多次初始化主控制器，我想知道为什么......这让我抓狂检查，我会同意的！

MVC3 C# 使用 Unity 作为 IoC

*控制器：*

```
 public ValorationController(IServiceProxy serviceProxy, 
                                IHvmService hvmService, 
                                IFamilyGroupService familyGroupService, 
                                IClientService clientService,
                                IUserService userService,
                                IOfficeService delegationService,
                                ISocietyService societyService,
                                IFamilyService familyService,
                                IArticleService articleService,
                                IArticleFinishedService articleFinishedService,
                                IOrderService orderService)
        : base(serviceProxy)
    {
        FamilyService = familyService;
        ArticleService = articleService;
        HvmService = hvmService;
        FamilyGroupService = familyGroupService;
        ClientService = clientService;
        UserService = userService;
        DelegationService = delegationService;
        SocietyService = societyService;
        ArticleFinishedService = articleFinishedService;
        OrderService = orderService;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:08:31.963

您的控制器将在涉及它的每个*请求上进行初始化。*

这是正常的，并且 IIS 是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:19:58.320

也很高兴知道每个`Unity` `Resolve`默认情况下都会创建一个新的`instance`. 如果你不希望这样，你应该提供一个`LifeTimeManager`

阅读 Microsoft 关于[了解 Lifetime Managers](http://msdn.microsoft.com/en-us/library/ff660872%28v=pandp.20%29.aspx)和[Using Lifetime Managers](http://msdn.microsoft.com/en-us/library/ff647854.aspx)的文章。

也许你想使用这样的东西：

```
// Register a default (un-named) type mapping with a singleton lifetime 
myContainer.RegisterType<IMyObject, MySingletonObject>(new ContainerControlledLifetimeManager());
// Following code will return a singleton instance of MySingletonObject// Container will take over lifetime management of the object
myContainer.Resolve<IMyObject>(); 
```

# java - 得到错误：在进行活动 MQ 连接时连接 ECONNREFUSED？

> ID：13382530
> 
> 赞同：0
> 
> 时间：2012-11-14T16:07:25.533
> 
> 标签：java, node.js, activemq

Activemq.xml 使用发现代理具有以下配置

```
 <transportConnector name="openwire" uri="tcp://localhost:61616" discoveryUri="multicast://default?group=TestPartition"/> 
```

我正在使用 node.js 的 stomp 模块。现在我需要连接到我的活动 mq 代理。没有得到如何使用配置的发现代理建立连接并得到以下错误

```
 error: Error: connect ECONNREFUSED
    at errnoException (net.js:769:11)
    at Object.afterConnect [as oncomplete] (net.js:760:19)error name: Error

events.js:71
    throw arguments[1]; // Unhandled 'error' event
               ^
Error: connect ECONNREFUSED
    at errnoException (net.js:769:11)
    at Object.afterConnect [as oncomplete] (net.js:760:19) 
```

早些时候我使用下面的配置（没有提到组）并且能够成功建立连接

```
 <transportConnector name="openwire" uri="tcp://localhost:61616" discoveryUri="multicast://default"/> 
```

我用来建立连接的代码

```
 var stomp = require("stomp");
    var  stompClient = new stomp.Stomp("localhost", 8161);
    var destHeaders = {
        destination: '/topic/testTopic',
        ack: 'acknowledgeResp'

    };
    client.connect();
    client.on('connected', function() {
        client.subscribe(destHeaders);
       }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:48:00.107

您正在尝试将 STOMP 客户端连接到 Openwire 传输连接器，这当然不会工作，因为它们是两种不同的协议。你需要为你的 STOMP 客户端配置一个 STOMP 传输连接器来连接。

```
 <transportConnector name="stomp" uri="stomp://localhost:61613"/> 
```

# entity-framework - 如何强制实体框架保存特定的日期时间精度

> ID：13382534
> 
> 赞同：0
> 
> 时间：2012-11-14T16:07:39.237
> 
> 标签：entity-framework, datetime

我想强制 EntityFramework 以秒精度保存日期。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:14:09.417

如果我理解您可以像这样设置您的日期时间字段：

```
obj.Field = DateTime.Now.AddDays(1).ToString("yyyy-MM-dd hh:mm:ss"); 
```

或者

```
obj.Field = dateTime.AddTicks( - (dateTime.Ticks % TimeSpan.TicksPerSecond)); 
```

# javascript - 在运行时将包添加到 dojo 配置

> ID：13382536
> 
> 赞同：6
> 
> 时间：2012-11-14T16:07:41.617
> 
> 标签：javascript, dojo

有没有办法可以将新包添加到 dojo 配置？我知道我可以这样做：加载 dojo.js 时添加包。

```
<script src='dojo_1.7.2/dojo/dojo.js' 
    data-dojo-config="async:true,isDebug:true,parseOnLoad:false,
      packages:[{name:'project1',location:'../../js/proj1'},
        {name:'common',location:'../../common'}]"></script> 
```

我希望能够在运行时添加新包。

**dojo.registerModulePath**确实在 dojo1.6 之前完成了这项工作（我认为），但现在在 1.7 中已弃用

我正在使用道场 1.7.2。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T19:03:49.527

您可以在加载后通过使用配置对象调用 require 添加额外的包。

```
Eg:

require({
    packages: [
        {"name": "myLib", "location": "release/myLib"}
    ]
}); 
```

但是，根据文档 ( [dojo/_base/config](http://dojotoolkit.org/api/dojo/_base/config) )，这将创建另一个 Dojo 实例。此外，这是**1.8**版代码；我认为它不适用于**1.7**。

我认为有可能将一个额外的对象推送到*dojoConfig*或*require.rawConfig*但加载器不会拾取这些对象。加载后似乎无法更改配置。

您可以将配置对象传递给要求，因此：

```
Eg.

dojoConfig.packages.push({"name": "myLib", "location": "release/myLib"});

require(dojoConfig, [...moduleIds...], function(...arguments...) {
}); 
```

这将适用于个人 require 但不会修改全局配置（因此在**define()或对****require()**的后续调用中不起作用）。同样，我在这里使用**1.8**但我认为它适用于**1.7**。

可能有另一种更简单的方法可以让其他人发现这项工作？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-26T09:43:33.297

Stephen Simpson 的解决方案似乎不适用于 dojo v1.13。尽管`basePath`项目路径以`/`. 我在控制台中也遇到了错误。

但是[文档](https://dojotoolkit.org/reference-guide/1.10/dojo/_base/config.html#finding-resources-in-non-standard-locations)还提到了`paths`对我有用的参数。在你的情况下：

```
require({paths:{"project1": "../../js/proj1", …}}); 
```

它可能对您有用，因为您使用的是相对路径，而我没有。

它曾经是`dojo.registerModulePath("myModule", "/path/goes/here");`。

# r - shapefile（R）中的只读数据槽？

> ID：13382549
> 
> 赞同：9
> 
> 时间：2012-11-14T16:08:34.797
> 
> 标签：r, geospatial, shapefile, rgdal

我有一些非常大的 shapefile。`SpatialPolygonsDataFrame`我可以使用`rgdal`函数将它们读入`readOGR`，但是每个文件都需要很长时间。我实际上只对插槽`data.frame`中显示的内容感兴趣。`@data`有没有办法只读取数据，跳过资源密集型多边形？

示例代码：

```
## State of Alabama census blocks (152 MB compressed, 266 MB uncompressed)
shpurl <- "http://www2.census.gov/geo/tiger/TIGER2011/TABBLOCK/tl_2011_01_tabblock.zip"
tmp    <- tempfile(fileext=".zip")
download.file(shpurl, destfile=tmp)
unzip(tmp, exdir=getwd())

## Read shapefile
nm  <- strsplit(basename(shpurl), "\\.")[[1]][1]
lyr <- readOGR(dsn=getwd(), layer=nm)

## Data I want
head(lyr@data) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T17:59:28.923

Shapefile 是复合文件，它们将其属性数据存储在扩展名为`*.dbf`. （参考[维基百科的 shapefile 文章](http://en.wikipedia.org/wiki/Shapefile)。）`dbf`后缀指的是[dBase 文件格式](http://en.wikipedia.org/wiki/Dbf)，可以通过包`read.dbf()`中的函数读取`foreign`。

所以，试试这个：

```
library(foreign)
df <- read.dbf("tl_2011_01_tabblock.dbf")
## And, more generally, read.dbf("path/to/shapefile/shapefile-name.dbf") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T06:41:21.367

```
 FileInputStream fis = new FileInputStream( "/folder/file.dbf" ); 
DbaseFileReader dbfReader =  new DbaseFileReader(fis.getChannel(),false, Charset.forName("ISO-8859-1"));

        while ( dbfReader.hasNext() )   {
          final Object[] fields = dbfReader.readEntry();

          Long field1 = (Long) fields[0];
          Long field2 = (Long) fields[1];
          System.out.println("DBF field "+i+" value is: " + fields[0]);
          System.out.println("DBF field 2 value is: " + field2);
        }
 dbfReader.close();
 fis.close(); 
```

# c# - 使用反射和 linq 到对象的数据表

> ID：13382553
> 
> 赞同：0
> 
> 时间：2012-11-14T16:08:41.520
> 
> 标签：c#, linq, reflection, datatable

我有一个这样的数据表

```
Name| Value
----|------
NA  |  VA
NB  |  VB
NC  |  VC1
NC  |  VC2
ND  |  VD1
ND  |  VD2 
```

和这样的课

```
Class NVMapping {
  List<string> NC { get; set; }
  List<string> ND { get; set; }
  string NA { get; set; }
  string NB { get; set; }
} 
```

如何使用 linq 或其他方式将数据表传输到这种类型？

我想我需要在这里强调一件事。这种映射在我的应用程序中会很多。

不知何故，我认为使用反射可以使这个函数通用来处理所有这些有点映射。

所以如果可能的话，我更喜欢使用反射来实现这一点的通用函数。

如果可能的话，将数据表转换为上述转换的对象会更好。

谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-14T15:01:15.220

我可以建议编写一个使用反射的通用方法。以下方法使用反射从 DataTable 中的 DataRow（或类的 List<>，DataTable 中的每个 DataRow 中的一个）填充类的公共属性，其中 ColumnName 与类中公共属性的名称完全匹配（大小写-敏感的）。如果 DataTable 具有与类中的属性不匹配的额外列，则它们将被忽略。如果 DataTable 缺少与类属性匹配的列，则该属性将被忽略并保留该类型的默认值（因为它是一个属性）。

```
    public static IList<T> DatatableToClass<T>(DataTable Table) where T : class, new()
    {
        if (!Helper.IsValidDatatable(Table))
            返回新列表<T>();

        类型 classType = typeof(T);
        IList<PropertyInfo> propertyList = classType.GetProperties();

        // 参数类没有公共属性。
        if (propertyList.Count == 0)
            返回新列表<T>();

        List<string> columnNames = Table.Columns.Cast<DataColumn>().Select(column => column.ColumnName).ToList();

        列表<T> 结果 = 新列表<T>();
        尝试
        {
            foreach（Table.Rows 中的 DataRow 行）
            {
                T 类对象 = 新 T();
                foreach（propertyInfo 属性在 propertyList 中）
                {
                    if (property != null && property.CanWrite) // 确保属性不是只读的
                    {
                        if (columnNames.Contains(property.Name)) // 如果属性是列名
                        {
                            if (row[property.Name] != System.DBNull.Value) // 不要复制 DBNull
                            {
                                对象属性值 = System.Convert.ChangeType(
                                        行[属性.名称]，
                                        property.PropertyType
                                    );
                                property.SetValue(classObject, propertyValue, null);
                            }
                        }
                    }
                }
                结果.添加（类对象）；
            }
            返回结果；
        }
        抓住
        {
            返回新列表<T>();
        }
    }

```

如果您有兴趣采用另一种方式，并从类的公共属性中填写 DataTable，我将在我的 C# 博客[CSharpProgramming.tips/Class-to-DataTable中介绍这一点以及更多内容](https://csharpcodewhisperer.blogspot.com/2013/07/class-to-datatable.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T16:20:29.157

这里是：

```
IEnumerable<DataRow> rows = table.AsEnumerable();
string naValue = null;
var naRow = rows.FirstOrDefault(r => r.Field<string>("Name") == "NA");
if(naRow != null)
    naValue = naRow.Field<string>("Value");
string nbValue = null;
var nbRow = rows.FirstOrDefault(r => r.Field<string>("Name") == "NB");
if(nbRow != null)
    nbValue = nbRow.Field<string>("Value");
NVMapping map = new NVMapping {
    NC = rows.Where(r => r.Field<string>("Name") == "NC")
        .Select(r => r.Field<string>("Value")).ToList(),
    ND = rows.Where(r => r.Field<string>("Name") == "ND")
        .Select(r => r.Field<string>("Value")).ToList(),
    NA = naValue,
    NB = nbValue
}; 
```

# excel - 在 3 个字段上分配百分比？

> ID：13382554
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:08:42.933
> 
> 标签：excel

我的电子表格中有 3 个单元格，其布局如下。这些值是动态的，但是我需要做的是在 3 个字段上拆分一个百分比，然后增加数字。

```
Total Staff Costs           £1,000.00
Total Hardware Costs        £0.00
Total Expenses              £400.00 
```

例如，上述费用总计 1400 英镑，但我需要在此基础上收取自己 10% 的时间，因此需要 140 英镑。

我不能只是把这 10% 分成 3 个字段，即。我不能只为每个字段添加 46.70 英镑，因为没有购买任何硬件，所以说它的 46.70 英镑会引发一些问题。我需要在每个人之间按比例分配它。

如何按比例将 X% 添加到字段中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:54:12.547

逻辑是否是确定每个字段的总数百分比。然后将该百分比乘以 10% 的总和

所以你有 3 个字段，总共 1400

所以 1000 / 1400 = .714286

所以 0 / 1400 = 0

所以 400/ 1400 = .0285714

现在将这些乘以总数

所以 1400 * .714286

所以 1400 * 0

所以 1400 * .0285714

这些应该总计到 10%

所以你的所有数据都在单元格 1、2、3 的 b 列中 将进入单元格 C1、C2、C3 的公式（假设你希望这些总计在下一列中）

```
=(B1/SUM($B:$B)) * (SUM($B:$B)*0.1) 'Cell C1
=(B2/SUM($B:$B)) * (SUM($B:$B)*0.1) 'Cell C2
=(B3/SUM($B:$B)) * (SUM($B:$B)*0.1) 'Cell C3 
```

# css - 移动浏览器的 * css 选择器有多慢？

> ID：13382556
> 
> 赞同：1
> 
> 时间：2012-11-14T16:09:02.020
> 
> 标签：css, performance, mobile

`*`移动浏览器上的 CSS 选择器有多慢？

我听说出于速度原因不应该使用它。然而，我正在移动优化网站，此时我无法更改源代码。我需要设置`float:none, width:auto, height:auto, position:static`很多元素。如果我不使用`*`我的选择器列表会变得很长。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:18:15.550

有一项研究对此进行了测试。我不再拥有该链接，但可以说，由于您可能知道的所有原因（每个元素都需要评估），它会减慢速度。

您可能也已经知道，围绕选择和设置的不同重置仅选择和设置那些需要“重置”的元素。有些人，比如我自己，只是将元素设置为我们希望它们成为的样子，而不是大刀阔斧的改变。

当然，像所有事情一样，自己测试可能是最好的方法。

# ruby-on-rails - 如何使用 RSpecs valid_session？

> ID：13382559
> 
> 赞同：5
> 
> 时间：2012-11-14T16:09:08.807
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我在 RSpec 中找不到 valid_session 的示例，现在我所有的脚手架测试在添加授权后都被破坏了。

通过 Michael Hartl 的 Rails 教程，我正在使用[此处](http://ruby.railstutorial.org/chapters/sign-in-sign-out)描述的身份验证，除了我需要登录所有页面并使用“skip_before_filter”进行登录等。

我添加了一个用户固定装置，我已经验证它已加载：

```
userexample:
  id: 1
  name: Example Name
  email: examplename@example.com
  password_digest: $2a$10$NuWL8f2X0bXaCof3/caiiOwlF2rago7hH10JECmw1p75kEpf0mkie
  remember_token: YXjPrFfsK8SFQOQDEa90ow 
```

然后在控制器规范中

```
def valid_session
    { remember_token: "YXjPrFfsK8SFQOQDEa90ow" }
end 
```

会话助手的代码

```
module SessionsHelper
def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
end

def signed_in?
    return !current_user.nil?
end

def sign_out
    self.current_user = nil
    cookies.delete(:remember_token)
end

def current_user=(user)
    @current_user = user
end

def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end
end 
```

我是否按预期使用了valid_session？在没有使用 sign_in 显式登录用户的情况下，是否会在会话中提供 remember_token？这可以通过其他方式解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T22:37:40.087

这应该对你有用......

```
def valid_session
  controller.stub!(:signed_in?).and_return(true)
end 
```

...基于对我有用的类似内容：D

```
def valid_session
  controller.stub!(:authorize).and_return(User)
end 
```

# .net - 依赖注入是一个横切关注点吗？

> ID：13382560
> 
> 赞同：1
> 
> 时间：2012-11-14T16:09:11.707
> 
> 标签：.net, design-patterns, architecture, n-layer

我正在设计一个应用程序并且我使用的是 n 层架构，我有：

```
- a presentation layer
- a domain bussines layer
- a data acccess layer
- a cross-cutting layer 
```

然后我试图将我的项目与特定的 DI 框架隔离开来，即创建我自己的 IContainer 接口并确保我的组件仅依赖于该接口。

然后我有2个问题。

1-这是最后一个好习惯吗？

2 - （更重要的是）依赖注入是一个横切关注点吗？那就是我可以将DI相关的组件放在横切层吗？如果答案不是哪里可以安装这些组件。

我问这个是因为当我深入研究关于横切关注点的架构设计指南时，他们通常会提到：

```
- Security
- Validation
- Configuration handling
- Exception handling
- Loggings
- Caching 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:11:13.830

您是否计划更改 DI 框架？如果不是，那么抽象它们就没有意义了。

DI 不是横切关注点。它是一种构造对象和它们之间的依赖关系的技术。

# c++ - 过零返回高值

> ID：13382564
> 
> 赞同：3
> 
> 时间：2012-11-14T16:09:20.227
> 
> 标签：c++, matlab, signal-processing

我有一个包含数据块的二维数组，我创建了一个函数来计算每个值过零的次数。

我正在使用 MatLab 并尝试转换代码，MatLab 为过零返回 287 个值，在 C++ 代码中，这些值非常高，我似乎无法弄清楚原因。

这是 Matlab 代码：

```
function f = zerocross(vector)

% This function simply reports the number of times
% that the input vector crosses the zero boundary

len = length(vector);
currsum = 0;
prevsign = 0;

for i = 1:len
currsign = sign(vector(i));
if (currsign * prevsign) == -1 
  currsum = currsum + 1;
end
if currsign ~= 0
  prevsign = currsign;
end
end

f = currsum; 
```

还有我的 C++ 代码：

```
vector<iniMatrix> Audio::filter(vector<iniMatrix>&blocks, double sumThres, double ZeroThres)
{
 double totalSum = this->width * sumThres;
 double totalZero = this->width * ZeroThres;

int currZero = 0;
int currsum = 0;

int prevsign = 0;

for(unsigned i=0; (i < 287); i++)
{
    for(int j=0; (j < blocks.size()); j++)
    {
        currZero = sign<double>(blocks[j][i]);

        if(currZero * prevsign == -1)
        {
            currsum++;
        }

        if(currZero != 0)
        {
            prevsign = currZero;
        }
    }
    cout << currsum << endl;
}

return blocks; 
```

签到功能：

```
int sign(T n)
{
  if(n < 0) return -1;
  if(n > 0) return 1;
  return n;
} 
```

我应该（和 matlab 给出）的值是：

6, 6, 7, 9, 9, 10 .., 11, ..., 9, ...

我得到的值：

212, 337, 118, 84, ...., 348, ..., 92

有人有想法么？

编辑：

这就是我现在的循环方式：

```
for(int q=0; (q < 287); q++)
{
    for(unsigned i=0; (i < blocks.size()); i++)
    {
        for(unsigned j=0; (j < blocks[0].size()); j++)
        {
            currZero = sign<double>(blocks[i][j]);
            cout << currZero << endl;
        }
        cout << endl << endl << endl;

    }
    //cout << currZero << endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-10T18:54:18.023

传统上，在 Matlab 中大量使用 for 循环通常是一个坏主意，因为 Matlab 的 JIT 编译器不是（或不是）非常快（至少与本机 C 代码相比没有）。我猜您编写 C++ 代码是为了加快计算速度，但也许另一种方法是使用“matlab 方式”编写代码：

```
vector = rand(1e7,1)-0.1;
zero_crossings = sum(diff(array<0)~=0); 
```

虽然我刚刚在 Matlab 2015b 上进行了测试，但在矢量化代码中的速度只有大约两倍：

```
function test()

    function currsum = zerocross(vector)

        % This function simply reports the number of times
        % that the input vector crosses the zero boundary

        len = length(vector);
        currsum = 0;
        prevsign = 0;

        for i = 1:len
            currsign = sign(vector(i));
            if (currsign * prevsign) == -1
                currsum = currsum + 1;
            end
            if currsign ~= 0
                prevsign = currsign;
            end
        end
    end

    function f = zerocross_vectorized(array)
        f = sum(diff(array<0)~=0);
    end

    array = rand(1e5,1e3)-0.1;

    % test for loop
    t = tic;
    crossings = nan(1,size(array,2));
    for column = 1:size(array,2)
        vector = array(:,column);
        crossings(column) = zerocross(vector);
    end
    disp(crossings(1:5))
    fprintf(1,'For loop: Calculated in %0.4f seconds\n',toc(t));

    % test vectorized
    t = tic;
    crossings = zerocross_vectorized(array);
    disp(crossings(1:5))
    fprintf(1,'Vectorized: Calculated in %0.4f seconds\n',toc(t));

end 
```

结果是：

```
>> zerocross
       18208       17884       17902       17734       17988

For loop: Calculated in 1.7186 seconds
       18208       17884       17902       17734       17988

Vectorized: Calculated in 0.9695 seconds 
```

# c# - 在 EmguCV 的 Imagebox 中加载图像，该死的 IImage

> ID：13382565
> 
> 赞同：0
> 
> 时间：2012-11-14T16:09:20.527
> 
> 标签：c#, emgucv

我只能通过在运行时右键单击选择“加载图像”选项来在控件上加载图像。

我想知道是否有一种方法可以通过专门传递 Image 对象来加载它，因为当我尝试像往常一样进行操作时，设置它`imagebox.Image = (...)` 会产生错误，因为它`imagebox.Image`是一个“IImage”对象。

有小费吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-05T15:13:34.640

你可以试试这个：

```
Image<BGR, Byte> rstImg = new Image<BGR, Byte>(imageBox.Image.Bitmap);
imageBox.Image = rstImg; 
```

# unix - Unix中两个文件的左外连接

> ID：13382566
> 
> 赞同：28
> 
> 时间：2012-11-14T16:09:22.767
> 
> 标签：unix, join

我需要在两个字段上加入两个文件。但是，即使连接失败，我也应该检索文件 1 中的所有值，就像左外连接一样。

文件 1：

```
01|a|jack|d
02|b|ron|c
03|d|tom|e 
```

文件 2：

```
01|a|nemesis|f
02|b|brave|d
04|d|gorr|h 
```

输出：

```
01|a|jack|d|nemesis|f
02|b|ron|c|brave|d
03|d|tom|e|| 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-14T16:23:38.170

它是`join -t '|' file1 file2 -a1`

使用的选项：

**t**：分隔符。
**a**：决定必须打印未配对行的文件编号。

`join -t '|' file1 file2 -a2`会做一个**右外连接**。

**样品运行**

```
 [aman@aman test]$ cat f1  
    01|a|jack|d

    02|b|ron|c

    03|d|tom|e
    [aman@aman test]$ cat f2
    01|a|nemesis|f

    02|b|brave|d

    04|d|gorr|h
    [aman@aman test]$ join -t '|'  f1 f2 -a1
    01|a|jack|d|a|nemesis|f

    02|b|ron|c|b|brave|d

    03|d|tom|e 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-10-14T17:41:50.407

要准确地完成问题的要求比以前的答案要复杂一些，并且需要这样的东西：

```
sed 's/|/:/2' file1 | sort -t: >file1.tmp
sed 's/|/:/2' file2 | sort -t: >file2.tmp
join -t':' file1.tmp file2.tmp -a1 -e'|' -o'0,1.2,2.2' | tr ':' '|' 
```

Unix join 只能连接单个字段 AFAIK，因此您必须使用使用不同分隔符的文件来“*在两个字段上连接两个文件*”，在这种情况下是前两个字段。我将使用冒号**:**，但是如果**:**存在于您需要使用其他内容的任何输入中，例如制表符可能是生产使用的更好选择。我还对新复合字段 的输出进行了重新排序`sort -t:`，对于示例输入文件来说，这没有区别，但对于现实世界的数据来说会有所不同。`sed 's/|/:/2'`用冒号替换文件中每一行上第二次出现的管道。

文件 1.tmp

```
01|a:jack|d
02|b:ron|c
03|d:tom|e 
```

文件 2.tmp

```
01|a:nemesis|f
02|b:brave|d
04|d:gorr|h 
```

现在我们使用`join`过滤后的输出`tr`和一些更高级的选项：

*   `-t':'`指定临时冒号分隔符
*   `-a1`左外连接
*   `-e'|'`指定失败连接的替换字符串，基本上是最终输出分隔符 N-1 倍，其中 N 是 file2.tmp 中连接到冒号右侧的管道分隔字段数。在这种情况下 N=2 所以一个管道字符。
*   `-o'0,1.2,2.2'`指定输出格式：
    *   `0`加入字段
    *   `1.2`file1.tmp 的字段 2，即冒号右边的所有内容
    *   `2.2`file2.tmp 的字段 2
*   `tr ':' '|'`最后，我们将冒号转换回管道以进行最终输出。

输出现在与之前的答案没有匹配的问题样本输出完全匹配：

```
01|a|jack|d|nemesis|f
02|b|ron|c|brave|d
03|d|tom|e|| 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-08T15:19:11.780

我最近遇到了一个非常简单的输入文件的问题，只有一个字段，因此没有考虑分隔符。

```
cat file1 > k1
cat file2 >> k1
sort k1 | uniq -c | grep "^.*1 "  
will give you lines that occur in only 1 file 
```

这是一种特殊情况，它可能不适用或无法与此处发布的上述技术相提并论，但如果它对正在寻找左外连接的人有用（即仅适用于不匹配的情况），则将其放在那里。搜索“^.*2”将为您提供匹配的案例。如果您有一个多字段文件（更常见的情况），但您只关心单个连接字段，您可以使用 Awk 创建一个仅键文件（为每个文件），然后按上述处理。

# wix - 两个同时运行 WiX 的 EXE 文件

> ID：13382570
> 
> 赞同：0
> 
> 时间：2012-11-14T16:09:37.623
> 
> 标签：wix, windows-installer, wix3.5, custom-action

我有两个运行两个 EXE 文件的自定义操作。但是它们同时被提取，并且在安装过程中进程相互阻塞。我如何安排他们一个接一个？

```
<CustomAction Id="StartAppOnExit1"
              FileKey="UMIEXE"
              ExeCommand=""
              Execute="deferred"
              Return="asyncNoWait"
              Impersonate="no" />

<InstallExecuteSequence>
    <Custom Action="StartAppOnExit1"
            Before="InstallFinalize">$UMIEXE=3</Custom>
</InstallExecuteSequence>

<CustomAction Id="StartAppOnExit2"
              FileKey="Python"
              ExeCommand=""
              Execute="commit"
              Return="check"
              Impersonate="no" />

<InstallExecuteSequence>
    <Custom Action ="StartAppOnExit2"
            After="StartAppOnExit1" >$Python=3</Custom>
</InstallExecuteSequence> 
```

这是我的代码，但我似乎对您所说的内容有误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:57:57.953

在 product.wxs 中依次对它们进行排序，并在自定义操作中检查以验证 exe 是否已执行并仅将进程保留在那里

```
<Custom Action="FirstCustomAction" After="InstallFinalize">NOT INSTALLED AND NOT REMOVE</Custom>
<Custom Action="SecondCustomAction" After="FirstCustomAction">NOT INSTALLED AND NOT REMOVE</Custom> 
```

`WaitForExit()`在流程调用中的 CustomAction 中。

# php - php 5 中的替代函数 mysql_list_tables() 是什么

> ID：13382571
> 
> 赞同：0
> 
> 时间：2012-11-14T16:09:46.387
> 
> 标签：php, mysql

![在此处输入图像描述](../Images/a58b3a47bf38cbfdc05e8dc95d36a2d4.png)

下面是我使用的代码，一切正常，除了

> 已弃用：函数 mysql_list_tables() 在第 28 行的 E:\xampp\htdocs\federalcreditadvocates\admin_page\view_reports.php 中已弃用

它被贬低了..所以我需要的是简单的 mysql_list_tables() 用于 php 版本 5，或者如果有一个新功能。请告诉我我真的需要它谢谢 :)

```
<?php 
$table_query = mysql_list_tables("odesk_carlo");
$get_num_rows = mysql_num_rows($table_query);
for ($table = 0; $table < $get_num_rows; $table++) 
{
 echo "Table name: ", mysql_tablename($result, $table), "<br />";
}
?> 
```

[http://www.jaywebtechnologies.co.cc](http://www.jaywebtechnologies.co.cc) <--暂时关闭，很快就会是[http://www.jaywebtechnologies.com](http://www.jaywebtechnologies.com)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:11:32.873

您可以尝试该功能的文档... [http://php.net/mysql_list_tables](http://php.net/mysql_list_tables)

> 此功能已弃用。最好使用 mysql_query() 来发出 SQL SHOW TABLES [FROM db_name] [LIKE 'pattern'] 语句。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T16:11:52.763

直接查询 information_schema 数据库：

```
select TABLE_NAME
from INFORMATION_SCHEMA
where TABLE_SCHEMA='yourdbnamehere' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:19:12.097

1.  mySQL 函数正处于弃用过程中，因此如果您在 ERROR_REPORTING 出现时使用其中一个，您将在输出中收到通知。但他们仍然会工作。您应该考虑迁移到[mySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://ca3.php.net/manual/en/book.pdo.php)以获取当前和未来的代码。
2.  `mysql_list_tables()`在这些较新的 API 中不存在许多“手持”功能，您必须找到等效的 MYSQL 语句。在这种情况下，您想要[`SHOW TABLES`](http://dev.mysql.com/doc/refman/5.0/en/show-tables.html).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-02T07:02:44.303

由于 PHP7`mysql_list_tables`被删除，你可以使用这个块：

```
if (!function_exists("mysql_list_tables")){

    function mysql_list_tables($dbname, $dbconnect=null){
        $sql = "SHOW TABLES FROM $dbname";
        $result = mysql_query($sql);
        return $result;
    }
} 
```

作为一种**解决方法**，我创建了一个小的 PHP 包含文件，它`mysql_*`使用 -functions 重新创建所有旧函数`mysqli_*()`：[fix_mysql.inc.php](https://github.com/rubo77/php-mysql-fix)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-14T16:24:01.687

哦，我只是稍微调整一下就找到了答案 :) 感谢 Godwinh Lopez 先生 :) 我所需要的只是 mysql_query('SHOW TABLES'); 我们去吧！

```
<?php 
$result = mysql_query('SHOW TABLES');
$num_rows = mysql_num_rows($result);
for ($i = 0; $i < $num_rows; $i++) {
    echo "Table: ", mysql_tablename($result, $i), "<br />";
}

?> 
```

# c# - 在使用 graphsharp 库时添加算法布局

> ID：13382572
> 
> 赞同：2
> 
> 时间：2012-11-14T16:09:50.900
> 
> 标签：c#, wpf, graph-sharp

我是一名学生，正在从事一个可视化图表的项目。我和我的伙伴决定使用graphsharp liabray，但我们使用了一种将图形显示为**邻接列表**的特定布局算法。graphsharp 库中的所有布局算法都不合适。

*   有没有一种简单的方法可以在 graphsharp 库中实现另一种算法布局？

ps：在没有任何文档的情况下使用graphsharp library 有点困难。

谢谢，亚历克斯

# jquery - 无法让 SlidesJS 正常工作

> ID：13382576
> 
> 赞同：0
> 
> 时间：2012-11-14T16:10:08.650
> 
> 标签：jquery, html, css, slideshow, slidesjs

我有一个简单的网页，我一直在尝试使用 SlidesJS 设置一个滑块。

这就是所需文件在 HTML 页面中的链接方式。

```
<head>
    <script type="text/javascript" src="js/jquery-1.8.2.js"></script>
    <script type="text/javascript" src="js/slides.min.jquery.js"></script>
    <script type="text/javascript" src="js/common.js"></script> <!-- the JS function is in here -->
</head> 
```

我已将*loading.gif*和*pagination.png*放在图像文件夹中的图像中。

这是页面的 HTML。

```
<div id="container">
<div id="slider-space">
    <div class="slides-container">
        <div>
            <img src="http://i.imgur.com/kLMCP.png" />
        </div>
        <div>
            <img src="http://i.imgur.com/aX675.png" />
        </div>
        <div>
            <img src="http://i.imgur.com/UyE1g.png" />
        </div>
        <div>
            <img src="http://i.imgur.com/uzc7c.png" />
        </div>
        <div>
            <img src="http://i.imgur.com/Zh8sQ.png" />
        </div>
    </div><!-- end of slides-container -->
</div><!-- end of slider-space -->
</div><!-- end of container --> 
```

这是CSS

```
#container {
    position:fixed;
    width:100%;
    height:100%;
    top:0px;
    left:0px;
}

#slider-space {
    position:relative;
    margin-left:auto;
    margin-right:auto;
    margin-top:10%;
    width:500px;
    height:260px;
    background-color:#F96;    
}

.slides-container img {
    width:500px;
    height:260px;
}

.slides-container div {
    display:block;
    width:500px;
    height:260px;
}​
​ 
```

这是JavaScript代码

```
$(document).ready(function(e) {
    $('#slider-space').slides({
        preload: true,
        preloadImage: '/images/loading.gif',
        play: 5000,
        pause: 2500,
        hoverPause: false,
        pagination: true
    });
}); 
```

但是滑块根本没有出现！这些图像只是像这样在另一个下显示一个，

![在此处输入图像描述](../Images/c1e99509d9d14f56f0d0e2aefe8d6579.png) 谁能告诉我我在这里遗漏了什么以及应该做些什么来纠正它？

非常感谢。

如果它太混乱。为了更好地理解，请在[此处](http://jsfiddle.net/isuru_nan/YXMcj/)查看小提琴。

**编辑 ：**

好的，我得到它的工作。现在滑动工作正常。但是，分页有一个小问题。应该出现的小圆圈没有出现。只有数字。往下看![在此处输入图像描述](../Images/5f22acef6758bf4b16c9f9c1d21b5a0d.png)

我已将*pagination.png*放在我的图像文件夹中。有没有办法可以在脚本或其他东西中设置它的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:18:19.710

你的 div 类应该是“slides_container”而不是“slides-container”——试一试。

编辑以解决与分页相关的新问题：您缺少与分页相关的所有 CSS。请查看`global.css`文件中的“带标题的图像”示例。

您需要以下 CSS：

```
/*
    Pagination
*/

.pagination {
    margin:26px auto 0;
    width:100px;
}

.pagination li {
    float:left;
    margin:0 1px;
    list-style:none;
}

.pagination li a {
    display:block;
    width:12px;
    height:0;
    padding-top:12px;
    background-image:url(../img/pagination.png);
    background-position:0 0;
    float:left;
    overflow:hidden;
}

.pagination li.current a {
    background-position:0 -12px;
} 
```

可以看到，可以在`background-image`属性中设置pagination.png文件的路径`.pagination li a`

# linux - 从不同位置执行 Expect 脚本

> ID：13382577
> 
> 赞同：5
> 
> 时间：2012-11-14T16:10:08.933
> 
> 标签：linux, shell, automation, clearcase, expect

我正在尝试从两个不同的位置运行我的 Expect 脚本，它将与以下引用的 Expect 可执行文件一起使用：

1.  我的 linux 主目录 ( `#!/usr/bin/expect`)
2.  另一台服务器上的明文视图 ( `#!/clearlib/vobs/otherdir/bin/expect`)

问题是我无法在这两个地方运行脚本，除非我将 Expect 可执行位置的引用更改为文件的第一行。

如何获取对应目录的 Expect 可执行文件的正确实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:13:52.977

如果在两台服务器上都正确设置了路径，则可以使用[`/usr/bin/env`](http://en.wikipedia.org/wiki/Env)：

```
#!/usr/bin/env expect 
```

这将使用`PATH`（`/usr/bin`在一种情况下，`/clearlib/vobs/otherdir/bin`在另一种情况下）中找到的期望

> 通过在示例中使用`env`as 代替，解释器在脚本运行时被搜索和定位。
> 这使脚本更具可移植性，但也增加了选择错误解释器的风险，因为它在可执行搜索路径上的每个目录中搜索匹配项。
> 它也有同样的问题，`env`二进制文件的路径也可能在每台机器上不同。

如果您在设置正确时遇到问题`PATH`，那么“[`/usr/bin/env`关于 shebang 线特性](https://stackoverflow.com/questions/352532/usr-bin-env-questions-regarding-shebang-line-pecularities)的问题”可以提供帮助。

# asp.net - ASP MVC 获取控制器/操作名称？

> ID：13382579
> 
> 赞同：1
> 
> 时间：2012-11-14T16:10:11.353
> 
> 标签：asp.net, asp.net-mvc

在 ASP.NET MVC 中，如何根据请求 URL 获取控制器/操作名称？

网址示例：[http ://contoso.com/View/Comment/1](http://contoso.com/View/Comment/1)

我想得到：

*   “视图”作为控制器名称
*   “评论”作为动作名称

基于`HttpContext.Current.Request`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T16:11:40.360

您需要使用来自路由引擎的解析信息：

```
ViewContext.RouteData.GetRequiredString("action") 
```

# facebook - 获取 Facebook 用户访问令牌

> ID：13382581
> 
> 赞同：0
> 
> 时间：2012-11-14T16:10:26.500
> 
> 标签：facebook, c#-4.0, facebook-graph-api, facebook-c#-sdk

是否可以通过 FacebookId、Application Id 和 Application Secret 获取用户的访问令牌？

PS：用户已经同意使用该应用程序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:44:09.580

您可以在用户添加应用程序时或再次使用应用程序登录时获取用户的 access_token。不会比那更晚。

您可以使用不会过期且从用户添加您的应用程序时开始有效的应用程序 access_token。但请记住，与用户 access_token 相比，它的检索能力有限。

# python - 用python编写的AMQP代理？

> ID：13382584
> 
> 赞同：3
> 
> 时间：2012-11-14T16:10:38.590
> 
> 标签：python, rabbitmq, message-queue, priority-queue, messagebroker

我正在寻找`amqp broker`用python编写的。现在我正在使用带有鼠兔绑定的[RabbitMQ 。](http://www.rabbitmq.com/)RabbitMQ 可以完成这项工作，但如果能找到一些用 python 编写的更简单、更轻量级的东西会很好。

到目前为止，我发现的唯一一个是[SnakeMQ](http://www.snakemq.net/)。但它（尚）不支持多个队列，这在我的情况下是一个要求。

有谁知道是否有任何用 python 编写的替代方案？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-14T16:20:53.660

[`Queue.Queue()`](http://docs.python.org/2/library/queue.html#Queue.Queue)包括电池，再简单不过了。

# c# - 对象模型事务

> ID：13382588
> 
> 赞同：1
> 
> 时间：2012-11-14T16:10:57.963
> 
> 标签：c#, .net, transactions, webforms

好的，所以 .NET Framework 包含一个`TransactionScope`有助于为诸如数据库之类的事物登记事务的方法。但是，我似乎找不到与对象模型相似的东西。

我有一个 ASP.NET Web 窗体应用程序，当用户单击`Export to Excel`我创建的链接时，我**将添加**到Excel 文件`Response`上的对象中。`HttpContext`这当然需要一些修改，例如标题，甚至写入`byte[]`Excel 文件。

但是，如果失败了，我会得到部分发出的响应，并且它只是被破坏了。

有没有一种技术可以让我加入对象模型事务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:15:54.273

虽然您当然可以*尝试*在此处创建一个在事务中注册自身的资源（请参阅[`ISinglePhaseNotification`接口](http://msdn.microsoft.com/en-us/library/system.transactions.isinglephasenotification.aspx)以及[类](http://msdn.microsoft.com/en-us/library/e5c62w6d.aspx)上的[`EnlistVolatile`方法](http://msdn.microsoft.com/en-us/library/ms149780.aspx)，但这不是您想要做的正确方法，因为它在技术上是不可能的。[`Transaction`](http://msdn.microsoft.com/en-us/library/e5c62w6d.aspx)

根据是否在 ASP.NET 中启用缓冲，一旦将字节写入响应，这些字节就会发送到客户端，*因为*HTTP 协议没有任何机制来指示客户端应该丢弃以前发送的字节。（注意：Web 服务*确实*支持事务，但这不是 Web 服务，方法会有所不同）。

也就是说，您*可以*做的是在服务器端创建一个事务，并让*另一个*对象创建 Excel 文件句柄在事务中登记，但这也有点矫枉过正：您已经表明您要发送的响应*是*Excel工作表，仅此而已。没有其他需要协调的东西，所以没有必要进行交易（除非还有其他你没有指出的事情）。

考虑到这一点，您可以轻松地将创建 Excel 文件的方法写入内存/[`MemoryStream`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)实例中的字节数组或文件系统，然后根据您是否成功写入流或响应失败以其他方式。

当然，这里有一个性能折衷，因为您正在将工作表写入中间介质（内存将比文件系统快，但您必须考虑工作表的大小以及正在写入的工作表数量）然后是响应，但这是您必须做出的权衡（无论您是否在交易中这样做）。

这里的交易是矫枉过正和错误的设计选择。

# silverlight - 2个视图模型之间的通信：一个的内容取决于另一个的状态

> ID：13382589
> 
> 赞同：0
> 
> 时间：2012-11-14T16:11:08.007
> 
> 标签：silverlight, mvvm

我有 2 个视图及其视图模型：选择器和编辑器。

编辑器一开始是空的，等待使用选择器选择某些东西。选择器需要将选择的实体传达给编辑器以使其初始化。

两个视图对彼此一无所知，应该由它们所属的父视图进行编排。

选择器视图包含一个下拉列表，其“SelectedItem”属性绑定到其视图模型的“Input”属性。

编辑器视图模型具有“初始化”方法，该方法采用一个参数，该参数应该来自选取器视图模型的 Input 属性。

问题：如何将选择器视图模型的 Input 属性和编辑器视图模型的 Initialize 方法结合起来？

插图：

`public class PickerViewModel { public InputInfo Input { get; set; } }`

```
public class EditorViewModel { public void Initialize(InputInfo input) { /* blah-blah */ } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:31:35.387

我建议您使用[MVVM Light Toolkit Messenger](http://blog.galasoft.ch/archive/2009/09/27/mvvm-light-toolkit-messenger-v2-beta.aspx)或[Prism Event Aggregator](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)。

# c# - 如何使用 C# 使用 XPath 返回元素值？

> ID：13382591
> 
> 赞同：2
> 
> 时间：2012-11-14T16:11:11.330
> 
> 标签：c#, xpath

我有一个 xml 文件的片段，如下所示：

```
 <?xml version="1.0" encoding="utf-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="wa_xml2html.xsl"?>
<computeraudit>
    <title>Computer Audit :: 11/13/2012 10:43:22 AM</title>
    <category title="Loaded Modules">
        <subcategory title="">
            <recordset title="">
                <fieldname>Name</fieldname>
                <fieldname>Version</fieldname>
                <fieldname>Modified</fieldname>
                <fieldname>Manufacturer</fieldname>
                <datarow>
                    <fieldvalue>XmlLite.dll</fieldvalue>
                    <fieldvalue>1.3.1000.0</fieldvalue>
                    <fieldvalue>7/13/2009 8:16:21 PM</fieldvalue>
                    <fieldvalue>Microsoft Corporation</fieldvalue>
                </datarow>              
                <datarow>
                    <fieldvalue>zip.dll</fieldvalue>
                    <fieldvalue>6.0.250.6</fieldvalue>
                    <fieldvalue>5/25/2011 8:30:12 AM</fieldvalue>
                    <fieldvalue>Sun Microsystems, Inc.</fieldvalue>
                </datarow>                      
            </recordset>
        </subcategory>
    </category>         
</computeraudit> 
```

我正在尝试使用 C# XPath 解析它并获取每个 fieldvalue 元素值。

c# 代码如下所示：

```
 XPathNavigator nav;
        XPathDocument docNav;
        XPathNodeIterator NodeIter;
        String strExpression;
        docNav = new XPathDocument(@"C:\TEMP\WinAudit\test.xml");

        nav = docNav.CreateNavigator();

        strExpression = "/computeraudit/category[@title=\"Loaded Modules\"]/subcategory/recordset/datarow";

        NodeIter = nav.Select(strExpression);

        while (NodeIter.MoveNext())
        {
            Console.WriteLine(NodeIter.Current.Value);
        }
        Console.ReadLine(); 
```

它为每个数据行节点返回一行，其中所有字段值元素值连接在一起。

如何为每个 fieldvalue 元素返回每个不同的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:19:57.227

将您的 XPath 表达式更改为：

```
"/computeraudit/category[@title=\"Loaded Modules\"]/subcategory/recordset/datarow/fieldvalue" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:14:59.657

您的选择器仅选择数据行元素。

尝试`strExpression = "/computeraudit/category[@title=\"Loaded Modules\"]/subcategory/recordset/datarow/fieldvalue";`

# forms - Mobile Flex 4.5 FormItem 错误提示未显示

> ID：13382594
> 
> 赞同：0
> 
> 时间：2012-11-14T16:11:24.127
> 
> 标签：forms, apache-flex, flex4.5, flex-mobile

我目前正在尝试使用 numbervalidator 来验证我的几个使用十进制值的字段。我希望它显示 mx 示例的显示方式，例如[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/validators/NumberValidator.html#includeExamplesSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/validators/NumberValidator.html#includeExamplesSummary)

即使我启用了它（阅读下文），错误提示也没有出现。它确实显示的错误消息位于屏幕顶部，而不是在formitem中。

```
<s:NumberValidator id="nv1" allowNegative="false" source="{field1}" property="text" fractionalDigits="3"  />
<s:NumberValidator id="nv2" allowNegative="false" source="{field2}" property="text" fractionalDigits="3"  /> 
```

我阅读了覆盖formitem皮肤并将showErrorTip设置为true（在contentGroup上）的建议，但这没有影响。我还删除了 errorTextDisplay 以尝试阻止出现的其他错误消息，但这也没有影响。

如果我能让现有的错误消息出现在 formItem（下方）中，我会很高兴。我在下面包含了我的视图的基本结构：

```
<s:Scroller width="100%" height="100%">
    <s:Group>
        <s:Form id="myForm" width="100%">
            <s:layout>
                <s:FormLayout gap="0"/>
            </s:layout>
            <s:HGroup width="100%">
                <s:FormItem label="Field1" width="50%">
                    <s:TextInput id="field1" width="100%" text="{data.field1}" restrict="0-9." />
                </s:FormItem>
                <s:FormItem label="Field2" width="50%">
                    <s:TextInput id="field2" width="100%" text="{data.field2}" restrict="0-9." />
                </s:FormItem>
            </s:HGroup>
        </s:Form>
    </s:Group>
</s:Scroller> 
```

这是一个很长的表格（我省略了其他字段），这就是为什么我使用滚动条并以两列布局显示输入的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:42:46.680

试试这个，这应该可以显示错误消息，你需要向验证器添加一个触发器并说明它必须触发什么事件。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application
    xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Declarations>
        <s:NumberValidator id="nv1" allowNegative="false" source="{field1}" property="text" fractionalDigits="3"  
                           trigger="{validate}" triggerEvent="click" requiredFieldError="No use"/>
        <s:NumberValidator id="nv2" allowNegative="false" source="{field2}" property="text" fractionalDigits="3" 
                           trigger="{validate}" triggerEvent="click" requiredFieldError="No use"/>
    </fx:Declarations>

    <s:Scroller width="100%" height="100%">
        <s:Group>
            <s:Form id="myForm" width="100%">
                <s:layout>
                    <s:FormLayout gap="0"/>
                </s:layout>
                <s:VGroup width="100%">
                    <s:FormItem label="Field1" width="50%">
                        <s:TextInput id="field1" width="100%" text="11" restrict="0-9." />
                    </s:FormItem>
                    <s:FormItem label="Field2" width="50%">
                        <s:TextInput id="field2" width="100%" text="22" restrict="0-9." />
                    </s:FormItem>
                </s:VGroup>
                <s:Button id="validate" label="Validate"/>
            </s:Form>
        </s:Group>
    </s:Scroller>
</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:14:13.827

您使用图标获得不同类型错误的原因是因为您使用了`<s:Form>`and `<s:FormItem>`，将其更改为时`<mx:Form>`，`<mx:FormItem>`您将获得旧类型的错误，突出显示的框和工具提示上的错误。试试下面的示例。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application
    xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Declarations>
        <s:NumberValidator id="nv1" allowNegative="false" source="{field1}" property="text" fractionalDigits="3"  />
        <s:NumberValidator id="nv2" allowNegative="false" source="{field2}" property="text" fractionalDigits="3"  />
    </fx:Declarations>

    <s:Scroller width="100%" height="100%">
        <s:Group>
            <mx:Form id="myForm" width="100%">
                <s:HGroup width="100%">
                    <mx:FormItem label="Field1" width="50%">
                        <s:TextInput id="field1" width="100%" text="1" restrict="0-9." />
                    </mx:FormItem>
                    <mx:FormItem label="Field2" width="50%">
                        <s:TextInput id="field2" width="100%" text="2" restrict="0-9." />
                    </mx:FormItem>
                </s:HGroup>
            </mx:Form>
        </s:Group>
    </s:Scroller>
</s:Application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:25:40.680

我设法找到了我自己问题的解决方案，部分原因是我没有提及原来是问题的重要部分。表单皮肤的默认布局非常糟糕，所以我分别切换到 StackedFormSkin 和 StackedFormItemSkin。

然而，Stacked 皮肤将 errorTextDisplay 从 formitem 移动到 form 皮肤。我最终需要做的是创建自己的皮肤（从各自堆叠的皮肤中 c+p'd）。

在我的表单皮肤中，我只是从 FormSkin 中删除了 errorTextDisplay 元素，并从原始 FormItemSkin 中复制了 errorTextDisplay，进行了一些更改（如下所示）以使其显示在文本输入下方。

```
<s:RichText id="errorTextDisplay" includeIn="errorStates"
            fontStyle="italic" fontWeight="normal" color="0xFE0000"
            left="contentCol:0" right="helpCol:10"
            bottom="row3:10" baseline="row3:0" 
            maxDisplayedLines="-1"/> 
```

您需要将 row3 添加为额外的 ConstraintRow。

基本上，上述更改将获得 StackedForm 外观的优势，但意味着您的错误消息仍将出现在导致错误的输入旁边。

# ios - 使用 Testflight sdk 获取 iOS 应用程序的生产数据

> ID：13382595
> 
> 赞同：3
> 
> 时间：2012-11-14T16:11:27.943
> 
> 标签：ios, testflight

我有一个启用了 Testflight 的 sdk 1.1 的 iOS 应用程序来获取生产数据。这在 beta 测试期间运行良好，我向 Appstore 提交了相同的构建（启用了 sdk）并且构建被批准并发布。但是，我没有看到任何有关 testflight live 使用情况的数据。我一直在四处寻找是否需要任何特殊设置但没有成功。

请注意，我不再具有与 testflight 中的 appstore 相同的构建版本。但我认为 testflight live 仍然能够显示使用数据。

有人有这方面的经验吗？有人能指出我正确的方向吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:31:53.833

检查后，看起来从 v1.1 开始，您需要具有提交到 Appstore 的相同版本才能进行测试。原因是事件匹配是使用构建的 UUID 完成的。他们的支持表明他们也在努力处理孤立的构建事件。

# matlab - 如何为网络仿真框架创建和维护接收缓冲区？

> ID：13382596
> 
> 赞同：1
> 
> 时间：2012-11-14T16:11:27.740
> 
> 标签：matlab, networking

我正在尝试在 matlab 中模拟网状网络。中间节点和目的地需要维护一个接收缓冲区，以便每当数据包从源到达时，它都会存储在缓冲区中并且可以用于进一步的操作。我正在使用一个主文件，源节点、中间节点和目标节点是函数。由于每次新数据包到达时都会调用函数，我如何以及在哪里维护一个单独的或组合的缓冲区以进行接收？数据包不能以先到先得的方式处理，但需要集体缓冲。请问我是否没有正确解释问题。

# jquery - Jquery滑块全局javascript变量

> ID：13382600
> 
> 赞同：0
> 
> 时间：2012-11-14T16:11:41.310
> 
> 标签：jquery, variables, slider, global

我在访问全局变量时遇到问题，想访问

```
selection1 = $("#slider").slider( "value" );
selection2 = $("#slider2").slider( "value" ); 
```

在 jQuery 函数内部只需通过选择调用 calcTmpl(selection1, selection2) ，但这似乎无法通过在函数外部声明变量来实现，如下所示：`var selection1 = $("#slider").slider( "value" );`

然后滑块消失。

这是滑块执行计算的代码。这很有效，只是我不想一遍又一遍地设置 selection1 和 2。

任何想法为什么这不起作用？

```
var selection1;
var selection2;
$("#slider").slider({
    range: "min",
    value: 5000000,
    min: 100000,
    max: 10000000,
    slide: function() {
        selection1 = $("#slider").slider("value");
        selection2 = $("#slider2").slider("value");
        calcTmpl(selection1, selection2);
    },
    change: function() {
        selection1 = $("#slider").slider("value");
        selection2 = $("#slider2").slider("value");
        calcTmpl(selection1, selection2);
    }
});

$("#slider2").slider({
    range: "min",
    value: 50000,
    min: 100,
    max: 100000,
    slide: function() {
        selection1 = $("#slider").slider("value");
        selection2 = $("#slider2").slider("value");
        calcTmpl(selection1, selection2);
    },
    change: function() {
        selection1 = $("#slider").slider("value");
        selection2 = $("#slider2").slider("value");
        calcTmpl(selection1, selection2);
    }
});​
calcTmpl(5000000,50000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:31:10.163

试试这个：

```
var selection1 = 5000000,
    selection2 = 50000;

$("#slider").slider({
    range: "min",
    value: selection1,
    min: 100000,
    max: 10000000,
    slide: function(event, ui) {
        selection1 = ui.value;
        calcTmpl(selection1, selection2);
    }
});

$("#slider2").slider({
    range: "min",
    value: selection2,
    min: 100,
    max: 100000,
    slide: function(event, ui) {
        selection2 = ui.value;
        calcTmpl(selection1, selection2);
    }
}); 
```

# ruby-on-rails - Rails 静态数据集

> ID：13382606
> 
> 赞同：9
> 
> 时间：2012-11-14T16:11:56.120
> 
> 标签：ruby-on-rails, ruby, design-patterns, activerecord

处理静态数据集（非动态）的最佳方法是什么？

例如，假设您有一个模型，该模型具有一组 10 个不同的实例，每个实例都是唯一的，但在您的应用程序的整个生命周期中都不会改变。创建一个 activerecord 模型并将这些数据存储在数据库中似乎有点矫枉过正，但创建一个泛型类并将这些数据存储在代码中似乎很难看。

什么是公认的最佳实践？

* * *

**例子：**

你有一个**Rate**和一个**User**。一个用户可以有一个从 1 到 10 的级别，当级别发生变化时，速率会发生变化。汇率可能有其他信息，因此简单地将其作为属性存储在用户上可能比它的价值更麻烦。将其与 Rate 绑定或将其创建为 User 上的方法是否有意义，如下所示：

```
def rate
  case self.level
  when 1:
    { value: "foo", something: "bar", else: "baz" }
  when 2:
    # etc
  end
end 
```

似乎这两种解决方案都不是理想的，但我不确定是否还有其他理想的可能发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:17:10.427

我会将这些信息存储在 YAML 文件中。您可以使用[RailsConfig gem](https://github.com/railsjedi/rails_config)并创建一个 YAML 文件，例如

```
level:
  1:
    some: value
    another: value
  2:
    some: second value
    another: second value 
```

然后访问它

```
rate = 2
val = Settings.level[rate.to_s].some 
```

（我不完全确定数字作为 YAML 中的键，也许你必须转义它们）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:24:06.787

在这种情况下我使用常量：常量在声明后不会改变，但声明可以是动态的：

```
OS =
  case RUBY_PLATFORM
  when /linux/   then :linux
  when /osx/     then :osx
  when /windows/ then :windows
  else                :unknown 
```

将常量用于静态值时性能应该更好，因为它们应该被记忆（并且因为静态应该是它们的目的，所以 Ruby 实现可能信任它；我读了一些关于 JRuby 和常量实现的东西，如果我会发布它会找到。**编辑**我找到了它：[http](http://blog.headius.com/2012/09/avoiding-hash-lookups-in-ruby.html) ://blog.headius.com/2012/09/avoiding-hash-lookups-in-ruby.html ）。

# sql-server - 在 SQL Server 中，你能找到字符串中的第一个数字吗？

> ID：13382609
> 
> 赞同：25
> 
> 时间：2012-11-14T16:11:59.610
> 
> 标签：sql-server, string

我有一个 varchar(50) sql server 列，其中包含如下数据：

```
RawData
----------------------------
Washington 40 New Orleans 32
Detroit 27 St. Louis 23 
```

我正在尝试解析数据，所以我有这样的东西：

```
WinningTeam     WinningTeamScore      LosingTeam    LosingTeamScore
-----------     ----------------      ----------    ---------------
Washington      40                    New Orleans   32
Detroit         27                    St. Louis     23 
```

我被困住了。我打算使用 charindex 来查找第一个空格，但是某些城市名​​称（圣路易斯、纽约等）的名称中有空格。

有没有办法识别字符串中第一个数字的位置？

谢谢

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-14T16:14:31.367

> 有没有办法识别字符串中第一个数字的位置？

是的

```
SELECT PATINDEX('%[0-9]%','Washington 40 New Orleans 32') 
```

`PATINDEX`如果找不到模式，则返回 0，否则返回`1`匹配开头的基础索引。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-14T16:25:54.380

您可以使用 PATINDEX 函数代替 CHARINDEX，[这里](http://msdn.microsoft.com/library/ms188395.aspx)是文档；）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-14T16:34:11.653

这是一个非常丑陋的实现，`PATINDEX()`它返回多列中的数据：

```
SELECT rtrim(substring(RawData, 1, PATINDEX('%[0-9]%', RawData) -1)) WinningTeam,
    ltrim(rtrim(substring(RawData, PATINDEX('%[0-9]%', RawData), 2))) WinningTeamScore,
    reverse(ltrim(rtrim(substring(reverse(SUBSTRING(RawData, 1, LEN(rawdata) - (PATINDEX('%[aA-zZ]%', REVERSE(rawData)) - PATINDEX('%[0-9]%', reverse(RawData))))), 1, PATINDEX('%[0-9]%', SUBSTRING(RawData, 1, LEN(rawdata) - (PATINDEX('%[aA-zZ]%', REVERSE(rawData)) - PATINDEX('%[0-9]%', reverse(RawData))))))))) LosingTeam,
    substring(reverse(RawData), PATINDEX('%[0-9]%', reverse(RawData)), (PATINDEX('%[aA-zZ]%', REVERSE(rawData)) - PATINDEX('%[0-9]%', reverse(RawData)))) LosingTeamScore
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4edff/1)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-14T16:32:47.770

也许有点复杂，但它可以满足您的需要：

```
declare @test table(mytext varchar(50))

insert @test values('Washington 40 New Orleans 32')
insert @test values('Detroit 27 St. Louis 23')

select 
WinningTeam=SubString(mytext, 0,PatIndex('%[0-9.-]%', mytext)), 
WinningTeamScore=Left(SubString(mytext, PatIndex('%[0-9.-]%', mytext), 50),PatIndex('%[^0-9.-]%', SubString(mytext, PatIndex('%[0-9.-]%', mytext), 50) + 'X')-1),
LosingTeam=SubString(mytext, PatIndex('%[0-9.-]%', mytext)+3,PatIndex('%[0-9.-]%', mytext)), 
LosingTeamScore=reverse(Left(SubString(reverse(mytext), PatIndex('%[0-9.-]%', reverse(mytext)), 50),PatIndex('%[^0-9.-]%', SubString(reverse(mytext), PatIndex('%[0-9.-]%', reverse(mytext)), 50) + 'X')-1)) 
from @test 
```

上面的查询适用于 100 分以下的分数，但您可以修改它以处理任何数字。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-18T22:46:50.153

我从 url 中选择 multi-didget 数字的查询（忽略没有数字的行和数字在“？”之后的行

```
select 
    URL,
    substring(URL,PATINDEX ('%[0-9][0-9][0-9][0-9][0-9][0-9][0-9]%',URL),7) as id
from data 
where 
    PATINDEX ('%[0-9][0-9][0-9][0-9][0-9][0-9][0-9]%',URL)>0 
and PATINDEX ('%[0-9][0-9][0-9][0-9][0-9][0-9][0-9]%',URL)<charindex ('?',URL) 
```

# c++ - 封装“包含”，因此只公开选定的类

> ID：13382614
> 
> 赞同：1
> 
> 时间：2012-11-14T16:12:13.837
> 
> 标签：c++, namespaces, scope, information-hiding

**问题**：是否可以在隐藏该标头中定义的其他名称空间/类的同时从标头访问特定类？

例如，假设我有头文件 --*结果.hpp*：

```
// outcome.hpp
namespace sports { namespace outcome {
  class Injury {};
  class Success {};
}} 
```

在另一个头文件 - *api.hpp* - 我希望在`sports::outcome::Injury`无法`sports::outcome::Success`访问包含*api.hpp*的文件的情况下使用。那可能吗？如果是这样，我该如何实现？

PS 在实际代码中，*api.hpp*包含将调用`Injury`类方法的模板化方法，因此前向声明是不够的。

* * *

### 我的尝试：

在我的无知中，我试图通过将 放置`include`在内部命名空间中来实现这一点。这是一个[SSCCE](http://sscce.org/)：

```
// api.hpp
namespace sports { namespace api {
  namespace internal {
    #include "outcome.hpp"  // I'm trying to hide symbols within this header
    using sports::outcome::Injury;
  } 

  class Boxing {
    private:
      internal::Injury sustained;
  };
} 
```

当它奏效时，我过早地庆祝：

```
// This cpp file compiles file   \o/
#include "api.hpp"
int main(int argc, char *argv[]) {
  sports::api::Boxing b;  
  // sports::outcome not accessible
} 
```

### 它是如何失败的：

如果将标准库中的容器用作*result.hpp*中的类成员，事情就会崩溃。例如，使用这个版本：

```
// outcome.hpp
#include <vector>
namespace sports { namespace outcome {

  class Injury {
    private:
      std::vector x;
  };

// ...
}} 
```

编译失败并出现以下错误：

```
在 /usr/include/c++/4.6/ext/new_allocator.h:34:0 包含的文件中，
                 来自 /usr/include/c++/4.6/x86_64-linux-gnu/./bits/c++allocator.h:34，
                 来自 /usr/include/c++/4.6/bits/allocator.h:48，
                 来自 /usr/include/c++/4.6/vector:62，
                 从结果.hpp:1，
                 来自 api.hpp:5,
                 来自 main.cpp:1：
/usr/include/c++/4.6/new:93:54: 错误：'void* sports::api::internal::operator new(sports::api::internal::std::size_t)' 可能不是在命名空间中声明
/usr/include/c++/4.6/new:94:56: 错误：'void* sports::api::internal::operator new [](sports::api::internal::std::size_t)' 可能不在命名空间内声明
/usr/include/c++/4.6/new:95:35: 错误：'void sports::api::internal::operator delete(void*)' 不能在命名空间中声明
/usr/include/c++/4.6/new:96:37: 错误：'void sports::api::internal::operator delete [](void*)' 不能在命名空间中声明
/usr/include/c++/4.6/new:97:62: 错误: 'void* sports::api::internal::operator new(sports::api::internal::std::size_t, const sports:: api::internal::std::nothrow_t&)' 不能在命名空间中声明
/usr/include/c++/4.6/new:98:64: 错误：'void* sports::api::internal::operator new [](sports::api::internal::std::size_t, const sports ::api::internal::std::nothrow_t&)' 不能在命名空间中声明
/usr/include/c++/4.6/new:99:58: 错误：'void sports::api::internal::operator delete(void*, const sports::api::internal::std::nothrow_t&)'不能在命名空间中声明
/usr/include/c++/4.6/new:100:60: 错误：'void sports::api::internal::operator delete [](void*, const sports::api::internal::std::nothrow_t& )' 不能在命名空间中声明
/usr/include/c++/4.6/new:103:57: 错误：'void* sports::api::internal::operator new(sports::api::internal::std::size_t, void*)'不能在命名空间中声明
/usr/include/c++/4.6/new:104:59: 错误：'void* sports::api::internal::operator new [](sports::api::internal::std::size_t, void* )' 不能在命名空间中声明
/usr/include/c++/4.6/new:107:52: 错误：'void sports::api::internal::operator delete(void*, void*)' 不能在命名空间中声明
/usr/include/c++/4.6/new:108:52: 错误：'void sports::api::internal::operator delete [](void*, void*)' 不能在命名空间中声明

```

我显然做错了。建议和良好的告白将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:19:41.943

您可以使用 using 声明将名称从命名空间导入到不同的命名空间。

```
namespace sports {
  using sports::outcome::Injury;
}; 
```

在您的示例中，很多事情都是错误的。尤其是包含位置不佳，并且您缺少包含警卫。

```
// file1.h
#ifndef FILE1_h
#define FILE1_h

namespace sports { namespace outcome {
  class Injury;
}}
#endif

// api.h   
#ifndef API_H
#define API_H

#include <file1.h>

namespace sports {
  using sports::outcome::injury;
}

#endif 
```

包含的文件`api.h`现在可以访问：

```
sports::injury x; 
```

仅包含的文件`file1.h`只能访问：

```
sports::outcome::injury x; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:31:55.023

如果我正确理解您的意图，那么您想要“私有”或“内部”命名空间之类的东西吗？恕我直言，这在 C++ 中是不可能的。

您可以使用一个类来执行此操作并将内部类定义作为嵌套类放置在那里，您的 api 命名空间可以类似地实现，将其他类公开为公共类型定义，前提是 api 是内部类的朋友。

```
namespace sports
{
    class api;

    class outcome
    {
        friend class api;

        // Internal class definitions
        class Boxing
        {
        };
    };

    class api
    {
    public:
        typedef outcome::Boxing Boxing;
    }
} 
```

# vba - 在 VBA 中使用动态命名范围进行散点图标注

> ID：13382616
> 
> 赞同：3
> 
> 时间：2012-11-14T16:12:17.100
> 
> 标签：vba, dynamic, label, scatter, named

我正在尝试制作一个宏，它将散点图上的数据标签更改为每个点的标题。例如：

[![示例图表](../Images/5d034e936a30580950197444d2817845.png)](https://i.stack.imgur.com/TgYFY.gif)
[（来源：[wiseowl.co.uk](http://www.wiseowl.co.uk/blog/s130/i2.gif)）]

在这种情况下，我希望数据标签显示电影标题。我使用的代码来自[这个网站](https://www.wiseowl.co.uk/blog/s130/excel-charts-data-labels-problem.htm)，但是我的散点图有两个系列的数据。我想使用动态命名范围来告诉宏名称所在的单元格范围，在我的代码中，动态命名范围是 FONames 和 BONames。这是我的代码：

```
Sub CreateDataLabels()
'holds the entire film data series in the chart
Dim FilmDataSeries As Series
Dim FilmDataSeries2 As Series
'holds one cell at a time
Dim SingleCell As Range
'holds the full list of cells containing film names
Dim FilmList As Range
Dim FilmList2 As Range
'keeps track of which datapoint we're labelling
Dim FilmCounter As Integer
Dim FilmCounter2 As Integer
'The sheet in which the graph is on
Dim ws As Worksheet
Set ws = Worksheets("Datos Gráfico")

'set the counter to start at 1
FilmCounter = 1
FilmCounter2 = 1

'set a reference to the cells containing the list of films
Set FilmList = Range("FONames")
Set FilmList2 = Range("BONames")

'set a reference to the chart data series
Set FilmDataSeries = ws.ChartObjects(1).Chart.SeriesCollection(1)
Set FilmDataSeries2 = ws.ChartObjects(1).Chart.SeriesCollection(2)

'make sure data labels are turned on
FilmDataSeries.HasDataLabels = True
FilmDataSeries2.HasDataLabels = True

'loop over the cells in the list of films
For Each SingleCell In FilmList
    FilmDataSeries.Points(FilmCounter).DataLabel.Text = SingleCell.Value
    FilmCounter = FilmCounter + 1
Next SingleCell

For Each SingleCell In FilmList2
    FilmDataSeries2.Points(FilmCounter2).DataLabel.Text = SingleCell.Value
    FilmCounter2 = FilmCounter2 + 1
Next SingleCell

End Sub 
```

我收到 1004 错误，指出指定的尺寸无效。当我用实际的单元格范围替换 FONames 或 BONames 时，例如。范围（“A5”，“A11”），一切正常。如何在我的代码中使用这些动态命名范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-13T13:17:55.310

例如 ：

```
'---------------------------------------------------------------------------
' In order to add label at scatter graph. You must selected a graph before.
' @param void
'---------------------------------------------------------------------------
Sub add_label_on_graph()
    Dim Counter As Integer
    Dim xVals As String
    Dim reponse As Integer

    If ActiveChart Is Nothing Then
        reponse = MsgBox("Attention, vous devez au préalable sélectionner un graphique avant de lancer cette commande.", vbExclamation, "Information")
        Exit Sub
    End If

    Application.ScreenUpdating = False

    ' Récupération de la range des données que l'on stocke dans la variable xVals.
    xVals = ActiveChart.SeriesCollection(1).Formula
    xVals = Mid(xVals, InStr(InStr(xVals, ","), xVals, Mid(Left(xVals, InStr(xVals, "!") - 1), 9)))
    xVals = Left(xVals, InStr(InStr(xVals, "!"), xVals, ",") - 1)
    Do While Left(xVals, 1) = ","
        xVals = Mid(xVals, 2)
    Loop

    ' Ajoute un label à chaque point du graphique
    For Counter = 1 To Range(xVals).Cells.Count
        ActiveChart.SeriesCollection(1).Points(Counter).HasDataLabel = True
        ActiveChart.SeriesCollection(1).Points(Counter).DataLabel.text = Range(xVals).Cells(Counter, 1).Offset(0, -1).Value
    Next Counter

    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:12:56.730

您的动态命名范围的定义是什么？我为 A 列定义了一个命名范围，如下所示：

```
=OFFSET(Sheet1!$A$1,1,0,COUNTA(Sheet1!$A:$A)-1,1) 
```

它工作得很好。

# xcode - 在 iphone 模拟器中设置 twitter 帐户

> ID：13382618
> 
> 赞同：1
> 
> 时间：2012-11-14T16:12:37.867
> 
> 标签：xcode, ios5, ios6, ios-simulator

我正在开发一个 iOS 应用程序，为了能够从 Twitter 检索数据，我需要`Settings`在模拟器中设置我的 Twitter 帐户以使用 Twitter 框架。即使我正确输入了我的用户名和密码，它也会给出一个错误提示`username or password is invalid`，但我 100% 确定它们是正确的，因为我在网络上使用。我可以访问我的 Twitter 帐户。我在使用 iphone 5.0 模拟器时遇到的另一个奇怪的问题。iphone 6.0模拟器没问题。它让我发疯，在网上查找，但什么也没出现。你们知道我为什么会遇到这个问题吗？

编辑：我在 Mountaion Lion 上使用 Xcode 4.5.2 和 iOS 6.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:55:07.397

你使用 Xcode 4.6 Developer Preview 2 吗？这是一个已知的问题：

> 在 OS X v10.8 (Mountain Lion) 上使用 iOS 6.1 SDK 时，如果您在 iOS Simulator 中使用 iOS 5.0 或 iOS 5.1 “Legacy SDK”，您将无法通过设置面板和 Twitter 登录 Twitter .framework 将无法正常工作。如果您需要测试 Twitter 功能，您将需要选择 iOS 6.1 或 iOS 6.0 模拟器运行目标或在设备上使用 iOS 5.x 进行测试。在 OS X v10.7 (Lion) 上运行 Simulator 时不会出现这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-15T12:50:07.147

我在 Xcode 8.3.3 中完成了一个代码，用于查找主题标签上的推文。我使用社交应用程序中内置的 twitter 登录那里然后测试我的应用程序。Xcode 9.2 的更新是您不能像以前在 Xcode 8.XX 中那样使用内置的社交应用程序

iOS 11 不再支持使用内置社交框架中的 Twitter。

解决方案是您必须使用 Twitter Kit 3 才能在您的应用程序中使用 Twitter 功能，例如 Tweet、社交 Twitter 登录，以及访问或使用任何 Twitter API。

链接到 Twitter 工具包 iOS： [https ://github.com/twitter/twitter-kit-ios/wiki](https://github.com/twitter/twitter-kit-ios/wiki)

# java - Java 错误：无法从 void 转换为 int[]

> ID：13382619
> 
> 赞同：1
> 
> 时间：2012-11-14T16:12:36.227
> 
> 标签：java

我不明白为什么 java 认为数组“thisRow”在传递给 Arrays.sort(thisRow) 时是无效的。“thisRow”对我来说似乎是一个 int[]。这里有什么问题？

错误消息：“类型不匹配：无法在 Test.mySort(Test.java:57) 处从 void 转换为 int[]”

```
private static int[][] mySort(int[][] anArray) {
    for(int i = 0; i < anArray.length; i++){
        int thisRow[] = getRow(anArray, i);
        int[] sorted = Arrays.sort(thisRow);
    }
}

//This method will get the specified row out of the array.
private static int[] getRow(int[][] anArray, int row) {
    int thisRow[] = new int[anArray[row].length];
    for(int j = 0; j < anArray[row].length; j++){
        thisRow[j] = anArray[row][j];
    }
    return thisRow;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-14T16:13:40.463

[Arrays.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28int%5B%5D%29)返回`void`非`int[]`类型。

根据 javadoc

> 将指定的整数数组按数字升序排序。排序算法是一种调整过的快速排序，改编自 Jon L. Bentley 和 M. Douglas McIlroy 的“Engineering a Sort Function”，Software-Practice and Experience，Vol。23(11) P. 1249-1265（1993 年 11 月）。该算法在许多数据集上提供 n*log(n) 性能，导致其他快速排序降低到二次性能

代替

```
int[] sorted = Arrays.sort(thisRow); 
```

和

```
Arrays.sort(thisRow); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T16:14:11.167

`Arrays.sort`就地对数组进行排序（通过改变现有对象），并且不返回任何内容。因此你应该更换

```
int[] sorted = Arrays.sort(thisRow); 
```

简单地

```
Arrays.sort(thisRow); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:14:51.943

`Arrays#sort`不返回`int[]`，它返回`void`，它对源数组本身进行排序。

> 将指定的整数数组按数字升序排序。排序算法是一种调整过的快速排序，改编自 Jon L. Bentley 和 M. Douglas McIlroy 的“Engineering a Sort Function”，Software-Practice and Experience，Vol。23(11) P. 1249-1265（1993 年 11 月）。该算法在许多数据集上提供 n*log(n) 性能，导致其他快速排序降低到二次性能。

# javascript - 表格内容的 Javascript 分页

> ID：13382621
> 
> 赞同：0
> 
> 时间：2012-11-14T16:12:48.780
> 
> 标签：javascript, pagination

我的表格中有需要分页的内容。我已经尝试为此找到一个库，但我似乎找不到一个可以处理表格的库。任何人都可以提出建议吗？

这是我的表结构：

```
<table>
  <tbody>
    <tr>
      <td>
        <img>
        <p>
          <a></a>
        </p>
      </td>
      <td>
        <img>
        <p>
          <a></a>
        </p>
      </td>
      <td>
        <img>
        <p>
          <a></a>
        </p>
      </td>
      <td>
        <img>
        <p>
          <a></a>
        </p>
      </td>
      <td>
        <img>
        <p>
          <a></a>
        </p>
      </td>
    </tr>
    <tr>
      <td>
        <img>
        <p>
          <a></a>
        </p>
      </td>
    </tr>
  </tbody>
</table>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:14:56.030

试试这个（jQuery 分页插件）： http: [//archive.plugins.jquery.com/project/pagination](http://archive.plugins.jquery.com/project/pagination)

# c++ - 标准库容器迭代器的递增/递减迭代器是确定性的吗？

> ID：13382622
> 
> 赞同：1
> 
> 时间：2012-11-14T16:12:53.060
> 
> 标签：c++, iterator, deterministic

增加/减少标准库集合（例如 std::map）的迭代器所需的时间是否有上限？（假设容器本身没有改变。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:22:40.147

`std::map`保证迭代器的增量操作具有*摊销的常数*成本。也就是说，*n个*元素的完全遍历是O( *n* )。这实际上适用于*所有*迭代器（参见 24.2.1/8）：

> 迭代器的所有类别只需要在恒定时间内（摊销）对给定类别可实现的那些函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:18:14.040

不，增加/减少迭代器所需的时间没有上限。该标准没有说明任何程序需要多长时间才能运行。据我所知，所有流行的编译器也都对这个问题保持沉默。

然而，话虽如此，典型的实现并没有做任何需要大量时间的事情。没有内存分配或文件 IO（我想除了 VM 页面输入。）

# jquery - 无法使用 JQuery 使 AJAX 在 Rails 中工作

> ID：13382624
> 
> 赞同：0
> 
> 时间：2012-11-14T16:13:01.033
> 
> 标签：jquery, ruby-on-rails, ajax, coffeescript

我正在开发一个 Rails 项目并尝试使用 $.post 从服务器获取一些数据，但没有任何反应。有没有人看到有什么问题？

HTML 文件

```
<a id="ta" role="button" class="btn">tzt</a>
<div id="ggg">Code goes here</div> 
```

.js 文件

```
$ ->
$('#ta').click (e) ->
    e.preventDefault()
    $.post "/hype", (data)
    $("#ggg").html data 
```

路线.rb

```
match '/hype',    to: 'items#xxx' 
```

控制器.rb

```
def xxx
@item = Item.last
return render :text => "New Text"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:18:28.760

.js 文件应该是这样的

```
$ ->
  $('#ta').click (e) ->
    e.preventDefault()
    $.post "/hype", (data) ->
      $("#ggg").html data 
```

发布后需要函数调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:05:09.043

尝试：.js 文件

```
 $.post('/hype', function(data) {
      $("#ggg").html(data);
    }); 
```

控制器.rb

```
def xxx
@item = Item.last
render :text => "New Text"
end 
```

为了确保 url 没问题，只需在浏览器地址栏中进行测试

# ruby-on-rails - Rails 2 项目中的 API 版本控制

> ID：13382629
> 
> 赞同：2
> 
> 时间：2012-11-14T16:13:14.350
> 
> 标签：ruby-on-rails, api, rest, versioning, ruby-on-rails-2

我有一个使用 Rails 2.3.14 和 Ruby 1.8.7 运行的项目。我想为我们的 RESTful API 实现一个版本控制系统，类似于[http://railscasts.com/episodes/350-rest-api-versioning](http://railscasts.com/episodes/350-rest-api-versioning)中显示的内容。

我发现将其转换为 Rails 2.x 项目有些困难。特别是，用于设置路由的具有约束和默认值的作用域模块：

```
namespace :api, defaults: {format: 'json'} do
  scope module: :v1, constraints: ApiConstraints.new(version: 1) do
    resources :products
  end
  scope module: :v2, constraints: ApiConstraints.new(version: 2, default: true) do
    resources :products
  end
end 
```

我可以做些什么来在 Rails 2 中获得相同的行为吗？理想情况下，这会将版本控制信息保留在标头中，但我也可以使用在 url (../api/v1/...) 中维护的解决方案，只要排除版本号也可以路由到默认版本。例如，如果 API 是版本 2，那么 /api/users 应该路由到与 /api/v2/users 相同的位置，同时仍然允许通过指定版本来访问旧版本（即 /api/v1/用户仍然路由到 API 的版本 1）。

谢谢，

西蒙

# knockout.js - 用表外字段淘汰更新表结果

> ID：13382632
> 
> 赞同：0
> 
> 时间：2012-11-14T16:13:22.750
> 
> 标签：knockout.js

我的桌子外面有一个文本框，正在创建淘汰赛。我想让用户更新该字段，然后更新表中的数据。我创建了以下小提琴，显示了我正在尝试做的事情。

我用过

```
self.final = ko.computed(function() {
return (self.sales() + $("#increase").val() * self.multiplier();
}); 
```

但它似乎不会导致表更新。

小提琴[http://jsfiddle.net/Rarewood/SdL87/5/](http://jsfiddle.net/Rarewood/SdL87/5/)

我正在尝试使用这个简单的答案来回答我更复杂的问题。我正在使用 json 数据源。

```
 self.getCalcData = function (mypath,index) {
            self.calcList.removeAll();
            $.getJSON(mypath, function (allData) {
                var mappedLogs = $.map(allData, function (item) { return new CalcList(item) });
                self.calcList(mappedLogs);
            });
        }; 
```

有了这个数据功能

```
function CalcList(data) {
        var self = this;
        self.category = ko.observable(data.CATEGORY);
        self.sales = ko.observable(data.SALES);
        self.growthinput = ko.observable();
}; 
```

和视图模型

```
function LogEntryViewModel() {
        var self = this; 
        self.calcList = ko.observableArray([]);
        self.sales = ko.observable();
        self.growthinput = ko.observable();
}; 
```

我不能安静地得到第一个答案来使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:38:58.733

使其工作的一种方法是让淘汰赛也为您的文本框进行绑定。

在你的上创建一个新的 observable 属性`viewmodel`

```
self.increase = ko.observable(200); 
```

并将其绑定在您的视图中：

```
<input id="increase" type="text" data-bind="value: increase"/> 
```

然后将此属性传递给您的`Category`对象：

```
new Category(self.increase,  "shoes" , 200,  .1 ) 
```

然后您可以`increase`在计算中使用：

```
self.final = ko.computed(function() {
      return self.sales() *  increase() * self.multiplier(); 
    }); 
```

[请参阅演示小提琴。](http://jsfiddle.net/nemesv/KAyYy/)

# windows - 如何在 PowerShell 中批量重命名文件？

> ID：13382638
> 
> 赞同：51
> 
> 时间：2012-11-14T16:13:49.017
> 
> 标签：windows, powershell

我正在尝试执行以下操作：

```
Rename-Item c:\misc\*.xml *.tmp 
```

我基本上想将目录中每个文件的扩展名更改为`.tmp`而不是`.xml`. 我似乎无法在 PowerShell 中找到直接的方法来执行此操作。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-14T16:30:56.040

`Rename-Item`从使用命令检索的帮助文档中的示例 4 中：

```
get-help Rename-Item -examples 
```

例子：

```
Get-ChildItem *.txt| Rename-Item -NewName { $_.Name -replace '\.txt','.log' } 
```

*请注意帮助文档中对替换命令中的转义反斜杠的解释，因为它使用正则表达式来查找要替换的文本。*

为确保 regex`-replace`运算符仅匹配字符串末尾的扩展名，请包含 regex end-of-string character `$`。

```
Get-ChildItem *.txt | Rename-Item -NewName { $_.Name -replace '\.txt$','.log' } 
```

这解决了@OhadSchneider 在评论中提到的情况，我们可能有一个名为的文件`lorem.txt.txt`，我们希望以`lorem.txt.log`而不是`lorem.log.log`.

现在正则表达式的目标足够紧密，并且受到@etoxin 的回答的启发，我们可以使命令更有用，如下所示：

```
Get-ChildItem | Rename-Item -NewName { $_.Name -replace '\.txt$','.log' } 
```

也就是说，如果我们的正则表达式在管道之后充分过滤，则无需在管道之前进行过滤。并且在两个地方不再需要更改命令字符串（例如，如果您复制上述命令并且现在想使用它来更改“.xml”文件的扩展名）。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-05-07T04:21:18.890

当您在所需的目录中时，这也很有效。

```
Dir | Rename-Item –NewName { $_.name –replace "old","new" } 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-03-26T22:37:13.800

现有的答案建议`-replace`操作员，但如果文件被调用`a.xml.xml`怎么办？两个`.xml`子字符串都将被替换，最终结果将是`a.tmp.tmp`. 幸运的是，有一个 .NET 方法可以做到这一点：

```
Dir *.xml | rename-item -newname { [io.path]::ChangeExtension($_.name, ".tmp") } 
```

（[Manish Kumar](https://stackoverflow.com/a/26519728/67824)很接近，`GetFileNameWithoutExtension`但这更优雅，可能更有效率，并不是说在这种情况下它过于重要）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-16T21:16:46.317

这是另一个可行的变体。

```
dir *.xml | Rename-Item -NewName {$_.BaseName + ".tmp"} 
```

`$_.BaseName`将使用没有（最后一个）扩展名的“基本”名称。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-04-20T04:46:09.917

使用别名的缩短版本将是：

```
ls *.xml | ren -new {$_.BaseName + ".tmp"} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-10-23T01:10:46.493

```
dir -Recurse | where-object -FilterScript {$_.Extension -eq ".xml"} | Rename-Item -NewName {[System.IO.Path]::GetFileNameWithoutExtension($_.fullname) + ".tmp"} 
```

使用 -WhatIf 先评估结果

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-07-18T15:16:46.407

更容易——记住替换搜索字符串是一个正则表达式，

```
dir *.xml | rename-item -newname {$_.name -replace "xml$","tmp"} 
```

"$" 代表字符串的结尾，因此字符 "xml" 必须是文件名的最后三个字符。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-12T23:22:21.913

这似乎可行，并且是一个pythonic，即简单胜于复杂（[https://www.python.org/dev/peps/pep-0020/](https://www.python.org/dev/peps/pep-0020/)）的方式（一旦您在目录中）：

```
$files = Get-ChildItem -file -Filter *.xml;
  ForEach ($file in $files)
  {
  $n = $file.Basename
  Copy-Item -Path $file -Destination "$n.tmp"
  Remove-Item "$n.xml"
  } 
```

# ssis - 将 DTS 包调用到控制流时出错

> ID：13382639
> 
> 赞同：1
> 
> 时间：2012-11-14T16:13:52.077
> 
> 标签：ssis

为文件转换创建了 DTS 包，并保存为文件系统。现在我正在尝试使用“执行包任务”调用该包。我提供了所有连接，保存并关闭了项目。当我重新打开正在尝试执行的项目时，在执行时它将自动调用该包并允许执行。但是在执行时它会显示包“**已经打开**”的错误......任务本身打开包然后它将如何显示这个错误，因此我的整个包将变得失败..任何人都可以解释解决这个问题吗？

# objective-c - 用于插入 BOOL 值的替换文本值是什么，Obj-C，Cocoa-Touch

> ID：13382643
> 
> 赞同：0
> 
> 时间：2012-11-14T16:14:03.540
> 
> 标签：objective-c, cocoa-touch, nsstring

我知道这很可悲，但是当我有一个`NSString`并且我希望它有一个`int`值时，我会使用`%d`它里面的字符串值。我有什么用`BOOL`。我试过`%b`了，但什么也没做。它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:17:37.013

只需使用 %d，BOOL 是一个整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:22:49.823

听起来这些对应于[`printf`](http://en.cppreference.com/w/c/io/fprintf)格式说明符，它缺乏打印布尔值的能力。

您可以`%d`像使用整数（它是）一样使用它，或者在它为真时打印两个字符串之一：`%s`作为格式说明符，参数在`(b) ? "true" : "false"`哪里`b`是你的`BOOL`变量。

注意：这是从 C 程序员的角度来看的；您可能必须稍微不同地编写这些字符串常量。如果`%s`这里的说明符需要一个`NSString`，您可能应该使用`@"true"`and`@"false"`来代替。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:23:45.157

如果你想要更易读的东西，你总是可以定义一个宏来给你可读的输出

```
#define STRING_FROM_BOOL(b) (b ? @"YES" : @"NO")

NSLog(@"%@", STRING_FROM_BOOL(NO)); //=> NO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T16:16:23.110

正在考虑类似的事情：

```
NSString* num = @"1";
BOOL b = [num intValue]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T16:19:02.983

这里没有布尔[print_f ref的说明符](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)

# jquery - 设置超时禁用

> ID：13382644
> 
> 赞同：1
> 
> 时间：2012-11-14T16:14:05.253
> 
> 标签：jquery, settimeout, slidetoggle

我有个问题。我有这个菜单，点击时会出现下拉菜单，如果什么也没发生，我希望它在 5 秒后返回。我走到这一步了。但是有一个小故障，当我单击它返回时，它会在 5 秒后出现而无需询问。它是否可以检查它是否仍然可见然后返回，如果没有，保持冷静并继续？

这是代码：

```
$(document).ready(function () {
  $('#aktivs-share').click(function() {     
  $('#share').slideToggle('slow', function() {  });
  setTimeout(function() {
  $('#share').slideToggle('slow', function() {  });
}, 5000);
});
 $('#aktivs').click(function() {
  $('#valodas').slideToggle('slow', function() {  });
  setTimeout(function() {
  $('#valodas').slideToggle('slow', function() {  });     
 }, 5000); 
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:28:42.570

您需要跟踪菜单所处的状态，如果菜单处于关闭状态，则使用 clearTimeout() 清除超时。

（代码未经测试，但希望你明白）

```
    var shareOpen = false;
    var shareTimeoutHandle = 未定义；
    $('#aktivs-share').click(function() {
        $('#share').slideToggle('slow', function() { });

        // 检查当前状态，如果已经打开，关闭并重置
        if (shareOpen) clearTimeout(shareTimeoutHandle);
        别的 {
            shareTimeoutHandle = setTimeout(function() {
                $('#share').slideToggle('slow', function() { });
            }, 5000);
        }
        // 将新状态设置为相反
        shareOpen = !shareOpen;
    });

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:15:16.560

记住 的返回值`setTimeout`，它是一个句柄，您可以使用它来取消它[`clearTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)。

在您的情况下，由于您想要做的事情不止一件事，因此最好将计时器句柄实际存储*在*元素上，通过[`data`](http://api.jquery.com/data).

您可能会考虑为自己编写一个插件方法来执行此操作，以避免重复逻辑。`slideToggleAutoClose`或者其他的东西。:-)

# opengl - 在 3D 上下文上绘制 2D 点

> ID：13382646
> 
> 赞同：0
> 
> 时间：2012-11-14T16:14:09.807
> 
> 标签：opengl, 3d, vala

```
private void init_video () {
    uint32 video_flags = SurfaceFlag.SWSURFACE | SurfaceFlag.OPENGL;
    screen = Screen.set_video_mode (SCREEN_WIDTH, SCREEN_HEIGHT, SCREEN_BPP, video_flags);
    if (screen == null) stderr.printf ("Could not set video mode.\n");

    glClearColor (0.0f, 0.0f, 0.0f, 1.0f);
    glMatrixMode (GL_PROJECTION);
    glLoadIdentity ();
    glFrustum (-2.0f, 2.0f, -2.0f, 2.0f, 1.0f, 300.0f);
    glMatrixMode (GL_MODELVIEW);
    glEnable (GL_DEPTH_TEST);
    glEnable (GL_TEXTURE_2D);

    SDL.WindowManager.set_caption ("Title", "Title");
} 
```

这就是我为正在开发的游戏设置相机的功能。我有这个功能来绘制一个立方体：

```
public void draw () {
    glLoadIdentity ();
    glTranslatef (x, y, z);
    glScalef (size, size, size);
    glRotatef (x_angle, 1.0f, 0.0f, 0.0f);
    glRotatef (y_angle, 0.0f, 1.0f, 0.0f);
    glRotatef (z_angle, 0.0f, 0.0f, 1.0f);
    glBegin (GL_QUADS);

    /* Front face */
    glColor3f (1.0f, 0.0f, 0.0f);
    glVertex3f (0.5f, 0.5f, 0.5f);
    glVertex3f (-0.5f, 0.5f, 0.5f);
    glVertex3f (-0.5f, -0.5f, 0.5f);
    glVertex3f (0.5f, -0.5f, 0.5f);

    /* Left face */
    glColor3f (0.0f, 1.0f, 0.0f);
    glVertex3f (-0.5f, 0.5f, 0.5f);
    glVertex3f (-0.5f, -0.5f, 0.5f);
    glVertex3f (-0.5f, -0.5f, -0.5f);
    glVertex3f (-0.5f, 0.5f, -0.5f);

    /* Back face */
    glColor3f (0.0f, 0.0f, 1.0f);
    glVertex3f (0.5f, 0.5f, -0.5f);
    glVertex3f (-0.5f, 0.5f, -0.5f);
    glVertex3f (-0.5f, -0.5f, -0.5f);
    glVertex3f (0.5f, -0.5f, -0.5f);

    /* Right face */
    glColor3f (1.0f, 1.0f, 0.0f);
    glVertex3f (0.5f, 0.5f, 0.5f);
    glVertex3f (0.5f, -0.5f, 0.5f);
    glVertex3f (0.5f, -0.5f, -0.5f);
    glVertex3f (0.5f, 0.5f, -0.5f);

    /* Top face */
    glColor3f (0.0f, 1.0f, 1.0f);
    glVertex3f (0.5f, 0.5f, 0.5f);
    glVertex3f (-0.5f, 0.5f, 0.5f);
    glVertex3f (-0.5f, 0.5f, -0.5f);
    glVertex3f (0.5f, 0.5f, -0.5f);

    /* Bottom face */
    glColor3f (1.0f, 0.0f, 1.0f);
    glVertex3f (0.5f, -0.5f, 0.5f);
    glVertex3f (-0.5f, -0.5f, 0.5f);
    glVertex3f (-0.5f, -0.5f, -0.5f);
    glVertex3f (0.5f, -0.5f, -0.5f);
    glEnd ();
} 
```

如何像 2D 上下文一样绘制点？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:49:13.210

OpenGL 中没有 2D 上下文。一切都是3d。但是您可以使用[glOrtho的平行投影来模拟 2d](http://www.opengl.org/sdk/docs/man2/xhtml/glOrtho.xml)

```
// Setup Orthogonal projection to window coordiantes
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(0, WindowWidth-1, 0, WindowHeight-1, -1, 1);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

// draw quad in screen coodinates
glBegin(GL_QUADS);
    glColor3f(1.0f, 1.0f, 1.0f);
    glVertex2i(10, 10);
    glVertex2i(10, 80);
    glVertex2i(80, 80);
    glVertex2i(80, 10);
glEnd (); 
```

glVertex2 就像 glVertex3 一样，第三个坐标设置为 0。

在 OpenGL 4中，上述**所有命令都被删除了。**但是 glOrtho 文档向您展示了在窗口坐标中设置渲染所需的矩阵。

# python - 在 Python 中动态导入类

> ID：13382650
> 
> 赞同：1
> 
> 时间：2012-11-14T16:14:27.410
> 
> 标签：python

我想从给定的字符串动态加载一个类。但是，我不知道该类将在哪个文件中，所以我必须搜索所有文件。我已经尝试过了，但`AttributeError: 'module' object has no attribute 'MyClass'`即使我 100% 确定该模块（在当前迭代中）具有该类，我也得到了：

```
target = 'MyClass'
module_names = [mf[0:-3] for mf in os.listdir('application/models') if mf.endswith(".py")]
modules = [imp.new_module(x) for x in module_names]
for module in modules:
    try:
        target_class = getattr(module, target)
    except ImportError, AttributeError:
        continue

if target_class:
    print 'found class' 
```

看来我真的很接近了。我想要的不是将搜索限制在一个文件夹中，而可能是多个文件夹。我的代码有什么问题？

编辑：好的，现在我正在尝试这样的事情，但仍然遇到同样的错误：

```
 for m in module_names:
        try:
            x = reload(__import__(m))
            target_class = getattr(x, target)
        except ImportError, AttributeError:
            continue
        else:
            break

    if target_class:
        print 'found class' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:20:59.850

从文档上看[`imp.new_module`](http://docs.python.org/2/library/imp.html#imp.new_module)，返回的模块是**空**的。这意味着它永远不会包含您的课程。

也许您想要做的是将您的目标目录添加到`sys.path`并用于`__import__`动态导入这些模块，然后检查您的类？

* * *

以下代码适用于我：

```
modules = ['foo','bar']
for mod in modules:
    try:
        x = reload(__import__(mod))
    except ImportError:
        print "bargh! import error!"
        continue
    try:
        cls = getattr(x,'qux')
    except AttributeError:
        continue

a = cls()
print a.__class__.__name__ 
```

在同一目录中的位置`foo.py`和位置：`bar.py`

```
#foo.py
class foo(object):
    pass 
```

和：

```
#bar.py
class qux(object):
    pass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:20:57.580

根据[文档](http://docs.python.org/2/library/imp.html#imp.new_module) `new_module`返回和*空*模块：

> imp.new_module(name)
> 返回**一个名为 name 的新空模块**对象。此对象未插入 sys.modules。

您可能想查看[imp.load_source](http://docs.python.org/2/library/imp.html#imp.load_source)。这只是一个简单的例子：

```
class Test:
    pass 
```

和

```
In [19]: m = imp.load_source("test", "./test.py")
In [20]: getattr(m, "Test")
Out[20]: <class test.Test at 0x1fe6120> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T16:28:51.063

按照[imp 文档](http://docs.python.org/2/library/imp.html#examples)中的示例：

名为 hello.py 的同一目录中的文件：

```
def myFunction():
        return "Hello World!" 
```

动态导入 hello (w/o try except finally)：

```
fp, pathname, description = imp.find_module("hello")
hello = imp.load_module("hello", fp, pathname, description)
hello.myFunction() # returns 'Hello World!' 
```

# abap - 双击将输出转发到交易

> ID：13382656
> 
> 赞同：2
> 
> 时间：2012-11-14T16:14:49.483
> 
> 标签：abap, sap-erp, dynpro

我制作了一个程序，它使用 . 输出设备编号列表`WRITE`。交易`IE03`让用户输入设备编号，执行，然后显示关于该设备的一大堆信息。

我想做的是能够双击我的程序输出的数字之一，然后显示`IE03`将提供的数据。

如何将我的自定义程序与标准显示功能集成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T19:02:31.873

首先，不要`WRITE`用来创建列表——这是石器时代的技术。将数据存储在基于字典结构的内部表中，然后使用 SALV 库创建列表。查看示例程序`SALV_DEMO_TABLE_EVENTS`，了解如何显示列表并对双击做出反应。请注意，您可以丢弃大部分演示程序，因为它显示了很多不同的功能。

然后，您不会将任何内容“转发”到交易中。您可以使用 ABAP 语句调用事务`CALL TRANSACTION`（这应该很明显），您甚至可以使用 SPA/GPA 参数和附加的`... AND SKIP FIRST SCREEN`. 请注意，这仅适用于某些类型的交易，并且只有在它们被编程为这样做时才有效。为此，您需要使用将设备编号存储在全局变量中

```
SET PARAMETER ID 'EQN' FIELD l_my_equipment_number. 
```

然后调用事务

```
CALL TRANSACTION 'IE03' AND SKIP FIRST SCREEN. 
```

**请注意，此语句不执行默认授权检查 - 如果您需要这样做，请使用`AUTHORITY_CHECK_TCODE`关键字文档指定的功能模块。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:33:57.863

使用给出**vwegert**的建议，或者：

```
报告 ztest。

常数：
  gc_equpment_view_tcode TYPE sytcode VALUE 'IE03'。

数据：
      gt_eqkt eqkt 类型表，
      gs_eqkt 类型 eqkt。

开始选择。
  从 eqkt 中选择 * 到表 gt_eqkt 的相应字段中
  加入 equi ON ( equi~equnr EQ eqkt~equnr ) 最多 10 行
  WHERE eqkt~spras EQ sy-langu。

选择结束。
  在 gt_eqkt 处循环进入 gs_eqkt。
    写：/gs_eqkt-equnr，gs_eqkt-eqktx。
    隐藏：gs_eqkt-equnr。
  ENDLOOP。

在线选择。
  CALL FUNCTION 'AUTHORITY_CHECK_TCODE' " 检查 S_TCODE auth.object
    出口
      tcode = gc_equpment_view_tcode
    例外情况
      好的 = 1
      not_ok = 2
      其他 = 3。
  IF sy-subrc EQ 1。
    设置参数 ID 'EQN' 字段 gs_eqkt-equnr。
    "检查 I_TCODE auth. 对象（参见 IE03 定义）
    调用事务 gc_equpment_view_tcode 并跳过第一个屏幕。
  万一。

```

# c++ - OpenGL 和 GLUT 中 0x009f240e 处的未处理异常 - 101.exe：0xC0000005：访问冲突写入位置 0x00000000

> ID：13382658
> 
> 赞同：-4
> 
> 时间：2012-11-14T16:14:53.507
> 
> 标签：c++, dereference, null-pointer

我不断收到以下错误：OpenGL 和 GLUT 中 0x009f240e 处的未处理异常 - 101.exe：0xC0000005：访问冲突写入位置 0x00000000。

我在这里发现了一些带有类似错误代码的问题，但他们似乎都说问题是：取消引用 NULL 指针。但是，我似乎找不到任何可以真正解释这意味着什么或该怎么做的东西。

这是我的代码的一个小示例：

```
Tree* myTree; //global variable pointer

int main (int argc, char** argv)
{   
      fstream file = fstream ("Tree.txt");

      *myTree = Tree(file);   // This is where the error is occuring
} 
```

如果有人对我可以做些什么来解决这个问题有任何建议或想法，请告诉我。如果我应该添加任何其他代码，也请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:17:42.590

这个：

```
*myTree = Tree(file); 
```

通过取消引用未初始化的指针来写入未分配的内存。指针似乎指向 0，这解释了该地址的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:26:12.530

我猜你想要做的是创建一个实例`Tree`并让全局指针`myTree`指向它。

如果是这种情况，您的问题在于您用于创建和分配该实例的语法。`*myTree`实际上[取消引用指针](https://stackoverflow.com/questions/4955198/what-does-dereferencing-a-pointer-mean)，并且您尝试将其分配给`Tree(file)`

您需要做的是`Tree`使用`new`运算符创建一个实例，并将返回值（它是指向新创建实例的指针）分配给指针 myTree（与取消引用的 *myTree 相对）。

```
int main (int argc, char** argv)
{   
      fstream file = fstream ("Tree.txt");

      myTree = new Tree(file);   // Create a new instance of Tree and store its pointer in myTree
} 
```

完成后不要忘记`operator new`通过调用`delete`来释放由创建的内存`myTree`。

# delphi - Delphi中检测目录是否为联结

> ID：13382668
> 
> 赞同：16
> 
> 时间：2012-11-14T16:15:22.680
> 
> 标签：delphi, junction

我一直在谷歌搜索这个我可能有一些大脑云，因为它不起作用。

我需要检测一个文件夹是否是一个连接点，这样我的递归文件搜索就不会陷入无限循环。

我可以使用一个简单的函数，比如

```
IsJunction(attr: dword): boolean; 
```

其中 attr`dwFileAttributes`来自 TWin32FindData；

我似乎无法让它工作。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T18:24:44.237

`dwFileAttributes`of`TWin32FindData`没有那个信息，你得去`dwReserved0`外地看看。请参阅[文档](http://msdn.microsoft.com/en-us/library/aa365511%28v=vs.85%29.aspx)。

```
function IsJunction(const FileName: string): Boolean;
//  IO_REPARSE_TAG_MOUNT_POINT = $A0000003;
var
  FindHandle: THandle;
  FindData: TWin32FindData;
begin
  Result := False;
  FindHandle := FindFirstFile(PChar(FileName), FindData);
  if FindHandle <> INVALID_HANDLE_VALUE then begin
    Result := (Bool(FindData.dwFileAttributes and FILE_ATTRIBUTE_REPARSE_POINT))
              and Bool(FindData.dwReserved0 and $80000000) // MS bit
              and Bool(FindData.dwReserved0 and $20000000) // name surrogate bit
              and (LoWord(FindData.dwReserved0) = 3); // mount point value
    winapi.windows.FindClose(FindHandle);
  end else
    RaiseLastOSError;
end; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-14T17:52:19.900

您也可以尝试[`JCL`](http://sourceforge.net/projects/jcl/)（JEDI 代码库）[`JclNTFS`](http://svn.excastle.com/tyler_delphi/trunk/vendor/jcl/windows/JclNTFS.pas)单元。
它有一些处理连接的方法，例如：
`NtfsIsFolderMountPoint`/ `NtfsGetJunctionPointDestination`。

# c# - 如何将具有一个参数的方法放入线程 C#

> ID：13382670
> 
> 赞同：0
> 
> 时间：2012-11-14T16:15:29.153
> 
> 标签：c#, multithreading

> **可能重复：**
> [带参数的 C# ThreadStart](https://stackoverflow.com/questions/1195896/c-sharp-threadstart-with-parameters)

如何将具有一个参数的方法放入线程 C#。

例子：

```
Thread thread = new Thread(SoundInputThread.getSomething(hz));
                 thread.Start();
                 for (int i = 0; i < 5; i++) {
                     Console.WriteLine();
                     Thread.Sleep(1000);
                 }

     public static void getSomething(int hz) {
            hz = 100;
            Console.WriteLine();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:17:23.577

您可以按如下方式捕获该值：

```
Thread thread = new Thread(() => {
   getSomething(hz);
});
thread.Start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:18:26.227

您需要使用 Thread 的重载构造函数，它采用[**ParameterizedThreadStart**](http://msdn.microsoft.com/en-us/library/system.threading.parameterizedthreadstart.aspx)它将允许将参数传递给线程方法。在该方法中，您可以将对象返回到您的类型。

```
thread = new Thread(new ParameterizedThreadStart(getSomething));
thread.Start(2);

public static void getSomething(object obj) {
      int i = (int)obj;
} 
```

# ruby-on-rails - ul li 中的 Rails 渲染集合

> ID：13382673
> 
> 赞同：6
> 
> 时间：2012-11-14T16:15:40.853
> 
> 标签：ruby-on-rails, collections, haml, render, partial

我有一个名为 Post 的模型，我很想只使用 ONE 部分 + ONE 布局来实现以下目标。

渲染单个对象时，输出：

```
%div= post.body 
```

并在渲染集合时，输出：

```
%ul
  %li= post.body
  %li= post.body
  %li= post.body 
```

* * *

目前我有部分帖子/post.haml 看起来像：`%li= post.body`

每当我渲染一个集合时，我都会做`%ul=render @posts`

问题是：

1.  每当渲染一个集合时，我必须将渲染放在 %ul
2.  没有 %ul 的部分不能用于单个对象

尽管在我 90% 的用例中，我都在渲染一组帖子，但不将帖子部分用作独立模板是没有意义的。

* * *

我以为我可以做类似的事情

```
# view
render partial: 'post', collection: @posts, layout: 'list_of_posts'

# list_of_posts
%ul= yield

# posts/post
%li= post.body 
```

如果它有效，这将解决我的第一个问题，但它没有。显然 render_collection 不采用布局选项，所以它实际上是我在渲染集合中可以找到的死胡同。（Spacer_template 可能会起作用，但是

1.  `</li><li>`作为垫片绝不是一段好的代码..
2.  haml 不允许这样做）

* * *

至于我的第二个问题，一个简单的方法是在 div 中渲染所有内容，但是当事情应该在列表中时，我真的不愿意这样做。但为了让它发挥作用，它可能是唯一干净的解决方案。`div.list-of-posts > div.post`代替`ul.posts > li`

* * *

我知道我总是可以做类似的事情

```
# view - collection
%ul= render @posts, in_list: true

# view - object
= render @post

# posts/post.haml
- post_counter ||= false
- tag = post_counter ? :li : :div
= content_tag tag do
  = post.body 
```

但在这种情况下，每当通过集合时，我仍然需要放置一个 %ul 。

否则我可以做一些类似的事情，但也许更干净一点：

```
# view - collection of objects
= render 'posts', posts: @posts

# view - object
= render @post

# posts/posts.haml
%ul
  = render post

# posts/post.haml
- post_counter ||= false
- tag = post_counter ? :li : :div
= content_tag tag do
  = post.body 
```

这是迄今为止我能想到的最好/最干净的方法，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:21:51.653

您可以有一个局部，在局部内部，它可以检查传递给它的本地是一个集合还是单个 Post 对象。

```
# Render calls
render :partial => "posts/display_posts", :locals => {:posts => Post.first}
render :partial => "posts/display_posts", :locals => {:posts => Post.all} # collection 
```

而你的部分：

```
- if posts.is_a? Post # single item
  %div= posts.body
- else
  %ul
  - posts.each do |post|
    %li= post.body 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:20:19.170

添加另一个渲染`li`标签的部分，然后调用常规部分：

*   应用程序/视图/帖子/index.html.haml

    ```
    %ul.posts= render collection: @posts, partial: "posts/post_li" 
    ```

*   app/views/posts/_post_li.html.haml

    ```
    %li= render post 
    ```

*   应用程序/视图/帖子/_post.html.haml

    ```
    = div_for post do
      .... 
    ```

# java - byte - 2 然后下一次 +2 不起作用......为什么？

> ID：13382674
> 
> 赞同：0
> 
> 时间：2012-11-14T16:15:42.003
> 
> 标签：java, encryption, byte

我得到了一个文件的字节数组字符串，并希望每个字节都被减去 2 或类似的值，然后再被加上 2。我想这样做：

```
byte buffer[] = new byte[(int) file.length()];
try {
    in = new FileInputStream(file);
    in.read(buffer);

    for(int i = 0; i < buffer.length; i++){
        buffer[i] = (byte) (buffer[i]-2); // and then later +2
    }
} 
```

但它不起作用。首先它会像我想要的那样更改文件，但后来当我把整个事情 +2 时，它给了我一些奇怪的东西。

所以我想要这个：

1.  获取一个字节数组，称为`buffer`
2.  然后更改一些值
3.  将这些值改回来
4.  获取与以前相同的文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T20:03:21.853

您的代码中有一些错误：

1.  `new byte[(int) file.length()];`这将最终导致 OutOfMemoryError 或文件的损坏读取
2.  `in.read(buffer);`这只会读取文件的*一些*字节。
3.  您用“加密”标记了这个问题。这根本不是加密。“解密”内容将非常容易。

您的文件仍然是相同的长度吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T20:55:00.767

您需要使用`in.read()`调用的返回值来准确了解实际读入缓冲区的字节数，以及要写入输出的字节数。

# java - Java 日志记录打开“太多”日志文件

> ID：13382679
> 
> 赞同：4
> 
> 时间：2012-11-14T16:15:49.107
> 
> 标签：java, java.util.logging

这有点奇怪，但我不熟悉日志记录包及其属性的使用。我可以通过谷歌搜索找到的所有问题都是“如何使日志记录打开多个文件？” 但我今天的问题是如何让它**停止**同时处理多个文件。开始了...

首先要做的事情：这个项目仅限于使用 java.util.logging，不，我不能切换到 log4j 或任何其他第三方包，是的，我知道它们应该更棒。:-)

所以当这个小程序启动时，它会运行这段代码：

```
import java.util.logging.Logger;
import java.util.logging.LogManager;

// in startup routine:
LogManager.getLogManager().readConfiguration(
  this.getClass().getResourceAsStream("/logging.properties")); 
```

从 JAR 中提取属性文件并应用它们，这是可行的。应该从`readConfiguration()`VM 启动重置所有现有设置。项目的其余部分有像

```
private final static Logger LOGGER = Logger.getLogger(NameOfClass.class.getName()); 
```

我认为这是非常标准的。我们所有的类都在同一个包中（例如称为 TheProject），时髦的日志记录名称/属性层次结构遵循相同的约定，因为这正是 java.util.logging 喜欢滚动的方式。

logging.properties 文件最初是 Java 6 SE JRE 附带的文件的副本，然后进行了修改。现在看起来像这样：

```
handlers=java.util.logging.FileHandler,java.util.logging.ConsoleHandler

# Default global logging level. 
.level=INFO

# Loggers 
# ------------------------------------------ 
# Loggers are usually attached to packages. 
# Here, the level for each package is specified. 
# The global level is used by default, so levels 
# specified here simply act as an override. 
java.level = INFO
javax.swing.level = INFO
sun.awt.level = INFO
theproject.level = ALL

# Handlers 
# -----------------------------------------
theproject.handlers=java.util.logging.FileHandler

# Override of global logging level 
java.util.logging.FileHandler.level=ALL

# Naming style for the output file: 
java.util.logging.FileHandler.pattern=/path/to/logfiles/TheProject%u.%g.log 
```

所有这些都“有效”，因为日志消息显示在 Java 控制台中，也出现在磁盘文件中。这是奇怪的部分：只要小程序运行，就会同时打开**两个**文件，TheProject0.0.log 和 TheProject1.0.log。当日志消息被触发时，它们会同时出现在两个文件中。这两个文件在任何时候都是彼此的精确副本，包括何时达到最大大小并（两者！）旋转。

我检查了一次只运行一个 JRE VM。

我检查过，在任何给定时间，要么打开两个文件，要么都关闭。这不像一个比另一个开放的时间更长或更短。

如果日志文件已被另一个进程打开，则两个文件名之间不同的 %u 标记被记录为“解决冲突的唯一编号”，但我**认为**这里不是这种情况，因为两个日志都获得相同的数据而没有否则打开文件。（证据：Windows 不会让我在 VM 运行时删除任何一个文件，但一旦 VM 最终退出它就会删除。）

我是在属性文件中做一些愚蠢的事情，还是误解了如何正确加载属性，或者......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:16:47.447

我认为不会[`readConfiguration()`](http://docs.oracle.com/javase/7/docs/api/java/util/logging/LogManager.html#readConfiguration%28java.io.InputStream%29)像您认为的那样有效。形成 JavaDocs：

> 重新初始化日志记录属性并从给定流中重新读取日志记录配置，该流应为 java.util.Properties 格式。读取属性后将触发 PropertyChangeEvent。
> 
> 如果目标 Logger 存在，则新配置文件中的任何日志级别定义都将使用 Logger.setLevel() 应用。

我不确定这是否真的重置了日志记录配置，或者只是附加/更新当前配置。

我想你可能需要先打电话[`reset()`](http://docs.oracle.com/javase/7/docs/api/java/util/logging/LogManager.html#reset%28%29)再打电话 [`readConfiguration()`](http://docs.oracle.com/javase/7/docs/api/java/util/logging/LogManager.html#readConfiguration%28java.io.InputStream%29)。

> 重置日志记录配置。
> 
> 对于所有命名的记录器，重置操作删除并关闭所有处理程序，并且（除了根记录器）将级别设置为空。根记录器的级别设置为 Level.INFO。

**编辑：**只是为了表明您的属性文件没有问题，您可以在`theproject`包中创建一个名为 test 的类，如下所示并运行它。只需确保删除现有的日志文件，这样您就知道在运行时创建了多少。

```
package theproject;

import java.util.logging.FileHandler;
import java.util.logging.Level;
import java.util.logging.LogManager;
import java.util.logging.Logger;
public class Test {

    private final static Logger LOGGER = Logger.getLogger(Test.class.getName());

    public static void main(String[] args) throws Exception {
        LogManager.getLogManager().readConfiguration(
                  Test.class.getResourceAsStream("/logging.properties"));
//      The only way I could get it to create two log files was to uncomment the line below that
//      adds another FileHandler to the root logger.
//      LogManager.getLogManager().getLogger("").addHandler(new FileHandler("/path/to/logfiles/TheProject%u.%g.log"));
        Test test = new Test();
    }   

    public Test(){
        LOGGER.log(Level.INFO, "Info");
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:09:00.713

@Joop 确定了它（在评论中，不能标记为答案）。事实证明，设置处理程序是一个**附加**过程，它不会简单地覆盖以前的设置。这对我来说似乎真的很不直观，但那是 java.util.logging 对你来说......保留所有其他属性，但删除处理程序分配，是要走的路。

我也在使用@jschoen 建议的 reset() 调用，因为这似乎是一件很聪明的事情！

非常感谢你们所有人。我不知道如何将这一切标记为“关闭”……是时候摆弄一下网站了。

# json - ISO-8859 和 NodeJS JSON.Stringify

> ID：13382681
> 
> 赞同：1
> 
> 时间：2012-11-14T16:15:57.463
> 
> 标签：json, node.js, localization, iso-8859-1

我在 NodeJS 中将翻译文件转换为 JSON。

我有这样的字符串：

```
Cadrer sur la sélection
Navigateur dépassé détecté ! 
```

我正在尝试将它们转换为 UTF-8，以便我可以对它们进行 json.stringify。

但是，我最终得到的字符串看起来像：

```
Navigateur d�pass� d�tect� ! 
```

下面是我的代码的简短示例...

```
var obj = {};
for(var i = 0; i < messages.length;i++){
    var iconv = new Iconv("ISO-8859-1", 'UTF-8');
    var buffer = iconv.convert(messages[i]); // the ISO-8859-1 str
    obj[i] = buffer.toString();
}
var jsonLocale = JSON.stringify(obj) 
```

提前致谢！

# batch-file - 如何将数据/文本从 url 读取到批处理文件中？

> ID：13382682
> 
> 赞同：0
> 
> 时间：2012-11-14T16:15:57.730
> 
> 标签：batch-file

无论如何要将数据/文本从 URL 读取到批处理文件中？
我在 Windows 上工作。

我正在尝试从以下链接阅读文本。
[http://www.zeetvusa.com/schedule/?zone=Central#](http://www.zeetvusa.com/schedule/?zone=Central#)

更特别的是现在播放，所以如果现在播放的是示例 Show1，那么我不会让我的孩子看到将在 VLC 播放器中打开的频道。

# c# - 使用单击事件访问同一类中的另一个变量

> ID：13382688
> 
> 赞同：2
> 
> 时间：2012-11-14T16:16:11.020
> 
> 标签：c#, labels

我有以下问题：

我想通过鼠标点击访问我的类中的一个变量。

我的课：

```
public class Box
{

    public Label LabelDown = new Label();
    public byte SavedID;

    public Box(EventHandler InsideEvent)
    {

        LabelDown.Text = null;
        LabelDown.Size = new Size(96, 32);
        LabelDown.Visible = true;
        LabelDown.Click += new EventHandler(InsideEvent);

        SavedID = 0;

    }
} 
```

现在，我`Array`在表单中创建了一个此类，使用：

```
 Box[] myBox = new Box[5]; 
```

在初始化我的表单的代码中，我添加了这个：

```
 for (byte j = 0; j <= myBox.Length(); j++)
     {
         mybox = new Box(Box_goInside_Click)
         Controls.Add(Box[j].LabelDown);
     } 
```

现在 Click 事件处理程序是：

```
 void Box_goInside_Click(object sender, EventArgs e)
     {

        //here i want to access the saved ID of MyBox that uses this Label
        Dosomething( whatever comes here. SavedID)

     } 
```

我希望你明白我的问题是什么......如果我使用 base 或其他任何东西，它会到达 Object，因为它只看到我的标签，而不是我的类 Box 的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:24:10.867

你有几个选择：

*   将 each 的引用放在 each`Box`的`Tag`属性中`Label`。
*   处理类中的事件`Click`事件`Box`，然后调用处理程序，将原始发送者 ( `Label`) 替换为`Box`自身。

第一个解决方案：

```
public Box(EventHandler InsideEvent)
{
    LabelDown.Text = null;
    LabelDown.Size = new Size(96, 32);
    LabelDown.Visible = true;
    LabelDown.Click += new EventHandler(InsideEvent);
    LabelDown.Tag = this;

    SavedID = 0;
}

void Box_goInside_Click(object sender, EventArgs e)
{
    Box box = (Box)((Control)sender).Tag;

    // Do your stuff
} 
```

第二种解决方案：

```
public class Box
{
    public Label LabelDown = new Label();
    public byte SavedID;

    public Box(EventHandler InsideEvent)
    {

        LabelDown.Text = null;
        LabelDown.Size = new Size(96, 32);
        LabelDown.Visible = true;
        LabelDown.Click += OnLabelClick;

        SavedID = 0;

        _insideEvent = InsideEvent;
    }

    private EventHandler _insideEvent;

    private OnLabelClick(object sender, EventArgs e)
    {
        if (_insideEvent != null)
            _insideEvent(this, e);
    }
}

void Box_goInside_Click(object sender, EventArgs e)
{
    Box box = (Box)sender;

    // Do your stuff
} 
```

# linux - 如何获取具有纪元时间格式的文件的最后修改时间，精度毫秒

> ID：13382695
> 
> 赞同：5
> 
> 时间：2012-11-14T16:16:32.740
> 
> 标签：linux

如何获取具有纪元时间格式的文件的最后修改时间，Linux系统上的精度毫秒

我试过stat，但它只能以秒为单位显示纪元时间有没有简单的方法来以毫秒为单位获取纪元时间

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-14T16:42:26.593

如果您使用的文件系统支持亚秒级精度（例如 ext4 支持，ext3 不支持），那么您可以通过`st_atim.tv_nsec`、`st_ctim.tv_nsec`和`st_mtim.tv_nsec`的字段获得纳秒级精度`struct stat`。这些值表示除了秒数`st_atime`和朋友之外的纳秒数。例如，您可以通过以下方式获得毫秒时间戳：

```
struct stat info;
stat("/etc", &info);
uint64_t access_ms       = info.st_atime * 1000 + info.st_atim.tv_nsec / 1000000;
uint64_t status_ms       = info.st_ctime * 1000 + info.st_ctim.tv_nsec / 1000000;
uint64_t modification_ms = info.st_mtime * 1000 + info.st_mtim.tv_nsec / 1000000; 
```

一秒钟有 1000 毫秒，所以你乘以它。一毫秒有 1000000ns，所以你除以它。

如果文件系统不支持亚秒级精度，则`tv_nsec`字段将始终为 0。这确保相同的代码也适用于不支持亚秒级精度的文件系统。

请注意，自纪元以来的毫秒数不能存储在 32 位值中。您至少需要 64 位。`uint64_t`由 提供`<stdint.h>`。或者，您可以使用`unsigned long long`.

# css - CSS：100% 页面高度，无滚动，在 IE7 中工作

> ID：13382697
> 
> 赞同：0
> 
> 时间：2012-11-14T16:16:39.043
> 
> 标签：css, internet-explorer, scroll, height

前言：我在这里阅读了大约 3 打关于 IE7 中 100% 高度 CSS 的答案，但似乎没有一个回答我这个极其简单的问题。如果这是重复的，我很抱歉，但我找不到现有的答案。

问题：我有一个简单的网站，左侧有一个导航栏。在某些页面上，页面内容需要向下滚动，而在其他页面上则不需要。

我想让导航背景一直延伸到页面底部，无论是否需要滚动，但如果内容不需要滚动，我不想引入滚动。

到目前为止，我发现了以下内容：

```
position: absolute;
height: 100%; 
```

如果不存在滚动并且内容自然需要滚动，则会导致添加滚动，背景将提前停止。

```
position: absolute;
bottom: 0; 
```

适用于 Firefox 和 Chrome，但不适用于 IE7+

我想出了一个在颜色的 HTML 元素上重复背景图像的解决方法，但这意味着如果我想更改颜色，我必须生成一个新图像，这看起来很愚蠢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:27:49.790

如果指定了某些文档类型，IE7 支持 position:fixed。

```
<!doctype html>
<html>
<head><title>title</title>
<style type="text/css">
html, body{ height:100%; margin:0; padding:0; }
.nav{ position:fixed; left:0; top:0; height:100%; background-color:#ccc; width:100px; }
.very-high{ height:3000px; margin-left:110px; }
</style>
</head>
<body>
    <div class="nav">div class="nav"</div>
    <div class="very-high">a div with height:3000px</div>
</body>
</html> 
```

[在 jsFiddle 上](http://jsfiddle.net/kdVGL/)创建了一个演示

# java - AdMob 测试广告未展示

> ID：13382702
> 
> 赞同：0
> 
> 时间：2012-11-14T16:16:58.863
> 
> 标签：java, android, admob

我使用以下代码：

```
 AdRequest adRequest = new AdRequest();
    adRequest.setTesting(true);
    adRequest.addTestDevice(AdRequest.TEST_EMULATOR);   
    adRequest.addTestDevice("the right id"); 
    AdView adView = (AdView)convertView.findViewById(R.id.ad);
    adView.loadAd(adRequest); 
```

具有以下布局：

```
 <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#fffff1c1"
        android:orientation="vertical"
        android:id="@+id/linlay" >

        <com.google.ads.AdView
        xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/ad"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ads:adSize="SMART_BANNER"
        ads:adUnitId="97f0f2e68d7e4b3c"
        />  
     </LinearLayout> 
```

但是没有显示广告。

我得到这个 logcat 输出：

```
14 17:14:37.990: I/Ads(11984): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL({"preqs":0,"session_id":"120070455177917556","seq_num":"1","slotname":"97f0f2e68d7e4b3c","u_w":360,"msid":"de.svennergr.polizeinews","adtest":"on","js":"afma-sdk-a-v6.2.1","bas_off":0,"net":"wi","app_name":"1.android.de.svennergr.polizeinews","hl":"de","smart_w":"full","gnt":2,"carrier":"26207","u_audio":3,"u_sd":2,"mv":"8015016.com.android.vending","isu":"F612B07AE7E85F9D4246F70B5C850CC3","cipa":0,"format":"360x50_mb","oar":0,"smart_h":"auto","ad_pos":{"height":0,"visible":0,"y":0,"x":0,"width":0},"u_h":592,"testing":1,"bas_on":0,"ptime":0});</script></head><body></body></html>
11-14 17:14:37.998: W/Ads(11984): loadAd called while the ad is already loading, so aborting.
11-14 17:14:38.373: I/Ads(11984): Received ad url: <url: "http://googleads.g.doubleclick.net:80/mads/mediate?preqs=0&session_id=120070455177917556&seq_num=1&slotname=97f0f2e68d7e4b3c&u_w=360&msid=de.svennergr.polizeinews&adtest=on&js=afma-sdk-a-v6.2.1&bas_off=0&net=wi&app_name=1.android.de.svennergr.polizeinews&hl=de&smart_w=full&gnt=2&carrier=26207&u_audio=3&u_sd=2&mv=8015016.com.android.vending&isu=F612B07AE7E85F9D4246F70B5C850CC3&cipa=0&format=360x50_mb&oar=0&smart_h=auto&u_h=592&bas_on=0&ptime=0&u_so=p&output=html&region=mobile_app&u_tz=-60&client_sdk=1&ex=1&gsb=wi&caps=inlineVideo_interactiveVideo_mraid1_th_mediation_sdkAdmobApiForAds_di&jsv=40" type: "gwhirl" afmaNotifyDt: "null" useWebViewLoadUrl: "false">
11-14 17:14:38.373: I/Ads(11984): Request scenario: Online server request.
11-14 17:14:38.568: I/Ads(11984): Caching gWhirl configuration for: 300 seconds
11-14 17:14:38.568: D/webviewglue(11984): nativeDestroy view: 0x5c4c1c58
11-14 17:14:38.568: W/Ads(11984): Mediation server returned ad size: '320x50_mb', while the AdView was created with ad size: '360x50_mb'. Using the ad-size passed to the AdView on creation. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:52:46.837

我只是输入了错误的发布者 ID。

# php - 使用 Google Drive API 下载没有错误但没有结果

> ID：13382707
> 
> 赞同：1
> 
> 时间：2012-11-14T16:17:27.537
> 
> 标签：php, google-drive-api, google-api-php-client

我正在尝试使用此[链接](https://developers.google.com/drive/v1/reference/files/get)下载文件。我做了一些修改。
但是当我尝试运行该文件时，它不会给我错误但也没有结果。它可以获取文件的downloadUrl，它也满足这个条件：

```
 if ($httpRequest->getResponseHttpCode() == 200) {
      echo "i'm here..";
      return $httpRequest->getResponseBody();
 } 
```

我在这里想念什么？如何处理这个返回值？ **提前致谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:59:42.117

上传时请确保指定加密类型。否则它会给出这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:35:12.270

使用API 的[第 2 版](https://developers.google.com/drive/v2/reference/files/get)，您可以使用一个 PHP 示例。

# linq - NHibernate 多个子集合查询 *in lambdas*

> ID：13382712
> 
> 赞同：1
> 
> 时间：2012-11-14T16:17:46.340
> 
> 标签：linq, nhibernate, lambda

我看起来完全一样

[如何通过过滤器对不同级别的孩子进行有效查询？](https://stackoverflow.com/questions/12313172/how-to-efficiently-query-with-filter-on-children-at-different-levels)

但是“in lambdas”语法。

我真的很需要这个，有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T17:50:58.470

以下是您在查询语法和 lambda 语法中引用的帖子中的代码片段：[https](https://stackoverflow.com/a/12324116/670028) ://stackoverflow.com/a/12324116/670028 ：

LINQ 查询语法：

```
var listOfString = new List<string>() { "String1", "String2" };

var customers =
(
    from a in session.Query<A>()
    from b in a.B
    from c in b.C
    where a.Status == "Active"
            && listOfStrings.Contains( b.SomeField )
            && listOfStrings.Contains( c.someOtherField )
    select a )
    .ToList(); 
```

LINQ lambda 语法：

```
var listOfString = new List<string>() { "String1", "String2" };

var customers =
    (
        session.Query<A>()
            .SelectMany( a => a.B, ( a, b ) => new { a, b } )
            .SelectMany( @t => b.C, ( @t, c ) => new { @t, c } )
            .Where( @t => a.Status == "Active"
                            && listOfStrings.Contains( b.SomeField )
                            && listOfStrings.Contains( c.someOtherField ) ).
            Select
            ( @t => a ) )
        .ToList(); 
```

如您所见，它不像 LINQ 查询语法那样“干净”，因为每次使用 .SelectMany() 方法时都必须继续投影到新的匿名类型。它还可能与所有这些变量名称有点混淆，这就是为什么当我需要执行这样的查询时我倾向于使用 LINQ 查询语法而不是 lambdas 的原因。

只是为了好玩，这里是一个使用 .SelectMany() 的示例，通过为匿名类型赋予更有意义的名称，它看起来更好更真实：

```
public void Get_StarPowerCorporations_PendingShipment_Orders_Shipping_To_NewYork_Or_Chicago()
{
    var session = UnitOfWork.Current.GetSession();

    var listOfCities = new List<string> { "New York", "Chicago" };

    var customerAndOrders = session.Query<Customer>()
        .SelectMany( c => c.Orders, ( Customer, Orders ) => new { Customer, Orders } )
        .SelectMany( CustomerAndOrders => CustomerAndOrders.Orders.OrderDetails, ( CustomerAndOrders, OrderDetails ) => new { CustomerAndOrders, OrderDetails } )
        .Where( x => x.CustomerAndOrders.Customer.CompanyName == "StarPower Corporatation"
                        && x.CustomerAndOrders.Orders.Status == "Pending Shipment"
                        && listOfCities.Contains( x.OrderDetails.City ) )
        .Select( x => x.CustomerAndOrders.Customer )
        .Fetch( x => x.Orders )
        .ToList();
}

public class Customer
{
    public int CustomerId { get; set; }
    public string CompanyName { get; set; }
    public IList<Address> Addresses { get; set; }
    public IList<Order> Orders { get; set; }
}

public class Address
{
    public int AddressId { get; set; }
}

public class Order
{
    public int OrderId { get; set; }
    public string Status { get; set; }
    public IList<OrderDetail> OrderDetails { get; set; }
}

public class OrderDetail
{
    public int OrderDetailId { get; set; }
    public string City { get; set; }
} 
```

# javascript - 如何在不复制数组的情况下返回 Javascript 中的数组减去单个项目？

> ID：13382716
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:18:00.303
> 
> 标签：javascript, node.js, sorting

> **可能重复：**
> [按值从数组中删除项目](https://stackoverflow.com/questions/3954438/remove-item-from-array-by-value)

我正在维护字符串列表，例如

```
var keyString = [];

keyString.push("anotherString");
keyString.push("yetAnotherString");
keyString.push("oneLastString"); 
```

我希望能够从`keyString`我已经知道的更少的值中返回所有结果。

例如，如果我有*anotherString*，那么我想返回数组中不是*anotherString*的所有内容。

显然，这可以通过几种方式轻松完成，但我有一些限制。

**我不希望解决方案使用任何循环，也不希望使用过多的内存，也不希望修改原始数组**。

这可能是不可能的，但我想我会把它扔在那里，看看是否存在任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:22:31.317

您可以使用[`filter()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)，但这也会返回一个新数组：

```
var newArray = keyString.filter( function( el ) {
  return el !== 'anotherString';
} ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:22:44.747

考虑到您的示例代码的一些可能性，但在函数内部（或`return`没有意义）。这些示例假设您可以修改原始数组，因为您不想复制。

**1.使用[`shift`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/shift)删除第一个元素**

```
function something() {
    someObject["keyString"] = [];
    someObject["keyString"].push("anotherString");
    someObject["keyString"].push("yetAnotherString");
    someObject["keyString"].push("oneLastString");
    someObject["keyString"].shift(); 
    return someObject;
} 
```

**2.使用[`pop`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/pop)删除最后一个元素**

```
function something() {
    someObject["keyString"] = [];
    someObject["keyString"].push("yetAnotherString");
    someObject["keyString"].push("oneLastString");
    someObject["keyString"].push("anotherString");
    someObject["keyString"].pop(); 
    return someObject;
} 
```

**3\. 使用[`splice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)移除中间元素**

```
function something() {
    someObject["keyString"] = [];
    someObject["keyString"].push("yetAnotherString");
    someObject["keyString"].push("anotherString");
    someObject["keyString"].push("oneLastString");
    someObject["keyString"].splice(1,1); 
    return someObject;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-14T16:24:13.580

不是防弹的，但它有效：

```
var a = ["a", "b", "c", "d"];
a.splice( a.indexOf("c"), 1 );

console.log(a); // ["a", "b", "d"]; 
```

# php - 使用 PHP 伪造 URL 中的路径部分？

> ID：13382724
> 
> 赞同：4
> 
> 时间：2012-11-14T16:18:25.897
> 
> 标签：php, session, session-variables

在某些网站中，我看到如下内容：

`http://example.com/bills/c4grSxby6Eysk0TREcXKZDDfRse0XB/yourbill.php`

每当关闭浏览器窗口（会话结束）时，该路径中间的随机字符串就会更改。

我需要知道创建这种伪造的逻辑`URL`和一些代码示例来制作它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:51:02.360

我认为您正在寻找 URL 重写，例如，使用 Apache 的 Mod Rewrite。这不是 PHP 特定的东西。

你可以做的是说你有一个像......

```
mysite.com/bills/c4grSxby6Eysk0TREcXKZDDfRse0XB/yourbill.php 
```

其中 c4grSxby6Eysk0TREcXKZDDfRse0XB 是会话 ID，通过重写，它实际上被传递给...

```
mysite.com/bills/yourbill.php?session=c4grSxby6Eysk0TREcXKZDDfRse0XB 
```

并正常处理，它只是浏览器中的不同URL。

假设您使用的是 Apache 并启用了重写模块，您可以在 .htaccess 文件中定义重写规则。这种重写的规则是：

```
RewriteRule ^mysite.com/bills/([a-zA-Z0-9]+)/yourbill.php$ mysite.com/bills/yourbill.php?session=$1 
```

未经测试，但应该可以工作，其中 $i 是第 i 个（在这种情况下 $1 是第一个）正则表达式组的值（括号内的值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:22:29.827

使用 Apache 的 mod_rewrite，url 的第一部分将是一个变量，它将映射到一个处理它的文件。它将在内部这样重写：/bills/index.php?str=c4grSxby6Eysk0TREcXKZDDfRse0XB 或类似...

# .net - 将“今天按钮”添加到日历控件

> ID：13382726
> 
> 赞同：2
> 
> 时间：2012-11-14T16:18:29.997
> 
> 标签：.net, wpf, mvvm, calendar, controltemplate

我的 WPF MVVM 应用程序中有以下样式。

```
<Style x:Key="DefaultCalendar" TargetType="Calendar">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Calendar}">
                <StackPanel HorizontalAlignment="Center" Name="PART_Root">
                    <CalendarItem Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}" Name="PART_CalendarItem" Style="{TemplateBinding Calendar.CalendarItemStyle}" />
                    <Button Content="Today" Command="Commands:CalendarCommands.SelectToday" CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我创建了 Commands 类

```
namespace Viterra.Freight.Client.Resources.Commands
{
    public class CalendarCommands
    {
        public static RoutedCommand SelectToday = new RoutedCommand("Today", typeof(CalendarCommands));
    }
} 
```

它会在日历打开时显示，但是该按钮被禁用。我确定我需要对这个路由命令做更多的事情，以便它设置日期，但我不确定是什么或在哪里。

**编辑：最终解决方案** 请注意，我一直在修改 DatePicker 以使用此日历样式。

```
<Style x:Key="DefaultCalendar" TargetType="Calendar">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Calendar}">
                <StackPanel HorizontalAlignment="Center" Name="PART_Root">
                    <CalendarItem Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}" Name="PART_CalendarItem" Style="{TemplateBinding Calendar.CalendarItemStyle}" />
                    <Button Content="Today" Command="Commands:CalendarCommands.SelectToday" CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}" />
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<!-- style for default datepicker -->
<Style x:Key="DefaultDatePicker" TargetType="DatePicker">
    <Setter Property="Height" Value="23"/>
    <Setter Property="VerticalAlignment" Value="Center"/>
    <Setter Property="CalendarStyle" Value="{StaticResource DefaultCalendar}" />
    <Setter Property="Validation.ErrorTemplate" Value="{StaticResource DateTimeValidationTemplate}" />
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip" Value="{Binding RelativeSource={x:Static RelativeSource.Self}, Path=(Validation.Errors).CurrentItem.ErrorContent}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

和 CalendarCommands.cs

```
using System;
using System.Windows.Input;
using System.Windows.Controls;

namespace Viterra.Freight.Client.Resources.Commands
{
    public static class CalendarCommands
    {
        private static readonly SelectTodayCommand _selectTodayCommand = new SelectTodayCommand();

        public static ICommand SelectToday
        {
            get { return _selectTodayCommand; }
        }

        private sealed class SelectTodayCommand : ICommand
        {
            public event EventHandler CanExecuteChanged
            {
                add { CommandManager.RequerySuggested += value; }
                remove { CommandManager.RequerySuggested -= value; }
            }

            public bool CanExecute(object parameter)
            {
                return parameter is Calendar;
            }

            public void Execute(object parameter)
            {
                var calendar = parameter as Calendar;
                if (calendar == null) 
                    return;

                var today = DateTime.Today;
                calendar.SelectedDate = today;
                calendar.DisplayDate = today;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T17:46:18.497

或者，如果您不想使用代码隐藏 and `CommandBindings`，您可以使用一个简单的`ICommand`实现来代替：

```
public static class CalendarCommands
{
   private static readonly SelectTodayCommand _selectToday = new SelectTodayCommand();

   public static ICommand SelectToday
   {
      get { return _selectToday; }
   }

   private sealed class SelectTodayCommand : ICommand
   {
      public event EventHandler CanExecuteChanged
      {
         add { CommandManager.RequerySuggested += value; }
         remove { CommandManager.RequerySuggested -= value; }
      }

      public bool CanExecute(object parameter)
      {
         return parameter is Calendar;
      }

      public void Execute(object parameter)
      {
         var calendar = parameter as Calendar;
         if (calendar != null)
         {
            DateTime today = DateTime.Today;
            calendar.SelectedDate = today;
            calendar.DisplayDate = today;
         }
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T17:39:42.067

你只是忘了设置你的 CommandBindings :)

这是一个小的工作示例：

**主窗口.xaml**

```
<Window x:Class="WpfApplication13.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Commands="clr-namespace:WpfApplication13"
        Title="MainWindow" Height="350" Width="525">

    <Window.CommandBindings>
        <CommandBinding Command="Commands:CalendarCommands.SelectToday"
                        Executed="SelectTodayExecuted"
                        CanExecute="SelectTodayCanExecute"/>
    </Window.CommandBindings>

    <Window.Resources>
        <Style x:Key="DefaultCalendar" TargetType="Calendar">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Calendar}">
                        <StackPanel HorizontalAlignment="Center" Name="PART_Root">
                            <CalendarItem Background="{TemplateBinding Control.Background}" BorderBrush="{TemplateBinding Control.BorderBrush}" BorderThickness="{TemplateBinding Control.BorderThickness}" Name="PART_CalendarItem" Style="{TemplateBinding Calendar.CalendarItemStyle}" />
                            <Button Content="Today" Command="Commands:CalendarCommands.SelectToday" CommandParameter="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
                        </StackPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Calendar Style="{StaticResource DefaultCalendar}" />
    </Grid>
</Window> 
```

**主窗口.xaml.cs**

```
using System.Windows;
using System.Windows.Input;

namespace WpfApplication13
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void SelectTodayExecuted(object target, ExecutedRoutedEventArgs e)
        {
            // Implement logic here
        }

        private void SelectTodayCanExecute(object target, CanExecuteRoutedEventArgs e)
        {
            e.CanExecute = true;
        }
    }

    public class CalendarCommands
    {
        public static RoutedCommand SelectToday = new RoutedCommand("Today", typeof(CalendarCommands));
    }
} 
```

# sql - Oracle 11g 查询花了将近 30 分钟完成，但在 SQL Server 中大约需要 5 分钟

> ID：13382727
> 
> 赞同：1
> 
> 时间：2012-11-14T16:18:33.250
> 
> 标签：sql, sql-server, oracle11g

我需要生成使用预付费用户的详细信息报告。

基本上我有2张桌子。TBL_USER 和 TBL_PREPAID_DETAILS

tbl_user 仅列出用户，而 tbl_prepaid_details 将包含所有预付信息，例如借方、贷方、余额、总充值。

该报告将产生如下内容：-

```
FULLNAME USER_ID NEW_BALANCE CREATED DEPOSIT DEBIT TOTAL_DEPOSIT
USER1 1 250 21/05/2011 500 250 1000
USER2 2 250 21/05/2011 500 250 1000
USER3 3 250 21/05/2011 500 250 1000
USER4 4 250 21/05/2011 500 250 1000 
```

在此之前，我将 SQL Server 用于数据库，但在 2012/2013 年，我们需要从 SQL Server 迁移到 Oracle 11g。

从之前的 sql 查询（SQL Server）中，我得出了以下查询（Oracle 11g）。我可以得到结果，但在 SQL Server 中只用了大约 5 分钟就完成了将近 30 分钟。**它只有 500 多个用户**

是我错过了什么吗？有没有简化版本来加快这个过程？

```
SELECT DISTINCT A.FULLNAME AS NAME,
                A.USER_ID AS ID,
                B.NAME,

  (SELECT T.NEW_BAL
   FROM
     (SELECT NEW_BAL,
             USER_ID
      FROM TBL_PREPAID_DETAILS
      WHERE DATE_INSERT BETWEEN '01/01/2010' AND '14/11/2012'
      ORDER BY PREPAID_DETAIL_ID DESC) T
   WHERE T.USER_ID = A.USER_ID
     AND ROWNUM = 1) AS NEW_BALANCE,

  (SELECT T2.DATE_INSERT
   FROM
     (SELECT DATE_INSERT,
             USER_ID
      FROM TBL_PREPAID_DETAILS
      WHERE DATE_INSERT BETWEEN '01/01/2010' AND '14/11/2012'
      ORDER BY DATE_INSERT DESC)T2
   WHERE T2.USER_ID = A.USER_ID
     AND ROWNUM = 1) AS DATE_INSERT,

  (SELECT T3.PREV_BAL
   FROM
     (SELECT PREV_BAL,
             USER_ID
      FROM TBL_PREPAID_DETAILS
      WHERE DATE_INSERT BETWEEN '01/01/2010' AND '14/11/2012'
      ORDER BY PREPAID_DETAIL_ID ASC)T3
   WHERE T3.USER_ID = A.USER_ID
     AND ROWNUM = 1) AS DEPOSIT,

  (SELECT SUM(T4.CREDIT)
   FROM
     (SELECT CREDIT,
             USER_ID
      FROM TBL_PREPAID_DETAILS
      WHERE DATE_INSERT BETWEEN '01/01/2010' AND '14/11/2012'
      ORDER BY PREPAID_DETAIL_ID ASC)T4
   WHERE T4.USER_ID = A.USER_ID
     AND ROWNUM = 1) AS DEBIT,

  (SELECT SUM(T5.DEBIT + T5.PREV_BAL)
   FROM
     (SELECT DEBIT,
             PREV_BAL,
             USER_ID
      FROM TBL_PREPAID_DETAILS
      WHERE DATE_INSERT BETWEEN '01/01/2010' AND '14/11/2012'
      ORDER BY PREPAID_DETAIL_ID ASC)T5
   WHERE T5.USER_ID = A.USER_ID
     AND ROWNUM = 1) AS TOTAL_DEPOSIT
FROM TBL_USER A
LEFT JOIN TBL_PREPAID_DETAILS C ON A.USER_ID = C.USER_ID
LEFT JOIN TBL_ORGANIZATION_INFO B ON A.ORGANIZATION_ID = B.ORGANIZATION_ID
WHERE C.DATE_INSERT BETWEEN '01/01/2010' AND '14/11/2012'
  AND (A.USER_ID NOT IN ('xxx',
                         'xxx',
                         'xxx'))
GROUP BY A.FULLNAME,
         A.USER_ID,
         C.DATE_INSERT,
         B.NAME
ORDER BY A.FULLNAME; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:06:08.317

查看此页面以获取有关 Oracle 调优的一般概述帮助。 [整体 Oracle 调优页面](http://www.dba-oracle.com/art_sql_tune.htm)

Oracle 提供了大量工具来调整性能，包括可以添加哪些索引来改进特定查询。当我遇到运行缓慢的查询时，这是我做的第一件事。在您的情况下，我会考虑对您的查询运行解释计划并查看 Oracle 的建议。这是有关运行解释计划的文档。[Oracle 解释计划](http://docs.oracle.com/cd/B10500_01/server.920/a96533/ex_plan.htm)

# java - 休眠缓存总是丢失

> ID：13382729
> 
> 赞同：1
> 
> 时间：2012-11-14T16:18:36.387
> 
> 标签：java, spring, hibernate, ehcache

我正在使用带有 Spring 框架的 Hibernate，并尝试缓存通过 CriteriaAPI 编写的查询。我启用了查询缓存和二级缓存。我还在该特定查询中将 setCacheable 设置为 true。问题是休眠会话统计显示它会针对我多次运行的同一查询命中数据库所有内容。

这是带有条件查询的函数

```
@Override
public Collection<Article> findLatestArticle(int count) {
    // TODO Auto-generated method stub
    Criteria criteria = this.getSession()
    .createCriteria(Article.class)
    .setCacheable(true)
    .setCacheRegion(CACHE_REGION)
    .add(Restrictions.eq("isVisible", 1))
    //.createCriteria("Count")
    //.add(Restrictions.eq("Count", count))
    .setFirstResult(0)
    .setMaxResults(count);

    return criteria.list();
} 
```

这是调用者函数

```
@Test
public void t1(){
    List<Article> articleList = (List<Article>) articleDao.findLatestArticle(1);

    //Article a = articleDao.findById(articlePk);

    for(int i=0; i<19; i++)
        articleDao.findLatestArticle(1);

    Statistics stats = sessionFactory.getCurrentSession().getSessionFactory().getStatistics();

    //System.out.println("2nd Lvl Stats: " + stats.getSecondLevelCacheStatistics(CACHE_REGION));
    stats.logSummary();

    System.out.println("Empty: " + articleList.isEmpty());

    assertTrue(!articleList.isEmpty());
    //assertNotNull(a);
} 
```

spring-hibernate-context 文件

```
<property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
            <prop key="hibernate.show_sql">false</prop>
            <prop key="hibernate.transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</prop>
            <prop key="hibernate.cache.use_second_level_cache">true</prop>
            <prop key="hibernate.cache.use_query_cache">true</prop>
            <prop key="hibernate.cache.provider_class">org.hibernate.cache.EhCacheProvider</prop>
            <prop key="hibernate.generate_statistics">true</prop>
            <prop key="hibernate.cache.use_structured_entries">true</prop>
            <prop key="net.sf.Ehcache.configurationResourceName">ehcache.xml</prop>
        </props>
    </property> 
```

这个类的ehcache部分

```
<cache name="com.contento3.cms.article.model.Article"
maxElementsInMemory="10000"
eternal="false"
timeToIdleSeconds="300"
timeToLiveSeconds="60"
overflowToDisk="true"/> 
```

日志摘录：

```
 2012-11-14 21:05:03,020 [main] INFO  org.hibernate.cfg.SettingsFactory - Second-level cache: enabled
2012-11-14 21:05:03,020 [main] INFO  org.hibernate.cfg.SettingsFactory - Query cache: enabled
    2012-11-14 21:05:03,969 [main] INFO  org.hibernate.cache.StandardQueryCache - starting query cache at region: com.contento3.cms.article.model.Article
2012-11-14 21:05:03,998 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 10ms, rows: 1
2012-11-14 21:05:04,010 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 1ms, rows: 1
2012-11-14 21:05:04,019 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 8ms, rows: 1
2012-11-14 21:05:04,022 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 2ms, rows: 1
2012-11-14 21:05:04,024 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 2ms, rows: 1
2012-11-14 21:05:04,026 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 2ms, rows: 1
2012-11-14 21:05:04,033 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 7ms, rows: 1
2012-11-14 21:05:04,035 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 2ms, rows: 1
2012-11-14 21:05:04,038 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 2ms, rows: 1
2012-11-14 21:05:04,041 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 2ms, rows: 1
2012-11-14 21:05:04,050 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 3ms, rows: 1
2012-11-14 21:05:04,059 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 9ms, rows: 1
2012-11-14 21:05:04,062 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 3ms, rows: 1
2012-11-14 21:05:04,067 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 4ms, rows: 1
2012-11-14 21:05:04,074 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 5ms, rows: 1
2012-11-14 21:05:04,077 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 2ms, rows: 1
2012-11-14 21:05:04,079 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 1ms, rows: 1
2012-11-14 21:05:04,081 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 1ms, rows: 1
2012-11-14 21:05:04,083 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 2ms, rows: 1
2012-11-14 21:05:04,085 [main] INFO  org.hibernate.stat.Statistics - HQL: from Article as a, time: 2ms, rows: 1
2012-11-14 21:05:04,085 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - Logging statistics....
2012-11-14 21:05:04,085 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - start time: 1352909103053
2012-11-14 21:05:04,085 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - sessions opened: 1
2012-11-14 21:05:04,085 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - sessions closed: 0
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - transactions: 0
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - successful transactions: 0
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - optimistic lock failures: 0
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - flushes: 0
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - connections obtained: 1
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - statements prepared: 21
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - statements closed: 21
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - second level cache puts: 0
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - second level cache hits: 0
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - second level cache misses: 0
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - entities loaded: 0
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - entities updated: 0
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - entities inserted: 1
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - entities deleted: 0
2012-11-14 21:05:04,086 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - entities fetched (minimize this): 0
2012-11-14 21:05:04,087 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - collections loaded: 0
2012-11-14 21:05:04,087 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - collections updated: 0
2012-11-14 21:05:04,087 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - collections removed: 0
2012-11-14 21:05:04,087 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - collections recreated: 0
2012-11-14 21:05:04,087 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - collections fetched (minimize this): 0
2012-11-14 21:05:04,087 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - queries executed to database: 20
2012-11-14 21:05:04,087 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - query cache puts: 20
2012-11-14 21:05:04,087 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - query cache hits: 0
2012-11-14 21:05:04,087 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - query cache misses: 20
2012-11-14 21:05:04,087 [main] INFO  org.hibernate.stat.ConcurrentStatisticsImpl - max query time: 10ms 
```

我对 Spring 和 Hibernate 还很陌生。我已经阅读了至少十几篇关于这个问题的文章，并尽我所能。另外，我使用 createQuery 方法写了一个类似的查询，结果是一样的。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T06:56:57.180

尝试使用缓存策略为此 @Cacheable @cache 启用注释

# ruby-on-rails - paypal_adaptive gem undefined method to_sym for nil:NilClass 在生产中但不在开发中

> ID：13382732
> 
> 赞同：0
> 
> 时间：2012-11-14T16:18:50.390
> 
> 标签：ruby-on-rails, ruby, paypal

我正在尝试使用 paypal_adaptive gem 开发一个小应用程序，但每次我尝试这样做时：

ipn = PaypalAdaptive::IpnNotification.new

它适用于开发，但使用 mysql 在生产中失败，并且出现此错误：

NoMethodError：未定义的方法`to_sym' for nil:NilClass from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/paypal_adaptive-0.3.2/lib/paypal_adaptive/config.rb:28:in`初始化'来自/usr/local/rvm/gems/ruby-1.9.3-p327/gems/paypal_adaptive-0.3.2/lib/paypal_adaptive/config.rb:69:in `new' from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/paypal_adaptive-0.3.2/lib/paypal_adaptive/config.rb:69:in`config'来自/usr/local /rvm/gems/ruby-1.9.3-p327/gems/paypal_adaptive-0.3.2/lib/paypal_adaptive/ipn_notification.rb:9:in `initialize' from (irb):1:in`new' from (irb):1 from /usr/local/rvm/gems/ ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start' from /usr/local/rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in`start' from /usr/local/rvm/gems/ruby-1.9.3-p327/gems /railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>' from script/rails:6:in`require' from script/rails:6:in `'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:29:11.030

没关系。我发现我在配置文件中缺少一行。这是我在测试中没有看到的愚蠢错误。

# php - PHP PDO INSERT WHERE NOT EXISTS 语句不起作用

> ID：13382736
> 
> 赞同：2
> 
> 时间：2012-11-14T16:18:59.623
> 
> 标签：php, mysql, pdo

通过 PDO 向 MySQL 插入查询时，我遇到了非常奇怪的错误。

如果此表中尚不存在此记录，我想在表中插入记录。

```
$query = "INSERT INTO Phrases (KeyText)
            SELECT * FROM (SELECT :key_text) as tmp WHERE NOT EXISTS (SELECT 1 FROM Phrases WHERE KeyText = :key_text)";

    try
    {
        $preparedStatement = $db->prepare($query);
        foreach ($phrases as $phrase)
        {
            $preparedStatement->execute(array(':key_text' => $phrase));
            echo "-";
        }
    }
    catch(PDOException $e)
    {  
        echo $e->getMessage();  
    } 
```

它抛出异常：在非对象上调用成员函数 execute()。

我不明白我在 SQL 命令中的错误在哪里。其他代码是正确的，因为当我将 SQL 命令更改为其他（例如：**SELECT :key_text as kt**）时，它可以正常工作。

感谢您的回答。

更新：错误是：

**[0] => HY000 [1] => 1096 [2] => 未使用表**

如何为 MySQL 制作正确的 SQL 命令？变体

```
INSERT INTO Phrases (KeyText)
SELECT :key_text WHERE NOT EXISTS (SELECT 1 FROM Phrases WHERE KeyText = :key_text) 
```

在 MySQL 中也不起作用。

更新 2：

```
INSERT INTO Phrases (KeyText)
SELECT :key_text FROM DUAL WHERE NOT EXISTS (SELECT 1 FROM Phrases WHERE KeyText = :key_text) 
```

这个带有 DUAL 表的查询有效！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:23:02.097

你的准备调用失败了，你只是假设它成功了。

尝试

```
 $preparedStatement = $db->prepare($query) or die($db->errorInfo()); 
```

捕捉错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T17:14:33.550

您的 update2 应该可以工作。

**替代品**：

在字段 KeyText 上具有唯一键或主键

```
ALTER TABLE `Phrases` ADD UNIQUE INDEX (`KeyText`); 
```

然后使用查询：

```
INSERT IGNORE INTO Phrases (KeyText) VALUES (:key_text); 
```

关于没有更改是记录器，请检查您是否已启用自动提交或执行`commit`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:22:28.377

听起来像`prepare`失败了，因此您尝试调用`execute`无效对象（而不是您期望的准备好的语句对象）。检查返回值`prepare`是否实际上是一个`PDOStatement`对象而不是`FALSE`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T16:33:28.657

```
INSERT INTO Phrases (KeyText)
    SELECT :key_text
WHERE NOT EXISTS (SELECT * FROM Phrases WHERE KeyText = :key_text) 
```

[SQL Server - 如何插入记录并确保它是唯一的](https://stackoverflow.com/questions/267804/sql-server-how-to-insert-a-record-and-make-sure-it-is-unique)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T08:24:33.863

错误的：

```
insert into table 
  select * from (select 1 a, 2 b ) t 
  where not exists(select 1 from t2 where t2.c =2) 
```

对：

```
insert into table
  select * from (select 1 a, 2 b union select 1 a, 2 b) t
  where not exists(select 1 from t2 where t2.c =2) 
```

# objective-c - 如何从模态视图导航到视图？

> ID：13382741
> 
> 赞同：1
> 
> 时间：2012-11-14T16:19:21.200
> 
> 标签：objective-c, ios, xcode

我有一个模态视图，我在上面放置了一个按钮 通过单击该按钮。，我应该导航到另一个视图

我已经尝试了很多次但没有在模态视图中获得推送视图，

我是iOS初学者，请不要气馁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T04:44:23.753

这是代码......

-(IBAction)post:(id)sender{

```
PhotoDetailViewController *addController = [[PhotoDetailViewController alloc] initWithNibName:@"PhotoDetailViewController" bundle:nil];

 UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:addController];

 [self presentModalViewController:navigationController animated:YES]; 
```

}

“发布”是当前模态视图上的按钮，当我单击它时..它应该导航到 PhotoDetailController，如何做到这一点

注意：从我朋友的帐户发帖......Jishil KP

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T16:50:01.383

@Jishil KP，推送不是模态视图的属性，只能呈现或关闭。如果您想要推送效果，请使用导航控制器。

# javascript - 在tinymce中禁用浏览器的拼写检查器上下文菜单

> ID：13382742
> 
> 赞同：1
> 
> 时间：2012-11-14T16:19:23.757
> 
> 标签：javascript, jquery, tinymce

在tinymce的以下小提琴[http://fiddle.tinymce.com/baaaab](http://fiddle.tinymce.com/baaaab)进行拼写检查时，两个菜单都来了：

1.  浏览器的上下文菜单
2.  拼写检查上下文菜单

![在此处输入图像描述](../Images/3337b073878fcd7de48bc8a4b9e7190a.png)

我想在这里禁用浏览器的右键菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:05:27.823

在您的小提琴中，在 chrome 中运行，从控制台执行：

```
$('#previewframe').contents().find('#content_ifr').contents().find(
   '.mceItemHiddenSpellWord').on("contextmenu", function (evt) { evt.preventDefault(); }); 
```

用于防止右键单击菜单。

# css - 将浮动图像添加到缩略图

> ID：13382745
> 
> 赞同：0
> 
> 时间：2012-11-14T16:19:28.123
> 
> 标签：css, twitter-bootstrap

谁能告诉我为什么如果我使用引导程序制作复杂的缩略图（图像+文本+按钮..），以及如果我想使用 . pull-right 类，因此得到这样的结果[，](http://i.imgur.com/hqe33.png)图像不会重叠 - 它就像我只是简单地把它放在那里一样（像[这样](http://i.imgur.com/YGWVw.png)）？

# c# - 从子窗体设置 MdiParent

> ID：13382747
> 
> 赞同：2
> 
> 时间：2012-11-14T16:19:30.077
> 
> 标签：c#, winforms, mdiparent

我有一个主窗体，其中包含一个打开子窗体的菜单：

```
public Le_MainForm()
{ 
  InitializeComponent();
  this.IsMdiContainer = true;
  .....
}

private void barButtonItem_CreatOrdreAller_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
{
  Close_AllForm();
  Program.StatusOrdre = 1;
  Program.AllerRetour = "Ordre Aller";
  Fiche_Ordre f_Fiche = new Fiche_Ordre();
  f_Fiche.MdiParent = this;
  f_Fiche.Show();
} 
```

它运作良好，但我从孩子打开另一个表格，我失去了 MdiParent：

```
public Liste_Ordres()
{
  InitializeComponent();
  ....
}

private void Liste_DobleClic(object sender, EventArgs e)
{
  Fiche_Ordre f_Fiche = new Fiche_Ordre(gridView_Liste_Ordres.GetFocusedRowCellValue("NO_ORDRE").ToString());
  f_Fiche.ShowDialog();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:24:54.187

尝试像这样设置表单：

```
Fiche_Ordre f_Fiche = new Fiche_Ordre(gridView_Liste_Ordres.GetFocusedRowCellValue("NO_ORDRE").ToString());
f_Fiche.MdiParent = this.MdiParent;
f_Fiche.Show(); 
```

`ShowDialog()`用于弹出模式表单。

# tomcat - Tomcat上下文根

> ID：13382748
> 
> 赞同：0
> 
> 时间：2012-11-14T16:19:33.897
> 
> 标签：tomcat, contextpath

这可能是一个愚蠢的问题。当我从 Eclipse 运行代码时，我点击的 URL 是`http://localhost:8080/Test`.

这个项目中有一些图像和 css 和 javascript。我将它们的路径指定为 /css/test.css、/javascript/x.js 和 /images/test.jpg

但不是指向`http://localhost:8080/Test/images/test.jpg`它指向`http://localhost:8080/images/test.jpg`.

有人可以帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:26:39.937

您需要指定上下文路径。在 JSP 中，您可以这样做：

```
<link type="text/css" rel="stylesheet" href="${pageContext.servletContext.contextPath}/css/style.css"/>

<script type="text/javascript" src="${pageContext.servletContext.contextPath}/js/script.js"></script> 
```

This: [EL](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSPIntro7.html)片段`${pageContext.servletContext.contextPath}`将为您获取上下文路径。所以最后你会得到你所期望的。

# vba - 如何从多个工作表范围引用字符串中捕获单个 Excel 工作表范围？

> ID：13382750
> 
> 赞同：1
> 
> 时间：2012-11-14T16:19:38.340
> 
> 标签：vba, excel, range, worksheet

我有一个字符串传递给 VBA 子，其格式为“Sheet1:Sheet5!A1:D10”，指的是同一工作簿中多个工作表的范围（Sheet2、Sheet3 和 Sheet4 在 Sheet1 和 Sheet5 之间）。

我遇到的问题是我不能将此引用应用于范围变量，据我所知这是由于多个引用，并且我不能使用 application.union 因为范围在不同的工作表上。

如何从该字符串中提取 Sheet1!A1:D10、Sheet2!A1:D10 等五个单独的范围？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:53:18.900

这将为您提供每个字符串的表示形式，然后存储在一个数组中。它做了一些假设（存在工作表，列出的第一个在索引顺序中排在第一位，您想要两者之间关于索引的所有内容等），但它可能适用于您的情况：

```
Sub Parse()

    Dim wbk As Workbook
    ' Arbitrary array size of 10 to store the ranges (as an example)
    Dim myRanges(10) As Variant

    Set wbk = ActiveWorkbook

    ' Split the string at the !
    s = "Sheet1:Sheet3!A1:D10"
    s = Split(s, "!")

    ' Range is the second element of the split (A1:D10)
    TargetRange = s(1)

    ' The first contains the sheets, so split on the :
    SheetNames = Split(s(0), ":")

    ' These sheets are the lower/upper bounds, so use their indices in a loop
    ' that cycles over the sheets in between them (inclusive)
    j = 0 ' This is for the array - you may not need it
    For i = wbk.Sheets(SheetNames(0)).Index To wbk.Sheets(SheetNames(1)).Index
      ' Range is the concatenation of the sheet at this index and the target range
      Set Rng = Range(wbk.Sheets(i).Name & "!" & TargetRange)
      ' Drop it in to our array (or handle how you want)
      myRanges(j) = Rng
      j = j + 1
    Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T08:47:34.180

子解析（）

```
Dim wbk As Workbook
' Arbitrary array size of 10 to store the ranges (as an example)
Dim myRanges(10) As Variant

Set wbk = ActiveWorkbook

' Split the string at the !
s = "Sheet1:Sheet3!A1:D10"
s = Split(s, "!")

' Range is the second element of the split (A1:D10)
TargetRange = s(1)

' The first contains the sheets, so split on the :
SheetNames = Split(s(0), ":")

' These sheets are the lower/upper bounds, so use their indices in a loop
' that cycles over the sheets in between them (inclusive)
j = 0 ' This is for the array - you may not need it
For i = wbk.Sheets(SheetNames(0)).Index To wbk.Sheets(SheetNames(1)).Index
  ' Range is the concatenation of the sheet at this index and the target range
  Set Rng = Range(wbk.Sheets(i).Name & "!" & TargetRange)
  ' Drop it in to our array (or handle how you want)
  myRanges(j) = Rng
  j = j + 1
Next i 
```

结束子

# c# - 关于 IoC、组合根、服务定位器、工厂的问题和想法

> ID：13382751
> 
> 赞同：2
> 
> 时间：2012-11-14T16:19:40.803
> 
> 标签：c#, ioc-container, service-locator

有时我一直在寻找正确使用 IoC 容器的好方法，即：

*   严格在[组合根](https://stackoverflow.com/questions/6277771/what-is-a-composition-root-in-the-context-of-dependency-injection)处使用容器。
*   不使用通用的 ServiceLocator（或类似的）来避免可测试性问题。

我现在开始一个学习新东西的个人项目，它是一个 WPF (4.5) MVVM 应用程序，它使用 WCF、EntityFramework 以及其他技术、框架、模式和实践，我想尝试不同的方法来充分利用容器，工厂和相关模式。

我想到的一个想法是创建一个可以在组合根目录下设置的通用工厂，而不是传递容器引用。这应该避免可测试性问题。例如，让我们有一个工厂：

```
class Factory
{
    private static Dictionary<Type, Func<object>> Store = new Dictionary<Type,Func<object>>();

    public static void Setup<T>(Func<T> Creation)
    {
        Store.Add(typeof(T), () => Creation());
    }

    public static T Create<T>()
    {
        Func<object> func = (from p in Store where p.Key == typeof(T) select p.Value).FirstOrDefault();

        if (func != null) return (T)func();
        return default(T);
    }
} 
```

所以我们在组合根目录配置它，如下所示：

```
Factory.Setup(() => container.Resolve<ITest>());

Factory.Setup<ISomeWcfService>(() => new SomeWcfService()); 
```

最后，创建一个具体类型：

```
ITest t = Factory.Create<ITest>();
ISomeWcfService client = Factory.Create<ISomeWcfService>(); 
```

现在的问题和想法：

我只是重新发明了服务定位器模式吗？

我知道传递容器是一个坏主意，所以这解决了这个问题并且它不依赖于容器，但这看起来不错还是只是一个坏主意？

# cocoa - NSXMLDocumentTidyXML 和保留空格

> ID：13382754
> 
> 赞同：1
> 
> 时间：2012-11-14T16:19:44.070
> 
> 标签：cocoa, nsxmldocument

我正在使用 NSXMLDocument 来解析一些 XML。它是来自 Web 服务的 XML，它通常格式不正确，所以我需要通过`NSXMLDocumentTidyXML`才能解析它。

但是，我想保留文本中的换行符，NSXMLDocumentTidyXML 将其删除。

我从文档中知道，该`xmlns:space="preserve"`属性将告诉 XML 整理器保留空格。但是，由于我需要在开始解析之前将其包含在 XML 中，并且只有在解析之后才能向节点添加属性，所以我不确定该怎么做。

有什么建议么？目前我唯一能想到的就是在字符串中手动搜索根标签，通过将属性插入到输入字符串中来应用属性，然后解析它。这对我来说似乎很脆弱……</p>

# web-services - 支持枚举/集合和自定义编组的 Java 到 WSDL 工具？

> ID：13382755
> 
> 赞同：0
> 
> 时间：2012-11-14T16:19:46.363
> 
> 标签：web-services, wsdl, jibx

我正在尝试使用现有的 Java 代码创建 Web 服务。我尝试使用[Axis2 POJO 技术](http://axis.apache.org/axis2/java/core/docs/pojoguide.html)，但这不起作用，因为 Axis2 不支持我们的代码使用的枚举或集合。

然后我查看了支持枚举和集合的 JiBX 框架。但是 Jibx2Wsdl 工具在我们的代码上不起作用，因为我们使用 java.net.InetAddress 类，而 Jibx2Wsdl 不知道如何将其映射到 XML。我需要为此编写一个自定义编组器/解组器，但我发现[JiBX 的创建者的帖子](http://planetjava.org/java-jibx-users/2008-08/msg00017.html)说 Jibx2Wsdl 无法调用自定义编组器/解组器。

是否有任何工具可以从 Java 代码创建 WSDL 文件，支持枚举和集合，并且还允许您调用自定义编组器/解组器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:50:33.393

CXF 可以处理其中的一部分。JAX-WS/JAXB 规范专门允许和处理一些集合事物，但对于它无法处理的事物，它确实提供了 XmlJavaTypeAdapter 事物的选项，以从它无法处理的类型映射到它可以处理的类型。因此，您可以编写一个适配器来从 InetAddress 映射到 String 或某种 POJO 或更适合您需要的东西。

# objective-c - CABasicAnimation 后保留属性值

> ID：13382756
> 
> 赞同：0
> 
> 时间：2012-11-14T16:19:51.917
> 
> 标签：objective-c, ios, cashapelayer

> **可能重复：**
> [Objective-C - CABasicAnimation 在动画后应用更改？](https://stackoverflow.com/questions/11515647/objective-c-cabasicanimation-applying-changes-after-animation)

使用以下代码，我正在动画绘制一个圆圈：

```
CAShapeLayer circle = [CAShapeLayer layer];
circle.strokeEnd = 0;
...
[self.view.layer addSublayer:circle];

CABasicAnimation *drawAnimation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
drawAnimation.beginTime = CACurrentMediaTime() + 3;
drawAnimation.duration = 1.0;
drawAnimation.fromValue = [NSNumber numberWithFloat:0.0f];
drawAnimation.toValue = [NSNumber numberWithFloat:1.0f];
drawAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
drawAnimation.removedOnCompletion = NO;
drawAnimation.fillMode  = kCAFillModeForwards;
[circle addAnimation:drawAnimation forKey:@"drawShape"]; 
```

虽然这画得很好，但它似乎`circle.strokeEnd`实际上并没有更新到 1。我该怎么做？

# ios - 在 Xcode 中处理界面构建器大小已更改

> ID：13382757
> 
> 赞同：0
> 
> 时间：2012-11-14T16:19:55.393
> 
> 标签：ios, interface-builder, storyboard

我开始了一个新的 iOS 项目，我惊讶地发现处理控制器指标的方式发生了变化。

前 ![前](../Images/d3826fa0c7f0477c1d041e37f7f7c676.png)

后 ![后](../Images/c20e76d923415060eedaf12c7cd64112.png)

这是Apple的新功能还是我做错了什么？今天已经安装了cocos2D的模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:37:30.387

特征？嗯，至少是故意的。:-)

如果您愿意，可以通过选择 xib 或故事板的文件检查器并取消选中“使用自动布局”选项来关闭它。

# python - Python PDB set_trace 不起作用

> ID：13382760
> 
> 赞同：0
> 
> 时间：2012-11-14T16:20:01.333
> 
> 标签：python, pdb

程序在预期的地方正确停止，但我没有得到 pdb 提示。按“c”按预期继续程序。

我检查了标准输出，没问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:22:07.880

我正在启动该程序，例如

```
python program.py 2>&1 | tee out.log 
```

将输出管道连接到 tee 是导致问题的原因。

# razor - 按节点列表的 Int 属性排序 - Umbraco Razor

> ID：13382762
> 
> 赞同：1
> 
> 时间：2012-11-14T16:20:02.353
> 
> 标签：razor, umbraco

我正在尝试按数字属性“成本”对 DynamicNodeList 进行排序。我在这里尝试了很多不同的方法，但完全不知所措：

```
var nodes = Model.AncestorOrSelf(1).Descendants().Where("NodeTypeAlias.Equals(\"Event\")").Where("Visible");

nodes = nodes.OrderBy("Int32.Parse(cost.Value)"); 
```

给我错误：“Func`2”类型中不存在属性或字段“值”

我有一种感觉，这和我得到的一样接近！有人对此有任何线索吗？

编辑：

好的，我通过更改 NodeList 解决了这个问题：

```
var nodes = Model.AncestorOrSelf(1).Descendants().Where("NodeTypeAlias.Equals(\"Event\")").Where("Visible").Where("cost > 0"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T18:18:31.647

```
nodes = nodes.OrderBy("cost"); 
```

...应该工作得很好。

有关更多信息，请参阅[Umbraco Razor 功能演练 - 第 4 部分](http://umbraco.com/follow-us/blog-archive/2011/3/1/umbraco-razor-feature-walkthrough-%E2%80%93-part-4.aspx)`OrderBy()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:36:57.853

你可以试试

```
Dictionary<DynamicNode, int> myVar = new Dictionary<DynamicNode, int>();
foreach(var node in nodes)
{
    myVar.Add(node,node.GetPropertyValue("cost");
} 
```

然后排序。这是我能想到的唯一方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T21:05:40.710

在对不止一个项目或不简单的东西进行排序时，我遇到了问题。在这些情况下，我将其转换为 List 或 DynamicNode 对象，并将 Sort 方法与委托一起使用。

像这样的东西：

```
possibleListings.Sort(delegate(DynamicNode x, DynamicNode y)
{       
  ... perform sorting logic
}); 
```

然后，您可以在委托中进行 Int32.TryParse() 调用或您需要的任何操作。

# php - 将图像添加到 Wordpress 标题

> ID：13382764
> 
> 赞同：1
> 
> 时间：2012-11-14T16:20:15.103
> 
> 标签：php, image, wordpress, header

我正在使用 Wordpress 来建立一个内容管理的网站，并且我对 HTML 和 CSS 相当胜任。我可以在 CSS 中更改站点的背景图像，并且可以更改标题图像（背景）。

我想要做的是在标题中添加一个我可以绝对定位的图像。但是，当我尝试将带有标签的图像添加到 header.php 中时，它会显示“损坏的图像”图标，即使我正确输入了代码。

如果我添加一个 div，我可以设置一个背景图像，但它会奇怪地调整它的大小并且看起来不正确。

我正在使用 Wordpress TwentyEleven 或 TwentyTen 主题，但无法弄清楚这一点。我认为这是 Wordpress 的一些限制。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T16:57:34.760

它不能直接在 header.php 中工作并且作为 div 的背景工作的事实意味着（尽管您没有显示您的代码，并且您应该）您可能正在使用相对链接。问题是在 WordPress 中包含模板部分使得相对链接的使用更加困难。但是，如果您使用 div，则应该没有任何问题，并且背景图像不应调整大小（如果正确定义了 CSS 规则）。但是通过插入 div 来解决路径问题是不好的做法。只需使用图像的绝对路径（或至少相对于网站根目录，如`/wp-content/themes/yourtheme/yourimage.png`）。
但是，请发布您的代码（img 标记和/或 div 的 CSS 规则）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T22:02:51.887

您可能得到图像的 URL 错误。您可以在样式表中安全地使用相对路径，因为其中的所有 URL 都相对于 style.css 的位置（通常是您的 wp-content/themes/yourtheme 目录）。但是，如果您在 header.php 中调用图像，则情况并非如此-相对路径将根据加载的页面的 URL 更改（它只会将 img 元素的 SRC 属性中的任何内容添加到任何网址是）。

您可以通过指定绝对路径（例如[http://yoursite.com/wp-content/themes/yourtheme/images/yourimage.jpg](http://yoursite.com/wp-content/themes/yourtheme/images/yourimage.jpg)）或使用获取样式表目录的 WP 模板标签并添加它来解决此问题到 img SRC 属性，如下所示：

```
<img src="<?php echo get_stylesheet_directory_uri(); ?>/images/yourimage.png" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-09T04:16:09.770

```
<img src="<?php echo get_bloginfo('template_url') ?>/img/logo2.png"/> 
```

****这对我有用****

# java - 为什么我的安卓应用程序这么慢？

> ID：13382767
> 
> 赞同：3
> 
> 时间：2012-11-14T16:20:32.840
> 
> 标签：java, android, performance, lag

我一直在关注[这个](http://www.droidnova.com/playing-with-graphics-in-android-part-i,147.html)教程。我一直在玩代码，取出我不需要的东西并添加东西等，但是当我在模拟器中运行它时，块的移动非常缓慢。这就像我得到一个低FPS。在运行应用程序的第一秒左右，它运行平稳，然后在我重新编译它关闭之前再次运行大约一秒。知道如何让它一直顺利运行吗？

MainActivity.java

```
package com.example.mobilecoursework;

import android.app.Activity;
import android.os.Bundle;
import android.view.Window;

public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(new Blocks(this));
    }
} 
```

块.java

```
package com.example.mobilecoursework;

import java.util.ArrayList;
import java.util.Random;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.view.SurfaceHolder;
 import android.view.SurfaceView;

 class Blocks extends SurfaceView implements SurfaceHolder.Callback {
    //
    private BlockThread _thread;
    //declare an array of the block sprites 
    private ArrayList<GraphicObject> _graphics = new ArrayList<GraphicObject>();

    public Blocks(Context context) {
        super(context);
        getHolder().addCallback(this);
        _thread = new BlockThread(getHolder(), this);
        setFocusable(true);
    }

    public void DrawBlocks(){
        for (int i=0; i < 20; i++)
        {
            //create new random x and y position values
            Random randX = new Random();
            int i1=randX.nextInt(getWidth()-0) + 0;
            Random randY = new Random();
            int i2=randY.nextInt(getHeight()-0) + 0;
            GraphicObject graphic = new GraphicObject(BitmapFactory.decodeResource(getResources(), R.drawable.block));
            graphic.getCoordinates().setX((int) i1 - graphic.getGraphic().getWidth() / 2);
            graphic.getCoordinates().setY((int) i2 - graphic.getGraphic().getWidth() / 2);
            _graphics.add(graphic);
        }
    }

    public void updatePhysics() {
        GraphicObject.Coordinates coord;
        for (GraphicObject graphic : _graphics) {
            //move blocks down
            coord = graphic.getCoordinates();
            coord.setY(coord.getY() + 5 );                
            // reset block
            if (coord.getY() + graphic.getGraphic().getHeight() > getHeight()+10) {
                coord.setY(-10);
            }
        }
    }

    @Override
    public void onDraw(Canvas canvas) {
        canvas.drawColor(Color.BLACK);
        Bitmap bitmap;
        GraphicObject.Coordinates coords;
        for (GraphicObject graphic : _graphics) {
            bitmap = graphic.getGraphic();
            coords = graphic.getCoordinates();
            canvas.drawBitmap(bitmap, coords.getX(), coords.getY(), null);
        }
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        // TODO Auto-generated method stub
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        _thread.setRunning(true);
        _thread.start();
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // simply copied from sample application LunarLander:
        // we have to tell thread to shut down & wait for it to finish, or else
        // it might touch the Surface after we return and explode
        boolean retry = true;
        _thread.setRunning(false);
        while (retry) {
            try {
                _thread.join();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }
    }
}

class BlockThread extends Thread {
    private SurfaceHolder _surfaceHolder;
    private Blocks _Blocks;
    private boolean _run = false;

    public BlockThread(SurfaceHolder surfaceHolder, Blocks blocks) {
        _surfaceHolder = surfaceHolder;
        _Blocks = blocks;
    }

    public void setRunning(boolean run) {
        _run = run;
    }

    public SurfaceHolder getSurfaceHolder() {
        return _surfaceHolder;
    }

    @Override
    public void run() {
        Canvas c;
        _Blocks.DrawBlocks();

        while (_run) {
            c = null;
            try {
                c = _surfaceHolder.lockCanvas(null);
                synchronized (_surfaceHolder) {
                    _Blocks.updatePhysics();
                    _Blocks.onDraw(c);
                }
            } finally {
                // do this in a finally so that if an exception is thrown
                // during the above, we don't leave the Surface in an
                // inconsistent state
                if (c != null) {
                    _surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }
}

class GraphicObject {
    //
     // Contains the coordinates of the graphic.
     //
    public class Coordinates {
        private int _x = 100;
        private int _y = 0;

        public int getX() {
            return _x + _bitmap.getWidth() / 2;
        }

        public void setX(int value) {
            _x = value - _bitmap.getWidth() / 2;
        }

        public int getY() {
            return _y + _bitmap.getHeight() / 2;
        }

        public void setY(int value) {
            _y = value - _bitmap.getHeight() / 2;
        }

        public String toString() {
            return "Coordinates: (" + _x + "/" + _y + ")";
        }
    }

    private Bitmap _bitmap;
    private Coordinates _coordinates;

    public GraphicObject(Bitmap bitmap) {
        _bitmap = bitmap;
        _coordinates = new Coordinates();

    }

    public Bitmap getGraphic() {
        return _bitmap;
    }

    public Coordinates getCoordinates() {
        return _coordinates;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T16:30:00.667

模拟器非常慢，可能是您的问题的原因。您的代码中没有任何内容，因此请在真实设备上尝试一下，然后再扯掉头发以使其更平滑。

# html - 标题属性的可访问性

> ID：13382768
> 
> 赞同：3
> 
> 时间：2012-11-14T16:20:35.257
> 
> 标签：html, accessibility

我的任务是确保我公司建立的网站符合 WCAG 2 AA。我通常编写可访问的代码，并且运行自动验证器通常只会突出显示拼写错误。然而，我最近切换了验证器，新的验证器突出显示我的许多链接不包含标题属性。过去，当链接文本本身不完全不言自明时，我只在链接上使用标题属性。

2个问题：

1.  我过去的行为是否正确，或者我应该默认使用标题属性（如图像上的 alt 属性）？
2.  可访问性的标题属性到底有多重要？周围的谷歌发现它们甚至可能不会被某些屏幕阅读器使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T16:28:24.693

根据[Webaim](http://webaim.org/articles/gonewild/)

根据定义，title 属性可用于提供咨询信息。它应该：

*   不提供重要信息或无障碍所需的信息。
*   不要提供与文本或替代文本中可用的相同信息。
*   不呈现明显的。如果咨询标题没有提供额外的有用信息，则可以将其删除。
*   小心用于小链接和导航项目，因为标题工具提示可能会覆盖底层项目。
*   不得用作替代文本、表单标签、表格标题等的替代品。
*   始终用于框架元素

所以基本上你一直在正确的道路上。更清楚它是否真正可访问比确保它通过所有自动验证器更重要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:26:51.167

当链接的内容不太直观时，标题属性应该用于补充描述信息。看来您以前的使用是可以接受的。

# objective-c - 在 Interface Builder 中设计弹出框

> ID：13382769
> 
> 赞同：2
> 
> 时间：2012-11-14T16:20:39.363
> 
> 标签：objective-c, ios, xcode, uiviewcontroller, interface-builder

我在故事板（界面生成器）中创建了一个导航控制器及其子控制器。这些控制器仅在弹出框内显示。

将显示弹出框的栏按钮是在代码中创建的，并将以编程方式添加到工具栏。

这基本上可以正常工作。然而，故事板中视图控制器的尺寸是标准的 iPad 尺寸，这使得设计 UI 非常困难，因为弹出框中呈现的视图控制器会小得多。

如何直接在 Interface Builder 中调整故事板中设计的视图控制器的大小？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:23:09.740

将视图控制器的大小属性更改为“自由形式”，然后单击视图并将视图的大小调整为您想要的大小。

# python - 使用相同的布尔值初始化列表

> ID：13382774
> 
> 赞同：52
> 
> 时间：2012-11-14T16:21:03.653
> 
> 标签：python, list, initialization, boolean

没有循环是否可以将所有列表值初始化为某个布尔值？例如，我想要一个包含 N 个元素的列表，全部为 False。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-11-14T16:22:48.397

你可以这样做： -

```
>>> [False] * 10
[False, False, False, False, False, False, False, False, False, False] 
```

**注意： -** 请注意，您永远不应该使用具有相同值的 a`list`来执行此操作`mutable types`，否则您会看到以下示例中的令人惊讶的行为：-

```
>>> my_list = [[10]] * 3
>>> my_list
[[10], [10], [10]]
>>> my_list[0][0] = 5
>>> my_list
[[5], [5], [5]] 
```

如您所见，您在一个内部列表中所做的更改会反映在所有列表中。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-14T16:50:40.923

```
 my_list = [False for i in range(n)] 
```

这将允许您更改单个元素，因为它独立构建每个元素。

虽然，这在技术上*是*一个循环。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-24T18:34:42.900

当空间很重要时，[`bytearray`](https://docs.python.org/3/library/functions.html#bytearray)是一个更好的选择。它的空间效率大约是布尔解决方案列表的五倍。

这将创建一个值数组`N`，初始化为零：

```
B = bytearray(N) 
```

# c - scanf() 有两个变量但一个输入？

> ID：13382779
> 
> 赞同：2
> 
> 时间：2012-11-14T16:21:13.383
> 
> 标签：c, variables, scanf

我想知道您是否可以执行以下操作：

```
printf("\nEnter kwh used (for 7 economy tariff, enter Peak usage)\n");
scanf("%d",&kwh,&peak); 
```

我想它不会起作用，但有什么办法可以获得类似的效果。我希望你知道我的意思。我正在尝试从一个 scanf 中获取一个（峰值或 kwh），以便以后可以将其传递给适当的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:23:25.033

如果您希望两个变量中的值相同，您应该自己执行此操作：

```
int kwh, peak;

if (scanf("%d",&kwh) == 1)
{
    peak = kwh;
}
else
{
    // complain
} 
```

# objective-c - 逐个字符循环遍历两个字符串以查找部分字谜

> ID：13382782
> 
> 赞同：1
> 
> 时间：2012-11-14T16:21:36.530
> 
> 标签：objective-c, algorithm, for-loop, nsstring

好的，所以我正在尝试比较两个字符串，一个是八个字母长，一个可能是 3-8 个字母长，看看较短的字符串是否可以由较长的字母组成。遵循一些算法和技巧，我得到了一些几乎可以工作的东西，但并非在所有情况下都有效。

和被重新排序成字母顺序（例如，将成为`haystack`和将成为）。在某些情况下，这是可行的，但如果存在多个字母，则会出现问题。一个这样的坏例子是它认为内部确实存在，显然它不应该存在，因为它有三个 A。`needle``tomatoes``aemoostt``toe``eot``aaabrs``aabeirsz`

如果有人可以浏览我的方法并发现问题发生的位置，我将非常非常感激。提前致谢。

```
- (void)viewDidLoad {
    [super viewDidLoad];
    BOOL doesWordExist = NO;
    doesWordExist = [self doesEightLetterWord: @"aabeirsz" containWord: @"aaabrs"];
    NSLog(doesWordExist ? @"Does it exist? Yes" : @"Does it exist? No");
}

- (BOOL) doesEightLetterWord: (NSString* )haystack containWord: (NSString *)needle {
    for (int i = 0; i < [needle length]; i++) {

        NSString *currentCharacter = [needle substringWithRange:NSMakeRange(i, 1)];
        NSCharacterSet *set = [NSCharacterSet characterSetWithCharactersInString: currentCharacter];
        NSLog(@"Current character is %@", currentCharacter);
        if ([haystack rangeOfCharacterFromSet:set].location == NSNotFound) {
            NSLog(@"The letter %@ isn't found in the word %@", currentCharacter, haystack);
            return NO;
        } else {
            NSLog(@"The letter %@ is found in the word %@", currentCharacter, haystack);
            int currentLocation = [haystack rangeOfCharacterFromSet: set].location;
            currentLocation++;
            NSString *newHaystack = [haystack substringFromIndex: currentLocation];
            NSString *newNeedle = [needle substringFromIndex: i + 1];
            NSLog(@"newHaystack is %@", newHaystack);
            NSLog(@"newNeedle is %@", newNeedle);

            if ([newNeedle isEqualToString:@""]) {
                return YES;
            }
        }
    }

return NO;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:26:01.347

我建议您进一步转换您的输入。按字母排序后，建立一个频率表，将每个字符串变成一个（字母，频率）图。然后遍历较短字符串的映射，对于每个键，如果较大字符串的映射中不存在该键，或者较大字符串的映射中的频率较小，则将其拒绝为字谜。否则，它会通过。

**编辑**需要注意的是，我绝不是 Objective C 程序员，这里是关于如何将频率表构建为`NSCountedSet`for的尝试`haystack`：

```
NSCountedSet *haystackSet = [[NSCountedSet alloc] init];
NSUInteger len = [haystack length];
for (NSUInteger i = 0; i < len; i++) {
    unichar c = [haystack characterAtIndex:i];
    if ([[NSCharacterSet letterCharacterSet] characterIsMember:c])
        [haystackSet addObject:[NSNumber numberWithInteger:c]];
} 
```

对 for 做同样`needle`的事情，然后它是遍历计数`needle`并检查计数的问题`haystack`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:42:28.047

问题是对字符的搜索`needle`总是搜索整个`haystack`. `newHaystack`被正确创建为 的新子字符串`haystack`，但从未实际使用过。因此，例如，对每个字符的搜索`a`总是搜索整个原始值`aabeirsz`。

# html - 滚动条 onMouseOver

> ID：13382783
> 
> 赞同：0
> 
> 时间：2012-11-14T16:21:41.730
> 
> 标签：html, css, scrollbar

我在 YouTube（首页 > 订阅部分）上看到了这种效果，我很喜欢。看起来根本没有滚动条，但是当你用鼠标悬停时，它会“出现”

见图片：

![左 - 不滚动，右 - 滚动](../Images/34a812156576fdd4cc6b8073c5e68e93.png)

我真的很喜欢它的外观，我想以某种方式重现它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:25:14.260

这个比较简单，只要`overflow: hidden`再上`:hover`make `overflow-y`:scroll;

[小提琴](http://jsfiddle.net/XKHyq/)

# c# - DropDownList 上的数据副本更改

> ID：13382784
> 
> 赞同：0
> 
> 时间：2012-11-14T16:21:49.307
> 
> 标签：c#, asp.net, sql, drop-down-menu

我正在使用 DropDownList 从 FormViews 中提取数据并正确计算它。我用Label13看看同学们是什么`Run Time is`。如果我选择用户一并放置它计算结果的所有数据，然后我选择用户二（还没有数据），现在如果我再次选择用户一而不将任何信息放入用户二，它将从用户复制 Label13 结果给用户二的数据。（如果有意义的话）。具体来说`Label13`。

这是一些代码：

```
 protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        Label13.Text = "";

        if (DropDownList1.SelectedValue != "0")
        {
            Score();

        }
    }
 protected void Score()
    {
        Label13.Text = "";

        //Button1.Visible = true;
        Button5.Visible = true;
        Label19.Visible = false;
        UpdatePanel4.Visible = true;

        FormView2.DataBind();
        Label sitL = ((Label)FormView2.FindControl("SitUpsLabel"));
        Label pushL = ((Label)FormView2.FindControl("pushUpsLabel"));
        Label MeterL = ((Label)FormView2.FindControl("MeterLabel"));

        if (DropDownList1.SelectedValue != "0")
        {
            if (sitL.Text != "" || pushL.Text != "" || MeterL.Text != "")
            {

                int count = 0;
                int counter2 = 0;
                string test = sitL.Text;
                decimal val;
                string test2 = pushL.Text;
                decimal val2;
                string test3 = MeterL.Text;
                decimal val3;

                Decimal.TryParse(test, out val);
                Decimal.TryParse(test2, out val2);
                Decimal.TryParse(test3, out val3);
                //decimal holder = 0;
                //decimal holder2 = 0;
                //decimal scores = 0;

                for (int i = 0; i < situps.Length; i++)
                {
                    if (val == 30 + count)
                    {
                        Label14.Text = "SitUps Score: " + situps[i];
                        holder = situps[i];
                    }
                    count = count + 1;
                }
                for (int i = 0; i < pushups.Length; i++)
                {
                    if (val2 == 21 + counter2)
                    {
                        Label15.Text = "Push Ups Score: " + pushups[i];
                        holder2 = pushups[i];
                    }
                    counter2 = counter2 + 1;
                }

                decimal counter = 0;
                decimal sideCounter = 0;

                int placer = 0;
                for (int i = 0; i < 1700; i++)
                {

                    if (val3 == 56 + counter)
                    {
                        Label20.Text = "300 Meter: " + meterRun[placer];
                        holder3 = meterRun[placer];

                    }
                    counter = counter + .01M;
                    sideCounter = sideCounter + .01M;
                    if (sideCounter >= .5M)
                    {
                        placer++;
                        sideCounter = 0;
                    }

                }

                if (val3 < 56)
                {
                    holder3 = 50;
                }
                if (val3 > 71)
                {
                    holder3 = 0;
                }

                if (val < 30)
                {
                    holder = 0.00M;
                }
                if (val > 38)
                {
                    holder = 50.00M;
                }
                if (val2 < 21)
                {
                    holder2 = 0.00M;
                }
                if (val2 > 35)
                {
                    holder2 = 50.00M;
                }

                scores = holder + holder2 + holder3;
                scores = 160 - scores;

                int min1 = 1;
                int min2 = 4;
                int sec1 = 3;
                int sec2 = 1;
                string a = "{0}{1}{2}{3}";
                string[] numbers = new string[57];
                for (int i = 0; i < 57; i++)
                {
                    numbers[i] = string.Format(a, min1, min2, sec1, sec2);

                    sec2 = sec2 - 1;
                    if (sec2 == -1)
                    {
                        sec2 = 9;
                        sec1 = sec1 - 1;
                    }
                    if (sec1 == -1)
                    {
                        sec1 = 5;
                        min2 = min2 - 1;
                    }
                    //Console.WriteLine(numbers[i]);

                }

                decimal points = 30;
                decimal points2 = 30.357M;

                {

                    if (scores <= 30)
                    {
                        Label12.Text = scores.ToString();
                        Label13.Text = "1431";
                        SqlConnection conns = new SqlConnection(ConfigurationManager.ConnectionStrings["TestDBConnectionString1"].ConnectionString);
                        SqlCommand cmd = new SqlCommand("UPDATE bleaTest SET rTimeN = @rTimeN WHERE (Id = @Id)", conns);
                        cmd.CommandType = CommandType.Text;
                        Label IdL = ((Label)FormView1.FindControl("IdLabel"));
                        cmd.Parameters.AddWithValue("@Id", IdL.Text);
                        cmd.Parameters.AddWithValue("@rTimeN", Label13.Text);
                        conns.Open();
                        cmd.ExecuteNonQuery();

                    }
                    if (scores > 40)
                    {
                        Label12.Text = "Failed";
                        Label13.Text = "Failed";

                        SqlConnection conns = new SqlConnection(ConfigurationManager.ConnectionStrings["TestDBConnectionString1"].ConnectionString);
                        SqlCommand cmd = new SqlCommand("UPDATE bleaTest SET rTimeN = @rTimeN WHERE (Id = @Id)", conns);
                        cmd.CommandType = CommandType.Text;
                        Label IdL = ((Label)FormView1.FindControl("IdLabel"));
                        cmd.Parameters.AddWithValue("@Id", IdL.Text);
                        cmd.Parameters.AddWithValue("@rTimeN", Label13.Text);
                        conns.Open();
                        cmd.ExecuteNonQuery();

                    }
                    for (int i = 0; i < miles.Length; i++)
                    {

                        if (scores > points && scores < points2)
                        {
                            Label12.Text = scores.ToString();
                            Label13.Text = numbers[i];
                            SqlConnection conns = new SqlConnection(ConfigurationManager.ConnectionStrings["TestDBConnectionString1"].ConnectionString);
                            SqlCommand cmd = new SqlCommand("UPDATE bleaTest SET rTimeN = @rTimeN WHERE (Id = @Id)", conns);
                            cmd.CommandType = CommandType.Text;
                            Label IdL = ((Label)FormView1.FindControl("IdLabel"));
                            cmd.Parameters.AddWithValue("@Id", IdL.Text);
                            cmd.Parameters.AddWithValue("@rTimeN", Label13.Text);
                            conns.Open();
                            cmd.ExecuteNonQuery();

                        }
                        points = points + .357M;
                        points2 = points2 + .357M;

                    }
                }

                Label16.Text = scores.ToString();

            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:32:43.640

检查您的页面加载是否被调用两次

将您用于填充下拉列表的代码放入

```
 if  (!IsPostBack)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:59:30.660

我在方法中弄乱了一些代码，`DropDownList1_SelectedIndexChange`还改变了我的 FormView1`EnableViewState="False"`

这是代码`DropDownList1_SelectedIndexChange`：

```
 protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
 {
     if (DropDownList1.SelectedValue != "0")
     {
         FormView2.DataBind();
         Label12.Text = "";
         Label13.Text = "";

         Button2_Click(sender, e);
         Button5.Visible = true;
         Label19.Visible = false;
         UpdatePanel4.Visible = true;
     }
     else
     {
         UpdatePanel4.Visible = false;
         Button5.Visible = false;
         Label19.Visible = true;
     }
 } 
```

# java - SimpleDateFormate.parse 方法不解析选定的 TimeZone

> ID：13382789
> 
> 赞同：0
> 
> 时间：2012-11-14T16:22:04.333
> 
> 标签：java, simpledateformat

```
 private String target_time_zone = "Australia/Hobart";
  private String format    = "MM/dd/yyyy HH:mm:ss z";

  public static void main(String args[]) throws ParseException {

        Date date = Calendar.getInstance().getTime();
        TZFormat tzFormat = new TZFormat();
        System.out.println("Converted TZ Date: "+ tzFormat.TZF(date));

  }

  public Date TZF(Date dt) throws ParseException {

        TimeZone tz = TimeZone.getTimeZone(target_time_zone);     
        SimpleDateFormat date_format_gmt = new SimpleDateFormat(format);
        date_format_gmt.setTimeZone(tz);
        SimpleDateFormat date_format_gmt1 = new SimpleDateFormat(format);
        date_format_gmt1.setTimeZone(tz);

        System.out.println("formated value: "+ date_format_gmt.format(dt));

       return date_format_gmt1.parse(date_format_gmt.format(dt));
  } 
```

输出：

```
formated value: 11/15/2012 03:16:11 EST
Converted TZ Date: Wed Nov 14 21:46:11 IST 2012 
```

实际上我的要求是我想将日期转换为具有格式的 target_time_zone timeZone 并返回转换后的日期。

```
 private String target_time_zone = "Australia/Hobart";
 private String format     = "MM/dd/yyyy HH:mm:ss z"; 
```

这里想要发生的是在 TZF 方法中格式化 date_format_gmt.format(dt) 当我们解析它显示先前值（实际时间）的值时，将日期格式化为我给定的 TimeZone。

如何获取具有选定时区的日期对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:23:40.987

`Date`对象始终以毫秒（纪元时间）表示时间，它不包含任何时区信息。当您`format`将其设为字符串时，只有它以指定时区的所需格式打印。

# regex - 用于验证名称的正则表达式

> ID：13382791
> 
> 赞同：1
> 
> 时间：2012-11-14T16:22:09.220
> 
> 标签：regex, windows-phone-7

任何人请告诉我允许字母作为第一个字母和字母、数字、.（点）、-（连字符）作为剩余字母的正则表达式，最少 2 个字母，最多 15 个字母。

先感谢您..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:37:38.943

让我知道这是否适合您：

```
^[a-zA-Z]([a-zA-Z0-9]|\.|-){1,14}$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:57:41.680

如果你对 ASCII 没问题：

```
^[A-Za-z][-\w.]{1,14}$ 
```

# c - LPC1768 上的多个外部中断：只有一个中断在工作

> ID：13382806
> 
> 赞同：1
> 
> 时间：2012-11-14T16:22:51.503
> 
> 标签：c, arm, interrupt, cortex-m3

我已经为外部中断 EINT1 编写了代码。这行得通，但如果我想添加第二个中断（EINT3），只有新的作品。我可以两者兼得。

下面是我的代码，可能是我错了，但我看不到在哪里。你能帮助我吗？

```
 printuart(14,"SLEEP MODE ON");          
      EINTInit();   

      LPC_SC->PCON &= ~(0x03 <<0); 

      flagwakeup=0;

      while(flagwakeup==0)
          checkwdt_ev(); //reset watchdog

    NVIC_DisableIRQ(EINT1_IRQn);

    LPC_PINCON->PINSEL4 &= ~(0x03 << 22);   //as gpio
    LPC_GPIO2->FIODIR &= ~(0x01 <<11);  // as input
    LPC_PINCON->PINSEL2 &= ~(0x03<<26); // P2.13 as GPIO
    LPC_GPIO2->FIODIR &=~(1<<13);   //P2.13 as input

    printuart(16,"SLEEP MODE OFF");

uint32_t EINTInit( void )
{
 LPC_PINCON->PINSEL4 &= ~(3UL<<22); // Reset P2.11  to GPIO
 LPC_PINCON->PINSEL4 |= (0x01<<22); // P2.11 as external interupt

 LPC_PINCON->PINSEL4 &= ~(3UL<<26); // Reset P2.13  to GPIO
 LPC_PINCON->PINSEL4 |= (0x01<<26); // P2.13 as external interupt

 LPC_GPIOINT->IO2IntEnF = ((0x01 <<11) | (0x01 <<13));   //Port2.11 and P2.13 are  falling edge.

 LPC_SC->EXTMODE = (EINT1_EDGE | EINT3_EDGE) ;      //INT1 and INT3 edge trigger

 LPC_SC->EXTPOLAR = 0;              //INT1 and INT3 is falling edge by default

 NVIC_EnableIRQ(EINT1_IRQn);

 return( TRUE );
}

void EINT1_IRQHandler (void)

{
  LPC_SC->EXTINT = EINT1;       /* clear interrupt */

  LPC_SC->PCONP |= (0x01 <<3);      //power on uart0
  LPC_SC->PCONP |= (0x01 <<4);      //power on uart1
  LPC_SC->PCONP |= (0x01 <<7);      //power on i2c0
  LPC_SC->PCONP |= (0x01 <<8);      //power on SPI
  LPC_SC->PCONP |= (0x01 <<10);     //power on SSP1
  LPC_SC->PCONP |= (0x01 <<19);     //power on i2c1
  LPC_SC->PCONP |= (0x01 <<21);     //ppower on SSP0
  LPC_SC->PCONP |= (0x01 <<26);     //power on i2c2

  //test2_count_fhn(15,"SLEEP MODE OFF");

  flagwakeup=1;

} 
```

我也尝试过另一个，结果相同：

```
 printuart(14,"SLEEP MODE ON");

              EINTInit();   //external interrupt for wake up after sleep mode
              EINT3Init();

              LPC_SC->PCON &= ~(0x03 <<0); 
              flagwakeup=0;

              while(flagwakeup==0)
                  checkwdt_ev(); //reset watchdog

            NVIC_DisableIRQ(EINT1_IRQn);
            NVIC_DisableIRQ(EINT3_IRQn);
            LPC_PINCON->PINSEL4 &= ~(0x03 << 22);   //as gpio
            LPC_GPIO2->FIODIR &= ~(0x01 <<11);  // as input
            LPC_PINCON->PINSEL2 &= ~(0x03<<26); // P2.13 as GPIO
            LPC_GPIO2->FIODIR &=~(1<<13);   //P2.13 as input

            printuart(16,"SLEEP MODE OFF");

    uint32_t EINTInit( void )

    {
      LPC_PINCON->PINSEL4 &= ~(3UL<<22);    // Reset P2.11  to GPIO
      LPC_PINCON->PINSEL4 |= (0x01<<22);    // P2.11 as external interupt

      LPC_GPIOINT->IO2IntEnF = (0x01 <<11); //Port2.11 is falling edge.

      LPC_SC->EXTMODE = EINT1_EDGE ;        // INT1 edge trigger

      LPC_SC->EXTPOLAR = 0;             // INT1 is falling edge by default

      NVIC_EnableIRQ(EINT1_IRQn);

      return( TRUE );

    }

    uint32_t EINT3Init( void )

    {
      LPC_PINCON->PINSEL4 &= ~(3UL<<26);    // Reset P2.13  to GPIO
      LPC_PINCON->PINSEL4 |= (0x01<<26);    // P2.13 as external interupt

      LPC_GPIOINT->IO2IntEnF |= (0x01 <<13);    //Port2.13 is falling edge.

      LPC_SC->EXTMODE |= EINT3_EDGE;        // INT3 edge trigger 

      LPC_SC->EXTPOLAR = 0;             //INT1 is falling edge by default */

      NVIC_EnableIRQ(EINT3_IRQn);

      return( TRUE );

    }

    void EINT3_IRQHandler (void)

    {
      LPC_SC->EXTINT = EINT3;       //clear interrupt 

      LPC_SC->PCONP |= (0x01 <<3);      //power on uart0
      LPC_SC->PCONP |= (0x01 <<4);      //power on uart1
      LPC_SC->PCONP |= (0x01 <<7);      //power on i2c0
      LPC_SC->PCONP |= (0x01 <<8);      //power on SPI
      LPC_SC->PCONP |= (0x01 <<10);     //power on SSP1
      LPC_SC->PCONP |= (0x01 <<19);     //power on i2c1
      LPC_SC->PCONP |= (0x01 <<21);     //ppower on SSP0
      LPC_SC->PCONP |= (0x01 <<26);     //power on i2c2

      flagwakeup=1;

    }

    void EINT1_IRQHandler (void)

    {
      LPC_SC->EXTINT = EINT1;       //clear interrupt 

      LPC_SC->PCONP |= (0x01 <<3);      //power on uart0
      LPC_SC->PCONP |= (0x01 <<4);      //power on uart1
      LPC_SC->PCONP |= (0x01 <<7);      //power on i2c0
      LPC_SC->PCONP |= (0x01 <<8);      //power on SPI
      LPC_SC->PCONP |= (0x01 <<10);     //power on SSP1
      LPC_SC->PCONP |= (0x01 <<19);     //power on i2c1
      LPC_SC->PCONP |= (0x01 <<21);     //ppower on SSP0
      LPC_SC->PCONP |= (0x01 <<26);     //power on i2c2

      flagwakeup=1;

} 
```

我想我的问题出在中断的初始化（？）

如果有人可以帮助我，

谢谢

# xcode4.5 - 在 Interface Builder 中拖动对象

> ID：13382810
> 
> 赞同：1
> 
> 时间：2012-11-14T16:22:59.687
> 
> 标签：xcode4.5

我正在尝试从对象库中拖动一个对象，虽然使用魔术鼠标我没有问题，但使用触控板不会导致将对象放置在它的位置。

我在触控板设置中选择了 3 指拖动选项。

在 Interface Builder 中拖动（和 Control-drag）对象的正确方法是什么？

谢谢！

# php - 为什么 fancybox 没有加载我的页面？

> ID：13382814
> 
> 赞同：0
> 
> 时间：2012-11-14T16:23:09.527
> 
> 标签：php, javascript, jquery, fancybox, hybridauth

fancybox 的这个问题让我抓狂。当您单击该链接时，加载图标会一直显示，并且不会显示任何页面。我已经测试了几件事，但我不知道为什么会发生这种情况。

它只发生在一种特定类型的页面上，它是我用来向 facebook 注册用户的页面（我在内部使用 hybridauth）。他们应该被要求在 facebook 网站上获得授权，但什么都没有。但是当然，如​​果你正常打开链接，没有fancybox，它就可以正常工作。

我为这个问题做了一个活生生的例子，所以你可以自由地探索它。 [现场测试](http://bandsheep.com/sof/)

我非常感谢您的帮助，如果您需要更多信息，请询问。谢谢你。

编辑：这是 register.php 源代码：

```
<?php
session_start();

error_reporting(E_ALL);
ini_set('display_errors', 'On');

$config = dirname(__FILE__) . '/hybridauth/hybridauth/Hybrid/config.php';
require_once( "hybridauth/hybridauth/Hybrid/Auth.php" );

try{
    $hybridauth = new Hybrid_Auth( $config );

    switch($_GET["s"]){

        case "facebook":
            $facebook = $hybridauth->authenticate( "Facebook" );
            $facebook_user_profile = $facebook->getUserProfile();

            echo "<pre>";
            print_r( $facebook_user_profile );
            echo "</pre>";
    }

} catch(Exception $e){
    // Display the recived error,
    // to know more please refer to Exceptions handling section on the userguide
    switch( $e->getCode() ){
        case 0 : echo "Unspecified error."; break;
        case 1 : echo "Hybriauth configuration error."; break;
        case 2 : echo "Provider not properly configured."; break;
        case 3 : echo "Unknown or disabled provider."; break;
        case 4 : echo "Missing provider application credentials."; break;
        case 5 : echo "Authentification failed. "
        . "The user has canceled the authentication or the provider refused the connection.";
        break;
        case 6 : echo "User profile request failed. Most likely the user is not connected "
        . "to the provider and he should authenticate again.";
        $twitter->logout();
        break;
        case 7 : echo "User not connected to the provider.";
        $twitter->logout();
        break;
        case 8 : echo "Provider does not support this feature."; break;
    }

    // well, basically your should not display this to the end user, just give him a hint and move on..
    echo "<br /><br /><b>Original error message:</b> " . $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:31:08.923

您的 register.php 正在返回：

[http://www.andsheep.com/dev/tests/live/BS_tests/hybridauth/hybridauth/?hauth.start=Facebook&hauth.time=1352910122&r=](http://www.andsheep.com/dev/tests/live/BS_tests/hybridauth/hybridauth/?hauth.start=Facebook&hauth.time=1352910122&r=)

你也有：`dirname(__FILE__)`在一条线上，但不是另一条线。

```
$config = dirname(__FILE__) . '/hybridauth/hybridauth/Hybrid/config.php';
require_once( "hybridauth/hybridauth/Hybrid/Auth.php" ); 
```

无论如何，现在我在 facebook 链接上获得了一个 .htpasswd 登录框......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:23:21.863

我认为问题可能是 Facebook 阻止了 iframe 的身份验证对话框。

# c++ - 模板化类，如何在不使该类模板化的情况下表示为另一个类的成员变量

> ID：13382820
> 
> 赞同：2
> 
> 时间：2012-11-14T16:23:18.553
> 
> 标签：c++, templates

我有一个模板类，

```
template<typename T>
class TClass
{
public:
   //functions here
};

class Holding {
  public:

 private:
  TClass<T>  m_item;  //don't want this
};

int main() {
   Holding hd;
   //do whatever
   return 0;
} 
```

我想要一种在 Holding 中的实例变量，但不想让 Holding 成为一个模板类。我的设计选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:27:32.450

看起来你想持有任何类型。如果确实如此，那么您可以使用[`boost::any`](http://www.boost.org/doc/libs/1_48_0/doc/html/any.html)：

```
class Holding {
  public:

 private:
  TClass<boost::any>  m_item;  //you want this?
}; 
```

如果您不使用 Boost，那么您可以`any`自己实现或在此站点上搜索其实现或使用 google。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:25:17.027

派生`TClass`自非模板基类并`B`拥有`Holding`一个指向.`std::unique_ptr``B`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:34:43.503

如果可能的馆藏足够相似，您可以使用类型擦除。

```
#include <memory>

class HeldType {
public:
  virtual void myfunc() = 0;
  virtual ~HeldType() {}
};

template<typename T>
class HeldTypeModel : public HeldType {
public:
  HeldTypeModel(const T& t) : data_(t) {}
  void myfunc() { data_.myfunc(); }
private:
  T data_;
};

class TClass {
public:
  TClass() : x_(nullptr) {}

  template<typename T> 
  void set_t(const T& t) {
    x_.reset(new HeldTypeModel<T>(t));
  }

  std::unique_ptr<HeldType> x_;
};

class model {
public:
  void myfunc() {}
};

int main()
{
  TClass x;
  x.set_t(model{});
  return 0;
} 
```

您需要弄清楚所有可能的 T 之间的共性是什么。您可能还想添加一些函数来获取`typeid`和 排除实际类型等。看看`boost::any`.

如果你更喜欢实验性的东西，你可以看看[Boost.Type Erasure](http://steven_watanabe.users.sourceforge.net/type_erasure/libs/type_erasure/doc/html/index.html)，它去掉了一些样板，但还不是正式版本的一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T16:29:55.090

我可能无法正确理解您的问题。基本上，您有一个模板类 TClass 需要通过模板参数进行配置。然后，您拥有拥有 TClass 的 Holding，但无论出于何种原因，您都不想将 Holding 设为模板。

这意味着Holding需要静态定义模板参数是什么

```
TClass<SomeClass> m_item; 
```

现在，您在代码中说您不想要这个...我不确定您是否不想提供模板参数或提供 T。如果是 T，上面的代码将解决您的问题。否则，您需要使用 typedef 来删除模板参数并具有“无模板”类型，例如：

```
typedef TClass<int> intTClass; // replace int by whatever param you want 
```

然后可以用作

```
class Holding {
  public:

 private:
  intTClass m_item;  //don't want this
}; 
```

# c - 使用结构数组成员（C）二进制保存结构？

> ID：13382821
> 
> 赞同：0
> 
> 时间：2012-11-14T16:23:21.703
> 
> 标签：c, dynamic, file-io, struct

我目前正在开发一个使用这两个结构的程序：

```
//Struct to hold contact info about a friend
typedef struct
{
    char *firstName, *lastName;
    char *home, *cell;
} Friend;

//Struct to hold a list of friends and keep track of its size.
typedef struct
{
    Friend *listEntries;
    size_t listSize;
} FriendList; 
```

结构中的每个字符串成员`Friend`都是动态分配的，`listEntries`内部的数组也是如此`FriendList`。我正在尝试将 a 保存`FriendList`为二进制记录，但是当我尝试使用 执行此操作`fwrite()`然后使用 读取它时`fread()`，从文件中读取的`listEntries`数组为空。`FriendList`有没有办法保存这样的动态结构？

**编辑：我用来读/写结构的函数是：**

```
void writeList(FriendList *fl, char* filename)
{
    FILE *fp = fopen(filename, "wb+");

    if(fp != NULL)
    {
        fwrite(fl, sizeof(FriendList), 1, fp);
    }

    fclose(fp);
}

void readList(FriendList *dest, char* filename)
{
    FILE *fp = fopen(filename, "rb");

    if(fp == NULL)
    {
        printf("oops...");
    }
    else
    {
        fread(dest, sizeof(FriendList), 1, fp);
    }

    close(fp);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:38:23.477

您必须保存指针指向的数据，而不是指针本身。指针在您的进程之外是没有意义的，因为它目前存在，因此将指针值保存到磁盘没有任何意义。

通常，您不能通过使用单个`fwrite()`转储结构来执行此操作，因为它不会跟随指针。

您需要发明一种实际使用的外部文件格式，并编写代码来保存和加载它。我建议使用基于文本的格式，因为您的大部分数据都是文本。[也许 CSV](http://en.wikipedia.org/wiki/Comma-separated_values)？

# c# - 查找失败的验证器 asp.net

> ID：13382823
> 
> 赞同：9
> 
> 时间：2012-11-14T16:23:31.117
> 
> 标签：c#, asp.net, validation, logging

我有一个页面，我想在其中记录用户未能满足相关字段要求的每条验证消息。

问题是我的回发/按钮点击永远不会发生（可能是因为客户端验证），因此在用户真正正确获得每个字段之前不会发生日志记录（没有验证错误）。

按钮点击事件方法：

```
protected void btnNext_Click(object sender, EventArgs e)
{
    Page.Validate();
    if(Page.IsValid)
    {
        //code
    }
    else
    {
        foreach (IValidator validator in Validators)
        {
            if (!validator.IsValid)
            {
                PageValidatorErrors error = new PageValidatorErrors
                              {
                                  WebsiteID = AppState.WebsiteID,
                                  Page = Request.Url.AbsolutePath,
                                  URL = Request.Url.ToString(),
                                  UserIP = Tools.GetIP(),
                                  ErrorMessage = validator.ErrorMessage,
                                  CreatedDate = DateTime.Now
                               };
                pageValidatorErrorsRep.insert(error);
            }
        }
    }
} 
```

任何想法，我如何记录这些消息？

**编辑：**

```
<script type="text/javascript">
    function validatePage()
    {
        if (window.Page_IsValid != true)
        {
            //Page_Validators is an array of validation controls in the page. 
            if (window.Page_Validators != undefined && window.Page_Validators != null)
            {
                //Looping through the whole validation collection. 
                for (var i = 0; i < window.Page_Validators.length; i++)
                {
                    window.ValidatorEnable(window.Page_Validators[i]);

                    //if condition to check whether the validation was successfull or not. 
                    if (!window.Page_Validators[i].isvalid)
                    {
                        var errMsg = window.Page_Validators[i].getAttribute('ErrorMessage');
                        alert(errMsg);
                    }
                }
            }
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:30:40.400

这是解决方案的一部分，您可以通过在客户端调用它来获取 validates/true false：

[http://razeeb.wordpress.com/2009/01/11/calling-aspnet-validators-from-javascript/](http://razeeb.wordpress.com/2009/01/11/calling-aspnet-validators-from-javascript/)

```
function performCheck()
{

if(Page_ClientValidate())
{

//Do something to log true/ false
}

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:27:32.083

尝试将所有验证器上的 EnableClientScript 属性更改为 false。您的所有验证都将仅在服务器端进行。

# mysql - Latin1 字符集表未在 Latin1 Encoding 中编码字符

> ID：13382824
> 
> 赞同：0
> 
> 时间：2012-11-14T16:23:30.977
> 
> 标签：mysql, character-encoding

我将其插入的 mysql 表（我们称之为 foo）是 latin1 字符编码的（通过显示的命令显示[如何查看 MySQL 数据库/表/列是什么字符集？](https://stackoverflow.com/questions/1049728/how-do-i-see-what-character-set-a-database-table-column-is-in-mysql)）并且我的数据库在之后具有以下结果显示变量：

```
| character_set_client                    | latin1                                                                                    |
| character_set_connection                | latin1                                                                                    |
| character_set_database                  | latin1 
```

在 foo 中，我在 varchar(255) col 中存储了一个带有字符串 foo® 的条目，当我以十六进制查看它时，它显示它是以 utf8 (666F6FC2AE) 编码的。从 mysql 提示符运行选择查询会显示 foo®。但是，当我插入以 latin1 666F6FAE 编码的相同字符串时，当我在同一个 mysql 命令提示符下运行选择时，我得到一个 foo。为什么我的 latin1 表中有 utf8 编码的数据，为什么我无法将 latin1 编码的数据插入到我的表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:50:33.170

您的命令行客户端似乎使用 UTF-8 进行显示/输入/输出。`666F6FC2AE`不是 latin-1 列中的 UTF-8 编码值，它是“foo®”的 latin-1 代码。从数据库中获取它，您的 CLI 将 latin-1 数据解释为 UTF-8，显示“foo®”。

为了显示：

*   CLI 以 UTF-8 运行
*   您在 CLI 上输入“foo®”，即`66 6F 6F C2AE`
*   数据库连接设置为 latin-1
*   数据库将输入解释为 latin-1，认为您要存储“fooÂ®”
*   列编码是 latin-1，没问题，数据库存储“foo®”
*   您从数据库中获取数据，全部为 latin-1，然后返回`66 6F 6F C2 AE`
*   CLI 将其解释为 UTF-8，显示“foo®”

您需要将连接编码设置为`utf8`，因为您的客户端发送 UTF-8。那，或者说服您的 CLI 在 Latin-1 中运行，这可能更难/不太方便/导致更多副作用。

# vb.net - 在 Visual Studio 中修复表单大小

> ID：13382830
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:23:48.973
> 
> 标签：vb.net, visual-studio-2010, error-handling, webforms

我正在尝试在 Visual Basic 中设计一个 Web 表单，但我遇到了问题。我将所有元素（按钮、标签等）放在我想要的位置。当我运行表单时，我可以选择最大化表单的屏幕当我这样做时，表单中会出现一个空白区域，其中没有元素，并且我的所有元素都显示在表单的左上角。我在设计表单时看不到那个空白区域。你能帮我解决这个问题吗？我尝试了 autosize、autoscroll 和 size 属性，但我没有解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:42:01.943

您没有指定它是**VB6**还是**VB.Net**，但有一次，这并不重要。

查看表单属性`BorderStyle`，并将其更改为“固定”选项之一。

*   [VB6 文档](http://msdn.microsoft.com/en-us/library/aa245047%28v=vs.60%29.aspx)
*   [VB.Net 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formborderstyle.aspx)

# java - 有什么问题？:(

> ID：13382834
> 
> 赞同：0
> 
> 时间：2012-11-14T16:24:07.570
> 
> 标签：java, swing, if-statement, panel

```
if((wort[0] == "A") && (wort[1] == "P") && (wort[2] == "F") && (wort[3] == "E") && (wort[4] == "L") && (wort[5] == "K") && (wort[6] == "U") && (wort[7] == "C") && (wort[8] == "H") && (wort[9] == "E") && (wort[10] == "N")) {

        frame.remove(panel);
        frame.add(winpanel);
        winpanel.add(winmeldung);
        winpanel.add(beenden);
        frame.validate(); 
```

嗨，我在这里有一个巨大的项目，所以我将只发布其中的一部分。我想检查一些东西，如果它是真的，应该打开一个新面板。但是每次我运行我都会因为“未知来源”而出错。为什么？？

编辑：

错误：

```
at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T16:24:45.367

肯定错的一件事是：

```
wort[0] == "A" 
```

应该

```
wort[0].equals( "A") 
```

`String`比较总是应该使用`equals()`代替`==`（字符串文字比较的情况除外）

关于更新的异常，请参阅[此](https://stackoverflow.com/questions/852453/accesscontroller-doprivileged)（或）[此](https://stackoverflow.com/questions/4169717/why-does-my-applet-get-a-java-security-accesscontrolexception-access-denied-ja)讨论可能会有所帮助。

# c# - 在 vb.net Web 应用程序中使用 cshtml razor 视图

> ID：13382835
> 
> 赞同：2
> 
> 时间：2012-11-14T16:24:09.417
> 
> 标签：c#, asp.net-mvc, vb.net, razor

我的网站是用 VB.NET 和 MVC 3.0 (WebForms) 编写的，但最近我们同意迁移到 C#，因此任何新代码都尽可能用 C# 编写。但是，我们无法完全迁移站点的资源有限，其中大部分仍然是 VB.NET，包括主要的 Web 应用程序项目。

我真的很想开始使用 Razor 视图，但是作为 cshtml 而不是 vbhtml，因为我的感觉是这些以后很难迁移。但是，我在 VB 站点中看不到这样做的方法。Web App 项目不允许使用 C#，并且编辑文件将是一场噩梦，因为 Intellisense 不起作用。

我能看到的唯一方法就是将所有 VB 代码从 Web 项目中移出到一个单独的 VB.NET 类库中，然后创建一个只包含视图文件的新 C# Web 项目，将所有ASPX 文件中的内联代码到 C#。不过，这仍然是一项艰巨的工作。

谁能想到一个更快的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:36:55.700

您可以尝试将新的 Razor 文件放入单独的项目中，然后使用[RazorGenerator](https://github.com/RazorGenerator/RazorGenerator)将它们编译为“查看库”dll，然后您可以从现有项目中引用该 dll。

我对 RazorGenerator 不太满意，但我只将它用于模板功能。你的用例听起来更像它的设计目的，所以你不应该有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-16T08:52:45.253

在 2019 年使用 VS Express 2017 似乎无需任何额外的软件/插件就可以实现。在第一次添加视图 (.vbhtml) 后，我将扩展名重命名为“.cshtml”，并将任何视图代码从 VB 转换为 C#，它构建并运行正常。

我在开发 VB.net MVC 应用程序时注意到缺少视图的错误也在寻找文件的“.cshtml”版本后尝试了它。

# html - 父母身高比孩子小，为什么？

> ID：13382836
> 
> 赞同：0
> 
> 时间：2012-11-14T16:24:09.270
> 
> 标签：html, css, jquery-backstretch

我正在尝试在我的网站的父容器（不是全身）中垂直拉伸图像，它是 id 为“imagen-fondo”的 div

我已经尝试过 backstretch 插件，也尝试过带有 background-size 的 css background-image 来做到这一点。

但是这两种情况的问题是父容器的计算高度小于直接子容器的高度，因此，背景图像看起来比内容本身要小。

我怎样才能让它和他的直系孩子一样高，或者至少更大？

你可以在这里看到现场演示：

```
http://50.21.181.12:3001/plantillas/mba 
```

![屏幕截图显示了父 div 的高度](../Images/67d46dd807d5a2d9136350818bb9af06.png)

![屏幕截图显示了子 div 的高度](../Images/35cc7da97423fb9f2878c3e6c2963a25.png)

更新：

我认为问题在于 div#imagen-fondo 正在获取窗口的高度而不是他的内容的高度，这就是当屏幕很大时问题不会发生的原因，但是当窗口的高度是比它发生的内容要小，你可以用这两个截图来检查它，就像你开始垂直滚动背景图像一样：

![第1步，滚动到顶部](../Images/51d196bfe0b15a270fff527a64cc1a4e.png) ![step2、滚动一点显示背景结束](../Images/1a2eb9afee5301939972e09fe39d40e3.png)

有溢出的东西？

更新 2：

现在我介绍了一些 javascript 来使它工作，

获取页脚偏移位置并将“.backstretch” div 的高度拉伸到该高度。

但是，如果您调整窗口大小以使垂直滚动条出现并检查页面，您仍然可以看到父容器“#imagen-fondo”（backstretch 应该自动获取他的高度）仍在获取高度可见视口，而不是来自内容本身。

如果有人找到更好的方法来做到这一点，CSS 只会使用这种方法而不是这种肮脏的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:04:50.940

使用 clear: both; 在父 div 中清除浮动；或者在父 div 上使用 clearfix。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T21:38:00.310

现在我介绍了一些 javascript 来使它工作，

读取页脚位置并将“.backstretch” div 的高度拉伸到该高度。

但是，如果您调整窗口大小以使垂直滚动条出现并检查页面，您仍然可以看到父容器“#imagen-fondo”（backstretch 应该自动从中获取他的高度）仍在获取高度可见视口，而不是来自内容本身。

如果有人找到更好的方法来做到这一点，CSS 只会使用这种方法而不是这种肮脏的方法。

# xcode - 使用segue的xcode传递对象

> ID：13382839
> 
> 赞同：0
> 
> 时间：2012-11-14T16:24:15.873
> 
> 标签：xcode, object, segue, didselectrowatindexpath

我试图将一个对象从一个视图控制器传递给另一个。在destinationController 我有：

```
@interface destinationController : UITableViewController{
    destinationController *object;
@property(nonatomic,copy) destinationController *object; 
```

在包含我拥有的信息的 viewController 中：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
[self performSegueWithIdentifier:@"destinationController" sender:self];

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
if ([[segue identifier] isEqualToString:@"destinationController"])
{
    destinationController *dC =[segue destinationViewController];
    NSInteger selected = [[self.tableView indexPathForSelectedRow] row];
    dC.object=[vcArray objectAtIndex:selected]; 
```

其中 vcArray 包含数字和名称，但我只想要选定的行。尝试将所选对象传递给destinationController 中的对象似乎不起作用。相反，它给了我错误：

[viewController copyWithZone:]：无法识别的选择器发送到实例 0x8000140 2012-11-14 18:08:25.039 app[3314:13d03] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[viewController copyWithZone:]：无法识别选择发送到实例0x8000140' ***第一掷调用堆栈：（0x18e6012 0x12abe7e 0x19714bd 0x18d5bbc 0x18d594e 0x12a8cc9 0x83b2 0x5c22 0x63aac7 0x2d5422 0x5a68 0x2a28d5 0x2a2b3d 0xca9e83 0x18a5376 0x18a4e06 0x188ca82 0x188bf44 0x188be1b 0x1dae7e3 0x1dae668 0x1f365c 0x1f4d 0x1e75）的libc ++ abi.dylib：终止叫做抛出一个异常

我认为问题在于我没有正确分配对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:11:03.010

问题出在您的财产声明中：

```
@property(nonatomic,copy) destinationController *object; 
```

这表示，每当您将对象分配给此属性时，都会复制该对象。

但是，正如您的错误消息所说 - 您还没有实现 NSCopying 协议所需的方法（这是`copy`从哪里来的）。

您可能应该将此声明更改为：

```
@property(nonatomic, strong) destinationController *object; 
```

# java - 我可以拥有一个只有文本和声音文件的数据库吗？

> ID：13382841
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:24:25.627
> 
> 标签：java, sql, database, oracle, database-design

我是数据库处理的新手。我正在用 Java 创建一个卡拉 OK 播放器，我需要一个数据库。我不必直接从硬盘获取材料（声音和文本文件），但我想要一个数据库（SQL Server、Oracle 等）来存储它们，这样我就可以拥有一个可以引用/指向的对象他们。可能吗？？

```
public class SoundPlayer extends JComponent
{

String windowName;
Clip clip;Clip clip2;
public static void main(String[] args) throws UnsupportedAudioFileException,     
IOException, LineUnavailableException, InterruptedException
{

JFrame f=new JFrame("hh");
f.getContentPane();

       f.pack();
f.setVisible(true);
}
private String String;

public SoundPlayer(File file) throws UnsupportedAudioFileException, IOException,  LineUnavailableException, InterruptedException {
   AudioInputStream ain=AudioSystem.getAudioInputStream(file);
   try
   {
       DataLine.Info info=new DataLine.Info(Clip.class,ain.getFormat());

       AudioFormat inFormat = ain.getFormat();
               clip=(Clip) AudioSystem.getLine(info);
//rest code 
```

该对象应该在我的程序中可用，以便我可以访问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:32:03.840

你当然可以！

您可以在数据库中存储任何类型的值，甚至是物理文件中的原始二进制数据。

您可能会创建这样的实体（只是 T-SQL 中的一个示例）：

```
CREATE TABLE Singer{
ID int primary key,
Name varchar(50),
}

CREATE TABLE Songs{
ID int primary key,
IDSinger int references Singer(ID),
Title varchar(50),
Content varbinary(max) --here goes the raw binary of your file
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:30:38.660

是的，这是可能的（查看 Oracle 和 JDBC 中的 BLOB 支持），但普遍接受的方法是将文件存储在文件系统中，然后将文件的路径存储在数据库中。

看起来您正在编写一个桌面应用程序，您必须考虑如何访问这些信息。如果这是一个带有本地数据库的单用户应用程序，那么您可以使用本地文件系统中的文件和数据库中的路径。

如果这是一个具有共享数据库的多用户系统，那么您可能需要创建一个服务器来处理来自桌面应用程序的请求。它可以在数据库中查找路径，获取文件，并将其返回给桌面应用程序。

# javascript - 如果将其实现为 typescript 中的类或函数，是否更容易维护？

> ID：13382842
> 
> 赞同：1
> 
> 时间：2012-11-14T16:24:32.880
> 
> 标签：javascript, typescript

我有这个代码：

```
function setSidebar(visible) {
    "use strict"
    if (visible === "show") {
        $("#sidebar-width-switch").prop('title', 'Hide Sidebar');
        $("#sidebar").show();
    } else {
        $("#sidebar-width-switch").prop('title', 'Show Sidebar');
        $("#sidebar").hide();
    }
} 
```

使用打字稿，我看到了更多使用类。在这种情况下，如果像这样的函数被实现为类会更容易维护吗？如果是这样，我将如何执行此操作以及如何调用该类？

我现在这样称呼它：

```
 $('#sidebar-width-switch')
        .click(function (e) {
            if ($("#sidebar").is(':hidden')) {
                setSidebar("show");
                localStorage.setItem('Sidebar', 'show');
            } else {
                setSidebar("hide");
                localStorage.setItem('Sidebar', 'hide');
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:14:30.003

一个类将允许您将数据与行为分开，有点像这样：

```
class SideBar {
    private sidebarElement: JQuery;
    private switchElement: JQuery;

    constructor(sidebarId: string, switchId: string) {
        this.sidebarElement = $('#' + sidebarId);
        this.switchElement = $('#' + switchId);
    }

    show() {
        this.sidebarElement.show();
        this.switchElement.prop('title', 'Hide Sidebar');
    }

    hide() {
        this.sidebarElement.hide();
        this.switchElement.prop('title', 'Show Sidebar');
    }
}

var sidebar = new SideBar('sidebar', 'sidebar-width-switch');
sidebar.show();
sidebar.hide(); 
```

这将允许您使用 SideBar 类而无需将其焊接到特定 ID，并且允许您在页面上有多个侧边栏，每个侧边栏都是`new SideBar`.

构造函数确保您使用所需数据设置类，这意味着方法不需要接受参数。这减少了调用代码中的重复。

该类可在许多项目中重用，该功能与特定的 HTML 实现（特定的 id）紧密耦合。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-16T11:58:58.573

将其封装为函数会更好。

理解的代码更少，使用的仪式更少。

# git - git试图推动什么？

> ID：13382844
> 
> 赞同：0
> 
> 时间：2012-11-14T16:24:36.990
> 
> 标签：git

我想删除我的 repo，但我想确保我的所有变更集都已被推送。`git log origin..HEAD`两者`git log origin/master..master`都没有显示。但是，当我尝试时`git push`，我得到：

```
To remote-repo
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to '/van/work/nms/esteras/cmpt-bitArray-clean1.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

如果我没有本地更改，它不应该只是说`Everything up-to-date`吗？如果我有传出更改，我怎么知道它们是什么？我可能不在乎他们，但我需要知道他们要决定什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:28:32.550

这可能发生在远程站点发生更改，或者（更糟糕的情况）已被*重新定位*（称为操作重写历史记录）时。

您可以使用此方法找到本地 HEAD（主）和远程之间的区别：

*   [Git：将所有本地提交与远程仓库版本进行比较](https://stackoverflow.com/q/5734722/85371)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T00:28:00.447

你想跑步`git diff origin/master`或`git diff origin/master..master`

`git diff origin/master...master`比较自上次推送以来的更改，或者更确切地说是本地历史记录中不在远程的更改。

# android - Arduino + Android USB Host API = 错误包

> ID：13382851
> 
> 赞同：0
> 
> 时间：2012-11-14T16:24:47.737
> 
> 标签：android, api, usb, arduino, host

我正在尝试从运行 4.0.3 的 Android 平板电脑上与我的[Arduino Uno](http://arduino.cc/en/Main/ArduinoBoardUno)交互，并使用 Android USB Host API 让一切正常工作，这意味着我可以通过 USB 将数据发送到板上并`Serial.read()`成功读取。

现在我正在尝试实现反馈功能，这意味着反过来，从 Arduino Uno 发送并在平板电脑上阅读。这也很好用`Serial.write()`，但我遇到了一个小问题：有时，没有传输字节，而其他时候，只有其中的一些，所以我发送的内容被削减了一半。我该如何解决？

我假设串行端口在发送所有数据时存在一些问题。我是否应该更改当前为 9600 的波特率？

这是Android端的代码：

```
byte[]data = new byte[1024]; //Bigger size just to make sure...
int returnLen = conn.bulkTransfer(epIN,data,data.length,500); //epIN is the` 
```

在 Arduino 方面，一个简单的

```
Serial.write(5); 
```

用来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:06:27.657

您看到的`read()`行为按预期工作：有时，可用字节数少于您想要的数量。[它与标准 POSIX read() 系统调用行为](http://en.wikipedia.org/wiki/Read_%28system_call%29)非常相似：

> “如果此数字小于请求的字节数，这不是错误；这可能会发生，例如，因为现在实际可用的字节数较少 [..]”

您的应用程序需要处理这种可能性。一种常见的技术是跟踪您已读取的字节数，并执行连续`read()`调用，累积字节直到您获得所需的数量。

最后，考虑使用[usb-serial-for-android](https://code.google.com/p/usb-serial-for-android/)，这是一个实现 FTDI 和 CDC (Arduino) USB 驱动程序的开源库。虽然它没有专门处理这个应用程序级别的问题，但它可能会在其他地方为您省去麻烦，并且有一个活动的邮件列表。

# jquery - 以用户/访客而不是服务器的身份执行地理编码请求

> ID：13382852
> 
> 赞同：0
> 
> 时间：2012-11-14T16:24:48.673
> 
> 标签：jquery, ajax, maps, geocode

我目前正在建立一个小型社区，用户可以在其中标记地图上的特定位置。

要保存地图点，我需要将 lat/lng 保存到我的数据库中，但用户不知道 lat/lng，所以我必须使用（反向）地理编码 API。

我查看了 geonames.org，但全文搜索的结果......不太好。例如，如果我搜索“München”，我会得到大约 5 个具有相同标题/名称的结果。

在 Google Maps Api 中测试同一个城市，结果要好得多，所以我想使用 Google Gecoder。

剩下的唯一问题是，在文档页面上提到了一个限制 - 每天最多 2500 个请求。

好吧，这听起来很多，但如果我的社区变得更大，那就不是那么多了......

所以我的问题是，是否可以使用访客 IP 地址对 Google Maps Api 进行地理编码请求，因此 Google 不会将其视为来自我的服务器的请求？

目前，对某些内容进行地理编码的“我的方式”是通过 AJAX (jQuery) 获取一个单独的 PHP 文件，同时将搜索字符串传递给它。然后 PHP 文件使用“simplexml_load_file”获取结果，然后将其返回给主文档。

如果您查看此地理编码器：[http ://www.gpsvisualizer.com/geocoder/](http://www.gpsvisualizer.com/geocoder/)

您可以在页脚中看到以下描述：“此表单使用 JavaScript-On-Demand (JSON) 代码，该代码使您的 Web 浏览器成为发出请求的人（而不是 gpsvisualizer.com），这意味着您的查询不计算在内违反我服务器的限制。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:50:32.307

嗯，我发现了一些东西。**凯文 B**似乎是对的。

看看这个：[https ://developers.google.com/maps/articles/geocodestrat?hl=de](https://developers.google.com/maps/articles/geocodestrat?hl=de)

据此...

> 何时使用客户端地理编码
> 
> 基本答案是“几乎总是”。由于地理编码限制是针对每个用户会话的，因此您的应用程序不会随着用户群的增长而达到全局限制。除非您在用户会话中执行一批地理编码请求，否则客户端地理编码不会面临配额限制。因此，运行客户端地理编码，您通常不必担心您的配额。

...这是可能的，只需使用 Javascript API！

用户搜索“法国巴黎”，Google JS API 返回 lat/lng，我将其存储在数据库（缓存）中并在 Google 地图上显示，因此我不需要任何服务器端地理编码请求！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:36:40.030

短：不，对不起。

替代方案：您可以使用浏览器的 javascript geolocationAPI（只要它们受支持）来获取坐标。这允许您使用例如 google geocoder api。一些起点可能在这里：[支持和链接页面](http://www.browsergeolocation.com/)

注意：用户可能会使用谷歌地图小部件来标记他们自己的位置，您也可以在其中检索坐标。

# java - DeviceAdmin 从首选项片段 xml 添加设备意图

> ID：13382854
> 
> 赞同：2
> 
> 时间：2012-11-14T16:24:55.573
> 
> 标签：java, android, android-intent, preferences, fragment

我正在尝试从 xml 片段中做出意图：

`<PreferenceScreen android:key="Admin" android:title="@string/prefTitleAdminApp" android:summary="@string/prefSumAdminApp"> <intent android:action="android.intent.action.ADD_DEVICE_ADMIN" /> </PreferenceScreen>`

虽然在清单中有这个：

```
 <receiver android:name="my.package.ARL.elements.AdminDevice"
        android:label="ARL"
        android:permission="android.permission.BIND_DEVICE_ADMIN">
        <meta-data android:name="android.app.device_admin" android:resource="@xml/admin" />
        <intent-filter>
            <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
            <action android:name="android.intent.action.ADD_DEVICE_ADMIN" />
        </intent-filter>
    </receiver> 
```

当我单击时，我将强制关闭，并显示“未找到处理 Intent { act=android.intent.action.ADD_DEVICE_ADMIN } 的活动

我哪里错了？这可能吗（对于设备管理员）？

是否可以像这样添加“额外”？：

```
 Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
        intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN,adminName);
        intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,getString(R.string.adminRights));
        startActivityForResult(intent, 0); 
```

但在xml格式？（没有在文档中找到额外的，只有看起来很接近的数据）

谢谢

编辑：我发现它不是 android.intent.action.ADD_DEVICE_ADMIN 而是 DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN。

但似乎从 xml 调用这样的意图不起作用，这仍然有效：

```
Intent intent = new Intent(DevicePolicyManager.ACTION_ADD_DEVICE_ADMIN);
    intent.putExtra(DevicePolicyManager.EXTRA_DEVICE_ADMIN,"ARL");
    intent.putExtra(DevicePolicyManager.EXTRA_ADD_EXPLANATION,getString(R.string.adminRights));
    startActivityForResult(intent, 0); 
```

如果您对如何从 xml 调用此类意图有一个想法，那就太好了，

# xpages - xpages - 防止 SSJS 在 CSJS 中加载页面

> ID：13382855
> 
> 赞同：0
> 
> 时间：2012-11-14T16:24:56.587
> 
> 标签：xpages

我在按钮的 CSJS onclick 事件中有一些 SSJS。有什么办法可以防止这个 SSJS 在页面加载期间执行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:05:12.263

这可以通过检查*facesContext.getRenderResponse()*来完成。如果为*true*，则重新加载页面，否则为*false*。该标志未正确设置，但为您提供了一种简单的方法来检查页面是否已加载。

这是一个示例 XPage：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
   <xp:button value="Reload CSJS" id="buttonReloadCSJS">
      <xp:eventHandler event="onclick" submit="true" refreshMode="complete">
         <xp:this.script>
            <![CDATA[#{javascript:
               facesContext.getRenderResponse()?"alert('NotOnLoad');":"alert('OnLoad')";
            }]]>
         </xp:this.script>
      </xp:eventHandler>
   </xp:button>
</xp:view> 
```

如果您打开 XPage 并单击该按钮，该页面将被重新加载并且您将获得另一个 CSJS 代码。

**编辑：**
这是另一种仅在按钮部分刷新时计算代码的方法：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

   <xp:div id="refreshMe">
      <xp:button value="Reload CSJS" id="buttonReloadCSJS">
         <xp:eventHandler event="onclick" submit="true" refreshMode="partial" refreshId="refreshMe">
            <xp:this.script>
               <![CDATA[#{javascript:
                  var ajax = new com.ibm.xsp.ajax.AjaxUtil();
                  if( ajax.isAjaxPartialRefresh(facesContext) == true){
                     return "alert('Refreshed')";
                  }
               }]]>
            </xp:this.script>
         </xp:eventHandler>
      </xp:button>
   </xp:div>

</xp:view> 
```

# sql - sqlite3 JOIN，GROUP_CONCAT 使用不同的自定义分隔符

> ID：13382856
> 
> 赞同：18
> 
> 时间：2012-11-14T16:24:57.113
> 
> 标签：sql, sqlite, group-concat

给定一个“事件”表，其中每个事件可能与零个或多个“演讲者”和零个或多个“术语”相关联，这些记录通过连接表与事件相关联，我需要生成一个包含所有事件的表和一列在代表与每个事件关联的“speaker_names”和“term_names”列表的每一行中。

但是，当我运行查询时，speaker_names 和 term_names 值存在重复，因为连接表为每个发言者和事件的术语生成每个关联的行：

```
1|Soccer|Bobby|Ball
2|Baseball|Bobby - Bobby - Bobby|Ball - Bat - Helmets
3|Football|Bobby - Jane - Bobby - Jane|Ball - Ball - Helmets - Helmets 
```

group_concat 聚合函数能够使用'distinct'，它消除了重复，但遗憾的是它不支持我真正需要的自定义分隔符。我留下了这些结果：

```
1|Soccer|Bobby|Ball
2|Baseball|Bobby|Ball,Bat,Helmets
3|Football|Bobby,Jane|Ball,Helmets 
```

我的问题是：**有没有办法可以形成查询或更改数据结构以获得我想要的结果？**

请记住，这是我需要的 sqlite3 查询，我无法添加自定义 C 聚合函数，因为这是用于 Android 部署的。

我创建了一个要点，让您可以轻松测试可能的解决方案：[https ://gist.github.com/4072840](https://gist.github.com/4072840)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T18:00:17.827

相互独立地查找说话者/术语名称：

```
SELECT _id,
       name,
       (SELECT GROUP_CONCAT(name, ';')
        FROM events_speakers
        JOIN speakers
          ON events_speakers.speaker_id = speakers._id
        WHERE events_speakers.event_id = events._id
       ) AS speaker_names,
       (SELECT GROUP_CONCAT(name, ';')
        FROM events_terms
        JOIN terms
          ON events_terms.term_id = terms._id
        WHERE events_terms.event_id = events._id
       ) AS term_names
FROM events 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-06T07:57:55.317

我也遇到了这个问题，但想出了一个我发现更容易理解的方法。由于 SQLite 报告`SQLite3::SQLException: DISTINCT aggregates must have exactly one argument`，问题似乎与`GROUP_CONCAT`方法无关，但与 using `DISTINCT`within `GROUP_CONCAT`...

当您将 DISTINCT '子查询'封装在一个`REPLACE`实际上*什么都不做*的方法中时，您可以拥有 nawfal 建议的相对简单性，而没有只能正确连接无逗号字符串的缺点。

```
SELECT events._id, events.name, 
       (group_concat(replace(distinct speakers.name),'',''), ' - ') AS speaker_names, 
       (group_concat(replace(distinct speakers.name),'',''), ' - ') AS term_names 
FROM events 
LEFT JOIN 
   (SELECT et.event_id, ts.name 
    FROM terms ts 
    JOIN events_terms et ON ts._id = et.term_id
   ) terms ON events._id = terms.event_id 
LEFT JOIN 
   (SELECT sp._id, es.event_id, sp.name 
    FROM speakers sp 
    JOIN events_speakers es ON sp._id = es.speaker_id
   ) speakers ON events._id = speakers.event_id 
GROUP BY events._id; 
```

但实际上我会认为这是一个 SQLite 错误/不一致，或者我错过了什么？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-14T16:58:29.833

奇怪的是 SQLite 不支持！

## 有被否决的风险，只有在它有帮助的情况下：

你可以利用`Replace(X, Y, Z)`。但是你必须确保你`,`的列中没有有效值..

```
SELECT events._id, events.name, 
       REPLACE(group_concat(distinct speakers.name), ',', ' - ') AS speaker_names, 
       REPLACE(group_concat(distinct terms.name), ',', ' - ') AS term_names 
FROM events 
LEFT JOIN 
   (SELECT et.event_id, ts.name 
    FROM terms ts 
    JOIN events_terms et ON ts._id = et.term_id
   ) terms ON events._id = terms.event_id 
LEFT JOIN 
   (SELECT sp._id, es.event_id, sp.name 
    FROM speakers sp 
    JOIN events_speakers es ON sp._id = es.speaker_id
   ) speakers ON events._id = speakers.event_id 
GROUP BY events._id; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-07T14:21:19.900

问题只出现在 group_concat(X,Y) 表达式，而不是 group_concat(X) 表达式。

group_concat(distinct X) 效果很好。

所以，如果 ',' 对你有好处，那没有问题，但如果你想要一个 ';' 而不是 ',' （并且您确定原始文本中没有 ','）您可以执行以下操作：

替换（group_concat（不同 X），'，'，';'）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-06T13:01:49.847

只是为了提出一个适当的解决方法（murb 的答案奇怪地用括号括起来）。

**问题：**

`group_concat(distinct column_name, 'custom_separator')`作为的`custom_separator`一部分`distinct`。

**解决方案：**

我们需要一些无操作让 SQLite 知道已经`distinct`完成（包装 distinct 和它的参数）。No-op 可以用空字符串替换为第二个参数（[要替换的文档](http://www.sqlite.org/lang_corefunc.html#replace)）。

`group_concat(replace(distinct column_name, '', ''), 'custom_separator')`

**编辑：**

刚刚发现它不起作用:-( - 可以调用但`distinct`不再起作用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-07T02:53:13.737

有一种特殊情况在 sqlite 中不起作用：`group_concat(DISTINCT X, Y)` 而在 SQL 中你可以`group_concat(DISTINCT X SEPARATOR Y)`在 sqlite 中使用你不能

此示例：`Select group_concat(DISTINCT column1, '|') from example_table group by column2;` 给出结果：DISTINCT 聚合必须只有一个参数在第 1 行：

解决方案 ：

```
select rtrim(replace(group_concat(DISTINCT column1||'@!'), '@!,', '|'),'@!') from example_table 
```

# android - 如何在用户开始输入之前立即在可搜索的 Android 中启动建议

> ID：13382857
> 
> 赞同：9
> 
> 时间：2012-11-14T16:25:08.697
> 
> 标签：android

我正在对 ContentProviders 和 Searchable 配置进行一些研究。我已经设置了一个类，它使用一个数据库扩展了一个内容提供程序，该数据库在用户类型时提供来自数据库的建议。这使用了 Search Manager 范例（不是 SearchView）。

到目前为止，一切都很好。

我想做并且遇到问题的是在用户开始输入*之前*，在他启动搜索之后显示一些建议。在 searchable.xml 中设置属性 'android:searchSuggestThreshold="0" ' 仅当用户在启动搜索文本框后实际点击搜索文本框时才有效 - 我想在搜索启动后立即显示建议（即不等待用户做任何其他事情）。

有任何想法吗？

编辑：我所说的一个例子是 Google Play 商店应用程序中的搜索功能——当用户点击放大镜进行搜索时，会立即弹出最近的建议列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T00:08:11.363

好吧，在花了很多时间之后，我终于找到了一种方法来实现我所需要的。这是答案，因此可能会减少其他开发人员的痛苦：

搜索模式的 SearchView 有一个文本更改侦听器，只有在文本更改时才会触发建议请求。显然，对于初始状态，没有任何改变，因此它不会通过 query() 函数请求建议。

为了“欺骗” SearchView 认为文本已更改，您可以执行以下操作：

```
@Override
public boolean onSearchRequested()
{
  final SearchManager searchManager = (SearchManager) getSystemService( SEARCH_SERVICE );    

  searchManager.startSearch( " ", true, getComponentName(), null, false );

  return super.onSearchRequested();
} 
```

# domain-driven-design - 领域事件能否将反馈信息返回到 UI 层？

> ID：13382858
> 
> 赞同：3
> 
> 时间：2012-11-14T16:25:11.143
> 
> 标签：domain-driven-design

我对 DDD 应用程序还很陌生。我正在阅读 Eric Evan 的“领域驱动设计”，并阅读了 Udi Dahan的“[领域事件拯救”中的“](http://www.udidahan.com/2009/06/14/domain-events-salvation/)[使用领域模型模式”……](http://msdn.microsoft.com/en-us/magazine/ee236415.aspx)

我无法弄清楚的一件事是如何将有关领域事件成功或不成功完成的信息作为反馈返回给用户（即 UI 层）？

例如，我们可以有以下应用层代码：

```
// Application Layer
public void SubmitOrder(OrderData data)
{ 
  var customer = GetCustomer(data.CustomerId);
  var shoppingCart = GetShoppingCart(data.CartId);
  customer.Purchase(shoppingCart);
}

// Domain Model
public class Customer
{ 
   public void Purchase(ShoppingCart cart)
   {
      // something done with the cart...

      DomainEvents.Raise(new CustomerPurchaseCompleted() { Customer = this, ShoppingCart = cart });
   }
} 
```

现在假设我们有以下事件处理程序，**如果**客户指定了电子邮件地址，它会向客户发送确认电子邮件。

```
public class CustomerPurchaseCompletedHandler : Handles<CustomerPurchaseCompleted>
{ 
   public void Handle(CustomerPurchaseCompleted args)
   {
      if (args.Customer.Email != null) {
         // send email to args.Customer
      }
      else {
         // report that no email will be sent...
      }
   }
} 
```

**我的问题是**：我应该如何向 UI 层“冒泡”反馈消息说因为客户没有设置电子邮件而不会发送电子邮件？

我今天看到的选项大致如下：

1.  让 UI 层检查客户是否有电子邮件，并根据消息做出相应反应。这似乎很糟糕，因为 UI 会知道应该发送一封电子邮件，这是一个应用程序级别的信息。

2.  `UserHasNoEmailException`在没有电子邮件的情况下抛出一个并在某处捕获该信息。这**真的很糟糕**，因为不应该使用异常来返回信息，而且它不是致命错误，也不应该中止其他处理程序......

3.  有`SubmitOrder()`回报一些`List<FeedbackMessage>`。这将需要更改`Purchase()`和`DomainEvents.Raise()`方法以也返回此列表。这导致领域模型知道 UI 不应该显示什么......

这三个选项似乎都不是很好和实用的。那么 DDD 专家是如何做到的呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T18:20:24.280

另一个选择是实现另一个事件处理程序，该处理程序专门负责通知 UI 客户没有电子邮件地址。因此，如果 CustomerPurchaseCompletedHandler 不发送电子邮件，则此处理程序将通知 UI。这个处理程序将是 UI 层的一部分。通知 UI 的一个好方法是将[事件聚合器](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)注入此处理程序：

```
public class NotifyingCustomerPurchaseCompletedHandler : Handles<CustomerPurchaseCompleted>
{ 
   public IEventAggregator Events { get; set; }

   public void Handle(CustomerPurchaseCompleted args)
   {
      if (args.Customer.Email == null) {
         // notify UI
         this.Events.GetEvent....
      }
   }
} 
```

总的来说，这本质上是方法 1。确实，UI 层现在知道要发送电子邮件，但是 UI 无论如何都必须具有该知识，因为它需要呈现一条消息，说明不发送电子邮件。显示消息是 UI 问题，通过将处理程序实现保留为 UI 层的一部分，您可以保留它。这种方法的问题在于您要检查客户是否有两次电子邮件。此外，电子邮件的发送不直接与 UI 通知相关联。

另一种选择是引入另一个事件以指示为没有电子邮件的客户完成了购买。然后 UI 可以订阅此事件。这种方法的缺点是您正在创建一个专门针对 UI 要求的事件，而不是表达领域知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:20:08.323

事件不应报告反馈。事件是反馈。

在这种情况下，这`Email`是业务需求。因此，`customer.Purchase(shoppingCart);`如果未指定电子邮件，则应该真的抛出异常。

但是，假设实际的电子邮件传递失败。我通常做的是创建一个用于通知的域模型。所以我这样做：

```
var notification = new Notification(userId, "Failed to deliver receipt to user.");
notificationRepository.Save(noitification); 
```

这反过来会生成一个`NotificationCreated`可以被 UI 拾取的事件。

# firefox - 黑板标题：在 Chrome 和 IE8 中正常，在 Firefox 中不稳定

> ID：13382861
> 
> 赞同：2
> 
> 时间：2012-11-14T16:25:15.617
> 
> 标签：firefox, html, browser, blackboard

我有一些带有内联样式的 HTML，我将其用于 Blackboard 内容管理系统中的页眉。

它应该看起来像这样： http: [//media.norquest.ca/ace/math/screenie-00.png](http://media.norquest.ca/ace/math/screenie-00.png) ...在 Chrome 和 IE8 中确实如此。

但在 Firefox 中，它看起来像这样： http: [//media.norquest.ca/ace/math/screenie-01.png](http://media.norquest.ca/ace/math/screenie-01.png)

代码如下所示：

```
<center>
<div style="width:806px">

<span style="float:left; margin: auto;">
<img src="Images/course-banner-left-chem30prep.png" />
</span>

<span style="float:right">
<img src="Images/course-banner-right.png" />
</span>

<div style="width:742px; margin-left:0px; text-align:justify; border-top:1px solid black; border-bottom:1px solid black; overflow:hidden">

<p style="float:left; margin-top:0px; margin-bottom:1px; padding-left:0px; font-size:11px">
Instructor: Jason Fahy
</p>

<p style="float:left; margin-top:0px; margin-bottom:1px; padding-left:30px; font-size:11px">
Phone: (780)644-5838
</p>

<p style="float:right; margin-top:0px; margin-bottom:1px; padding-left:30px; font-size:11px">
Office: A324 Edmonton
</p>

<p style="float:right; margin-top:0px; margin-bottom:1px; padding-left:30px; font-size:11px">
jason.fahy@norquest.ca
</p>

</div>

</div> 
```

知道有什么问题吗？

我听说 Blackboard 的样式可以与用户的 CSS 和内联样式进行奇怪的交互，但我不想假设这很可能是我的代码的问题。

干杯，JF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:36:11.403

```
<div style="width:806px">
    <div style="width:742px; height:HEIGHT-OF-IMAGES;">
        <div style="float:left; display:inline;">
            <img src="Images/course-banner-left-chem30prep.png" />
        </div>
        <div style="float:right; display:inline;">
            <img src="Images/course-banner-right.png" />
        </span>
    </div>
    <div style="width:742px; margin-left:0px; text-align:justify; border-top:1px solid black; border-bottom:1px solid black; overflow:hidden">
        <p style="float:left; margin-top:0px; margin-bottom:1px; padding-left:0px; font-size:11px">
            Instructor: Jason Fahy
        </p>

        <p style="float:left; margin-top:0px; margin-bottom:1px; padding-left:30px; font-size:11px">
            Phone: (780)644-5838
        </p>

        <p style="float:right; margin-top:0px; margin-bottom:1px; padding-left:30px; font-size:11px">
            Office: A324 Edmonton
        </p>

        <p style="float:right; margin-top:0px; margin-bottom:1px; padding-left:30px; font-size:11px">
            jason.fahy@norquest.ca
        </p>
    </div>
</div> 
```

也许是这样的？你也缺少一个 ; 在您的示例中浮动的末尾。

# c# - WPF动画系数

> ID：13382864
> 
> 赞同：0
> 
> 时间：2012-11-14T16:25:17.853
> 
> 标签：c#, .net, wpf

我使用一些 WPF 双动画来移动`StackPanel`.

```
<Canvas  ClipToBounds="True" Name="canMain" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" >
        <StackPanel  Name="tbmarquee" HorizontalAlignment="Stretch" ></StackPanel>
</Canvas> 
```

每次我使用相同的时间 30 秒，我都会`UIElemnts`在`StackPanel`. 所以宽度`StackPanel`是不同的，它会改变动画速度，就像如果我有很多项目，`StackPanel`那么动画非常慢，如果我有 1 个项目，它会非常快。

任何线索我必须使用哪个**系数***来获得稳定的动画速度*？

谢谢！

附言

似乎这段代码或多或少地给出了正确的系数

```
var coeff = 0;

 if (test.Count >= 1 && test.Count <= 10)
        coeff = 60;
 else if (test.Count > 10 && test.Count <= 20)
        coeff = 120;
 else if (test.Count > 20 && test.Count <= 30)
       coeff = 240;
 else if (test.Count > 30 && test.Count <= 40)
        coeff = 300;
else if (test.Count > 40 && test.Count <= 50)
       coeff = 350;
else if (test.Count > 50 && test.Count <= 60)
        coeff = 400;
else if (test.Count > 60 && test.Count <= 70)
         coeff = 450;
 else if (test.Count > 70 && test.Count <= 80)
     coeff = 500;
else if (test.Count > 80 && test.Count <= 90)
    coeff = 530;
else if (test.Count > 90 && test.Count <= 100)
    coeff = 560;
and etc... 
```

任何线索如何将其转换为某种表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:45:36.147

具有相同动画的动画视觉效果较少`Duration`会导致动画在屏幕上显示得更快。相反，您应该改变“持续时间”，同时考虑到您将制作动画的元素的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:27:55.643

嗯......如果有人需要答案，那么它就在这里。

我找到了公式和系数。

```
var coeff = StackPanel.Children.Count * 3; 
```

所以我用它来以相同的速度为任意数量的项目制作动画。

# rally - 故事的排名值

> ID：13382868
> 
> 赞同：3
> 
> 时间：2012-11-14T16:25:30.487
> 
> 标签：rally

在调用 Rally WSDL API 时，我会收到非常大的“排名”字段数字，例如 500000011520，但我希望获得积压中的排名，例如 #1。有谁知道我如何找到或计算积压中的排名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:10:10.753

在 REST 中，创建端点有 Ranking 参数：

[https://rally1.rallydev.com/slm/webservice/1.39/hierarchicalrequirement/create?rankTo=TOP](https://rally1.rallydev.com/slm/webservice/1.39/hierarchicalrequirement/create?rankTo=TOP) https://rally1.rallydev.com/slm/webservice/1.39/hierarchicalrequirement/create?rankTo=BOTTOM [https:// rally1.rallydev.com/slm/webservice/1.39/hierarchicalrequirement/create?rankAbove=](https://rally1.rallydev.com/slm/webservice/1.39/hierarchicalrequirement/create?rankAbove=) "/hierarchicalrequirement/12345678910" [https://rally1.rallydev.com/slm/webservice/1.39/hierarchicalrequirement/create?rankBelow=](https://rally1.rallydev.com/slm/webservice/1.39/hierarchicalrequirement/create?rankBelow=) "/hierarchicalrequirement/ 12345678910"

不幸的是，这些都是 REST-only 工具——Rally 的 SOAP API 没有类似的功能。我鼓励您查看 Rally 的 REST 工具包——它们肯定比 Rally 的 SOAP 更灵活。

此处概述了 REST 工具包：

[http://developer.rallydev.com/help/rest-apis](http://developer.rallydev.com/help/rest-apis)

# database - 在序列化数据中未找到必填字段“反转”

> ID：13382869
> 
> 赞同：2
> 
> 时间：2012-11-14T16:25:41.800
> 
> 标签：database, cassandra, thrift

我有这个代码：

```
sliceRange.Start = UTF8StringToBytes(strStart)
sliceRange.Finish = UTF8StringToBytes(strFinish)
sliceRange.Reversed = True
sliceRange.Count = intCount
predicate.Slice_range = sliceRange
Dim results As List(Of ColumnOrSuperColumn) = client.get_slice(UTF8StringToBytes(rowKey), columnFamily, predicate, ConsistencyLevel.ONE) 
```

当我使用此代码时，这会导致 cassandra / thrift 出现以下错误：在序列化数据中找不到必填字段 'reversed'！

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T14:51:23.380

您似乎对底层生成的 Thrift 代码有疑问。除非您有特定的理由这样做，否则不建议直接使用 Thrift 访问 Cassandra。有许多可用的[客户端库](http://wiki.apache.org/cassandra/ClientOptions)可以为您抽象出来。

话虽如此，我过去曾使用 Thrift 生成的 C# 代码编写自己的库，并没有遇到这个问题。也许您的问题与您使用VB有关？如果您有某些理由直接使用 Thrift，您可以在 C# 中尝试相同的代码，看看是否能解决问题。如果没有，请确保您拥有正确版本的 Cassandra 和 Thrift，因为不兼容可能会导致此类问题。

# pcap - pcap 设置 802.11 通道

> ID：13382884
> 
> 赞同：1
> 
> 时间：2012-11-14T16:26:22.390
> 
> 标签：pcap, channel, wifi

我可以以某种方式使用 pcap 库（甚至其他任何东西）以编程方式设置 802.11 通道吗？我写了一个嗅探器，需要在不同的通道上嗅探，所以我需要先设置特定的。我一直在搜索，但找不到任何东西，所以我目前使用 iw 工具手动设置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:45:14.693

不，libpcap 当前没有获取可用 802.11 频道列表或设置当前频道的 API。

我从“iw 工具”推断您正在 Linux 上执行此操作；您必须直接使用 netlink 调用来设置通道 - 例如，请参见`ws80211_utils.c`Wireshark 顶级源目录中文件中的代码。

# java - 使用 OpenCV 和 JavaCV 以间隔捕获帧

> ID：13382886
> 
> 赞同：0
> 
> 时间：2012-11-14T16:26:24.240
> 
> 标签：java, opencv, capture, intervals, javacv

我已经开发了一个代码来捕获帧

```
 OpenCVFrameGrabber grabber = new OpenCVFrameGrabber("D:/2.avi");        
    grabber.start();
    IplImage frame = grabber.grab(); 
```

想要以第 1 帧第 5 帧第 10 帧第 15 帧 ..... 等间隔捕获帧

我该怎么做？使用线程好不好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T03:42:49.007

**简单**：添加一个计数器变量来存储您已经抓取的帧数：

```
public static void main(String[] args) 
{
    FrameGrabber grabber = new OpenCVFrameGrabber("demo.avi");
    if (grabber == null)
    {
        System.out.println("!!! Failed OpenCVFrameGrabber");
        return;
    }

    cvNamedWindow("video_demo");

    try            
    {
        grabber.start();
        IplImage frame = null;  

        int frame_counter = 1;
        while (true)
        {
            frame = grabber.grab();               
            if (frame == null)
            {
                System.out.println("!!! Failed grab");
                break;
            }

            if ((frame_counter % 5) == 0)
                // do something pretty with frame 5, 10, 15, 20, 25, ...

            cvShowImage("video_demo", frame);
            int key = cvWaitKey(33);
            if (key == 27)
            {
                break;
            }

            frame_counter++;
        }

    }
    catch (Exception e) 
    {    
        System.out.println("!!! Exception");
    }
} 
```

# git - git / git-extensions 版本对应表 - git-extensions 2.32 中嵌入了哪个版本的 git？

> ID：13382888
> 
> 赞同：1
> 
> 时间：2012-11-14T16:26:30.517
> 
> 标签：git, git-extensions

找了一个git-extension版本和嵌入式git版本的对应表，没找到。

有人知道这样的资源，或者标题中问题的答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:33:47.647

从存储库恢复

```
GitEx 2.42 - Git 1.8
GitEx 2.41 - Git 1.7.11
GitEx 2.32 - Git 1.7.10
GitEx 2.29 - Git 1.7.9
GitEx 2.27 - Git 1.7.8
GitEx 2.25 - Git 1.7.7
...
GitEx 1.55 - Git 1.6.2 
```

# jsf-2 - primefaces 中带有 setBooleanButton 的初始值

> ID：13382894
> 
> 赞同：1
> 
> 时间：2012-11-14T16:26:49.767
> 
> 标签：jsf-2, primefaces

我正在使用 Primefaces 和 MyFaces。我想使用 selectBooleanButton 组件来控制长且相当复杂的表单中其他组件的可见性。

简化示例代码：

```
<p:selectBooleanButton 
         onLabel="Comment" offLabel="Comment" 
         onIcon="ui-icon-check" offIcon="ui-icon-close"
         value="#{not empty myBean.comment}"
         onchange="toggleDisplay(this.checked,'myForm:commentPanel');" /> 

<h:panelGroup id="commentPanel" 
              style="display:#{empty myBean.comment ? 'none' : 'block'}">
   <p:inputTextarea value="{myBean.comment}"/>
</h:panelGroup> 
```

onchange 属性中的 javascript 只是将显示样式从无切换为阻止，反之亦然以隐藏或取消隐藏面板组。我希望/需要组件保留在视图中，我不想使用渲染属性来完全删除它们。

我遇到麻烦的地方是因为 setBooleanButton 组件的 value 属性中使用了 EL 构造。我确实意识到这个 EL 语句与 set 操作不兼容，这会导致异常。

我想要做的是在加载表单时，当评论属性有一些现有文本时，将 selectBooleanButton 组件的初始状态设置为“on”，当它为空时设置为“off”。我正在寻找一种解决此问题的方法，它不需要我在模型中为我想要隐藏面板的每个实例创建一个属性，因为这会导致数十个属性，因为我的真实世界形式非常大，其中有许多评论部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:31:07.987

我也在Primefaces论坛上发布了这个问题，也没有收到任何答案，所以目前这个问题可能没有很好的解决方案，或者至少没有一个已经共享的解决方案。我最终解决这个问题的方法是创建两个版本的组件，并使用渲染属性来控制使用哪个版本，如下所示：

```
<p:selectBooleanButton 
     onLabel="Comment" offLabel="Comment" 
     onIcon="ui-icon-check" offIcon="ui-icon-close"
     value="true" rendered="#{not empty myBean.comment}"
     onchange="toggleDisplay(this.checked,'myForm:commentPanel');" /> 

<p:selectBooleanButton 
     onLabel="Comment" offLabel="Comment" 
     onIcon="ui-icon-check" offIcon="ui-icon-close"
     value="false" rendered="#{empty myBean.comment}"
     onchange="toggleDisplay(this.checked,'myForm:commentPanel');" /> 
```

# sql - 从 groupby 的结果中删除表中的行

> ID：13382897
> 
> 赞同：2
> 
> 时间：2012-11-14T16:27:07.380
> 
> 标签：sql

我有下表 [http://sqlfiddle.com/#!3/7f078/1](http://sqlfiddle.com/#!3/7f078/1)

好的，我想做的是 GROUP BY `schoolid`，然后计算每所学校的孩子人数。这很简单。但我想移除一所拥有不到 10 个孩子的学校`schoolinclude = 1`。所以基本上，对于一所特定的学校，查看所有拥有的孩子，`schoolinclude = 1`然后计算这些孩子。如果学校的孩子少于 10 个，我希望这所学校被移除。然后我想在这所学校被移除的情况下返回原来的桌子。

解决这个问题的最好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:31:24.017

这听起来可能是一个学校问题，所以我不会给出完整的答案，但是：

查看 HAVING 子句[http://www.w3schools.com/sql/sql_having.asp](http://www.w3schools.com/sql/sql_having.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:45:20.017

您需要实现与此类似的`HAVING`子句`count(students)`：

```
select *
from table_name
where schoolmident not in (SELECT schoolmident
                            FROM table_name
                            where schoolinclude = 1
                            group by schoolmident
                            having count(studentuid) < 10); 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/7f078/18)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:11:55.353

```
select *
from (
   select schoolmident
   from table_name
   where schoolinclude = 1
   group by schoolmident
   having count(studentuid) > 9) as a 
      join table_name as b
      on a.schoolmident = b.schoolmident 
```

# svn - Maven如何在不下载整个Trunk的情况下下载SVN子项目的所有依赖项？

> ID：13382898
> 
> 赞同：1
> 
> 时间：2012-11-14T16:27:09.533
> 
> 标签：svn, maven

我正在下载一个 Maven 项目`SVN`。这个项目是一个更大的项目的一部分。

当我做`mvn install`那个 POM 时，我会因为没有 POM 父母而出错。

如何让 maven 下载我的 POM 所需的所有依赖项，而无需下载项目的整个主干？

**编辑** 例如，我想下载、编译和运行[这个](https://svn.apache.org/repos/asf/tuscany/sca-java-1.x/trunk/samples/zipcode-jaxws/)例子：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:20:47.343

@eskalera，SCM 插件只是提供了可以从中下载源代码的存储库。在我们的案例中，主干。下载完成后，继续构建。SCM 插件不会知道构建过程中 pom 所需的依赖项。它只能检查目标回购。

唯一的方法是下载整个主干，这将解决您所有的依赖问题，并按照 maba 的建议，删除不太可能更改的源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:32:53.790

在构建阶段，Maven 对版本控制系统一无所知。因此，必须有人将所有必需的依赖项（包括所有父 pom）安装到本地/团队 Maven 存储库中。

如果没有这样的存储库可用，那么您将不得不检查整个事情并自己检查`mvn install`整个事情。之后，您可以删除它并使用一个模块（假设项目的其余部分不会改变）。

# visual-c++ - ntdll.dll 没有 PDB 文件

> ID：13382900
> 
> 赞同：6
> 
> 时间：2012-11-14T16:27:16.770
> 
> 标签：visual-c++

尝试调试我开发的 dll 项目。`Debugging information for 'ntdll.dll' cannot be found or does not match. Cannot find or open the PDB file`尝试使用主机应用程序加载此 dll 时出现消息框。如何解决这个问题呢？

经过一些实验并设置 VS2010 以从服务器获取符号后，我在构建 dll 时收到以下消息：

DEMO.exe'：加载 'C:\Windows\System32\ntdll.dll'，加载符号（源信息被剥离）。DEMO.exe'：已加载“C:\Windows\System32\mscoree.dll”，已加载符号（已删除源信息）。DEMO.exe'：加载了'C:\Windows\System32\kernel32.dll'，加载了符号（源信息被剥离）。DEMO.exe'：已加载“C:\Windows\System32\KernelBase.dll”，已加载符号（已删除源信息）。

但是在运行调试时仍然描述了消息框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-18T07:33:23.473

您可以有多种选择。

1.  下载微软提供的符号包。这将为所有系统库下载 PDB。将其解压缩到“c:\symbolcache”
2.  将符号路径设置为 SRV*c:\symbolcache*http://msdl.microsoft.com/download/symbols。在这种情况下，这将下载 PDB 文件并将它们存储到“c:\symbolcache”中（如果不存在）。

然后，您必须将“c:\symbolcache”设置为您正在使用的任何故障转储分析工具中的符号文件路径。

# java - 如何使用maven将文件传输到服务器

> ID：13382904
> 
> 赞同：0
> 
> 时间：2012-11-14T16:27:35.547
> 
> 标签：java, maven, ant, webserver

一旦 maven 创建了一个 WAR 文件（带有`mvn package`），我想以某种方式将 war 文件传输到另一台服务器上，然后在服务器上执行一个命令以将 war 部署到 tomcat。我通过 VPN 连接到目标 Windows 2008 Server。我还可以在从本地机器进行 vpn 访问时 ping 目标服务器。

有没有办法将战争从我的本地计算机转移到 Windows 2008 服务器？我需要在 Windows 服务器上额外安装一些东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:30:04.520

此[博客条目](http://www.mkyong.com/maven/how-to-deploy-maven-based-war-file-to-tomcat/)详细介绍了如何使用 Maven Tomcat 插件来执行此操作。

> 发出“mvn tomcat:deploy”以将您的项目打包到 WAR 文件中，并将其部署到 Tomcat 服务器。要验证它，只需访问 Tomcat 的管理器页面并确保“/mkyongWebApp”路径存在。

基本上，您将 Tomcat 配置为接受远程部署，`settings.xml`使用您的 Tomcat 凭据配置您，并使用您的 Tomcat 服务器的主机名/端口等设置 Tomcat Maven 插件（呸！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:53:33.633

有很多方法，但没有一个是理想的。我个人不鼓励将 Maven 用作部署或“devops”工具。如果您真的需要这样做，那么您的需求很有可能会随着应用程序的开发而发展并变得更加复杂。为什么不从 CFEngine、Chef、Puppet 或其他工具开始呢？

除了警告之外，您还可以执行以下操作：

1.  使用 scp 部署 - Maven 部署插件可以将文件 scp 到服务器。这覆盖了 Maven 中部署的真正目的，但它会起作用。（同样的缺点是您将覆盖 Maven 设计工作的真实方式）为此，您可能需要显式添加 SCP wagon 提供程序，它过去默认存在，但已被删除。
2.  使用 Cargo 操作您使用的任何服务器 - [http://cargo.codehaus.org/Maven2+plugin](http://cargo.codehaus.org/Maven2+plugin)

# javascript - 正则表达式可视化工具

> ID：13382906
> 
> 赞同：5
> 
> 时间：2012-11-14T16:27:36.910
> 
> 标签：javascript, php, regex, windows-7

1 - 是否有任何软件可以获取正则表达式字符串并**呈现图表或一些** 可用于分析它的类似内容。我尝试了一些 Windows 和 Web 应用程序，但不幸的**是没有人提供可视化。**

2 - 在[这个](http://webtechtuts.com/2011/06/06/regex-how-a-regex-engine-works-internally/)页面有一个这样的应用程序的屏幕截图，但没有别的。有人知道它的名字吗？

![在此处输入图像描述](../Images/f08798c10f2ad85a0835d7f58a58a282.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:57:07.757

您拥有的图像来自[The Regex Coach](http://www.weitz.de/regex-coach/)。它可以[免费使用，但他们鼓励付费支持它](http://www.weitz.de/regex-coach/#license)。

查看完整截图：

[![正则表达式教练](../Images/1196b58416beb6579e4214acfb01c6e2.png)](https://i.stack.imgur.com/9LPrQ.jpg)
[（来源：[webmasterpoint.org](http://www.webmasterpoint.org/img/guide/53/coach_regex.JPG)）]

我以前经常使用该工具，可以推荐它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T17:50:38.517

我最近发现了这个[http://www.regexper.com/](http://www.regexper.com/)。您可以可视化 Javascript 样式的正则表达式。非常便利。希望能帮助到你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-14T16:35:21.347

我无法告诉您该特定工具的名称，但这是我经常使用的工具：

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/) - 您可以输入要匹配/替换的字符串，当您将鼠标悬停在表达式中的各个规则上时，您可以获得有关它们正在做什么的更多信息。但是没有提供图表。

它是基于网络的，而不是可下载的软件

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-15T14:20:58.443

[antlr](http://www.antlr.org/wiki/display/ANTLR3/Five+minute+introduction+to+ANTLR+3)可能比您想要的更多；它是一个词法分析器和一个解析器，可以生成 Java、C、C# 或 Ruby。有一个很棒的 Eclipse 插件。如果你想解析正则表达式，你可以只使用词法分析器。这是来自 Eclipse Indigo SR2 的教程 Expr 语法的屏幕截图。

![在此处输入图像描述](../Images/085067df5c102fb789bb760bf4895445.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T19:57:54.733

## 动态正则表达式突出显示

我编写了一个开源 JavaScript 工具，它可以动态突出显示在网页上发布的正则表达式。该[项目的测试页面](http://jmrware.github.com/DynamicRegexHighlighter/DynamicRegexHighlighterTester.html)允许您输入正则表达式，然后通过将鼠标悬停在它们上来动态突出显示各种匹配的分隔符。它会弹出一条消息，给出捕获组的捕获组编号。我觉得它很方便。

请参阅：[使用 Javascript 进行动态正则表达式突出显示！](http://jmrware.github.com/DynamicRegexHighlighter/)

# excel - 焦点矩形出现在 VBA 中的所有列表框项上

> ID：13382911
> 
> 赞同：4
> 
> 时间：2012-11-14T16:28:01.950
> 
> 标签：excel, vba

我在 Excel VBA 中创建了一个用户窗体，其中有一个未绑定的列表框，其 MultiSelect 属性设置为扩展。当该列表框通过单击列表项以外的任何方式获得焦点时，该列表中的所有项都会出现，并在它们周围带有虚线焦点矩形。

这是一些代码，显示了另一个列表框旁边的现象，其中 MultiSelect 设置为 Single 以进行比较。创建一个用户窗体，在其上放置两个列表框，并将代码添加到窗体中。当您启动表单时，在列表框之间进行选项卡以查看我所描述的内容。

```
Private Sub UserForm_Activate()
    ListBox1.MultiSelect = fmMultiSelectSingle
    ListBox2.MultiSelect = fmMultiSelectExtended

    Dim i As Integer
    For i = 1 To 15
        ListBox1.AddItem String(i, Chr(i + 64))
        ListBox2.AddItem String(i, Chr(i + 64))
    Next
End Sub 
```

有没有办法删除焦点矩形或防止它们出现？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:39:47.590

我已经在 Excel 2010 中试验了您的代码并确认了您的观察。如果我创建两个列表框，输入提供的代码，启动表单并按 Tab 键聚焦在 ListBox2 上，虚线出现在所有行周围。

如果我像以前一样创建两个列表框，手动将**ListBox2/Properties/Multiselect**设置为**2 - fmMultiSelectExtended**，运行并使用 Tab 键将讨厌的行消失。

对我来说，这是相当稳定的，表单现在可以承受多个窗口激活更改、来回跳转等。

不要问我为什么...

# php - AJAX 调用 PHP 显示日期

> ID：13382912
> 
> 赞同：0
> 
> 时间：2012-11-14T16:28:02.323
> 
> 标签：php, ajax

这是我的 html/ajax 代码

```
<head>
<script language="javascript" type="text/javascript">
<!-- 
//Browser Support Code
function ajaxFunction(){
var ajaxRequest;  // The variable that makes Ajax possible!

try{
    // Opera 8.0+, Firefox, Safari
    ajaxRequest = new XMLHttpRequest();
} catch (e){
    // Internet Explorer Browsers
    try{
        ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
        try{
            ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e){
            // Something went wrong
            alert("Your browser broke!");
            return false;
        }
    }
}
// Create a function that will receive data sent from the server
ajaxRequest.onreadystatechange = function(){
    if(ajaxRequest.readyState == 4){
        var ajaxDisplay = document.getElementById('ajaxDiv');
        ajaxDisplay.innerHTML = ajaxRequest.responseText;
    }
}
var date = document.getElementById('Date').value;
var queryString = "?date=" + date;
ajaxRequest.open("GET", "php.php" + queryString, true);
ajaxRequest.send(null); 
}

//-->
</script>

<!--showDate AJAX script -->

<!-- //Calender Script -->
<link rel="stylesheet" type="text/css" media="all"   href="scripts/jsDatePick_ltr.min.css"/>

<!--JavaScript-->
<script type="text/javascript" src="scripts/jsDatePick.min.1.3.js"></script>

<!--For javascript Calendar-->  
<script type="text/javascript">
window.onload = function(){
new JsDatePick({useMode:2, target:"Date", cellColorScheme:"orange", dateFormat:"%d-%m-%Y",});};
</script>
</head>
<body>
<form action=""> 
Date &nbsp;:&nbsp; <input type="text" size="20" id="Date" name="Date"/>
<input type="submit" name="submit" value="Submit" onClick="ajaxFunction()"/>
</form>
<div id="ajaxDiv">Time slots will be listed here...</div>

</body> 
```

这是我的 PHP 代码

```
<?php

$d = $_GET['date'];
$timestamp = strtotime($_GET['date']);
$date = date("Y-m-d",$timestamp);

echo "Time is $date";
?> 
```

我可以从日历中选择日期，日期将显示在下面。不幸的是，它不起作用。有人请帮我解决我的问题。我已经尝试了很多次来修复错误，但仍然无法做到。差点晕倒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:35:33.373

首先，我建议您使用[jQuery 进行 Ajax 处理](http://api.jquery.com/jQuery.ajax/)，那么您到底为什么要查询服务器以获取日期，传递日期本身呢？

使用[moment.js](http://momentjs.com/)或[xdate](http://arshaw.com/xdate/)进行客户端日期时间格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:19:27.790

你想做什么和你正在做什么是两件非常不同的事情，1.你根本不需要php。2.这是完整的代码供您复制。[http://www.java2s.com/Code/JavaScript/Development/UpdateTimepersecond.htm](http://www.java2s.com/Code/JavaScript/Development/UpdateTimepersecond.htm)

# .net - .Net 面板，可以放大面板的图形吗？

> ID：13382913
> 
> 赞同：0
> 
> 时间：2012-11-14T16:28:02.737
> 
> 标签：.net, panel, system.drawing

如果我有一个面板，我在其 CreateGraphics() 对象上绘制通用形状，如下所示：

```
 public static void DrawRoundRectWithText(Graphics g, Pen p, float x, float y, float width, float height, float radius, string textFirstLike, string textSecondsLine, bool hasGate, Color color)
    {
        System.Drawing.Graphics formGraphics = g;
        g.InterpolationMode = InterpolationMode.High;
        g.SmoothingMode = SmoothingMode.HighQuality;

        drawBrush.Color = color;
        Rectangle rect = new Rectangle((int)x, (int)y, (int)width, (int)height);
        p.Width = RECTANGLE_BORDER;

        formGraphics.FillRectangle(drawBrush, rect);
        p.Color = RECTANGLE_COLOR;
        formGraphics.DrawRectangle(p, rect);

        DrawString(g, textFirstLike, x + TEXT_OFFSET_X, y + height / 4, PRIMARY_TEXT_FONT_SIZE, (int)width);
        DrawString(g, textSecondsLine, x + TEXT_OFFSET_X, y + height / 2, SECONDARY_TEXT_FONT_SIZE, (int)width);

        int gateWidth = QuestNode.GATE_RADIUS;
        int gateHeight = QuestNode.GATE_RADIUS;

        if (hasGate)
        {

            drawBrush.Color = GATE_COLOR;
            Rectangle circle = new Rectangle((int)(x + width) - gateWidth/2, (int)(y + height) - gateHeight/2, gateWidth, gateHeight);

            formGraphics.FillEllipse(drawBrush, circle);
            formGraphics.DrawEllipse(p, circle);

        }

        Point[] diamondPoints = new Point[4];
        diamondPoints[0] = new Point((int)(x - gateWidth / 2), (int)y);
        diamondPoints[1] = new Point((int)x, (int)(y - gateHeight / 2));
        diamondPoints[2] = new Point((int)(x + gateWidth / 2), (int)y);
        diamondPoints[3] = new Point((int)x, (int)(y + gateHeight / 2));

        drawBrush.Color = Color.LightGray;
        formGraphics.FillPolygon(drawBrush, diamondPoints);
        formGraphics.DrawPolygon(p, diamondPoints);
    } 
```

![在此处输入图像描述](../Images/8e3e58c84d8b32185aa70cf6c4cd439a.png)

有没有办法可以放大/缩小面板，从而自动缩小形状？

# javascript - Windows 8 应用程序中的背景音频

> ID：13382917
> 
> 赞同：5
> 
> 时间：2012-11-14T16:28:18.373
> 
> 标签：javascript, windows-8, windows-runtime

我试图让音频在 Windows 8 中的应用程序之外工作（我正在使用 HTML5、Javascript 方法），所以当你关闭应用程序时，声音会继续工作，从我在这里和其他网站上的研究来看我相信这在 Windows 8 '背景音频中被调用，我已经遵循了 Microsoft 开发人员网站上的所有教程，并在应用程序清单中声明了背景音频：

```
<Extension Category="windows.backgroundTasks" StartPage="default.html">
      <BackgroundTasks>
        <Task Type="audio" />
        <Task Type="controlChannel" />
      </BackgroundTasks>
    </Extension> 
```

并且我已将 msAudioCategory="BackgroundCapableMedia" controls="controls" 添加到我的 HTML5 音频标签中，如下所示：

```
<audio id="playback" msAudioCategory="BackgroundCapableMedia" controls="controls"> 
    </audio> 
```

我还把它添加到了我的 default.js 文件中，虽然我不确定这是做什么的

```
// Declare a variable that you will use as an instance of an object
var mediaControls;

// Assign the button object to mediaControls
mediaControls = Windows.Media.MediaControl;

// Add an event listener for the Play, Pause Play/Pause toggle button
mediaControls.addEventListener("playpausetogglepressed", playpausetoggle, false);
mediaControls.addEventListener("playpressed", playbutton, false);
mediaControls.addEventListener("pausepressed", pausebutton, false);

// The event handler for the play/pause button
function playpausetoggle() {
    if (mediaControls.isPlaying === true) {
        document.getElementById("playback").pause();
    } else {
        document.getElementById("playback").play();
    }
}

// The event handler for the pause button
function pausebutton() {
    document.getElementById("playback").pause();
}

// The event handler for the play button
function playbutton() {
    document.getElementById("playback").play();
} 
```

我还尝试在最后一部分中更改 ID 以具有井号标签，但是当我按下开始按钮回家时音频停止，我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T22:04:59.447

我相信您还需要处理“stoppressed”事件：

```
mediaControls.addEventListener("stoppressed", stop, false);

function stop() {
    // Handle the stop event.
    document.getElementById("playback").pause();
    document.getElementById("playback").currentTime = 0;
} 
```

在 Windows 8 JavaScript 应用程序中播放背景音频的三个步骤是：

1.  **在package.appxmanifest**中声明一个音频后台任务。还要列出一个**StartPage**。你这样做是正确的。
2.  设置`msAudioCategory="BackgroundCapableMedia"`。你这样做了。
3.  实施对媒体控制的支持。媒体控件是遥控器或某些键盘上用于播放、暂停或停止音频的按钮。有关工作示例，请参阅MSDN 上的[媒体示例配置密钥。](http://code.msdn.microsoft.com/windowsapps/Media-Buttons-ea57d8e2)除了您已经处理的 3 个事件之外，我仅在处理“stoppressed”时才能使示例正常工作。

有关更多信息，请观看2011 Build 会议的[第 2 部分 Your Metro 风格应用程序、视频和音频。](http://channel9.msdn.com/Events/BUILD/BUILD2011/PLAT-776T)背景音频从视频开始约 31 分 20 秒开始覆盖，持续约 10 分钟。请注意，此视频来自 2011 年 9 月，涵盖了 Windows 8 的开发人员预览版。这些概念仍然适用于 Windows 8 和 Windows RT 的已发布版本，但命名空间和属性名称在某些地方有所不同。

# php - 通过逐步表单传递复选框结果

> ID：13382918
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:28:18.437
> 
> 标签：php

我有一个分步表单，我想将复选框结果传递到最后的评论页面。

第 1 步和第 2 步中有复选框，如何在第 3 步中显示这些复选框？

我试图在下面这样做，但无法让它回显结果。

```
<form class="form" method="POST" action="<?php the_permalink(); ?>">
<? if (!$_POST['step']) { ?>
<input type="hidden" name="step" value="1" />
<div class="steps" style="float:left;">
  <p style="font-size:17px!IMPORTANT;"><b>Step 1 of 3</b></p>
</div>
<div class="progress-buttons" style="float:right;">
  <button class="next" type="submit" name="submit">Next</button>
</div>
<div class="clear"></div>
<?php $posts = get_field('options');
                            if( $posts ):
                            $items = 0;
                            foreach( $posts as $post): // variable must be called $post (IMPORTANT)
                                setup_postdata($post); ?>
<p style="clear:right;float:right;margin-right:60px;">
  <input type="checkbox" name="hardware[]" value="<?php the_title(); ?>">
  Select</p>
<?php $items++; endforeach;
                            wp_reset_postdata(); // IMPORTANT - reset the $post object so the rest of the page works correctly
                            endif; ?>
</div>
</div>
<? } else if ($_POST['step'] == 1) {
foreach($_POST as $name => $value) {
    if ($name == "hardware") {
        $_SESSION[$name] = $_POST[$name];
    } else if ($name <> "step") { echo "<input type=\"hidden\" name=\"$name\" value=\"$value\" />"; }
} ?>
<input type="hidden" name="step" value="2" />
<div class="steps" style="float:left;">
  <p style="font-size:17px!IMPORTANT;"><b>Step 2 of 3</b></p>
</div>
<div class="progress-buttons" style="float:right;"> <a class="back" href="<?php the_permalink(); ?>?<?= $field ?>" >Back</a>
  <button class="next" type="submit" name="submit">Next</button>
</div>
<?php $posts = get_field('accessories');
                            if( $posts ):
                            $items = 0;
                            foreach( $posts as $post): // variable must be called $post (IMPORTANT)
                                setup_postdata($post); ?>
<p style="clear:right;float:right;margin-right:60px;">
  <input type="checkbox" name="accessories[]" value="<?php the_title(); ?>">
  Select</p>
<?php $items++; endforeach;
                            wp_reset_postdata(); // IMPORTANT - reset the $post object so the rest of the page works correctly
                            endif; ?>
</div>
</div>
<? } else if ($_POST['step'] == 2) {
foreach($_POST as $name => $value) {
    if ($name == "accessories") {
        $_SESSION[$name] = $_POST[$name];
    } else if ($name <> "step") { echo "<input type=\"hidden\" name=\"$name\" value=\"$value\" />"; }
} ?>
<input type="hidden" name="step" value="3" />
<div class="steps" style="float:left;">
  <p style="font-size:17px!IMPORTANT;"><b>Step 3 of 3</b></p>
</div>
<div class="progress-buttons" style="float:right;"> <a class="back" href="<?php the_permalink(); ?>?<?= $field ?>" >Back</a>
  <button class="next" type="submit" name="submit">Next</button>
</div>
<div class="clear"></div>
<p>System spec</p>
<?php
$hardware = $_POST['hardware'];
$accessories = $_POST['accessories'];
if( is_array($_SESSION['hardware']) ){
    foreach ($_SESSION['hardware'] as $val) {
        $hardwareresults .= $val.",\n";
    }
}
if( is_array($_SESSION['accessories']) ){
    foreach ($_SESSION['accessories'] as $val) {
        $accessoriesresults .= $val.",\n";
    }
}
?>
<ul>
  <li><?php echo $hardwareresults; ?></li>
  <li><?php echo $accessoriesresults; ?></li>
</ul>
<? } else if ($_POST['step'] == 3) { //do stuff ?>
Last step
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:49:34.523

您的脚本中似乎没有任何问题，您正在将值正确推送到会话中，只需在第三步中使用这些会话值，尝试以下代码

```
<?php } else if ($_POST['step'] == 3) { //do stuff  ?>
     <?php 
             echo '<pre>';
             print_r($_SESSION['hardware']);
             print_r($_SESSION['accessories']);
             echo '</pre>';
     ?>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T04:31:42.227

表单持久化，最简单的实现，需要会话管理。即您需要将http post 值设置为会话。您实现此代码的方式将根据架构（即您使用或不使用什么框架）而有所不同，但基本上这就是您需要做的所有事情。

例如

```
foreach($_POST as $key=>$value){$_SESSION[$key]=$value;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T06:23:10.717

您似乎正在覆盖您的 $_SESSION 密钥：

```
foreach($_POST as $name => $value) {

 if ($name == "hardware") {
   //here you just overwrite the 'hardware' key continuously
   $_SESSION[$name] = $_POST[$name];
 } else if ($name <> "step") {
   echo "<input type=\"hidden\" name=\"$name\" value=\"$value\" />";
 }

} 
```

写出来是这样的：

```
 if ($name == "hardware") {
   //here you just overwrite the 'hardware' key continuously
   $_SESSION['hardware'] = $_POST['hardware'];
 } 
```

那么您是存储多个值还是仅存储一个值？

[此外，您应该检查您是否使用var_dump](http://au1.php.net/manual/en/function.var-dump.php)一路丢失值， 例如：

```
 var_dump($_SESSION['hardware']);
 if( is_array($_SESSION['hardware']) ){
  foreach ($_SESSION['hardware'] as $val) {
     $hardwareresults .= $val.",\n";
  }
 }
 var_dump($hardwareresults); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T21:57:19.323

从这里，很难说出你的问题是什么，但你最终做了一些奇怪和不必要的事情。

```
$accessoriesresults .= $val.",\n"; 
```

.= 是一个字符串运算符，不要用它来连接数组。所以与其：

```
$accessoriesresults[] = $val; 
```

但是你为什么要这样做呢？您已经在 $_SESSION 中拥有这些值，为什么还要创建另一个类似的数组？为什么不直接打印 $_SESSION 中的内容？

```
if( is_array($_SESSION['accessories']) ){
    foreach ($_SESSION['accessories'] as $val) {
         echo "<li>$val</li>";
    }
} 
```

# ruby-on-rails - 编写此 if 子句的更好/更简洁的方式

> ID：13382919
> 
> 赞同：1
> 
> 时间：2012-11-14T16:28:23.680
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refactoring

以下是我`UsersController`操作的代码。我有一个`current_user`来自会话的对象，如果没有传递到操作中，我想使用当前用户的 ID。

```
def show
  id = params[:id]
  id = current_user.id if id.blank?
  @user = User.find(id)
end 
```

我这样做是为了最终让管理员可以编辑其他用户的信息。这就是为什么我只是不使用`@user = User.find(current_user.id)`.

想法/建议？我可能也可以做一个三元运算符，比如

```
params[:id].present? ? id = params[:id] : id = current_user.id 
```

但我认为可能有更好的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T16:31:22.127

我更喜欢这种方式

```
def show
  @user = User.find(params[:id] || current_user.id)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:36:28.663

您可以使用[CanCan 宝石](https://github.com/ryanb/cancan)

我遵循本教程：[Tony Amoyal 网站](http://www.tonyamoyal.com/2010/07/28/rails-authentication-with-devise-and-cancan-customizing-devise-controllers/)

# php - 使用 PDO 调用带有 Out 参数的存储过程

> ID：13382922
> 
> 赞同：15
> 
> 时间：2012-11-14T16:28:33.553
> 
> 标签：php, mysql, stored-procedures, pdo, prepared-statement

我已经使用 PDO 一段时间了，并且正在重构一个项目，以便它使用存储过程而不是内联 SQL。我收到一个无法解释的错误。我使用的是 PHP 5.3.5 版和 MySQL 5.0.7 版。

我只是想获得一个带有输出的基本存储过程。这是存储的过程：

```
DELIMITER //  
CREATE PROCEDURE `proc_OUT` (OUT var1 VARCHAR(100))  
BEGIN  
    SET var1 = 'This is a test';  
END // 
```

这是我用来调用 proc 的代码，$db 是 PDO 的一个实例：

```
$stmt = $db->prepare("CALL proc_OUT(?)");
$stmt->bindParam(1, $return_value, PDO::PARAM_STR, 4000); 

    // call the stored procedure
    $stmt->execute();
    echo $returnvalue; 
```

简单吧？但是，它会导致以下错误：

```
exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1414 OUT or INOUT argument 1 for routine mydb.proc_OUT is not a variable or NEW pseudo-variable in BEFORE trigger 
```

如果我像这样直接调用proc：

```
CALL proc_OUT(@res);
SELECT @res; 
```

它按预期工作，这使我相信 PHP 调用它的方式存在问题，但是我似乎找不到问题所在。我按照[手册](http://php.net/manual/en/pdo.prepared-statements.php)中的说明进行操作，但仍然出现此错误。谁能建议我做错了什么？任何建议将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-17T16:47:08.973

似乎这里有一个错误，我发现的最佳解决方案是：

[http://www.php.net/manual/en/pdo.prepared-statements.php#101993](http://www.php.net/manual/en/pdo.prepared-statements.php#101993)

从上面链接的评论中：

> ```
> $dbh->query("CALL SomeStoredProcedure($someInParameter1, $someInParameter2, @someOutParameter)"); 
> $dbh->query("SELECT @someOutParameter");
> 
> // OR, if you want very much to use PDO.Prepare(),
> // insert "SELECT @someOutParameter" in your stored procedure and then use:
> 
> $stmt = $dbh->prepare("CALL SomeStoredProcedure(?, ?)"); 
> $stmt ->execute(array($someInParameter1, $someInParameter2)); 
> ```

另请参阅：[https ://stackoverflow.com/a/4502524/815386](https://stackoverflow.com/a/4502524/815386)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-26T10:34:55.877

知道了！只需添加一个

```
SELECT @outputparam; 
```

at the end of the stored procedure, where @outputparam is the name used for the param in the stored procedure definition. If you cannot edit the stored procedure, you should do a second query, for SELECT @outputparam, with PHP PDO to get the output param value.

Tip: If you're using the deprecated DBLib to connect to SQL Server and you modified the stored procedure as suggested, you'll also need to tweak your syntax to get the output param value in the calling PHP script:

```
$out = 0;
$sth = $db->prepare("DECLARE @myout INT; EXECUTE mysp :firstparam, :secondparam, @myout OUTPUT;"); // the DECLARE trick is needed with DBLib
$sth->bindParam(':firstparam', $firstparam, PDO::PARAM_INT);
$sth->execute();
$sth->bindColumn(1, $out, PDO::PARAM_INT);
$sth->fetch(PDO::FETCH_BOUND);

var_dump($out); // works 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-17T16:48:11.390

您需要指定您的参数是 IN/OUT 样式，如 PHP 网站示例：

[http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)示例 #5

```
<?php

$stmt = $dbh->prepare("CALL sp_takes_string_returns_string(?)");
$value = 'hello';
$stmt->bindParam(1, $value, PDO::PARAM_STR|PDO::PARAM_INPUT_OUTPUT, 4000); 

// call the stored procedure
$stmt->execute();

print "procedure returned $value\n"; 
```

# sql - 空字符串被添加到主键字段

> ID：13382925
> 
> 赞同：1
> 
> 时间：2012-11-14T16:28:51.820
> 
> 标签：sql, sql-server, sql-server-2008, null, primary-key

我的表单中有一个主键列`year`。

每当用户创建一个新表单时，他应该从下拉列表中填充此字段。

但是，如果用户犯了错误并且没有从下拉列表中选择任何内容，则会附加一个空字符串`""`。And when post operation is selected the record gets created in the database table.

我的问题：
当用户在做出选择后发布到数据库时：主键列最终接受空字符串`""`

这不应该抛出一个错误，因为主键字段不应该有一个空/空字符串吗？

我检查了表创建脚本，列设置为`Not Null`并且没有分配默认值。

我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T16:29:52.140

`NULL`和空字符串在 SQL Server 中与 Oracle 不同。PK 可以有一个空字符串。

当然，PK 必须是唯一的，因此只能有一个这样的空字符串，除非它是复合 PK 并且其他列具有不同的值。

您应该在插入尝试之前验证这一点，但可以添加一个检查约束作为最后一道防线。

# android - 长按按钮事件处理程序

> ID：13382927
> 
> 赞同：5
> 
> 时间：2012-11-14T16:28:55.623
> 
> 标签：android

我看过几篇文章，例如这篇文章， [描述](https://stackoverflow.com/questions/4402740/android-long-click-on-a-button-perform-actions)了如何使用按钮处理长按事件。我可以按照这些指示进行操作，但我想知道是否可以按照我处理点击的方式进行操作。我处理点击的方式是在 XML 中定义处理程序，如下所示：

```
<Button
    android:id="@+id/btn_NextLift"
    ...
    android:onClick="btn_NextLiftClick" /> 
```

然后在这样的代码中：

```
public void btn_NextLiftClick(View vw_Current) 
    {...} 
```

我确实在 xml 中看到了布尔属性 longClickable，但我没有看到在哪里定义事件处理程序所以......？？？

TIA JB

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-14T16:31:53.780

您不能通过 XML 做到这一点。相反，使用：

```
Button button = (Button) findViewById(R.id.btn_NextLift);

button.setOnLongClickListener(new OnLongClickListener() { 
        @Override
        public boolean onLongClick(View v) {
            // TODO Auto-generated method stub
            return true;
        }
    }); 
```

确保此代码在`setContentView()`被调用之后出现。

此外，请确保该`longClickable`属性设置为 true。

# php - 如何在无法从浏览器中轻松保存的情况下提供图像？

> ID：13382932
> 
> 赞同：0
> 
> 时间：2012-11-14T16:29:05.043
> 
> 标签：php, javascript, apache

我只想在我的网站上显示一组图像。我想避免最终用户轻松保存的可能性。我知道用户可以使用打印屏幕保存图像，但这不是一个简单的方法，因为之后需要一些工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:33:01.837

1.  在小程序中显示（例如 flash、java）
2.  使用服务器端操作将图像切成随机大小的正方形/矩形，并使用客户端表格以“组装”格式显示部件
3.  使用 CSS 叠加层，以便右键单击图像获得叠加层而不是图像
4.  放弃，因为如果有人想窃取您的形象，他们会的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:33:16.890

不可能 100% 阻止他们这样做，但你可以让它变得更难。

您可以有一个不允许直接访问它的 .htaccess 规则（必须从您网站的一个网页加载）

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?example.com [NC]
RewriteRule \.(jpg|jpeg|png|gif)$ - [NC,F,L] 
```

然后，您可以阻止右键单击您的网站，这样他们就不能只单击复制图像。请参阅： [如何禁用右键单击我的网页？](https://stackoverflow.com/questions/737022/how-do-i-disable-right-click-on-my-web-page)

请注意，没有好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T16:35:45.440

你可以：

*   将其拆分为多个部分（也需要对 HTML 代码进行一些更改）
*   `background-image`在完全透明的 gif / png 上作为 css 应用*
*   [使用gd](http://php.net/manual/en/book.image.php)应用水印（在 php 中）
*   或混合这些

但正如您所写，用户仍然可以使用简单的打印屏幕*保存它。*

(*) f.ex:

```
<img src="blank.gif" style="width: 200px; height: 100px; background-image: url('image.jpg');" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T16:36:47.523

可以将图像绘制到画布元素，从而阻止用户使用 DOM 检查器或右键单击菜单保存图像。不过，这种技术不适用于旧版浏览器。

# java - 带有模态面板问题的 Prime Faces 对话框

> ID：13382935
> 
> 赞同：0
> 
> 时间：2012-11-14T16:29:19.480
> 
> 标签：java, jsf, primefaces

当使用`<p:dialog>`模态属性设置为 true 的标签（在 Prime Faces 3.3.1 中）时，我得到了奇怪的行为。位于弹出窗口和页面之间的“深色半透明面板”正确地从上到下覆盖了页面大小，但是当我向下滚动页面时，它被剪切了。

我认为 Prime Faces（或 jQuery）正在检索窗口的大小而不是页面的大小来计算暗半透明面板的尺寸。

有任何想法吗？

这是我的代码：

```
<p:dialog draggable="false" id="dialogAddItems" header="Add item" modal="true" resizable="false" widgetVar="widgetDialogAddItems" width="600" height="200">
    <h:form>
        ...
    </h:form>
</p:dialog> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T02:40:58.710

我在 primefaces 3.4 中遇到了这个问题，设置了`appendToBody="true"`解决`<p:dialog>`问题的属性。我希望这也能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:33:21.257

因此，我尝试`appendToBody="true"`将标签放置在页面上的许多不同位置。没有任何效果。甚至尝试将 Prime Faces 更新到最新版本。也没有用。所以，我的解决方案是一种解决方法，但这是因为我没有其他想法：

```
.ui-widget-overlay {
   position: fixed !important;
   top: 0px !important;
} 
```

# c# - c# WebBrowser 控件滚动条

> ID：13382936
> 
> 赞同：2
> 
> 时间：2012-11-14T16:29:22.317
> 
> 标签：c#, javascript, jquery, html, css

我的 Windows 窗体应用程序中有一个 webbrowser 控件，用于输出动态 HTML 页面。现在这个网络浏览器有一个 width 和一个 height 。当页面超过 webbrowser 滚动条的宽度时出现。如何将滚动条保持在浏览器底部？

我尝试什么：

在那个动态的 HTML 页面中，我放置了 jQuery 1.8.1 和另一个脚本调用 scrollTo。我创建另一个 div 站在页面底部（我使用 CSS）。但它不起作用，因为网络浏览器......

我知道有很多脚本可以做到这一点，但没有一个适合我的情况。我有一个名为“内容”的 div，它没有指定的宽度和高度，并且使用 .append() jQuery 函数它增加了它的高度（它的内容）。

如何在 C# 中保持 webbrowser 的垂直滚动条底部（我使用 VS 2010）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:47:44.693

只需给你的 div 一个样式`overflow-y: scroll`来强制滚动条。

# xml - 如果存在重复出现的元素，则 XPATH 选择不同的第一个元素

> ID：13382937
> 
> 赞同：3
> 
> 时间：2012-11-14T16:29:21.930
> 
> 标签：xml, xpath

我有一个重复出现的 XML 元素

```
<comment>
    <cmnt_reas_typ>reason1</cmnt_reas_typ>
    <cmnt_txt>ABC</cmnt_txt>
</comment>
<comment>
    <cmnt_reas_typ>reason1</cmnt_reas_typ>
    <cmnt_txt>ABC</cmnt_txt>
</comment>
<comment>
    <cmnt_reas_typ>reason2</cmnt_reas_typ>
    <cmnt_txt>ABC</cmnt_txt>
</comment> 
```

基本上，我想`cmnt_txt`为特定的`cmnt_reas_typ`. 因此，从上面的示例中，我只想为=“reason1”显示`cmnt_txt`一次“ABC ”。`cmnt_reas_typ`但问题是`cmnt_reas_typ`一个动态值，我不能在 XPath 中对其进行硬编码。有没有办法说只`cmnt_txt`为此返回一个`cmnt_reas_typ`？或者即使 XPath 返回一个布尔值`true`，如果它是第二次出现，那`cmnt_reas_typ`也应该没问题。它适用于 XPATH 1.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:31:27.230

在 XPATH 2.0 上，您可以使用`distinct-values()`

您预期的 XPATH 应该类似于

## 句法：

```
distinct-values(//comment[cmnt_reas_typ='PASS-YOUR-DYNAMIC-VALUE']/cmnt_txt) 
```

## 例子：

```
distinct-values(//comment[cmnt_reas_typ='reason1']/cmnt_txt) 
```

您将获得唯一结果列表并在屏幕上一一显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:39:28.013

此 xpath 将仅返回在 XPATH 1.0`comment`中具有唯一`cmnt_txt`元素的元素`cmnt_reas_type`

```
comment[not(. = preceding::comment)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:51:56.270

如果我正确理解您的需求，您希望每种评论类型都产生一个评论文本（第一个），对吗？如果是这样的话，那么我想出了这个 XPath：

```
//cmnt_txt[not(../cmnt_reas_typ/text() = ../preceding::cmnt_reas_typ/text())] 
```

它需要所有不等于任何前面`cmnt_text`的节点。因此，如果我没有遗漏任何东西，它应该只取每种类型的第一个。`cmnt_reas_typ``cmnt_reas_typ``cmnt_text`

# jquery - 如何使用 jQuery 获取 span 元素的内容？

> ID：13382939
> 
> 赞同：0
> 
> 时间：2012-11-14T16:29:29.917
> 
> 标签：jquery, html-parsing, dom-traversal, dom, jquery-traversing

当在我的页面上单击文本时，我想获取具有“network_ip”类的最近（向上）跨度元素的值。这是我的代码：

```
<div class="ip_header">
<div style="margin-left:30px;">
<div class="flag_and_ip">
<img title="United Kingdom" src="/gearbox/component/ui/htdocs_zend/public/img/mini-flags/gb.gif">
<span class="network_ip">213.171.218.xxx</span>
</div>
<div class="align_count">48</div>
IPs,
<div class="align_count">63</div>
Domains
</div>
</div>
<div class="network_ip_content ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" style="height: 4417.6px; display: block;" role="tabpanel">
<h4>
213.171.218.97 (
<b>1</b>
Domains)
</h4>
<p>
<a href="http://private.dnsstuff.com/tools/whois.ch?ip=213.171.218.97&src=ShowIP" target="_blank">IP Whois</a>
,
<a href="http://search.live.com/results.aspx?q=ip%3A213.171.218.97" target="_blank">IP Neighbours</a>
</p>
<table class="table table-striped table-bordered table-condensed">
<colgroup>
<tbody>
<tr>
<td>
<a class="domain" href="#">studentjetpacks.com</a>
</td>
<td>
</tr>
</tbody>
</table> 
```

到目前为止，这是我在 jQuery 中的尝试：

```
 $(".domain").click(function(){ 
    $("div#list_lm_domain_urls_dialog").dialog('open');
    var domain = $(this).text();
    var network_ip = $(this).closest('span.network_ip').text();

    alert(network_ip);
    refresh_lm_domain_links(domain,0,100);
    return false;                   
}); 
```

警报一无所获。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:03:42.873

你需要做的是这个

```
$(this) // starting from the anchor
   .closest('div.network_ip_content ') // find div that wraps the table content
   .prevAll('.ip_header:first') // get first prev div sibling with class=ip_header
   .find('span.network_ip') // find the span
   .text() // get the text 
```

[http://jsfiddle.net/XJvZH/](http://jsfiddle.net/XJvZH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:04:49.000

您确实应该找到一种将锚点链接到跨度的更好方法 - 即使用 ID 或`data-`属性。

但是由于您要求搜索最近`span`的向上，因此您可以：

```
$(".domain").click(function(){
    var $anchor = $(this);
    $("div#list_lm_domain_urls_dialog").dialog('open');
    var domain = $anchor.text();
    var network_ip;
    $anchor.parents().each(function(){
        var $spans = $(this).prevAll().find('span.network_ip');
        if ($spans.length>0) {
            network_ip = $spans.last().text()
            return false;
        }
    });

    alert(network_ip);
    refresh_lm_domain_links(domain,0,100);

    return false;
}); 
```

这需要锚的所有父节点并从最近的父节点向上循环。`.prevAll()`对于每个父母，它使用并查找跨度检查以前的兄弟姐妹。最后，它从找到的跨度中获取最后一个 - 即如果有多个跨度，则为“底部”跨度。

[工作演示在这里](http://jsfiddle.net/jfrej/3DnDW/)。

# node.js - Node.js express rest + Backbone Boilerplate (BBB)

> ID：13382940
> 
> 赞同：3
> 
> 时间：2012-11-14T16:29:32.393
> 
> 标签：node.js, backbone.js, express, backbone-boilerplate

我使用 express 和 node.js 开发了一个休息服务。我以前使用过带有独立 java rest 服务的骨干样板，在不同的服务器实例上运行。

现在我想将 bbb 与我的节点休息服务器集成，以便在 Heroku 上轻松部署。

将 bbb 与其余服务器结合起来有什么缺点吗？

将 bbb 配置为在同一台服务器上运行的最佳方法是什么？

我进行了搜索，但没有找到有关该问题的任何讨论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:47:52.847

这个问题当然可以讨论很多。这是我可以贡献的

BBB 最适用于 AMD 模块。因此，如果您还没有在当前的带有 REST 的 Backbone 应用程序中真正使用它们，那么您应该研究这些。切换时可能会有些痛苦，但值得您花时间。[在这里，您可以找到如何将 BBB 部署到给定的 Backbone RESTful 应用程序。](http://addyosmani.github.com/backbone-fundamentals/#backbone-boilerplate-and-grunt-bbb)

将任何 nodeJS 框架与骨干应用程序一起使用是非常通用的，并且（至少对我而言）如果项目符合 MVC 模式，则可以为您提供可维护的代码。

您也可以尝试考虑将您原来的基于 JAVA 的休息服务切换到另一个使用[express](http://expressjs.com/)和[socketIO](http://socket.io)的服务。在创建可扩展的应用程序时，它们都非常有效。与 mongoDB 一起使用就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T12:49:02.980

BBB 非常适用于宁静的 Web 服务。要集成它，您需要配置您的 express 服务器以提供来自 BBB 的静态文件（库、css、模板、视图和模型）。

另一种方法是从 nginx 服务器或内容分发网络提供您的 BBB 文件。

出于开发目的，能够同时进行 api / 前端更改并让您的代码重新编译/重新加载通常很有用。我在这里创建了一个 Express/Backbone 样板项目：[webapp-boilerplate](https://github.com/skaapgif/webapp-boilerplate "节点/主干模板")。

# c++ - 通过引用传递函数对象可以吗？

> ID：13382946
> 
> 赞同：4
> 
> 时间：2012-11-14T16:29:56.967
> 
> 标签：c++

我有一段代码需要传递一个函数对象（函数式）。我不能使用函数指针，因为我需要存储一些状态变量。假设我有很多状态变量。通过引用传递函数对象可以吗？我只见过按值传递的函数对象。这就是我的代码的样子：

```
struct FunctionObject {
    double a, b, x, y;
    double operator() (int v, int w) {....}
};

template <class T>
Class MyClass {
     T& func;
     .....
public:
     MyClass(T& func):func(func) {}
     .....
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:32:30.517

通过引用传递函数对象很好，但你应该知道许多 C++ 算法*复制函数对象，所以如果你需要一个库算法来尊重你的状态，你应该**在*你的函数对象中将它作为引用传递：

```
struct State {
    double a, b, x, y;
};
struct Function {
    State &state;
    explicit Function(State &state): state(state) {}
    double operator() (int v, int w) {....}
};
State state;
std::...(..., Function(state), ...) 
```

此外，一些库算法（例如[`transform`](http://en.cppreference.com/w/cpp/algorithm/transform)）要求 C++11 之前的函数对象*没有副作用*，即没有任何状态；这个要求很少被强制执行，并且在 C++11 中被放宽了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:36:14.197

这主要取决于您打算如何实例化 FunctionObject（如何创建函数对象）。如果使用引用，则必须确保函数对象比用户 (MyClass) 对象寿命长。

例如：

```
MyClass* createObject() {
    MyFunction f(...);         // function object created
    return new MyClass(f);     // reference used
                               // function object destroyed => reference invalid
} 
```

不正确，因为返回的对象具有对已破坏（无效）函数的引用。

由于通过引用传递（避免复制小对象）获得的收益很少，因此不值得麻烦（检查对象生命周期）和疏忽风险（错误）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:34:23.673

合成器是正确的，但是...

*   大多数情况下，您稍后会在代码中调用函数对象，因此您需要确保您在 MyClass 中提供的引用仍在范围内
*   所以最后因为你需要将函数对象保存在堆中而不是堆栈中，你必须创建一个指向它的指针......所以我建议使用指针......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T16:34:30.717

函数对象是对象。您可以通过引用传递它们，并且可以存储对它们的引用，但要遵守通常的生命周期问题。但是，其中的算法`std::`可以随时复制其函数对象，因此任何存储的状态都可能是陈旧的，因此最好将函数对象编写为指针或对其状态的引用的包装器。

# c++ - 如何使用 Qt 处理 json 中编码的西里尔文数据？

> ID：13382949
> 
> 赞同：0
> 
> 时间：2012-11-14T16:30:10.523
> 
> 标签：c++, json, qt, encoding, decode

我有一个 JSON，但所有西里尔字符都这样编码：`\u0418\u0437\u0431\u0435`. 如何将其读入 QString？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:15:34.307

那是 JSON 的 Unicode 转义序列。您应该为此使用 JSON 解析器。JSON 解析中还有一些其他的陷阱。

如果您使用的是 Qt 5，它带有一个：http: [//qt-project.org/doc/qt-5.0/qjsondocument.html](http://qt-project.org/doc/qt-5.0/qjsondocument.html)

如果你不是，那就找一个像[jsoncpp](http://jsoncpp.sourceforge.net/)这样的第三方。它相当轻量级，并且在其数据和 Qt 之间进行转换并不困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:35:21.337

那应该是 UTF8 或 UTF16 编码。用这个：

```
result = QString::fromUtf8(yourString.c_str(), yourString.size()); 
```

或者

```
result = QString::fromUtf16(yourString.c_str(), yourString.size()); 
```

其中 yourString 是 std::string 类型

# ruby - 如何将轮胎连接到外部服务器？

> ID：13382950
> 
> 赞同：0
> 
> 时间：2012-11-14T16:30:16.000
> 
> 标签：ruby, tire

它应该很容易找到，但不知何故我们没有找到如何将轮胎*连接到外部服务器？

*Tire 是用于 ElasticSearch 搜索引擎的丰富的 Ruby API 和 DSL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T17:40:02.187

如果你的意思是不同的`localhost:9200`，它应该是这样的

```
require 'tire'

Tire.configure { url "http://ec2-232-10-73-111.compute-1.amazonaws.com:9200" } 
```

# html - 所有 html 实体字符映射的列表

> ID：13382951
> 
> 赞同：3
> 
> 时间：2012-11-14T16:30:18.727
> 
> 标签：html, entity, character

我在哪里可以找到所有 html 实体字符的巨型列表？ [http://www.w3schools.com](http://www.w3schools.com)并未涵盖所有内容。例如     （这些实体的值：' & "）不包含在本网站上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:38:52.093

对于 HTML，命名实体的数量有限（例如`&amp;`），而[Wikipedia](http://en.wikipedia.org/wiki/Unicode_and_HTML)和[W3C](http://www.w3.org/TR/WD-html40-970708/sgml/entities.html)都有这些实体的列表。

然后是 Unicode 字符引用（例如`&#145;`）的 HTML 语法，对于这些，您真的只需要查看[Unicode 标准](http://www.unicode.org/versions/Unicode6.1.0/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T18:01:29.763

这取决于 HTML 版本，全面的答案会很长。但简而言之，HTML 中允许的任何 Unicode 字符（这取决于 HTML 版本）都可以使用形式的字符引用来编写，`&#n;`其中`n`is 是十进制的 Unicode 数字，也可以使用`&#xh;`where `h`is 是十进制的 Unicode 数字。有限的集合（几百个字符）也可以写成实体引用[，](http://www.w3.org/TR/REC-html40/sgml/entities.html)`&ndash;`如真正的 XHTML）。

引用`&#145;`未定义，尽管 HTML5 草案有严格定义的[错误处理](http://www.w3.org/TR/html5/tokenization.html#tokenizing-character-references)，将其映射到左单引号（浏览器通常这样做）。没有理由使用它，但是一些 HTML 生成软件会发出这样的引用。

# sql-server - 在存储过程中调试查询

> ID：13382953
> 
> 赞同：4
> 
> 时间：2012-11-14T16:30:29.447
> 
> 标签：sql-server, sql-server-2008, debugging, stored-procedures

考虑这个存储过程。程序的实际内容无关紧要，我只是为了示例而使用它：

```
CREATE PROCEDURE [dbo].[temp]
      @value1 varchar(50),
      @value2 varchar(50),
      @value3 varchar(50)
as      
begin
    Select *
    From valuesTable (nolock)
          inner join valuesTable2 RL (nolock)
                on (ValuesTable.ID = RL.RuleId and RL.Type = 'Something')     
    where @value1 = ValuesTable.RuleVal02
    and cast(@value2 as float) > cast(ValuesTable.RuleVal03 as float) and cast(@value2 as float) < cast(ValuesTable.RuleVal04 as float)
    --and (@value3 = ValuesTable.RuleVal05)
    and (@value3 = ValuesTable.RuleVal05 or ValuesTable.RuleVal05 = -1)
end 
```

现在想象这个（不是很复杂的功能）不起作用。我已经知道如何从 Visual Studio 和 SQL Server Management Studio 调试它，但是，这两种情况都缺乏：

这个函数的主要失败点是它执行的大查询。然后我想做的是获取这个查询，将它复制到一个新的查询窗口并开始执行它并通过修改它的各个部分来调试它。

调试该查询的基本方法是将其复制到新的查询窗口，从执行代码中获取参数，然后手动将所有参数替换`@variables`为其实际值。这行得通，但对我来说似乎是一项非常不必要的工作，理想情况下我想获取查询，因为它是在服务器上执行的 - 使用文字值而不是参数，例如：

```
where 'actualValue' = ValuesTable.RuleVal02
and cast(4.2 as float) > cast(ValuesTable.RuleVal03 as float) and cast(4.2 as float) < cast(ValuesTable.RuleVal04 as float)... 
```

因为这听起来像是我只能通过分析器才能实现的东西，所以我启动了它。然后我将事件配置为捕获`SP:StmtStarting`事件，以查看从存储过程执行的语句。然而，令我惊讶的是，我在分析器中看到的语句仍然显示它们的参数，而不是实际的文字值。

有没有一种方法可以轻松复制在存储过程中执行的实际查询，并将参数替换为参数的文字值？探查器中是否有这样做的标志？还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:25:43.493

试试这个简单的工作流程（需要 5 秒）：

1.  运行 SSMS。
2.  在对象资源管理器窗口中找到您的存储过程。
3.  右键单击它以显示上下文菜单并从中选择“执行存储过程...”。
4.  在显示的表格中设置所有参数值。
5.  SSMS 在新的查询选项卡中为您生成脚本（请参阅此答案末尾的脚本）。
6.  保存此脚本以供进一步使用。
7.  运行 Debug -> Start Debugging this script 然后 Step Into EXEC 语句。
8.  更改参数值并运行下一个调试。

```
DECLARE @return_value int

EXEC    @return_value = [dbo].[temp]
        @value1 = N'1',
        @value2 = N'2',
        @value3 = N'3'

SELECT  'Return Value' = @return_value
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:52:53.057

您可以在变量中编写查询，使用占位符而不是实际值，在运行时替换占位符并使用 sp_executesql 执行它

显然，这只是出于调试目的而不是在生产中应该做的事情；）

这是一个例子：[http ://sqlfiddle.com/#!3/c8c43/5](http://sqlfiddle.com/#!3/c8c43/5)

在那里，您的查询在变量内填充了实际内容

# java - 如果脚本位于不同的目录中，则 ant 不会使用 exec 标记运行 Shell 脚本

> ID：13382954
> 
> 赞同：1
> 
> 时间：2012-11-14T16:30:34.627
> 
> 标签：java, android, ant

这是我的 ant 脚本中无法正常工作的部分。

```
<exec executable="/bin/bash">
    <arg value="../libraries/android-mapviewballoons/android-mapviewballoons/mapimports.sh" />
    <arg value="a"/>
</exec>
<exec executable="/bin/bash">
    <arg value="mapimports.sh"/>
    <arg value="a"/>
</exec> 
```

第一个脚本永远不会运行，但第二个脚本运行良好。不返回任何错误。我已经尝试手动运行这两个脚本并且它们可以工作。

有谁知道我如何调试它或使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:58:51.727

我得到了类似的运行：

```
<exec executable="bash" dir="./pathToScript/" >
    <arg value="script.sh" />
    <arg value="param" />
</exec> 
```

# ajax - 在 Magento 中区分会话

> ID：13382955
> 
> 赞同：1
> 
> 时间：2012-11-14T16:30:37.400
> 
> 标签：ajax, magento, session, login

我遇到了麻烦，我相信答案很简单，但我还没有找到。我的问题：

我正在为 Magento EE 1.9.1.1 构建一个 AJAX 登录，并且我已经完成了它，但是它没有将`customer/session`and分开`core/session`。除了购物车，这没什么大不了的。现在发生的情况是，当客户登录时，购物车中的商品按预期转移到客户会话中，但是，在注销时，商品仍留在购物车中——然后，如果我要从购物车中删除商品并重新-登录 客户会话中缺少该项目。完整的登录代码如下：

如果有帮助，我找到了这个线程：[StackOverflow](https://stackoverflow.com/questions/12730057/magento-ajax-login-session-issues)，但不明白。

简单地说，我通过 POST 将用户名和密码传递给以下 login.php

```
Mage::getSingleton('core/session', array('name'=>'frontend'));

if ($_POST['logout'] == "true"){
    Mage::getSingleton('customer/session')->logout();
    echo "Logged out successfully!";
}

else {
/**
 * Login post action
 */

    require_once($_SERVER['DOCUMENT_ROOT'] . "/app/code/core/Mage/Customer/controllers/AccountController.php");
    class Ns_Mylogin_AccountController extends Mage_Customer_AccountController{

    public function loginPostAction()
    {
        $result["error"]=0;

        $session = $this->_getSession();        

        if (!empty($_POST['username']) && !empty($_POST['password'])) {
            try {
                $session->login($_POST['username'], $_POST['password']);
                if ($session->getCustomer()->getIsJustConfirmed()) {
                    $this->_welcomeCustomer($session->getCustomer(), true);

                }
            } catch (Mage_Core_Exception $e) {
                switch ($e->getCode()) {
                    case Mage_Customer_Model_Customer::EXCEPTION_EMAIL_NOT_CONFIRMED:
                        $result["error"]=1;
                        $message = Mage::helper('customer')->__('This account is not confirmed. <a href="%s">Click here</a> to resend confirmation email.', Mage::helper('customer')->getEmailConfirmationUrl($login['username']));
                        break;
                    case Mage_Customer_Model_Customer::EXCEPTION_INVALID_EMAIL_OR_PASSWORD:
                        $result["error"]=1;
                        $message = $e->getMessage();
                        break;
                    default:
                        $result["error"]=1;
                        $message = $e->getMessage();
                }
                $session->setUsername($_POST['username']);

            } catch (Exception $e) {
                // Mage::logException($e); // PA DSS violation: this exception log can disclose customer password
            }
            if(!$message || $message == '') {
                echo "Successful login!";
                }
            else{
                    echo $message;            
                    }            
        } 
        else {
            echo "Login and password are required!";
        }

}

}

$loginObject = new Ns_Mylogin_AccountController();
$loginObject->loginPostAction();
}
?> 
```

正如我所提到的，登录/注销效果很好，就购物车而言，它只是没有正确处理会话。将这些会话分开的任何帮助将不胜感激！

# c# - EF5 ObjectContext：如何替换 IQueryable .Include(Path) with context.T.Attach()

> ID：13382957
> 
> 赞同：14
> 
> 时间：2012-11-14T16:30:39.097
> 
> 标签：c#, entity-framework, reflection

我在一个相对大而复杂的数据模型上使用 Entity Framework 5 和 ObjectContext。我想解决链接多个 IQueryable.Include(Path) 以急切加载相关对象时生成的大查询。

例如，我正在做这样的事情：

```
var queryPe = context.Person.Where(p => p.Id == 110).Include(@"AA");
queryPe = queryPe.Include(@"BB.CC.DD");
queryPe = queryPe.Include(@"EE.FF"); 
```

它可以通过使用字符串数组并在运行时在 foreach 循环中链接每个图来使其通用。

相反，我想做这样的事情：

```
Person pe = context.Person.Where(p => p.Id == 110).First();
context.LoadProperty(pe, "AA");
pe.BB.Attach(pe.BB.CreateSourceQuery().Include(@"CC.DD"));
pe.EE.Attach(pe.EE.CreateSourceQuery().Include(@"FF")); 
```

我们将有 4 个较小的查询访问数据库，而不是一个大查询。当然，我仍然想利用图形路径作为字符串的力量。

我可能错了，但这意味着我应该使用 relexion 按名称获取导航属性并在其上执行 CreateSourceQuery()，因为没有这样的扩展方法可以做到这一点。

我对么 ？

**编辑 1**：嗯，我有一个附加约束，也就是说，我正在使用自我跟踪实体 (STE)。这意味着相关对象没有具体化为 EntityCollection 或 EntityReference。所以 Attach() 和 CreateSourceQuery() 不可用！

所以我坚持使用 Context.LoadProperty 来处理对象图。只有可能吗？

**编辑 2**：在DbContext 类的帮助下，**编辑 1中暴露的问题得到了解决。**请参阅下面的代码：

```
Person pe = context.Person.Where(p => p.Id == 110).First();
context.LoadProperty(pe, "AA");
DbContext dbc = new DbContext(context, false);
dbc.Entry(pe).Collection(@"BB").Query().Include(@"CC.DD").Load();
dbc.Entry(pe).Reference(@"EE").Query().Include(@"FF").Load(); 
```

**编辑 3 02/11/2013**：上面提供的代码存在问题（编辑 2）。如果路径中的最后一个实体是引用而不是集合，则代码不会失败但不会加载:-(

**编辑 4**：现在我没有使用反射，而是在 T4 模板的帮助下通过查看实体数据模型来生成代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:45:24.383

有时存储过程是最好的。编写一个返回多个结果集的存储过程，每个结果集对应于您希望急切加载的每种类型的实体。与您要完成的任务相比，这是*高性能*的，并且存储过程将比每个引用/集合的包含和单独加载语句的混乱更具可读性。是的，EF 会自动连接相关实体！

以下是 EDMX 和代码优先的具有多个结果集的存储过程的参考：

[http://msdn.microsoft.com/en-us/data/jj691402.aspx](http://msdn.microsoft.com/en-us/data/jj691402.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:49:39.043

尝试在多个上下文中分离您的聚合。每个有界上下文都应该有一个单独的上下文。通过这种方式，您可以创建松散耦合的实体框架解决方案。

Julie Lerman 有一个关于这个概念的复数视图的好视频。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T19:49:35.837

我更喜欢使用存储过程。易于维护，工作速度更快等。

# mysql - 得到最期待的mysql

> ID：13382962
> 
> 赞同：-1
> 
> 时间：2012-11-14T16:30:50.757
> 
> 标签：mysql

我的网站就像 imdb 它是一个电影数据库，用户可以将电影添加到那里的等待列表中...我有 2 个表..一个用于存储电影详细信息，另一个用于存储将电影制作到他的等待列表中的人...

```
Movie table : ID,MOVIE NAME,PLOT,RELEASE_DATE,ACTORS
awaiting Table : F_ID(just unique ID),U_ID(user id),MOVIE_ID(same as first tables ID) 
```

现在我需要获得前 6 名最期待即将上映的电影......

如果在等待表中有 10 个相同的 movie_id 行..我想从第一个表中列出“ID”的电影详细信息（如前 5 部电影）..另一件事是当获取行时电影的发布日期应该大于今天的日期..不想显示发布日期是否小于今天的日期..这意味着只需要显示即将上映的最期待的电影..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T17:00:32.757

如果您只想使用连接，请尝试以下操作：

```
SELECT m.MOVIE_NAME, COUNT(*) as FavoriteCount
FROM Favorites f
INNER JOIN Movie m ON m.ID = f.MOVIE_ID 
WHERE m.RELEASE_DATE > CURDATE()
GROUP BY f.MOVIE_ID
ORDER BY FavoriteCount DESC LIMIT 6; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:43:36.773

我认为这应该让你开始。根据需要进行调整。

```
SELECT * 
FROM Movie,
(
SELECT count(*) as favVotes, movie_ID
FROM Favorites, Movie
WHERE U_ID = [usersID]
AND Favorites.movie_id = Movie.ID
AND RELEASE_DATE > Now()
GROUP BY Movie_ID, U_ID
) favs
WHERE favs.movie_id = Movie.ID
ORDER BY favVoted DESC
LIMIT 5 
```

# c# - 区分 XElement 中的 null 和 string.Empty 值

> ID：13382963
> 
> 赞同：7
> 
> 时间：2012-11-14T16:30:52.037
> 
> 标签：c#, .net, linq-to-xml, xelement

我有两个 XElement 实例：

```
var el1 = new System.Xml.Linq.XElement("xel", null);
var el2 = new System.Xml.Linq.XElement("xel", string.Empty); 
```

`el1`看起来像这样：

```
<xel /> 
```

`el2`看起来像这样：

```
<xel></xel> 
```

然而，两者的`Value`性质**都**等于`string.Empty`。

我可以想出很多技巧来区别于`null`，`string.Empty`但是`XElement`框架中是否有一些内置的东西可以做到这一点，我错过了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:37:20.313

`el1.IsEmpty`将返回 true，另一方面， `el2.IsEmpty`将返回 false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:40:05.180

从[XML 模式标准](http://www.w3.org/TR/xmlschema-1/#xsi_nil)：

> 2.6.2 xsi:nil
> 
> XML Schema：Structures 引入了一种机制，用于发出信号，当一个元素没有内容时，它应该被接受为·有效·，尽管内容类型不需要甚至不一定允许空内容。如果一个元素的属性xsi:nil 的值为true，它可能是没有内容的有效的。如此标记的元素必须为空，但如果相应的复杂类型允许，则可以携带属性。

因此，对您而言，您必须将 xsi 命名空间添加到您的 XmlDocument 中。然后元素看起来像

```
<xel xsi:nil="true" /> 
```

# android - Android：长时间休眠后，AlarmManager 停止更新

> ID：13382967
> 
> 赞同：1
> 
> 时间：2012-11-14T16:30:59.540
> 
> 标签：android, android-service, alarmmanager

我正在使用以下代码每分钟安排一次服务：

```
AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
alarmManager.setRepeating(AlarmManager.RTC, calendar.getTimeInMillis(), 60 * 1000, createFrequentUpdateIntent(context)); 
```

在一段时间内一切正常，但几个小时后我停止接收更新意图。我唤醒电话，等待几分钟，但没有任何反应。

我该如何解决这个问题？

# javascript - 堆叠的 HTML 弹出窗口的可见性

> ID：13382969
> 
> 赞同：1
> 
> 时间：2012-11-14T16:31:01.967
> 
> 标签：javascript, html, css

我正在开发一个 jQuery Backbone.js 网络应用程序。
我有一张带有表格条目的表格。该表具有白色背景。
如果用户选择一个表格条目，则会显示一个模式弹出窗口。为了向用户显示弹出窗口现在处于模态模式，我曾经使用 jQuery UI 斜条纹（ui-widget-overlay）。

但我换了一个替代品。那些条纹对我来说太“引人注目”、“突兀”了。我现在将表格的不透明度更改为 0.5。我更喜欢这个。

现在的问题是我在弹出窗口中有弹出窗口。而且，如果我还更改了第一个弹出窗口的不透明度以向用户显示现在只有第二个弹出窗口在工作，则表格会通过第一个弹出窗口发光。

是否有任何可能性，任何替代方法可以使弹出窗口（div）“变暗”，“变灰”到其外观的一半而不变得透明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:38:29.637

尝试使用 hsla（[看这里](http://css-tricks.com/yay-for-hsla/)）。

```
<style>
#el1 {
    background: red;
     width: 700px;
     height: 700px;
}

#el2 { 
     background-color: hsla(190, 30%, 94%, 0.6); 
     width: 500px;
     height: 500px;
}

#el3 { 
     background: green;
     width: 300px;
     height: 300px;
}
</style>

<div id="el1">
    <div id="el2">
        <div id="el3">

        </div>
    </div>
</div> 
```

在我的代码中，el1 是持有者，根本不透明。然后，el2 作为第一个孩子使用 hsla 来提高透明度。包含的 el3 不再透明，这有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:39:00.387

我将在具有相同尺寸但具有灰色背景颜色且不透明度为 0.75 的 div 顶部添加另一个 div。这应该工作得很好。

**CSS**

```
.inner {
  position: absolute;
}

.fade {
 background: grey;
 opacity: 0.75;
} 
```

**HTML**

```
<div class="outer">
 <div class="inner">content</div>
 <div class="inner fade"></div>
</div>​ 
```

This way you are pretty safe when it comes to cross-browser references. Also you can control the fade by adding an "id" attribute to the fade class and make it go away. This way, you can also make div inactive, as they div inner fade is on top of it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:38:10.020

您可以在页面顶部放置一个玻璃窗格并适当地设置 z-index，以便您的第二个弹出窗口位于其顶部，而其他所有内容都隐藏在其下：

```
#pane {
    position: fixed;
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    top: 0;
    left: 0;
    opacity:0.5;
    z-index: 999;
} 
```

确保您的第二个弹出窗口的 z-index 高于窗格，并且您很好。

# jquery - Javascript onclick 无需点击即可执行

> ID：13382978
> 
> 赞同：3
> 
> 时间：2012-11-14T16:31:41.487
> 
> 标签：jquery

我将 onclicks 附加到具有事件发生时要调用的功能的按钮。在运行页面时，它会继续执行 onclick 的功能而不点击。

```
window.onload=function(){
var recipeCount = 0;
//gets the recipes and puts them in the menu bar #left
//places them in buttons
$.getJSON('recipes.json', function(data) {
       $.each(data.recipe, function(i, f) {
       var yep = "</br> <button type='button' id = '" + f.number + "'>" + f.Name + "</button> </br>";
       $(yep).appendTo("#left");
       recipeCount = recipeCount + 1;

     });//for each recipe

   });//getJSON
//ends recipes to menu
for(var i = 1; i < recipeCount + 1; i++){
    $(i).onclick = clicked(i);
}
$("one").onclick = clicked("one");
};//on load

function clicked(idNum){
    $.getJSON('recipes.json', function(data) {
       $.each(data.recipe, function(i, f) {
       if(idNum == f.number){
        var rec = "</br> <h1> " + f.Name + "</h1> " ;
        $(rec).appendTo("#bigBox");

       }

     });//for each recipe

   });//getJSON
}//clicked 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T16:35:08.657

您直接调用该`clicked()`函数并使其运行，这就是原因。

正确的语法更像是：

```
$('#some-element').click(function(event) {
    // inside click event handler
}); 
```

换句话说，你会想要这样的东西：

```
$('#some-element').click(function(event) {
    clicked('one');
}); 
```

如果您正在寻找原始 JavaScript 样式，那么我相信它会是：

```
$('#some-element')[0].onclick = functionName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T16:35:23.867

第一个`$("one")`是无效的，`$(".one")`如果一个是 CSS 类或者`$("#one")`一个是任何元素的 ID，它应该是有效的。

其次，您应该这样做。

```
$("#one").click(function(event) {
      clicked("one");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T16:35:37.547

```
clicked(i)   executes the function. 
```

您只需将函数指针关联到它。

```
$(i).onclick = clicked(i); 
```

应该

```
$('#'+ i).on('click' , function() {
     clicked(i);
}); 
```

但这不起作用，因为您似乎在 GETjson中使用了**i的值。**这是一个经典的闭包问题。

```
for(var i = 1; i < recipeCount + 1; i++){
    $('#'+ i).on('click' , function(num) {
        return function() {
                 clicked(num);
        }
    }(i)  
 ); 
```

}

# javascript - HTML 前端安全

> ID：13382980
> 
> 赞同：0
> 
> 时间：2012-11-14T16:31:41.840
> 
> 标签：javascript, jquery, html, ajax

今天我在我的 Web 应用程序中发现了一个安全漏洞（如果在其他地方提到了这一点，请原谅我，因为我无法在 SO 上找到它）。考虑这段代码：

```
<html>
    <head>
        <script>
            intv = setTimeout(function(){test()} , 10000);
            function test(){
                val = document.getElementById('tt').value;
                alert(val);
                intv = setTimeout(function(){test()} , 10000);
            }
        </script>
    </head>
    <body>
       <input type="hidden" value="10" id="tt">
    </body>
</html> 
```

**问题：**

此代码将以 10 秒的间隔提醒输入字段的值。在第一次警告后，我通过查看其源代码来更改浏览器中的输入字段值。它会提醒我稍后添加的值，这对我不利。

**现实生活场景：**

我有一个虚拟教室，学生和老师都参加了课堂会议。我每 5 秒发送一次 ajax 请求以更新后端的课程`+5`持续时间，并在 db 中添加持续时间字段，稍后学生必须根据他们在课堂上花费的持续时间向我们付款。恐怕如果任何聪明的人只是在浏览器中编辑源代码，而不是在 5 秒后发送请求，他改为 1 小时（为了争论）来欺骗我的逻辑。如何防止客户端的任何非法活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:49:04.703

只需检测他们提出的每个请求（如果它是虚拟教室，有什么事情发生了吗？），并在他们访问某个地方（数据库）时在服务器端保存。有一个会话开始和结束的表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:51:59.523

您无法阻止用户更改 JavaScript 值。

相反，您应该验证服务器上的输入。

在这种情况下，正如评论中所建议的，您应该使用服务器时间记录开始和结束时间。

# database - 为模型生成统计信息 - 方法

> ID：13382985
> 
> 赞同：1
> 
> 时间：2012-11-14T16:32:03.373
> 
> 标签：database, django, statistics

我一直想知道如何为在线商店生成模型的详细统计信息（售出的产品数量、订单数量等）。

我应该使用典型的查询集生成这些统计信息，还是应该创建一些 cron 命令来将数据收集到其他新创建的模型中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:40:29.983

取决于您的数据库有多大，以及统计数据的更改频率。

如果它不是那么大，您可以自由使用查询集并创建适当的索引，并使用一些缓存机制，这样您就不必再次进行相同的查询。

但是如果它是一个非常大的数据库，并且需要大量资源来获取数据，我会创建一些计划任务，或者使用 Django 信号在某些订单发生时收集数据。

另一种选择始终是使用 3rd-party 工具来完成所有这些工作。

# php - JQGrid 不工作

> ID：13382989
> 
> 赞同：1
> 
> 时间：2012-11-14T16:32:25.463
> 
> 标签：php, jquery, jqgrid, xampp

完成安装后不出现网格。我已经检查了所有，所有链接都很好。我已经安装了每个 WIKI 所需的文件。有没有人使用 XAMPP 有问题或成功？当我转到我的网站页面时，我得到一个空白屏幕。我正在使用 json 数据，我已经检查以确保它也是有效的。帮助！

```
<link href="jquery-ui-1.9.1.custom/css/ui-lightness/jquery-ui-1.9.1.custom.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" media="all" href="css/ui.jqgrid.css" />
<link rel="stylesheet" type="text/css" media="all" href="css/ui.multiselect.css" />

<style>
    html, body {
        margin: 0;          /* Remove body margin/padding */
        padding: 0;
        overflow: hidden;   /* Remove scroll bars on browser window */  
        font-size: 75%;
    }
    /*Splitter style */

    #LeftPane {
        /* optional, initial splitbar position */
        overflow: auto;
    }
    /*
     * Right-side element of the splitter.
    */

    #RightPane {
        padding: 2px;
        overflow: auto;
    }
    .ui-tabs-nav li {position: relative;}
    .ui-tabs-selected a span {padding-right: 10px;}
    .ui-tabs-close {display: none;position: absolute;top: 3px;right: 0px;z-index: 800;width: 16px;height: 14px;font-size: 10px; font-style: normal;cursor: pointer;}
    .ui-tabs-selected .ui-tabs-close {display: block;}
    .ui-layout-west .ui-jqgrid tr.jqgrow td { border-bottom: 0px none;}
    .ui-datepicker {z-index:1200;}
    .rotate
        {
            /* for Safari */
            -webkit-transform: rotate(-90deg);

            /* for Firefox */
            -moz-transform: rotate(-90deg);

            /* for Internet Explorer */
            filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
        }

</style>

<script src="jquery-ui-1.9.1.custom/js/jquery-1.8.2.js"></script>
<script src="jquery-ui-1.9.1.custom/js/jquery-ui-1.9.1.custom.js"></script>
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/jquery-ui-custom.min.js" type="text/javascript"></script>
<script src="js/jquery.layout.js" type="text/javascript"></script>
<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>

<script type="text/javascript">
    $.jgrid.no_legacy_api = true;
    $.jgrid.useJSON = true;
</script>

<script src="js/ui.multiselect.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.js" type="text/javascript"></script>
<script src="js/jquery.tablednd.js" type="text/javascript"></script>
<script src="js/jquery.contextmenu.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>

<script type="text/javascript">
    jQuery("#list2").jqGrid(
    {       
      url:'jqgridExample.php',
        datatype: "json",
    colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes', 'test'],
    colModel:[
                        {name:'id',index:'id', width:55},
                        {name:'invdate',index:'invdate', width:90},
                        {name:'name',index:'name asc, invdate', width:100},
                        {name:'amount',index:'amount', width:80, align:"right"},
                        {name:'tax',index:'tax', width:80, align:"right"},      
                        {name:'total',index:'total', width:80,align:"right"},       
                        {name:'note',index:'note', width:150, sortable:false}       
                     ],
   jsonReader : 
   {                     
    rowNum:10,
    rowList:[10,20,30],
    pager: '#pager2',
    sortname: 'id',
    viewrecords: true,
    sortorder: "desc",
    caption:"JSON Example"
  },
    });
    jQuery("#list2").jqGrid('navGrid','#pager2',{edit:false,add:false,del:false});
</script>

<html>
    <head>

    </head>

    <body>
    <table id="list2"></table>
    <div id="pager2"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T17:21:51.510

在您发布的代码中至少可以看到两个非常重要的错误。第一个：你包含了同一个 JavaScript 的**多个**不同版本。这是错误的。例如两行

```
<script src="jquery-ui-1.9.1.custom/js/jquery-1.8.2.js"></script>
<script src="js/jquery.js" type="text/javascript"></script> 
```

插入 jQuery。下一行

```
<script src="jquery-ui-1.9.1.custom/js/jquery-ui-1.9.1.custom.js"></script>
<script src="js/jquery-ui-custom.min.js" type="text/javascript"></script> 
```

插入 jQuery UI。线条

```
<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.js" type="text/javascript"></script> 
```

插入`grid.locale-en.js`。jqGrid 的主要模块也将插入两次

```
<script src="js/jquery.jqGrid.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script> 
```

你应该明白，依赖于你所包含的每个 JavaScript 模块的实现，你可以只有第一个版本的模块工作，只有第二个版本的非工作混合来自相同模块的两个版本。所以你应该只包含**每个 JavaScript 模块一次**。

下一个问题是**您将 jqGrid 的选项包含在错误的位置**。代替

```
jsonReader : 
{                     
    rowNum:10,
    rowList:[10,20,30],
    pager: '#pager2',
    sortname: 'id',
    viewrecords: true,
    sortorder: "desc",
   caption:"JSON Example"
}, 
```

你应该使用

```
jsonReader : {},
rowNum:10,
rowList:[10,20,30],
pager: '#pager2',
sortname: 'id',
viewrecords: true,
sortorder: "desc",
caption:"JSON Example" 
```

您应该指定的值`jsonReader`对应于将从服务器返回的 JSON 数据的格式（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_data)）。

# php - htaccess AddDefaultCharset 不适用于 PHP 文件

> ID：13382991
> 
> 赞同：1
> 
> 时间：2012-11-14T16:32:29.217
> 
> 标签：php, apache, .htaccess, utf-8

我的服务器配置为默认将 Content-type charse header 设置为“ISO-8859-1”，所以我被告知在我的根文件夹中创建一个 .htaccess ，以将字符集更改为 UTF-8 ：

```
AddDefaultCharset utf-8 
```

根文件夹中一切正常，内容类型已更改，但这不适用于 PHP 文件，仅适用于 HTML .. 为什么？我也试过这个：

```
AddCharset UTF-8 .php 
```

但是也不行。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-25T21:24:05.880

# 刚刚处理这个问题

尽管这个问题很老而且可能早就被遗忘了，但我找到了它，其他人可能会，所以这是我的两便士价值：

根据[apache.org 的文档](http://httpd.apache.org/docs/current/mod/core.html#adddefaultcharset)，规定的默认值为：

> …添加到响应当且仅当响应的内容类型是**text/plain**或**text/html**

因此，首先应该检查*PHP*输出是否正确传递`Content-Type`了`text/html`.

其次，确保所有被显式发送并声明自己以*UTF-8*编码的文件实际上都是！
我意识到这对大多数人来说可能是一个*“duh”*，但仍然如此。

至于`AddCharset`失败：是的**！**我还没有弄清楚为什么，但是
添加`AddDefaultCharset`并确保考虑到其他考虑因素已经奏效了。

## 我对提问者的猜测...

...如果`AddDefaultCharset`不适用于*PHP*`text/html`文件，是因为出于某种原因，它们没有被拾取为输出，可能是因为`AddType`同一文件或父`.htaccess`文件中的语句。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T11:29:34.173

您是否尝试在您的`php.ini`:

```
default_charset = "utf-8" 
```

# haskell - GHC 什么时候使用共享？

> ID：13382993
> 
> 赞同：12
> 
> 时间：2012-11-14T16:32:31.073
> 
> 标签：haskell, lazy-evaluation

一个初学者的问题。我对以下内容有点困惑：我读到 GHC（Haskell 的？）惰性评估方法包括使用共享，例如评估表达式

`(1+1)*(1+1)`

只会计算`1+1`一次。在 Graham Hutton 所著的“用 Haskell 编程”一书中，解释说这是通过用`1+1`指向它的一个副本的指针替换出现的两个并仅评估那个副本来实现的。

但是计算第 n 个斐波那契数`fib n = if (n<2) then n else fib (n-1) + fib(n-2)`需要 n 中的指数时间。我对上述内容的理解告诉我，例如`fib 5`将被这样评估：

`fib 5 => fib 4 + fib 3 => fib 3 + fib 2 + fib 3 => x + fib 2 + x`

和`x = fib 3 = fib 2 + fib 1 = y + fib 1`

所以`fib 5 = y + fib 1 + y + y + fib 1`

和`y = fib 2 = fib 1 + fib 0 = 1`

所以`fib 5 = 1 + 1 + 1 + 1 + 1`

其中`x`和`y`被作为共享值引入。

`fib k`但是这种处理方式虽然比迭代生成for的标准方式效率稍低，但`2<=k<=n`显然不会像评估函数那样导致运行时间如此之长。那么我的理解有什么问题呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-14T16:45:37.647

您不能依赖 GHC 中的公共子表达式消除（出于技术原因，因为共享惰性值[会引入空间泄漏](http://www.haskell.org/haskellwiki/GHC:FAQ#Does_GHC_do_common_subexpression_elimination.3F)）。

一个好的经验法则是值是按名称共享的。所以命名你的子表达式，如下所示：

```
 n * n
    where n = 1 + 1 
```

你保证分享。

请注意，在您的简单示例中，GHC 只会在编译时计算整个事情。上面的讨论实际上只适用于“大”数据。

[您可以使用诸如 Vacuum](http://donsbot.wordpress.com/2009/10/11/self-optimizing-data-structures-using-types-to-make-lists-faster/)之类的调试工具来观察共享。此类共享值表示为具有多个引用的堆分配对象：

![在此处输入图像描述](../Images/b1ed21278340712cd53b34be5587dd08.png)

# css - 我可以使用一些帮助来让 CSS 子类（？）工作

> ID：13382995
> 
> 赞同：1
> 
> 时间：2012-11-14T16:32:39.677
> 
> 标签：css, css-selectors

我能在这个 CSS 上得到一点帮助吗？在我的样式表中，我定义了我的锚颜色：

```
a:link {}
a:visited {}
a:hover {} 
```

稍后在样式表中，我有一些在定义为跨度内的锚点：

```
span.logout {}
span.logout a:link, a:visited {}
span.logout a:hover {} 
```

唯一的事情是，我在注销跨度中的锚颜色覆盖了我的主要锚颜色。我很困惑为什么会这样。我认为只有“注销”范围内的锚会受到这个 CSS 的影响。

无论如何，如果有人可以帮助解决这个问题，我将不胜感激。另外，我是否正确使用术语 CSS“子类”？

感谢您花时间阅读，祝您有美好的一天。:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:35:33.100

您的`a:visited`选择器是独立存在的，没有被`span.logout`选择器限定，因为逗号将它分开。换句话说，就好像你有两个这样的规则，具有相同的声明集：

```
span.logout a:link {}
a:visited {} 
```

这具有覆盖您之前的`a:visited`规则的效果，即使对于`span.logout`.

您需要在逗号之后重复选择器，以使其仅在此类元素`span.logout`中生效：`span`

```
span.logout a:link, span.logout a:visited {} 
```

CSS 没有“子类”的概念，因为所有类都被视为相同，但您在这里的使用似乎很好。[我想“子类”一词在OOCSS](http://oocss.org)之类的东西中会有更清晰的定义，但这只是一种 CSS 编码技术。

我将您的选择器称为[上下文选择器](http://www.w3.org/TR/CSS1/#contextual-selectors)，因为您仅将样式应用于元素*上下文*中的已访问链接`span.logout`（从技术上讲，空间分隔`span.logout`并`a:visited`称为[后代组合](http://www.w3.org/TR/selectors/#descendant-combinators)器）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T16:36:27.490

你需要改变：

```
span.logout a:link, a:visited {} 
```

至：

```
span.logout a:link, span.logout a:visited {} 
```

逗号分隔选择器，因此所有`a:visited`链接都以第二组样式为目标