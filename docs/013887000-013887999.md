# StackOverflow 问答 13887000-13887999

# android - Android：如何按类型查找视图

> ID：13887003
> 
> 赞同：17
> 
> 时间：2012-12-14T22:13:40.403
> 
> 标签：android, android-layout

好的，所以我有一个类似于以下示例的布局 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/tile_bg" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingTop="10dp" >

    <LinearLayout
        android:id="@+id/layout_0"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <!-- view stuff here -->
    </LinearLayout>

    <!-- more linear layouts as siblings to this one -->

</LinearLayout> 
```

实际上，我有大约 7 个 LinearLayout 项目，每个项目的 id 从 layout_0 等开始增加。我希望能够掌握根 LinearLayout 下的所有 LinearLayout 项目。我是否需要在根目录上放置一个 id 并通过 id 找到所有其他人，或者我可以按类型获取它们。

我用来膨胀布局的代码是：

```
View view = (View) inflater.inflate(R.layout.flight_details, container, false); 
```

我在某处读到您可以迭代 ViewGroup 的子级，但这只是一个视图。

按类型获得一堆孩子的最佳方法是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-14T22:19:01.483

这应该让你走上正确的轨道。

```
LinearLayout rootLinearLayout = (LinearLayout) findViewById(R.id.rootLinearLayout);
int count = rootLinearLayout.getChildCount();
for (int i = 0; i < count; i++) {
    View v = rootLinearLayout.getChildAt(i);
    if (v instanceof LinearLayout) {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T22:25:12.440

`ViewGroup`如果您知道布局的根元素是任何子类`LinearLayout`或其他布局，则可以安全地将结果视图转换为：

```
ViewGroup vg = (ViewGroup)view; 
```

并根据需要使用。如果您知道您将**始终**只对根容器使用一种类型的布局，则可以强制转换为该类型，即：

```
LinearLayout vg = (LinearLayout)view; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T22:22:20.177

您应该向 LinearLayout 根添加一个 id：

```
<LinearLayout
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingTop="10dp" >

    <LinearLayout
        android:id="@+id/layout_0"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <!-- view stuff here -->
    </LinearLayout>

    <!-- more linear layouts as siblings to this one -->

</LinearLayout> 
```

然后像往常一样膨胀整个布局：

```
View view = (View) inflater.inflate(R.layout.flight_details, container, false); 
```

抓住你的根`LinearLayout`：

```
LinearLayout root = (LinearLayout) view.findViewById(R.id.root);

LinearLayout[] children = new LinearLayout[root.getChildCount()];

for (int i = 0; i < root.getChildCount(); i++) {
    children[i] = (LinearLayout) root.getChildAt(i);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T22:23:33.077

将根视图作为此 DFS 方法的参数传递：

```
private List<LinearLayout> mArr = new ArrayList<LinearLayout>();

private void getLinearLayouts(ViewGroup parent) {
    int childCount = parent.getChildCount();
    for (int i = 0; i < childCount; i++) {
        View child = parent.getChildAt(i);
        if (child instanceof ViewGroup) {
            getLinearLayouts((ViewGroup) child);
            if (child instanceof LinearLayout)
                mArr.add((LinearLayout) child);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-23T14:40:22.390

我只是想添加一个更通用的方法，但您必须记住，这样做是一种繁重的方法。

无论如何，这是代码：

```
private static <T extends View> ArrayList<T> getChildrenOfParentWithClass(ViewGroup parent, Class<T> clazz)
{
    ArrayList<T> children = new ArrayList<>();

    int childCount = parent.getChildCount();
    for (int i = 0; i < childCount; i++)
    {
        View child = parent.getChildAt(i);
        if (child instanceof ViewGroup)
        {
            children.addAll(getChildrenOfParentWithClass((ViewGroup) child, clazz));
            if (child.getClass().equals(clazz))
            {
                children.add((T) child);
            }
        }
    }

    return children;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-12T15:30:32.363

Kotlin 版本的 Mir-Ismaili 回答：

```
fun <T : View> ViewGroup.getViewsByType(tClass: Class<T>): List<T> {
  return mutableListOf<T?>().apply {
    for (i in 0 until childCount) {
      val child = getChildAt(i)
      (child as? ViewGroup)?.let {
        addAll(child.getViewsByType(tClass))
      }
      if (tClass.isInstance(child))
        add(tClass.cast(child))
    }
  }.filterNotNull()
} 
```

例如调用它：`myViewGroup.getViewsByType(EditText::class.java)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-20T15:22:40.067

就像@ChristopheCVB 的回答一样，但也支持继承（参见`tClass.isInstance(child)`）。

```
public static <T extends View> ArrayList<T> getViewsByType(ViewGroup root, Class<T> tClass) {
    final ArrayList<T> result = new ArrayList<>();
    int childCount = root.getChildCount();
    for (int i = 0; i < childCount; i++) {
        final View child = root.getChildAt(i);
        if (child instanceof ViewGroup)
            result.addAll(getViewsByType((ViewGroup) child, tClass));

        if (tClass.isInstance(child))
            result.add(tClass.cast(child));
    }
    return result;
} 
```

* * *

以及一个简单的用法示例：

```
ArrayList<TextView> TextViews = getViewsByType(rootLayout, TextView.class); 
```

* * *

感谢接受的答案。

# asp.net-mvc - 是否可以将其他数据传递给 MVC 中的自定义 RoleProvider？

> ID：13887007
> 
> 赞同：0
> 
> 时间：2012-12-14T22:13:59.623
> 
> 标签：asp.net-mvc, asp.net-mvc-3, roleprovider

我正在实施我的自定义角色提供程序。我需要访问以下函数中的一些附加数据，但我不确定是否可行。有没有办法通过代码实例化 CustomRoleProvider 类并设置一些属性来传递额外的数据？如果不可能，还有哪些其他替代方案可以实现自定义角色管理？感谢您的任何意见。

```
public class CustomRoleProvider : RoleProvider
{
    public override string[] GetRolesForUser(string username)
    { }

    public override bool IsUserInRole(string username, string roleName)
    { }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:27:13.107

您可以使用依赖注入来注入配置依赖。就像是：

```
public class CustomRoleProvider : RoleProvider
{
   [Dependency]    
   public IRoleProviderConfig Config { get; set; }

   public override string[] GetRolesForUser(string username)
   { 
       int value = Config.GetXyz();
   }

   public override bool IsUserInRole(string username, string roleName)
  { }
} 
```

您可以在此处了解有关依赖注入的更多信息：http: [//blogs.microsoft.co.il/blogs/gilf/archive/2010/10/17/dependency-injection-in-mvc-3-was-made-easier.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/10/17/dependency-injection-in-mvc-3-was-made-easier.aspx)

# iphone - SUDO - iOS FTP - 卡住

> ID：13887011
> 
> 赞同：0
> 
> 时间：2012-12-14T22:14:24.200
> 
> 标签：iphone, bash, unix, sudo, su

我在 iOS 中有一个需要 su 的 MobileTerminal 脚本，有什么方法可以将命令添加到 bash 脚本中以 root 身份登录，而无需输入 su 然后输入密码？

干杯，

十二月

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:18:57.417

SUDO 和系统功能在 iOS 中是不允许的，它们违反了沙盒和安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T14:09:20.323

这就是对我有用的解决方案：

1.  越狱
2.  从 Cydia 安装 sudo
3.  从 Cydia 安装 OpenSSH
4.  SSH 到你的 iPhone

    ```
    $ssh root@<your iphone ip>
    Password: alpine //no echo 
    ```

    并运行

    ```
    iPhone:~ root# visudo 
    ```

    之后立即添加

    ```
    root    ALL=(ALL) ALL 
    ```

    这条线（你想要的不同）

    ```
    mobile  ALL=(ALL) ALL 
    ```

5.  保存更改。现在你可以了`sudo`。为了与您一起编辑，`visudo`应该使用类似的控件`vi`
6.  毕竟`sudo`像这样添加到你的脚本硬编码调用

    ```
    #!/bin/bash
    sudo -S -p "" echo -n "" <<!
    alpine
    !
    sudo echo "This line is printed as root" 
    ```

    现在解释：

    *   `-S`允许从块中读取密码`<<!\n ... \n!`，它应该打印在单行上
    *   `-p ""`禁止密码提示，因此`Password:`不打印该行
    *   `echo -n`最后不允许换行符

所以你可以`sudo`在你的脚本中没有任何密码提示。唯一的事情 - 在这种方法中，密码是硬编码的。但是您可以尝试像 $1 这样的命令行参数（未经测试，只是一个想法）

# plot - 在散点图中绘制最小二乘线

> ID：13887013
> 
> 赞同：2
> 
> 时间：2012-12-14T22:14:41.203
> 
> 标签：plot, pandas, scatter

用熊猫创建了散点图。我不知道如何创建与点最小平方的回归线。[在http://matplotlib.org](http://matplotlib.org)中寻找示例我没有找到任何类似的图表。

非常感谢你提前！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T01:39:41.610

Pandas 有一个[普通的最小二乘 ( `ols`)函数，在](http://pandas.pydata.org/pandas-docs/dev/computation.html#standard-ols-regression)[0.10.1 文档](http://pandas.pydata.org/pandas-docs/version/0.10.1/computation.html#standard-ols-regression)中有一个非常详细的示例说明如何绘制结果，这是一个片段：

```
model = ols(y=rets['AAPL'], x=rets.ix[:, ['GOOG']], window=250)
# just plot the coefficient for GOOG
model.beta['GOOG'].plot() 
```

![在此处输入图像描述](../Images/d51e3d0f012dbe36d5aa35beeca4a8c4.png)

*注意：此示例不再在文档中（自 0.10.1 起），我不知道为什么。*

# perl - 使用 HTML::Template 模块的问题

> ID：13887015
> 
> 赞同：0
> 
> 时间：2012-12-14T22:14:55.680
> 
> 标签：perl, cgi

我无法在 CGI 中执行 HTML::Template 函数。

我正在学习在这里找到的一个简单教程：http: [//metacpan.org/pod/HTML ::Template](http://metacpan.org/pod/HTML::Template)

我在我的服务器上的主路径中创建了一个新文件[test.tmpl](http://csvlife.com/test.tmpl)。

我创建了一个名为 frt.cgi 的新文件 ...（这是这里的问题吗？应该是不同的文件扩展名吗？？）

```
#!/usr/local/bin/perl -w
use HTML::Template;

# open the html template
my $template = HTML::Template->new(filename => '/test.html');

# fill in some parameters
$template->param(HOME => $ENV{HOME});
$template->param(PATH => $ENV{PATH});

# send the obligatory Content-Type and print the template output
print "Content-Type: text/html\n\n", $template->output; 
```

我修改了第一行以反映我的主机为 perl 提供的程序路径。我不知道 -w 是什么我只知道我在有和没有它的情况下都试过了。我也尝试过像这样更改代码：

```
use warnings;
use strict;
use CGI qw(:standard);
use HTML::Template; 
```

我已经搜索过...
[https://stackoverflow.com/search?q=HTML%3A%3ATEMPLATE+&submit=search](https://stackoverflow.com/search?q=HTML%3A%3ATEMPLATE+&submit=search)
[https://stackoverflow.com/search?q=HTML%3A%3ATEMPLATE](https://stackoverflow.com/search?q=HTML%3A%3ATEMPLATE)
[https://stackoverflow .com/search?q=HTML%3A%3ATEMPLATE+PERL&submit=search](https://stackoverflow.com/search?q=HTML%3A%3ATEMPLATE+PERL&submit=search)

然而我仍然没有看到答案。我什至在 google 上搜索 .TMPL 编码，因为我认为可能需要一些特殊类型。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:20:14.763

如果您查看服务器日志，您可能会看到如下错误消息：

```
HTML::Template->new() : Cannot open included file /test.html : file not found. 
```

您需要提供*文件系统上*的路径，而不是相对于生成文档的 URI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:41:39.683

首先，您可能指定了错误的路径 - 将 /test.html 更改为 test.html。此外，您的系统中可能没有 $ENV{HOME} 变量，因此将标志 die_on_bad_params 设置为 0：

```
my $template = HTML::Template->new(
filename => 'test.html',
die_on_bad_params => 0,
); 
```

另外，不要忘记通过 chmod 755 将您的 Perl 文件标记为可执行文件。

选项 -w 使 Perl 启用警告，因此没有必要再写`use warnings;`。您可以使用模块 B::Deparse 检查 Perl 命令行选项的作用，如下所示（$^W 变量禁用/启用警告）：

```
perl -w -MO=Deparse -e "print;" 
```

这将打印：

```
BEGIN { $^W = 1; }
print $_; 
```

# ios - CATransform3D 动画集 X 轴

> ID：13887016
> 
> 赞同：0
> 
> 时间：2012-12-14T22:14:58.223
> 
> 标签：ios, cocoa

我有一个 CATransform3D 动画，旨在替换我的应用程序中当前使用的 Push 动画。目前，它像 X 轴在图层/视图的中心一样旋转。但是，我希望 X 轴位于屏幕边缘，以便它翻转出屏幕。我目前的代码是： -

```
 [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    CATransform3D rotationAndPerspectiveTransform = CATransform3DIdentity;
    rotationAndPerspectiveTransform.m34 = 1.0 / 500;
    rotationAndPerspectiveTransform = CATransform3DRotate(rotationAndPerspectiveTransform, 1.57, 0, 1, 0);
    self.view.layer.transform = rotationAndPerspectiveTransform;
    [UIView commitAnimations]; 
```

我是 Core Graphics 等的新手，所以我将不胜感激任何指针，提示，我出错的地方！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:32:54.317

您应该更改`anchorPoint`图层的。在方法之前使用以下代码`beginAnimations:context:`。

```
CGRect frame = self.view.layer.frame;
self.view.layer.anchorPoint = CGPointMake(1.f, 0.5f);
self.view.layer.frame = frame; 
```

这将在`anchorPoint`不改变图层位置的情况下更改图层的。旋转动画将围绕从锚点经过的轴完成。

# xslt - ContentQueryMain.xsl 中的 muenchian 分组

> ID：13887017
> 
> 赞同：2
> 
> 时间：2012-12-14T22:15:06.350
> 
> 标签：xslt, sharepoint-2010, grouping, xslt-1.0, content-query-web-part

我是 Sharepoint 2010 的新手，我不得不处理 ContentQueryMain.xsl ，我几乎不明白那里发生了什么以及哪些部分在哪里。我需要按类别对结果进行分组，然后按类别和问题对它们进行排序。我用空白的 XSL 和 muenchian 分组成功地做到了这一点，但在 CQWP 上我只得到了一个组的实例。这是我的 XML：

```
<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type="text/xsl" href="XslFaq.xslt"?>

<dsQueryResponse>
<Rows>
  <Rows
      Row="שאלה נפוצה שאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצה?"
      answer="כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהיתשובה כלשהיתשובה כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהי"
      ExtraInfo=""
      Download=""
      Category="קטגוריה1"
      FreqRow="1"
    />

  <Rows
       Row="שאלה נפוצה שאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצה?"
       answer="כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהיתשובה כלשהיתשובה כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהי"
       ExtraInfo="http://www.w3schools.com"
       Download=""
       Category="קטגוריה1"
       FreqRow="1"
    />

  <Rows
      Row="שאלה נפוצה שאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצה?"
      answer="כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהיתשובה כלשהיתשובה כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהי"
      ExtraInfo="http://www.microsoft.com"
      Download="http://www.mekusharim.co.il"
      Category="קטגוריה1"
      FreqRow="0"
    />

  <Rows
     Row="שאלה נפוצה שאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצה?"
     answer="כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהיתשובה כלשהיתשובה כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהי"
     ExtraInfo="http://www.walla.co.il"
     Download=""
     Category="עוד קטגוריה"
     FreqRow="1"
    />

  <Rows
         Row="שאלה נפוצה שאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצה?"
         answer="כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהיתשובה כלשהיתשובה כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהי"
         ExtraInfo="http://www.jquery.com"
         Download=""
         Category="עוד קטגוריה"
         FreqRow="0"
    />
  <Rows
        Row="שאלה נפוצה שאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצה?"
        answer="כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהיתשובה כלשהיתשובה כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהי"
        ExtraInfo="http://www.jquery.com"
        Download="http://www.beatles.com"
        Category="עוד קטגוריה"
        FreqRow="1"
    />
  <Rows
        Row="שאלה נפוצה שאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצה?"
        answer="כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהיתשובה כלשהיתשובה כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהי"
        ExtraInfo="http://www.jquery.com"
        Download=""
        Category="יש עוד"
        FreqRow="1"
    />
  <Rows
          Row="שאלה נפוצה שאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצה?"
          answer="כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהיתשובה כלשהיתשובה כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהי"
          ExtraInfo="http://www.jquery.com"
          Download="http://www.pais.co.il"
          Category="אהקטגוריה"
          FreqRow="1"
    />
  <Rows
         Row="שאלה נפוצה שאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצהשאלה נפוצה?"
         answer="כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהיתשובה כלשהיתשובה כלשהי תשובה כלשהי תשובה כלשהי תשובה כלשהי"
         ExtraInfo="http://www.3school.com"
         Download="http://www.adleron.site.co.il"
         Category="אהקטגוריה"
         FreqRow="0"
          />
<Rows>
</dsQueryResponse> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-13T01:24:35.997

> 我只得到一个类别的结果 - 如果我对同一类别有更多问题，它将不会显示

使用以下过程：

*   创建一个`xsl:key`
*   设置以下属性：`match="Rows" use="Category"`
*   在循环中引用匹配，例如`xsl:for-each select="Rows"
*   引用嵌套循环中的键，例如`xsl:for-each select="key('groupByRow', Category)"`

**参考**

*   [xsl 分组和 Muenchian 方法问题](http://www.biglist.com/lists/xsl-list/archives/200101/msg00070.html)

*   [XSLT 1.0 中的高效递归分组？](http://www.biglist.com/lists/xsl-list/archives/200403/msg00619.html)

*   [过滤/删除真正重复的元素](http://www.biglist.com/lists/xsl-list/archives/200707/msg00437.html)

# genetic-algorithm - 为什么我的遗传算法很糟糕（为什么不收敛）？

> ID：13887018
> 
> 赞同：3
> 
> 时间：2012-12-14T22:15:07.450
> 
> 标签：genetic-algorithm

我用遗传算法写了一个快速实验。它只需要一个正方形网格并尝试改变它们的颜色以使它们全部变黄。它惨遭失败，我似乎无法弄清楚为什么。我已经包含了一个指向 JSFiddle 的链接，该链接演示了工作代码，以及完整的代码副本。

[http://jsfiddle.net/mankyd/X6x9L/](http://jsfiddle.net/mankyd/X6x9L/)

```
<!DOCTYPE html>
<html lang="en">
    <head>
    </head>
    <body>
        <div class="container">
            <h1>The randomly flashing squares <i>should</i> be turning yellow</h1>
            <div class="row">
                <canvas id="input_canvas" width="100" height="100"></canvas>
                <canvas id="output_canvas" width="100" height="100"></canvas>
            </div>
            <div class="row">
                <span id="generation"></span>
                <span id="best_fitness"></span>
                <span id="avg_fitness"></span>
            </div>
        </div>
    </body>
</html> 
```

请注意，下面的 javascript 在一些地方依赖于 jquery。

```
// A bit of code that draws several squares in a canvas
// and then attempts to use a genetic algorithm to slowly
// make those squares all yellow.

// Knobs that can be tweaked
var mutation_rate = 0.1; // how often should we mutate something
var crossover_rate = 0.6; // how often should we crossover two parents
var fitness_influence = 1; // affects the fitness's influence over mutation
var elitism = 1; // how many of the parent's generation to carry over
var num_offspring = 20; // how many spawn's per generation
var use_rank_selection = true; // false == roulette_selection

// Global variables for easy tracking
var children = []; // current generation
var best_spawn = null; // keeps track of our best so far
var best_fitness = null; // keeps track of our best so far
var generation = 0; // global generation counter
var clear_color = 'rgb(0,0,0)';

// used for output
var $gen_span = $('#generation');
var $best_fit = $('#best_fitness');
var $avg_fit = $('#avg_fitness');
var $input_canvas = $('#input_canvas');
var input_ctx = $input_canvas[0].getContext('2d');
var $output_canvas = $('#output_canvas');
var output_ctx = $output_canvas[0].getContext('2d');

// A spawn represents a genome - a collection of colored
// squares.
var Spawn = function(nodes) {
    var _fitness = null; // a cache of our fitness
    this.nodes = nodes; // the squares that make up our image

    this.fitness = function() {
        // fitness is simply a function of how close to yellow we are.
        // This is defined through euclidian distance. Smaller fitnesses
        // are better.

        if (_fitness === null) {
            _fitness = 0;
            for (var i = 0; i < nodes.length; i++) {
                _fitness += Math.pow(-nodes[i].color[0], 2) + 
                            Math.pow(255 - nodes[i].color[1], 2) +
                            Math.pow(255 - nodes[i].color[2], 2);
            }
            _fitness /= 255*255*3*nodes.length; // divide by the worst possible distance
        }

        return _fitness;
    };

    this.mutate = function() {
        // reset our cached fitness to unknown
        _fitness = null;

        var health = this.fitness() * fitness_influence;
        var width = $output_canvas[0].width;
        var height = $output_canvas[0].height;

        for (var i = 0; i < nodes.length; i++) {
            // Sometimes (most times) we don't mutate
            if (Math.random() > mutation_rate) {
                continue;
            }

            // Mutate the colors. 
            for (var j = 0; j < 3; j++) {
                // colors can move by up to 32 in either direction
                nodes[i].color[j] += 64 * (.5 - Math.random()) * health;
                // make sure that our colors stay between 0 and 255
                nodes[i].color[j] = Math.max(0, Math.min(255, nodes[i].color[j]));
            }
        }
    };

    this.draw = function(ctx) {
        // This draw function is a little overly generic in that it supports
        // arbitrary polygons.
        ctx.save();
        ctx.fillStyle = clear_color;
        ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);
        for (var i = 0; i < nodes.length; i++) {
            ctx.fillStyle = 'rgba(' + Math.floor(nodes[i].color[0]) + ',' + Math.floor(nodes[i].color[1]) + ',' + Math.floor(nodes[i].color[2]) + ',' + nodes[i].color[3] + ')';
            ctx.beginPath();
            ctx.moveTo(nodes[i].points[0][0], nodes[i].points[0][1]);
            for (var j = 1; j < nodes[i].points.length; j++) {
                ctx.lineTo(nodes[i].points[j][0], nodes[i].points[j][1]);
            }
            ctx.fill();
            ctx.closePath();
        }
        ctx.restore();
    };
};

Spawn.from_parents = function(parents) {
    // Given two parents, mix them together to get another spawn
    var nodes = [];
    for (var i = 0; i < parents[0].nodes.length; i++) {
        if (Math.random() > 0.5) {
            nodes.push($.extend({}, parents[0].nodes[i]));
        }
        else {
            nodes.push($.extend({}, parents[1].nodes[i]));
        }
    }
    var s = new Spawn(nodes);
    s.mutate();

    return s;
};

Spawn.random = function(width, height) {
    // Return a complete random spawn.
    var nodes = [];
    for (var i = 0; i < width * height; i += 10) {
        var n = {
            color: [Math.random() * 256, Math.random() * 256, Math.random() * 256, 1],
            points: [
                [i % width, Math.floor(i / width) * 10],
                [(i % width) + 10, Math.floor(i / width) * 10],
                [(i % width) + 10, Math.floor(i / width + 1) * 10],
                [i % width, Math.floor(i / width + 1) * 10],
                ]
        };
        nodes.push(n);
    }
    return new Spawn(nodes);
};

var select_parents = function(gene_pool) {
    if (use_rank_selection) {
        return rank_selection(gene_pool);
    }
    return roulette_selection(gene_pool);
};

var roulette_selection = function(gene_pool) {
    var mother = null;
    var father = null;
    gene_pool = gene_pool.slice(0);
    var sum_fitness = 0;
    var i = 0;
    for (i = 0; i < gene_pool.length; i++) {
        sum_fitness += gene_pool[i].fitness();
    }
    var choose = Math.floor(Math.random() * sum_fitness);
    for (i = 0; i < gene_pool.length; i++) {
        if (choose <= gene_pool[i].fitness()) {
            mother = gene_pool[i];
            break;
        }
        choose -= gene_pool[i].fitness();
    }
    // now remove the mother and repeat for the father
    sum_fitness -= mother.fitness();
    gene_pool.splice(i, 1);
    choose = Math.floor(Math.random() * sum_fitness);
    for (i = 0; i < gene_pool.length; i++) {
        if (choose <= gene_pool[i].fitness()) {
            father = gene_pool[i];
            break;
        }
        choose -= gene_pool[i].fitness();
    }
    return [mother, father];
};

var rank_selection = function(gene_pool) {
    gene_pool = gene_pool.slice(0);
    gene_pool.sort(function(a, b) {
        return b.fitness() - a.fitness();
    });

    var choose_one = function() {
        var sum_fitness = (gene_pool.length + 1) * (gene_pool.length / 2);
        var choose = Math.floor(Math.random() * sum_fitness);
        for (var i = 0; i < gene_pool.length; i++) {
            // figure out the sume of the records up to this point. if we exceed
            // our chosen spot, we've found our spawn.
            if ((i + 1) * (i / 2) >= choose) {
                return gene_pool.splice(i, 1)[0];
            }
        }

        return gene_pool.pop(); // last element, if for some reason we get here
    };

    var mother = choose_one();
    var father = choose_one();
    return [mother, father];
};

var start = function() {
    // Initialize our first generation
    var width = $output_canvas[0].width;
    var height = $output_canvas[0].height;

    generation = 0;
    children = [];
    for (var j = 0; j < num_offspring; j++) {
        children.push(Spawn.random(width, height));
    }

    // sort by fitness so that our best comes first
    children.sort(function(a, b) {
        return a.fitness() - b.fitness();
    });
    best_spawn = children[0];
    best_fitness = best_spawn.fitness();
    best_spawn.draw(output_ctx);
};

var generate = function(spawn_pool) {
    // generate a new set of offspring
    var offspring = [];
    for (var i = 0; i < num_offspring; i++) {
        var parents = select_parents(spawn_pool);
        // odds of crossover decrease as we get closer
        if (Math.random() * best_fitness < crossover_rate) {
            var s = Spawn.from_parents(parents);
        }
        else {
            // quick hack to copy our mother, with possible mutation
            var s = Spawn.from_parents([parents[0], parents[0]]);
        }
        offspring.push(s);
    }
    // select a number of best from the parent pool (elitism)
    for (var i = 0; i < elitism; i++) {
        offspring.push(spawn_pool[i]);
    }

    // sort our offspring by fitness (this includes the parents from elitism). Fittest first.
    offspring.sort(function(a, b) {
        return a.fitness() - b.fitness();
    });
    // pick off the number that we want
    offspring = offspring.slice(0, num_offspring);
    best_spawn = offspring[0];
    best_fitness = best_spawn.fitness();
    best_spawn.draw(output_ctx);
    generation++;

    return offspring;
};

var average_fitness = function(generation) {
    debugger;
    var a = 0;
    for (var i = 0; i < generation.length; i++) {
        a += generation[i].fitness();
    }
    return a / generation.length;
};

//Draw yellow and then initialize our first generation
input_ctx.fillStyle = 'yellow';
input_ctx.fillRect(0, 0, input_ctx.canvas.width, input_ctx.canvas.height);
start();

// Our loop function. Use setTimeout to prevent things from freezing
var gen = function() {
    children = generate(children);
    $gen_span.text('Generation: ' + generation);
    $best_fit.text('Best Fitness: ' + best_fitness);
    $avg_fit.text('Avg. Fitness: ' + average_fitness(children));
    if (generation % 100 === 0) {
        console.log('Generation', generation);
        console.log('Fitness', best_fitness);
    }
    setTimeout(gen, 1);
};
gen();​ 
```

我已经对代码进行了注释，以尝试使解析变得容易。基本思想很简单：

1.  从当前一代中选择 1 个或 2 个父母
2.  把那一两个父母混在一起
3.  稍微改变结果并将其添加到下一代
4.  选择最好的少数父母（示例中的 1 个）并将它们添加到下一代
5.  对 N 个结果进行排序和分割，并将它们用于下一代（可能是父母和后代的混合体）
6.  冲洗并重复

输出永远不会接近黄色。它很快陷入一种看起来很糟糕的稳定状态。我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T14:11:03.153

解决了。它在“from_parents”方法中：

```
 if (Math.random() > 0.5) {
        nodes.push($.extend({}, parents[0].nodes[i]));
    }
    else {
        nodes.push($.extend({}, parents[1].nodes[i]));
    } 
```

`$.extend()`正在做一个浅拷贝。显而易见的解决方案是要么将`true`其作为导致深层复制的第一个参数。然而，这在性能方面是非常缓慢的。更好的解决方案是`$.extend()`从该代码块中完全删除，而是将其移至方法，仅当节点实际上要更改时`mutate()`我才调用该方法。`$.extend()`换句话说，它变成了写时复制。

另外，我在适应度函数中输入的颜色是错误的：P

# c++ - 更改 Visual Studio 用于启动控制台应用程序的命令行解释器

> ID：13887024
> 
> 赞同：2
> 
> 时间：2012-12-14T22:15:54.073
> 
> 标签：c++, visual-studio-2010, cmd

可以更改 Visual Studio 用来启动控制台应用程序的命令行解释器吗？目前，无论是否启动调试应用程序，它们都在 cmd.exe 中运行。我想将 cmd.exe 更改为不同的 shell，例如 Console2 或 mintty。

# c++ - 如何从服务获取用户桌面的路径？

> ID：13887035
> 
> 赞同：3
> 
> 时间：2012-12-14T22:16:52.483
> 
> 标签：c++, windows, winapi, windows-services, desktop

我需要从服务应用程序枚举本地 Windows 系统上所有用户的桌面文件夹路径。问题是某些用户当时可能没有登录。那么是否有任何 API 或其他方法可以做到这一点？

**EDIT1：**对于那些没有阅读第一段的人，让我重复一遍——**我没有**用户帐户的令牌，用户当时可能没有登录。

**EDIT2：**在我的应用程序支持的功能被关闭或应用程序被卸载之前，我需要从用户桌面删除快捷方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:36:20.007

这是迄今为止我能想到的最好的方法。所以如果有人安装了非英语的 Windows 可以帮我检查一下，我会很感激？

（为简洁起见，我只发布了一个伪代码。）

1 - 以下所有步骤均通过本地服务应用程序完成。

2 - 要获取所有用户配置文件的路径，请枚举键中的子文件夹并从中`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList`读取值。`ProfileImagePath`它将为每个用户帐户提供配置文件路径。

3 - 要获取桌面的文件夹名称，请从服务应用程序`Desktop`的键中读取值（是的，我知道 HKCU 听起来很奇怪，但它对我有用。）然后使用[环境变量获取环境变量的路径](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682653%28v=vs.85%29.aspx)[API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682653%28v=vs.85%29.aspx)。所以你会得到两条路径，如下所示：`HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders``%USERPROFILE%`

```
C:\Windows\system32\config\systemprofile\Desktop 
```

和

```
C:\Windows\system32\config\systemprofile 
```

然后简单地将第二个字符串与第一个字符串隔离开，使用不区分大小写的比较，您将获得桌面的文件夹名称（即在这种情况下为“\Desktop”。）

4 - 将桌面文件夹添加到步骤 2 中获得的路径，以生成该用户桌面文件夹的完整路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:27:57.233

来自 userenv.h：GetProfilesDirectory (win2k+, iirc)

msdn.microsoft.com/en-us/library/windows/desktop/bb762278(v=vs.85).aspx

使用它来查找包含所有本地用户帐户配置文件目录的目录。

要查找桌面文件夹：

Shlobj.h : SHGetKnownFolderPath (vista+)

msdn.microsoft.com/en-us/library/windows/desktop/bb762188(v=vs.85).aspx

您需要 FOLDERID_Desktop 作为已知文件夹 ID。此符号在 Knownfolders.h 中声明

msdn.microsoft.com/en-us/library/windows/desktop/dd378457(v=vs.85).aspx

使用这些，您可能会更接近您想要的，而无需直接读取注册表。当然，除了从 GetProfilesDirectory 中的文件夹列表推断之外，这掩盖了枚举用户的任何优雅方式。也许有一种更适合 api 的方式来枚举本地用户。

其次，这取决于您的服务目的，但也许通过使用“所有用户”配置文件，而不是单独使用每个用户，您不需要知道当前的本地用户列表。

# javascript - 用户需要为新版本清除缓存

> ID：13887036
> 
> 赞同：2
> 
> 时间：2012-12-14T22:17:01.373
> 
> 标签：javascript

每次我们发布版本时，用户都需要清除缓存以使新代码生效。有没有办法让它自动完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:21:40.353

在默认页面上添加无缓存 html 标签怎么样？

类似于[这里的回答](https://stackoverflow.com/questions/8155064/how-to-programmatically-empty-browser-cache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:23:10.977

如果您谈论的是网站上的 Javascript 包含，那么您只需附加一个带有递增版本号的查询字符串。所以一个版本是：

```
<script src="codebase.js?v=1"></script> 
```

下一个版本是：

```
<script src="codebase.js?v=2"></script> 
```

如果您谈论的是您无法控制其脚本包含的第三方托管文件，那么问题就更加困难了。

# ios - 是否有人制作了 Adob e 原生扩展以与 NextPeer 的社交插件集成

> ID：13887037
> 
> 赞同：3
> 
> 时间：2012-12-14T22:17:02.420
> 
> 标签：ios, flash, air, adobe, air-native-extension

我到处搜索了一个集成 NextPeer 社交插件的 ANE，但没有结果。我想知道是否有人做过它，如果它是在我能找到的地方制作的。这是 xCode [http://developers.nextpeer.com](http://developers.nextpeer.com)的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-23T04:20:14.347

可能为时已晚，但您可以查看这个 github 项目

[https://github.com/danielshir/nextpeerANE](https://github.com/danielshir/nextpeerANE)

# android - Android Mobile 是显示 LogCat 输出还是只显示模拟器显示的内容

> ID：13887039
> 
> 赞同：0
> 
> 时间：2012-12-14T22:17:09.600
> 
> 标签：android, android-emulator, emulation

我的问题是，当我们使用 Log.d() 时，Log.v()。这些是在 android 屏幕上作为输出可见还是仅保留在后台而 Android Mobile 仅显示模拟器在计算机中显示的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:26:08.273

日志只是一种东西，它使开发人员能够检查他的代码是否按预期工作，用户不会看到任何日志语句。但建议在发布您的应用程序之前删除所有日志：

> 关闭日志记录和调试
> 
> 确保在构建应用程序以供发布之前停用日志记录并禁用调试选项。您可以通过删除源文件中对 Log 方法的调用来停用日志记录。您可以通过从清单文件中的标记中删除 android:debuggable 属性或在清单文件中将 android:debuggable 属性设置为 false 来禁用调试。此外，删除在您的项目中创建的任何日志文件或静态测试文件。

来源[在这里](http://developer.android.com/tools/publishing/preparing.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:18:32.180

不，这纯粹是背景事物，可通过 Eclipse 中的 LogCat 视图查看。用户不会看到任何与日志相关的内容，他们在使用应用程序时会忽略它。所以是的，它将显示您的模拟器显示的内容。当然，如果您需要他们查看某些内容，您可以显示 Toasts 和 Dialogs。但是，请确保在您的应用程序的发布版本中取出 Log 语句。启用调试的人如果将手机连接到计算机并运行 LogCat，他们将能够看到您的语句。

# php - 在codeigniter中的我的模型中扩展之后我如何设置另一个模型（除CI_Model之外）

> ID：13887045
> 
> 赞同：-2
> 
> 时间：2012-12-14T22:17:41.020
> 
> 标签：php, codeigniter, codeigniter-2

我想在我的“Adaptive_paypal_model”中扩展 Paypal_class_model。当我写

```
 class Adaptive_paypal_model extends Paypal_class_model
   { 
```

此代码显示错误消息：

```
 Fatal error: Class 'Paypal_class_model' not found in C:\xampp\htdocs\business1\application\models\adaptive_paypal_model.php on line 3 
```

请帮我

这是我要包含的代码。请告诉我在 php 中包含文件的另一种方法

```
 class Paypal_class_model extends CI_Model
      {

     function Paypal_class_model()
         {

 $APIUsername = '';
 $APIPassword = '';
 $APISignature = '';
 $APISubject = '';
 $APIVersion = '';
$APIButtonSource = '';
 $APIMode = '';
 $EndPointURL = '';
        $Sandbox = '';
 $BetaSandbox = '';
 $PathToCertKeyPEM = '';
 $SSL = '';

function __construct($DataArray)
{       
    if(isset($DataArray['Sandbox']))
    {
        $this->Sandbox = $DataArray['Sandbox'];

    }
    elseif(isset($DataArray['BetaSandbox']))
    {
        $this->Sandbox = $DataArray['BetaSandbox'];
    }
    else
    {
        $this->Sandbox = true;
    }

    $this->Sandbox = isset($DataArray['Sandbox']) || isset($DataArray['BetaSandbox']) ? $DataArray['Sandbox'] : true;
    $this->BetaSandbox = isset($DataArray['BetaSandbox']) ? $DataArray['BetaSandbox'] : false;
    $this->APIVersion = isset($DataArray['APIVersion']) ? $DataArray['APIVersion'] : '95.0';
    $this->APIMode = isset($DataArray['APIMode']) ? $DataArray['APIMode'] : 'Signature';
    $this->APIButtonSource = 'AngellEYE_PHPClass';
    $this->PathToCertKeyPEM = '/path/to/cert/pem.txt';
    $this->SSL = $_SERVER['SERVER_PORT'] == '443' ? true : false;
    $this->APISubject = isset($DataArray['APISubject']) ? $DataArray['APISubject'] : '';

    if($this->Sandbox || $this->BetaSandbox)
    {
        // Show Errors
        error_reporting(E_ALL);
        ini_set('display_errors', '1');

        if($this->BetaSandbox)
        {
            # Beta Sandbox
            $this->APIUsername = isset($DataArray['APIUsername']) && $DataArray['APIUsername'] != '' ? $DataArray['APIUsername'] : '';
            $this->APIPassword = isset($DataArray['APIPassword']) && $DataArray['APIPassword'] != '' ? $DataArray['APIPassword'] : '';
            $this->APISignature = isset($DataArray['APISignature']) && $DataArray['APISignature'] != '' ? $DataArray['APISignature'] : '';
            $this->EndPointURL = isset($DataArray['EndPointURL']) && $DataArray['EndPointURL'] != '' ? $DataArray['EndPointURL'] : 'https://api-3t.beta-sandbox.paypal.com/nvp';    
        }
        else
        {
            # Sandbox
            $this->APIUsername = isset($DataArray['APIUsername']) && $DataArray['APIUsername'] != '' ? $DataArray['APIUsername'] : '';
            $this->APIPassword = isset($DataArray['APIPassword']) && $DataArray['APIPassword'] != '' ? $DataArray['APIPassword'] : '';
            $this->APISignature = isset($DataArray['APISignature']) && $DataArray['APISignature'] != '' ? $DataArray['APISignature'] : '';
            $this->EndPointURL = isset($DataArray['EndPointURL']) && $DataArray['EndPointURL'] != '' ? $DataArray['EndPointURL'] : 'https://api-3t.sandbox.paypal.com/nvp'; 
        }
    }
    else
    {
        $this->APIUsername = isset($DataArray['APIUsername']) && $DataArray['APIUsername'] != '' ? $DataArray['APIUsername'] : '';
        $this->APIPassword = isset($DataArray['APIPassword']) && $DataArray['APIPassword'] != '' ? $DataArray['APIPassword'] : '';
        $this->APISignature = isset($DataArray['APISignature']) && $DataArray['APISignature'] != '' ? $DataArray['APISignature'] : '';
        $this->EndPointURL = isset($DataArray['EndPointURL']) && $DataArray['EndPointURL'] != ''  ? $DataArray['EndPointURL'] : 'https://api-3t.paypal.com/nvp';
    }

    // Create the NVP credentials string which is required in all calls.
    $this->NVPCredentials = 'USER=' . $this->APIUsername . '&PWD=' . $this->APIPassword . '&VERSION=' . $this->APIVersion . '&BUTTONSOURCE=' . $this->APIButtonSource;
    $this->NVPCredentials .= $this->APISubject != '' ? '&SUBJECT=' . $this->APISubject : '';
    $this->NVPCredentials .= $this->APIMode == 'Signature' ? '&SIGNATURE=' . $this->APISignature : '';

} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:10:11.897

您可以只自动加载模型，但可以在此处找到更好的解决方案：[在 Codeigniter 2 中扩展多个模型](https://stackoverflow.com/questions/8136898/extending-multiple-models-in-codeigniter-2) 您可以节省每次调用中自动加载的开销。

# android - 无法使用 Android 连接到 Web 服务

> ID：13887046
> 
> 赞同：0
> 
> 时间：2012-12-14T22:17:44.730
> 
> 标签：android, .net, android-ndk

**无法使用 Android 连接到 Web 服务它无法访问** 我尝试创建线程的 Web 服务代码，然后在那里运行我的代码我从我的手机测试 Web 服务链接，它可以访问

这是.net和android的代码：-

Webservice Code .net：**强文本**

```
Imports System.Web
Imports System.Web.Services
Imports System.Web.Services.Protocols

<WebService(Namespace:="http://tempuri.org/")> _
Public Class Service
    Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Function HelloWorld() As Integer
        Return 0
    End Function

End Class 
```

这是代码

```
 public class MainActivity extends Activity implements OnClickListener  {

    ImageButton btn1;
    ImageButton Save;
    private static final String SOAP_ACTION = "http://tempuri.org/HelloWorld";
    private static final String MethodName = "HelloWorld";
    private static final String NameSpace = "http://tempuri.org/"; 
    private static final String URL = "http://172.20.10.2/WebSite9/Service.asmx";  
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

         final Thread webser    = new Thread() {

            public void run() {

                try {
                  //  String project = titles.get(position - 1);

               //     CallWebService();
                 SoapObject request = new SoapObject(NameSpace, MethodName);         
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                   envelope.dotNet=true; 

                   // request.addProperty("TextToDisplay", "This is coming from android");
                 envelope.setOutputSoapObject(request); 

                  androidHttpTransport.call(SOAP_ACTION, envelope); 

                    SoapObject result = (SoapObject)envelope.getResponse(); 
                 //   Toast.makeText(MainActivity.this,result.toString(), Toast.LENGTH_LONG).show();

                } catch (Exception e) {

                  Log.e("tag", e.getMessage());

                }

            }

        };
        webser.start(); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:52:08.023

您的代码似乎没问题

请确保：-

1- 使用 ksoap2-android-2.5.2.jar
2- 转到 buildpath>add external jars 并选择它 3- 复制 ksoap2-android-2.5.2.jar 并将其粘贴到 libs 文件下

重新启动应用程序并尝试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:47:25.870

把这段代码：

```
SoapObject result = (SoapObject)envelope.bodyIn; 
```

而不是这个

```
SoapObject result = (SoapObject)envelope.getResponse(); 
```

它将按预期与您一起工作。

# objective-c - Objective-C：访问另一个类的属性

> ID：13887047
> 
> 赞同：2
> 
> 时间：2012-12-14T22:17:45.780
> 
> 标签：objective-c, ios

假设我有两个类（ClassA，ClassB）

类A.h

```
@interface ClassA : SomeSuperClass

@property (some Attributes) ClassB *classB;
@property (some Attributes) NSString *someString;

@end 
```

现在我的问题：

我想访问 classB 实例中的 NSString someString 。实现这一目标的最佳方法是什么？我在考虑两种解决方案：

在 classB 中创建一个协议，让 classA 响应这个协议。此协议中的唯一方法是访问/更改此字符串。

我想出的第二个解决方案是在创建 classB 的实例后将此字符串作为参数，然后 classB 可以存储对它的引用并可以随时更改它。

两种解决方案对我来说似乎都有效（没有测试它，只是假设它），但在我看来它们似乎有点矫枉过正（尤其是第一个）

让我知道最好的方法是什么，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:20:15.907

如果您对 B 的父级 (A) 进行了弱引用，那么您可以安全地访问它的属性，而无需过度杀伤或创建保留循环。

```
@interface ClassA : SomeSuperClass

@property (some Attributes) ClassB *classB;
@property (some Attributes) NSString *someString;

@end

@implementation

-(id)init {
    if (self = [super init]) {
        _classB = [[ClassB alloc]initWithParent:self];
    }
}

@end

@class ClassA;
@interface ClassB : SomeSuperClass

@property (nonatomic, weak) ClassA *classA;

-(id)initWithParent:(ClassA*)parent;

@end

#import "ClassA.h"
@implementation 

-(id)initWithParent:(ClassA*)parent {
    if (self = [super init]) {
        _classA = parent;
        NSLog(@"%@", self.classA.someString); //perfectly legal
    }
}

@end 
```

# c# - 如何在 BackgroundAudioPlayer 中重新加载播放列表？

> ID：13887052
> 
> 赞同：1
> 
> 时间：2012-12-14T22:18:08.943
> 
> 标签：c#, .net, windows-phone-7, background-audio

我有一个解决方案，其中包括 2 个项目：主要项目和 PlayListFilePlayBackAgent。 ![在此处输入图像描述](../Images/f1b35e8d600fecb759b8d08732a92553.png)

在主项目中，在 MainPage 中有一个 listBox，它显示不同的内容。某些内容具有音频格式，当我在列表框的项目中看到标题和表演者时 - 我单击此列表框项目中的“播放”按钮。此按钮进行一些操作（从某个服务器获取曲目的 url），然后转到页面 AudioPage。在 AudioPage 中，一些方法从这些 url 中创建一个播放列表，而不是以 xml 格式（序列化）保存在 isolatedStorage 中。这是 PlayList.cs

```
 public class Playlist
{
    public Playlist()
    {
        Tracks = new List<PlaylistTrack>();
    }

    [XmlElement(ElementName = "Track")]
    public List<PlaylistTrack> Tracks { set; get; }
    [XmlElement(ElementName = "TrackCount")]
    public int TrackCount { set; get; }

    public static Playlist Load(string filename)
    {
        Playlist playlist = null;

        using (IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream stream = storage.OpenFile(filename, FileMode.Open))
            {
                XmlSerializer xmlSerializer = new XmlSerializer(typeof(Playlist));
                playlist = xmlSerializer.Deserialize(stream) as Playlist;
            }
        }
        return playlist;
    }

    public void Save(string filename)
    {
        using (IsolatedStorageFile storage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream stream = storage.CreateFile(filename))
            {
                XmlSerializer xmlSerializer = new XmlSerializer(typeof(Playlist));
                xmlSerializer.Serialize(stream, this);
            }
        }
    }
} 
```

并且 PlayBackAgent 将此 xml 反序列化为播放列表，并播放它。

这一切都很好，但是当我想听那些不在列表框中的曲目时，我遇到了问题。我回到我的列表框，然后选择一些曲目并按下“播放”按钮。在按钮处理程序中，`.Clear();`我的收藏，获取新曲目的新网址，转到 AudioPage 并制作一个新的播放列表。但是在模拟器中，我看到了我以前听过的相同音乐。我认为问题在于 PlayListFilePlayBackAgent 没有从isolatedStorade 更新播放列表。但是当我单击不同的按钮“播放”时 - 字段 TrackCount 发生变化（不要介意它的名称，它只是说明播放列表中必须播放播放器的曲目数），我可以在写入时在输出中看到`Debug.WriteLine(Convert.ToString(playlist.TrackCount));`它`AudioPlayer.cs`. 所以我有：一个音频播放器，它只播放我给他的第一个播放列表中的音乐。当我想收听另一个播放列表时 - 在 AudioPage 中，我看到了旧的播放列表，并且只能从那些旧的播放列表中收听音乐。我想要的是一个音频播放器，每次按下“播放”按钮时都可以更改播放列表，并且可以播放此音乐。

PS：我使用 PlayListFilePlayBackAgent 因为即使我关闭这个应用程序它也可以播放音乐。如果您需要更多代码 - 请告诉我。谢谢。

更新：按钮处理程序

```
 private void Audio_Button_Click(object sender, RoutedEventArgs e)
    {
        string uri = null;
        TextBox tb = null;
        var grid = (Grid)((Button)sender).Parent;
        foreach (var child in grid.Children)
        {
            if (child is TextBox && (string)((TextBox)child).Tag == "URL")
            {
                tb = (TextBox)child;
            }
        }
        uri = tb.Text;
        BackgroundAudioPlayer.Instance.SkipNext();

        //MessageBox.Show(uri);

        string url = string.Format("https://api.vk.com/method/audio.getById.xml?audios={0}&access_token={1}", uri, App.AccessToken);

        var c = new WebClient();
        c.OpenReadCompleted += (sender1, e1) =>
        {
            XDocument xml = XDocument.Load(e1.Result);
            MessageBox.Show(xml.ToString());
            var inf = from u in xml.Descendants("audio")
                      select u;
            AudioPage.audios.Clear();
            foreach (var item in inf)
            {
                AudioPage.audios.Add(new AudioAttachment((string)item.Element("url"), (string)item.Element("title"), (string)item.Element("artist")));
            }
            string destination = string.Format("/AudioPage.xaml");
            NavigationService.Navigate(new Uri(destination, UriKind.Relative));
            AudioPage.count = 0;

        };
        c.OpenReadAsync(new Uri(url));
    } 
```

OnUseraction.cs

```
 protected override void OnUserAction(BackgroundAudioPlayer player, AudioTrack track, UserAction action, object param)
    {
        switch (action)
        {
            case UserAction.Play:
                if (player.Track == null)
                {
                    // Load playlist from isolated storage
                    if (playlist == null)
                        playlist = Playlist.Load("playlist.xml");
                 //   Debug.WriteLine(playlist.Tracks[0].Title);
                    Debug.WriteLine(Convert.ToString(playlist.TrackCount));
                    currentTrack = playlist.TrackCount;
                    player.Track = playlist.Tracks[currentTrack].ToAudioTrack();
                }
                else
                {
                    player.Play();
                }
                break;

            case UserAction.Pause:
                player.Pause();
                break;

            case UserAction.SkipNext:
                if (currentTrack < playlist.Tracks.Count - 1)
                {
                    currentTrack += 1;
                    player.Track = playlist.Tracks[currentTrack].ToAudioTrack();
                }
                else
                {
                    player.Track = null;
                }
                break;

            case UserAction.SkipPrevious:
                if (currentTrack > 0)
                {
                    currentTrack -= 1;
                    player.Track = playlist.Tracks[currentTrack].ToAudioTrack();
                }
                else
                {
                    player.Track = null;
                }
                break;

            case UserAction.Seek:
                player.Position = (TimeSpan)param;
                break;
        }
        NotifyComplete();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:50:47.920

如果您在 UI 中更改播放列表，您将需要某种方式向代理发出信号，告知其需要更改正在播放的内容，否则它将继续播放当前曲目。

当用户点击播放按钮时，`BackgroundAudioPlayer.Instance.SkipNext`从您的应用程序调用，当您`OnUserAction`在代理代码中获得事件时，您将能够重新检查您的播放列表 XML 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:11:44.357

```
if (playlist == null)
    playlist = Playlist.Load("playlist.xml"); 
```

您在哪里将播放列表设置回 Null？

伙计，我感觉到你的痛苦。我有完全相同的情况并使用完全相同的方法（除了我使用了 IsolatedStorageSettings.ApplicationSettings 集合而不是写入文件）。

它非常适合第一次运行。

这种行为真的很奇怪。我在前台应用程序上看到了数据更新，但是从播放器读取相同的设置不会给我新的数据。我还尝试使用新的设置键进行编写（以防 BAP 缓存结果或其他内容），但我得到了一些不稳定的结果，它适用于 2-5 次更新，然后就停止在集合中看到新的设置键。让我发狂...

我还注意到音轨的 Tag 属性似乎被正确复制了，所以我尝试序列化我的播放列表并通过标签作为字符串值传递，但得到了一些内存不足或其他错误的错误。看起来像他们在那里有自己的限制。

如果你在这个问题上找到了运气，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T17:19:56.197

也许是有关在 Windows Phone 上播放音频的最详细信息之一。在此处查看项目[http://developer.nokia.com/community/wiki/Streaming_MP3_player_in_WP7](http://developer.nokia.com/community/wiki/Streaming_MP3_player_in_WP7)。

但是我必须说，在我的情况下，我必须加载数据库并通过在不使用 JSON 的情况下循环遍历列表来提取信息。下面是代码；

```
private void LoadPlayListFromIsolatedStorage(BackgroundAudioPlayer player)
    {
        // clear previous playlist
        _playList.Clear();
        // access to isolated storage
        IsolatedStorageFile isoStore = IsolatedStorageFile.GetUserStoreForApplication();
        using (IsolatedStorageFileStream stream = new IsolatedStorageFileStream("AlbumsData.dat", FileMode.OpenOrCreate, isoStore))
        {
            if (stream.Length > 0)
            {
                DataContractSerializer serializer = new DataContractSerializer(typeof(List<Album>));
                List<Album> strm = serializer.ReadObject(stream) as List<Album>;
                List<Song> _songs = strm[0].Songs;
                for (int i = 0; i < _songs.Count; i++)
                {
                    AudioTrack audioTrack = new AudioTrack(
                            new Uri(_songs[i].Directory, UriKind.Absolute), // URL
                            _songs[i].Title,         // MP3 Music Title
                            "Artist",        // MP3 Music Artist
                            "Album",         // MP3 Music Album name
                            new Uri(_songs[i].AlbumArt, UriKind.Absolute)    // MP3 Music Artwork URL
                            );

                    _playList.Add(audioTrack);
                }
            }
            else
            {
                // no AudioTracks from Isolated Storage
            }
            // start playing
            PlayTrack(player);

        } 
```

# javascript - 使用 jquery 突出显示弹出窗口的第一个输入元素

> ID：13887053
> 
> 赞同：0
> 
> 时间：2012-12-14T22:18:09.350
> 
> 标签：javascript, jquery, html, jquery-mobile

我有几个带有多个输入字段的弹出窗口。我想突出显示所有弹出窗口的 F​​IRSTinput 元素，并且我不想使用 id：

我的代码：

```
function initPopups(){
    $('*[id*=Popup]').each(function() {
        $(this).on({
                    // disables the auto close on outer clicks
            popupbeforeposition: function () {
                // removes all handlers from the 'background'(-layer.class) of the popup
                $('.ui-popup-screen').off();
            },
                    // SHOULD highlight the first textfield after popup opened
            popupafteropen:function(){
                console.log("OPENED");
                   $('form:first *:input[type!=hidden]:first').focus();
            }
        });
    }); 
```

这是一个弹出窗口的 html：

```
<div data-role="popup" id="create_stationPopup" class="ui-content">
            <a href="#" data-rel="back" data-role="button" data-theme="c" data-icon="delete" data-iconpos="notext"
               class="ui-btn-right">Close</a>
            <form>
            <input type="text" name="name" id="station_input_title" value="" data-mini="true" placeholder="Titel der Station" />
            <input type="text" name="name" id="station_input_number" value="" data-mini="true" placeholder="Nummer der Station"/>
            <textarea name="textarea" id="station_input_text" placeholder="Beschreibe diese Station"></textarea>
           </form>
            <a href="#create_stationQuestionPopup"  data-rel="popup" data-role="button" data-theme="c" id="createWave_questionBtn" >Frage
                hinzufügen</a>
            <a id="createWave_stationSaveBtn" data-role="button" data-theme="c">Station
                speichern</a>
        </div> 
```

我的代码仅突出显示我的 HTML 文件中的第一个输入字段，而不是所有弹出窗口中的第一个输入字段（在静态 html 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:44:25.833

在@Trufa 的帮助下，我通过以下方式修复了它：

```
function initPopups(){
    $('*[id*=Popup]').each(function() {
        $(this).on({
            popupbeforeposition: function () {
                // removes all handlers from the 'background'(-layer.class) of the popup
                $('.ui-popup-screen').off();

            },
            popupafteropen:function(){
                   $('.ui-popup-active *:input[type!=hidden]:first').focus();
              }
        });
    });
} 
```

每个弹出窗口在屏幕上时都会获取该类`.ui-popup-active`，因此只需使用它并突出显示第一个输入字段:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:37:48.080

尝试使用在 jQuery元素`[0]`的“数组”中选择第一个元素：`input``form`

```
popupafteropen:function(){
    console.log("OPENED");
    $('div[data-role=popup] input[type!=hidden]')[0].focus();
} 
```

# file-upload - 用 mysql 和 python 转义字符混淆

> ID：13887063
> 
> 赞同：0
> 
> 时间：2012-12-14T22:19:17.383
> 
> 标签：file-upload, download, werkzeug, python-unicode

我想从[http://werkzeug.pocoo.org/](http://werkzeug.pocoo.org/)上传徽标图片 保存后我尝试了以下操作。我是菜鸟所以请帮助..

当我通过 html 表单上传时收到的流是

```
'GIF89a\xa0\x00\xa0\x00\xe3\x08\x00\x01\x03\x00,)\x00JB\x00g`\x00\x96\x8a\x00\xcd\xbc\x00\xe9\xd5\x00\xfd\xeb\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff!\xf9\x04\x01\n\x00\x08\x00,\x00\x00\x00\x00\xa0\x00\xa0\x00\x00\x04\xfe\x10\xc9I\xab\xbd8\xeb\xcd\x11\xf8](\x8edi\x9e\xe8\xf4\xadi\xeb\xbep|\xad\xb4l\xdfx.\xd1\xbc\xee\xff@\x0eo\x18,\x1a}\xc3\xe4q\xc9l%\x05\xca\xa6t\xbaI\x12\x0eP"u\xcbM\x16\x0e\xe0l\x8fKfZ\xc1hq\xad\xcc\x06\x9e\xd1\xe9h{n{\xc3\xd1\x039}\x9f\xb2\xdf\xf1z|\x82"~\x7f\x80Z\x83\x89UCW\x86\x86y\x88\x8a\x92\x14\x85\x8ep\x90c\x93\x93\x95\x96\x97\x81\x9a|\x9c\x9d\x9e\x91\xa0tI\x03\xa3\xaa\x98k\xa6s\xa2\xaaw\x04\x9f\xaeT\xb0\xb1\xb2\xb4\xb5fC\xa9\xb8\xb1\x06\xb3\xa5\xbbK\xa8\xbf\xc7\xc2\x99\xc4G\xc6\xc7\xc8\xba\xcb9\xcd\xce\xcf\xc3\xd18\xd3\xd4\xd5\xca\xd77\xd9\xda\xdb\xad\xdd2\xdf\xe0\xe1,\xe31\xe5\xe6\xe7 \xe9.\xa8\x06\xec\xec\xc9\xe2\xef%O\xf3\xfa\xf5\xe8\xf7$\xf9\xfa\xf6A\xf37c\x88\x00y\x01\xf5\x15\x18HP\x85A\x84\t\x152$\x080b\xc2\x85\xd6\x1az0h\xb1#Fn\xfe\x1a\x9f@\xecxq\xe2\xb5$\x01F\x92,\x99q\x1c\xca\x950?\xdaK\'\x12fL\x93\xa6P\xaa\xb4i\xd1\x00\xceMCR\xf2\xe4\xe9\xb3e\xce\xa0;\x87z\x0c`\x14(\x0f\xa1J\x87\x16`\n\x12\x94\xce\xa8Qe\xf6;\xfa4)\xd6\x95S\x9b\xeeI\x02\xc0k@\x03\xc1\x08\x0c\x10\xc0v\x00\x81\x02f\x15R\x9d9\xe8\xea\xca`n\xd5\xe6\x1d\xc0T\xad\x00\x02q\xcd\x85\xad:\xd6K\xcc\x00\x7f\xbf\x1c0P`\xc0\x80`l\xdf\xaa\xbd;wk(\xa4D\x19;\x06\x8c\x86\x00`\x01\x01\xd62}\xdc\xd1@ew\x97\x87(\xc6\xba\x90\xf3\x81\xa9P\x19\xabu\x1d\xf14\x80\xd4<\x02\x83\x05 \x00\x0c\x81\x83\x86\x1a\x93d\x85\x9a\r\xca\xd5_\xc1,l\xdc\xdb\x92\xf0\x8e\xc4o\x1b7\x9c<\x97/G\xf2<\x93$p\xba\x0cY\xddC\'[\x82\xe8v{\xf7-d\x91WG\x13\x00\xaa\xa3\xd5\x02\xd4\x07\xe4N\xb8H\xfa\xf5\x7fL\xf3\xee\xc4\x18\x8c\x01\xe0\xd0\x89\xfe%\ru\xf8\xdd\x81\xd1u\xc1y\xe6\x19\x80\x16E\xc7\x8bj\x05:"L#\xef\xd1\x80`B\xff\t\xa8\x0e\x81\x11\xfe\x91\x85|p\xd4CaD\x19\xd6W\xc7-\x11~\x14\x97l\xdc\xdd\xa5Fq\x03B\xd8\xa1%\xc90\xd8\xc9\x85\x16\xbd(]\x8c<\x8c8c.\x16:\xa7 \x8e9j\x88\x0f\x87?\xc2\xa1\xd5\x07\x17\x06\x83\xc6T\xe0\xb1\xa3\xa37(FX\x94\x1d\xfaQh\x00i<9\xb8!#I\x1a\xc2\x0f\x84W\x96\xe5\x1fwk\xf9\xd8\xa0\x91\x8b\x80\x19&\x90dQ\xc5\xcfc\xffq6\x8b\x9a\x11y\xd9\x07\x92o\x8eI\xc3\x17~\xb9%F\x1eZ\x8ef\x93\x9e&\x90\x85g\x92~\xae@$\x16447[Z\x87\xb2II\x95\x056\xca\xe4x\x95\t0\x80b\xf2<\x9a\x10\xa2!(\xfa&\x9c/uR\x8f\x8d\x07,\x9a\'\x9b\xa6\x9ezH\x9c\x81a\xe2\xde\x99J\x91\x9a\x01Y\xa2\xce\xa8\xe9\x07 \xde\x81\x89|\xb4\xf14\xa6\x10\x98\xae\x17\x0cY+\xfe\xb8\n\x87~\x01\xfc\xf1\xa99Qvf\x94\xa2\xd5&\x17]\x8f\xbf,\xd4\\g\xce\x8e\xb2P*\xd5\xea\xba\xc3:In\x1b\xe43\x08\x05\x13l,\x1f\xf5*\xe60\xbc\xca\xea\x9f\x8e<|{\x0c_\x9b\xb1\xf3\x11\xab\xb1\x1c\xebP/\xf6.\x86/\r\xb7\xae\'gg\xef\xce;F\xbd\xf6\x96\xc8\xac\x99)\xae\x80\x900\r{8\xf1\xba\xb2\xea\xb7q\xc6\xb9\xae\xe0\xdf\\ \x83\xa1.\xc1\x11\xdb\xe6&~h\xb5\xda\xacr\x7f\xae\xa2\x04G\x1d{<q\xb8D!\xf6\x1a\r\x8d@\x92\xb0\xb4r\xac\x1cf\x99\xcc\xea[\x9d\xc7\xbd\xb1\xd2\x9e\xc5\xa3\xf8Y\x01\xcaI\x0e6\xb1\xd1GGj\xf3\n\x01\xb8\x8a\x96\xd3\x16\x08]\xf1\xc6\x1fd\xdb\x93\x7fV+\x9d\xf1\xb6\xbb\xf2 \xafRK~W\xa0i\xc0\xc9D\xaeg s\x9d6\xc7\xeb\xb5\x9d,IH\x93\xfd2.vk\x00\xf5W\x8c\x81\xfd\x01\xce6\xc9\xd4\xdc\xbf\x80\xff4xT\xbf\xe2\x9d\xdc\x7f\xcb\xae \xa9\xc8\xfe\xaa\x04\xde\xc1\xe3<\xe9\xfd\x10\xcbT\x15n\xf9\x96\x1fP\xfd\x87\xe6\xa5\xaa\r\xb9\xe1\x00\xfc\x1c\x95\xc7\xbe4\x1a\x18\xea\x84\xa8-\xb63\x9e\x0fq\xfbYT\xa5R@oc\x86K\xfb\x08\x9c\x93\xc8:\x00%\xf3\xdd\xbb\xcb\xfb\r\x16@\xc6\xc3\xff\x93/L\'s\x8b\xdf\xa0\xc9|!O\x01 \xb7\xfd\xa5\xe5|\xb3\x8e8\xdfo\x19\x96G\xc9\xd1\x9f\xf0\xb9\xf1`\x9b\xaeT\x86\xe5\xf3|\x80\xcf\x99\xffD\xfc\xf4\xecO\xbd\xfb<6\x03f\xa1\xcf\x81\xf1\x1e\x8fJ\xb7\xbfGL\xccuC\xb9\x9a\xef03\x1e\x01\xea`}\x12\xa1\x95\xb2N\xe3\x8b2!\xf0I\xf6C\x01\x04\xe7\xd1\xa8\xe4\xf5\x84*\xa1\xd9\xd4b0rA\x98YjOV\xbb\x88\x18B\xc32\x12\x92\x0e\x00\xe4\n\xcd\xef\x02\x98Ax\xe4\xab\x80\x1d;\xc8\x0c\xe7\xc7$\xd8\xa9\xc2\x81\xcc\xb8a\xc1\x9c\x91%R\x80\xe6\x03%\xdc\xd9\t\xbfG\xc0!\xfe"\x0b\x08"N\x12\x89\x06\xa3\x07a\r\x87?\xca\x82\xfe\xbe\x94F\xc3%R\taXd\xd9c\x92\x11"\xace\xecjU\x9c\x02\x03\x9dx\x07h]\xc9-\x17k\x9dn\xa6\xd4\x865\xb21\x0cX;Mh\xe8\xa6\n:\xbe\xa2+w\xc4\xe0\xc6\x92\xf8;/\x06\xc1\x8e\x05\xa3\x1b\xd1\x8e\x88\xc4\x00\xda&\x11H\t\xa3\x8b\x9a%\x93\x940\'cR\xb3\x0cn\x1a\x99\xb2\xdcX\x10<\x99L\xe3&\xc3v*4\x9aIq\xaa0%Wb\x96$\x8f}\xe6p\x80)\xca\x14\x1f\xe9\x8a\xa0x\xd0&6\xfb\x82\xd2\xde\x02\xb06\xd2\xb2\x16I\x90$\xb5x\xd8\xac*\xa9r\x19\xc1|\x1bb^\x885\xfa\xb4\xee\x8c\xbfD\xa6\x8c&\xb70V\xf4l\x96\x86<\xc54_\xb7<]\xcao1\xa3\x90\x98&\xa3\xc1\'\x98\xf4m\x16\xa9\xb0f*\xfd\xf8\x0e\xc3\x08\x13;T\xe9\x8d\x8a\x889Ev\xde\xa3\x9c$\xaa\xc7\xb0\xe6\xb7\xa5\xe7\xa9"\x9a\x14Q\xcd;\x9f\x85\x98\xe0\xf10%\x81\x11\xa7(\xef\xb9M\x0ce\xc13A\x02`\x1f\xfe\xb3\xb9\xca\x15\xdc\x12\x17\x98`^\xe9\x90xF{jd`\xdf\xd4G\xcb|\xc8\x8f$B\xcaD!\xf1\x9a6\x8a\xf8\x91+$\xc3\x9f\xfc\xf1\xe8G\x9f\xa6\xd2c\xd8,>\x12\x9d\x85I\xcd5S\x9a\xf2\xe0\xa2\xcfb\xc4\xf2ZuF\x9e\xf6\xd4\xa7!\xa5\x860T\x96<\xa3\x1e\x15\xa9\x7f\xc3\x85i|!\xa7\xd3\xb8OX\x14\xf5G\xb2<\xf6\xbc\x03it\xa7Y\r\xa8\xf5\xc4U\x19\xb5\x00\xeb5\xa0\x01\x99S\x9fz\xb7\xa4\x8eGi\x9c\x04\xe7(\xd6\xca\xd6\xb6F\x95\xac\xc53 J\xeb*\xb8\xbc\xe6G\x8a\xa9\x14\x18_\xd5W\xd3\xf7\x80P\xada\xad+\xba\x1c\xc1\x17\xdd\x08v\xb0(t\xab@\xf6\n\xd9\xd4\xa9.!\x8f\xad\xac\x13\xfc\xda\x0e\xcd\x92\x83\xb3\x01K\xacgA\xea(sdv\xb4/X\xac\xaaD\x8b\xdaK]\xf6\x17\xa7m-\x0c*R?\xca\xca\x96\xb0\xf8k\x1ako\xdb\xb5\r\xfeaI\xbc\xfdAM\x1cF\x97\xe0\x9eH\x88\xcf\x02\xaeq\xdd0\xb0A\xe5.\x97\xb9\xc8u\xees\xa1k5\xe9N\x97\xbaX\xdb\xedu\x915\xb1\xedZQ\xbb\xde\xdd\\\r\xc3;[\xdb\x92\x17\x1b\xe3<\xaf\x11\x16\x1a\x8d\x08\x00\x00;' 
```

我使用 req.file["name"] 收到上述内容并将其存储在 Mysql 中。

现在，当我从 MySQL 读回时，我得到了，

```
u'GIF89axa0x00xa0x00xe3x08x00x01x03x00,)x00JBx00g`x00x96x8ax00xcdxbcx00xe9xd5x00xfdxebx00xffxffxffxffxffxffxffxffxffxffxffxffxffxffxffxffxffxffxffxffxffxffxffxff!xf9x04x01\nx00x08x00,x00x00x00x00xa0x00xa0x00x00x04xfex10xc9Ixabxbd8xebxcdx11xf8](x8edix9exe8xf4xadixebxbep|xadxb4lxdfx.xd1xbcxeexff@x0eox18,x1a}xc3xe4qxc9l%x05xcaxa6txbaIx12x0eP"uxcbMx16x0exe0lx8fKfZxc1hqxadxccx06x9exd1xe9h{n{xc3xd1x039}x9fxb2xdfxf1z|x82"~x7fx80Zx83x89UCWx86x86yx88x8ax92x14x85x8epx90cx93x93x95x96x97x81x9a|x9cx9dx9ex91xa0tIx03xa3xaax98kxa6sxa2xaawx04x9fxaeTxb0xb1xb2xb4xb5fCxa9xb8xb1x06xb3xa5xbbKxa8xbfxc7xc2x99xc4Gxc6xc7xc8xbaxcb9xcdxcexcfxc3xd18xd3xd4xd5xcaxd77xd9xdaxdbxadxdd2xdfxe0xe1,xe31xe5xe6xe7 xe9.xa8x06xecxecxc9xe2xef%Oxf3xfaxf5xe8xf7$xf9xfaxf6Axf37cx88x00yx01xf5x15x18HPx85Ax84\tx152$x080bxc2x85xd6x1az0hxb1#Fnxfex1ax9f@xecxqxe2xb5$x01Fx92,x99qx1cxcax950?xdaK\'x12fLx93xa6Pxaaxb4ixd1x00xceMCRxf2xe4xe9xb3excexa0;x87zx0c`x14(x0fxa1Jx87x16`\nx12x94xcexa8Qexf6;xfa4)xd6x95Sx9bxeeIx02xc0k@x03xc1x08x0cx10xc0vx00x81x02fx15Rx9d9xe8xeaxca`nxd5xe6x1dxc0Txadx00x02qxcdx85xad:xd6Kxccx00x7fxbfx1c0P`xc0x80`lxdfxaaxbd;wk(xa4Dx19;x06x8cx86x00`x01x01xd62}xdcxd1@ewx97x87(xc6xbax90xf3x81xa9Px19xabux1dxf14x80xd4<x02x83x05 x00x0cx81x83x86x1ax93dx85x9a\rxcaxd5_xc1,lxdcxdbx92xf0x8exc4ox1b7x9c<x97/Gxf2<x93$pxbax0cYxddC\'[x82xe8v{xf7-dx91WGx13x00xaaxa3xd5x02xd4x07xe4Nxb8Hxfaxf5x7fLxf3xeexc4x18x8cx01xe0xd0x89xfe%\ruxf8xddx81xd1uxc1yxe6x19x80x16Exc7x8bjx05:"L#xefxd1x80`Bxff\txa8x0ex81x11xfex91x85|pxd4CaDx19xd6Wxc7-x11~x14x97lxdcxddxa5Fqx03Bxd8xa1%xc90xd8xc9x85x16xbd(]x8c<x8c8c.x16:xa7 x8e9jx88x0fx87?xc2xa1xd5x07x17x06x83xc6Txe0xb1xa3xa37(FXx94x1dxfaQhx00i<9xb8!#Ix1axc2x0fx84Wx96xe5x1fwkxf9xd8xa0x91x8bx80x19&x90dQxc5xcfcxffq6x8bx9ax11yxd9x07x92ox8eIxc3x17~xb9%Fx1eZx8efx93x9e&x90x85gx92~xae@$x16447[Zx87xb2IIx95x056xcaxe4xx95\t0x80bxf2<x9ax10xa2!(xfa&x9c/uRx8fx8dx07,x9a\'x9bxa6x9ezHx9cx81axe2xdex99Jx91x9ax01Yxa2xcexa8xe9x07 xdex81x89|xb4xf14xa6x10x98xaex17x0cY+xfexb8\nx87~x01xfcxf1xa99Qvfx94xa2xd5&x17]x8fxbf,xd4\\gxcex8exb2P*xd5xeaxbaxc3:Inx1bxe43x08x05x13l,x1fxf5*xe60xbcxcaxeax9fx8e<|{x0c_x9bxb1xf3x11xabxb1x1cxebP/xf6.x86/\rxb7xae\'ggxefxce;Fxbdxf6x96xc8xacx99)xaex80x900\r{8xf1xbaxb2xeaxb7qxc6xb9xaexe0xdf\\ x83xa1.xc1x11xdbxe6&~hxb5xdaxacrx7fxaexa2x04Gx1d{<qxb8D!xf6x1a\rx8d@x92xb0xb4rxacx1cfx99xccxea[x9dxc7xbdxb1xd2x9exc5xa3xf8Yx01xcaIx0e6xb1xd1GGjxf3\nx01xb8x8ax96xd3x16x08]xf1xc6x1fdxdbx93x7fV+x9dxf1xb6xbbxf2 xafRK~Wxa0ixc0xc9Dxaeg sx9d6xc7xebxb5x9d,IHx93xfd2.vkx00xf5Wx8cx81xfdx01xce6xc9xd4xdcxbfx80xff4xTxbfxe2x9dxdcx7fxcbxae xa9xc8xfexaax04xdexc1xe3<xe9xfdx10xcbTx15nxf9x96x1fPxfdx87xe6xa5xaa\rxb9xe1x00xfcx1cx95xc7xbe4x1ax18xeax84xa8-xb63x9ex0fqxfbYTxa5R@ocx86Kxfbx08x9cx93xc8:x00%xf3xddxbbxcbxfb\rx16@xc6xc3xffx93/L\'sx8bxdfxa0xc9|!Ox01 xb7xfdxa5xe5|xb3x8e8xdfox19x96Gxc9xd1x9fxf0xb9xf1`x9bxaeTx86xe5xf3|x80xcfx99xffDxfcxf4xecOxbdxfb<6x03fxa1xcfx81xf1x1ex8fJxb7xbfGLxccuCxb9x9axef03x1ex01xea`}x12xa1x95xb2Nxe3x8b2!xf0Ixf6Cx01x04xe7xd1xa8xe4xf5x84*xa1xd9xd4b0rAx98YjOVxbbx88x18Bxc32x12x92x0ex00xe4\nxcdxefx02x98Axxe4xabx80x1d;xc8x0cxe7xc7$xd8xa9xc2x81xccxb8axc1x9cx91%Rx80xe6x03%xdcxd9\txbfGxc0!xfe"x0bx08"Nx12x89x06xa3x07a\rx87?xcax82xfexbex94Fxc3%R\taXdxd9cx92x11"xacexecjUx9cx02x03x9dxx07h]xc9-x17kx9dnxa6xd4x865xb21x0cX;Mhxe8xa6\n:xbexa2+wxc4xe0xc6x92xf8;/x06xc1x8ex05xa3x1bxd1x8ex88xc4x00xda&x11H\txa3x8bx9a%x93x940\'cRxb3x0cnx1ax99xb2xdcXx10<x99Lxe3&xc3v*4x9aIqxaa0%Wbx96$x8f}xe6px80)xcax14x1fxe9x8axa0xxd0&6xfbx82xd2xdex02xb06xd2xb2x16Ix90$xb5xxd8xac*xa9rx19xc1|x1bb^x885xfaxb4xeex8cxbfDxa6x8c&xb70Vxf4lx96x86<xc54_xb7<]xcao1xa3x90x98&xa3xc1\'x98xf4mx16xa9xb0f*xfdxf8x0exc3x08x13;Txe9x8dx8ax889Evxdexa3x9c$xaaxc7xb0xe6xb7xa5xe7xa9"x9ax14Qxcd;x9fx85x98xe0xf10%x81x11xa7(xefxb9Mx0cexc13Ax02`x1fxfexb3xb9xcax15xdcx12x17x98`^xe9x90xF{jd`xdfxd4Gxcb|xc8x8f$BxcaD!xf1x9a6x8axf8x91+$xc3x9fxfcxf1xe8Gx9fxa6xd2cxd8,>x12x9dx85Ixcd5Sx9axf2xe0xa2xcfbxc4xf2ZuFx9exf6xd4xa7!xa5x860Tx96<xa3x1ex15xa9x7fxc3x85i|!xa7xd3xb8OXx14xf5Gxb2<xf6xbcx03itxa7Y\rxa8xf5xc4Ux19xb5x00xeb5xa0x01x99Sx9fzxb7xa4x8eGix9cx04xe7(xd6xcaxd6xb6Fx95xacxc53 Jxeb*xb8xbcxe6Gx8axa9x14x18_xd5Wxd3xf7x80Pxadaxad+xbax1cxc1x17xddx08vxb0(txab@xf6\nxd9xd4xa9.!x8fxadxacx13xfcxdax0excdx92x83xb3x01KxacgAxea(sdvxb4/XxacxaaDx8bxdaK]xf6x17xa7m-x0c*R?xcaxcax96xb0xf8kx1akoxdbxb5\rxfeaIxbcxfdAMx1cFx97xe0x9eHx88xcfx02xaeqxdd0xb0Axe5.x97xb9xc8uxeesxa1k5xe9Nx97xbaXxdbxedux915xb1xedZQxbbxdexdd\\\rxc3;[xdbx92x17x1bxe3<xafx11x16x1ax8dx08x00x00;' 
```

现在所有的转义字符都消失了，我想显示这个文件，但在我发送响应后我无法在 HTML 上显示。

为什么会发生这种情况，我该如何解决？我无法通过这个超过一个星期。

我正在为 python 使用 python2.7.3 和 werkzeug 和 mysql-connector。

其中一个 github 中的示例代码使用了这个

```
'R0lGODlhoACgAOMIAAEDACwpAEpCAGdgAJaKAM28AOnVAP3rAP/////////\n//////////////////////yH5BAEKAAgALAAAAACgAKAAAAT+EMlJq704680R+F0ojmRpnuj0rWnrv\nnB8rbRs33gu0bzu/0AObxgsGn3D5HHJbCUFyqZ0ukkSDlAidctNFg7gbI9LZlrBaHGtzAae0eloe25\n7w9EDOX2fst/xenyCIn5/gFqDiVVDV4aGeYiKkhSFjnCQY5OTlZaXgZp8nJ2ekaB0SQOjqphrpnOiq\nncEn65UsLGytLVmQ6m4sQazpbtLqL/HwpnER8bHyLrLOc3Oz8PRONPU1crXN9na263dMt/g4SzjMeX\nm5yDpLqgG7OzJ4u8lT/P69ej3JPn69kHzN2OIAHkB9RUYSFCFQYQJFTIkCDBiwoXWGnowaLEjRm7+G\np9A7Hhx4rUkAUaSLJlxHMqVMD/aSycSZkyTplCqtGnRAM5NQ1Ly5OmzZc6gO4d6DGAUKA+hSocWYAo\nSlM6oUWX2O/o0KdaVU5vuSQLAa0ADwQgMEMB2AIECZhVSnTno6spgbtXmHcBUrQACcc2FrTrWS8wAf\n78cMFBgwIBgbN+qvTt3ayikRBk7BoyGAGABAdYyfdzRQGV3l4coxrqQ84GpUBmrdR3xNIDUPAKDBSA\nADIGDhhqTZIWaDcrVX8EsbNzbkvCOxG8bN5w8ly9H8jyTJHC6DFndQydbguh2e/ctZJFXRxMAqqPVA\ntQH5E64SPr1f0zz7sQYjAHg0In+JQ11+N2B0XXBeeYZgBZFx4tqBToiTCPv0YBgQv8JqA6BEf6RhXx\nw1ENhRBnWV8ctEX4Ul2zc3aVGcQNC2KElyTDYyYUWvShdjDyMOGMuFjqnII45aogPhz/CodUHFwaDx\nlTgsaOjNyhGWJQd+lFoAGk8ObghI0kawg+EV5blH3dr+digkYuAGSaQZFHFz2P/cTaLmhF52QeSb45\nJwxd+uSVGHlqOZpOeJpCFZ5J+rkAkFjQ0N1tah7JJSZUFNsrkeJUJMIBi8jyaEKIhKPomnC91Uo+NB\nyyaJ5umnnpInIFh4t6ZSpGaAVmizqjpByDegYl8tPE0phCYrhcMWSv+uAqHfgH88ak5UXZmlKLVJhd\ndj78s1Fxnzo6yUCrV6rrDOkluG+QzCAUTbCwf9SrmMLzK6p+OPHx7DF+bsfMRq7Ec61Av9i6GLw23r\nidnZ+/OO0a99pbIrJkproCQMA17OPG6suq3cca5ruDfXCCDoS7BEdvmJn5otdqscn+uogRHHXs8cbh\nEIfYaDY1AkrC0cqwcZpnM6ludx72x0p7Fo/hZAcpJDjax0UdHavMKAbiKltMWCF3xxh9k25N/Viud8\nba78iCvUkt+V6BpwMlErmcgc502x+u1nSxJSJP9Mi52awD1V4yB/QHONsnU3L+A/zR4VL/indx/y64\ngqcj+qgTeweM86f0Qy1QVbvmWH1D9h+alqg254QD8HJXHvjQaGOqEqC22M54PcftZVKVSQG9jhkv7C\nJyTyDoAJfPdu8v7DRZAxsP/ky9MJ3OL36DJfCFPASC3/aXlfLOOON9vGZZHydGf8LnxYJuuVIbl83y\nAz5n/RPz07E+9+zw2A2ahz4HxHo9Kt79HTMx1Q7ma7zAzHgHqYH0SoZWyTuOLMiHwSfZDAQTn0ajk9\nYQqodnUYjByQZhZak9Wu4gYQsMyEpIOAOQKze8CmEF45KuAHTvIDOfHJNipwoHMuGHBnJElUoDmAyX\nc2Qm/R8Ah/iILCCJOEokGowdhDYc/yoL+vpRGwyVSCWFYZNljkhEirGXsalWcAgOdeAdoXcktF2udb\nqbUhjWyMQxYO01o6KYKOr6iK3fE4MaS+DsvBsGOBaMb0Y6IxADaJhFICaOLmiWTlDAnY1KzDG4ambL\ncWBA8mUzjJsN2KjSaSXGqMCVXYpYkj33mcIApyhQf6YqgeNAmNvuC0t4CsDbSshZJkCS1eNisKqlyG\ncF8G2JeiDX6tO6Mv0SmjCa3MFb0bJaGPMU0X7c8XcpvMaOQmCajwSeY9G0WqbBmKv34DsMIEztU6Y2\nKiDlFdt6jnCSqx7Dmt6XnqSKaFFHNO5+FmODxMCWBEaco77lNDGXBM0ECYB/+s7nKFdwSF5hgXumQe\nEZ7amRg39RHy3zIjyRCykQh8Zo2iviRKyTDn/zx6EefptJj2Cw+Ep2FSc01U5ry4KLPYsTyWnVGnvb\nUpyGlhjBUljyjHhWpf8OFaXwhp9O4T1gU9UeyPPa8A2l0p1kNqPXEVRm1AOs1oAGZU596t6SOR2mcB\nOco1srWtkaVrMUzIErrKri85keKqRQYX9VX0/eAUK1hrSu6HMEX3Qh2sCh0q0D2CtnUqS4hj62sE/z\naDs2Sg7MBS6xnQeooc2R2tC9YrKpEi9pLXfYXp20tDCpSP8rKlrD4axprb9u1Df5hSbz9QU0cRpfgn\nkiIzwKucd0wsEHlLpe5yHXuc6FrNelOl7pY2+11kTWx7VpRu97dXA3DO1vbkhcb4zyvERYajQgAADs\n=' 
```

这完美地工作，它的所有正常文本..我怎么能得到这个。?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T16:29:38.507

我发现出了什么问题，对于任何有同样问题的人.. 文件上传在收到时以十六进制格式或原始字符串发送。上传的文件流需要用'base64'编码并存储在mysql中。Mysql 在尝试存储原始字符串时尝试删除转义字符，因此需要对流进行编码。

```
req.file.stream.read().encode('base64') 
```

将文件发送到客户端解码并将内容的 mime 类型设置为响应时。

这解决了我的问题。

# r - 使用 by 函数增长数据帧的有效方法

> ID：13887068
> 
> 赞同：1
> 
> 时间：2012-12-14T22:19:48.677
> 
> 标签：r

我需要对他们识别的车辆进行一些分析`ID`。此分析的结果将包括一些`numeric`、`factor`和`logical`信息。分析中使用的所有数据都在一个数据框中，因此函数如下所示：

```
Results <- by(Data, Data$ID, Function) 
```

Where`Function`旨在提供如下输出：

```
Function <- function(DF) {
                          ## Do stuff...
                          return(c(23.2, as.factor("SuperFast"), TRUE))
                         } 
```

到目前为止，这种方法的优点在于，除了速度非常快（`for`循环需要数小时的时间约为 1 分钟）之外，还可以通过以下方式轻松输入`data.frame`格式：

```
as.data.frame(do.call("rbind", Results)) 
```

但是，当然，`c`in`Function` **和** `"rbind"`in`do.call`将所有内容强制转换为相同的对象类型。为了解决这个问题，我一直在`Function`吐出一个字符向量（比如`as.character(23.2, "SuperFast", TRUE)`最后手动更改对象类型。

是否有（1）一种方法可以`row`在具有不同对象类型的数据框中返回一些东西，或者（2）比使用`by`和`c`（对于行）更好的方法？

只是为了好玩，这里有一些可用于数据的东西：

```
Data <- data.frame(ID=c(1,2,2,3)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T22:36:12.060

只需从您的函数返回一个数据框而不是一个向量：

```
Function <- function(DF) {
    ## Do stuff...
    return(data.frame(a = 23.2,b = as.factor("SuperFast"),c = TRUE))
} 
```

顺便说一句，唯一将所有内容强制为相同数据类型的是`c`. `rbind`假设您传递给它的所有数据帧都排成一行，有一个数据帧方法将（主要）保留类型。

# php - php重新加载所有数据

> ID：13887070
> 
> 赞同：0
> 
> 时间：2012-12-14T22:20:02.527
> 
> 标签：php

我需要使用发送给它的所有帖子数据重新加载页面，帖子数据也是一个数组，这可能会使它有点困难。

所以这是我用来重新加载页面的代码。（这是完全相同的页面，所以重新加载页面）

```
//there is no data so lets do something as the ajax call is waiting for data
        header('Location: checkchat.php, true, 302);
        exit; 
```

我需要它通过 ether 将数组提交到同一页面，`POST`或者`GET`我**无法**打印任何数据，否则我的 ajax 请求将返回数据（这将是打印在页面上的任何内容）。

数组中可以有 200 个值，所以我不能`GET`很好地发送它，但它会不合理。

所以数组是这样的......

数组名称 =**好友列表**

*   fredy@example.com
*   bob@example.com
*   jimmy@example.com
*   test@example.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:21:39.700

为什么需要`POST`数据？为什么不能将其存储在服务器端，然后正常重定向？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:54:01.470

好的，所以我想了更长的时间，但确实做到了。我只是将它添加到每次都会被重写的会话中，然后我将数组从中拉出。此外，它只是像往常一样使用...刷新页面

```
 header('Location: checkchat.php, true, 302);
        exit; 
```

# c# - C# 线程：初学者练习

> ID：13887077
> 
> 赞同：6
> 
> 时间：2012-12-14T22:20:52.037
> 
> 标签：c#, multithreading

到目前为止，我一直试图通过立即在我的项目中实现线程来掌握线程。很长一段时间以来，我一直在尝试这样做。但这并没有产生任何结果，也没有给我任何线程方面的经验。尝试给我的唯一印象是 C# 中的线程有许多重要的改进。

我找不到任何关于线程的简单练习。我正在寻找您必须制作不同的简单控制台应用程序的练习。我正在寻找简单的练习，这样我就可以了解使用线程时事情是如何工作的并掌握这个想法。我看过一本难度很大的编程练习书，随着问题的数量越来越大，难度越来越大。我正在寻找类似的东西。之后我将继续处理更复杂的东西并尝试在我的项目中添加线程（它是用 Windows 窗体制作的）。

我在哪里可以找到关于 C# 线程的练习/练习书？

编辑：

我不是在寻找任何教程——我可以自己找到它们。我只搜索练习和练习。如果没有这样的练习，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T04:33:35.463

简单练习：

1）更改有效的代码（通过示例学习）

*   打开任何教程
*   查找代码示例
*   玩代码示例，看看哪些有效，哪些无效

2）回答SO问题（边教边学）

*   发现一个有趣的问题
*   回答它（你应该做一个研究来做到这一点）
*   与其他用户交谈和互动

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T22:29:29.170

Joseph Albahari 有一篇很棒的文章，名为[Threading in C#](http://www.albahari.com/threading/)。这是一篇关于开始学习 C# 线程的非常酷的博客文章。约瑟夫清楚地解释说：

*   简介和概念
*   加入并睡觉
*   线程如何工作
*   创建和启动线程
*   线程池

并查看Codeproject 的[这篇](http://www.codeproject.com/Articles/1137/Threading-in-C)文章。

*   入门

`Thread`您可以通过实例化一个对象并调用它的 Start 方法来创建和启动一个新线程。最简单的 Thread 构造函数接受一个`ThreadStart`委托：一个无参数方法，指示应该从哪里开始执行。

```
using System;
using System.Threading;

class ThreadTest
{
   static void Main()
   {
      Thread t = new Thread (WriteY); // Kick off a new thread
      t.Start(); // running WriteY()
      // Simultaneously, do something on the main thread.
      for (int i = 0; i < 1000; i++) Console.Write ("x");
   }
   static void WriteY()
   {
      for (int i = 0; i < 1000; i++) Console.Write ("y");
      }
}

// Output:
xxxxxxxxxxxxxxxxyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxyyyyyyyyyyyyy
yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy
yyyyyyyyyyyyyxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
... 
```

如果您想深入学习线程，请获得一份[C# 4.0 in a Nutshell](http://www.albahari.com/nutshell/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T22:28:24.080

线程非常简单。这是一个流行的链接： [http ://www.albahari.com/threading/](http://www.albahari.com/threading/)

基本：

创建一个返回 void 且不带参数的方法。像这样：

```
private void MyThreadMethod()
{
    //Some code here.
} 
```

要在线程中调用该方法，只需在表单上的按钮中执行此操作。

```
var thread = new Thread(new ThreadStart(MyThreadMethod));
thread.Start(); 
```

这将创建一个线程并启动它并运行`MyThreadMethod`.

现在，魔鬼在细节中。线程安全和线程管理是线程和多任务处理的真正艺术所在。要考虑的另一件事是线程与任务，它们对用户更加友好。

# email - 我在哪里可以学习设置具有所有身份验证的电子邮件发送环境？

> ID：13887084
> 
> 赞同：2
> 
> 时间：2012-12-14T22:21:46.657
> 
> 标签：email, authentication

我有一个客户想开始发送他们自己的电子邮件（与使用 MailChimp 等第三方电子邮件服务提供商相比），他们要求我帮助设置过程。

是否有任何课程教授如何设置大量电子邮件发送环境，包括所需的身份验证。

据我所知，我知道我需要一个带有静态 IP 地址（可能是 SSL）的服务器，并且我需要设置 SPF、SenderID、DKIM、域密钥并设置退回管理。

我理论上知道这些事情，但实际上我不知道如何执行，并且很想学习如何做这些事情，因为这对未来的客户很有价值。

先感谢您。

# javascript - 设置骨干集合中所有模型的属性

> ID：13887089
> 
> 赞同：18
> 
> 时间：2012-12-14T22:22:16.347
> 
> 标签：javascript, backbone.js, underscore.js, backbone.js-collections

我知道使用 pluck 方法我们可以在骨干集合中获取每个模型的属性数组

```
var idsInCollection = collection.pluck('id'); // outputs ["id1","id2"...] 
```

我想如果有一种方法可以为集合中的每个模型设置一个属性，

```
var urlArray = ["https://url1", "https://url1" ...];
collection.WHAT_IS_THIS_METHOD({"urls": urlArray}); 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-14T22:30:37.647

不完全是预先存在的方法，但`invoke`让我们在一行中执行类似的操作：

```
collection.invoke('set', {"urls": urlArray}); 
```

如果您想在所有集合上创建一个可重用的 set 方法，您可以执行以下操作：

```
var YourCollection = Backbone.Collection.extend({
    set: function(attributes) {
        this.invoke('set', attributes);
        // NOTE: This would need to get a little more complex to support the
        //       set(key, value) syntax
    }
}); 
```

*** 编辑 ***

Backbone 已经添加了自己的`set`方法，如果你覆盖它，你将完全破坏你的`Collection`. 因此，上面的示例实际上应该重命名为`setModelAttributes`，或者其他任何不是`set`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-14T22:29:48.653

我没有办法，但你可以试试：

```
collection.forEach(function(model, index) {
    model.set(url, urlArray[index]);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-01T16:55:20.363

扩展大卫的答案，您可以轻松地将此功能放入集合的自定义方法中。这是我使用咖啡脚本的方法：

```
class Collection extends Backbone.Collection
  setAll: () ->
    _args = arguments
    @models.forEach (model) -> model.set _args...

class SomeCollection extends Collection
  url: '/some-endpoint.json'

myLovelyCollection = new SomeCollection()
myLovelyCollection.fetch
  success: (collection, response) ->
    collection.setAll someVar: true
    collection.setAll anotherVar, 'test' 
```

如果你想在 vanilla JS 中做到这一点，它完全一样，但没有利用类或 splats 的力量。所以更像：

```
var Collection = Backbone.Collection.extend({
  setAll: function () {
    var _args = arguments;
    this.models.forEach(function (model) {
      model.set.apply(model, _args);
    });
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-25T17:42:22.670

只是想我会根据 machineghost 的版本发布我稍微更新的方法。这使用 lodash invokeMap 方法而不是下划线的调用。它支持与标准 model.set 方法相同的可选语法...例如 ('prop', 'val') 或 ({prop: 'val', prop: 'val'}) 以及接受和传递选项对象.

```
var YourCollection = Backbone.Collection.extend({
    setModels: function(key, val, options) {
        var attrs;

        if (typeof key === 'object') {
            attrs = key;
            options = val;
        } else {
            (attrs = {})[key] = val;
        }

        if (attrs) {
            _.invokeMap(this, 'set', attrs, options);
        }

        return this;
    }
}); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-02-12T20:28:16.743

如果您使用根据下划线站点调用语法应该是 _.invoke(list, methodName, *arguments) [http://underscorejs.org/#invoke](http://underscorejs.org/#invoke)

所以上面提到的[machineghost](https://stackoverflow.com/users/5921/machineghost)函数应该是

```
collection.invoke({'url': someURL},'set'); 
```

希望有帮助:)

# java - 在两个 JSP 页面中重用 javascript 的好习惯是什么？

> ID：13887093
> 
> 赞同：1
> 
> 时间：2012-12-14T22:22:25.673
> 
> 标签：java, javascript, jsp

我有两个必须使用相同 javascript 的 JSP 页面。该脚本在锚点上附加了一个函数。当用户点击锚点时，该函数将通过控制器和服务层调用数据库操作。

两个 JSP 页面都有这些锚点。因此，如果我可以在两个页面中重用这个脚本会很好。我打算创建一个只有这个脚本的 JSP 页面，并将这个页面包含在两个 jsp 页面中。这是重用 javascript 的好习惯吗？还有其他更好的方法吗？

这是脚本的一个片段：

```
$(document).ready(function(){

         $('a[name*="like"]').click(function() {

             var hrefName = $(this).attr("name");
             var href = $(this);
             $.ajax({  
                  type: "POST",  
                  url: "likeARecipe",  
                  data: 'recipeId=' + $(this).attr("title") + '&operation=' + $(this).attr("name"),  
                  success: function() {  

                      if(hrefName == 'unlike')
                      {
                          $(href).attr("name","like");
                          $(href).text("like");
                      }else {
                          $(href).attr("name","unlike");
                          $(href).text("unlike");
                      } 
                  }  
                });  
                return false; 
         });

      }); 
```

**更新**

我决定将脚本放入 common.js 脚本中。我将此脚本放在 scripts/common.js 下。

我使用标签来呈现这个脚本的 URL。

```
<spring:url value="/resources/scripts/common.js" var="common_js" />
<script src="${common_js}" type="text/javascript"><jsp:text/></script> 
```

我通过在上下文文件中指定这些资源来配置 spring 来读取这个脚本：

```
<resources location="/, classpath:/META-INF/web-resources/" mapping="/resources/**"/> 
```

但是，spring 没有在 JSP Pages 中加载脚本。关于解决问题的方法有什么建议吗？

**更新**

我找到了解决这个问题的方法。我必须修改脚本。我将脚本包含在一个函数（）中：

```
(function(){
    alert("test");
    $(document).ready(function(){

         $('a[name*="like"]').click(function() {

             var hrefName = $(this).attr("name");
             var href = $(this);
             $.ajax({  
                  type: "POST",  
                  url: "likeARecipe",  
                  data: 'recipeId=' + $(this).attr("title") + '&operation=' + $(this).attr("name"),  
                  success: function() {  

                      if(hrefName == 'unlike')
                      {
                          $(href).attr("name","like");
                          $(href).text("like");
                      }else {
                          $(href).attr("name","unlike");
                          $(href).text("unlike");
                      } 
                  }  
                });  
                return false; 
         });
      }); 
```

})(jQuery);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:25:37.887

创建一个外部 .js 文件并从两个 JSP 页面引用它，如下所示：

```
<script src="displaydate.js" type="text/javascript"></script> 
```

看看这里：[http ://www.javascriptkit.com/javatutors/external.shtml](http://www.javascriptkit.com/javatutors/external.shtml)

# php - XML xpath 属性值结果包含其他结果

> ID：13887094
> 
> 赞同：0
> 
> 时间：2012-12-14T22:22:49.927
> 
> 标签：php, xml, arrays, xpath, simplexml

*我最近问了一个关于如何使用 xpath*同时选择父节点属性及其值的问题，我最终得到的是：

```
Parent/@attr|Parent/x 
```

它获取 parent`attr`的值及其所有`x`节点..

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [attr] => attrValue
                )
        )

    [1] => SimpleXMLElement Object
        (
            [0] => 1
        )

    [2] => SimpleXMLElement Object
        (
            [0] => 2
        )

    [3] => SimpleXMLElement Object
        (
            [0] => 3
        )

) 
```

现在的事情..如果有几个`Parent`节点，它将把它们混合在一起，我不知道哪个`attr`属于它`x`的..它会产生这样的结果：

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [attr] => attrValue
                )
        )

    [1] => SimpleXMLElement Object
        (
            [0] => 1
        )

    [2] => SimpleXMLElement Object
        (
            [0] => 2
        )

    [3] => SimpleXMLElement Object
        (
            [0] => 3
        )

    [4] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [attr] => anotherAttrValue
                )
        )

    [5] => SimpleXMLElement Object
        (
            [0] => 1
        )

    [6] => SimpleXMLElement Object
        (
            [0] => 2
        )

    ...
) 
```

您会看到，它们都被视为正常结果，**我要做**的是将其`attr`所有结果（ 1, 2, 3 ）包含在一个数组或其他东西中，而同样的事情也将传递给`attr`另一个最终得到这样的结果：

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [attr] => attrValue
                )
        )
        Array
        (
            [0] => SimpleXMLElement Object
                (
                    [0] => 1
                )

            [1] => SimpleXMLElement Object
                (
                    [0] => 2
                )

            [2] => SimpleXMLElement Object
                (
                    [0] => 3
                )
        )

    [1] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [attr] => anotherAttrValue
                )
        )
        Array
        (
            [0] => SimpleXMLElement Object
                (
                    [0] => 1
                )

            [1] => SimpleXMLElement Object
                (
                    [0] => 2
                )

            [2] => SimpleXMLElement Object
                (
                    [0] => 3
                )
        )
) 
```

使用 xpath 和最初给出的方式

# php - Codeigniter AJAX 示例

> ID：13887095
> 
> 赞同：10
> 
> 时间：2012-12-14T22:22:50.660
> 
> 标签：php, javascript, jquery, ajax, codeigniter

我一直在寻找一个完整的工作示例，了解如何将 AJAX 与 Codeigniter 一起使用（我是 AJAX 新手）。我见过的帖子/ tuts 都是旧的——所有的编程语言都在发展。

我想在页面上有一个输入表单，它可以向页面返回一些内容（例如变量、数据库查询结果或 html 格式的字符串），而无需刷新页面。在这个简单的示例中，是一个带有输入字段的页面，它将用户输入插入到数据库中。提交输入后，我想加载不同的视图。如果我能理解如何做到这一点，我就能适应它来做我需要的任何事情（希望它也能帮助其他人！）

我的“测试”控制器中有这个：

```
function add(){
    $name = $this->input->post('name');
    if( $name ) {
        $this->test_model->put( $name );
    }
}

function ajax() {
    $this->view_data["page_title"] = "Ajax Test";
    $this->view_data["page_heading"] = "Ajax Test";

    $data['names'] = $this->test_model->get(); //gets a list of names
    if ( $this->input->is_ajax_request() ) { 
        $this->load->view('test/names_list', $data);
    } else {
        $this->load->view('test/default', $data);
    }
} 
```

这是我的视图，名为“ajax”（所以我通过 URL www.mysite.com/test/ajax 访问它）

```
<script type="text/javascript">
    jQuery( document ).ready( function() {
       jQuery('#submit').click( function( e ) {
           e.preventDefault();
           var msg = jQuery('#name').val();
           jQuery.post("
               <?php echo base_url(); ?>
               test/add", {name: msg}, function( r ) {
                   console.log(r);
               });
           });
       });
</script>

<?php echo form_open("test/add"); ?>
<input type="text" name="name" id="name">
<input type="submit" value="submit" name="submit" id="submit">
<?php echo form_close(); ?> 
```

目前发生的所有事情是我输入一个输入，更新数据库并显示视图“test/default”（它不会刷新页面，但不会根据需要显示“test/names_list”。非常感谢提前求任何帮助，让我摆脱痛苦！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T00:13:18.803

为表单设置唯一 ID：

```
echo form_open('test/add', array('id'=>'testajax')); 
```

我假设您想用视图替换表单：

```
jQuery(document).ready(function(){
var $=jQuery;
$('#testajax').submit(function(e){
    var $this=$(this);
    var msg = $this.find('#name').val();
    $.post($this.attr('action'), {name: msg}, function(data) {
      $this.replace($(data));
    });
    return false;
}); 
```

如果您在 json 响应中返回视图的 url，则更好的方法：

```
$.post("<?php echo base_url(); ?>test/add", {name: msg}, function(data) {
  $this.load(data.url);
},"json"); 
```

* * *

从您上一条评论来看 - 我**强烈**不建议更换正文，支持这样的代码将非常困难。

但这里是分析器：

```
$.post("<?php echo base_url(); ?>test/add", {name: msg}, function(data) {
      $('body').replace(data);
    }); 
```

# jquery - Jquery 在结合

> ID：13887100
> 
> 赞同：0
> 
> 时间：2012-12-14T22:23:13.170
> 
> 标签：jquery

我正在使用这些完美运行的功能：

```
 $(document).on('click', '.profile li', function(e) {
            //Alot of cool code
    });
    $(document).on('mouseenter', '.profile li', function(e) {
            //Alot of cool code
    });
    $(document).on('mouseleave', '.profile li', function(e) {
            //Alot of cool code
    });
    $(document).on('keydown', '.profile li', function(e) {
            //Alot of cool code
    }); 
```

但我想将它们组合成这样：

```
 $('.profile li').on({
        mouseenter: function (e) {
             //Alot of cool code
        },
        mouseleave: function (e) {
             //Alot of cool code
        },
        click: function (e) {
            //Alot of cool code
        },
        keydown: function (e) {
            //Alot of cool code
        }
    }); 
```

但是，由于它们依赖于在 dom 之后创建的元素，因此组合代码不起作用。所以我的问题是，有没有办法将它们组合成第二种方式，并且仍然让它们与在 dom 之后创建的类一起工作。将它们结合起来真的有什么意义吗？我似乎记得读过一些更好的地方，但我不记得为什么或者那是否是一个梦......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:32:27.130

只需将选择器作为第二个参数传递，注意使用最接近的静态父对象比使用文档对象更有效。

```
$(document).on({
    mouseenter: function (e) {
         //Alot of cool code
    },
    mouseleave: function (e) {
         //Alot of cool code
    },
    click: function (e) {
        //Alot of cool code
    },
    keydown: function (e) {
        //Alot of cool code
    }
}, '.profile li'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:31:49.873

几天前我问过一个等效的[问题](https://stackoverflow.com/questions/13604582/multiple-jquery-events-on-one-element-with-different-functions-and-target-select)。

我的答案很简单，使用我的解决方法功能[gist](https://gist.github.com/4191657)。

所以你可以像这样简单地使用它：

```
$(document).act(
    ['mouseenter', 'selector1', function() {}],
    ['mouseleave', 'selector2', function() {}],
    ['mousedown', 'selector3', function() {}],
    ['mouseup', 'selector4', function() {}]
); 
```

甚至很简单，没有我的脚本：

```
$(document).on({
    mouseenter: function() {},
    mouseleave: function() {},
    mousedown: function() {},
    mouseup: function() {}
}, "selector"); 
```

但是，这假设您希望对所有这些事件使用相同的选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T22:32:41.997

如果`.profile`是静态元素，试试这个：

```
$('.profile').on({
        mouseenter: function (e) {
             //Alot of cool code
        },
        mouseleave: function (e) {
             //Alot of cool code
        },
        click: function (e) {
            //Alot of cool code
        },
        keydown: function (e) {
            //Alot of cool code
        }
    },'li');​​​​ 
```

# animation - 蓝图动画材质 - 3ds Max 2010

> ID：13887101
> 
> 赞同：0
> 
> 时间：2012-12-14T22:23:16.410
> 
> 标签：animation, 3dsmax

我想在 3ds max 中制作蓝图动画，但材质有问题。它看起来像这样：

[从 3:43 开始观看](http://www.youtube.com/watch?v=CUGe0X0lK3g)

可以给我一个想法，我怎样才能在电影上做这样的材料，或者你知道我可以在哪里下载这样的东西吗？

我使用 3ds Max 2010 和 MentalRay

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:30:17.670

使用 MentalRay 轮廓着色器。有关详细信息，请参阅[此处的手册](http://docs.autodesk.com/3DSMAX/15/ENU/3ds-Max-Help/index.html?url=files/GUID-797FBC38-E08E-41DF-9D02-5C455B7C76E1.htm,topicNumber=d30e429918)。

# jsf-2 - JSF 2 显式导航数据表

> ID：13887107
> 
> 赞同：1
> 
> 时间：2012-12-14T22:23:43.373
> 
> 标签：jsf-2

我们正在从 JSF 1.x 迁移到 JSF 2，我非常期待使用许多新特性。我一直在四处寻找，似乎无法找到原因和/或解决我在显式导航时遇到的问题，其中 h:commandButton 位于数据表中。

正如您在下面看到的，“工作”链接正确重定向到“testPage.xhtml”，但“不工作”链接没有。它只会带您回到您当前所在的页面。这些页面存在于同一目录中。

如果这不起作用那么很好，但我很好奇是否有人遇到过这个问题以及是否有解决方案。

项目信息：

1.  JSF 2.x
2.  围绕表单的 Facelet 模板
3.  富脸

例如，以下代码是我的一个页面的经过清理的子集：

```
 <h:form id="formListHome">
        <h:commandLink id="clWorkingExplicitLink" 
                    action="testPage.xhtml?faces-redirect=true">Working</h:commandLink>     

        <h:panelGroup id="pGrpExistingListUser" rendered="true">

            <h:panelGrid id="pGridListTable" columns="1">

                <rich:extendedDataTable id="edtLists"
                    value="#{listHomeBacking.modelUserLists}"
                    var="userList"
                    selectionMode="none"
                    columnClasses="pull-center, pull-left, pull-center">

                    <!-- List Title -->
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="List Title" />
                        </f:facet>
                        <h:commandLink value="#{userList.titleName}" action="#{listHomeAction.previewList}" />
                    </h:column>

                    <!-- List Title -->
                    <h:column>
                        <f:facet name="header">
                            <h:outputText value="List Edit" />
                        </f:facet>
                        <h:commandLink id="clNOTWorkingExplicitLink" 
                                    action="testPage.xhtml?faces-redirect=true">NOT Working</h:commandLink>     

                    </h:column>

                </rich:extendedDataTable>

            </h:panelGrid>
        </h:panelGroup>
    </h:form> 
```

任何可以帮助解决此问题并更好地理解它为什么不起作用的想法或方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:51:43.337

代码似乎正确，但上下文可能会影响您的结果。您是否检查过 web.xml 中 jsf 页面的 url-mapping 是 *.xhtml ，正如您的代码所建议的那样。如果它是 *.faces 它将不起作用。

所以你应该有：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

不是那个 ：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T18:41:18.430

我终于能够克服这一点。这个问题存在于我的页面 template.xhtml 后面的代码中。在这个模板支持代码中，我试图拉出一个由 servlet 在会话中设置的 UserSesion 对象（@SessionScoped），使用：

HttpSession session = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(true); this.userSess = (UserSessionTO) session.getAttribute("userSession");

然后在使用以下方法更改某些项目后手动将其推回会话：

FacesContext.getCurrentInstance().getExternalContext().getRequestMap().put("userSession", userSess);

问题是每个请求都会发生这种情况，我相信最终导致我的数据表对于每个请求都不同。

不确定我是否应该在我的答案中这样做，但我必须相信这个网站的以下问题/答案可以帮助我回去看看问题是什么。在我发布我的问题后，我发现它很有帮助，它并没有把我带到正确的方向，但它确实有帮助。

[数据表中的 JSF 2.0 commandLink](https://stackoverflow.com/questions/10454800/jsf-2-0-commandlink-in-datatable?rq=1)

# ruby-on-rails - 带条件的多域 ROR 应用

> ID：13887109
> 
> 赞同：1
> 
> 时间：2012-12-14T22:24:08.573
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, data-structures

我正在制作一个职业列表应用程序，其中我将拥有多个域，例如 foo-listing.com / bar-listing.com，其中职业 foo 和 bar 在数据库中将有自己的属性。

专业人士也可以链接到 foo 和 bar，并且必须出现在两个网站上。目前我脑子里有两个解决方案：

*   我制作了 2 个将使用相同数据库的应用程序
*   我制作了 1 个应用程序，在其中列出了基于 url 的职业。我将不同的 url 存储在数据库中，并将它们存储到特定的专业。假设 url 是 foo-listing.com，我会在数据库中查找，会发现它与 foo 专业相关联，我可以列出该专业的所有专业人士。

有比这2更好的解决方案吗？如果不是，哪种解决方案是最好的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:21:35.980

取决于 Foo 和 Bar 职业的实施差异。如果您只想存储专业人员的信息（姓名、电话号码、地址等），我会选择 2。您需要维护的代码更少，更新会更容易。

如果您想拥有不同的应用程序，存储不同的信息，Foo 和 Bar 的不同布局，我建议您拥有一个引擎，它将成为您的应用程序的核心。然后制作一个 Foo 和一个 Bar 应用程序来安装引擎并以不同的方式扩展功能。

# .net - 通过我的电子邮件发送的邮政编码可能有什么问题，我似乎在 Visual Studio 中看不到该代码？

> ID：13887113
> 
> 赞同：-3
> 
> 时间：2012-12-14T22:24:32.287
> 
> 标签：.net, visual-studio-2010

我已经收到了一个我一直在处理的压缩 c++ 文件，一旦我从我的 gmail 帐户中下载了该文件，双击它后，我看到了一堆二进制或十六进制类型的数据，而不是我的 c++ 程序。知道这是怎么回事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:26:28.197

您必须先解压缩文件，然后再打开它。

为此，请下载 7-Zip [http://www.7-zip.org/](http://www.7-zip.org/)或 gzip [http://gnuwin32.sourceforge.net/packages/gzip.htm](http://gnuwin32.sourceforge.net/packages/gzip.htm)

至少在我的系统（我没有为其安装）上，7-Zip 已添加到我的右键单击选项中。使用 gzip 使用命令`path\gzip -d filname.ext`

# coordinates - 基于浏览器的游戏注册

> ID：13887114
> 
> 赞同：1
> 
> 时间：2012-12-14T22:24:40.593
> 
> 标签：coordinates

例如，用户注册游戏，他得到坐标 (5;5)。另一个用户之前在用户附近的某个地方获得坐标，比如说 (8;5)，等等。因此，所有最新注册的用户都彼此接近。

问题是 - 以前生成靠近用户的坐标的最佳方法是什么？

对不起英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:41:19.347

首先，您必须定义新用户将出现多远，然后从现有用户生成位置。

例如，假设 (2;6) 中有一个用户和一个新用户注册。您定义新注册用户将出现的最大距离为 5 个单位。新注册用户的位置将类似于：x = 2 +/- 随机 (0-5) y = 6 +/- 随机 (0-5)

这样，新的用法可能会出现在 (5;4), (7;2), (3;5)......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:49:39.783

您应该决定新用户的距离取决于什么。

案例 1：所有用户在某个点附近生成，例如 (50;50)，两个轴上的最大偏差为 25。

案例 2：所有用户都在前一个生成点附近生成，但有一些偏差。

案例 3：所有用户在前一个生成点附近生成，并根据注册时间差异产生偏差，例如如果两个用户同时注册，他们将在同一点生成，但是如果第二个用户在第一个用户之后 2 分钟生成，偏差将乘以 2。

* * *

无论哪种方式，您都必须保存最后一个生成点才能从中计算出一个新生成点。

至于什么是最好的——你必须自己选择。

# php - 这个循环怎么只能循环4次？

> ID：13887115
> 
> 赞同：-1
> 
> 时间：2012-12-14T22:24:40.563
> 
> 标签：php, mysql, sql

我正在制作一个 PHP 来检查朋友关系表中的朋友 ID，然后返回朋友的信息。问题是，第一个循环循环了 2 次，没错，当我检查第二个循环的计数值时，我发现它等于 4，怎么会发生这种情况，第二个表有 4 行？

这是代码：

```
 while ($rowres = mysql_fetch_array($listres))
        {
            if ($_GET["ID"] == $rowres["ID"])
            {
                while ($row = mysql_fetch_array($result)) 
                {
                    $count++;
                     if ($rowres["FID"] == $row["ID"])
                        {

                        }
                }

            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:35:53.860

内部循环将只循环结果一个循环，因为在它循环到 $result 的最后一个元素之后 result 的指针将指向最后一个元素之后，这里最简单的方法可能是将指针重置为顶部：

```
while ($rowres = mysql_fetch_array($listres))
        {
            if ($_GET["ID"] == $rowres["ID"])
            {
                mysql_data_seek($result,0);  //<-HERE
                while ($row = mysql_fetch_array($result)) 
                {
                    $count++;
                     if ($rowres["FID"] == $row["ID"])
                        {

                        }
                }

            }
        } 
```

# **请注意：mysql 扩展已*弃用*，将来将被删除。而是使用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)**

# c - 如何防止 Visual C 编译器优化“未使用”的全局变量

> ID：13887120
> 
> 赞同：1
> 
> 时间：2012-12-14T22:25:23.113
> 
> 标签：c, visual-studio-2010, visual-c++, linker

> **可能重复：**
> [为什么 const 在 C++ 中暗示内部链接，而在 C 中却没有？](https://stackoverflow.com/questions/998425/why-does-const-imply-internal-linkage-in-c-when-it-doesnt-in-c)
> [什么是 C++ 中的外部链接和内部链接](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)

我有两个 C 文件，我正在尝试编译为可执行文件。一个文件只包含一个如下声明（简化）。

```
const char *foo[2] = {"thing1", "thing2"}; 
```

第二个 c 文件执行此操作

```
extern const char *foo[2];
main()
{
 //Code that does stuff with foo
} 
```

编译时出现链接器错误，提示 foo 是未解析的外部符号。我假设编译器正在优化 foo。这里有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T22:43:05.440

你的声明没有错。假设您将显式添加`int`为`main`. 我能想到的链接器错误的唯一解释是您忘记向链接器提供所有必需的目标文件。

`const`试图通过在 C++ 中对象具有内部链接这一事实来解释此问题的答案具有误导性且无关紧要。上述对象`foo`不是`const`对象。

# php - MySQL有什么问题？

> ID：13887128
> 
> 赞同：0
> 
> 时间：2012-12-14T22:25:57.590
> 
> 标签：php, mysql

`INSERT`不起作用，不知道为什么。

db.php：

```
function check($value)
{
    if ($value)
        return htmlspecialchars(stripslashes(trim($value)));
    else
        return null;
}

$db_host = 'localhost';
$db_user = 'root';
$db_pass = '';
$db_name = 'cart';

$connect = mysql_connect($db_host, $db_user, $db_pass) or die ('no connect');
mysql_select_db($db_name) or die ('no db');

function add($name, $price, $description, $image)
{
    global $connect;

    $sql = "INSERT INTO items (name, price, description, image)
            values ('{$name}', '{$price}', '{$description}', '{$image}');";
    $query = mysql_query($sql, $connect);

    if (!$query)
        die(mysql_error());

    mysql_close($connect);
} 
```

添加.php：

```
header('Content-Type: text/html; charset=utf-8');
mb_internal_encoding('utf-8');
include_once('./db.php');

$name = check($_POST['name']);
$price = check($_POST['price']);
$description = check($_POST['description']);
$image = check($_POST['image']);

if ($name && $price && $description && $image)
{
    add($name, $price, $description, $image);
    echo 'sent';
} 
```

当我收到`sent`消息时，表中没有新行`items`。我使用 phpmyadmin 检查它。

使用此代码（通过安装脚本）创建数据库：

```
function reset_mysql()
{
    global $connect;

    $sql = "CREATE TABLE items (
        id INT AUTO_INCREMENT NOT NULL,
        name VARCHAR(50) NOT NULL,
        price VARCHAR(10) NOT NULL,
        description VARCHAR(200) NOT NULL,
        image VARCHAR(30) NOT NULL,
        primary key (id)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;";

    $query = mysql_query($sql, $connect);

    if (!$query)
        die(mysql_error());

    mysql_close($connect);
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:08:15.600

Finally fixed by replacing `mysql_connect` to the `add` function:

```
function add($name, $price, $description, $image)
{
    global $db_host, $db_user, $db_pass, $db_name;

    $connect = mysql_connect($db_host, $db_user, $db_pass) or die ('no connect');
    mysql_select_db($db_name) or die ('no db');

    $sql = "INSERT INTO items (name, price, description, image)
            values ('{$name}', '{$price}', '{$description}', '{$image}');";
    $query = mysql_query($sql, $connect);

    if (!$query)
        die(mysql_error());

    mysql_close($connect);
} 
```

Thanks for all of the comments, you're awesome!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:30:47.630

> $sql = "插入项目值 ('', '$name', '$price', '$description', '$image')";

更新

# objective-c - 如何编写电子邮件编写器取消委托方法？

> ID：13887134
> 
> 赞同：0
> 
> 时间：2012-12-14T22:26:38.450
> 
> 标签：objective-c, rubymotion

我正在使用 Rubymotion 构建一个 iOS 应用程序。我正在使用内置的电子邮件作曲家，但在创建取消委托方法时遇到了麻烦。

*这是它在 Objective C 中的样子：*

```
-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error{

[controller dismissModalViewControllerAnimated:YES];

} 
```

*这就是我在 Ruby 中启动它的方式，但它是错误的：*

```
 def MFMailComposeViewController(didFinishWithResult:lambda{ |error|

    self.dismissModalViewControllerAnimated(true)

  }) 
```

从 Objective C 转换到 Ruby 需要帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T23:59:44.250

这只是一种正常的方法。lambda 是不必要的。

此外，您需要每个 RubyMotion 文档的错误指针：[http ://www.rubymotion.com/developer-center/guides/runtime/#_pointers](http://www.rubymotion.com/developer-center/guides/runtime/#_pointers)

```
error_ptr = Pointer.new(:object)
def mailComposeController(controller, didFinishWithResult:result, error: error_ptr)
  self.dismissModalViewControllerAnimated(true)
end 
```

# java - Apache Kafka Java 类？

> ID：13887136
> 
> 赞同：5
> 
> 时间：2012-12-14T22:26:57.260
> 
> 标签：java, scala, apache-kafka

我正在尝试使用 Java 程序导入 kafka 类，但找不到需要导入的 Java 类，例如：

```
import kafka.message.Message;
import kafka.utils.Utils; 
```

谁能告诉我在哪里可以找到这些 Java 类以及如何提供它们？在我看来，Kafka 是用 Scala 编写的，所以在下载其源代码后我找不到那些 java 类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T23:25:37.900

如果您还没有这样做，您首先需要构建 Kafka 版本：

```
 `tar xzf kafka-[VERSION].tgz`
`cd kafka-[VERSION]`
`./sbt update`
`./sbt package` 
```

然后，最简单的做法是将生成的 kafka-[VERSION].jar（在 kafka-0.7.2-incubating-src/core/target/scala_2.8.0/ 中）和其他需要的依赖项放在构建路径上，然后它应该工作。

所有依赖项（在 kafka-[VERSION]-incubating-src/core/lib_managed/scala_2.8.0/compile/ 中）都通过 sbt 更新解决。

您可以按照[http://kafka.apache.org/07/quickstart.html上的步骤进行操作](http://kafka.apache.org/07/quickstart.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-21T21:02:08.607

## 在 Ubuntu 上使用 apache kafka jar 的最小 Java 程序示例：

你需要的 jars 应该在你的 kafka 安装的 libs 目录中。将它们复制到您的 java 程序可以访问它们的位置。

**对于新手来说，一个演练。把它放在一个名为 Main.java 的文件中：**

```
import java.util.*;
import kafka.producer.*;
import kafka.utils.*;

public class Main{
   public static void main(String[] args) {
       Properties props = new Properties();
       props.put("metadata.broker.list", "broker1:9092,broker2:9092");
       props.put("serializer.class", "kafka.serializer.StringEncoder");
       props.put("partitioner.class", "example.producer.SimplePartitioner");
       props.put("request.required.acks", "1");
       ProducerConfig config = new ProducerConfig(props);
       System.out.println("k");
   }
} 
```

假设你正确安装了 apache kafka，那么在你的 kafka 安装目录下你会找到一个`libs`目录。在里面你会发现一堆jar文件。

我感兴趣的 3 个罐子是：

```
kafka_2.10-0.8.1.1.jar
scala-library-2.10.1.jar
log4j-1.2.15.jar 
```

将这些 jar 复制到 Main.java 文件旁边。

**编译它：**

```
javac -cp .:kafka_2.10-0.8.1.1.jar:scala-library-2.10.1.jar:log4j-1.2.15.jar Main.java 
```

**运行：**

```
el@apollo:~$ java -cp .:kafka_2.10-0.8.1.1.jar:scala-library-2.10.1.jar:log4j-1.2.15.jar Main
k
el@apollo:~$ 
```

**笔记：**

该程序不会抱怨缺少 kafka.producer 类。这意味着您正确导入了 kafka 类。

# windows - Solaris Shell/终端仿真器窗口

> ID：13887138
> 
> 赞同：-1
> 
> 时间：2012-12-14T22:27:05.277
> 
> 标签：windows, shell, solaris

嗨，我正在寻找一个模拟 windows 终端的 solaris 来执行我拥有的一些特定于环境的脚本。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T22:34:14.150

我不相信这样的事情存在。您最好的选择可能是 Solaris VM。您可以从 Oracle 下载一个和 VirtualBox。

[这是一个讨论 VM 使用的博客条目](https://blogs.oracle.com/observatory/entry/solaris_11_express_virtualbox_vm)

# android - 使用 Android AccountManager 通过 UserService 进行 AppEngine 登录

> ID：13887143
> 
> 赞同：4
> 
> 时间：2012-12-14T22:27:31.853
> 
> 标签：android, google-app-engine, oauth

我正在使用 Google AppEngine，并且正在使用他们的[UserService](https://developers.google.com/appengine/docs/java/gettingstarted/usingusers)类来处理用户帐户和登录。我不需要访问有关他们帐户的任何信息 - 我只是用它来区分用户。

现在该网站大多只是一个后端。我正在为前端使用 Android 应用程序。[我知道您可以使用AccountManager](http://developer.android.com/training/id-auth/authenticate.html)在设备上访问 Google 用户帐户。这绝对是让用户登录的最安全的方式。我有很多工作要做。

我被卡住的地方是将登录信息从 Android 应用程序传递到 AppEngine 网站。从我准备好的情况来看，我应该使用 OAuth，我在[这里](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android)看到了将它与 Google API 一起使用的演练，但我不需要访问 API，只需登录即可。我已经能够获得身份验证应用程序中的令牌，但我不确定如何将其传递给网站，或者这是否是正确的方向。我应该像[这个人](https://stackoverflow.com/questions/10400428/can-i-use-androids-accountmanager-for-getting-oauth-access-token-for-appengine)一样在服务器上使用特定的 OAuth 登录吗？

任何帮助将不胜感激！

以下是相关代码：

服务器（GAE）：

```
UserService userService = UserServiceFactory.getUserService();
User user = userService.getCurrentUser();

if (user == null) {
    resp.sendRedirect(userService.createLoginURL(req.getRequestURI()));
    return;
} 
```

客户端（安卓）：

```
AccountManager am = AccountManager.get(this);
Account[] accounts = am.getAccountsByType("com.google");

Bundle options = new Bundle();

am.getAuthToken(
        accounts[0],                     // Account retrieved using getAccountsByType()
        "Manage your tasks",            // Auth scope
        options,                        // Authenticator-specific options
        this,                           // Your activity
        new OnTokenAcquired(),          // Callback called when a token is successfully acquired
        new Handler(new OnError()));
//Now what!? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:42:57.123

这篇[博](http://blog.notdot.net/2010/05/Authenticating-against-App-Engine-from-an-Android-app)文正好涵盖了我所需要的。

对于两个替代（在我看来不太理想）解决方案，请查看此线程：[Webservice credentials - OpenID/Android AccountManager？](https://stackoverflow.com/questions/3352592/webservice-credentials-openid-android-accountmanager)

# php - php rss 提要字符编码多语言提要项目

> ID：13887151
> 
> 赞同：2
> 
> 时间：2012-12-14T22:28:28.813
> 
> 标签：php, character-encoding, rss

我为一个网站创建了一个 rss 提要，但它有 2 种语言——希腊语和英语。当一个项目的标题用希腊语写成时，除了 rss 提要，一切都很好。

所以我虽然可以，但我必须在解析字符串之前更改编码。我失败了100%。

我已经尝试了 php 提供的每个编码函数：iconv、ut8_encode、mb_convert_encoding 以及 mb_detect_encoding 严格而不是。我也使用了 html 实体，但似乎没有任何效果

生成 rss 的源代码是这样的：

```
function construct_rss($results, $cat = null)
{

    if($results == false)
    {
        exit;
    }

    header('Content-Type: application/rss+xml charset=UTF-8');

    $rssfeed = '<?xml version="1.0" encoding="utf-8" ?>';
    $rssfeed .= '<rss version="2.0">';
    $rssfeed .= '<channel>';
    $rssfeed .= '<title>domain.com RSS feed</title>';
    $rssfeed .= '<link>http://www.domain.com</link>';
    if($cat == null)
    {
        $rssfeed .= '<description>Upcoming events</description>';
    }
    else
    {
        $rssfeed .= '<description>Upcoming events - ' . $cat . '</description>';
    }
    $rssfeed .= '<language>en-us</language>';
    $rssfeed .= '<copyright>Copyright (C) 2012 domain.com</copyright>';

    foreach ($results as $key => $event) 
    {
        $exp = explode(',',$event['vName']);
        $vName = $exp[0]; 

        $rssfeed .= '<item>';
        $rssfeed .= '<title>' . $event['eTitle'] . ' @ ' . $vName . '</title>';
        $rssfeed .= '<description>' . htmlentities('<a href="http://www.domain.com/event.php?eid=' . $event['id'] .'"><img WIDTH="150" HEIGHT="220" style="width:150px;height:220px;padding-bottom:10px;padding-right:10px;" src="http://'.$_SERVER['SERVER_NAME'].'/image.php?source='.urlencode('events/'.$event['folder'].'/images/default/' . $event['file_1']).'&w=150&h=220&out=raw"></a>' . '<p>' . $event['eDescr'] . '</div>') . '</description>';
        $rssfeed .= '<link>http://www.'.$_SERVER['SERVER_NAME'].'/events/' . urlencode($event['eCategory']) . '/' .urlencode($event['url']). '</link>';
        $rssfeed .= '<pubDate>' . date("D, d M Y H:i:s O", strtotime($event['dStart'] . ' ' . $event['tStart'])) . '</pubDate>';
        $rssfeed .= '</item>';
    }

    $rssfeed .= '</channel>';
    $rssfeed .= '</rss>';

    echo $rssfeed;

} 
```

这是一个原始输出：

```
<?xml version="1.0" encoding="utf-8" ?><rss version="2.0">
<channel>
<title>domain.com RSS feed</title>
<link>http://www.domai.com</link>
<description>Upcoming events</description>
<language>en-us</language><copyright>Copyright (C) 2012 domain.com</copyright>
<item>
<title>Î•Î™Î£Î’ÎŸÎ›Î•Î‘Î£ & EVERSOR - O Î¼ÏÎ¸Î¿Ï‚ ÎºÎ±Ï„Î±ÏÏÎ­ÎµÎ¹ @ Gagarin 205 Live Music Space</title>
<description>&lt;a href=&quot;http://www.domain.com/event.php?eid=209&quot;&gt;&lt;img WIDTH=&quot;150&quot; HEIGHT=&quot;220&quot; style=&quot;width:150px;height:220px;padding-bottom:10px;padding-right:10px;&quot; src=&quot;http://www.comain.com/image.php?source=events%2F985d6bfa8e35df69471b1ecdb9ed187e%2Fimages%2Fdefault%2Feisvo.jpg&amp;w=150&amp;h=220&amp;out=raw&quot;&gt;&lt;/a&gt;&lt;p&gt;&lt;p&gt;&lt;span style=&quot;color: #333333; font-family: lucida grande, tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 16px;&quot;&gt;&amp;Epsilon;&amp;Iota;&amp;Sigma;&amp;Beta;&amp;Omicron;&amp;Lambda;&amp;Epsilon;&amp;Alpha;&amp;Sigma; &amp;amp; EVERSOR - &quot;&amp;Omicron; &amp;Mu;&amp;Upsilon;&amp;Theta;&amp;Omicron;&amp;Sigma; &amp;Kappa;&amp;Alpha;&amp;Tau;&amp;Alpha;&amp;Rho;&amp;Rho;&amp;Epsilon;&amp;Epsilon;&amp;Iota;&quot; TOUR LIVE @ &amp;Alpha;&amp;Theta;&amp;Eta;&amp;Nu;&amp;Alpha; (GAGARIN205), &amp;Sigma;&amp;Alpha;&amp;Beta; 22/12&lt;/span&gt;&lt;br style=&quot;color: #333333; font-family: lucida grande, tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 16px;&quot; /&gt;&lt;br style=&quot;color: #333333; font-family: lucida grande, tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 16px;&quot; /&gt;&lt;span style=&quot;color: #333333; font-family: lucida grande, tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 16px;&quot;&gt;doors open: 20.00&lt;/span&gt;&lt;br style=&quot;color: #333333; font-family: lucida grande, tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 16px;&quot; /&gt;&lt;span style=&quot;color: #333333; font-family: lucida grande, tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 16px;&quot;&gt;ticket price: 10e&lt;/span&gt;&lt;br style=&quot;color: #333333; font-family: lucida grande, tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 16px;&quot; /&gt;&lt;span style=&quot;color: #333333; font-family: lucida grande, tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 16px;&quot;&gt;guests: 12os Pithikos &amp;amp; Hatemost&lt;/span&gt;&lt;br style=&quot;color: #333333; font-family: lucida grande, tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 16px;&quot; /&gt;&lt;span style=&quot;color: #333333; font-family: lucida grande, tahoma, verdana, arial, sans-serif; font-size: 13px; line-height: 16px;&quot;&gt;opening: Gelws&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;</description><link>http://www.www.domain.com/events/Hip-Hop+Rap/%CE%95%CE%99%CE%A3%CE%92%CE%9F%CE%9B%CE%95%CE%91%CE%A3-EVERSOR-%CE%9F-%CE%9C%CE%A5%CE%98%CE%9F%CE%A3-%CE%9A%CE%91%CE%A4%CE%91%CE%A1%CE%A1%CE%95%CE%95%CE%99-0</link>
<pubDate>Sat, 22 Dec 2012 20:00:00 +0200</pubDate>
</item>
</channel>
</rss> 
```

如您所见，问题出在项目的标题上。

如果有人可以指出一个方向或某事，因为我无法弄清楚这一点。我认为通过转换`$event['eTitle']`编码它会起作用，但没有运气。

**编辑：**作为 TEXT utf8_general_ci 存储在 db 中

**编辑2：**这似乎工作->

`utf8_encode(htmlentities($event['eTitle'],ENT_COMPAT,'utf-8'))`

但在 W3C 验证器上，我收到此错误：第 268 列：XML 解析错误：：1：268：未定义实体

这是突出显示的部分：

```
EVERSOR - O &mu;Ã\x8fÂ\x8d&theta; 
```

\x8f 和 \x8d 导致此错误。但为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T09:48:03.013

它应该是：`header('Content-Type: application/rss+xml; charset=UTF-8');`，您缺少分号。您的数据已经是 UTF-8，这可以通过`htmlentities`在`&theta;`指定 UTF-8 时进行计算来证明。由于您的数据已经采用 UTF-8 格式，`utf8_encode`因此情况会更糟。

不需要任何转换，您应该检查正确的标题是否有任何变化。您的原始输出是正确的，只是它被解释为 Windows-1252 而不是 UTF-8。

* * *

顺便说一句，在 XML中`&mu;`，默认情况下`&theta;` *是*未定义的实体。这显示了如何定义实体的示例，但实际上并不有效：

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE channel
[
    <!ENTITY mu   "&#924;">
    <!ENTITY theta   "&#920;">
]>
<channel>
EVERSOR - O &mu;Ã\x8fÂ\x8d&theta;
</channel> 
```

然而，它在 chrome 和 firefox 中正确显示，没有未定义的实体错误。

这只是补充信息，您的原始数据首先是正确的，因此无需做任何事情。

# ios - ios - 我如何检测是否以及在 UITableView 的项目列表中点击了哪个项目

> ID：13887153
> 
> 赞同：1
> 
> 时间：2012-12-14T22:28:32.067
> 
> 标签：ios, uitableview, ios5

我有一个填充列表的文本项列表。它的代码如下所示：

```
// CREATING EACH CELL IN THE LIST
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"business";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if(!cell){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:17];
        cell.textLabel.numberOfLines = 0;
        cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
    }

    cell.textLabel.text = [cellTitleArray objectAtIndex:indexPath.row];

    // CLOSE THE SPINNER
    [spinner stopAnimating];

    // return the cell for the table view
    return cell;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UIFont *cellFont = [UIFont fontWithName:@"Helvetica" size:17];
    CGSize constraintSize = CGSizeMake(self.itemList.frame.size.width, MAXFLOAT);

    CGSize labelSize = [[cellTitleArray objectAtIndex:indexPath.row] sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

    return labelSize.height + 30;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    

} 
```

我想做的是让这个人选择编辑每个项目。一种有意义的方法是使其成为一个 2 列列表，并在右侧列中创建一个类似“>”的字符，这样他们就可以点击它，它会给他们一个编辑项目的选项。

在这种情况下怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:39:55.670

要捕获一行，请单击：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // Use indexPath.row to find your selection
    ...
} 
```

如果您观看仅捕获一个按钮或类似的点击：

```
[self.buttono addTarget:self action:@selector(doAction) forControlEvents:UIControlEventTouchUpInside]; 
```

如果您想使用`accessoryType`，您可以将此代码放在您的`cellForRowAtIndexPath`方法中。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // Pick an indicator to suit your need/look
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
} 
```

然后你像这样在点击上采取行动

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {
    // Perform action for this click on row indexPath.row
} 
```

如果您`indexPath.row`不足以区分您的点击（我不明白为什么它不会！）那么您可以随时`setTag`在您的披露按钮上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:39:26.413

```
 [self.tableView indexPathForSelectedRow]; 
```

还

```
 [self.tableView indexPathForCell:sender]; //if you have a sender 
```

# java - 如何获取 Swing ListSelectionEvent 的“源”项？

> ID：13887161
> 
> 赞同：1
> 
> 时间：2012-12-14T22:29:18.003
> 
> 标签：java, swing, jlist, listselectionlistener

我正在尝试`ListSelectionListener`为一个`JList`知道用户选择的列表项以及用户选择的列表项。因此，如果列表中包含三个项目`{Apple, Orange, Pear}`，并且当前选择处于打开状态`Orange`并且用户选择了`Pear`，那么：

*   `srcFruit`是`Orange`；和
*   `destFruit`是`Pear`

这是我的代码：

```
myList.addListSelectionListener(new ListSelectionListener() {
    public void valueChanged(ListSelectionEvent fruitSelectionEvent) {
        printSourceAndDestFruit(myList, fruitSelectionEvent);
    }
});

private void printSourceAndDestFruit(JList list, ListSelectionEvent event) {
    FruitVO srcFruit = (FruitVO)list.getModel().getElementAt(event.getFirstIndex());
    FruitVO destFruit = (FruitVO)list.getModel().getElementAt(event.getLastIndex());

    System.out.println("srcFruit = " + srcFruit.getName() + " and destFruit = " = destFruit.getName());
} 
```

当应用程序加载并初始化 时`JList`，没有默认选择。当我采取以下行动时：

1.  点击`Orange`
2.  点击`Pear`
3.  `Orange`再次点击

这是我得到的打印输出：

```
srcFruit = Orange and destFruit = Pear
srcFruit = Orange and destFruit = Pear 
```

我在哪里错了？是`getFirstIndex()`/ `getLastIndex()`buggy 还是不是正确的 Swing 方法？

这是我应该看到的输出：

```
srcFruit = Orange and destFruit = Pear
srcFruit = Pear and destFruit = Orange 
```

因此，即使我进行了 3 次选择（鼠标单击），由于我第一次单击`Orange`并没有从一个值更改为下一个值，我*相信*不触发和调用是正确的`printSourceAndDestFruit`。I select `Pear`and it is correct in statement that `srcFruit`is `Orange`and that `destFruit`is `Pear`. 但是当我点击回到`Orange`第二个 println 应该有`srcFruit`as`Pear`和`destFruit`as `Orange`。**为什么不呢？！？！**

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:07:36.233

第一个和最后一个索引不是您认为的那样。这是javadoc所说的：

> 获取第一索引（）
> 
> 返回其选择可能已更改的第一行的索引。
> 
> 获取上一个索引（）
> 
> 返回其选择可能已更改的最后一行的索引。

因此，由于每次单击时梨和橙色的选择都会发生变化，并且由于梨在列表中的橙色之后，所以`getFirstIndex()`总是返回橙色并且`getLastIndex()`总是返回梨。

如果要将新的选择与上一个进行比较，则将最后的选择保存在某个成员变量中，并在每次选择更改时将其与新的选择进行比较，并`getValueIsAdjusting()`返回false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T03:51:02.780

选择在 order 中的原因是`Orange`调用`Pear`fireValueChanged`DefaultListSelectionModel`仅[基于](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultListSelectionModel.html#fireValueChanged%28int,%20int%29)项目索引位置`ListModel`而不是新的选择索引。

这个相关的[错误报告](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6378891)提出了一个类似的问题，但表明这是正常行为，并表明您可以使用以下方法添加解决方法：

```
FruitVO srcFruit = (FruitVO)list.getModel().getElementAt(list.getMinSelectionIndex());
FruitVO destFruit = (FruitVO)list.getModel().getElementAt(list.getMaxSelectionIndex()); 
```

# javascript - 在表中获取 tr 索引

> ID：13887162
> 
> 赞同：0
> 
> 时间：2012-12-14T22:29:28.310
> 
> 标签：javascript, html

我有下表，我正在使用下面的代码来获取带有 id tbl1 的 tr 的索引。问题是返回的索引应该是 2 在 IE 中是正确的，但它在 chrome 中是 3和firefox。有人可以告诉我我在这里做错了什么。

```
var parent = document.getElementById("tbl1").parentElement;
    var tr = document.getElementById("tbl1");
    var index = -1;
    for (var i = 0; i < parent.childNodes.length; i++) {
        if (parent.childNodes.item(i) == tr) {
            index = ++i;
            break;
        }
    }

<TABLE border=0 cellSpacing=0 cellPadding=0><TBODY>
<TR>
</TR>
<TR id="tbl1">
</TR>
<TR></TR>
</TBODY></TABLE> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:40:53.697

如何使用`rowIndex`：

```
var tr = document.getElementById("tbl1"),
    index = tr.rowIndex + 1;

console.log(index);  // => 2 
```

## [看演示](http://jsfiddle.net/LHqmK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:11:13.267

我知道你没有要求使用 jQuery 的解决方案，无论如何：

```
$('#tbl1').index()+1 
```

也给你2。

它适用于任何类型的节点，不仅是 TR。

# qt - 如何优化在 OpenGL 中显示大量四边形？

> ID：13887164
> 
> 赞同：1
> 
> 时间：2012-12-14T22:29:41.323
> 
> 标签：qt, opengl

我正在尝试使用 OpenGL 和 C++ 以有效的方式显示在 XY 常规网格上定义的数学曲面 f(x,y)：

```
struct XYRegularSurface {
    double x0, y0;
    double dx, dy;
    int    nx, ny;
    XYRegularSurface(int nx_, int ny_) : nx(nx_), ny(ny_) {
       z = new float[nx*ny];
    }
    ~XYRegularSurface() {
       delete [] z;
    }
    float& operator()(int ix, int iy) {
       return z[ix*ny + iy];
    }

    float x(int ix, int iy) {
       return x0 + ix*dx;
    }
    float y(int ix, int iy) {
       return y0 + iy*dy;
    }
    float zmin(); 
    float zmax(); 
    float* z; 
 }; 
```

到目前为止，这是我的 OpenGL 绘制代码：

```
void color(QColor & col) {
    float r = col.red()/255.0f;
    float g = col.green()/255.0f;
    float b = col.blue()/255.0f;
    glColor3f(r,g,b);
}

void paintGL_XYRegularSurface(XYRegularSurface &surface, float zmin, float zmax) {
    float x, y, z;

    QColor col;
    glBegin(GL_QUADS);
    for(int ix = 0; ix < surface.nx - 1; ix++) {
        for(int iy = 0; iy < surface.ny - 1; iy++) {
            x = surface.x(ix,iy);
            y = surface.y(ix,iy);
            z = surface(ix,iy);
            col = rainbow(zmin, zmax, z);color(col);
            glVertex3f(x, y, z);

            x = surface.x(ix + 1, iy);
            y = surface.y(ix + 1, iy);
            z = surface(ix + 1,iy);
            col = rainbow(zmin, zmax, z);color(col);
            glVertex3f(x, y, z);

            x = surface.x(ix + 1, iy + 1);
            y = surface.y(ix + 1, iy + 1);
            z = surface(ix + 1,iy + 1);
            col = rainbow(zmin, zmax, z);color(col);
            glVertex3f(x, y, z);

            x = surface.x(ix, iy + 1);
            y = surface.y(ix, iy + 1);
            z = surface(ix,iy + 1);
            col = rainbow(zmin, zmax, z);color(col);
            glVertex3f(x, y, z);

        }
    }
    glEnd();
} 
```

问题是这很慢，nx=ny=1000 和 fps ~= 1。如何优化它以使其更快？

编辑：按照您的建议（谢谢！）关于我添加的 VBO：

```
float* XYRegularSurface::xyz() {
    float* data = new float[3*nx*ny];
    long i = 0;
    for(int ix = 0; ix < nx; ix++) {
        for(int iy = 0; iy < ny; iy++) {
            data[i++] = x(ix,iy);
            data[i++] = y(ix,iy);
            data[i] = z[i]; i++;
        }
    }
    return data;
} 
```

我想我了解如何创建 VBO，将其初始化为 xyz() 并将其一次性发送到 GPU，但是在绘图时如何使用 VBO。我知道这可以在顶点着色器中完成，也可以通过 glDrawElements 完成？我认为后者更容易？如果是这样：我在 glDrawElements 的文档中看不到任何 QUAD 模式！？

Edit2：所以我可以循环遍历所有 nx*ny 四边形并通过以下方式绘制每个四边形：

```
GL_UNSIGNED_INT indices[4];
// ... set indices
glDrawElements(GL_QUADS, 1, GL_UNSIGNED_INT, indices); 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:54:54.137

1/。使用[显示列表](http://www.glprogramming.com/red/chapter07.html)来缓存 GL 命令 - 避免重新计算顶点和昂贵的每个顶点调用开销。如果数据更新，您需要查看客户端顶点数组（不要与 VAO 混淆）。现在忽略此选项...

2/。使用[顶点缓冲对象](http://www.opengl.org/wiki/VBO_-_just_examples)。自 GL 1.5 起可用。

由于无论如何您都需要 VBO 来获取[核心配置文件](http://www.opengl.org/wiki/Core_And_Compatibility_in_Contexts)（即现代 GL），因此您至少可以先掌握这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:21:54.363

好吧，你问了一个相当开放的问题。我建议对所有东西都使用现代（3.0+）OpenGL。几乎任何新的 OpenGL 特性的意义在于提供一种更快的方式来做事。就像其他人建议的那样，使用数组（顶点）缓冲区对象和顶点数组对象。也使用元素数组（索引）缓冲区对象。大多数 GPU 都有一个“转换后缓存”，它存储最后几个转换后的顶点，但这只能在您调用 glDraw*Elements 系列函数时使用。我还建议您在 VBO 中存储一个平面网格，其中每个顶点的 y=0。从顶点着色器中的高度贴图纹理中采样 y。如果这样做，每当表面发生变化时，您只需要更新高度图纹理，这比更新 VBO 更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T23:28:29.433

> 如果是这样：我在 glDrawElements 的文档中看不到任何 QUAD 模式！？

如果您想要四边形，请确保您查看的是[GL 2.1 时代的文档](http://www.opengl.org/sdk/docs/man2/xhtml/glDrawElements.xml)，而不是[新的东西](http://www.opengl.org/sdk/docs/man/xhtml/glDrawElements.xml)。

# java - j_security_check 需要用户名来从数据库中填充表单

> ID：13887166
> 
> 赞同：0
> 
> 时间：2012-12-14T22:29:48.090
> 
> 标签：java, j-security-check

我正在处理即将到期的家庭作业，我已经搜索并搜索并搜索了此问题的答案，但我现在不知道该去哪里。

我正在使用带有 Tomcat 7.0 和 MySql 数据库的 Eclipse Juno。我必须为披萨店开发一个 Web 应用程序。我几乎所有东西都在工作，所以如果有要求，我只会在这里发布代码，因为有很多。

我的问题是我有一个调用 j_security_check 的登录表单，它工作得很好。然而，当用户登录时，他们会被带到一个客户表单，该表单应该显示他们的姓名、地址、电话号码，并让他们可以选择编辑其中任何一个或只是开始他们的订单。我的问题是当用户从登录页面重定向到 customer.jsp 页面时，我需要获取 j_username 并从我的数据库中提取客户信息以填充表单。我们不应该在我们的代码中使用 <% ----- %> 如果我们可以帮助它并将其保留在 servlet 中。我只是迷失了如何获取该 j_username 然后调用 servlet 来填充表单（如果我可以获得数据，我可以进行填充）。

请帮忙！！！我知道我在这里遗漏了一些非常简单的东西，这让我发疯了。

好的，我已经尝试了您发送的演示，实际上找到了另一个使用 FORM 的演示，就像我的项目一样。我仍然无法让它工作。我有点失落。当我完全按照他们的方式进行演示时，servlet 会生成文本并输出它。我能够将其更改为 requestDispatcher 并将其发送到我需要它在登录时访问的页面。该演示只是将它转到 url 主机.../YourProject/test 不是实际页面。我不知道如何让它调用 servlet，这样我就可以用我的项目获取标题信息。我有 servlet LoginUser 我希望用户登录 login.jsp 并且有一个 login_error.jsp 以防出错。当用户成功登录时，他们应该被带到 customer.jsp 并且页面上的字段填充了他们的数据。我也需要更改它以使用 SSL，但没有

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:34:03.957

我怀疑您使用的是 Tomcat 中的基本身份验证。查看[这篇文章以获取说明。](http://www.avajava.com/tutorials/lessons/how-do-i-use-basic-authentication-with-tomcat.html)总之，您需要从 servlet 请求中获取身份验证标头并对其进行解析以获取用户名（首先您可能需要对其进行 base64 解码）。然后您可以使用该用户名在数据库中查找必要的信息。

# python - 我有一个代码应该用 O 替换字符串中的随机点

> ID：13887167
> 
> 赞同：-4
> 
> 时间：2012-12-14T22:30:15.333
> 
> 标签：python, if-statement, global-variables

```
def getCSpot():
    global board
    global cspot
    spotchosen = False
    while spotchosen == False:
        spotchosen = False
        cspot = random.randint(0, 8)
        if board[cspot] == 'X' or board[cspot] == 'O':
            cspot = random.randint(0, 8)            
        else:
            spotchosen = True
            board[cspot] = 'O' 
```

我真的不明白为什么这不起作用。它根本不会将 O 放入字符串中。我有另一部分代码确定当连续有 3 个 O 或 X 时是否有赢家，这也不起作用，这是该代码。任何帮助深表感谢。

```
def didwin(player):
    global gameOver
    if (board[0] == player and board[1] == player and board[2] == player or
            board[3] == player and board[4] == player and board[5] == player or
            board[6] == player and board[7] == player and board[8] == player or 
            board[0] == player and board[3] == player and board[6] == player or
            board[1] == player and board[4] == player and board[7] == player or
            board[2] == player and board[5] == player and board[8] == player or 
            board[0] == player and board[4] == player and board[8] == player or
            board[2] == player and board[4] == player and board[6] == player):
        gameOver = True
        if player == 'X':
            print 'congratulations! You won!!'
            endGame()
        else:
            print 'Better luck next time, you lost!'
            endGame() 
```

出于参考目的，这里是 endGame 函数。

```
def endGame():
    global board
    displayBoard()
    answer = ' '
    while answer == ' ':
        print 'Would you like to play another game?'
        answer = raw_input('Y/N')
    if answer == 'Y' or answer == 'y' or answer == 'Yes' or answer == 'yes':
        board = [0, 1, 2, 3, 4, 5, 6, 7, 8]
        game1()
        game()
    elif answer == 'N' or answer == 'n' or answer == 'No' or answer == 'no':
        exit() 
```

编辑：以下是我的整个代码，从头到尾没有编辑。

```
board = [0, 1, 2,
           3, 4, 5,
           6, 7, 8]
import random

def displayBoard():
    global board
    print board[0], '|', board[1], '|', board[2]
    print '----------'
    print board[3], '|', board[4], '|', board[5]
    print '----------'
    print board[6], '|', board[7], '|', board[8]
def getspot():
    global board
    spotchosen = False
    while spotchosen == False:
        spotchosen = False
        playerSpot = int(raw_input('Where would you like to go? '))
        if board[playerSpot] != 'X':
            board[playerSpot] = 'X'
        if board[playerSpot] != 'O':
            board[playerSpot] = 'X'
        if playerSpot == 'X':
            playerSpot = raw_input('You have already chosen that spot. Please choose another. ')
        if playerSpot == 'O':
            playerSpot = raw_input('The computer chose that spot already. Please choose another. ')
        else:
            spotchosen = True
def getCSpot():
    global board
    global cspot
    spotchosen = False
    while spotchosen == False:
        spotchosen = False
        cspot = random.randint(0, 8)
        if board[cspot] == 'X' or board[cspot] == 'O':
            cspot = random.randint(0, 8)            
        else:
            spotchosen = True
            board[cspot] = 'O'
def endGame():
    global board
    displayBoard()
    answer = ' '
    while answer == ' ':
        print 'Would you like to play another game?'
        answer = raw_input('Y/N')
    if answer == 'Y' or answer == 'y' or answer == 'Yes' or answer == 'yes':
        board = [0, 1, 2, 3, 4, 5, 6, 7, 8]
        game1()
        game()
    elif answer == 'N' or answer == 'n' or answer == 'No' or answer == 'no':
        exit()
def didwin(player):
    global gameOver
    if (board[0] == player and board[1] == player and board[2] == player or
            board[3] == player and board[4] == player and board[5] == player or
            board[6] == player and board[7] == player and board[8] == player or 
            board[0] == player and board[3] == player and board[6] == player or
            board[1] == player and board[4] == player and board[7] == player or
            board[2] == player and board[5] == player and board[8] == player or 
            board[0] == player and board[4] == player and board[8] == player or
            board[2] == player and board[4] == player and board[6] == player):
        gameOver = True
        if player == 'X':
            print 'congratulations! You won!!'
            endGame()
        else:
            print 'Better luck next time, you lost!'
            endGame()

    else:
        gameOver = False

def mainGame():
    gameOver = False
    while gameOver == False:
        displayBoard()
        getspot()
        didwin('X')
        didwin('O')
mainGame() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:42:49.303

我很确定，无论是什么问题，都存在于您没有向我们展示的代码中。

`endGame`为了简单起见，我没有测试您的功能。但是我粘贴了您的其他代码，并添加了以下内容：

```
board = [0, 1, 2, 3, 4, 5, 6, 7, 8]
gameOver = False
def endGame():
    print 'endGame called'
for i in range(9):
    getCSpot()
    print(board)
    didwin('O')
    if gameOver:
        print 'gameOver'
        break 
```

结果是：

```
[0, 'O', 2, 3, 4, 5, 6, 7, 8]
[0, 'O', 2, 3, 'O', 5, 6, 7, 8]
[0, 'O', 2, 3, 'O', 5, 'O', 7, 8]
[0, 'O', 2, 3, 'O', 5, 'O', 'O', 8]
Better luck next time, you lost!
endGame called
gameOver 
```

当然序列是随机的，所以每次都不完全相同，但它总是一次用“O”替换一个随机数，直到有一个 3-in-a-row，然后告诉我我输了。

因此，它完全按预期工作。如果您的代码不起作用，则说明您做错了其他事情。也许您正在设置`board`或初始设置中有其他错误？

添加你的`displayBoard`和`endGame`代码，它会一直工作，直到你说'y'来玩另一个游戏，此时它会调用一些名为但不存在的函数，从而`game1`引发.`game``NameError`

我还在你的 start 函数中看到（从你删除的评论中，所以这是从内存中看到的）你正在调用一个`getspot()`在游戏循环中调用的函数，而不是调用`getCSpot()`. 如果`getspot`在某处定义，则问题可能是您有一个正确的功能和一个不正确的功能。或者它可能没有在任何地方定义，并且“不工作”和“根本没有把 O 放在字符串中”你的意思是“没有被调用，因为在我有机会之前游戏停止了异常” ?

现在您已经发布了整个内容，但存在一些明显的问题。

首先，你永远不会`getCSpot`在任何地方打电话。这就是为什么它什么都不做。大概你想要这个：

```
def mainGame():
    gameOver = False
    while gameOver == False:
        displayBoard()
        getspot()
        didwin('X')
        didwin('O')
        getCSpot()
        didwin('X')
        didwin('O') 
```

此外，在 中`getspot`，您的`if`陈述都是错误的。如果 ，您将允许移动`board[playerSpot] != 'X'`，如果 也允许移动`board[playerSpot] != 'O'`- 换句话说，总是。然后你将把玩家算作移动，除非`playerSpot == 'O'`它是假的——它总是这样，因为它应该是一个数字。

我想你想要这个：

```
 if board[playerSpot] == 'X':
        playerSpot = raw_input('You have already chosen that spot. Please choose another. ')
    elif board[playerSpot] == 'O':
        playerSpot = raw_input('The computer chose that spot already. Please choose another. ')
    else:
        board[playerSpot] = 'X'
        spotchosen = True 
```

# text - 添加 到带有批处理脚本的所有文本文件行的开头和结尾？

> ID：13887171
> 
> 赞同：2
> 
> 时间：2012-12-14T22:30:36.973
> 
> 标签：text, batch-file, add

首先感谢您的关注。
我需要批处理脚本来添加`<li>` 到我使用的所有文本文件的开头和结尾。

```
@echo off
set  h=<l>
setLocal EnableDelayedExpansion
for /f "tokens=* delims= " %%a in (input.txt) do (
set /a N+=1
echo %h%^%%a^a>>output.txt
) 
```

但它只适用于 h=any text; 当 h=`<li>`它不起作用时！请帮我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:43:11.953

利用

```
set h=^<l^> 
```

是`^`一个转义字符。这是必需的，因为`<`和`>`是特殊字符。它们在 CMD 中用于重定向文件的输入和输出。

另外，最后一行有两个`^`字符，可能会给您带来麻烦。第一个可能会逃避 的第一个`%`标志`%%a`，我认为这不是您的本意。

# javascript - JavaScript 解析

> ID：13887173
> 
> 赞同：-1
> 
> 时间：2012-12-14T22:30:50.840
> 
> 标签：javascript, screen, resolution

我只想为超过 768 宽度的分辨率运行相等列脚本，但我不知道该怎么做。

这是我的脚本：

```
function setEqualHeight(columns) {
   var tallestcolumn = 0;
   columns.each(function () {
      currentHeight = $(this).height();
      if (currentHeight > tallestcolumn) {
         tallestcolumn = currentHeight;
      }
   });
   columns.height(tallestcolumn);
}

$(document).ready(function () {
   setEqualHeight($(" .container > .content"));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:41:29.237

javascript 已经提供了 Math.max 来查找多个值的最大值，所以我建议使用它。我还建议创建一个简单的 javascript 插件来做到这一点。

```
$.fn.equalHeights = function () {
    if (screen.width >= 768) {
        var heights = [];
        this.each(function () {
            heights.push($(this).height());
        });
        this.height(Math.max.apply(null, heights));
    }
};

$(function () {
    $('div').equalHeights();
});​ 
```

# python - Python：如何将制表符转换为空格？

> ID：13887174
> 
> 赞同：3
> 
> 时间：2012-12-14T22:30:52.993
> 
> 标签：python, syntax, indentation

> **可能重复：**
> [仅在 python 文件中强制执行“空格”或“制表符”？](https://stackoverflow.com/questions/2490686/enforce-spaces-or-tabs-only-in-python-files)

我得到的 Python 代码混合了制表符和空格，并且很难阅读或理解缩进，因为行看起来像是在 IDE 中的某个缩进，但 Python 将它们解析为与它们看起来不同的缩进。Python 中的制表符是否计入一定数量的硬编码空格？有没有办法规范化具有混合制表符/空格的 Python 脚本，以使用一致的间距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:33:20.610

python中= 1个制表符的空格数没有规范值（我喜欢4，但这只是我）。

您可以做的是读入文件并搜索 \t 字符，然后用您需要的许多空格替换这些字符。

编辑：将来可能对您有用的是[Python 的样式指南（又名 PEP8）](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)

# javascript - 使用 DropDownList 值动态更新 DynamicPopulateExtender 的 ContextKey

> ID：13887177
> 
> 赞同：0
> 
> 时间：2012-12-14T22:31:09.047
> 
> 标签：javascript, asp.net, ajax, vb.net, ajaxcontroltoolkit

我有一个 DynamicPopulateExtender 控件，我希望它根据 asp:DropDownList 的值呈现 html。问题是如何编写抓取下拉列表值的javascript，将其分配给DynamicPopulate控件的contextKey，然后触发更新。

目前，当我到达 JavaScript 中的 populate() 方法时，我的代码会冻结，所以我认为我的 JavaScript 需要一些工作。

这是我的 DropDownList、Extender 和我要更新的面板：

```
<asp:DropDownList id="cboResponse" cssclass="DataControl" DataTextField="lov_label" DataValueField="lov_cd" runat="server" />
<asp:Panel ID="pSectFunc" runat="server" />
<ajaxToolkit:DynamicPopulateExtender ID="DPE" runat="server" TargetControlID="pSectFunc" ServicePath="/ajax/SAT.asmx" ServiceMethod="GetPanelHTML" /> 
```

这是我目前拥有的javascript。我可以从下拉菜单中获取值到 ServiceId，但我无法找到并使用正确的 ContextKey 调用扩展程序：

```
<script type="text/javascript">
    function ValPickListSelection(val, args) {
        args.IsValid = document.getElementById(val.controltovalidate).selectedIndex > 0;
    }

    //Need to update the contextKey of the DynamicPopulateExtender with the correct
    //ServiceId so it can render the correct sector-function combination.
    $(document).ready(function () {
        $('#<%= cboResponse.ClientID %>').change(function () {
            var dpe = $('#<%= DPE.ClientID %>');
            var ServiceId = Number($(this).val());

            if (ServiceId > 0) {
                dpe.ContextKey = ServiceId;
                dpe.populate();
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:28:53.140

您需要设置 DynamicPopulateExtender 的 BehaviorID 属性。然后使用 jQuery $find() 获取对控件的引用。

```
<script type="text/javascript">
   $(document).ready(function () {
   $('#<%= cboResponse.ClientID %>').change(function () {
     var dpe = $find('DPE_Behavior');
     var contextKey = Number($(this).val());
       if (dpe) {
         dpe.populate(ServiceId);
       }
     });
   });
</script> 
```

# eclipse - 如何在 Eclipse 中从 ANT 启动启动配置

> ID：13887179
> 
> 赞同：1
> 
> 时间：2012-12-14T22:31:24.180
> 
> 标签：eclipse, ant

有没有办法从我的 ANT 脚本启动运行/调试配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:48:26.070

我相信[Ant4Eclipse](http://www.ant4eclipse.org/)插件可以让您使用 ANT 运行 Eclipse 启动配置。

An[`Exectuor`](http://www.ant4eclipse.org/userguide-coreconcepts)是一个可以运行 Eclipse 启动配置的 ANT 任务。

# forms - Codeigniter 表单验证 alpha

> ID：13887183
> 
> 赞同：-1
> 
> 时间：2012-12-14T22:31:49.610
> 
> 标签：forms, codeigniter, validation, alpha

所以我对codeigniter有疑问。在表单验证中，alpha 仅表示 a、b、c 等等......但是如果在我的语言中是不被 alpha fomr 验证所爱的字母表，我必须做什么？Codeigniter 不让我写那个符号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:33:44.383

使用一个[回调函数](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)来验证除 az 之外的特殊字符。

# ios - 是否可以在 Google 的 Map API 上添加类似于 MapKit 中的 MKOverlay 的叠加层？

> ID：13887185
> 
> 赞同：1
> 
> 时间：2012-12-14T22:32:00.653
> 
> 标签：ios, iphone, google-maps, google-maps-sdk-ios, google-maps-mobile

我们正在试验适用于 iOS 的新谷歌地图 API，我们需要能够添加类似于 MKOverlay 在 Apple 的 MapKit 中所做的叠加层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-03T21:15:12.423

```
 let poly = GMSMutablePath()

    poly .addCoordinate(CLLocationCoordinate2DMake(newLocation.coordinate.latitude, newLocation.coordinate.longitude))

    let polygon = GMSPolygon()
        polygon .path = poly
    polygon.fillColor = UIColor.greenColor()

    polygon.strokeWidth = 4
     polygon.strokeColor = UIColor .redColor()
    polygon.map = self.mapView 
```

# javascript - 我可以在另一个 setTimeout 的处理程序中有一个 setTimeout 吗？

> ID：13887186
> 
> 赞同：11
> 
> 时间：2012-12-14T22:32:06.130
> 
> 标签：javascript, settimeout

这是一个快速（坏掉的）jsfiddle：http: [//jsfiddle.net/wH2qF/](http://jsfiddle.net/wH2qF/)

由于某种原因，这不起作用......是因为我在另一个 setTimeout 的处理程序中有一个 setTimeout 吗？

```
$(function() {
   $("#Volume").click(function() {
      setTimeout(triggerVolumeChange, 4000);
      function triggerVolumeChange() 
      {
          var volumeDiv = document.getElementById("volumeNumber");
          var volumeOld = 8;
          var volumeNew = 37;
          var timeNew = (1000/(volumeNew-volumeOld));
          changeVolume();

          function changeVolume()
          {
             volumeDiv.innerHTML = volumeOld;
             volumeOld++;
             if (volumeOld <= volumeNew) setTimeout(changeVolume, timeNew);
          };
      });
}); 
```

应该指定，为了清楚起见，我从该 Click 函数中删除了其他内容，并澄清了哪些内容不能完全正常工作，好吧，基本上，我点击并没有任何反应，而如果我删掉这段代码，它就可以正常工作.. .实际上vars的设置也可以正常工作（我自然认为）但是当我粘贴或取消注释changeVolume（）函数时，点击再次停止工作......有什么想法吗？

--

另一个澄清：我想要做的是，在点击时，在一个字符串中模拟从 8 到 37 的音量......因此该函数内部的 setTimeout 。

--

根据你的要求，这是整个代码......我怀疑它是否有意义，但它是......仅供参考，点击这将触发一些动画来模拟我正在设计的应用程序的流程。 .

```
<script>
            $(function() {
                $("#Volume").click(function() {

                    var userPrompt = document.getElementById("userPrompt")
                    userPrompt.innerHTML = "Change volume to 37";

                    var avatarIcon = document.getElementById("avatarIcon");
                    avatarIcon.innerHTML = "<img src='imgs/haloIcons-volume_82x76.png' alt='Volume'/>";

                    var hints = document.getElementById("hints");
                    hints.style.opacity = 0;
                    $(".dragonTvOut").toggleClass("dragonTvIn");

                    setTimeout(triggerP, 1000);
                    function triggerP()
                    {
                        var halo = document.getElementById('avatar');
                        if( 'process' in halo ) { 
                            halo.process();
                        };
                    };

                    setTimeout(triggerUserPrompt, 2000);
                    function triggerUserPrompt() 
                    {
                        document.getElementById("userPrompt").className = "userPromptIn";
                    };

                    setTimeout(triggerVolumeChange, 4000);
                    function triggerVolumeChange() 
                    {
                        document.getElementById("userPrompt").className = "userPromptEnd";

                        var halo = document.getElementById('avatar');
                        if( 'resume' in halo ) { 
                            halo.resume();
                        }

                        document.getElementById("avatarIcon").className = "avatarIconEnd";

                        var volumeDiv = document.getElementById("volumeNumber");
                        var volumeOld = 8;
                        var volumeNew = 37;
                        var timeNew = (1000/(volumeNew-volumeOld));
                        changeVolume();

                        function changeVolume()
                        {
                            volumeDiv.innerHTML = volumeOld;
                            volumeOld++;
                            if (volumeOld <= volumeNew) setTimeout(changeVolume, timeNew);
                        }​;

                        var side = 100;
                        var paper = new Raphael(volumeArcAnim, 100, 300);

                        paper.customAttributes.arc = function (xloc, yloc, value, total, R) {

                            var alpha = 360 / total * value,
                                a = (90 - alpha) * Math.PI / 180,
                                x = xloc + R * Math.cos(a),
                                y = yloc - R * Math.sin(a),
                                path;
                            if (total == value) {
                                path = [
                                    ["M", xloc, yloc - R],
                                    ["A", R, R, 0, 1, 1, xloc - 0.01, yloc - R]
                                ];
                            } else {
                                path = [
                                    ["M", xloc, yloc - R],
                                    ["A", R, R, 0, +(alpha > 180), 1, x, y]
                                ];
                            }
                            return {
                                path: path
                            };
                        };

                        var arcWidth = 87;
                        var strokeRadius = arcWidth/2;

                        var indicatorArc = paper.path().attr({
                            "stroke": "#ffffff",
                            "stroke-width": 3,
                            arc: [side/2, side/2, 12, 100, strokeRadius]
                        });

                        indicatorArc.animate({
                            arc: [side/2, side/2, 60, 100, strokeRadius]
                        }, 1500, "<>", function(){
                            // anim complete here
                        });

                    };

                });
            });
            </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T22:37:48.003

是的，你可以`setTimeout()`在另一个里面——这是用于重复定时事件的典型机制。

你的不工作的原因与它`setTimeout()`本身无关。这与您嵌套函数的方式有关。

里面的`changeVolume()`函数`triggerVolumeChange()`意味着你不能直接使用它的名字来引用它。

对您来说最快的解决方案是删除嵌套，以便`changeVolume()`在根级别而不是嵌套在内部`triggerVolumeChange()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T22:35:57.753

你错过了一个`}`：

```
$(function() {
   $("#Volume").click(function() {
      setTimeout(triggerVolumeChange, 4000);
      function triggerVolumeChange()
      {
          var volumeDiv = document.getElementById("volumeNumber");
          var volumeOld = 8;
          var volumeNew = 37;
          var timeNew = (1000/(volumeNew-volumeOld));
          changeVolume();

          function changeVolume()
          {
             volumeDiv.innerHTML = volumeOld;
             volumeOld++;
                 if (volumeOld <= volumeNew) setTimeout(changeVolume, timeNew);
          };
      } // that one was missing
   });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T23:15:57.737

在您损坏的示例[http://jsfiddle.net/wH2qF/](http://jsfiddle.net/wH2qF/)中存在一些问题

*   你忘了告诉 jsfiddle 使用 jQuery
*   卷跨度的 id（在 JS 中）是`ph`但应该是`volumeNumber`（如在 HTML 中）

[单击此处查看工作版本](http://jsfiddle.net/wH2qF/8/)

如果你从 jsfiddle 的库中选择了 jQuery，你会看到一个错误

> 未捕获的类型错误：无法将属性“innerHTML”设置为 null

这使我相信您的 jsfiddle 不能很好地代表您的问题。也许尝试创建另一个减少，因为您添加的那个只有“愚蠢”的错误？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T23:06:24.477

If you don't want to use `setInterval()`, you can make the code work with these changes:

```
$(function() {
    $("#Volume").click(function() {
        setTimeout(triggerVolumeChange, 4000);
        function triggerVolumeChange () {
            var volumeDiv = document.getElementById("volumeNumber");
            var volumeOld = 8;
            var volumeNew = 37;
            var timeNew = (1000/(volumeNew-volumeOld));
            var changeVolume = function () {
                volumeDiv.innerHTML = volumeOld;
                volumeOld++;
                if (volumeOld <= volumeNew) setTimeout(changeVolume, timeNew);
            };
            changeVolume();
        }
    });
}); 
```

Working demo at [jsFiddle](http://jsfiddle.net/G6ynJ/).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-24T15:29:49.160

从技术上讲，计时器的启动位置没有区别。在大多数情况下，它被实现为带有标识符和相关回调处理程序的计时器列表。

所以如果你的逻辑是正确的就可以了。没有不可预知的条件带来无限的调用序列，也没有无限量的超时实例等等。

例如模仿`setInterval`功能：

```
// Bad (unexpected multiple sequences started per each event)

const handler = () => {
  setTimeout(handler)
}

<Button onClick={handler} /> 
```

```
// Good (previous interval closed before start new one)

const [id, idUpdate] = useState(-1)

const handler = () => {
  const id = setTimeout(handler)
  idUpdate(id)
}

const start = () => {
  if(id !===-1) clearTimeout(id)
  idUpdate(-1)
  handler()
}

<Button onClick={start} /> 
```

或其他一些

```
// Bad (infinite events with small time will take all cpu time)

const handler = () => {
  setTimeout(handler, 0) // actually mean several ms
} 
```

```
// Good (special condition for finish iterations)

let count = 20

const handler = () => {
  if(!count) return
  count--
  setTimeout(handler, 0)
} 
```

# google-app-engine - Google App Engine：流量来源

> ID：13887187
> 
> 赞同：1
> 
> 时间：2012-12-14T22:32:14.000
> 
> 标签：google-app-engine

有没有办法确定 Google App Engine 网站的流量来自哪里？例如，用户之前访问的网站？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T23:24:01.153

来自[如何在 Google App Engine 中实现防盗链](https://stackoverflow.com/questions/903144/how-to-implement-hotlinking-prevention-in-google-app-engine)

```
def get(self):
    referer = self.request.headers.get("Referer")
    # Will be None if no referer given in header. 
```

我刚刚在[控制台](http://con.appspot.com/console/)中尝试过这个：

```
import os
os.environ['HTTP_REFERER'] 
```

它回来了

```
'http://con.appspot.com/console/' 
```

但是，在使用之前先检查它是否存在。

# excel - 删除 Ms Excel 2010 中的空列

> ID：13887188
> 
> 赞同：1
> 
> 时间：2012-12-14T22:32:14.333
> 
> 标签：excel, csv, multiple-columns

我有一个 CSV 文件，其中有很多空列。我有 Excel 2010 女士，但我不知道如何使用宏或排序功能。

我已经进行了谷歌搜索并按照步骤操作。他们没有帮助我。有人可以指导我逐步删除空列吗？

**编辑：**

抱歉，我不知道这个网站是如何运作的。我很难通过我的网络搜索历史找到正确的链接，因为我整天都在搜索。

但是我的历史中有一些链接对像我这样的类似人很有帮助（但不是我:()

[http://www.addictivetips.com/windows-tips/how-to-delete-remove-blank-rows-columns-in-excel-2010-spreadsheet/](http://www.addictivetips.com/windows-tips/how-to-delete-remove-blank-rows-columns-in-excel-2010-spreadsheet/) [http://www.mrexcel.com/archive/VBA/ 11225.html](http://www.mrexcel.com/archive/VBA/11225.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T23:25:16.787

这是一个宏，它将遍历所有列，从包含任何数据的最后一个列到第一个列，并删除其中没有任何内容的所有列：

```
Sub DeleteEmptyColumns()

    Dim lastColumn As Integer
    Dim lastRow As Integer
    Dim i As Integer
    Dim r As Range

    Set r = ActiveSheet.Cells.Find("*", SearchOrder:=xlByColumns, LookIn:=xlValues, SearchDirection:=xlPrevious)

    If Not r Is Nothing Then

        lastColumn = r.Column

        For i = lastColumn To 1 Step -1

            Set r = ActiveSheet.Columns(i).Find("*", SearchOrder:=xlByRows, LookIn:=xlValues, SearchDirection:=xlPrevious)

            If r Is Nothing Then
                ActiveSheet.Columns(i).Delete
            Else
                If r.Row = 1 Then
                    ActiveSheet.Columns(i).Delete
                End If
            End If

        Next i

    End If

End Sub 
```

另外：如果工作表中没有任何内容，它不会崩溃，并且您不必将自己限制在一定数量的列中，它会自动检查所有列。

**编辑：**修改为跳过第一行并忽略任何标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T23:13:07.363

假设你有类似的东西：

```
1,,,,4,55,,92,,,,,,,,,62,
3,,,,7,43,,12,,,,,,,,,74,
7,,,,3,58,,52,,,,,,,,,64,
0,,,,6,10,,22,,,,,,,,,96,
3,,,,8,13,,92,,,,,,,,,22, 
```

对于您的 CSV 文件，您想要在 Excel 2010 中执行以下操作：
1\. 保存文件的副本（以防万一您在此处出错）
2\. 按 Alt+F11
3\. 双击 Sheet1(Book1 ) - 或任何您的工作表名称。（它在 Microsoft Excel 对象下
。4\. 将此代码复制并粘贴到名为 Book1.csv - Sheet1 (Code) 的窗口中

```
Sub showMessage()
    Dim cChar As String
    Dim Index As Integer
    For Index = 0 To 25
        cChar = Chr(90-Index)
        if Application.WorksheetFunction.CountA(Columns(cChar)) = 0 Then
            Columns(cChar).EntireColumn.Delete
        End If
    Next Index
End Sub 
```

5\. 单击顶部工具中的绿色箭头。（或者，按 F5） 注意，您可能需要修改的值是“25”和“90”。这些与从 ASCII 转换为字符有关。如果你愿意，你可以玩弄它。

这样做是查看 Z 到 A 列（是的，相反）并删除其中没有数据的任何列。

享受。

# html - 隐藏/显示 div 切换循环

> ID：13887189
> 
> 赞同：1
> 
> 时间：2012-12-14T22:32:14.680
> 
> 标签：html, hide, toggle, show

我有什么： 3 个按钮，当单击一个时，它会被隐藏，并且每个框中都显示相应的框是单击框隐藏时关闭框的链接

我需要什么：单击关闭链接并关闭框时，我需要再次显示该按钮

摘要：按钮单击切换按钮隐藏/框显示，关闭单击切换框隐藏/按钮显示

[当前代码](http://pixeloco.com/dev/hideshow/index2.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:54:06.860

您只需要添加`$('.showSingle').removeClass('selected');`到`$('.hide').click()`函数并在其末尾添加 return false 以便不会调用链接的 href（将 # 放在 url 中）我还重写了第一个 click 事件，使其与第二个一致。

```
$(function(){
    $('.showSingle').click(function() {
        $(this).addClass('selected').siblings().removeClass('selected');
        $('.targetDiv').hide();
        $('#div' + $(this).data('target')).show();
    });

    $('.hide').click(function() {
        $('.targetDiv').hide();
        $('.showSingle').removeClass('selected');
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:45:24.347

当您单击每个按钮时，您有一个调用，将“选定”类添加到按下的按钮并从所有其他按钮中删除相同的类。此类使按钮隐藏。然后你需要做的是当关闭链接被按下时，从所有按钮中删除类。

```
$('.hide').click(function() {
    $('.targetDiv').hide();
    $('.showSingle').removeClass('selected');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T22:52:04.170

试试这个。

```
 $(window).load(function(){
$('.showSingle').on('click', function () {
    $(this).addClass('selected').siblings().removeClass('selected');
    $('.targetDiv').hide();
    var srcId = $(this).data('target');
    $('#div' + srcId).show();
    $('.targetDiv').click(function(){
        $('.targetDiv').hide();
        $(".showSingle[data-target='" +srcId +"']").show();
    });

}); 

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T23:30:00.047

这是适用于您当前 HTML 的代码。它有两个选项，隐藏按钮文本或隐藏按钮本身。另外作为旁注，如果您使用`on()`继续使用它 - 不要切换到`.click()`

[JSFiddle 演示](http://jsfiddle.net/bobthyasian/BEmAA/)

```
$(function() {
    $('.targetDiv').hide(); //Start off with boxes hidden

    $('.showSingle').on('click', function() { //Link clicked
        $('.targetDiv').hide(); //Hide any open boxes
        $('.selected').removeClass('selected'); //Show all buttons
        //$(this).children('div').addClass('selected'); //Hide button text
        $(this).addClass('selected'); //Hide button box
        var id = $(this).data('target'); //Get desired target
        $('#div'+id).show(); //Show target box
        return false; //Stop link from going anywhere
    });

    $('.hide').on('click', function() {
        $('.targetDiv').hide(); //Hide any open boxes
        $('.selected').removeClass('selected'); //Show all buttons
        return false; //Stop link from going anywhere
    });
});​ 
```

# javascript - 数据表 - 滚动条在刷新时缺少列标题

> ID：13887194
> 
> 赞同：3
> 
> 时间：2012-12-14T22:32:49.577
> 
> 标签：javascript, jquery, datatables

我正在使用新的 Data Tables 额外插件 - Scroller。

但是，在使用来自 ajax 请求的新数据源数组刷新现有数据表网格时遇到问题。（下面的代码）。

我第一次在页面上运行这个确切的代码时，它工作正常。但是，每当我在给定不同来源的情况下再次调用此代码片段时，数据表都会重新呈现，但会丢失所有列标题。有谁知道为什么列在第一次之后每次都消失？

```
oTable = $('#example').dataTable({
                                "aoColumns": [
                                    { "sTitle": "ID" },
                                    { "sTitle": "Test" },
                                    { "sTitle": "Type" },
                                    { "sTitle": "Date" },
                                    { "sTitle": "Revision" }
                                ],
                                "aaData": source,
                                "bDestroy":true,
                                "sScrollY": "380px",
                                "sDom": 'frtiS',
                                "bDeferRender": true,
                                "fnRowCallback": function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                                    $(nRow).attr('id', "row-" + aData[0]);
                                    return nRow;
                                }
                            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T09:03:06.813

我也遇到了同样的问题，这是 Allan 的答案，在我的情况下效果很好。 [http://www.datatables.net/forums/discussion/14278/scroller-plugin-misplaces-datatables-column-header#Item_1](http://www.datatables.net/forums/discussion/14278/scroller-plugin-misplaces-datatables-column-header#Item_1)

# ios - Google Analytics iOS v2beta3 - 手动调度在 applicationWillResignActive 中不起作用

> ID：13887197
> 
> 赞同：9
> 
> 时间：2012-12-14T22:33:07.730
> 
> 标签：ios, google-analytics, dispatch

我一直在使用 Google 的 Analytics SDK v2beta3 并且一切正常，除了当应用程序离开活动状态时我无法手动调度工作。（仅供参考，对于我的应用程序，我需要保留电池电量，因此仅在用户完成应用程序时使用“[[GAI sharedinstance] dispatch]”来调度我的事件数据。）

我已经尝试了几件事，但是在跟踪期间到达并运行调度调用时，它似乎没有做任何事情......没有日志输出（我打开了调试模式）并且没有上传数据。它应该最低限度地报告“GoogleAnalytics 2.0b3 -[GAIDispatcher initialDispatch:retryNumber:] (GAIDispatcher.m:479) DEBUG: No pending hits”。或者我想的那种东西。但日志中没有任何内容，也没有发送数据。

相反，当应用程序从后台恢复时，点击会被传输，我会在控制台上看到所有调试语句，并且数据已成功发送到我的 Google Analytics 帐户。

下面是我的代码...

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ...
    // set up Google Analytics tracker
    [GAI sharedInstance].trackUncaughtExceptions = YES; // automatically track uncaught exceptions with Google Analytics - sent with stack trace.
    [GAI sharedInstance].dispatchInterval = -1;         // set Google Analytics dispatch off, will do manually when app goes into background.
    [GAI sharedInstance].debug = YES;                   // set debug to YES for extra debugging information.
    id<GAITracker> tracker = [[GAI sharedInstance] trackerWithTrackingId:GOOGLE_ANALYTICS_TRACKING_ID_FOR_TEST];    // Create tracker instance.
    [tracker setSessionTimeout:600];                     // set min time between sessions to be 10 minutes
    [GAI sharedInstance].defaultTracker = tracker;   // reset the default tracker if needed
    [[GAI sharedInstance] setOptOut:NO];

    ...
}

 - (void)applicationWillResignActive:(UIApplication *)application
{
    UIDevice * device = [UIDevice currentDevice];
    BOOL backgroundTasksSupported = NO;

    if ([device respondsToSelector:@selector(isMultitaskingSupported)]) {
        backgroundTasksSupported = device.multitaskingSupported;
    }

    if (backgroundTasksSupported) {
        self.uploadAnalyticsBackgroundTask = [application beginBackgroundTaskWithExpirationHandler:^{[self endBackgroundUploadTask];}];

        // Start the long-running task and return immediately.
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{        // put block on Global run queue...

            [[GAI sharedInstance] dispatch];                                                    // for dispatch of collected metric/analysis data...

            [self endBackgroundUploadTask];
        });
    }
    else {
        [[GAI sharedInstance] dispatch];
    }

}

- (void) endBackgroundUploadTask
{
     if(self.uploadAnalyticsBackgroundTask != UIBackgroundTaskInvalid) {          // if background task running, end it
        [[UIApplication sharedApplication] endBackgroundTask: self.uploadAnalyticsBackgroundTask];
        self.uploadAnalyticsBackgroundTask = UIBackgroundTaskInvalid;
     }
} 
```

应用程序到达并执行“[[GAI sharedInstance] dispatch];” 行，但什么也不做。当应用程序进入后台时，我是一个后台任务的新手，所以也许我做错了什么。但作为我调查的一部分，我什至将 applicationWillResignActive 简化为这个（这是/应该是阻塞的）......但我得到了同样的东西：没有调试信息，也没有传输的数据。

```
 - (void)applicationWillResignActive:(UIApplication *)application
{
    [[GAI sharedInstance] dispatch];
} 
```

我已经用非负的调度间隔（比如 15 秒）进行了尝试，并且我在请求的间隔内得到了定期传输，但是手动调度的调用不起作用。

在我的代码的其他部分调用手动调度确实有效。当应用程序关闭时，它似乎不起作用。

关于我可能做错了什么以及如何解决这个问题的任何想法建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T11:01:44.450

与以前的 Google Analytics SDK 版本不同，从 v2 开始，手动调度机制不会同步运行，即不是等待调度完成，而是立即返回。因此，如果您在变为非活动状态之前使用分派，则分派不会发生，因为应用程序的运行队列将在实际分派发生之前暂停。作为一种解决方法，我正在启动一个后台任务，该任务会休眠几秒钟，并使应用程序运行足够长的时间以完成调度。

希望 Google 会在 SDK 的未来版本中重新添加一个`dispatchSynchronously`方法。

另外，请注意，在`applicationWillTerminate`应用程序被杀死之前，您只有 5 秒的时间，所以不要等待太久。

```
- (void)dispatchAndWait:(NSTimeInterval)waitTime {
  UIBackgroundTaskIdentifier backgroundTask = 0;
  backgroundTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:^{
    [[UIApplication sharedApplication] endBackgroundTask:backgroundTask];
  }];

  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // GAI dispatch runs asynchronously and dispatches on the main
    // thread, so we're giving it some time to dispatch and keep the
    // app running in background by sleeping on a background thread
    [[GAI sharedInstance] dispatch];
    [NSThread sleepForTimeInterval:waitTime];

    [[UIApplication sharedApplication] endBackgroundTask:backgroundTask];
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T21:44:42.873

截至 2013 年 8 月，这是正确的答案。

只要应用程序正常关闭，即它收到一个`UIApplicationWillResignActiveNotification`，那么下次打开应用程序时就会发送命中。

您没有看到这一点的原因可能是从 Xcode 退出应用程序并没有正常关闭它。按下主页按钮，紧接着 Xcode 的停止，将正常关闭它，它会工作。

这里的问题是，即使发送了匹配，如果它们在第二天凌晨 4 点之后到达 Analytics 配置文件的时区，它们也会被 Analytics 丢弃。这有点棘手，并且可能证明[像 Andreas 的解决方案是合理的](https://stackoverflow.com/a/16336388/750875)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:31:23.470

我们有这个问题，但能够将成功率提高到 50%。这是我们如何做到的。

我们输入了“保险代码”，大约 50% 的时间我们的事件在应用程序转换到后台时被调度。其他 50% 的时间在您返回应用程序之前不会调度事件。

使我们达到 50% 的保险代码是将调度调用放在按钮按下代码中：

```
- (IBAction)goToAppStore:(id)sender
{    
    ...
    // Tracking
    // Using events (pressing on buttons)

    id <GAITracker> tracker = [[GAI sharedInstance] defaultTracker];

    [tracker sendEventWithCategory:@"App Checkout"
                        withAction:@"Checkout Button Pressed"
                        withLabel:nameApp.text
                        withValue:nil];

    [[GAI sharedInstance] dispatch];
    ...
} 
```

此外，查看主要问题中的示例代码 - Apple 声明将用于执行后台任务的代码放入

```
applicationDidEnterBackground: 
```

代替

```
applicationWillResignActive: 
```

但这似乎并没有对我们产生巨大的影响。这是 Apple 关于该主题的文档（参见清单 3-3）

[http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

此外，如果您想更仔细地了解我们如何获得大约 50% 的成功，我会发布一篇关于我们对代码示例所做的更长的帖子：[当 iOS 应用程序进入后台时，我们如何调度 Google Analytics 事件？](https://stackoverflow.com/questions/15484792/how-do-we-dispatch-google-analytics-events-when-ios-app-goes-to-the-background)

在这一点上，如果有人找到了，我仍然想要一个 100% 的解决方案。

# c# - 避免使用表名查询 SQL 注入

> ID：13887202
> 
> 赞同：0
> 
> 时间：2012-12-14T22:33:48.020
> 
> 标签：c#, .net, sql, sql-injection, sqlparameter

> **可能重复：**
> [在 .NET 的动态 SQL 中清理表/列名？（防止SQL注入攻击）](https://stackoverflow.com/questions/9651582/sanitize-table-column-name-in-dynamic-sql-in-net-prevent-sql-injection-attack)

我有一个这样的查询：

```
"SELECT * FROM MyTable_" + myID + " WHERE variable = @variable"; 
```

SQL 参数化适用于变量，但如何让它适用于表名？myID 是我传入并更改的 int（可以转换为字符串），但是如何防止此处的 sql 注入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T22:44:30.967

只要`myID`是数值变量，就不能包含任何有害代码。

您需要做的唯一另一件事是确保尝试读取不存在的表时的错误消息不会泄漏有关可能有助于某种其他类型攻击的数据库布局信息.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T22:41:38.780

我质疑您*为什么*要这样做，但您可以查看`sys.tables`一个确凿的白名单。

```
DECLARE @TableName VARCHAR(100) = 'Table to Look for';
DECLARE @Exists BIT = ( SELECT CAST( COUNT(1) AS BIT ) FROM sys.tables WHERE name = @TableName AND type = 'U' ); 
```

您可以参数化初始输入，但白名单方法仍然很重要。否则，恶意用户可以传递整个数据库中的任何有效表名，并且查询将针对它运行（假设他们具有 SELECT 权限）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T22:40:08.020

获取数据库中的表列表并检查该`"MyTable_" + myID`列表中的表。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-14T22:45:35.343

**REDESIGN**是答案，没有动态表名。在表内有一个值来指示您的原始表名称，并且只有一个表用于所有当前表。

如果您遇到必须与系统其他部分向后兼容的现有内容，您可以（并且应该）组合方法。转义、白名单或引用都是可行的，我会说选择两个。

当我说“引用”时 - 将所有有效名称放在一个列表中，传递一个整数索引来选择一个。

# c++ - 如何在宽字符数组的末尾附加一个零字符以制作这种奇怪的 PCZZWSTR winapi 数据类型？

> ID：13887206
> 
> 赞同：3
> 
> 时间：2012-12-14T22:34:27.503
> 
> 标签：c++, arrays

`SHFileOperation`我需要这个通过使用函数和`SHFILEOPSTRUCT`结构将文件移动到回收站。这种方式安全吗？（我从宽字符字符串对象开始。）

```
wstring wstr = L"my test"
wstr += L'\0'
wchar_t* = wstr.c_str(); 
```

并且由于我在字符串对象中添加了零并且转换为 c 字符串添加了另一个它应该是有效的 PCZZWSTR ...但是...如果沿途有一些“聪明”的代码感应到零已经在末尾?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:43:17.747

是的，你展示的将起作用。您要在 wstring 数据的末尾添加一个显式空字符，然后`c_str()`将返回一个由第二个空终止符终止的指针，从而满足`SHFileOperation()`要求。

# html - 如何在不使用 read() 函数 KendoUI 的情况下更新 DataSource 的本地数据

> ID：13887207
> 
> 赞同：0
> 
> 时间：2012-12-14T22:34:30.627
> 
> 标签：html, telerik, kendo-ui

我需要更新 DataSource 的本地数据，但不使用 de read() 函数。我使用 read() 函数，但这个函数会减慢网站的速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:46:09.423

您可以将对象列表传递给视图，然后遍历它们。我为我的树视图做了这个。

看看我的帖子：[使用 RavenDB 文档填充 KendoUi Treeview](https://stackoverflow.com/questions/13848228/populate-kendoui-treeview-with-ravendb-documents/13879988#13879988)

希望它会帮助你:)

如果您向我们提供更多信息，例如：您使用的是什么控件？

那么也许我们可以提供进一步的帮助。

# c++ - 执行此模板的更好方法？

> ID：13887210
> 
> 赞同：5
> 
> 时间：2012-12-14T22:34:48.920
> 
> 标签：c++

目前，我有一个这样的函数模板，可以将 a 转换`vector`为 a `string`（只是一个自然字符串，用逗号分隔元素）：

```
//the type T must be passable into std::to_string
template<typename T>
std::string vec_to_str(const std::vector<T> &vec); 
```

如您所见，这仅适用于其元素可以传递给内置`std::to_string`函数的向量（例如`int`,`double`等）

记录允许的评论是否被认为是一种好习惯`T`？如果没有，我该怎么办？是否有可能以更好的方式执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T22:55:18.670

使用`static_assert`和一些表达式 SFINAE，你可以得到一个很好的编译时错误消息：

```
template<typename T>
constexpr auto allowed(int) -> decltype(std::to_string(std::declval<T>()), bool())
{
    return true;
}

template<typename>
constexpr bool allowed(...)
{
    return false;
}

template<typename T>
std::string vec_to_str(const std::vector<T>& vec)
{
    static_assert(allowed<T>(0), "Invalid value type.");
    return "";
}

struct foo {};

int main()
{
    std::vector<int> v_int;
    vec_to_str(v_int);

    std::vector<foo> v_double;
    vec_to_str(v_double);       // static_assert fires here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T22:52:25.877

由于`std::to_string`是 C++11 功能，我猜您可能对 C++11 解决方案持开放态度。在这种特殊情况下，您可以以 sfinae 方式使用尾随返回类型：

```
template <typename T>
auto vec_to_str(const std::vector<T>& vec) -> decltype(std::to_string(std::declval<T>())); 
```

如果值类型不适用于`to_string`. 但是，这不一定是记录和执行规则的最令人赏心悦目的方式。上面的 Sfinae 技巧可能还有一个 C++11 之前的版本，但它不会更漂亮。

一般来说，我会说在评论中简单地记录它是很好的（可能带有一个 doxygen 标签，比如`\tparam`）。如果需要，您可以使用 Boost.Concept-Check 风格的概念检查机制。

作为旁注，对于这种特定情况，我可能会建议您依赖于`std::ostream` `operator <<`而不是`to_string`函数，因为自定义类型（例如，2D 矢量或其他东西）更有可能配备重载以输出到溪流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T22:46:35.670

在[概念](http://www.cs.ox.ac.uk/ralf.hinze/WG2.8/28/slides/bjarne.pdf)出现之前，您可以使用`decltype`匿名类型参数：

```
template<typename T,
  typename = decltype(std::to_string(std::declval<T>()))>
std::string vec_to_str(const std::vector<T> &vec); 
```

# user-interface - 为 Haskell 积极开发并有据可查的 GUI 工具

> ID：13887213
> 
> 赞同：33
> 
> 时间：2012-12-14T22:35:12.370
> 
> 标签：user-interface, haskell

我上午和下午的大部分时间都在玩 Haskell 中的 GUI 框架，因为我需要一些可视化和交互功能，而且我不喜欢在 Haskell 中编写核心功能然后输出到前端编写在另一个 GUI 中；我宁愿用一种语言来做这一切。更好的部分中更好的部分用于编译和修补源代码，或者谷歌搜索模糊的编译错误。

我花了很多时间阅读 SO 问题，大量时间在 haskell.org 上，以及大量时间阅读文档。我遇到的是大量过时或记录不充分的信息。我可以归结为以下三点：

1.  建立在 Gtk+ 绑定之上的大量选项。我不太喜欢 Gtk+，主要是因为我觉得它看起来很不愉快，尤其是在 OS X 上。抱怨 UI 看起来不合适和/或只是简单的丑陋可能看起来很愚蠢，但这很重要我。特别是如果我希望其他人使用我创建的任何程序。

2.  wxHaskell，它是稳定的并且非常容易安装，但是许多现有的教程似乎是针对 wx-0.1x 的，并且将 wxWidgets 2.9.x 文档桥接到 wx-0.90.x 的约定非常参差不齐，难以理解，当它们甚至存在时。

3.  qtHaskell，似乎大部分都被放弃了（如果我错了，请纠正我），在应用了一年前的补丁后，只能用较新版本的 GHC 编译，并吐出大量警告，表明它们很快就会变成编译错误较新版本的 GHC。

实际上，我正在寻找 Haskell 对 Java 的 Swing 的回答；一个健壮的、维护的、有据可查的、易于上手的库，尝试在外观和感觉上保持原生，可以跟上 GHC 的发展步伐，并且不会有被放弃的高风险。这似乎完全是零 GUI 框架，但似乎大多数与 GUI 框架相关的“官方”资源/wikis/页面/文档都没有得到维护，所以我决定求助于社区，看看是否有什么我只是没有找到。我并不十分担心框架是跨平台的，只要它适用于现代版本的 OS X。

重申一下，我并不是真的要找人给我发送到 haskell.org 或 WikiBook 的链接。我去过那里，我不喜欢我所看到的。那里的大部分信息都已经过时了，它只会创造更多的工作，而不是更少。

我意识到我的“要求”有点极端，尤其是对于像 Haskell 这样的社区较小的语言，但我希望那里有人可以帮助我。同时，我打算简单地尝试摆脱 wxHaskell 或 qtHaskell，直到我成功或死亡。

我希望我不会显得粗鲁或疲惫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-01T09:08:55.837

[Threepenny-gui](http://www.haskell.org/haskellwiki/Threepenny-gui)是 Haskell GUI 库领域的最新竞争者。

它的主要卖点是它非常易于安装，因为它使用网络浏览器作为显示器。它也很容易[上手](http://ocharles.org.uk/blog/posts/2013-12-07-24-days-of-hackage-threepenny-gui.html)。

另一方面，它甚至没有尝试拥有原生的外观和感觉——UI 完全建立在 HTML 之上。（这在未来可能会改变，因为我们可以选择使用[XUL](https://developer.mozilla.org/en-US/docs/XUL)）。此外，API 仍在不断变化，因此请做好准备，该库的新主要版本可能会破坏向后兼容性。（另一方面，这意味着它正在积极开发。:-)）

（披露：我是threepenny-gui 包的作者/维护者。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T23:46:16.517

wxHaskell 很好，是的，我的首选 GUI 中级库。我承认在新版本的文档之前，我们一直关注更新代码。

对于现代的、函数式反应式编程有趣的东西，我推荐[反应式香蕉](http://www.haskell.org/haskellwiki/Reactive-banana)，它得到了积极的维护，并且有额外的好处，[Heinrich Apfelmus](https://stackoverflow.com/users/403805/heinrich-apfelmus)本人很可能会出现在这里回答你的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T00:33:51.413

我感觉到你的痛苦；这个答案试图提供一些可能足够好的替代方案，并且可能会帮助您进行搜索。

首先，有一种语言叫做 Concurrent Clean。它应该类似于 Haskell，具有 GUI 支持并且用于编写真实世界的应用程序。它在某些方面有所不同；例如，它的 I/O 基于唯一类型而不是 Monad，就我而言，这是一件好事 :)。这是一个链接： [http ://wiki.clean.cs.ru.nl/Clean](http://wiki.clean.cs.ru.nl/Clean)

接下来，我四处寻找编译到 JVM 的 Haskell，希望它能搭载 Java 库，比如 Clojure。没有骰子。我确实找到了一个讨论不足和挑战的 SO 线程： [Haskell on JVM？](https://stackoverflow.com/questions/7261039/haskell-on-jvm)

然而，从该线程中，提出了另外两个选项。一个是弗雷格： [http ://code.google.com/p/frege/](http://code.google.com/p/frege/)

另一个是CAL： [https ://github.com/levans/Open-Quark](https://github.com/levans/Open-Quark)

Haskell 中也有关于函数式反应式编程的工作。它应该启用诸如 GUI 之类的东西，尽管您是否真的会从中获得 GUI 是另一回事： [http ://www.haskell.org/haskellwiki/Functional_Reactive_Programming](http://www.haskell.org/haskellwiki/Functional_Reactive_Programming)

这是可悲的。在这里，我们有 JVM 和 .NET，还有用于 Haskell 的 zilch。比那更糟；.NET 已经显示出放弃有希望的实现的惊人趋势。IronScheme、IronLisp 和 IronHaskell 发生了什么？据我所知，所有人都死了。

不好 ：（

# android - 如何创建包含选项卡和分割线的android布局？

> ID：13887214
> 
> 赞同：0
> 
> 时间：2012-12-14T22:35:17.623
> 
> 标签：android, android-layout, android-widget

我想为 android 手机应用程序创建这样的布局

![在此处输入图像描述](../Images/9af8fd741f1a0bb8942fa0f960486366.png)

我曾尝试使用[http://www.droiddraw.org/](http://www.droiddraw.org/)

但没有找到`tabs`or`split line`部件。

这是我设法生成的最好的：

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout
    android:id="@+id/widget34"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    xmlns:android="http://schemas.android.com/apk/res/android">
<Spinner
    android:id="@+id/widget41"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:drawSelectorOnTop="true"
    android:layout_x="17dp"
    android:layout_y="47dp" />
<Button
    android:id="@+id/widget45"
    android:layout_width="58dp"
    android:layout_height="31dp"
    android:text="Search"
    android:layout_x="144dp"
    android:layout_y="64dp" />
<Button
    android:id="@+id/widget46"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="place request"
    android:layout_x="212dp"
    android:layout_y="62dp" />
</AbsoluteLayout> 
```

有人知道更好的 UI 编辑器吗？

你能帮忙添加标签，分割线吗？

另外，我想创建一个固定大小的gridview（为简单起见）

我怎样才能创建一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:44:34.347

您必须使用 xml 来设计 UI。

[安卓](http://developer.android.com/design/index.html)

并寻找这个标签

[标签](http://developer.android.com/guide/topics/ui/actionbar.html) [标签](http://developer.android.com/design/building-blocks/tabs.html)

# c++ - 制作：g ++：找不到命令

> ID：13887225
> 
> 赞同：20
> 
> 时间：2012-12-14T22:36:43.547
> 
> 标签：c++, windows, eclipse, g++, cygwin

我检查了类似的帖子，有人解决了我的问题。我很简单，但我是 eclipse 的新手。我试图做一个简单的例子，我遇到了这个问题。

make文件就是这个

```
all: hello.exe

clean:
    rm Hello.o Hello.exe

hello.exe: hello.o
    g++ -g -o hello.exe hello.o

hello.o:
    g++ -c -g main.cpp 
```

我得到这个错误“make：g ++：找不到命令”

感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T22:45:30.887

您需要从 GNU 安装开发工具。我假设你在 Windows 上，在这种情况下你有两个选择：[cygwin](http://www.cygwin.com)和[mingw](http://www.mingw.org)。前者包括开箱即用的[g++ 。](http://horstmann.com/bigcpp/help/gnuwindows/index.html)我对 mingw 不太熟悉，但[C++ 标准库](http://sourceforge.net/projects/mingw/files/MinGW/Base/gcc/Version4/gcc-4.7.2-1/)似乎也可用。

请参阅[这些安装说明](http://cs.calvin.edu/curriculum/cs/112/resources/installingEclipse/cygwin/)，如果可能的话，我建议从第 1 步开始。

# c# - 窗口服务发生错误

> ID：13887230
> 
> 赞同：0
> 
> 时间：2012-12-14T22:37:08.767
> 
> 标签：c#, multithreading, windows-services

这是我正在编写的第一个窗口服务，我需要一些帮助来编写它，我正在尝试使用单线程，以便一个线程可以启动服务，而另一个线程可以负责调用执行数据库工作的函数. 我还使用了一个计时器，所以这个服务每天只运行一次下面是我的代码

我发布这个问题的原因是每当我尝试安装此服务时，它都会抛出一个错误，说“发生致命错误”，它没有给我任何细节。

```
public partial class Service1 : ServiceBase
    {
        private DateTime _lastRun = DateTime.Now;
        Thread workerThread;

    public Service1()
        {
            InitializeComponent();
        }

        protected override void OnStart(string[] args)
        {

            ThreadStart st = new ThreadStart(WorkerFunction);
            workerThread = new Thread(st);
            serviceStarted = true;
            workerThread.Start();
        }
     protected override void OnStop()
        {
            // flag to tell the worker process to stop
            serviceStarted = false;

            // give it a little time to finish any pending work
            workerThread.Join(new TimeSpan(0, 2, 0));
            timer1.Enabled = false;
        }

     private void WorkerFunction()
        {
                while (serviceStarted)
                {

                  EventLog.WriteEntry("Service working",
                     System.Diagnostics.EventLogEntryType.Information);

                  // yield
                  if (serviceStarted)
                  {
                     Thread.Sleep(new TimeSpan(0, 20000, 0));
                  }
                  timer1.Enabled = true;
                  timer1.Start();
                }

               // time to end the thread
               Thread.CurrentThread.Abort();
        }

         private void timer1_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
            {
                    if (_lastRun.Date < DateTime.Now.Date)
                    {
                        timer1.Stop();
                // does the actual work that deals with the database
                }

            timer1.Start();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:46:03.130

有几件事要检查：

1.  确保您已`EventLog`正确配置源 ( [MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.source(v=vs.90).aspx) )。我对 Windows 服务自动启动和停止的回答[，异常处理问题](https://stackoverflow.com/questions/13521820/windows-service-started-and-stopped-automatically-exception-handling-issue/13522039)在这里也很有用。
2.  看起来您正在使用 Windows 窗体计时器 - 这些需要 UI 消息泵，而您不会在服务 ( [MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer(v=vs.100).aspx) ) 中拥有它。您应该改为使用`System.Threading`命名空间 ( [MSDN](http://msdn.microsoft.com/en-us/library/system.threading.timer(v=vs.100).aspx) ) 中的 Timer 类进行调查。

特别是，您可能会发现使用 a`System.Threading.Timer`将大大简化您的代码，因为该对象将为您管理更多的管道。

我还建议不要调用`Thread.Abort()`：它可能是有害且不可预测的，在您的情况下，您似乎根本不需要使用它。请参阅[CurrentThread.Abort 或不 CurrentThread.Abort](https://stackoverflow.com/questions/321779/to-currentthread-abort-or-not-to-currentthread-abort)和 [http://msdn.microsoft.com/en-us/library/5b50fdsz.aspx](http://msdn.microsoft.com/en-us/library/5b50fdsz.aspx)。

# objective-c - 为什么 xcode 可以找到某些方法的接口，但找不到其他方法？

> ID：13887232
> 
> 赞同：0
> 
> 时间：2012-12-14T22:37:12.613
> 
> 标签：objective-c, macos, methods

我有一个对象的头文件，如下所示。

```
#import <Foundation/Foundation.h>

@interface CSSRuleSet : NSObject{
    NSMutableArray *Selectors;
    NSArray *Properties;
    NSMutableArray *Values;
}

-(void)printElement;
-(void)initialiseArrays;
-(NSString *)getValue:(NSString *)Property;
-(void)assignValue:(NSString *)Property:(NSString *)Value;
-(void)addSelector:(NSString *)Selector;

@end 
```

但是，当我尝试在该对象上调用方法时，有些工作，有些则抛出错误“'CSSStore' 没有可见的@interface 声明选择器'initialiseArrays'”。

我遇到的问题是 printElement 和 initialiseArrays。出于某种原因，我也无法为该对象编写自定义初始化函数：它存在并且没有抛出任何错误，它只是无法运行。

如果需要更多信息，请告诉我。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T01:15:03.573

这个类是 CSSRuleSet。您似乎正试图将用于此类的消息发送到另一个名为 CSSStore 的类。最可能的原因是您在某些时候忘记了您正在传递的对象，或者您没有在非 ARC 程序中正确管理保留和释放。

# zend-framework - Zend mongo undefined Collection::setSlaveOkay()

> ID：13887233
> 
> 赞同：0
> 
> 时间：2012-12-14T22:37:12.617
> 
> 标签：zend-framework, mongodb-php

我一直在尝试使用教义在zend中实现mongo。在被这个难住之前，我一直在逐步解决各种问题：

```
Call to undefined method Doctrine\MongoDB\Collection::setSlaveOkay() in [project]/vendor/doctrine/mongodb-odm/lib/Doctrine/ODM/MongoDB/DocumentManager.php on line 349 
```

在寻找修复程序时，我遇到了“将 mongo 升级到至少 1.1.0”。所以我跑了：

```
sudo pecl install mongo 
```

我得到了回应：

```
pecl/mongo is already installed and is the same as the released version 1.3.1
install failed 
```

让我相信我已经升级到高于 1.1.0（如果我错了，请纠正我）。

谁能告诉我我需要做什么来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:06:57.050

是的有同样的问题......升级了我的本地安装

[https://github.com/doctrine/mongodb](https://github.com/doctrine/mongodb)

从分支“master”到“readprefs”

# php - 在 php 中找不到 SoapClient

> ID：13887236
> 
> 赞同：0
> 
> 时间：2012-12-14T22:37:41.110
> 
> 标签：php, soap-client

我得到这个错误说：

致命错误：在 ....php 文件中找不到类“SoapClient”。我必须手动安装/包含 SoapClient 吗？它不是一个内置的 php 模块吗？

更新：如果我使用 wordpress，如何安装soapclient？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:40:24.213

不，默认情况下不安装它。您需要使用 --enable-soap 选项安装 PHP。

在这里阅读更多[http://php.net/manual/en/soap.installation.php](http://php.net/manual/en/soap.installation.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:45:17.873

这取决于您如何安装 PHP。

如果 PHP 是从源代码构建的，则必须使用[http://php.net/manual/en/soap.installation.php](http://php.net/manual/en/soap.installation.php)`--enable-soap`的选项重新构建它。

如果您通过发行版中的包管理器安装了二进制包，请检查是否可以找到任何`php5-soapclient`-packages 或类似的并安装它们。

在 Debian wheezy 上测试，默认`php5-cli`包含`SoapClient()`。

# ios - Appledoc 和自定义链接描述

> ID：13887240
> 
> 赞同：0
> 
> 时间：2012-12-14T22:38:04.233
> 
> 标签：ios, xcode, markdown, appledoc

如果我做了一些愚蠢的事情，我会提前道歉。但我无法确定我的错误。

这是代码（头文件）：

```
#import <Foundation/Foundation.h>

/**
 Represents a cover image. It can be a game cover, a trophy image or even a player avatar.

 It has three properties:

 - **NSMutableString uri**: the link that points to the image.
  - E.g.: [A Skyrim trophy image URI] (http://bit.ly/skyrimTrophyImageUri ).

 - **UIImage img**: the actual image. That is, the bitmap.
  - E.g.: 1A9A3826FB6B42C1B08824655A740620BC8E75F9.PNG

 - **ResolutionType resolution**: the image resolution, which comes from an enumeration of this class called __"ResolutionType"__.
  - E.g: SEN_75x41

*/

@interface NHOCCover : NSObject 
```

结果：

![在此处输入图像描述](../Images/3a5788b63f28e6da72cb7b0450f99529.png)

[我正在遵循这些说明（在“自定义链接描述”部分）。](http://gentlebytes.com/appledoc-docs-comments)

我也试过：

*   [天际奖杯图像 URI] ( [http://bit.ly/skyrimTrophyImageUri](http://bit.ly/skyrimTrophyImageUri) ) (不含空格)
*   [天际奖杯图像 URI]（[http://bit.ly/skyrimTrophyImageUri](http://bit.ly/skyrimTrophyImageUri)）（带空格）

也许 Xcode 弄乱了文件？关于第二个相关问题，您知道是否有办法阻止 Xcode 在其编辑器中自动创建链接？（我的意思是将字体颜色更改为蓝色并加下划线）。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T06:58:56.953

已经在 github 上回答了你，在这里也为来到这个页面的人添加了答案：这是 v2 的已知问题，将在 3.0 中修复。见[https://github.com/tomaz/appledoc/issues/180](https://github.com/tomaz/appledoc/issues/180)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T10:11:37.343

```
/**
 Represents a cover image. It can be a game cover, a trophy image or even a player avatar.

 It has three properties:

 - **NSMutableString uri**: the link that points to the image.
  - E.g.: [A Skyrim trophy image URI] (http://bit.ly/skyrimTrophyImageUri ).

 - **UIImage img**: the actual image. That is, the bitmap.
  - E.g.: 1A9A3826FB6B42C1B08824655A740620BC8E75F9.PNG

 - **ResolutionType resolution**: the image resolution, which comes from an enumeration of this class called __"ResolutionType"__.
  - E.g: SEN_75x41

*/ 
```

[在您的代码中，[A Skyrim trophy image URI] 和（ http://bit.ly/skyrimTrophyImageUri](http://bit.ly/skyrimTrophyImageUri) ）之间有一个空格，我猜是这个空格导致了问题。

正确的格式是

```
[A Skyrim trophy image URI](http://bit.ly/skyrimTrophyImageUri ) 
```

我希望这可以解决您的问题。我知道它已经 9 个月了，你问这个，但这可能会帮助其他有类似问题的人。

# javascript - 如何在复杂的对象上绘画

> ID：13887244
> 
> 赞同：0
> 
> 时间：2012-12-14T22:38:36.843
> 
> 标签：javascript, html5-canvas

我确实在画布上画了一个相当复杂的人物。（约 1000 个多边形）。所有这些的重绘时间约为 1 秒（非常慢）。现在我需要让用户在该图上移动并从鼠标位置显示垂直和水平线（十字线）。仅绘制这两条线而不遍历所有多边形并在每次鼠标移动时重新绘制所有内容的最佳技术是什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:30:59.887

**这个答案被打破了。**

您想在不触及底层绘画的情况下绘制线条并移动它们。在过去的好日子里，使用的方法是在绘图顶部使用 xor 组合进行绘制，并在同一位置以相同的方式绘制相同的图案（这里是线条）以将其从屏幕上移除，再次不触摸真正的绘画。

我试图用这个方法和下面的代码来测试它，但它似乎不起作用。希望对 canvas 和 js 有更好了解的人能站出来解决问题。

```
function onmousemove(e){
  // firt run
  var tcanvas = document.getElementById("testCanvas");
  var tcontext = tcanvas.getContext("2d");
  var pos = {x : e.clientX, y : e.clientY, 
             w : tcanvas.width, h : tcanvas.height };
  var comp = tcontext.globalCompositeOperation;
  var paintline = function (p){
      tcontext.save();

      tcontext.lineWidth = 1;
      tcontext.globalCompositeOperation = 'xor';
      tcontext.fillStyle = "#000000";

      tcontext.moveTo(0,p.y);
      tcontext.lineTo(p.w,p.y);
      tcontext.moveTo(p.x,0);
      tcontext.lineTo(p.x,p.h);
      tcontext.stroke();

      tcontext.restore();
  };

  tcontext.save();
  paintline(pos);
  tcontext.restore();

  var next = function(e){
      var comp = tcontext.globalCompositeOperation;
      paintline(pos);
      pos = {x : e.clientX, y : e.clientY, 
             w : tcanvas.width, h : tcanvas.height };
      paintline(pos);
  };
  document.onmousemove = next;
}

(function draw_stuff(){
    // setup canvas
    var tcanvas = document.getElementById("testCanvas");
    var tcontext = tcanvas.getContext("2d");

    // draw square
    tcontext.fillStyle = "#FF3366";
    tcontext.fillRect(15,15,70,70);

    // set composite property
    tcontext.globalCompositeOperation = 'xor';

    // draw text
    tcontext.fillStyle="#0099FF";
    tcontext.font = "35px sans-serif";
    tcontext.fillText("test", 22, 25);
    // draw circle
    tcontext.fillStyle = "#0099FF";
    tcontext.beginPath();
    tcontext.arc(75,75,35,0,Math.PI*2,true);
    tcontext.fill();
    document.onmousemove = onmousemove; 
})(); 
```

此外，根据浏览器的不同，合成也存在问题。

# node.js - 节点请求队列已备份

> ID：13887251
> 
> 赞同：4
> 
> 时间：2012-12-14T22:39:56.970
> 
> 标签：node.js, networking, httprequest

TL;DR - 配置 globalAgent 时是否有任何最佳实践，允许高吞吐量和大量并发请求？

这是我们的问题：

据我所知，Node 中的连接池由 http 模块管理，该模块在 globalAgent 对象中对请求进行排队，该对象对 Node 进程是全局的。在任何给定时间从 globalAgent 队列中拉出的请求数由打开的套接字连接数决定，该连接数由 globalAgent 的 maxSockets 属性决定（默认为 5）。

当使用“keep-alive”连接时，我希望一旦请求得到解决，处理请求的连接将可用并且可以处理 globalAgent 队列中的下一个请求。

但是，似乎在处理任何其他排队请求之前，每个连接都已解决，直到最大数量。

在观察组件之间的网络流量时，我们看到如果 maxSockets 为 10，则 10 个请求解析成功。然后有一个暂停 3-5 秒的暂停（大概是在建立新的 tcp 连接时），然后再解决 10 个请求，然后是另一个暂停，等等。

这似乎是错误的。Node 应该擅长处理大量并发请求。因此，即使有 1000 个可用的套接字连接，如果在 1-999 解决之前无法处理请求 1000，那么您就会遇到瓶颈。但是我无法弄清楚我们做错了什么。

**更新**

下面是我们如何发出请求的示例——尽管值得注意的是，每当节点进程发出 http 请求时都会发生这种行为，包括当该请求由广泛使用的第三方库发起时。我不认为它特定于我们的实施。尽管如此...

```
class Client
  constructor: (@endpoint, @options = {}) ->
    @endpoint = @_cleanEndpoint(@endpoint)
    throw new Error("Endpoint required") unless @endpoint && @endpoint.length > 0

    _.defaults @options,
        maxCacheItems: 1000
        maxTokenCache: 60 * 10
        clientId : null
        bearerToken: null # If present will be added to the request header
        headers: {}
    @cache = {}

    @cards  = new CardMethods @
    @lifeStreams = new LifeStreamMethods @
    @actions = new ActionsMethods @

  _cleanEndpoint: (endpoint) =>
    return null unless endpoint
    endpoint.replace /\/+$/, ""

  _handleResult: (res, bodyBeforeJson, callback) =>
      return callback new Error("Forbidden") if res.statusCode is 401 or res.statusCode is 403

      body = null

      if bodyBeforeJson and bodyBeforeJson.length > 0
        try
          body = JSON.parse(bodyBeforeJson)
        catch e
          return callback( new Error("Invalid Body Content"), bodyBeforeJson, res.statusCode)

      return callback(new Error(if body then body.message else "Request failed.")) unless res.statusCode >= 200 && res.statusCode < 300
      callback null, body, res.statusCode

  _reqWithData: (method, path, params, data, headers = {}, actor, callback) =>
    headers['Content-Type'] = 'application/json' if data
    headers['Accept'] = 'application/json'
    headers['authorization'] = "Bearer #{@options.bearerToken}" if @options.bearerToken
    headers['X-ClientId'] = @options.clientId if @options.clientId

    # Use method override (AWS ELB problems) unless told not to do so
    if (not config.get('clients:useRealHTTPMethods')) and method not in ['POST', 'PUT']
      headers['x-http-method-override'] = method
      method = 'POST'

    _.extend headers, @options.headers

    uri = "#{@endpoint}#{path}"
    #console.log "making #{method} request to #{uri} with headers", headers
    request
      uri: uri
      headers: headers
      body: if data then JSON.stringify data else null
      method: method
      timeout: 30*60*1000   
     , (err, res, body) =>
       if err
         err.status =  if res && res.statusCode then res.statusCode else 503
         return callback(err)

       @_handleResult res, body, callback 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:52:16.377

老实说，coffeescript 不是我的强项，所以无法真正评论代码。

但是，我可以给您一些想法：在我们的工作中，我们使用 nano 连接到 cloudant，并且我们看到从微型 AWS 实例到 cloudant 的请求高达 200 个/秒。所以你是对的，节点应该由它决定。

如果您还没有，请尝试使用请求[https://github.com/mikeal/request 。](https://github.com/mikeal/request)（我不认为它会有所作为，但仍然值得一试，因为这就是 nano 使用的）。

这些是我要研究的领域：

1.  服务器不能很好地处理多个请求并限制它。您是否对您的服务器进行过任何性能测试？如果由于某种原因它无法处理负载，或者您的请求在操作系统中受到限制，那么您的客户端做什么都没关系。

2.  您的客户端代码在某处具有长时间运行的功能，该功能会阻止节点处理您从服务器返回的任何响应。也许 1 个特定响应会导致响应回调花费太长时间。

端点是否都是不同的服务器/主机？

# javascript - 使用 jquery 或 javascript 查找调用事件的按钮对象

> ID：13887252
> 
> 赞同：1
> 
> 时间：2012-12-14T22:40:06.660
> 
> 标签：javascript, jquery

我正在使用 jquery 将事件绑定到几个按钮...

```
$(".numField").bind("click", stageButtonClick()); 
```

在函数`stageButtonClick()`中，我想获取调用按钮的对象，但我不能`$(this)`在函数内部使用`stageButtonClick`，它不会为我返回任何东西。

另外，请不要建议使用内联函数

```
$(".numField").bind("click", function() {...}) 
```

我想学习如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T22:48:19.097

你的问题在这里：

```
$(".numField").bind("click", stageButtonClick());
                       don't use parenthesis ^^ 
```

分配命名函数时不要使用括号，因为它会调用函数并分配结果。

这有效：

**[演示](http://jsfiddle.net/gSzjn/)**

```
$(document).ready(function(){

    $(".numField").bind("click", stageButtonClick);

});

function stageButtonClick()
{
     alert( $(this).attr("id") );  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T22:46:31.813

您正在尝试以非常非 jQuery 的方式做事。即使您不希望整个函数内联，您也可以通过执行以下操作让您的生活更轻松：

```
$(".numField").bind("click", function() {
    stageButtonClick(this); // or stageButtonClick($(this)) if you want to pass jQuery selector
}); 
```

在这里，您只需将单击的 DOM 元素传递给您的`stageButtonClick()`函数。

此外，如果您使用的是 jQuery 1.7 或更高版本，则应该`on()`使用`bind()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T22:49:58.767

起初，`$(".numField").bind("click", stageButtonClick());`不会工作，因为`stageButtonClick()`返回函数的结果`stageButtonClick`，而不是函数本身

其次，将一个`event`对象传递给带有`target`and`currentTarget`元素的被调用函数。通常情况下，`event.currentTarget`将是`.numField`。

因此，尝试使用`$(".numField").bind("click", stageButtonClick);`，您通常可以使用`$(this)`或`$(event.currentTarget)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T22:52:08.070

如果是这种情况，您可以使用`event object`

```
$(".numField").bind("click", stageButtonClick);

function stageButtonClick(e){
   // You can just use 
         **this**
   OR
       **$(e.target)**
} 
```

`.on()`还使用而不是绑定事件，`.bind()`因为后者已被**前者取代**。

```
$(".numField").on("click", stageButtonClick); 
```

# jquery - jQuery ComboGrid 自动选择

> ID：13887261
> 
> 赞同：2
> 
> 时间：2012-12-14T22:40:35.467
> 
> 标签：jquery, jquery-ui

我的问题是，如何禁用组合网格中的自动选择功能。用例场景是这样的。我有一个项目列表，我希望combogrid 在我输入项目名称时自动完成项目名称。效果很好，甚至完美。但是当我有一个新的项目名称“Underhill Parking Phase 2”并且组合网格下拉列表中还有一个与“Underhill Parking Phase 1”匹配的项目名称时，问题就出现了。因为当只有一个选项可用时，combogrid 会自动选择列表项。当我按 Tab 或输入组合网格时，将“Underhill Parking Phase 2”替换为“Underhill Parking Phase 1”。如何禁用此行为？而且由于我有一个隐藏字段，如果您在视觉上修复表单，则在选择项目时填充隐藏字段，您仍然会在隐藏字段中发布错误的项目。

此外 autoChoose 和 autoFocus 选项不符合我的要求。

# java - Java clip.start() 不工作

> ID：13887267
> 
> 赞同：3
> 
> 时间：2012-12-14T22:41:26.757
> 
> 标签：java, audio, clip, wav

我正在尝试使用以下代码播放 .wav 文件：

```
public class AudioTest {

public AudioTest() {

    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    System.out.println(classLoader.getResourceAsStream("sound.wav"));//to see if the sound file is found

    try{
      Clip clip = AudioSystem.getClip();
          AudioInputStream inputStream = AudioSystem.getAudioInputStream(classLoader.getResourceAsStream("sound.wav"));
          clip.open(inputStream);
          clip.start();
          while (!clip.isRunning())
              Thread.sleep(10);
          while (clip.isRunning())
              Thread.sleep(10);
          clip.close();
        } catch (Exception  e)
            {
              System.out.println("something failed");
            }
System.out.println("done"); //to see if the sound is finished playing
 } 
} 
```

这有效，但如果我离开：

```
 while (!clip.isRunning())
              Thread.sleep(10);
          while (clip.isRunning())
              Thread.sleep(10);
          clip.close(); 
```

不播放声音。我看到的几乎所有播放 .wav 文件的例子都没有那个部分。出了什么问题，有没有更优雅的方法来解决这个问题？

# c# - 创建复杂实体对象

> ID：13887271
> 
> 赞同：0
> 
> 时间：2012-12-14T22:41:41.950
> 
> 标签：c#, xml, entity-framework

我们目前使用 sp's 和 udf's 生成一个 XML 文档，该文档通过 Web 服务发送到客户端以供使用。我以前使用过 ORM（实体和开放访问），但我总是直接与单个类（表）进行交互。如果我有需要转到多个表的数据，我会在代码中将其拆分，然后只更新数据所属的 ORM 类（表）。

我想知道我是否可以变得更复杂一些。我可以以某种方式在 ORM 中创建一个复杂的对象，它是所有这些字段的聚合。换句话说，我会将所需的记录键传递给我的复杂 orm 对象的构造函数。然后该对象将从所有表中收集所需的信息并将该对象返回给我.....然后我可以将其序列化为 xml 并以它的方式发送。

我知道在 ORM 或 DB 的某个地方，我必须有逻辑将所有部分收集在一起，所以真的只是在寻找输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:21:33.347

如果我想要一个由多个表中的数据组成的对象，我只需将所有表添加到 .edmx 文件中。从那里我可以创建一个获得我想要的任何东西的类。无需 1:1 配对。在我的基于主键创建对象的方法中，`TableA`您可以这样做；

```
 Obj GetObj(string primaryKey)
    {
        dataBase context = new dataBase();
          var obj = (from a
                     in context.TableA
                     where a.Id == primaryKey
                     select a);
          var otherObj = (from b
                          in context.TableB
                          where b.Id == a.ForeignKey
                          select b);

         Obj foo = new Obj();

         foo.Id = a.Id;
         foo.SomethingElse = a.Somthing;
         foo.FromB = b.Id;
         foo.AnInt = (int)b.count;

         return foo;
    } 
```

保存一些更改；

```
 void AddNewObject()
   {
         dataBase context = new Context;
         TableA a = new TableA();
         TableB b = new TableB();

         a.Id = this.Id;
         a.OtherField = this.OtherField;
         b.Key = this.BKey;
         b.SomeInt = this.SomeInt;

         context.AddObject("TableA", a);
         context.AddObject("TableB", b);

         context.SaveChanges();
   } 
```

当然，这些将需要一些我没有包括在内的错误处理，但这个概念与您拥有标准 EntityObject<->Table 映射时的概念没有什么不同。我认为保留一些法线映射然后在其之上构建你的类更简单。

# javascript - 如何在没有 jQuery 的情况下使这段代码工作？

> ID：13887272
> 
> 赞同：5
> 
> 时间：2012-12-14T22:41:42.183
> 
> 标签：javascript, jquery

目前我有一个看起来像这样的代码：

```
$('a.guide-item[href="/"]').remove();
$('*[href="/"]').attr('href','/feed/subscriptions/u'); 
```

我需要使文件大小更小，但我不知道如何在“vanilla”javascript 中复制代码。请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T22:49:18.593

不支持IE6/7，很简单。

```
var els = document.querySelectorAll('a.guide-item[href="/"]');

for (var i = 0; i < els.length; i++) {
    if (els[i].parentNode)
        els[i].parentNode.removeChild(els[i]);
}

els = document.querySelectorAll('*[href="/"]');

for (i = 0; i < els.length; i++) {
    els[i].setAttribute('href','/feed/subscriptions/u');
} 
```

如果您需要支持 IE6/7，它仍然非常简单，但是拥有一个按类选择元素的方法会很有帮助，或者至少可以测试一个类。

在网络上不难找到这些的实现。

* * *

这是一个支持旧版 IE 的快速实现。

```
var els = document.links,
    i = els.length;

while (i--) {
    if (els[i].getAttribute("href") !== "/")
        continue;

    if (els[i].className.indexOf("guide-item") !== -1) {
        els[i].parentNode.removeChild(els[i]);
    } else {
        els[i].setAttribute('href','/feed/subscriptions/u');
    }
} 
```

它假定`.className`不会有其他类`"guide-item"`可以作为子模式匹配。

# c++ - 将 XML 数据从计算机发送到计算机 - Qt

> ID：13887274
> 
> 赞同：1
> 
> 时间：2012-12-14T22:41:59.167
> 
> 标签：c++, python, qt, pyqt, pyside

我没有这方面的经验，所以我不得不问。如何使用 Qt 框架将（XML 格式的）数据从一台计算机发送到另一台计算机？

编辑 ：

我发现套接字适用于此，但我不知道如何实现它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:10:16.570

对于使用**Qt**进行文件传输，您将使用`QTcpServer`和`QTcpSocket`. 您可以在他们的网站上查看一些[网络示例。](http://doc.qt.digia.com/qt/examples-network.html)

# android - SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION 无效

> ID：13887278
> 
> 赞同：2
> 
> 时间：2012-12-14T22:42:46.373
> 
> 标签：android, layout, fullscreen

我在 a 中使用此代码`VideoView`来尝试隐藏运行 Android (CyanogenMod) 4.1 的触摸板上的导航栏。

```
 setSystemUiVisibility(SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
            | SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
            | SYSTEM_UI_FLAG_FULLSCREEN
            | SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

不幸的是，它根本没有效果，也没有出错。我不知道该寻找什么（我很欣赏“它不起作用”不是很有帮助，但我的印象是这是您需要使用的唯一代码行，因为有没有错误...）

我已经尝试了各种变体——`getWindow().getDecorView().setSystemUiVi...`在多个地方、在计时器上等等。那行代码肯定已经达到了，但它根本没有做任何事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-06T16:14:55.143

哦，多么可笑。在阅读了源代码之后——这通常是在 Android 领域找到东西的唯一方法——我发现了以下未记录的事实：

**setSystemUiVisibility() 仅在您调用它的视图可见时才有效！**

更重要的是：调用 setSystemUiVisibility() 的视图必须*保持*可见，导航栏才能保持隐藏状态。感谢您记录这些家伙，真的很棒。

这是相关代码，在[`View.java`](https://github.com/aosp-mirror/platform_frameworks_base/blob/master/core/java/android/view/View.java).

```
void performCollectViewAttributes(AttachInfo attachInfo, int visibility) {
    if ((visibility & VISIBILITY_MASK) == VISIBLE) {
        if ((mViewFlags & KEEP_SCREEN_ON) == KEEP_SCREEN_ON) {
            attachInfo.mKeepScreenOn = true;
        }
        attachInfo.mSystemUiVisibility |= mSystemUiVisibility;
        ListenerInfo li = mListenerInfo;
        if (li != null && li.mOnSystemUiVisibilityChangeListener != null) {
            attachInfo.mHasSystemUiListeners = true;
        }
    }
} 
```

# php - 偶尔极慢的 PHP Echo 语句

> ID：13887284
> 
> 赞同：3
> 
> 时间：2012-12-14T22:43:36.897
> 
> 标签：php, performance

我 99% 以上的服务器请求在不到 30 毫秒的时间内得到处理。使用 New Relic，我发现偶尔会收到需要 3 到 30 秒的请求，几乎是平均时间的 1000 倍！在我调查的每一个案例中，New relic 显示 99% 以上的执行时间在 echo 语句中，其中包括：

```
header('Content-type: application/json');
echo $json;
exit; 
```

我的所有请求都使用上面的代码，并且在 99.99% 的时间里都可以正常工作（服务器每小时收到 100K 请求，但其中大约不到 20 个表现出缓慢的行为）。Newrelic 以 1 分钟为增量显示服务器资源。我已经检查过：CPU、内存使用情况、磁盘 I/O、网络 I/O 和平均负载。在长请求之前、期间和之后，它们都显得正常。

我发现这篇文章： [http ://www.wonko.com/post/seeing_poor_performance_using_phps_echo_statement_heres_why](http://www.wonko.com/post/seeing_poor_performance_using_phps_echo_statement_heres_why)

即使在使用标准缓冲大小的 echoBig 函数之后，它仍然很慢。我的 phpinfo() 显示 output_buffering = 4096

对此有什么想法吗？

# iphone - uiImageView 在 UICollectionViewCell 中显示图像之间的边框

> ID：13887285
> 
> 赞同：0
> 
> 时间：2012-12-14T22:43:37.360
> 
> 标签：iphone, objective-c, uiimageview, uicollectionview

我们有一行 139x127 的图像，在我们的集合视图单元格中显示有边框。我们尝试了 UIViewContentModeScaleAspectFill （和 Fit），但它仍然显示边框。

代码如下： // uicollectionviewcell

```
(id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];
if (self) {
    // Initialization code
    self = [super initWithFrame:frame];
    if (self) {

        // Initialization code
        NSArray *arrayOfViews = [[NSBundle mainBundle] loadNibNamed:@"ProfilePhotoCell" owner:self options:nil];

        if ([arrayOfViews count] < 1) {
            return nil;
        }

        if (![[arrayOfViews objectAtIndex:0] isKindOfClass:[UICollectionViewCell class]]) {
            return nil;
        }

        self = [arrayOfViews objectAtIndex:0];

    }

    [self.imageView setContentMode:UIViewContentModeScaleAspectFill];

    return self;

}
return self;
}

 // uicollectionview/viewcontroller
// 1
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {
// 2
CGSize retval = CGSizeMake(100, 66);
return retval;
}

  // 3
 - (UIEdgeInsets)collectionView:
 (UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {
return UIEdgeInsetsMake(20, 0, 0, 0);
} 
```

下面是截图：！[http://m.mirror.co/collection.png](http://m.mirror.co/collection.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:02:33.123

出于调试目的，我发现`LLDB`通过暂停应用程序并运行它来使用它是无价的......

```
po [[UIWindow keyWindow] _autolayoutTrace] 
```

这将为您提供指向每个视图对象的指针。那我就跑...

```
po [0xabcd123 constraints] 
```

...查看是否在运行时添加了您不知道的任何自动约束。此外，您可以获取单元格和视图的帧大小，并查看它们是否匹配。您可能需要以编程方式删除自动约束并应用将视图固定到单元格的新约束。我在使视图单元格在视图之间“翻转”时遇到了一些问题。

不要忘记关闭 init 或 IB 中的自动约束...

```
[self.imageview setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:44:46.163

UICollectionView 的 collectionViewLayout 属性是怎么回事？我猜 UICollectionView 正在填充它正在显示的单元格。

# c - ISO C90 禁止混合声明和代码 sscanf

> ID：13887288
> 
> 赞同：1
> 
> 时间：2012-12-14T22:44:07.947
> 
> 标签：c

我在尝试编译我的单元测试代码时遇到了一个奇怪的错误。出于某种原因，编译器将我的`sscanf`调用视为混合声明？我不太明白，这是整个错误：

```
cc1: warnings being treated as errors
/home/brlcad/brlcad/src/libbn/tests/bn_complex.c: In function 'main':
/home/brlcad/brlcad/src/libbn/tests/bn_complex.c:53: error: ISO C90 forbids mixed declarations and code
make[2]: *** [src/libbn/tests/CMakeFiles/tester_bn_complex.dir/bn_complex.c.o] Error 1
make[1]: *** [src/libbn/tests/CMakeFiles/tester_bn_complex.dir/all] Error 2
make: *** [all] Error 2 
```

* * *

```
int
main(int argc, char *argv[])
{
    double expRe1, expIm2, expSqRe1, expSqIm2;
    double actRe1, actIm2, actSqRe1, actSqIm2;
    actRe1 = actIm2 = actSqRe1 = actSqIm2 =
    expRe1 = expIm2 = expSqRe1 = expSqIm2 = 0.0;
    bn_complex_t com1,com2; //a struct that holds two doubles
    if(argc < 5)
        bu_exit(1, "ERROR: Invalid parameters[%s]\n", argv[0]);

    sscanf(argv[1], "%lf,%lf", &com1.re, &com1.im); /* Error is HERE */
    sscanf(argv[2], "%lf,%lf", &com2.re, &com2.im);
    sscanf(argv[3], "%lf,%lf", &expRe1, &expIm2);
    sscanf(argv[4], "%lf,%lf", &expSqRe1, &expSqIm2);

    test_div(com1, com2, &actRe1, &actIm2);
    test_sqrt(com1,com2, &actSqRe1, &actSqIm2);

    if((fabs(actRe1 - expRe1) < 0.00001) || (fabs(actIm2 - expIm2) < 0.00001)){
        printf("Division failed...\n");
        return 1;
    }
    if((fabs(actSqRe1 - expSqRe1) < 0.00001) || (fabs(actSqIm2 - expSqIm2) < 0.00001)){
        printf("Square roots failed...\n");
        return 1;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T22:48:33.663

在 C90 中，所有声明都必须出现在块的开头。把这个：

```
bn_complex_t com1,com2; //a struct that holds two doubles 
```

以上这些陈述：

```
actRe1 = actIm2 = actSqRe1 = actSqIm2 =
expRe1 = expIm2 = expSqRe1 = expSqIm2 = 0.0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T22:59:03.377

C90 要求所有声明在块内的所有语句之前。

C99（如 C++）允许混合声明和语句。

你有一个赋值语句：

```
actRe1 = actIm2 = actSqRe1 = actSqIm2 =
expRe1 = expIm2 = expSqRe1 = expSqIm2 = 0.0; 
```

后跟声明：

```
bn_complex_t com1,com2; 
```

（它不应该抱怨这些`sscanf`调用；根据您的源文件检查错误消息中的行号。）

您可以重新排列代码，也可以修改您的代码，`Makefile`以便在 C99 模式下调用编译器。您似乎在使用 gcc；使用`-std=c99`（或者`-std=gnu99`如果您想要特定于 GNU 的扩展。（如何执行此操作的详细信息取决于您`Makefile`的编写方式。）

**或者**，您可以用初始化程序（不算作语句）替换分配。

就个人而言，我更喜欢将每个声明放在一行上。我会改变这个：

```
double expRe1, expIm2, expSqRe1, expSqIm2;
double actRe1, actIm2, actSqRe1, actSqIm2;
actRe1 = actIm2 = actSqRe1 = actSqIm2 =
expRe1 = expIm2 = expSqRe1 = expSqIm2 = 0.0; 
```

对此：

```
double expRe1   = 0.0;
double expIm2   = 0.0;
double expSqRe1 = 0.0;
double expSqIm2 = 0.0;

double actRe1   = 0.0;
double actIm2   = 0.0;
double actSqRe1 = 0.0;
double actSqIm2 = 0.0; 
```

但是如果你喜欢更紧凑的布局，你可以写：

```
double expRe1 = 0.0, expIm2 = 0.0, expSqRe1 = 0.0, expSqIm2 = 0.0;
double actRe1 = 0.0, actIm2 = 0.0, actSqRe1 = 0.0, actSqIm2 = 0.0; 
```

即使您在一行上声明了多个变量，您仍然需要为每个变量创建一个初始化程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T22:48:15.533

我不确定为什么编译器会在此处定位错误，但 C90 要求所有变量声明都位于块的顶部，因此`bn_complex_t`s 有错误。

# c# - 托管内存映射文件

> ID：13887294
> 
> 赞同：1
> 
> 时间：2012-12-14T22:44:52.397
> 
> 标签：c#, .net, memory-mapped-files

我的问题是我无法打开文件。在另一个进程中或在同一个进程中！

代码：

```
var path = @"c:\work\mmf.dat";
var map = "testmap123";
var fs = new FileStream(path, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite);

if (fs.Length == 0)
{
    fs.SetLength(1024);
}

var sec = new MemoryMappedFileSecurity();
var mem = MemoryMappedFile.CreateFromFile(fs, map, fs.Length, MemoryMappedFileAccess.ReadWrite, sec, HandleInheritability.Inheritable, false);

// Problem here System.UnauthorizedAccessException

var tmp = MemoryMappedFile.OpenExisting(map, MemoryMappedFileRights.FullControl, HandleInheritability.Inheritable); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:15:20.707

尝试以下操作：

```
var path = @"c:\diverse\mmf.dat";
var map = "testmap123";
using (var fs = new FileStream(path, FileMode.OpenOrCreate, FileAccess.ReadWrite, FileShare.ReadWrite))
{

    if (fs.Length == 0)
    {
        fs.SetLength(1024);
    }
}
using (var mem = MemoryMappedFile.CreateFromFile(path, FileMode.Open, map, 1024, MemoryMappedFileAccess.Read))
{
    using (var tmp = MemoryMappedFile.OpenExisting(map))
    {
        //work with tmp
    }
} 
```

# c# - LINQ to Entities 无法识别方法“Int32 Int32(System.String)”方法，并且该方法无法转换为存储表达式

> ID：13887296
> 
> 赞同：17
> 
> 时间：2012-12-14T22:44:57.737
> 
> 标签：c#, linq, entity-framework

我正在尝试使用 Linq to Entities 查询数据库上下文，但出现此错误：

> LINQ to Entities 无法识别方法“Int32 Int32(System.String)”方法，并且该方法无法转换为存储表达式。

代码：

```
public IEnumerable<CourseNames> GetCourseName()
{
   var course = from o in entities.UniversityCourses
                select new CourseNames
                {
                    CourseID = Convert.ToInt32(o.CourseID),
                    CourseName = o.CourseName,
                 };
   return course.ToList();
} 
```

看到[这个后我就这样尝试](https://stackoverflow.com/questions/12278611/linq-to-entities-does-not-recognize-the-method-int32-int32system-string-meth)

```
public IEnumerable<CourseNames> GetCourseName()
{
    var temp = Convert.ToInt32(o.CourseID);
    var course = from o in entities.UniversityCourses
                 select new CourseNames
                 {
                     CourseID = temp,
                     CourseName = o.CourseName,
                 };
    return course.ToList();
} 
```

但它会抛出一个错误：

> “当前上下文中不存在名称‘o’”

这是我的课程代码`GetCourseName`

```
namespace IronwoodWeb
{
    public class CourseNames
    {
        public int CourseID { get; set; }
        public string CourseName { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-14T23:03:02.377

```
public IEnumerable<CourseNames> GetCourseName()
{
    var courses = from o in entities.UniversityCourses
                  select new { o.CourseID, o.CourseName };

    return courses.ToList() // now we have in-memory query
                  .Select(c => new CourseNames()
                  {
                     CourseID = Convert.ToInt32(c.CourseID), // OK
                     CourseName = c.CourseName
                  });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-24T09:34:20.020

如果您不想具体化查询（检索数据），您可以使用强制转换（即（int）o.CourseId）。被转换为 SQL CAST AS 语句。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T23:06:28.207

您还可以将值作为字符串返回（因为它显然是存储的），然后在之后转换它。

'o' 脱离上下文的错误是您仅在 Linq 查询中声明 o 并且只能在该范围内引用。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2015-09-16T15:25:44.480

显式转换简单且有效： (int)o.CourseID

```
var course = from o in entities.UniversityCourses
                select new CourseNames
                {
                    CourseID = (int)o.CourseID,
                    CourseName = o.CourseName,
                 }; 
```

# knockout.js - 用敲除检查不起作用

> ID：13887297
> 
> 赞同：0
> 
> 时间：2012-12-14T22:45:10.230
> 
> 标签：knockout.js, knockout-2.0

我有以下代码：

问题是，当我检查“Visa”时，绑定似乎不起作用（调试时我仍然可以看到 visa.isVisible 的旧值）

...有任何想法吗？

```
 //my viewModel
  $(function () {
    my = {};

    my.customer = function (customer) {
      var self = this;
      self.customerId = customer.CustomerId;
      self.nationality = {
        nationalityCode: ko.observable(customer.Nationality.NationalityCode),
        isVisible: ko.observable(customer.Nationality.IsVisible)
      };

      self.passport = {
        number: customer.Passport.Number,
        expiredDate: customer.Passport.ExpiredDate,
        isVisible: ko.observable(customer.Passport.IsVisible)
      };

      self.visa = {
        dateIssued: customer.Visa.DateIssued,
        isVisible: ko.observable(customer.Visa.IsVisible)
      };
    };

    my.vm = function () {
      var countries = ko.observableArray([]);
      var states = ko.observableArray([]);
      var customers = ko.observableArray([]);
      var loadData = function () {
        $.getJSON("Home/Index", function (data) {
          loadCustomers(data.Customers);
          loadCountries(data.Countries);
        });
      };
      var loadCustomers = function (customerJson) {
        $.each(customerJson, function (index, customer) {
           customers.push(new my.customer(customer));
        });
      };
      var loadCountries = function (countriesJson) {
        $.each(countriesJson, function (index, country) {
          countries.push({ Id: country.Id, Name: country.Name });
        });
      };

      return {
        loadCustomers: loadCustomers,
        countries: countries,
        states: states,
        customers: customers,
        init: loadData
      }
    }();

    my.vm.init();
    ko.applyBindings(my.vm);
  });
  </script>
</head>
<body>
  <div data-bind="foreach: customers">
     <div style="float: left;">CustomerId: &nbsp;</div>
     <div data-bind="text: customerId"></div>
     <div style="float: left;">Nationality: </div>
     <select data-bind="options: $root.countries, value: nationality.nationalityCode(), optionsText: 'Name', optionsValue: 'Id'"></select>
     <div data-bind="if: passport.isVisible()">
       <div style="float: left;">Passport Exp. date:</div>
       <div data-bind="text: passport.expiredDate"></div>
       <div style="float: left;">Passport number:</div>
       <div data-bind="text: passport.number"></div>
     </div>
     <div data-bind="if: visa.isVisible()">
       <div style="float: left;">Visa date of issue:</div>
       <div data-bind="text: visa.dateIssued"></div>
     </div>
     <div style="clear: both;"></div>
     <input type="checkbox" data-bind="checked: visa.isVisible()" /> Visa <span data-bind="text: visa.isVisible()==true ? 'is':'is not'"></span> visible?
     <hr />
   </div>
 </body> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:51:47.110

问题是您的检查绑定绑定的是布尔值，而不是可观察的。

改变这个：

```
data-bind="checked: visa.isVisible()" 
```

对此：

```
data-bind="checked: visa.isVisible" 
```

# ruby-on-rails - 我在哪里放置显示逻辑（而不是控制器）？

> ID：13887300
> 
> 赞同：0
> 
> 时间：2012-12-14T22:45:17.417
> 
> 标签：ruby-on-rails, model-view-controller, switch-statement, case, helper

我需要根据评论的数量显示不同的文本，并且我已经将逻辑放在了控制器中。但是在控制器中有一个长方法似乎不是很干，我应该把它放在哪里呢？

example_controller.rb：

```
def index
  .
  count_dependent_message
  .
end

def count_dependent_message
  case @user.comment.count
        when 0
          @strong = "example Strong 0"
          @paragraph = "example paragraph 0"
        when 1
          @strong = "Jon Smith is called Smith"
          @paragraph = "example paragraph 1"
        when 2...10
          @strong = "Once upon a time...Steve Jobs... "
          @paragraph = "example paragraph 2"
        when 11...40
          @strong = "Wow you have many counts"
          @paragraph = "example paragraph 3"

        else
          @strong = "exciting"
          @paragraph = "example paragraph 4"  
  end
end 
```

看法：

```
<h3>
 <strong>
  <%= @strong %>
 </strong>
</h3>
<p>
<%= @paragraph %>
</p> 
```

我考虑过将逻辑放在部分中，但这似乎不是很有效，因为我要渲染的文本只是一个句子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:31:04.580

您可以将翻译方法添加到视图助手。

```
def strong(comment_count)
   case ...
end 
```

然后您的视图将如下所示：

```
<%= strong(@comment_count) %> 
```

您的控制器将如下所示：

```
@comment_count = @user.comments.count 
```

这很好，因为控制器不会有任何显示逻辑并且视图也会很短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:13:13.393

将视图代码移动到部分，例如 _heading.html.erb

```
<h3>
 <strong><%= texts[:heading] %></strong>
</h3>
<p><%= texts[:text] %></p> 
```

而 count_dependent_message 方法应该是

```
 def count_dependent_message(count = nil)
      case count
      when 0
        { :heading => "example Strong 0", :text => "example paragraph 0" }
      when 1
        { :heading => "Jon Smith is called Smith", :text => "example paragraph 1" }
      when 2...10
        { :heading => "Once upon a time...Steve Jobs... ", :text => "example paragraph 2" }
      when 11...40
        { :heading => "Wow you have many counts", :text => "example paragraph 3" }
      else
        { :heading => "exciting", :text => "example paragraph 4" }
      end
    end 
```

因此你可以打电话

```
<%= render 'heading', :locals => { :texts => count_dependent_message(@user.comment.count) } %> 
```

# openssl - 如何使用 RSA 密钥文件从 openssl aes-256 解密密文

> ID：13887305
> 
> 赞同：0
> 
> 时间：2012-12-14T22:45:40.827
> 
> 标签：openssl, aes

我正在设计一种加密方案来将文件发送到嵌入式设备。开发人员可以通过共享公钥登录，因此使用相同的密钥加密/解密发送给它的文件是有意义的。文件只由开发者打包，所以这个公钥永远不会被泄露。

发送的文件只需要足够安全以使其难以解密，而不是任何 NSA 质量或任何东西。

我可以使用这样的东西加密/解密：

```
cat file | openssl [-d] aes-256-cbc -kfile path/to/public/key > outfile.aes 
```

这很好用，除了我想在服务器代码中执行此操作。我可以掏出钱，但我宁愿用代码来做。

我从密钥中获取了 base64 数据，但是当我对其进行解码时，我得到了一个 279 字节的数组，但我需要一个 256 位密钥（32 字节）。

openssl 究竟对密钥文件做了什么，我如何在代码中模拟它？

我试过`man openssl`了，但我没有发现任何有用的东西。

如果这很重要，我会在 Go 中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:35:14.340

OpenSSL 使用特定的密钥派生函数从给出的“密码”计算密钥。这个函数被称为`EVP_BytesToKey`。它是 OpenSSL API 的一部分，因此如果您可以调用 C/C++ 函数，则可以直接使用它。否则，还有其他可用的实现（实际上实现起来并不难，我创建了一个面向对象的 Java 版本）。

如果你不介意的话，我会让你自己在 stackoverflow 上搜索这个算法：）

# git - 如何自动化 Pivotal Tracker 和 Github 集成？

> ID：13887310
> 
> 赞同：18
> 
> 时间：2012-12-14T22:46:29.453
> 
> 标签：git, github, githooks, pivotaltracker

Pivotal Tracker 和 Github 有很好的集成：一旦设置好，每个以 Pivotal Tracker ID 为前缀的提交都会自动出现在相应的 Pivotal Ticket 下，例如：

```
git commit -am '[#1234567] my new changes'
git push origin 
```

将通过 github 提交链接将评论“我的新更改”自动添加到 1234567 Pivotal Ticket 中。

但是，很容易忘记每次添加票证 ID。如何简化/自动化？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-14T22:46:29.453

解决方案是使用 Git-Hooks 和功能分支。（推荐使用 Github-flow）。

您必须安装此 Git-Hook（将文件复制到本地存储库）：

[https://github.com/ktamas77/git_hooks](https://github.com/ktamas77/git_hooks)

在开始处理特定的 Pivotal Ticket 之前，您需要创建一个以 Pivotal Tracker ID 为前缀的分支，例如：

```
git checkout 1234567_build_new_form 
```

然后像往常一样添加所有更改：

```
git commit -am 'form added'
git commit -am 'styles added'
git push origin 
```

您会看到，git hook 脚本会自动从功能分支名称中提取 Pivotal Tracker ID，并将其添加到每个评论的前面。如果需要，您仍然可以手动覆盖它（使用另一个 ID）。

通过这种方式，您不必担心为每个提交手动添加 Pivotal ID。它也适用于 GUIS（例如 GIT Tower），因为这些 GUI 使用标准的 GIT 库/可执行文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T13:20:18.233

这是一个基于 Tamas 解决方案的简单 shell 版本。它从分支名称的末尾获取 ID。

"my-feature-branch-12345678" => "我的提交消息 [#12345678]"。

移至 .git/hooks/prepare-commit-msg 并使其可执行：

```
#!/bin/bash
if story_id=`git branch | grep -oP '^\*.*\-\K[0-9]+$'`
then
  echo "[#$story_id]" >> "$1"
fi 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-14T14:36:48.393

安装“git-pivotal-tracker-integration”gem，[https://github.com/nebhale/git-pivotal-tracker-integration](https://github.com/nebhale/git-pivotal-tracker-integration)

它将命令添加到 git，如开始和完成到 Git，以自动为分支和提交添加前缀，并使用跟踪器故事 ID，它还将您的提交消息发布到跟踪器。当您调用“git start”时，它会拉动 master 以确保您是最新的，为您创建一个分支并为您在 tracker 中开始故事。做这项工作然后调用'git完成'，它会将你的分支合并回主控和更新跟踪器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-02T08:46:49.833

我的团队正在使用[`git_tracker`](https://github.com/stevenharman/git_tracker). 每个开发人员必须运行

```
$ git tracker init 
```

Pivotal Tracker 上的每个项目一次。然后，他们需要使用特殊约定命名每个新分支，并为其添加 Pivotal Tracker 故事 ID 后缀。例如：

```
$ git checkout -b the-great-feathure-123456789 
```

其中 123456789 将是 Pivotal Tracker 故事 ID。

在这里，您将自动让每个提交都引用该故事。奖励点，如果您使用 GitHub 执行拉取请求，您可以要求合并故事的审阅者添加到合并提交中：

```
[Fixes #123456789] ... 
```

这样，您无需单击`Finish`按钮，GitHub 会为您完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-17T05:51:26.127

我正在使用一个书签，它还设置了故事标题中的提交消息。

```
[#69609212] Add new Todo 
```

你可以从[这里得到它](http://makandracards.com/makandra/851-bookmarklet-to-generate-a-commit-message-with-pivotal-tracker-story-id-and-title)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-23T15:08:40.410

迟到的评论，但也许仍然有用。我想要@Sjoerd 提供的相同解决方案，但我是mac 用户；）

生成的代码如下所示；

```
story_id=`git symbolic-ref --short -q HEAD | grep -o "^[[:digit:]]*"`
if [ ! -z "$story_id" -a "$story_id" != " " ]
then
  echo "[#$story_id] $(cat $1)" > "$1"
fi 
```

请注意，我们将问题 ID 添加到分支名称之前，但修改正则表达式以匹配字符串的结尾而不是开头是非常基本的。我们还将问题 ID 添加到评论的开头，因为这在 git 日志中提供了更清晰的概述。如果上述脚本是 ues，则每个提交消息都将在前面加上`[#<issue ID>]`，除非分支名称不以实际问题 ID 开头。

应该注意的是，最好将此代码添加到`prepare-commit-msg`钩子中的任何其他代码之前，因为这将导致*所有*提交都被预先设置，甚至自动合并等。

希望这可以帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-06T16:40:22.310

这是一个完全符合您要求的宝石：

[http://github.com/bogdan/git-storyid](http://github.com/bogdan/git-storyid)

它允许从格式良好的菜单中选择一个故事：

```
[1] Removing Billing Page
[2] Welcome Email
[3] Tag campaign insertion points and campaigns with an identifier

Indexes(csv): 3
[campaign-tags 3020407]  [#44116647] Initial implementation of campaign tags
 1 file changed, 101 insertion(+), 2 deletions(-) 
```

# php - Doctrine2 刷新单个删除的实体

> ID：13887314
> 
> 赞同：7
> 
> 时间：2012-12-14T22:46:52.370
> 
> 标签：php, orm, doctrine-orm

尝试删除实体，而不保留其他更改。请注意（虽然在这种特定情况下它并不是真正需要的）该方法不应影响`flush()`操作后调用的结果。

```
$em->remove($entity);
$em->flush($entity); 
```

抛出一个`'InvalidArgumentException' with message 'Entity has to be managed for single computation`.

我可以使用 DQL 进行删除；只是想知道是否有办法通过实体管理器来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T13:33:36.660

我忘记了[transactions](http://docs.doctrine-project.org/en/2.0.x/reference/transactions-and-concurrency.html)，我必须对其进行测试：

```
// $em instanceof EntityManager
$em->transactional(function($em) {
    $em->remove($entity);
}); 
```

如果在事务之前和之后更改的实体*不在*显式事务中，则不确定我是否可以使用事务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T12:49:14.970

试试这个：

1.  从当前 EM 中分离实体：

    ```
    $em->detach($entity); 
    ```

2.  创建一个新的 EM 实例并使用它来删除：

    ```
    $em2->remove($entity);
    $em2->flush(); 
    ```

或者，您可以使用`clear()`负责从 EM 中分离所有实体的方法，如下所示：

```
$em->clear();
$em->remove($entity);
$em->flush(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-16T14:47:33.727

简单的解决方案是：

```
$entity = $em->manage($entity);
// $entity now refers to the fully managed copy returned by the merge operation.
// The EntityManager $em now manages the persistence of $entity as usual
$em->remove($entity);
$em->flush(); 
```

# c# - 用正在呈现的控件完全替换 ItemsControl ContentPresenter

> ID：13887316
> 
> 赞同：2
> 
> 时间：2012-12-14T22:47:07.370
> 
> 标签：c#, wpf, silverlight, xaml

我正在使用 ItemsControl 根据我的模型生成控件列表。在查看可视化树时，我注意到每个呈现的控件都包含在 ContentPresenter 中。添加的控件是第 3 方控件，如果它们是同级控件，则设计为在每个控件之间显示拆分器。这允许用户调整每个控件的大小。例如，以下将显示运行时每个控件之间的拆分器。

```
<StackPanel>
<3rdPartyControl />
<3rdPartyControl />
<3rdPartyControl />
</StackPanel> 
```

使用 ItemsControl 时，每个 3rdPartyControl 都包装在 ContentPresenter 中，因此不显示拆分器。我尝试了各种方法来尝试解决这个问题，但除非我在后面编写代码来添加每个控件而不是依赖 Xaml，否则无法让它工作。有谁知道完全替换 contentpresenter 的方法（在我的情况下是 3rdpartyControl）？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T22:55:15.370

为了替换 ContentPresenter，您可以从 ItemsControl 派生并覆盖[GetContainerForItemOverride](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.getcontainerforitemoverride.aspx)方法以创建专门的容器控件。

例如，ListBox 会覆盖此方法以创建一个 ListBoxItem 作为新项目对象的容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T22:58:26.413

没错，您添加到 ItemsControl 的每个元素都使用 ContentPresenter 包装，您可以在 dr.wpf [ItemsControl az的系列文章中找到有关它的更多详细信息](http://drwpf.com/blog/itemscontrol-a-to-z/)

我建议尝试的一种方法是将 ItemsControl 更改为 ListBox 并使 ListBox 的行为类似于 ItemsControl。在这种情况下，您可以重新样式/重新模板 ListBoxItem 并用您的控件替换 ContentPresenter。您还需要停止选择支持。[这](http://msdn.microsoft.com/en-us/library/ms754242.aspx)是您需要更改的 ListBox 样式。

# html - css子菜单悬停问题

> ID：13887324
> 
> 赞同：0
> 
> 时间：2012-12-14T22:47:31.077
> 
> 标签：html, css, menu, nav

我有一个子菜单，当我将鼠标悬停在父列表上时，它会像预期的那样下降，并且一切都使用悬停颜色，但是当我回到父列表时，它不会显示悬停颜色，直到我在非常顶部/几乎不在列表中..这是填充问题吗？

```
/* MENU */

 #gen_navigation {

float:right;
margin:0;
padding:0;

 }

#gen_navigation li a, #gen_navigation li {
float:left;
}

 #gen_navigation li {

list-style:none;
position:relative;

}

 #gen_navigation li a {
padding: 35px 20px 23px 20px;
text-decoration:none;
color:white;
border-right: 1px solid #3c3c3c;
border-left: 1px solid #333;
border-bottom: 1px solid #232323;
border-radius:3px;
}

 /* Sub-Menu */
 #gen_navigation li ul {
display:none;
position:absolute;
left:0;
top:100%;
margin:0;
padding:0;
background: #292929;
background: -moz-linear-gradient(top, black, #3c3c3c 1px, #292929 25px);
  background: -webkit-gradient(linear, left top, left 25, from(black), color-stop(4%,   #3c3c3c), to(#292929)); 

}

  #gen_navigation li:hover ul {
display:block;

}
#gen_navigation li ul li, #gen_navigation li ul li a {
float:none;
}

#gen_navigation li ul li a {
 width: 180px;
 display: block;
} 
```

和html

```
 <ul id="gen_navigation">
            <li class="selected"><a href="#"><span>Home</span></a></li>
            <li><a href="#"><span>About</span></a>
                <ul>
                    <li><a href="#">Gate 5 Energy Partners</a></li>
                    <li><a href="#">Leadership</a></li>
                    <li><a href="#">Key Consultants & Strategic Partners</a></li>
                </ul>
            </li>
            <li><a href="#"><span>Technology</span></a>
                <ul>
                    <li><a href="#">About SERT</a></li>
                    <li><a href="#">About the inventor</a></li>
                </ul>
            </li>
            <li><a href="#"><span>Applications</span></a>
                <ul>
                    <li><a href="#">Agri-Business</a></li>
                    <li><a href="#">WasteWater Industry</a></li>
                </ul>
            </li>
            <li><a href="#"><span>Benefits</span></a>
                <ul> 
                    <li><a href="#">Environmental Benefits</a></li>
                    <li><a href="#">Economic Benefits</a></li>
                </ul>
            </li>
            <li><a href="#"><span>Inquiries</span></a></li>
        </ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:21:31.883

好吧，我试图让你的代码正常工作，我明白了，但现在我看到 joholo 把它整理出来了。不过，我想我有你的解决方法：通过使用 jQuery's `parents()`，我将 'selected' 类重新添加到你的 top `<li>`。

[检查这个工作示例](http://jsfiddle.net/fabio_silva/YjLxy/13/)

顺便说一句：我认为你的`.animate`不起作用，所以我猜你正在尝试使用 jQuery-UI 的`effect`. 也检查一下。

问候！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:12:04.977

可能不是填充问题，在我看来更像是 javascript 事件处理程序问题。

即使您将鼠标悬停在其中一个孩子上，父母仍然在 javascript 中悬停。因此，当您返回父级时，悬停不会为父级触发。

```
$('li').hover(function(){
    // 1\. Parent gets onmouseover (hover) first time. Adds .selected on it's element.
    // 2\. When mouse move from parent to child, removes .selected from parent, and adds to child.
    // 3\. When back from child to parent, onmouseover (hover) on parent won't fire because it already (technically one of its children) already has onmouseover.
    $('li').removeClass('selected'); 
    $(this).addClass('selected').animate(bounce);        
}); 
```

如何以一种好的方式修复它是一个不同的问题:-)

# ios - UIView transitionFromView:toView: 和布局约束

> ID：13887327
> 
> 赞同：10
> 
> 时间：2012-12-14T22:47:44.670
> 
> 标签：ios, nslayoutconstraint

`[UIView transitionFromView:toView:...]`使用布局约束的正确方法是什么？

我想在约束 toView 的超级视图中安装约束。在转换调用之前我不能这样做，因为 toView 还没有超级视图。（在调用之后但在运行循环进行之前也是如此。）等到完成块安装它意味着视图将具有动画而没有约束。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-14T23:58:16.030

我会使用 UIViewAnimationOptionShowHideTransitionViews 选项，它允许 toView 和 fromView 在转换之前位于视图层次结构中，但显示一个并隐藏另一个。

设置toView为隐藏，添加到superview中，在transition前安装约束。然后，您可以删除完成块中的旧视图。像这样的东西：

```
[toView setHidden: YES];
[containerView addSubview: toView];
[containerView addConstraints: [NSLayoutConstraint constraintsWithVisualFormat: @"|[toView]|" options: 0 metrics: nil views: NSDictionaryOfVariableBindings(containerView, toView)]];
[containerView addConstraints: [NSLayoutConstraint constraintsWithVisualFormat: @"V:|[toView]|" options: 0 metrics: nil views: NSDictionaryOfVariableBindings(containerView, toView)]];

[UIView transitionFromView: fromView toView: toView duration: 1.0 options: UIViewAnimationOptionTransitionFlipFromBottom | UIViewAnimationOptionShowHideTransitionViews completion:^(BOOL finished) {
    [fromView removeFromSuperview];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:20:11.227

在转换调用之后（但在运行循环进行之前）添加约束是有效的：我之前的测试无效:-(。对不起，噪音。

```
 NSArray *priorConstraints = _constraints;
    [UIView transitionFromView:priorView
                        toView:newView
                        ...
                    completion:^(BOOL finished) {
                        [_containerView removeConstraints:priorConstraints];
                        ....
                    }];
    _constraints = [self constrainSubview:newView toBeCongruentWithSuperview:_containerView];

- (NSArray/*[NSLayoutConstraint]*/ *)constrainSubview:(UIView *)subview 
                           toBeCongruentWithSuperview:(UIView *)superview {
    subview.translatesAutoresizingMaskIntoConstraints = NO;
    NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(subview);

    NSArray *constraints = [NSLayoutConstraint 
                            constraintsWithVisualFormat:@"H:-(0)-[subview]-(0)-"
                            options:0
                            metrics:nil
                            views:viewsDictionary];
    constraints = [constraints arrayByAddingObjectsFromArray:
                   [NSLayoutConstraint
                    constraintsWithVisualFormat:@"V:-(0)-[subview]-(0)-"
                    options:0
                    metrics:nil
                    views:viewsDictionary]];
    [superview addConstraints:constraints];
    return constraints;
} 
```

# command-line - SQLGetPrivateProfileString 失败

> ID：13887328
> 
> 赞同：10
> 
> 时间：2012-12-14T22:47:51.670
> 
> 标签：command-line, odbc, dsn, rhel6

在 RHEL 6 上键入命令：odbcinst -q -s，我收到以下错误消息：

```
odbcinst: SQLGetPrivateProfileString failed with . 
```

当我运行时，我所有的 DSN 也没有出现：

```
odbcinst -q -d 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T18:51:39.833

输入命令：`env |grep 'ODBC'`检查是否设置了`ODBCSYSINI`和`ODBCINI`变量。如果没有返回结果 - 您需要将变量添加到指向 的环境变量`directory`和文件所在的路径，`odbc.ini`如下所示（在我的情况下，对于 RHEL 6，它位于`/etc`- 其他人可能有它`/usr/local/etc`）：

编辑`~\.bash_profile`并添加以下行：

```
export ODBCSYSINI=/etc
export ODBCINI=/etc/odbc.ini 
```

你已准备好出发！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-17T13:30:31.767

在我的情况下（ubuntu 16.04）它与[这个错误](https://bugs.launchpad.net/ubuntu/+source/unixodbc/+bug/298870)有关，只是不是 ~/.odbc.ini 而是 /etc/odbc.ini。在 /etc/odbc.ini 中添加一行

`[empty-sys]`

解决了这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-02T09:48:11.613

回答这个问题可能为时已晚，但它适用于那些仍然无法使用@kapil Vyas 答案解决这个问题的人-

添加到他的答案中，您将需要注销然后再次从您的用户登录以使导出命令（保存在 .bash_profile 中）起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-06T15:30:42.170

当我遇到这个问题时，我编辑`/usr/local/etc/odbcinst.ini`添加：

```
[MySQL]
Description = ODBC for MySQL
Driver = /usr/lib/x86_64-linux-gnu/odbc/libmyodbc8a.so
Setup = /usr/lib/x86_64-linux-gnu/odbc/libodbcmyS.so
FileUsage = 1
Pooling = Yes
CPTimeout = 120 
```

我希望这是有帮助的。

# cloud - vmc 定位在我自己的服务器上失败

> ID：13887334
> 
> 赞同：0
> 
> 时间：2012-12-14T22:48:24.277
> 
> 标签：cloud, cloud-foundry, vmc

我正在尝试在我自己的服务器上安装 cloudfoundry，我[在这里使用了这个步骤](http://blog.dustinkirkland.com/2011/08/howto-install-cloudfoundry-server-paas.html)

，安装成功完成，所有服务运行没有任何问题。

但是当我使用`vmc target api.vcap.me`目标过程失败时！

何时检查 vcap 访问日志，当我尝试连接时出现此行： `168.144.196.107 - [14/Dec/2012:16:38:44 -0500] "GET /info HTTP/1.1" 404 214 "-" "Ruby" 41.9.133.520 response_time:0.001`

请问有什么帮助吗？

注意：我编辑我的主机文件以接受 api.vcap.me

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:17:00.767

您遵循的文件已过时。推荐大家关注 GitHub 上的官方文档：[https](https://github.com/cloudfoundry/vcap) ://github.com/cloudfoundry/vcap 。这应该会给你一个非常详细和更新的步骤来构建你自己的 PAAS 服务器。

# objective-c - 无法构建 initWithStyle 方法...

> ID：13887342
> 
> 赞同：-2
> 
> 时间：2012-12-14T22:48:45.100
> 
> 标签：objective-c, ios, xcode4.5

我有一个 iPad 应用程序，内置 XCode4.5，使用 Storyboards 和 iOS6。我有一个 UITableView，我正在尝试使用 MagicalRecord 从 CoreData 存储中填充。这是我的代码给我带来的问题：

```
- (id) initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier  {

    self = [super initWithStyle:<#style#> reuseIdentifier:reuseIdentifier];  //  <--

    if(self) {
        //  initialization code
    }
    return self;
} 
```

我收到一个构建错误（在 // <-- 行）说“预期的表达式”。我看过SO，Google，绝对无法弄清楚！（我在另一个应用程序中运行相同的代码没有问题）。

有人可以告诉我如何纠正这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:50:32.213

好吧，我不知道这是粘贴错误还是其他什么，buu应该这样写：

```
self = [super initWithStyle: style reuseIdentifier:reuseIdentifier]; 
```

# concurrency - Sinatra::与 websocket 同步

> ID：13887345
> 
> 赞同：1
> 
> 时间：2012-12-14T22:49:30.780
> 
> 标签：concurrency, websocket, sinatra, eventmachine, em-synchrony

鉴于[Sinatra::Synchrony](https://github.com/kyledrake/sinatra-synchrony#readme)正在使用[EM-Synchrony](https://github.com/igrigorik/em-synchrony#em-synchrony) “便利类和原语的集合来帮助解开事件代码”，这样您就可以编写“快速、高度并发的 Web 应用程序而无需回调（只需像编写普通的 Sinatra 一样进行开发） Web 应用程序，并使用非阻塞库）"..

如何实现一个使用 websock 协议且没有回调的 Sinatra::Synchrony “hello world”应用程序？

换句话说：Sinatra::Synchrony 和 EM-Synchrony 是否也涵盖了 websocket 部分？我找不到足够的文档...有人可以给我几行代码吗？

谢谢

# c++ - 将字节数组的内容转换为 wchar_t*

> ID：13887348
> 
> 赞同：2
> 
> 时间：2012-12-14T22:49:36.960
> 
> 标签：c++, bytearray, wchar-t, lptstr

我似乎在将字节数组（包含 word 文档中的文本）转换为 LPTSTR (wchar_t *) 对象时遇到问题。每次代码执行时，我都会返回一堆不需要的 Unicode 字符。

我认为这是因为我没有在某处进行正确的调用，或者没有正确使用变量，但不太确定如何解决这个问题。希望这里有人可以指导我正确的方向。

发生的第一件事是调用 C# 代码打开 Microsoft Word 并将文档中的文本转换为字节数组。

```
byte document __gc[];
document = word->ConvertToArray(filename); 
```

文件内容如下：

```
{84, 101, 115, 116, 32, 68, 111, 99, 117, 109, 101, 110, 116, 13, 10} 
```

最终成为以下字符串：“测试文档”。

我们的下一步是分配内存以将字节数组存储到 LPTSTR 变量中，

```
byte __pin * value;

value = &document[0];

LPTSTR image;
image = (LPTSTR)malloc( document->Length + 1 ); 
```

一旦我们执行开始分配内存的那一行，我们的 image 变量就会被一堆不需要的 Unicode 字符填充：

```
췍췍췍췍췍췍췍췍﷽﷽����˿於潁 
```

然后我们做一个 memcpy 来传输所有的数据

```
memcpy(image,value,document->Length); 
```

这只会导致出现更多不需要的 Unicode 字符：

```
敔瑳䐠捯浵湥൴촊﷽﷽����˿於潁 
```

我认为我们遇到的问题要么与我们如何在字节数组中存储值有关，要么可能与我们将数据从字节数组复制到 LPTSTR 变量有关。任何解释我做错了什么的帮助，或者任何能指引我正确方向的帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T23:01:21.880

首先，您应该了解一些有关文本数据及其表示方式的知识。可以帮助您入门的参考是[*每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求（没有借口！）*](http://www.joelonsoftware.com/articles/Unicode.html)

`byte`只是 typedef 或用于`char`or的东西`unsigned char`。所以字节数组`char`对字符串使用了一些编码。您实际上需要从该编码转换为适用于 Windows' 的 UTF-16 `wchar_t`。以下是推荐在 Windows 上进行此类转换的典型方法：

```
int output_size = MultiByteToWideChar(CP_ACP,0,value,-1,NULL,0);
assert(0<output_size);
wchar_t *converted_buf = new wchar_t[output_size];
int size = MultiByteToWideChar(CP_ACP,0,value,-1,converted_buf,output_size);
assert(output_size==size); 
```

我们调用该函数`MultiByteToWideChar()`两次，一次是为了确定需要多大的缓冲区来保存转换的结果，第二次是传入我们分配的缓冲区来进行实际的转换。

`CP_ACP`指定源编码，您需要查看 API 文档以确定该值的真正含义。`CP_ACP`代表“代码页：Ansi 代码页”，这是微软对“非 Unicode”程序的编码集的说法。API 可能正在使用其他东西，比如`CP_UTF8`（我们希望）或 1252 或其他东西。

[您可以在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)查看有关 MultiByteToWideChar 的其余文档以找出其他参数。

* * *

> 一旦我们执行开始分配内存的那一行，我们的 image 变量就会被一堆不需要的 Unicode 字符填充：

当你调用`malloc()`给你的内存是未初始化的并且只包含垃圾。您在初始化之前看到的值无关紧要，您根本不应该使用该数据。唯一重要的数据是你用什么填充缓冲区。上面的`MultiByteToWideChar()`代码也会自动终止字符串，因此您不会在未使用的缓冲区空间中看到垃圾（并且我们使用分配缓冲区的方法不会留下任何额外的空间）。

* * *

上面的代码实际上并不是很好的 C++ 风格。这只是 Win32 提供的 C 风格 API 的典型用法。我更喜欢进行转换的方式（如果我被迫）更像是：

```
std::wstring_convert<std::codecvt_utf8_utf16<wchar_t>,wchar_t> convert; // converter object saved somewhere

std::wstring output = convert.from_bytes(value); 
```

（假设使用的编码是 UTF-8。对于任何其他编码，`char`您必须使用不同的方面。）`codecvt`

# php - 如何使用 PHP 反转我的图像被拉入并显示在我的网站上的顺序

> ID：13887350
> 
> 赞同：0
> 
> 时间：2012-12-14T22:49:52.657
> 
> 标签：php, html

我需要先更改我的结果最大数字的顺序

```
 <?php $files = glob("blog/*.*"); for ($i=1; $i<count($files); $i++) { $num = $files[$i]; echo '<img src="'.$num.'" alt="random image">'."&nbsp;&nbsp;"; } ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:54:43.783

只是颠倒循环的顺序怎么样？

```
<?php $files = glob("blog/*.*"); $i = count($files) - 1; for ($i; $i>=0; $i--) { $num = $files[$i]; echo '<img src="'.$num.'" alt="random image">'."&nbsp;&nbsp;"; } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:21:08.690

您可以使用 `array_reverse ($files)`来反转数组值的顺序...然后使用您当前使用的循环

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T22:56:15.950

如果将图像作为 blob 存储在 mysql 中，则可以使用 order by desc 子句编写 SQL。例子：

```
select image from image_repo order by image_id desc 
```

# javascript - 同位素图像 onclick 以在顶部 div Wordpress 中显示新内容

> ID：13887361
> 
> 赞同：3
> 
> 时间：2012-12-14T22:50:49.623
> 
> 标签：javascript, wordpress, jquery-isotope

我正在努力在 Wordpress 上复制[Angular 主题中发生的事情。](http://www.kriesi.at/themes/angular/)

我已经能够获得同位素来过滤 post_thumbnails 显示它们并且它的动画效果很好但我坚持的是当单击图像或链接时，该帖子/投资组合的内容会显示在新的 div 中。理想情况下，将盒子推开，因此如果您在移动设备上，则不必滚动到顶部。

任何让我开始的指针都会很棒，只是在任何地方都找不到这样的东西，并认为它对其他人非常有用:)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:50:07.300

实际上，这可以很容易地实现。基本上你只需要为所有同位素项目添加一个点击处理程序。处理程序必须确定哪个元素已被单击（例如，通过检查被单击项目的类名，但当然有很多方法），然后将相应的内容添加到您的`div`元素中。

如果内容必须显示在适当的位置，那就更容易了。您可以简单地将预览和完整内容添加到同一个同位素项目，但默认隐藏完整内容：

```
<div class="item">
    <div class="preview">...</div>
    <div class="full">...</div> <!-- hidden with CSS -->
</div> 
```

然后为所有同位素项目添加一个点击处理程序：

```
$(".item").click(function(){
    $(this).toggleClass("big");
    $("#container").isotope("reLayout");
}); 
```

当点击的项目展开时，通过调用`.isotope("reLayout")`其他项目被推开。

最后，您需要一些基本的 CSS 规则来制作更大的`div`元素，默认隐藏，但在 parent 中设置时显示。在那种情况下，当然必须隐藏；这一切都可以用 CSS 完成，不需要 JavaScript/jQuery。`.big``.full``.big``div``.preview`

好吧，解释起来有点麻烦——我猜一个例子说了一千多个词：**[JSFiddle](http://jsfiddle.net/Aletheios/h3zgL/)**

当然这只是一个非常基本的例子，但希望它能解释我的意思。;)

# android - aChartEngine，如何从图表中获取值

> ID：13887362
> 
> 赞同：2
> 
> 时间：2012-12-14T22:50:53.560
> 
> 标签：android, achartengine

我是android的新开发应用程序，所以我希望有人可以帮助我。我正在查看一个朋友的代码，他创建了一个 B 类来制作图表，在 A 类中他创建了一个 GraphicalView 并在 b 类中调用一个 GraphicalView 方法来返回制作的图表。我想获取用户单击的图表的值，我检查了 aChartEngine 的演示，但在示例中，他们在创建图表的代码中创建了 setOnClickListener，所以我想知道是否有人知道我该怎么做如果图表已经在 GraphicalView 中制作，则获取此值，听听是一个例子。

```
class B{
    GraphicalView chart;
    public GraphicalView graf (){
        //heare is the code that generates the chart;
        return chart;
    }
}

class A{
    GraphicalView chartMade;
    b makeChart = new b();
    chartMade = makeChart.graf();
} 
```

我想获得 A 类中的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:04:28.077

您的示例含糊不清，因此我无法为您提供具体帮助，但基本方法是覆盖[GraphicalChart](http://www.achartengine.org/content/javadoc/org/achartengine/GraphicalView.html)的`onTouchEvent()`call `getCurrentSeriesAndPoint()`。您可以从这些数据中调用`getValue()`和/或`getXValue()`获取图表的一些数据。

* * *

 **B类内的加法尝试添加**：****

 **```
chartView.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        SeriesSelection selection = ((GraphicalView) v).getCurrentSeriesAndPoint();
        Log.v("Touch", selection.getValue() + ", " + selection.getXValue());
        return false;
    }
}); 
```**

# r - 看起来像甜甜圈的圆形热图

> ID：13887365
> 
> 赞同：33
> 
> 时间：2012-12-14T22:51:21.347
> 
> 标签：r, ggplot2, heatmap, donut-chart

我正在尝试使用 ggplot2 创建圆形热图，这样我就可以在圆的圆周上使用更多的标签。我想让它看起来更像是一个中间有一个空洞的甜甜圈，但同时又不会丢失任何行（它们需要被压缩）。

我所拥有的代码如下。

```
library(reshape)
library(ggplot2)

nba <- read.csv("http://datasets.flowingdata.com/ppg2008.csv")

nba$Name <- with(nba, reorder(Name, PTS))
nba.m <- melt(nba)
nba.m <- ddply(nba.m, .(variable), transform, value = scale(value))

p = ggplot(nba.m, aes(Name,variable)) + geom_tile(aes(fill = value), colour = "white") +           scale_fill_gradient(low = "white", high = "steelblue") 
p<-p+opts(
panel.background=theme_blank(),
axis.title.x=theme_blank(),
axis.title.y=theme_blank(),
panel.grid.major=theme_blank(),
panel.grid.minor=theme_blank(),  
axis.text.x=theme_blank(),
axis.ticks=theme_blank()
)

p = p + coord_polar() 
plot(p) 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-15T02:46:11.213

这是一个解决方案，通过 (1) 将因子转换为数字并添加偏移量，(2) 手动指定 y 限制和 (3) 手动设置 y 轴中断和标签：

```
library(reshape)
library(ggplot2)
# Using ggplot2 0.9.2.1

nba <- read.csv("http://datasets.flowingdata.com/ppg2008.csv")
nba$Name <- with(nba, reorder(Name, PTS))
nba.m <- melt(nba)
nba.m <- ddply(nba.m, .(variable), transform, value = scale(value))

# Convert the factor levels to numeric + quanity to determine size of hole.
nba.m$var2 = as.numeric(nba.m$variable) + 15

# Labels and breaks need to be added with scale_y_discrete.
y_labels = levels(nba.m$variable)
y_breaks = seq_along(y_labels) + 15

p2 = ggplot(nba.m, aes(x=Name, y=var2, fill=value)) +
     geom_tile(colour="white") +
     scale_fill_gradient(low = "white", high = "steelblue") +
     ylim(c(0, max(nba.m$var2) + 0.5)) +
     scale_y_discrete(breaks=y_breaks, labels=y_labels) +
     coord_polar(theta="x") +
     theme(panel.background=element_blank(),
           axis.title=element_blank(),
           panel.grid=element_blank(),
           axis.text.x=element_blank(),
           axis.ticks=element_blank(),
           axis.text.y=element_text(size=5))

ggsave(filename="plot_2.png", plot=p2, height=7, width=7) 
```

![在此处输入图像描述](../Images/c30eaa02a696504c966a02605ce4de6f.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-11T16:49:32.813

解决@FedericoGiorgi 的评论，而不是原始问题。谢谢@bdemarest，您的解决方案非常有用！

将数据框组合在一起以显示标签，并妥善安排它们：

```
nba.labs <- subset(nba.m, variable==levels(nba.m$variable)[nlevels(nba.m$variable)])
nba.labs <- nba.labs[order(nba.labs$Name),]
nba.labs$ang <- seq(from=(360/nrow(nba.labs))/1.5, to=(1.5*(360/nrow(nba.labs)))-360, length.out=nrow(nba.labs))+80
nba.labs$hjust <- 0
nba.labs$hjust[which(nba.labs$ang < -90)] <- 1
nba.labs$ang[which(nba.labs$ang < -90)] <- (180+nba.labs$ang)[which(nba.labs$ang < -90)] 
```

`geom_text`为标签添加一个：

```
p2 = ggplot(nba.m, aes(x=Name, y=var2, fill=value)) +
     geom_tile(colour="white") +
     geom_text(data=nba.labs, aes(x=Name, y=var2+1.5,
        label=Name, angle=ang, hjust=hjust), size=3) +
     scale_fill_gradient(low = "white", high = "steelblue") +
     ylim(c(0, max(nba.m$var2) + 1.5)) +
     scale_y_discrete(breaks=y_breaks, labels=y_labels) +
     coord_polar(theta="x") +
     theme(panel.background=element_blank(),
           axis.title=element_blank(),
           panel.grid=element_blank(),
           axis.text.x=element_blank(),
           axis.ticks=element_blank(),
           axis.text.y=element_text(size=5))
print(p2) 
```

[![在此处输入图像描述](../Images/e9ab200a1237f31fcd533f01cd85c20c.png)](https://i.stack.imgur.com/Q1DAs.png)

# c# - 如何获取 JValue 对象的名称

> ID：13887366
> 
> 赞同：5
> 
> 时间：2012-12-14T22:51:31.993
> 
> 标签：c#, json, json.net

我正在使用 Newtonsoft.Json 来解析 Json 文本。出于某种原因，我需要 JToken 或 Jvalue 对象的名称。例如，如果**"ChoiceId":865**是 JValue，那么我需要获取**"ChoiceId"**。但我现在尝试了几个小时，但不知道怎么做。我怎样才能得到那个名字？

谢谢

示例：如果这是 json 文件内容：

```
{"ChoiceId":868,"Choice":"Post","Url":"/pst/goods"} 
```

然后我可以通过使用获取 ChoiceId 值

```
JObject json = JObject.Parse(hole);
JValue jvalue = (Jvalue)json["ChoiceId"];
string value = jvalue.Value; 
```

但是没有属性可以获取名称 ie."ChoiceId" 。所以我的问题是我怎样才能得到它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T23:03:44.753

由于我没有看到您的任何代码，因此我在吐槽，也许您正在寻找[`JToken.Parent`and`JProperty`](http://james.newtonking.com/projects/json/help/)？

```
// Assumes token is JToken, search for the owning JProperty
var parentProperty = token.Ancestors<JProperty>()
                          .FirstOrDefault();

// alternatively, if you know it'll be a property:
var parentProperty = ((JProperty)token.Parent);

var name = parentProperty.Name; 
```

# java - Java 错误：.class 文件错误中的错误版本号

> ID：13887369
> 
> 赞同：0
> 
> 时间：2012-12-14T22:51:57.137
> 
> 标签：java, jar

我已经看到与此确切错误有关的其他问题，但它们似乎根本没有帮助。

我正在编写一个在 Linux 系统（如果我没记错的话是 CentOS）上运行的应用程序，该系统具有 Java 1.5 版本。我目前正在我的具有 Java 1.6 的 Mac OSX 系统上的 Eclipse IDE 上编辑程序。

我将项目编译成一个可运行的 .JAR 文件。当提示选择如何处理 Eclipse 中的库时，我选择“将选定的包提取到 .JAR 文件中”。

我知道 Eclipse 有自己的编译器，所以在项目设置中我将目标编译器更改为 Java 1.5 并重新构建。然后重新打包运行的jar文件。

但是，在目标机器上运行带有“java -jar file.jar”的 .JAR 文件时，我仍然会收到上述“错误的版本号”错误。

有人可以帮忙吗？

完整的错误是：

```
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:620)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)
at java.net.URLClassLoader.access$100(URLClassLoader.java:56)
at java.net.URLClassLoader$1.run(URLClassLoader.java:195)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:268)
at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319) 
```

我只使用一个外部库 sun-javamail。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:04:36.280

You either:

*   haven't recompiled everything with -target 1.5
*   haven't redeployed everything
*   are using third party JARs compiled for 1.6\. The class named in the exception will tell you that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:19:04.487

您可能希望在类文件上运行 javap 命令并检查编译它的 JDK 的确切版本。

例如：

```
C:\>javap -verbose Main
Compiled from "Main.java"
public class Main extends java.lang.Object
  SourceFile: "Main.java"
  minor version: 0
  major version: 50
... 
```

以下是主要版本和jdk的映射

```
MajorVersion     JDK
51      J2SE 7
50      J2SE 6.0
49      J2SE 5.0 
```

参考：[类文件格式](http://viralpatel.net/blogs/tutorial-java-class-file-format-revealed/)

# asp.net - 更新面板的无效转换异常

> ID：13887370
> 
> 赞同：1
> 
> 时间：2012-12-14T22:51:59.973
> 
> 标签：asp.net, vb.net

**点击按钮**

```
Protected Sub btnSubmit_Click(sender As Object, e As System.EventArgs) Handles btnSubmit.Click
        MsgBox("INSIDE")
        If SocialAuthUser.IsLoggedIn Then
            Dim accountId As Integer = BLL.getAccIDFromSocialAuthSession
            Dim AlbumID As Integer = BLL.createAndReturnNewAlbumId(txtStoryTitle.Text.Trim, "")
            Dim URL As String = BLL.getAlbumPicUrl(txtStoryTitle.Text.Trim)
            Dim dt As New DataTable
            dt.Columns.Add("PictureID")
            dt.Columns.Add("AccountID")
            dt.Columns.Add("AlbumID")
            dt.Columns.Add("URL")
            dt.Columns.Add("Thumbnail")
            dt.Columns.Add("Description")
            dt.Columns.Add("AlbumCover")
            dt.Columns.Add("Tags")
            dt.Columns.Add("Votes")
            dt.Columns.Add("Abused")
            dt.Columns.Add("isActive")
            Dim Row As DataRow

            Dim uniqueFileName As String = ""
            If Session("ID") Is Nothing Then
                lblMessage.Text = "You don't seem to have uploaded any pictures."
                Exit Sub
            Else

**Dim FileCount As Integer = Request.Form(Request.Form.Count - 2)**
                Dim FileName, TargetName As String
                Try
                    Dim Path As String = Server.MapPath(BLL.getAlbumPicUrl(txtStoryTitle.Text.Trim))
                    If Not IO.Directory.Exists(Path) Then
                        IO.Directory.CreateDirectory(Path)
                    End If
                    Dim StartIndex As Integer
                    Dim PicCount As Integer
                    For i As Integer = 0 To Request.Form.Count - 1
                        If Request.Form(i).ToLower.Contains("jpg") Or Request.Form(i).ToLower.Contains("gif") Or Request.Form(i).ToLower.Contains("png") Then
                            StartIndex = i + 1
                            Exit For
                        End If
                    Next
                    For i As Integer = StartIndex To Request.Form.Count - 4 Step 3
                        FileName = Request.Form(i)
                        '## If part here is not kaam ka..but still using it for worst case scenario
                        If IO.File.Exists(Path & FileName) Then
                            TargetName = Path & FileName
                            'MsgBox(TargetName & "--- 1")
                            Dim j As Integer = 1
                            While IO.File.Exists(TargetName)
                                TargetName = Path & IO.Path.GetFileNameWithoutExtension(FileName) & "(" & j & ")" & IO.Path.GetExtension(FileName)
                                j += 1
                            End While
                        Else
                            uniqueFileName = Guid.NewGuid.ToString & "__" & FileName
                            TargetName = Path & uniqueFileName

                        End If
                        IO.File.Move(Server.MapPath("~/TempUploads/" & Session("ID") & "/" & FileName), TargetName)
                        PicCount += 1
                        Row = dt.NewRow()
                        Row(1) = accountId
                        Row(2) = AlbumID
                        Row(3) = URL & uniqueFileName
                        Row(4) = ""
                        Row(5) = "No Desc"
                        Row(6) = "False"
                        Row(7) = ""
                        Row(8) = "0"
                        Row(9) = "0"
                        Row(10) = "True"
                        dt.Rows.Add(Row)
                    Next
                    If BLL.insertImagesIntoAlbum(dt) Then

                        lblMessage.Text = PicCount & IIf(PicCount = 1, " Picture", " Pictures") & " Saved!"
                        lblMessage.ForeColor = Drawing.Color.Black
                        Dim db As SqlDatabase = Connection.connection
                        Using cmd As DbCommand = db.GetSqlStringCommand("SELECT PictureID,URL FROM AlbumPictures WHERE AlbumID=@AlbumID AND AccountID=@AccountID")
                            db.AddInParameter(cmd, "AlbumID", Data.DbType.Int32, AlbumID)
                            db.AddInParameter(cmd, "AccountID", Data.DbType.Int32, accountId)
                            Using ds As DataSet = db.ExecuteDataSet(cmd)
                                If ds.Tables(0).Rows.Count > 0 Then
                                    ListView1.DataSource = ds.Tables(0)
                                    ListView1.DataBind()
                                Else
                                    lblMessage.Text = "No Such Album Exists."
                                End If

                            End Using
                        End Using
                        'WebNavigator.GoToResponseRedirect(WebNavigator.URLFor.ReturnUrl("~/Memories/SortImages.aspx?id=" & AlbumID))
                    Else
                        'TODO:we'll show some error msg
                    End If

                Catch ex As Exception
                    MsgBox(ex.Message)
                    lblMessage.Text = "Oo Poop!!"
                End Try
            End If
        Else
            WebNavigator.GoToResponseRedirect(WebNavigator.URLFor.LoginWithReturnUrl("~/Memories/CreateAlbum.aspx"))
            Exit Sub
        End If

    End Sub 
```

上面的代码工作正常。我在页面中添加了一个更新面板以避免回发，但是当我添加按钮时单击作为触发器

```
<Triggers>
   <asp:AsyncPostBackTrigger ControlID="btnSubmit" />
</Triggers> 
```

在更新面板中以避免回发，我收到以下错误。当我将按钮单击作为触发器添加到更新面板时会发生这种情况。

![在此处输入图像描述](../Images/34e80f743637d83d3c77bf3038c49816.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T22:59:13.883

`Request.Form`返回一个`NameValueCollection`可以通过键名或`int`索引器访问的。它总是返回 a`String`而不是 a `Integer`。

```
Dim FileCount As String = Request.Form(Request.Form.Count - 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:00:02.367

这都是来自异常消息的直觉，但就行了

```
FileCount As Integer = Request.Form(Request.Form.Count - 2) 
```

它看起来像是`Request.Form(Request.Form.Count - 2)`一个字符串，而您正在尝试将它分配给整数类型。

我不知道您要做什么，但字符串看起来包含“true”您想要以下内容吗？

```
FileCount As Integer += Boolean.Parse(Request.Form(Request.Form.Count - 2)) ? 1 : 0; 
```

# windows - 使用 CMake 在 64 位窗口上安装和链接 OpenCV 2.4.3

> ID：13887377
> 
> 赞同：0
> 
> 时间：2012-12-14T22:52:46.953
> 
> 标签：windows, opencv, cmake

我目前正在尝试将 CMake 项目从 Linux 转换到依赖于 OpenCV 的 Windows，但我无法将库链接到可执行文件。

我在下面发布了大致的 CMakeLists.txt 文件，其中省略了一些私人内容：

```
project(my_project_name)
cmake_minimum_required(VERSION 2.8)

SET(CMAKE_CXX_FLAGS "-g -Wall")
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/../bin)

FIND_PACKAGE(OpenCV REQUIRED)

IF(NOT OpenCV_FOUND)
    MESSAGE(FATAL_ERROR "OpenCV not found")
ENDIF()

SET(PROJECT_HDRS
    #headers here
)

SET(PROJECT_SRCS
    #sources here
)

add_executable(${PROJECT_NAME} ${PROJECT_SRCS})
TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${OpenCV_LIBS}) 
```

这个 CMakeLists.txt 文件在 Linux 上工作得很好，但在 Windows 上链接有问题。我的第一反应是 OpenCV 安装不好？以下是我在安装 OpenCV 时使用的大致步骤

1.  下载 OpenCV 2.4.3 可执行文件（自解压存档）
2.  解压到某个目录
3.  使用 CMake-Gui 配置生成 OpenCV.sln
4.  在 Visual Studio C++ 2010 Express 中打开并在调试和发布配置中构建 ALL_BUILD 项目
5.  构建安装项目

当我尝试构建自己的项目时，我得到错误“未定义对'cv :: waitKey（int）'错误的引用，这让我认为这是一个链接器问题。我试图直接指向.lib文件， 如：

```
target_link_libraries(${PROJECT_NAME} C:/someDirectory/opencv_core243.lib) 
```

但我仍然得到同样的错误。

我还尝试了这些 StackOverflow 线程中描述的方法： [这里](https://stackoverflow.com/questions/7417242/linking-problem-with-opencv-and-cmake)和[这里](https://stackoverflow.com/questions/5502848/how-to-include-opencv-libraries-in-cmake-makefile)。

如果我遗漏了一些明显的东西，我会事先道歉，但这或多或少是我第一次在 Windows 上开发，我的想法已经不多了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T14:41:22.140

有点晚了，但是……我们走吧

对我来说这个教程很完美

[http://kevinhughes.ca/tutorials/opencv-install-on-windows-with-codeblocks-and-mingw/](http://kevinhughes.ca/tutorials/opencv-install-on-windows-with-codeblocks-and-mingw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T16:42:58.853

`visual studio2010`据我所知，问题出`vc++2010`在 .`net framework 4.5`

将其降级为`.net framework4`（即卸载`.net 4.5`并安装`4.0`）。那将解决问题...我一头撞到我的桌子上解决了上述问题..或者`visual c++`用新的服务包修补

# java-me - 如何处理后台线程上显示的 LWUIT 对话框

> ID：13887384
> 
> 赞同：2
> 
> 时间：2012-12-14T22:54:09.720
> 
> 标签：java-me, dialog, lwuit, race-condition, event-dispatch-thread

我在 LWUIT 中编写了一个针对 J2ME 电话 (Sprint DuraXT) 的应用程序。该应用程序适用于皮卡车司机。它接收来自后端调度系统的调度，描述司机必须进行的接送和交付。作为司机，在执行取货和送货时，司机输入状态信息，并将其发送回调度系统。

现在，在处理取件或交付过程中，可能会向驾驶员显示错误对话框（错误的字段输入）、是/否确认对话框（确认某些操作）和信息对话框（指示驾驶员应注意的某些状态）。

此外，还有一个后台线程监听来自后端服务器的调度。在当前实现中，该后台线程还可以创建是/否确认对话框和信息对话框。这些对话框更像是一个警报，因为它们具有关联的声音，但它们只是对话框。

只要这两个对话不是“同时”发生的，一切都会按预期进行。您可以关闭对话框，应用程序按预期继续。

但是，当您在屏幕上并且已经显示了一个对话框并且来自后台线程的第二个对话框发生时，您有时会以错误的屏幕显示而告终，并且它被“冻结”。例如，软键无效。

我的假设是关闭对话框的线程之间存在竞争条件。它是这样的。EDT 被阻止显示作为表单逻辑的一部分出现的对话框。后台线程也被阻止显示一个对话框。现在，当 EDT 上显示的对话框消失时，表单会恢复，但 EDT 可能会关闭并显示另一个表单（通过 show()）。当后台线程显示的对话框被关闭时，有时会恢复最初显示对话框时显示的表单。现在，显示器显示的形式与 EDT 可能显示的形式不同。

很明显，这个问题是由后台线程的活动产生的对话框引起的。所以基本问题是：“如何处理后台线程产生的对话框？” 我有一些想法，但没有一个产生特别干净的实现。我希望有人不得不处理同样的问题并提出建议。

我尝试过同步对话框的构造和显示，以便一次只能显示一个对话框。这肯定会改善 UI，但并不能完全解决问题。当第一个对话被解除时，比赛就开始了。这里有一些其他的想法，

1.  如果对话框由 EDT 以外的线程显示，则在关闭对话框时在显示堆栈顶部的窗体上调用 show。这有点小技巧，但可能是一种解决方法。
2.  运行由 EDT 上的后台线程显示的对话框。有几种方法可以做到这一点，但问题是它会解决问题吗？使用 EventDispatcher 会有帮助吗？我已经尝试使用 EventDispatcher 来触发包含 Dialog 的子类作为源的 ActionEvent。该子类包含一个调用正确形式的对话框显示方法的 show() 方法。持有 EventDispatcher（应用程序全局）的类监听这些事件。当事件到达时，调用 show 方法。对于从被解散的任何地方继续执行的信息对话框，这应该有效。对于是/否对话框，您可能必须创建类似是/否回调来处理逻辑中的分叉。不明显的是，这是否真的会序列化 EDT 线程上的对话处理。这似乎很复杂。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:40:39.617

经过一些实验，我实际上找到了解决方案。因为对话框是涉及是/否对话框和数据库查询的更复杂操作的一部分，所以我发现我必须将整个操作包装在一个实现 Runnable 接口的类中。然后我通过 Display.getInstance().callSeriallyAndWait(runnable) 运行该操作。

所以其他人可能会从这个讨论中受益，这里是其中一个类的示例，其中操作嵌入在 run 方法中。

```
   私有类 CancelOrder 实现 Runnable {

```
 private KWMap order;

    public CancelOrder(KWMap order) {
        this.order = order;
    }

    public void run() {
        String orderNum = getString(order, OrderTable.ORDER_NUM);
        if (legStatusTable.isOrderStarted(orderNum)
                && !orderTable.isOrderComplete(order)) {
            String msg = "You received a cancellation message for Order "
                    + orderNum
                    + " which has been started but is not finished."
                    + "\nDo you want to keep it?";
            if (app.yesNoDialog(msg, "Yes", "no")) {
                sendCancelResponse(order, "Yes", "");
            } else {
                deleteOrder(orderNum);
                sendCancelResponse(order, "No", "");
            }
        } else {
            // order has neither been started nor completed.
            deleteOrder(orderNum);
            sendCancelResponse(order, "Yes", "");
            app.alertDialog("Dispatcher cancelled Order " + orderNum);
        }
    }
} 
```

这里的关键是该操作包含取决于用户如何响应是/否对话框的逻辑，并且还有对底层数据库和消息传递子系统的操作。除了对话框之外，此操作中的任何内容都不会阻塞 EDT 超过 100 毫秒，因此应用程序运行非常流畅。该应用程序 coorectly 处理堆叠在一起的 dislogs，这是让这些操作在后台（非 EDT）线程上运行的简单方法的问题。

```

# json - 使用 d3.json()/d3.xhr() 的多部分发布请求

> ID：13887386
> 
> 赞同：5
> 
> 时间：2012-12-14T22:54:19.823
> 
> 标签：json, d3.js

目前是否不支持通过请求提交多部分表单数据？

我了解如何使用 d3.json().post() 执行 POST，如此处所述[，](https://stackoverflow.com/questions/12493758/xhr-post-request-using-d3)但我想使用 POST 通过 multipart/form-data 将参数提交给 API。

我找不到任何关于如何最好地做到这一点的资源，这似乎很奇怪；我最接近的是[https://github.com/mbostock/d3/issues/929](https://github.com/mbostock/d3/issues/929)和[https://github.com/mbostock/d3/wiki/Requests](https://github.com/mbostock/d3/wiki/Requests)但这些并没有真正涵盖多部分表格。

是否有我在 d3.v3.js 中找不到的 #929 中描述的功能的未记录部分允许使用多部分表单？是否有人目前正​​在研究或对这个问题感兴趣？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-03T20:38:47.820

成功的多部分帖子需要三个步骤。

1.  添加标题`Content-type: application/x-www-form-urlencoded`
2.  编码表单数据
3.  像在 URL 中指定查询字符串一样连接它

然后将其作为 POST 数据发送。

这些都不是 d3 特有的，但我想我会给出我的答案和一些示例代码，因为我来到这里。

示例代码：

```
var xhr = d3.xhr(post_url)
    .header("Content-type", "application/x-www-form-urlencoded");

xhr.post("arg1=" + encodeURIComponent(arg1) + "&arg2=" + encodeURIComponent(arg2),
  function(error, result) {
    if(error)
        throw new Error(error);
    read_paths.data(JSON.parse(result.responseText));
}); 
```

# r - 如何简化此 R 脚本？

> ID：13887393
> 
> 赞同：1
> 
> 时间：2012-12-14T22:55:26.893
> 
> 标签：r

我在 R 中有一个大数据框，看起来像这样：

```
 name   amount   date1       date2  days_out year
    JEAN  318.5 1971-02-16 1972-11-27  650 days 1971
 GREGORY 1518.5       <NA>       <NA>   NA days 1971
    JOHN  318.5       <NA>       <NA>   NA days 1971
  EDWARD  318.5       <NA>       <NA>   NA days 1971
  WALTER  518.5 1971-07-06 1975-03-14 1347 days 1971
   BARRY 1518.5 1971-11-09 1972-02-09   92 days 1971
   LARRY  518.5 1971-09-08 1972-02-09  154 days 1971
   HARRY  318.5 1971-09-16 1972-02-09  146 days 1971
   GARRY 1018.5 1971-10-26 1972-02-09  106 days 1971 
```

如果某人的 days_out 少于 60，他们将获得 90% 的折扣。60-90，70%的折扣。我需要找出每年所有金额的折扣总和。我非常尴尬的解决方法是编写一个 python 脚本，该脚本编写一个 R 脚本，每个相关年份的读取方式如下：

```
tmp <- members[members$year==1971, ]
tmp90 <- tmp[tmp$days_out <= 60  & tmp$days_out > 0  & !is.na(tmp$days_out),  ]
tmp70 <- tmp[tmp$days_out <= 90  & tmp$days_out > 60 & !is.na(tmp$days_out),  ]
tmp50 <- tmp[tmp$days_out <= 120 & tmp$days_out > 90 & !is.na(tmp$days_out),  ]
tmp30 <- tmp[tmp$days_out <= 180 & tmp$days_out >120 & !is.na(tmp$days_out),  ]
tmp00 <- tmp[tmp$days_out > 180 | is.na(tmp$days_out), ]
details.1971 <- c(1971, nrow(tmp),
  nrow(tmp90), sum(tmp90$amount), sum(tmp90$amount) * .9,
    nrow(tmp70), sum(tmp70$amount), sum(tmp70$amount) * .7,
    nrow(tmp50), sum(tmp50$amount), sum(tmp50$amount) * .5,
    nrow(tmp30), sum(tmp30$amount), sum(tmp90$amount) * .9,
    nrow(tmp00), sum(tmp00$amount))
membership.for.chart <- rbind(membership.for.chart,details.1971) 
```

它工作得很好。tmp 帧和向量被覆盖，这很好。但我知道我已经完全击败了这里关于 R 的所有优雅和高效的东西。一个月前我第一次发布了 R，我想我已经走了很长一段路。但我真的很想知道我应该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:32:23.003

您可以使用`cut`函数或`findInterval`函数。确切的代码将取决于对象的内部结构，这些内部结构并未明确地与控制台输出进行通信。如果那`days_out`是一个差异时间对象。那么这样的事情可能会起作用：

```
disc_amt <- with(tmp, amount*c(.9, .7, .5, .9, 1)[
                                 findInterval(days_out, c(0, 60, 90, 120, 180, Inf] ) 
```

您应该`dput()`在该`tmp`对象上发布输出，或者`dput(head(tmp, 20))`如果它真的很大，并且可以继续测试。（实际折扣似乎并没有以我预期的方式订购。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T23:36:44.407

哇，您编写了一个生成 R 脚本的 Python 脚本？想想我的眉毛扬起...

希望这会让你开始：

```
#Import your data; add dummy column to separate 'days' suffix into its own column
dat <- read.table(text = "   name   amount   date1       date2  days_out dummy year
    JEAN  318.5 1971-02-16 1972-11-27  650 days 1971
 GREGORY 1518.5       <NA>       <NA>   NA days 1971
    JOHN  318.5       <NA>       <NA>   NA days 1971
  EDWARD  318.5       <NA>       <NA>   NA days 1971
  WALTER  518.5 1971-07-06 1975-03-14 1347 days 1971
   BARRY 1518.5 1971-11-09 1972-02-09   92 days 1971
   LARRY  518.5 1971-09-08 1972-02-09  154 days 1971
   HARRY  318.5 1971-09-16 1972-02-09  146 days 1971
   GARRY 1018.5 1971-10-26 1972-02-09  106 days 1971",header = TRUE,sep = "")

#Repeat 3 times
df <- rbind(dat,dat,dat)

#Create new year variable
df$year <- rep(1971:1973,each = nrow(dat))

#Breaks for discount levels
ct <- c(0,60,90,120,180,Inf)

#Cut into a factor
df$fac <- cut(df$days_out,ct)

#Create discount amounts for each row
df$discount <- c(0.9,0.7,0.5,0.9,1)[df$fac]
df$discount[is.na(df$discount)] <- 1

#Calc adj amount
df$amount_adj <- with(df,amount * discount)

#I use plyr a lot, but there are many, many
# alternatives
library(plyr)
ddply(df,.(year),summarise,
            amt = sum(amount_adj),
            total = length(year),
            d60 = length(which(fac == "(0,60]"))) 
```

`ddply`我在最后一个命令中只计算了你的几个汇总值。我假设你可以自己扩展它。

# google-chrome - Chrome 正在渲染 .txt 文件

> ID：13887394
> 
> 赞同：0
> 
> 时间：2012-12-14T22:55:45.580
> 
> 标签：google-chrome

突然之间，chrome (v 23.0) 开始渲染用于调试 curl http 请求的 .txt 文件。这些文件中有 javascript 和 html 曾经显示为文本。现在，一些 javascript 导致重定向。Safari 和 Firefox 仍然像以前一样工作。

我的结论是这是一个设置，但在 Chrome 设置中没有找到任何相关的东西。

任何想法在哪里更改这样的设置。

**编辑：** HTTP标头：

```
Request URL:https://mysite.com/debug/checkin_cron/checkin_cron_bu_913.txt
Request Method:GET
Status Code:200 OK
Request Headers
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Cookie:
Host:mysite.com
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11

Response Headers
Accept-Ranges:bytes
Connection:Keep-Alive
Content-Length:47520
Content-Type:text/plain
Date:Fri, 14 Dec 2012 23:09:00 GMT
Keep-Alive:timeout=3, max=100
Last-Modified:Fri, 14 Dec 2012 22:28:31 GMT
Server:Apache 
```

# c# - 给定 SyntaxTree 中的行号，获取 SyntaxNode

> ID：13887396
> 
> 赞同：16
> 
> 时间：2012-12-14T22:55:56.573
> 
> 标签：c#, roslyn

我想获取给定位置（lineNumber）的行的 SyntaxNode。下面的代码应该是不言自明的，但如果有任何问题，请告诉我。

```
static void Main()
        {
            string codeSnippet = @"using System;
                                        class Program
                                        {
                                            static void Main(string[] args)
                                            {
                                                Console.WriteLine(""Hello, World!"");
                                            }
                                        }";

            SyntaxTree tree = SyntaxTree.ParseCompilationUnit(codeSnippet);
            string[] lines = codeSnippet.Split('\n');
            SyntaxNode node = GetNode(tree, 6); //How??
        }

        static SyntaxNode GetNode(SyntaxTree tree,int lineNumber)
        {
            throw new NotImplementedException();
            // *** What I did ***
            //Calculted length from using System... to Main(string[] args) and named it (totalSpan)
            //Calculated length of the line(lineNumber) Console.Writeline("Helllo...."); and named it (lineSpan)
            //Created a textspan : TextSpan span = new TextSpan(totalSpan, lineSpan);
            //Was able to get back the text of the line : tree.GetLocation(span);
            //But how to get the SyntaxNode corresponding to that line??
        } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-15T00:14:19.863

首先，要`TextSpan`根据行号获取，您可以使用返回`Lines`的索引器（但要小心，它从 0 开始计算行数）。`SourceText``GetText()`

然后，要获取与该跨度相交的所有节点，您可以使用`DescendantNodes()`.

最后，您过滤该列表以获取完全包含在该行中的第一个节点。

在代码中：

```
static SyntaxNode GetNode(SyntaxTree tree, int lineNumber)
{
    var lineSpan = tree.GetText().Lines[lineNumber - 1].Span;
    return tree.GetRoot().DescendantNodes(lineSpan)
        .First(n => lineSpan.Contains(n.Span));
} 
```

如果该行上没有节点，这将引发异常。如果有多个，它将​​返回第一个。

# javascript - Javascript将对象的当前内容保存在另一个对象中？

> ID：13887401
> 
> 赞同：1
> 
> 时间：2012-12-14T22:57:02.583
> 
> 标签：javascript

假设我有：

```
var obj1 = {
    '0': 'a',
    '1': 'b'
    }

var obj2 = obj; // I want to create a new object with obj contents

obj1[2] = 'c' // Now I modify obj without modifying obj2

obj1 = obj2; // so I can restore obj later 
```

但是修改 obj 也会修改 obj2。如何创建独立于它的 obj1 的副本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T22:59:43.457

您需要对对象进行**deepCopy**。

```
var obj1 = {
    '0': 'a',
    '1': 'b'
};

var obj2 = deepCopy(obj1);

obj1[2] = 'c'

console.log(obj1);
console.log(obj2);

function deepCopy(obj) {
    var newObj = {};
    for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
            newObj[key] = obj[key];
        }
    }
    return newObj;
}​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/sQnrA/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T22:58:13.650

如果您的对象与 JSON 兼容（即，不包含任何函数作为值，也不包含对 DOM 节点的引用等）：

```
var obj2 = JSON.parse(JSON.stringify(obj1)); 
```

# actionscript-3 - 平铺和缩放的精灵之间的间隙

> ID：13887403
> 
> 赞同：0
> 
> 时间：2012-12-14T22:57:29.093
> 
> 标签：actionscript-3, apache-flex, layout

我正在开发一个地图应用程序，我遇到了一个问题，即我的瓷砖在缩放时是如何铺设的。

这是我的结构的基本介绍：

![在此处输入图像描述](../Images/58691ef1185230b708c56817ada58a04.png)

显然还有很多事情要做，但你明白了。现在，我缩放地图应用程序 `Sprite`以放大。当缩放发生时，每个图块之间都有一个间隙。

您可以在此处看到 4 个瓷砖相交的间隙：

![在此处输入图像描述](../Images/8d61813ba98912313b2c29969283245a.png)

我将所有内容缓存为位图。对于每个 Layer （都扩展`Bitmap`），我`smoothing`设置为 true 并`pixelSnapping`设置为`PixelSnapping.ALWAYS`（像素捕捉在这里应该没有帮助，但它也不应该受到伤害）。

有人对如何解决此问题有任何建议吗？

（为了完整起见，地图应用程序完全使用 AS3 构建，并嵌入在 Flex 应用程序中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:53:32.037

没有看到您的代码很难确定，但它可能只是由于缩放而导致的视觉伪影 - 例如：缩放到 155% 的 250px 宽位图应该以 387.5px 宽呈现，但这是不可能的，因此它以 388px 宽呈现 - 与0.5px 部分以 50% alpha 呈现为 1px，以提供 0.5px 的“外观”。

确保缩放位图的宽度/高度始终是整数可以解决它吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T02:20:00.060

使用整数平铺 x,y 位置并正确计算这些位置很可能是这里的解决方法，除非图像中有接缝！需要计算和设置 x,y 位置的代码才能正确查明代码中的问题。

但是，如果您要缩放该容器精灵，您需要确保缩放以使图块的宽度/高度为整数值。

例如，如果您缩放包含这些图块的精灵，则各个图块的宽度/高度可能并不总是整数，因此会创建您看到的那些接缝。

在这种情况下，您可以做的是通过整数值调整宽度/高度值来进行缩放，同时考虑比例，而不是在容器精灵上使用 scaleX 和 scaleY。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T06:06:52.337

这看起来像一个舍入错误。

没有代码很难知道：如果发布您的平铺类的准系统示例，这对您和我们来说将是一笔巨大的财富。在减法的过程中，您很可能会发现您的解决方案。

我建议您测试当您以各种细粒度步骤缩放和 algin 四个 100x100 位图图像时会发生什么，以检测它是 Flash 渲染问题还是您的课程中的缺陷。

# jquery - jQuery Mobile - 在 html 中动态替换脚本标签

> ID：13887404
> 
> 赞同：0
> 
> 时间：2012-12-14T22:57:30.463
> 
> 标签：jquery, html, jquery-mobile

当我在控制台日志中打印出来时，我可以看到该值，但是我没有看到该值被填充到 list.html 内的 html 页面中。所以我猜我需要确保元素在它之前已经加载？任何建议将不胜感激。

html:

```
<script type="text/html" id="searchPickPlaceTemplate">
<div class="searchPickWhere_box">
    <ul data-inset="true">                             
        <li><a data-transition="slide" id="searchPickWhere" href="list.html">{{whereSearch}}</a></li>                             
     </ul>
 </div> 
```

​</p>

脚本：

```
 $('#restWhere').bind('touchstart mousedown', function (e) {                
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: WebServiceURL + "GetSuburbsWithPlacesAndCity",
                dataType: "json",
                data: "{'cityId':'" + cityId + "', 'categoryId': '" + categoryId + "'}",
                success: function (result) {
                    $("#searchPickPlace").html("");
                    $.each(result.d, function () {
                        $(document).ready(function () {
                            console.log('SubrubName asdfsd ' + this.name);
                            var test = $("#searchPickPlaceTemplate").text();
                            test = test.replace("{{whereSearch}}", this.name);
                            $("#searchPickPlace").append(searchPickRestaurnt);
                        });
                    });
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:07:27.557

第一的：

1.  从每个块中删除 $(document).ready(function () { ，它不会与它一起工作，你也不需要它。

2.  替换这一行： $("#searchPickPlace").append(searchPickRestaunt); 用这个 $(".searchPickPlace").append(test); 您将错误的内容附加到错误的元素。

这是您的代码的一个愚蠢示例：http: [//jsfiddle.net/Gajotres/tJBGw/](http://jsfiddle.net/Gajotres/tJBGw/)

所以它应该看起来像这样：

```
$('#restWhere').bind('touchstart mousedown', function (e) {                
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: WebServiceURL + "GetSuburbsWithPlacesAndCity",
            dataType: "json",
            data: "{'cityId':'" + cityId + "', 'categoryId': '" + categoryId + "'}",
            success: function (result) {
                $("#searchPickPlace").html("");
                $.each(result.d, function () {
                    console.log('SubrubName asdfsd ' + this.name);
                    var test = $("#searchPickPlaceTemplate").text();
                    test = test.replace("{{whereSearch}}", this.name);
                    $(".searchPickPlace").append(test);
                });
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T18:23:52.927

始终尝试将 JavaScript 代码放在 html 正文标记之前。例如：

```
<body>
    your html code
    <script>
         // your js code
    </script>
</body> 
```

或者使用 jQuery 文档准备功能。你必须只使用一次，而不是每次迭代。

谢谢

# ruby-on-rails - Rails：当 HTML 很好时，JSON 参数为零

> ID：13887405
> 
> 赞同：1
> 
> 时间：2012-12-14T22:57:33.600
> 
> 标签：ruby-on-rails, json, forms, controller, params

我刚刚开始使用 Rails。我有登录代码的控制器：

```
class SessionsController < ApplicationController
  def login_attempt
  authorized_user = User.authenticate(params[:username_or_email],params[:login_password])
 ... 
```

当我从 HTML 表单（POST /login_attempt）登录时，相同的服务器参数 [...] 返回正确的值。如果我从 XCode 以 JSON 格式发送来自 RestKit (POST /login_attempt.json) 的 POST 请求，它会为 params[..] 返回 nil。

问题：我需要做任何特殊的编码吗？想法是创建一个控制器，并在 Rails 视图和外部应用程序中以 RESTful l 方式使用它。

# .htaccess - 从 URL 中删除 SID 并将其重定向到具有 .htaccess 的目录

> ID：13887407
> 
> 赞同：0
> 
> 时间：2012-12-14T22:57:50.850
> 
> 标签：.htaccess, redirect

我想删除 ?sid=123456 （可以是任何数字）

重定向：[http ://www.mydomain.com/directory-a/directory-b/directory-c/?sid=123456](http://www.mydomain.com/directory-a/directory-b/directory-c/?sid=123456)

至：[http ://www.mydomain.com/directory-a/directory-b/directory-c/](http://www.mydomain.com/directory-a/directory-b/directory-c/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:07:41.583

根据你的问题：

> “重定向：[http](http://www.mydomain.com/directory-a/directory-b/directory-c/?sid=123456) ://www.mydomain.com/directory-a/directory-b/directory-c/?sid=123456 ”
> 
> “到：[http](http://www.mydomain.com/directory-a/directory-b/directory-c/) ://www.mydomain.com/directory-a/directory-b/directory-c/ ”

这是一种方法：

```
RewriteEngine On
RewriteBase /
RewriteCond %{QUERY_STRING} sid=\d+.*
RewriteRule .* %{REQUEST_URI}? [L,R=301] 
```

简而言之，该规则所做的是删除问题所要求的查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:56:23.147

尝试将这些规则添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^sid=[0-9]+&?(.*)$
RewriteRule ^(.*)$ /$1?%1 [L,R=301] 
```

# less - 为什么我的 LESS 变量必须相同

> ID：13887408
> 
> 赞同：0
> 
> 时间：2012-12-14T22:58:03.440
> 
> 标签：less

我有一个变量，我正在通过这个循环，它将用于动态命名类。没关系，这有可能产生大量的类，我想知道为什么如果我在函数调用或其他任何地方将“红色”变量更改为其他任何东西，基本上如果它们不完全相同，我会得到一个“ Object[object] 没有方法 toCSS。

注意：我在 mac 上使用 less 应用程序在保存时进行编译。

混合调用：

```
.createShades (10, "red", #ff3333); 
```

mixin 本身

```
// Generate our reds
.createShades (@index, @color, @base-color) when (@index > 0) {
    @i: @index;
    .createShade (@index, @i, @color, @base-color);
    .createShades (@index - 1, @color, @base-color);
}
.createShades (0, "red", @base-color) {}

.createShade (@index, @i, @color, @base-color) when (@i > 0) {
    @num: percentage((lightness(@base-color)/100) * (1 - (@i / @index)));
    @newShade: darken(@base-color, @num);
    (~".@{color}-@{i}-@{index}-text") {
        color: @newShade;
    }
    (~".@{color}-@{i}-@{index}-bg") {
        background-color: @newShade;
    }
    .createShade (@index, @i - 1, @color, @base-color);
}
.createShade (@index, 0, "red", @base-color) {} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:41:11.937

您需要将*结尾*mixin（当值达到 时使用`0`）更改为 have`@color`而不是`"red"`)。所以...

```
.createShades (0, @color, @base-color) {}
.createShade (@index, 0, @color, @base-color) {} 
```

这是因为它正在寻找“红色”的匹配项，因此当您将调用更改为另一种颜色时，它会引发错误，因为它与“红色”不匹配。

# java - 埃斯珀何时知道时间窗口已结束

> ID：13887410
> 
> 赞同：0
> 
> 时间：2012-12-14T22:58:16.547
> 
> 标签：java, esper

在 Java Esper 中，我想知道时间窗口上的计时器何时结束。换句话说，例如，在 EPL 语句中（取自 esper 主页）：

```
select avg(price) from org.myapp.event.OrderEvent.win:time(30 sec) 
```

该语句将用于计算 30 秒内传入事件的平均价格，我想知道是否可以找出语句何时结束。如果我可以说运行此语句并且每 30 秒输出一条语句，说明 30 秒摘要和整个 30 秒的输出，那就太好了。

我尝试使用 isStopped() 方法，但这似乎没有帮助，除非它有帮助并且我可能使用错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T09:49:24.147

要了解语句何时更改其状态，您可以将 StatementStateListener 附加到您的 Provider

```
epProvider = EPServiceProviderManager.getProvider("myCEPEngine", c);
epProvider.addStatementStateListener(new EPStatementStateListener() {
  //interface implementation
  @Override
  public void onStatementStateChange(EPServiceProvider serviceProvider, EPStatement statement) {
    //here use the EPStatement statement object to check if the statement is the one of your interest:
    //you can compare the name with the one assigned using @Name annotation to your statement
  }
}); 
```

但是，如果您只想每 30 秒提供一次输出（而不是在前 30 秒内的最新平均值发生变化时） - 使用 output 子句：

```
select avg(price) from org.myapp.event.OrderEvent.win:time(30 sec) output last every 30 seconds; 
```

# orchardcms - Orchard CMS 在同一台服务器上创建现有站点的副本

> ID：13887411
> 
> 赞同：1
> 
> 时间：2012-12-14T22:58:23.487
> 
> 标签：orchardcms

我有一个现有的 Orchard CMS 站点。

我只是想创建该站点的副本，并且执行了以下操作。

1.  将文件系统中的所有项目复制到新目录
2.  更改了 app_data\Sites\Default\Settings.txt 中的 Daatprefix 标签以反映新的表前缀
3.  创建了具有不同前缀 ecc 到 hcc 的重复数据库表
4.  将所有数据从初始数据库表复制到新的数据库表，包括标识列。
5.  更改了数据库表 hcc_Settings_SiteSettings2PartRecord 中的 baseUrl

在 IIS 中设置使用相同的应用程序池

尝试第二个网站 HttpException (0x80004005): Request timed out 时，我只是收到请求超时错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:45:26.637

删除 app_data 下的 cache.dat 和 sites/default/mappings.bin。

# c# - 如何等待 BackgroundWorker 完成？

> ID：13887420
> 
> 赞同：1
> 
> 时间：2012-12-14T22:59:22.130
> 
> 标签：c#, multithreading

我已阅读[如何等待 BackgroundWorker 取消的答案？](https://stackoverflow.com/questions/123661/how-to-wait-for-a-backgroundworker-to-cancel)，但我找不到解决我的具体问题的方法：

我的应用程序必须加载大量数据，但在大多数情况下，应用程序启动后不会立即需要这些数据。

为了最大限度地减少用户实际请求数据时的延迟，我使用 BackgroundWorker 加载它，它在应用程序启动时启动。希望当用户请求数据时，BackgroundWorker 已经完成。

但是，在某些情况下，它可能没有。在这些情况下，我想等待加载完成，然后再向用户显示任何内容。

我能想到的所有技术都有竞争条件：例如，如果我设置了一个`AutoResetEvent`，当用户请求数据时我不能使用`WaitOne()`，因为`AutoResetEvent`可能已经发出信号；如果我添加一个布尔`loading_complete`标志并在调用 WaitOne 之前检查它，`loading_complete`可能会在 ckecing 之后设置为 true，但在 WaitOne 调用之前，它永远不会返回......

任何想法？

**编辑**：感谢@500-InternalServerError 的解决方案；使用`ManualResetEvent`效果很好。感谢其他所有人的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:05:02.233

You put whatever should happen once the BackgroundWorker is done in the WorkCompleted event handler

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:24:47.023

使用由 锁定的简单互斥体`BackgroundWorker`，并让任何其他线程等待完成以获取和释放它。一旦`BackgroundWorker`完成，让它释放锁，所有其他线程应该能够继续他们的工作。

可能有一些特定的 C# 方法可以做到这一点（我认为[Monitor 类](http://msdn.microsoft.com/fr-fr/library/system.threading.monitor.aspx)可能很方便）。

更新：事实上，解决问题所需的对象是一种作为锁存器工作的条件变量，正如 OP 所提到的，`ManualResetEvent`它涵盖了该特定需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T03:56:52.073

后台工作者支持 RunWorkerCompleted 事件。此事件可用于确定加载是否完成。

有两个条件

*   工作人员完成后，用户已请求数据。

为了让事情变得不那么复杂，您可以添加一个布尔成员变量，当后台工作人员开始加载数据时，该变量将设置为 false。加载数据后，将触发 runworkercompleted 事件，该事件会将变量设置为 true，这将帮助您确定数据是否已加载。

*   用户在工作完成之前请求数据（可以从上述布尔变量确定）并等待数据加载。

当用户请求数据时，您可以设置一个标志/另一个布尔变量，例如

等待数据 = 真；

当 RunWorkerCompleted 事件被触发时，它将检查 WaitingForData 的状态，如果为真，它将显示数据。这样，您将无需等待线程完成。

使用此方法将帮助您避免任何竞争条件或线程间通信。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-14T23:34:51.750

使用布尔标志，在后台工作人员完成的事件处理程序中将其设置为 true。

当您需要检查数据是否已加载时，只需检查变量即可。

确保在尝试访问它之前将其锁定以避免竞争条件。

如果数据在被请求时尚未准备好，您可以在此时将另一个事件处理程序添加到后台工作人员完成事件，该事件执行需要对数据执行的操作。

# php - 为需要参数的类编写工厂

> ID：13887427
> 
> 赞同：0
> 
> 时间：2012-12-14T23:00:10.210
> 
> 标签：php, factory-pattern

我理解工厂模式的概念，这样你给它一些东西它会吐出相同模板的东西，所以如果我给一个工厂类苹果，我希望得到很多苹果，而不必每次都实例化一个新苹果。

如果那个苹果有种子的必需参数，或者种子、步骤和叶子的多个必需参数怎么办？你如何在这里使用工厂模式？

这就是我如何使用工厂模式来实例化它：

```
$apple = new Apple($seed, $stem, $leaf); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:52:31.720

执行此操作的方法如下所示并完整记录。这家工厂工作。

```
<?php
/**
 * This class is responsible for two core things:
 * 
 * One registering the dependencies and two creating
 * new instances of classes that you pass in as strings.
 * 
 * Your data structure needs to be a function that retruns and array
 * which is then used in the register_dependencies() function.
 * 
 * You would register the dependencies before you actually use this class
 * as you would a singleton.
 * 
 * The data structure is as such:
 * 
 * <code>
 * $array = array(
 *     // This is a class that takes no parameters.
 *     'class_name' => array(),
 * 
 *     // This is a class which takes in parameters.
 *     'class_name' => array(
 *         'params' => array(
 *             'params1',
 *             'params2'
 *             'optionalParams3'
 *         )
 *     ),
 * );
 * </code>
 *
 * You could then call the function, in this case foo() that returns this 
 * array as such:
 *
 * <code> 
 * AisisCore_Factory_Pattern::register_dependencies(foo());
 * </code>
 * 
 * Then else where you could do:
 * 
 * <code>
 * $object = AisisCore_Factory_Pattern::create('class_name');
 * $object->class_names_method();
 * </code>
 * 
 * And there ya go, you have created a class with its dependencies.
 * 
 * 
 * @author Adam Balan
 *
 */
class AisisCore_Factory_Pattern {

    /**
     * @var AisisCore_Factory_Pattern
     */
    protected static $_class_instance;

    /**
     * @var array
     */
    protected static $_dependencies;

    /**
     * Create a new instance of the class assuming one
     * does not already exist.
     */
    public static function get_instance(){
        if(self::$_class_instance == null){
            $_class_instance = new self();
        }

        return self::$_class_instance;
    }

    /**
     * Create a new instance of a class with its dependencies.
     * 
     * We expect there to be a class, we expect there to be dependcies
     * already in the protected class level variable _dependencies and we
     * expect that class to be in the array of depdencies.
     * 
     * If it is not we throw an error.
     * 
     * If the class has arguments we populate the classes params with the arguments.
     * and if not we create a new instance of it.
     * 
     * @param string $class
     * @throws AisisCore_Exceptions_Exception
     */
    public static function create($class){
        if(empty($class)){
            throw new AisisCore_Exceptions_Exception('Class cannot be empty.');
        }

        if(!isset(self::$_dependencies)){
            throw new AisisCore_Exceptions_Exception('There is no dependencies arraty created. 
                Please create one and register it.');   
        }

        if(!isset(self::$_dependencies[$class])){
            throw new AisisCore_Exceptions_Exception('This class does not exist in the dependecies array!');
        }

        if(isset(self::$_dependencies[$class]['params'])){
            $new_class =  new $class(implode(', ', self::$_dependencies[$class]['params']));
            return $new_class;
        }else{
            $new_class = new $class();
            return $new_class;
        }
    }

    /**
     * Register a new dependencie which is of type array.
     * 
     * @param array $array
     */
    public static function register_dependencies($array){
        self::$_dependencies = $array;
    }

} 
```

在这个类中，最关键的部分是 create 方法中的 if 语句：

```
if(isset(self::$_dependencies[$class]['params'])){
        $new_class =  new $class(implode(', ', self::$_dependencies[$class]['params']));
        return $new_class;
    }else{
        $new_class = new $class();
        return $new_class;
    } 
```

我们检查数组是否有任何参数，如果有的话，我们会用逗号将它们内爆并粘合在一起。

# javascript - 选择“只读”中的所有文本当它获得焦点时

> ID：13887430
> 
> 赞同：13
> 
> 时间：2012-12-14T23:00:52.927
> 
> 标签：javascript, html, html-input

我有一个文本框（设置为只读），我需要选择它的内容以便在获得焦点时轻松复制/粘贴。使用下面的代码似乎只能快速选择文本，然后由于某种原因取消选择它。

**HTML**

```
<input id='thing' type='text' value='some text' readonly='readonly' />​ 
```

**JavaScript**

```
document.getElementById('thing').onfocus = function(){
    this.select();
};​ 
```

**小提琴**：http: [//jsfiddle.net/cfqje/](http://jsfiddle.net/cfqje/)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-14T23:11:48.203

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-05T21:36:25.080

You can now use CSS. With `user-select: all;` all text will be selected when a clicking on an element.

# python - 如何获取 libicui18n.so.36 ？

> ID：13887432
> 
> 赞同：2
> 
> 时间：2012-12-14T23:00:59.603
> 
> 标签：python, ubuntu

我尝试安装 PyICU 但它需要 libicui18n.so.36
我不知道如何获得它请你帮我...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T18:02:41.070

如果您在 Ubuntu 上，请尝试安装该`python-pyicu`软件包，它应该处理任何二进制依赖项，而不是尝试从源安装：

```
$ sudo apt-get install python-pyicu 
```

或者，如果你真的需要从源包安装（例如 with `pip install pyicu`），你需要`libicu`安装开发包：

```
$ sudo apt-get install libicu-dev 
```

# regex - 提升正则表达式未知数量的var

> ID：13887433
> 
> 赞同：1
> 
> 时间：2012-12-14T23:01:01.600
> 
> 标签：regex, boost, boost-regex

我对正则表达式有疑问，需要一些帮助。我在 mein .txt 文件中有一些类似这样的表达式：

```
19 = NAND (1, 19) 
```

正则表达式： [http ://rubular.com/r/U8rO09bvTO](http://rubular.com/r/U8rO09bvTO)

使用这个正则表达式，我得到了数字的单独匹配。但现在我需要一个正则表达式，括号中的数字数量未知。

例如：

```
19 = NAND (1, 23, 13, 24) 
```

match1：19，match2：1，match3：23，match4：13，match5：24

我不知道数字的数量。所以我需要一个括号中最少 2 个数字的主要表达式，直到一个未知的数字。

顺便说一句，我正在使用 C++。@Martjin 你的第一个正则表达式效果很好，谢谢。这是我的代码：

```
 boost::cmatch result;
    boost::regex matchNand ("([0-9]*) = NAND\\((.*?)\\)");
    boost::regex matchNumb ("(\\d+)");
    string cstring = "19 = NAND (1, 23, 13, 24)";
    boost::regex_search(cstring.c_str(), result, matchNand);
    cout << "NAND: " << result[1] << "=" << result[2] << endl;
    string str = result[2];
    boost::regex_search(str.c_str(), result, matchNumb);
    cout << "NUM: " << result[1] << "," << result[2]<< "," << result[3] << "," << result[4] << endl; 
```

我的输出： NAND: 19=1, 23, 13, 24 NUM: 1,,,

所以我的新问题是我只找到第一个数字。结果也与此解决方案完全相反：[http ://rubular.com/r/nqXDSuBXjc](http://rubular.com/r/nqXDSuBXjc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:40:35.477

一个简单的（可能比一个正则表达式更清楚）是将其拆分为两个正则表达式。

首先运行一个正则表达式，将结果与参数分开： [http ://rubular.com/r/YkGdkkg4y3](http://rubular.com/r/YkGdkkg4y3)

```
([0-9]*) = NAND \((.*?)\) 
```

然后执行一个正则表达式来匹配你参数中的所有数字：[http ://rubular.com/r/2vpSbZvz12](http://rubular.com/r/2vpSbZvz12)

```
\d+ 
```

假设您使用的是 Ruby，您可以执行与函数多次匹配的正则表达式，`scan`如下所述：[http ://ruby-doc.org/core-1.9.3/String.html#method-i-scan](http://ruby-doc.org/core-1.9.3/String.html#method-i-scan)

当然，您可以将第二个正则表达式与该`scan`函数一起使用以从该行中获取所有数字，但我猜您将进一步扩展它，此时这种方法将更加结构化。

# python - flask+ftplib 基础应用

> ID：13887434
> 
> 赞同：0
> 
> 时间：2012-12-14T23:01:17.573
> 
> 标签：python, flask

```
app = Flask(__name__)
@app.route("/")
def hello():
    address="someserver"
    global FTP
    ftp = FTP(address)
    ftp.login()
    return ftp.retrlines("LIST")

if __name__ == "__main__":
    app.run() 
```

...这给了我以下输出：

```
226-Options: -l 226 1 matches total 
```

问题是 - 为什么这不打印 retrlines 的输出，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T03:10:27.337

该类的文档[`ftplib.FTP`](http://docs.python.org/2/library/ftplib.html#ftplib.FTP.retrlines)说，它`retrlines`需要一个可选的回调 - 如果没有提供回调“默认回调将行打印到`sys.stdout`.” 这意味着该方法`retrlines`实际上并不*返回*所提供的数据——它只是将接收到的每一行传递给可能传递给它的可调用对象。这为您提供了几个选择：

1.  传入一个可存储多次调用结果的可调用对象：

    ```
    def fetchlines(line=None):
        if line is not None:
            # As long as we are called with a line
            # store the line in the array we added to this function
            fetchlines.lines.append(line)
        else:
            # When we are called without a line
            # we are retrieving the lines
            # Truncate the array after copying it
            # so we can re-use this function
            lines = fetchlines.lines[:]
            fetchlines.lines = []
            return lines

    fetchlines.lines = []

    @app.route("/")
    def hello():
        ftp = FTP("someaddress")
        ftp.login()
        ftp.dir(fetchlines)
        lines = fetchlines()
        return "<br>".join(lines) 
    ```

2.  替换`sys.stdout`为类似文件的对象（[`cStringIO`](http://docs.python.org/2/library/stringio.html#module-cStringIO)例如），然后简单地读取文件：

    ```
    from cStringIO import StringIO
    from sys import stdout

    # Save a reference to stdout
    STANDARD_OUT = stdout

    @app.route("/")
    def hello():
        ftp = FTP("someaddress")
        ftp.login()

        # Change stdout to point to a file-like object rather than a terminal
        file_like = StringIO()
        stdout = file_like

        ftp.dir()

        # lines in this case will be a string, not a list
        lines = file_like.getvalue()

        stdout = STANDARD_OUT
        file_like.close()

        return lines 
    ```

在大量负载下，甚至在任何真正的并发下，这些技术都不能很好地支撑。有办法解决这个问题，但我将把它留到另一天。

# maven - Maven exec bash 脚本并将输出保存为属性

> ID：13887436
> 
> 赞同：5
> 
> 时间：2012-12-14T23:01:28.330
> 
> 标签：maven, maven-plugin

我想知道是否存在运行 bash 脚本并将其结果保存到属性中的 Maven 插件。

我的实际用例是获取 git 源版本。我在网上找到了一个可用的插件，但它看起来没有经过很好的测试，我突然想到，像这篇文章标题中的插件一样简单的插件就是我所需要的。插件看起来像：

```
<plugin>maven-run-script-plugin>
    <phase>process-resources</phase> <!-- not sure where most intelligent -->
    <configuration>
        <script>"git rev-parse HEAD"</script> <!-- must run from build directory -->
        <targetProperty>"properties.gitVersion"</targetProperty>
    </configuration>
</plugin> 
```

当然有必要确保在需要该属性之前发生这种情况，在我的情况下，我想使用这个属性来处理源文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T08:31:35.333

我认为您可以使用`gmaven`插件来完成此任务：

```
<plugin>
    <groupId>org.codehaus.gmaven</groupId>
    <artifactId>gmaven-plugin</artifactId>
    <version>1.4</version>
    <executions>
        <execution>
            <phase>initialize</phase>
            <goals>
                <goal>execute</goal>
            </goals>
            <configuration>
                <properties>
                    <script>git rev-parse HEAD</script>
                </properties>
                <source>
                    def command = project.properties.script
                    def process = command.execute()
                    process.waitFor()

                    project.properties.gitVersion = process.in.text
                </source>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

执行此脚本后，您应该能够引用`${gitVersion}`属性。

# regex - perl 用分组否定查看后面

> ID：13887438
> 
> 赞同：1
> 
> 时间：2012-12-14T23:01:54.673
> 
> 标签：regex, perl, grouping

我在尝试让某个匹配项与负面外观一起工作时遇到问题

例子

```
@list = qw( apple banana cherry); 
$comb_tlist = join ("|", @list);
$string1 = "include $(dir)/apple";
$string2 = "#include $(dir)/apple";

if( $string1 =~ /^(?<!#).*($comb_tlist)/)   #matching regex I tried, works kinda 
```

该数组包含一组与字符串匹配的变量。

我需要正则表达式来匹配 $string1，而不是 $string2。它匹配 $string1，但它也匹配 $string2。谁能告诉我我在这里尝试错了什么。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T23:16:29.030

问题是负后视*和*行首都`^`是零宽度匹配。所以当你说

> “从字符串的开头开始”

然后说

> “检查它前面的字符不是#”

...您实际上在字符串开始之前检查了字符。当然不是`#`，因为它什么都不是。

请改用前瞻。这有效：

```
use strict;
use warnings;

my @list = qw( apple banana cherry); 
my $comb_tlist = join ("|", @list);
my $string1 = 'include $(dir)/apple';
my $string2 = '#include $(dir)/apple';

if( $string1 =~ /^(?!#).*($comb_tlist)/)  { say "String1"; }
if( $string2 =~ /^(?!#).*($comb_tlist)/)  { say "String2"; } 
```

请注意，您在示例代码中犯了四个严重错误。首先，您使用`string1`which 是一个裸词，它将被解释为一个字符串。其次，您声明`@list`但随后使用`@tlist`. 第三，你不（似乎）使用

```
use strict;
use warnings; 
```

这些 pragma 可能会通知您您的错误，如果没有它们，您很可能不会收到关于前两个严重错误的警告。没有充分的理由不使用它们，所以在将来这样做。

四、申报

```
$string1 = "include $(dir)/apple"; 
```

意味着您尝试`$(`在字符串中插入变量。`$`是双引号字符串中的元字符，因此您应该使用单引号：

```
my $string1 = 'include $(dir)/apple'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T23:09:20.973

You don't need negative lookbehind, just match a first character that is not `#`:

```
use strict;
use warnings;

my @list = qw( apple banana cherry); 
my $comb_tlist = join ("|", @list);
my $string1 = "include dir/apple";
my $string2 = "#include dir/apple";

for ($string1, $string2) {
  print "match:$_\n" if( /^[^#].*($comb_tlist)/);
} 
```

Also, if you mean to match a literal `$(dir)`, then you need to escape the `$` sign with a backslash, otherwise it denotes a scalar variable. If this is the case, `"$(dir)"` should be `\$(dir)` in Perl code.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T23:11:48.590

一些问题：

*   始终使用`use strict; use warnings;`.
*   修正`string1`where you mean 的使用`$string1`。
*   `my`通过在适当的地方使用来修复上述检测到的范围错误。
*   修正变量名称 ( `@list`vs `@tlist`) 中的拼写错误。
*   我确定您并不是要对`$(`变量进行插值。
*   你永远不会`#`在字符串的第一个字符之前找到 a，所以`/^(?<!#).* .../`没有意义。它只是意味着`/^.* .../`。你可能想要`/^[^#].* .../`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T23:12:19.247

有时复杂的正则表达式变得微不足道，如果你只是将它们分成两三个。在第一步中过滤掉注释的字符串。

# javascript - jQuery代码不起作用不理解标记

> ID：13887441
> 
> 赞同：1
> 
> 时间：2012-12-14T23:02:07.840
> 
> 标签：javascript, jquery, animation, syntax, markup

我正在尝试使用 jQuery 制作一个简单的动画。我尝试在外部（外部文件）和内部（在脚本标签内）添加脚本。我已经测试了页面是否使用警报功能识别脚本，但脚本没有执行。我认为这与语法有关。

```
$("#container5").hover(function() {
        //hover in
        $(#container5).animate({
            height: "250",
            width: "250",
            left: "-=50",
            top: "-=50",
            }, "fast");
            }, function() {
            //hover out
            $(#container5).animate({
            height: "200",
            width: "200",
            left: "+=50",
            top: "+=50",
            }, "fast");
        }
    })(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:13:35.540

除了不在准备好的处理程序中之外，您的语法有点偏离：

1：您的#container 需要始终用引号括起来 例如：$('#container5') - 或者您可以在悬停动画上使用 $(this)，因为它位于同一个容器上

2：top 后面多了一个逗号：“+=50”——把它去掉。动画的最后一行或 {} 中的任何内容不能以逗号结尾。

3：把它放在一个就绪函数中。

这是更新的代码：

```
$(document).ready(function(){
    $("#container5").hover(
    function() {
        $(this).animate({height: "250", width: "250", left: "-=50", top: "-=50"}, "fast");
    }, 
    function() {
        $('#container5').animate({height: "200", width: "200", left: "+=50", top: "+=50"}, "fast");
    });
}); 
```

请注意：我使用了 $(this) 和 $('#container5')。在这种情况下，您可以互换使用这两者。 如果您想了解更多动态事件，请[阅读 $(this) 。](http://www.dynamicdrive.com/forums/showthread.php?42053-jQuery-%28this%29-usage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:06:38.550

You need to wrap your code in a ready function. The problem is your jQuery is running beofre the DOM is ready. This will work.

```
jQuery(document).ready(function($){
    $('#container5').animate({
       height: "250",
       width: "250",
       left: "-=50",
       top: "-=50"
    }, "fast");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T23:07:33.227

You need to wrap your code in a ready handler, plus you also need to wrap your strings with quotes.

You also seem to have a broken function set-up as Hellion has stated, you shouldn't be passing jQuery into a function at the point you are doing. Instead you need to be wrapping all your code in an annonymous function, with a `$` as a param, and pass jQuery into that. This is so as to protect against other libraries that may make use of a global `$` var.

Three things that will help you detect these problems in future.

*   be specific with your indenting. This will highlight problems much more easily.
*   Use a text editor with syntax/code highlighting - this will show you that your strings are wrong.
*   check your error console in which ever browser you use, this would have given you some hints as to the illegal syntax layout.

The following should fix your issues:

```
;(function($){
  $(function(){
    $('#container5').hover(
      function(){
        $('#container5').animate({
          height: "250",
          width: "250",
          left: "-=50",
          top: "-=50",
        },"fast");
      },
      function() {
        $('#container5').animate({
          height: "200",
          width: "200",
          left: "+=50",
          top: "+=50",
        },"fast");
      }
    );
  });
})(jQuery); 
```

# java - Jsf RichFaces 自动完成：获取自动完成方法的 InputValue（）

> ID：13887442
> 
> 赞同：1
> 
> 时间：2012-12-14T23:02:09.993
> 
> 标签：java, jsf, jakarta-ee, autocomplete, richfaces

我的 xhmtl 页面的一部分：

```
<rich:autocomplete autocompleteMethod="#{autocompletMit.searchbyName()}" mode="cachedAjax" 
                           fetchValue="#{controller.mitarbeiter.mitarbeiterName}" autocompleteList="#{autocompletMit.autocompleteList}" minChars="1" autofill="true" var="it" > 
    <h:outputText value="#{it.mitarbeiterName}" style="font-weight:bold"/>  
    </rich:autocomplete> 
```

用于我的自动完成的 Bean：

```
@ManagedBean(name = "autocompletMit")
@RequestScoped
public class AutoCompleteMitarbeiter implements Serializable {

    @EJB
    private Transaktionssteuerung transakt;
    private List<String> autocompleteList = new ArrayList<String>();
    String nameSearch;

    public List<String> searchbyName(Object o) {
        String test = (String) o;  
        List<Mitarbeiter> alleMitarbeiter = transakt.alleMitarbeiter();
        for (Iterator<Mitarbeiter> it = alleMitarbeiter.iterator(); it.hasNext();) {
            if (it.next().getMitarbeiterName().startsWith(test)) {
                autocompleteList.add(it.next().getMitarbeiterName());
            }
        }
            return autocompleteList;
     }
//getter & setter
  } 
```

我总是在我的 .xhtml 中得到“Unkown property searchbyName”，`autocompleteMethod="#{autocompletMit.searchbyName()}"`因为他排除了一个值......我必须在这里提交哪个值？！？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T13:07:37.903

```
autocompleteMethod="#{autocompletMit.searchbyName()}" 
```

当您有一个带参数的方法时，这是不正确的。删除那些括号。[RichFaces`<rich:autocomplete>`展示示例](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=autocomplete&skin=blueSky)也根本没有显示您应该调用无参数方法。

* * *

> *找不到方法：Controller.AutoCompleteMitarbeiter@7a88716.searchbyName (java.lang.String)*

这说明它期望一个`searchbyName`方法接受一个`String`参数。你的有一个`Object`论据。这不匹配。相应地修复它：

```
public List<String> searchbyName(String query) { 
```

# ios - 通过 UIScrollView 使用代码中的自动布局

> ID：13887445
> 
> 赞同：1
> 
> 时间：2012-12-14T23:02:39.947
> 
> 标签：ios, uiscrollview, autolayout

我正在尝试使用代码自动布局来正确处理我的 UIScrollView 中的旋转，该 UIScrollView 包含在运行时为 UIPageControl 的每个页面生成的许多 UILabel。

我还没有找到这么多的例子，所以我问是否有人有关于 UIScrollView 和 NSLayoutConstraints 自动布局的例子。

**编辑** 更清楚：我在运行时创建不同的 UILabel 并将它们添加到 UIScrollView。在纵向它是：

[![](../Images/8a78705020b17ad545c28b4f3e8a0855.png)](https://i.stack.imgur.com/vXkLB.png)
[（来源：[disclafani.org](http://www.disclafani.org/1a.png)）]

在风景中是错误的：（[来源：][[disclafani.org](http://www.disclafani.org/2a.png)][）]
[![](../Images/3e8016895520e5d37749a37660163ae3.png)](https://i.stack.imgur.com/g6ePR.png)

如何使用自动布局解决？我试过使用：

```
NSLayoutConstraint *cons1=[NSLayoutConstraint
constraintWithItem:label 
attribute:NSLayoutAttributeLeft          
relatedBy:NSLayoutRelationEqual 
toItem:label2 attribute:NSLayoutAttributeLeft 
multiplier:1.0 
constant:[UIScreen mainScreen].bounds.size.width*-1
                          ]; 
```

但它不起作用，我认为这不是正确的方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T23:07:33.110

实际上有两种完全不同的策略，Apple 在[本文](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)中对其进行了详细描述，我在这两个示例中进行了说明：

*   [https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/iOS6bookExamples/ch20p573scrollViewAutoLayout](https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/iOS6bookExamples/ch20p573scrollViewAutoLayout)

*   [https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/iOS6bookExamples/ch20p573scrollViewAutoLayout2](https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/iOS6bookExamples/ch20p573scrollViewAutoLayout2)

但是请记住，UILabel 是一个非常特殊的情况，因为它使用了固有的大小规则。如果不了解您案件的更多细节，很难说更多。

# git - git flow 发布选定的功能

> ID：13887454
> 
> 赞同：16
> 
> 时间：2012-12-14T23:03:22.770
> 
> 标签：git, agile, git-flow

我正在尝试向我的团队介绍 Git 流程。我们是一个相当小的团队，而且非常敏捷。我们希望每天发布一次，这意味着我们只有有限的时间来测试当天的所有更改。业务团队希望能够控制正在发布的功能，尽管这并不理想。

Git 流程似乎不能很好地适应这一点。从开发中删除发布分支后，将所选功能合并到主控的最佳方式是什么。樱桃采摘是唯一的选择吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-16T17:15:55.710

`git flow`如果业务团队想要控制下一个版本中包含哪些功能，则标准处理并不理想。但是其他分支机制也会有同样的问题。

默认结构`git flow`是您为每个新功能创建一个功能分支。一旦你完成了新特性的构建（和测试），你将分支合并回你的开发分支，然后删除特性分支。然后该功能将包含在下一个版本中。

如果一个特性不应该包含在下一个版本中，你不应该将特性分支合并回开发分支。这是确保它不会被包括在内的最佳方法。它还阻止其他开发人员创建使用（或以其他方式需要）新功能的代码。

我不推荐樱桃采摘。首先，一个功能可以（并且经常会）有多个提交，并且很容易忘记一个。其次，如果功能 B 使用了在功能 A 中添加的代码，并且管理层希望在不发布功能 A 的情况下发布功能 B，那么您很可能会发现功能 B 已损坏。而且这些依赖项并不总是很容易发现。

管理层希望优先考虑新功能是有道理的，但是每个功能都应该在完成（和测试）后尽快合并回开发分支。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:11:14.247

如果每个功能都有自己的分支，只需合并该功能分支。

# javascript - 淘汰 observableArray 未使用多个视图模型进行更新

> ID：13887455
> 
> 赞同：1
> 
> 时间：2012-12-14T23:03:29.463
> 
> 标签：javascript, knockout.js

我在一个主视图模型中包含多个视图模型。我正在尝试从视图模型 B 将一个项目插入到视图模型 A 的数组中。在我的日志中，我看到该项目被添加到数组中，但它没有更新 UI。

[http://jsfiddle.net/U7rXA/](http://jsfiddle.net/U7rXA/)

-----HTML

```
 <form data-bind="submit: RolesVM.addRole">
    <select name="app" data-bind="options:ApplicationsVM.applications,optionsText:'name', value: RolesVM.application"><option></option></select></td>
    <input data-bind='value: RolesVM.role, valueUpdate: "afterkeydown"'/> 
    <button>Add Role</button>
</form>

<ul data-bind="foreach: ApplicationsVM.applications">
    <span data-bind="text:name"></span>
    <ul data-bind="foreach: roles">
        <li data-bind="text:name"></li>
    </ul>
</ul> 
```

-----JS

```
 function MasterVM(applicationsVM, rolesVM) {
        this.ApplicationsVM = applicationsVM;
        this.RolesVM = rolesVM;
    }
    function ApplicationsVM() {
        var self = this;
        self.applications = ko.observableArray([]);

        self.Populate = function () {
            var allData = jQuery.parseJSON('[{ "name": "app 1", "roles": [{ "name": "role 1" }] }, { "name": "app 2", "roles": [{ "name": "role 1" }] }]');
            var mappedApplications = $.map(allData, function (item) {return new Application(item);});
            self.applications(mappedApplications);
        };
    }
    function RolesVM() {
        var self = this;
        self.application = ko.observable();
        self.role = ko.observable();

        self.addRole = function () {
            self.application().roles().push(self.role());
            console.log(self.application().roles());
        };
    }

    function Application(data) {
        this.name = data.name;
        this.roles = ko.observableArray($.map(data.roles, function(item) { return new Role(item.name); }));
    }

    function Role(data) {
        this.name = data;
    }

    var applicationsVM = new ApplicationsVM();
    applicationsVM.Populate();
    var rolesVM = new RolesVM();
    ko.applyBindings(new MasterVM(applicationsVM, rolesVM)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T23:26:29.993

您将希望`push`直接调用 observableArray 而不是底层数组。这就是通知任何订阅者它已更改的内容。所以，你会想做：

```
self.application().roles.push(self.role()); 
```

而不是：

```
self.application().roles().push(self.role()); 
```

# python - 用于从 wiki 模板标记中提取字段的正则表达式

> ID：13887458
> 
> 赞同：2
> 
> 时间：2012-12-14T23:03:39.740
> 
> 标签：python, regex, python-2.7, mediawiki, wikipedia

我想使用 Python 在特定字符串之后提取 MediaWiki 标记格式的内容。例如，[2012 年美国总统大选文章](http://en.wikipedia.org/w/index.phptitle=United_States_presidential_election,_2012&action=edit)，包含名为“nominee1”和“nominee2”的字段。玩具示例：

```
In [1]: markup = get_wikipedia_markup('United States presidential election, 2012')
In [2]: markup
Out[2]:
u"{{
| nominee1 = '''[[Barack Obama]]'''\n
| party1 = Democratic Party (United States)\n
| home_state1 = [[Illinois]]\n
| running_mate1 = '''[[Joe Biden]]'''\n
| nominee2 = [[Mitt Romney]]\n
| party2 = Republican Party (United States)\n
| home_state2 = [[Massachusetts]]\n
| running_mate2 = [[Paul Ryan]]\n
}}" 
```

以上面的选举文章为例，我想提取紧跟“nomineeN”字段但在调用下一个字段之前存在的信息（由点“|”划分）。因此，给定上面的例子，理想情况下我想提取“Barack Obama”和“Mitt Romney”——或者至少是它们嵌入的语法（'''[[Barack Obama]]''' and [ [米特·罗姆尼]]）。其他正则表达式已经[从 wikimarkup 中提取了链接](https://stackoverflow.com/questions/4929082/python-regular-expression-with-wiki-text)，但是我（失败的）尝试使用[积极的后向断言](http://docs.python.org/2/library/re.html)的方式有点像：

```
nominees = re.findall(r'(?<=\|nominee\d\=)\S+',markup) 
```

我的想法是它应该找到像 "|nominee1=" 和 "|nominee2=" 这样的字符串，在 "|"、"nominee"、"=" 之间可能有一些空格，然后返回它后面的内容，比如 "Barack Obama" 和 "米特·罗姆尼”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T03:22:52.257

使用[mwparserfromhell](http://packages.python.org/mwparserfromhell/)！它压缩了您的代码，并且对于捕获结果更加放心。对于此示例的用法：

```
import mwparserfromhell as mw
text = get_wikipedia_markup('United States presidential election, 2012')
code = mw.parse(text)
templates = code.filter_templates()
for template in templates:
    if template.name == 'Infobox election':
        nominee1 = template.get('nominee1').value
        nominee2 = template.get('nominee2').value
print nominee1
print nominee2 
```

捕获结果非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:20:37.453

Lookbehinds 在这里不是必需的——使用匹配组来准确指定应该从字符串中提取的内容要容易得多。（事实上​​，lookbehinds 在这里不能与 Python 的正则表达式引擎一起使用，因为可选的空格使表达式宽度可变。）

试试这个正则表达式：

```
\|\s*nominee\d+\s*=\s*(?:''')?\[\[([^]]+)\]\](?:''')? 
```

结果：

```
re.findall(r"\|\s*nominee\d+\s*=\s*(?:''')?\[\[([^]]+)\]\](?:''')?", markup)
# => ['Barack Obama', 'Mitt Romney'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T00:24:52.027

对于这样的信息框数据，最好使用 DBpedia。他们已经为您完成了所有提取工作:)

[http://wiki.dbpedia.org/Downloads38](http://wiki.dbpedia.org/Downloads38)

请参阅“本体信息框属性”文件。您不必是这里的本体专家。只需使用简单的 tsv 解析器即可找到您需要的信息！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T23:44:53.567

首先，您在`nominee\d`. 你可能想要`nominee\d\s*\=`. 此外，您*真的*不想用正则表达式解析标记。请尝试使用[此处](https://stackoverflow.com/questions/154592/python-module-for-wiki-markup)的建议之一。

如果您必须使用正则表达式，为什么不使用更易读的多行​​解决方案呢？

```
import re

markup_string = """{{
| nominee1 = '''[[Barack Obama]]'''
| party1 = Democratic Party (United States)
| home_state1 = [[Illinois]]
| running_mate1 = '''[[Joe Biden]]'''
| nominee2 = [[Mitt Romney]]
| party2 = Republican Party (United States)
| home_state2 = [[Massachusetts]]
| running_mate2 = [[Paul Ryan]]<br>
}}"""

for match in re.finditer(r'(nominee\d\s*\=)[^|]*', markup_string, re.S):
    end_nominee, end_line = match.end(1), match.end(0)
    print end_nominee, end_line
    print markup_string[end_nominee:end_line] 
```

# jquery - 为什么这个 jquery 绑定事件只工作一次？

> ID：13887462
> 
> 赞同：0
> 
> 时间：2012-12-14T23:04:02.543
> 
> 标签：jquery

我有一个简单的编辑表单，它允许我更改选择列表中显示的一组数据库记录的文本属性；但是，该功能只能工作一次。第一次编辑保存会成功更改一条记录；但第二次编辑完成时，更改不会保存。使用 bind() 将编辑和保存事件附加到按钮。（我对 jQuery 还很陌生，所以还不太了解它的微妙之处。）

似乎禁用按钮似乎解除了附加到按钮的功能；但我无法从 jQuery 文档中破译它。

这是jQuery代码：

```
 var is_new = 0;

  $(document).ready(function()
  {
    //refresh_studynames(); ...if we get this working, use?
    $('#editbtn').bind('click',pop_studyname);
    $('#newbtn').bind('click',new_studyname);
    $('#savebtn').bind('click',save_studyname);
    // disable the Save button until we have something to save
    $('#savebtn').attr('disabled',true);
    // disable the Cancel button until we have something to cancel
    $('#cancelbtn').attr('disabled',true);

  });

  function pop_studyname()
  {
    // pop the selected studyname into edit box.
    $('#edit_field').val($('#studylist :selected').text());
    // disable the New Study button
    $('#newbtn').attr('disabled',true);
    // enable the Cancel button
    $('#cancelbtn').attr('disabled',false);
    // and bind it to a function
    $('#cancelbtn').bind('click',cancel_studyname);    
    // enable the Save button
    $('#savebtn').attr('disabled',false);
    // and bind it to a function
    $('#savebtn').bind('click',save_studyname);

  }

  function new_studyname()
  {
    // clear edit box.
    $('#edit_field').val('');
    // set flag for New Study
    is_new = 1;
    // Enable the Cancel button
    $('#cancelbtn').attr('disabled',false);
    // And bind it to a function.
    $('#cancelbtn').bind('click',cancel_studyname);
    // Disable the Edit button.
    $('#editbtn').attr('disabled',true);
    // Enable the Save button
    $('#savebtn').attr('disabled',false);
    // And bind it to a function.
    $('#savebtn').bind('click',save_studyname);
    // put the cursor in the edit box
    $('#edit_field').focus();
  }

  function cancel_studyname()
  {
    // clear edit box.
    $('#edit_field').val('');
    // disable cancel button.
    $('#cancelbtn').attr('disabled',true);
    // disable Save button.
    $('#savebtn').attr('disabled',true);
    // Enable the Edit button.
    $('#editbtn').attr('disabled',false);
    // And the New Study button.
    $('#newbtn').attr('disabled',false);

  }

  function save_studyname()
  {

    // Are we saving a new or existing Study?
    if (is_new == 1) {
        $.ajax({
            type: 'POST',
            URL: "saveStudyName.php",
            data: {'type': 'new', 'studyname': $('#edit_field').val()},
            success: function(resultmsg) {
          console.log(resultmsg);
                 alert(resultmsg);
            },
            error: function() {
          console.log(resultmsg);
                 alert('We have a problem, Huston...');
            }
        });
    // reset the trigger flag
    is_new = 0;

    }
    else {
      // Update an existing Study.
        // Get the record index and edited study name.
        var styndx = $('#studylist option:selected').val();
        var studyname = $('#edit_field').val();

        //alert('option selected:'+$('#edit_field').val()+'option value:'+styndx);

        $.post("saveStudyName.php", {'type': 'update', 'studyname':studyname, 'styndx':styndx},
      function(resultmsg) {
        // clear the edit field
         $('#edit_field').val('');
        // disable the Save button
        $('#savebtn').attr('disabled',true);
        // notify user
        //alert(resultmsg);
      });      

    }
    // refresh the picklist
    refresh_studynames();
    // Enable the Edit button.
    $('#editbtn').attr('disabled',false);

  }

  function refresh_studynames()
  {
    // repopulate studylist with update from database...
    // - form the query.
    // - send to database, get the result.
    // - use the result to repopulate the Study name select list.
    $.ajax({                                      
      url: 'getStudyNames.php',        //the script to call to get data          
      data: "",                        //you can insert url argumnets here to pass to api.php
                                       //for example "id=5&parent=6"
      dataType: 'json',                //data format
      error: function() {
        alert('Refresh of study names failed.');
      },
      success: function(data)          //on recieve of reply
      {

    var $studylist = $('#studylist').empty();
    $.each(data, function(i, record) {
       $studylist.append($("<option/>", {
        value: record.studyindex,
        text: record.studyname
        }));
    }); 

      } 
    });
  } 
```

这是它引用的 HTML 代码：

```
<body >
<div id="container">
  <div id="header">
    <h1>Admin Module</h1>
  </div>
  <div id="navigation">
    <ul>
    <li><a href="AdminMenu.php">Admin Menu</a></li>
    <li><a href="../DNAPortal/DNA_Portal_Menu.php">DNA Portal</a></li>
    <li><a href='../DNAPortal/logout.php'>Logout</a></li>>
    </ul>
  </div>
  <div id="content">
    <h2>IBG Study Maintenance</h2>
    <p>
    <form name="StudySelection" action="process_StudyMaint.php" method="POST" onsubmit="return false" >
    <input type=hidden name=studyindex>
    <div id=content-container2>
      <fieldset>
      <LEGEND><b>Select Study &/or action</b></LEGEND>
    <p>
    <P CLASS=select_header>List of Studies<br>
    <SELECT multiple size=15 NAME="studylist" ID="studylist" STYLE="width: 150px">
    <?php
        $i=0;
        while ($i < $numstudies) {
            $styarr = pg_fetch_row($studyresult);
            echo "<option value=$styarr[0]>$styarr[1]\n";
            $i++;           
        }
      ?>
    </select>
    </p>                
      </fieldset>
    </div>
    <div  >

    </div>
    <div class="lower_block">
      Study name:<br>
      <input id="edit_field" type="text" size=30>
      <input type="button" name="editbtn" id="editbtn" value="Edit" sclass="btn">
      <input type="button" name="savebtn" id="savebtn" value="Save" sclass="btn">
      <input type="button" name="newbtn" id="newbtn" value="New Study" sclass="btn">
      <input type="button" name="cancelbtn" id="cancelbtn" value="Cancel" sclass="btn" disabled=TRUE >
    </div>
  </div>
</div>
</form> 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T00:30:08.970

正如@DavidStetler 注意到的，当您使用绑定更新元素时​​，事件绑定会丢失。使用`on`而不是`bind`很可能会解决您的问题。

绑定点击事件的示例：

```
$("#someId").on("click", function() { alert('someId is clicked') }); 
```

另一个问题是当您更新时`#someId`，绑定会丢失。解决方案是绑定包装器（未更新）：

```
$("#wrapperDiv").on("click", "#someId", function(){ alert('someId is clicked') }); 
```

# c# - 使用并行线程时，应用程序卡住

> ID：13887465
> 
> 赞同：3
> 
> 时间：2012-12-14T23:04:13.807
> 
> 标签：c#, parallel-processing

我正在改进需要同时处理数百万条记录的数据库同步应用程序。我将使用`SqlBulkCopy`操作，然后将`MERGE`在数据库上使用以将临时表与当前表合并。但在此之前，我会创建几个表，然后将它们添加到数据库中。当我使用常规循环时，它可以正常工作，但是当我创建`Parallel.ForEach`循环时，它会处理大约 100 条记录，然后就挂起。没有错误，没有什么......我认为它达到了某种阈值，但不知道如何处理它。当我选择 2 个并行线程时，它工作正常，但它被 > 2 个线程卡住而没有任何错误。

```
DataTable PRODUCT = new DataTable();

ParallelOptions parOptions = new ParallelOptions();
parOptions.MaxDegreeOfParallelism = 5; //use max (5) threads that are allowed.
Parallel.ForEach(dtPs.AsEnumerable(), parOptions, dtPs_row =>
{
   try
   { 
      //some declarations
      DataRow newProductRow = PRODUCT.NewRow();
      newProductRow.SetField("ID", mId);
      newProductRow.SetField("NAME", name);
      PRODUCT.Rows.Add(newProductRow);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:27:50.293

这是您的代码示例：

```
 DataTable PRODUCT = new DataTable();
    Object lockobj = new Object();

    ParallelOptions parOptions = new ParallelOptions();
    parOptions.MaxDegreeOfParallelism = 5; //use max (5) threads that are allowed.
    Parallel.ForEach(dtPs.AsEnumerable(), parOptions, dtPs_row =>
    {
        try
        { 
            //some declarations
            lock(lockobj)
            {
                DataRow newProductRow = PRODUCT.NewRow();
                newProductRow.SetField("ID", mId);
                newProductRow.SetField("NAME", name);
                PRODUCT.Rows.Add(newProductRow);
            }
        }
    } 
```

假设这`Object lockobj = new Object();`是在类级别的方法之外。

# javascript - 用于防止事件处理程序循环的公认设计模式

> ID：13887472
> 
> 赞同：1
> 
> 时间：2012-12-14T23:05:06.500
> 
> 标签：javascript, javascript-events, jquery

在使用 jQuery 时，我似乎一直遇到这个问题。当两个表单字段 A 和 B 具有修改另一个的更改事件处理程序（A 修改 B 和 B 修改 A）时，防止它们创建循环循环的公认设计模式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:08:47.790

如果您从每个处理程序显式触发合作伙伴元素的“更改”处理程序，只需在源元素上设置一个标志，如果看到该标志则中止处理程序。

```
function handler(ev) {
  if ($(this).data("handling-now")) return;

  $(this).data("handling-now", true);

  // do stuff

  $(this).data("handling-now", null);
} 
```

# export - Export HTML from InDesign or FrameMaker with tree index like Help and Manual

> ID：13887473
> 
> 赞同：0
> 
> 时间：2012-12-14T23:05:09.760
> 
> 标签：export, adobe-indesign, framemaker

I am looking into the ability of generating HTML exports from Adobe Indesign or Adobe FrameMaker that give me index navigation in a panel on the left and the content in the main panel. So I can easily navigate around the book by clicking the links in the index navigation.

The aim of which is to publish a book online that is currently published in hardcopy where the content is created in Indesign. I can do something like this in [Help and Manual][1] very easily.

I am new to these products and not sure if this is supported without a high level of complexity. Any advice appreciated :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:20:14.857

FrameMaker 比 InDesign 更容易做到这一点。通过 FrameMaker，您有多种选择：

*   使用 Tech Comm Suite（其中 FM 是一个组件）将 FrameMaker 文件链接到 RoboHelp，然后通过 RoboHelp 发布到 WebHelp 输出。

*   获取第三方转换器的副本，例如 MIF2GO 或 ePublisher Pro，并使用它们将 FM 转换为 WebHelp 输出。

理论上，您可以将 FrameMaker 内容转换为 HTML，然后处理该 HTML 以创建 WebHelp。在实践中，这种方法是不可用的，因为 HTML 输出是基本的。

从 InDesign 中，您可以导出到 EPUB，但如果您需要 WebHelp，您可能需要转到 HTML，然后通过帮助创作工具重新调整 HTML 的用途。

# dojo - Dojox 图表 Y 轴标签数量

> ID：13887485
> 
> 赞同：0
> 
> 时间：2012-12-14T23:06:41.727
> 
> 标签：dojo, dojox.charting

当我创建一个 DojoX 垂直条形图时，它会自动计算 Y 轴上的标签以覆盖最大值。在本例中，它创建了 3 个 Y 轴标签，100、200 300。

如何增加标签的数量，比如 50 个间隔而不是 100 个间隔？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:07:29.037

添加轴时，有多个选项可用于刻度线。例子：

```
chart.addAxis("y", { 
    majorTicks    : true, // default
    majorLabels   : true, // default 
    majorTick     : {length: 4, color: "#FFF"},
    majorTickStep : 10, 
    minorTicks    : true,
    minorLabels   : true,
    minorTick     : { length: 2, color: "#CCC"},
    minorTickStep : 5,
    ...
    vertical: true
 }); 
```

查看 API 文档了解更多信息： http: [//dojotoolkit.org/api/1.8/dojox/charting/axis2d/Default](http://dojotoolkit.org/api/1.8/dojox/charting/axis2d/Default)

# javascript - 使用 jQuery 访问 Cloudant 数据库

> ID：13887487
> 
> 赞同：0
> 
> 时间：2012-12-14T23:07:04.963
> 
> 标签：javascript, jquery, couchdb, cloudant

我正在尝试使用`jQuery`和连接到我在 Cloudant 上的 CouchDB`jQuery.couch.sj`

但是，我什至无法获得有关我的数据库的最基本信息。例如，以下代码不会向控制台打印任何内容。

**代码**

```
<script>
$.couch.urlPrefix ="https://acharya.cloudant.com";
$.couch.info({
success: function(data) {
    console.log(data);
}
});
</script> 
```

我[查看](http://daleharvey.github.com/jquery.couch.js-docs/symbols/%24.couch.db.html#.getDbProperty)了[在线](http://bradley-holt.com/2011/07/couchdb-jquery-plugin-reference/)[文档](http://examples.cloudant.com/simplegeo_places/_design/geo/index.html#complex)[，](http://java.dzone.com/news/couchdb-jquery-plugin) 但无济于事。

如果我输入

```
var db= $.couch.db("toxtweet");
console.debug(db); 
```

要查看有关我的 CouchDB 之一的信息，我得到：

```
Object { name="toxtweet",uri="https://acharya.cloudant.com/toxtweet/", compact=function(), 
more...} 
```

这是正确的 URI。那么，例如，我将如何获取“toxtweet”数据库中的文档数量？尝试示例不起作用。

**更新** 如果我在 Chrome 而不是 Firefox 中查看页面，我会看到以下错误。

```
XMLHttpRequest cannot load https://acharya.cloudant.com/. Origin http://tox.sinaiem.org is not  
allowed by Access-Control-Allow-Origin. 
```

我认为 Cloudant 是一个绕过同源策略的 CouchApp。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:26:37.003

我没有使用 jquery 来访问 Cloudant，但我希望您必须先登录某个地方，除非您以某种方式公开了您的数据库。

您是否在 Chrome 或 Firefox 中检查过 jquery.couch 发送和接收的 https 请求和响应？

要获取文档数量，您通常会使用这样的 reduce 方法查看视图：

```
// map
function(doc) {
 emit(doc.id, 1);
}

// reduce
function(keys, values, rereduce) {
  return sum(values);
} 
```

请参阅此处了解更多信息[什么是 SQL COUNT(*) 聚合函数的 CouchDB 等效项？](https://stackoverflow.com/questions/1586585/what-is-the-couchdb-equivalent-of-the-sql-count-aggregate-function)

在 jquery.couch 中执行等效请求之前，我建议您在尝试示例时使用 Futon

**更新**

您是否尝试过 JSONP 来解决跨域问题？见这里：http: [//support.cloudant.com/customer/portal/articles/359321-how-do-i-read-and-write-to-my-cloudant-database-from-the-browser-](http://support.cloudant.com/customer/portal/articles/359321-how-do-i-read-and-write-to-my-cloudant-database-from-the-browser-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:14:42.843

CouchApp 的/Cloudant 不会绕过同源策略。如果您在 Cloudant 上有 CouchApp，则可以在您的域下访问它（例如[https://acharya.cloudant.com/DB_NAME/_design/DESIGN/index.html](https://acharya.cloudant.com/DB_NAME/_design/DESIGN/index.html)），如果您希望在另一个域上使用它，则需要反向正如 AndyD 所建议的那样。

[CouchDB wiki 有两个很好的使用HTTPD](http://wiki.apache.org/couchdb/Apache_As_a_Reverse_Proxy)或[Nginx](http://wiki.apache.org/couchdb/Nginx_As_a_Reverse_Proxy)作为反向代理的贯穿，当针对托管在 Cloudant 中的数据库运行时，两者都应该适用。

高温高压

西蒙

# jquery - 我如何在 mvc 4 中将 AntiForgeryToken 与 JSON 帖子一起使用

> ID：13887489
> 
> 赞同：0
> 
> 时间：2012-12-14T23:07:10.900
> 
> 标签：jquery, asp.net-mvc, json, security, simplemembership

我有使用 JSON.stringify 将数据发布到控制器类的 jQuery 代码，但是当我使用 AntiForgeryToken 时，它不起作用.. 有更好的方法来保护 JSON 发布，否则我错过了一些东西....

其次，我是否需要额外的......即加密以保护 JSON 数据......

非常感谢您在高级...

```
<script type="text/javascript">

$(document).ready(function () {
    $('#id_login_submit').click(function () {

        var _authetication_Data = { _UserName: $('#u1').val(),  _Password: $('#p1').val() }

        $.ajax({
            type: "POST",
            url: "/Account/ProcessLoginRequest",
            data: JSON.stringify({ model: _authetication_Data }),
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            success: function (response) {
                alert(response);
            }

        });

    });
});

 </script> 
```

```
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

    @Html.LabelFor(m => m._UserName)
    @Html.TextBoxFor(m => m._UserName, new { id = "u1"})

    @Html.LabelFor(m => m._Password)
    @Html.PasswordFor(m => m._Password, new { id = "p1"})

    <input type="button" id="id_login_submit" value="Login" />
} 
```

```
 [HttpPost]
    [ValidateAntiForgeryToken]
    public JsonResult ProcessLoginRequest(LoginModel model)
    {
        string returnString = null;

      if (ModelState.IsValid && WebSecurity.Login(model._UserName, model._Password, persistCookie: true))
        {
            returnString = "user is authenticated";
        }

        else
        { returnString = "Message from loginProcess"; }

        return Json(returnString, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:22:33.653

问题是您的请求中没有包含 VerificationToken：

```
var _authetication_Data = { _UserName: $('#u1').val(),  _Password: $('#p1').val(), __RequestVerificationToken: $('[name=__RequestVerificationToken]').val(); } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T12:48:42.210

这就是我使用代码的方式

```
<script type="text/javascript">

$(document).ready(function (options) {
    $('#id_login_submit').click(function () {

        var token = $('input[name=__RequestVerificationToken]').val();

      //var token = $('input[name=__RequestVerificationToken]').val()+"999999";
     //   alert("token :: "+token);

        var _authetication_Data = { _UserName: $('#u1').val(), _Password: $('#p1').val(), "__RequestVerificationToken": token }

            $.ajax({
                type: "POST",
                url: "/Account/ProcessLoginRequest",
                data: JSON.stringify({ model: _authetication_Data }),
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                success: function (response) {
                    alert(response);
                }
            });

    });
}); 
```

# c++ - 未定义符号：符号引用错误。没有输出写入 main

> ID：13887490
> 
> 赞同：3
> 
> 时间：2012-12-14T23:07:12.667
> 
> 标签：c++, g++, undefined, symbols

有以下程序：

```
#include <iostream>
#include <string>

using namespace std;

class Record
{
public:
    static Record* GetInstance(string name);
void printName();
private:
Record(string name);
string name_;
static Record *record;
};

Record::Record(string name)
:name_(name)
{
}

Record*
Record::GetInstance(string name)
{
if(record == NULL) {
    record = new Record(name);
}
return record;
}

void
Record::printName()
{
cout << name_ << endl;
}

int main()
{
Record* record1 = Record::GetInstance("sellers");
record1->printName();
Record* record2 = Record::GetInstance("customers");
record2->printName();   
} 
```

我正在编译和链接：
g++ -g -c -Wall main.cpp
g++ -g -Wall main.o -o main

编译完成且没有错误（第一个命令）。但是链接给出了这个错误：

```
Undefined                       first referenced    
 symbol                             in file    
Record::record                      main.o    
ld: fatal: Symbol referencing errors. No output written to main    
collect2: ld returned 1 exit status 
```

想知道如何纠正这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:10:25.870

您需要在某处定义变量，即

```
Record *Record::record; 
```

# flash - Use Flex.SWC Symbols in a Customized ImageButtonSkin

> ID：13887491
> 
> 赞同：0
> 
> 时间：2012-12-14T23:07:13.823
> 
> 标签：flash, apache-flex, styles, symbols, skin

First, I have a skin `ImageButtonSkin.mxml`

```
<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        xmlns:mx="library://ns.adobe.com/flex/mx">
    <!-- host component -->
    <fx:Metadata>
        [HostComponent("spark.components.Button")]
    </fx:Metadata>

    <!-- states -->
    <s:states>
        <s:State name="disabled" />
        <s:State name="down" />
        <s:State name="over" />
        <s:State name="up" />
    </s:states>

<!-- what should I use here????? BitmapImage might not be working for symbols from SWC lib -->
    <s:BitmapImage id="theImage"
             source.up="{getStyle('imageSkinUp')}"
             source.over="{getStyle('imageSkinOver')}"
             source.down="{getStyle('imageSkinDown')}"
             source.disabled="{getStyle('imageSkinDisabled')}" />

    <!-- SkinParts
    name=iconDisplay, type=spark.primitives.BitmapImage, required=false
    name=labelDisplay, type=spark.core.IDisplayText, required=false
    -->
</s:Skin> 
```

Then I have a `ImageButton.as`:

```
package components
{
    import skins.ImageButtonSkin;

    import spark.components.Button;

    [Style(name="imageSkinUp", type="*")]
    [Style(name="imageSkinOver", type="*")]
    [Style(name="imageSkinDown", type="*")]
    [Style(name="imageSkinDisabled", type="*")]
    public class ImageButton extends Button
    {
        public function ImageButton()
        {
            super();
            setStyle("skinClass", ImageButtonSkin);
        }
    }
} 
```

and I also have a `icons.swc` file exported from Flash CS5, and added to the build path.

Finally, I have the following in my `TestProject.mxml`:

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" xmlns:components="components.*">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            [Bindable]
            private var playing:Boolean = false;
        ]]>
    </fx:Script>
    <s:Panel title="Test Project" width="400" height="300">
        <s:Button x="30" y="32" label="Button"
                  click="playing = !playing"
                  icon="{playing ? PLAY_ACTIVE : PLAY_ENABLED}" />

        <components:ImageButton x="19" y="96" label="ImageButton"
                                imageSkinUp="@Embed('assets/play.png')"
                                imageSkinOver="{PLAY_ACTIVE}"
                                imageSkinDown="{PLAY_ACTIVE}"
                                imageSkinDisabled="{PLAY_ACTIVE}" />
    </s:Panel>
</s:Application> 
```

The problem is when I mouse over the `ImageButton`, the `PLAY_ACTIVE` symbol cannot be loaded from the swc file, while the `Button.icon` can use `PLAY_ACTIVE`.

(NOTE: the styling is working if I used `@Embed('assets/play.png')` for the `imageSkinUp` state).

So I'm asking if we could use swc symbols for the ButtonSkin? and if so, which container should I use for the swc symbols in `ImageButtonSkin.mxml`, `s:BitmapImage` or something else?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:07:50.277

事实证明，我的代码实际上是有效的。我没有意识到这个`PLAY_ACTIVE`符号是白色的，所以我没有看到它。

唯一不工作的是如果符号超过1帧，那么ImageButton的最终结果只能显示第一帧，没有符号动画（Flash中的MovieClip）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:37:31.270

问题不是swc。覆盖公共函数 styleChanged 并调用 invalidateDisplayList() 并覆盖 updateDisplayList 并更新您的样式。有关如何完成的完整示例，请参阅此链接。

[http://blogger.com/98/styling-flex-custom-components](http://blogagic.com/98/styling-flex-custom-components)

# html - 多个 CSS 模态框

> ID：13887496
> 
> 赞同：6
> 
> 时间：2012-12-14T23:08:05.910
> 
> 标签：html, css, modal-dialog

所以我正在阅读以下文章：[使用 CSS3 创建模态窗口](http://www.webdesignerdepot.com/2012/10/creating-a-modal-window-with-html5-and-css3/)

但是，我想通过向我的网站添加多个模式框来修改它。

这是原始模式的代码：

```
<a href="#openModal">Open Modal</a>

<div id="openModal" class="modalDialog">
    <div>
        <a href="#close" title="Close" class="close">X</a>
    <h2>Modal Box</h2>
    <p>This is a sample modal box that can be created using the powers of CSS3.</p>
    <p>etc..etc..</p>
</div> 
```

没有 CSS 调用`<div id=openModal"` 要创建多个模式，我的假设是将 div 更改为`<div id=openModal2" class="modalDialog2">`

样式仅在模态对话框上，因此对于第二个模态，我假设我也会更改类名。

但是，每次我这样做时，它都不会打开模态框。

这是我的代码：

```
<a href="#openModal1">Box 1</a>

<div id="openModal1" class="modalDialog1">
<div>
    <a href="#close" title="Close" class="close">X</a>
    <h2>Modal Box 1</h2>
    <p>This is a sample modal box that can be created using the powers of CSS3\.    </p>
    <p>You could do a lot of things here like have a pop-up ad that shows when your website loads, or create a login/register form for users.</p>
</div>
</div>
<a href="#openModal2">Box 2</a>

  <div id="openModal2" class="modalDialog2">
<div>
    <a href="#close" title="Close" class="close">X</a>
    <h2>Modal Box 2</h2>
    <p><strong>Box 2</strong></p>
    <p>yadda yadda</p>
</div> 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T23:22:41.897

您不必更改课程。类的作用是将相同的样式应用于不同的元素，因此保留它就`modalDialog`可以了。

**演示：http:** [//jsfiddle.net/3Vykc/](http://jsfiddle.net/3Vykc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-03T03:09:21.373

大约一个小时前，我刚刚解决了这个问题，就在阅读本文之前。如上面的答案所示，我根本没有更改课程。我只是为第二个模态框创建了一个新 ID（带有一些新属性），它工作正常。

这就是说，我遇到了这篇文章，因为我遇到了溢出问题：仅在带有一些 iframe 的 Chrome 中滚动/自动（糟糕，但我别无选择，它来自我必须使用的第三方信用卡供应商在这个项目上）模态框的内容。现在，如果有人对此有解决方案... :)

# mysql - Export Excel data directly to web database

> ID：13887498
> 
> 赞同：-1
> 
> 时间：2012-12-14T23:08:26.330
> 
> 标签：mysql, web-services, excel, web-applications, cmd

> **Possible Duplicate:**
> [What is the easiest way to import an excel sheet into mysql](https://stackoverflow.com/questions/1026584/what-is-the-easiest-way-to-import-an-excel-sheet-into-mysql)

I would like to take an excel file and add the data contained in the file into a mysql database. This excel file is generated by lab software and the layout is customizable. However, I would like the data to be auto-transferred to the database without a user needing to log in or enter data manually. The lab software generates the excel sheet at the end of each sample analysis, and there is an option to run a command. I was transferring the data to a networked Access database, but now I am wanting this to be all web-based.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T03:31:08.410

您可以使用 LOAD DATA INFILE 将文件直接加载到 MySQL，但是您不能使用 excel 格式，但是如果您可以将该 excel 导出为 csv（大多数软件通常都支持，如果不可能，您可以使用在excel上另存为），那么它很容易使用。

LOAD DATA 命令的定义：

```
LOAD DATA [LOW_PRIORITY | CONCURRENT] [LOCAL] INFILE 'file_name.txt'
    [REPLACE | IGNORE]
    INTO TABLE tbl_name
    [FIELDS
        [TERMINATED BY 'string']
        [[OPTIONALLY] ENCLOSED BY 'char']
        [ESCAPED BY 'char' ]
    ]
    [LINES
        [STARTING BY 'string']
        [TERMINATED BY 'string']
    ]
    [IGNORE number LINES]
    [(col_name_or_user_var,...)]
    [SET col_name = expr,...)] 
```

LOAD DATA INFILE 用法示例加载由 分隔并由 " 括起来的 csv

```
LOAD DATA INFILE 'myfile.csv'
    INTO TABLE tbl_name
    FIELDS
    ENCLOSED BY '"'
    TERMINATED BY ','
    LINES
    TERMINATED BY '\r\n' 
```

更多信息在这里[http://dev.mysql.com/doc/refman/5.0/es/load-data.html](http://dev.mysql.com/doc/refman/5.0/es/load-data.html)

# java - 在其他项目中使用带有引用文件路径的 .jar

> ID：13887499
> 
> 赞同：0
> 
> 时间：2012-12-14T23:08:32.887
> 
> 标签：java, netbeans, jar, path, filepath

我有**2 个 Java 项目**，一个是**NetBeans中的****Web 项目**，另一个是Eclipse**中的****Java 项目**。

 ******只是要知道，来自**Eclipse的****Java 项目**被**NetBeans**中的**Web 项目**用作库**(.jar)**

 ******* * *

## 情况：

****1\. Eclipse**的**Java 项目**结构如下：**

 **![在此处输入图像描述](../Images/67dd153729850144895180c140fba377.png)

在 内部`src`，有一个在某些方法`class`中使用**file1**、**file2**等，使用如下全局变量：

```
public static final String PATH_ONE = "./files/file1.xml";
public static final String PATH_TWO = "./files/file2.xml";
... 
```

最后，当我在某个`main()`类中测试该方法时，一切正常。

* * *

**2\.** **NetBeans**的Web 项目`jar`参考了上述内容`library`，如果一切正常，那么 Web 项目将能够执行`method`使用全局变量的项目，而不会出现`library`项目问题。

* * *

## 问题：

当我运行 Web 项目并且我想从其中调用使用上述文件的`method`我时，出于某种原因，**NetBeans**或**项目***（我不确定）*查找路径并失败，因为路径不能被发现（似乎试图在网络项目中找到路径而不是在其中）。`library``xml` *****`Exception``library`*****

 *******我该如何解决这个问题？**这听起来很简单，但我不想改变我的结构，将它们作为资源加载或将文件从一个项目传输到另一个项目，并使用外部路径来完成这项工作，因为我只是在重现这种情况，但我正在处理很多事情具有不同文件夹和路径的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:53:01.397

如果你解压你的 jar，你会找不到你的**文件夹**文件，因为它不包含在你的类路径中。

您可以看到**.classpath**文件，但该文件夹不是。由于这些原因是 FileNotFoudnException。

您可以在 Eclipse ID 中添加源文件夹的方式：

1.**右键单击您的项目/构建路径/新源文件夹**

创建源文件夹。然后您可以添加一个名为 Folder 的新包。

您的项目：

*   源代码

*   资源

    *   文件夹

        资源1.xml

        资源2.xml

2.修改你的java项目。

公共静态最终字符串路径=“ **/文件夹/resource1.xml** ”；

现在，如果您尝试解压缩 jar，您可以看到该文件夹​​已添加到 .classpath 中。

这个对我有用。我试图粘贴图像，但我是新用户。*******************

# c++ - 我想在矩阵的一行中添加一个标量

> ID：13887501
> 
> 赞同：5
> 
> 时间：2012-12-14T23:08:52.587
> 
> 标签：c++, opencv

我创建了一个*m×n*矩阵[`Mat`](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#mat)，我想在该矩阵的一行中添加一个标量。为了给矩阵的所有元素添加一个标量，您可以使用以下语句：`A += b`, where `A`is a `Mat`object and `b`in a scalar. 但是，如果我只想在该矩阵的一行中添加一个标量，那么如何轻松地执行此操作呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T23:50:29.863

这很容易：

```
image.row(i) += Scalar(...); 
```

取自[文档](http://docs.opencv.org/modules/core/doc/basic_structures.html#Mat)：

> 有许多不同的方法可以创建一个 Mat 对象。下面列出了最受欢迎的选项：
> 
> ...
> 
> 为另一个数组的一部分构造一个标题。它可以是单行、单列、多行、多列、数组中的矩形区域（在代数中称为小区域）或对角线。此类操作也是 O(1)，因为新标头引用相同的数据。您实际上可以使用此功能修改数组的一部分
> 
> ...

# javascript - Google Chart 选择事件中未定义列索引

> ID：13887503
> 
> 赞同：1
> 
> 时间：2012-12-14T23:09:06.783
> 
> 标签：javascript, google-visualization

我正在使用 Google Charts 获得选择事件的未定义列索引。[这里](https://stackoverflow.com/questions/5991549/google-api-get-value-from-datatable)有类似的问题，[这里](https://stackoverflow.com/questions/10317216/how-to-get-column-index-for-google-data-chart-selection-handler)和[这里](https://stackoverflow.com/questions/9687776/google-visualization-chart-throw-alert-on-select-event-data)我看过，但没有解决我的问题。我的目标是能够确定用户何时单击“[x]”以从表中删除相应的行。谢谢你。

```
var data = new google.visualization.DataTable();
data.addColumn('string', 'Site');
data.addColumn('number', 'Logins');
data.addColumn('string', '');
data.addRows([['ABC', 123, '[ x ]']]);

function drawTable() {
    // Create and draw the visualization.
    visualization = new google.visualization.Table(document.getElementById('table_div'));
    visualization.draw(data, null);
    google.visualization.events.addListener(visualization, 'select', selectHandler);
}

function selectHandler() {
    var selectedItem = visualization.getSelection()[0];
    console.log(selectedItem); // output:  Object {row: 0} 

    if (selectedItem == undefined)
        return false;

    console.log(selectedItem.column); // output: undefined

    var value = data.getValue(selectedItem.row, selectedItem.column);
    console.log(value); // output: Uncaught Error: Invalid column index undefined. Should be an integer in the range [0-3].
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T16:42:35.270

看起来表格图表只返回带有选择事件的行，因为表格可视化是为选择行而设计的。我在[Google Visualization API Group找到了这个](https://groups.google.com/forum/#!searchin/google-visualization-api/datatable%2420column/google-visualization-api/3MrCJ6qnPsA/0LZ0LsURNG8J)

这是说明只能为表格图表选择行的[文档。](https://developers.google.com/chart/interactive/docs/gallery/table#Events)

# javascript - 在 AngularJS 中过滤对象映射而不是数组

> ID：13887504
> 
> 赞同：24
> 
> 时间：2012-12-14T23:09:10.817
> 
> 标签：javascript, angularjs

给定一个具有 $scope 属性的控制器，它是一个具有其他属性的对象，而不是像下面这样的数组，我应该如何过滤`ng-repeat`集合？

这是一个 JSFiddle：http: [//jsfiddle.net/ZfGx4/110/](http://jsfiddle.net/ZfGx4/110/)

控制器：

```
function HelloCntl($scope, $filter) {
    $scope.friends = {
        john: {
            name: 'John',
            phone: '555-1276'
        },
        mary: {
            name: 'Mary',
            phone: '800-BIG-MARY'
        },
        mike: {
            name: 'Mike',
            phone: '555-4321'
        },
        adam: {
            name: 'Adam',
            phone: '555-5678'
        },
        julie: {
            name: 'Julie',
            phone: '555-8765'
        }
    };
}​ 
```

模板：

```
<div ng:app>
 <div ng-controller="HelloCntl">
  <input placeholder="Type to filter" ng-model="query">     
  <ul>
   <li ng-repeat="(id, friend) in friends | filter:query">
    <span>{{friend.name}} @ {{friend.phone}}</span>
   </li>
  </ul>
 </div>
</div> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-15T04:17:38.467

我会将我的数据结构更改为数组。无论如何，这是过滤您的朋友对象的另一种实现。

```
angular.module('filters',['utils'])
  .filter('friendFilter', function(utils){

    return function(input, query){
      if(!query) return input;
      var result = [];

      angular.forEach(input, function(friend){
        if(utils.compareStr(friend.name, query) ||
           utils.compareStr(friend.phone, query))
          result.push(friend);          
      });
      return result;
    };
  }); 
```

这仅对对象进行一次迭代，通过 and 进行比较，`name`并且`phone`可以像这样调用。

```
<li ng-repeat="friend in friends | friendFilter:query"> 
```

我`compareStr`在另一个模块中定义了，但你真的不需要这样做。

```
angular.module('utils', [])
  .factory('utils', function(){
    return{
      compareStr: function(stra, strb){
        stra = ("" + stra).toLowerCase();
        strb = ("" + strb).toLowerCase();
        return stra.indexOf(strb) !== -1;
      }
    };
  }); 
```

不要忘记将`filters`模块注入您的应用程序

```
angular.module('app',['filters']) 
```

这是完整的示例：http: [//jsbin.com/acagag/5/edit](http://jsbin.com/acagag/5/edit)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-15T00:51:01.910

我想你不能直接用“过滤器”来做。查看 angular.js 中的代码，这些是 filter 函数的第一行：

```
function filterFilter() {
  return function(array, expression) {
    if (!(array instanceof Array)) return array; 
```

因此，如果它接收到与数组不同的东西，它什么也不做。

这是一种方法，不确定我是否会推荐它，但这是一个想法：

在控制器中，只需在将其传递给过滤器之前转换为数组：

```
$scope.filteredFriends = function() {
    var array = [];
    for(key in $scope.friends) {
        array.push($scope.friends[key]);
    }
    return $filter('filter')(array, $scope.query);
} 
```

和 ng 重复：

```
<li ng-repeat="friend in filteredFriends()"> 
```

示例：http: [//jsbin.com/acagag/2/edit](http://jsbin.com/acagag/2/edit)

也许更好的解决方案是编写自定义过滤器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-08T10:06:10.033

我遇到了同样的问题，并成功创建了自己的接受地图的过滤器，同时仍然使用内置过滤器进行实际匹配。

我的自定义过滤器遍历地图，并为每个元素调用内置过滤器，但鉴于该过滤器只接受一个数组，我将每个元素包装在一个长度为 1 的数组中（下面的 [数据]）。因此，如果输出数组的长度仍为 1，则匹配成功。

```
.filter('mapFilter', function($filter) {
  var filter = $filter('filter');

  return function(map, expression, comparator) {
    if (! expression) return map;

    var result = {};
    angular.forEach(map, function(data, index) {
      if (filter([data], expression, comparator).length)
        result[index] = data;          
    });

    return result;
  }
}) 
```

这种设置当然会降低效率，因为需要内置过滤器来确定它需要对地图中的每个元素执行什么操作，而不是只给它一个包含所有元素的数组，而不是只给它一次，但在我的情况下，使用地图在 500 个元素中，过滤仍然是瞬时的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-20T14:39:47.267

我举了一个关于如何不将对象更改为数组的示例。我认为这更正确地回答了这个问题。

我有同样的问题，我无法在对象中搜索。

[http://jsbin.com/acagag/223/edit](http://jsbin.com/acagag/223/edit)

```
angular.module('filters',['utils'])
  .filter('friendFilter', function(utils){

    return function(input, query){
      if(!query) return input;
      var result = {};

      angular.forEach(input, function(friendData, friend){
        if(utils.compareStr(friend, query) ||
           utils.compareStr(friendData.phone, query))
          result[friend] = friendData;          
      });
      return result;
    };
  }); 
```

所以只是返回一个对象而不是返回一个数组。

希望这对某人有帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-22T21:26:32.217

不是最佳解决方案，但如果您想要快速而肮脏的东西：

```
<li ng-repeat="(id, friend) in friends | filter:query" ng-hide="id !== query.id">
  <span>{{friend.name}} @ {{friend.phone}}</span>
</li> 
```

或者`ng-if`代替`ng-hide`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-06T09:30:35.153

除了使用过滤器，您还可以简单地：

```
$http.get('api/users').success(function(data){
    angular.forEach(data, function(value, key){
        users.push(value);
    });
    $scope.users = users;
}); 
```

并且在模板中

```
<input type="text" ng-model="query" placeholder="Search user"/>

<li ng-repeat="user in users | filter:query">
    {{ user.name }}
</li> 
```

# ios - Can I create widgets for Notification Center in iOS without jailbreak?

> ID：13887506
> 
> 赞同：1
> 
> 时间：2012-12-14T23:09:23.260
> 
> 标签：ios, nsnotificationcenter

I want to create a widget in NC with some toggles for airplane, wifi, bluetooth, etc. without jailbreak, is that possible?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T23:22:33.833

对不起，但不，你不能那样做。:)

# r - Using auto.arima on xts objects

> ID：13887507
> 
> 赞同：7
> 
> 时间：2012-12-14T23:09:29.710
> 
> 标签：r, xts

I'm trying to run `auto.arima` on some `xts` data, but am getting the following error:

```
library(quantmod)
library(forecast)

getSymbols('^GSPC',from='2000-01-01')
auto.arima(GSPC$GSPC.Close)

Error in dimnames(cd) <- list(as.character(index(x)), colnames(x)) : 
'dimnames' applied to non-array 
```

I found that if I

```
close <- as.ts(GSPC$GSPC.Close) 
```

then `auto.arima` does not return the error. But then I've lost the date information associated with the `xts` object. Is there a way to keep the data as `xts` and still run the function?

I noticed that e.g. `acf(GSPC$GPSC.Close)` and `pacf()` do not give errors.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T14:02:14.870

我建议您转换`GSPC$GSPC.Close`为`ts`, `vector`, 或`matrix`在 的参数列表中`auto.arima`：

```
auto.arima(as.ts(Cl(GSPC)))
auto.arima(coredata(Cl(GSPC)))  # Dirk's suggestion 
```

# asp.net-mvc - How to manually validate user in ASP.NET MVC Internet Application template

> ID：13887508
> 
> 赞同：1
> 
> 时间：2012-12-14T23:09:48.413
> 
> 标签：asp.net-mvc, entity-framework, asp.net-web-api

I'm new to web security so I don't want to implement my own. I plan to use SimpleMembership via the VS2012 template for an ASP.NET MVC Internet Application. The problem is that I need to pass the data via a Web API.

I plan to use basic authentication for my Web API, so I just need to pass username/pass in the http headers. I can intercept the message using Thinktecure.IdentityModel. Here's an [example](http://leastprivilege.com/2012/10/23/mixing-mvc-forms-authentication-and-web-api-basic-authentication/) that uses ASP.NET Membership:

```
authConfig.AddBasicAuthentication((userName, password) =>  
  Membership.ValidateUser(userName, password)); 
```

I can replace Membership.ValidateUser with my own bool function. I've successfully queried my custom database with username/password and everything worked fine. However, I'm using the template's user database because I DON'T want to store string (or even encoded) passwords.

I am unclear on how to manually validate the credentials using the SimpleMembership's database. I can grab a UserProfile, but can't figure out how to check the profile's password.

```
UserProfile user = context.UserProfiles.Find(1);

==OUTPUT==
user
    UserId: 1
    UserName: "bob" 
```

Do you know how I can check if an inputted password matches that of an existing user?

Thanks for your help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:12:15.493

为什么你不使用`Membership.ValidateUser`？这不仅限于 ASP.NET 成员资格，假设您在正确的位置拥有`[InitializeSimpleMembership]`( [here](http://blogs.msdn.com/b/rickandy/archive/2012/08/15/initializesimplemembership-attribute-and-simplemembership-exceptions.aspx) ) 属性或在其他地方自己执行了其中的逻辑，并且您对 WebMatrix 等有正确的引用，您仍然可以调用`Membership.ValidateUser`它并将使用[SimpleMemberships 验证用户](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.simplemembershipprovider.validateuser%28v=vs.111%29.aspx)。

如果您想自己访问数据库，并假设您使用的是散列密码等，那么[本文](http://www.mikesdotnetting.com/Article/200/The-SimpleMembershipProvider-Secure-Passwords-And-The-Crypto-Helper)可能会有所帮助，因为您需要在选择之前对输入的密码进行散列处理，剩下的只是写一些EF 或（任何其他数据库访问方法）从用户表中选择用户名和散列密码匹配的位置。但我认为没有明显的理由这样做，因为 Membership.ValidateUser 会为你做这一切。

# javascript - 另一个函数中的函数不起作用

> ID：13887510
> 
> 赞同：0
> 
> 时间：2012-12-14T23:10:00.800
> 
> 标签：javascript

所以我有这个代码：http: [//jsfiddle.net/7rGSb/1/](http://jsfiddle.net/7rGSb/1/)

```
var volumeDiv = document.getElementById("volumeNumber");
var volumeOld = 8;
var volumeNew = 37;
var timeNew = (1000 / (volumeNew - volumeOld));
changeVolume();

function changeVolume() {
    volumeDiv.innerHTML = volumeOld;
    volumeOld++;
    if (volumeOld <= volumeNew) setTimeout(changeVolume, timeNew);
};​ 
```

这是一个在 1 秒内从 8 变为 37 的字符串。它工作正常。

但是，当我尝试将其放入单击事件处理程序（[http://jsfiddle.net/wH2qF/1/](http://jsfiddle.net/wH2qF/1/)）时，它停止工作：

```
$(function() {
    $("#Volume").click(function() {

        setTimeout(triggerVolumeChange, 4000);

        function triggerVolumeChange() {

            var volumeDiv = document.getElementById("volumeNumber");
            var volumeOld = 8;
            var volumeNew = 37;
            var timeNew = (1000 / (volumeNew - volumeOld));
            changeVolume();

            function changeVolume() {
                volumeDiv.innerHTML = volumeOld;
                volumeOld++;
                if (volumeOld <= volumeNew) setTimeout(changeVolume, timeNew);
            };

        };

    });
});​ 
```

知道为什么吗？

是因为我`changeVolume();`在另一个函数内部调用吗？如果是这样，我怎样才能使该函数工作而不必调用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T23:12:57.293

您已`MooTools`选择，但看起来您正在使用 jQuery`.ready()`和 DOM 选择语法。

`jQuery`从左侧的菜单中选择一个选项。或者摆脱外部`$(function() {...});`并更新选择/处理程序代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:16:27.610

为什么在这种情况下不需要**嵌套函数..**

将函数声明移到外部

```
$(function() {
    $("#Volume").click(function() {
        setTimeout(triggerVolumeChange, 4000);
    });
});

var volumeDiv = document.getElementById("volumeNumber");
var volumeOld = 8;
var volumeNew = 37;
var timeNew ;

function triggerVolumeChange() {
    timeNew = (1000 / (volumeNew - volumeOld));
    changeVolume();
};

function changeVolume() {
    volumeDiv.innerHTML = volumeOld;
    volumeOld++;
    if (volumeOld <= volumeNew) 
        setTimeout(changeVolume, timeNew);
};​ 
```

还要确保框架设置为 jQuery ..

**[检查小提琴](http://jsfiddle.net/sushanth009/wH2qF/6/)**

# autohotkey - AutoHotKey 中的 Capslock + s + m

> ID：13887511
> 
> 赞同：0
> 
> 时间：2012-12-14T23:10:02.303
> 
> 标签：autohotkey

我的全部目标是能够按住`Capslock + s`，这会将按键转换`uiojklm,.`为像 10 键数字键盘一样工作。

所以作为第一步，我试图映射`Capslock + s + m`到数字`1`

```
SetCapslockState AlwaysOff

Capslock & s::
keywait, m, d, t0.6
If (!ErrorLevel) {
    SendInput {1}
} Return 
```

我将我当前的代码基于此处的答案：[Alt + Space + key in autohotkey](https://stackoverflow.com/questions/11986814/alt-space-key-in-autohotkey)

当我按下`Capslock + s + m`时，它会打印出来`m1`。如何停止`m`打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:51:41.323

这是一个替代解决方案。你必须有 AutoHotKey_L 才能工作，因为传统的 AutoHotKey 不支持#if。

```
CapsLock & s::
Flag:=!Flag
If (Flag)
    TrayTip, AutoHotKey, Numpad ON, 1
Else
    TrayTip, AutoHotKey, Numpad OFF, 1
Return

#If (Flag)
    m::Send, 0
    k::Send, 1
#If 
```

在第一个块中，您使用 CapsLock + s 将标志切换为 True/False，并使用托盘提示显示状态，然后在下一个块中定义某些键的行为。或者，您可以删除第一个块并将 #if (Flag) 行替换为：

```
#If (GetKeyState("CapsLock", "P") and GetKeyState("s", "P")) 
```

**更新：**

尝试了以下不同的结果。第一个（注释掉的）代码确实使用 CapsLock + s，但显然按下 s 键会阻止 AutoHotKey 看到某些其他按键（这里的字母 n、m、i、o、p 有效，但 j、k、l 处于打开状态未检测到键盘上相同的高度/扫描线）

```
SetCapsLockState, alwaysoff

/*
Capslock & s::
While, (GetKeyState("CapsLock", "P") and GetKeyState("s", "P"))
{
    Input, MyKey, I L1 T0.5
    TrayTip, Key:, %MyKey%
    if (MyKey = "m")
        Send, 1
    if (MyKey = "i")
        Send, 2
    if (MyKey = "k")
        Send, 3
    if (MyKey = "j")
        Send, 4
    if (MyKey = "o")
        Send, 5
    if (MyKey = "p")
        Send, 6
}
Return
*/ 
```

仅使用 CapsLock（也与 j,k,l 一样）有效，但这不是您想要的。

```
Capslock::
While, (GetKeyState("CapsLock", "P"))
{
    Input, MyKey, I L1 T0.5
    TrayTip, Key:, %MyKey%
    if (MyKey = "m")
        Send, 1
    if (MyKey = "i")
        Send, 2
    if (MyKey = "k")
        Send, 3
    if (MyKey = "j")
        Send, 4
    if (MyKey = "o")
        Send, 5
    if (MyKey = "p")
        Send, 6
}
Return 
```

# java - FreeMarker 获取 TemplateCache 中缓存模板的列表

> ID：13887514
> 
> 赞同：4
> 
> 时间：2012-12-14T23:10:18.770
> 
> 标签：java, freemarker

我正在尝试获取已经在其中的模板列表`TemplateCache`（这是私有的并且隐藏在配置后面）。

我正在尝试向模板编写一个小的管理 UI，并显示已经缓存的内容并`configuration.removeTemplateFromCache(String)`在特定模板上调用，而不是所有内容（`clearTemplateCache`会清除太多并导致太多文件 IO）。我的替代方法是在 Set 中保留一个并行的模板名称列表并将其用作键列表，但如果`FreeMarker`提供此列表以保持一致性会很好。

此外，隐藏配置背后的内容是有原因的`TemplateCache`（同时允许通过公共方法通过密钥删除，但不允许密钥列表）。似乎是一种反模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:08:00.213

这`TemplateCache`是一种实现细节（我猜它是公开的，因为 Java 不允许它仅对 FreeMarker 包可见）。更好的问题是为什么你不能`CacheStorage`从`Configuration`. 无论如何，就您的问题而言，甚至 FreeMarker 都不知道模板列表，因为该`CacheStorage`界面没有提供任何查询该模板的方法。但是，您可以将自己的`CacheStorage`实现插入到提供此类方法的 via`Configuration.setCacheStorage`中，并将对它的引用保留在 FreeMarker 之外的某个地方。是的，你不能只是从中获取它有点尴尬`Configuration`......但从好的方面来说，你可以监控你喜欢的缓存活动。

**更新：** FreeMarker 2.3.20 有`Configuration.getCacheStorage()`，所以它不再隐藏了。

# css - 引导 img 高度：自动属性覆盖显式高度

> ID：13887516
> 
> 赞同：1
> 
> 时间：2012-12-14T23:10:30.737
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

有一段时间，我避免在我的 ruby​​ 项目中升级我的 bootstrap-sass gem，因为一个单一的变化：

```
height: auto; 
```

在 img 元素内。

此属性似乎覆盖了显式高度属性。

所以我有一个宽度为 1，高度为 32 的图像，我使用它：

```
<img height="1" width="15" src="/assets/spc.png" alt=""> 
```

`height: auto;`似乎强制图像显示为 15 x 480 (32 x 15 = 480) 。

我试图通过在我的 HTML 的 HEAD 中添加内联样式来重新定义 img 元素（例如`img { }`），但这似乎没有帮助。

我不确定合适的解决方案是什么。我在我的网站周围使用空白图像在其他元素之间创建特定的空间。我可能可以用其他类型的元素来做到这一点，比如 div 或 span？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:24:32.277

如何使用`margin`？

例如，您可以：

```
.spacerdiv{

height:1px;
width:15px;
} 
```

在 html 中添加 div 并为它们定义此类。但这是非常糟糕的做法。向 DOM 添加冗余元素

甚至更好地定义`margin`

你可以做到面向对象并定义如下内容：

```
.margin_left_part_of_site{
margin: 5px 15px;
} 
```

然后，您可以将此类添加到必须具有这些属性的每个元素中。

一个 jsfiddle 示例将提供进一步的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:56:10.187

我想出的解决方案是使用 div。我现在使用 div，例如：

```
.login-spc {
  display: inline-block;
  height:40px;
  width:5px;
  vertical-align: middle;  
} 
```

# wxwidgets - wxTaskBarIcon 示例

> ID：13887517
> 
> 赞同：2
> 
> 时间：2012-12-14T23:10:39.957
> 
> 标签：wxwidgets

我已经在 Mac OS X、xubuntu 和 WinXP 上成功构建了 wxWidgets、2.9.4 和示例。在所有三个平台上运行任务栏示例，任务栏上有一个图标，但也有一个显示正在运行的应用程序的图标。这不是正常的任务栏应用程序行为，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:01:51.000

这是正常的任务栏行为。wxTaskBarIcon 将图标添加到系统托盘。在 Windows 上，任务栏中的应用程序图标由其他 API 控制。

看到[这个](https://stackoverflow.com/questions/1553923/how-to-hide-a-taskbar-entry-but-keep-the-window-form)和[这个](http://social.msdn.microsoft.com/Forums/en-IE/vcgeneral/thread/2d2ef9ad-487b-43d2-997b-e0c2540064d6)。

# jquery - JQuery：选择器只选择第一类

> ID：13887519
> 
> 赞同：2
> 
> 时间：2012-12-14T23:11:09.240
> 
> 标签：jquery

我正在尝试选择可以出现多次的类，但 JQuery 只选择第一个实例。

jQuery

```
$(function(){
$(".openNews").click(function() {
    alert("click");

    $(this).parent().find('.newsContent').toggleClass("newsContent-expand");
    $(this).parent().toggleClass("newsItem-expand");
});
}); 
```

HTML（可以有许多这样的 newsItem div，都包装在一个主容器中）

```
<div class="newsItem">
     <div class="openNews">G</div>
     <div class="newsHeadline">
          <span class="headline">The other thing</span>
          <span class="author">by: author</span>
          <span class="time">12/07/2012 @ 12:57 pm</span>
     </div>
     <div class="newsContent">
        sdf<br>
        sdf<br>
        sdf<br>
        sdfdsfsdfsdfsd<br>
        sdfsdf sdf                   
     </div>
</div> 
```

该警报仅用于故障排除。

单击“G”应该会触发转换，但这仅适用于第一个 newsItem。所有后续的 newsItem 在点击“G”时什么都不做，除非它上面的项目已经过渡。

如果我注意点击新闻标题，我可以让它正常工作，但这会导致点击新闻标题会导致其上方的标题转换的问题，或者你必须四处寻找可点击的部分（不会例如，点击标题文本）。

我觉得我错过了一些简单的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:17:04.040

为了选择一个类的每个实例，不要使用 find，保持简单：

```
$('.newsContent').[do something here, toggle, etc] 
```

# emacs - Emacs 连接到系统总线，但不连接到会话一

> ID：13887525
> 
> 赞同：21
> 
> 时间：2012-12-14T23:11:53.747
> 
> 标签：emacs, dbus

系统总线工作正常

```
(dbus-init-bus :system) 
```

返回 nil，因为它应该。

但是，连接到会话总线

```
(dbus-init-bus :session) 
```

提高

```
(dbus-error "No connection to bus" :session) 
```

`qdbus`在命令行中，两条总线都可以正常工作。如果有任何问题，它甚至可以在 eshell 内工作。

既不`emacs`也不`emacs --daemon`连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:14:51.390

您使用的是哪个版本的 Emacs？[一个版本](https://github.com/tovbinm/emacs-24-mac/blob/master/src/dbusbind.c#L790)（在[2012-05-25](http://git.savannah.gnu.org/cgit/emacs.git/commit/src/dbusbind.c?id=3529b1c7ecb6ba430902aca1bb6337cfb263916f)之前）只查找`DBUS_SESSION_BUS_ADDRESS`环境变量，而[最近的一个](http://git.savannah.gnu.org/cgit/emacs.git/tree/src/dbusbind.c?id=8b77f61c706e94a1c30ebd697eece6343ff55116#n1092)`~/.dbus/session-bus`版本使用了我认为也可以查找的库函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-02T11:07:44.070

你在运行 emacs 之前尝试过这个： `eval $(dbus-launch) export DBUS_SESSION_BUS_ADDRESS`

# intellij-idea - IntelliJ：禁止 HTML 属性的引号插入

> ID：13887527
> 
> 赞同：9
> 
> 时间：2012-12-14T23:12:07.953
> 
> 标签：intellij-idea

在 IntelliJ IDEA 11 或 12 中，打开 HTML 文件，键入

```
<img src= 
```

导致自动插入双引号，导致

```
<img src="" 
```

因为我在我阅读的地方之前打字，这通常意味着我最终会得到类似的东西

```
<img src=""image.png" alt="Image"/>" 
```

**如何防止在属性名称后自动插入双引号？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-03-24T11:15:44.073

在 Intellij IDEA 14 和 15 中（参见@Zook 对 IDEA 13 的评论），该选项现在是

视窗：

> 菜单文件→设置→编辑器→常规→智能键→在键入“=”和属性完成时为属性值添加引号（在“设置”对话框右侧的 XML/HTML 部分下）

苹果电脑：

> 首选项→编辑器→常规→智能键→在键入“=”时为属性值添加引号

我不知道以前的版本是否相同，但在 IDEA 14 中实际发生的是它会自动插入两个引号并将光标放在其中。很好，但是当您键入*您期望*的开头双引号时，智能标点符号机制会认为您正在*关闭*引号并跳过自动插入的右引号（与例如 java 代码中的相同）当您键入右括号时，它已经自动插入了一个）。因此，您在这对引号之后用光标结束，输入您的属性值。这似乎与最初的观察一致。

我实际上会认为这是 IDEA 中的一个错误，但我猜在这种情况下，开始和结束标点符号是相同的符号这一事实使事情变得复杂。智能标点机制需要知道忽略您输入的*第一个*引号，但如果您确实想输入一个空属性值，例如`src=""`，它需要忽略第一个引号，然后跳过第二个引号的关闭引号。繁琐，但并非不可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:30:38.780

我已经使用 IDEA 12 进行了尝试，并且只有在您开始完成`src`属性并按下`Enter`或键入`=`以确认完成后才会插入双引号。它不会自动发生，您调用插入引号的完成。

没有选项可以控制它，因此您将不得不打破手动插入引号并改用引号的习惯`Enter`。

* * *

也可以使用模板完成：

`img``Tab``<img src="" alt="">`使用第一对引号内的插入符号生成。然后只需输入图像文件名`Tab`，输入替代文本。

您始终可以[提交功能请求](http://youtrack.jetbrains.net/issues/WEB)以禁用在属性完成时添加引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-29T06:35:17.850

只需将输入语言从“美国 - 国际”更改为“美国”。切换到“美国”解决了这个问题。

读取 IntelliJ[线程](https://intellij-support.jetbrains.com/hc/en-us/community/posts/360000604050-Insert-pair-quote-not-working-properly-on-Mac-IDEA-Ultimate-2018-1-)

# java - 修改通用图像加载器

> ID：13887534
> 
> 赞同：0
> 
> 时间：2012-12-14T23:12:50.020
> 
> 标签：java, android, universal-image-loader

我正在使用这个项目[universal-image-loader](https://github.com/nostra13/Android-Universal-Image-Loader)来在gridview中显示几个图像。但我想用一些 html 来修改这些图片（例如在每张图片的底部添加广告）。

我看到图像是通过在 ImageAdapter 的 getView 方法中调用 imageLoader.displayImage(..) 来显示的。

我不知道哪种方法更好：

*   在 displayImage(...) 中添加一个步骤，以便使用我的图像和 html 创建一个 webview 并将这个 webview 转换为位图？

*   修改 ImageAdapter 的 getView，它将创建 webview 并在 displayeImage() 中添加参数 webview？

*   ...

*   ...

我想我别无选择，我必须使用 webview。

此外，在 ImageLoader.java 的 displayImage() 方法中，我不明白图像的加载位置，我想这是在这一行的某个地方，但是当我查看这些方法时，我找不到/理解

```
 ImageSize targetSize = getImageSizeScaleTo(imageView);
    String memoryCacheKey = MemoryCacheUtil.generateKey(uri, targetSize);
    cacheKeysForImageViews.put(imageView.hashCode(), memoryCacheKey);
    Bitmap bmp = configuration.memoryCache.get(memoryCacheKey); 
```

（如何从 uri 和 ImageSize 构建的字符串中获得位图？图像在哪里？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T18:06:27.740

图像是异步加载的。所以你的代码片段只是复杂逻辑的顶部。主要工作是在`LoadAndDisplayTask`课堂上完成的，但你不需要碰它。

对于您的情况，您可以创建自己的`BitmapDisplayer`：

*   创建 BitmapDisplayer 实现
*   实现`Bitmap display(Bitmap bitmap, ImageView imageView)`方法
*   在这种方法中，您可以根据需要处理传入的位图
*   在 ImageView 中设置结果位图并返回结果

将您的 BitmapDisplayer 设置为配置。

# c# - 带按钮的增量表

> ID：13887536
> 
> 赞同：-1
> 
> 时间：2012-12-14T23:12:58.837
> 
> 标签：c#, asp.net, auto-increment

我有表格和按钮，我想通过单击按钮来增加该表格，我该如何实现？

我的表与此类似

`<table> <tr> <td colspan="2"> Information </td></tr> <tr> <td> city </td> <td> <asp:TextBox ID="tCity" runat="server"> </asp:TextBox> </td></tr> <tr> <td> state </td> <td> <asp:TextBox ID="tState" runat="server"> </asp:TextBox> </td></tr> <tr> <td> zip </td> <td> <asp:TextBox ID="tZip" runat="server"> </asp:TextBox> </td></tr></table> <asp:LinkButton ID="AddNew" runat="server" />`

例子

```
 Information
          City       ---------
          State      ---------
          Zip        ---------
                  Add New Button 
```

点击按钮后我想要

```
 Information
          City       ---------
          State      ---------
          Zip        ---------
                Information
          City       ----------
          State      ---------
          Zip        ---------
                 Add New Button 
```

我尝试使用 Gridview 但我不知道逻辑，我也在谷歌上搜索但没有找到任何东西。+

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:24:20.943

你想做的事情在理论上听起来很容易，但在实践中并不那么容易。您必须在按钮单击事件中动态创建控件，将它们添加到页面中，然后在 OnInit 中重新创建它们以获取绑定到它们的视图状态。

您应该阅读 ASP.NET 中的动态控件：http: [//aspnet.4guysfromrolla.com/articles/092904-1.aspx](http://aspnet.4guysfromrolla.com/articles/092904-1.aspx)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:28:41.267

使这有点棘手的是您正在混合客户端控件（ie `table`）和服务器端控件（`asp:textbox`）。如果您要制作该表`runat="server"`，则可以向您的按钮添加一个单击处理程序，并在代码隐藏中以编程方式添加 new `TableRow`s 和`TableCell`s 以及您想要的任何内容。

# python - Python TypeError 不支持的操作数类型

> ID：13887537
> 
> 赞同：-1
> 
> 时间：2012-12-14T23:13:00.400
> 
> 标签：python, typeerror

在 Python 中，

`logging.info('Followers: %d ', sum([a[1] for a in total]))`, 其中`sum`是一个整数并且`total`是`list comprehension`整数。我明白了，

`TypeError: unsupported operand type(s) for +: 'int' and 'str'`?? 不确定，为什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:16:30.110

`a[1]`从列表返回的 Error 意味着`total`既是`string`也是`integers`。

例如。

```
In [9]: lis=[1,'foo',3]

In [10]: sum(lis)

TypeError: unsupported operand type(s) for +: 'int' and 'str' 
```

因为`[(123243, 3), (24532, 5)]`您的代码工作正常：

```
In [17]: lis=[(123243, 3), (24532, 5)]

In [18]: 'Followers: %d '%sum([a[1] for a in lis])
Out[18]: 'Followers: 8 ' 
```

# c# - 如何使用 DotNetZip 从 zip 中提取 XML 文件

> ID：13887538
> 
> 赞同：6
> 
> 时间：2012-12-14T23:13:05.367
> 
> 标签：c#, xml, zip, dotnetzip

我正在使用最新版本的 DotNetZip，并且我有一个包含 5 个 XML 的 zip 文件。
我想打开 zip，读取 XML 文件并使用 XML 的值设置一个字符串。
我怎样才能做到这一点？

代码：

```
//thats my old way of doing it.But I needed the path, now I want to read from the memory
string xfile = System.IO.File.ReadAllText(strNewFilePath, System.Text.Encoding.Default);

using (ZipFile zip = ZipFile.Read(this.uplZip.PostedFile.InputStream))
{
    foreach (ZipEntry theEntry in zip)
    {
        //What should I use here, Extract ?
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-14T23:26:29.140

`ZipEntry`具有`Extract()`提取到流的重载。[(1)](http://dotnetzip.herobo.com/DNZHelp/html/8e64cfe0-5dfc-2682-2c10-cb840ed3bfa1.htm)

[混入如何从 MemoryStream 中获取字符串的](https://stackoverflow.com/questions/78181/how-do-you-get-a-string-from-a-memorystream)答案？，你会得到这样的东西（完全未经测试）：

```
string xfile = System.IO.File.ReadAllText(strNewFilePath, System.Text.Encoding.Default);
List<string> xmlContents;

using (ZipFile zip = ZipFile.Read(this.uplZip.PostedFile.InputStream))
{
    foreach (ZipEntry theEntry in zip)
    {
        using (var ms = new MemoryStream())
        {
            theEntry.Extract(ms);

            // The StreamReader will read from the current 
            // position of the MemoryStream which is currently 
            // set at the end of the string we just wrote to it. 
            // We need to set the position to 0 in order to read 
            // from the beginning.
            ms.Position = 0;
            var sr = new StreamReader(ms);
            var myStr = sr.ReadToEnd();
            xmlContents.Add(myStr);
        }
    }
} 
```

# sql-server - 使用 ROW_NUMBER 增加 100？

> ID：13887542
> 
> 赞同：3
> 
> 时间：2012-12-14T23:13:17.290
> 
> 标签：sql-server, tsql

我有一个现有表，其中行序号在正常软件操作中增加 100。我需要执行大插入并保持这种增量方法。我以为我会使用 ROW_NUMBER() 但我不知道它是否可以以这种方式增加。

我会感谢您对这个简单主题的帮助，但是，如果您想获得更具体的信息，还请注意，行序列对于项目来说是唯一的，并且一些记录已经开始了该序列。例如

```
Project  Category  Sequence
Proj1    Cat4      100
Proj1    Cat2      200
Proj2    Cat7      100
Proj2    Cat1      200
Proj3    Cat1      100 
```

因此，如果这些已经存在并且我正在插入新记录，我必须考虑每个项目已经开始的序列。因此，如果我为 Proj1 插入行，则序列值必须为 300、400、...

到目前为止，这是我的代码块：

```
WITH CTE (PROJECTNUM, COSTCATID, LINE) AS
(  SELECT PROJECTNUM, PACOSTCATID, ROW_NUMBER() OVER(PARTITION BY PROJECTNUM ORDER BY PACOSTCATID) 
      + (SELECT MAX(LNITMSEQ) FROM PROJECTTABLE WHERE PAPROJNUMBER = A.PROJECTNUM)
   FROM PROJECTSHORTLIST A, CATEGORYTABLE
   WHERE <stuff you don't care about>
)
INSERT INTO PROJECTTABLE
(PAPROJNUMBER, PACOSTCATID, LNITMSEQ)
SELECT PROJECTNUM, COSTCATID, LINE
FROM CTE; 
```

您可以看到这将产生以 1 递增的记录，而 Proj1 将是 301、302。

非常感谢您的脑力。

更新：我将补充一点，如果在第一次插入行之后可以更容易地在更新语句中完成 100 的增量，那是完全可以接受的。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:47:31.320

我正在回答我自己的问题，因为在提出问题 5 分钟后，我想到了一个解决方案。我将“SELECT MAX()”部分的使用移至 INSERT 语句，保留行号完整以供以后使用（我需要它用于其他列）。因此，在 INSERT 的 SELECT 部分中，我只需将 ROW * 100 添加到我的 MAX 序列号。

```
WITH CTE (PROJECTNUM, COSTCATID, ROW) AS
(  SELECT PROJECTNUM, PACOSTCATID, ROW_NUMBER() OVER(PARTITION BY PROJECTNUM ORDER BY PACOSTCATID) 
   FROM PROJECTSHORTLIST A, CATEGORYTABLE
   WHERE <stuff you don't care about>
)
INSERT INTO PROJECTTABLE
(PAPROJNUMBER, PACOSTCATID, LNITMSEQ)
SELECT PROJECTNUM, COSTCATID, (ROW * 100) + (SELECT MAX(LNITMSEQ) FROM PROJECTTABLE WHERE PAPROJNUMBER = A.PROJECTNUM)
FROM CTE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:56:42.333

如果我正确理解您的需求，我相信这将是最简单的一般模式：

```
SELECT
    ID, RowNumber, ((RowNumber + 99) / 100) * 100
FROM
    (
    SELECT
        ID, ROW_NUMBER() OVER (ORDER BY ID) AS RowNumber
    FROM
        Tbl
    ) AS X 
```

# python - re.search() 和 re.findall() 之间的区别

> ID：13887546
> 
> 赞同：5
> 
> 时间：2012-12-14T23:13:52.970
> 
> 标签：python, regex

下面的代码很奇怪：

```
 >>> words = "4324324 blahblah"
 >>> print re.findall(r'(\s)\w+', words)
 [' ']
 >>> print re.search(r'(\s)\w+', words).group()
 blahblah 
```

`()`操作员似乎对 findall 表现不佳。为什么是这样？我需要一个 csv 文件。

为清楚起见进行编辑：我想`blahblah`使用 findall 显示。

我发现它`re.findall(r'\s(\w+)', words)`可以满足我的要求，但不知道为什么 findall 会以这种方式对待组。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T23:16:32.370

一个字符：

```
>>> print re.search(r'(\s)\w+', words).groups()
(' ',)
>>> print re.search(r'(\s)\w+', words).group(1)
' ' 
```

`findall`返回捕获的所有组的列表。你得到了一个空间，因为那是你捕捉到的。停止捕获，它工作正常：

```
>>> print re.findall(r'\s\w+', words)
[' blahblah'] 
```

使用[`csv`](http://docs.python.org/2/library/csv.html)模块

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T23:59:13.697

如果您希望将捕获组保留在您的正则表达式中，但您仍希望找到每个匹配项的全部内容而不是组，您可以使用以下内容：

```
[m.group() for m in re.finditer(r'(\s)\w+', words)] 
```

例如：

```
>>> [m.group() for m in re.finditer(r'(\s)\w+', '4324324 blahblah')]
[' blahblah'] 
```

# django - 会话过期时django的禁止（403）响应，如何将其更改为未授权（401）

> ID：13887548
> 
> 赞同：1
> 
> 时间：2012-12-14T23:14:03.563
> 
> 标签：django, session, csrf, django-csrf

我正在尝试在应用程序中上传文件。我清空浏览数据或以某种方式结束会话，然后点击上传。我从我的文件系统中选择了一个文件，我从 Django 的服务器中收到了一个禁止 (403) 错误。csrf.py 的代码被执行。

```
if not constant_time_compare(request_csrf_token, csrf_token):
                logger.warning('Forbidden (%s): %s',
                               REASON_BAD_TOKEN, request.path,
                    extra={
                        'status_code': 403,
                        'request': request,
                    }
                )
                return self._reject(request, REASON_BAD_TOKEN) 
```

现在，我不想更改 Django 的代码，如何向用户呈现 401 而不是 403。我不想从服务器捕获 403 并在我的 Javascript 中将其更改为 401。还有其他解决办法吗？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:26:14.023

该[`CSRF_FAILURE_VIEW`](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-CSRF_FAILURE_VIEW)设置允许您为 CSRF 失败编写自己的视图。您可以编写一个返回 HTTP 状态 401 的代码。

# php - 在 WordPress 插件开发中如何处理多个表单？

> ID：13887550
> 
> 赞同：0
> 
> 时间：2012-12-14T23:14:05.583
> 
> 标签：php, forms, wordpress, plugins, action

我正在从 CodeIgniter 过渡到 WordPress。仍在尝试围绕 WordPress 插件开发... 似乎很容易，但我想不通的一件事是：我在哪里发送表单数据？在 CodeIgniter 中，您可以简单地在控制器中创建另一个方法并将表单操作指向那里，但似乎 WordPress 插件有点不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:42:04.657

取决于您的插件如何生成表单。通常，您通过注册一个短代码来做到这一点，例如 [my_form] 您可以将其插入页面或发布您希望表单出现的位置。

在您的插件代码中，表单操作可以是空白的——只需重新加载相同的 Wordpress 页面。您的表单信息。将在全局 $_POST 中，然后您的插件可以处理数据。

因此，您的插件简码函数将具有以下内容：

```
if(isset($_POST['my_plugin_form_field'])){
 /* code to process the form info and generate a message on screen 
 }

else{
/* the form hasn't been submitted yet so here is the code to display it
} 
```

# unicode - 处理阿拉伯字符串时的 Solr 搜索错误

> ID：13887551
> 
> 赞同：3
> 
> 时间：2012-12-14T23:14:09.140
> 
> 标签：unicode, solr, utf-8, encode, arabic

我在 Solr search Arabic 上苦苦挣扎了好几天，并做了一些实验。这是问题的简单反映。

在我将一些阿拉伯语句子（现在只有 1 个单词 السوري ）存储到数据库中并让 Solr 索引它之后，然后通过`q=*:*&wt=python`,（如果没有 wt 部分，它是乱码字符）查询它，响应是：

```
'\u00d8\u00a7\u00d9\u201e\u00d8\u00b3\u00d9\u02c6\u00d8\u00b1\u00d9\u0160' 
```

我为索引存储的实际单词是以另一种方式编码：

```
'\xd8\xa7\xd9\x84\xd8\xb3\xd9\x88\xd8\xb1\xd9\x8a' 
```

`\xd8`如您所知，从↔有一个一对一对应`\u00d8`。但我不知道这个编码的名称是什么，因此我无法转换它。当我进行搜索时：`<>/select/?q=السوري&wt=python`，响应是：

```
{'responseHeader':{'status':0,'QTime':0,'params':{'wt':'python','q':u'\u0627\u0644\u0633\u0648\u0631\u064a'}},'response':{'numFound':0,'start':0,'docs':[]}} 
```

未找到文档，似乎使用第三个版本进行编码`u'\u0627\u0644\u0633\u0648\u0631\u064a'`。如果我接受它，`encode('utf8')`然后它会转换回`'\xd8\xa7\xd9\x84\xd8\xb3\xd9\x88\xd8\xb1\xd9\x8a'`.

总之，当它 (السوري) 在我的代码 (python) 或数据库 (mysql) 中时，它显示为“form1”：

```
'\xd8\xa7\xd9\x84\xd8\xb3\xd9\x88\xd8\xb1\xd9\x8a' 
```

当它被 Solr 索引时，它转换为 form2：

```
'\u00d8\u00a7\u00d9\u201e\u00d8\u00b3\u00d9\u02c6\u00d8\u00b1\u00d9\u0160' 
```

当我使用`<>/select/?q=السوري&wt=python`, 从浏览器（谷歌浏览器）查询时，它变成了 form3：

```
'\u0627\u0644\u0633\u0648\u0631\u064a' 
```

（可以通过但转换回form1，`encode('utf8')`但由于它们*不同*，因此搜索不匹配。

因此，这三种不同的编码策略可能是核心问题。谁能帮我弄清楚并解决搜索问题？

提前致谢。

# c# - protobuf-net UseImplicitZeroDefaults 和 Enum 默认值

> ID：13887553
> 
> 赞同：2
> 
> 时间：2012-12-14T23:14:35.923
> 
> 标签：c#, serialization, protocol-buffers, protobuf-net

我们正在尝试使用 protobuf-net，但无法理解现在在自定义 RuntimeTypeModel 中禁用的 UseImplicitZeroDefaults。我们最初使用默认的 RuntimeTypeModel，但注意到布尔属性没有被克隆，即使指定了 DefaultValue，即 DefaultValue=true，但是当设置为 false 时，克隆的属性将始终为 true。

我们通过创建自定义 RuntimeTypeModel 解决了这个问题，它允许我们将 UseImplicitZeroDefaults 设置为 false。但是将其设置为 false 会导致以下错误；

```
ProtoBuf.ProtoException: No wire-value is mapped to the enum 
```

请注意，我们的一些枚举不是基于零的，这会导致问题吗？我们如何克隆/序列化布尔属性和枚举（非零和基于零的混合）？

编辑：我使用了在以下位置找到的一些信息：[protobuf-net enum serialization](https://stackoverflow.com/questions/4135569/protobuf-net-enum-serialization?rq=1)并且可以报告：

```
[ProtoMember(10), DefaultValue(SiteType.Partition)]
public SiteType Type { get; set; } 
```

仍然导致“无线值”错误。

```
[ProtoMember(10, IsRequired = true)]
public SiteType Type { get; set; } 
```

仍然导致“无线值”错误。

```
public enum SiteType
{
    Error = 0,
    ... 
```

这可行，但理想情况下，我们希望让我们的枚举保持干净。
也许是指定默认值的更简洁的方法：

```
[DefaultValue(SiteType.Server)]
public enum SiteType
{
    Server = 1,
    Monkey = 2
    ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:45:36.127

我们通过为任何基于非零的枚举指定默认枚举来解决此问题。我们在被序列化的类的构造函数中指定了默认值。这是迄今为止最整洁的解决方案，不需要任何额外的 protobuf-net 属性。

另外，为基于非零的枚举属性显式设置默认值是有意义的。

# android - SeekBar 拇指位置问题

> ID：13887556
> 
> 赞同：5
> 
> 时间：2012-12-14T23:14:52.753
> 
> 标签：android, user-interface, seekbar

我正在尝试为我的 Seekbar 做一个“标记”的拇指。目标是在每次 Seekbar 位置更改时自定义拇指上方的文本。

我正在这样做：

```
 ...
        seekBar = (SeekBar) findViewById(R.id.bet_seek_bar);
        seekBar.setMax(10);
        setSeekBarLabel("0");
        seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

            @Override
            public void onStopTrackingTouch(SeekBar seekBar)
            {

            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar)
            {

            }

            @Override
            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser)
            {
                setSeekBarLabel(String.valueOf(progress));
            }
        });
    }

    private void setSeekBarLabel(String text)
    {
        BitmapDrawable thumb = Utils.writeOnBitmap(thumbBmp, text, 0, 0, thumbLablePaint);
        seekBar.setThumb(thumb);
    } 
```

运行它并触摸栏后，我得到了这个：

![截屏](../Images/fe596776a288b9132e2eb52d3e2ad2a7.png)

我现在不关心任何文本问题（不写一个，部分等）。

我关心相对于进度条的拇指位置。

拇指位置应该是绿条结束的地方。我错过了什么？

问候。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T17:45:14.123

我最终从 SeekBar 扩展，并覆盖了 onMeasure() 和 onDraw 方法()，这是我发现标签/拇指工作的唯一方法。

发布它以帮助他人：

```
...
    @Override
    protected synchronized void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
     {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        if (labelBackground != null)
        {

            viewWidth = getMeasuredWidth();
            barHeight = getMeasuredHeight();// returns only the bar height (without the label);
            setMeasuredDimension(viewWidth, barHeight + labelBackground.getHeight());
        }

    }

    @Override
    protected synchronized void onDraw(Canvas canvas)
    {
        if (labelBackground != null)
        {
            barBounds.left = getPaddingLeft();
            barBounds.top = labelBackground.getHeight() + getPaddingTop();
            barBounds.right = barBounds.left + viewWidth - getPaddingRight() - getPaddingLeft();
            barBounds.bottom = barBounds.top + barHeight - getPaddingBottom() - getPaddingTop();

            progressPosX = barBounds.left + ((float) this.getProgress() / (float) this.getMax()) * barBounds.width();

            labelPos.x = (int) progressPosX - labelOffset;
            labelPos.y = getPaddingTop();

            progressDrawable = getProgressDrawable();
            progressDrawable.setBounds(barBounds.left, barBounds.top, barBounds.right, barBounds.bottom);
            progressDrawable.draw(canvas);

            labelTextPaint.getTextBounds(labelText, 0, labelText.length(), labelTextRect);

            canvas.drawBitmap(labelBackground, labelPos.x, labelPos.y, labelBackgroundPaint);
            canvas.drawText(labelText, labelPos.x + labelBackground.getWidth() / 2 - labelTextRect.width() / 2, labelPos.y + labelBackground.getHeight() / 2 + labelTextRect.height() / 2, labelTextPaint);

            thumbX = (int) progressPosX - getThumbOffset();
            thumbDrawable.setBounds(thumbX, barBounds.top, thumbX + thumbDrawable.getIntrinsicWidth(), barBounds.top + thumbDrawable.getIntrinsicHeight());
            thumbDrawable.draw(canvas);
        } else
        {
            super.onDraw(canvas);
        }
    } 
```

结果：

![结果](../Images/903e0709458e0c13bd0f3517b28aafa1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:25:08.940

将 int progress 传递给将 drawable 设置为 seekBar 并使用 setProgress() 方法的方法：

```
private void setSeekBarLabel(String text, int progress)
{
    BitmapDrawable thumb = Utils.writeOnBitmap(thumbBmp, text, 0, 0, thumbLablePaint);
    seekBar.setThumb(thumb);
    seekBar.setProgress(progress);
} 
```

并将第二个参数添加到调用方法：

```
setSeekBarLabel(String.valueOf(progress), progress); 
```

# java - EhCache Weblogic 死锁？

> ID：13887558
> 
> 赞同：0
> 
> 时间：2012-12-14T23:15:15.413
> 
> 标签：java, weblogic, solaris, deadlock, ehcache

有一个 web 服务客户端使用 ehcache 来缓存一些结果并避免过多的 ws 调用。

显然，调用这个ws客户端的服务器（在Weblogic OSB上）只是挂起，甚至没有在日志中写任何东西......只是冻结！只要有一点流量就可以了。

完整的线程转储在这里：

[http://pastebin.com/rdVyxjNc](http://pastebin.com/rdVyxjNc)

下面是我不太清楚停车等待 **<0x8a03c9c0>**

但我无法在线程转储中找到对 0x8a03c9c0 的任何引用。

您是否在线程转储中看到任何可能导致此服务器冻结的内容？

谢谢

```
searchByTemplate.data" prio=3 tid=0x0115b400 nid=0x5e waiting on condition [0x5ef7f000..0x5ef7fbf0]
   java.lang.Thread.State: TIMED_WAITING (parking)
        at sun.misc.Unsafe.park(Native Method)
        - parking to wait for  <0x8a03c9c0> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
        at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)
        at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:1963)
        at java.util.concurrent.DelayQueue.take(DelayQueue.java:164)
        ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T02:02:35.070

您突出显示的线程实际上“可用于”处理请求，因此不是问题。Weblogic Oracle Service Bus 依赖 XQuery 进行 XML 操作。众所周知，XQuery 在处理大数据负载时会占用大量 CPU 和内存。

我刚刚分析了您的线程转储。线程转储清楚地显示了高 CPU 模式，其中多个线程正在执行任务，例如解析 XML 并尝试在某些数据结构（例如 ArrayList 等）中分配内存。

我怀疑“挂起”问题的根源有两种可能的情况：

## 过多的垃圾收集和 OldGen 空间耗尽

HotSpot JVM 1.6+ 在底部包含 Java 堆利用率。我们可以看到 OldGen 空间在 92%。这重新强化了我们从线程转储中看到的线程模式。

1.  PSYoungGen 总计 466944K，已使用 233472K [0xd1000000, 0xfbc00000, 0xfbc00000)
2.  伊甸园空间 233472K, 100% 已使用 [0xd1000000,0xdf400000,0xdf400000)
3.  从空间 233472K，使用 0% [0xed800000,0xed800000,0xfbc00000)
4.  到空间 233472K，使用 0% [0xdf400000,0xdf400000,0xed800000)
5.  **ParOldGen** 总计 1400832K，已使用 1297110K [0x7b800000, 0xd1000000, 0xd1000000)
6.  对象空间 1400832K，已使用**92%** [0x7b800000,0xcaab5ac8,0xd1000000)
7.  PSPermGen 总计 262144K，已使用 167570K [0x6b800000, 0x7b800000, 0x7b800000)
8.  对象空间 262144K，已使用 63% [0x6b800000,0x75ba4ab0,0x7b800000)

## 消耗 CPU 和/或 Java 堆内存的罪魁祸首线程

在这种情况下，一个或几个线程可能会参与不间断的处理，例如不返回的 XQuery 等，从而导致 CPU 激增和 JVM 争用。

现在在下面找到我的建议：

*   启用详细：gc。这将允许您沿着垃圾收集频率执行 Java 堆的运行状况和足迹评估
*   下次看到问题时执行每个线程的 CPU% 分析。这将允许您确定您是否正在处理消耗 CPU 和/或 Java 堆内存的特定服务总线请求

从我的博客中查找以下文章，以帮助您在下一个分析阶段：

## 详细的 GC 分析

[JVM 详细 GC 教程](http://javaeesupportpatterns.blogspot.com/2011/10/verbosegc-output-tutorial-java-7.html)

## Java高CPU故障排除

[Java 高 CPU 故障排除](http://javaeesupportpatterns.blogspot.com/2012/05/java-high-cpu-troubleshooting-guide.html)

问候， PH

# java - 是否恰当的说法。java中的if（0！=表达式或变量）{}？

> ID：13887559
> 
> 赞同：6
> 
> 时间：2012-12-14T23:15:19.047
> 
> 标签：java, syntax

我正在研究具有以下风格的java源代码：

```
if (0 == var) {}
and 
if (null == someObj) {} 
```

或者

```
if (0 != var) {}
and 
if (null != someObj) {} 
```

我应该将其重写为：

```
if (var == 0) {}
and 
if (someObj == null) {} 
```

?

提前致谢！。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T23:17:10.280

拥有以下内容是完全有效的：

```
if (0 == var) {}
and 
if (null == someObj) {} 
```

它被称为著名的**[yoda 条件](http://united-coders.com/christian-harms/what-are-yoda-conditions/)**，以防止意外使用 single`=`代替`==`.

我个人从未使用过它。但有些人喜欢它。这真的是一个品味问题。

* * *

但是，它在 Java 中没有用。因为，这样一个意外的错字在编译时就被发现了。

以下将在 Java 中给出编译时错误。

```
if( var = 0 ) 
{
//Some code
} 
```

因为赋值操作在 Java 中不会产生布尔值。但是，在 C/C++ 等语言中，上述内容是有效的，如果未启用警告，编译器不会给出错误。`if`在 C/C++ 中，上述条件将始终评估为假 (0)。所以它可能会被忽视并在运行时给出意想不到的结果。

在 GCC 中，启用所有警告后，它会在 C 或 C++ 中给出上述警告：

```
warning: suggest parentheses around assignment used as truth value 
```

因此，这在 C/C++ 中也可能没有多大用处，因为预计编译时会包含所有警告并修复所有警告。正如我之前所说，这是个人选择，没有区别。

`if ( 0 == var){}`一个有效的语法也是如此，`if (var == 0) {}`如果你更喜欢 Yoda 的条件，那就去吧！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T23:17:31.610

一般写`0 == n`的就叫a `yoda condition`。因为如果你大声说出来，你会说`if zero equals my var`。

最好写`n == 0`。但它是完全一样的。但是读起来更好。

该条件的某些优点不适用于 java。

```
if (value = 42) 
```

产生编译错误。`value = 42`产生一个在 java`int`中不是有效输入的 an 。`if`但在`C`.

比较使用`constant`左侧的 是一种常见的最佳实践。但前提是使用 Object equals 方法。

```
if ("CONSTANT".equals(myString)) 
```

if`myString`为 null 或者您正在比较`primitives`，因为无法`.equals()`访问该变量，因此检查 null 没有意义。

```
if ( "CONSTANT" == null ) 
```

虽然只是我的意见，但好处只是易读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T23:22:08.077

这种类型的术语被称为“**尤达表达式**”，因为它们与英语自然语言相比是“倒退的”。

我不认为分配有什么好处——好的代码审计工具可以捕获这些类型的错误，并且大多数应该已经被更严格的 Java 编译器捕获（使用`=`而不是`==`C 中的常见错字！）

但是，当您使用`compareTo`方法时，您需要考虑`null`值。

```
 if ("example".equals(input)) 
```

不能碰上a `NullPointerException`，而更“自然”

```
 if (input.equals("example")) 
```

可以，并且需要额外检查`null`值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T23:17:28.237

有些人更喜欢第一种风格，因为说`var = null`而不是`var == null`偶然会是一个错误，在 C 和 C++ 等语言中很难捕捉到，但`null = var`很容易捕捉，因为它不会编译。如评论中所述，这不适用于 Java，因为`null = var`它不是布尔表达式。

# android - 假设任何其他应用程序不使用通用数据列来存储自己的联系人数据是否安全

> ID：13887562
> 
> 赞同：0
> 
> 时间：2012-12-14T23:15:22.913
> 
> 标签：android

我正在使用通用列 DATA1 到 Data15 来存储一些数据。我的问题是假设这些列没有被其他安卓应用程序用来存储他们自己的数据是否安全。如果不是，我将如何确保某个特定列没有被任何其他应用程序使用？

```
ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)
                .withValue(Data.DATA10,"Data") 
```

检索数据：

```
ContentResolver cr=context.getContentResolver();
Cursor emailCur = cr.query( 
                ContactsContract.Data.CONTENT_URI,
                null,
                ContactsContract.Data._ID + " = ?", 
                new String[]{str_id}, null); 
                while (emailCur.moveToNext()) 
       { 
                String name=emailCur.getString(
                          emailCur.getColumnIndex(Data.DATA10));

       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:29:34.303

[如果您对MIMETYPE 列](http://developer.android.com/reference/android/provider/ContactsContract.DataColumns.html#MIMETYPE)使用自己的 MIME 类型值，这将是安全的。在查询数据表时，指定一个 MIME 来查询特定的结果（电话号码、姓名、地址等），因此如果您为您的应用程序使用一个特殊的值，其他应用程序可能不会使用它/更改它。

[在此处](http://developer.android.com/reference/android/provider/ContactsContract.Data.html)阅读有关数据表的更多信息。

**编辑：**将此调用附加到`ContentProviderOperation`创建链：

```
.withValue(Data.MIMETYPE, "yourCustomMimeType") 
```

# python - 将 logger.exception 更改为 level=CRITICAL 而不是 ERROR？

> ID：13887563
> 
> 赞同：5
> 
> 时间：2012-12-14T23:15:36.363
> 
> 标签：python

我需要更改 logger.exception 默认行为以使用 level=CRITICAL 写入我的记录器。这似乎是我可以改变的东西，但我还没有弄清楚如何改变。我最后的手段是 sys.excepthook 但我不想使用它，因为我在那里进行格式化。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T23:43:57.823

`CRITICAL`您可以使用如下方式记录异常：

```
logger.critical('Message with %s', 'arguments', exc_info=True) 
```

它的行为就像`logger.exception`，只有一个级别`CRITICAL`而不是`ERROR`。

# asp.net - 在网页上的 ReportViewer 控件中呈现时，Reporting Services 图表文本模糊

> ID：13887564
> 
> 赞同：10
> 
> 时间：2012-12-14T23:15:40.217
> 
> 标签：asp.net, reporting-services, reportviewer

**问题**

我们正在使用 Reporting Services 报表和 ReportViewer 控件在网页上呈现条形图。有时图表上的文字很清晰：

![带有清晰文本的图表](../Images/088d0d44b7de942da8dcf909bea192f9.png)

但大多数时候，图表上的文字是模糊的：

![带有模糊文本的图表](../Images/8e95c950804ee0e272057159b59336d9.png)

到底是怎么回事？

**解决步骤和其他信息**

*   广泛搜索网络和 SO
*   尝试了不同的浏览器、用户和机器；无法确定韵律或模糊的原因
*   尝试了 SSRS 报告属性的几种设置`DynamicHeight`和`DynamicWidth`
*   在 Firefox 中，右键单击图表图像并选择**View image**时，显示的图像*始终*清晰
*   这个问题在有边界的图表上似乎更加突出；删除了图表上的边框，但问题仍然存在

**影响浏览器**

*   火狐15.0
*   铬 23.0.1271.97 m
*   IE 9 但仅在浏览器模式=IE9、文档模式=IE9 标准时

**环境**

*   视觉工作室 2010 专业版
*   .NET 4.0
*   IIS 7.0
*   报告服务 2008
*   ReportViewer 控件版本 10

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T23:15:40.217

**原因**

ReportViewer 控件将图表呈现为 PNG 图像。ReportViewer 将`width`、`height`和`min-width`属性添加到图像的 CSS 中。这些 CSS 属性会导致图像在浏览器中缩放到*稍小的尺寸。*图像缩放会导致观察到的模糊。

**解析度**

通过使用额外的 CSS 覆盖 ReportViewer 呈现的几个 CSS 属性，该问题在我们的环境中得到解决。Reporting Services 图表在 BIDS 中具有特殊标记，因此 CSS 选择器可以找到受影响的图像。

步骤 1\. 为图表赋予其`ToolTip`属性的唯一值：

![BIDS 中 ToolTip 属性的唯一值](../Images/311a9a5b18a7841b8dfd70e975ab5dad.png)

（此示例中的唯一值是*MyOfficeChart*。）

当图表呈现为`<img>`时，`<img>`标签的`alt`和`title`属性设置为此值。

步骤 2\. 创建 CSS 以选择属性`<img>`的唯一值`title`，并覆盖导致问题的 CSS：

```
img[title$='MyOfficeChart']
{
    height:auto !important;
    width:auto !important;
    min-width:0 !important;
} 
```

这些步骤解决了所有浏览器和用户的问题，以及图表是否有边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T17:06:44.243

解决这个问题的一个简单方法是将一个矩形直接放入您的 tablix 单元格，然后将图表放在该矩形内。（而不是将图表直接放在 tablix 单元格中。）

不是 100% 确定它为什么会起作用……但确实如此。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-22T17:41:09.930

这不是正确的解决方案，但可以提供帮助。步骤如下：

1.  在报表生成器中打开报表 rdl
2.  选择图表的文本，它会变得模糊
3.  在字体样式中输入“C”（在顶部菜单上），然后按 Enter
4.  字体样式更改但未知
5.  尝试运行并查看差异

# javascript - 未单击选项时在选择标记上触发更改事件

> ID：13887567
> 
> 赞同：0
> 
> 时间：2012-12-14T23:16:04.600
> 
> 标签：javascript, jquery, html

我有一个绑定到选择标签的更改事件。选择标签中的第一个选项被禁用，因为我将它用作菜单的默认文本。如果用户单击选择标签，将鼠标悬停在选项上而不选择它，然后在选择菜单之外单击两次，则将触发更改事件。如何防止触发此更改事件。

的HTML

```
<select id="select">
    <option disabled="disabled" selected="selected">Title</option>
    <optgroup label="things">
        <option>cars</option>
        <option>boats</option>
        <option>world</option>
    </optgroup>
</select> 
```

jQuery

```
$('#hide').click(function(){
    $('#select').hide();
});
$('#show').click(function(){
    $('#select').show();
});
$('#select').change(function(){
    alert($(this).val());
}); 
```

该代码只是我的问题的一个示例。我添加了按钮，因为在我的真实代码中，当用户在选择菜单之外单击时，我隐藏了选择菜单。

这是上面代码的[小提琴](http://jsfiddle.net/TPpD6/1/)。

**编辑**

在查看评论后，它看起来是一个特定于 Firefox 的问题，因为它在 Internet Explorer、Chorme 和 Safari 中运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:35:11.700

您始终可以将 select 上的一些数据与当前值相关联，并验证它是否实际发生了变化。

```
$('#hide').click(function(){
    $('#select').hide();
});
$('#show').click(function(){
    $('#select').show();
});
$('#select').data('currVal', 'Title');
$('#select').change(function(){
    if($(this).val() != $(this).data('currVal') {
        // this is actual value change
        alert($(this).val());
        $(this).data('currVal', $(this).val());
    }
}); 
```

我已经用解决方案更新了原始小提琴：

[http://jsfiddle.net/TPpD6/4/](http://jsfiddle.net/TPpD6/4/)

# jquery - 检测包含的 jQuery UI 插件

> ID：13887569
> 
> 赞同：0
> 
> 时间：2012-12-14T23:16:15.210
> 
> 标签：jquery, jquery-ui, jquery-plugins, plugins, console

有什么方法可以检测网站中可用的 jQuery-UI 插件吗？特别是，我很好奇是否有一个简单的 console.log() 或控制台 echo 命令（如 $.ui.version）可以列出可用的插件。

问题的第 2 部分是如何在不覆盖整个库的情况下将插件添加到现有的 jUI 设置中，但我们将把它保存起来以备后用:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:24:08.923

您需要解析`$.ui`object 。它包含所有 jQueryUI 小部件方法，但也包含其他方法。在浏览器控制台中检查它以查看它包含的内容。您可以构建一个小部件名称数组，然后检查数组中的名称是否存在于`$.ui`

# c# - URL.Action 与字符串数组？

> ID：13887570
> 
> 赞同：12
> 
> 时间：2012-12-14T23:16:26.817
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework, razor

我有一个字符串数组，我需要在 Url.Action 的查询字符串中传递这些字符串。

```
Url.Action("Index", "Resource", new { FormatIds = Model.FormatIDs}) 
```

现在该链接在我的浏览器中显示为 System.String[] 而不是查询字符串。是否可以让 MVC 使用模型绑定自动执行此操作？

我需要它与我的控制器操作绑定，例如：

```
public ActionResult Index(string[] formatIDs) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T23:28:02.397

要使用默认活页夹获取要自动绑定的字符串列表，您需要将它们提供为：

```
name=value&name=value2&name=value3 
```

因此，您需要将列表转换为：

```
Index?formatIDs=1&formatIDs=2&formatIDs=3 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T23:19:04.637

要使用默认模型绑定器，您应该最终得到如下内容：

```
Index?formatIDs=value1&formatIDs=value2&formatIDs=value3 
```

即使文档说它是使用 ParseQueryString 实用程序的 NameValueCollection，您也可以返回一个名为 HttpValueCollection 的私有集合。然后手动添加键，HttpValueCollection 为您进行编码。然后只需手动附加 QueryString ：

```
var qs = HttpUtility.ParseQueryString(""); 
new string[] { "value1", "value2", "value3" }.ToList().ForEach(x => qs.Add("formatIDs", x));

Url.Action("Index", "Resource")?@qs 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T12:26:08.453

还有另一种使用带有数组的 RouteValueDictionary 的方法：

```
@{
   var parameters = new RouteValueDictionary();

   for (var i = 0; i < Model.CustomList.Count; ++i)
   {
       parameters.Add($"customListId[{i}]", Model.CustomList[i]);
   }
} 
```

用法：

```
var url = '@Html.Raw(Url.Action("ControllerActioon", "Controller", parameters))'; 
```

仍然不是很优雅 - 但工作。

# haskell - 为什么 EKG 不显示我分配的内存？

> ID：13887575
> 
> 赞同：7
> 
> 时间：2012-12-14T23:16:40.263
> 
> 标签：haskell, ekg

在[24 天的 Hackage 中看到 EKG 后](http://ocharles.org.uk/blog/posts/2012-12-11-24-day-of-hackage-ekg.html)，我尝试在我的一个程序中使用它，但它没有显示我的任何内存分配。

所以我用一个只占用内存的示例程序再次尝试：

```
{-# LANGUAGE OverloadedStrings #-}
module Main where

import System.Remote.Monitoring (forkServer)
import Control.Applicative ((<$>))
import Control.Monad (foldM, forM_)
import Control.Monad.Primitive (PrimMonad, PrimState)
import Data.Vector.Mutable (MVector, replicate, read, write, length)
import Prelude hiding (read, length, replicate)
import Text.Printf

accumBy :: (Functor m, PrimMonad m) => (a -> a -> a) -> MVector (PrimState m) a -> m a
accumBy f v = do
  a <- read v 0
  foldM (\a i -> do
    a' <- f a <$> read v i
    write v i a'
    return a'
    ) a [1 .. length v - 1]

main :: IO ()
main = do
  forkServer "localhost" 8000
  forM_ [1..] $ \n -> do
    v <- replicate (n*1024) (n :: Int)
    accumBy (+) v >>= printf "%08x\n" 
```

程序运行良好

```
% ghc --make Temp.hs -rtsopts && ./Temp +RTS -K32mM -RTS
00000400
00001000
00002400
... 
```

但心电图似乎根本没有检测到我的内存使用情况

![心电图统计](../Images/c2bb97890ba33cfc4110a35b25c7d554.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T23:38:53.573

您需要使用`-T`or `-t`or or `-S`or `-s` [RTS 选项](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/runtime-control.html)来收集统计信息，例如：

```
ghc --make Temp.hs -rtsopts && ./Temp +RTS -T -K32mM -RTS 
```

# shopify - 如何在 shopify 中对收藏的产品进行自定义重新排序

> ID：13887577
> 
> 赞同：0
> 
> 时间：2012-12-14T23:16:53.870
> 
> 标签：shopify

如何在 shopify 中对收藏的产品进行自定义重新排序。我的意思是例如我有“测试”系列，我想通过使用产品标签重新排序“测试”系列中的产品我的意思是我在“测试”系列中的某些产品中放置了一些标签，例如“firstshowup”，所以当客户点击“测试”时集合客户首先查看具有“firstshowup”标签的产品，然后查看其余产品，所以我在这里尝试的是使用自定义重新排序重新排序，而不是使用畅销书或 allpabetically 或创建日期的类似订单提前谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:25:02.870

您的集合将由具有位置属性的[收集对象组成。](http://api.shopify.com/collect.html)假设您使用的是 CustomCollection，您可以通过更新 CustomCollection 来修改收集的位置：http: [//api.shopify.com/customcollection.html#update](http://api.shopify.com/customcollection.html#update)

从示例中，要更新集合，您可以使用：

```
PUT /admin/custom_collections/#{id}.json 
```

使用以下有效负载：

```
{
  "custom_collection": {
    "body_html": "<p>The best selling ipod ever</p>",
    "handle": "ipods",
    "id": 841564295,
    "published_at": "2008-02-01T19:00:00-05:00",
    "sort_order": "manual",
    "template_suffix": null,
    "title": "IPods",
    "updated_at": "2008-02-01T19:00:00-05:00",
    "image": {
      "created_at": "2012-12-11T12:01:29-05:00",
      "src": "http://cdn.shopify.com/s/files/1/0006/9093/3842/collections/ipod_nano_8gb.jpg?0"
    },
    "collects": [
      {
        "product_id": 921728736,
        "position": 1
      },
      {
        "id": 841564295,
        "position": 2
      }
    ]
  }
} 
```

# iis - 如何将指向 IIS 7.5 服务器上 JPG 图像的链接重定向到不同的驱动器？

> ID：13887580
> 
> 赞同：0
> 
> 时间：2012-12-14T23:17:17.527
> 
> 标签：iis, mod-rewrite, redirect, iis-7.5, windows-server-2008

好的，我正在运行带有 IIS 7.5 的 Win 2008 Server R2。我当前的目录结构是这样的：

```
C:\websites\index.php
C:\websites\images\image1.jpg 
```

例如，这些文件的 URL 将是[http://www.mysite.com/](http://www.mysite.com/)和[http://www.mysite.com/images/image1.jpg](http://www.mysite.com/images/image1.jpg)

我想将图像文件夹的位置移动到 D:，所以它看起来像这样：

```
D:\websites\images\image1.jpg 
```

但是有它，所以 URL 在[http://www.mysite.com/images/image1.jpg](http://www.mysite.com/images/image1.jpg)保持不变。基本上，我希望每个指向[http://www.mysite.com/images/](http://www.mysite.com/images/)的链接现在都从 D: 而不是 C: 获取。

我该怎么做呢？我需要重写规则吗？如何让 IIS 中的网站（在本例中为 mysite.com）指向两个不同的目录，一个在 C:\websites\ 中，另一个在 D:\websites\ 中？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:39:13.273

在 IIS 管理器图形用户界面中，您必须在网站的根目录中创建一个名为的虚拟目录`images`，并让它指向 D: 驱动器上的图像文件夹。

# matlab - Matlab 和支持向量机：为什么 PCA 的实现没有给出好的预测结果？

> ID：13887585
> 
> 赞同：2
> 
> 时间：2012-12-14T23:17:33.620
> 
> 标签：matlab, svm, libsvm, pca

我有一个包含 60,000 张图像的训练数据集和一个包含 10,000 张图像的测试数据集。每个图像代表一个从 0 到 9 的整数。我的目标是使用 libsvm，它是一个支持向量机库，以便从训练数据集中学习数字，并使用生成的分类来预测测试数据集的图像。

每个图像都`28x28`意味着它具有`784`像素或*特征*。虽然功能似乎太多，但运行 SVM 应用程序并学习训练数据集只需要 5-10 分钟。给我的测试结果非常好`93% success rate`。

我决定尝试使用 matlab 中的 PCA，以减少特征量，同时不丢失太多信息。

```
[coeff scores latent] = princomp(train_images,'econ'); 
```

我稍微玩了一下latent，发现前90个特征会导致`10%`信息丢失，所以我决定只使用前90个。

在上面的代码中 train_images 是一个大小数组`[60000x784]`

从这段代码中我得到了分数，从分数中我简单地得到了我想要的特征数量，所以最后我有一个训练图像数组`[60000x90]`

**问题1：将测试数据集投影到系数=> coeff的正确方法是什么？**

我尝试使用以下内容：

```
test_images = test_images' * coeff; 
```

请注意，相应的 test_images 是一个大小数组，`[784x10000]`而 coeff 是一个大小数组`[784x784]`

然后我再次通过执行以下操作仅获取了 90 个功能：

```
test_images = test_images(:,(1:number_of_features))'; 
```

这似乎是正确的。然而，在运行训练和预测之后，我得到`60% success rate`的成功率远低于我根本不使用任何 PCA 时得到的成功率。

**问题2：为什么我得到这么低的结果？**

在 PCA 之后，我像往常一样缩放数据，我猜这是正确的做法。根据 libsvm 网站，不缩放通常不是一个好主意，所以我认为这不是问题。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:34:23.367

关于您的第一个问题，相信 MarkV 已经为您提供了答案。至于第二个问题：PCA确实保留了你数据的大部分方差，但并不一定意味着它保留了你数据90%的**信息**。有时，成功分类所需的信息实际上位于您敲掉的这 10% 上。可以在[这里](http://www.wisdom.weizmann.ac.il/~irani/PAPERS/InDefenceOfNN_CVPR08.pdf)找到一个很好的例子，尤其是那里的图 1。

所以，如果你在完整的功能上得到了很好的结果，为什么要减少维度呢？

您可能想尝试使用不同的主要组件。如果您采用 91:180 组件会发生什么？这可能是一个有趣的实验......

# xml - 使用 xslt 1.0 的棘手分组

> ID：13887589
> 
> 赞同：1
> 
> 时间：2012-12-14T23:18:04.150
> 
> 标签：xml, xslt, xslt-1.0

我需要使用 xslt 1.0 做一些棘手的映射。只需要对`datetime`元素的日期部分进行分组。但是该元素包含日期和时间。分组后还需要添加小时。

这是输入：

```
<Records>
   <Record>
      <empid>1</empid>
      <datetime>10/10/2010 11:11:00 AM</datetime>
      <hours>5</hours>
    </Record>
    <Record>            
      <empid>1</empid>
      <datetime>10/10/2010 10:11:00 AM</datetime>
      <hours>5</hours>
    </Record>
    <Record>   
      <empid>1</empid>           
      <datetime>10/11/2010 11:11:00 AM</datetime>
      <hours>5</hours>
    </Record>
    <Record>   
       <empid>2</empid>
       <datetime>10/10/2010 10:11:00 AM</datetime>
       <hours>2</hours>
    </Record>
    <Record> 
      <empid>2</empid>
      <datetime>10/10/2010 9:11:00 AM</datetime>
      <hours>5</hours>  
     </Record>    
  </Records> 
```

预期输出为：

```
 <Records>
      <Record>
       <empid>1</empid>
      <detail>     
         <date>10/10/2010</date>
         <hours>10</hours>
      </detail> 
     <detail>
        <date>10/11/2010</date>
        <hours>5</hours>
     </detail>
    </Record>
    <Record>
       <empid>2</empid>
       <detail>
          <date>10/10/2010</date>
          <hours>7</hours>
       </detail>
    </Record>
 </Records> 
```

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:50:46.643

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kRecById" match="Record" use="empid"/>
 <xsl:key name="kRecByDateId" match="Record"
          use="concat(empid,'+',substring-before(datetime, ' '))"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "Record[generate-id()=generate-id(key('kRecById', empid)[1])]">
  <Record>
   <xsl:apply-templates select="empid"/>
   <xsl:apply-templates mode="inGroup" select=
    "key('kRecById', empid)
                [generate-id()
                =
                 generate-id(key('kRecByDateId',
                             concat(empid,'+',substring-before(datetime, ' ')))[1])]"/>
  </Record>
 </xsl:template>

 <xsl:template match="Record" mode="inGroup">
   <detail>
     <date><xsl:value-of select="substring-before(datetime, ' ')"/></date>
     <hours><xsl:value-of select=
     "sum(key('kRecByDateId',
              concat(empid,'+',substring-before(datetime, ' '))
              )/hours)"/>
     </hours>
   </detail>
 </xsl:template>
 <xsl:template match="Record"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Records>
    <Record>
        <empid>1</empid>
        <datetime>10/10/2010 11:11:00 AM</datetime>
        <hours>5</hours>
    </Record>
    <Record>
        <empid>1</empid>
        <datetime>10/10/2010 10:11:00 AM</datetime>
        <hours>5</hours>
    </Record>
    <Record>
        <empid>1</empid>
        <datetime>10/11/2010 11:11:00 AM</datetime>
        <hours>5</hours>
    </Record>
    <Record>
        <empid>2</empid>
        <datetime>10/10/2010 10:11:00 AM</datetime>
        <hours>2</hours>
    </Record>
    <Record>
        <empid>2</empid>
        <datetime>10/10/2010 9:11:00 AM</datetime>
        <hours>5</hours>
    </Record>
</Records> 
```

**产生想要的正确结果：**

```
<Records>
   <Record>
      <empid>1</empid>
      <detail>
         <date>10/10/2010</date>
         <hours>10</hours>
      </detail>
      <detail>
         <date>10/11/2010</date>
         <hours>5</hours>
      </detail>
   </Record>
   <Record>
      <empid>2</empid>
      <detail>
         <date>10/10/2010</date>
         <hours>7</hours>
      </detail>
   </Record>
</Records> 
```

**说明**：

两个嵌套的**[Muenchian grouping](http://www.jenitennison.com/xslt/grouping/muenchian.html)**，内部使用复合键。

# php - “style.php”是否有效？

> ID：13887592
> 
> 赞同：0
> 
> 时间：2012-12-14T23:18:27.847
> 
> 标签：php, css, responsive-design

我有一个想法...

不知道是好还是坏。

我正在为 SMF Fork 开发无图像/响应式主题。我在想，既然它是用 PHP 编写的，那么添加 php 在标题中包含一个“style.php”是否有效，其中包含页面的所有样式。

我在想这会给我带来两大好处。一是我可以将变量 start 添加到 css 文件中。第二，它会少一个 HTTP 请求。我知道 pagespeed 和 yslow 会抱怨标签之间的页面中包含 css，但这并不明智，对吗？

据我所知，无论 pagespeed/yslow 怎么想，我都看到这样做有很多好处。我什至可以用javascript做到这一点，也许......

我想知道 IE 最大 4096 CSS 规则是否仍然适用？

我是 PHP Ultra Noob，但在网页设计方面拥有丰富的经验。我似乎无法找到“不”这样做的理由。有没有专家愿意分享他们对这个想法的看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:24:35.850

我不认为这是一个好主意。如果您想在 CSS 中使用变量，请查看 SASS 或 LESS。关于附加请求，CSS 是静态的，所以如果你在服务器端完成你的工作，浏览器只会检索一次 CSS，后续请求将使用缓存的副本。

我认为这不会有害，但是这与标准开发有很大的不同，因此仅仅为此并不是一个好主意。而且，既然没人做，那肯定不是这么聪明的发明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:22:26.307

如果它是有效的 CSS（实际上即使不是，我想），您实际上可以将任何内容作为 CSS 文件包含在内：

```
<link rel="stylesheet" type="text/css" href="/style.php">

//style.php
<?php header('Content-type: text/css');
   $style = 'bold';
?>
strong {
   font-weight: <?php echo $style ?>;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T23:28:50.793

css 文件通常更有效以获得更好的速度，因为它只被请求一次，然后被缓存了很长时间。如果与 head 标签中一遍又一遍的相同 css 相比，它们还没有进入缓存，那么对于整个浏览会话来说这是 1 个额外的请求，这会使您的实际页面加载*速度变慢*。总而言之，在几次请求之后，一个单独的（可缓存的）文件通常已经胜出，只要您将其设置为可缓存很长时间（不要担心人们看不到 css 更改，如果您更改 css，只需添加一些查询参数，例如`/styles.css?rev=1`。您不使用该参数，只需在您的 css 更改时增加它，从而使客户端请求一个新副本。

这并不意味着您不能使用 PHP（或 nodejs/less）来创建或提供您的 CSS 文件，变量确实很好。如果走这`less`条路，请在您自己的服务器上将其转换为 css 一次，而不是用繁重的 javascript 来打扰客户端一次又一次地转换它。

# windows - 启用 RTS_CONTROL_TOGGLE 时手动快速切换 RTS

> ID：13887596
> 
> 赞同：1
> 
> 时间：2012-12-14T23:19:08.760
> 
> 标签：windows, winapi, serial-port

在 Windows XP 上，我打开了一个标准（在主板上）RS-232 串行端口并配置了

```
dcb.fRtsControl = RTS_CONTROL_TOGGLE; 
```

这可以很好地满足我的需求。

现在虽然没有 RX 挂起，但有时我需要在我的应用程序控制下短暂切换 RTS 线。我不能只调用 EscapeCommFunction，因为启用 RTS_CONTROL_TOGGLE 时会失败。

我试过这个：

```
dcb.fRtsControl = RTS_CONTROL_ENABLE; // manual RTS control and turns on RTS
SetCommState( hDevice, &dcb );
dcb.fRtsControl = RTS_CONTROL_TOGGLE; // turns off RTS since there is no TX pending
SetCommState( hDevice, &dcb ); 
```

然而，这似乎永远不会奏效。我从来没有看到 RTS 切换。就像设备驱动程序注意到我刚刚设置了 RTS 并且现在正在清除它，所以它只是中止了我正在做的事情。

如果我在那里睡觉：

```
dcb.fRtsControl = RTS_CONTROL_ENABLE; // turn on RTS
SetCommState( hDevice, &dcb );
Sleep(1);
dcb.fRtsControl = RTS_CONTROL_TOGGLE; // turns off RTS since there is no TX pending
SetCommState( hDevice, &dcb ); 
```

然后我看到了切换，但它的长度变化很大，从 1 到 15 毫秒不等（我猜这是意料之中的）。我使用 timeBeginPeriod 设置 1ms 调度，我的线程已经是高优先级（我应该去实时优先级吗？）。

那么，我可以做些什么来“刷新”对硬件的 RTS 更改，这样我就不必进行睡眠了？我可以忙着等待（使用 QueryPerformanceCounter 等待我想要的时间），但我担心这仍然不会“刷新”对设备的 RTS 更改。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:39:09.117

原来我用来监控 RTS 线路的串口有问题。它是基于 USB 的，并且缺少短暂的转换。

我在上面放了一个 O 型示波器，当我最初尝试打开/关闭 RTS 时，我可以看到 1ms 的闪烁。

# algorithm - 不同复杂度级别算法的实时 CPU 数据

> ID：13887597
> 
> 赞同：0
> 
> 时间：2012-12-14T23:19:17.683
> 
> 标签：algorithm

任何人都可以指出一些可靠的资源/文档，其中对不同复杂度类别的算法所花费的时间进行了一些真实的讨论，例如`O (log n), O (n), O(n log n), O(n^2), O(n^3)`等等。特别是我对一些可以回答以下问题的文档/站点感兴趣：

给定机器配置（CPU、内存）运行合并排序（或二进制搜索或其他一些标准算法）需要多长时间（以毫秒/秒为单位），其中 N 个实例作为输入，其中 N 可以在 100 到 100 万之间变化。

如果有人可以将我指向一个文档，该文档不仅可以给我以毫秒为单位的时间，而且还可以给我一个近似/启发式的能量成本的近似值/启发式方法，如果以上一些的话，那就更好了提到的算法在移动设备（智能手机）上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:49:36.813

我已经花了一些时间来做你所要求的。这不是大学研究或实时/生产级别代码的级别，但它可能会有所帮助。

我已经实现了许多数据结构和算法，并使用已排序、未排序等数据对它们进行了测试。 [http://github.com/phishman3579/java-algorithms-implementation](http://github.com/phishman3579/java-algorithms-implementation)

此外，您可以自己轻松获取其他信息，因为所有代码都是开源的并且在网站上。

# iphone - 数字键盘在完成显示时丢失自定义 UIButton 的奇怪问题

> ID：13887602
> 
> 赞同：0
> 
> 时间：2012-12-14T23:20:14.270
> 
> 标签：iphone, ios, keyboard, uibutton, subview

看起来很hacky，我正在使用这种方法在我的数字键盘上添加一个完成按钮：

[没有完成按钮的 UIKeyboardTypeNumberPad](https://stackoverflow.com/questions/4824352/uikeyboardtypenumberpad-without-a-done-button)

我切换了慢速动画，它看起来像这样，而它仍在动画并且尚未完成：

![在此处输入图像描述](../Images/62c21746f67afbde509abae9c310513c.png)

但是，当它完成加载时，它看起来像这样！

![在此处输入图像描述](../Images/1c72a86f5a77975d80c694648a44b503.png)

我添加的 UIButton 就消失了！我订阅了 UIKeyboardDidShowNotification 并通过子视图进行过滤，可以看到在触发通知时，不再有 UIButton 作为键盘的子视图。

我尝试关闭文件的 ARC，但仍然没有运气。

关于什么可能导致 UIButton 消失的任何想法？顺便说一句，按钮是一个强大的属性。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:03:40.470

拜托，你能再检查一次吗，也许你遗漏了一些东西.. [https://dl.dropbox.com/u/19438780/KeyboardExtension.zip](https://dl.dropbox.com/u/19438780/KeyboardExtension.zip)

iOS6 的另一个教程/示例：http: [//ofanyuse.wordpress.com/2012/11/09/an-elegant-solution-to-adding-a-uibutton-to-the-numberpad/](http://ofanyuse.wordpress.com/2012/11/09/an-elegant-solution-to-adding-a-uibutton-to-the-numberpad/)

# html - 将 DOM 元素转换为字符串

> ID：13887607
> 
> 赞同：1
> 
> 时间：2012-12-14T23:20:41.803
> 
> 标签：html, dom, svg

我正在研究svg。我使用我的 javascript 代码在 svg 中制作了一些形状。现在我要做的是获取在我绘制一些东西时制作的 svg 代码。我想以字符串的形式获取该代码，以便为了重用，或者如果可以将该代码放在 .svg 文件中，它输出的内容与我自己使用我的 javascript 代码制作的内容相同。就像我的代码一样

```
 <svg xmlns="http://www.w3.org/2000/svg"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 width="500" height="500" id="one">
<g id="container">
    <rect id ="rect" x="0" y="0" width="0" height="0" fill="pink"
          stroke="blue" stroke-width="2" />

</g> 
```

现在我应该怎么做才能以字符串的形式从 to 获取所有代码，我可以打印它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T05:01:39.987

To get the equivalent of `innerHTML` in SVG you must first serialize the SVG, it is done like this:

```
​var svg = document.querySelector("svg");
var serializer = new XMLSerializer();
var string = serializer.serializeToString(svg);​ 
```

You can see an example here:

[http://jsfiddle.net/rrPwS/](http://jsfiddle.net/rrPwS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T02:14:50.353

```
//in your javascript:

function getMyString()  {    
  var theStringIWant = document.getElementById("container").innerHTML;
  d.getElementbyId('theBox').value = theStringIWant
}

//and in your HTML:

<form>
  <textarea id="theBox" rows="2" cols="60">Here's the string</textarea>
  <input type="button" value="get the string" onclick="getMyString()" /> 
</form> 
```

# php - Joomla 和 Jomsocial 2.6- 我需要在单个站点中的西班牙语和英语版本

> ID：13887608
> 
> 赞同：-1
> 
> 时间：2012-12-14T23:20:45.987
> 
> 标签：php, joomla, multilingual, jomsocial

希望你们是好朋友。

我已经在我的网站中安装了 Joomla，现在我安装了社交插件 Jomsocial；问题是我用英语安装了它，但现在我想用西班牙语安装它，但要保留两种语言，我的意思是说我将有一个指向西班牙语版本的链接和其他英语版本的链接，但显然我需要分享保持所有用户连接的数据库（所有英语和西班牙语注册一起），这可能吗？关于如何做到这一点的任何想法？我已经有了西班牙语版本，但不确定是否必须通过扩展管理器进行正常安装，然后进行一些代码更改。

我真的很感谢你的帮助，如果需要一些代码更改，我知道一些 php，我的意思是，如果你建议我改变一些东西。

有一个美好的夜晚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:50:37.303

Jom social 有一个内置的西班牙语语言包，您必须安装它（可以在[这里](http://www.jomsocial.com/customize/addons/languages)找到）。还要安装主要的 Joomla 语言包（从[这里](http://community.joomla.org/translations/joomla-16-translations.html)）。

然后，您可以使用多语言插件在 Joomla 中本地处理该站点（您需要启用此功能）。

或者安装一个组件，比如 JoomFish（我相信 2.5 版本现在只是付费会员的东西 - 但免费的可能很快就会出现）或 FaLang（免费但我个人觉得不太好）。[JED](http://extensions.joomla.org/)上还有其他可用的组件，它们将比原生 Joomla 插件更好地管理翻译。但是，以上两个语言文件都需要安装！

# optimization - Branch and Bound - 存储什么

> ID：13887612
> 
> 赞同：1
> 
> 时间：2012-12-14T23:20:55.010
> 
> 标签：optimization, branch-and-bound

我读过不止一本书（包括 Wolsey），在实现分支定界算法时，不需要存储整个树，只需要存储活动节点的列表（据我所知，叶节点）。

问题是，如果我没有每个祖先的边界，我无法理解如何在分支后计算出新的边界。

对此进行一些澄清将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T06:25:24.863

好的，让我们举个例子。假设您正在实现一个相当幼稚的整数程序求解器，它试图通过求解其 LP 松弛来求解二进制整数程序，如果它没有得到整数解，则在某个变量上分支。假设您有一个最大化问题。

让我们考虑一下恰好在一个分支之后会发生什么。你解决了根子问题，并假设它给你一个目标值为 10 的分数解。然后你在一个变量上进行分支，给你一个最优目标值为 9 的左子问题和一个最优目标值为 8 的右子问题。

我们从根子问题中得到了 10 的全局界限。我们还知道每个积分解都存在于左子问题或右子问题中，并且我们知道左子问题没有优于 9 的解，右子问题没有优于 8 的子问题。那么没有优于 9 的解到根子问题，即使根 LP 松弛不足以告诉我们这一点。

通常，您的最佳全局界限是任何*活动*子问题的最差界限。深思熟虑的子问题是无关紧要的，因为它们不能包含比您的现任者具有更好的客观价值的可行解决方案。已分支的子问题无关紧要，因为它们的边界应该由其子问题中最弱的边界支配。

# ios - 故事板页面上的控件何时可用于获取框架信息？

> ID：13887615
> 
> 赞同：0
> 
> 时间：2012-12-14T23:21:16.147
> 
> 标签：ios, uiview, storyboard, viewdidload

我正在使用带有故事板和 ARC 的 iOS 6。

我的故事板上有一个 UIView，我想用它来定位和调整大小 - 我已经通过 Ctrl 拖放为我的控制器中的控件创建了一个 IBOutlet，所以我知道它已连接。

现在我想尝试从控制器中引用这个 UIView，这样我就可以在那个 UIView 中动态创建子视图，并且定位得当。

我正在尝试从 viewDidLoad 中访问 UIView，如下所示

```
CGRect rect = self.myView.frame; 
```

...但矩形总是以 0、0、0、0 出现。myView 在头文件中定义为：

```
@property (weak, nonatomic) IBOutlet UIView *myView; 
```

我认为当您进入 viewDidLoad 时，情节提要中的所有控件都已初始化。如果不是这种情况，我应该把代码放在哪里使用 UIView 的框架来创建我的子视图？

提前致谢。

# mysql - 选择查询中的 MySQL IF ELSEIF

> ID：13887616
> 
> 赞同：96
> 
> 时间：2012-12-14T23:21:19.260
> 
> 标签：mysql, if-statement

我正在尝试根据用户选择的数量来选择产品的不同价格。这是我正在处理的查询（它有语法错误）：

```
 select id, 
    (SELECT 
    IF(qty_1<='23',price,1)
    ELSEIF(('23'>qty_1 && qty_2<='23'),price_2,1)
    ELSEIF(('23'>qty_2 && qty_3<='23'),price_3,1)
    ELSEIF('23'>qty_3,price_4,1)
    END IF) as total 
 from product; 
```

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2012-12-15T01:06:26.750

你有你在[这样](http://dev.mysql.com/doc/refman/5.0/en/if.html)的存储过程中使用的东西作为参考，但它们不打算像你现在那样使用。您可以使用`IF`如图所示`duskwuff`。但是`Case`声明对眼睛更好。像这样：

```
select id, 
    (
    CASE 
        WHEN qty_1 <= '23' THEN price
        WHEN '23' > qty_1 && qty_2 <= '23' THEN price_2
        WHEN '23' > qty_2 && qty_3 <= '23' THEN price_3
        WHEN '23' > qty_3 THEN price_4
        ELSE 1
    END) AS total
 from product; 
```

这看起来更干净。我想你无论如何都不需要内在`SELECT`..

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-14T23:33:28.357

`IF()`在 MySQL 中是三元函数，而不是控制结构——如果第一个参数中的条件为真，则返回第二个参数；否则，它返回第三个参数。没有对应的`ELSEIF()`函数或`END IF`关键字。

与您所拥有的最接近的是：

```
IF(qty_1<='23', price,
  IF('23'>qty_1 && qty_2<='23', price_2,
    IF('23'>qty_2 && qty_3<='23', price_3,
      IF('23'>qty_3, price_4, 1)
    )
  )
) 
```

这些条件对我来说并不是全部都有意义（看起来其中一些可能会无意中颠倒过来？），但是在不知道你到底想要完成什么的情况下，我很难解决这个问题。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-04T22:55:48.227

当使用嵌套的 if() 函数时，我在 MySQL 5.1.72 中发现了一个错误......列变量的值（例如 qty_1）在第二个 if() 中为空白，使其无用。请改用以下构造：

```
case 
  when qty_1<='23' then price
  when '23'>qty_1 && qty_2<='23' then price_2
  when '23'>qty_2 && qty_3<='23' then price_3
  when '23'>qty_3 then price_4
  else 1
end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-25T12:00:46.977

对于您的问题：

```
SELECT id, 
   IF(qty_1 <= '23', price,
   IF(('23' > qty_1 && qty_2 <= '23'), price_2,
   IF(('23' > qty_2 && qty_3 <= '23'), price_3,
   IF(('23' > qty_2 && qty_3<='23'), price_3,
   IF('23' > qty_3, price_4, 1))))) as total 
FROM product; 
```

您可以使用 MySQL 中的`if - else`控制结构或`IF`函数。

参考：
[http ://easysolutionweb.com/sql-pl-sql/how-to-use-if-and-else-in-mysql/](http://easysolutionweb.com/sql-pl-sql/how-to-use-if-and-else-in-mysql/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-21T22:33:38.073

根据 Nawfal 的回答，IF 语句需要在一个过程中。我发现这篇文章展示了一个在程序中使用您的脚本同时仍在开发和测试的绝妙示例。基本上，您创建、调用然后删除该过程：

[https://gist.github.com/jeremyjarrell/6083251](https://gist.github.com/jeremyjarrell/6083251)

# java - 观察者模式 - 更新方法参数

> ID：13887617
> 
> 赞同：1
> 
> 时间：2012-12-14T23:21:21.803
> 
> 标签：java

我正在尝试使用传递给`notifyObservers`方法的对象的属性，但我似乎找不到访问它们的方法。我只能传入一个字符串，但我希望将更多选项传递给观察者。

这是设置示例；

```
public class UpdateInfo {

          public String data;
          public int debug = 0;
}

public class RXTXComms extends Observable {

         UpdateInfo info = new UpdateInfo();

         public void sendToBoard(String s) {
                .......

                UpdateInfo.data = "test";
                UpdateInfo.debug = 1;
                stChanged();
                notifyObservers(info);
          }  
}

public class Program implements Observer {

     public void update(Observable obj, Object arg) {
            String msg = ""; // Message to display on GUI

            if (arg instanceof UpdateInfo) {
                 //Print out the message and Debug int onto GUI...but how do I access them from `arg`
        }
    }

} 
```

如果我将类型`arg`设为 be `UpdateInfo`，那么我会收到一个编译器错误，即我的类`Program`不是抽象的......

这不是一个诚实、恰当的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T23:26:59.143

你需要铸造班级。

```
 UpdateInfo ui = (UpdateInfo) arg; 
```

在你里面`instanceof`应该做的伎俩。

Java的`Observable`/ `Observer`API设计的真的很烂，别用了。说真的 - 它不应该是一个抽象类，而是一个接口。

观察者模式非常简单，只需**使用完全类型安全的方式自行实现**即可。实际上，即使指定一个更好的接口版本也没有回报。例如，各种`Listener`s 只是 Java 中这种模式的另一个实例，它执行得更好：侦听器具有具有良好方法名称和额外数据的方法，`Adapter`如果要实现多个方法，则存在一个抽象，您通常会不需要所有这些（参见例如`MouseAdapter`）。

因此**，为具体用例重新实现模式**，而不是为未指定的“如果发生任何事情”案例。模式实际上是为了重新实现，而不是从模式库抽象继承。

# php - Magento - 如何在帐户创建中添加电话和传真

> ID：13887622
> 
> 赞同：0
> 
> 时间：2012-12-14T23:21:47.883
> 
> 标签：php, magento, input, e-commerce

我在url(/customer/account/create/)的customer base中添加了电话和FAX的字段

字段显示正常，发生的情况是当客户填写这些字段并创建帐户时，当我访问管理选项卡时，管理客户数据（电话和传真）不显示。

我认为这没有正确写入数据库。

有谁知道丢失了什么？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T10:52:46.593

实际上，我猜您只是在 phtml 页面中创建了输入和标签，但没有与数据库连接。

请检查我的答案，[这](https://stackoverflow.com/questions/13868175/magento-customer-attributes-with-signup-form/13868259#13868259) 可能有助于使用分机为客户传真和电话创建两个属性

你将完成任务。

祝你好运。

# mysql - MySQL 中的“子列”

> ID：13887626
> 
> 赞同：0
> 
> 时间：2012-12-14T23:22:07.933
> 
> 标签：mysql, phpmyadmin

我有一个项目想法，如果存在的话会简单得多；是否可以在 MySQL 中创建子列？

这是我的意思的一个例子，以表格的形式：

```
+--------+---------------+
|        |    Weekday    |
|  Time  +-------+-------+
|        |  1ST  |  2ND  |
+--------+-------+-------+
| 8:00   | Jim   | Bob   |
| 9:00   | Steve | Jim   |
| 10:00  | Tod   | Rick  |
+--------+-------+-------+ 
```

我必须为一周中的每一天指定主要和次要联系人。我认为在周日、周六等下有“小学”和“中学”会很容易。

我的一个朋友建议这样的事情是可能的，这让我有了这个追求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:53:55.990

首先认为所有数据库的目标都是关于存储和操作数据，无论数据库类型如何。以及如何向用户显示数据将在应用程序级别完成。在应用程序级别，数据可以显示为表格、网格、图表或任何您想要的。

我认为您错过了有关此目标的概念。

# python - Python获取硬盘信息

> ID：13887631
> 
> 赞同：1
> 
> 时间：2012-12-14T23:22:36.353
> 
> 标签：python, linux

有人可以阐明我可以使用哪些命令从硬盘驱动器获取以下内容。最好有一个内部 Python 模块来解决这个问题，但可能没有。我确实有获取任何信息的 root 访问权限，但我不想下载额外的包，所以：

`procinfo`, `swapon`, `hdparm`,`hardinfo`不在图片中，在 Fedora 17 上不是默认设置，不确定其他发行版。

```
Index (Device 0, could be more)
Description (Full Name, Western Digital Black Edition.....)
InterfaceType (IDE, SCSI)
Manufacturer (Western Digital, Seagate, Maxtor)
Model (WDxxx)
Size (in KB, MB or GB)
Partitions (if Any) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T02:20:36.903

查看 sysfs。例如，对于我的 Ubuntu 12.04 系统上的第一个磁盘，大部分信息可以从以下文件和目录的存在中读取或推断：

*   /sys/block/sda/dev
*   /sys/block/sda/device/scsi_device
*   /sys/block/sda/device/vendor（实际上是“ATA”，暗示 SATA，而不是预期的“Western Digital”）
*   /sys/block/sda/设备/型号
*   /sys/块/sda/大小
*   /sys/block/sda/sda1
*   /sys/块/sda/sda2
*   /sys/block/sda/sda5

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T23:30:39.633

我想我找到了一个很好的终端命令，它似乎提供了我要求的很多信息，还有更多。

```
fdisk -l 
```

现在的问题仍然是如何解析这么多数据！

输出自`fdisk-l`

```
Disk /dev/sda: 750.2 GB, 750156374016 bytes
255 heads, 63 sectors/track, 91201 cylinders, total 1465149168 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0xf4375e1b

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048      206847      102400    7  HPFS/NTFS/exFAT
/dev/sda2          206848   895822804   447807978+   7  HPFS/NTFS/exFAT
/dev/sda3      1151823870  1465147391   156661761    5  Extended
/dev/sda4       895823872  1100623871   102400000   83  Linux
/dev/sda5      1151823872  1435025407   141600768   83  Linux
/dev/sda6      1435027456  1465147391    15059968   82  Linux swap / Solaris

Partition table entries are not in disk order

Disk /dev/sdb: 1000.2 GB, 1000204886016 bytes
255 heads, 63 sectors/track, 121601 cylinders, total 1953525168 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x3ac08bdc

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048  1953521663   976759808    7  HPFS/NTFS/exFAT

Disk /dev/sdc: 16.0 GB, 16008609792 bytes
255 heads, 63 sectors/track, 1946 cylinders, total 31266816 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00000000

   Device Boot      Start         End      Blocks   Id  System
/dev/sdc1              32    31266815    15633392    7  HPFS/NTFS/exFAT 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-09T13:11:52.803

这可能有点晚了，但是：

如果 OP 只想列出连接到系统的硬盘驱动器，请`parted (in bash):`在我的系统上使用输出：

```
[root@Bugs]#parted -m /dev/sda print devices
/dev/sda (80.0GB) 
/dev/sdb (128GB)    
/dev/sdc (6001GB)
/dev/sdd (4001GB)
/dev/sde (8002GB)
/dev/sdf (1500GB)
/dev/sdi (4001GB)
/dev/sdg (4001GB)
/dev/sdh (8002GB)
[root@Bugs]# 
```

请注意，parted 需要指定设备，但实际上并不需要。此外，对于某些驱动器，给出的实际大小为 +xGB。这些似乎适用于驱动器 => 4TB。

由于这是一个 bash 命令，python 有各种工具来运行这些命令。这对我来说是最简单的答案/结果，我猜是 OP。希望这对将来的某人有所帮助。

# c# - 从应用程序打开多个歌曲文件

> ID：13887634
> 
> 赞同：1
> 
> 时间：2012-12-14T23:23:18.973
> 
> 标签：c#, windows-8

我正在编写一个简单的媒体服务器应用程序。我希望用户能够在我的应用程序中构建歌曲播放列表，然后能够点击“打开”，然后打开默认媒体播放器（在我的情况下是 Windows 8 音乐应用程序）。目前，我正在使用 Process.Start() 打开应用程序，但这只会打开一首歌曲。有谁知道如何将歌曲列表传递给将充当播放队列的媒体播放器（作为参数？）？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T18:39:46.330

您无法使用当前 SDK 创建或修改 SongCollection。

但是您可以将歌曲路径保存在一个数组中，并在最后一次完成后使用计时器开始下一首歌曲

您可以使用 TagLib Sharp 计算每首歌曲的持续时间

[http://developer.novell.com/wiki/index.php/TagLib%5FSharp](http://developer.novell.com/wiki/index.php/TagLib%5FSharp)

它公开了 TagLib.AudioProperties.Duration

# c# - 无法使用 Eval 将查询字符串传递给 genericHandler

> ID：13887635
> 
> 赞同：0
> 
> 时间：2012-12-14T23:23:35.533
> 
> 标签：c#, asp.net, visual-studio-2010, asp.net-4.0, generic-handler

我正在将查询字符串从数据库传递给我的通用处理程序以进行图像转换。我的设计器页面出现以下问题

```
 <asp:TemplateField>
        <ItemTemplate>
      <asp:Image ID="Image1" runat="server" ImageUrl='<%# ImageHandler.ashx?IMG_ID=Eval("Image_ID")+ &IMG_type_ID=Eval("Type_ID_FK") %>' />
          </ItemTemplate>
       </asp:TemplateField> 
```

我在 ImageUrl 上遇到问题。

下面是我的主要设计师代码

```
 <form id="form1" runat="server">
<div style="width: 960px; height: 100%; padding: 0; margin: 0; font-size: 0.875em;
    line-height: 1.785em;">
    <div>
        <asp:Panel ID="Panel1" runat="server">
            <h1>
                Welcome To Blue Marine! Please login with your account</h1>
            <br />
            <h2>
                Login Area
            </h2>
            <div>
                Username
                <asp:TextBox ID="txt_username" runat="server" ControlToValidate=" txt_username"></asp:TextBox><span>*</span><asp:RequiredFieldValidator
                    ID="RequiredFieldValidator1" runat="server" ErrorMessage="Please Enter Valid Entry"
                    ControlToValidate="txt_username"></asp:RequiredFieldValidator>
                <br />
                Password
                <asp:TextBox ID="txt_password" runat="server"></asp:TextBox><span>*</span><asp:RequiredFieldValidator
                    ID="RequiredFieldValidator2" runat="server" ControlToValidate="txt_password"
                    ErrorMessage="Please Enter Valid Entry"></asp:RequiredFieldValidator>
                <br />
                <div style="margin-left: 90px">
                    <asp:Button ID="btn_Submit" runat="server" Text="Submit" OnClick="btn_Submit_Click" />
                </div>
        </asp:Panel>
    </div>
    <div>
        <asp:Panel ID="Panel2" runat="server" Visible="False">
            <div style="text-align: right">
                Hello!
                <asp:Label ID="lb_username" runat="server" Text="Label"></asp:Label>
                <br />
                <div>
                    <asp:LinkButton ID="Linkbtn_signout" runat="server" OnClick="Linkbtn_signout_Click">SignOut</asp:LinkButton>
                </div>
            </div>
            <div style="text-align: left">
                <h1>
                    Image Upload Section</h1>
                <p>
                    You can upload Images here One at a time Format Supported JPG,BMP,PNG
                    <br />
                </p>
                &nbsp;<asp:TextBox ID="txtName" runat="server"></asp:TextBox>
                <asp:FileUpload ID="FileUpload1" runat="server" /><br />
                <asp:SqlDataSource ID="SqlDataSource_ImageType" runat="server" ConnectionString="<%$ ConnectionStrings:db_string2 %>"
                    SelectCommand="SELECT [Type_ID_PK], [TypeName] FROM [ImageType]"></asp:SqlDataSource>
                <br />
                Select Image Type&nbsp;
                <asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="SqlDataSource_ImageType"
                    DataTextField="Type_ID_PK" DataValueField="Type_ID_PK">
                </asp:DropDownList>
                <span>*</span>
                <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ErrorMessage="Select Image Type"
                    ControlToValidate="DropDownList1"></asp:RequiredFieldValidator>
                <br />
                <asp:Button ID="btnUpload" runat="server" OnClick="btnUpload_Click" Text="Upload" /><br />
                <br />
                <asp:Label ID="lblMessage" runat="server"></asp:Label><br />
                <br />
                <br />
                <div style="text-align: center; margin-left: 170px">
                    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource_DbImage"
                        EnableModelValidation="True" AllowPaging="True" AllowSorting="True" Width="566px"
                        DataKeyNames="Image_ID,Type_ID_FK">
                        <Columns>
                            <asp:BoundField DataField="Image_ID" HeaderText="Image_ID" InsertVisible="False"
                                ReadOnly="True" SortExpression="Image_ID" />
                            <asp:BoundField DataField="Type_ID_FK" HeaderText="Type_ID_FK" SortExpression="Type_ID_FK"
                                ReadOnly="True" />
                            <asp:BoundField DataField="ImageName" HeaderText="ImageName" SortExpression="ImageName" />
                            <asp:TemplateField>
                                <ItemTemplate>
                                    <asp:Image ID="Image1" runat="server" ImageUrl='<%# ImageHandler.ashx?IMG_ID=Eval("Image_ID")+ &IMG_type_ID=Eval("Type_ID_FK") %>' />
                                </ItemTemplate>
                            </asp:TemplateField>
                        </Columns>
                    </asp:GridView>
                </div>
                <asp:SqlDataSource ID="SqlDataSource_DbImage" runat="server" ConnectionString="<%$ ConnectionStrings:db_string2 %>"
                    SelectCommand="SELECT * FROM [Image_Link]"></asp:SqlDataSource>
            </div>
        </asp:Panel>
    </div>
</div>
</form> 
```

我背后的代码：

```
 public partial class Admin : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (Session.Count > 0)
        {
            try
            {
                string id = Convert.ToString(Session["UserID"]);
                if (id != "")
                {
                    if (!IsPostBack)
                    {
                        Panel1.Visible = false;
                        Panel2.Visible = true;
                    }
                    else
                    {
                        Panel1.Visible = false;
                        Panel2.Visible = true;
                    }
                }
            }
            catch (NullReferenceException n)
            {

            }

        }
        else
        {
            if (!IsPostBack)
            {
                Panel1.Visible = true;
            }
        }
    }

    protected void btn_Submit_Click(object sender, EventArgs e)
    {
        Session.Clear();
        bool result = Check_User_Login(txt_username.Text, txt_password.Text);
        if (result == true)
        {
            Panel1.Visible = false;
            Panel2.Visible = true;
        }
        else
        {
            Response.Write("<script>alert('Admin Account Does not exist!');</script>");
        }

    }

    public bool Check_User_Login(string para_name, string para_password)
    {
        string db_username, dp_password;
        Web_Eng.DatabaseConection.comm = new SqlCommand("Select Top  1 a.Admin_ID From [Admin] a  Order By a.Admin_ID Desc;", Web_Eng.DatabaseConection.connect());
        int id = (int)Web_Eng.DatabaseConection.comm.ExecuteScalar();
        for (int i = 1; i <= id; i++)
        {
            Web_Eng.DatabaseConection.comm.CommandText = "select a.Admin_Name,a.[Password] from [Admin] a where a.Admin_ID=" + i + ";";

            #region use to retrieve whole row from database

            Web_Eng.DatabaseConection.entrieRow_Reader = Web_Eng.DatabaseConection.comm.ExecuteReader();
            while (Web_Eng.DatabaseConection.entrieRow_Reader.Read())
            {

                db_username = Web_Eng.DatabaseConection.entrieRow_Reader["Admin_Name"].ToString();
                dp_password = Web_Eng.DatabaseConection.entrieRow_Reader["Password"].ToString();

                if (db_username == para_name && dp_password == para_password)
                {

                    Session["UserID"] = i;
                    lb_username.Text = db_username;
                    Web_Eng.DatabaseConection.entrieRow_Reader.Close();
                    return true;

                }

            }
            Web_Eng.DatabaseConection.entrieRow_Reader.Close();

            #endregion
        }
        return false;
    }

    protected void Linkbtn_signout_Click(object sender, EventArgs e)
    {
        Session.Clear();
        Page.Response.Redirect("Index.aspx");
    }

    protected void btnUpload_Click(object sender, EventArgs e)
    {
        string strImageName = txtName.Text.ToString();
        if (FileUpload1.PostedFile != null && FileUpload1.PostedFile.FileName != "")
        {
            byte[] imageSize = new byte[FileUpload1.PostedFile.ContentLength];
            HttpPostedFile uploadedImage = FileUpload1.PostedFile;
            uploadedImage.InputStream.Read(imageSize, 0, (int)FileUpload1.PostedFile.ContentLength);

            // Create SQL Command 
            int id=Convert.ToInt32(DropDownList1.SelectedItem.Value);
            int result = AddImage_DB(strImageName, id, imageSize);
            if (result > 0)
                lblMessage.Text = "File Uploaded";
            GridView1.DataBind();
        }
    }

    public int AddImage_DB(string para_imagename, int para_typeID, byte[] para_image)
    {
        try
        {
            //DatabaseConection.cmd.con;
            Web_Eng.DatabaseConection.cmd.Connection = Web_Eng.DatabaseConection.connect();
            Web_Eng.DatabaseConection.cmd = new SqlCommand("Insert_Image_Table", Web_Eng.DatabaseConection.connect());
            Web_Eng.DatabaseConection.cmd.CommandType = CommandType.StoredProcedure;
            Web_Eng.DatabaseConection.cmd.Parameters.Add(new SqlParameter("@typeID", SqlDbType.Int)).Value = para_typeID;
            Web_Eng.DatabaseConection.cmd.Parameters.Add(new SqlParameter("@ImageName", SqlDbType.NVarChar)).Value = para_imagename;
            Web_Eng.DatabaseConection.cmd.Parameters.Add(new SqlParameter("@convertedImage", SqlDbType.Image, para_image.Length)).Value = para_image;
            Web_Eng.DatabaseConection.cmd.ExecuteNonQuery();
            return 1;
        }
        catch (Exception er)
        {

            Response.Write("<script>alert('Error');</script>");
            return 0;
        }
    }
} 
```

我的通用处理程序

```
 public class ImageHandler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {

        // Create SQL Command 
        Web_Eng.DatabaseConection.comm = new SqlCommand("Select img.ImageName,img.CompleteImage from Image_Link img where img.Image_ID=@IMG_ID and img.Type_ID_FK=@IMG_type_ID;", Web_Eng.DatabaseConection.connect());
        Web_Eng.DatabaseConection.cmd.CommandType = System.Data.CommandType.Text;

        // Img ID
        SqlParameter ImageID = new SqlParameter("@IMG_ID", System.Data.SqlDbType.Int);
        ImageID.Value = context.Request.QueryString["IMG_ID"];

        // iMG Type ID
        SqlParameter Image_Type_ID = new SqlParameter("@IMG_type_ID", System.Data.SqlDbType.Int);
        Image_Type_ID.Value = context.Request.QueryString["IMG_type_ID"];

        // Adding Parameters
        Web_Eng.DatabaseConection.cmd.Parameters.Add(ImageID);
        Web_Eng.DatabaseConection.cmd.Parameters.Add(Image_Type_ID);

        SqlDataReader dReader = Web_Eng.DatabaseConection.cmd.ExecuteReader();
        dReader.Read();
        context.Response.BinaryWrite((byte[])dReader["CompleteImage"]);
        dReader.Close();
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

不知道我在将查询字符串传递给我的处理程序时做错了什么

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:37:38.267

谢谢大家我已经解决了我自己的问题我正在为可能有同样问题的其他人发布答案，这将对他们有所帮助

只需更换

```
<asp:Image ID="Image1" runat="server" ImageUrl='<%# ImageHandler.ashx?IMG_ID=Eval("Image_ID")+ &IMG_type_ID=Eval("Type_ID_FK") %>' /> 
```

经过

```
<asp:Image ID="Image1" runat="server" ImageUrl='<%# "ImageHandler.ashx?IMG_ID=" + Eval("Image_ID")+"&IMG_type_ID="+Eval("Type_ID_FK")%>' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T01:53:24.927

尝试以下语法：

```
<asp:Image ID="Image1" runat="server" ImageUrl='ImageHandler.ashx?IMG_ID=<%# Eval("Image_ID")+&IMG_type_ID=Eval("Type_ID_FK") %>' /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T09:00:34.613

```
public void ProcessRequest(HttpContext context)
    {
        using (SqlConnection connection = new SqlConnection())
        {
            connection.ConnectionString = "Server=ESLHP280G1P\\SQLEXPRESS; Database=Sample; user id=sa; password=sa@123";
            connection.Open();
            SqlCommand cmd = new SqlCommand("tblImage_Retrieve", connection);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@id", context.Request.QueryString["id"]);
            SqlDataReader dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                byte[] bytes = (byte[])dr["photo"];
                if (bytes.Length > 0 && bytes != null)
                {
                    context.Response.ContentType = "jpg";
                    context.Response.BinaryWrite(bytes);
                }
            }
        }
    } 
```

# jquery - 附加列表项不会自行删除

> ID：13887636
> 
> 赞同：1
> 
> 时间：2012-12-14T23:23:36.720
> 
> 标签：jquery, html-lists

我有一个带有一个预先存在的按钮的列表，当它被点击时会自行删除。当点击添加按钮时，另一个按钮被添加到列表中，但这一次，即使它属于同一类，附加按钮也不会自行删除。
[http://jsfiddle.net/PEh6H/](http://jsfiddle.net/PEh6H/)
这是一些示例代码，因为我必须包含它：

```
 $(function() {
        $("#add").on('click', addListItem);
            $(".delete").on('click', deleteItem);
            });
        function deleteItem(){
            $(this).parent().remove();
        }    
        function addListItem(){
        $("#todolist").append('<li><button class="delete">This one doesn\'t</button></li>');
        } 
```

和html：

```
<ul id="todolist">
    <li><button class="delete">This one works</button></li>
    </ul>
    <button id="add">Add</button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T23:25:45.227

您应该从元素或文档对象的静态父对象之一委托事件。

```
$('#todolist').on('click', '.delete', deleteItem); 
```

[http://jsfiddle.net/5RkHd/](http://jsfiddle.net/5RkHd/)

# c++ - 函数签名的专用模板

> ID：13887637
> 
> 赞同：4
> 
> 时间：2012-12-14T23:23:39.920
> 
> 标签：c++, templates, template-specialization, function-signature

在该测试代码中：

```
#include <string>
#include <iostream>

using namespace std;

template <typename T> class Signal;

template <typename T, typename U>
class Signal<T (U)>
{
public:
  Signal<T (U)>(T (*ptr)(U))
  {
  }
};

void Print(string const& str)
{
  cout << str << endl;
}

int main(int argc, char *argv[])
{
  Signal<void (string const&)> sig = &Print;
  return 0;
} 
```

为什么我要写`template <typename T> class Signal;`？

为什么我必须指定它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T23:46:49.883

你不必*做*你正在做的事情，但这是最灵活的方法。具有专业化的单参数模板如下所示：

*   在一种类型上参数化的模板...

    ```
    template <typename> struct Foo; 
    ```

*   ...但它只为函数类型定义：

    ```
    template <typename R>
    struct Foo<R()> { /* ... */ };

    template <typename R, typename A1>
    struct Foo<R(A1)> { /* ... */ };

    template <typename R, typename ...Args>
    struct Foo<R(Args...)> { /* ... */ }; 
    ```

另一种方法是对函数的签名进行硬编码：

*   存储单参数函数的函数指针的类模板：

    ```
    template <typename R, typename A>
    struct Bar
    {
        R (*fp)(A);
        Bar(R(*f)(A)) : fp(f) { }
        // ...
    }; 
    ```

如您所见，第一种方法更为通用，因为我们可以专门`Foo`针对我们喜欢的*任何*函数类型。相比之下，第二个示例中的直接模板与函数签名的细节错综复杂地联系在一起，不容易泛化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T23:34:00.660

您正在创建一个`Signal`将任意类型组合`T`到`U`表单中的专业化`T(U)`。这被放在一起作为特化`Signal<T(U)>`：参数中只有一种类型，这就是我们前向声明`Signal`只采用一种类型的原因`T`。如果没有该声明，这是不可能的。

这是一个简单的例子：

```
template <typename T> struct A;

template <typename T, typename U> struct A<T(U)> {

};

int main() {

    A<void(int)> a;

} 
```

类型`void`和`int`分别绑定到类型`T`和`U`。这被组合到用于专门化类`void(int)`的主要声明中的类型中。`A`

# ruby-on-rails - 在 Rails 中，如何以可与 ActiveSupport::TimeZone[zone].parse() 一起使用的格式获取当前时区 (Time.zone)？

> ID：13887643
> 
> 赞同：33
> 
> 时间：2012-12-14T23:24:04.640
> 
> 标签：ruby-on-rails, timezone

方法如何获取当前 Time.zone 并将其转换为可供使用的格式`ActiveSupport::TimeZone[some_zone].parse()`？

Time.zone.to_s 返回一个不能与`ActiveSupport::TimeZone[zone].parse()`

`Time.zone.to_s`返回`"(GMT-08:00) Pacific Time (US & Canada)"`

但是`ActiveSupport::TimeZone["(GMT-08:00) Pacific Time (US & Canada)"]`是`nil`。

```
ActiveSupport::TimeZone["(GMT-08:00) Pacific Time (US & Canada)"]
=> nil

ActiveSupport::TimeZone["Pacific Time (US & Canada)"]
=> (GMT-08:00) Pacific Time (US & Canada) 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-15T00:30:34.413

使用`Time.zone.name`，而不是`Time.zone.to_s`

```
[1] pry(main)> Time.zone.to_s
=> "(GMT-05:00) Eastern Time (US & Canada)"
[2] pry(main)> Time.zone.name
=> "Eastern Time (US & Canada)"
[3] pry(main)> ActiveSupport::TimeZone[Time.zone.name]
=> (GMT-05:00) Eastern Time (US & Canada) 
```

* * *

至于我是如何得到这个的*（根据要求）*，我只知道该`name`方法存在于`Time.zone`. 如果我不知道这一点，我会检查文档。如果它不像你说的那样在那里*（它是，**[here](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html)**）*，我通常用**[Pry](http://pryrepl.org/)**检查类/模块/对象。Pry 是 irb 的替代品，它可以让我做类似的事情

```
[1] pry(main)> cd Time.zone
[2] pry(#<ActiveSupport::TimeZone>):1> ls -m
Comparable#methods: <  <=  ==  >  >=  between?
ActiveSupport::TimeZone#methods: <=>  =~  at  formatted_offset  local  local_to_utc  name  now  parse  period_for_local  period_for_utc  to_s  today  tzinfo  utc_offset  utc_to_local
self.methods: __pry__
[3] pry(#<ActiveSupport::TimeZone>):1> name
=> "Eastern Time (US & Canada)" 
```

`ls -m`在上面的线上`[2]`打印对象上的方法*（如果你向右滚动，你会看到`name`那里列出）*。你可以看到`[3]`我可以`name`直接调用`Time.zone`我所在的对象并获得你正在寻找的输出。

# c# - 使用 SharpSVN 的 SVN 存储库身份验证 - 凭证不起作用

> ID：13887645
> 
> 赞同：10
> 
> 时间：2012-12-14T23:24:16.653
> 
> 标签：c#, sharpsvn

我在 C# 中有以下代码：

```
1\.  public static void Main(string[] args) {
2\.  Uri repository = new Uri("https://svnserver:port/svn/Src/trunk");
3\.  using (SvnClient client = new SvnClient()) {                
4\.    client.Authentication.Clear();
5\.    client.Authentication.DefaultCredentials = new System.Net.NetworkCredential("user", "pass");
6.
7\.    System.Collections.ObjectModel.Collection<SvnLogEventArgs> logEntries;
8\.    SvnLogArgs logArgs = new SvnLogArgs();
9\.    logArgs.Limit = 1;
10\.   client.GetLog(repository, logArgs, out logEntries);
11\.   }
12\. } 
```

如果我删除第 4 行和第 5 行，则此代码可以正常工作。我假设它以某种方式使用了我在 TortoiseSVN 本地保存的凭据。但是，我想在服务器环境中运行它，我需要专门传入用户名/密码。但是，一旦我尝试输入登录凭据，我就会在第 10 行收到以下错误：

```
SharpSvn.SvnRepositoryIOException was unhandled
Message: Unable to connect to a repository at URL 
```

我在这里做错了什么？我已验证我尝试使用的用户名/密码是否有效。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-15T00:57:00.723

我找到了答案......在第 5 行之后添加：

```
client.Authentication.SslServerTrustHandlers += delegate(object sender, SvnSslServerTrustEventArgs e) {
                    e.AcceptedFailures = e.Failures;
                    e.Save = true; // Save acceptance to authentication store
                }; 
```

# regex - 用于在模式中获取字符的正则表达式

> ID：13887652
> 
> 赞同：0
> 
> 时间：2012-12-14T23:24:53.550
> 
> 标签：regex, replace

我有一个像

（任何文本）XX:XX AM - XX:XX PM（任何文本）

其中 X 是 0 到 9 之间的数字，数字可以是 1 或两个字符（例如：12:45 或 1:20）

我需要找到一个正则表达式来找到该模式之间的 - （破折号）。

我是新手，但这是我找到上述模式的简单正则表达式：

> ```
> ([\d]{1,2}:[\d]{1,2}|[\d]{1,2}:[\d]{1,2} [aApP][mM])(.*?)([\d]{1,2}:[\d]{1,2}|[\d]{1,2}:[\d]{1,2} [aApP][mM]) 
> ```

这并没有让我找到在模式中间找到破折号的最终目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:35:42.017

[在这种情况下，积极的后视](http://www.regular-expressions.info/lookaround.html)将是最短/最简单的正则表达式，但它并非无处不在，因此取决于您使用的语言/环境。

仅匹配`-`以下内容`AM`：

```
(?<=AM )- 
```

根据数据中误报的可能性，这可能需要加强，例如也`HAM - CHEESE`将匹配，因此使用积极的后视和前瞻：

```
(?<=:\d{2} AM )-(?= \d{1,2}:\d{2} PM)

?<=      # Positive look-behind 
:        # Match colon
\d{2}    # Followed by 2 digits (and a space)
AM       # Followed by AM (and a space)
-        # Match hyphen if look-behind is met
?=       # Positive look-ahead
 \d{1,2} # Match either 1 or 2 digits
:        # Followed by a colon 
\d       # Followed by 2 more digits 
 PM      # Finally a space and PM 
```

这应该排除任何误报。

演示`grep`：

```
$ echo '(any text) XX:XX AM - XX:XX PM (any text)' | grep -Po '(?<=AM )-'
-

$ echo '12:45 AM - 1:20 PM' | grep -Po '(?<=:\d{2} AM )-(?= \d{1,2}:\d{2} PM)'
- 
```

* * *

另一种选择是使用捕获组，以下`regexp`将匹配整行并且`-`将在捕获组 1 中匹配：

```
^.*\d{1,2}:\d{2}\sAM\s(-)\s\d{1,2}:\d{2}\sPM.*$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:34:02.953

这将找到破折号：

```
(?i)(?<\d\d?:\d\d?\s*[ap]m\s*).*?(?=\s*\d\d?:\d\d?\s*[ap]m) 
```

这使用环视，所以整个正则表达式只匹配连接字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T23:45:48.343

```
/\d\d:\d\d [ap]m (.) \d\d:\d\d [ap]m/i 
```

# c# - 对于具有更多字段的类型，通过数组访问字段的速度较慢

> ID：13887656
> 
> 赞同：9
> 
> 时间：2012-12-14T23:25:44.023
> 
> 标签：c#, arrays, performance, .net-4.5

以下简短但完整的示例程序

```
const long iterations = 1000000000;

T[] array = new T[1 << 20];
for (int i = 0; i < array.Length; i++)
{
    array[i] = new T();
}

Stopwatch sw = Stopwatch.StartNew();
for (int i = 0; i < iterations; i++)
{
    array[i % array.Length].Value0 = i;
}

Console.WriteLine("{0,-15}  {1}   {2:n0} iterations/s",
    typeof(T).Name, sw.Elapsed, iterations * 1000d / sw.ElapsedMilliseconds); 
```

替换`T`为以下类型

```
class SimpleClass                   struct SimpleStruct
{                                   {
    public int Value0;                  public int Value0;
}                                   }

class ComplexClass                  struct ComplexStruct
{                                   {
    public int Value0;                  public int Value0;
    public int Value1;                  public int Value1;
    public int Value2;                  public int Value2;
    public int Value3;                  public int Value3;
    public int Value4;                  public int Value4;
    public int Value5;                  public int Value5;
    public int Value6;                  public int Value6;
    public int Value7;                  public int Value7;
    public int Value8;                  public int Value8;
    public int Value9;                  public int Value9;
    public int Value10;                 public int Value10;
    public int Value11;                 public int Value11;
}                                   } 
```

在我的机器上产生以下有趣的结果（Windows 7 .NET 4.5 32 位）

```
SimpleClass 00:00:10.4471717 95,721,260 次迭代/秒
ComplexClass 00:00:37.8199150 26,441,736 次迭代/秒
SimpleStruct 00:00:12.3075100 81,254,571 次迭代/秒
ComplexStruct 00:00:32.6140182 30,661,679 次迭代/秒

```

*问题1：*为什么`ComplexClass`比 慢这么多`SimpleClass`？经过的时间似乎随着类中字段的数量线性增加。写入具有很多字段的类的第一个字段与写入只有一个字段的类的第一个字段应该没有太大区别，不是吗？

*问题2：*为什么`ComplexStruct`比 慢`SimpleStruct`？看一下 IL 代码，`i`它直接写入数组，而不是写入本地实例`ComplexStruct`，然后复制到数组中。所以应该不会因为复制更多字段而产生开销。

*额外的问题：*为什么`ComplexStruct`比 快`ComplexClass`？

* * *

*编辑：*用更小的数组更新了测试结果，`T[] array = new T[1 << 8];`：

```
SimpleClass 00:00:13.5091446 74,024,724 次迭代/秒
ComplexClass 00:00:13.2505217 75,471,698 次迭代/秒
SimpleStruct 00:00:14.8397693 67,389,986 次迭代/秒
ComplexStruct 00:00:13.4821834 74,172,971 次迭代/秒

```

所以和之间几乎没有区别，`SimpleClass`和之间`ComplexClass`只有很小的区别。但是，和的性能显着下降。`SimpleStruct``ComplexStruct``SimpleClass``SimpleStruct`

* * *

*编辑：*现在有了`T[] array = new T[1 << 16];`：

```
SimpleClass 00:00:09.7477715 102,595,670 次迭代/秒
ComplexClass 00:00:10.1279081 98,745,927 次迭代/秒
SimpleStruct 00:00:12.1539631 82,284,210 次迭代/秒
ComplexStruct 00:00:10.5914174 94,419,790 次迭代/秒

```

for 的结果`1<<15`是 like `1<<8`，而 for 的结果`1<<17`是 like `1<<20`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T23:32:12.570

问题1的可能答案：

您的 CPU 一次将一页内存读入其缓存。

使用较大的数据类型，您可以在每个缓存页面上放置更少的对象。即使您只写入一个 32 位值，您仍然需要 CPU 缓存中的页面。使用较小的对象，您可以在下一次需要从主内存中读取之前通过更多循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T23:35:16.540

我没有文件可以证明这一点，但我想这可能是地方问题。作为在内存方面更广泛的复杂类，内核访问堆或堆栈上的遥远内存区域需要更长的时间。不过，客观地说，我不得不说你的措施之间的差异听起来真的很高，因为问题是系统的错误。

关于类和结构之间的区别，我也无法记录，但这可能是因为，出于与之前相同的原理，堆栈比堆区域更频繁地被缓存，导致缓存未命中率更低。

您是否运行过积极优化的程序？

编辑：我做了一个小测试`ComplexStruct`并使用`StructLayoutAttribute`with`LayoutKind.Explicit`作为参数，然后`FieldOffsetAttribute`在结构的每个字段中添加了一个 with 0 作为参数。`SimpleStruct`时间大大缩短了，我认为它们与's 的时间大致相同。我在调试模式下运行它，调试器打开，没有优化。虽然结构保留了它的字段，但它在内存中的大小被削减了，时间也是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T00:05:42.697

**答案 1**：因为 CPU 的缓存是固定大小的，所以`ComplexClass`速度较慢，因此一次可以放入缓存中的对象较少。基本上，由于从内存中获取所需的时间，您会看到增加。如果您进入缓存并降低 RAM 的速度，这可能会更清楚（极端）。`SimpleClass``ComplexClass`

**答案 2**：与答案 1 相同。

**奖励**：结构数组是结构的连续块，仅由数组指针引用。类数组是对类实例的连续引用块，由数组指针引用。由于类是在堆上创建的（基本上是有空间的地方），它们不在一个连续且有序的块中。虽然这对于优化空间非常有用，但不利于 CPU 缓存。因此，当迭代一个数组（按顺序）时，会有更多的 CPU 缓存未命中，其中包含指向大型类的指针的大数组，然后会有一个结构数组的按顺序迭代。

**为什么`SimpleStruct`要慢`SimpleClass`**：据我了解，结构有一定的开销（我被告知大约有 76 口）。我不确定它是什么或为什么存在，但我希望如果您使用本机代码（C++ 编译）运行相同的测试，您会看到该`SimpleStruct`数组的性能更好。这只是一个猜测。

* * *

不管怎样，这看起来很有趣。我今晚要试试。我会发布我的结果。是否有可能获得您的完整代码？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T02:06:45.893

我稍微修改了您的基准以删除模数，这可能是消耗大部分时间的原因，而且您似乎在比较字段访问时间，而不是 int 模数算法。

```
 const long iterations = 1000;
    GC.Collect();
    GC.WaitForPendingFinalizers();
    //long sMem = GC.GetTotalMemory(true);
    ComplexStruct[] array = new ComplexStruct[1 << 20];
    for (int i = 0; i < array.Length; i++) {
        array[i] = new ComplexStruct();
    }
    //long eMem = GC.GetTotalMemory(true);
    //Console.WriteLine("memDiff=" + (eMem - sMem));
    //Console.WriteLine("mem/elem=" + ((eMem - sMem) / array.Length));
    Stopwatch sw = Stopwatch.StartNew();
    for (int k = 0; k < iterations; k++) {
        for (int i = 0; i < array.Length; i++) {
            array[i].Value0 = i;
        }
    }
    Console.WriteLine("{0,-15}  {1}   {2:n0} iterations/s",
        typeof(ComplexStruct).Name, sw.Elapsed, (iterations * array.Length) * 1000d / sw.ElapsedMilliseconds); 
```

（替换每个测试的类型）。我得到了这些结果（数百万次内循环分配/秒）：

```
SimpleClass 357.1
SimpleStruct 411.5
ComplexClass 132.9
ComplexStruct 159.1 
```

就 Class vs Struct 版本而言，这些数字更接近我的预期。我认为复杂版本的较慢时间可以通过较大对象/结构的 CPU 缓存效应来解释。使用注释掉的内存测量代码表明结构版本消耗的总内存更少。在我注意到内存测量代码会影响结构与类版本的相对时间后，我添加了 GC.Collect。

# c - C中的结构'类型转换'错误？

> ID：13887659
> 
> 赞同：-1
> 
> 时间：2012-12-14T23:26:05.243
> 
> 标签：c, visual-c++

假设我`DATA`定义了一些结构。然后我尝试以下代码：

```
struct DATA data1, data2;
data2 = (DATA)(*(DATA))&data1); 
```

为什么在“类型转换”上出现错误 C2440？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:30:22.817

这部分是问题：

```
(DATA)&data1 
```

在这里，您将 make 的地址`data1`转换为指针 type `struct DATA *`。然后您尝试将其强制转换为非指针`struct DATA`类型，这可能是错误的原因。（提示：请在以后发布完整且未经编辑的错误消息。）

实际上，您根本不需要进行任何强制转换、指针地址处理或取消引用。只需将一个结构分配给另一个，编译器就会创建代码来进行正确的复制：

```
data2 = data1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T08:56:08.313

强制转换为结构类型是非法的。强制转换运算符指定的类型必须是`void`标量类型或标量类型（即算术或指针类型）。

这个：

```
data2 = data1; 
```

是一种更简单的方法来做我*认为*你正在尝试做的事情（很难说）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T00:20:27.310

正确的做法是：

```
struct DATA data1, data2;
data2 = (struct DATA)(*((struct DATA*)&data1)); 
```

但这是没用的......什么不这样做：

```
struct DATA data1, data2;
data2 = data1; 
```

# python - 在python中调用linux命令

> ID：13887660
> 
> 赞同：0
> 
> 时间：2012-12-14T23:26:14.390
> 
> 标签：python, subprocess, os.system, hardlink

> **可能的重复：**
> [Python 中反引号的等价物](https://stackoverflow.com/questions/1410976/equivalent-of-backticks-in-python)

我正在寻找在 Python 中运行终端命令 (ls -l) 的最佳方式。我已经阅读了有关子流程的信息，但我并不完全理解它，如果有人可以尝试让我了解正在发生的事情，我将不胜感激。我需要使用 ls -l 命令来检索一个硬链接号码，它是 != 1，然后保存这个号码以将它与其他地方的目录号码相匹配。现在我只想知道如何获取硬链接号并使用子进程将其保存到一个变量中（或者如果有一个更好的方法）。

这是我到目前为止使用的代码：#!/usr/bin/python

```
#tool that resolves time machine directories 

import os

#create output file 
os.chdir("/home/sean/Desktop")
hard_link_number = open('hardLinkNumber.log', 'w')

#move into mounted backup (figure out how to remove xe2 etc)
os.chdir("/mnt/Backups.backupdb/stuart dent\xe2\x80\x99s MacBook Pro/2010-08-10-160859/MAc")

#find hard link data 
print>>hard_link_number, os.system("ls -la")
hard_link_number.close() 
```

os.system("ls -la") 输出我需要的信息，但不会将其保存到我创建的文件中。我在别处读到 os.system 不会输出数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T23:32:24.847

你想要[`os.stat`](http://docs.python.org/2/library/os.html#os.stat)（特别是`st_nlink`属性）。

*编辑：*解释[jwz](http://www.jwz.org/)：有些人在遇到问题时会想“我知道，我会解析`ls -l`.”的输出。现在他们有两个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T23:31:50.090

您可以将`file`对象传递给`stdout`in`subprocess.call()`并且输出将保存到该文件中：

```
In [26]: import subprocess

In [27]: with open("data.txt","w") as f:
    subprocess.call("ls -la",stdout=f,shell=True)
   ....: 
```

# entity-framework - 删除多对多关系中的实体。不要得到错误但实体没有被删除

> ID：13887664
> 
> 赞同：0
> 
> 时间：2012-12-14T23:26:39.757
> 
> 标签：entity-framework

在 EF5 中，我有两个实体：用户和角色。

用户和角色之间存在多对多关系。

我没有设置关系的 UserRoles 数据库的实体。

我有一个用户，我想删除一个角色而不从数据库中加载它。

```
 Context context = new Context();
  User user = context.Users.First(x => x.Id == 4);
  user.Roles = new List<Role>();
  Role role = new Role { Id = 20 };
  context.Roles.Attach(role);
  user.Roles.Remove(role);
  context.SaveChanges(); 
```

我没有收到任何错误，但角色没有被删除。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:38:31.913

好吧，您正在删除但`role`不在此列表中，因此没有任何反应。`user.Roles``role`

我认为您必须立即将用户*和*角色附加到上下文中，以便更改检测可以在您删除角色时识别对象图的更改：

```
Context context = new Context();

User user = new User { Id = 4 };
user.Roles = new List<Role>();
Role role = new Role { Id = 20 };
user.Roles.Add(role)

context.Users.Attach(user);

user.Roles.Remove(role);

context.SaveChanges(); 
```

# php - 如何在 HostGator 上使用 PHP Composer

> ID：13887666
> 
> 赞同：33
> 
> 时间：2012-12-14T23:27:08.547
> 
> 标签：php, zend-framework2, composer-php, php-5.2, phar

我最近决定在 Zend Framework 2 中启动一个项目，但无法让它在 HostGator 共享服务器上运行。

默认情况下，HostGator 的共享服务器在 PHP 5.2.2 中运行，如果您上传 ZF2 骨架应用程序，它不会立即运行。

此外，如果您碰巧有 SSH 访问您的 HG 共享帐户（您通常必须请求它），您将无法运行 .PHAR 文件，因为 PHP 的 CLI 版本也是 5.2.2。

幸运的是，我得到了它的工作......见下文。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-14T23:27:08.547

首先，您可以在 HostGator 上基于目录级别启用 PHP 5.3。只需将以下行添加到`.htaccess`公共目录中的文件中：

`AddType application/x-httpd-php53 .php` [参考链接](http://support.hostgator.com/articles/hosting-guide/hardware-software/php-5-3)

巴大兵！现在您可以运行 PHP 5.3 应用程序了！

哦，但是等等！您有 SSH 访问权限并想使用 PHP Composer？
如果您通过 SSH 登录并尝试以下命令：`# php composer.phar install`您将收到以下错误：`Fatal error: Class 'Phar' not found in...`

这是因为 HostGator 的`# php` 命令在 5.2.2 中运行。要在 5.3 中运行，您需要提供 5.3 二进制文件的完整路径。

这是工作命令：
`# /opt/php53/bin/php composer.phar install`

我很兴奋，我想我会分享这个工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-25T09:25:33.487

Hostgator CPanel 中有一个选项。只需转到 PHP 配置并选择 PHP 版本之一。现在您可以在 5.2、5.3、5.4 和 5.5 之间进行选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-01T13:29:49.970

请注意，composer 已安装在专用服务器包（Hostgator 计划）上。您可以通过在命令行中输入来检查它是否已经安装：

```
composer -V 
```

如果它已经安装，你应该得到类似的东西：

```
Composer version 2.0.6 2020-11-07 11:21:17 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-01-08T20:45:43.910

如果您仍然收到错误，只需将此 lini 放入您的 php.ini 中：

```
suhosin.executor.include.whitelist = phar 
```

# c# - 使用 using 来处置资源

> ID：13887669
> 
> 赞同：2
> 
> 时间：2012-12-14T23:27:12.847
> 
> 标签：c#, .net, using-statement

> **可能重复：**
> [试图更好地理解“使用”语句](https://stackoverflow.com/questions/8133182/trying-to-understand-the-using-statement-better)

我真的阅读了所有其他帖子，但没有人真正回答我的问题。

这是我返回表格的函数

```
 public DataTable ReturnTable()
        {
            DataTable dt = new DataTable();   
            using (SqlConnection con = new SqlConnection(mainConnectionString))
            {
                con.Open();                             
                using (SqlCommand cmd = new SqlCommand())
                {
                    cmd.CommandType = CommandType.Text;    
                    SQL = " SELECT * from table";                        
                    cmd.CommandText = SQL;                                            
                    using (SqlDataAdapter da = new SqlDataAdapter(cmd))
                    {
                        da.Fill(dt);
                    }
                }
            }           
            return dt;
        } 
```

前一个与以下（我在发现“使用”之前一直使用的那个）相比有什么优势：

```
public DataTable ReturnTable()
            {
                DataTable dt = new DataTable();   
                SqlConnection con = new SqlConnection(mainConnectionString);
                con.Open();                             
                SqlCommand cmd = new SqlCommand();
                cmd.CommandType = CommandType.Text;    
                SQL = " SELECT * from table";                        
                cmd.CommandText = SQL;                                            
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                da.Fill(dt);
                con.Close();
                return dt;
            } 
```

对于第二个，con、cmd 和 da 是否正确处理？第二个有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T23:29:22.617

> 第二个有什么问题吗？

只要您的代码中没有异常，这对于 的工作方式相同`con`，因为*在这种情况下*`Close()`实际上`Dispose()`是相同的。它不会立即处理或处理，而是等到它们被垃圾收集后释放它们的资源。*`da``cmd`*

 *这样做的好处`using`是，即使在出现异常或提前退出方法的情况下（您`return`在方法中间添加了 a ），您的资源仍然会被释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:28:57.267

优点是该`using`模式调用接口`Dispose()`上的方法`IDisposable`，保证*您可能错过*的任何清理逻辑都得到正确执行，即使抛出异常也是如此。

在实践中，实现`IDisposable`的对象持有*非托管*资源，这些资源在被调用时会被清理`Dispose()`。所以打电话`Close()`可能还不够。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T23:29:27.903

不，它们*不*一样。这*就是*`using`. _

如果你的代码抛出异常会发生什么？在垃圾收集器碰巧找到它之前，这些对象不会被释放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T03:52:44.703

在这种情况下，“使用”尝试实现[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)模式，这在处理有限资源（例如数据库连接）时特别有用。*

# java - 网站截图调度 - PHP vs JAVA

> ID：13887670
> 
> 赞同：0
> 
> 时间：2012-12-14T23:27:19.860
> 
> 标签：java, php, screenshot

我正在编写一个网络应用程序。我已经完成了前端和后端。但是，我在安排任务时遇到了麻烦。

前端：

1.  能够搜索网站并截取屏幕截图。

后端：

1.  搜索网站后，将截取并存储屏幕截图。
2.  每 7 天拍摄一次屏幕截图。

用于截屏的应用程序是本地的。另外，我听说java也有截屏的能力。

在 PHP 或 java 上构建后端更好吗？各自的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:53:50.497

这是一篇关于[超级用户](https://superuser.com/questions/55999/how-can-i-automatically-take-a-screenshot-of-a-website-at-a-specified-time)的文章，它指向[一篇](http://www.os-cms.net/blog/view/5/how-to-create-a-screen-dump-with-php-on-linux)关于如何使用 PHP 完成此操作的博客文章：

在 Linux 上安装：

```
sudo aptitude install imagemagick wkhtmltopdf 
```

然后：

```
// save this snippet as url_to_png.php
// usage: php url_to_png.php http://example.com
if (!isset($argv[1])){
    die("specify site: e.g. http://example.com\n");
}

$md5 = md5($argv[1]);
$command = "wkhtmltopdf $argv[1] $md5.pdf";
exec($command, $output, $ret);
if ($ret) {
    echo "error fetching screen dump\n";
    die;
}

$command = "convert $md5.pdf -append $md5.png";
exec($command, $output, $ret);
if ($ret){
    echo "Error converting\n";
    die;
}

echo "Conversion compleated: $argv[1] converted to $md5.png\n"; 
```

谈到利弊，我认为这两种语言都有能力做到这一点，重要的是你想在什么语言中开发以及你喜欢在什么环境中开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:32:28.260

如果您不打算直接使用您的应用程序截取屏幕截图，并且您想为此目的使用一些外部服务（例如[http://www.websnapr.com/](http://www.websnapr.com/)或[http://www.thumbalizr.com/](http://www.thumbalizr.com/)），则不可以无论您选择哪种语言，因为这两种语言都很简单。

但是，如果您想手动启动浏览器并在您的机器上截取屏幕截图，我建议您使用 Java，因为 PHP 只是缺少一些系统访问功能，这些功能可以让 PHP 应用程序完成您需要做的所有事情。

# php - 用于在php脚本中自动完成的jquery脚本在内部不起作用 标签

> ID：13887674
> 
> 赞同：0
> 
> 时间：2012-12-14T23:27:52.993
> 
> 标签：php, jquery, html

我正在为 php 脚本中的输入文本框进行自动完成。这是javascript。一切正常...... search.php 只是在 div 中填充了可供选择的选项。这是真正的问题。当我将输入文本框放在标签内时，显示自动完成选项的 div 无法在页面上呈现。我可以将 div 放在页面上的任何位置，只要页面上没有任何位置，它就可以工作。

```
<script type="text/javascript">
$(document).ready(function(){
$(".search").keyup(function()
{
var searchbox = $(this).val();
var dataString = 'searchword='+ searchbox;
if(clan_id=='')
{
}
else
{
$.ajax({
type: "POST",
url: "search.php",
data: dataString,
cache: false,
success: function(html)
{
$("#display").html(html).show();
}
});
}return false;
});
});
jQuery(function($){
$("clan_id").Watermark("Search");
});
</script> 
```

search.php 正在返回此代码：

```
echo "<div class=\"display_box\" align=\"left\" onclick=\"document.getElementById  ('clan_id').value =' $final_clan_id '\">\n";
echo "<img src=\" $img \" style=\"width:25px; float:left; margin-right:6px\" />$final_clan_name  <br/></div>\n"; 
```

自动完成功能适用于此：

```
echo "<input type \"text\" id=\"clan_id\">\n"; 
```

自动完成失败：

```
echo "<form name ='showClan' method='post' action='" .  htmlentities($_SERVER['PHP_SELF']) . "'>\n";
echo "<input type \"text\" id=\"clan_id\">\n";
echo "</form>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:50:52.427

在审查和测试您的代码时，有几件事很突出：

1）您的搜索字段没有您的 jQuery 函数正在寻找的“搜索”类。

2）并且您的 type 属性在您的两个示例中都缺少等号。

```
<input class="search" type="text" id="clan_id"> 
```

这是一个工作示例，其中搜索字段和显示 div 包含在表单中：

[http://jsfiddle.net/hansvedo/zhQse/](http://jsfiddle.net/hansvedo/zhQse/)

# ruby-on-rails - Is it possible in rails to return response and keep processing the data the client submitted?

> ID：13887675
> 
> 赞同：5
> 
> 时间：2012-12-14T23:27:55.853
> 
> 标签：ruby-on-rails, ruby, multithreading

I have a webservice that processes user submitted data. The user doesn't need to receive a response based on that data, he just needs to submit it. However, I do need to process that data. Currently the processing takes place directly as a response to the post action, and after the processing, it return a statuscode. This normally takes 0.5s - 2s, but sometimes much longer, when a user submits a lot of data.

Is it possible in Rails to spawn a new thread for processing that data, while returning the status code (and thus finishing the request for the user)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T00:15:28.217

Resque, Delayed Job, or Sidekiq should suit your needs.

You can find links to these three, and a couple more here: [https://www.ruby-toolbox.com/categories/Background_Jobs](https://www.ruby-toolbox.com/categories/Background_Jobs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T23:34:44.377

I think you can process data in background, using something like [resque](https://github.com/defunkt/resque).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T13:48:40.833

You can also use `fork` - Its not an elegant solution but it gets the job done and introduces no extra moving parts. To do that fork over the entire rails app ( pretty messy but the rails app serving the request will respond immediately ) and have the process detached:

```
class SomeController < ApplicationController
  def heavy_lifting
    process = fork do
      # calculate PI or process input
      # ...
      # sends the kill signal to current Process, which is the Rails App actually calculating PI
      Process.kill("HUP") 
    end
    Process.detach(process)
    # respond here
  end
end 
```

**Keep in mind**
Although your processing/job might only need a few megs of memory to run, `fork` allocates as much memory as the parent process does. Here is a good [summary of what fork generally does](http://linux.die.net/man/2/fork).

**Update - Same thing with threads**

```
class SomeController < ApplicationController
  def heavy_lifting
    Thread.new do
      # calculate PI or process input
      # ...
      Thread.kill
    end
    # respond here
  end
end 
```

# css - 在 li 中具有当前图像的悬停时更改 li 元素的背景

> ID：13887680
> 
> 赞同：0
> 
> 时间：2012-12-14T23:28:16.063
> 
> 标签：css, hover, html-lists, image

我使用一组 li 元素制作了一个图像网格，当您将鼠标悬停在 li 中的每个图像上时，需要添加悬停效果。我让它与我设置的 .grid li a img:hover 的 css opacity 属性一起正常工作。但是，当我在这里设置背景图像时，它不会显示。加载浏览器并使用检查器显示当我将鼠标悬停在它上面时加载的图像，但视觉上它没有显示。我尝试将 z 指数设置得更高等，但没有运气。

如果更好，我愿意做其他方式，因为每个图像都有自己不同的悬停状态。

HTML：

```
<div class="container">
<ul class="grid">
   <li><a href="link.html"><img src="images/image1.jpg"></a></li>
   <li><a href="link.html"><img src="images/image2.jpg"></a></li>
   <li><a href="link.html"><img src="images/image3.jpg"></a></li>
</ul>
</div> 
```

CSS：

```
ul.grid {
  list-style: none;
  margin: 20px auto 0;
  width: 798px;  
  }

.grid li {
  float: left;
  margin: 0px 4px 0px 0px;
  } 

.container {
  margin-left: auto;
  margin-right: auto;
  margin-top:50px;
  width: 513px;
  }

.grid li a img:hover {
  background: url(images/image1_hover.jpg) no-repeat;
  }

.grid li img {
  background-color: white;
  margin: 0;
  width: 262px;
  height: 200px;
  }

.grid li a {
  display: block;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:37:49.173

您遇到的问题与苹果和橙子有关。您在橙子（背景）上放置了苹果（IMG）标签......所以改变背景是有效的，但您的 IMG 位于它上面 - z-index 对您没有帮助。在这种情况下，请单独使用背景图像。见下文。

编辑：我看到你也希望它们成为链接。以下将为您工作。

也就是说，在这种情况下，我实际上会使用精灵而不是使用 6 个不同的图像。而且，下面的 CSS 可能会被优化，当然也可以通过使用 LESS 或 SASS 进行优化 - 但周五快 4 点了，公司的微水龙头正在流动；）

```
<html>
<head>
    <style type="text/css">
        ul.grid {
          list-style: none;
          margin: 20px auto 0;
          width: 798px;  
        }

        .grid li {
          float: left;
          margin: 0px 4px 0px 0px;
        } 

        .container {
          margin-left: auto;
          margin-right: auto;
          margin-top:50px;
          width: 513px;
        }

        .grid li a {
          background-color: white;
          margin: 0;
          width: 50px;
          height:50px;
        }

        .grid li a {
          display: block;
          }

        .img1 {
          background: url(images/image1.jpg) no-repeat;
        }

        .img1:hover {
          background: url(images/image1_hover.jpg) no-repeat;
        }

        .img2 {
          background: url(images/image2.jpg) no-repeat;
        }

        .img2:hover {
          background: url(images/image2_hover.jpg) no-repeat;
        }

        .img3 {
          background: url(images/image3.jpg) no-repeat;
        }

        .img3:hover {
          background: url(images/image3_hover.jpg) no-repeat;
        }
    </style>
</head>

<body>
    <div class="container">
    <ul class="grid">
       <li><a href="link.html" class="img1"></a></li>
       <li><a href="link.html" class="img2"></a></li>
       <li><a href="link.html" class="img3"></a></li>
    </ul>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:42:13.157

将鼠标悬停在图像上时，您可能会更轻松地使用一些 jquery 来更改图像的源标记。

# javascript - 如何判断 JavaScript 是否导致我的更新面板更新？

> ID：13887682
> 
> 赞同：2
> 
> 时间：2012-12-14T23:28:26.630
> 
> 标签：javascript, asp.net, updatepanel

页面加载后，我使用以下 javascript 代码调用更新面板的更新：

```
<script type="text/javascript">
        function pageLoad(objSender, args) {
            Sys.WebForms.PageRequestManager.getInstance()._doPostBack('updtPnlAccessoriesPanel', 'updtPnlAccessoriesPanel');
        }
</script> 
```

我不希望更新面板（其中包含用户控件）在页面加载并显示之前触发。这将允许它异步更新更新面板（及其用户控件）。

因此，在用户控件的 page_load 中，我想告诉它在初始页面加载期间忽略任何内容，并且仅在页面已经为用户加载后由 javascript 调用时才执行其工作。在这个用户控件中完成的工作需要额外的几秒钟，我不希望它减慢初始页面的加载速度。

有什么想法吗？

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T05:49:12.823

解决方案很简单 - 只需`IsPostBack`在页面加载后使用 来进行工作，因为当您使用 javascript 触发 UpdatePanel 时，您会将帖子发送回服务器。所以这样做：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        // now do your work
    }
} 
```

为了使其更高级，您甚至可以简单地检查 PostBack 是否来自该面板。我为此使用了一个检查女巫 UpdatePanel 是否触发事件的函数，所以我们将如下代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack && IsUpdatePanelInRendering(Page, upUpdatePanelId))
    {
        // run the code for update panel 1, me
        // ...
    }
} 
```

其中 IsUpdatePanelInRendering ：

```
public static bool IsUpdatePanelInRendering(Page page, UpdatePanel panel)
{
    Debug.Assert(HttpContext.Current != null, "Where are you called ? HttpContext.Current is null ");
    Debug.Assert(HttpContext.Current.Request != null, "Where are you called HttpContext.Current.Request is null ");

    // if not post back, let it render
    if (false == page.IsPostBack)
    { 
        return true; 
    }
    else
    {
        try
        {
            // or else check if need to be update
            ScriptManager sm = ScriptManager.GetCurrent(page);

            if (sm != null  && sm.IsInAsyncPostBack)
            {
                Debug.Assert(HttpContext.Current.Request.Form != null, "Why forms are null ?");

                string smFormValue = HttpContext.Current.Request.Form[sm.UniqueID];

                if (!string.IsNullOrEmpty(smFormValue))
                {
                    string[] uIDs = smFormValue.Split("|".ToCharArray());
                    if (uIDs.Length == 2)
                    {
                        if (!uIDs[0].Equals(panel.UniqueID, StringComparison.InvariantCultureIgnoreCase))
                        {
                            return false;
                        }
                    }
                }
            }
        }
        catch (Exception x)
        {
            Debug.Fail("Ops, what we lost here ?");
        }

        return true;
    }
} 
```

# regex - “每个单词都有相同的字母”的正则表达式

> ID：13887696
> 
> 赞同：1
> 
> 时间：2012-12-14T23:29:45.733
> 
> 标签：regex

我需要一个正则表达式来检查某些输入的每个单词是否以相同的字母开头（并且还允许使用某些标点符号）。

目前我有以下内容：

```
^(((\b[aA])\w*([\s\.\-\!\?\"\':,])*)+)|(((\b[bB])\w*([\s\.\-\!\?\"\':,])*)+)$ 
```

从 [aA] 一直到 [zZ]

显然，这不是最好的方法。有没有人有一个聪明的正则表达式？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:36:17.910

使用不区分大小写匹配的反向引用。

```
^\s*([a-z])[a-z]*(?:\s+\1[a-z]*)*\s*$ 
```

# javascript - 将 jQuery 实时搜索添加到动态输入

> ID：13887697
> 
> 赞同：0
> 
> 时间：2012-12-14T23:29:55.543
> 
> 标签：javascript, jquery, search, live

我正在使用 jQuery 实时搜索插件，需要将其绑定到类的所有实例。我的类实例可能是动态的，也可能不是动态的。

我知道我可以通过将它嵌套在 jQuery Live 函数 EG 中来完成将它绑定到动态类实例`$(".myLink").live(click function(){});`

但是，我还需要非动态类也具有绑定。

如何在不定义我的 liveSearch 绑定两次的情况下完成此操作？（一次在文档中为静态元素准备好，一次在我的点击处理程序中为动态元素准备好）。

这是我的 liveSearch 代码，不确定是否重要。

```
$(".myClass").liveSearch({
url: 'foo.php',
id: 'liveSearchID',
parent: '.myParent',
}); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T03:28:52.210

您可以使用 jQuery`.on()`绑定`liveSearch` 到当前（非动态）或未来元素，例如：

```
$("#parentContainer").on("click", ".myClass", function(){
  $(this).liveSearch({
     // options
  }); // liveSearch
}); // on 
```

**请注意**，您必须应用`.on()`到选择器的父**容器**`.myClass`，然后将事件`.myClass`作为后代选择器和处理程序传递。

见**[演示](http://jsfiddle.net/BBjGS/)**

`.on()`需要 jQuery 1.7+

**编辑**（2012 年 12 月 15 日 - 太平洋时间下午 4:13）：

旧版本 jQuery 的用户应该`.delegate()`优先使用`.live()`...所以只需以这种方式调整您的代码`.delegate(selector, eventType, handler)`（仍适用`.delegate()`于父容器），例如：

```
$("#parentContainer").delegate(".myClass", "click", function() {
  $(this).liveSearch({
     // options
  }); // liveSearch
}); // delegate 
```

使用（需要 jQuery v1.4.2+）查看新的**[DEMO](http://jsfiddle.net/xzSMW/)**`.delegate()`

# design-patterns - 原型设计模式的意义何在？

> ID：13887704
> 
> 赞同：70
> 
> 时间：2012-12-14T23:30:41.660
> 
> 标签：design-patterns, prototype-pattern

所以我在学校学习设计模式。今天有人告诉我“原型”设计模式。

我一定是错过了什么，因为我看不到它的好处。我在网上看到有人说它比使用更快，`new`但这没有意义；在某些时候，无论新对象如何创建，都需要为其分配内存。

这种模式不是和“鸡还是蛋”的问题一样吗？由于原型模式本质上只是克隆对象，因此在某些时候必须自己创建原始对象（即不克隆）。这意味着我需要准备好要克隆的每个对象的现有副本？

谁能解释这种模式的用途是什么？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-15T00:14:20.373

原型模式有一些好处，例如：

*   它消除了初始化对象的（可能很昂贵的）开销
*   它简化并可以优化相同类型的多个对象将具有大部分相同数据的用例

例如，假设您的程序使用从通过网络检索到的大多数不变信息中解析的数据创建的对象。无需在每次创建新对象时检索数据并重新解析它，原型模式可用于在需要新对象时简单地复制原始对象。

另外，假设该对象可能具有占用大量内存的数据，例如表示图像的数据。使用写时复制样式继承可以减少内存，其中显示原始的、未重复的数据，直到代码尝试更改该数据。然后，新数据将屏蔽以引用原始数据。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-12-14T23:34:44.600

原型模式是一种基于克隆预配置对象的创建模式。这个想法是您选择一个为默认配置或在某些特定用例的范围内配置的对象，然后克隆该对象并根据您的确切需求进行配置。

当所需的配置繁琐时，该模式对于删除一堆样板代码很有用。我认为 Prototypes 是一个预设对象，你可以在其中保存一堆状态作为新的起点。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-06-21T15:34:16.470

这里的许多其他答案都谈到了克隆已配置对象的成本节约，但我想扩展原型模式的另一个“点”。在某些语言中，类被视为一等对象，您可以配置客户端在运行时创建的对象类型，只需向其传递类名即可。在像 C++ 这样的语言中，类不被视为一等对象，原型模式允许您实现相同的效果。

例如，假设我们`Chef`在一家餐厅工作，其工作是制作和提供餐点。假设他的`Chef`薪水过低且心怀不满，所以他做了如下菜肴：

```
class Chef {
    public:
        void prepareMeal() const {
            MozzarellaSticksWithKetchup* appetizer = new MozzarellaSticksWithKetchup();
            // do something with appetizer...

            HockeyPuckHamburgerWithSoggyFries* entree = new HockeyPuckHamburgerWithSoggyFries();
            // do something with entree...

            FreezerBurnedIceCream* dessert = new FreezerBurnedIceCream();
            // do something with dessert...
        }
}; 
```

现在让我们说我们想改变`Chef`成为一个炫耀的名厨。这意味着他/她必须`new`在`prepareMeal()`. 我们想修改该方法，以便可以将通过 获取的餐食类型`new`指定`Chef`为参数。在其他类是第一类对象的语言中，我们可以简单地将类名作为参数传递给方法。我们不能在 C++ 中做到这一点，所以我们可以从原型模式中受益：

```
class Appetizer {
    public:
        virtual Appetizer* clone() const = 0;
        // ...
};

class Entree {
    public:
        virtual Entree* clone() const = 0;
        // ...
};

class Dessert {
    public:
        virtual Dessert* clone() const = 0;
        // ...
};

class MozzarellaSticksWithKetchup : public Appetizer {
    public:
        virtual Appetizer* clone() const override { return new MozzarellaSticksWithKetchup(*this); }
        // ...
};

class HockeyPuckHamburgerWithSoggyFries : public Entree {
    public:
        virtual Entree * clone() const override { return new HockeyPuckHamburgerWithSoggyFries(*this); }
        // ...
};

class FreezerBurnedIceCream : public Dessert {
    public:
        virtual Dessert * clone() const override { return new FreezerBurnedIceCream(*this); }
        // ...
};

// ...and so on for any other derived Appetizers, Entrees, and Desserts.

class Chef {
    public:
        void prepareMeal(Appetizer* appetizer_prototype, Entree* entree_prototype, Dessert* dessert_prototype) const {
            Appetizer* appetizer = appetizer_prototype->clone();
            // do something with appetizer...

            Entree* entree = entree_prototype->clone();
            // do something with entree...

            Dessert* dessert = dessert_prototype->clone();
            // do something with dessert...
        }
}; 
```

请注意，`clone()`方法创建派生类型的实例，但返回指向父类型的指针。这意味着我们可以通过使用不同的派生类型来更改创建的对象的类型，而客户端不会知道其中的区别。这个设计现在允许我们配置一个`Chef`——我们原型的客户端——在运行时制作不同类型的菜肴：

```
Chef chef;

// The same underpaid chef from before:
MozzarellaSticksWithKetchup mozzarella_sticks;
HockeyPuckHamburgerWithSoggyFries hamburger;
FreezerBurnedIceCream ice_cream;
chef.prepareMeal(&mozzarella_sticks, &hamburger, &ice_cream);

// An ostentatious celebrity chef:
IranianBelugaCaviar caviar;
LobsterFrittataWithFarmFreshChives lobster;
GoldDustedChocolateCupcake cupcake;
chef.prepareMeal(&caviar, &lobster, &cupcake); 
```

您可能想知道，使用这种方式，原型模式为您购买了与工厂方法模式相同的东西，那么为什么不直接使用呢？因为工厂方法模式需要创建者类的层次结构来反映正在创建的产品的层次结构；即我们需要一个`MozzarellaSticksWithKetchupCreator`带有`make()`方法的，一个`HockeyPuckHamburgerWithSoggyFriesCreator`带有`make()`方法的，等等。因此，您可以将原型模式简单地视为减轻工厂方法模式经常引入的代码冗余的一种方法。

这个论点来自*Design Patterns: Elements of Reusable Object-Oriented Software*，又名“Gang of Four”一书。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-14T07:54:11.293

如果您想创建一个对象，但又不想经历进行网络或数据库调用的昂贵的对象创建过程，那么请使用原型模式。只需创建对象的副本并对其进行更改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-23T05:17:35.343

使用原型模式完全取决于您的问题。在大多数情况下，克隆和创建新对象之间没有任何区别。 **但是**，如果您在构造函数中或在设置属性时执行一些复杂或耗时的操作，并且必须执行复杂且耗时的操作，原型模式将对我们有所帮助。因为将对象从旧实例复制到新实例更容易并且性能更高。（深度克隆）。所以这种模式更适合那些状态长期不改变的对象。在使用此模式之前，请彻底分析您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-08T18:09:44.953

如果您有要求，您需要在其中填充或使用包含 Object repeatable 的相同数据

和

无法从现有对象构建，例如 [使用网络流构建对象] 或

构建一个对象是耗时的[构建一个大对象，通过从数据库中获取数据] 然后使用这个设计模式，因为在这个副本中创建了现有的对象，这个副本将不同于原始对象并且可以使用就像原来的一样。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-15T06:25:09.960

与抽象工厂模式相比，通过使用原型模式，您不必有大的工厂层次结构，只需要有大的产品层次结构。

# objective-c - 在 numberOfRowsInSection 中调用 TableView BeginUpdates

> ID：13887705
> 
> 赞同：0
> 
> 时间：2012-12-14T23:30:44.717
> 
> 标签：objective-c, ios, uitableview, nsfetchedresultscontroller

我有一个由 NSFectchedResultsController 支持的表格视图，当我没有来自 FRC 的结果时，我试图显示一个自定义单元格。我遇到的问题是 BeginUpdates 会调用 numberOfRowsInSection。我想保持表格视图处于活动状态（而不仅仅是在其位置显示图像），以便用户可以执行拉动刷新。

编码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
if ([self.fetchedResultsController.fetchedObjects count] == 0) {
    if (!specialCellShowing) {
        specialCellShowing = TRUE;
        [self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];
        [self.tableView beginUpdates];
        [self.tableView insertRowsAtIndexPaths:@[[NSIndexPath indexPathForItem:0 inSection:0]] withRowAnimation:UITableViewRowAnimationFade];
        [self.tableView endUpdates];
    }
    return 1;
}
else {
    if (specialCellShowing) {
        specialCellShowing = FALSE;
        [self.tableView beginUpdates];
        [self.tableView deleteRowsAtIndexPaths:@[[NSIndexPath indexPathForItem:0 inSection:0]] withRowAnimation:UITableViewRowAnimationFade];
        [self.tableView endUpdates];
    }
    [self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleSingleLine];
    return [self.fetchedResultsController.fetchedObjects count];
} 
```

}

问题是返回 1；陈述。发生的情况是第一次调用 numberOfRowsInSection 时，它设置 specialCellShowing = TRUE 并点击开始更新，这会调用 numberOfRowsInSection。该方法的开始更新实例发现 specialCellShowing 为真并返回 1 并退出。现在进行了插入调用，然后在 endUpdates 上发生了崩溃，因为 tableview 认为表中有 1 个单元格，插入了 1 个单元格，之前有 1 个单元格。另一个问题是我需要返回 1，因为在随后对 numberOfRowsInSection 的调用中，我希望它不会弄乱表格，只是返回说我有一个自定义单元格。

我想我想知道是否有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:39:14.870

当 tableview 更新其显示时，您不能改变 tableview。您不需要调用 deleteRowsAtIndex 路径，除非您正在改变 tableview。您需要有一个单独的方法：一个响应事件并改变 tableview 数据的方法（可能调用 begin/endUpdates 并添加或删除行）。-numberOfRowsInSection 应该只检查支持数据并返回答案。此时 tableview 正在执行完整更新，因此在 tableview 中添加和删除行无论如何此时都是无用的。

# c# - FileSystemWatcher Changed 事件不会触发

> ID：13887709
> 
> 赞同：3
> 
> 时间：2012-12-14T23:31:09.747
> 
> 标签：c#, winforms

```
FileSystemWatcher fsw = new FileSystemWatcher();
fsw.Path = @"C:\foo.txt";
fsw.Changed += new FileSystemEventHandler(LogFileChanged);

private void LogFileChanged(object s, FileSystemEventArgs e)
{ 

} 
```

`LogFileChanged()`如果我在-> 打开并编辑-> 保存文件中放置断点`foo.txt`，则断点不会命中。有人可以解释我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T23:37:06.977

这是文件不是路径

```
fsw.Path = @"C:\foo.txt"; 
```

你需要设置

```
fsw.Path = @"C:\";
fsw.Filter = "foo.txt"; 
```

[过滤器属性](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.filter%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T23:34:29.207

你设置了这个属性吗？

```
 fsw.EnableRaisingEvents = true; 
```

# c++ - 唯一标识指向成员函数的指针的方法？

> ID：13887710
> 
> 赞同：3
> 
> 时间：2012-12-14T23:31:10.587
> 
> 标签：c++, function-pointers

我正在尝试为游戏引擎设置一个“类似协程”的系统，并且在寻找任何方法来唯一标识模板函数中指向成员函数的指针时遇到了麻烦。

我希望能够通过调用基类中的 CoStart 和 CoStop 方法来启动和停止“行为”派生类中的协程，这些方法采用指向成员函数的指针：

```
CoStart( c_BlinkCycle );
CoStop( c_BlinkCycle ); 
```

协程方法具有标准签名的地方，例如：

```
CoCommand MyBehavior::c_BlinkCycle( int step ) {
    // ...
} 
```

我可以在基类中使用模板来很好地处理这些：

```
template<typename T>
void CoStart( CoCommand (T::* coMethod)(int) ) {
    // ...
} 
```

但是，我希望能够在它们第一次使用时（在 CoStart() 中）为协程方法存储一些元数据，并且不知道有任何独特的方式来识别它们。IE：

```
if ( !metadataVector.contains( coMethod ) ) {
     // ... set up metadata
} 
```

如果我能以某种方式获得指向成员函数的地址、类型 ID、名称或任何类型的唯一标识符，我就会被设置。但是对于模板，我似乎没有任何可以将它们转换为的共享指针类型，所以我有点不知所措。（仅供参考，我稍后会使用 boost::function 和 boost::bind ，但看起来它们也不允许比较）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:42:00.180

您可以使用具有某些成员的对象来存储标识它们的唯一数据，而不是函数指针：

```
template <typename T>
class CycleMod { 
   public:
      CycleMod(Meta data): meta(data) { }
      CoCommand start(int){
      };
      CoCommand stop(int){
      };        
   private:
      MetaData meta;
}; 
```

您甚至可以使用类似的类而不是成员函数来包装指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:15:02.450

好的，我想我将放弃尝试从本质上唯一地识别 c_BlinkCycle() 类型方法（除非有人知道 C++ 技巧），而是让它们在获得某个特殊时返回一个 unqiue ID 值“步骤”参数：

```
CoCommand MyBehavior::c_BlinkCycle( int step ) {
    if ( step == -1 ) {
        return CoCommand_Identify(1);
    }

    // ... otherwise do the particular steps...
} 
```

比我想要的多一点样板，但不是世界末日。

# php - 将文本文件中的数据插入 MySQL

> ID：13887712
> 
> 赞同：-2
> 
> 时间：2012-12-14T23:31:21.043
> 
> 标签：php, mysql, sql, import, text-files

> **可能重复：**
> [如何读取此文本文件并插入 MySQL？](https://stackoverflow.com/questions/4729031/how-do-i-read-this-text-file-and-insert-into-mysql)

我需要将此文本文件导入 MySQL。字段名称写在文件的顶部。

```
SEDOL^DESCRIPTION^VALUE
B02W0Y2^EUROSTAR LTD^35.09^^
B02V64S^NORTHERN ROCK^21.97^^
B06N3Q2^MOTOR OIL SAPA^7.24^^
B05WF50^COLT TELECOM GROUP^20.29^^
B03R2SA^XEROX CAPITAL^35.65^^
B09G3SD^COREALCREDIT^12.10^^
B04F5GD^ULSTER BK LTD^16.46^^
B02DH5H^EUROTUNNEL FINANCE^53.24^^
B05D3WK^BRADFORD & BINGLEY^18.07^^
B05DGEF^SKIPTON LTD^4.50^^
B07DHX4^EBAY INC^46.55^^
B08VEW1^FURSTENBG CAP^86.36^^
B06HS34^LBG CAPITAL^54.22^^ 
```

任何人都可以就如何实现这一目标提出一些想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T23:47:09.230

尝试：

```
LOAD DATA INFILE '<filepath>' INTO TABLE <tablename>
FIELDS TERMINATED BY '^'  LINES TERMINATED BY '^^\r\n'; 
```

# php - 防止直接 html 访问包含 php 脚本的文件夹

> ID：13887715
> 
> 赞同：-4
> 
> 时间：2012-12-14T23:31:53.080
> 
> 标签：php, .htaccess

我有访问 mysql 的 php 脚本。我将它们放在一个文件夹（SourceFiles）中。我想确保用户不能直接指向这些脚本中的任何一个（因此也不能指向 mysql 数据库）。我有一个可以访问这些脚本的登录设置，并且一切正常，但用户也可以直接指向这些文件。

将文件夹移动到 public_html 上方不起作用，因为我无法发布到 public_html 之外的脚本。

使用 .htaccess 保护文件夹不起作用，因为那时每个用户都需要访问受保护的文件夹。

如何确保用户只能通过登录访问该文件夹中的 php 脚本（我目前已在 php 中编码）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:46:54.657

我个人额外投入`POST`或`GET`

```
$protected = ($_GET['p']) ? $_GET['p'] : $_POST['p']
if ($protected != 'a') { header('location:blah'); } 
```

在受保护页面的顶部放置类似的内容。

[下次用这个](http://google.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:55:37.683

这就是我在 OOP php 之前的做法。

在您的主应用程序入口点：

```
define('ACCESS',1); 
```

在所有受保护的脚本上：

```
if (!defined(ACCESS)) exit; 
```

因此，如果用户直接访问您的任何“受保护”文件，它们将不会被执行。

# 编辑

我看到你已经做了登录系统......那为什么不直接使用呢？存储在 $_SESSION var 中，定义是否允许用户访问该脚本.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T03:18:42.027

您可以将此代码放在每个文件的开头：

```
/***************DO NOT ALLOW DIRECT ACCESS************************************/
if ( (strpos( strtolower( $_SERVER[ 'SCRIPT_NAME' ] ), strtolower( basename( __FILE__ ) ) ) ) !== FALSE ) { // NOT FALSE if the script's file name is found in the URL 
  header( 'HTTP/1.0 403 Forbidden' );
  die( '<h2>Direct access to this page is not allowed.</h2>' );
}
/*****************************************************************************/ 
```

# r - 将包含 hist bin 的列添加到数据框中

> ID：13887729
> 
> 赞同：0
> 
> 时间：2012-12-14T23:33:42.013
> 
> 标签：r, bins

我是 R 新手，正在努力为包含一组数字的数据框创建一组 bin。如：

```
value
21
53
1
43
56 
```

如果我运行，`hist`那么我知道我可以将这些值分配给一个 bin，但这会给我一个图形输出。如何将 bin 分配给数据框中的新列，即

```
value  class
21     20
53     50
1      0
43     40
56     50 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:37:52.017

RTM，即帮助页面。`hist`有一个抑制绘图的论点。在任何情况下，它都会返回一个包含中断值和计数值的列表。

```
str(hist(dfrm$values))   #  same list as you find in the Values section of ?hist

> dfrm$grp <- cut(dfrm$value, breaks=hist(dfrm$value)$breaks)

> dfrm
  value     grp
1    21 (20,30]
2    53 (50,60]
3     1  (0,10]
4    43 (40,50]
5    56 (50,60] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-07T18:23:12.730

假设你的`data.frame`被称为`df`，这样的事情应该可以工作。

```
bins <- c(0, 10, 20)

df$class <- findInterval(value, bins) 
```

# javascript - 当我分配选项时，Highcharts 崩溃

> ID：13887730
> 
> 赞同：0
> 
> 时间：2012-12-14T23:33:43.753
> 
> 标签：javascript, highcharts

重要提示：它会以某种方式导致您的浏览器崩溃。我正在寻找这段代码很长时间，但找不到原因。我不会给出 jsfiddle 代码，因为如果你运行它会立即填满内存，尽管我有 5 个不同的值。谁能帮我找出错误？我很沮丧。

HTML

```
<div id="container" style="width:400px; height:300px"> </div> 
```

JAVASCRIPT

```
var options = {
        colors: [ "#7798BF", "#55BF3B", "#DF5353", "#aaeeee", "#ff0066", "#eeaaee",
        "#55BF3B", "#DF5353", "#7798BF", "#aaeeee","#DDDF0D"],
        chart: {
            borderWidth: 0,
            borderRadius: 15,
            plotBackgroundColor: null,
            plotShadow: true,
            plotBorderWidth: 0,
            margin: 30,
            renderTo: 'container'
        },
        title: {
            text: 'Toplam sayfa ziyaret süreleri',
            style: {
                color: '#555',
                font: '16px Lucida Grande, Lucida Sans Unicode, Verdana, Arial, Helvetica, sans-serif'
            }
        },
        subtitle: {
            style: {
                color: '#DDD',
                font: '12px Lucida Grande, Lucida Sans Unicode, Verdana, Arial, Helvetica, sans-serif'
            },
            text: 'this is subtitle'
        },
        xAxis: {
            minTickInterval: 10,
            gridLineWidth: 0,
            lineColor: '#999',
            tickColor: '#999',
            labels: {
                style: {
                    color: '#444',
                    fontWeight: 'bold'
                }
            },

            title: {
                style: {
                    color: '#AAA',
                    font: 'bold 12px Lucida Grande, Lucida Sans Unicode, Verdana, Arial, Helvetica, sans-serif'
                }
            },
            offset: 0
        },

        yAxis: {
            categories: ['Login', 'Bar', 'Line', 'Share', 'Target', 'Peaklist', 'Monitor', 'Diğer'],
            alternateGridColor: null,
            minorTickInterval: 600000, //600 seconds
            type: 'datetime',
            dateTimeLabelFormats:{
                second: '%M:%S',
                minute: '%M:%S',
                hour: '%H:%M:%S',
                day: '%e. %b',
                week: '%e. %b',
                month: '%b \'%y',
                year: '%Y'
            },

            gridLineColor: 'rgba(255, 255, 255, .1)',
            lineWidth: 0,
            tickWidth: 1,
            labels: {
                style: {
                    color: '#999',
                    fontWeight: 'bold'
                }
            },

            title: {
                style: {
                    color: '#AAA',
                    font: 'bold 12px Lucida Grande, Lucida Sans Unicode, Verdana, Arial, Helvetica, sans-serif'
                }
            }
        },
        labels: {
            style: {
                color: '#CCC'
            }
        },
        tooltip: {
            enabled: false
        },

        plotOptions: {
            bar: {
                dataLabels: {
                    color: '#CCC'
                }
            }
        },

        toolbar: {
            itemStyle: {
                color: '#CCC'
            }
        },

        // special colors for some of the demo examples
        dataLabelsColor: '#444',
        textColor: '#E0E0E0',
        maskColor: 'rgba(255,255,255,0.3)',
        series: [{
            type: 'column',
            name: 'Data',
            data: [[0,100000],[1,200000],[2,1950000],[3,10000],[4,2000],[5,100000],[6,10000], [7,0000]],
            color: 'rgba(100,100,150,0.5)'
        }],
        legend:{
            enabled: false
        }
    };

    chart2 = new Highcharts.Chart(options); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:08:13.620

这是因为**类别是 for`xAxys`而不是 for`yAxis`**。

```
xAxis: {
    categories: ['Login', 'Bar', 'Line', 'Share', 'Target', 'Peaklist', 'Monitor', 'Diğer']
} 
```

[**工作演示**](http://jsfiddle.net/WxjZZ/)

[参考](http://api.highcharts.com/highcharts#xAxis.categories)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:44:15.117

最后，我发现了问题。`categories: ['Login', 'Bar', 'Line', 'Share', 'Target', 'Peaklist', 'Monitor', 'Diğer']`导致问题，虽然我不知道原因。也许是因为字符串数组包含来自其他字符的字符

# actionscript-3 - 在多个地方使用变量 - AS3

> ID：13887738
> 
> 赞同：0
> 
> 时间：2012-12-14T23:34:44.707
> 
> 标签：actionscript-3

如何添加变量“userSave”使代码看起来像第二个片段？

```
var userSave:Number = 1;

user_presets["u"+userSave].addEventListener(MouseEvent.MOUSE_DOWN, ["u"+userSave]);
function ["u"+userSave](event:MouseEvent):void
{

}

// It needs to look like this:
user_presets.u1.addEventListener(MouseEvent.MOUSE_DOWN, u1);
function u1(event:MouseEvent):void
{

} 
```

编辑：好的，让我试着解释一下我想要实现的目标。我为如此含糊而道歉。我花了一些时间来弄清楚我要做什么。

我有 36 个按钮，我想做下面的代码。下面的代码是第一个按钮。下一个按钮需要是 u2、u3、u4 等。因此，以下代码中 u1 的所有实例都需要针对每个按钮进行相应更改。如何在不重复此代码 36 次的情况下执行此操作？代码在时间线上。

```
f_presets.user_presets.u1.addEventListener(MouseEvent.MOUSE_DOWN, u1);

function u1(event:MouseEvent):void
{

if (saveFlag == "play")
{

userSave = "u1";
myuserSave();

}
else
{
    userSave = "u1";
myuserPlay();

}

} 
```

**最终编辑** 感谢所有帮助。这就是最终为我工作的原因。

```
for (var i:Number=1; i<37; i++)
{
var userSaver = "u" + i;
f_presets.user_presets[userSaver].addEventListener(MouseEvent.MOUSE_DOWN, recall);
function recall(event:MouseEvent):void
{
    if (saveFlag == "play")
    {
        trace(userSave = event.currentTarget.name);
        myuserSave();
    }
    else
    {
        trace(userSave = event.currentTarget.name);
        if (mySO.data["user_saved" + userSave] == "yes")
        {
            myuserPlay();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:39:04.840

不确定我是否理解您要实现的目标，但假设 userSave 将采用多个值...

```
//save userSave for later
user_presets["u"+userSave].id = String(userSave);
//add listener
user_presets["u"+userSave].addEventListener(MouseEvent.MOUSE_DOWN, eventHandler);

function eventHandler(event:MouseEvent):void
{
    //retrieve userSave from target
    var userSaveValue:Number = Number(event.target.id);
    //do something based on value of userSave...?    
} 
```

或者也许使用内联函数（绝对不是最佳实践，但有时必须）：

```
user_presets["u"+userSave].addEventListener(MouseEvent.MOUSE_DOWN, function(event:MouseEvent){
    //code here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T02:09:36.320

您需要调整您的方法以使其简单化。

首先我假设 save_presets 的孩子都是你的按钮。如果没有，您应该考虑为这些按钮创建一个容器，以便您可以简单地执行此操作：

```
for(var index:int = 0;index < save_presets.numChildren;index++)
{
    var button:MovieClip = save_presets.getChildAt(index) as MovieClip;
    button.id = index;
    button.addEventListener(MouseEvent.MOUSE_DOWN, eventHandler);
} 
```

要删除处理程序，您可以这样做：

```
for(var index:int = 0;index < save_presets.numChildren;index++)
{
    var button:MovieClip = save_presets.getChildAt(index) as MovieClip;
    button.removeEventListener(MouseEvent.MOUSE_DOWN, eventHandler);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T23:17:52.073

**编辑：**

好吧，我很确定我知道你想做什么，这是一个示例类。此类创建 36 个方形按钮，每个按钮之间有 1 个像素间距。每个按钮都有一个事件侦听器，当鼠标悬停在按钮上时，每个按钮都会触发一个事件。我希望这会有所帮助，如果不让我知道

```
package {

import flash.display.MovieClip;
import flash.events.*;
import flash.geom.*; // Used to create rectangle for buttons

/**
 * ...
 * @author [Your Name Here]
 */
public class Main extends MovieClip
{
    public var user_presets:Array; // Array to store buttons

    public const BUTTON_COUNT:int = 36; // How many buttons do you want?

    public function Main():void 
    {   
        user_presets = new Array(); // Initialize button array

        this.addEventListener(Event.ADDED_TO_STAGE, onAddedToStage); // Listener for ADDED_TO_STAGE event
    }

    private function onAddedToStage(e:Event = null):void 
    {
        var tmpX:int = 0; // Button's x value
        var tmpY:int = 0; // Button's y value

        for (var i:int = 0; i < BUTTON_COUNT; i++) { // For loop to create 36 buttons

            var tmpButton:MovieClip = new MovieClip(); // Create a temporary button

            tmpButton.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown); // Add MOUSE_DOWN event listener to the temporary button

            tmpButton.graphics.beginFill(0x000000, 1); // Fill the rectangle we create with 0x000000 (Black)
            tmpButton.graphics.drawRect(0, 0, 10, 10); // Draw a 10 x 10 rectangle that will be one button
            tmpButton.graphics.endFill(); // Stop filling rectangle

            tmpButton.name = "u" + (i + 1); // This is your u1, u2 ... u(n) where n is how many buttons you want
            tmpButton.x = tmpX; // Temporary buttons x value
            tmpButton.y = tmpY; // Temporary buttons y value

            tmpX += 11; // Add 11 to tmpButtons x value, basically adding a 1 pixel space between each button

            user_presets.push(tmpButton); // Add the temporary button to your user_presets array

            stage.addChild(tmpButton); // Add the temporary button to the stage

            } // Repeat above steps 35 times

        this.removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage); // Remove the ADDED_TO_STAGE listener
    }

    public function onMouseDown(event:Event):void
    {
        trace(event.currentTarget.name); // Output which button was clicked

        // I used a switch statement but you can use if else statements if you'd like,
        // I think switch statements are easier to code for alot of conditionals.
        switch(event.currentTarget.name) {
            case "u1": // If the mouse is down over the first button, output "u1 was clicked!"
                trace("u1 was clicked!");
                break;

            case "u2": // If the mouse is down over the second button, output "u2 was clicked!"
                trace("u2 was clicked!");
                break;
        }
    }

} 
```

}

# ruby-on-rails - simple_form f.hidden_ field 有效，为什么不 f.input？

> ID：13887740
> 
> 赞同：6
> 
> 时间：2012-12-14T23:35:03.683
> 
> 标签：ruby-on-rails, simple-form

```
= simple_form_for @foo do |f|

  # this works
  = f.hidden_field :asdf, :value => @some.thing

  # this works
  = f.input :asdf, :as => "hidden", :input_html => { :value => @some.thing }

  # Why doesn't this work, exactly?
  = f.input :title, :as => "hidden", :value => @some.thing 
```

当我查看我的日志时，我发现该值在后一个输入中以空字符串的形式出现，但我不清楚为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T01:38:34.697

`f.hidden_field`是一个[ActionView::Helpers::FormHelper](http://apidock.com/rails/v3.2.8/ActionView/Helpers/FormHelper/hidden_field)而`f.input`属于[SimpleForm](https://github.com/plataformatec/simple_form#usage)。

语法类似，但有一些不同。

# javascript - 来自 CSV 的 D3.js 树布局

> ID：13887741
> 
> 赞同：1
> 
> 时间：2012-12-14T23:35:03.620
> 
> 标签：javascript, csv, d3.js

我目前正在考虑使用 d3.layout.tree 模块从 CSV 文件构建树布局。我能够复制[这里](https://stackoverflow.com/questions/11088303/how-to-convert-to-d3s-json-format/11089330#11089330)给出的答案。然而，只需将数据修改为如下所示：

```
source,target
A0,A1
A0,A2
A1,A2
A2,A3
A2,A4 
```

我们发现在调用 tree.node(links) 之后，我们得到了链接数组中第一个元素的以下示例输出（来自 Chrome 开发控制台）

```
Object
source: Object
children: Array[2]
depth: 0
name: "A0"
x: NaN
y: 0
__proto__: Object
target: Object
children: Array[1]
depth: 1
name: "A1"
parent: Object
x: NaN
y: 440
__proto__: Object
__proto__: Object 
```

对应的节点数组为：

```
Object
children: Array[2]
0: Object
1: Object
length: 2
__proto__: Array[0]
depth: 0
name: "A0"
x: NaN
y: 0
__proto__: Object 
```

请注意，它在“x”字段中包含“NaN”值。我无法确定为什么这个示例不产生 A0 是具有两个孩子 (A1,A2) 的根，就像 A2 对 (A3,A4) 所做的那样。感谢任何帮助，真的很喜欢 D3。显然这意味着我不会得到想要的树，我如何构造树数据结构来提供想要的树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:30:22.137

您上面的数据不是一棵树。与`A1,A2`您一起创建循环引用（其中一个节点可以有多个父节点）。如果您的数据是正确的，那么这是一个力导向图，也[可以在 D3 中创建](http://bl.ocks.org/4062045)。

# spring - 尝试使用 JSF、Spring 和 Hibernate 存储对象时出现 NullPointerException

> ID：13887742
> 
> 赞同：0
> 
> 时间：2012-12-14T23:35:05.460
> 
> 标签：spring, hibernate, jsf, maven, nullpointerexception

我对使用 JSF、Spring、Hibernate 和 Maven 非常陌生。但到目前为止，我创建了一个简单的项目，它在 jsf 页面上接受名字和姓氏。将其传递给托管 bean > 然后将其传递给我的服务层的单独模块上的 pojo。这一切都有效，但现在我正在尝试在项目中实现休眠。我在服务层的 pom 中添加了几个依赖项，在资源文件夹（db.properties、applicationContext.xml、datasource.xml、HibernateSessionFactory.xml）中创建了一些文件，并创建了一个快速的小 dao 文件。架构很糟糕，但在我开始设计一个大项目之前，我只想获得一个快速示例。

我的 Web 层上的应用程序上下文文件只是将我的托管 bean 设置为连接到我的服务层。它没有任何休眠配置，因为我想在我的服务层上进行所有处理和数据库交互。另外，我在我的 pojo 上使用休眠注释。

当我运行我的服务器时，我可以访问我的网页，输入名字和姓氏，然后点击提交。当我调试时，它将变量从我的托管 bean 设置到我的服务层，然后我的服务层从 customerdao 对象调用 addCustomer。我的 getHibernateTemplate().save(customer); 上出现空指针异常；线。

```
WARNING: #{formBean.findBalance}: java.lang.NullPointerException
javax.faces.FacesException: #{formBean.findBalance}: java.lang.NullPointerException
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:117)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: javax.faces.el.EvaluationException: java.lang.NullPointerException
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:101)
    ... 23 more
Caused by: java.lang.NullPointerException
    at com.scott.common.test.Customer.save(Customer.java:52)
    at com.scott.common.CustomerBackingBean.findBalance(CustomerBackingBean.java:51)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:278)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88)
    ... 24 more 
```

这是我的 HibernateSessionFactory.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<!-- Hibernate session factory -->
<bean id="sessionFactory" 
     class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">

    <property name="dataSource">
      <ref bean="dataSource"/>
    </property>

    <property name="hibernateProperties">
       <props>
         <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
         <prop key="hibernate.show_sql">true</prop>
       </props>
    </property>

    <property name="annotatedClasses">
    <list>
        <value>com.scott.common.test.Customer</value>
    </list>
    </property> 

</bean>
</beans> 
```

这是我的 db.properties

```
jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/scottdb
jdbc.username=djdjdi
jdbc.password=dldljdl

This is my datasource.xml
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

 <bean 
   class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
   <property name="location">
        <value>db.properties</value>
   </property>
</bean>

  <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
  </bean>

</beans> 
```

这是我的 applicationContext.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

        <bean id="customerDao" 
             class="com.scott.common.test.CustomerDAO" >
            <property name="sessionFactory" ref="sessionFactory" />
        </bean>

</beans> 
```

这是我的customerdao类

```
package com.scott.common.test;

import org.springframework.orm.hibernate3.support.HibernateDaoSupport;

public class CustomerDAO extends HibernateDaoSupport
{   
    public void addCustomer(Customer customer)
    {
        customer.setDescript("Test description");
        getHibernateTemplate().save(customer);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:41:00.343

只是一个猜测 -`customer`可能`null`。尝试进行此更改，以检查客户对象是否为空：

```
public class CustomerDAO extends HibernateDaoSupport
{   
    public void addCustomer(Customer customer)
    {
        if (customer == null ) {
            return; // do nothing if the customer is null
        }
        customer.setDescript("Test description");
        getHibernateTemplate().save(customer);
    }
} 
```

任何时候你在一个为空的对象上调用一个方法，你都会得到一个 NPE。

另一种选择是抛出一个更有帮助的异常：

```
if (customer == null ) {
     throw new IllegalArgumentException("customer may not be null");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:58:55.070

只是另一个猜测 - 可能 Spring bean 没有正确初始化。尝试检查：

1.  customerDAO 是通过 Spring 还是某个明确的 new CustomerDAO() 创建的？
2.  检查调试器 sessionFactory 和其他与会话相关的属性。

**更新**：查看代码后，猜测得到证实：Spring 配置错误。在 2 个 eclipse 项目中有 2 个独立的应用程序上下文。需要将其合并为一个（用于 Web 应用程序）。

# jquery - jQuery - 组合函数

> ID：13887747
> 
> 赞同：1
> 
> 时间：2012-12-14T23:35:58.037
> 
> 标签：jquery

一个一直困扰我一段时间的。我如何将这三组代码组合在一起？

```
$(".fly-out-menu").toggle(
      function () {
        $('#page').animate({left: 250}, 'fast'); },
      function () {
        $('#page').animate({left: 0}, 'fast'); }
);
$(".fly-out-menu").toggle(
      function () {
        $('.sticky-container').animate({left: 250}, 'fast'); },
      function () {
        $('.sticky-container').animate({left: 0}, 'fast'); }
);
$(".fly-out-menu").toggle(
      function () {
        $('body').css('position','fixed') },
      function () {
        $('body').css('position','static') }
); 
```

谢谢，R

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T23:40:07.837

像那样？

```
$(".fly-out-menu").toggle(
    function(){
        $('#page, .sticky-container').animate({left: 250}, 'fast');
        $('body').css('position','fixed');
    },
    function(){
        $('#page, .sticky-container').animate({left: 0}, 'fast');
        $('body').css('position','static');
    }
); 
```

正如@undefined 所指出的，此事件现在已被弃用。
自己处理这个问题的一种方法是：

```
$(".fly-out-menu").on("click", function(){
    var t = $(this);
    if(!t.data("alreadyclicked")){
        t.data("alreadyclicked", true);
        $('#page, .sticky-container').animate({left: 250}, 'fast');
        $('body').css('position','fixed');
    } else {
        t.data("alreadyclicked", false);
        $('#page, .sticky-container').animate({left: 0}, 'fast');
        $('body').css('position','static');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:40:30.390

你的意思是这样吗？

```
$(".fly-out-menu").toggle(
function () {
    $('#page').animate({left: 250}, 'fast'); 
    $('.sticky-container').animate({left: 250}, 'fast');
    $('body').css('position','fixed');
},
function () {
    $('#page').animate({left: 0}, 'fast');
    $('.sticky-container').animate({left: 0}, 'fast');
    $('body').css('position','static');
}
); 
```

或者像这样：

```
$(".fly-out-menu").toggle(
function () {
    $('#page, .sticky-container').animate({left: 250}, 'fast');
    $('body').css('position','fixed');
},
function () {
    $('#page, .sticky-container').animate({left: 0}, 'fast');
    $('body').css('position','static');
}
); 
```

# sql - sql server 中的 3d 空间对象

> ID：13887748
> 
> 赞同：6
> 
> 时间：2012-12-14T23:35:59.537
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2012, spatial

有什么方法可以使用空间数据类型在 SQL Server 中定义 3D 实体？

如果是这样，我可以看到一个如何做到这一点的例子吗？比如说，只是一个 1x1x1 的简单立方体？我是否必须定义 6 个多边形（立方体的每个面 1 个）并以某种方式将它们一起使用？

我在网上阅读的所有内容都倾向于显示纯粹使用 2D 形状的示例。我确实知道 Point 类型可以处理 X、Y、Z（和 M） - 所以空间 3D 是可能的，但我发现很难找到好的例子。特别是多边形/实体。

我想如果这是可能的，它会引出我的下一个问题：我很想使用一些可用的空间方法：STIntersection()、STContains() 等。针对这些 3D 对象。因为我们在 3D 中，所以 STVolume() 函数会很棒！但我想这是我必须自己动手的事情。

也许我需要一个包含 SQL CLR 类型和空间扩展方法的库？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:43:01.080

早在 2008 年就已请求 3D 空间对象（关于 Connect：[提供对 3D 地理空间数据的支持）。](https://connect.microsoft.com/SQLServer/feedback/details/349552/provide-support-for-3d-geo-spatial-data)

正如您所提到的，可以利用 X、Y、Z 和 M 来表示具有高程的点，但*目前还没有直接支持操纵 3D 对象*。

> 以下示例创建一个具有 Z（高程）和 M（测量）值的 Point 实例，并使用 Z 获取实例的 Z 值。
> 
> ```
> DECLARE @g geometry;
> SET @g = geometry::STGeomFromText('POINT(1 2 3 4)', 0);
> SELECT @g.Z; 
> ```

[参考](http://msdn.microsoft.com/en-us/library/bb933920%28SQL.100%29.aspx)。

[SQL Server 2012](http://go.microsoft.com/fwlink/?LinkId=226407)中的新空间功能中没有提及此或其他 3D 功能

# php - 致命错误：不在对象上下文中使用 $this

> ID：13887749
> 
> 赞同：0
> 
> 时间：2012-12-14T23:36:01.870
> 
> 标签：php

我有一个为工厂方法编写的类，并且在第 22 行不断收到错误消息，其中指出：

*致命错误：不在对象上下文中使用 $this*

我看过其他人的帖子和类似的问题，但可惜我不明白发生了什么，无法将他们作为答案应用到我的情况。

我的班级是这样称呼的：

```
$class = AisisCore_Factory_Pattern('class_you_want'); 
```

然后从那里执行以下操作：

```
class AisisCore_Factory_Pattern {

    protected static $_class_instance;

    protected static $_dependencies;

    public function get_instance(){
        if(self::$_class_instance == null){
            $_class_instance = new self();
        }

        return self::$_class_instance;
    }

    public function create($class){
        if(empty($class)){
            throw new AisisCore_Exceptions_Exception('Class cannot be empty.');
        }

        if(null === self::$_dependencies){
            $this->_create_dependecies();
        }

        if(!isset(self::$_dependencies['dependencies'][$class])){
            throw new AisisCore_Exceptions_Exception('This class does not exist in the function.php dependecies array!');
        }

        if(isset(self::$_dependencies['dependencies'][$class]['arguments'])){
            $new_class =  new $class(implode(', ', self::$_dependencies['dependencies'][$class]['params']));
            return $new_class;
        }else{
            $new_class = new $class();
            return $new_class;
        }

    }

    private function _create_dependecies(){
        self::$_dependencies = get_template_directory() . '/functions.php';
    }

} 
```

它吓坏了：

```
$this->_create_dependecies(); 
```

我不确定这是如何脱离上下文或如何正确称呼它....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:38:56.963

你的错误说你在`$this`不能使用的时候使用，所以这里是部分：

```
$this->_create_dependecies(); 
```

将其更改为：

```
self::_create_dependecies(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:22:24.047

因此，如果您尝试以单例方式执行此操作，则需要静态定义 get_instance() 方法。进一步你如何调用create（）？我根本没有看到任何提及。也许 create() 应该是一个公共静态函数，然后改变你的 $this->_create_dependecies(); 到 self::_create_dependencies() 并将 static 关键字添加到 create_dependencies 方法的定义中，使其成为公共静态函数 create_dependencies。然后你把它们放在一起......

```
$class = AisisCore_Factory_Pattern::create('class_you_want');

class AisisCore_Factory_Pattern {

  protected static $_class_instance;

  protected static $_dependencies;

  public static function get_instance(){
    if(self::$_class_instance == null){
        $_class_instance = new self();
    }

    return self::$_class_instance;
  }

  public static function create($class){
    if(empty($class)){
        throw new AisisCore_Exceptions_Exception('Class cannot be empty.');
    }

    if(null === self::$_dependencies){
        self::_create_dependecies();
    }

    if(!isset(self::$_dependencies['dependencies'][$class])){
        throw new AisisCore_Exceptions_Exception('This class does not exist in the function.php dependecies array!');
    }

    if(isset(self::$_dependencies['dependencies'][$class]['arguments'])){
        $new_class =  new $class(implode(', ', self::$_dependencies['dependencies'][$class]['params']));
        return $new_class;
    }else{
        $new_class = new $class();
        return $new_class;
    }

}

private static function _create_dependecies(){
    self::$_dependencies = get_template_directory() . '/functions.php';
} 
```

}

那应该可以。如果你真的想非静态地访问它（是的，我知道这不是一个真实的词，但我喜欢它）你应该说这样的话......

```
$class = AisisCore_Factory_Pattern::get_instance()->create('class_you_want');
//or...
$class = AisisCore_Factory_Pattern::get_instance();
$newclass = $class->create('class_you_want'); 
```

当然，在第二个示例中，您将从 create 函数定义中删除 static 关键字

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T23:38:30.123

我相信你应该写`$class = new AisisCore_Factory_Pattern("class_you_Want");`

# ruby-on-rails - 使用 Devise 的 Rails 项目中的语法错误，意外的“，”

> ID：13887750
> 
> 赞同：1
> 
> 时间：2012-12-14T23:36:15.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我是一个非常新的编码器，尤其是 Rails。非常感谢任何帮助。

我的 user.db 文件抛出异常。我正在尝试按照教程设置 Devise，这样做需要在我的 user.rb 文件的 attr_accessible 行中添加 :first_name :last_name 和 :profile_name 。

但是当我运行我的本地服务器时，我得到了一个例外。

确切的错误是：

```
/Users/Trevor/Documents/RailsProjects/treebook/app/models/user.rb:10: syntax error, unexpected ',', expecting keyword_end
                  :first_name, :last_name, :profile_name 
```

我不知道什么会有所帮助，所以这是整个跟踪（我通过删除有罪的代码、启动服务器、重新添加代码和刷新浏览器来得到这个。）

完整的跟踪是：

```
activesupport (3.2.9) lib/active_support/dependencies.rb:469:in `load'
activesupport (3.2.9) lib/active_support/dependencies.rb:469:in `block in load_file'
activesupport (3.2.9) lib/active_support/dependencies.rb:639:in `new_constants_in'
activesupport (3.2.9) lib/active_support/dependencies.rb:468:in `load_file'
activesupport (3.2.9) lib/active_support/dependencies.rb:353:in `require_or_load'
activesupport (3.2.9) lib/active_support/dependencies.rb:502:in `load_missing_constant'
activesupport (3.2.9) lib/active_support/dependencies.rb:192:in `block in const_missing'
activesupport (3.2.9) lib/active_support/dependencies.rb:190:in `each'
activesupport (3.2.9) lib/active_support/dependencies.rb:190:in `const_missing'
activesupport (3.2.9) lib/active_support/inflector/methods.rb:230:in `block in constantize'
activesupport (3.2.9) lib/active_support/inflector/methods.rb:229:in `each'
activesupport (3.2.9) lib/active_support/inflector/methods.rb:229:in `constantize'
activesupport (3.2.9) lib/active_support/dependencies.rb:554:in `get'
activesupport (3.2.9) lib/active_support/dependencies.rb:588:in `constantize'
devise (2.1.2) lib/devise.rb:256:in `get'
devise (2.1.2) lib/devise/mapping.rb:77:in `to'
devise (2.1.2) app/controllers/devise_controller.rb:28:in `resource_class'
devise (2.1.2) app/controllers/devise/registrations_controller.rb:81:in `build_resource'
devise (2.1.2) app/controllers/devise/registrations_controller.rb:7:in `new'
actionpack (3.2.9) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.9) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.9) lib/active_support/callbacks.rb:436:in `_run__3399957301248495580__process_action__4505264721263125690__callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.9) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.9) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.9) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.9) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.9) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.9) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.9) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.9) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:36:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/mapper.rb:42:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.9) lib/action_dispatch/routing/route_set.rb:601:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.9) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `_run__1758572527611354071__call__3978322130075018224__callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.9) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.9) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.9) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.9) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.9) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.9) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.9) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.9) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.9) lib/rails/engine.rb:479:in `call'
railties (3.2.9) lib/rails/application.rb:223:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.9) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/Trevor/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/Trevor/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/Trevor/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:24:32.407

不确定您的确切语法错误是什么，但正确的声明是：

```
class User
    attr_accessible :first_name, :last_name, :profile_name
end 
```

# java - 让 Java 等到之前的 Try 完成

> ID：13887755
> 
> 赞同：0
> 
> 时间：2012-12-14T23:36:34.943
> 
> 标签：java, connection, wait, etl

我有一种从 MySQL 数据库中提取和清理数据的方法。

该过程的下一步是将这些数据移动到 Oracle 数据库。

但是，在从 MySQL 中提取和清理数据的过程中，我与 oracle db 有一个连续的连接。这不是必需的，并且会极大地减慢提取过程。

如何让 java 等到提取/清理过程完成，然后连接到 Oracle？

这是我的代码：

```
public void ConvertFiles() {

    try {

        connectToDB();

        RawFile tempFile = new RawFile(super.mFileType);
        try {
            ArrayList<String> values = new ArrayList<String>();

            try {
                Statement stmt = conn.createStatement();
                ResultSet result = stmt.executeQuery("SELECT * FROM coffeedata");
                int ii = 0;
                while (result.next()) {
                    ii++;
                    System.out.print("Reading Row:" + ii + "/" + 41429 + "\n");
                    mStore = (result.getString(1));
                    mCategory = (result.getString(2));
                    mName = (result.getString(3));

                    // Add columns 2007 Q1 - Q4 t/m 2009 Q1 - Q2 to ArrayList   

                    for (int i = 4; i < 14; i++) {
                        values.add("" + result.getInt(i));

                    }
                    tempFile.addData(new SQLData(mCategory, mName, values, mStore));

                    try {
                        OracleController.DataToOracle();

                    } catch (Exception e) {
                        System.out.println(e.getMessage());

                    }
                }

                tempFile.CleanCategory();
                mRawFiles.add(tempFile);

            } catch (Exception e) {
                System.out.println(e.getMessage());
                closeDBConnection();

            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
            //return values;
            //System.out.println(values);

        }
    } catch (Exception e) {
        System.out.println(e.getMessage());
    } 
```

为了澄清：我想让这个 Try 等到前一个完成：

```
try {
    OracleController.DataToOracle();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:55:16.557

重构您的代码并在您想要等待`try`之后放置您的块。`try - catch - finally`

```
try{
    //block that you need to excecute before
} catch { ... }
// Than your block
try {
     OracleController.DataToOracle();
 } catch (Exception e)

                    } 
```

# c# - 为什么我的 WAMS 查询期望的参数类型与我提供的不同？

> ID：13887761
> 
> 赞同：0
> 
> 时间：2012-12-14T23:37:34.880
> 
> 标签：c#, azure, windows-8, azure-mobile-services

使用此代码：

```
public static async Task<List<DUCKBILLED_PLATYPI>> GetLocationsForPlatypiAndTimeRange(HashSet<string> PlatypiIds, DateTime EarliestToShow, DateTime LatestToShow)
{
    List<DUCKBILLED_PLATYPI> listLocs = new List<DUCKBILLED_PLATYPI>();
    List<string> PlatypusBillIDList;
    string PlatypusBillID; 
    IMobileServiceTable<DUCKBILLED_PLATYPI> table = App.MobileService.GetTable<DUCKBILLED_PLATYPI>();
    MobileServiceTableQuery<DUCKBILLED_PLATYPI> query;

    foreach (var item in PlatypiIds)
    {
            PlatypusBillIDList = await GetPlatypusBillIDForPlatypusID(item);
    PlatypusBillID = PlatypusBillIDList[0];
    query = 
        table.Where(l => l.PlatypusBillID == PlatypusBillID).
              Where(l => l.UpdateTimeUTC >= EarliestToShow).
              Where(l => l.UpdateTimeUTC <= LatestToShow).
              OrderBy(l => l.UpdateTimeUTC);
    listLocs.Add(query);
    }
    return listLocs;
} 
```

...我在同一行收到两条错误消息（“ *listLocs.Add(query);* ”行）；他们是：

```
1) Error    1   The best overloaded method match for 'System.Collections.Generic.List<MetroSandboxPlaypen.TaSLs_Data.DUCKBILLED_PLATYPI>.Add(MetroSandboxPlaypen.TaSLs_Data.DUCKBILLED_PLATYPI)' has some invalid arguments
2) Error    2   Argument 1: cannot convert from 'Microsoft.WindowsAzure.MobileServices.MobileServiceTableQuery<MetroSandboxPlaypen.TaSLs_Data.DUCKBILLED_PLATYPI>' to 'MetroSandboxPlaypen.TaSLs_Data.DUCKBILLED_PLATYPI' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T01:24:14.363

您还没有执行查询；您需要实现它：[await query.ToListAsync](http://msdn.microsoft.com/en-us/library/windowsazure/jj554292.aspx)或[await query.ToEnumerableAsync](http://msdn.microsoft.com/en-us/library/windowsazure/jj554287.aspx)。您还需要使用[listLocs.AddRange](http://msdn.microsoft.com/en-US/library/z883w3dc%28v=vs.110%29.aspx)与`Add`，因为您可能会返回 0、1 或多行。

另一方面，您期望有多少项目`PlatypiIds`？您的循环看起来对每个项目至少进行两次服务调用，因此您可能想要测试聊天是否对最终用户体验产生影响，而是尝试通过一两个查询来获取所有数据。

# javascript - 使用二维数组作为查找表与计算点击

> ID：13887763
> 
> 赞同：1
> 
> 时间：2012-12-14T23:37:50.663
> 
> 标签：javascript, lookup-tables

我有一个宽度为 1000，高度为 600 的画布。在这个画布中，我有 300-500 个矩形图块，每个图块都有自己的 id。我可以检测画布内的鼠标坐标，但我必须有一个 1000 x 600 的二维数组作为查找表，或者运行一个算法来查找坐标是否在图块内。这是 javascript，所以它都在浏览器中。1000 x 600 二维数组对于浏览器来说是否太多了？在实现方面，查找表是迄今为止更简单的解决方案（并且可能更快），但是空间上的权衡是否太多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:25:55.697

这可能取决于数字。

如果有**很多**点击，并且目标的位置没有改变，那么按照您的建议预先计算映射*可能会更有效。*

但是，生成初始映射的成本相对较高，如果显示发生变化，您会再次产生该成本（认为有办法减轻这种情况）。我的**猜测**是，循环遍历目标并为每次点击进行数学运算可能会更快，因为当它只是矩形时，数学运算不应该非常复杂/密集。

我想说，使用最容易实现的东西。如果它的性能不够好（或者，您只是想试一试），请尝试替代方案并进行比较**。**

# mysql - MYISAM 分片与使用 InnoDB

> ID：13887770
> 
> 赞同：0
> 
> 时间：2012-12-14T23:38:36.150
> 
> 标签：mysql, database, innodb, myisam

我有一个非常高的插入率和更新率以及读取率的表。平均每秒插入和更新大约 100 行。每秒大约有 1000 次选择。

该表有大约 1 亿个元组。这是一个关系表，所以它只有大约 5 个字段。三个字段包含键，因此它们被索引。所有字段都是整数。

我正在考虑对数据进行分片，但是，它增加了很多复杂性，但确实提供了速度。另一种选择是使用 innodb。

该数据库在 256GB ssd 的 RAID 1 上运行，具有 32GB 1600mhz 的 RAM 和超频至 4Ghz 的 i7 3770k

数据库在高峰时间不断冻结，其中查询可能高达 200 行被插入或更新，每秒 2500 次选择

你们能指出我应该做什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T01:16:29.553

分片通常是分配表大小的好主意。负载问题通常应通过复制数据环境来解决。在您的情况下，您的问题是a）巨大的表和b）表级锁定和c）糟糕的硬件。

## InnoDB

如果您可以使用表上的一个键作为主键，那么 InnoDB 可能是一个不错的选择，因为他会让您进行行级锁定，这可能会减少您的查询相互等待。一个好的测试可能是将您的表复制到测试服务器并尝试针对他的所有查询，看看性能优势是什么。InnoDB 的资源消耗率高于 MyISAM，因此请记住这一点。

## 硬件

对不起，伙计，但您的硬件无法满足您所需的性能。Twitter 以 2.6k QPS 每秒执行 34 次写入。你不能在做 Twitter 的音量时并认为增强的游戏桌面会减少它。购买带有一些 SSD 驱动器的 15,000 美元的戴尔，您将能够突破 100,000 QPS。你现在正处于大时代。是时候放弃启动设备并为自己准备一台不错的服务器了。你*不想*分片。升级硬件会更便宜，坦率地说，你需要这样做。

## 分片

分片非常适合拆分大表。就是这样。

让我把坏事说清楚。**开发分片架构很糟糕**。你想尽一切可能**不分**片。升级硬件，购买多台服务器并设置复制，优化你的代码，但看在上帝的份上，不要分片。您远远低于分片的性能线。当你的推力持续 30k+ QPS 时，我们就可以谈分片了。直到那天，NO。

您可以购买一台配备 16 核 5TB Fusion IO 和 256 GB RAM 的中端服务器（3 万美元 Dell PowerEdge），他将带您一路达到 200k QPS。

但是，如果你拒绝听我的话并且无论如何都要分片，那么这就是你需要做的。

### 规则 1：保持在同一个分片上（即选择分区规则）

分片后，您*不*希望跨多个分片访问数据。您需要选择一个分区规则，尽可能将您的查询保持在同一个分片上。在分布式数据环境中分发查询（规则 4）非常痛苦。

### 规则 2：构建分片映射并复制它

您的代码需要能够访问所有分片。根据你的分区规则创建一个分片映射，让你的代码知道去哪里获取他想要的数据。

### 规则 3：为分片编写查询包装器

你不想手动决定去哪个分片。写一个为你做的包装器。当你编写代码时，你会感谢自己。

### 规则 4：自动平衡

您最终需要平衡分片以保持最佳性能。事先为此做好计划并编写代码，目的是让你有一些 kron 工作来平衡你的分片。

### 规则 4：支持分布式查询

您不可避免地需要打破规则 1。发生这种情况时，您将需要一个查询包装器，它可以从多个分片中提取数据并将其聚合（带入）到一个地方。您拥有的分片越多，就越有可能需要多线程。在我的商店中，我们称之为分布式查询（即在多个分片上运行的查询）。

坏消息：没有用于执行分布式查询和聚合结果的代码。Apache Hadoop 尝试过，但他很糟糕。HiveDB 也是如此。一个好的查询分发器*很难*架构、*难以*编写、*难以*优化。这是公司每年要处理的数十亿美元的问题。我不拉屎你，但如果你想出一个很好的包装器来跨分片分布查询，支持排序+限制子句并很好地扩展，你可能一夜之间成为百万富翁。卖30万美元？你门外有一英里长的队伍。

我的观点是分片很难而且很昂贵。这需要大量的工作，并且您想尽一切可能*不*进行分片。如果必须，请遵守规则。

# javascript - 带文件上传的自动提交表单

> ID：13887773
> 
> 赞同：1
> 
> 时间：2012-12-14T23:38:40.813
> 
> 标签：javascript, jquery, internet-explorer

我正在通过在我自己的应用程序中托管 IE 来编写特定的表单填充器。我需要能够在`<input type="file" />`遇到某些文件时通过“自动选择”某些文件来上传某些表单上的文件。由于我可以完全控制 HTML，因此我不需要显式指定文件路径，因为我知道`value`出于安全原因无法设置属性。我无法控制服务器端。

考虑到我可以自己读取文件内容，我也可以将实际内容提供给`<input>`元素，但我不确定是否支持。

我尝试更改 HTML 以便将`<input type="file" />`其替换为 a`<input type="hidden" value="QWERTY" />`但表单未正确上传。我怀疑这是因为文件上传和隐藏表单数据的传输方式并不完全相同。

那么，有没有办法在请求文件上传的情况下自动提交一些内容？我可以采取任何解决方案，包括直接 HTML 摆弄、javascript、jquery 等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:13:55.893

也许添加一个“onChange”事件处理程序来提交表单？

```
<form id="form">
    <input type="file" id="finput"/>
</form> 
```

jQuery：

```
$("#finput").on(change, function() { $("#form").submit(); }); 
```

# iphone - 调用另一个类中的方法失败

> ID：13887778
> 
> 赞同：0
> 
> 时间：2012-12-14T23:39:21.937
> 
> 标签：iphone, ios, class, methods

我已经建立了一个小项目，在这个项目中，我想在另一个控制器中调用一个方法。我已经像这个[例子](https://stackoverflow.com/questions/3235742/how-to-call-a-method-of-another-class)一样设置了。但是，我尝试运行代码，但没有调用该方法！

有谁知道我做错了什么？

我的代码：

**第二.h：**

```
#import <UIKit/UIKit.h>

@class First;

@interface Second : UIViewController {

}

@property (nonatomic, retain) First* vC;

@end 
```

**第二米：**

```
#import "Second.h"
#import "First.h"

@interface First ()

@end

@implementation First
@synthesize vC;

- (IBAction)dothis:(id)sender {

    NSLog(@"Hello World!");

    [self.vC getThis];

}

-(void)viewDidLoad {

UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self
               action:@selector(dothis:)
     forControlEvents:UIControlEventTouchDown];
    [button setTitle:nil forState:UIControlStateNormal];
    button.frame = CGRectMake(5, 70, 270, 200);

[super viewDidLoad];

}

@end 
```

**第一.h：**

```
#import <UIKit/UIKit.h>
#import "Second.h"

@interface First: UIViewController {
//some Outlets and so on...

}

-(void)getThis;

@end 
```

**第一.米：**

```
#import "First.h"

@interface First ()
@end

@implementation First

-(void)getThis {
NSLog(@"You reached the end-zone!");
}

@end 
```

在这里，您可以看到我的控制器的各个部分，但如果我运行该应用程序，它就可以正常工作。但是，就在我单击 Second 上的按钮时，它只显示“Hello World！” 而不是“你到达了终点区！”。我也用 alertviews 试过这个。有人可以教我如何解决这个问题吗？我认为第一个和第二个之间没有联系，但为什么呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:41:12.873

```
-(void)viewDidLoad {
self.vC  = [[First alloc] init]; //need this

UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self
           action:@selector(dothis:)
 forControlEvents:UIControlEventTouchDown];
[button setTitle:nil forState:UIControlStateNormal];
button.frame = CGRectMake(5, 70, 270, 200);

[super viewDidLoad];

} 
```

# java - 最适合性能的编码风格

> ID：13887780
> 
> 赞同：0
> 
> 时间：2012-12-14T23:39:26.163
> 
> 标签：java, android

一种情况，三种不同的方法。

**一**（变量在活动顶部声明为私有）：

```
radioGroup = (RadioGroup) findViewById(R.id.RadioGroup);

radioButton1 = (RadioButton) findViewById(R.id.RadioButton1);
radioButton2 = (RadioButton) findViewById(R.id.RadioButton2);

radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) {
        if (radioButton1.isChecked()) {
            // do something
        } else if (radioButton2.isChecked()) {
            // do something
        }
    }
}); 
```

**二：**

```
final RadioGroup radioGroup = (RadioGroup) findViewById(R.id.RadioGroup);

final RadioButton radioButton1 = (RadioButton) findViewById(R.id.RadioButton1);
final RadioButton radioButton2 = (RadioButton) findViewById(R.id.RadioButton2);

radioGroup.setOnCheckedChangeListener(new OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) {
        if (radioButton1.isChecked()) {
            // do something
        } else if (radioButton2.isChecked()) {
            // do something
        }
    }
}); 
```

**三：**

```
((RadioGroup) findViewById(R.id.RadioGroup)).setOnCheckedChangeListener(new OnCheckedChangeListener() {

    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) {
        if (((RadioButton) findViewById(R.id.RadioButton1)).isChecked()) {
            // do something
        } else if (((RadioButton) findViewById(R.id.RadioButton2)).isChecked()) {
            // do something
        }
    }
}); 
```

哪一个是“最好”的方法，或者它不介意？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T23:42:08.963

我觉得一和二没什么区别。然而，三个将遭受性能损失，因为每次`onCheckedChanged`被触发时，它都必须调用`findViewById`每个单选按钮。其他方法是“缓存”对`RadioButton`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:48:17.897

我认为使用 'one' 将是最好的方法，因为 private 通常在编译时被视为 final。其次，最终和私有的访问设置是相同的。

# javascript - 看门人 javascript

> ID：13887784
> 
> 赞同：0
> 
> 时间：2012-12-14T23:39:44.113
> 
> 标签：javascript, html

我正在使用一个名为 gatekeeper 的脚本。这是我的代码：

```
<!-- start GateKeeper code -->
<!-- http://www.HTMLisEasy.com/keeper/ -->
<form name="keeper" action="javascript:location.href =
    window.document.keeper.page.value + '/index.html'" style="margin:0;">
   <div style="display:inline;">
      <input type="text" name="page" />
      <input type="submit" value="Go" />
      <noscript>
         <div style="display:inline;color:#ff0000;
    background-color:#ffff66; font:normal 11px tahoma,sans-serif;">
            <br />Javascript is required to access this<br />area. Yours seems
            to be disabled.
         </div>
      </noscript>
   </div>
</form>
<!-- end GateKeeper code --> 
```

而不是在那里寻找文件夹，我想知道它是否可以在文件夹内查找文件夹而不将文件放在所有文件夹所在的位置。如果这不可能，请告诉我。

也许现在这会更好，当您在框中输入某些内容时，它会查看那里是否是一个文件夹，然后打开 index.html 但我希望它查看一个包含所有其他文件夹的文件夹，而不仅仅是它现在所在的位置.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:57:10.843

如果我理解正确，您应该能够将文件夹添加到表单开始标记中的操作字符串的前缀：

```
<form name="keeper" action="javascript:location.href = 'subfolder/' +
    window.document.keeper.page.value + '/index.html'" style="margin:0;"> 
```

第一行末尾的“子文件夹”是您想要的目录。

# ruby-on-rails - has_many ：通过关系解释

> ID：13887786
> 
> 赞同：0
> 
> 时间：2012-12-14T23:40:04.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我是 Rails 的新手，对我需要使用哪种关系有一些疑问。情况就是这样。

我有两个模型 Offer 和 User，一个用户可以属于许多优惠，而优惠可以有很多用户。用户也创建报价。

我想我必须使用 has_many :through rationship。例如，我创建了另一个模型“申请人”。申请人属于_to 用户和belongs_to 报价。但是用户和报价模型的关系如何？例如：

用户模型

```
 has_many :offer, :through => :applicant 
```

报价模式

```
 has_many :user, :through => :applicant 
```

我的怀疑是因为我已经有了这两种关系

用户模型

```
has_many :offers, :dependent => :destroy 
```

报价模式

```
belongs_to :user 
```

解决这个问题后，我必须从 applicanst_controller 保存申请模型中的记录，对吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:19:19.223

您所描述的是使用连接表[的多对多关系。](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)您实际上非常接近，但您只需`has_many :offers, :dependent => :destroy`要从您的用户模型和`blongs_to :user`您的报价模型中删除。它应该看起来像这样：

```
class User < ActiveRecord::Base
  has_many :offers, :through => :applicants
end

class Applicant < ActiveRecord::Base
  belongs_to :users
  belongs_to :offers
end

class Offer < ActiveRecord::Base
  has_many :users, :through => :applicants
end 
```

您不必担心相关的销毁部分，因为关联会随着相应对象的删除而自动删除。对于多对多关联，如何建立关系并不重要。以下任一方法都可以：

```
@user.offers << @offer

@offers.users << @user 
```

如果您不需要存储任何特定于您的申请人连接表的信息（例如，时间戳、描述），您可能希望查看[has_and_belongs_to_many](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)关系。查看[has_many_through 和 has_and_belongs_to_many 之间](http://guides.rubyonrails.org/association_basics.html#choosing-between-has_many-through-and-has_and_belongs_to_many)的选择以供参考。

## 编辑

下面是 HABTM 关系的代码：

```
class User < ActiveRecord::Base
  has_and_belongs_to_many :offers
end

class Offer < ActiveRecord::Base
  has_and_belongs_to_many :users
end 
```

# php - Symfony2 放置类的首选目录

> ID：13887787
> 
> 赞同：1
> 
> 时间：2012-12-14T23:40:05.383
> 
> 标签：php, ajax, symfony

我对 Symfony2 很*陌生*，我只是想知道这样做的首选方式是什么。

我有很多涉及接收表单数据和处理它的**管理操作。**自然，当处理完成时，控制器动作会发送`return $this->redirect($this->generateUrl('.....'));`.

现在，由于我已经制作了一个通过 ajax 提交表单的 JavaScript，如果浏览器支持它，我需要修改我的控制器操作以返回`Response`包含的对象，`json array`但前提是请求是通过 ajax 发送的。

1.  是否可以识别发送到控制器的请求是否是 AJAX 请求？

2.  目录树中的哪个位置是放置类的首选位置，该类`ResponseHandler`将根据请求类型进行重定向或返回 json 数组？我意识到 Symfony2 对这些事情非常严格，所以我想从一开始就做好。也许其中甚至已经捆绑了解决方案？

**更新**

我发现我可以在控制器中使用 $this->getRequest->isXmlHttpRequest() 。

问题 2 仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:18:50.727

> 目录树中的哪个位置是放置名为 ResponseHandler 的类的首选位置，它将根据请求类型进行重定向或返回 json 数组？

如果您执行 AJAX 请求，则将数据存储在参数、POST 或 GET 参数中。您可以通过以下方式在控制器中访问此参数：

```
// ...
public function finishAction()
{
    // if you use a GET request
    $data = $this->getRequest->query->get('my-get-parameter');
    // and if you use a POST request
    $data = $this->getRequest->request->get('my-get-parameter');

    // ... do something with the data
} 
```

但是要回答您的问题：
symfony 核心框架使用 Event Dispatcher 组件来触发和附加事件。这些事件在 Symfony 代码中随处触发。您可以将一个类附加到一个事件，当该事件被触发时，您可以更改它。这样，您可以修改`Response`对象。

代码中抛出的事件可以`*Events`在该组件的类中找到。在这种情况下，我们想要[`REQUEST`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpKernel/KernelEvents.php#L23-36)事件。在文档中阅读有关事件调度​​程序以及如何附加事件的更多信息：[事件调度程序组件](http://symfony.com/doc/current/components/event_dispatcher/introduction.html)和[Symfony2 框架特定文档](http://symfony.com/doc/current/cookbook/event_dispatcher/index.html)。

> 我意识到 Symfony2 对这些事情非常严格

Symfony 对您的目录结构并不严格。它提供具有推荐结构的默认标准版，但您可以更改它以使其成为您的。如果一个类是用 PSR-0 标准编写的，symfony 会加载你需要的所有类。

# backbone.js - Backbone JS、Marionette 和 Require JS

> ID：13887790
> 
> 赞同：2
> 
> 时间：2012-12-14T23:40:25.683
> 
> 标签：backbone.js, requirejs, marionette

我正在尝试使用木偶来掌握 Backbone 和 Require JS 的一些出色功能。但是，我发现该应用程序可用于视图的一些问题：

main.js

```
require(['application'], function(app){
app.start();
}); 
```

应用程序.js

```
define([
'marionette',
'router'
], function(marionette, Router){

"use strict";

var app = new marionette.Application();

app.addRegions({
    header : 'header',
    main   : '#main'
});

app.addInitializer(function(){
    this.router = new Router();
});

return app;

}); 
```

仪表板.js

```
define([
'application',
'underscore',
'backbone', 
], function(app, _, Backbone) {
var DashboardView = Backbone.View.extend({

initialize: function() {
    console.log(app);
    $('a').click(function(e){
        e.preventDefault();
        app.router.navigate("claims", {
           trigger: true 
        });
    });
},

});
return DashboardView;
}); 
```

我在控制台日志中收到未定义的信息？应用程序是否应该使用 requirejs 模块？

编辑：使用要求更新

```
require.config({

paths: {
    'jquery'        : '../vendors/jquery-1.8.2',
    'underscore'    : '../vendors/underscore',
    'text'          : '../vendors/text',
    'json2'         : '../vendors/json2',
    'backbone'      : '../vendors/backbone',
    'marionette'    : '../vendors/plugins/backbone.marionette',
    'paginator'     : '../vendors/plugins/backbone.paginator',
    'relational'    : '../vendors/plugins/backbone.relational',
    'moment'        : '../vendors/moment',
    'bootstrap'     : '../vendors/bootstrap',
    'datepicker'    : '../vendors/plugins/bootstrap.datepicker',
    'templates'     : 'templates/'
},

shim: {

    backbone: {
        deps: ['underscore', 'jquery'],
        exports: 'Backbone'
    },
    marionette : {
        exports : 'Backbone.Marionette',
        deps : ['backbone']
    },
    paginator: {
        deps: [
        'backbone',
        'underscore',
        'jquery'
        ],
        exports: 'Backbone.Paginator'
    },
    relational: ['backbone'],
    underscore: {
        'exports': '_'
    },
    bootstrap: {
        deps: ['jquery'],
        exports: "bootstrap"
    },
    datepicker: {
        deps: ['jquery','bootstrap'],
        exports: "datepicker"
    },
    moment: {
        exports: 'moment'
    }
}

});

require(['application'], function(app){
    app.start();
}); 
```

路由器

```
define([
  'views/claims/PaginatedList',
  'views/dashboard/Dashboard'
  ], function(PaginatedClaimListView, DashboardView){

var Router = Backbone.Router.extend({

    routes: {

        "": "index",
        "claims": "claims"

    },

    initialize: function(){
        Backbone.history.start({
            pushState: true,
            root: '/app_dev.php/hera'
        });
    },

    index: function(){
        var dashboard = new DashboardView();
    },

    claims: function(){
        var claimListView = new PaginatedClaimListView();
    }

});

return Router;

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:54:07.497

我想我已经弄清楚了，即使我不是 100% 确定原因。

问题在于你的`Router`定义。在 main.js 中调用参考将您的视图放在那里`Application`使路由器在之前启动。`app.start()`事实上，如果你`console.log(app)`在 main.js 中加入 a，你会注意到它在dashboard.js 中的那个之后被调用。

所以这就是我解决它的方法：

```
define(['backbone'], function(Backbone){

var Router = Backbone.Router.extend({

    routes: {
        "": "index",
        "claims": "claims"
    },

    initialize: function(){
        Backbone.history.start({
            pushState: true,
            root: '/app_dev.php/hera'
        });
    },

    index: function(){
        require(['views/dashboard/Dashboard'],function(DashboardView){
            var dashboard = new DashboardView();
        });
    },

    claims: function(){
        require(['views/claims/PaginatedList'],function(PaginatedClaimListView){
             var claimListView = new PaginatedClaimListView();
        });
    }

});

return Router;

}); 
```

我不确定是否有更好的解决方案可以让您在路由器中定义您的视图，无论如何这会起作用并且会使您的路由器更轻，特别是如果您的视图数量增加...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:55:37.840

我发现，通常每当我将 Require.js 模块设置为`undefined`不应该设置的时间时，都是因为循环依赖。例如，假设“vent”依赖于“dashboard”；你会有：`vent`需要`dashboard`需要`application`需要`vent`...

发生这种情况时，Require 的响应基本上只是选择其中一个文件并使其工作，但循环依赖中涉及的任何其他文件都以`undefined`.

您可以通过删除导入来测试这个理论，看看是否可以修复您的`undefined`. 或者，Require 人员可以下载一个名为 xrayquire 的工具，该工具有助于查找循环依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-05T17:21:10.293

你必须通过app.router访问路由器吗？你能不能让仪表板自己需要路由器，并直接访问它？只要应用程序已经执行（此时它应该已经执行），那么您就不需要通过 app. 我认为你的问题绝对是一个复杂的循环依赖。

# php - $_SESSION 变量不更新每次迭代

> ID：13887793
> 
> 赞同：0
> 
> 时间：2012-12-14T23:40:34.930
> 
> 标签：php

所以我有这段代码在每次迭代中执行。这些迭代不是普通的循环，而是一系列 ajax 请求迭代的一部分。第一个 ajax 请求确定分配给例如 $_SESSION['filename'] 的文件名，然后将该变量推入和数组等。现在当我处理多个文件时会出现问题。

经常发生的情况是，生成的文件名之一被复制并插入到它不应该插入的数据库中。

第一个回调函数：

```
 case 'upload':
...
$_SESSION['upload_filename'] = random_filename($alphas).'.'.$fileExt;
...
break; 
```

第二个回调函数：

```
 case 'insert_db':
array_push($someGlobalArray, $_SESSION['upload_filename']);
insert($_SESSION['upload_filename']);
break; 
```

所以正如我所说的那样，70% 的时间都会正确生成一个新的文件名。我不确定为什么以前“迭代”中的旧文件名仍然存在并且 $_SESSION['filename'] 不包含新文件名。我尝试在第二个回调函数中的 insert() 之后取消设置文件名，但这会导致一个问题，即没有文件名可以被推入数组或插入数据库，因为我认为它之前被取消设置？我也在 insert() 之后尝试了 sleep(2) ，然后取消设置但没有帮助。

这是更多代码： http: [//pastebin.com/g4fereQx](http://pastebin.com/g4fereQx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:05:58.037

我最好的猜测是您的代码可能没有按照您认为的确切顺序执行。不过，您发布的片段很难说。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-15T00:07:50.283

你能显示更多你的代码吗，比如发送数据的ajax调用等等。我知道我过去遇到过问题，我没有在我的 ajax 调用中设置 async: false ，因此它会尝试处理尚未正确设置的信息并采取行动

# javascript - Sencha Touch：使用 Rest Proxy 为 List 加载存储

> ID：13887794
> 
> 赞同：0
> 
> 时间：2012-12-14T23:40:48.820
> 
> 标签：javascript, extjs, sencha-touch-2

我是 sencha 的新手，所以我确定我只是在这里遗漏了一些简单的东西。我有休息服务，我需要能够为我的列表视图加载我的商店。

这是我的代理模型：

```
Ext.define('UserModel', {
extend: 'Ext.data.Model',

config: {
    fields: [
        { name: 'UserId', type: 'int' },
        { name: 'FullName', type: 'string' }
    ],

    proxy: {
        type: 'rest',
        url: '/rest/user',
        reader: {
            type: 'json',
            root: 'user'
        }
    }
}
}); 
```

此代码适用于 GET 请求。所以我知道我可以与我的休息服务交谈。

```
 var User = Ext.ModelMgr.getModel('UserModel');

    User.load(10058, {
        success: function (user) {
            console.log("Loaded user: " + user.get('UserId') + ", FullName: " + user.get('FullName'));
        }
    }); 
```

我的问题是，在将代理代码添加到商店时，我无法将数据加载到我的列表视图中。如何将参数传递给其余服务并加载商店？

```
Ext.define('UserStore', {
extend: 'Ext.data.Store',

config: {
    model: 'UserModel',
    proxy: {
        type: 'rest',
        url: '/rest/user',
        reader: {
            type: 'json',
            root: 'user'
        },
        autoLoad: true
    },
    sorters: 'FullName',
    grouper: function(record) {
        return record.get('FullName')[0];       
    }
}

}); 
```

这是我的列表视图：

```
Ext.define('UserView', {
extend: 'Ext.List',
xtype: 'userView',

config: {
    scrollable: 'vertical',
    loadingText: "Loading your social connections . . .",
    indexBar: true,
    singleSelect: true,
    grouped: true,
    cls: 'customGroupListHeader',
    itemTpl: '{FullName}',
    store: 'UserStore',
    onItemDisclosure: true
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:14:47.543

哈哈！我知道这很简单。商店代理中的“autoLoad：true”需要在代理的括号之外。

```
Ext.define('UserStore', {
extend: 'Ext.data.Store',

   config: {
      model: 'UserModel',
      autoLoad: true, 
```

# python-2.7 - 在执行之间保存和恢复变量的值

> ID：13887798
> 
> 赞同：1
> 
> 时间：2012-12-14T23:41:13.113
> 
> 标签：python-2.7

我有一个 Python 模块，它作为无线手持计算机的服务器运行。每次手持设备向服务器发送消息时，模块都会确定它是什么类型的消息，然后组合成适当的响应。因为响应通常取决于状态，所以我在需要保留/共享处理每种类型消息的各个函数之间的信息时使用全局变量。

我遇到的问题是当应用程序关闭时（无论出于何种原因），全局变量值（当然）丢失了，所以重新启动应用程序时它与手持设备不同步。我需要一种可靠的方法来存储这些值以进行恢复。

我到目前为止（但还没有让它工作）的方向是每次更新时将变量名称及其值写入磁盘上的 CSV 文件 - 然后（当应用程序启动），查找该文件并使用它将变量分配给它们以前的状态。我编写或读取文件没有问题，但由于某种原因，这些值没有被分配。

我可以发布代码以获取评论/帮助，但在此之前，我想先弄清楚我是否走错了方向。是否有更好（或至少更可取）的方法来保存和恢复这些值？

谢谢，JDM

====

跟进。这可能有点笨拙，但这就是我所拥有的并且它正在工作。我关心的唯一全局变量是以“CUR_”开头的全局变量。我不得不使用`tempDict1`，因为解释器似乎不喜欢直接迭代`globals()`.

```
    进口泡菜
    CUR_GLO1 = 'valglo1'
    CUR_GLO2 = 'valglo2'
    CUR_GLO3 = 'valglo3'

    定义保存球（）：
        tempDict1 = globals().copy()
        tempDict2 = {}
        对于 tempDict1 中的键：
            if (key[:4]=='CUR_'):tempDict2[key] = tempDict1[key]
        pickle.dump(tempDict2,open('tempDict.p','wb'))

    定义检索球（）：
        tempDict = pickle.load(open('tempDict.p','rb'))
        globals().update(tempDict)

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T20:20:00.967

*把它写下来作为答案..*

我认为您想要做的是一种[应用程序检查点](http://en.wikipedia.org/wiki/Application_checkpointing)形式。

您可以使用[Pickle 模块](http://docs.python.org/2/library/pickle.html)方便地保存和加载 Python 变量。这是一个如何使用它的[简单示例。](http://wiki.python.org/moin/UsingPickle)[这个关于 Stackoverflow 的讨论](https://stackoverflow.com/questions/5568904/saving-the-state-of-a-program-to-allow-it-to-be-resumed)和[这个注释](http://joe.milbourn.org.uk/notes/Simple_Checkpointing_in_Python/)似乎同意，尽管我的一部分认为必须有更好的方法。

顺便说一句，您不需要将所有内容都放入字典中。只要您以正确的顺序转储和加载变量，并确保您不更改它，在中间插入数据等，您就可以转储和加载几个变量。不过，像您一样使用字典确实消除了排序依赖性。

```
% python
Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import pickle
>>> foo=123
>>> bar="hello"
>>> d={'abc': 123, 'def': 456}
>>> f=open('p.pickle', 'wb')
>>> pickle.dump(foo, f)
>>> pickle.dump(bar, f)
>>> pickle.dump(d, f)
>>> ^D
% python
Python 2.6.1 (r261:67515, Jun 24 2010, 21:47:49) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import pickle
>>> f=open('p.pickle','rb')
>>> foo=pickle.load(f)
>>> foo
123
>>> bar=pickle.load(f)
>>> bar
'hello'
>>> d=pickle.load(f)
>>> d
{'abc': 123, 'def': 456}
>>> 
```

# uml - UML 的命名约定

> ID：13887799
> 
> 赞同：9
> 
> 时间：2012-12-14T23:41:14.510
> 
> 标签：uml, naming-conventions

UML 有任何命名约定吗？

我有兴趣知道如何命名类、包和方法。但是，如果有一些文档指定了每个 UML 图的所有命名约定，请分享它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T10:10:22.430

UML 标准没有指定任何命名约定。您选择的命名标准取决于您的 UML 模型的目标受众。此受众再次取决于您的模型的目的。例如，如果您打算从您的模型生成代码，那么您需要有一个适合您的目标平台的结果。我自己的经验是，如果您希望在更改目标平台后仍保留模型，或者如果您打算为多个目标平台生成代码，那么选择与平台无关的命名会很有帮助。例如，如果您打算为您的 SQL 数据库创建 Java 代码、DDL 语句和为您的 Restful 服务创建 XSD 模式定义，那么您将拥有三个不同的目标，您需要为所有三个目标使用一种通用语言。恕我直言，一个好的方法是使用与平台无关的类型系统，如 CORBA IDL，XSD 类型甚至 ISO 类型。您还可以使用自然语言类型描述，如“日期”、“时间”、“数字”、“货币”。对于您的域特定内容的名称，您可以使用映射。例如，如果您命名一个类“客户联系人”和操作“呼叫客户”，一个属性“客户名称”，那么映射将允许创建例如 Customer_Contact 作为 Java 类名称“callCustomer”作为操作名称和“customersName”作为属性名称。

是否可以应用映射取决于您使用的工具链。如果您不能使用映射，则必须决定哪个是目标平台的最小公分母。如果没有，您将不得不决定不遵循命名约定最省力的地方。

最重要的是恕我直言，将模型元素映射到其他工件的规则是否得到严格遵循和系统化（甚至可能是自动化的），或者该模型是否用于说明目的并且映射规则是否仅由相关人员使用他们的大脑来应用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T23:55:00.403

根据不同的实现目标使用不同的命名约定。这里有几个：

*   [一般命名约定](http://msdn.microsoft.com/en-us/library/ms229045.aspx)

*   [下划线与混合大小写命名约定](http://c2.com/cgi/wiki?UnderscoreVersusCapitalAndLowerCaseVariableNaming)

*   [Leszynski 命名约定](http://en.wikipedia.org/wiki/Leszynski_naming_convention)

*   [ActionScript 命名约定](http://www.kirupa.com/developer/actionscript/tricks/naming.htm)

*   [jQuery 命名约定](http://contribute.jquery.org/style-guide/js/#naming-conventions)

*   [MXML 命名约定](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf5f39f-7fff.html#WS2db454920e96a9e51e63e3d11c0bf5f39f-7ff9)

以多种语言实现的协议也是很好的例子：

*   比特流
*   库库尔
*   libusb
*   库吉特
*   libexpect
*   xmpp
*   测试任何协议（点击）
*   irc
*   网络驱动程序
*   管家
*   网络套接字
*   内存缓存
*   昂首阔步
*   XDG

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T23:49:13.243

您的 UML 命名约定应该基于您正在编程的语言的命名约定。您正在描述您的实际类、包和方法，因此请使用您将要使用或已经在代码中使用的相同名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-17T08:53:41.100

正如 Wolfgang Fahl 所述，UML 没有指定任何命名约定。然而，几个月前，我们发布了一套独立于平台和以域为中心的 UML 命名指南。即使这个答案来得太晚了，您（和其他人）可能会发现它们非常有用：[http](http://dx.doi.org/10.1016/j.datak.2013.09.001) ://dx.doi.org/10.1016/j.datak.2013.09.001和[http://mpi.upc.edu /gmc-en/methods-best-practices-and-profiles/naming-guidelines-for-uml-ocl](http://mpi.upc.edu/gmc-en/methods-best-practices-and-profiles/naming-guidelines-for-uml-ocl)

# mysql - 从按结果数量排序的单个表中返回结果

> ID：13887806
> 
> 赞同：1
> 
> 时间：2012-12-14T23:42:46.860
> 
> 标签：mysql, sql

我有一个包含 2 个引用 (`user_id`和`item_id`) 的表，我需要查询它以查找具有某些项目的所有用户。棘手的部分是，我需要对结果进行排序，而不仅仅是他们拥有的结果数量，而是基于他们拥有的哪些项目。

这是表格：

```
+--------------+-----------------------+------+-----+---------+-------+
| Field        | Type                  | Null | Key | Default | Extra |
+--------------+-----------------------+------+-----+---------+-------+
| user_id      | int(11)               | NO   |     | 0       |       |
| item_id      | int(11) unsigned      | YES  |     | NULL    |       |
+--------------+-----------------------+------+-----+---------+-------+ 
```

所以我的查询看起来像这样：

```
SELECT   user_id, item_id
FROM     user_items
WHERE    item_id IN (2, 122, 132)
GROUP BY user_id, item_id
HAVING   SUM(item_id = 2); 
```

看起来很容易？这就是困难的部分所在：

item_id = 2 是必需的 item_id = 122 和 132 是可选的。132 之后的任何内容也是可选的。

我需要根据以下条件订购结果：1）如果找到所有项目。2) 如果仅找到第 2 项和第 122 项。3) 如果只找到第 2 项。

这是用于摆弄的 SQL 小提琴文件：[http ://sqlfiddle.com/#!2/6b1c1/6/0](http://sqlfiddle.com/#!2/6b1c1/6/0)

我在想，如果有什么方法可以设置，比如：SELECT query to say

```
IF (item_id = 2 AND item_id = 122 AND item_id = 132) AS matches_all,
IF (item_id = 2, item_id = 122) AS matches_some,
IF (item_id = 2) AS matches_first 
```

**使用更新的查询进行编辑** 这是我到目前为止所拥有的。这大约是我需要的 95%： [http ://sqlfiddle.com/#!2/6b1c1/47](http://sqlfiddle.com/#!2/6b1c1/47)

```
SELECT   user_id, item_id,
  @tmp_1 := IF(SUM(item_id = 2), 1, 0) AS tmp_1,
  @tmp_2 := IF(SUM(item_id = 122), 1, 0) AS tmp_2,
  @tmp_3 := IF(SUM(item_id = 132), 1, 0) AS tmp_3,
  @tmp_4 := IF(SUM(item_id = 126), 1, 0) AS tmp_4,
  CAST(@tmp_3 + @tmp_4 AS UNSIGNED) AS total_other
FROM     user_items
WHERE    item_id IN (2, 122, 132, 126)
GROUP BY user_id
HAVING SUM(item_id = 2)
ORDER BY tmp_1 DESC, tmp_2 DESC, total_other DESC 
```

更多细节：

1) 我最多只能输入 12 个项目，因此如果需要，我可以为每个项目分配它自己的临时字段。

2) 上述查询对 tmp_1 和 tmp_2 非常有效。如果我们有一个用户拥有项目 2 和 122，它会将它们放在列表的顶部。对于其余的 3-4（3 到最多 12），我需要计算匹配数，这就是我尝试`CAST(@tmp_3 + @tmp_4`. 我不知道如何让那些计算。

3) 一旦我对第 3 - 12 项进行了总计算，那么这将是该`ORDER BY`条款中的第三项也是最后一项。

**示例结果** 基于 SQL fiddle 文件中提供的架构，以下是搜索所有具有 item_id 的用户时应返回的结果：`2, 122, 132, 126`

```
+---------+--------------+----------------+-------------+
| USER_ID | PRIMARY_ITEM | SECONDARY_ITEM | OTHER_ITEMS |
+---------+--------------+----------------+-------------+
| 39      | 1            | 1              | 2           |
| 54      | 1            | 1              | 0           |
| 55      | 1            | 0              | 0           |
+---------+--------------+----------------+-------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:37:07.120

**更新：**

根据对您的问题的更新（包括所需的结果集），这是一个返回该结果集的查询。（这与我原始答案中解释的内联视图中的查询非常相似）

```
 SELECT i.user_id                         AS user_id
       , MAX(IF(i.item_id= 2   ,1,0))      AS primary_item
       , MAX(IF(i.item_id= 122 ,1,0))      AS secondary_item
       , MAX(IF(i.item_id= 132 ,1,0)) +
         MAX(IF(i.item_id= 126 ,1,0))      AS other_items
    FROM user_items i
   WHERE i.item_id IN (2, 122, 132, 126)
   GROUP BY i.user_id
  HAVING primary_item
   ORDER 
      BY primary_item   DESC
       , secondary_item DESC
       , other_items    DESC
       , i.user_id 
```

请注意，计算`other_items`列的表达式可以扩展为处理任意数量的其他 items_id 值。（您只想确保没有在其中指定两次相同的 item_id，否则它将被“计算”两次），例如

```
 , MAX(IF(i.item_id= 132 ,1,0)) +
         MAX(IF(i.item_id= 133 ,1,0)) +
         MAX(IF(i.item_id= 135 ,1,0)) +
         MAX(IF(i.item_id= 137 ,1,0)) +
         MAX(IF(i.item_id= 143 ,1,0))      AS other_items 
```

这基本上是对每个项目进行检查，然后得出 1 或 0，然后将 1 和 0 相加得出总数。

另请注意，IF() 函数调用不是必需的，这些表达式实际上可以简化为：

```
 , MAX(i.item_id= 2)                 AS primary_item
       , MAX(i.item_id= 122)               AS secondary_item 
```

请注意，`WHERE`实际上不需要该子句来返回正确的结果集。（但如果它在那里，谓词必须匹配在 SELECT 列表中检查的 item_id 值。

另请注意，ORDER BY 不需要包含`primary_item DESC`，因为我们的查询保证 的值为`primary_item`1。以 开始排序就足够了`secondary_item DESC`，因为它可以是 1 或 0。

覆盖索引`on (user_id,item_id)`可能会提高性能，或者可能具有前导列的索引`item_id`可能会更好。（没有 WHERE 子句，查询将需要检查表中的每一行，基本上是全表扫描或全索引扫描。）

从结果集中，如果用户拥有一个或多个项目（而不是计算他拥有多少特定项目），您似乎想要返回“1”。如果您要返回的是计数每个项目的数量，然后您将用`MAX()`聚合替换`SUM()`聚合，但这对于破译 OTHER_ITEMS 列的内容更成问题。

请注意，该`HAVING primary_item`子句只为那些至少具有`item_id = 2`.

* * *

**更新：**

弗朗西斯说......那个查询[在你原来的答案中]为每个用户返回多个结果，这不是我所追求的。

**答：**这是一个很好的例子，说明显示您想要返回的结果集的示例会很有用。您的查询`user_id`在 SELECT 列表中同时具有和 item_id`，并且没有指示您希望每个用户只返回一行，或者每个 user_id 和 item_id 组合只返回一行。

要做到这一点，只需在子句之前添加一个`GROUP BY d.user_id`或一个子句。`GROUP BY d.user_id, d.item_id``ORDER BY`

* * *

~~这并不优雅，但我认为它会返回您指定的结果集。~~

 ~~```
SELECT d.user_id
     , d.item_id 
  FROM user_items d
  JOIN ( 
         SELECT i.user_id
              , MAX(IF(i.item_id=2  ,1,0)) AS item_2
              , MAX(IF(i.item_id=122,1,0)) AS item_122
              , MAX(IF(i.item_id=132,1,0)) AS item_132
           FROM user_items i
          WHERE i.item_id IN (2, 122, 132)
          GROUP BY i.user_id
         HAVING item_2
          ORDER BY 3 DESC, 4 DESC, 1
       ) f
    ON d.user_id = f.user_id
 WHERE d.item_id IN (2, 122, 132)
 ORDER BY (f.item_122 AND f.item_132) DESC
        , f.item_122 DESC
        , d.user_id
        , d.item_id 
```~~ 

内联视图（查询别名为`f`）会“检查”为用户找到了哪些项目。

* * *

要了解它是如何工作的，我们首先检查该内联视图的结果......

```
 SELECT i.user_id
              , MAX(IF(i.item_id=2  ,1,0)) AS item_2
              , MAX(IF(i.item_id=122,1,0)) AS item_122
              , MAX(IF(i.item_id=132,1,0)) AS item_132
           FROM user_items i
          WHERE i.item_id IN (2, 122, 132)
          GROUP BY i.user_id
         HAVING item_2
          ORDER BY 3 DESC, 4 DESC, 1 
```

`WHERE`此处可以省略该子句。出于我们的目的，我们基本上只是获取 user_id 列表，以及他们拥有哪些指定项目的指示符。

MAX 聚合中的表达式检查 item_id 是否分别匹配 2、122 或 132，并返回 1 或 0。我们使用`MAX`聚合提取找到的任何值 1。

我们确实需要`GROUP BY`，所以我们得到了一个不同的 user_id 列表。

我们使用该`HAVING`子句以便`item_id = 2`省略没有 an 的用户。可以这样写

```
 HAVING item_2 > 0 
```

（添加大于零的值，但这不是必需的，因为我们保证 item_2 的值为 0 或 1）

此处实际上并不需要 （因为我们将把它`ORDER BY`加入到 user_items 表中。）（`ORDER BY`仅在最外层的查询中才需要 。）但它确实表明可以让这个结果集排序。

（如果这是我的要求，我可能会停在这里，并利用这个结果集；但这不是您指定的结果集。）

我们将该查询（将其用作内联视图或MySQL 术语中的*派生表*`user_items`）加入到表中，因此我们只为那些与该查询中的 user_id 匹配的用户返回行。

我们需要添加`WHERE`子句，所以我们只提取`item_id`指定列表中的值。

我们需要`ORDER BY`以指定的顺序获取结果集。

 ~~* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:42:24.200

看起来您需要的是一个规则或映射，哪些字段是必需的，哪些字段是可选的。如果你有某种数学规则说，我不知道，也许 id < 10 是必需的，其他一切都是可选的，你可以用它做一些花哨的 where 子句。

假设 item_id 是完全随机的，我建议您创建一个映射表来对您的项目进行排名/优先级。可能类似于 item_rank 表：

```
-------------------------
| item_id | is_optional |
-------------------------
| 2 | 1 |
-------------------------
| 122 | 0 |
-------------------------
| 133 | 0 |
-------------------------

```

那么您的查询是：

```
SELECT user_map.user_id, user_map.item_id,
FROM user_map
INNER JOIN item_rank
ON user_map.item_id = item_rank.item_id
    AND user_map.item_id IN (2,122,133)
GROUP BY user_map.user_id
HAVING item_rank.is_optional > 0
ORDER BY COUNT( user_map.item_id ); 
```

我不完全喜欢这个解决方案，但是在不知道你最终想要完成的事情的情况下，我无法提供更具体的解决方案。

附带说明一下，当问题很困难时，通常意味着您试图以错误的方式解决它们。当我发现自己处于架构束缚中时，当我重新跟踪并从头开始考虑时，我倾向于总是找到一个更干净的解决方案。显然取决于你走了多远，但可能是值得的。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T07:21:03.560

好的，这就是我想出的。我只需要计算前 2 个之后的任何项目，所以我想出了一个比使用临时字段更清洁的解决方案，并且最终可以工作。

```
SELECT   user_id,
         IF(SUM(item_id = 2), 1, 0) AS primary_item,
         IF(SUM(item_id = 122), 1, 0) AS secondary_item,
         (IF(SUM(item_id = 132), 1, 0) + IF(SUM(item_id = 126), 1, 0)) AS other_items
FROM     user_items
WHERE    item_id IN (2, 122, 132, 126)
GROUP BY user_id
HAVING   SUM(item_id = 2)
ORDER BY primary_item DESC, secondary_item DESC, other_items DESC 
```

所以这给了我第一个和第二个项目的字段，所以我可以查看它们是否匹配，然后计算所有其余项目，最多可以有 10 个其他项目。

然后它根据我们是否有第一个项目，第二个项目，然后是所有其他项目的总数来排序。

你可以在这里看到最终结果：[http ://sqlfiddle.com/#!2/6b1c1/131](http://sqlfiddle.com/#!2/6b1c1/131)~~

# c++ - 当我使用 remove() 时权限被拒绝

> ID：13887808
> 
> 赞同：2
> 
> 时间：2012-12-14T23:43:01.937
> 
> 标签：c++, file, delete-file

我有这个问题。我有一个 C++ 程序；该程序成功地制作了我保存记录的文件。在一个过程中，我编辑了一条记录并制作了另一个具有不同名称的文件。最后我关闭了这两个文件，当我尝试删除旧文件并重命名新文件时，出现此错误：

> 删除文件时出错：权限被拒绝。

```
void SoldDevices()
{
 int soldQuantity = 0;
 char soldModel[20];
 ElShop tempVar;
 FILE *newFile; 

 printf("Enter model of sold device: ");
 gets(soldModel); 

 file = fopen(fileName, "r+"); 
 fread(&shop, sizeof(shop), 1, file);

 while (!feof(file))
 {
       if (strcmp(shop.model, soldModel) == 0)
       {
             tempVar = shop;
             break;
       }

       fread(&shop, sizeof(shop), 1, file);
 }

 fclose(file);

 printf("Enter how much devices are sold: ");
 scanf("%d", &soldQuantity);

 while (tempVar.quantity < soldQuantity)
 {
       printf("No items available!\n");
       printf("Enter how much devices are sold: ");
       scanf("%d", &soldQuantity);
 }

 tempVar.quantity = tempVar.quantity - soldQuantity;
 printf("%d\n", tempVar.quantity);

 file = fopen(fileName, "rb");
 newFile = fopen("New", "wb");

 fread(&shop, sizeof(shop), 1, file);

 while (!feof(file))
 {
      if(strcmp(soldModel, shop.model) == 0)
      {
          fwrite(&tempVar, sizeof(shop), 1, newFile);
      }
      else
      {
          fwrite(&shop, sizeof(shop), 1, newFile);
      }

      fread(&shop, sizeof(shop), 1, file);
 }
 fclose(newFile); 
 fclose(file);

 if( remove( fileName ) != 0 )
     perror( "Error deleting file" );
 else
     puts( "File successfully deleted" );
 rename("New", fileName);
} 
```

有没有人有一些想法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-05T03:36:33.607

我曾经和你有同样的问题，但现在我已经解决了。当您使用`remove()`. 它不必在同一个 .cpp 文件中，可能在不同的文件中。

以我为例，我认为我已经关闭了文件，但后来我发现我之前有“返回”语句`fclose()`导致文件没有正确关闭。

PS：1.我有3个.cpp文件。

2.  包含`remove()`的文件在未正确关闭文件的文件（A.cpp）之后使用。

3.  因为 A.cpp 没有正确关闭文件，所以出现 Permission Denied。

4.  我的英语很差。希望这可以帮到你。

# java - java.lang.String(String original) 记录不充分

> ID：13887809
> 
> 赞同：0
> 
> 时间：2012-12-14T23:43:12.777
> 
> 标签：java, string, copy-constructor

具体来说，如果 original 为 null，它会抛出 NullPointerException。然而javadocs没有提到它。

我知道，它说除非需要显式复制，否则不需要此构造函数，但我正在为一些包含字符串的较大对象编写复制构造函数，虽然可能不是绝对需要进行显式复制，因为其他所有内容在这种情况下得到一个明确的副本，我愿意为效率低下付出一点代价。

但是这个 javadoc 中不应该有一个 throws 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T23:50:31.810

来自[JavaTM 2 平台标准。埃德。v1.4.2](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)：

> 除非另有说明，否则将 null 参数传递给此类中的构造函数或方法将导致抛出 NullPointerException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:48:20.313

`NullPointerException`是一个未经检查的异常，所以虽然如果你很迂腐，你可以在 javadoc 中添加一个 @throws 行，但最好不要。假设如果你在没有意义的地方传递 null，你会得到一个 NPE。（未经检查的异常通常表示编码错误，而不是异常但有效的情况。）

而且`new String( null )`没有任何意义，因为构造函数不能产生`null`.

复制字符串也完全没有必要，因为它们是不可变的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T23:48:16.347

字符串是不可变的。您不想创建 a `String myString = new String("blah");`，因为这会导致堆中的新对象。最好做`String myString = "blah";`并链接到字符串池。

```
String myString = "blah";
String myOtherString = myString;

myOtherString = "";
// at this point myString == "blah" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T23:52:21.383

这个构造函数的[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28java.lang.String%29)说：

> 除非需要原始的显式副本，否则不需要使用此构造函数，因为字符串是不可变的

所以你真的不应该打电话给它。

另外，我认为如果你传入一个空值，抛出一个 NPE 是合理的

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-14T23:53:57.040

RuntimeException 保留用于指示错误使用 API（使用空对象）的异常，这些异常可能发生在 Java 程序的任何地方，因此它不是特定于 String 类（或任何特定类）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-15T00:17:13.243

已接受的答案已解决了文档问题。

我只是想回应这个评论......这可能是你问题的根源。

> 但这假设传递 null 是没有意义的。假设您正在复制一些具有许多数据成员字段的对象，其中一些是字符串，并且可能为空，也可能不为空。*在这种情况下，我希望 String(String) 返回 null，具体来说，我希望它复制 null 值。*

这是不可能的。JLS 特别声明该`new`操作产生一个新对象而不是`null`.

如果您希望能够“创建并返回一个对象”或`null`“您必须将此逻辑嵌入到某种工厂方法中；例如

```
String myNewString(String s) {
    return s == null ? s : new String(s);
} 
```

但同样值得注意的是，*在大多数情况下*，在 Java 中复制 a`String`是不必要且浪费的。仅当您的应用程序专门使用字符串的对象标识时，您才应该这样做；即它用于`==`比较字符串对象并*依赖*于与 . 比较的具有相同字符的字符串`false`。（需要的应用程序非常罕见......）

# c - C 内存扫描器 [无限循环]

> ID：13887810
> 
> 赞同：2
> 
> 时间：2012-12-14T23:43:12.690
> 
> 标签：c, winapi

我正在关注[这个](https://www.youtube.com/watch?v=lwFIC7It3Fc&NR=1&feature=endscreen)关于如何用 C 语言制作内存扫描器的简单教程。出于某种原因，我的主循环永远不会中断。

这是代码

```
MEMBLOCK* create_scan(unsigned int pid){

    MEMBLOCK *mb_list = NULL;
    MEMORY_BASIC_INFORMATION meminfo;   
    unsigned char *addr = 0;

    HANDLE hProc = OpenProcess (PROCESS_ALL_ACCESS, FALSE, pid);

    if(hProc){
        while(1){
            // print the address for debug purpose
            printf("%d \r\n", addr);

            // loop should break out when the address overflows (return 0)
            if(VirtualQueryEx (hProc, addr, &meminfo, sizeof(meminfo)) == 0){
                break;
            }

 #define WRITABLE (PAGE_READWRITE | PAGE_WRITECOPY |PAGE_EXECUTE_READWRITE | PAGE_EXECUTE_WRITECOPY)
            if ((meminfo.State & MEM_COMMIT) && (meminfo.Protect & WRITABLE)){
                MEMBLOCK *mb = create_memblock (hProc, &meminfo);
                if(mb){
                    mb->next = mb_list;
                    mb_list = mb;
                }
            }

            addr = (unsigned char*)meminfo.BaseAddress + meminfo.RegionSize;
        }
    }
    return mb_list;
} 
```

由于某种原因，输出（printf）是这样的

```
123863040
125943808
... until ...
2147418112
... all on the sudden ...
-1207959552
... 
-243924992
0
65536
loop start again 
```

任何想法，我有点迷路了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:58:36.570

VirtualQueryEx() 的返回值是它用数据填充的结构的大小。除非出现错误，否则它不会返回零。

负值只是大于 2GB 的地址，在 printf() 中被解释为负数。一旦超过 4GB，它就会返回 0。因为 0 是您的初始值，并且它第一次工作，它会重新开始。

您需要不同的标准来退出循环。

您可能还想使用 %p 而不是 %d 来打印当前地址。

# apache - 请求正文（内容长度）大于配置的限制？

> ID：13887812
> 
> 赞同：8
> 
> 时间：2012-12-14T23:43:19.733
> 
> 标签：apache, mod-security

我有一个文件上传站点，尝试上传大于 400MB 的文件时出现此错误。有谁知道我可以在哪里设置这个值？我也为这个帐户禁用了 ModSecurity，所以我不知道为什么 MS 首先会抓住这个！

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-04T16:16:13.600

我听说在 httpd.conf 中为*LimitRequestBody*配置变量设置默认值可能会起作用。

或者可能不适用于您，但如果启用了 mod_security：

```
/etc/httpd/conf.d/mod_security.conf 
```

有这个：SecRequestBodyLimit 131072 更改为 (6MB)，或者您想要允许的任何大小：SecRequestBodyLimit 6000000"*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-25T08:16:13.833

所以我也面临这个问题`Centos 7 / DirectAdmin`。首先你应该改变两个变量

*   SecRequestBodyLimit
*   SecRequestBodyNoFilesLimit

你可以试试这条路

`/etc/httpd/conf.d/mod_security.conf`

**所以你可以在CentOS/DirectAdmin**中编辑这个文件

 **`nano /etc/httpd/conf/extra/httpd-modsecurity.conf`

按`Ctrl`+`W`并搜索

`SecRequestBodyLimit`

然后改变

```
SecRequestBodyLimit 131072
SecRequestBodyLimit 131072 
```

至

```
SecRequestBodyLimit 8388608
SecRequestBodyLimit 8388608 
```

注意：**131072 = 127KB，8388608 = 8MB**

锄头这也为你工作。**

# python - 阅读内置的python模块

> ID：13887813
> 
> 赞同：3
> 
> 时间：2012-12-14T23:43:19.757
> 
> 标签：python, module, built-in

> **可能重复：**
> [如何找到 Python 模块源的位置？](https://stackoverflow.com/questions/269795/how-do-i-find-the-location-of-python-module-sources)

我不明白如何阅读内置 python 模块中的代码。例如，我知道如何找出模块中的内容，

```
import os;

dir(os) 
```

但是，当我尝试寻找该功能的示例时，`listdir`我找不到 a`def listdir`来阅读它的实际作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T23:48:28.723

一个字：[检查](http://docs.python.org/library/inspect.html)。

> inspect 模块提供了几个有用的函数来帮助获取有关活动对象的信息，例如模块、类、方法、函数、回溯、框架对象和代码对象。例如，它可以帮助您检查类的内容、检索方法的源代码、提取和格式化函数的参数列表，或者获取显示详细回溯所需的所有信息。

它在标准库中，文档中有示例。所以，你只是`print(inspect.getsource(os))`，或者做`inspect.getsourcefile(os)`，等等。

请注意，一些标准库模块是用 C 编写的（或者甚至是内置在解释器中的假模块），在这种情况下`getsourcefile`不返回任何内容，但`getfile`至少会告诉您它是`.so`/ `.pyd`/whatever，您可以使用它来查找例如，Python 源代码的副本中的原始 C 源代码。

您也可以只键入`help(os)`，`FILE`顶部的右侧为您提供路径（通常与`getsourcefile`Python 模块相同，`getfile`否则相同）。

您可以随时访问[Python 模块](http://hg.python.org/cpython/file/2.7/Lib/)和[C 扩展模块](http://hg.python.org/cpython/file/2.7/Modules/)的在线资源。只需将 URL 中的“2.7”更改为“3.3”等即可获得不同的版本。（我相信如果你完全删除版本，你会得到主干代码，目前对应于 3.4 pre-alpha，但不要引用我的话。）

该`os.listdir`函数实际上并未直接定义在`os`; 它是有效`from <platform-specific-module> import *`进口的。您可以自己通过几个步骤来追踪它，但它通常会出现`posix_listdir`在[`posixmodule.c`](http://hg.python.org/cpython/file/2.7/Modules/posixmodule.c)大多数平台上。（即使是 Windows——最近的版本也使用相同的文件来定义`posix`非 Windows 上的模块，以及 Windows 上的`nt`and`posix`模块，而且`#if defined(…)`代码中有很多东西。）

# javascript - HTML 5 链接/屏蔽对一个

> ID：13887814
> 
> 赞同：1
> 
> 时间：2012-12-14T23:43:38.477
> 
> 标签：javascript, css, html, api

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:04:52.180

# c# - 使用文件夹路径获取选定的列表框值

> ID：13887816
> 
> 赞同：4
> 
> 时间：2012-12-14T23:43:52.943
> 
> 标签：c#

我有一个列表框，它由这种方法填充，

```
private void ToReadFromExcel_Load(object sender, EventArgs e)
{
    string folderpath = @"\\gibson\users";
    // Call the method to show available files
    PopulateListBox(ExcelListBox, folderpath, "*.csv");
}

// To populate list box with csv files from given path
private void PopulateListBox(ListBox lsb, string Folder, string FileType)
{
    DirectoryInfo dinfo = new DirectoryInfo(Folder);
    FileInfo[] Files = dinfo.GetFiles(FileType);
    foreach (FileInfo file in Files)
    {
        lsb.Items.Add(file.Name);
    }
}

String strItem;
foreach (Object selecteditem in ExcelListBox.SelectedItems)
{
    strItem = selecteditem as String;
    MessageBox.Show(strItem);
}
// read csv file information and insert into detail table
string filepath = @"\\gibson\users\CampManager.csv";
StreamReader sr = new StreamReader(filepath); 
```

我现在对文件路径进行了硬编码，但我需要传递在列表框中选择的文件路径。我在变量中有文件名`stritem`。如果我想传递整个文件夹路径，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:34:29.123

有一个理想的方法。您应该添加对象本身，而不是添加`FileInfo`对象。因此，稍后**您将能够检索与该对象相关的任何信息，在您的情况下说大小、父文件夹等**，而不仅仅是文件名。像这样做：`Name``FileInfo`

 **```
// To populate list box with csv files from given path
private void PopulateListBox(ListBox lsb, string Folder, string FileType)
{
    DirectoryInfo dinfo = new DirectoryInfo(Folder);
    FileInfo[] Files = dinfo.GetFiles(FileType);
    foreach (FileInfo file in Files)
    {
        lsb.Items.Add(file); //<-- note here
    }
}

String strItem;
foreach (FileInfo selecteditem in ExcelListBox.SelectedItems)
{
     StreamReader sr = new StreamReader(selecteditem.FullName);
     //or whatever
} 
```

您应该在这里注意的一件事是[`DisplayMember`](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDYQFjAA&url=http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx&ei=78XLUKmnGY3IrQe1pICQAw&usg=AFQjCNG1GWgVepFO-XVcA2kA8Mu-PxMTHQ&sig2=OUf6QfHuctPyP6YhJlpYFQ&bvm=bv.1355325884,d.bmk)像这样设置 ListBox 的属性：

```
ExcelListBox.DisplayMember = "Name"; 
```

这样做是为了设置应该显示列表框中对象的什么属性。所以在这里你选择`FileInfo.Name`你想要的。这就是通常将自定义对象添加到 WinForms 中的 ListBoxes 的方式。您通常不会只添加它的字符串部分。类似于`DisplayMember`，还有一个`ValueMember`属性用于为每个对象分配一个值，可能是一些 id 左右，但在你的情况下什么都没有。

**一些建议**，1) 如果您使用的是 .NET 4，请使用[`EnumerateFiles`](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDYQFjAA&url=http://msdn.microsoft.com/en-us/library/system.io.directory.enumeratefiles.aspx&ei=HsjLUOjgIYrmrAf9y4GYBg&usg=AFQjCNEEpYCkzNL3QfCEy1ku95ijrSH1ZA&sig2=u_220Y6EDxTjSXtOra4dWg&bvm=bv.1355325884,d.bmk)而不是`GetFiles`. 前者是懒惰的，只有在你开始枚举它们时才会产生结果（而不是事先），所以它应该更快。

```
foreach (FileInfo file in dinfo.EnumerateFiles(FileType)) //<-- note here
{
    lsb.Items.Add(file); 
} 
```

2）使用一个`using`子句来正确处理您的流阅读器，因为这不会锁定您的文件。使用`using`. 它比手动关闭和处理更好的眼睛！像这样左右：

```
foreach (FileInfo selecteditem in ExcelListBox.SelectedItems)
{
     using(StreamReader sr = new StreamReader(selecteditem.FullName))
     {
         //your code here
     }
} 
```**

# iphone - SQLite 与核心数据：我从哪里开始？

> ID：13887821
> 
> 赞同：1
> 
> 时间：2012-12-14T23:44:17.130
> 
> 标签：iphone, xcode, sqlite, core-data

在过去的几天里，我一直在阅读和学习很多关于 sqlite 和核心数据的知识，但我就是无法掌握哪种方法更适合我的应用程序？我更喜欢使用 Core Data，因为我完成了斯坦福的课程，并且觉得我更了解这一点。但似乎也无法通过仅使用 Core Data 来对我的应用程序执行我想要执行的操作。

基本上，我试图模拟 Twitter 使用的系统。我的意思是用户注册，创建个人资料，当他们发布内容时，他们的朋友会在提要中看到它。

是否可以通过简单地使用 Core Data 在庞大的用户群中创建这样的系统？还是我需要同时使用 Core Data 和 SQLite？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:05:48.937

要创建这样的共享系统，您将需要设备连接到的云中的服务。

这些设备必须从具有本地存储的云服务中提取数据 - 特别是如果您希望数据在断开连接时可见或可用。本地存储还可以提供更好的性能。

关于 CoreData 与 SqlLite - CoreData 仅适用于 iOS，但它可以让你走得更快，并通过一个好的设计师和一组好的 API 让你保持生产力。SqlLite 的级别要低得多，让您可以直接 sql 控制您的存储和查询。当然可以为您在 sqlite 或核心数据中描述的内容编写本地存储。

另一个考虑因素是您是否希望最终在其他平台（如 Windows Phone、Android 等）上共享该存储代码（模式/查询/等...）... Sqllite 是跨平台的，并且在设备和桌面上运行良好。在某些情况下，它自己的存储（数据文件）可以跨设备平台移植。

取决于您的存储的复杂性，以及您是要跨设备共享其中的一些还是仅单独编写代码是一个考虑因素。这里没有一个正确的答案。

# php - 在 PHP 中上传 csv 文件。代码中的错误在哪里

> ID：13887822
> 
> 赞同：0
> 
> 时间：2012-12-14T23:44:21.827
> 
> 标签：php, file-upload, csv, upload

```
<?php
    require '../config.php';
   // Edit upload location here   
   $result = 0;
   $name = mysql_real_escape_string($_FILES['myfile']['name']);
   $path = csv;
   $ext = 'csv';
   $md5 = md5($name);
   $target_path = $path . '\\' . $md5 . '.' . $ext;

   if(move_uploaded_file($_FILES['myfile']['tmp_name'], $target_path)) {
      $result = 1;
   }

   sleep(1);

?> 
```

它不会上传任何文件，例如包含括号的文件名等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T23:52:27.810

不要这样做：

```
$name = mysql_real_escape_string($_FILES['myfile']['name']); 
```

做：

```
$name = $_FILES['myfile']['name']; 
```

你得到的是 $name 的 MD5，所以没有理由清理它，因为它会生成一个 32 字符的十六进制字符串，无论如何都不会包含任何特殊字符。如果文件名包含特殊字符并且您使用上述转义，则 MD5 将完全改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:46:37.633

错误可能在这里：

```
$path = csv; 
```

这里 PHP 正在寻找一个带有名称的常量，`csv`除非您已定义它，否则它将返回 null，因此您`$target_path`的构建不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T00:04:36.040

还要尝试的一件事是在构建 $target 路径时使用预定义的 DIRECTORY_SEPERATOR 常量，所以......

```
$target_path = $path . DIRECTORY_SEPERATOR . $md5 . '.' . $ext; 
```

# java - OnListItemClick NullpointerException

> ID：13887828
> 
> 赞同：0
> 
> 时间：2012-12-14T23:45:15.320
> 
> 标签：java, android, nullpointerexception, media-player, listitem

您好，我目前在 android 市场上的一些应用程序出现错误：

这是堆栈跟踪：

```
 java.lang.NullPointerException
    at ****.****.MainActivity.onListItemClick(MainActivity.java:110)
    at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
    at android.widget.ListView.performItemClick(ListView.java:3513)
    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1812)
    at android.os.Handler.handleCallback(Handler.java:587)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3683)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:870)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:628)
    at dalvik.system.NativeStart.main(Native Method) 
```

出错的代码部分：

```
@Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        mMediaPlayer.stop();
        Sound s = (Sound) l.getItemAtPosition(position);
        mMediaPlayer = MediaPlayer.create(this, s.getSoundResourceId());
        mMediaPlayer.start();
    } 
```

大多数时候它都在工作（播放声音），但有时它会给出一个空指针异常，我不知道为什么可能是 MediaPlayer 或 super.onListItemClick() ？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:30:49.050

可能 s 为空？你能重现/调试吗？

您能否提供列表适配器实现的 getItemAtPosition(position) 代码。并且可以换行

```
 if (s != null) {
      mMediaPlayer = MediaPlayer.create(this, s.getSoundResourceId());
      mMediaPlayer.start();
    } 
```

编辑。嗯，我是在错误的线路。您应该使用空检查来包装启动媒体播放器，因为如果您阅读了文档：

退货

```
a MediaPlayer object, or null if creation failed 
```

然后尝试找出创建失败的原因。

# c# - 从内存中加载数据库文件

> ID：13887830
> 
> 赞同：3
> 
> 时间：2012-12-14T23:45:36.113
> 
> 标签：c#, database, file, memory

我可以将某些文件解密到内存中，然后在不使用硬盘的情况下将其用作常规文件吗？

更准确地说，我想用一些敏感数据解密一个 .mdb 文件，并像从磁盘加载一样对其进行操作，但**不使用临时文件**。我想也许我可以从解密的字节数组中做一个文件对象或流（仍然必须计算代码），但是，问题是 OleDbConnection 从包含文件名的字符串加载数据。

让我们试着举个例子：

```
byte[] someArrayWithTheContentsOfAdotMDBFile = getDecryptedFile();

[...] 
```

// 即使我将数组包装到文件或流中，加载过程也需要文件名

```
using (OleDbConnection connection = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=.\"+ fileNameHere)) // can fileNameHere  be a File object, stream or any trick like that?? 
```

编辑：由于答案采用这种方式，我将标题更改为“正在加载数据库......”。我仍然有兴趣从内存中加载任何文件类型，但让我们把它留给另一个线程

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:22:52.950

我不认为访问可以做到这一点......

但是您使用以下设置来实现您的目标：

*   使用 SQLite
    它可以使用内存（纯 RAM）作为存储并对其进行操作

*   使用加密的“SQLite-Dump”（即备份）作为您的传输机制（文件）
    当您需要对其进行操作时，将其加载到内存中，解密它，创建一个空的“SQLite in-memory instance”并“恢复”它从您的解密流中

注意：
您要求的方案可以使用 SQLite 等一些数据库引擎，但因为您需要解密文件，您的应用程序必须包含解密所需的密钥。
这意味着如果有人想读取您的数据库文件，他们可以通过首先分析您的应用程序，恢复解密密钥等。
如果您使用“对称加密”（例如 AES），那么他们甚至可以在您的应用程序没有注意到的情况下修改数据库文件.
如果您使用“非对称加密”（例如 RSA），那么他们仍然可以读取它，但他们无法修改数据库文件。

关于安全性的一个非常重要的一点是：在您无法 100% 控制的机器上运行的任何东西都可能被“破解”——这仅取决于攻击者的能力和动机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T00:11:15.513

Have you considered using [SQL Server Compact](http://www.microsoft.com/sqlserver/en/us/editions/2012-editions/compact.aspx) with [database encryption](http://msdn.microsoft.com/en-us/library/gg592949.aspx)?

SQL Server Compact is a file-based database, not server-based, which as you said in a comment is preferable for you.

The file on disk is encrypted. It is decrypted in memory, decrypted data is not stored to disk.

It's extremely simple to work with - you just need to put the password in the connection string when you open a connection to the database.

Seems this would fit your use case.

* * *

An aside on **Password/Key management:** Yeah, thanks Alexei, I was hoping nobody would mention that one. :-) It's a tough problem, especially if we're talking about an application that is distributed to the people who you want to protect the database from.

Ultimately, it can't be done. If your application can open the database, and you distribute your application, an attacker can reverse-engineer your application and figure out how to open the database. .NET apps are of course particularly easy to decompile.

The way I see it, you can either just put the key in the code, and accept that anyone who decompiles the code will find it; or you can try to make efforts to obfuscate it (break up the key into various places in the code, write ugly complicated code to reconstruct it, etc.) If you do that, it will still be breakable - you'll just raise the bar from "anyone who decompiles the code" to "anyone who decompiles the code and is willing to spend the time & effort working through your obfuscation".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T00:00:32.590

如果某些内容需要文件名，则您无法绕过公开可见的文件（无论是磁盘上的普通文件、ram 磁盘还是任何其他类型的设备）。

你可以试试：

*   在文件上配置安全性，以便只有当前用户可以打开它
*   考虑使用 delete-on-close 标志创建临时文件，这样它就不会停留足够长的时间
*   找到另一个可以从内存存储中工作的数据库引擎。

旁注：您需要仔细考虑为什么要走这条路。事实证明，您尝试创建的限制要么无法解决您的问题，要么考虑到您的用户完全矫枉过正。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T00:25:12.857

内存映射文件似乎是这里的答案:)

[http://blogs.msdn.com/b/salvapatuel/archive/2009/06/08/working-with-memory-mapped-files-in-net-4.aspx](http://blogs.msdn.com/b/salvapatuel/archive/2009/06/08/working-with-memory-mapped-files-in-net-4.aspx)

还

[http://www.codeproject.com/Articles/138290/Programming-Memory-Mapped-Files-with-the-NET-Frame](http://www.codeproject.com/Articles/138290/Programming-Memory-Mapped-Files-with-the-NET-Frame)

# objective-c - 在 NSTableView 中检索数据

> ID：13887834
> 
> 赞同：0
> 
> 时间：2012-12-14T23:46:18.550
> 
> 标签：objective-c, cocoa

我有一个由两个 NSMutableDictionaries 填充的三列表视图，它们与 dict1(key,value1) 和 dict2(key,value2) 共享相同的键（即 key | value1 | value2 ）。我想在第三列手动输入数据并在dict2中创建键/值对象。但是当我这样做时，我的代码选择了错误的键：S

这是委托的代码：

```
 - (void)tableView:(NSTableView *)aTableView setObjectValue:(id)anObject forTableColumn:(NSTableColumn *)aTableColumn row:(NSInteger)rowIndex
{
if ([[aTableColumn identifier] isEqualToString:@"value2"])
   {   
    [dict2 setValue:anObject forKey:[[[aTableView tableColumnWithIdentifier:@"key"] dataCellForRow:rowIndex] stringValue ]];
   }    
} 
```

任何想法 ？

编辑：我想完成我的问题：如何检索单元格中显示的数据？我认为没有其他方法可以将 NSMutableDictionnaries 与 TableViews 一起使用，因为 [dict allKeys] 的键顺序与用于显示它的顺序不同！储存一个版本的 [dict allKeys] 似乎是多余和愚蠢的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:01:24.577

我认为您正在使用的这个委托函数用于在表格视图中显示带有格式数据源的数据。它用于设置，而不是检索。

您可以使用 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 来设置 tableview 的数据源。

# iphone - 应用程序仅在 iphone 上运行一次，然后 xcode 无法再找到 Iphone

> ID：13887838
> 
> 赞同：0
> 
> 时间：2012-12-14T23:46:47.897
> 
> 标签：iphone, objective-c, xcode

所以这就是我遇到的问题。当我插入我的 iphone xcode 识别 iphone 并且一切检查正常。然后我可以构建我的项目并在设备上运行它。它工作正常，第一次。如果我再次构建项目并尝试再次运行它，xcode 会出现此错误：

没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。

此外，左上方的我的电话名称也更改为 iOS 设备。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:34:21.463

我想出了我的问题。事实证明我的电源线坏了。一旦我关掉电源线，一切都很好。

感谢任何人提供的任何帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:23:05.190

这是由您的 iPhone/iPod/iPad 的版本号引起的。如果您已将部署目标设置为高，例如如果您有一部带有 IOS5 的 iPhone，并且目标是 IOS6，则会发生此错误。您可能只需将值*降低*到设备 IOS 版本号下的值或相同**但**不高于该值的值，否则它将**不起作用**。

转到您的项目> traget> 部署目标> 设置为您想要的东西。

这就是你需要做的所有事情。

# sql - 三维数据库表

> ID：13887843
> 
> 赞同：13
> 
> 时间：2012-12-14T23:47:19.917
> 
> 标签：sql, database, arrays, dimensions

我们都去过那里 - 考虑下面的例子 - 首先，客户说“每个用户只能有一张个人资料图片”，所以我们在 users 表中添加了一个字段 - 半年后，需求发生变化，用户实际上需要有n张头像。

现在，这似乎只有在您添加一个新表（例如 user_pictures）来处理新的基数 1:n 而不是 1:1 时才有可能。通常这会变得非常复杂。每当我遇到这个问题时，我想知道为什么我们不使用我们可以考虑的所有三个维度。二维表在某种程度上是有限的，它有点不完整 - 如果，参考我们的个人资料图片问题同样，用户表中的图片字段有一个*depth*，并且该深度使该字段成为一个数组，可以同时完美地表示基数 1:1 和 1:n。

表字段将简单地变成数组并自动支​​持两种基数——这不是吗？至少我会使用它。那里已经有类似的东西了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T23:55:08.397

Oracle 支持[数组](http://www.orafaq.com/wiki/VARRAY)和[嵌套表](http://www.orafaq.com/wiki/NESTED_TABLE)。两者似乎都符合您的要求。尽管现在人们更喜欢将所有内容建模为表和关系以保持简单和一致，因此现代 RDBMS 通常不支持这些东西，我也不相信它曾经将它变成标准 SQL。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-14T23:56:57.863

标准的多对多方法，多用户对多张个人资料图片，很容易被三表方法覆盖：

表：用户
表：图片
表：User_Pictures

但是，如果您转向 NoSQL 方法，您可以存储一个用户文档（通常为 JSON 格式），该文档将该用户的个人资料图片数组存储在一个表中。

@gordy +1 获取 Oracle 链接。我不确定是否有任何 RDBS 假设的数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T00:03:24.720

您正在描述一种非规范化技术（一个字段的实例有多个列），除非您彻底了解违反基本关系原则的后果，否则它通常会导致眼泪。

当您想在字段上查询（“查找拥有这张图片的用户”）并且您发现一条带有“AND picture IN (pic1, pic2, pic3)” 的 SQL 语句无法被索引并且您的优化器开始计划报复。

# c++ - 访问冲突错误 (while (info[x] != ' '))

> ID：13887844
> 
> 赞同：1
> 
> 时间：2012-12-14T23:47:20.183
> 
> 标签：c++, loops, cstring

```
#include <iostream>
#include <fstream>
#include <cstring>

using namespace std;

void main()
{
    char info[81];
    string names[5];
    double sales[5][5];
    int count = 0;
    int x = 0;
    ifstream file;
    file.open("sales.txt");

    while(!file.eof())
    {
        x = 0;
        file.getline(info, 80);
        while(info[x] != (char)39)
        {
            while(info[x] != ' ')
            {
                names[count] += info[x];
                x++;
            }
            x++;
            for(int y = 0; y < 4; y++)
            {
                sales[count][atoi(&info[x])] = (atoi(&info[x + 1]) * 10) + atoi(&info[x+2]) + (.01 *((atoi(&info[x+4])*10) + atoi(&info[x+5])));
                x += 7;
            }
            x++;
        }
        count++;
    }
} 
```

运行此程序时出现运行时错误，但我无法弄清楚原因。我对我的编译器调试器不是很熟悉，所以我在调试时遇到了麻烦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T23:54:39.133

我认为“x”超出了数组（信息）的范围。在再次进入循环之前，您应该检查 x 是否小于 81。

前任：

```
while(x < 81 && info[x] != (char)39)
    {
        while(info[x] != ' ')
        {
            names[count] += info[x];
            x++;
        }
        x++;
        for(int y = 0; y < 4; y++)
        {
            sales[count][atoi(&info[x])] = (atoi(&info[x + 1]) * 10) + atoi(&info[x+2]) + (.01 *((atoi(&info[x+4])*10) + atoi(&info[x+5])));
            x += 7;
        }
        x++;
    } 
```

无论如何，循环内的行也可能发生同样的情况。您假设您的输入将具有一定长度的字符串，如果没有发生，您将再次收到该错误。

* * *

如果您尝试将每一行划分为空格，则可以考虑使用格式化输入（对于每一行）：

```
 stringStream >> names[count];
        string theNextString;
        stringStream >> theNextString;
        // Process the theNextString, which is the string after the last space (and until the next one) 
```

此外，这条线很容易出错。我建议您将其分成更易于理解的较小部分（并且较少依赖于行的确切长度）。您甚至可以使用格式化输入来获取数字。

```
sales[count][atoi(&info[x])] = (atoi(&info[x + 1]) * 10) + atoi(&info[x+2]) + (.01 *((atoi(&info[x+4])*10) + atoi(&info[x+5]))); 
```

使用格式化输入，它看起来像

```
int firstNumber;
stringStream >> firstNumber; 
```

请注意，仅当您的数字用空格分隔时，上述方法才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T23:55:01.647

再次检查后，我推测它可能是您的这行代码：

```
sales[count][atoi(&info[x])] = (atoi(&info[x + 1]) * 10) + atoi(&info[x + 2]) + (.01 *((atoi(&info[x + 4]) * 10) + atoi(&info[x + 5]))); 
```

您肯定会超出`info`并踏入其他内存位置。这很可能是导致内存访问冲突的原因。

# ajax - 如何将 domain.com/#!/url 更改为 domain.com/url

> ID：13887846
> 
> 赞同：0
> 
> 时间：2012-12-14T23:47:33.750
> 
> 标签：ajax, .htaccess, rewrite, web-crawler

我想知道，是否可以将链接结构从 domain.com/#!/home 更改为 domain.com/home

我尝试使用 htaccess 但它没有改变任何东西。我在网上找资料，发现它叫“ajax爬取”。不幸的是，我还没有找到如何删除/禁用/重定向。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T23:53:01.033

您不能`#`使用 mod_rewrite 或 htaccess 文件修改 URL 片段（之后的所有内容）。这些片段**永远不会发送到服务器**，因此服务器端的任何东西都无法访问它们。*虽然您可以将浏览器重定向到带有*片段的 URL ，但您永远无法检测片段是否存在。

您需要在浏览器端使用 Javascript 进行重定向。检查片段并将浏览器重定向到`domain.com/url`.

# css - 让 div 填充剩余宽度 - 模仿标题栏？

> ID：13887847
> 
> 赞同：2
> 
> 时间：2012-12-14T23:48:09.113
> 
> 标签：css

我想创建一个类似于 iphone 标题栏的布局： ![在此处输入图像描述](../Images/c294cc36132f1cf1f3afc9bff14f9ab9.png)

我尝试将以下示例放在一起，但我不确定如何让中间列扩大宽度，以便使用所有剩余空间。我可以在运行时在 javascript 中执行此操作，但想知道是否有 css 解决方案。这里是：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
   <head>

      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

      <style type="text/css">
        html, body {
          margin: 0px;
          padding: 0px;
        }

        #parent {
          background-color: #eee;
          width: 100%;
        }
        #colLeft {
          background-color: #ff8b8b;
          height: 48px;
          display: inline;
        }
        #colMiddle {
          background-color: #c9ffc3;
          height: 48px;
          display: inline;
          text-align: center;
        }
        #colRight {
          background-color: #c3d0ff;
          height: 48px;
          display: inline;
        }
      </style>

   </head>

   <body>

      <div id="parent" style="width:100%">
          <div id="colLeft">left</div>
          <div id="colMiddle">title</div>
          <div id="colRight">right</div>
      </div>

   </body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:56:32.520

解决此问题的更简单方法是使用如下 HTML 结构：

```
<div id="parent" style="width:100%">
    <div id="colLeft">left</div>
    title
    <div id="colRight">right</div>
<div> 
```

将左右 div 浮动到适当的一侧，并将父级上的文本对齐设置为居中。任何来自中间 div 的文本等样式都可以应用于父级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T00:28:41.527

我的答案有点晚了，但看看这是否更像你需要的，而不需要牺牲中间`<div>`：

您必须浮动 3 列并使内列具有 100% 的宽度。然后，设置内列的边距（基于左右列的宽度），即可获得结果。

看看这个小提琴：http: [//jsfiddle.net/fabio_silva/d7SFJ/](http://jsfiddle.net/fabio_silva/d7SFJ/)

**HTML/CSS：**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
   <head>

      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

      <style type="text/css">
        html, body {
          margin: 0px;
          padding: 0px;
        }

        #parent {
          background-color: #eee;
          width: 100%;
        }
        #colLeft {
          background-color: #ff8b8b;
          height: 48px;
          width: 100px;
          float: left;

        }
        #colMiddle {
          height: 48px;
          text-align: center;
          float: left;
          width: 100%;
          margin-left: -100px; /* negative colLeft width */
          margin-right: -150px; /* negative colRight width */
        }
            #colMiddleInner
            {
                margin-left: 100px;
                margin-right: 150px;
                height: 48px;
                background: #c9ffc3;
            }
        #colRight {
          background-color: #c3d0ff;
          height: 48px;
          width: 150px;
          float: left;
        }
      </style>

   </head>

   <body>
      <div id="parent" style="width:100%">
          <div id="colLeft">left</div>
          <div id="colMiddle">
            <div id="colMiddleInner">
              title
            </div>
          </div>
          <div id="colRight">right</div>
      </div>

   </body>
</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T23:56:36.047

您需要定义宽度...

```
 #colLeft {
      background-color: #ff8b8b;
      height: 48px;
      width: 50px
      display: inline;
    }
    #colMiddle {
      background-color: #c9ffc3;
      height: 48px;
      display: inline;
      width: auto;
      text-align: center;
    }
    #colRight {
      background-color: #c3d0ff;
      height: 48px;
      width: 50px;
      display: inline;
    } 
```

注意：默认值为`width`自动。

# ios - 从香草论坛请求最后更新日期

> ID：13887853
> 
> 赞同：1
> 
> 时间：2012-12-14T23:48:35.847
> 
> 标签：ios, restful-url

我有一个 iOS 应用程序，我想以一种非常简单的方式与 Vanilla 论坛进行交互。我希望 iOS 应用程序请求论坛的最后更新日期。这样我就可以向 iOS 应用用户表明自他们上次访问以来论坛已更新。

我猜要走的路是使用 Vanilla 的 REST 服务，但我不确定如何请求最后更新日期，或者是否可能使用 REST。

我正在研究这个链接上的信息：[Vanilla REST Services](http://vanillaforums.org/discussion/17525/vanilla-rest-services)，并通过 PHP 代码搜索以找到可能有帮助的东西。

有没有更简单的方法来请求在 iOS 应用程序中使用 Vanilla 论坛的最后更新日期？如果是这样，那更简单的方法是什么？

# bash - 管道导出命令

> ID：13887859
> 
> 赞同：7
> 
> 时间：2012-12-14T23:49:19.377
> 
> 标签：bash, shell, terminal, pipeline, xargs

为什么`export`在命令管道中用作最后一步时会失败？

```
echo FOO=bar | xargs export
# => xargs: export: No such file or directory 
```

我可以用这种方式重写它来完成我想要的：

```
export `echo FOO=bar` 
```

但是为什么我不能`export`以第一种方式使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T23:51:34.317

export 是一个内置的 shell，xargs 需要一个实际的二进制文件。

# ios - 在没有任何导航控制器的情况下，如何在 iOS 中从 vc1.view 过渡到 vc2.view？

> ID：13887861
> 
> 赞同：0
> 
> 时间：2012-12-14T23:49:48.333
> 
> 标签：ios, uiview, transition

我有 vc1.view 覆盖整个屏幕，我希望能够使 vc1.view 变暗，并让 vc2.view 放大整个屏幕。

我的应用程序中没有任何导航控制器，那么实现我的目标的最佳做法是什么？我正在考虑的解决方案是：

*   将 vc1.view 和 vc2.view 添加到公共容器视图中
*   使用【UIView transitionFromView:vc1.view toView:vc2.view ......】

我不喜欢必须将不同 vc 的视图添加到公共容器视图中的想法。有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:49:29.110

您可以使用 transitionFromView:toView:... 而不将新视图添加到公共容器，因为该转换方法负责添加视图。以下对我有用。代码位于视图控制器中，其视图是“来自视图”。我在这里使用交叉淡入淡出，但您可以将其更改为任何其他可用方法：

```
-(void)switchViews:(id)sender {
    UIWindow *win = self.view.window;
    YellowController *yellow = [self.storyboard instantiateViewControllerWithIdentifier:@"Yellow"];
    yellow.view.frame = self.view.frame;
    [UIView transitionFromView:self.view toView:yellow.view duration:2 options:UIViewAnimationOptionTransitionCrossDissolve completion:^(BOOL finished) {
        win.rootViewController = yellow;
    }];
} 
```

但是，要进行自定义转换，您必须将新视图添加为“来自视图”所在的任何视图的子视图（我认为）。在这个例子中，这是窗口的视图。此代码从旧视图的中心生成新视图，而该视图淡出。在转换结束时，视图控制器切换到拥有新视图的控制器（在这种情况下为黄色）

编辑后：我将此方法更改为使用 CGAffineTransform （感谢 jrturton 在回答我的问题时提出的建议）：

```
-(void)switchViews3:(id)sender {
    UIWindow *win = self.view.window;
    YellowController *yellow = [self.storyboard instantiateViewControllerWithIdentifier:@"Yellow"];
    yellow.view.frame = self.view.frame;
    yellow.view.transform = CGAffineTransformMakeScale(.1, .1);
    [win addSubview:yellow.view];

    [UIView animateWithDuration:.6 animations:^{
        yellow.view.transform = CGAffineTransformIdentity;
        self.view.alpha = 0;
    }
                 completion:^(BOOL finished) {
                     [self.view removeFromSuperview];
                     win.rootViewController = yellow;
                 }]; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T00:35:03.980

要在没有导航控制器的情况下从 vc1 呈现到 vc2，请使用

```
[vc1 presentViewController:vc2 animated:YES completion:nil]; 
```

为了改变呈现风格，Apple 提供了一些。您只需要在调用上述代码之前进行设置：

```
vc2.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal; 
```

这是列表：

```
typedef enum {
   UIModalTransitionStyleCoverVertical = 0,
   UIModalTransitionStyleFlipHorizontal,
   UIModalTransitionStyleCrossDissolve,
   UIModalTransitionStylePartialCurl,
} UIModalTransitionStyle; 
```

# objective-c - 为什么 DADisk 的 Ejectable 属性总是错误的？

> ID：13887862
> 
> 赞同：3
> 
> 时间：2012-12-14T23:50:04.490
> 
> 标签：objective-c, macos, core-foundation, diskarbitration

我正在尝试使用磁盘仲裁框架获取所有可弹出磁盘的列表。问题是 Ejectable 属性总是假的（即使`diskutil info`说`Ejectable: Yes`）。这是怎么回事？我需要先做一个 DADiskClaim 吗？

```
- (NSArray *)disks {
    NSMutableArray *disks = @[].mutableCopy;

    // Get a list of everything in /Volumes/
    NSArray *volumes = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:@"/Volumes/" error:NULL];

    DASessionRef session = DASessionCreate(kCFAllocatorDefault);

    // Use NSSet for easy object finding
    NSMutableSet *bsdNamesOfDisks = @[].mutableCopy;

    for (NSString *volume in volumes) {
        // Create the URL for the volume mount point
        NSURL *volumeURL = [NSURL URLWithString:[[NSString stringWithFormat:@"/Volumes/%@", volume] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

        // Create DADisk for the volume
        DADiskRef volumeDisk = DADiskCreateFromVolumePath(kCFAllocatorDefault, session, (__bridge CFURLRef)volumeURL);

        // Filter out files/directories that aren't volumes
        if (volumeDisk) {
            // Get disk description
            NSDictionary *description = (__bridge_transfer NSDictionary *)DADiskCopyDescription(volumeDisk);

            // Get BSD name and ejectable property
            NSString *bsdName = description[(__bridge id)kDADiskDescriptionMediaBSDNameKey];
            CFBooleanRef ejectable = (__bridge CFBooleanRef)description[(__bridge id)kDADiskDescriptionMediaEjectableKey];

            // Check to see if this is a volume we're interested in
            if (bsdName && ejectable && CFBooleanGetValue(ejectable)) {
                // Deletes "disk" in "disk0s1" and separates the numbers
                NSArray *numbersInName = [[bsdName substringFromIndex:4] componentsSeparatedByCharactersInSet:[NSCharacterSet letterCharacterSet]];

                // Scan the first number
                NSScanner *scanner = [NSScanner scannerWithString:numbersInName[0]];

                NSInteger diskNumber;
                [scanner scanInteger:&diskNumber];

                // Construct BSD name for the whole disk
                NSString *bsdDiskName = [NSString stringWithFormat:@"disk%ld", diskNumber];

                // Check to see if we already added this disk to our array (e.g. disk0s1 and disk0s2 both give disk0)
                if (![bsdNamesOfDisks containsObject:bsdDiskName]) {
                    // Create DADisk for the whole disk
                    DADiskRef disk = DADiskCreateFromBSDName(kCFAllocatorDefault, session, bsdDiskName.UTF8String);

                    // Add DADisk to disk array and BSD name to name array
                    [disks addObject:(__bridge_transfer id)disk];
                    [bsdNamesOfDisks addObject:bsdDiskName];
                }
            }

            CFRelease(volumeDisk);
        }
    }

    CFRelease(session);

    return disks.copy;
} 
```

# python - 提取边界框并将其保存为图像

> ID：13887863
> 
> 赞同：31
> 
> 时间：2012-12-14T23:50:08.453
> 
> 标签：python, image, opencv, image-processing, bounding-box

假设您有以下图像：

![例子：](../Images/246ac2ae1e987bcbbe8ba156335076f6.png)

现在我想将每个独立的字母提取到单独的图像中。目前，我已经恢复了轮廓，然后绘制了一个边界框，在本例中为角色`a`：

![字符“a”的边界框](../Images/89ee15367513f15185579a7d31dfad4f.png)

在此之后，我想提取每个框（在本例中为 letter `a`）并将其保存到图像文件中。

预期结果：

![结果](../Images/79c2be3af66d3e601f2c93811433d51e.png)

到目前为止，这是我的代码：

```
import numpy as np
import cv2

im = cv2.imread('abcd.png')
im[im == 255] = 1
im[im == 0] = 255
im[im == 1] = 0
im2 = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)
ret,thresh = cv2.threshold(im2,127,255,0)
contours, hierarchy = cv2.findContours(thresh,cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE)

for i in range(0, len(contours)):
    if (i % 2 == 0):
       cnt = contours[i]
       #mask = np.zeros(im2.shape,np.uint8)
       #cv2.drawContours(mask,[cnt],0,255,-1)
       x,y,w,h = cv2.boundingRect(cnt)
       cv2.rectangle(im,(x,y),(x+w,y+h),(0,255,0),2)
       cv2.imshow('Features', im)
       cv2.imwrite(str(i)+'.png', im)

cv2.destroyAllWindows() 
```

提前致谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-15T00:00:45.393

下面会给你一封信

```
letter = im[y:y+h,x:x+w] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-01T04:04:26.107

这是一种方法：

*   将图像转换为灰度
*   获得二值图像的 Otsu 阈值
*   寻找轮廓
*   使用 Numpy 切片遍历轮廓并提取 ROI

* * *

找到轮廓后，我们[`cv2.boundingRect()`](https://docs.opencv.org/2.4/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=boundingrect#boundingrect)用来获取每个字母的边界矩形坐标。

```
x,y,w,h = cv2.boundingRect(c) 
```

为了提取 ROI，我们使用 Numpy 切片

```
ROI = image[y:y+h, x:x+w] 
```

由于我们有边界矩形坐标，我们可以绘制绿色边界框

```
cv2.rectangle(copy,(x,y),(x+w,y+h),(36,255,12),2) 
```

这是检测到的字母

[![在此处输入图像描述](../Images/f747b7f1aff0735afd6aaf1577b3c2b1.png)](https://i.stack.imgur.com/912m2.png)

这是每个保存的字母 ROI

[![在此处输入图像描述](../Images/464738cbd8614c17f0085998d523a22b.png)](https://i.stack.imgur.com/rRUXz.png)

```
import cv2

image = cv2.imread('1.png')
copy = image.copy()
gray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)
thresh = cv2.threshold(gray,0,255,cv2.THRESH_OTSU + cv2.THRESH_BINARY)[1]

cnts = cv2.findContours(thresh, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)
cnts = cnts[0] if len(cnts) == 2 else cnts[1]

ROI_number = 0
for c in cnts:
    x,y,w,h = cv2.boundingRect(c)
    ROI = image[y:y+h, x:x+w]
    cv2.imwrite('ROI_{}.png'.format(ROI_number), ROI)
    cv2.rectangle(copy,(x,y),(x+w,y+h),(36,255,12),2)
    ROI_number += 1

cv2.imshow('thresh', thresh)
cv2.imshow('copy', copy)
cv2.waitKey() 
```

# xml - TestNG XML配置文件DTD“test”标签错误

> ID：13887869
> 
> 赞同：2
> 
> 时间：2012-12-14T23:50:39.250
> 
> 标签：xml, testng, dtd

当 Eclipse 尝试根据其 DTD 验证 XML 时，我总是在 TestNG XML 配置文件中的*测试*标记（在行**test** name="Bing-Search-Sample...）收到此错误。该文件工作正常，似乎没有问题：

> 元素类型“test”的内容必须匹配“(method-selectors?,parameter*,groups?,packages?,classes?)”。

XML 文件：

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >

<suite name="tests" allow-return-values="true"
    verbose="10">
    <test name="Bing-Search-Sample-Test">
        <classes>
            <class name="package.TestFactory" />
        </classes>
        <groups>
            <run>
                <include name="sample-tests" />
            </run>
        </groups>
        <parameter name="testInterfaceXML" value="SearchInterface.xml"></parameter>
        <parameter name="testSuiteXML" value="SearchTest.xml"></parameter>
    </test>
</suite> 
```

由于 XML 工作正常，我想知道 TestNG DTD 或 eclipse 的 XML 文件验证是否存在问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-15T00:08:27.153

显然元素的顺序很重要。首先是参数，然后是组，类应该是测试元素中的最后一个元素。这是配置文件的正确格式：

```
<suite name="tests" allow-return-values="true"
    verbose="10">
    <test name="Bing-Search-Sample-Test">
        <parameter name="testInterfaceXML" value="SearchInterface.xml"></parameter>
        <parameter name="testSuiteXML" value="SearchTest.xml"></parameter>
        <groups>
            <run>
                <include name="sample-tests" />
            </run>
        </groups>
        <classes>
            <class name="package.TestFactory" />
        </classes>
    </test>
</suite> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-12T19:02:43.243

只需将第一行更改为以下内容：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

删除此行：

```
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" > 
```

它不会显示错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-06-17T09:52:36.080

只需替换以下行：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd"> 
```

和：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-2.4.dtd"> 
```

它对我有用。

参考：[https ://www.experts-exchange.com/questions/23176057/web-xml-Element-type-listener-must-be-declared.html](https://www.experts-exchange.com/questions/23176057/web-xml-Element-type-listener-must-be-declared.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T00:51:02.700

验证的一个常见用途是确保软件知道从输入中期望什么，从而保证每个有效文档都将得到正确处理。并不总是保证每个无效文档都会引发错误——有时（如这里）某些消费软件实际上可以处理一些无效的文档。

您问软件正确处理您的输入这一事实是否意味着 DTD 有问题。不一定：定义严格的排序通常比允许所有可能的排序变化更容易，特别是当元素的顺序不能传达信息时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-03T06:48:15.053

此外，检查您的 testng.xml 格式是否正确，即其中没有不需要的字符。就我而言，我错误地将两个右括号放在一起并尝试执行 testng.xml。它抛出相同的错误。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-10-17T17:49:56.570

如果没有任何效果，请尝试将文件的内容替换为任何其他有效的 testng.xml 文件的内容。这在我的情况下有效。

# c++ - 无法编译顶点着色器：意外的 $end at token " "

> ID：13887871
> 
> 赞同：3
> 
> 时间：2012-12-14T23:50:47.337
> 
> 标签：c++, opengl, glsl, shader, vertex-shader

我在 OpenGL 下编译顶点着色器时遇到了一些问题。我有一个非常标准的顶点着色器：

```
#version 330

layout(location=0) in vec4 in_Position;
layout(location=1) in vec4 in_Color;
out vec4 ex_Color;
void main(void)
{
gl_Position = in_Position;
ex_Color = in_Color;
} 
```

我的着色器加载功能看起来像：

```
string temp = LoadFile(vShaderPath);
const char* vShaderString = temp.c_str();
const char* vShaderPathC = vShaderPath.c_str();
fprintf(stderr, "File: %s \nContents: %s\n", vShaderPathC, vShaderString);
temp = LoadFile(fShaderPath);
const char* fShaderString = temp.c_str();

vShaderHandle = glCreateShader(GL_VERTEX_SHADER);
fShaderHandle = glCreateShader(GL_FRAGMENT_SHADER);

glShaderSource(vShaderHandle, 1, &vShaderString, NULL);
glShaderSource(fShaderHandle, 1, &fShaderString, NULL);

GLint compiled;

glCompileShader(vShaderHandle);
glCompileShader(fShaderHandle);

glGetShaderiv(vShaderHandle, GL_COMPILE_STATUS, &compiled);
if(compiled == false)
{
    fprintf(stderr, "ERROR: Vertex shader not compiled properly.\n");

    GLint blen = 0;
    GLsizei slen = 0;

    glGetShaderiv(vShaderHandle, GL_INFO_LOG_LENGTH , &blen);
    if (blen > 1)
    {
        GLchar* compiler_log = new GLchar[blen];
        glGetInfoLogARB(vShaderHandle, blen, &slen, compiler_log);
        fprintf(stderr, "compiler log:\n %s", compiler_log);
        delete [] compiler_log;
    }
} 
```

但是当我运行我的程序时，我得到以下输出：

```
INFO: OpenGL Version: 3.3.0 NVIDIA 310.19
File: vShader.v.glsl
Contents: #version 330

layout(location=0) in vec4 in_Position;
layout(location=1) in vec4 in_Color;
void main(void)
{
    gl_Position = in_Position;
    ex_Color = in_Color;
}

ERROR: Vertex shader not compiled properly.
compiler log:
  (0) : error C0000: syntax error, unexpected $end at token "<EOF>" 
```

加载文件定义：

```
string ShaderEffect::LoadFile(string path)
{
    ifstream in(path.c_str(), ios::in);

    if(in.is_open())
    {

        string contents;
        in.seekg(0, ios::end);
        contents.resize(in.tellg());
        in.seekg(0, ios::beg);
        in.read(&contents[0], contents.size());
        in.close();
        return contents;
    }
    else
        throw "Problem reading file!";
} 
```

我知道 glsl 代码本身不是问题，因为我已将字符串硬编码为：

```
const char * testvShader = {
"#version 330\n"\
"layout(location=0) in vec4 in_Position;\n"\
"layout(location=1) in vec4 in_Color;\n"\
"out vec4 ex_Color;"
"void main()\n"\
"{\n"\
"    gl_Position = in_Position;\n"\
"    ex_Color = in_Color;\n"\
"}"}; 
```

当我将 &vShaderString 切换到 &testvShader 时，程序运行良好。但我不明白加载是如何成为问题的，因为片段着色器以相同的方式加载并编译和运行非常好，我在编译之前将文件打印到控制台，它看起来很好。我一头雾水，不知道是什么问题。

PS 我在 Fedora 上运行，如果这很重要的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:35:21.490

您调用并将结果存储`c_str()`在`temp`一个变量中，然后您修改`temp`并使用`c_str()`. 这不起作用，因为如果您修改字符串， c_str() 的结果将变为无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T00:07:17.060

此编译器错误通常是由尾随垃圾引起的。最简单的补救措施是告诉 OpenGL 源字符串的确切长度。

将您的 glShaderSource 调用替换为

```
const char* vShaderString = temp.c_str();
int vertex_shader_string_length = temp.length();

/* ... */

const char* fShaderString = temp.c_str();
int fragment_shader_string_length = temp.length();

glShaderSource(vShaderHandle, 1, &vShaderString, &vertex_shader_string_length);
glShaderSource(fShaderHandle, 1, &fShaderString, &fragment_shader_string_length); 
```

# sharepoint - 如何将选择字段的文本转换为图标？

> ID：13887872
> 
> 赞同：2
> 
> 时间：2012-12-14T23:50:52.530
> 
> 标签：sharepoint, xslt

救命啊各位！我的共享点页面中有一个选择字段，其中包含如下选项：

```
(1) Go
(2) Warning
(3) Stop 
```

现在，我希望它以图标而不是文本的形式出现在列表中。我有一个可以工作的 jquery 脚本，但是在所有列表中搜索包含的文本需要很长时间，而且无论如何使用 xsl 会更好，因为它会在显示之前呈现。

那么我怎样才能在 xsl 中完成这个呢？这是据我所知，因为我只学习 xsl：

```
<xsl:stylesheet 
  xmlns:x="http://www.w3.org/2001/XMLSchema" 
  xmlns:d="http://schemas.microsoft.com/sharepoint/dsp" 
  version="1.0" 
  exclude-result-prefixes="xsl msxsl ddwrt" 
  xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime" 
  xmlns:asp="http://schemas.microsoft.com/ASPNET/20" 
  xmlns:__designer="http://schemas.microsoft.com/WebParts/v2/DataView/designer" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:msxsl="urn:schemas-microsoft-com:xslt" 
  xmlns:SharePoint="Microsoft.SharePoint.WebControls" 
  xmlns:ddwrt2="urn:frontpage:internal">

    <!-- Convert the Scope Field into an icon -->
    <xsl:template match="FieldRef[@Name='Scope']">
        <xsl:param name="thisNode" select="."/>
        <xsl:choose>
            <xsl:when test="$thisNode/@Scope='(1) Go'">
                <td class="statusRating1"></td>
            </xsl:when>
            <xsl:when test="$thisNode/@Scope='(2) Warning'">
                <td class="statusRating2"></td>
            </xsl:when>
            <xsl:when test="$thisNode/@Scope='(3) Stop'">
                <td class="statusRating3"></td>
            </xsl:when> 
            <xsl:otherwise>
                <xsl:value-of select="$thisNode/@Scope" />
            </xsl:otherwise>                
        </xsl:choose>
    </xsl:template> 

 </xsl:stylesheet> 
```

这是我要应用的css：

```
.statusRating1{background-image: url("/_layouts/custom/images/go.png"); }
.statusRating2{background-image: url("/_layouts/custom/images/warning.png"); }
.statusRating3{background-image: url("/_layouts/custom/images/stop.png"); } 
```

现在，我已经尝试过使用和不使用`mode="Choice_body"`or `mode="MultiChoice_body`and even `Text_body`，并且也尝试过添加 `<xsl:apply-templates />` ，但它似乎从来没有挂钩。该列明确命名为“范围”。也许我只需要[添加正确的模式](https://sharepoint.stackexchange.com/questions/54081/what-is-the-xslt-mode-binding-for-a-choice-field)？

在萤火虫中，我可以看到从未添加过该类。

**[更新]**我注意到在我以这种方式使用模板的其他地方，除非模板`mode`定义正确，否则模板永远不会“采用”。但是，我用谷歌搜索了世界各地，找不到`mode`用于选择字段的权利。我什至为此创建了一个问题*，*在[这里](https://sharepoint.stackexchange.com/questions/54081/what-is-the-xslt-mode-binding-for-a-choice-field)。此外，使用`thisNode`来自[Microsoft 的示例](http://msdn.microsoft.com/en-us/library/ff606773.aspx?ppud=4)，您可以在其中非常轻松地修改字段类型（此处选择字段除外）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T13:10:22.693

为了在属性模板中为 SPFieldChoice 字段定义[自](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfieldchoice.aspx)[定义渲染](http://msdn.microsoft.com/en-us/library/ff606773.aspx)，应使用值**主体**`mode`

 **`Choice_body` `MultiChoice_body`未定义具有名称的模式的模板。

因此，在您的情况下，*模板*将如下所示：

```
<xsl:template match="FieldRef[@Name='Scope']" mode="body"> 
```

* * *

没有记录为呈现 SharePoint 字段定义的模板模式属性，但您可以在`%ProgramFiles%\Common Files\Microsoft Shared\web server extensions\14\TEMPLATE\LAYOUTS\XSL\fldtypes.xsl`. 有关详细信息，请参阅模板*PrintField*的实现。

希望这可以帮助，

瓦迪姆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:18:15.617

**您已经编写了一个模板这一事实还不足以让这个模板永远被执行**。

如果它被 XSLT 内置（默认）模板的代码选择执行，这些模板不知道任何名为 的参数`$thisNode`，并且不会将此类参数传递给您的模板。

这意味着`$thisNode`启动模板时参数的值是空字符串——因此没有满足任何`xsl:when`测试条件，因此`xsl:otherwise`选择了。

**解决方案**：

**要么**：

1.  在您的代码中有一个明确`xsl:apply-templates`的，它选择要与 tempate 匹配的节点，或者：

2.  删除`<xsl:param>`并替换代码中每次出现的`$thisNode`with `.`。**

# algorithm - 基于参数的随机排序

> ID：13887873
> 
> 赞同：-2
> 
> 时间：2012-12-14T23:51:04.600
> 
> 标签：algorithm, math, sorting

我想根据用户输入创建一个排序功能。

假设你有：

*   有序整数列表或向量**X**，从 1 到 10。
*   功能 F
*   参数 t
*   输出列表**Y**

我要做的是'之间的一致功能

`F(X, t) = Y`

我的意思是对于相同的 t，它必须提供相同的 Y。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:54:33.033

*用t*播种你的随机生成器并打乱列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:43:00.963

我保证有比这更好的答案，我承认我不太理解@GeorgScholly 的答案，但也许你正在寻找的函数是一个多项式，可以通过插值获得。

例如，假设您的向量**X**有两个整数**x [0]**、**x [1]**，因此您的输出向量**Y**必须有两个整数**y [0]**、**y [1]**。有一条线**y=ax+b**适合任何两个点**(x [0] , y [0] )**和**(x [1] , y [1] )**。

一般而言，**n**个点**(x [0] , y [0] ) ... (x [n-1] , y [n-1] )**总是可以*完全由***n-1 次**多项式拟合，*即*函数**y = a [n -1] x ^(n-1) + a [n-2] x ^(n-2) + ... + a [2] x ² + a [1] x + a [0]**。

这些系数**a [n-1] ... a [0]**可以通过许多“多项式插值”方法找到。实际上，向量形式的系数将定义您的函数**F(x)**。

最后，要合并参数**t**，您可以简单地添加“不必要”项，*即*用抛物线（不是线）匹配两个点，用三次（不是抛物线）匹配三个点等，以便拥有额外**的 a [n]**用作固定点**t**。

如果没有更简单的方法（如果@GoergScholly 的答案还不是一个），我会感到非常惊讶。

# jquery - 在颜色框中提交 ajax 表单后重定向用户

> ID：13887877
> 
> 赞同：1
> 
> 时间：2012-12-14T23:51:49.690
> 
> 标签：jquery, colorbox

我正在尝试使用 jquery 通过 ajax 在颜色框中提交表单。这是我的问题：首先：提交表单后，我无法将用户重定向到另一个页面。第二：我想在另一种情况下更改颜色框内容而不关闭它。注意：我正在使用 Codeingiter。这是我的jQuery代码：

```
 $('#create-list-form').submit(function(){
        $.post(
        $(this).attr('action'),
        $(this).serialize(),
        function(data){
         $.colorbox({html: data});
        });
        return false;
    }); 
```

谢谢

# phantomjs - CasperJS/PhantomJS 无法打开 Facebook

> ID：13887888
> 
> 赞同：2
> 
> 时间：2012-12-14T23:53:18.377
> 
> 标签：phantomjs, casperjs

我见过这样的例子，展示了如何使用 casperJS 登录 facebook： [如何使用 CasperJS 登录网站？](https://stackoverflow.com/questions/13376189/login-with-casperjs/13376672#13376672)

但我无法让这个代码为我工作。我对登录部分不感兴趣，我只想将任何 facebook 页面加载到 casperjs 或 phantomjs 中，但加载时总是失败。

这对其他人有用吗？还是 facebook 检测到浏览器并且不再允许访问？

这是我无法做的简化版本：

```
var casper = require('casper').create({
    verbose: true,
    logLevel: 'debug',
    pageSettings:{
        userAgent :'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4'    ,
        loadImages:  false,         // The WebPage instance used by Casper will
        loadPlugins: false         // use these settings
    }
});
casper.start()
casper.thenOpen('https://www.facebook.com/pfchangs', function() {

    this.echo(this.getHTML());
    //this just prints out empty page: <html><head></head><body></body></html>

});

casper.run(); 
```

我在 Windows 7 上运行它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T18:32:10.797

看起来这是 casperjs windows 批处理文件的已知错误：

[https://github.com/n1k0/casperjs/commit/0d659f140f1e2120bed967d8301657b5fe79f19c](https://github.com/n1k0/casperjs/commit/0d659f140f1e2120bed967d8301657b5fe79f19c)

# css - CSS动画延迟重复

> ID：13887889
> 
> 赞同：94
> 
> 时间：2012-12-14T23:53:33.157
> 
> 标签：css, css-animations

我最近发现了如何“正确”使用 CSS 动画（之前我认为它们无法像 JavaScript 那样制作复杂的序列）。所以现在我正在了解它们。

对于这种效果，我试图让渐变“耀斑”扫过类似进度条的元素。类似于原生 Windows Vista/7 进度条的效果。

```
@keyframes barshine {
  from {background-image:linear-gradient(120deg,rgba(255,255,255,0) -10%,rgba(255,255,255,0.25) -5%,rgba(255,255,255,0) 0%);}
  to {background-image:linear-gradient(120deg,rgba(255,255,255,0) 100%,rgba(255,255,255,0.25) 105%,rgba(255,255,255,0) 110%);}
}
.progbar {
  animation: barshine 1s 4s linear infinite;
} 
```

正如你所看到的，我试图延迟 4 秒，然后在 1 秒内扫过光芒，重复。

然而，似乎`animation-delay`只适用于第一次迭代，之后闪耀只是不断地反复扫过。

我“解决”了这个问题如下：

```
@keyframes expbarshine {
  from {background-image:linear-gradient(120deg,rgba(255,255,255,0) -10%,rgba(255,255,255,0.25) -5%,rgba(255,255,255,0) 0%);}
  80% {background-image:linear-gradient(120deg,rgba(255,255,255,0) -10%,rgba(255,255,255,0.25) -5%,rgba(255,255,255,0) 0%);}
  to {background-image:linear-gradient(120deg,rgba(255,255,255,0) 100%,rgba(255,255,255,0.25) 105%,rgba(255,255,255,0) 110%);}
}
.progbar {
  animation: barshine 5s linear infinite;
} 
```

`from`并且`80%`完全相同，导致动画长度的80％的“延迟”。

这可行，但是对于我的下一个动画，我需要延迟是可变的（对于特定元素是恒定的，但在使用动画的元素之间是可变的），而动画本身保持完全相同的长度。

使用上面的“解决方案”，当我想要的只是更长的延迟时，我最终会得到一个更慢的动画。

是否有可能`animation-delay`适用于所有迭代，而不仅仅是第一次？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-07-03T11:54:00.943

我有类似的问题并使用

```
@-webkit-keyframes pan {
   0%, 10%       { -webkit-transform: translate3d( 0%, 0px, 0px); }
   90%, 100%     { -webkit-transform: translate3d(-50%, 0px, 0px); }
} 
```

有点恼火的是，你必须伪造你的持续时间来解释两端的“延迟”。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-18T06:18:20.597

minitech 是正确的，它`animation-delay`指定了动画开始之前的延迟，而*不是*迭代之间的延迟。 [规范的编辑草稿](http://dev.w3.org/csswg/css3-animations/#animation-delay)很好地描述了它，并且讨论了您在[此处](http://lists.w3.org/Archives/Public/www-style/2011May/0549.html)描述的此功能，这暗示了此迭代延迟功能。

虽然 JS 中可能有一种解决方法，但您可以仅使用 CSS 来伪造进度条耀斑的迭代延迟。

通过声明flare div`position:absolute`和父 div `overflow: hidden`，将100% 关键帧状态设置为大于进度条的宽度，并[使用cubic-bezier 计时函数](http://cubic-bezier.com/#.14,.38,.2,1.01)和左偏移值，您可以模拟`ease-in-out`或`linear`计时延迟”。

编写一个less/scss mixin 来精确计算左偏移和计时函数来得到这个精确值会很有趣，但我现在没有时间摆弄它。不过很想看到这样的东西！

这是我拼凑的一个演示，以展示这一点。（我试图模拟 Windows 7 进度条并有点短，但它说明了我在说什么）

演示： [http ://codepen.io/timothyasp/full/HlzGu](http://codepen.io/timothyasp/full/HlzGu)

```
<!-- HTML -->
<div class="bar">
   <div class="progress">
      <div class="flare"></div>
   </div>
</div>

/* CSS */

@keyframes progress {
  from {
    width: 0px;
  }
  to {
    width: 600px;
  }
}

@keyframes barshine {
  0% {
    left: -100px;
  }

  100% {
    left: 1000px;
  }
}
.flare {
  animation-name: barshine;
  animation-duration: 3s;
  animation-direction: normal;
  animation-fill-mode: forwards;
  animation-timing-function: cubic-bezier(.14, .75, .2, 1.01);
  animation-iteration-count: infinite;
  left: 0;
  top: 0;
  height: 40px;
  width: 100px;
  position: absolute;
  background: -moz-radial-gradient(center, ellipse cover,  rgba(255,255,255,0.69) 0%, rgba(255,255,255,0) 87%); /* FF3.6+ */
  background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,rgba(255,255,255,0.69)), color-stop(87%,rgba(255,255,255,0))); /* Chrome,Safari4+ */
  background: -webkit-radial-gradient(center, ellipse cover,  rgba(255,255,255,0.69) 0%,rgba(255,255,255,0) 87%); /* Chrome10+,Safari5.1+ */
  background: -o-radial-gradient(center, ellipse cover,  rgba(255,255,255,0.69) 0%,rgba(255,255,255,0) 87%); /* Opera 12+ */
  background: -ms-radial-gradient(center, ellipse cover,  rgba(255,255,255,0.69) 0%,rgba(255,255,255,0) 87%); /* IE10+ */
  background: radial-gradient(ellipse at center,  rgba(255,255,255,0.69) 0%,rgba(255,255,255,0) 87%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b0ffffff', endColorstr='#00ffffff',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
  z-index: 10;
}
.progress {
  animation-name: progress;
  animation-duration: 10s;
  animation-delay: 1s;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
  overflow: hidden;
  position:relative;
  z-index: 1;
  height: 100%;
  width: 100%;
  border-right: 1px solid #0f9116;
  background: #caf7ce; /* Old browsers */
  background: -moz-linear-gradient(top, #caf7ce 0%, #caf7ce 18%, #3fe81e 45%, #2ab22a 96%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#caf7ce), color-stop(18%,#caf7ce), color-stop(45%,#3fe81e), color-stop(96%,#2ab22a)); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(top, #caf7ce 0%,#caf7ce 18%,#3fe81e 45%,#2ab22a 96%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(top, #caf7ce 0%,#caf7ce 18%,#3fe81e 45%,#2ab22a 96%); /* Opera 11.10+ */
  background: -ms-linear-gradient(top, #caf7ce 0%,#caf7ce 18%,#3fe81e 45%,#2ab22a 96%); /* IE10+ */
  background: linear-gradient(to bottom, #caf7ce 0%,#caf7ce 18%,#3fe81e 45%,#2ab22a 96%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#caf7ce', endColorstr='#2ab22a',GradientType=0 ); /* IE6-9 */
}

.progress:after {
  content: "";
  width: 100%;
  height: 29px;
  right: 0;
  bottom: 0;
  position: absolute;
  z-index: 3;
  background: -moz-linear-gradient(left, rgba(202,247,206,0) 0%, rgba(42,178,42,1) 100%); /* FF3.6+ */
  background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(202,247,206,0)), color-stop(100%,rgba(42,178,42,1))); /* Chrome,Safari4+ */
  background: -webkit-linear-gradient(left, rgba(202,247,206,0) 0%,rgba(42,178,42,1) 100%); /* Chrome10+,Safari5.1+ */
  background: -o-linear-gradient(left, rgba(202,247,206,0) 0%,rgba(42,178,42,1) 100%); /* Opera 11.10+ */
  background: -ms-linear-gradient(left, rgba(202,247,206,0) 0%,rgba(42,178,42,1) 100%); /* IE10+ */
  background: linear-gradient(to right, rgba(202,247,206,0) 0%,rgba(42,178,42,1) 100%); /* W3C */
  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00caf7ce', endColorstr='#2ab22a',GradientType=1 ); /* IE6-9 */
}

.bar {
  margin-top: 30px;
  height: 40px;
  width: 600px;
  position: relative;
  border: 1px solid #777;
  border-radius: 3px;
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-01-15T07:09:46.247

这是你应该做的。它应该起作用，因为您有 1 秒的动画，然后在迭代之间有 4 秒的延迟：

```
@keyframes barshine {
  0% {
  background-image:linear-gradient(120deg,rgba(255,255,255,0) 0%,rgba(255,255,255,0.25) -5%,rgba(255,255,255,0) 0%);
  }
  20% {
    background-image:linear-gradient(120deg,rgba(255,255,255,0) 10%,rgba(255,255,255,0.25) 105%,rgba(255,255,255,0) 110%);
  }
}
.progbar {
  animation: barshine 5s 0s linear infinite;
} 
```

所以我一直在搞砸这件事，你可以做到这一点而不会很笨拙。这是在动画迭代之间设置延迟的最简单方法，即 1\. SUPER EASY 和 2\. 只需要一点逻辑。看看我制作的这个舞蹈动画：

```
.dance{
  animation-name: dance;
  -webkit-animation-name: dance;

  animation-iteration-count: infinite;
  -webkit-animation-iteration-count: infinite;
  animation-duration: 2.5s;
  -webkit-animation-duration: 2.5s;

  -webkit-animation-delay: 2.5s;
  animation-delay: 2.5s;
  animation-timing-function: ease-in;
  -webkit-animation-timing-function: ease-in;

}
@keyframes dance {
  0% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  25% {
    -webkit-transform: rotate(-120deg);
    -moz-transform: rotate(-120deg);
    -o-transform: rotate(-120deg);
    -ms-transform: rotate(-120deg);
    transform: rotate(-120deg);
  }
  50% {
    -webkit-transform: rotate(20deg);
    -moz-transform: rotate(20deg);
    -o-transform: rotate(20deg);
    -ms-transform: rotate(20deg);
    transform: rotate(20deg);
  }
  100% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    transform: rotate(0deg);
  }
}

@-webkit-keyframes dance {
  0% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  20% {
    -webkit-transform: rotate(20deg);
    -moz-transform: rotate(20deg);
    -o-transform: rotate(20deg);
    -ms-transform: rotate(20deg);
    transform: rotate(20deg);
  }
  40% {
    -webkit-transform: rotate(-120deg);
    -moz-transform: rotate(-120deg);
    -o-transform: rotate(-120deg);
    -ms-transform: rotate(-120deg);
    transform: rotate(-120deg);
  }
  60% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  80% {
    -webkit-transform: rotate(-120deg);
    -moz-transform: rotate(-120deg);
    -o-transform: rotate(-120deg);
    -ms-transform: rotate(-120deg);
    transform: rotate(-120deg);
  }
  95% {
    -webkit-transform: rotate(20deg);
    -moz-transform: rotate(20deg);
    -o-transform: rotate(20deg);
    -ms-transform: rotate(20deg);
    transform: rotate(20deg);
  }
} 
```

其实我来这里是想弄清楚如何在动画中放置一个延迟，当我意识到你只是 1\. 延长动画的持续时间和衬衫每个动画的时间比例。Beore 我让它们每个持续 0.5 秒，总持续时间为 2.5 秒。现在假设我想添加一个等于总持续时间的延迟，因此延迟 2.5 秒。

您的动画时间为 2.5 秒，延迟为 2.5，因此您将持续时间更改为 5 秒。但是，由于您将总持续时间加倍，因此您需要将动画比例减半。检查下面的决赛。这对我来说非常有效。

```
@-webkit-keyframes dance {
  0% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  10% {
    -webkit-transform: rotate(20deg);
    -moz-transform: rotate(20deg);
    -o-transform: rotate(20deg);
    -ms-transform: rotate(20deg);
    transform: rotate(20deg);
  }
  20% {
    -webkit-transform: rotate(-120deg);
    -moz-transform: rotate(-120deg);
    -o-transform: rotate(-120deg);
    -ms-transform: rotate(-120deg);
    transform: rotate(-120deg);
  }
  30% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  40% {
    -webkit-transform: rotate(-120deg);
    -moz-transform: rotate(-120deg);
    -o-transform: rotate(-120deg);
    -ms-transform: rotate(-120deg);
    transform: rotate(-120deg);
  }
  50% {
    -webkit-transform: rotate(0deg);
    -moz-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    transform: rotate(0deg);
  }
} 
```

总共：

这些是您可能会用来计算如何更改动画的持续时间和每个部分的百分比的计算。

所需的持续时间 = x

desired_duration = animation_part_duration1 + animation_part_duration2 + ...（以此类推）

所需延迟 = y

总持续时间 = x + y

animation_part_duration1_actual = animation_part_duration1 * desired_duration / total_duration

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2020-05-02T19:36:38.723

实现动画之间暂停的另一种方法是应用第二个动画，该动画隐藏元素以获得所需的延迟量。这样做的好处是允许您像往常一样使用 CSS 缓动函数。

```
.star {
  animation: shooting-star 1000ms ease-in-out infinite,
    delay-animation 2000ms linear infinite;
}

@keyframes shooting-star {
  0% {
    transform: translate(0, 0) rotate(45deg);
  }

  100% {
    transform: translate(300px, 300px) rotate(45deg);
  }
}

@keyframes delay-animation {
  0% {
    opacity: 1;
  }
  50% {
    opacity: 1;
  }
  50.01% {
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
} 
```

这仅在您希望延迟是动画持续时间的倍数时才有效。我用它来让流星雨显得更随机： [https ://codepen.io/ericdjohnson/pen/GRpOgVO](https://codepen.io/ericdjohnson/pen/GRpOgVO)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-03-23T22:59:47.100

我宁愿写一点 JavaScript 而不是让 CSS 更难管理。

首先，仅在数据属性更改上应用 CSS 动画：

```
.progbar[data-animation="barshine"] {
    animation: barshine 1s linear;
} 
```

然后添加javascript以延迟量的一半切换动画。

```
var progbar = document.querySelector('.progbar');
var on = false;

setInterval(function () {
    progbar.setAttribute('data-animation', (on) ? 'barshine' : '');
    on = !on;
}, 3000); 
```

或者，如果您不希望在选项卡隐藏时运行动画：

```
var progbar = document.querySelector('.progbar');
var on = false;

var update = function () {
    progbar.setAttribute('data-animation', (on) ? 'barshine' : '');
    on = !on;
    setTimer();
};

var setTimer = function () {
    setTimeout(function () {
        requestAnimationFrame(update);
    }, 3000);
};

setTimer(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-28T19:50:49.710

这是一个小片段，它在 75% 的时间里显示相同的东西，然后它会滑动。这个重复模式很好地模拟了延迟：

```
@-webkit-keyframes slide    {
0%   {background-position: 0 0;}
25%  {background-position: 0 0;}
50%  {background-position: 0 0;}
75%  {background-position: 0 0;}
100% {background-position: 13em 0;}
}

@-moz-keyframes slide       {
0%   {background-position: 0 0;}
25%  {background-position: 0 0;}
50%  {background-position: 0 0;}
75%  {background-position: 0 0;}
100% {background-position: 13em 0;}
}

@keyframes slide            {
0%   {background-position: 0 0;}
25%  {background-position: 0 0;}
50%  {background-position: 0 0;}
75%  {background-position: 0 0;}
100% {background-position: 13em 0;}
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-07T18:38:14.323

我在墙上做了一张海报，它有间隔地左右移动。对我来说它有效：

```
.div-animation {
   -webkit-animation: bounce 2000ms ease-out;
    -moz-animation: bounce 2000ms ease-out;
    -o-animation: bounce 2000ms ease-out;
    animation: bounce 2000ms ease-out infinite;
    -webkit-animation-delay: 2s; /* Chrome, Safari, Opera */
    animation-delay: 2s;
    transform-origin: 55% 10%;    
}

@-webkit-keyframes bounce {
    0% {
        transform: rotate(0deg);
    }
    3% {
        transform: rotate(1deg);
    }
    6% {
        transform: rotate(2deg);
    }
    9% {
        transform: rotate(3deg);
    }
    12% {
        transform: rotate(2deg);
    }
    15% {
        transform: rotate(1deg);
    }
    18% {
        transform: rotate(0deg);
    }
    21% {
        transform: rotate(-1deg);
    }
    24% {
        transform: rotate(-2deg);
    }
    27% {
        transform: rotate(-3deg);
    }
    30% {
        transform: rotate(-2deg);
    }
    33% {
        transform: rotate(-1deg);
    }
    36% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(0deg);
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-12-17T18:35:12.697

您可以纯粹使用 CSS 在无限动画之间创建“假”延迟。做到这一点的方法是巧妙地定义你的关键帧动画点和你的动画持续时间速度。

例如，如果我们想为一个弹跳的球设置动画，并且我们希望每次弹跳之间有 0.5 秒到 1 秒的延迟，我们可以执行以下操作：

```
@keyframes bounce{
    0%{
        transform: translateY(0);
    }
    50%{
        transform: translateY(25%);
    }
    75%{
        transform: translateY(15%);
    }
    90%{
        transform: translateY(0%);
    }
    100%{
        transform: translateY(0);
    }
} 
```

我们所做的是确保球早于 100% 回到原来的位置。在我的示例中，我以 90% 的速度执行此操作，这为我提供了大约 0.1 秒的延迟，这对我来说已经足够了。但显然对于您的情况，您可以添加更多关键帧点并更改变换值。

此外，您可以添加额外的动画持续时间来平衡关键帧动画。

例如：

```
 animation: bounce .5s ease-in-out infinite; 
```

假设我们希望完整的动画在 0.5 秒内结束，但我们希望动画之间有 0.2 秒的额外延迟。

```
 animation: bounce .7s ease-in-out infinite; 
```

所以我们会添加一个额外的 .2s 延迟，在我们的关键帧动画中，我们可以添加更多的百分点来填补 .2s 延迟的空白。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-09-21T08:13:23.963

对于边框闪光：实际上非常简单：将 99% 黑色替换为 1%，例如 1% 变为蓝色，您甚至可以将其缩短，动画时间设置为 5 秒。

```
@keyframes myborder {
  0% {border-color: black;}
  99% {border-color:black;}
  100% {border-color: blue;}
 } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-21T07:43:25.447

延迟在无限开始时只能有一次。排序延迟不适用于无限循环。为此，您必须保留关键帧动画空白示例：

```
@-webkit-keyframes barshine {
  10% {background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(100%,#7db9e8));
    }
  60% {background: -webkit-linear-gradient(top, #7db9e8 0%,#d32a2d 100%);}
} 
```

它将动画 10% 到 60% 并等待完成 40% 以上。所以 40% 延迟到来。

[查找小提琴示例](http://jsfiddle.net/chr5tevh/1/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-04T21:36:58.807

我知道这很旧，但我一直在这篇文章中寻找答案，而使用 jquery，您可以轻松地做到这一点，而且没有太多麻烦。只需在 css 中声明您的动画关键帧并使用您想要的属性设置类。在我的情况下，我使用了 css animate 中的 tada 动画：

```
.tada {
    -webkit-animation-name: tada;
    animation-name: tada;
    -webkit-animation-duration: 1.25s;
    animation-duration: 1.25s;
    -webkit-animation-fill-mode: both;
    animation-fill-mode: both;
} 
```

我希望动画每 10 秒运行一次，所以 jquery 只是添加了类，在 6000 毫秒（动画完成的足够时间）之后，它删除了类，4 秒后它再次添加了类，所以动画再次开始。

```
$(document).ready(function() {
  setInterval(function() {

    $(".bottom h2").addClass("tada");//adds the class

    setTimeout(function() {//waits 6 seconds to remove the class
      $(".bottom h2").removeClass("tada");
    }, 6000);

  }, 10000)//repeats the process every 10 seconds
}); 
```

一点都不像一个人发的那么难。

# c# - 当前上下文中不存在名称“IntroState”

> ID：13887901
> 
> 赞同：0
> 
> 时间：2012-12-14T23:55:05.437
> 
> 标签：c#, xna

我在 Game1 类的 switch 块中收到这三个错误消息，但我不知道如何修复它们。怎么了？当前上下文中不存在名称“IntroState” 当前上下文中不存在
名称“MenuState” 当前上下文中不存在名称“MaingameState”

此外，我在 Intro 类中收到此错误消息：当前上下文中不存在名称“IntroState”

```
public class Game1 : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    IState currentState;

    public enum GameStates
    {
        IntroState = 0,
        MenuState = 1,
        MaingameState = 2,
    }

    public void ChangeGameState(GameStates newState)
    {
        switch (newState)
        {
            case IntroState:
                currentState = new Intro(this);
                break;
            case MenuState:
                currentState = new Menu(this);
                break;
            case MaingameState:
                currentState = new Maingame(this);
                break;
        }
        currentState.Load(Content);
    }

    public GameStates CurrentState
    {
        get { return currentGameState; }
        set { currentGameState = value; }
    }

    private GameStates currentGameState = GameStates.IntroState;

    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
    }

    protected override void Initialize()
    {
        currentState = new Intro(this);
        base.Initialize();
    }

    protected override void LoadContent()
    {       
        spriteBatch = new SpriteBatch(GraphicsDevice);
        currentState.Load(Content);
    }

    protected override void Update(GameTime gameTime)
    {
        currentState.Update(gameTime);     
        KeyboardState kbState = Keyboard.GetState();
        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);
        spriteBatch.Begin();
        currentState.Render(spriteBatch);
        spriteBatch.End();

        base.Draw(gameTime);
    }
}

public interface IState
    {
        void Load(ContentManager content);
        void Update(GameTime gametime);
        void Render(SpriteBatch batch);
    }

public class Intro : IState
{
    Texture2D Introscreen;
    private Game1 game1;       

    public Intro(Game1 game)
    {
        game1 = game;
    }

    public void Load(ContentManager content)
    {
       Introscreen = content.Load<Texture2D>("intro");
    }

    public void Update(GameTime gametime)
    {
        KeyboardState kbState = Keyboard.GetState();
        if (kbState.IsKeyDown(Keys.Space))
          game1.ChangeGameState(IntroState);
    }

    public void Render(SpriteBatch batch)
    {
        batch.Draw(Introscreen, new Rectangle(0, 0, 1280, 720), Color.White);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T23:58:15.250

尝试：

```
switch (newState)
{
            case GameStates.IntroState:
                currentState = new Intro(this);
                break;
            case GameStates.MenuState:
                currentState = new Menu(this);
                break;
            case GameStates.MaingameState:
                currentState = new Maingame(this);
                break;
 } 
```

`IntroState`,`MenuState`并且`MaingameState`属于一个枚举

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:58:50.890

`enum`只有以类型名称为前缀时才能使用值：

```
 //case IntroState:
    case GameStates.IntroState: 
```

你永远不能单独使用`IntroState`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T23:58:56.803

您应该`IntroState`称为`GameStates.IntroState`. 同样适用于其他两个。

# mysql - OSX 10.8 上的 MySQL 连接器/Python 1.0.7 没有获得游标

> ID：13887905
> 
> 赞同：0
> 
> 时间：2012-12-14T19:00:18.237
> 
> 标签：mysql, python

这是我的 Python 代码的骨架：

```
import mysql.connector
sql = mysql.connector.connect(user='user', password='pwd',
      host='127.0.0.1', database='my_db')

cursor = sql.cursor() 
```

产生这个神秘的错误信息：

**回溯（最后一次调用）：文件“pyscript_v2.py”，第 36 行，光标 = sql.cursor() 文件“/Library/Python/2.7/site-packages/mysql/connector/connection.py”，第 1063 行，在游标中引发错误。OperationalError("MySQL Connection not available.") mysql.connector.errors.OperationalError: MySQL Connection not available。**

我的 Google-fu 无法挖掘任何东西，我在用 Python 设置 MySQL 数据库连接时是否遗漏了一些东西？

我在 OS X 10.8.2 上运行 Python 2.7.2，并且正在使用 MySQL Connector/Python 1.0.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:56:22.860

以下链接有解释和可能的解决方案。

[http://bugs.mysql.com/bug.php?id=67649](http://bugs.mysql.com/bug.php?id=67649)

# python - 我应该什么时候在 SQLAlchemy 上调用 flush()？

> ID：13887908
> 
> 赞同：19
> 
> 时间：2012-12-14T23:55:44.857
> 
> 标签：python, sqlalchemy, pyramid

我是 SQLAlchemy 的新手，并且在没有访问原作者的情况下继承了一个有点混乱的代码库。

代码中包含对 的调用`DBSession.flush()`，似乎在作者想要确保数据被保存的任何时候。起初我只是按照我在这段代码中看到的模式，但是当我阅读文档时，似乎这是不必要的——自动刷新应该到位。此外，我遇到了一些 AJAX 调用的情况，这些调用会生成错误“InvalidRequestError: Session is already flushing”。

在什么情况下我会合法地继续调用flush()？

这是一个 Pyramid 应用程序，正在设置 SQLAlchemy：

```
DBSession = scoped_session(sessionmaker(extension=ZopeTransactionExtension(), expire_on_commit=False))
Base = declarative_base() 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-15T04:39:02.663

`ZopeTransactionExtension`与在您的项目中处于活动状态`DBSession`相结合的on`pyramid_tm`将为您处理所有提交。您需要冲洗的情况是：

*   您想创建一个新对象并取回主键。

    ```
    DBSession.add(obj)
    DBSession.flush()
    log.info('look, my new object got primary key %d', obj.id) 
    ```

*   您想尝试在保存点中执行一些 SQL，并在失败时回滚而不使整个事务无效。

    ```
    sp = transaction.savepoint()
    try:
        foo = Foo()
        foo.id = 5
        DBSession.add(foo)
        DBSession.flush()
    except IntegrityError:
        log.error('something already has id 5!!')
        sp.rollback() 
    ```

在涉及 ORM 的所有其他情况下，事务将在异常时为您中止，或在成功时由 自动提交`pyramid_tm`。如果您执行原始 SQL，您将需要`transaction.commit()`自己执行或将会话标记为脏，`zope.sqlalchemy.mark_changed(DBSession)`否则中兴通讯无法知道会话已更改。

此外，除非您有充分的理由，否则您应该`expire_on_commit`默认离开。`True`

# google-maps - 检测谷歌地图标记是否放置在路线上

> ID：13887910
> 
> 赞同：0
> 
> 时间：2012-12-14T23:56:11.630
> 
> 标签：google-maps, google-maps-api-3

是否可以检测标记是否放置在我使用 Google Maps API V3 制作的路线中间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T01:45:43.563

看看[google.maps.geometry.poly](https://developers.google.com/maps/documentation/javascript/reference?hl=en#poly)`isLocationOnEdge`的-method

注意：几何库默认不加载，您必须通过将库参数添加到 maps-API-script-url 来加载库： **`&libraries=geometry`**

# scheme - 按其值的数量重复列表中的值

> ID：13887916
> 
> 赞同：1
> 
> 时间：2012-12-14T23:56:55.633
> 
> 标签：scheme, mit-scheme

完成 Scheme 过程 (repeats-a-lot lst)，该过程接受一个非负整数列表并返回一个列表，其中按顺序包含每个值表示等于其值的次数。请参阅下面的示例。您可以在解决方案中使用反向。您也可以在您的解决方案和本页背面使用帮助程序以获得更多空间。

注意：这不是家庭作业。这是一个练习题，我无法得到答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:30:53.027

我会给你一些提示，这样你就可以自己解决这个练习题，填补空白。您可以做的第一件可能也是最有用的事情是将问题拆分为两个过程。第一个，给定一个数字`n`，负责生成一个`i`重复的列表`n`：

```
(define (repeat n i)
  (if (zero? i)               ; if no more repeats are needed
      <???>                   ; return the empty list
      (cons <???>             ; else cons `n` and advance the recursion
            (repeat <???>     ; `n` is left unchanged
                    <???>)))) ; but `i` is diminished by one 
```

第二个过程使用前一个作为助手，遍历输入`lst`并组合由 生成的所有子列表的结果`repeat`：

```
(define (repeats-a-lot lst)
  (if (null? lst)                      ; if the list is empty
      <???>                            ; return the empty list
      (append (repeat <???> <???>)     ; append n repetitions of current element
              (repeats-a-lot <???>)))) ; and advance the recursion over the list 
```

有几种可能的方法来解决这个问题，有些更奇特（使用尾递归，使用折叠过程等），但恕我直言，这是最简单的方法，因为它只需要一些基本列表操作过程的知识。无论如何，它按预期工作：

```
(repeats-a-lot '(1 2 3))
=> '(1 2 2 3 3 3) 
```

# python - Python 全局热键

> ID：13887921
> 
> 赞同：2
> 
> 时间：2012-12-14T23:57:16.840
> 
> 标签：python, ubuntu, python-3.x

我希望在**Python 3.2**中为**Ubuntu 12.10**创建一个全局热键。也就是说，我的脚本将在后台运行，每当我按下`shift`+ `F4`（例如）时，无论活动窗口是什么，脚本都会做一些事情。

这些[http://pastebin.com/raw.php?i=J4swvcgD](http://pastebin.com/raw.php?i=J4swvcgD)是`resources`我看过的（必须将它们粘贴到 Pastebin 中，因为 Stack Overflow 只允许我发布两个链接）

也许我太新手（我是初学者）或者我一直在寻找错误的地方或错误的东西，但是，我无法利用上面的资源。

如何在**Ubuntu 12.10中使用****Python 3.2**创建全局热键。谢谢！

 **ps：这是[https://askubuntu.com/questions/229129/python-global-hotkey的副本](https://askubuntu.com/questions/229129/python-global-hotkey)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:10:36.357

看看[https://github.com/engla/keybinder](https://github.com/engla/keybinder)；它是一个简单的库，声称启用全局键盘快捷键并包含 Python 绑定。它特定于 GTK，但如果您的目标是 Ubuntu，*大多数*Ubuntu 系统默认使用 Gnome 和基于 GTK 的应用程序。GTK 窗口之外的 YMMV，在这种情况下，您将不得不使用一些较低级别的 X11 调用。**

# c# - 如何动态传递类型

> ID：13887923
> 
> 赞同：0
> 
> 时间：2012-12-14T23:57:45.750
> 
> 标签：c#

> **可能重复：**
> [将类型动态传递给 <T>](https://stackoverflow.com/questions/1292480/pass-type-dynamically-to-t)

我将如何做类似下面的事情？ **historyType**不是 Adapt 中可识别的类型。

```
Type historyType = Type.GetType("Domain.MainBoundedContext.CALMModule.Aggregates.LocationAgg." + modifiedEntry.GetType().Name + "History");

ServiceLocationHistory history = adapter.Adapt<ServiceLocation, historyType>(modifiedEntry as ServiceLocation);
historyRepository.Add(history); 
```

编辑：我最终这样做了：

```
ServiceLocationHistory history = adapter.GetType()
                                    .GetMethod("Adapt", new Type[] { typeof(ServiceLocation) })
                                    .MakeGenericMethod(typeof(ServiceLocation), typeof(ServiceLocationHistory))
                                    .Invoke(adapter, new object[] { modifiedEntry as ServiceLocation })
                                     as ServiceLocationHistory; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:00:36.917

这对您来说可能是也可能不是一个选项，但您始终可以使用 DynamicMethod 并发出 IL 来创建您的类型并返回一个`ServiceLocationHistory`. 我经常这样做而不是 hacky 反射技巧，而且它几乎总是更快。

否则，通过反射，您可以执行以下操作：

```
ServiceLocationHistory history = adapter.GetType()
                                        .GetMethod("Adapt")
                                        .MakeGenericMethod(typeof(ServiceLocation), historyType)
                                        .Invoke(adapter, new [] {modifiedEntry})
                                         as ServiceLocationHistory; 
```

# asp.net - HttpContext.Current.Request.IsSecureConnection 寻找什么 HTTP 标头？

> ID：13887930
> 
> 赞同：1
> 
> 时间：2012-12-14T23:58:36.013
> 
> 标签：asp.net

我假设 ASP.NET 中的 HttpContext.Current.Request.IsSecureConnection 会查看一些 HTTP 标头以确定连接是否安全。

有谁知道它在看哪个标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:03:13.813

这是检查 SSL ( `https://`vs. `http://`) 的使用。看到[这个问题](https://stackoverflow.com/questions/3856274/detecting-https-from-httpcontext-in-net)。

# css - 操纵 3rd 方 *.less css 而不破解它

> ID：13887932
> 
> 赞同：1
> 
> 时间：2012-12-14T23:58:45.133
> 
> 标签：css, twitter-bootstrap, less

在 Meteor (nodejs) 项目中，我们使用较少的 CSS 预处理器，并使用第 3 方“bootstrap-full.less”作为我们的 css 样式。

我想在引导程序中有一个（可能更多）CSS规则，因为它有条件地覆盖其他规则。（详情如下）

但是，我不想“破解”原始引导文件，因为那是“供应商代码”。

我知道我可以重新覆盖 CSS 规则，但这需要更多的工作和麻烦。

所以问题是：
在生成实际的 css 之前，是否可以在 less 中操作/处理解析的 css 规则？

* * *

特别是这里有这个规则，

```
@media (max-width: 767px) {
  ...
  // Make all grid-sized elements block level again
  [class*="span"],
  .row-fluid [class*="span"] {
    float: none;
    display: block;
    width: auto;
    margin-left: 0;
  } 
```

这在我的情况下是不可取的，因为我们只在侧边栏上有这个，即使在移动设备上也保持相同的宽度。所以它应该继续表现得像一个带有浮动单元格（span1、span2 等）的表格。

好吧，也许我会为我的 CSS / bootstrap 问题找到一个不同的解决方案，但如果 less 允许我操纵它产生的 css 仍然会很有趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T04:25:13.547

我在我的项目中所做的是创建一个主`.less`文件，并在该文件中导入我的第三方少文件，然后遵循我的自定义文件。您要更新的任何类，`.less`在您自己的目录中创建一个包含该类的重复文件，然后只需在文件中编辑您要更改的属性。例如：

**无主**

```
@import "/static/bootstrap/less/bootstrap.less";

// My custom files

@import "scaffolding.less";
@import "type.less"; 
```

然后你有你自己的文件叫做

**无类型**

```
h6{
    color: @myCustomColor;
} 
```

这样，您就可以保持所有引导文件完好无损，并且只覆盖您需要的文件。它还可以很好地分离文件，因此如果您需要更新引导程序源，它很容易导航并且也很容易。

# powerpivot - DAX 自定义列

> ID：13887936
> 
> 赞同：1
> 
> 时间：2012-12-14T23:59:00.763
> 
> 标签：powerpivot

去年，我一直在使用 PowerPivot，但只使用了 DAX（对于简单的 RELATED 和 DISTINCTCOUNT 度量）。我经常制作我的枢轴，然后将它们（作为值）复制并粘贴到另一个工作表中，在其中添加一些计算列和格式。我想尽可能避免额外的工作（因为这可以一遍又一遍地完成），但我很难思考如何制定措施以使这些“自定义列”工作直接通过 PowerPivot。

我已经阅读了许多文章和 DAX 教程，但我无法弄清楚为我的特定目的组合 CALCULATE、FILTER、COUNTROWS 等背后的魔力，而且 PD 的工作时间刚刚用完。任何帮助将不胜感激！

**所以这是我目前拥有**的 - 来自 SQL Server 导入的简单 PowerPivot PivotTable：

```
 -------------------------------------
|       | 2009/10 | 2010/11 | 2011/12 |
|       |----|----|---------|----|----|
| Course|Pass|Fail|Pass|Fail|Pass|Fail|
|-------|----|----|----|----|----|----|
|MAT-121|  11|   2|  22|    |  21|   3|
|MAT-122|  13|   3|  19|    |  15|   3|
|MAT-123|    |    |  14|    |  15|   6|
|MAT-127|   6|   3|  14|    |  13|   2|
|MAT-151|    |    |  23|   1|  23|   1|
|MAT-152|  12|    |  25|   2|  25|   4|
 ------------------------------------- 
```

1.  列标签
    *   ACA_YEAR
    *   PASS_FLAG
2.  行标签
    *   课程名
3.  价值观
    *   COUNTA(REG_ID)

**我想添加一个“失败百分比”列**，计算为“=失败/（通过+失败）”。

```
 -------------------------------------------------------
|       |   2009/10     |   2010/11     |   2011/12     |
|       |---------------|---------------|---------------|
| Course|Pass|Fail|%Fail|Pass|Fail|%Fail|Pass|Fail|%Fail|
|-------|----|----|-----|----|----|-----|----|----|-----|
|MAT-121|  11|   2|  15%|  22|    |   0%|  21|   3|  13%|
|MAT-122|  13|   3|  23%|  19|    |   0%|  15|   3|  17%|
|MAT-123|    |    |     |  14|    |     |  15|   6|  29%|
|MAT-127|   6|   3|  33%|  14|    |   0%|  13|   2|  13%|
|MAT-151|    |    |     |  23|   1|  42%|  23|   1|   4%|
|MAT-152|  12|    |   0%|  25|   2|   7%|  25|   4|  14%|
 ------------------------------------------------------- 
```

我可以以某种方式覆盖小计列吗？我需要创建和组合几个不同的度量吗？

非常感谢您提出的任何建议，或者您可以指出我需要阅读的内容！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T09:16:34.567

斯普西，

让我们假设您的值度量称为 [theCount]，并且 REG_ID 所在的列所在的表称为“表”。您需要做的是创建 3 个措施；前两个基于 [theCount] 给出通过和失败的计数，第三个基于 [Fail] 除以总计数。

[Fail]=Calculate([theCount],table[REG_ID]="Fail")

[Pass]=Calculate([theCount],table[REG_ID]="Pass")

[% 失败]=[失败] / [计数]

从枢轴中删除 pass_flag，然后将三个度量拖到值中。

有很多方法可以做到这一点，但这是一种简单的方法。你需要的书是[dax by rob collie](http://www.mrexcel.com/store/index.php?l=product_detail&p=236)

您在 DAX 上取得进展的困难可能与您引用“自定义列”的评论有关！尽管这就是它们的出现方式，但您不能拥有这种 excel 类型的心态，因为它更多地基于表/SQL。

希望这可以帮助。雅各布

# java - 你如何在 JTableHeader 中左对齐文本？

> ID：13887937
> 
> 赞同：1
> 
> 时间：2012-12-14T23:59:03.323
> 
> 标签：java, swing, jtable, renderer, jtableheader

我试过以下，

```
foo.getTableHeader().setLayout(new FlowLayout(FlowLayout.LEFT)); 
```

`foo`实例在哪里`JTable`，但文本仍然居中。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:07:39.463

您的代码会影响表格标题本身的位置，而不是每个标题中的项目。你需要`getTableHeader().setDefaultRenderer(xxx)`用左对齐你关心的类型的东西来调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-10T12:37:29.407

```
((DefaultTableCellRenderer)table.getTableHeader().getDefaultRenderer()).setHorizontalAlignment(JLabel.LEFT) 
```

我发现为我工作的最简单的方法。当然，您可以为 使用另一个居中常数`JLabel.LEFT`。

# php - PHP：将特定的csv行读入二维数组

> ID：13887943
> 
> 赞同：1
> 
> 时间：2012-12-15T00:00:19.950
> 
> 标签：php, csv, multidimensional-array, fgetcsv

我有一个这样排列的文件：
"url1","info1"
"url2","info2"
"url3","info3" ... 一直到 "url15","info15"

我想将文件的最后 10 行读入一个数组，这样 $pagelist[0][0] 会给出 url5，$pagelist[0][1] 会给出 info5。

我目前的代码如下：

```
$file=fopen(csvfile.txt,"r");
$pagelist=array();
$i=0;
$key=0;
while (!feof($file)) {
    if ($i >= (count($file)-11)) {
        $pagelist[$key]=fgetcsv($file);
        $key++; }
    $i++;
}
fclose($file) 
```

当我使用 print_r($pagelist) 时，它似乎已将文件的所有行加载到数组中，而不仅仅是最后 10 行。谁能看到我在代码中做错了什么？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:12:18.710

你的代码的问题`count($file)`是没有按照你的想法做。`$file`只是一个文件句柄资源，而不是一个数组。你最终会比较`$i >= -11`，这当然总是会评估为`true`/

如果您只想使用 linux 来获取最后十行（不确定您是否在 linux 上），您可以尝试这样的操作：

```
$initial_csv = 'csvfile.txt';
$truncated_csv ='csvfile_trun';
$number_of_lines_from_end = 10;
shell_exec('tail -n ' . $number_of_lines_from_end . ' ' . $initial_csv . ' > ' . $truncated_csv);
$file=fopen($truncated_csv,"r");
$pagelist=array();
$i=0;
while (!feof($file)) {
    $pagelist[$i]=fgetcsv($file);
    $i++;
}
fclose($file) 
```

或者，如果您不介意将整个文件放在内存中（即文件将保持很小），您可以将整个文件读入这样的数组。

```
$csv = 'csvfile.txt';
$number_of_lines_from_end = 10;
$file_array = file($csv);
$line_count = count($file_array);
$start = $line_count - $number_of_lines_from_end - 1;
$pagelist=array();
for ($i = $start; $i < $line_count; $i++) {
    $pagelist[]=fgetcsv($file);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:34:54.743

另一个实现，为了它的乐趣（迈克的`tail`可能是最快的）：

```
$storage  = new SPLFixedArray(10);
$i = 0;
while(($line = fgets($file)) && ++$i) {
    $storage[$i%10] = $line;
}
$storage = $storage->toArray();
//switch if order is important;
$prepend = array_splice($storage,($i%10)+1,10 - ($i%10));
array_splice($storage,0,0,$prepend);
//interpret csv
$result = array_map('str_getcsv',$storage); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-15T00:13:39.317

```
$file=fopen(csvfile.txt,"r");    
$pagelist= [];                  
$temp = fgetcsv($file);          
array_merge($pagelist, $temp);   
fclose($file);                              
print_r($pagelist);                         
$lastten = array_slice($pagelist, -10, 10); 
print_r($lastten); 
```

*我可能对切片偏移和限制有误。

# r - 将文本放置在与图表的固定距离处

> ID：13887944
> 
> 赞同：4
> 
> 时间：2012-12-15T00:00:24.940
> 
> 标签：r, ggplot2, positioning

请帮助我找到一种通用方法，将文本放置在距绘图区域右侧恒定距离的位置，如下图所示。由于绘图区域在右侧较窄，不幸的是，当前位置计算将文本定位在左侧太远。请注意，文本是右对齐的。

我的最后一个想法：如果我们知道 x=1 和 x=2 之间的距离（以厘米为单位），我们就可以轻松计算出位置。不幸的是，要达到那个距离 显然[并不容易。](https://stackoverflow.com/questions/13867325/get-width-of-plot-area-in-ggplot2)

仅供参考：我不想给这些线条贴标签。

![在此处输入图像描述](../Images/4f9410b848ce06afa6848fafbd91d220.png) [全尺寸图像](https://i.stack.imgur.com/rWrMd.png)

```
library(ggplot2)
library(reshape)
library(gridExtra)

df = data.frame(x =(1:3),One=c(12, 8, 13),Two=c(13, 7, 11),Three=c(11, 9, 11))
df.melt = melt(df, id.vars="x")
xmax = max(df.melt$x); xmin = min(df.melt$x)
ymax = max(df.melt$value); ymin = min(df.melt$value)

dfa = data.frame(x=(xmax-xmin)*1.15+xmin, y=c(11,12,13.5), ann=c("10.1|","1.1|","Texttexttext|"))
dfa.melt = melt(dfa, id.vars=c("x","ann"))

p = ggplot() + 
  geom_line(data=df.melt,  aes(x=x, y=value, color=variable), show_guide=F) +
  geom_text(data=dfa.melt, aes(x=x, y=value, hjust = 1, label=ann), size=3) + 
  coord_cartesian(xlim=c(xmin,xmax), ylim=c(ymin,ymax))

p1 = p + theme(plot.margin=unit(c(1,3,0,0),"cm"), axis.text.y=element_text(size=10))
p2 = p + theme(plot.margin=unit(c(1,3,0,3),"cm"), axis.text.y=element_text(size=35))
p1c <- ggplot_gtable(ggplot_build(p1))
p1c$layout$clip[p1c$layout$name=="panel"] <- "off"
p2c <- ggplot_gtable(ggplot_build(p2))
p2c$layout$clip[p2c$layout$name=="panel"] <- "off"
grid.arrange(p1c, p2c, ncol=2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T06:13:23.023

由于所有内容都已命名，因此可以使用 **网格**函数访问绘图的任何组件。

问题是 ggplot2 在绘制绘图时会创建许多视口和 grobs。所以对这个情节进行修改并不容易。我还注意到，每次执行新的绘图时，grobs 和视口的名称都会发生变化。所以我试图通过一些标准来获得视口（这里深度= 4）

```
#Get the viewports: 
scene.vps <- grid.ls(viewports=T,grobs=F)
scene.flat <- as.data.frame(do.call('cbind',scene.vps))
vps <- subset(scene.flat ,vpDepth == '4')$name[1:2]
vps <- as.character(vps)

# modify the plot by grid.text
depth <- downViewport(vps[1])
grid.text("1.1|",x=unit(1, "npc") - unit(1, "mm"),
                 y=unit(1, "npc") - unit(20, "mm"),
                 just=c("right", "top"))

grid.text("10.1|",x=unit(1, "npc") - unit(1, "mm"),
                  y=unit(1, "npc") - unit(60, "mm"),
                  just=c("right", "top"))

grid.text("Texttexttext|",x=unit(1, "npc") - unit(10, "mm"),
                          y=unit(1, "npc") -unit(2,'mm'),
          just=c("right", "top"))

upViewport(depth)  # come back to the root viewport

depth <- downViewport(vps[2])

grid.text(... 
```

![在此处输入图像描述](../Images/12a07af1a62b9f12c6fb5d5ca13c90b6.png)

# c - 如何在 Mac OS X 上编译和运行 C 程序

> ID：13887947
> 
> 赞同：35
> 
> 时间：2012-12-15T00:00:44.637
> 
> 标签：c

我正在学习 C，并希望在我的 Mac（运行 OSX Lion 10.7）上使用文本编辑器编写程序。我编写`.c`文件，并使用`gcc filename.c`- 创建名为`a.out`. 但是，当我输入`a.out`or时`/a.out`，我收到以下消息：`-bash: a.out: command not found`or `-bash: /a.out: No such file or directory`。在使用同样的方法之前，我已经在 Linux 系统上成功编译并运行了 C 程序。我在 Mac 上做错了什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-15T00:01:37.437

您需要添加一个点来指示可执行文件在当前目录中，因为当前目录不在路径中：

```
./a.out 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-23T05:47:00.377

您需要在前面`a.out`加上`./`以下内容：

```
./a.out 
```

此外，您可能会发现更改生成的可执行文件的名称很有用。例子：

```
gcc nameofprogramyouwrote.c -o whatyouwanttheprogramtobenamed 
```

...然后像这样执行它：

```
./whatyouwanttheprogramtobenamed 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-15T00:03:57.870

您必须在斜线前添加一个点：

```
./a.out 
```

`/a.out`将尝试执行根文件夹 ( `/`) 中的程序。
`a.out`将在 PATH 环境变量中定义的所有文件夹中查找您的程序。

> 在使用相同的方法之前，我已经在 Linux 系统上成功编译并运行了 C 程序。我在 Mac 上做错了什么？

你必须在 Linux 上做同样的事情。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-26T20:23:02.743

构建：

```
 gcc -Wall -o yourFile yourFile.c 
```

然后执行：

```
 ./yourFile 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-15T00:03:37.957

确保使用 chmod +x a.out 设置您的权限可执行文件

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-12-26T04:00:21.610

你需要一个编译器。然而，最简单的方法是安装 XCode。这样你就可以访问“gcc”，因此，

```
gcc -o mybinaryfile mysourcefile.c 
```

然后像这样运行它。

```
./mybinaryfile 
```

希望这可以帮助！。

# ios - 如何更改 iOS 按钮的图像和文本？

> ID：13887950
> 
> 赞同：1
> 
> 时间：2012-12-15T00:00:52.537
> 
> 标签：ios, xcode, image, button, text

我有一个正确换出图像的圆形矩形按钮。我还想更改其中的文本，但该文本没有显示。StackOverflow 上的大多数问题似乎只涉及一个问题，而不是另一个问题，而且看起来最相关的问题最终都是针对某种 BarItem 的。

在按钮触摸的 IBAction 中，我有以下内容。

```
 [sender setImage:[UIImage imageNamed:@"swappingCorrectly.png"] forState:UIControlStateNormal];
 [sender setTitle:(@"Aww, this doesn't show up!") forState:UIControlStateNormal]; 
```

如前所述，图像切换得很好——但该标签没有出现。我在另一个不交换图像的按钮中使用了相同的文本交换行，它工作正常。

它只是在第一次点击后不显示。任何人都知道我可以做些什么来显示该文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:22:25.250

这对我有用。

```
- (IBAction)buttonPressed:(id)sender {
    [sender setImage:[UIImage imageNamed:@"button.jpeg"] forState:UIControlStateNormal];
    [sender setTitle:(@"Aww") forState:UIControlStateNormal];
} 
```

![在此处输入图像描述](../Images/57c6c08590cf188a3637d127e969b062.png)

![在此处输入图像描述](../Images/4cf098f222df85708744a8a444c0e8db.png)

我确实注意到标签在最右边，而不是死点。标签是否可能在错误的位置呈现？注释掉 setTitle 会产生相同的结果，按钮标题被图像偏移。

如何将 UIImageView 变成一个按钮。注意：这很脏，应该包装到一个类中。我离开了，但注释掉了代码，只是为了做点什么。未显示的是在 xib 文件上抛出并设置为 userenabled = true 的 UIImageView。

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UITapGestureRecognizer* tap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(buttonPressed:)];
    [[self fakeButton] addGestureRecognizer:tap];

    UILabel* label = [[UILabel alloc] initWithFrame:CGRectMake(10, 10, 250, 25)];
    label.text = @"unpressed";
    label.backgroundColor = [UIColor clearColor];
    [[self fakeButton] addSubview:label];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)buttonPressed:(id)sender {
//    UIGestureRecognizer *gesture = (UIGestureRecognizer*)sender;
//    UIImageView* temp = (UIImageView*)gesture.view;
//    for (UILabel *label in temp.subviews) {
//        label.text = @"pressed";
//    }
//    temp.image = [UIImage imageNamed:@"button.jpeg"];
//    
//    //if you want it to reset after a Delay
//    [self performSelector:@selector(buttonUnpressed:) withObject:temp afterDelay:.2];

}

-(void)buttonUnpressed:(UIImageView*)view
{

//    for (UILabel *label in view.subviews) {
//        label.text = @"unpressed";
//    }
//    view.image = [UIImage imageNamed:@"origButton.jpeg"];
//    [self performSelector:@selector(buttonUnpressed:) withObject:view afterDelay:.2];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];

    CGPoint point = [touch locationInView:self.view];

    if (CGRectContainsPoint([[self fakeButton] frame], point))
    {
            //Do touch down state
        NSLog(@"touchStarted");
        [[self fakeButton] setImage:[UIImage imageNamed:@"button.jpeg"]];
        for (UILabel *label in [[self fakeButton] subviews]) {
            label.text = @"pressed";
        }
    }

}
-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"touch ended");
    //remove touch down state
    [[self fakeButton] setImage:[UIImage imageNamed:@"origButton.jpeg"]];
    for (UILabel *label in [[self fakeButton] subviews]) {
        label.text = @"unpressed";
    }

}

@end 
```

# facebook-javascript-sdk - 在没有外部食谱网页的情况下发布操作？

> ID：13887951
> 
> 赞同：0
> 
> 时间：2012-12-15T00:01:08.583
> 
> 标签：facebook-javascript-sdk, action, recipe

我正在做一个项目，我们尽量不使用任何服务器端语言。

是否可以在没有外部食谱网页的情况下发布操作？

[我在http://developers.facebook.com/docs/technical-guides/opengraph/publish-action/](http://developers.facebook.com/docs/technical-guides/opengraph/publish-action/)上看到了一个例子

> FB.api('/me/recipebox:cook', 'post', { recipe : 'http://www.example.com/pumpkinpie.html' });

但它需要来自外部页面的食谱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:11:06.463

您可以在没有服务器端语言的情况下发布操作。但是外部页面是什么意思？

您只需要在发布操作的页面中添加元标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T23:09:55.000

您可以尝试使用新的对象 API，这些对象将托管在 Facebook 上。

见[https://developers.facebook.com/docs/opengraph/using-object-api/](https://developers.facebook.com/docs/opengraph/using-object-api/)

# javascript - 如何清空上传队列

> ID：13887955
> 
> 赞同：2
> 
> 时间：2012-12-15T00:02:05.260
> 
> 标签：javascript, jquery, asp.net, plupload

我正在尝试清空 plupload 队列，但它不起作用。我检查了一些 SO 问题并遵循了它们，但没有一个对我有用。难道我做错了什么？

```
// Convert divs to queue widgets when the DOM is ready
$(function () {
    $("#uploader").pluploadQueue({
        // General settings
        runtimes: 'flash,html5,silverlight,browserplus,gears,html4',
        url: '<%= Page.ResolveUrl("~")%>Memories/HandlerAlbumUploader.aspx',
        max_file_size: '10mb',
        chunk_size: '1mb',
        unique_names: true,
        multiple_queues: true,
        // Resize images on clientside if we can
        //resize: { width: 320, height: 240, quality: 90 },

        // Specify what files to browse for
        filters: [
        { title: "Image files", extensions: "jpg,gif,png" }
    ],

        // Flash settings
        flash_swf_url: '<%= Page.ResolveUrl("~")%>Memories/js/plupload.flash.swf',

        // Silverlight settings
        silverlight_xap_url: '<%= Page.ResolveUrl("~")%>Memories/js/plupload.silverlight.xap',

        init: { StateChanged: function (up) {
            // Called when the state of the queue is changed
            if (up.state == plupload.STOPPED) {
                $('#<%=btnSubmit.ClientID%>').removeAttr('disabled');

            }
        }
        }
    });

    var uploader = $('#uploader').plupload('getUploader');
    uploader.splice();
    uploader.refresh();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T03:07:54.640

您可能想要做的是制作一个按钮或链接，单击时会调用`uploader.splice()`.

您还需要为 QueueChanged 事件 (Use `uploader.bind()`) 创建一个回调，该回调将由您对`splice()`. 使此回调函数清除/重置代表您的队列的 UI 元素。

阅读文档，所有信息都在那里：[http ://www.plupload.com/plupload/docs/api/index.html#class_plupload.Uploader.html](http://www.plupload.com/plupload/docs/api/index.html#class_plupload.Uploader.html)

# ruby - Sinatra 错误：“Gem::LoadError: 无法激活 actionpack-3.2.3，因为 activesupport-3.2.8 与 activesupport (= 3.2.3) 冲突”

> ID：13887958
> 
> 赞同：0
> 
> 时间：2012-12-15T00:02:51.537
> 
> 标签：ruby, gem, sinatra, delimiter, actionpack

我想在我的 Sinatra 应用程序中用逗号分隔大量数字，所以我做了一些谷歌搜索，发现我可以通过添加以下内容来做到这一点：

```
require 'action_view/helpers/number_helper' 
```

然后，似乎我应该能够执行以下操作：

```
number_with_delimiter(12345678, :delimiter => ',') 
```

但是，我收到以下错误：

```
Gem::LoadError: Unable to activate actionpack-3.2.3, because activesupport-3.2.8 conflicts with activesupport (= 3.2.3) 
```

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:31:41.230

在您的应用程序中使用 Gemfile 和捆绑程序。在那里，您可以显式设置每个 gem 的版本。有关如何执行此操作的更多信息，请参见[http://gembundler.com 。](http://gembundler.com)

# java - Android 编程：使用 onClick 调用具有不同输入的函数

> ID：13887959
> 
> 赞同：0
> 
> 时间：2012-12-15T00:02:59.940
> 
> 标签：java, android

我是android编程的新手，所以如果这个问题看起来很愚蠢，请原谅。

我正在 Android 中创建一个计算器，对于用户界面，我有很多按钮（10 位数字大约 20 个，以及各种操作）。现在，一旦用户按下按钮“=”，我就会计算出一个字符串表达式。但是，如果他按下任何其他按钮，则输入会更新。假设他按“1”然后输入=1；然后他按 2 然后输入变为“12”，依此类推。所以每当按下各种按钮时我都需要调用相同的函数，但是函数的输入是不同的。我可以通过制作 n 个不同的功能来解决这个问题，每个按钮一个，但这不是很可扩展。那么我该怎么做呢？

当前的xml文件是：

```
<Button
    android:id="@+id/Button01"
    android:layout_width="70dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/Button03"
    android:layout_alignBottom="@+id/Button03"
    android:layout_toRightOf="@+id/Button03"
    android:onClick="UpdateExpression_/"
    android:text="/" />

<Button
    android:id="@+id/Button02"
    android:layout_width="70dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/Button01"
    android:layout_alignBottom="@+id/Button01"
    android:layout_toRightOf="@+id/Button01"
    android:onClick="UpdateExpression_X"
    android:text="x" /> 
```

我需要更新到 android:onClick="UpdateExpression" 并提到这个函数调用的一些输入。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:13:29.797

您将需要一个中央 onClick 方法，我们将其`updateExpression(View v)`命名为关于您的代码的注意事项：方法名称应以小写字母开头，这是 Java 命名约定。

```
 android:onClick="updateExpression" 
```

现在实现：

```
public void updateExpression (View v)
{
  switch (v.getId())
  {
    case R.id.button1:
    //do stuff here
    break;
    case R.id.button2:
    //do other stuff here
    break;
  }
} 
```

您需要的原因`v.getId()`是因为您正在检查按钮的 id，然后如果它是那个特定的 id 就做一些事情。这个逻辑是必需的，因为您的所有按钮都将实现相同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:16:12.537

这是使用代码的实现....

在 onClick 函数中，将 与`v.getId()`您的每个 Android 布局 ID 进行比较，例如`R.id.button1` `R.id.button2`等...

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Here are some buttons defined in the XML layout as button1, button2, etc...
    Button button1 = (Button)findViewById(R.id.button1);        
    button1.setOnClickListener(myListener);
    Button button2 = (Button)findViewById(R.id.button2);        
    button2.setOnClickListener(myListener);
    Button button3 = (Button)findViewById(R.id.button3);        
    button3.setOnClickListener(myListener);

}

//Create an anonymous implementation of OnClickListener
private OnClickListener myListener = new OnClickListener() {
    public void onClick(View v) {
      Log.d(logtag,"onClick() called");              
      Toast.makeText(MainActivity.this, "The " + v.getId() + " button was clicked.", Toast.LENGTH_SHORT).show();

    }
}; 
```

# ruby-on-rails - Rails Feedzirra：解析来自 Feed 条目标题的链接

> ID：13887964
> 
> 赞同：0
> 
> 时间：2012-12-15T00:03:33.690
> 
> 标签：ruby-on-rails, xml, rss, feedzirra

我检查了来自提要的 Feedzirra::Feed.fetch_and_parse() 对象的对象数据。我使用的提要是[http://feeds.feedburner.com/ChrisBurnor](http://feeds.feedburner.com/ChrisBurnor)

我的问题是，如果此页面上的标题链接到外部站点 Feedzirra 没有发现它，在这种情况下，标题为“1970 年代的太空殖民地艺术”的条目链接到 publicdomainreview.com。然而，链接本身并不存在于 Feedzirra 返回的对象中的任何位置。

我的问题：是否存在包含条目标题中的 href 材料的已知 RSS 元素？或者：有没有办法可以检查这个提要的 xml，看看我是否可以找到链接的去向......

将来，我可能想查看这些链接的内部并将它们的材料包含在我的提要显示中，但现在我只想拥有链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T12:24:25.240

在 feedburner 页面上有一个标题为“查看 Feed XML”的链接。打开它然后在浏览器中执行“查看页面源代码”时，您将看到原始 XML 提要。但是只使用 wget 或 curl 对我来说似乎不那么麻烦。

如果您查看原始提要，您会发现其中没有关于 publicdomainreview.com 的信息或链接。

因此，如果不对提要项进行进一步处理，您将无法轻松获得所需的信息。

# .net - 匹配没有 html 标记的字符串在同一行跨越两次

> ID：13887965
> 
> 赞同：0
> 
> 时间：2012-12-15T00:03:36.223
> 
> 标签：.net, html, regex, string, paragraph

我正在使用.net regex 兼容，虽然确实使用editpadpro。我正在从 .pdf 重新格式化为一个简单的网页，但是 pdf 文件中的一些文本没有正确显示，例如一些黑色字体的字符串后面应该跟黑色文本的描述。但是很多行不在一起，所以黑字串单独说：

**单词**

词的描述

我想要实现的是

**词**的描述

因为是一个 html 文件，所以我正在处理标签

```
</span> or <br/> 
```

我确实需要只选择那些单独的单词，而不干扰那些已经很好的单词。

所以我要定位的是像这样的行

```
<p><span class="font7" style="font-weight:bold;">text text text text </span></p>\r\n<p> 
```

其中“文本”重复 4 次是带有目标行的黑色字体文本。但是我想避免这样的行

```
<p><span class="font7" style="font-weight:bold;">text text text text </span><span class="font7"> text text text <br/> text text text </span></p>\r\n<p> 
```

我一直在尝试使用 jgsoft 或 .net 兼容表达式使用正则表达式，因为我尝试使用前瞻（虽然不是必需的），但这似乎不起作用，我想知道为什么

```
<p><span class="font7" style="font-weight:bold;">.+?(?:(?!.+?</span>.+?$)){2}</p>\r\n<p> 
```

这是我做的另一次尝试，但效果不佳。

```
<p><span class="font7" style="font-weight:bold;">(?!.+(</span>).+\1)</p>\r\n<p> 
```

我尝试在字符串的开头使用前瞻来匹配，但最后我做了很多尝试，我更喜欢问像你这样的人，他们可能知道如何解决这个问题。

所以最后我想要的是从这些行中删除这部分以定位。

```
</p>\r\n<p> 
```

因为那些doble段落不是必需的，而只是在那些特定的行中。通过这样做，看起来像这样

**词**的描述

如果您可以提供 .net 风格或 perl 风格，请使用文本编辑器执行会很好，尽管如果您有任何其他建议也会很好。

来自墨西哥库埃纳瓦卡的问候，对不起我的英语，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T07:49:26.597

如果你把它分成更小的部分，这样的事情可能会起作用：

```
var valid = "<p><span class=\"font7\" style=\"font-weight:bold;\">text text text text </span></p>\r\n<p>";
var invalid = "<p><span class=\"font7\" style=\"font-weight:bold;\">text text text text </span><span class=\"font7\"> text text text <br/> text text text </span></p>\r\n<p>";
var input = valid + invalid;

foreach (Match match in Regex.Matches (input, "<p>(?!<p)(.*?)</p>")) {
    var line = match.Groups [1].Value;
    Console.WriteLine ("MATCH: {0}", line);

    var spans = Regex.Matches (line, "<span.*?>(.*?)</span>");
    Console.WriteLine ("SPANS: {0}", spans.Count);
} 
```

因此，您首先通过匹配 any 来分解事物`<p>.....</p>`，然后检查里面的内容。

# python - Python Pyscopg：如何在 LIMIT/OFFSET 和 WHERE 中使用占位符？

> ID：13887967
> 
> 赞同：6
> 
> 时间：2012-12-15T00:03:53.907
> 
> 标签：python, postgresql, psycopg2

我目前正在尝试在 Python 的 psycopg 模块中的 PostgreSQL 查询中使用占位符。这是我正在使用的代码示例。

```
table.execute('SELECT * FROM table WHERE col2 = %s ORDER BY pID ASC LIMIT %s OFFSET %s;',(val1,val2,val3)) 
```

我在某处读到不可能将这样的占位符用于 LIMIT 和 OFFSET 但是我应该将这种占位符格式用于 WHERE =。

[从 python / postgresql / psycopg2 中的用户输入安全地指定“order by”子句](https://stackoverflow.com/questions/11556711/safely-specifying-order-by-clause-from-user-input-in-python-postgresql-psy)

有谁知道这个 sql 查询的正确占位符语法？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T03:39:12.637

限制和偏移都可以与占位符一起使用，没有任何问题。

一般来说，您可以在表达式中允许“值”的任何地方使用占位符。

`cur.execute("select * from node where node_name = %s limit %s offset %s", ('test', 5, 5))`

工作得很好。

正如引用的文章中已经指出的那样，您不能使用占位符来引用表、列、模式或其中任何一个的别名。在这些情况下，您通常需要在调用执行之前进行自己的变量替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:10:29.777

在非常旧的 PostgreSQL 版本中，确实不可能在`LIMIT`and`OFFSET`子句中使用占位符。此功能是在 7.4 版中添加的，因此可以安全地假设它存在于当前安装中。

但这仅适用于服务器端准备好的语句。Psycopg 不使用服务器端准备好的语句。它自己进行字符串替换，并将生成的字符串作为常量发送到后端。所以原则上，你可以在任何地方使用它的参数替换功能，结果文字在语法上是有效的。

因此，无论哪种方式，您建议做的事情都很好。

# javascript - 页面加载后立即失效

> ID：13887970
> 
> 赞同：2
> 
> 时间：2012-12-15T00:04:10.460
> 
> 标签：javascript, youtube-api, youtube-javascript-api

[演示](http://www.olmasigereken.com/demo2/)中有一个 Youtube 无铬 Javascript 播放器。除非用户单击播放器下方的播放列表图片，否则不会显示标题和时间。要显示标题和时间，用户必须单击一些播放列表图像或必须等待下一个视频。我希望在第一次视频自动加载后无需单击任何内容即可编写标题和时间。javascript 函数顺序可能有问题。除了这个，我什么都没有想到。

所有代码都在下面，以帮助将来的人

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" lang="en"/>
<title>title</title>
<link rel="stylesheet" type="text/css" href="style.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2/swfobject.js"></script>  

</head>
<body> 

<div class="ikinciSol">
                <a href="javascript:void(0);" onclick="play();">Play</a>
                -
                <a href="javascript:void(0);" onclick="pause();">Pause</a>
                -
                <a href="javascript:void(0);" onclick="stop();">Stop</a>
                <div id="videoTime">
                    <span id="videoCurrentTime"></span>
                    <span id="videoDuration"></span>
                </div>
                <div id="ytplayer_status"></div>
                <a name="ytplayer"></a>
<div id="ytplayer">You need Flash player 10+ and JavaScript enabled to view this video.</div>
<div id="ytplayer_div2"></div>

  <script type="text/javascript"> 
  //
  // YouTube JavaScript API Player With Playlist
  // http://911-need-code-help.blogspot.com/2009/10/youtube-javascript-player-with-playlist.html
  // Revision 2 [2012-03-24]
  //
  // Prerequisites
  // 1) Create following elements in your HTML:
  // -- a) ytplayer: a named anchor
  // -- b) ytplayer_div1: placeholder div for YouTube JavaScript Player
  // -- c) ytplayer_div2: container div for playlist
  // 2) Include SWFObject library from http://code.google.com/p/swfobject/
  //
  // Variables
  // -- ytplayer_playlist: an array containing YouTube Video IDs
  // -- ytplayer_playitem: index of the video to be played at any given time
  //
  var ytplayer_playlist = [ ];
  var ytplayer_playitem = 0;
  swfobject.addLoadEvent( ytplayer_render_player );
  swfobject.addLoadEvent( ytplayer_render_playlist );
  function ytplayer_render_player( )
  {
     swfobject.embedSWF
    (
      'http://www.youtube.com/apiplayer?video_id='+ ytplayer_playlist[ ytplayer_playitem ].videoid + '&enablejsapi=1&autoplay=1&loop=1&version=3&rel=0&fs=1&playerapiid=ytplayer',
      'ytplayer',
      '400',
      '225',
      '10',
      null,
      null,
      {
        allowScriptAccess: 'always',
        allowFullScreen: 'true'
      },
      {
        id: 'ytplayer'
      }
    );

  }

    // Update a particular HTML element with a new value
    function updateHTML(elmId, value) {
      var elem = document.getElementById(elmId);
      if(typeof elem !== 'undefined' && elem !== null) {
        document.getElementById(elmId).innerHTML = value;
      }
    }

//Converting seconds minute:second
function secondsToHms(d) {
d = Number(d);
var h = Math.floor(d / 3600);
var m = Math.floor(d % 3600 / 60);
var s = Math.floor(d % 3600 % 60);
return ((h > 0 ? h + ":" : "") + (m > 0 ? (h > 0 && m < 10 ? "0" : "") + m + ":" : "0:") + (s < 10 ? "0" : "") + s); }

// Display information about the current state of the player
function updatePlayerInfo() {
    // Also check that at least one function exists since when IE unloads the
    // page, it will destroy the SWF before clearing the interval.
    if(ytplayer && ytplayer.getDuration) {
        updateHTML("videoCurrentTime", secondsToHms(ytplayer.getCurrentTime())+' /');
        updateHTML("videoDuration", secondsToHms(ytplayer.getDuration()));
        updateHTML("bytesTotal", ytplayer.getVideoBytesTotal());
        updateHTML("startBytes", ytplayer.getVideoStartBytes());
        updateHTML("bytesLoaded", ytplayer.getVideoBytesLoaded());
        updateHTML("volume", ytplayer.getVolume());
    }
}

  function ytplayer_render_playlist( )
  {
    for ( var i = 0; i < ytplayer_playlist.length; i++ )
    {
      var img = document.createElement( "img" );
      img.src = "http://img.youtube.com/vi/" + ytplayer_playlist[ i ].videoid + "/default.jpg";
      var a = document.createElement( "a" );
      a.href = "#ytplayer";
      //
      // Thanks to some nice people who answered this question:
      // http://stackoverflow.com/questions/1552941/variables-in-anonymous-functions-can-someone-explain-the-following
      //
      a.onclick = (
        function( j )
        {
          return function( )
          {
            ytplayer_playitem = j;
            ytplayer_playlazy( 1000 );
          };
        }
      )( i );
      a.appendChild( img );
      document.getElementById( "ytplayer_div2" ).appendChild( a );
    }
  }
  function ytplayer_playlazy( delay )
  {
    //
    // Thanks to the anonymous person posted this tip:
    // http://www.tipstrs.com/tip/1084/Static-variables-in-Javascript
    //
    if ( typeof ytplayer_playlazy.timeoutid != 'undefined' )
    {
      window.clearTimeout( ytplayer_playlazy.timeoutid );
    }
    ytplayer_playlazy.timeoutid = window.setTimeout( ytplayer_play, delay );
  }
  function ytplayer_play( )
  {
    var o = document.getElementById( 'ytplayer' );
    if ( o )
    {
      o.loadVideoById( ytplayer_playlist[ ytplayer_playitem ].videoid );
      document.getElementById( "ytplayer_status" ).innerHTML = ytplayer_playlist[ ytplayer_playitem ].title;
      setInterval(updatePlayerInfo, 250);

    }
  }
  //
  // Ready Handler (this function is called automatically by YouTube JavaScript Player when it is ready)
  // * Sets up handler for other events
  //
  function onYouTubePlayerReady( playerid )
  {
    var o = document.getElementById( 'ytplayer' );
    if ( o )
    {
      o.addEventListener( "onStateChange", "ytplayerOnStateChange" );
      o.addEventListener( "onError", "ytplayerOnError" );
    }
  }
  //
  // State Change Handler
  // * Sets up the video index variable
  // * Calls the lazy play function
  //
  function ytplayerOnStateChange( state )
  {
    if ( state == 0 )
    {
      ytplayer_playitem += 1;
      ytplayer_playitem %= ytplayer_playlist.length;
      ytplayer_playlazy( 1000 );
    }
  }
  //
  // Error Handler
  // * Sets up the video index variable
  // * Calls the lazy play function
  //
  function ytplayerOnError( error )
  {
    if ( error )
    {
      ytplayer_playitem += 1;
      ytplayer_playitem %= ytplayer_playlist.length;
      ytplayer_playlazy( 1000 );
    }
  }
  //
  // Add items to the playlist one-by-one
  //
  ytplayer_playlist.push( 
  {
      videoid: 'tGvHNNOLnCk',
      title: 'title1'
  } 
  );
    ytplayer_playlist.push( 
  {
      videoid: '_-8IufkbuD0',
      title: 'title2'
  } 
  );
    ytplayer_playlist.push( 
  {
      videoid: 'wvsboPUjrGc',
      title: "title3"
  } 
  );
    ytplayer_playlist.push( 
  {
      videoid: '8To-6VIJZRE',
      title: 'title4'
  } 
  );
    ytplayer_playlist.push( 
  {
      videoid: '8pdkEJ0nFBg',
      title: 'title5'
  } 
  );

function play() {

  if (ytplayer) {

    document.getElementById('ytplayer').playVideo();

  }

}

function pause() {

  if (ytplayer) {

    document.getElementById('ytplayer').pauseVideo();

  }

}

function stop() {

  if (ytplayer) {

    document.getElementById('ytplayer').stopVideo();

  }

}

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T00:28:39.777

为什么不包括：

`document.getElementById( "ytplayer_status" ).innerHTML = ytplayer_playlist[ ytplayer_playitem ].title;`

在如下所示的更新功能中，我所做的更改是：

*   我将设置标题功能添加到更新功能。
*   我将 setTimeout 更新功能添加到正文 onload 事件
*   取出设置的标题和超时时间`ytplayer_play`

这是更正：

[http://jsfiddle.net/KpTaA/1/](http://jsfiddle.net/KpTaA/1/)

# objective-c - OS X 通知中心字体

> ID：13887973
> 
> 赞同：0
> 
> 时间：2012-12-15T00:04:41.860
> 
> 标签：objective-c, xcode, macos, cocoa, interface-builder

我想在我的应用程序中有一个通知中心之类的字体，例如这种带有黑色轮廓的白色清晰字体，但我很难在 IB 中完成它。

有谁知道苹果使用什么字体类型、大小等，以及如何复制它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T00:52:47.870

对于应用程序名称，文本显示为带有黑色阴影的 Lucida Grande 14 粗体。很难确定确切的投影参数，但我认为它是黑色的，偏移量为 -1。

# jquery - 带有搜索栏的 Javascript 上下文菜单

> ID：13887976
> 
> 赞同：0
> 
> 时间：2012-12-15T00:05:04.137
> 
> 标签：jquery

使用 JQuery，我想创建一个带有搜索栏的 Javascript 上下文菜单。搜索栏将允许用户使用上下文菜单搜索要执行的操作。搜索菜单将返回诸如“剪切”、“复制”或“粘贴”之类的结果。有没有办法使用 HTML5 和 JavaScript 来实现这一点？

这是 jsfiddle 上未完成的实现：http: [//jsfiddle.net/fELma/292/](http://jsfiddle.net/fELma/292/)

另外，我还没有弄清楚如何使用 event.target 选择 div 的所有子元素：

```
$(document).bind("click", function(event) {
    if (!$(event.target).is(".custom-menu")) { //how can I select all the child elements of .custom-menu?
        $("div.custom-menu").hide();
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T02:08:56.930

> 搜索栏将允许用户使用上下文菜单搜索要执行的操作。

[jQuery UI](http://jqueryui.com/)实现了[Autocomplete 小部件](http://jqueryui.com/autocomplete/)以及许多其他类型的用户界面控件。您需要编写代码来确定当前选择的任何元素的可能操作并相应地更新小部件。

> 搜索菜单将返回“剪切”、“复制”或“粘贴”等结果

请参阅[如何使用 jQuery 将文本复制到客户端的剪贴板？](https://stackoverflow.com/questions/1539641/copy-text-to-the-clients-clipboard-using-jquery)，其中提到了在 Internet Explorer 以外的浏览器中访问系统剪贴板的安全限制。有些人使用 Flash 来解决此限制，但在您的情况下，您必须将 Flash 小程序覆盖在“剪切”或“复制”菜单项上。我不知道绕过“粘贴”限制的方法。

您可以实现自己的剪贴板，尽管这可能会使可能尝试在您的站点和其他应用程序之间复制和粘贴的用户感到困惑。他们必须记住使用`Ctrl`+`C`和`Ctrl`+`V`而不是您的自定义菜单。

> 另外，我还没有弄清楚如何使用 event.target 选择 div 的所有子元素：

您可以将`.custom-menu, .custom-menu > *`其用作选择器，或者如果您想包含所有后代（而不仅仅是直接子代）`.custom-menu *`，.

在您的情况下，您可以使用[.on()](http://api.jquery.com/on/)而不是自己检查 event.target ：

```
$(document).on("click", ".custom-menu, .custom-menu *", function(event) {
    $("div.custom-menu").hide();
});​ 
```

（在早于 1.7 的 jQuery 版本中，请改用[.delegate()](http://api.jquery.com/delegate/)。）

# .net - 如何在文本框中搜索单词并将其替换为 textchanged 上的单词？

> ID：13887977
> 
> 赞同：-2
> 
> 时间：2012-12-15T00:05:18.350
> 
> 标签：.net, regex, vb.net, string, visual-studio-2010

当用户输入我的文本框时，我希望它自动更正几个单词，如果它们输入时没有以大写字母开头。这有点像 Visual Studio 如何更正 vb 语法。这方面的一个例子是：

用户键入“else”，它会自动将其更正为“Else”。我知道我需要它在 textchanged 事件上执行此操作。我只是不知道该怎么做。

我正在使用 vb.net。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:39:47.593

如果您的问题与起始上限有关，那么这是我在项目中使用的代码。

```
Public Sub StartCaps(ByRef mCtrl As Object)
    Dim mTypeName As String
    mTypeName = TypeName(mCtrl)
    Select Case mTypeName
        Case "TextBox"
            Dim sel_start As Integer, sel_length As Integer
            Dim txtProperCase As TextBox
            txtProperCase = CType(mCtrl, TextBox)
            sel_start = txtProperCase.SelectionStart
            sel_length = txtProperCase.SelectionLength
            txtProperCase.Text = StrConv(txtProperCase.Text, VbStrConv.ProperCase)
            txtProperCase.SelectionStart = sel_start
            txtProperCase.SelectionLength = sel_length
        Case "ComboBox"
            Dim sel_start As Integer, sel_length As Integer
            Dim cmbProperCase As ComboBox
            cmbProperCase = CType(mCtrl, ComboBox)
            sel_start = cmbProperCase.SelectionStart
            sel_length = cmbProperCase.SelectionLength
            cmbProperCase.Text = StrConv(cmbProperCase.Text, VbStrConv.ProperCase)
            cmbProperCase.SelectionStart = sel_start
            cmbProperCase.SelectionLength = sel_length
        Case "DataGridView"
            Dim grdProperCase As DataGridView, mCell As DataGridViewCell
            grdProperCase = CType(mCtrl, DataGridView)
            If Not grdProperCase Is Nothing Then
                mCell = grdProperCase.CurrentCell
                If Not mCell Is Nothing AndAlso Not mCell.Value Is Nothing Then
                    mCell.Value = StrConv(mCell.Value.ToString, VbStrConv.ProperCase)
                End If
            End If
    End Select
End Sub 
```

这是从控件 TextChanged 事件调用

```
Private Sub txtSname_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles txtSname.TextChanged, txtName.TextChanged
    StartCaps(sender)
End Sub 
```

-------------- 它可能对您的代码有所帮助 ------ 祝你好运 ---

# jquery - 对 Jquery 创建的项目的计算不起作用

> ID：13887978
> 
> 赞同：1
> 
> 时间：2012-12-15T00:05:22.807
> 
> 标签：jquery, jquery-selectors

我有这段代码-完美运行

```
$('.canti,.precio').change(function() {
 var total = 0;
 var $item = $(this).parent();
 var canti = $item.find(".canti").val();
 var precio = $item.find(".precio").val();  
 total = parseFloat(canti * precio); 
 $item.find(".subto").attr("value", total); 
}); 
```

它根据字段集进行计算

```
<fieldset class="item">
<input name="item[]" type"text" value="" />
<input class="canti" name="cantidad[]" type"text" value="" />
<input class="precio" name="preciounitario[]" type"text" value="" />
<input class="subto" name="importe[]" type"text"value="" readonly="readonly"/>
</fieldset> 
```

我有多个实际的字段集，并且效果很好。然而，我希望用户能够根据需要添加，而不是最初有 X 字段集，所以这样写：

```
var newFieldset='<fieldset class="item"><input name="item[]" type"text" value="" /><input class="canti" name="cantidad[]" type"text"  value="" /><input class="precio" name="preciounitario[]" type"text"  value="" /><input class="subto" name="importe[]" type"text"value="" readonly="readonly"/></fieldset>'
$(".add").click(function(){
    $(".add").before(newFieldset);
}); 
```

再次 - 完美地工作并添加了一个新的字段集但是在新的“虚拟”字段集中对 .canti 和 .precio 项目的计算没有做任何事情。

有任何想法吗？我希望做的甚至可能吗？

[在http://www.cristalyaluminiodiestro.com/estimate-create-testing](http://www.cristalyaluminiodiestro.com/estimate-create-testing)有一个更完整的版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:06:25.633

需要**委托事件**

您可以使用 jQuery`.on()`方法

```
$('body').on('change','.canti,.precio' ,function() { 
```

这是因为您添加事件的方式不适用于动态创建的元素

'body' 可以替换为最近的静态父容器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T00:07:15.257

是的，这是可能的，您只需要将事件处理程序附加到作为所有祖先的元素，这可以使用[以下`on`方法](http://api.jquery.com/on/)：

```
$('body').on('change', '.canti,.precio', function() { ... }); 
```

之所以如此，是因为更改处理程序仅附加到`'.canti,.precio'`在 DOM 就绪时通过过滤器的元素 - 您动态添加的元素显然不会存在，因此不会附加处理程序。

在上面的示例中，我使用 body 元素作为所有元素的共同祖先，如果您能够这样做，最好使用更接近的共同祖先来实现性能共振。

# c++ - c std::vector 一分为二

> ID：13887979
> 
> 赞同：10
> 
> 时间：2012-12-15T00:05:40.253
> 
> 标签：c++, arrays, vector, split, runtime

是否有一种简单且运行时有效的方法可以在 c++ 中获取 std::vector<> 并将其分成两半成其他两个向量？

因为现在我正在这样做：

```
std::vector<> v1, v2;
for(int i = 0; i < vector.size(); i++)
{
    if(i < vector.size()/2) v1.push_back(vector[i]);
    else v2.push_back(vector[i]);
} 
```

它在 O(n) 时间内运行，这是我必须经常执行的操作。那么有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-15T00:09:07.780

如果你真的需要 2 个向量，并且你不能在评论中使用 GMan 的建议：

```
// where v1 is your original vector
std::vector<T> v2(
    std::make_move_iterator(v1.begin() + v1.size()/2),
    std::make_move_iterator(v1.end()));
v1.erase(v1.begin() + v1.size()/2, v1.end()); 
```

它仍然是 O(n)，但你不能做得比这更好。

如果您需要将原始向量分开：

```
std::vector<T> v2(v1.begin(), v1.begin() + v1.size()/2),
               v3(v1.begin() + v1.size()/2, v1.end()); 
```

# c# - Spring.Social.Dropbox API 在成功授权时对 C# 进行回调

> ID：13887982
> 
> 赞同：0
> 
> 时间：2012-12-15T00:05:47.967
> 
> 标签：c#, dropbox, spring.net

我目前正在考虑将 Dropbox 添加到我的 c# 软件中。我正在`spring.social`使用[https://github.com/SpringSource/spring-net-social-dropbox](https://github.com/SpringSource/spring-net-social-dropbox)。

我有以下代码来进行身份验证

```
private void authenticateDropbox()
        {
            try
            {
                DropboxServiceProvider dropboxServiceProvider = new DropboxServiceProvider(dropboxAppKey, dropboxAppSecret, AccessLevel.AppFolder);
                //lblStatus.Content = "Getting request Token";

                OAuthToken oauthToken = dropboxServiceProvider.OAuthOperations.FetchRequestTokenAsync(null, null).Result;
                //lblStatus.Content = "Request token retrieved";

                OAuth1Parameters parameters = new OAuth1Parameters();
                string authenticateUrl = dropboxServiceProvider.OAuthOperations.BuildAuthorizeUrl(oauthToken.Value, parameters);
                //lblStatus.Content = "Redirecting user for authentication";
                Process.Start(authenticateUrl);

            }
            catch (AggregateException ex)
            {
                MessageBox.Show("AggregateException: Failed to authenticate\n\n" + ex.Message, "Authentication Error", MessageBoxButton.OK, MessageBoxImage.Error);
            }
            catch (Exception ex)
            {
                MessageBox.Show("General Exception: Failed to authenticate\n\n" + ex.Message, "Authentication Error", MessageBoxButton.OK, MessageBoxImage.Error);
            } 
```

我成功加载了我的默认浏览器，我可以允许该应用程序并获得成功页面。同样，在它完成该`Process.start()`方法后，它要求用户在显示成功页面后按 Enter 继续，但是，我在 wpf 应用程序中执行此操作，我真的不想要求用户在浏览器授权后，按一个按钮使我的程序继续运行。

我在`FetchRequestTokenAsync`函数中看到有一个回调参数，但我不确定如何执行此操作，或者即使这是我想要的。

基本上我想要的是当浏览器说授权成功时它会关闭浏览器并且 C# 拾取它已成功授权然后继续。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T07:53:16.890

`Process.Start()`在控制台快速启动中使用，但如果您使用的是 WPF 应用程序，则应使用该`WebBrowser`控件加载授权页面。然后注册到`Navigating`事件，知道何时调用成功回调页面。

查看 zip 包中的 Windows Phone 7 快速入门，您可以轻松地将其移植到 WPF。 [https://github.com/SpringSource/spring-net-social-dropbox/tree/master/examples/Spring.WindowsPhoneQuickStart/Spring.WindowsPhoneQuickStart](https://github.com/SpringSource/spring-net-social-dropbox/tree/master/examples/Spring.WindowsPhoneQuickStart/Spring.WindowsPhoneQuickStart)

# java - 结合 for 和 while 循环 (Java)

> ID：13887990
> 
> 赞同：0
> 
> 时间：2012-12-15T00:07:06.023
> 
> 标签：java, loops, for-loop, while-loop

我是 Java 新手，我正在尝试制作一个允许用户输入 100 个数字的程序，如果用户输入“0”，那么该程序应该打印最小、最大、总和和所有数字。我得到了所有的工作，但没有退出并全部打印出来。我的老师说了一些关于使用 while 循环的事情，但是当你有一个 for 循环时，这怎么可能呢？

问候

```
public static void main(String[] args) {
    int[] list = new int[100];
    int min = 0;
    int max = 0;
    int sum = 0;
    boolean first = true;

    Scanner scan = new Scanner(System.in);
    while(list[i] != 0) {
        for (int i = 0; i < list.length; i++) {

            System.out.print("Enter number (0 to exit) " + (1 + i) + ":");
            list[i] = scan.nextInt();
        }

        for (int i = 0; i < list.length; i++) {

            if (first == true) {

            min = list[i];
            first = false;
        }

        if (list[i] < min) {

            min = list[i];
        }

        else if (list[i] > max) {

            max = list[i];
        }

        sum = list[i] + sum;

    }

    if (list[i] == 0) {

    System.out.print("Numbers are: " + list[0] + ", ");

    for (int i = 1; i < list.length; i++)

    System.out.print(list[i] + ", ");
    System.out.println();

    System.out.println("Smallest number is: " + min);
    System.out.println("Largest numeber is: " + min);
    System.out.println("Sum is: " + sum);
    }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:51:54.980

您只需要一个 while 循环来执行此操作，如果需要，还需要一个 for 循环来打印数组：

```
Scanner scan = new Scanner(System.in);
int i = 0;
int sum = 0;
int maxValue = Integer.MIN_VALUE;
int[] history = new int[100];
System.out.println("INPUT:");
int option = scan.nextInt();
while (option != 0 && i <= 100)
{
    if (option > maxValue)
        maxValue=option;
    sum += option;
    history[i] = option;
    option = scan.nextInt();
    i++;
}
System.out.println("OUTPUT: \n" + "SUM: " + sum + "\n MAX VALUE: " + maxValue);
for (int x : history)
    System.out.print(x + ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T00:11:51.267

你有混乱的代码。最好使用这样的模式：

```
while (true) {
    // read next
    if (input == 0) 
        break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T00:38:51.203

这是方法的主体，它将按照您的要求执行。我没有使用过while循环（但实际上，for循环在内部是一种while循环）。

```
int size = 100; // Set the number of numbers to input.
int[] list = new int[size]; // Create an array with 'size' elements.
int min = Integer.MAX_VALUE; // Set the highest possible integer as start value.
int max = 0; // Set the minimum to zero, assuming that the user won't input negative numbers.
int sum = 0; // Initialize the sum of the numbers in the list.

Scanner scan = new Scanner(System.in);

for (int i = 0; i < size; i++) { // Run 'size' times the process of inputting a number.
    System.out.print("Enter number (0 to exit) " + (i + 1) + ": ");
    int number = scan.nextInt();
    if (number == 0) { // Quit program if input equals '0'
        System.out.println("Exiting...");
        break;
    }
    list[i] = number; // Add the current number to the list
    sum += number; // Add the number to the total
    if (number < min) { // If the number is smaller than the previous one, set this number as the smallest
        min = number;
    }
    if (number > max) { // If the number is greater than the previous smallest number, set this number as the greatest
        max = number;
    }
}

// Output all numbers in the list
for (int i = 0; i < list.length; i++) {
    if (list[i] != 0) {
        System.out.print((i == 0 ? "" : ", ") + list[i]);
    }
}

// You see the snippet (i == 0 ? "" : ", ")
// That is a shorthand if-else statement:
// If i equals 0, then "" (empty string), else ", " (comma and space).
// The statement
//     System.out.print((i == 0 ? "" : ", ") + list[i])
// is the same as
//     if (i == 0) {
//         System.out.println("") + list[i];
//     }
//     else {
//         System.out.println(", ") + list[i];
//     }

System.out.println("Smallest number is: " + min);
System.out.println("Largest numeber is: " + max);
System.out.println("Sum is: " + sum); 
```